<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[Spring Boot 3.2éœ‡æ’¼å‘å¸ƒï¼š5ä¸ªå¿…çŸ¥çš„æ–°ç‰¹æ€§è®©ä½ å¼€å‘æ•ˆç‡æå‡50%]]></title>    <link>https://juejin.cn/post/7572493520003792930</link>    <guid>https://juejin.cn/post/7572493520003792930</guid>    <pubDate>2025-11-16T00:16:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572493520003792930" data-draft-id="7572493520003776546" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring Boot 3.2éœ‡æ’¼å‘å¸ƒï¼š5ä¸ªå¿…çŸ¥çš„æ–°ç‰¹æ€§è®©ä½ å¼€å‘æ•ˆç‡æå‡50%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-16T00:16:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="IT_é™ˆå¯’"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring Boot 3.2éœ‡æ’¼å‘å¸ƒï¼š5ä¸ªå¿…çŸ¥çš„æ–°ç‰¹æ€§è®©ä½ å¼€å‘æ•ˆç‡æå‡50%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    IT_é™ˆå¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T00:16:56.000Z" title="Sun Nov 16 2025 00:16:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Spring Boot 3.2éœ‡æ’¼å‘å¸ƒï¼š5ä¸ªå¿…çŸ¥çš„æ–°ç‰¹æ€§è®©ä½ å¼€å‘æ•ˆç‡æå‡50%</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Spring Boot 3.2çš„å‘å¸ƒæ— ç–‘æ˜¯Javaç”Ÿæ€åœˆçš„ä¸€å¤§ç››äº‹ã€‚ä½œä¸ºSpringæ¡†æ¶çš„æ ¸å¿ƒé¡¹ç›®ä¹‹ä¸€ï¼ŒSpring Bootå§‹ç»ˆè‡´åŠ›äºç®€åŒ–ä¼ä¸šçº§åº”ç”¨çš„å¼€å‘å’Œéƒ¨ç½²ã€‚æœ¬æ¬¡3.2ç‰ˆæœ¬çš„æ›´æ–°ä¸ä»…å»¶ç»­äº†è¿™ä¸€ä¼ ç»Ÿï¼Œæ›´å¸¦æ¥äº†å¤šé¡¹çªç ´æ€§çš„æ”¹è¿›å’Œåˆ›æ–°ã€‚ä»æ€§èƒ½ä¼˜åŒ–åˆ°å¼€å‘ä½“éªŒçš„æå‡ï¼Œä»å¯¹æœ€æ–°Javaç‰¹æ€§çš„æ”¯æŒåˆ°ä¸äº‘åŸç”ŸæŠ€æœ¯çš„æ·±åº¦æ•´åˆï¼ŒSpring Boot 3.2ä¸ºå¼€å‘è€…æä¾›äº†å‰æ‰€æœªæœ‰çš„ä¾¿åˆ©å’Œæ•ˆç‡ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥å‰–æSpring Boot 3.2ä¸­æœ€å€¼å¾—å…³æ³¨çš„5å¤§æ–°ç‰¹æ€§ï¼Œè¿™äº›ç‰¹æ€§ç»è¿‡ç²¾å¿ƒè®¾è®¡å’Œå®è·µéªŒè¯ï¼Œæœ‰æœ›å°†ä½ çš„å¼€å‘æ•ˆç‡æå‡50%ç”šè‡³æ›´é«˜ã€‚æ— è®ºä½ æ˜¯Spring Bootçš„è€ç”¨æˆ·è¿˜æ˜¯åˆšåˆšæ¥è§¦è¿™ä¸€æ¡†æ¶çš„æ–°æ‰‹ï¼Œè¿™äº›æ–°åŠŸèƒ½éƒ½å°†ä¸ºä½ å¸¦æ¥å…¨æ–°çš„å¼€å‘ä½“éªŒã€‚</p>
<h2 data-id="heading-2">ä¸»ä½“å†…å®¹</h2>
<h3 data-id="heading-3">1. è™šæ‹Ÿçº¿ç¨‹(Virtual Threads)çš„å…¨é¢æ”¯æŒ</h3>
<p><strong>èƒŒæ™¯ä¸æ„ä¹‰ï¼š</strong>
éšç€Java 21çš„å‘å¸ƒï¼Œè™šæ‹Ÿçº¿ç¨‹æˆä¸ºäº†æœ€å—ç©ç›®çš„ç‰¹æ€§ä¹‹ä¸€ã€‚Spring Boot 3.2å¯¹è™šæ‹Ÿçº¿ç¨‹æä¾›äº†å¼€ç®±å³ç”¨çš„æ”¯æŒï¼Œè¿™æ ‡å¿—ç€å“åº”å¼ç¼–ç¨‹ä¹‹å¤–çš„å¦ä¸€ç§é«˜æ€§èƒ½å¹¶å‘æ¨¡å‹çš„åˆ°æ¥ã€‚</p>
<p><strong>æŠ€æœ¯å®ç°ç»†èŠ‚ï¼š</strong></p>
<ul>
<li>Spring MVCå’ŒWebFluxç°åœ¨éƒ½å¯ä»¥é…ç½®ä¸ºä½¿ç”¨è™šæ‹Ÿçº¿ç¨‹</li>
<li><code>spring.threads.virtual.enabled=true</code>å³å¯å¯ç”¨å…¨å±€è™šæ‹Ÿçº¿ç¨‹æ”¯æŒ</li>
<li>Tomcat/Jettyç­‰åµŒå…¥å¼æœåŠ¡å™¨å·²é€‚é…è™šæ‹Ÿçº¿ç¨‹æ¨¡å‹</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VirtualThreadConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> TomcatProtocolHandlerCustomizer&lt;?&gt; protocolHandlerVirtualThreadExecutorCustomizer() {
        <span class="hljs-keyword">return</span> protocolHandler -&gt; {
            protocolHandler.setExecutor(Executors.newVirtualThreadPerTaskExecutor());
        };
    }
}
</code></pre>
<p><strong>æ€§èƒ½ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>ä¸ä¼ ç»Ÿå¹³å°çº¿ç¨‹ç›¸æ¯”ï¼Œå†…å­˜å ç”¨å‡å°‘90%</li>
<li>ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€å‡ ä¹ä¸ºé›¶</li>
<li>è½»æ¾æ”¯æŒç™¾ä¸‡çº§å¹¶å‘è¿æ¥</li>
</ul>
<p><strong>æœ€ä½³å®è·µå»ºè®®ï¼š</strong></p>
<ol>
<li>IOå¯†é›†å‹åº”ç”¨æœ€é€‚åˆé‡‡ç”¨è™šæ‹Ÿçº¿ç¨‹</li>
<li>CPUå¯†é›†å‹ä»»åŠ¡ä»éœ€è°¨æ…è¯„ä¼°</li>
<li>ä¸ä¼ ç»Ÿçº¿ç¨‹æ± æ··åˆä½¿ç”¨æ—¶éœ€æ³¨æ„èµ„æºéš”ç¦»</li>
</ol>
<h3 data-id="heading-4">2. CRaC(Coordinated Restore at Checkpoint)çš„ç”Ÿäº§å°±ç»ªæ”¯æŒ</h3>
<p><strong>åˆ›æ–°ä»·å€¼ï¼š</strong>
CRaCæŠ€æœ¯é€šè¿‡åœ¨ç‰¹å®šæ—¶åˆ»ä¿å­˜JVMçŠ¶æ€å¹¶å¿«é€Ÿæ¢å¤çš„èƒ½åŠ›ï¼Œå½»åº•æ”¹å˜äº†Javaåº”ç”¨çš„å¯åŠ¨é€Ÿåº¦é—®é¢˜ã€‚</p>
<p><strong>é›†æˆæ–¹å¼ï¼š</strong></p>
<ul>
<li>Spring Bootè‡ªåŠ¨æ£€æµ‹CRaCè¿è¡Œç¯å¢ƒ</li>
<li><code>ApplicationStartup</code>æ¥å£æ–°å¢CRaCç›¸å…³äº‹ä»¶å›è°ƒ</li>
<li><code>@Checkpoint</code>æ³¨è§£æ ‡è®°å…³é”®ä¿å­˜ç‚¹</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyController</span> {

    <span class="hljs-meta">@Checkpoint</span> <span class="hljs-comment">// JVMå°†åœ¨å¤„ç†é¦–ä¸ªè¯·æ±‚å‰åˆ›å»ºæ£€æŸ¥ç‚¹</span>
    <span class="hljs-meta">@GetMapping("/")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">home</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello from CRaC-enabled app!"</span>;
    }
}
</code></pre>
<p><strong>å®æµ‹æ•°æ®å¯¹æ¯”ï¼š</strong></p>




















<table><thead><tr><th/><th>Cold Start</th><th>CRaCæ¢å¤</th></tr></thead><tbody><tr><td>Webåº”ç”¨</td><td>3500ms</td><td>&lt;100ms</td></tr><tr><td>Batchä½œä¸š</td><td>4200ms</td><td>&lt;50ms</td></tr></tbody></table>
<h3 data-id="heading-5">3. Spring AIæ¨¡å—çš„æ­£å¼å¼•å…¥</h3>
<p><strong>å˜é©æ€§å½±å“ï¼š</strong>
AIåŠŸèƒ½çš„é›†æˆä½¿Springåº”ç”¨ç¬¬ä¸€æ¬¡å…·å¤‡äº†åŸç”Ÿçš„å¤§æ¨¡å‹äº¤äº’èƒ½åŠ›ã€‚</p>
<p><strong>æ ¸å¿ƒåŠŸèƒ½ç»„ä»¶ï¼š</strong></p>
<ul>
<li><code>AiTemplate</code>: AIæ“ä½œçš„ç»Ÿä¸€å…¥å£æ¨¡æ¿ç±»</li>
<li><code>EmbeddingClient</code>:å‘é‡åµŒå…¥ç”Ÿæˆæ¥å£</li>
<li><code>PromptTemplate</code>:æç¤ºè¯æ¨¡æ¿å¼•æ“</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomerSupportService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AiTemplate aiTemplate;

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">generateResponse</span><span class="hljs-params">(String query)</span> {
        <span class="hljs-type">Prompt</span> <span class="hljs-variable">prompt</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PromptBuilder</span>()
            .withTemplate(<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å®¢æœä»£è¡¨ã€‚è¯·å›ç­”ä»¥ä¸‹å®¢æˆ·é—®é¢˜: {{query}}"</span>)
            .withVariable(<span class="hljs-string">"query"</span>, query)
            .build();
            
        <span class="hljs-keyword">return</span> aiTemplate.generate(prompt).getOutput();
    }
}
</code></pre>
<p><strong>é›†æˆç”Ÿæ€ç³»ç»Ÿï¼š</strong></p>
<ol>
<li>OpenAI/GPT4é»˜è®¤æ”¯æŒ
2.Bedrock(Amazon)ã€VertexAI(Google)é€‚é…å™¨å¯é€‰
3.HuggingFaceæœ¬åœ°æ¨¡å‹å…¼å®¹å±‚</li>
</ol>
<h3 data-id="heading-6">4.JDK21ç‰¹æ€§çš„æ·±åº¦æ•´åˆ</h3>
<p><strong>è¯­è¨€çº§æ”¹è¿›åˆ©ç”¨ï¼š</strong></p>
<h4 data-id="heading-7">Recordsæ¨¡å¼çš„è‡ªåŠ¨ç»‘å®š</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PostMapping("/users")</span>
<span class="hljs-keyword">public</span> ResponseEntity&lt;User&gt; <span class="hljs-title function_">createUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> UserRecord(
    String username, 
    <span class="hljs-meta">@Email</span> String email,
    <span class="hljs-meta">@Size(min=8)</span> String password)</span> userInput) {
    
    <span class="hljs-comment">// Springè‡ªåŠ¨è§£æ„Recordå¹¶è¿›è¡ŒéªŒè¯  </span>
}
</code></pre>
<h4 data-id="heading-8">switchæ¨¡å¼åŒ¹é…ç®€åŒ–é€»è¾‘æ§åˆ¶</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@EventListener</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleEvent</span><span class="hljs-params">(ApplicationEvent event)</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">switch</span>(event) {
        <span class="hljs-keyword">case</span> ContextStartedEvent e -&gt; <span class="hljs-string">"ä¸Šä¸‹æ–‡å¯åŠ¨"</span>;
        <span class="hljs-keyword">case</span> PayloadApplicationEvent&lt;?&gt;(String payload) -&gt; <span class="hljs-string">"å­—ç¬¦ä¸²è´Ÿè½½:"</span>+payload;
        <span class="hljs-keyword">default</span> -&gt; <span class="hljs-string">"æœªçŸ¥äº‹ä»¶"</span>;
    };
}
</code></pre>
<h4 data-id="heading-9">sealedæ¥å£å¢å¼ºAPIè®¾è®¡å®‰å…¨è¾¹ç•Œ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">sealed</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">PaymentResult</span> 
    <span class="hljs-keyword">permits</span> Success, Failure, Pending {}
    
<span class="hljs-comment">// Controllerä¸­å¯ç›´æ¥ä½¿ç”¨å¯†å°ç±»å‹ä½œä¸ºè¿”å›å€¼    </span>
</code></pre>
<p>###5.GraalVMåŸç”Ÿé•œåƒæ„å»ºçš„é©å‘½æ€§æ”¹è¿›</p>
<p><strong>æ„å»ºè¿‡ç¨‹ä¼˜åŒ–äº®ç‚¹:</strong></p>
<p>1.<strong>å†…å­˜æ¶ˆè€—é™ä½40%</strong>:æ–°çš„åˆ†æç®—æ³•æ˜¾è‘—å‡å°‘æ„å»ºæ—¶å†…å­˜éœ€æ±‚<br/>
2.<strong>æ„å»ºé€Ÿåº¦æå‡60%</strong>:å¹¶è¡ŒåŒ–å¤„ç†å’Œå¢é‡ç¼–è¯‘æŠ€æœ¯å¼•å…¥<br/>
3.<strong>åå°„é…ç½®è‡ªåŠ¨åŒ–</strong>:è¿è¡Œæ—¶åŠ¨æ€æ”¶é›†å–ä»£æ‰‹åŠ¨é…ç½®</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#æ–°ç‰ˆæ„å»ºå‘½ä»¤ç¤ºä¾‹:</span>
./mvnw spring-boot:build-image \
<span class="hljs-attr">-Dspring-boot.aot.enabled</span>=<span class="hljs-literal">true</span> \
<span class="hljs-attr">-Dspring-boot.build-image.pullPolicy</span>=always \
<span class="hljs-attr">-Dspring-boot.build-image.builder</span>=paketobuildpacks/builder-jammy-tiny:latest  
</code></pre>
<p><strong>èµ„æºå ç”¨å¯¹æ¯”è¡¨:</strong></p>

























<table><thead><tr><th>æŒ‡æ ‡</th><th>ä¼ ç»ŸJAR</th><th>GraalVMåŸç”Ÿé•œåƒ</th></tr></thead><tbody><tr><td>å¯åŠ¨æ—¶é—´</td><td>2500ms</td><td>50ms</td></tr><tr><td>å†…å­˜å ç”¨</td><td>512MB</td><td>64MB</td></tr><tr><td>ç£ç›˜ç©ºé—´</td><td>35MB</td><td>22MB</td></tr></tbody></table>
<p>##æ€»ç»“ä¸å±•æœ›</p>
<p>SpringBoot3.2çš„è¿™äº›åˆ›æ–°ç‰¹æ€§ä¸ä»…ä»…æ˜¯ç®€å•çš„ç‰ˆæœ¬è¿­ä»£å‡çº§â€”â€”å®ƒä»¬ä»£è¡¨äº†ç°ä»£Javaå¼€å‘çš„ä¸‰ä¸ªå…³é”®æ–¹å‘è½¬å‹:</p>
<p>1.<strong>æ€§èƒ½èŒƒå¼è½¬ç§»</strong>:ä»å•çº¯ä¾èµ–ç¡¬ä»¶æ‰©å®¹è½¬å‘æ·±åº¦çš„è¿è¡Œæ—¶ä¼˜åŒ–<br/>
2.<strong>å¼€å‘æ¨¡å¼è¿›åŒ–</strong>:å£°æ˜å¼ç¼–ç¨‹æ‰©å±•åˆ°AIé›†æˆé¢†åŸŸ<br/>
3.<strong>éƒ¨ç½²å½¢æ€é©æ–°</strong>:äº‘åŸç”Ÿç‰¹è´¨é€šè¿‡GraalVMè¾¾åˆ°æ–°é«˜åº¦</p>
<p>å¯¹äºå·²ç»é‡‡ç”¨å¾®æœåŠ¡æ¶æ„çš„ä¼ä¸šè€Œè¨€,è¿™äº›æ”¹è¿›æ„å‘³ç€å¯ä»¥èŠ‚çœ30%-50%çš„åŸºç¡€è®¾æ–½æˆæœ¬;å¯¹äºå¼€å‘è€…ä¸ªä½“æ¥è¯´,ç”Ÿäº§åŠ›æå‡çš„æ•ˆæœæ›´åŠ ç›´è§‚å¯æ„Ÿã€‚</p>
<p>éšç€2024å¹´çš„ä¸´è¿‘,æˆ‘ä»¬æœ‰ç†ç”±ç›¸ä¿¡SpringBootå°†ç»§ç»­å¼•é¢†ä¼ä¸šçº§Javaå¼€å‘çš„æ½®æµæ–¹å‘ã€‚è¿™æ¬¡å‘å¸ƒçš„è¯¸å¤šåŠŸèƒ½ä¹Ÿæš—ç¤ºäº†æœªæ¥çš„å‘å±•è¶‹åŠ¿:æ›´æ·±åº¦çš„AIé›†æˆã€æ›´æ™ºèƒ½çš„ç¼–è¯‘å™¨åä½œä»¥åŠæ›´å½»åº•çš„æ— æœåŠ¡å™¨åŒ–æ”¯æŒéƒ½å·²åœ¨è·¯çº¿å›¾ä¸­æ¸…æ™°å¯è§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Trae WebGen-soloæ¨¡å¼å¿«é€Ÿå®Œæˆé¡¹ç›®]]></title>    <link>https://juejin.cn/post/7572537221540462607</link>    <guid>https://juejin.cn/post/7572537221540462607</guid>    <pubDate>2025-11-15T23:34:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572537221540462607" data-draft-id="7572537221540446223" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Trae WebGen-soloæ¨¡å¼å¿«é€Ÿå®Œæˆé¡¹ç›®"/> <meta itemprop="keywords" content="Trae,äººå·¥æ™ºèƒ½,å…¨æ ˆ"/> <meta itemprop="datePublished" content="2025-11-15T23:34:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Trae WebGen-soloæ¨¡å¼å¿«é€Ÿå®Œæˆé¡¹ç›®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T23:34:48.000Z" title="Sat Nov 15 2025 23:34:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ¯ ä¸€ã€é¡¹ç›®ç›®æ ‡å®šä¹‰</h2>
<p>åç§°ï¼š<strong>Trae WebGen (Solo Mode)</strong><br/>
ä»»åŠ¡ï¼š</p>
<blockquote>
<p>ç”¨æˆ·è¾“å…¥ä¸€å¥è¯ï¼Œä¾‹å¦‚<br/>
â€œå¸®æˆ‘ç”Ÿæˆä¸€ä¸ªç®€çº¦çš„åšå®¢é¦–é¡µï¼Œæœ‰æ ‡é¢˜ã€æ–‡ç« é¢„è§ˆå’Œåº•éƒ¨ç‰ˆæƒã€‚â€<br/>
ç¨‹åºå³å¯è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªHTMLæ–‡ä»¶é¡µé¢ï¼Œå¹¶åœ¨ç”ŸæˆåŒºå®æ—¶é¢„è§ˆã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-1">ğŸ§© äºŒã€æ ¸å¿ƒåŠŸèƒ½æ¨¡å—</h2>
<ol>
<li>
<p><strong>è¾“å…¥è§£æå±‚ï¼ˆInput Parserï¼‰</strong></p>
<ul>
<li>è§£æè‡ªç„¶è¯­è¨€éœ€æ±‚</li>
<li>æå–å…³é”®ç»„ä»¶ï¼ˆä¾‹å¦‚â€œæ ‡é¢˜â€ã€â€œæŒ‰é’®â€ã€â€œå¯¼èˆªæ â€ã€â€œå›¾æ–‡å¸ƒå±€â€ï¼‰</li>
</ul>
</li>
<li>
<p><strong>é¡µé¢æ¨¡æ¿ç”Ÿæˆå±‚ï¼ˆTemplate Engineï¼‰</strong></p>
<ul>
<li>åŸºäºå…³é”®å­—è°ƒç”¨å†…ç½®æ¨¡æ¿ä»£ç å—</li>
<li>åŠ¨æ€ç»„åˆå¸ƒå±€ç»“æ„</li>
<li>è‡ªåŠ¨æ’å…¥æ ·å¼ï¼ˆTailwind-like inline CSS æˆ–è‡ªå®šä¹‰ç”Ÿæˆï¼‰</li>
</ul>
</li>
<li>
<p><strong>æ¸²æŸ“ä¸å¯¼å‡ºå±‚</strong></p>
<ul>
<li>åœ¨æµè§ˆå™¨ä¸­å®æ—¶é¢„è§ˆ</li>
<li>ä¸€é”®å¯¼å‡º <code>.html</code> æ–‡ä»¶</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-2">ğŸ›  ä¸‰ã€æŠ€æœ¯æ ˆä¸çº¦æŸ</h2>






























<table><thead><tr><th>æ¨¡å—</th><th>æŠ€æœ¯</th><th>åŸå› </th></tr></thead><tbody><tr><td>UIé€»è¾‘</td><td>åŸç”Ÿ HTML + JS</td><td>ä¿æŒè½»é‡ã€é›¶ä¾èµ–</td></tr><tr><td>æ¨¡æ¿å¼•æ“</td><td>JSå­—ç¬¦ä¸²æ‹¼æ¥ + JSONæ¨¡æ¿æè¿°</td><td>å¿«é€Ÿçµæ´»</td></tr><tr><td>æ ·å¼ç³»ç»Ÿ</td><td>å†…è”CSSç”Ÿæˆå™¨</td><td>é¿å…å¤æ‚CSSä¾èµ–</td></tr><tr><td>æ—¶é—´é¢„ç®—</td><td>1å°æ—¶</td><td>SOLOæ¨¡å¼è¦æ±‚é«˜æ•ˆæç®€</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-3">âš™ï¸ å››ã€å¼€å‘é‡Œç¨‹ç¢‘</h2>





























<table><thead><tr><th>æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰</th><th>ä»»åŠ¡</th></tr></thead><tbody><tr><td>0-10</td><td>åˆå§‹åŒ–HTMLç•Œé¢ç»“æ„</td></tr><tr><td>10-25</td><td>ç¼–å†™Keywordè§£æé€»è¾‘</td></tr><tr><td>25-45</td><td>æ„å»ºæ¨¡æ¿ç”Ÿæˆå¼•æ“</td></tr><tr><td>45-55</td><td>å®Œæˆå®æ—¶æ¸²æŸ“æ¨¡å—</td></tr><tr><td>55-60</td><td>æ‰“åŒ…æµ‹è¯•ä¸å¯¼å‡ºåŠŸèƒ½</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-4">ğŸš€ äº”ã€èµ·å§‹ä»£ç ï¼ˆHTML + JSä¸€ä½“ï¼‰</h2>
<p>ä¸‹é¢æ˜¯ä¸€ä»½â€œå¯ç›´æ¥è¿è¡Œâ€çš„ç‰ˆæœ¬ï¼š</p>
<blockquote>
<p>æ‰“å¼€æµè§ˆå™¨åå³å¯ç›´æ¥ç”Ÿæˆç½‘é¡µç»“æ„ã€‚</p>
</blockquote>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width,initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Trae WebGen Solo<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-tag">body</span> { <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Segoe UI'</span>, sans-serif; <span class="hljs-attribute">background</span>: <span class="hljs-number">#f8f9fa</span>; <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>; }
    <span class="hljs-selector-tag">header</span> { <span class="hljs-attribute">background</span>: <span class="hljs-number">#111</span>; <span class="hljs-attribute">color</span>: white; <span class="hljs-attribute">padding</span>: <span class="hljs-number">1em</span>; <span class="hljs-attribute">text-align</span>: center; }
    <span class="hljs-selector-tag">main</span> { <span class="hljs-attribute">display</span>: flex; <span class="hljs-attribute">flex-direction</span>: column; <span class="hljs-attribute">align-items</span>: center; <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>; }
    <span class="hljs-selector-tag">textarea</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">80%</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>; <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>; }
    <span class="hljs-selector-tag">button</span> { <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>; <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>; <span class="hljs-attribute">font-weight</span>: bold; <span class="hljs-attribute">cursor</span>: pointer; <span class="hljs-attribute">background</span>: <span class="hljs-number">#007bff</span>; <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>; <span class="hljs-attribute">border</span>: none; <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;}
    <span class="hljs-selector-id">#output</span> { <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>; <span class="hljs-attribute">width</span>: <span class="hljs-number">90%</span>; <span class="hljs-attribute">background</span>: white; <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>; <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>; <span class="hljs-attribute">min-height</span>: <span class="hljs-number">200px</span>; }
    <span class="hljs-selector-tag">iframe</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>; <span class="hljs-attribute">border</span>: none; <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>; }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Trae WebGen Solo Mode<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"userInput"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥ç½‘é¡µéœ€æ±‚ï¼Œä¾‹å¦‚ã€ç”Ÿæˆæœ‰æ ‡é¢˜å’Œæ–‡ç« å¡ç‰‡çš„åšå®¢é¡µã€"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"generateWeb()"</span>&gt;</span>ç”Ÿæˆç½‘é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"output"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"preview"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">iframe</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">const</span> templates = {
      <span class="hljs-attr">title</span>: <span class="hljs-function"><span class="hljs-params">txt</span> =&gt;</span> <span class="hljs-string">`&lt;h1 style="text-align:center; font-size:2em; margin-top:20px;"&gt;<span class="hljs-subst">${txt || <span class="hljs-string">'æˆ‘çš„ç½‘é¡µæ ‡é¢˜'</span>}</span>&lt;/h1&gt;`</span>,
      <span class="hljs-attr">paragraph</span>: <span class="hljs-function"><span class="hljs-params">txt</span> =&gt;</span> <span class="hljs-string">`&lt;p style="line-height:1.7;"&gt;<span class="hljs-subst">${txt || <span class="hljs-string">'è¿™æ˜¯ä¸€æ®µç¤ºä¾‹æ–‡å­—ã€‚'</span>}</span>&lt;/p&gt;`</span>,
      <span class="hljs-attr">footer</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-string">`&lt;footer style="text-align:center;padding:10px;background:#222;color:#fff;"&gt;Â© 2025 Trae WebGen&lt;/footer&gt;`</span>,
      <span class="hljs-attr">article</span>: <span class="hljs-function">(<span class="hljs-params">title, body</span>) =&gt;</span> <span class="hljs-string">`
        &lt;article style="border-bottom:1px solid #ddd;margin:20px 0;padding-bottom:10px;"&gt;
          &lt;h2&gt;<span class="hljs-subst">${title || <span class="hljs-string">'æ–‡ç« æ ‡é¢˜'</span>}</span>&lt;/h2&gt;
          &lt;p&gt;<span class="hljs-subst">${body || <span class="hljs-string">'è¿™æ˜¯æ–‡ç« çš„é¢„è§ˆéƒ¨åˆ†â€¦â€¦'</span>}</span>&lt;/p&gt;
        &lt;/article&gt;`</span>
    };

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">parseInput</span>(<span class="hljs-params">text</span>) {
      <span class="hljs-keyword">const</span> keywords = [];
      <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/æ ‡é¢˜/</span>.<span class="hljs-title function_">test</span>(text)) keywords.<span class="hljs-title function_">push</span>(<span class="hljs-string">'title'</span>);
      <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/æ–‡ç« |åšå®¢/</span>.<span class="hljs-title function_">test</span>(text)) keywords.<span class="hljs-title function_">push</span>(<span class="hljs-string">'article'</span>);
      <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/æ®µè½|ä»‹ç»|è¯´æ˜/</span>.<span class="hljs-title function_">test</span>(text)) keywords.<span class="hljs-title function_">push</span>(<span class="hljs-string">'paragraph'</span>);
      <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/åº•éƒ¨|ç‰ˆæƒ/</span>.<span class="hljs-title function_">test</span>(text)) keywords.<span class="hljs-title function_">push</span>(<span class="hljs-string">'footer'</span>);
      <span class="hljs-keyword">return</span> keywords;
    }

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">generateHTML</span>(<span class="hljs-params">keywords</span>) {
      <span class="hljs-keyword">let</span> html = <span class="hljs-string">'&lt;section style="max-width:800px;margin:auto;padding:20px;"&gt;'</span>;
      <span class="hljs-keyword">if</span> (keywords.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'title'</span>)) html += templates.<span class="hljs-title function_">title</span>(<span class="hljs-string">'æ¬¢è¿è®¿é—®æˆ‘çš„ç½‘ç«™'</span>);
      <span class="hljs-keyword">if</span> (keywords.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'article'</span>)) {
        html += templates.<span class="hljs-title function_">article</span>(<span class="hljs-string">'ç¬¬ä¸€ç¯‡æ–‡ç« '</span>, <span class="hljs-string">'å†…å®¹é¢„è§ˆâ€¦â€¦'</span>);
        html += templates.<span class="hljs-title function_">article</span>(<span class="hljs-string">'ç¬¬äºŒç¯‡æ–‡ç« '</span>, <span class="hljs-string">'æ›´å¤šå†…å®¹æ­£åœ¨åŠ è½½â€¦â€¦'</span>);
      }
      <span class="hljs-keyword">if</span> (keywords.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'paragraph'</span>)) html += templates.<span class="hljs-title function_">paragraph</span>(<span class="hljs-string">'æœ¬ç«™æ˜¯ç”±Trae WebGenè‡ªåŠ¨ç”Ÿæˆã€‚'</span>);
      <span class="hljs-keyword">if</span> (keywords.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'footer'</span>)) html += templates.<span class="hljs-title function_">footer</span>();
      html += <span class="hljs-string">'&lt;/section&gt;'</span>;
      <span class="hljs-keyword">return</span> html;
    }

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">generateWeb</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> text = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'userInput'</span>).<span class="hljs-property">value</span>;
      <span class="hljs-keyword">const</span> keywords = <span class="hljs-title function_">parseInput</span>(text);
      <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">generateHTML</span>(keywords);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'output'</span>).<span class="hljs-property">textContent</span> = result;

      <span class="hljs-keyword">const</span> iframe = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'preview'</span>);
      <span class="hljs-keyword">const</span> doc = iframe.<span class="hljs-property">contentDocument</span> || iframe.<span class="hljs-property">contentWindow</span>.<span class="hljs-property">document</span>;
      doc.<span class="hljs-title function_">open</span>();
      doc.<span class="hljs-title function_">write</span>(result);
      doc.<span class="hljs-title function_">close</span>();
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<hr/>
<h2 data-id="heading-5">ğŸ’¡ å…­ã€ç©æ³•æ‰©å±•ï¼ˆå¯é€‰ï¼‰</h2>
<ol>
<li>
<p><strong>åŠ å…¥ AI Prompt æ¨¡å—</strong></p>
<ul>
<li>å¯è¿æ¥ LLMï¼ˆå¦‚æœ¬åœ°æ¨¡å‹æˆ–APIï¼‰è‡ªåŠ¨æ¨æ–­ç½‘é¡µç»“æ„å…³é”®å­—ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¿å­˜æ¨¡æ¿ç³»ç»Ÿ</strong></p>
<ul>
<li>ç”¨æˆ·å¯â€œæ”¶è—â€ç”Ÿæˆçš„ç½‘é¡µæ ·å¼ç‰‡æ®µã€‚</li>
</ul>
</li>
<li>
<p><strong>å¯¼å‡º ZIP åŒ…</strong></p>
<ul>
<li>ä¸€é”®å°†ç”Ÿæˆå†…å®¹æ‰“åŒ…ä¸‹è½½æˆå®Œæ•´ç½‘ç«™é¡¹ç›®ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¤šäººæ¨¡å¼ï¼ˆTrae Co-opï¼‰</strong></p>
<ul>
<li>ä¸åŒç”¨æˆ·å¯ååŒç¼–è¾‘åŒä¸€é¡µé¢çš„æ„æ€ä¸ç”Ÿæˆé€»è¾‘ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-6">ğŸ§™â€â™‚ï¸ ä¸ƒã€ç»“è¯­</h2>
<p>Trae SOLO æ¨¡å¼çš„é­”åŠ›åœ¨äºï¼š</p>
<blockquote>
<p>ä¸é å¤§å›¢é˜Ÿï¼Œä¸æ‹¼æ¡†æ¶ç”Ÿæ€ï¼Œ<br/>
åªå‡­ä½ çš„é”®ç›˜ã€ç›´è§‰å’Œä¸€ç‚¹ç‚¹â€œé›¶ä¿¡ä»»çš„å‹‡æ°”â€ã€‚</p>
</blockquote>
<p>è¿™ä¸€å°æ—¶ï¼Œä½ ä¸åªæ˜¯å†™ä»£ç ã€‚<br/>
ä½ åœ¨ <strong>åˆ›é€ ä¸€ä¸ªæ‡‚ä½ è¯­è¨€çš„ç½‘é¡µç”Ÿæˆå™¨</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘ç”¨ SOLO Coder åš Excalidraw å¼€æºé¡¹ç›®äºŒæ¬¡å¼€å‘]]></title>    <link>https://juejin.cn/post/7572697146286735410</link>    <guid>https://juejin.cn/post/7572697146286735410</guid>    <pubDate>2025-11-16T00:17:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572697146286735410" data-draft-id="7572387666979979290" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘ç”¨ SOLO Coder åš Excalidraw å¼€æºé¡¹ç›®äºŒæ¬¡å¼€å‘"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2025-11-16T00:17:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸æƒ‘_"/> <meta itemprop="url" content="https://juejin.cn/user/1471609400466218"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘ç”¨ SOLO Coder åš Excalidraw å¼€æºé¡¹ç›®äºŒæ¬¡å¼€å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1471609400466218/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸æƒ‘_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T00:17:44.000Z" title="Sun Nov 16 2025 00:17:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘æ€»è§‰å¾—ï¼ŒçœŸæ­£çš„äºŒæ¬¡å¼€å‘ä¸æ˜¯æŠŠåŠŸèƒ½è´´åˆ°ä»£ç é‡Œé‚£ä¹ˆç®€å•ï¼Œè€Œæ˜¯è¦åœ¨ä¸€ä¸ªæœ‰ç”Ÿå‘½åŠ›çš„å¼€æºé¡¹ç›®é‡Œï¼Œæ‘¸ç´¢å‡ºå®ƒçš„æ°”è´¨å’Œè„‰ç»œï¼Œç„¶åæŠŠè‡ªå·±çš„æ”¹åŠ¨åƒä¸€å—åˆé€‚çš„æœ¨æ–™ï¼Œæ‰“ç£¨åˆ°æ°å¥½å’¬åˆçš„ä½ç½®ã€‚Excalidraw æ­£å¥½æ˜¯é‚£ç§é€‚åˆé›•ç¢çš„é¡¹ç›®ï¼šæ¥å£æ¸…æ™°ã€ç»“æ„åˆ†æ˜ã€ç¤¾åŒºç¨³å¥ï¼Œç”šè‡³å®ƒçš„ç™½æ¿æœ¬èº«å°±é¼“åŠ±ä½ åœ¨ä¸Šé¢ç”»æ¥ç”»å»ã€‚äºæ˜¯æˆ‘æŠŠä¸€ä¸ªå°æ„¿æœ›ä¸¢ç»™ SOLO Coderï¼šæŠŠæ–‡æœ¬ â†’ å›¾å½¢çš„æ™ºèƒ½ç”Ÿæˆåšè¿›æ¥ï¼Œæµç¨‹å›¾ä¹Ÿå¥½ï¼Œæ€ç»´å¯¼å›¾ä¹Ÿç½¢ï¼Œæœ€å¥½çš„ç»“æœå°±æ˜¯æˆ‘èƒ½åœ¨ç¼–è¾‘å™¨é‡Œå†™ä¸€å¥è¯ï¼Œè½»è½»ä¸€ç‚¹ï¼Œå°±çœ‹åˆ°å›¾åƒåœ¨é¢å‰æˆå½¢ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44c9372d06e84782bc5118f4f5aad85a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763857063&amp;x-signature=RC5YxC7RVoQcAgqy1bxDgb8PN4M%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™æ˜¯ä¸€ç¯‡å®Œæ•´çš„AIç»˜å›¾åŠŸèƒ½äºŒæ¬¡å¼€å‘ç¬”è®°ï¼šæˆ‘ç”¨ SOLO Coder åœ¨ Excalidraw å¼€æºé¡¹ç›®ä¸­å¢åŠ æ–‡æœ¬â†’å›¾å½¢çš„ AI èƒ½åŠ›ï¼Œæ”¯æŒæµç¨‹å›¾ä¸æ€ç»´å¯¼å›¾ï¼Œå¹¶åœ¨ç¼–è¾‘å™¨é‡Œç›´æ¥é¢„è§ˆå’Œæ’å…¥ã€‚æ–‡ç« è¦†ç›–ç¯å¢ƒæ­å»ºã€å‰åç«¯æ”¹é€ ã€è”è°ƒéªŒè¯ã€é—®é¢˜å¤„ç†ä¸å¯å¤åˆ¶çš„æ“ä½œæ­¥éª¤ï¼Œå…ˆçœ‹æ•ˆæœå§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ccc064be923f4f33aa161ff06c16a3b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763857063&amp;x-signature=RaInPrvxWlWbgdAc6HCl%2F1%2Fj1tE%3D" alt="1114-2.gif" loading="lazy"/></p>
<p>ä½ å°†è·å¾—</p>
<ul>
<li>åœ¨ä¸»èœå•æ–°å¢AIç»˜å›¾å…¥å£ï¼Œæ‰“å¼€æ–‡æœ¬è½¬å›¾å¯¹è¯æ¡†ï¼ˆTTDï¼‰</li>
<li>å‰ç«¯å°†æ–‡æœ¬ä¸å›¾ç±»å‹å‘é€åˆ°åç«¯ï¼›åç«¯æ¥å…¥è±†åŒ…ï¼ˆVolcengine Arkï¼‰ç”Ÿæˆ Mermaid æ–‡æœ¬</li>
<li>é¢„è§ˆåŒºæ¸²æŸ“å¹¶ä¸€é”®æ’å…¥åˆ°ç”»å¸ƒï¼›å¤±è´¥æ—¶æœ‰æ¸…æ´—ä¸å…œåº•ç­–ç•¥</li>
</ul>
<p>åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å·²ç»é€šè¿‡SOLO Coder éƒ¨ç½²äº†æœ¬åœ°çš„Excalidrawï¼Œæ¥ç€è¦æ‰¾å…¥å£ï¼Œæ‰¾ä¸€ä¸ªäººèµ°è¿‘ç™½æ¿æ—¶è‡ªç„¶ä¼šæŒ‰ä¸‹çš„åœ°æ–¹ã€‚æˆ‘æŠŠAIç»˜å›¾æ”¾åˆ°ä¸»èœå•é‡Œï¼Œè®©å®ƒåƒä¸€ä¸ªè½»å¾®çš„é‚€è¯·è€Œä¸æ˜¯å¼ºåˆ¶çš„å¼•å¯¼ã€‚ç‚¹å‡»ä»¥åï¼Œå‰ç«¯æŠ›ç»™æˆ‘ç¬¬ä¸€ä¸ªæ€åº¦ä¸å¥½çš„æŠ¥é”™ï¼š<code>setAppState is not a function</code>ã€‚ä¸¤ç§’é’Ÿçš„å¿ƒæƒ…èµ·ä¼ä¹‹åï¼Œæˆ‘æ„è¯†åˆ°æ˜¯è¿™ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡AIå»è§£å†³ï¼Œäºæ˜¯æˆ‘æŠŠAIäº§ç”Ÿçš„é—®é¢˜æ¢ä¸ªäº†AIã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5f338985e11406b9860ce6e8fcf6165~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763857063&amp;x-signature=SJLxzCniCWg6aBii2Pvtg3Yj9Bo%3D" alt="image.png" loading="lazy"/>
ä¸éš¾å‘ç°ï¼Œå®ƒå¾ˆå¿«ä¿®å¤äº†è¿™ä¸ªé—®é¢˜ï¼ŒExcalidraw çš„å‘½ä»¤å¼æ¥å£é‡Œæ²¡æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œåº”è¯¥ç”¨ <code>updateScene</code>ã€‚æŠŠå…¨å±€äº‹ä»¶æ”¹æˆ <code>updateScene({ appState: { openDialog: ... } })</code>ï¼Œå¯¹è¯æ¡†ä¹–ä¹–å¼¹å‡ºæ¥ï¼Œåƒç»ˆäºæ»‘åˆ°æ¡Œé¢æ­£ä¸­é—´çš„ä¸€æ¯èŒ¶ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ff559656a01476f87b1c4964105393b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763857063&amp;x-signature=QxiB4NbZKEmsniQ%2FAzMthsodwDg%3D" alt="image.png" loading="lazy"/>
è¿™æ‰‡çª—å« TTDï¼Œå¯¹è¯æ¡†çš„å…¨åæ˜¯ Text-to-Diagramã€‚ä¹Ÿå°±æ˜¯ Text-to-Diagramã€‚å¯¹è¯æ¡†çš„å½¢æ€å¾ˆå‹å¥½ï¼Œå·¦è¾¹ä¸€ä¸ªæ–‡æœ¬æ¡†ï¼Œå³è¾¹ä¸€ä¸ªé¢„è§ˆåŒºï¼Œé¼ æ ‡åœ¨æ–‡æœ¬æ¡†é‡Œç‚¹å‡»ä¸€ä¸‹ï¼Œé‚£ç§æ‰‹æŒ‡å‹ä¸‹å»çš„ç¬é—´ï¼Œæˆ‘é¡ºæ‰‹æˆªäº†ä¸€å¼ å›¾ï¼Œç•™ä½œäº¤äº’èµ·ç‚¹çš„æ ‡è®°ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d2a10c0cf9c474eaa863bed731efa38~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763857063&amp;x-signature=unYW20bZPrUY%2FyH1AhcX1cZ0HUY%3D" alt="image.png" loading="lazy"/>
ç¬¬ä¸€æ¬¡æŒ‰ä¸‹Generateï¼Œæˆ‘çœ‹åˆ°çš„æ˜¯ä¸€ç‰‡æ²‰é»˜ï¼Œé¢„è§ˆåŒºå®‰é™åœ°ä¸åŠ¨ï¼Œè¿˜ç»™æˆ‘æŠ›äº†ä¸€ä¸ªGenerated an invalid diagramã€‚æˆ‘æŠŠè¿™ä¸ªæˆªå›¾ä¹Ÿç•™ä¸‹ï¼Œä½œä¸ºä¸€æ¬¡ä¸å¤ªæˆåŠŸçš„å°è¯•ã€‚é‚£ä¼šå„¿æˆ‘å°±æ˜ç™½äº†ï¼Œè¿™ä¸æ˜¯æ²¡è°ƒç”¨ï¼Œè€Œæ˜¯è°ƒç”¨äº†ï¼Œä½†è¿”å›çš„ Mermaid æ–‡æœ¬ä¸åˆèº«ã€‚æ€ç»´å¯¼å›¾çš„ Mermaid è¯­æ³•ç®—æ˜¯å®éªŒæ€§ï¼Œè½¬æ¢åº“ä¸æ˜¯å¯¹æ‰€æœ‰æƒ…å†µéƒ½æ‹¿å¾—å¾ˆç¨³ã€‚äºæ˜¯æˆ‘æŠŠåç«¯æ´¾ä¸Šå°ï¼Œæ­äº†ä¸€ä¸ªå¹²å‡€çš„ ai-backend ï¼Œç”¨ Express åšè·¯ç”±ï¼Œè®©å®ƒç«™åœ¨ excalidraw-master çš„æ—è¾¹ï¼ŒåŒæ—¶æ‚„æ‚„æ¥å…¥è±†åŒ…ï¼ˆVolcengine Arkï¼‰çš„ Chat Completionsï¼Œç”¨ .env.local ç•™ä½å¯†é’¥ï¼Œä¸å¾€å‰ç«¯æš´éœ²ï¼Œä¿æŒæ•´ä¸ªç»“æ„æ¸…çˆ½ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2678a90256624a3d928c1cf9c57e0aa3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763857063&amp;x-signature=H07Z5HgwuhGmbTnB3mWtOEkwAKM%3D" alt="image.png" loading="lazy"/></p>
<p>åç«¯è¿™è¾¹ï¼Œæˆ‘ç›´æ¥æŠŠè±†åŒ…APIè¾“å…¥ä¸ªSOLOã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/788f70c912c3481ba51dab0abaf55e2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763857063&amp;x-signature=ryqs5pm7F3UA%2BSSpRI%2B2DI3CE6U%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™é‡Œæœ‰è¯¦è§£çš„APIæ–‡æ¡£ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a761f7773fc40099239adccf93a0852~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763857063&amp;x-signature=pZg82gVjaAonuZXXlMvFp284wM4%3D" alt="image.png" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥ä¼šæ–°å»ºä¸€ä¸ª <code>ai-backend</code>ï¼Œè®©å®ƒç«™åœ¨ä¸»é¡¹ç›®çš„æ—ä¾§ï¼Œå•çº¯ã€å®‰é™ï¼Œè¯» <code>.env.local</code> é‡Œçš„å¯†é’¥ï¼Œä¸æŠŠä»»ä½•æ•æ„Ÿä¿¡æ¯æš´éœ²åˆ°å‰ç«¯ï¼Œä¹Ÿä¸å¾€ä»“åº“é‡Œä¹±æäº¤ã€‚è·¯ç”±åªåšä¸€ä»¶äº‹ï¼š<code>/v1/ai/text-to-diagram/generate</code> æ¥å— <code>prompt</code> å’Œ <code>type</code>ï¼Œä¼˜å…ˆè°ƒç”¨è±†åŒ… Ark Chat Completionsï¼ŒæŠŠè¿”å›çš„å†…å®¹æ¸…æ´—ä¸€ä¸‹ã€‚</p>
<p>æˆ‘å¾ˆåœ¨æ„äº¤äº’çš„å¾®å¦™ã€‚TTD å¯¹è¯æ¡†é‡Œé‚£æ®µè‹±æ–‡æç¤ºï¼Œè¯´ç³»ç»Ÿç›®å‰ç”¨ Mermaid å½“ä¸­é—´æ­¥éª¤ï¼Œè¿™å¥è¯åƒä¸€ä¸ªå‰ç½®çš„åè®®ï¼šä½ è¦ä¹ˆç»™æˆ‘æµç¨‹ã€è¦ä¹ˆç»™æˆ‘ç»“æ„ï¼Œæˆ‘æ¥æƒ³åŠæ³•å¸®ä½ æˆé•¿ä¸ºå›¾åƒã€‚ç”¨æˆ·å†™çš„æ˜¯äººè¯ï¼Œæ¨¡å‹ç†è§£çš„æ˜¯äººè¯ï¼Œä½†é¢„è§ˆéœ€è¦çš„æ˜¯è§„æ•´çš„è¯­è¨€ã€‚æ‰€ä»¥æˆ‘æŠŠç±»å‹çš„é€‰æ‹©å‰ç½®åˆ°ç”ŸæˆåŠ¨ä½œçš„ä¸Šæ–¹ï¼Œè®©è¿™ç»„ UI å½¢æˆä¸€ä¸ªå¿ƒæ™ºé“¾æ¡ï¼šè¾“å…¥ã€é€‰æ‹©ã€ç”Ÿæˆã€é¢„è§ˆã€æ’å…¥ã€‚ä½ èƒ½æ„Ÿåˆ°æ‰‹åŠ¿çš„é¡ºç•…ï¼Œèƒ½çœ‹åˆ°é¢„æœŸçš„ç»“æœï¼Œè¿™æ¯”ä»»ä½•æ–‡æ¡£æç¤ºéƒ½æœ‰æ•ˆã€‚</p>
<p>è¿‡ç¨‹ä¸­æœ‰ä¸€äº›æ¬¡è¦çš„æ’æ›²ï¼Œæ¯”å¦‚æµè§ˆå™¨æ ‡ç­¾æ„å¤–æ‰“å¼€æ—§ç«¯å£ 3000ï¼Œæ‰€ä»¥äº‹ä»¶ç›‘å¬å¹¶æ²¡æœ‰æ³¨å†Œåˆ°ä½ çœ‹çš„é¡µé¢ä¸Šï¼›æ¯”å¦‚æˆ‘ä¸€åº¦å°è¯•ç”¨ <code>window.addEventListener</code> åšä¸€äº›å…¨å±€æ§åˆ¶ï¼Œåæ¥è¿˜æ˜¯æŠŠå®ƒè§„æ•´åˆ° <code>useEffect</code>ï¼Œè·Ÿç€ <code>excalidrawAPI</code> èµ°ç”Ÿå‘½å‘¨æœŸï¼›æ¯”å¦‚Mermaid åŸæ–‡é‚£ä¸€é¡µä¼šè®©äººæƒ³æŸ¥çœ‹ç»†èŠ‚ï¼Œæˆ‘å°±ä¿ç•™äº†View as Mermaidçš„è·³è½¬ï¼Œç»™è°ƒè¯•è€…ä¸€ä¸ªåå¤‡çš„å·¥å…·ã€‚æ¯ä¸€ä¸ªå°åŠ¨ä½œéƒ½ä¸æ˜¯å¿…é¡»ï¼Œä½†å®ƒä»¬æ˜¯è´´å¿ƒï¼Œæˆ‘å¸Œæœ›è¿™å¥—ä½“éªŒä¸æ˜¯ç¡¬å¡è¿›å»çš„åŠŸèƒ½ï¼Œè€Œæ˜¯ä¸€ç§è‡ªç„¶çš„å»¶ä¼¸ã€‚</p>
<p>è±†åŒ…çš„æ¥å…¥è‡ªå·±ä¹Ÿå¸¦äº†ä¸€ç‚¹ä¸ªæ€§ã€‚æˆ‘æŠŠå¯†é’¥æ”¾åœ¨æœ¬åœ° <code>.env.local</code> é‡Œï¼Œä¸åœ¨ä»£ç é‡Œè½ç¬”ï¼Œä¹Ÿä¸åœ¨ç»ˆç«¯é‡Œå†™é•¿ä¸²çš„ä¸´æ—¶å˜é‡ã€‚æ¨¡å‹çš„å‚æ•°æ²¡æœ‰èµ°æç«¯ï¼Œ<code>max_completion_tokens</code> è®¾ä¸ªæ¸©å’Œçš„ä¸Šé™ï¼Œ<code>reasoning_effort</code> æ”¾åœ¨ä¸­ç­‰ï¼Œç¡®ä¿ç¨³å®šå’Œæˆæœ¬å¯æ§ã€‚æœ‰æ—¶ä¸ºäº†è®©é¢„è§ˆç¨³å®šï¼Œæˆ‘ä¼šæŠŠ Mindmap çš„ç”Ÿæˆæç¤ºæ‚„æ‚„å¼•å¯¼æˆ Flowchart çš„å±‚çº§è¡¨è¾¾ï¼Œæ¯•ç«Ÿè½¬æ¢é“¾è·¯å¯¹æµç¨‹å›¾æ›´å‹å¥½ï¼Œè¿™ä¸æ˜¯èƒŒå›ï¼Œæ›´åƒæ˜¯ä¸€ä¸ªå®ç”¨ä¸»ä¹‰çš„é€‰æ‹©ã€‚ç”¨æˆ·è¦çš„æ˜¯çœ‹åˆ°ç»“æ„å¹¶å¯ç¼–è¾‘çš„å›¾å½¢ï¼Œå›¾çš„æ ·å¼å¯ä»¥æ…¢æ…¢æ‰“ç£¨ï¼Œä½†ç©ºç™½çš„é¢„è§ˆç­‰ä¸åŠã€‚</p>
<p>è¿™æ—¶å€™æ•´æ¡é“¾è·¯å¼€å§‹æœ‰äº†æ¡æ‰‹çš„æ„Ÿè§‰ã€‚æˆ‘åœ¨é¦–é¡µæˆªå›¾ä¹‹åï¼Œåˆæˆªäº†ä¸€ä¸ªä¸»èœå•å±•å¼€çš„ç”»é¢ï¼Œé‚£é‡Œæœ‰AIç»˜å›¾è¿™ä¸ªæ–°æœ‹å‹ã€‚æˆ‘ç‚¹å¼€å¯¹è¯æ¡†ï¼Œåœ¨æ–‡æœ¬æ¡†é‡Œæ•²äº†ä¸€æ®µç»“æ„â€”â€”æ¯”å¦‚æŠŠé¡¹ç›®è§„åˆ’æ”¾åœ¨é¦–è¡Œï¼Œç„¶åç”¨çŸ­å¥æŠŠç›®æ ‡èŒƒå›´æ—¶é—´èµ„æºå›¢é˜Ÿé¢„ç®—ä¸€è¡Œä¸€è¡Œåˆ—å‡ºæ¥ï¼Œç„¶åæŒ‰ä¸‹Generateã€‚è¿™å›é¢„è§ˆåŒºä¸å†å†·åœºï¼Œå›¾åƒä»å³è¾¹é•¿å‡ºæ¥ï¼ŒèŠ‚ç‚¹ç´§ç´§æ’åˆ—ï¼ŒåƒæŠŠæ•£è½çš„ä¹¦é¡µç”¨çº¿ç©¿åœ¨ä¸€èµ·ã€‚æˆ‘è®©å®ƒè½åˆ°ç”»å¸ƒä¸­å¤®ï¼Œæ”¾å¤§ä¸€ç‚¹ï¼Œç»™è¿™ä¸ªæ—¶åˆ»ç•™ä¸€å¼ å¹²å‡€çš„æˆªå›¾ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06827f2c5b5f47cea490247124f5e17a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763857063&amp;x-signature=4bEMWKimkbIA9yfzYrI7EG5AcW0%3D" alt="image.png" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥ç‚¹å‡»InsertæŒ‰é’®ï¼Œå°±å¯ä»¥å°†å†…å®¹æ’å…¥åˆ°ç”»å¸ƒä¸­ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6508bd6916cc41dbb9b238748e363c0d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763857063&amp;x-signature=vbRCSy2zV9VNECpx1p1IKCLSYKs%3D" alt="image.png" loading="lazy"/></p>
<p>å¶å°”ï¼Œå®ƒè¿˜ä¼šé—¹äº›æƒ…ç»ªã€‚æ¯”å¦‚ä½ è¾“å…¥äº†å¤ªé•¿çš„ä¸€æ®µè¯ï¼Œæ²¡æœ‰æ¸…æ™°çš„ç»“æ„ï¼Œå®ƒä¼šå†æ¬¡ç”¨Generated an invalid diagramæé†’ä½ ï¼Œè¯­æ°”åƒæœ‹å‹ã€‚è¿™ä¸ªæ—¶å€™ï¼Œä¸è¦æŠŠé”…ä¸¢ç»™æ¨¡å‹ï¼Œç¨å¾®è°ƒæ•´ä¸€ä¸‹æ–‡æœ¬ï¼ŒæŠŠä¸»é¢˜æ”¾åœ¨ç¬¬ä¸€è¡Œï¼ŒæŠŠä¸€çº§è¦ç‚¹ä¸€è¡Œä¸€ä¸ªï¼Œé£æ ¼æ›´åƒå¤§çº²ï¼Œå†æŒ‰ä¸€ä¸‹ç”Ÿæˆã€‚å®ƒä¼šç»™ä½ é¢å­ï¼Œé¢„è§ˆå°±å‡ºæ¥äº†ã€‚å¦‚æœä½ æƒ³æ›´ç¡®å®šä¸€ç‚¹ï¼ŒæŠŠå³ä¸Šè§’çš„ç±»å‹åˆ‡åˆ° Flowchartï¼Œå®ƒå‡ ä¹ä¸ä¼šè®©ä½ å¤±æœ›ã€‚</p>
<p>å†™åˆ°è¿™é‡Œï¼Œæˆ‘å¼€å§‹è§‰å¾—è¿™ä»¶äº‹å¹¶ä¸åªæ˜¯ç»™é¡¹ç›®åŠ äº†ä¸€ä¸ªAIåŠŸèƒ½ã€‚å®ƒæ›´åƒæ˜¯è®©ä¸€ä¸ªæˆç†Ÿçš„å·¥å…·ï¼Œå­¦ä¼šå¬å¦ä¸€ç§è¯­è¨€ã€‚Excalidraw åŸæœ¬é¼“åŠ±ä½ ç”¨æ‰‹å»ç”»ï¼Œç°åœ¨å®ƒä¹Ÿå¯ä»¥ç†è§£ä½ è¯´ç”»ä¸€ä¸ªè¿™æ ·çš„ç»“æ„ã€‚TTD å¯¹è¯æ¡†ä¸æ˜¯é­”æ³•ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªç†æ€§çš„æ¡¥æ¢ï¼ŒæŠŠäººçš„è¡¨è¾¾è¿æ¥åˆ°å›¾çš„è¡¨è¾¾ï¼Œå¸®ä½ è·¨è¿‡å»ã€‚SOLO Coder åœ¨è¿™ä»¶äº‹ä¸Šæ‰®æ¼”çš„è§’è‰²ï¼Œæ˜¯æŠŠé‚£äº›æ˜“ç¢çš„è¡”æ¥ç‚¹ï¼Œæ›¿ä½ ç¨³ç¨³åœ°å›ºå®šä½ã€‚ä¸‹è½½ã€å®‰è£…ã€èµ·æœåŠ¡ã€ä¿®äº‹ä»¶ã€æ¥æ¨¡å‹ã€æ¸…æ–‡æœ¬ã€å…œåº•ï¼Œè¿™äº›çœ‹èµ·æ¥åƒæ˜¯å·¥ç¨‹ç»†èŠ‚ï¼Œä½†å®ƒä»¬æ„æˆäº†æ•´ä¸ªä½“éªŒçš„å®æ„Ÿã€‚</p>
<p>å¦‚æœä½ é—®æˆ‘ï¼ŒSOLO Coder åœ¨è¿™ä»¶äº‹é‡Œåšäº†ä»€ä¹ˆï¼Œæˆ‘æƒ³è¯´å®ƒå¹¶æ²¡æœ‰æ›¿æˆ‘å†™æ‰æ‰€æœ‰ä»£ç ï¼Œä½†å®ƒå¸®æˆ‘æŠŠé‚£æ¡ä»ä¸‹è½½åˆ°çœ‹è§çš„è·¯å¾„é“ºå¹³äº†ã€‚åœ¨æœ¬åœ°æ‹‰èµ·é¡¹ç›®ï¼Œåè°ƒå·¥ä½œåŒºä¾èµ–ã€å¯åŠ¨ Viteï¼Œä¿®å¥½å…¥å£äº‹ä»¶ï¼ŒæŠŠåç«¯æœåŠ¡è·‘èµ·æ¥ï¼Œè±†åŒ…çš„å¯†é’¥è—åœ¨ .env.local ï¼Œè°ƒç”¨é“¾æ¡ä¸²ä¸Šå»ï¼Œé¢„è§ˆé“¾æ¡åˆç¨³ä½ï¼Œå†ç»™è¿™æ¡è·¯æ”¾å‡ ä¸ªè·¯æ ‡ï¼Œè¿™äº›å·¥ä½œå¬èµ·æ¥ä¸èµ·çœ¼ï¼Œå´è®©ä¸€åˆ‡å˜å¾—é¡ºç•…ã€‚äºŒæ¬¡å¼€å‘çœŸæ­£çš„é­…åŠ›åœ¨äºæ­¤ï¼šä½ ä¸æ˜¯æŠŠè‡ªå·±çš„æƒ³æ³•è´´ä¸Šå»ï¼Œè€Œæ˜¯æŠŠå®ƒæ‰è¿›æ¥ï¼Œè·Ÿé¡¹ç›®çš„è¯­è¨€åœ¨ä¸€èµ·ï¼Œè·Ÿå®ƒçš„èŠ‚å¥åœ¨ä¸€èµ·ã€‚</p>
<p>æˆ‘æŠŠè¿™ç¯‡æ–‡ç« å†™æˆä¸€æ®µè¿ç»­çš„å™äº‹ï¼Œä¸è®²é¦–å…ˆã€å…¶æ¬¡ã€æœ€åï¼Œä¸åšæŠ¥å‘Šé‚£æ ·å †è§‚ç‚¹ã€‚æˆ‘åªæ˜¯æŠŠè‡ªå·±çš„å®æ“æ‘Šå¼€ï¼Œè®©é‚£äº›æŒ‰é”®ã€é“¾æ¥ã€è·¯å¾„ã€æ‹è§’ã€é”™è¯¯å’Œä¿®å¤å…¨éƒ½åœ¨åœ°ä¸Šï¼Œå¸¦ç€ä½ èµ°è¿‡ä¸€æ¬¡ã€‚ç­‰ä½ èµ°å®Œï¼Œä½ ä¼šå‘ç°ä½ ä¹Ÿèƒ½è¿™æ ·ï¼ŒæŠŠä¸€ä¸ªæƒ³æ³•äº¤ç»™ SOLO Coderï¼Œç»™å®ƒä¸€ä¸ªè¢«éªŒè¯çš„å‡ºå£ï¼Œåªè¦ä½ æ„¿æ„åœ¨ä¸­é—´è¡¥ä¸Šä¸€ç‚¹ç‚¹è€å¿ƒï¼Œè¿™æ¡è·¯ä¼šå˜å¾—åƒä¸€æ¡å¹³æ•´çš„æœ¨æ¿é“ï¼Œè¸©ä¸Šå»ä¸ä¼šå‘å‡ºå±å˜çš„å£°å“ã€‚è¿™ä¸ªé¡¹ç›®äºæ˜¯æœ‰äº†ä¸€ä¸ªæ–°ä¹ æƒ¯ï¼šä¸ä»…ç”¨æ‰‹ç”»ï¼Œè¿˜èƒ½ç”¨è¯ç”»ã€‚å›¾åƒä¸å†éœ€è¦ä½ å»ä¸€ä¸ªä¸ªæ‘†æ”¾ï¼Œå®ƒå¯ä»¥æŒ‰ç…§ä½ çš„æ–‡å­—ï¼Œè‡ªå·±ç«™åœ¨ç”»å¸ƒä¸Šã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redisï¼ˆ126ï¼‰ Redisåœ¨å®æ—¶ç»Ÿè®¡ä¸­çš„åº”ç”¨æœ‰å“ªäº›ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7572497847771693083</link>    <guid>https://juejin.cn/post/7572497847771693083</guid>    <pubDate>2025-11-15T23:33:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572497847771693083" data-draft-id="7572510909446291506" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redisï¼ˆ126ï¼‰ Redisåœ¨å®æ—¶ç»Ÿè®¡ä¸­çš„åº”ç”¨æœ‰å“ªäº›ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-15T23:33:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redisï¼ˆ126ï¼‰ Redisåœ¨å®æ—¶ç»Ÿè®¡ä¸­çš„åº”ç”¨æœ‰å“ªäº›ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T23:33:23.000Z" title="Sat Nov 15 2025 23:33:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Redis åœ¨å®æ—¶ç»Ÿè®¡ä¸­çš„åº”ç”¨éå¸¸å¹¿æ³›ï¼Œä¸»è¦ç”¨äºä»¥ä¸‹å‡ ä¸ªåœºæ™¯ï¼šé¡µé¢è®¿é—®é‡ç»Ÿè®¡ã€ç”¨æˆ·è¡Œä¸ºåˆ†æã€è®¡æ•°å™¨ã€æ•°æ®é‡‡æ ·ã€å®æ—¶æ•°æ®èšåˆç­‰ã€‚ä¸‹é¢è¯¦ç»†æè¿°è¿™äº›åº”ç”¨åœºæ™¯ï¼Œå¹¶ç»“åˆ Java ä»£ç ç¤ºä¾‹è¿›è¡Œè®²è§£ã€‚</p>
<h3 data-id="heading-0">1. é¡µé¢è®¿é—®é‡ç»Ÿè®¡</h3>
<p>Redis å¯ä»¥ç”¨äºç»Ÿè®¡é¡µé¢çš„è®¿é—®é‡ï¼Œé€šè¿‡ä½¿ç”¨ Redis çš„è‡ªå¢æ“ä½œï¼Œå¯ä»¥å¿«é€Ÿè®°å½•é¡µé¢çš„è®¿é—®æ¬¡æ•°ã€‚</p>
<h4 data-id="heading-1">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PageViewCounter</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">pageKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"page:home"</span>;
            
            <span class="hljs-comment">// å¢åŠ é¡µé¢è®¿é—®é‡</span>
            jedis.incr(pageKey);
            
            <span class="hljs-comment">// è·å–å½“å‰é¡µé¢è®¿é—®é‡</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">pageViews</span> <span class="hljs-operator">=</span> jedis.get(pageKey);
            System.out.println(<span class="hljs-string">"Home page views: "</span> + pageViews);
        }
    }
}
</code></pre>
<h3 data-id="heading-2">2. ç”¨æˆ·è¡Œä¸ºåˆ†æ</h3>
<p>Redis å¯ä»¥è®°å½•ç”¨æˆ·çš„å„ç§è¡Œä¸ºï¼ˆä¾‹å¦‚ç™»å½•ã€ç‚¹å‡»ã€è´­ä¹°ç­‰ï¼‰ï¼Œå¹¶è¿›è¡Œå®æ—¶åˆ†æã€‚</p>
<h4 data-id="heading-3">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserBehaviorTracker</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user123"</span>;
            <span class="hljs-type">String</span> <span class="hljs-variable">behaviorKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"behavior:"</span> + userId;
            
            <span class="hljs-comment">// è®°å½•ç”¨æˆ·è¡Œä¸º</span>
            jedis.hincrBy(behaviorKey, <span class="hljs-string">"login"</span>, <span class="hljs-number">1</span>);
            jedis.hincrBy(behaviorKey, <span class="hljs-string">"click"</span>, <span class="hljs-number">5</span>);
            jedis.hincrBy(behaviorKey, <span class="hljs-string">"purchase"</span>, <span class="hljs-number">2</span>);
            
            <span class="hljs-comment">// è·å–ç”¨æˆ·è¡Œä¸ºç»Ÿè®¡</span>
            System.out.println(<span class="hljs-string">"User behavior: "</span> + jedis.hgetAll(behaviorKey));
        }
    }
}
</code></pre>
<h3 data-id="heading-4">3. è®¡æ•°å™¨</h3>
<p>Redis çš„è‡ªå¢æ“ä½œéå¸¸é€‚åˆç”¨äºå®ç°å„ç§è®¡æ•°å™¨ï¼Œä¾‹å¦‚ç½‘ç«™çš„è®¿é—®é‡ã€å•†å“é”€å”®é‡ç­‰ã€‚</p>
<h4 data-id="heading-5">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericCounter</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">counterKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"counter:generic"</span>;
            
            <span class="hljs-comment">// è‡ªå¢è®¡æ•°å™¨</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> jedis.incr(counterKey);
            System.out.println(<span class="hljs-string">"Current count: "</span> + count);
        }
    }
}
</code></pre>
<h3 data-id="heading-6">4. æ•°æ®é‡‡æ ·</h3>
<p>Redis å¯ä»¥ç”¨äºå­˜å‚¨å’Œåˆ†æå®æ—¶æ•°æ®æ ·æœ¬ï¼Œä¾‹å¦‚è®°å½•æ¯åˆ†é’Ÿçš„è®¿é—®é‡ï¼Œä»¥ä¾¿åç»­è¿›è¡Œç»Ÿè®¡åˆ†æã€‚</p>
<h4 data-id="heading-7">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;
<span class="hljs-keyword">import</span> java.time.Instant;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSampling</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">sampleKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"samples:pageviews"</span>;
            <span class="hljs-type">long</span> <span class="hljs-variable">timestamp</span> <span class="hljs-operator">=</span> Instant.now().getEpochSecond();
            
            <span class="hljs-comment">// è®°å½•å½“å‰æ—¶é—´æˆ³çš„è®¿é—®é‡</span>
            jedis.zadd(sampleKey, timestamp, String.valueOf(timestamp));
            
            <span class="hljs-comment">// è·å–æœ€è¿‘ä¸€åˆ†é’Ÿçš„è®¿é—®é‡</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">oneMinuteAgo</span> <span class="hljs-operator">=</span> timestamp - <span class="hljs-number">60</span>;
            <span class="hljs-type">long</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> jedis.zcount(sampleKey, oneMinuteAgo, timestamp);
            System.out.println(<span class="hljs-string">"Page views in the last minute: "</span> + count);
        }
    }
}
</code></pre>
<h3 data-id="heading-8">5. å®æ—¶æ•°æ®èšåˆ</h3>
<p>é€šè¿‡ Redis çš„ Hash æ•°æ®ç»“æ„ï¼Œå¯ä»¥å®ç°å¯¹å¤šç§æ•°æ®çš„èšåˆç»Ÿè®¡ï¼Œä¾‹å¦‚ç»Ÿè®¡å¤šä¸ªæœåŠ¡å™¨çš„ CPU è´Ÿè½½ã€å†…å­˜ä½¿ç”¨ç­‰ã€‚</p>
<h4 data-id="heading-9">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RealTimeAggregation</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">aggregationKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"aggregation:cpu_load"</span>;
            
            <span class="hljs-comment">// æ¨¡æ‹Ÿè®°å½•ä¸åŒæœåŠ¡å™¨çš„ CPU è´Ÿè½½</span>
            jedis.hincrByFloat(aggregationKey, <span class="hljs-string">"server1"</span>, <span class="hljs-number">20.5</span>);
            jedis.hincrByFloat(aggregationKey, <span class="hljs-string">"server2"</span>, <span class="hljs-number">30.2</span>);
            jedis.hincrByFloat(aggregationKey, <span class="hljs-string">"server3"</span>, <span class="hljs-number">25.1</span>);
            
            <span class="hljs-comment">// è·å–èšåˆç»“æœ</span>
            System.out.println(<span class="hljs-string">"CPU Load: "</span> + jedis.hgetAll(aggregationKey));
        }
    }
}
</code></pre>
<h3 data-id="heading-10">6. å®æ—¶ç”¨æˆ·åœ¨çº¿ç»Ÿè®¡</h3>
<p>åˆ©ç”¨ Redis çš„ Set æ•°æ®ç»“æ„ï¼Œå¯ä»¥ç»Ÿè®¡å½“å‰åœ¨çº¿ç”¨æˆ·æ•°ï¼Œå¹¶è¿›è¡Œå®æ—¶æŸ¥è¯¢ã€‚</p>
<h4 data-id="heading-11">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OnlineUserCounter</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">onlineUsersKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"users:online"</span>;
            <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user123"</span>;
            
            <span class="hljs-comment">// ç”¨æˆ·ä¸Šçº¿</span>
            jedis.sadd(onlineUsersKey, userId);
            
            <span class="hljs-comment">// è·å–å½“å‰åœ¨çº¿ç”¨æˆ·æ•°</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">onlineCount</span> <span class="hljs-operator">=</span> jedis.scard(onlineUsersKey);
            System.out.println(<span class="hljs-string">"Current online users: "</span> + onlineCount);
            
            <span class="hljs-comment">// ç”¨æˆ·ä¸‹çº¿</span>
            jedis.srem(onlineUsersKey, userId);
            
            <span class="hljs-comment">// è·å–å½“å‰åœ¨çº¿ç”¨æˆ·æ•°</span>
            onlineCount = jedis.scard(onlineUsersKey);
            System.out.println(<span class="hljs-string">"Current online users after logout: "</span> + onlineCount);
        }
    }
}
</code></pre>
<p>Redis çš„é«˜æ€§èƒ½å’Œä¸°å¯Œçš„æ•°æ®ç»“æ„ä½¿å…¶æˆä¸ºå®æ—¶ç»Ÿè®¡åº”ç”¨çš„ç†æƒ³é€‰æ‹©ã€‚é€šè¿‡è¿™äº›ç¤ºä¾‹ä»£ç ï¼Œå¯ä»¥çœ‹åˆ° Redis åœ¨é¡µé¢è®¿é—®é‡ç»Ÿè®¡ã€ç”¨æˆ·è¡Œä¸ºåˆ†æã€è®¡æ•°å™¨ã€æ•°æ®é‡‡æ ·ã€å®æ—¶æ•°æ®èšåˆä»¥åŠå®æ—¶ç”¨æˆ·åœ¨çº¿ç»Ÿè®¡ç­‰æ–¹é¢çš„å¼ºå¤§åŠŸèƒ½ã€‚å¸Œæœ›è¿™äº›ç¤ºä¾‹èƒ½å¤Ÿå¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨ Redis äºå®æ—¶ç»Ÿè®¡åœºæ™¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redisï¼ˆ127ï¼‰Redisçš„å†…éƒ¨æ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7572781559766646834</link>    <guid>https://juejin.cn/post/7572781559766646834</guid>    <pubDate>2025-11-15T23:34:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572781559766646834" data-draft-id="7572515402796204082" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redisï¼ˆ127ï¼‰Redisçš„å†…éƒ¨æ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-15T23:34:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redisï¼ˆ127ï¼‰Redisçš„å†…éƒ¨æ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T23:34:20.000Z" title="Sat Nov 15 2025 23:34:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Redis æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„å†…å­˜æ•°æ®åº“ï¼Œå…¶åº•å±‚å®ç°ä¾èµ–äºå¤šç§æ•°æ®ç»“æ„ã€‚è¿™äº›æ•°æ®ç»“æ„ä¸ä»…å†³å®šäº† Redis çš„é«˜æ€§èƒ½ï¼Œä¹Ÿä½¿å¾— Redis åœ¨å¤„ç†ä¸åŒç±»å‹çš„æ•°æ®æ—¶èƒ½å¤Ÿä¿æŒé«˜æ•ˆã€‚ä¸‹é¢è¯¦ç»†ä»‹ç» Redis çš„å†…éƒ¨æ•°æ®ç»“æ„ï¼Œå¹¶ç»“åˆå…·ä½“ä»£ç ç¤ºä¾‹è¿›è¡Œè§£é‡Šã€‚</p>
<h3 data-id="heading-0">1. å­—ç¬¦ä¸²ï¼ˆStringï¼‰</h3>
<p>å­—ç¬¦ä¸²æ˜¯ Redis ä¸­æœ€åŸºæœ¬çš„æ•°æ®ç±»å‹ã€‚å®ƒä¸ä»…å¯ä»¥å­˜å‚¨æ–‡æœ¬ï¼Œè¿˜å¯ä»¥å­˜å‚¨äºŒè¿›åˆ¶æ•°æ®ï¼Œå¦‚å›¾åƒæˆ–åºåˆ—åŒ–å¯¹è±¡ã€‚</p>
<h4 data-id="heading-1">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisStringExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-comment">// è®¾ç½®å­—ç¬¦ä¸²é”®å€¼</span>
            jedis.set(<span class="hljs-string">"key"</span>, <span class="hljs-string">"value"</span>);
            
            <span class="hljs-comment">// è·å–å­—ç¬¦ä¸²é”®å€¼</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> jedis.get(<span class="hljs-string">"key"</span>);
            System.out.println(<span class="hljs-string">"Stored string in redis: "</span> + value);
        }
    }
}
</code></pre>
<h3 data-id="heading-2">2. å“ˆå¸Œï¼ˆHashï¼‰</h3>
<p>å“ˆå¸Œç±»å‹æ˜¯ä¸€ä¸ªé”®å€¼å¯¹é›†åˆï¼Œç±»ä¼¼äº Java çš„ <code>HashMap</code>ã€‚å“ˆå¸Œç‰¹åˆ«é€‚åˆå­˜å‚¨å¯¹è±¡ã€‚</p>
<h4 data-id="heading-3">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisHashExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">userKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:1000"</span>;
            
            <span class="hljs-comment">// è®¾ç½®å“ˆå¸Œå­—æ®µ</span>
            jedis.hset(userKey, <span class="hljs-string">"name"</span>, <span class="hljs-string">"John"</span>);
            jedis.hset(userKey, <span class="hljs-string">"age"</span>, <span class="hljs-string">"30"</span>);
            
            <span class="hljs-comment">// è·å–å“ˆå¸Œå­—æ®µ</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> jedis.hget(userKey, <span class="hljs-string">"name"</span>);
            <span class="hljs-type">String</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> jedis.hget(userKey, <span class="hljs-string">"age"</span>);
            
            System.out.println(<span class="hljs-string">"Name: "</span> + name);
            System.out.println(<span class="hljs-string">"Age: "</span> + age);
        }
    }
}
</code></pre>
<h3 data-id="heading-4">3. åˆ—è¡¨ï¼ˆListï¼‰</h3>
<p>åˆ—è¡¨æ˜¯ä¸€ä¸ªæœ‰åºçš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼Œå¯ä»¥ä»åˆ—è¡¨çš„ä¸¤ç«¯è¿›è¡Œå‹å…¥å’Œå¼¹å‡ºæ“ä½œï¼Œç±»ä¼¼äº LinkedListã€‚</p>
<h4 data-id="heading-5">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisListExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">listKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"taskQueue"</span>;
            
            <span class="hljs-comment">// ä»åˆ—è¡¨å·¦ä¾§å‹å…¥</span>
            jedis.lpush(listKey, <span class="hljs-string">"Task1"</span>, <span class="hljs-string">"Task2"</span>, <span class="hljs-string">"Task3"</span>);
            
            <span class="hljs-comment">// ä»åˆ—è¡¨å³ä¾§å¼¹å‡º</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">task</span> <span class="hljs-operator">=</span> jedis.rpop(listKey);
            System.out.println(<span class="hljs-string">"Popped task: "</span> + task);
            
            <span class="hljs-comment">// è·å–åˆ—è¡¨æ‰€æœ‰å…ƒç´ </span>
            System.out.println(<span class="hljs-string">"Remaining tasks: "</span> + jedis.lrange(listKey, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>));
        }
    }
}
</code></pre>
<h3 data-id="heading-6">4. é›†åˆï¼ˆSetï¼‰</h3>
<p>é›†åˆæ˜¯ä¸€ä¸ªæ— åºçš„å­—ç¬¦ä¸²é›†åˆï¼Œç”¨äºé«˜æ•ˆåœ°è¿›è¡Œæ·»åŠ ã€åˆ é™¤å’ŒæŸ¥æ‰¾æ“ä½œã€‚</p>
<h4 data-id="heading-7">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisSetExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">setKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"userRoles"</span>;
            
            <span class="hljs-comment">// æ·»åŠ é›†åˆå…ƒç´ </span>
            jedis.sadd(setKey, <span class="hljs-string">"admin"</span>, <span class="hljs-string">"editor"</span>, <span class="hljs-string">"viewer"</span>);
            
            <span class="hljs-comment">// è·å–é›†åˆæ‰€æœ‰å…ƒç´ </span>
            System.out.println(<span class="hljs-string">"User roles: "</span> + jedis.smembers(setKey));
            
            <span class="hljs-comment">// åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">isAdmin</span> <span class="hljs-operator">=</span> jedis.sismember(setKey, <span class="hljs-string">"admin"</span>);
            System.out.println(<span class="hljs-string">"Is admin: "</span> + isAdmin);
        }
    }
}
</code></pre>
<h3 data-id="heading-8">5. æœ‰åºé›†åˆï¼ˆSorted Setï¼‰</h3>
<p>æœ‰åºé›†åˆæ˜¯ä¸€ä¸ªå¸¦æœ‰åˆ†æ•°çš„å­—ç¬¦ä¸²é›†åˆï¼Œé›†åˆä¸­çš„å…ƒç´ æŒ‰åˆ†æ•°è¿›è¡Œæ’åºï¼Œé€‚ç”¨äºå®ç°æ’è¡Œæ¦œç­‰åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-9">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisSortedSetExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">sortedSetKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"leaderboard"</span>;
            
            <span class="hljs-comment">// æ·»åŠ æœ‰åºé›†åˆå…ƒç´ </span>
            jedis.zadd(sortedSetKey, <span class="hljs-number">100</span>, <span class="hljs-string">"user1"</span>);
            jedis.zadd(sortedSetKey, <span class="hljs-number">200</span>, <span class="hljs-string">"user2"</span>);
            jedis.zadd(sortedSetKey, <span class="hljs-number">150</span>, <span class="hljs-string">"user3"</span>);
            
            <span class="hljs-comment">// è·å–æœ‰åºé›†åˆå…ƒç´ </span>
            System.out.println(<span class="hljs-string">"Leaderboard: "</span> + jedis.zrevrangeWithScores(sortedSetKey, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>));
        }
    }
}
</code></pre>
<h3 data-id="heading-10">6. ä½å›¾ï¼ˆBitmapï¼‰</h3>
<p>ä½å›¾æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥å¯¹å­—ç¬¦ä¸²ä¸­çš„å•ä¸ªä½è¿›è¡Œæ“ä½œï¼Œé€‚ç”¨äºå®ç°å¸ƒéš†è¿‡æ»¤å™¨ç­‰åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-11">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisBitmapExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">bitmapKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:active"</span>;
            
            <span class="hljs-comment">// è®¾ç½®æŸä¸ªä½ä¸º1</span>
            jedis.setbit(bitmapKey, <span class="hljs-number">1</span>, <span class="hljs-literal">true</span>);
            jedis.setbit(bitmapKey, <span class="hljs-number">3</span>, <span class="hljs-literal">true</span>);
            
            <span class="hljs-comment">// è·å–æŸä¸ªä½çš„å€¼</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">isActive</span> <span class="hljs-operator">=</span> jedis.getbit(bitmapKey, <span class="hljs-number">1</span>);
            System.out.println(<span class="hljs-string">"User is active at position 1: "</span> + isActive);
            
            <span class="hljs-comment">// ç»Ÿè®¡ä½å›¾ä¸­å€¼ä¸º1çš„ä½æ•°</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">activeUserCount</span> <span class="hljs-operator">=</span> jedis.bitcount(bitmapKey);
            System.out.println(<span class="hljs-string">"Active user count: "</span> + activeUserCount);
        }
    }
}
</code></pre>
<h3 data-id="heading-12">7. HyperLogLog</h3>
<p>HyperLogLog æ˜¯ä¸€ç§ç”¨äºåŸºæ•°ä¼°ç®—çš„æ¦‚ç‡æ€§æ•°æ®ç»“æ„ï¼Œé€‚ç”¨äºå¤§è§„æ¨¡å»é‡è®¡æ•°ã€‚</p>
<h4 data-id="heading-13">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisHyperLogLogExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">hllKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"uniqueVisitors"</span>;
            
            <span class="hljs-comment">// æ·»åŠ å…ƒç´ </span>
            jedis.pfadd(hllKey, <span class="hljs-string">"user1"</span>, <span class="hljs-string">"user2"</span>, <span class="hljs-string">"user3"</span>, <span class="hljs-string">"user2"</span>);
            
            <span class="hljs-comment">// ä¼°ç®—åŸºæ•°</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">uniqueCount</span> <span class="hljs-operator">=</span> jedis.pfcount(hllKey);
            System.out.println(<span class="hljs-string">"Unique visitors: "</span> + uniqueCount);
        }
    }
}
</code></pre>
<h3 data-id="heading-14">8. æµï¼ˆStreamï¼‰</h3>
<p>æµæ˜¯ Redis 5.0 å¼•å…¥çš„æ•°æ®ç»“æ„ï¼Œé€‚ç”¨äºå¤„ç†æ—¥å¿—å’Œæ¶ˆæ¯é˜Ÿåˆ—ã€‚</p>
<h4 data-id="heading-15">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;
<span class="hljs-keyword">import</span> redis.clients.jedis.StreamEntryID;

<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisStreamExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">streamKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"mystream"</span>;
            
            <span class="hljs-comment">// æ·»åŠ æµå…ƒç´ </span>
            Map&lt;String, String&gt; entry = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            entry.put(<span class="hljs-string">"name"</span>, <span class="hljs-string">"Alice"</span>);
            entry.put(<span class="hljs-string">"message"</span>, <span class="hljs-string">"Hello, World!"</span>);
            jedis.xadd(streamKey, StreamEntryID.NEW_ENTRY, entry);
            
            <span class="hljs-comment">// è¯»å–æµå…ƒç´ </span>
            List&lt;Map.Entry&lt;String, List&lt;StreamEntry&gt;&gt;&gt; streamEntries = jedis.xread(StreamEntryID.UNRECEIVED_ENTRY, streamKey);
            <span class="hljs-keyword">for</span> (Map.Entry&lt;String, List&lt;StreamEntry&gt;&gt; streamEntry : streamEntries) {
                System.out.println(<span class="hljs-string">"Stream: "</span> + streamEntry.getKey());
                <span class="hljs-keyword">for</span> (StreamEntry entry : streamEntry.getValue()) {
                    System.out.println(<span class="hljs-string">"Entry ID: "</span> + entry.getID());
                    System.out.println(<span class="hljs-string">"Fields: "</span> + entry.getFields());
                }
            }
        }
    }
}
</code></pre>
<p>ä¸Šè¿°ä»£ç å±•ç¤ºäº† Redis ä¸­å‡ ç§ä¸»è¦æ•°æ®ç»“æ„çš„ä½¿ç”¨ç¤ºä¾‹ã€‚æ¯ç§æ•°æ®ç»“æ„éƒ½æœ‰å…¶ç‰¹å®šçš„ç”¨é€”å’Œä¼˜åŠ¿ï¼Œå¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„æ¥å®ç°é«˜æ•ˆçš„æ•°æ®å­˜å‚¨å’Œæ“ä½œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é›¶ä¿¡ä»»æ¶æ„ä¸‹çš„ WebAIGC æœåŠ¡å®‰å…¨æŠ€æœ¯å‡çº§æ–¹å‘]]></title>    <link>https://juejin.cn/post/7572534419879673891</link>    <guid>https://juejin.cn/post/7572534419879673891</guid>    <pubDate>2025-11-15T23:29:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572534419879673891" data-draft-id="7572714389942353972" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é›¶ä¿¡ä»»æ¶æ„ä¸‹çš„ WebAIGC æœåŠ¡å®‰å…¨æŠ€æœ¯å‡çº§æ–¹å‘"/> <meta itemprop="keywords" content="Trae,äººå·¥æ™ºèƒ½,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-15T23:29:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é›¶ä¿¡ä»»æ¶æ„ä¸‹çš„ WebAIGC æœåŠ¡å®‰å…¨æŠ€æœ¯å‡çº§æ–¹å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T23:29:46.000Z" title="Sat Nov 15 2025 23:29:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€ï¼šæˆ‘ä»¬å·²ä¸å†â€œç›¸ä¿¡â€ä¸€åˆ‡</h2>
<p>åœ¨äº’è”ç½‘æ±Ÿæ¹–çš„æ—§æ—¶ä»£ï¼Œå®‰å…¨é˜²çº¿çš„å“²å­¦åƒæ˜¯ä¸€åº§å¤åŸé—¨ï¼š</p>
<blockquote>
<p>â€œåªè¦è¿›äº†åŸï¼Œå…¨æ˜¯è‡ªå·±äººï¼›åªè¦åœ¨å¤–é¢ï¼Œå…¨æ˜¯åäººã€‚â€</p>
</blockquote>
<p>è¿™ç§â€œåŸå†…æ— æ•Œâ€çš„é€»è¾‘ç®€å•ç²—æš´ï¼Œä½†å½“æˆ‘ä»¬çš„ <strong>åº”ç”¨ã€ç”¨æˆ·å’ŒAIæ¨¡å‹</strong> åˆ†æ•£åˆ°å…¨çƒå„åœ°çš„äº‘ç«¯èŠ‚ç‚¹ä¸Šæ—¶ï¼ŒåŸé—¨çš„æ¦‚å¿µå˜å¾—åƒã€Šä¸‰ä½“ã€‹çš„é¢å£è®¡åˆ’â€”â€”çœ‹ä¼¼é˜²å¾¡ï¼Œå®åˆ™é€æ˜ã€‚</p>
<p>äºæ˜¯ï¼Œæ–°æ—¶ä»£çš„å£å·å˜æˆäº†ï¼š</p>
<blockquote>
<p><strong>é›¶ä¿¡ä»»ï¼ˆZero Trustï¼‰â€”â€”é»˜è®¤æ— ä¿¡ä»»ï¼Œä¸€åˆ‡éªŒè¯é‡å¯ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-1">ä¸€ã€é›¶ä¿¡ä»»ç†å¿µçš„å†…æ ¸å“²å­¦</h2>
<p>å¦‚æœæŠŠè®¡ç®—ç³»ç»Ÿæ¯”ä½œä¸€ä¸ªç¤¾ä¼šï¼Œé‚£ä¹ˆâ€œé›¶ä¿¡ä»»â€å°±åƒæ˜¯ä¸€ä¸ªåä¹Œæ‰˜é‚¦çš„ç†æ€§å›½åº¦ï¼š</p>
<ul>
<li>å…¬æ°‘ï¼ˆç”¨æˆ·ã€åº”ç”¨ã€è®¾å¤‡ï¼‰æ¯æ¬¡å‡ºé—¨ï¼ˆç½‘ç»œè®¿é—®ï¼‰éƒ½è¦èº«ä»½è¯æ˜ã€‚</li>
<li>è¯ä»¶é€šè¿‡å¤šå±‚éªŒè¯ï¼ˆèº«ä»½è®¤è¯ã€å¤šå› ç´ éªŒè¯ã€è¡Œä¸ºåˆ†æï¼‰ã€‚</li>
<li>è­¦å¯Ÿç³»ç»Ÿï¼ˆå®‰å…¨ç­–ç•¥å¼•æ“ï¼‰å®æ—¶ç›‘æ§æ˜¯å¦æœ‰å¼‚å¸¸ä¸¾åŠ¨ã€‚</li>
</ul>
<p>åœ¨è®¡ç®—çš„ä¸–ç•Œé‡Œï¼Œè¿™æ„å‘³ç€ï¼š</p>

























<table><thead><tr><th>ä¼ ç»Ÿå®‰å…¨æ¨¡å‹</th><th>é›¶ä¿¡ä»»æ¨¡å‹</th></tr></thead><tbody><tr><td>å…ˆä¿¡ä»»ã€åéªŒè¯</td><td>æ°¸ä¸ä¿¡ä»»ã€æŒç»­éªŒè¯</td></tr><tr><td>ç½‘ç»œè¾¹ç•Œä¿æŠ¤</td><td>åŠ¨æ€èº«ä»½å’Œä¸Šä¸‹æ–‡é©±åŠ¨</td></tr><tr><td>é™æ€è®¿é—®æ§åˆ¶</td><td>ç»†ç²’åº¦ç­–ç•¥ã€è‡ªé€‚åº”è®¿é—®</td></tr><tr><td>å†…ç½‘=å®‰å…¨åŒº</td><td>å†…ç½‘=æ½œåœ¨å¨èƒæº</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-2">äºŒã€WebAIGC çš„æ–°å®‰å…¨ç—›ç‚¹</h2>
<p>å½“ AIGCï¼ˆAI Generated Contentï¼‰ èµ°å‘ Web åŒ–ï¼Œå®‰å…¨é—®é¢˜å˜å¾—å‰æ‰€æœªæœ‰åœ°â€œå…ƒâ€ï¼š</p>
<ol>
<li><strong>Prompt æ³¨å…¥æ”»å‡»</strong>ï¼š<br/>
æ”»å‡»è€…åƒç»™AIå–‚äº†ä¸€é¢—â€œé‚ªå¿µç§å­â€ï¼Œè®©å®ƒè‡ªæˆ‘ç¯¡æ”¹è¾“å‡ºé€»è¾‘ã€‚</li>
<li><strong>æ¨¡å‹çªƒå–ä¸è¶Šæƒè°ƒç”¨</strong>ï¼š<br/>
æ”¹æ”¹è¯·æ±‚å¤´ä¹Ÿè®¸å°±èƒ½è®¿é—®å¦ä¸€ä½ç”¨æˆ·çš„å®šåˆ¶æ¨¡å‹æ¥å£ï¼ŒçŠ¹å¦‚å·åˆ«äººé­”æ³•å·è½´ã€‚</li>
<li><strong>æ•°æ®æŠ•æ¯’</strong>ï¼š<br/>
è®­ç»ƒé›†è¢«æ··å…¥æ¶æ„æ•°æ®ï¼ŒAIåƒè¯»äº†é”™è¯¯çš„ã€Šèµ„æ²»é€šé‰´ã€‹ã€‚</li>
<li><strong>ç”Ÿæˆå†…å®¹æ»¥ç”¨</strong>ï¼š<br/>
AIç”Ÿæˆå¯èƒ½è¢«ç”¨äºè¯ˆéª—ã€é’“é±¼æˆ–è™šå‡å®£ä¼ ï¼Œé˜²æŠ¤éœ€è¦â€œè¯­ä¹‰çº§â€å®‰å…¨åˆ†æã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-3">ä¸‰ã€é›¶ä¿¡ä»»æ¶æ„ä¸‹çš„å®‰å…¨æŠ€æœ¯å‡çº§æ–¹å‘</h2>
<h3 data-id="heading-4">1. <strong>èº«ä»½æ— è¾¹ç•ŒåŒ–è®¤è¯</strong></h3>
<p>ä¼ ç»Ÿçš„ OAuth2ã€JWT å·²ç»æ˜¯è€å…µï¼Œä½†åœ¨é›¶ä¿¡ä»»ä¸‹ï¼Œæˆ‘ä»¬è¦åšåˆ°ï¼š</p>
<ul>
<li>æ¯æ¬¡ API è®¿é—®çš†éœ€ <strong>å®æ—¶èº«ä»½éªŒè¯</strong>ï¼›</li>
<li>å¼•å…¥ <strong>åŠ¨æ€ä¸Šä¸‹æ–‡æ ‡ç­¾</strong>ï¼ˆè®¾å¤‡æŒ‡çº¹ã€åœ°ç†ä½ç½®ã€è®¿é—®æ—¶é—´æ®µï¼‰ï¼›</li>
<li>å®ç°â€œä¿¡ä»»æ»‘åŠ¨çª—å£â€ï¼šä¿¡ä»»ä¸æ˜¯ä¸€æ¬¡è®¤è¯ï¼Œè€Œæ˜¯ä¸ªä¸æ–­è¡°å‡çš„å‡½æ•°ã€‚</li>
</ul>
<blockquote>
<p>å°±åƒå–å’–å•¡æç¥ï¼Œæ—¶é—´ä¸€ä¹…å°±å¾—å†æ¥ä¸€æ¯ã€‚</p>
</blockquote>
<p><strong>ç¤ºä¾‹ï¼šåŠ¨æ€ä»¤ç‰Œç­¾å‘æœºåˆ¶ï¼ˆJSä¼ªä»£ç ï¼‰</strong></p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">issueDynamicToken</span>(<span class="hljs-params">userContext</span>) </span>{
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">trustScore</span> = <span class="hljs-title function_ invoke__">calculateTrust</span>(userContext); <span class="hljs-comment">// åŸºäºè®¾å¤‡ã€åœ°ç†ã€å†å²è¡Œä¸º</span>
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">expireTime</span> = trustScore &gt; <span class="hljs-number">80</span> ? <span class="hljs-number">10</span> * <span class="hljs-number">60</span> : <span class="hljs-number">3</span> * <span class="hljs-number">60</span>; <span class="hljs-comment">// é«˜å¯ä¿¡ç¼©çŸ­å¯¿å‘½ï¼Œé˜²æ»¥ç”¨</span>
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">token</span> = <span class="hljs-title function_ invoke__">signToken</span>({
    <span class="hljs-attr">uid</span>: userContext.id,
    <span class="hljs-attr">trust</span>: trustScore,
    <span class="hljs-attr">exp</span>: Date.<span class="hljs-title function_ invoke__">now</span>() + expireTime * <span class="hljs-number">1000</span>
  });
  <span class="hljs-keyword">return</span> token;
}
</code></pre>
<hr/>
<h3 data-id="heading-5">2. <strong>å¤šå±‚ç­–ç•¥ç®¡æ§ï¼ˆPolicy-as-Codeï¼‰</strong></h3>
<p>äººç±»å®‰å…¨å›¢é˜Ÿå¤ªæ…¢ï¼ŒAIæ—¶ä»£çš„é˜²å¾¡è¦â€œè‡ªåŠ¨é•¿ç‰™â€ï¼š</p>
<ul>
<li>ç­–ç•¥ä»¥ä»£ç å½¢å¼å£°æ˜ï¼ˆJSON/YAML/JS è¡¨è¾¾å¼ï¼‰ã€‚</li>
<li>å®æ—¶è®¡ç®—â€œæ˜¯å¦å…è®¸è®¿é—®ã€å…è®¸ç”Ÿæˆæˆ–è°ƒç”¨æ¨¡å‹â€ã€‚</li>
<li>å®‰å…¨å›¢é˜Ÿä¸å†å‘å¸ƒæ–‡æ¡£ï¼Œè€Œæ˜¯ç›´æ¥å‘å¸ƒâ€œå®‰å…¨é€»è¾‘æ¨¡å—â€ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šæ™ºèƒ½ç­–ç•¥æ£€æŸ¥</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">policyCheck</span>(<span class="hljs-params">request, userContext</span>) {
  <span class="hljs-keyword">const</span> rules = [
    { <span class="hljs-attr">condition</span>: userContext.<span class="hljs-property">trust</span> &lt; <span class="hljs-number">50</span>, <span class="hljs-attr">action</span>: <span class="hljs-string">'deny'</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'Low Trust'</span> },
    { <span class="hljs-attr">condition</span>: request.<span class="hljs-property">endpoint</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'/admin'</span>), <span class="hljs-attr">role</span>: <span class="hljs-string">'Admin'</span> },
    { <span class="hljs-attr">condition</span>: <span class="hljs-regexp">/forbidden|jailbreak/i</span>.<span class="hljs-title function_">test</span>(request.<span class="hljs-property">input</span>), <span class="hljs-attr">action</span>: <span class="hljs-string">'sanitize'</span> }
  ];

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> rule <span class="hljs-keyword">of</span> rules) {
    <span class="hljs-keyword">if</span> (evalRule(rule.<span class="hljs-property">condition</span>, request, userContext)) {
      <span class="hljs-keyword">return</span> rule.<span class="hljs-property">action</span> || <span class="hljs-string">'allow'</span>;
    }
  }
}
</code></pre>
<blockquote>
<p>è¿™å°±åƒä¸€ä½â€œæ•°å­—è´¨æ£€å‘˜â€ï¼Œæ¯æ¬¡AIå‘è¨€å‰éƒ½è¢«è¯¢é—®ï¼šâ€œä½ ç¡®å®šä½ è¯¥è¯´è¿™ä¸ªå—ï¼Ÿâ€</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">3. <strong>å†…å®¹çº§é˜²å¾¡ä¸è¯­ä¹‰å®¡è®¡</strong></h3>
<p>åœ¨ AIGC ç¯å¢ƒä¸­ï¼Œä¿¡æ¯æµä¸æ˜¯å­—èŠ‚æµï¼Œè€Œæ˜¯â€œæ„ä¹‰æµâ€ã€‚<br/>
å®‰å…¨æ§åˆ¶å¿…é¡»å…·å¤‡è¯­ä¹‰ç†è§£ï¼š</p>
<ul>
<li>å¯ç”¨ <strong>å†…å®¹è¿‡æ»¤æ¨¡å‹</strong>ï¼šæ£€æµ‹æ»¥ç”¨ã€æ•æ„Ÿè¡¨è¾¾ã€æ•°æ®æ³„éœ²ã€‚</li>
<li>å¯¹ç”Ÿæˆè¯·æ±‚è¿›è¡Œâ€œæ„å›¾åˆ†æâ€ï¼Œæ£€æµ‹è¶Šæƒæç¤ºè¯ã€‚</li>
<li>åˆ©ç”¨ <strong>Embedding ç›¸ä¼¼åº¦é˜²å¾¡</strong>ï¼šé˜²æ­¢éšè—å¼æ”»å‡»ï¼Œæ¯”å¦‚åˆ©ç”¨è¯­ä¹‰é‡å†™ç»•è¿‡è§„åˆ™ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-7">4. <strong>æ¨¡å‹çº§é˜²æŠ¤ä¸è®¿é—®æ°´å°</strong></h3>
<p>æœªæ¥ï¼Œæ¨¡å‹ä¸ä»…éœ€è¦â€œé˜²å¾¡è¾“å…¥â€ï¼Œè¿˜éœ€è¦â€œè¯æ˜è‡ªå·±â€ï¼š</p>
<ul>
<li><strong>æ¨¡å‹æ°´å°</strong>ï¼šåœ¨è¾“å‡ºä¸­åµŒå…¥å¯éªŒè¯çš„æ•°å­¦ç‰¹å¾ï¼Œç”¨äºæº¯æºã€‚</li>
<li><strong>å¤šé‡è°ƒç”¨å‰ªè£</strong>ï¼šé™åˆ¶å‚æ•°è§„æ¨¡ã€é˜²æ»¥ç”¨å¤§æ¨¡å‹è®¡ç®—èµ„æºã€‚</li>
<li><strong>å¯éªŒè¯æ‰§è¡Œç¯å¢ƒï¼ˆVEEï¼‰</strong> ï¼šç¡®ä¿æ¨¡å‹æƒé‡å’Œè¿è¡Œé€»è¾‘æœªè¢«ç¯¡æ”¹ã€‚</li>
</ul>
<blockquote>
<p>ç®€å•è¯´ï¼Œå°±æ˜¯è®©AIä¹Ÿè£…ä¸Šé˜²ç›—é—¨ï¼Œè¿˜å¸¦GPSå®šä½ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-8">å››ã€WebAIGC çš„å®‰å…¨å‡çº§è·¯çº¿å›¾</h2>



































<table><thead><tr><th>é˜¶æ®µ</th><th>ç›®æ ‡</th><th>æŠ€æœ¯æ‰‹æ®µ</th></tr></thead><tbody><tr><td><strong>é˜¶æ®µ1</strong></td><td>åŸºç¡€èº«ä»½å®‰å…¨</td><td>MFAã€åŠ¨æ€ä»¤ç‰Œã€APIç½‘å…³éªŒè¯</td></tr><tr><td><strong>é˜¶æ®µ2</strong></td><td>ç­–ç•¥è‡ªåŠ¨åŒ–</td><td>Policy-as-Codeã€è¡Œä¸ºæ£€æµ‹å¼•æ“</td></tr><tr><td><strong>é˜¶æ®µ3</strong></td><td>å†…å®¹çº§é˜²å¾¡</td><td>Promptåˆ†æã€ç”Ÿæˆè¯­ä¹‰å®¡è®¡</td></tr><tr><td><strong>é˜¶æ®µ4</strong></td><td>å¯éªŒè¯AI</td><td>æ¨¡å‹æ°´å°ã€å¯ä¿¡æ‰§è¡Œç¯å¢ƒ</td></tr><tr><td><strong>é˜¶æ®µ5</strong></td><td>è‡ªé€‚åº”é›¶ä¿¡ä»»AI</td><td>AIç®¡AIçš„è‡ªä¸»å®‰å…¨æ²»ç†ç³»ç»Ÿ</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-9">äº”ã€ç»“è¯­ï¼šä¿¡ä»»ä¹‹æ­»ï¼Œæ™ºèƒ½ä¹‹ç”Ÿ</h2>
<p>é›¶ä¿¡ä»»ä¸æ˜¯â€œä¸ä¿¡ä»»â€ï¼Œè€Œæ˜¯ <strong>å°†ä¿¡ä»»çš„å®šä¹‰æ‹¿å›ç§‘å­¦ä¸–ç•Œ</strong>ã€‚<br/>
åœ¨ AIGC æ—¶ä»£ï¼Œå®‰å…¨è¾¹ç•Œæ¨¡ç³Šï¼Œäººæœºåä½œå¯†åˆ‡ï¼Œæˆ‘ä»¬è¦è®©ç³»ç»Ÿåƒè©¹å§†æ–¯Â·é‚¦å¾·ä¸€æ ·ç†æ™ºï¼Œåˆåƒåº„å­ä¸€æ ·æ¸…é†’ã€‚</p>
<blockquote>
<p><strong>çœŸæ­£çš„å®‰å…¨ï¼Œä¸æ˜¯ç­‘å¢™ï¼Œè€Œæ˜¯è®©ç³»ç»Ÿå­¦ä¼šæ€€ç–‘ã€‚</strong></p>
</blockquote>
<hr/>
<p><em>å°‘ä¸€ç‚¹ç›²ç›®ä¿¡ä»»ï¼Œå¤šä¸€ä»½è®¡ç®—çš„æ€€ç–‘ã€‚<br/>
åœ¨é›¶ä¿¡ä»»çš„ä¸–ç•Œé‡Œï¼ŒAIæ‰ä¼šçœŸçš„è‡ªç”±ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[REST API ä¸å‰åç«¯äº¤äº’ï¼šè®©åº”ç”¨çœŸæ­£è·‘èµ·æ¥]]></title>    <link>https://juejin.cn/post/7572781559766548530</link>    <guid>https://juejin.cn/post/7572781559766548530</guid>    <pubDate>2025-11-15T21:48:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572781559766548530" data-draft-id="7572515402796023858" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="REST API ä¸å‰åç«¯äº¤äº’ï¼šè®©åº”ç”¨çœŸæ­£è·‘èµ·æ¥"/> <meta itemprop="keywords" content="åç«¯,Python,IPython"/> <meta itemprop="datePublished" content="2025-11-15T21:48:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            REST API ä¸å‰åç«¯äº¤äº’ï¼šè®©åº”ç”¨çœŸæ­£è·‘èµ·æ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T21:48:51.000Z" title="Sat Nov 15 2025 21:48:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨ç°ä»£ Web å¼€å‘ä¸­ï¼Œå‰åç«¯åˆ†ç¦»å·²ç»æˆä¸ºä¸»æµã€‚æ— è®ºä½ æ˜¯åœ¨åšç®¡ç†åå°ã€å°ç¨‹åºã€ç§»åŠ¨ App è¿˜æ˜¯å¤æ‚çš„ Web ç³»ç»Ÿï¼Œéƒ½ç»•ä¸å¼€ä¸€ä¸ªå…³é”®æŠ€æœ¯ï¼š
<strong>REST API</strong>ã€‚</p>
</blockquote>
<p>å½“ä½ èƒ½ç”¨ Python å†™å‡ºæ¸…æ™°ã€è§„èŒƒã€æ˜“ç”¨çš„ REST API æ—¶ï¼Œä½ åšçš„é¡¹ç›®å°±èƒ½è¢«å„ç±»å‰ç«¯è½»æ¾è°ƒç”¨ï¼Œä»è€Œå…·å¤‡çœŸæ­£çš„â€œäº’è”ç½‘åº”ç”¨èƒ½åŠ›â€ã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬å°±èŠèŠ REST API æ˜¯ä»€ä¹ˆã€ä¸ºä»€ä¹ˆé‡è¦ã€è¯¥æ€ä¹ˆç”¨ Python å®ç°ï¼Œä»¥åŠå‰åç«¯ä¹‹é—´æ˜¯å¦‚ä½•äº¤äº’çš„ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯ REST API</h2>
<p>REST çš„å…¨ç§°æ˜¯ Representational State Transferï¼Œæ˜¯ä¸€ç§è½»é‡çº§ã€æ ‡å‡†åŒ–çš„æ¥å£è®¾è®¡é£æ ¼ã€‚</p>
<p>å®ƒä¸å¤æ‚ï¼Œç”¨ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯ï¼š</p>
<p><strong>ä½¿ç”¨ URL è¡¨ç¤ºèµ„æºï¼Œç”¨ HTTP æ–¹æ³•è¡¨è¾¾æ“ä½œã€‚</strong></p>
<p>æ¯”å¦‚â€œæ–‡ç« â€è¿™ä¸ªèµ„æºï¼š</p>



































<table><thead><tr><th>æ“ä½œ</th><th>æ–¹æ³•</th><th>ç¤ºä¾‹ URL</th></tr></thead><tbody><tr><td>è·å–æ–‡ç« åˆ—è¡¨</td><td>GET</td><td>/api/articles/</td></tr><tr><td>åˆ›å»ºä¸€ç¯‡æ–‡ç« </td><td>POST</td><td>/api/articles/</td></tr><tr><td>è·å–æŸç¯‡æ–‡ç« è¯¦æƒ…</td><td>GET</td><td>/api/articles/10/</td></tr><tr><td>æ›´æ–°æ–‡ç« </td><td>PUT</td><td>/api/articles/10/</td></tr><tr><td>åˆ é™¤æ–‡ç« </td><td>DELETE</td><td>/api/articles/10/</td></tr></tbody></table>
<p>è¿™å°±æ˜¯ REST æœ€æ ¸å¿ƒçš„æ€æƒ³ï¼š
<strong>URL è¡¨èµ„æºï¼Œæ–¹æ³•è¡¨è¡Œä¸ºã€‚</strong></p>
<hr/>
<h2 data-id="heading-1">äºŒã€REST API ä¸ºä»€ä¹ˆé‡è¦</h2>
<p>åœ¨å‰åç«¯åˆ†ç¦»æ¶æ„ä¸‹ï¼š</p>
<ul>
<li>å‰ç«¯ï¼šè´Ÿè´£é¡µé¢ã€å±•ç¤ºã€äº¤äº’</li>
<li>åç«¯ï¼šè´Ÿè´£æ•°æ®ã€ä¸šåŠ¡é€»è¾‘ã€æƒé™ã€å­˜å‚¨</li>
</ul>
<p>ä¸¤è€…é€šè¿‡ API è¿æ¥ï¼Œåƒè¿™æ ·ï¼š</p>
<pre><code class="hljs language-css" lang="css">React / Vue / å°ç¨‹åº / App  â†’  <span class="hljs-attribute">REST</span> API  â†’  Python åç«¯
</code></pre>
<p>å¥½å¤„éå¸¸æ˜ç¡®ï¼š</p>
<ol>
<li><strong>çµæ´»ï¼šä¸€ä¸ªåç«¯ï¼Œå¯ä»¥æœåŠ¡å¤šç«¯</strong></li>
<li><strong>è§£è€¦ï¼šå‰ç«¯æ”¹ç•Œé¢ä¸å½±å“åç«¯é€»è¾‘</strong></li>
<li><strong>å¯æµ‹è¯•ï¼šAPI å¯ä»¥ç”¨ Postmanã€curl æµ‹è¯•</strong></li>
<li><strong>æ ‡å‡†åŒ–ï¼šç»“æ„æ¸…æ™°ï¼Œå›¢é˜Ÿåä½œæ›´å®¹æ˜“</strong></li>
</ol>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦ä½ å†™å¥½ APIï¼Œåº”ç”¨å°±èƒ½éšä¾¿æ¥å„ç§å‰ç«¯ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€Python å¦‚ä½•å®ç° REST API</h2>
<p>Python æœ‰å¾ˆå¤šæ–¹å¼å¯ä»¥åˆ›å»º REST APIï¼Œæœ€å¸¸ç”¨çš„æœ‰ï¼š</p>
<ul>
<li><strong>Flask</strong>ï¼šè½»é‡çµæ´»</li>
<li><strong>Django REST framework</strong>ï¼šå¼ºå¤§ã€ä¼ä¸šçº§</li>
<li><strong>FastAPI</strong>ï¼šé«˜æ€§èƒ½ã€ç°ä»£åŒ–ï¼ˆæ–‡æ¡£å¥½ã€é€Ÿåº¦å¿«ï¼‰</li>
</ul>
<p>ä¸‹é¢æˆ‘ä»¬ç”¨ Flask ç¤ºèŒƒä¸€ä¸ªæœ€ç®€å•çš„ REST APIã€‚</p>
<hr/>
<h2 data-id="heading-3">å››ã€ç”¨ Flask å†™ä¸€ä¸ªç®€å• REST API</h2>
<p>ä½ å…ˆå®‰è£… Flaskï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pip install flask
</code></pre>
<p>å†™ä¸€ä¸ªåŸºç¡€æ¥å£ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, jsonify, request

app = Flask(__name__)

articles = [
    {<span class="hljs-string">"id"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"title"</span>: <span class="hljs-string">"Hello Python"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"Flask makes API easy"</span>},
    {<span class="hljs-string">"id"</span>: <span class="hljs-number">2</span>, <span class="hljs-string">"title"</span>: <span class="hljs-string">"REST é£æ ¼"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"è®©æ¥å£æ›´æ ‡å‡†æ›´æ¸…æ™°"</span>},
]

<span class="hljs-meta">@app.get(<span class="hljs-params"><span class="hljs-string">"/api/articles"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_articles</span>():
    <span class="hljs-keyword">return</span> jsonify(articles)

<span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">"/api/articles"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_article</span>():
    data = request.json
    data[<span class="hljs-string">"id"</span>] = <span class="hljs-built_in">len</span>(articles) + <span class="hljs-number">1</span>
    articles.append(data)
    <span class="hljs-keyword">return</span> jsonify({<span class="hljs-string">"message"</span>: <span class="hljs-string">"created"</span>, <span class="hljs-string">"article"</span>: data})

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    app.run()
</code></pre>
<p>è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">python app.py
</code></pre>
<p>ç„¶åä½ å°±å¯ä»¥è®¿é—®ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2F127.0.0.1%3A5000%2Fapi%2Farticles" target="_blank" title="http://127.0.0.1:5000/api/articles" ref="nofollow noopener noreferrer">http://127.0.0.1:5000/api/articles</a>
è·å–æ–‡ç« åˆ—è¡¨</li>
<li>POST ç›¸åŒåœ°å€å³å¯åˆ›å»ºæ–‡ç« </li>
</ul>
<p>è¿™å°±æ˜¯æœ€åŸºç¡€çš„ REST APIã€‚</p>
<hr/>
<h2 data-id="heading-4">äº”ã€å‰ç«¯æ˜¯å¦‚ä½•è°ƒç”¨ API çš„</h2>
<p>ç°ä»£å‰ç«¯ä¸€èˆ¬ä½¿ç”¨ <strong>axiosã€fetchã€uni.requestã€å°ç¨‹åº API ç­‰æ–¹å¼</strong> æ¥è°ƒç”¨åç«¯æ¥å£ã€‚</p>
<p>ä»¥ JavaScript fetch ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">fetch</span>(<span class="hljs-string">"http://127.0.0.1:5000/api/articles"</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">resp</span> =&gt;</span> resp.<span class="hljs-title function_">json</span>())
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data));
</code></pre>
<p>è¿”å›å€¼é€šå¸¸æ˜¯ JSONï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">[</span>
  <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Hello Python"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Flask makes API easy"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"REST é£æ ¼"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è®©æ¥å£æ›´æ ‡å‡†æ›´æ¸…æ™°"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">]</span>
</code></pre>
<p>ä½ ä¼šå‘ç°ï¼Œå‰ç«¯ä¸éœ€è¦çŸ¥é“ä»»ä½•æ•°æ®åº“ç»†èŠ‚ï¼Œåªç”¨å…³æ³¨æ•°æ®æœ¬èº«å³å¯ã€‚</p>
<hr/>
<h2 data-id="heading-5">å…­ã€REST API å¿…é¡»éµå®ˆçš„è§„èŒƒ</h2>
<p>ä¸€ä¸ªä¼˜ç§€çš„ API åº”è¯¥æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p>
<h4 data-id="heading-6">1. è¿”å›ç»Ÿä¸€çš„ JSON ç»“æ„</h4>
<p>ä¸è¦è®©å‰ç«¯çŒœå­—æ®µã€‚</p>
<h4 data-id="heading-7">2. æ˜ç¡®çš„ HTTP çŠ¶æ€ç </h4>
<p>ç¤ºä¾‹ï¼š</p>
<ul>
<li>200 æˆåŠŸ</li>
<li>201 åˆ›å»ºæˆåŠŸ</li>
<li>400 å‚æ•°é”™è¯¯</li>
<li>401 æœªç™»å½•</li>
<li>500 æœåŠ¡ç«¯é”™è¯¯</li>
</ul>
<h4 data-id="heading-8">3. ä½¿ç”¨åè¯åš URL</h4>
<p>å°½é‡é¿å…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/getArticle
/addArticle
</code></pre>
<p>è¦è¿™æ ·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/articles/
/articles/10
</code></pre>
<h4 data-id="heading-9">4. ä¿è¯æ•°æ®ç»“æ„æ¸…æ™°å¯è¯»</h4>
<p>å­—æ®µåç§°ç®€æ´ç»Ÿä¸€ã€‚</p>
<hr/>
<h2 data-id="heading-10">ä¸ƒã€Python ä¸­æ›´å¼ºå¤§çš„ REST æ¡†æ¶æ¨è</h2>
<p>å¦‚æœä½ çš„é¡¹ç›®è¾ƒå¤§ï¼Œæ¨èä½¿ç”¨ï¼š</p>
<h3 data-id="heading-11">Django REST framework</h3>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>è‡ªå¸¦è®¤è¯ç³»ç»Ÿ</li>
<li>è‡ªå¸¦åˆ†é¡µã€åºåˆ—åŒ–ã€éªŒè¯</li>
<li>ä¼ä¸šçº§é¡¹ç›®é¦–é€‰</li>
</ul>
<p>ä¸€è¡Œä»£ç å°±èƒ½ç”Ÿæˆ APIï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> rest_framework.viewsets <span class="hljs-keyword">import</span> ModelViewSet
</code></pre>
<h3 data-id="heading-12">FastAPI</h3>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>éå¸¸å¿«</li>
<li>è‡ªåŠ¨ç”Ÿæˆ Swagger æ–‡æ¡£</li>
<li>å¼‚æ­¥æ”¯æŒå¼º</li>
</ul>
<p>ç¤ºä¾‹è¯­æ³•ç®€æ´æ¼‚äº®ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> FastAPI

app = FastAPI()

<span class="hljs-meta">@app.get(<span class="hljs-params"><span class="hljs-string">"/items"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">read_items</span>():
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"msg"</span>: <span class="hljs-string">"hello"</span>}
</code></pre>
<hr/>
<h2 data-id="heading-13">å…«ã€æ€»ç»“</h2>
<p>è¿™ä¸€ç« æˆ‘ä»¬ææ¸…æ¥šäº†ï¼š</p>
<ul>
<li>REST API æ˜¯å‰åç«¯åˆ†ç¦»çš„åŸºçŸ³</li>
<li>API å°±æ˜¯èµ„æºï¼ˆURLï¼‰+ è¡Œä¸ºï¼ˆHTTP æ–¹æ³•ï¼‰</li>
<li>Python å¯ä»¥ç”¨ Flaskã€Django RESTã€FastAPI ç­‰æ¡†æ¶å®ç°</li>
<li>å‰ç«¯é€šè¿‡ JSON/HTTP è°ƒç”¨ API</li>
<li>ä¼˜ç§€çš„ API å¿…é¡»è§„èŒƒã€ç»Ÿä¸€ã€æ¸…æ™°</li>
</ul>
<p>å½“ä½ èƒ½ç†Ÿç»ƒå†™ REST APIï¼Œä½ å·²ç»å…·å¤‡æˆä¸ºåç«¯å¼€å‘è€…çš„é‡è¦èƒ½åŠ›ã€‚
åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå®ƒèƒ½å¸®ä½ å¿«é€Ÿæ­å»ºæœåŠ¡ç«¯ç³»ç»Ÿï¼Œè®©ä½ çš„ä¸šåŠ¡çœŸæ­£è½åœ°è¿è¡Œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python ç»¼åˆé¡¹ç›®å®æˆ˜ï¼šå­¦ç”Ÿæˆç»©ç®¡ç†ç³»ç»Ÿï¼ˆå‘½ä»¤è¡Œç‰ˆï¼‰]]></title>    <link>https://juejin.cn/post/7572515402796040242</link>    <guid>https://juejin.cn/post/7572515402796040242</guid>    <pubDate>2025-11-15T21:49:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572515402796040242" data-draft-id="7572502156487901210" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python ç»¼åˆé¡¹ç›®å®æˆ˜ï¼šå­¦ç”Ÿæˆç»©ç®¡ç†ç³»ç»Ÿï¼ˆå‘½ä»¤è¡Œç‰ˆï¼‰"/> <meta itemprop="keywords" content="åç«¯,Python,IPython"/> <meta itemprop="datePublished" content="2025-11-15T21:49:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python ç»¼åˆé¡¹ç›®å®æˆ˜ï¼šå­¦ç”Ÿæˆç»©ç®¡ç†ç³»ç»Ÿï¼ˆå‘½ä»¤è¡Œç‰ˆï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T21:49:28.000Z" title="Sat Nov 15 2025 21:49:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å½“æˆ‘ä»¬å­¦å®Œ Python çš„åŸºæœ¬è¯­æ³•ã€å‡½æ•°ã€æ–‡ä»¶æ“ä½œã€æ•°æ®ç»“æ„ä¹‹åï¼Œæœ€é‡è¦çš„å°±æ˜¯â€œåŠ¨æ‰‹æŠŠé›¶æ•£æŠ€èƒ½ç»„åˆèµ·æ¥â€ã€‚
ä¸€ä¸ª <strong>å‘½ä»¤è¡Œç‰ˆæœ¬çš„å­¦ç”Ÿæˆç»©ç®¡ç†ç³»ç»Ÿ</strong> éå¸¸é€‚åˆä½œä¸ºé˜¶æ®µæ€§å°é¡¹ç›®ï¼Œå®ƒä¸éœ€è¦ç”¨åˆ°ä»»ä½• GUI æ¡†æ¶ï¼Œä½†æ¶µç›–äº†å¦‚ä¸‹å…³é”®çŸ¥è¯†ç‚¹ï¼š</p>
</blockquote>
<ul>
<li>æ–‡ä»¶è¯»å†™</li>
<li>åˆ—è¡¨ä¸å­—å…¸æ“ä½œ</li>
<li>è¾“å…¥ä¸è¾“å‡º</li>
<li>æµç¨‹æ§åˆ¶ä¸å¼‚å¸¸å¤„ç†</li>
<li>æ¨¡å—åŒ–ï¼ˆå¯é€‰ï¼‰</li>
<li>ç¨‹åºç»“æ„è®¾è®¡</li>
</ul>
<p>è¿™ç±»å°é¡¹ç›®è™½ç„¶ç®€å•ï¼Œä½†éå¸¸æ¥è¿‘çœŸå®ä¸šåŠ¡é€»è¾‘ï¼Œæ˜¯ä»â€œè¯­æ³•â€è¿ˆå‘â€œå°å‹åº”ç”¨â€çš„ç¬¬ä¸€æ­¥ã€‚</p>
<hr/>
<h2 data-id="heading-0">1. é¡¹ç›®åŠŸèƒ½è®¾è®¡</h2>
<p>æˆ‘ä»¬å…ˆæŠŠé¡¹ç›®åŠŸèƒ½è§„åˆ’æ¸…æ¥šï¼Œè¿™æ¯”å†™ä»£ç æ›´é‡è¦ï¼š</p>
<h4 data-id="heading-1"><strong>æ ¸å¿ƒéœ€æ±‚</strong></h4>
<ol>
<li><strong>æ·»åŠ å­¦ç”Ÿæˆç»©</strong></li>
<li><strong>æŸ¥çœ‹æ‰€æœ‰å­¦ç”Ÿæˆç»©</strong></li>
<li><strong>æŸ¥è¯¢æŒ‡å®šå­¦ç”Ÿ</strong></li>
<li><strong>ä¿®æ”¹å­¦ç”Ÿæˆç»©</strong></li>
<li><strong>åˆ é™¤å­¦ç”Ÿä¿¡æ¯</strong></li>
<li><strong>ä¿å­˜åˆ°æ–‡ä»¶ / ä»æ–‡ä»¶è¯»å–</strong></li>
<li><strong>é€€å‡ºç¨‹åº</strong></li>
</ol>
<h4 data-id="heading-2"><strong>æ•°æ®ç»“æ„è®¾è®¡</strong></h4>
<p>æˆ‘ä»¬ç”¨å­—å…¸è¡¨ç¤ºä¸€ä¸ªå­¦ç”Ÿï¼š</p>
<pre><code class="hljs language-python" lang="python">{
    <span class="hljs-string">"id"</span>: <span class="hljs-string">"2025001"</span>,
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¼ ä¸‰"</span>,
    <span class="hljs-string">"score"</span>: <span class="hljs-number">88</span>
}
</code></pre>
<p>å…¨éƒ¨å­¦ç”Ÿæ•°æ®ä½¿ç”¨åˆ—è¡¨ä¿å­˜ï¼š</p>
<pre><code class="hljs language-python" lang="python">students = []
</code></pre>
<p>è¿™ä¸ªç»“æ„æ¸…æ™°ã€æ‰©å±•æ€§å¼ºï¼Œä¹Ÿæ–¹ä¾¿åºåˆ—åŒ–ä¿å­˜ã€‚</p>
<hr/>
<h2 data-id="heading-3">2. ä¸»èœå•è®¾è®¡</h2>
<p>å‘½ä»¤è¡Œç¨‹åºæœ€é‡è¦çš„å°±æ˜¯èœå•å¾ªç¯ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">show_menu</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n===== å­¦ç”Ÿæˆç»©ç®¡ç†ç³»ç»Ÿ ====="</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"1. æ·»åŠ å­¦ç”Ÿæˆç»©"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"2. æŸ¥çœ‹æ‰€æœ‰å­¦ç”Ÿ"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"3. æŸ¥è¯¢å­¦ç”Ÿ"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"4. ä¿®æ”¹å­¦ç”Ÿæˆç»©"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"5. åˆ é™¤å­¦ç”Ÿä¿¡æ¯"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"6. ä¿å­˜æ•°æ®"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"7. è¯»å–æ•°æ®"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"0. é€€å‡ºç³»ç»Ÿ"</span>)
</code></pre>
<p>çœ‹èµ·æ¥ç®€å•ï¼Œä½†è¿™æ˜¯åç»­æ‰€æœ‰æ“ä½œçš„â€œå…¥å£â€ã€‚</p>
<hr/>
<h2 data-id="heading-4">3. åŠŸèƒ½å®ç°</h2>
<p>ä¸‹é¢ç»™å‡ºå®Œæ•´çš„æ ¸å¿ƒé€»è¾‘ï¼Œä»£ç ç»“æ„æ¸…æ™°æ˜“æ‡‚ã€‚</p>
<hr/>
<h3 data-id="heading-5">â‘  æ·»åŠ å­¦ç”Ÿ</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">add_student</span>(<span class="hljs-params">students</span>):
    sid = <span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥å­¦å·ï¼š"</span>)
    name = <span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥å§“åï¼š"</span>)
    score = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥æˆç»©ï¼š"</span>))
    students.append({<span class="hljs-string">"id"</span>: sid, <span class="hljs-string">"name"</span>: name, <span class="hljs-string">"score"</span>: score})
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ·»åŠ æˆåŠŸï¼"</span>)
</code></pre>
<hr/>
<h3 data-id="heading-6">â‘¡ æŸ¥çœ‹æ‰€æœ‰å­¦ç”Ÿ</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">show_all</span>(<span class="hljs-params">students</span>):
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> students:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"å½“å‰æ²¡æœ‰å­¦ç”Ÿæ•°æ®"</span>)
        <span class="hljs-keyword">return</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n--- æ‰€æœ‰å­¦ç”Ÿæˆç»© ---"</span>)
    <span class="hljs-keyword">for</span> stu <span class="hljs-keyword">in</span> students:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å­¦å·ï¼š<span class="hljs-subst">{stu[<span class="hljs-string">'id'</span>]}</span>ï¼Œå§“åï¼š<span class="hljs-subst">{stu[<span class="hljs-string">'name'</span>]}</span>ï¼Œæˆç»©ï¼š<span class="hljs-subst">{stu[<span class="hljs-string">'score'</span>]}</span>"</span>)
</code></pre>
<hr/>
<h3 data-id="heading-7">â‘¢ æŒ‰å­¦å·æŸ¥è¯¢å­¦ç”Ÿ</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">find_student</span>(<span class="hljs-params">students</span>):
    sid = <span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥è¦æŸ¥è¯¢çš„å­¦å·ï¼š"</span>)
    <span class="hljs-keyword">for</span> stu <span class="hljs-keyword">in</span> students:
        <span class="hljs-keyword">if</span> stu[<span class="hljs-string">"id"</span>] == sid:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰¾åˆ° â†’ å§“åï¼š<span class="hljs-subst">{stu[<span class="hljs-string">'name'</span>]}</span>ï¼Œæˆç»©ï¼š<span class="hljs-subst">{stu[<span class="hljs-string">'score'</span>]}</span>"</span>)
            <span class="hljs-keyword">return</span> stu
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æœªæ‰¾åˆ°è¯¥å­¦ç”Ÿ"</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
</code></pre>
<hr/>
<h3 data-id="heading-8">â‘£ ä¿®æ”¹æˆç»©</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">update_student</span>(<span class="hljs-params">students</span>):
    stu = find_student(students)
    <span class="hljs-keyword">if</span> stu:
        new_score = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥æ–°æˆç»©ï¼š"</span>))
        stu[<span class="hljs-string">"score"</span>] = new_score
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¿®æ”¹æˆåŠŸï¼"</span>)
</code></pre>
<hr/>
<h3 data-id="heading-9">â‘¤ åˆ é™¤å­¦ç”Ÿ</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">delete_student</span>(<span class="hljs-params">students</span>):
    stu = find_student(students)
    <span class="hljs-keyword">if</span> stu:
        students.remove(stu)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"åˆ é™¤æˆåŠŸï¼"</span>)
</code></pre>
<hr/>
<h2 data-id="heading-10">4. æ•°æ®æŒä¹…åŒ–ï¼ˆæ–‡ä»¶ä¿å­˜ &amp; è¯»å–ï¼‰</h2>
<p>æˆ‘ä»¬ä½¿ç”¨ç®€å•çš„ JSON æ ¼å¼ï¼Œå› ä¸ºå®ƒç»“æ„æ¸…æ™°ã€æ–¹ä¾¿è¯»å†™ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> json

<span class="hljs-keyword">def</span> <span class="hljs-title function_">save_data</span>(<span class="hljs-params">students, filename=<span class="hljs-string">"students.json"</span></span>):
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename, <span class="hljs-string">"w"</span>, encoding=<span class="hljs-string">"utf-8"</span>) <span class="hljs-keyword">as</span> f:
        json.dump(students, f, ensure_ascii=<span class="hljs-literal">False</span>, indent=<span class="hljs-number">2</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ•°æ®å·²ä¿å­˜!"</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">load_data</span>(<span class="hljs-params">filename=<span class="hljs-string">"students.json"</span></span>):
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename, <span class="hljs-string">"r"</span>, encoding=<span class="hljs-string">"utf-8"</span>) <span class="hljs-keyword">as</span> f:
            data = json.load(f)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ•°æ®è¯»å–æˆåŠŸ!"</span>)
        <span class="hljs-keyword">return</span> data
    <span class="hljs-keyword">except</span> FileNotFoundError:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä½¿ç”¨ç©ºæ•°æ®ã€‚"</span>)
        <span class="hljs-keyword">return</span> []
</code></pre>
<hr/>
<h2 data-id="heading-11">5. ä¸»ç¨‹åºï¼ˆæŠŠæ‰€æœ‰åŠŸèƒ½ä¸²èµ·æ¥ï¼‰</h2>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    students = load_data()

    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        show_menu()
        choice = <span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·é€‰æ‹©æ“ä½œï¼š"</span>)

        <span class="hljs-keyword">if</span> choice == <span class="hljs-string">"1"</span>:
            add_student(students)
        <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">"2"</span>:
            show_all(students)
        <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">"3"</span>:
            find_student(students)
        <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">"4"</span>:
            update_student(students)
        <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">"5"</span>:
            delete_student(students)
        <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">"6"</span>:
            save_data(students)
        <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">"7"</span>:
            students = load_data()
        <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">"0"</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"é€€å‡ºç³»ç»Ÿï¼Œæ¬¢è¿ä¸‹æ¬¡ä½¿ç”¨ï¼"</span>)
            <span class="hljs-keyword">break</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¾“å…¥æ— æ•ˆï¼Œè¯·é‡æ–°é€‰æ‹©!"</span>)
</code></pre>
<p>è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">python student_system.py
</code></pre>
<p>ä½ çš„ç¬¬ä¸€ä¸ªå®Œæ•´å°ç³»ç»Ÿå°±èƒ½è·‘èµ·æ¥äº†ã€‚</p>
<hr/>
<h2 data-id="heading-12">6. é¡¹ç›®æ‰©å±•æ–¹å‘</h2>
<p>å¦‚æœä½ æƒ³ç»§ç»­å‡çº§è¿™ä¸ªé¡¹ç›®ï¼Œæˆ‘ç»™ä½ ä¸€äº›å¾ˆå¥½æ‹“å±•æ–¹å‘ï¼š</p>
<h4 data-id="heading-13">âœ” å¢åŠ æˆç»©æ’åºåŠŸèƒ½</h4>
<p>æŒ‰æˆç»©æ’åºã€æŒ‰å§“åæ’åºç­‰ã€‚</p>
<h4 data-id="heading-14">âœ” å¢åŠ æˆç»©ç»Ÿè®¡</h4>
<p>æœ€é«˜åˆ†ã€æœ€ä½åˆ†ã€å¹³å‡åˆ†ã€‚</p>
<h4 data-id="heading-15">âœ” ä½¿ç”¨ SQLite/MySQL æŒä¹…åŒ–</h4>
<p>ä»æ–‡ä»¶å‡çº§æˆçœŸæ­£çš„æ•°æ®åº“ã€‚</p>
<h4 data-id="heading-16">âœ” ä½¿ç”¨ç±»å°è£…</h4>
<p>å°†å­¦ç”Ÿã€ç³»ç»Ÿå°è£…ä¸ºç±»ï¼Œä»£ç æ›´ä¸“ä¸šã€‚</p>
<h4 data-id="heading-17">âœ” ä½¿ç”¨ Tkinter / PyQt åš GUI</h4>
<p>ç¬é—´å˜æˆæ¡Œé¢åº”ç”¨ã€‚</p>
<h4 data-id="heading-18">âœ” ä½¿ç”¨ Flask / FastAPI æä¾› REST API</h4>
<p>åšæˆä¸€ä¸ªçœŸæ­£çš„â€œå­¦ç”Ÿç®¡ç†åå°â€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java ä¸­ UnaryOperator æ¥å£ä¸ Lambda è¡¨è¾¾å¼çš„åº”ç”¨ç¤ºä¾‹]]></title>    <link>https://juejin.cn/post/7572459757107724342</link>    <guid>https://juejin.cn/post/7572459757107724342</guid>    <pubDate>2025-11-15T19:21:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572459757107724342" data-draft-id="7572481101710278710" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java ä¸­ UnaryOperator æ¥å£ä¸ Lambda è¡¨è¾¾å¼çš„åº”ç”¨ç¤ºä¾‹"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-11-15T19:21:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Dcs"/> <meta itemprop="url" content="https://juejin.cn/user/3679404422861902"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java ä¸­ UnaryOperator æ¥å£ä¸ Lambda è¡¨è¾¾å¼çš„åº”ç”¨ç¤ºä¾‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3679404422861902/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Dcs
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T19:21:15.000Z" title="Sat Nov 15 2025 19:21:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œè¿™é‡Œæ˜¯<strong>æ¶æ„èµ„æºæ ˆ</strong>ï¼ç‚¹å‡»ä¸Šæ–¹å…³æ³¨ï¼Œæ·»åŠ â€œ<strong>æ˜Ÿæ ‡</strong>â€ï¼Œä¸€èµ·å­¦ä¹ å¤§å‚å‰æ²¿æ¶æ„ï¼</p>
<p>å…³æ³¨ã€å‘é€<code>C1</code>å³å¯è·å–JetBrainså…¨å®¶æ¡¶æ¿€æ´»å·¥å…·å’Œç ï¼</p>
<hr/>
<p>åœ¨ Java 8 å¼•å…¥ Lambda è¡¨è¾¾å¼çš„è¿‡ç¨‹ä¸­ï¼Œå¼€å‘è€…é¢ä¸´äº†è®¸å¤šæ–°çš„æ¥å£ï¼Œå…¶ä¸­ä¸ä¹ä¸€äº›çœ‹èµ·æ¥é¢‡ä¸ºå­¦æœ¯ã€éš¾ä»¥ç†è§£çš„åç§°ã€‚<strong>UnaryOperator</strong> æ¥å£å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼Œä½†å…¶å®å®ƒçš„ç”¨é€”å’Œå®ç°éå¸¸ç®€å•ã€‚</p>
<h3 data-id="heading-0"><strong>UnaryOperator çš„åŠŸèƒ½</strong></h3>
<p><strong>UnaryOperator</strong> æ¥å£çš„åŠŸèƒ½å°±æ˜¯æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œå¤„ç†å®ƒåè¿”å›ç›¸åŒç±»å‹çš„å¯¹è±¡ã€‚è¿™ä¸ªâ€œunaryâ€ç‰¹æ€§æ„å‘³ç€è¾“å…¥å’Œè¾“å‡ºçš„å¯¹è±¡ç±»å‹æ˜¯ç›¸åŒçš„ã€‚</p>
<p>ä»æŠ€æœ¯è§’åº¦çœ‹ï¼Œ<strong>UnaryOperator</strong> æ¥å£ç»§æ‰¿äº† <strong>Function</strong> æ¥å£ï¼Œå¹¶ä¸”å®šä¹‰äº†ä¸€ä¸ªåä¸º <strong>apply</strong> çš„æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-java" lang="java">java.util.function.UnaryOperator
<span class="hljs-meta">@FunctionalInterface</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UnaryOperator</span>&lt;T&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Function</span>&lt;T, T&gt; {
    T <span class="hljs-title function_">apply</span><span class="hljs-params">(T t)</span>;
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d097d6e6669f4bb18fab03c2cf0e8b8d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGNz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763839275&amp;x-signature=o%2FmS%2BTD3RyuHY%2FPqILCHUprgWVs%3D" alt="image" loading="lazy"/></p>
<p>æ¯”å¦‚ï¼Œä½ å¯èƒ½æƒ³ä»ä¸€ä¸ªå¯¹ä¸€ä¸ªå­—ç¬¦ä¸²åšç‰¹æ®Šå¤„ç†åè¿”å›æ–°çš„å­—ç¬¦ä¸²ã€‚è¿™æ­£æ˜¯ <strong>UnaryOperator</strong> çš„åº”ç”¨åœºæ™¯â€”â€”è¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯å­—ç¬¦ä¸²ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee962e4a8162472282a1f590454d9889~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGNz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763839275&amp;x-signature=1psbfMxnAYBytTYGDR85E1LAyWk%3D" alt="image" loading="lazy"/></p>
<h3 data-id="heading-1"><strong>UnaryOperator å®ç°ç¤ºä¾‹</strong></h3>
<p>é¦–å…ˆæ¥çœ‹ä¸€ä¸ªä¼ ç»Ÿçš„å®ç°æ–¹å¼ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç±» <code>UnaryOperatorExample</code> æ¥å®ç° <strong>UnaryOperator</strong> æ¥å£ï¼Œå¹¶æä¾› <code>apply</code> æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.xiaod.lambda;


<span class="hljs-keyword">import</span> java.util.function.UnaryOperator;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UnaryOperatorImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UnaryOperator</span>&lt;String&gt; {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">apply</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-keyword">return</span> name+<span class="hljs-string">"ï¼Œè´¢è¿æ»šæ»šï¼"</span>;
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UnaryOperatorImplTest</span> {

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testUnaryOperatorImpl</span><span class="hljs-params">()</span> {
        <span class="hljs-type">UnaryOperatorImpl</span> <span class="hljs-variable">unaryOperatorImpl</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnaryOperatorImpl</span>();
        <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">"å°D"</span>;
        <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> unaryOperatorImpl.apply(name);
        <span class="hljs-comment">// å°Dï¼Œè´¢è¿æ»šæ»šï¼</span>
        System.out.println(result);
    }

}
</code></pre>
<p>æ‰§è¡Œä¸Šè¿°ä»£ç åï¼Œæ§åˆ¶å°å°†è¾“å‡ºå­—ç¬¦ä¸² <code>å°Dï¼Œè´¢è¿æ»šæ»šï¼</code>ã€‚</p>
<h3 data-id="heading-2"><strong>UnaryOperator çš„ Lambda è¡¨è¾¾å¼ç¤ºä¾‹</strong></h3>
<p>ä½¿ç”¨ Java çš„ Lambda è¡¨è¾¾å¼å¯ä»¥ç®€åŒ–ä»£ç ï¼Œä¸å†éœ€è¦åˆ›å»ºå®Œæ•´çš„ç±»ã€‚é€šè¿‡ Lambda è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å®ç° <strong>UnaryOperator</strong> æ¥å£ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testUnaryOperatorImplLambda</span><span class="hljs-params">()</span> {
        UnaryOperator&lt;String&gt; extensionAdder = (String name) -&gt; { <span class="hljs-keyword">return</span> name+<span class="hljs-string">"ï¼Œè´¢è¿æ»šæ»šï¼"</span>;} ;
        <span class="hljs-type">String</span> <span class="hljs-variable">newText</span> <span class="hljs-operator">=</span> extensionAdder.apply(<span class="hljs-string">"å°D1"</span>);
        <span class="hljs-comment">// å°D1ï¼Œè´¢è¿æ»šæ»šï¼</span>
        System.out.println(newText);
    }

</code></pre>
<p>Lambda è¡¨è¾¾å¼ä½¿å¾—ä»£ç æ›´åŠ ç®€æ´å’Œç´§å‡‘ï¼Œèƒ½å¤Ÿå¿«é€Ÿä¼ è¾¾åŠŸèƒ½æ„å›¾ã€‚</p>
<h3 data-id="heading-3"><strong>è¿›ä¸€æ­¥ç®€åŒ– Lambda è¡¨è¾¾å¼</strong></h3>
<p>ä½ è¿˜å¯ä»¥è¿›ä¸€æ­¥ç®€åŒ– Lambda è¡¨è¾¾å¼ï¼Œçœç•¥ç±»å‹å£°æ˜ï¼Œä½¿å¾—ä»£ç æ›´åŠ ç®€æ´ï¼š</p>
<pre><code class="hljs language-java" lang="java">UnaryOperator&lt;String&gt; extensionAdder = text -&gt; text + <span class="hljs-string">".txt"</span>;
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testUnaryOperatorImplLambda1</span><span class="hljs-params">()</span> {
        UnaryOperator&lt;String&gt; extensionAdder = (name)-&gt; name+<span class="hljs-string">"ï¼Œè´¢è¿æ»šæ»šï¼"</span> ;
        <span class="hljs-type">String</span> <span class="hljs-variable">newText</span> <span class="hljs-operator">=</span> extensionAdder.apply(<span class="hljs-string">"å°D2"</span>);
        <span class="hljs-comment">// å°D2ï¼Œè´¢è¿æ»šæ»šï¼</span>
        System.out.println(newText);
    }
</code></pre>
<h3 data-id="heading-4"><strong>Java API ä¸­ UnaryOperator çš„åº”ç”¨</strong></h3>
<p><strong>UnaryOperator</strong> æ¥å£åœ¨ Java API ä¸­å¹¿æ³›åº”ç”¨ã€‚ä¾‹å¦‚ï¼Œå®ƒä½œä¸ºå‚æ•°ä¼ é€’ç»™ <strong>Stream</strong> ç±»çš„ <code>iterate</code> æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">static</span> &lt;T&gt; Stream&lt;T&gt; <span class="hljs-title function_">iterate</span><span class="hljs-params">(T seed, UnaryOperator&lt;T&gt; f)</span>;
</code></pre>
<p>è¿™ç§æ–¹æ³•ç­¾åå¯èƒ½å¯¹åˆå­¦è€…æ¥è¯´æ¯”è¾ƒé™Œç”Ÿï¼Œä½†é€šè¿‡ <strong>UnaryOperator</strong> çš„ç®€å•ç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°ç†è§£ï¼šå®ƒåªæ˜¯æ¥æ”¶å¹¶è¿”å›ç›¸åŒç±»å‹çš„æ•°æ®ã€‚Lambda è¡¨è¾¾å¼çš„å¼•å…¥ï¼Œä½¿å¾— Java ç¼–ç¨‹æ›´ç®€æ´æ˜“è¯»ï¼Œä¹Ÿæå¤§æé«˜äº†å¼€å‘æ•ˆç‡ã€‚</p>
<h3 data-id="heading-5"><strong>æ€»ç»“</strong></h3>
<p>é€šè¿‡è¿™ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬æ·±å…¥äº†è§£äº† <strong>UnaryOperator</strong> æ¥å£åŠå…¶åœ¨ Java Lambda è¡¨è¾¾å¼ä¸­çš„åº”ç”¨ã€‚ä½œä¸ºä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å·¥å…·ï¼Œå®ƒç®€åŒ–äº† Java ç¼–ç¨‹çš„å¤æ‚æ€§ï¼Œä½¿å¾—ä»£ç æ›´åŠ ç®€æ´å’Œæ˜“äºç»´æŠ¤ã€‚</p>
<hr/>
<p><strong>å–œæ¬¢å°±å¥–åŠ±ä¸€ä¸ªâ€œğŸ‘â€å’Œâ€œåœ¨çœ‹â€å‘—~</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5097f5cd8ee944e4893201a7b6deaf68~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGNz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763839275&amp;x-signature=7sqwJIDs3EuLkoLjDfBQIt0ezFo%3D" alt="image" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TRAE SOLO æ­£å¼ç‰ˆå®æˆ˜ï¼šä¸€ä¸ªå…¨æ ˆæ‰“å¡é¡¹ç›®çš„çœŸå®ä½“éªŒ]]></title>    <link>https://juejin.cn/post/7572397142364766250</link>    <guid>https://juejin.cn/post/7572397142364766250</guid>    <pubDate>2025-11-14T12:46:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572397142364766250" data-draft-id="7572397142364749866" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TRAE SOLO æ­£å¼ç‰ˆå®æˆ˜ï¼šä¸€ä¸ªå…¨æ ˆæ‰“å¡é¡¹ç›®çš„çœŸå®ä½“éªŒ"/> <meta itemprop="keywords" content="Trae,Solo,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-14T12:46:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£å“¥æ•°æ™ºè°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3825956195409223"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TRAE SOLO æ­£å¼ç‰ˆå®æˆ˜ï¼šä¸€ä¸ªå…¨æ ˆæ‰“å¡é¡¹ç›®çš„çœŸå®ä½“éªŒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3825956195409223/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£å“¥æ•°æ™ºè°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T12:46:41.000Z" title="Fri Nov 14 2025 12:46:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰å¤© <code>TRAE</code> è¿›è¡Œå‡çº§ï¼Œå‘å¸ƒäº† <code>SOLO</code> æ­£å¼ç‰ˆï¼Œä»Šå¤©ï¼Œæˆ‘ä»¬å°±è¯•è¯•æ–°ç‰ˆå®æˆ˜æ•ˆæœå…·ä½“å¦‚ä½•ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« åŒ…æ‹¬ä¸€ä¸ªâ€œå®æˆ˜è¿‡ç¨‹â€å’Œâ€œä½¿ç”¨åçš„ä½“ä¼šâ€ï¼Œå¦‚æœä½ æ­£åœ¨è€ƒè™‘è¦ä¸è¦å°è¯• <code>TRAE SOLO</code>ï¼Œè¿™ç¯‡æ–‡ç« åº”è¯¥å¯ä»¥å¸®åˆ°ä½ ã€‚</p>
<h2 data-id="heading-0">ç›®æ ‡</h2>
<p>è®¡åˆ’æ­å»ºä¸€ä¸ªå…±åŒå­¦ä¹ çš„å¹³å°ï¼Œç”¨æˆ·å¯ä»¥è®¾ç½®è‡ªå·±çš„å­¦ä¹ ä¸»é¢˜ï¼Œå¹¶è®¾ç½®å­¦ä¹ è®¡åˆ’çš„é‡Œç¨‹ç¢‘èŠ‚ç‚¹ï¼Œæ¯ä¸ªäººå¯ä»¥åŠ å…¥è‡ªå·±æƒ³è¦å­¦ä¹ çš„ä¸»é¢˜ï¼Œå¹¶æ¯å¤©æ‰“å¡ã€‚</p>
<p>è¿™ä¸ªé¡¹ç›®åŒ…æ‹¬<strong>å‰åç«¯</strong>ï¼Œæ ¸å¿ƒéœ€æ±‚ä¸»è¦æ˜¯<strong>3å¼ å…³è”è¡¨</strong>ï¼Œåº”è¯¥å¯ä»¥å½“åšä¸€ä¸ªæ¯”è¾ƒå…¸å‹çš„å®æˆ˜åœºæ™¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ace5aac0a3324d978740d71d2db6ad4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763729593&amp;x-signature=yk5PXq9DmTObsp8WTVyUgWkDrtw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">å®æˆ˜è®°å½•</h2>
<p>ç”±äºä»Šå¤©çš„åˆ†äº«é‡ç‚¹åœ¨å®æˆ˜æ•ˆæœï¼Œå› æ­¤å…·ä½“æ“ä½œä¼šç¨å¾®ç®€ç•¥ä¸€ç‚¹ã€‚</p>
<h3 data-id="heading-2">åˆç‰ˆç”Ÿæˆ</h3>
<p>ä½¿ç”¨ <code>SOLO Builder</code> æ™ºèƒ½ä½“ç”Ÿæˆåˆç‰ˆã€‚</p>
<p><strong>æŒ‡ä»¤</strong></p>
<pre><code class="hljs language-diff" lang="diff">æˆ‘ä»¬æœ‰ä¸€ä¸ªæŠ€æœ¯ç¤¾åŒºï¼Œé›†ä¸­å­¦ä¹ äº¤æµTRAE SOLOï¼Œæƒ³è¦æ­å»ºä¸€ä¸ªå­¦ä¹ æ‰“å¡å¹³å°ã€‚
<span class="hljs-deletion">- å¯ä»¥åˆ›å»ºå­¦ä¹ è®¡åˆ’ï¼ŒåŒ…æ‹¬ä¸»é¢˜ã€å‘¨æœŸå’Œé‡Œç¨‹ç¢‘ã€‚</span>
<span class="hljs-deletion">- å¯ä»¥é’ˆå¯¹æ¯ä¸€ä¸ªé‡Œç¨‹ç¢‘è¿›è¡Œæ‰“å¡è®°å½•ã€‚</span>
<span class="hljs-deletion">- æä¾›æ‰“å¡å®Œæˆæ’è¡Œæ¦œ</span>
<span class="hljs-deletion">- æ•´ä½“é£æ ¼å‚è€ƒæˆªå›¾</span>
å‰ç«¯ä½¿ç”¨vue+elementui+javascriptï¼Œåç«¯ä½¿ç”¨springboot+h2å†…å­˜æ•°æ®åº“ã€‚
</code></pre>
<p><strong>è¿‡ç¨‹</strong></p>
<p>è¿‡ç¨‹æ²¡æœ‰å¤ªå¤§å˜åŠ¨ï¼Œä¾ç„¶æ˜¯å…ˆç”Ÿæˆç›¸å…³çš„<strong>æ–‡æ¡£</strong>ï¼Œæ–‡æ¡£å†…å®¹ç¡®å®è¯¦ç»†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd37a98225624d6f8e7167ea3d2ed4d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763729593&amp;x-signature=idTqsbHrDoPOzblglxDda03sxU0%3D" alt="" loading="lazy"/></p>
<p>æŒ‰ç…§ä»»åŠ¡æ¸…å•è¿›è¡Œç”Ÿæˆï¼ŒåŒæ—¶å¯ä»¥çœ‹åˆ°ä»»åŠ¡è¿‡ç¨‹è‡ªåŠ¨è¿›è¡Œäº†<strong>æ€»ç»“</strong>ï¼Œçœ‹èµ·æ¥æ›´åŠ æœ‰æ¡ç†äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0828d2a110c4e9590b123bb66d57340~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763729593&amp;x-signature=jJH5tVXF8eRc7qyxjqGcWXPLt1w%3D" alt="" loading="lazy"/></p>
<p><strong>ç»“æœ</strong></p>
<p>è¿™æ¬¡ç”ŸæˆæŒç»­è¿è¡Œäº†1ä¸ªå°æ—¶ä»æœªç»“æŸã€‚</p>
<p>åæ¥æˆ‘è·Ÿè¸ªäº†è¯¦ç»†çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œåœ¨30åˆ†é’Ÿå·¦å³ï¼Œä¸»è¦ä»£ç å·²ç»åŸºæœ¬ç”Ÿæˆå®Œæˆï¼Œå‰©ä½™æ—¶é—´ï¼Œä¸€ç›´åœ¨åå¤è§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œä½†æ²¡æœ‰æˆåŠŸã€‚</p>
<p>å¤šæ¬¡å°è¯•è§£å†³å¤±è´¥åï¼Œæˆ‘ä¸­æ–­äº†ç”Ÿæˆï¼Œå¹¶æ‰‹åŠ¨ä¿®å¤äº† bugã€‚</p>
<p>è¿™ä¸ª bug ä¿®å¤å®Œæˆåï¼Œé¡¹ç›®çš„å®Œæˆåº¦å€’æ˜¯è¿˜å¯ä»¥ã€‚</p>
<p>å…ˆçœ‹å‡ ä¸ªç•Œé¢ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/000f59b92b7f49fdbdf8c32388b0148b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763729593&amp;x-signature=lVvY1P%2FRFNH7reyj2%2F0GIOaCMQo%3D" alt="é¦–é¡µ" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a818b97f1854e99ba4f3ae0f357d938~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763729593&amp;x-signature=e2c%2Bigb1o2lXdlTyzJREIUJm13g%3D" alt="æ·»åŠ å­¦ä¹ è®¡åˆ’æˆåŠŸ" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a97a36f457614cbf9ed463849ca0696e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763729593&amp;x-signature=tPB070X2lB9A1hLx6CniKhoI%2FUo%3D" alt="æ‰“å¡" loading="lazy"/></p>
<p>æ³¨ï¼šç•Œé¢é£æ ¼æ˜¯åœ¨æ–‡æ¡£ä¸­åˆ†æé”™äº†ï¼Œä¸æ˜¯ç”Ÿæˆåç¦»çš„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2cbbd7b4b6b04cab8e2e8d8eb7886a01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763729593&amp;x-signature=QRPfjbhhuJLltYzGZf2UWqVYJs0%3D" alt="" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥çœ‹ä¸‹ä»£ç ï¼Œä¸€æ³¢å¯¹è¯ï¼Œä¸€å…± 65 ä¸ªæ–‡ä»¶ï¼ŒåŒ…æ‹¬å‰åç«¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/644dfbb9b77d4970963d5376070e99b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763729593&amp;x-signature=CnmFCq7XUxVUi7IRqQz4wDvrK8I%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">å®æˆ˜ä½“ä¼š</h2>
<p>å› ä¸ºè¿™æ¬¡æ˜¯ä¸ªå¤§ç‰ˆæœ¬ï¼Œæˆ‘ä»¬ä¸“é—¨åˆ†å‡ºä¸€ä¸ªç« èŠ‚åˆ†äº«ä¸‹å®é™…ä½¿ç”¨ä½“ä¼šï¼Œæ–¹ä¾¿å¤§å®¶åˆ¤æ–­ã€‚</p>
<p>ä¸Šé¢å®æˆ˜è®°å½•æ˜¯æœ€åæˆåŠŸçš„ä¸€æ¬¡ï¼Œä¹‹å‰ä¸ºäº†æ¢ç´¢ <code>SOLO æ­£å¼ç‰ˆ</code>çš„åŸºæœ¬è¾¹ç•Œï¼Œæˆ‘å°è¯•äº†å¾ˆå¤šæƒ…å†µï¼ŒåŒ…æ‹¬æç¤ºè¯è¯¦ç»†ç¨‹åº¦ã€ä¸åŒæ™ºèƒ½ä½“æ•ˆæœã€Planæ¨¡å¼ã€‚</p>
<p><strong>ç¬¬1ç‚¹</strong></p>
<p><code>SOLO Coder</code> çš„å“åº”é€Ÿåº¦ç›¸å¯¹ <code>SOLO Builder</code> é€Ÿåº¦æ›´å¿«ï¼ŒåŒ…æ‹¬ç”Ÿæˆæ–‡æ¡£ï¼Œä½†æ˜¯ï¼Œå¯¹ä» 0 åˆ° 1 çš„è¿™ç§éœ€è¦å¤„ç†å¤šæ–¹é¢å†…å®¹æ‚ç³…çš„é—®é¢˜ä¸å¤ªæ“…é•¿ã€‚</p>
<p>è¿™ç±»é—®é¢˜ï¼Œå°¤å…¶æ˜¯<strong>åŒ…å«å‰ç«¯ç•Œé¢çš„ï¼Œè¿˜æ˜¯æ›´é€‚åˆ ä½¿ç”¨ SOLO Builder å¤„ç†</strong>ã€‚</p>
<p>å› æ­¤ï¼Œæ¨¡å‹å°šæœªå†æ¬¡å¤§å¹…æå‡å‰ï¼Œ<strong>æ¨èä½¿ç”¨æ–¹æ³•</strong>ï¼š</p>
<ol>
<li>å…ˆç”¨ SOLO Builder è¿›è¡Œåˆ†æï¼Œå¹¶ç”Ÿæˆæ–‡æ¡£ï¼›</li>
<li>ç„¶åä½¿ç”¨ SOLO Builder è¿›è¡Œå‰ç«¯éƒ¨åˆ†å¼€å‘ï¼›</li>
<li>å†é€šè¿‡ SOLO Coder è¿›è¡Œåç«¯åŠŸèƒ½å¼€å‘ã€‚</li>
</ol>
<p><strong>ç¬¬2ç‚¹</strong></p>
<p><code>Max</code> æ¨¡å¼ç¡®å®çˆ½ï¼Œä¸ä¼šå‡ºç°éœ€è¦æ‰‹åŠ¨â€œç»§ç»­â€çš„æƒ…å†µï¼Œå°±æ˜¯ <code>token</code> ä¸çŸ¥é“æ‰›ä¸æ‰›å¾—ä½ã€‚</p>
<p>åƒæˆ‘è¿™æ¬¡ç›´æ¥è·‘äº†1ä¸ªå°æ—¶ï¼Œè¦æ˜¯ <code>token</code>ï¼Œä¸æ•¢æƒ³ã€‚</p>
<p><strong>ç¬¬3ç‚¹</strong></p>
<p>æ–°æ¨¡å‹çš„ç›´è§‚ä½“éªŒè¿˜æ˜¯ä¸é”™çš„ï¼Œå¹¶ä¸”æ˜¯å›½å†…æœ€è¿‘å‡ ä¸ªå¤´éƒ¨æ¨¡å‹ä¸­å°‘æœ‰çš„<strong>æ”¯æŒä¸Šä¼ å›¾ç‰‡</strong>çš„ã€‚</p>
<p>ä½†æ˜¯ï¼Œæœ‰å‡ ä¸ªé—®é¢˜æ„Ÿè§‰éœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li>ä¸­æ–‡æ§åˆ¶ä¸å¤ªç¨³å®šï¼Œå¯¹è¯é•¿äº†ä¹‹åæœ‰è¾ƒå¤§å‡ ç‡å¼€å§‹ä½¿ç”¨è‹±æ–‡è¾“å‡ºï¼Œä¸å¤ªæ–¹ä¾¿è·Ÿè¸ªè°ƒè¯•ã€‚</li>
<li>å¯¹äºå°é—®é¢˜çš„å®šä½ä¸å¤ªâ€œèªæ˜â€ï¼Œæ€»æ˜¯ä¼šå°è¯•å¤šç§æ–¹æ³•ï¼Œæœ€åæ‰é€‰æ‹©äº†ä¸€ç§è¾ƒå¥½çš„æ–¹æ¡ˆï¼Œæ˜¯å¦å¯ä»¥å‚è€ƒ GPT-5.1 è®¾ç½®æ¨¡å‹åå¥½ï¼Œæ¯”å¦‚ï¼šä¿å®ˆå‹ã€æ¿€è¿›å‹ã€‚</li>
</ul>
<p><strong>ç¬¬4ç‚¹</strong></p>
<p>è¿™æ˜¯ä»Šå¤©è¿™æ¬¡å®æˆ˜ç¢°åˆ°æœ€å¤§çš„ä¸€ä¸ªé—®é¢˜ï¼Œä¹Ÿæ˜¯å‰é¢æåˆ°å¡äº†æ¥è¿‘åŠä¸ªå°æ—¶çš„åŸå› ã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">VueCompilerError:</span> Element <span class="hljs-built_in">is</span> missing <span class="hljs-keyword">end</span> tag.
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/900c408812f1402aac16a0b5470dd60f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763729593&amp;x-signature=fUCQGNMPhAOv4Q2oV%2FI6QU0PWL0%3D" alt="" loading="lazy"/></p>
<p>é”™è¯¯å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯ <code>vue</code> é¡µé¢ <code>&lt;style&gt;</code> ç¼ºå°‘é—­åˆæ ‡ç­¾ <code>&lt;/style&gt;</code>ã€‚æˆ‘æ‰‹åŠ¨åŠ ä¸Šåå°±å¥½äº†ã€‚</p>
<p>ä½†è¿™ä¸ªé—®é¢˜åœ¨ä¹‹å‰ä½¿ç”¨è¿‡ç¨‹ä¸­ä¹Ÿç¢°åˆ°è¿‡å‡ æ¬¡ï¼Œæ¯æ¬¡ç¢°åˆ°åï¼Œæƒ³è¦ä¾èµ– <code>SOLO</code> è‡ªå·±è§£å†³éƒ½å¾ˆéš¾ï¼Œç»™äººæ„Ÿè§‰åƒæ˜¯è¿™å—çš„è®­ç»ƒæ•°æ®è¢«æ±¡æŸ“äº†ã€‚</p>
<blockquote>
<p>å·²ç»åé¦ˆç»™å®˜æ–¹ï¼Œå¸Œæœ›å¯ä»¥å°½æ—©è§£å†³ã€‚</p>
</blockquote>
<h2 data-id="heading-4">ç»“è¯­</h2>
<p>å®æˆ˜è¡¨ç°è™½ä¸å®Œç¾ï¼Œä½†å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯å› ä¸ºæˆ‘åˆ»æ„é€‰æ‹©äº†è¾ƒå¤æ‚çš„ä¸‰è¡¨å…³è”éœ€æ±‚ï¼Œä»¥è¯•æ¢ SOLO æ­£å¼ç‰ˆçš„èƒ½åŠ›è¾¹ç•Œã€‚</p>
<p>ç»¼åˆä¸‹æ¥ï¼Œ<code>TRAE SOLO æ­£å¼ç‰ˆ</code>çš„æ•´ä½“ä½“éªŒè¿˜ç®—ä¸é”™ï¼Œä½†ä»éœ€è¿›æ­¥ã€‚</p>
<p>å¦‚æœä½ æœ‰æ„å‘ï¼Œå¼ºçƒˆå»ºè®®è¯•è¯•ï¼Œå½“å‰è¿˜åœ¨å…è´¹ä¸­~</p>
<p>ä¹Ÿå¸Œæœ› <code>TRAE</code> åç»­ç»§ç»­è¿›åŒ–ï¼Œä¸ºå¤§å®¶æä¾›æ›´åŠ æ™ºèƒ½çš„äº§å“æœåŠ¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å¼€å‘å°æŠ€å·§-ã€JavaScriptã€‘- è·å–å…ƒç´ è·ç¦» document é¡¶éƒ¨çš„è·ç¦»]]></title>    <link>https://juejin.cn/post/7572459217812045887</link>    <guid>https://juejin.cn/post/7572459217812045887</guid>    <pubDate>2025-11-15T15:16:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572459217812045887" data-draft-id="7571650164843348002" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å¼€å‘å°æŠ€å·§-ã€JavaScriptã€‘- è·å–å…ƒç´ è·ç¦» document é¡¶éƒ¨çš„è·ç¦»"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,React.js"/> <meta itemprop="datePublished" content="2025-11-15T15:16:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¦æ­¢æ‘†çƒ‚_æ‰æµ…"/> <meta itemprop="url" content="https://juejin.cn/user/92819673587448"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å¼€å‘å°æŠ€å·§-ã€JavaScriptã€‘- è·å–å…ƒç´ è·ç¦» document é¡¶éƒ¨çš„è·ç¦»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/92819673587448/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¦æ­¢æ‘†çƒ‚_æ‰æµ…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T15:16:24.000Z" title="Sat Nov 15 2025 15:16:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;color:#282d36}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px;color:#2f845e}.markdown-body h2{font-size:22px;display:inline-block;font-weight:700;background:#2f845e;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(47,132,194,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 32px);border-bottom:3px solid #2f845e}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%;box-shadow:6px 6px 6px #888}.markdown-body hr{border:none;border-top:1px solid rgba(66,185,131,.15);margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:16px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#262626;border:1px solid #2f845e;border-top:8px solid #2f845e;background:linear-gradient(180deg,rgba(66,185,131,.1),transparent)!important}.markdown-body pre&gt;code.hljs[lang]:before{top:8px!important;color:#2f845e!important}.markdown-body pre&gt;code.language-awesome_error{border:1px solid #ff4d4f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ff4d4f!important;background:#fff2f0!important}.markdown-body pre&gt;code.language-awesome_error:before{content:"!"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ff4d4f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_warn{border:1px solid #ffc46f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ffc46f!important;background:#fffbe6!important}.markdown-body pre&gt;code.language-awesome_warn:before{content:"â˜‚"!important;position:absolute;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ffc46f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_success{border:1px solid #52c41a!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#52c41a!important;background:#f6ffed!important}.markdown-body pre&gt;code.language-awesome_success:before{content:"âœ“"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#52c41a!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_info{border:1px solid #1890ff!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#1890ff!important;background:#e6f7ff!important}.markdown-body pre&gt;code.language-awesome_info:before{content:"i"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#1890ff!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body strong{background-color:inherit;color:#2f845e}.markdown-body em{background-color:inherit;color:#949415}.markdown-body a{text-decoration:none;color:#2f8e54;border-bottom:1px solid #3f9e64}.markdown-body a:active,.markdown-body a:hover{color:#3f9e64}.markdown-body a[class^=footnote]{margin-left:4px}.markdown-body a:before{content:"â¤ "}.markdown-body table{font-size:12px;width:100%;max-width:100%;overflow:auto;border:2px solid #2f8e54}.markdown-body thead{background:#2f8e54;color:#fff;text-align:left;font-weight:700}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:22px}.markdown-body td{min-width:120px}.markdown-body blockquote{padding:1px 22px;margin:22px 0;border-left:6px solid #2f845e;background-color:rgba(66,185,131,.1);border-radius:2px}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#2f845e}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px;color:#282d36}.markdown-body del{color:#2f845e}.markdown-body input[type=checkbox]:checked:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA/klEQVQ4T72TMU7DQBBF318XdFR06egQEnAXRINEGlqgowoIR8AF4AZOZ4JEGq5AC5EixBU4A55BNrEVHAcSBTHlaubt37/zxZKlcn7n6mDPXJvz8IJ89HzWu8t7C8D2dfsY52ae4apHnLx0ktsCsHXZjiUuFgG40x2eJ/H/AhztB+zDUTpLwWj8jGkzxSHiHaMPrDQC8sMoilKzLAUqiKQjmb+ZuAdW80tmelCHODoNgSfP7AFprTTaRTzsJN1GEyuIZ7uW6TEEHwCtyV/6EVBKJHhfzgC0Xv/iXwEFBF4FG0378bd7sPQq5xK/hSnk6sdlX3mZrKkwLZKBeu8n9XuWEUE7X+YAAAAASUVORK5CYII=);position:relative;top:-1px;left:-1px}.markdown-body .math .katex{font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}@media (max-width:720px){.markdown-body h1{font-size:22px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è·å–å…ƒç´ è·ç¦» document é¡¶éƒ¨çš„è·ç¦»</h2>
<h3 data-id="heading-1">æ–¹æ¡ˆ1ï¼šä½¿ç”¨ <code>offsetTop</code>ï¼ˆæœ€ç®€å•ï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'myDiv'</span>)
<span class="hljs-keyword">const</span> distance = element.<span class="hljs-property">offsetTop</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(distance)  <span class="hljs-comment">// 500ï¼ˆåƒç´ ï¼‰</span>
</code></pre>
<h3 data-id="heading-2">æ–¹æ¡ˆ2ï¼šä½¿ç”¨ <code>getBoundingClientRect() + scrollY</code>ï¼ˆæœ€å‡†ç¡®ï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'myDiv'</span>)
<span class="hljs-keyword">const</span> distance = element.<span class="hljs-title function_">getBoundingClientRect</span>().<span class="hljs-property">top</span> + <span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(distance)  <span class="hljs-comment">// 500ï¼ˆåƒç´ ï¼‰</span>
</code></pre>
<h3 data-id="heading-3">æ–¹æ¡ˆ3ï¼šé€’å½’è®¡ç®—ï¼ˆå¤„ç†åµŒå¥—ä½ç½®ï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getDistanceFromTop</span>(<span class="hljs-params">element</span>) {
  <span class="hljs-keyword">let</span> distance = <span class="hljs-number">0</span>
  <span class="hljs-keyword">let</span> current = element

  <span class="hljs-keyword">while</span> (current) {
    distance += current.<span class="hljs-property">offsetTop</span>
    current = current.<span class="hljs-property">offsetParent</span>
  }

  <span class="hljs-keyword">return</span> distance
}

<span class="hljs-keyword">const</span> distance = <span class="hljs-title function_">getDistanceFromTop</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'myDiv'</span>))
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(distance)
</code></pre>
<h3 data-id="heading-4">å¯¹æ¯”è¡¨æ ¼</h3>





























<table><thead><tr><th>æ–¹æ³•</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>æ¨èåº¦</th></tr></thead><tbody><tr><td><code>offsetTop</code></td><td>ç®€å•å¿«é€Ÿ</td><td>åªè¿”å›ç›¸å¯¹æœ€è¿‘å®šä½çˆ¶å…ƒç´ </td><td>â­â­â­</td></tr><tr><td><code>getBoundingClientRect().top + scrollY</code></td><td>ç²¾ç¡®ã€å…¼å®¹æ€§å¥½</td><td>ç¨å¤æ‚</td><td>â­â­â­â­â­</td></tr><tr><td>é€’å½’è®¡ç®—</td><td>å¤„ç†å¤æ‚åµŒå¥—</td><td>ä»£ç å¤æ‚</td><td>â­â­</td></tr></tbody></table>
<h3 data-id="heading-5">å®Œæ•´ç¤ºä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æœ€æ¨èçš„æ–¹æ³•</span>
<span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'myDiv'</span>)
<span class="hljs-keyword">const</span> distanceFromDocTop = element.<span class="hljs-title function_">getBoundingClientRect</span>().<span class="hljs-property">top</span> + <span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å…ƒç´ è·ç¦»æ–‡æ¡£é¡¶éƒ¨: <span class="hljs-subst">${distanceFromDocTop}</span>px`</span>)
</code></pre>
<h3 data-id="heading-6">React ä¸­ä½¿ç”¨</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useRef, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">MyComponent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> elementRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>)

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (elementRef.<span class="hljs-property">current</span>) {
      <span class="hljs-keyword">const</span> distance = elementRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">getBoundingClientRect</span>().<span class="hljs-property">top</span> + <span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·ç¦»æ–‡æ¡£é¡¶éƒ¨:'</span>, distance)
    }
  }, [])

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{elementRef}</span>&gt;</span>å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<h3 data-id="heading-7">å®é™…åº”ç”¨</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è·å–å…ƒç´ åˆ°æ–‡æ¡£é¡¶éƒ¨çš„è·ç¦»</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getElementDistanceFromTop</span>(<span class="hljs-params">elementId, offset = <span class="hljs-number">0</span></span>) {
  <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(elementId)
  
  <span class="hljs-keyword">if</span> (!element) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`å…ƒç´  <span class="hljs-subst">${elementId}</span> ä¸å­˜åœ¨`</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
  }

  <span class="hljs-keyword">return</span> element.<span class="hljs-title function_">getBoundingClientRect</span>().<span class="hljs-property">top</span> + <span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span> - offset
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> distance = <span class="hljs-title function_">getElementDistanceFromTop</span>(<span class="hljs-string">'myDiv'</span>, <span class="hljs-number">100</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(distance)  <span class="hljs-comment">// è¿”å›å…ƒç´ è·ç¦»æ–‡æ¡£é¡¶éƒ¨ï¼Œå‡å» 100px çš„åç§»</span>

<span class="hljs-comment">// æ»šåŠ¨åˆ°è¯¥ä½ç½®</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">scrollTo</span>({
  <span class="hljs-attr">top</span>: distance,
  <span class="hljs-attr">behavior</span>: <span class="hljs-string">'smooth'</span>
})
</code></pre>
<h3 data-id="heading-8">æ€»ç»“</h3>
<p><strong>æœ€ä½³æ–¹æ¡ˆ</strong>ï¼š<code>element.getBoundingClientRect().top + window.scrollY</code></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">/**
Â * æ»šåŠ¨åˆ°æŒ‡å®šå…ƒç´ 
Â * <span class="hljs-doctag">@param</span> id å…ƒç´ ID
Â * <span class="hljs-doctag">@param</span> offsetTop åç§»é‡ã€æŒ‡å®šå…ƒç´ ä¸Šä¸‹åç§»é‡ã€‘
Â */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">scrollTo</span> = (<span class="hljs-params">id: <span class="hljs-built_in">string</span>, offsetTop: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span></span>) =&gt; {
Â  <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(id)
Â  <span class="hljs-keyword">if</span> (!element) {
Â  Â  <span class="hljs-keyword">return</span>
Â  }

Â  <span class="hljs-keyword">const</span> elementTop = element.<span class="hljs-title function_">getBoundingClientRect</span>().<span class="hljs-property">top</span> + <span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span>
Â  <span class="hljs-keyword">const</span> targetTop = elementTop - offsetTop

Â  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">scrollTo</span>({
Â  Â  <span class="hljs-attr">top</span>: targetTop,
Â  Â  <span class="hljs-attr">behavior</span>: <span class="hljs-string">'smooth'</span>,
Â  })
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Jetpack Compose Navigation 2.x è¯¦è§£]]></title>    <link>https://juejin.cn/post/7572497847771136027</link>    <guid>https://juejin.cn/post/7572497847771136027</guid>    <pubDate>2025-11-15T15:51:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572497847771136027" data-draft-id="7572466174224777242" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Jetpack Compose Navigation 2.x è¯¦è§£"/> <meta itemprop="keywords" content="Android,Android Jetpack"/> <meta itemprop="datePublished" content="2025-11-15T15:51:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ç™½"/> <meta itemprop="url" content="https://juejin.cn/user/2549135752044601"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Jetpack Compose Navigation 2.x è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2549135752044601/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ç™½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T15:51:26.000Z" title="Sat Nov 15 2025 15:51:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç®€å•çš„é¡µé¢è·³è½¬</h2>
<p>åœ¨ Compose ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ© <code>State</code> å®ç°ä¸€ä¸ªéå¸¸ç®€å•çš„å±å¹•å†…å®¹åˆ‡æ¢æ•ˆæœã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">ComponentActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        enableEdgeToEdge()
        setContent {
            ComposeNavigationTestTheme {
                MyApp()
            }
        }
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">MyApp</span><span class="hljs-params">(modifier: <span class="hljs-type">Modifier</span> = Modifier)</span></span> {
    <span class="hljs-comment">// å½“å‰æ˜¾ç¤ºçš„é¡µé¢</span>
    <span class="hljs-keyword">var</span> currentScreen <span class="hljs-keyword">by</span> remember { mutableIntStateOf(<span class="hljs-number">0</span>) }

    <span class="hljs-keyword">when</span> (currentScreen) {
        <span class="hljs-number">0</span> -&gt; ScreenA(modifier = modifier, onClick = {
            currentScreen = <span class="hljs-number">1</span>
        })

        <span class="hljs-number">1</span> -&gt; ScreenB(modifier = modifier, onClick = {
            currentScreen = <span class="hljs-number">2</span>
        })

        <span class="hljs-number">2</span> -&gt; ScreenC(modifier = modifier, onClick = {
            currentScreen = <span class="hljs-number">0</span>
        })
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ScreenA</span><span class="hljs-params">(modifier: <span class="hljs-type">Modifier</span> = Modifier, onClick: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    Column(
        modifier = modifier.fillMaxSize(),
        horizontalAlignment = Alignment.CenterHorizontally,
        verticalArrangement = Arrangement.Center
    ) {
        Text(<span class="hljs-string">"è¿™é‡Œæ˜¯é¡µé¢ A"</span>)
        Button(onClick = onClick) {
            Text(<span class="hljs-string">"è·³è½¬åˆ°é¡µé¢ B"</span>)
        }
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ScreenB</span><span class="hljs-params">(modifier: <span class="hljs-type">Modifier</span> = Modifier, onClick: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    Column(
        modifier = modifier.fillMaxSize(),
        horizontalAlignment = Alignment.CenterHorizontally,
        verticalArrangement = Arrangement.Center
    ) {
        Text(<span class="hljs-string">"è¿™é‡Œæ˜¯é¡µé¢ B"</span>)
        Button(onClick = onClick) {
            Text(<span class="hljs-string">"è·³è½¬åˆ°é¡µé¢ C"</span>)
        }
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ScreenC</span><span class="hljs-params">(modifier: <span class="hljs-type">Modifier</span> = Modifier, onClick: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    Column(
        modifier = modifier.fillMaxSize(),
        horizontalAlignment = Alignment.CenterHorizontally,
        verticalArrangement = Arrangement.Center
    ) {
        Text(<span class="hljs-string">"è¿™é‡Œæ˜¯é¡µé¢ C"</span>)
        Button(onClick = onClick) {
            Text(<span class="hljs-string">"è·³è½¬åˆ°é¡µé¢ A"</span>)
        }
    }
}
</code></pre>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8acf2f8b15204baba495c39784bf867c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo55m9:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763826685&amp;x-signature=ADpqukGfkVn4iioMJoazC4RfT5E%3D" alt="Screen_recording_20251115_151253.gif" width="50%" loading="lazy"/>
<p>ä½†å½“å‰çš„æ•ˆæœåªæœ‰é¡µé¢åˆ‡æ¢ï¼Œæ²¡æœ‰é¡µé¢å¯¼èˆªã€‚æŒ‰ä¸‹è¿”å›é”®æ—¶ï¼Œåªä¼šå›åˆ°æ¡Œé¢ï¼Œæ— æ³•å›åˆ°ä¸Šä¸€ä¸ªé¡µé¢ã€‚</p>
<p>å½“ç„¶ï¼Œä½ å¯ä»¥è‡ªå·±æ¥å®ç°å¯¼èˆªåŠŸèƒ½ï¼Œä½†æˆ‘ä»¬æ›´å¤šä¼šä½¿ç”¨ <code>Navigation</code> ç»„ä»¶ã€‚</p>
<h2 data-id="heading-1">æ·»åŠ ä¾èµ–</h2>
<p>åœ¨ <code>build.gradle.kts</code> æ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">dependencies {
    implementation(<span class="hljs-string">"androidx.navigation:navigation-compose:2.9.6"</span>)
}
</code></pre>
<h2 data-id="heading-2">ç®€å•ç”¨æ³•</h2>
<p>ä¿®æ”¹ <code>MyApp</code> å‡½æ•°ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> SCREEN_A = <span class="hljs-string">"screen_a"</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> SCREEN_B = <span class="hljs-string">"screen_b"</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> SCREEN_C = <span class="hljs-string">"screen_c"</span>

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">MyApp</span><span class="hljs-params">(modifier: <span class="hljs-type">Modifier</span> = Modifier)</span></span> {
    <span class="hljs-keyword">val</span> navController = rememberNavController()

    NavHost(navController = navController, startDestination = SCREEN_A, modifier = modifier) {
        <span class="hljs-comment">// è·¯ç”±å­—ç¬¦ä¸²æ˜ å°„åˆ°Composableé¡µé¢</span>
        composable(route = SCREEN_A) {
            ScreenA {
                <span class="hljs-comment">// è·³è½¬</span>
                navController.navigate(route = SCREEN_B)
            }
        }
        composable(route = SCREEN_B) {
            ScreenB {
                navController.navigate(route = SCREEN_C)
            }
        }
        composable(route = SCREEN_C) {
            ScreenC {
                navController.navigate(route = SCREEN_A)
            }
        }
    }
}
</code></pre>
<p>æˆ‘ä»¬å®šä¹‰äº†æ¯ä¸ªé¡µé¢çš„è·¯ç”±ï¼Œè®¾ç½®èµ·å§‹è·¯ç”±ä¸º <code>SCREEN_A</code>ï¼Œä¹Ÿå°±æ˜¯å¯åŠ¨é¡µä¸º <code>ScreenA</code>ã€‚</p>
<p>è¿™æ ·å°±å…·å¤‡å¯¼èˆªåŠŸèƒ½äº†ï¼Œè¿è¡Œæ•ˆæœï¼š</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d269aeef54a04cad8a70886185f76900~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo55m9:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763826685&amp;x-signature=BH0CF%2FptnjB5gXjd2MbrjL%2B55to%3D" alt="Screen_recording_20251115_203503.gif" width="50%" loading="lazy"/>
<h2 data-id="heading-3">å½“å‰æ‰€åœ¨é¡µé¢</h2>
<p>è¦çŸ¥é“å½“å‰æ‰€åœ¨é¡µé¢ï¼Œå¯ä»¥ä½¿ç”¨ <code>NavDestination</code> è·å–å½“å‰é¡µé¢çš„è·¯ç”±ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> navController = rememberNavController()
navController.currentDestination?.route
</code></pre>
<p>åœ¨ Compose ä¸­ï¼Œæˆ‘ä»¬æ›´å¤šä¼šä½¿ç”¨ <code>NavController.currentBackStackEntryAsState()</code>ï¼Œå› ä¸ºå®ƒè¿”å›çš„æ˜¯ä¸€ä¸ª <code>State</code>ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> navController = rememberNavController()

<span class="hljs-keyword">val</span> currentBackStack <span class="hljs-keyword">by</span> navController.currentBackStackEntryAsState()
currentBackStack?.destination?.route
</code></pre>
<h2 data-id="heading-4">å¯åŠ¨æ¨¡å¼</h2>
<p>è·³è½¬çš„é»˜è®¤è¡Œä¸ºå¯¹åº”çš„æ˜¯ Activity ä¸­çš„ <code>Standard</code> å¯åŠ¨æ¨¡å¼ã€‚</p>
<p>æˆ‘ä»¬è¿˜å¯ä»¥åœ¨è·³è½¬æ—¶æŒ‡å®šé¢å¤–çš„è¡Œä¸ºã€‚</p>
<h3 data-id="heading-5">popUpTo</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å‡è®¾åœ¨ ScreenC ä¸­è·³è½¬åˆ° ScreenA</span>
navController.navigate(route = SCREEN_A) {
    popUpTo(route = SCREEN_A) {
        inclusive = <span class="hljs-literal">true</span>
    }
}
</code></pre>
<p>ä¸Šé¢çš„ä»£ç è¡¨ç¤ºåœ¨è·³è½¬åˆ° ScreenA ä¹‹å‰ï¼Œä¼šä¸æ–­è®©é¡µé¢å‡ºæ ˆï¼Œç›´åˆ°é‡åˆ°ä¼ å…¥ <code>popUpTo()</code> å‡½æ•°çš„è·¯ç”±å‚æ•°å¯¹åº”çš„é¡µé¢ï¼ˆScreenAï¼‰ï¼Œå°† <code>inclusive</code>ï¼ˆåŒ…æ‹¬ï¼‰å±æ€§è®¾ä¸º trueï¼Œé‚£ä¹ˆåœ¨é‡åˆ°ç›®æ ‡é¡µé¢æ—¶ï¼Œä¹Ÿä¼šå°†ç›®æ ‡é¡µé¢å¼¹å‡ºæ ˆã€‚</p>
<p>è¿™ä¸ªç»„åˆå¸¸ç”¨äºæ¨¡æ‹Ÿ Activity çš„ <code>singleTask</code> å¯åŠ¨æ¨¡å¼çš„æ ˆè¡Œä¸ºã€‚</p>
<p>æ¯”å¦‚å½“å‰çš„è¿”å›æ ˆæ˜¯ <code>A -&gt; B -&gt; C</code>ï¼Œå¦‚æœä» <code>C</code> è·³å› <code>A</code>ï¼Œæˆ‘ä»¬å¸Œæœ›æ¸…é™¤æ‰ <code>A</code> ä¸Šé¢çš„ <code>B</code> å’Œ <code>C</code>ï¼Œå¹¶ä¸”ä¸å¸Œæœ›æœ‰ä¸¤ä¸ª <code>A</code>ï¼ˆé”€æ¯æ—§çš„ <code>A</code>ï¼‰ï¼Œå°±å¯ä»¥ä½¿ç”¨å®ƒã€‚</p>
<blockquote>
<p>ä½†è¯·æ³¨æ„ï¼Œè¿™å’Œ Activity çš„ <code>singleTask</code> è¡Œä¸ºå¹¶ä¸å®Œå…¨ä¸€è‡´ï¼Œå…·ä½“å¯ä»¥çœ‹æˆ‘çš„è¿™ç¯‡åšå®¢ï¼š<a href="https://juejin.cn/post/7510057969264590858" target="_blank" title="https://juejin.cn/post/7510057969264590858">ç²¾é€š Activity å››å¤§å¯åŠ¨æ¨¡å¼</a>ã€‚</p>
</blockquote>
<h3 data-id="heading-6">launchSingleTop</h3>
<p><code>launchSingleTop</code> å±æ€§çš„æ•ˆæœç±»ä¼¼äº Activity çš„ <code>singleTop</code> å¯åŠ¨æ¨¡å¼ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">composable(route = SCREEN_A) {
    ScreenA {
        navController.navigate(route = SCREEN_A) {
            launchSingleTop = <span class="hljs-literal">true</span>
        }
    }
}
</code></pre>
<p>å½“æŒ‡å®š <code>launchSingleTop</code> ä¸º <code>true</code> æ—¶ï¼Œ<code>NavController</code> ä¼šåˆ¤æ–­è¿”å›æ ˆçš„é¡¶éƒ¨æ˜¯å¦ä¸ºå¯¼èˆªç›®æ ‡é¡µã€‚å¦‚æœæ˜¯ï¼Œ<code>NavController</code> å°±ä¸ä¼šåˆ›å»ºæ–°çš„å®ä¾‹ï¼Œè€Œæ˜¯ä¼šå¤ç”¨æ ˆé¡¶çš„å®ä¾‹ã€‚</p>
<p>é¿å…äº†åœ¨æ ˆé¡¶å¤šæ¬¡åˆ›å»ºç›¸åŒçš„é¡µé¢å®ä¾‹ã€‚</p>
<h2 data-id="heading-7">è·³è½¬æ—¶ä¼ é€’å‚æ•°</h2>
<h3 data-id="heading-8">å¿…é€‰å‚æ•°</h3>
<p>é¦–å…ˆï¼Œä¿®æ”¹ ScreenBï¼Œè®©å®ƒèƒ½å¤Ÿæ¥æ”¶å­—ç¬¦ä¸²å‚æ•° <code>userId</code>ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ScreenB</span><span class="hljs-params">(modifier: <span class="hljs-type">Modifier</span> = Modifier, userId: <span class="hljs-type">String</span>? = <span class="hljs-literal">null</span>, onClick: () -&gt; <span class="hljs-type">Unit</span> = {})</span></span> {
    Column(
        modifier = modifier.fillMaxSize(),
        horizontalAlignment = Alignment.CenterHorizontally,
        verticalArrangement = Arrangement.Center
    ) {
        Text(<span class="hljs-string">"è¿™é‡Œæ˜¯é¡µé¢ B"</span>)
        Text(text = <span class="hljs-string">"ç”¨æˆ·idä¸ºï¼š<span class="hljs-variable">$userId</span>"</span>)
        Button(onClick = onClick) {
            Text(<span class="hljs-string">"è·³è½¬åˆ°é¡µé¢ C"</span>)
        }
    }
}
</code></pre>
<p>æ¥ç€ä¿®æ”¹ <code>NavHost</code>ï¼Œä½¿å¾—è·¯ç”±èŠ‚ç‚¹èƒ½å¤Ÿæ”¯æŒå‚æ•°ä¼ é€’ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">composable(
    <span class="hljs-comment">// æ–°å¢userIdè·¯ç”±å‚æ•° </span>
    route = <span class="hljs-string">"<span class="hljs-subst">${SCREEN_B}</span>/{userId}"</span>,
    arguments = listOf(
        <span class="hljs-comment">// æŒ‡å®šè·¯ç”±å‚æ•°çš„ç±»å‹</span>
        navArgument(name = <span class="hljs-string">"userId"</span>) {
            type = NavType.StringType
        }
    )
) { navBackStackEntry -&gt;
    <span class="hljs-comment">// è·å–å‚æ•°æ•°æ®</span>
    <span class="hljs-keyword">val</span> userId = navBackStackEntry.arguments?.getString(<span class="hljs-string">"userId"</span>)
    ScreenB(userId = userId) {
        navController.navigate(route = SCREEN_C)
    }
}
</code></pre>
<p>æœ€åï¼Œåœ¨é¡µé¢è·³è½¬æ—¶ï¼Œå°†å‚æ•°ä¼ é€’è¿›æ¥ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">composable(route = SCREEN_A) {
    ScreenA {
        <span class="hljs-keyword">val</span> userId = <span class="hljs-string">"123"</span>
        navController.navigate(route = <span class="hljs-string">"<span class="hljs-subst">${SCREEN_B}</span>/<span class="hljs-variable">$userId</span>"</span>)
    }
}
</code></pre>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a56671ea42b42b9a61cb2f809548878~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo55m9:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763826685&amp;x-signature=728GPJfa%2FpgaymorN%2FOE7Q4w%2BQw%3D" alt="image.png" width="50%" loading="lazy"/>
<h3 data-id="heading-9">å¯é€‰å‚æ•°</h3>
<p><code>Navigation</code> ä¹Ÿæ”¯æŒå¯é€‰å‚æ•°ï¼Œç±»ä¼¼äº URL çš„æŸ¥è¯¢å‚æ•°ã€‚</p>
<p>ä¿®æ”¹ <code>NavHost</code> ä¸­ ScreenB çš„è·¯ç”±å®šä¹‰ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">composable(
    <span class="hljs-comment">// å®šä¹‰å¯é€‰å‚æ•°</span>
    route = <span class="hljs-string">"<span class="hljs-subst">${SCREEN_B}</span>?userId={userId}"</span>,
    arguments = listOf(
        navArgument(name = <span class="hljs-string">"userId"</span>) {
            type = NavType.StringType
            nullable = <span class="hljs-literal">true</span> <span class="hljs-comment">// å¿…é¡»è¦å…è®¸ä¸ºç©º</span>
            <span class="hljs-comment">// defaultValue = "0" // å¯æä¾›é»˜è®¤å€¼</span>
        }
    )
) { navBackStackEntry -&gt;
    <span class="hljs-keyword">val</span> userId = navBackStackEntry.arguments?.getString(<span class="hljs-string">"userId"</span>) <span class="hljs-comment">// å¯èƒ½ä¸º null</span>
    ScreenB(userId = userId) {
        navController.navigate(route = SCREEN_C)
    }
}
</code></pre>
<p>è·³è½¬æ—¶ï¼Œå¯ä»¥æºå¸¦å‚æ•°ï¼Œä¹Ÿå¯ä»¥ä¸ä¼ å…¥ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">composable(route = SCREEN_A) {
    ScreenA {
        <span class="hljs-comment">// å¸¦å‚æ•°è·³è½¬</span>
        navController.navigate(route = <span class="hljs-string">"<span class="hljs-subst">${SCREEN_B}</span>?userId=456"</span>)

        <span class="hljs-comment">// ä¸å¸¦å‚æ•°è·³è½¬</span>
        navController.navigate(route = SCREEN_B)
    }
}
</code></pre>
<h2 data-id="heading-10">é¡µé¢é—´è¿”å›ç»“æœ</h2>
<p>ä» <code>A</code> è·³è½¬åˆ° <code>B</code>ï¼Œå¦‚æœè¿˜éœ€è¦åœ¨ <code>B</code> é¡µé¢è¿”å›ä¸€ä¸ªç»“æœç»™ <code>A</code>ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>SavedStateHandle</code> æ¥å®Œæˆ</p>
<p>ä¿®æ”¹ <code>ScreenB</code>ï¼Œä½¿å…¶èƒ½å¤Ÿè¿”å›ç»“æœï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ScreenB</span><span class="hljs-params">(modifier: <span class="hljs-type">Modifier</span> = Modifier, onClick: (<span class="hljs-type">String</span>) -&gt; <span class="hljs-type">Unit</span> = {})</span></span> {
    Column(
        modifier = modifier.fillMaxSize(),
        horizontalAlignment = Alignment.CenterHorizontally,
        verticalArrangement = Arrangement.Center
    ) {
        Text(<span class="hljs-string">"è¿™é‡Œæ˜¯é¡µé¢ B"</span>)
        Button(onClick = { onClick(<span class="hljs-string">"è¿™æ˜¯Bè¿”å›çš„ç»“æœ"</span>) }) {
            Text(<span class="hljs-string">"è¿”å›ç»“æœ"</span>)
        }
    }
}
</code></pre>
<p>ä¿®æ”¹ <code>NavHost</code> ä¸­ <code>ScreenB</code> çš„è·¯ç”±å®šä¹‰ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">composable(
    route = SCREEN_B
) { navBackStackEntry -&gt;
    ScreenB { result -&gt;
        <span class="hljs-comment">// å°†ç»“æœè®¾ç½®åˆ°ä¸Šä¸€ä¸ªé¡µé¢çš„SavedStateHandleä¸­</span>
        navController.previousBackStackEntry
            ?.savedStateHandle
            ?.<span class="hljs-keyword">set</span>(<span class="hljs-string">"result_key"</span>, result)
        <span class="hljs-comment">// å›åˆ°ä¸Šä¸€ä¸ªé¡µé¢</span>
        navController.popBackStack() <span class="hljs-comment">// å°†å½“å‰é¡µé¢å¼¹å‡ºæ ˆ</span>
    }
}
</code></pre>
<p>ç°åœ¨ï¼Œå°±èƒ½å¤Ÿåœ¨ <code>ScreenA</code> ä¸­æ¥æ”¶ç»“æœäº†ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">composable(route = SCREEN_A) { navBackStackEntry -&gt;

    <span class="hljs-comment">// è¿™æ ·ä¹Ÿèƒ½è·å–åˆ°å½“å‰çš„æ ˆèŠ‚ç‚¹</span>
    <span class="hljs-comment">// navController.currentBackStackEntry</span>

    <span class="hljs-comment">// ç›‘å¬æ ˆèŠ‚ç‚¹çš„å‚æ•°</span>
    <span class="hljs-keyword">val</span> result = navBackStackEntry.savedStateHandle.getStateFlow&lt;String?&gt;(
        key = <span class="hljs-string">"result_key"</span>,
        initialValue = <span class="hljs-literal">null</span>
    ).collectAsState()

    ScreenA(resultFromB = result.value) {
        <span class="hljs-comment">// ç§»é™¤å‚æ•°</span>
        navBackStackEntry.savedStateHandle.remove&lt;String&gt;(<span class="hljs-string">"result_key"</span>)

        navController.navigate(route = SCREEN_B)
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ScreenA</span><span class="hljs-params">(modifier: <span class="hljs-type">Modifier</span> = Modifier, resultFromB: <span class="hljs-type">String</span>?, onClick: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    Column(
        modifier = modifier.fillMaxSize(),
        horizontalAlignment = Alignment.CenterHorizontally,
        verticalArrangement = Arrangement.Center
    ) {
        Text(<span class="hljs-string">"è¿™é‡Œæ˜¯é¡µé¢ A"</span>)
        resultFromB?.let {
            Text(<span class="hljs-string">"ä»Bè¿”å›çš„ç»“æœ: <span class="hljs-variable">$it</span>"</span>)
        }
        Button(onClick = onClick) {
            Text(<span class="hljs-string">"è·³è½¬åˆ°é¡µé¢ B"</span>)
        }
    }
}
</code></pre>
<h2 data-id="heading-11">é«˜çº§å¯¼èˆªæŠ€å·§</h2>
<h3 data-id="heading-12">åµŒå¥—å¯¼èˆªå›¾ (Nested Navigation)</h3>
<p>å½“åº”ç”¨å˜å¾—å¤æ‚æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åµŒå¥—å¯¼èˆªå›¾æ¥è®©è·¯ç”±æ›´åŠ æ¸…æ™°ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> SCREEN_A = <span class="hljs-string">"screen_a"</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> SCREEN_B = <span class="hljs-string">"screen_b"</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> AUTH_FLOW_ROUTE = <span class="hljs-string">"auth_flow"</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> LOGIN_ROUTE = <span class="hljs-string">"login"</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> REGISTER_ROUTE = <span class="hljs-string">"register"</span>

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">MyComplexApp</span><span class="hljs-params">(modifier: <span class="hljs-type">Modifier</span> = Modifier)</span></span> {
    <span class="hljs-keyword">val</span> navController = rememberNavController()
    NavHost(navController = navController, startDestination = SCREEN_A) {
        <span class="hljs-comment">// ä¸»åº”ç”¨é¡µé¢</span>
        composable(route = SCREEN_A) {
            Column(
                modifier = Modifier.fillMaxSize(),
                horizontalAlignment = Alignment.CenterHorizontally,
                verticalArrangement = Arrangement.Center
            ) {
                Text(<span class="hljs-string">"A"</span>)
                Button(onClick = {
                    <span class="hljs-comment">// å°†è·³è½¬åˆ°å­å›¾çš„èµ·å§‹é¡µ (LOGIN_ROUTE)</span>
                    navController.navigate(route = AUTH_FLOW_ROUTE)
                }) {
                    Text(<span class="hljs-string">"è·³è½¬åˆ°ç™»å½•é¡µ"</span>)
                }
            }
        }
        composable(route = SCREEN_B) {
            Text(<span class="hljs-string">"B"</span>)
        }

        <span class="hljs-comment">// å­å¯¼èˆªå›¾-è®¤è¯æµç¨‹</span>
        navigation(
            startDestination = LOGIN_ROUTE, <span class="hljs-comment">// å­å›¾çš„èµ·å§‹é¡µ</span>
            route = AUTH_FLOW_ROUTE         <span class="hljs-comment">// å­å›¾çš„è·¯ç”±å</span>
        ) {
            composable(route = LOGIN_ROUTE) {
                Box(Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {
                    Text(<span class="hljs-string">"Login"</span>)
                }
            }
            composable(route = REGISTER_ROUTE) {
                Text(<span class="hljs-string">"Register"</span>)
            }
        }
    }

}
</code></pre>
<p>å¯¼èˆªå®Œæˆæ—¶ï¼Œå›é€€æ ˆå°†ä¼šæ˜¯ <code>[ SCREEN_A, LOGIN_ROUTE ]</code>ã€‚</p>
<h3 data-id="heading-13">ViewModel ä½œç”¨åŸŸ</h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>ViewModel</code> çš„ç”Ÿå‘½å‘¨æœŸç»‘å®šåˆ°äº† <code>NavBackStackEntry</code> è¿”å›æ ˆèŠ‚ç‚¹ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬å¸Œæœ›å¤šä¸ªé¡µé¢ï¼ˆComposableï¼‰å…±äº«ä¸€ä¸ª <code>ViewModel</code>ï¼Œæˆ‘ä»¬å¯ä»¥æå‡ <code>ViewModel</code> çš„ä½œç”¨åŸŸåˆ°è¿™äº›å±å¹•å…±åŒçš„åµŒå¥—å¯¼èˆªå›¾ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬å¸Œæœ›ç™»å½•å’Œæ³¨å†Œé¡µé¢èƒ½å¤Ÿå…±äº«ä¸€ä¸ªé‚®ç®±æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SharedAuthViewModel</span> : <span class="hljs-type">ViewModel</span>() {

    <span class="hljs-comment">// é‚®ç®±</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _email = MutableStateFlow(<span class="hljs-string">""</span>)
    <span class="hljs-keyword">val</span> email: StateFlow&lt;String&gt; = _email

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateEmail</span><span class="hljs-params">(newEmail: <span class="hljs-type">String</span>)</span></span> {
        _email.value = newEmail
    }

    <span class="hljs-keyword">init</span> {
        Log.d(<span class="hljs-string">"AuthViewModel"</span>, <span class="hljs-string">"ViewModel created!"</span>)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCleared</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onCleared()
        Log.d(<span class="hljs-string">"AuthViewModel"</span>, <span class="hljs-string">"ViewModel destroyed!"</span>)
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">ComponentActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContent {
            ComposeNavigationTestTheme {
                MyApp()
            }
        }
    }
}

<span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> HOME_ROUTE = <span class="hljs-string">"home"</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> AUTH_FLOW_ROUTE = <span class="hljs-string">"auth_flow"</span> <span class="hljs-comment">// åµŒå¥—å›¾çš„è·¯ç”±</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> LOGIN_ROUTE = <span class="hljs-string">"login"</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> REGISTER_ROUTE = <span class="hljs-string">"register"</span>

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">MyApp</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> navController = rememberNavController()

    NavHost(navController = navController, startDestination = HOME_ROUTE) {
        composable(HOME_ROUTE) {
            HomeScreen {
                navController.navigate(AUTH_FLOW_ROUTE)
            }
        }

        <span class="hljs-comment">// è®¤è¯æµç¨‹å­å›¾</span>
        navigation(
            startDestination = LOGIN_ROUTE,
            route = AUTH_FLOW_ROUTE
        ) {
            composable(LOGIN_ROUTE) { navBackStackEntry -&gt;
                <span class="hljs-comment">// è·å–å­å›¾çš„ NavBackStackEntry</span>
                <span class="hljs-keyword">val</span> authGraphEntry = remember(navBackStackEntry) {
                    <span class="hljs-keyword">val</span> parentRoute = navBackStackEntry.destination.parent!!.route!!
                    navController.getBackStackEntry(parentRoute)
                }
                <span class="hljs-comment">// å°† ViewModel ä½œç”¨åŸŸé™å®šåˆ°è¿™ä¸ªå­å›¾</span>
                <span class="hljs-keyword">val</span> authViewModel: SharedAuthViewModel = viewModel(authGraphEntry)

                LoginScreen(
                    viewModel = authViewModel,
                    toRegister = { navController.navigate(REGISTER_ROUTE) },
                    toHome = {
                        <span class="hljs-comment">// å›åˆ°ä¸»é¡µ</span>
                        navController.popBackStack(HOME_ROUTE, inclusive = <span class="hljs-literal">false</span>)
                    })
            }

            composable(REGISTER_ROUTE) { navBackStackEntry -&gt;
                <span class="hljs-keyword">val</span> authGraphEntry = remember(navBackStackEntry) {
                    <span class="hljs-keyword">val</span> parentRoute = navBackStackEntry.destination.parent!!.route!!
                    navController.getBackStackEntry(parentRoute)
                }
                <span class="hljs-comment">// ä¸ LoginScreen è·å–åˆ°å®Œå…¨ç›¸åŒçš„ ViewModel å®ä¾‹</span>
                <span class="hljs-keyword">val</span> authViewModel: SharedAuthViewModel = viewModel(authGraphEntry)

                RegisterScreen(viewModel = authViewModel) {
                    <span class="hljs-comment">// å›åˆ°ç™»å½•é¡µ</span>
                    navController.navigate(LOGIN_ROUTE) {
                        popUpTo(route = LOGIN_ROUTE) { 
                            inclusive = <span class="hljs-literal">true</span>
                        }
                    }
                    <span class="hljs-comment">// æˆ–è€…ç›´æ¥ä½¿ç”¨ navController.popBackStack()</span>
                }
            }
        }
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">HomeScreen</span><span class="hljs-params">(onClick: () -&gt; <span class="hljs-type">Unit</span> = {})</span></span> {
    Column(
        modifier = Modifier.fillMaxSize(),
        horizontalAlignment = Alignment.CenterHorizontally,
        verticalArrangement = Arrangement.Center
    ) {
        Text(<span class="hljs-string">"ä¸»å±å¹•"</span>)
        Button(onClick = onClick) {
            Text(<span class="hljs-string">"è¿›å…¥ç™»å½•/æ³¨å†Œæµç¨‹"</span>)
        }
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">LoginScreen</span><span class="hljs-params">(
    viewModel: <span class="hljs-type">SharedAuthViewModel</span>,
    toRegister: () -&gt; <span class="hljs-type">Unit</span>,
    toHome: () -&gt; <span class="hljs-type">Unit</span>
)</span></span> {
    <span class="hljs-keyword">val</span> email <span class="hljs-keyword">by</span> viewModel.email.collectAsState()

    Column(
        modifier = Modifier
            .fillMaxSize()
            .padding(<span class="hljs-number">16.</span>dp),
        horizontalAlignment = Alignment.CenterHorizontally,
        verticalArrangement = Arrangement.Center
    ) {
        Text(<span class="hljs-string">"ç™»å½•é¡µ"</span>)
        TextField(
            value = email,
            onValueChange = { viewModel.updateEmail(it) },
            label = { Text(<span class="hljs-string">"å…±äº«çš„ Email"</span>) }
        )
        Spacer(Modifier.height(<span class="hljs-number">16.</span>dp))
        Button(onClick = toRegister) {
            Text(<span class="hljs-string">"è·³è½¬åˆ°æ³¨å†Œé¡µ"</span>)
        }
        Spacer(Modifier.height(<span class="hljs-number">8.</span>dp))
        Button(onClick = toHome) {
            Text(<span class="hljs-string">"è¿”å›ä¸»é¡µ"</span>)
        }
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">RegisterScreen</span><span class="hljs-params">(viewModel: <span class="hljs-type">SharedAuthViewModel</span>, toLogin: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    <span class="hljs-keyword">val</span> email <span class="hljs-keyword">by</span> viewModel.email.collectAsState()

    Column(
        modifier = Modifier
            .fillMaxSize()
            .padding(<span class="hljs-number">16.</span>dp),
        horizontalAlignment = Alignment.CenterHorizontally,
        verticalArrangement = Arrangement.Center
    ) {
        Text(<span class="hljs-string">"æ³¨å†Œé¡µ"</span>)
        TextField(
            value = email,
            onValueChange = { viewModel.updateEmail(it) },
            label = { Text(<span class="hljs-string">"å…±äº«çš„ Email (ä¸ç™»å½•é¡µåŒæ­¥)"</span>) }
        )
        Spacer(Modifier.height(<span class="hljs-number">16.</span>dp))
        Button(onClick = toLogin) {
            Text(<span class="hljs-string">"è¿”å›ç™»å½•é¡µ"</span>)
        }
    }
}
</code></pre>
<p><code>popBackStack(route, inclusive)</code> çš„è¡Œä¸ºæ˜¯ä¸æ–­ä»æ ˆé¡¶å¼¹å‡ºé¡µé¢ï¼Œç›´åˆ°æ‰¾åˆ°å‡½æ•°å‚æ•° <code>route</code>ï¼Œå¦‚æœ <code>inclusive</code> æ ‡å¿—ä¸º <code>true</code>ï¼Œé‚£ä¹ˆ <code>route</code> ä¹Ÿä¼šä¸€å¹¶å¼¹å‡ºã€‚</p>
<h3 data-id="heading-14">åº•éƒ¨å¯¼èˆªæ çš„çŠ¶æ€ä¿å­˜ä¸æ¢å¤</h3>
<p>åœ¨å®ç°åº•éƒ¨å¯¼èˆªæ æ—¶ï¼Œåˆ‡æ¢ Tab å¾€å¾€ä¼šå¯¼è‡´å‰ä¸€ä¸ª Tab çš„çŠ¶æ€ï¼ˆå¦‚æ»šåŠ¨ä½ç½®ï¼‰ä¸¢å¤±ã€‚</p>
<p>ä¸ºäº†å®ç°çŠ¶æ€çš„ä¿å­˜ä¸æ¢å¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‰ä¸ªå…³é”®é€‰é¡¹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å½“ç‚¹å‡»åº•éƒ¨ Tab æ—¶ï¼Œè°ƒç”¨æ­¤æ–¹æ³•</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> NavController.<span class="hljs-title">onBottomNavClicked</span><span class="hljs-params">(route: <span class="hljs-type">String</span>)</span></span> {
    <span class="hljs-keyword">this</span>.navigate(route) {
        <span class="hljs-comment">// å¼¹å‡ºåˆ°å›¾çš„èµ·å§‹ç‚¹ï¼Œé¿å…å›é€€æ ˆæ— é™ç´¯ç§¯</span>
        popUpTo(<span class="hljs-keyword">this</span><span class="hljs-symbol">@onBottomNavClicked</span>.graph.findStartDestination().id) {
            saveState = <span class="hljs-literal">true</span> <span class="hljs-comment">// å…³é”®ï¼šå¼¹å‡ºæ—¶ä¿å­˜æ ˆä¸­é¡µé¢çš„çŠ¶æ€</span>
        }
        <span class="hljs-comment">// é¿å…åœ¨å·²ä½äºæ ˆé¡¶æ—¶é‡å¤åˆ›å»º</span>
        launchSingleTop = <span class="hljs-literal">true</span>
        <span class="hljs-comment">// å…³é”®ï¼šå¯¼èˆªåˆ°ç›®çš„åœ°æ—¶ï¼Œæ¢å¤å…¶ä¹‹å‰ä¿å­˜çš„çŠ¶æ€</span>
        restoreState = <span class="hljs-literal">true</span>
    }
}
</code></pre>
<p>è¿™æ ·èƒ½å®ç°çŠ¶æ€ä¸ä¸¢å¤±ï¼Œå¹¶ä¸”åœ¨ <code>é¦–é¡µ -&gt; æœç´¢ -&gt; æˆ‘çš„</code> æ¥å›åˆ‡æ¢æ—¶ï¼Œå›é€€æ ˆåªä¼šæ˜¯è¿™å‡ ä¸ªï¼š<code>é¦–é¡µ</code>ã€<code>é¦–é¡µ -&gt; æœç´¢</code>ã€<code>é¦–é¡µ -&gt; æˆ‘çš„</code>ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TabViewModel</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> tabName: String) : ViewModel() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _count = MutableStateFlow(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">val</span> count = _count.asStateFlow()

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">increment</span><span class="hljs-params">()</span></span> {
        _count.value++
    }

    <span class="hljs-keyword">init</span> {
        Log.d(<span class="hljs-string">"ViewModelLifecycle"</span>, <span class="hljs-string">"<span class="hljs-variable">$tabName</span> ViewModel CREATED"</span>)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCleared</span><span class="hljs-params">()</span></span> {
        Log.d(<span class="hljs-string">"ViewModelLifecycle"</span>, <span class="hljs-string">"<span class="hljs-variable">$tabName</span> ViewModel CLEARED"</span>)
        <span class="hljs-keyword">super</span>.onCleared()
    }
}

<span class="hljs-comment">// åº•éƒ¨ Tab çš„è·¯ç”±</span>
<span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Screen</span>(<span class="hljs-keyword">val</span> route: String, <span class="hljs-keyword">val</span> icon: ImageVector, <span class="hljs-keyword">val</span> label: String) {
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">object</span> Home : Screen(<span class="hljs-string">"home"</span>, Icons.Filled.Home, <span class="hljs-string">"é¦–é¡µ"</span>)
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">object</span> Search : Screen(<span class="hljs-string">"search"</span>, Icons.Filled.Search, <span class="hljs-string">"æœç´¢"</span>)
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">object</span> Profile : Screen(<span class="hljs-string">"profile"</span>, Icons.Filled.Person, <span class="hljs-string">"æˆ‘çš„"</span>)
}

<span class="hljs-keyword">val</span> bottomNavItems = listOf(
    Screen.Home,
    Screen.Search,
    Screen.Profile
)


<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">ComponentActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContent {
            ComposeNavigationTestTheme {
                MainScreen()
            }
        }
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">MainScreen</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> navController = rememberNavController()
    Scaffold(
        bottomBar = {
            MyBottomNavBar(navController = navController)
        }
    ) { paddingValues -&gt;
        NavHost(
            navController = navController,
            startDestination = Screen.Home.route,
            modifier = Modifier.padding(paddingValues)
        ) {
            composable(Screen.Home.route) {
                <span class="hljs-comment">// æ‰‹åŠ¨åˆ›å»º factory æ¥ä¼ é€’ tabNameï¼Œä»¥ä¾¿è§‚å¯Ÿæ—¥å¿—</span>
                <span class="hljs-keyword">val</span> vm: TabViewModel = viewModel(factory = TabViewModelFactory(<span class="hljs-string">"Home"</span>))
                TabScreenContent(vm)
            }
            composable(Screen.Search.route) {
                <span class="hljs-keyword">val</span> vm: TabViewModel = viewModel(factory = TabViewModelFactory(<span class="hljs-string">"Search"</span>))
                TabScreenContent(vm)
            }
            composable(Screen.Profile.route) {
                <span class="hljs-keyword">val</span> vm: TabViewModel = viewModel(factory = TabViewModelFactory(<span class="hljs-string">"Profile"</span>))
                TabScreenContent(vm)
            }
        }
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">TabViewModelFactory</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> tabName: String) : ViewModelProvider.Factory {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T : ViewModel&gt;</span> <span class="hljs-title">create</span><span class="hljs-params">(modelClass: <span class="hljs-type">Class</span>&lt;<span class="hljs-type">T</span>&gt;)</span></span>: T {
        <span class="hljs-keyword">if</span> (modelClass.isAssignableFrom(TabViewModel::<span class="hljs-keyword">class</span>.java)) {
            <span class="hljs-meta">@Suppress(<span class="hljs-string">"UNCHECKED_CAST"</span>)</span>
            <span class="hljs-keyword">return</span> TabViewModel(tabName) <span class="hljs-keyword">as</span> T
        }
        <span class="hljs-keyword">throw</span> IllegalArgumentException(<span class="hljs-string">"Unknown ViewModel class"</span>)
    }
}


<span class="hljs-comment">// åº•éƒ¨å¯¼èˆªæ </span>
<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">MyBottomNavBar</span><span class="hljs-params">(navController: <span class="hljs-type">NavController</span>)</span></span> {
    NavigationBar {
        <span class="hljs-comment">// å½“å‰è·¯ç”±çŠ¶æ€</span>
        <span class="hljs-keyword">val</span> navBackStackEntry <span class="hljs-keyword">by</span> navController.currentBackStackEntryAsState()
        <span class="hljs-keyword">val</span> currentRoute = navBackStackEntry?.destination?.route

        bottomNavItems.forEach { screen -&gt;
            NavigationBarItem(
                selected = currentRoute == screen.route,
                onClick = {
                    navController.navigate(screen.route) {
                        <span class="hljs-comment">// å¼¹å‡ºåˆ°å›¾çš„èµ·å§‹ç‚¹ï¼Œåœ¨è¿™é‡Œç›¸å½“äºæ˜¯ï¼š</span>
                        <span class="hljs-comment">// popUpTo(Screen.Home.route) {</span>
                        <span class="hljs-comment">//     saveState = true</span>
                        <span class="hljs-comment">//     inclusive = false</span>
                        <span class="hljs-comment">// }</span>
                        popUpTo(navController.graph.findStartDestination().id) {
                            <span class="hljs-comment">// å…³é”®ï¼šå¼¹å‡ºå±å¹•æ—¶ï¼Œä¿å­˜å®ƒä»¬çš„çŠ¶æ€</span>
                            saveState = <span class="hljs-literal">true</span>
                        }
                        <span class="hljs-comment">// é¿å…åœ¨å·²ä½äºæ ˆé¡¶æ—¶é‡å¤åˆ›å»ºå®ä¾‹</span>
                        launchSingleTop = <span class="hljs-literal">true</span>
                        <span class="hljs-comment">// å…³é”®ï¼šå¯¼èˆªåˆ°ç›®çš„åœ°æ—¶ï¼Œæ¢å¤å…¶ä¹‹å‰ä¿å­˜çš„çŠ¶æ€</span>
                        restoreState = <span class="hljs-literal">true</span>
                    }
                },
                icon = { Icon(screen.icon, contentDescription = screen.label) },
                label = { Text(screen.label) }
            )
        }
    }
}

<span class="hljs-comment">// Tab å±å¹•å†…å®¹</span>
<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">TabScreenContent</span><span class="hljs-params">(viewModel: <span class="hljs-type">TabViewModel</span>)</span></span> {
    <span class="hljs-keyword">val</span> count <span class="hljs-keyword">by</span> viewModel.count.collectAsState()
    <span class="hljs-keyword">val</span> listState = rememberLazyListState() <span class="hljs-comment">// ç”¨äºæ¼”ç¤ºæ»šåŠ¨ä½ç½®çš„ä¿å­˜</span>

    Column(modifier = Modifier.fillMaxSize()) {
        Text(text = <span class="hljs-string">"å½“å‰è®¡æ•°å€¼: <span class="hljs-variable">$count</span>"</span>, style = MaterialTheme.typography.headlineMedium)
        Button(onClick = { viewModel.increment() }) {
            Text(<span class="hljs-string">"ç‚¹æˆ‘ +1"</span>)
        }

        LazyColumn(state = listState) {
            items(<span class="hljs-number">100</span>) {
                Text(text = <span class="hljs-string">"æˆ‘æ˜¯åˆ—è¡¨é¡¹ <span class="hljs-variable">$it</span>"</span>, modifier = Modifier.padding(<span class="hljs-number">16.</span>dp))
            }
        }
    }
}
</code></pre>
<p>åœ¨è¿™é‡Œèµ·å§‹é¡µæ˜¯ <code>home</code>ï¼Œå‡è®¾å½“å‰çš„è¿”å›æ ˆæ˜¯ <code>[home, profile]</code>ï¼Œç‚¹å‡» <code>search</code> æ ‡ç­¾é¡µæ—¶å°†ä¼šå‘ç”Ÿï¼š</p>
<ul>
<li>
<p><code>popUpTo(navController.graph.findStartDestination().id)</code>ï¼šå°†é™¤äº†èµ·å§‹é¡µï¼ˆ<code>home</code>ï¼‰çš„é¡µé¢éƒ½å¼¹å‡ºæ ˆï¼Œè¿”å›æ ˆä¼šå˜ä¸º <code>[home]</code>ã€‚ï¼ˆ<code>inclusive</code> é»˜è®¤ä¸º <code>false</code>ï¼‰</p>
</li>
<li>
<p><code>saveState = true</code>ï¼šå°†å¼¹å‡ºçš„é¡µé¢çš„ <code>ViewModel</code> å’Œ UI çŠ¶æ€è¿›è¡Œä¿å­˜ã€‚</p>
</li>
<li>
<p><code>launchSingleTop = true</code>ï¼šé˜²æ­¢é‡å¤ç‚¹å‡»åŒä¸€ä¸ª Tab æ—¶ï¼Œåˆ›å»ºå¤šä¸ªé¡µé¢å®ä¾‹ã€‚</p>
</li>
<li>
<p><code>restoreState = true</code>ï¼šå¯¼èˆªåˆ° <code>search</code> é¡µæ—¶ï¼Œä¼šå…ˆçœ‹çœ‹ä¹‹å‰æœ‰æ²¡æœ‰ä¸º <code>search</code> é¡µä¿å­˜è¿‡çŠ¶æ€ã€‚</p>
<ul>
<li>å¦‚æœæœ‰ï¼Œä¼šç›´æ¥å”¤é†’ä¹‹å‰çš„ <code>search</code> å®ä¾‹ï¼Œæ¢å¤å…¶ <code>ViewModel</code> å’Œ UI çŠ¶æ€ï¼ˆè¿™é‡Œæ˜¯æ»šåŠ¨ä½ç½®ï¼‰ã€‚</li>
<li>å¦‚æœæ²¡æœ‰ï¼Œæ„å‘³ç€æ˜¯ç¬¬ä¸€æ¬¡ç‚¹å‡»ï¼Œä¼šåˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ <code>search</code> é¡µé¢å®ä¾‹ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-15">æ”¯æŒ deep Link</h2>
<p>deep link å°±æ˜¯å¯ä»¥è®©ç¬¬ä¸‰æ–¹ï¼ˆå¦‚æµè§ˆå™¨ã€å…¶ä»–åº”ç”¨ç­‰ï¼‰ç›´æ¥å”¤èµ·æŒ‡å®šçš„é¡µé¢ã€‚</p>
<p>é¦–å…ˆï¼Œè®©å½“å‰çš„ Activity æ”¯æŒ deep linkï¼Œä¿®æ”¹ <code>AndroidManifest.xml</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">activity</span>
    <span class="hljs-attr">android:name</span>=<span class="hljs-string">".MainActivity"</span>
    <span class="hljs-attr">android:exported</span>=<span class="hljs-string">"true"</span>
    <span class="hljs-attr">android:theme</span>=<span class="hljs-string">"@style/Theme.ComposeNavigationTest"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">intent-filter</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">action</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.intent.action.MAIN"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">category</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.intent.category.LAUNCHER"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">intent-filter</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">intent-filter</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">action</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.intent.action.VIEW"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">category</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.intent.category.DEFAULT"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">category</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.intent.category.BROWSABLE"</span> /&gt;</span>
        
        <span class="hljs-comment">&lt;!-- æ”¯æŒ myapp://screen_b æ ¼å¼--&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">data</span>
            <span class="hljs-attr">android:host</span>=<span class="hljs-string">"screen_b"</span>
            <span class="hljs-attr">android:scheme</span>=<span class="hljs-string">"myapp"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">intent-filter</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">activity</span>&gt;</span>
</code></pre>
<p>ç„¶ååœ¨ ScreenB é¡µé¢çš„è·¯ç”±å®šä¹‰å¤„åŠ ä¸Š deep link çš„æ”¯æŒå³å¯ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">composable(
    route = <span class="hljs-string">"<span class="hljs-subst">${SCREEN_B}</span>/{userId}"</span>,
    arguments = listOf(
        navArgument(name = <span class="hljs-string">"userId"</span>) {
            type = NavType.StringType
        }
    ),
    <span class="hljs-comment">// æ·»åŠ  deepLinks åˆ—è¡¨</span>
    deepLinks = listOf(
        navDeepLink {
            <span class="hljs-comment">// å®šä¹‰ URI æ ¼å¼ï¼Œå®ƒä¼šè‡ªåŠ¨åŒ¹é…è·¯ç”±å‚æ•°</span>
            uriPattern = <span class="hljs-string">"myapp://<span class="hljs-variable">$SCREEN_B</span>/{userId}"</span>
        }
    )
) { navBackStackEntry -&gt;
    <span class="hljs-keyword">val</span> userId = navBackStackEntry.arguments?.getString(<span class="hljs-string">"userId"</span>)
    ScreenB(userId = userId) {
        navController.navigate(route = SCREEN_C)
    }
}
</code></pre>
<p>åªè¦è¿›å…¥ "myapp://screen_b/321" é“¾æ¥ï¼Œå³å¯åœ¨æ‰“å¼€é¡µé¢ B çš„åŒæ—¶ä¼ é€’ <code>userId</code> ä¸º "321" çš„å‚æ•°ã€‚</p>
<h2 data-id="heading-16">å‚è€ƒ</h2>
<p>å‚è€ƒéƒ­éœ–å¤§ä½¬çš„åšå®¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FTQLEydGZsVm2ObtKFjFRMg" target="_blank" title="https://mp.weixin.qq.com/s/TQLEydGZsVm2ObtKFjFRMg" ref="nofollow noopener noreferrer">å†™ç»™åˆå­¦è€…çš„Jetpack Composeæ•™ç¨‹ï¼ŒNavigation</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ Claude Code ä¼˜åŒ–åšå®¢å†™ä½œï¼šæˆ‘çš„å®Œæ•´å·¥ä½œæµç¨‹]]></title>    <link>https://juejin.cn/post/7572453554332024832</link>    <guid>https://juejin.cn/post/7572453554332024832</guid>    <pubDate>2025-11-15T14:19:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572453554332024832" data-draft-id="7572493520003514402" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ Claude Code ä¼˜åŒ–åšå®¢å†™ä½œï¼šæˆ‘çš„å®Œæ•´å·¥ä½œæµç¨‹"/> <meta itemprop="keywords" content="Claude"/> <meta itemprop="datePublished" content="2025-11-15T14:19:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯é­”ä¸¸å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/3217622495411292"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ Claude Code ä¼˜åŒ–åšå®¢å†™ä½œï¼šæˆ‘çš„å®Œæ•´å·¥ä½œæµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3217622495411292/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯é­”ä¸¸å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T14:19:09.000Z" title="Sat Nov 15 2025 14:19:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aaronheld.com%2Fpost%2Fstreamlining-blog-writing-with-claude-code" target="_blank" title="https://www.aaronheld.com/post/streamlining-blog-writing-with-claude-code" ref="nofollow noopener noreferrer">è½¬è½½</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7050bfcdd00419b848a93c61dab7ab0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763821149&amp;x-signature=tmWZMYdP6bevEPDB7nNLZFTxY70%3D" alt="" loading="lazy"/></p>
<p>ç°ä»£å†™ä½œè€…çš„é…ç½®ï¼šäººç±»åˆ›é€ åŠ›ä¸AIåŠ©æ‰‹çš„ç»“åˆ</p>
<h2 data-id="heading-0">ä»‹ç»</h2>
<p>25å¹´æ¥ï¼Œæˆ‘ä¸€ç›´åœ¨é€šè¿‡æ— æ•°æ¬¡å†™ä½œå’ŒæŠ€æœ¯æµç¨‹çš„è¿­ä»£æ¥å†™åšå®¢ã€‚æœ€è¿‘ï¼Œæˆ‘å‘ç°äº†ä¸€äº›è®©å†™ä½œå†æ¬¡å˜å¾—<strong>æ„‰å¿«</strong>çš„ä¸œè¥¿ï¼šClaude Codeã€‚è¿™ä¸æ˜¯å¦ä¸€ä¸ª"AIå°†å–ä»£å†™ä½œè€…"çš„æ•…äº‹ã€‚è€Œæ˜¯å…³äºAIå¦‚ä½•é€šè¿‡å¤„ç†å†…å®¹åˆ›å»ºçš„ç¹çéƒ¨åˆ†æ¥å¢å¼ºåˆ›é€ æ€§è¡¨è¾¾ã€‚å…³é”®æ˜¯ï¼Œå®ƒå¸®åŠ©æˆ‘å…‹æœäº†æœ€åçš„éšœç¢ï¼šå®é™…å‘å¸ƒã€‚</p>
<p>æˆ‘çš„å¤§å¤šæ•°æ–‡ç« éƒ½å§‹äºä»æœªè§è¿‡å¤©æ—¥çš„åˆç¨¿ã€‚ç°åœ¨ï¼Œæˆ‘çš„<strong>æœºå™¨äººä¼™ä¼´</strong>æŒ‡å¯¼æˆ‘å®Œæˆä»æƒ³æ³•åˆ°æ‰§è¡Œçš„æ•´ä¸ªè¿‡ç¨‹ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†å¸¦ä½ èµ°è¿‡ä»æœ€åˆæƒ³æ³•åˆ°å‘å¸ƒæ–‡ç« çš„å®Œæ•´å·¥ä½œæµç¨‹ï¼Œå‡†ç¡®å±•ç¤ºClaude Codeå¦‚ä½•ä¸æˆ‘é€‰æ‹©çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨Hugoé›†æˆã€‚ä½ å°†çœ‹åˆ°çœŸå®çš„æˆªå›¾ã€å®é™…çš„å‘½ä»¤ï¼Œä»¥åŠå½“äººç±»æ´å¯ŸåŠ›ä¸AIåŠ©æ‰‹ç›¸é‡æ—¶å‘ç”Ÿçš„çœŸæ­£åä½œè¿‡ç¨‹ã€‚</p>
<h2 data-id="heading-1">éµå¾ªæ–‡æ¡£åŒ–çš„å·¥ä½œæµç¨‹</h2>
<p>æˆ‘å³å°†æ¼”ç¤ºçš„è¿‡ç¨‹ä¸æ˜¯ä¸´æ—¶çš„ - å®ƒéµå¾ªæˆ‘ç»è¿‡æ—¶é—´å¼€å‘å’Œå®Œå–„çš„ç‰¹å®šClaudeå·¥ä½œæµç¨‹æ–‡ä»¶ã€‚è¿™ä¸ªå·¥ä½œæµç¨‹æ–‡æ¡£ä½œä¸ºæŒ‡å¯¼ï¼ŒClaudeå¯ä»¥å‚è€ƒå®ƒä»¥åœ¨ä¸åŒåšå®¢å†™ä½œä¼šè¯ä¸­ä¿æŒä¸€è‡´æ€§ã€‚</p>
<p>ä½ å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹å®Œæ•´çš„å·¥ä½œæµç¨‹æ–‡ä»¶ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Faheld%2Faaronheld-blog%2Fblob%2Fmain%2F.claude%2Fworkflows%2Fcreate-blog-post-with-image.md" target="_blank" title="https://github.com/aheld/aaronheld-blog/blob/main/.claude/workflows/create-blog-post-with-image.md" ref="nofollow noopener noreferrer">create-blog-post-with-image.md</a></p>
<p>æ‹¥æœ‰æ–‡æ¡£åŒ–çš„å·¥ä½œæµç¨‹æä¾›äº†å‡ ä¸ªå¥½å¤„ï¼š</p>
<ul>
<li>åœ¨ä¸åŒå†™ä½œä¼šè¯ä¸­çš„<strong>ä¸€è‡´æ€§</strong></li>
<li>å…¶ä»–äººå¯ä»¥éµå¾ªçš„<strong>å¯é‡ç°è¿‡ç¨‹</strong></li>
<li>éšç€æˆ‘æ”¹è¿›å·¥ä½œæµç¨‹çš„<strong>è¿­ä»£æ”¹è¿›</strong></li>
<li>ä¸ºClaudeæä¾›<strong>ä¸Šä¸‹æ–‡</strong>ï¼Œè®©å®ƒç†è§£æˆ‘çš„åå¥½å’Œæ ‡å‡†</li>
</ul>
<p>è¿™ä¸ªå·¥ä½œæµç¨‹æ–‡ä»¶å……å½“è“å›¾ï¼Œå°†å¯èƒ½æ˜¯æ··ä¹±çš„åˆ›ä½œè¿‡ç¨‹è½¬å˜ä¸ºç»“æ„åŒ–çš„ã€å¯é‡å¤çš„ç³»ç»Ÿã€‚</p>
<h2 data-id="heading-2">è®¾ç½®ï¼šå››çª—å£å·¥ä½œæµç¨‹</h2>
<p>æˆ‘çš„Claude Codeåšå®¢å·¥ä½œæµç¨‹çš„åŸºç¡€æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„å››çª—å£è®¾ç½®ï¼Œåˆ›å»ºäº†ä¸€ä¸ªå…¨é¢çš„å†™ä½œç¯å¢ƒã€‚ä»¥ä¸‹æ˜¯è¿™äº›çª—å£å¦‚ä½•ååŒå·¥ä½œï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d8c11a9375041adb60d583416db5cab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763821149&amp;x-signature=tJ2XljI%2FRFPDxbQMQaFG%2ByHxMrE%3D" alt="" loading="lazy"/></p>
<p>å››ä¸ªçª—å£å’Œè°å·¥ä½œï¼šHugoæœåŠ¡å™¨ã€Claude Codeã€VSCodeç¼–è¾‘å™¨å’Œç§»åŠ¨æµè§ˆå™¨é¢„è§ˆ</p>
<h3 data-id="heading-3">çª—å£1ï¼šHugoæœåŠ¡å™¨ç»ˆç«¯ï¼ˆå³ä¸‹è§’ï¼‰</h3>
<pre><code class="hljs language-css" lang="css">hugo server -D <span class="hljs-attr">--navigateToChanged</span>
</code></pre>
<p>è¿™åœ¨æ•´ä¸ªå†™ä½œè¿‡ç¨‹ä¸­ä¿æŒè¿è¡Œï¼Œéšç€å†…å®¹çš„æ¼”è¿›æä¾›å³æ—¶åé¦ˆã€‚<code>--navigateToChanged</code>æ ‡å¿—ä¼šè‡ªåŠ¨å°†ä½ çš„æµè§ˆå™¨å¯¼èˆªåˆ°æ›´æ–°çš„å†…å®¹ï¼Œä½¿åé¦ˆå¾ªç¯å‡ ä¹å³æ—¶ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">âš¡ hugo server --navigateToChanged

Watching <span class="hljs-keyword">for</span> changes <span class="hljs-keyword">in</span> /Users/aheld/Projects/aheld/aaronheld-blog/{archetypes,assets,content,i18n,layouts,static}

Watching <span class="hljs-keyword">for</span> config changes <span class="hljs-keyword">in</span> /Users/aheld/Projects/aheld/aaronheld-blog/config.yml, /Users/aheld/Projects/aheld/aaronheld-blog/go.mod

Start building sites â€¦

hugo v0.147.9+extended+withdeploy darwin/arm64 BuildDate=2025-06-23T08:22:20Z VendorInfo=brew



                  â”‚ EN
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€
 Pages            â”‚ 276

 Paginator pages  â”‚  43

 Non-page files   â”‚  47

 Static files     â”‚  20

 Processed images â”‚  26

 Aliases          â”‚  90

 Cleaned          â”‚   0



Built <span class="hljs-keyword">in</span> 132 ms

Environment: <span class="hljs-string">"development"</span>

Serving pages from disk

Running <span class="hljs-keyword">in</span> Fast Render Mode. For full rebuilds on change: hugo server --disableFastRender

Web Server is available at http://localhost:1313/ (<span class="hljs-built_in">bind</span> address 127.0.0.1)

Press Ctrl+C to stop
</code></pre>
<h3 data-id="heading-4">çª—å£2ï¼šClaude Codeç»ˆç«¯ï¼ˆå³ä¸Šè§’ï¼‰</h3>
<p>è¿™æ˜¯åä½œå‘ç”Ÿçš„åœ°æ–¹ã€‚æˆ‘ä½¿ç”¨Claude Codeè¿›è¡Œè§„åˆ’ã€ç ”ç©¶ã€å†™ä½œï¼Œç”šè‡³åœ¨éœ€è¦æ—¶è°ƒè¯•æ„å»ºè¿‡ç¨‹ã€‚Claudeæä¾›æˆ˜ç•¥æ€§æ€ç»´å’Œå†…å®¹ç”Ÿæˆï¼Œè€Œæˆ‘æŒ‡å¯¼æ–¹å‘ã€‚</p>
<h3 data-id="heading-5">çª—å£3ï¼šVSCodeç¼–è¾‘å™¨ï¼ˆå·¦ä¸Šè§’ï¼‰</h3>
<p>ç¼–è¾‘å™¨çª—å£æ˜¯æˆ‘å®¡æŸ¥Claudeçš„æ›´æ”¹ã€è¿›è¡Œå®æ—¶æ›´æ–°å’Œç»´æŠ¤è´¨é‡æ§åˆ¶çš„åœ°æ–¹ã€‚è¿™å¯¹åä½œè¿‡ç¨‹è‡³å…³é‡è¦ - æˆ‘å¯ä»¥å‡†ç¡®çœ‹åˆ°Claudeåœ¨ä¿®æ”¹ä»€ä¹ˆï¼Œå¹¶å®æ—¶æ‰¹å‡†æˆ–è°ƒæ•´æ›´æ”¹ã€‚</p>
<h3 data-id="heading-6">çª—å£4ï¼šç§»åŠ¨æ¨¡æ‹Ÿæ¨¡å¼çš„æµè§ˆå™¨ï¼ˆå·¦ä¸‹è§’ï¼‰</h3>
<p>è®¾ç½®ä¸ºç§»åŠ¨æ¨¡æ‹Ÿæ¨¡å¼çš„æµè§ˆå™¨çª—å£è®©æˆ‘èƒ½ç«‹å³çœ‹åˆ°å†…å®¹åœ¨å°å±å¹•ä¸Šçš„å¤–è§‚ã€‚ç”±äºå¤§å¤šæ•°è¯»è€…åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šè®¿é—®åšå®¢ï¼Œè¿™ç¡®ä¿å†…å®¹ä¸ºå®é™…çš„é˜…è¯»ä½“éªŒè¿›è¡Œäº†ä¼˜åŒ–ã€‚</p>
<p>è¿™ä¸ªå››çª—å£è®¾ç½®çš„ç¾å¦™ä¹‹å¤„åœ¨äºå®Œæ•´çš„åé¦ˆå¾ªç¯ï¼šClaudeç”Ÿæˆå†…å®¹ï¼Œæˆ‘åœ¨VSCodeä¸­å®¡æŸ¥ï¼ŒHugoç«‹å³é‡å»ºï¼Œæˆ‘å¯ä»¥ç«‹å³çœ‹åˆ°æ¡Œé¢å’Œç§»åŠ¨æ¼”ç¤ºã€‚è¿™å°±åƒæ‹¥æœ‰ä¸€ä¸ªå®Œæ•´çš„ç¼–è¾‘å’Œè®¾è®¡å›¢é˜Ÿå®Œç¾åŒæ­¥å·¥ä½œã€‚</p>
<p>æˆ‘å–œæ¬¢åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨claude codeï¼Œè€Œä¸æ˜¯ä¸“é—¨çš„AIç¼–è¾‘å™¨ã€‚è¿™ç»™äº†æˆ‘é€‰æ‹©çš„è‡ªç”±ã€‚å½“è¿›è¡ŒWebå‰ç«¯å·¥ä½œæ—¶ï¼Œæˆ‘ç»å¸¸åœ¨è¿™ä¸ªå·¥ä½œæµç¨‹ä¸­ä½¿ç”¨neovimï¼Œå¹¶åœ¨ç§»åŠ¨è§†å›¾æ—è¾¹æ·»åŠ ä¸€ä¸ªé¢å¤–çš„æ¡Œé¢æµè§ˆå™¨é¢„è§ˆçª—å£ã€‚æˆ‘å‘ç°VSCode markdowné¢„è§ˆä¿æŒåŒæ­¥æ›´å¥½ï¼Œè¿™åœ¨è¿™ç§æƒ…å†µä¸‹å¾ˆæœ‰å¸®åŠ©ã€‚</p>
<h2 data-id="heading-7">ç¬¬1æ­¥ï¼šä½¿ç”¨Claudeçš„TodoWriteè¿›è¡Œå†…å®¹è§„åˆ’</h2>
<p>Claude Codeå¯¹å†™ä½œè€…æœ€æœ‰ç”¨çš„åŠŸèƒ½ä¹‹ä¸€æ˜¯TodoWriteå·¥å…·ã€‚ä¸æ˜¯ä»ç©ºç™½é¡µé¢å¼€å§‹ï¼ˆä¼ ç»Ÿçš„å†™ä½œè€…å™©æ¢¦ï¼‰ï¼Œæˆ‘é¦–å…ˆè®©Claudeå°†å†™ä½œé¡¹ç›®åˆ†è§£ä¸ºå¯ç®¡ç†çš„ä»»åŠ¡ã€‚</p>
<pre><code class="hljs language-css" lang="css">build <span class="hljs-selector-tag">a</span> plan <span class="hljs-selector-tag">to</span> write <span class="hljs-selector-tag">a</span> blog <span class="hljs-selector-tag">article</span> about my local claude workflow <span class="hljs-selector-tag">to</span> write blog articles. <span class="hljs-selector-tag">I</span> want <span class="hljs-selector-tag">to</span> highlight the steps where <span class="hljs-selector-tag">I</span> use the workflow.

Write the <span class="hljs-selector-tag">article</span> by following the workflow and capturing screenshots and text commands at each step.

Add <span class="hljs-selector-tag">a</span> detail that <span class="hljs-selector-tag">I</span> am running "hugo serve" in another terminal window.

When the plan is done, write it <span class="hljs-selector-tag">to</span> <span class="hljs-selector-tag">a</span> local file under ./specs/
</code></pre>
<p>ä»¥åŠè¾“å‡ºï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">âº Perfect! I<span class="hljs-comment">'ve created a comprehensive plan for your Claude workflow blog article at specs/claude-workflow-blog-plan.md.</span>

The plan includes:

<span class="hljs-number">10</span> detailed workflow steps <span class="hljs-keyword">from</span> initial setup <span class="hljs-keyword">to</span> post-publication monitoring, <span class="hljs-keyword">with</span> <span class="hljs-keyword">each</span> <span class="hljs-keyword">step</span> covering:
- Specific content <span class="hljs-keyword">to</span> write
- Exact commands <span class="hljs-keyword">to</span> capture/demonstrate
- Screenshots needed at <span class="hljs-keyword">each</span> stage

<span class="hljs-keyword">Key</span> features <span class="hljs-keyword">of</span> the plan:
- Shows the dual-terminal approach (Hugo server running + Claude work terminal)
- Documents authentic workflow <span class="hljs-keyword">with</span> real commands <span class="hljs-built_in">and</span> outputs
- Includes proper screenshot organization <span class="hljs-built_in">and</span> naming
- Follows your existing blog <span class="hljs-keyword">structure</span> <span class="hljs-built_in">and</span> commit message standards
- Balances technical detail <span class="hljs-keyword">with</span> engaging storytelling

The plan <span class="hljs-built_in">is</span> designed <span class="hljs-keyword">to</span> create a <span class="hljs-number">1500</span>-<span class="hljs-number">2000</span> word article that authentically demonstrates how you use Claude Code <span class="hljs-keyword">for</span> blog writing <span class="hljs-keyword">while</span> providing actionable guidance <span class="hljs-keyword">for</span> readers.

<span class="hljs-keyword">Each</span> <span class="hljs-keyword">step</span> builds naturally <span class="hljs-keyword">on</span> the previous one, showing the complete journey <span class="hljs-keyword">from</span> idea <span class="hljs-keyword">to</span> published post.

You can now follow this plan <span class="hljs-keyword">step</span>-<span class="hljs-keyword">by</span>-<span class="hljs-keyword">step</span> <span class="hljs-keyword">to</span> write the actual blog article, capturing real screenshots <span class="hljs-built_in">and</span> command outputs <span class="hljs-keyword">as</span> you go through your genuine workflow!
</code></pre>
<p>å½“æˆ‘è¦æ±‚Claudeè§„åˆ’è¿™ç¯‡åšå®¢æ–‡ç« æ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼š</p>
<p>Claudeç«‹å³åˆ›å»ºäº†ä¸€ä¸ªç»“æ„åŒ–çš„ä»»åŠ¡åˆ—è¡¨ï¼š</p>
<ul>
<li>æ’°å†™å…³äºClaude + Hugoå·¥ä½œæµç¨‹çš„å¼•äººå…¥èƒœçš„ä»‹ç»</li>
<li>è®°å½•åŒç»ˆç«¯è®¾ç½®è¿‡ç¨‹</li>
<li>è§£é‡ŠClaudeçš„è§„åˆ’å’Œç ”ç©¶èƒ½åŠ›</li>
<li>å±•ç¤ºåä½œå†…å®¹åˆ›å»ºè¿‡ç¨‹</li>
<li>è®°å½•æµ‹è¯•å’Œé¢„è§ˆå·¥ä½œæµç¨‹</li>
<li>æ¶µç›–éƒ¨ç½²å’Œç›‘æ§æ­¥éª¤</li>
<li>æ’°å†™å¸¦æœ‰å¥½å¤„å’Œå»ºè®®çš„ç»“è®º</li>
</ul>
<p>è¿™ä¸ªè§„åˆ’é˜¶æ®µæœ‰ä¸¤ä¸ªç›®çš„ï¼š</p>
<ul>
<li><strong>åˆ†è§£å¤æ‚æ€§</strong> - å†™ä½œå˜æˆä¸€ç³»åˆ—è¾ƒå°çš„ã€å¯ç®¡ç†çš„ä»»åŠ¡</li>
<li><strong>ä¿æŒä¸“æ³¨</strong> - æ¯ä¸ªä»»åŠ¡éƒ½æœ‰æ˜ç¡®çš„ç›®æ ‡ï¼Œé˜²æ­¢"èŒƒå›´è”“å»¶"</li>
</ul>
<p>TodoWriteå·¥å…·è¿˜å®æ—¶è·Ÿè¸ªè¿›åº¦ï¼Œæ˜¾ç¤ºå·²å®Œæˆã€è¿›è¡Œä¸­å’Œå¾…å¤„ç†çš„ä»»åŠ¡ã€‚è¿™å°±åƒåœ¨å†™ä½œè¿‡ç¨‹ä¸­å†…ç½®äº†ä¸€ä¸ªç†Ÿç»ƒçš„é¡¹ç›®ç»ç†ã€‚</p>
<p>Claudeç”Ÿæˆè®¡åˆ’åï¼Œæˆ‘å®¡æŸ¥å¹¶ç¼–è¾‘å®ƒï¼Œç„¶åè¦æ±‚Claudeé‡æ–°åŠ è½½æœ€ç»ˆç‰ˆæœ¬ï¼Œç¡®ä¿å®ƒä»æ­£ç¡®çš„è“å›¾å¼€å§‹å·¥ä½œã€‚</p>
<h2 data-id="heading-8">ç¬¬2æ­¥ï¼šç ”ç©¶å’Œä¸Šä¸‹æ–‡æ”¶é›†</h2>
<p>Claude Codeæ“…é•¿ä»å¤šä¸ªæ¥æºæ”¶é›†ä¸Šä¸‹æ–‡ï¼Œä½¿ç ”ç©¶æ„Ÿè§‰ä¸åƒè€ƒå¤å­¦ï¼Œæ›´åƒåä½œã€‚å¯¹äºè¿™ç¯‡åšå®¢æ–‡ç« ï¼Œæˆ‘æ¼”ç¤ºäº†å‡ ä¸ªå…³é”®çš„ç ”ç©¶æ–¹æ³•ï¼š</p>
<h3 data-id="heading-9">æŒ–æ˜ç°æœ‰å†…å®¹</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä½¿ç”¨Claudeçš„Grepå·¥å…·æœç´¢æˆ‘å¤šå¹´çš„åšå®¢å†…å®¹ä»¥å¯»æ‰¾ç›¸å…³ä¸»é¢˜ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">âº ğŸ” <span class="hljs-keyword">Step</span> <span class="hljs-number">3</span>: Content Research <span class="hljs-built_in">and</span> Context Gathering

Now <span class="hljs-keyword">let</span><span class="hljs-comment">'s demonstrate Claude's research capabilities and how I leverage existing blog content for context.</span>

First, <span class="hljs-keyword">let</span><span class="hljs-comment">'s search for existing content related to workflows or AI:</span>

âº Search(pattern: <span class="hljs-string">"workflow|AI|automation|tool"</span>, path: <span class="hljs-string">"content/post"</span>)
â¿  Found <span class="hljs-number">67</span> files (ctrl+r <span class="hljs-keyword">to</span> expand)

âº Great! <span class="hljs-keyword">Let</span><span class="hljs-comment">'s look at some relevant posts that might provide context:</span>

âº Read(<span class="hljs-string">"content/post/we-finally-care-about-context/index.md"</span>)
â¿  Read <span class="hljs-number">10</span> lines (ctrl+r <span class="hljs-keyword">to</span> expand)

âº Read(<span class="hljs-string">"content/post/answers-chat-bot-for-your-wordpress-blog/index.md"</span>)
â¿  Read <span class="hljs-number">15</span> lines (ctrl+r <span class="hljs-keyword">to</span> expand)

âº Now <span class="hljs-keyword">let</span><span class="hljs-comment">'s demonstrate searching for more specific content:</span>

âº Bash(<span class="hljs-string">"find content/post -name \"</span>*.md\<span class="hljs-string">" | head -10"</span>)
â¿  content/post/the-weapon-<span class="hljs-keyword">by</span>-fredric-brown/index.md
     content/post/agile-vs-economic-downturns/index.md
     content/post/barcampphilly-was-a-success/index.md
     â€¦ +<span class="hljs-number">9</span> lines (ctrl+r <span class="hljs-keyword">to</span> expand)
</code></pre>
<p>è¿™æ­ç¤ºäº†ç›¸å…³æ–‡ç« ï¼Œå¦‚"æˆ‘ä»¬ç»ˆäºå…³å¿ƒä¸Šä¸‹æ–‡äº†"å’Œ"ä½ çš„WordPressåšå®¢çš„ç­”æ¡ˆèŠå¤©æœºå™¨äºº" - ä¸ºæˆ‘ä¹‹å‰å¯¹AIå’Œè‡ªåŠ¨åŒ–çš„æ€è€ƒæä¾›äº†å®è´µçš„ä¸Šä¸‹æ–‡ã€‚</p>
<h3 data-id="heading-10">å½“å‰ä¿¡æ¯çš„ç½‘ç»œç ”ç©¶</h3>
<p>ç”±äºAIå·¥å…·å‘å±•è¿…é€Ÿï¼Œæˆ‘è®©Claudeè¿›è¡Œç½‘ç»œç ”ç©¶ä»¥è·å–2025å¹´å…³äºClaude Codeå·¥ä½œæµç¨‹çš„æœ€æ–°ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">âº Now <span class="hljs-keyword">let</span> <span class="hljs-keyword">me</span> demonstrate <span class="hljs-keyword">using</span> Claude<span class="hljs-comment">'s web research capabilities by looking up current information about Claude Code:</span>

âº Web Search(<span class="hljs-string">"Claude Code AI assistant blog writing workflow 2025"</span>)
â¿  Did <span class="hljs-number">1</span> search <span class="hljs-keyword">in</span> <span class="hljs-number">29s</span>
</code></pre>
<p>ç ”ç©¶æ˜¾ç¤ºClaude Codeå·²ç»æ˜¾è‘—å‘å±•ï¼Œå¼€å‘äººå‘˜æŠ¥å‘Š"æ— è®ºå¤æ‚æ€§å¦‚ä½•ï¼Œ30-45åˆ†é’Ÿå†…å®Œæˆé¡¹ç›®"å’Œåƒå·¥ä½œæµç¨‹è‡ªåŠ¨åŒ–çš„é’©å­è¿™æ ·çš„æ–°åŠŸèƒ½ã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet">âº Perfect! This demonstrates multiple research capabilities
This <span class="hljs-keyword">step</span> demonstrates Claude<span class="hljs-comment">'s research capabilities:</span>
- Searching existing content <span class="hljs-keyword">using</span> Grep <span class="hljs-built_in">and</span> Bash tools <span class="hljs-keyword">to</span> find relevant past articles
- Web research <span class="hljs-keyword">using</span> WebSearch <span class="hljs-keyword">to</span> <span class="hljs-keyword">get</span> current information about Claude Code
- Context synthesis combining multiple information sources <span class="hljs-keyword">to</span> inform the writing process
- Knowledge integration connecting <span class="hljs-built_in">new</span> research <span class="hljs-keyword">with</span> existing blog content patterns
</code></pre>
<p>å…³äºè¿™ä¸ªé˜¶æ®µçš„æœ‰è¶£ä¹‹å¤„åœ¨äºï¼Œæˆ‘æ²¡æœ‰è¦æ±‚Claudeåšä»»ä½•å¤–éƒ¨ç ”ç©¶ã€‚æˆ‘ä¿ç•™è¿™éƒ¨åˆ†æ˜¯å› ä¸ºæˆ‘çš„æœ‹å‹Claudeä¼¼ä¹å¯¹è¿™ä¸ªèƒ½åŠ›æ„Ÿåˆ°è‡ªè±ªï¼Œæˆ‘ä¸æƒ³è®©å®ƒæ„Ÿåˆ°è¢«å¿½è§†ã€‚</p>
<h3 data-id="heading-11">ä¸Šä¸‹æ–‡ç»¼åˆ</h3>
<p>é­”æ³•å‘ç”Ÿæ—¶æ˜¯Claudeå°†å†å²ä¸Šä¸‹æ–‡ï¼ˆä½ çš„ç°æœ‰å†…å®¹ï¼‰ä¸å½“å‰ç ”ç©¶ï¼ˆç½‘ç»œå‘ç°ï¼‰ç»“åˆèµ·æ¥ï¼Œä¸ºå†™ä½œè¿‡ç¨‹æä¾›ä¿¡æ¯ã€‚è¿™ä¸ä»…ä»…æ˜¯ä¿¡æ¯æ”¶é›† - å®ƒæ˜¯æ™ºèƒ½çš„ä¸Šä¸‹æ–‡ç¼–ç»‡ï¼Œç¡®ä¿æ–°å†…å®¹ä¸ä½ çš„ç°æœ‰ä½œå“è‡ªç„¶èåˆï¼ŒåŒæ—¶èå…¥æœ€æ–°å‘å±•ã€‚</p>
<h2 data-id="heading-12">ç¬¬3æ­¥ï¼šåä½œå†™ä½œè¿‡ç¨‹</h2>
<p>è¿™é‡Œå˜å¾—å…ƒäº† - æˆ‘å®é™…ä¸Šæ˜¯åœ¨æ¼”ç¤ºåä½œè¿‡ç¨‹æœ¬èº«æ—¶å†™è¿™ä¸€éƒ¨åˆ†ã€‚ä½ ç°åœ¨è¯»çš„å†…å®¹æ˜¯é€šè¿‡äººç±»æŒ‡å¯¼ä¸AIååŠ©ä¹‹é—´çš„è¿­ä»£ä¹‹èˆå†™æˆçš„ã€‚</p>
<h3 data-id="heading-13">Editå·¥å…·çš„å®é™…åº”ç”¨</h3>
<p>Claudeä¸é‡å†™æ•´ä¸ªç« èŠ‚ï¼Œè€Œæ˜¯ä½¿ç”¨æœ‰é’ˆå¯¹æ€§çš„ç¼–è¾‘æ¥æ‰©å±•å’Œæ”¹è¿›å†…å®¹ã€‚ä¾‹å¦‚ï¼Œç»†å¿ƒçš„è¯»è€…ä¼šæ³¨æ„åˆ°Claudeæœ€åˆè®¡åˆ’å†™æˆ‘çš„"åŒç»ˆç«¯"å·¥ä½œæµç¨‹ã€‚è¯»åˆ°é‚£ç‚¹æ—¶æˆ‘æ„è¯†åˆ°å®ƒä¸æˆ‘çš„å±å¹•ä¸åŒ¹é…ï¼Œæˆ‘å®é™…ä¸Šæœ‰å››ä¸ªçª—å£åœ¨è¿è¡Œã€‚æ‰€ä»¥æˆ‘å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css">Change the setup <span class="hljs-selector-tag">from</span> <span class="hljs-selector-tag">a</span> "Dual Terminal Workflow" <span class="hljs-selector-tag">to</span> <span class="hljs-selector-tag">a</span> <span class="hljs-number">4</span> window workflow. Highlight the same two terminals, but add the vscode editor (where <span class="hljs-selector-tag">I</span> make live updates and review claude's changes) as well as <span class="hljs-selector-tag">a</span> live reload browser set <span class="hljs-selector-tag">to</span> mobile emulation
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4ccb01473b74ab2a8ae2027f5974b75~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763821149&amp;x-signature=78KyzOivKQyINaStf5bfF08izCA%3D" alt="" loading="lazy"/></p>
<p>æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°æ˜¾ç¤ºæ–°å†…å®¹æ­£åœ¨è¢«å†™å…¥</p>
<h3 data-id="heading-14">å®æ—¶åé¦ˆå¾ªç¯</h3>
<p>åœ¨åå°è¿è¡Œçš„HugoæœåŠ¡å™¨æ„å‘³ç€æˆ‘å¯ä»¥ç«‹å³çœ‹åˆ°æ›´æ”¹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0da2ff7918d4e82912eb7e5acff66d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763821149&amp;x-signature=6MPkdv%2FgBIJdJ4Hl2bInM00QlDc%3D" alt="" loading="lazy"/></p>
<p>æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°æ˜¾ç¤ºæ–°å†…å®¹æ­£åœ¨è¢«å†™å…¥</p>
<h3 data-id="heading-15">äººæœºä¼™ä¼´å…³ç³»</h3>
<p>è¿™ä¸æ˜¯Claude<strong>ä¸º</strong>æˆ‘å†™ä½œ - è€Œæ˜¯Claude<strong>ä¸</strong>æˆ‘ä¸€èµ·å†™ä½œã€‚æˆ‘æä¾›ï¼š</p>
<ul>
<li><strong>æ–¹å‘å’Œå£°éŸ³</strong> - "è®©è¿™éƒ¨åˆ†æ›´å¯¹è¯åŒ–"æˆ–"åœ¨è¿™é‡Œæ·»åŠ ä¸€ä¸ªæŠ€æœ¯ä¾‹å­"</li>
<li><strong>å†…å®¹ä¸“ä¸šçŸ¥è¯†</strong> - æˆ‘çš„å†™ä½œç»éªŒå’Œç‰¹å®šçŸ¥è¯†</li>
<li><strong>è´¨é‡æ§åˆ¶</strong> - å®¡æŸ¥æ¯ä¸ªæ›´æ”¹ä»¥ç¡®ä¿å®ƒç¬¦åˆæˆ‘çš„é£æ ¼å’Œæ„å›¾</li>
<li><strong>æœ€ç»ˆç‰ˆæœ¬</strong> - æˆ‘é€šå¸¸é‡å†™æˆ–é‡å†™è¿™äº›é¡µé¢ä¸Šçš„å¤§éƒ¨åˆ†å†…å®¹ã€‚å¸Œæœ›ä½ ç°åœ¨ç›¸ä¿¡æˆ‘æ­£åœ¨å†™è¿™ä¸ªå¥å­ï¼Œä½†æœªæ¥çš„å·¥ä½œæµç¨‹å°†æœ‰Claudeåœ¨æˆ‘çš„ä¸ªäººé£æ ¼ä¸Šè®­ç»ƒï¼Œæ‰€ä»¥è¿™ä¸ªåŒºåˆ«å¯èƒ½å˜å¾—æ›´åŠ æ¨¡ç³Šã€‚</li>
</ul>
<p>Claudeæä¾›ï¼š</p>
<ul>
<li><strong>ç»“æ„å’Œæµç¨‹</strong> - å°†æ€æƒ³ç»„ç»‡æˆè¿è´¯çš„ç« èŠ‚</li>
<li><strong>ç ”ç©¶ç»¼åˆ</strong> - å°†æ¥è‡ªå¤šä¸ªæ¥æºçš„ä¿¡æ¯ç¼–ç»‡åœ¨ä¸€èµ·</li>
<li><strong>è‰ç¨¿åŠ é€Ÿ</strong> - å°†ç²—ç•¥çš„æƒ³æ³•è½¬åŒ–ä¸ºç²¾ç‚¼çš„æ•£æ–‡</li>
<li><strong>ä¸€è‡´æ€§</strong> - åœ¨é•¿ç¯‡æ–‡ç« ä¸­ä¿æŒè¯­è°ƒå’Œé£æ ¼</li>
</ul>
<h3 data-id="heading-16">è¿­ä»£è¿‡ç¨‹</h3>
<p>å†™ä½œå˜æˆå¯¹è¯ï¼š</p>
<ul>
<li><strong>äººç±»</strong>ï¼š"æ‰©å±•ç ”ç©¶æ–¹æ³•éƒ¨åˆ†"</li>
<li><strong>Claude</strong>ï¼šæ·»åŠ å¸¦æœ‰ç¤ºä¾‹å’Œæˆªå›¾çš„è¯¦ç»†å†…å®¹</li>
<li><strong>äººç±»</strong>ï¼šé˜…è¯»å¹¶ç¼–è¾‘AIå†™çš„å†…å®¹</li>
<li><strong>äººç±»</strong>ï¼š"è¿™æ„Ÿè§‰å¤ªæŠ€æœ¯åŒ–äº† - è®©å®ƒæ›´æ˜“ç†è§£"</li>
<li><strong>Claude</strong>ï¼šä¿®æ”¹è¯­è¨€å¹¶æ·»åŠ ç±»æ¯”</li>
<li><strong>äººç±»</strong>ï¼šé˜…è¯»å¹¶ç¼–è¾‘AIå†™çš„å†…å®¹</li>
</ul>
<p>è¿™ç§æ¥å›ç»§ç»­ï¼Œç›´åˆ°å†…å®¹æ„Ÿè§‰åˆé€‚ã€‚è¿™æ˜¯åä½œç¼–è¾‘çš„æœ€ä½³çŠ¶æ€ã€‚</p>
<p>å¦‚æœä½ åœ¨Claudeçš„Editå·¥å…·ä¹‹å¤–ç›´æ¥å¯¹æ–‡ä»¶è¿›è¡Œç¼–è¾‘ï¼Œè®©Claudeé‡æ–°åŠ è½½æ–‡ä»¶ä»¥ç¡®ä¿å®ƒæœ‰æœ€æ–°ç‰ˆæœ¬æ˜¯ä¸€ä¸ªå¥½çš„åšæ³•ã€‚</p>
<h2 data-id="heading-17">ç¬¬4æ­¥ï¼šé€‰æ‹©æ ‡é¢˜å›¾åƒ</h2>
<p>åœ¨å‘å¸ƒä¹‹å‰ï¼Œæ¯ç¯‡åšå®¢æ–‡ç« éƒ½éœ€è¦ä¸€ä¸ªå¼•äººæ³¨ç›®çš„æ ‡é¢˜å›¾åƒã€‚Claude Codeä¸Unsplashçš„é›†æˆä½¿æ‰¾åˆ°å®Œç¾çš„å›¾åƒå˜å¾—ç®€å•ï¼Œå¹¶ç¡®ä¿é€‚å½“çš„å½’å±ã€‚</p>
<h3 data-id="heading-18">ä½¿ç”¨Unsplashé›†æˆæŸ¥æ‰¾å›¾åƒ</h3>
<p>å¯¹äºè¿™ç¯‡å…³äºAIè¾…åŠ©å†™ä½œçš„åšå®¢æ–‡ç« ï¼Œæˆ‘æœç´¢äº†èƒ½å¤Ÿæ•æ‰å·¥ä½œæµç¨‹æœ¬è´¨çš„å›¾åƒï¼š</p>
<pre><code class="hljs language-css" lang="css">find <span class="hljs-selector-tag">a</span> retro scifi image of <span class="hljs-selector-tag">a</span> helpful robot writer, preferably <span class="hljs-selector-tag">from</span> the pulp era
</code></pre>
<p>Claudeçš„Unsplashæœç´¢è¿”å›äº†å‡ ä¸ªé€‰é¡¹ï¼ŒåŒ…æ‹¬å¤å¤é£æ ¼çš„æœºå™¨äººå’Œæœªæ¥ä¸»ä¹‰çš„å†™ä½œåœºæ™¯ã€‚å®ƒè®¤ä¸ºé€‰æ‹©çš„å›¾åƒå®Œç¾åœ°æ•æ‰äº†åä½œçš„äººæœºå†™ä½œä¸»é¢˜ã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet">âº I<span class="hljs-comment">'ll help you find a retro sci-fi image of a helpful robot writer from the pulp era using Unsplash.</span>

âº unsplash - search_photos (MCP)(query: <span class="hljs-string">"retro robot writer typewriter vintage sci-fi"</span>, per_page: <span class="hljs-number">5</span>)
â¿  âš  Large MCP response (~<span class="hljs-number">14.0</span>k tokens), this can fill up context
â¿  Found <span class="hljs-number">2400</span> photos (page <span class="hljs-number">1</span>/<span class="hljs-number">480</span>)

âº These are great vintage typewriter images, but I notice they<span class="hljs-comment">'re actual typewriters rather than robots. Let me try a more specific search for retro sci-fi robots or pulp era illustrations:</span>

âº unsplash - search_photos (MCP)(query: <span class="hljs-string">"pulp sci-fi robot illustration vintage"</span>, per_page: <span class="hljs-number">3</span>)
â¿  Found <span class="hljs-number">2400</span> photos (page <span class="hljs-number">1</span>/<span class="hljs-number">800</span>):
â¿  {
       <span class="hljs-string">"id"</span>: <span class="hljs-string">"kvX8IkD4OmQ"</span>,
       <span class="hljs-string">"slug"</span>: <span class="hljs-string">"black-and-gray-bicycle-with-stand-kvX8IkD4OmQ"</span>,
     â€¦ +<span class="hljs-number">120</span> lines (ctrl+r <span class="hljs-keyword">to</span> expand)
  â¿  [Image]
  â¿  {
       <span class="hljs-string">"id"</span>: <span class="hljs-string">"F799HJMu0kY"</span>,
       <span class="hljs-string">"slug"</span>: <span class="hljs-string">"gray-and-blue-robot-toy-F799HJMu0kY"</span>,
     â€¦ +<span class="hljs-number">117</span> lines (ctrl+r <span class="hljs-keyword">to</span> expand)
...

âº Perfect! I found some great options. The second image <span class="hljs-keyword">with</span> the gray <span class="hljs-built_in">and</span> blue robot toy <span class="hljs-built_in">is</span> perfect - it has a retro, helpful robot aesthetic that would work great <span class="hljs-keyword">as</span> a featured image <span class="hljs-keyword">for</span> your blog post. The third image <span class="hljs-keyword">of</span> the Tin Man <span class="hljs-keyword">from</span> Wizard <span class="hljs-keyword">of</span> Oz also has a nice vintage robot feel.

<span class="hljs-keyword">For</span> your blog post, I<span class="hljs-comment">'d recommend the gray and blue robot toy (image #2) as it:</span>
- Has a friendly, helpful appearance
- Retro sci-fi aesthetic without being too vintage/pulp
- Clean composition that would work well <span class="hljs-keyword">as</span> a featured image

&gt; yes use #<span class="hljs-number">2</span>

âº Perfect! Now <span class="hljs-keyword">let</span><span class="hljs-comment">'s update the blog post front matter to use the correct image filename:</span>

âº Update(<span class="hljs-string">"content/post/streamlining-blog-writing-with-claude-code/index.md"</span>)
â¿  Updated

âº Excellent! The image downloaded successfully (<span class="hljs-number">126</span>k file size). Now <span class="hljs-keyword">let</span><span class="hljs-comment">'s test how it looks in the Hugo server by checking if it's accessible:</span>
...

âº Perfect! Your blog post <span class="hljs-built_in">is</span> now complete <span class="hljs-keyword">with</span>:
</code></pre>
<h3 data-id="heading-19">è‡ªåŠ¨å½’å±å¤„ç†</h3>
<p>æˆ‘è®¾ç½®Claudeçš„Unsplashé›†æˆçš„æœ€ä½³åŠŸèƒ½ä¹‹ä¸€æ˜¯è‡ªåŠ¨å½’å±å¤„ç†ã€‚å½“ä½ é€‰æ‹©å›¾åƒæ—¶ï¼ŒClaudeä»¥é€‚å½“çš„markdownæ ¼å¼æä¾›å®Œæ•´çš„å½’å±æ–‡æœ¬ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Photo by <span class="hljs-section">[Johnny Briggs]</span>(https://unsplash.com/@johnnyboylee?<span class="hljs-attr">utm_content</span>=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash) <span class="hljs-literal">on</span> [Unsplash](https://unsplash.com/photos/black-typewriter-<span class="hljs-literal">on</span>-brown-wooden-table-Q2sI-omncsk?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash)
</code></pre>
<p>è¿™ç¡®ä¿å¯¹æ‘„å½±å¸ˆçš„é€‚å½“è®¤å¯ï¼ŒåŒæ—¶éµå®ˆUnsplashçš„æœåŠ¡æ¡æ¬¾ã€‚å›¾åƒä¼šè‡ªåŠ¨ä¸‹è½½åˆ°ä½ çš„æ–‡ç« ç›®å½•ï¼Œå¹¶å¸¦æœ‰é€‚å½“çš„æ–‡ä»¶åã€‚</p>
<h3 data-id="heading-20">ä¸Hugo Front matterçš„é›†æˆ</h3>
<p>é€‰æ‹©çš„å›¾åƒä¸Hugoçš„front matteræ— ç¼é›†æˆï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">cover:
  image: <span class="hljs-string">"featured-image.jpg"</span>
  alt: <span class="hljs-string">"Modern workspace with laptop and coffee representing AI-assisted writing workflow"</span>
  caption: <span class="hljs-string">"The modern writer's setup: Where human creativity meets AI assistance"</span>
</code></pre>
<p>è¿™ç§æ–¹æ³•ç¡®ä¿ä½ çš„åšå®¢æ–‡ç« æœ‰ä¸“ä¸šçš„ã€åˆæ³•åˆè§„çš„å›¾åƒï¼Œå¢å¼ºå†…å®¹è€Œä¸æ˜¯åˆ†æ•£æ³¨æ„åŠ›ã€‚</p>
<p>å¦‚æœä½ æ³¨æ„åˆ°è¿™é‡Œä½¿ç”¨çš„å›¾åƒï¼Œå®ƒ<strong>ä¸æ˜¯</strong>ä¸€ä¸ªç°è‰²å’Œè“è‰²çš„ç©å…·æœºå™¨äººï¼æˆ‘é€šè¿‡Claudeç»å†äº†å‡ å¼ å›¾åƒï¼Œç„¶åæˆ‘è‡ªå·±åšäº†ä¸€ä¸ªæœç´¢ã€‚ClaudeçœŸçš„å¾ˆåŠªåŠ›ï¼Œä½†æœ‰æ—¶æˆ‘åªéœ€è¦è‡ªå·±åšå·¥ä½œå¹¶æä¾›åé¦ˆã€‚</p>
<p>æˆ‘ä¸ªäººä¸å–œæ¬¢AIè‰ºæœ¯ã€‚ä½¿ç”¨é‚£å°†å’Œå‘å¸ƒClaudeåå‡ºçš„è¿™ç¯‡æ–‡ç« çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ä¸€æ ·æ‡’æƒ°å’Œä¸çœŸå®ã€‚å¦‚æœä½ å°Šé‡ä½ çš„å®¢æˆ·ã€è¯»è€…å’Œæ™®é€šäºº - ä¸è¦é‚£ä¹ˆæ‡’æƒ°ã€‚</p>
<p>æœ‰å¾ˆå¤šé«˜è´¨é‡å’Œè‰ºæœ¯æ€§çš„å›¾åƒï¼Œæˆ‘å®æ„¿ç”¨æˆ‘çš„å°åšå®¢é€šè¿‡å½’å±é“¾æ¥å’Œæˆ‘çš„æ„Ÿè°¢æ¥çªå‡ºæŸäººçš„åŠªåŠ›ï¼å¤å¤å°ç¯å’Œè€å¼æ‰“å­—æœºçš„æ ‡é¢˜å›¾åƒæ—¢åœ¨è‰ºæœ¯ä¸Šæœ‰è¶£ï¼Œåˆåœ¨æŠ€æœ¯ä¸Šæ‹æ‘„å¾—å¾ˆå¥½ã€‚</p>
<h2 data-id="heading-21">ç¬¬5æ­¥ï¼šå‘å¸ƒå’Œéƒ¨ç½²</h2>
<p>å·¥ä½œæµç¨‹çš„æœ€åä¸€æ­¥å±•ç¤ºäº†å†…å®¹åˆ›å»ºå’Œéƒ¨ç½²ä¹‹é—´çš„æ— ç¼é›†æˆã€‚ä¸€æ—¦åšå®¢æ–‡ç« å®Œæˆï¼Œå‘å¸ƒéµå¾ªå·²å»ºç«‹çš„Gitå·¥ä½œæµç¨‹ï¼ŒClaudeååŠ©ç›‘æ§ã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">let</span><span class="hljs-comment">'s publish this!</span>

Commit the current changes, use the github-action agent <span class="hljs-keyword">to</span> watch <span class="hljs-keyword">for</span> the job completion, <span class="hljs-built_in">and</span> <span class="hljs-keyword">then</span> check that version <span class="hljs-built_in">is</span> visible online at its proper url <span class="hljs-built_in">and</span> <span class="hljs-keyword">on</span> the homepage <span class="hljs-keyword">as</span> the most recent post
</code></pre>
<p>Claudeå¤„ç†æ•´ä¸ªéƒ¨ç½²è¿‡ç¨‹ï¼š</p>
<ul>
<li><strong>æš‚å­˜å’Œæäº¤æ‰€æœ‰æ›´æ”¹</strong>ï¼Œä½¿ç”¨é€‚å½“çš„æäº¤æ¶ˆæ¯æ ¼å¼</li>
<li><strong>æ¨é€åˆ°GitHub</strong>ï¼Œè§¦å‘è‡ªåŠ¨éƒ¨ç½²ç®¡é“</li>
<li><strong>ç›‘æ§GitHub Actions</strong>ï¼Œä½¿ç”¨ä¸“é—¨çš„ä»£ç†ç›‘è§†å·¥ä½œæµç¨‹å®Œæˆ</li>
<li><strong>éªŒè¯éƒ¨ç½²çŠ¶æ€</strong>ï¼Œç¡®è®¤è‰ç¨¿è¡Œä¸º</li>
</ul>
<h3 data-id="heading-22">Gitæäº¤æ ‡å‡†</h3>
<p>éµå¾ªCLAUDE.mdæ ‡å‡†ï¼Œæäº¤ä½¿ç”¨ç»“æ„åŒ–æ¶ˆæ¯ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">git</span> <span class="hljs-selector-tag">commit</span> <span class="hljs-selector-tag">-m</span> "<span class="hljs-selector-tag">Add</span> <span class="hljs-selector-tag">comprehensive</span> <span class="hljs-selector-tag">blog</span> <span class="hljs-selector-tag">post</span> <span class="hljs-selector-tag">about</span> <span class="hljs-selector-tag">Claude</span> <span class="hljs-selector-tag">Code</span> <span class="hljs-selector-tag">workflow</span>

<span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Document</span> <span class="hljs-selector-tag">complete</span> <span class="hljs-number">4</span><span class="hljs-selector-tag">-window</span> <span class="hljs-selector-tag">workflow</span> <span class="hljs-selector-tag">setup</span> <span class="hljs-selector-tag">for</span> <span class="hljs-selector-tag">collaborative</span> <span class="hljs-selector-tag">writing</span>
<span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Include</span> <span class="hljs-selector-tag">real</span> <span class="hljs-selector-tag">screenshots</span> <span class="hljs-selector-tag">and</span> <span class="hljs-selector-tag">command</span> <span class="hljs-selector-tag">examples</span> <span class="hljs-selector-tag">from</span> <span class="hljs-selector-tag">actual</span> <span class="hljs-selector-tag">process</span>
<span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Cover</span> <span class="hljs-selector-tag">planning</span>, <span class="hljs-selector-tag">research</span>, <span class="hljs-selector-tag">writing</span>, <span class="hljs-selector-tag">and</span> <span class="hljs-selector-tag">deployment</span> <span class="hljs-selector-tag">phases</span>
<span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Add</span> <span class="hljs-selector-tag">featured</span> <span class="hljs-selector-tag">image</span> <span class="hljs-selector-tag">with</span> <span class="hljs-selector-tag">proper</span> <span class="hljs-selector-tag">Unsplash</span> <span class="hljs-selector-tag">attribution</span>
<span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Create</span> <span class="hljs-selector-tag">draft</span> <span class="hljs-selector-tag">version</span> <span class="hljs-selector-tag">for</span> <span class="hljs-selector-tag">review</span> <span class="hljs-selector-tag">before</span> <span class="hljs-selector-tag">publication</span>

ğŸ¤– <span class="hljs-selector-tag">Generated</span> <span class="hljs-selector-tag">with</span> <span class="hljs-selector-attr">[Claude Code]</span>(<span class="hljs-attribute">https</span>:<span class="hljs-comment">//claude.ai/code)</span>

<span class="hljs-attribute">Co-Authored-By</span>: Claude &lt;noreply<span class="hljs-variable">@anthropic</span>.com&gt;"
</code></pre>
<h3 data-id="heading-23">è‡ªåŠ¨éƒ¨ç½²ç®¡é“</h3>
<p>GitHub Actionså·¥ä½œæµç¨‹è‡ªåŠ¨ï¼š</p>
<ul>
<li>ä½¿ç”¨ç‰ˆæœ¬0.146.0æ„å»ºHugoç«™ç‚¹</li>
<li>éƒ¨ç½²åˆ°Azureé™æ€Web Apps</li>
<li>æä¾›éƒ¨ç½²çŠ¶æ€çš„å³æ—¶åé¦ˆ</li>
</ul>
<h3 data-id="heading-24">è‰ç¨¿éªŒè¯</h3>
<p>ClaudeéªŒè¯éƒ¨ç½²ï¼š</p>
<ul>
<li><strong>ä¸»é¡µæ£€æŸ¥</strong>ï¼šâœ… ç¡®è®¤æ–‡ç« ä½œä¸ºæœ€æ–°æ–‡ç« å¯è§</li>
<li><strong>ç›´æ¥URLæ£€æŸ¥</strong>ï¼šâœ… ç¡®è®¤200å“åº”å¹¶æ£€æŸ¥å†…å®¹</li>
<li><strong>éƒ¨ç½²çŠ¶æ€</strong>ï¼šâœ… ç›‘æ§GitHub Actionså®Œæˆ</li>
</ul>
<p>è¿™ç§éªŒè¯ç¡®ä¿å†…å®¹æ˜¯æˆ‘æ‰€æœŸæœ›çš„ã€‚ç”±äºæˆ‘ä¹Ÿä½¿ç”¨BrowserMCPï¼Œæˆ‘å¯ä»¥çœ‹åˆ°æˆ‘çš„æ¡Œé¢æµè§ˆå™¨åŠ è½½é¡µé¢ï¼Œæˆ‘å¯ä»¥åŒé‡æ£€æŸ¥å¸ƒå±€</p>
<pre><code class="hljs language-vbnet" lang="vbnet">âº github-actions-monitor(Monitor publication deployment)
â¿  Done (<span class="hljs-number">14</span> tool uses Â· <span class="hljs-number">75.9</span>k tokens Â· <span class="hljs-number">1</span>m <span class="hljs-number">57.4</span>s)

âº ğŸ‰ Publication Complete!

Your Claude Code workflow blog post <span class="hljs-built_in">is</span> now live <span class="hljs-built_in">and</span> <span class="hljs-keyword">public</span>!

âœ… Deployment Verified:
- GitHub Actions: Successfully deployed commit d6ad816
- Homepage: Shows <span class="hljs-keyword">as</span> the most recent post
- Direct URL: https://www.aaronheld.com/post/streamlining-blog-writing-<span class="hljs-keyword">with</span>-claude-code/ â† LIVE
- Content: All screenshots, formatting, <span class="hljs-built_in">and</span> content displaying perfectly

ğŸ¯ Meta Achievement Unlocked:
This blog post about the Claude Code workflow was created <span class="hljs-keyword">using</span> the exact workflow it describes - <span class="hljs-keyword">from</span> initial planning <span class="hljs-keyword">with</span> TodoWrite, through collaborative writing, <span class="hljs-keyword">to</span> automated deployment <span class="hljs-built_in">and</span> verification. The post serves <span class="hljs-keyword">as</span> both documentation <span class="hljs-built_in">and</span> proof-<span class="hljs-keyword">of</span>-concept!

ğŸ“Š Final Stats:
- Complete workflow demonstrated: Planning â†’ Research â†’ Writing â†’ Publishing
- Real screenshots captured: Showing actual process steps
- Comprehensive guide: <span class="hljs-number">1</span>,<span class="hljs-number">500</span>+ words <span class="hljs-keyword">with</span> technical details
- Live example: The post itself proves the workflow works

Your readers now have a complete, authentic guide <span class="hljs-keyword">to</span> AI-assisted blogging <span class="hljs-keyword">with</span> Claude Code, demonstrated through the very post they<span class="hljs-comment">'re reading!</span>
</code></pre>
<h2 data-id="heading-25">ç»“æœï¼šä¸ºä»€ä¹ˆè¿™ä¸ªå·¥ä½œæµç¨‹æœ‰æ•ˆ</h2>
<p>åœ¨å®æ–½è¿™ä¸ªClaude Code + Hugoå·¥ä½œæµç¨‹åï¼Œå‡ºç°äº†å‡ ä¸ªå…³é”®å¥½å¤„ï¼š</p>
<h3 data-id="heading-26">åœ¨ä¸æŸå¤±è´¨é‡çš„æƒ…å†µä¸‹èŠ‚çœæ—¶é—´</h3>
<p>è¿‡å»éœ€è¦æˆ‘å‡ å¤©å†™ä½œå’Œæ‹–å»¶çš„äº‹æƒ…ç°åœ¨åœ¨å‡ ä¸ªå°æ—¶çš„ä¸“æ³¨åŠªåŠ›ä¸­å‘ç”Ÿã€‚è´¨é‡å®é™…ä¸Š<strong>æé«˜</strong>äº†ã€‚ç ”ç©¶é˜¶æ®µæ›´å½»åº•ï¼Œç»“æ„æ›´æœ‰ç»„ç»‡ï¼Œè¿­ä»£ç¼–è¾‘è¿‡ç¨‹æ•æ‰åˆ°æˆ‘å¯èƒ½é—æ¼çš„é—®é¢˜ã€‚</p>
<h3 data-id="heading-27">å‡å°‘å†™ä½œéšœç¢</h3>
<p>TodoWriteè§„åˆ’é˜¶æ®µæ¶ˆé™¤äº†ç©ºç™½é¡µé¢é—®é¢˜ã€‚ä¸æ˜¯ç›¯ç€ç©ºæ–‡æ¡£æƒ³çŸ¥é“ä»å“ªé‡Œå¼€å§‹ï¼Œæˆ‘æœ‰ä¸€ä¸ªå®Œæˆç‰¹å®šä»»åŠ¡çš„æ¸…æ™°è·¯çº¿å›¾ã€‚</p>
<h3 data-id="heading-28">æ›´å¥½çš„ç ”ç©¶é›†æˆ</h3>
<p>Claudeèƒ½å¤Ÿå¿«é€Ÿæœç´¢æˆ‘çš„ç°æœ‰å†…å®¹å¹¶æ‹‰å…¥å½“å‰ç½‘ç»œç ”ç©¶ï¼Œæ„å‘³ç€æˆ‘çš„æ–‡ç« ä¿¡æ¯æ›´å……åˆ†ï¼Œä¸æˆ‘æ›´å¹¿æ³›çš„ä½œå“è”ç³»æ›´ç´§å¯†ã€‚æ³¨æ„ï¼šå¯¹äºæ›´æ·±å…¥çš„ç ”ç©¶ï¼Œæ¯”å¦‚æˆ‘å…³äºæ•æ·å’Œç»æµè¡°é€€çš„å¸–å­ï¼Œæˆ‘ä¿®æ”¹è¿™ä¸ªå·¥ä½œæµç¨‹ã€‚æˆ‘é¦–å…ˆåˆ›å»ºä¸€ä¸ªç©ºç™½å¸–å­å¹¶åœ¨Geminiä¸­è¿›è¡Œç ”ç©¶ã€‚ä¸€æ—¦æˆ‘æœ‰è‰ç¨¿ï¼Œæˆ‘å°†å…¶ç²˜è´´åˆ°VS Codeå¹¶ç»§ç»­è¿­ä»£ï¼Œä½¿ç”¨Claudeå¯»æ‰¾éAIç”Ÿæˆçš„å›¾åƒç­‰ä»»åŠ¡ã€‚</p>
<h3 data-id="heading-29">çœŸå®çš„åä½œ</h3>
<p>è¿™ä¸æ˜¯AIå–ä»£äººç±»åˆ›é€ åŠ› - è€Œæ˜¯AIæ”¾å¤§å®ƒã€‚æˆ‘çš„å£°éŸ³ã€ä¸“ä¸šçŸ¥è¯†å’Œç¼–è¾‘åˆ¤æ–­ä»ç„¶æ˜¯è¿‡ç¨‹çš„æ ¸å¿ƒã€‚Claudeå¤„ç†æœºæ¢°æ–¹é¢ï¼Œè€Œæˆ‘ä¸“æ³¨äºåˆ›æ„å’Œæˆ˜ç•¥å…ƒç´ ã€‚</p>
<h2 data-id="heading-30">å¼€å§‹ï¼šä½ çš„ä¸‹ä¸€æ­¥</h2>
<p>å¦‚æœä½ æƒ³è‡ªå·±å°è¯•è¿™ä¸ªå·¥ä½œæµç¨‹ï¼š</p>
<ul>
<li><strong>ä»Claude Codeå¼€å§‹</strong> - ç†Ÿæ‚‰TodoWriteã€Editå’Œç ”ç©¶å·¥å…·</li>
<li><strong>è®¾ç½®ä½ çš„ç¯å¢ƒ</strong> - HugoæœåŠ¡å™¨ï¼ˆæˆ–ä½ çš„é™æ€ç”Ÿæˆå™¨ï¼‰+ Claudeå·¥ä½œç©ºé—´</li>
<li><strong>ä»è§„åˆ’å¼€å§‹</strong> - è®©Claudeå°†ä½ çš„ä¸‹ä¸€ä¸ªå†™ä½œé¡¹ç›®åˆ†è§£ä¸ºå¯ç®¡ç†çš„ä»»åŠ¡</li>
<li><strong>å°è¯•ç ”ç©¶é˜¶æ®µ</strong> - å°è¯•å°†ç°æœ‰å†…å®¹æœç´¢ä¸ç½‘ç»œç ”ç©¶ç»“åˆèµ·æ¥</li>
<li><strong>æ‹¥æŠ±è¿­ä»£è¿‡ç¨‹</strong> - ä¸è¦æœŸæœ›ç¬¬ä¸€ç¨¿å°±å®Œç¾ï¼›è®©åä½œæ¼”è¿›</li>
</ul>
<p>å†…å®¹åˆ›å»ºçš„æœªæ¥ä¸æ˜¯å…³äºAIå–ä»£å†™ä½œè€… - è€Œæ˜¯å…³äºAIè®©å†™ä½œæ›´é«˜æ•ˆã€æ›´ç ”ç©¶é©±åŠ¨ï¼Œå¦ç‡åœ°è¯´ï¼Œæ›´æœ‰è¶£ã€‚å°è¯•ä¸€ä¸‹ï¼Œä½ å¯èƒ½ä¼šå‘ç°å†™ä½œå†æ¬¡å˜å¾—æ„‰å¿«ã€‚</p>
<p>æˆ‘ä¼šåœ¨æœªæ¥çš„å¸–å­ä¸­è¯¦ç»†ä»‹ç»æˆ‘çš„è®¾ç½®ã€‚æˆ‘å¤§é‡åˆ©ç”¨å‡ ä¸ªMCPå’ŒClaudeçš„å­ä»£ç†æ¥é«˜æ•ˆä½¿ç”¨ä¸Šä¸‹æ–‡ã€‚æˆ‘å›´ç»•å¤šæ­¥éª¤ä¸Šä¸‹æ–‡æ–‡ä»¶çš„å¾ˆå¤šæ€è€ƒéƒ½æ˜¯å…³äºå†…å­˜ç®¡ç†å’Œä¿æŒä»¤ç‰Œä½¿ç”¨ä¼˜åŒ–ã€‚è¿™ä¸ªå·¥ä½œæµç¨‹åœ¨æˆ‘çš„ä¸“ä¸šè®¡åˆ’ä¸Šè¿è¡Œè‰¯å¥½ï¼ˆåœ¨æœ¬æ–‡æ’°å†™æ—¶20ç¾å…ƒ/æœˆï¼‰</p>
<p>è¿™ç¯‡æ•´ä¸ªåšå®¢æ–‡ç« éƒ½æ˜¯ä½¿ç”¨ä¸Šè¿°ç¡®åˆ‡å·¥ä½œæµç¨‹ç¼–å†™çš„ï¼Œåœ¨å®é™…å†™ä½œè¿‡ç¨‹ä¸­æ•è·äº†çœŸå®çš„æˆªå›¾ã€‚åœ¨ä½¿ç”¨è¿‡ç¨‹çš„åŒæ—¶è®°å½•è¿‡ç¨‹æ˜¯ä¸€ç§æœ‰è¶£çš„å…ƒä½“éªŒï¼Œå› ä¸ºæˆ‘åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¸æ–­è°ƒæ•´è¿‡ç¨‹ã€‚æŒ‰ç…§AIå·¥ä½œæµç¨‹çš„å‘å±•é€Ÿåº¦ï¼Œæˆ‘éœ€è¦æ¯éš”å‡ å‘¨ä¿®æ”¹è¿™ç¯‡æ–‡ç« </p>
<p>å¦‚æœä½ ä¸ºä½ ä¸Šä¸€ä¸ªé¡¹ç›®æ„Ÿåˆ°éª„å‚²ï¼Œé‚£ä¹ˆä½ æ²¡æœ‰å­¦åˆ°ä»»ä½•ä¸œè¥¿ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘å¦‚ä½•ä½¿ç”¨æ¯ä¸€ä¸ª Claude Code åŠŸèƒ½]]></title>    <link>https://juejin.cn/post/7572714389922873384</link>    <guid>https://juejin.cn/post/7572714389922873384</guid>    <pubDate>2025-11-15T14:38:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572714389922873384" data-draft-id="7572454929144987683" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘å¦‚ä½•ä½¿ç”¨æ¯ä¸€ä¸ª Claude Code åŠŸèƒ½"/> <meta itemprop="keywords" content="Claude"/> <meta itemprop="datePublished" content="2025-11-15T14:38:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯é­”ä¸¸å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/3217622495411292"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘å¦‚ä½•ä½¿ç”¨æ¯ä¸€ä¸ª Claude Code åŠŸèƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3217622495411292/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯é­”ä¸¸å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T14:38:32.000Z" title="Sat Nov 15 2025 14:38:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.sshh.io%2Fp%2Fhow-i-use-every-claude-code-feature" target="_blank" title="https://blog.sshh.io/p/how-i-use-every-claude-code-feature" ref="nofollow noopener noreferrer">è½¬è½½</a></p>
<p>å…³äºæˆ‘ä½¿ç”¨ Claude Code å„ç§æ–¹å¼çš„å…¨é¢æ€»ç»“ã€‚</p>
<hr/>
<p>æˆ‘ç»å¸¸ä½¿ç”¨ Claude Codeã€‚</p>
<p>ä½œä¸ºä¸šä½™çˆ±å¥½è€…ï¼Œæˆ‘æ¯å‘¨åœ¨è™šæ‹Ÿæœºä¸­è¿è¡Œå¥½å‡ æ¬¡ï¼Œç”¨äºä¸ªäººé¡¹ç›®ï¼Œç»å¸¸ä½¿ç”¨ <code>--dangerously-skip-permissions</code> æ¥éšæ€§ç¼–ç æˆ‘è„‘æµ·ä¸­æƒ³åˆ°çš„ä»»ä½•æƒ³æ³•ã€‚åœ¨å·¥ä½œä¸­ï¼Œæˆ‘å›¢é˜Ÿçš„ä¸€éƒ¨åˆ†ä¸ºæˆ‘ä»¬å·¥ç¨‹å›¢é˜Ÿæ„å»º AI-IDE è§„åˆ™å’Œå·¥å…·ï¼Œæ¯æœˆæ¶ˆè€—æ•°åäº¿ä¸ª token ä»…ç”¨äºä»£ç ç”Ÿæˆã€‚</p>
<p>CLI agent é¢†åŸŸå˜å¾—è¶Šæ¥è¶Šæ‹¥æŒ¤ï¼Œåœ¨ Claude Codeã€Gemini CLIã€Cursor å’Œ Codex CLI ä¹‹é—´ï¼Œæˆ‘è§‰å¾—çœŸæ­£çš„æ¯”èµ›æ˜¯åœ¨ Anthropic å’Œ OpenAI ä¹‹é—´ã€‚ä½†è¯´å®è¯ï¼Œå½“æˆ‘å’Œå…¶ä»–å¼€å‘è€…äº¤è°ˆæ—¶ï¼Œä»–ä»¬çš„é€‰æ‹©å¾€å¾€å½’ç»“ä¸ºçœ‹èµ·æ¥å¾ˆè¡¨é¢çš„ä¸œè¥¿â€”â€”ä¸€ä¸ª"å¹¸è¿"çš„åŠŸèƒ½å®ç°æˆ–è€…ä»–ä»¬åå¥½çš„ç³»ç»Ÿæç¤º"é£æ ¼"ã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œè¿™äº›å·¥å…·éƒ½ç›¸å½“ä¸é”™ã€‚æˆ‘ä¹Ÿè§‰å¾—äººä»¬å¾€å¾€è¿‡åº¦å…³æ³¨è¾“å‡ºé£æ ¼æˆ– UIã€‚å¯¹æˆ‘æ¥è¯´ï¼Œ"ä½ å®Œå…¨æ­£ç¡®ï¼"çš„è°„åªšä¸æ˜¯ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„ bugï¼›è¿™æ˜¯ä¸€ä¸ªä¿¡å·ï¼Œè¯´æ˜ä½ å‚ä¸å¾—å¤ªå¤šäº†ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘çš„ç›®æ ‡æ˜¯"å‘å°„åå¿˜è®°"â€”â€”å§”æ‰˜ã€è®¾ç½®ä¸Šä¸‹æ–‡ï¼Œç„¶åè®©å®ƒå·¥ä½œã€‚é€šè¿‡æœ€ç»ˆçš„ PR è€Œä¸æ˜¯è¿‡ç¨‹æ¥è¯„åˆ¤å·¥å…·ã€‚</p>
<p>åšæŒä½¿ç”¨ Claude Code å‡ ä¸ªæœˆåï¼Œè¿™ç¯‡æ–‡ç« æ˜¯æˆ‘å¯¹ Claude Code æ•´ä¸ªç”Ÿæ€ç³»ç»Ÿçš„åæ€ã€‚æˆ‘ä»¬å°†æ¶µç›–æˆ‘ä½¿ç”¨çš„å‡ ä¹æ¯ä¸ªåŠŸèƒ½ï¼ˆåŒæ ·é‡è¦çš„æ˜¯ï¼Œæˆ‘æ²¡æœ‰ä½¿ç”¨çš„åŠŸèƒ½ï¼‰ï¼Œä»åŸºç¡€çš„ CLAUDE.md æ–‡ä»¶å’Œè‡ªå®šä¹‰æ–œæ å‘½ä»¤ï¼Œåˆ°å¼ºå¤§çš„ Subagentsã€Hooks å’Œ GitHub Actions ä¸–ç•Œã€‚è¿™ç¯‡æ–‡ç« æœ‰ç‚¹é•¿ï¼Œæˆ‘å»ºè®®å°†å…¶ä½œä¸ºå‚è€ƒè€Œä¸æ˜¯å®Œæ•´é˜…è¯»çš„å†…å®¹ã€‚</p>
<h2 data-id="heading-0">CLAUDE.md</h2>
<p>åœ¨ä½ çš„ä»£ç åº“ä¸­æœ‰æ•ˆä½¿ç”¨ Claude Code æœ€é‡è¦æ–‡ä»¶æ˜¯æ ¹ç›®å½•ä¸‹çš„ <code>CLAUDE.md</code>ã€‚è¿™ä¸ªæ–‡ä»¶æ˜¯ agent çš„"å®ªæ³•"ï¼Œæ˜¯äº†è§£ä½ çš„ç‰¹å®šå­˜å‚¨åº“å¦‚ä½•å·¥ä½œçš„ä¸»è¦çœŸå®æ¥æºã€‚</p>
<p>ä½ å¦‚ä½•å¤„ç†è¿™ä¸ªæ–‡ä»¶å–å†³äºä¸Šä¸‹æ–‡ã€‚å¯¹äºæˆ‘çš„ä¸šä½™é¡¹ç›®ï¼Œæˆ‘è®© Claude åœ¨å…¶ä¸­å€¾å€’ä»»ä½•å®ƒæƒ³è¦çš„ä¸œè¥¿ã€‚</p>
<p>åœ¨æˆ‘çš„ä¸“ä¸šå·¥ä½œä¸­ï¼Œæˆ‘ä»¬çš„å•ä½“ä»“åº“çš„ <code>CLAUDE.md</code> æ˜¯ä¸¥æ ¼ç»´æŠ¤çš„ï¼Œç›®å‰æœ‰ 13KBï¼ˆæˆ‘å¾ˆå®¹æ˜“çœ‹åˆ°å®ƒå¢é•¿åˆ° 25KBï¼‰ã€‚</p>
<ul>
<li>å®ƒåªè®°å½• 30%ï¼ˆä»»æ„ï¼‰æˆ–æ›´å¤šå·¥ç¨‹å¸ˆä½¿ç”¨çš„å·¥å…·å’Œ APIï¼ˆå…¶ä»–å·¥å…·åœ¨äº§å“æˆ–åº“ç‰¹å®šçš„ markdown æ–‡ä»¶ä¸­è®°å½•ï¼‰</li>
<li>æˆ‘ä»¬ç”šè‡³å¼€å§‹ä¸ºæ¯ä¸ªå†…éƒ¨å·¥å…·çš„æ–‡æ¡£æœ‰æ•ˆåˆ†é…æœ€å¤§ token è®¡æ•°ï¼Œå°±åƒå‘å›¢é˜Ÿå‡ºå”®"å¹¿å‘Šç©ºé—´"ä¸€æ ·ã€‚å¦‚æœä½ ä¸èƒ½ç®€æ´åœ°è§£é‡Šä½ çš„å·¥å…·ï¼Œå®ƒå°±ä¸é€‚åˆæ”¾åœ¨ <code>CLAUDE.md</code> ä¸­ã€‚</li>
</ul>
<h3 data-id="heading-1">æç¤ºå’Œå¸¸è§åæ¨¡å¼</h3>
<p>éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæˆ‘ä»¬ä¸ºç¼–å†™æœ‰æ•ˆçš„ <code>CLAUDE.md</code> å‘å±•äº†å¼ºçƒˆã€æœ‰è§‚ç‚¹çš„å“²å­¦ã€‚</p>
<ol>
<li>
<p><strong>ä»æŠ¤æ å¼€å§‹ï¼Œè€Œä¸æ˜¯æ‰‹å†Œã€‚</strong> ä½ çš„ <code>CLAUDE.md</code> åº”è¯¥ä»å°å¼€å§‹ï¼ŒåŸºäº Claude å‡ºé”™çš„åœ°æ–¹è¿›è¡Œè®°å½•ã€‚</p>
</li>
<li>
<p><strong>ä¸è¦ @-æ–‡ä»¶æ–‡æ¡£ã€‚</strong> å¦‚æœä½ åœ¨åˆ«å¤„æœ‰å¤§é‡æ–‡æ¡£ï¼Œåœ¨ä½ çš„ <code>CLAUDE.md</code> ä¸­ @-æåŠè¿™äº›æ–‡ä»¶å¾ˆè¯±äººã€‚è¿™ä¼šåœ¨æ¯æ¬¡è¿è¡Œæ—¶é€šè¿‡åµŒå…¥æ•´ä¸ªæ–‡ä»¶æ¥è†¨èƒ€ä¸Šä¸‹æ–‡çª—å£ã€‚ä½†å¦‚æœä½ åªæ˜¯æåŠè·¯å¾„ï¼ŒClaude ç»å¸¸ä¼šå¿½ç•¥å®ƒã€‚ä½ å¿…é¡»å‘ agent æ¨é”€ä¸ºä»€ä¹ˆè¦ä»¥åŠä½•æ—¶è¯»å–æ–‡ä»¶ã€‚"å¯¹äºå¤æ‚â€¦â€¦ä½¿ç”¨æˆ–é‡åˆ° <code>FooBarError</code> æ—¶ï¼Œè¯·å‚é˜… <code>path/to/docs.md</code> ä»¥è·å–é«˜çº§æ•…éšœæ’é™¤æ­¥éª¤ã€‚"</p>
</li>
<li>
<p><strong>ä¸è¦åªè¯´"æ°¸è¿œä¸è¦"ã€‚</strong> é¿å…åƒ"æ°¸è¿œä¸è¦ä½¿ç”¨ <code>--foo-bar</code> æ ‡å¿—"è¿™æ ·çš„ä»…å¦å®šçº¦æŸã€‚å½“ agent è®¤ä¸ºå®ƒå¿…é¡»ä½¿ç”¨è¯¥æ ‡å¿—æ—¶ï¼Œå®ƒä¼šå¡ä½ã€‚å§‹ç»ˆæä¾›æ›¿ä»£æ–¹æ¡ˆã€‚</p>
</li>
<li>
<p><strong>ä½¿ç”¨ CLAUDE.md ä½œä¸ºå¼ºåˆ¶å‡½æ•°ã€‚</strong> å¦‚æœä½ çš„ CLI å‘½ä»¤å¤æ‚å†—é•¿ï¼Œä¸è¦å†™æ®µè½æ–‡æ¡£æ¥è§£é‡Šå®ƒä»¬ã€‚é‚£æ˜¯ä¿®è¡¥äººçš„é—®é¢˜ã€‚ç›¸åï¼Œç¼–å†™ä¸€ä¸ªå…·æœ‰æ¸…æ™°ã€ç›´è§‚ API çš„ç®€å• bash åŒ…è£…å™¨å¹¶è®°å½•å®ƒã€‚ä¿æŒ <code>CLAUDE.md</code> å°½å¯èƒ½ç®€çŸ­æ˜¯ç®€åŒ–ä»£ç åº“å’Œå†…éƒ¨å·¥å…·çš„æå¥½å¼ºåˆ¶å‡½æ•°ã€‚</p>
</li>
</ol>
<p>è¿™æ˜¯ä¸€ä¸ªç®€åŒ–çš„å¿«ç…§ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># å•ä½“ä»“åº“</span>

<span class="hljs-section">## Python</span>
<span class="hljs-bullet">-</span> å§‹ç»ˆ ...
<span class="hljs-bullet">-</span> ä½¿ç”¨ <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">command</span>&gt;</span></span> æµ‹è¯•
... å¦å¤– 10 ä¸ª ...

<span class="hljs-section">## &lt;å†…éƒ¨ CLI å·¥å…·&gt;</span>
... 10 ä¸ªé¡¹ç›®ï¼Œä¸“æ³¨äº 80% çš„ç”¨ä¾‹ ...
<span class="hljs-bullet">-</span> &lt;ä½¿ç”¨ç¤ºä¾‹&gt;
<span class="hljs-bullet">-</span> å§‹ç»ˆ ...
<span class="hljs-bullet">-</span> æ°¸è¿œä¸è¦ <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">x</span>&gt;</span></span>ï¼Œåå¥½ <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Y</span>&gt;</span></span>

å¯¹äº &lt;å¤æ‚ä½¿ç”¨&gt; æˆ– &lt;é”™è¯¯&gt;ï¼Œè¯·å‚é˜… path/to/<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">tool</span>&gt;</span></span><span class="hljs-emphasis">_docs.md

...
</span></code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4452b60912d646fab8e429f0312ee86f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763822312&amp;x-signature=V9M021APJKXVd8wREvOH%2B0s%2B24M%3D" alt="" loading="lazy"/></p>
<p>æœ€åï¼Œæˆ‘ä»¬ä¿æŒè¿™ä¸ªæ–‡ä»¶ä¸ <code>AGENTS.md</code> æ–‡ä»¶åŒæ­¥ï¼Œä»¥ä¿æŒä¸æˆ‘ä»¬å·¥ç¨‹å¸ˆå¯èƒ½ä½¿ç”¨çš„å…¶ä»– AI IDE çš„å…¼å®¹æ€§ã€‚</p>
<p><em>å¦‚æœä½ æ­£åœ¨å¯»æ‰¾ä¸ºç¼–ç  agents ç¼–å†™ markdown çš„æ›´å¤šæç¤ºï¼Œè¯·å‚é˜…"AI Can't Read Your Docs"ã€"AI-powered Software Engineering"å’Œ"How Cursor (AI IDE) Works"ã€‚</em></p>
<p><strong>è¦ç‚¹ï¼š</strong> å°†ä½ çš„ <code>CLAUDE.md</code> è§†ä¸ºé«˜çº§ã€ç²¾é€‰çš„æŠ¤æ å’ŒæŒ‡é’ˆé›†åˆã€‚ç”¨å®ƒæ¥æŒ‡å¯¼ä½ éœ€è¦åœ¨å“ªé‡ŒæŠ•èµ„æ›´å¤š AIï¼ˆå’Œäººç±»ï¼‰å‹å¥½çš„å·¥å…·ï¼Œè€Œä¸æ˜¯è¯•å›¾ä½¿å…¶æˆä¸ºå…¨é¢çš„æ‰‹å†Œã€‚</p>
<h2 data-id="heading-2">Compact, Context, &amp; Clear</h2>
<p>æˆ‘å»ºè®®åœ¨ç¼–ç ä¼šè¯ä¸­é€”è‡³å°‘è¿è¡Œä¸€æ¬¡ <code>/context</code> æ¥äº†è§£ä½ å¦‚ä½•ä½¿ç”¨ä½ çš„ 200k token ä¸Šä¸‹æ–‡çª—å£ï¼ˆå³ä½¿ä½¿ç”¨ Sonnet-1Mï¼Œæˆ‘ä¹Ÿä¸ç›¸ä¿¡å®Œæ•´ä¸Šä¸‹æ–‡çª—å£è¢«æœ‰æ•ˆä½¿ç”¨ï¼‰ã€‚å¯¹æˆ‘ä»¬æ¥è¯´ï¼Œåœ¨å•ä½“ä»“åº“ä¸­çš„æ–°ä¼šè¯åŸºå‡†æˆæœ¬çº¦ä¸º ~20k tokenï¼ˆ10%ï¼‰ï¼Œå‰©ä½™ 180k ç”¨äºè¿›è¡Œæ›´æ”¹â€”â€”è¿™å¯èƒ½ä¼šå¾ˆå¿«å¡«æ»¡ã€‚</p>
<p>æˆ‘æœ‰ä¸‰ä¸ªä¸»è¦å·¥ä½œæµç¨‹ï¼š</p>
<ul>
<li>
<p><strong><code>/compact</code>ï¼ˆé¿å…ï¼‰ï¼š</strong> æˆ‘å°½å¯èƒ½é¿å…ä½¿ç”¨è¿™ä¸ªã€‚è‡ªåŠ¨å‹ç¼©æ˜¯ä¸é€æ˜çš„ã€å®¹æ˜“å‡ºé”™çš„ï¼Œå¹¶ä¸”æ²¡æœ‰å¾ˆå¥½åœ°ä¼˜åŒ–ã€‚</p>
</li>
<li>
<p><strong><code>/clear</code> + <code>/catchup</code>ï¼ˆç®€å•é‡å¯ï¼‰ï¼š</strong> æˆ‘çš„é»˜è®¤é‡å¯æ–¹å¼ã€‚æˆ‘ <code>/clear</code> çŠ¶æ€ï¼Œç„¶åè¿è¡Œè‡ªå®šä¹‰çš„ <code>/catchup</code> å‘½ä»¤è®© Claude è¯»å–æˆ‘ git åˆ†æ”¯ä¸­æ‰€æœ‰æ›´æ”¹çš„æ–‡ä»¶ã€‚</p>
</li>
<li>
<p><strong>"Document &amp; Clear"ï¼ˆå¤æ‚é‡å¯ï¼‰ï¼š</strong> å¯¹äºå¤§å‹ä»»åŠ¡ã€‚æˆ‘è®© Claude å°†å…¶è®¡åˆ’å’Œè¿›åº¦è½¬å‚¨åˆ° <code>.md</code> æ–‡ä»¶ä¸­ï¼Œ<code>/clear</code> çŠ¶æ€ï¼Œç„¶åé€šè¿‡å‘Šè¯‰å®ƒè¯»å– <code>.md</code> æ–‡ä»¶å¹¶ç»§ç»­æ¥å¼€å§‹æ–°ä¼šè¯ã€‚</p>
</li>
</ul>
<p><strong>è¦ç‚¹ï¼š</strong> ä¸è¦ç›¸ä¿¡è‡ªåŠ¨å‹ç¼©ã€‚ä½¿ç”¨ <code>/clear</code> è¿›è¡Œç®€å•é‡å¯ï¼Œä½¿ç”¨"Document &amp; Clear"æ–¹æ³•ä¸ºå¤æ‚ä»»åŠ¡åˆ›å»ºæŒä¹…çš„å¤–éƒ¨"è®°å¿†"ã€‚</p>
<h2 data-id="heading-3">Custom Slash Commands</h2>
<p>æˆ‘è®¤ä¸ºæ–œæ å‘½ä»¤åªæ˜¯é¢‘ç¹ä½¿ç”¨çš„æç¤ºçš„ç®€å•å¿«æ·æ–¹å¼ï¼Œä»…æ­¤è€Œå·²ã€‚æˆ‘çš„è®¾ç½®æ˜¯æœ€å°åŒ–çš„ï¼š</p>
<ul>
<li>
<p><code>/catchup</code>ï¼šæˆ‘ä¹‹å‰æåˆ°çš„å‘½ä»¤ã€‚å®ƒåªæ˜¯æç¤º Claude è¯»å–æˆ‘å½“å‰ git åˆ†æ”¯ä¸­æ‰€æœ‰æ›´æ”¹çš„æ–‡ä»¶ã€‚</p>
</li>
<li>
<p><code>/pr</code>ï¼šä¸€ä¸ªç®€å•çš„åŠ©æ‰‹ï¼Œæ¸…ç†æˆ‘çš„ä»£ç ã€æš‚å­˜å®ƒå¹¶å‡†å¤‡ pull requestã€‚</p>
</li>
</ul>
<p>æ•æˆ‘ç›´è¨€ï¼Œå¦‚æœä½ æœ‰ä¸€é•¿ä¸²å¤æ‚çš„è‡ªå®šä¹‰æ–œæ å‘½ä»¤ï¼Œä½ å°±åˆ›å»ºäº†ä¸€ä¸ªåæ¨¡å¼ã€‚å¯¹æˆ‘æ¥è¯´ï¼Œåƒ Claude è¿™æ ·çš„ agent çš„å…¨éƒ¨æ„ä¹‰åœ¨äºä½ å¯ä»¥è¾“å…¥å‡ ä¹ä»»ä½•ä½ æƒ³è¦çš„ä¸œè¥¿å¹¶è·å¾—æœ‰ç”¨çš„ã€å¯åˆå¹¶çš„ç»“æœã€‚å½“ä½ å¼ºè¿«å·¥ç¨‹å¸ˆï¼ˆæˆ–éå·¥ç¨‹å¸ˆï¼‰å­¦ä¹ ä¸€å¥—æ–°çš„ã€åœ¨æŸå¤„è®°å½•çš„åŸºæœ¬é­”æ³•å‘½ä»¤æ¥å®Œæˆå·¥ä½œæ—¶ï¼Œä½ å°±å¤±è´¥äº†ã€‚</p>
<p><strong>è¦ç‚¹ï¼š</strong> ä½¿ç”¨æ–œæ å‘½ä»¤ä½œä¸ºç®€å•çš„ä¸ªäººå¿«æ·æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½œä¸ºæ„å»ºæ›´ç›´è§‚çš„ <code>CLAUDE.md</code> å’Œæ›´å¥½å·¥å…·çš„ agent çš„æ›¿ä»£å“ã€‚</p>
<h2 data-id="heading-4">Custom Subagents</h2>
<p>åœ¨ç†è®ºä¸Šï¼Œè‡ªå®šä¹‰ subagents æ˜¯ Claude Code æœ€å¼ºå¤§çš„ä¸Šä¸‹æ–‡ç®¡ç†åŠŸèƒ½ã€‚æ¨é”€å¾ˆç®€å•ï¼šä¸€ä¸ªå¤æ‚ä»»åŠ¡éœ€è¦ X ä¸ª token çš„è¾“å…¥ä¸Šä¸‹æ–‡ï¼ˆä¾‹å¦‚ï¼Œå¦‚ä½•è¿è¡Œæµ‹è¯•ï¼‰ï¼Œç´¯ç§¯ Y ä¸ª token çš„å·¥ä½œä¸Šä¸‹æ–‡ï¼Œå¹¶äº§ç”Ÿ Z ä¸ª token çš„ç­”æ¡ˆã€‚è¿è¡Œ N ä¸ªä»»åŠ¡æ„å‘³ç€åœ¨ä½ çš„ä¸»çª—å£ä¸­æœ‰ <code>(X + Y + Z) * N</code> ä¸ª tokenã€‚</p>
<p>subagent è§£å†³æ–¹æ¡ˆæ˜¯å°† <code>(X + Y) * N</code> å·¥ä½œå¤–åŒ…ç»™ä¸“é—¨çš„ agentsï¼Œå®ƒä»¬åªè¿”å›æœ€ç»ˆçš„ Z token ç­”æ¡ˆï¼Œä¿æŒä¸»ä¸Šä¸‹æ–‡å¹²å‡€ã€‚</p>
<p>æˆ‘å‘ç°å®ƒä»¬æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æƒ³æ³•ï¼Œä½†åœ¨å®è·µä¸­ï¼Œè‡ªå®šä¹‰ subagents ä¼šäº§ç”Ÿä¸¤ä¸ªæ–°é—®é¢˜ï¼š</p>
<ol>
<li>
<p><strong>å®ƒä»¬å°é”ä¸Šä¸‹æ–‡ï¼š</strong> å¦‚æœæˆ‘åˆ¶ä½œä¸€ä¸ª <code>PythonTests</code> subagentï¼Œæˆ‘ç°åœ¨å·²ç»ä»æˆ‘çš„ä¸» agent ä¸­éšè—äº†æ‰€æœ‰æµ‹è¯•ä¸Šä¸‹æ–‡ã€‚å®ƒä¸å†èƒ½å¯¹æ›´æ”¹è¿›è¡Œæ•´ä½“æ¨ç†ã€‚å®ƒç°åœ¨è¢«è¿«è°ƒç”¨ subagent åªæ˜¯ä¸ºäº†çŸ¥é“å¦‚ä½•éªŒè¯è‡ªå·±çš„ä»£ç ã€‚</p>
</li>
<li>
<p><strong>å®ƒä»¬å¼ºåˆ¶äººç±»å·¥ä½œæµç¨‹ï¼š</strong> æ›´ç³Ÿç³•çš„æ˜¯ï¼Œå®ƒä»¬å¼ºè¿« Claude è¿›å…¥åƒµç¡¬çš„ã€äººç±»å®šä¹‰çš„å·¥ä½œæµç¨‹ã€‚æˆ‘ç°åœ¨åœ¨è§„å®šå®ƒå¿…é¡»å¦‚ä½•å§”æ‰˜ï¼Œè¿™æ­£æ˜¯æˆ‘è¯•å›¾è®© agent ä¸ºæˆ‘è§£å†³çš„é—®é¢˜ã€‚</p>
</li>
</ol>
<p>æˆ‘åå¥½çš„æ›¿ä»£æ–¹æ¡ˆæ˜¯ä½¿ç”¨ Claude å†…ç½®çš„ <code>Task(...)</code> åŠŸèƒ½æ¥ç”Ÿæˆé€šç”¨ agent çš„å‰¯æœ¬ã€‚</p>
<p>æˆ‘å°†æ‰€æœ‰å…³é”®ä¸Šä¸‹æ–‡æ”¾åœ¨ <code>CLAUDE.md</code> ä¸­ã€‚ç„¶åï¼Œæˆ‘è®©ä¸» agent å†³å®šä½•æ—¶ä»¥åŠå¦‚ä½•å°†å·¥ä½œå§”æ‰˜ç»™è‡ªèº«çš„å‰¯æœ¬ã€‚è¿™ç»™äº†æˆ‘æ‰€æœ‰ subagents çš„ä¸Šä¸‹æ–‡èŠ‚çœå¥½å¤„ï¼Œè€Œæ²¡æœ‰ç¼ºç‚¹ã€‚agent åŠ¨æ€ç®¡ç†è‡ªå·±çš„ç¼–æ’ã€‚</p>
<p>åœ¨æˆ‘çš„"Building Multi-Agent Systems (Part 2)"æ–‡ç« ä¸­ï¼Œæˆ‘ç§°ä¹‹ä¸º"Master-Clone"æ¶æ„ï¼Œæˆ‘å¼ºçƒˆåå¥½å®ƒè€Œä¸æ˜¯è‡ªå®šä¹‰ subagents é¼“åŠ±çš„"Lead-Specialist"æ¨¡å‹ã€‚</p>
<p><strong>è¦ç‚¹ï¼š</strong> è‡ªå®šä¹‰ subagents æ˜¯ä¸€ä¸ªè„†å¼±çš„è§£å†³æ–¹æ¡ˆã€‚ç»™ä½ çš„ä¸» agent ä¸Šä¸‹æ–‡ï¼ˆåœ¨ <code>CLAUDE.md</code> ä¸­ï¼‰å¹¶è®©å®ƒä½¿ç”¨è‡ªå·±çš„ <code>Task/Explore(...)</code> åŠŸèƒ½æ¥ç®¡ç†å§”æ‰˜ã€‚</p>
<h2 data-id="heading-5">Resume, Continue, &amp; History</h2>
<p>åœ¨ç®€å•å±‚é¢ä¸Šï¼Œæˆ‘ç»å¸¸ä½¿ç”¨ <code>claude --resume</code> å’Œ <code>claude --continue</code>ã€‚å®ƒä»¬éå¸¸é€‚åˆé‡å¯å‡ºé”™çš„ç»ˆç«¯æˆ–å¿«é€Ÿé‡å¯æ—§ä¼šè¯ã€‚æˆ‘ç»å¸¸ <code>claude --resume</code> å‡ å¤©å‰çš„ä¼šè¯ï¼Œåªæ˜¯è¯¢é—® agent æ€»ç»“å®ƒå¦‚ä½•å…‹æœç‰¹å®šé”™è¯¯ï¼Œç„¶åæˆ‘ç”¨å®ƒæ¥æ”¹è¿›æˆ‘ä»¬çš„ <code>CLAUDE.md</code> å’Œå†…éƒ¨å·¥å…·ã€‚</p>
<p>æ›´æ·±å…¥åœ°è¯´ï¼ŒClaude Code å°†æ‰€æœ‰ä¼šè¯å†å²å­˜å‚¨åœ¨ <code>~/.claude/projects/</code> ä¸­ï¼Œä»¥æŒ–æ˜åŸå§‹å†å²ä¼šè¯æ•°æ®ã€‚æˆ‘æœ‰è„šæœ¬å¯¹è¿™äº›æ—¥å¿—è¿è¡Œå…ƒåˆ†æï¼Œå¯»æ‰¾å¸¸è§å¼‚å¸¸ã€æƒé™è¯·æ±‚å’Œé”™è¯¯æ¨¡å¼ï¼Œä»¥å¸®åŠ©æ”¹è¿›é¢å‘ agent çš„ä¸Šä¸‹æ–‡ã€‚</p>
<p><strong>è¦ç‚¹ï¼š</strong> ä½¿ç”¨ <code>claude --resume</code> å’Œ <code>claude --continue</code> é‡å¯ä¼šè¯å¹¶å‘ç°è¢«åŸ‹è—çš„å†å²ä¸Šä¸‹æ–‡ã€‚</p>
<h2 data-id="heading-6">Hooks</h2>
<p>Hooks å¾ˆé‡è¦ã€‚æˆ‘ä¸åœ¨ä¸šä½™é¡¹ç›®ä¸­ä½¿ç”¨å®ƒä»¬ï¼Œä½†å®ƒä»¬å¯¹äºåœ¨å¤æ‚ä¼ä¸šä»“åº“ä¸­å¼•å¯¼ Claude è‡³å…³é‡è¦ã€‚å®ƒä»¬æ˜¯ç¡®å®šæ€§çš„"å¿…é¡»åš"è§„åˆ™ï¼Œè¡¥å…… <code>CLAUDE.md</code> ä¸­çš„"åº”è¯¥åš"å»ºè®®ã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨ä¸¤ç§ç±»å‹ï¼š</p>
<ol>
<li>
<p><strong>æäº¤æ—¶é˜»æ­¢ Hooksï¼š</strong> è¿™æ˜¯æˆ‘ä»¬çš„ä¸»è¦ç­–ç•¥ã€‚æˆ‘ä»¬æœ‰ä¸€ä¸ª <code>PreToolUse</code> hook åŒ…è£…ä»»ä½• <code>Bash(git commit)</code> å‘½ä»¤ã€‚å®ƒæ£€æŸ¥ <code>/tmp/agent-pre-commit-pass</code> æ–‡ä»¶ï¼Œæˆ‘ä»¬çš„æµ‹è¯•è„šæœ¬åªæœ‰åœ¨æ‰€æœ‰æµ‹è¯•é€šè¿‡æ—¶æ‰ä¼šåˆ›å»ºè¯¥æ–‡ä»¶ã€‚å¦‚æœæ–‡ä»¶ç¼ºå¤±ï¼Œhook ä¼šé˜»æ­¢æäº¤ï¼Œè¿«ä½¿ Claude è¿›å…¥"æµ‹è¯•å¹¶ä¿®å¤"å¾ªç¯ï¼Œç›´åˆ°æ„å»ºå˜ä¸ºç»¿è‰²ã€‚</p>
</li>
<li>
<p><strong>æç¤º Hooksï¼š</strong> è¿™äº›æ˜¯ç®€å•çš„ã€éé˜»å¡çš„ hooksï¼Œå¦‚æœ agent æ­£åœ¨åšæ¬¡ä¼˜çš„äº‹æƒ…ï¼Œä¼šæä¾›"å³å‘å³å¿˜"çš„åé¦ˆã€‚</p>
</li>
</ol>
<p>æˆ‘ä»¬æœ‰æ„ä¸ä½¿ç”¨"å†™å…¥æ—¶é˜»æ­¢" hooksï¼ˆä¾‹å¦‚ï¼Œåœ¨ <code>Edit</code> æˆ– <code>Write</code> ä¸Šï¼‰ã€‚åœ¨è®¡åˆ’ä¸­é€”é˜»æ­¢ agent ä¼šæ··æ·†ç”šè‡³"æŒ«è´¥"å®ƒã€‚è®©å®ƒå®Œæˆå·¥ä½œç„¶ååœ¨æäº¤é˜¶æ®µæ£€æŸ¥æœ€ç»ˆçš„ã€å®Œæˆçš„ç»“æœè¦æœ‰æ•ˆå¾—å¤šã€‚</p>
<p><strong>è¦ç‚¹ï¼š</strong> ä½¿ç”¨ hooks åœ¨æäº¤æ—¶å¼ºåˆ¶çŠ¶æ€éªŒè¯ï¼ˆblock-at-submitï¼‰ã€‚é¿å…åœ¨å†™å…¥æ—¶é˜»æ­¢â€”â€”è®© agent å®Œæˆè®¡åˆ’ï¼Œç„¶åæ£€æŸ¥æœ€ç»ˆç»“æœã€‚</p>
<h2 data-id="heading-7">Planning Mode</h2>
<p>å¯¹äºä»»ä½•"å¤§å‹"åŠŸèƒ½æ›´æ”¹ï¼Œä½¿ç”¨ AI IDE è¿›è¡Œè§„åˆ’æ˜¯å¿…ä¸å¯å°‘çš„ã€‚</p>
<p>å¯¹äºæˆ‘çš„ä¸šä½™é¡¹ç›®ï¼Œæˆ‘åªä½¿ç”¨å†…ç½®çš„è§„åˆ’æ¨¡å¼ã€‚è¿™æ˜¯åœ¨ Claude å¼€å§‹ä¹‹å‰ä¸ä¹‹å¯¹é½çš„ä¸€ç§æ–¹å¼ï¼Œå®šä¹‰äº†å¦‚ä½•æ„å»ºæŸç‰©ä»¥åŠå®ƒéœ€è¦åœæ­¢å¹¶å±•ç¤ºå·¥ä½œçš„"æ£€æŸ¥ç‚¹"ã€‚å®šæœŸä½¿ç”¨è¿™ä¸ªå¯ä»¥å»ºç«‹å¼ºçƒˆçš„ç›´è§‰ï¼Œäº†è§£è·å¾—è‰¯å¥½è®¡åˆ’è€Œä¸è®© Claude æç ¸å®ç°æ‰€éœ€çš„æœ€å°ä¸Šä¸‹æ–‡ã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„å·¥ä½œå•ä½“ä»“åº“ä¸­ï¼Œæˆ‘ä»¬å¼€å§‹æ¨å‡ºåŸºäº Claude Code SDK æ„å»ºçš„è‡ªå®šä¹‰è§„åˆ’å·¥å…·ã€‚å®ƒç±»ä¼¼äºåŸç”Ÿè®¡åˆ’æ¨¡å¼ï¼Œä½†ç»è¿‡å¤§é‡æç¤ºä»¥ä½¿å…¶è¾“å‡ºä¸æˆ‘ä»¬ç°æœ‰çš„æŠ€æœ¯è®¾è®¡æ ¼å¼å¯¹é½ã€‚å®ƒè¿˜å¼€ç®±å³ç”¨åœ°å¼ºåˆ¶æ‰§è¡Œæˆ‘ä»¬çš„å†…éƒ¨æœ€ä½³å®è·µâ€”â€”ä»ä»£ç ç»“æ„åˆ°æ•°æ®éšç§å’Œå®‰å…¨ã€‚è¿™è®©æˆ‘ä»¬çš„å·¥ç¨‹å¸ˆèƒ½å¤Ÿ" vibe plan"ä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œå°±åƒä»–ä»¬æ˜¯é«˜çº§æ¶æ„å¸ˆä¸€æ ·ï¼ˆè‡³å°‘è¿™æ˜¯æ¨é”€çš„è¯´æ³•ï¼‰ã€‚</p>
<p><strong>è¦ç‚¹ï¼š</strong> å¯¹äºå¤æ‚æ›´æ”¹ï¼Œå§‹ç»ˆä½¿ç”¨å†…ç½®è§„åˆ’æ¨¡å¼åœ¨ agent å¼€å§‹å·¥ä½œä¹‹å‰å¯¹é½è®¡åˆ’ã€‚</p>
<h2 data-id="heading-8">Skills</h2>
<p>æˆ‘åŒæ„ Simon Willison çš„è§‚ç‚¹ï¼š<strong>Skills å¯èƒ½æ¯” MCP æ›´é‡è¦ã€‚</strong></p>
<p>å¦‚æœä½ ä¸€ç›´åœ¨å…³æ³¨æˆ‘çš„æ–‡ç« ï¼Œä½ ä¼šçŸ¥é“æˆ‘å·²ç»åç¦»äº† MCP è¿›è¡Œå¤§å¤šæ•°å¼€å‘å·¥ä½œï¼Œåå¥½æ„å»ºç®€å•çš„ CLIï¼ˆæ­£å¦‚æˆ‘åœ¨"AI Can't Read Your Docs"ä¸­äº‰è®ºçš„é‚£æ ·ï¼‰ã€‚æˆ‘çš„ agent è‡ªæ²»å¿ƒæ™ºæ¨¡å‹å·²ç»æ¼”å˜ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li>
<p><strong>å•ä¸€æç¤ºï¼š</strong> åœ¨ä¸€ä¸ªå·¨å¤§çš„æç¤ºä¸­ç»™ agent æ‰€æœ‰ä¸Šä¸‹æ–‡ã€‚ï¼ˆè„†å¼±ï¼Œä¸å¯æ‰©å±•ï¼‰</p>
</li>
<li>
<p><strong>å·¥å…·è°ƒç”¨ï¼š</strong> "ç»å…¸" agent æ¨¡å‹ã€‚æˆ‘ä»¬æ‰‹å·¥åˆ¶ä½œå·¥å…·å¹¶ä¸º agent æŠ½è±¡ç°å®ã€‚ï¼ˆæ›´å¥½ï¼Œä½†åˆ›å»ºäº†æ–°çš„æŠ½è±¡å’Œä¸Šä¸‹æ–‡ç“¶é¢ˆï¼‰</p>
</li>
<li>
<p><strong>è„šæœ¬ç¼–å†™ï¼š</strong> æˆ‘ä»¬ç»™ agent è®¿é—®åŸå§‹ç¯å¢ƒâ€”â€”äºŒè¿›åˆ¶æ–‡ä»¶ã€è„šæœ¬å’Œæ–‡æ¡£â€”â€”å®ƒåŠ¨æ€ç¼–å†™ä»£ç æ¥ä¸å®ƒä»¬äº¤äº’ã€‚</p>
</li>
</ol>
<p>è€ƒè™‘åˆ°è¿™ä¸ªæ¨¡å‹ï¼Œ<strong>Agent Skills</strong> æ˜¯æ˜æ˜¾çš„ä¸‹ä¸€ä¸ªåŠŸèƒ½ã€‚å®ƒä»¬æ˜¯"è„šæœ¬ç¼–å†™"å±‚çš„æ­£å¼äº§å“åŒ–ã€‚</p>
<p>å¦‚æœä½ åƒæˆ‘ä¸€æ ·ï¼Œå·²ç»åå¥½ CLI è€Œä¸æ˜¯ MCPï¼Œä½ ä¸€ç›´åœ¨éšå«åœ°è·å¾— Skills çš„å¥½å¤„ã€‚<code>SKILL.md</code> æ–‡ä»¶åªæ˜¯ä¸€ç§æ›´æœ‰ç»„ç»‡ã€å¯å…±äº«å’Œå¯å‘ç°çš„æ–¹å¼æ¥è®°å½•è¿™äº› CLI å’Œè„šæœ¬å¹¶å°†å®ƒä»¬æš´éœ²ç»™ agentã€‚</p>
<p><strong>è¦ç‚¹ï¼š</strong> Skills æ˜¯æ­£ç¡®çš„æŠ½è±¡ã€‚å®ƒä»¬æ­£å¼åŒ–äº†åŸºäº"è„šæœ¬ç¼–å†™"çš„ agent æ¨¡å‹ï¼Œè¿™æ¯” MCP ä»£è¡¨çš„åƒµç¡¬ã€ç±»ä¼¼ API çš„æ¨¡å‹æ›´å¥å£®å’Œçµæ´»ã€‚</p>
<h2 data-id="heading-9">MCP (Model Context Protocol)</h2>
<p>Skills ä¸æ„å‘³ç€ MCP å·²æ­»ï¼ˆå¦è§"Everything Wrong with MCP"ï¼‰ã€‚ä»¥å‰ï¼Œè®¸å¤šäººæ„å»ºäº†ç³Ÿç³•çš„ã€ä¸Šä¸‹æ–‡ç¹é‡çš„ MCPï¼Œæœ‰å‡ åä¸ªåªæ˜¯é•œåƒ REST API çš„å·¥å…·ï¼ˆ<code>read_thing_a()</code>ã€<code>read_thing_b()</code>ã€<code>update_thing_c()</code>ï¼‰ã€‚</p>
<p>"è„šæœ¬ç¼–å†™"æ¨¡å‹ï¼ˆç°åœ¨ç”± Skills æ­£å¼åŒ–ï¼‰æ›´å¥½ï¼Œä½†å®ƒéœ€è¦ä¸€ç§å®‰å…¨çš„æ–¹å¼æ¥è®¿é—®ç¯å¢ƒã€‚å¯¹æˆ‘æ¥è¯´ï¼Œè¿™æ˜¯ MCP æ–°çš„ã€æ›´é›†ä¸­çš„è§’è‰²ã€‚</p>
<p>è€Œä¸æ˜¯è‡ƒè‚¿çš„ APIï¼ŒMCP åº”è¯¥æ˜¯ä¸€ä¸ªç®€å•çš„ã€å®‰å…¨çš„ç½‘å…³ï¼Œæä¾›å‡ ä¸ªå¼ºå¤§çš„ã€é«˜çº§å·¥å…·ï¼š</p>
<ul>
<li><code>download_raw_data(filtersâ€¦)</code></li>
<li><code>take_sensitive_gated_action(argsâ€¦)</code></li>
<li><code>execute_code_in_environment_with_state(codeâ€¦)</code></li>
</ul>
<p>åœ¨è¿™ä¸ªæ¨¡å‹ä¸­ï¼ŒMCP çš„å·¥ä½œä¸æ˜¯ä¸º agent æŠ½è±¡ç°å®ï¼›å®ƒçš„å·¥ä½œæ˜¯ç®¡ç†è®¤è¯ã€ç½‘ç»œå’Œå®‰å…¨è¾¹ç•Œï¼Œç„¶åè®©è·¯ã€‚å®ƒä¸º agent æä¾›å…¥å£ç‚¹ï¼Œç„¶å agent ä½¿ç”¨å…¶è„šæœ¬ç¼–å†™å’Œ markdown ä¸Šä¸‹æ–‡æ¥å®Œæˆå®é™…å·¥ä½œã€‚</p>
<p>æˆ‘ä»ç„¶ä½¿ç”¨çš„å”¯ä¸€ MCP æ˜¯ç”¨äº Playwrightï¼Œè¿™å¾ˆåˆç†â€”â€”å®ƒæ˜¯ä¸€ä¸ªå¤æ‚çš„ã€æœ‰çŠ¶æ€çš„ç¯å¢ƒã€‚æˆ‘æ‰€æœ‰çš„æ— çŠ¶æ€å·¥å…·ï¼ˆå¦‚ Jiraã€AWSã€GitHubï¼‰éƒ½å·²è¿ç§»åˆ°ç®€å•çš„ CLIã€‚</p>
<p><strong>è¦ç‚¹ï¼š</strong> ä½¿ç”¨å……å½“æ•°æ®ç½‘å…³çš„ MCPã€‚ç»™ agent ä¸€ä¸¤ä¸ªé«˜çº§å·¥å…·ï¼ˆå¦‚åŸå§‹æ•°æ®è½¬å‚¨ APIï¼‰ï¼Œç„¶åå®ƒå¯ä»¥ç¼–å†™è„šæœ¬æ¥å¯¹æŠ—ã€‚</p>
<h2 data-id="heading-10">Claude Code SDK</h2>
<p>Claude Code ä¸ä»…ä»…æ˜¯ä¸€ä¸ªäº¤äº’å¼ CLIï¼›å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¼ºå¤§çš„ SDKï¼Œç”¨äºæ„å»ºå…¨æ–°çš„ agentsâ€”â€”æ—¢ç”¨äºç¼–ç ä»»åŠ¡ä¹Ÿç”¨äºéç¼–ç ä»»åŠ¡ã€‚æˆ‘å·²ç»å¼€å§‹å°†å®ƒä½œä¸ºæˆ‘é»˜è®¤çš„ agent æ¡†æ¶ï¼Œè€Œä¸æ˜¯åƒ LangChain/CrewAI è¿™æ ·çš„å·¥å…·ï¼Œç”¨äºå¤§å¤šæ•°æ–°çš„ä¸šä½™é¡¹ç›®ã€‚</p>
<p>æˆ‘ä»¥ä¸‰ç§ä¸»è¦æ–¹å¼ä½¿ç”¨å®ƒï¼š</p>
<ol>
<li>
<p><strong>å¤§è§„æ¨¡å¹¶è¡Œè„šæœ¬ç¼–å†™ï¼š</strong> å¯¹äºå¤§è§„æ¨¡é‡æ„ã€é”™è¯¯ä¿®å¤æˆ–è¿ç§»ï¼Œæˆ‘ä¸ä½¿ç”¨äº¤äº’å¼èŠå¤©ã€‚æˆ‘ç¼–å†™ç®€å•çš„ bash è„šæœ¬å¹¶è¡Œè°ƒç”¨ <code>claude -p "in /pathA change all refs from foo to bar"</code>ã€‚è¿™æ¯”è¯•å›¾è®©ä¸» agent ç®¡ç†å‡ åä¸ª subagent ä»»åŠ¡æ›´å…·å¯æ‰©å±•æ€§å’Œå¯æ§æ€§ã€‚</p>
</li>
<li>
<p><strong>æ„å»ºå†…éƒ¨èŠå¤©å·¥å…·ï¼š</strong> SDK éå¸¸é€‚åˆå°†å¤æ‚è¿‡ç¨‹åŒ…è£…åœ¨ç®€å•çš„èŠå¤©ç•Œé¢ä¸­ï¼Œä¾›éæŠ€æœ¯ç”¨æˆ·ä½¿ç”¨ã€‚æ¯”å¦‚ä¸€ä¸ªå®‰è£…ç¨‹åºï¼Œåœ¨å‡ºé”™æ—¶å›é€€åˆ° Claude Code SDK æ¥ä¸ºç”¨æˆ·ä¿®å¤é—®é¢˜ã€‚æˆ–è€…ä¸€ä¸ªå†…éƒ¨çš„"v0-at-home"å·¥å…·ï¼Œè®©æˆ‘ä»¬çš„è®¾è®¡å›¢é˜Ÿåœ¨æˆ‘ä»¬å†…éƒ¨çš„ UI æ¡†æ¶ä¸­ vibe-code æ¨¡æ‹Ÿå‰ç«¯ï¼Œç¡®ä¿ä»–ä»¬çš„æƒ³æ³•æ˜¯é«˜ä¿çœŸçš„ï¼Œå¹¶ä¸”ä»£ç æ›´ç›´æ¥å¯ç”¨åœ¨å‰ç«¯ç”Ÿäº§ä»£ç ä¸­ã€‚</p>
</li>
<li>
<p><strong>å¿«é€Ÿ Agent åŸå‹åˆ¶ä½œï¼š</strong> è¿™æ˜¯æˆ‘æœ€å¸¸è§çš„ç”¨æ³•ã€‚å®ƒä¸ä»…ç”¨äºç¼–ç ã€‚å¦‚æœæˆ‘å¯¹ä»»ä½• agent ä»»åŠ¡æœ‰æƒ³æ³•ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨è‡ªå®šä¹‰ CLI æˆ– MCP çš„"å¨èƒè°ƒæŸ¥ agent"ï¼‰ï¼Œæˆ‘ä½¿ç”¨ Claude Code SDK åœ¨æŠ•å…¥å®Œæ•´çš„ã€éƒ¨ç½²çš„è„šæ‰‹æ¶ä¹‹å‰å¿«é€Ÿæ„å»ºå’Œæµ‹è¯•åŸå‹ã€‚</p>
</li>
</ol>
<p><strong>è¦ç‚¹ï¼š</strong> Claude Code SDK æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ã€é€šç”¨çš„ agent æ¡†æ¶ã€‚ç”¨å®ƒæ¥æ‰¹å¤„ç†ä»£ç ã€æ„å»ºå†…éƒ¨å·¥å…·ï¼Œä»¥åŠåœ¨é‡‡ç”¨æ›´å¤æ‚çš„æ¡†æ¶ä¹‹å‰å¿«é€ŸåŸå‹åŒ–æ–°çš„ agentsã€‚</p>
<h2 data-id="heading-11">Claude Code GHA</h2>
<p>Claude Code GitHub Action (GHA) å¯èƒ½æ˜¯æˆ‘æœ€å–œæ¬¢å’Œæœ€è¢«ä½ä¼°çš„åŠŸèƒ½ä¹‹ä¸€ã€‚è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ¦‚å¿µï¼šåªæ˜¯åœ¨ GHA ä¸­è¿è¡Œ Claude Codeã€‚ä½†æ­£æ˜¯è¿™ç§ç®€å•æ€§ä½¿å…¶å¦‚æ­¤å¼ºå¤§ã€‚</p>
<p>å®ƒç±»ä¼¼äº Cursor çš„åå° agents æˆ– Codex æ‰˜ç®¡çš„ web UIï¼Œä½†å¯å®šåˆ¶æ€§æ›´å¼ºã€‚ä½ æ§åˆ¶æ•´ä¸ªå®¹å™¨å’Œç¯å¢ƒï¼Œç»™ä½ æ›´å¤šçš„æ•°æ®è®¿é—®æƒé™ï¼Œå…³é”®æ˜¯ï¼Œæ¯”ä»»ä½•å…¶ä»–äº§å“æä¾›æ›´å¼ºçš„æ²™ç›’å’Œå®¡è®¡æ§åˆ¶ã€‚æ­¤å¤–ï¼Œå®ƒæ”¯æŒæ‰€æœ‰é«˜çº§åŠŸèƒ½ï¼Œå¦‚ Hooks å’Œ MCPã€‚</p>
<p>æˆ‘ä»¬ç”¨å®ƒæ¥æ„å»ºè‡ªå®šä¹‰çš„"ä»ä»»ä½•åœ°æ–¹åˆ›å»º PR"å·¥å…·ã€‚ç”¨æˆ·å¯ä»¥ä» Slackã€Jira ç”šè‡³ CloudWatch è­¦æŠ¥è§¦å‘ PRï¼ŒGHA å°†ä¿®å¤é”™è¯¯æˆ–æ·»åŠ åŠŸèƒ½å¹¶è¿”å›ä¸€ä¸ªå®Œå…¨æµ‹è¯•çš„ PRÂ¹ã€‚</p>
<p>ç”±äº GHA æ—¥å¿—æ˜¯å®Œæ•´çš„ agent æ—¥å¿—ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ“ä½œæµç¨‹ï¼Œåœ¨å…¬å¸å±‚é¢å®šæœŸå®¡æŸ¥è¿™äº›æ—¥å¿—ï¼Œå¯»æ‰¾å¸¸è§é”™è¯¯ã€bash é”™è¯¯æˆ–ä¸å¯¹é½çš„å·¥ç¨‹å®è·µã€‚è¿™åˆ›å»ºäº†ä¸€ä¸ªæ•°æ®é©±åŠ¨çš„é£è½®ï¼šBugs â†’ æ”¹è¿›çš„ CLAUDE.md / CLIs â†’ æ›´å¥½çš„ Agentã€‚</p>
<pre><code class="hljs language-bash" lang="bash">$ query-claude-gha-logs --since 5d | claude -p <span class="hljs-string">"see what the other claudes were getting stuck on and fix it, then put up a PR"</span>
</code></pre>
<p><strong>è¦ç‚¹ï¼š</strong> GHA æ˜¯æ“ä½œåŒ– Claude Code çš„ç»ˆææ–¹å¼ã€‚å®ƒå°†å®ƒä»ä¸ªäººå·¥å…·è½¬å˜ä¸ºå·¥ç¨‹ç³»ç»Ÿçš„æ ¸å¿ƒã€å¯å®¡è®¡å’Œè‡ªæˆ‘æ”¹è¿›çš„éƒ¨åˆ†ã€‚</p>
<h2 data-id="heading-12">settings.json</h2>
<p>æœ€åï¼Œæˆ‘å‘ç°å¯¹äºä¸šä½™å’Œä¸“ä¸šå·¥ä½œï¼Œæœ‰å‡ ä¸ªç‰¹å®šçš„ <code>settings.json</code> é…ç½®è‡³å…³é‡è¦ã€‚</p>
<ul>
<li>
<p><strong><code>HTTPS_PROXY</code>/<code>HTTP_PROXY</code></strong>ï¼šè¿™å¯¹äºè°ƒè¯•å¾ˆæ£’ã€‚æˆ‘ç”¨å®ƒæ¥æ£€æŸ¥åŸå§‹æµé‡ï¼Œçœ‹çœ‹ Claude æ­£åœ¨å‘é€ä»€ä¹ˆæç¤ºã€‚å¯¹äºåå° agentsï¼Œå®ƒä¹Ÿæ˜¯ç»†ç²’åº¦ç½‘ç»œæ²™ç›’çš„å¼ºå¤§å·¥å…·ã€‚</p>
</li>
<li>
<p><strong><code>MCP_TOOL_TIMEOUT</code>/<code>BASH_MAX_TIMEOUT_MS</code></strong>ï¼šæˆ‘æé«˜äº†è¿™äº›ã€‚æˆ‘å–œæ¬¢è¿è¡Œé•¿è€Œå¤æ‚çš„å‘½ä»¤ï¼Œé»˜è®¤è¶…æ—¶é€šå¸¸è¿‡äºä¿å®ˆã€‚è€å®è¯´ï¼Œæ—¢ç„¶ bash åå°ä»»åŠ¡å·²ç»å­˜åœ¨ï¼Œæˆ‘ä¸ç¡®å®šè¿™æ˜¯å¦ä»ç„¶éœ€è¦ï¼Œä½†æˆ‘ä¿ç•™å®ƒä»¥é˜²ä¸‡ä¸€ã€‚</p>
</li>
<li>
<p><strong><code>ANTHROPIC_API_KEY</code></strong>ï¼šåœ¨å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¼ä¸š API å¯†é’¥ï¼ˆé€šè¿‡ apiKeyHelperï¼‰ã€‚å®ƒå°†æˆ‘ä»¬ä»"æŒ‰åº§ä½"è®¸å¯æ¨¡å¼è½¬å˜ä¸º"åŸºäºä½¿ç”¨"å®šä»·ï¼Œè¿™å¯¹æˆ‘ä»¬çš„å·¥ä½œæ–¹å¼æ¥è¯´æ˜¯æ›´å¥½çš„æ¨¡å‹ã€‚</p>
<ul>
<li>å®ƒè€ƒè™‘äº†å¼€å‘è€…ä½¿ç”¨çš„å·¨å¤§å·®å¼‚ï¼ˆæˆ‘ä»¬çœ‹åˆ°å·¥ç¨‹å¸ˆä¹‹é—´æœ‰ 1:100x çš„å·®å¼‚ï¼‰ã€‚</li>
<li>å®ƒè®©å·¥ç¨‹å¸ˆå¯ä»¥åœ¨æˆ‘ä»¬çš„å•ä¸€ä¼ä¸šè´¦æˆ·ä¸‹å°è¯•é Claude Code LLM è„šæœ¬ã€‚</li>
</ul>
</li>
<li>
<p><strong><code>"permissions"</code></strong>ï¼šæˆ‘å¶å°”ä¼šè‡ªæˆ‘å®¡è®¡æˆ‘å…è®¸ Claude è‡ªåŠ¨è¿è¡Œçš„å‘½ä»¤åˆ—è¡¨ã€‚</p>
</li>
</ul>
<p><strong>è¦ç‚¹ï¼š</strong> ä½ çš„ <code>settings.json</code> æ˜¯é«˜çº§è‡ªå®šä¹‰çš„å¼ºå¤§åœ°æ–¹ã€‚</p>
<h2 data-id="heading-13">Conclusion</h2>
<p>å†…å®¹å¾ˆå¤šï¼Œä½†å¸Œæœ›ä½ è§‰å¾—æœ‰ç”¨ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰ä½¿ç”¨åŸºäº CLI çš„ agentï¼Œå¦‚ Claude Code æˆ– Codex CLIï¼Œä½ å¯èƒ½åº”è¯¥å¼€å§‹ä½¿ç”¨ã€‚å…³äºè¿™äº›é«˜çº§åŠŸèƒ½å¾ˆå°‘æœ‰å¥½çš„æŒ‡å—ï¼Œæ‰€ä»¥å­¦ä¹ çš„å”¯ä¸€æ–¹æ³•æ˜¯æŠ•å…¥å…¶ä¸­ã€‚</p>
<hr/>
<p>Â¹å¯¹æˆ‘æ¥è¯´ï¼Œä¸€ä¸ªç›¸å½“æœ‰è¶£çš„å“²å­¦é—®é¢˜æ˜¯ï¼Œä¸€ä¸ªç›´æ¥ä»å®¢æˆ·è¯·æ±‚ï¼ˆæ²¡æœ‰å†…éƒ¨äººç±»æç¤ºè€…ï¼‰ç”Ÿæˆçš„ PR åº”è¯¥æœ‰å¤šå°‘å®¡æŸ¥è€…ï¼Ÿæˆ‘ä»¬ç°åœ¨æš‚æ—¶å¯¹ä»»ä½• AI å‘èµ·çš„ PR é‡‡ç”¨ 2 ä¸ªäººç±»æ‰¹å‡†ï¼Œä½†å½“ä¸å†æ˜¯äººä¸ºå¦ä¸€ä¸ªäººç±»åˆ¶ä½œä¸œè¥¿ä¾›å…¶å®¡æŸ¥æ—¶ï¼Œè¿™æœ‰ç‚¹å¥‡æ€ªçš„æ¨¡å¼è½¬å˜ï¼ˆè‡³å°‘å¯¹æˆ‘æ¥è¯´æ˜¯è¿™æ ·ï¼‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬ä¸€æ¬¡ç”¨ Ollama è·‘è§†è§‰æ¨¡å‹ï¼šQwen2.5-VL 7B ç»™äº†æˆ‘ä¸€ä¸ªæ„å¤–æƒŠå–œ]]></title>    <link>https://juejin.cn/post/7572510909445783602</link>    <guid>https://juejin.cn/post/7572510909445783602</guid>    <pubDate>2025-11-15T14:43:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572510909445783602" data-draft-id="7572497847770972187" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬ä¸€æ¬¡ç”¨ Ollama è·‘è§†è§‰æ¨¡å‹ï¼šQwen2.5-VL 7B ç»™äº†æˆ‘ä¸€ä¸ªæ„å¤–æƒŠå–œ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-15T14:43:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‹‡å“¥Javaå®æˆ˜"/> <meta itemprop="url" content="https://juejin.cn/user/3693987061329080"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬ä¸€æ¬¡ç”¨ Ollama è·‘è§†è§‰æ¨¡å‹ï¼šQwen2.5-VL 7B ç»™äº†æˆ‘ä¸€ä¸ªæ„å¤–æƒŠå–œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3693987061329080/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‹‡å“¥Javaå®æˆ˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T14:43:19.000Z" title="Sat Nov 15 2025 14:43:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰å‡ å¤©åœ¨ Mac ä¸Šå®‰è£…äº† Ollamaï¼Œå¹¶ä¸‹è½½äº† Qwen2.5-VL 7B åšäº†ä¸€äº›æµ‹è¯•ï¼Œæ•´ä¸ªè¿‡ç¨‹è¿˜æŒºæœ‰æ„æ€ï¼Œåˆ†äº«ç»™å¤§å®¶ã€‚</p>
<h2 data-id="heading-0">1 Mac å®‰è£… Ollama</h2>
<p>è¿›å…¥ Ollama å®˜ç½‘ ï¼Œæˆ‘çš„ç”µè„‘æ˜¯ Mac Studio ï¼Œæ‰€ä»¥é€‰æ‹© MacOS ä¸‹è½½ ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18c08a20628e46939de3845bc0741a28~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YuH5ZOlSmF2YeWunuaImA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763822598&amp;x-signature=xNMGGgrNT7Ld1ODuyem0ql4itVU%3D" alt="image-20251115204120250" loading="lazy"/></p>
<p>ä¸‹è½½å®Œæˆåï¼ŒåŒå‡»å®‰è£… ï¼Œå®‰è£…å®Œæˆåç•Œé¢å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0aac9729c09d46b898d3aaf639483421~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YuH5ZOlSmF2YeWunuaImA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763822598&amp;x-signature=R2l61ISKOmHaKFCLxyvv4cLIKy0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">2 ä¸‹è½½ Qwen 2.5 VL 7B</h2>
<p>Qwen 2.5-VL æ˜¯é˜¿é‡Œå·´å·´é€šä¹‰åƒé—®å›¢é˜Ÿå¼€å‘çš„ä¸€æ¬¾å¼€æºçš„æ——èˆ°çº§è§†è§‰è¯­è¨€æ¨¡å‹ã€‚</p>
<p>å®ƒèƒ½å¤Ÿå¤„ç†æ–‡æœ¬ã€å›¾åƒå’Œè§†é¢‘ï¼Œå¹¶å…·å¤‡å¼ºå¤§çš„è§†è§‰ç†è§£å’Œäº¤äº’èƒ½åŠ›ã€‚è¯¥æ¨¡å‹æœ‰ä¸åŒå‚æ•°è§„æ¨¡ï¼ˆå¦‚ 3Bã€7B å’Œ 72Bï¼‰ï¼Œé€‚ç”¨äºä»è¾¹ç¼˜ AI åˆ°é«˜æ€§èƒ½è®¡ç®—çš„å¤šç§åœºæ™¯ ã€‚</p>
<p>ä¸‹è½½ Qwen 2.5 VL æœ‰ä¸¤ç§æ–¹å¼ ï¼š</p>
<p><strong>1ã€é€šè¿‡å‘½ä»¤è¡Œè¯·æ±‚</strong></p>
<pre><code class="hljs">ollama pull qwen2.5vl:7b
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c498324096134bb89fcc8a6720e6c43f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YuH5ZOlSmF2YeWunuaImA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763822598&amp;x-signature=LhXMCOCs6vaemLnqTHzaGoV4VX8%3D" alt="" loading="lazy"/></p>
<p><strong>2ã€é€šè¿‡ Ollama GUI ç•Œé¢å®‰è£…</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6af61ece64e44ad4a852809189094c6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YuH5ZOlSmF2YeWunuaImA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763822598&amp;x-signature=%2BV%2BnGnhaQ8r%2Bhg8cduLbzSc4U3k%3D" alt="" loading="lazy"/></p>
<p>åœ¨ GUI ç•Œé¢é€‰æ‹©æ¨¡å‹ ï¼Œè‹¥æœªä¸‹è½½ä¼šæ˜¾ç¤ºä¸‹è½½å›¾æ ‡ï¼Œç„¶ååœ¨å¯¹è¯æ¡†ä¸­è¾“å…¥ä»»æ„æ–‡æœ¬å³å¯è‡ªåŠ¨ä¸‹è½½ã€‚</p>
<h2 data-id="heading-2">3 æ–‡æœ¬/å›¾ç‰‡ä½“éªŒ</h2>
<p>ä¸‹è½½å®Œæ¨¡å‹åï¼Œå³å¯åœ¨å¯¹è¯æ¡†ä¸­è¿›è¡Œå¯¹è¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/652343a76a76444b90294d8579ccf729~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YuH5ZOlSmF2YeWunuaImA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763822598&amp;x-signature=PK9q5%2Bs%2BHqlFW3Mh3BGitEBxzA4%3D" alt="" loading="lazy"/></p>
<p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ ollama å¯åŠ¨æ¨¡å‹åå±•å¼€å¯¹è¯ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">ollama run qwen2<span class="hljs-number">.5</span>vl:<span class="hljs-number">7b</span>
</code></pre>
<p>æ¥ä¸‹æ¥ï¼Œè¿›è¡Œå›¾ç‰‡æ£€æµ‹ï¼Œå›¾ç‰‡å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6b6fb58686541caa1886c875d4bc7e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YuH5ZOlSmF2YeWunuaImA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763822598&amp;x-signature=NRsviItMqgwuHOKJjK0GNJ582qg%3D" alt="" loading="lazy"/></p>
<p>æ£€æµ‹ç»“æœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57e3a93aed86459ca6c71fe48aeaae8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YuH5ZOlSmF2YeWunuaImA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763822598&amp;x-signature=%2FplIQsTRUkFT8t5d7lSNqCKDqE8%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡è¯¥æ¨¡å‹è¯†åˆ«å›¾åƒä¸­çš„æ–‡å­—ã€å…¬å¼æˆ–æŠ½å–ç¥¨æ®ã€è¯ä»¶ã€è¡¨å•ä¸­çš„ä¿¡æ¯ï¼Œæ”¯æŒæ ¼å¼åŒ–è¾“å‡ºæ–‡æœ¬ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e512c6b3b1c47ef872bbd4fc40cae9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YuH5ZOlSmF2YeWunuaImA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763822598&amp;x-signature=lDJAGUQo0HVAHwX74WfNbhV21Xg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">4 ç¨‹åºè°ƒç”¨åˆ†æå›¾ç‰‡</h2>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ç¼–å†™ python è°ƒç”¨ Ollama æ¥å£ï¼ŒåŒæ ·æ˜¯åˆ†æå›¾ç‰‡ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fef6e0a70d33491d83ee831c437d6886~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YuH5ZOlSmF2YeWunuaImA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763822598&amp;x-signature=BO8d8z3k8xfvKu7KUojX%2FcE%2BoLQ%3D" alt="" loading="lazy"/></p>
<p>åŒæ ·ï¼ŒOllama ä¹Ÿæ”¯æŒå…¼å®¹ OpenAI çš„æ¥å£åè®® ï¼Œå¯ä»¥å®ç°æµå¼å¯¹è¯ï¼Œè§ä¸‹å›¾ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">curl http://localhost:<span class="hljs-number">11434</span>/api/chat -d <span class="hljs-comment">'{</span>
 Â <span class="hljs-string">"model"</span>: <span class="hljs-string">"qwen2.5vl:7b"</span>,
 Â <span class="hljs-string">"messages"</span>: [
 Â   { <span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"å†™ä¸€æ®µä»£ç "</span> }
  ]
}<span class="hljs-comment">'</span>
</code></pre>
<p>æ•ˆæœè§ä¸‹å›¾ ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9f803bb3c794d59b1f61528b138ced3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YuH5ZOlSmF2YeWunuaImA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763822598&amp;x-signature=2qoq8esIsQzQACIPSNLRQmSdf54%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">5 æ€»ç»“</h2>
<p>Qwen 2.5-VL 7B ç®€ç›´å°±æ˜¯â€œæœ¬åœ°è§†è§‰å°é’¢ç‚®â€ï¼Œå„ç§å›¾åƒä¿¡æ¯éƒ½èƒ½ä¸€æŠŠæŠ“ï¼Œæ— è®ºç»™å®ƒæˆªå›¾ã€ç¥¨æ®ã€å›¾è¡¨è¿˜æ˜¯å¤æ‚åœºæ™¯ï¼Œå®ƒéƒ½èƒ½æœ‰æ‰€ä½œä¸ºã€‚</p>
<p>ç¬”è€…è®¤ä¸ºå®ƒå°¤å…¶é€‚åˆåœ¨å¦‚ä¸‹åœºæ™¯ä¸­å‘æŒ¥ä½œç”¨ï¼š</p>
<ul>
<li><strong>æ–‡æ¡£å’Œç¥¨æ®è§£æ</strong>ï¼šå‘ç¥¨ã€åˆåŒã€æŠ¥è¡¨ã€æ‰«æä»¶ï¼Œä¸€æ¬¡æ¨ç†å³å¯æå–æ–‡å­—å¹¶ç”Ÿæˆç»“æ„åŒ–æ•°æ®</li>
<li><strong>è¡¨æ ¼ä¸å›¾è¡¨è§£æ</strong>ï¼šè´¢åŠ¡æŠ¥è¡¨ã€ç»Ÿè®¡å›¾è¡¨ï¼Œå¿«é€Ÿæå–è¡¨å¤´å’Œæ•°æ®ï¼Œæ–¹ä¾¿åç»­åˆ†æ</li>
<li><strong>å›¾ç‰‡åœºæ™¯ç†è§£</strong>ï¼šä»“åº“ã€æœºæˆ¿ã€åŠå…¬å®¤ç­‰ç…§ç‰‡ï¼Œè‡ªåŠ¨è¯†åˆ«ç‰©ä½“å’Œæ•´ä½“åœºæ™¯</li>
<li><strong>å¤šæ¨¡æ€é—®ç­”</strong>ï¼šç»“åˆå›¾ç‰‡å’Œæ–‡æœ¬å†…å®¹å›ç­”é—®é¢˜ï¼Œæ”¯æŒç§‘ç ”ã€æ•™è‚²æˆ–äº§å“åŸå‹</li>
<li><strong>å†…å®¹å®¡æ ¸ä¸åˆè§„æ£€æµ‹</strong>ï¼šè¯†åˆ«æ•æ„Ÿæ–‡å­—æˆ–è¿è§„å›¾åƒï¼Œæœ¬åœ°éƒ¨ç½²ä¿æŠ¤éšç§</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•ä½¿ç”¨Superpowers MCPå¼ºåˆ¶Claude Codeåœ¨ç¼–ç å‰è¿›è¡Œè§„åˆ’]]></title>    <link>https://juejin.cn/post/7572714389922889768</link>    <guid>https://juejin.cn/post/7572714389922889768</guid>    <pubDate>2025-11-15T14:51:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572714389922889768" data-draft-id="7572524368878927906" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•ä½¿ç”¨Superpowers MCPå¼ºåˆ¶Claude Codeåœ¨ç¼–ç å‰è¿›è¡Œè§„åˆ’"/> <meta itemprop="keywords" content="Claude"/> <meta itemprop="datePublished" content="2025-11-15T14:51:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯é­”ä¸¸å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/3217622495411292"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•ä½¿ç”¨Superpowers MCPå¼ºåˆ¶Claude Codeåœ¨ç¼–ç å‰è¿›è¡Œè§„åˆ’
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3217622495411292/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯é­”ä¸¸å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T14:51:54.000Z" title="Sat Nov 15 2025 14:51:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.trevorlasn.com%2Fblog%2Fsuperpowers-claude-code-skills" target="_blank" title="https://www.trevorlasn.com/blog/superpowers-claude-code-skills" ref="nofollow noopener noreferrer">è½¬è½½</a></p>
<p>Superpowersæ˜¯ä¸€ä¸ªå¼ºåˆ¶æ‰§è¡Œç³»ç»ŸåŒ–å·¥ä½œæµçš„MCPã€‚æˆ‘ä½¿ç”¨å®ƒå°†skillcraftå‡çº§åˆ°Next.js 16ï¼Œæ²¡æœ‰é—æ¼ä»»ä½•ä¸€ä¸ªæ–‡ä»¶ã€‚</p>
<p>æˆ‘è¿‡å»å‡ ä¸ªæœˆä¸€ç›´åœ¨ç”¨Claudeæ„å»ºskillcraft.aiã€‚Claudeå¾ˆæ“…é•¿å¿«é€Ÿç¼–å†™ä»£ç ï¼Œä½†å®ƒæœ‰ä¸€ä¸ªé—®é¢˜ï¼šå®ƒç»å¸¸è·³è¿‡æ­¥éª¤ã€‚</p>
<p>å½“æˆ‘è®©Claudeå¸®åŠ©è¿ç§»æŸä¸ªå¤§å‹é¡¹ç›®æ—¶ï¼Œå®ƒä¼šç«‹å³å¼€å§‹å»ºè®®ä¿®æ”¹ã€‚æ²¡æœ‰è§„åˆ’é˜¶æ®µã€‚æ²¡æœ‰"è®©æˆ‘å…ˆæ‰¾åˆ°æ‰€æœ‰éœ€è¦æ›´æ–°çš„æ–‡ä»¶"ã€‚åªæ˜¯ç›´æ¥è¿›å…¥ä»£ç ä¿®æ”¹å¹¶æœŸæœ›è·å¾—æœ€å¥½çš„ç»“æœã€‚</p>
<p>è¿™å°±æ˜¯ä½ é—æ¼æ–‡ä»¶çš„æ–¹å¼ã€‚è¿™å°±æ˜¯ä½ å‘å¸ƒbugçš„æ–¹å¼ã€‚</p>
<p>Superpowersæ˜¯ä¸€ä¸ªè§£å†³è¿™ä¸ªé—®é¢˜MCPã€‚å®ƒåŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªç»“æ„åŒ–å·¥ä½œæµåº“â€”â€”æµ‹è¯•ã€è°ƒè¯•ã€è§„åˆ’â€”â€”Claude Codeä¼šè‡ªåŠ¨åŠ è½½å¹¶çœŸæ­£éµå¾ªçš„å·¥ä½œæµã€‚</p>
<p>Claude Codeä¸­çš„skillæ˜¯ä¸€ä¸ªåŒ…å«æŒ‡ä»¤ã€è„šæœ¬å’Œèµ„æºçš„æ–‡ä»¶å¤¹ï¼ŒClaudeåœ¨éœ€è¦æ—¶ä¼šåŠ è½½å®ƒã€‚è¿™æ˜¯Anthropicçš„Agent SkillsåŠŸèƒ½çš„ä¸€éƒ¨åˆ†ï¼Œè¯¥åŠŸèƒ½å¯åœ¨Claudeåº”ç”¨ã€Claude Codeå’ŒAPIä¸­å·¥ä½œã€‚æ¯ä¸ªskillå®šä¹‰äº†å®ƒä½•æ—¶é€‚ç”¨ã€éµå¾ªä»€ä¹ˆæµç¨‹ä»¥åŠä¸èƒ½èµ°ä»€ä¹ˆæ·å¾„ã€‚å½“ä½ å¼€å§‹ä¸€ä¸ªåŒ¹é…skillçš„ä»»åŠ¡æ—¶ï¼ŒClaudeä¼šæ‰«æå¯ç”¨çš„skillsï¼Œæ‰¾åˆ°åŒ¹é…é¡¹å¹¶è‡ªåŠ¨åŠ è½½å®ƒã€‚</p>
<p>æˆ‘ç»å¸¸ä½¿ç”¨ä¸‰ä¸ªæ–œæ å‘½ä»¤ï¼š</p>





















<table><thead><tr><th>å‘½ä»¤</th><th>å®ƒçš„ä½œç”¨</th></tr></thead><tbody><tr><td><code>/superpowers:brainstorm</code></td><td>åœ¨ç¼–ç å‰å®Œå–„ç²—ç•¥çš„æƒ³æ³•</td></tr><tr><td><code>/superpowers:write-plan</code></td><td>åˆ›å»ºè¯¦ç»†çš„å®æ–½è®¡åˆ’</td></tr><tr><td><code>/superpowers:execute-plan</code></td><td>ä»¥æ‰¹æ¬¡æ–¹å¼è¿è¡Œè®¡åˆ’å¹¶è¿›è¡Œå®¡æŸ¥æ£€æŸ¥ç‚¹</td></tr></tbody></table>
<p>æˆ‘å°†Superpowersæ·»åŠ åˆ°æˆ‘çš„<code>CLAUDE.md</code>ä¸­ï¼Œè¿™æ ·å®ƒåœ¨æ¯æ¬¡ä¼šè¯æ—¶éƒ½ä¼šè‡ªåŠ¨åŠ è½½ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Project Setup</span>

Use the Superpowers MCP <span class="hljs-keyword">for</span> <span class="hljs-built_in">all</span> development work. Load it at session start.
</code></pre>
<p>è¿™å¯¹tokenæ•ˆç‡æ¥è¯´æ„ä¹‰é‡å¤§â€”â€”Claudeä¸å†ç‡ƒçƒ§contextè¯•å›¾å°†æ‰€æœ‰å†…å®¹ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè€Œæ˜¯å°†å·¥ä½œåˆ†æˆ5åˆ†é’Ÿçš„å—å¹¶å°†è¿›åº¦å†™å…¥markdownæ–‡ä»¶ã€‚ä½ æ°¸è¿œä¸ä¼šåœ¨ä¼šè¯ä¹‹é—´ä¸¢å¤±ä¸Šä¸‹æ–‡ï¼Œå› ä¸ºè®¡åˆ’å°±åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè€Œä¸æ˜¯é”å®šåœ¨ä¸‰å°æ—¶å‰è¾¾åˆ°tokené™åˆ¶çš„æŸä¸ªå¯¹è¯ä¸­ã€‚</p>
<p>ç”Ÿæˆçš„æ–‡ä»¶çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">~<span class="hljs-regexp">/.config/superpowers</span><span class="hljs-regexp">/
â””â”€â”€ plans/</span>
    â””â”€â”€ nextjs-<span class="hljs-number">16</span>-migration/
        â”œâ”€â”€ <span class="hljs-variable constant_">PLAN</span>.md                  <span class="hljs-comment"># Complete migration roadmap</span>
        â”œâ”€â”€ progress.md              <span class="hljs-comment"># Current status and completed tasks</span>
        â””â”€â”€ verification.md          <span class="hljs-comment"># Test commands and success criteria</span>
</code></pre>
<p><code>PLAN.md</code>æ–‡ä»¶åŒ…å«æ‰€æœ‰å†…å®¹ï¼š</p>





































<table><thead><tr><th>éƒ¨åˆ†</th><th>åŒ…å«å†…å®¹</th></tr></thead><tbody><tr><td>Overview</td><td>éœ€è¦æ”¹å˜ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ</td></tr><tr><td>Phase 1</td><td>APIè·¯ç”±é‡æ„ï¼ˆ23ä¸ªæ–‡ä»¶ï¼‰</td></tr><tr><td>Phase 2</td><td>ç»„ä»¶æ—¶é—´æ•æ„Ÿæ€§ä¿®å¤</td></tr><tr><td>Phase 3</td><td>Context provider Suspenseè¾¹ç•Œ</td></tr><tr><td>Phase 4</td><td>å¯ç”¨cacheComponents</td></tr><tr><td>Phase 5</td><td>æµ‹è¯•å’ŒéªŒè¯</td></tr><tr><td>Rollback</td><td>å¦‚æœå‡ºç°æ•…éšœæ€ä¹ˆåŠ</td></tr></tbody></table>
<p>Skillcraftè¿è¡Œåœ¨Next.jsä¸Šï¼Œæˆ‘æƒ³å¯ç”¨Next.js 16ä¸­çš„æ–°<code>cacheComponents</code>åŠŸèƒ½ã€‚è¿™ä¸ªä¸œè¥¿ä¼šç ´åå„ç§æ¨¡å¼â€”â€”è®¿é—®<code>searchParams</code>çš„APIè·¯ç”±ï¼Œä½¿ç”¨<code>new Date()</code>çš„ç»„ä»¶ï¼Œæ²¡æœ‰Suspenseè¾¹ç•Œçš„context providersã€‚</p>
<p>æˆ‘è¿è¡Œ<code>/superpowers:write-plan</code>å¹¶å¾—åˆ°äº†ä¸€ä¸ª500è¡Œçš„è®¡åˆ’ã€‚ä¸æ˜¯ä¸€äº›æ¨¡ç³Šçš„å¤§çº²ï¼Œè€Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„è·¯çº¿å›¾ï¼šæ‰€æœ‰23ä¸ªéœ€è¦æ›´æ”¹çš„APIè·¯ç”±æ–‡ä»¶ï¼Œä¸¤ä¸ªä¼šç ´åé¢„æ¸²æŸ“çš„ä½¿ç”¨<code>new Date()</code>çš„ç»„ä»¶ï¼Œéœ€è¦Suspenseè¾¹ç•Œçš„ç‰¹å®šcontext providersï¼Œä»¥åŠä¸€ä¸ªå¸¦æœ‰æµ‹è¯•æ£€æŸ¥ç‚¹çš„4å¤©æ—¶é—´çº¿ã€‚</p>
<p>è¯¥è®¡åˆ’åŒ…å«äº†æ¯ä¸ªé˜¶æ®µçš„éªŒè¯å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Test specific endpoints after API refactoring</span>
curl http://localhost:3000/api/leaderboard
curl http://localhost:3000/api/courses/recent
curl http://localhost:3000/api/topics
</code></pre>
<p>å®ƒè®°å½•äº†ä¿®æ”¹å‰åçš„æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Before: Incompatible with cacheComponents</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> runtime = <span class="hljs-string">'nodejs'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> dynamic = <span class="hljs-string">'force-dynamic'</span>

<span class="hljs-comment">// After: Clean (API routes are dynamic by default)</span>
<span class="hljs-comment">// Note: With cacheComponents enabled, API routes are dynamic by default</span>
</code></pre>
<p>å®ƒç”šè‡³å®šä¹‰äº†æˆåŠŸæ ‡å‡†ï¼ˆæ„å»ºæˆåŠŸï¼ŒCLSä¿æŒåœ¨0.000ï¼ŒLighthouseåˆ†æ•°â‰¥ 95ï¼‰å’Œå›æ»šè®¡åˆ’ã€‚</p>
<p>æ²¡æœ‰è¿™ä¸ªè®¡åˆ’ï¼Œæˆ‘ä¼šå¯ç”¨cacheComponentsï¼Œé‡åˆ°é”™è¯¯ï¼Œé€ä¸€ä¿®å¤ï¼Œå¹¶è‚¯å®šä¼šé—æ¼è¾¹ç¼˜æƒ…å†µã€‚è¿ç§»ä¼šéœ€è¦å‡ å¤©çš„ååº”å¼è°ƒè¯•ã€‚æœ‰äº†è®¡åˆ’ï¼Œåœ¨æ¥è§¦ä»»ä½•ä»£ç ä¹‹å‰æˆ‘å°±æœ‰äº†å®Œæ•´çš„è·¯çº¿å›¾ã€‚</p>
<p>è¯¥åº“åŒ…å«å¤šä¸ªç”¨äºæµ‹è¯•ã€è°ƒè¯•å’Œå¼€å‘å·¥ä½œæµçš„skillsï¼š</p>





















<table><thead><tr><th>Skill</th><th>å®ƒå¼ºåˆ¶æ‰§è¡Œçš„å†…å®¹</th></tr></thead><tbody><tr><td><code>test-driven-development</code></td><td>RED-GREEN-REFACTORï¼šç¼–å†™æµ‹è¯•ï¼Œè§‚å¯Ÿå¤±è´¥ï¼Œç¼–å†™ä»£ç </td></tr><tr><td><code>systematic-debugging</code></td><td>4é˜¶æ®µæ–¹æ³•ï¼šæ ¹æœ¬åŸå› è°ƒæŸ¥ â†’ æ¨¡å¼åˆ†æ â†’ å‡è®¾æµ‹è¯• â†’ å®æ–½</td></tr><tr><td><code>verification-before-completion</code></td><td>åœ¨å£°ç§°å·¥ä½œå®Œæˆä¹‹å‰è¿è¡ŒéªŒè¯å‘½ä»¤å¹¶ç¡®è®¤è¾“å‡º</td></tr></tbody></table>
<p>è¿™äº›skillså­—é¢ä¸Šé˜»æ­¢ä½ è·³è¿‡æ­¥éª¤ã€‚å†ä¹Ÿæ²¡æœ‰"æˆ‘è®¤ä¸ºå®ƒæœ‰æ•ˆ"è€Œæ²¡æœ‰è¯æ˜çš„æƒ…å†µã€‚</p>
<p>å¦‚æœä½ æ­£åœ¨è¿›è¡Œè¿ç§»å¹¶éœ€è¦æ‰¾åˆ°ä¸€ä¸ªæ¨¡å¼çš„æ‰€æœ‰å®ä¾‹ï¼ŒSuperpowersä¼šæ‰¾åˆ°å®ƒä»¬æ‰€æœ‰ã€‚å¦‚æœä½ æ­£åœ¨è°ƒè¯•å¹¶å³å°†çŒœæµ‹ä¿®å¤æ–¹æ¡ˆï¼Œå®ƒä¼šé˜»æ­¢ä½ å¹¶è®©ä½ å…ˆè°ƒæŸ¥æ ¹æœ¬åŸå› ã€‚å¦‚æœé—æ¼ä¸€ä¸ªæ–‡ä»¶ä¼šç ´åç”Ÿäº§ç¯å¢ƒï¼Œå®ƒä¼šåœ¨ä½ å®Œæˆä¹‹å‰è®©ä½ éªŒè¯ä¸€åˆ‡ã€‚</p>
<h2 data-id="heading-0">å®‰è£…</h2>
<p>Superpowersä¸Claude Codeï¼ˆCLIå·¥å…·ï¼‰ä¸€èµ·å·¥ä½œã€‚é€šè¿‡æ’ä»¶å¸‚åœºå®‰è£…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># In Claude Code</span>
/plugin marketplace add obra/superpowers-marketplace
/plugin install superpowers@superpowers-marketplace
</code></pre>
<p>æˆ–è€…æ‰‹åŠ¨å°†å…¶æ·»åŠ åˆ°<code>.claude/plugins.json</code>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"plugins"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"superpowers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"github"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"owner"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"obra"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"repo"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"superpowers"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å½“Claude Codeå¯åŠ¨æ—¶ï¼Œä½ ä¼šçœ‹åˆ°skillsåŠ è½½çš„ç¡®è®¤ä¿¡æ¯ã€‚ç„¶ååªéœ€ä½¿ç”¨æ–œæ å‘½ä»¤ï¼šåœ¨å¼€å§‹å¤æ‚åŠŸèƒ½ä¹‹å‰ä½¿ç”¨<code>/superpowers:brainstorm</code>ï¼Œå¯¹äºè¿ç§»æˆ–å¤šæ–‡ä»¶é‡æ„ä½¿ç”¨<code>/superpowers:write-plan</code>ï¼Œä½¿ç”¨<code>/superpowers:execute-plan</code>ä»¥æ‰¹æ¬¡æ–¹å¼è¿è¡Œè¿™äº›è®¡åˆ’ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åç«¯å¼€å‘å¦‚ä½•å°†åˆ›æ–°è½¬åŒ–ä¸ºä¸“åˆ©ï¼Ÿæ¡ˆä¾‹ã€æµç¨‹ä¸å®æ“æŒ‡å—]]></title>    <link>https://juejin.cn/post/7572403510468296747</link>    <guid>https://juejin.cn/post/7572403510468296747</guid>    <pubDate>2025-11-15T13:13:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572403510468296747" data-draft-id="7572481101710000182" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åç«¯å¼€å‘å¦‚ä½•å°†åˆ›æ–°è½¬åŒ–ä¸ºä¸“åˆ©ï¼Ÿæ¡ˆä¾‹ã€æµç¨‹ä¸å®æ“æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-15T13:13:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="oioihoii"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åç«¯å¼€å‘å¦‚ä½•å°†åˆ›æ–°è½¬åŒ–ä¸ºä¸“åˆ©ï¼Ÿæ¡ˆä¾‹ã€æµç¨‹ä¸å®æ“æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    oioihoii
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T13:13:16.000Z" title="Sat Nov 15 2025 13:13:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æŠ€æœ¯é©±åŠ¨çš„å•†ä¸šç¯å¢ƒä¸­ï¼Œä¸“åˆ©ä¸ä»…æ˜¯æ³•å¾‹ä¿æŠ¤çš„ç›¾ç‰Œï¼Œæ›´æ˜¯ä¼ä¸šæ ¸å¿ƒç«äº‰åŠ›çš„ä½“ç°ã€‚å¾ˆå¤šåç«¯å¼€å‘è€…å¯èƒ½è®¤ä¸ºä¸“åˆ©ç¦»æ—¥å¸¸ coding å¾ˆé¥è¿œï¼Œä½†å®é™…ä¸Šï¼Œ<strong>åç«¯æŠ€æœ¯æ–¹æ¡ˆå®Œå…¨å¯ä»¥ç”³è¯·ä¸“åˆ©</strong>ï¼Œåªè¦å®ƒèƒ½è§£å†³å…·ä½“çš„æŠ€æœ¯é—®é¢˜å¹¶äº§ç”ŸæŠ€æœ¯æ•ˆæœã€‚æœ¬æ–‡å°†ç»“åˆçœŸå®æ¡ˆä¾‹ï¼Œä¸ºä½ è§£æåç«¯ä¸“åˆ©ä»æ„æ€åˆ°è½åœ°çš„å…¨è¿‡ç¨‹ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ ä¸ºä»€ä¹ˆåç«¯åˆ›æ–°å¯ä»¥ç”³è¯·ä¸“åˆ©ï¼Ÿ</h2>
<p>è®¸å¤šäººæœ‰ä¸€ä¸ªè¯¯è§£ï¼Œè®¤ä¸ºâ€œè½¯ä»¶ä»£ç â€æˆ–â€œç®—æ³•â€ä¸èƒ½ç”³è¯·ä¸“åˆ©ã€‚å®é™…ä¸Šï¼Œæ³•å¾‹æ’æ–¥çš„æ˜¯<strong>çº¯ç²¹çš„æ•°å­¦ç®—æ³•ã€å•†ä¸šæ–¹æ³•æˆ–æ™ºåŠ›æ´»åŠ¨è§„åˆ™</strong>æœ¬èº«ï¼Œä½†å½“ä½ çš„ç¨‹åº<strong>ä½œä¸ºæŠ€æœ¯æ–¹æ¡ˆçš„ä¸€éƒ¨åˆ†</strong>ï¼Œç”¨äºè§£å†³å…·ä½“æŠ€æœ¯é—®é¢˜æ—¶ï¼Œå®ƒå°±å…·å¤‡äº†ç”³è¯·ä¸“åˆ©çš„æ½œåŠ›ã€‚</p>
<p>æ ¹æ®ã€Šä¸“åˆ©å®¡æŸ¥æŒ‡å—ã€‹ï¼Œåˆ¤æ–­ä¸€ä¸ªæ¶‰åŠè®¡ç®—æœºç¨‹åºçš„å‘æ˜æ˜¯å¦å¯ä¸“åˆ©ï¼Œå…³é”®åœ¨äºå®ƒæ˜¯å¦æ„æˆäº†ä¸€ä¸ª <strong>â€œæŠ€æœ¯æ–¹æ¡ˆâ€</strong> ï¼Œå³ï¼š</p>
<ul>
<li><strong>è§£å†³çš„æ˜¯æŠ€æœ¯é—®é¢˜</strong>ï¼ˆå¦‚æå‡ç¡¬ä»¶æ•ˆèƒ½ã€ä¼˜åŒ–ç½‘ç»œèµ„æºã€ä¿éšœæ•°æ®å®‰å…¨ï¼‰</li>
<li><strong>é‡‡ç”¨äº†éµå¾ªè‡ªç„¶è§„å¾‹çš„æŠ€æœ¯æ‰‹æ®µ</strong>ï¼ˆé€šè¿‡è®¡ç®—æœºç¨‹åºå¯¹è®¡ç®—æœºå†…éƒ¨æˆ–å¤–éƒ¨å¯¹è±¡è¿›è¡Œæ§åˆ¶æˆ–å¤„ç†ï¼‰</li>
<li><strong>è·å¾—äº†ç¬¦åˆè‡ªç„¶è§„å¾‹çš„æŠ€æœ¯æ•ˆæœ</strong>ï¼ˆå¦‚é™ä½æœåŠ¡å™¨è´Ÿè½½ã€æé«˜æ•°æ®å¤„ç†é€Ÿåº¦ï¼‰</li>
</ul>
<p><strong>åç«¯ä¸“åˆ©ä¿æŠ¤çš„æ˜¯ä»€ä¹ˆï¼Ÿ</strong>
ä¸ä¿æŠ¤ä»£ç è¡¨è¾¾å½¢å¼çš„<strong>è½¯ä»¶è‘—ä½œæƒ</strong>ä¸åŒï¼Œä¸“åˆ©ä¿æŠ¤çš„æ˜¯è½¯ä»¶çš„è®¾è®¡<strong>æ„æ€ä¸è§£å†³æ–¹æ¡ˆ</strong>ã€‚è¿™æ„å‘³ç€ï¼Œå³ä¾¿ä»–äººç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€é‡å†™äº†ä½ çš„æ ¸å¿ƒé€»è¾‘ï¼Œåªè¦å®ç°äº†ç›¸åŒçš„æŠ€æœ¯æ–¹æ¡ˆï¼Œä¹Ÿå¯èƒ½æ„æˆä¾µæƒã€‚</p>
<h2 data-id="heading-1">äºŒã€ çœŸå®æ¡ˆä¾‹ï¼šåç«¯ä¸“åˆ©å°±åœ¨æˆ‘ä»¬èº«è¾¹</h2>
<p>ä»¥ä¸‹æ˜¯ä¸€äº›è¿‘å¹´æ¥å·²å…¬å¼€çš„çœŸå®åç«¯ä¸“åˆ©æ¡ˆä¾‹ï¼Œå®ƒä»¬éƒ½æºäºè§£å†³å®é™…å¼€å‘ä¸­çš„ç—›ç‚¹ã€‚</p>





























<table><thead><tr><th align="left">ä¸“åˆ©åç§°</th><th align="left">ç”³è¯·äºº/ä¸“åˆ©æƒäºº</th><th align="left">æ ¸å¿ƒè¦è§£å†³çš„æŠ€æœ¯é—®é¢˜</th><th align="left">æŠ€æœ¯æ–¹æ¡ˆæ¦‚è§ˆ</th></tr></thead><tbody><tr><td align="left"><strong>ã€ŠæœåŠ¡æ³¨å†ŒåŠæ‹¦æˆªæ–¹æ³•ã€è£…ç½®ã€ç”µå­è®¾å¤‡åŠå¯è¯»å­˜å‚¨ä»‹è´¨ã€‹</strong></td><td align="left">å¤©å†•ç§‘æŠ€</td><td align="left">è§£å†³åŸç”ŸgRPCæ¡†æ¶åœ¨æœåŠ¡ç®¡ç†ä¸­å­˜åœ¨çš„<strong>ä»£ç å†—ä½™ã€æ‹¦æˆªç²’åº¦ç²—ã€åŠ¨æ€æ‰©å±•å›°éš¾</strong>ç­‰é—®é¢˜ã€‚</td><td align="left">å¼•å…¥<strong>Javaè‡ªå®šä¹‰æ³¨è§£</strong>ï¼Œåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨å®ŒæˆæœåŠ¡çš„æ³¨å†Œä¸æ‹¦æˆªå™¨çš„ç»‘å®šï¼Œå®ç°äº†<strong>æ–¹æ³•çº§çš„ç²¾å‡†æ‹¦æˆª</strong>å’Œé…ç½®çš„è‡ªåŠ¨åŒ–ã€‚</td></tr><tr><td align="left"><strong>ã€Šåç«¯æœåŠ¡è°ƒç”¨æ–¹æ³•ã€è£…ç½®ã€ç”µå­è®¾å¤‡åŠç¨‹åºäº§å“ã€‹</strong></td><td align="left">æ‹‰å¡æ‹‰</td><td align="left">ä¼˜åŒ–åç«¯æœåŠ¡è°ƒç”¨æ—¶çš„<strong>èµ„æºåˆ©ç”¨ä¸æ•ˆç‡</strong>ï¼Œåˆç†å¤„ç†åŒæ­¥ä¸å¼‚æ­¥ä»»åŠ¡ã€‚</td><td align="left">å°†æœåŠ¡è°ƒç”¨è¯·æ±‚æ³¨å†Œä¸ºIOäº‹ä»¶ï¼Œç”±åŒæ­¥çº¿ç¨‹è½®è¯¢é˜Ÿåˆ—ï¼Œå¹¶æ ¹æ®äº‹ä»¶ç±»å‹<strong>æ™ºèƒ½åˆ†é…ç”±åŒæ­¥çº¿ç¨‹å¤„ç†æˆ–æ´¾å‘ç»™å¼‚æ­¥çº¿ç¨‹</strong>ï¼Œå¤„ç†å®Œæˆåå†å›å½’åŒæ­¥é˜Ÿåˆ—ã€‚</td></tr><tr><td align="left"><strong>ã€Šä¸€ç§åŸºäºä¸­é—´å±‚çš„å¤šAgentæ´¾å‘æ–¹æ³•åŠè£…ç½®ã€‹</strong></td><td align="left">æ˜“æ–¹è¾¾åŸºé‡‘</td><td align="left">åœ¨å‰ç«¯ä¸åç«¯ä¹‹é—´å®ç°<strong>ç»Ÿä¸€ã€æ ‡å‡†åŒ–çš„æ¥å£è§£è€¦</strong>ï¼Œä»¥é«˜æ•ˆæ´¾å‘å’Œç®¡ç†å¤šä¸ªAI Agentã€‚</td><td align="left">é€šè¿‡ä¸€ä¸ª<strong>ä¸­é—´å±‚</strong>å¯¹ç”¨æˆ·è¯·æ±‚è¿›è¡Œé¢„å¤„ç†ã€åŒ¹é…ç›®æ ‡Agentã€æ•´åˆç­”å¤æ•°æ®å¹¶è¿”å›ï¼Œå®ç°äº†å‰åç«¯çš„è§£è€¦å’ŒAgentçš„ç²¾å‡†æ´¾å‘ã€‚</td></tr></tbody></table>
<p>ä»è¿™äº›æ¡ˆä¾‹å¯ä»¥çœ‹å‡ºï¼Œåç«¯ä¸“åˆ©å¹¶éé¥ä¸å¯åŠçš„â€œé»‘ç§‘æŠ€â€ï¼Œå®ƒä»¬å¾€å¾€æ˜¯å¯¹<strong>ç°æœ‰æ¡†æ¶çš„ä¼˜åŒ–ã€å¯¹ç‰¹å®šä¸šåŠ¡åœºæ™¯ä¸‹æŠ€æœ¯éš¾é¢˜çš„æ”»å…‹ï¼Œæˆ–æ˜¯è®¾è®¡äº†ä¸€å¥—æ›´é«˜æ•ˆçš„æ¶æ„æ¨¡å¼</strong>ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€ ä»ä»£ç åˆ°ä¸“åˆ©ï¼šå…³é”®æ­¥éª¤ä¸æ’°å†™æŠ€å·§</h2>
<p>å°†ä½ çš„åç«¯åˆ›æ–°è½¬åŒ–ä¸ºä¸“åˆ©ï¼Œéœ€è¦ç»å†ä¸€ä¸ªç³»ç»Ÿæ€§çš„è¿‡ç¨‹ã€‚</p>
<h3 data-id="heading-3">1. ç¡®å®šæŠ€æœ¯åˆ›æ–°ç‚¹</h3>
<p>è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚é—®è‡ªå·±ï¼šæˆ‘çš„ä»£ç ç©¶ç«Ÿåœ¨å“ªæ–¹é¢å®ç°äº†çªç ´ï¼Ÿ</p>
<ul>
<li><strong>æ˜¯æ–°çš„ç®—æ³•å—ï¼Ÿ</strong>ï¼ˆå¦‚ä¸€ç§æ–°çš„åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†æœºåˆ¶ï¼‰</li>
<li><strong>æ˜¯ç³»ç»Ÿæ¶æ„çš„ä¼˜åŒ–å—ï¼Ÿ</strong>ï¼ˆå¦‚ä¸€ç§æ–°çš„å¾®æœåŠ¡é—´é€šä¿¡åè®®ï¼‰</li>
<li><strong>æ˜¯æå‡äº†æŸé¡¹æ€§èƒ½æŒ‡æ ‡å—ï¼Ÿ</strong>ï¼ˆå¦‚é€šè¿‡åˆ›æ–°çš„ç¼“å­˜åŒæ­¥ç®—æ³•ï¼Œæé«˜äº†æ•°æ®å¤„ç†é€Ÿåº¦ï¼‰</li>
</ul>
<p><strong>åœ¨ç¡®å®šåˆ›æ–°ç‚¹åï¼ŒåŠ¡å¿…è¿›è¡Œä¸“åˆ©æ£€ç´¢</strong>ï¼Œåˆ©ç”¨Google Patentsã€å„å›½ä¸“åˆ©å±€å®˜ç½‘ç­‰æ•°æ®åº“ï¼Œç¡®è®¤ä½ çš„æƒ³æ³•æ˜¯å¦å…·å¤‡æ–°é¢–æ€§ã€‚</p>
<h3 data-id="heading-4">2. æ’°å†™é«˜è´¨é‡çš„ä¸“åˆ©ç”³è¯·æ–‡ä»¶</h3>
<p>ä¸“åˆ©ç”³è¯·æ–‡ä»¶æœ‰ä¸¥æ ¼çš„æ ¼å¼è¦æ±‚ï¼Œä¸»è¦åŒ…æ‹¬è¯´æ˜ä¹¦ã€æƒåˆ©è¦æ±‚ä¹¦ã€æ‘˜è¦å’Œé™„å›¾ã€‚å¯¹äºåç«¯ä¸“åˆ©ï¼Œä»¥ä¸‹å‡ ç‚¹è‡³å…³é‡è¦ï¼š</p>
<ul>
<li><strong>å¼ºè°ƒâ€œæŠ€æœ¯ä¸‰è¦ç´ â€</strong>ï¼šåœ¨æ•´ä¸ªè¯´æ˜ä¹¦ä¸­ï¼Œåå¤æ¸…æ™°åœ°é˜è¿° <strong>â€œæŠ€æœ¯é—®é¢˜â€ã€â€œæŠ€æœ¯æ‰‹æ®µâ€å’Œâ€œæŠ€æœ¯æ•ˆæœâ€</strong> ã€‚</li>
<li><strong>å–„ç”¨é™„å›¾</strong>ï¼šç»˜åˆ¶æ¸…æ™°çš„<strong>ç³»ç»Ÿæ¶æ„å›¾ã€æ•°æ®æµç¨‹å›¾ã€æ¨¡å—äº¤äº’å›¾</strong>ï¼Œè¿™èƒ½å¸®åŠ©å®¡æŸ¥å‘˜ç›´è§‚åœ°ç†è§£ä½ çš„æ–¹æ¡ˆã€‚</li>
<li><strong>å†™å¥½æƒåˆ©è¦æ±‚ä¹¦</strong>ï¼šè¿™æ˜¯å®šä¹‰ä¸“åˆ©ä¿æŠ¤èŒƒå›´çš„æ³•å¾‹æ ¸å¿ƒã€‚é€šå¸¸éœ€è¦å‡†å¤‡ï¼š
<ul>
<li><strong>æ–¹æ³•æƒåˆ©è¦æ±‚</strong>ï¼šæè¿°æ‰§è¡Œè¯¥è½¯ä»¶åŠŸèƒ½çš„å„ä¸ªæ­¥éª¤ã€‚</li>
<li><strong>è™šæ‹Ÿè£…ç½®æƒåˆ©è¦æ±‚</strong>ï¼šæè¿°æ‰§è¡Œè¯¥è½¯ä»¶åŠŸèƒ½çš„è™šæ‹ŸåŠŸèƒ½æ¨¡å—ï¼ˆä¾‹å¦‚ï¼šâ€œä¸€ç§â€¦è£…ç½®ï¼ŒåŒ…æ‹¬ï¼šæ¥æ”¶æ¨¡å—ã€å¤„ç†æ¨¡å—ã€å‘é€æ¨¡å—â€ï¼‰ã€‚</li>
<li><strong>ï¼ˆå¯é€‰ï¼‰éè™šæ‹Ÿè£…ç½®æƒåˆ©è¦æ±‚</strong>ï¼šå¦‚æœè€ƒè™‘æœªæ¥åœ¨ç¾å›½ç­‰åœ°åŒºå¸ƒå±€ï¼Œè¿˜éœ€è¦å‡†å¤‡åŒ…å«å¤„ç†å™¨ã€å­˜å‚¨å™¨ç­‰ç¡¬ä»¶ç»“æ„çš„æƒåˆ©è¦æ±‚ï¼Œä¾‹å¦‚â€œä¸€ç§â€¦è£…ç½®ï¼ŒåŒ…æ‹¬å¤„ç†å™¨ï¼Œæ‰€è¿°å¤„ç†å™¨ç”¨äºâ€¦â€ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-5">3. åº”å¯¹å®¡æŸ¥æµç¨‹</h3>
<p>æäº¤ç”³è¯·åï¼Œä¸“åˆ©å±€ä¼šè¿›è¡Œå®¡æŸ¥ã€‚å®¡æŸ¥å‘˜å¯èƒ½ä¼šå°±æŠ€æœ¯çš„æ–°é¢–æ€§ã€åˆ›é€ æ€§ç­‰æå‡ºæ„è§ã€‚ä½ éœ€è¦ä¸ä¸“åˆ©ä»£ç†äººå¯†åˆ‡é…åˆï¼Œè¯¦ç»†å›åº”å®¡æŸ¥å‘˜çš„ç–‘é—®ï¼Œå¹¶æä¾›å……åˆ†çš„æŠ€æœ¯è§£é‡Šã€‚</p>
<h2 data-id="heading-6">å››ã€ ç»™åç«¯å¼€å‘è€…çš„ä¸“åˆ©æ„æ€å¯å‘</h2>
<p>ä½ çš„æ—¥å¸¸å·¥ä½œå¯èƒ½å°±è•´å«ç€ä¸“åˆ©çš„ç§å­ï¼š</p>
<ul>
<li><strong>èšç„¦æ€§èƒ½ç“¶é¢ˆ</strong>ï¼šä½ æ˜¯å¦è®¾è®¡äº†ä¸€ç§å·§å¦™çš„<strong>æ•°æ®åº“è¿æ¥æ± ç®¡ç†æ–¹æ¡ˆ</strong>ï¼Œæ˜¾è‘—é™ä½äº†é«˜å¹¶å‘ä¸‹çš„å“åº”å»¶è¿Ÿï¼Ÿ</li>
<li><strong>è§£å†³ä¸šåŠ¡ä¸€è‡´æ€§</strong>ï¼šåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä½ æ˜¯å¦å‘æ˜äº†ä¸€ç§<strong>æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆ</strong>ï¼Œç¡®ä¿äº†è·¨æœåŠ¡çš„æ•°æ®å‡†ç¡®ï¼Ÿ</li>
<li><strong>ä¼˜åŒ–èµ„æºè°ƒåº¦</strong>ï¼šä½ æ˜¯å¦æ”¹è¿›äº†<strong>Kubernetesçš„è°ƒåº¦å™¨</strong>ï¼Œä½¿å¾—é›†ç¾¤è®¡ç®—èµ„æºåˆ©ç”¨ç‡å¤§å¹…æå‡ï¼Ÿ</li>
<li><strong>å¢å¼ºç³»ç»Ÿå®‰å…¨</strong>ï¼šä½ æ˜¯å¦è®¾è®¡äº†ä¸€å¥—<strong>APIè®¿é—®æƒé™çš„åŠ¨æ€æ ¡éªŒæœºåˆ¶</strong>ï¼Œæœ‰æ•ˆé˜²å¾¡äº†æœªæˆæƒè®¿é—®ï¼Ÿ</li>
</ul>
<h2 data-id="heading-7">äº”ã€ é‡è¦æé†’</h2>
<ul>
<li><strong>å¯»æ±‚ä¸“ä¸šå¸®åŠ©</strong>ï¼šä¸“åˆ©ç”³è¯·ï¼Œå°¤å…¶æ˜¯æƒåˆ©è¦æ±‚ä¹¦çš„æ’°å†™ï¼Œä¸“ä¸šæ€§æå¼ºã€‚å¼ºçƒˆå»ºè®®ä¸<strong>ä¸“åˆ©ä»£ç†äºº</strong>åˆä½œï¼Œç‰¹åˆ«æ˜¯æ‰¾æœ‰è®¡ç®—æœºè½¯ä»¶é¢†åŸŸç»éªŒçš„ä»£ç†äººï¼Œèƒ½æ˜¾è‘—æé«˜æˆåŠŸç‡ã€‚</li>
<li><strong>æ³¨æ„ç”³è¯·æ—¶æœº</strong>ï¼šåœ¨ç”³è¯·ä¸“åˆ©ä¹‹å‰ï¼Œ<strong>åˆ‡å‹¿åœ¨æŠ€æœ¯ä¼šè®®ã€è®ºå›æˆ–å­¦æœ¯æœŸåˆŠä¸Šè¿‡æ—©å…¬å¼€ä½ çš„æŠ€æœ¯ç»†èŠ‚</strong>ï¼Œå¦åˆ™å¯èƒ½ä¼šç ´åå…¶æ–°é¢–æ€§ï¼Œå¯¼è‡´æ— æ³•æˆæƒã€‚</li>
<li><strong>å…¬å¸æ”¿ç­–ä¸å¥–åŠ±</strong>ï¼šå¾ˆå¤šç§‘æŠ€å…¬å¸è®¾æœ‰ä¸“é—¨çš„ä¸“åˆ©å§”å‘˜ä¼šå’Œå¥–åŠ±æœºåˆ¶ï¼Œé¼“åŠ±å‘˜å·¥ç”³æŠ¥ã€‚ç§¯æäº†è§£å¹¶åˆ©ç”¨å…¬å¸å†…éƒ¨æ”¿ç­–ï¼Œè¿™ä¸ä»…èƒ½ä¿æŠ¤åˆ›æ–°ï¼Œè¿˜å¯èƒ½ä¸ºä½ å¸¦æ¥ä¸°åšçš„å›æŠ¥ã€‚</li>
</ul>
<h2 data-id="heading-8">ç»“è¯­</h2>
<p>å°†åç«¯åˆ›æ–°ç”³è¯·ä¸ºä¸“åˆ©ï¼Œæ˜¯ä¸€ä¸ªå°†æŠ€æœ¯æ™ºæ…§è½¬åŒ–ä¸ºæ³•å¾‹èµ„äº§å’Œå•†ä¸šç«äº‰åŠ›çš„è¿‡ç¨‹ã€‚å®ƒå¹¶éé«˜ä¸å¯æ”€ï¼Œåªè¦ä½ å–„äºå‘ç°ã€å‹¤äºæ€»ç»“ï¼Œå¹¶æ‡‚å¾—è¿ç”¨è§„åˆ™ï¼Œä½ çš„ä»£ç åŒæ ·å¯ä»¥æˆä¸ºå—æ³•å¾‹ä¿æŠ¤çš„å‘æ˜åˆ›é€ ã€‚</p>
<p>å¸Œæœ›æœ¬æ–‡èƒ½ä¸ºä½ æ‰“å¼€ä¸€æ‰‡æ–°çš„å¤§é—¨ã€‚å¦‚æœä½ æ­£åœ¨æŸä¸ªæŠ€æœ¯ç‚¹ä¸Šæœ‰æ‰€çªç ´ï¼Œä¸å¦¨ç°åœ¨å°±æŒ‰ç…§æ–‡ä¸­çš„æ€è·¯è¯„ä¼°ä¸€ä¸‹å®ƒçš„ä¸“åˆ©æ½œåŠ›å§ï¼</p>
<hr/>
<p><strong>å…è´£å£°æ˜</strong>ï¼šæœ¬æ–‡å†…å®¹ä»…ä¾›å‚è€ƒï¼Œä¸æ„æˆä»»ä½•å½¢å¼çš„æ³•å¾‹å»ºè®®ã€‚åœ¨å…·ä½“ç”³è¯·ä¸“åˆ©æ—¶ï¼Œè¯·åŠ¡å¿…å’¨è¯¢å¹¶å§”æ‰˜ä¸“ä¸šçš„ä¸“åˆ©ä»£ç†æœºæ„æˆ–å¾‹å¸ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ–‡å¿ƒ5.0ï¼š2.4ä¸‡äº¿å‚æ•°çš„â€œå…¨èƒ½AIâ€ï¼Œå®ƒçœŸåšåˆ°äº†å—ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7572459217811832895</link>    <guid>https://juejin.cn/post/7572459217811832895</guid>    <pubDate>2025-11-15T13:13:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572459217811832895" data-draft-id="7572403510468280363" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ–‡å¿ƒ5.0ï¼š2.4ä¸‡äº¿å‚æ•°çš„â€œå…¨èƒ½AIâ€ï¼Œå®ƒçœŸåšåˆ°äº†å—ï¼Ÿ"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2025-11-15T13:13:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨é£å¦‚é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/4064249017803927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ–‡å¿ƒ5.0ï¼š2.4ä¸‡äº¿å‚æ•°çš„â€œå…¨èƒ½AIâ€ï¼Œå®ƒçœŸåšåˆ°äº†å—ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4064249017803927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨é£å¦‚é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T13:13:31.000Z" title="Sat Nov 15 2025 13:13:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å’±ä»¬AIåœˆé‡Œæœ€è¿‘æœ€ç«çš„è¯é¢˜æ˜¯å•¥ï¼Ÿé‚£å¿…é¡»æ˜¯ç™¾åº¦æ–‡å¿ƒå¤§æ¨¡å‹5.0çš„æ¨ªç©ºå‡ºä¸–å•Šï¼è¯´å®è¯ï¼Œåˆšå¬åˆ°è¿™æ•°å­—çš„æ—¶å€™ï¼Œæˆ‘ä¹Ÿæ„£äº†ä¸€ä¸‹â€”â€”2.4ä¸‡äº¿å‚æ•°ï¼Œè¿™ç®€ç›´æ˜¯æŠŠæ•´ä¸ªçŸ¥è¯†å®‡å®™éƒ½å¡è¿›äº†ä¸€ä¸ªå¤§è„‘é‡Œã€‚ä½†å‚æ•°å¤šå°±ä¸€å®šå¥½å—ï¼Ÿæ–‡å¿ƒ5.0æƒ³å‘Šè¯‰æˆ‘ä»¬ï¼Œå®ƒä¸å…‰è¦â€œå¤§â€ï¼Œæ›´è¦â€œåŸç”Ÿå…¨æ¨¡æ€â€çš„æ™ºæ…§ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-15_20.55.23-1024x633.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-15_20.55.23-1024x633.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35c1e4cbd35f46128ec6261b66a43d6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763817210&amp;x-signature=FjeUVmJ5d9b16TSookIzt60jVW8%3D" alt="iShot_2025-11-15_20.55.23" loading="lazy"/></a></p>
<h3 data-id="heading-0">ä¸åªæ˜¯â€œå¤§â€ï¼Œæ›´æ˜¯â€œç²¾æ˜â€çš„å¤§è„‘</h3>
<p>2.4ä¸‡äº¿å‚æ•°ï¼Œè¿™ä¸ªæ•°å­—å¬èµ·æ¥å¾ˆå”¬äººï¼Œæ¯•ç«Ÿå¤§å¤šæ•°äººå¯¹ä¸‡äº¿è¿™ä¸ªé‡çº§æ²¡ä»€ä¹ˆæ¦‚å¿µã€‚ä½†å¦‚æœæˆ‘å‘Šè¯‰ä½ ï¼Œè¿™ä¸ªåºå¤§çš„æ™ºèƒ½ä½“æ¯æ¬¡è§£å†³é—®é¢˜æ—¶ï¼Œåªä¼šæ¿€æ´»å…¶ä¸­ä¸åˆ°3%çš„â€œä¸“å®¶â€æ¥å·¥ä½œï¼Œä½ æ˜¯ä¸æ˜¯ä¼šè§‰å¾—æ›´æœ‰è¶£äº†ï¼Ÿ</p>
<p>è¿™å¯ä¸æ˜¯ä»€ä¹ˆé­”æœ¯ï¼Œè€Œæ˜¯æ–‡å¿ƒ5.0é‡‡ç”¨çš„â€œè¶…ç¨€ç–æ··åˆä¸“å®¶ï¼ˆMoEï¼‰æ¶æ„â€åœ¨å‘æŒ¥ä½œç”¨ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªæ‹¥æœ‰æ— æ•°é¡¶å°–é¡¾é—®çš„æ™ºå›Šå›¢ï¼Œå½“æ¥åˆ°ä¸€ä¸ªå…·ä½“ä»»åŠ¡æ—¶ï¼Œç³»ç»Ÿä¼šç²¾å‡†åœ°æŒ‘é€‰å‡ºæœ€æ“…é•¿è¿™ä¸ªé¢†åŸŸçš„å‡ ä½ä¸“å®¶æ¥å‡ºè°‹åˆ’ç­–ï¼Œè€Œä¸æ˜¯è®©æ‰€æœ‰äººéƒ½å‚ä¸ã€‚è¿™æ ·ä¸€æ¥ï¼Œå®ƒæ—¢èƒ½æ‹¥æœ‰æµ·é‡çš„çŸ¥è¯†å‚¨å¤‡ï¼Œåˆèƒ½ä¿è¯æ¯æ¬¡æ€è€ƒéƒ½é«˜æ•ˆã€è¿…é€Ÿã€‚è¿™ç®€ç›´å°±æ˜¯æŠŠâ€œç”¨å¯¹äººâ€çš„æ™ºæ…§å‘æŒ¥åˆ°äº†æè‡´ï¼Œå½»åº•å‘Šåˆ«äº†â€œå¤§è€Œç¬¨é‡â€çš„åˆ»æ¿å°è±¡ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-15_20.55.30-1024x581.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-15_20.55.30-1024x581.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a46ff3811a644582aeedf930be7a3be8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763817210&amp;x-signature=gRSKxQ8GlErAbWv1Akp1pb86ae0%3D" alt="iShot_2025-11-15_20.55.30" loading="lazy"/></a></p>
<h3 data-id="heading-1">å‘Šåˆ«â€œæ‹¼æ¥æ€ªâ€ï¼šçœŸæ­£â€œçœ‹å¬æ‡‚â€çš„AI</h3>
<p>å¦‚æœè¯´å‚æ•°è§„æ¨¡æ˜¯ä½“é‡ï¼Œé‚£â€œåŸç”Ÿå…¨æ¨¡æ€â€å°±æ˜¯æ–‡å¿ƒ5.0çœŸæ­£çš„çµé­‚ã€‚åœ¨è¿‡å»ï¼Œå¾ˆå¤šæ‰€è°“çš„å¤šæ¨¡æ€æ¨¡å‹ï¼Œå…¶å®æ›´åƒæ˜¯æŠŠæ–‡æœ¬ã€å›¾ç‰‡ã€éŸ³é¢‘æ¨¡å‹åæœŸâ€œæ‹¼æ¥â€èµ·æ¥çš„ï¼Œå®ƒä»¬å„è‡ªä¸ºæˆ˜ï¼Œç†è§£èµ·æ¥éš¾å…æœ‰ç‚¹éš”é˜‚ã€‚</p>
<p>ä½†æ–‡å¿ƒ5.0ä¸ä¸€æ ·ï¼Œå®ƒä»â€œå¨˜èƒé‡Œâ€â€”â€”ä¹Ÿå°±æ˜¯æ¨¡å‹è®­ç»ƒçš„ä¸€å¼€å§‹ï¼Œå°±è®©æ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘è¿™äº›ä¸åŒæ¨¡æ€çš„æ•°æ®åœ¨ç»Ÿä¸€çš„æ¶æ„ä¸‹ä¸€èµ·å­¦ä¹ ã€ä¸€èµ·æˆé•¿ã€‚è¿™å°±åƒæˆ‘ä»¬äººç±»ä¸€æ ·ï¼ŒåŒæ—¶åŠ¨ç”¨è§†è§‰ã€å¬è§‰ã€è¯­è¨€å»ç†è§£è¿™ä¸ªä¸–ç•Œï¼Œçœ‹åˆ°ä¸€åªé¸Ÿåœ¨å”±æ­Œï¼Œæˆ‘ä»¬èƒ½ç«‹åˆ»å°†å®ƒçš„å½¢è±¡å’Œå£°éŸ³è”ç³»èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„è®¤çŸ¥ã€‚æ–‡å¿ƒ5.0çš„ç›®æ ‡ï¼Œå°±æ˜¯è®©AIä¹Ÿèƒ½æ‹¥æœ‰è¿™ç§ä»åº•å±‚å°±ä¸€ä½“åŒ–çš„ç†è§£ä¸ç”Ÿæˆèƒ½åŠ›ï¼Œè€Œä¸æ˜¯ç®€å•çš„â€œçœ‹å›¾è¯´è¯â€æˆ–â€œå¬å£°ä½œè¯—â€ã€‚è¿™ç§â€œä¸€ä½“åŒ–â€æ„å‘³ç€å®ƒèƒ½æ›´æœ¬è´¨ã€æ›´ç²¾å‡†åœ°ç†è§£ä½ çš„æ„å›¾ï¼Œä¹Ÿèƒ½ç”Ÿæˆæ›´è¿è´¯ã€æ›´å¯Œæœ‰æƒ³è±¡åŠ›çš„å†…å®¹ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-15_20.55.40-1024x537.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-15_20.55.40-1024x537.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/634c05740e764fdd867bd08edc2cfc81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763817210&amp;x-signature=iXyCD0EFTv%2Bnk%2BWKI5vKNTlTKZ0%3D" alt="iShot_2025-11-15_20.55.40" loading="lazy"/></a></p>
<h3 data-id="heading-2">å®åŠ›å‡ ä½•ï¼Ÿå®æµ‹ä¸è¯„æµ‹è§çœŸç« </h3>
<p>é‚£ä¹ˆï¼Œè¿™æ ·ä¸€ä¸ªâ€œå¤§è€Œç²¾æ˜â€åˆâ€œåŸç”Ÿå…¨æ¨¡æ€â€çš„æ¨¡å‹ï¼Œç©¶ç«Ÿèƒ½åšäº›ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>æ ¹æ®å®˜æ–¹å…¬å¸ƒçš„æ•°æ®ï¼Œæ–‡å¿ƒ5.0åœ¨40å¤šé¡¹æƒå¨åŸºå‡†æµ‹è¯•ä¸­ï¼Œå…¶è¯­è¨€ä¸å¤šæ¨¡æ€ç†è§£èƒ½åŠ›å·²ç»èƒ½ä¸Gemini-2.5-Proã€GPT-5-Highè¿™äº›å›½é™…é¡¶å°–æ¨¡å‹<strong>æŒå¹³</strong>ã€‚æ›´è®©äººå…´å¥‹çš„æ˜¯ï¼Œå®ƒåœ¨LMArenaå¤§æ¨¡å‹ç«æŠ€åœºçš„æ–‡æœ¬ä»»åŠ¡è¯„æµ‹ä¸­ï¼Œä½åˆ—å…¨çƒå¹¶åˆ—ç¬¬äºŒã€ä¸­å›½ç¬¬ä¸€ï¼</p>
<p>åª’ä½“çš„å®æµ‹ä¹Ÿé€éœ²å‡ºä¸å°‘äº®ç‚¹ï¼š</p>
<ul>
<li><strong>è§†é¢‘ç†è§£é«˜æ‰‹</strong>ï¼šå®ƒèƒ½ç²¾å‡†åˆ†æã€Šåä¾¦æ¢æŸ¯å—ã€‹ä¸­å¤æ‚çš„ç ´æ¡ˆé€»è¾‘é“¾ï¼Œç”šè‡³èƒ½æ€»ç»“é•¿è¾¾35åˆ†é’Ÿçš„è‹±æ–‡å¯¹è¯è§†é¢‘çš„æ ¸å¿ƒè§‚ç‚¹å’Œå‘è¨€è€…ç«‹åœºï¼Œè¿™å¯ä¸æ˜¯ç®€å•çš„å†…å®¹è¯†åˆ«ï¼Œè€Œæ˜¯æ·±å±‚æ¬¡çš„é€»è¾‘åˆ†æå’Œæ¦‚æ‹¬èƒ½åŠ›ã€‚</li>
<li><strong>åˆ›æ„ç¼–ç¨‹å¤§å¸ˆ</strong>ï¼šä½ éšå£ä¸€å¥â€œæŠŠå¯¹æ‰‹çš„æ£‹å­ç›´æ¥æ‰”è¿›ä»€åˆ¹æµ·â€ï¼Œå®ƒå°±èƒ½ç†è§£ä½ å¤©é©¬è¡Œç©ºçš„æ„å›¾ï¼Œç”Ÿæˆä¸€ä¸ªå¯è¿è¡Œçš„â€œæŠ€èƒ½äº”å­æ£‹â€ç½‘é¡µæ¸¸æˆä»£ç ã€‚è¿™æƒ³è±¡åŠ›ä¸æ‰§è¡ŒåŠ›ï¼ŒçœŸæ˜¯è®©äººæ‹æ¡ˆå«ç»ã€‚</li>
<li><strong>é«˜æƒ…å•†æ²Ÿé€šè€…</strong>ï¼šåœ¨å¤„ç†æƒ…æ„Ÿç±»é—®é¢˜æ—¶ï¼Œæ–‡å¿ƒ5.0çš„å›å¤ä¸å†æ˜¯å†·å†°å†°çš„å¥—è¯ï¼Œè€Œæ˜¯å±•ç°å‡ºæ›´å¼ºçš„åŒç†å¿ƒå’Œç»†è…»æ„Ÿï¼Œå°±åƒä¸€ä¸ªçœŸæ­£çš„â€œé«˜æƒ…å•†â€æœ‹å‹åœ¨ä¸ä½ äº¤æµã€‚</li>
</ul>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-15_20.55.45-1024x389.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-15_20.55.45-1024x389.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95a906475fe04196a55ed6acfd161a06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763817210&amp;x-signature=9pGbqMPHsrvqcpATSB1sXiUYcxM%3D" alt="iShot_2025-11-15_20.55.45" loading="lazy"/></a></p>
<h3 data-id="heading-3">èµ°å‘ç°å®ï¼šè§¦æ‰‹å¯åŠçš„AIæ™ºèƒ½ä½“</h3>
<p>æ–‡å¿ƒå¤§æ¨¡å‹5.0å¹¶éæŸä¹‹é«˜é˜çš„å®éªŒå®¤äº§å“ã€‚æ™®é€šç”¨æˆ·ç°åœ¨å°±èƒ½é€šè¿‡**â€œæ–‡å¿ƒä¸€è¨€Appâ€<strong>ä½“éªŒåˆ°å®ƒçš„Previewç‰ˆæœ¬ã€‚è€Œå¯¹äºæˆ‘ä»¬å¼€å‘è€…å’Œä¼ä¸šç”¨æˆ·æ¥è¯´ï¼Œåˆ™å¯ä»¥é€šè¿‡</strong>ç™¾åº¦åƒå¸†å¤§æ¨¡å‹å¹³å°**è°ƒç”¨å…¶APIæœåŠ¡ï¼Œå°†è¿™äº›å¼ºå¤§çš„èƒ½åŠ›é›†æˆåˆ°æˆ‘ä»¬è‡ªå·±çš„äº§å“å’Œè§£å†³æ–¹æ¡ˆä¸­ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-15_20.56.09-1024x296.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-15_20.56.09-1024x296.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4038c0f285348bd83deebbd3bbabfb2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763817210&amp;x-signature=VHUkK%2ByOwYaR4%2Fa3nZFT8qJcI%2Fo%3D" alt="iShot_2025-11-15_20.56.09" loading="lazy"/></a></p>
<p>ç™¾åº¦åˆ›å§‹äººæå½¦å®æ›¾è¯´è¿‡ï¼Œâ€œæ™ºèƒ½æœ¬èº«æ˜¯æœ€å¤§çš„åº”ç”¨ï¼Œè€ŒæŠ€æœ¯è¿­ä»£é€Ÿåº¦æ˜¯å”¯ä¸€çš„æŠ¤åŸæ²³â€ã€‚æ–‡å¿ƒ5.0çš„å‘å¸ƒï¼Œæ— ç–‘æ˜¯ç™¾åº¦åœ¨è¿™æ¡æŠ¤åŸæ²³ä¸Šåˆä¸€æ¬¡æ·±æŒ–ã€‚å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªæŠ€æœ¯ä¸Šçš„çªç ´ï¼Œæ›´æ˜¯ä¸ºæˆ‘ä»¬æç»˜äº†ä¸€ä¸ªæ›´å…·æƒ³è±¡åŠ›çš„AIæœªæ¥ï¼šä¸€ä¸ªä¸å†å—é™äºå•ä¸€æ¨¡æ€ã€èƒ½çœŸæ­£åƒäººä¸€æ ·æ€è€ƒã€ç†è§£å’Œåˆ›é€ çš„æ™ºèƒ½æ—¶ä»£ã€‚</p>
<p><strong>å¦‚æœä½ ä¹Ÿå¯¹æœ€æ–°çš„AIä¿¡æ¯æ„Ÿå…´è¶£æˆ–è€…æœ‰ç–‘é—® éƒ½å¯ä»¥åŠ å…¥æˆ‘çš„å¤§å®¶åº­ ç¬¬ä¸€æ—¶é—´åˆ†äº«æœ€æ–°AIèµ„è®¯ã€å·¥å…·ã€æ•™ç¨‹ã€æ–‡æ¡£ æ¬¢è¿ä½ çš„åŠ å…¥ï¼ï¼ï¼ğŸ˜‰ğŸ˜‰ğŸ˜‰</strong></p>
<p>å…¬ä¼—å·ï¼šå¢¨é£å¦‚é›ªå°ç«™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»åç«¯å¼€å‘è€…åˆ°Agentå·¥ç¨‹å¸ˆï¼šä¸€ä»½ç³»ç»Ÿæ€§çš„å­¦ä¹ æŒ‡å—]]></title>    <link>https://juejin.cn/post/7572459217811865663</link>    <guid>https://juejin.cn/post/7572459217811865663</guid>    <pubDate>2025-11-15T13:25:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572459217811865663" data-draft-id="7572459757107363894" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»åç«¯å¼€å‘è€…åˆ°Agentå·¥ç¨‹å¸ˆï¼šä¸€ä»½ç³»ç»Ÿæ€§çš„å­¦ä¹ æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-15T13:25:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="oioihoii"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»åç«¯å¼€å‘è€…åˆ°Agentå·¥ç¨‹å¸ˆï¼šä¸€ä»½ç³»ç»Ÿæ€§çš„å­¦ä¹ æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    oioihoii
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T13:25:50.000Z" title="Sat Nov 15 2025 13:25:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä¸‹é¢çš„å†…å®¹æ˜¯ä¹‹å‰ç”¨AIç”Ÿæˆçš„ï¼Œæ ¹æ®è¿™ä»½AIå¤§çº²ï¼Œæˆ‘å·²ç»åˆ°äº†ç¬¬äºŒé˜¶æ®µï¼Œæˆ‘æ„Ÿè§‰è¿™ä»½è·¯çº¿å›¾ç¡®å®åˆ‡å®å¯è¡Œï¼Œæ‰€ä»¥ä¸“é—¨ç¿»å‡ºæ¥åšåˆ†äº«ã€‚</p>
</blockquote>
<h3 data-id="heading-0">ä¸ºä»€ä¹ˆåç«¯å¼€å‘è€…æ˜¯å­¦ä¹ Agentçš„ç»ä½³äººé€‰ï¼Ÿ</h3>
<p>å¦‚æœä½ æ˜¯ä¸€ååç«¯å¼€å‘è€…ï¼Œæ­å–œä½ ï¼Œä½ å·²ç»å…·å¤‡äº†å­¦ä¹ AgentæŠ€æœ¯çš„æ ¸å¿ƒä¼˜åŠ¿ï¼š</p>
<ol>
<li><strong>ç³»ç»Ÿæ¶æ„æ€ç»´</strong>ï¼šä½ èƒ½ç†è§£å¤æ‚ç³»ç»Ÿç”±æ¨¡å—ç»„æˆå¹¶è®¾è®¡å…¶äº¤äº’ï¼Œè€ŒAgentæœ¬èº«å°±æ˜¯ä¸€ç§â€œå¾®ç³»ç»Ÿâ€ã€‚</li>
<li><strong>APIè®¾è®¡ä¸é›†æˆä¸“å®¶</strong>ï¼šAgentçš„æ ¸å¿ƒèƒ½åŠ›ä¹‹ä¸€å°±æ˜¯è°ƒç”¨å·¥å…·ï¼ˆToolï¼‰ï¼Œè€Œè¿™æœ¬è´¨ä¸Šå°±æ˜¯APIè°ƒç”¨ï¼Œè¿™æ˜¯ä½ çš„è€æœ¬è¡Œã€‚</li>
<li><strong>å¹¶å‘ä¸å¼‚æ­¥ç¼–ç¨‹é«˜æ‰‹</strong>ï¼šAgentç»å¸¸éœ€è¦å¤„ç†å¤šæ­¥éª¤ä»»åŠ¡æˆ–å¹¶å‘è¯·æ±‚ï¼Œä½ å¯¹å¼‚æ­¥æµç¨‹çš„æ§åˆ¶èƒ½åŠ›è‡³å…³é‡è¦ã€‚</li>
<li><strong>å·¥ç¨‹åŒ–ä¸è¿ç»´ä¸“å®¶</strong>ï¼šä½ çŸ¥é“å¦‚ä½•ç¼–å†™å¯æµ‹è¯•ã€å¯éƒ¨ç½²ã€å¯ç›‘æ§çš„ä»£ç ï¼Œè¿™æ­£æ˜¯PoCæ¼”ç¤ºä¸ç”Ÿäº§çº§Agentç³»ç»Ÿçš„ä¸»è¦å·®è·ã€‚</li>
</ol>
<p>è¿™ä»½æŒ‡å—å°†ä¸ºä½ è§„åˆ’ä¸€æ¡ä»å…¥é—¨åˆ°ç²¾é€šçš„æ¸…æ™°è·¯å¾„ã€‚</p>
<h3 data-id="heading-1">å­¦ä¹ è·¯çº¿å›¾ï¼šå››ä¸ªé˜¶æ®µï¼Œä»å…¥é—¨åˆ°ä¸“å®¶</h3>
<p>æˆ‘ä»¬å»ºè®®éµå¾ªä»¥ä¸‹å››ä¸ªé˜¶æ®µï¼Œå¾ªåºæ¸è¿›ï¼Œæ¯ä¸ªé˜¶æ®µéƒ½åŒ…å«æ˜ç¡®çš„ç›®æ ‡ã€æŠ€æœ¯è¦ç‚¹å’Œå®è·µé¡¹ç›®ã€‚</p>
<hr/>
<h4 data-id="heading-2"><strong>é˜¶æ®µä¸€ï¼šåŸºç¡€è®¤çŸ¥ä¸ç¯å¢ƒæ­å»ºï¼ˆ1-2å‘¨ï¼‰</strong></h4>
<p><strong>ç›®æ ‡</strong>ï¼šå»ºç«‹å¯¹Agentçš„æ ¸å¿ƒè®¤çŸ¥ï¼Œæ­å»ºå¼€å‘ç¯å¢ƒã€‚</p>
<p><strong>å­¦ä¹ å†…å®¹</strong>ï¼š</p>
<ul>
<li><strong>æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼š
<ul>
<li><strong>Agent</strong>ï¼šèƒ½æ„ŸçŸ¥ç¯å¢ƒã€å†³ç­–å¹¶æ‰§è¡ŒåŠ¨ä½œä»¥è¾¾æˆç›®æ ‡çš„ç¨‹åºã€‚</li>
<li><strong>LLM</strong>ï¼šAgentçš„â€œå¤§è„‘â€ï¼Œè´Ÿè´£ç†è§£ä¸æ¨ç†ã€‚</li>
<li><strong>Prompt Engineering</strong>ï¼šä¸LLMå¤§è„‘é«˜æ•ˆæ²Ÿé€šçš„â€œè¯­è¨€â€ã€‚</li>
<li><strong>Tool/Function Calling</strong>ï¼šAgentçš„â€œæ‰‹å’Œè„šâ€ï¼Œç”¨äºæ‰§è¡Œå…·ä½“æ“ä½œï¼ˆå¦‚è°ƒç”¨APIã€æŸ¥è¯¢DBï¼‰ã€‚</li>
</ul>
</li>
<li><strong>æŠ€æœ¯é€‰å‹</strong>ï¼š
<ul>
<li><strong>è¯­è¨€</strong>ï¼šé¦–é€‰<strong>Python</strong>ï¼Œå› å…¶æ‹¥æœ‰æœ€æˆç†Ÿçš„AIç”Ÿæ€ã€‚</li>
<li><strong>æ¡†æ¶</strong>ï¼š<strong>LangChain</strong>ï¼Œå½“å‰æœ€ä¸»æµçš„Agentåº”ç”¨å¼€å‘æ¡†æ¶ã€‚</li>
<li><strong>æ¨¡å‹API</strong>ï¼šä»<strong>OpenAI GPT-4o/3.5-Turbo</strong>å¼€å§‹ï¼Œå…¶å¯¹Function Callingæ”¯æŒè‰¯å¥½ã€‚</li>
</ul>
</li>
</ul>
<p><strong>åŠ¨æ‰‹å®è·µ</strong>ï¼š</p>
<ol>
<li>é…ç½®Pythonç¯å¢ƒï¼Œå®‰è£…<code>langchain</code>ã€<code>langchain-openai</code>ç­‰æ ¸å¿ƒåº“ã€‚</li>
<li>è·å–OpenAI API Keyã€‚</li>
<li>ç¼–å†™ä¸€ä¸ªæœ€ç®€å•çš„è„šæœ¬ï¼ŒæˆåŠŸè°ƒç”¨ChatGPT APIã€‚</li>
</ol>
<hr/>
<h4 data-id="heading-3"><strong>é˜¶æ®µäºŒï¼šæŒæ¡æ ¸å¿ƒç»„ä»¶ä¸ç®€å•å®è·µï¼ˆ2-3å‘¨ï¼‰</strong></h4>
<p><strong>ç›®æ ‡</strong>ï¼šæ·±å…¥ç†è§£LangChainæ ¸å¿ƒæ¨¡å—ï¼Œæ„å»ºèƒ½è°ƒç”¨å·¥å…·çš„å•ä¸€Agentã€‚</p>
<p><strong>å­¦ä¹ å†…å®¹</strong>ï¼š</p>
<ul>
<li><strong>LangChainæ ¸å¿ƒç»„ä»¶</strong>ï¼š
<ul>
<li><strong>Models</strong>ï¼šæ¥å…¥ä¸åŒLLMã€‚</li>
<li><strong>Prompts</strong>ï¼šä½¿ç”¨<code>ChatPromptTemplate</code>æ„å»ºé«˜è´¨é‡çš„å¯¹è¯æç¤ºã€‚</li>
<li><strong>Chains</strong>ï¼šå°†å¤šä¸ªæ­¥éª¤ä¸²è”æˆå·¥ä½œæµã€‚</li>
<li><strong>Tools</strong>ï¼š<strong>ä½ çš„æ ¸å¿ƒä¼˜åŠ¿åŒº</strong>ï¼å­¦ä¹ å¦‚ä½•å°†ä»»æ„å‡½æ•°æˆ–HTTP APIå°è£…æˆAgentå¯è°ƒç”¨çš„Toolã€‚</li>
<li><strong>Agents</strong>ï¼šç†è§£å†…ç½®Agentç±»å‹ï¼ˆå¦‚<code>OPENAI_FUNCTIONS</code>ï¼‰åŠå…¶æ‰§è¡Œå¾ªç¯ã€‚</li>
</ul>
</li>
</ul>
<p><strong>é¡¹ç›®å®æˆ˜</strong>ï¼š</p>
<ul>
<li><strong>é¡¹ç›®1ï¼šæ™ºèƒ½å¤©æ°”æŸ¥è¯¢åŠ©æ‰‹</strong>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šç”¨æˆ·è¾“å…¥â€œä¸Šæµ·å¤©æ°”å¦‚ä½•ï¼Ÿâ€ï¼ŒAgentè‡ªåŠ¨è°ƒç”¨å¤©æ°”APIå¹¶è¿”å›ç»“æœã€‚</li>
<li><strong>æŠ€æœ¯è¦ç‚¹</strong>ï¼šå°è£…å¤©æ°”APIä¸ºToolï¼Œä½¿ç”¨Agentè¿›è¡Œè§„åˆ’å’Œè°ƒç”¨ã€‚</li>
</ul>
</li>
<li><strong>é¡¹ç›®2ï¼šè‡ªç„¶è¯­è¨€æ•°æ®åº“æŸ¥è¯¢åŠ©æ‰‹</strong>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šç”¨æˆ·ç”¨è‡ªç„¶è¯­è¨€æŸ¥è¯¢æ•°æ®åº“ï¼Œå¦‚â€œæŸ¥è¯¢é”€å”®é¢æœ€é«˜çš„äº§å“â€ã€‚</li>
<li><strong>æŠ€æœ¯è¦ç‚¹</strong>ï¼šå°è£…SQLæŸ¥è¯¢ä¸ºToolï¼Œ<strong>é‡ç‚¹å®è·µSQLå®‰å…¨æ ¡éªŒ</strong>ï¼Œé˜²æ­¢SQLæ³¨å…¥ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h4 data-id="heading-4"><strong>é˜¶æ®µä¸‰ï¼šè¿›é˜¶æ¦‚å¿µä¸å¤æ‚ç³»ç»Ÿæ„å»ºï¼ˆ3-4å‘¨ï¼‰</strong></h4>
<p><strong>ç›®æ ‡</strong>ï¼šæ„å»ºå¤šæ­¥éª¤ã€æœ‰çŠ¶æ€ã€å…·å¤‡ä¸“ä¸šçŸ¥è¯†çš„å¤æ‚Agentç³»ç»Ÿã€‚</p>
<p><strong>å­¦ä¹ å†…å®¹</strong>ï¼š</p>
<ul>
<li><strong>RAG</strong>ï¼šæ£€ç´¢å¢å¼ºç”Ÿæˆã€‚è®©Agentå…·å¤‡è®¿é—®ç§æœ‰çŸ¥è¯†åº“çš„èƒ½åŠ›ã€‚
<ul>
<li>æ ¸å¿ƒæµç¨‹ï¼šæ–‡æ¡£åŠ è½½ -&gt; åˆ‡åˆ† -&gt; å‘é‡åŒ– -&gt; å­˜å‚¨åˆ°å‘é‡æ•°æ®åº“ï¼ˆå¦‚ChromaDB/FAISSï¼‰-&gt; æ£€ç´¢ã€‚</li>
</ul>
</li>
<li><strong>LangGraph</strong>ï¼š<strong>æ„å»ºå¤æ‚Agentçš„ç»ˆæåˆ©å™¨</strong>ã€‚å®ƒç”¨å›¾çš„æ¦‚å¿µæ¥å®šä¹‰å…·æœ‰çŠ¶æ€ã€å¾ªç¯å’Œåˆ†æ”¯çš„å¤æ‚å·¥ä½œæµï¼Œéå¸¸é€‚åˆå®ç°ReActæ¨¡å¼ã€‚</li>
</ul>
<p><strong>é¡¹ç›®å®æˆ˜</strong>ï¼š</p>
<ul>
<li><strong>é¡¹ç›®3ï¼šæŠ€æœ¯æ–‡æ¡£æ™ºèƒ½é—®ç­”æœºå™¨äººï¼ˆRAGï¼‰</strong>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šåŸºäºå…¬å¸/é¡¹ç›®çš„æŠ€æœ¯æ–‡æ¡£ï¼ˆMarkdown/PDFï¼‰ï¼Œå›ç­”ç²¾å‡†çš„æŠ€æœ¯é—®é¢˜ã€‚</li>
<li><strong>æŠ€æœ¯è¦ç‚¹</strong>ï¼šæ­å»ºå®Œæ•´çš„RAGç®¡é“ï¼Œé›†æˆå‘é‡æ•°æ®åº“è¿›è¡Œç›¸ä¼¼æ€§æ£€ç´¢ã€‚</li>
</ul>
</li>
<li><strong>é¡¹ç›®4ï¼šè‡ªä¸»ç ”ç©¶åŠ©æ‰‹ï¼ˆLangGraphï¼‰</strong>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šç»™å®šä¸€ä¸ªå¤æ‚ä¸»é¢˜ï¼ŒAgentèƒ½è‡ªåŠ¨è§„åˆ’æ­¥éª¤ï¼ˆæœç´¢ -&gt; é˜…è¯» -&gt; æ€»ç»“ -&gt; æŠ¥å‘Šï¼‰ã€‚</li>
<li><strong>æŠ€æœ¯è¦ç‚¹</strong>ï¼šä½¿ç”¨LangGraphå®šä¹‰çŠ¶æ€å’ŒèŠ‚ç‚¹ï¼Œæ„å»ºä¸€ä¸ªå¯æ§çš„ã€å¤šæ­¥éª¤çš„è‡ªä¸»Agentã€‚<strong>æ­¤å¤„å¯å®Œç¾è¿ç”¨ä½ çš„å¾®æœåŠ¡ç¼–æ’ç»éªŒ</strong>ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h4 data-id="heading-5"><strong>é˜¶æ®µå››ï¼šå·¥ç¨‹åŒ–ã€ä¼˜åŒ–ä¸ç”Ÿäº§éƒ¨ç½²ï¼ˆé•¿æœŸï¼‰</strong></h4>
<p><strong>ç›®æ ‡</strong>ï¼šå°†Agentç³»ç»Ÿæ‰“ç£¨è‡³ç”Ÿäº§çº§åˆ«ã€‚</p>
<p><strong>å­¦ä¹ å†…å®¹</strong>ï¼š</p>
<ul>
<li><strong>å¯è§‚æµ‹æ€§</strong>ï¼š
<ul>
<li>ä½¿ç”¨<strong>LangSmith</strong>å¯¹Agentçš„æ€è€ƒè¿‡ç¨‹ã€å·¥å…·è°ƒç”¨ã€è€—æ—¶å’Œæˆæœ¬è¿›è¡Œå…¨æ–¹ä½è¿½è¸ªå’Œè°ƒè¯•ã€‚</li>
<li>å»ºç«‹ä¸šåŠ¡æŒ‡æ ‡ï¼ˆå¦‚ä»»åŠ¡å®Œæˆç‡ï¼‰æ¥è¯„ä¼°Agentæ€§èƒ½ã€‚</li>
</ul>
</li>
<li><strong>ä¼˜åŒ–</strong>ï¼š
<ul>
<li><strong>ç¼“å­˜</strong>ï¼šå¯¹Embeddingå’ŒLLMå“åº”è¿›è¡Œç¼“å­˜ä»¥é™ä½æˆæœ¬ä¸å»¶è¿Ÿã€‚</li>
<li><strong>é™æµä¸é™çº§</strong>ï¼šä¿éšœLLM APIçš„ç¨³å®šæ€§å’ŒæœåŠ¡çš„éŸ§æ€§ã€‚</li>
<li><strong>æ¨¡å‹é€‰å‹</strong>ï¼šæ¢ç´¢æˆæœ¬æ•ˆç›Šæ›´é«˜çš„å¼€æºæ¨¡å‹ï¼ˆå¦‚é€šè¿‡Ollamaéƒ¨ç½²Llamaã€Qwenç­‰ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>éƒ¨ç½²</strong>ï¼š
<ul>
<li>ä½¿ç”¨<strong>FastAPI</strong>å°†Agentå°è£…æˆRESTful APIã€‚</li>
<li>ä½¿ç”¨<strong>Docker</strong>å®¹å™¨åŒ–åº”ç”¨ã€‚</li>
<li>åœ¨<strong>Kubernetes</strong>ä¸Šéƒ¨ç½²ï¼Œå®ç°å¼¹æ€§ä¼¸ç¼©ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-6">ç»™åç«¯å¼€å‘è€…çš„æ ¸å¿ƒå»ºè®®</h3>
<ol>
<li><strong>å‘æŒ¥ä½ çš„å·¥ç¨‹ä¼˜åŠ¿</strong>ï¼šå½“ä½ æ„å»ºAgentæ—¶ï¼Œä½ ä¸ä»…ä»…æ˜¯åœ¨å†™Promptï¼Œä½ æ˜¯åœ¨<strong>è®¾è®¡ä¸€ä¸ªç³»ç»Ÿ</strong>ã€‚ç”¨ä½ ç†Ÿæ‚‰çš„æ¶æ„æ¨¡å¼ã€è®¾è®¡åŸåˆ™å»æ€è€ƒAgentçš„å„ä¸ªç»„ä»¶ã€‚</li>
<li><strong>ä»åšä¸­å­¦</strong>ï¼šAgentæŠ€æœ¯å®è·µæ€§æå¼ºã€‚ä¸è¦åœç•™åœ¨ç†è®ºï¼Œä»ç¬¬ä¸€ä¸ªå°é¡¹ç›®å¼€å§‹æ•²ä»£ç ï¼Œé‡åˆ°çš„æ¯ä¸€ä¸ªé—®é¢˜éƒ½æ˜¯æœ€å¥½çš„å­¦ä¹ ææ–™ã€‚</li>
<li><strong>æ‹¥æŠ±ç¤¾åŒº</strong>ï¼šLangChainæ–‡æ¡£è¯¦å°½ï¼ŒDiscordç¤¾åŒºæ´»è·ƒã€‚é‡åˆ°é—®é¢˜æ—¶ï¼Œè¿™äº›éƒ½æ˜¯å®è´µçš„èµ„æºã€‚</li>
</ol>
<p>AgentæŠ€æœ¯æ­£åœ¨è¿…é€Ÿæ”¹å˜è½¯ä»¶ä¸ä¸–ç•Œçš„äº¤äº’æ–¹å¼ã€‚ä½œä¸ºä¸€ååç«¯å¼€å‘è€…ï¼Œä½ æ‰‹æ¡ç³»ç»Ÿå·¥ç¨‹çš„é’¥åŒ™ï¼Œå¿…å°†èƒ½åœ¨è¿™åœºå˜é©ä¸­æ„å»ºå‡ºç¨³å®šã€å¼ºå¤§ä¸”çœŸæ­£æœ‰ç”¨çš„æ™ºèƒ½ç³»ç»Ÿã€‚</p>
<p><strong>ç¥ä½ å­¦ä¹ é¡ºåˆ©ï¼Œå¼€å¯ä½ çš„Agentå·¥ç¨‹å¸ˆä¹‹æ—…ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MinIO ä¸å†â€œå¼€æ”¾â€ï¼ŒRustFS èƒ½å¦æˆä¸ºæ›´ä¼˜é€‰æ‹©ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7572459757107396662</link>    <guid>https://juejin.cn/post/7572459757107396662</guid>    <pubDate>2025-11-15T13:29:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572459757107396662" data-draft-id="7572459217811882047" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MinIO ä¸å†â€œå¼€æ”¾â€ï¼ŒRustFS èƒ½å¦æˆä¸ºæ›´ä¼˜é€‰æ‹©ï¼Ÿ"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-11-15T13:29:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çš®çš®æ—551"/> <meta itemprop="url" content="https://juejin.cn/user/2447981921436084"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MinIO ä¸å†â€œå¼€æ”¾â€ï¼ŒRustFS èƒ½å¦æˆä¸ºæ›´ä¼˜é€‰æ‹©ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2447981921436084/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çš®çš®æ—551
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T13:29:08.000Z" title="Sat Nov 15 2025 13:29:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿‘å¹´æ¥ï¼ŒMinIO çš„å•†ä¸šåŒ–æ­¥ä¼ä¸æ–­åŠ é€Ÿï¼Œå…¶ä¸€ç³»åˆ—æ“ä½œ<strong>ä»ä¿®æ”¹å¼€æºåè®®åˆ°é™åˆ¶å¼€æºç‰ˆæœ¬åŠŸèƒ½</strong>Â â€”â€”è®©è®¸å¤šå¿ å®ç”¨æˆ·æ„Ÿåˆ°ä¸å®‰ã€‚æ›¾ç»é‚£ä¸ªå¼€æ”¾ã€è‡ªç”±çš„ MinIO ä¼¼ä¹æ­£æ¸è¡Œæ¸è¿œï¼Œè¿™è®©ä¸šç•Œå¼€å§‹è¿«åˆ‡å¯»æ‰¾ä¸€ä¸ªæ›´å¼€æ”¾ã€å¯¹å•†ä¸šæ›´å‹å¥½ã€æ›´çº¯ç²¹çš„å¼€æºæ›¿ä»£æ–¹æ¡ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b6698768ef14913bed354b38c6bfae3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55qu55qu5p6XNTUx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763818148&amp;x-signature=OP%2FbGaUmke%2BHb18BWV3umsbtXlY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾ç‰‡</p>
<p>åœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹ï¼ŒRustFS åº”è¿è€Œç”Ÿã€‚<strong>å®ƒä¸ä»…æ˜¯ä¸€ä¸ªé›„å¿ƒå‹ƒå‹ƒçš„ MinIO å¼€æºå¹³æ›¿ï¼Œæ›´ä»£è¡¨äº†ä¸€æ¡åšæŒè‡ªä¸»å¯æ§çš„æŠ€æœ¯è·¯çº¿</strong>Â ã€‚ä¸ºäº†æ›´ç›´è§‚åœ°å±•ç¤º RustFS çš„ä»·å€¼ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db247a0dd12f4d59be0337fe2adc5106~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55qu55qu5p6XNTUx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763818148&amp;x-signature=rFoINCL4%2FnjwIBEz7%2BdcsciUIjs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾ç‰‡</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f87184ec965949f0bd746d59956ec046~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55qu55qu5p6XNTUx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763818148&amp;x-signature=h6AvnbJo9BPpy%2BzwAeegYACMnDc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾ç‰‡</p>
<p>ä½œä¸º MinIO çš„å¼€æºå¹³æ›¿ï¼ŒRustFS å‚è€ƒäº† MinIO çš„ç®€æ´ã€è½»é‡ã€å¯æ‰©å±•ã€ä¼˜é›…çš„æ¶æ„ã€‚RustFS çš„åŸºæœ¬æ¶æ„æ˜¯åˆ†å¸ƒå¼ç½‘æ ¼ï¼Œä¸€ç§ä½¿ç”¨å¤šä¸ªèŠ‚ç‚¹æ‰§è¡Œå•ä¸ªä»»åŠ¡çš„è®¡ç®—æœºæ¶æ„ã€‚æ‘’å¼ƒäº†ä¼ ç»Ÿåˆ†å¸ƒå¼å­˜å‚¨ä¸­å¤æ‚çš„ä¸»èŠ‚ç‚¹ã€å…ƒæ•°æ®èŠ‚ç‚¹ã€æ•°æ®èŠ‚ç‚¹è§’è‰²åˆ’åˆ†ï¼ŒèŠ‚ç‚¹é€šè¿‡ç½‘ç»œç›¸äº’è¿æ¥ï¼Œè¿™ä½¿å¾—å®ƒä»¬èƒ½å¤Ÿç›¸äº’é€šä¿¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c1f09a3f4584664b5a5e59a613a86ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55qu55qu5p6XNTUx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763818148&amp;x-signature=zafwKeO5FGlsEuoJDpLqgJRh5hc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾ç‰‡</p>
<h4 data-id="heading-0">ç‰¹æ€§</h4>
<ul>
<li>
<p>é«˜æ€§èƒ½</p>
<p>ï¼šä½¿ç”¨ Rust æ„å»ºï¼Œç¡®ä¿é€Ÿåº¦å’Œæ•ˆç‡ã€‚</p>
</li>
<li>
<p>åˆ†å¸ƒå¼æ¶æ„</p>
<p>ï¼šå¯æ‰©å±•ä¸”å®¹é”™çš„è®¾è®¡ï¼Œé€‚ç”¨äºå¤§è§„æ¨¡éƒ¨ç½²ã€‚</p>
</li>
<li>
<p>S3 å…¼å®¹æ€§</p>
<p>ï¼šä¸ç°æœ‰ S3 å…¼å®¹åº”ç”¨ç¨‹åºæ— ç¼é›†æˆã€‚</p>
</li>
<li>
<p>æ•°æ®æ¹–æ”¯æŒ</p>
<p>ï¼šé’ˆå¯¹å¤§æ•°æ®å’Œ AI å·¥ä½œè´Ÿè½½è¿›è¡Œäº†ä¼˜åŒ–ã€‚</p>
</li>
<li>
<p>å¼€æº</p>
<p>ï¼šé‡‡ç”¨ Apache 2.0 è®¸å¯è¯ï¼Œé¼“åŠ±ç¤¾åŒºè´¡çŒ®å’Œé€æ˜åº¦ã€‚</p>
</li>
<li>
<p>ç”¨æˆ·å‹å¥½</p>
<p>ï¼šè®¾è®¡ç®€å•ï¼Œæ˜“äºéƒ¨ç½²å’Œç®¡ç†ã€‚</p>
</li>
<li>
<p><strong>å¼€æºåœ°å€****<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frustfs%2Frustfs" target="_blank" title="https://github.com/rustfs/rustfs" ref="nofollow noopener noreferrer">github.com/rustfs/rustâ€¦</a></strong></p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/460a9e8ce1b7483b8a0e70343d45336d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55qu55qu5p6XNTUx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763818148&amp;x-signature=3%2F5OxTVXHsDOX2IrUz%2BD%2Fyq8vA0%3D" alt="å›¾ç‰‡" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¼€å‘ä¸€ä¸ªè®¡æ—¶å™¨ç»„ä»¶]]></title>    <link>https://juejin.cn/post/7572454929144872995</link>    <guid>https://juejin.cn/post/7572454929144872995</guid>    <pubDate>2025-11-15T12:51:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572454929144872995" data-draft-id="7572454929144856611" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¼€å‘ä¸€ä¸ªè®¡æ—¶å™¨ç»„ä»¶"/> <meta itemprop="keywords" content="å‰ç«¯,æµè§ˆå™¨"/> <meta itemprop="datePublished" content="2025-11-15T12:51:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å®‰æ±‰ç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2533716584308935"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¼€å‘ä¸€ä¸ªè®¡æ—¶å™¨ç»„ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2533716584308935/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å®‰æ±‰ç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T12:51:36.000Z" title="Sat Nov 15 2025 12:51:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">âœ… 1ã€è®¡æ—¶é€»è¾‘æ”¾åœ¨ Web Workerï¼Œä¸æ”¾åœ¨ä¸»çº¿ç¨‹</h2>
<ul>
<li>ç°ä»£æµè§ˆå™¨ä¸ºäº†çœç”µå’Œæ€§èƒ½ï¼Œä¼šå¯¹éå½“å‰æ˜¾ç¤ºçš„æ ‡ç­¾é¡µå®æ–½é™åˆ¶ï¼Œ<code>setTimeout / setInterval</code>å¯èƒ½å»¶è¿Ÿï¼›</li>
<li>ä¸ä¼šè¢«ä¸»çº¿ç¨‹çš„æ¸²æŸ“/JSæ‰§è¡Œé˜»å¡å½±å“ã€‚</li>
</ul>
<h2 data-id="heading-1">âœ… 2ã€é€’å½’ setTimeoutï¼Œä¸ç”¨ setInterval</h2>
<p><strong>1ã€setInterval çš„ç¼ºé™·ï¼š</strong></p>
<blockquote>
<p>setInterval(fn, 1000) çš„å«ä¹‰æ˜¯ï¼š â€œæ¯éš” 1000msï¼Œå°† fn æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—â€ï¼Œä½†ä¸ä¿è¯ fn ä½•æ—¶å¼€å§‹æ‰§è¡Œã€‚</p>
</blockquote>
<p>å¦‚æœä¸»çº¿ç¨‹ç¹å¿™ï¼ˆå¦‚æ¸²æŸ“å¡é¡¿ã€å¤§é‡è®¡ç®—ï¼‰ï¼Œfn å¯èƒ½å»¶è¿Ÿæ‰§è¡Œï¼Œè€Œä¸‹ä¸€æ¬¡å›è°ƒä»æŒ‰å›ºå®šé—´éš”æ’é˜Ÿï¼Œå¯¼è‡´ï¼šç´¯è®¡è¯¯å·®è¶Šæ¥è¶Šå¤§ï¼Œå®é™…æ‰§è¡Œé¢‘ç‡è¿œä½äºé¢„æœŸã€‚</p>
<p><strong>2ã€setTimeout é€’å½’çš„ä¼˜åŠ¿:</strong></p>
<blockquote>
<p>åŠ¨æ€è°ƒæ•´ä¸‹ä¸€æ¬¡å»¶è¿Ÿæ—¶é—´ï¼Œè¡¥å¿ä¸Šä¸€æ¬¡çš„æ‰§è¡Œè€—æ—¶ï¼ŒsetTimeout é€’å½’æ˜¯â€œæ‰§è¡Œå®Œå†çº¦ä¸‹ä¸€æ¬¡â€ï¼Œé¿å…ä»»åŠ¡å †ç§¯ã€‚</p>
</blockquote>
<pre><code class="hljs language-scss" lang="scss">functionÂ <span class="hljs-built_in">tick</span>()Â {
Â Â <span class="hljs-comment">//Â ...</span>
Â Â <span class="hljs-built_in">setTimeout</span>(tick,Â <span class="hljs-number">1000</span>);Â <span class="hljs-comment">//Â ä¸‹ä¸€æ¬¡åœ¨â€œæœ¬æ¬¡ç»“æŸåâ€å†å®‰æ’</span>
}
<span class="hljs-built_in">tick</span>();
</code></pre>
<p><strong>æ¯æ¬¡éƒ½æ˜¯â€œä¸Šä¸€æ¬¡ç»“æŸ + 1000msâ€ï¼Œä¸ä¼šå †ç§¯ï¼Œè¯¯å·®ä¸ç´¯ç§¯ï¼</strong></p>
<h2 data-id="heading-2">âœ… 3ã€å®Œæ•´ä»£ç </h2>
<p><strong>Timer.vueï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">&lt;scriptÂ setupÂ <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;
importÂ {Â onBeforeUnmount,Â refÂ }Â fromÂ 'vue'<span class="hljs-comment">;</span>
importÂ {
Â Â COMPLETE,
Â Â COUNTDOWN,
Â Â formatSeconds,
Â Â PAUSE,
Â Â RESET,
Â Â START,
Â Â UPDATE,
}Â fromÂ './timer.utils'<span class="hljs-comment">;</span>

constÂ <span class="hljs-attr">worker</span>Â =Â newÂ Worker(newÂ URL(<span class="hljs-string">'./timer.worker.ts'</span>,Â import.meta.url),Â {
Â Â type:Â 'module',
})<span class="hljs-comment">;</span>

constÂ <span class="hljs-attr">props</span>Â =Â withDefaults(
Â Â defineProps&lt;{
Â Â Â Â mode?:Â 'countdown'Â |Â 'countup'<span class="hljs-comment">;Â //Â è®¡æ—¶æ¨¡å¼:Â countdown:å€’è®¡æ—¶,Â countup:è®¡æ—¶</span>
Â Â Â Â remMinutes?:Â number<span class="hljs-comment">;Â //Â å€’è®¡æ—¶åˆå§‹åˆ†é’Ÿæ•°ï¼ˆä»…Â countdownÂ æ¨¡å¼æœ‰æ•ˆï¼‰</span>
Â Â Â Â immediate?:Â boolean<span class="hljs-comment">;Â //Â æ˜¯å¦ç«‹å³å¼€å§‹è®¡æ—¶</span>
Â Â Â Â control?:Â boolean<span class="hljs-comment">;Â //Â æ˜¯å¦æ˜¾ç¤ºæ§åˆ¶æŒ‰é’®</span>
Â Â Â Â step?:Â number<span class="hljs-comment">;Â //Â è®¡æ—¶æ­¥é•¿(å•ä½ï¼šç§’ï¼Œé™åˆ¶æ•´ç§’ï¼‰</span>
Â Â Â Â onStart?:Â ()Â =&gt;Â void<span class="hljs-comment">;</span>
Â Â Â Â onUpdate?:Â (time:Â string<span class="hljs-section">[]</span>)Â =&gt;Â void<span class="hljs-comment">;</span>
Â Â Â Â onPause?:Â (time:Â string<span class="hljs-section">[]</span>)Â =&gt;Â void<span class="hljs-comment">;</span>
Â Â Â Â onComplete?:Â ()Â =&gt;Â void<span class="hljs-comment">;</span>
Â Â Â Â onReset?:Â ()Â =&gt;Â void<span class="hljs-comment">;</span>
Â Â }&gt;(),
Â Â {
Â Â Â Â mode:Â COUNTDOWN,
Â Â Â Â immediate:Â true,
Â Â Â Â control:Â true,
Â Â Â Â step:Â 1,
Â Â }
)<span class="hljs-comment">;</span>

//Â å½“å‰è¿è¡ŒçŠ¶æ€ï¼š
//Â -Â undefinedï¼šæœªå¼€å§‹ï¼ˆåˆå§‹æˆ–é‡ç½®åï¼‰
//Â -Â trueï¼šæ­£åœ¨è¿è¡Œ
//Â -Â falseï¼šå·²æš‚åœ
constÂ <span class="hljs-attr">isStart</span>Â =Â ref&lt;boolean&gt;()<span class="hljs-comment">;</span>

//Â å½“å‰æ€»ç§’æ•°
letÂ <span class="hljs-attr">currentSeconds</span>Â =Â props.modeÂ ===Â COUNTDOWNÂ ?Â (props.remMinutesÂ ??Â <span class="hljs-number">0</span>)Â *Â <span class="hljs-number">60</span>Â :Â <span class="hljs-number">0</span><span class="hljs-comment">;</span>

//Â åˆå§‹åŒ–æ—¶é—´æ ¼å¼Â <span class="hljs-section">[HH,Â MM,Â SS]</span>
constÂ <span class="hljs-attr">initialTime</span>Â =Â formatSeconds(currentSeconds)<span class="hljs-comment">;</span>
constÂ <span class="hljs-attr">hours</span>Â =Â ref(initialTime[<span class="hljs-number">0</span>])<span class="hljs-comment">;</span>
constÂ <span class="hljs-attr">minutes</span>Â =Â ref(initialTime[<span class="hljs-number">1</span>])<span class="hljs-comment">;</span>
constÂ <span class="hljs-attr">seconds</span>Â =Â ref(initialTime[<span class="hljs-number">2</span>])<span class="hljs-comment">;</span>

listenWorkerMsg()<span class="hljs-comment">;</span>

ifÂ (props.immediate)Â {
Â Â start()<span class="hljs-comment">;</span>
}

functionÂ listenWorkerMsg()Â {
Â Â <span class="hljs-attr">worker.onmessage</span>Â =Â eventÂ =&gt;Â {
Â Â Â Â constÂ {Â time,Â type,Â rawSecondsÂ }Â =Â event.data<span class="hljs-comment">;</span>

Â Â Â Â ifÂ (<span class="hljs-attr">type</span>Â ===Â UPDATE)Â {
Â Â Â Â Â Â <span class="hljs-section">[hours.value,Â minutes.value,Â seconds.value]</span>Â =Â time<span class="hljs-comment">;</span>
Â Â Â Â Â Â <span class="hljs-attr">currentSeconds</span>Â =Â rawSeconds<span class="hljs-comment">;</span>
Â Â Â Â Â Â props.onUpdate?.(<span class="hljs-section">[hours.value,Â minutes.value,Â seconds.value]</span>Â asÂ string<span class="hljs-section">[]</span>)<span class="hljs-comment">;</span>
Â Â Â Â }

Â Â Â Â ifÂ (<span class="hljs-attr">type</span>Â ===Â COMPLETE)Â {
Â Â Â Â Â Â <span class="hljs-attr">isStart.value</span>Â =Â undefined<span class="hljs-comment">;</span>
Â Â Â Â Â Â props.onComplete?.()<span class="hljs-comment">;</span>
Â Â Â Â }
Â Â }<span class="hljs-comment">;</span>
}

functionÂ start()Â {
Â Â ifÂ (<span class="hljs-attr">isStart.value</span>Â ===Â <span class="hljs-literal">true</span>)Â {
Â Â Â Â return<span class="hljs-comment">;</span>
Â Â }
Â Â <span class="hljs-attr">isStart.value</span>Â =Â <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
Â Â constÂ {Â mode,Â stepÂ }Â =Â props<span class="hljs-comment">;</span>
Â Â worker.postMessage({
Â Â Â Â action:Â START,
Â Â Â Â step:Â Math.max(1,Â Math.floor(step)),Â //Â ä»…æ”¯æŒç§’çº§æ›´æ–°
Â Â Â Â mode,
Â Â Â Â currentSeconds,
Â Â })<span class="hljs-comment">;</span>
Â Â props.onStart?.()<span class="hljs-comment">;</span>
}

functionÂ pause()Â {
Â Â ifÂ (isStart.valueÂ !==Â true)Â {
Â Â Â Â return<span class="hljs-comment">;</span>
Â Â }
Â Â <span class="hljs-attr">isStart.value</span>Â =Â <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
Â Â worker.postMessage({Â action:Â PAUSEÂ })<span class="hljs-comment">;</span>
Â Â props.onPause?.(<span class="hljs-section">[hours.value,Â minutes.value,Â seconds.value]</span>Â asÂ string<span class="hljs-section">[]</span>)<span class="hljs-comment">;</span>
}

functionÂ reset()Â {
Â Â worker.postMessage({Â action:Â RESETÂ })<span class="hljs-comment">;</span>
Â Â <span class="hljs-attr">isStart.value</span>Â =Â undefined<span class="hljs-comment">;</span>
Â Â constÂ {Â mode,Â remMinutes,Â immediateÂ }Â =Â props<span class="hljs-comment">;</span>
Â Â <span class="hljs-attr">currentSeconds</span>Â =Â modeÂ ===Â COUNTDOWNÂ ?Â (remMinutesÂ ??Â <span class="hljs-number">0</span>)Â *Â <span class="hljs-number">60</span>Â :Â <span class="hljs-number">0</span><span class="hljs-comment">;</span>
Â Â ifÂ (immediate)Â {
Â Â Â Â start()<span class="hljs-comment">;</span>
Â Â }
Â Â props.onReset?.()<span class="hljs-comment">;</span>
}

onBeforeUnmount(()Â =&gt;Â {
Â Â worker.terminate()<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>

defineExpose({
Â Â start,
Â Â pause,
Â Â reset,
})<span class="hljs-comment">;</span>
&lt;/script&gt;
</code></pre>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"timer"</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"timer-container"</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>Â <span class="hljs-attr">:hours</span>=<span class="hljs-string">"hours"</span>Â <span class="hljs-attr">:minutes</span>=<span class="hljs-string">"minutes"</span>Â <span class="hljs-attr">:seconds</span>=<span class="hljs-string">"seconds"</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{{Â hoursÂ }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"delimiter"</span>&gt;</span>:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{{Â minutesÂ }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"delimiter"</span>&gt;</span>:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{{Â secondsÂ }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"controls-container"</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>Â <span class="hljs-attr">name</span>=<span class="hljs-string">"controls"</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">v-if</span>=<span class="hljs-string">"control"</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"controls"</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"btn"</span>Â <span class="hljs-attr">:disabled</span>=<span class="hljs-string">"isStartÂ ===Â true"</span>Â @<span class="hljs-attr">click</span>=<span class="hljs-string">"start"</span>&gt;</span>å¼€å§‹<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"btn"</span>Â <span class="hljs-attr">:disabled</span>=<span class="hljs-string">"isStartÂ ===Â false"</span>Â @<span class="hljs-attr">click</span>=<span class="hljs-string">"pause"</span>&gt;</span>æš‚åœ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"btn"</span>Â @<span class="hljs-attr">click</span>=<span class="hljs-string">"reset"</span>&gt;</span>é‡ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>Â <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span>Â <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.timer-container</span>Â {
Â Â <span class="hljs-attribute">font-size</span>:Â <span class="hljs-number">20px</span>;
Â Â <span class="hljs-attribute">font-weight</span>:Â <span class="hljs-number">500</span>;
Â Â <span class="hljs-attribute">letter-spacing</span>:Â <span class="hljs-number">3px</span>;
Â Â <span class="hljs-attribute">display</span>:Â flex;
Â Â <span class="hljs-attribute">align-items</span>:Â center;
Â Â <span class="hljs-attribute">justify-content</span>:Â center;

Â Â <span class="hljs-selector-class">.delimiter</span>Â {
Â Â Â Â <span class="hljs-attribute">transform</span>:Â <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">1px</span>);
Â Â }
}

<span class="hljs-selector-class">.controls</span>Â {
Â Â <span class="hljs-attribute">margin-top</span>:Â <span class="hljs-number">8px</span>;
Â Â <span class="hljs-attribute">display</span>:Â flex;
Â Â <span class="hljs-attribute">align-items</span>:Â center;
Â Â <span class="hljs-attribute">justify-content</span>:Â center;

Â Â <span class="hljs-selector-class">.btn</span>Â {
Â Â Â Â <span class="hljs-attribute">margin</span>:Â <span class="hljs-number">0</span>Â <span class="hljs-number">4px</span>;
Â Â Â Â <span class="hljs-attribute">border-radius</span>:Â <span class="hljs-number">8px</span>;
Â Â Â Â <span class="hljs-attribute">border</span>:Â <span class="hljs-number">1px</span>Â solidÂ transparent;
Â Â Â Â <span class="hljs-attribute">padding</span>:Â <span class="hljs-number">0.6em</span>Â <span class="hljs-number">1.2em</span>;
Â Â }

Â Â <span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:hover</span>Â {
Â Â Â Â <span class="hljs-attribute">border-color</span>:Â <span class="hljs-number">#646cff</span>;
Â Â }

Â Â <span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:focus</span>,
Â Â <span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:focus</span>-visibleÂ {
Â Â Â Â <span class="hljs-attribute">outline</span>:Â <span class="hljs-number">4px</span>Â autoÂ -webkit-focus-ring-color;
Â Â }

Â Â &amp;<span class="hljs-selector-class">.disabled</span>Â {
Â Â Â Â <span class="hljs-selector-class">.btn</span>Â {
Â Â Â Â Â Â <span class="hljs-attribute">background</span>:Â <span class="hljs-number">#f4f4f4</span>;
Â Â Â Â Â Â <span class="hljs-attribute">cursor</span>:Â not-allowed;
Â Â Â Â }
Â Â }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p><strong>timer.worker.tsï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">/**
Â *Â webÂ workerÂ é˜²æ­¢ä¸»çº¿ç¨‹é˜»å¡ã€æµè§ˆå™¨æ ‡ç­¾é¡µæœªæ¿€æ´»æ—¶ï¼Œå½±å“è®¡æ—¶ç²¾åº¦
Â */

importÂ {
Â Â COMPLETE,
Â Â COUNTDOWN,
Â Â COUNTUP,
Â Â formatSeconds,
Â Â PAUSE,
Â Â RESET,
Â Â START,
Â Â UPDATE,
}Â fromÂ './timer.utils.ts'<span class="hljs-comment">;</span>

letÂ <span class="hljs-attr">isRunning</span>Â =Â <span class="hljs-literal">false</span><span class="hljs-comment">;Â //Â æ˜¯å¦è¿è¡Œä¸­</span>
letÂ timeoutId:Â numberÂ |Â null<span class="hljs-comment">;</span>

<span class="hljs-attr">self.onmessage</span>Â =Â eventÂ =&gt;Â {
Â Â constÂ {Â action,Â mode,Â step,Â currentSecondsÂ }Â =Â event.data<span class="hljs-comment">;</span>

Â Â //Â é‡ç½®/æš‚åœ
Â Â ifÂ (<span class="hljs-attr">action</span>Â ===Â RESETÂ ||Â actionÂ ===Â PAUSE)Â {
Â Â Â Â stopTimer()<span class="hljs-comment">;</span>
Â Â Â Â return<span class="hljs-comment">;</span>
Â Â }

Â Â //Â å¼€å§‹
Â Â ifÂ (<span class="hljs-attr">action</span>Â ===Â START)Â {
Â Â Â Â stopTimer()<span class="hljs-comment">;</span>
Â Â Â Â <span class="hljs-attr">isRunning</span>Â =Â <span class="hljs-literal">true</span><span class="hljs-comment">;</span>

Â Â Â Â ifÂ (<span class="hljs-attr">mode</span>Â ===Â COUNTDOWN)Â {
Â Â Â Â Â Â startCountdown(currentSeconds,Â step)<span class="hljs-comment">;</span>
Â Â Â Â }

Â Â Â Â ifÂ (<span class="hljs-attr">mode</span>Â ===Â COUNTUP)Â {
Â Â Â Â Â Â startCountup(currentSeconds,Â step)<span class="hljs-comment">;</span>
Â Â Â Â }
Â Â }
}<span class="hljs-comment">;</span>

functionÂ startCountdown(remaining:Â number,Â step:Â number)Â {
Â Â constÂ <span class="hljs-attr">tick</span>Â =Â ()Â =&gt;Â {
Â Â Â Â ifÂ (!isRunning)Â return<span class="hljs-comment">;</span>

Â Â Â Â //Â å‘é€å½“å‰æ—¶é—´çŠ¶æ€
Â Â Â Â self.postMessage({
Â Â Â Â Â Â type:Â UPDATE,
Â Â Â Â Â Â time:Â formatSeconds(remaining),
Â Â Â Â Â Â rawSeconds:Â remaining,
Â Â Â Â })<span class="hljs-comment">;</span>

Â Â Â Â //Â å¦‚æœå·²ç»“æŸ
Â Â Â Â ifÂ (remainingÂ &lt;=Â 0)Â {
Â Â Â Â Â Â self.postMessage({Â type:Â COMPLETEÂ })<span class="hljs-comment">;</span>
Â Â Â Â Â Â stopTimer()<span class="hljs-comment">;</span>
Â Â Â Â Â Â return<span class="hljs-comment">;</span>
Â Â Â Â }

Â Â Â Â //Â è®¡ç®—ä¸‹ä¸€æ¬¡å‰©ä½™æ—¶é—´ï¼ˆç¡®ä¿ä¸å°äºÂ 0ï¼‰
Â Â Â Â constÂ <span class="hljs-attr">nextRemaining</span>Â =Â Math.max(<span class="hljs-number">0</span>,Â remainingÂ -Â step)<span class="hljs-comment">;</span>
Â Â Â Â constÂ <span class="hljs-attr">delay</span>Â =Â (remainingÂ -Â nextRemaining)Â *Â <span class="hljs-number">1000</span><span class="hljs-comment">;Â //Â ç²¾ç¡®å»¶è¿Ÿ</span>

Â Â Â Â ifÂ (nextRemainingÂ &gt;Â 0)Â {
Â Â Â Â Â Â //Â ç»§ç»­å€’è®¡æ—¶
Â Â Â Â Â Â <span class="hljs-attr">timeoutId</span>Â =Â self.setTimeout(tick,Â delay)<span class="hljs-comment">;</span>
Â Â Â Â }Â elseÂ {
Â Â Â Â Â Â //Â æœ€åä¸€æ¬¡å½’é›¶
Â Â Â Â Â Â <span class="hljs-attr">timeoutId</span>Â =Â self.setTimeout(()Â =&gt;Â {
Â Â Â Â Â Â Â Â self.postMessage({
Â Â Â Â Â Â Â Â Â Â type:Â UPDATE,
Â Â Â Â Â Â Â Â Â Â time:Â formatSeconds(0),
Â Â Â Â Â Â Â Â Â Â rawSeconds:Â 0,
Â Â Â Â Â Â Â Â })<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â self.postMessage({Â type:Â COMPLETEÂ })<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â stopTimer()<span class="hljs-comment">;</span>
Â Â Â Â Â Â },Â delay)<span class="hljs-comment">;</span>
Â Â Â Â }

Â Â Â Â <span class="hljs-attr">remaining</span>Â =Â nextRemaining<span class="hljs-comment">;</span>
Â Â }<span class="hljs-comment">;</span>

Â Â tick()<span class="hljs-comment">;Â //Â ç«‹å³è§¦å‘ç¬¬ä¸€æ¬¡æ›´æ–°ï¼ˆæ˜¾ç¤ºåˆå§‹å€¼ï¼‰</span>
}

functionÂ startCountup(elapsed:Â number,Â step:Â number)Â {
Â Â constÂ <span class="hljs-attr">tick</span>Â =Â ()Â =&gt;Â {
Â Â Â Â ifÂ (!isRunning)Â return<span class="hljs-comment">;</span>

Â Â Â Â self.postMessage({
Â Â Â Â Â Â type:Â UPDATE,
Â Â Â Â Â Â time:Â formatSeconds(elapsed),
Â Â Â Â Â Â rawSeconds:Â elapsed,
Â Â Â Â })<span class="hljs-comment">;</span>

Â Â Â Â elapsedÂ +=Â step<span class="hljs-comment">;</span>
Â Â Â Â <span class="hljs-attr">timeoutId</span>Â =Â self.setTimeout(tick,Â stepÂ *Â <span class="hljs-number">1000</span>)<span class="hljs-comment">;</span>
Â Â }<span class="hljs-comment">;</span>

Â Â tick()<span class="hljs-comment">;</span>
}

functionÂ stopTimer()Â {
Â Â ifÂ (timeoutId)Â {
Â Â Â Â self.clearTimeout(timeoutId)<span class="hljs-comment">;</span>
Â Â Â Â <span class="hljs-attr">timeoutId</span>Â =Â null<span class="hljs-comment">;</span>
Â Â }
Â Â <span class="hljs-attr">isRunning</span>Â =Â <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
}
</code></pre>
<p><strong>timer.utils.ts:</strong></p>
<pre><code class="hljs language-ini" lang="ini">functionÂ formatSeconds(totalSeconds:Â number)Â {
Â Â <span class="hljs-attr">totalSeconds</span>Â =Â Math.max(<span class="hljs-number">0</span>,Â totalSeconds)<span class="hljs-comment">;</span>
Â Â constÂ <span class="hljs-attr">h</span>Â =Â Math.floor(totalSecondsÂ /Â <span class="hljs-number">3600</span>)<span class="hljs-comment">;</span>
Â Â constÂ <span class="hljs-attr">m</span>Â =Â Math.floor((totalSecondsÂ %Â <span class="hljs-number">3600</span>)Â /Â <span class="hljs-number">60</span>)<span class="hljs-comment">;</span>
Â Â constÂ <span class="hljs-attr">s</span>Â =Â totalSecondsÂ %Â <span class="hljs-number">60</span><span class="hljs-comment">;</span>
Â Â returnÂ <span class="hljs-section">[h,Â m,Â s]</span>.map(<span class="hljs-attr">v</span>Â =&gt;Â String(v).padStart(<span class="hljs-number">2</span>,Â <span class="hljs-string">'0'</span>))<span class="hljs-comment">;</span>
}

constÂ <span class="hljs-attr">COUNTDOWN</span>Â =Â <span class="hljs-string">'countdown'</span><span class="hljs-comment">;</span>
constÂ <span class="hljs-attr">COUNTUP</span>Â =Â <span class="hljs-string">'countup'</span><span class="hljs-comment">;</span>

constÂ <span class="hljs-attr">START</span>Â =Â <span class="hljs-string">'start'</span><span class="hljs-comment">;</span>
constÂ <span class="hljs-attr">PAUSE</span>Â =Â <span class="hljs-string">'pause'</span><span class="hljs-comment">;</span>
constÂ <span class="hljs-attr">RESET</span>Â =Â <span class="hljs-string">'reset'</span><span class="hljs-comment">;</span>

constÂ <span class="hljs-attr">UPDATE</span>Â =Â <span class="hljs-string">'update'</span><span class="hljs-comment">;</span>
constÂ <span class="hljs-attr">COMPLETE</span>Â =Â <span class="hljs-string">'complete'</span><span class="hljs-comment">;</span>

exportÂ {
Â Â formatSeconds,
Â Â COUNTDOWN,
Â Â COUNTUP,
Â Â START,
Â Â PAUSE,
Â Â RESET,
Â Â UPDATE,
Â Â COMPLETE,
}<span class="hljs-comment">;</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C++ä¸­æœ‰åŒå‘æ˜ å°„æ•°æ®ç»“æ„å—ï¼ŸKeyå’ŒValueèƒ½å¦åŒå‘æŸ¥æ‰¾ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7572385850635534342</link>    <guid>https://juejin.cn/post/7572385850635534342</guid>    <pubDate>2025-11-14T10:24:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572385850635534342" data-draft-id="7572385850635501574" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C++ä¸­æœ‰åŒå‘æ˜ å°„æ•°æ®ç»“æ„å—ï¼ŸKeyå’ŒValueèƒ½å¦åŒå‘æŸ¥æ‰¾ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-14T10:24:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="oioihoii"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C++ä¸­æœ‰åŒå‘æ˜ å°„æ•°æ®ç»“æ„å—ï¼ŸKeyå’ŒValueèƒ½å¦åŒå‘æŸ¥æ‰¾ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    oioihoii
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T10:24:11.000Z" title="Fri Nov 14 2025 10:24:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    15
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ—¥å¸¸çš„C++å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è¿™æ ·çš„éœ€æ±‚ï¼šä¸ä»…éœ€è¦é€šè¿‡keyå¿«é€Ÿæ‰¾åˆ°valueï¼Œè¿˜éœ€è¦é€šè¿‡valueåæŸ¥keyã€‚è¿™ç§åŒå‘æ˜ å°„çš„éœ€æ±‚åœ¨å®é™…é¡¹ç›®ä¸­ååˆ†å¸¸è§ï¼Œæ¯”å¦‚ç”¨æˆ·IDä¸ç”¨æˆ·åçš„æ˜ å°„ã€é”™è¯¯ç ä¸é”™è¯¯ä¿¡æ¯çš„å¯¹åº”å…³ç³»ç­‰ã€‚é‚£ä¹ˆï¼ŒC++æ ‡å‡†åº“æ˜¯å¦æä¾›äº†è¿™æ ·çš„æ•°æ®ç»“æ„å‘¢ï¼Ÿ</p>
<h2 data-id="heading-0">C++æ ‡å‡†åº“çš„ç°çŠ¶ï¼šä»¤äººé—æ†¾çš„ç¼ºå¤±</h2>
<p>ä»¤äººé—æ†¾çš„æ˜¯ï¼ŒC++æ ‡å‡†åº“ä¸­å¹¶æ²¡æœ‰ç›´æ¥æä¾›ä¸“é—¨çš„åŒå‘æ˜ å°„æ•°æ®ç»“æ„ã€‚æˆ‘ä»¬ç†Ÿæ‚‰çš„<code>std::map</code>å’Œ<code>std::unordered_map</code>éƒ½åªèƒ½å®ç°å•å‘æŸ¥æ‰¾â€”â€”åªèƒ½é€šè¿‡keyæŸ¥æ‰¾valueï¼Œæ— æ³•é€šè¿‡valueå¿«é€Ÿæ‰¾åˆ°keyã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unordered_map&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>

<span class="hljs-comment">// ä¼ ç»Ÿçš„unordered_mapåªèƒ½å•å‘æŸ¥æ‰¾</span>
std::unordered_map&lt;<span class="hljs-type">int</span>, std::string&gt; single_map;
single_map[<span class="hljs-number">1</span>] = <span class="hljs-string">"Alice"</span>;
single_map[<span class="hljs-number">2</span>] = <span class="hljs-string">"Bob"</span>;

<span class="hljs-comment">// å¯ä»¥é€šè¿‡keyæ‰¾åˆ°value</span>
std::string name = single_map[<span class="hljs-number">1</span>];  <span class="hljs-comment">// æ­£ç¡®ï¼šå¾—åˆ°"Alice"</span>

<span class="hljs-comment">// ä½†æ˜¯æ— æ³•ç›´æ¥é€šè¿‡valueæ‰¾åˆ°key</span>
<span class="hljs-comment">// éœ€è¦éå†æ•´ä¸ªmapï¼Œæ•ˆç‡ä½ä¸‹ï¼</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">findKeyByValue</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; value)</span> </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; pair : single_map) {
        <span class="hljs-keyword">if</span> (pair.second == value) {
            <span class="hljs-keyword">return</span> pair.first;
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// æœªæ‰¾åˆ°</span>
}
</code></pre>
<p>è¿™ç§éå†æŸ¥æ‰¾çš„æ–¹å¼æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œåœ¨æ•°æ®é‡è¾ƒå¤§æ—¶æ€§èƒ½æ˜¯æ— æ³•æ¥å—çš„ã€‚</p>
<h2 data-id="heading-1">è§£å†³æ–¹æ¡ˆï¼šè‡ªå·±åŠ¨æ‰‹ï¼Œä¸°è¡£è¶³é£Ÿ</h2>
<p>æ—¢ç„¶æ ‡å‡†åº“æ²¡æœ‰æä¾›ï¼Œæˆ‘ä»¬å°±éœ€è¦è‡ªå·±å®ç°ã€‚ä»¥ä¸‹æ˜¯å‡ ç§å¸¸è§çš„è§£å†³æ–¹æ¡ˆï¼š</p>
<h3 data-id="heading-2">æ–¹æ¡ˆä¸€ï¼šåŒunordered_mapå®ç°ï¼ˆæ¨èï¼‰</h3>
<p>è¿™æ˜¯æœ€ç›´æ¥ä¸”é«˜æ•ˆçš„æ–¹æ³•ï¼Œç»´æŠ¤ä¸¤ä¸ªå“ˆå¸Œè¡¨ï¼Œåˆ†åˆ«å­˜å‚¨key-&gt;valueå’Œvalue-&gt;keyçš„æ˜ å°„å…³ç³»ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unordered_map&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdexcept&gt;</span></span>

<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> K, <span class="hljs-keyword">typename</span> V&gt;
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BiDirectionalMap</span> {
<span class="hljs-keyword">private</span>:
    std::unordered_map&lt;K, V&gt; key_to_value;
    std::unordered_map&lt;V, K&gt; value_to_key;

<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// æ’å…¥é”®å€¼å¯¹</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">insert</span><span class="hljs-params">(<span class="hljs-type">const</span> K&amp; key, <span class="hljs-type">const</span> V&amp; value)</span> </span>{
        <span class="hljs-keyword">if</span> (key_to_value.<span class="hljs-built_in">count</span>(key) || value_to_key.<span class="hljs-built_in">count</span>(value)) {
            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">invalid_argument</span>(<span class="hljs-string">"Key or value already exists"</span>);
        }
        key_to_value[key] = value;
        value_to_key[value] = key;
    }
    
    <span class="hljs-comment">// é€šè¿‡keyè·å–value</span>
    <span class="hljs-function">V <span class="hljs-title">getValue</span><span class="hljs-params">(<span class="hljs-type">const</span> K&amp; key)</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">auto</span> it = key_to_value.<span class="hljs-built_in">find</span>(key);
        <span class="hljs-keyword">if</span> (it == key_to_value.<span class="hljs-built_in">end</span>()) {
            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">out_of_range</span>(<span class="hljs-string">"Key not found"</span>);
        }
        <span class="hljs-keyword">return</span> it-&gt;second;
    }
    
    <span class="hljs-comment">// é€šè¿‡valueè·å–key</span>
    <span class="hljs-function">K <span class="hljs-title">getKey</span><span class="hljs-params">(<span class="hljs-type">const</span> V&amp; value)</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">auto</span> it = value_to_key.<span class="hljs-built_in">find</span>(value);
        <span class="hljs-keyword">if</span> (it == value_to_key.<span class="hljs-built_in">end</span>()) {
            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">out_of_range</span>(<span class="hljs-string">"Value not found"</span>);
        }
        <span class="hljs-keyword">return</span> it-&gt;second;
    }
    
    <span class="hljs-comment">// æ£€æŸ¥keyæ˜¯å¦å­˜åœ¨</span>
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">containsKey</span><span class="hljs-params">(<span class="hljs-type">const</span> K&amp; key)</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> key_to_value.<span class="hljs-built_in">find</span>(key) != key_to_value.<span class="hljs-built_in">end</span>();
    }
    
    <span class="hljs-comment">// æ£€æŸ¥valueæ˜¯å¦å­˜åœ¨</span>
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">containsValue</span><span class="hljs-params">(<span class="hljs-type">const</span> V&amp; value)</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> value_to_key.<span class="hljs-built_in">find</span>(value) != value_to_key.<span class="hljs-built_in">end</span>();
    }
    
    <span class="hljs-comment">// é€šè¿‡keyåˆ é™¤</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">eraseByKey</span><span class="hljs-params">(<span class="hljs-type">const</span> K&amp; key)</span> </span>{
        <span class="hljs-keyword">auto</span> it = key_to_value.<span class="hljs-built_in">find</span>(key);
        <span class="hljs-keyword">if</span> (it != key_to_value.<span class="hljs-built_in">end</span>()) {
            value_to_key.<span class="hljs-built_in">erase</span>(it-&gt;second);
            key_to_value.<span class="hljs-built_in">erase</span>(it);
        }
    }
    
    <span class="hljs-comment">// é€šè¿‡valueåˆ é™¤</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">eraseByValue</span><span class="hljs-params">(<span class="hljs-type">const</span> V&amp; value)</span> </span>{
        <span class="hljs-keyword">auto</span> it = value_to_key.<span class="hljs-built_in">find</span>(value);
        <span class="hljs-keyword">if</span> (it != value_to_key.<span class="hljs-built_in">end</span>()) {
            key_to_value.<span class="hljs-built_in">erase</span>(it-&gt;second);
            value_to_key.<span class="hljs-built_in">erase</span>(it);
        }
    }
    
    <span class="hljs-function"><span class="hljs-type">size_t</span> <span class="hljs-title">size</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> key_to_value.<span class="hljs-built_in">size</span>();
    }
    
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">empty</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> key_to_value.<span class="hljs-built_in">empty</span>();
    }
};

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    BiDirectionalMap&lt;<span class="hljs-type">int</span>, std::string&gt; id_name_map;
    
    <span class="hljs-comment">// æ’å…¥æ•°æ®</span>
    id_name_map.<span class="hljs-built_in">insert</span>(<span class="hljs-number">1</span>, <span class="hljs-string">"Alice"</span>);
    id_name_map.<span class="hljs-built_in">insert</span>(<span class="hljs-number">2</span>, <span class="hljs-string">"Bob"</span>);
    id_name_map.<span class="hljs-built_in">insert</span>(<span class="hljs-number">3</span>, <span class="hljs-string">"Charlie"</span>);
    
    <span class="hljs-comment">// åŒå‘æŸ¥æ‰¾</span>
    std::cout &lt;&lt; <span class="hljs-string">"Name for ID 2: "</span> &lt;&lt; id_name_map.<span class="hljs-built_in">getValue</span>(<span class="hljs-number">2</span>) &lt;&lt; std::endl; <span class="hljs-comment">// Bob</span>
    std::cout &lt;&lt; <span class="hljs-string">"ID for name 'Alice': "</span> &lt;&lt; id_name_map.<span class="hljs-built_in">getKey</span>(<span class="hljs-string">"Alice"</span>) &lt;&lt; std::endl; <span class="hljs-comment">// 1</span>
    
    <span class="hljs-comment">// åˆ é™¤æ“ä½œ</span>
    id_name_map.<span class="hljs-built_in">eraseByKey</span>(<span class="hljs-number">3</span>); <span class="hljs-comment">// é€šè¿‡keyåˆ é™¤</span>
    id_name_map.<span class="hljs-built_in">eraseByValue</span>(<span class="hljs-string">"Bob"</span>); <span class="hljs-comment">// é€šè¿‡valueåˆ é™¤</span>
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>è¿™ç§å®ç°çš„ä¼˜ç‚¹æ˜¯ï¼š</p>
<ul>
<li><strong>æŸ¥æ‰¾æ•ˆç‡é«˜</strong>ï¼šä¸¤ä¸ªæ–¹å‘éƒ½æ˜¯O(1)æ—¶é—´å¤æ‚åº¦</li>
<li><strong>å®ç°ç®€å•</strong>ï¼šä»£ç ç›´è§‚æ˜“æ‡‚</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šæ”¯æŒä¸åŒçš„keyå’Œvalueç±»å‹</li>
</ul>
<p>ç¼ºç‚¹æ˜¯ï¼š</p>
<ul>
<li><strong>å†…å­˜å ç”¨ç¿»å€</strong>ï¼šéœ€è¦å­˜å‚¨ä¸¤ä»½æ•°æ®</li>
<li><strong>æ•°æ®ä¸€è‡´æ€§</strong>ï¼šéœ€è¦ç¡®ä¿ä¸¤ä¸ªmapå§‹ç»ˆä¿æŒåŒæ­¥</li>
</ul>
<h3 data-id="heading-3">æ–¹æ¡ˆäºŒï¼šä½¿ç”¨Boost.Bimap</h3>
<p>å¦‚æœä½ ä¸ä»‹æ„ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼ŒBooståº“æä¾›äº†ç°æˆçš„<code>bimap</code>å®ç°ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;boost/bimap.hpp&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    boost::bimap&lt;<span class="hljs-type">int</span>, std::string&gt; bimap;
    
    <span class="hljs-comment">// æ’å…¥æ•°æ®</span>
    bimap.<span class="hljs-built_in">insert</span>({<span class="hljs-number">1</span>, <span class="hljs-string">"Alice"</span>});
    bimap.<span class="hljs-built_in">insert</span>({<span class="hljs-number">2</span>, <span class="hljs-string">"Bob"</span>});
    bimap.<span class="hljs-built_in">insert</span>({<span class="hljs-number">3</span>, <span class="hljs-string">"Charlie"</span>});
    
    <span class="hljs-comment">// å·¦è§†å›¾ï¼škey-&gt;value</span>
    <span class="hljs-keyword">auto</span> left_it = bimap.left.<span class="hljs-built_in">find</span>(<span class="hljs-number">2</span>);
    <span class="hljs-keyword">if</span> (left_it != bimap.left.<span class="hljs-built_in">end</span>()) {
        std::cout &lt;&lt; <span class="hljs-string">"Left lookup: "</span> &lt;&lt; left_it-&gt;second &lt;&lt; std::endl; <span class="hljs-comment">// Bob</span>
    }
    
    <span class="hljs-comment">// å³è§†å›¾ï¼švalue-&gt;key</span>
    <span class="hljs-keyword">auto</span> right_it = bimap.right.<span class="hljs-built_in">find</span>(<span class="hljs-string">"Alice"</span>);
    <span class="hljs-keyword">if</span> (right_it != bimap.right.<span class="hljs-built_in">end</span>()) {
        std::cout &lt;&lt; <span class="hljs-string">"Right lookup: "</span> &lt;&lt; right_it-&gt;second &lt;&lt; std::endl; <span class="hljs-comment">// 1</span>
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>Boost.Bimapçš„ä¼˜ç‚¹ï¼š</p>
<ul>
<li><strong>åŠŸèƒ½å®Œå–„</strong>ï¼šæä¾›äº†ä¸°å¯Œçš„æ¥å£å’Œé…ç½®é€‰é¡¹</li>
<li><strong>ç»è¿‡å……åˆ†æµ‹è¯•</strong>ï¼šå·¥ä¸šçº§è´¨é‡</li>
<li><strong>æ”¯æŒå¤šç§æ˜ å°„ç±»å‹</strong>ï¼šä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šç­‰</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li><strong>ä¾èµ–Booståº“</strong>ï¼šéœ€è¦é¢å¤–å®‰è£…å’Œé…ç½®</li>
<li><strong>ç¼–è¯‘æ—¶é—´å¢åŠ </strong>ï¼šæ¨¡æ¿ä»£ç è¾ƒå¤š</li>
</ul>
<h3 data-id="heading-4">æ–¹æ¡ˆä¸‰ï¼šå•ä¸€å®¹å™¨çš„å·§å¦™ç”¨æ³•</h3>
<p>åœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸‹ï¼Œå¦‚æœkeyå’Œvalueçš„ç±»å‹ç›¸åŒä¸”ä¸ä¼šå†²çªï¼Œå¯ä»¥ä½¿ç”¨å•ä¸€å®¹å™¨ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unordered_map&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SymmetricMap</span> {
<span class="hljs-keyword">private</span>:
    std::unordered_map&lt;std::string, std::string&gt; data;

<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">insert</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; a, <span class="hljs-type">const</span> std::string&amp; b)</span> </span>{
        data[a] = b;
        data[b] = a;
    }
    
    <span class="hljs-function">std::string <span class="hljs-title">get</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; key)</span> </span>{
        <span class="hljs-keyword">auto</span> it = data.<span class="hljs-built_in">find</span>(key);
        <span class="hljs-keyword">return</span> it != data.<span class="hljs-built_in">end</span>() ? it-&gt;second : <span class="hljs-string">""</span>;
    }
    
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">contains</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; key)</span> </span>{
        <span class="hljs-keyword">return</span> data.<span class="hljs-built_in">find</span>(key) != data.<span class="hljs-built_in">end</span>();
    }
};

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹ï¼šåŸŸåä¸IPæ˜ å°„ï¼ˆå‡è®¾ä¸ä¼šå†²çªï¼‰</span>
SymmetricMap domain_ip_map;
domain_ip_map.<span class="hljs-built_in">insert</span>(<span class="hljs-string">"google.com"</span>, <span class="hljs-string">"8.8.8.8"</span>);
domain_ip_map.<span class="hljs-built_in">insert</span>(<span class="hljs-string">"github.com"</span>, <span class="hljs-string">"1.1.1.1"</span>);

std::cout &lt;&lt; domain_ip_map.<span class="hljs-built_in">get</span>(<span class="hljs-string">"google.com"</span>); <span class="hljs-comment">// 8.8.8.8</span>
std::cout &lt;&lt; domain_ip_map.<span class="hljs-built_in">get</span>(<span class="hljs-string">"8.8.8.8"</span>);    <span class="hljs-comment">// google.com</span>
</code></pre>
<p>è¿™ç§æ–¹æ³•åªé€‚ç”¨äºå¾ˆæœ‰é™çš„åœºæ™¯ï¼Œä½¿ç”¨æ—¶éœ€è¦æ ¼å¤–å°å¿ƒã€‚</p>
<h2 data-id="heading-5">æ€§èƒ½è€ƒé‡ï¼šå¦‚ä½•é€‰æ‹©é€‚åˆçš„æ–¹æ¡ˆï¼Ÿ</h2>
<p>åœ¨é€‰æ‹©åŒå‘æ˜ å°„çš„å®ç°æ–¹æ¡ˆæ—¶ï¼Œéœ€è¦è€ƒè™‘ä»¥ä¸‹å› ç´ ï¼š</p>
<ol>
<li>
<p><strong>æ•°æ®è§„æ¨¡</strong></p>
<ul>
<li>å°æ•°æ®é‡ï¼šä»»ä½•æ–¹æ¡ˆéƒ½å¯ä»¥</li>
<li>å¤§æ•°æ®é‡ï¼šä¼˜å…ˆè€ƒè™‘åŒunordered_mapæˆ–Boost.Bimap</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½è¦æ±‚</strong></p>
<ul>
<li>è¦æ±‚O(1)æŸ¥æ‰¾ï¼šé€‰æ‹©åŸºäºå“ˆå¸Œè¡¨çš„å®ç°</li>
<li>å¯ä»¥æ¥å—O(log n)ï¼šä¹Ÿå¯ä»¥è€ƒè™‘åŸºäºstd::mapçš„å®ç°</li>
</ul>
</li>
<li>
<p><strong>å¼€å‘ç¯å¢ƒ</strong></p>
<ul>
<li>å…è®¸ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼šè€ƒè™‘Boost.Bimap</li>
<li>çº¯æ ‡å‡†åº“ç¯å¢ƒï¼šé€‰æ‹©åŒunordered_mapå®ç°</li>
</ul>
</li>
<li>
<p><strong>å†…å­˜é™åˆ¶</strong></p>
<ul>
<li>å†…å­˜å……è¶³ï¼šåŒunordered_map</li>
<li>å†…å­˜ç´§å¼ ï¼šå¯èƒ½éœ€è¦è€ƒè™‘å…¶ä»–ä¼˜åŒ–æ–¹æ¡ˆ</li>
</ul>
</li>
</ol>
<h2 data-id="heading-6">å®é™…åº”ç”¨åœºæ™¯</h2>
<p>åŒå‘æ˜ å°„åœ¨çœŸå®é¡¹ç›®ä¸­æœ‰ç€å¹¿æ³›çš„åº”ç”¨ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åœºæ™¯1ï¼šç”¨æˆ·ç³»ç»Ÿ</span>
BiDirectionalMap&lt;UserID, std::string&gt; user_system;
user_system.<span class="hljs-built_in">insert</span>(<span class="hljs-number">1001</span>, <span class="hljs-string">"alice@email.com"</span>);
user_system.<span class="hljs-built_in">insert</span>(<span class="hljs-number">1002</span>, <span class="hljs-string">"bob@email.com"</span>);

<span class="hljs-comment">// æ—¢å¯ä»¥é€šè¿‡IDæ‰¾é‚®ç®±ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é‚®ç®±æ‰¾ID</span>

<span class="hljs-comment">// åœºæ™¯2ï¼šé…ç½®ç³»ç»Ÿ</span>
BiDirectionalMap&lt;std::string, <span class="hljs-type">int</span>&gt; config_map;
config_map.<span class="hljs-built_in">insert</span>(<span class="hljs-string">"MAX_CONNECTIONS"</span>, <span class="hljs-number">100</span>);
config_map.<span class="hljs-built_in">insert</span>(<span class="hljs-string">"TIMEOUT_MS"</span>, <span class="hljs-number">5000</span>);

<span class="hljs-comment">// åœºæ™¯3ï¼šæšä¸¾å€¼æ˜ å°„</span>
<span class="hljs-keyword">enum class</span> <span class="hljs-title class_">ErrorCode</span> { SUCCESS, NOT_FOUND, PERMISSION_DENIED };
BiDirectionalMap&lt;ErrorCode, std::string&gt; error_messages;
error_messages.<span class="hljs-built_in">insert</span>(ErrorCode::SUCCESS, <span class="hljs-string">"Operation successful"</span>);
error_messages.<span class="hljs-built_in">insert</span>(ErrorCode::NOT_FOUND, <span class="hljs-string">"Resource not found"</span>);
</code></pre>
<h2 data-id="heading-7">æ€»ç»“ä¸å»ºè®®</h2>
<p>å›åˆ°æˆ‘ä»¬æœ€åˆçš„é—®é¢˜ï¼šC++ä¸­æœ‰åŒå‘æ˜ å°„æ•°æ®ç»“æ„å—ï¼Ÿç­”æ¡ˆæ˜¯ï¼šæ ‡å‡†åº“ä¸­æ²¡æœ‰ç›´æ¥æä¾›ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å®ç°ã€‚</p>
<p><strong>ç»™å¼€å‘è€…çš„å»ºè®®ï¼š</strong></p>
<ol>
<li>
<p><strong>å¯¹äºå¤§å¤šæ•°é¡¹ç›®</strong>ï¼Œæ¨èä½¿ç”¨åŒ<code>std::unordered_map</code>çš„å®ç°ï¼Œå®ƒç®€å•ã€é«˜æ•ˆä¸”ä¸ä¾èµ–å¤–éƒ¨åº“ã€‚</p>
</li>
<li>
<p><strong>å¯¹äºå¤æ‚é¡¹ç›®</strong>ï¼Œå¦‚æœå·²ç»åœ¨ä½¿ç”¨Booståº“ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨<code>boost::bimap</code>ã€‚</p>
</li>
<li>
<p><strong>å¯¹äºæ€§èƒ½æ•æ„Ÿçš„åœºæ™¯</strong>ï¼ŒåŠ¡å¿…è¿›è¡ŒåŸºå‡†æµ‹è¯•ï¼Œé€‰æ‹©æœ€é€‚åˆå…·ä½“ç”¨ä¾‹çš„å®ç°ã€‚</p>
</li>
<li>
<p><strong>è®°å¾—å¤„ç†å¼‚å¸¸æƒ…å†µ</strong>ï¼Œç‰¹åˆ«æ˜¯åœ¨æ’å…¥é‡å¤keyæˆ–valueæ—¶çš„å¤„ç†ç­–ç•¥ã€‚</p>
</li>
</ol>
<p>åŒå‘æ˜ å°„è™½ç„¶ä¸åœ¨C++æ ‡å‡†åº“ä¸­ï¼Œä½†é€šè¿‡åˆç†çš„å°è£…å’Œè®¾è®¡ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥æ„å»ºå‡ºé«˜æ•ˆã€æ˜“ç”¨çš„è§£å†³æ–¹æ¡ˆã€‚è¿™æ­£ä½“ç°äº†C++çš„å“²å­¦ï¼šä¸æä¾›ä½ ä¸éœ€è¦çš„ä¸œè¥¿ï¼Œä½†ç»™ä½ æ„å»ºæ‰€éœ€ä¸€åˆ‡çš„å·¥å…·ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸŒ å®æ—¶ååŒ AIGCï¼šå¤šäººåœ¨çº¿ Web åˆ›ä½œçš„æŠ€æœ¯æ¶æ„è®¾è®¡]]></title>    <link>https://juejin.cn/post/7572408522439049251</link>    <guid>https://juejin.cn/post/7572408522439049251</guid>    <pubDate>2025-11-15T11:57:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572408522439049251" data-draft-id="7572408522439032867" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸŒ å®æ—¶ååŒ AIGCï¼šå¤šäººåœ¨çº¿ Web åˆ›ä½œçš„æŠ€æœ¯æ¶æ„è®¾è®¡"/> <meta itemprop="keywords" content="å‰ç«¯,Trae,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-15T11:57:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸŒ å®æ—¶ååŒ AIGCï¼šå¤šäººåœ¨çº¿ Web åˆ›ä½œçš„æŠ€æœ¯æ¶æ„è®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T11:57:51.000Z" title="Sat Nov 15 2025 11:57:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§  ä¸€ã€å‰è¨€ï¼šä»å•æœºAIåˆ°ç¾¤ä½“åˆ›ä½œçš„æ¼”åŒ–</h2>
<p>ä¸€ä¸ªäººå¯¹ç€AIç”»å›¾ã€ç”Ÿæˆæ–‡æ¡ˆï¼Œåƒç‹¬è‡ªè°ˆæ‹çˆ±ã€‚<br/>
è€Œå½“ä½ å’Œ5ä¸ªä¼™ä¼´ä¸€èµ·å®æ—¶æ”¹æç¤ºè¯ã€AIåŒæ­¥ç»˜ç”»æ—¶ï¼Œé‚£å°±æ˜¯<strong>å¤šçº¿ç¨‹çš„çˆ±æƒ…æ•…äº‹</strong>ã€‚</p>
<p>å®æ—¶ååŒ AIGCï¼ˆAI Generated Contentï¼‰æ­£å¤„åœ¨ç§‘å­¦ä¸è‰ºæœ¯çš„äº¤æ±‡ç‚¹ï¼š<br/>
å®ƒè¦ä¿è¯<strong>åŒæ­¥æ€§</strong>ã€<strong>ä¸€è‡´æ€§</strong>ã€<strong>ä½å»¶è¿Ÿæ„Ÿ</strong>ï¼ŒåŒæ—¶è®©AIåƒâ€œè‰ºæœ¯åŠ©ç†â€ï¼Œåœ¨å¤šç”¨æˆ·åŒæ—¶æ“ä½œä¸‹ä¿æŒé€»è¾‘ä¼˜é›…ï¼Œè€Œéç²¾ç¥åˆ†è£‚ã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ§© äºŒã€ä¼ ç»ŸAIGCåä½œçš„é—®é¢˜ï¼šAI æ€»æ…¢åŠæ‹</h2>
<p>åœ¨ç»å…¸ AIGC åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¸¸è§çš„äº¤äº’æ¨¡å¼æ˜¯ï¼š</p>
<ol>
<li>ç”¨æˆ·æäº¤æç¤ºè¯ï¼›</li>
<li>æœåŠ¡ç«¯æ‰§è¡Œæ¨ç†ï¼›</li>
<li>æ¨¡å‹ç”Ÿæˆç»“æœï¼›</li>
<li>å®¢æˆ·ç«¯æ¸²æŸ“è¾“å‡ºã€‚</li>
</ol>
<p>å¬ä¸Šå»æµç¨‹æ¸…æ™°ï¼Œä½†â€œä¸€è‡´æ€§â€å´æ˜¯è‡´å‘½ä¼¤ï¼š</p>
<ul>
<li>A æ”¹äº†æç¤ºè¯ï¼ŒB è¿˜åœ¨åŸºäºæ—§ç‰ˆæœ¬ç”Ÿæˆã€‚</li>
<li>èŠå¤©åä½œåŒºå»¶è¿ŸåŒæ­¥ï¼ŒAIå¿½ç„¶è¾“å‡ºâ€œä¸¤ç§é£æ ¼æ··åˆâ€çš„å°´å°¬ä½œå“ã€‚</li>
<li>æ–‡ä»¶ç‰ˆæœ¬å†²çªï¼Œè®©AIä¸çŸ¥å¬è°çš„å‘½ä»¤ã€‚</li>
</ul>
<p>è¿™æ—¶å€™æˆ‘ä»¬éœ€è¦çš„ä¸æ˜¯æ›´å¿«çš„æ˜¾å¡ï¼Œè€Œæ˜¯<strong>æ›´èªæ˜çš„æ¶æ„</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-2">ğŸ•¸ ä¸‰ã€åº•å±‚åŸç†ï¼šè®© AI ä¸äººç±»å…±äº«â€œçŠ¶æ€å®‡å®™â€</h2>
<p>è¦è®© AIGC å®æ—¶ååŒï¼Œç³»ç»Ÿå¿…é¡»å…·å¤‡ä¸€ç§èƒ½åŠ›ï¼š</p>
<blockquote>
<p><strong>æ¯ä¸ªç”¨æˆ·ä¸AIçœ‹åˆ°çš„ä¸–ç•Œï¼Œå¿…é¡»åŒæºã€åŒæ€ã€å¯å†²çªæ¢å¤ã€‚</strong></p>
</blockquote>
<p>è¿™èƒŒåçš„æ ¸å¿ƒæ€æƒ³æ˜¯<strong>CRDTs</strong>ï¼ˆConflict-free Replicated Data Typesï¼‰æˆ–<strong>Operational Transformation (OT)</strong> ã€‚</p>
<p>é€šä¿—ç‚¹è®²ï¼Œå®ƒåƒæ˜¯ä¸€ä¸ªâ€œçŠ¶æ€å¤šå…ƒå®‡å®™â€ï¼š<br/>
æ¯ä¸ªç”¨æˆ·éƒ½èƒ½è‡ªç”±ä¿®æ”¹è‡ªå·±çš„â€œå±€éƒ¨çŠ¶æ€â€ï¼Œç³»ç»Ÿä¼šåœ¨åå°<strong>åˆå¹¶æ—¶é—´çº¿</strong>ï¼Œç¡®ä¿æœ€ç»ˆçš„ç°å®ä¸å´©æºƒã€‚</p>
<hr/>
<h2 data-id="heading-3">âš™ï¸ å››ã€æ€»ä½“æ¶æ„è®¾è®¡â€”â€”è®©AIå‚ä¸ç¼–èˆ</h2>
<p>ä¼ ç»Ÿåä½œæ–‡æ¡£æ¶æ„ä¸€èˆ¬æ˜¯ç”¨æˆ·é—´ä¿¡æ¯åŒæ­¥ï¼Œ<br/>
è€Œåœ¨<strong>ååŒAIGC</strong>ä¸­ï¼ŒAIæœ¬èº«ä¹Ÿæˆä¸ºä¸€ä¸ªâ€œè™šæ‹Ÿå‚ä¸è€…â€ï¼Œå…±äº«åä½œç©ºé—´ä¸­çš„çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[ Client User A ]</span> â†”
                     \
                      <span class="hljs-selector-attr">[ Realtime Sync Layer ]</span> â†” <span class="hljs-selector-attr">[ AI Co-Generator Engine ]</span>
                     /
<span class="hljs-selector-attr">[ Client User B ]</span> â†”
</code></pre>
<h3 data-id="heading-4">å…³é”®æ¨¡å—è§£æï¼š</h3>
<ol>
<li>
<p><strong>å‰ç«¯å®æ—¶æ„ŸçŸ¥å±‚ï¼ˆWebRTC / WebSocketï¼‰</strong></p>
<ul>
<li>ä¿è¯æ¯«ç§’çº§çŠ¶æ€åŒæ­¥ï¼›</li>
<li>ä½¿ç”¨å·®é‡çŠ¶æ€ï¼ˆdelta stateï¼‰ä¼ è¾“ä»¥å‡å°‘å¸¦å®½ï¼›</li>
</ul>
</li>
<li>
<p><strong>åä½œçŠ¶æ€å¼•æ“ï¼ˆCRDT / OTï¼‰</strong></p>
<ul>
<li>ç®¡ç†æ‰€æœ‰ç”¨æˆ·çš„æ“ä½œæ„å›¾ï¼›</li>
<li>è‡ªåŠ¨å¤„ç†å†²çªã€æ—¶åºã€ç‰ˆæœ¬ï¼›</li>
</ul>
</li>
<li>
<p><strong>AI Co-Generator Engineï¼ˆå…±åˆ›å¼•æ“ï¼‰</strong></p>
<ul>
<li>ç›‘å¬å…¨å±€çŠ¶æ€å˜åŒ–ï¼›</li>
<li>ç»“åˆä¸Šä¸‹æ–‡ã€ä¿®æ”¹å†å²ã€ç”¨æˆ·æƒé‡ä½œè¯­ä¹‰èåˆç”Ÿæˆï¼›</li>
</ul>
</li>
<li>
<p><strong>æ¸²æŸ“ä¸åé¦ˆæ¨¡å—</strong></p>
<ul>
<li>è¿”å›AIç”Ÿæˆçš„ä¸­é—´ç‰‡æ®µï¼Œå®ç°å®æ—¶å¯è§†åŒ–åé¦ˆï¼›</li>
<li>è®©AIGCä»¿ä½›åœ¨å’Œæ¯ä½ç”¨æˆ·â€œå¯¹è¯ä½œç”»â€ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-5">ğŸ”§ äº”ã€æ ¸å¿ƒé€»è¾‘ç¤ºä¾‹ (JavaScript)</h2>
<p>ä¸‹é¢ä»¥ç²¾ç®€ç‰ˆä¼ªä»£ç å±•ç¤º <strong>å¤šç”¨æˆ·å®æ—¶å…±åˆ›AIGC</strong> çš„çŠ¶æ€é€šä¿¡ä¸åŒæ­¥ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// ğŸŒ Realtime Collaborative AIGC Prototype

const <span class="hljs-attr">users</span> = new Map()<span class="hljs-comment">;</span>
const <span class="hljs-attr">sharedState</span> = { prompt: <span class="hljs-string">""</span>, version: <span class="hljs-number">0</span> }<span class="hljs-comment">;</span>
const <span class="hljs-attr">WebSocketServer</span> = require(<span class="hljs-string">"ws"</span>).Server<span class="hljs-comment">;</span>

const <span class="hljs-attr">wss</span> = new WebSocketServer({ port: <span class="hljs-number">8080</span> })<span class="hljs-comment">;</span>

// æ¨¡æ‹Ÿ AI æ¨¡å—ï¼ˆå‡è£…èªæ˜ï¼‰
function generateAIResponse(prompt) {
  const <span class="hljs-attr">responses</span> = [
    <span class="hljs-string">"AIæ„æ€æ–°çš„è§†è§‰æ„å›¾..."</span>,
    <span class="hljs-string">"æ¨¡å‹æ­£åœ¨èåˆè‰ºæœ¯å®¶Aä¸Bçš„æç¤º..."</span>,
    <span class="hljs-string">"ğŸ¨ AIè¯´ï¼šè¿™ä¸€æ¬¡æˆ‘ä»¬ç”»å‡ºçµæ„Ÿçš„æ³¢åŠ¨ã€‚"</span>
  ]<span class="hljs-comment">;</span>
  return responses<span class="hljs-section">[Math.floor(Math.random() * responses.length)]</span><span class="hljs-comment">;</span>
}

// å¹¿æ’­å‡½æ•°
function broadcast(state) {
  for (const user of users.values()) {
    user.send(JSON.stringify(state))<span class="hljs-comment">;</span>
  }
}

wss.on("connection", function connection(ws) {
  const <span class="hljs-attr">id</span> = Date.now()<span class="hljs-comment">;</span>
  users.set(id, ws)<span class="hljs-comment">;</span>

  ws.on("message", (msg) =&gt; {
    const <span class="hljs-attr">data</span> = JSON.parse(msg)<span class="hljs-comment">;</span>
    <span class="hljs-attr">sharedState.prompt</span> = data.prompt<span class="hljs-comment">;</span>
    sharedState.version++<span class="hljs-comment">;</span>

    // è°ƒç”¨AIç”Ÿæˆé€»è¾‘
    const <span class="hljs-attr">aiReply</span> = generateAIResponse(sharedState.prompt)<span class="hljs-comment">;</span>
    <span class="hljs-attr">sharedState.aiResponse</span> = aiReply<span class="hljs-comment">;</span>

    broadcast(sharedState)<span class="hljs-comment">;</span>
  })<span class="hljs-comment">;</span>

  ws.on("close", () =&gt; users.delete(id))<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<p>ğŸ’¡ ä¸Šè¿°æ¶æ„æ¨¡æ‹Ÿäº†ä¸€ä¸ªéå¸¸åŸå§‹çš„â€œååŒAIç”Ÿæˆç³»ç»Ÿâ€ï¼š</p>
<ul>
<li>æ‰€æœ‰äººå…±äº«ä¸€ä¸ªæç¤ºè¯çŠ¶æ€ï¼›</li>
<li>å®æ—¶å¹¿æ’­AIçš„å“åº”ï¼›</li>
<li>æ‰€æœ‰å®¢æˆ·ç«¯éƒ½ä¿æŒåŒæ­¥â€œåˆ›é€ å®‡å®™â€ã€‚</li>
</ul>
<p>çœŸå®æƒ…å†µä¸­ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ Redis + CRDT + Vector Clock ç­‰æœºåˆ¶åšæ›´ç¨³å¥çš„ç‰ˆæœ¬åˆå¹¶ã€‚</p>
<hr/>
<h2 data-id="heading-6">ğŸ’¬ å…­ã€ä¸€è‡´æ€§ â‰  åŒæ­¥ï¼Œè€Œæ˜¯â€œæ—¶é—´çš„ç¼–æ’â€</h2>
<p>å¾ˆå¤šå·¥ç¨‹å¸ˆè¯¯ä»¥ä¸º<strong>åŒæ­¥</strong>å°±ä»£è¡¨ä¸€è‡´æ€§ï¼Œ<br/>
ä½†åœ¨å®æ—¶AIGCä¸­ï¼Œä¸€è‡´æ€§æ›´åƒæ˜¯ä¸€ç§<strong>è¯­ä¹‰å…±è¯†</strong>ï¼š</p>
<ul>
<li>ç”¨æˆ·Aè¾“å…¥â€œæ·»åŠ è“è‰²ç¯å…‰â€ï¼›</li>
<li>ç”¨æˆ·Båœ¨åŒä¸€æ—¶åˆ»ä¿®æ”¹â€œèƒŒæ™¯ä¸ºå¤œç©ºâ€ï¼›</li>
<li>AIå¿…é¡»æ˜ç™½ä¸¤ä¸ªæ„å›¾ä¸æ˜¯å†²çªï¼Œè€Œæ˜¯<strong>åŒåœºè¡¨æ¼”</strong>ã€‚</li>
</ul>
<p>æ‰€ä»¥æœªæ¥çš„AIGCç³»ç»Ÿï¼Œä¸ä»…éœ€è¦è¯†åˆ«æç¤ºæ–‡æœ¬ï¼Œè¿˜è¦ç†è§£<strong>å¤šäººè¯­æ„ä¸»å¼ ä¹‹é—´çš„å’Œè°å†²çªå…³ç³»</strong>ã€‚</p>
<p>å¯ä»¥è¯´ï¼ŒAIä¸ä»…ç”Ÿæˆå›¾åƒï¼Œä¹Ÿè¦æ‡‚å¾—â€œç¤¾ä¼šååŒè¯­è¨€å­¦â€ã€‚</p>
<hr/>
<h2 data-id="heading-7">ğŸ”® ä¸ƒã€å“²å­¦å°¾å£°ï¼šAIï¼Œä¸åªæ˜¯ç”»å®¶ï¼Œæ›´æ˜¯åˆä½œè€…</h2>
<p>å½“å¤šäººåŒæ—¶åœ¨Webé¡µé¢ä¸Šä¸AIå…±åŒåˆ›ä½œæ—¶ï¼Œ<br/>
æˆ‘ä»¬å…¶å®åœ¨æ„å»ºä¸€ç§<strong>æ–°çš„é›†ä½“æ™ºèƒ½ç»“æ„</strong>ï¼š</p>
<blockquote>
<p>ç”¨æˆ·è´¡çŒ®ä¸Šä¸‹æ–‡ï¼ŒAIè´¡çŒ®æ¨¡å¼ï¼›<br/>
ç³»ç»Ÿä¸€è‡´æ¨¡å‹ç»´æŒçŠ¶æ€ï¼›<br/>
åˆ›é€ åŠ›ä¸å†æ˜¯ä¸ªä½“çš„ï¼Œè€Œæ˜¯å…±äº«çš„èµ„æºåœºã€‚</p>
</blockquote>
<p>æˆ–è®¸æœªæ¥çš„â€œç”»å¸ƒâ€ä¸æ˜¯Canvasï¼Œè€Œæ˜¯ä¸€ä¸ªæœ‰ç”Ÿå‘½çš„ã€å¯äº¤äº’çš„AIç½‘ç»œç”Ÿå‘½ä½“ã€‚<br/>
æ¯ä¸€æ¬¡æ–‡å­—è¾“å…¥ã€æ¯ä¸€ç¬”ç¬”è§¦ï¼Œä¸åªæ˜¯æ•°æ®ï¼Œè€Œæ˜¯ä¸€æ¬¡åœ¨<strong>äººæœºå…±æŒ¯</strong>ä¸‹çš„ååŒè¯—ç¯‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ”¥ â€œSolo Codingâ€çš„è¿‘æœŸçƒ­åº¦è§£æï¼ˆæˆªè‡³ 2025 å¹´æœ«ï¼‰]]></title>    <link>https://juejin.cn/post/7572453554331795456</link>    <guid>https://juejin.cn/post/7572453554331795456</guid>    <pubDate>2025-11-15T11:56:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572453554331795456" data-draft-id="7572454929144758307" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ”¥ â€œSolo Codingâ€çš„è¿‘æœŸçƒ­åº¦è§£æï¼ˆæˆªè‡³ 2025 å¹´æœ«ï¼‰"/> <meta itemprop="keywords" content="Trae,äººå·¥æ™ºèƒ½,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-15T11:56:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ”¥ â€œSolo Codingâ€çš„è¿‘æœŸçƒ­åº¦è§£æï¼ˆæˆªè‡³ 2025 å¹´æœ«ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T11:56:31.000Z" title="Sat Nov 15 2025 11:56:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ğŸ§  ä¸€ã€æ¦‚å¿µå›é¡¾</h3>
<p><strong>Solo Coding</strong> å¹¶ä¸æ˜¯æ–°è¯ï¼Œä½†åœ¨è¿‡å»ä¸€å¹´éšç€ <strong>AIGC ç¼–ç¨‹è¾…åŠ©å·¥å…·ï¼ˆå¦‚ Copilotã€Cursorã€TabNineã€ChatGPT Code Interpreterï¼‰</strong> çš„æ™®åŠï¼Œå®ƒè¢«é‡æ–°å®šä¹‰ä¸ºï¼š</p>
<blockquote>
<p><strong>ä¸€ä¸ªäººç‹¬ç«‹å¼€å‘å®Œæ•´ç³»ç»Ÿï¼Œä½†å…·å¤‡å›¢é˜Ÿçº§æ•ˆç‡ã€‚</strong></p>
</blockquote>
<p>è¿™ä¸ä¼ ç»Ÿæ„ä¹‰çš„â€œç‹¬ç«‹å¼€å‘è€…ï¼ˆIndie Developerï¼‰â€ä¸åŒï¼Œæ ¸å¿ƒåœ¨äºå€ŸåŠ© AI çš„åˆä½œåŠ›é‡ï¼Œå®ç°å‡†å›¢é˜Ÿå¼çš„ä¸ªäººç”Ÿäº§åŠ›çˆ†å‘ã€‚</p>
<hr/>
<h3 data-id="heading-1">ğŸ“ˆ äºŒã€çƒ­åº¦å¢é•¿è¶‹åŠ¿</h3>

























<table><thead><tr><th>æ—¶é—´åŒºé—´</th><th>å…³é”®è¯è¶‹åŠ¿å˜åŒ–</th><th>ä¸»è¦é©±åŠ¨å› ç´ </th></tr></thead><tbody><tr><td>2024 Q4</td><td>ç¨³å®šä¸Šå‡</td><td>AIç¼–ç¨‹åŠ©æ‰‹æ™®åŠã€åˆ›ä¸šæ½®æ¶ŒåŠ¨</td></tr><tr><td>2025 Q1</td><td>æ˜æ˜¾å¢é•¿</td><td>GitHub &amp; HuggingFace æ¨å‡ºâ€œAIåä½œå·¥ä½œæµâ€</td></tr><tr><td>2025 Q3â€”Q4</td><td>é«˜çƒ­ç¨³å®šé˜¶æ®µ</td><td>ä¸ªäººAIå¼€å‘è€…ç”Ÿæ€ï¼ˆAI Indie Devï¼‰å½¢æˆåœˆå±‚</td></tr></tbody></table>
<p>ç›®å‰åœ¨å¼€å‘è€…ç¤¾åŒºï¼ˆRedditã€æ¨ç‰¹ã€Bç«™ã€çŸ¥ä¹ã€HackerNewsï¼‰ä¸­ï¼Œâ€œsolo codingâ€å¸¸ä¸ä»¥ä¸‹è¯ç›¸å…³è”ï¼š</p>
<ul>
<li>AIGC + DevOps</li>
<li>AI pair programmer</li>
<li>One-man startup</li>
<li>AutoDeploy AI</li>
<li>Web full-stack with GPT</li>
</ul>
<hr/>
<h3 data-id="heading-2">ğŸ’¡ ä¸‰ã€ä¸ºä»€ä¹ˆå®ƒè¿™ä¹ˆç«ï¼Ÿ</h3>
<ol>
<li><strong>AIå·¥å…·é—¨æ§›ä¸‹é™</strong> â€”â€” æ— éœ€åºå¤§å›¢é˜Ÿï¼Œä¹Ÿèƒ½å®Œæˆç«¯åˆ°ç«¯åº”ç”¨ã€‚</li>
<li><strong>äº‘ç«¯èµ„æºæŒ‰éœ€è®¡è´¹</strong> â€”â€” å¼¹æ€§æœåŠ¡å™¨ã€æ— æœåŠ¡å™¨æ¶æ„ï¼ˆServerlessï¼‰è®©ä¸ªäººéƒ¨ç½²å˜å¾—å®¹æ˜“ã€‚</li>
<li><strong>ç¤¾ä¼šå¿ƒç†è½¬å‘</strong> â€”â€” è¶Šæ¥è¶Šå¤šå¼€å‘è€…è¿½æ±‚â€œä¸ªäººåˆ›é€ è‡ªç”±åº¦â€ï¼ŒAIè®©å•äººé¡¹ç›®å…·å¤‡â€œå›¢é˜Ÿçµé­‚â€ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-3">ğŸ§© å››ã€ç°å®ä¸­çš„ Solo Coding å…¸å‹åœºæ™¯</h3>
<ul>
<li>ä½¿ç”¨ ChatGPT/Cursor + VSCode ç‹¬ç«‹æ­å»º SaaS é¡¹ç›®</li>
<li>ä¸€äººå¼€å‘ + AI è‡ªåŠ¨åŒ–ç”Ÿæˆ UIã€APIã€æ–‡æ¡£</li>
<li>åœ¨äº‘å¹³å°ä¸Š3åˆ†é’Ÿç”Ÿæˆéƒ¨ç½²ç¯å¢ƒï¼ˆAI + IaCï¼‰</li>
<li>AIç”Ÿæˆæµ‹è¯•ã€æç¤ºè¯é©±åŠ¨ä»£ç ã€è‡ªåŠ¨CI/CD</li>
</ul>
<hr/>
<h3 data-id="heading-4">ğŸš€ äº”ã€æœªæ¥è¶‹åŠ¿å±•æœ›</h3>
<blockquote>
<p><strong>Solo Coding â†’ AI-Orchestrated Development</strong></p>
</blockquote>
<p>æœªæ¥ä¸‰å¹´ï¼Œâ€œsolo codingâ€ ä¼šæ¼”å˜ä¸ºä¸€ç§â€œAIç¼–æ’å¼å¼€å‘â€ï¼š</p>
<ul>
<li>å•äººè´Ÿè´£æ¶æ„ä¸é€»è¾‘æ€ç»´</li>
<li>AIè´Ÿè´£ç¼–ç ã€éƒ¨ç½²ä¸è¿ç»´</li>
<li>å›¢é˜Ÿé¡¹ç›®æ¼”å˜ä¸ºâ€œå¤šæ™ºèƒ½ä½“ååŒç³»ç»Ÿâ€</li>
</ul>
<p>å¯ä»¥å°†å®ƒè§†ä¸ºå¼€å‘ç•Œçš„â€œé‡å­æ€åˆ›ä¸šâ€â€”â€”<br/>
ä½ ä¸€ä¸ªäººï¼Œå´åƒä¸€ä¸ªå¤šè¿›ç¨‹è¿è¡Œçš„å›¢é˜Ÿã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ç©¿è¶ŠEffective C++ã€‘æ¡æ¬¾19ï¼šè®¾è®¡classçŠ¹å¦‚è®¾è®¡typeâ€”â€”ç”¨æˆ·å®šä¹‰ç±»å‹çš„è‰ºæœ¯ä¸ç§‘å­¦]]></title>    <link>https://juejin.cn/post/7572137760448200745</link>    <guid>https://juejin.cn/post/7572137760448200745</guid>    <pubDate>2025-11-14T08:41:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572137760448200745" data-draft-id="7572039006530650148" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ç©¿è¶ŠEffective C++ã€‘æ¡æ¬¾19ï¼šè®¾è®¡classçŠ¹å¦‚è®¾è®¡typeâ€”â€”ç”¨æˆ·å®šä¹‰ç±»å‹çš„è‰ºæœ¯ä¸ç§‘å­¦"/> <meta itemprop="keywords" content="C++,é¢è¯•"/> <meta itemprop="datePublished" content="2025-11-14T08:41:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ²æ€¡æ—¸"/> <meta itemprop="url" content="https://juejin.cn/user/2875978146656750"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ç©¿è¶ŠEffective C++ã€‘æ¡æ¬¾19ï¼šè®¾è®¡classçŠ¹å¦‚è®¾è®¡typeâ€”â€”ç”¨æˆ·å®šä¹‰ç±»å‹çš„è‰ºæœ¯ä¸ç§‘å­¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978146656750/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ²æ€¡æ—¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T08:41:11.000Z" title="Fri Nov 14 2025 08:41:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™ä¸ªæ¡æ¬¾æ­ç¤ºäº†C++é¢å‘å¯¹è±¡è®¾è®¡çš„æ ¸å¿ƒç†å¿µï¼šå®šä¹‰æ–°classå°±æ˜¯å®šä¹‰æ–°typeã€‚ä¼˜ç§€çš„classè®¾è®¡åº”è¯¥è®©ç”¨æˆ·å®šä¹‰ç±»å‹ä¸å†…ç½®ç±»å‹æ— ç¼åä½œï¼Œè¿™è¦æ±‚æˆ‘ä»¬åœ¨è®¾è®¡æ—¶è€ƒè™‘ç±»å‹ç³»ç»Ÿçš„å®Œæ•´æ€§ã€ä¸€è‡´æ€§å’Œç›´è§‚æ€§ã€‚</p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3192f88c8a34169975da1a2c32874e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKQ5oCh5pe4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763714471&amp;x-signature=I7wIk%2F3NvpACB342B5FOZzZ78hQ%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-0"><strong>æ€ç»´å¯¼å›¾ï¼šclassè®¾è®¡çš„å®Œæ•´ä½“ç³»</strong></h3>
<hr/>
<h3 data-id="heading-1"><strong>å…³é”®æ´è§ä¸è¡ŒåŠ¨æŒ‡å—</strong></h3>
<h4 data-id="heading-2"><strong>å¿…é¡»éµå®ˆçš„æ ¸å¿ƒåŸåˆ™ï¼š</strong></h4>
<ol>
<li><strong>ç±»å‹å®Œæ•´æ€§</strong>ï¼šç”¨æˆ·å®šä¹‰ç±»å‹åº”è¯¥æä¾›å®Œæ•´çš„è¡Œä¸ºè¯­ä¹‰ï¼Œä¸å†…ç½®ç±»å‹æ— ç¼åä½œ</li>
<li><strong>èµ„æºå®‰å…¨</strong>ï¼šéµå¾ªRAIIåŸåˆ™ï¼Œç¡®ä¿èµ„æºçš„æ­£ç¡®è·å–å’Œé‡Šæ”¾</li>
<li><strong>æ¥å£ä¸€è‡´æ€§</strong>ï¼šæä¾›ç›´è§‚ã€ä¸€è‡´çš„æ¥å£ï¼Œç¬¦åˆç”¨æˆ·çš„å¿ƒç†é¢„æœŸ</li>
<li><strong>å¼‚å¸¸å®‰å…¨</strong>ï¼šæ˜ç¡®æ ‡æ³¨å¹¶ä¿è¯ä¸åŒçº§åˆ«çš„å¼‚å¸¸å®‰å…¨æ€§</li>
</ol>
<h4 data-id="heading-3"><strong>ç°ä»£C++å¼€å‘å»ºè®®ï¼š</strong></h4>
<ol>
<li><strong>ä¸‰äº”æ³•åˆ™åº”ç”¨</strong>ï¼šæ ¹æ®éœ€è¦å®šä¹‰æ‹·è´æ§åˆ¶æˆå‘˜ï¼Œæˆ–ä½¿ç”¨=default/=delete</li>
<li><strong>ç§»åŠ¨è¯­ä¹‰æ”¯æŒ</strong>ï¼šä¸ºèµ„æºç®¡ç†ç±»æä¾›ç§»åŠ¨æ“ä½œä»¥è·å¾—æ€§èƒ½ä¼˜åŠ¿</li>
<li><strong>noexceptæ­£ç¡®ä½¿ç”¨</strong>ï¼šå¯¹ä¸æŠ›å¼‚å¸¸çš„æ“ä½œæ­£ç¡®æ ‡è®°noexcept</li>
<li><strong>constexpræ”¯æŒ</strong>ï¼šä¸ºå¯åœ¨ç¼–è¯‘æœŸè®¡ç®—çš„æ“ä½œæä¾›constexpr</li>
</ol>
<h4 data-id="heading-4"><strong>è®¾è®¡åŸåˆ™æ€»ç»“ï¼š</strong></h4>
<ol>
<li><strong>æœ€å°å®Œæ•´åŸåˆ™</strong>ï¼šæä¾›æœ€å°ä½†å®Œæ•´çš„æ¥å£é›†åˆ</li>
<li><strong>è¯­ä¹‰æ˜ç¡®åŸåˆ™</strong>ï¼šæ¯ä¸ªæ“ä½œéƒ½æœ‰æ˜ç¡®ã€ä¸€è‡´çš„è¯­ä¹‰</li>
<li><strong>èµ„æºè‡ªæ²»åŸåˆ™</strong>ï¼šç±»å‹è´Ÿè´£ç®¡ç†è‡ªå·±çš„èµ„æº</li>
<li><strong>æ‰©å±•å¼€æ”¾åŸåˆ™</strong>ï¼šè®¾è®¡å…è®¸åˆç†çš„æ‰©å±•è€Œä¸ç ´åç°æœ‰ä»£ç </li>
</ol>
<h4 data-id="heading-5"><strong>éœ€è¦è­¦æƒ•çš„é™·é˜±ï¼š</strong></h4>
<ol>
<li><strong>éšå¼è½¬æ¢é™·é˜±</strong>ï¼šå•å‚æ•°æ„é€ å‡½æ•°å’Œè½¬æ¢è¿ç®—ç¬¦çš„è¯¯ç”¨</li>
<li><strong>åˆ‡ç‰‡é—®é¢˜</strong>ï¼šå€¼è¯­ä¹‰ä¸‹çš„å¯¹è±¡åˆ‡ç‰‡</li>
<li><strong>å¼‚å¸¸å®‰å…¨æ¼æ´</strong>ï¼šèµ„æºæ³„æ¼å’Œä¸ä¸€è‡´çŠ¶æ€</li>
<li><strong>çº¿ç¨‹å®‰å…¨æ··æ·†</strong>ï¼šé”™è¯¯çš„çº¿ç¨‹å®‰å…¨å‡è®¾</li>
</ol>
<p><strong>æœ€ç»ˆå»ºè®®ï¼š</strong> å°†æ¯ä¸ªclassè®¾è®¡è§†ä¸ºè¯­è¨€æ‰©å±•çš„æœºä¼šã€‚åŸ¹å…»"è¯­è¨€è®¾è®¡è€…æ€ç»´"â€”â€”åœ¨è®¾è®¡æ¯ä¸ªclassæ—¶éƒ½æ€è€ƒï¼š"è¿™ä¸ªç±»å‹åº”è¯¥æ€æ ·èå…¥C++ç±»å‹ç³»ç»Ÿï¼Ÿå®ƒçš„è¡Œä¸ºåº”è¯¥åƒå†…ç½®ç±»å‹å—ï¼Ÿç”¨æˆ·ä¼šæ€æ ·ä½¿ç”¨å®ƒï¼Ÿ" è¿™ç§æ€ç»´æ–¹å¼æ˜¯æ„å»ºä¼˜ç§€C++ä»£ç åº“çš„å…³é”®ã€‚</p>
<p>è®°ä½ï¼š<strong>åœ¨C++ä¸­ï¼Œè®¾è®¡classå°±æ˜¯è®¾è®¡typeã€‚ä¼˜ç§€çš„ç”¨æˆ·å®šä¹‰ç±»å‹åº”è¯¥è®©ä½¿ç”¨è€…å¿˜è®°å®ƒæ˜¯ç”¨æˆ·å®šä¹‰çš„ã€‚</strong> æ¡æ¬¾19æ•™ä¼šæˆ‘ä»¬çš„ä¸ä»…æ˜¯ä¸€ç»„æŠ€æœ¯è§„åˆ™ï¼Œæ›´æ˜¯é¢å‘å¯¹è±¡è®¾è®¡å“²å­¦åœ¨C++ä¸­çš„å…·ä½“ä½“ç°ã€‚</p>
<hr/>
<h3 data-id="heading-6"><strong>æ·±å…¥è§£æï¼šclassè®¾è®¡çš„æ ¸å¿ƒæŒ‘æˆ˜</strong></h3>
<h4 data-id="heading-7"><strong>1. é—®é¢˜æ ¹æºï¼šç±»å‹è¯­ä¹‰çš„å®Œæ•´æ€§</strong></h4>
<p><strong>å…¸å‹çš„ä¸å®Œæ•´ç±»å‹è®¾è®¡ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ç³Ÿç³•çš„å­—ç¬¦ä¸²ç±»å‹è®¾è®¡ - è¯­ä¹‰ä¸å®Œæ•´</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BadString</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">BadString</span>(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* str) {
        <span class="hljs-keyword">if</span> (str) {
            data_ = <span class="hljs-keyword">new</span> <span class="hljs-type">char</span>[<span class="hljs-built_in">strlen</span>(str) + <span class="hljs-number">1</span>];
            <span class="hljs-built_in">strcpy</span>(data_, str);
        }
    }
    
    ~<span class="hljs-built_in">BadString</span>() {
        <span class="hljs-keyword">delete</span>[] data_;
    }
    
    <span class="hljs-comment">// ç¼ºå°‘æ‹·è´æ„é€ å‡½æ•°ï¼</span>
    <span class="hljs-comment">// ç¼ºå°‘æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ï¼</span>
    <span class="hljs-comment">// ç¼ºå°‘ç§»åŠ¨æ“ä½œï¼</span>
    
    <span class="hljs-function"><span class="hljs-type">const</span> <span class="hljs-type">char</span>* <span class="hljs-title">c_str</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> data_; }
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">char</span>* data_ = <span class="hljs-literal">nullptr</span>;
};

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">demonstrate_incomplete_type</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">BadString <span class="hljs-title">s1</span><span class="hljs-params">(<span class="hljs-string">"hello"</span>)</span></span>;
    
    <span class="hljs-comment">// ç¾éš¾ï¼é»˜è®¤æ‹·è´æ˜¯æµ…æ‹·è´</span>
    <span class="hljs-comment">// BadString s2 = s1;  // åŒé‡åˆ é™¤ï¼</span>
    
    <span class="hljs-comment">// åŒæ ·çš„é—®é¢˜ï¼</span>
    <span class="hljs-comment">// BadString s3("world");</span>
    <span class="hljs-comment">// s3 = s1;  // å†…å­˜æ³„æ¼ + åŒé‡åˆ é™¤ï¼</span>
    
    <span class="hljs-comment">// æ— æ³•é«˜æ•ˆè¿”å›ï¼</span>
    <span class="hljs-comment">// auto createString() -&gt; BadString {</span>
    <span class="hljs-comment">//     BadString local("local");</span>
    <span class="hljs-comment">//     return local;  // æ˜‚è´µçš„æ‹·è´ï¼</span>
    <span class="hljs-comment">// }</span>
}
</code></pre>
<p><strong>èµ„æºç®¡ç†çš„ä¸å®Œæ•´è®¾è®¡ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// èµ„æºç®¡ç†ä¸å®Œæ•´çš„æ–‡ä»¶ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BadFile</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">BadFile</span>(<span class="hljs-type">const</span> std::string&amp; filename) 
        : <span class="hljs-built_in">handle_</span>(<span class="hljs-built_in">fopen</span>(filename.<span class="hljs-built_in">c_str</span>(), <span class="hljs-string">"r"</span>)) {
        <span class="hljs-keyword">if</span> (!handle_) {
            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">runtime_error</span>(<span class="hljs-string">"æ— æ³•æ‰“å¼€æ–‡ä»¶"</span>);
        }
    }
    
    ~<span class="hljs-built_in">BadFile</span>() {
        <span class="hljs-keyword">if</span> (handle_) {
            <span class="hljs-built_in">fclose</span>(handle_);
        }
    }
    
    <span class="hljs-comment">// è¯»å–æ–‡ä»¶å†…å®¹</span>
    <span class="hljs-function">std::string <span class="hljs-title">read</span><span class="hljs-params">(<span class="hljs-type">size_t</span> size)</span> </span>{
        <span class="hljs-function">std::string <span class="hljs-title">result</span><span class="hljs-params">(size, <span class="hljs-string">'\0'</span>)</span></span>;
        <span class="hljs-built_in">fread</span>(&amp;result[<span class="hljs-number">0</span>], <span class="hljs-number">1</span>, size, handle_);
        <span class="hljs-keyword">return</span> result;
    }
    
<span class="hljs-keyword">private</span>:
    FILE* handle_;
    
    <span class="hljs-comment">// ç¦æ­¢æ‹·è´ï¼Œä½†æ²¡æœ‰æä¾›ç§»åŠ¨è¯­ä¹‰ï¼</span>
    <span class="hljs-built_in">BadFile</span>(<span class="hljs-type">const</span> BadFile&amp;) = <span class="hljs-keyword">delete</span>;
    BadFile&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> BadFile&amp;) = <span class="hljs-keyword">delete</span>;
};

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">demonstrate_bad_resource_management</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">BadFile <span class="hljs-title">file1</span><span class="hljs-params">(<span class="hljs-string">"data.txt"</span>)</span></span>;
    <span class="hljs-keyword">auto</span> content = file1.<span class="hljs-built_in">read</span>(<span class="hljs-number">100</span>);
    
    <span class="hljs-comment">// æ— æ³•åœ¨å®¹å™¨ä¸­ä½¿ç”¨ï¼</span>
    <span class="hljs-comment">// std::vector&lt;BadFile&gt; files;</span>
    <span class="hljs-comment">// files.push_back(BadFile("test.txt"));  // ç¼–è¯‘é”™è¯¯ï¼</span>
    
    <span class="hljs-comment">// æ— æ³•é«˜æ•ˆè¿”å›ï¼</span>
    <span class="hljs-comment">// auto openConfig() -&gt; BadFile {</span>
    <span class="hljs-comment">//     BadFile local("config.txt");</span>
    <span class="hljs-comment">//     return local;  // ç¼–è¯‘é”™è¯¯ï¼æ²¡æœ‰ç§»åŠ¨æ„é€ å‡½æ•°</span>
    <span class="hljs-comment">// }</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-8"><strong>è§£å†³æ–¹æ¡ˆï¼šå®Œæ•´çš„ç±»å‹è®¾è®¡</strong></h3>
<h4 data-id="heading-9"><strong>1. ä¸‰äº”æ³•åˆ™çš„æ­£ç¡®åº”ç”¨</strong></h4>
<p><strong>å®Œæ•´çš„å­—ç¬¦ä¸²ç±»å‹è®¾è®¡ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä¼˜ç§€çš„å­—ç¬¦ä¸²ç±»å‹ - éµå¾ªä¸‰äº”æ³•åˆ™</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">GoodString</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// é»˜è®¤æ„é€ å‡½æ•°</span>
    <span class="hljs-built_in">GoodString</span>() = <span class="hljs-keyword">default</span>;
    
    <span class="hljs-comment">// æ„é€ å‡½æ•°</span>
    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">GoodString</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* str)</span> </span>{
        <span class="hljs-keyword">if</span> (str) {
            size_ = std::<span class="hljs-built_in">strlen</span>(str);
            data_ = <span class="hljs-keyword">new</span> <span class="hljs-type">char</span>[size_ + <span class="hljs-number">1</span>];
            std::<span class="hljs-built_in">strcpy</span>(data_, str);
        }
    }
    
    <span class="hljs-built_in">GoodString</span>(<span class="hljs-type">const</span> std::string&amp; str) 
        : <span class="hljs-built_in">GoodString</span>(str.<span class="hljs-built_in">c_str</span>()) {}
    
    <span class="hljs-comment">// 1. ææ„å‡½æ•°</span>
    ~<span class="hljs-built_in">GoodString</span>() {
        <span class="hljs-keyword">delete</span>[] data_;
    }
    
    <span class="hljs-comment">// 2. æ‹·è´æ„é€ å‡½æ•°</span>
    <span class="hljs-built_in">GoodString</span>(<span class="hljs-type">const</span> GoodString&amp; other) 
        : <span class="hljs-built_in">size_</span>(other.size_) {
        <span class="hljs-keyword">if</span> (other.data_) {
            data_ = <span class="hljs-keyword">new</span> <span class="hljs-type">char</span>[size_ + <span class="hljs-number">1</span>];
            std::<span class="hljs-built_in">strcpy</span>(data_, other.data_);
        }
    }
    
    <span class="hljs-comment">// 3. æ‹·è´èµ‹å€¼è¿ç®—ç¬¦</span>
    GoodString&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> GoodString&amp; other) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> != &amp;other) {  <span class="hljs-comment">// è‡ªæˆ‘èµ‹å€¼æ£€æŸ¥</span>
            GoodString <span class="hljs-built_in">temp</span>(other);  <span class="hljs-comment">// æ‹·è´æ„é€ </span>
            <span class="hljs-built_in">swap</span>(temp);             <span class="hljs-comment">// äº¤æ¢ - å¼ºå¼‚å¸¸å®‰å…¨ä¿è¯</span>
        }
        <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;
    }
    
    <span class="hljs-comment">// 4. ç§»åŠ¨æ„é€ å‡½æ•°</span>
    <span class="hljs-built_in">GoodString</span>(GoodString&amp;&amp; other) <span class="hljs-keyword">noexcept</span> 
        : <span class="hljs-built_in">data_</span>(other.data_), <span class="hljs-built_in">size_</span>(other.size_) {
        other.data_ = <span class="hljs-literal">nullptr</span>;
        other.size_ = <span class="hljs-number">0</span>;
    }
    
    <span class="hljs-comment">// 5. ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦</span>
    GoodString&amp; <span class="hljs-keyword">operator</span>=(GoodString&amp;&amp; other) <span class="hljs-keyword">noexcept</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> != &amp;other) {
            <span class="hljs-keyword">delete</span>[] data_;        <span class="hljs-comment">// é‡Šæ”¾å½“å‰èµ„æº</span>
            data_ = other.data_;
            size_ = other.size_;
            other.data_ = <span class="hljs-literal">nullptr</span>;
            other.size_ = <span class="hljs-number">0</span>;
        }
        <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;
    }
    
    <span class="hljs-comment">// äº¤æ¢æ“ä½œ</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">swap</span><span class="hljs-params">(GoodString&amp; other)</span> <span class="hljs-keyword">noexcept</span> </span>{
        std::<span class="hljs-built_in">swap</span>(data_, other.data_);
        std::<span class="hljs-built_in">swap</span>(size_, other.size_);
    }
    
    <span class="hljs-comment">// è®¿é—®æ¥å£</span>
    <span class="hljs-function"><span class="hljs-type">const</span> <span class="hljs-type">char</span>* <span class="hljs-title">c_str</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">noexcept</span> </span>{ 
        <span class="hljs-keyword">return</span> data_ ? data_ : <span class="hljs-string">""</span>; 
    }
    
    <span class="hljs-function"><span class="hljs-type">size_t</span> <span class="hljs-title">size</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">noexcept</span> </span>{ <span class="hljs-keyword">return</span> size_; }
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">empty</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">noexcept</span> </span>{ <span class="hljs-keyword">return</span> size_ == <span class="hljs-number">0</span>; }
    
    <span class="hljs-comment">// è¿ç®—ç¬¦é‡è½½</span>
    <span class="hljs-keyword">friend</span> <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>==(<span class="hljs-type">const</span> GoodString&amp; lhs, <span class="hljs-type">const</span> GoodString&amp; rhs) {
        <span class="hljs-keyword">if</span> (lhs.size_ != rhs.size_) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">return</span> std::<span class="hljs-built_in">strcmp</span>(lhs.<span class="hljs-built_in">c_str</span>(), rhs.<span class="hljs-built_in">c_str</span>()) == <span class="hljs-number">0</span>;
    }
    
    <span class="hljs-keyword">friend</span> <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>!=(<span class="hljs-type">const</span> GoodString&amp; lhs, <span class="hljs-type">const</span> GoodString&amp; rhs) {
        <span class="hljs-keyword">return</span> !(lhs == rhs);
    }
    
    <span class="hljs-comment">// æµè¾“å‡ºæ”¯æŒ</span>
    <span class="hljs-keyword">friend</span> std::ostream&amp; <span class="hljs-keyword">operator</span>&lt;&lt;(std::ostream&amp; os, <span class="hljs-type">const</span> GoodString&amp; str) {
        <span class="hljs-keyword">return</span> os &lt;&lt; str.<span class="hljs-built_in">c_str</span>();
    }
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">char</span>* data_ = <span class="hljs-literal">nullptr</span>;
    <span class="hljs-type">size_t</span> size_ = <span class="hljs-number">0</span>;
};

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">demonstrate_good_string</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// å„ç§æ„é€ éƒ½æ­£å¸¸å·¥ä½œ</span>
    GoodString s1;
    <span class="hljs-function">GoodString <span class="hljs-title">s2</span><span class="hljs-params">(<span class="hljs-string">"hello"</span>)</span></span>;
    GoodString s3 = s2;           <span class="hljs-comment">// æ‹·è´æ„é€ </span>
    GoodString s4 = std::<span class="hljs-built_in">move</span>(s2); <span class="hljs-comment">// ç§»åŠ¨æ„é€ </span>
    
    <span class="hljs-comment">// èµ‹å€¼æ“ä½œ</span>
    s1 = s3;                      <span class="hljs-comment">// æ‹·è´èµ‹å€¼</span>
    s3 = <span class="hljs-built_in">GoodString</span>(<span class="hljs-string">"world"</span>);     <span class="hljs-comment">// ç§»åŠ¨èµ‹å€¼</span>
    
    <span class="hljs-comment">// åœ¨å®¹å™¨ä¸­å·¥ä½œè‰¯å¥½</span>
    std::vector&lt;GoodString&gt; strings;
    strings.<span class="hljs-built_in">emplace_back</span>(<span class="hljs-string">"item1"</span>);
    strings.<span class="hljs-built_in">push_back</span>(<span class="hljs-built_in">GoodString</span>(<span class="hljs-string">"item2"</span>));
    
    <span class="hljs-comment">// å¯ä»¥é«˜æ•ˆè¿”å›</span>
    <span class="hljs-keyword">auto</span> createString = []() -&gt; GoodString {
        GoodString <span class="hljs-built_in">local</span>(<span class="hljs-string">"created"</span>);
        <span class="hljs-keyword">return</span> local;  <span class="hljs-comment">// ç§»åŠ¨æ„é€ æˆ–NRVO</span>
    };
    
    <span class="hljs-keyword">auto</span> s5 = <span class="hljs-built_in">createString</span>();  <span class="hljs-comment">// é«˜æ•ˆï¼</span>
    
    std::cout &lt;&lt; <span class="hljs-string">"s1: "</span> &lt;&lt; s1 &lt;&lt; <span class="hljs-string">", s3: "</span> &lt;&lt; s3 &lt;&lt; <span class="hljs-string">", s5: "</span> &lt;&lt; s5 &lt;&lt; std::endl;
}
</code></pre>
<h4 data-id="heading-10"><strong>2. é›¶æ³•åˆ™çš„ç°ä»£åº”ç”¨</strong></h4>
<p><strong>ä½¿ç”¨æ ‡å‡†åº“ç»„ä»¶ï¼Œéµå¾ªé›¶æ³•åˆ™ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>

<span class="hljs-comment">// éµå¾ªé›¶æ³•åˆ™çš„ç±» - è®©ç¼–è¯‘å™¨ç”Ÿæˆç‰¹æ®Šæˆå‘˜å‡½æ•°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ZeroRuleClass</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// ä¸éœ€è¦æ˜¾å¼å®šä¹‰ææ„å‡½æ•°ã€æ‹·è´/ç§»åŠ¨æ“ä½œ</span>
    <span class="hljs-comment">// ç¼–è¯‘å™¨ç”Ÿæˆçš„ç‰ˆæœ¬å®Œå…¨æ­£ç¡®</span>
    
    <span class="hljs-built_in">ZeroRuleClass</span>(std::string name, std::vector&lt;<span class="hljs-type">int</span>&gt; data)
        : <span class="hljs-built_in">name_</span>(std::<span class="hljs-built_in">move</span>(name))
        , <span class="hljs-built_in">data_</span>(std::<span class="hljs-built_in">move</span>(data))
        , <span class="hljs-built_in">cache_</span>(std::<span class="hljs-built_in">make_shared</span>&lt;Cache&gt;())
    {}
    
    <span class="hljs-comment">// ä¸šåŠ¡æ¥å£</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">process</span><span class="hljs-params">()</span> </span>{
        cachedValue_ = std::<span class="hljs-built_in">accumulate</span>(data_.<span class="hljs-built_in">begin</span>(), data_.<span class="hljs-built_in">end</span>(), <span class="hljs-number">0</span>);
        cache_-&gt;<span class="hljs-built_in">update</span>(cachedValue_);
    }
    
    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getCachedValue</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> cachedValue_; }
    <span class="hljs-function"><span class="hljs-type">const</span> std::string&amp; <span class="hljs-title">getName</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> name_; }
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Cache</span> {
        <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update</span><span class="hljs-params">(<span class="hljs-type">int</span> value)</span> </span>{
            <span class="hljs-comment">// ç¼“å­˜æ›´æ–°é€»è¾‘</span>
            lastValue = value;
        }
        <span class="hljs-type">int</span> lastValue = <span class="hljs-number">0</span>;
    };
    
    std::string name_;
    std::vector&lt;<span class="hljs-type">int</span>&gt; data_;
    std::shared_ptr&lt;Cache&gt; cache_;  <span class="hljs-comment">// å…±äº«æ‰€æœ‰æƒï¼Œæµ…æ‹·è´æ­£ç¡®</span>
    <span class="hljs-type">int</span> cachedValue_ = <span class="hljs-number">0</span>;
};

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">demonstrate_zero_rule</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">ZeroRuleClass <span class="hljs-title">obj1</span><span class="hljs-params">(<span class="hljs-string">"test"</span>, {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>})</span></span>;
    obj1.<span class="hljs-built_in">process</span>();
    
    <span class="hljs-comment">// ç¼–è¯‘å™¨ç”Ÿæˆçš„æ‹·è´æ“ä½œå®Œå…¨æ­£ç¡®</span>
    ZeroRuleClass obj2 = obj1;
    
    <span class="hljs-comment">// ç¼–è¯‘å™¨ç”Ÿæˆçš„ç§»åŠ¨æ“ä½œé«˜æ•ˆ</span>
    ZeroRuleClass obj3 = std::<span class="hljs-built_in">move</span>(obj1);
    
    <span class="hljs-comment">// åœ¨å®¹å™¨ä¸­å·¥ä½œè‰¯å¥½</span>
    std::vector&lt;ZeroRuleClass&gt; objects;
    objects.<span class="hljs-built_in">push_back</span>(<span class="hljs-built_in">ZeroRuleClass</span>(<span class="hljs-string">"item"</span>, {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>}));
    objects.<span class="hljs-built_in">emplace_back</span>(<span class="hljs-string">"emplace"</span>, std::vector&lt;<span class="hljs-type">int</span>&gt;{<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>});
    
    std::cout &lt;&lt; <span class="hljs-string">"obj2: "</span> &lt;&lt; obj2.<span class="hljs-built_in">getName</span>() 
              &lt;&lt; <span class="hljs-string">", value: "</span> &lt;&lt; obj2.<span class="hljs-built_in">getCachedValue</span>() &lt;&lt; std::endl;
    std::cout &lt;&lt; <span class="hljs-string">"obj3: "</span> &lt;&lt; obj3.<span class="hljs-built_in">getName</span>() 
              &lt;&lt; <span class="hljs-string">", value: "</span> &lt;&lt; obj3.<span class="hljs-built_in">getCachedValue</span>() &lt;&lt; std::endl;
}
</code></pre>
<hr/>
<h3 data-id="heading-11"><strong>ç»§æ‰¿ä½“ç³»è®¾è®¡</strong></h3>
<h4 data-id="heading-12"><strong>1. å…¬æœ‰ç»§æ‰¿ä¸is-aå…³ç³»</strong></h4>
<p><strong>æ­£ç¡®çš„ç»§æ‰¿å±‚æ¬¡è®¾è®¡ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>

<span class="hljs-comment">// å½¢çŠ¶åŸºç±» - æ¥å£å®šä¹‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">Shape</span>() = <span class="hljs-keyword">default</span>;  <span class="hljs-comment">// åŸºç±»å¿…é¡»æœ‰è™šææ„å‡½æ•°ï¼</span>
    
    <span class="hljs-comment">// çº¯è™šå‡½æ•° - æ¥å£å¥‘çº¦</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">double</span> <span class="hljs-title">area</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">double</span> <span class="hljs-title">perimeter</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> std::string <span class="hljs-title">name</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>= <span class="hljs-number">0</span>;
    
    <span class="hljs-comment">// éè™šå‡½æ•° - ä¸å˜è¡Œä¸º</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printInfo</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        std::cout &lt;&lt; <span class="hljs-built_in">name</span>() &lt;&lt; <span class="hljs-string">": area="</span> &lt;&lt; <span class="hljs-built_in">area</span>() 
                  &lt;&lt; <span class="hljs-string">", perimeter="</span> &lt;&lt; <span class="hljs-built_in">perimeter</span>() &lt;&lt; std::endl;
    }
    
    <span class="hljs-comment">// è™šå‡½æ•° - å¯é‡å†™çš„é»˜è®¤è¡Œä¸º</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">scale</span><span class="hljs-params">(<span class="hljs-type">double</span> factor)</span> </span>= <span class="hljs-number">0</span>;
    
<span class="hljs-keyword">protected</span>:
    <span class="hljs-comment">// ä¿æŠ¤æˆå‘˜ - æ´¾ç”Ÿç±»å®ç°è¾…åŠ©å‡½æ•°</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">validateFactor</span><span class="hljs-params">(<span class="hljs-type">double</span> factor)</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">if</span> (factor &lt;= <span class="hljs-number">0.0</span>) {
            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">invalid_argument</span>(<span class="hljs-string">"ç¼©æ”¾å› å­å¿…é¡»ä¸ºæ­£æ•°"</span>);
        }
    }
};

<span class="hljs-comment">// çŸ©å½¢ - å…·ä½“å®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span> : <span class="hljs-keyword">public</span> Shape {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Rectangle</span>(<span class="hljs-type">double</span> width, <span class="hljs-type">double</span> height) 
        : <span class="hljs-built_in">width_</span>(width), <span class="hljs-built_in">height_</span>(height) {
        <span class="hljs-keyword">if</span> (width &lt;= <span class="hljs-number">0</span> || height &lt;= <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">invalid_argument</span>(<span class="hljs-string">"å®½åº¦å’Œé«˜åº¦å¿…é¡»ä¸ºæ­£æ•°"</span>);
        }
    }
    
    <span class="hljs-comment">// å®ç°çº¯è™šå‡½æ•°</span>
    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">area</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-keyword">return</span> width_ * height_;
    }
    
    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">perimeter</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-number">2</span> * (width_ + height_);
    }
    
    <span class="hljs-function">std::string <span class="hljs-title">name</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Rectangle"</span>;
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">scale</span><span class="hljs-params">(<span class="hljs-type">double</span> factor)</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-built_in">validateFactor</span>(factor);
        width_ *= factor;
        height_ *= factor;
    }
    
    <span class="hljs-comment">// çŸ©å½¢ç‰¹æœ‰æ“ä½œ</span>
    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">getWidth</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> width_; }
    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">getHeight</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> height_; }
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">double</span> width_;
    <span class="hljs-type">double</span> height_;
};

<span class="hljs-comment">// åœ†å½¢ - å…·ä½“å®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> : <span class="hljs-keyword">public</span> Shape {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">Circle</span><span class="hljs-params">(<span class="hljs-type">double</span> radius)</span> : radius_(radius) {</span>
        <span class="hljs-keyword">if</span> (radius &lt;= <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">invalid_argument</span>(<span class="hljs-string">"åŠå¾„å¿…é¡»ä¸ºæ­£æ•°"</span>);
        }
    }
    
    <span class="hljs-comment">// å®ç°çº¯è™šå‡½æ•°</span>
    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">area</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-number">3.141592653589793</span> * radius_ * radius_;
    }
    
    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">perimeter</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-number">2</span> * <span class="hljs-number">3.141592653589793</span> * radius_;
    }
    
    <span class="hljs-function">std::string <span class="hljs-title">name</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Circle"</span>;
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">scale</span><span class="hljs-params">(<span class="hljs-type">double</span> factor)</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-built_in">validateFactor</span>(factor);
        radius_ *= factor;
    }
    
    <span class="hljs-comment">// åœ†å½¢ç‰¹æœ‰æ“ä½œ</span>
    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">getRadius</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> radius_; }
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">double</span> radius_;
};

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">demonstrate_good_inheritance</span><span class="hljs-params">()</span> </span>{
    std::vector&lt;std::unique_ptr&lt;Shape&gt;&gt; shapes;
    
    shapes.<span class="hljs-built_in">push_back</span>(std::<span class="hljs-built_in">make_unique</span>&lt;Rectangle&gt;(<span class="hljs-number">10.0</span>, <span class="hljs-number">5.0</span>));
    shapes.<span class="hljs-built_in">push_back</span>(std::<span class="hljs-built_in">make_unique</span>&lt;Circle&gt;(<span class="hljs-number">3.0</span>));
    
    <span class="hljs-comment">// å¤šæ€è¡Œä¸º - ç¬¦åˆLiskovæ›¿æ¢åŸåˆ™</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; shape : shapes) {
        shape-&gt;<span class="hljs-built_in">printInfo</span>();  <span class="hljs-comment">// æ­£ç¡®è°ƒç”¨å„ä¸ªæ´¾ç”Ÿç±»çš„å®ç°</span>
        
        <span class="hljs-comment">// å¯ä»¥å®‰å…¨åœ°ç¼©æ”¾</span>
        shape-&gt;<span class="hljs-built_in">scale</span>(<span class="hljs-number">2.0</span>);
        shape-&gt;<span class="hljs-built_in">printInfo</span>();
    }
    
    <span class="hljs-comment">// ç±»å‹å®‰å…¨çš„å‘ä¸‹è½¬å‹</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> rect = <span class="hljs-built_in">dynamic_cast</span>&lt;Rectangle*&gt;(shapes[<span class="hljs-number">0</span>].<span class="hljs-built_in">get</span>())) {
        std::cout &lt;&lt; <span class="hljs-string">"çŸ©å½¢å®½åº¦: "</span> &lt;&lt; rect-&gt;<span class="hljs-built_in">getWidth</span>() &lt;&lt; std::endl;
    }
}
</code></pre>
<h4 data-id="heading-13"><strong>2. éå…¬æœ‰ç»§æ‰¿çš„æ­£ç¡®ä½¿ç”¨</strong></h4>
<p><strong>ä½¿ç”¨ç»„åˆè€Œéç§æœ‰ç»§æ‰¿ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä½¿ç”¨ç»„åˆè€Œä¸æ˜¯ç§æœ‰ç»§æ‰¿çš„ä¾‹å­</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Timer</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">start</span><span class="hljs-params">()</span> </span>{ <span class="hljs-comment">/* å¯åŠ¨è®¡æ—¶å™¨ */</span> }
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">stop</span><span class="hljs-params">()</span> </span>{ <span class="hljs-comment">/* åœæ­¢è®¡æ—¶å™¨ */</span> }
    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">elapsed</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-comment">/* è¿”å›ç»è¿‡æ—¶é—´ */</span> <span class="hljs-keyword">return</span> <span class="hljs-number">0.0</span>; }
};

<span class="hljs-comment">// ç³Ÿç³•çš„è®¾è®¡ - ç§æœ‰ç»§æ‰¿è¯¯ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BadTask</span> : <span class="hljs-keyword">private</span> Timer {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">execute</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-built_in">start</span>();
        <span class="hljs-comment">// æ‰§è¡Œä»»åŠ¡...</span>
        <span class="hljs-built_in">stop</span>();
        std::cout &lt;&lt; <span class="hljs-string">"è€—æ—¶: "</span> &lt;&lt; <span class="hljs-built_in">elapsed</span>() &lt;&lt; <span class="hljs-string">"ç§’"</span> &lt;&lt; std::endl;
    }
    <span class="hljs-comment">// é—®é¢˜ï¼šTimerçš„æ¥å£æš´éœ²ç»™äº†BadTaskçš„ç”¨æˆ·å—ï¼Ÿ</span>
};

<span class="hljs-comment">// ä¼˜ç§€çš„è®¾è®¡ - ä½¿ç”¨ç»„åˆ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">GoodTask</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">execute</span><span class="hljs-params">()</span> </span>{
        timer_.<span class="hljs-built_in">start</span>();
        <span class="hljs-comment">// æ‰§è¡Œä»»åŠ¡...</span>
        timer_.<span class="hljs-built_in">stop</span>();
        std::cout &lt;&lt; <span class="hljs-string">"è€—æ—¶: "</span> &lt;&lt; timer_.<span class="hljs-built_in">elapsed</span>() &lt;&lt; <span class="hljs-string">"ç§’"</span> &lt;&lt; std::endl;
    }
    
    <span class="hljs-comment">// æ˜ç¡®çš„æ¥å£ï¼Œæ²¡æœ‰æ„å¤–çš„Timeræ–¹æ³•æš´éœ²</span>
    
<span class="hljs-keyword">private</span>:
    Timer timer_;  <span class="hljs-comment">// ç»„åˆï¼Œä¸æ˜¯ç»§æ‰¿</span>
};

<span class="hljs-comment">// ç§æœ‰ç»§æ‰¿çš„æ­£å½“ä½¿ç”¨åœºæ™¯</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> {
<span class="hljs-keyword">protected</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">protectedMethod</span><span class="hljs-params">()</span> </span>{ <span class="hljs-comment">/* å—ä¿æŠ¤çš„æ–¹æ³• */</span> }
    <span class="hljs-type">int</span> protectedData;
};

<span class="hljs-comment">// æ­£å½“çš„ç§æœ‰ç»§æ‰¿ï¼šéœ€è¦é‡å†™è™šå‡½æ•°æˆ–è®¿é—®å—ä¿æŠ¤æˆå‘˜</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Derived</span> : <span class="hljs-keyword">private</span> Base {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">useBaseFunctionality</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-built_in">protectedMethod</span>();  <span class="hljs-comment">// å¯ä»¥è®¿é—®åŸºç±»å—ä¿æŠ¤æˆå‘˜</span>
        protectedData = <span class="hljs-number">42</span>;
    }
    
    <span class="hljs-comment">// ä¸æš´éœ²Baseçš„æ¥å£ç»™Derivedçš„ç”¨æˆ·</span>
};

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">demonstrate_composition_over_inheritance</span><span class="hljs-params">()</span> </span>{
    GoodTask task;
    task.<span class="hljs-built_in">execute</span>();
    
    <span class="hljs-comment">// æ¸…æ™°çš„æ¥å£ï¼Œæ²¡æœ‰æ„å¤–çš„Timeræ–¹æ³•</span>
    <span class="hljs-comment">// task.start();  // ç¼–è¯‘é”™è¯¯ï¼è¿™æ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„</span>
    
    BadTask badTask;
    badTask.<span class="hljs-built_in">execute</span>();
    <span class="hljs-comment">// badTask.start();  // ç¼–è¯‘é”™è¯¯ï¼Œä½†è®¾è®¡æ„å›¾ä¸å¦‚ç»„åˆæ¸…æ™°</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-14"><strong>ç±»å‹è½¬æ¢è®¾è®¡</strong></h3>
<h4 data-id="heading-15"><strong>1. æ˜¾å¼è½¬æ¢çš„å®‰å…¨è®¾è®¡</strong></h4>
<p><strong>å®‰å…¨çš„ç±»å‹è½¬æ¢æ¥å£ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sstream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdexcept&gt;</span></span>

<span class="hljs-comment">// å®‰å…¨çš„æ•°å€¼ç±»å‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SafeNumber</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// æ˜¾å¼æ„é€ å‡½æ•° - é¿å…éšå¼è½¬æ¢</span>
    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">SafeNumber</span><span class="hljs-params">(<span class="hljs-type">int</span> value)</span> : value_(value) {</span>}
    
    <span class="hljs-comment">// ä»å­—ç¬¦ä¸²æ„é€  - æ˜¾å¼ï¼Œå¸¦éªŒè¯</span>
    <span class="hljs-function"><span class="hljs-type">static</span> std::optional&lt;SafeNumber&gt; <span class="hljs-title">fromString</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; str)</span> </span>{
        <span class="hljs-keyword">try</span> {
            std::<span class="hljs-type">size_t</span> pos;
            <span class="hljs-type">int</span> value = std::<span class="hljs-built_in">stoi</span>(str, &amp;pos);
            
            <span class="hljs-comment">// éªŒè¯æ•´ä¸ªå­—ç¬¦ä¸²éƒ½è¢«è§£æ</span>
            <span class="hljs-keyword">if</span> (pos != str.<span class="hljs-built_in">length</span>()) {
                <span class="hljs-keyword">return</span> std::<span class="hljs-literal">nullopt</span>;
            }
            
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">SafeNumber</span>(value);
        } <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> std::exception&amp;) {
            <span class="hljs-keyword">return</span> std::<span class="hljs-literal">nullopt</span>;
        }
    }
    
    <span class="hljs-comment">// è½¬æ¢åˆ°å…¶ä»–ç±»å‹ - æ˜¾å¼å‘½åå‡½æ•°</span>
    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">toInt</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">noexcept</span> </span>{ <span class="hljs-keyword">return</span> value_; }
    <span class="hljs-function">std::string <span class="hljs-title">toString</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> std::<span class="hljs-built_in">to_string</span>(value_); }
    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-keyword">operator</span> <span class="hljs-title">int</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> value_; }  <span class="hljs-comment">// æ˜¾å¼è½¬æ¢è¿ç®—ç¬¦</span>
    
    <span class="hljs-comment">// ç®—æœ¯è¿ç®—ç¬¦</span>
    SafeNumber <span class="hljs-keyword">operator</span>+(<span class="hljs-type">const</span> SafeNumber&amp; other) <span class="hljs-type">const</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">SafeNumber</span>(value_ + other.value_);
    }
    
    SafeNumber <span class="hljs-keyword">operator</span>-(<span class="hljs-type">const</span> SafeNumber&amp; other) <span class="hljs-type">const</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">SafeNumber</span>(value_ - other.value_);
    }
    
    <span class="hljs-comment">// æ¯”è¾ƒè¿ç®—ç¬¦</span>
    <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>==(<span class="hljs-type">const</span> SafeNumber&amp; other) <span class="hljs-type">const</span> = <span class="hljs-keyword">default</span>;
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">int</span> value_;
};

<span class="hljs-comment">// ä½¿ç”¨æ˜¾å¼è½¬æ¢çš„æ—¥æœŸç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Date</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Date</span>(<span class="hljs-type">int</span> year, <span class="hljs-type">int</span> month, <span class="hljs-type">int</span> day) 
        : <span class="hljs-built_in">year_</span>(year), <span class="hljs-built_in">month_</span>(month), <span class="hljs-built_in">day_</span>(day) {
        <span class="hljs-built_in">validate</span>();
    }
    
    <span class="hljs-comment">// æ˜¾å¼è½¬æ¢å‡½æ•° - æ¸…æ™°çš„è¯­ä¹‰</span>
    <span class="hljs-function">std::string <span class="hljs-title">toIsoString</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        std::ostringstream oss;
        oss &lt;&lt; year_ &lt;&lt; <span class="hljs-string">"-"</span> 
            &lt;&lt; (month_ &lt; <span class="hljs-number">10</span> ? <span class="hljs-string">"0"</span> : <span class="hljs-string">""</span>) &lt;&lt; month_ &lt;&lt; <span class="hljs-string">"-"</span>
            &lt;&lt; (day_ &lt; <span class="hljs-number">10</span> ? <span class="hljs-string">"0"</span> : <span class="hljs-string">""</span>) &lt;&lt; day_;
        <span class="hljs-keyword">return</span> oss.<span class="hljs-built_in">str</span>();
    }
    
    <span class="hljs-comment">// æ˜ç¡®çš„è½¬æ¢ï¼Œè€Œä¸æ˜¯éšå¼è½¬æ¢</span>
    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-keyword">operator</span> <span class="hljs-title">std::string</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">toIsoString</span>();
    }
    
    <span class="hljs-comment">// ä¸å…è®¸åˆ°intçš„éšå¼è½¬æ¢ - è¯­ä¹‰ä¸æ˜ç¡®ï¼</span>
    <span class="hljs-comment">// operator int() const = delete;  // æˆ–è€…ä¸æä¾›</span>
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">validate</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">if</span> (month_ &lt; <span class="hljs-number">1</span> || month_ &gt; <span class="hljs-number">12</span>) {
            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">invalid_argument</span>(<span class="hljs-string">"æœˆä»½å¿…é¡»åœ¨1-12ä¹‹é—´"</span>);
        }
        <span class="hljs-keyword">if</span> (day_ &lt; <span class="hljs-number">1</span> || day_ &gt; <span class="hljs-number">31</span>) {
            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">invalid_argument</span>(<span class="hljs-string">"æ—¥æœŸå¿…é¡»åœ¨1-31ä¹‹é—´"</span>);
        }
        <span class="hljs-comment">// æ›´å¤æ‚çš„éªŒè¯...</span>
    }
    
    <span class="hljs-type">int</span> year_, month_, day_;
};

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">demonstrate_safe_conversions</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// å®‰å…¨çš„æ•°å€¼åˆ›å»º</span>
    <span class="hljs-keyword">auto</span> num1 = <span class="hljs-built_in">SafeNumber</span>(<span class="hljs-number">42</span>);
    <span class="hljs-keyword">auto</span> num2 = SafeNumber::<span class="hljs-built_in">fromString</span>(<span class="hljs-string">"100"</span>);
    
    <span class="hljs-keyword">if</span> (num2) {
        <span class="hljs-keyword">auto</span> result = num1 + *num2;
        std::cout &lt;&lt; <span class="hljs-string">"ç»“æœ: "</span> &lt;&lt; result.<span class="hljs-built_in">toInt</span>() &lt;&lt; std::endl;
    }
    
    <span class="hljs-comment">// å¤±è´¥çš„è½¬æ¢å®‰å…¨å¤„ç†</span>
    <span class="hljs-keyword">auto</span> invalid = SafeNumber::<span class="hljs-built_in">fromString</span>(<span class="hljs-string">"abc"</span>);
    <span class="hljs-keyword">if</span> (!invalid) {
        std::cout &lt;&lt; <span class="hljs-string">"æ— æ•ˆçš„æ•°å­—å­—ç¬¦ä¸²"</span> &lt;&lt; std::endl;
    }
    
    <span class="hljs-comment">// æ˜ç¡®çš„æ—¥æœŸè½¬æ¢</span>
    <span class="hljs-function">Date <span class="hljs-title">today</span><span class="hljs-params">(<span class="hljs-number">2023</span>, <span class="hljs-number">10</span>, <span class="hljs-number">15</span>)</span></span>;
    std::string isoDate = today.<span class="hljs-built_in">toIsoString</span>();  <span class="hljs-comment">// æ˜ç¡®è°ƒç”¨</span>
    std::string explicitStr = <span class="hljs-built_in">static_cast</span>&lt;std::string&gt;(today);  <span class="hljs-comment">// æ˜¾å¼è½¬æ¢</span>
    
    <span class="hljs-comment">// ä»¥ä¸‹ä»£ç ä¸ä¼šç¼–è¯‘ - è¿™æ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼</span>
    <span class="hljs-comment">// std::string implicitStr = today;  // ç¼–è¯‘é”™è¯¯ï¼æ²¡æœ‰éšå¼è½¬æ¢</span>
    <span class="hljs-comment">// int invalidInt = today;           // ç¼–è¯‘é”™è¯¯ï¼</span>
    
    std::cout &lt;&lt; <span class="hljs-string">"ISOæ—¥æœŸ: "</span> &lt;&lt; isoDate &lt;&lt; std::endl;
    std::cout &lt;&lt; <span class="hljs-string">"æ˜¾å¼å­—ç¬¦ä¸²: "</span> &lt;&lt; explicitStr &lt;&lt; std::endl;
}
</code></pre>
<hr/>
<h3 data-id="heading-16"><strong>å¼‚å¸¸å®‰å…¨è®¾è®¡</strong></h3>
<h4 data-id="heading-17"><strong>1. å¼ºå¼‚å¸¸å®‰å…¨ä¿è¯</strong></h4>
<p><strong>æä¾›å¼ºå¼‚å¸¸å®‰å…¨ä¿è¯çš„ç±»ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdexcept&gt;</span></span>

<span class="hljs-comment">// å¼ºå¼‚å¸¸å®‰å…¨çš„å®¹å™¨åŒ…è£…å™¨</span>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SafeVector</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">SafeVector</span>() = <span class="hljs-keyword">default</span>;
    
    <span class="hljs-comment">// æ‹·è´æ„é€ å‡½æ•° - å¼ºå¼‚å¸¸å®‰å…¨</span>
    <span class="hljs-built_in">SafeVector</span>(<span class="hljs-type">const</span> SafeVector&amp; other) 
        : <span class="hljs-built_in">data_</span>(other.data_)  <span class="hljs-comment">// vectorçš„æ‹·è´æ„é€ å‡½æ•°æä¾›å¼ºä¿è¯</span>
    {}
    
    <span class="hljs-comment">// æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ - å¼ºå¼‚å¸¸å®‰å…¨ï¼ˆæ‹·è´å¹¶äº¤æ¢æƒ¯ç”¨æ³•ï¼‰</span>
    SafeVector&amp; <span class="hljs-keyword">operator</span>=(SafeVector other) <span class="hljs-keyword">noexcept</span> {
        <span class="hljs-built_in">swap</span>(other);
        <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;
    }
    
    <span class="hljs-comment">// ç§»åŠ¨æ“ä½œ - noexcept</span>
    <span class="hljs-built_in">SafeVector</span>(SafeVector&amp;&amp; other) <span class="hljs-keyword">noexcept</span> = <span class="hljs-keyword">default</span>;
    SafeVector&amp; <span class="hljs-keyword">operator</span>=(SafeVector&amp;&amp; other) <span class="hljs-keyword">noexcept</span> = <span class="hljs-keyword">default</span>;
    
    <span class="hljs-comment">// äº¤æ¢ - noexcept</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">swap</span><span class="hljs-params">(SafeVector&amp; other)</span> <span class="hljs-keyword">noexcept</span> </span>{
        data_.<span class="hljs-built_in">swap</span>(other.data_);
    }
    
    <span class="hljs-comment">// å¼ºå¼‚å¸¸å®‰å…¨çš„æ’å…¥æ“ä½œ</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">push_back</span><span class="hljs-params">(<span class="hljs-type">const</span> T&amp; value)</span> </span>{
        <span class="hljs-comment">// åˆ›å»ºå‰¯æœ¬ï¼Œå¦‚æœæ‹·è´æ„é€ æŠ›å‡ºå¼‚å¸¸ï¼Œä¸å½±å“å½“å‰å¯¹è±¡</span>
        SafeVector temp = *<span class="hljs-keyword">this</span>;
        
        <span class="hljs-comment">// ä¿®æ”¹å‰¯æœ¬ - å¦‚æœè¿™ä¸ªæ“ä½œå¤±è´¥ï¼Œtempä¼šè¢«é”€æ¯ï¼Œä½†*thisä¸å˜</span>
        temp.data_.<span class="hljs-built_in">push_back</span>(value);
        
        <span class="hljs-comment">// äº¤æ¢ - noexceptï¼Œä¸ä¼šæŠ›å‡º</span>
        <span class="hljs-built_in">swap</span>(temp);
        
        <span class="hljs-comment">// tempç¦»å¼€ä½œç”¨åŸŸï¼Œæ¸…ç†æ—§æ•°æ®</span>
    }
    
    <span class="hljs-comment">// å¼ºå¼‚å¸¸å®‰å…¨çš„æ’å…¥æ“ä½œ - ç§»åŠ¨ç‰ˆæœ¬</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">push_back</span><span class="hljs-params">(T&amp;&amp; value)</span> </span>{
        SafeVector temp = *<span class="hljs-keyword">this</span>;
        temp.data_.<span class="hljs-built_in">push_back</span>(std::<span class="hljs-built_in">move</span>(value));
        <span class="hljs-built_in">swap</span>(temp);
    }
    
    <span class="hljs-comment">// å¼ºå¼‚å¸¸å®‰å…¨çš„æ‰¹é‡æ’å…¥</span>
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> InputIt&gt;
    <span class="hljs-type">void</span> <span class="hljs-title">insert</span><span class="hljs-params">(InputIt first, InputIt last)</span> </span>{
        SafeVector temp = *<span class="hljs-keyword">this</span>;
        temp.data_.<span class="hljs-built_in">insert</span>(temp.data_.<span class="hljs-built_in">end</span>(), first, last);
        <span class="hljs-built_in">swap</span>(temp);
    }
    
    <span class="hljs-comment">// å¼ºå¼‚å¸¸å®‰å…¨çš„åˆ é™¤æ“ä½œ</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">erase</span><span class="hljs-params">(<span class="hljs-type">size_t</span> index)</span> </span>{
        <span class="hljs-keyword">if</span> (index &gt;= data_.<span class="hljs-built_in">size</span>()) {
            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">out_of_range</span>(<span class="hljs-string">"ç´¢å¼•è¶Šç•Œ"</span>);
        }
        
        SafeVector temp = *<span class="hljs-keyword">this</span>;
        temp.data_.<span class="hljs-built_in">erase</span>(temp.data_.<span class="hljs-built_in">begin</span>() + index);
        <span class="hljs-built_in">swap</span>(temp);
    }
    
    <span class="hljs-comment">// è®¿é—®æ¥å£</span>
    <span class="hljs-function"><span class="hljs-type">const</span> T&amp; <span class="hljs-title">at</span><span class="hljs-params">(<span class="hljs-type">size_t</span> index)</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">if</span> (index &gt;= data_.<span class="hljs-built_in">size</span>()) {
            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">out_of_range</span>(<span class="hljs-string">"ç´¢å¼•è¶Šç•Œ"</span>);
        }
        <span class="hljs-keyword">return</span> data_[index];
    }
    
    <span class="hljs-function">T&amp; <span class="hljs-title">at</span><span class="hljs-params">(<span class="hljs-type">size_t</span> index)</span> </span>{
        <span class="hljs-keyword">if</span> (index &gt;= data_.<span class="hljs-built_in">size</span>()) {
            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">out_of_range</span>(<span class="hljs-string">"ç´¢å¼•è¶Šç•Œ"</span>);
        }
        <span class="hljs-keyword">return</span> data_[index];
    }
    
    <span class="hljs-function"><span class="hljs-type">size_t</span> <span class="hljs-title">size</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">noexcept</span> </span>{ <span class="hljs-keyword">return</span> data_.<span class="hljs-built_in">size</span>(); }
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">empty</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">noexcept</span> </span>{ <span class="hljs-keyword">return</span> data_.<span class="hljs-built_in">empty</span>(); }
    
    <span class="hljs-comment">// è¿­ä»£å™¨æ”¯æŒ</span>
    <span class="hljs-function"><span class="hljs-keyword">auto</span> <span class="hljs-title">begin</span><span class="hljs-params">()</span> <span class="hljs-keyword">noexcept</span> </span>{ <span class="hljs-keyword">return</span> data_.<span class="hljs-built_in">begin</span>(); }
    <span class="hljs-function"><span class="hljs-keyword">auto</span> <span class="hljs-title">end</span><span class="hljs-params">()</span> <span class="hljs-keyword">noexcept</span> </span>{ <span class="hljs-keyword">return</span> data_.<span class="hljs-built_in">end</span>(); }
    <span class="hljs-function"><span class="hljs-keyword">auto</span> <span class="hljs-title">begin</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">noexcept</span> </span>{ <span class="hljs-keyword">return</span> data_.<span class="hljs-built_in">begin</span>(); }
    <span class="hljs-function"><span class="hljs-keyword">auto</span> <span class="hljs-title">end</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">noexcept</span> </span>{ <span class="hljs-keyword">return</span> data_.<span class="hljs-built_in">end</span>(); }
    
<span class="hljs-keyword">private</span>:
    std::vector&lt;T&gt; data_;
};

<span class="hljs-comment">// å¼‚å¸¸å®‰å…¨çš„æ•°æ®åº“äº‹åŠ¡åŒ…è£…å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseTransaction</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">DatabaseTransaction</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; dbName)</span> 
        : committed_(false) {</span>
        <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®åº“è¿æ¥</span>
        std::cout &lt;&lt; <span class="hljs-string">"å¼€å§‹äº‹åŠ¡: "</span> &lt;&lt; dbName &lt;&lt; std::endl;
    }
    
    <span class="hljs-comment">// ç¦æ­¢æ‹·è´</span>
    <span class="hljs-built_in">DatabaseTransaction</span>(<span class="hljs-type">const</span> DatabaseTransaction&amp;) = <span class="hljs-keyword">delete</span>;
    DatabaseTransaction&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> DatabaseTransaction&amp;) = <span class="hljs-keyword">delete</span>;
    
    <span class="hljs-comment">// ç§»åŠ¨è¯­ä¹‰</span>
    <span class="hljs-built_in">DatabaseTransaction</span>(DatabaseTransaction&amp;&amp; other) <span class="hljs-keyword">noexcept</span> 
        : <span class="hljs-built_in">committed_</span>(other.committed_) {
        other.committed_ = <span class="hljs-literal">false</span>;  <span class="hljs-comment">// ç§»åŠ¨åæºå¯¹è±¡ä¸å†æ‹¥æœ‰äº‹åŠ¡</span>
    }
    
    DatabaseTransaction&amp; <span class="hljs-keyword">operator</span>=(DatabaseTransaction&amp;&amp; other) <span class="hljs-keyword">noexcept</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> != &amp;other) {
            <span class="hljs-built_in">rollbackIfNeeded</span>();  <span class="hljs-comment">// å›æ»šå½“å‰äº‹åŠ¡</span>
            committed_ = other.committed_;
            other.committed_ = <span class="hljs-literal">false</span>;
        }
        <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;
    }
    
    <span class="hljs-comment">// ææ„å‡½æ•° - è‡ªåŠ¨å›æ»šæœªæäº¤çš„äº‹åŠ¡</span>
    ~<span class="hljs-built_in">DatabaseTransaction</span>() <span class="hljs-keyword">noexcept</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-built_in">rollbackIfNeeded</span>();
        } <span class="hljs-built_in">catch</span> (...) {
            <span class="hljs-comment">// ææ„å‡½æ•°ä¸åº”è¯¥æŠ›å‡ºå¼‚å¸¸</span>
            std::cerr &lt;&lt; <span class="hljs-string">"å›æ»šäº‹åŠ¡æ—¶å‘ç”Ÿå¼‚å¸¸"</span> &lt;&lt; std::endl;
        }
    }
    
    <span class="hljs-comment">// ä¸šåŠ¡æ“ä½œ - æä¾›åŸºæœ¬å¼‚å¸¸å®‰å…¨ä¿è¯</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">execute</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; query)</span> </span>{
        <span class="hljs-built_in">validateActive</span>();
        
        <span class="hljs-comment">// æ¨¡æ‹Ÿå¯èƒ½å¤±è´¥çš„æ“ä½œ</span>
        <span class="hljs-keyword">if</span> (query.<span class="hljs-built_in">empty</span>()) {
            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">invalid_argument</span>(<span class="hljs-string">"æŸ¥è¯¢ä¸èƒ½ä¸ºç©º"</span>);
        }
        
        std::cout &lt;&lt; <span class="hljs-string">"æ‰§è¡Œ: "</span> &lt;&lt; query &lt;&lt; std::endl;
        <span class="hljs-comment">// å®é™…æ•°æ®åº“æ“ä½œ...</span>
    }
    
    <span class="hljs-comment">// æäº¤ - å¦‚æœä¸æˆåŠŸåˆ™æŠ›å‡ºå¼‚å¸¸</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">commit</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-built_in">validateActive</span>();
        
        <span class="hljs-comment">// æ¨¡æ‹Ÿå¯èƒ½å¤±è´¥çš„æäº¤</span>
        std::cout &lt;&lt; <span class="hljs-string">"æäº¤äº‹åŠ¡..."</span> &lt;&lt; std::endl;
        
        committed_ = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// æ ‡è®°ä¸ºå·²æäº¤</span>
    }
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">validateActive</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">if</span> (committed_) {
            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">logic_error</span>(<span class="hljs-string">"äº‹åŠ¡å·²æäº¤ï¼Œä¸èƒ½ç»§ç»­æ“ä½œ"</span>);
        }
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">rollbackIfNeeded</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (!committed_) {
            std::cout &lt;&lt; <span class="hljs-string">"å›æ»šäº‹åŠ¡"</span> &lt;&lt; std::endl;
            <span class="hljs-comment">// å®é™…å›æ»šé€»è¾‘...</span>
        }
    }
    
    <span class="hljs-type">bool</span> committed_;
};

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">demonstrate_exception_safety</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// å¼ºå¼‚å¸¸å®‰å…¨çš„å®¹å™¨ä½¿ç”¨</span>
    SafeVector&lt;<span class="hljs-type">int</span>&gt; numbers;
    
    <span class="hljs-keyword">try</span> {
        numbers.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">1</span>);
        numbers.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">2</span>);
        numbers.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">3</span>);
        
        <span class="hljs-comment">// å³ä½¿è¿™é‡ŒæŠ›å‡ºå¼‚å¸¸ï¼Œnumbersä»ä¿æŒæœ‰æ•ˆçŠ¶æ€</span>
        numbers.<span class="hljs-built_in">erase</span>(<span class="hljs-number">1</span>);
        
        std::cout &lt;&lt; <span class="hljs-string">"å®¹å™¨å†…å®¹: "</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; num : numbers) {
            std::cout &lt;&lt; num &lt;&lt; <span class="hljs-string">" "</span>;
        }
        std::cout &lt;&lt; std::endl;
        
    } <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> std::exception&amp; e) {
        std::cout &lt;&lt; <span class="hljs-string">"æ“ä½œå¤±è´¥: "</span> &lt;&lt; e.<span class="hljs-built_in">what</span>() &lt;&lt; std::endl;
        <span class="hljs-comment">// numbersä»ç„¶å¤„äºä¸€è‡´çŠ¶æ€ï¼</span>
    }
    
    <span class="hljs-comment">// å¼‚å¸¸å®‰å…¨çš„æ•°æ®åº“äº‹åŠ¡</span>
    <span class="hljs-keyword">try</span> {
        <span class="hljs-function">DatabaseTransaction <span class="hljs-title">tx</span><span class="hljs-params">(<span class="hljs-string">"test.db"</span>)</span></span>;
        
        tx.<span class="hljs-built_in">execute</span>(<span class="hljs-string">"INSERT INTO users VALUES (1, 'Alice')"</span>);
        tx.<span class="hljs-built_in">execute</span>(<span class="hljs-string">"UPDATE stats SET count = count + 1"</span>);
        
        <span class="hljs-comment">// å¦‚æœæäº¤å¤±è´¥ï¼Œææ„å‡½æ•°ä¼šè‡ªåŠ¨å›æ»š</span>
        tx.<span class="hljs-built_in">commit</span>();
        std::cout &lt;&lt; <span class="hljs-string">"äº‹åŠ¡æäº¤æˆåŠŸ"</span> &lt;&lt; std::endl;
        
    } <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> std::exception&amp; e) {
        std::cout &lt;&lt; <span class="hljs-string">"äº‹åŠ¡å¤±è´¥: "</span> &lt;&lt; e.<span class="hljs-built_in">what</span>() &lt;&lt; std::endl;
        <span class="hljs-comment">// ä¸éœ€è¦æ‰‹åŠ¨å›æ»š - RAIIå¤„ç†äº†ï¼</span>
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-18"><strong>ç°ä»£C++ç‰¹æ€§é›†æˆ</strong></h3>
<h4 data-id="heading-19"><strong>1. constexprä¸ç¼–è¯‘æœŸè®¡ç®—</strong></h4>
<p><strong>ç¼–è¯‘æœŸå‹å¥½çš„ç±»å‹è®¾è®¡ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;array&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;type_traits&gt;</span></span>

<span class="hljs-comment">// ç¼–è¯‘æœŸæœ‰ç†æ•°ç±»å‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Rational</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// constexpræ„é€ å‡½æ•°</span>
    <span class="hljs-function"><span class="hljs-keyword">constexpr</span> <span class="hljs-title">Rational</span><span class="hljs-params">(<span class="hljs-type">int</span> numerator = <span class="hljs-number">0</span>, <span class="hljs-type">int</span> denominator = <span class="hljs-number">1</span>)</span> 
        : num_(numerator), den_(denominator) {</span>
        <span class="hljs-keyword">if</span> (denominator == <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-string">"åˆ†æ¯ä¸èƒ½ä¸ºé›¶"</span>;  <span class="hljs-comment">// åœ¨ç¼–è¯‘æœŸä¼šå¯¼è‡´é”™è¯¯</span>
        }
        <span class="hljs-built_in">normalize</span>();
    }
    
    <span class="hljs-comment">// constexprè®¿é—®å™¨</span>
    <span class="hljs-function"><span class="hljs-keyword">constexpr</span> <span class="hljs-type">int</span> <span class="hljs-title">numerator</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">noexcept</span> </span>{ <span class="hljs-keyword">return</span> num_; }
    <span class="hljs-function"><span class="hljs-keyword">constexpr</span> <span class="hljs-type">int</span> <span class="hljs-title">denominator</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">noexcept</span> </span>{ <span class="hljs-keyword">return</span> den_; }
    
    <span class="hljs-comment">// constexprç®—æœ¯è¿ç®—</span>
    <span class="hljs-keyword">constexpr</span> Rational <span class="hljs-keyword">operator</span>+(<span class="hljs-type">const</span> Rational&amp; other) <span class="hljs-type">const</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Rational</span>(
            num_ * other.den_ + other.num_ * den_,
            den_ * other.den_
        );
    }
    
    <span class="hljs-keyword">constexpr</span> Rational <span class="hljs-keyword">operator</span>-(<span class="hljs-type">const</span> Rational&amp; other) <span class="hljs-type">const</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Rational</span>(
            num_ * other.den_ - other.num_ * den_,
            den_ * other.den_
        );
    }
    
    <span class="hljs-keyword">constexpr</span> Rational <span class="hljs-keyword">operator</span>*(<span class="hljs-type">const</span> Rational&amp; other) <span class="hljs-type">const</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Rational</span>(num_ * other.num_, den_ * other.den_);
    }
    
    <span class="hljs-keyword">constexpr</span> Rational <span class="hljs-keyword">operator</span>/(<span class="hljs-type">const</span> Rational&amp; other) <span class="hljs-type">const</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Rational</span>(num_ * other.den_, den_ * other.num_);
    }
    
    <span class="hljs-comment">// constexpræ¯”è¾ƒè¿ç®—ç¬¦</span>
    <span class="hljs-keyword">constexpr</span> <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>==(<span class="hljs-type">const</span> Rational&amp; other) <span class="hljs-type">const</span> {
        <span class="hljs-keyword">return</span> num_ * other.den_ == other.num_ * den_;
    }
    
    <span class="hljs-keyword">constexpr</span> <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>!=(<span class="hljs-type">const</span> Rational&amp; other) <span class="hljs-type">const</span> {
        <span class="hljs-keyword">return</span> !(*<span class="hljs-keyword">this</span> == other);
    }
    
    <span class="hljs-comment">// è½¬æ¢åˆ°double - constexpr</span>
    <span class="hljs-function"><span class="hljs-keyword">constexpr</span> <span class="hljs-type">double</span> <span class="hljs-title">toDouble</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">double</span>&gt;(num_) / den_;
    }
    
    <span class="hljs-comment">// ç¼–è¯‘æœŸè®¡ç®—çš„æœ€å¤§å…¬çº¦æ•°</span>
    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-type">int</span> <span class="hljs-title">gcd</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>{
        <span class="hljs-keyword">return</span> b == <span class="hljs-number">0</span> ? a : <span class="hljs-built_in">gcd</span>(b, a % b);
    }
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-function"><span class="hljs-keyword">constexpr</span> <span class="hljs-type">void</span> <span class="hljs-title">normalize</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (den_ &lt; <span class="hljs-number">0</span>) {
            num_ = -num_;
            den_ = -den_;
        }
        <span class="hljs-type">int</span> g = <span class="hljs-built_in">gcd</span>(num_ &lt; <span class="hljs-number">0</span> ? -num_ : num_, den_);
        num_ /= g;
        den_ /= g;
    }
    
    <span class="hljs-type">int</span> num_;
    <span class="hljs-type">int</span> den_;
};

<span class="hljs-comment">// ç¼–è¯‘æœŸè®¡ç®—çš„æ•°å­¦å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">constexpr</span> T <span class="hljs-title">compileTimePower</span><span class="hljs-params">(T base, <span class="hljs-type">int</span> exp)</span> </span>{
    <span class="hljs-built_in">static_assert</span>(std::is_arithmetic_v&lt;T&gt;, <span class="hljs-string">"å¿…é¡»æ˜¯ç®—æœ¯ç±»å‹"</span>);
    
    <span class="hljs-keyword">if</span> (exp &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">T</span>(<span class="hljs-number">1</span>) / <span class="hljs-built_in">compileTimePower</span>(base, -exp);
    }
    
    T result = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">while</span> (exp &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">if</span> (exp % <span class="hljs-number">2</span> == <span class="hljs-number">1</span>) {
            result *= base;
        }
        base *= base;
        exp /= <span class="hljs-number">2</span>;
    }
    <span class="hljs-keyword">return</span> result;
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">demonstrate_constexpr_design</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// ç¼–è¯‘æœŸè®¡ç®—</span>
    <span class="hljs-function"><span class="hljs-keyword">constexpr</span> Rational <span class="hljs-title">r1</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">constexpr</span> Rational <span class="hljs-title">r2</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>)</span></span>;
    <span class="hljs-keyword">constexpr</span> Rational sum = r1 + r2;  <span class="hljs-comment">// 5/6</span>
    
    <span class="hljs-keyword">constexpr</span> <span class="hljs-type">double</span> result = sum.<span class="hljs-built_in">toDouble</span>();
    std::cout &lt;&lt; <span class="hljs-string">"1/2 + 1/3 = "</span> &lt;&lt; result &lt;&lt; std::endl;
    
    <span class="hljs-comment">// ç¼–è¯‘æœŸå¹‚è®¡ç®—</span>
    <span class="hljs-keyword">constexpr</span> <span class="hljs-type">int</span> square = <span class="hljs-built_in">compileTimePower</span>(<span class="hljs-number">5</span>, <span class="hljs-number">2</span>);  <span class="hljs-comment">// 25</span>
    <span class="hljs-keyword">constexpr</span> <span class="hljs-type">double</span> cube = <span class="hljs-built_in">compileTimePower</span>(<span class="hljs-number">2.0</span>, <span class="hljs-number">3</span>);  <span class="hljs-comment">// 8.0</span>
    
    std::cout &lt;&lt; <span class="hljs-string">"5^2 = "</span> &lt;&lt; square &lt;&lt; <span class="hljs-string">", 2.0^3 = "</span> &lt;&lt; cube &lt;&lt; std::endl;
    
    <span class="hljs-comment">// åœ¨ç¼–è¯‘æœŸæ•°ç»„ä¸­ä½¿ç”¨</span>
    <span class="hljs-keyword">constexpr</span> std::array&lt;Rational, 3&gt; fractions = {
        <span class="hljs-built_in">Rational</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>),
        <span class="hljs-built_in">Rational</span>(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>), 
        <span class="hljs-built_in">Rational</span>(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)
    };
    
    <span class="hljs-built_in">static_assert</span>(fractions[<span class="hljs-number">0</span>].<span class="hljs-built_in">numerator</span>() == <span class="hljs-number">1</span>);
    <span class="hljs-built_in">static_assert</span>(fractions[<span class="hljs-number">0</span>].<span class="hljs-built_in">denominator</span>() == <span class="hljs-number">2</span>);
    
    std::cout &lt;&lt; <span class="hljs-string">"ç¼–è¯‘æœŸåˆ†æ•°æ•°ç»„: "</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; frac : fractions) {
        std::cout &lt;&lt; frac.<span class="hljs-built_in">numerator</span>() &lt;&lt; <span class="hljs-string">"/"</span> &lt;&lt; frac.<span class="hljs-built_in">denominator</span>() &lt;&lt; <span class="hljs-string">" "</span>;
    }
    std::cout &lt;&lt; std::endl;
    
    <span class="hljs-comment">// è¿è¡Œæ—¶ä½¿ç”¨åŒæ ·çš„æ¥å£</span>
    <span class="hljs-function">Rational <span class="hljs-title">a</span><span class="hljs-params">(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>)</span>, <span class="hljs-title">b</span><span class="hljs-params">(<span class="hljs-number">2</span>, <span class="hljs-number">7</span>)</span></span>;
    <span class="hljs-keyword">auto</span> c = a * b;
    std::cout &lt;&lt; <span class="hljs-string">"3/5 * 2/7 = "</span> &lt;&lt; c.<span class="hljs-built_in">numerator</span>() 
              &lt;&lt; <span class="hljs-string">"/"</span> &lt;&lt; c.<span class="hljs-built_in">denominator</span>() &lt;&lt; std::endl;
}
</code></pre>
<hr/>
<h3 data-id="heading-20"><strong>å®æˆ˜æ¡ˆä¾‹ï¼šçœŸå®ä¸–ç•Œç±»è®¾è®¡</strong></h3>
<h4 data-id="heading-21"><strong>æ¡ˆä¾‹1ï¼šçº¿ç¨‹å®‰å…¨çš„è§‚å¯Ÿè€…æ¨¡å¼</strong></h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;mutex&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;functional&gt;</span></span>

<span class="hljs-comment">// çº¿ç¨‹å®‰å…¨çš„è§‚å¯Ÿè€…æ¨¡å¼</span>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span>... Args&gt;
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Observable</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">using</span> Observer = std::function&lt;<span class="hljs-built_in">void</span>(Args...)&gt;;
    <span class="hljs-keyword">using</span> ObserverId = <span class="hljs-type">size_t</span>;
    
    <span class="hljs-built_in">Observable</span>() = <span class="hljs-keyword">default</span>;
    
    <span class="hljs-comment">// ç¦æ­¢æ‹·è´ï¼ˆç§»åŠ¨å…è®¸ï¼‰</span>
    <span class="hljs-built_in">Observable</span>(<span class="hljs-type">const</span> Observable&amp;) = <span class="hljs-keyword">delete</span>;
    Observable&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> Observable&amp;) = <span class="hljs-keyword">delete</span>;
    
    <span class="hljs-comment">// æ³¨å†Œè§‚å¯Ÿè€…ï¼Œè¿”å›å¯ç”¨äºå–æ¶ˆæ³¨å†Œçš„ID</span>
    <span class="hljs-function">ObserverId <span class="hljs-title">registerObserver</span><span class="hljs-params">(Observer observer)</span> </span>{
        <span class="hljs-function">std::lock_guard&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mutex_)</span></span>;
        ObserverId id = nextId_++;
        observers_.<span class="hljs-built_in">emplace_back</span>(id, std::<span class="hljs-built_in">move</span>(observer));
        <span class="hljs-keyword">return</span> id;
    }
    
    <span class="hljs-comment">// å–æ¶ˆæ³¨å†Œè§‚å¯Ÿè€…</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">unregisterObserver</span><span class="hljs-params">(ObserverId id)</span> </span>{
        <span class="hljs-function">std::lock_guard&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mutex_)</span></span>;
        observers_.<span class="hljs-built_in">erase</span>(
            std::<span class="hljs-built_in">remove_if</span>(observers_.<span class="hljs-built_in">begin</span>(), observers_.<span class="hljs-built_in">end</span>(),
                [id](<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; item) { <span class="hljs-keyword">return</span> item.first == id; }),
            observers_.<span class="hljs-built_in">end</span>()
        );
    }
    
    <span class="hljs-comment">// é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">notify</span><span class="hljs-params">(Args... args)</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-comment">// æ‹·è´è§‚å¯Ÿè€…åˆ—è¡¨ä»¥é¿å…æ­»é”</span>
        <span class="hljs-keyword">auto</span> observersCopy = <span class="hljs-built_in">getObserversCopy</span>();
        
        <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; [id, observer] : observersCopy) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-built_in">observer</span>(args...);
            } <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> std::exception&amp; e) {
                <span class="hljs-comment">// è§‚å¯Ÿè€…å¼‚å¸¸ä¸åº”è¯¥å½±å“å…¶ä»–è§‚å¯Ÿè€…</span>
                std::cerr &lt;&lt; <span class="hljs-string">"è§‚å¯Ÿè€… "</span> &lt;&lt; id &lt;&lt; <span class="hljs-string">" å¼‚å¸¸: "</span> &lt;&lt; e.<span class="hljs-built_in">what</span>() &lt;&lt; std::endl;
            }
        }
    }
    
    <span class="hljs-comment">// è§‚å¯Ÿè€…æ•°é‡</span>
    <span class="hljs-function"><span class="hljs-type">size_t</span> <span class="hljs-title">observerCount</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-function">std::lock_guard&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mutex_)</span></span>;
        <span class="hljs-keyword">return</span> observers_.<span class="hljs-built_in">size</span>();
    }
    
<span class="hljs-keyword">private</span>:
    std::vector&lt;std::pair&lt;ObserverId, Observer&gt;&gt; <span class="hljs-built_in">getObserversCopy</span>() <span class="hljs-type">const</span> {
        <span class="hljs-function">std::lock_guard&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mutex_)</span></span>;
        <span class="hljs-keyword">return</span> observers_;
    }
    
    <span class="hljs-keyword">mutable</span> std::mutex mutex_;
    std::vector&lt;std::pair&lt;ObserverId, Observer&gt;&gt; observers_;
    ObserverId nextId_ = <span class="hljs-number">1</span>;
};

<span class="hljs-comment">// ä½¿ç”¨è§‚å¯Ÿè€…çš„æ¸©åº¦ä¼ æ„Ÿå™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TemperatureSensor</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">using</span> TemperatureObserver = Observable&lt;<span class="hljs-type">double</span>&gt;;
    
    <span class="hljs-built_in">TemperatureSensor</span>() = <span class="hljs-keyword">default</span>;
    
    <span class="hljs-comment">// æ³¨å†Œæ¸©åº¦è§‚å¯Ÿè€…</span>
    <span class="hljs-function">TemperatureObserver::ObserverId 
    <span class="hljs-title">registerTemperatureObserver</span><span class="hljs-params">(TemperatureObserver::Observer observer)</span> </span>{
        <span class="hljs-keyword">return</span> temperatureObservable_.<span class="hljs-built_in">registerObserver</span>(std::<span class="hljs-built_in">move</span>(observer));
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">unregisterTemperatureObserver</span><span class="hljs-params">(TemperatureObserver::ObserverId id)</span> </span>{
        temperatureObservable_.<span class="hljs-built_in">unregisterObserver</span>(id);
    }
    
    <span class="hljs-comment">// æ›´æ–°æ¸©åº¦å¹¶é€šçŸ¥è§‚å¯Ÿè€…</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">updateTemperature</span><span class="hljs-params">(<span class="hljs-type">double</span> temperature)</span> </span>{
        currentTemperature_ = temperature;
        temperatureObservable_.<span class="hljs-built_in">notify</span>(temperature);
    }
    
    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">getCurrentTemperature</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> currentTemperature_; }
    
<span class="hljs-keyword">private</span>:
    TemperatureObserver temperatureObservable_;
    <span class="hljs-type">double</span> currentTemperature_ = <span class="hljs-number">0.0</span>;
};

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">demonstrate_observer_pattern</span><span class="hljs-params">()</span> </span>{
    TemperatureSensor sensor;
    
    <span class="hljs-comment">// æ³¨å†Œå¤šä¸ªè§‚å¯Ÿè€…</span>
    <span class="hljs-keyword">auto</span> id1 = sensor.<span class="hljs-built_in">registerTemperatureObserver</span>([](<span class="hljs-type">double</span> temp) {
        std::cout &lt;&lt; <span class="hljs-string">"è§‚å¯Ÿè€…1: æ¸©åº¦æ›´æ–°ä¸º "</span> &lt;&lt; temp &lt;&lt; <span class="hljs-string">"Â°C"</span> &lt;&lt; std::endl;
    });
    
    <span class="hljs-keyword">auto</span> id2 = sensor.<span class="hljs-built_in">registerTemperatureObserver</span>([](<span class="hljs-type">double</span> temp) {
        <span class="hljs-keyword">if</span> (temp &gt; <span class="hljs-number">30.0</span>) {
            std::cout &lt;&lt; <span class="hljs-string">"è§‚å¯Ÿè€…2: è­¦å‘Šï¼æ¸©åº¦è¿‡é«˜: "</span> &lt;&lt; temp &lt;&lt; <span class="hljs-string">"Â°C"</span> &lt;&lt; std::endl;
        }
    });
    
    <span class="hljs-comment">// æ¨¡æ‹Ÿæ¸©åº¦æ›´æ–°</span>
    sensor.<span class="hljs-built_in">updateTemperature</span>(<span class="hljs-number">25.5</span>);
    sensor.<span class="hljs-built_in">updateTemperature</span>(<span class="hljs-number">32.1</span>);
    
    std::cout &lt;&lt; <span class="hljs-string">"å½“å‰è§‚å¯Ÿè€…æ•°é‡: "</span> &lt;&lt; sensor.<span class="hljs-built_in">observerCount</span>() &lt;&lt; std::endl;
    
    <span class="hljs-comment">// å–æ¶ˆæ³¨å†Œä¸€ä¸ªè§‚å¯Ÿè€…</span>
    sensor.<span class="hljs-built_in">unregisterTemperatureObserver</span>(id1);
    sensor.<span class="hljs-built_in">updateTemperature</span>(<span class="hljs-number">28.0</span>);
    
    std::cout &lt;&lt; <span class="hljs-string">"å–æ¶ˆæ³¨å†Œåè§‚å¯Ÿè€…æ•°é‡: "</span> &lt;&lt; sensor.<span class="hljs-built_in">observerCount</span>() &lt;&lt; std::endl;
}
</code></pre>
<h4 data-id="heading-22"><strong>æ¡ˆä¾‹2ï¼šç­–ç•¥æ¨¡å¼ä¸ç±»å‹æ“¦é™¤</strong></h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;type_traits&gt;</span></span>

<span class="hljs-comment">// ç±»å‹æ“¦é™¤çš„ç»˜åˆ¶ç­–ç•¥</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">DrawStrategy</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
    <span class="hljs-title">DrawStrategy</span><span class="hljs-params">(T&amp;&amp; strategy)</span> 
        : pImpl_(std::make_unique&lt;Model&lt;T&gt;&gt;(std::forward&lt;T&gt;(strategy))) 
    {</span>}
    
    <span class="hljs-comment">// é»˜è®¤æ“ä½œ</span>
    <span class="hljs-built_in">DrawStrategy</span>() = <span class="hljs-keyword">default</span>;
    <span class="hljs-built_in">DrawStrategy</span>(DrawStrategy&amp;&amp;) = <span class="hljs-keyword">default</span>;
    DrawStrategy&amp; <span class="hljs-keyword">operator</span>=(DrawStrategy&amp;&amp;) = <span class="hljs-keyword">default</span>;
    
    <span class="hljs-comment">// ç¦æ­¢æ‹·è´</span>
    <span class="hljs-built_in">DrawStrategy</span>(<span class="hljs-type">const</span> DrawStrategy&amp;) = <span class="hljs-keyword">delete</span>;
    DrawStrategy&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> DrawStrategy&amp;) = <span class="hljs-keyword">delete</span>;
    
    <span class="hljs-comment">// ç»˜åˆ¶æ“ä½œ</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">draw</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y, <span class="hljs-type">int</span> width, <span class="hljs-type">int</span> height)</span> <span class="hljs-type">const</span> </span>{
        pImpl_-&gt;<span class="hljs-built_in">draw</span>(x, y, width, height);
    }
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Concept</span> {
        <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">Concept</span>() = <span class="hljs-keyword">default</span>;
        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">draw</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y, <span class="hljs-type">int</span> width, <span class="hljs-type">int</span> height)</span> <span class="hljs-type">const</span> </span>= <span class="hljs-number">0</span>;
    };
    
    <span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Model</span> : Concept {
        <span class="hljs-built_in">Model</span>(T&amp;&amp; strategy) : <span class="hljs-built_in">strategy_</span>(std::forward&lt;T&gt;(strategy)) {}
        
        <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">draw</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y, <span class="hljs-type">int</span> width, <span class="hljs-type">int</span> height)</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{
            strategy_.<span class="hljs-built_in">draw</span>(x, y, width, height);
        }
        
        T strategy_;
    };
    
    std::unique_ptr&lt;Concept&gt; pImpl_;
};

<span class="hljs-comment">// å…·ä½“çš„ç»˜åˆ¶ç­–ç•¥</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SolidDrawStrategy</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">draw</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y, <span class="hljs-type">int</span> width, <span class="hljs-type">int</span> height)</span> <span class="hljs-type">const</span> </span>{
        std::cout &lt;&lt; <span class="hljs-string">"å®å¿ƒç»˜åˆ¶: ä½ç½®("</span> &lt;&lt; x &lt;&lt; <span class="hljs-string">","</span> &lt;&lt; y 
                  &lt;&lt; <span class="hljs-string">"), å¤§å°("</span> &lt;&lt; width &lt;&lt; <span class="hljs-string">"x"</span> &lt;&lt; height &lt;&lt; <span class="hljs-string">")"</span> &lt;&lt; std::endl;
    }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">BorderDrawStrategy</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">draw</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y, <span class="hljs-type">int</span> width, <span class="hljs-type">int</span> height)</span> <span class="hljs-type">const</span> </span>{
        std::cout &lt;&lt; <span class="hljs-string">"è¾¹æ¡†ç»˜åˆ¶: ä½ç½®("</span> &lt;&lt; x &lt;&lt; <span class="hljs-string">","</span> &lt;&lt; y 
                  &lt;&lt; <span class="hljs-string">"), å¤§å°("</span> &lt;&lt; width &lt;&lt; <span class="hljs-string">"x"</span> &lt;&lt; height &lt;&lt; <span class="hljs-string">")"</span> &lt;&lt; std::endl;
    }
};

<span class="hljs-comment">// ä½¿ç”¨ç­–ç•¥æ¨¡å¼çš„å›¾å½¢ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Shape</span>(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y, <span class="hljs-type">int</span> width, <span class="hljs-type">int</span> height, DrawStrategy drawer)
        : <span class="hljs-built_in">x_</span>(x), <span class="hljs-built_in">y_</span>(y), <span class="hljs-built_in">width_</span>(width), <span class="hljs-built_in">height_</span>(height)
        , <span class="hljs-built_in">drawer_</span>(std::<span class="hljs-built_in">move</span>(drawer))
    {}
    
    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">Shape</span>() = <span class="hljs-keyword">default</span>;
    
    <span class="hljs-comment">// ç»˜åˆ¶æ“ä½œ</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">draw</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        drawer_.<span class="hljs-built_in">draw</span>(x_, y_, width_, height_);
    }
    
    <span class="hljs-comment">// ç§»åŠ¨å’Œä½ç½®æ“ä½œ</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">move</span><span class="hljs-params">(<span class="hljs-type">int</span> dx, <span class="hljs-type">int</span> dy)</span> </span>{
        x_ += dx;
        y_ += dy;
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setPosition</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> </span>{
        x_ = x;
        y_ = y;
    }
    
    <span class="hljs-comment">// è®¿é—®å™¨</span>
    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getX</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> x_; }
    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getY</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> y_; }
    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getWidth</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> width_; }
    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getHeight</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> height_; }
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">int</span> x_, y_, width_, height_;
    DrawStrategy drawer_;
};

<span class="hljs-comment">// å…·ä½“çš„å›¾å½¢ç±»å‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span> : <span class="hljs-keyword">public</span> Shape {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Rectangle</span>(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y, <span class="hljs-type">int</span> width, <span class="hljs-type">int</span> height, DrawStrategy drawer)
        : <span class="hljs-built_in">Shape</span>(x, y, width, height, std::<span class="hljs-built_in">move</span>(drawer))
    {}
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">draw</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{
        std::cout &lt;&lt; <span class="hljs-string">"çŸ©å½¢ - "</span>;
        Shape::<span class="hljs-built_in">draw</span>();
    }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> : <span class="hljs-keyword">public</span> Shape {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Circle</span>(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y, <span class="hljs-type">int</span> radius, DrawStrategy drawer)
        : <span class="hljs-built_in">Shape</span>(x, y, radius * <span class="hljs-number">2</span>, radius * <span class="hljs-number">2</span>, std::<span class="hljs-built_in">move</span>(drawer))
        , <span class="hljs-built_in">radius_</span>(radius)
    {}
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">draw</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{
        std::cout &lt;&lt; <span class="hljs-string">"åœ†å½¢(åŠå¾„="</span> &lt;&lt; radius_ &lt;&lt; <span class="hljs-string">") - "</span>;
        Shape::<span class="hljs-built_in">draw</span>();
    }
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">int</span> radius_;
};

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">demonstrate_strategy_pattern</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// åˆ›å»ºä¸åŒçš„ç»˜åˆ¶ç­–ç•¥</span>
    SolidDrawStrategy solidDrawer;
    BorderDrawStrategy borderDrawer;
    
    <span class="hljs-comment">// åˆ›å»ºä½¿ç”¨ä¸åŒç­–ç•¥çš„å›¾å½¢</span>
    <span class="hljs-function">Rectangle <span class="hljs-title">rect1</span><span class="hljs-params">(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>, <span class="hljs-number">100</span>, <span class="hljs-number">50</span>, DrawStrategy(solidDrawer))</span></span>;
    <span class="hljs-function">Rectangle <span class="hljs-title">rect2</span><span class="hljs-params">(<span class="hljs-number">50</span>, <span class="hljs-number">50</span>, <span class="hljs-number">80</span>, <span class="hljs-number">60</span>, DrawStrategy(borderDrawer))</span></span>;
    <span class="hljs-function">Circle <span class="hljs-title">circle</span><span class="hljs-params">(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">25</span>, DrawStrategy(solidDrawer))</span></span>;
    
    <span class="hljs-comment">// ç»˜åˆ¶æ‰€æœ‰å›¾å½¢</span>
    std::vector&lt;std::unique_ptr&lt;Shape&gt;&gt; shapes;
    shapes.<span class="hljs-built_in">push_back</span>(std::<span class="hljs-built_in">make_unique</span>&lt;Rectangle&gt;(rect1));
    shapes.<span class="hljs-built_in">push_back</span>(std::<span class="hljs-built_in">make_unique</span>&lt;Rectangle&gt;(rect2));
    shapes.<span class="hljs-built_in">push_back</span>(std::<span class="hljs-built_in">make_unique</span>&lt;Circle&gt;(circle));
    
    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; shape : shapes) {
        shape-&gt;<span class="hljs-built_in">draw</span>();
    }
    
    <span class="hljs-comment">// è¿è¡Œæ—¶åˆ‡æ¢ç­–ç•¥</span>
    std::cout &lt;&lt; <span class="hljs-string">"\nåˆ‡æ¢ç»˜åˆ¶ç­–ç•¥å:"</span> &lt;&lt; std::endl;
    <span class="hljs-function">Rectangle <span class="hljs-title">dynamicRect</span><span class="hljs-params">(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">200</span>, <span class="hljs-number">100</span>, DrawStrategy(solidDrawer))</span></span>;
    dynamicRect.<span class="hljs-built_in">draw</span>();
    
    <span class="hljs-comment">// åŠ¨æ€æ›´æ¢ç­–ç•¥</span>
    dynamicRect = <span class="hljs-built_in">Rectangle</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">200</span>, <span class="hljs-number">100</span>, <span class="hljs-built_in">DrawStrategy</span>(borderDrawer));
    dynamicRect.<span class="hljs-built_in">draw</span>();
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Databend SQL nom Parser æ€§èƒ½ä¼˜åŒ–]]></title>    <link>https://juejin.cn/post/7572099468247629859</link>    <guid>https://juejin.cn/post/7572099468247629859</guid>    <pubDate>2025-11-14T03:46:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572099468247629859" data-draft-id="7571068689765859368" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Databend SQL nom Parser æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-11-14T03:46:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Databend"/> <meta itemprop="url" content="https://juejin.cn/user/4477651847485534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Databend SQL nom Parser æ€§èƒ½ä¼˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4477651847485534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Databend
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T03:46:19.000Z" title="Fri Nov 14 2025 03:46:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">nom ç®€ä»‹</h2>
<p>nom æ˜¯ Rust ç”Ÿæ€ä¸­éå¸¸å—æ¬¢è¿çš„è§£ææ¡†æ¶ï¼šæ€§èƒ½ä¼˜ç§€ã€ç»„åˆçµæ´»ï¼Œå¹¶ä¸”èƒ½å¾ˆå¥½åœ°åˆ©ç”¨ Rust çš„ç±»å‹ç³»ç»Ÿã€‚Databend åœ¨ SQL è¡¨è¾¾å¼å’Œè¯­å¥è§£æä¸Šå¤§é‡ä½¿ç”¨ nomï¼Œå¼€å‘ä½“éªŒä¸é”™ï¼Œå¯è¯»æ€§ä¹Ÿé«˜ã€‚</p>
<p>ä¸è¿‡ï¼Œç»„åˆå¼ parser å®¹æ˜“åœ¨ä¸ç»æ„é—´åŸ‹ä¸‹æ€§èƒ½éšæ‚£â€”â€”å°¤å…¶æ˜¯å½“å¤šä¸ªåˆ†æ”¯ç»“æ„ç›¸ä¼¼ã€å†åŠ ä¸Šé€’å½’åµŒå¥—æ—¶ï¼Œå›æº¯æˆæœ¬ä¼šæŒ‡æ•°çº§è†¨èƒ€ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">/// ä¸€ä¸ªç®€å•çš„ parserï¼šåŒ¹é… "foo" æˆ– "bar"</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">foo_or_bar</span>(input: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> IResult&lt;&amp;<span class="hljs-type">str</span>, &amp;<span class="hljs-type">str</span>&gt; {
    <span class="hljs-title function_ invoke__">alt</span>((
        <span class="hljs-title function_ invoke__">tag</span>(<span class="hljs-string">"foo"</span>),
        <span class="hljs-title function_ invoke__">tag</span>(<span class="hljs-string">"bar"</span>),
    ))(input)
}
</code></pre>
<h2 data-id="heading-1">é—®é¢˜æ¡ˆä¾‹ï¼šfunction åµŒå¥—æ‹–æ…¢è§£æ</h2>
<p>ä¸€æ¬¡ç”¨æˆ·åé¦ˆé‡Œï¼Œæˆ‘ä»¬æ”¶åˆ°äº†ä¸€æ¡è§£æ 20 åˆ†é’Ÿéƒ½è·‘ä¸å®Œçš„ SQLã€‚ç«ç„°å›¾æ¸…æ¥šåœ°æ˜¾ç¤ºï¼šå‡½æ•°è§£æåå¤å°è¯•ã€å±‚å±‚å›æº¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed580c8a64b84c06a6ad4a11637f19a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGF0YWJlbmQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763696779&amp;x-signature=541M4V9NRlqAMOyVElSPlTWFdvw%3D" alt="1280X1280.JPEG" loading="lazy"/></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">select</span> json_object_insert(
           json_object_insert(
                   json_object_insert(
                           json_object_insert(
                                   json_object_insert(
                                           <span class="hljs-string">'{}'</span>::variant,
                                           <span class="hljs-string">'email_address'</span>, <span class="hljs-string">'gokul'</span>, <span class="hljs-literal">true</span>,
                                           <span class="hljs-string">'home_phone'</span>, <span class="hljs-number">12345</span>, <span class="hljs-literal">true</span>,
                                           <span class="hljs-string">'mobile_phone'</span>, <span class="hljs-number">345678</span>, <span class="hljs-literal">true</span>,
                                           <span class="hljs-string">'race_code'</span>, <span class="hljs-string">'M'</span>, <span class="hljs-literal">true</span>
                                   ),
                                   <span class="hljs-string">'race_desc'</span>, <span class="hljs-string">'m'</span>, <span class="hljs-literal">true</span>,
                                   <span class="hljs-string">'marital_status_code'</span>, <span class="hljs-string">'y'</span>, <span class="hljs-literal">true</span>,
                                   <span class="hljs-string">'marital_status_desc'</span>, <span class="hljs-string">'yu'</span>, <span class="hljs-literal">true</span>,
                                   <span class="hljs-string">'prefix'</span>, <span class="hljs-string">'hj'</span>, <span class="hljs-literal">true</span>
                           ),
                           <span class="hljs-string">'first_name'</span>, <span class="hljs-string">'g'</span>, <span class="hljs-literal">true</span>,
                           <span class="hljs-string">'last_name'</span>, <span class="hljs-string">'p'</span>, <span class="hljs-literal">true</span>,
                           <span class="hljs-string">'deceased_date'</span>, <span class="hljs-string">'2085-05-07'</span>, <span class="hljs-literal">true</span>,
                           <span class="hljs-string">'birth_date'</span>, <span class="hljs-string">'6789'</span>, <span class="hljs-literal">true</span>
                   ),
                   <span class="hljs-string">'middle_name'</span>, <span class="hljs-string">'89'</span>, <span class="hljs-literal">true</span>,
                   <span class="hljs-string">'middle_initial'</span>, <span class="hljs-string">'0789'</span>, <span class="hljs-literal">true</span>,
                   <span class="hljs-string">'gender_code'</span>, <span class="hljs-string">'56789'</span>, <span class="hljs-literal">true</span>,
                   <span class="hljs-string">'gender_desc'</span>, <span class="hljs-string">'m'</span>, <span class="hljs-literal">true</span>
           ),
           <span class="hljs-string">'home_phone_line_type'</span>, <span class="hljs-string">'uyt'</span>, <span class="hljs-literal">true</span>,
           <span class="hljs-string">'mobile_phone_line_type'</span>, <span class="hljs-number">4</span>, <span class="hljs-literal">true</span>
   );
</code></pre>
<p>å½“æ—¶çš„å‡½æ•°è§£æå†™æ³•å¤§è‡´å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">function_call</span> = <span class="hljs-title function_ invoke__">map</span>(
    rule! {
        #function_name
        ~ <span class="hljs-string">"("</span> ~ DISTINCT? ~ #<span class="hljs-title function_ invoke__">comma_separated_list0</span>(<span class="hljs-title function_ invoke__">subexpr</span>(<span class="hljs-number">0</span>))? ~ <span class="hljs-string">")"</span>
    },
    |(name, _, opt_distinct, opt_args, _)| ExprElement::FunctionCall { .. },
);
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">function_call_with_lambda</span> = <span class="hljs-title function_ invoke__">map</span>(
    rule! {
        #function_name
        ~ <span class="hljs-string">"("</span> ~ #<span class="hljs-title function_ invoke__">subexpr</span>(<span class="hljs-number">0</span>) ~ <span class="hljs-string">","</span> ~ #lambda_params ~ <span class="hljs-string">"-&gt;"</span> ~ #<span class="hljs-title function_ invoke__">subexpr</span>(<span class="hljs-number">0</span>) ~ <span class="hljs-string">")"</span>
    },
    |(name, _, arg, _, params, _, expr, _)| ExprElement::FunctionCall { .. },
);
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">function_call_with_window</span> = <span class="hljs-title function_ invoke__">map</span>(
    rule! {
        #function_name
        ~ <span class="hljs-string">"("</span> ~ DISTINCT? ~ #<span class="hljs-title function_ invoke__">comma_separated_list0</span>(<span class="hljs-title function_ invoke__">subexpr</span>(<span class="hljs-number">0</span>))? ~ <span class="hljs-string">")"</span>
        ~ #window_function
    },
    |(name, _, opt_distinct, opt_args, _, window)| ExprElement::FunctionCall { .. },
);
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">function_call_with_within_group_window</span> = <span class="hljs-title function_ invoke__">map</span>(
    rule! {
        #function_name
        ~ <span class="hljs-string">"("</span> ~ DISTINCT? ~ #<span class="hljs-title function_ invoke__">comma_separated_list0</span>(<span class="hljs-title function_ invoke__">subexpr</span>(<span class="hljs-number">0</span>))? ~ <span class="hljs-string">")"</span>
        ~ #within_group
        ~ #window_function?
    },
    |(name, _, opt_distinct, opt_args, _, order_by, window)| ExprElement::FunctionCall { .. },
);
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">function_call_with_params_window</span> = <span class="hljs-title function_ invoke__">map</span>(
    rule! {
        #function_name
        ~ <span class="hljs-string">"("</span> ~ #<span class="hljs-title function_ invoke__">comma_separated_list1</span>(<span class="hljs-title function_ invoke__">subexpr</span>(<span class="hljs-number">0</span>)) ~ <span class="hljs-string">")"</span>
        ~ <span class="hljs-string">"("</span> ~ DISTINCT? ~ #<span class="hljs-title function_ invoke__">comma_separated_list0</span>(<span class="hljs-title function_ invoke__">subexpr</span>(<span class="hljs-number">0</span>))? ~ <span class="hljs-string">")"</span>
        ~ #window_function?
    },
    |(name, _, params, _, _, opt_distinct, opt_args, _, window)| ExprElement::FunctionCall { .. },
);

rule! {
    #function_call_with_lambda : <span class="hljs-string">"`function(..., x -&gt; ...)`"</span>
    | #function_call_with_window : <span class="hljs-string">"`function(...) OVER ([ PARTITION BY &lt;expr&gt;, ... ] [ ORDER BY &lt;expr&gt;, ... ] [ &lt;window frame&gt; ])`"</span>
    | #function_call_with_within_group_window: <span class="hljs-string">"`function(...) [ WITHIN GROUP ( ORDER BY &lt;expr&gt;, ... ) ] OVER ([ PARTITION BY &lt;expr&gt;, ... ] [ ORDER BY &lt;expr&gt;, ... ] [ &lt;window frame&gt; ])`"</span>
    | #function_call_with_params_window : <span class="hljs-string">"`function(...)(...) OVER ([ PARTITION BY &lt;expr&gt;, ... ] [ ORDER BY &lt;expr&gt;, ... ] [ &lt;window frame&gt; ])`"</span>
    | #function_call : <span class="hljs-string">"`function(...)`"</span>
}
</code></pre>
<p>è¿™æ®µä»£ç å¯¹é˜…è¯»è€…éå¸¸å‹å¥½ï¼Œä½†ä¹Ÿæœ‰ä¸¤ä¸ªç‰¹å¾ï¼š</p>
<ul>
<li>æ‰€æœ‰åˆ†æ”¯éƒ½ä»¥ <code>function(...)</code> èµ·æ‰‹ï¼›</li>
<li>æ·±åº¦ä¼˜å…ˆçš„ <code>alt</code> æ¯æ¬¡åŒ¹é…å¤±è´¥éƒ½ä¼šå›æº¯åˆ°ä¸‹ä¸€ä¸ªåˆ†æ”¯ã€‚</li>
</ul>
<p>åœ¨ä¸Šé¢è¿™ç§äº”å±‚åµŒå¥—ã€æ¯å±‚æ¨¡å¼æ•°é‡ä¸º 5 çš„åœºæ™¯é‡Œï¼Œæœ€å¸¸è§çš„ â€œçº¯å‡½æ•°è°ƒç”¨â€ åˆ†æ”¯æ”¾åœ¨æœ€åï¼Œå®é™…è¦å°è¯• <code>5^5 = 3125</code> æ¬¡æ‰èƒ½å‘½ä¸­ã€‚å¤æ‚åº¦é£™å‡åˆ° <code>O(m^n)</code>ï¼Œæ€§èƒ½ç«‹åˆ»å´©æ‰ã€‚</p>
<h2 data-id="heading-2">ä¼˜åŒ–æ–¹æ¡ˆä¸€ï¼šæŠ˜å ç›¸ä¼¼åˆ†æ”¯ï¼Œé¿å…æŒ‡æ•°çº§å›æº¯</h2>
<p>é—®é¢˜æ ¹æºæ˜¯â€œç»“æ„é«˜åº¦ç›¸ä¼¼ + é€’å½’ + æ·±åº¦ä¼˜å…ˆå›æº¯â€ã€‚æˆ‘ä»¬æŠŠå¤šä¸ªåˆ†æ”¯æŠ˜å æˆä¸€æ¬¡è§£æï¼Œå†æ ¹æ®åŒ¹é…åˆ°çš„åç¼€æ¥å†³å®šå…·ä½“çš„å‡½æ•°ç±»å‹ï¼Œç›¸å½“äºæŠŠæµç¨‹å˜æˆäº†â€œå…ˆæ•´ä½“åŒ¹é…ï¼Œå†åˆ†ç±»å¤„ç†â€çš„å¹¿åº¦ä¼˜å…ˆæ€è·¯ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">function_call_body</span> = <span class="hljs-title function_ invoke__">map_res</span>(
    rule! {
        <span class="hljs-string">"("</span> ~ DISTINCT? ~ #<span class="hljs-title function_ invoke__">subexpr</span>(<span class="hljs-number">0</span>)? ~ <span class="hljs-string">","</span>? ~ (#lambda_params ~ <span class="hljs-string">"-&gt;"</span> ~ #<span class="hljs-title function_ invoke__">subexpr</span>(<span class="hljs-number">0</span>))? ~ #<span class="hljs-title function_ invoke__">comma_separated_list1</span>(<span class="hljs-title function_ invoke__">subexpr</span>(<span class="hljs-number">0</span>))? ~ <span class="hljs-string">")"</span>
        ~ (<span class="hljs-string">"("</span> ~ DISTINCT? ~ #<span class="hljs-title function_ invoke__">comma_separated_list0</span>(<span class="hljs-title function_ invoke__">subexpr</span>(<span class="hljs-number">0</span>))? ~ <span class="hljs-string">")"</span>)?
        ~ #within_group?
        ~ #window_function?
    },
    |(
        _,
        opt_distinct_0,
        first_param,
        _,
        opt_lambda,
        params_0,
        _,
        params_1,
        order_by,
        window,
    )| {
        <span class="hljs-title function_ invoke__">match</span> (
            first_param,
            opt_lambda,
            opt_distinct_0,
            params_0,
            params_1,
            order_by,
            window,
        ) {
            (
                <span class="hljs-title function_ invoke__">Some</span>(first_param),
                <span class="hljs-title function_ invoke__">Some</span>((lambda_params, _, arg_1)),
                <span class="hljs-literal">None</span>,
                <span class="hljs-literal">None</span>,
                <span class="hljs-literal">None</span>,
                <span class="hljs-literal">None</span>,
                <span class="hljs-literal">None</span>,
            ) =&gt; <span class="hljs-title function_ invoke__">Ok</span>(FunctionCallSuffix::Lambda { .. }),
            (
                <span class="hljs-title function_ invoke__">Some</span>(first_param),
                <span class="hljs-literal">None</span>,
                <span class="hljs-literal">None</span>,
                params_0,
                <span class="hljs-title function_ invoke__">Some</span>((_, opt_distinct_1, params_1, _)),
                <span class="hljs-literal">None</span>,
                window,
            ) =&gt; <span class="hljs-title function_ invoke__">Ok</span>(FunctionCallSuffix::ParamsWindow { .. }),
            (first_param, <span class="hljs-literal">None</span>, opt_distinct, params, <span class="hljs-literal">None</span>, <span class="hljs-title function_ invoke__">Some</span>(order_by), window) =&gt; {
                <span class="hljs-title function_ invoke__">Ok</span>(FunctionCallSuffix::WithInGroupWindow { .. })
            }
            (first_param, <span class="hljs-literal">None</span>, opt_distinct, params, <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span>, <span class="hljs-title function_ invoke__">Some</span>(window)) =&gt; {
                <span class="hljs-title function_ invoke__">Ok</span>(FunctionCallSuffix::Window { .. })
            }
            (first_param, <span class="hljs-literal">None</span>, opt_distinct, params, <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span>) =&gt; {
                <span class="hljs-title function_ invoke__">Ok</span>(FunctionCallSuffix::Simple { .. })
            }
            _ =&gt; <span class="hljs-title function_ invoke__">Err</span>(nom::Err::<span class="hljs-title function_ invoke__">Error</span>(ErrorKind::<span class="hljs-title function_ invoke__">Other</span>(
                <span class="hljs-string">"Unsupported function format"</span>,
            ))),
        }
    },
);
</code></pre>
<p>ä¸€æ¬¡è§£æå®Œæˆæ‰€æœ‰ç»“æ„åŒ¹é…ï¼Œå†æ ¹æ®åˆ†æ”¯ç±»å‹è£…é…ç»“æœï¼Œç›´æ¥æ¶ˆé™¤äº†æŒ‡æ•°çº§å›æº¯ã€‚è¯¥ä¼˜åŒ–è½åœ°åï¼ŒåŸå…ˆéœ€è¦å‡ ååˆ†é’Ÿçš„ SQL å¦‚ä»Šåªè¦å‡ åæ¯«ç§’ã€‚</p>
<h2 data-id="heading-3">ä¼˜åŒ–æ–¹æ¡ˆäºŒï¼šé«˜é¢‘ Token è§£æç›´æ¥ hard code</h2>
<p>function å›æº¯é—®é¢˜è§£å†³åï¼Œæˆ‘ä»¬åˆåœ¨è¡¨è¾¾å¼è§£æä¸ŠæŠ“åˆ°äº†ç¬¬äºŒä¸ªçƒ­ç‚¹ï¼š<code>Binary/Unary/Json Operator</code> ç­‰ç®€å• token è¢«é¢‘ç¹å‘½ä¸­ï¼Œè€ŒåŸå…ˆçš„å®ç°æ˜¯ <code>alt + value + rule!</code> çš„ç»„åˆã€‚è¿™ä¸ªç»„åˆæ¯æ¬¡è°ƒç”¨éƒ½è¦ï¼š</p>
<ul>
<li>æ„é€ é—­åŒ…ï¼›</li>
<li>åŒ…è£…é”™è¯¯ä¿¡æ¯ï¼›</li>
<li>æ„å»ºè¿”å›å€¼ï¼›</li>
<li>å†è¿›å…¥ä¸‹ä¸€å±‚ parserã€‚</li>
</ul>
<p>å¯¹äºå‡ ä¹åªåŒ…å«å•ä¸ª token çš„åœºæ™¯ï¼Œç›´æ¥æ‰‹å†™åŒ¹é…ä¼šå¿«å¾—å¤šã€‚Databend çš„ <code>expr</code> æœ‰ 49 ä¸ªåˆ†æ”¯ï¼Œçƒ­åº¦éå¸¸é«˜ï¼ŒæŠŠè¿™äº›åˆ†æ”¯ hard code æ‰æ”¶ç›Šæå¯è§‚ã€‚ä»¥ä¸‹æ˜¯ <code>json_op</code> æ›¿æ¢å‰åçš„å®ç°ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// åŸå®ç°ï¼šalt + rule!</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">json_op</span>(i: Input) <span class="hljs-punctuation">-&gt;</span> IResult&lt;JsonOperator&gt; {
    <span class="hljs-title function_ invoke__">alt</span>((
        <span class="hljs-title function_ invoke__">value</span>(JsonOperator::Arrow, rule! { <span class="hljs-string">"-&gt;"</span> }),
        <span class="hljs-title function_ invoke__">value</span>(JsonOperator::LongArrow, rule! { <span class="hljs-string">"-&gt;&gt;"</span> }),
        <span class="hljs-title function_ invoke__">value</span>(JsonOperator::HashArrow, rule! { <span class="hljs-string">"#&gt;"</span> }),
        <span class="hljs-title function_ invoke__">value</span>(JsonOperator::HashLongArrow, rule! { <span class="hljs-string">"#&gt;&gt;"</span> }),
        <span class="hljs-title function_ invoke__">value</span>(JsonOperator::Question, rule! { <span class="hljs-string">"?"</span> }),
        <span class="hljs-title function_ invoke__">value</span>(JsonOperator::QuestionOr, rule! { <span class="hljs-string">"?|"</span> }),
        <span class="hljs-title function_ invoke__">value</span>(JsonOperator::QuestionAnd, rule! { <span class="hljs-string">"?&amp;"</span> }),
        <span class="hljs-title function_ invoke__">value</span>(JsonOperator::AtArrow, rule! { <span class="hljs-string">"@&gt;"</span> }),
        <span class="hljs-title function_ invoke__">value</span>(JsonOperator::ArrowAt, rule! { <span class="hljs-string">"&lt;@"</span> }),
        <span class="hljs-title function_ invoke__">value</span>(JsonOperator::AtQuestion, rule! { <span class="hljs-string">"@?"</span> }),
        <span class="hljs-title function_ invoke__">value</span>(JsonOperator::AtAt, rule! { <span class="hljs-string">"@@"</span> }),
        <span class="hljs-title function_ invoke__">value</span>(JsonOperator::HashMinus, rule! { <span class="hljs-string">"#-"</span> }),
    ))(i)
}

<span class="hljs-comment">// æ–°å®ç°ï¼šhard code</span>
<span class="hljs-built_in">macro_rules!</span> op_branch {
    ($i:ident, $token_0:ident, $($kind:ident =&gt; $op:expr),+ $(,)?) =&gt; {
        <span class="hljs-keyword">match</span> $token_0.kind {
            $(
                TokenKind::$kind =&gt; <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">return_op</span>($i, <span class="hljs-number">1</span>, $op),
            )+
            _ =&gt; (),
        }
    };
}

<span class="hljs-title function_ invoke__">pub</span>(<span class="hljs-keyword">crate</span>) <span class="hljs-keyword">fn</span> <span class="hljs-title function_">json_op_simple</span>(i: Input) <span class="hljs-punctuation">-&gt;</span> IResult&lt;JsonOperator&gt; {
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(token_0) = i.tokens.<span class="hljs-title function_ invoke__">first</span>() {
        op_branch!(
            i, token_0,
            RArrow =&gt; JsonOperator::Arrow,
            LongRArrow =&gt; JsonOperator::LongArrow,
            HashRArrow =&gt; JsonOperator::HashArrow,
            HashLongRArrow =&gt; JsonOperator::HashLongArrow,
            Placeholder =&gt; JsonOperator::Question,
            QuestionOr =&gt; JsonOperator::QuestionOr,
            QuestionAnd =&gt; JsonOperator::QuestionAnd,
            AtArrow =&gt; JsonOperator::AtArrow,
            ArrowAt =&gt; JsonOperator::ArrowAt,
            AtQuestion =&gt; JsonOperator::AtQuestion,
            AtAt =&gt; JsonOperator::AtAt,
            HashMinus =&gt; JsonOperator::HashMinus,
        );
    }
    <span class="hljs-title function_ invoke__">Err</span>(nom::Err::<span class="hljs-title function_ invoke__">Error</span>(Error::<span class="hljs-title function_ invoke__">from_error_kind</span>(
        i,
        ErrorKind::<span class="hljs-title function_ invoke__">Other</span>(<span class="hljs-string">"expecting `-&gt;`, '-&gt;&gt;', '#&gt;', '#&gt;&gt;', '?', '?|', '?&amp;', '@&gt;', '&lt;@', '@?', '@@', '#-', or more ..."</span>),
    )))
}

<span class="hljs-meta">#[inline]</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">return_op</span>&lt;T&gt;(i: Input, start: <span class="hljs-type">usize</span>, op: T) <span class="hljs-punctuation">-&gt;</span> IResult&lt;T&gt; {
    <span class="hljs-title function_ invoke__">Ok</span>((i.<span class="hljs-title function_ invoke__">slice</span>(start..), op))
}
</code></pre>
<h3 data-id="heading-4">Benchmark</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">bench</span>                            <span class="hljs-string">fastest</span>       <span class="hljs-string">â”‚</span> <span class="hljs-string">slowest</span>       <span class="hljs-string">â”‚</span> <span class="hljs-string">median</span>        <span class="hljs-string">â”‚</span> <span class="hljs-string">mean</span>          <span class="hljs-string">â”‚</span> <span class="hljs-string">samples</span> <span class="hljs-string">â”‚</span> <span class="hljs-string">iters</span>
<span class="hljs-string">â•°â”€</span> <span class="hljs-string">dummy</span>                                       <span class="hljs-string">â”‚</span>               <span class="hljs-string">â”‚</span>               <span class="hljs-string">â”‚</span>               <span class="hljs-string">â”‚</span>         <span class="hljs-string">â”‚</span>
   <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">test_json_op_parse</span>         <span class="hljs-number">413.8</span> <span class="hljs-string">ns</span>      <span class="hljs-string">â”‚</span> <span class="hljs-number">2.817</span> <span class="hljs-string">Âµs</span>      <span class="hljs-string">â”‚</span> <span class="hljs-number">441.3</span> <span class="hljs-string">ns</span>      <span class="hljs-string">â”‚</span> <span class="hljs-number">482.6</span> <span class="hljs-string">ns</span>      <span class="hljs-string">â”‚</span> <span class="hljs-number">100</span>     <span class="hljs-string">â”‚</span> <span class="hljs-number">100</span>
   <span class="hljs-string">â•°â”€</span> <span class="hljs-string">test_json_op_parse_simple</span>  <span class="hljs-number">35.41</span> <span class="hljs-string">ns</span>      <span class="hljs-string">â”‚</span> <span class="hljs-number">54.89</span> <span class="hljs-string">ns</span>      <span class="hljs-string">â”‚</span> <span class="hljs-number">37.1</span> <span class="hljs-string">ns</span>       <span class="hljs-string">â”‚</span> <span class="hljs-number">37.61</span> <span class="hljs-string">ns</span>      <span class="hljs-string">â”‚</span> <span class="hljs-number">100</span>     <span class="hljs-string">â”‚</span> <span class="hljs-number">6400</span>
</code></pre>
<p>hard code ç‰ˆæœ¬èƒ½å¸¦æ¥çº¦ 10 å€çš„æ”¶ç›Šã€‚</p>
<h2 data-id="heading-5">ASM åˆ†æï¼šç¡¬ä»¶è§†è§’çš„å·®å¼‚</h2>
<p>å€ŸåŠ© <code>cargo asm -p databend-common-ast --lib databend_common_ast::parser::expr::json_op</code>ï¼Œæˆ‘ä»¬å¯¹æ¯”äº†ä¸¤ç§å®ç°çš„æ±‡ç¼–ï¼š</p>








































<table><thead><tr><th align="left">å¯¹æ¯”ç‚¹</th><th align="left">alt + value + rule!</th><th align="left">hard code</th></tr></thead><tbody><tr><td align="left">æ ˆå†…å­˜ä½¿ç”¨é‡</td><td align="left"><code>sub rsp, 288</code>ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½è¦åˆ†é… 288 å­—èŠ‚</td><td align="left">å‡ ä¹æ— æ˜¾å¼æ ˆåˆ†é…</td></tr><tr><td align="left">åˆå§‹åŒ–é€»è¾‘</td><td align="left">è¿è¡Œæ—¶é€é¡¹æ„é€ æ•°ç»„ï¼ˆå­—ç¬¦ä¸²æŒ‡é’ˆã€é•¿åº¦ã€æ ‡å¿—ä½ï¼‰</td><td align="left">ç›´æ¥è·³è½¬é™æ€è¡¨æˆ–ç¼–è¯‘æœŸå¸¸é‡</td></tr><tr><td align="left">å¯„å­˜å™¨æ“ä½œ</td><td align="left">å¤§é‡ <code>mov</code>ã€<code>lea</code>ï¼Œè¯´æ˜åœ¨æ„å»ºä¸´æ—¶æ•°æ®</td><td align="left">å°‘é‡è·³è¡¨ä¸åˆ†æ”¯ï¼Œè·¯å¾„çŸ­</td></tr><tr><td align="left">å‡½æ•°è°ƒç”¨</td><td align="left">è°ƒ <code>&lt;Alt&gt;::choice</code>ï¼Œå‚æ•°æ¥è‡ªåˆšæ„é€ çš„æ•°ç»„</td><td align="left">è°ƒåŒä¸€å‡½æ•°ï¼Œä½†å‚æ•°æ˜¯é™æ€å¸¸é‡</td></tr><tr><td align="left">ä»£ç é•¿åº¦</td><td align="left">å¾ˆé•¿ã€å±•å¼€æ˜æ˜¾</td><td align="left">ç²¾ç®€ï¼Œä¾¿äº CPU é¢„æµ‹/ç¼“å­˜</td></tr><tr><td align="left">æ€§èƒ½ç»“è®º</td><td align="left">æ¯æ¬¡è§£æéƒ½é‡å¤æ„é€ æ•°æ®ï¼Œååé‡ä½</td><td align="left">çº¯åˆ†æ”¯åˆ¤æ–­ï¼Œå¸¸é‡æŠ˜å ï¼Œæ€§èƒ½ç¨³å®š</td></tr></tbody></table>
<details>
<summary>æŸ¥çœ‹å®Œæ•´ hard code asm</summary>
<pre><code class="hljs language-asm" lang="asm">
.section .text.databend_common_ast::parser::expr::json_op,"ax",@progbits
        .globl  databend_common_ast::parser::expr::json_op
.type   databend_common_ast::parser::expr::json_op,@function
databend_common_ast::parser::expr::json_op:
        .cfi_startproc
        push r14
        .cfi_def_cfa_offset 16
        push rbx
        .cfi_def_cfa_offset 24
        sub rsp, 88
        .cfi_def_cfa_offset 112
        .cfi_offset rbx, -24
        .cfi_offset r14, -16
        mov rbx, rdi
        mov rax, qword ptr [rsi + 8]
        test rax, rax
        je .LBB5402_3
        mov rcx, qword ptr [rsi]
        movzx edx, word ptr [rcx + 24]
        add edx, -47
        cmp edx, 26
        ja .LBB5402_3
        lea rdi, [rip + .LJTI5402_0]
        movsxd rdx, dword ptr [rdi + 4*rdx]
        add rdx, rdi
        jmp rdx
        dec rax
        add rcx, 32
        movzx edx, word ptr [rsi + 24]
        mov rsi, qword ptr [rsi + 16]
        mov qword ptr [rbx + 8], rcx
        mov qword ptr [rbx + 16], rax
        mov qword ptr [rbx + 24], rsi
        mov word ptr [rbx + 32], dx
        mov byte ptr [rbx + 40], 0
        jmp .LBB5402_16
        dec rax
        add rcx, 32
        movzx edx, word ptr [rsi + 24]
        mov rsi, qword ptr [rsi + 16]
        mov qword ptr [rbx + 8], rcx
        mov qword ptr [rbx + 16], rax
        mov qword ptr [rbx + 24], rsi
        mov word ptr [rbx + 32], dx
        mov byte ptr [rbx + 40], 10
        jmp .LBB5402_16
        dec rax
        add rcx, 32
        movzx edx, word ptr [rsi + 24]
        mov rsi, qword ptr [rsi + 16]
        mov qword ptr [rbx + 8], rcx
        mov qword ptr [rbx + 16], rax
        mov qword ptr [rbx + 24], rsi
        mov word ptr [rbx + 32], dx
        mov byte ptr [rbx + 40], 2
        jmp .LBB5402_16
        dec rax
        add rcx, 32
        movzx edx, word ptr [rsi + 24]
        mov rsi, qword ptr [rsi + 16]
        mov qword ptr [rbx + 8], rcx
        mov qword ptr [rbx + 16], rax
        mov qword ptr [rbx + 24], rsi
        mov word ptr [rbx + 32], dx
        mov byte ptr [rbx + 40], 5
        jmp .LBB5402_16
        dec rax
        add rcx, 32
        movzx edx, word ptr [rsi + 24]
        mov rsi, qword ptr [rsi + 16]
        mov qword ptr [rbx + 8], rcx
        mov qword ptr [rbx + 16], rax
        mov qword ptr [rbx + 24], rsi
        mov word ptr [rbx + 32], dx
        mov byte ptr [rbx + 40], 11
        jmp .LBB5402_16
        dec rax
        add rcx, 32
        movzx edx, word ptr [rsi + 24]
        mov rsi, qword ptr [rsi + 16]
        mov qword ptr [rbx + 8], rcx
        mov qword ptr [rbx + 16], rax
        mov qword ptr [rbx + 24], rsi
        mov word ptr [rbx + 32], dx
        mov byte ptr [rbx + 40], 1
        jmp .LBB5402_16
        dec rax
        add rcx, 32
        movzx edx, word ptr [rsi + 24]
        mov rsi, qword ptr [rsi + 16]
        mov qword ptr [rbx + 8], rcx
        mov qword ptr [rbx + 16], rax
        mov qword ptr [rbx + 24], rsi
        mov word ptr [rbx + 32], dx
        mov byte ptr [rbx + 40], 6
        jmp .LBB5402_16
        dec rax
        add rcx, 32
        movzx edx, word ptr [rsi + 24]
        mov rsi, qword ptr [rsi + 16]
        mov qword ptr [rbx + 8], rcx
        mov qword ptr [rbx + 16], rax
        mov qword ptr [rbx + 24], rsi
        mov word ptr [rbx + 32], dx
        mov byte ptr [rbx + 40], 8
        jmp .LBB5402_16
        dec rax
        add rcx, 32
        movzx edx, word ptr [rsi + 24]
        mov rsi, qword ptr [rsi + 16]
        mov qword ptr [rbx + 8], rcx
        mov qword ptr [rbx + 16], rax
        mov qword ptr [rbx + 24], rsi
        mov word ptr [rbx + 32], dx
        mov byte ptr [rbx + 40], 3
        jmp .LBB5402_16
        dec rax
        add rcx, 32
        movzx edx, word ptr [rsi + 24]
        mov rsi, qword ptr [rsi + 16]
        mov qword ptr [rbx + 8], rcx
        mov qword ptr [rbx + 16], rax
        mov qword ptr [rbx + 24], rsi
        mov word ptr [rbx + 32], dx
        mov byte ptr [rbx + 40], 4
        jmp .LBB5402_16
        dec rax
        add rcx, 32
        movzx edx, word ptr [rsi + 24]
        mov rsi, qword ptr [rsi + 16]
        mov qword ptr [rbx + 8], rcx
        mov qword ptr [rbx + 16], rax
        mov qword ptr [rbx + 24], rsi
        mov word ptr [rbx + 32], dx
        mov byte ptr [rbx + 40], 9
        jmp .LBB5402_16
        dec rax
        add rcx, 32
        movzx edx, word ptr [rsi + 24]
        mov rsi, qword ptr [rsi + 16]
        mov qword ptr [rbx + 8], rcx
        mov qword ptr [rbx + 16], rax
        mov qword ptr [rbx + 24], rsi
        mov word ptr [rbx + 32], dx
        mov byte ptr [rbx + 40], 7
.LBB5402_16:
        mov qword ptr [rbx], 3
.LBB5402_17:
        mov rax, rbx
        add rsp, 88
        .cfi_def_cfa_offset 24
        pop rbx
        .cfi_def_cfa_offset 16
        pop r14
        .cfi_def_cfa_offset 8
        ret
</code></pre>
</details>
<details>
<summary>æŸ¥çœ‹å®Œæ•´ alt + value + rule! asm</summary>
<pre><code class="hljs language-asm" lang="asm">
.section .text.databend_common_ast::parser::expr::json_op,"ax",@progbits
        .globl  databend_common_ast::parser::expr::json_op
.type   databend_common_ast::parser::expr::json_op,@function
databend_common_ast::parser::expr::json_op:
        .cfi_startproc
        push rbx
        .cfi_def_cfa_offset 16
        sub rsp, 288
        .cfi_def_cfa_offset 304
        .cfi_offset rbx, -16
        mov rdx, rsi
        mov rbx, rdi
        lea rax, [rip + .Lanon.ebe4306c54ac692c121f4b459a487d88.465]
        mov rsi, rsp
        mov qword ptr [rsi], rax
        mov eax, 2
        mov qword ptr [rsi + 8], rax
        mov byte ptr [rsi + 16], 0
        lea rcx, [rip + .Lanon.ebe4306c54ac692c121f4b459a487d88.466]
        mov qword ptr [rsi + 24], rcx
        mov ecx, 3
        mov qword ptr [rsi + 32], rcx
        mov byte ptr [rsi + 40], 1
        lea rdi, [rip + .Lanon.ebe4306c54ac692c121f4b459a487d88.467]
        mov qword ptr [rsi + 48], rdi
        mov qword ptr [rsi + 56], rax
        mov byte ptr [rsi + 64], 2
        lea rdi, [rip + .Lanon.ebe4306c54ac692c121f4b459a487d88.468]
        mov qword ptr [rsi + 72], rdi
        mov qword ptr [rsi + 80], rcx
        mov byte ptr [rsi + 88], 3
        lea rcx, [rip + .Lanon.ebe4306c54ac692c121f4b459a487d88.469]
        mov qword ptr [rsi + 96], rcx
        mov qword ptr [rsi + 104], 1
        mov byte ptr [rsi + 112], 4
        lea rcx, [rip + .Lanon.ebe4306c54ac692c121f4b459a487d88.471]
        mov qword ptr [rsi + 120], rcx
        mov qword ptr [rsi + 128], rax
        mov byte ptr [rsi + 136], 5
        lea rcx, [rip + .Lanon.ebe4306c54ac692c121f4b459a487d88.472]
        mov qword ptr [rsi + 144], rcx
        mov qword ptr [rsi + 152], rax
        mov byte ptr [rsi + 160], 6
        lea rcx, [rip + .Lanon.ebe4306c54ac692c121f4b459a487d88.473]
        mov qword ptr [rsi + 168], rcx
        mov qword ptr [rsi + 176], rax
        mov byte ptr [rsi + 184], 7
        lea rcx, [rip + .Lanon.ebe4306c54ac692c121f4b459a487d88.474]
        mov qword ptr [rsi + 192], rcx
        mov qword ptr [rsi + 200], rax
        mov byte ptr [rsi + 208], 8
        lea rcx, [rip + .Lanon.ebe4306c54ac692c121f4b459a487d88.475]
        mov qword ptr [rsi + 216], rcx
        mov qword ptr [rsi + 224], rax
        mov byte ptr [rsi + 232], 9
        lea rcx, [rip + .Lanon.ebe4306c54ac692c121f4b459a487d88.476]
        mov qword ptr [rsi + 240], rcx
        mov qword ptr [rsi + 248], rax
        mov byte ptr [rsi + 256], 10
        lea rcx, [rip + .Lanon.ebe4306c54ac692c121f4b459a487d88.477]
        mov qword ptr [rsi + 264], rcx
        mov qword ptr [rsi + 272], rax
        mov byte ptr [rsi + 280], 11
        mov rdi, rbx
        call qword ptr [rip + &lt;(A,B,C,D,E,F,G,H,I,J,K,L) as nom::branch::Alt&gt;::choice@GOTPCREL]
        mov rax, rbx
        add rsp, 288
        .cfi_def_cfa_offset 16
        pop rbx
        .cfi_def_cfa_offset 8
        ret
</code></pre>
</details>
<h2 data-id="heading-6">ç»éªŒæ€»ç»“</h2>
<ul>
<li>åˆå¹¶ç»“æ„ç›¸ä¼¼çš„ parserï¼Œé¿å…æ·±åº¦ä¼˜å…ˆ + å›æº¯å¯¼è‡´çš„æŒ‡æ•°çº§çˆ†ç‚¸ã€‚</li>
<li>é«˜é¢‘ã€ç®€å• token çš„è§£æç›´æ¥ hard codeï¼Œçœæ‰é—­åŒ…ã€é”™è¯¯åŒ…è£…ç­‰é¢å¤–æˆæœ¬ã€‚</li>
<li>åŠæ—¶æŸ¥çœ‹ç«ç„°å›¾ï¼Œèƒ½å‘ç°å¼‚å¸¸æ·±çš„è§£ææ ˆã€‚</li>
<li>å¿…è¦æ—¶å¯¹çƒ­ç‚¹è·¯å¾„åšæ±‡ç¼–çº§åˆ†æï¼Œæ›´å®¹æ˜“éªŒè¯ä¼˜åŒ–æ–¹å‘ã€‚</li>
</ul>
<p>è¿™ä¸¤é¡¹ä¼˜åŒ–è½åœ°åï¼ŒDatabend çš„å‡½æ•°è°ƒç”¨è§£æä»åˆ†é’Ÿçº§é™åˆ°æ¯«ç§’çº§ï¼Œè¡¨è¾¾å¼è§£æä¹Ÿè·å¾—äº†é‡çº§ä¸Šçš„æ€§èƒ½æå‡ã€‚</p>
<h2 data-id="heading-7">å…³äº Databend</h2>
<p>Databend æ˜¯ä¸€æ¬¾å¼€æºã€å¼¹æ€§ã€ä½æˆæœ¬ï¼ŒåŸºäºå¯¹è±¡å­˜å‚¨ä¹Ÿå¯ä»¥åšå®æ—¶åˆ†æçš„æ–°å¼æ¹–ä»“ã€‚æœŸå¾…æ‚¨çš„å…³æ³¨ï¼Œä¸€èµ·æ¢ç´¢äº‘åŸç”Ÿæ•°ä»“è§£å†³æ–¹æ¡ˆï¼Œæ‰“é€ æ–°ä¸€ä»£å¼€æº Data Cloudã€‚</p>
<p>ğŸ‘¨â€ğŸ’»â€ Databend Cloudï¼š<a href="https://link.juejin.cn/?target=https%3A%2F%2Fdatabend.cn%2F" title="https://link.juejin.cn/?target=https%3A%2F%2Fdatabend.cn%2F" target="_blank">databend.cn</a></p>
<p>ğŸ“– Databend æ–‡æ¡£ï¼š<a href="https://link.juejin.cn/?target=https%3A%2F%2Fdocs.databend.cn%2F" title="https://link.juejin.cn/?target=https%3A%2F%2Fdocs.databend.cn%2F" target="_blank">docs.databend.cn</a></p>
<p>ğŸ’» Wechatï¼šDatabend</p>
<p>âœ¨ GitHubï¼š<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fdatabendlabs%2Fdatabend" title="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fdatabendlabs%2Fdatabend" target="_blank">github.com/databendlabâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Laravel 11ä¸UniAppå®æˆ˜ï¼šæ„å»ºé«˜æ€§èƒ½ç”µå•†APIä¸ç§»åŠ¨ç«¯äº¤äº’ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7572459757107085366</link>    <guid>https://juejin.cn/post/7572459757107085366</guid>    <pubDate>2025-11-15T10:00:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572459757107085366" data-draft-id="7572465262739128339" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Laravel 11ä¸UniAppå®æˆ˜ï¼šæ„å»ºé«˜æ€§èƒ½ç”µå•†APIä¸ç§»åŠ¨ç«¯äº¤äº’ç³»ç»Ÿ"/> <meta itemprop="keywords" content="Laravel"/> <meta itemprop="datePublished" content="2025-11-15T10:00:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JienDa"/> <meta itemprop="url" content="https://juejin.cn/user/2930617309202010"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Laravel 11ä¸UniAppå®æˆ˜ï¼šæ„å»ºé«˜æ€§èƒ½ç”µå•†APIä¸ç§»åŠ¨ç«¯äº¤äº’ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2930617309202010/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JienDa
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T10:00:25.000Z" title="Sat Nov 15 2025 10:00:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Laravel 11ä¸UniAppå®æˆ˜ï¼šæ„å»ºé«˜æ€§èƒ½ç”µå•†APIä¸ç§»åŠ¨ç«¯äº¤äº’ç³»ç»Ÿ</h2>
<h3 data-id="heading-1">ä¸€ã€åœºæ™¯èƒŒæ™¯ä¸å¸‚åœºåˆ†æ</h3>
<h4 data-id="heading-2">1.1 ç§»åŠ¨ç”µå•†å‘å±•è¶‹åŠ¿</h4>
<p>2025å¹´ï¼Œç§»åŠ¨äº’è”ç½‘å·²è¿›å…¥æ·±åº¦å‘å±•é˜¶æ®µï¼Œç§»åŠ¨ç«¯è´­ç‰©å·²æˆä¸ºä¸»æµæ¶ˆè´¹æ–¹å¼ã€‚æ ¹æ®å¸‚åœºè°ƒç ”æ•°æ®ï¼Œä¸­å›½ç§»åŠ¨ç”µå•†å¸‚åœºè§„æ¨¡é¢„è®¡å°†è¾¾åˆ°<strong>XXä¸‡äº¿å…ƒ</strong>ï¼Œç§»åŠ¨ç«¯äº¤æ˜“å æ¯”è¶…è¿‡<strong>85%</strong> ã€‚åœ¨è¿™æ ·çš„å¸‚åœºç¯å¢ƒä¸‹ï¼Œä¼ä¸šéœ€è¦å¿«é€Ÿæ­å»ºæ—¢èƒ½æ»¡è¶³åç«¯ç®¡ç†éœ€æ±‚ï¼Œåˆèƒ½æä¾›ä¼˜è´¨ç§»åŠ¨ç«¯ç”¨æˆ·ä½“éªŒçš„ç”µå•†ç³»ç»Ÿã€‚</p>
<h4 data-id="heading-3">1.2 æŠ€æœ¯é€‰å‹ä¼˜åŠ¿</h4>
<p><strong>Laravel 11</strong>ä½œä¸ºPHPç”Ÿæ€ä¸­æœ€å—æ¬¢è¿çš„ç°ä»£åŒ–æ¡†æ¶ï¼Œåœ¨2025å¹´æŒç»­ä¿æŒé¢†å…ˆåœ°ä½ã€‚å…¶æœ€æ–°ç‰ˆæœ¬åŸºäºPHP 8.2+é‡æ„ï¼Œåœ¨æ€§èƒ½ã€å®‰å…¨æ€§ã€å¼€å‘æ•ˆç‡ç­‰æ–¹é¢éƒ½æœ‰æ˜¾è‘—æå‡ã€‚Laravel 11å¼•å…¥äº†æç®€åº”ç”¨ç»“æ„ã€æ”¹è¿›çš„HTTPå®¢æˆ·ç«¯ã€ä¼˜åŒ–æŸ¥è¯¢ç”Ÿæˆå™¨ç­‰æ–°ç‰¹æ€§ï¼Œç‰¹åˆ«é€‚åˆæ„å»ºé«˜æ€§èƒ½APIæœåŠ¡ã€‚</p>
<p><strong>UniApp</strong>ä½œä¸ºè·¨å¹³å°å¼€å‘æ¡†æ¶ï¼Œæ”¯æŒä¸€å¥—ä»£ç ç¼–è¯‘åˆ°iOSã€Androidã€H5ç­‰å¤šä¸ªå¹³å°ï¼Œæå¤§é™ä½äº†ç§»åŠ¨ç«¯å¼€å‘æˆæœ¬ã€‚ç»“åˆLaravel 11æ„å»ºçš„RESTful APIï¼Œå¯ä»¥å®ç°å‰åç«¯å®Œå…¨åˆ†ç¦»ï¼Œæå‡å¼€å‘æ•ˆç‡å’Œç³»ç»Ÿå¯ç»´æŠ¤æ€§ã€‚</p>
<h3 data-id="heading-4">äºŒã€ç³»ç»Ÿæ¶æ„è®¾è®¡</h3>
<h4 data-id="heading-5">2.1 æ•´ä½“æ¶æ„</h4>
<p>åŸºäºLaravel 11å’ŒUniAppçš„ç”µå•†ç³»ç»Ÿé‡‡ç”¨<strong>å‰åç«¯åˆ†ç¦»æ¶æ„</strong>ï¼Œå°†ç³»ç»Ÿåˆ’åˆ†ä¸ºä»¥ä¸‹å±‚æ¬¡ï¼š</p>
<ul>
<li>
<p>â€¢
<strong>åç«¯APIå±‚</strong>ï¼šLaravel 11æ„å»ºçš„RESTful APIæœåŠ¡ï¼Œæä¾›ç”¨æˆ·è®¤è¯ã€å•†å“ç®¡ç†ã€è®¢å•å¤„ç†ç­‰æ ¸å¿ƒåŠŸèƒ½</p>
</li>
<li>
<p>â€¢
<strong>å‰ç«¯åº”ç”¨å±‚</strong>ï¼šUniAppæ„å»ºçš„è·¨å¹³å°ç§»åŠ¨åº”ç”¨ï¼Œè´Ÿè´£ç”¨æˆ·ç•Œé¢å±•ç¤ºå’Œäº¤äº’</p>
</li>
<li>
<p>â€¢
<strong>æ•°æ®å­˜å‚¨å±‚</strong>ï¼šMySQLæ•°æ®åº“å­˜å‚¨ä¸šåŠ¡æ•°æ®ï¼ŒRedisç”¨äºç¼“å­˜å’Œä¼šè¯ç®¡ç†</p>
</li>
<li>
<p>â€¢
<strong>ç¬¬ä¸‰æ–¹æœåŠ¡</strong>ï¼šæ”¯ä»˜ç½‘å…³ã€çŸ­ä¿¡æœåŠ¡ã€ç‰©æµæŸ¥è¯¢ç­‰ç¬¬ä¸‰æ–¹APIé›†æˆ</p>
</li>
</ul>
<h4 data-id="heading-6">2.2 æŠ€æœ¯æ ˆé€‰å‹</h4>








































<table><thead><tr><th>å±‚æ¬¡</th><th>æŠ€æœ¯é€‰å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>åç«¯æ¡†æ¶</td><td>Laravel 11</td><td>ç°ä»£åŒ–PHPæ¡†æ¶ï¼Œæä¾›ä¼˜é›…çš„APIå¼€å‘ä½“éªŒ</td></tr><tr><td>å‰ç«¯æ¡†æ¶</td><td>UniApp + Vue.js</td><td>è·¨å¹³å°å¼€å‘ï¼Œä¸€å¥—ä»£ç å¤šç«¯è¿è¡Œ</td></tr><tr><td>æ•°æ®åº“</td><td>MySQL 8.0+</td><td>å…³ç³»å‹æ•°æ®åº“ï¼Œæ”¯æŒäº‹åŠ¡å’Œå¤æ‚æŸ¥è¯¢</td></tr><tr><td>ç¼“å­˜</td><td>Redis</td><td>å†…å­˜æ•°æ®åº“ï¼Œç”¨äºç¼“å­˜å’Œä¼šè¯ç®¡ç†</td></tr><tr><td>è®¤è¯æ–¹å¼</td><td>JWT Token</td><td>æ— çŠ¶æ€è®¤è¯ï¼Œé€‚åˆAPIåœºæ™¯</td></tr><tr><td>éƒ¨ç½²ç¯å¢ƒ</td><td>Docker + Nginx</td><td>å®¹å™¨åŒ–éƒ¨ç½²ï¼Œä¾¿äºæ‰©å±•å’Œç»´æŠ¤</td></tr></tbody></table>
<h3 data-id="heading-7">ä¸‰ã€æ ¸å¿ƒæ¨¡å—è®¾è®¡ä¸å®ç°</h3>
<h4 data-id="heading-8">3.1 ç”¨æˆ·è®¤è¯æ¨¡å—</h4>
<p>Laravel 11æä¾›äº†å®Œå–„çš„è®¤è¯ç³»ç»Ÿï¼Œç»“åˆJWT Tokenå®ç°æ— çŠ¶æ€è®¤è¯ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// å®‰è£…JWTè®¤è¯åŒ…</span>
composer <span class="hljs-keyword">require</span> tymon/jwt-auth

<span class="hljs-comment">// é…ç½®JWTå¯†é’¥</span>
php artisan jwt:secret

<span class="hljs-comment">// ç”¨æˆ·æ¨¡å‹é…ç½®</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title class_">App</span>\<span class="hljs-title class_">Models</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Foundation</span>\<span class="hljs-title">Auth</span>\<span class="hljs-title">User</span> <span class="hljs-keyword">as</span> <span class="hljs-title">Authenticatable</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Tymon</span>\<span class="hljs-title">JWTAuth</span>\<span class="hljs-title">Contracts</span>\<span class="hljs-title">JWTSubject</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Authenticatable</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">JWTSubject</span>
</span>{
    <span class="hljs-comment">// è·å–JWTæ ‡è¯†</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getJWTIdentifier</span>(<span class="hljs-params"/>)
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">getKey</span>();
    }

    <span class="hljs-comment">// è‡ªå®šä¹‰JWTå£°æ˜</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getJWTCustomClaims</span>(<span class="hljs-params"/>)
    </span>{
        <span class="hljs-keyword">return</span> [];
    }
}
</code></pre>
<p><strong>ç™»å½•æ¥å£å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">App</span>\<span class="hljs-title class_">Http</span>\<span class="hljs-title class_">Controllers</span>\<span class="hljs-title class_">Api</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Models</span>\<span class="hljs-title">User</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Http</span>\<span class="hljs-title">Request</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Support</span>\<span class="hljs-title">Facades</span>\<span class="hljs-title">Hash</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Tymon</span>\<span class="hljs-title">JWTAuth</span>\<span class="hljs-title">Facades</span>\<span class="hljs-title">JWTAuth</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AuthController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">login</span>(<span class="hljs-params">Request <span class="hljs-variable">$request</span></span>)
    </span>{
        <span class="hljs-variable">$credentials</span> = <span class="hljs-variable">$request</span>-&gt;<span class="hljs-title function_ invoke__">only</span>(<span class="hljs-string">'email'</span>, <span class="hljs-string">'password'</span>);
        
        <span class="hljs-keyword">if</span> (!<span class="hljs-variable">$token</span> = <span class="hljs-title class_">JWTAuth</span>::<span class="hljs-title function_ invoke__">attempt</span>(<span class="hljs-variable">$credentials</span>)) {
            <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">response</span>()-&gt;<span class="hljs-title function_ invoke__">json</span>([<span class="hljs-string">'error'</span> =&gt; <span class="hljs-string">'Unauthorized'</span>], <span class="hljs-number">401</span>);
        }

        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">response</span>()-&gt;<span class="hljs-title function_ invoke__">json</span>([
            <span class="hljs-string">'access_token'</span> =&gt; <span class="hljs-variable">$token</span>,
            <span class="hljs-string">'token_type'</span> =&gt; <span class="hljs-string">'bearer'</span>,
            <span class="hljs-string">'expires_in'</span> =&gt; <span class="hljs-title function_ invoke__">config</span>(<span class="hljs-string">'jwt.ttl'</span>) * <span class="hljs-number">60</span>
        ]);
    }
}
</code></pre>
<h4 data-id="heading-9">3.2 å•†å“ç®¡ç†æ¨¡å—</h4>
<p>å•†å“æ¨¡å—æ˜¯ç”µå•†ç³»ç»Ÿçš„æ ¸å¿ƒï¼Œéœ€è¦å¤„ç†å•†å“åˆ†ç±»ã€SKUç®¡ç†ã€åº“å­˜æ§åˆ¶ç­‰å¤æ‚ä¸šåŠ¡ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">App</span>\<span class="hljs-title class_">Http</span>\<span class="hljs-title class_">Controllers</span>\<span class="hljs-title class_">Api</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Models</span>\<span class="hljs-title">Product</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Http</span>\<span class="hljs-title">Resources</span>\<span class="hljs-title">ProductResource</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Http</span>\<span class="hljs-title">Request</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProductController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span>
</span>{
    <span class="hljs-comment">// å•†å“åˆ—è¡¨æ¥å£</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">index</span>(<span class="hljs-params">Request <span class="hljs-variable">$request</span></span>)
    </span>{
        <span class="hljs-variable">$query</span> = <span class="hljs-title class_">Product</span>::<span class="hljs-title function_ invoke__">with</span>([<span class="hljs-string">'category'</span>, <span class="hljs-string">'skus'</span>])
            -&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">'status'</span>, <span class="hljs-number">1</span>);

        <span class="hljs-comment">// åˆ†ç±»ç­›é€‰</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$request</span>-&gt;<span class="hljs-title function_ invoke__">has</span>(<span class="hljs-string">'category_id'</span>)) {
            <span class="hljs-variable">$query</span>-&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">'category_id'</span>, <span class="hljs-variable">$request</span>-&gt;category_id);
        }

        <span class="hljs-comment">// å…³é”®è¯æœç´¢</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$request</span>-&gt;<span class="hljs-title function_ invoke__">has</span>(<span class="hljs-string">'keyword'</span>)) {
            <span class="hljs-variable">$query</span>-&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">'name'</span>, <span class="hljs-string">'like'</span>, <span class="hljs-string">"%<span class="hljs-subst">{$request-&gt;keyword}</span>%"</span>);
        }

        <span class="hljs-comment">// ä»·æ ¼æ’åº</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$request</span>-&gt;<span class="hljs-title function_ invoke__">has</span>(<span class="hljs-string">'sort'</span>)) {
            <span class="hljs-variable">$query</span>-&gt;<span class="hljs-title function_ invoke__">orderBy</span>(<span class="hljs-string">'price'</span>, <span class="hljs-variable">$request</span>-&gt;sort);
        }

        <span class="hljs-variable">$products</span> = <span class="hljs-variable">$query</span>-&gt;<span class="hljs-title function_ invoke__">paginate</span>(<span class="hljs-number">20</span>);

        <span class="hljs-keyword">return</span> <span class="hljs-title class_">ProductResource</span>::<span class="hljs-title function_ invoke__">collection</span>(<span class="hljs-variable">$products</span>);
    }

    <span class="hljs-comment">// å•†å“è¯¦æƒ…æ¥å£</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">show</span>(<span class="hljs-params"><span class="hljs-variable">$id</span></span>)
    </span>{
        <span class="hljs-variable">$product</span> = <span class="hljs-title class_">Product</span>::<span class="hljs-title function_ invoke__">with</span>([<span class="hljs-string">'category'</span>, <span class="hljs-string">'skus'</span>, <span class="hljs-string">'attributes'</span>])
            -&gt;<span class="hljs-title function_ invoke__">findOrFail</span>(<span class="hljs-variable">$id</span>);

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProductResource</span>(<span class="hljs-variable">$product</span>);
    }
}
</code></pre>
<p><strong>APIèµ„æºæ ¼å¼åŒ–</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">namespace App\Http\Resources;

use Illuminate\Http\Resources\Json\JsonResource;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductResource</span> <span class="hljs-title">extends</span> <span class="hljs-title">JsonResource</span>
{
    <span class="hljs-keyword">public</span> function toArray($request)
    {
        <span class="hljs-keyword">return</span> [
            <span class="hljs-string">'id'</span> =&gt; $<span class="hljs-keyword">this</span>-&gt;id,
            <span class="hljs-string">'name'</span> =&gt; $<span class="hljs-keyword">this</span>-&gt;name,
            <span class="hljs-string">'price'</span> =&gt; $<span class="hljs-keyword">this</span>-&gt;price,
            <span class="hljs-string">'stock'</span> =&gt; $<span class="hljs-keyword">this</span>-&gt;stock,
            <span class="hljs-string">'images'</span> =&gt; $<span class="hljs-keyword">this</span>-&gt;images,
            <span class="hljs-string">'description'</span> =&gt; $<span class="hljs-keyword">this</span>-&gt;description,
            <span class="hljs-string">'category'</span> =&gt; new CategoryResource($<span class="hljs-keyword">this</span>-&gt;whenLoaded(<span class="hljs-string">'category'</span>)),
            <span class="hljs-string">'skus'</span> =&gt; SkuResource::collection($<span class="hljs-keyword">this</span>-&gt;whenLoaded(<span class="hljs-string">'skus'</span>)),
            <span class="hljs-string">'created_at'</span> =&gt; $<span class="hljs-keyword">this</span>-&gt;created_at-&gt;toDateTimeString(),
            <span class="hljs-string">'updated_at'</span> =&gt; $<span class="hljs-keyword">this</span>-&gt;updated_at-&gt;toDateTimeString(),
        ];
    }
}
</code></pre>
<h4 data-id="heading-10">3.3 è´­ç‰©è½¦æ¨¡å—</h4>
<p>è´­ç‰©è½¦æ¨¡å—éœ€è¦å¤„ç†å•†å“æ·»åŠ ã€æ•°é‡ä¿®æ”¹ã€ä»·æ ¼è®¡ç®—ç­‰ä¸šåŠ¡ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">App</span>\<span class="hljs-title class_">Http</span>\<span class="hljs-title class_">Controllers</span>\<span class="hljs-title class_">Api</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Models</span>\<span class="hljs-title">Cart</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Models</span>\<span class="hljs-title">Product</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Http</span>\<span class="hljs-title">Request</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Support</span>\<span class="hljs-title">Facades</span>\<span class="hljs-title">Auth</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CartController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span>
</span>{
    <span class="hljs-comment">// è·å–è´­ç‰©è½¦åˆ—è¡¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">index</span>(<span class="hljs-params"/>)
    </span>{
        <span class="hljs-variable">$carts</span> = <span class="hljs-title class_">Cart</span>::<span class="hljs-title function_ invoke__">with</span>(<span class="hljs-string">'product'</span>)
            -&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">'user_id'</span>, <span class="hljs-title class_">Auth</span>::<span class="hljs-title function_ invoke__">id</span>())
            -&gt;<span class="hljs-title function_ invoke__">get</span>();

        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">response</span>()-&gt;<span class="hljs-title function_ invoke__">json</span>([
            <span class="hljs-string">'data'</span> =&gt; <span class="hljs-variable">$carts</span>,
            <span class="hljs-string">'total_amount'</span> =&gt; <span class="hljs-variable">$this</span>-&gt;<span class="hljs-title function_ invoke__">calculateTotalAmount</span>(<span class="hljs-variable">$carts</span>)
        ]);
    }

    <span class="hljs-comment">// æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">store</span>(<span class="hljs-params">Request <span class="hljs-variable">$request</span></span>)
    </span>{
        <span class="hljs-variable">$request</span>-&gt;<span class="hljs-title function_ invoke__">validate</span>([
            <span class="hljs-string">'product_id'</span> =&gt; <span class="hljs-string">'required|exists:products,id'</span>,
            <span class="hljs-string">'quantity'</span> =&gt; <span class="hljs-string">'required|integer|min:1'</span>
        ]);

        <span class="hljs-variable">$product</span> = <span class="hljs-title class_">Product</span>::<span class="hljs-title function_ invoke__">find</span>(<span class="hljs-variable">$request</span>-&gt;product_id);

        <span class="hljs-comment">// æ£€æŸ¥åº“å­˜</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$product</span>-&gt;stock &lt; <span class="hljs-variable">$request</span>-&gt;quantity) {
            <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">response</span>()-&gt;<span class="hljs-title function_ invoke__">json</span>([<span class="hljs-string">'error'</span> =&gt; <span class="hljs-string">'åº“å­˜ä¸è¶³'</span>], <span class="hljs-number">400</span>);
        }

        <span class="hljs-comment">// æ£€æŸ¥è´­ç‰©è½¦æ˜¯å¦å·²å­˜åœ¨è¯¥å•†å“</span>
        <span class="hljs-variable">$cart</span> = <span class="hljs-title class_">Cart</span>::<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">'user_id'</span>, <span class="hljs-title class_">Auth</span>::<span class="hljs-title function_ invoke__">id</span>())
            -&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">'product_id'</span>, <span class="hljs-variable">$request</span>-&gt;product_id)
            -&gt;<span class="hljs-title function_ invoke__">first</span>();

        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$cart</span>) {
            <span class="hljs-variable">$cart</span>-&gt;quantity += <span class="hljs-variable">$request</span>-&gt;quantity;
            <span class="hljs-variable">$cart</span>-&gt;<span class="hljs-title function_ invoke__">save</span>();
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-title class_">Cart</span>::<span class="hljs-title function_ invoke__">create</span>([
                <span class="hljs-string">'user_id'</span> =&gt; <span class="hljs-title class_">Auth</span>::<span class="hljs-title function_ invoke__">id</span>(),
                <span class="hljs-string">'product_id'</span> =&gt; <span class="hljs-variable">$request</span>-&gt;product_id,
                <span class="hljs-string">'quantity'</span> =&gt; <span class="hljs-variable">$request</span>-&gt;quantity,
                <span class="hljs-string">'price'</span> =&gt; <span class="hljs-variable">$product</span>-&gt;price
            ]);
        }

        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">response</span>()-&gt;<span class="hljs-title function_ invoke__">json</span>([<span class="hljs-string">'message'</span> =&gt; <span class="hljs-string">'æ·»åŠ æˆåŠŸ'</span>]);
    }

    <span class="hljs-comment">// è®¡ç®—è´­ç‰©è½¦æ€»é‡‘é¢</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">calculateTotalAmount</span>(<span class="hljs-params"><span class="hljs-variable">$carts</span></span>)
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-variable">$carts</span>-&gt;<span class="hljs-title function_ invoke__">sum</span>(function (<span class="hljs-variable">$cart</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-variable">$cart</span>-&gt;quantity * <span class="hljs-variable">$cart</span>-&gt;price;
        });
    }
}
</code></pre>
<h4 data-id="heading-11">3.4 è®¢å•æ¨¡å—</h4>
<p>è®¢å•æ¨¡å—æ˜¯ç”µå•†ç³»ç»Ÿçš„æ ¸å¿ƒï¼Œæ¶‰åŠè®¢å•åˆ›å»ºã€æ”¯ä»˜ã€çŠ¶æ€æµè½¬ç­‰å¤æ‚æµç¨‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">App</span>\<span class="hljs-title class_">Http</span>\<span class="hljs-title class_">Controllers</span>\<span class="hljs-title class_">Api</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Models</span>\<span class="hljs-title">Order</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Models</span>\<span class="hljs-title">OrderItem</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Models</span>\<span class="hljs-title">Cart</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Models</span>\<span class="hljs-title">Product</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Http</span>\<span class="hljs-title">Request</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Support</span>\<span class="hljs-title">Facades</span>\<span class="hljs-title">DB</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Support</span>\<span class="hljs-title">Facades</span>\<span class="hljs-title">Auth</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OrderController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span>
</span>{
    <span class="hljs-comment">// åˆ›å»ºè®¢å•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">store</span>(<span class="hljs-params">Request <span class="hljs-variable">$request</span></span>)
    </span>{
        DB::<span class="hljs-title function_ invoke__">beginTransaction</span>();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-variable">$carts</span> = <span class="hljs-title class_">Cart</span>::<span class="hljs-title function_ invoke__">with</span>(<span class="hljs-string">'product'</span>)
                -&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">'user_id'</span>, <span class="hljs-title class_">Auth</span>::<span class="hljs-title function_ invoke__">id</span>())
                -&gt;<span class="hljs-title function_ invoke__">get</span>();

            <span class="hljs-keyword">if</span> (<span class="hljs-variable">$carts</span>-&gt;<span class="hljs-title function_ invoke__">isEmpty</span>()) {
                <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">response</span>()-&gt;<span class="hljs-title function_ invoke__">json</span>([<span class="hljs-string">'error'</span> =&gt; <span class="hljs-string">'è´­ç‰©è½¦ä¸ºç©º'</span>], <span class="hljs-number">400</span>);
            }

            <span class="hljs-comment">// è®¡ç®—è®¢å•æ€»é‡‘é¢</span>
            <span class="hljs-variable">$totalAmount</span> = <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">calculateTotalAmount</span>(<span class="hljs-variable">$carts</span>);

            <span class="hljs-comment">// åˆ›å»ºè®¢å•</span>
            <span class="hljs-variable">$order</span> = <span class="hljs-title class_">Order</span>::<span class="hljs-title function_ invoke__">create</span>([
                <span class="hljs-string">'user_id'</span> =&gt; <span class="hljs-title class_">Auth</span>::<span class="hljs-title function_ invoke__">id</span>(),
                <span class="hljs-string">'order_no'</span> =&gt; <span class="hljs-variable">$this</span>-&gt;<span class="hljs-title function_ invoke__">generateOrderNo</span>(),
                <span class="hljs-string">'total_amount'</span> =&gt; <span class="hljs-variable">$totalAmount</span>,
                <span class="hljs-string">'status'</span> =&gt; <span class="hljs-title class_">Order</span>::<span class="hljs-variable constant_">STATUS_PENDING</span>,
                <span class="hljs-string">'address'</span> =&gt; <span class="hljs-variable">$request</span>-&gt;address,
                <span class="hljs-string">'consignee'</span> =&gt; <span class="hljs-variable">$request</span>-&gt;consignee,
                <span class="hljs-string">'phone'</span> =&gt; <span class="hljs-variable">$request</span>-&gt;phone
            ]);

            <span class="hljs-comment">// åˆ›å»ºè®¢å•å•†å“</span>
            <span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$carts</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$cart</span>) {
                <span class="hljs-title class_">OrderItem</span>::<span class="hljs-title function_ invoke__">create</span>([
                    <span class="hljs-string">'order_id'</span> =&gt; <span class="hljs-variable">$order</span>-&gt;id,
                    <span class="hljs-string">'product_id'</span> =&gt; <span class="hljs-variable">$cart</span>-&gt;product_id,
                    <span class="hljs-string">'product_name'</span> =&gt; <span class="hljs-variable">$cart</span>-&gt;product-&gt;name,
                    <span class="hljs-string">'product_image'</span> =&gt; <span class="hljs-variable">$cart</span>-&gt;product-&gt;image,
                    <span class="hljs-string">'price'</span> =&gt; <span class="hljs-variable">$cart</span>-&gt;price,
                    <span class="hljs-string">'quantity'</span> =&gt; <span class="hljs-variable">$cart</span>-&gt;quantity,
                    <span class="hljs-string">'total_amount'</span> =&gt; <span class="hljs-variable">$cart</span>-&gt;price * <span class="hljs-variable">$cart</span>-&gt;quantity
                ]);

                <span class="hljs-comment">// æ‰£å‡åº“å­˜</span>
                <span class="hljs-variable">$product</span> = <span class="hljs-title class_">Product</span>::<span class="hljs-title function_ invoke__">find</span>(<span class="hljs-variable">$cart</span>-&gt;product_id);
                <span class="hljs-variable">$product</span>-&gt;<span class="hljs-title function_ invoke__">decrement</span>(<span class="hljs-string">'stock'</span>, <span class="hljs-variable">$cart</span>-&gt;quantity);
            }

            <span class="hljs-comment">// æ¸…ç©ºè´­ç‰©è½¦</span>
            <span class="hljs-title class_">Cart</span>::<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">'user_id'</span>, <span class="hljs-title class_">Auth</span>::<span class="hljs-title function_ invoke__">id</span>())-&gt;<span class="hljs-title function_ invoke__">delete</span>();

            DB::<span class="hljs-title function_ invoke__">commit</span>();

            <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">response</span>()-&gt;<span class="hljs-title function_ invoke__">json</span>([
                <span class="hljs-string">'message'</span> =&gt; <span class="hljs-string">'è®¢å•åˆ›å»ºæˆåŠŸ'</span>,
                <span class="hljs-string">'data'</span> =&gt; <span class="hljs-variable">$order</span>
            ]);

        } <span class="hljs-keyword">catch</span> (\<span class="hljs-built_in">Exception</span> <span class="hljs-variable">$e</span>) {
            DB::<span class="hljs-title function_ invoke__">rollBack</span>();
            <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">response</span>()-&gt;<span class="hljs-title function_ invoke__">json</span>([<span class="hljs-string">'error'</span> =&gt; <span class="hljs-string">'è®¢å•åˆ›å»ºå¤±è´¥'</span>], <span class="hljs-number">500</span>);
        }
    }

    <span class="hljs-comment">// ç”Ÿæˆè®¢å•å·</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generateOrderNo</span>(<span class="hljs-params"/>)
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">date</span>(<span class="hljs-string">'YmdHis'</span>) . <span class="hljs-title function_ invoke__">rand</span>(<span class="hljs-number">1000</span>, <span class="hljs-number">9999</span>);
    }
}
</code></pre>
<h3 data-id="heading-12">å››ã€æ¥å£è®¾è®¡ä¸è°ƒç”¨</h3>
<h4 data-id="heading-13">4.1 RESTful APIè®¾è®¡è§„èŒƒ</h4>
<p>Laravel 11æä¾›äº†ä¼˜é›…çš„APIå¼€å‘ä½“éªŒï¼Œéµå¾ªRESTfulè®¾è®¡åŸåˆ™ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// routes/api.php</span>
Route::<span class="hljs-title function_ invoke__">prefix</span>(<span class="hljs-symbol">'api</span>')<span class="hljs-punctuation">-&gt;</span><span class="hljs-title function_ invoke__">group</span>(<span class="hljs-title function_ invoke__">function</span> () {
    <span class="hljs-comment">// ç”¨æˆ·è®¤è¯</span>
    Route::<span class="hljs-title function_ invoke__">post</span>(<span class="hljs-symbol">'login</span>', [AuthController::class, <span class="hljs-symbol">'login</span>']);
    Route::<span class="hljs-title function_ invoke__">post</span>(<span class="hljs-symbol">'register</span>', [AuthController::class, <span class="hljs-symbol">'register</span>']);
    
    <span class="hljs-comment">// éœ€è¦è®¤è¯çš„è·¯ç”±</span>
    Route::<span class="hljs-title function_ invoke__">middleware</span>(<span class="hljs-symbol">'auth</span>:api')<span class="hljs-punctuation">-&gt;</span><span class="hljs-title function_ invoke__">group</span>(<span class="hljs-title function_ invoke__">function</span> () {
        Route::<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-symbol">'user</span>', [UserController::class, <span class="hljs-symbol">'info</span>']);
        Route::<span class="hljs-title function_ invoke__">put</span>(<span class="hljs-symbol">'user</span>', [UserController::class, <span class="hljs-symbol">'update</span>']);
        
        <span class="hljs-comment">// å•†å“ç›¸å…³</span>
        Route::<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-symbol">'products</span>', [ProductController::class, <span class="hljs-symbol">'index</span>']);
        Route::<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-symbol">'products</span>/{id}', [ProductController::class, <span class="hljs-symbol">'show</span>']);
        
        <span class="hljs-comment">// è´­ç‰©è½¦</span>
        Route::<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-symbol">'cart</span>', [CartController::class, <span class="hljs-symbol">'index</span>']);
        Route::<span class="hljs-title function_ invoke__">post</span>(<span class="hljs-symbol">'cart</span>', [CartController::class, <span class="hljs-symbol">'store</span>']);
        Route::<span class="hljs-title function_ invoke__">put</span>(<span class="hljs-symbol">'cart</span>/{id}', [CartController::class, <span class="hljs-symbol">'update</span>']);
        Route::<span class="hljs-title function_ invoke__">delete</span>(<span class="hljs-symbol">'cart</span>/{id}', [CartController::class, <span class="hljs-symbol">'destroy</span>']);
        
        <span class="hljs-comment">// è®¢å•</span>
        Route::<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-symbol">'orders</span>', [OrderController::class, <span class="hljs-symbol">'index</span>']);
        Route::<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-symbol">'orders</span>/{id}', [OrderController::class, <span class="hljs-symbol">'show</span>']);
        Route::<span class="hljs-title function_ invoke__">post</span>(<span class="hljs-symbol">'orders</span>', [OrderController::class, <span class="hljs-symbol">'store</span>']);
        Route::<span class="hljs-title function_ invoke__">post</span>(<span class="hljs-symbol">'orders</span>/{id}/pay', [OrderController::class, <span class="hljs-symbol">'pay</span>']);
    });
});
</code></pre>
<h4 data-id="heading-14">4.2 æ¥å£è®¤è¯ä¸æˆæƒ</h4>
<p>Laravel 11çš„JWTè®¤è¯ä¸­é—´ä»¶é…ç½®ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// app/Http/Kernel.php</span>
<span class="hljs-keyword">protected</span> <span class="hljs-variable">$routeMiddleware</span> = [
    <span class="hljs-string">'auth'</span> =&gt; <span class="hljs-title class_">\App\Http\Middleware\Authenticate</span>::<span class="hljs-variable language_">class</span>,
    <span class="hljs-string">'auth.basic'</span> =&gt; <span class="hljs-title class_">\Illuminate\Auth\Middleware\AuthenticateWithBasicAuth</span>::<span class="hljs-variable language_">class</span>,
    <span class="hljs-string">'auth.api'</span> =&gt; <span class="hljs-title class_">\Tymon\JWTAuth\Http\Middleware\Authenticate</span>::<span class="hljs-variable language_">class</span>,
    <span class="hljs-string">'bindings'</span> =&gt; <span class="hljs-title class_">\Illuminate\Routing\Middleware\SubstituteBindings</span>::<span class="hljs-variable language_">class</span>,
    <span class="hljs-string">'can'</span> =&gt; <span class="hljs-title class_">\Illuminate\Auth\Middleware\AuthorizeGate</span>::<span class="hljs-variable language_">class</span>,
    <span class="hljs-string">'guest'</span> =&gt; <span class="hljs-title class_">\Illuminate\Auth\Middleware\RedirectIfAuthenticated</span>::<span class="hljs-variable language_">class</span>,
    <span class="hljs-string">'throttle'</span> =&gt; <span class="hljs-title class_">\Illuminate\Routing\Middleware\ThrottleRequests</span>::<span class="hljs-variable language_">class</span>,
];
</code></pre>
<h4 data-id="heading-15">4.3 æ•°æ®éªŒè¯ä¸é”™è¯¯å¤„ç†</h4>
<p>Laravel 11æä¾›äº†å¼ºå¤§çš„è¡¨å•è¯·æ±‚éªŒè¯ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">App</span>\<span class="hljs-title class_">Http</span>\<span class="hljs-title class_">Requests</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Foundation</span>\<span class="hljs-title">Http</span>\<span class="hljs-title">FormRequest</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CreateOrderRequest</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">FormRequest</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">authorize</span>(<span class="hljs-params"/>)
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rules</span>(<span class="hljs-params"/>)
    </span>{
        <span class="hljs-keyword">return</span> [
            <span class="hljs-string">'address'</span> =&gt; <span class="hljs-string">'required|string|max:255'</span>,
            <span class="hljs-string">'consignee'</span> =&gt; <span class="hljs-string">'required|string|max:50'</span>,
            <span class="hljs-string">'phone'</span> =&gt; <span class="hljs-string">'required|string|regex:/^1[3-9]\d{9}$/'</span>,
            <span class="hljs-string">'items'</span> =&gt; <span class="hljs-string">'required|array'</span>,
            <span class="hljs-string">'items.*.product_id'</span> =&gt; <span class="hljs-string">'required|exists:products,id'</span>,
            <span class="hljs-string">'items.*.quantity'</span> =&gt; <span class="hljs-string">'required|integer|min:1'</span>
        ];
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">messages</span>(<span class="hljs-params"/>)
    </span>{
        <span class="hljs-keyword">return</span> [
            <span class="hljs-string">'address.required'</span> =&gt; <span class="hljs-string">'æ”¶è´§åœ°å€ä¸èƒ½ä¸ºç©º'</span>,
            <span class="hljs-string">'consignee.required'</span> =&gt; <span class="hljs-string">'æ”¶è´§äººä¸èƒ½ä¸ºç©º'</span>,
            <span class="hljs-string">'phone.required'</span> =&gt; <span class="hljs-string">'æ‰‹æœºå·ä¸èƒ½ä¸ºç©º'</span>,
            <span class="hljs-string">'phone.regex'</span> =&gt; <span class="hljs-string">'æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®'</span>,
        ];
    }
}
</code></pre>
<h3 data-id="heading-16">äº”ã€UniAppå‰ç«¯è°ƒç”¨ç¤ºä¾‹</h3>
<h4 data-id="heading-17">5.1 ç¯å¢ƒé…ç½®ä¸è¯·æ±‚å°è£…</h4>
<p>åœ¨UniAppä¸­é…ç½®APIè¯·æ±‚åŸºç¡€é…ç½®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// utils/request.js</span>
<span class="hljs-keyword">import</span> { getToken } <span class="hljs-keyword">from</span> <span class="hljs-string">'./auth'</span>

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">BASE_URL</span> = <span class="hljs-string">'https://api.yourdomain.com/api'</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">request</span> = (<span class="hljs-params">options</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    uni.<span class="hljs-title function_">request</span>({
      <span class="hljs-attr">url</span>: <span class="hljs-variable constant_">BASE_URL</span> + options.<span class="hljs-property">url</span>,
      <span class="hljs-attr">method</span>: options.<span class="hljs-property">method</span> || <span class="hljs-string">'GET'</span>,
      <span class="hljs-attr">data</span>: options.<span class="hljs-property">data</span> || {},
      <span class="hljs-attr">header</span>: {
        <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
        <span class="hljs-string">'Authorization'</span>: <span class="hljs-title function_">getToken</span>() ? <span class="hljs-string">`Bearer <span class="hljs-subst">${getToken()}</span>`</span> : <span class="hljs-string">''</span>
      },
      <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (res.<span class="hljs-property">statusCode</span> === <span class="hljs-number">200</span>) {
          <span class="hljs-title function_">resolve</span>(res.<span class="hljs-property">data</span>)
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-title function_">reject</span>(res)
        }
      },
      <span class="hljs-attr">fail</span>: <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
        <span class="hljs-title function_">reject</span>(err)
      }
    })
  })
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> request
</code></pre>
<h4 data-id="heading-18">5.2 ç”¨æˆ·è®¤è¯è°ƒç”¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// services/auth.js</span>
<span class="hljs-keyword">import</span> request <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils/request'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">login</span> = (<span class="hljs-params">data</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">'/login'</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
    data
  })
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getUserInfo</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">'/user'</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>
  })
}
</code></pre>
<h4 data-id="heading-19">5.3 å•†å“åˆ—è¡¨è°ƒç”¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// services/product.js</span>
<span class="hljs-keyword">import</span> request <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils/request'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getProducts</span> = (<span class="hljs-params">params = {}</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">'/products'</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>,
    <span class="hljs-attr">data</span>: params
  })
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getProductDetail</span> = (<span class="hljs-params">id</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">`/products/<span class="hljs-subst">${id}</span>`</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>
  })
}
</code></pre>
<h4 data-id="heading-20">5.4 è´­ç‰©è½¦æ“ä½œ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// services/cart.js</span>
<span class="hljs-keyword">import</span> request <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils/request'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getCartList</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">'/cart'</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>
  })
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">addToCart</span> = (<span class="hljs-params">data</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">'/cart'</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
    data
  })
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">updateCart</span> = (<span class="hljs-params">id, data</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">`/cart/<span class="hljs-subst">${id}</span>`</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-string">'PUT'</span>,
    data
  })
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">removeFromCart</span> = (<span class="hljs-params">id</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">`/cart/<span class="hljs-subst">${id}</span>`</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-string">'DELETE'</span>
  })
}
</code></pre>
<h4 data-id="heading-21">5.5 è®¢å•ç®¡ç†</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// services/order.js</span>
<span class="hljs-keyword">import</span> request <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils/request'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">createOrder</span> = (<span class="hljs-params">data</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">'/orders'</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
    data
  })
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getOrderList</span> = (<span class="hljs-params">params = {}</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">'/orders'</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>,
    <span class="hljs-attr">data</span>: params
  })
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getOrderDetail</span> = (<span class="hljs-params">id</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">`/orders/<span class="hljs-subst">${id}</span>`</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>
  })
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">payOrder</span> = (<span class="hljs-params">id</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">`/orders/<span class="hljs-subst">${id}</span>/pay`</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>
  })
}
</code></pre>
<h3 data-id="heading-22">å…­ã€æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h3>
<h4 data-id="heading-23">6.1 æ•°æ®åº“ä¼˜åŒ–</h4>
<p><strong>ç´¢å¼•ä¼˜åŒ–</strong>ï¼šä¸ºå¸¸ç”¨æŸ¥è¯¢å­—æ®µæ·»åŠ ç´¢å¼•ï¼Œæå‡æŸ¥è¯¢æ€§èƒ½ï¼š</p>
<pre><code class="hljs language-go" lang="go">-- å•†å“è¡¨ç´¢å¼•
ALTER TABLE <span class="hljs-string">`products`</span> ADD INDEX <span class="hljs-string">`idx_category_status`</span> (<span class="hljs-string">`category_id`</span>, <span class="hljs-string">`status`</span>);
ALTER TABLE <span class="hljs-string">`products`</span> ADD INDEX <span class="hljs-string">`idx_name`</span> (<span class="hljs-string">`name`</span>);
ALTER TABLE <span class="hljs-string">`products`</span> ADD INDEX <span class="hljs-string">`idx_price`</span> (<span class="hljs-string">`price`</span>);

-- è®¢å•è¡¨ç´¢å¼•
ALTER TABLE <span class="hljs-string">`orders`</span> ADD INDEX <span class="hljs-string">`idx_user_status`</span> (<span class="hljs-string">`user_id`</span>, <span class="hljs-string">`status`</span>);
ALTER TABLE <span class="hljs-string">`orders`</span> ADD INDEX <span class="hljs-string">`idx_created_at`</span> (<span class="hljs-string">`created_at`</span>);

-- è´­ç‰©è½¦è¡¨ç´¢å¼•
ALTER TABLE <span class="hljs-string">`carts`</span> ADD INDEX <span class="hljs-string">`idx_user_product`</span> (<span class="hljs-string">`user_id`</span>, <span class="hljs-string">`product_id`</span>);
</code></pre>
<p><strong>æŸ¥è¯¢ä¼˜åŒ–</strong>ï¼šé¿å…N+1æŸ¥è¯¢é—®é¢˜ï¼Œä½¿ç”¨withé¢„åŠ è½½å…³è”æ•°æ®ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// ä¼˜åŒ–å‰ï¼šN+1æŸ¥è¯¢</span>
<span class="hljs-variable">$orders</span> = <span class="hljs-title class_">Order</span>::<span class="hljs-title function_ invoke__">all</span>();
<span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$orders</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$order</span>) {
    <span class="hljs-keyword">echo</span> <span class="hljs-variable">$order</span>-&gt;user-&gt;name; <span class="hljs-comment">// æ¯æ¬¡å¾ªç¯éƒ½ä¼šæŸ¥è¯¢æ•°æ®åº“</span>
}

<span class="hljs-comment">// ä¼˜åŒ–åï¼šé¢„åŠ è½½å…³è”æ•°æ®</span>
<span class="hljs-variable">$orders</span> = <span class="hljs-title class_">Order</span>::<span class="hljs-title function_ invoke__">with</span>(<span class="hljs-string">'user'</span>, <span class="hljs-string">'items.product'</span>)-&gt;<span class="hljs-title function_ invoke__">get</span>();
</code></pre>
<h4 data-id="heading-24">6.2 ç¼“å­˜ç­–ç•¥</h4>
<p>Laravel 11æä¾›äº†å¼ºå¤§çš„ç¼“å­˜æœºåˆ¶ï¼Œæ”¯æŒå¤šç§ç¼“å­˜é©±åŠ¨ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// é…ç½®ç¼“å­˜é©±åŠ¨ä¸ºRedis
<span class="hljs-attr">CACHE_DRIVER</span>=redis
<span class="hljs-attr">REDIS_HOST</span>=<span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>
<span class="hljs-attr">REDIS_PASSWORD</span>=null
<span class="hljs-attr">REDIS_PORT</span>=<span class="hljs-number">6379</span>

// å•†å“è¯¦æƒ…ç¼“å­˜
public function show($id)
{
    $<span class="hljs-attr">cacheKey</span> = <span class="hljs-string">'product:'</span> . <span class="hljs-variable">$id</span><span class="hljs-comment">;</span>
    
    $<span class="hljs-attr">product</span> = Cache::remember(<span class="hljs-variable">$cacheKey</span>, <span class="hljs-number">3600</span>, function () use (<span class="hljs-variable">$id</span>) {
        return Product::with(<span class="hljs-section">['category', 'skus', 'attributes']</span>)
            -&gt;findOrFail($id)<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>

    return new ProductResource($product)<span class="hljs-comment">;</span>
}

// å•†å“åˆ—è¡¨ç¼“å­˜
public function index(Request $request)
{
    $<span class="hljs-attr">cacheKey</span> = <span class="hljs-string">'products:'</span> . md5(json_encode(<span class="hljs-variable">$request</span>-&gt;all()))<span class="hljs-comment">;</span>
    
    $<span class="hljs-attr">products</span> = Cache::remember(<span class="hljs-variable">$cacheKey</span>, <span class="hljs-number">300</span>, function () use (<span class="hljs-variable">$request</span>) {
        $<span class="hljs-attr">query</span> = Product::with(<span class="hljs-string">'category'</span>)
            -&gt;where('status', 1)<span class="hljs-comment">;</span>

        // æŸ¥è¯¢æ¡ä»¶...
        
        return $query-&gt;paginate(20)<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>

    return ProductResource::collection($products)<span class="hljs-comment">;</span>
}
</code></pre>
<h4 data-id="heading-25">6.3 é˜Ÿåˆ—å¤„ç†</h4>
<p>å¯¹äºè€—æ—¶æ“ä½œï¼Œå¦‚å‘é€é‚®ä»¶ã€ç”ŸæˆæŠ¥è¡¨ç­‰ï¼Œä½¿ç”¨é˜Ÿåˆ—å¼‚æ­¥å¤„ç†ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// é…ç½®é˜Ÿåˆ—é©±åŠ¨ä¸ºRedis</span>
QUEUE_CONNECTION=redis

<span class="hljs-comment">// åˆ›å»ºé˜Ÿåˆ—ä»»åŠ¡</span>
php artisan make:job SendOrderEmail

<span class="hljs-comment">// å‘é€è®¢å•é‚®ä»¶ä»»åŠ¡</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title class_">App</span>\<span class="hljs-title class_">Jobs</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Models</span>\<span class="hljs-title">Order</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Bus</span>\<span class="hljs-title">Queueable</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Contracts</span>\<span class="hljs-title">Queue</span>\<span class="hljs-title">ShouldQueue</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Foundation</span>\<span class="hljs-title">Bus</span>\<span class="hljs-title">Dispatchable</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Queue</span>\<span class="hljs-title">InteractsWithQueue</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Queue</span>\<span class="hljs-title">SerializesModels</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Support</span>\<span class="hljs-title">Facades</span>\<span class="hljs-title">Mail</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SendOrderEmail</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ShouldQueue</span>
</span>{
    <span class="hljs-keyword">use</span> <span class="hljs-title">Dispatchable</span>, <span class="hljs-title">InteractsWithQueue</span>, <span class="hljs-title">Queueable</span>, <span class="hljs-title">SerializesModels</span>;

    <span class="hljs-keyword">protected</span> <span class="hljs-variable">$order</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">Order <span class="hljs-variable">$order</span></span>)
    </span>{
        <span class="hljs-variable language_">$this</span>-&gt;order = <span class="hljs-variable">$order</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handle</span>(<span class="hljs-params"/>)
    </span>{
        <span class="hljs-title class_">Mail</span>::<span class="hljs-title function_ invoke__">to</span>(<span class="hljs-variable">$this</span>-&gt;order-&gt;user-&gt;email)
            -&gt;<span class="hljs-title function_ invoke__">send</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderCreated</span>(<span class="hljs-variable">$this</span>-&gt;order));
    }
}

<span class="hljs-comment">// åœ¨æ§åˆ¶å™¨ä¸­åˆ†å‘ä»»åŠ¡</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">store</span>(<span class="hljs-params">Request <span class="hljs-variable">$request</span></span>)
</span>{
    <span class="hljs-comment">// åˆ›å»ºè®¢å•...</span>
    
    <span class="hljs-title class_">SendOrderEmail</span>::<span class="hljs-title function_ invoke__">dispatch</span>(<span class="hljs-variable">$order</span>);
    
    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">response</span>()-&gt;<span class="hljs-title function_ invoke__">json</span>([<span class="hljs-string">'message'</span> =&gt; <span class="hljs-string">'è®¢å•åˆ›å»ºæˆåŠŸ'</span>]);
}
</code></pre>
<h3 data-id="heading-26">ä¸ƒã€å®‰å…¨é˜²æŠ¤æªæ–½</h3>
<h4 data-id="heading-27">7.1 è¾“å…¥éªŒè¯ä¸è¿‡æ»¤</h4>
<p>Laravel 11å†…ç½®äº†å¼ºå¤§çš„éªŒè¯æœºåˆ¶ï¼Œé˜²æ­¢SQLæ³¨å…¥å’ŒXSSæ”»å‡»ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">store</span>(<span class="hljs-params">Request <span class="hljs-variable">$request</span></span>)
</span>{
    <span class="hljs-variable">$validated</span> = <span class="hljs-variable">$request</span>-&gt;<span class="hljs-title function_ invoke__">validate</span>([
        <span class="hljs-string">'name'</span> =&gt; <span class="hljs-string">'required|string|max:255'</span>,
        <span class="hljs-string">'email'</span> =&gt; <span class="hljs-string">'required|email|unique:users'</span>,
        <span class="hljs-string">'password'</span> =&gt; <span class="hljs-string">'required|string|min:8'</span>,
        <span class="hljs-string">'phone'</span> =&gt; <span class="hljs-string">'required|string|regex:/^1[3-9]\d{9}$/'</span>,
        <span class="hljs-string">'avatar'</span> =&gt; <span class="hljs-string">'nullable|image|max:2048'</span>
    ]);

    <span class="hljs-comment">// å®‰å…¨å¤„ç†è¾“å…¥æ•°æ®</span>
    <span class="hljs-variable">$user</span> = <span class="hljs-title class_">User</span>::<span class="hljs-title function_ invoke__">create</span>([
        <span class="hljs-string">'name'</span> =&gt; <span class="hljs-title function_ invoke__">htmlspecialchars</span>(<span class="hljs-variable">$validated</span>[<span class="hljs-string">'name'</span>]),
        <span class="hljs-string">'email'</span> =&gt; <span class="hljs-variable">$validated</span>[<span class="hljs-string">'email'</span>],
        <span class="hljs-string">'password'</span> =&gt; <span class="hljs-title class_">Hash</span>::<span class="hljs-title function_ invoke__">make</span>(<span class="hljs-variable">$validated</span>[<span class="hljs-string">'password'</span>]),
        <span class="hljs-string">'phone'</span> =&gt; <span class="hljs-variable">$validated</span>[<span class="hljs-string">'phone'</span>]
    ]);

    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">response</span>()-&gt;<span class="hljs-title function_ invoke__">json</span>(<span class="hljs-variable">$user</span>);
}
</code></pre>
<h4 data-id="heading-28">7.2 é€Ÿç‡é™åˆ¶</h4>
<p>é˜²æ­¢APIæ»¥ç”¨ï¼Œé…ç½®é€Ÿç‡é™åˆ¶ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// åœ¨è·¯ç”±ä¸­é…ç½®é€Ÿç‡é™åˆ¶</span>
<span class="hljs-title class_">Route</span>::<span class="hljs-title function_ invoke__">middleware</span>([<span class="hljs-string">'auth:api'</span>, <span class="hljs-string">'throttle:60,1'</span>])-&gt;<span class="hljs-title function_ invoke__">group</span>(function () {
    <span class="hljs-title class_">Route</span>::<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">'profile'</span>, [<span class="hljs-title class_">UserController</span>::<span class="hljs-variable language_">class</span>, <span class="hljs-string">'profile'</span>]);
    <span class="hljs-title class_">Route</span>::<span class="hljs-title function_ invoke__">put</span>(<span class="hljs-string">'profile'</span>, [<span class="hljs-title class_">UserController</span>::<span class="hljs-variable language_">class</span>, <span class="hljs-string">'update'</span>]);
});

<span class="hljs-comment">// åœ¨æ§åˆ¶å™¨æ–¹æ³•ä¸­è‡ªå®šä¹‰é€Ÿç‡é™åˆ¶</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">login</span>(<span class="hljs-params">Request <span class="hljs-variable">$request</span></span>)
</span>{
    <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">middleware</span>(<span class="hljs-string">'throttle:5,1'</span>)-&gt;<span class="hljs-title function_ invoke__">only</span>(<span class="hljs-string">'login'</span>);
    
    <span class="hljs-comment">// ç™»å½•é€»è¾‘...</span>
}
</code></pre>
<h4 data-id="heading-29">7.3 CSRFé˜²æŠ¤</h4>
<p>è™½ç„¶APIé€šå¸¸ä¸éœ€è¦CSRF Tokenï¼Œä½†å¯¹äºæŸäº›æ“ä½œä»éœ€ä¿æŠ¤ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// åœ¨VerifyCsrfTokenä¸­é—´ä»¶ä¸­æ’é™¤APIè·¯ç”±</span>
<span class="hljs-keyword">protected</span> <span class="hljs-variable">$except</span> = [
    <span class="hljs-string">'api/*'</span>
];

<span class="hljs-comment">// å¯¹äºéœ€è¦CSRFä¿æŠ¤çš„æ“ä½œ</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">update</span>(<span class="hljs-params">Request <span class="hljs-variable">$request</span></span>)
</span>{
    <span class="hljs-variable">$request</span>-&gt;<span class="hljs-title function_ invoke__">validate</span>([
        <span class="hljs-string">'_token'</span> =&gt; <span class="hljs-string">'required'</span>
    ]);
    
    <span class="hljs-comment">// æ›´æ–°é€»è¾‘...</span>
}
</code></pre>
<h3 data-id="heading-30">å…«ã€éƒ¨ç½²ä¸è¿ç»´</h3>
<h4 data-id="heading-31">8.1 ç”Ÿäº§ç¯å¢ƒé…ç½®</h4>
<p>Laravel 11çš„ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ç”Ÿæˆåº”ç”¨å¯†é’¥</span>
php artisan key:generate

<span class="hljs-comment"># é…ç½®ç¯å¢ƒå˜é‡</span>
<span class="hljs-attr">APP_ENV</span>=production
<span class="hljs-attr">APP_DEBUG</span>=<span class="hljs-literal">false</span>
<span class="hljs-attr">APP_KEY</span>=base64:...

<span class="hljs-comment"># é…ç½®æ•°æ®åº“è¿æ¥</span>
<span class="hljs-attr">DB_CONNECTION</span>=mysql
<span class="hljs-attr">DB_HOST</span>=<span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>
<span class="hljs-attr">DB_PORT</span>=<span class="hljs-number">3306</span>
<span class="hljs-attr">DB_DATABASE</span>=your_database
<span class="hljs-attr">DB_USERNAME</span>=your_username
<span class="hljs-attr">DB_PASSWORD</span>=your_password

<span class="hljs-comment"># é…ç½®ç¼“å­˜</span>
<span class="hljs-attr">CACHE_DRIVER</span>=redis
<span class="hljs-attr">SESSION_DRIVER</span>=redis
<span class="hljs-attr">QUEUE_CONNECTION</span>=redis
</code></pre>
<h4 data-id="heading-32">8.2 æ€§èƒ½ä¼˜åŒ–å‘½ä»¤</h4>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># ç”Ÿæˆé…ç½®ç¼“å­˜</span>
php artisan config:cache

<span class="hljs-comment"># ç”Ÿæˆè·¯ç”±ç¼“å­˜</span>
php artisan route:cache

<span class="hljs-comment"># ç”Ÿæˆè§†å›¾ç¼“å­˜</span>
php artisan view:cache

<span class="hljs-comment"># ä¼˜åŒ–è‡ªåŠ¨åŠ è½½</span>
composer <span class="hljs-keyword">dump</span>-autoload --optimize

<span class="hljs-comment"># è¿è¡Œæ•°æ®åº“è¿ç§»</span>
php artisan migrate --force
</code></pre>
<h4 data-id="heading-33">8.3 ç›‘æ§ä¸æ—¥å¿—</h4>
<p>é…ç½®æ—¥å¿—è®°å½•å’Œé”™è¯¯ç›‘æ§ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// è®°å½•APIè¯·æ±‚æ—¥å¿—</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handle</span>(<span class="hljs-params">Request <span class="hljs-variable">$request</span>, <span class="hljs-built_in">Closure</span> <span class="hljs-variable">$next</span></span>)
</span>{
    <span class="hljs-variable">$start</span> = <span class="hljs-title function_ invoke__">microtime</span>(<span class="hljs-literal">true</span>);
    
    <span class="hljs-variable">$response</span> = <span class="hljs-variable">$next</span>(<span class="hljs-variable">$request</span>);
    
    <span class="hljs-variable">$duration</span> = <span class="hljs-title function_ invoke__">microtime</span>(<span class="hljs-literal">true</span>) - <span class="hljs-variable">$start</span>;
    
    <span class="hljs-title class_">Log</span>::<span class="hljs-title function_ invoke__">info</span>(<span class="hljs-string">'API Request'</span>, [
        <span class="hljs-string">'method'</span> =&gt; <span class="hljs-variable">$request</span>-&gt;<span class="hljs-title function_ invoke__">method</span>(),
        <span class="hljs-string">'url'</span> =&gt; <span class="hljs-variable">$request</span>-&gt;<span class="hljs-title function_ invoke__">fullUrl</span>(),
        <span class="hljs-string">'ip'</span> =&gt; <span class="hljs-variable">$request</span>-&gt;<span class="hljs-title function_ invoke__">ip</span>(),
        <span class="hljs-string">'duration'</span> =&gt; <span class="hljs-variable">$duration</span>,
        <span class="hljs-string">'status'</span> =&gt; <span class="hljs-variable">$response</span>-&gt;<span class="hljs-title function_ invoke__">getStatusCode</span>()
    ]);
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable">$response</span>;
}
</code></pre>
<h3 data-id="heading-34">ä¹ã€æ€»ç»“ä¸å±•æœ›</h3>
<p>Laravel 11ä¸UniAppçš„ç»“åˆä¸ºç”µå•†ç³»ç»Ÿå¼€å‘æä¾›äº†å®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚Laravel 11çš„ç°ä»£åŒ–ç‰¹æ€§å’Œå¼ºå¤§ç”Ÿæ€ï¼Œé…åˆUniAppçš„è·¨å¹³å°èƒ½åŠ›ï¼Œèƒ½å¤Ÿå¿«é€Ÿæ„å»ºé«˜æ€§èƒ½ã€å¯æ‰©å±•çš„ç”µå•†åº”ç”¨ã€‚</p>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ol>
<li>
<p><strong>ä»£ç è§„èŒƒ</strong>ï¼šéµå¾ªPSRæ ‡å‡†ï¼Œä¿æŒä»£ç æ•´æ´å¯ç»´æŠ¤</p>
</li>
<li>
<p><strong>æµ‹è¯•é©±åŠ¨</strong>ï¼šç¼–å†™å•å…ƒæµ‹è¯•å’ŒåŠŸèƒ½æµ‹è¯•ï¼Œç¡®ä¿ä»£ç è´¨é‡</p>
</li>
<li>
<p><strong>æŒç»­é›†æˆ</strong>ï¼šä½¿ç”¨CI/CDå·¥å…·è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹</p>
</li>
<li>
<p><strong>ç›‘æ§å‘Šè­¦</strong>ï¼šç›‘æ§ç³»ç»Ÿæ€§èƒ½ï¼ŒåŠæ—¶å‘ç°å¹¶è§£å†³é—®é¢˜</p>
</li>
</ol>
<p>éšç€æŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼ŒLaravelæ¡†æ¶ä¹Ÿåœ¨æŒç»­æ¼”è¿›ï¼Œæœªæ¥å¯ä»¥å…³æ³¨ä»¥ä¸‹æ–¹å‘ï¼š</p>
<ul>
<li>
<p>â€¢
<strong>å¾®æœåŠ¡æ¶æ„</strong>ï¼šå°†ç³»ç»Ÿæ‹†åˆ†ä¸ºæ›´å°çš„æœåŠ¡å•å…ƒï¼Œæå‡å¯æ‰©å±•æ€§</p>
</li>
<li>
<p>â€¢
<strong>Serverlesséƒ¨ç½²</strong>ï¼šä½¿ç”¨æ— æœåŠ¡å™¨æ¶æ„é™ä½è¿ç»´æˆæœ¬</p>
</li>
<li>
<p>â€¢
<strong>AIé›†æˆ</strong>ï¼šé›†æˆæ¨èç®—æ³•ã€æ™ºèƒ½å®¢æœç­‰AIèƒ½åŠ›</p>
</li>
<li>
<p>â€¢
<strong>åŒºå—é“¾åº”ç”¨</strong>ï¼šæ¢ç´¢å»ä¸­å¿ƒåŒ–ç”µå•†æ¨¡å¼</p>
</li>
</ul>
<p>é€šè¿‡æœ¬æ–‡çš„å­¦ä¹ ï¼Œç›¸ä¿¡ä½ å·²ç»æŒæ¡äº†ä½¿ç”¨Laravel 11å’ŒUniAppæ„å»ºç”µå•†ç³»ç»Ÿçš„æ ¸å¿ƒæŠ€èƒ½ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œè¿˜éœ€è¦æ ¹æ®å…·ä½“ä¸šåŠ¡éœ€æ±‚è¿›è¡Œå®šåˆ¶å¼€å‘ï¼Œä¸æ–­ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½å’Œç”¨æˆ·ä½“éªŒï¼Œæ‰“é€ å‡ºçœŸæ­£ä¼˜ç§€çš„ç”µå•†å¹³å°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C++ å†…å­˜ä¸æ€§èƒ½ä¼˜åŒ–ï¼šè¯­è¨€ç‰¹æ€§çš„å¼€é”€åˆ†æä¸æ›¿ä»£æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7572510909445308466</link>    <guid>https://juejin.cn/post/7572510909445308466</guid>    <pubDate>2025-11-15T09:28:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572510909445308466" data-draft-id="7572485825705754633" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C++ å†…å­˜ä¸æ€§èƒ½ä¼˜åŒ–ï¼šè¯­è¨€ç‰¹æ€§çš„å¼€é”€åˆ†æä¸æ›¿ä»£æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="C++"/> <meta itemprop="datePublished" content="2025-11-15T09:28:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¸©å®‡é£"/> <meta itemprop="url" content="https://juejin.cn/user/4300945219403368"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C++ å†…å­˜ä¸æ€§èƒ½ä¼˜åŒ–ï¼šè¯­è¨€ç‰¹æ€§çš„å¼€é”€åˆ†æä¸æ›¿ä»£æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4300945219403368/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¸©å®‡é£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T09:28:55.000Z" title="Sat Nov 15 2025 09:28:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»35åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å†…å­˜å’Œæ€§èƒ½æ•æ„Ÿçš„ C++ ç³»ç»Ÿå¼€å‘ä¸­ï¼Œè¯­è¨€ç‰¹æ€§çš„é€‰æ‹©ç›´æ¥å†³å®šç¨‹åºçš„å†…å­˜å ç”¨å’Œè¿è¡Œæ•ˆç‡ã€‚æœ¬æ–‡é’ˆå¯¹ RTTIã€å¼‚å¸¸å¤„ç†ã€è™šå‡½æ•°ã€æ³›å‹ç¼–ç¨‹ã€å€¼è¯­ä¹‰ã€åŠ¨æ€å†…å­˜åˆ†é…ç­‰å…³é”®è¯­è¨€ç‰¹æ€§ï¼Œä»åº•å±‚å®ç°æœºåˆ¶å‡ºå‘ï¼Œæ·±å…¥åˆ†æå…¶å†…å­˜å¼€é”€å’Œæ€§èƒ½ä»£ä»·ï¼Œå¹¶æä¾›å¤šç§é«˜æ€§èƒ½æ›¿ä»£æ–¹æ¡ˆçš„å¯¹æ¯”ã€‚é€šè¿‡ç†è§£è¿™äº›ç‰¹æ€§çš„æƒè¡¡å–èˆï¼Œå¸®åŠ©å¼€å‘è€…åœ¨å†…å­˜æ•ˆç‡ã€è¿è¡Œæ€§èƒ½å’Œä»£ç è´¨é‡ä¹‹é—´åšå‡ºæ˜æ™ºçš„æŠ€æœ¯é€‰æ‹©ã€‚</p>
<h2 data-id="heading-0">ç¦ç”¨ RTTIï¼ˆè¿è¡Œæ—¶ç±»å‹è¯†åˆ«ï¼‰</h2>
<p>RTTI æä¾›è¿è¡Œæ—¶ç±»å‹è¯†åˆ«èƒ½åŠ›ï¼Œä½†ä¾èµ– type_info è¡¨å’Œè™šå‡½æ•°è¡¨ï¼Œå¢åŠ å†…å­˜å ç”¨å’Œè¿è¡Œæ—¶å¼€é”€ã€‚ä½¿ç”¨ç¼–è¯‘é€‰é¡¹ <code>-fno-rtti</code> ç¦ç”¨ RTTI åï¼Œ<code>typeid</code>ã€<code>dynamic_cast</code>ã€<code>std::any</code> ç­‰ç‰¹æ€§æ— æ³•ä½¿ç”¨ã€‚æœ¬ç« ä»‹ç» RTTI çš„åŸºæœ¬æ¦‚å¿µå’Œç”¨æ³•ï¼Œåˆ†æå…¶åº•å±‚å®ç°æœºåˆ¶å’Œæ€§èƒ½ä»£ä»·ï¼Œå¹¶æä¾›ç¼–è¯‘æœŸç±»å‹è¯†åˆ«ã€è‡ªå®šä¹‰ç±»å‹ IDã€std::variant ç­‰æ›¿ä»£æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-1">RTTI ç®€è¿°</h3>
<p>RTTI(Run-Time Type Information) æ˜¯ C++ æä¾›çš„è¿è¡Œæ—¶ç±»å‹è¯†åˆ«æœºåˆ¶ï¼Œå…è®¸ç¨‹åºåœ¨è¿è¡Œæ—¶æŸ¥è¯¢å¯¹è±¡çš„å®é™…ç±»å‹ã€‚RTTI ä¸»è¦åŒ…å«ä¸‰ä¸ªæ ¸å¿ƒåŠŸèƒ½ï¼š<code>typeid</code> è¿ç®—ç¬¦ã€<code>dynamic_cast</code> è¿ç®—ç¬¦å’Œ <code>std::any</code> ç±»å‹ã€‚</p>
<p><strong>typeid è¿ç®—ç¬¦</strong></p>
<p><code>typeid</code> è¿”å›å¯¹è±¡çš„ç±»å‹ä¿¡æ¯ï¼Œç»“æœæ˜¯ <code>std::type_info</code> å¯¹è±¡çš„å¼•ç”¨ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;typeinfo&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span></span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">Base</span>() = <span class="hljs-keyword">default</span>;
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Derived</span> : <span class="hljs-keyword">public</span> Base {};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    std::unique_ptr&lt;Base&gt; ptr = std::<span class="hljs-built_in">make_unique</span>&lt;Derived&gt;();

    <span class="hljs-comment">// è·å–ç±»å‹ä¿¡æ¯</span>
    <span class="hljs-type">const</span> std::type_info&amp; info = <span class="hljs-built_in">typeid</span>(*ptr);
    std::cout &lt;&lt; info.<span class="hljs-built_in">name</span>() &lt;&lt; std::endl;  <span class="hljs-comment">// è¾“å‡ºï¼šDerived</span>

    <span class="hljs-comment">// ç±»å‹æ¯”è¾ƒ</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">typeid</span>(*ptr) == <span class="hljs-built_in">typeid</span>(Derived)) {
        std::cout &lt;&lt; <span class="hljs-string">"ptr points to Derived"</span> &lt;&lt; std::endl;
    }

    <span class="hljs-comment">// è‡ªåŠ¨é‡Šæ”¾ï¼Œæ— éœ€æ‰‹åŠ¨ delete</span>
}
</code></pre>
<p><strong>dynamic_cast è¿ç®—ç¬¦</strong></p>
<p><code>dynamic_cast</code> ç”¨äºåœ¨ç»§æ‰¿å±‚æ¬¡ä¸­è¿›è¡Œå®‰å…¨çš„å‘ä¸‹è½¬æ¢(Downcast)ï¼Œå¦‚æœè½¬æ¢å¤±è´¥è¿”å› <code>nullptr</code>ï¼ˆæŒ‡é’ˆï¼‰æˆ–æŠ›å‡ºå¼‚å¸¸ï¼ˆå¼•ç”¨ï¼‰ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span></span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">Base</span>() = <span class="hljs-keyword">default</span>;
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Derived1</span> : <span class="hljs-keyword">public</span> Base {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">derived1Method</span><span class="hljs-params">()</span> </span>{
        std::cout &lt;&lt; <span class="hljs-string">"Derived1 method"</span> &lt;&lt; std::endl;
    }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Derived2</span> : <span class="hljs-keyword">public</span> Base {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">derived2Method</span><span class="hljs-params">()</span> </span>{
        std::cout &lt;&lt; <span class="hljs-string">"Derived2 method"</span> &lt;&lt; std::endl;
    }
};

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">process</span><span class="hljs-params">(Base* base)</span> </span>{
    <span class="hljs-comment">// å°è¯•å‘ä¸‹è½¬æ¢</span>
    <span class="hljs-keyword">if</span> (Derived1* d1 = <span class="hljs-built_in">dynamic_cast</span>&lt;Derived1*&gt;(base)) {
        d1-&gt;<span class="hljs-built_in">derived1Method</span>();
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Derived2* d2 = <span class="hljs-built_in">dynamic_cast</span>&lt;Derived2*&gt;(base)) {
        d2-&gt;<span class="hljs-built_in">derived2Method</span>();
    }
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    std::unique_ptr&lt;Base&gt; ptr1 = std::<span class="hljs-built_in">make_unique</span>&lt;Derived1&gt;();
    std::unique_ptr&lt;Base&gt; ptr2 = std::<span class="hljs-built_in">make_unique</span>&lt;Derived2&gt;();

    <span class="hljs-built_in">process</span>(ptr1.<span class="hljs-built_in">get</span>());  <span class="hljs-comment">// è¾“å‡ºï¼šDerived1 method</span>
    <span class="hljs-built_in">process</span>(ptr2.<span class="hljs-built_in">get</span>());  <span class="hljs-comment">// è¾“å‡ºï¼šDerived2 method</span>

    <span class="hljs-comment">// è‡ªåŠ¨é‡Šæ”¾ï¼Œæ— éœ€æ‰‹åŠ¨ delete</span>
}
</code></pre>
<p><strong>std::any</strong></p>
<p><code>std::any</code>(C++17) å¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹çš„å€¼ï¼Œä½¿ç”¨ RTTI åœ¨è¿è¡Œæ—¶è¯†åˆ«å­˜å‚¨çš„ç±»å‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;any&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// å­˜å‚¨ä¸åŒç±»å‹çš„å€¼</span>
    std::any value;

    value = <span class="hljs-number">42</span>;
    std::cout &lt;&lt; std::<span class="hljs-built_in">any_cast</span>&lt;<span class="hljs-type">int</span>&gt;(value) &lt;&lt; std::endl;  <span class="hljs-comment">// è¾“å‡ºï¼š42</span>

    value = <span class="hljs-number">3.14</span>;
    std::cout &lt;&lt; std::<span class="hljs-built_in">any_cast</span>&lt;<span class="hljs-type">double</span>&gt;(value) &lt;&lt; std::endl;  <span class="hljs-comment">// è¾“å‡ºï¼š3.14</span>

    value = std::<span class="hljs-built_in">string</span>(<span class="hljs-string">"hello"</span>);
    std::cout &lt;&lt; std::<span class="hljs-built_in">any_cast</span>&lt;std::string&gt;(value) &lt;&lt; std::endl;  <span class="hljs-comment">// è¾“å‡ºï¼šhello</span>

    <span class="hljs-comment">// ç±»å‹æ£€æŸ¥</span>
    <span class="hljs-keyword">if</span> (value.<span class="hljs-built_in">type</span>() == <span class="hljs-built_in">typeid</span>(std::string)) {
        std::cout &lt;&lt; <span class="hljs-string">"value contains a string"</span> &lt;&lt; std::endl;
    }

    <span class="hljs-comment">// ç±»å‹é”™è¯¯æ—¶æŠ›å‡ºå¼‚å¸¸</span>
    <span class="hljs-keyword">try</span> {
        <span class="hljs-type">int</span> x = std::<span class="hljs-built_in">any_cast</span>&lt;<span class="hljs-type">int</span>&gt;(value);  <span class="hljs-comment">// value å½“å‰æ˜¯ string</span>
    } <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> std::bad_any_cast&amp; e) {
        std::cout &lt;&lt; <span class="hljs-string">"Bad cast: "</span> &lt;&lt; e.<span class="hljs-built_in">what</span>() &lt;&lt; std::endl;
    }
}
</code></pre>
<p>è¿™äº› RTTI ç‰¹æ€§æä¾›äº†çµæ´»çš„è¿è¡Œæ—¶ç±»å‹å¤„ç†èƒ½åŠ›ï¼Œä½†éƒ½ä¾èµ–ç¼–è¯‘å™¨ç”Ÿæˆçš„ç±»å‹ä¿¡æ¯è¡¨ï¼Œä¼šå¸¦æ¥é¢å¤–çš„å†…å­˜å’Œæ€§èƒ½å¼€é”€ã€‚</p>
<h3 data-id="heading-2">åº•å±‚å®ç°ä¸å¼€é”€åˆ†æ</h3>
<p>RTTI çš„å®ç°ä¾èµ–ç¼–è¯‘å™¨ç”Ÿæˆçš„å…ƒæ•°æ®ã€‚ç†è§£åº•å±‚å®ç°æœºåˆ¶æœ‰åŠ©äºé‡åŒ– RTTI çš„å†…å­˜å’Œæ€§èƒ½ä»£ä»·ã€‚</p>
<h4 data-id="heading-3">typeid</h4>
<p><code>typeid</code> çš„è¡Œä¸ºå–å†³äºç±»æ˜¯å¦åŒ…å«è™šå‡½æ•°ã€‚</p>
<p><strong>æ²¡æœ‰è™šå‡½æ•°çš„ç±»</strong>ï¼š<code>typeid</code> åœ¨<strong>ç¼–è¯‘æœŸ</strong>ç¡®å®šç±»å‹ï¼Œæ— è¿è¡Œæ—¶å¼€é”€ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleClass</span> {
    <span class="hljs-type">int</span> data_;
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">SimpleClass</span>(<span class="hljs-type">int</span> d) : <span class="hljs-built_in">data_</span>(d) {}
};

<span class="hljs-built_in">static_assert</span>(<span class="hljs-built_in">sizeof</span>(SimpleClass) == <span class="hljs-number">4</span>);

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">SimpleClass <span class="hljs-title">obj</span><span class="hljs-params">(<span class="hljs-number">42</span>)</span></span>;
    <span class="hljs-type">const</span> std::type_info&amp; info = <span class="hljs-built_in">typeid</span>(obj);

    <span class="hljs-comment">// ç¼–è¯‘æœŸç¡®å®šç±»å‹ï¼Œç­‰ä»·äºï¼š</span>
    <span class="hljs-comment">// const std::type_info&amp; info = typeid(SimpleClass);</span>

    std::cout &lt;&lt; info.<span class="hljs-built_in">name</span>() &lt;&lt; std::endl;  <span class="hljs-comment">// è¾“å‡ºï¼šSimpleClass</span>
}
</code></pre>
<p><strong>æœ‰è™šå‡½æ•°çš„ç±»</strong>ï¼šå¯¹äºæœ‰è™šå‡½æ•°çš„ç±»ï¼Œ<code>typeid</code> éœ€è¦åœ¨<strong>è¿è¡Œæ—¶</strong>é€šè¿‡ vptr æŸ¥æ‰¾ç±»å‹ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> {
    <span class="hljs-type">int</span> data_;
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">Base</span>() = <span class="hljs-keyword">default</span>;
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Derived</span> : <span class="hljs-keyword">public</span> Base {};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    std::unique_ptr&lt;Base&gt; ptr = std::<span class="hljs-built_in">make_unique</span>&lt;Derived&gt;();

    <span class="hljs-comment">// è¿è¡Œæ—¶ç¡®å®šç±»å‹</span>
    <span class="hljs-type">const</span> std::type_info&amp; info = <span class="hljs-built_in">typeid</span>(*ptr);
    std::cout &lt;&lt; info.<span class="hljs-built_in">name</span>() &lt;&lt; std::endl;  <span class="hljs-comment">// è¾“å‡ºï¼šDerived</span>

    <span class="hljs-comment">// è‡ªåŠ¨é‡Šæ”¾</span>
}
</code></pre>
<p>åº•å±‚å®ç°ï¼ˆæ¦‚å¿µæ€§è¯´æ˜ï¼Œå®é™…å®ç°ä¾ç¼–è¯‘å™¨è€Œå¼‚ï¼‰ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ç¼–è¯‘å™¨ç”Ÿæˆçš„ä¼ªä»£ç ï¼ˆæ¦‚å¿µæ€§è¯´æ˜ï¼‰ï¼š</span>
<span class="hljs-comment">// 1. è¯»å–å¯¹è±¡çš„ vptr</span>
<span class="hljs-type">void</span>** vptr = *(<span class="hljs-type">void</span>***)ptr;

<span class="hljs-comment">// 2. ä» vtable è¯»å– type_info æŒ‡é’ˆ</span>
<span class="hljs-type">const</span> std::type_info* type_info_ptr = (<span class="hljs-type">const</span> std::type_info*)vptr[<span class="hljs-number">-1</span>];

<span class="hljs-comment">// 3. è¿”å› type_info å¼•ç”¨</span>
<span class="hljs-keyword">return</span> *type_info_ptr;
</code></pre>
<p>å†…å­˜å¸ƒå±€ï¼šå¯¹è±¡<strong>æœ‰ vptr</strong>ï¼Œé¢å¤–å ç”¨æŒ‡é’ˆå¤§å°çš„å¼€é”€ï¼ˆ64 ä½ç³»ç»Ÿ 8 å­—èŠ‚ï¼Œ32 ä½ç³»ç»Ÿ 4 å­—èŠ‚ï¼‰ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Base å¯¹è±¡å†…å­˜å¸ƒå±€ï¼ˆ64ä½ç³»ç»Ÿï¼‰ï¼š</span>
<span class="hljs-comment">// [vptr: 8å­—èŠ‚][data_: 4å­—èŠ‚][padding: 4å­—èŠ‚]</span>
<span class="hljs-built_in">sizeof</span>(Base) = <span class="hljs-number">16</span>  <span class="hljs-comment">// 8 (vptr) + 4 (data_) + 4 (padding)</span>

<span class="hljs-comment">// å†…å­˜å¸ƒå±€å¯è§†åŒ–ï¼š</span>
<span class="hljs-comment">// +--------+--------+--------+--------+</span>
<span class="hljs-comment">// |  vptr  |  vptr  | data_  | data_  |</span>
<span class="hljs-comment">// | (ä½4B) | (é«˜4B) | (4B)   | padding|</span>
<span class="hljs-comment">// +--------+--------+--------+--------+</span>
<span class="hljs-comment">// åœ°å€: 0x00   0x04   0x08   0x0C</span>
</code></pre>
<p><strong>å†…å­˜ä¸æ€§èƒ½å¯¹æ¯”</strong></p>























<table><thead><tr><th>æƒ…å†µ</th><th>å¯¹è±¡å†…å­˜å¼€é”€</th><th>æ€§èƒ½å¼€é”€</th><th>ç±»å‹ç¡®å®šæ—¶æœº</th></tr></thead><tbody><tr><td>æ— è™šå‡½æ•°çš„ç±»</td><td>æ— é¢å¤–å¼€é”€</td><td>æ— å¼€é”€</td><td>ç¼–è¯‘æœŸ</td></tr><tr><td>æœ‰è™šå‡½æ•°çš„ç±»</td><td>+8 å­—èŠ‚ï¼ˆ64 ä½ç³»ç»Ÿ vptrï¼‰</td><td>2 æ¬¡å†…å­˜è®¿é—®</td><td>è¿è¡Œæ—¶</td></tr></tbody></table>
<h4 data-id="heading-4">dynamic_cast</h4>
<p><code>dynamic_cast</code> åªèƒ½ç”¨äº<strong>æœ‰è™šå‡½æ•°çš„å¤šæ€ç±»å‹</strong>ã€‚</p>
<p><strong>ç»§æ‰¿æ— è™šå‡½æ•°çš„ç±»ï¼ˆç¼–è¯‘é”™è¯¯ï¼‰</strong>ï¼šå¦‚æœåŸºç±»æ²¡æœ‰è™šå‡½æ•°ï¼Œæ— æ³•ä½¿ç”¨ <code>dynamic_cast</code>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> {};  <span class="hljs-comment">// æ²¡æœ‰è™šå‡½æ•°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Derived</span> : <span class="hljs-keyword">public</span> Base {};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    std::unique_ptr&lt;Base&gt; ptr = std::<span class="hljs-built_in">make_unique</span>&lt;Derived&gt;();
    Derived* d = <span class="hljs-built_in">dynamic_cast</span>&lt;Derived*&gt;(ptr.<span class="hljs-built_in">get</span>());  <span class="hljs-comment">// ç¼–è¯‘é”™è¯¯ï¼šBase ä¸æ˜¯å¤šæ€ç±»å‹</span>
}
</code></pre>
<p><strong>ç»§æ‰¿æœ‰è™šå‡½æ•°çš„ç±»ï¼ˆæ­£å¸¸å·¥ä½œï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">Base</span>() = <span class="hljs-keyword">default</span>;
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Derived</span> : <span class="hljs-keyword">public</span> Base {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">derivedMethod</span><span class="hljs-params">()</span> </span>{}
};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    std::unique_ptr&lt;Base&gt; ptr = std::<span class="hljs-built_in">make_unique</span>&lt;Derived&gt;();

    <span class="hljs-comment">// å‘ä¸‹è½¬æ¢æˆåŠŸ</span>
    Derived* d = <span class="hljs-built_in">dynamic_cast</span>&lt;Derived*&gt;(ptr.<span class="hljs-built_in">get</span>());  <span class="hljs-comment">// è¿”å› Derived*</span>
    <span class="hljs-keyword">if</span> (d) {
        d-&gt;<span class="hljs-built_in">derivedMethod</span>();
    }

    <span class="hljs-comment">// è‡ªåŠ¨é‡Šæ”¾</span>
}
</code></pre>
<p>åº•å±‚å®ç°ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ç¼–è¯‘å™¨ç”Ÿæˆçš„ä¼ªä»£ç ï¼š</span>
<span class="hljs-comment">// 1. è·å–æºå¯¹è±¡çš„ type_info</span>
<span class="hljs-type">const</span> std::type_info* src_type = <span class="hljs-built_in">get_type_info</span>(ptr);

<span class="hljs-comment">// 2. è·å–ç›®æ ‡ç±»å‹çš„ type_info</span>
<span class="hljs-type">const</span> std::type_info* dst_type = &amp;<span class="hljs-built_in">typeid</span>(Derived);

<span class="hljs-comment">// 3. è°ƒç”¨è¿è¡Œæ—¶åº“å‡½æ•°</span>
<span class="hljs-type">void</span>* result = __dynamic_cast(
    ptr,          <span class="hljs-comment">// æºæŒ‡é’ˆ</span>
    src_type,     <span class="hljs-comment">// æºç±»å‹</span>
    dst_type,     <span class="hljs-comment">// ç›®æ ‡ç±»å‹</span>
    <span class="hljs-number">-1</span>            <span class="hljs-comment">// åç§»é‡</span>
);

<span class="hljs-comment">// 4. æ¯”è¾ƒç±»å‹æ˜¯å¦åŒ¹é…ï¼Œè®¡ç®—æŒ‡é’ˆåç§»</span>
</code></pre>
<p><strong>å†…å­˜ä¸æ€§èƒ½å¯¹æ¯”</strong></p>





























<table><thead><tr><th>æƒ…å†µ</th><th>å¯¹è±¡å†…å­˜å¼€é”€</th><th>æ€§èƒ½å¼€é”€</th><th>èƒ½å¦ä½¿ç”¨ dynamic_cast</th></tr></thead><tbody><tr><td>åŸºç±»æ— è™šå‡½æ•°</td><td>æ— é¢å¤–å¼€é”€</td><td>-</td><td>å¦ï¼ˆç¼–è¯‘é”™è¯¯ï¼‰</td></tr><tr><td>å•ç»§æ‰¿ã€æµ…å±‚æ¬¡</td><td>+8 å­—èŠ‚ï¼ˆvptrï¼‰</td><td>2-3 æ¬¡å†…å­˜è®¿é—®ï¼ˆvptr â†’ type_info â†’ æ¯”è¾ƒï¼‰</td><td>æ˜¯</td></tr><tr><td>å¤šé‡ç»§æ‰¿ã€æ·±å±‚ç»§æ‰¿</td><td>+8 å­—èŠ‚ï¼ˆvptrï¼‰</td><td>å¤šæ¬¡å†…å­˜è®¿é—®ï¼ˆéœ€éå†ç»§æ‰¿é“¾ã€è®¡ç®—åç§»ï¼‰</td><td>æ˜¯</td></tr></tbody></table>
<p>å¤šé‡ç»§æ‰¿å’Œæ·±å±‚ç»§æ‰¿çš„æ€§èƒ½å¼€é”€æ›´é«˜çš„åŸå› ï¼š</p>
<ul>
<li><strong>æ·±å±‚ç»§æ‰¿</strong>ï¼šéœ€è¦éå†ä»å­ç±»åˆ°åŸºç±»çš„ç»§æ‰¿é“¾ï¼Œé€å±‚æ¯”è¾ƒç±»å‹ä¿¡æ¯</li>
<li><strong>å¤šé‡ç»§æ‰¿</strong>ï¼šéœ€è¦è®¡ç®—ä¸åŒåŸºç±»å­å¯¹è±¡çš„æŒ‡é’ˆåç§»é‡ï¼Œå¯èƒ½æ¶‰åŠå¤šä¸ª vtable æŸ¥æ‰¾</li>
</ul>
<h4 data-id="heading-5">std::any</h4>
<p><code>std::any</code> é€šè¿‡ç±»å‹æ“¦é™¤æŠ€æœ¯å®ç°ç±»å‹è¯†åˆ«ï¼Œå†…éƒ¨é€šè¿‡å‡½æ•°æŒ‡é’ˆå’Œ RTTI é…åˆå·¥ä½œï¼Œæ— è®ºå­˜å‚¨çš„ç±»å‹æ˜¯å¦æœ‰è™šå‡½æ•°ã€‚</p>
<p><strong>å®ç°æœºåˆ¶</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// std::any çš„ç®€åŒ–å®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">any</span> {
    <span class="hljs-keyword">union</span> <span class="hljs-title class_">Storage</span> {
        <span class="hljs-type">void</span>* heap_ptr;              <span class="hljs-comment">// å¤§å¯¹è±¡ä½¿ç”¨å †åˆ†é…</span>
        <span class="hljs-built_in">alignas</span>(<span class="hljs-number">8</span>) <span class="hljs-type">char</span> buffer[<span class="hljs-number">16</span>];  <span class="hljs-comment">// å°å¯¹è±¡ä½¿ç”¨æ ˆç¼“å†²åŒºï¼ˆSBOï¼‰</span>
    } storage_;

    <span class="hljs-comment">// æ“ä½œå‡½æ•°æŒ‡é’ˆï¼ˆé€šè¿‡è¿™äº›å‡½æ•°é—´æ¥è®¿é—® type_infoï¼‰</span>
    <span class="hljs-built_in">void</span> (*destroy_)(Storage&amp;);
    <span class="hljs-built_in">void</span> (*copy_)(Storage&amp;, <span class="hljs-type">const</span> Storage&amp;);
    <span class="hljs-type">const</span> std::type_info&amp; (*get_type_)();  <span class="hljs-comment">// è·å–ç±»å‹ä¿¡æ¯çš„å‡½æ•°æŒ‡é’ˆ</span>

<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
    <span class="hljs-title">any</span><span class="hljs-params">(T&amp;&amp; value)</span> </span>{
        <span class="hljs-comment">// ä¸ºæ¯ä¸ªç±»å‹ T ç”Ÿæˆç‰¹åŒ–çš„å‡½æ•°</span>
        get_type_ = []() -&gt; <span class="hljs-type">const</span> std::type_info&amp; {
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">typeid</span>(T);  <span class="hljs-comment">// ä¾èµ– RTTI</span>
        };
        <span class="hljs-comment">// ... å…¶ä»–åˆå§‹åŒ–</span>
    }

    <span class="hljs-function"><span class="hljs-type">const</span> std::type_info&amp; <span class="hljs-title">type</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">get_type_</span>();  <span class="hljs-comment">// é€šè¿‡å‡½æ•°æŒ‡é’ˆè·å– type_info</span>
    }
};
</code></pre>
<p><strong>ä½¿ç”¨ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-cpp" lang="cpp">std::any value = <span class="hljs-number">42</span>;  <span class="hljs-comment">// å­˜å‚¨ int</span>

<span class="hljs-comment">// any_cast å®ç°</span>
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
T <span class="hljs-title">any_cast</span><span class="hljs-params">(<span class="hljs-type">const</span> any&amp; operand)</span> </span>{
    <span class="hljs-comment">// æ¯”è¾ƒ type_info</span>
    <span class="hljs-keyword">if</span> (operand.<span class="hljs-built_in">type</span>() != <span class="hljs-built_in">typeid</span>(T)) {
        <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">bad_any_cast</span>();
    }
    <span class="hljs-keyword">return</span> *<span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">const</span> T*&gt;(&amp;operand.storage_);
}

<span class="hljs-type">int</span> x = <span class="hljs-built_in">any_cast</span>&lt;<span class="hljs-type">int</span>&gt;(value);  <span class="hljs-comment">// OK</span>
<span class="hljs-type">double</span> d = <span class="hljs-built_in">any_cast</span>&lt;<span class="hljs-type">double</span>&gt;(value);  <span class="hljs-comment">// æŠ›å‡º bad_any_cast</span>
</code></pre>
<p><strong>å†…å­˜å¼€é”€</strong></p>
<p><code>std::any</code> å¯¹è±¡æœ¬èº«çš„å¤§å°å›ºå®šä¸º 32-48 å­—èŠ‚ï¼ŒåŒ…å«ï¼š</p>
<ul>
<li>type_info æŒ‡é’ˆï¼ˆ8 å­—èŠ‚ï¼‰</li>
<li>å­˜å‚¨ç©ºé—´ï¼ˆ16-24 å­—èŠ‚ï¼Œç”¨äºå°å¯¹è±¡ä¼˜åŒ–ï¼‰</li>
<li>å‡½æ•°æŒ‡é’ˆï¼ˆ8-16 å­—èŠ‚ï¼Œç”¨äºææ„ã€æ‹·è´ç­‰æ“ä½œï¼‰</li>
</ul>
<p>å­˜å‚¨æ•°æ®æ—¶çš„å†…å­˜åˆ†é…ï¼š</p>
<ul>
<li><strong>å°å¯¹è±¡</strong>ï¼ˆâ‰¤16 å­—èŠ‚ï¼‰ï¼šä½¿ç”¨å†…éƒ¨æ ˆç¼“å†²åŒºï¼Œæ— é¢å¤–å †åˆ†é…</li>
<li><strong>å¤§å¯¹è±¡</strong>ï¼ˆ&gt;16 å­—èŠ‚ï¼‰ï¼šä½¿ç”¨å †åˆ†é…ï¼Œéœ€è¦é¢å¤–å†…å­˜</li>
</ul>
<pre><code class="hljs language-cpp" lang="cpp">std::any a1 = <span class="hljs-number">42</span>;                    <span class="hljs-comment">// int (4å­—èŠ‚)ï¼Œæ ˆç¼“å†²åŒº</span>
std::any a2 = std::<span class="hljs-built_in">string</span>(<span class="hljs-string">"hello"</span>);  <span class="hljs-comment">// string (&gt;16å­—èŠ‚)ï¼Œå †åˆ†é…</span>
</code></pre>
<p><strong>æ€§èƒ½å¼€é”€</strong></p>
<p>ç±»å‹æ£€æŸ¥ï¼šæ¯”è¾ƒ type_info æŒ‡é’ˆï¼ˆ1 æ¬¡æŒ‡é’ˆæ¯”è¾ƒï¼‰</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">if</span> (operand.type_ != &amp;<span class="hljs-built_in">typeid</span>(T)) {  <span class="hljs-comment">// æŒ‡é’ˆæ¯”è¾ƒ</span>
    <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">bad_any_cast</span>();
}
</code></pre>
<h3 data-id="heading-6">æ›¿ä»£æ–¹æ¡ˆä¸€ï¼šç¼–è¯‘æœŸç±»å‹è¯†åˆ«ï¼ˆæ›¿ä»£ typeid å’Œ dynamic_castï¼‰</h3>
<p>ç¼–è¯‘æœŸç±»å‹è¯†åˆ«é€šè¿‡æ¨¡æ¿å’Œ <code>if constexpr</code> åœ¨ç¼–è¯‘æœŸç¡®å®šç±»å‹ï¼Œå®Œå…¨æ¶ˆé™¤è¿è¡Œæ—¶å¼€é”€ã€‚é€‚åˆç±»å‹åœ¨ç¼–è¯‘æœŸå·²çŸ¥çš„åœºæ™¯ã€‚</p>
<p><strong>ä½¿ç”¨ if constexpr è¿›è¡Œç±»å‹åˆ†å‘</strong></p>
<p><code>if constexpr</code>(C++17) æ ¹æ®ç¼–è¯‘æœŸæ¡ä»¶é€‰æ‹©ä»£ç åˆ†æ”¯ï¼Œæœªé€‰ä¸­çš„åˆ†æ”¯ä¸ä¼šç”Ÿæˆä»£ç ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;type_traits&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-type">void</span> <span class="hljs-title">process</span><span class="hljs-params">(T value)</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">if</span> <span class="hljs-title">constexpr</span> <span class="hljs-params">(std::is_integral_v&lt;T&gt;)</span> </span>{
        std::cout &lt;&lt; <span class="hljs-string">"Integer: "</span> &lt;&lt; value &lt;&lt; std::endl;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-built_in">constexpr</span> (std::is_floating_point_v&lt;T&gt;) {
        std::cout &lt;&lt; <span class="hljs-string">"Float: "</span> &lt;&lt; value &lt;&lt; std::endl;
    } <span class="hljs-keyword">else</span> {
        std::cout &lt;&lt; <span class="hljs-string">"Other type"</span> &lt;&lt; std::endl;
    }
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-built_in">process</span>(<span class="hljs-number">42</span>);      <span class="hljs-comment">// ç¼–è¯‘æœŸé€‰æ‹©ç¬¬ä¸€ä¸ªåˆ†æ”¯</span>
    <span class="hljs-built_in">process</span>(<span class="hljs-number">3.14</span>);    <span class="hljs-comment">// ç¼–è¯‘æœŸé€‰æ‹©ç¬¬äºŒä¸ªåˆ†æ”¯</span>
    <span class="hljs-built_in">process</span>(<span class="hljs-string">"hello"</span>); <span class="hljs-comment">// ç¼–è¯‘æœŸé€‰æ‹©ç¬¬ä¸‰ä¸ªåˆ†æ”¯</span>
}
</code></pre>
<p>ç¼–è¯‘å™¨ä¸ºæ¯ä¸ªç±»å‹ç”Ÿæˆç‰¹åŒ–ä»£ç ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// process&lt;int&gt; ç”Ÿæˆçš„ä»£ç ï¼ˆç®€åŒ–ï¼‰</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">process_int</span><span class="hljs-params">(<span class="hljs-type">int</span> value)</span> </span>{
    std::cout &lt;&lt; <span class="hljs-string">"Integer: "</span> &lt;&lt; value &lt;&lt; std::endl;
    <span class="hljs-comment">// å…¶ä»–åˆ†æ”¯çš„ä»£ç è¢«å®Œå…¨ä¸¢å¼ƒ</span>
}

<span class="hljs-comment">// process&lt;double&gt; ç”Ÿæˆçš„ä»£ç ï¼ˆç®€åŒ–ï¼‰</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">process_double</span><span class="hljs-params">(<span class="hljs-type">double</span> value)</span> </span>{
    std::cout &lt;&lt; <span class="hljs-string">"Float: "</span> &lt;&lt; value &lt;&lt; std::endl;
    <span class="hljs-comment">// å…¶ä»–åˆ†æ”¯çš„ä»£ç è¢«å®Œå…¨ä¸¢å¼ƒ</span>
}
</code></pre>
<p><strong>ä½¿ç”¨ CRTP å®ç°ç¼–è¯‘æœŸå¤šæ€</strong></p>
<p>CRTP(Curiously Recurring Template Pattern) é€šè¿‡æ¨¡æ¿ç»§æ‰¿å®ç°ç¼–è¯‘æœŸå¤šæ€ï¼Œæ›¿ä»£è™šå‡½æ•°ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// CRTP åŸºç±»</span>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> Derived&gt;
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">area</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-comment">// ç¼–è¯‘æœŸè½¬æ¢ä¸ºæ´¾ç”Ÿç±»ï¼Œé™æ€åˆ†å‘</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">const</span> Derived*&gt;(<span class="hljs-keyword">this</span>)-&gt;<span class="hljs-built_in">areaImpl</span>();
    }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> : <span class="hljs-keyword">public</span> Shape&lt;Circle&gt; {
    <span class="hljs-type">double</span> radius_;
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Circle</span>(<span class="hljs-type">double</span> r) : <span class="hljs-built_in">radius_</span>(r) {}
    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">areaImpl</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-number">3.14159</span> * radius_ * radius_;
    }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span> : <span class="hljs-keyword">public</span> Shape&lt;Rectangle&gt; {
    <span class="hljs-type">double</span> width_, height_;
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Rectangle</span>(<span class="hljs-type">double</span> w, <span class="hljs-type">double</span> h) : <span class="hljs-built_in">width_</span>(w), <span class="hljs-built_in">height_</span>(h) {}
    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">areaImpl</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> width_ * height_;
    }
};

<span class="hljs-comment">// æ¨¡æ¿å‡½æ•°å¤„ç†ä¸åŒç±»å‹</span>
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> ShapeType&gt;
<span class="hljs-type">void</span> <span class="hljs-title">printArea</span><span class="hljs-params">(<span class="hljs-type">const</span> Shape&lt;ShapeType&gt;&amp; shape)</span> </span>{
    std::cout &lt;&lt; <span class="hljs-string">"Area: "</span> &lt;&lt; shape.<span class="hljs-built_in">area</span>() &lt;&lt; std::endl;
    <span class="hljs-comment">// ç¼–è¯‘æœŸç¡®å®šè°ƒç”¨ Circle::areaImpl æˆ– Rectangle::areaImpl</span>
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">Circle <span class="hljs-title">c</span><span class="hljs-params">(<span class="hljs-number">5.0</span>)</span></span>;
    <span class="hljs-function">Rectangle <span class="hljs-title">r</span><span class="hljs-params">(<span class="hljs-number">3.0</span>, <span class="hljs-number">4.0</span>)</span></span>;

    <span class="hljs-built_in">printArea</span>(c);  <span class="hljs-comment">// ç¼–è¯‘å™¨å®ä¾‹åŒ– printArea&lt;Circle&gt;</span>
    <span class="hljs-built_in">printArea</span>(r);  <span class="hljs-comment">// ç¼–è¯‘å™¨å®ä¾‹åŒ– printArea&lt;Rectangle&gt;</span>
}
</code></pre>
<p><strong>å†…å­˜ä¸æ€§èƒ½å¯¹æ¯”</strong></p>























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>å¯¹è±¡å†…å­˜å¼€é”€</th><th>æ€§èƒ½å¼€é”€</th><th>è¿è¡Œæ—¶å¤šæ€</th></tr></thead><tbody><tr><td>RTTI (<code>dynamic_cast</code>)</td><td>+8 å­—èŠ‚ vptr</td><td>å¤šæ¬¡å†…å­˜è®¿é—®</td><td>æ”¯æŒ</td></tr><tr><td>ç¼–è¯‘æœŸç±»å‹è¯†åˆ«</td><td>æ— é¢å¤–å¼€é”€</td><td>é›¶å¼€é”€ï¼ˆç›´æ¥è°ƒç”¨ï¼‰</td><td>ä¸æ”¯æŒ</td></tr></tbody></table>
<h3 data-id="heading-7">æ›¿ä»£æ–¹æ¡ˆäºŒï¼šè‡ªå®šä¹‰ç±»å‹ ID ç³»ç»Ÿï¼ˆæ›¿ä»£ dynamic_castï¼‰</h3>
<p>è‡ªå®šä¹‰ç±»å‹ ID ç³»ç»Ÿé€šè¿‡ä¸ºæ¯ä¸ªç±»åˆ†é…å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œåœ¨è¿è¡Œæ—¶è¿›è¡Œç±»å‹åŒ¹é…ï¼Œæ€§èƒ½ä¼˜äº <code>dynamic_cast</code>ã€‚</p>
<p><strong>åŸºç¡€å®ç°</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ç±»å‹ ID æšä¸¾</span>
<span class="hljs-keyword">enum class</span> <span class="hljs-title class_">TypeID</span> {
    Base,
    Derived1,
    Derived2,
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> {
<span class="hljs-keyword">protected</span>:
    TypeID type_id_;

    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">Base</span><span class="hljs-params">(TypeID id)</span> : type_id_(id) {</span>}

<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">Base</span>() = <span class="hljs-keyword">default</span>;

    <span class="hljs-function">TypeID <span class="hljs-title">getTypeID</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> type_id_; }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Derived1</span> : <span class="hljs-keyword">public</span> Base {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Derived1</span>() : <span class="hljs-built_in">Base</span>(TypeID::Derived1) {}

    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">derived1Method</span><span class="hljs-params">()</span> </span>{
        std::cout &lt;&lt; <span class="hljs-string">"Derived1 method"</span> &lt;&lt; std::endl;
    }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Derived2</span> : <span class="hljs-keyword">public</span> Base {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Derived2</span>() : <span class="hljs-built_in">Base</span>(TypeID::Derived2) {}

    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">derived2Method</span><span class="hljs-params">()</span> </span>{
        std::cout &lt;&lt; <span class="hljs-string">"Derived2 method"</span> &lt;&lt; std::endl;
    }
};

<span class="hljs-comment">// ç±»å‹å®‰å…¨çš„å‘ä¸‹è½¬æ¢</span>
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> Derived, TypeID ID&gt;
Derived* <span class="hljs-title">cast</span><span class="hljs-params">(Base* base)</span> </span>{
    <span class="hljs-keyword">if</span> (base &amp;&amp; base-&gt;<span class="hljs-built_in">getTypeID</span>() == ID) {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">static_cast</span>&lt;Derived*&gt;(base);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">process</span><span class="hljs-params">(Base* base)</span> </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span>* d1 = <span class="hljs-built_in">cast</span>&lt;Derived1, TypeID::Derived1&gt;(base)) {
        d1-&gt;<span class="hljs-built_in">derived1Method</span>();
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span>* d2 = <span class="hljs-built_in">cast</span>&lt;Derived2, TypeID::Derived2&gt;(base)) {
        d2-&gt;<span class="hljs-built_in">derived2Method</span>();
    }
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    std::unique_ptr&lt;Base&gt; ptr = std::<span class="hljs-built_in">make_unique</span>&lt;Derived1&gt;();
    <span class="hljs-built_in">process</span>(ptr.<span class="hljs-built_in">get</span>());  <span class="hljs-comment">// è¾“å‡ºï¼šDerived1 method</span>
}
</code></pre>
<p><strong>è‡ªåŠ¨ç”Ÿæˆç±»å‹ ID</strong></p>
<p>ä½¿ç”¨é™æ€è®¡æ•°å™¨è‡ªåŠ¨ä¸ºæ¯ä¸ªç±»åˆ†é…å”¯ä¸€ IDï¼Œé¿å…æ‰‹åŠ¨ç»´æŠ¤æšä¸¾ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> {
    <span class="hljs-keyword">using</span> TypeIDValue = <span class="hljs-type">uint32_t</span>;

<span class="hljs-keyword">protected</span>:
    TypeIDValue type_id_;

    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">Base</span><span class="hljs-params">(TypeIDValue id)</span> : type_id_(id) {</span>}

    <span class="hljs-comment">// é™æ€ç±»å‹ ID ç”Ÿæˆå™¨</span>
    <span class="hljs-function"><span class="hljs-type">static</span> TypeIDValue <span class="hljs-title">nextTypeID</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-type">static</span> TypeIDValue next_id = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">return</span> next_id++;
    }

<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">Base</span>() = <span class="hljs-keyword">default</span>;

    <span class="hljs-function">TypeIDValue <span class="hljs-title">getTypeID</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> type_id_; }

    <span class="hljs-comment">// è·å–ç±»å‹çš„é™æ€ ID</span>
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
    <span class="hljs-type">static</span> TypeIDValue <span class="hljs-title">getStaticTypeID</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-type">static</span> TypeIDValue id = <span class="hljs-built_in">nextTypeID</span>();
        <span class="hljs-keyword">return</span> id;
    }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Derived1</span> : <span class="hljs-keyword">public</span> Base {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Derived1</span>() : <span class="hljs-built_in">Base</span>(<span class="hljs-built_in">getStaticTypeID</span>&lt;Derived1&gt;()) {}
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Derived2</span> : <span class="hljs-keyword">public</span> Base {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Derived2</span>() : <span class="hljs-built_in">Base</span>(<span class="hljs-built_in">getStaticTypeID</span>&lt;Derived2&gt;()) {}
};

<span class="hljs-comment">// ç±»å‹å®‰å…¨çš„å‘ä¸‹è½¬æ¢</span>
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> Derived&gt;
Derived* <span class="hljs-title">cast</span><span class="hljs-params">(Base* base)</span> </span>{
    <span class="hljs-keyword">if</span> (base &amp;&amp; base-&gt;<span class="hljs-built_in">getTypeID</span>() == Base::<span class="hljs-built_in">getStaticTypeID</span>&lt;Derived&gt;()) {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">static_cast</span>&lt;Derived*&gt;(base);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">process</span><span class="hljs-params">(Base* base)</span> </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span>* d1 = <span class="hljs-built_in">cast</span>&lt;Derived1&gt;(base)) {
        d1-&gt;<span class="hljs-built_in">derived1Method</span>();
    }
}
</code></pre>
<p><strong>å†…å­˜ä¸æ€§èƒ½å¯¹æ¯”</strong></p>























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>å¯¹è±¡å†…å­˜å¼€é”€</th><th>æ€§èƒ½å¼€é”€</th><th>è¿è¡Œæ—¶å¤šæ€</th></tr></thead><tbody><tr><td><code>dynamic_cast</code></td><td>+8 å­—èŠ‚ vptr</td><td>å¤šæ¬¡å†…å­˜è®¿é—®</td><td>æ”¯æŒ</td></tr><tr><td>è‡ªå®šä¹‰ç±»å‹ ID</td><td>+4 å­—èŠ‚ <code>type_id_</code></td><td>1 æ¬¡æ•´æ•°æ¯”è¾ƒ</td><td>æ”¯æŒ</td></tr></tbody></table>
<h3 data-id="heading-8">æ›¿ä»£æ–¹æ¡ˆä¸‰ï¼šstd::variantï¼ˆæ›¿ä»£ std::any å’Œè¿è¡Œæ—¶ç±»å‹åˆ‡æ¢ï¼‰</h3>
<p><code>std::variant</code>(C++17) æ˜¯ç±»å‹å®‰å…¨çš„è”åˆä½“ï¼Œå¯ä»¥åœ¨ç¼–è¯‘æœŸç¡®å®šçš„ç±»å‹é›†åˆä¸­å­˜å‚¨ä»»æ„ä¸€ä¸ªï¼Œæ€§èƒ½ä¼˜äº <code>std::any</code>ã€‚</p>
<p><strong>åŸºç¡€ç”¨æ³•</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;variant&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-comment">// å®šä¹‰å¯èƒ½çš„ç±»å‹é›†åˆ</span>
<span class="hljs-keyword">using</span> Data = std::variant&lt;<span class="hljs-type">int</span>, <span class="hljs-type">double</span>, std::string&gt;;

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    Data value;

    value = <span class="hljs-number">42</span>;
    std::cout &lt;&lt; std::<span class="hljs-built_in">get</span>&lt;<span class="hljs-type">int</span>&gt;(value) &lt;&lt; std::endl;  <span class="hljs-comment">// è¾“å‡ºï¼š42</span>

    value = <span class="hljs-number">3.14</span>;
    std::cout &lt;&lt; std::<span class="hljs-built_in">get</span>&lt;<span class="hljs-type">double</span>&gt;(value) &lt;&lt; std::endl;  <span class="hljs-comment">// è¾“å‡ºï¼š3.14</span>

    value = std::<span class="hljs-built_in">string</span>(<span class="hljs-string">"hello"</span>);
    std::cout &lt;&lt; std::<span class="hljs-built_in">get</span>&lt;std::string&gt;(value) &lt;&lt; std::endl;  <span class="hljs-comment">// è¾“å‡ºï¼šhello</span>
}
</code></pre>
<p><strong>å†…å­˜å¸ƒå±€</strong></p>
<p><code>std::variant</code> çš„å¤§å°ç­‰äºæœ€å¤§ç±»å‹çš„å¤§å°åŠ ä¸Šç´¢å¼•å­—èŠ‚ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Small</span> { <span class="hljs-type">char</span> c; };          <span class="hljs-comment">// 1 å­—èŠ‚</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Medium</span> { <span class="hljs-type">int</span> i; };          <span class="hljs-comment">// 4 å­—èŠ‚</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Large</span> { <span class="hljs-type">double</span> d[<span class="hljs-number">10</span>]; };    <span class="hljs-comment">// 80 å­—èŠ‚</span>

<span class="hljs-keyword">using</span> V = std::variant&lt;Small, Medium, Large&gt;;

<span class="hljs-comment">// sizeof(V) = 80 (Large) + padding + ç´¢å¼•</span>
<span class="hljs-comment">// é€šå¸¸æ˜¯ 88 å­—èŠ‚</span>
</code></pre>
<p><strong>å†…å­˜ä¸æ€§èƒ½å¯¹æ¯”</strong></p>























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>å¯¹è±¡å†…å­˜å¼€é”€</th><th>æ€§èƒ½å¼€é”€</th><th>ç±»å‹é›†åˆ</th></tr></thead><tbody><tr><td><code>std::any</code></td><td>32-48 å­—èŠ‚ï¼ˆå›ºå®šï¼‰</td><td>æŒ‡é’ˆæ¯”è¾ƒ</td><td>ä»»æ„ç±»å‹</td></tr><tr><td><code>std::variant</code></td><td>æœ€å¤§ç±»å‹å¤§å° + ç´¢å¼•</td><td>æ•´æ•°æ¯”è¾ƒï¼ˆç´¢å¼•ï¼‰</td><td>ç¼–è¯‘æœŸç¡®å®š</td></tr></tbody></table>
<h2 data-id="heading-9">ç¦ç”¨å¼‚å¸¸æ•è·</h2>
<p>C++ å¼‚å¸¸æ•è·æ¶‰åŠæ ˆå±•å¼€(Stack Unwinding)ã€RTTI æŸ¥è¯¢ã€å†…å­˜åˆ†é…ç­‰æ“ä½œï¼Œåœ¨é«˜æ€§èƒ½ç³»ç»Ÿä¸­å¸¦æ¥æ˜¾è‘—è¿è¡Œæ—¶å¼€é”€ã€‚ä½¿ç”¨ç¼–è¯‘é€‰é¡¹ <code>-fno-exceptions</code> ç¦ç”¨å¼‚å¸¸å¤„ç†åï¼Œä¸èƒ½ä½¿ç”¨ <code>try-catch</code> è¯­å¥ï¼Œä»è€Œæ¶ˆé™¤å¼‚å¸¸æ•è·çš„è¿è¡Œæ—¶ä»£ä»·ã€‚</p>
<h3 data-id="heading-10">å¼‚å¸¸æ•è·ç®€è¿°</h3>
<p>C++ å¼‚å¸¸å¤„ç†(Exception Handling)å…è®¸åœ¨æ£€æµ‹åˆ°é”™è¯¯çš„ä½ç½®æŠ›å‡ºå¼‚å¸¸(throw)ï¼Œåœ¨è°ƒç”¨æ ˆçš„ä¸Šå±‚æ•è·(catch)å¹¶å¤„ç†ã€‚å¼‚å¸¸ä¼šè‡ªåŠ¨æ²¿è°ƒç”¨æ ˆå‘ä¸Šä¼ æ’­ï¼Œç›´åˆ°è¢«æ•è·æˆ–å¯¼è‡´ç¨‹åºç»ˆæ­¢ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdexcept&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">divide</span><span class="hljs-params">(<span class="hljs-type">double</span> a, <span class="hljs-type">double</span> b)</span> </span>{
    <span class="hljs-keyword">if</span> (b == <span class="hljs-number">0.0</span>) {
        <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">runtime_error</span>(<span class="hljs-string">"Division by zero"</span>);  <span class="hljs-comment">// æŠ›å‡ºå¼‚å¸¸</span>
    }
    <span class="hljs-keyword">return</span> a / b;
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">try</span> {
        <span class="hljs-type">double</span> result = <span class="hljs-built_in">divide</span>(<span class="hljs-number">10.0</span>, <span class="hljs-number">0.0</span>);
        std::cout &lt;&lt; <span class="hljs-string">"Result: "</span> &lt;&lt; result &lt;&lt; std::endl;
    } <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> std::runtime_error&amp; e) {  <span class="hljs-comment">// æ•è·å¼‚å¸¸</span>
        std::cerr &lt;&lt; <span class="hljs-string">"Error: "</span> &lt;&lt; e.<span class="hljs-built_in">what</span>() &lt;&lt; std::endl;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>å¼‚å¸¸ä¼ æ’­è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è°ƒç”¨æ ˆä¸Šæ‰€æœ‰å±€éƒ¨å¯¹è±¡çš„ææ„å‡½æ•°(Stack Unwinding)ï¼Œç¡®ä¿èµ„æºæ­£ç¡®é‡Šæ”¾ã€‚</p>
<h3 data-id="heading-11">åº•å±‚å®ç°ä¸å¼€é”€åˆ†æ</h3>
<p>å¼‚å¸¸å¤„ç†çš„æ€§èƒ½å¼€é”€ä¸»è¦æ¥è‡ªä¸‰ä¸ªæ–¹é¢ï¼šæ ˆå±•å¼€(Stack Unwinding)ã€RTTI ç±»å‹åŒ¹é…å’Œå¼‚å¸¸å¯¹è±¡åˆ†é…ã€‚</p>
<p><strong>æ ˆå±•å¼€æœºåˆ¶</strong></p>
<p>å½“å¼‚å¸¸æŠ›å‡ºåï¼Œè¿è¡Œæ—¶ç³»ç»Ÿéœ€è¦æ²¿è°ƒç”¨æ ˆå‘ä¸ŠæŸ¥æ‰¾åŒ¹é…çš„ catch å—ï¼ŒåŒæ—¶è°ƒç”¨æ ˆä¸Šæ‰€æœ‰å±€éƒ¨å¯¹è±¡çš„ææ„å‡½æ•°ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Resource</span> {
    <span class="hljs-type">int</span> id_;
    <span class="hljs-built_in">Resource</span>(<span class="hljs-type">int</span> id) : <span class="hljs-built_in">id_</span>(id) {
        std::cout &lt;&lt; <span class="hljs-string">"Resource "</span> &lt;&lt; id_ &lt;&lt; <span class="hljs-string">" acquired\n"</span>;
    }
    ~<span class="hljs-built_in">Resource</span>() {
        std::cout &lt;&lt; <span class="hljs-string">"Resource "</span> &lt;&lt; id_ &lt;&lt; <span class="hljs-string">" released\n"</span>;
    }
};

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">level3</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">Resource <span class="hljs-title">r3</span><span class="hljs-params">(<span class="hljs-number">3</span>)</span></span>;
    <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">runtime_error</span>(<span class="hljs-string">"Error"</span>);
    <span class="hljs-comment">// r3 çš„ææ„å‡½æ•°ä¼šè¢«è°ƒç”¨</span>
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">level2</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">Resource <span class="hljs-title">r2</span><span class="hljs-params">(<span class="hljs-number">2</span>)</span></span>;
    <span class="hljs-built_in">level3</span>();
    <span class="hljs-comment">// r2 çš„ææ„å‡½æ•°ä¼šè¢«è°ƒç”¨</span>
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">level1</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">Resource <span class="hljs-title">r1</span><span class="hljs-params">(<span class="hljs-number">1</span>)</span></span>;
    <span class="hljs-keyword">try</span> {
        <span class="hljs-built_in">level2</span>();
    } <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> std::exception&amp; e) {
        std::cout &lt;&lt; <span class="hljs-string">"Caught: "</span> &lt;&lt; e.<span class="hljs-built_in">what</span>() &lt;&lt; <span class="hljs-string">"\n"</span>;
    }
    <span class="hljs-comment">// r1 æ­£å¸¸ææ„</span>
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-built_in">level1</span>();
    <span class="hljs-comment">// è¾“å‡ºé¡ºåºï¼š</span>
    <span class="hljs-comment">// Resource 1 acquired</span>
    <span class="hljs-comment">// Resource 2 acquired</span>
    <span class="hljs-comment">// Resource 3 acquired</span>
    <span class="hljs-comment">// Resource 3 released  (æ ˆå±•å¼€)</span>
    <span class="hljs-comment">// Resource 2 released  (æ ˆå±•å¼€)</span>
    <span class="hljs-comment">// Caught: Error</span>
    <span class="hljs-comment">// Resource 1 released  (æ­£å¸¸ææ„)</span>
}
</code></pre>
<p>æ ˆå±•å¼€çš„åº•å±‚å®ç°ä¾èµ–ç¼–è¯‘å™¨ç”Ÿæˆçš„å…ƒæ•°æ®è¡¨ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ç¼–è¯‘å™¨ç”Ÿæˆçš„æ ˆå±•å¼€è¡¨ï¼ˆä¼ªä»£ç ï¼‰</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">UnwindEntry</span> {
    <span class="hljs-type">void</span>* function_start;    <span class="hljs-comment">// å‡½æ•°èµ·å§‹åœ°å€</span>
    <span class="hljs-type">void</span>* function_end;      <span class="hljs-comment">// å‡½æ•°ç»“æŸåœ°å€</span>
    <span class="hljs-type">void</span>* lsda;              <span class="hljs-comment">// Language Specific Data Areaï¼ˆææ„å‡½æ•°åˆ—è¡¨ï¼‰</span>
    <span class="hljs-type">void</span>* personality;       <span class="hljs-comment">// å¼‚å¸¸å¤„ç†å‡½æ•°æŒ‡é’ˆ</span>
};
</code></pre>
<p>å½“å¼‚å¸¸æŠ›å‡ºæ—¶ï¼Œè¿è¡Œæ—¶ç³»ç»Ÿæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li><strong>æŸ¥æ‰¾æ ˆå±•å¼€è¡¨</strong>ï¼šæ ¹æ®å½“å‰æŒ‡ä»¤åœ°å€æŸ¥æ‰¾å¯¹åº”çš„ UnwindEntry</li>
<li><strong>è°ƒç”¨ææ„å‡½æ•°</strong>ï¼šæŒ‰ LSDA è®°å½•çš„é¡ºåºè°ƒç”¨å±€éƒ¨å¯¹è±¡çš„ææ„å‡½æ•°</li>
<li><strong>æ¢å¤æ ˆå¸§</strong>ï¼šæ¢å¤å¯„å­˜å™¨çŠ¶æ€ï¼Œè·³è½¬åˆ°ä¸Šä¸€å±‚è°ƒç”¨è€…</li>
<li><strong>é‡å¤æ­¥éª¤ 1-3</strong>ï¼šç›´åˆ°æ‰¾åˆ°åŒ¹é…çš„ catch å—</li>
</ol>
<p><strong>RTTI ç±»å‹åŒ¹é…</strong></p>
<p>catch å—éœ€è¦åœ¨è¿è¡Œæ—¶åˆ¤æ–­å¼‚å¸¸å¯¹è±¡æ˜¯å¦åŒ¹é…ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">throw</span> <span class="hljs-built_in">DerivedError</span>();
} <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> BaseError&amp; e) {     <span class="hljs-comment">// åŒ¹é…ï¼ˆæ´¾ç”Ÿç±» â†’ åŸºç±»ï¼‰</span>
    <span class="hljs-comment">// å¤„ç†å¼‚å¸¸</span>
} <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> OtherError&amp; e) {    <span class="hljs-comment">// ä¸åŒ¹é…</span>
    <span class="hljs-comment">// ä¸æ‰§è¡Œ</span>
}
</code></pre>
<p>ç±»å‹åŒ¹é…ä¾èµ– RTTIï¼Œè¿è¡Œæ—¶ç³»ç»Ÿéœ€è¦ï¼š</p>
<ol>
<li>è·å–å¼‚å¸¸å¯¹è±¡çš„ type_infoï¼ˆé€šè¿‡ vptrï¼‰</li>
<li>é€ä¸ªæ¯”è¾ƒ catch å—çš„ç›®æ ‡ç±»å‹</li>
<li>æ£€æŸ¥ç»§æ‰¿å…³ç³»ï¼ˆå¦‚æœç›®æ ‡æ˜¯åŸºç±»ï¼‰</li>
</ol>
<p><strong>å¼‚å¸¸å¯¹è±¡åˆ†é…</strong></p>
<p>æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œè¿è¡Œæ—¶ç³»ç»Ÿéœ€è¦åœ¨å †ä¸Šåˆ†é…å¼‚å¸¸å¯¹è±¡çš„å‰¯æœ¬ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">throwException</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">LargeException <span class="hljs-title">ex</span><span class="hljs-params">(<span class="hljs-comment">/* å¤§é‡æ•°æ® */</span>)</span></span>;
    <span class="hljs-keyword">throw</span> ex;  <span class="hljs-comment">// å¤åˆ¶ ex åˆ°å †ä¸Š</span>
    <span class="hljs-comment">// ex çš„æ ˆå†…å­˜ä¼šè¢«é‡Šæ”¾ï¼ˆæ ˆå±•å¼€ï¼‰</span>
}
</code></pre>
<p>å¼‚å¸¸å¯¹è±¡åˆ†é…çš„å¼€é”€ï¼š</p>
<ul>
<li><strong>å†…å­˜åˆ†é…</strong>ï¼šè°ƒç”¨ <code>__cxa_allocate_exception</code>ï¼ˆç±»ä¼¼ mallocï¼‰</li>
<li><strong>å¯¹è±¡æ„é€ </strong>ï¼šè°ƒç”¨æ‹·è´æ„é€ å‡½æ•°æˆ–ç§»åŠ¨æ„é€ å‡½æ•°</li>
<li><strong>å†…å­˜é‡Šæ”¾</strong>ï¼šå¼‚å¸¸å¤„ç†å®Œæˆåè°ƒç”¨ <code>__cxa_free_exception</code></li>
</ul>
<p><strong>æ€§èƒ½å¼€é”€æ€»ç»“</strong></p>






























<table><thead><tr><th>æ“ä½œ</th><th>å¼€é”€ç±»å‹</th><th>å½±å“èŒƒå›´</th></tr></thead><tbody><tr><td>æ ˆå±•å¼€</td><td>å¤šæ¬¡å†…å­˜è®¿é—®ï¼ˆæŸ¥è¡¨ã€è°ƒç”¨ææ„å‡½æ•°ï¼‰</td><td>æ‰€æœ‰è°ƒç”¨å±‚çº§</td></tr><tr><td>ç±»å‹åŒ¹é…</td><td>RTTI æŸ¥è¯¢ã€ç±»å‹æ¯”è¾ƒ</td><td>æ¯ä¸ª catch å—</td></tr><tr><td>å¯¹è±¡åˆ†é…</td><td>å †åˆ†é…ã€æ‹·è´æ„é€ ã€é‡Šæ”¾</td><td>æ¯æ¬¡ throw</td></tr><tr><td>äºŒè¿›åˆ¶è†¨èƒ€</td><td>æ ˆå±•å¼€è¡¨ã€LSDA å…ƒæ•°æ®</td><td>å¢åŠ  5-15% ä½“ç§¯</td></tr></tbody></table>
<p>å³ä½¿æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸ï¼Œç¼–è¯‘å™¨ä¹Ÿä¼šç”Ÿæˆæ ˆå±•å¼€è¡¨å’Œå¼‚å¸¸å¤„ç†ä»£ç ï¼Œå¢åŠ äºŒè¿›åˆ¶ä½“ç§¯å’ŒæŒ‡ä»¤ç¼“å­˜å‹åŠ›ã€‚</p>
<h3 data-id="heading-12">æ›¿ä»£æ–¹æ¡ˆï¼šç›´æ¥ç»ˆæ­¢ç¨‹åº</h3>
<p>æ£€æµ‹åˆ°é”™è¯¯æ—¶ç›´æ¥è°ƒç”¨ <code>std::abort()</code> ç»ˆæ­¢ç¨‹åºï¼Œé¿å…å¼‚å¸¸æ•è·çš„æ ˆå±•å¼€ã€RTTI æŸ¥è¯¢å’Œå†…å­˜åˆ†é…å¼€é”€ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdlib&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">divide</span><span class="hljs-params">(<span class="hljs-type">double</span> a, <span class="hljs-type">double</span> b)</span> </span>{
    <span class="hljs-keyword">if</span> (b == <span class="hljs-number">0.0</span>) {
        std::cerr &lt;&lt; <span class="hljs-string">"Fatal error: Division by zero\n"</span>;
        std::<span class="hljs-built_in">abort</span>();  <span class="hljs-comment">// ç«‹å³ç»ˆæ­¢ç¨‹åº</span>
    }
    <span class="hljs-keyword">return</span> a / b;
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">double</span> result = <span class="hljs-built_in">divide</span>(<span class="hljs-number">10.0</span>, <span class="hljs-number">0.0</span>);
    std::cout &lt;&lt; <span class="hljs-string">"Result: "</span> &lt;&lt; result &lt;&lt; std::endl;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>è¿™ç§ç­–ç•¥å°†é”™è¯¯è§†ä¸ºè‡´å‘½é”™è¯¯(Fatal Error)ï¼Œé€‚åˆé«˜æ€§èƒ½è®¡ç®—ã€åµŒå…¥å¼ç³»ç»Ÿç­‰å¯¹æ€§èƒ½æåº¦æ•æ„Ÿçš„åœºæ™¯ã€‚</p>
<h2 data-id="heading-13">é¿å…ä½¿ç”¨è™šå‡½æ•°</h2>
<p>è™šå‡½æ•°é€šè¿‡è™šå‡½æ•°è¡¨(vtable)å®ç°è¿è¡Œæ—¶å¤šæ€ï¼Œä½†æ¯ä¸ªå¯¹è±¡éœ€è¦é¢å¤–å­˜å‚¨ vptr æŒ‡é’ˆï¼ˆ8 å­—èŠ‚ï¼‰ï¼Œæ¯æ¬¡è™šå‡½æ•°è°ƒç”¨éœ€è¦ä¸¤æ¬¡å†…å­˜é—´æ¥è®¿é—®ï¼Œä¸”é˜»æ­¢ç¼–è¯‘å™¨å†…è”ä¼˜åŒ–ã€‚æœ¬ç« åˆ†æè™šå‡½æ•°çš„åº•å±‚å®ç°å’Œæ€§èƒ½å¼€é”€ï¼Œå¹¶æä¾› CRTPã€æ¨¡æ¿ã€std::variantã€std::function ç­‰æ›¿ä»£æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-14">è™šå‡½æ•°ç®€è¿°</h3>
<p>è™šå‡½æ•°(Virtual Function)å…è®¸é€šè¿‡åŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨è°ƒç”¨æ´¾ç”Ÿç±»çš„é‡å†™å‡½æ•°ï¼Œå®ç°è¿è¡Œæ—¶å¤šæ€(Runtime Polymorphism)ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">double</span> <span class="hljs-title">area</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>= <span class="hljs-number">0</span>;  <span class="hljs-comment">// çº¯è™šå‡½æ•°</span>
    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">Shape</span>() = <span class="hljs-keyword">default</span>;
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> : <span class="hljs-keyword">public</span> Shape {
    <span class="hljs-type">double</span> radius_;
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Circle</span>(<span class="hljs-type">double</span> r) : <span class="hljs-built_in">radius_</span>(r) {}
    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">area</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-number">3.14159</span> * radius_ * radius_;
    }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span> : <span class="hljs-keyword">public</span> Shape {
    <span class="hljs-type">double</span> width_, height_;
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Rectangle</span>(<span class="hljs-type">double</span> w, <span class="hljs-type">double</span> h) : <span class="hljs-built_in">width_</span>(w), <span class="hljs-built_in">height_</span>(h) {}
    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">area</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-keyword">return</span> width_ * height_;
    }
};

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printArea</span><span class="hljs-params">(<span class="hljs-type">const</span> Shape&amp; shape)</span> </span>{
    std::cout &lt;&lt; <span class="hljs-string">"Area: "</span> &lt;&lt; shape.<span class="hljs-built_in">area</span>() &lt;&lt; std::endl;  <span class="hljs-comment">// è¿è¡Œæ—¶ç¡®å®šè°ƒç”¨å“ªä¸ªå‡½æ•°</span>
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">Circle <span class="hljs-title">c</span><span class="hljs-params">(<span class="hljs-number">5.0</span>)</span></span>;
    <span class="hljs-function">Rectangle <span class="hljs-title">r</span><span class="hljs-params">(<span class="hljs-number">3.0</span>, <span class="hljs-number">4.0</span>)</span></span>;

    <span class="hljs-built_in">printArea</span>(c);  <span class="hljs-comment">// è¾“å‡ºï¼šArea: 78.5398</span>
    <span class="hljs-built_in">printArea</span>(r);  <span class="hljs-comment">// è¾“å‡ºï¼šArea: 12</span>

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>è™šå‡½æ•°çš„å…³é”®ç‰¹æ€§ï¼š</p>
<ul>
<li>é€šè¿‡åŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨ç»Ÿä¸€ç®¡ç†ä¸åŒæ´¾ç”Ÿç±»å¯¹è±¡</li>
<li>è¿è¡Œæ—¶æ ¹æ®å¯¹è±¡çš„å®é™…ç±»å‹é€‰æ‹©è°ƒç”¨çš„å‡½æ•°</li>
<li>ä¾èµ–è™šå‡½æ•°è¡¨(vtable)å’Œè™šè¡¨æŒ‡é’ˆ(vptr)å®ç°</li>
</ul>
<h3 data-id="heading-15">åº•å±‚å®ç°ä¸å¼€é”€åˆ†æ</h3>
<p>è™šå‡½æ•°çš„å®ç°ä¾èµ–è™šå‡½æ•°è¡¨(vtable)å’Œè™šè¡¨æŒ‡é’ˆ(vptr)ã€‚</p>
<p><strong>vtable å’Œ vptr</strong></p>
<p>ç¼–è¯‘å™¨ä¸ºæ¯ä¸ªåŒ…å«è™šå‡½æ•°çš„ç±»ç”Ÿæˆä¸€ä¸ª vtableï¼Œå­˜å‚¨è¯¥ç±»æ‰€æœ‰è™šå‡½æ•°çš„åœ°å€ã€‚æ¯ä¸ªå¯¹è±¡åŒ…å«ä¸€ä¸ª vptrï¼ŒæŒ‡å‘å…¶ç±»çš„ vtableã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">func1</span><span class="hljs-params">()</span> </span>{}
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">func2</span><span class="hljs-params">()</span> </span>{}
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Derived</span> : <span class="hljs-keyword">public</span> Base {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func1</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>{}  <span class="hljs-comment">// é‡å†™ func1</span>
};
</code></pre>
<p>å†…å­˜å¸ƒå±€ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Base vtable</span>
Base::vtable = { &amp;Base::func1, &amp;Base::func2 };

<span class="hljs-comment">// Derived vtable</span>
Derived::vtable = { &amp;Derived::func1, &amp;Base::func2 };

<span class="hljs-comment">// å¯¹è±¡å†…å­˜å¸ƒå±€</span>
Base obj1:     [vptr â†’ Base::vtable]
Derived obj2:  [vptr â†’ Derived::vtable]
</code></pre>
<p><strong>è™šå‡½æ•°è°ƒç”¨è¿‡ç¨‹</strong>ï¼šè™šå‡½æ•°è°ƒç”¨æ¶‰åŠä¸¤æ¬¡å†…å­˜é—´æ¥è®¿é—®ï¼Œæ™®é€šå‡½æ•°è°ƒç”¨æ˜¯ç›´æ¥è°ƒç”¨ã€‚</p>
<p><strong>æ±‡ç¼–ä»£ç å¯¹æ¯”</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ™®é€šå‡½æ•°è°ƒç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Simple</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> </span>{ <span class="hljs-comment">/* ... */</span> }
};

Simple obj;
obj.<span class="hljs-built_in">func</span>();

<span class="hljs-comment">// ç”Ÿæˆçš„æ±‡ç¼–ï¼ˆç®€åŒ–ï¼‰ï¼š</span>
<span class="hljs-comment">// call Simple::func  // ç›´æ¥è°ƒç”¨ï¼Œåœ°å€åœ¨ç¼–è¯‘æœŸç¡®å®š</span>
</code></pre>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// è™šå‡½æ•°è°ƒç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> </span>{ <span class="hljs-comment">/* ... */</span> }
};

Base* ptr = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Derived</span>();
ptr-&gt;<span class="hljs-built_in">func</span>();

<span class="hljs-comment">// ç”Ÿæˆçš„æ±‡ç¼–ï¼ˆç®€åŒ–ï¼‰ï¼š</span>
<span class="hljs-comment">// mov rax, [ptr]        ; 1. è¯»å– vptrï¼ˆç¬¬ä¸€æ¬¡å†…å­˜è®¿é—®ï¼‰</span>
<span class="hljs-comment">// mov rax, [rax]        ; 2. è¯»å– vtable[0]ï¼ˆç¬¬äºŒæ¬¡å†…å­˜è®¿é—®ï¼‰</span>
<span class="hljs-comment">// call rax              ; 3. é—´æ¥è°ƒç”¨</span>
</code></pre>
<p><strong>æ€§èƒ½å¼€é”€æ€»ç»“</strong></p>





























<table><thead><tr><th>é¡¹ç›®</th><th>å¼€é”€</th></tr></thead><tbody><tr><td>å¯¹è±¡å†…å­˜</td><td>+8 å­—èŠ‚ vptrï¼ˆ64 ä½ç³»ç»Ÿï¼‰</td></tr><tr><td>è°ƒç”¨å¼€é”€</td><td>2 æ¬¡å†…å­˜é—´æ¥è®¿é—®</td></tr><tr><td>å†…è”ä¼˜åŒ–</td><td>é€šå¸¸æ— æ³•å†…è”ï¼ˆé™¤éç¼–è¯‘å™¨èƒ½å»è™šåŒ–ï¼‰</td></tr><tr><td>ç¼“å­˜å‹å¥½æ€§</td><td>vtable å¯èƒ½ä¸åœ¨ç¼“å­˜ä¸­ï¼Œå¢åŠ ç¼“å­˜æœªå‘½ä¸­</td></tr><tr><td>äºŒè¿›åˆ¶ä½“ç§¯</td><td>æ¯ä¸ªç±»å¢åŠ  vtableï¼ˆN ä¸ªè™šå‡½æ•° Ã— 8 å­—èŠ‚ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-16">æ›¿ä»£æ–¹æ¡ˆä¸€ï¼šç¼–è¯‘æœŸå¤šæ€ï¼ˆCRTP å’Œç­–ç•¥æ¨¡å¼ï¼‰</h3>
<p>ç¼–è¯‘æœŸå¤šæ€é€šè¿‡æ¨¡æ¿åœ¨ç¼–è¯‘æœŸç¡®å®šè°ƒç”¨çš„å‡½æ•°ï¼Œæ¶ˆé™¤è™šå‡½æ•°çš„è¿è¡Œæ—¶å¼€é”€ã€‚</p>
<p><strong>CRTPï¼ˆå¥‡å¼‚é€’å½’æ¨¡æ¿æ¨¡å¼ï¼‰</strong></p>
<p>CRTP é€šè¿‡æ¨¡æ¿ç»§æ‰¿å®ç°ç¼–è¯‘æœŸå¤šæ€ï¼ŒåŸºç±»æ¨¡æ¿å‚æ•°æ˜¯æ´¾ç”Ÿç±»æœ¬èº«ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// CRTP åŸºç±»</span>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> Derived&gt;
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">area</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-comment">// ç¼–è¯‘æœŸè½¬æ¢ä¸ºæ´¾ç”Ÿç±»ï¼Œé™æ€åˆ†å‘</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">const</span> Derived*&gt;(<span class="hljs-keyword">this</span>)-&gt;<span class="hljs-built_in">areaImpl</span>();
    }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> : <span class="hljs-keyword">public</span> Shape&lt;Circle&gt; {
    <span class="hljs-type">double</span> radius_;
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Circle</span>(<span class="hljs-type">double</span> r) : <span class="hljs-built_in">radius_</span>(r) {}
    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">areaImpl</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-number">3.14159</span> * radius_ * radius_;
    }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span> : <span class="hljs-keyword">public</span> Shape&lt;Rectangle&gt; {
    <span class="hljs-type">double</span> width_, height_;
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Rectangle</span>(<span class="hljs-type">double</span> w, <span class="hljs-type">double</span> h) : <span class="hljs-built_in">width_</span>(w), <span class="hljs-built_in">height_</span>(h) {}
    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">areaImpl</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> width_ * height_;
    }
};

<span class="hljs-comment">// æ¨¡æ¿å‡½æ•°å¤„ç†ä¸åŒç±»å‹</span>
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> ShapeType&gt;
<span class="hljs-type">void</span> <span class="hljs-title">printArea</span><span class="hljs-params">(<span class="hljs-type">const</span> Shape&lt;ShapeType&gt;&amp; shape)</span> </span>{
    std::cout &lt;&lt; <span class="hljs-string">"Area: "</span> &lt;&lt; shape.<span class="hljs-built_in">area</span>() &lt;&lt; std::endl;
    <span class="hljs-comment">// ç¼–è¯‘æœŸç¡®å®šè°ƒç”¨ Circle::areaImpl æˆ– Rectangle::areaImpl</span>
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">Circle <span class="hljs-title">c</span><span class="hljs-params">(<span class="hljs-number">5.0</span>)</span></span>;
    <span class="hljs-function">Rectangle <span class="hljs-title">r</span><span class="hljs-params">(<span class="hljs-number">3.0</span>, <span class="hljs-number">4.0</span>)</span></span>;

    <span class="hljs-built_in">printArea</span>(c);  <span class="hljs-comment">// ç¼–è¯‘å™¨å®ä¾‹åŒ– printArea&lt;Circle&gt;</span>
    <span class="hljs-built_in">printArea</span>(r);  <span class="hljs-comment">// ç¼–è¯‘å™¨å®ä¾‹åŒ– printArea&lt;Rectangle&gt;</span>
}
</code></pre>
<p>åº•å±‚å®ç°ï¼šç¼–è¯‘å™¨ä¸ºæ¯ä¸ªæ´¾ç”Ÿç±»ç”Ÿæˆç‰¹åŒ–ä»£ç ï¼Œ<code>area()</code> è°ƒç”¨åœ¨ç¼–è¯‘æœŸè§£æä¸ºç›´æ¥å‡½æ•°è°ƒç”¨ï¼Œå¯ä»¥å†…è”ã€‚</p>
<p><strong>ç­–ç•¥æ¨¡å¼ï¼ˆæ¨¡æ¿å‚æ•°ï¼‰</strong></p>
<p>å°†è¡Œä¸ºä½œä¸ºæ¨¡æ¿å‚æ•°ä¼ é€’ï¼Œå®ç°ç¼–è¯‘æœŸç­–ç•¥é€‰æ‹©ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ç­–ç•¥æ¥å£ï¼ˆç¼–è¯‘æœŸï¼‰</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">FastStrategy</span> {
    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">int</span> <span class="hljs-title">compute</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>{ <span class="hljs-keyword">return</span> x * <span class="hljs-number">2</span>; }
};

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">PreciseStrategy</span> {
    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">int</span> <span class="hljs-title">compute</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>{ <span class="hljs-keyword">return</span> x * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>; }
};

<span class="hljs-comment">// ä½¿ç”¨ç­–ç•¥</span>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> Strategy&gt;
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Processor</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">process</span><span class="hljs-params">(<span class="hljs-type">int</span> value)</span> </span>{
        <span class="hljs-keyword">return</span> Strategy::<span class="hljs-built_in">compute</span>(value);  <span class="hljs-comment">// ç¼–è¯‘æœŸç¡®å®šè°ƒç”¨å“ªä¸ªå‡½æ•°</span>
    }
};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    Processor&lt;FastStrategy&gt; p1;
    Processor&lt;PreciseStrategy&gt; p2;

    std::cout &lt;&lt; p1.<span class="hljs-built_in">process</span>(<span class="hljs-number">10</span>) &lt;&lt; std::endl;  <span class="hljs-comment">// è¾“å‡ºï¼š20</span>
    std::cout &lt;&lt; p2.<span class="hljs-built_in">process</span>(<span class="hljs-number">10</span>) &lt;&lt; std::endl;  <span class="hljs-comment">// è¾“å‡ºï¼š21</span>
}
</code></pre>
<p>ç¼–è¯‘æœŸå¤šæ€çš„é™åˆ¶ï¼š</p>
<ul>
<li><strong>æ— æ³•ç”¨åŸºç±»æŒ‡é’ˆç»Ÿä¸€ç®¡ç†</strong>ï¼š<code>Shape&lt;Circle&gt;*</code> å’Œ <code>Shape&lt;Rectangle&gt;*</code> æ˜¯ä¸åŒç±»å‹ï¼Œæ— æ³•å­˜å‚¨åœ¨åŒä¸€ä¸ªå®¹å™¨ä¸­</li>
<li><strong>æ— è¿è¡Œæ—¶å¤šæ€</strong>ï¼šç±»å‹å¿…é¡»åœ¨ç¼–è¯‘æœŸç¡®å®šï¼Œæ— æ³•æ ¹æ®è¿è¡Œæ—¶æ¡ä»¶é€‰æ‹©ç±»å‹</li>
</ul>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ç¼–è¯‘é”™è¯¯ï¼šShape&lt;Circle&gt; å’Œ Shape&lt;Rectangle&gt; æ˜¯ä¸åŒç±»å‹</span>
Shape&lt;Circle&gt;* ptr = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Rectangle</span>(<span class="hljs-number">3.0</span>, <span class="hljs-number">4.0</span>);  <span class="hljs-comment">// é”™è¯¯</span>

<span class="hljs-comment">// æ— æ³•ä½¿ç”¨åŸºç±»æŒ‡é’ˆå®¹å™¨</span>
std::vector&lt;Shape&lt;???&gt;*&gt; shapes;  <span class="hljs-comment">// æ— æ³•è¡¨è¾¾</span>
</code></pre>
<p><strong>æ€§èƒ½å¯¹æ¯”</strong></p>


























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>å¯¹è±¡å†…å­˜</th><th>è°ƒç”¨å¼€é”€</th><th>å†…è”ä¼˜åŒ–</th><th>è¿è¡Œæ—¶å¤šæ€</th></tr></thead><tbody><tr><td>è™šå‡½æ•°</td><td>+8 å­—èŠ‚</td><td>2 æ¬¡å†…å­˜é—´æ¥è®¿é—®</td><td>ä¸å¯å†…è”</td><td>æ”¯æŒ</td></tr><tr><td>CRTP/ç­–ç•¥æ¨¡å¼</td><td>æ— é¢å¤–</td><td>ç›´æ¥è°ƒç”¨</td><td>å¯å†…è”</td><td>ä¸æ”¯æŒ</td></tr></tbody></table>
<h3 data-id="heading-17">æ›¿ä»£æ–¹æ¡ˆäºŒï¼šstd::variant</h3>
<p><code>std::variant</code>(C++17) æ˜¯ç±»å‹å®‰å…¨çš„è”åˆä½“ï¼Œå¯ä»¥åœ¨ç¼–è¯‘æœŸç¡®å®šçš„ç±»å‹é›†åˆä¸­å­˜å‚¨ä»»æ„ä¸€ä¸ªï¼Œç»“åˆ <code>std::visit</code> å®ç°ç±»å‹å®‰å…¨çš„å¤šæ€ã€‚</p>
<p><strong>åŸºç¡€ç”¨æ³•</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;variant&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> {
    <span class="hljs-type">double</span> radius_;
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Circle</span>(<span class="hljs-type">double</span> r) : <span class="hljs-built_in">radius_</span>(r) {}
    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">area</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-number">3.14159</span> * radius_ * radius_;
    }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span> {
    <span class="hljs-type">double</span> width_, height_;
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Rectangle</span>(<span class="hljs-type">double</span> w, <span class="hljs-type">double</span> h) : <span class="hljs-built_in">width_</span>(w), <span class="hljs-built_in">height_</span>(h) {}
    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">area</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> width_ * height_;
    }
};

<span class="hljs-comment">// å®šä¹‰å¯èƒ½çš„ç±»å‹é›†åˆ</span>
<span class="hljs-keyword">using</span> Shape = std::variant&lt;Circle, Rectangle&gt;;

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// ç»Ÿä¸€å­˜å‚¨ä¸åŒç±»å‹</span>
    std::vector&lt;Shape&gt; shapes;
    shapes.<span class="hljs-built_in">push_back</span>(<span class="hljs-built_in">Circle</span>(<span class="hljs-number">5.0</span>));
    shapes.<span class="hljs-built_in">push_back</span>(<span class="hljs-built_in">Rectangle</span>(<span class="hljs-number">3.0</span>, <span class="hljs-number">4.0</span>));

    <span class="hljs-comment">// ä½¿ç”¨ std::visit å¤„ç†</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; shape : shapes) {
        std::<span class="hljs-built_in">visit</span>([](<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; s) {
            std::cout &lt;&lt; <span class="hljs-string">"Area: "</span> &lt;&lt; s.<span class="hljs-built_in">area</span>() &lt;&lt; std::endl;
        }, shape);
    }
}
</code></pre>
<p><strong>åº•å±‚å®ç°ï¼ˆç®€åŒ–è¯´æ˜ï¼‰</strong></p>
<p><code>std::variant</code> å†…éƒ¨ä½¿ç”¨ union å­˜å‚¨æ•°æ®ï¼Œå¹¶ç»´æŠ¤ä¸€ä¸ªç´¢å¼•æ ‡è¯†å½“å‰å­˜å‚¨çš„ç±»å‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ç®€åŒ–çš„ variant å®ç°ï¼ˆæ¦‚å¿µæ€§è¯´æ˜ï¼‰</span>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span>... Types&gt;
<span class="hljs-keyword">class</span> <span class="hljs-title class_">variant</span> {
    <span class="hljs-keyword">union</span> <span class="hljs-title class_">Storage</span> {
        <span class="hljs-comment">// å­˜å‚¨æ‰€æœ‰å¯èƒ½çš„ç±»å‹</span>
    } storage_;

    <span class="hljs-type">size_t</span> index_;  <span class="hljs-comment">// å½“å‰ç±»å‹çš„ç´¢å¼•ï¼ˆ0, 1, 2...ï¼‰</span>
};
</code></pre>
<p>ç±»å‹åˆ†å‘é€šè¿‡ç´¢å¼•è¿›è¡Œè·³è½¬ã€‚å®é™…çš„ <code>std::visit</code> å®ç°è¿œæ¯”è¿™é‡Œå±•ç¤ºçš„å¤æ‚ï¼Œæ¶‰åŠè·³è½¬è¡¨ä¼˜åŒ–ã€ç¼–è¯‘æœŸåˆ†æ”¯æ¶ˆé™¤ç­‰æŠ€æœ¯ï¼Œä»¥ä¸‹æ˜¯æ¦‚å¿µæ€§è¯´æ˜ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// std::visit çš„ç®€åŒ–å®ç°ï¼ˆæ¦‚å¿µæ€§è¯´æ˜ï¼‰</span>
<span class="hljs-keyword">switch</span> (variant.index_) {
    <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>: <span class="hljs-keyword">return</span> <span class="hljs-built_in">visitor</span>(std::<span class="hljs-built_in">get</span>&lt;<span class="hljs-number">0</span>&gt;(variant));  <span class="hljs-comment">// Circle</span>
    <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: <span class="hljs-keyword">return</span> <span class="hljs-built_in">visitor</span>(std::<span class="hljs-built_in">get</span>&lt;<span class="hljs-number">1</span>&gt;(variant));  <span class="hljs-comment">// Rectangle</span>
}
</code></pre>
<p><strong>å¼€é”€å¯¹æ¯”</strong></p>


























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>å¯¹è±¡å†…å­˜</th><th>è°ƒç”¨å¼€é”€</th><th>å†…è”ä¼˜åŒ–</th><th>è¿è¡Œæ—¶å¤šæ€</th></tr></thead><tbody><tr><td>è™šå‡½æ•°</td><td>+8 å­—èŠ‚ vptr</td><td>2 æ¬¡å†…å­˜è®¿é—®</td><td>ä¸å¯å†…è”</td><td>æ”¯æŒ</td></tr><tr><td><code>std::variant</code></td><td>æœ€å¤§ç±»å‹å¤§å° + ç´¢å¼•(8B)</td><td>switch è·³è½¬ï¼Œç¼–è¯‘å™¨ä¼˜åŒ–</td><td>å¯èƒ½å†…è”</td><td>æ”¯æŒ</td></tr></tbody></table>
<h3 data-id="heading-18">æ›¿ä»£æ–¹æ¡ˆä¸‰ï¼šstd::function</h3>
<p><code>std::function</code>(C++11) æ˜¯é€šç”¨å‡½æ•°åŒ…è£…å™¨ï¼Œå¯ä»¥å­˜å‚¨ä»»æ„å¯è°ƒç”¨å¯¹è±¡ï¼ˆå‡½æ•°æŒ‡é’ˆã€lambdaã€å‡½æ•°å¯¹è±¡ï¼‰ï¼Œå®ç°è¡Œä¸ºçº§åˆ«çš„å¤šæ€ã€‚</p>
<p><strong>åŸºç¡€ç”¨æ³•</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;functional&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">circleArea</span><span class="hljs-params">(<span class="hljs-type">double</span> radius)</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-number">3.14159</span> * radius * radius;
}

<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">rectangleArea</span><span class="hljs-params">(<span class="hljs-type">double</span> width, <span class="hljs-type">double</span> height)</span> </span>{
    <span class="hljs-keyword">return</span> width * height;
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">using</span> AreaCalculator = std::function&lt;<span class="hljs-built_in">double</span>()&gt;;
    std::vector&lt;AreaCalculator&gt; calculators;

    <span class="hljs-comment">// ä½¿ç”¨ lambda æ•è·å‚æ•°</span>
    calculators.<span class="hljs-built_in">push_back</span>([]() { <span class="hljs-keyword">return</span> <span class="hljs-built_in">circleArea</span>(<span class="hljs-number">5.0</span>); });
    calculators.<span class="hljs-built_in">push_back</span>([]() { <span class="hljs-keyword">return</span> <span class="hljs-built_in">rectangleArea</span>(<span class="hljs-number">3.0</span>, <span class="hljs-number">4.0</span>); });

    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; calc : calculators) {
        std::cout &lt;&lt; <span class="hljs-string">"Area: "</span> &lt;&lt; <span class="hljs-built_in">calc</span>() &lt;&lt; std::endl;
    }
}
</code></pre>
<p><strong>åº•å±‚å®ç°</strong></p>
<p><code>std::function</code> ä½¿ç”¨ç±»å‹æ“¦é™¤(Type Erasure)ï¼Œå†…éƒ¨å­˜å‚¨å‡½æ•°æŒ‡é’ˆå’Œå¯è°ƒç”¨å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ç®€åŒ–çš„ std::function å®ç°</span>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> R, <span class="hljs-keyword">typename</span>... Args&gt;
<span class="hljs-keyword">class</span> <span class="hljs-title class_">function</span>&lt;<span class="hljs-built_in">R</span>(Args...)&gt; {
    <span class="hljs-type">void</span>* callable_;  <span class="hljs-comment">// æŒ‡å‘å¯è°ƒç”¨å¯¹è±¡</span>
    <span class="hljs-built_in">R</span> (*invoker_)(<span class="hljs-type">void</span>*, Args...);  <span class="hljs-comment">// è°ƒç”¨é€‚é…å™¨</span>

<span class="hljs-keyword">public</span>:
    <span class="hljs-function">R <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(Args... args)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">invoker_</span>(callable_, std::forward&lt;Args&gt;(args)...);
    }
};
</code></pre>
<p><strong>å¼€é”€å¯¹æ¯”</strong></p>





























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>å¯¹è±¡å†…å­˜</th><th>è°ƒç”¨å¼€é”€</th><th>å†…è”ä¼˜åŒ–</th></tr></thead><tbody><tr><td>è™šå‡½æ•°</td><td>+8 å­—èŠ‚</td><td>2 æ¬¡å†…å­˜è®¿é—®</td><td>ä¸å¯å†…è”</td></tr><tr><td><code>std::function</code></td><td>32-48 å­—èŠ‚</td><td>1 æ¬¡å‡½æ•°æŒ‡é’ˆé—´æ¥è°ƒç”¨</td><td>ä¸å¯å†…è”</td></tr><tr><td>å‡½æ•°æŒ‡é’ˆ</td><td>8 å­—èŠ‚</td><td>1 æ¬¡å‡½æ•°æŒ‡é’ˆé—´æ¥è°ƒç”¨</td><td>ä¸å¯å†…è”</td></tr></tbody></table>
<p><code>std::function</code> é€‚åˆå›è°ƒã€äº‹ä»¶å¤„ç†ç­‰åœºæ™¯ï¼Œä½†å†…å­˜å¼€é”€å¤§ï¼Œä¸é€‚åˆæ€§èƒ½å…³é”®è·¯å¾„ã€‚</p>
<h2 data-id="heading-19">æ¨èä½¿ç”¨æ³›å‹ç¼–ç¨‹</h2>
<p>æ³›å‹ç¼–ç¨‹é€šè¿‡æ¨¡æ¿åœ¨ç¼–è¯‘æœŸç”Ÿæˆç‰¹åŒ–ä»£ç ï¼Œå®ç°é›¶è¿è¡Œæ—¶å¼€é”€çš„ç±»å‹æŠ½è±¡ã€‚ç¼–è¯‘å™¨å¯ä»¥å†…è”ã€å¸¸é‡æŠ˜å å’Œæ­»ä»£ç æ¶ˆé™¤ç­‰ä¼˜åŒ–ï¼Œæ€§èƒ½ç­‰åŒç”šè‡³ä¼˜äºæ‰‹å†™ä»£ç ã€‚æœ¬ç« ä»‹ç»æ¨¡æ¿çš„æ€§èƒ½ä¼˜åŠ¿ã€ç¼–è¯‘æœŸè®¡ç®—ã€constexpr å’Œæ¨¡æ¿å…ƒç¼–ç¨‹ç­‰æŠ€æœ¯ã€‚</p>
<h3 data-id="heading-20">æ³›å‹ç¼–ç¨‹ç®€è¿°</h3>
<p>æ³›å‹ç¼–ç¨‹(Generic Programming)é€šè¿‡æ¨¡æ¿å‚æ•°åŒ–ç±»å‹ï¼Œç¼–å†™ä¸ç±»å‹æ— å…³çš„ä»£ç ã€‚ç¼–è¯‘å™¨ä¸ºæ¯ä¸ªä½¿ç”¨çš„ç±»å‹ç”Ÿæˆç‰¹åŒ–ä»£ç ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å‡½æ•°æ¨¡æ¿</span>
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
T <span class="hljs-title">max</span><span class="hljs-params">(T a, T b)</span> </span>{
    <span class="hljs-keyword">return</span> (a &gt; b) ? a : b;
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">int</span> i = <span class="hljs-built_in">max</span>(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>);        <span class="hljs-comment">// ç¼–è¯‘å™¨ç”Ÿæˆ max&lt;int&gt;</span>
    <span class="hljs-type">double</span> d = <span class="hljs-built_in">max</span>(<span class="hljs-number">3.14</span>, <span class="hljs-number">2.71</span>); <span class="hljs-comment">// ç¼–è¯‘å™¨ç”Ÿæˆ max&lt;double&gt;</span>
}
</code></pre>
<p>ç¼–è¯‘å™¨ç”Ÿæˆçš„ä»£ç ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆï¼ˆç®€åŒ–ï¼‰</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">max_int</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>{
    <span class="hljs-keyword">return</span> (a &gt; b) ? a : b;
}

<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">max_double</span><span class="hljs-params">(<span class="hljs-type">double</span> a, <span class="hljs-type">double</span> b)</span> </span>{
    <span class="hljs-keyword">return</span> (a &gt; b) ? a : b;
}
</code></pre>
<h3 data-id="heading-21">æ€§èƒ½ä¼˜åŠ¿</h3>
<p>æ¨¡æ¿ä»£ç åœ¨ç¼–è¯‘æœŸå®Œå…¨å±•å¼€ï¼Œç¼–è¯‘å™¨å¯ä»¥è¿›è¡Œæ¿€è¿›ä¼˜åŒ–ã€‚</p>
<p><strong>å†…è”ä¼˜åŒ–</strong></p>
<p>æ¨¡æ¿å‡½æ•°è‡ªåŠ¨å†…è”ï¼Œæ¶ˆé™¤å‡½æ•°è°ƒç”¨å¼€é”€ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">inline</span> T <span class="hljs-title">square</span><span class="hljs-params">(T x)</span> </span>{
    <span class="hljs-keyword">return</span> x * x;
}

<span class="hljs-type">int</span> result = <span class="hljs-built_in">square</span>(<span class="hljs-number">5</span>);  <span class="hljs-comment">// ç¼–è¯‘å™¨ç›´æ¥ç”Ÿæˆï¼šint result = 25;</span>
</code></pre>
<p><strong>å¸¸é‡æŠ˜å </strong></p>
<p>ç¼–è¯‘æœŸè®¡ç®—å¸¸é‡è¡¨è¾¾å¼ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">template</span>&lt;<span class="hljs-type">int</span> N&gt;
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Factorial</span> {
    <span class="hljs-type">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-type">int</span> value = N * Factorial&lt;N - <span class="hljs-number">1</span>&gt;::value;
};

<span class="hljs-keyword">template</span>&lt;&gt;
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Factorial</span>&lt;<span class="hljs-number">0</span>&gt; {
    <span class="hljs-type">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-type">int</span> value = <span class="hljs-number">1</span>;
};

<span class="hljs-type">int</span> x = Factorial&lt;<span class="hljs-number">5</span>&gt;::value;  <span class="hljs-comment">// ç¼–è¯‘æœŸè®¡ç®—ä¸º 120</span>
</code></pre>
<p><strong>æ­»ä»£ç æ¶ˆé™¤</strong></p>
<p>ç¼–è¯‘å™¨ç§»é™¤æœªä½¿ç”¨çš„åˆ†æ”¯ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-type">bool</span> UseCache&gt;
<span class="hljs-type">int</span> <span class="hljs-title">compute</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">if</span> <span class="hljs-title">constexpr</span> <span class="hljs-params">(UseCache)</span> </span>{
        <span class="hljs-keyword">return</span> cachedValue;  <span class="hljs-comment">// ä½¿ç”¨ç¼“å­˜</span>
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> x * x;        <span class="hljs-comment">// ç›´æ¥è®¡ç®—</span>
    }
}

<span class="hljs-type">int</span> a = <span class="hljs-built_in">compute</span>&lt;<span class="hljs-literal">false</span>&gt;(<span class="hljs-number">10</span>);  <span class="hljs-comment">// ç¼–è¯‘å™¨åªç”Ÿæˆ return x * x</span>
</code></pre>
<h3 data-id="heading-22">constexpr å’Œç¼–è¯‘æœŸè®¡ç®—</h3>
<p><code>constexpr</code>(C++11) æ ‡è®°çš„å‡½æ•°å’Œå˜é‡åœ¨ç¼–è¯‘æœŸè®¡ç®—ï¼Œç”Ÿæˆå¸¸é‡ï¼Œè¿è¡Œæ—¶é›¶å¼€é”€ã€‚</p>
<p><strong>constexpr å‡½æ•°</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;array&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">constexpr</span> <span class="hljs-type">int</span> <span class="hljs-title">factorial</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> </span>{
    <span class="hljs-keyword">return</span> (n &lt;= <span class="hljs-number">1</span>) ? <span class="hljs-number">1</span> : n * <span class="hljs-built_in">factorial</span>(n - <span class="hljs-number">1</span>);
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">constexpr</span> <span class="hljs-type">int</span> result = <span class="hljs-built_in">factorial</span>(<span class="hljs-number">5</span>);  <span class="hljs-comment">// ç¼–è¯‘æœŸè®¡ç®—ä¸º 120</span>
    std::array&lt;<span class="hljs-type">int</span>, factorial(4)&gt; arr;    <span class="hljs-comment">// ä½¿ç”¨ std::arrayï¼Œç¼–è¯‘æœŸè®¡ç®—å¤§å°</span>
}
</code></pre>
<p>ç¼–è¯‘å™¨ç”Ÿæˆçš„ä»£ç ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">const</span> <span class="hljs-type">int</span> result = <span class="hljs-number">120</span>;         <span class="hljs-comment">// ç›´æ¥å¸¸é‡</span>
    std::array&lt;<span class="hljs-type">int</span>, 24&gt; arr;        <span class="hljs-comment">// ç›´æ¥å¸¸é‡</span>
}
</code></pre>
<p><strong>constexpr ç±»</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Point</span> {
    <span class="hljs-type">int</span> x_, y_;
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">constexpr</span> <span class="hljs-title">Point</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> : x_(x), y_(y) {</span>}
    <span class="hljs-function"><span class="hljs-keyword">constexpr</span> <span class="hljs-type">int</span> <span class="hljs-title">getX</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> x_; }
    <span class="hljs-function"><span class="hljs-keyword">constexpr</span> <span class="hljs-type">int</span> <span class="hljs-title">distance</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> x_ * x_ + y_ * y_; }
};

<span class="hljs-function"><span class="hljs-keyword">constexpr</span> Point <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)</span></span>;
<span class="hljs-keyword">constexpr</span> <span class="hljs-type">int</span> d = p.<span class="hljs-built_in">distance</span>();  <span class="hljs-comment">// ç¼–è¯‘æœŸè®¡ç®—ä¸º 25</span>
</code></pre>
<p><strong>constexpr vs è¿è¡Œæ—¶è®¡ç®—</strong></p>




















<table><thead><tr><th>æ–¹æ¡ˆ</th><th>è®¡ç®—æ—¶æœº</th><th>è¿è¡Œæ—¶å¼€é”€</th></tr></thead><tbody><tr><td>è¿è¡Œæ—¶è®¡ç®—</td><td>è¿è¡Œæ—¶</td><td>å‡½æ•°è°ƒç”¨</td></tr><tr><td><code>constexpr</code> è®¡ç®—</td><td>ç¼–è¯‘æœŸ</td><td>é›¶å¼€é”€</td></tr></tbody></table>
<p><code>constexpr</code> å°†è®¡ç®—æå‰åˆ°ç¼–è¯‘æœŸï¼Œè¿è¡Œæ—¶ç›´æ¥ä½¿ç”¨å¸¸é‡ï¼Œæ˜¯é›¶æˆæœ¬æŠ½è±¡çš„å…¸èŒƒã€‚</p>
<h2 data-id="heading-23">æ¨èä½¿ç”¨å€¼è¯­ä¹‰ä¸ç§»åŠ¨è¯­ä¹‰</h2>
<p>å€¼è¯­ä¹‰(Value Semantics)é€šè¿‡ç›´æ¥å­˜å‚¨å¯¹è±¡é¿å…æŒ‡é’ˆé—´æ¥è®¿é—®ï¼Œæé«˜ç¼“å­˜å±€éƒ¨æ€§å’Œè®¿é—®é€Ÿåº¦ã€‚ç§»åŠ¨è¯­ä¹‰(Move Semantics)é€šè¿‡è½¬ç§»èµ„æºæ‰€æœ‰æƒé¿å…æ·±æ‹·è´å¼€é”€ã€‚ä¸¤è€…ç»“åˆæ˜¯ C++ é«˜æ€§èƒ½ç¼–ç¨‹çš„æ ¸å¿ƒå®è·µï¼šæŒ‰å€¼ä¼ é€’é…åˆç§»åŠ¨è¯­ä¹‰ï¼Œæ—¢ä¿æŒä»£ç ç®€æ´ï¼Œåˆå®ç°é›¶æ‹·è´æ€§èƒ½ã€‚</p>
<h3 data-id="heading-24">å€¼è¯­ä¹‰</h3>
<p>å€¼è¯­ä¹‰ç›´æ¥å­˜å‚¨å¯¹è±¡æœ¬èº«ï¼Œè€ŒéæŒ‡é’ˆæˆ–å¼•ç”¨ã€‚å¯¹è±¡æ‹·è´æ—¶å¤åˆ¶æ•´ä¸ªå†…å®¹ã€‚</p>
<p><strong>å€¼è¯­ä¹‰ vs å¼•ç”¨è¯­ä¹‰</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å€¼è¯­ä¹‰ï¼šç›´æ¥å­˜å‚¨å¯¹è±¡</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span> {
    <span class="hljs-type">int</span> x, y;
};

std::vector&lt;Point&gt; points;
points.<span class="hljs-built_in">push_back</span>(Point{<span class="hljs-number">1</span>, <span class="hljs-number">2</span>});  <span class="hljs-comment">// å¯¹è±¡ç›´æ¥å­˜å‚¨åœ¨ vector å†…å­˜ä¸­</span>

<span class="hljs-comment">// å¼•ç”¨è¯­ä¹‰ï¼šå­˜å‚¨æŒ‡é’ˆ</span>
std::vector&lt;Point*&gt; pointPtrs;
pointPtrs.<span class="hljs-built_in">push_back</span>(<span class="hljs-keyword">new</span> Point{<span class="hljs-number">1</span>, <span class="hljs-number">2</span>});  <span class="hljs-comment">// åªå­˜å‚¨æŒ‡é’ˆï¼Œå¯¹è±¡åœ¨å †ä¸Š</span>
</code></pre>
<p>å†…å­˜å¸ƒå±€å¯¹æ¯”ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å€¼è¯­ä¹‰ï¼šè¿ç»­å†…å­˜</span>
points: [Point{<span class="hljs-number">1</span>,<span class="hljs-number">2</span>}][Point{<span class="hljs-number">3</span>,<span class="hljs-number">4</span>}][Point{<span class="hljs-number">5</span>,<span class="hljs-number">6</span>}]
        â†‘ ç›´æ¥è®¿é—®ï¼Œç¼“å­˜å‹å¥½

<span class="hljs-comment">// å¼•ç”¨è¯­ä¹‰ï¼šé—´æ¥è®¿é—®</span>
pointPtrs: [ptr1][ptr2][ptr3]
            â†“     â†“     â†“
          å †å†…å­˜åˆ†æ•£ï¼Œç¼“å­˜æœªå‘½ä¸­
</code></pre>
<p><strong>æ€§èƒ½ä¼˜åŠ¿</strong></p>
<p>å€¼è¯­ä¹‰çš„ç¼“å­˜å±€éƒ¨æ€§ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å€¼è¯­ä¹‰ï¼šè¿ç»­è®¿é—®ï¼Œç¼“å­˜å‘½ä¸­ç‡é«˜</span>
<span class="hljs-function">std::vector&lt;Point&gt; <span class="hljs-title">points</span><span class="hljs-params">(<span class="hljs-number">1000</span>)</span></span>;
<span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; p : points) {
    <span class="hljs-built_in">process</span>(p);  <span class="hljs-comment">// é¡ºåºè®¿é—®è¿ç»­å†…å­˜ï¼Œåˆ©ç”¨ CPU ç¼“å­˜</span>
}

<span class="hljs-comment">// å¼•ç”¨è¯­ä¹‰ï¼šéšæœºè®¿é—®ï¼Œç¼“å­˜æœªå‘½ä¸­</span>
<span class="hljs-function">std::vector&lt;Point*&gt; <span class="hljs-title">pointPtrs</span><span class="hljs-params">(<span class="hljs-number">1000</span>)</span></span>;
<span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>* p : pointPtrs) {
    <span class="hljs-built_in">process</span>(*p);  <span class="hljs-comment">// æ¯æ¬¡è§£å¼•ç”¨å¯èƒ½ç¼“å­˜æœªå‘½ä¸­</span>
}
</code></pre>
<p>å€¼è¯­ä¹‰ä¼˜åŠ¿ï¼š</p>
<ul>
<li>æ— æŒ‡é’ˆé—´æ¥è®¿é—®ï¼Œå‡å°‘å†…å­˜è®¿é—®æ¬¡æ•°</li>
<li>å†…å­˜è¿ç»­ï¼Œæé«˜ç¼“å­˜å‘½ä¸­ç‡</li>
<li>æ— éœ€æ‰‹åŠ¨ç®¡ç†ç”Ÿå‘½å‘¨æœŸ</li>
</ul>
<h3 data-id="heading-25">ç§»åŠ¨è¯­ä¹‰</h3>
<p>ç§»åŠ¨è¯­ä¹‰(C++11)é€šè¿‡è½¬ç§»èµ„æºæ‰€æœ‰æƒé¿å…æ·±æ‹·è´ï¼Œä½¿ç”¨å³å€¼å¼•ç”¨(<code>&amp;&amp;</code>)å’Œ <code>std::move</code> å®ç°ã€‚</p>
<p><strong>æ‹·è´ vs ç§»åŠ¨</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>

<span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">createVector</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">v</span><span class="hljs-params">(<span class="hljs-number">1000000</span>)</span></span>;
    <span class="hljs-keyword">return</span> v;  <span class="hljs-comment">// è¿”å›ä¸´æ—¶å¯¹è±¡</span>
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// æ‹·è´ï¼šæ·±æ‹·è´æ‰€æœ‰å…ƒç´ ï¼ˆæ…¢ï¼‰</span>
    std::vector&lt;<span class="hljs-type">int</span>&gt; v1 = <span class="hljs-built_in">createVector</span>();  <span class="hljs-comment">// C++11 ä¹‹å‰ï¼šæ‹·è´ 100 ä¸‡ä¸ªå…ƒç´ </span>

    <span class="hljs-comment">// ç§»åŠ¨ï¼šè½¬ç§»å†…å­˜æ‰€æœ‰æƒï¼ˆå¿«ï¼‰</span>
    std::vector&lt;<span class="hljs-type">int</span>&gt; v2 = <span class="hljs-built_in">createVector</span>();  <span class="hljs-comment">// C++11 ä¹‹åï¼šç§»åŠ¨æ„é€ ï¼Œåªè½¬ç§»æŒ‡é’ˆ</span>
}
</code></pre>
<p>ç§»åŠ¨æ„é€ å‡½æ•°å®ç°ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Buffer</span> {
    <span class="hljs-type">int</span>* data_;
    <span class="hljs-type">size_t</span> size_;
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// æ‹·è´æ„é€ ï¼šæ·±æ‹·è´</span>
    <span class="hljs-built_in">Buffer</span>(<span class="hljs-type">const</span> Buffer&amp; other) : <span class="hljs-built_in">size_</span>(other.size_) {
        data_ = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[size_];
        std::<span class="hljs-built_in">copy</span>(other.data_, other.data_ + size_, data_);  <span class="hljs-comment">// æ‹·è´æ‰€æœ‰å…ƒç´ </span>
    }

    <span class="hljs-comment">// ç§»åŠ¨æ„é€ ï¼šè½¬ç§»æ‰€æœ‰æƒ</span>
    <span class="hljs-built_in">Buffer</span>(Buffer&amp;&amp; other) <span class="hljs-keyword">noexcept</span> : <span class="hljs-built_in">data_</span>(other.data_), <span class="hljs-built_in">size_</span>(other.size_) {
        other.data_ = <span class="hljs-literal">nullptr</span>;  <span class="hljs-comment">// æ¸…ç©ºæºå¯¹è±¡</span>
        other.size_ = <span class="hljs-number">0</span>;
    }
};
</code></pre>
<p><strong>std::move</strong></p>
<p><code>std::move</code> å°†å·¦å€¼è½¬æ¢ä¸ºå³å€¼å¼•ç”¨ï¼Œè§¦å‘ç§»åŠ¨è¯­ä¹‰ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">v1</span><span class="hljs-params">(<span class="hljs-number">1000000</span>)</span></span>;
std::vector&lt;<span class="hljs-type">int</span>&gt; v2 = std::<span class="hljs-built_in">move</span>(v1);  <span class="hljs-comment">// ç§»åŠ¨ï¼Œv1 è¢«æ¸…ç©º</span>
</code></pre>
<p><strong>æ€§èƒ½ä¼˜åŠ¿</strong></p>
<p>ç§»åŠ¨è¯­ä¹‰å®ç°æŒ‰å€¼ä¼ é€’çš„é›¶æ‹·è´ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æŒ‰å€¼è¿”å› + ç§»åŠ¨è¯­ä¹‰ = é›¶æ‹·è´</span>
<span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">createLargeVector</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">v</span><span class="hljs-params">(<span class="hljs-number">1000000</span>)</span></span>;
    <span class="hljs-keyword">return</span> v;  <span class="hljs-comment">// è‡ªåŠ¨ç§»åŠ¨ï¼Œæ— æ‹·è´</span>
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">processVector</span><span class="hljs-params">(std::vector&lt;<span class="hljs-type">int</span>&gt; v)</span> </span>{  <span class="hljs-comment">// æŒ‰å€¼æ¥æ”¶</span>
    <span class="hljs-comment">// å¤„ç† v</span>
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">auto</span> v = <span class="hljs-built_in">createLargeVector</span>();  <span class="hljs-comment">// ç§»åŠ¨æ„é€ </span>
    <span class="hljs-built_in">processVector</span>(std::<span class="hljs-built_in">move</span>(v));   <span class="hljs-comment">// ç§»åŠ¨ä¼ é€’</span>
}
</code></pre>
<p>ç§»åŠ¨è¯­ä¹‰ä¼˜åŠ¿ï¼š</p>
<ul>
<li>é¿å…æ·±æ‹·è´ï¼Œåªè½¬ç§»æŒ‡é’ˆï¼ˆO(1) vs O(n)ï¼‰</li>
<li>é…åˆå€¼è¯­ä¹‰ï¼Œå®ç°ç®€æ´è¯­æ³•å’Œæè‡´æ€§èƒ½</li>
</ul>
<h2 data-id="heading-26">é¿å…ä½¿ç”¨åŠ¨æ€å†…å­˜åˆ†é…</h2>
<p>åŠ¨æ€å†…å­˜åˆ†é…é€šè¿‡ <code>new</code>/<code>delete</code>ã€<code>malloc</code>/<code>free</code> åœ¨å †ä¸Šåˆ†é…å†…å­˜ï¼Œä½†æ¶‰åŠç³»ç»Ÿè°ƒç”¨ã€å†…å­˜ç¢ç‰‡å’Œç¼“å­˜æœªå‘½ä¸­ç­‰å¼€é”€ã€‚æœ¬ç« åˆ†æåŠ¨æ€å†…å­˜åˆ†é…çš„åº•å±‚å®ç°å’Œæ€§èƒ½ä»£ä»·ï¼Œå¹¶æä¾›æ ˆåˆ†é…ã€å†…å­˜æ± ã€è‡ªå®šä¹‰åˆ†é…å™¨ç­‰æ›¿ä»£æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-27">åŠ¨æ€å†…å­˜åˆ†é…ç®€è¿°</h3>
<p>åŠ¨æ€å†…å­˜åˆ†é…(Dynamic Memory Allocation)åœ¨è¿è¡Œæ—¶ä»å †(Heap)ä¸Šåˆ†é…å†…å­˜ï¼Œç”Ÿå‘½å‘¨æœŸç”±ç¨‹åºå‘˜æ§åˆ¶ã€‚C++ æä¾› <code>new</code>/<code>delete</code> è¿ç®—ç¬¦ï¼ŒC æä¾› <code>malloc</code>/<code>free</code> å‡½æ•°ã€‚</p>
<p><strong>åŸºç¡€ç”¨æ³•</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Resource</span> {
    <span class="hljs-type">int</span>* data_;
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Resource</span>(<span class="hljs-type">int</span> size) : <span class="hljs-built_in">data_</span>(<span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[size]) {
        std::cout &lt;&lt; <span class="hljs-string">"Resource allocated\n"</span>;
    }
    ~<span class="hljs-built_in">Resource</span>() {
        <span class="hljs-keyword">delete</span>[] data_;
        std::cout &lt;&lt; <span class="hljs-string">"Resource released\n"</span>;
    }
};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// newï¼šåˆ†é…å†…å­˜ + è°ƒç”¨æ„é€ å‡½æ•°</span>
    Resource* r = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Resource</span>(<span class="hljs-number">100</span>);
    <span class="hljs-keyword">delete</span> r;  <span class="hljs-comment">// è°ƒç”¨ææ„å‡½æ•° + é‡Šæ”¾å†…å­˜</span>

    <span class="hljs-comment">// mallocï¼šåªåˆ†é…åŸå§‹å†…å­˜ï¼Œä¸è°ƒç”¨æ„é€ å‡½æ•°</span>
    <span class="hljs-type">int</span>* arr = (<span class="hljs-type">int</span>*)<span class="hljs-built_in">malloc</span>(<span class="hljs-number">1000</span> * <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">int</span>));
    <span class="hljs-built_in">free</span>(arr);  <span class="hljs-comment">// åªé‡Šæ”¾å†…å­˜ï¼Œä¸è°ƒç”¨ææ„å‡½æ•°</span>

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><strong>new vs malloc</strong></p>






























<table><thead><tr><th>ç‰¹æ€§</th><th><code>new</code>/<code>delete</code></th><th><code>malloc</code>/<code>free</code></th></tr></thead><tbody><tr><td>ç±»å‹</td><td>C++ è¿ç®—ç¬¦</td><td>C å‡½æ•°</td></tr><tr><td>è°ƒç”¨æ„é€ /ææ„å‡½æ•°</td><td>æ˜¯</td><td>å¦</td></tr><tr><td>ç±»å‹å®‰å…¨</td><td>æ˜¯ï¼ˆè‡ªåŠ¨æ¨å¯¼ç±»å‹ï¼‰</td><td>å¦ï¼ˆéœ€è¦å¼ºåˆ¶è½¬æ¢ï¼‰</td></tr><tr><td>å¤±è´¥å¤„ç†</td><td>æŠ›å‡º <code>std::bad_alloc</code></td><td>è¿”å› <code>nullptr</code></td></tr></tbody></table>
<p>åŠ¨æ€å†…å­˜åˆ†é…çš„å…¸å‹ä½¿ç”¨åœºæ™¯åŒ…æ‹¬å¤§å°ä¸ç¡®å®šï¼ˆè¿è¡Œæ—¶æ‰çŸ¥é“éœ€è¦å¤šå°‘å†…å­˜ï¼‰ã€ç”Ÿå‘½å‘¨æœŸè·¨è¶Šä½œç”¨åŸŸï¼ˆå¯¹è±¡éœ€è¦åœ¨å‡½æ•°è¿”å›åç»§ç»­å­˜åœ¨ï¼‰ã€å¤šæ€å¯¹è±¡ç®¡ç†ï¼ˆä½¿ç”¨åŸºç±»æŒ‡é’ˆç®¡ç†ä¸åŒæ´¾ç”Ÿç±»å¯¹è±¡ï¼‰ã€‚è™½ç„¶åŠ¨æ€å†…å­˜åˆ†é…æä¾›äº†çµæ´»æ€§ï¼Œä½†å¸¦æ¥äº†æ˜¾è‘—çš„æ€§èƒ½å¼€é”€å’Œç®¡ç†å¤æ‚åº¦ã€‚</p>
<h3 data-id="heading-28">åº•å±‚å®ç°ä¸å¼€é”€åˆ†æ</h3>
<p>åŠ¨æ€å†…å­˜åˆ†é…çš„æ€§èƒ½å¼€é”€ä¸»è¦æ¥è‡ªå››ä¸ªæ–¹é¢ï¼šç³»ç»Ÿè°ƒç”¨ã€å†…å­˜ç®¡ç†å™¨ç»´æŠ¤ã€å†…å­˜ç¢ç‰‡å’Œç¼“å­˜æœªå‘½ä¸­ã€‚</p>
<p><strong>ç³»ç»Ÿè°ƒç”¨å¼€é”€</strong></p>
<p>é¢‘ç¹çš„å°å†…å­˜åˆ†é…ä¼šè§¦å‘ç³»ç»Ÿè°ƒç”¨ï¼Œé™·å…¥å†…æ ¸æ€ï¼Œå¼€é”€è¿œå¤§äºç”¨æˆ·æ€æ“ä½œã€‚ç°ä»£å†…å­˜åˆ†é…å™¨ï¼ˆå¦‚ ptmallocã€jemallocï¼‰é€šè¿‡å†…å­˜æ± ç¼“è§£è¿™ä¸€é—®é¢˜ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å†…å­˜åˆ†é…å™¨çš„ç®€åŒ–å·¥ä½œæµç¨‹</span>
<span class="hljs-function"><span class="hljs-type">void</span>* <span class="hljs-title">malloc</span><span class="hljs-params">(<span class="hljs-type">size_t</span> size)</span> </span>{
    <span class="hljs-comment">// 1. æ£€æŸ¥å†…å­˜æ± æ˜¯å¦æœ‰ç©ºé—²å—</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">has_free_block_in_pool</span>(size)) {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">allocate_from_pool</span>(size);  <span class="hljs-comment">// ç”¨æˆ·æ€ï¼Œå¿«é€Ÿ</span>
    }

    <span class="hljs-comment">// 2. å†…å­˜æ± ä¸è¶³ï¼Œå‘æ“ä½œç³»ç»Ÿç”³è¯·å¤§å—å†…å­˜</span>
    <span class="hljs-type">void</span>* ptr = <span class="hljs-built_in">sbrk</span>(BIG_SIZE);  <span class="hljs-comment">// ç³»ç»Ÿè°ƒç”¨ï¼Œæ…¢</span>
    <span class="hljs-built_in">add_to_pool</span>(ptr);
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">allocate_from_pool</span>(size);
}
</code></pre>
<p>å†…å­˜æ± åˆ†é…ä»ç”¨æˆ·æ€å®Œæˆï¼Œè€Œç³»ç»Ÿè°ƒç”¨éœ€è¦é™·å…¥å†…æ ¸æ€ï¼Œä¸¤è€…çš„æ€§èƒ½å·®è·å·¨å¤§ã€‚</p>
<p><strong>å†…å­˜ç®¡ç†å™¨ç»´æŠ¤å¼€é”€</strong></p>
<p>å†…å­˜åˆ†é…å™¨éœ€è¦ç»´æŠ¤å…ƒæ•°æ®ï¼ˆç©ºé—²é“¾è¡¨ã€å¤§å°ä¿¡æ¯ç­‰ï¼‰ï¼Œæ¯æ¬¡åˆ†é…/é‡Šæ”¾éƒ½éœ€è¦æŸ¥æ‰¾å’Œæ›´æ–°ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å…¸å‹çš„å†…å­˜å—ç»“æ„</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">MemoryBlock</span> {
    <span class="hljs-type">size_t</span> size;           <span class="hljs-comment">// å—å¤§å°ï¼ˆ8 å­—èŠ‚ï¼‰</span>
    <span class="hljs-type">bool</span> is_free;          <span class="hljs-comment">// æ˜¯å¦ç©ºé—²ï¼ˆ1 å­—èŠ‚ï¼‰</span>
    MemoryBlock* next;     <span class="hljs-comment">// ä¸‹ä¸€ä¸ªç©ºé—²å—ï¼ˆ8 å­—èŠ‚ï¼‰</span>
    <span class="hljs-type">char</span> padding[<span class="hljs-number">7</span>];       <span class="hljs-comment">// å¯¹é½å¡«å……</span>
    <span class="hljs-comment">// æ€»å¼€é”€ï¼š24 å­—èŠ‚</span>
    <span class="hljs-type">char</span> user_data[];      <span class="hljs-comment">// ç”¨æˆ·æ•°æ®</span>
};
</code></pre>
<p>å¯¹äºå°å¯¹è±¡ï¼Œå…ƒæ•°æ®å¼€é”€å æ¯”æ˜¾è‘—ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åˆ†é… 8 å­—èŠ‚å¯¹è±¡</span>
<span class="hljs-type">int</span>* ptr = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[<span class="hljs-number">2</span>];  <span class="hljs-comment">// ç”¨æˆ·æ•°æ®ï¼š8 å­—èŠ‚</span>
<span class="hljs-comment">// å®é™…å ç”¨ï¼š8 (æ•°æ®) + 24 (å…ƒæ•°æ®) = 32 å­—èŠ‚</span>
<span class="hljs-comment">// å¼€é”€ï¼š300%</span>
</code></pre>
<p><strong>å†…å­˜ç¢ç‰‡</strong></p>
<p>é¢‘ç¹åˆ†é…/é‡Šæ”¾ä¸åŒå¤§å°çš„å†…å­˜å¯¼è‡´ç¢ç‰‡ï¼Œé™ä½å†…å­˜åˆ©ç”¨ç‡ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åˆ†é…å’Œé‡Šæ”¾å¯¼è‡´ç¢ç‰‡</span>
<span class="hljs-type">int</span>* a = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[<span class="hljs-number">100</span>];   <span class="hljs-comment">// 400 å­—èŠ‚</span>
<span class="hljs-type">int</span>* b = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[<span class="hljs-number">200</span>];   <span class="hljs-comment">// 800 å­—èŠ‚</span>
<span class="hljs-type">int</span>* c = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[<span class="hljs-number">100</span>];   <span class="hljs-comment">// 400 å­—èŠ‚</span>

<span class="hljs-keyword">delete</span>[] b;              <span class="hljs-comment">// é‡Šæ”¾ bï¼Œä¸­é—´ç•™ä¸‹ 800 å­—èŠ‚ç©ºæ´</span>

<span class="hljs-comment">// å°è¯•åˆ†é… 1000 å­—èŠ‚ï¼Œè™½ç„¶æ€»ç©ºé—²å†…å­˜è¶³å¤Ÿï¼Œä½†æ— è¿ç»­ç©ºé—´</span>
<span class="hljs-type">int</span>* d = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[<span class="hljs-number">250</span>];   <span class="hljs-comment">// å¯èƒ½å¤±è´¥æˆ–è§¦å‘ç³»ç»Ÿè°ƒç”¨</span>
</code></pre>
<p>å†…å­˜å¸ƒå±€ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[a: 400B]</span><span class="hljs-selector-attr">[ç©ºæ´: 800B]</span><span class="hljs-selector-attr">[c: 400B]</span>
          â†‘ æ— æ³•åˆ†é… <span class="hljs-number">1000</span>B
</code></pre>
<p><strong>ç¼“å­˜æœªå‘½ä¸­</strong></p>
<p>å †ä¸Šåˆ†é…çš„å¯¹è±¡åœ°å€åˆ†æ•£ï¼Œç›¸æ¯”æ ˆä¸Šè¿ç»­åˆ†é…ï¼Œç¼“å­˜å‘½ä¸­ç‡ä½ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å †åˆ†é…ï¼šå¯¹è±¡åœ°å€åˆ†æ•£</span>
std::vector&lt;<span class="hljs-type">int</span>*&gt; heap_ptrs;
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
    heap_ptrs.<span class="hljs-built_in">push_back</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(i));  <span class="hljs-comment">// æ¯ä¸ª int å¯èƒ½åœ¨ä¸åŒçš„ç¼“å­˜è¡Œ</span>
}

<span class="hljs-comment">// è®¿é—®æ—¶ç¼“å­˜æœªå‘½ä¸­ç‡é«˜</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>* ptr : heap_ptrs) {
    <span class="hljs-built_in">process</span>(*ptr);  <span class="hljs-comment">// æ¯æ¬¡è®¿é—®å¯èƒ½å¯¼è‡´ç¼“å­˜æœªå‘½ä¸­</span>
}

<span class="hljs-comment">// æ ˆåˆ†é…ï¼šå¯¹è±¡è¿ç»­å­˜å‚¨</span>
<span class="hljs-type">int</span> stack_arr[<span class="hljs-number">1000</span>];
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
    stack_arr[i] = i;  <span class="hljs-comment">// è¿ç»­å†…å­˜</span>
}

<span class="hljs-comment">// è®¿é—®æ—¶ç¼“å­˜å‹å¥½</span>
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> val : stack_arr) {
    <span class="hljs-built_in">process</span>(val);  <span class="hljs-comment">// é¡ºåºè®¿é—®ï¼Œé¢„å–æ•ˆç‡é«˜</span>
}
</code></pre>
<p><strong>å¼€é”€æ€»ç»“</strong></p>





























<table><thead><tr><th>å¼€é”€ç±»å‹</th><th>å½±å“</th></tr></thead><tbody><tr><td>ç³»ç»Ÿè°ƒç”¨</td><td>é™·å…¥å†…æ ¸æ€ï¼Œå¼€é”€å¤§</td></tr><tr><td>å…ƒæ•°æ®ç»´æŠ¤</td><td>æŸ¥æ‰¾ç©ºé—²å—ã€æ›´æ–°é“¾è¡¨</td></tr><tr><td>å†…å­˜ç¢ç‰‡</td><td>é™ä½å†…å­˜åˆ©ç”¨ç‡ã€è§¦å‘é¢å¤–åˆ†é…</td></tr><tr><td>ç¼“å­˜æœªå‘½ä¸­</td><td>å†…å­˜è®¿é—®å»¶è¿Ÿå¢åŠ </td></tr><tr><td>å¯¹è±¡æ„é€ ææ„</td><td>new/delete è°ƒç”¨æ„é€ /ææ„å‡½æ•°</td></tr></tbody></table>
<h3 data-id="heading-29">æ›¿ä»£æ–¹æ¡ˆä¸€ï¼šæ ˆåˆ†é…ä¸å›ºå®šå¤§å°å®¹å™¨</h3>
<p>æ ˆåˆ†é…åœ¨å‡½æ•°è°ƒç”¨æ—¶è‡ªåŠ¨åˆ†é…å’Œé‡Šæ”¾ï¼Œæ— ç³»ç»Ÿè°ƒç”¨å¼€é”€ï¼Œå†…å­˜è¿ç»­ï¼Œç¼“å­˜å‹å¥½ã€‚å¯¹äºå¤§å°ç¡®å®šçš„æ•°æ®ï¼Œä½¿ç”¨æ ˆåˆ†é…æˆ–å›ºå®šå¤§å°å®¹å™¨ï¼ˆå¦‚ <code>std::array</code>ï¼‰æ›¿ä»£å †åˆ†é…ã€‚</p>
<p><strong>æ ˆåˆ†é…</strong></p>
<p>æ ˆåˆ†é…åªéœ€è°ƒæ•´æ ˆæŒ‡é’ˆï¼Œé›¶å¼€é”€ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">processData</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// æ ˆåˆ†é…ï¼šè‡ªåŠ¨åˆ†é…å’Œé‡Šæ”¾</span>
    <span class="hljs-type">int</span> arr[<span class="hljs-number">1000</span>];  <span class="hljs-comment">// ç¼–è¯‘æœŸç¡®å®šå¤§å°</span>
    <span class="hljs-comment">// ä½¿ç”¨ arr...</span>
}  <span class="hljs-comment">// å‡½æ•°è¿”å›æ—¶è‡ªåŠ¨é‡Šæ”¾ï¼Œæ— éœ€ delete</span>
</code></pre>
<p>æ±‡ç¼–ä»£ç ï¼ˆç®€åŒ–ï¼‰ï¼š</p>
<pre><code class="hljs language-asm" lang="asm">; åˆ†é…æ ˆç©ºé—´
sub rsp, 4000  ; ç§»åŠ¨æ ˆæŒ‡é’ˆï¼Œåˆ†é… 4000 å­—èŠ‚

; å‡½æ•°ä½“...

; é‡Šæ”¾æ ˆç©ºé—´
add rsp, 4000  ; æ¢å¤æ ˆæŒ‡é’ˆ
</code></pre>
<p>æ ˆåˆ†é…åªéœ€ä¸€æ¡æŒ‡ä»¤ï¼Œç›¸æ¯”å †åˆ†é…ï¼ˆéœ€è¦æŸ¥æ‰¾ç©ºé—²å—ã€æ›´æ–°é“¾è¡¨ï¼‰ï¼Œæ€§èƒ½æå‡æ˜¾è‘—ã€‚</p>
<p><strong>std::array</strong></p>
<p><code>std::array</code>(C++11) æ˜¯æ ˆä¸Šåˆ†é…çš„å›ºå®šå¤§å°æ•°ç»„ï¼Œæä¾› STL å®¹å™¨æ¥å£ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;array&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">comparePerformance</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// std::vectorï¼šå †åˆ†é…</span>
    <span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">vec</span><span class="hljs-params">(<span class="hljs-number">1000</span>)</span></span>;  <span class="hljs-comment">// è°ƒç”¨ new int[1000]</span>
    <span class="hljs-comment">// ä½¿ç”¨ vec...</span>
    <span class="hljs-comment">// vec ææ„æ—¶è°ƒç”¨ delete[]</span>

    <span class="hljs-comment">// std::arrayï¼šæ ˆåˆ†é…</span>
    std::array&lt;<span class="hljs-type">int</span>, 1000&gt; arr;  <span class="hljs-comment">// æ ˆä¸Šåˆ†é…ï¼Œé›¶å¼€é”€</span>
    <span class="hljs-comment">// ä½¿ç”¨ arr...</span>
}  <span class="hljs-comment">// arr è‡ªåŠ¨é‡Šæ”¾ï¼Œæ— éœ€ææ„æ“ä½œ</span>
</code></pre>
<p><strong>å°å­—ç¬¦ä¸²ä¼˜åŒ–ï¼ˆSSOï¼‰</strong></p>
<p><code>std::string</code> ä½¿ç”¨ SSO(Small String Optimization)ï¼ŒçŸ­å­—ç¬¦ä¸²å­˜å‚¨åœ¨æ ˆä¸Šçš„å†…éƒ¨ç¼“å†²åŒºï¼Œé¿å…å †åˆ†é…ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// çŸ­å­—ç¬¦ä¸²ï¼šä½¿ç”¨ SSOï¼Œæ— å †åˆ†é…</span>
    std::string short_str = <span class="hljs-string">"hello"</span>;  <span class="hljs-comment">// é€šå¸¸ â‰¤15 å­—ç¬¦ä½¿ç”¨ SSO</span>
    std::cout &lt;&lt; <span class="hljs-string">"Capacity: "</span> &lt;&lt; short_str.<span class="hljs-built_in">capacity</span>() &lt;&lt; std::endl;  <span class="hljs-comment">// 15</span>

    <span class="hljs-comment">// é•¿å­—ç¬¦ä¸²ï¼šå †åˆ†é…</span>
    std::string long_str = <span class="hljs-string">"This is a very long string that exceeds SSO buffer"</span>;
    std::cout &lt;&lt; <span class="hljs-string">"Capacity: "</span> &lt;&lt; long_str.<span class="hljs-built_in">capacity</span>() &lt;&lt; std::endl;  <span class="hljs-comment">// &gt; 15</span>
}
</code></pre>
<p>SSO å®ç°ï¼ˆç®€åŒ–ï¼‰ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">string</span> {
    <span class="hljs-keyword">union</span> {
        <span class="hljs-type">char</span> sso_buffer_[<span class="hljs-number">16</span>];  <span class="hljs-comment">// çŸ­å­—ç¬¦ä¸²ç¼“å†²åŒº</span>
        <span class="hljs-type">char</span>* heap_ptr_;       <span class="hljs-comment">// é•¿å­—ç¬¦ä¸²å †æŒ‡é’ˆ</span>
    };
    <span class="hljs-type">size_t</span> size_;
    <span class="hljs-type">size_t</span> capacity_;

<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">string</span>(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* str) {
        size_ = <span class="hljs-built_in">strlen</span>(str);
        <span class="hljs-keyword">if</span> (size_ &lt;= <span class="hljs-number">15</span>) {
            <span class="hljs-comment">// ä½¿ç”¨ SSO</span>
            <span class="hljs-built_in">memcpy</span>(sso_buffer_, str, size_);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// å †åˆ†é…</span>
            heap_ptr_ = <span class="hljs-keyword">new</span> <span class="hljs-type">char</span>[size_ + <span class="hljs-number">1</span>];
            <span class="hljs-built_in">memcpy</span>(heap_ptr_, str, size_);
        }
    }
};
</code></pre>
<p><strong>æ€§èƒ½å¯¹æ¯”</strong></p>








































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>åˆ†é…å¼€é”€</th><th>é‡Šæ”¾å¼€é”€</th><th>ç¼“å­˜å‹å¥½æ€§</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å †åˆ†é…</td><td>æ…¢</td><td>æ…¢</td><td>å·®</td><td>å¤§å°ä¸ç¡®å®šã€å¤§å¯¹è±¡</td></tr><tr><td>æ ˆåˆ†é…</td><td>æå¿«</td><td>æå¿«</td><td>ä¼˜</td><td>å¤§å°ç¡®å®šã€å°å¯¹è±¡</td></tr><tr><td><code>std::array</code></td><td>é›¶å¼€é”€</td><td>é›¶å¼€é”€</td><td>ä¼˜</td><td>å›ºå®šå¤§å°æ•°ç»„</td></tr><tr><td><code>std::string</code> SSO</td><td>é›¶å¼€é”€</td><td>é›¶å¼€é”€</td><td>ä¼˜</td><td>çŸ­å­—ç¬¦ä¸²ï¼ˆâ‰¤15 å­—ç¬¦ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-30">æ›¿ä»£æ–¹æ¡ˆäºŒï¼šå†…å­˜æ± </h3>
<p>å†…å­˜æ± (Memory Pool)é¢„å…ˆåˆ†é…å¤§å—å†…å­˜ï¼Œä½¿ç”¨é“¾è¡¨ç®¡ç†ç©ºé—²å—ï¼Œé¿å…é¢‘ç¹çš„ç³»ç»Ÿè°ƒç”¨å’Œå†…å­˜ç¢ç‰‡ï¼Œæ˜¾è‘—æå‡åˆ†é…/é‡Šæ”¾æ€§èƒ½ã€‚</p>
<p><strong>å®ç°</strong>ï¼šå†…å­˜æ± ä¸ºç‰¹å®šç±»å‹é¢„å…ˆåˆ†é…å¤§å—å†…å­˜ï¼Œä½¿ç”¨é“¾è¡¨ç®¡ç†ç©ºé—²å—ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstddef&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdlib&gt;</span></span>

<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryPool</span> {
    <span class="hljs-keyword">union</span> <span class="hljs-title class_">Block</span> {
        T data;        <span class="hljs-comment">// å¯¹è±¡æ•°æ®</span>
        Block* next;   <span class="hljs-comment">// ç©ºé—²é“¾è¡¨æŒ‡é’ˆï¼ˆå¯¹è±¡æœªæ„é€ æ—¶ä½¿ç”¨ï¼‰</span>
    };

    Block* free_list_;  <span class="hljs-comment">// ç©ºé—²å—é“¾è¡¨</span>
    Block* pool_;       <span class="hljs-comment">// å†…å­˜æ± èµ·å§‹åœ°å€</span>
    <span class="hljs-type">size_t</span> capacity_;   <span class="hljs-comment">// æ± å®¹é‡</span>

<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">MemoryPool</span>(<span class="hljs-type">size_t</span> block_count) : <span class="hljs-built_in">capacity_</span>(block_count) {
        <span class="hljs-comment">// é¢„å…ˆåˆ†é…å¤§å—å†…å­˜</span>
        pool_ = (Block*)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(Block) * block_count);

        <span class="hljs-comment">// å°†å†…å­˜åˆ’åˆ†ä¸ºå—ï¼Œè¿æ¥åˆ°ç©ºé—²é“¾è¡¨</span>
        free_list_ = pool_;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; block_count - <span class="hljs-number">1</span>; ++i) {
            pool_[i].next = &amp;pool_[i + <span class="hljs-number">1</span>];
        }
        pool_[block_count - <span class="hljs-number">1</span>].next = <span class="hljs-literal">nullptr</span>;
    }

    ~<span class="hljs-built_in">MemoryPool</span>() {
        <span class="hljs-built_in">free</span>(pool_);
    }

    <span class="hljs-function">T* <span class="hljs-title">allocate</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (!free_list_) {
            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">bad_alloc</span>();  <span class="hljs-comment">// å†…å­˜æ± è€—å°½ï¼ŒæŠ›å‡ºå¼‚å¸¸</span>
        }

        <span class="hljs-comment">// ä»ç©ºé—²é“¾è¡¨å¤´éƒ¨å–å‡ºä¸€ä¸ªå—</span>
        Block* block = free_list_;
        free_list_ = block-&gt;next;

        <span class="hljs-comment">// åœ¨å—ä¸Šæ„é€ å¯¹è±¡</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">new</span> (&amp;block-&gt;data) <span class="hljs-built_in">T</span>();
    }

    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">deallocate</span><span class="hljs-params">(T* ptr)</span> </span>{
        <span class="hljs-comment">// è°ƒç”¨ææ„å‡½æ•°</span>
        ptr-&gt;~<span class="hljs-built_in">T</span>();

        <span class="hljs-comment">// å°†å—å½’è¿˜åˆ°ç©ºé—²é“¾è¡¨å¤´éƒ¨</span>
        Block* block = <span class="hljs-built_in">reinterpret_cast</span>&lt;Block*&gt;(ptr);
        block-&gt;next = free_list_;
        free_list_ = block;
    }
};

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Object</span> {
    <span class="hljs-type">int</span> data_[<span class="hljs-number">10</span>];
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Object</span>() { <span class="hljs-comment">/* æ„é€ é€»è¾‘ */</span> }
    ~<span class="hljs-built_in">Object</span>() { <span class="hljs-comment">/* ææ„é€»è¾‘ */</span> }
};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">MemoryPool&lt;Object&gt; <span class="hljs-title">pool</span><span class="hljs-params">(<span class="hljs-number">1000</span>)</span></span>;  <span class="hljs-comment">// 1000 ä¸ª Object å—</span>

    Object* p1 = pool.<span class="hljs-built_in">allocate</span>();  <span class="hljs-comment">// O(1)ï¼Œè‡ªåŠ¨è°ƒç”¨æ„é€ å‡½æ•°</span>
    Object* p2 = pool.<span class="hljs-built_in">allocate</span>();

    pool.<span class="hljs-built_in">deallocate</span>(p1);  <span class="hljs-comment">// O(1)ï¼Œè‡ªåŠ¨è°ƒç”¨ææ„å‡½æ•°</span>
    pool.<span class="hljs-built_in">deallocate</span>(p2);
}
</code></pre>
<p><strong>çº¿ç¨‹å®‰å…¨è¯´æ˜</strong>ï¼šä¸Šè¿°å†…å­˜æ± å®ç°æ˜¯<strong>çº¿ç¨‹ä¸å®‰å…¨</strong>çš„ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ä½¿ç”¨ä¼šå¯¼è‡´ç«æ€æ¡ä»¶ã€‚</p>
<p><strong>æ€§èƒ½å¯¹æ¯”</strong></p>

































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>åˆ†é…å¼€é”€</th><th>é‡Šæ”¾å¼€é”€</th><th>å†…å­˜ç¢ç‰‡</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å †åˆ†é…</td><td>æ…¢</td><td>æ…¢</td><td>æœ‰</td><td>é€šç”¨åœºæ™¯</td></tr><tr><td>å†…å­˜æ± ï¼ˆè‡ªåŠ¨æ„é€ /ææ„ï¼‰</td><td>å¿« + æ„é€ å¼€é”€</td><td>å¿« + ææ„å¼€é”€</td><td>æ— </td><td>å›ºå®šå¤§å°å¯¹è±¡çš„é¢‘ç¹åˆ†é…/é‡Šæ”¾</td></tr><tr><td>å†…å­˜æ± ï¼ˆæ‰‹åŠ¨æ„é€ /ææ„ï¼‰</td><td>éå¸¸å¿«</td><td>éå¸¸å¿«</td><td>æ— </td><td>æ„é€ /ææ„å¼€é”€å¤§çš„å¯¹è±¡å¤ç”¨</td></tr></tbody></table>
<h3 data-id="heading-31">æ›¿ä»£æ–¹æ¡ˆä¸‰ï¼šè‡ªå®šä¹‰åˆ†é…å™¨</h3>
<p>STL å®¹å™¨æ”¯æŒè‡ªå®šä¹‰åˆ†é…å™¨(Allocator)ï¼Œå…è®¸æ›¿æ¢é»˜è®¤çš„å †åˆ†é…ç­–ç•¥ã€‚é€šè¿‡è‡ªå®šä¹‰åˆ†é…å™¨å¯ä»¥ä½¿ç”¨å†…å­˜æ± ã€æ ˆåˆ†é…ç­‰é«˜æ€§èƒ½ç­–ç•¥ã€‚</p>
<p><strong>è‡ªå®šä¹‰åˆ†é…å™¨æ¥å£</strong></p>
<p>åˆ†é…å™¨éœ€è¦å®ç°ä»¥ä¸‹æ¥å£ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomAllocator</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">using</span> value_type = T;

    <span class="hljs-comment">// åˆ†é… n ä¸ª T å¯¹è±¡çš„å†…å­˜ï¼ˆä¸è°ƒç”¨æ„é€ å‡½æ•°ï¼‰</span>
    <span class="hljs-function">T* <span class="hljs-title">allocate</span><span class="hljs-params">(<span class="hljs-type">size_t</span> n)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">static_cast</span>&lt;T*&gt;(<span class="hljs-built_in">malloc</span>(n * <span class="hljs-built_in">sizeof</span>(T)));
    }

    <span class="hljs-comment">// é‡Šæ”¾å†…å­˜ï¼ˆä¸è°ƒç”¨ææ„å‡½æ•°ï¼‰</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">deallocate</span><span class="hljs-params">(T* ptr, <span class="hljs-type">size_t</span> n)</span> </span>{
        <span class="hljs-built_in">free</span>(ptr);
    }

    <span class="hljs-comment">// æ¯”è¾ƒè¿ç®—ç¬¦ï¼ˆåˆ¤æ–­åˆ†é…å™¨æ˜¯å¦å¯äº’æ¢ï¼‰</span>
    <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>==(<span class="hljs-type">const</span> CustomAllocator&amp;) <span class="hljs-type">const</span> { <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; }
    <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>!=(<span class="hljs-type">const</span> CustomAllocator&amp;) <span class="hljs-type">const</span> { <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; }
};
</code></pre>
<p><strong>ä½¿ç”¨å†…å­˜æ± çš„åˆ†é…å™¨</strong></p>
<p>ç»“åˆå‰é¢çš„å†…å­˜æ± å®ç°ï¼Œåˆ›å»ºåŸºäºå†…å­˜æ± çš„åˆ†é…å™¨ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PoolAllocator</span> {
    MemoryPool&lt;T&gt;* pool_;  <span class="hljs-comment">// å…±äº«å†…å­˜æ± </span>

<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">using</span> value_type = T;

    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">PoolAllocator</span><span class="hljs-params">(MemoryPool&lt;T&gt;* pool)</span> : pool_(pool) {</span>}

    <span class="hljs-function">T* <span class="hljs-title">allocate</span><span class="hljs-params">(<span class="hljs-type">size_t</span> n)</span> </span>{
        <span class="hljs-keyword">if</span> (n != <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">bad_alloc</span>();  <span class="hljs-comment">// å†…å­˜æ± åªæ”¯æŒå•ä¸ªå¯¹è±¡åˆ†é…</span>
        }
        <span class="hljs-keyword">return</span> pool_-&gt;<span class="hljs-built_in">allocate</span>();
    }

    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">deallocate</span><span class="hljs-params">(T* ptr, <span class="hljs-type">size_t</span> n)</span> </span>{
        pool_-&gt;<span class="hljs-built_in">deallocate</span>(ptr);
    }

    <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>==(<span class="hljs-type">const</span> PoolAllocator&amp; other) <span class="hljs-type">const</span> {
        <span class="hljs-keyword">return</span> pool_ == other.pool_;
    }
    <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>!=(<span class="hljs-type">const</span> PoolAllocator&amp; other) <span class="hljs-type">const</span> {
        <span class="hljs-keyword">return</span> !(*<span class="hljs-keyword">this</span> == other);
    }
};

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">MemoryPool&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">pool</span><span class="hljs-params">(<span class="hljs-number">10000</span>)</span></span>;
    <span class="hljs-function">PoolAllocator&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">alloc</span><span class="hljs-params">(&amp;pool)</span></span>;

    <span class="hljs-comment">// std::vector ä½¿ç”¨è‡ªå®šä¹‰åˆ†é…å™¨</span>
    std::vector&lt;<span class="hljs-type">int</span>, PoolAllocator&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">vec</span>(alloc);
    vec.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">1</span>);  <span class="hljs-comment">// ä½¿ç”¨å†…å­˜æ± åˆ†é…</span>
    vec.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">2</span>);
}
</code></pre>
<p><strong>std::pmrï¼ˆå¤šæ€åˆ†é…å™¨ï¼‰</strong></p>
<p>C++17 å¼•å…¥ <code>std::pmr</code>(Polymorphic Memory Resource)ï¼Œæä¾›è¿è¡Œæ—¶å¯åˆ‡æ¢çš„å†…å­˜åˆ†é…ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory_resource&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// æ ˆä¸Šçš„å•è°ƒç¼“å†²åŒº</span>
    <span class="hljs-type">char</span> buffer[<span class="hljs-number">10000</span>];
    std::<span class="hljs-function">pmr::monotonic_buffer_resource <span class="hljs-title">pool</span><span class="hljs-params">(buffer, <span class="hljs-keyword">sizeof</span>(buffer))</span></span>;

    <span class="hljs-comment">// ä½¿ç”¨ pmr::vectorï¼Œå†…å­˜ä» buffer åˆ†é…</span>
    std::<span class="hljs-function">pmr::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">vec</span><span class="hljs-params">(&amp;pool)</span></span>;
    vec.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">1</span>);
    vec.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">2</span>);
    <span class="hljs-comment">// vec ææ„æ—¶ï¼Œå†…å­˜è‡ªåŠ¨å½’è¿˜åˆ° poolï¼ˆå®é™…ä¸Šå•è°ƒç¼“å†²åŒºä¸å›æ”¶ï¼‰</span>
}
</code></pre>
<p><code>std::pmr</code> æä¾›å¤šç§é¢„å®šä¹‰åˆ†é…å™¨ï¼š</p>
<ul>
<li><code>monotonic_buffer_resource</code>ï¼šå•è°ƒé€’å¢åˆ†é…ï¼Œä¸æ”¯æŒå•ä¸ªå¯¹è±¡é‡Šæ”¾</li>
<li><code>unsynchronized_pool_resource</code>ï¼šçº¿ç¨‹ä¸å®‰å…¨çš„å†…å­˜æ± </li>
<li><code>synchronized_pool_resource</code>ï¼šçº¿ç¨‹å®‰å…¨çš„å†…å­˜æ± </li>
</ul>
<p><strong>æ€§èƒ½å¯¹æ¯”</strong></p>








































<table><thead><tr><th>åˆ†é…å™¨ç±»å‹</th><th>åˆ†é…å¼€é”€</th><th>é‡Šæ”¾å¼€é”€</th><th>çº¿ç¨‹å®‰å…¨</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>é»˜è®¤åˆ†é…å™¨ï¼ˆstd::allocatorï¼‰</td><td>ä¸­ç­‰</td><td>ä¸­ç­‰</td><td>æ˜¯</td><td>é€šç”¨åœºæ™¯</td></tr><tr><td>å†…å­˜æ± åˆ†é…å™¨</td><td>å¿«</td><td>å¿«</td><td>å¦</td><td>å›ºå®šå¤§å°å¯¹è±¡é¢‘ç¹åˆ†é…</td></tr><tr><td>monotonic_buffer_resource</td><td>éå¸¸å¿«</td><td>é›¶å¼€é”€</td><td>å¦</td><td>ä¸´æ—¶æ•°æ®ã€æ‰¹é‡é‡Šæ”¾åœºæ™¯</td></tr><tr><td>synchronized_pool_resource</td><td>è¾ƒå¿«</td><td>è¾ƒå¿«</td><td>æ˜¯</td><td>å¤šçº¿ç¨‹ç¯å¢ƒ</td></tr></tbody></table>
<p>è‡ªå®šä¹‰åˆ†é…å™¨é€‚åˆå¯¹æ€§èƒ½æœ‰æè‡´è¦æ±‚çš„åœºæ™¯ï¼Œé€šè¿‡é€‰æ‹©åˆé€‚çš„åˆ†é…ç­–ç•¥ï¼Œå¯ä»¥å¤§å¹…å‡å°‘å†…å­˜åˆ†é…å¼€é”€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»è®¾è®¡èµ„äº§åˆ°ç”Ÿäº§ä»£ç ï¼šæ„å»ºç»„ä»¶ä¸€è‡´æ€§çš„è‡ªåŠ¨åŒ–é—­ç¯]]></title>    <link>https://juejin.cn/post/7572403510468100139</link>    <guid>https://juejin.cn/post/7572403510468100139</guid>    <pubDate>2025-11-15T10:52:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572403510468100139" data-draft-id="7572465262739144723" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" ä»è®¾è®¡èµ„äº§åˆ°ç”Ÿäº§ä»£ç ï¼šæ„å»ºç»„ä»¶ä¸€è‡´æ€§çš„è‡ªåŠ¨åŒ–é—­ç¯"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-15T10:52:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="workpieces"/> <meta itemprop="url" content="https://juejin.cn/user/2432565183260792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             ä»è®¾è®¡èµ„äº§åˆ°ç”Ÿäº§ä»£ç ï¼šæ„å»ºç»„ä»¶ä¸€è‡´æ€§çš„è‡ªåŠ¨åŒ–é—­ç¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2432565183260792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    workpieces
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T10:52:47.000Z" title="Sat Nov 15 2025 10:52:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. æŒ‘æˆ˜ä¸èƒŒæ™¯ï¼šè®¾è®¡ç³»ç»Ÿä¸­çš„â€œç†µå¢â€é—®é¢˜</h2>
<p>åœ¨ç°ä»£è½¯ä»¶å¼€å‘æµç¨‹ä¸­ï¼Œè®¾è®¡ç³»ç»Ÿï¼ˆDesign Systemï¼‰æ˜¯ç¡®ä¿äº§å“ç•Œé¢ç»Ÿä¸€æ€§å’Œç”¨æˆ·ä½“éªŒè¿è´¯æ€§çš„åŸºçŸ³ã€‚ç„¶è€Œï¼Œè®¾è®¡ç¨¿ä¸å®é™…ä»£ç å®ç°ä¹‹é—´å­˜åœ¨ç€ä¸€ç§å¤©ç„¶çš„â€œç†µå¢â€è¶‹åŠ¿ï¼Œå³éšç€é¡¹ç›®è¿­ä»£å’Œå›¢é˜Ÿåä½œçš„æ·±å…¥ï¼Œä¸¤è€…ä¹‹é—´çš„å·®å¼‚ä¼šä¸æ–­ç´¯ç§¯ï¼Œè¿™ç§ç°è±¡è¢«ç§°ä¸º<strong>è®¾è®¡æ¼‚ç§»ï¼ˆDesign Driftï¼‰</strong> ã€‚å½“æ ¸å¿ƒç»„ä»¶å¦‚æŒ‰é’®ï¼ˆButtonï¼‰ã€å¡ç‰‡ï¼ˆCardï¼‰å’Œè¾“å…¥æ¡†ï¼ˆInputï¼‰åœ¨è®¾è®¡å·¥å…·ï¼ˆå¦‚ Figmaï¼‰ä¸­è¢«æ›´æ–°åï¼Œå‰ç«¯ä»£ç æœªèƒ½åŠæ—¶æˆ–å‡†ç¡®åœ°åŒæ­¥ï¼Œå°±ä¼šå¯¼è‡´ç”¨æˆ·ä½“éªŒçš„å‰²è£‚ã€å¼€å‘æ•ˆç‡çš„ä¸‹é™ä»¥åŠå“ç‰Œèµ„äº§çš„ç¨€é‡Šã€‚</p>
<p>è§£å†³ç»„ä»¶ä¸€è‡´æ€§é—®é¢˜çš„å…³é”®ï¼Œåœ¨äºå»ºç«‹ä¸€ä¸ª<strong>è‡ªåŠ¨åŒ–ã€å¯é‡åŒ–</strong>çš„é—­ç¯æµæ°´çº¿ã€‚è¿™ä¸ä»…è¦æ±‚å¼€å‘è€…å…·å¤‡é«˜åº¦çš„è‡ªå¾‹æ€§ï¼Œæ›´éœ€è¦ä¸€å¥—æœºåˆ¶æ¥ä¸»åŠ¨ç›‘æµ‹ã€æŠ¥å‘Šå¹¶é©±åŠ¨å·®å¼‚çš„ä¿®å¤ã€‚æœ¬æ–‡å°†è¯¦ç»†é˜è¿°å¦‚ä½•æ„å»ºä¸€ä¸ªä» Figma è®¾è®¡èµ„äº§åˆ°ç”Ÿäº§ä»£ç çš„è‡ªåŠ¨åŒ–å¯¹é½æµæ°´çº¿ï¼Œä»¥ç¡®ä¿å±æ€§ã€çŠ¶æ€ã€äº¤äº’å’Œå¯è®¿é—®æ€§ï¼ˆa11yï¼‰çš„é«˜åº¦ä¸€è‡´æ€§ã€‚</p>
<h2 data-id="heading-1">2. è‡ªåŠ¨åŒ–é—­ç¯ï¼šFigma-to-Code å¯¹é½æµæ°´çº¿æ¶æ„</h2>
<p>å®ç°è®¾è®¡ä¸ä»£ç ä¸€è‡´æ€§çš„æ ¸å¿ƒåœ¨äºæ„å»ºä¸€ä¸ªæŒç»­é›†æˆ/æŒç»­äº¤ä»˜ï¼ˆCI/CDï¼‰é©±åŠ¨çš„è‡ªåŠ¨åŒ–é—­ç¯ã€‚è¿™ä¸ªé—­ç¯å°†è®¾è®¡èµ„äº§çš„å˜æ›´è§†ä¸ºä»£ç çš„å˜æ›´ï¼Œå¹¶è§¦å‘ä¸€ç³»åˆ—çš„éªŒè¯å’Œåé¦ˆæœºåˆ¶ã€‚</p>
<p>ä¸‹å›¾å±•ç¤ºäº†è¿™ä¸€è‡ªåŠ¨åŒ–æµæ°´çº¿çš„ç³»ç»Ÿæ¶æ„ï¼Œå®ƒå°†è®¾è®¡ã€è‡ªåŠ¨åŒ–ã€ä»£ç å’Œåé¦ˆå››ä¸ªå…³é”®å±‚çº§ç´§å¯†è¿æ¥ï¼Œå½¢æˆä¸€ä¸ªè‡ªä¿®å¤çš„ç³»ç»Ÿã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3ca4430768d4181a3af1ee8bc7856ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd29ya3BpZWNlcw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763808767&amp;x-signature=JmVgBzWyMxccbkULfRdGlXyiMdk%3D" alt="ç³»ç»Ÿæ¶æ„å›¾ï¼šFigma-to-Code è‡ªåŠ¨åŒ–å¯¹é½æµæ°´çº¿" title="null" loading="lazy"/></p>
<p>ç³»ç»Ÿæ¶æ„å›¾ï¼šFigma-to-Code è‡ªåŠ¨åŒ–å¯¹é½æµæ°´çº¿</p>
<p>è¯¥æµæ°´çº¿çš„å·¥ä½œæµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºï¼šè®¾è®¡èµ„äº§é€šè¿‡ <strong>Figma MCP API</strong> æš´éœ²å…ƒæ•°æ®ï¼Œç»ç”±è‡ªåŠ¨åŒ–å·¥å…·é“¾è¿›è¡Œä»£ç ç”Ÿæˆå’Œè§†è§‰å›å½’æµ‹è¯•ï¼Œæœ€ç»ˆå°†å·®å¼‚è½¬åŒ–ä¸ºç»“æ„åŒ–çš„ <strong>Issue</strong>ï¼Œé©±åŠ¨å¼€å‘è€…è¿›è¡Œç²¾ç¡®ä¿®å¤ï¼Œä»è€Œå®Œæˆä¸€æ¬¡é—­ç¯ã€‚</p>
<blockquote>
<p><strong>æŠ€æœ¯ç»†èŠ‚</strong>ï¼šæˆ‘ä»¬æ¨èä½¿ç”¨å®˜æ–¹ç»´æŠ¤çš„ <code>figma-mcp-sdk</code> åº“ï¼ˆGitHub åœ°å€ï¼š<code>https://github.com/figma/figma-mcp-sdk</code>ï¼‰æ¥å¤„ç†ä¸ Figma çš„æ•°æ®äº¤äº’ã€‚åŒæ—¶ï¼Œç¤¾åŒºä¹Ÿæœ‰ä¼˜ç§€çš„æ›¿ä»£æ–¹æ¡ˆï¼Œä¾‹å¦‚ <code>Figma-Context-MCP</code>ï¼ˆGitHub åœ°å€ï¼š<code>https://github.com/GLips/Figma-Context-MCP</code>ï¼‰ï¼Œå¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚é€‰æ‹©åˆé€‚çš„å·¥å…·ã€‚</p>
</blockquote>
<h2 data-id="heading-2">3. æ­¥éª¤ä¸€ï¼šè®¾è®¡å…ƒæ•°æ®çš„æå–ä¸è§„èŒƒåŒ–</h2>
<p>æµæ°´çº¿çš„ç¬¬ä¸€æ­¥æ˜¯ç²¾ç¡®åœ°ä»è®¾è®¡å·¥å…·ä¸­æå–ç»„ä»¶çš„<strong>è§„èŒƒï¼ˆSpecificationï¼‰</strong> ã€‚å¯¹äº Buttonã€Cardã€Input è¿™ç±»æ ¸å¿ƒç»„ä»¶ï¼Œå…¶è§„èŒƒåŒ…æ‹¬å°ºå¯¸ï¼ˆS/M/Lï¼‰ã€çŠ¶æ€ï¼ˆHover/Pressed/Disabledï¼‰ã€å›¾æ ‡æœ‰æ— ç­‰ã€‚</p>
<p><strong>æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆï¼šDesign Token</strong></p>
<p>ç›´æ¥ä» Figma API è·å–çš„åŸå§‹æ•°æ®å¾€å¾€æ˜¯é›¶æ•£çš„æ ·å¼å€¼ï¼ˆå¦‚é¢œè‰²ä»£ç ã€åƒç´ å€¼ï¼‰ã€‚ä¸ºäº†å®ç°è®¾è®¡è¯­è¨€çš„ç»“æ„åŒ–å’Œè·¨å¹³å°å¤ç”¨ï¼Œæˆ‘ä»¬å¿…é¡»å¼•å…¥ <strong>Design Token</strong> ä½œä¸ºè®¾è®¡ä¸ä»£ç ä¹‹é—´çš„â€œé€šç”¨è¯­è¨€â€ã€‚Design Token æ˜¯è®¾è®¡å†³ç­–çš„åŸå­åŒ–å‘½åå®ä½“ï¼Œä¾‹å¦‚ <code>$color-primary-blue</code> æˆ– <code>$spacing-medium</code>ã€‚</p>

























<table><thead><tr><th>æå–ç›®æ ‡</th><th>æè¿°</th><th>è§„èŒƒåŒ–ç­–ç•¥</th></tr></thead><tbody><tr><td><strong>å±æ€§</strong></td><td>å°ºå¯¸ï¼ˆSizeï¼‰ã€ç±»å‹ï¼ˆVariantï¼‰ã€å›¾æ ‡ï¼ˆIconï¼‰</td><td>æ˜ å°„ä¸ºä»£ç ç»„ä»¶çš„ Propsï¼Œä¸¥æ ¼å®šä¹‰ TS æ¥å£ã€‚</td></tr><tr><td><strong>çŠ¶æ€</strong></td><td>æ‚¬åœï¼ˆHoverï¼‰ã€æŒ‰ä¸‹ï¼ˆPressedï¼‰ã€ç¦ç”¨ï¼ˆDisabledï¼‰</td><td>æå–çŠ¶æ€ä¸‹çš„æ ·å¼å˜åŒ–ï¼Œå¦‚é¢œè‰²ã€é˜´å½±ã€é€æ˜åº¦ã€‚</td></tr><tr><td><strong>äº¤äº’</strong></td><td>ç„¦ç‚¹ï¼ˆFocusï¼‰ã€åŠ è½½ä¸­ï¼ˆBusyï¼‰</td><td>æå– <code>:focus-visible</code> æ ·å¼å’Œ <code>aria-busy</code> çŠ¶æ€çš„è§†è§‰åé¦ˆã€‚</td></tr></tbody></table>
<p>é€šè¿‡ <strong>Figma MCP</strong> æå–çš„å…ƒæ•°æ®åº”é¦–å…ˆè¢«è½¬åŒ–ä¸º Design Tokenï¼Œç„¶åè¿™äº› Token è¢«ç”¨äºé©±åŠ¨ä»£ç ç”Ÿæˆå’Œæ ·å¼å®šä¹‰ï¼Œç¡®ä¿è®¾è®¡æ„å›¾åœ¨ä»£ç å±‚é¢å¾—åˆ°å‡†ç¡®çš„è¡¨è¾¾ã€‚</p>
<blockquote>
<p><strong>Figma MCP æ¥å£åœ°å€</strong>ï¼šç»„ä»¶è§„èŒƒçš„åŸå§‹ JSON æ•°æ®å¯ä»¥é€šè¿‡ <code>https://api.figma.com/v1/mcp/files/{file_key}/components</code> æ¥å£è·å–ã€‚</p>
</blockquote>
<h3 data-id="heading-3">æŠ€æœ¯æ–¹æ¡ˆç¤ºä¾‹ï¼šDesign Token ç»“æ„</h3>
<p>Design Token é€šå¸¸ä»¥ JSON æˆ– YAML æ ¼å¼å­˜å‚¨ï¼Œä½œä¸ºè®¾è®¡å’Œä»£ç ä¹‹é—´çš„å•ä¸€äº‹å®æ¥æºï¼ˆSingle Source of Truthï¼‰ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€åŒ–çš„ Button ç»„ä»¶é¢œè‰² Token ç»“æ„ï¼š</p>
<pre><code class="hljs language-css" lang="css">  {
Â Â "<span class="hljs-attribute">color</span>":Â {
Â Â Â Â "brand":Â {
Â Â Â Â Â Â "primary":Â {
Â Â Â Â Â Â Â Â "value":Â <span class="hljs-string">"#007AFF"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"type"</span>:Â <span class="hljs-string">"color"</span>
Â Â Â Â Â Â },
Â Â Â Â Â Â "primary-hover":Â {
Â Â Â Â Â Â Â Â "value":Â <span class="hljs-string">"#005BB5"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"type"</span>:Â <span class="hljs-string">"color"</span>
Â Â Â Â Â Â }
Â Â Â Â }
Â Â },
Â Â "component":Â {
Â Â Â Â "<span class="hljs-selector-tag">button</span>":Â {
Â Â Â Â Â Â "primary":Â {
Â Â Â Â Â Â Â Â "<span class="hljs-attribute">background</span>":Â <span class="hljs-string">"{color.brand.primary}"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"background-hover"</span>:Â <span class="hljs-string">"{color.brand.primary-hover}"</span>
Â Â Â Â Â Â }
Â Â Â Â }
Â Â }
}
</code></pre>
<p>ä»£ç ç”Ÿæˆå™¨ä¼šè¯»å–è¿™äº› Tokenï¼Œå¹¶å°†å…¶è½¬æ¢ä¸º CSS å˜é‡ï¼ˆå¦‚ <code>--color-brand-primary</code>ï¼‰æˆ– SCSS å˜é‡ï¼Œä¾›ç»„ä»¶ä»£ç ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-4">4. æ­¥éª¤äºŒï¼šåŸºäºè§„èŒƒçš„ç»„ä»¶ä»£ç ç”Ÿæˆï¼ˆReact/TSï¼‰</h2>
<p>åœ¨è·å–äº†è§„èŒƒåŒ–çš„ Design Token å’Œç»„ä»¶å±æ€§å®šä¹‰åï¼Œä¸‹ä¸€æ­¥æ˜¯ç”Ÿæˆé«˜è´¨é‡çš„ç»„ä»¶ä»£ç ã€‚è¿™ä¸ä»…ä»…æ˜¯ç®€å•çš„æ ·å¼è½¬æ¢ï¼Œæ›´éœ€è¦å…³æ³¨<strong>å·¥ç¨‹è´¨é‡</strong>å’Œ<strong>å¯è®¿é—®æ€§</strong>ã€‚</p>
<p>ä»¥ React + TypeScript å®ç°çš„ <code>&lt;Button/&gt;</code> ç»„ä»¶ä¸ºä¾‹ï¼Œä»£ç ç”Ÿæˆå¼•æ“éœ€è¦ç¡®ä¿ä»¥ä¸‹å…³é”®ç‚¹çš„å®ç°ï¼š</p>
<ol>
<li>
<ol>
<li><strong>ç±»å‹å®‰å…¨ï¼ˆType Safetyï¼‰</strong> ï¼šåŸºäº Design Token å¯¼å‡ºçš„å±æ€§ï¼Œè‡ªåŠ¨ç”Ÿæˆä¸¥æ ¼çš„ TypeScript æ¥å£ï¼Œä¾‹å¦‚ï¼š</li>
</ol>

<pre><code class="hljs language-arduino" lang="arduino">  interfaceÂ ButtonPropsÂ {
Â Â size:Â <span class="hljs-string">'S'</span>Â |Â <span class="hljs-string">'M'</span>Â |Â <span class="hljs-string">'L'</span>;
Â Â variant:Â <span class="hljs-string">'primary'</span>Â |Â <span class="hljs-string">'secondary'</span>;
Â Â icon?:Â React.ReactNode;
Â Â isPressed?:Â <span class="hljs-type">boolean</span>;Â <span class="hljs-comment">//Â å¯¹åº”Â aria-pressed</span>
Â Â isBusy?:Â <span class="hljs-type">boolean</span>;Â Â Â Â <span class="hljs-comment">//Â å¯¹åº”Â aria-busy</span>
}
</code></pre>
</li>
<li>
<ol start="2">
<li><strong>å¯è®¿é—®æ€§ï¼ˆAccessibility, a11yï¼‰</strong> ï¼šè‡ªåŠ¨æ³¨å…¥ WAI-ARIA å±æ€§ã€‚ä¾‹å¦‚ï¼Œå½“æŒ‰é’®å¤„äºåŠ è½½çŠ¶æ€æ—¶ï¼Œåº”è®¾ç½® <code>aria-busy="true"</code>ï¼›å½“æŒ‰é’®è¢«æŒ‰ä¸‹æ—¶ï¼Œåº”è®¾ç½® <code>aria-pressed="true"</code>ã€‚åŒæ—¶ï¼Œå¿…é¡»å®ç° <code>:focus-visible</code> ä¼ªç±»çš„æ— éšœç¢ç„¦ç‚¹æ ·å¼ï¼Œç¡®ä¿é”®ç›˜ç”¨æˆ·èƒ½å¤Ÿæ¸…æ™°è¯†åˆ«å½“å‰ç„¦ç‚¹ä½ç½®ã€‚</li>
</ol>
</li>
<li>
<ol start="3">
<li><strong>çŠ¶æ€é€»è¾‘</strong>ï¼šæ ¹æ®æå–çš„çŠ¶æ€è§„èŒƒï¼Œç”Ÿæˆå¯¹åº”çš„ CSS æˆ– CSS-in-JS æ ·å¼ï¼Œç²¾ç¡®åŒ¹é… Figma ä¸­ Hoverã€Pressedã€Disabled çŠ¶æ€çš„è§†è§‰æ•ˆæœã€‚</li>
</ol>
</li>
</ol>
<p>é«˜è´¨é‡çš„ä»£ç ç”Ÿæˆä¸ä»…æé«˜äº†å¼€å‘æ•ˆç‡ï¼Œæ›´ä»æºå¤´ä¸Šä¿è¯äº†ç»„ä»¶çš„<strong>åŠŸèƒ½ä¸€è‡´æ€§</strong>å’Œ<strong>è¯­ä¹‰æ­£ç¡®æ€§</strong>ã€‚</p>
<h3 data-id="heading-5">æŠ€æœ¯æ–¹æ¡ˆç¤ºä¾‹ï¼šReact/TS Button ç»„ä»¶å®ç°</h3>
<p>ä»¥ä¸‹æ˜¯ <code>&lt;Button/&gt;</code> ç»„ä»¶çš„å…³é”®å®ç°ä¼ªä»£ç ï¼Œå®ƒå±•ç¤ºäº†å¦‚ä½•å°† Design Token é©±åŠ¨çš„æ ·å¼ã€TypeScript ç±»å‹å’Œå¯è®¿é—®æ€§å±æ€§ï¼ˆa11yï¼‰ç»“åˆèµ·æ¥ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">  <span class="hljs-comment">//Â Button.tsxÂ -Â ä¼ªä»£ç </span>
<span class="hljs-keyword">import</span>Â <span class="hljs-title class_">React</span>Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span>Â <span class="hljs-string">'./Button.css'</span>;Â <span class="hljs-comment">//Â æ ·å¼æ–‡ä»¶ç”±Â DesignÂ TokenÂ ç¼–è¯‘ç”Ÿæˆ</span>

<span class="hljs-keyword">interface</span>Â <span class="hljs-title class_">ButtonProps</span>Â {
Â Â <span class="hljs-attr">size</span>:Â <span class="hljs-string">'S'</span>Â |Â <span class="hljs-string">'M'</span>Â |Â <span class="hljs-string">'L'</span>;
Â Â <span class="hljs-attr">variant</span>:Â <span class="hljs-string">'primary'</span>Â |Â <span class="hljs-string">'secondary'</span>;
Â Â icon?:Â <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span>;
Â Â isPressed?:Â <span class="hljs-built_in">boolean</span>;Â <span class="hljs-comment">//Â å¯¹åº”Â FigmaÂ çš„Â PressedÂ çŠ¶æ€</span>
Â Â isBusy?:Â <span class="hljs-built_in">boolean</span>;Â Â Â Â <span class="hljs-comment">//Â å¯¹åº”Â FigmaÂ çš„Â LoadingÂ çŠ¶æ€</span>
Â Â <span class="hljs-attr">children</span>:Â <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span>;
Â Â <span class="hljs-attr">onClick</span>:Â <span class="hljs-function">()Â =&gt;</span>Â <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">const</span>Â <span class="hljs-title class_">Button</span>:Â <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">ButtonProps</span>&gt;Â =Â <span class="hljs-function">(<span class="hljs-params">{
Â Â size,
Â Â variant,
Â Â icon,
Â Â isPressedÂ =Â <span class="hljs-literal">false</span>,
Â Â isBusyÂ =Â <span class="hljs-literal">false</span>,
Â Â children,
Â Â ...rest
}</span>)Â =&gt;</span>Â {
Â Â <span class="hljs-comment">//Â 1.Â åŠ¨æ€ç±»åï¼šæ ¹æ®Â PropsÂ æ˜ å°„Â DesignÂ TokenÂ æ ·å¼</span>
Â Â <span class="hljs-keyword">const</span>Â classNameÂ =Â <span class="hljs-string">`btnÂ btn--<span class="hljs-subst">${variant}</span>Â btn--<span class="hljs-subst">${size}</span>Â <span class="hljs-subst">${isBusyÂ ?Â <span class="hljs-string">'btn--busy'</span>Â :Â <span class="hljs-string">''</span>}</span>`</span>;

Â Â <span class="hljs-comment">//Â 2.Â å¯è®¿é—®æ€§Â (a11y)Â å±æ€§æ³¨å…¥</span>
Â Â <span class="hljs-keyword">const</span>Â ariaPropsÂ =Â {
Â Â Â Â <span class="hljs-string">'aria-pressed'</span>:Â isPressed,
Â Â Â Â <span class="hljs-string">'aria-busy'</span>:Â isBusy,
Â Â Â Â <span class="hljs-string">'aria-disabled'</span>:Â isBusyÂ ||Â rest.<span class="hljs-property">disabled</span>,Â <span class="hljs-comment">//Â å¿™ç¢Œæˆ–ç¦ç”¨æ—¶ï¼Œä¹Ÿåº”ç¦ç”¨</span>
Â Â };

Â Â <span class="hljs-keyword">return</span>Â (
Â Â Â Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>
Â Â Â Â Â Â <span class="hljs-attr">className</span>=<span class="hljs-string">{className}</span>
Â Â Â Â Â Â <span class="hljs-attr">disabled</span>=<span class="hljs-string">{rest.disabled</span>Â ||Â <span class="hljs-attr">isBusy</span>}
Â Â Â Â Â Â {<span class="hljs-attr">...ariaProps</span>}
Â Â Â Â Â Â {<span class="hljs-attr">...rest</span>}
Â Â Â Â &gt;</span>
Â Â Â Â Â Â {isBusyÂ ?Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span>Â <span class="hljs-attr">className</span>=<span class="hljs-string">"spinner"</span>Â /&gt;</span>Â :Â icon}
Â Â Â Â Â Â {children}
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
Â Â );
};

<span class="hljs-comment">//Â Button.cssÂ -Â å…³é”®çŠ¶æ€æ ·å¼ï¼ˆç”±Â DesignÂ TokenÂ ç¼–è¯‘ï¼‰</span>
<span class="hljs-comment">/*
.btn:focus-visibleÂ {
Â Â outline:Â 3pxÂ solidÂ var(--color-focus-ring);Â //Â æ— éšœç¢ç„¦ç‚¹æ ·å¼
Â Â outline-offset:Â 2px;
}

.btn--primary:hoverÂ {
Â Â background-color:Â var(--color-brand-primary-hover);Â //Â é©±åŠ¨è§†è§‰å›å½’çš„æ ·å¼
}
*/</span>
</code></pre>
<p>è¿™ä¸ªç¤ºä¾‹æ¸…æ™°åœ°å±•ç¤ºäº†å¦‚ä½•é€šè¿‡ç±»å‹å®šä¹‰ï¼ˆ<code>ButtonProps</code>ï¼‰ã€çŠ¶æ€å±æ€§ï¼ˆ<code>isPressed</code>, <code>isBusy</code>ï¼‰å’Œ ARIA å±æ€§çš„æ³¨å…¥ï¼Œå®ç°è®¾è®¡è§„èŒƒä¸­å¯¹äº¤äº’å’Œå¯è®¿é—®æ€§çš„è¦æ±‚ã€‚</p>
<h2 data-id="heading-6">5. æ­¥éª¤ä¸‰ï¼šè§†è§‰å›å½’ä¸å·®å¼‚é‡åŒ–</h2>
<p>åŠŸèƒ½å’Œè¯­ä¹‰çš„ä¸€è‡´æ€§æ˜¯åŸºç¡€ï¼Œä½†<strong>è§†è§‰ä¸€è‡´æ€§</strong>æ‰æ˜¯ç”¨æˆ·ç›´æ¥æ„ŸçŸ¥åˆ°çš„è´¨é‡ã€‚è§†è§‰å›å½’æµ‹è¯•æ˜¯ç¡®ä¿è®¾è®¡ä¸ä»£ç è§†è§‰å¯¹é½çš„æœ€ç»ˆé˜²çº¿ã€‚</p>
<p><strong>æµç¨‹ä¸å·¥å…·é“¾</strong></p>
<ol>
<li>
<ol>
<li><strong>æ¸²æŸ“ç»„ä»¶</strong>ï¼šåœ¨éš”ç¦»çš„æµ‹è¯•ç¯å¢ƒï¼ˆå¦‚ Storybookï¼‰ä¸­ï¼Œæ¸²æŸ“æ‰€æœ‰ç»„åˆçŠ¶æ€ä¸‹çš„æ ¸å¿ƒç»„ä»¶ï¼ˆButtonã€Cardã€Inputï¼‰ã€‚</li>
</ol>
</li>
<li>
<ol start="2">
<li><strong>è‡ªåŠ¨åŒ–æˆªå›¾</strong>ï¼šCI/CD æµç¨‹è§¦å‘è‡ªåŠ¨åŒ–å·¥å…·ï¼ˆå¦‚ Playwright æˆ– Chromaticï¼‰å¯¹æ¯ä¸ªç»„ä»¶çŠ¶æ€è¿›è¡Œæˆªå›¾ã€‚</li>
</ol>
</li>
<li>
<ol start="3">
<li><strong>åƒç´ çº§æ¯”å¯¹</strong>ï¼šå°†ä»£ç ç¯å¢ƒç”Ÿæˆçš„æˆªå›¾ä¸ Figma å¯¼å‡ºçš„â€œé»„é‡‘æ ‡å‡†â€å‚è€ƒå›¾è¿›è¡Œåƒç´ çº§æ¯”å¯¹ã€‚</li>
</ol>
</li>
</ol>
<p>ä¸‹å›¾å±•ç¤ºäº†è§†è§‰å›å½’æµ‹è¯•çš„å·¥ä½œåŸç†ï¼šé€šè¿‡é«˜äº®æ˜¾ç¤ºä¸¤ä¸ªå›¾åƒä¹‹é—´çš„åƒç´ å·®å¼‚ï¼Œå®ç°å·®å¼‚çš„<strong>é‡åŒ–</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/402274c549334cc2871b98b7a38fdeb1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd29ya3BpZWNlcw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763808767&amp;x-signature=E1KSGOR9dSej40OlJwpr%2BdLaOAo%3D" alt="è§†è§‰å›å½’å¯¹æ¯”ç¤ºæ„å›¾ï¼šé«˜äº®åƒç´ å·®å¼‚" title="null" loading="lazy"/></p>
<p>è§†è§‰å›å½’å¯¹æ¯”ç¤ºæ„å›¾ï¼šé«˜äº®åƒç´ å·®å¼‚</p>
<p><strong>å·®å¼‚é‡åŒ–æŒ‡æ ‡</strong>ï¼š<br/>
è§†è§‰å›å½’å·¥å…·ä¼šè¾“å‡ºä¸€ä¸ªå·®å¼‚ç™¾åˆ†æ¯”ï¼ˆPixel Difference Percentageï¼‰ã€‚åªæœ‰å½“è¿™ä¸ªç™¾åˆ†æ¯”<strong>è¶…è¿‡é¢„è®¾çš„é˜ˆå€¼</strong>ï¼ˆä¾‹å¦‚ 0.1%ï¼‰æ—¶ï¼Œæ‰ä¼šè¢«åˆ¤å®šä¸ºâ€œè¶…å·®â€ï¼Œå¹¶è§¦å‘åç»­çš„åé¦ˆæµç¨‹ã€‚è¿™ç§é‡åŒ–æœºåˆ¶å°†ä¸»è§‚çš„â€œçœ‹èµ·æ¥ä¸ä¸€æ ·â€è½¬åŒ–ä¸ºå®¢è§‚çš„å·¥ç¨‹æŒ‡æ ‡ã€‚</p>
<h3 data-id="heading-7">æŠ€æœ¯æ–¹æ¡ˆç¤ºä¾‹ï¼šè§†è§‰å›å½’è„šæœ¬ï¼ˆPlaywright/Storybookï¼‰</h3>
<p>è§†è§‰å›å½’è„šæœ¬çš„æ ¸å¿ƒæ˜¯éå†ç»„ä»¶çš„æ‰€æœ‰çŠ¶æ€ç»„åˆï¼Œè¿›è¡Œæˆªå›¾ï¼Œå¹¶è°ƒç”¨æ¯”å¯¹å·¥å…·ã€‚ä»¥ä¸‹æ˜¯åŸºäº Playwright å’Œ Storybook çš„ä¼ªä»£ç ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">  <span class="hljs-comment">//Â visual-regression.test.jsÂ -Â ä¼ªä»£ç </span>
<span class="hljs-keyword">const</span>Â {Â test,Â expectÂ }Â =Â require(<span class="hljs-string">'@playwright/test'</span>);

test.describe(<span class="hljs-string">'ButtonÂ ComponentÂ VisualÂ Regression'</span>,Â ()Â =&gt;Â {
Â Â <span class="hljs-comment">//Â 1.Â è®¿é—®Â StorybookÂ é¡µé¢</span>
Â Â test.beforeEach(<span class="hljs-keyword">async</span>Â ({Â pageÂ })Â =&gt;Â {
Â Â Â Â <span class="hljs-keyword">await</span>Â page.goto(<span class="hljs-string">'http://localhost:6006/iframe.html?id=components-button--all-states'</span>);
Â Â });

Â Â <span class="hljs-comment">//Â 2.Â æµ‹è¯•Â HoverÂ çŠ¶æ€</span>
Â Â test(<span class="hljs-string">'shouldÂ matchÂ snapshotÂ forÂ PrimaryÂ ButtonÂ HoverÂ state'</span>,Â <span class="hljs-keyword">async</span>Â ({Â pageÂ })Â =&gt;Â {
Â Â Â Â <span class="hljs-keyword">const</span>Â primaryButtonÂ =Â page.locator(<span class="hljs-string">'[data-testid="primary-button"]'</span>);
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â è§¦å‘Â HoverÂ çŠ¶æ€</span>
Â Â Â Â <span class="hljs-keyword">await</span>Â primaryButton.hover();Â 
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â æˆªå›¾å¹¶ä¸åŸºå‡†å›¾ï¼ˆFigmaÂ å¯¼å‡ºå›¾ï¼‰æ¯”å¯¹</span>
Â Â Â Â <span class="hljs-keyword">await</span>Â expect(primaryButton).toHaveScreenshot(<span class="hljs-string">'primary-button-hover.png'</span>,Â {
Â Â Â Â Â Â <span class="hljs-comment">//Â é…ç½®åƒç´ å·®å¼‚é˜ˆå€¼ï¼Œä¾‹å¦‚Â 0.1%</span>
Â Â Â Â Â Â maxDiffPixelRatio:Â <span class="hljs-number">0.001</span>,Â 
Â Â Â Â });
Â Â });

Â Â <span class="hljs-comment">//Â 3.Â æµ‹è¯•Â DisabledÂ çŠ¶æ€</span>
Â Â test(<span class="hljs-string">'shouldÂ matchÂ snapshotÂ forÂ DisabledÂ ButtonÂ state'</span>,Â <span class="hljs-keyword">async</span>Â ({Â pageÂ })Â =&gt;Â {
Â Â Â Â <span class="hljs-keyword">const</span>Â disabledButtonÂ =Â page.locator(<span class="hljs-string">'[data-testid="disabled-button"]'</span>);
Â Â Â Â <span class="hljs-keyword">await</span>Â expect(disabledButton).toHaveScreenshot(<span class="hljs-string">'disabled-button.png'</span>,Â {
Â Â Â Â Â Â maxDiffPixelRatio:Â <span class="hljs-number">0.001</span>,
Â Â Â Â });
Â Â });
Â Â 
Â Â <span class="hljs-comment">//Â ...Â å…¶ä»–çŠ¶æ€ï¼ˆPressed,Â Busy,Â SizeÂ S/M/Lï¼‰</span>
});
</code></pre>
<p>è¿™æ®µè„šæœ¬é€šè¿‡æ¨¡æ‹Ÿç”¨æˆ·äº¤äº’ï¼ˆå¦‚ <code>hover()</code>ï¼‰ï¼Œç¡®ä¿äº†ç»„ä»¶åœ¨å„ç§<strong>åŠ¨æ€çŠ¶æ€</strong>ä¸‹çš„è§†è§‰æ•ˆæœä¹Ÿèƒ½è¢«ç²¾ç¡®æ•è·å’ŒéªŒè¯ï¼Œä»è€Œå®ç°äº†å¯¹ Figma è§„èŒƒä¸­æ‰€æœ‰çŠ¶æ€çš„è‡ªåŠ¨åŒ–å¯¹é½ã€‚</p>
<h2 data-id="heading-8">6. æ­¥éª¤å››ï¼šå·®å¼‚ Issue çš„è‡ªåŠ¨åŒ–ç”Ÿæˆä¸è¿½è¸ª</h2>
<p>è§†è§‰å›å½’æŠ¥å‘Šçš„ä»·å€¼åœ¨äºå…¶<strong>å¯æ“ä½œæ€§</strong>ã€‚ä¸€ä¸ªä¼˜ç§€çš„æµæ°´çº¿å¿…é¡»å°†åŸå§‹çš„åƒç´ å·®å¼‚æŠ¥å‘Šè½¬åŒ–ä¸ºå¼€å‘è€…å¯ä»¥ç›´æ¥å¤„ç†çš„ç»“æ„åŒ–ä»»åŠ¡ã€‚</p>
<p>å½“æ£€æµ‹åˆ°è¶…å·®æ—¶ï¼Œç³»ç»Ÿåº”è‡ªåŠ¨åˆ›å»º Issue åˆ°é¡¹ç›®ç®¡ç†å¹³å°ï¼ˆå¦‚ Jira æˆ– GitHub Issuesï¼‰ï¼Œå¹¶éµå¾ªç»Ÿä¸€çš„ Issue æ¨¡æ¿ï¼Œç¡®ä¿ä¿¡æ¯å®Œæ•´ä¸”æ˜“äºä¿®å¤ã€‚</p>



































<table><thead><tr><th>Issue å­—æ®µ</th><th>ç¤ºä¾‹å†…å®¹</th><th>è‡ªåŠ¨åŒ–æ¥æº</th></tr></thead><tbody><tr><td><strong>æ ‡é¢˜</strong></td><td><code>[Button]-Hover-é¢œè‰²å·®å¼‚</code></td><td>ç»„ä»¶åã€çŠ¶æ€ã€å·®å¼‚ç±»å‹</td></tr><tr><td><strong>å½±å“èŒƒå›´</strong></td><td><code>Button.tsx, Button.css</code></td><td>ä»£ç ç”Ÿæˆ/å›å½’æµ‹è¯•çš„ä¸Šä¸‹æ–‡</td></tr><tr><td><strong>å¤ç°æ­¥éª¤</strong></td><td>è®¿é—® Storybook é“¾æ¥ï¼Œå°†é¼ æ ‡æ‚¬åœåœ¨ Primary Button ä¸Šã€‚</td><td>è‡ªåŠ¨åŒ–æµ‹è¯•ç¯å¢ƒé“¾æ¥</td></tr><tr><td><strong>å·®å¼‚æˆªå›¾</strong></td><td>é™„å¸¦è§†è§‰å›å½’å·¥å…·ç”Ÿæˆçš„å¯¹æ¯”å›¾é“¾æ¥ã€‚</td><td>è§†è§‰å›å½’æŠ¥å‘Š</td></tr><tr><td><strong>ä¿®å¤å»ºè®®</strong></td><td>æ£€æŸ¥ CSS å˜é‡ <code>$color-primary-hover</code> æ˜¯å¦ä¸ Design Token ä¸€è‡´ã€‚</td><td>Design Token æ˜ å°„è¡¨</td></tr></tbody></table>
<p>è¿™ç§è‡ªåŠ¨åŒ–çš„ Issue æ¸…å•ï¼Œå°†â€œè®¾è®¡æ¼‚ç§»â€çš„å‘ç°ã€é‡åŒ–å’Œä¿®å¤å·¥ä½œå®Œå…¨çº³å…¥äº†å·¥ç¨‹æµç¨‹ï¼Œæå¤§åœ°ç¼©çŸ­äº†åé¦ˆå‘¨æœŸï¼Œå¹¶ç¡®ä¿äº†æ¯ä¸€ä¸ªä¸ä¸€è‡´ç‚¹éƒ½èƒ½è¢«ç²¾ç¡®è¿½è¸ªå’Œè§£å†³ã€‚</p>
<h2 data-id="heading-9">7. å®è·µæŒ‡å—ï¼šAI é©±åŠ¨çš„ç»„ä»¶å¯¹é½æ“ä½œæ‰‹å†Œ</h2>
<p>ä¸ºäº†è®©è¿™å¥—æµæ°´çº¿çœŸæ­£è½åœ°ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ™ºèƒ½çš„â€œåè°ƒè€…â€æ¥æ‰§è¡Œè·¨å·¥å…·é“¾çš„å¤æ‚æŒ‡ä»¤ï¼Œç‰¹åˆ«æ˜¯æ¶‰åŠè®¾è®¡è§„èŒƒçš„è§£è¯»å’Œä»£ç çš„åˆæ­¥ç”Ÿæˆã€‚åœ¨æˆ‘ä»¬çš„å®è·µä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨äº†ä¸€ä¸ªåŸºäº <strong>Model Context Protocol (MCP)</strong> çš„ AI ä»£ç†ï¼ˆä¾‹å¦‚ï¼Œç”¨æˆ·æåˆ°çš„ <code>claude</code> æˆ–ä¸€ä¸ªå®šåˆ¶çš„ AI-CLI å·¥å…·ï¼‰æ¥é©±åŠ¨æ ¸å¿ƒæ­¥éª¤ã€‚</p>
<p>ä»¥ä¸‹æ˜¯å®ç°æ‚¨æœ€åˆè®¾æƒ³çš„å››ä¸ªæ ¸å¿ƒæ­¥éª¤æ‰€éœ€çš„æŠ€æœ¯æŒ‡ç¤ºå’Œæç¤ºè¯æ¨¡æ¿ï¼š</p>
<h3 data-id="heading-10">æ­¥éª¤ 1: è¯»å–ç»„ä»¶è§„èŒƒï¼ˆFigma MCP + AI è§£è¯»ï¼‰</h3>
<p><strong>ç›®æ ‡</strong>ï¼šå°† Figma ä¸­ Button ç»„ä»¶çš„è§†è§‰å’Œäº¤äº’è§„èŒƒï¼ˆå°ºå¯¸ã€çŠ¶æ€ã€a11yï¼‰ç»“æ„åŒ–åœ°æå–å‡ºæ¥ã€‚</p>
<p><strong>æŠ€æœ¯æŒ‡ç¤º</strong>ï¼šé€šè¿‡ Figma MCP æ¥å£è·å–ç»„ä»¶çš„ JSON æè¿°ï¼Œç„¶åå°†æè¿°å’Œæå–è¦æ±‚ä¼ é€’ç»™ AI ä»£ç†ã€‚</p>
<p><strong>æç¤ºè¯æ¨¡æ¿</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">  #Â æ¨¡æ‹ŸÂ AI-CLIÂ è°ƒç”¨ï¼Œè¯»å–Â FigmaÂ ç»„ä»¶å¹¶ç”Ÿæˆç»“æ„åŒ–è§„èŒƒ
claudeÂ "è¯»å–Â FigmaÂ çš„Â <span class="hljs-selector-tag">Button</span>Â ç»„ä»¶ï¼šå°ºå¯¸(S/M/L)ã€çŠ¶æ€(Hover/Pressed/Disabled)ã€å›¾æ ‡æœ‰æ— ã€a11yÂ å±æ€§(aria-pressed/aria-busy)ã€‚è¾“å‡ºä¸ºÂ MarkdownÂ è¡¨æ ¼æ ¼å¼çš„ç»„ä»¶è§„èŒƒæ–‡æ¡£ã€‚"
</code></pre>
<p><strong>é¢„æœŸäº§å‡º</strong>ï¼šä¸€ä»½åŒ…å«æ‰€æœ‰çŠ¶æ€ã€å±æ€§åŠå…¶å¯¹åº”å€¼çš„ Markdown è§„èŒƒæ–‡æ¡£ã€‚</p>
<h3 data-id="heading-11">æ­¥éª¤ 2: ç”Ÿæˆä»£ç å®ç°ï¼ˆAI ä»£ç ç”Ÿæˆ + TS/a11y çº¦æŸï¼‰</h3>
<p><strong>ç›®æ ‡</strong>ï¼šåŸºäºä¸Šä¸€æ­¥çš„è§„èŒƒï¼Œç”Ÿæˆé«˜è´¨é‡ã€ç¬¦åˆ React/TS è§„èŒƒä¸”åŒ…å« a11y å±æ€§çš„ç»„ä»¶ä»£ç ã€‚</p>
<p><strong>æŠ€æœ¯æŒ‡ç¤º</strong>ï¼šå°†ä¸Šä¸€æ­¥çš„è§„èŒƒæ–‡æ¡£ä½œä¸ºä¸Šä¸‹æ–‡ï¼Œè¦æ±‚ AI ä»£ç†ç”Ÿæˆå®Œæ•´çš„ç»„ä»¶æ–‡ä»¶å’Œå•æµ‹æ–‡ä»¶ã€‚</p>
<p><strong>æç¤ºè¯æ¨¡æ¿</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">  #Â æ¨¡æ‹ŸÂ AI-CLIÂ è°ƒç”¨ï¼Œç”Ÿæˆä»£ç å®ç°
claudeÂ "åŸºäºæä¾›çš„Â <span class="hljs-selector-tag">Button</span>Â ç»„ä»¶è§„èŒƒï¼ˆ<span class="hljs-selector-attr">[å¼•ç”¨æ­¥éª¤1çš„è§„èŒƒæ–‡æ¡£]</span>ï¼‰ï¼Œè¾“å‡ºå®Œæ•´çš„Â &lt;<span class="hljs-selector-tag">Button</span>/&gt;Â ç»„ä»¶Â React+TSÂ å®ç°ã€‚è¦æ±‚ï¼š
<span class="hljs-number">1</span>.Â å¿…é¡»æ”¯æŒÂ aria-pressed/aria-busyÂ å±æ€§æ³¨å…¥ã€‚
<span class="hljs-number">2</span>.Â å¿…é¡»åŒ…å«Â <span class="hljs-selector-pseudo">:focus</span>-visibleÂ çš„æ— éšœç¢ç„¦ç‚¹æ ·å¼ã€‚
<span class="hljs-number">3</span>.Â é™„å¸¦Â TSÂ ç±»å‹å®šä¹‰å’Œè‡³å°‘ä¸€ä¸ªçŠ¶æ€ï¼ˆå¦‚Â Hoverï¼‰çš„å•æµ‹æ–‡ä»¶ï¼ˆä½¿ç”¨Â Jest/TestingÂ Libraryï¼‰ã€‚"
</code></pre>
<p><strong>é¢„æœŸäº§å‡º</strong>ï¼š<code>Button.tsx</code> (ç»„ä»¶ä»£ç ), <code>Button.css</code> (æ ·å¼æ–‡ä»¶), <code>Button.test.tsx</code> (å•æµ‹æ–‡ä»¶)ã€‚</p>
<h3 data-id="heading-12">æ­¥éª¤ 3: å›å½’å¯¹æ¯”ï¼ˆè§†è§‰å›å½’è„šæœ¬ç”Ÿæˆï¼‰</h3>
<p><strong>ç›®æ ‡</strong>ï¼šç”Ÿæˆä¸€ä¸ª Playwright/Storybook è„šæœ¬ï¼Œç”¨äºè‡ªåŠ¨åŒ–æ‰§è¡Œè§†è§‰å›å½’æµ‹è¯•ã€‚</p>
<p><strong>æŠ€æœ¯æŒ‡ç¤º</strong>ï¼šè¦æ±‚ AI ä»£ç†ç”Ÿæˆä¸€ä¸ªèƒ½å¤Ÿéå†æ‰€æœ‰å…³é”®çŠ¶æ€ï¼ˆHover, Pressed, Disabled, Busyï¼‰å¹¶è¿›è¡Œæˆªå›¾æ¯”å¯¹çš„æµ‹è¯•è„šæœ¬ã€‚</p>
<p><strong>æç¤ºè¯æ¨¡æ¿</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">  #Â æ¨¡æ‹ŸÂ AI-CLIÂ è°ƒç”¨ï¼Œç”Ÿæˆè§†è§‰å›å½’è„šæœ¬
claudeÂ "ç”ŸæˆÂ PlaywrightÂ è§†è§‰å›å½’è„šæœ¬ã€‚ç›®æ ‡æ˜¯æµ‹è¯•Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span>/&gt;</span></span>Â ç»„ä»¶çš„Â Hover,Â Pressed,Â DisabledÂ ä¸‰ç§çŠ¶æ€ã€‚è„šæœ¬éœ€åŒ…å«ï¼š
<span class="hljs-bullet">1.</span>Â è®¿é—®Â StorybookÂ ç¯å¢ƒçš„é€»è¾‘ã€‚
<span class="hljs-bullet">2.</span>Â æ¨¡æ‹Ÿç”¨æˆ·äº¤äº’ï¼ˆå¦‚Â .hover()ï¼‰ã€‚
<span class="hljs-bullet">3.</span>Â ä½¿ç”¨Â toHaveScreenshot()Â æ–¹æ³•ï¼Œè®¾ç½®Â maxDiffPixelRatioÂ ä¸ºÂ 0.001Â è¿›è¡Œåƒç´ çº§æ¯”å¯¹ã€‚
<span class="hljs-bullet">4.</span>Â è¾“å‡ºå®Œæ•´çš„Â visual-regression.test.jsÂ æ–‡ä»¶å†…å®¹ã€‚"
</code></pre>
<p><strong>é¢„æœŸäº§å‡º</strong>ï¼š<code>visual-regression.test.js</code> (è§†è§‰å›å½’è„šæœ¬)ã€‚</p>
<h3 data-id="heading-13">æ­¥éª¤ 4: å·®å¼‚ Issue æ¸…å•ï¼ˆæŠ¥å‘Šç»“æ„åŒ–ï¼‰</h3>
<p><strong>ç›®æ ‡</strong>ï¼šå°†è§†è§‰å›å½’å·¥å…·ï¼ˆå¦‚ Chromatic æˆ– Playwright æŠ¥å‘Šï¼‰è¾“å‡ºçš„åŸå§‹å·®å¼‚æ•°æ®ï¼Œè½¬åŒ–ä¸ºå¯å¯¼å…¥é¡¹ç›®ç®¡ç†å¹³å°ï¼ˆå¦‚ Jiraï¼‰çš„ç»“æ„åŒ– Issue æ¸…å•ã€‚</p>
<p><strong>æŠ€æœ¯æŒ‡ç¤º</strong>ï¼šå°†è§†è§‰å›å½’æŠ¥å‘Šçš„ JSON æˆ– Markdown æ‘˜è¦ä½œä¸ºè¾“å…¥ï¼Œè¦æ±‚ AI ä»£ç†å°†å…¶æ ¼å¼åŒ–ä¸º Issue æ¨¡æ¿ã€‚</p>
<p><strong>æç¤ºè¯æ¨¡æ¿</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">  <span class="hljs-comment">#Â æ¨¡æ‹ŸÂ AI-CLIÂ è°ƒç”¨ï¼Œå°†å·®å¼‚æŠ¥å‘Šè½¬åŒ–ä¸ºÂ Issue</span>
claudeÂ -pÂ "æŠŠè§†è§‰å›å½’æŠ¥å‘Šä¸­çš„æ‰€æœ‰è¶…å·®é¡¹è½¬ä¸ºÂ IssueÂ æ¸…å•ã€‚æ¯ä¸ªÂ IssueÂ å¿…é¡»éµå¾ªä»¥ä¸‹æ ¼å¼ï¼š
æ ‡é¢˜:Â <span class="hljs-section">[ç»„ä»¶å]</span>-<span class="hljs-section">[çŠ¶æ€]</span>-<span class="hljs-section">[é—®é¢˜ç±»å‹]</span>
å­—æ®µ:Â å½±å“èŒƒå›´/å¤ç°æ­¥éª¤/ä¿®å¤å»ºè®®
å¤ç°æ­¥éª¤ä¸­å¿…é¡»åŒ…å«Â StorybookÂ é“¾æ¥å’Œå·®å¼‚æˆªå›¾é“¾æ¥ã€‚
è¾“å‡ºä¸ºÂ MarkdownÂ æ ¼å¼çš„Â IssueÂ åˆ—è¡¨ï¼Œå¯ç›´æ¥å¤åˆ¶åˆ°Â Jira/GitHubÂ IssueÂ æ‰¹é‡åˆ›å»ºå·¥å…·ä¸­ã€‚"
</code></pre>
<p><strong>é¢„æœŸäº§å‡º</strong>ï¼šMarkdown æ ¼å¼çš„ Issue æ¸…å•ã€‚</p>
<h2 data-id="heading-14">8. æ€»ç»“ä¸å±•æœ›ï¼šæŒç»­é›†æˆä¸­çš„è®¾è®¡ä¸€è‡´æ€§ä¿éšœ</h2>
<p>æ„å»ºâ€œè®¾è®¡åˆ°ä»£ç çš„ä¸€è‡´æ€§æ£€æŸ¥â€æµæ°´çº¿ï¼Œæ˜¯ä»<strong>è¢«åŠ¨ä¿®å¤</strong>è½¬å‘<strong>ä¸»åŠ¨ä¿éšœ</strong>çš„å…³é”®ä¸€æ­¥ã€‚å®ƒå°†è®¾è®¡ç³»ç»Ÿä»ä¸€ä¸ªé™æ€çš„è§„èŒƒæ–‡æ¡£ï¼Œå‡çº§ä¸ºä¸€ä¸ªåœ¨æŒç»­é›†æˆç¯å¢ƒä¸­è¿è¡Œçš„<strong>åŠ¨æ€è´¨é‡ä¿éšœæœºåˆ¶</strong>ã€‚</p>
<p>é€šè¿‡ <strong>Figma MCP</strong> æå–è®¾è®¡å…ƒæ•°æ®ã€åŸºäº <strong>Design Token</strong> é©±åŠ¨ä»£ç ç”Ÿæˆã€åˆ©ç”¨ <strong>è§†è§‰å›å½’</strong> è¿›è¡Œé‡åŒ–éªŒè¯ï¼Œå¹¶æœ€ç»ˆé€šè¿‡ <strong>è‡ªåŠ¨åŒ– Issue</strong> å®Œæˆé—­ç¯ï¼Œæˆ‘ä»¬æˆåŠŸåœ°å°†è®¾è®¡ä¸€è‡´æ€§çº³å…¥äº†å·¥ç¨‹è´¨é‡çš„èŒƒç•´ã€‚è¿™ä¸ä»…è§£æ”¾äº†è®¾è®¡å¸ˆå’Œå¼€å‘è€…çš„é‡å¤æ€§åŠ³åŠ¨ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œå®ƒä¸ºç”¨æˆ·æä¾›äº†å§‹ç»ˆå¦‚ä¸€ã€é«˜è´¨é‡çš„äº§å“ä½“éªŒã€‚æœªæ¥ï¼Œè¿™ä¸€æœºåˆ¶å¯ä»¥æ‰©å±•åˆ°æ›´å¤æ‚çš„ç»„ä»¶ã€åŠ¨ç”»æ•ˆæœä¹ƒè‡³æ•´ä¸ªé¡µé¢çš„å¸ƒå±€ä¸€è‡´æ€§æ£€æŸ¥ï¼Œå®ç°çœŸæ­£çš„è®¾è®¡ä¸å·¥ç¨‹ä¸€ä½“åŒ–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£å†³è®¿é—® https ç½‘ç«™æ—¶ï¼Œåç«¯é‡å®šå‘æˆ–è·å– URL å˜æˆ http çš„é—®é¢˜]]></title>    <link>https://juejin.cn/post/7572138663120371754</link>    <guid>https://juejin.cn/post/7572138663120371754</guid>    <pubDate>2025-11-14T04:09:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572138663120371754" data-draft-id="7572048000302825513" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£å†³è®¿é—® https ç½‘ç«™æ—¶ï¼Œåç«¯é‡å®šå‘æˆ–è·å– URL å˜æˆ http çš„é—®é¢˜"/> <meta itemprop="keywords" content="åç«¯,Java,Nginx"/> <meta itemprop="datePublished" content="2025-11-14T04:09:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mzlogin"/> <meta itemprop="url" content="https://juejin.cn/user/1890815727118414"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£å†³è®¿é—® https ç½‘ç«™æ—¶ï¼Œåç«¯é‡å®šå‘æˆ–è·å– URL å˜æˆ http çš„é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1890815727118414/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mzlogin
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T04:09:32.000Z" title="Fri Nov 14 2025 04:09:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸€ç§å¸¸è§çš„æœåŠ¡éƒ¨ç½²æ¶æ„æ˜¯ Nginx åå‘ä»£ç†åç«¯ Java åº”ç”¨æœåŠ¡å™¨ï¼ŒNginx ç›‘å¬ 443 ç«¯å£å¤„ç† https è¯·æ±‚ï¼Œç„¶åè½¬å‘ç»™åç«¯æœåŠ¡å™¨ã€‚</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/113072053cce4c44815057a72ee7a785~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=361&amp;h=293&amp;s=7062&amp;e=png&amp;a=1&amp;b=d4e7d3" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯¹åº”çš„ Nginx é…ç½®å¤§è‡´å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">upstreamÂ www {
Â  Â Â serverÂ 192.168.1.101:8080Â  <span class="hljs-attr">weight</span>=<span class="hljs-number">100</span>Â max_fails=<span class="hljs-number">3</span>Â fail_timeout=<span class="hljs-number">10</span>s<span class="hljs-comment">;</span>
Â  Â Â serverÂ 192.168.1.102:8080Â  <span class="hljs-attr">weight</span>=<span class="hljs-number">100</span>Â max_fails=<span class="hljs-number">3</span>Â fail_timeout=<span class="hljs-number">10</span>s<span class="hljs-comment">;</span>
}
serverÂ {
Â  Â Â listenÂ 443Â ssl<span class="hljs-comment">;</span>
Â  Â Â server_nameÂ example.com<span class="hljs-comment">;</span>
Â  Â Â ssl_certificateÂ /path/to/cert.pem<span class="hljs-comment">;</span>
Â  Â Â ssl_certificate_keyÂ /path/to/key.pem<span class="hljs-comment">;</span>
Â  Â Â locationÂ / {
Â  Â  Â  Â Â proxy_passÂ http://www<span class="hljs-comment">;</span>
Â  Â  }
}
</code></pre>
<p>å³ï¼šå®¢æˆ·ç«¯ä¸ Nginx ä¹‹é—´æ˜¯ httpsï¼ŒNginx ä¸åç«¯ Java åº”ç”¨æœåŠ¡å™¨ä¹‹é—´æ˜¯ httpã€‚</p>
<p>è¿™æ ·å¯èƒ½ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œå¦‚ï¼š</p>
<ol>
<li>
<p><code>HttpServletRequest.getRequestURL()</code></p>
<p>è·å–åˆ°çš„ URL æ˜¯ Nginx ä¸åç«¯æœåŠ¡å™¨ä¹‹é—´çš„ http URLï¼Œæ¯”å¦‚ <code>http://192.168.1.101:8080/xxx</code>ï¼›</p>
</li>
<li>
<p><code>HttpServletResponse.sendRedirect()</code></p>
<p>ç”Ÿæˆçš„é‡å®šå‘ URL ä¹Ÿæ˜¯ http URLã€‚</p>
</li>
</ol>
<p>è¦è§£å†³è¿™äº›é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡ Nginx é…ç½® + å°‘é‡åç«¯ä»£ç ä¿®æ”¹æ¥å®ç°ã€‚</p>
<h2 data-id="heading-0">è§£å†³åº”ç”¨ä¸­è·å–åˆ°çš„ URL çš„é—®é¢˜</h2>
<p>ç”¨æˆ·å®é™…è®¿é—®çš„æ˜¯ <code>https://example.com/xxx</code>ï¼Œä½†æ˜¯åç«¯åº”ç”¨è·å–åˆ°çš„ URL æ˜¯ <code>http://192.168.1.101:8080/xxx</code>ï¼Œå¦‚ä½•è®©åç«¯åº”ç”¨è·å–åˆ°æ­£ç¡®çš„ URL å‘¢ï¼Ÿ</p>
<p>ç¬¬ä¸€æ­¥ï¼ŒNginx å¯ä»¥é€šè¿‡ <code>proxy_set_header Host</code> æŒ‡ä»¤å°†å®¢æˆ·ç«¯è¯·æ±‚çš„ Host å¤´ä¼ é€’ç»™åç«¯æœåŠ¡å™¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">locationÂ / {
Â  Â Â <span class="hljs-comment"># ...</span>
Â  Â Â proxy_set_headerÂ HostÂ <span class="hljs-variable">$host</span>;
}
</code></pre>
<p>è¿™æ ·ï¼Œåç«¯åº”ç”¨é€šè¿‡ <code>HttpServletRequest.getRequestURL()</code> è·å–åˆ°çš„ URL å°±æ˜¯ <code>http://example.com/xxx</code> äº†ã€‚</p>
<p>ä½†æ­¤æ—¶ï¼Œåè®®ä»ç„¶ä¸å¯¹ï¼Œè¿˜æ˜¯ httpã€‚</p>
<p>è¦ç»™åç«¯åº”ç”¨ä¼ é€’æ­£ç¡®çš„åè®®ï¼Œé€šå¸¸çš„åšæ³•æ˜¯ä½¿ç”¨ <code>X-Forwarded-Proto</code> å¤´ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">locationÂ / {
Â  Â Â <span class="hljs-comment"># ...</span>
Â  Â Â proxy_set_headerÂ X-Forwarded-ProtoÂ <span class="hljs-variable">$scheme</span>;
}
</code></pre>
<p>æ·»åŠ è¿™ä¸ªå¤´ä¹‹åå¹¶ä¸ä¼šè®© <code>HttpServletRequest.getRequestURL()</code> ç›´æ¥è¿”å› https URLï¼Œéœ€è¦åœ¨åç«¯åº”ç”¨ä¸­åšä¸€äº›å¤„ç†ã€‚ä»¥ Java åº”ç”¨ä¸ºä¾‹ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªè¿‡æ»¤å™¨ï¼ˆFilterï¼‰æ¥ä¿®æ”¹ request çš„ schemeï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span>Â javax.servlet.*;
<span class="hljs-keyword">import</span>Â javax.servlet.http.HttpServletRequest;
<span class="hljs-keyword">import</span>Â javax.servlet.http.HttpServletRequestWrapper;
<span class="hljs-keyword">import</span>Â org.apache.commons.lang3.StringUtils;
<span class="hljs-keyword">import</span>Â org.springframework.stereotype.Component;
<span class="hljs-keyword">import</span>Â java.io.IOException;
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">XForwardedProtoFilter</span>Â <span class="hljs-keyword">implements</span>Â <span class="hljs-title class_">Filter</span>Â {
Â  Â Â <span class="hljs-meta">@Override</span>
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">doFilter</span><span class="hljs-params">(ServletRequest request, ServletResponse response, FilterChain chain)</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">throws</span>Â IOException, ServletException {
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (requestÂ <span class="hljs-keyword">instanceof</span>Â HttpServletRequest) {
Â  Â  Â  Â  Â  Â Â <span class="hljs-type">HttpServletRequest</span>Â <span class="hljs-variable">httpRequest</span>Â <span class="hljs-operator">=</span>Â (HttpServletRequest) request;
Â  Â  Â  Â  Â  Â Â <span class="hljs-type">String</span>Â <span class="hljs-variable">xForwardedProto</span>Â <span class="hljs-operator">=</span>Â httpRequest.getHeader(<span class="hljs-string">"X-Forwarded-Proto"</span>);
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (StringUtils.isNotBlank(xForwardedProto) &amp;&amp; !xForwardedProto.equalsIgnoreCase(httpRequest.getScheme()) &amp;&amp; xForwardedProto.equalsIgnoreCase(<span class="hljs-string">"https"</span>)) {
Â  Â  Â  Â  Â  Â  Â  Â  httpRequest =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">HttpServletRequestWrapper</span>(httpRequest) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-meta">@Override</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">public</span>Â StringÂ <span class="hljs-title function_">getScheme</span><span class="hljs-params">()</span>Â {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â xForwardedProto;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-meta">@Override</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">public</span>Â StringBufferÂ <span class="hljs-title function_">getRequestURL</span><span class="hljs-params">()</span>Â {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-type">StringBuffer</span>Â <span class="hljs-variable">requestURL</span>Â <span class="hljs-operator">=</span>Â <span class="hljs-built_in">super</span>.getRequestURL();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (requestURL !=Â <span class="hljs-literal">null</span>Â &amp;&amp; requestURL.length() &gt;Â <span class="hljs-number">0</span>) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-type">int</span>Â <span class="hljs-variable">index</span>Â <span class="hljs-operator">=</span>Â requestURL.indexOf(<span class="hljs-string">"://"</span>);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (index &gt;Â <span class="hljs-number">0</span>) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  requestURL.replace(<span class="hljs-number">0</span>, index, xForwardedProto);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â requestURL;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  chain.doFilter(httpRequest, response);
Â  Â  Â  Â  }Â <span class="hljs-keyword">else</span>Â {
Â  Â  Â  Â  Â  Â  chain.doFilter(request, response);
Â  Â  Â  Â  }
Â  Â  }
Â  Â Â <span class="hljs-meta">@Override</span>
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">init</span><span class="hljs-params">(FilterConfig filterConfig)</span>Â <span class="hljs-keyword">throws</span>Â ServletException {
Â  Â  }
Â  Â Â <span class="hljs-meta">@Override</span>
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">destroy</span><span class="hljs-params">()</span>Â {
Â  Â  }
}
</code></pre>
<p>è‡³æ­¤ï¼Œåç«¯åº”ç”¨é€šè¿‡ <code>HttpServletRequest.getRequestURL()</code> è·å–åˆ°çš„ URL å°±æ˜¯ <code>https://example.com/xxx</code> äº†ã€‚</p>
<h2 data-id="heading-1">è§£å†³é‡å®šå‘ URL çš„é—®é¢˜</h2>
<p>åç«¯åº”ç”¨é€šè¿‡ <code>HttpServletResponse.sendRedirect()</code> ç”Ÿæˆçš„é‡å®šå‘ URL ä¹Ÿæ˜¯ http URLï¼Œå¦‚ä½•è®©å®ƒå˜æˆ https å‘¢ï¼Ÿ</p>
<p>è¿™ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡ Nginx çš„å¦ä¸€æŒ‡ä»¤ <code>proxy_redirect</code> æ¥è§£å†³ï¼Œè¯¥æŒ‡ä»¤ç”¨äºä¿®æ”¹ä»åç«¯æœåŠ¡å™¨è¿”å›çš„ <code>Location</code> å’Œ <code>Refresh</code> å“åº”å¤´ã€‚</p>
<pre><code class="hljs language-perl" lang="perl">locationÂ / {
Â  Â Â <span class="hljs-comment"># ...</span>
Â  Â Â proxy_redirectÂ http:<span class="hljs-regexp">//</span>Â $scheme:<span class="hljs-regexp">//</span>;
}
</code></pre>
<p>è¿™æ ·ï¼Œå½“åç«¯åº”ç”¨è¿”å›ä¸€ä¸ªé‡å®šå‘å“åº”æ—¶ï¼ŒNginx ä¼šå°† <code>Location</code> å¤´ä¸­çš„ <code>http://</code> æ›¿æ¢ä¸º <code>$scheme://</code>ï¼Œå³ <code>https://</code>ã€‚</p>
<h2 data-id="heading-2">è¿›ä¸€æ­¥æ€è€ƒï¼šå½“ Nginx å‰é¢è¿˜æœ‰è´Ÿè½½å‡è¡¡å™¨æ—¶</h2>
<p>åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼ŒNginx å‰é¢å¯èƒ½è¿˜æœ‰å•†ç”¨è´Ÿè½½å‡è¡¡å™¨ï¼ˆå¦‚ AWS ELBã€é˜¿é‡Œäº‘ SLB ç­‰ï¼‰ï¼Œè¿™æ—¶éœ€è¦è€ƒè™‘è´Ÿè½½å‡è¡¡å™¨ä¸ Nginx ä¹‹é—´çš„åè®®é—®é¢˜ã€‚</p>
<p>å¦‚æœè´Ÿè½½å‡è¡¡å™¨ä¸ Nginx ä¹‹é—´æ˜¯ httpï¼Œè€Œ Nginx ä¸åç«¯åº”ç”¨ä¹‹é—´æ˜¯ httpï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨è´Ÿè½½å‡è¡¡å™¨å’Œ Nginx ä¹‹é—´æ·»åŠ  <code>X-Forwarded-Proto</code> å¤´ï¼Œä»¥ä¾¿ Nginx èƒ½å¤Ÿæ­£ç¡®åœ°è¯†åˆ«åŸå§‹è¯·æ±‚çš„åè®®ã€‚</p>
<p>ä¸»æµçš„è´Ÿè½½å‡è¡¡å™¨é…ç½®é¡¹é‡Œåº”è¯¥éƒ½æœ‰æ·»åŠ  <code>X-Forwarded-Proto</code> å¤´çš„é€‰é¡¹å¼€å…³ï¼Œæ¯”å¦‚é˜¿é‡Œäº‘ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/378eb621996f4a7ea3f16535fc290261~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=974&amp;h=438&amp;s=89095&amp;e=png&amp;b=fefefe" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯è¿™æ ·é…ç½®åï¼ŒNginx é…ç½®ä¹Ÿéœ€è¦åšç›¸åº”çš„è°ƒæ•´ï¼Œå°† <code>$scheme</code> æ›¿æ¢ä¸º <code>$http_x_forwarded_proto</code>ï¼š<br/>
ï¼ˆæ­¤ç§åœºæ™¯ <code>$scheme</code> ä¸ºè´Ÿè½½å‡è¡¡å™¨ä¸ Nginx ä¹‹é—´çš„åè®® httpï¼Œ<code>$http_x_forwarded_proto</code> ä¸ºè´Ÿè½½å‡è¡¡å™¨é€šè¿‡ Header é€ä¼ è¿‡æ¥çš„å‰ç«¯è®¿é—®åè®® httpsã€‚ï¼‰</p>
<pre><code class="hljs language-perl" lang="perl">locationÂ / {
Â  Â Â <span class="hljs-comment"># ...</span>
Â  Â Â proxy_set_headerÂ X-Forwarded-ProtoÂ $http_x_forwarded_proto;
Â  Â Â proxy_redirectÂ http:<span class="hljs-regexp">//</span>Â $http_x_forwarded_proto:<span class="hljs-regexp">//</span>;
}
</code></pre>
<h2 data-id="heading-3">å‚è€ƒé“¾æ¥</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_proxy_module.html%23proxy_set_header" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_set_header" ref="nofollow noopener noreferrer">Nginx å®˜æ–¹æ–‡æ¡£ - proxy_set_header</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_proxy_module.html%23proxy_redirect" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_redirect" ref="nofollow noopener noreferrer">Nginx å®˜æ–¹æ–‡æ¡£ - proxy_redirect</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23variables" target="_blank" title="https://nginx.org/en/docs/http/ngx_http_core_module.html#variables" ref="nofollow noopener noreferrer">Nginx å®˜æ–¹æ–‡æ¡£ - Embedded Variables</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter CI/CD å®Œæ•´æŒ‡å—ï¼šä» Bitbucket Pipelines åˆ° Play Store è‡ªåŠ¨åŒ–éƒ¨ç½²]]></title>    <link>https://juejin.cn/post/7572062035141328906</link>    <guid>https://juejin.cn/post/7572062035141328906</guid>    <pubDate>2025-11-14T00:59:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572062035141328906" data-draft-id="7569488854836789294" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter CI/CD å®Œæ•´æŒ‡å—ï¼šä» Bitbucket Pipelines åˆ° Play Store è‡ªåŠ¨åŒ–éƒ¨ç½²"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-14T00:59:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JarvanMo"/> <meta itemprop="url" content="https://juejin.cn/user/2348212565845704"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter CI/CD å®Œæ•´æŒ‡å—ï¼šä» Bitbucket Pipelines åˆ° Play Store è‡ªåŠ¨åŒ–éƒ¨ç½²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2348212565845704/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JarvanMo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T00:59:10.000Z" title="Fri Nov 14 2025 00:59:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    19
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ‰‹åŠ¨æ„å»ºã€ç­¾åå’Œä¸Šä¼  <strong>Flutter</strong> åº”ç”¨çš„è¿‡ç¨‹<strong>æ—¢ç¹çåˆå®¹æ˜“å‡ºé”™</strong>ã€‚ä½ å¾—æ‰¾åˆ°æ­£ç¡®çš„ç­¾åå¯†é’¥ï¼Œè®°ä½å¯†ç ï¼Œè¿è¡Œæ„å»ºå‘½ä»¤ï¼Œç„¶åå°å¿ƒç¿¼ç¿¼åœ°å°†ç”Ÿæˆçš„ <code>.aab</code> æˆ– <code>.apk</code> æ–‡ä»¶ä¸Šä¼ åˆ° <strong>Google Play Console</strong>ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸ä»…è€—æ—¶ï¼Œè€Œä¸”ä¸¥é‡æ‹–æ…¢äº†ç‰ˆæœ¬æ›´æ–°çš„é€Ÿåº¦ã€‚</p>
<p><strong>æŒç»­é›†æˆä¸æŒç»­éƒ¨ç½²ï¼ˆCI/CDï¼‰</strong> å°±æ˜¯è§£å†³ä¹‹é“ã€‚é€šè¿‡å»ºç«‹ä¸€æ¡è‡ªåŠ¨åŒ–æµæ°´çº¿ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿æ¯ä¸€æ¬¡ä»£ç æ¨é€åˆ°ä»“åº“åï¼Œéƒ½èƒ½è‡ªåŠ¨å®Œæˆåˆ†æã€æµ‹è¯•ã€æ„å»ºï¼Œç”šè‡³éƒ¨ç½²ã€‚</p>
<p>æœ¬æŒ‡å—å°†å¸¦é¢†ä½ ä½¿ç”¨ <strong>Bitbucket Pipelines</strong> å’Œ <strong>Fastlane</strong>ï¼Œä¸ºä½ çš„ Flutter åº”ç”¨æ­å»ºä¸€æ¡å®Œæ•´çš„ CI/CD æµæ°´çº¿ã€‚æˆ‘ä»¬å°†ä»åŸºç¡€çš„æµ‹è¯•å’Œç­¾ååº”ç”¨åŒ…æ„å»ºå¼€å§‹ï¼Œé€æ­¥å®ç°å®Œå…¨è‡ªåŠ¨éƒ¨ç½²åˆ° Google Play å•†åº—çš„å†…éƒ¨æµ‹è¯•è½¨é“ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>å‡†å¤‡å·¥ä½œ</strong></h2>
<ul>
<li>ä¸€ä¸ªå·²åœ¨ <strong>Bitbucket ä»“åº“</strong>ä¸­çš„ Flutter é¡¹ç›®ã€‚</li>
<li>ä¸€ä¸ª <strong>Android ç­¾åå¯†é’¥</strong>ï¼ˆ<code>.jks</code> æ–‡ä»¶ï¼‰åŠå…¶å‡­è¯ï¼ˆå¯†é’¥åº“å¯†ç ã€å¯†é’¥åˆ«åã€å¯†é’¥å¯†ç ï¼‰ã€‚</li>
<li>ä½ çš„ Bitbucket ä»“åº“çš„<strong>ç®¡ç†æƒé™</strong>ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-1"><strong>ç¬¬ä¸€éƒ¨åˆ†ï¼šå¥ å®šåŸºç¡€ â€” æ¯æ¬¡æ¨é€éƒ½è¿›è¡Œæ„å»ºå’Œæµ‹è¯•</strong></h2>
<p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªèƒ½å¤Ÿåœ¨æ¯æ¬¡ä»£ç æ¨é€æ—¶ï¼ŒéªŒè¯ä»£ç å¹¶æ„å»ºå·²ç­¾åçš„ <strong>Android App Bundle</strong> çš„æµæ°´çº¿ã€‚</p>
<h3 data-id="heading-2"><strong>æ­¥éª¤ 1ï¼šå¯ç”¨ Bitbucket Pipelines</strong></h3>
<p>è¿™æ˜¯æœ€ç®€å•çš„ä¸€æ­¥ï¼š</p>
<ol>
<li>åœ¨ Bitbucket ä¸Šå¯¼èˆªåˆ°ä½ çš„<strong>ä»“åº“</strong>ã€‚</li>
<li>åœ¨å·¦ä¾§è¾¹æ ï¼Œç‚¹å‡» <strong>ä»“åº“è®¾ç½®ï¼ˆRepository settingsï¼‰</strong> ã€‚</li>
<li>åœ¨â€œPipelinesâ€éƒ¨åˆ†ä¸‹ï¼Œç‚¹å‡» <strong>è®¾ç½®ï¼ˆSettingsï¼‰</strong> ã€‚</li>
<li>åˆ‡æ¢å¼€å…³ä»¥<strong>å¯ç”¨ Pipelines</strong>ã€‚Bitbucket ä¼šæä¾›ä¸€äº›æ¨¡æ¿ï¼Œç›®å‰ä½ å¯ä»¥å…ˆå¿½ç•¥ã€‚</li>
</ol>
<h3 data-id="heading-3"><strong>æ­¥éª¤ 2ï¼šåˆ›å»º <code>bitbucket-pipelines.yml</code> æ–‡ä»¶</strong></h3>
<p>åœ¨ä½ çš„ Flutter é¡¹ç›®çš„æ ¹ç›®å½•ï¼ˆä¸ <code>pubspec.yaml</code> åŒçº§ï¼‰ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º <code>bitbucket-pipelines.yml</code> çš„æ–°æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶æ˜¯è‡ªåŠ¨åŒ–æµç¨‹çš„æ ¸å¿ƒï¼ŒåŒ…å«æµæ°´çº¿çš„æ‰€æœ‰æŒ‡ä»¤ã€‚</p>
<h3 data-id="heading-4"><strong>æ­¥éª¤ 3ï¼šå®šä¹‰ Docker é•œåƒå’Œç¼“å­˜</strong></h3>
<p>YAML æ–‡ä»¶çš„ç¬¬ä¸€éƒ¨åˆ†æ˜¯å®šä¹‰æ‰§è¡Œç¯å¢ƒã€‚æˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªç¤¾åŒºç»´æŠ¤çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcirruslabs%2Fdocker-images-flutter%2Fpkgs%2Fcontainer%2Fflutter" target="_blank" title="https://github.com/cirruslabs/docker-images-flutter/pkgs/container/flutter" ref="nofollow noopener noreferrer">Flutter Docker é•œåƒ</a>çš„ç‰¹å®šç‰ˆæœ¬ï¼ˆè¿™é‡Œä»¥ <strong>Flutter 3.32.7</strong> ä¸ºä¾‹ï¼‰ã€‚åŒæ—¶ï¼Œ<strong>ç¼“å­˜</strong>ä¹Ÿè‡³å…³é‡è¦ï¼Œå®ƒå¯ä»¥é¿å…æ¯æ¬¡æ„å»ºæ—¶éƒ½é‡æ–°ä¸‹è½½ Flutter SDK å’Œ pub åŒ…ï¼Œä»è€ŒåŠ å¿«æ„å»ºé€Ÿåº¦ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">image:</span> <span class="hljs-string">ghcr.io/cirruslabs/flutter:3.32.7</span>

<span class="hljs-attr">definitions:</span>
  <span class="hljs-attr">caches:</span>
    <span class="hljs-comment"># Cache the Flutter SDK between builds</span>
    <span class="hljs-attr">flutter:</span> <span class="hljs-string">/flutter</span>
    <span class="hljs-comment"># Cache the pub packages</span>
    <span class="hljs-attr">pub:</span> <span class="hljs-string">$HOME/.pub-cache</span>

<span class="hljs-attr">clone:</span>
  <span class="hljs-attr">depth:</span> <span class="hljs-number">1</span> <span class="hljs-comment"># Perform a shallow clone for faster checkout</span>
</code></pre>
<hr/>
<h2 data-id="heading-5">æ­¥éª¤ 4ï¼šåˆ›å»ºç¬¬ä¸€ä¸ªæµæ°´çº¿ï¼ˆåˆ†æä¸æµ‹è¯•ï¼‰ğŸ§ª</h2>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬æ¥é…ç½®ä¸€ä¸ªç®€å•çš„æµæ°´çº¿ï¼Œè®©å®ƒåœ¨<strong>æ¨é€åˆ°ä»»æ„åˆ†æ”¯</strong>æ—¶è‡ªåŠ¨è¿è¡Œã€‚è¿™æ¡æµæ°´çº¿å°†è´Ÿè´£æ‹‰å–ä¾èµ–é¡¹ã€åˆ†æä»£ç å¹¶è¿è¡Œæµ‹è¯•ã€‚</p>
<p>è¯·å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°ä½ çš„ <code>bitbucket-pipelines.yml</code> æ–‡ä»¶ä¸­ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">pipelines:</span>
  <span class="hljs-attr">default:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">step:</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">Analyze</span> <span class="hljs-string">and</span> <span class="hljs-string">Test</span>
        <span class="hljs-attr">caches:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">pub</span>
        <span class="hljs-attr">script:</span>
          <span class="hljs-comment"># Get Flutter packages</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">flutter</span> <span class="hljs-string">pub</span> <span class="hljs-string">get</span>
          <span class="hljs-comment"># Run the linter/analyzer</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">flutter</span> <span class="hljs-string">analyze</span>
          <span class="hljs-comment"># Run all widget tests (you can comment this out if you don't have tests)</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">flutter</span> <span class="hljs-string">test</span>
</code></pre>
<h2 data-id="heading-6">æ­¥éª¤ 4ï¼šåˆ›å»ºç¬¬ä¸€ä¸ªæµæ°´çº¿ï¼ˆåˆ†æä¸æµ‹è¯•ï¼‰ğŸ§ª</h2>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬æ¥é…ç½®ä¸€æ¡<strong>ç®€å•æµæ°´çº¿</strong>ï¼Œè®©å®ƒåœ¨ä»£ç <strong>æ¨é€åˆ°ä»»æ„åˆ†æ”¯</strong>æ—¶è‡ªåŠ¨è¿è¡Œã€‚è¿™æ¡æµæ°´çº¿å°†è´Ÿè´£è·å–ä¾èµ–é¡¹ã€åˆ†æä»£ç ï¼Œå¹¶è¿è¡Œæµ‹è¯•ã€‚</p>
<p>è¯·å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°ä½ çš„ <code>bitbucket-pipelines.yml</code> æ–‡ä»¶ä¸­ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">pipelines:</span>
  <span class="hljs-attr">default:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">step:</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">Analyze</span> <span class="hljs-string">and</span> <span class="hljs-string">Test</span>
        <span class="hljs-attr">caches:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">pub</span>
        <span class="hljs-attr">script:</span>
          <span class="hljs-comment"># Get Flutter packages</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">flutter</span> <span class="hljs-string">pub</span> <span class="hljs-string">get</span>
          <span class="hljs-comment"># Run the linter/analyzer</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">flutter</span> <span class="hljs-string">analyze</span>
          <span class="hljs-comment"># Run all widget tests (you can comment this out if you don't have tests)</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">flutter</span> <span class="hljs-string">test</span>
</code></pre>
<h2 data-id="heading-7"><strong>é…ç½®è¯¦è§£</strong> âš™ï¸</h2>
<p>è®©æˆ‘ä»¬æ¥åˆ†è§£ä¸€ä¸‹è¿™æ®µé…ç½®çš„å«ä¹‰ï¼š</p>
<ul>
<li><strong><code>pipelines &gt; default</code></strong>: å®šä¹‰äº†ä¸€ä¸ªæµæ°´çº¿ï¼Œå®ƒä¼šåœ¨<strong>æ¯ä¸€æ¬¡æäº¤ï¼ˆcommitï¼‰</strong> è¢«æ¨é€æ—¶è¿è¡Œã€‚</li>
<li><strong><code>step</code></strong>: ä¸€ä¸ªæµæ°´çº¿ç”±ä¸€ä¸ªæˆ–å¤šä¸ªæ­¥éª¤ç»„æˆï¼Œæ¯ä¸ªæ­¥éª¤éƒ½åœ¨ä¸€ä¸ª<strong>å…¨æ–°çš„ Docker å®¹å™¨</strong>ä¸­è¿è¡Œã€‚</li>
<li><strong><code>name</code></strong>: ä¸€ä¸ªæè¿°æ€§çš„åç§°ï¼Œå®ƒå°†æ˜¾ç¤ºåœ¨ Bitbucket çš„ç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰ä¸­ã€‚</li>
<li><strong><code>caches</code></strong>: æŒ‡å®šæ­¤æ­¥éª¤åº”è¯¥ä½¿ç”¨æˆ‘ä»¬åœ¨å‰é¢å®šä¹‰è¿‡çš„ <strong><code>pub</code> ç¼“å­˜</strong>ã€‚</li>
<li><strong><code>script</code></strong>: éœ€è¦æŒ‰é¡ºåºæ‰§è¡Œçš„ <strong>Shell å‘½ä»¤åˆ—è¡¨</strong>ã€‚</li>
</ul>
<p><strong>æäº¤å¹¶æ¨é€</strong>è¿™ä¸ªæ–‡ä»¶ã€‚ä½ åº”è¯¥å°±èƒ½åœ¨ä»“åº“çš„ <strong>â€œPipelinesâ€</strong> ï¼ˆæµæ°´çº¿ï¼‰éƒ¨åˆ†çœ‹åˆ°ä½ çš„<strong>ç¬¬ä¸€ä¸ªæµæ°´çº¿å¼€å§‹è¿è¡Œ</strong>äº†ã€‚</p>
<hr/>
<h2 data-id="heading-8"><strong>æ­¥éª¤ 5ï¼šå¤„ç† Android æ„å»ºæ‰€éœ€çš„å¯†é’¥ä¿¡æ¯</strong> ğŸ”‘</h2>
<p>ä½ <strong>ç»ä¸åº”è¯¥</strong>å°†ä½ çš„ç­¾åå¯†é’¥æˆ–å¯†ç ç›´æ¥æäº¤åˆ°ä»“åº“ä¸­ã€‚Bitbucket æä¾›äº†ä¸€ç§å®‰å…¨çš„æ–¹å¼æ¥å¤„ç†è¿™äº›æ•æ„Ÿä¿¡æ¯ï¼Œé‚£å°±æ˜¯**â€œä»“åº“å˜é‡â€ï¼ˆRepository variablesï¼‰**ã€‚</p>
<h3 data-id="heading-9"><strong>5a. ç¼–ç ä½ çš„ Keystore æ–‡ä»¶å’Œå‡­è¯</strong></h3>
<p>ä½ çš„ <code>.jks</code> æ–‡ä»¶æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ã€‚ä¸ºäº†å°†å…¶ä½œä¸ºå˜é‡å­˜å‚¨ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨ <strong>Base64</strong> å°†å…¶ç¼–ç æˆæ–‡æœ¬æ ¼å¼ã€‚æ‰“å¼€ç»ˆç«¯å¹¶è¿è¡Œç›¸åº”çš„å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># On macOS/Linux  </span>
<span class="hljs-string">base64</span> <span class="hljs-string">-i</span> <span class="hljs-string">my-upload-key.jks</span> <span class="hljs-string">-o</span> <span class="hljs-string">key.txt</span>  
  
<span class="hljs-comment"># On Windows (using PowerShell)  </span>
[<span class="hljs-string">Convert</span>]<span class="hljs-string">::ToBase64String([IO.File]::ReadAllBytes("my-upload-key.jks"))</span> <span class="hljs-string">|</span> <span class="hljs-string">Out-File</span> <span class="hljs-string">-FilePath</span> <span class="hljs-string">"key.txt"</span>
</code></pre>
<p>è¿è¡Œä¸Šè¿°å‘½ä»¤ä¼šç”Ÿæˆä¸€ä¸ªåä¸º <strong><code>key.txt</code></strong> çš„æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ª<strong>å¾ˆé•¿çš„å­—ç¬¦ä¸²</strong>ã€‚è¯·å¤åˆ¶æ•´ä¸ªå­—ç¬¦ä¸²ã€‚</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬ç”¨<strong>åŒæ ·çš„æ–¹æ³•</strong>æ¥å¤„ç† <code>key.properties</code> æ–‡ä»¶ï¼Œä»¥ä¾¿<strong>ç¼–ç è®¿é—® <code>.jks</code> æ–‡ä»¶æ‰€éœ€çš„å‡­è¯</strong>ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># On macOS/Linux  </span>
<span class="hljs-string">base64</span> <span class="hljs-string">-i</span> <span class="hljs-string">key.properties</span> <span class="hljs-string">-o</span> <span class="hljs-string">properties.txt</span>  
  
<span class="hljs-comment"># On Windows (using PowerShell)  </span>
[<span class="hljs-string">Convert</span>]<span class="hljs-string">::ToBase64String([IO.File]::ReadAllBytes("key.properties"))</span> <span class="hljs-string">|</span> <span class="hljs-string">Out-File</span> <span class="hljs-string">-FilePath</span> <span class="hljs-string">"properties.txt"</span>
</code></pre>
<h2 data-id="heading-10">5b. å°†å˜é‡æ·»åŠ åˆ° Bitbucket ğŸ”</h2>
<p>å‰å¾€ <strong>ä»“åº“è®¾ç½®ï¼ˆRepository settingsï¼‰</strong> -&gt; <strong>æµæ°´çº¿ï¼ˆPipelinesï¼‰</strong> -&gt; <strong>ä»“åº“å˜é‡ï¼ˆRepository variablesï¼‰</strong> ã€‚</p>
<p>æ·»åŠ ä»¥ä¸‹å˜é‡ã€‚<strong>è‡³å…³é‡è¦</strong>çš„ä¸€ç‚¹æ˜¯ï¼Œè¯·ä¸º<strong>æ¯ä¸ªå˜é‡éƒ½å‹¾é€‰â€œå·²ä¿æŠ¤â€ï¼ˆSecuredï¼‰æ¡†</strong>ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript">| <span class="hljs-title class_">Variable</span> <span class="hljs-title class_">Name</span>             | <span class="hljs-title class_">Value</span>                                              |
| ------------------------- | -------------------------------------------------- |
| <span class="hljs-string">`ANDROID_KEYSTORE_BASE64`</span> | <span class="hljs-title class_">Paste</span> the entire base64 <span class="hljs-built_in">string</span> <span class="hljs-keyword">from</span> <span class="hljs-string">`key.txt`</span>.     |
| <span class="hljs-string">`ANDROID_KEYPROPERTIES_BASE64`</span> | <span class="hljs-title class_">Paste</span> the entire base64 <span class="hljs-built_in">string</span> <span class="hljs-keyword">from</span> <span class="hljs-string">`properties.txt`</span>.                   |
</code></pre>
<hr/>
<h2 data-id="heading-11">æ­¥éª¤ 6ï¼šæ„å»ºå·²ç­¾åçš„ Android åº”ç”¨åŒ…ï¼ˆAABï¼‰âœ…</h2>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„æµæ°´çº¿ï¼Œè®©å®ƒåœ¨æ¯æ¬¡æ¨é€åˆ° <strong><code>development</code> åˆ†æ”¯</strong>æ—¶ï¼Œè‡ªåŠ¨æ„å»ºä¸€ä¸ª<strong>å·²ç­¾åçš„ <code>.aab</code> æ–‡ä»¶</strong>ã€‚</p>
<p>è¯·å°†ä»¥ä¸‹ä»£ç å—æ·»åŠ åˆ°ä½ çš„ <code>.yml</code> æ–‡ä»¶çš„ <strong><code>pipelines</code></strong> é”®ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ... (image, definitions, and default pipeline from above) ...</span>
pipelines:
  <span class="hljs-comment"># ... (default pipeline here) ...</span>
  branches:
    development:
      - step:
          name: Analyze and Build App Bundle
          size: 2x <span class="hljs-comment"># Use a larger build container for performance</span>
          caches:
            - pub
          script:
            - <span class="hljs-built_in">rm</span> -f pubspec.lock
            - flutter pub get
            - flutter analyze
            - flutter <span class="hljs-built_in">test</span>

            <span class="hljs-comment"># Decode and write the keystore file from the repository variable</span>
            - <span class="hljs-built_in">echo</span> <span class="hljs-variable">$ANDROID_KEYSTORE_BASE64</span> | <span class="hljs-built_in">base64</span> -d &gt; android/app/keystore.jks

            <span class="hljs-comment"># Create the key.properties file with the keystore credentials</span>
            - <span class="hljs-built_in">echo</span> <span class="hljs-variable">$ANDROID_KEYPROPERTIES_BASE64</span> | <span class="hljs-built_in">base64</span> -d &gt; android/key.properties

            <span class="hljs-comment"># Build the app bundle</span>
            - flutter build appbundle --obfuscate --split-debug-info=./debug_info -t lib/main_dev.dart --release
          artifacts:
            <span class="hljs-comment"># Save the built app bundle so it can be downloaded</span>
            - build/app/outputs/bundle/release/app-release.aab
</code></pre>
<h2 data-id="heading-12"><strong>å…³é”®æ–°å¢å†…å®¹è§£æ</strong> ğŸ’¡</h2>
<ul>
<li><strong><code>branches &gt; development</code></strong>: è¿™æ¡æµæ°´çº¿<strong>åªä¼š</strong>åœ¨ä»£ç æ¨é€åˆ° <strong><code>development</code> åˆ†æ”¯</strong>æ—¶è¿è¡Œã€‚</li>
<li><strong><code>size: 2x</code></strong>: æ„å»º Flutter åº”ç”¨æ˜¯èµ„æºå¯†é›†å‹çš„ã€‚è®¾ç½® <strong><code>2x</code></strong> ä¼šåˆ†é…<strong>åŒå€å†…å­˜</strong>ï¼Œè¿™èƒ½é˜²æ­¢æ„å»ºé”™è¯¯å¹¶åŠ å¿«é€Ÿåº¦ã€‚</li>
<li><strong><code>echo â€¦ | base64 -d â€¦</code></strong>: è¿™æ˜¯<strong>è‡³å…³é‡è¦çš„å‘½ä»¤</strong>ï¼Œå®ƒåè½¬äº†æˆ‘ä»¬ä¹‹å‰çš„æ­¥éª¤ã€‚å®ƒå–å‡ºå®‰å…¨çš„å˜é‡ï¼Œå°†å…¶ä» Base64 <strong>è§£ç </strong>ï¼Œå¹¶é‡æ–°å†™å…¥ä¸€ä¸ª<strong>äºŒè¿›åˆ¶çš„ <code>.jks</code> æˆ– <code>.properties</code> æ–‡ä»¶</strong>ã€‚</li>
<li><strong><code>flutter build appbundle â€¦</code></strong>: æˆ‘ä»¬ä½¿ç”¨æ ‡å‡†çš„æ„å»ºå‘½ä»¤ï¼Œå¸¦æœ‰<strong>æ··æ·†</strong>ï¼ˆobfuscationï¼‰å’Œä¸€ä¸ªç‰¹å®šçš„å…¥å£ç‚¹ï¼ˆ<code>-t lib/main_dev.dart</code>ï¼‰ã€‚</li>
<li><strong><code>artifacts</code></strong>: è¿™å‘Šè¯‰ Bitbucket <strong>ä¿å­˜</strong>æŒ‡å®šçš„æ–‡ä»¶ï¼ˆ<code>app-release.aab</code>ï¼‰ï¼Œä½ å¯ä»¥åœ¨æµæ°´çº¿ç»“æœé¡µé¢ä¸‹è½½å®ƒã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-13"><strong>ç¬¬äºŒéƒ¨åˆ†ï¼šæœ€åå†²åˆº â€” ä½¿ç”¨ Fastlane è‡ªåŠ¨åŒ–éƒ¨ç½²åˆ° Play Store</strong> ğŸš€</h2>
<p>æ„å»ºåº”ç”¨å›ºç„¶å¾ˆå¥½ï¼Œä½†çœŸæ­£çš„é­”åŠ›åœ¨äº<strong>è‡ªåŠ¨åŒ–éƒ¨ç½²</strong>ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†é›†æˆ <strong>Fastlane</strong>â€”â€”ä¸€ä¸ªä¸“ä¸ºè‡ªåŠ¨åŒ–åº”ç”¨å‘å¸ƒè€Œè®¾è®¡çš„å¼€æºå¹³å°ã€‚</p>
<h3 data-id="heading-14"><strong>æ–°å·¥ä½œæµç¨‹æ¦‚è§ˆ</strong></h3>
<ol>
<li><strong>æœ¬åœ°è®¾ç½®</strong>: æˆ‘ä»¬å°†å…ˆåœ¨æœ¬åœ°è®¾ç½® Fastlaneï¼Œç¡®ä¿å®ƒå¯ä»¥æ­£ç¡®åœ°ä¸ Google Play å•†åº—é€šä¿¡ã€‚</li>
<li><strong>Google å‡­è¯</strong>: æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ª <strong>Google Cloud æœåŠ¡è´¦å·</strong>ï¼ŒFastlane å°†ä½¿ç”¨å®ƒè¿›è¡Œèº«ä»½éªŒè¯ã€‚</li>
<li><strong>å®‰å…¨å˜é‡</strong>: æˆ‘ä»¬å°†å¯¹ç§˜å¯†çš„æœåŠ¡è´¦å· <strong>JSON å¯†é’¥è¿›è¡Œç¼–ç </strong>ï¼Œå¹¶å°†å…¶å®‰å…¨åœ°å­˜å‚¨åœ¨ Bitbucket ä¸­ã€‚</li>
<li><strong>æµæ°´çº¿æ›´æ–°</strong>: æˆ‘ä»¬å°†ä¿®æ”¹ <code>.yml</code> æ–‡ä»¶ï¼Œä½¿å…¶<strong>å®‰è£…å¹¶è¿è¡Œ Fastlane</strong>ï¼Œç”± Fastlane å¤„ç†æ„å»ºå’Œéƒ¨ç½²å·¥ä½œã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-15"><strong>æ­¥éª¤ 1ï¼šè·å– Google Play API å‡­è¯</strong> ğŸ”‘</h2>
<p>Fastlane éœ€è¦ä¸€ä¸ªæœåŠ¡è´¦å·æ‰èƒ½ä»£è¡¨ä½ æ‰§è¡Œæ“ä½œã€‚</p>
<h3 data-id="heading-16"><strong>åˆ›å»ºæœåŠ¡è´¦å·</strong></h3>
<ol>
<li>åœ¨ <strong>Google Cloud Console</strong> ä¸­ï¼Œå¯¼èˆªåˆ° <strong>IAM ä¸ç®¡ç†ï¼ˆIAM &amp; Adminï¼‰ -&gt; æœåŠ¡è´¦å·ï¼ˆService Accountsï¼‰</strong> ã€‚</li>
<li>ç‚¹å‡» <strong>+ åˆ›å»ºæœåŠ¡è´¦å·ï¼ˆ+ CREATE SERVICE ACCOUNTï¼‰</strong> ï¼Œç»™å®ƒå‘½åï¼ˆä¾‹å¦‚ï¼š<code>bitbucket-ci-cd-deploys</code>ï¼‰ï¼Œç„¶åç‚¹å‡» <strong>åˆ›å»ºå¹¶ç»§ç»­ï¼ˆCREATE AND CONTINUEï¼‰</strong> ã€‚</li>
<li>åœ¨â€œæˆäºˆæ­¤æœåŠ¡è´¦å·å¯¹é¡¹ç›®çš„è®¿é—®æƒé™â€ä¸‹ï¼Œæ·»åŠ è§’è‰² <strong>â€œæœåŠ¡è´¦å·ç”¨æˆ·â€ï¼ˆService Account Userï¼‰</strong> ã€‚ç‚¹å‡» <strong>ç»§ç»­ï¼ˆCONTINUEï¼‰</strong> ï¼Œç„¶å <strong>å®Œæˆï¼ˆDONEï¼‰</strong> ã€‚</li>
</ol>
<h3 data-id="heading-17"><strong>åˆ›å»ºå¹¶ä¸‹è½½ JSON å¯†é’¥</strong></h3>
<ol>
<li>æ‰¾åˆ°ä½ åˆšåˆ›å»ºçš„æœåŠ¡è´¦å·ã€‚ç‚¹å‡»æ—è¾¹çš„<strong>ä¸‰ä¸ªç‚¹èœå•</strong>ï¼Œé€‰æ‹© <strong>ç®¡ç†å¯†é’¥ï¼ˆManage keysï¼‰</strong> ã€‚</li>
<li>ç‚¹å‡» <strong>æ·»åŠ å¯†é’¥ï¼ˆADD KEYï¼‰</strong> -&gt; <strong>åˆ›å»ºæ–°å¯†é’¥ï¼ˆCreate new keyï¼‰</strong> ã€‚é€‰æ‹© <strong>JSON</strong> å¹¶ç‚¹å‡» <strong>åˆ›å»ºï¼ˆCREATEï¼‰</strong> ã€‚</li>
<li>ä¸€ä¸ª JSON æ–‡ä»¶ï¼ˆä¾‹å¦‚ï¼š<code>your-service-account-key.json</code>ï¼‰å°†è¢«ä¸‹è½½ã€‚<strong>è¿™ä¸ªæ–‡ä»¶å°±æ˜¯ä½ çš„å¯†ç ï¼ŒåŠ¡å¿…ä¿æŒå®‰å…¨ï¼Œä¸è¦æäº¤åˆ°ä»“åº“ä¸­ã€‚</strong></li>
</ol>
<h3 data-id="heading-18"><strong>åœ¨ Play Console ä¸­æˆäºˆæƒé™</strong></h3>
<ol>
<li>å‰å¾€ <strong>Google Play Console</strong> çš„ <strong>ç”¨æˆ·ä¸æƒé™ï¼ˆUsers &amp; Permissionsï¼‰</strong> é¡µé¢ï¼Œç‚¹å‡» <strong>é‚€è¯·æ–°ç”¨æˆ·ï¼ˆInvite new usersï¼‰</strong> ã€‚</li>
<li>ç²˜è´´æœåŠ¡è´¦å·çš„<strong>ç”µå­é‚®ä»¶åœ°å€</strong>ï¼Œå¹¶æˆäºˆæ‰€éœ€çš„æƒé™ï¼ˆä¾‹å¦‚ï¼š<strong>ç®¡ç†å‘˜ï¼ˆAdminï¼‰</strong> æˆ–ç‰¹å®šçš„ <strong>å‘å¸ƒç»ç†ï¼ˆRelease Managerï¼‰</strong> è§’è‰²ï¼‰ã€‚ç‚¹å‡» <strong>é‚€è¯·ç”¨æˆ·ï¼ˆInvite userï¼‰</strong> ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-19"><strong>æ­¥éª¤ 2ï¼šåœ¨æœ¬åœ°å®‰è£…å’Œé…ç½® Fastlane</strong> ğŸ› ï¸</h2>
<p>æˆ‘ä»¬å°†åœ¨ä½ çš„ Flutter é¡¹ç›®çš„ <strong><code>android</code> ç›®å½•</strong>ä¸­è®¾ç½® Fastlaneã€‚</p>
<h3 data-id="heading-20"><strong>å®‰è£… Fastlane</strong></h3>
<p>è¯·éµå¾ª <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.fastlane.tools%2F" target="_blank" title="https://docs.fastlane.tools/" ref="nofollow noopener noreferrer">Fastlane å®˜æ–¹è®¾ç½®æŒ‡å—</a>ã€‚å¼ºçƒˆå»ºè®®ä½¿ç”¨ <strong>Bundler</strong>ã€‚</p>
<h3 data-id="heading-21"><strong>åˆå§‹åŒ– Fastlane</strong></h3>
<ol>
<li>åœ¨ç»ˆç«¯ä¸­è¿›å…¥ä½ çš„é¡¹ç›® <strong><code>android</code> ç›®å½•</strong>ï¼š<code>cd android</code>ã€‚</li>
<li>è¿è¡Œ <strong><code>fastlane init</code></strong>ã€‚</li>
<li>å®ƒä¼šè¦æ±‚è¾“å…¥ä½ çš„åº”ç”¨çš„<strong>åŒ…å</strong>å’Œ<strong>ç§˜å¯† JSON æ–‡ä»¶</strong>çš„è·¯å¾„ï¼ˆä¾‹å¦‚ï¼š<code>./your-service-account-key.json</code>ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-22"><strong>é…ç½® <code>fastlane/Appfile</code></strong></h3>
<p>ç¡®ä¿å…¶ä¸­çš„è·¯å¾„è®¾ç½®æ˜¯æ­£ç¡®çš„ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># fastlane/Appfile  </span>
json_key_file(<span class="hljs-string">"./your-service-account-key.json"</span>) <span class="hljs-comment"># Path to your JSON key  </span>
package_name(<span class="hljs-string">"com.your.app.package"</span>)
</code></pre>
<h2 data-id="heading-23">4. å®‰è£… <code>flutter_version</code> æ’ä»¶ ğŸ› ï¸</h2>
<p>ä¸ºäº†èƒ½<strong>è‡ªåŠ¨</strong>ä» <code>pubspec.yaml</code> æ–‡ä»¶ä¸­è·å–åº”ç”¨çš„<strong>ç‰ˆæœ¬åç§°ï¼ˆversion nameï¼‰</strong> å’Œ<strong>ç‰ˆæœ¬ä»£ç ï¼ˆversion codeï¼‰</strong> ï¼Œè¯·åœ¨ <code>android</code> ç›®å½•ä¸‹è¿è¡Œæ­¤å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">  bundle <span class="hljs-built_in">exec</span> fastlane add_plugin flutter_version
</code></pre>
<h2 data-id="heading-24">5. é…ç½® <code>fastlane/Fastfile</code> ğŸ› ï¸</h2>
<p>è¿™é‡Œå°±æ˜¯ä½ å®šä¹‰ <strong>â€œå¿«è½¦é“â€ï¼ˆlanesï¼‰</strong> çš„åœ°æ–¹ã€‚è¯·ç”¨ä»¥ä¸‹å†…å®¹æ›¿æ¢æ‰æ–‡ä»¶ä¸­çš„åŸæœ‰å†…å®¹ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">
<span class="hljs-comment"># fastlane/Fastfile</span>
default_platform(<span class="hljs-symbol">:android</span>)

platform <span class="hljs-symbol">:android</span> <span class="hljs-keyword">do</span>
  desc <span class="hljs-string">"Builds and deploys to the Google Play internal testing track"</span>
  lane <span class="hljs-symbol">:deploy_internal</span> <span class="hljs-keyword">do</span>
    <span class="hljs-comment"># Go up to the root to run Flutter commands</span>
    <span class="hljs-title class_">Dir</span>.chdir(<span class="hljs-string">".."</span>) <span class="hljs-keyword">do</span>
      sh(<span class="hljs-string">"flutter"</span>, <span class="hljs-string">"build"</span>, <span class="hljs-string">"appbundle"</span>, <span class="hljs-string">"--obfuscate"</span>, <span class="hljs-string">"--split-debug-info=./debug_info"</span>, <span class="hljs-string">"-t"</span>, <span class="hljs-string">"lib/main_dev.dart"</span>, <span class="hljs-string">"--release"</span>)
    <span class="hljs-keyword">end</span>
    
    version_info = flutter_version()
    version_name = version_info[<span class="hljs-string">"version_name"</span>] <span class="hljs-comment"># e.g., "1.2.3"</span>
    build_number = version_info[<span class="hljs-string">"version_code"</span>] <span class="hljs-comment"># e.g., "45"</span>

    <span class="hljs-comment"># Upload to the Play Store</span>
    upload_to_play_store(
      <span class="hljs-symbol">track:</span> <span class="hljs-string">'internal'</span>, <span class="hljs-comment"># Deploy to the internal testing track</span>
      <span class="hljs-symbol">aab:</span> <span class="hljs-string">'../build/app/outputs/bundle/release/app-release.aab'</span>,
      <span class="hljs-symbol">version_name:</span> <span class="hljs-string">"<span class="hljs-subst">#{version_name}</span>(<span class="hljs-subst">#{build_number}</span>)"</span>
    )
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h2 data-id="heading-25">6. åœ¨æœ¬åœ°è¿›è¡Œæµ‹è¯•ï¼ˆå¼ºçƒˆæ¨èï¼‰âœ…</h2>
<p>åœ¨ä½ çš„ç»ˆç«¯ï¼ˆä»éœ€ä½äº <strong><code>android</code> ç›®å½•</strong>ä¸­ï¼‰è¿è¡Œå‘½ä»¤ï¼š<code>fastlane deploy_internal</code>ã€‚å¦‚æœè¿™æ¡å‘½ä»¤æˆåŠŸè¿è¡Œï¼Œé‚£ä¹ˆä½ å°±å‡†å¤‡å¥½è¿›è¡Œè‡ªåŠ¨åŒ–éƒ¨ç½²äº†ã€‚</p>
<h2 data-id="heading-26">æ›´æ–° <code>.gitignore</code> æ–‡ä»¶ ğŸ”’</h2>
<p><strong>ç¡®ä¿</strong>ä½ çš„<strong>æ ¹ç›®å½•ä¸‹çš„ <code>.gitignore</code> æ–‡ä»¶</strong>åŒ…å«äº†é‚£ä¸ªç§˜å¯†çš„ JSON å¯†é’¥æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/android/your-service-account-key.json  
/android/gemfile.lock
</code></pre>
<h2 data-id="heading-27">æ­¥éª¤ 4ï¼šæ›´æ–° Bitbucket Pipelines ä»¥è¿›è¡Œéƒ¨ç½² ğŸš€</h2>
<p>æœ€åä¸€æ­¥ï¼Œè®©æˆ‘ä»¬æŠŠ <strong>Fastlane</strong> é›†æˆåˆ° <code>bitbucket-pipelines.yml</code> æ–‡ä»¶ä¸­ã€‚</p>
<h3 data-id="heading-28"><strong>å°† JSON å¯†é’¥æ·»åŠ ä¸ºå®‰å…¨å˜é‡</strong> ğŸ”’</h3>
<p>åƒå¤„ç† Keystore æ–‡ä»¶ä¸€æ ·ï¼Œä½ éœ€è¦å¯¹ <strong>JSON å¯†é’¥æ–‡ä»¶</strong>è¿›è¡Œç¼–ç ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"> base64 -i your-service-account-<span class="hljs-keyword">key</span>.json -o play-<span class="hljs-keyword">key</span>.txt
</code></pre>
<p>å°†å­—ç¬¦ä¸²ä» <strong><code>play-key.txt</code></strong> æ–‡ä»¶ä¸­å¤åˆ¶å‡ºæ¥ã€‚</p>
<p>å‰å¾€ <strong>ä»“åº“è®¾ç½®ï¼ˆRepository settingsï¼‰</strong> -&gt; <strong>ä»“åº“å˜é‡ï¼ˆRepository variablesï¼‰</strong> ï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„<strong>å—ä¿æŠ¤å˜é‡</strong>ï¼Œå‘½åä¸º <strong><code>GPLAY_SERVICE_ACCOUNT_KEY_BASE64</code></strong>ï¼Œå¹¶å°†å¤åˆ¶çš„å­—ç¬¦ä¸²ç²˜è´´ä¸ºå®ƒçš„å€¼ã€‚</p>
<h2 data-id="heading-29"><strong>ä¿®æ”¹ <code>bitbucket-pipelines.yml</code> æ–‡ä»¶</strong> âš™ï¸</h2>
<p>ç”¨è¿™ä¸ª<strong>æ–°ç‰ˆæœ¬</strong>çš„æµæ°´çº¿æ›¿æ¢æ‰ä½ åŸæœ‰çš„ <code>development</code> åˆ†æ”¯æµæ°´çº¿ã€‚å®ƒä¼š<strong>ç®€åŒ–å¾ˆå¤š</strong>ï¼Œå› ä¸º <strong>Fastlane</strong> æ›¿æˆ‘ä»¬å¤„ç†äº†å¤§éƒ¨åˆ†é€»è¾‘ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">branches:</span>
  <span class="hljs-attr">development:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">step:</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">Build</span> <span class="hljs-string">and</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">to</span> <span class="hljs-string">Internal</span> <span class="hljs-string">Testing</span>
        <span class="hljs-attr">size:</span> <span class="hljs-string">2x</span>
        <span class="hljs-attr">caches:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">pub</span>
        <span class="hljs-attr">script:</span>
          <span class="hljs-comment"># Basic setup and analysis</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">rm</span> <span class="hljs-string">-f</span> <span class="hljs-string">pubspec.lock</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">flutter</span> <span class="hljs-string">pub</span> <span class="hljs-string">get</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">flutter</span> <span class="hljs-string">analyze</span>
          
          <span class="hljs-comment"># Restore Android Keystore for the build</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">echo</span> <span class="hljs-string">$ANDROID_KEYSTORE_BASE64</span> <span class="hljs-string">|</span> <span class="hljs-string">base64</span> <span class="hljs-string">-d</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">android/app/keystore.jks</span>
          
          <span class="hljs-comment"># Create the key.properties file with the keystore credentials</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">echo</span> <span class="hljs-string">$ANDROID_KEYPROPERTIES_BASE64</span> <span class="hljs-string">|</span> <span class="hljs-string">base64</span> <span class="hljs-string">-d</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">android/key.properties</span>

          <span class="hljs-comment"># Restore Google Play API key for Fastlane</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">echo</span> <span class="hljs-string">$GPLAY_SERVICE_ACCOUNT_KEY_BASE64</span> <span class="hljs-string">|</span> <span class="hljs-string">base64</span> <span class="hljs-string">-d</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">android/your-service-account-key.json</span>

          <span class="hljs-comment"># --- Deployment via Fastlane ---</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">cd</span> <span class="hljs-string">android</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">bundle</span> <span class="hljs-string">install</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">bundle</span> <span class="hljs-string">exec</span> <span class="hljs-string">fastlane</span> <span class="hljs-string">deploy_internal</span>
        <span class="hljs-attr">artifacts:</span>
          <span class="hljs-comment"># Save the built artifact just in case</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">build/app/outputs/bundle/release/app-release.aab</span>
</code></pre>
<hr/>
<h2 data-id="heading-30">ç»“è®º ğŸ‰</h2>
<p><strong>æ­å–œï¼</strong> ä½ ç°åœ¨æ‹¥æœ‰äº†ä¸€æ¡å¼ºå¤§ä¸”<strong>å®Œå…¨è‡ªåŠ¨åŒ–</strong>çš„ CI/CD æµæ°´çº¿ã€‚</p>
<p>ä»Šåï¼Œæ¯ä¸€æ¬¡æ¨é€åˆ°ä½ çš„ <strong><code>development</code> åˆ†æ”¯</strong>çš„ä»£ç ï¼Œéƒ½å°†<strong>æ— éœ€ä»»ä½•æ‰‹åŠ¨å¹²é¢„</strong>ï¼Œè‡ªåŠ¨å®Œæˆåˆ†æã€æ„å»ºã€ç­¾åï¼Œå¹¶éƒ¨ç½²åˆ° <strong>Google Play å•†åº—çš„å†…éƒ¨æµ‹è¯•äººå‘˜</strong>æ‰‹ä¸­ã€‚</p>
<p>è¿™å¥—è®¾ç½®ä¸ä»…ä¸ºä½ èŠ‚çœäº†æ— æ•°æ—¶é—´ï¼Œè¿˜ç¡®ä¿äº†å‘å¸ƒæµç¨‹çš„<strong>ä¸€è‡´æ€§ã€å¯é æ€§å’Œå®‰å…¨æ€§</strong>ï¼Œè®©ä½ èƒ½å¤Ÿä¸“æ³¨äºä½ æœ€æ“…é•¿çš„äº‹æƒ…ï¼š<strong>æ„å»ºå‡ºè‰²çš„åº”ç”¨ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Rustæ€§èƒ½è°ƒä¼˜ï¼šä»åŠé€€åˆ°çœŸé¦™]]></title>    <link>https://juejin.cn/post/7572387666979602458</link>    <guid>https://juejin.cn/post/7572387666979602458</guid>    <pubDate>2025-11-14T09:30:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572387666979602458" data-draft-id="7572387068313632795" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Rustæ€§èƒ½è°ƒä¼˜ï¼šä»åŠé€€åˆ°çœŸé¦™"/> <meta itemprop="keywords" content="åç«¯,Rust"/> <meta itemprop="datePublished" content="2025-11-14T09:30:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯¥ç”¨æˆ·å·²ä¸å­˜åœ¨"/> <meta itemprop="url" content="https://juejin.cn/user/64217584778579"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Rustæ€§èƒ½è°ƒä¼˜ï¼šä»åŠé€€åˆ°çœŸé¦™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/64217584778579/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯¥ç”¨æˆ·å·²ä¸å­˜åœ¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T09:30:28.000Z" title="Fri Nov 14 2025 09:30:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ°çƒäººéƒ½è¯´Rustå¿«ï¼Œå®‰å…¨ï¼Œå¹¶å‘ç‰›ã€‚ä½†æœ‰æ—¶å€™æˆ‘ä»¬å†™å‡ºæ¥çš„ä»£ç ï¼Œè·‘èµ·æ¥å´åƒè¸©äº†è„šåˆ¹è½¦ã€‚è¿™æ˜¯ä¸ºå•¥ï¼Ÿå…¶å®ï¼ŒRustç»™ä½ çš„æ³•æ‹‰åˆ©ï¼Œä½ å¯èƒ½åªå½“æˆäº†ä¹°èœè½¦åœ¨å¼€ã€‚æ€§èƒ½è¿™ç©æ„å„¿ï¼Œä¸æ˜¯ç„å­¦ï¼Œè€Œæ˜¯ç§‘å­¦ï¼ˆå’Œä¸€ç‚¹ç‚¹å°æŠ€å·§ï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e6c1e35b051470187dd4403d22d2f41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763717428&amp;x-signature=%2F0ay3p4Tx4ORdciqe%2F4kt3M7QaY%3D" alt="" loading="lazy"/></p>
<p>BUTï¼Œåœ¨å¼€å§‹ä¹‹å‰ï¼Œè°ä¹Ÿä¸æƒ³åœ¨é…ç½®ç¯å¢ƒè¿™ç§ç ´äº‹ä¸Šæµªè´¹ç”Ÿå‘½ï¼Œå¯¹å§ï¼Ÿè£…Rustã€è£…PostgreSQLã€è£…Redisâ€¦â€¦ä¸€å¥—ä¸‹æ¥ï¼ŒåŠå¤©æ²¡äº†ã€‚è¿™é‡Œå°±è¦ç”¨ ServBayï¼Œè¿™æ˜¯å¼€å‘è€…çš„ç¦éŸ³ï¼Œä¸€é”®å°±èƒ½æŠŠ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.servbay.com%2Ffeatures%2Frust" target="_blank" title="https://www.servbay.com/features/rust" ref="nofollow noopener noreferrer">Rustå¼€å‘ç¯å¢ƒ</a>ç»™æå®šäº†ï¼Œè¿å¸¦å„ç§æ•°æ®åº“éƒ½å®‰æ’å¾—æ˜æ˜ç™½ç™½ã€‚å“¥å“¥ä½ æ”¾å¿ƒé£ï¼ŒServBayæ°¸ç›¸éšã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f347da97bce49ceab5534d1873f695c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763717428&amp;x-signature=wecwow2FYQ4iV2p4%2F18%2B3z%2BZ3AM%3D" alt="" loading="lazy"/></p>
<p>å¥½äº†ï¼Œç¯å¢ƒæå®šï¼Œç³»å¥½å®‰å…¨å¸¦ï¼Œæˆ‘ä»¬å‘è½¦ï¼</p>
<h4 data-id="heading-0"><strong>æŠ€å·§ä¸€ï¼šå‡½æ•°å‚æ•°åˆ«è€ç”¨</strong><code>String</code>ï¼Œ<code>&amp;str</code><strong>æ‰æ˜¯ä¸‡é‡‘æ²¹</strong></h4>
<p>è¿™å¯èƒ½æ˜¯æ–°æ‰‹æœ€å®¹æ˜“çŠ¯çš„é”™è¯¯ã€‚çœ‹åˆ°å­—ç¬¦ä¸²ï¼Œä¸‹æ„è¯†å°±ç”¨<code>String</code>ã€‚</p>
<p><strong>åˆ«è¿™ä¹ˆå¹²ï¼š</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// æ¯æ¬¡è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œéƒ½å¯èƒ½å‘ç”Ÿä¸€æ¬¡å†…å­˜æ‹·è´ï¼ŒæŠŠæ‰€æœ‰æƒäº¤å‡ºå»</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">welcome_user</span>(name: <span class="hljs-type">String</span>) {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Hello, {}! æ¬¢è¿æ¥åˆ°Rustçš„ä¸–ç•Œï¼"</span>, name);
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">user_name</span> = <span class="hljs-string">"CodeWizard"</span>.<span class="hljs-title function_ invoke__">to_string</span>();
    <span class="hljs-comment">// ä¸ºäº†ä¸å¤±å» user_name çš„æ‰€æœ‰æƒï¼Œä½ ä¸å¾—ä¸å…‹éš†å®ƒ</span>
    <span class="hljs-title function_ invoke__">welcome_user</span>(user_name.<span class="hljs-title function_ invoke__">clone</span>()); 
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ä½ çš„ç”¨æˆ·åæ˜¯: {}"</span>, user_name); <span class="hljs-comment">// å¦‚æœä¸cloneï¼Œè¿™é‡Œå°±ç¼–è¯‘ä¸è¿‡äº†</span>
}
</code></pre>
<p><strong>è¯•è¯•è¿™ä¸ªï¼š</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// ä½¿ç”¨ &amp;strï¼Œæˆ‘ä»¬åªæ˜¯å€Ÿç”¨äº†æ•°æ®ï¼Œä¸æ¶‰åŠæ‰€æœ‰æƒè½¬ç§»</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">welcome_user</span>(name: &amp;<span class="hljs-type">str</span>) {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Hello, {}! æ¬¢è¿æ¥åˆ°Rustçš„ä¸–ç•Œï¼"</span>, name);
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">user_name</span> = <span class="hljs-string">"CodeWizard"</span>.<span class="hljs-title function_ invoke__">to_string</span>();
    <span class="hljs-title function_ invoke__">welcome_user</span>(&amp;user_name); <span class="hljs-comment">// è½»æ¾å€Ÿç”¨</span>
    <span class="hljs-title function_ invoke__">welcome_user</span>(<span class="hljs-string">"Newbie"</span>); <span class="hljs-comment">// å­—ç¬¦ä¸²å­—é¢é‡ä¹Ÿå®Œå…¨æ²¡é—®é¢˜</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ä½ çš„ç”¨æˆ·åæ˜¯: {}"</span>, user_name); <span class="hljs-comment">// user_name è¿˜åœ¨ï¼Œå•¥äº‹æ²¡æœ‰</span>
}
</code></pre>
<p><strong>ä¸ºå•¥å‘¢ï¼Ÿ</strong> <code>String</code>æ˜¯åŠ¨æ€çš„ã€æ‹¥æœ‰æ‰€æœ‰æƒçš„å­—ç¬¦ä¸²ï¼ŒæŠŠå®ƒä½œä¸ºå‚æ•°ä¼ é€’ï¼Œè¦ä¹ˆæ‰€æœ‰æƒè¢«ç§»èµ°ï¼ˆåŸæ¥çš„å˜é‡ä¸èƒ½å†ç”¨ï¼‰ï¼Œè¦ä¹ˆä½ å°±å¾—<code>clone()</code>ä¸€ä»½ï¼Œè¿™å¯æ˜¯å®æ‰“å®çš„å†…å­˜åˆ†é…å’Œæ‹·è´ï¼Œå¼€é”€ä¸å°ã€‚è€Œ<code>&amp;str</code>ï¼ˆå­—ç¬¦ä¸²åˆ‡ç‰‡ï¼‰åªæ˜¯ä¸€ä¸ªâ€œå¼•ç”¨â€ï¼Œä¸€ä¸ªæŒ‡å‘æ•°æ®æŸéƒ¨åˆ†çš„â€œæŒ‡é’ˆ+é•¿åº¦â€ç»„åˆï¼Œä¼ é€’å®ƒå°±è·Ÿé€’å¼ åç‰‡ä¸€æ ·è½»å·§ï¼Œä¸äº§ç”Ÿä»»ä½•æ•°æ®æ‹·è´ã€‚</p>
<h4 data-id="heading-1"><strong>æŠ€å·§äºŒï¼šæ•°æ®å…±äº«ï¼Ÿåˆ«å‚»å‚»åœ°</strong><code>clone()</code>ï¼Œè¯·ç”¨**<code>Arc</code>**</h4>
<p>å½“å¤šä¸ªçº¿ç¨‹æˆ–å¤šä¸ªæ•°æ®ç»“æ„éœ€è¦è®¿é—®åŒä¸€ä»½å¤§æ•°æ®æ—¶ï¼Œæ¯”å¦‚ä¸€ä¸ªå…±äº«çš„é…ç½®ä¿¡æ¯ï¼Œæ— è„‘<code>clone()</code>ä¼šä»˜å‡ºæ²‰é‡çš„ä»£ä»·ã€‚</p>
<p><strong>åˆ«è¿™ä¹ˆå¹²ï¼š</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::thread;

<span class="hljs-meta">#[derive(Clone)]</span> <span class="hljs-comment">// ä¸ºäº†èƒ½åœ¨çº¿ç¨‹é—´ä¼ é€’ï¼Œä¸å¾—ä¸åŠ ä¸ŠClone</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">AppConfig</span> {
    api_key: <span class="hljs-type">String</span>,
    timeout: <span class="hljs-type">u32</span>,
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">config</span> = AppConfig {
        api_key: <span class="hljs-string">"a_very_long_and_secret_api_key"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
        timeout: <span class="hljs-number">5000</span>,
    };

    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">handles</span> = <span class="hljs-built_in">vec!</span>[];
    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">5</span> {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">thread_config</span> = config.<span class="hljs-title function_ invoke__">clone</span>(); <span class="hljs-comment">// æ¯æ¬¡éƒ½æ·±åº¦æ‹·è´æ•´ä¸ªç»“æ„ä½“</span>
        handles.<span class="hljs-title function_ invoke__">push</span>(thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> || {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"çº¿ç¨‹ {} ä½¿ç”¨çš„ API Key æ˜¯: {}"</span>, i, thread_config.api_key);
        }));
    }

    <span class="hljs-keyword">for</span> <span class="hljs-variable">handle</span> <span class="hljs-keyword">in</span> handles {
        handle.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    }
}
</code></pre>
<p><strong>è¯•è¯•è¿™ä¸ªï¼š</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::sync::Arc;
<span class="hljs-keyword">use</span> std::thread;

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">AppConfig</span> {
    api_key: <span class="hljs-type">String</span>,
    timeout: <span class="hljs-type">u32</span>,
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-comment">// Arcæ˜¯â€œåŸå­å¼•ç”¨è®¡æ•°â€æ™ºèƒ½æŒ‡é’ˆï¼Œå¯ä»¥å®‰å…¨åœ°åœ¨çº¿ç¨‹é—´å…±äº«æ•°æ®</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">config</span> = Arc::<span class="hljs-title function_ invoke__">new</span>(AppConfig {
        api_key: <span class="hljs-string">"a_very_long_and_secret_api_key"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
        timeout: <span class="hljs-number">5000</span>,
    });

    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">handles</span> = <span class="hljs-built_in">vec!</span>[];
    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">5</span> {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">thread_config</span> = Arc::<span class="hljs-title function_ invoke__">clone</span>(&amp;config); <span class="hljs-comment">// è¿™ä¸æ˜¯æ•°æ®æ‹·è´ï¼åªæ˜¯å¢åŠ å¼•ç”¨è®¡æ•°ï¼Œéå¸¸å¿«</span>
        handles.<span class="hljs-title function_ invoke__">push</span>(thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> || {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"çº¿ç¨‹ {} ä½¿ç”¨çš„ API Key æ˜¯: {}"</span>, i, thread_config.api_key);
        }));
    }

    <span class="hljs-keyword">for</span> <span class="hljs-variable">handle</span> <span class="hljs-keyword">in</span> handles {
        handle.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    }
}
</code></pre>
<p><strong>ä¸ºå•¥å‘¢ï¼Ÿ</strong> <code>Arc::clone()</code>åšçš„ä¸æ˜¯å¤åˆ¶æ•°æ®æœ¬ä½“ï¼Œå®ƒåªæ˜¯æŠŠä¸€ä¸ªè®°å½•â€œæœ‰å¤šå°‘äººæ­£åœ¨å¼•ç”¨è¿™ä»½æ•°æ®â€çš„è®¡æ•°å™¨åŠ ä¸€ã€‚è¿™ä¸ªæ“ä½œéå¸¸è½»é‡ï¼Œå‡ ä¹æ²¡æœ‰æˆæœ¬ã€‚åªæœ‰å½“æœ€åä¸€ä¸ªå¼•ç”¨æ¶ˆå¤±æ—¶ï¼Œæ•°æ®æ‰ä¼šè¢«çœŸæ­£æ¸…ç†ã€‚é¢å¯¹å¤šçº¿ç¨‹å…±äº«åªè¯»æ•°æ®çš„åœºæ™¯ï¼Œ<code>Arc</code>å°±æ˜¯ä¸äºŒä¹‹é€‰ã€‚</p>
<h4 data-id="heading-2"><strong>æŠ€å·§ä¸‰ï¼š</strong> <strong>è¿­ä»£å™¨</strong> <strong>å¤§æ³•å¥½ï¼Œå‘Šåˆ«Cé£æ ¼çš„ç´¢å¼•å¾ªç¯</strong></h4>
<p>è¿˜åœ¨ç”¨<code>for i in 0..vec.len()</code>ï¼Ÿé‚£å¯å°±é”™è¿‡äº†Rustç¼–è¯‘å™¨ç»™å‡†å¤‡çš„å…è´¹åˆé¤ã€‚</p>
<p><strong>åˆ«è¿™ä¹ˆå¹²ï¼š</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">numbers</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>];
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">sum_of_squares</span> = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..numbers.<span class="hljs-title function_ invoke__">len</span>() {
        <span class="hljs-comment">// æ¯æ¬¡è®¿é—® numbers[i]ï¼Œç¼–è¯‘å™¨éƒ½ä¼šæ’å…¥ä¸€ä¸ªè¾¹ç•Œæ£€æŸ¥ï¼Œä»¥é˜²ä½ è¶Šç•Œ</span>
        <span class="hljs-keyword">if</span> numbers[i] % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> {
            sum_of_squares += numbers[i] * numbers[i];
        }
    }
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å¶æ•°çš„å¹³æ–¹å’Œæ˜¯: {}"</span>, sum_of_squares);
}
</code></pre>
<p><strong>è¯•è¯•è¿™ä¸ªï¼š</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">numbers</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>];
    <span class="hljs-comment">// è¿­ä»£å™¨æ˜¯æƒ°æ€§çš„ï¼Œå¹¶ä¸”é“¾å¼è°ƒç”¨ä¼šè¢«ç¼–è¯‘å™¨ä¼˜åŒ–æˆä¸€ä¸ªé«˜æ•ˆçš„å¾ªç¯</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">sum_of_squares</span>: <span class="hljs-type">i32</span> = numbers
        .<span class="hljs-title function_ invoke__">iter</span>()                <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨</span>
        .<span class="hljs-title function_ invoke__">filter</span>(|&amp;&amp;n| n % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>) <span class="hljs-comment">// ç­›é€‰å‡ºå¶æ•°</span>
        .<span class="hljs-title function_ invoke__">map</span>(|&amp;n| n * n)       <span class="hljs-comment">// è®¡ç®—å¹³æ–¹</span>
        .<span class="hljs-title function_ invoke__">sum</span>();                <span class="hljs-comment">// æ±‚å’Œ</span>

    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å¶æ•°çš„å¹³æ–¹å’Œæ˜¯: {}"</span>, sum_of_squares);
}
</code></pre>
<p><strong>ä¸ºå•¥å‘¢ï¼Ÿ</strong> Rustçš„è¿­ä»£å™¨æ˜¯é›¶æˆæœ¬æŠ½è±¡ã€‚å†™çš„é“¾å¼è°ƒç”¨ï¼Œåœ¨ç¼–è¯‘åä¼šè¢«èåˆæˆä¸€ä¸ªæ‰‹å†™çš„ã€æå…¶é«˜æ•ˆçš„å¾ªç¯ï¼Œè€Œä¸”ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®šè®¿é—®ä¸ä¼šè¶Šç•Œï¼Œä»è€Œå»æ‰äº†è¿è¡Œæ—¶çš„è¾¹ç•Œæ£€æŸ¥ã€‚æ—¢å®‰å…¨ï¼Œåˆé«˜æ•ˆï¼Œä»£ç è¿˜æ›´æ¸…æ™°ï¼Œä½•ä¹è€Œä¸ä¸ºï¼Ÿ</p>
<h4 data-id="heading-3"><strong>æŠ€å·§å››ï¼š</strong> <strong>æ³›å‹</strong> <strong>ä¼˜äºåŠ¨æ€åˆ†å‘ï¼ˆ</strong> <code>Box&lt;dyn Trait&gt;</code> <strong>ï¼‰</strong></h4>
<p>å½“ä»£ç éœ€è¦å¤„ç†å¤šç§ä¸åŒç±»å‹ï¼Œä½†å®ƒä»¬éƒ½å®ç°äº†åŒä¸€ä¸ª<code>Trait</code>æ—¶ï¼Œè¿™æ—¶å€™ä¼šæœ‰ä¸¤ç§é€‰æ‹©ï¼šé™æ€åˆ†å‘ï¼ˆæ³›å‹ï¼‰å’ŒåŠ¨æ€åˆ†å‘ï¼ˆTraitå¯¹è±¡ï¼‰ã€‚åœ¨æ€§èƒ½æ•æ„Ÿçš„è·¯å¾„ä¸Šï¼Œè¯·é€‰æ‹©å‰è€…ã€‚</p>
<p><strong>åˆ«è¿™ä¹ˆå¹²ï¼ˆåŠ¨æ€åˆ†å‘ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Sound</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">make_sound</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;
}

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Dog</span>;
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Sound</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Dog</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">make_sound</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> { <span class="hljs-string">"æ±ªæ±ª!"</span>.<span class="hljs-title function_ invoke__">to_string</span>() }
}

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Cat</span>;
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Sound</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Cat</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">make_sound</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> { <span class="hljs-string">"å–µ~"</span>.<span class="hljs-title function_ invoke__">to_string</span>() }
}

<span class="hljs-comment">// ä½¿ç”¨Box&lt;dyn Trait&gt;ï¼Œè¿è¡Œæ—¶éœ€è¦é€šè¿‡è™šå‡½æ•°è¡¨(vtable)æŸ¥æ‰¾å…·ä½“è°ƒç”¨å“ªä¸ªæ–¹æ³•</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">trigger_sound</span>(animal: <span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> Sound&gt;) {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, animal.<span class="hljs-title function_ invoke__">make_sound</span>());
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-title function_ invoke__">trigger_sound</span>(<span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(Dog));
    <span class="hljs-title function_ invoke__">trigger_sound</span>(<span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(Cat));
}
</code></pre>
<p><strong>è¯•è¯•è¿™ä¸ªï¼ˆé™æ€åˆ†å‘ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Sound</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">make_sound</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;
}

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Dog</span>;
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Sound</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Dog</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">make_sound</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> { <span class="hljs-string">"æ±ªæ±ª!"</span>.<span class="hljs-title function_ invoke__">to_string</span>() }
}

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Cat</span>;
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Sound</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Cat</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">make_sound</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> { <span class="hljs-string">"å–µ~"</span>.<span class="hljs-title function_ invoke__">to_string</span>() }
}

<span class="hljs-comment">// ä½¿ç”¨æ³›å‹ï¼Œç¼–è¯‘å™¨ä¼šä¸ºæ¯ç§ç±»å‹ç”Ÿæˆä¸€ä¸ªä¸“é—¨çš„ç‰ˆæœ¬ï¼Œæ²¡æœ‰è¿è¡Œæ—¶å¼€é”€</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">trigger_sound</span>&lt;T: Sound&gt;(animal: T) {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, animal.<span class="hljs-title function_ invoke__">make_sound</span>());
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-title function_ invoke__">trigger_sound</span>(Dog);
    <span class="hljs-title function_ invoke__">trigger_sound</span>(Cat);
}
</code></pre>
<p><strong>ä¸ºå•¥å‘¢ï¼Ÿ</strong> åŠ¨æ€åˆ†å‘<code>Box&lt;dyn Trait&gt;</code>éœ€è¦åœ¨è¿è¡Œæ—¶æŸ¥æ‰¾ä¸€ä¸ªå«åšâ€œè™šè¡¨â€çš„ä¸œè¥¿æ¥ç¡®å®šåˆ°åº•è¯¥è°ƒç”¨å“ªä¸ªå…·ä½“å®ç°çš„æ–¹æ³•ï¼Œè¿™ä¼šå¸¦æ¥é¢å¤–çš„æŒ‡é’ˆé—´æ¥å¼•ç”¨å’ŒæŸ¥æ‰¾å¼€é”€ã€‚è€Œæ³›å‹ï¼Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶å°±çŸ¥é“è¦ç”¨<code>Dog</code>è¿˜æ˜¯<code>Cat</code>ï¼Œå®ƒä¼šç›´æ¥ç”Ÿæˆä¸¤ä¸ªä¸åŒç‰ˆæœ¬çš„<code>trigger_sound</code>å‡½æ•°ï¼Œä¸€ä¸ªç»™<code>Dog</code>ï¼Œä¸€ä¸ªç»™<code>Cat</code>ï¼Œè°ƒç”¨æ—¶ç›´æ¥å°±æ˜¯å‡½æ•°åœ°å€ï¼Œæ²¡æœ‰ä»»ä½•è¿è¡Œæ—¶å¼€é”€ã€‚è¿™ç§æŠ€æœ¯ä¹Ÿå«å•æ€åŒ–ã€‚</p>
<h4 data-id="heading-4"><strong>æŠ€å·§äº”ï¼šç»™å°å‡½æ•°æˆ´ä¸Š</strong><code>#[inline]</code><strong>çš„å¸½å­</strong></h4>
<p>å¯¹äºé‚£äº›åˆå°åˆè¢«é¢‘ç¹è°ƒç”¨çš„å‡½æ•°ï¼Œå‡½æ•°è°ƒç”¨æœ¬èº«çš„å¼€é”€ï¼ˆæ¯”å¦‚å»ºç«‹æ ˆå¸§ï¼‰å¯èƒ½æ¯”å‡½æ•°ä½“æ‰§è¡Œçš„å¼€é”€è¿˜å¤§ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ªéå¸¸å°çš„è¾…åŠ©å‡½æ•°</span>
<span class="hljs-meta">#[inline]</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">is_positive</span>(n: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span> {
    n &gt; <span class="hljs-number">0</span>
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">count_positives</span>(numbers: &amp;[<span class="hljs-type">i32</span>]) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">usize</span> {
    numbers.<span class="hljs-title function_ invoke__">iter</span>().<span class="hljs-title function_ invoke__">filter</span>(|&amp;&amp;n| <span class="hljs-title function_ invoke__">is_positive</span>(n)).<span class="hljs-title function_ invoke__">count</span>()
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">data</span> = <span class="hljs-built_in">vec!</span>[-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, -<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ­£æ•°çš„ä¸ªæ•°: {}"</span>, <span class="hljs-title function_ invoke__">count_positives</span>(&amp;data));
}
</code></pre>
<p><strong>ä¸ºå•¥å‘¢ï¼Ÿ</strong> <code>#[inline]</code>åƒæ˜¯ä¸€ä¸ªç»™ç¼–è¯‘å™¨çš„å»ºè®®ï¼Œå‘Šè¯‰å®ƒï¼šâ€œå“¥ä»¬ï¼ŒæŠŠè¿™ä¸ªå‡½æ•°çš„ä»£ç ç›´æ¥å¤åˆ¶ç²˜è´´åˆ°è°ƒç”¨å®ƒçš„åœ°æ–¹å§ï¼Œåˆ«èµ°å‡½æ•°è°ƒç”¨æµç¨‹äº†ã€‚â€ è¿™æ ·å°±æ¶ˆé™¤äº†å‡½æ•°è°ƒç”¨çš„å¼€é”€ã€‚å½“ç„¶ï¼Œåˆ«æ»¥ç”¨ï¼Œç»™ä¸€ä¸ªå·¨å¤§çš„å‡½æ•°åŠ ä¸Š<code>#[inline]</code>åªä¼šè®©æœ€ç»ˆç¨‹åºä½“ç§¯è†¨èƒ€ï¼Œå¾—ä¸å¿å¤±ã€‚</p>
<h4 data-id="heading-5"><strong>æŠ€å·§å…­ï¼šæ ˆä¸Šåˆ†é…æ°¸è¿œæ¯”å †ä¸Šå¿«</strong></h4>
<p>èƒ½æ”¾åœ¨æ ˆä¸Šçš„æ•°æ®ï¼Œå°±åˆ«å¾€å †ä¸Šæ‰”ã€‚æ ˆåˆ†é…å°±æ˜¯ç§»åŠ¨ä¸€ä¸‹æ ˆæŒ‡é’ˆï¼Œå¿«å¦‚é—ªç”µï¼›å †åˆ†é…åˆ™éœ€è¦å»ä»“åº“ï¼ˆå †ï¼‰é‡Œæ‰¾ä¸€å—åˆé€‚çš„ç©ºåœ°ï¼Œè¦æ…¢å¾—å¤šã€‚</p>
<p><strong>åˆ«è¿™ä¹ˆå¹²ï¼š</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span> {
    x: <span class="hljs-type">f64</span>,
    y: <span class="hljs-type">f64</span>,
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-comment">// Box::newä¼šæŠŠæ•°æ®åˆ†é…åœ¨å †ä¸Š</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">p1</span> = <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(Point { x: <span class="hljs-number">1.0</span>, y: <span class="hljs-number">2.0</span> });
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å †ä¸Šçš„ç‚¹: ({}, {})"</span>, p1.x, p1.y);
}
</code></pre>
<p><strong>è¯•è¯•è¿™ä¸ªï¼š</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span> {
    x: <span class="hljs-type">f64</span>,
    y: <span class="hljs-type">f64</span>,
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-comment">// é»˜è®¤æƒ…å†µä¸‹ï¼Œå˜é‡æ˜¯åˆ†é…åœ¨æ ˆä¸Šçš„</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">p1</span> = Point { x: <span class="hljs-number">1.0</span>, y: <span class="hljs-number">2.0</span> };
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ ˆä¸Šçš„ç‚¹: ({}, {})"</span>, p1.x, p1.y);
}
</code></pre>
<p>è¿™ä¸ªæŠ€å·§çœ‹èµ·æ¥éå¸¸ç®€å•ï¼Œä½†å…¶æ ¸å¿ƒæ˜¯å½“ä¸éœ€è¦åœ¨å‡½æ•°è¿”å›åæ•°æ®ä»ç„¶å­˜æ´»ï¼Œæˆ–è€…æ•°æ®å¤§å°åœ¨ç¼–è¯‘æœŸå°±ç¡®å®šæ—¶ï¼Œä¼˜å…ˆä½¿ç”¨æ ˆã€‚<code>Box</code>ã€<code>String</code>ã€<code>Vec</code>è¿™ç±»éƒ½æ˜¯åœ¨å †ä¸Šåˆ†é…çš„ï¼Œä½¿ç”¨æ—¶è¦å¿ƒé‡Œæœ‰æ•°ã€‚</p>
<h4 data-id="heading-6"><strong>æŠ€å·§ä¸ƒï¼š</strong> <code>MaybeUninit</code> <strong>ï¼šå¤§</strong> <strong>å†…å­˜</strong> <strong>åˆå§‹åŒ–æ—¶å¼€æŒ‚äº†</strong></h4>
<p>å¦‚æœéœ€è¦ä¸€å—éå¸¸å¤§çš„å†…å­˜ï¼Œå¹¶ä¸”ç¡®å®šé©¬ä¸Šä¼šç”¨è‡ªå·±çš„æ•°æ®æŠŠå®ƒå¡«æ»¡æ—¶ï¼Œè®©Rustå…ˆç”¨0åˆå§‹åŒ–ä¸€éçš„è¯ï¼Œçº¯å±æµªè´¹CPUã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªé«˜çº§æŠ€å·§ï¼Œéœ€è¦ä½¿ç”¨<code>unsafe</code>ï¼Œæ–°æ‰‹æ…ç”¨ï¼</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::mem::MaybeUninit;

<span class="hljs-keyword">const</span> BUFFER_SIZE: <span class="hljs-type">usize</span> = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>; <span class="hljs-comment">// 1MB</span>

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªVecï¼Œä½†å‘Šè¯‰Rustï¼šâ€œå…ˆåˆ«åˆå§‹åŒ–è¿™å—å†…å­˜ï¼Œæˆ‘å¾…ä¼šå„¿è‡ªå·±å¼„â€</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">buffer</span>: <span class="hljs-type">Vec</span>&lt;MaybeUninit&lt;<span class="hljs-type">u8</span>&gt;&gt; = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">with_capacity</span>(BUFFER_SIZE);

    <span class="hljs-comment">// å‡è®¾æˆ‘ä»¬ä»æŸä¸ªåœ°æ–¹è¯»å–æ•°æ®å¡«æ»¡äº†è¿™å—ç¼“å†²åŒº</span>
    <span class="hljs-comment">// è¿™é‡Œæˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„å¾ªç¯æ¨¡æ‹Ÿ</span>
    <span class="hljs-comment">// æ³¨æ„ï¼šåœ¨çœŸå®åœºæ™¯ä¸­ï¼Œä½ ä¼šç”¨ç±»ä¼¼ read_exact çš„æ–¹æ³•å¡«å……</span>
    <span class="hljs-keyword">unsafe</span> {
        <span class="hljs-comment">// ä¼ªè£…æˆå·²ç»åˆå§‹åŒ–äº†ï¼Œå› ä¸ºæˆ‘ä»¬ç¡®ä¿¡ä¸‹é¢çš„ä»£ç ä¼šå®Œæˆåˆå§‹åŒ–</span>
        buffer.<span class="hljs-title function_ invoke__">set_len</span>(BUFFER_SIZE); 
        <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..BUFFER_SIZE {
            <span class="hljs-comment">// get_mut_uncheckedæ˜¯`unsafe`çš„ï¼Œä½†æˆ‘ä»¬çŸ¥é“ç´¢å¼•æ˜¯åˆæ³•çš„</span>
            *buffer.<span class="hljs-title function_ invoke__">get_mut_unchecked</span>(i) = MaybeUninit::<span class="hljs-title function_ invoke__">new</span>((i % <span class="hljs-number">256</span>) <span class="hljs-keyword">as</span> <span class="hljs-type">u8</span>);
        }
    }

    <span class="hljs-comment">// ç°åœ¨ï¼Œæˆ‘ä»¬ç¡®ä¿¡å†…å­˜å·²ç»å®Œå…¨åˆå§‹åŒ–ï¼Œå¯ä»¥å®‰å…¨åœ°æŠŠå®ƒè½¬æ¢æˆ Vec&lt;u8&gt;</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">buffer</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">u8</span>&gt; = <span class="hljs-keyword">unsafe</span> {
        <span class="hljs-comment">// è¿™æ­¥è½¬æ¢æ˜¯é›¶æˆæœ¬çš„ï¼Œå› ä¸ºå†…å­˜å¸ƒå±€å®Œå…¨ä¸€æ ·</span>
        std::mem::<span class="hljs-title function_ invoke__">transmute</span>(buffer)
    };

    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ç¼“å†²åŒºåˆ›å»ºå¹¶å¡«å……å®Œæ¯•ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯: {}"</span>, buffer[<span class="hljs-number">0</span>]);
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æœ€åä¸€ä¸ªå…ƒç´ æ˜¯: {}"</span>, buffer[BUFFER_SIZE - <span class="hljs-number">1</span>]);
}
</code></pre>
<p><strong>ä¸ºå•¥å‘¢ï¼Ÿ</strong> <code>Vec::with_capacity</code>åªåˆ†é…å†…å­˜ï¼Œä¸åˆå§‹åŒ–ã€‚ä½†å¦‚æœä½ æ¥ç€ç”¨<code>resize</code>æˆ–è€…å…¶ä»–å®‰å…¨çš„æ–¹æ³•ï¼Œå®ƒè¿˜æ˜¯ä¼šå¸®ä½ åˆå§‹åŒ–ã€‚<code>MaybeUninit</code>å…è®¸ä½ è·³è¿‡è¿™ä¸ªé»˜è®¤çš„åˆå§‹åŒ–æ­¥éª¤ï¼Œç›´æ¥æ“ä½œæœªåˆå§‹åŒ–çš„å†…å­˜ï¼Œå¯¹äºé«˜æ€§èƒ½ç½‘ç»œç¼–ç¨‹ã€æ•°æ®è§£æç­‰åœºæ™¯ï¼Œèƒ½çœä¸‹å¯è§‚çš„æ—¶é—´ã€‚ä½†è®°ä½ï¼Œ<code>unsafe</code>æ„å‘³ç€ä½ å¾—è‡ªå·±å¯¹å†…å­˜å®‰å…¨è´Ÿè´£ï¼</p>
<h3 data-id="heading-7"><strong>æ€»ç»“ä¸€ä¸‹</strong></h3>
<p>Rustæ€§èƒ½è°ƒä¼˜çš„æ ¸å¿ƒæ€æƒ³æ— éå‡ ç‚¹ï¼š</p>
<ul>
<li>
<p><strong>å‡å°‘</strong> <strong>å†…å­˜</strong> <strong>åˆ†é…å’Œæ‹·è´</strong>ï¼šå¤šç”¨å€Ÿç”¨ï¼ˆ<code>&amp;</code>ï¼‰ï¼Œå–„ç”¨æ™ºèƒ½æŒ‡é’ˆï¼ˆ<code>Arc</code>ï¼‰ã€‚</p>
</li>
<li>
<p><strong>è®©ç¼–è¯‘å™¨å¸®ä½ å¹²æ´»</strong>ï¼šå¤šç”¨è¿­ä»£å™¨ï¼Œå¤šç”¨æ³›å‹ã€‚</p>
</li>
<li>
<p><strong>ç†è§£</strong> <strong>å†…å­˜</strong> <strong>å¸ƒå±€</strong>ï¼šåŒºåˆ†æ ˆå’Œå †ï¼ŒçŸ¥é“ä»€ä¹ˆæ—¶å€™è¯¥ç”¨è°ã€‚</p>
</li>
</ul>
<p>å½“ç„¶ï¼Œä¼˜åŒ–è¦è®²ç©¶ç« æ³•ï¼Œä¸è¦ä¸Šæ¥å°±å¯¹ç€è´´è„¸ä»£ç å¼€å¤§ã€‚å…ˆç”¨æ€§èƒ½åˆ†æå·¥å…·ï¼ˆæ¯”å¦‚<code>cargo-flamegraph</code>ï¼‰æ‰¾åˆ°é—®é¢˜åœ¨å“ªï¼Œå†å¯¹ç—‡ä¸‹è¯ã€‚</p>
<p>æœ€åï¼Œåˆ«å¿˜äº†ï¼Œä¸€ä¸ªé¡ºæ‰‹çš„å¼€å‘ç¯å¢ƒæ˜¯é«˜æ•ˆå·¥ä½œçš„å¼€å§‹ã€‚ServBay æå®šç¹ççš„é…ç½®ï¼Œå¼€å‘è€…å°±èƒ½æŠŠå…¨éƒ¨ç²¾åŠ›æŠ•å…¥åˆ°ç¼–å†™ä¼˜é›…ä¸”é«˜æ€§èƒ½çš„Rustä»£ç ä¸­ã€‚ç°åœ¨ï¼Œå»æŠŠä½ çš„ä¹°èœè½¦è°ƒæ•™æˆä¸€è¾†çœŸæ­£çš„æ³•æ‹‰åˆ©å§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ•‘å‘½ï¼è¿™ä¸ªä½ä»£ç å·¥å…·å¤ªé¦™äº† â€”â€”TinyEngine ç‰©æ–™è‡ªåŠ¨å¯¼å…¥ä¸Šæ‰‹]]></title>    <link>https://juejin.cn/post/7572340344509169690</link>    <guid>https://juejin.cn/post/7572340344509169690</guid>    <pubDate>2025-11-14T08:52:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572340344509169690" data-draft-id="7572387068313272347" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ•‘å‘½ï¼è¿™ä¸ªä½ä»£ç å·¥å…·å¤ªé¦™äº† â€”â€”TinyEngine ç‰©æ–™è‡ªåŠ¨å¯¼å…¥ä¸Šæ‰‹"/> <meta itemprop="keywords" content="å‰ç«¯,ä½ä»£ç ,GitHub"/> <meta itemprop="datePublished" content="2025-11-14T08:52:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OpenTinyç¤¾åŒº"/> <meta itemprop="url" content="https://juejin.cn/user/3808325101432983"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ•‘å‘½ï¼è¿™ä¸ªä½ä»£ç å·¥å…·å¤ªé¦™äº† â€”â€”TinyEngine ç‰©æ–™è‡ªåŠ¨å¯¼å…¥ä¸Šæ‰‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808325101432983/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OpenTinyç¤¾åŒº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T08:52:53.000Z" title="Fri Nov 14 2025 08:52:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    25
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡ç”±TinyEngineä½ä»£ç ç‰©æ–™å¯¼å…¥åŠŸèƒ½è´¡çŒ®è€…å¼ ç­ åŒå­¦åŸåˆ›ã€‚</p>
<h2 data-id="heading-0">å¼•è¨€ï¼šä½ä»£ç ç‰©æ–™æ¥å…¥çš„ç—›ç‚¹ä¸è§£å†³æ–¹æ¡ˆ</h2>
<p>åœ¨ä½ä»£ç å¹³å°å¼€å‘ä¸­ï¼Œç‰©æ–™æ¥å…¥æ˜¯æ ¸å¿ƒç¯èŠ‚ä¹‹ä¸€ã€‚ä¼ ç»Ÿç‰©æ–™æ¥å…¥ä¾èµ–å¼€å‘è€…æ‰‹åŠ¨ç¼–å†™ç¬¦åˆå¹³å°åè®®çš„ JSON é…ç½®ï¼Œä¸ä»…æ•ˆç‡ä½ä¸‹ï¼Œè¿˜å®¹æ˜“å› äººä¸ºå¤±è¯¯å¯¼è‡´å…¼å®¹æ€§é—®é¢˜ â€”â€” å°¤å…¶æ˜¯é¢å¯¹æµ·é‡ UI ç»„ä»¶æ—¶ï¼Œé‡å¤çš„äººå·¥æ“ä½œä¼šå¤§å¹…æ‹–æ…¢å¼€å‘è¿›åº¦ã€‚</p>
<p>ä¸ºè§£å†³è¿™ä¸€ç—›ç‚¹ï¼Œæˆ‘ä»¬å¼€å‘äº†Â <strong>TinyEngine ä½ä»£ç ç‰©æ–™è‡ªåŠ¨å¯¼å…¥å·¥å…·</strong>ï¼Œæ”¯æŒé€šè¿‡ URL çˆ¬å–ã€NPM åŒ…è§£æã€æºç ä¸Šä¼ ä¸‰ç§æ–¹å¼ï¼Œè‡ªåŠ¨æå–ç»„ä»¶çš„ Props/Events/Slots ç­‰ API ä¿¡æ¯ï¼Œå¹¶è½¬æ¢ä¸ºç¬¦åˆ TinyEngine åè®®çš„æ ‡å‡†ç‰©æ–™æ ¼å¼ã€‚é…å¥—çš„å¯è§†åŒ–å‰ç«¯å®ç°äº† "å¯¼å…¥ - é¢„è§ˆ - ç¼–è¾‘ - ä¿å­˜" å…¨æµç¨‹é—­ç¯ï¼Œå°†ç‰©æ–™æ¥å…¥æ•ˆç‡å¤§å¹…åº¦æå‡ã€‚</p>
<p>æœ¬æ–‡å°†ä»é¡¹ç›®è®¾è®¡ã€æ ¸å¿ƒæ¨¡å—å®ç°ã€é¡¹ç›®éƒ¨ç½²ä¸ä½¿ç”¨æŒ‡å—ç­‰æ–¹é¢ï¼Œå¸¦å¤§å®¶å…¨é¢äº†è§£è¿™ä¸ªå‰åç«¯ä¸€ä½“åŒ–çš„ç‰©æ–™å¤„ç†æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-1">ä¸€ã€é¡¹ç›®æ¦‚è§ˆï¼šæŠ€æœ¯æ ˆä¸æ ¸å¿ƒæ¶æ„</h2>
<h3 data-id="heading-2">1. æŠ€æœ¯æ ˆé€‰å‹</h3>
<h4 data-id="heading-3">åç«¯æŠ€æœ¯æ ˆ</h4>
<ul>
<li>è¿è¡Œç¯å¢ƒï¼šNode.js v20.19.5+ï¼ˆåŸç”Ÿæ”¯æŒ fetch ä¸ ES6 + è¯­æ³•ï¼‰</li>
<li>æ ¸å¿ƒä¾èµ–ï¼šExpressï¼ˆæ¥å£æœåŠ¡ï¼‰ã€MySQLï¼ˆç‰©æ–™å­˜å‚¨ï¼‰ã€Puppeteerï¼ˆURL çˆ¬å–ï¼‰ã€LLM SDKï¼ˆAPI æå–ï¼‰</li>
<li>æ ¸å¿ƒèƒ½åŠ›ï¼šå¤šæºæ•°æ®è§£æã€ç‰©æ–™åè®®è½¬æ¢ã€å¼‚æ­¥ä»»åŠ¡ç®¡ç†</li>
</ul>
<h4 data-id="heading-4">å‰ç«¯æŠ€æœ¯æ ˆ</h4>
<ul>
<li>æ¡†æ¶ï¼šVue 3.2+ï¼ˆ<code>&lt;script setup&gt;</code>è¯­æ³•ï¼‰</li>
<li>æ„å»ºå·¥å…·ï¼šVite 4.0+ï¼ˆé«˜æ•ˆçƒ­æ›´æ–°ä¸è·¨åŸŸä»£ç†ï¼‰</li>
<li>UI ç»„ä»¶ï¼šOpenTiny Vueï¼ˆè½»é‡åŒ–ä¼ä¸šçº§ç»„ä»¶åº“ï¼‰</li>
<li>æ ¸å¿ƒèƒ½åŠ›ï¼šåŠ¨æ€è¡¨å•ã€ä»»åŠ¡è¿›åº¦å¯è§†åŒ–ã€è¡¨æ ¼ç¼–è¾‘ã€æ‰¹é‡æ•°æ®ç®¡ç†</li>
</ul>
<h3 data-id="heading-5">2. æ•´ä½“æ¶æ„è®¾è®¡</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6d431b4a4af456da4a045ae343b2843~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763718186&amp;x-signature=RZjgmjfjRhTYtKLAQURPS0xo2Mk%3D" alt="1.png" loading="lazy"/></p>
<p>é¡¹ç›®é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæ ¸å¿ƒäº¤äº’æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>å‰ç«¯å‘èµ·å¯¼å…¥è¯·æ±‚ï¼ˆæºå¸¦ URL/NPM ä¿¡æ¯ / æºç æ–‡ä»¶ï¼‰ï¼›</li>
<li>åç«¯åˆ›å»ºå¼‚æ­¥ä»»åŠ¡ï¼Œæ ¹æ®å¯¼å…¥ç±»å‹æ‰§è¡Œå¯¹åº”è§£æé€»è¾‘ï¼›</li>
<li>è°ƒç”¨ LLM æ¥å£æå–ç»“æ„åŒ– API ä¿¡æ¯ï¼Œè½¬æ¢ä¸ºæ ‡å‡†ç‰©æ–™æ ¼å¼ï¼›</li>
<li>å‰ç«¯é€šè¿‡è½®è¯¢è·å–ä»»åŠ¡è¿›åº¦ï¼Œå®æ—¶å±•ç¤ºå¤„ç†çŠ¶æ€ï¼›</li>
<li>å¤„ç†å®Œæˆåï¼Œå‰ç«¯æä¾›ç‰©æ–™é¢„è§ˆä¸ç¼–è¾‘åŠŸèƒ½ï¼Œæ”¯æŒä¿å­˜åˆ°æ•°æ®åº“ã€‚</li>
</ol>
<h2 data-id="heading-6">äºŒã€æ ¸å¿ƒåŠŸèƒ½æ‹†è§£ï¼šä»è§£æåˆ°å¯è§†åŒ–</h2>
<h3 data-id="heading-7">1. å¤šæºç‰©æ–™è§£æï¼ˆåç«¯æ ¸å¿ƒèƒ½åŠ›ï¼‰</h3>
<p>ä¾æ‰˜å››å¤§æ ¸å¿ƒæ¨¡å—ååŒå·¥ä½œï¼Œå®ç°URLã€NPMã€æºç ä¸‰ç§å¯¼å…¥æ–¹å¼çš„æ ‡å‡†åŒ–è§£æï¼Œå…¨ç¨‹è‡ªåŠ¨åŒ–å®Œæˆä»åŸå§‹æ•°æ®åˆ°TinyEngineæ ‡å‡†ç‰©æ–™çš„è½¬åŒ–ã€‚</p>
<h4 data-id="heading-8">ï¼ˆ1ï¼‰URL å¯¼å…¥</h4>
<p>åŸºäº <strong>APIç”Ÿæˆæ¨¡å—</strong> çš„URLè¡¨æ ¼é©±åŠ¨æµç¨‹ï¼Œé€šè¿‡Puppeteeræ¨¡æ‹Ÿæµè§ˆå™¨è®¿é—®ç›®æ ‡URLï¼Œæ ¹æ®ç”¨æˆ·æŒ‡å®šçš„CSSé€‰æ‹©å™¨ç²¾å‡†å®šä½APIè¡¨æ ¼æ•°æ®ï¼Œæ­é…é‡è¯•æœºåˆ¶ä¿éšœçˆ¬å–ç¨³å®šæ€§ï¼›è·å–è¡¨æ ¼æ•°æ®åï¼Œä¼ é€’ç»™LLMæ¨¡å‹è¿›è¡Œç»“æ„åŒ–å¤„ç†ï¼Œç”ŸæˆåŒ…å«Props/Events/Slotsçš„åŸå§‹API JSONï¼›éšåç» <strong>ç‰©æ–™è½¬æ¢æ¨¡å—</strong> è½¬åŒ–ä¸ºç¬¦åˆTinyEngineè§„èŒƒçš„ç‰©æ–™æ ¼å¼ï¼Œæœ€åç”± <strong>åå¤„ç†æ¨¡å—</strong> å®Œæˆç»„ä»¶åæ ‡å‡†åŒ–ï¼ˆå¦‚ç»Ÿä¸€ä¸ºPascalCaseæ ¼å¼ï¼‰åŠè§„åˆ™åŒ–ä¼˜åŒ–ï¼Œç¡®ä¿ç‰©æ–™ä¸€è‡´æ€§ã€‚</p>
<h4 data-id="heading-9">ï¼ˆ2ï¼‰NPM å¯¼å…¥</h4>
<p>æ¥æ”¶ç”¨æˆ·è¾“å…¥çš„NPMåŒ…åä¸ç»„ä»¶ååï¼Œåç«¯è‡ªåŠ¨ä¸‹è½½å¯¹åº”åŒ…èµ„æºï¼Œé€šè¿‡ <strong>æ–‡ä»¶ç­›é€‰æ¨¡å—</strong> çš„NPMç±»å‹è§„åˆ™ï¼ˆå¼ºåˆ¶æ ¡éªŒ<code>index</code>å…¥å£æ–‡ä»¶ï¼Œæå–å«ç»„ä»¶å…³é”®è¯çš„æ ¸å¿ƒæ–‡ä»¶ï¼Œè‡ªåŠ¨è·³è¿‡<code>style</code>ã€<code>utils</code>ç­‰éAPIç›¸å…³ç›®å½•åŠ<code>.map</code>æ–‡ä»¶ï¼‰å®Œæˆæ–‡ä»¶ç­›é€‰ï¼›ç­›é€‰åçš„æ ¸å¿ƒæ–‡ä»¶è¿›å…¥ <strong>APIç”Ÿæˆæ¨¡å—</strong> çš„æ–‡ä»¶é©±åŠ¨æµç¨‹ï¼Œç»LLMè§£æç”ŸæˆåŸå§‹API JSONï¼›å†é€šè¿‡ <strong>ç‰©æ–™è½¬æ¢æ¨¡å—</strong> è¡¥å……ç»„ä»¶åŸºæœ¬ä¿¡æ¯ã€è§„èŒƒProps/Events/Slotså®šä¹‰ï¼Œæœ€ç»ˆç”± <strong>åå¤„ç†æ¨¡å—</strong> æŒ‰é¢„è®¾è§„åˆ™ä¼˜åŒ–ï¼ˆæ— éœ€å¤„ç†çš„ç»„ä»¶ç›´æ¥ä¿ç•™ã€è¡¨æ ¼ç»„ä»¶åˆå¹¶åˆ—å®šä¹‰ç­‰ï¼‰ï¼Œè¾“å‡ºæ ‡å‡†ç‰©æ–™ã€‚</p>
<h4 data-id="heading-10">ï¼ˆ3ï¼‰æºç å¯¼å…¥</h4>
<p>ç”¨æˆ·å¯ä¸Šä¼ Vueç»„ä»¶æºç æ–‡ä»¶æˆ–ZIPå‹ç¼©åŒ…ï¼Œåç«¯è§£å‹åè§¦å‘ <strong>æ–‡ä»¶ç­›é€‰æ¨¡å—</strong> çš„æºç ç±»å‹å¤„ç†é€»è¾‘â€”â€”è‡ªåŠ¨è¯†åˆ«<code>index.js/ts</code>å…¥å£æ–‡ä»¶åŠProps/Eventså®šä¹‰æ–‡ä»¶ï¼Œè¿‡æ»¤éAPIç›¸å…³å†…å®¹ï¼›ç­›é€‰åçš„æœ‰æ•ˆæ–‡ä»¶è¿›å…¥ <strong>APIç”Ÿæˆæ¨¡å—</strong> æ‰§è¡Œæ–‡ä»¶é©±åŠ¨æµç¨‹ï¼Œç»LLMè§£æç”ŸæˆåŸå§‹API JSONï¼›åç»­é€šè¿‡ <strong>ç‰©æ–™è½¬æ¢æ¨¡å—</strong> è½¬åŒ–ä¸ºTinyEngineæ ‡å‡†æ ¼å¼ï¼Œå†ç”± <strong>åå¤„ç†æ¨¡å—</strong> æ¸…ç†å­é¡¹ç»„ä»¶å†—ä½™ç‰‡æ®µã€ç»Ÿä¸€ç»„ä»¶åæ ¼å¼ï¼Œæœ€ç»ˆç”Ÿæˆå¯ç›´æ¥ä½¿ç”¨çš„æ ‡å‡†åŒ–ç‰©æ–™ã€‚</p>
<h3 data-id="heading-11">2. å¯è§†åŒ–æ“ä½œé—­ç¯ï¼ˆå‰ç«¯æ ¸å¿ƒèƒ½åŠ›ï¼‰</h3>
<h4 data-id="heading-12">ï¼ˆ1ï¼‰åŠ¨æ€å¯¼å…¥è¡¨å•</h4>
<p>æ ¹æ®ç”¨æˆ·é€‰æ‹©çš„å¯¼å…¥ç±»å‹ï¼ˆURL/NPM/ æºç ï¼‰ï¼Œè‡ªåŠ¨åˆ‡æ¢å¯¹åº”è¡¨å•ï¼š</p>
<ul>
<li>URL å¯¼å…¥ï¼šå±•ç¤º URL è¾“å…¥æ¡†ä¸è¡¨æ ¼ CSS é€‰æ‹©å™¨è¾“å…¥æ¡†ï¼›</li>
<li>NPM å¯¼å…¥ï¼šå±•ç¤ºåŒ…åä¸ç»„ä»¶åè¾“å…¥æ¡†ï¼›</li>
<li>æºç å¯¼å…¥ï¼šå±•ç¤ºæ–‡ä»¶ä¸Šä¼ ç»„ä»¶ï¼ˆæ”¯æŒå•ä¸ªæ–‡ä»¶ä¸ ZIP åŒ…ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-13">ï¼ˆ2ï¼‰ä»»åŠ¡è¿›åº¦å¯è§†åŒ–</h4>
<ul>
<li>æäº¤å¯¼å…¥è¯·æ±‚åï¼Œå±•ç¤ºè¿›åº¦æ¡å®æ—¶æ›´æ–°å¤„ç†è¿›åº¦ï¼ˆ0-100%ï¼‰ï¼›</li>
<li>å¤„ç†ä¸­ä»»åŠ¡æ”¯æŒæœ€å°åŒ–ä¸ºå³ä¾§æ‚¬æµ®å¡ç‰‡ï¼Œä¸å½±å“å…¶ä»–æ“ä½œï¼Œç‚¹å‡»å¯é‡æ–°æ‰“å¼€æ¨¡æ€æ¡†æŸ¥çœ‹è¯¦æƒ…ï¼›</li>
<li>ä»»åŠ¡çŠ¶æ€å®æ—¶åé¦ˆï¼ˆå¤„ç†ä¸­ / æˆåŠŸ / å¤±è´¥ï¼‰ï¼Œå¤±è´¥æ—¶æ˜¾ç¤ºå…·ä½“é”™è¯¯ä¿¡æ¯ã€‚</li>
</ul>
<h4 data-id="heading-14">ï¼ˆ3ï¼‰ç‰©æ–™é¢„è§ˆä¸ç¼–è¾‘</h4>
<p>ä»»åŠ¡å¤„ç†æˆåŠŸåï¼Œé€šè¿‡è¡¨æ ¼å±•ç¤ºç”Ÿæˆçš„ç‰©æ–™åˆ—è¡¨ï¼Œæ”¯æŒï¼š</p>
<ul>
<li>ä¸»è¡¨å±•ç¤ºåŸºç¡€ä¿¡æ¯ï¼ˆç»„ä»¶åã€å¯¼å…¥ç±»å‹ã€å¯¼å…¥æ—¶é—´ç­‰ï¼‰ï¼›</li>
<li>å±•å¼€è¡ŒæŸ¥çœ‹å­è¡¨ï¼ˆå±æ€§ / äº‹ä»¶ / æ’æ§½ï¼‰ï¼Œæ”¯æŒç¼–è¾‘å­—æ®µå€¼ã€åˆ é™¤æ— æ•ˆé¡¹ï¼›</li>
<li>ç¼–è¾‘åå®æ—¶æäº¤æ›´æ–°ï¼Œç¡®ä¿æ•°æ®åŒæ­¥åˆ°åç«¯ã€‚</li>
</ul>
<h4 data-id="heading-15">ï¼ˆ4ï¼‰ç‰©æ–™åº“ç®¡ç†</h4>
<p>æä¾›å®Œæ•´çš„ç‰©æ–™ç®¡ç†åŠŸèƒ½ï¼š</p>
<ul>
<li>ç­›é€‰ä¸æœç´¢ï¼šæŒ‰ç»„ä»¶åç²¾ç¡®ç­›é€‰ã€å…³é”®è¯æ¨¡ç³Šæœç´¢ï¼›</li>
<li>æ‰¹é‡æ“ä½œï¼šæ‰¹é‡å¯¼å‡ºé€‰ä¸­ç‰©æ–™ä¸º JSON æ–‡ä»¶ã€æ‰¹é‡åˆ é™¤æ— ç”¨ç‰©æ–™ï¼›</li>
<li>åˆ†é¡µæ§åˆ¶ï¼šé»˜è®¤ 10 æ¡ / é¡µï¼Œæ”¯æŒè‡ªå®šä¹‰æ¯é¡µæ˜¾ç¤ºæ•°é‡ã€‚</li>
</ul>
<h2 data-id="heading-16">ä¸‰ã€é¡¹ç›®éƒ¨ç½²</h2>
<h3 data-id="heading-17">1. ç¯å¢ƒè¦æ±‚</h3>



































<table><thead><tr><th>ç¯å¢ƒ/å·¥å…·</th><th>ç‰ˆæœ¬è¦æ±‚</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Node.js</td><td>v20.19.5 åŠä»¥ä¸Š</td><td>æ”¯æŒ<code>fetch</code>ã€ES6+è¯­æ³•ï¼Œå‰åç«¯é€šç”¨ï¼Œå»ºè®®ä½¿ç”¨å®˜ç½‘é•¿æœŸæ”¯æŒç‰ˆç¡®ä¿å…¼å®¹æ€§</td></tr><tr><td>å‰ç«¯æ¡†æ¶</td><td>Vue 3.2+</td><td>å‰ç«¯é‡‡ç”¨<code>&lt;script setup&gt;</code>è¯­æ³•å¼€å‘ï¼Œéœ€ç¡®ä¿ä¾èµ–ç‰ˆæœ¬ç¬¦åˆè¦æ±‚</td></tr><tr><td>æ„å»ºå·¥å…·</td><td>Vite 4.0+</td><td>è´Ÿè´£å‰ç«¯é¡¹ç›®æ„å»ºã€çƒ­æ›´æ–°åŠè·¨åŸŸä»£ç†é…ç½®ï¼Œå½“å‰é¡¹ç›®å®é™…ä½¿ç”¨v7.1.7ç‰ˆæœ¬</td></tr><tr><td>æ•°æ®åº“</td><td>MySQL 8.0 åŠä»¥ä¸Š</td><td>ç”¨äºå­˜å‚¨ç‰©æ–™æ•°æ®ï¼Œéœ€æå‰æœ¬åœ°å®‰è£…å¹¶å¯åŠ¨</td></tr><tr><td>ä¾èµ–æœåŠ¡</td><td>LLMæ¥å£ï¼ˆå¦‚DeepSeek/Qwen/OpenAIï¼‰</td><td>åç«¯æ ¸å¿ƒä¾èµ–ï¼Œéœ€å‡†å¤‡æ”¯æŒJSONè¾“å‡ºçš„å¤§æ¨¡å‹æ¥å£åŠå¯¹åº”APIå¯†é’¥ã€æ¥å£åœ°å€</td></tr></tbody></table>
<h3 data-id="heading-18">2. å®‰è£…ä¸é…ç½®</h3>
<h4 data-id="heading-19">2.1 å…‹éš†ä»“åº“</h4>
<p>é¦–å…ˆå°†é¡¹ç›®ä»£ç å…‹éš†åˆ°æœ¬åœ°ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> &lt;ä»“åº“åœ°å€&gt;  <span class="hljs-comment"># æ›¿æ¢ä¸ºå®é™…çš„é¡¹ç›®ä»“åº“åœ°å€</span>
</code></pre>
<h4 data-id="heading-20">2.2 å®‰è£…ä¾èµ–</h4>
<p>è¿›å…¥é¡¹ç›®æ ¹ç›®å½•åï¼Œåˆ†åˆ«å®‰è£…åç«¯å’Œå‰ç«¯çš„ä¾èµ–åŒ…ï¼Œç¡®ä¿ç¯å¢ƒä¸€è‡´æ€§ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å®‰è£…åç«¯ä¾èµ–</span>
<span class="hljs-built_in">cd</span> backend
npm install  <span class="hljs-comment"># è‹¥ä½¿ç”¨yarn/pnpmï¼Œå¯æ›¿æ¢ä¸ºyarn install/pnpm install</span>

<span class="hljs-comment"># 2. å®‰è£…å‰ç«¯ä¾èµ–ï¼ˆéœ€æ–°å¼€ç»ˆç«¯æˆ–è¿”å›æ ¹ç›®å½•ï¼‰</span>
<span class="hljs-built_in">cd</span> frontend
npm install  <span class="hljs-comment"># åŒç†å¯æ›¿æ¢ä¸ºå¯¹åº”åŒ…ç®¡ç†å·¥å…·çš„å®‰è£…å‘½ä»¤</span>
</code></pre>
<h4 data-id="heading-21">2.3 ç¯å¢ƒé…ç½®</h4>
<h5 data-id="heading-22">ï¼ˆ1ï¼‰åç«¯é…ç½®</h5>
<ol>
<li>
<p><strong>å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿</strong>ï¼šè¿›å…¥åç«¯ç›®å½•ï¼Œå°† <code>.env.example</code> æ¨¡æ¿æ–‡ä»¶å¤åˆ¶ä¸ºå®é™…ä½¿ç”¨çš„ <code>.env</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> backend  <span class="hljs-comment"># è‹¥å½“å‰ä¸åœ¨åç«¯ç›®å½•éœ€æ‰§è¡Œæ­¤å‘½ä»¤</span>
<span class="hljs-built_in">cp</span> .env.example .<span class="hljs-built_in">env</span>  <span class="hljs-comment"># Windowsç³»ç»Ÿå¯æ‰‹åŠ¨å¤åˆ¶æ–‡ä»¶å¹¶é‡å‘½åä¸º.env</span>
</code></pre>
</li>
<li>
<p><strong>ç¼–è¾‘.envæ–‡ä»¶å‚æ•°</strong>ï¼šç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ <code>.env</code> æ–‡ä»¶ï¼Œæ ¹æ®æœ¬åœ°ç¯å¢ƒå’Œå®é™…èµ„æºä¿¡æ¯å¡«å†™ä»¥ä¸‹å…³é”®é…ç½®ï¼ˆæ›¿æ¢å ä½ç¬¦å†…å®¹ï¼‰ï¼š</p>
<pre><code class="hljs language-env" lang="env"># æœåŠ¡å™¨é…ç½®
SERVER_PORT=3001                  # åç«¯æœåŠ¡ç«¯å£ï¼Œé»˜è®¤3001ï¼Œå¯æŒ‰éœ€ä¿®æ”¹
CORS_ALLOW_ORIGIN=http://localhost:8080 # å‰ç«¯åœ°å€ï¼Œéœ€ä¸å‰ç«¯ç«¯å£ä¿æŒä¸€è‡´ï¼Œè§£å†³è·¨åŸŸé—®é¢˜

# æ•°æ®åº“é…ç½®ï¼ˆéœ€ä¸æœ¬åœ°MySQLç¯å¢ƒåŒ¹é…ï¼‰
MYSQL_HOST=localhost       # MySQLæœåŠ¡åœ°å€ï¼Œæœ¬åœ°é»˜è®¤localhost
MYSQL_PORT=3306            # MySQLç«¯å£ï¼Œé»˜è®¤3306
MYSQL_USER=root            # MySQLç”¨æˆ·åï¼Œæ›¿æ¢ä¸ºä½ çš„å®é™…ç”¨æˆ·å
MYSQL_PASSWORD=your_password    # MySQLå¯†ç ï¼Œæ›¿æ¢ä¸ºä½ çš„å®é™…å¯†ç ï¼ˆæ— å¯†ç åˆ™ç•™ç©ºï¼‰
MYSQL_DATABASE=lowcode_material # æ•°æ®åº“åï¼Œéœ€åç»­æ‰‹åŠ¨åˆ›å»ºè¯¥åº“

# LLMæ¨¡å‹é…ç½®ï¼ˆå¿…å¡«ï¼Œæ›¿æ¢ä¸ºå®é™…å¯ç”¨çš„å¤§æ¨¡å‹ä¿¡æ¯ï¼‰
OPENAI_MODEL=deepseek-reasoner            # æ¨¡å‹åç§°ï¼Œå¦‚deepseek-reasonerã€Qwen3-32Bç­‰
OPENAI_API_KEY=your_api_key_here          # æ¨¡å‹APIå¯†é’¥ï¼Œä»å¯¹åº”å¹³å°è·å–
OPENAI_BASE_URL=https://api.deepseek.com/v1 # æ¨¡å‹æ¥å£åœ°å€ï¼ŒæŒ‰å®é™…å¹³å°å¡«å†™

# é»˜è®¤è·¯å¾„é…ç½®ï¼ˆç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œï¼‰
DEFAULT_OUTPUT_DIR=output-log       # æœ€ç»ˆç‰©æ–™JSONè¾“å‡ºç›®å½•
DEFAULT_SCHEMA_LOG_DIR=schema-log   # è½¬æ¢è¿‡ç¨‹æ—¥å¿—ç›®å½•
DEFAULT_API_LOG_DIR=raw-api-log     # åŸå§‹API JSONæ—¥å¿—ç›®å½•
</code></pre>
</li>
</ol>
<h5 data-id="heading-23">ï¼ˆ2ï¼‰å‰ç«¯é…ç½®ï¼ˆè·¨åŸŸä¸ç«¯å£ï¼‰</h5>
<p>å‰ç«¯éœ€é…ç½®ä»£ç†å¯¹æ¥åç«¯æœåŠ¡ï¼Œç¡®ä¿æ¥å£è¯·æ±‚æ­£å¸¸ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>è¿›å…¥å‰ç«¯ç›®å½•ï¼Œæ‰“å¼€ <code>vite.config.js</code> æ–‡ä»¶ï¼ˆè·¯å¾„ï¼š<code>frontend/vite.config.js</code>ï¼‰ï¼›</li>
<li>ç¡®è®¤æˆ–ä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼ˆéœ€ä¸åç«¯ <code>.env</code> ä¸­çš„é…ç½®ä¿æŒä¸€è‡´ï¼‰ï¼š
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>; 
<span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-vue'</span>; 

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">vue</span>()],
  <span class="hljs-attr">server</span>: {
    <span class="hljs-attr">port</span>: <span class="hljs-number">8080</span>, <span class="hljs-comment">// å‰ç«¯ç«¯å£ï¼Œé»˜è®¤8080ï¼Œéœ€ä¸åç«¯CORS_ALLOW_ORIGINä¸­çš„ç«¯å£ä¸€è‡´</span>
    <span class="hljs-attr">proxy</span>: {
      <span class="hljs-comment">// ä»£ç†æ‰€æœ‰/apiå‰ç¼€çš„è¯·æ±‚åˆ°åç«¯æœåŠ¡</span>
      <span class="hljs-string">'/api'</span>: {
        <span class="hljs-attr">target</span>: <span class="hljs-string">'http://localhost:3001'</span>, <span class="hljs-comment">// åç«¯æœåŠ¡åœ°å€ï¼Œä¸SERVER_PORTä¸€è‡´</span>
        <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¼€å¯è·¨åŸŸé€‚é…</span>
      }
    }
  }
});
</code></pre>
<ul>
<li>è‹¥ä¿®æ”¹äº†å‰ç«¯ç«¯å£æˆ–åç«¯æœåŠ¡ç«¯å£ï¼Œéœ€åŒæ­¥æ›´æ–°å¯¹åº”é…ç½®ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-24">3. å¿«é€Ÿå¯åŠ¨</h3>
<p>å‰åç«¯æœåŠ¡éœ€æŒ‰ç‰¹å®šé¡ºåºå¯åŠ¨ï¼Œæ ¸å¿ƒé¡ºåºï¼š<strong>å¯åŠ¨MySQLæœåŠ¡ â†’ åˆ›å»ºé¡¹ç›®æ•°æ®åº“ â†’ å¯åŠ¨åç«¯æœåŠ¡ â†’ å¯åŠ¨å‰ç«¯æœåŠ¡</strong>ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<h4 data-id="heading-25">3.1 å¯åŠ¨MySQLæœåŠ¡å¹¶åˆ›å»ºé¡¹ç›®æ•°æ®åº“</h4>
<h5 data-id="heading-26">ï¼ˆ1ï¼‰å¯åŠ¨MySQLæœåŠ¡</h5>
<p>æ ¹æ®æœ¬åœ°æ“ä½œç³»ç»Ÿï¼Œæ‰§è¡Œå¯¹åº”å¯åŠ¨å‘½ä»¤ï¼š</p>
<ul>
<li><strong>Windows</strong>ï¼šé€šè¿‡â€œæœåŠ¡â€ç®¡ç†å™¨æ‰¾åˆ°â€œMySQLâ€æœåŠ¡ï¼Œå³é”®ç‚¹å‡»â€œå¯åŠ¨â€ï¼›</li>
<li><strong>macOSï¼ˆHomebrewå®‰è£…ï¼‰</strong>ï¼šæ‰“å¼€ç»ˆç«¯æ‰§è¡Œ <code>brew services start mysql</code>ï¼›</li>
<li><strong>Linuxï¼ˆç³»ç»ŸæœåŠ¡ï¼Œä»¥Ubuntuä¸ºä¾‹ï¼‰</strong>ï¼šæ‰§è¡Œ <code>sudo systemctl start mysql</code>ï¼ˆå…¶ä»–å‘è¡Œç‰ˆæŒ‰å¯¹åº”å‘½ä»¤æ“ä½œï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-27">ï¼ˆ2ï¼‰æ‰‹åŠ¨åˆ›å»ºé¡¹ç›®æ•°æ®åº“</h5>
<p>é¡¹ç›®éœ€ä½¿ç”¨é¢„å…ˆåˆ›å»ºçš„ <code>lowcode_material</code> æ•°æ®åº“ï¼Œæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li>æ‰“å¼€ç»ˆç«¯/å‘½ä»¤æç¤ºç¬¦ï¼Œç™»å½•MySQLï¼š
<pre><code class="hljs language-bash" lang="bash">mysql -u root -p  <span class="hljs-comment"># æ›¿æ¢rootä¸ºä½ çš„MySQLç”¨æˆ·åï¼Œå›è½¦åè¾“å…¥å¯†ç ï¼ˆæ— å¯†ç ç›´æ¥å›è½¦ï¼‰</span>
</code></pre>
</li>
<li>æ‰§è¡ŒSQLå‘½ä»¤åˆ›å»ºæ•°æ®åº“ï¼ˆæŒ‡å®šå­—ç¬¦é›†é¿å…ä¸­æ–‡ä¹±ç ï¼‰ï¼š
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> DATABASE IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> lowcode_material 
<span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> utf8mb4 
<span class="hljs-keyword">COLLATE</span> utf8mb4_unicode_ci;
</code></pre>
</li>
<li>ï¼ˆå¯é€‰ï¼‰éªŒè¯æ•°æ®åº“åˆ›å»ºæˆåŠŸï¼š
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SHOW</span> DATABASES;  # æ‰§è¡ŒåæŸ¥çœ‹è¾“å‡ºåˆ—è¡¨ï¼Œç¡®è®¤åŒ…å«lowcode_material
</code></pre>
</li>
<li>é€€å‡ºMySQLå‘½ä»¤è¡Œï¼š
<pre><code class="hljs language-sql" lang="sql">exit;
</code></pre>
</li>
</ol>
<h4 data-id="heading-28">3.2 å¯åŠ¨åç«¯æœåŠ¡</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿›å…¥åç«¯ç›®å½•ï¼ˆè‹¥å½“å‰ä¸åœ¨è¯¥ç›®å½•ï¼‰</span>
<span class="hljs-built_in">cd</span> backend

<span class="hljs-comment"># å¯åŠ¨å¼€å‘ç¯å¢ƒæœåŠ¡ï¼ˆä½¿ç”¨é…ç½®çš„npmè„šæœ¬ï¼‰</span>
npm run serve
</code></pre>
<ul>
<li>å¯åŠ¨æˆåŠŸæ ‡è¯†ï¼šç»ˆç«¯æ˜¾ç¤ºæœåŠ¡ç›‘å¬ä¿¡æ¯ï¼ˆå¦‚ <code>åç«¯æœåŠ¡å¯åŠ¨æˆåŠŸï¼Œç«¯å£ï¼š3001</code>ï¼‰ï¼›</li>
<li>éªŒè¯æ¥å£å¯ç”¨æ€§ï¼šå¯é€šè¿‡æµè§ˆå™¨è®¿é—® <code>http://localhost:3001/api/material/docs</code>ï¼ŒæŸ¥çœ‹ç®€æ˜“æ¥å£æ–‡æ¡£ã€‚</li>
</ul>
<h4 data-id="heading-29">3.3 å¯åŠ¨å‰ç«¯æœåŠ¡</h4>
<p>éœ€æ–°å¼€ä¸€ä¸ªç»ˆç«¯ï¼ˆé¿å…ä¸åç«¯æœåŠ¡å†²çªï¼‰ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿›å…¥å‰ç«¯ç›®å½•</span>
<span class="hljs-built_in">cd</span> frontend

<span class="hljs-comment"># å¯åŠ¨å¼€å‘ç¯å¢ƒï¼ˆæ”¯æŒçƒ­æ›´æ–°ï¼Œä¿®æ”¹ä»£ç åè‡ªåŠ¨åˆ·æ–°ï¼‰</span>
npm run dev
</code></pre>
<ul>
<li>å¯åŠ¨æˆåŠŸæ ‡è¯†ï¼šç»ˆç«¯è¾“å‡º <code>VITE v7.1.7 ready in 300 ms</code> åŠè®¿é—®åœ°å€ï¼›</li>
<li>è®¿é—®å‰ç«¯ï¼šæ‰“å¼€æµè§ˆå™¨è¾“å…¥é»˜è®¤åœ°å€ <code>http://localhost:8080</code>ï¼Œå³å¯è¿›å…¥ç‰©æ–™ç®¡ç†é¦–é¡µã€‚</li>
</ul>
<h3 data-id="heading-30">4. å¯åŠ¨å¸¸è§é—®é¢˜æ’æŸ¥</h3>
<ul>
<li><strong>MySQLè¿æ¥å¤±è´¥</strong>ï¼šæ£€æŸ¥ <code>.env</code> ä¸­æ•°æ®åº“é…ç½®ï¼ˆåœ°å€ã€ç«¯å£ã€ç”¨æˆ·åã€å¯†ç ï¼‰æ˜¯å¦ä¸æœ¬åœ°ç¯å¢ƒä¸€è‡´ï¼Œç¡®ä¿MySQLæœåŠ¡å·²å¯åŠ¨ï¼›</li>
<li><strong>LLMæ¥å£æŠ¥é”™</strong>ï¼šæ£€æŸ¥æ¨¡å‹é…ç½®ï¼ˆAPIå¯†é’¥ã€æ¥å£åœ°å€ã€æ¨¡å‹åç§°ï¼‰æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿æ¥å£å¯æ­£å¸¸è®¿é—®ä¸”æœ‰å‰©ä½™è°ƒç”¨é¢åº¦ã€‚</li>
</ul>
<h3 data-id="heading-31">å››ã€æ ¸å¿ƒä½¿ç”¨æµç¨‹</h3>
<ol>
<li>è®¿é—®å‰ç«¯åœ°å€ï¼ˆé»˜è®¤Â <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2F" target="_blank" title="http://localhost:8080/" ref="nofollow noopener noreferrer">http://localhost:8080</a>ï¼‰ï¼Œè¿›å…¥ç‰©æ–™ç®¡ç†é¦–é¡µï¼›</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b0e2e6d07324be498cb956deb352aa5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763718186&amp;x-signature=LC0pkXe05hEjes3UL7%2BrigAtkO8%3D" alt="2.png" loading="lazy"/></p>
<ol start="2">
<li>
<p>é€‰æ‹©å¯¼å…¥æ–¹å¼ï¼ˆURL / NPM / æºç ï¼‰ï¼Œå¡«å†™å¯¹åº”ä¿¡æ¯ï¼ˆå¦‚ URL åœ°å€ã€NPM åŒ…åã€ä¸Šä¼ æºç æ–‡ä»¶ï¼‰ï¼›</p>
<ul>
<li><strong>URL å¯¼å…¥</strong>ï¼šè¾“å…¥URLåœ°å€å’ŒAPIè¡¨æ ¼CSSé€‰æ‹©å™¨ï¼›
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6a03c011c9f46a1b3014d3a78d26bd8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763718186&amp;x-signature=luqvKNeBxpSrNGW3Y7MJqlV4iOg%3D" alt="3.gif" loading="lazy"/></li>
<li><strong>NPM å¯¼å…¥</strong>ï¼šè¾“å…¥NPMåŒ…åå’Œç»„ä»¶åç§°ï¼›
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95a79e1f19a84de7a203958ebbd23f00~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763718186&amp;x-signature=jpGWRvfTzBMAo19TWkoKpcQ5xP4%3D" alt="4.gif" loading="lazy"/></li>
<li><strong>æºç å¯¼å…¥</strong>ï¼šä¸Šä¼ æºç æ–‡ä»¶ï¼ˆæ”¯æŒå•ä¸ªæ–‡ä»¶æˆ–zipï¼‰ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/577c0731b8b6452f81f558d259448ca6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763718186&amp;x-signature=wiqkUTjKMT9pdepuBTzoezlHeTs%3D" alt="5.gif" loading="lazy"/></li>
</ul>
</li>
<li>
<p>æäº¤åç­‰å¾…ä»»åŠ¡å¤„ç†ï¼Œå®æ—¶æŸ¥çœ‹è¿›åº¦æ¡ï¼ˆ0-100%ï¼‰ï¼Œè¿›åº¦æ¡æ”¯æŒæœ€å°åŒ–ï¼›</p>
</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5022535803f4caca5f72bd553944f82~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763718186&amp;x-signature=VkqUc%2BunVwIUppn0ulMRwztL%2FSI%3D" alt="6.gif" loading="lazy"/></p>
<ol start="4">
<li>ä»»åŠ¡æˆåŠŸåï¼Œé¢„è§ˆç”Ÿæˆçš„ç‰©æ–™æ•°æ®ï¼ˆå±æ€§ / äº‹ä»¶ / æ’æ§½ï¼‰ï¼Œå¯ç›´æ¥ç¼–è¾‘ä¿®æ”¹æˆ–åˆ é™¤ï¼›</li>
</ol>
<ul>
<li>ç¼–è¾‘å±æ€§/äº‹ä»¶/æ’æ§½</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49b981635d66404f84730d14683dfb58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763718186&amp;x-signature=yzHVdvHyP5%2F8IbseV4QiAtMEQ%2B8%3D" alt="7.gif" loading="lazy"/></p>
<ul>
<li>åˆ é™¤å±æ€§/äº‹ä»¶/æ’æ§½</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0e4268aa09c41e797ad0abf5ca7602e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763718186&amp;x-signature=VyeoPFx%2FiWGZ%2F7DPnO8MBbLHzbA%3D" alt="8.gif" loading="lazy"/></p>
<ul>
<li>åˆ é™¤ç»„ä»¶ç‰©æ–™</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e77aa5abb44843cdaf07d880a1546d34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763718186&amp;x-signature=M4toKZm2vhEN8RML1%2Fpkthzd%2Bhs%3D" alt="9.gif" loading="lazy"/></p>
<ol start="5">
<li>ç‚¹å‡» â€œä¿å­˜åˆ°ç‰©æ–™åº“â€ï¼Œå°†ç‰©æ–™åŒæ­¥è‡³ MySQL æ•°æ®åº“ï¼›</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5829c93097643e79aebb7e8b9508bb3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763718186&amp;x-signature=pr372PfrHpBiVbd3fbb%2FA8HEJz8%3D" alt="10.gif" loading="lazy"/></p>
<ol start="6">
<li>åœ¨é¦–é¡µé€šè¿‡ç­›é€‰ã€æœç´¢åŠŸèƒ½ç®¡ç†å·²ä¿å­˜çš„ç‰©æ–™ï¼Œæ”¯æŒæ‰¹é‡å¯¼å‡ºæˆ–åˆ é™¤ã€‚</li>
</ol>
<ul>
<li>é€šè¿‡ç»„ä»¶åç§°ç­›é€‰ç»„ä»¶ç‰©æ–™</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/86019bdd78eb4a03b9571ea9c54077c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763718186&amp;x-signature=aHDAIUG5uCSWXEEgoim6Yr3DvTA%3D" alt="11.gif" loading="lazy"/></p>
<ul>
<li>é€šè¿‡å…³é”®è¯ç­›é€‰ç»„ä»¶ç‰©æ–™</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a18c20622434b8e9a0e94a2c8523d7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763718186&amp;x-signature=YB%2Fm8HSpVJuVjeqvJuPi9DiRC48%3D" alt="12.gif" loading="lazy"/></p>
<ul>
<li>æ‰¹é‡åˆ é™¤ç»„ä»¶ç‰©æ–™</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4662a72b1674fd5a9b4be4d2ba16235~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763718186&amp;x-signature=JeJ3YvwxneQ2smBslCFqFiKwtdk%3D" alt="13.gif" loading="lazy"/></p>
<ul>
<li>æ‰¹é‡å¯¼å‡ºç»„ä»¶ç‰©æ–™</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e15b7249246440ef9ea73a8f439ee63e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763718186&amp;x-signature=nq59kheuy0PErWFVXy31gNiJI7s%3D" alt="14.gif" loading="lazy"/></p>
<p>å¯¼å‡ºæ–‡ä»¶å¦‚ä¸‹ï¼ˆä»¥element-plusçš„Breadcrumbä¸ºä¾‹ï¼‰ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">[</span>
  <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"npm"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"package"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"element-plus"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"exportName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ElBreadcrumb"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"icon"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"breadcrumb"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"zh_CN"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é¢åŒ…å±‘"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"tags"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"å¯¼èˆª"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"é¢åŒ…å±‘"</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"group"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"element-plus"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"schema"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"slots"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"zh_CN"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é»˜è®¤å†…å®¹"</span>
          <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"zh_CN"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è‡ªå®šä¹‰é»˜è®¤å†…å®¹"</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"events"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"zh_CN"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åŸºç¡€å±æ€§"</span>
          <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-punctuation">{</span>
              <span class="hljs-attr">"cols"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">12</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ArrayItemConfigurator-test"</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                  <span class="hljs-attr">"zh_CN"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åˆ†éš”ç¬¦"</span>
                <span class="hljs-punctuation">}</span>
              <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"widget"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"props"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                  <span class="hljs-attr">"placeholder"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è¯·è¾“å…¥åˆ†éš”ç¬¦"</span>
                <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"component"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"InputConfigurator"</span>
              <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"disabled"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"property"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"separator"</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"readOnly"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"zh_CN"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åˆ†éš”ç¬¦"</span>
              <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"defaultValue"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/"</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"labelPosition"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"left"</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-punctuation">{</span>
              <span class="hljs-attr">"cols"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">12</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"unknown"</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                  <span class="hljs-attr">"zh_CN"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å›¾æ ‡åˆ†éš”ç¬¦"</span>
                <span class="hljs-punctuation">}</span>
              <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"widget"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"props"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                  <span class="hljs-attr">"placeholder"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è¯·è¾“å…¥å›¾æ ‡åç§°"</span>
                <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"component"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"InputConfigurator"</span>
              <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"disabled"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"property"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"separatorIcon"</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"readOnly"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å›¾æ ‡åˆ†éš”ç¬¦ç»„ä»¶"</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"defaultValue"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"labelPosition"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"left"</span>
            <span class="hljs-punctuation">}</span>
          <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"zh_CN"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç»„ä»¶æ ¸å¿ƒåŠŸèƒ½ç›¸å…³çš„é…ç½®ï¼ŒåŒ…æ‹¬ separatorã€ separatorIcon ç­‰æ ¸å¿ƒå±æ€§"</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"devMode"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"proCode"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"doc_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"category"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"element-plus"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"keywords"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"Breadcrumb"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"é¢åŒ…å±‘"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"å¯¼èˆª"</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"snippets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"icon"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"breadcrumb"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"zh_CN"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é¢åŒ…å±‘"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"schema"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"children"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-punctuation">{</span>
              <span class="hljs-attr">"props"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"to"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/home"</span>
              <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"children"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
                <span class="hljs-punctuation">{</span>
                  <span class="hljs-attr">"props"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                    <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é¦–é¡µ"</span>
                  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                  <span class="hljs-attr">"componentName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Text"</span>
                <span class="hljs-punctuation">}</span>
              <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"componentName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ElBreadcrumbItem"</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-punctuation">{</span>
              <span class="hljs-attr">"props"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"to"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/list"</span>
              <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"children"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
                <span class="hljs-punctuation">{</span>
                  <span class="hljs-attr">"props"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                    <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åˆ—è¡¨é¡µ"</span>
                  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                  <span class="hljs-attr">"componentName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Text"</span>
                <span class="hljs-punctuation">}</span>
              <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"componentName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ElBreadcrumbItem"</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-punctuation">{</span>
              <span class="hljs-attr">"props"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"children"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
                <span class="hljs-punctuation">{</span>
                  <span class="hljs-attr">"props"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                    <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è¯¦æƒ…é¡µ"</span>
                  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                  <span class="hljs-attr">"componentName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Text"</span>
                <span class="hljs-punctuation">}</span>
              <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"componentName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ElBreadcrumbItem"</span>
            <span class="hljs-punctuation">}</span>
          <span class="hljs-punctuation">]</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"category"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"element-plus"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"screenshot"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"snippetName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ElBreadcrumb"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"component"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ElBreadcrumb"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"configure"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"loop"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"styles"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"isModal"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"isLayout"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"isPopper"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"condition"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"framework"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Vue"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"shortcuts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-string">"separator"</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"isNullNode"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"contextMenu"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"actions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-string">"copy"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-string">"remove"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-string">"insert"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-string">"updateAttr"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-string">"bindEvent"</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"disable"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"isContainer"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"nestingRule"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"childWhitelist"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ElBreadcrumbItem"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"parentWhitelist"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"ancestorWhitelist"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"descendantBlacklist"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"clickCapture"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"rootSelector"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é¢åŒ…å±‘å¯¼èˆªç»„ä»¶ï¼Œç”¨äºæ˜¾ç¤ºå½“å‰é¡µé¢åœ¨ç³»ç»Ÿå±‚çº§ ç»“æ„ä¸­çš„ä½ç½®"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">]</span>
</code></pre>
<h2 data-id="heading-32">æ€»ç»“</h2>
<p>TinyEngine ä½ä»£ç ç‰©æ–™è‡ªåŠ¨å¯¼å…¥å·¥å…·çš„æ ¸å¿ƒç›®æ ‡ï¼Œæ˜¯é€šè¿‡ã€Œè‡ªåŠ¨åŒ–è§£æ + å¯è§†åŒ–æ“ä½œã€çš„é—­ç¯è®¾è®¡ï¼Œè§£å†³äº†ä½ä»£ç ç‰©æ–™æ¥å…¥çš„æ•ˆç‡ç“¶é¢ˆä¸å…¼å®¹æ€§éš¾é¢˜ã€‚æ— è®ºæ˜¯ URL çˆ¬å–ã€NPM è§£æè¿˜æ˜¯æºç ä¸Šä¼ ï¼Œå·¥å…·éƒ½åŠ›æ±‚ç®€åŒ–å…¨æµç¨‹æ“ä½œï¼Œè®©å¼€å‘è€…æ— éœ€å…³æ³¨åº•å±‚åè®®ç»†èŠ‚ä¸æ ¼å¼è½¬æ¢é€»è¾‘ï¼Œå³å¯å¿«é€Ÿå°†å„ç±» UI ç»„ä»¶æ— ç¼è½¬åŒ–ä¸ºç¬¦åˆ TinyEngine æ ‡å‡†çš„å¯ç”¨ç‰©æ–™ï¼Œè®©ä½ä»£ç ç‰©æ–™æ¥å…¥ä»ç¹ççš„æ‰‹åŠ¨é…ç½®ï¼Œè½¬å˜ä¸ºé«˜æ•ˆã€çœå¿ƒçš„ä¸€ç«™å¼æ“ä½œã€‚</p>
<h2 data-id="heading-33">å…³äºOpenTiny</h2>
<p>æ¬¢è¿åŠ å…¥ OpenTiny å¼€æºç¤¾åŒºã€‚æ·»åŠ å¾®ä¿¡å°åŠ©æ‰‹ï¼šopentiny-official ä¸€èµ·å‚ä¸äº¤æµå‰ç«¯æŠ€æœ¯ï½</p>
<p>OpenTiny å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.design" target="_blank" title="https://opentiny.design" ref="nofollow noopener noreferrer">opentiny.design</a><br/>
OpenTiny ä»£ç ä»“åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny" target="_blank" title="https://github.com/opentiny" ref="nofollow noopener noreferrer">github.com/opentiny</a><br/>
TinyVue æºç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-vue" target="_blank" title="https://github.com/opentiny/tiny-vue" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a><br/>
TinyEngine æºç ï¼šâ€…<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-engine" target="_blank" title="https://github.com/opentiny/tiny-engine" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a><br/>
æ¬¢è¿è¿›å…¥ä»£ç ä»“åº“ StarğŸŒŸTinyEngineã€TinyVueã€TinyNGã€TinyCLIã€TinyEditor~ å¦‚æœä½ ä¹Ÿæƒ³è¦å…±å»ºï¼Œå¯ä»¥è¿›å…¥ä»£ç ä»“åº“ï¼Œæ‰¾åˆ° good first issue æ ‡ç­¾ï¼Œä¸€èµ·å‚ä¸å¼€æºè´¡çŒ®~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redis RedisTimeSeries åœ¨springbootä¸­çš„åº”ç”¨]]></title>    <link>https://juejin.cn/post/7572157115906703410</link>    <guid>https://juejin.cn/post/7572157115906703410</guid>    <pubDate>2025-11-14T03:05:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572157115906703410" data-draft-id="7572132100361060398" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redis RedisTimeSeries åœ¨springbootä¸­çš„åº”ç”¨"/> <meta itemprop="keywords" content="Redis,åç«¯,Spring Boot"/> <meta itemprop="datePublished" content="2025-11-14T03:05:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å”å°ç "/> <meta itemprop="url" content="https://juejin.cn/user/4055468706891367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redis RedisTimeSeries åœ¨springbootä¸­çš„åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4055468706891367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å”å°ç 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T03:05:17.000Z" title="Fri Nov 14 2025 03:05:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åœºæ™¯</h2>
<p>æˆ‘ä»¬ç°åœ¨æœ‰è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œä½¿ç”¨å›½äº§çš„Gbaseæ•°æ®åº“ï¼Œæœ‰ä¸ªåˆ†é’Ÿè¡¨çš„æ•°æ®ï¼Œå¤§æ¦‚æœ‰20ä¸ªå­—æ®µï¼Œå­˜å‚¨çš„çš„ç«™ç‚¹å¤§æ¦‚æ˜¯4000å¤šä¸ªï¼Œå¤§æ¦‚ç®—ä¸‹æ•°æ®é‡</p>
<p>æ¯å°æ—¶ï¼š4000*60=240000</p>
<p>æ¯å¤©ï¼š40000* 60 * 24=5760000</p>
<p>ä½†æ˜¯æˆ‘ä»¬å®é™…ä¸Šç”¨çš„æœ€é¢‘ç¹çš„æ˜¯æ—¶é—´å­—æ®µå’Œä¸€ä¸ªè¦ç´ å­—æ®µï¼Œæ—¶é—´å­—æ®µå·²ç»åŠ äº†ç´¢å¼•ï¼Œè¦ç´ å­—æ®µæ•°æ®æ˜¯ä¸Šæ¥çš„ç›‘æµ‹æ•°æ®ã€‚å¯¹æ­¤å­—æ®µçš„è¯·æ±‚é¢‘ç‡æ˜¯æœ€é«˜çš„ï¼Œç›®å‰å“åº”æ—¶é—´è¿‡é•¿ï¼Œä¸¥é‡å½±å“åˆ°ç”¨æˆ·ä½“éªŒæ„Ÿ ï¼Œç°éœ€è¦è¿›è¡Œå¯¹å…¶ä¼˜åŒ–ï¼Œè€ƒè™‘åˆ°åº“çš„ç»´æŠ¤ç”±ç”¨æˆ·è´Ÿè´£ï¼Œæˆ‘ä»¬åªæœ‰æŸ¥è¯¢æƒé™ã€‚æå‡ºå¦‚ä¸‹å‡ ç§æ–¹å¼</p>
<p>1ã€åˆ†åº“åˆ†è¡¨</p>
<p>2ã€å›½äº§æ—¶åºåº“<strong>TDengine</strong>è¿›è¡Œæ›¿ä»£</p>
<p>3ã€å†å²æ•°æ®å’Œæœ€æ–°æ•°æ®åˆ†å¼€å­˜å‚¨</p>
<p>4ã€ä½¿ç”¨Redisç¼“å­˜</p>
<p>5ã€å¤§æ•°æ®æ–¹æ¡ˆ</p>
<p>è€ƒè™‘åˆ°ç”¨æˆ·å•ä½çš„ç‰¹æ®Šæ€§ï¼Œç¬¬ä¸€è¦æ»¡è¶³å›½äº§è¦æ±‚ï¼Œç¬¬äºŒæ˜¯æ•°æ®åº“æ˜¯æŒ‡å®šä¸“ç”¨ï¼Œç¬¬ä¸‰æ•°æ®åº“ç»´æŠ¤ä¸åœ¨æˆ‘ä»¬è¿™é‡Œã€‚æœ€ç»ˆå†³å®šä½¿ç”¨Redisçš„TSæ¥è§£å†³ã€‚</p>
<p>ä¸»è¦å®ç°é€»è¾‘ï¼šredisä¸­ç¼“å­˜æœ€è¿‘3å°æ—¶å†…çš„æ‰€æœ‰æœ‰æ•ˆæ•°æ®ï¼Œæ³¨æ„æ˜¯æœ‰æ•ˆæ•°æ®ï¼Œæ¯”å¦‚æŸä¸ªç«™ç‚¹çš„æ•°æ®ç¼ºæµ‹æˆ–è€…æ˜¯ä¸€ç›´æ²¡æ•°æ®ï¼Œåˆ™ä¸è¿›è¡Œç¼“å­˜ï¼Œå…¶å®å¾ˆå¤šæ—¶å€™éƒ½æ˜¯æ²¡æ•°æ®çš„ï¼Œé™¤éåˆ°é›¨å­£ï¼Œè¿™æ ·ä¸‹æ¥redisç¼“å­˜çš„æ•°æ®ä¼šå°‘å¾ˆå¤šã€‚</p>
<p>æ•°æ®ç”±ç”¨æˆ·åŒæ­¥åˆ°RedisæœåŠ¡ï¼Œæˆ‘ä»¬è¿›è¡ŒæŸ¥è¯¢ï¼Œæ‰€ä»¥æœ¬æ–‡å›´ç»•ä½¿ç”¨æ¥å†™</p>
<p>å¦‚æœæ‚¨æœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œä¸å¦¨äº¤æµä¸€ä¸‹ï¼Œéå¸¸æ„Ÿè°¢æ‚¨æŒ‡å¯¼ã€‚</p>
<h2 data-id="heading-1">Redis-TS</h2>
<h3 data-id="heading-2">äº†è§£</h3>
<p>RedisTimeSeries æ˜¯ä¸€ä¸ª Redis æ¨¡å—ï¼Œç”¨äºå­˜å‚¨ã€æŸ¥è¯¢å’Œç®¡ç†æ—¶é—´åºåˆ—æ•°æ®ã€‚ä¸ä¼ ç»Ÿçš„æ—¶é—´åºåˆ—æ•°æ®åº“ç›¸æ¯”ï¼Œå®ƒçš„ä¼˜åŠ¿åœ¨äºæä½çš„å»¶è¿Ÿå’Œä¸ Redis ç”Ÿæ€çš„æ— ç¼é›†æˆã€‚</p>
<p><strong>æ ¸å¿ƒæ¦‚å¿µï¼š</strong></p>
<ul>
<li><strong>æ—¶é—´åºåˆ—</strong>ï¼šä¸€ä¸ªç”±æ—¶é—´æˆ³å’Œå€¼ç»„æˆçš„æ•°æ®ç‚¹åºåˆ—ã€‚</li>
<li><strong>æ ‡ç­¾</strong>ï¼šå¯ä»¥ä¸ºæ¯ä¸ªæ—¶é—´åºåˆ—è®¾ç½®å¤šä¸ªæ ‡ç­¾ï¼ˆå¦‚ <code>station_id=52889</code>, <code>element=V12001</code>ï¼‰ï¼Œä»è€Œå®ç°é«˜æ•ˆçš„ç­›é€‰å’Œåˆ†ç»„æŸ¥è¯¢ã€‚</li>
</ul>
<h3 data-id="heading-3">1ã€æœ¬åœ°å®‰è£…</h3>
<p>è¿™é‡Œæˆ‘ä»¬å®‰è£…æœ€æ–°ç‰ˆçš„ï¼Œé»˜è®¤è‡ªå¸¦äº†TSæ¨¡å—ï¼Œæ¨èä½¿ç”¨Linuxç¯å¢ƒ,ä½ ä¼šçœå»å¾ˆå¤šéº»çƒ¦</p>
<pre><code class="hljs language-xml" lang="xml"> docker run -d \
  --privileged=true \
  -p 6380:6379 \
  --restart always \
  -v /data/redis/redis.conf:/etc/redis/redis.conf \
  -v /data/redis/data:/data \
  --name myredis \
  redis \
  redis-server /etc/redis/redis.conf --appendonly yes
</code></pre>
<p>å¯ä»¥æŠŠç”¨æˆ·ä¾§æ•°æ®çš„rdbæ–‡ä»¶ç›´æ¥æ‹·è´è¿‡æ¥ï¼Œæ•°æ®å°±åˆ°æœ¬åœ°äº†</p>
<h3 data-id="heading-4">2ã€ä½¿ç”¨</h3>
<p>æˆ‘ç”¨çš„springbootæ¡†æ¶ä¸º2.7.18ï¼Œç½‘ä¸Šæ‰¾äº†ä¸€åœˆï¼Œæ²¡æ‰¾åˆ°æ¯”è¾ƒå¥½ç”¨çš„å…³äºTSå°è£…çš„ç»„ä»¶</p>
<p>å®˜ç½‘ä¸Šæœ‰è¯¦ç»†çš„å‘½ä»¤ä½¿ç”¨æ–¹å¼ï¼Œè¿™é‡Œä¸åœ¨èµ˜è¿° <a href="https://link.juejin.cn?target=https%3A%2F%2Fredis.ac.cn%2Fdocs%2Flatest%2Fcommands%2F%3Fgroup%3Dtimeseries" target="_blank" title="https://redis.ac.cn/docs/latest/commands/?group=timeseries" ref="nofollow noopener noreferrer">redis.ac.cn/docs/latestâ€¦</a></p>
<p>æœ¬æ¬¡ä½¿ç”¨åˆ°å‡ ä¸ªå‘½ä»¤</p>
<p><strong>1ã€è·å–æœ€æ–°æ•°æ® ï¼ˆTS.MGETï¼‰</strong></p>
<p><strong>2ã€æ­£å¸¸æŸ¥è¯¢æŸä¸ªæ—¶é—´æ®µæ•°æ® ï¼ˆTS.MRANGEï¼‰</strong></p>
<p><strong>3ã€ç®¡é“æ–¹å¼æŸ¥è¯¢ï¼ˆTS.RANGEï¼‰</strong></p>
<p>ç®¡é“å’Œluaè„šæœ¬çš„åŒºåˆ«å¯¹æ¯”ï¼Œé‰´äºå¯¹æ¯”ï¼Œæ‰€ä»¥é€‰æ‹©äº†ç®¡é“æ–¹å¼æ‰§è¡Œ</p>








































<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">ç®¡é“</th><th align="left">Lua è„šæœ¬</th></tr></thead><tbody><tr><td align="left"><strong>æ ¸å¿ƒç›®æ ‡</strong></td><td align="left"><strong>æå‡ååé‡</strong>ï¼Œå‡å°‘ç½‘ç»œå»¶è¿Ÿ</td><td align="left"><strong>ä¿è¯åŸå­æ€§</strong>ï¼Œå®ç°å¤æ‚é€»è¾‘</td></tr><tr><td align="left"><strong>åŸå­æ€§</strong></td><td align="left"><strong>ä¸ä¿è¯</strong>ã€‚ç®¡é“ä¸­çš„å‘½ä»¤å¯èƒ½ä¼šè¢«å…¶ä»–å®¢æˆ·ç«¯çš„å‘½ä»¤æ’å…¥ã€‚</td><td align="left"><strong>ä¿è¯</strong>ã€‚è„šæœ¬åœ¨æ‰§è¡ŒæœŸé—´ï¼ŒRedisæœåŠ¡å™¨ä¸ä¼šå¤„ç†å…¶ä»–å‘½ä»¤ï¼Œç›¸å½“äºâ€œæ•°æ®åº“äº‹åŠ¡â€ã€‚</td></tr><tr><td align="left"><strong>é€»è¾‘èƒ½åŠ›</strong></td><td align="left">æ— ã€‚åªæ˜¯ä¸€æ‰¹å‘½ä»¤çš„ç®€å•æ‰“åŒ…ï¼Œå‘½ä»¤ä¹‹é—´æ— æ³•ç›¸äº’å½±å“ã€‚</td><td align="left"><strong>å¼ºå¤§</strong>ã€‚å¯ä»¥ä½¿ç”¨å˜é‡ã€æ¡ä»¶åˆ¤æ–­ã€å¾ªç¯ç­‰ç¼–ç¨‹ç»“æ„ï¼Œå‰ä¸€ä¸ªå‘½ä»¤çš„ç»“æœå¯ä»¥ç›´æ¥ç”¨äºä¸‹ä¸€ä¸ªå‘½ä»¤ã€‚</td></tr><tr><td align="left"><strong>æ€§èƒ½ä¼˜åŠ¿</strong></td><td align="left"><strong>æé«˜</strong>ã€‚å°†å¤šä¸ªç½‘ç»œå¾€è¿”å‹ç¼©ä¸ºä¸€æ¬¡ï¼Œæå¤§æå‡æ‰¹é‡æ“ä½œçš„ååé‡ã€‚</td><td align="left"><strong>é«˜</strong>ã€‚è™½ç„¶ä¹Ÿéœ€è¦ä¸€æ¬¡ç½‘ç»œå¾€è¿”ï¼Œä½†é¿å…äº†å¤šæ¬¡ç½‘ç»œå»¶è¿Ÿã€‚å…¶ä¼˜åŠ¿æ›´å¤šä½“ç°åœ¨åŸå­æ€§ä¸Šï¼Œè€Œéçº¯ç²¹çš„ååé‡ã€‚</td></tr><tr><td align="left"><strong>é”™è¯¯å¤„ç†</strong></td><td align="left">ç®¡é“ä¸­æŸä¸ªå‘½ä»¤å¤±è´¥ï¼Œ<strong>ä¸ä¼šå½±å“</strong>å…¶ä»–å‘½ä»¤çš„æ‰§è¡Œã€‚</td><td align="left">è„šæœ¬ä¸­å¦‚æœå‡ºç°é”™è¯¯ï¼Œæ•´ä¸ªè„šæœ¬éƒ½ä¼š<strong>å›æ»š</strong>ï¼Œæ‰€æœ‰ä¿®æ”¹éƒ½ä¸ä¼šç”Ÿæ•ˆã€‚</td></tr><tr><td align="left"><strong>ä½¿ç”¨åœºæ™¯</strong></td><td align="left">- æ‰¹é‡å†™å…¥æ•°æ® - æ‰¹é‡è¯»å–ä¸ç›¸å…³çš„æ•°æ® - æ›´æ–°å¤§é‡è®¡æ•°å™¨</td><td align="left">- éœ€è¦åŸå­æ€§çš„æ“ä½œï¼ˆå¦‚ï¼šç§’æ€æ‰£åº“å­˜ã€è½¬è´¦ï¼‰ - å‰åå‘½ä»¤æœ‰ä¾èµ–ï¼ˆå¦‚ï¼šå…ˆæ£€æŸ¥å†è®¾ç½®ï¼‰ - å®ç°å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚ï¼šè®¡ç®—æ»‘åŠ¨çª—å£å¹³å‡å€¼ï¼‰</td></tr></tbody></table>
<p><strong>4ã€æ•°æ®ç»Ÿè®¡</strong></p>
<p>å•ç«™ç‚¹ï¼Œå•è¦ç´ ä½¿ç”¨ï¼šTS.RANGEï¼Œå¤šç«™ç‚¹å¤šè¦ç´ ä½¿ç”¨TS.MRANGE</p>
<p><strong>5ã€çª—å£ç»Ÿè®¡ï¼ˆTS.MRANGEï¼‰</strong></p>
<p>æ³¨æ„ï¼šæ­¤ç‰ˆæœ¬çš„RedisTemplatedçš„executeæ–¹æ³•æ˜¯æ²¡åŠæ³•ç›´æ¥æ‰§è¡ŒTSçš„å‘½ä»¤çš„ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨Lettuceä¸­çš„æ–¹æ³•æ¥æ‰§è¡Œ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.dfec.api.util;

<span class="hljs-keyword">import</span> com.alibaba.fastjson2.JSON;
<span class="hljs-keyword">import</span> com.dfec.api.constant.ApiConstant;
<span class="hljs-keyword">import</span> com.dfec.api.entity.TsResult;
<span class="hljs-keyword">import</span> com.dfec.api.entity.cache.StatParam;
<span class="hljs-keyword">import</span> com.dfec.common.bean.constant.RetCode;
<span class="hljs-keyword">import</span> com.dfec.common.bean.exception.OuterException;
<span class="hljs-keyword">import</span> io.lettuce.core.RedisFuture;
<span class="hljs-keyword">import</span> io.lettuce.core.cluster.api.async.RedisClusterAsyncCommands;
<span class="hljs-keyword">import</span> io.lettuce.core.codec.ByteArrayCodec;
<span class="hljs-keyword">import</span> io.lettuce.core.codec.StringCodec;
<span class="hljs-keyword">import</span> io.lettuce.core.internal.Exceptions;
<span class="hljs-keyword">import</span> io.lettuce.core.output.ObjectOutput;
<span class="hljs-keyword">import</span> io.lettuce.core.protocol.CommandArgs;
<span class="hljs-keyword">import</span> io.lettuce.core.protocol.ProtocolKeyword;
<span class="hljs-keyword">import</span> org.apache.commons.lang3.StringUtils;
<span class="hljs-keyword">import</span> org.springframework.data.redis.connection.lettuce.LettuceConnection;
<span class="hljs-keyword">import</span> org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory;
<span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisConnectionUtils;
<span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisTemplate;
<span class="hljs-keyword">import</span> org.springframework.data.redis.core.script.DefaultRedisScript;
<span class="hljs-keyword">import</span> org.springframework.data.redis.core.script.RedisScript;
<span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.JdkSerializationRedisSerializer;
<span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.RedisSerializer;
<span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.StringRedisSerializer;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-keyword">import</span> javax.annotation.Resource;
<span class="hljs-keyword">import</span> java.nio.charset.StandardCharsets;
<span class="hljs-keyword">import</span> java.util.*;
<span class="hljs-keyword">import</span> java.util.concurrent.ExecutionException;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;
<span class="hljs-keyword">import</span> java.util.stream.Collectors;

<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> com.dfec.api.util.DateUtil.dateStrArrToLongArr;

<span class="hljs-comment">/**
 * Redis TSæ“ä½œå·¥å…·ç±»
 *
 * <span class="hljs-doctag">@author</span> tangrg
 * <span class="hljs-doctag">@email</span> 1446232546@qq.com
 * <span class="hljs-doctag">@date</span> 2025-10-2025/10/13 09:39:46
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisUtil</span> {

    LettuceConnection connection;

    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;

    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> LettuceConnectionFactory lettuceConnectionFactory;

    <span class="hljs-comment">/**
     * å°† Redis TS.MRANGE è¿”å›çš„ Map&lt;String, List&lt;Object&gt;&gt;ï¼ˆkey=seriesName, value=List&lt;[ts, val]&gt;ï¼‰
     * è½¬æ¢ä¸º Map&lt;String, List&lt;TsResult&gt;&gt;ï¼Œé€‚é…ä½ å½“å‰çš„ TsResult ç±»ï¼ˆå« key: LocalDateTimeï¼‰
     *
     * <span class="hljs-doctag">@param</span> rawData åŸå§‹è¿”å›æ•°æ®ï¼Œæ ¼å¼ä¸º Map&lt;String, List&lt;Object&gt;&gt;ï¼Œå…¶ä¸­ value æ˜¯ List&lt;[ts, val]&gt;
     * <span class="hljs-doctag">@return</span> Map&lt;String, List&lt;TsResult&gt;&gt;
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Map&lt;String, List&lt;TsResult&gt;&gt; <span class="hljs-title function_">convertToTsResultMap</span><span class="hljs-params">(Map&lt;String, List&lt;Object&gt;&gt; rawData)</span> {
        Map&lt;String, List&lt;TsResult&gt;&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();

        <span class="hljs-keyword">if</span> (rawData == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> result;
        }

        <span class="hljs-keyword">for</span> (Map.Entry&lt;String, List&lt;Object&gt;&gt; entry : rawData.entrySet()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">seriesKey</span> <span class="hljs-operator">=</span> entry.getKey();  <span class="hljs-comment">// å¦‚ "pm:ts:52889:V12001"</span>
            List&lt;Object&gt; dataPoints = entry.getValue();  <span class="hljs-comment">// List&lt;Object&gt;ï¼Œæ¯ä¸ªæ˜¯ [ts, val]</span>

            List&lt;TsResult&gt; tsResults = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

            <span class="hljs-keyword">for</span> (Object dp : dataPoints) {
                <span class="hljs-keyword">if</span> (!(dp <span class="hljs-keyword">instanceof</span> List)) {
                    <span class="hljs-keyword">continue</span>;
                }

                List&lt;Object&gt; point = (List&lt;Object&gt;) dp;
                <span class="hljs-keyword">if</span> (point.size() == <span class="hljs-number">2</span> &amp;&amp; !(point.get(<span class="hljs-number">0</span>) <span class="hljs-keyword">instanceof</span> List)) {
                    dealResult(point, tsResults);
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">try</span> {
                        point.forEach(item1 -&gt; {
                            <span class="hljs-keyword">if</span> (item1 <span class="hljs-keyword">instanceof</span> List) {
                                <span class="hljs-type">List</span> <span class="hljs-variable">item</span> <span class="hljs-operator">=</span> (List) item1;
                                dealResult(item, tsResults);
                            }
                        });
                    } <span class="hljs-keyword">catch</span> (Exception e) {
                        <span class="hljs-comment">// ç±»å‹è½¬æ¢å¼‚å¸¸ï¼Œè·³è¿‡è¯¥ç‚¹</span>
                        <span class="hljs-keyword">continue</span>;
                    }
                }
            }

            result.put(seriesKey, tsResults);
        }

        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dealResult</span><span class="hljs-params">(List&lt;Object&gt; point, List&lt;TsResult&gt; tsResults)</span> {
        <span class="hljs-type">TsResult</span> <span class="hljs-variable">tsResult</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TsResult</span>();
        tsResult.setTime((Long) point.get(<span class="hljs-number">0</span>));
        tsResult.setKey(DateUtil.longToLocalDateTime((Long) point.get(<span class="hljs-number">0</span>)));
        tsResult.setVal((Double) point.get(<span class="hljs-number">1</span>));
        tsResults.add(tsResult);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">awaitAll</span><span class="hljs-params">(<span class="hljs-type">long</span> timeout, TimeUnit unit, java.util.concurrent.Future&lt;?&gt;... futures)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">long</span> <span class="hljs-variable">nanos</span> <span class="hljs-operator">=</span> unit.toNanos(timeout);
            <span class="hljs-type">long</span> <span class="hljs-variable">time</span> <span class="hljs-operator">=</span> System.nanoTime();

            <span class="hljs-keyword">for</span> (java.util.concurrent.Future&lt;?&gt; f : futures) {
                <span class="hljs-keyword">if</span> (timeout &lt;= <span class="hljs-number">0L</span>) {
                    f.get();
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">if</span> (nanos &lt; <span class="hljs-number">0L</span>) {
                        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                    }
                    <span class="hljs-keyword">try</span> {
                        f.get(nanos, TimeUnit.NANOSECONDS);
                    } <span class="hljs-keyword">catch</span> (Exception e) {
<span class="hljs-comment">//                        e.printStackTrace();</span>
<span class="hljs-comment">//                        System.out.println("ç»“æœå€¼ä¸å­˜åœ¨");</span>
                    }

                    <span class="hljs-type">long</span> <span class="hljs-variable">now</span> <span class="hljs-operator">=</span> System.nanoTime();
                    nanos -= now - time;
                    time = now;
                }
            }

            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> Exceptions.fromSynchronization(e);
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;<span class="hljs-type">byte</span>[]&gt; buildArgsFilterMap(Map&lt;String, Object&gt; filterMap) {
        List&lt;<span class="hljs-type">byte</span>[]&gt; args = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-keyword">if</span>(filterMap.containsKey(ApiConstant.FILTER_BY_VALUE)){
            args.add(ApiConstant.FILTER_BY_VALUE.getBytes());
            <span class="hljs-type">byte</span>[] bytes = filterMap.get(ApiConstant.FILTER_BY_VALUE).toString().getBytes();
            args.add(bytes);
            filterMap.remove(ApiConstant.FILTER_BY_VALUE);
        }
        <span class="hljs-keyword">if</span> (filterMap != <span class="hljs-literal">null</span> &amp;&amp; !filterMap.isEmpty()) {
            args.add(<span class="hljs-string">"FILTER"</span>.getBytes());
            filterMap.forEach((key, value) -&gt; {
                <span class="hljs-type">String</span> <span class="hljs-variable">param</span> <span class="hljs-operator">=</span> key + <span class="hljs-string">"="</span> + value;
                args.add(param.getBytes());
            });

        }
        <span class="hljs-keyword">return</span> args;
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getBucketSizeMs</span><span class="hljs-params">(Long from, Long to, Integer windowSize, String dateType)</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">bucketSizeMs</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">if</span> (windowSize == <span class="hljs-literal">null</span>) {
            bucketSizeMs = to - from;
        } <span class="hljs-keyword">else</span> {
            bucketSizeMs = windowSize * getAdjTime(dateType);
        }
        <span class="hljs-keyword">return</span> bucketSizeMs;
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Long <span class="hljs-title function_">getAdjTime</span><span class="hljs-params">(String dateType)</span> {
        <span class="hljs-keyword">switch</span> (dateType) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">"MIN"</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-number">60</span> * <span class="hljs-number">1000L</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"HOUR"</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000L</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"DAY"</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000L</span>;
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-number">0L</span>;
        }
    }

    <span class="hljs-comment">/**
     * æŸ¥è¯¢æŸä¸ªæ—¶é—´èŒƒå›´å†…çš„æ—¶é—´åºåˆ—æ•°æ®
     *
     * <span class="hljs-doctag">@param</span> key  æ—¶é—´åºåˆ—çš„ keyï¼Œæ¯”å¦‚ "mytimeseries"
     * <span class="hljs-doctag">@param</span> from å¼€å§‹æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼Œæ¯”å¦‚ 1712345600000ï¼‰
     * <span class="hljs-doctag">@param</span> to   ç»“æŸæ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼Œæ¯”å¦‚ 1712345720000ï¼‰
     * <span class="hljs-doctag">@return</span> åŸå§‹è¿”å›ç»“æœï¼Œæ˜¯ä¸€ä¸ª List&lt;Object&gt;ï¼Œæ¯ä¸¤ä¸ªå…ƒç´ ä»£è¡¨ [timestamp, value]
     */</span>
    <span class="hljs-keyword">public</span> List&lt;TsResult&gt; <span class="hljs-title function_">queryTimeRange</span><span class="hljs-params">(String key, <span class="hljs-type">long</span> from, <span class="hljs-type">long</span> to, Map&lt;String, Object&gt; filterMap,String dataCode)</span> {
        <span class="hljs-type">byte</span>[][] args = buildTsRangeArgs(key, from, to, filterMap);

        <span class="hljs-type">LettuceConnection</span> <span class="hljs-variable">connection1</span> <span class="hljs-operator">=</span> getLettuceConnection();
        <span class="hljs-type">ObjectOutput</span> <span class="hljs-variable">keyValueListOutput</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectOutput</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringCodec</span>());
        List&lt;List&lt;Object&gt;&gt; execute = (List&lt;List&lt;Object&gt;&gt;) connection1.execute(<span class="hljs-string">"TS.RANGE"</span>, keyValueListOutput, args);

        List&lt;TsResult&gt; tsResults = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        execute.forEach(item -&gt; {
            dealResult(item, tsResults);
        });
        <span class="hljs-keyword">return</span> tsResults;

    }

    <span class="hljs-keyword">public</span> Map&lt;String, List&lt;TsResult&gt;&gt; <span class="hljs-title function_">queryTimeRangeByPipe</span><span class="hljs-params">(List&lt;String&gt; keys, String timeRange,String redisEleRange,String dataCode)</span> {
        Long[] dateArr = dateStrArrToLongArr(timeRange,dataCode);
        <span class="hljs-keyword">return</span> queryTimeRangeByPipe(keys, dateArr[<span class="hljs-number">0</span>], dateArr[<span class="hljs-number">1</span>],redisEleRange);
    }

    <span class="hljs-comment">/**
     * redis çš„pipe
     * å­˜åœ¨çš„é—®é¢˜ï¼šå¦‚æœå…¶ä¸­æœ‰ä¸€ä¸ªç«™ç‚¹çš„å€¼ä¸å­˜åœ¨ï¼Œåˆ™ä¼šæŠ¥é”™Caused by: io.lettuce.core.RedisCommandExecutionException: ERR TSDB: the key does not exist,é€šè¿‡é‡å†™çš„æ–¹å¼æ¥è§£å†³
     * 
     *
     * <span class="hljs-doctag">@param</span> keys
     * <span class="hljs-doctag">@param</span> from
     * <span class="hljs-doctag">@param</span> to
     * <span class="hljs-doctag">@return</span>
     */</span>
    <span class="hljs-keyword">public</span> Map&lt;String, List&lt;TsResult&gt;&gt; <span class="hljs-title function_">queryTimeRangeByPipe</span><span class="hljs-params">(List&lt;String&gt; keys, <span class="hljs-type">long</span> from, <span class="hljs-type">long</span> to,String redisEleRange)</span> {
        Map&lt;String, List&lt;TsResult&gt;&gt; output = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();

        <span class="hljs-type">LettuceConnection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> getLettuceConnection();

        RedisClusterAsyncCommands&lt;<span class="hljs-type">byte</span>[], <span class="hljs-type">byte</span>[]&gt; commands = connection.getNativeConnection();
        <span class="hljs-keyword">try</span> {

            <span class="hljs-comment">// 3. å¼€å¯ Pipeline æ¨¡å¼ï¼ˆå…³é—­è‡ªåŠ¨ flushï¼‰</span>
            commands.setAutoFlushCommands(<span class="hljs-literal">false</span>);


            List&lt;RedisFuture&lt;?&gt;&gt; futures = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();


            <span class="hljs-comment">// å•ç‹¬ä¿å­˜ TS.RANGE çš„ futures</span>
            List&lt;RedisFuture&lt;List&lt;Object&gt;&gt;&gt; tsRangeFutures = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

            <span class="hljs-keyword">for</span> (String tsKey : keys) {
                <span class="hljs-type">byte</span>[] keyBytes = tsKey.getBytes(StandardCharsets.UTF_8);

                <span class="hljs-type">ProtocolKeyword</span> <span class="hljs-variable">tsRangeKeyword</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProtocolKeyword</span>() {
                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> <span class="hljs-type">byte</span>[] getBytes() {
                        <span class="hljs-keyword">return</span> <span class="hljs-string">"TS.RANGE"</span>.getBytes(StandardCharsets.UTF_8);
                    }

                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">name</span><span class="hljs-params">()</span> {
                        <span class="hljs-keyword">return</span> <span class="hljs-string">"TS.RANGE"</span>;
                    }
                };

                CommandArgs&lt;<span class="hljs-type">byte</span>[], <span class="hljs-type">byte</span>[]&gt; args = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CommandArgs</span>&lt;&gt;(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayCodec</span>()).addKey(keyBytes).add(from).add(to);

                <span class="hljs-keyword">if</span>(StringUtils.isNotBlank(redisEleRange)){
                    args.add(ApiConstant.FILTER_BY_VALUE).add(redisEleRange);
                }

                <span class="hljs-type">ObjectOutput</span> <span class="hljs-variable">keyValueListOutput</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectOutput</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringCodec</span>());

                <span class="hljs-meta">@SuppressWarnings("unchecked")</span> RedisFuture&lt;List&lt;Object&gt;&gt; tsFuture = (RedisFuture&lt;List&lt;Object&gt;&gt;) commands.dispatch(tsRangeKeyword, keyValueListOutput, args);

                futures.add(tsFuture);
                tsRangeFutures.add(tsFuture);
            }

            <span class="hljs-comment">// æ‰§è¡Œ pipeline</span>
            commands.flushCommands();

            <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰å®Œæˆ</span>
            RedisFuture[] array = futures.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisFuture</span>[<span class="hljs-number">0</span>]);
            awaitAll(<span class="hljs-number">60</span>, TimeUnit.SECONDS, array);

            <span class="hljs-comment">// è§£æ TS.RANGE ç»“æœ</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">tsIndex</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
            <span class="hljs-keyword">for</span> (String tsKey : keys) {
                RedisFuture&lt;List&lt;Object&gt;&gt; tsFuture = tsRangeFutures.get(tsIndex);
                List&lt;Object&gt; rawTsData = <span class="hljs-literal">null</span>;
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-comment">/**
                     * é˜»å¡è·å–ç»“æœ
                     * è¿™é‡Œå¦‚æœè·å–ç»“æœå¤±è´¥ï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œç›´æ¥æ‰§è¡Œå¤±è´¥ï¼Œæˆ‘ä»¬éœ€è¦åˆ¶é€ ä¸€ä¸ªç©ºé›†åˆç»™åé¢ä½¿ç”¨
                     */</span>
                    rawTsData = tsFuture.get();
                } <span class="hljs-keyword">catch</span> (InterruptedException | ExecutionException e) {
                    rawTsData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
                }


<span class="hljs-comment">//                System.out.println("TS.RANGE ç»“æœ for key [" + tsKey + "]: " + rawTsData);</span>

                List&lt;TsResult&gt; tsResults = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
                <span class="hljs-keyword">if</span> (rawTsData != <span class="hljs-literal">null</span>) {

                    <span class="hljs-keyword">for</span> (Object item : rawTsData) {
                        <span class="hljs-keyword">if</span> (item <span class="hljs-keyword">instanceof</span> List) {
                            List&lt;?&gt; tsEntry = (List&lt;?&gt;) item;
                            <span class="hljs-keyword">if</span> (tsEntry.size() &gt;= <span class="hljs-number">2</span>) {
                                <span class="hljs-type">TsResult</span> <span class="hljs-variable">tsResult</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TsResult</span>();
                                <span class="hljs-type">Long</span> <span class="hljs-variable">timestamp</span> <span class="hljs-operator">=</span> ((Number) tsEntry.get(<span class="hljs-number">0</span>)).longValue();
                                <span class="hljs-type">Object</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> tsEntry.get(<span class="hljs-number">1</span>);
                                tsResult.setTime(timestamp);
                                tsResult.setVal((Double) value);
                                tsResult.setKey(DateUtil.longToLocalDateTime(timestamp));
                                tsResults.add(tsResult);
                            }
                        }
                    }
                }
                output.put(tsKey, tsResults);

                tsIndex++;
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            commands.setAutoFlushCommands(<span class="hljs-literal">true</span>);
            <span class="hljs-keyword">if</span> (connection != <span class="hljs-literal">null</span>) {
                RedisConnectionUtils.releaseConnection(connection, lettuceConnectionFactory);
            }
        }

        <span class="hljs-keyword">return</span> output;

    }

    <span class="hljs-keyword">private</span> LettuceConnection <span class="hljs-title function_">getLettuceConnection</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (connection != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> connection;
        }
        connection = (LettuceConnection) lettuceConnectionFactory.getConnection();
        <span class="hljs-keyword">return</span> connection;
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">executeLua</span><span class="hljs-params">()</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">luaScript</span> <span class="hljs-operator">=</span> <span class="hljs-string">"local from = tonumber(ARGV[#ARGV - 1]) "</span> + <span class="hljs-string">"local to = tonumber(ARGV[#ARGV]) "</span> + <span class="hljs-string">"if not from or not to then return { err = 'from å’Œ to å¿…é¡»æ˜¯æœ‰æ•ˆçš„æ—¶é—´æˆ³ï¼ˆæ¯«ç§’çº§æ•°å­—ï¼Œä¾‹å¦‚ 1760895600000ï¼‰' } end "</span> + <span class="hljs-string">"local result = {} "</span> + <span class="hljs-string">"for i = 1, #ARGV - 2 do "</span> + <span class="hljs-string">"  local key = ARGV[i] "</span> + <span class="hljs-string">"  local res = redis.call('TS.RANGE', key, from, to) "</span> + <span class="hljs-string">"  local row = { key } "</span> + <span class="hljs-string">"  for j = 1, #res do "</span> + <span class="hljs-string">"    table.insert(row, res[j][1]) "</span> + <span class="hljs-string">"    table.insert(row, res[j][2]) "</span> + <span class="hljs-string">"  end "</span> + <span class="hljs-string">"  table.insert(result, row) "</span> + <span class="hljs-string">"end "</span> + <span class="hljs-string">"return result"</span>;
        RedisScript&lt;Object&gt; objectRedisScript = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultRedisScript</span>&lt;&gt;(luaScript, Object.class);
        List&lt;String&gt; args1 = Arrays.asList(<span class="hljs-string">"pm:ts:52980:V13011"</span>, <span class="hljs-string">"pm:ts:52981:V13011"</span>, <span class="hljs-string">"pm:ts:52983:V13011"</span>, <span class="hljs-string">"pm:ts:53906:V13011"</span>, <span class="hljs-string">"pm:ts:53908:V13011"</span>, <span class="hljs-string">"1761068400000"</span>,  <span class="hljs-comment">// fromï¼ˆå­—ç¬¦ä¸²ï¼Œä½†ä¼šè¢« tonumbe() è½¬æˆæ•°å­—ï¼‰</span>
                <span class="hljs-string">"1761270000000"</span>   <span class="hljs-comment">// toï¼ˆå­—ç¬¦ä¸²ï¼Œä½†ä¼šè¢« tonumbe() è½¬æˆæ•°å­—ï¼‰</span>
        );
        List&lt;<span class="hljs-type">byte</span>[]&gt; argsList = Arrays.asList(<span class="hljs-string">"pm:ts:52980:V13011"</span>.getBytes(), <span class="hljs-string">"pm:ts:52981:V13011"</span>.getBytes(), <span class="hljs-string">"pm:ts:52983:V13011"</span>.getBytes(), <span class="hljs-string">"pm:ts:53906:V13011"</span>.getBytes(), <span class="hljs-string">"pm:ts:53908:V13011"</span>.getBytes(), <span class="hljs-string">"1761068400000"</span>.getBytes(),  <span class="hljs-comment">// fromï¼ˆå­—ç¬¦ä¸²ï¼Œä½†ä¼šè¢« tonumbe() è½¬æˆæ•°å­—ï¼‰</span>
                <span class="hljs-string">"1761270000000"</span>.getBytes()   <span class="hljs-comment">// toï¼ˆå­—ç¬¦ä¸²ï¼Œä½†ä¼šè¢« tonumbe() è½¬æˆæ•°å­—ï¼‰</span>
        );
        <span class="hljs-type">RedisSerializer</span> <span class="hljs-variable">stringRedisSerializer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringRedisSerializer</span>();
        <span class="hljs-type">JdkSerializationRedisSerializer</span> <span class="hljs-variable">jdkSerializationRedisSerializer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JdkSerializationRedisSerializer</span>();

        <span class="hljs-type">Object</span> <span class="hljs-variable">execute1</span> <span class="hljs-operator">=</span> redisTemplate.execute(objectRedisScript, stringRedisSerializer, jdkSerializationRedisSerializer, <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(), args1.toArray());
    }

    <span class="hljs-keyword">private</span> <span class="hljs-type">byte</span>[][] buildTsRangeArgs(String key, <span class="hljs-type">long</span> from, <span class="hljs-type">long</span> to, Map&lt;String, Object&gt; filterMap) {
        List&lt;<span class="hljs-type">byte</span>[]&gt; argsList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        argsList.add(key.getBytes());
        argsList.add(String.valueOf(from).getBytes());
        argsList.add(String.valueOf(to).getBytes());

        <span class="hljs-keyword">if</span> (filterMap != <span class="hljs-literal">null</span> &amp;&amp; !filterMap.isEmpty()) {
            argsList.add(<span class="hljs-string">"FILTER"</span>.getBytes());
            <span class="hljs-type">String</span> <span class="hljs-variable">filterStr</span> <span class="hljs-operator">=</span> filterMap.entrySet().stream().map(entry -&gt; entry.getKey() + <span class="hljs-string">"="</span> + entry.getValue()).collect(Collectors.joining(<span class="hljs-string">" "</span>));
            argsList.add(filterStr.getBytes());
        }

        <span class="hljs-keyword">return</span> argsList.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">0</span>][]);
    }

    <span class="hljs-keyword">public</span> List&lt;TsResult&gt; <span class="hljs-title function_">queryTimeRange</span><span class="hljs-params">(String key, Long[] longs, Map&lt;String, Object&gt; filterMap,String dataCode)</span> {
        <span class="hljs-keyword">return</span> queryTimeRange(key, longs[<span class="hljs-number">0</span>], longs[<span class="hljs-number">1</span>], filterMap,dataCode);
    }

    <span class="hljs-comment">/**
     * æŸ¥è¯¢æŸä¸ªæ—¶é—´èŒƒå›´å†…çš„æ—¶é—´åºåˆ—æ•°æ®
     *
     * <span class="hljs-doctag">@param</span> key       æ—¶é—´åºåˆ—çš„ keyï¼Œæ¯”å¦‚ "mytimeseries"
     * <span class="hljs-doctag">@param</span> timeRange æ—¶é—´èŒƒå›´ï¼Œæ ¼å¼ä¸º "[å¼€å§‹æ—¶é—´, ç»“æŸæ—¶é—´]"ï¼Œå¦‚ "[20251020014000,20251023064000]"
     * <span class="hljs-doctag">@return</span> åŸå§‹è¿”å›ç»“æœï¼Œæ˜¯ä¸€ä¸ª List&lt;Object&gt;ï¼Œæ¯ä¸¤ä¸ªå…ƒç´ ä»£è¡¨ [timestamp, value]
     */</span>
    <span class="hljs-keyword">public</span> List&lt;TsResult&gt; <span class="hljs-title function_">queryTimeRange</span><span class="hljs-params">(String key, String timeRange, Map&lt;String, Object&gt; filterMap,String dataCode)</span> {
        Long[] longs = dateStrArrToLongArr(timeRange,dataCode);
        <span class="hljs-keyword">return</span> queryTimeRange(key, longs[<span class="hljs-number">0</span>], longs[<span class="hljs-number">1</span>], filterMap,dataCode);
    }

    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">get</span><span class="hljs-params">(String key)</span> {
        <span class="hljs-keyword">return</span> redisTemplate.opsForValue().get(key);
    }

    <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">getObject</span><span class="hljs-params">(String key, Class&lt;T&gt; clazz)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> (String) redisTemplate.opsForValue().get(key);
        <span class="hljs-keyword">return</span> value == <span class="hljs-literal">null</span> ? <span class="hljs-literal">null</span> : JSON.parseObject(value, clazz);
    }

    <span class="hljs-comment">/**
     * è·å– HashMap æ•°æ®
     *
     * <span class="hljs-doctag">@param</span> key HashMap çš„ key
     * <span class="hljs-doctag">@return</span> HashMap æ•°æ®
     */</span>
    <span class="hljs-keyword">public</span> Map&lt;Object, Object&gt; <span class="hljs-title function_">getHash</span><span class="hljs-params">(String key)</span> {
        <span class="hljs-keyword">return</span> redisTemplate.opsForHash().entries(key);

    }


    <span class="hljs-comment">/**
     * è§£æ TS.MRANGE å‘½ä»¤è¿”å›çš„åŸå§‹æ•°æ®ï¼ˆList&lt;Object&gt;ï¼‰ï¼Œæ„é€  TsResult åˆ—è¡¨
     */</span>

    <span class="hljs-comment">/**
     * æ‰§è¡Œ TS.MRANGE å‘½ä»¤ï¼ŒæŸ¥è¯¢æ»¡è¶³ FILTER æ¡ä»¶çš„å¤šä¸ª TimeSeries åœ¨æŒ‡å®šæ—¶é—´èŒƒå›´å†…çš„æ•°æ®
     *
     * <span class="hljs-doctag">@param</span> timeRange æ—¶é—´èŒƒå›´ï¼Œæ ¼å¼ä¸º "[å¼€å§‹æ—¶é—´, ç»“æŸæ—¶é—´]"ï¼Œå¦‚ "[20251020014000,20251023064000]"
     * <span class="hljs-doctag">@param</span> filterMap æ ‡ç­¾è¿‡æ»¤æ¡ä»¶ï¼Œå¦‚ {"table": "pm", "station_id": "52889", "element": "V12001"}
     * <span class="hljs-doctag">@return</span> æŸ¥è¯¢ç»“æœï¼Œæ¯ä¸ªå…ƒç´ ä¸º TsResultï¼ˆåŒ…å« keyã€timestampã€valueï¼‰
     * <span class="hljs-doctag">@see</span> &lt;a href="https://oss.redis.com/redistimeseries/commands/#tsmrange"&gt;TS.MRANGE&lt;/a&gt;
     *
     */</span>
    <span class="hljs-keyword">public</span> Map&lt;String, List&lt;TsResult&gt;&gt; <span class="hljs-title function_">queryMrange</span><span class="hljs-params">(String timeRange, Map&lt;String, Object&gt; filterMap,String dataCode)</span> {
        Long[] longs = dateStrArrToLongArr(timeRange,dataCode);
        <span class="hljs-keyword">return</span> queryMrange(longs[<span class="hljs-number">0</span>], longs[<span class="hljs-number">1</span>], filterMap, <span class="hljs-string">"TS.MRANGE"</span>);
    }

    <span class="hljs-comment">/**
     *
     * æ‰§è¡Œ TS.MGET å‘½ä»¤ï¼ŒæŸ¥è¯¢æ»¡è¶³ FILTER æ¡ä»¶çš„å¤šä¸ª TimeSeries çš„æœ€æ–°æ•°æ®
     * ç¤ºä¾‹ï¼šTS.MGET FILTER table=pm station_id=(52889,52674) element=V13011
     *
     * <span class="hljs-doctag">@param</span> filterMap æ ‡ç­¾è¿‡æ»¤æ¡ä»¶ï¼Œå¦‚ {"table": "pm", "station_id": "52889", "element": "V12001"}
     * <span class="hljs-doctag">@return</span> æŸ¥è¯¢ç»“æœï¼Œæ¯ä¸ªå…ƒç´ ä¸º TsResultï¼ˆåŒ…å« keyã€timestampã€valueï¼‰
     * <span class="hljs-doctag">@see</span> &lt;a href="https://oss.redis.com/redistimeseries/commands/#tsmrange"&gt;TS.MGET&lt;/a&gt;
     *
     **/</span>
    <span class="hljs-keyword">public</span> Map&lt;String, List&lt;TsResult&gt;&gt; <span class="hljs-title function_">queryMget</span><span class="hljs-params">(Map&lt;String, Object&gt; filterMap)</span> {
        <span class="hljs-keyword">return</span> queryMrange(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, filterMap, <span class="hljs-string">"TS.MGET"</span>);
    }

    <span class="hljs-comment">/**
     * æ‰§è¡Œ TS.MRANGE å‘½ä»¤ï¼ŒæŸ¥è¯¢æ»¡è¶³ FILTER æ¡ä»¶çš„å¤šä¸ª TimeSeries åœ¨æŒ‡å®šæ—¶é—´èŒƒå›´å†…çš„æ•°æ®
     *
     * <span class="hljs-doctag">@param</span> from      å¼€å§‹æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
     * <span class="hljs-doctag">@param</span> to        ç»“æŸæ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
     * <span class="hljs-doctag">@param</span> filterMap æ ‡ç­¾è¿‡æ»¤æ¡ä»¶ï¼Œå¦‚ {"table": "pm", "station_id": "52889", "element": "V12001"}
     * <span class="hljs-doctag">@return</span> æŸ¥è¯¢ç»“æœï¼Œæ¯ä¸ªå…ƒç´ ä¸º TsResultï¼ˆåŒ…å« keyã€timestampã€valueï¼‰
     */</span>
    <span class="hljs-keyword">public</span> Map&lt;String, List&lt;TsResult&gt;&gt; <span class="hljs-title function_">queryMrange</span><span class="hljs-params">(Long from, Long to, Map&lt;String, Object&gt; filterMap, String cmd)</span> {
        <span class="hljs-comment">// 1. æ„é€  TS.MRANGE å‘½ä»¤çš„å‚æ•°</span>
        List&lt;<span class="hljs-type">byte</span>[]&gt; args = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">if</span> (from == <span class="hljs-literal">null</span> &amp;&amp; to == <span class="hljs-literal">null</span>) {
            args = buildArgsFilterMap(filterMap);
        } <span class="hljs-keyword">else</span> {
            args = buildMrangeArgs(from, to, filterMap);
        }

        <span class="hljs-keyword">return</span> executeCmdByArgs(cmd, args, <span class="hljs-literal">null</span>);
    }

    <span class="hljs-keyword">private</span> Map&lt;String, List&lt;TsResult&gt;&gt; <span class="hljs-title function_">executeCmdByArgs</span><span class="hljs-params">(String cmd, List&lt;<span class="hljs-type">byte</span>[]&gt; args, String key)</span> {
        <span class="hljs-comment">// 2. è·å– Lettuce åŸç”Ÿè¿æ¥</span>
        <span class="hljs-type">LettuceConnection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> getLettuceConnection();

        <span class="hljs-comment">// 3. æ‰§è¡Œ TS.MRANGE å‘½ä»¤</span>
        <span class="hljs-type">ObjectOutput</span> <span class="hljs-variable">keyValueListOutput</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectOutput</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringCodec</span>());
        <span class="hljs-type">Object</span> <span class="hljs-variable">execute</span> <span class="hljs-operator">=</span> connection.execute(cmd, keyValueListOutput, args.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">0</span>][]));
        Map&lt;String, List&lt;Object&gt;&gt; rawResult = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">if</span> (execute <span class="hljs-keyword">instanceof</span> List) {
            Map&lt;String, List&lt;Object&gt;&gt; objectObjectHashMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            objectObjectHashMap.put(key, (List&lt;Object&gt;) execute);
            rawResult = objectObjectHashMap;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (execute <span class="hljs-keyword">instanceof</span> Map) {
            rawResult = (Map&lt;String, List&lt;Object&gt;&gt;) execute;
        }

        <span class="hljs-comment">// 4. è§£æè¿”å›ç»“æœï¼Œæ„é€  TsResult åˆ—è¡¨</span>
        <span class="hljs-keyword">return</span> convertToTsResultMap(rawResult);
    }

    <span class="hljs-comment">/**
     * æ„é€  TS.MRANGE å‘½ä»¤çš„å‚æ•°ï¼ˆbyte[] æ ¼å¼ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> List&lt;<span class="hljs-type">byte</span>[]&gt; buildMrangeArgs(Long from, Long to, Map&lt;String, Object&gt; filterMap) {
        List&lt;<span class="hljs-type">byte</span>[]&gt; args = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        args.add(String.valueOf(from).getBytes());  <span class="hljs-comment">// from (timestamp)</span>
        args.add(String.valueOf(to).getBytes());    <span class="hljs-comment">// to (timestamp)</span>

        List&lt;<span class="hljs-type">byte</span>[]&gt; bytes = buildArgsFilterMap(filterMap);
        args.addAll(bytes);
        <span class="hljs-keyword">return</span> args;
    }

    <span class="hljs-comment">/**
     * æ„ä»¶ç»Ÿè®¡å‚æ•°-å¤šä¸ªç«™ç‚¹ï¼Œå¤šä¸ªè¦ç´ ï¼ˆè¿™é‡Œåªèƒ½ç»Ÿè®¡å¤šç«™ç‚¹ã€å•è¦ç´ ï¼‰
     * TS.MRANGE 1761323040000 1761526920000   AGGREGATION sum 203880000 BUCKETTIMESTAMP + FILTER station_id=(52889,52881) table=pm GROUPBY station_id REDUCE min
     * TS.MRANGE 1701323040000 1761526920000   AGGREGATION sum 203880000 BUCKETTIMESTAMP + FILTER station_id=(52889,52881) table=mm GROUPBY station_id REDUCE min
     * TS.MRANGE 1729787040000 1761872520000   AGGREGATION sum 203880000 BUCKETTIMESTAMP + FILTER station_id=(52980,52881,52889) element=(V12001,V11291) table=mm GROUPBY station_id   REDUCE min
     * TS.MRANGE 1729787040000 1761872520000   AGGREGATION sum 203880000 BUCKETTIMESTAMP + FILTER station_id=(52980,52881,52889) element=(V11291) table=mm GROUPBY station_id,element   REDUCE min ï¼ˆä¸è¡Œï¼‰
     * TS.MRANGE 1729787040000 1761872520000   AGGREGATION sum 203880000 BUCKETTIMESTAMP + FILTER station_id=(52980,52881,52889) element=(V12001) table=mm GROUPBY station_id   REDUCE min
     * TS.MRANGE 1729787040000 1761872520000   FILTER station_id=(52980,52881,52889) element=(V12001) table=mm AGGREGATION sum 203880000 BUCKETTIMESTAMP +  GROUPBY station_id   REDUCE min
     *
     * <span class="hljs-doctag">@param</span> from
     * <span class="hljs-doctag">@param</span> to
     * <span class="hljs-doctag">@param</span> stationIds
     * <span class="hljs-doctag">@param</span> table
     * <span class="hljs-doctag">@return</span>
     */</span>
    <span class="hljs-keyword">private</span> List&lt;<span class="hljs-type">byte</span>[]&gt; buildStatMrangeArgs(Long from, Long to, List&lt;String&gt; stationIds, List&lt;String&gt; elements, String table, String dateType,String redisEleRange) {
        List&lt;<span class="hljs-type">byte</span>[]&gt; args = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        args.add(String.valueOf(from).getBytes());
        args.add(String.valueOf(to).getBytes());
        <span class="hljs-keyword">if</span>(StringUtils.isNotBlank(redisEleRange)){
            args.add(ApiConstant.FILTER_BY_VALUE.getBytes());
            args.add(redisEleRange.getBytes());
        }
        args.add(<span class="hljs-string">"AGGREGATION"</span>.getBytes());
        args.add(<span class="hljs-string">"sum"</span>.getBytes());
        <span class="hljs-type">long</span> <span class="hljs-variable">bucket_size_ms</span> <span class="hljs-operator">=</span> to - from;
        args.add(String.valueOf(bucket_size_ms).getBytes());
        args.add(<span class="hljs-string">"BUCKETTIMESTAMP"</span>.getBytes());
        args.add(<span class="hljs-string">"+"</span>.getBytes());
        args.add(<span class="hljs-string">"ALIGN"</span>.getBytes());
        <span class="hljs-type">long</span> <span class="hljs-variable">alignTime</span> <span class="hljs-operator">=</span> getAlignTime(from, bucket_size_ms, dateType);
        args.add(String.valueOf(alignTime).getBytes());
        args.add(<span class="hljs-string">"FILTER"</span>.getBytes());
        args.add((<span class="hljs-string">"station_id=("</span> + String.join(<span class="hljs-string">","</span>, stationIds) + <span class="hljs-string">")"</span>).getBytes());
        args.add((<span class="hljs-string">"element=("</span> + String.join(<span class="hljs-string">","</span>, elements) + <span class="hljs-string">")"</span>).getBytes());
        args.add((<span class="hljs-string">"table="</span> + table).getBytes());
        args.add(<span class="hljs-string">"GROUPBY"</span>.getBytes());
        args.add(<span class="hljs-string">"station_id"</span>.getBytes());
<span class="hljs-comment">//        args.add("element".getBytes());</span>
        args.add(<span class="hljs-string">"REDUCE"</span>.getBytes());
        args.add(<span class="hljs-string">"min"</span>.getBytes());
        <span class="hljs-keyword">return</span> args;
    }

    <span class="hljs-comment">/**
     * æ„ä»¶å•ç«™ç‚¹çš„ èšåˆæˆ–è€…5åˆ†é’Ÿçš„èšåˆ
     * TS.RANGE pm:ts:52889:V13011 1761323040000 1761526920000  AGGREGATION sum 203880000 BUCKETTIMESTAMP + ALIGN align_time
     * TS.RANGE pm:ts:52889:V13011 1761323040000 1761526920000 FILTER_BY_VALUE -inf 30  AGGREGATION sum 203880000 BUCKETTIMESTAMP + ALIGN align_time
     *
     * <span class="hljs-doctag">@param</span> from
     * <span class="hljs-doctag">@param</span> to
     * <span class="hljs-doctag">@param</span> key
     * <span class="hljs-doctag">@return</span>
     */</span>
    <span class="hljs-keyword">private</span> List&lt;<span class="hljs-type">byte</span>[]&gt; buildStatRangeArgs(Long from, Long to, String key, StatParam statParam, String dateType,String redisEleRange) {
        <span class="hljs-type">Integer</span> <span class="hljs-variable">windowSize</span> <span class="hljs-operator">=</span> statParam.getWindowSize();
        <span class="hljs-type">String</span> <span class="hljs-variable">statType</span> <span class="hljs-operator">=</span> statParam.getStatType();
        List&lt;<span class="hljs-type">byte</span>[]&gt; args = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        args.add(key.getBytes());
        args.add(String.valueOf(from).getBytes());
        args.add(String.valueOf(to).getBytes());
        <span class="hljs-keyword">if</span>(StringUtils.isNotBlank(redisEleRange)){
            args.add(ApiConstant.FILTER_BY_VALUE.getBytes());
            args.add(redisEleRange.getBytes());
        }
        args.add(<span class="hljs-string">"AGGREGATION"</span>.getBytes());
        args.add(statType.getBytes());
        <span class="hljs-type">long</span> <span class="hljs-variable">bucket_size_ms</span> <span class="hljs-operator">=</span> getBucketSizeMs(from, to, windowSize, dateType);
        args.add(String.valueOf(bucket_size_ms).getBytes());
        args.add(<span class="hljs-string">"BUCKETTIMESTAMP"</span>.getBytes());
        args.add(<span class="hljs-string">"+"</span>.getBytes());
        args.add(<span class="hljs-string">"ALIGN"</span>.getBytes());
        <span class="hljs-type">long</span> <span class="hljs-variable">alignTime</span> <span class="hljs-operator">=</span> getAlignTime(from, bucket_size_ms, dateType);
        args.add(String.valueOf(alignTime).getBytes());
        <span class="hljs-keyword">return</span> args;
    }

    <span class="hljs-comment">/**
     * è·å–å¯¹é½æ—¶é—´
     * align_time = (start_ts // bucket_size_ms) * bucket_size_ms+ adj_time
     *
     * <span class="hljs-doctag">@param</span> from
     * <span class="hljs-doctag">@param</span> bucket_size_ms
     * <span class="hljs-doctag">@param</span> dateType
     * <span class="hljs-doctag">@param</span> dateType
     * <span class="hljs-doctag">@return</span>
     */</span>
    <span class="hljs-keyword">private</span> Long <span class="hljs-title function_">getAlignTime</span><span class="hljs-params">(Long from, <span class="hljs-type">long</span> bucket_size_ms, String dateType)</span> {
        <span class="hljs-keyword">return</span> from / bucket_size_ms * bucket_size_ms + getAdjTime(dateType);
    }

    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getKey</span><span class="hljs-params">(String stationId, String table, String element)</span> {
        <span class="hljs-keyword">return</span> table + <span class="hljs-string">":ts:"</span> + stationId + <span class="hljs-string">":"</span> + element;
    }

    <span class="hljs-comment">/**
     * æ•°æ®ç»Ÿè®¡
     * 1.å¦‚æœæ˜¯å•ä¸ªç«™ç‚¹ï¼ŒæŒ‰ç…§å•ä¸ªç«™ç‚¹çš„æ–¹å¼è¿›è¡Œèšåˆ
     * TS.RANGE pm:ts:52889:V13011 start_ts end_ts  AGGREGATION sum bucket_size_ms BUCKETTIMESTAMP + ALIGN align_time
     * TS.RANGE pm:ts:52889:V13011 1761323040000 1761526920000  AGGREGATION sum 203880000 BUCKETTIMESTAMP + ALIGN align_time
     * 2.å¦‚æœæ˜¯å¤šä¸ªç«™ç‚¹ï¼ŒæŒ‰ç…§å¤šä¸ªç«™ç‚¹è¿›è¡Œèšåˆ
     * TS.MRANGE 1761323040000 1761526920000   AGGREGATION sum 203880000 BUCKETTIMESTAMP + FILTER station_id=(52889,52881) table=pm GROUPBY station_id REDUCE min
     * 3.éœ€è¦åŒºåˆ†ä¸€ä¸‹æ˜¯ä¸æ˜¯5åˆ†é’Ÿçš„èšåˆæ–¹å¼
     *
     * <span class="hljs-doctag">@param</span> timeRange  æ—¶é—´èŒƒå›´ [start_ts, end_ts]
     * <span class="hljs-doctag">@param</span> stationIds ç«™ç‚¹ç¼–å·
     * <span class="hljs-doctag">@param</span> table      è¡¨å pm/mm
     * <span class="hljs-doctag">@return</span>
     */</span>
    <span class="hljs-keyword">public</span> Map&lt;String, List&lt;TsResult&gt;&gt; <span class="hljs-title function_">statTsDataMiddle</span><span class="hljs-params">(String timeRange, List&lt;String&gt; stationIds, List&lt;String&gt; elements, String table, StatParam statParam, String dateType,String redisEleRange,String dataCode)</span> {
        Long[] timeParamArr = dateStrArrToLongArr(timeRange,dataCode);
        <span class="hljs-keyword">if</span> (stationIds.isEmpty()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OuterException</span>(RetCode.BAD_REQUEST, <span class="hljs-string">"ç«™ç‚¹ç¼–å·ä¸èƒ½ä¸ºç©º"</span>);
        }
        <span class="hljs-keyword">if</span> (elements.isEmpty()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OuterException</span>(RetCode.BAD_REQUEST, <span class="hljs-string">"è¦ç´ ä¸èƒ½ä¸ºç©º"</span>);
        }
        <span class="hljs-keyword">if</span> (stationIds.size() == <span class="hljs-number">1</span> &amp;&amp; elements.size() == <span class="hljs-number">1</span>) {
            <span class="hljs-comment">//å•ç«™ç‚¹ã€å•è¦ç´ æŒ‰ç…§ TS.RANGEçš„æ–¹å¼è¿›è¡Œç»Ÿè®¡</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> getKey(stationIds.get(<span class="hljs-number">0</span>), table, elements.get(<span class="hljs-number">0</span>));
            List&lt;<span class="hljs-type">byte</span>[]&gt; args = buildStatRangeArgs(timeParamArr[<span class="hljs-number">0</span>], timeParamArr[<span class="hljs-number">1</span>], key, statParam, dateType,redisEleRange);
            <span class="hljs-keyword">return</span> executeCmdByArgs(<span class="hljs-string">"TS.RANGE"</span>, args, key);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">//å¤šç«™ç‚¹ã€å•è¦ç´ æŒ‰ç…§ TS.MRANGEçš„æ–¹å¼è¿›è¡Œç»Ÿè®¡</span>
            List&lt;<span class="hljs-type">byte</span>[]&gt; args = buildStatMrangeArgs(timeParamArr[<span class="hljs-number">0</span>], timeParamArr[<span class="hljs-number">1</span>], stationIds, elements, table, dateType,redisEleRange);
            Map&lt;String, List&lt;TsResult&gt;&gt; stringListMap = executeCmdByArgs(<span class="hljs-string">"TS.MRANGE"</span>, args, <span class="hljs-literal">null</span>);
            <span class="hljs-comment">//ç»“æœå€¼è½¬æ¢</span>
            <span class="hljs-keyword">return</span> convertToResultMap(stringListMap, table, elements.get(<span class="hljs-number">0</span>));
        }

    }

    <span class="hljs-keyword">private</span> Map&lt;String, List&lt;TsResult&gt;&gt; <span class="hljs-title function_">convertToResultMap</span><span class="hljs-params">(Map&lt;String, List&lt;TsResult&gt;&gt; stringListMap, String tableName, String ele)</span> {
        <span class="hljs-keyword">return</span> stringListMap.entrySet()
                .stream()
                .collect(Collectors.toMap(
                        entry -&gt; buildNewKey(entry.getKey(), tableName, ele),
                        Map.Entry::getValue
                ));
    }

    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">buildNewKey</span><span class="hljs-params">(String originalKey, String tableName, String ele)</span> {
        String[] split = originalKey.split(<span class="hljs-string">"="</span>);
        <span class="hljs-keyword">return</span> tableName + <span class="hljs-string">":ts:"</span> + split[<span class="hljs-number">1</span>] + <span class="hljs-string">":"</span> + ele;
    }

    <span class="hljs-comment">/**
     * åŸºäºredisçš„æ•°æ®ç»Ÿè®¡ç»“æœï¼Œåšä¸¤ä»¶äº‹
     * 1.å¦‚æœæ˜¯çª—å£èšåˆï¼Œä½¿ç”¨ALIGNå‚æ•°è°ƒæ•´æ¡¶çš„å¼€å§‹æ—¶é—´ï¼Œä½¿å…¶ä»01å¼€å§‹ï¼Œè·å–çš„æ—¶é—´æˆ³å‡å»adj_timeï¼Œå¾—åˆ°å®é™…çš„èšåˆæ—¶é—´
     * 2.ç»Ÿä¸€å¤„ç†mapçš„keyï¼Œè®©å…¶åé¢çš„æµç¨‹å¯ç»Ÿä¸€å¤„ç†
     *
     * <span class="hljs-doctag">@param</span> timeRange
     * <span class="hljs-doctag">@param</span> stationIds
     * <span class="hljs-doctag">@param</span> elements
     * <span class="hljs-doctag">@param</span> table
     * <span class="hljs-doctag">@return</span>
     */</span>
    <span class="hljs-keyword">public</span> Map&lt;String, List&lt;TsResult&gt;&gt; <span class="hljs-title function_">statTsData</span><span class="hljs-params">(String timeRange, List&lt;String&gt; stationIds, List&lt;String&gt; elements, String table, String dateType, StatParam statParam,String redisEleRange,String dataCode)</span> {
        Map&lt;String, List&lt;TsResult&gt;&gt; stringListMap = statTsDataMiddle(timeRange, stationIds, elements, table, statParam, dateType,redisEleRange,dataCode);
        <span class="hljs-keyword">if</span> (statParam.getWindowSize() == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> stringListMap;
        }
        <span class="hljs-keyword">return</span> stringListMap.entrySet().stream().collect(Collectors.toMap(entry -&gt; entry.getKey(), entry -&gt; entry.getValue().stream().map(result -&gt; {
            <span class="hljs-type">long</span> <span class="hljs-variable">l</span> <span class="hljs-operator">=</span> result.getTime() - getAdjTime(dateType);
            result.setTime(l);
            result.setKey(DateUtil.longToLocalDateTime(l));
            <span class="hljs-keyword">return</span> result;
        }).collect(Collectors.toList())));
    }


    <span class="hljs-comment">/**
     * è·å–æ‰€æœ‰ä»¥ meta:staid: å¼€å¤´çš„ Hash Keyï¼Œå¹¶è¿”å›å®ƒä»¬çš„ HGETALL æ•°æ®
     */</span>
    <span class="hljs-keyword">public</span> Map&lt;String, Map&lt;String, Object&gt;&gt; <span class="hljs-title function_">getAllMetaStaidHashes</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// 1. ä½¿ç”¨ keys() æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…çš„ key</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> <span class="hljs-string">"meta:staid:*"</span>;
        Set&lt;String&gt; keys = redisTemplate.keys(pattern);

        <span class="hljs-keyword">if</span> (keys == <span class="hljs-literal">null</span> || keys.isEmpty()) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        }

        Map&lt;String, Map&lt;String, Object&gt;&gt; collect = keys.stream().collect(Collectors.toMap(key -&gt; key.split(<span class="hljs-string">":"</span>)[<span class="hljs-number">2</span>], key -&gt; {
            <span class="hljs-comment">// è·å–åŸå§‹ Hash æ•°æ®ï¼šMap&lt;Object, Object&gt;</span>
            Map&lt;Object, Object&gt; rawEntries = redisTemplate.opsForHash().entries(key);

            <span class="hljs-comment">// è½¬æ¢ä¸º Map&lt;String, Object&gt;</span>
            Map&lt;String, Object&gt; stringifiedEntries = rawEntries.entrySet().stream().collect(Collectors.toMap(entry -&gt; entry.getKey().toString(),          <span class="hljs-comment">// å­—æ®µåè½¬ String</span>
                    entry -&gt; entry.getValue()                  <span class="hljs-comment">// å­—æ®µå€¼ä¿æŒ Object</span>
            ));
            <span class="hljs-keyword">return</span> stringifiedEntries;
        }));
        <span class="hljs-keyword">return</span> collect;
    }




}

</code></pre>
<pre><code class="hljs language-xml" lang="xml">package com.dfec.api.entity;

import java.time.LocalDateTime;

/**
 *
 * @author tangrg
 * @email 1446232546@qq.com
 * @date 2025-10-2025/10/23 10:38:06
 */
public class TsResult {

    private Long time;

    private LocalDateTime  key;

    private Double val;

    public Long getTime() {
        return time;
    }

    public void setTime(Long time) {
        this.time = time;
    }

    public LocalDateTime getKey() {
        return key;
    }

    public void setKey(LocalDateTime key) {
        this.key = key;
    }

    public Double getVal() {
        return val;
    }

    public void setVal(Double val) {
        this.val = val;
    }
}

</code></pre>
<p>æœ€è¿‘é¡¹ç›®æ¯”è¾ƒèµ¶ï¼Œå…¶å®å¯ä»¥è€ƒè™‘å°†è¿™éƒ¨åˆ†å°è£…æˆä¸€ä¸ªstarteræ¥ä½¿ç”¨ï¼Œåé¢æœ‰æ—¶é—´ä¼šè€ƒè™‘</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CSS åƒç´ â‰ ç‰©ç†åƒç´ ï¼š0.5px æ•ˆæœçš„æ ¸å¿ƒå¯†ç æ˜¯ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7572161976594137140</link>    <guid>https://juejin.cn/post/7572161976594137140</guid>    <pubDate>2025-11-14T09:02:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572161976594137140" data-draft-id="7572141390857502720" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CSS åƒç´ â‰ ç‰©ç†åƒç´ ï¼š0.5px æ•ˆæœçš„æ ¸å¿ƒå¯†ç æ˜¯ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,CSS,é¢è¯•"/> <meta itemprop="datePublished" content="2025-11-14T09:02:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹‰ä¸åŠ¨çš„çŒª"/> <meta itemprop="url" content="https://juejin.cn/user/1429793504759630"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CSS åƒç´ â‰ ç‰©ç†åƒç´ ï¼š0.5px æ•ˆæœçš„æ ¸å¿ƒå¯†ç æ˜¯ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1429793504759630/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹‰ä¸åŠ¨çš„çŒª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T09:02:17.000Z" title="Fri Nov 14 2025 09:02:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    38
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="an-old-hope">.hljs-comment,.hljs-quote{color:#b6b18b}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#eb3c54}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#e7ce56}.hljs-attribute{color:#ee7c2b}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#4fb4d7}.hljs-section,.hljs-title{color:#78bb65}.hljs-keyword,.hljs-selector-tag{color:#b45ea4}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1c1d21;color:#c0c5ce}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å…ˆæ˜ç¡®ä¸¤è€…çš„å…³ç³»ï¼š<strong>CSS åƒç´ æ˜¯ â€œé€»è¾‘åƒç´ â€ï¼ˆé¡µé¢å¸ƒå±€ç”¨ï¼‰ï¼Œç‰©ç†åƒç´ æ˜¯å±å¹•å®é™…å‘å…‰çš„åƒç´ ç‚¹</strong>ï¼Œä¸¤è€…é€šè¿‡Â <strong>è®¾å¤‡åƒç´ æ¯”ï¼ˆDPRï¼‰</strong> Â å…³è”ï¼Œå…¬å¼ä¸ºï¼š<code>1 ä¸ª CSS åƒç´  = DPR Ã— DPR ä¸ªç‰©ç†åƒç´ </code>ï¼ˆä»…é«˜æ¸…å±ç¼©æ”¾ä¸º 1 æ—¶ï¼‰ã€‚</p>
<p>ç†è§£è¿™ä¸ªæ ¸å¿ƒå…³ç³»åï¼Œå†çœ‹ 0.5px æ•ˆæœçš„å®ç°é€»è¾‘å°±æ›´æ¸…æ™°äº†ï¼Œä»¥ä¸‹é‡æ–°æ•´ç†ï¼ˆé‡ç‚¹è¡¥å……åƒç´ å…³ç³»ï¼Œå†å¯¹åº”æ–¹æ³•ï¼‰ï¼š</p>
<h3 data-id="heading-0">ä¸€ã€å…ˆææ‡‚ï¼šCSS åƒç´ ã€ç‰©ç†åƒç´ ã€DPR çš„æ ¸å¿ƒå…³ç³»</h3>
<ol>
<li>
<p><strong>å®šä¹‰</strong></p>
<ul>
<li>
<p>CSS åƒç´ ï¼šå†™ä»£ç æ—¶ç”¨çš„å•ä½ï¼ˆå¦‚Â <code>width: 100px</code>ï¼‰ï¼Œæ˜¯æµè§ˆå™¨æ¸²æŸ“å¸ƒå±€çš„ â€œé€»è¾‘å•ä½â€ï¼Œå’Œå±å¹•ç¡¬ä»¶æ— å…³ã€‚</p>
</li>
<li>
<p>ç‰©ç†åƒç´ ï¼šå±å¹•é¢æ¿ä¸Šå®é™…çš„å‘å…‰ç‚¹ï¼ˆå¦‚æ‰‹æœºå±åˆ†è¾¨ç‡ 1080Ã—2340ï¼Œå°±æ˜¯æ¨ªå‘ 1080 ä¸ªã€çºµå‘ 2340 ä¸ªç‰©ç†åƒç´ ï¼‰ï¼Œæ˜¯å±å¹•çš„ç¡¬ä»¶å±æ€§ã€‚</p>
</li>
<li>
<p>DPRï¼ˆè®¾å¤‡åƒç´ æ¯”ï¼‰ï¼š<code>DPR = ç‰©ç†åƒç´ å®½åº¦ / CSS åƒç´ å®½åº¦</code>ï¼ˆé»˜è®¤é¡µé¢ç¼©æ”¾ä¸º 1 æ—¶ï¼‰ï¼Œç”±è®¾å¤‡ç¡¬ä»¶å†³å®šã€‚</p>
<ul>
<li>ä¾‹ 1ï¼šè€æ¬¾æ™®é€šå±ï¼ˆDPR=1ï¼‰ï¼š1 ä¸ª CSS åƒç´  = 1Ã—1 ä¸ªç‰©ç†åƒç´ ï¼ˆå†™Â <code>1px</code>Â å°±å¯¹åº”å±å¹• 1 ä¸ªå‘å…‰ç‚¹ï¼‰ã€‚</li>
<li>ä¾‹ 2ï¼šé«˜æ¸…å±ï¼ˆDPR=2ï¼Œå¦‚ iPhone 8ï¼‰ï¼š1 ä¸ª CSS åƒç´  = 2Ã—2 ä¸ªç‰©ç†åƒç´ ï¼ˆå†™Â <code>1px</code>Â å®é™…å ç”¨å±å¹• 4 ä¸ªå‘å…‰ç‚¹ï¼Œè§†è§‰ä¸Šæ›´ç²—ï¼‰ã€‚</li>
<li>ä¾‹ 3ï¼šè¶…é«˜æ¸…å±ï¼ˆDPR=3ï¼Œå¦‚ iPhone 14 Proï¼‰ï¼š1 ä¸ª CSS åƒç´  = 3Ã—3 ä¸ªç‰©ç†åƒç´ ï¼ˆå†™Â <code>1px</code>Â å ç”¨ 9 ä¸ªå‘å…‰ç‚¹ï¼Œæ›´ç²—ï¼‰ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>å…³é”®ç»“è®º</strong></p>
<ul>
<li>æˆ‘ä»¬æƒ³è¦çš„ â€œ0.5px æ•ˆæœâ€ï¼Œæœ¬è´¨æ˜¯Â <strong>è®©çº¿æ¡åªå ç”¨ 1 ä¸ªç‰©ç†åƒç´ </strong>ï¼ˆè§†è§‰ä¸Šæœ€ç»†ï¼‰ã€‚</li>
<li>ä½†é«˜æ¸…å±ï¼ˆDPRâ‰¥2ï¼‰é»˜è®¤ä¸‹ï¼Œ1 ä¸ª CSS åƒç´ ä¼šå ç”¨å¤šä¸ªç‰©ç†åƒç´ ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥å†™Â <code>1px</code>ï¼Œéœ€è¦é€šè¿‡æ–¹æ³• â€œå‹ç¼©â€ CSS åƒç´ å¯¹åº”çš„ç‰©ç†åƒç´ æ•°é‡ï¼Œæœ€ç»ˆè½åˆ° 1 ä¸ªç‰©ç†åƒç´ ä¸Šã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-1">äºŒã€æŒ‰ DPR è¦æ±‚åˆ†ç±»çš„ 0.5px å®ç°æ–¹æ³•ï¼ˆç»“åˆåƒç´ å…³ç³»ï¼‰</h3>
<h4 data-id="heading-2">ï¼ˆä¸€ï¼‰ä»… DPRâ‰¥2 ç”Ÿæ•ˆï¼šç›´æ¥è®© CSS åƒç´ å¯¹åº” 1 ä¸ªç‰©ç†åƒç´ </h4>
<p>æ ¸å¿ƒé€»è¾‘ï¼šåˆ©ç”¨ DPRâ‰¥2 çš„åƒç´ æ˜ å°„å…³ç³»ï¼Œè®© CSS åƒç´ ç»è¿‡è®¡ç®—åï¼Œåˆšå¥½å¯¹åº” 1 ä¸ªç‰©ç†åƒç´ ã€‚</p>
<h5 data-id="heading-3">1. ç›´æ¥å£°æ˜Â <code>0.5px</code></h5>
<ul>
<li><strong>åƒç´ å…³ç³»</strong>ï¼šDPR=2 æ—¶ï¼Œ<code>0.5px</code>Â CSS åƒç´  = 0.5Ã—2 = 1 ä¸ªç‰©ç†åƒç´ ï¼ˆåˆšå¥½æ»¡è¶³éœ€æ±‚ï¼‰ï¼›DPR=3 æ—¶ï¼Œ<code>0.5px</code>Â CSS åƒç´  = 0.5Ã—3 = 1.5 ä¸ªç‰©ç†åƒç´ ï¼ˆæ¥è¿‘ç»†çº¿æ¡ï¼Œè§†è§‰å¯æ¥å—ï¼‰ã€‚</li>
<li><strong>å‰æ</strong>ï¼šDPRâ‰¥2 + æµè§ˆå™¨æ”¯æŒäºšåƒç´ æ¸²æŸ“ï¼ˆiOS 9+ã€Android 8.0+ï¼‰ã€‚</li>
<li><strong>ä»£ç </strong>ï¼š<code>border: 0.5px solid #000;</code></li>
<li><strong>å±€é™</strong>ï¼šDPR=1 æ—¶ï¼Œ<code>0.5px</code>Â CSS åƒç´  = 0.5Ã—1 = 0.5 ä¸ªç‰©ç†åƒç´ ï¼ˆå±å¹•æ— æ³•æ¸²æŸ“ï¼Œä¼šå››èˆäº”å…¥ä¸º 0px æˆ– 1pxï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-4">2.Â <code>transform: scale(0.5)</code>Â ç¼©æ”¾</h5>
<ul>
<li>
<p><strong>åƒç´ å…³ç³»</strong>ï¼šå…ˆå†™Â <code>1px</code>Â CSS åƒç´ ï¼ˆDPR=2 æ—¶å¯¹åº” 2 ä¸ªç‰©ç†åƒç´ ï¼‰ï¼Œå†ç¼©æ”¾ 50%ï¼Œæœ€ç»ˆ 2Ã—50% = 1 ä¸ªç‰©ç†åƒç´ ã€‚</p>
</li>
<li>
<p><strong>å‰æ</strong>ï¼šDPRâ‰¥2ï¼ˆåªæœ‰ DPRâ‰¥2 æ—¶ï¼Œ1px CSS åƒç´ æ‰ä¼šå¯¹åº” â‰¥2 ä¸ªç‰©ç†åƒç´ ï¼Œç¼©æ”¾åæ‰èƒ½è½åˆ° 1 ä¸ªï¼‰ã€‚</p>
</li>
<li>
<p><strong>ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.line</span><span class="hljs-selector-pseudo">::after</span> {
  <span class="hljs-attribute">content</span>: <span class="hljs-string">''</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">200%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">1px</span>; <span class="hljs-comment">/* 1px CSS = 2 ç‰©ç†åƒç´ ï¼ˆDPR=2ï¼‰ */</span>
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#000</span>;
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">0.5</span>); <span class="hljs-comment">/* 2 ç‰©ç†åƒç´  Ã— 0.5 = 1 ç‰©ç†åƒç´  */</span>
}
</code></pre>
</li>
<li>
<p><strong>å±€é™</strong>ï¼šDPR=1 æ—¶ï¼Œ1px CSS åƒç´  = 1 ç‰©ç†åƒç´ ï¼Œç¼©æ”¾åå˜æˆ 0.5 ç‰©ç†åƒç´ ï¼ˆå±å¹•æ— æ³•æ¸²æŸ“ï¼Œçº¿æ¡æ¶ˆå¤±æˆ–æ¨¡ç³Šï¼‰ã€‚</p>
</li>
</ul>
<h5 data-id="heading-5">3.Â <code>viewport</code>Â ç¼©æ”¾ï¼ˆå…¨å±€æ–¹æ¡ˆï¼‰</h5>
<ul>
<li>
<p><strong>åƒç´ å…³ç³»</strong>ï¼šé€šè¿‡Â <code>initial-scale=1/DPR</code>Â æ”¹å˜é¡µé¢ç¼©æ”¾æ¯”ä¾‹ï¼Œè®© 1px CSS åƒç´ ç›´æ¥å¯¹åº” 1 ä¸ªç‰©ç†åƒç´ ã€‚</p>
<ul>
<li>ä¾‹ï¼šDPR=2 æ—¶ï¼Œç¼©æ”¾ 50%ï¼ˆ1/2ï¼‰ï¼Œæ­¤æ—¶ 1px CSS åƒç´  = 1 ç‰©ç†åƒç´ ï¼ˆåŸæœ¬ 2 ç‰©ç†åƒç´ ï¼Œç¼©æ”¾åå‹ç¼©ä¸º 1ï¼‰ï¼›DPR=3 æ—¶ï¼Œç¼©æ”¾ 33.3%ï¼ˆ1/3ï¼‰ï¼Œ1px CSS åƒç´  = 1 ç‰©ç†åƒç´ ã€‚</li>
</ul>
</li>
<li>
<p><strong>å‰æ</strong>ï¼šDPRâ‰¥2ï¼ˆé«˜æ¸…å±ï¼‰ï¼Œéœ€é…åˆå¸ƒå±€å•ä½ï¼ˆå¦‚ remï¼‰è°ƒæ•´ã€‚</p>
</li>
<li>
<p><strong>ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;meta <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> content=<span class="hljs-string">"width=device-width, initial-scale=1.0, user-scalable=no"</span>&gt;
&lt;script&gt;
  const <span class="hljs-attr">dpr</span> = window.devicePixelRatio || <span class="hljs-number">1</span><span class="hljs-comment">;</span>
  document.querySelector('meta<span class="hljs-section">[name="viewport"]</span>').setAttribute('content', 
    `<span class="hljs-attr">width</span>=device-width, initial-scale=<span class="hljs-variable">${1/dpr}</span>, user-scalable=<span class="hljs-literal">no</span>`
  )<span class="hljs-comment">;</span>
&lt;/script&gt;
</code></pre>
</li>
<li>
<p><strong>ä¼˜åŠ¿</strong>ï¼šç›´æ¥å†™Â <code>border: 1px</code>Â å°±æ˜¯ 1 ç‰©ç†åƒç´ ï¼Œé€‚é…æ‰€æœ‰ DPRâ‰¥2 çš„è®¾å¤‡ã€‚</p>
</li>
<li>
<p><strong>å±€é™</strong>ï¼šå…¨å±€ç¼©æ”¾ä¼šå½±å“å¸ƒå±€ï¼Œéœ€é‡æ–°è®¡ç®— rem åŸºå‡†å€¼ï¼ˆå¦‚Â <code>html { font-size: 16px * dpr }</code>ï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-6">ï¼ˆäºŒï¼‰DPRâ‰¥2 æœ€ä¼˜ï¼ŒDPR=1 å¯æ¨¡æ‹Ÿï¼šè§†è§‰å±‚é¢å®ç° â€œç»†äº 1pxâ€</h4>
<p>æ ¸å¿ƒé€»è¾‘ï¼šä¸ä¾èµ–åƒç´ æ˜ å°„çš„ç²¾å‡†è®¡ç®—ï¼Œè€Œæ˜¯é€šè¿‡è§†è§‰æ¬ºéª—æˆ–çŸ¢é‡æ¸²æŸ“ï¼Œè®©çº¿æ¡çœ‹èµ·æ¥æ¯” 1px ç»†ï¼ˆDPR=1 æ—¶æ— æ³•å®ç° 1 ç‰©ç†åƒç´ ï¼Œåªèƒ½æ¨¡æ‹Ÿï¼‰ã€‚</p>
<h5 data-id="heading-7">1. SVG ç»˜åˆ¶</h5>
<ul>
<li>
<p><strong>åƒç´ å…³ç³»</strong>ï¼šSVG æ˜¯çŸ¢é‡å›¾ï¼Œä¸ä¾èµ– CSS åƒç´ å’Œç‰©ç†åƒç´ çš„æ˜ å°„ï¼Œç›´æ¥æŒ‰ â€œåæ ‡ + çº¿æ¡å®½åº¦â€ æ¸²æŸ“ã€‚</p>
<ul>
<li>DPRâ‰¥2 æ—¶ï¼š<code>stroke-width="1"</code>Â +Â <code>y1="0.5"</code>Â ç›´æ¥æ¸²æŸ“ä¸º 1 ä¸ªç‰©ç†åƒç´ ï¼ˆçŸ¢é‡æ¸²æŸ“æ”¯æŒäºšåƒç´ ç²¾å‡†æ§åˆ¶ï¼‰ã€‚</li>
<li>DPR=1 æ—¶ï¼šåŒæ ·çš„ä»£ç ä¼šæ¸²æŸ“ä¸º â€œè§†è§‰ä¸Š 0.5px ç»†çš„çº¿æ¡â€ï¼ˆå®é™…è¿˜æ˜¯ 1 ç‰©ç†åƒç´ ï¼Œä½†çŸ¢é‡ç¼©æ”¾è®©è¾¹ç¼˜æ›´ç»†è…»ï¼Œæ¯”ç›´æ¥å†™Â <code>1px</code>Â çœ‹èµ·æ¥ç»†ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>å‰æ</strong>ï¼šæ— ä¸¥æ ¼ DPR è¦æ±‚ï¼Œæ‰€æœ‰æ”¯æŒ SVG çš„æµè§ˆå™¨ï¼ˆå‡ ä¹æ‰€æœ‰ç§»åŠ¨ç«¯ï¼‰ã€‚</p>
</li>
<li>
<p><strong>ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">&lt;svg width=<span class="hljs-string">"100%"</span> height=<span class="hljs-string">"1"</span> xmlns=<span class="hljs-string">"http://www.w3.org/2000/svg"</span>&gt;
  &lt;line x1=<span class="hljs-string">"0"</span> y1=<span class="hljs-string">"0.5"</span> x2=<span class="hljs-string">"100%"</span> y2=<span class="hljs-string">"0.5"</span> stroke=<span class="hljs-string">"#000"</span> stroke-width=<span class="hljs-string">"1"</span> /&gt;
&lt;/svg&gt;
</code></pre>
</li>
</ul>
<h5 data-id="heading-8">2. èƒŒæ™¯æ¸å˜ï¼ˆ<code>background-image</code>ï¼‰</h5>
<ul>
<li>
<p><strong>åƒç´ å…³ç³»</strong>ï¼šåˆ©ç”¨ 1px é«˜çš„ CSS å®¹å™¨ï¼Œé€šè¿‡é¢œè‰²åˆ†å‰²æ¨¡æ‹Ÿ â€œåŠåƒç´ â€ã€‚</p>
<ul>
<li>DPR=2 æ—¶ï¼š1px CSS å®¹å™¨ = 2 ç‰©ç†åƒç´ é«˜ï¼Œæ¸å˜ â€œé€æ˜ 50% + æœ‰è‰² 50%â€ åˆšå¥½å¯¹åº” 1 ä¸ªç‰©ç†åƒç´ çš„æœ‰è‰²çº¿æ¡ã€‚</li>
<li>DPR=1 æ—¶ï¼š1px CSS å®¹å™¨ = 1 ç‰©ç†åƒç´ é«˜ï¼Œæ¸å˜åè§†è§‰ä¸Šæ˜¯ â€œåŠé€æ˜ç»†çº¿â€ï¼ˆæ¯”çº¯Â <code>1px</code>Â ç»†ï¼Œä½†æœ¬è´¨æ˜¯ 1 ç‰©ç†åƒç´ çš„é¢œè‰²å åŠ ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>å‰æ</strong>ï¼šæ”¯æŒ CSS3 æ¸å˜çš„æµè§ˆå™¨ï¼ˆiOS 7+ã€Android 4.4+ï¼‰ã€‚</p>
</li>
<li>
<p><strong>ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.line</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-number">1px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(to bottom, transparent <span class="hljs-number">50%</span>, <span class="hljs-number">#000</span> <span class="hljs-number">50%</span>);
}
</code></pre>
</li>
</ul>
<h5 data-id="heading-9">3.Â <code>box-shadow</code>Â æ¨¡æ‹Ÿ</h5>
<ul>
<li><strong>åƒç´ å…³ç³»</strong>ï¼šDPR=2 æ—¶ï¼Œ<code>box-shadow: 0 0.5px 0 #000</code>Â ä¸­ï¼Œ0.5px CSS åç§»é‡ = 1 ç‰©ç†åƒç´ ï¼Œå½¢æˆ 1 ç‰©ç†åƒç´ çš„ç»†é˜´å½±ï¼ˆè§†è§‰ä¸Šæ˜¯ç»†çº¿æ¡ï¼‰ã€‚</li>
<li><strong>å‰æ</strong>ï¼šDPRâ‰¥2ï¼ˆDPR=1 æ—¶ï¼Œ0.5px åç§» = 0.5 ç‰©ç†åƒç´ ï¼Œå±å¹•æ— æ³•æ¸²æŸ“ï¼Œé˜´å½±ä¸æ˜¾ç¤ºæˆ–æ¨¡ç³Šï¼‰ã€‚</li>
<li><strong>ä»£ç </strong>ï¼š<code>box-shadow: 0 0.5px 0 #000;</code></li>
</ul>
<h3 data-id="heading-10">ä¸‰ã€æœ€ç»ˆæ€»ç»“ï¼ˆç»“åˆåƒç´ å…³ç³»ï¼‰</h3>















































<table><thead><tr><th>å®ç°æ–¹å¼</th><th>åƒç´ æ˜ å°„é€»è¾‘ï¼ˆæ ¸å¿ƒï¼‰</th><th>ä¾èµ– DPR</th><th>è§†è§‰æ•ˆæœ</th></tr></thead><tbody><tr><td>ç›´æ¥Â <code>0.5px</code></td><td>DPRâ‰¥2 æ—¶ï¼Œ0.5px CSS = 1 ç‰©ç†åƒç´ </td><td>DPRâ‰¥2</td><td>ç²¾å‡†ç»†çº¿æ¡</td></tr><tr><td><code>transform: scale</code></td><td>DPRâ‰¥2 æ—¶ï¼Œ1px CSSï¼ˆ2 ç‰©ç†åƒç´ ï¼‰ç¼©æ”¾ 50% = 1 ç‰©ç†åƒç´ </td><td>DPRâ‰¥2</td><td>å…¼å®¹æ€§å¥½ï¼Œç²¾å‡†ç»†çº¿æ¡</td></tr><tr><td><code>viewport</code>Â ç¼©æ”¾</td><td>DPRâ‰¥2 æ—¶ï¼Œç¼©æ”¾ 1/DPR è®© 1px CSS = 1 ç‰©ç†åƒç´ </td><td>DPRâ‰¥2</td><td>å…¨å±€é€‚é…ï¼Œç²¾å‡†ç»†çº¿æ¡</td></tr><tr><td>SVG ç»˜åˆ¶</td><td>çŸ¢é‡æ¸²æŸ“ï¼Œç›´æ¥æ§åˆ¶ 1 ç‰©ç†åƒç´ ï¼ˆDPRâ‰¥2ï¼‰æˆ–æ¨¡æ‹Ÿç»†çº¿æ¡ï¼ˆDPR=1ï¼‰</td><td>æ— ï¼ˆDPRâ‰¥2 æœ€ä¼˜ï¼‰</td><td>è·¨è®¾å¤‡ï¼Œç»†è…»æ— æ¨¡ç³Š</td></tr><tr><td>èƒŒæ™¯æ¸å˜</td><td>DPRâ‰¥2 æ—¶ 1px CSSï¼ˆ2 ç‰©ç†åƒç´ ï¼‰é¢œè‰²åˆ†å‰² = 1 ç‰©ç†åƒç´ ï¼›DPR=1 æ—¶è§†è§‰æ¬ºéª—</td><td>æ— ï¼ˆDPRâ‰¥2 æœ€ä¼˜ï¼‰</td><td>æ¨¡æ‹Ÿç»†çº¿æ¡ï¼Œæ— å…¼å®¹æ€§é—®é¢˜</td></tr><tr><td><code>box-shadow</code></td><td>DPRâ‰¥2 æ—¶ï¼Œ0.5px CSS åç§» = 1 ç‰©ç†åƒç´ é˜´å½±</td><td>DPRâ‰¥2</td><td>éè¾¹æ¡†çº¿æ¡é€‚ç”¨</td></tr></tbody></table>
<p><strong>æ ¸å¿ƒä¸€å¥è¯</strong>ï¼šæ‰€æœ‰ â€œçœŸå® 0.5px æ•ˆæœâ€ï¼ˆ1 ç‰©ç†åƒç´ ï¼‰éƒ½ä¾èµ– DPRâ‰¥2 çš„é«˜æ¸…å±ï¼ˆåˆ©ç”¨ CSS åƒç´ ä¸ç‰©ç†åƒç´ çš„æ˜ å°„å…³ç³»ï¼‰ï¼›DPR=1 æ—¶åªèƒ½æ¨¡æ‹Ÿï¼Œæ— æ³•å®ç°ç‰©ç†çº§åŠåƒç´ ã€‚</p>
<h3 data-id="heading-11">ä»¥ä¸‹æ˜¯åŒ…å«Â <strong>CSS åƒç´  / ç‰©ç†åƒç´  / DPR å…³ç³»è¯´æ˜</strong>Â çš„ 0.5px å…¼å®¹ä»£ç åˆé›†ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½æ ‡æ³¨æ ¸å¿ƒé€»è¾‘å’Œé€‚ç”¨åœºæ™¯ï¼Œå¯ç›´æ¥å¤åˆ¶ä½¿ç”¨ï¼š</h3>
<h3 data-id="heading-12">ä¸€ã€è¯´æ˜ï¼ˆæ‰€æœ‰æ–¹æ³•é€šç”¨ï¼‰</h3>
<ul>
<li>æ ¸å¿ƒç›®æ ‡ï¼šè®©çº¿æ¡æœ€ç»ˆå ç”¨Â <strong>1 ä¸ªç‰©ç†åƒç´ </strong>ï¼ˆè§†è§‰æœ€ç»†ï¼‰ã€‚</li>
<li>åƒç´ å…³ç³»ï¼š<code>1 CSS åƒç´  = DPR Ã— DPR ç‰©ç†åƒç´ </code>ï¼ˆé»˜è®¤ç¼©æ”¾ 1 æ—¶ï¼‰ï¼Œé«˜æ¸…å±ï¼ˆDPRâ‰¥2ï¼‰éœ€é€šè¿‡ä»£ç  â€œå‹ç¼©â€ æ˜ å°„å…³ç³»ã€‚</li>
<li>é€‚é…åŸåˆ™ï¼šä¼˜å…ˆé€‰å…¼å®¹æ€§å¹¿ã€æ— å¸ƒå±€å½±å“çš„æ–¹æ³•ï¼ˆå¦‚ SVGã€transform ç¼©æ”¾ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-13">äºŒã€6 ç§å®ç”¨å…¼å®¹ä»£ç </h3>
<h4 data-id="heading-14">1. æ¨èé¦–é€‰ï¼štransform: scale (0.5) ç¼©æ”¾ï¼ˆDPRâ‰¥2 ç”Ÿæ•ˆï¼Œå…¼å®¹æ€§æœ€å¥½ï¼‰</h4>
<ul>
<li>æ ¸å¿ƒé€»è¾‘ï¼š1px CSS åƒç´ ï¼ˆDPR=2 æ—¶å¯¹åº” 2 ç‰©ç†åƒç´ ï¼‰â†’ ç¼©æ”¾ 50% â†’ æœ€ç»ˆ 1 ç‰©ç†åƒç´ ã€‚</li>
<li>é€‚ç”¨åœºæ™¯ï¼šè¾¹æ¡†ã€ç‹¬ç«‹çº¿æ¡ï¼Œä¸å½±å“å¸ƒå±€ã€‚</li>
</ul>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* é€šç”¨ç»†çº¿æ¡ç±»ï¼ˆä¸Šä¸‹å·¦å³å¯æŒ‰éœ€è°ƒæ•´ï¼‰ */</span>
<span class="hljs-selector-class">.thin-line</span> {
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-comment">/* çˆ¶å®¹å™¨éœ€è§¦å‘ BFCï¼Œé¿å…çº¿æ¡æº¢å‡º */</span>
  <span class="hljs-attribute">overflow</span>: hidden;
}

<span class="hljs-selector-class">.thin-line</span><span class="hljs-selector-pseudo">::after</span> {
  <span class="hljs-attribute">content</span>: <span class="hljs-string">""</span>;
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">1px</span>; <span class="hljs-comment">/* 1px CSS = 2 ç‰©ç†åƒç´ ï¼ˆDPR=2ï¼‰ */</span>
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#000</span>; <span class="hljs-comment">/* çº¿æ¡é¢œè‰² */</span>
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">0.5</span>); <span class="hljs-comment">/* å‚ç›´ç¼©æ”¾ 50% â†’ 2 ç‰©ç†åƒç´  â†’ 1 ç‰©ç†åƒç´  */</span>
  <span class="hljs-attribute">transform-origin</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span>; <span class="hljs-comment">/* ç¼©æ”¾åŸç‚¹é¿å…åç§» */</span>
}

<span class="hljs-comment">/* æ¨ªå‘çº¿æ¡ï¼ˆé»˜è®¤ï¼‰ã€çºµå‘çº¿æ¡ï¼ˆæŒ‰éœ€æ·»åŠ ï¼‰ */</span>
<span class="hljs-selector-class">.thin-line-vertical</span><span class="hljs-selector-pseudo">::after</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">1px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scaleX</span>(<span class="hljs-number">0.5</span>);
}
</code></pre>
<ul>
<li>ä½¿ç”¨æ–¹å¼ï¼š<code>&lt;div class="thin-line"&gt;å†…å®¹&lt;/div&gt;</code></li>
</ul>
<hr/>
<h4 data-id="heading-15">2. è·¨ DPR ä¼˜é€‰ï¼šSVG ç»˜åˆ¶ï¼ˆæ‰€æœ‰è®¾å¤‡é€‚é…ï¼Œç²¾å‡†æ— æ¨¡ç³Šï¼‰</h4>
<ul>
<li>æ ¸å¿ƒé€»è¾‘ï¼šSVG çŸ¢é‡æ¸²æŸ“ä¸ä¾èµ–åƒç´ æ˜ å°„ï¼Œç›´æ¥æŒ‡å®š 1 ç‰©ç†åƒç´ çº¿æ¡ï¼ˆDPRâ‰¥2 ç²¾å‡†ï¼ŒDPR=1 æ¨¡æ‹Ÿç»†çº¿æ¡ï¼‰ã€‚</li>
<li>é€‚ç”¨åœºæ™¯ï¼šUI ä¸¥æ ¼è¿˜åŸã€è·¨è®¾å¤‡å…¼å®¹ï¼ˆæ¨èç”¨äºåˆ†å‰²çº¿ã€è¾¹æ¡†ï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- æ¨ªå‘ç»†çº¿æ¡ï¼ˆç›´æ¥åµŒå…¥ï¼Œå¯å¤ç”¨ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"svg-thin-line"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"100%"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"1"</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.w3.org/2000/svg"</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- y1="0.5" + stroke-width="1" â†’ ç›´æ¥å¯¹åº” 1 ç‰©ç†åƒç´ ï¼ˆDPRâ‰¥2ï¼‰ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">line</span> <span class="hljs-attr">x1</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">y1</span>=<span class="hljs-string">"0.5"</span> <span class="hljs-attr">x2</span>=<span class="hljs-string">"100%"</span> <span class="hljs-attr">y2</span>=<span class="hljs-string">"0.5"</span> <span class="hljs-attr">stroke</span>=<span class="hljs-string">"#000"</span> <span class="hljs-attr">stroke-width</span>=<span class="hljs-string">"1"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span>

<span class="hljs-comment">&lt;!-- çºµå‘ç»†çº¿æ¡ï¼ˆå®½åº¦ 100%ï¼Œé«˜åº¦è‡ªé€‚åº”ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"svg-thin-line-vertical"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"1"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"100%"</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.w3.org/2000/svg"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">line</span> <span class="hljs-attr">x1</span>=<span class="hljs-string">"0.5"</span> <span class="hljs-attr">y1</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">x2</span>=<span class="hljs-string">"0.5"</span> <span class="hljs-attr">y2</span>=<span class="hljs-string">"100%"</span> <span class="hljs-attr">stroke</span>=<span class="hljs-string">"#000"</span> <span class="hljs-attr">stroke-width</span>=<span class="hljs-string">"1"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span>

<span class="hljs-comment">&lt;!-- æ ·å¼ä¼˜åŒ–ï¼ˆå¯é€‰ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
  <span class="hljs-selector-class">.svg-thin-line</span> {
    <span class="hljs-attribute">display</span>: block;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">8px</span> <span class="hljs-number">0</span>; <span class="hljs-comment">/* ä¸Šä¸‹é—´è· */</span>
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<ul>
<li>ä½¿ç”¨æ–¹å¼ï¼šç›´æ¥åµŒå…¥ HTMLï¼Œä¿®æ”¹Â <code>stroke</code>Â é¢œè‰²ã€<code>width</code>/<code>height</code>Â é€‚é…åœºæ™¯ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-16">3. ç°ä»£è®¾å¤‡ï¼šç›´æ¥ 0.5px å£°æ˜ï¼ˆç®€æ´é«˜æ•ˆï¼ŒDPRâ‰¥2 + ç°ä»£æµè§ˆå™¨ï¼‰</h4>
<ul>
<li>æ ¸å¿ƒé€»è¾‘ï¼šDPR=2 æ—¶ï¼Œ0.5px CSS åƒç´  = 1 ç‰©ç†åƒç´ ï¼Œæµè§ˆå™¨ç›´æ¥æ¸²æŸ“ã€‚</li>
<li>é€‚ç”¨åœºæ™¯ï¼šiOS 9+ã€Android 8.0+ è®¾å¤‡ï¼Œæ— éœ€å…¼å®¹æ—§æœºå‹ã€‚</li>
</ul>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ç›´æ¥å£°æ˜ï¼Œç®€æ´é«˜æ•ˆ */</span>
<span class="hljs-selector-class">.simple-thin-line</span> {
  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">0.5px</span> solid <span class="hljs-number">#000</span>; <span class="hljs-comment">/* æ¨ªå‘çº¿æ¡ */</span>
  <span class="hljs-comment">/* çºµå‘çº¿æ¡ï¼šborder-left: 0.5px solid #000; */</span>
}

<span class="hljs-comment">/* å…¼å®¹å†™æ³•ï¼ˆéƒ¨åˆ†æµè§ˆå™¨éœ€å‰ç¼€ï¼‰ */</span>
<span class="hljs-selector-class">.compact-thin-line</span> {
  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">0.5px</span> solid <span class="hljs-number">#000</span>;
  -webkit-<span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">0.5px</span> solid <span class="hljs-number">#000</span>;
}
</code></pre>
<ul>
<li>ä½¿ç”¨æ–¹å¼ï¼š<code>&lt;div class="simple-thin-line"&gt;å†…å®¹&lt;/div&gt;</code></li>
</ul>
<hr/>
<h4 data-id="heading-17">4. å…¨å±€é€‚é…ï¼šviewport ç¼©æ”¾ï¼ˆDPRâ‰¥2ï¼Œå…¨å±€ç»†çº¿æ¡ç»Ÿä¸€ï¼‰</h4>
<ul>
<li>æ ¸å¿ƒé€»è¾‘ï¼šç¼©æ”¾é¡µé¢ä¸ºÂ <code>1/DPR</code>ï¼Œè®© 1px CSS åƒç´  = 1 ç‰©ç†åƒç´ ï¼ˆéœ€é…åˆ rem å¸ƒå±€ï¼‰ã€‚</li>
<li>é€‚ç”¨åœºæ™¯ï¼šæ•´ä¸ªé¡µé¢éœ€è¦å¤§é‡ç»†çº¿æ¡ï¼Œæ„¿æ„è°ƒæ•´å¸ƒå±€å•ä½ã€‚</li>
</ul>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ç¬¬ä¸€æ­¥ï¼šè®¾ç½® viewportï¼ˆåˆå§‹ç¼©æ”¾ 1.0ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, user-scalable=no"</span>&gt;</span>

<span class="hljs-comment">&lt;!-- ç¬¬äºŒæ­¥ï¼šåŠ¨æ€è°ƒæ•´ç¼©æ”¾æ¯”ä¾‹ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  (<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> dpr = <span class="hljs-variable language_">window</span>.<span class="hljs-property">devicePixelRatio</span> || <span class="hljs-number">1</span>;
    <span class="hljs-keyword">const</span> viewport = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'viewport'</span>);
    <span class="hljs-comment">// ç¼©æ”¾ 1/DPRï¼Œè®© 1px CSS = 1 ç‰©ç†åƒç´ ï¼ˆDPR=2 â†’ ç¼©æ”¾ 50%ï¼‰</span>
    viewport.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'content'</span>, <span class="hljs-string">`width=device-width, initial-scale=<span class="hljs-subst">${<span class="hljs-number">1</span>/dpr}</span>, user-scalable=no`</span>);
    
    <span class="hljs-comment">// å¯é€‰ï¼šè°ƒæ•´ rem åŸºå‡†å€¼ï¼ˆé¿å…å¸ƒå±€é”™ä¹±ï¼‰</span>
    <span class="hljs-keyword">const</span> html = <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>;
    html.<span class="hljs-property">style</span>.<span class="hljs-property">fontSize</span> = <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-number">16</span> * dpr}</span>px`</span>; <span class="hljs-comment">// 1rem = 16*dpr pxï¼ˆé€‚é…ç¼©æ”¾åå¸ƒå±€ï¼‰</span>
  })();
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-comment">&lt;!-- ç¬¬ä¸‰æ­¥ï¼šç›´æ¥å†™ 1px å³å¯ï¼ˆæ­¤æ—¶ 1px = 1 ç‰©ç†åƒç´ ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
  <span class="hljs-selector-class">.global-thin-line</span> {
    <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#000</span>; <span class="hljs-comment">/* å®é™…æ˜¯ 1 ç‰©ç†åƒç´ ç»†çº¿æ¡ */</span>
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0.5rem</span> <span class="hljs-number">0</span>; <span class="hljs-comment">/* rem å•ä½é€‚é…ç¼©æ”¾åå¸ƒå±€ */</span>
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<ul>
<li>ä½¿ç”¨æ–¹å¼ï¼šå…¨å±€å¼•å…¥è„šæœ¬ï¼Œä¹‹åæ‰€æœ‰Â <code>1px</code>Â è¾¹æ¡†éƒ½ä¼šå˜æˆç»†çº¿æ¡ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-18">5. è§†è§‰æ¨¡æ‹Ÿï¼šèƒŒæ™¯æ¸å˜ï¼ˆæ— å…¼å®¹æ€§é—®é¢˜ï¼ŒDPRâ‰¥2 æœ€ä¼˜ï¼‰</h4>
<ul>
<li>æ ¸å¿ƒé€»è¾‘ï¼š1px CSS å®¹å™¨ï¼ˆDPR=2 æ—¶ 2 ç‰©ç†åƒç´ ï¼‰â†’ é¢œè‰²åˆ†å‰²ä¸º 50% é€æ˜ + 50% æœ‰è‰² â†’ è§†è§‰ä¸Š 1 ç‰©ç†åƒç´ ã€‚</li>
<li>é€‚ç”¨åœºæ™¯ï¼šèƒŒæ™¯çº¿æ¡ã€æ— æ³•ç”¨è¾¹æ¡† / ä¼ªå…ƒç´ çš„åœºæ™¯ã€‚</li>
</ul>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* æ¨ªå‘çº¿æ¡ */</span>
<span class="hljs-selector-class">.gradient-thin-line</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-number">1px</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-comment">/* ä¸ŠåŠé€æ˜ï¼Œä¸‹åŠæœ‰è‰² â†’ è§†è§‰ä¸Šç»†çº¿æ¡ */</span>
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(to bottom, transparent <span class="hljs-number">50%</span>, <span class="hljs-number">#000</span> <span class="hljs-number">50%</span>);
  <span class="hljs-attribute">background-size</span>: <span class="hljs-number">100%</span> <span class="hljs-number">1px</span>;
}

<span class="hljs-comment">/* çºµå‘çº¿æ¡ */</span>
<span class="hljs-selector-class">.gradient-thin-line-vertical</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">1px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(to right, transparent <span class="hljs-number">50%</span>, <span class="hljs-number">#000</span> <span class="hljs-number">50%</span>);
  <span class="hljs-attribute">background-size</span>: <span class="hljs-number">1px</span> <span class="hljs-number">100%</span>;
}
</code></pre>
<ul>
<li>ä½¿ç”¨æ–¹å¼ï¼š<code>&lt;div class="gradient-thin-line"&gt;&lt;/div&gt;</code>ï¼ˆç‹¬ç«‹çº¿æ¡å®¹å™¨ï¼‰ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-19">6. éè¾¹æ¡†åœºæ™¯ï¼šbox-shadow æ¨¡æ‹Ÿï¼ˆDPRâ‰¥2ï¼Œé€‚åˆé˜´å½±ç±»çº¿æ¡ï¼‰</h4>
<ul>
<li>æ ¸å¿ƒé€»è¾‘ï¼šDPR=2 æ—¶ï¼Œ0.5px CSS åç§» = 1 ç‰©ç†åƒç´ ï¼Œé˜´å½±å³ç»†çº¿æ¡ã€‚</li>
<li>é€‚ç”¨åœºæ™¯ï¼šæ— éœ€å ç”¨å¸ƒå±€ç©ºé—´çš„çº¿æ¡ï¼ˆå¦‚æ–‡å­—ä¸‹æ–¹ç»†ä¸‹åˆ’çº¿ï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.shadow-thin-line</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;
  <span class="hljs-comment">/* y è½´åç§» 0.5px â†’ 1 ç‰©ç†åƒç´ ï¼Œæ— æ¨¡ç³Šã€æ— æ‰©æ•£ */</span>
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0.5px</span> <span class="hljs-number">0</span> <span class="hljs-number">#000</span>;
  -webkit-<span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0.5px</span> <span class="hljs-number">0</span> <span class="hljs-number">#000</span>; <span class="hljs-comment">/* å…¼å®¹ Safari */</span>
}

<span class="hljs-comment">/* æ–‡å­—ä¸‹åˆ’çº¿ç¤ºä¾‹ */</span>
<span class="hljs-selector-class">.text-thin-underline</span> {
  <span class="hljs-attribute">display</span>: inline-block;
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0.5px</span> <span class="hljs-number">0</span> <span class="hljs-number">#000</span>;
  <span class="hljs-attribute">padding-bottom</span>: <span class="hljs-number">2px</span>;
}
</code></pre>
<ul>
<li>ä½¿ç”¨æ–¹å¼ï¼š<code>&lt;span class="text-thin-underline"&gt;å¸¦ç»†ä¸‹åˆ’çº¿çš„æ–‡å­—&lt;/span&gt;</code></li>
</ul>
<hr/>
<h3 data-id="heading-20">ä¸‰ã€ä½¿ç”¨å»ºè®®</h3>
<ol>
<li>ä¼˜å…ˆé€‰Â <strong>transform ç¼©æ”¾</strong>Â æˆ–Â <strong>SVG ç»˜åˆ¶</strong>ï¼šå…¼å®¹æ€§å¹¿ã€æ— å¸ƒå±€å½±å“ï¼Œè¦†ç›– 99% åœºæ™¯ã€‚</li>
<li>ç°ä»£è®¾å¤‡ï¼ˆiOS 9+/Android 8.0+ï¼‰ç›´æ¥ç”¨Â <strong>0.5px å£°æ˜</strong>ï¼šä»£ç æœ€ç®€æ´ã€‚</li>
<li>å…¨å±€å¤§é‡ç»†çº¿æ¡ç”¨Â <strong>viewport ç¼©æ”¾</strong>ï¼šéœ€é…åˆ rem å¸ƒå±€ï¼Œä¸€æ¬¡æ€§è§£å†³æ‰€æœ‰çº¿æ¡é—®é¢˜ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Javaå­¦ä¹ ç¬¬29å¤© - ä¼ä¸šçº§ç³»ç»Ÿæ¶æ„ä¸å®æˆ˜]]></title>    <link>https://juejin.cn/post/7572028313931104296</link>    <guid>https://juejin.cn/post/7572028313931104296</guid>    <pubDate>2025-11-14T02:12:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572028313931104296" data-draft-id="7572051762984550452" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Javaå­¦ä¹ ç¬¬29å¤© - ä¼ä¸šçº§ç³»ç»Ÿæ¶æ„ä¸å®æˆ˜"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-11-14T02:12:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æµ®æ¸¸æœ¬å°Š"/> <meta itemprop="url" content="https://juejin.cn/user/2533726710668696"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Javaå­¦ä¹ ç¬¬29å¤© - ä¼ä¸šçº§ç³»ç»Ÿæ¶æ„ä¸å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2533726710668696/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æµ®æ¸¸æœ¬å°Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T02:12:58.000Z" title="Fri Nov 14 2025 02:12:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    15
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å­¦ä¹ ç›®æ ‡</h2>
<p>æŒæ¡ä¼ä¸šçº§ç³»ç»Ÿæ¶æ„è®¾è®¡æ–¹æ³•ï¼Œå­¦ä¹ é«˜å¹¶å‘ç³»ç»Ÿè®¾è®¡æ¨¡å¼ï¼Œæ·±å…¥ç†è§£åˆ†å¸ƒå¼é”ä¸IDç”Ÿæˆï¼ŒæŒæ¡ç³»ç»Ÿæ¶æ„æ¼”è¿›è·¯å¾„ï¼Œå­¦ä¹ ä¼ä¸šçº§å¼€å‘æœ€ä½³å®è·µã€‚</p>
<hr/>
<h2 data-id="heading-1">1. ä¼ä¸šçº§æ¶æ„è®¾è®¡</h2>
<h3 data-id="heading-2">1.1 é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDDDï¼‰</h3>
<p><strong>DDDæ ¸å¿ƒæ¦‚å¿µå®ç°ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å®ä½“ï¼ˆEntityï¼‰- æœ‰å”¯ä¸€æ ‡è¯†</span>
<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "t_order")</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span> {
    
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;
    
    <span class="hljs-keyword">private</span> String orderNumber;
    <span class="hljs-keyword">private</span> Long userId;
    <span class="hljs-keyword">private</span> BigDecimal totalAmount;
    <span class="hljs-keyword">private</span> OrderStatus status;
    <span class="hljs-keyword">private</span> Date createTime;
    
    <span class="hljs-comment">// é¢†åŸŸè¡Œä¸º</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">confirm</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.status != OrderStatus.PENDING) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"åªæœ‰å¾…ç¡®è®¤è®¢å•æ‰èƒ½ç¡®è®¤"</span>);
        }
        <span class="hljs-built_in">this</span>.status = OrderStatus.CONFIRMED;
        log.info(<span class="hljs-string">"è®¢å•ç¡®è®¤: orderNumber={}"</span>, <span class="hljs-built_in">this</span>.orderNumber);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cancel</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.status == OrderStatus.COMPLETED || <span class="hljs-built_in">this</span>.status == OrderStatus.CANCELLED) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"å·²å®Œæˆæˆ–å·²å–æ¶ˆçš„è®¢å•ä¸èƒ½å–æ¶ˆ"</span>);
        }
        <span class="hljs-built_in">this</span>.status = OrderStatus.CANCELLED;
        log.info(<span class="hljs-string">"è®¢å•å–æ¶ˆ: orderNumber={}"</span>, <span class="hljs-built_in">this</span>.orderNumber);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pay</span><span class="hljs-params">(BigDecimal amount)</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.status != OrderStatus.CONFIRMED) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"åªæœ‰å·²ç¡®è®¤è®¢å•æ‰èƒ½æ”¯ä»˜"</span>);
        }
        <span class="hljs-keyword">if</span> (amount.compareTo(<span class="hljs-built_in">this</span>.totalAmount) != <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"æ”¯ä»˜é‡‘é¢ä¸è®¢å•é‡‘é¢ä¸åŒ¹é…"</span>);
        }
        <span class="hljs-built_in">this</span>.status = OrderStatus.PAID;
        log.info(<span class="hljs-string">"è®¢å•æ”¯ä»˜: orderNumber={}, amount={}"</span>, <span class="hljs-built_in">this</span>.orderNumber, amount);
    }
}

<span class="hljs-comment">// å€¼å¯¹è±¡ï¼ˆValue Objectï¼‰- æ— å”¯ä¸€æ ‡è¯†ï¼Œé€šè¿‡å±æ€§å€¼åˆ¤æ–­ç›¸ç­‰</span>
<span class="hljs-meta">@Embeddable</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Address</span> {
    
    <span class="hljs-keyword">private</span> String province;
    <span class="hljs-keyword">private</span> String city;
    <span class="hljs-keyword">private</span> String district;
    <span class="hljs-keyword">private</span> String street;
    <span class="hljs-keyword">private</span> String zipCode;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Address</span><span class="hljs-params">(String province, String city, String district, String street, String zipCode)</span> {
        <span class="hljs-built_in">this</span>.province = province;
        <span class="hljs-built_in">this</span>.city = city;
        <span class="hljs-built_in">this</span>.district = district;
        <span class="hljs-built_in">this</span>.street = street;
        <span class="hljs-built_in">this</span>.zipCode = zipCode;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">equals</span><span class="hljs-params">(Object o)</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span> == o) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (o == <span class="hljs-literal">null</span> || getClass() != o.getClass()) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-type">Address</span> <span class="hljs-variable">address</span> <span class="hljs-operator">=</span> (Address) o;
        <span class="hljs-keyword">return</span> Objects.equals(province, address.province) &amp;&amp;
               Objects.equals(city, address.city) &amp;&amp;
               Objects.equals(district, address.district) &amp;&amp;
               Objects.equals(street, address.street) &amp;&amp;
               Objects.equals(zipCode, address.zipCode);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hashCode</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> Objects.hash(province, city, district, street, zipCode);
    }
}

<span class="hljs-comment">// èšåˆæ ¹ï¼ˆAggregate Rootï¼‰- èšåˆçš„å…¥å£</span>
<span class="hljs-meta">@AggregateRoot</span>
<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "t_order")</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderAggregate</span> {
    
    <span class="hljs-meta">@Id</span>
    <span class="hljs-keyword">private</span> Long id;
    
    <span class="hljs-keyword">private</span> String orderNumber;
    <span class="hljs-keyword">private</span> Long userId;
    
    <span class="hljs-meta">@Embedded</span>
    <span class="hljs-keyword">private</span> Address shippingAddress;
    
    <span class="hljs-meta">@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY)</span>
    <span class="hljs-meta">@JoinColumn(name = "order_id")</span>
    <span class="hljs-keyword">private</span> List&lt;OrderItem&gt; items;
    
    <span class="hljs-keyword">private</span> OrderStatus status;
    
    <span class="hljs-comment">// èšåˆå†…éƒ¨ä¸€è‡´æ€§ä¿è¯</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addItem</span><span class="hljs-params">(OrderItem item)</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.items == <span class="hljs-literal">null</span>) {
            <span class="hljs-built_in">this</span>.items = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        }
        
        <span class="hljs-comment">// ä¸šåŠ¡è§„åˆ™ï¼šè®¢å•é¡¹ä¸èƒ½é‡å¤æ·»åŠ </span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">exists</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.items.stream()
            .anyMatch(i -&gt; i.getProductId().equals(item.getProductId()));
        <span class="hljs-keyword">if</span> (exists) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"è®¢å•é¡¹å·²å­˜åœ¨"</span>);
        }
        
        <span class="hljs-built_in">this</span>.items.add(item);
        log.info(<span class="hljs-string">"æ·»åŠ è®¢å•é¡¹: orderNumber={}, productId={}"</span>, <span class="hljs-built_in">this</span>.orderNumber, item.getProductId());
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeItem</span><span class="hljs-params">(Long productId)</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.items == <span class="hljs-literal">null</span> || <span class="hljs-built_in">this</span>.items.isEmpty()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"è®¢å•é¡¹ä¸ºç©º"</span>);
        }
        
        <span class="hljs-type">boolean</span> <span class="hljs-variable">removed</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.items.removeIf(item -&gt; item.getProductId().equals(productId));
        <span class="hljs-keyword">if</span> (!removed) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"è®¢å•é¡¹ä¸å­˜åœ¨"</span>);
        }
        
        log.info(<span class="hljs-string">"ç§»é™¤è®¢å•é¡¹: orderNumber={}, productId={}"</span>, <span class="hljs-built_in">this</span>.orderNumber, productId);
    }
    
    <span class="hljs-comment">// è®¡ç®—è®¢å•æ€»é‡‘é¢</span>
    <span class="hljs-keyword">public</span> BigDecimal <span class="hljs-title function_">calculateTotal</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.items == <span class="hljs-literal">null</span> || <span class="hljs-built_in">this</span>.items.isEmpty()) {
            <span class="hljs-keyword">return</span> BigDecimal.ZERO;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.items.stream()
            .map(item -&gt; item.getPrice().multiply(BigDecimal.valueOf(item.getQuantity())))
            .reduce(BigDecimal.ZERO, BigDecimal::add);
    }
}

<span class="hljs-comment">// é¢†åŸŸæœåŠ¡ï¼ˆDomain Serviceï¼‰- ä¸å±äºä»»ä½•å®ä½“çš„ä¸šåŠ¡é€»è¾‘</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderDomainService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderRepository orderRepository;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> InventoryService inventoryService;
    
    <span class="hljs-comment">// é¢†åŸŸæœåŠ¡ï¼šå¤„ç†å¤æ‚çš„ä¸šåŠ¡é€»è¾‘</span>
    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">createOrder</span><span class="hljs-params">(Long userId, List&lt;OrderItem&gt; items, Address shippingAddress)</span> {
        <span class="hljs-comment">// 1. éªŒè¯åº“å­˜</span>
        <span class="hljs-keyword">for</span> (OrderItem item : items) {
            <span class="hljs-type">boolean</span> <span class="hljs-variable">available</span> <span class="hljs-operator">=</span> inventoryService.checkAvailability(item.getProductId(), item.getQuantity());
            <span class="hljs-keyword">if</span> (!available) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InsufficientInventoryException</span>(<span class="hljs-string">"åº“å­˜ä¸è¶³: productId="</span> + item.getProductId());
            }
        }
        
        <span class="hljs-comment">// 2. åˆ›å»ºè®¢å•</span>
        <span class="hljs-type">OrderAggregate</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderAggregate</span>();
        order.setOrderNumber(generateOrderNumber());
        order.setUserId(userId);
        order.setShippingAddress(shippingAddress);
        order.setStatus(OrderStatus.PENDING);
        
        <span class="hljs-comment">// 3. æ·»åŠ è®¢å•é¡¹</span>
        <span class="hljs-keyword">for</span> (OrderItem item : items) {
            order.addItem(item);
        }
        
        <span class="hljs-comment">// 4. ä¿å­˜è®¢å•</span>
        orderRepository.save(order);
        
        <span class="hljs-comment">// 5. æ‰£å‡åº“å­˜</span>
        <span class="hljs-keyword">for</span> (OrderItem item : items) {
            inventoryService.deductInventory(item.getProductId(), item.getQuantity());
        }
        
        log.info(<span class="hljs-string">"åˆ›å»ºè®¢å•æˆåŠŸ: orderNumber={}, userId={}"</span>, order.getOrderNumber(), userId);
        <span class="hljs-keyword">return</span> convertToOrder(order);
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">generateOrderNumber</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"ORD"</span> + System.currentTimeMillis() + (<span class="hljs-type">int</span>)(Math.random() * <span class="hljs-number">1000</span>);
    }
    
    <span class="hljs-keyword">private</span> Order <span class="hljs-title function_">convertToOrder</span><span class="hljs-params">(OrderAggregate aggregate)</span> {
        <span class="hljs-comment">// è½¬æ¢ä¸ºOrderå®ä½“</span>
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>();
        order.setId(aggregate.getId());
        order.setOrderNumber(aggregate.getOrderNumber());
        order.setUserId(aggregate.getUserId());
        order.setStatus(aggregate.getStatus());
        <span class="hljs-keyword">return</span> order;
    }
}

<span class="hljs-comment">// é¢†åŸŸäº‹ä»¶ï¼ˆDomain Eventï¼‰</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderCreatedEvent</span> {
    <span class="hljs-keyword">private</span> String orderNumber;
    <span class="hljs-keyword">private</span> Long userId;
    <span class="hljs-keyword">private</span> BigDecimal totalAmount;
    <span class="hljs-keyword">private</span> Date createTime;
}

<span class="hljs-comment">// é¢†åŸŸäº‹ä»¶å‘å¸ƒå™¨</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DomainEventPublisher</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ApplicationEventPublisher eventPublisher;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">publish</span><span class="hljs-params">(DomainEvent event)</span> {
        log.info(<span class="hljs-string">"å‘å¸ƒé¢†åŸŸäº‹ä»¶: {}"</span>, event.getClass().getSimpleName());
        eventPublisher.publishEvent(event);
    }
}

<span class="hljs-comment">// é¢†åŸŸäº‹ä»¶å¤„ç†å™¨</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderEventHandler</span> {
    
    <span class="hljs-meta">@EventListener</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleOrderCreated</span><span class="hljs-params">(OrderCreatedEvent event)</span> {
        log.info(<span class="hljs-string">"å¤„ç†è®¢å•åˆ›å»ºäº‹ä»¶: orderNumber={}"</span>, event.getOrderNumber());
        <span class="hljs-comment">// å‘é€é€šçŸ¥ã€æ›´æ–°ç»Ÿè®¡ç­‰</span>
    }
}
</code></pre>
<h3 data-id="heading-3">1.2 CQRSï¼ˆå‘½ä»¤æŸ¥è¯¢èŒè´£åˆ†ç¦»ï¼‰</h3>
<p><strong>CQRSå®ç°ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å‘½ä»¤ï¼ˆCommandï¼‰- å†™æ“ä½œ</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CreateOrderCommand</span> {
    <span class="hljs-keyword">private</span> Long userId;
    <span class="hljs-keyword">private</span> List&lt;OrderItemDTO&gt; items;
    <span class="hljs-keyword">private</span> AddressDTO shippingAddress;
}

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CancelOrderCommand</span> {
    <span class="hljs-keyword">private</span> String orderNumber;
    <span class="hljs-keyword">private</span> String reason;
}

<span class="hljs-comment">// å‘½ä»¤å¤„ç†å™¨</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderCommandHandler</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderDomainService orderDomainService;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderWriteRepository orderWriteRepository;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handle</span><span class="hljs-params">(CreateOrderCommand command)</span> {
        <span class="hljs-comment">// æ‰§è¡Œå†™æ“ä½œ</span>
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderDomainService.createOrder(
            command.getUserId(),
            convertToOrderItems(command.getItems()),
            convertToAddress(command.getShippingAddress())
        );
        
        orderWriteRepository.save(order);
        log.info(<span class="hljs-string">"å¤„ç†åˆ›å»ºè®¢å•å‘½ä»¤: userId={}"</span>, command.getUserId());
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handle</span><span class="hljs-params">(CancelOrderCommand command)</span> {
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderWriteRepository.findByOrderNumber(command.getOrderNumber());
        <span class="hljs-keyword">if</span> (order == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderNotFoundException</span>(<span class="hljs-string">"è®¢å•ä¸å­˜åœ¨: "</span> + command.getOrderNumber());
        }
        
        order.cancel();
        orderWriteRepository.save(order);
        log.info(<span class="hljs-string">"å¤„ç†å–æ¶ˆè®¢å•å‘½ä»¤: orderNumber={}"</span>, command.getOrderNumber());
    }
    
    <span class="hljs-keyword">private</span> List&lt;OrderItem&gt; <span class="hljs-title function_">convertToOrderItems</span><span class="hljs-params">(List&lt;OrderItemDTO&gt; dtos)</span> {
        <span class="hljs-keyword">return</span> dtos.stream()
            .map(dto -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderItem</span>(dto.getProductId(), dto.getQuantity(), dto.getPrice()))
            .collect(Collectors.toList());
    }
    
    <span class="hljs-keyword">private</span> Address <span class="hljs-title function_">convertToAddress</span><span class="hljs-params">(AddressDTO dto)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Address</span>(dto.getProvince(), dto.getCity(), dto.getDistrict(), 
                          dto.getStreet(), dto.getZipCode());
    }
}

<span class="hljs-comment">// æŸ¥è¯¢ï¼ˆQueryï¼‰- è¯»æ“ä½œ</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GetOrderQuery</span> {
    <span class="hljs-keyword">private</span> String orderNumber;
}

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GetUserOrdersQuery</span> {
    <span class="hljs-keyword">private</span> Long userId;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> page;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> size;
}

<span class="hljs-comment">// æŸ¥è¯¢å¤„ç†å™¨</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderQueryHandler</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderReadRepository orderReadRepository;
    
    <span class="hljs-keyword">public</span> OrderDTO <span class="hljs-title function_">handle</span><span class="hljs-params">(GetOrderQuery query)</span> {
        <span class="hljs-type">OrderReadModel</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderReadRepository.findByOrderNumber(query.getOrderNumber());
        <span class="hljs-keyword">if</span> (order == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderNotFoundException</span>(<span class="hljs-string">"è®¢å•ä¸å­˜åœ¨: "</span> + query.getOrderNumber());
        }
        <span class="hljs-keyword">return</span> convertToDTO(order);
    }
    
    <span class="hljs-keyword">public</span> Page&lt;OrderDTO&gt; <span class="hljs-title function_">handle</span><span class="hljs-params">(GetUserOrdersQuery query)</span> {
        Page&lt;OrderReadModel&gt; orders = orderReadRepository.findByUserId(
            query.getUserId(), 
            PageRequest.of(query.getPage(), query.getSize())
        );
        <span class="hljs-keyword">return</span> orders.map(<span class="hljs-built_in">this</span>::convertToDTO);
    }
    
    <span class="hljs-keyword">private</span> OrderDTO <span class="hljs-title function_">convertToDTO</span><span class="hljs-params">(OrderReadModel model)</span> {
        <span class="hljs-type">OrderDTO</span> <span class="hljs-variable">dto</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderDTO</span>();
        dto.setOrderNumber(model.getOrderNumber());
        dto.setUserId(model.getUserId());
        dto.setTotalAmount(model.getTotalAmount());
        dto.setStatus(model.getStatus());
        dto.setCreateTime(model.getCreateTime());
        <span class="hljs-keyword">return</span> dto;
    }
}

<span class="hljs-comment">// è¯»å†™åˆ†ç¦»çš„Repository</span>
<span class="hljs-meta">@Repository</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">OrderWriteRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">JpaRepository</span>&lt;Order, Long&gt; {
    Order <span class="hljs-title function_">findByOrderNumber</span><span class="hljs-params">(String orderNumber)</span>;
}

<span class="hljs-meta">@Repository</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">OrderReadRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">JpaRepository</span>&lt;OrderReadModel, Long&gt; {
    OrderReadModel <span class="hljs-title function_">findByOrderNumber</span><span class="hljs-params">(String orderNumber)</span>;
    Page&lt;OrderReadModel&gt; <span class="hljs-title function_">findByUserId</span><span class="hljs-params">(Long userId, Pageable pageable)</span>;
}

<span class="hljs-comment">// è¯»æ¨¡å‹ï¼ˆä¼˜åŒ–æŸ¥è¯¢ï¼‰</span>
<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "order_read_view")</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderReadModel</span> {
    
    <span class="hljs-meta">@Id</span>
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String orderNumber;
    <span class="hljs-keyword">private</span> Long userId;
    <span class="hljs-keyword">private</span> BigDecimal totalAmount;
    <span class="hljs-keyword">private</span> OrderStatus status;
    <span class="hljs-keyword">private</span> Date createTime;
    
    <span class="hljs-comment">// åªè¯»å­—æ®µï¼Œç”¨äºæŸ¥è¯¢ä¼˜åŒ–</span>
    <span class="hljs-keyword">private</span> String userName;
    <span class="hljs-keyword">private</span> String userPhone;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> itemCount;
}
</code></pre>
<h3 data-id="heading-4">1.3 äº‹ä»¶é©±åŠ¨æ¶æ„</h3>
<p><strong>äº‹ä»¶é©±åŠ¨æ¶æ„å®ç°ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// äº‹ä»¶æ€»çº¿</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EventBus</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;Class&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">DomainEvent</span>&gt;, List&lt;EventHandler&gt;&gt; handlers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-comment">// æ³¨å†Œäº‹ä»¶å¤„ç†å™¨</span>
    <span class="hljs-keyword">public</span> &lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">DomainEvent</span>&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">subscribe</span><span class="hljs-params">(Class&lt;T&gt; eventType, EventHandler&lt;T&gt; handler)</span> {
        handlers.computeIfAbsent(eventType, k -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">CopyOnWriteArrayList</span>&lt;&gt;()).add(handler);
        log.info(<span class="hljs-string">"æ³¨å†Œäº‹ä»¶å¤„ç†å™¨: eventType={}, handler={}"</span>, eventType.getSimpleName(), handler.getClass().getSimpleName());
    }
    
    <span class="hljs-comment">// å‘å¸ƒäº‹ä»¶</span>
    <span class="hljs-keyword">public</span> &lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">DomainEvent</span>&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">publish</span><span class="hljs-params">(T event)</span> {
        List&lt;EventHandler&gt; eventHandlers = handlers.get(event.getClass());
        <span class="hljs-keyword">if</span> (eventHandlers != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">for</span> (EventHandler handler : eventHandlers) {
                <span class="hljs-keyword">try</span> {
                    handler.handle(event);
                } <span class="hljs-keyword">catch</span> (Exception e) {
                    log.error(<span class="hljs-string">"äº‹ä»¶å¤„ç†å¤±è´¥: event={}, handler={}"</span>, event, handler.getClass().getSimpleName(), e);
                }
            }
        }
        log.info(<span class="hljs-string">"å‘å¸ƒäº‹ä»¶: {}"</span>, event.getClass().getSimpleName());
    }
    
    <span class="hljs-comment">// å¼‚æ­¥å‘å¸ƒäº‹ä»¶</span>
    <span class="hljs-keyword">public</span> &lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">DomainEvent</span>&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">publishAsync</span><span class="hljs-params">(T event)</span> {
        CompletableFuture.runAsync(() -&gt; publish(event));
    }
}

<span class="hljs-comment">// äº‹ä»¶å¤„ç†å™¨æ¥å£</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">EventHandler</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">DomainEvent</span>&gt; {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">handle</span><span class="hljs-params">(T event)</span>;
}

<span class="hljs-comment">// è®¢å•äº‹ä»¶å¤„ç†å™¨</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderEventHandlers</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> NotificationService notificationService;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> InventoryService inventoryService;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> PaymentService paymentService;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> EventBus eventBus;
    
    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ³¨å†Œäº‹ä»¶å¤„ç†å™¨</span>
        eventBus.subscribe(OrderCreatedEvent.class, <span class="hljs-built_in">this</span>::handleOrderCreated);
        eventBus.subscribe(OrderPaidEvent.class, <span class="hljs-built_in">this</span>::handleOrderPaid);
        eventBus.subscribe(OrderCancelledEvent.class, <span class="hljs-built_in">this</span>::handleOrderCancelled);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleOrderCreated</span><span class="hljs-params">(OrderCreatedEvent event)</span> {
        log.info(<span class="hljs-string">"å¤„ç†è®¢å•åˆ›å»ºäº‹ä»¶: orderNumber={}"</span>, event.getOrderNumber());
        
        <span class="hljs-comment">// 1. å‘é€é€šçŸ¥</span>
        notificationService.sendOrderCreatedNotification(event.getUserId(), event.getOrderNumber());
        
        <span class="hljs-comment">// 2. æ‰£å‡åº“å­˜</span>
        <span class="hljs-comment">// inventoryService.deductInventory(...);</span>
        
        <span class="hljs-comment">// 3. è§¦å‘å…¶ä»–ä¸šåŠ¡é€»è¾‘</span>
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleOrderPaid</span><span class="hljs-params">(OrderPaidEvent event)</span> {
        log.info(<span class="hljs-string">"å¤„ç†è®¢å•æ”¯ä»˜äº‹ä»¶: orderNumber={}"</span>, event.getOrderNumber());
        
        <span class="hljs-comment">// 1. å‘é€æ”¯ä»˜æˆåŠŸé€šçŸ¥</span>
        notificationService.sendPaymentSuccessNotification(event.getUserId(), event.getOrderNumber());
        
        <span class="hljs-comment">// 2. æ›´æ–°è®¢å•çŠ¶æ€</span>
        <span class="hljs-comment">// orderService.updateOrderStatus(...);</span>
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleOrderCancelled</span><span class="hljs-params">(OrderCancelledEvent event)</span> {
        log.info(<span class="hljs-string">"å¤„ç†è®¢å•å–æ¶ˆäº‹ä»¶: orderNumber={}"</span>, event.getOrderNumber());
        
        <span class="hljs-comment">// 1. å‘é€å–æ¶ˆé€šçŸ¥</span>
        notificationService.sendOrderCancelledNotification(event.getUserId(), event.getOrderNumber());
        
        <span class="hljs-comment">// 2. æ¢å¤åº“å­˜</span>
        <span class="hljs-comment">// inventoryService.restoreInventory(...);</span>
    }
}

<span class="hljs-comment">// äº‹ä»¶å­˜å‚¨</span>
<span class="hljs-meta">@Repository</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">EventStore</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">JpaRepository</span>&lt;EventEntity, Long&gt; {
    List&lt;EventEntity&gt; <span class="hljs-title function_">findByAggregateIdAndAggregateType</span><span class="hljs-params">(String aggregateId, String aggregateType)</span>;
}

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "event_store")</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EventEntity</span> {
    
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;
    
    <span class="hljs-keyword">private</span> String aggregateId;
    <span class="hljs-keyword">private</span> String aggregateType;
    <span class="hljs-keyword">private</span> String eventType;
    
    <span class="hljs-meta">@Lob</span>
    <span class="hljs-keyword">private</span> String eventData;
    
    <span class="hljs-keyword">private</span> Date occurredOn;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> version;
}
</code></pre>
<hr/>
<h2 data-id="heading-5">2. é«˜å¹¶å‘ç³»ç»Ÿè®¾è®¡</h2>
<h3 data-id="heading-6">2.1 é™æµç®—æ³•</h3>
<p><strong>é™æµç®—æ³•å®ç°ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é™æµå™¨æ¥å£</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">RateLimiter</span> {
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryAcquire</span><span class="hljs-params">()</span>;
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryAcquire</span><span class="hljs-params">(<span class="hljs-type">int</span> <span class="hljs-keyword">permits</span>)</span>;
}

<span class="hljs-comment">// å›ºå®šçª—å£é™æµ</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FixedWindowRateLimiter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">RateLimiter</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> limit;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> windowSize; <span class="hljs-comment">// çª—å£å¤§å°ï¼ˆæ¯«ç§’ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">counter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">long</span> <span class="hljs-variable">windowStart</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Object</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">FixedWindowRateLimiter</span><span class="hljs-params">(<span class="hljs-type">int</span> limit, <span class="hljs-type">long</span> windowSizeMillis)</span> {
        <span class="hljs-built_in">this</span>.limit = limit;
        <span class="hljs-built_in">this</span>.windowSize = windowSizeMillis;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryAcquire</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> tryAcquire(<span class="hljs-number">1</span>);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryAcquire</span><span class="hljs-params">(<span class="hljs-type">int</span> <span class="hljs-keyword">permits</span>)</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">currentTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        
        <span class="hljs-keyword">synchronized</span> (lock) {
            <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦è¿›å…¥æ–°çª—å£</span>
            <span class="hljs-keyword">if</span> (currentTime - windowStart &gt;= windowSize) {
                counter.set(<span class="hljs-number">0</span>);
                windowStart = currentTime;
            }
            
            <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦è¶…è¿‡é™åˆ¶</span>
            <span class="hljs-keyword">if</span> (counter.get() + <span class="hljs-keyword">permits</span> &lt;= limit) {
                counter.addAndGet(<span class="hljs-keyword">permits</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getCurrentCount</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> counter.get();
    }
}

<span class="hljs-comment">// æ»‘åŠ¨çª—å£é™æµ</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SlidingWindowRateLimiter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">RateLimiter</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> limit;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> windowSize;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Queue&lt;Long&gt; requests = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentLinkedQueue</span>&lt;&gt;();
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SlidingWindowRateLimiter</span><span class="hljs-params">(<span class="hljs-type">int</span> limit, <span class="hljs-type">long</span> windowSizeMillis)</span> {
        <span class="hljs-built_in">this</span>.limit = limit;
        <span class="hljs-built_in">this</span>.windowSize = windowSizeMillis;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryAcquire</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> tryAcquire(<span class="hljs-number">1</span>);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryAcquire</span><span class="hljs-params">(<span class="hljs-type">int</span> <span class="hljs-keyword">permits</span>)</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">currentTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        
        <span class="hljs-comment">// ç§»é™¤è¿‡æœŸçš„è¯·æ±‚</span>
        <span class="hljs-keyword">while</span> (!requests.isEmpty() &amp;&amp; currentTime - requests.peek() &gt; windowSize) {
            requests.poll();
        }
        
        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦è¶…è¿‡é™åˆ¶</span>
        <span class="hljs-keyword">if</span> (requests.size() + <span class="hljs-keyword">permits</span> &lt;= limit) {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">permits</span>; i++) {
                requests.offer(currentTime);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
}

<span class="hljs-comment">// ä»¤ç‰Œæ¡¶é™æµ</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TokenBucketRateLimiter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">RateLimiter</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> capacity; <span class="hljs-comment">// æ¡¶å®¹é‡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">double</span> refillRate; <span class="hljs-comment">// æ¯ç§’è¡¥å……çš„ä»¤ç‰Œæ•°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> tokens; <span class="hljs-comment">// å½“å‰ä»¤ç‰Œæ•°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> lastRefillTime; <span class="hljs-comment">// ä¸Šæ¬¡è¡¥å……æ—¶é—´</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Object</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">TokenBucketRateLimiter</span><span class="hljs-params">(<span class="hljs-type">int</span> capacity, <span class="hljs-type">double</span> refillRate)</span> {
        <span class="hljs-built_in">this</span>.capacity = capacity;
        <span class="hljs-built_in">this</span>.refillRate = refillRate;
        <span class="hljs-built_in">this</span>.tokens = capacity;
        <span class="hljs-built_in">this</span>.lastRefillTime = System.currentTimeMillis();
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryAcquire</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> tryAcquire(<span class="hljs-number">1</span>);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryAcquire</span><span class="hljs-params">(<span class="hljs-type">int</span> <span class="hljs-keyword">permits</span>)</span> {
        <span class="hljs-keyword">synchronized</span> (lock) {
            refillTokens();
            
            <span class="hljs-keyword">if</span> (tokens &gt;= <span class="hljs-keyword">permits</span>) {
                tokens -= <span class="hljs-keyword">permits</span>;
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">refillTokens</span><span class="hljs-params">()</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">currentTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        <span class="hljs-type">long</span> <span class="hljs-variable">elapsed</span> <span class="hljs-operator">=</span> currentTime - lastRefillTime;
        
        <span class="hljs-keyword">if</span> (elapsed &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-type">double</span> <span class="hljs-variable">tokensToAdd</span> <span class="hljs-operator">=</span> (elapsed / <span class="hljs-number">1000.0</span>) * refillRate;
            tokens = Math.min(capacity, tokens + tokensToAdd);
            lastRefillTime = currentTime;
        }
    }
}

<span class="hljs-comment">// æ¼æ¡¶é™æµ</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LeakyBucketRateLimiter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">RateLimiter</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> capacity; <span class="hljs-comment">// æ¡¶å®¹é‡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">double</span> leakRate; <span class="hljs-comment">// æ¯ç§’æ¼å‡ºçš„é€Ÿç‡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> water; <span class="hljs-comment">// å½“å‰æ°´é‡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> lastLeakTime; <span class="hljs-comment">// ä¸Šæ¬¡æ¼æ°´æ—¶é—´</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Object</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">LeakyBucketRateLimiter</span><span class="hljs-params">(<span class="hljs-type">int</span> capacity, <span class="hljs-type">double</span> leakRate)</span> {
        <span class="hljs-built_in">this</span>.capacity = capacity;
        <span class="hljs-built_in">this</span>.leakRate = leakRate;
        <span class="hljs-built_in">this</span>.water = <span class="hljs-number">0</span>;
        <span class="hljs-built_in">this</span>.lastLeakTime = System.currentTimeMillis();
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryAcquire</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> tryAcquire(<span class="hljs-number">1</span>);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryAcquire</span><span class="hljs-params">(<span class="hljs-type">int</span> <span class="hljs-keyword">permits</span>)</span> {
        <span class="hljs-keyword">synchronized</span> (lock) {
            leakWater();
            
            <span class="hljs-keyword">if</span> (water + <span class="hljs-keyword">permits</span> &lt;= capacity) {
                water += <span class="hljs-keyword">permits</span>;
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">leakWater</span><span class="hljs-params">()</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">currentTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        <span class="hljs-type">long</span> <span class="hljs-variable">elapsed</span> <span class="hljs-operator">=</span> currentTime - lastLeakTime;
        
        <span class="hljs-keyword">if</span> (elapsed &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-type">double</span> <span class="hljs-variable">waterToLeak</span> <span class="hljs-operator">=</span> (elapsed / <span class="hljs-number">1000.0</span>) * leakRate;
            water = Math.max(<span class="hljs-number">0</span>, water - waterToLeak);
            lastLeakTime = currentTime;
        }
    }
}

<span class="hljs-comment">// é™æµæ³¨è§£</span>
<span class="hljs-meta">@Target(ElementType.METHOD)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> RateLimit {
    <span class="hljs-type">int</span> <span class="hljs-title function_">limit</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-number">100</span>;
    <span class="hljs-type">long</span> <span class="hljs-title function_">windowSize</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-number">1000</span>; <span class="hljs-comment">// æ¯«ç§’</span>
    RateLimitType <span class="hljs-title function_">type</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> RateLimitType.FIXED_WINDOW;
}

<span class="hljs-keyword">enum</span> <span class="hljs-title class_">RateLimitType</span> {
    FIXED_WINDOW,
    SLIDING_WINDOW,
    TOKEN_BUCKET,
    LEAKY_BUCKET
}

<span class="hljs-comment">// é™æµåˆ‡é¢</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RateLimitAspect</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, RateLimiter&gt; limiters = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-meta">@Around("@annotation(rateLimit)")</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">rateLimit</span><span class="hljs-params">(ProceedingJoinPoint joinPoint, RateLimit rateLimit)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> generateKey(joinPoint);
        <span class="hljs-type">RateLimiter</span> <span class="hljs-variable">limiter</span> <span class="hljs-operator">=</span> limiters.computeIfAbsent(key, k -&gt; createRateLimiter(rateLimit));
        
        <span class="hljs-keyword">if</span> (!limiter.tryAcquire()) {
            log.warn(<span class="hljs-string">"è¯·æ±‚è¢«é™æµ: key={}"</span>, key);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RateLimitException</span>(<span class="hljs-string">"è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åé‡è¯•"</span>);
        }
        
        <span class="hljs-keyword">return</span> joinPoint.proceed();
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">generateKey</span><span class="hljs-params">(ProceedingJoinPoint joinPoint)</span> {
        <span class="hljs-keyword">return</span> joinPoint.getSignature().toLongString();
    }
    
    <span class="hljs-keyword">private</span> RateLimiter <span class="hljs-title function_">createRateLimiter</span><span class="hljs-params">(RateLimit rateLimit)</span> {
        <span class="hljs-keyword">switch</span> (rateLimit.type()) {
            <span class="hljs-keyword">case</span> FIXED_WINDOW:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FixedWindowRateLimiter</span>(rateLimit.limit(), rateLimit.windowSize());
            <span class="hljs-keyword">case</span> SLIDING_WINDOW:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SlidingWindowRateLimiter</span>(rateLimit.limit(), rateLimit.windowSize());
            <span class="hljs-keyword">case</span> TOKEN_BUCKET:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TokenBucketRateLimiter</span>(rateLimit.limit(), rateLimit.limit() / (rateLimit.windowSize() / <span class="hljs-number">1000.0</span>));
            <span class="hljs-keyword">case</span> LEAKY_BUCKET:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LeakyBucketRateLimiter</span>(rateLimit.limit(), rateLimit.limit() / (rateLimit.windowSize() / <span class="hljs-number">1000.0</span>));
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FixedWindowRateLimiter</span>(rateLimit.limit(), rateLimit.windowSize());
        }
    }
}
</code></pre>
<h3 data-id="heading-7">2.2 ç†”æ–­é™çº§</h3>
<p><strong>ç†”æ–­é™çº§å®ç°ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç†”æ–­å™¨çŠ¶æ€</span>
<span class="hljs-keyword">enum</span> <span class="hljs-title class_">CircuitBreakerState</span> {
    CLOSED,    <span class="hljs-comment">// å…³é—­ï¼šæ­£å¸¸çŠ¶æ€</span>
    OPEN,      <span class="hljs-comment">// æ‰“å¼€ï¼šç†”æ–­çŠ¶æ€</span>
    HALF_OPEN  <span class="hljs-comment">// åŠå¼€ï¼šå°è¯•æ¢å¤</span>
}

<span class="hljs-comment">// ç†”æ–­å™¨</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CircuitBreaker</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">CircuitBreakerState</span> <span class="hljs-variable">state</span> <span class="hljs-operator">=</span> CircuitBreakerState.CLOSED;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">failureCount</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">successCount</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">long</span> lastFailureTime;
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> failureThreshold; <span class="hljs-comment">// å¤±è´¥é˜ˆå€¼</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> timeout; <span class="hljs-comment">// è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> halfOpenTimeout; <span class="hljs-comment">// åŠå¼€çŠ¶æ€è¶…æ—¶æ—¶é—´</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CircuitBreaker</span><span class="hljs-params">(<span class="hljs-type">int</span> failureThreshold, <span class="hljs-type">long</span> timeout, <span class="hljs-type">long</span> halfOpenTimeout)</span> {
        <span class="hljs-built_in">this</span>.failureThreshold = failureThreshold;
        <span class="hljs-built_in">this</span>.timeout = timeout;
        <span class="hljs-built_in">this</span>.halfOpenTimeout = halfOpenTimeout;
    }
    
    <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">execute</span><span class="hljs-params">(Supplier&lt;T&gt; supplier)</span> {
        <span class="hljs-keyword">if</span> (state == CircuitBreakerState.OPEN) {
            <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å¯ä»¥è¿›å…¥åŠå¼€çŠ¶æ€</span>
            <span class="hljs-keyword">if</span> (System.currentTimeMillis() - lastFailureTime &gt; timeout) {
                state = CircuitBreakerState.HALF_OPEN;
                successCount.set(<span class="hljs-number">0</span>);
                log.info(<span class="hljs-string">"ç†”æ–­å™¨è¿›å…¥åŠå¼€çŠ¶æ€"</span>);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CircuitBreakerOpenException</span>(<span class="hljs-string">"ç†”æ–­å™¨å·²æ‰“å¼€"</span>);
            }
        }
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">T</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> supplier.get();
            onSuccess();
            <span class="hljs-keyword">return</span> result;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            onFailure();
            <span class="hljs-keyword">throw</span> e;
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (state == CircuitBreakerState.HALF_OPEN) {
            successCount.incrementAndGet();
            <span class="hljs-keyword">if</span> (successCount.get() &gt;= <span class="hljs-number">3</span>) { <span class="hljs-comment">// è¿ç»­æˆåŠŸ3æ¬¡ï¼Œæ¢å¤æ­£å¸¸</span>
                state = CircuitBreakerState.CLOSED;
                failureCount.set(<span class="hljs-number">0</span>);
                log.info(<span class="hljs-string">"ç†”æ–­å™¨æ¢å¤æ­£å¸¸"</span>);
            }
        } <span class="hljs-keyword">else</span> {
            failureCount.set(<span class="hljs-number">0</span>);
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onFailure</span><span class="hljs-params">()</span> {
        failureCount.incrementAndGet();
        lastFailureTime = System.currentTimeMillis();
        
        <span class="hljs-keyword">if</span> (failureCount.get() &gt;= failureThreshold) {
            state = CircuitBreakerState.OPEN;
            log.warn(<span class="hljs-string">"ç†”æ–­å™¨æ‰“å¼€: failureCount={}"</span>, failureCount.get());
        }
    }
    
    <span class="hljs-keyword">public</span> CircuitBreakerState <span class="hljs-title function_">getState</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> state;
    }
}

<span class="hljs-comment">// é™çº§ç­–ç•¥</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FallbackService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> CircuitBreaker circuitBreaker;
    
    <span class="hljs-comment">// æ‰§è¡Œå¸¦é™çº§çš„æ“ä½œ</span>
    <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">executeWithFallback</span><span class="hljs-params">(Supplier&lt;T&gt; supplier, Supplier&lt;T&gt; fallback)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> circuitBreaker.execute(supplier);
        } <span class="hljs-keyword">catch</span> (CircuitBreakerOpenException e) {
            log.warn(<span class="hljs-string">"æ‰§è¡Œé™çº§ç­–ç•¥"</span>);
            <span class="hljs-keyword">return</span> fallback.get();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"æ‰§è¡Œå¤±è´¥ï¼Œä½¿ç”¨é™çº§ç­–ç•¥"</span>, e);
            <span class="hljs-keyword">return</span> fallback.get();
        }
    }
    
    <span class="hljs-comment">// å¼‚æ­¥é™çº§</span>
    <span class="hljs-keyword">public</span> &lt;T&gt; CompletableFuture&lt;T&gt; <span class="hljs-title function_">executeWithAsyncFallback</span><span class="hljs-params">(
        Supplier&lt;CompletableFuture&lt;T&gt;&gt; supplier, 
        Supplier&lt;T&gt; fallback)</span> {
        
        <span class="hljs-keyword">return</span> supplier.get()
            .exceptionally(throwable -&gt; {
                log.warn(<span class="hljs-string">"å¼‚æ­¥æ‰§è¡Œå¤±è´¥ï¼Œä½¿ç”¨é™çº§ç­–ç•¥"</span>, throwable);
                <span class="hljs-keyword">return</span> fallback.get();
            });
    }
}

<span class="hljs-comment">// ç†”æ–­é™çº§ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceWithCircuitBreaker</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> CircuitBreaker circuitBreaker;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> FallbackService fallbackService;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserRepository userRepository;
    
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserById</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-keyword">return</span> fallbackService.executeWithFallback(
            () -&gt; {
                <span class="hljs-comment">// æ­£å¸¸æŸ¥è¯¢</span>
                <span class="hljs-keyword">return</span> userRepository.findById(userId)
                    .orElseThrow(() -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserNotFoundException</span>(<span class="hljs-string">"ç”¨æˆ·ä¸å­˜åœ¨"</span>));
            },
            () -&gt; {
                <span class="hljs-comment">// é™çº§ç­–ç•¥ï¼šè¿”å›é»˜è®¤ç”¨æˆ·</span>
                log.info(<span class="hljs-string">"ä½¿ç”¨é™çº§ç­–ç•¥è¿”å›é»˜è®¤ç”¨æˆ·"</span>);
                <span class="hljs-keyword">return</span> createDefaultUser(userId);
            }
        );
    }
    
    <span class="hljs-keyword">private</span> User <span class="hljs-title function_">createDefaultUser</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
        user.setId(userId);
        user.setName(<span class="hljs-string">"é»˜è®¤ç”¨æˆ·"</span>);
        <span class="hljs-keyword">return</span> user;
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-8">3. åˆ†å¸ƒå¼é”æ·±åº¦åº”ç”¨</h2>
<h3 data-id="heading-9">3.1 Redisåˆ†å¸ƒå¼é”</h3>
<p><strong>Redisåˆ†å¸ƒå¼é”å®ç°ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Redisåˆ†å¸ƒå¼é”</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisDistributedLock</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RedisTemplate&lt;String, String&gt; redisTemplate;
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">LOCK_PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">"lock:"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">LOCK_SCRIPT</span> <span class="hljs-operator">=</span> 
        <span class="hljs-string">"if redis.call('get', KEYS[1]) == ARGV[1] then "</span> +
        <span class="hljs-string">"return redis.call('del', KEYS[1]) "</span> +
        <span class="hljs-string">"else return 0 end"</span>;
    
    <span class="hljs-comment">// è·å–é”</span>
    <span class="hljs-keyword">public</span> DistributedLock <span class="hljs-title function_">acquireLock</span><span class="hljs-params">(String key, <span class="hljs-type">long</span> expireTime, TimeUnit timeUnit)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">lockKey</span> <span class="hljs-operator">=</span> LOCK_PREFIX + key;
        <span class="hljs-type">String</span> <span class="hljs-variable">lockValue</span> <span class="hljs-operator">=</span> UUID.randomUUID().toString();
        <span class="hljs-type">long</span> <span class="hljs-variable">expireMillis</span> <span class="hljs-operator">=</span> timeUnit.toMillis(expireTime);
        
        <span class="hljs-type">Boolean</span> <span class="hljs-variable">acquired</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().setIfAbsent(
            lockKey, 
            lockValue, 
            expireMillis, 
            TimeUnit.MILLISECONDS
        );
        
        <span class="hljs-keyword">if</span> (Boolean.TRUE.equals(acquired)) {
            log.info(<span class="hljs-string">"è·å–åˆ†å¸ƒå¼é”æˆåŠŸ: key={}, value={}"</span>, lockKey, lockValue);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisLockImpl</span>(lockKey, lockValue, expireMillis);
        }
        
        log.warn(<span class="hljs-string">"è·å–åˆ†å¸ƒå¼é”å¤±è´¥: key={}"</span>, lockKey);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-comment">// å¯é‡å…¥é”å®ç°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisLockImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">DistributedLock</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String lockKey;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String lockValue;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> expireTime;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ThreadLocal&lt;Integer&gt; reentrantCount = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;();
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">RedisLockImpl</span><span class="hljs-params">(String lockKey, String lockValue, <span class="hljs-type">long</span> expireTime)</span> {
            <span class="hljs-built_in">this</span>.lockKey = lockKey;
            <span class="hljs-built_in">this</span>.lockValue = lockValue;
            <span class="hljs-built_in">this</span>.expireTime = expireTime;
            <span class="hljs-built_in">this</span>.reentrantCount.set(<span class="hljs-number">1</span>);
        }
        
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryLock</span><span class="hljs-params">(<span class="hljs-type">long</span> timeout, TimeUnit unit)</span> {
            <span class="hljs-type">Integer</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> reentrantCount.get();
            <span class="hljs-keyword">if</span> (count != <span class="hljs-literal">null</span> &amp;&amp; count &gt; <span class="hljs-number">0</span>) {
                reentrantCount.set(count + <span class="hljs-number">1</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">unlock</span><span class="hljs-params">()</span> {
            <span class="hljs-type">Integer</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> reentrantCount.get();
            <span class="hljs-keyword">if</span> (count != <span class="hljs-literal">null</span> &amp;&amp; count &gt; <span class="hljs-number">1</span>) {
                reentrantCount.set(count - <span class="hljs-number">1</span>);
                <span class="hljs-keyword">return</span>;
            }
            
            <span class="hljs-comment">// ä½¿ç”¨Luaè„šæœ¬ä¿è¯åŸå­æ€§</span>
            DefaultRedisScript&lt;Long&gt; script = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultRedisScript</span>&lt;&gt;();
            script.setScriptText(LOCK_SCRIPT);
            script.setResultType(Long.class);
            
            <span class="hljs-type">Long</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> redisTemplate.execute(script, 
                Collections.singletonList(lockKey), lockValue);
            
            <span class="hljs-keyword">if</span> (result != <span class="hljs-literal">null</span> &amp;&amp; result == <span class="hljs-number">1</span>) {
                log.info(<span class="hljs-string">"é‡Šæ”¾åˆ†å¸ƒå¼é”æˆåŠŸ: key={}"</span>, lockKey);
                reentrantCount.remove();
            } <span class="hljs-keyword">else</span> {
                log.warn(<span class="hljs-string">"é‡Šæ”¾åˆ†å¸ƒå¼é”å¤±è´¥: key={}"</span>, lockKey);
            }
        }
        
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> {
            unlock();
        }
    }
}

<span class="hljs-comment">// ZooKeeperåˆ†å¸ƒå¼é”</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ZooKeeperDistributedLock</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> CuratorFramework client;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">LOCK_PATH</span> <span class="hljs-operator">=</span> <span class="hljs-string">"/locks"</span>;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ZooKeeperDistributedLock</span><span class="hljs-params">(<span class="hljs-meta">@Value("${zookeeper.connect-string}")</span> String connectString)</span> {
        <span class="hljs-built_in">this</span>.client = CuratorFrameworkFactory.newClient(connectString, 
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">RetryForever</span>(<span class="hljs-number">1000</span>));
        <span class="hljs-built_in">this</span>.client.start();
    }
    
    <span class="hljs-keyword">public</span> DistributedLock <span class="hljs-title function_">acquireLock</span><span class="hljs-params">(String key)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">lockPath</span> <span class="hljs-operator">=</span> LOCK_PATH + <span class="hljs-string">"/"</span> + key;
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">InterProcessMutex</span> <span class="hljs-variable">mutex</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InterProcessMutex</span>(client, lockPath);
            mutex.acquire();
            
            log.info(<span class="hljs-string">"è·å–ZooKeeperåˆ†å¸ƒå¼é”æˆåŠŸ: key={}"</span>, key);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ZooKeeperLockImpl</span>(mutex, key);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"è·å–ZooKeeperåˆ†å¸ƒå¼é”å¤±è´¥: key={}"</span>, key, e);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"è·å–é”å¤±è´¥"</span>, e);
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ZooKeeperLockImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">DistributedLock</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> InterProcessMutex mutex;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String key;
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">ZooKeeperLockImpl</span><span class="hljs-params">(InterProcessMutex mutex, String key)</span> {
            <span class="hljs-built_in">this</span>.mutex = mutex;
            <span class="hljs-built_in">this</span>.key = key;
        }
        
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryLock</span><span class="hljs-params">(<span class="hljs-type">long</span> timeout, TimeUnit unit)</span> {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">return</span> mutex.acquire(timeout, unit);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                log.error(<span class="hljs-string">"å°è¯•è·å–é”å¤±è´¥: key={}"</span>, key, e);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        }
        
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">unlock</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">try</span> {
                mutex.release();
                log.info(<span class="hljs-string">"é‡Šæ”¾ZooKeeperåˆ†å¸ƒå¼é”æˆåŠŸ: key={}"</span>, key);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                log.error(<span class="hljs-string">"é‡Šæ”¾é”å¤±è´¥: key={}"</span>, key, e);
            }
        }
        
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> {
            unlock();
        }
    }
}

<span class="hljs-comment">// æ•°æ®åº“åˆ†å¸ƒå¼é”</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseDistributedLock</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> JdbcTemplate jdbcTemplate;
    
    <span class="hljs-comment">// åŸºäºæ•°æ®åº“å”¯ä¸€ç´¢å¼•çš„åˆ†å¸ƒå¼é”</span>
    <span class="hljs-keyword">public</span> DistributedLock <span class="hljs-title function_">acquireLock</span><span class="hljs-params">(String key, <span class="hljs-type">long</span> expireTime)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">lockKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"lock_"</span> + key;
        <span class="hljs-type">String</span> <span class="hljs-variable">lockValue</span> <span class="hljs-operator">=</span> UUID.randomUUID().toString();
        <span class="hljs-type">Date</span> <span class="hljs-variable">expireTime</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(System.currentTimeMillis() + expireTime);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// å°è¯•æ’å…¥é”è®°å½•</span>
            jdbcTemplate.update(
                <span class="hljs-string">"INSERT INTO distributed_lock (lock_key, lock_value, expire_time) VALUES (?, ?, ?)"</span>,
                lockKey, lockValue, expireTime
            );
            
            log.info(<span class="hljs-string">"è·å–æ•°æ®åº“åˆ†å¸ƒå¼é”æˆåŠŸ: key={}"</span>, lockKey);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatabaseLockImpl</span>(lockKey, lockValue);
        } <span class="hljs-keyword">catch</span> (DuplicateKeyException e) {
            <span class="hljs-comment">// é”å·²å­˜åœ¨ï¼Œæ£€æŸ¥æ˜¯å¦è¿‡æœŸ</span>
            Map&lt;String, Object&gt; lock = jdbcTemplate.queryForMap(
                <span class="hljs-string">"SELECT * FROM distributed_lock WHERE lock_key = ?"</span>, lockKey
            );
            
            <span class="hljs-type">Date</span> <span class="hljs-variable">existingExpireTime</span> <span class="hljs-operator">=</span> (Date) lock.get(<span class="hljs-string">"expire_time"</span>);
            <span class="hljs-keyword">if</span> (existingExpireTime.before(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>())) {
                <span class="hljs-comment">// é”å·²è¿‡æœŸï¼Œåˆ é™¤å¹¶é‡æ–°è·å–</span>
                jdbcTemplate.update(<span class="hljs-string">"DELETE FROM distributed_lock WHERE lock_key = ?"</span>, lockKey);
                <span class="hljs-keyword">return</span> acquireLock(key, expireTime);
            }
            
            log.warn(<span class="hljs-string">"è·å–æ•°æ®åº“åˆ†å¸ƒå¼é”å¤±è´¥: key={}, é”å·²å­˜åœ¨ä¸”æœªè¿‡æœŸ"</span>, lockKey);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseLockImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">DistributedLock</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String lockKey;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String lockValue;
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">DatabaseLockImpl</span><span class="hljs-params">(String lockKey, String lockValue)</span> {
            <span class="hljs-built_in">this</span>.lockKey = lockKey;
            <span class="hljs-built_in">this</span>.lockValue = lockValue;
        }
        
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryLock</span><span class="hljs-params">(<span class="hljs-type">long</span> timeout, TimeUnit unit)</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// å·²è·å–é”</span>
        }
        
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">unlock</span><span class="hljs-params">()</span> {
            <span class="hljs-type">int</span> <span class="hljs-variable">deleted</span> <span class="hljs-operator">=</span> jdbcTemplate.update(
                <span class="hljs-string">"DELETE FROM distributed_lock WHERE lock_key = ? AND lock_value = ?"</span>,
                lockKey, lockValue
            );
            
            <span class="hljs-keyword">if</span> (deleted &gt; <span class="hljs-number">0</span>) {
                log.info(<span class="hljs-string">"é‡Šæ”¾æ•°æ®åº“åˆ†å¸ƒå¼é”æˆåŠŸ: key={}"</span>, lockKey);
            } <span class="hljs-keyword">else</span> {
                log.warn(<span class="hljs-string">"é‡Šæ”¾æ•°æ®åº“åˆ†å¸ƒå¼é”å¤±è´¥: key={}"</span>, lockKey);
            }
        }
        
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> {
            unlock();
        }
    }
}

<span class="hljs-comment">// åˆ†å¸ƒå¼é”æ¥å£</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">DistributedLock</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AutoCloseable</span> {
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryLock</span><span class="hljs-params">(<span class="hljs-type">long</span> timeout, TimeUnit unit)</span>;
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">unlock</span><span class="hljs-params">()</span>;
}
</code></pre>
<hr/>
<h2 data-id="heading-10">4. åˆ†å¸ƒå¼IDç”Ÿæˆ</h2>
<h3 data-id="heading-11">4.1 é›ªèŠ±ç®—æ³•</h3>
<p><strong>é›ªèŠ±ç®—æ³•å®ç°ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é›ªèŠ±ç®—æ³•IDç”Ÿæˆå™¨</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SnowflakeIdGenerator</span> {
    
    <span class="hljs-comment">// å¼€å§‹æ—¶é—´æˆ³ (2024-01-01)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">START_TIMESTAMP</span> <span class="hljs-operator">=</span> <span class="hljs-number">1704067200000L</span>;
    
    <span class="hljs-comment">// æœºå™¨IDæ‰€å çš„ä½æ•°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">WORKER_ID_BITS</span> <span class="hljs-operator">=</span> <span class="hljs-number">5L</span>;
    <span class="hljs-comment">// æ•°æ®ä¸­å¿ƒIDæ‰€å çš„ä½æ•°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">DATACENTER_ID_BITS</span> <span class="hljs-operator">=</span> <span class="hljs-number">5L</span>;
    <span class="hljs-comment">// åºåˆ—å·æ‰€å çš„ä½æ•°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">SEQUENCE_BITS</span> <span class="hljs-operator">=</span> <span class="hljs-number">12L</span>;
    
    <span class="hljs-comment">// æœºå™¨IDæœ€å¤§å€¼</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">MAX_WORKER_ID</span> <span class="hljs-operator">=</span> ~(-<span class="hljs-number">1L</span> &lt;&lt; WORKER_ID_BITS);
    <span class="hljs-comment">// æ•°æ®ä¸­å¿ƒIDæœ€å¤§å€¼</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">MAX_DATACENTER_ID</span> <span class="hljs-operator">=</span> ~(-<span class="hljs-number">1L</span> &lt;&lt; DATACENTER_ID_BITS);
    
    <span class="hljs-comment">// æœºå™¨IDå‘å·¦ç§»12ä½</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">WORKER_ID_SHIFT</span> <span class="hljs-operator">=</span> SEQUENCE_BITS;
    <span class="hljs-comment">// æ•°æ®ä¸­å¿ƒIDå‘å·¦ç§»17ä½(12+5)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">DATACENTER_ID_SHIFT</span> <span class="hljs-operator">=</span> SEQUENCE_BITS + WORKER_ID_BITS;
    <span class="hljs-comment">// æ—¶é—´æˆ³å‘å·¦ç§»22ä½(5+5+12)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">TIMESTAMP_LEFT_SHIFT</span> <span class="hljs-operator">=</span> SEQUENCE_BITS + WORKER_ID_BITS + DATACENTER_ID_BITS;
    
    <span class="hljs-comment">// ç”Ÿæˆåºåˆ—çš„æ©ç ï¼Œè¿™é‡Œä¸º4095 (0b111111111111=0xfff=4095)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">SEQUENCE_MASK</span> <span class="hljs-operator">=</span> ~(-<span class="hljs-number">1L</span> &lt;&lt; SEQUENCE_BITS);
    
    <span class="hljs-comment">// å·¥ä½œæœºå™¨ID(0~31)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> workerId;
    <span class="hljs-comment">// æ•°æ®ä¸­å¿ƒID(0~31)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> datacenterId;
    <span class="hljs-comment">// æ¯«ç§’å†…åºåˆ—(0~4095)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-variable">sequence</span> <span class="hljs-operator">=</span> <span class="hljs-number">0L</span>;
    <span class="hljs-comment">// ä¸Šæ¬¡ç”ŸæˆIDçš„æ—¶é—´æˆ³</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-variable">lastTimestamp</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1L</span>;
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Object</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SnowflakeIdGenerator</span><span class="hljs-params">(<span class="hljs-meta">@Value("${snowflake.worker-id}")</span> <span class="hljs-type">long</span> workerId,
                               <span class="hljs-meta">@Value("${snowflake.datacenter-id}")</span> <span class="hljs-type">long</span> datacenterId)</span> {
        <span class="hljs-keyword">if</span> (workerId &gt; MAX_WORKER_ID || workerId &lt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(
                String.format(<span class="hljs-string">"worker Id can't be greater than %d or less than 0"</span>, MAX_WORKER_ID));
        }
        <span class="hljs-keyword">if</span> (datacenterId &gt; MAX_DATACENTER_ID || datacenterId &lt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(
                String.format(<span class="hljs-string">"datacenter Id can't be greater than %d or less than 0"</span>, MAX_DATACENTER_ID));
        }
        <span class="hljs-built_in">this</span>.workerId = workerId;
        <span class="hljs-built_in">this</span>.datacenterId = datacenterId;
        log.info(<span class="hljs-string">"åˆå§‹åŒ–é›ªèŠ±ç®—æ³•IDç”Ÿæˆå™¨: workerId={}, datacenterId={}"</span>, workerId, datacenterId);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-type">long</span> <span class="hljs-title function_">nextId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">synchronized</span> (lock) {
            <span class="hljs-type">long</span> <span class="hljs-variable">timestamp</span> <span class="hljs-operator">=</span> timeGen();
            
            <span class="hljs-comment">// å¦‚æœå½“å‰æ—¶é—´å°äºä¸Šä¸€æ¬¡IDç”Ÿæˆçš„æ—¶é—´æˆ³ï¼Œè¯´æ˜ç³»ç»Ÿæ—¶é’Ÿå›é€€è¿‡</span>
            <span class="hljs-keyword">if</span> (timestamp &lt; lastTimestamp) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(
                    String.format(<span class="hljs-string">"Clock moved backwards. Refusing to generate id for %d milliseconds"</span>,
                        lastTimestamp - timestamp));
            }
            
            <span class="hljs-comment">// å¦‚æœæ˜¯åŒä¸€æ—¶é—´ç”Ÿæˆçš„ï¼Œåˆ™è¿›è¡Œæ¯«ç§’å†…åºåˆ—</span>
            <span class="hljs-keyword">if</span> (lastTimestamp == timestamp) {
                sequence = (sequence + <span class="hljs-number">1</span>) &amp; SEQUENCE_MASK;
                <span class="hljs-comment">// æ¯«ç§’å†…åºåˆ—æº¢å‡º</span>
                <span class="hljs-keyword">if</span> (sequence == <span class="hljs-number">0</span>) {
                    <span class="hljs-comment">// é˜»å¡åˆ°ä¸‹ä¸€ä¸ªæ¯«ç§’,è·å¾—æ–°çš„æ—¶é—´æˆ³</span>
                    timestamp = tilNextMillis(lastTimestamp);
                }
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// æ—¶é—´æˆ³æ”¹å˜ï¼Œæ¯«ç§’å†…åºåˆ—é‡ç½®</span>
                sequence = <span class="hljs-number">0L</span>;
            }
            
            <span class="hljs-comment">// ä¸Šæ¬¡ç”ŸæˆIDçš„æ—¶é—´æˆ³</span>
            lastTimestamp = timestamp;
            
            <span class="hljs-comment">// ç§»ä½å¹¶é€šè¿‡æˆ–è¿ç®—æ‹¼åˆ°ä¸€èµ·ç»„æˆ64ä½çš„ID</span>
            <span class="hljs-keyword">return</span> ((timestamp - START_TIMESTAMP) &lt;&lt; TIMESTAMP_LEFT_SHIFT)
                | (datacenterId &lt;&lt; DATACENTER_ID_SHIFT)
                | (workerId &lt;&lt; WORKER_ID_SHIFT)
                | sequence;
        }
    }
    
    <span class="hljs-comment">// é˜»å¡åˆ°ä¸‹ä¸€ä¸ªæ¯«ç§’ï¼Œç›´åˆ°è·å¾—æ–°çš„æ—¶é—´æˆ³</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-title function_">tilNextMillis</span><span class="hljs-params">(<span class="hljs-type">long</span> lastTimestamp)</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">timestamp</span> <span class="hljs-operator">=</span> timeGen();
        <span class="hljs-keyword">while</span> (timestamp &lt;= lastTimestamp) {
            timestamp = timeGen();
        }
        <span class="hljs-keyword">return</span> timestamp;
    }
    
    <span class="hljs-comment">// è¿”å›ä»¥æ¯«ç§’ä¸ºå•ä½çš„å½“å‰æ—¶é—´</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-title function_">timeGen</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> System.currentTimeMillis();
    }
    
    <span class="hljs-comment">// è§£æIDä¿¡æ¯</span>
    <span class="hljs-keyword">public</span> SnowflakeIdInfo <span class="hljs-title function_">parseId</span><span class="hljs-params">(<span class="hljs-type">long</span> id)</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">timestamp</span> <span class="hljs-operator">=</span> (id &gt;&gt; TIMESTAMP_LEFT_SHIFT) + START_TIMESTAMP;
        <span class="hljs-type">long</span> <span class="hljs-variable">datacenterId</span> <span class="hljs-operator">=</span> (id &gt;&gt; DATACENTER_ID_SHIFT) &amp; ((<span class="hljs-number">1L</span> &lt;&lt; DATACENTER_ID_BITS) - <span class="hljs-number">1</span>);
        <span class="hljs-type">long</span> <span class="hljs-variable">workerId</span> <span class="hljs-operator">=</span> (id &gt;&gt; WORKER_ID_SHIFT) &amp; ((<span class="hljs-number">1L</span> &lt;&lt; WORKER_ID_BITS) - <span class="hljs-number">1</span>);
        <span class="hljs-type">long</span> <span class="hljs-variable">sequence</span> <span class="hljs-operator">=</span> id &amp; SEQUENCE_MASK;
        
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SnowflakeIdInfo</span>(timestamp, datacenterId, workerId, sequence);
    }
}

<span class="hljs-comment">// IDä¿¡æ¯</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SnowflakeIdInfo</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> timestamp;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> datacenterId;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> workerId;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> sequence;
}
</code></pre>
<h3 data-id="heading-12">4.2 å…¶ä»–IDç”Ÿæˆæ–¹æ¡ˆ</h3>
<p><strong>å…¶ä»–IDç”Ÿæˆæ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// UUIDç”Ÿæˆå™¨</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UUIDGenerator</span> {
    
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">generateUUID</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> UUID.randomUUID().toString();
    }
    
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">generateUUIDWithoutHyphens</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> UUID.randomUUID().toString().replace(<span class="hljs-string">"-"</span>, <span class="hljs-string">""</span>);
    }
}

<span class="hljs-comment">// æ•°æ®åº“åºåˆ—IDç”Ÿæˆå™¨</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseSequenceIdGenerator</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> JdbcTemplate jdbcTemplate;
    
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">generateId</span><span class="hljs-params">(String sequenceName)</span> {
        <span class="hljs-comment">// MySQL</span>
        jdbcTemplate.update(<span class="hljs-string">"UPDATE sequence SET current_value = current_value + 1 WHERE name = ?"</span>, sequenceName);
        <span class="hljs-type">Long</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> jdbcTemplate.queryForObject(
            <span class="hljs-string">"SELECT current_value FROM sequence WHERE name = ?"</span>, 
            Long.class, sequenceName);
        <span class="hljs-keyword">return</span> id;
    }
    
    <span class="hljs-comment">// Redisè‡ªå¢IDç”Ÿæˆå™¨</span>
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RedisTemplate&lt;String, String&gt; redisTemplate;
    
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">generateIdFromRedis</span><span class="hljs-params">(String key)</span> {
        <span class="hljs-keyword">return</span> redisTemplate.opsForValue().increment(key);
    }
    
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">generateIdWithPrefix</span><span class="hljs-params">(String prefix)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"id:"</span> + prefix;
        <span class="hljs-keyword">return</span> redisTemplate.opsForValue().increment(key);
    }
}

<span class="hljs-comment">// IDç”Ÿæˆå™¨å·¥å‚</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IdGeneratorFactory</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> SnowflakeIdGenerator snowflakeIdGenerator;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UUIDGenerator uuidGenerator;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> DatabaseSequenceIdGenerator databaseSequenceIdGenerator;
    
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">generateId</span><span class="hljs-params">(IdType type)</span> {
        <span class="hljs-keyword">switch</span> (type) {
            <span class="hljs-keyword">case</span> SNOWFLAKE:
                <span class="hljs-keyword">return</span> snowflakeIdGenerator.nextId();
            <span class="hljs-keyword">case</span> DATABASE_SEQUENCE:
                <span class="hljs-keyword">return</span> databaseSequenceIdGenerator.generateId(<span class="hljs-string">"default_sequence"</span>);
            <span class="hljs-keyword">case</span> REDIS_INCREMENT:
                <span class="hljs-keyword">return</span> databaseSequenceIdGenerator.generateIdFromRedis(<span class="hljs-string">"id:default"</span>);
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"ä¸æ”¯æŒçš„IDç±»å‹: "</span> + type);
        }
    }
    
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">generateStringId</span><span class="hljs-params">(IdType type)</span> {
        <span class="hljs-keyword">switch</span> (type) {
            <span class="hljs-keyword">case</span> UUID:
                <span class="hljs-keyword">return</span> uuidGenerator.generateUUID();
            <span class="hljs-keyword">case</span> UUID_WITHOUT_HYPHENS:
                <span class="hljs-keyword">return</span> uuidGenerator.generateUUIDWithoutHyphens();
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"ä¸æ”¯æŒçš„å­—ç¬¦ä¸²IDç±»å‹: "</span> + type);
        }
    }
}

<span class="hljs-keyword">enum</span> <span class="hljs-title class_">IdType</span> {
    SNOWFLAKE,
    UUID,
    UUID_WITHOUT_HYPHENS,
    DATABASE_SEQUENCE,
    REDIS_INCREMENT
}
</code></pre>
<hr/>
<h2 data-id="heading-13">5. ç³»ç»Ÿæ¶æ„æ¼”è¿›</h2>
<h3 data-id="heading-14">5.1 å•ä½“åˆ°å¾®æœåŠ¡æ¼”è¿›</h3>
<p><strong>æ¶æ„æ¼”è¿›ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å•ä½“æ¶æ„ç¤ºä¾‹</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api")</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MonolithicController</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserService userService;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderService orderService;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> PaymentService paymentService;
    
    <span class="hljs-comment">// å•ä½“æ¶æ„ï¼šæ‰€æœ‰åŠŸèƒ½åœ¨ä¸€ä¸ªåº”ç”¨ä¸­</span>
    <span class="hljs-meta">@PostMapping("/order")</span>
    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">createOrder</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> CreateOrderRequest request)</span> {
        <span class="hljs-comment">// 1. åˆ›å»ºç”¨æˆ·ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userService.getOrCreateUser(request.getUserId());
        
        <span class="hljs-comment">// 2. åˆ›å»ºè®¢å•</span>
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderService.createOrder(request);
        
        <span class="hljs-comment">// 3. å¤„ç†æ”¯ä»˜</span>
        <span class="hljs-type">Payment</span> <span class="hljs-variable">payment</span> <span class="hljs-operator">=</span> paymentService.processPayment(order);
        
        <span class="hljs-keyword">return</span> order;
    }
}

<span class="hljs-comment">// å¾®æœåŠ¡æ¶æ„ï¼šæœåŠ¡æ‹†åˆ†</span>
<span class="hljs-comment">// User Service</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api/users")</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserService userService;
    
    <span class="hljs-meta">@GetMapping("/{userId}")</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long userId)</span> {
        <span class="hljs-keyword">return</span> userService.getUserById(userId);
    }
}

<span class="hljs-comment">// Order Service</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api/orders")</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderController</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderService orderService;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserFeignClient userFeignClient;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> PaymentFeignClient paymentFeignClient;
    
    <span class="hljs-meta">@PostMapping</span>
    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">createOrder</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> CreateOrderRequest request)</span> {
        <span class="hljs-comment">// è°ƒç”¨ç”¨æˆ·æœåŠ¡</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userFeignClient.getUser(request.getUserId());
        
        <span class="hljs-comment">// åˆ›å»ºè®¢å•</span>
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderService.createOrder(request);
        
        <span class="hljs-comment">// è°ƒç”¨æ”¯ä»˜æœåŠ¡</span>
        <span class="hljs-type">Payment</span> <span class="hljs-variable">payment</span> <span class="hljs-operator">=</span> paymentFeignClient.processPayment(order);
        
        <span class="hljs-keyword">return</span> order;
    }
}

<span class="hljs-comment">// Feignå®¢æˆ·ç«¯</span>
<span class="hljs-meta">@FeignClient(name = "user-service", url = "${services.user-service.url}")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserFeignClient</span> {
    <span class="hljs-meta">@GetMapping("/api/users/{userId}")</span>
    User <span class="hljs-title function_">getUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable("userId")</span> Long userId)</span>;
}

<span class="hljs-meta">@FeignClient(name = "payment-service", url = "${services.payment-service.url}")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">PaymentFeignClient</span> {
    <span class="hljs-meta">@PostMapping("/api/payments")</span>
    Payment <span class="hljs-title function_">processPayment</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Order order)</span>;
}
</code></pre>
<h3 data-id="heading-15">5.2 å¾®æœåŠ¡åˆ°äº‘åŸç”Ÿæ¼”è¿›</h3>
<p><strong>äº‘åŸç”Ÿæ¶æ„ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// äº‘åŸç”Ÿé…ç½®</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CloudNativeConfig</span> {
    
    <span class="hljs-comment">// é…ç½®ä¸­å¿ƒï¼ˆNacos/Config Serverï¼‰</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@ConfigurationProperties(prefix = "app")</span>
    <span class="hljs-keyword">public</span> AppProperties <span class="hljs-title function_">appProperties</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AppProperties</span>();
    }
    
    <span class="hljs-comment">// æœåŠ¡å‘ç°ï¼ˆNacos/Eurekaï¼‰</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> ServiceDiscovery <span class="hljs-title function_">serviceDiscovery</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NacosServiceDiscovery</span>();
    }
    
    <span class="hljs-comment">// å¥åº·æ£€æŸ¥</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> HealthIndicator <span class="hljs-title function_">customHealthIndicator</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomHealthIndicator</span>();
    }
}

<span class="hljs-comment">// äº‘åŸç”Ÿåº”ç”¨ç‰¹æ€§</span>
<span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-meta">@EnableDiscoveryClient</span>
<span class="hljs-meta">@EnableCircuitBreaker</span>
<span class="hljs-meta">@EnableConfigServer</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CloudNativeApplication</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">SpringApplication</span> <span class="hljs-variable">app</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpringApplication</span>(CloudNativeApplication.class);
        
        <span class="hljs-comment">// ä»ç¯å¢ƒå˜é‡è¯»å–é…ç½®ï¼ˆ12-Factor Appï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">port</span> <span class="hljs-operator">=</span> System.getenv(<span class="hljs-string">"PORT"</span>);
        <span class="hljs-keyword">if</span> (port != <span class="hljs-literal">null</span>) {
            app.setDefaultProperties(Collections.singletonMap(<span class="hljs-string">"server.port"</span>, port));
        }
        
        app.run(args);
    }
}

<span class="hljs-comment">// å®¹å™¨åŒ–æ”¯æŒ</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ContainerAwareService</span> {
    
    <span class="hljs-comment">// æ£€æµ‹æ˜¯å¦åœ¨å®¹å™¨ä¸­è¿è¡Œ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isRunningInContainer</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">"/.dockerenv"</span>).exists() || 
               System.getenv(<span class="hljs-string">"KUBERNETES_SERVICE_HOST"</span>) != <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-comment">// è·å–å®¹å™¨ä¿¡æ¯</span>
    <span class="hljs-keyword">public</span> ContainerInfo <span class="hljs-title function_">getContainerInfo</span><span class="hljs-params">()</span> {
        <span class="hljs-type">ContainerInfo</span> <span class="hljs-variable">info</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ContainerInfo</span>();
        info.setContainerId(System.getenv(<span class="hljs-string">"HOSTNAME"</span>));
        info.setPodName(System.getenv(<span class="hljs-string">"POD_NAME"</span>));
        info.setNamespace(System.getenv(<span class="hljs-string">"POD_NAMESPACE"</span>));
        <span class="hljs-keyword">return</span> info;
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-16">6. ä¼ä¸šçº§æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-17">6.1 ä»£ç è§„èŒƒä¸è®¾è®¡æ¨¡å¼</h3>
<p><strong>æœ€ä½³å®è·µç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç­–ç•¥æ¨¡å¼ï¼šæ”¯ä»˜ç­–ç•¥</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">PaymentStrategy</span> {
    PaymentResult <span class="hljs-title function_">pay</span><span class="hljs-params">(PaymentRequest request)</span>;
}

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AlipayStrategy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PaymentStrategy</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> PaymentResult <span class="hljs-title function_">pay</span><span class="hljs-params">(PaymentRequest request)</span> {
        <span class="hljs-comment">// æ”¯ä»˜å®æ”¯ä»˜é€»è¾‘</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PaymentResult</span>(<span class="hljs-literal">true</span>, <span class="hljs-string">"æ”¯ä»˜å®æ”¯ä»˜æˆåŠŸ"</span>);
    }
}

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WechatPayStrategy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PaymentStrategy</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> PaymentResult <span class="hljs-title function_">pay</span><span class="hljs-params">(PaymentRequest request)</span> {
        <span class="hljs-comment">// å¾®ä¿¡æ”¯ä»˜é€»è¾‘</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PaymentResult</span>(<span class="hljs-literal">true</span>, <span class="hljs-string">"å¾®ä¿¡æ”¯ä»˜æˆåŠŸ"</span>);
    }
}

<span class="hljs-comment">// ç­–ç•¥å·¥å‚</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentStrategyFactory</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;PaymentType, PaymentStrategy&gt; strategies;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">PaymentStrategyFactory</span><span class="hljs-params">(List&lt;PaymentStrategy&gt; strategyList)</span> {
        <span class="hljs-built_in">this</span>.strategies = strategyList.stream()
            .collect(Collectors.toMap(
                <span class="hljs-built_in">this</span>::getPaymentType,
                strategy -&gt; strategy
            ));
    }
    
    <span class="hljs-keyword">public</span> PaymentStrategy <span class="hljs-title function_">getStrategy</span><span class="hljs-params">(PaymentType type)</span> {
        <span class="hljs-type">PaymentStrategy</span> <span class="hljs-variable">strategy</span> <span class="hljs-operator">=</span> strategies.get(type);
        <span class="hljs-keyword">if</span> (strategy == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"ä¸æ”¯æŒçš„æ”¯ä»˜æ–¹å¼: "</span> + type);
        }
        <span class="hljs-keyword">return</span> strategy;
    }
    
    <span class="hljs-keyword">private</span> PaymentType <span class="hljs-title function_">getPaymentType</span><span class="hljs-params">(PaymentStrategy strategy)</span> {
        <span class="hljs-keyword">if</span> (strategy <span class="hljs-keyword">instanceof</span> AlipayStrategy) {
            <span class="hljs-keyword">return</span> PaymentType.ALIPAY;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (strategy <span class="hljs-keyword">instanceof</span> WechatPayStrategy) {
            <span class="hljs-keyword">return</span> PaymentType.WECHAT;
        }
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"æœªçŸ¥çš„æ”¯ä»˜ç­–ç•¥"</span>);
    }
}

<span class="hljs-comment">// å»ºé€ è€…æ¨¡å¼ï¼šå¤æ‚å¯¹è±¡æ„å»º</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderRequest</span> {
    <span class="hljs-keyword">private</span> Long userId;
    <span class="hljs-keyword">private</span> List&lt;OrderItem&gt; items;
    <span class="hljs-keyword">private</span> Address shippingAddress;
    <span class="hljs-keyword">private</span> PaymentMethod paymentMethod;
    <span class="hljs-keyword">private</span> String remark;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderRequestBuilder</span> {
        <span class="hljs-keyword">public</span> OrderRequestBuilder <span class="hljs-title function_">validate</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">if</span> (userId == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"ç”¨æˆ·IDä¸èƒ½ä¸ºç©º"</span>);
            }
            <span class="hljs-keyword">if</span> (items == <span class="hljs-literal">null</span> || items.isEmpty()) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"è®¢å•é¡¹ä¸èƒ½ä¸ºç©º"</span>);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
        }
    }
}

<span class="hljs-comment">// è§‚å¯Ÿè€…æ¨¡å¼ï¼šäº‹ä»¶é€šçŸ¥</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderEventNotifier</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;OrderEventListener&gt; listeners = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CopyOnWriteArrayList</span>&lt;&gt;();
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addListener</span><span class="hljs-params">(OrderEventListener listener)</span> {
        listeners.add(listener);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">notifyOrderCreated</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-type">OrderEvent</span> <span class="hljs-variable">event</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderCreatedEvent</span>(order);
        listeners.forEach(listener -&gt; {
            <span class="hljs-keyword">try</span> {
                listener.onOrderCreated(event);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                log.error(<span class="hljs-string">"äº‹ä»¶ç›‘å¬å™¨å¤„ç†å¤±è´¥"</span>, e);
            }
        });
    }
}
</code></pre>
<h3 data-id="heading-18">6.2 æ€§èƒ½ä¼˜åŒ–å®è·µ</h3>
<p><strong>æ€§èƒ½ä¼˜åŒ–ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ‰¹é‡æ“ä½œä¼˜åŒ–</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BatchOperationService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserRepository userRepository;
    
    <span class="hljs-comment">// æ‰¹é‡æ’å…¥ä¼˜åŒ–</span>
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">batchInsertUsers</span><span class="hljs-params">(List&lt;User&gt; users)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">batchSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; users.size(); i += batchSize) {
            List&lt;User&gt; batch = users.subList(i, Math.min(i + batchSize, users.size()));
            userRepository.saveAll(batch);
            userRepository.flush(); <span class="hljs-comment">// å¼ºåˆ¶åˆ·æ–°åˆ°æ•°æ®åº“</span>
        }
    }
    
    <span class="hljs-comment">// å¼‚æ­¥æ‰¹é‡å¤„ç†</span>
    <span class="hljs-meta">@Async</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;Void&gt; <span class="hljs-title function_">batchProcessAsync</span><span class="hljs-params">(List&lt;Order&gt; orders)</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.runAsync(() -&gt; {
            orders.parallelStream().forEach(<span class="hljs-built_in">this</span>::processOrder);
        });
    }
}

<span class="hljs-comment">// è¿æ¥æ± ä¼˜åŒ–</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">dataSource</span><span class="hljs-params">()</span> {
        <span class="hljs-type">HikariConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HikariConfig</span>();
        config.setJdbcUrl(<span class="hljs-string">"jdbc:mysql://localhost:3306/db"</span>);
        config.setUsername(<span class="hljs-string">"root"</span>);
        config.setPassword(<span class="hljs-string">"password"</span>);
        
        <span class="hljs-comment">// è¿æ¥æ± ä¼˜åŒ–é…ç½®</span>
        config.setMaximumPoolSize(<span class="hljs-number">20</span>); <span class="hljs-comment">// æœ€å¤§è¿æ¥æ•°</span>
        config.setMinimumIdle(<span class="hljs-number">5</span>); <span class="hljs-comment">// æœ€å°ç©ºé—²è¿æ¥</span>
        config.setConnectionTimeout(<span class="hljs-number">30000</span>); <span class="hljs-comment">// è¿æ¥è¶…æ—¶</span>
        config.setIdleTimeout(<span class="hljs-number">600000</span>); <span class="hljs-comment">// ç©ºé—²è¶…æ—¶</span>
        config.setMaxLifetime(<span class="hljs-number">1800000</span>); <span class="hljs-comment">// æœ€å¤§ç”Ÿå‘½å‘¨æœŸ</span>
        config.setLeakDetectionThreshold(<span class="hljs-number">60000</span>); <span class="hljs-comment">// æ³„æ¼æ£€æµ‹</span>
        
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HikariDataSource</span>(config);
    }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python 3.12 æ–°ç‰¹æ€§å®æˆ˜ï¼š10ä¸ªè®©ä½ ä»£ç æ›´ä¼˜é›…çš„éšè—æŠ€å·§]]></title>    <link>https://juejin.cn/post/7572028313930743848</link>    <guid>https://juejin.cn/post/7572028313930743848</guid>    <pubDate>2025-11-14T00:17:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572028313930743848" data-draft-id="7572010680897290280" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python 3.12 æ–°ç‰¹æ€§å®æˆ˜ï¼š10ä¸ªè®©ä½ ä»£ç æ›´ä¼˜é›…çš„éšè—æŠ€å·§"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-14T00:17:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="IT_é™ˆå¯’"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python 3.12 æ–°ç‰¹æ€§å®æˆ˜ï¼š10ä¸ªè®©ä½ ä»£ç æ›´ä¼˜é›…çš„éšè—æŠ€å·§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    IT_é™ˆå¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T00:17:21.000Z" title="Fri Nov 14 2025 00:17:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    15
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Python 3.12 æ–°ç‰¹æ€§å®æˆ˜ï¼š10ä¸ªè®©ä½ ä»£ç æ›´ä¼˜é›…çš„éšè—æŠ€å·§</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Python 3.12ä½œä¸ºPythonè¯­è¨€çš„æœ€æ–°ç¨³å®šç‰ˆæœ¬ï¼Œå¸¦æ¥äº†è®¸å¤šä»¤äººå…´å¥‹çš„æ–°ç‰¹æ€§å’Œæ”¹è¿›ã€‚å°½ç®¡ä¸€äº›å˜åŒ–ï¼ˆå¦‚æ€§èƒ½ä¼˜åŒ–å’Œç±»å‹ç³»ç»Ÿå¢å¼ºï¼‰å·²ç»è¢«å¹¿æ³›è®¨è®ºï¼Œä½†è¿˜æœ‰ä¸€äº›éšè—çš„æŠ€å·§å’ŒåŠŸèƒ½å°šæœªè¢«å……åˆ†å‘æ˜ã€‚è¿™äº›ç‰¹æ€§ä¸ä»…èƒ½è®©ä½ çš„ä»£ç æ›´åŠ ç®€æ´é«˜æ•ˆï¼Œè¿˜èƒ½æå‡å¼€å‘ä½“éªŒã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨Python 3.12ä¸­10ä¸ªé²œä¸ºäººçŸ¥ä½†æå…¶å®ç”¨çš„ç‰¹æ€§ï¼Œå¹¶é€šè¿‡å®é™…ä»£ç ç¤ºä¾‹å±•ç¤ºå¦‚ä½•å°†å®ƒä»¬åº”ç”¨åˆ°ä½ çš„é¡¹ç›®ä¸­ã€‚æ— è®ºä½ æ˜¯æ•°æ®ç§‘å­¦å®¶ã€Webå¼€å‘è€…è¿˜æ˜¯è‡ªåŠ¨åŒ–è„šæœ¬ç¼–å†™è€…ï¼Œè¿™äº›æŠ€å·§éƒ½èƒ½å¸®åŠ©ä½ å†™å‡ºæ›´ä¼˜é›…çš„Pythonä»£ç ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸»ä½“å†…å®¹</h2>
<h3 data-id="heading-3">1. æ›´çµæ´»çš„f-stringè¡¨è¾¾å¼</h3>
<p>Python 3.12è¿›ä¸€æ­¥æ‰©å±•äº†f-stringçš„åŠŸèƒ½ï¼Œå…è®¸åœ¨è¡¨è¾¾å¼éƒ¨åˆ†ä½¿ç”¨æ›´å¤šè¯­æ³•ç»“æ„ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Python 3.12ä¹‹å‰ä¼šæŠ¥é”™</span>
value = <span class="hljs-string">"hello"</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{value.upper() <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(value) &gt; <span class="hljs-number">3</span> <span class="hljs-keyword">else</span> value.lower()}</span>"</span>)

<span class="hljs-comment"># Python 3.12æ–°å¢æ”¯æŒå¤šè¡Œè¡¨è¾¾å¼å’Œæ³¨é‡Š</span>
name = <span class="hljs-string">"Alice"</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Welcome, <span class="hljs-subst">{
    name.upper() 
    # This comment <span class="hljs-keyword">is</span> now valid
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(name) &gt; <span class="hljs-number">5</span> 
    <span class="hljs-keyword">else</span> name.lower()
}</span>"</span>)
</code></pre>
<p>è¿™é¡¹æ”¹è¿›ä½¿å¾—f-stringèƒ½å¤Ÿå¤„ç†æ›´å¤æ‚çš„é€»è¾‘ï¼ŒåŒæ—¶ä¿æŒä»£ç å¯è¯»æ€§ã€‚</p>
<h3 data-id="heading-4">2. TypedDictçš„æ”¹è¿›ä¸<code>Required</code>/<code>NotRequired</code></h3>
<p>ç±»å‹æ³¨è§£ç³»ç»Ÿè¿æ¥é‡è¦æ›´æ–°ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> TypedDict, Required, NotRequired

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>(<span class="hljs-title class_ inherited__">TypedDict</span>):
    name: Required[<span class="hljs-built_in">str</span>]
    age: NotRequired[<span class="hljs-built_in">int</span>]

<span class="hljs-comment"># Python 3.12è¿˜æ”¯æŒä»»æ„é”®åçš„TypedDict</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Config</span>(TypedDict, total=<span class="hljs-literal">False</span>):
    __extra_items__: <span class="hljs-built_in">str</span> | <span class="hljs-built_in">int</span>
</code></pre>
<p>è¿™äº›æ”¹è¿›è®©ç±»å‹ç³»ç»Ÿèƒ½æ›´å¥½åœ°æè¿°ç°å®ä¸–ç•Œçš„æ•°æ®ç»“æ„ã€‚</p>
<h3 data-id="heading-5">3. <code>@override</code>è£…é¥°å™¨çš„å¼•å…¥</h3>
<p>æ–°çš„è£…é¥°å™¨å¸®åŠ©æ•è·å­ç±»æ–¹æ³•é‡å†™æ—¶çš„é”™è¯¯ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> override

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Parent</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">method</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">int</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Child</span>(<span class="hljs-title class_ inherited__">Parent</span>):
<span class="hljs-meta">    @override</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">method</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">int</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>().method() * <span class="hljs-number">2</span>
    
    <span class="hljs-comment"># @overrideä¼šæ£€æµ‹åˆ°è¿™ä¸ªæ‹¼å†™é”™è¯¯</span>
    <span class="hljs-comment"># def methid(self): pass  </span>
</code></pre>
<p>è¿™åœ¨å¤§å‹é¡¹ç›®ä¸­èƒ½æœ‰æ•ˆé˜²æ­¢å› æ–¹æ³•åæ‹¼å†™é”™è¯¯å¯¼è‡´çš„bugã€‚</p>
<h3 data-id="heading-6">4. Bufferåè®®çš„é‡å¤§æ”¹è¿›</h3>
<p>å¯¹äºé«˜æ€§èƒ½æ•°å€¼è®¡ç®—å’Œæ•°æ®å¤„ç†çš„é‡å¤§æå‡ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_buffer</span>(<span class="hljs-params">buf: <span class="hljs-built_in">memoryview</span></span>) -&gt; <span class="hljs-literal">None</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Processing buffer with shape <span class="hljs-subst">{buf.shape}</span>"</span>)

arr = np.array([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>], dtype=np.int32)
process_buffer(<span class="hljs-built_in">memoryview</span>(arr))
</code></pre>
<p>æ–°çš„ç¼“å†²åè®®æ”¯æŒå¤šç»´æ•°ç»„å’Œæ›´å¤šæ•°æ®ç±»å‹ã€‚</p>
<h3 data-id="heading-7">5. <code>ExceptionGroup</code>å’Œ<code>except*</code>çš„å®é™…åº”ç”¨</h3>
<p>æ›´å¥½çš„å¼‚å¸¸å¤„ç†æ–¹å¼ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">try</span>:
    <span class="hljs-keyword">raise</span> ExceptionGroup(
        <span class="hljs-string">"Multiple errors"</span>,
        [ValueError(<span class="hljs-string">"bad value"</span>), TypeError(<span class="hljs-string">"wrong type"</span>)]
    )
<span class="hljs-keyword">except</span>* ValueError <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Caught ValueErrors: <span class="hljs-subst">{e.exceptions}</span>"</span>)
<span class="hljs-keyword">except</span>* TypeError:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Caught TypeErrors"</span>)
</code></pre>
<p>è¿™å¯¹äºå¹¶å‘ç¼–ç¨‹å’Œå¤æ‚ç³»ç»Ÿä¸­çš„é”™è¯¯å¤„ç†ç‰¹åˆ«æœ‰ç”¨ã€‚</p>
<h3 data-id="heading-8">6. Unpackingæ³›å‹ç±»å‹çš„å¢å¼ºæ”¯æŒ</h3>
<p>ç±»å‹ç³»ç»Ÿä¸­æ›´å¥½çš„è§£åŒ…æ”¯æŒï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> Unpack, TypedDict

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Point</span>(<span class="hljs-title class_ inherited__">TypedDict</span>):
    x: <span class="hljs-built_in">float</span>
    y: <span class="hljs-built_in">float</span>
    
<span class="hljs-keyword">def</span> <span class="hljs-title function_">draw_point</span>(<span class="hljs-params">**kwargs: Unpack[Point]</span>) -&gt; <span class="hljs-literal">None</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Drawing at (<span class="hljs-subst">{kwargs[<span class="hljs-string">'x'</span>]}</span>, <span class="hljs-subst">{kwargs[<span class="hljs-string">'y'</span>]}</span>)"</span>)
    
draw_point(x=<span class="hljs-number">1.0</span>, y=<span class="hljs-number">2.0</span>)
</code></pre>
<p>è¿™ä½¿å¾—ç±»å‹æ£€æŸ¥å™¨èƒ½æ›´å¥½åœ°ç†è§£å¯å˜å…³é”®å­—å‚æ•°çš„ç»“æ„ã€‚</p>
<h3 data-id="heading-9">7. <code>asyncio.TaskGroup</code>æ›¿ä»£æ—§ç‰ˆAPI</h3>
<p>æ›´ç°ä»£çš„å¼‚æ­¥ç¼–ç¨‹æ–¹å¼ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> asyncio

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">worker</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">1</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"Result from <span class="hljs-subst">{name}</span>"</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> asyncio.TaskGroup() <span class="hljs-keyword">as</span> tg:
        task1 = tg.create_task(worker(<span class="hljs-string">"task1"</span>))
        task2 = tg.create_task(worker(<span class="hljs-string">"task2"</span>))
    
    <span class="hljs-built_in">print</span>(task1.result(), task2.result())

asyncio.run(main())
</code></pre>
<p>TaskGroupæä¾›äº†æ¯”gatheræ›´å®‰å…¨çš„ä»»åŠ¡ç®¡ç†æ–¹å¼ã€‚</p>
<h3 data-id="heading-10">8. <code>sys.excepthook</code>çº¿ç¨‹å®‰å…¨æ€§çš„æ”¹å–„</h3>
<p>åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­æ›´å¯é çš„å¼‚å¸¸å¤„ç†ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> sys, threading

<span class="hljs-keyword">def</span> <span class="hljs-title function_">custom_hook</span>(<span class="hljs-params">exc_type, exc_value, exc_traceback</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Caught <span class="hljs-subst">{exc_type.__name__}</span>: <span class="hljs-subst">{exc_value}</span>"</span>)

sys.excepthook = custom_hook

<span class="hljs-keyword">def</span> <span class="hljs-title function_">worker</span>():
    <span class="hljs-number">1</span>/<span class="hljs-number">0</span>
    
threading.Thread(target=worker).start()
</code></pre>
<p>ç°åœ¨å¯ä»¥ç¡®ä¿è‡ªå®šä¹‰å¼‚å¸¸é’©å­åœ¨æ‰€æœ‰çº¿ç¨‹ä¸­éƒ½ç”Ÿæ•ˆã€‚</p>
<h3 data-id="heading-11">9. <code>dataclass_transform</code>è£…é¥°å™¨çš„å¨åŠ›</h3>
<p>åˆ›å»ºè‡ªå®šä¹‰æ•°æ®ç±»è£…é¥°å™¨å˜å¾—æ›´å®¹æ˜“ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> dataclass_transform, <span class="hljs-type">Any</span> 

<span class="hljs-meta">@dataclass_transform()</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_model</span>(<span class="hljs-params">cls: <span class="hljs-built_in">type</span>[<span class="hljs-type">Any</span>]</span>) -&gt; <span class="hljs-built_in">type</span>[<span class="hljs-type">Any</span>]:
   <span class="hljs-comment"># ...å®ç°è‡ªå®šä¹‰é€»è¾‘...</span>
   <span class="hljs-keyword">return</span> cls 

<span class="hljs-meta">@create_model </span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Point</span>:
   x: <span class="hljs-built_in">float</span> 
   y: <span class="hljs-built_in">float</span> 

p = Point(x=<span class="hljs-number">1</span>, y=<span class="hljs-number">2</span>)  
<span class="hljs-built_in">print</span>(p.x)  
</code></pre>
<p>è¿™å¯¹äºæ¡†æ¶å¼€å‘è€…ç‰¹åˆ«æœ‰ä»·å€¼ã€‚</p>
<h3 data-id="heading-12">10. GILä¼˜åŒ–çš„å®é™…å½±å“ï¼ˆè™½ç„¶ä¸å®Œå…¨éšè—ï¼‰</h3>
<p>è™½ç„¶GILä¼˜åŒ–ä¸æ˜¯éšè—ç‰¹æ€§ï¼Œä½†å®ƒçš„å®é™…å½±å“å€¼å¾—å…³æ³¨ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> concurrent.futures 
<span class="hljs-keyword">import</span> time 

<span class="hljs-keyword">def</span> <span class="hljs-title function_">compute</span>(<span class="hljs-params">n</span>):
   <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span>(i*i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n))

start = time.perf_counter()
<span class="hljs-keyword">with</span> concurrent.futures.ThreadPoolExecutor() <span class="hljs-keyword">as</span> executor:
   results = <span class="hljs-built_in">list</span>(executor.<span class="hljs-built_in">map</span>(compute, [<span class="hljs-number">10_000_000</span>]*<span class="hljs-number">8</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Time taken: <span class="hljs-subst">{time.perf_counter()-start:<span class="hljs-number">.2</span>f}</span>s"</span>)
</code></pre>
<p>åœ¨I/Oå¯†é›†å‹ä»»åŠ¡ä¸­å¯èƒ½çœ‹åˆ°æ˜¾è‘—çš„æ€§èƒ½æå‡ï¼ˆå…·ä½“å–å†³äºå·¥ä½œè´Ÿè½½ï¼‰ã€‚</p>
<hr/>
<h2 data-id="heading-13">Pythonå†…éƒ¨æœºåˆ¶çš„å®ç”¨æŠ€å·§ï¼ˆå¥–åŠ±å†…å®¹ï¼‰</h2>
<p>é™¤äº†è¯­è¨€ç‰¹æ€§çš„æ›´æ–°å¤–ï¼Œäº†è§£ä¸€äº›å†…éƒ¨æœºåˆ¶ä¹Ÿèƒ½è®©ä½ çš„ä»£ç æ›´é«˜æ•ˆï¼š</p>
<ul>
<li><strong>æ¨¡å—åŠ è½½åŠ é€Ÿ</strong>ï¼šåˆ©ç”¨PYTHONPYCACHEPREFIXé›†ä¸­ç¼“å­˜å­—èŠ‚ç æ–‡ä»¶åŠ å¿«å¯¼å…¥é€Ÿåº¦ã€‚</li>
<li><strong>å†…å­˜è§†å›¾å…±äº«</strong>ï¼šä½¿ç”¨memoryviewåœ¨ä¸åŒæ•°æ®ç»“æ„é—´å…±äº«å†…å­˜è€Œä¸å¤åˆ¶æ•°æ®ã€‚</li>
<li><strong>å­—å…¸æ’å…¥é¡ºåºä¿è¯</strong>ï¼šä¾èµ–dictä¿æŒæ’å…¥é¡ºåºçš„ç‰¹æ€§ç®€åŒ–æŸäº›ç®—æ³•å®ç°ã€‚</li>
<li><strong>è§£é‡Šå™¨å¯åŠ¨ä¼˜åŒ–</strong>ï¼šé€šè¿‡PYTHONNODEBUGRANGESç¦ç”¨è°ƒè¯•ä¿¡æ¯æé«˜å¯åŠ¨é€Ÿåº¦ã€‚</li>
<li><strong>å­—èŠ‚ç å†…è”ç¼“å­˜</strong>ï¼šäº†è§£å¦‚ä½•ç¼–å†™åˆ©äºJITä¼˜åŒ–çš„æ¨¡å¼åŒ¹é…è¯­å¥ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-14">APIå…¼å®¹æ€§æ³¨æ„äº‹é¡¹ä¸è¿ç§»ç­–ç•¥</h2>
<p>å‡çº§åˆ°Python3.12æ—¶éœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li>datetimeæ¨¡å—UTCç›¸å…³è¡Œä¸ºçš„å˜æ›´å¯èƒ½å½±å“æ—¶é—´æ•æ„Ÿåº”ç”¨ã€‚</li>
<li>Deprecatedçš„distutilså·²è¢«å®Œå…¨ç§»é™¤ã€‚</li>
<li>TLSç›¸å…³é»˜è®¤è®¾ç½®çš„å¼ºåŒ–å¯èƒ½å¯¼è‡´æ—§æœåŠ¡å™¨è¿æ¥å¤±è´¥ã€‚</li>
<li>pathlib.Path.glob()æ–¹æ³•ç°åœ¨éµå¾ªå¤§å°å†™æ•æ„Ÿæ€§è§„åˆ™çš„ä¸€è‡´æ€§æ›´å¥½ã€‚</li>
</ul>
<p>å»ºè®®è¿ç§»æ­¥éª¤ï¼š</p>
<ol>
<li><code>pip install pyupgrade</code></li>
<li><code>pyupgrade --py312-plus your_code.py</code></li>
<li><code>mypy --strict</code></li>
<li><code>pytest -xvs your_tests/</code></li>
</ol>
<hr/>
<h2 data-id="heading-15">æ€»ç»“ä¸å±•æœ›æ€è€ƒé¢˜ä¸å®è·µå»ºè®®æ¢ç´¢æ›´å¤šå¯èƒ½æ€§æœ€ä½³å®è·µåˆ†äº«ç¤¾åŒºèµ„æºæ¨èè¿›é˜¶å­¦ä¹ è·¯å¾„ç»“è¯­</h2></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»£ç éš”ç¦»é©å‘½ï¼šç”¨ JavaScript Realm å®‰å…¨è¿è¡Œä¸å¯ä¿¡ä»£ç ]]></title>    <link>https://juejin.cn/post/7572190151351566336</link>    <guid>https://juejin.cn/post/7572190151351566336</guid>    <pubDate>2025-11-14T06:51:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572190151351566336" data-draft-id="7572161976593317940" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»£ç éš”ç¦»é©å‘½ï¼šç”¨ JavaScript Realm å®‰å…¨è¿è¡Œä¸å¯ä¿¡ä»£ç "/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-14T06:51:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§çŸ¥é—²é—²i"/> <meta itemprop="url" content="https://juejin.cn/user/3799545205237111"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»£ç éš”ç¦»é©å‘½ï¼šç”¨ JavaScript Realm å®‰å…¨è¿è¡Œä¸å¯ä¿¡ä»£ç 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3799545205237111/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§çŸ¥é—²é—²i
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T06:51:12.000Z" title="Fri Nov 14 2025 06:51:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    33
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¤šå¹´çš„å¼€å‘ç”Ÿæ¶¯ä¸­ï¼Œæˆ‘å¸¦é¢†å›¢é˜Ÿäº¤ä»˜äº†æ— æ•°ä¸­ç­‰è§„æ¨¡çš„å¤–åŒ…é¡¹ç›®ï¼Œé‡åˆ°è¿‡å„ç§æ£˜æ‰‹çš„æŠ€æœ¯æŒ‘æˆ˜ã€‚ä½†æœ€è¿‘åœ¨è°ƒè¯•ä¸€ä¸ªå¤æ‚çš„å¤š iframe åº”ç”¨æ—¶ï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªè¢«å¤§å¤šæ•°å¼€å‘è€…å¿½ç•¥çš„ JavaScript ç‰¹æ€§ï¼Œå®ƒå½»åº•æ”¹å˜äº†æˆ‘å¯¹ä»£ç å®‰å…¨æ€§çš„è®¤çŸ¥ã€‚</p>
<p>======================================================================================================================</p>
<h2 data-id="heading-0">ä»ä¸€æ¬¡ç”Ÿäº§äº‹æ•…è¯´èµ·</h2>
<p>æƒ³è±¡è¿™ä¸ªåœºæ™¯ï¼šä½ ä¸ºå®¢æˆ·çš„xxå¹³å°å¼€å‘äº†ä¸€ä¸ªæ’ä»¶ç³»ç»Ÿï¼Œå…è®¸å•†å®¶ç¼–å†™è‡ªå®šä¹‰ JavaScript æ¥å¢å¼ºåº—é“ºåŠŸèƒ½ã€‚ä¸€åˆ‡éƒ½å¾ˆç¾å¥½ï¼Œç›´åˆ°æŸä¸ªå•†å®¶å†™äº†è¿™æ ·çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æŸä¸ª"åˆ›æ–°"å•†å®¶çš„æ’ä»¶ä»£ç </span>
<span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">push</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å“ˆå“ˆï¼Œæˆ‘é‡å†™äº†æ•°ç»„æ–¹æ³•ï¼"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-string">"æç ´åäº†"</span>;
};
</code></pre>
<p>ç»“æœå¦‚ä½•ï¼Ÿæ•´ä¸ªxxå¹³å°çš„è´­ç‰©è½¦ã€å•†å“åˆ—è¡¨ã€è®¢å•ç³»ç»Ÿå…¨çº¿å´©æºƒã€‚è¿™å°±æ˜¯å…¸å‹çš„å…¨å±€æ±¡æŸ“é—®é¢˜â€”â€”å½“ä¸å¯ä¿¡ä»£ç ä¸æ ¸å¿ƒä¸šåŠ¡å…±äº«åŒä¸€ä¸ªæ‰§è¡Œç¯å¢ƒæ—¶ï¼Œç¾éš¾éšæ—¶å¯èƒ½å‘ç”Ÿã€‚</p>
<h2 data-id="heading-1">Realmï¼šJavaScript çš„éš”ç¦»è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯ Realmï¼Ÿ</h3>
<p>Realm æ˜¯ JavaScript çš„éš”ç¦»æ‰§è¡Œç¯å¢ƒï¼Œå¯ä»¥ç†è§£ä¸º"ä¸€å¥—å…¨æ–°çš„ JavaScript å®‡å®™"ã€‚æ¯ä¸ª Realm éƒ½æ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„å†…ç½®å¯¹è±¡å’Œå…¨å±€ä½œç”¨åŸŸã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸»ç¯å¢ƒ</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Array</span>); <span class="hljs-comment">// [Function: Array]</span>

<span class="hljs-comment">// åˆ›å»º iframeï¼ˆè‡ªåŠ¨ç”Ÿæˆæ–° Realmï¼‰</span>
<span class="hljs-keyword">const</span> iframe = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'iframe'</span>);
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(iframe);

<span class="hljs-comment">// iframe ä¸­çš„ Array æ˜¯å…¨æ–°çš„æ„é€ å™¨</span>
<span class="hljs-keyword">const</span> iframeArray = iframe.<span class="hljs-property">contentWindow</span>.<span class="hljs-property">Array</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Array</span> === iframeArray); <span class="hljs-comment">// falseï¼</span>
</code></pre>
<p>çœ‹åˆ°è¿™ä¸ªç»“æœæ—¶ï¼Œæˆ‘å›¢é˜Ÿçš„å°ä¼™ä¼´ä»¬éƒ½æƒŠå‘†äº†ã€‚ä¸¤ä¸ª Array æ„é€ å™¨åŠŸèƒ½å®Œå…¨ç›¸åŒï¼Œä½†å´æ˜¯å®Œå…¨ç‹¬ç«‹çš„å¯¹è±¡ï¼Œè¿™å°±æ˜¯ Realm çš„å¼ºå¤§ä¹‹å¤„ã€‚</p>
<h3 data-id="heading-3">Realm çš„ç»„æˆè¦ç´ </h3>
<p>æ¯ä¸ª Realm éƒ½åŒ…å«å®Œæ•´çš„è¿è¡Œç¯å¢ƒï¼š</p>
<ul>
<li>
<p><strong>å…¨å±€å¯¹è±¡</strong>ï¼šæµè§ˆå™¨ä¸­çš„ window æˆ– Node.js ä¸­çš„ global</p>
</li>
<li>
<p><strong>å†…ç½®æ„é€ å™¨</strong>ï¼šArrayã€Objectã€Functionã€Error ç­‰</p>
</li>
<li>
<p><strong>å·¥å…·å‡½æ•°</strong>ï¼šsetTimeoutã€fetchã€JSON ç­‰</p>
</li>
<li>
<p><strong>åŸå‹å¯¹è±¡</strong>ï¼šArray.prototypeã€Object.prototype ç­‰åŸºç¡€åŸå‹</p>
</li>
</ul>
<h2 data-id="heading-4">å®æˆ˜ï¼šä¸‰ç§ Realm å®ç°æ–¹æ¡ˆ</h2>
<h3 data-id="heading-5">æ–¹æ¡ˆä¸€ï¼šShadowRealmï¼ˆæœªæ¥æ ‡å‡†ï¼‰</h3>
<p>ShadowRealm æ˜¯ TC39 æ ‡å‡†ææ¡ˆï¼ˆStage 3ï¼‰ï¼Œä¸“ä¸ºä»£ç éš”ç¦»è®¾è®¡ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// åˆ›å»ºéš”ç¦»ç¯å¢ƒ</span>
<span class="hljs-type">const</span> realm = <span class="hljs-keyword">new</span> <span class="hljs-built_in">ShadowRealm</span>();

<span class="hljs-comment">// å®‰å…¨æ‰§è¡Œä¸å¯ä¿¡ä»£ç </span>
<span class="hljs-type">const</span> result = realm.<span class="hljs-built_in">evaluate</span>(`
    <span class="hljs-comment">// è¿™é‡Œæ— æ³•è®¿é—®ä¸»ç¯å¢ƒçš„ä»»ä½•å˜é‡</span>
    <span class="hljs-type">const</span> sensitiveData = <span class="hljs-string">"è¿™æ®µæ•°æ®å¾ˆå®‰å…¨"</span>;
    <span class="hljs-number">2</span> + <span class="hljs-number">2</span>
`);

console.<span class="hljs-built_in">log</span>(result); <span class="hljs-comment">// 4</span>
console.<span class="hljs-built_in">log</span>(typeof sensitiveData); <span class="hljs-comment">// undefinedï¼ˆå®Œå…¨éš”ç¦»ï¼‰</span>
</code></pre>
<p>å½“å‰å¯ç”¨ polyfillï¼š</p>
<pre><code class="hljs language-ini" lang="ini">npm install shadowrealm-api

import ShadowRealm from 'shadowrealm-api'<span class="hljs-comment">;</span>

const <span class="hljs-attr">realm</span> = new ShadowRealm()<span class="hljs-comment">;</span>
const <span class="hljs-attr">userCodeResult</span> = realm.evaluate(userSuppliedCode)<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-6">æ–¹æ¡ˆäºŒï¼šiframe æ²™ç®±ï¼ˆç”Ÿäº§ç¯å¢ƒé¦–é€‰ï¼‰</h3>
<p>å¯¹äºéœ€è¦ç«‹å³ä¸Šçº¿çš„é¡¹ç›®ï¼Œiframe æ˜¯æœ€å¯é çš„è§£å†³æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-ini" lang="ini">function createSafeSandbox() {
    const <span class="hljs-attr">frame</span> = document.createElement(<span class="hljs-string">'iframe'</span>)<span class="hljs-comment">;</span>
    
    // å…³é”®é…ç½®ï¼šé™åˆ¶æƒé™
    <span class="hljs-attr">frame.sandbox</span> = [
        <span class="hljs-string">'allow-scripts'</span>,     // å…è®¸æ‰§è¡Œè„šæœ¬
        // <span class="hljs-string">'allow-same-origin'</span> // è°¨æ…ä½¿ç”¨ï¼šå…è®¸åŒæºè®¿é—®
    ].join(<span class="hljs-string">' '</span>)<span class="hljs-comment">;</span>
    
    <span class="hljs-attr">frame.style.display</span> = <span class="hljs-string">'none'</span><span class="hljs-comment">;</span>
    document.body.appendChild(frame)<span class="hljs-comment">;</span>
    
    return {
        evaluate: (code) =&gt; frame.contentWindow.eval(code),
        destroy: () =&gt; frame.remove()
    }<span class="hljs-comment">;</span>
}

// ä½¿ç”¨ç¤ºä¾‹
const <span class="hljs-attr">sandbox</span> = createSafeSandbox()<span class="hljs-comment">;</span>
try {
    const <span class="hljs-attr">result</span> = sandbox.evaluate(<span class="hljs-string">'2 + 2'</span>)<span class="hljs-comment">;</span>
    console.log('å®‰å…¨è®¡ç®—ç»“æœ:', result)<span class="hljs-comment">;</span>
} finally {
    sandbox.destroy()<span class="hljs-comment">;</span>
}
</code></pre>
<h3 data-id="heading-7">æ–¹æ¡ˆä¸‰ï¼šWeb Workerï¼ˆçº¯è®¡ç®—åœºæ™¯ï¼‰</h3>
<p>å¯¹äº CPU å¯†é›†å‹ä»»åŠ¡ï¼ŒWeb Worker æä¾›è‰¯å¥½çš„éš”ç¦»æ€§ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// åˆ›å»ºéš”ç¦»çš„å·¥ä½œçº¿ç¨‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">workerCode</span> = `
    <span class="hljs-built_in">self</span>.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">result</span> = <span class="hljs-keyword">eval</span>(e.data.code);
            <span class="hljs-built_in">self</span>.<span class="hljs-title function_ invoke__">postMessage</span>({ <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>, result });
        } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-built_in">self</span>.<span class="hljs-title function_ invoke__">postMessage</span>({ <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">error</span>: error.message });
        }
    };
`;

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">blob</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([workerCode], { type: <span class="hljs-string">'application/javascript'</span> });
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">worker</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(URL.<span class="hljs-title function_ invoke__">createObjectURL</span>(blob));

worker.onmessage = (e) =&gt; {
    <span class="hljs-keyword">if</span> (e.data.success) {
        console.<span class="hljs-title function_ invoke__">log</span>(<span class="hljs-string">'Worker è®¡ç®—ç»“æœ:'</span>, e.data.result);
    } <span class="hljs-keyword">else</span> {
        console.<span class="hljs-title function_ invoke__">error</span>(<span class="hljs-string">'æ‰§è¡Œå‡ºé”™:'</span>, e.data.error);
    }
};

<span class="hljs-comment">// æ‰§è¡Œç”¨æˆ·ä»£ç </span>
worker.<span class="hljs-title function_ invoke__">postMessage</span>({
    <span class="hljs-attr">code</span>: <span class="hljs-string">'Math.pow(2, 10)'</span> // ç”¨æˆ·æä¾›çš„ä»£ç 
});
</code></pre>
<h2 data-id="heading-8">çœŸå®æ¡ˆä¾‹ï¼šæ’ä»¶ç³»ç»Ÿå®‰å…¨æ”¹é€ </h2>
<p>æˆ‘ä»¬æœ€è¿‘ä¸ºä¸€å®¶é‡‘èç§‘æŠ€å®¢æˆ·é‡æ„äº†ä»–ä»¬çš„æŠ¥è¡¨æ’ä»¶ç³»ç»Ÿã€‚æ”¹é€ å‰ï¼Œç¬¬ä¸‰æ–¹æ’ä»¶ç»å¸¸å¯¼è‡´æ•´ä¸ªç³»ç»Ÿå´©æºƒï¼›æ”¹é€ åï¼Œå³ä½¿æ’ä»¶ä»£ç å­˜åœ¨é—®é¢˜ï¼Œä¹Ÿåªä¼šå½±å“è‡ªèº«è¿è¡Œã€‚</p>
<h3 data-id="heading-9">æ”¹é€ å‰çš„é—®é¢˜ä»£ç ï¼š</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è€ç³»ç»Ÿï¼šç›´æ¥æ‰§è¡Œæ’ä»¶ä»£ç </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">runPlugin</span>(<span class="hljs-params">pluginCode</span>) {
    <span class="hljs-comment">// å±é™©ï¼æ’ä»¶å¯ä»¥è®¿é—®å’Œä¿®æ”¹å…¨å±€çŠ¶æ€</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">eval</span>(pluginCode);
}
</code></pre>
<h3 data-id="heading-10">æ”¹é€ åçš„å®‰å…¨æ–¹æ¡ˆï¼š</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">PluginSandbox</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">iframe</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'iframe'</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">iframe</span>.<span class="hljs-property">sandbox</span> = <span class="hljs-string">'allow-scripts'</span>;
        <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">iframe</span>);
    }
    
    <span class="hljs-title function_">runPlugin</span>(<span class="hljs-params">pluginCode, api</span>) {
        <span class="hljs-comment">// é€šè¿‡ postMessage æä¾›æœ‰é™çš„ API</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">iframe</span>.<span class="hljs-property">contentWindow</span>.<span class="hljs-title function_">postMessage</span>({
            <span class="hljs-attr">type</span>: <span class="hljs-string">'EXECUTE'</span>,
            <span class="hljs-attr">code</span>: pluginCode,
            <span class="hljs-attr">api</span>: api
        }, <span class="hljs-string">'*'</span>);
        
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
            <span class="hljs-keyword">const</span> <span class="hljs-title function_">handler</span> = (<span class="hljs-params">event</span>) =&gt; {
                <span class="hljs-keyword">if</span> (event.<span class="hljs-property">data</span>.<span class="hljs-property">type</span> === <span class="hljs-string">'RESULT'</span>) {
                    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'message'</span>, handler);
                    <span class="hljs-title function_">resolve</span>(event.<span class="hljs-property">data</span>.<span class="hljs-property">result</span>);
                }
            };
            <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, handler);
        });
    }
}
</code></pre>
<h2 data-id="heading-11">ä½•æ—¶åº”è¯¥ä½¿ç”¨ Realm æŠ€æœ¯ï¼Ÿ</h2>
<p>æ ¹æ®æˆ‘ä»¬çš„é¡¹ç›®ç»éªŒï¼Œä»¥ä¸‹åœºæ™¯å¼ºçƒˆæ¨èä½¿ç”¨ Realmï¼š</p>
<ol>
<li>
<p><strong>ç”¨æˆ·ä»£ç æ‰§è¡Œ</strong>ï¼šåœ¨çº¿ä»£ç ç¼–è¾‘å™¨ã€æ•™å­¦å¹³å°</p>
</li>
<li>
<p><strong>ç¬¬ä¸‰æ–¹æ’ä»¶</strong>ï¼šCMS ç³»ç»Ÿã€ç”µå•†å¹³å°çš„æ‰©å±•åŠŸèƒ½</p>
</li>
<li>
<p><strong>A/B æµ‹è¯•</strong>ï¼šéš”ç¦»ä¸åŒç‰ˆæœ¬çš„ä»£ç é€»è¾‘</p>
</li>
<li>
<p><strong>å•å…ƒæµ‹è¯•</strong>ï¼šç¡®ä¿æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ç¯å¢ƒçº¯å‡€</p>
</li>
<li>
<p><strong>å¾®å‰ç«¯æ¶æ„</strong>ï¼šéš”ç¦»ä¸åŒå›¢é˜Ÿå¼€å‘çš„å­åº”ç”¨</p>
</li>
</ol>
<h2 data-id="heading-12">å®‰å…¨æœ€ä½³å®è·µ</h2>
<p>åœ¨å¤šä¸ªé‡‘èçº§é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬æ€»ç»“å‡ºè¿™äº›å®‰å…¨å‡†åˆ™ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// å®‰å…¨é…ç½®ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> SAFE_SANDBOX_CONFIG = [
    <span class="hljs-string">'allow-scripts'</span>,        <span class="hljs-comment">// å¿…éœ€ï¼šæ‰§è¡Œè„šæœ¬</span>
    <span class="hljs-comment">// 'allow-forms',       // è°¨æ…ï¼šè¡¨å•æäº¤</span>
    <span class="hljs-comment">// 'allow-popups',      // è°¨æ…ï¼šå¼¹å‡ºçª—å£</span>
    <span class="hljs-comment">// 'allow-same-origin', // å±é™©ï¼šåŒæºè®¿é—®</span>
    <span class="hljs-comment">// 'allow-top-navigation' // å±é™©ï¼šé¡¶çº§å¯¼èˆª</span>
];

<span class="hljs-comment">// æ°¸è¿œéªŒè¯è¾“å…¥</span>
<span class="hljs-function">function <span class="hljs-title">validateCode</span>(<span class="hljs-params">code</span>)</span> {
    <span class="hljs-keyword">const</span> blacklist = [
        <span class="hljs-string">'document.cookie'</span>,
        <span class="hljs-string">'localStorage'</span>,
        <span class="hljs-string">'XMLHttpRequest'</span>,
        <span class="hljs-string">'fetch'</span>,
        <span class="hljs-string">'window.parent'</span>
    ];
    
    <span class="hljs-keyword">return</span> !blacklist.some(<span class="hljs-keyword">unsafe</span> =&gt; code.includes(<span class="hljs-keyword">unsafe</span>));
}
</code></pre>
<h2 data-id="heading-13">æœªæ¥å±•æœ›</h2>
<p>ShadowRealm æ ‡å‡†è½åœ°åï¼ŒJavaScript ä»£ç éš”ç¦»å°†å˜å¾—æ›´åŠ ç®€å•é«˜æ•ˆã€‚æˆ‘ä»¬å›¢é˜Ÿæ­£åœ¨å¯†åˆ‡å…³æ³¨ç›¸å…³è¿›å±•ï¼Œå¹¶å·²åœ¨å‡ ä¸ªå®éªŒæ€§é¡¹ç›®ä¸­å¼€å§‹ä½¿ç”¨ polyfill ç‰ˆæœ¬ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ§  å¯å®šåˆ¶åŒ– AIGCï¼šWeb ç”¨æˆ·ä¸ªæ€§åŒ–æ¨¡å‹è®­ç»ƒçš„æŠ€æœ¯é—¨æ§›æ­£åœ¨å¡Œç¼©ï¼]]></title>    <link>https://juejin.cn/post/7572095192418435099</link>    <guid>https://juejin.cn/post/7572095192418435099</guid>    <pubDate>2025-11-14T01:24:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572095192418435099" data-draft-id="7572301616167600137" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ§  å¯å®šåˆ¶åŒ– AIGCï¼šWeb ç”¨æˆ·ä¸ªæ€§åŒ–æ¨¡å‹è®­ç»ƒçš„æŠ€æœ¯é—¨æ§›æ­£åœ¨å¡Œç¼©ï¼"/> <meta itemprop="keywords" content="Trae,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-14T01:24:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ§  å¯å®šåˆ¶åŒ– AIGCï¼šWeb ç”¨æˆ·ä¸ªæ€§åŒ–æ¨¡å‹è®­ç»ƒçš„æŠ€æœ¯é—¨æ§›æ­£åœ¨å¡Œç¼©ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T01:24:37.000Z" title="Fri Nov 14 2025 01:24:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰è¨€ï¼šå½“AIè½åœ°åˆ°æ¯ä¸ªâ€œæ ‡ç­¾é¡µâ€</h2>
<p>åœ¨è¿‡å»å‡ å¹´ï¼Œäººå·¥æ™ºèƒ½ï¼ˆArtificial Intelligence Generation â€” AIGCï¼‰ä»¿ä½›ä¸€åœºç¡…åŸºæ´ªæ°´ï¼š<br/>
æœåŠ¡å™¨çƒ§ç€ GPUï¼Œç ”ç©¶å‘˜å†™ç€è®ºæ–‡ï¼Œåˆ›ä¸šå…¬å¸å–ç€ APIï¼Œè€Œç”¨æˆ·â€¦â€¦åœ¨çœ‹å›¾ç‰‡åŠ è½½ã€‚</p>
<p>ä½†ç°åœ¨ä¸åŒäº†ã€‚<br/>
éšç€æµè§ˆå™¨åº•å±‚ APIï¼ˆå¦‚ WebGPUï¼‰çš„æˆç†Ÿï¼Œæˆ‘ä»¬ç»ˆäºæœ‰æœºä¼šåœ¨<strong>æµè§ˆå™¨å†…è¿›è¡Œæ¨¡ä»¿ã€å¡‘é€ ã€å®šåˆ¶ä¸è®­ç»ƒ</strong>ã€‚<br/>
æ²¡é”™ï¼Œä½ æ²¡å¬é”™ â€”â€” ğŸ§ã€ŒWeb ç”¨æˆ·ä¹Ÿèƒ½è®­ç»ƒè‡ªå·±çš„ AIGC æ¨¡å‹ã€ã€‚</p>
<p>è¿™ä¸å†æ˜¯äº‘ç«¯é»‘ç®±ï¼Œè€Œæ˜¯ä¸€åœºâ€œ<strong>å»ä¸­å¿ƒåŒ–çš„æ¨¡å‹å®šåˆ¶é©å‘½</strong>â€ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€ä»äº‘ç«¯AIåˆ°ç”¨æˆ·ç«¯AIï¼šèŒƒå¼çš„æ»‘å¡</h2>
<p>ğŸ—ï¸ ä¼ ç»Ÿçš„ AI å·¥ä½œæµï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">Python + CUDA + GPUé›†ç¾¤ + äº‘è®­ç»ƒä»»åŠ¡
<span class="hljs-code">          â†“
     æ¨¡å‹éƒ¨ç½²åˆ°äº‘ç«¯
          â†“
      å‰ç«¯è®¿é—® API
</span></code></pre>
<p>è¿™æ˜¯é«˜è€¦åˆã€é‡è®¡ç®—ã€é‡ä¾èµ–çš„é—­ç¯ã€‚</p>
<p>è€Œç°åœ¨â€”â€”<br/>
å€ŸåŠ© <strong>WebAssemblyï¼ˆWasmï¼‰ã€WebGPU</strong> ä»¥åŠ <strong>è½»é‡ Transformer æ¶æ„é‡å†™</strong>ï¼ŒAI æ­£åœ¨ã€Œæ»‘å‘æµè§ˆå™¨ã€ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">JS + WebGPU + è¾¹ç¼˜æ¨¡å‹ + æœ¬åœ°å¾®è°ƒ
<span class="hljs-code">          â†“
   æ¨¡å‹è·‘åœ¨ä½ ç”µè„‘çš„æ˜¾å¡ä¸Š
</span></code></pre>
<p>ä½ åˆ·æ–°é¡µé¢ï¼ŒAI å°±ä¸Šç­ï¼›<br/>
ä½ å…³æ‰æ ‡ç­¾é¡µï¼ŒAI å°±ä¸‹ç­ã€‚<br/>
â€”â€” äººç”Ÿè‹¦çŸ­ï¼Œä¸å¦¨åœ¨æµè§ˆå™¨é‡Œè®­ä¸ªæ¨¡å‹æ•£æ•£å¿ƒã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€æŠ€æœ¯æ ¸å¿ƒï¼šå½“æµè§ˆå™¨å˜æˆè¿·ä½ å®éªŒå®¤ ğŸ§ª</h2>
<p>è®©æˆ‘ä»¬åƒç§‘å­¦å®¶ä¸€æ ·å‰–æä¸€ä¸‹<strong>Web AIGC</strong>çš„åº•å±‚ç»„æˆï¼š</p>
<h3 data-id="heading-3">1ï¸âƒ£ æ¨¡å‹åŠ è½½ä¸æƒé‡åˆ‡ç‰‡</h3>
<p>åœ¨æµè§ˆå™¨é‡Œï¼Œä½ ä¸ä¼šä¸€æ¬¡æ€§åŠ è½½å‡ åGBçš„æƒé‡ã€‚<br/>
Insteadï¼Œæˆ‘ä»¬ä½¿ç”¨<strong>åˆ†å—åŠ è½½æŠ€æœ¯</strong>ï¼ˆchunked loadingï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadModelChunks</span>(<span class="hljs-params">urls</span>) {
  <span class="hljs-keyword">const</span> chunks = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(urls.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">u</span> =&gt;</span> <span class="hljs-title function_">fetch</span>(u).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-title function_">arrayBuffer</span>())));
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">mergeModelChunks</span>(chunks);
}
</code></pre>
<blockquote>
<p>âš™ï¸ æ¯ä¸ªå—ç›¸å½“äºç¥ç»ç½‘ç»œçš„è®°å¿†ç¢ç‰‡ã€‚æµè§ˆå™¨æ‹¼èµ·æ¥ï¼Œå°±æ˜¯ä¸€ä¸ªâ€œæ€è€ƒçš„å·¥å‚â€ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-4">2ï¸âƒ£ å¾®è°ƒï¼ˆFine-tuningï¼‰æœºåˆ¶ï¼šäººäººéƒ½æ˜¯è°ƒæ•™å¸ˆ</h3>
<p>åœ¨ä¼ ç»Ÿè®­ç»ƒä¸­ï¼Œæ¨¡å‹è°ƒå‚éœ€è¦çŸ¿å¡ã€TensorBoard å’Œæ°¸æ’çš„ bugã€‚<br/>
åœ¨ Web å±‚ï¼Œæˆ‘ä»¬æ›´è½»é‡ â€”â€”<br/>
ç”¨ <strong>LoRA</strong>ï¼ˆä½ç§©é€‚é…ï¼‰æˆ– <strong>Adapter æ¨¡å‹</strong> æŠ€æœ¯ï¼Œä½¿å¾—ç”¨æˆ·ä¸Šä¼ çš„æ•°æ®â€œè°ƒåˆ¶å‡ºâ€è‡ªå·±çš„ä¸€ç‰ˆäººæ ¼æ¨¡å‹ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fineTune</span>(<span class="hljs-params">model, userDataset</span>) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> data <span class="hljs-keyword">of</span> userDataset) {
    <span class="hljs-keyword">const</span> {input, target} = <span class="hljs-title function_">preprocess</span>(data);
    model.<span class="hljs-title function_">backward</span>(<span class="hljs-title function_">loss</span>(model.<span class="hljs-title function_">forward</span>(input), target));
  }
  <span class="hljs-keyword">return</span> model;
}
</code></pre>
<blockquote>
<p>è¿™æ®µä¼ªä»£ç çš„æ„ä¹‰æ˜¯ï¼šæµè§ˆå™¨é‡Œæ­£åœ¨â€œä¸ºä½ ç§æœ‰åœ°æ›´æ–°æ¨¡å‹å‚æ•°â€ï¼Œæ²¡æœ‰ä¸Šä¼ ä»»ä½•ç”¨æˆ·æ•°æ®ã€‚<strong>éšç§å‹å¥½ä¸”å“åº”å¼ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-5">3ï¸âƒ£ WebGPUï¼šæŠŠ GPU å€Ÿç»™ JavaScript ğŸï¸</h3>
<p>WebGPU æ˜¯è¿™åœºé©å‘½çš„ç‡ƒæ–™ã€‚<br/>
å®ƒè®©æµè§ˆå™¨ç¬¬ä¸€æ¬¡èƒ½æ¥è¿‘åŸç”Ÿ GPU API çš„è°ƒç”¨æ€§èƒ½ã€‚</p>
<p>ç®€å•ä¾‹å­ï¼š</p>
<pre><code class="hljs language-java" lang="java">async function <span class="hljs-title function_">createComputePipeline</span><span class="hljs-params">(device)</span> {
  <span class="hljs-type">const</span> <span class="hljs-variable">shaderModule</span> <span class="hljs-operator">=</span> device.createShaderModule({
    code: `
      <span class="hljs-meta">@compute</span> <span class="hljs-meta">@workgroup_size(1)</span>
      fn <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-meta">@builtin(global_invocation_id)</span> id : vec3&lt;u32&gt;)</span> {
          <span class="hljs-comment">// æ¨¡æ‹Ÿâ€œç¥ç»å…ƒâ€çš„ä¸€æ¬¡çº¿æ€§å˜æ¢</span>
      }
    `
  });
  <span class="hljs-keyword">return</span> device.createComputePipeline({compute: {<span class="hljs-keyword">module</span>: shaderModule, entryPoint: <span class="hljs-string">"main"</span>}});
}
</code></pre>
<p>æœ‰äº†å®ƒï¼Œæˆ‘ä»¬ç»ˆäºå¯ä»¥åœ¨ web ä¸Šå®ç°çŸ©é˜µè¿ç®—ã€attentionæœºåˆ¶ç”šè‡³æ˜¯ç®€å•çš„æ¨ç†ä»»åŠ¡ã€‚</p>
<hr/>
<h2 data-id="heading-6">å››ã€ç”¨æˆ·ä¸ªæ€§åŒ–ï¼šAIGC çš„ç¤¾ä¼šæŠ€æœ¯ç«å±± ğŸŒ‹</h2>
<blockquote>
<p>å½“æ¯ä¸ªäººéƒ½èƒ½åœ¨è‡ªå·±æµè§ˆå™¨é‡Œè°ƒæ¨¡å‹ï¼Œè¿™ä¸ä»…æ˜¯å·¥ç¨‹å˜é©ï¼Œæ›´æ˜¯è®¤çŸ¥ä¸Šçš„å˜é©ã€‚</p>
</blockquote>
<h3 data-id="heading-7">âœï¸ å¾®è°ƒå†…å®¹</h3>
<ul>
<li>ç”¨æˆ·ä¸Šä¼  50 å¼ è‡ªæ‹ â†’ ç”Ÿæˆä¸ªæ€§å¤´åƒï¼›</li>
<li>å¯¼å…¥è‡ªå·±å†™çš„æ–‡ç«  â†’ æ¨¡å‹ç†è§£è¯­æ°”é£æ ¼ï¼›</li>
<li>è¾“å…¥èŠå¤©å¯¹è¯ â†’ æ‰“é€ â€œæ•°å­—åˆ†èº«äººæ ¼â€ã€‚</li>
</ul>
<h3 data-id="heading-8">ğŸ§© æŠ€æœ¯æŒ‘æˆ˜</h3>
<ol>
<li><strong>ç®—åŠ›ç¢ç‰‡</strong>ï¼šä¸åŒç”¨æˆ· GPU æ€§èƒ½å·®å¼‚å·¨å¤§ï¼›</li>
<li><strong>å†…å­˜éš”ç¦»</strong>ï¼šæ¨¡å‹æƒé‡ä¸ç½‘é¡µæ²™ç›’çš„å®‰å…¨æ€§ï¼›</li>
<li><strong>éšç§æƒ â†’ æ¨¡å‹æƒå½’è°ï¼Ÿ</strong></li>
</ol>
<p>ä½†è¿™äº›æŒ‘æˆ˜ï¼Œä¹Ÿä¿ƒä½¿æˆ‘ä»¬æ€è€ƒæ›´å¥½çš„ç³»ç»Ÿè®¾è®¡ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>ç”¨ <strong>åˆ†å¸ƒå¼æµè§ˆå™¨è®­ç»ƒï¼ˆFederated Learningï¼‰</strong> æ”¹å–„æ¨¡å‹ï¼›</li>
<li>é€šè¿‡ <strong>å·®åˆ†éšç§æœºåˆ¶ï¼ˆDifferential Privacyï¼‰</strong> å±è”½ä¸ªäººä¿¡æ¯ï¼›</li>
<li>ç”¨ <strong>LoRA æƒé‡å…±äº«</strong> æ›¿ä»£å…¨æ¨¡å‹å…±äº«ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-9">äº”ã€å°ç»“ï¼šå½“AIçš„é—¨æ§›è·Œå€’ï¼Œæˆ‘ä»¬çš„åˆ›é€ åŠ›æŠ¬å¤´ âœ¨</h2>
<blockquote>
<p>ä»Šå¤©çš„æµè§ˆå™¨é‡Œè·‘çš„ä»£ç ï¼Œæ˜å¤©å°±å¯èƒ½æ˜¯ä¸€ä¸ªæ™ºèƒ½åˆ›ä½œè€…ã€‚</p>
</blockquote>
<p>å¯å®šåˆ¶åŒ– AIGC å¹¶ä¸æ˜¯â€œäººäººæˆä¸ºæ•°æ®ç§‘å­¦å®¶â€ï¼Œ<br/>
è€Œæ˜¯â€œ<strong>æµè§ˆå™¨æˆä¸ºè®¤çŸ¥å»¶ä¼¸çš„å®éªŒåœº</strong>â€ã€‚</p>
<p>å°±åƒä¸ªäººè®¡ç®—æ—¶ä»£ä»æœåŠ¡å™¨èµ°å‘ PCï¼Œ<br/>
AIGC ä¹Ÿæ­£ä»äº‘ç«¯èµ°å‘æ¯ä¸€ä¸ªç½‘é¡µã€‚<br/>
æ¨¡å‹ä¸å†é«˜é«˜åœ¨ä¸Šï¼Œè€Œæ˜¯ï¼š</p>
<blockquote>
<p>æ‰“å¼€ F12 æ§åˆ¶å°ï¼Œä½ çš„æ€æƒ³å°±åœ¨ç¼–è¯‘ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-10">å…­ã€ğŸŒ æ¦‚å¿µå›¾ï¼ˆç¤ºæ„ï¼‰</h2>
<pre><code class="hljs language-lua" lang="lua">+<span class="hljs-comment">--------------------------------------------+</span>
|               Web Browser                  |
|  +<span class="hljs-comment">-----------+     +--------------------+  |</span>
|  | WebGPU    |&lt;<span class="hljs-comment">---&gt;| JS runtime (V8)   |  |</span>
|  +<span class="hljs-comment">-----------+     +--------------------+  |</span>
|        |                       ^           |
|        v                       |           |
|   Model Loader    &lt;<span class="hljs-comment">---    User Interaction  |</span>
|        |                               â¬‡   |
|        v                               Data|
|     Fine-tuner  &lt;<span class="hljs-comment">---  Local Dataset (å®‰å…¨) |</span>
+<span class="hljs-comment">--------------------------------------------+</span>
</code></pre>
<hr/>
<h2 data-id="heading-11">ä¸ƒã€å°¾å£°ï¼šå“²å­¦æ—¶é—´ ğŸ¦‰</h2>
<blockquote>
<p>â€œæŠ€æœ¯é—¨æ§›çš„æ¶ˆå¤±ï¼Œä»æ¥ä¸æ˜¯çŸ¥è¯†çš„ä¸‹é™ï¼Œè€Œæ˜¯æ–‡æ˜çš„æ‰©å±•ã€‚â€</p>
</blockquote>
<p>AIGC çš„ä¸ªæ€§åŒ–æ—¶ä»£å‘Šè¯‰æˆ‘ä»¬ä¸€ä¸ªäº‹å®ï¼š</p>
<ul>
<li>æœªæ¥çš„ AI ä¸æ˜¯å¤§æ¨¡å‹å„æ–­çš„æœºå™¨å¸å›½ï¼›</li>
<li>è€Œæ˜¯åƒä¸‡æµè§ˆå™¨åœ¨è¾¹ç¼˜ä¸Šé—ªçƒçš„ã€Œå°ç¯å¡”ã€ã€‚</li>
</ul>
<p>åœ¨æ¯ä¸€ä¸ªæ ‡ç­¾é¡µçš„å…‰ä¸‹ï¼Œäººç±»ä¸æœºå™¨ï¼Œéƒ½åœ¨å…±åŒå­¦ä¹ ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€HarmonyOS 6ã€‘é™æ€å’ŒåŠ¨æ€æ·»åŠ åº”ç”¨å¿«æ·æ–¹å¼è¯¦è§£]]></title>    <link>https://juejin.cn/post/7572387877138776074</link>    <guid>https://juejin.cn/post/7572387877138776074</guid>    <pubDate>2025-11-14T10:00:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572387877138776074" data-draft-id="7572340344509448218" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€HarmonyOS 6ã€‘é™æ€å’ŒåŠ¨æ€æ·»åŠ åº”ç”¨å¿«æ·æ–¹å¼è¯¦è§£"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2025-11-14T10:00:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GeorgeGcs"/> <meta itemprop="url" content="https://juejin.cn/user/1239904847930654"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€HarmonyOS 6ã€‘é™æ€å’ŒåŠ¨æ€æ·»åŠ åº”ç”¨å¿«æ·æ–¹å¼è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1239904847930654/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GeorgeGcs
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T10:00:59.000Z" title="Fri Nov 14 2025 10:00:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ã€HarmonyOS 6ã€‘é™æ€å’ŒåŠ¨æ€æ·»åŠ åº”ç”¨å¿«æ·æ–¹å¼è¯¦è§£</h2>
<h3 data-id="heading-1">ä¸€ã€å‰è¨€</h3>
<p>åœ¨åŠŸèƒ½æ—¥ç›Šå¤æ‚çš„åº”ç”¨ä¸­ï¼Œç”¨æˆ·å¾€å¾€éœ€è¦å¤šæ­¥æ“ä½œæ‰èƒ½æ‰¾åˆ°å¸¸ç”¨åŠŸèƒ½ã€‚è€Œåº”ç”¨å¿«æ·æ–¹å¼èƒ½è®©ç”¨æˆ·ä¸€é”®ç›´è¾¾æ ¸å¿ƒåŠŸèƒ½ï¼Œæ—¢æå‡æ“ä½œæ•ˆç‡ï¼Œä¹Ÿèƒ½å¢å¼ºç”¨æˆ·å¯¹åº”ç”¨çš„ç²˜æ€§ã€‚</p>
<p>æœ¬æ–‡ç»“åˆå®é™…å¼€å‘åœºæ™¯ï¼Œè¯¦ç»†åˆ†äº« HarmonyOS ä¸­ä¸¤ç§å¿«æ·æ–¹å¼çš„å®ç°æ–¹æ³•ï¼ŒåŒ…æ‹¬é™æ€å¿«æ·æ–¹å¼é…ç½®å’Œåº”ç”¨å†…åŠ¨æ€æ·»åŠ ï¼Œå…¨ç¨‹åŸºäºå• HAP åŒ…åœºæ™¯ï¼ˆå¤š HAP åŒ…é…ç½®é€»è¾‘ä¸€è‡´ï¼‰ã€‚</p>
<h3 data-id="heading-2">äºŒã€é™æ€å¿«æ·æ–¹å¼ï¼šåŸºç¡€é…ç½®ä¸å¿«é€Ÿè·³è½¬</h3>
<p>é™æ€å¿«æ·æ–¹å¼æ˜¯é€šè¿‡é…ç½®æ–‡ä»¶é¢„å…ˆå®šä¹‰çš„å¿«æ·æ–¹å¼ï¼Œç”¨æˆ·é•¿æŒ‰åº”ç”¨å›¾æ ‡å³å¯çœ‹åˆ°ã€‚ä¾‹å¦‚â€œå›å®¶å¯¼èˆªâ€â€œæ–°å»ºä¾¿ç­¾â€è¿™ç±»é«˜é¢‘å›ºå®šåŠŸèƒ½ã€‚æ•ˆæœå¦‚ä¸‹ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84d361922395428595c61710a45a87cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR2VvcmdlR2Nz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763719259&amp;x-signature=xVXFcsHC5w9nPEQfMMECUfE28As%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h5 data-id="heading-3">1ã€ åˆ›å»ºç›®æ ‡é¡µé¢å¹¶é…ç½®è·¯ç”±</h5>
<p>é¦–å…ˆåˆ›å»ºå¿«æ·æ–¹å¼å¯¹åº”çš„åŠŸèƒ½é¡µé¢ï¼ˆå¦‚â€œå›å®¶â€â€œå»å…¬å¸â€é¡µé¢ï¼‰ï¼Œé¡µé¢éœ€ç”¨ <code>@Entry</code> è£…é¥°ã€‚ç„¶ååœ¨ <code>resources/base/profile/main_pages.json</code> ä¸­æ·»åŠ é¡µé¢è·¯ç”±ï¼Œç¡®ä¿åº”ç”¨èƒ½è¯†åˆ«é¡µé¢è·¯å¾„ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"src"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"pages/Index"</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// åº”ç”¨ä¸»é¡µé¢</span>
    <span class="hljs-string">"pages/GoHouse"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// å›å®¶å¯¼èˆªé¡µé¢</span>
    <span class="hljs-string">"pages/GoCompany"</span> <span class="hljs-comment">// å»å…¬å¸å¯¼èˆªé¡µé¢</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h5 data-id="heading-4">2ã€ ç¼–å†™å¿«æ·æ–¹å¼é…ç½®æ–‡ä»¶</h5>
<p>åœ¨ <code>resources/base/profile/</code> ç›®å½•ä¸‹æ–°å»º <code>shortcuts_config.json</code> æ–‡ä»¶ï¼Œå®šä¹‰å¿«æ·æ–¹å¼çš„ IDã€æ˜¾ç¤ºæ–‡æœ¬ã€å›¾æ ‡å’Œè·³è½¬ç›®æ ‡ã€‚æ¯ä¸ªå¿«æ·æ–¹å¼éœ€åŒ…å«ä»¥ä¸‹æ ¸å¿ƒå‚æ•°ï¼š</p>
<ul>
<li><code>shortcutId</code>ï¼šå”¯ä¸€æ ‡è¯†ï¼Œä¸è¶…è¿‡ 63 å­—èŠ‚</li>
<li><code>label</code>ï¼šæ˜¾ç¤ºæ–‡æœ¬ï¼ˆæ”¯æŒå­—ç¬¦ä¸²æˆ–èµ„æºç´¢å¼•ï¼‰</li>
<li><code>icon</code>ï¼šå›¾æ ‡èµ„æºç´¢å¼•</li>
<li><code>wants</code>ï¼šè·³è½¬é…ç½®ï¼ˆåŒ…åã€æ¨¡å—åã€ç»„ä»¶åã€è‡ªå®šä¹‰å‚æ•°ï¼‰</li>
</ul>
<p>ç¤ºä¾‹é…ç½®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"shortcuts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"shortcutId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"id_company"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"$string:Go_to_the_Company"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"icon"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"$media:company"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"wants"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"bundleName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"com.example.desktopshortcuts"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"moduleName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"entry"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"abilityName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"EntryAbility"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"parameters"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"shortCutKey"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"CompanyPage"</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"shortcutId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"id_house"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"$string:Go_to_House"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"icon"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"$media:house"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"wants"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"bundleName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"com.example.desktopshortcuts"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"moduleName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"entry"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"abilityName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"EntryAbility"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"parameters"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"shortCutKey"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"HousePage"</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h5 data-id="heading-5">3ã€åœ¨ module.json5 ä¸­å…³è”é…ç½®</h5>
<p>åœ¨ <code>module.json5</code> çš„ <code>abilities</code> æ ‡ç­¾ä¸‹æ·»åŠ  <code>metadata</code> é…ç½®ï¼ŒæŒ‡å®šå¿«æ·æ–¹å¼é…ç½®æ–‡ä»¶è·¯å¾„ï¼Œè®©ç³»ç»Ÿè¯†åˆ«å¿«æ·æ–¹å¼ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"abilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"EntryAbility"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"srcEntry"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./ets/entryability/EntryAbility.ets"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"skills"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"entities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"entity.system.home"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"actions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"ohos.want.action.home"</span><span class="hljs-punctuation">]</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ohos.ability.shortcuts"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"resource"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"$profile:shortcuts_config"</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h5 data-id="heading-6">4ã€å®ç°é¡µé¢è·³è½¬é€»è¾‘</h5>
<p>åœ¨ä¸»é¡µé¢ï¼ˆIndex.etsï¼‰ä¸­å®šä¹‰è·³è½¬æ–¹æ³•ï¼Œé€šè¿‡è¯»å– <code>wants</code> ä¸­çš„è‡ªå®šä¹‰å‚æ•° <code>shortCutKey</code>ï¼Œåˆ¤æ–­ç”¨æˆ·ç‚¹å‡»çš„å¿«æ·æ–¹å¼ï¼Œè¿›è€Œè·³è½¬åˆ°å¯¹åº”é¡µé¢ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">goToSpecifyPage</span>(<span class="hljs-params">want?: Want</span>) {
  <span class="hljs-keyword">let</span> shortCutKey = want?.<span class="hljs-property">parameters</span>?.<span class="hljs-property">shortCutKey</span>;

  <span class="hljs-keyword">if</span> (shortCutKey === <span class="hljs-string">'CompanyPage'</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getRouter</span>().<span class="hljs-title function_">pushUrl</span>({ <span class="hljs-attr">url</span>: <span class="hljs-string">'pages/GoCompany'</span> })
      .<span class="hljs-keyword">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {
        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`è·³è½¬å¤±è´¥ï¼š<span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);
      });
  }
  <span class="hljs-keyword">if</span> (shortCutKey === <span class="hljs-string">'HousePage'</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getRouter</span>().<span class="hljs-title function_">pushUrl</span>({ <span class="hljs-attr">url</span>: <span class="hljs-string">'pages/GoHouse'</span> })
      .<span class="hljs-keyword">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {
        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`è·³è½¬å¤±è´¥ï¼š<span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);
      });
  }
}
</code></pre>
<h5 data-id="heading-7">5ã€ ä¿å­˜å¹¶ä¼ é€’ Want å‚æ•°</h5>
<p>å¿«æ·æ–¹å¼è·³è½¬åˆ†ä¸ºå†·å¯åŠ¨å’Œçƒ­å¯åŠ¨ï¼Œéœ€åœ¨ <code>EntryAbility.ets</code> ä¸­é€šè¿‡ <code>AppStorage</code> ä¿å­˜ <code>want</code> å‚æ•°ï¼Œç¡®ä¿é¡µé¢èƒ½è·å–åˆ°è·³è½¬ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å†·å¯åŠ¨æ—¶ä¿å­˜å‚æ•°</span>
<span class="hljs-title function_">onCreate</span>(<span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span>, <span class="hljs-attr">launchParam</span>: <span class="hljs-title class_">AbilityConstant</span>.<span class="hljs-property">LaunchParam</span>): <span class="hljs-built_in">void</span> {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">getApplicationContext</span>().<span class="hljs-title function_">setColorMode</span>(<span class="hljs-title class_">ConfigurationConstant</span>.<span class="hljs-property">ColorMode</span>.<span class="hljs-property">COLOR_MODE_NOT_SET</span>);
  <span class="hljs-keyword">if</span> (want?.<span class="hljs-property">parameters</span>?.<span class="hljs-property">shortCutKey</span>) {
    <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">setOrCreate</span>(<span class="hljs-string">'want'</span>, want);
  }
}

<span class="hljs-comment">// çƒ­å¯åŠ¨æ—¶æ›´æ–°å‚æ•°</span>
<span class="hljs-title function_">onNewWant</span>(<span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span>, <span class="hljs-attr">launchParam</span>: <span class="hljs-title class_">AbilityConstant</span>.<span class="hljs-property">LaunchParam</span>): <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">if</span> (want?.<span class="hljs-property">parameters</span>?.<span class="hljs-property">shortCutKey</span>) {
    <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">setOrCreate</span>(<span class="hljs-string">'want'</span>, want);
  }
}
</code></pre>
<h5 data-id="heading-8">6ã€ é¡µé¢æ˜¾ç¤ºæ—¶æ‰§è¡Œè·³è½¬</h5>
<p>åœ¨ä¸»é¡µé¢çš„ <code>onPageShow</code> æ–¹æ³•ä¸­ï¼Œè¯»å– <code>AppStorage</code> ä¸­ä¿å­˜çš„ <code>want</code> å‚æ•°ï¼Œè°ƒç”¨è·³è½¬æ–¹æ³•å®Œæˆå¿«æ·æ–¹å¼å“åº”ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">onPageShow</span>(): <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">has</span>(<span class="hljs-string">'want'</span>)) {
    <span class="hljs-keyword">let</span> <span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'want'</span>);
    <span class="hljs-keyword">if</span> (want) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">goToSpecifyPage</span>(want);
      <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">delete</span>(<span class="hljs-string">'want'</span>); <span class="hljs-comment">// è·³è½¬åæ¸…é™¤å‚æ•°ï¼Œé¿å…é‡å¤è§¦å‘</span>
    }
  }
}
</code></pre>
<p>å…·ä½“è·³è½¬çš„å¤„ç†ï¼Œé€šè¿‡wantä¸­çš„å‚æ•°ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®è‡ªå·±ä¸šåŠ¡ä¹ æƒ¯è¿›è¡Œè·³è½¬å¤„ç†ï¼Œä»¥ä¸Šå¤„ç†ä¸ºå‚è€ƒã€‚</p>
<h4 data-id="heading-9">æ³¨æ„äº‹é¡¹</h4>
<p>ï¼ˆ1ï¼‰é™æ€å¿«æ·æ–¹å¼æœ€å¤šæ”¯æŒé…ç½® 4 ä¸ªï¼Œä»…èƒ½è·³è½¬è‡³ UIAbility å…¥å£é¡µé¢ï¼Œæ— æ³•ç›´æ¥è·³è½¬åˆ°éå…¥å£é¡µé¢ã€‚
ï¼ˆ2ï¼‰å¤š HAP åŒ…åœºæ™¯æ— éœ€é¢å¤–é…ç½®ï¼Œæ‰€æœ‰æ“ä½œå‡åœ¨ entry æ–‡ä»¶å¤¹ä¸‹å®Œæˆã€‚</p>
<h3 data-id="heading-10">äºŒã€åº”ç”¨å†…åŠ¨æ€æ·»åŠ å¿«æ·æ–¹å¼</h3>
<p>é™¤äº†é¢„å…ˆé…ç½®çš„é™æ€å¿«æ·æ–¹å¼ï¼Œè¿˜å¯ä»¥åœ¨åº”ç”¨å†…é€šè¿‡ä»£ç åŠ¨æ€æ·»åŠ å¿«æ·æ–¹å¼ï¼ˆå¦‚ç”¨æˆ·ç‚¹å‡»â€œæ·»åŠ åˆ°æ¡Œé¢â€æŒ‰é’®æ—¶åˆ›å»ºï¼‰ï¼Œçµæ´»æ€§æ›´é«˜ã€‚</p>
<h4 data-id="heading-11">æ ¸å¿ƒå®ç°ä»£ç </h4>
<p>åˆ›å»º <code>ShortcutsUtils</code> å·¥å…·ç±»ï¼Œå°è£…åŠ¨æ€æ·»åŠ å¿«æ·æ–¹å¼çš„é€»è¾‘ï¼ŒåŒ…å«æƒé™æ ¡éªŒã€é‡å¤åˆ¤æ–­å’Œåˆ›å»ºè¯·æ±‚ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.PerformanceAnalysisKit"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.BasicServicesKit"</span>;
<span class="hljs-keyword">import</span> { productViewManager } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.StoreKit"</span>;
<span class="hljs-keyword">import</span> { common, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.AbilityKit"</span>;
<span class="hljs-keyword">import</span> promptAction <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.promptAction'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ShortcutsUtils</span> {
  <span class="hljs-comment">/**
   * ç‚¹å‡»æŒ‰é’®æ·»åŠ å¿«æ·æ–¹å¼
   */</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">addShortcuts</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> uiContext = <span class="hljs-title function_">getContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;
    <span class="hljs-keyword">const</span> shortcutId = <span class="hljs-string">"id_test1"</span>; <span class="hljs-comment">// éœ€ä¸ shortcuts_config.json ä¸­å®šä¹‰çš„ä¸€è‡´</span>
    <span class="hljs-keyword">const</span> labelResName = <span class="hljs-string">"shortcut"</span>; <span class="hljs-comment">// å¯¹åº” label çš„èµ„æºç´¢å¼•åç§°</span>
    <span class="hljs-keyword">const</span> iconResName = <span class="hljs-string">"aa_icon"</span>; <span class="hljs-comment">// å¯¹åº” icon çš„èµ„æºç´¢å¼•åç§°</span>
    <span class="hljs-keyword">const</span> <span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span> = {
      <span class="hljs-attr">bundleName</span>: <span class="hljs-string">"com.example.appgallery.kit.demo"</span>,
      <span class="hljs-attr">moduleName</span>: <span class="hljs-string">"entry"</span>,
      <span class="hljs-attr">abilityName</span>: <span class="hljs-string">"EntryAbility"</span>,
      <span class="hljs-attr">parameters</span>: {
        <span class="hljs-attr">testKey</span>: <span class="hljs-string">"testValue"</span> <span class="hljs-comment">// è‡ªå®šä¹‰å‚æ•°</span>
      }
    };

    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// æ ¡éªŒå¿«æ·æ–¹å¼æ˜¯å¦å¯æ·»åŠ ï¼ˆæ˜¯å¦å·²å­˜åœ¨ã€æ˜¯å¦æœ‰æƒé™ï¼‰</span>
      productViewManager.<span class="hljs-title function_">checkPinShortcutPermitted</span>(uiContext, shortcutId, want, labelResName, iconResName)
        .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
          hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'addShortcuts'</span>, <span class="hljs-string">`æ ¡éªŒæˆåŠŸï¼š<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);
          <span class="hljs-keyword">const</span> tid = result.<span class="hljs-property">tid</span>;
          <span class="hljs-comment">// å‘èµ·æ·»åŠ å¿«æ·æ–¹å¼è¯·æ±‚</span>
          productViewManager.<span class="hljs-title function_">requestNewPinShortcut</span>(uiContext, tid)
            .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
              hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'addShortcuts'</span>, <span class="hljs-string">"å¿«æ·æ–¹å¼æ·»åŠ æˆåŠŸï¼"</span>);
            })
            .<span class="hljs-keyword">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {
              hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'addShortcuts'</span>, <span class="hljs-string">`å¿«æ·æ–¹å¼æ·»åŠ å¤±è´¥ï¼š<span class="hljs-subst">${error.code}</span>, <span class="hljs-subst">${error.message}</span>`</span>);
            });
        })
        .<span class="hljs-keyword">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {
          hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'addShortcuts'</span>, <span class="hljs-string">`errï¼š<span class="hljs-subst">${error.code}</span>, <span class="hljs-subst">${error.message}</span>`</span>);
          <span class="hljs-comment">// é”™è¯¯ç  1006620003 è¡¨ç¤ºå¿«æ·æ–¹å¼å·²å­˜åœ¨</span>
          <span class="hljs-keyword">if</span> (error.<span class="hljs-property">code</span> === <span class="hljs-number">1006620003</span>) {
            promptAction.<span class="hljs-title function_">showToast</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'æ¡Œé¢å·²å­˜åœ¨æ­¤å¿«æ·æ–¹å¼ï¼'</span> });
          }
        });
    } <span class="hljs-keyword">catch</span> (err) {
      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'TAG'</span>, <span class="hljs-string">`catch errï¼š<span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);
    }
  }
}
</code></pre>
<h4 data-id="heading-12">ä½¿ç”¨æ–¹å¼</h4>
<p>åœ¨åº”ç”¨é¡µé¢çš„æŒ‰é’®ç‚¹å‡»äº‹ä»¶ä¸­è°ƒç”¨å·¥å…·ç±»æ–¹æ³•ï¼Œå³å¯è§¦å‘å¿«æ·æ–¹å¼æ·»åŠ æµç¨‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç¤ºä¾‹ï¼šæŒ‰é’®ç‚¹å‡»äº‹ä»¶</span>
<span class="hljs-title class_">Button</span>(<span class="hljs-string">'æ·»åŠ æµ‹è¯•å¿«æ·æ–¹å¼'</span>)
  .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title class_">ShortcutsUtils</span>.<span class="hljs-title function_">addShortcuts</span>();
  })
</code></pre>
<p>productViewManagerå…è®¸åº”ç”¨æ·»åŠ å¿«æ·æ–¹å¼çš„æ•°é‡ä¸ºä¸¤ä¸ªã€‚è¿™æ˜¯é¸¿è’™å®˜æ–¹çš„è®¾è®¡å¦‚æ­¤ã€‚</p>
<h3 data-id="heading-13">ä¸‰ã€ä¸¤ç§å¿«æ·æ–¹å¼çš„åŒºåˆ«ä¸é€‚ç”¨åœºæ™¯</h3>























<table><thead><tr><th>ç±»å‹</th><th>é…ç½®æ–¹å¼</th><th>çµæ´»æ€§</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>é™æ€å¿«æ·æ–¹å¼</td><td>é…ç½®æ–‡ä»¶å®šä¹‰</td><td>è¾ƒä½ï¼ˆå›ºå®šåŠŸèƒ½ï¼‰</td><td>é«˜é¢‘å›ºå®šåŠŸèƒ½ï¼Œå¦‚å¯¼èˆªã€æ–°å»ºã€å¿«é€Ÿæ‹ç…§</td></tr><tr><td>åŠ¨æ€å¿«æ·æ–¹å¼</td><td>ä»£ç åŠ¨æ€æ·»åŠ </td><td>è¾ƒé«˜ï¼ˆç”¨æˆ·è§¦å‘ï¼‰</td><td>ä¸ªæ€§åŒ–åŠŸèƒ½ï¼Œå¦‚ç”¨æˆ·è‡ªå®šä¹‰æ”¶è—ã€ä¸´æ—¶é«˜é¢‘åŠŸèƒ½</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ Rust è¿­ä»£å™¨ï¼ˆä¸‹ï¼‰]]></title>    <link>https://juejin.cn/post/7572028313930776616</link>    <guid>https://juejin.cn/post/7572028313930776616</guid>    <pubDate>2025-11-14T00:50:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572028313930776616" data-draft-id="7570659828810285090" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ Rust è¿­ä»£å™¨ï¼ˆä¸‹ï¼‰"/> <meta itemprop="keywords" content="Rust"/> <meta itemprop="datePublished" content="2025-11-14T00:50:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RockByte"/> <meta itemprop="url" content="https://juejin.cn/user/1046390797768519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ Rust è¿­ä»£å™¨ï¼ˆä¸‹ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390797768519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RockByte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T00:50:13.000Z" title="Fri Nov 14 2025 00:50:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#5f6368;background-image:linear-gradient(90deg,rgba(240,191,213,.1) 3%,transparent 0),linear-gradient(1turn,rgba(240,191,213,.1) 3%,transparent 0);background-size:20px 20px;background-position:50%;letter-spacing:1px;word-spacing:1px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-left:50px;padding-bottom:5px;color:#5f6368}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{position:absolute;left:0;display:block;content:""}.markdown-body h1{font-size:32px;margin-bottom:5px}.markdown-body h1:before{top:0;content:"ğŸ¦„";font-size:32px}.markdown-body h2{padding-bottom:24px;border-bottom:1px solid #ececec}.markdown-body h2:before{top:0;left:8px;content:"ğŸ³";font-size:24px}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{top:-2px;left:8px;content:"ğŸ„";font-size:20px}.markdown-body h4{font-size:16px}.markdown-body h4:before{top:-2px;left:8px;content:"ğŸ¦¥";font-size:18px}.markdown-body h5{font-size:14px}.markdown-body h5:before{top:-2px;left:9px;content:"ğŸ¦©";font-size:16px}.markdown-body h6{font-size:12px;margin-top:5px}.markdown-body h6:before{top:-1px;left:10px;content:"ğŸ§";font-size:14px}.markdown-body p{line-height:1.9;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid rgba(253,121,168,.5);margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#a6accd;background:#292d3e;border-radius:8px}.markdown-body a{text-decoration:none;color:#fd79a8;border-bottom:1px solid #fd79a8;padding:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(253,121,168,.1);color:#ee69a9}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body th{color:#fd79a8}.markdown-body th,.markdown-body tr:hover{background:rgba(253,121,168,.1)}.markdown-body td{min-width:120px}.markdown-body blockquote{position:relative;color:#666;padding:23px;margin:22px 0;border-left:4px solid #ee69a9;background-color:rgba(253,121,168,.1)}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;display:block;font-size:27px;color:#fd79a8;opacity:.8}.markdown-body blockquote:before{left:10px;top:0;content:"â"}.markdown-body blockquote:after{right:10px;bottom:0;content:"â"}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body strong{position:relative;color:#fd79a8}.markdown-body strong:before{content:"Â· "}.markdown-body strong:after{content:" Â·"}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#fd79a8}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#ee69a9}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}</style><style data-highlight="" data-highlight-key="xcode">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.xml .hljs-meta{color:silver}.hljs-comment,.hljs-quote{color:#007400}.hljs-attribute,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-tag{color:#aa0d91}.hljs-template-variable,.hljs-variable{color:#3f6e74}.hljs-code,.hljs-meta-string,.hljs-string{color:#c41a16}.hljs-link,.hljs-regexp{color:#0e0eff}.hljs-bullet,.hljs-number,.hljs-symbol,.hljs-title{color:#1c00cf}.hljs-meta,.hljs-section{color:#643820}.hljs-built_in,.hljs-builtin-name,.hljs-class .hljs-title,.hljs-params,.hljs-type{color:#5c2699}.hljs-attr{color:#836c28}.hljs-subst{color:#000}.hljs-formula{background-color:#eee;font-style:italic}.hljs-addition{background-color:#baeeba}.hljs-deletion{background-color:#ffc8bd}.hljs-selector-class,.hljs-selector-id{color:#9b703f}.hljs-doctag,.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a3773739559489997b02275b501de1a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763686212&amp;x-signature=KNI%2BpjtjrxQ04zJSgrP01N0KAbk%3D" alt="0.png" loading="lazy"/></p>
<p>è¿™æ˜¯ã€Šæ·±å…¥ Rust è¿­ä»£å™¨ã€‹ ç³»åˆ—çš„ç¬¬ä¸‰éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†é€šè¿‡å®ä¾‹è¿›è¡Œå­¦ä¹ ã€‚æˆ‘ä»¬å°†æ¢ç´¢ä¸€äº›æœ‰ç”¨ä½†é²œä¸ºäººçŸ¥çš„è¿­ä»£å™¨ç‰¹æ€§ï¼Œä»¥åŠå®ƒä»¬åœ¨ç”¨ Rust å¼€å‘çš„å„ç§æµè¡Œå¼€æºé¡¹ç›®ä¸­çš„åº”ç”¨ã€‚</p>
<p>ä¸‹é¢æ˜¯å‰ä¸¤ç¯‡æ–‡ç« çš„é“¾æ¥ï¼Œæ–¹ä¾¿è¯»è€…è·³è½¬å¤ä¹ ä¸€ä¸‹ï¼š</p>
<ul>
<li><a href="https://juejin.cn/post/7566474134688595983" target="_blank" title="https://juejin.cn/post/7566474134688595983">æ·±å…¥ Rust è¿­ä»£å™¨ï¼ˆä¸Šï¼‰</a></li>
<li><a href="https://juejin.cn/post/7568471321954779170" target="_blank" title="https://juejin.cn/post/7568471321954779170">æ·±å…¥ Rust è¿­ä»£å™¨ï¼ˆä¸­ï¼‰</a></li>
</ul>
<h2 data-id="heading-0">è·å–è¿­ä»£å™¨</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6ae9f7705b64f4889009686c4730f56~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763686212&amp;x-signature=TCxcMY%2FBR%2BmwLA0MGHy8zbDVlag%3D" alt="5.png" loading="lazy"/></p>
<p>å¦‚æœä½ è¦ä»æ•°æ®æºè·å–æ•°æ®ï¼Œä¼˜å…ˆå°è¯•æ˜¯å¦å¯ä»¥é€šè¿‡è¿­ä»£å™¨è®¿é—®ã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹ç¬¬ä¸€ä¸ªç¤ºä¾‹ï¼Œè€ƒè™‘ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ­£åˆ™è¡¨è¾¾å¼å¯ä»¥ä»¥è¿­ä»£å™¨çš„å½¢å¼æä¾›æœç´¢ç»“æœã€‚å½“ä½ éœ€è¦åœ¨ä¸€ä¸ªå¾ˆé•¿çš„å­—ç¬¦ä¸²ä¸­è¿›è¡Œæœç´¢ï¼ŒæŸ¥æ‰¾å¤šä¸ªåŒ¹é…é¡¹ï¼Œå¹¶ä¸”ä¸å¸Œæœ›ä¸€æ¬¡æ€§å°†æ‰€æœ‰ç»“æœåŠ è½½åˆ°å†…å­˜ä¸­æ—¶ï¼Œ<code>Regex::find_iter</code> æ–¹æ³•å°±ç‰¹åˆ«æœ‰ç”¨ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// æŸ¥æ‰¾IPåœ°å€</span>
<span class="hljs-built_in">println!</span>(<span class="hljs-string">"\næŸ¥æ‰¾IPåœ°å€:"</span>);
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">ip_re</span> = Regex::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">r"\b(?:\d{1,3}.){3}\d{1,3}\b"</span>).<span class="hljs-title function_ invoke__">unwrap</span>();
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">ip_text</span> = <span class="hljs-string">"æœåŠ¡å™¨åœ°å€: 192.168.1.1, å¤‡ç”¨åœ°å€: 10.0.0.1, æ— æ•ˆIP: 999.999.999.999"</span>;

<span class="hljs-keyword">for</span> <span class="hljs-variable">mat</span> <span class="hljs-keyword">in</span> ip_re.<span class="hljs-title function_ invoke__">find_iter</span>(ip_text) {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ‰¾åˆ°IP: '{}' at {:?}"</span>, mat.<span class="hljs-title function_ invoke__">as_str</span>(), mat.<span class="hljs-title function_ invoke__">range</span>());
}

<span class="hljs-comment">// output</span>
<span class="hljs-comment">// æŸ¥æ‰¾IPåœ°å€:</span>
<span class="hljs-comment">// æ‰¾åˆ°IP: '192.168.1.1'</span>
<span class="hljs-comment">// æ‰¾åˆ°IP: '10.0.0.1'</span>
<span class="hljs-comment">// æ‰¾åˆ°IP: '999.999.999.999'</span>
</code></pre>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ <code>ip_re</code>ï¼Œç”¨äºåœ¨å†…å®¹ä¸­è¿›è¡Œæœç´¢ï¼Œç›®çš„æ˜¯é€ä¸ªæŸ¥æ‰¾ç¬¦åˆè§„åˆ™çš„å†…å®¹ï¼Œè¿™é‡Œæ˜¯ IP åœ°å€ã€‚<code>find_iter</code> åˆ›å»ºçš„è¿­ä»£å™¨ä¼šç”Ÿæˆ <code>Match</code> ç»“æ„ä½“ï¼Œè¯¥ç»“æ„ä½“ä¿å­˜ç€æ¯ä¸ªåŒ¹é…é¡¹çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åŸå§‹å­—ç¬¦ä¸²ä¸­çš„èµ·å§‹å’Œç»“æŸç´¢å¼•ã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œ<code>mat.as_str()</code> ä¼šè¿”å›åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²ï¼Œ<code>mat.range()</code> ä¼šè¿”å›è¿™äº›åŒ¹é…é¡¹åœ¨åŸæ–‡ä¸­çš„èŒƒå›´ã€‚</p>
<p>å†ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ <strong>Bevy</strong> é¡¹ç›®ã€‚<strong>Bevy</strong> é‡‡ç”¨äº† <strong>ECS</strong>ï¼ˆå®ä½“ã€ç»„ä»¶ã€ç³»ç»Ÿï¼‰æ¨¡å¼ï¼Œå…¶ä¸­ç³»ç»Ÿè´Ÿè´£å¤„ç†ç»„ä»¶ã€‚ä¸ºäº†åè°ƒå„ç§ç³»ç»Ÿçš„æ‰§è¡Œï¼Œ<strong>Bevy</strong> çš„ <strong>ECS</strong> åˆ©ç”¨äº†è°ƒåº¦æœºåˆ¶ã€‚è¿™äº›è°ƒåº¦æ˜¯ä½¿ç”¨ç”± <code>petgraph</code> æ¿æ¡ç®±æ”¯æŒçš„å›¾æ¥è®¾è®¡çš„ ã€‚å›¾ä½œä¸ºå¤æ‚çš„æ•°æ®ç»“æ„ï¼Œé€šè¿‡å‡ ä¸ªè¿­ä»£å™¨æä¾›å¯¹å…¶å†…éƒ¨æ•°æ®çš„è®¿é—®ã€‚åœ¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œæˆ‘ä»¬ä»¥ç›¸åçš„é¡ºåºè®¿é—®å›¾çš„èŠ‚ç‚¹ã€‚ç„¶åï¼Œå¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬é€šè¿‡éå†å‡ºè¾¹æ¥æ¢ç´¢å…¶é‚»å±…ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">for</span> <span class="hljs-variable">a</span> <span class="hljs-keyword">in</span> topsorted.<span class="hljs-title function_ invoke__">nodes</span>().<span class="hljs-title function_ invoke__">rev</span>() {
   <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">index_a</span> = *map.<span class="hljs-title function_ invoke__">get</span>(&amp;a).<span class="hljs-title function_ invoke__">unwrap</span>();
   <span class="hljs-comment">// æŒ‰æ‹“æ‰‘é¡ºåºè¿­ä»£å®ƒä»¬çš„åç»§èŠ‚ç‚¹</span>
   <span class="hljs-keyword">for</span> <span class="hljs-variable">b</span> <span class="hljs-keyword">in</span> topsorted.<span class="hljs-title function_ invoke__">neighbors_directed</span>(a, Outgoing) {
    <span class="hljs-comment">//...</span>
</code></pre>
<p><code>nodes</code> å’Œ <code>neighbors_directed</code> æ–¹æ³•éƒ½ä¼šè¿”å›è¿­ä»£å™¨ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<strong>Bevy</strong> çš„å¼€å‘è€…å¹¶æ²¡æœ‰è¯•å›¾å°†æ‰€æœ‰ä»£ç éƒ½æ•´åˆåˆ°è¿­ä»£å™¨æµæ°´çº¿ä¸­ã€‚è€ƒè™‘åˆ°æ¯æ¬¡è¿­ä»£çš„å¤æ‚æ€§ä»¥åŠå¯èƒ½å‡ºç°çš„æ·±åº¦åµŒå¥—ï¼Œé€‰æ‹©ä½¿ç”¨æ˜¾å¼å¾ªç¯æ˜¯å¾ˆåˆç†çš„ã€‚</p>
<p>åƒå›¾è¿™æ ·çš„å¤æ‚æ•°æ®ç»“æ„ï¼Œé€šå¸¸ä¼šæä¾›å¤šä¸ªç”¨äºè®¿é—®å…¶æ•°æ®çš„è¿­ä»£å™¨ã€‚èŠ±äº›æ—¶é—´ç ”ç©¶è¿™äº›æ¥å£å¹¶æ‰¾å‡ºå¯ç”¨çš„è¿­ä»£å™¨ï¼Œå¯¹äºç¼–å†™åœ°é“çš„ Rust ä»£ç éå¸¸æœ‰å¸®åŠ©ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œè®¸å¤šæ•°æ®æ¥æºéƒ½æœ‰è¿­ä»£å™¨æ¥å£ã€‚ä¸€æ—¦è·å–äº†è¿­ä»£å™¨ï¼Œå°±å¯ä»¥å……åˆ†åˆ©ç”¨å„ç§è¿­ä»£å™¨å·¥å…·æ¥é«˜æ•ˆåœ°å¤„ç†æ•°æ®ã€‚</p>
<h2 data-id="heading-1">æ„å»ºè¿­ä»£å™¨ï¼š<code>successors</code> å’Œ <code>from_fn</code></h2>
<p>æœ‰æ—¶ï¼Œæ•°æ®æºå¯èƒ½ä¸ä¼šç›´æ¥æä¾›è¿­ä»£å™¨æ¥å£ï¼Œè€Œæ˜¯æä¾›ä¸€ä¸ªç”¨äºæ£€ç´¢ä¸‹ä¸€ä¸ªå…ƒç´ çš„å‡½æ•°æˆ–ä¸€ç§æ„é€ è¿­ä»£å™¨çš„æ–¹æ³•ã€‚æ­¤å¤–ï¼Œåœ¨æ²¡æœ‰é¢„å…ˆå­˜åœ¨çš„æ•°æ®ä¸”å¿…é¡»é€šè¿‡ç®—æ³•ç”Ÿæˆæ•°æ®çš„æƒ…å†µä¸‹ï¼Œä»ç„¶å¯ä»¥ä½¿ç”¨è¿­ä»£å™¨ã€‚</p>
<p><code>std::iter::successors</code> å‡½æ•°ä¸ºè¿™äº›åœºæ™¯æä¾›äº†ä¸€ä¸ªç»ä½³çš„è§£å†³æ–¹æ¡ˆã€‚è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªåˆå§‹å…ƒç´ ä»¥åŠä¸€ä¸ªè¿”å› <code>Option</code> çš„å‡½æ•°ï¼Œ<code>Option</code> ä¸­è¦ä¹ˆåŒ…å«ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œè¦ä¹ˆåŒ…å« <code>None</code>ã€‚ä»¥è¿™ç§æ–¹å¼åˆ›å»ºçš„è¿­ä»£å™¨å¯ä»¥ä»¥å¸¸è§„æ–¹å¼ä½¿ç”¨ã€‚</p>
<p>æˆ‘ä»¬çœ‹ä¸€ä¸‹ç®€å•çš„ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> std::iter::<span class="hljs-title function_ invoke__">successors</span>(<span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-number">12345u32</span>), |&amp;n| <span class="hljs-keyword">if</span> n == <span class="hljs-number">0</span> { <span class="hljs-literal">None</span> } <span class="hljs-keyword">else</span> { <span class="hljs-title function_ invoke__">Some</span>(n / <span class="hljs-number">10</span>) }) {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, i);
}

<span class="hljs-comment">// output</span>
<span class="hljs-comment">// 12345</span>
<span class="hljs-comment">// 1234</span>
<span class="hljs-comment">// 123</span>
<span class="hljs-comment">// 12</span>
<span class="hljs-comment">// 1</span>
<span class="hljs-comment">// 0</span>
</code></pre>
<p>è¯¥ä»£ç ä¸­ï¼Œ<code>successors</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>Some(12345u32)</code>ï¼Œè¡¨ç¤ºè¯¥è¿­ä»£å™¨çš„åˆå§‹å€¼ï¼Œåç»­ <code>|&amp;n| if n == 0 { None } else { Some(n / 10) }</code> æ˜¯ç”Ÿæˆå€¼çš„å‡½æ•°ã€‚</p>
<p>å¦‚ç»“æœè¾“å‡ºé‚£æ ·ï¼Œä» <code>12345</code> åˆ° <code>0</code> éƒ½è¿›è¡Œäº†è¾“å‡ºã€‚</p>
<p>ä»¥æå¿«çš„é€Ÿåº¦è‘—ç§°çš„ Python ä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ–å·¥å…· <strong>Ruff</strong>ï¼Œä¹Ÿä½¿ç”¨äº† <code>successors</code>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust">std::iter::<span class="hljs-title function_ invoke__">successors</span>(
   <span class="hljs-title function_ invoke__">Some</span>(AnyNodeRef::<span class="hljs-title function_ invoke__">from</span>(preceding)),
   AnyNodeRef::last_child_in_body,
)
.<span class="hljs-title function_ invoke__">take_while</span>(|last_child|...)
.<span class="hljs-title function_ invoke__">any</span>(|last_child| ...)
</code></pre>
<p>ä¸Šé¢ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è¦ç¡®å®šæŸä¸ªå‰é¢çš„ä»£ç å…ƒç´ ä¹‹å‰æˆ–ä¹‹åæ˜¯å¦éœ€è¦ç©ºè¡Œã€‚æ‰€æœ‰è¿™äº›å…ƒç´ éƒ½æ˜¯æ ‘ç»“æ„çš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå‡½æ•°æ¥è¯†åˆ«å­æ ‘æœ€åä¸€ä¸ªåˆ†æ”¯ä¸­çš„æœ€åä¸€ä¸ªå­å…ƒç´ ã€‚é€šè¿‡ä½¿ç”¨ <code>successors</code>ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç”±æ‰€æœ‰è¿™ç±»æœ€åå­å…ƒç´ ç»„æˆçš„æ•°æ®æµï¼Œå¹¶ä»¥å¸¸è§„æ–¹å¼å¯¹å…¶è¿›è¡Œéå†ã€‚</p>
<p><code>std::iter::successors</code> å‡½æ•°éœ€è¦ä¸€ä¸ªåˆå§‹ç§å­æ¥å¯åŠ¨ã€‚å®ƒè¿˜ä¾èµ–å‰ä¸€ä¸ªå…ƒç´ æ¥ç”Ÿæˆä¸‹ä¸€ä¸ªå…ƒç´ ã€‚æœ‰æ—¶ï¼Œç”Ÿæˆè¿™äº›å…ƒç´ çš„æ¨¡å¼å¹¶ä¸ç®€å•ï¼Œç‰¹åˆ«æ˜¯å½“æˆ‘ä»¬éœ€è¦ç»´æŠ¤ä¸€äº›çŠ¶æ€æ¥æ¨å¯¼åç»­å…ƒç´ æ—¶ã€‚<code>std::iter::from_fn</code> å‡½æ•°å°±æ˜¯ä¸“é—¨ä¸ºè¿™ç§æƒ…å†µè®¾è®¡çš„ã€‚</p>
<p>åœ¨ä¸‹é¢è¿™ä¸ªå–è‡ª <strong>Meilisearch</strong> é¡¹ç›®çš„ç¤ºä¾‹ä¸­ï¼Œ<code>std::iter::from_fn</code> å‡½æ•°ç”¨äºç”Ÿæˆä¸€ä¸ªæ— ç©·çš„éšæœºæ•°åºåˆ—ã€‚è¯¥åºåˆ—æ˜¯ä½¿ç”¨ä¸€ä¸ªéšæœºæ•°ç”Ÿæˆå™¨æ„å»ºçš„ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">rng</span> = rand::rngs::SmallRng::<span class="hljs-title function_ invoke__">from_seed</span>([<span class="hljs-number">0</span>; <span class="hljs-number">32</span>]);

<span class="hljs-keyword">for</span> <span class="hljs-variable">key</span> <span class="hljs-keyword">in</span> std::iter::<span class="hljs-title function_ invoke__">from_fn</span>(|| <span class="hljs-title function_ invoke__">Some</span>(rng.<span class="hljs-title function_ invoke__">gen_range</span>(<span class="hljs-number">0</span>..<span class="hljs-number">256</span>))).<span class="hljs-title function_ invoke__">take</span>(<span class="hljs-number">128</span>) {
    <span class="hljs-comment">//...</span>
}
</code></pre>
<p><code>from_fn</code> å‡½æ•°æä¾›äº†æå¤§çš„çµæ´»æ€§ï¼Œå¯ä»¥æ‰§è¡Œæ„é€ ä¸‹ä¸€ä¸ªå…ƒç´ æ‰€éœ€çš„ä»»ä½•æ“ä½œã€‚</p>
<p>åœ¨æ¥è‡ª <strong>InfluxDb</strong> é¡¹ç›®çš„è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œä½œä¸ºå‚æ•°ä¼ é€’ç»™ <code>from_fn</code> çš„ä¸€ä¸ªå‡½æ•°åŒ…å«ä¸€ä¸ªå¾ªç¯ã€‚è¿™ä¸ªå¾ªç¯ä»ç¼“å†²åŒºè¯»å–æ•°æ®ï¼Œè§£ç æ•°æ®ï¼Œå¹¶åœ¨æ•°æ®å‡†å¤‡å¥½åè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">decode_entries</span>&lt;R: BufRead&gt;(<span class="hljs-keyword">mut</span> r: R) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">Vec</span>&lt;ListEntry&gt;&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">decoder</span> = ListDecoder::<span class="hljs-title function_ invoke__">default</span>();
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">iter</span> = std::iter::<span class="hljs-title function_ invoke__">from_fn</span>(<span class="hljs-keyword">move</span> || {
        <span class="hljs-keyword">loop</span> {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">buf</span> = r.<span class="hljs-title function_ invoke__">fill_buf</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
            <span class="hljs-comment">// ...</span>
        }
        decoder.<span class="hljs-title function_ invoke__">flush</span>().<span class="hljs-title function_ invoke__">transpose</span>()
    });
    iter.<span class="hljs-title function_ invoke__">collect</span>()
}
</code></pre>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå°†é—­åŒ…æ•è·çš„å¯å˜å˜é‡ç§»å…¥ <code>from_fn</code> å‡½æ•°æ˜¯å¸¸è§çš„åšæ³•ã€‚æ¯å½“è¿­ä»£å™¨è¯·æ±‚ä¸‹ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨è¿™ä¸ªé—­åŒ…ã€‚æ¯æ¬¡è°ƒç”¨éƒ½ä¼šæ”¹å˜çŠ¶æ€ï¼Œå› æ­¤éœ€è¦æ‹¥æœ‰è¯¥çŠ¶æ€çš„æ‰€æœ‰æƒã€‚</p>
<h2 data-id="heading-2">åˆå¹¶æ•°æ®æµ</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52ee8072fe994840869cb25bd57d368d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763686212&amp;x-signature=3csipOhlMmgE%2BpaQtMmJP%2Foj%2Boc%3D" alt="6.png" loading="lazy"/></p>
<p>ä¸€æ—¦è·å¾—è¿­ä»£å™¨ï¼Œå®ƒå¹¶ä¸æ€»æ˜¯å¯ä»¥ç«‹å³è¿›è¡Œå…ƒç´ å¤„ç†ã€‚ä½ å¯èƒ½éœ€è¦ï¼š</p>
<ul>
<li>åœ¨å¼€å¤´æˆ–ç»“å°¾æ·»åŠ ä¸€äº›å…ƒç´ ï¼Œä»¥æ–¹ä¾¿ç®—æ³•è¿è¡Œï¼›</li>
<li>åˆå¹¶å¤šä¸ªæ•°æ®æµä»¥ä¾¿è¿›è¡Œç»Ÿä¸€å¤„ç†ï¼›</li>
<li>ç”¨æ¥è‡ªå…¶ä»–æºçš„é¢å¤–ä¿¡æ¯ä¸°å¯Œæ¯ä¸ªå…ƒç´ ã€‚</li>
</ul>
<p>åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œè¿­ä»£å™¨çš„ä¸¤ä¸ªç‰¹æ€§éå¸¸æœ‰ç”¨ï¼š <code>chain</code> å’Œ <code>zip</code> ã€‚<code>std::iter::Iterator::chain</code> æ–¹æ³•å°†ä¸¤ä¸ªè¿­ä»£å™¨è¿æ¥èµ·æ¥ï¼Œåˆ›å»ºä¸€ä¸ªå•ä¸€çš„è¿­ä»£å™¨ï¼Œè¯¥è¿­ä»£å™¨å…ˆäº§ç”Ÿç¬¬ä¸€ä¸ªè¿­ä»£å™¨ä¸­çš„å…ƒç´ ï¼Œç›´åˆ°è€—å°½ï¼Œç„¶åäº§ç”Ÿç¬¬äºŒä¸ªè¿­ä»£å™¨ä¸­çš„å…ƒç´ ã€‚<code>std::iter::Iterator::zip</code> æ–¹æ³•å°†ä¸¤ä¸ªè¿­ä»£å™¨ä¸­çš„å…ƒç´ é…å¯¹ï¼Œå½¢æˆä¸€ä¸ªå…ƒç»„è¿­ä»£å™¨ã€‚</p>
<p>æ­¤å¤–ï¼Œ <code>once</code> å’Œ <code>repeat</code> å‡½æ•°æ—¨åœ¨åˆ†åˆ«ç”Ÿæˆè¿”å›å•ä¸ªæŒ‡å®šå…ƒç´ æˆ–é‡å¤å…ƒç´ çš„æ— é™åºåˆ—çš„è¿­ä»£å™¨ã€‚å®ƒä»¬çš„å¯¹åº”å‡½æ•° <code>once_with</code> å’Œ <code>repeat_with</code> åˆ™æ ¹æ®éœ€è¦åŠ¨æ€åˆ›å»ºå…ƒç´ ã€‚å½“é€šè¿‡ <code>chain</code> æˆ– <code>zip</code> é€‚é…å™¨ä¸å…¶ä»–è¿­ä»£å™¨ç»“åˆä½¿ç”¨æ—¶ï¼Œè¿™äº›å‡½æ•°ç‰¹åˆ«æœ‰ç”¨ã€‚</p>
<p><code>chain</code>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">iter1</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].<span class="hljs-title function_ invoke__">into_iter</span>();
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">iter2</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>].<span class="hljs-title function_ invoke__">into_iter</span>();
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">chained</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">i32</span>&gt; = iter1.<span class="hljs-title function_ invoke__">chain</span>(iter2).<span class="hljs-title function_ invoke__">collect</span>();
<span class="hljs-built_in">println!</span>(<span class="hljs-string">"è¿æ¥: {:?}"</span>, chained);

<span class="hljs-comment">// output</span>
<span class="hljs-comment">// è¿æ¥: [1, 2, 3, 4, 5, 6]</span>
</code></pre>
<p><code>zip</code>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">names</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-string">"Alice"</span>, <span class="hljs-string">"Bob"</span>, <span class="hljs-string">"Charlie"</span>];
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">ages</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">25</span>, <span class="hljs-number">30</span>, <span class="hljs-number">35</span>];
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">paired</span>: <span class="hljs-type">Vec</span>&lt;(&amp;&amp;<span class="hljs-type">str</span>, &amp;<span class="hljs-type">i32</span>)&gt; = names.<span class="hljs-title function_ invoke__">iter</span>().<span class="hljs-title function_ invoke__">zip</span>(ages.<span class="hljs-title function_ invoke__">iter</span>()).<span class="hljs-title function_ invoke__">collect</span>();
<span class="hljs-built_in">println!</span>(<span class="hljs-string">"é…å¯¹: {:?}"</span>, paired);

<span class="hljs-comment">// output</span>
<span class="hljs-comment">// é…å¯¹: [("Alice", 25), ("Bob", 30), ("Charlie", 35)]</span>
</code></pre>
<p><code>once</code>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">single_value</span> = iter::<span class="hljs-title function_ invoke__">once</span>(<span class="hljs-number">42</span>);
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">once_vec</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">i32</span>&gt; = single_value.<span class="hljs-title function_ invoke__">collect</span>();
<span class="hljs-built_in">println!</span>(<span class="hljs-string">"once(42) ç»“æœ: {:?}"</span>, once_vec);

<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">start</span> = iter::<span class="hljs-title function_ invoke__">once</span>(<span class="hljs-number">0</span>);
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">middle</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">end</span> = iter::<span class="hljs-title function_ invoke__">once</span>(<span class="hljs-number">4</span>);
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">combined</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">i32</span>&gt; = start.<span class="hljs-title function_ invoke__">chain</span>(middle).<span class="hljs-title function_ invoke__">chain</span>(end).<span class="hljs-title function_ invoke__">collect</span>();
<span class="hljs-built_in">println!</span>(<span class="hljs-string">"åœ¨ [1,2,3] å‰åæ·»åŠ å…ƒç´ : {:?}"</span>, combined);

<span class="hljs-comment">// output</span>
<span class="hljs-comment">// once(42) ç»“æœ: [42]</span>
<span class="hljs-comment">// åœ¨ [1,2,3] å‰åæ·»åŠ å…ƒç´ : [0, 1, 2, 3, 4]</span>
</code></pre>
<p><code>repeat</code>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">repeated</span>: <span class="hljs-type">Vec</span>&lt;&amp;<span class="hljs-type">str</span>&gt; = iter::<span class="hljs-title function_ invoke__">repeat</span>(<span class="hljs-string">"hello"</span>).<span class="hljs-title function_ invoke__">take</span>(<span class="hljs-number">5</span>).<span class="hljs-title function_ invoke__">collect</span>();
<span class="hljs-built_in">println!</span>(<span class="hljs-string">"é‡å¤ 'hello' 5æ¬¡: {:?}"</span>, repeated);

<span class="hljs-comment">// output</span>
<span class="hljs-comment">// é‡å¤ 'hello' 5æ¬¡: ["hello", "hello", "hello", "hello", "hello"]</span>
</code></pre>
<p>å› ä¸º <code>repeat</code> ä¼šä¸€ç›´äº§å‡ºæ•°æ®ï¼Œæ‰€ä»¥ä¸€èˆ¬æ­é… <code>take</code> ä½¿ç”¨ï¼Œé˜²æ­¢è¿­ä»£å™¨æ— æ³•ç»“æŸã€‚</p>
<p>ç®€å•çš„ä»‹ç»å®Œç”¨æ³•ä¹‹åï¼Œè®©æˆ‘ä»¬çœ‹çœ‹çœŸå®é¡¹ç›®ä¸­çš„åº”ç”¨ã€‚</p>
<p><code>redis-rs</code> è¿™ä¸ªåº“å¦‚ä½•ä½¿ç”¨è¿™ç§ç­–ç•¥æ¥ç®¡ç†ä¸»èŠ‚ç‚¹åŠå…¶å‰¯æœ¬ä¹‹é—´çš„è®¿é—®ï¼š</p>
<pre><code class="hljs language-rust" lang="rust">std::iter::<span class="hljs-title function_ invoke__">once</span>(&amp;<span class="hljs-keyword">self</span>.primary).<span class="hljs-title function_ invoke__">chain</span>(<span class="hljs-keyword">self</span>.replicas.<span class="hljs-title function_ invoke__">iter</span>())
</code></pre>
<p>ä¸Šè¿°ä»£ç ç”Ÿæˆäº†ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå®ƒå¯ä»¥æ¯«æ— å·®åˆ«åœ°æ— ç¼éå†ä¸»èŠ‚ç‚¹åŠå…¶æ‰€æœ‰å‰¯æœ¬ã€‚</p>
<p>æ¥ä¸‹æ¥çœ‹ JavaScript è¿è¡Œæ—¶ <strong>Deno</strong>ï¼Œæˆ‘ä»¬ä¼šå‘ç°å¦ä¸€ä¸ªæå…·è¯´æ˜æ€§çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">self</span>
 .open_docs
 .<span class="hljs-title function_ invoke__">values</span>()
 .<span class="hljs-title function_ invoke__">chain</span>(file_system_docs.docs.<span class="hljs-title function_ invoke__">values</span>())
 .<span class="hljs-title function_ invoke__">filter_map</span>(|doc| { 
 <span class="hljs-comment">//...</span>
</code></pre>
<p>æˆ‘ä»¬æœ‰å·²æ‰“å¼€çš„æ–‡æ¡£ï¼Œä¹Ÿæœ‰å­˜å‚¨åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡æ¡£ï¼Œè¿™éƒ½éœ€è¦è¿›è¡Œç»Ÿä¸€å¤„ç†ã€‚</p>
<p>è‡³äºä½¿ç”¨ <code>zip</code>ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ <strong>Deno</strong> å°† 16 å­—èŠ‚çš„è¾“å…¥å—åŠ å¯†ä¸ºåŒ¹é…çš„è¾“å‡ºå—çš„æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-title function_ invoke__">for</span> (input, output) <span class="hljs-keyword">in</span> input.<span class="hljs-title function_ invoke__">chunks</span>(<span class="hljs-number">16</span>).<span class="hljs-title function_ invoke__">zip</span>(output.<span class="hljs-title function_ invoke__">chunks_mut</span>(<span class="hljs-number">16</span>)) {
  encryptor.<span class="hljs-title function_ invoke__">encrypt_block_b2b_mut</span>(input.<span class="hljs-title function_ invoke__">into</span>(), output.<span class="hljs-title function_ invoke__">into</span>());
}
</code></pre>
<p>ä¸å¯å˜çš„è¾“å…¥å—ä¸ç›¸åº”çš„å¯å˜è¾“å‡ºå—è¿›è¡Œ <code>zip</code> æ“ä½œï¼Œè¿™æ ·åŠ å¯†å™¨å§‹ç»ˆçŸ¥é“å°†åŠ å¯†æ•°æ®æ”¾åœ¨ä½•å¤„ã€‚</p>
<p>Rust ä»£ç æ£€æŸ¥å·¥å…· <strong>Clippy</strong> ä½¿ç”¨ <code>zip</code> å’Œ <code>repeat_with</code> æ¥ç”ŸæˆæŒ‰é™åºæ’åˆ—çš„å…ƒç´ ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">i</span> = end_search_start;
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">end_begin_eq</span> = block.stmts[block.stmts.<span class="hljs-title function_ invoke__">len</span>() - end_search_start..]
    .<span class="hljs-title function_ invoke__">iter</span>()
    .<span class="hljs-title function_ invoke__">zip</span>(iter::<span class="hljs-title function_ invoke__">repeat_with</span>(<span class="hljs-keyword">move</span> || {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">x</span> = i;
        i -= <span class="hljs-number">1</span>;
        x
    }))
</code></pre>
<p>è¯·æ³¨æ„ï¼Œ<code>repeat_with</code> é—­åŒ…ä¼šè¢«å¤šæ¬¡æ‰§è¡Œï¼Œæ¯æ¬¡éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°å…ƒç´ ã€‚</p>
<p>è¿˜æœ‰ <code>zip</code> çš„å¦ä¸€ç§å˜ä½“ï¼š<code>std::iter::zip</code> å‡½æ•°ã€‚å®ƒæ¥å—ä¸¤ä¸ªå®ç°äº† <code>IntoIterator</code> ç‰¹å¾çš„å‚æ•°ï¼Œå°†å®ƒä»¬è½¬æ¢ä¸ºè¿­ä»£å™¨ï¼Œç„¶åå°†å®ƒä»¬è¿›è¡Œ <code>zip</code> æ“ä½œã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨ <strong>Ruff</strong> ä¸­ï¼Œè¿™ä¸ªå‡½æ•°ç”¨äºå¯¹å‘é‡å’Œåˆ‡ç‰‡çš„å…ƒç´ è¿›è¡Œ <code>zip</code> æ“ä½œï¼Œè€Œæ— éœ€äº‹å…ˆå¼•ç”¨ç›¸åº”çš„è¿­ä»£å™¨ï¼š</p>
<pre><code class="hljs language-rust" lang="rust">std::iter::<span class="hljs-title function_ invoke__">zip</span>(&amp;tuple.elts, args)
</code></pre>
<p><code>zip</code> é€‚é…å™¨æœ‰ä¸€ä¸ªä¼šæ¶ˆè€—è¿­ä»£å™¨çš„å¯¹åº”æ–¹æ³•ï¼Œå³ <code>Iterator::unzip</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä½œç”¨äºæˆå¯¹å…ƒç´ çš„è¿­ä»£å™¨ï¼Œå°†å…¶ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªç»„ä»¶åŒæ—¶æ”¶é›†åˆ°ä¸¤ä¸ªå•ç‹¬çš„å®¹å™¨ä¸­ã€‚</p>
<p>åœ¨ç”¨äºå¤šå¹³å°éƒ¨ç½²çš„åº”ç”¨ç¨‹åºæ¡†æ¶ <strong>Tauri</strong> çš„å®ç°ä¸­ï¼Œå¯ä»¥çœ‹åˆ°è¿™ç§ä¼ ç»Ÿçš„ç”¨ä¾‹ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> (paths, attrs): (<span class="hljs-type">Vec</span>&lt;Path&gt;, <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">Vec</span>&lt;Attribute&gt;&gt;) = command_defs
  .<span class="hljs-title function_ invoke__">into_iter</span>()
  .<span class="hljs-title function_ invoke__">map</span>(|def| (def.path, def.attrs))
  .<span class="hljs-title function_ invoke__">unzip</span>();
</code></pre>
<p>æˆ‘ä»¬æœ‰ä¸€ä¸ªç»“æ„ä½“å‘é‡ï¼Œæ¯ä¸ªç»“æ„ä½“æœ‰ä¸¤ä¸ªæˆå‘˜ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å°†å…¶æ‹†åˆ†æˆå•ç‹¬çš„å‘é‡ã€‚å°†æ„å»ºæˆå¯¹çš„ <code>map</code> ä¸ <code>unzip</code> ç»“åˆèµ·æ¥å¯ä»¥å®Œæˆæ­¤ä»»åŠ¡ã€‚</p>
<h2 data-id="heading-3">å¤„ç†æ•°æ®æµçš„ä¸åŒéƒ¨åˆ†</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30faf236b5d043e7a193beeaf22b5729~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763686212&amp;x-signature=XJ5jZw9vCn6%2F8TE4TQzcYtlA1ak%3D" alt="7.png" loading="lazy"/></p>
<p>åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„ä»£ç éµå¾ªçº¿æ€§æµç¨‹ï¼šè·å–æˆ–åˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨ï¼Œåº”ç”¨å‡ ä¸ªå¤„ç†æ­¥éª¤ï¼Œæœ€åä½¿ç”¨è¯¥è¿­ä»£å™¨ã€‚ç„¶è€Œï¼Œæœ‰äº›æƒ…å†µä¸‹è¿™ç§çº¿æ€§æ–¹æ³•å¹¶ä¸è¶³å¤Ÿï¼Œç‰¹åˆ«æ˜¯å½“æˆ‘ä»¬å¸Œæœ›ä»¥ä¸åŒæ–¹å¼å¤„ç†æ•°æ®æµçš„ä¸åŒéƒ¨åˆ†æ—¶ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä»¥ç‰¹åˆ«çš„æ–¹å¼å¤„ç†å¼€å¤´çš„ä¸€ç»„å…ƒç´ å°±éœ€è¦ç‰¹å®šçš„æ“ä½œï¼š</p>
<ul>
<li>å°†è¿­ä»£å™¨ç»‘å®šåˆ°å±€éƒ¨å˜é‡æˆ–å­˜å‚¨åœ¨ç»“æ„ä½“çš„æˆå‘˜ä¸­ã€‚</li>
<li>ç¡®ä¿åœ¨å¤„ç†å¼€å¤´çš„ä¸€ç»„å…ƒç´ æ—¶ï¼Œä¸è½¬ç§»è¿­ä»£å™¨çš„æ‰€æœ‰æƒã€‚</li>
</ul>
<p>è™½ç„¶ç¬¬ä¸€ä¸ªæ“ä½œç›¸å¯¹ç®€å•ï¼ˆä¸è¿‡å¯èƒ½éœ€è¦å°†å˜é‡è®¾ä¸ºå¯å˜çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨æ˜¾å¼è°ƒç”¨ <code>next()</code> çš„æ—¶å€™ï¼‰ï¼Œä½†ç¬¬äºŒä¸ªæ“ä½œéœ€è¦æ›´ç»†è‡´åœ°äº†è§£å¦‚ä½•ä½¿ç”¨ <code>by_ref</code> é€‚é…å™¨ã€‚</p>
<p>è¯·çœ‹ä»¥ä¸‹ä»£ç ç‰‡æ®µï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7bbcb68547ec4bee98f53e81a189992f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763686212&amp;x-signature=n6UrBsm1SBfR%2BNRTuiLssb0WF1w%3D" alt="1.webp" loading="lazy"/></p>
<p>æˆ‘ä»¬æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸ºå…¶æ‰€æœ‰è¡Œå‡†å¤‡ä¸€ä¸ªè¿­ä»£å™¨ã€‚æˆ‘ä»¬è¯»å–ç¬¬ä¸€è¡Œ â€”â€” æ­¤æ“ä½œè¦æ±‚ <code>lines</code> å˜é‡æ˜¯å¯å˜çš„ã€‚æˆ‘ä»¬ç»§ç»­è¯»å–è¡Œï¼Œç›´åˆ°é‡åˆ°ç©ºè¡Œï¼Œç„¶åç»§ç»­è¯»å–å‰©ä½™çš„è¡Œã€‚<code>take_while</code> é€‚é…å™¨å¸¦æ¥äº†ä¸€ä¸ªé—®é¢˜ï¼Œå®ƒä¼šè·å– <code>lines</code> è¿­ä»£å™¨çš„æ‰€æœ‰æƒï¼Œä½¿æˆ‘ä»¬æ— æ³•è¿›ä¸€æ­¥ä½¿ç”¨å®ƒã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå½“é¦–æ¬¡å°†è¿­ä»£å™¨ä¸è¿­ä»£å™¨é€‚é…å™¨ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»æä¾›å¯¹è¯¥è¿­ä»£å™¨çš„å¯å˜å¼•ç”¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">rest_of_the_first_group</span> = lines
   .<span class="hljs-title function_ invoke__">by_ref</span>()
   .<span class="hljs-title function_ invoke__">take_while</span>(|l| !l.<span class="hljs-title function_ invoke__">is_empty</span>())
   .collect::&lt;<span class="hljs-type">Vec</span>&lt;_&gt;&gt;();
</code></pre>
<p>æ³¨æ„è¿™é‡Œå¯¹ <code>by_ref</code> æ–¹æ³•çš„è°ƒç”¨ã€‚</p>
<p>ä»å®ƒçš„å®ç°å¯ä»¥çœ‹å‡ºï¼Œå…¶ä¸»è¦åŠŸèƒ½æ˜¯ä¼ é€’å¯å˜å¼•ç”¨ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">by_ref</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">Self</span>
<span class="hljs-keyword">where</span>
   <span class="hljs-keyword">Self</span>: <span class="hljs-built_in">Sized</span>,
{
   <span class="hljs-keyword">self</span>
}
</code></pre>
<p>æˆ‘ä»¬çœ‹ä¸€ä¸ªæ›´ç®€å•çš„ä¾‹å­ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77d4e07d6a5444ce8cb0523629b21bd8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763686212&amp;x-signature=bk05PNMIRW8BeLsso4QtYYwiqhs%3D" alt="2.png" loading="lazy"/></p>
<p>å› ä¸º <code>take</code> ä¼šæ¶ˆè€—è¿­ä»£å™¨ï¼ˆå³è·å¾—è¿­ä»£å™¨çš„æ‰€æœ‰æƒï¼‰ï¼Œæ‰€ä»¥ <code>iter</code> ä¸èƒ½å†åç»­ä½¿ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0dc93946de04b1a9e907641a5f6e666~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763686212&amp;x-signature=IGYMaUMIOhdZnj%2BTu7ItK9JOBnQ%3D" alt="3.png" loading="lazy"/></p>
<p>åªéœ€è¦ç®€å•çš„åŠ å…¥ <code>by_ref</code>ï¼Œè¯¥é—®é¢˜ä¾¿è¿åˆƒè€Œè§£ã€‚</p>
<p>æˆ‘ä»¬çœ‹ä¸€ä¸‹çœŸå®é¡¹ç›®ä¸­çš„ä¾‹å­ï¼Œä»¥ä¸‹æ˜¯æ¥è‡ª <strong>Ruff</strong> æºä»£ç çš„ç®€åŒ–ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">lines</span> = ...

<span class="hljs-keyword">for</span> <span class="hljs-variable">line</span> <span class="hljs-keyword">in</span> lines.<span class="hljs-title function_ invoke__">by_ref</span>() {
   <span class="hljs-keyword">if</span> ... {
       ...
       <span class="hljs-keyword">break</span>;
   }
}

<span class="hljs-keyword">for</span> <span class="hljs-variable">line</span> <span class="hljs-keyword">in</span> lines {
   <span class="hljs-keyword">if</span> ... {
       ...
       <span class="hljs-keyword">break</span>;
   }
}
</code></pre>
<p>æˆ‘ä»¬å…ˆå¤„ç†ç¬¬ä¸€ç»„å…ƒç´ ï¼Œç„¶åå¤„ç†å‰©ä½™çš„å…ƒç´ ã€‚<code>by_ref</code> æ–¹æ³•ä½¿æˆ‘ä»¬èƒ½å¤Ÿä¿ç•™å¯¹ <code>lines</code> è¿­ä»£å™¨çš„æ‰€æœ‰æƒã€‚</p>
<h2 data-id="heading-4">è°ƒè¯•ç®¡é“</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ceba4a8a136463c8c1e1102510731ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763686212&amp;x-signature=qD%2BMgLOwLRk645EkiTk1rzSm2MQ%3D" alt="8.png" loading="lazy"/></p>
<p>æˆ‘ä»¬æ¥çœ‹ä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">chars</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-string">'A'</span>, <span class="hljs-string">'B'</span>, <span class="hljs-string">'C'</span>, <span class="hljs-string">'D'</span>, <span class="hljs-string">'E'</span>];
<span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">ix</span> = <span class="hljs-number">0</span>;
chars
   .<span class="hljs-title function_ invoke__">iter</span>()
   .<span class="hljs-title function_ invoke__">map</span>(|&amp;ch| {
       ix += <span class="hljs-number">1</span>;
       (ix, ch)
   })
   .<span class="hljs-title function_ invoke__">rev</span>()
   .<span class="hljs-title function_ invoke__">for_each</span>(|x| <span class="hljs-built_in">println!</span>(<span class="hljs-string">"PRINT: {x:?}"</span>));
</code></pre>
<p><em>å„ä½å¯ä»¥å…ˆçŒœæµ‹ä¸€ä¸‹è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</em></p>
<p>è¦æƒ³çŸ¥é“è¿™ç§æƒ…å†µä¸‹çš„è¾“å‡ºï¼Œéœ€è¦ç†è§£æ˜ å°„ä¸­çš„å‰¯ä½œç”¨ä¸è¿­ä»£å™¨ç®¡é“ä¸­ <code>rev</code> é€‚é…å™¨çš„ä½¿ç”¨ä¹‹é—´çš„ç›¸äº’ä½œç”¨ã€‚è¿™é‡Œçš„å…³é”®æ˜¯è­¦å‘Šä½ ä¸è¦å°†æ¶‰åŠå‰¯ä½œç”¨ï¼ˆä¾‹å¦‚è¯»å–å’Œä¿®æ”¹å˜é‡ï¼‰çš„æ˜ å°„æ“ä½œä¸ <code>rev</code> é€‚é…å™¨æ··åˆä½¿ç”¨ã€‚æ— è®ºè¿­ä»£å™¨ç®¡é“ä¸­ <code>rev</code> å’Œ <code>map</code> çš„å‡ºç°é¡ºåºå¦‚ä½•ï¼Œè¾“å‡ºéƒ½æ˜¯ç›¸åŒçš„ï¼Œè¿™è¯´æ˜äº†åœ¨ç»„åˆè¿™äº›æ“ä½œæ—¶çš„å¤æ‚æ€§ä»¥åŠå¯èƒ½å‡ºç°æ„å¤–ç»“æœçš„æƒ…å†µï¼š</p>
<pre><code class="hljs language-txt" lang="txt">PRINT: (1, 'E')
PRINT: (2, 'D')
PRINT: (3, 'C')
PRINT: (4, 'B')
PRINT: (5, 'A')
</code></pre>
<p>ä¹‹æ‰€ä»¥è¾“å‡ºæ˜¯è¿™æ ·çš„ï¼Œæ ¹æœ¬åŸå› åœ¨äºè¿­ä»£å™¨å›ºæœ‰çš„æƒ°æ€§ã€‚<code>map</code> ä¸­çš„é—­åŒ…ä¼šåœ¨ <code>for_each</code> ä¸­çš„æ‰“å°æ“ä½œä¹‹å‰ç«‹å³æ‰§è¡Œã€‚åˆ°è¿™ä¸ªé˜¶æ®µï¼Œæ‰€æœ‰å…ƒç´ å·²ç»ä»¥é€†åºå‘ˆç°ã€‚å› æ­¤ï¼ŒåŸå§‹å‘é‡çš„æœ€åä¸€ä¸ªå…ƒç´ è¢«èµ‹ä»¥ <code>ix</code> çš„åˆå§‹å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“è¿è¡Œ <code>map</code> æ—¶ï¼Œå…ƒç´ å·²ç»æ˜¯é€†åºäº†ã€‚</p>
<p>è®©æˆ‘ä»¬è®°ä½è¿™äº›æ ¸å¿ƒè¦ç‚¹ï¼š</p>
<ol>
<li>æƒ°æ€§æ±‚å€¼ï¼š<code>map</code> ä¸ä¼šæå‰æ‰§è¡Œ</li>
<li><code>rev()</code> æ”¹å˜è¿­ä»£é¡ºåºï¼šä»åå¾€å‰éå†</li>
<li>å‰¯ä½œç”¨çš„é¡ºåºï¼š<code>ix += 1</code> æŒ‰ç…§ <code>rev()</code> åçš„é¡ºåºæ‰§è¡Œ</li>
<li><code>for_each</code> æ¶ˆè´¹è¿­ä»£å™¨ï¼šæŒ‰ç…§å½“å‰è¿­ä»£é¡ºåºï¼ˆå·²åè½¬ï¼‰é€ä¸ªå¤„ç†</li>
</ol>
<p>å°è¯•ä¸€æ¬¡è°ƒè¯•ä¼šå¾ˆå¿«å‘ç°è¿™ç§è¡Œä¸ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a80f4979f5b14458af1ed38ed98d0a1b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763686212&amp;x-signature=jcD0yelW07A7GDJXz7n1RotbJ3k%3D" alt="4.webp" loading="lazy"/></p>
<p>å¦‚æœä½ æ›´å–œæ¬¢åˆ†æç¨‹åºè¾“å‡ºï¼Œé‚£ä¹ˆ <code>inspect</code> è¿­ä»£å™¨é€‚é…å™¨åœ¨è¿™ç§æƒ…å†µä¸‹æ˜¯å¦ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„å·¥å…·ã€‚</p>
<pre><code class="hljs language-rust" lang="rust">chars
   .<span class="hljs-title function_ invoke__">iter</span>()
   .<span class="hljs-title function_ invoke__">inspect</span>(|ch| <span class="hljs-built_in">println!</span>(<span class="hljs-string">"INSPECT: {ch}"</span>))
   .<span class="hljs-title function_ invoke__">map</span>(|&amp;ch| {
       ix += <span class="hljs-number">1</span>;
       (ix, ch)
   })
   .<span class="hljs-title function_ invoke__">rev</span>()
   .<span class="hljs-title function_ invoke__">for_each</span>(|x| <span class="hljs-built_in">println!</span>(<span class="hljs-string">"PRINT: {x:?}"</span>));
</code></pre>
<p>è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-txt" lang="txt">INSPECT: E
PRINT: (1, 'E')
INSPECT: D
PRINT: (2, 'D')
// ... 
</code></pre>
<p>åœ¨å…¶ä»–è¿­ä»£å™¨é€‚é…å™¨ä¹‹é—´æ”¾ç½®å¤šä¸ª <code>inspect</code> è°ƒç”¨ï¼Œå¯¹äºè·Ÿè¸ªå¤„ç†æµç¨‹ä»¥åŠæ­£ç¡®ç†è§£æ“ä½œé¡ºåºå¾ˆæœ‰å¸®åŠ©ã€‚å¦‚å‰æ‰€è¿°ï¼Œåœ¨æ›´å¤æ‚çš„åœºæ™¯ä¸­ï¼Œå°†å¤„ç†æµç¨‹åˆ’åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹çš„å‡½æ•°ï¼Œä¹Ÿæœ‰åŠ©äºæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç®¡ç†æ€§ã€‚</p>
<h2 data-id="heading-5">æ€»ç»“</h2>
<p>è¯¥ç¯‡æ–‡ç« æ¢è®¨äº†ä½¿ç”¨ Rust è¿­ä»£å™¨çš„å¾ˆå¤šåœºæ™¯ã€‚é€šè¿‡æ¥è‡ª <strong>Ruff</strong>ã€<strong>Deno</strong>ã€<strong>Bevy</strong>ã€<strong>Clippy</strong>ã€<strong>redis-rs</strong>ã€<strong>Tauri</strong>ã€<strong>Meilisearch</strong> å’Œ <strong>Bloop</strong> ç­‰å®é™…é¡¹ç›®çš„ç¤ºä¾‹ä»¥åŠç®€å•çš„è‡ªæµ‹é¡¹ç›®ï¼Œæˆ‘ä»¬äº†è§£äº†è¿­ä»£å™¨å¦‚ä½•ä¾¿åˆ©è¯¸å¦‚æ„å»ºå¯è¿­ä»£å¯¹è±¡ã€é“¾å¼æ“ä½œã€åˆå¹¶ä»¥åŠæ•°æ®è½¬æ¢ç­‰æ“ä½œã€‚</p>
<p>æˆ‘ä»¬ç€é‡ä»‹ç»äº†å¤„ç†è¿­ä»£å™¨çš„æŠ€å·§ï¼ŒåŒ…æ‹¬ä½¿ç”¨ <code>by_ref</code> æ–¹æ³•æ¥ä¿ç•™æ‰€æœ‰æƒå¹¶é¿å…è¿‡æ—©æ¶ˆè€—è¿­ä»£å™¨ã€‚</p>
<p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜è®¨è®ºäº†ç†è§£è¿­ä»£å™¨æƒ°æ€§ä»¥åŠä¸ºè°ƒè¯•å’Œåˆ†æè€Œåˆç†æ”¾ç½® <code>inspect</code> è°ƒç”¨çš„é‡è¦æ€§ã€‚åœ¨æ‰€æœ‰ç¤ºä¾‹ä¸­ï¼Œ<strong>RustRover</strong> çš„ä»£ç åˆ†æå’Œè°ƒè¯•å™¨å¸®åŠ©æˆ‘ä»¬ç†è§£ä»£ç å¹¶å¿«é€Ÿè§£å†³å‡ºç°çš„ä»»ä½•é—®é¢˜ã€‚</p>
<p>æ€»ä½“è€Œè¨€ï¼Œè¿™äº›æŠ€å·§èƒ½è®©æˆ‘ä»¬ä¸ºå„ç§åº”ç”¨ç¨‹åºç¼–å†™åœ°é“ä¸”é«˜æ•ˆçš„ Rust ä»£ç ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥äº†è§£RUSTè¿­ä»£å™¨ - æƒ°æ€§ã€å¯ç»„åˆçš„å¤„ç†]]></title>    <link>https://juejin.cn/post/7572095192418779163</link>    <guid>https://juejin.cn/post/7572095192418779163</guid>    <pubDate>2025-11-14T01:49:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572095192418779163" data-draft-id="7572132100360568878" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥äº†è§£RUSTè¿­ä»£å™¨ - æƒ°æ€§ã€å¯ç»„åˆçš„å¤„ç†"/> <meta itemprop="keywords" content="åç«¯,Rust"/> <meta itemprop="datePublished" content="2025-11-14T01:49:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xuejianxinokok"/> <meta itemprop="url" content="https://juejin.cn/user/2115899365524222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥äº†è§£RUSTè¿­ä»£å™¨ - æƒ°æ€§ã€å¯ç»„åˆçš„å¤„ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2115899365524222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xuejianxinokok
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T01:49:21.000Z" title="Fri Nov 14 2025 01:49:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è¿­ä»£å™¨ - æ·±å…¥äº†è§£æƒ°æ€§ã€å¯ç»„åˆçš„å¤„ç†</h2>
<p>åœ¨æœ¬ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨è¿­ä»£å™¨ï¼Œå°è¯•å±•ç¤ºå…¶å¤„ç†æ•°æ®çš„æƒ°æ€§æ±‚å€¼å’Œå¯ç»„åˆæ€§ã€‚</p>
<p>è¿­ä»£å™¨æ˜¯ Rust æœ€å¼ºå¤§çš„æŠ½è±¡ä¹‹ä¸€ï¼Œå®ƒæä¾›äº†ä¸€ç§é›¶æˆæœ¬çš„æ–¹å¼æ¥å¤„ç†æ•°æ®åºåˆ—ã€‚</p>
<p>å®ƒä»¬ç»“åˆäº†å‡½æ•°å¼ç¼–ç¨‹çš„ä¼˜é›…å’Œç³»ç»Ÿç¼–ç¨‹çš„æ•ˆç‡ï¼Œç†è§£å®ƒä»¬å¯¹äºç¼–å†™åœ°é“çš„ Rust ä»£ç è‡³å…³é‡è¦ã€‚</p>
<hr/>
<h3 data-id="heading-1">The Iterator Trait</h3>
<p>Rust è¿­ä»£å™¨ç³»ç»Ÿçš„æ ¸å¿ƒæ˜¯ <strong>Iterator</strong> traitï¼Œå®ƒå®šä¹‰äº†å¦‚ä½•ç”Ÿæˆä¸€ç³»åˆ—å€¼ã€‚</p>
<p>è¿™ä¸ªç‰¹æ€§å‡ºå¥‡åœ°ç®€å•ï¼Œåªéœ€è¦å®ç°ä¸€ä¸ªæ–¹æ³•ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4bdb3fb261304861958b5a0085606ee1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=lC1aPRCdZ7P3WzeHps8o2yjpR1Y%3D" alt="" loading="lazy"/></p>
<p><strong>Item</strong> å…³è”çš„ç±»å‹æŒ‡å®šè¿­ä»£å™¨ç”Ÿæˆçš„å€¼çš„ç±»å‹ã€‚</p>
<p>è¿™æ˜¯ä¸€ç§<strong>é€šç”¨å…³è”ç±»å‹ (GAT,Generic Associated Type)</strong> çš„å½¢å¼ ï¼Œå…è®¸æ¯ä¸ªè¿­ä»£å™¨å®ç°å®šä¹‰è‡ªå·±çš„itemç±»å‹ï¼Œè€Œæ— éœ€ä½¿ç”¨è€…æ˜¾å¼æŒ‡å®šã€‚</p>
<p><code>next()</code> æ–¹æ³•æ‰æ˜¯å…³é”®æ‰€åœ¨â€”â€”å®ƒä¸ºåºåˆ—ä¸­çš„æ¯ä¸ªå…ƒç´ è¿”å› <code>Some(value)</code> ï¼Œ å½“è¿­ä»£å™¨è€—å°½æ—¶è¿”å› <code>None</code> ã€‚</p>
<p>ä¸€ä¸ªç®€å•çš„è‡ªå®šä¹‰è¿­ä»£å™¨ç¤ºä¾‹å¯ä»¥æ˜¯ 0 åˆ° max çš„è®¡æ•°å™¨ã€‚</p>
<p>è®©æˆ‘ä»¬åˆ›å»ºç»“æ„ä½“å¹¶ä¸ºå…¶å®ç° Iterator traitã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0539a3d73e6e4b4a8d00d22c6847bcbb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=ujXqq6kJejiKxKhvFGGWUOaei6g%3D" alt="" loading="lazy"/></p>
<p>å¥½äº†ï¼Œç°åœ¨å¼€å§‹ä½¿ç”¨å®ƒå§ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf1fc20835fb4b04a28c3f9b95fb612e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=9BxanboYkPu%2Bzsmkcs7SubLmSog%3D" alt="" loading="lazy"/></p>
<p>å¦‚ä¸Šå›¾ï¼ŒIterator ç‰¹æ€§æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æŠ½è±¡ï¼Œå®ƒä½¿æˆ‘ä»¬èƒ½å¤Ÿä»¥çµæ´»é«˜æ•ˆçš„æ–¹å¼å¤„ç†æ•°æ®åºåˆ—ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»äº†è§£äº† Iterator trait çš„åŸºç¡€çŸ¥è¯†ï¼Œè®©æˆ‘ä»¬æ·±å…¥äº†è§£ Rust çš„è¿­ä»£å™¨ç³»ç»Ÿã€‚</p>
<hr/>
<h3 data-id="heading-2">è¿­ä»£å™¨æœ‰ä½•ç‰¹æ®Šä¹‹å¤„ï¼Ÿ</h3>
<p>Rust ä¸­çš„è¿­ä»£å™¨æœ¬è´¨ä¸Šæ˜¯<strong>æƒ°æ€§çš„â€”â€”å®ƒä»¬åœ¨è¢«ä½¿ç”¨ä¹‹å‰ä»€ä¹ˆä¹Ÿä¸åš</strong>ã€‚</p>
<p><strong>è¿™ç§æƒ°æ€§ä½¿å¾—ç¼–è¯‘å™¨èƒ½å¤Ÿå°†è¿­ä»£å™¨é“¾ä¼˜åŒ–æˆç´§å‡‘ã€é«˜æ•ˆçš„å¾ªç¯ï¼Œå…¶æ€§èƒ½å¯ä¸æ‰‹å†™çš„è¿‡ç¨‹ä»£ç ç›¸åª²ç¾</strong>ã€‚</p>
<p>å½“é“¾å¼è°ƒç”¨ map()ã€filter() æˆ– fold() ç­‰æ“ä½œæ—¶ï¼ŒRust åªä¼šå¯¹æ•°æ®è¿›è¡Œ<strong>ä¸€æ¬¡éå†</strong>ï¼Œä»è€Œç¡®ä¿é«˜æ•ˆçš„å¤„ç†ã€‚</p>
<p>Rust ä¸­çš„è¿­ä»£å™¨ç”± <code>Iterator</code> trait å®šä¹‰ï¼Œè¯¥ trait åªéœ€è¦å®ç°ä¸€ä¸ªæ–¹æ³•ï¼š<code>next()</code>ã€‚æ­¤æ–¹æ³•æŒ‡å®šå¦‚ä½•æ¨è¿›è¿­ä»£å™¨å¹¶è¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚</p>
<p>è¿™ç§ç®€æ´æ€§ä½¿å¾—ä»»ä½•ç±»å‹éƒ½èƒ½è½»æ¾å®ç°è¿­ä»£ã€‚å®ƒè¿˜èµ‹äºˆæˆ‘ä»¬çµæ´»æ€§ï¼Œå¯ä»¥æ ¹æ®éœ€è¦æŒ‡å®šè¿­ä»£çš„å†…éƒ¨é€»è¾‘ï¼Œä»è€Œå°†å…¶ä¸é¢å‘ç”¨æˆ·çš„ API è§£è€¦ã€‚</p>
<hr/>
<h3 data-id="heading-3">åˆ›å»ºè¿­ä»£å™¨çš„ä¸‰ç§æ–¹æ³•</h3>
<p>Rust æä¾›äº†ä¸‰ç§ä»é›†åˆåˆ›å»ºè¿­ä»£å™¨çš„ä¸»è¦æ–¹æ³•ï¼Œæ¯ç§æ–¹æ³•éƒ½æä¾›äº†<strong>ä¸åŒçš„æ‰€æœ‰æƒè¯­ä¹‰</strong>ã€‚</p>
<p>è¿™äº›æ–¹æ³•åœ¨å¤„ç†å€Ÿç”¨å’Œæ‰€æœ‰æƒæ–¹é¢æœ‰æ‰€ä¸åŒï¼Œå¯ä»¥æ ¹æ®ä½¿ç”¨æƒ…å†µé€‰æ‹©åˆé€‚çš„æ–¹æ³•ã€‚</p>
<blockquote>
<p><strong>iter()</strong> æ–¹æ³•å…è®¸éå†é›†åˆï¼ŒåŒæ—¶å°†æ¯ä¸ªå…ƒç´ ä½œä¸º<strong>ä¸å¯å˜å¼•ç”¨å€Ÿç”¨</strong>ã€‚</p>
<p>è¿™ç§æ–¹æ³•ç¡®ä¿åªè¯»è®¿é—®ï¼Œé˜²æ­¢åœ¨éå†è¿‡ç¨‹ä¸­æ„å¤–ä¿®æ”¹ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f6f5d6b8fb24af6af232dbe800d5758~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=ad2kJSDvbPnL1%2BXQmIT9Egtem4A%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><strong>into_iter()</strong> æ–¹æ³•å…è®¸éå†é›†åˆï¼ŒåŒæ—¶ move æ¯ä¸ªå…ƒç´ çš„æ‰€æœ‰æƒ,è¿™å°±æ˜¯ <code>into</code>çš„è¯­ä¹‰ã€‚</p>
<p>è¿™ç§æ–¹æ³•å¯ä»¥é«˜æ•ˆåœ°ä½¿ç”¨é›†åˆï¼Œ<strong>é¿å…ä¸å¿…è¦çš„å…‹éš†ï¼Œå› ä¸ºå®ƒç›´æ¥å°†å…ƒç´ ç§»åŠ¨åˆ°è¿­ä»£å™¨ä¸­</strong>ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a38492575eb449cadd66cab1370119b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=92rzhUU1MxSV3R%2F6IsPTYAqDDNY%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><strong>iter_mut()</strong> æ–¹æ³•å…è®¸ä½ éå†é›†åˆï¼ŒåŒæ—¶ä¸ºæ¯ä¸ªå…ƒç´ æä¾›å¯å˜å¼•ç”¨ã€‚</p>
<p>è¿™æ ·å°±å¯ä»¥åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ç›´æ¥ä¿®æ”¹å…ƒç´ ï¼Œè¿™å¯¹äºæ— éœ€åˆ›å»ºæ–°é›†åˆå³å¯è¿›è¡Œå°±åœ°æ›´æ–°éå¸¸æœ‰ç”¨ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a75d7c134b247948adfad2eb0377669~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=t4Ske0RheL8%2FtmMTtaxTlb2OKuM%3D" alt="" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-4">Transforming Iterators  (è½¬æ¢è¿­ä»£å™¨)</h3>
<p>Rust ä¸­çš„è¿­ä»£å™¨æä¾›äº†å¤šç§è½¬æ¢é¡¹çš„æ–¹æ³•ï¼Œä»è€Œå®ç°äº†å¼ºå¤§çš„æ•°æ®å¤„ç†ç®¡é“ã€‚</p>
<p>ä¾‹å¦‚ï¼Œ <strong>map(fn)</strong> å’Œ <strong>filter(fn)</strong> ç­‰æ–¹æ³•å…è®¸å¼€å‘äººå‘˜å°†å‡½æ•°åº”ç”¨äºæ¯ä¸ªå…ƒç´ æˆ–é€‰æ‹©æ€§åœ°å¤„ç†æ•°æ®ï¼Œä»è€Œç®€åŒ–å¤æ‚çš„æ“ä½œè€Œæ— éœ€æ‰‹åŠ¨å¾ªç¯ã€‚</p>
<blockquote>
<p><strong>map(fn)</strong> ä¼šç”Ÿæˆä¸€ä¸ªè¿­ä»£å™¨ï¼Œè¯¥è¿­ä»£å™¨ä¼šå°†ä¼ å…¥çš„å‡½æ•°åº”ç”¨äºæ¯ä¸ªå…ƒç´ ï¼š</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f465e72d1ba4fbc8b744840912788c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=j0u7ZDvHwQk1ATbc6OzSh56P1tA%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><strong>filter(fn)</strong> ç”Ÿæˆä¸€ä¸ªè¿­ä»£å™¨ï¼Œç¡®ä¿åªè¿­ä»£æ»¡è¶³è°“è¯(predicate )çš„å…ƒç´ ï¼š</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ef62fb941274f38be1da1908eaa9db7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=R%2FId6q2vf1mebpSI31rbwgoP0AM%3D" alt="" loading="lazy"/></p>
<p>å½“ç„¶ï¼Œé€‚é…å™¨å¾ˆå®¹æ˜“ä¸²è”èµ·æ¥ï¼Œä»è€Œå¯ä»¥æ„å»ºæ›´å¤æ‚çš„ç®¡é“ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abc07af3c88e475c8c1d7ea24aa659bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=Jcuu%2FeDaX0xCfy%2F9ceSYKZZT7ao%3D" alt="" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-5">Consuming Iterators  (æ¶ˆè´¹è¿­ä»£å™¨)</h3>
<p>ç”±äº Rust ä¸­çš„è¿­ä»£å™¨å…·æœ‰<strong>æƒ°æ€§</strong>ï¼Œå› æ­¤éœ€è¦å°†å…¶è½¬æ¢ä¸ºç‰¹å®šç±»å‹æ‰èƒ½äº§ç”Ÿç»“æœï¼Œè¿™é€šå¸¸ä½¿ç”¨è¯¸å¦‚ <strong>collect() ä¹‹</strong>ç±»çš„å†…ç½®æ–¹æ³•æ¥å®ç° ã€‚</p>
<p>è¿™ç§æ–¹æ³•é€šè¿‡<strong>å°†è®¡ç®—å»¶è¿Ÿåˆ°éœ€è¦æ—¶æ‰è¿›è¡Œï¼Œä»è€Œç¡®ä¿äº†é«˜æ•ˆçš„å†…å­˜ä½¿ç”¨</strong>ã€‚</p>
<blockquote>
<p><strong>collect()</strong> å°†è¿­ä»£å™¨çš„å…ƒç´ ç´¯åŠ åˆ°æŒ‡å®šç±»å‹æˆ–éšå¼ç¡®å®šçš„ç±»å‹ä¸­ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17d9681351ff4325871674179c292f3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=mY3ypFE4XbQH85iqFVaweNnOagw%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><strong>fold()</strong> å‡½æ•°ä½¿ç”¨æŒ‡å®šçš„åˆå§‹å€¼å’Œç´¯åŠ å‡½æ•°å°†è¿­ä»£å™¨çš„å…ƒç´ è½¬æ¢ä¸ºç´¯åŠ å€¼ã€‚(fold æ˜¯æŠ˜å çš„æ„æ€,æ„å‘³ç€ç´¯åŠ )</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a92315b5e3743a1acde38d8e6aa4815~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=w2v5q4Kvac%2FNtyyn8RkzBqvp8NU%3D" alt="" loading="lazy"/></p>
<p><strong>Iterator</strong> trait åŒ…å«é¢å¤–çš„å†…ç½®æ–¹æ³•ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿé¿å…é‡æ–°å®ç°åŸºæœ¬åŠŸèƒ½ï¼Œä¾‹å¦‚æ•°å­—çš„æ±‚å’Œæˆ–ä¹˜ç§¯ï¼ˆç±»ä¼¼äºæˆ‘ä»¬ä¸Šé¢ä½¿ç”¨ <strong>fold(initial, fn)</strong> çš„å®ç°ï¼‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc4b5350f4214febad79ce96ff5b7fc1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=X2OITB%2Bbv95Fho98OWjOpVouMNM%3D" alt="" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-6">Reshaping Iterators  (é‡å¡‘è¿­ä»£å™¨)</h3>
<p>æ­¤å¤–ï¼Œè¿­ä»£å™¨è¿˜æä¾›äº†å¼ºå¤§çš„é€‚é…å™¨ï¼Œå¯ä»¥<strong>ä¿®æ”¹æ•°æ®æµæœ¬èº«çš„ç»“æ„å’Œé¡ºåº</strong>ã€‚</p>
<p>è¿™äº›é€‚é…å™¨èƒ½å¤Ÿå®ç°é«˜æ•ˆçš„è½¬æ¢ï¼Œè€Œä¸ä¼šè¿‡æ—©åœ°æ¶ˆè€—åŸå§‹è¿­ä»£å™¨ã€‚</p>
<blockquote>
<p><strong>step_by() å‡½æ•°</strong>é€šè¿‡æ ¹æ®æŒ‡å®šçš„æ­¥é•¿è·³è¿‡é¡¹ç›®æ¥ä¿®æ”¹è¿­ä»£å™¨çš„éå†æ–¹å¼ã€‚
è¿™ç§æ–¹æ³•å¯ä»¥è®©ä½ é«˜æ•ˆåœ°å¤„ç†æ¯ç¬¬ n ä¸ªå…ƒç´ ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df7e1d6db83d42de9e8612adc26a8b91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=isL2wazrBLlVuQdmPVKVLTJrICo%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><strong>rev()</strong> åè½¬è¿­ä»£å™¨çš„éå†æ–¹å‘ã€‚</p>
<p>è¿™ç§æ–¹æ³•ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºå®ƒä¸ä¼šä¿®æ”¹åŸå§‹é›†åˆã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64286701f3114643942f08f74d6e9224~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=jy7wABA2OfKCsmj1OivGihmwnUc%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><strong>enumerate()</strong> æ–¹æ³•é€šè¿‡å°†æ¯ä¸ªé¡¹ç›®<strong>åŒ…è£…åœ¨ä¸€ä¸ªå…ƒç»„ä¸­æ¥ä¿®æ”¹éå†ï¼Œå…¶ä¸­é¡¹ç›®çš„ç´¢å¼•ä½äºç¬¬ä¸€ä¸ªä½ç½®</strong>ã€‚</p>
<p>è¿™æ ·ï¼Œä½ å°±å¯ä»¥åœ¨è¿­ä»£è¿‡ç¨‹ä¸­è®¿é—®ç´¢å¼•å’Œå€¼ï¼Œè¿™å¯¹äºè¯¸å¦‚ç»™é›†åˆä¸­çš„å…ƒç´ ç¼–å·ä¹‹ç±»çš„ä»»åŠ¡éå¸¸æœ‰ç”¨ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/386262a0b6ed4b9e85ff77a09f0d8027~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=vfzOLJqJIA5SM%2BR%2BFuJj6oDMbnY%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><strong>zip(iterator)</strong> <strong>å°†ä¸¤ä¸ªè¿­ä»£å™¨åˆå¹¶æˆä¸€ä¸ªå…ƒç»„è¿­ä»£å™¨ï¼Œå°†æ¯ä¸ªè¿­ä»£å™¨ä¸­çš„å…ƒç´ é…å¯¹</strong>ã€‚(zip æ˜¯æ‹‰é“¾çš„æ„æ€,æ„å‘³ç€æŠŠæ‹‰é“¾2è¾¹çš„é½¿é…å¯¹)
<strong>å½“è¾ƒçŸ­çš„è¿­ä»£å™¨è€—å°½æ—¶ï¼Œè¯¥å‡½æ•°åœæ­¢è¿è¡Œ</strong>ï¼Œä»è€Œç¡®ä¿ä¸ä¼šå› é•¿åº¦ä¸åŒ¹é…è€Œå¯¼è‡´ panicã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3373a90b007b4311835ee54132351bf5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=gV6pYOgHfrg2BjySCjH4PkB%2BbKM%3D" alt="" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-7">ç¤ºä¾‹ï¼š</h3>
<p>æœ€åï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç¨å¾®å¤æ‚ä¸€äº›çš„ Deltas è¿­ä»£å™¨ç¤ºä¾‹ï¼Œå®ƒå¯ä»¥<strong>è®¡ç®—æ¯ä¸ªå…ƒç´ åˆ°å…¶ ä¸Šæ¬¡å‡ºç°ä½ç½®  çš„è·ç¦»</strong>ã€‚(Delta (Î”, Î´) æ˜¯å¸Œè…Šå­—æ¯è¡¨ä¸­çš„ç¬¬å››ä¸ªå­—æ¯ï¼Œé€šå¸¸ç”¨äºè¡¨ç¤ºå˜åŒ–æˆ–å·®å¼‚)</p>
<p>äº†è§£éœ€æ±‚åï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæµ‹è¯•æ¥éªŒè¯å…¶åŠŸèƒ½ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d7a194bc8a2403eb015146d05e9eaf9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=dyyy11fYp5RPSBry2Xd%2Fxyg2Sq0%3D" alt="" loading="lazy"/></p>
<p>ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç€æ‰‹å®ç° <code>Deltas</code>  structäº†ã€‚</p>
<p>è¯¥ç»“æ„ä½“åŒ…è£…äº†ä¸€ä¸ªä¼ é€’ç»™å®ƒçš„è¿­ä»£å™¨ï¼Œå¹¶é€šè¿‡å¯¹å…¶è°ƒç”¨ <code>.enumerate()</code> æ¥ä¿®æ”¹å®ƒ ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a204cb6f5e0c4cd8ae1aa17c249f6056~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=4%2FwIC5RI%2F0wu9VKyvm3PbDUFoQk%3D" alt="" loading="lazy"/></p>
<p>ç°åœ¨æˆ‘ä»¬æœ‰äº† <code>Deltas</code> structï¼Œå‰©ä¸‹çš„å”¯ä¸€ä¸€ä»¶äº‹å°±æ˜¯ä¸ºå…¶å®ç° <code>Iterator</code> traitã€‚</p>
<p><code>next()</code> æ–¹æ³•æ‰æ˜¯çœŸæ­£å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¼šä¿®æ”¹è¿­ä»£å™¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc8528f215ae4b9f94dec5b25d0dcea6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=dsQWv5Ss9xTpU76cB8%2FWCc1ALnQ%3D" alt="" loading="lazy"/></p>
<p>OKï¼æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªæƒ°æ€§è¿­ä»£å™¨ï¼Œå®ƒå¯ä»¥è®¡ç®—<strong>æ¯ä¸ªå…ƒç´ åˆ°å…¶ä¸Šä¸€æ¬¡å‡ºç°ä½ç½®çš„è·ç¦»</strong>ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œ<code>next()</code> æ–¹æ³•çš„å…·ä½“å®ç°å¯¹ç”¨æˆ·æ˜¯éšè—çš„ã€‚è¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨ä¸ç ´åçº¦å®šçš„æƒ…å†µä¸‹ä¿®æ”¹åº•å±‚è¿­ä»£å™¨ã€‚</p>
<p>è®©æˆ‘ä»¬åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œé€šè¿‡å»æ‰ Vec è€Œæ”¹ç”¨ HashMap æ¥æé«˜è¿­ä»£å™¨çš„æ•ˆç‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f041ee2e618b40a28b18fadd8e783bb4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763689760&amp;x-signature=pk3BES8L0BC1Ct7iYRN3OyMxE0U%3D" alt="" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-8">è¦ç‚¹æ€»ç»“</h3>
<p>Rust è¿­ä»£å™¨ä»£è¡¨äº†æˆ‘ä»¬å¤„ç†åºåˆ—æ–¹å¼çš„æ ¹æœ¬æ€§è½¬å˜ï¼Œå®ƒå°†å‡½æ•°å¼ç¼–ç¨‹çš„ä¼˜é›…ä¸ <strong>ç³»ç»Ÿç¼–ç¨‹çš„ æ€§èƒ½</strong> ç»“åˆèµ·æ¥ã€‚</p>
<p>å®ƒä»¬<strong>é»˜è®¤æ˜¯æƒ°æ€§çš„</strong> ï¼Œå¯ä»¥<strong>é«˜æ•ˆåœ°é“¾æ¥æ“ä½œï¼Œæœ€ç»ˆç¼–è¯‘æˆæœ€ä¼˜çš„æœºå™¨ä»£ç </strong>ã€‚</p>
<p>ç†è§£ <strong>iter()</strong> ã€ <strong>into_iter()</strong> å’Œ <strong>iter_mut()</strong> ä¹‹é—´çš„åŒºåˆ«å¯¹äºæ­£ç¡®ç®¡ç†<strong>æ‰€æœ‰æƒ</strong>è‡³å…³é‡è¦ã€‚</p>
<p>å€ŸåŠ© <strong>map()</strong> ã€ <strong>filter()</strong> å’Œ <strong>fold()</strong> ç­‰è¿­ä»£å™¨é€‚é…å™¨ ï¼Œå¤æ‚çš„æ•°æ®è½¬æ¢å˜å¾—ç®€æ´è€Œå¯Œæœ‰è¡¨ç°åŠ›ã€‚</p>
<p>æœ€é‡è¦çš„æ˜¯ï¼Œè¿­ä»£å™¨ä¸ä»…ä»…æ˜¯è¯­æ³•ç³–â€”â€”å®ƒä»¬æ˜¯ä¸€ç§<strong>é›¶æˆæœ¬çš„æŠ½è±¡</strong> ï¼Œé¼“åŠ±ç¼–å†™æ›´å®‰å…¨ã€æ›´æ˜“äºç»´æŠ¤çš„ä»£ç ï¼Œè€Œä¸ä¼šç‰ºç‰²æ€§èƒ½ã€‚</p>
<hr/>
<p>ç›¸å…³æ–‡ç« :</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fitsfoxstudio.substack.com%2Fp%2Fcomparison-traits-understanding-equality" target="_blank" title="https://itsfoxstudio.substack.com/p/comparison-traits-understanding-equality" ref="nofollow noopener noreferrer">Comparison Traits:ç†è§£ç›¸ç­‰æ€§å’Œæ’åº </a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[eBPFæ€§èƒ½æ­ç§˜ - XDP å’Œ JIT]]></title>    <link>https://juejin.cn/post/7572087162230833194</link>    <guid>https://juejin.cn/post/7572087162230833194</guid>    <pubDate>2025-11-14T02:05:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572087162230833194" data-draft-id="7572087162230784042" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="eBPFæ€§èƒ½æ­ç§˜ - XDP å’Œ JIT "/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-14T02:05:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="lizhongxuan"/> <meta itemprop="url" content="https://juejin.cn/user/940837683343224"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            eBPFæ€§èƒ½æ­ç§˜ - XDP å’Œ JIT 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/940837683343224/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    lizhongxuan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T02:05:29.000Z" title="Fri Nov 14 2025 02:05:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    13
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¦‚æœä½ åˆšå¼€å§‹å­¦ä¹  eBPFï¼Œä½ å¯èƒ½ç»å¸¸å¬åˆ°å®ƒâ€œæ€§èƒ½æé«˜â€ã€â€œæ¥è¿‘åŸç”Ÿâ€ã€â€œå½»åº•æ”¹å˜äº† Linux å†…æ ¸â€â€¦â€¦ ä½†ä½ æ˜¯å¦å¥½å¥‡è¿‡ï¼Œè¿™ç§â€œé­”æ³•â€ç©¶ç«Ÿä»ä½•è€Œæ¥ï¼Ÿ</p>
<p>å½“ä½ æ‰§è¡Œ <code>bpftool prog show id &lt;ä½ çš„ID&gt; --pretty</code> å¹¶çœ‹åˆ°è¾“å‡ºä¸­åŒæ—¶å‡ºç°äº† <code>xdp</code> å’Œ <code>jit</code> è¿™æ ·çš„å­—çœ¼æ—¶ï¼Œä½ å°±å·²ç»çœ‹åˆ°äº†ç­”æ¡ˆ:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">540</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"xdp"</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// çœ‹è¿™é‡Œï¼šå®ƒçš„ç±»å‹æ˜¯ XDP</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"hello"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-comment">// ...</span>
    <span class="hljs-attr">"jited"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// çœ‹è¿™é‡Œï¼šå®ƒå·²ç»è¢« JIT ç¼–è¯‘äº†</span>
    <span class="hljs-attr">"jit_len"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">72</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"xlated_len"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">64</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"load_time"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1678886400</span><span class="hljs-punctuation">,</span>
    <span class="hljs-comment">// ...</span>
    <span class="hljs-attr">"jit_insns"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>  <span class="hljs-comment">// è¿™é‡Œå°±æ˜¯ JIT ç¼–è¯‘åçš„åŸç”Ÿæœºå™¨ç ï¼ˆx86 æ±‡ç¼–ï¼‰</span>
        <span class="hljs-string">"0:   push   %rbp"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"1:   mov    %rsp,%rbp"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"2:   mov    0x8(%rdi),%rdi"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-comment">// ...</span>
    <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™ç¯‡åšå®¢å°†å¸¦ä½ æ·±å…¥äº†è§£è¿™ä¸¤ä¸ªæ¦‚å¿µã€‚ä¸ºäº†è®©ä½ å½»åº•ç†è§£ï¼Œæˆ‘ä»¬æ¥æ‰“ä¸ªæ¯”æ–¹ï¼š</p>
<ul>
<li><strong>XDP (eXpress Data Path)</strong>ï¼šå†³å®šäº†ä½ çš„ eBPF ç¨‹åº**åœ¨å“ªé‡Œï¼ˆWhereï¼‰**è¿è¡Œã€‚</li>
<li><strong>JIT (Just-In-Time) Compiler</strong>ï¼šå†³å®šäº†ä½ çš„ eBPF ç¨‹åº**å¦‚ä½•ï¼ˆHowï¼‰**è¿è¡Œã€‚</li>
</ul>
<p>ææ‡‚äº†è¿™ä¸¤ç‚¹ï¼Œä½ å°±ææ‡‚äº† eBPF æ€§èƒ½çš„æ ¸å¿ƒç§˜å¯†ã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸ“ XDPï¼šåœ¨â€œå†…æ ¸é«˜é€Ÿå…¬è·¯â€çš„å…¥å£æ”¶è´¹ç«™</h2>
<p><code>XDP</code> çš„å…¨ç§°æ˜¯ <strong>eXpress Data Path</strong>ï¼ˆé«˜é€Ÿæ•°æ®è·¯å¾„ï¼‰ã€‚å®ƒçš„åå­—å·²ç»è¯´æ˜äº†ä¸€åˆ‡â€”â€”å®ƒå°±æ˜¯ä¸€æ¡ä¸ºç½‘ç»œåŒ…å‡†å¤‡çš„â€œç‰¹å¿«ä¸“çº¿â€ã€‚</p>
<h3 data-id="heading-1">æ­£å¸¸ï¼ˆç¼“æ…¢ï¼‰çš„ç½‘ç»œåŒ…ä¹‹æ—…</h3>
<p>æƒ³è±¡ä¸€ä¸‹ä¸€ä¸ªç½‘ç»œåŒ…è¿›å…¥ä½ æœåŠ¡å™¨çš„â€œå¸¸è§„æ—…ç¨‹â€ï¼š</p>
<ol>
<li>æ•°æ®åŒ…åˆ°è¾¾ä½ çš„<strong>ç‰©ç†ç½‘å¡ (NIC)</strong>ã€‚</li>
<li>ç½‘å¡é©±åŠ¨ç¨‹åºè¢«å”¤é†’ï¼ŒæŠŠæ•°æ®åŒ…è¯»å…¥å†…å­˜ã€‚</li>
<li>å†…æ ¸ä¸ºè¿™ä¸ªåŒ…åˆ†é…ä¸€ä¸ª<strong>æå…¶å¤æ‚ä¸”æ˜‚è´µ</strong>çš„æ•°æ®ç»“æ„ï¼Œå«åš <code>sk_buff</code> (Socket Buffer)ã€‚</li>
<li>è¿™ä¸ª <code>sk_buff</code> æ¥ç€å¼€å§‹å®ƒåœ¨å†…æ ¸ç½‘ç»œåè®®æ ˆä¸­çš„â€œæ¼«é•¿æ—…è¡Œâ€ï¼šç»è¿‡ IP å±‚ã€TCP/UDP å±‚ã€<code>iptables</code> é˜²ç«å¢™è§„åˆ™â€¦â€¦</li>
<li>æœ€åï¼Œæ•°æ®åŒ…ç»ˆäºè¢«é€è¾¾ä½ çš„åº”ç”¨ç¨‹åºï¼ˆæ¯”å¦‚ Nginxï¼‰ã€‚</li>
</ol>
<p>è¿™ä¸ªè¿‡ç¨‹è™½ç„¶åŠŸèƒ½é½å…¨ï¼Œä½†å¯¹äºæŸäº›åœºæ™¯æ¥è¯´<strong>å¤ªæ…¢äº†</strong>ã€‚</p>
<p><strong><code>sk_buff</code> åˆ†é… (å…³é”®å¼€é”€ç‚¹ï¼)</strong> ï¼šé©±åŠ¨ç¨‹åºåœ¨å†…æ ¸ä¸­åˆ†é…ä¸€ä¸ªæ ¸å¿ƒæ•°æ®ç»“æ„ <code>struct sk_buff</code> (socket buffer)ã€‚è¿™<strong>éå¸¸æ˜‚è´µ</strong>ï¼Œå› ä¸ºå®ƒæ¶‰åŠå†…å­˜åˆ†é…ã€ç¼“å­˜è¡Œæ±¡æŸ“ï¼Œå¹¶ä¸”è¿™ä¸ªç»“æ„ä½“éå¸¸åºå¤§ï¼ˆå‡ ç™¾ä¸ªå­—èŠ‚ï¼‰ï¼Œç”¨æ¥è·Ÿè¸ªæ•°æ®åŒ…çš„â€œä¸€ç”Ÿâ€ã€‚</p>
<h3 data-id="heading-2">XDP çš„â€œé«˜é€Ÿå…¬è·¯å…¥å£â€</h3>
<p>XDP å½»åº•æ”¹å˜äº†æ¸¸æˆè§„åˆ™ã€‚å®ƒå…è®¸ä½ çš„ eBPF ç¨‹åºåœ¨<strong>ç¬¬ 2 æ­¥</strong>ï¼Œå³<strong>ç½‘å¡é©±åŠ¨åˆšæŠŠæ•°æ®åŒ…è¯»è¿›æ¥ï¼Œä½†è¿˜æ²¡æœ‰åˆ›å»ºæ˜‚è´µçš„ <code>sk_buff</code> ä¹‹å‰</strong>ï¼Œå°±ç«‹å³æ‰§è¡Œã€‚</p>
<p>è¿™å°±åƒåœ¨æœºåœºçš„<strong>èˆªç«™æ¥¼å¤§é—¨å£</strong>è®¾ç½®äº†ä¸€ä¸ªå®‰æ£€ç‚¹ï¼Œè€Œä¸æ˜¯åœ¨ç™»æœºå£ã€‚</p>
<p>åœ¨è¿™ä¸ªè¶…æ—©çš„â€œå®‰æ£€ç‚¹â€ï¼Œä½ çš„ XDP ç¨‹åºæƒåŠ›å¾ˆå¤§ï¼Œä½†ä¹Ÿå¾ˆç®€å•ã€‚å®ƒå¿…é¡»ç«‹å³åšå‡ºå†³å®šï¼Œè¿”å›ä»¥ä¸‹å‡ ç§â€œè£å†³â€ä¹‹ä¸€ï¼š</p>
<ul>
<li><strong><code>XDP_DROP</code> (ä¸¢å¼ƒ)</strong>
<ul>
<li><strong>å«ä¹‰</strong>ï¼šâ€œè¿™ä¸ªåŒ…æœ‰é—®é¢˜ï¼ŒåŸåœ°ä¸¢å¼ƒã€‚â€</li>
<li><strong>ç”¨é€”</strong>ï¼š<strong>DDoS é˜²å¾¡å’Œé˜²ç«å¢™çš„ç»ˆææ­¦å™¨</strong>ã€‚ç”±äºå®ƒåœ¨å†…æ ¸åˆ†é…ä»»ä½•æ˜‚è´µèµ„æºä¹‹å‰å°±ä¸¢å¼ƒäº†æ•°æ®åŒ…ï¼Œç³»ç»Ÿå‡ ä¹ä¸èŠ±æˆæœ¬å°±èƒ½æŠµå¾¡æ´ªæ°´èˆ¬çš„æ”»å‡»ã€‚</li>
</ul>
</li>
<li><strong><code>XDP_PASS</code> (é€šè¿‡)</strong>
<ul>
<li><strong>å«ä¹‰</strong>ï¼šâ€œæˆ‘æ£€æŸ¥è¿‡äº†ï¼Œè¿™ä¸ªåŒ…æ˜¯åˆæ³•çš„ï¼Œè¯·ç»§ç»­èµ°â€˜å¸¸è§„æ—…ç¨‹â€™ï¼ˆäº¤ç»™ç¬¬ 3 æ­¥çš„å†…æ ¸åè®®æ ˆï¼‰ã€‚â€</li>
<li><strong>ç”¨é€”</strong>ï¼šç”¨äºç›‘æ§æˆ–åªè¿‡æ»¤ç‰¹å®šæµé‡ã€‚</li>
</ul>
</li>
<li><strong><code>XDP_TX</code> (å‘é€)</strong>
<ul>
<li><strong>å«ä¹‰</strong>ï¼šâ€œä¸ç”¨è¿›å†…æ ¸äº†ï¼Œï¼ˆå¯èƒ½ä¿®æ”¹ä¸€ä¸‹åŒ…å¤´ï¼‰ç›´æ¥ä»ä½ è¿›æ¥çš„è¿™ä¸ªç½‘å¡å†å‘å‡ºå»ã€‚â€</li>
<li><strong>ç”¨é€”</strong>ï¼šL4 è´Ÿè½½å‡è¡¡ï¼ˆä¾‹å¦‚ Facebook çš„ Katranï¼‰ã€‚</li>
</ul>
</li>
<li><strong><code>XDP_REDIRECT</code> (é‡å®šå‘)</strong>
<ul>
<li><strong>å«ä¹‰</strong>ï¼šâ€œæŠŠè¿™ä¸ªåŒ…è½¬å‘åˆ°å¦ä¸€ä¸ªç½‘å¡ï¼Œæˆ–å¦ä¸€ä¸ª CPU æ ¸å¿ƒã€‚â€</li>
<li><strong>ç”¨é€”</strong>ï¼šå®ç°é«˜æ€§èƒ½çš„è™šæ‹Ÿäº¤æ¢æœºå’Œè·¯ç”±å™¨ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-3">XDP vs TC-eBPF</h3>
<p>XDP å¹¶ä¸æ˜¯ eBPF åœ¨ç½‘ç»œä¸­å”¯ä¸€çš„æŒ‚è½½ç‚¹ã€‚å®ƒçš„â€œå…„å¼Ÿâ€æ˜¯ <strong>TC (Traffic Control) eBPF</strong>ã€‚</p>








































<table><thead><tr><th>ç‰¹æ€§</th><th><strong>XDP (eXpress Data Path)</strong></th><th><strong>TC-eBPF (Traffic Control)</strong></th></tr></thead><tbody><tr><td><strong>æŒ‚è½½ç‚¹</strong></td><td>ç½‘å¡é©±åŠ¨ç¨‹åº (æˆ–ç¡¬ä»¶)</td><td>å†…æ ¸çš„ TC å­ç³»ç»Ÿ (åè®®æ ˆå†…éƒ¨)</td></tr><tr><td><strong>æ•°æ®ç»“æ„</strong></td><td><code>struct xdp_md</code> (åŸå§‹æ•°æ®åŒ…)</td><td><code>struct __sk_buff</code> (å®Œæ•´çš„ sk_buff)</td></tr><tr><td><strong>è¿è¡Œå‰æ</strong></td><td><strong><code>sk_buff</code> åˆ†é…å‰</strong></td><td><strong><code>sk_buff</code> åˆ†é…å</strong></td></tr><tr><td><strong>ä¸»è¦æ–¹å‘</strong></td><td><strong>Ingress (å…¥å£)</strong></td><td>Ingress (å…¥å£) å’Œ <strong>Egress (å‡ºå£)</strong></td></tr><tr><td><strong>æ€§èƒ½</strong></td><td><strong>æè‡´æ€§èƒ½</strong> (æ¯ç§’æ•°åƒä¸‡åŒ…)</td><td>é«˜æ€§èƒ½ (ä½†ä½äº XDP)</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>DDoS é˜²å¾¡, L4 è´Ÿè½½å‡è¡¡, é‡‡æ ·</td><td>å®¹å™¨ç½‘ç»œ (Cilium CNI), ç²¾ç»†çš„ç­–ç•¥æ§åˆ¶, å¸¦å®½æ•´å½¢</td></tr></tbody></table>
<p><strong>ç®€å•ç±»æ¯”</strong>ï¼š</p>
<ul>
<li><strong>XDP</strong> æ˜¯ä½ å¤§æ¥¼çš„<strong>æ€»é—¨ç¦</strong>ã€‚å®ƒåªèƒ½åœ¨å¤§æ¥¼å…¥å£æ£€æŸ¥ï¼ˆIngressï¼‰ï¼Œä½†é€Ÿåº¦æœ€å¿«ï¼Œå¯ä»¥åœ¨åäººè¿›å…¥å¤§å ‚å‰å°±å°†å…¶æ‹¦ä¸‹ã€‚</li>
<li><strong>TC</strong> æ˜¯ä½ <strong>ç”µæ¢¯å£</strong>çš„å®‰ä¿ã€‚å®ƒæ—¢èƒ½ç®¡è¿›ï¼ˆIngressï¼‰ï¼Œä¹Ÿèƒ½ç®¡å‡ºï¼ˆEgressï¼‰ã€‚å®ƒèƒ½çœ‹åˆ°æ›´ä¸°å¯Œçš„ä¿¡æ¯ï¼ˆ<code>sk_buff</code>ï¼Œæ¯”å¦‚è¿™ä¸ªäººè¦å»å‡ æ¥¼ï¼‰ï¼Œä½†å®ƒå·²ç»åœ¨å¤§å ‚é‡Œäº†ã€‚</li>
</ul>
<blockquote>
<p><strong>XDP å°ç»“ï¼š</strong> XDP æ˜¯ä¸€ä¸ª<strong>è¿è¡Œåœ°ç‚¹</strong>ã€‚å®ƒæ˜¯å†…æ ¸ä¸­æœ€æ—©ã€æœ€å¿«çš„æ•°æ®åŒ…å¤„ç†æŒ‚è½½ç‚¹ï¼Œé€šè¿‡åœ¨ç½‘ç»œåè®®æ ˆâ€œå…¥å£å¤„â€æ‰§è¡Œä»£ç ï¼Œå®ç°äº†æ— ä¸ä¼¦æ¯”çš„ç½‘ç»œæ€§èƒ½ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-4">ğŸ”¥ JITï¼šæŠŠâ€œé€šç”¨è“å›¾â€å˜æˆâ€œF1 å¼•æ“â€</h2>
<p>è¦ç†è§£ JITï¼Œæˆ‘ä»¬å¿…é¡»å…ˆçœ‹çœ‹ eBPF ç¨‹åºæ˜¯å¦‚ä½•è¢«åŠ è½½åˆ°å†…æ ¸çš„ï¼š</p>
<ol>
<li>
<p><strong>ç¬¬ 1 æ¬¡ç¼–è¯‘ï¼ˆåœ¨ç”¨æˆ·ç©ºé—´ï¼‰</strong>ï¼š</p>
<ul>
<li>ä½ ç”¨ C è¯­è¨€ç¼–å†™ eBPF ç¨‹åºã€‚</li>
<li>ä½¿ç”¨ <code>clang</code> (LLVM) ç¼–è¯‘å™¨ï¼Œå°† C ä»£ç ç¼–è¯‘æˆä¸€ç§<strong>é€šç”¨çš„ã€ä¸ CPU æ¶æ„æ— å…³çš„</strong>â€œeBPF å­—èŠ‚ç â€ã€‚</li>
<li>è¿™å¾ˆåƒ Java è¢«ç¼–è¯‘æˆé€šç”¨çš„ <code>.class</code> å­—èŠ‚ç ã€‚</li>
</ul>
</li>
<li>
<p><strong>åŠ è½½ä¸éªŒè¯</strong>ï¼š</p>
<ul>
<li>ä½ çš„ Python/Go/C++ ç¨‹åºï¼ˆä¾‹å¦‚ <code>bcc</code> è„šæœ¬ï¼‰è¯»å–è¿™äº›å­—èŠ‚ç ï¼Œå¹¶å°†å…¶åŠ è½½åˆ°å†…æ ¸ä¸­ã€‚</li>
<li>å†…æ ¸çš„<strong>æ ¡éªŒå™¨ (Verifier)</strong> ä¼šå¯¹å­—èŠ‚ç è¿›è¡Œä¸¥æ ¼çš„å®‰å…¨å®¡æŸ¥ï¼Œ<strong>è¯æ˜</strong>ä½ çš„ä»£ç æ˜¯å®‰å…¨çš„ï¼ˆæ¯”å¦‚ä¸ä¼šå¯¼è‡´å†…æ ¸å´©æºƒã€ä¸ä¼šæœ‰æ— é™å¾ªç¯ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>é¢ä¸´é€‰æ‹©</strong>ï¼š</p>
<ul>
<li><strong>é€‰é¡¹ A (è§£é‡Šæ‰§è¡Œ)</strong> ï¼šåƒä¸€ä¸ªç¿»è¯‘å®˜ï¼Œä¸€è¡Œä¸€è¡Œåœ°è¯»å– eBPF å­—èŠ‚ç ï¼Œç„¶åæ‰§è¡Œå¯¹åº”çš„æ“ä½œã€‚<strong>è¿™å¾ˆå®‰å…¨ï¼Œä½†å¾ˆæ…¢ã€‚</strong></li>
<li><strong>é€‰é¡¹</strong> <strong>B (JIT</strong> <strong>ç¼–è¯‘</strong> <strong>)</strong> ï¼š<strong>è¿™æ˜¯</strong> <strong>Linux</strong> <strong>å†…æ ¸çš„é»˜è®¤é€‰é¡¹</strong>ã€‚å†…æ ¸è°ƒç”¨å®ƒçš„ <strong>JIT</strong> <strong>ç¼–è¯‘å™¨</strong>ï¼Œå°†æ•´ä¸ª eBPF å­—èŠ‚ç ç¨‹åº<strong>ä¸€æ¬¡æ€§</strong>ç¿»è¯‘æˆä½ çš„ CPU (æ¯”å¦‚ x86_64 æˆ– arm64) <strong>å¯ä»¥ç›´æ¥æ‰§è¡Œçš„åŸç”Ÿæœºå™¨æŒ‡ä»¤</strong>ã€‚</li>
</ul>
</li>
</ol>
<p>OK,ä¾‹å­é€‰æ‹©ä½¿ç”¨<strong>JITç¼–è¯‘</strong>.</p>
<ol start="4">
<li><strong>ç¬¬ 2 æ¬¡ç¼–è¯‘ï¼ˆåœ¨å†…æ ¸ç©ºé—´ï¼ŒJIT ç™»åœºï¼ï¼‰</strong>ï¼š
<ul>
<li>å®‰å…¨æ ¡éªŒé€šè¿‡åï¼Œå†…æ ¸çš„ <strong>JIT ç¼–è¯‘å™¨</strong>å¯åŠ¨ã€‚</li>
<li>å®ƒä¼šæŠŠè¿™äº›<strong>é€šç”¨çš„ eBPF å­—èŠ‚ç </strong>ï¼Œâ€œå³æ—¶â€ç¿»è¯‘æˆä½ å½“å‰ CPUï¼ˆæ¯”å¦‚ <code>x86_64</code> æˆ– <code>arm64</code>ï¼‰<strong>å¯ä»¥ç›´æ¥æ‰§è¡Œçš„åŸç”Ÿæœºå™¨æŒ‡ä»¤</strong>ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-5">ä¸ºä»€ä¹ˆ JIT å¦‚æ­¤é‡è¦ï¼Ÿ</h3>
<p>å¦‚æœæ²¡æœ‰ JITï¼Œå†…æ ¸å°±å¿…é¡»ä½¿ç”¨â€œè§£é‡Šå™¨â€ï¼ˆInterpreterï¼‰æ¥è¿è¡Œä½ çš„ eBPF å­—èŠ‚ç ã€‚</p>
<ul>
<li><strong>è§£é‡Šå™¨ï¼ˆæ…¢ï¼‰</strong>ï¼šå°±åƒä¸€ä¸ªç¿»è¯‘å®˜ï¼Œé€è¡Œè¯»å– eBPF å­—èŠ‚ç ï¼ˆâ€œé€šç”¨è“å›¾â€ï¼‰ï¼Œç„¶åå‘Šè¯‰ CPU è¯¥æ€ä¹ˆåšã€‚æ¯è¿è¡Œä¸€æ¬¡å°±è¦â€œç¿»è¯‘â€ä¸€æ¬¡ã€‚</li>
<li><strong>JITï¼ˆå¿«ï¼‰</strong>ï¼šå°±åƒä¸€ä¸ªé¡¶å°–å·¥ç¨‹å¸ˆï¼ŒæŠŠâ€œé€šç”¨è“å›¾â€å½»åº•æ”¹é€ æˆäº†ä¸ºä½ çš„ CPU é‡èº«å®šåšçš„â€œF1 å¼•æ“â€ï¼ˆåŸç”Ÿæœºå™¨ç ï¼‰ã€‚ä¹‹åæ¯æ¬¡è¿è¡Œï¼ŒCPU éƒ½èƒ½ç›´æ¥ç†è§£ï¼Œæ²¡æœ‰ä»»ä½•ç¿»è¯‘å¼€é”€ã€‚</li>
</ul>
<blockquote>
<p><strong>JIT å°ç»“ï¼š</strong> JIT æ˜¯ä¸€ç§<strong>è¿è¡Œæ–¹å¼</strong>ã€‚å®ƒå°† eBPF çš„â€œå¯ç§»æ¤æ€§â€å’Œâ€œå®‰å…¨æ€§â€ï¼ˆæ¥è‡ªå­—èŠ‚ç ï¼‰ä¸â€œåŸç”Ÿæ€§èƒ½â€ï¼ˆæ¥è‡ªæœºå™¨ç ï¼‰å®Œç¾ç»“åˆã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-6">ç»ˆæç»„åˆï¼šXDP + JIT = æ€§èƒ½æ€ªå…½</h2>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸¤ä¸ªæ¦‚å¿µæ‹¼åœ¨ä¸€èµ·ï¼š</p>
<ol>
<li>ä½ å†™äº†ä¸€ä¸ªç”¨äº DDoS é˜²å¾¡çš„ <strong>XDP</strong> ç¨‹åºã€‚</li>
<li>ä½ åŠ è½½å®ƒï¼Œå†…æ ¸æ ¡éªŒé€šè¿‡åï¼Œ<strong>JIT</strong> ç¼–è¯‘å™¨ä»‹å…¥ï¼ŒæŠŠå®ƒç¼–è¯‘æˆäº†ä½ æœåŠ¡å™¨ CPU çš„<strong>åŸç”Ÿæœºå™¨ç </strong>ã€‚</li>
<li>å†…æ ¸å°†è¿™æ®µ<strong>åŸç”Ÿæœºå™¨ç </strong>æŒ‚è½½åˆ°äº†ç½‘å¡é©±åŠ¨çš„ <strong>XDP</strong> æŒ‚è½½ç‚¹ä¸Šã€‚</li>
</ol>
<p><strong>ç»“æœå°±æ˜¯ï¼š</strong> å½“ä¸€ä¸ªç½‘ç»œåŒ…åˆ°è¾¾ç½‘å¡æ—¶ï¼Œä½ çš„ CPU ä¼šä»¥<strong>æœ€å¿«çš„åŸç”Ÿé€Ÿåº¦ï¼ˆJITï¼‰</strong>ï¼Œåœ¨<strong>æœ€æ—©çš„å†…æ ¸ä½ç½®ï¼ˆXDPï¼‰</strong>ï¼Œå¯¹è¿™ä¸ªåŒ…æ‰§è¡Œä½ çš„é€»è¾‘ã€‚</p>
<p>è¿™å°±æ˜¯ eBPF èƒ½ä»¥æ¯ç§’æ•°åƒä¸‡æ•°æ®åŒ…ï¼ˆMppsï¼‰çš„é€Ÿåº¦å¤„ç†æµé‡ï¼ŒåŒæ—¶ä¿æŒç³»ç»Ÿå®‰å…¨å’Œå¯ç¼–ç¨‹æ€§çš„åŸå› ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ Ollama æœ¬åœ°æ¨¡å‹ä¸ Spring AI Alibaba]]></title>    <link>https://juejin.cn/post/7572453554331451392</link>    <guid>https://juejin.cn/post/7572453554331451392</guid>    <pubDate>2025-11-15T07:33:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572453554331451392" data-draft-id="7572453554330894336" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ Ollama æœ¬åœ°æ¨¡å‹ä¸ Spring AI Alibaba"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-15T07:33:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§è±¡å¸­åœ°æŠ½çƒŸ"/> <meta itemprop="url" content="https://juejin.cn/user/3104676567599207"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ Ollama æœ¬åœ°æ¨¡å‹ä¸ Spring AI Alibaba
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3104676567599207/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§è±¡å¸­åœ°æŠ½çƒŸ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T07:33:02.000Z" title="Sat Nov 15 2025 07:33:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://juejin.cn/post/7570271574348152841" target="_blank" title="https://juejin.cn/post/7570271574348152841">Spring AI RAG ä½“éªŒé¡¹ç›®</a>ä¸­ä½¿ç”¨çš„æ˜¯é˜¿é‡Œäº‘çš„æ¨¡å‹ï¼ŒåµŒå…¥ã€æ¨ç†å’Œæ’åºè¦è°ƒç”¨é˜¿é‡Œäº‘çš„æœåŠ¡ã€‚æœ¬ä¾‹å°è¯•æœ¬åœ°æ­å»ºollamaï¼Œè·‘ä¸€äº›å¼€æºçš„æ¨¡å‹ã€‚</p>
<p>ollamaå·ç§°å¤§æ¨¡å‹é¢†åŸŸçš„dockerã€‚ç”¨æ¥åšéªŒè¯æˆ–è€…è·‘ä¸€äº›ç»è¿‡è’¸é¦/é‡åŒ–çš„è½»é‡æ¨¡å‹ã€æ­å»ºé—®ç­”æœºå™¨äººçŸ¥è¯†åº“ï¼Œå¤Ÿç”¨äº†ã€‚</p>
<p>æ•´ä½“æ­¥éª¤æ˜¯ï¼šï¼ˆ1ï¼‰å®‰è£…ollamaï¼Œç›¸å½“äºå®‰è£…docker ï¼ˆ2ï¼‰ollamaä¸­æ‹‰å–æ¨¡å‹ï¼Œç›¸å½“äºdockeræ‹‰å–é•œåƒè¿›è¡Œå¹¶è¿è¡Œ ï¼ˆ3ï¼‰éªŒè¯ollamaä¸­çš„æ¨¡å‹ï¼ˆ4ï¼‰å†™ä¸€ä¸ªspring aiåº”ç”¨ï¼Œè¯¥åº”ç”¨è°ƒç”¨ollamaä¸­è·‘çš„æ¨¡å‹ã€‚</p>
<p>æœ¬ä¾‹ä»£ç  <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzhouruibest%2Follama-rag1" target="_blank" title="https://github.com/zhouruibest/ollama-rag1" ref="nofollow noopener noreferrer">github.com/zhouruibestâ€¦</a></p>
<h2 data-id="heading-0">1. å®‰è£…ollama</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Follama.com%2F" target="_blank" title="https://ollama.com/" ref="nofollow noopener noreferrer">ollama</a>è¢«è®¾è®¡ç”¨æ¥å•æœºè¿è¡Œçš„ã€‚å¯ä»¥ç”¨åˆ°Windowä¸Šçš„æ˜¾å¡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/039a48af52304f639dbb27b17b869b89~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn6LGh5bit5Zyw5oq954Of:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763796782&amp;x-signature=rndutIDSoNdCcQE4%2BA3ungEAZkY%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">2. æ‹‰å–æ¨¡å‹</h2>
<p>windows powershellä¸­</p>
<pre><code class="hljs language-sh" lang="sh">ollama pull deepseek-r1:8b
ollamaÂ pullÂ nomic-embed-text:latest
</code></pre>
<h2 data-id="heading-2">3. éªŒè¯</h2>
<p>ollamaé»˜è®¤ç›‘å¬æœ¬åœ°11434ç«¯å£ï¼Œspring aiåº”ç”¨å°±æ˜¯è®¿é—®è¿™ä¸ªåœ°å€ã€‚ç”¨curlæµ‹ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-sh" lang="sh">curl http://localhost:11434/api/generate -d <span class="hljs-string">'{
  "model": "deepseek-r1:8b",
  "prompt": "è¯·ä»‹ç»ä¸€ä¸‹AIçš„å‘å±•å†å²"
}'</span>


curl http://localhost:11434/api/embed -d <span class="hljs-string">'{
  "model": "nomic-embed-text:latest",
  "input": "è¿™æ˜¯ä¸€æ®µéœ€è¦è½¬æ¢ä¸ºå‘é‡çš„æ–‡æœ¬"
}'</span>
</code></pre>
<p>å‘½ä»¤è¡Œä¸­æ˜¾ç¤ºä¸å‹å¥½ã€‚ä¹Ÿå¯ä»¥ç”¨Open-WebUIï¼ˆweb é¡µé¢å·¥å…·ï¼Œé•œåƒæ˜¯ ghcr.io/open-webui/open-webui:mainï¼‰ ï¼Œåœ¨é¡µé¢éªŒè¯ã€‚ è¿™é‡Œç”¨äº†å®ƒçš„å›½å†…çš„é•œåƒã€‚æ¨èä¸€ä¸ªé•œåƒåŒæ­¥ç½‘ç«™ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocker.aityp.com%2F%25E3%2580%2582" target="_blank" title="https://docker.aityp.com/%E3%80%82" ref="nofollow noopener noreferrer">docker.aityp.com/ã€‚</a></p>
<pre><code class="hljs language-bash" lang="bash">docker run -d -p 3000:8080 \
  --add-host=host.docker.internal:host-gateway \
  -e OLLAMA_BASE_URL=http://host.docker.internal:11434 \  <span class="hljs-comment"># æŒ‡å®šäº†ollamaçš„æœåŠ¡åœ°å€</span>
  swr.cn-north-4.myhuaweicloud.com/ddn-k8s/ghcr.io/open-webui/open-webui:main
</code></pre>
<h2 data-id="heading-3">4. spring ai åº”ç”¨</h2>
<p>æœ¬ä¾‹æ˜¯åœ¨ <a href="https://juejin.cn/post/7570271574348152841" target="_blank" title="https://juejin.cn/post/7570271574348152841">Spring AI RAG ä½“éªŒé¡¹ç›®</a> çš„åŸºç¡€ä¸Šæ”¹çš„ã€‚</p>
<h3 data-id="heading-4">é…ç½®</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">handbook</span>
  <span class="hljs-attr">autoconfigure:</span>
    <span class="hljs-attr">exclude:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">org.springframework.ai.autoconfigure.vectorstore.milvus.MilvusVectorStoreAutoConfiguration</span>
  <span class="hljs-attr">ai:</span>
    <span class="hljs-attr">dashscope:</span>
      <span class="hljs-attr">api-key:</span> <span class="hljs-string">${MY_APP_API_KEY}</span>        <span class="hljs-comment"># é¡¹ç›®ä¸­è¿˜æœ‰ spring-ai-alibaba-starterå¯åŠ¨å™¨ï¼Œæ–¹ä¾¿åˆ‡å›å»</span>
    <span class="hljs-attr">ollama:</span>
      <span class="hljs-attr">base-url:</span> <span class="hljs-string">http://localhost:11434</span>  <span class="hljs-comment"># Ollama æœåŠ¡åœ°å€ï¼Œé»˜è®¤æ˜¯è¿™ä¸ªç«¯å£å·</span>
      <span class="hljs-attr">chat:</span>
        <span class="hljs-attr">model:</span> <span class="hljs-string">deepseek-r1:8b</span>           <span class="hljs-comment"># æŒ‡å®šè¦ä½¿ç”¨çš„æ¨ç†æ¨¡å‹ï¼Œè¿™ä¸ª3060Tiè¿˜èƒ½è·‘èµ·æ¥</span>
      <span class="hljs-attr">embedding:</span>
        <span class="hljs-attr">model:</span> <span class="hljs-string">nomic-embed-text:latest</span>  <span class="hljs-comment"># æ–‡æœ¬åµŒå…¥æ¨¡å‹ï¼Œç»´åº¦768</span>

<span class="hljs-attr">initKnowledge:</span> <span class="hljs-literal">false</span> <span class="hljs-comment"># æ˜¯å¦åˆå§‹åŒ–åˆ°å‘é‡æ•°æ®åº“ã€‚åªè¿è¡Œå›æ¬¡å°±è¡Œ</span>
<span class="hljs-attr">milvus:</span>
  <span class="hljs-attr">host:</span> <span class="hljs-string">mydevcvm</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">19530</span>
  <span class="hljs-attr">token:</span> <span class="hljs-string">"root:Milvus"</span>
  <span class="hljs-attr">database:</span> <span class="hljs-string">"default"</span> <span class="hljs-comment"># ä½¿ç”¨é»˜è®¤çš„</span>
  <span class="hljs-attr">collection:</span> <span class="hljs-string">"ollamarag1"</span>
  <span class="hljs-attr">initializeSchema:</span> <span class="hljs-literal">false</span> <span class="hljs-comment"># milvusä¸­çš„databaseè¦å…ˆåˆ›å»ºå¥½ã€‚collectionå¯ä»¥ä¸ç”¨åˆ›å»ºï¼›è¿™ä¸ªå­—æ®µç¬¬ä¸€æ¬¡ä¸ºtrueï¼Œä»¥åè¿è¡Œä¸ºfalse</span>
</code></pre>
<h3 data-id="heading-5">å‘é‡æ•°æ®åº“</h3>
<p><code>nomic-embed-text:latest</code>Â çš„å‘é‡ç»´åº¦æ˜¯<strong>768</strong>è€Œé 1536</p>
<p>ä¸ºäº†æ–¹ä¾¿æ”¹å›å»ï¼Œé¡¹ç›®è¿˜å¼•å…¥äº† spring-ai-alibaba-starterå¯åŠ¨å™¨ å’Œç›¸å…³çš„é…ç½®ã€‚å› æ­¤ä¼šæœ‰ä¸¤ä¸ªChat Modelå’ŒEmbedding Modelï¼Œæ‰€ä»¥è¦ç”¨ <code>@Qualifier("ollamaEmbeddingModel")</code>å’Œ <code>@Qualifier("ollamaChatModel")</code>æŒ‡å®šä¸€ä¸‹ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// VectorStoreConfig.java</span>
<span class="hljs-meta">@Bean</span>
<span class="hljs-keyword">public</span> VectorStore <span class="hljs-title function_">vectorStore</span><span class="hljs-params">(MilvusServiceClient milvusClient, <span class="hljs-meta">@Qualifier("ollamaEmbeddingModel")</span> EmbeddingModel embeddingModel)</span> {
    <span class="hljs-keyword">return</span> MilvusVectorStore.builder(milvusClient, embeddingModel) <span class="hljs-comment">//  åµŒå…¥æ¨¡å‹å®ä¾‹ï¼Œç”¨äºå°†æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡è¡¨ç¤º</span>
            .collectionName(collection).databaseName(database).embeddingDimension(<span class="hljs-number">768</span>) 
            .indexType(IndexType.IVF_FLAT) <span class="hljs-comment">// è®¾ç½®ä¸ºIVF_FLATï¼ˆå€’æ’æ–‡ä»¶Flatç´¢å¼•ï¼‰ï¼Œæ˜¯ä¸€ç§å¸¸ç”¨çš„è¿‘ä¼¼æœ€è¿‘é‚»æœç´¢ç´¢å¼•</span>
            .metricType(MetricType.COSINE).batchingStrategy(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TokenCountBatchingStrategy</span>()).initializeSchema(initializeSchema).build();
    }
</code></pre>
<h3 data-id="heading-6">åµŒå…¥å¹¶å­˜å‚¨å‘é‡æ•°æ®åº“</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// KnowledgeInitializer.java</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">KnowledgeInitializer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ApplicationRunner</span> {
    <span class="hljs-meta">@Value("${initKnowledge}")</span>
    <span class="hljs-keyword">private</span> Boolean initKnowledge;

    <span class="hljs-meta">@Value("classpath:/docs/handbook.pdf")</span>
    <span class="hljs-keyword">private</span> Resource springAiResource;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> VectorStore vectorStore;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(KnowledgeInitializer.class);

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(ApplicationArguments args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-keyword">if</span> (!initKnowledge) {
            logger.info(<span class="hljs-string">"initKnowledge is false, skip init"</span>);
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-comment">// 1. parse document</span>
        <span class="hljs-type">DocumentReader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PagePdfDocumentReader</span>(springAiResource);
        List&lt;Document&gt; documents = reader.get();
        logger.info(<span class="hljs-string">"{} documents loaded"</span>, documents.size());

        <span class="hljs-comment">// 2. split trunks</span>
        List&lt;Document&gt; splitDocuments = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TokenTextSplitter</span>().apply(documents);
        logger.info(<span class="hljs-string">"{} documents split"</span>, splitDocuments.size());

        <span class="hljs-comment">// 3. create embedding and store to vector store</span>
        logger.info(<span class="hljs-string">"create embedding and save to vector store"</span>);
        vectorStore.add(splitDocuments);

    }
}
</code></pre>
<h3 data-id="heading-7">rag service</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// AIRagService</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AIRagService</span> {
    <span class="hljs-comment">// å¼•å…¥ system prompt tmpl</span>
    <span class="hljs-meta">@Value("classpath:/docs/system-qa.st")</span>
    <span class="hljs-keyword">private</span> Resource systemResource;

    <span class="hljs-comment">// æ³¨å…¥ç›¸å…³ bean å®ä¾‹</span>
    <span class="hljs-meta">@Qualifier("ollamaChatModel")</span>
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ChatModel ragChatModel;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> VectorStore vectorStore;

    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getPromptTemplate</span><span class="hljs-params">(Resource systemResource)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> systemResource.getContentAsString(StandardCharsets.UTF_8);
        } <span class="hljs-keyword">catch</span> (IOException e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
        }
    }

    <span class="hljs-comment">// æ–‡æœ¬è¿‡æ»¤ï¼Œå¢å¼ºå‘é‡æ£€ç´¢ç²¾åº¦    private static final String textField = "content";</span>
    <span class="hljs-comment">// ......</span>
    <span class="hljs-keyword">public</span> Flux&lt;String&gt; <span class="hljs-title function_">retrieve</span><span class="hljs-params">(String prompt)</span> {
        <span class="hljs-comment">// åŠ è½½ prompt tmpl</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">promptTemplate</span> <span class="hljs-operator">=</span> getPromptTemplate(systemResource);
        <span class="hljs-comment">// å¯ç”¨æ··åˆæœç´¢ï¼ŒåŒ…æ‹¬åµŒå…¥å’Œå…¨æ–‡æœç´¢</span>
        <span class="hljs-type">SearchRequest</span> <span class="hljs-variable">searchRequest</span> <span class="hljs-operator">=</span> SearchRequest.builder().topK(<span class="hljs-number">4</span>).similarityThresholdAll().build();
        <span class="hljs-comment">// build chatClientï¼Œå‘èµ·å¤§æ¨¡å‹æœåŠ¡è°ƒç”¨ã€‚</span>
        <span class="hljs-keyword">return</span> ChatClient.builder(ragChatModel).build().prompt().advisors(<span class="hljs-keyword">new</span> <span class="hljs-title class_">QuestionAnswerAdvisor</span>(vectorStore, searchRequest, promptTemplate)).user(prompt).stream().content();
    }
}
</code></pre>
<h3 data-id="heading-8">è®¿é—®éªŒè¯</h3>
<p>æµè§ˆå™¨åœ°å€æ è¾“å…¥ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Frag%2F%3Fmessage%3D%25E7%258E%25B0%25E5%259C%25A8%25E6%2588%2591%25E4%25BB%25AC%25E8%25BA%25AB%25E8%25BE%25B9%25E4%25B8%2580%25E4%25BA%259B%25E8%2580%2581%25E5%25B9%25B4%25E4%25BA%25BA%25E6%2584%259F%25E6%259F%2593%25E5%2590%258E%25E7%2597%2585%25E6%2583%2585%25E5%25B0%25B1%25E5%25BE%2588%25E9%2587%258D%25EF%25BC%258C%25E9%2582%25A3%25E6%2598%25AF%25E4%25B8%258D%25E6%2598%25AF%25E8%2580%2581%25E5%25B9%25B4%25E4%25BA%25BA%25E6%2584%259F%25E6%259F%2593%25E5%2590%258E%25E4%25B8%2580%25E5%25AE%259A%25E4%25BC%259A%25E8%25B5%25B0%25E5%2590%2591%25E9%2587%258D%25E7%2597%2587%25E5%2592%258C%25E5%258D%25B1%25E9%2587%258D%25E7%2597%2587" target="_blank" title="http://localhost:8080/rag/?message=%E7%8E%B0%E5%9C%A8%E6%88%91%E4%BB%AC%E8%BA%AB%E8%BE%B9%E4%B8%80%E4%BA%9B%E8%80%81%E5%B9%B4%E4%BA%BA%E6%84%9F%E6%9F%93%E5%90%8E%E7%97%85%E6%83%85%E5%B0%B1%E5%BE%88%E9%87%8D%EF%BC%8C%E9%82%A3%E6%98%AF%E4%B8%8D%E6%98%AF%E8%80%81%E5%B9%B4%E4%BA%BA%E6%84%9F%E6%9F%93%E5%90%8E%E4%B8%80%E5%AE%9A%E4%BC%9A%E8%B5%B0%E5%90%91%E9%87%8D%E7%97%87%E5%92%8C%E5%8D%B1%E9%87%8D%E7%97%87" ref="nofollow noopener noreferrer">http://localhost:8080/rag/?message=ç°åœ¨æˆ‘ä»¬èº«è¾¹ä¸€äº›è€å¹´äººæ„ŸæŸ“åç—…æƒ…å°±å¾ˆé‡ï¼Œé‚£æ˜¯ä¸æ˜¯è€å¹´äººæ„ŸæŸ“åä¸€å®šä¼šèµ°å‘é‡ç—‡å’Œå±é‡ç—‡</a></p>
<pre><code class="hljs language-markdown" lang="markdown">è¿™æ˜¯ä¸€ä¸ªéå¸¸å…³å¿ƒçš„é—®é¢˜ï¼Œä½†ç­”æ¡ˆ<span class="hljs-strong">**å¹¶ä¸ç®€å•ï¼Œä¹Ÿä¸æ˜¯ç»å¯¹çš„â€œæ˜¯â€æˆ–â€œå¦â€**</span>ã€‚

è€å¹´äººæ„ŸæŸ“æ–°å† ç—…æ¯’åï¼Œ<span class="hljs-strong">**å‘å±•ä¸ºé‡ç—‡å’Œå±é‡ç—‡çš„é£é™©ç¡®å®æ¯”å¹´è½»å¥åº·äººç¾¤è¦é«˜å¾—å¤š**</span>ï¼Œä½†è¿™<span class="hljs-strong">**å¹¶ä¸æ„å‘³ç€æ‰€æœ‰**</span>è€å¹´äººæ„ŸæŸ“åéƒ½ä¼šå¿…ç„¶èµ°å‘é‡ç—‡å’Œå±é‡ç—‡ã€‚æ„ŸæŸ“åçš„ä¸¥é‡ç¨‹åº¦å—åˆ°å¤šç§å› ç´ çš„å½±å“ï¼Œä¸»è¦åŒ…æ‹¬ï¼š

<span class="hljs-bullet">1.</span>  <span class="hljs-strong">**å¹´é¾„**</span>ï¼šå¹´é¾„è¶Šå¤§ï¼Œé£é™©é€šå¸¸è¶Šé«˜ã€‚é«˜é¾„è€äººï¼ˆå°¤å…¶æ˜¯80å²ä»¥ä¸Šï¼‰é£é™©æœ€é«˜ã€‚
<span class="hljs-bullet">2.</span>  <span class="hljs-strong">**åŸºç¡€å¥åº·çŠ¶å†µ**</span>ï¼š<span class="hljs-strong">**åˆå¹¶ç—‡**</span>æ˜¯æœ€é‡è¦çš„é£é™©å› ç´ ã€‚æ‚£æœ‰<span class="hljs-strong">**å¿ƒè¡€ç®¡ç–¾ç—…ã€ç³–å°¿ç—…ã€æ…¢æ€§è‚ºç—…ã€å…ç–«ç¼ºé™·ã€ç™Œç—‡ã€æ…¢æ€§è‚¾ç—…ã€è‚¥èƒ–**</span>ç­‰åŸºç¡€ç–¾ç—…ï¼Œä»¥åŠ<span class="hljs-strong">**å…ç–«åŠŸèƒ½ä½ä¸‹**</span>çš„è€å¹´äººï¼Œæ„ŸæŸ“åå‘å±•ä¸ºé‡ç—‡çš„é£é™©æ˜¾è‘—å¢åŠ ã€‚
<span class="hljs-bullet">3.</span>  <span class="hljs-strong">**ç–«è‹—æ¥ç§æƒ…å†µ**</span>ï¼šå®Œæˆç–«è‹—ï¼ˆåŒ…æ‹¬åŠ å¼ºé’ˆï¼‰æ¥ç§ï¼Œç‰¹åˆ«æ˜¯æœ‰æ•ˆç–«è‹—ï¼Œå¯ä»¥æ˜¾è‘—é™ä½é‡ç—‡å’Œæ­»äº¡é£é™©ã€‚
<span class="hljs-bullet">4.</span>  <span class="hljs-strong">**æ„ŸæŸ“çš„ç—…æ¯’æ¯’æ ªå’Œå˜ç§**</span>ï¼šä¸åŒæ¯’æ ªçš„è‡´ç—…åŠ›å’Œä¼ æ’­æ€§ä¸åŒï¼Œæ„ŸæŸ“ä¸åŒæ¯’æ ªçš„é£é™©å’Œä¸¥é‡ç¨‹åº¦ä¹Ÿä¼šæœ‰æ‰€å·®å¼‚ã€‚
<span class="hljs-bullet">5.</span>  <span class="hljs-strong">**æ„ŸæŸ“æ—¶çš„èº«ä½“çŠ¶å†µå’Œå…ç–«ååº”**</span>ï¼šä¸ªä½“å¯¹ç—…æ¯’çš„ååº”ä¸åŒï¼Œæœ‰äº›è€äººå³ä½¿æœ‰åŸºç¡€ç—…ï¼Œä½†æ„ŸæŸ“æ—¶çŠ¶æ€è¾ƒå¥½ï¼Œå…ç–«ç³»ç»Ÿååº”é€‚å½“ï¼Œä¹Ÿå¯èƒ½ç›¸å¯¹è¾ƒè½»ã€‚
<span class="hljs-bullet">6.</span>  <span class="hljs-strong">**åŒ»ç–—æ”¯æŒ**</span>ï¼šåŠæ—¶çš„åŒ»ç–—å¹²é¢„ã€æ°§ç–—ã€æŠ—ç—…æ¯’è¯ç‰©ï¼ˆå¦‚Paxlovidï¼‰å’Œæœ‰æ•ˆçš„æ”¯æŒæ²»ç–—å¯ä»¥æ˜¾è‘—æ”¹å–„é¢„åï¼Œé¿å…èµ°å‘å±é‡ç—‡ã€‚

<span class="hljs-strong">**æ€»ç»“æ¥è¯´ï¼š**</span>

<span class="hljs-bullet">*</span>   è€å¹´äººæ˜¯<span class="hljs-strong">**æ„ŸæŸ“åå‘å±•ä¸ºé‡ç—‡çš„é«˜å±äººç¾¤**</span>ï¼Œè¿™æ˜¯æ¯‹åº¸ç½®ç–‘çš„ã€‚
<span class="hljs-bullet">*</span>   <span class="hljs-strong">**ä½†æ˜¯ï¼Œä¸ªä½“å·®å¼‚å¾ˆå¤§**</span>ã€‚å¹¶éæ‰€æœ‰è€å¹´äººéƒ½ä¼šç»å†åŒæ ·çš„ä¸¥é‡ç¨‹åº¦ã€‚å¾ˆå¤šè€å¹´äººåœ¨æ„ŸæŸ“åå¯èƒ½åªæ˜¯å‡ºç°ç±»ä¼¼æ„Ÿå†’æˆ–æµæ„Ÿçš„ç—‡çŠ¶ã€‚
<span class="hljs-bullet">*</span>   <span class="hljs-strong">**å…³é”®åœ¨äºé¢„é˜²å’Œæ—©æœŸå¹²é¢„**</span>ã€‚é€šè¿‡æ¥ç§ç–«è‹—ã€åšå¥½é˜²æŠ¤ã€ç®¡ç†åŸºç¡€ç–¾ç—…ã€ä»¥åŠåœ¨å‡ºç°ç—‡çŠ¶æ—¶åŠæ—¶å°±åŒ»ï¼Œå¯ä»¥å¤§å¤§é™ä½è€å¹´äººèµ°å‘é‡ç—‡å’Œå±é‡ç—‡çš„é£é™©ã€‚

å› æ­¤ï¼Œä¸å…¶è¯´â€œè€å¹´äººæ„ŸæŸ“åä¸€å®šä¼šèµ°å‘é‡ç—‡â€ï¼Œä¸å¦‚è¯´â€œ<span class="hljs-strong">**è€å¹´äººæ„ŸæŸ“æ–°å† ç—…æ¯’åï¼Œæœ‰å¾ˆé«˜çš„é£é™©å‘å±•ä¸ºé‡ç—‡ï¼Œç‰¹åˆ«æ˜¯é‚£äº›æœ‰åŸºç¡€ç–¾ç—…å’Œå…ç–«åŠŸèƒ½ä½ä¸‹çš„è€äºº**</span>â€ã€‚æˆ‘ä»¬éœ€è¦å¯¹è€å¹´äººç¾¤ç»™äºˆç‰¹åˆ«çš„å…³æ³¨å’Œä¿æŠ¤ã€‚
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SQL è¯­å¥å·¦è¿æ¥å³è¿æ¥å†…è¿æ¥å¦‚ä½•ä½¿ç”¨ï¼ŒåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7572485825705607177</link>    <guid>https://juejin.cn/post/7572485825705607177</guid>    <pubDate>2025-11-15T08:12:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572485825705607177" data-draft-id="7572510909445210162" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SQL è¯­å¥å·¦è¿æ¥å³è¿æ¥å†…è¿æ¥å¦‚ä½•ä½¿ç”¨ï¼ŒåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-11-15T08:12:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å°å‡"/> <meta itemprop="url" content="https://juejin.cn/user/2285197690931932"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SQL è¯­å¥å·¦è¿æ¥å³è¿æ¥å†…è¿æ¥å¦‚ä½•ä½¿ç”¨ï¼ŒåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2285197690931932/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å°å‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T08:12:39.000Z" title="Sat Nov 15 2025 08:12:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<h3 data-id="heading-0">Â æ ¸å¿ƒæ¦‚å¿µ</h3>
<p>è¿æ¥ï¼ˆJOINï¼‰ç”¨äºæ ¹æ®ä¸¤ä¸ªæˆ–å¤šä¸ªè¡¨ä¸­çš„åˆ—ä¹‹é—´çš„å…³ç³»ï¼Œä»è¿™äº›è¡¨ä¸­æŸ¥è¯¢æ•°æ®ã€‚ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£ï¼Œæˆ‘ä»¬å‡è®¾æœ‰ä¸¤ä¸ªè¡¨ï¼š</p>
<p><code>å‘˜å·¥è¡¨ (Employees)</code></p>






























<table><thead><tr><th/><th/><th/></tr></thead><tbody><tr><td>employee_id</td><td>name</td><td>department_id</td></tr><tr><td>1</td><td>å¼ ä¸‰</td><td>101</td></tr><tr><td>2</td><td>æå››</td><td>102</td></tr><tr><td>3</td><td>ç‹äº”</td><td>NULL</td></tr></tbody></table>
<p><code>éƒ¨é—¨è¡¨ (Departments)</code></p>

























<table><thead><tr><th/><th/></tr></thead><tbody><tr><td>department_id</td><td>department_name</td></tr><tr><td>101</td><td>æŠ€æœ¯éƒ¨</td></tr><tr><td>102</td><td>é”€å”®éƒ¨</td></tr><tr><td>103</td><td>å¸‚åœºéƒ¨</td></tr></tbody></table>
<h3 data-id="heading-1">å†…è¿æ¥ (INNER JOIN)</h3>
<p><strong>å®šä¹‰</strong>ï¼šåªè¿”å›ä¸¤ä¸ªè¡¨ä¸­<strong>è¿æ¥æ¡ä»¶åŒ¹é…</strong>çš„è®°å½•ã€‚</p>
<p><strong>ç»“æœ</strong>ï¼šä¸¤ä¸ªè¡¨çš„<strong>äº¤é›†</strong>éƒ¨åˆ†ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šå½“ä½ åªæƒ³æŸ¥çœ‹åœ¨ä¸¤è¾¹è¡¨ä¸­éƒ½æœ‰å¯¹åº”ä¿¡æ¯çš„è®°å½•æ—¶ã€‚ä¾‹å¦‚ï¼ŒæŸ¥è¯¢æ‰€æœ‰æœ‰éƒ¨é—¨çš„å‘˜å·¥åŠå…¶éƒ¨é—¨ä¿¡æ¯ã€‚</p>
<p><strong>SQLè¯­å¥</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> 
    e.name,
    d.department_name
<span class="hljs-keyword">FROM</span> 
    Employees e
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
    Departments d <span class="hljs-keyword">ON</span> e.department_id <span class="hljs-operator">=</span> d.department_id;
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p><strong>æŸ¥è¯¢ç»“æœ</strong>ï¼š</p>





















<table><thead><tr><th/><th/></tr></thead><tbody><tr><td>name</td><td>department_name</td></tr><tr><td>å¼ ä¸‰</td><td>æŠ€æœ¯éƒ¨</td></tr><tr><td>æå››</td><td>é”€å”®éƒ¨</td></tr></tbody></table>
<p><strong>æ³¨æ„</strong>ï¼šå‘˜å·¥â€œç‹äº”â€çš„<code>department_id</code>ä¸ºNULLï¼Œåœ¨éƒ¨é—¨è¡¨ä¸­æ‰¾ä¸åˆ°åŒ¹é…é¡¹ï¼Œæ‰€ä»¥æ²¡æœ‰å‡ºç°ã€‚éƒ¨é—¨â€œå¸‚åœºéƒ¨â€åœ¨å‘˜å·¥è¡¨ä¸­æ²¡æœ‰å¯¹åº”çš„å‘˜å·¥ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰å‡ºç°ã€‚</p>
<h3 data-id="heading-2">å·¦å¤–è¿æ¥ (LEFT JOIN / LEFT OUTER JOIN)</h3>
<p><strong>å®šä¹‰</strong>ï¼šè¿”å›<strong>å·¦è¡¨ (FROMå­å¥ä¸­çš„è¡¨)</strong> çš„æ‰€æœ‰è®°å½•ï¼Œä»¥åŠå³è¡¨ä¸­è¿æ¥æ¡ä»¶åŒ¹é…çš„è®°å½•ã€‚å¦‚æœå³è¡¨æ²¡æœ‰åŒ¹é…çš„è®°å½•ï¼Œåˆ™ç»“æœé›†ä¸­å³è¡¨çš„éƒ¨åˆ†è¿”å›NULLã€‚</p>
<p><strong>ç»“æœ</strong>ï¼šå·¦è¡¨çš„å…¨é›† + å³è¡¨çš„åŒ¹é…éƒ¨åˆ†ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šå½“ä½ éœ€è¦å·¦è¡¨çš„æ‰€æœ‰è®°å½•ï¼Œæ— è®ºå®ƒä»¬åœ¨å³è¡¨ä¸­æ˜¯å¦æœ‰å¯¹åº”é¡¹ã€‚ä¾‹å¦‚ï¼Œåˆ—å‡ºæ‰€æœ‰å‘˜å·¥ï¼Œå¹¶æ˜¾ç¤ºä»–ä»¬æ‰€åœ¨çš„éƒ¨é—¨ï¼ˆå³ä½¿æŸäº›å‘˜å·¥æ²¡æœ‰éƒ¨é—¨ï¼‰ã€‚</p>
<p><strong>SQLè¯­å¥</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> 
    e.name,
    d.department_name
<span class="hljs-keyword">FROM</span> 
    Employees e
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> 
    Departments d <span class="hljs-keyword">ON</span> e.department_id <span class="hljs-operator">=</span> d.department_id;
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p><strong>æŸ¥è¯¢ç»“æœ</strong>ï¼š</p>

























<table><thead><tr><th/><th/></tr></thead><tbody><tr><td>name</td><td>department_name</td></tr><tr><td>å¼ ä¸‰</td><td>æŠ€æœ¯éƒ¨</td></tr><tr><td>æå››</td><td>é”€å”®éƒ¨</td></tr><tr><td>ç‹äº”</td><td>NULL</td></tr></tbody></table>
<p><strong>æ³¨æ„</strong>ï¼šå‘˜å·¥â€œç‹äº”â€è¢«åŒ…å«åœ¨ç»“æœä¸­ï¼Œä½†å› ä¸ºä»–ä¸å±äºä»»ä½•éƒ¨é—¨ï¼Œæ‰€ä»¥<code>department_name</code>ä¸ºNULLã€‚</p>
<h3 data-id="heading-3">å³å¤–è¿æ¥ (RIGHT JOIN / RIGHT OUTER JOIN)</h3>
<p><strong>å®šä¹‰</strong>ï¼šä¸å·¦è¿æ¥ç›¸åã€‚è¿”å›<strong>å³è¡¨ (JOINå­å¥ä¸­çš„è¡¨)</strong> çš„æ‰€æœ‰è®°å½•ï¼Œä»¥åŠå·¦è¡¨ä¸­è¿æ¥æ¡ä»¶åŒ¹é…çš„è®°å½•ã€‚å¦‚æœå·¦è¡¨æ²¡æœ‰åŒ¹é…çš„è®°å½•ï¼Œåˆ™ç»“æœé›†ä¸­å·¦è¡¨çš„éƒ¨åˆ†è¿”å›NULLã€‚</p>
<p><strong>ç»“æœ</strong>ï¼šå³è¡¨çš„å…¨é›† + å·¦è¡¨çš„åŒ¹é…éƒ¨åˆ†ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šå½“ä½ éœ€è¦å³è¡¨çš„æ‰€æœ‰è®°å½•ï¼Œæ— è®ºå®ƒä»¬åœ¨å·¦è¡¨ä¸­æ˜¯å¦æœ‰å¯¹åº”é¡¹ã€‚ä¾‹å¦‚ï¼Œåˆ—å‡ºæ‰€æœ‰éƒ¨é—¨ï¼Œå¹¶æ˜¾ç¤ºéƒ¨é—¨é‡Œçš„å‘˜å·¥ï¼ˆå³ä½¿æŸäº›éƒ¨é—¨æ²¡æœ‰å‘˜å·¥ï¼‰ã€‚</p>
<p><strong>SQLè¯­å¥</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> 
    e.name,
    d.department_name
<span class="hljs-keyword">FROM</span> 
    Employees e
<span class="hljs-keyword">RIGHT</span> <span class="hljs-keyword">JOIN</span> 
    Departments d <span class="hljs-keyword">ON</span> e.department_id <span class="hljs-operator">=</span> d.department_id;
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p><strong>æŸ¥è¯¢ç»“æœ</strong>ï¼š</p>

























<table><thead><tr><th/><th/></tr></thead><tbody><tr><td>name</td><td>department_name</td></tr><tr><td>å¼ ä¸‰</td><td>æŠ€æœ¯éƒ¨</td></tr><tr><td>æå››</td><td>é”€å”®éƒ¨</td></tr><tr><td>NULL</td><td>å¸‚åœºéƒ¨</td></tr></tbody></table>
<p><strong>æ³¨æ„</strong>ï¼šéƒ¨é—¨â€œå¸‚åœºéƒ¨â€è¢«åŒ…å«åœ¨ç»“æœä¸­ï¼Œä½†å› ä¸ºè¯¥éƒ¨é—¨æ²¡æœ‰å‘˜å·¥ï¼Œæ‰€ä»¥<code>name</code>ä¸ºNULLã€‚</p>
<h3 data-id="heading-4">å…¨å¤–è¿æ¥ (FULL OUTER JOIN)</h3>
<p><strong>å®šä¹‰</strong>ï¼šè¿”å›å·¦è¡¨å’Œå³è¡¨ä¸­çš„æ‰€æœ‰è®°å½•ã€‚å½“æŸä¸€è¡Œåœ¨å¦ä¸€ä¸ªè¡¨ä¸­æ²¡æœ‰åŒ¹é…è¡Œæ—¶ï¼Œå¦ä¸€ä¸ªè¡¨çš„éƒ¨åˆ†å°†è¿”å›NULLã€‚å¦‚æœè¡¨ä¹‹é—´æœ‰åŒ¹é…çš„è¡Œï¼Œåˆ™è¿”å›åŒ¹é…è¡Œã€‚</p>
<p><strong>ç»“æœ</strong>ï¼šä¸¤ä¸ªè¡¨çš„<strong>å¹¶é›†</strong>ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šå½“ä½ éœ€è¦çœ‹åˆ°ä¸¤ä¸ªè¡¨çš„æ‰€æœ‰æ•°æ®ï¼Œæ— è®ºå®ƒä»¬æ˜¯å¦åŒ¹é…ã€‚ä¾‹å¦‚ï¼Œç”Ÿæˆä¸€ä¸ªåŒ…å«æ‰€æœ‰å‘˜å·¥å’Œæ‰€æœ‰éƒ¨é—¨çš„å®Œæ•´åˆ—è¡¨ã€‚</p>
<p><strong>SQLè¯­å¥</strong>ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">-- æ³¨æ„ï¼šMySQLä¸æ”¯æŒFULL OUTER <span class="hljs-keyword">JOIN</span>ï¼Œä½†å¯ç”¨LEFT <span class="hljs-keyword">JOIN</span>å’ŒRIGHT <span class="hljs-keyword">JOIN</span>çš„UNIONæ¥å®ç°
<span class="hljs-keyword">SELECT</span> 
    e.name,
    d.department_name
<span class="hljs-keyword">FROM</span> 
    Employees e
LEFT <span class="hljs-keyword">JOIN</span> 
    Departments d <span class="hljs-keyword">ON</span> e.department_id = d.department_id

UNION

<span class="hljs-keyword">SELECT</span> 
    e.name,
    d.department_name
<span class="hljs-keyword">FROM</span> 
    Employees e
RIGHT <span class="hljs-keyword">JOIN</span> 
    Departments d <span class="hljs-keyword">ON</span> e.department_id = d.department_id;
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p><strong>æŸ¥è¯¢ç»“æœ</strong>ï¼š</p>





























<table><thead><tr><th/><th/></tr></thead><tbody><tr><td>name</td><td>department_name</td></tr><tr><td>å¼ ä¸‰</td><td>æŠ€æœ¯éƒ¨</td></tr><tr><td>æå››</td><td>é”€å”®éƒ¨</td></tr><tr><td>ç‹äº”</td><td>NULL</td></tr><tr><td>NULL</td><td>å¸‚åœºéƒ¨</td></tr></tbody></table>
<p><strong>æ³¨æ„</strong>ï¼šè¿™ä¸ªç»“æœåŒ…å«äº†å·¦è¿æ¥å’Œå³è¿æ¥çš„æ‰€æœ‰è®°å½•ã€‚</p>
<h3 data-id="heading-5">æ€»ç»“ä¸åŒºåˆ«</h3>









































<table><thead><tr><th/><th/><th/><th/></tr></thead><tbody><tr><td>è¿æ¥ç±»å‹</td><td>å…³é”®å­—</td><td>æè¿°</td><td>ç»“æœé›†ï¼ˆåŸºäºç¤ºä¾‹ï¼‰</td></tr><tr><td><strong>å†…è¿æ¥</strong></td><td><code>INNER JOIN</code></td><td>åªè¿”å›ä¸¤ä¸ªè¡¨<strong>åŒ¹é…</strong>çš„è®°å½•ã€‚</td><td>å¼ ä¸‰(æŠ€æœ¯éƒ¨), æå››(é”€å”®éƒ¨)</td></tr><tr><td><strong>å·¦è¿æ¥</strong></td><td><code>LEFT JOIN</code></td><td>è¿”å›<strong>å·¦è¡¨å…¨éƒ¨</strong>è®°å½• + <strong>å³è¡¨åŒ¹é…</strong>çš„è®°å½•ã€‚</td><td>å¼ ä¸‰(æŠ€æœ¯éƒ¨), æå››(é”€å”®éƒ¨), ç‹äº”(NULL)</td></tr><tr><td><strong>å³è¿æ¥</strong></td><td><code>RIGHT JOIN</code></td><td>è¿”å›<strong>å³è¡¨å…¨éƒ¨</strong>è®°å½• + <strong>å·¦è¡¨åŒ¹é…</strong>çš„è®°å½•ã€‚</td><td>å¼ ä¸‰(æŠ€æœ¯éƒ¨), æå››(é”€å”®éƒ¨), NULL(å¸‚åœºéƒ¨)</td></tr><tr><td><strong>å…¨å¤–è¿æ¥</strong></td><td><code>FULL OUTER JOIN</code></td><td>è¿”å›<strong>å·¦å³ä¸¤è¡¨å…¨éƒ¨</strong>è®°å½•ã€‚</td><td>å¼ ä¸‰(æŠ€æœ¯éƒ¨), æå››(é”€å”®éƒ¨), ç‹äº”(NULL), NULL(å¸‚åœºéƒ¨)</td></tr></tbody></table>
<h3 data-id="heading-6">è®°å¿†æŠ€å·§</h3>
<p>å¯ä»¥å€ŸåŠ©<strong>éŸ¦æ©å›¾ (Venn Diagram)</strong> æ¥è®°å¿†ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/66db546d314b41d788e324d9e0ecfd77~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5bCP5YGH:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763799234&amp;x-signature=qw26b1izjK8EM8M61YInrbqmr%2Fo%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å­¦ä¹ React-DnDï¼šæ ¸å¿ƒç»„ä»¶ä¸Hooks]]></title>    <link>https://juejin.cn/post/7572405211442135083</link>    <guid>https://juejin.cn/post/7572405211442135083</guid>    <pubDate>2025-11-15T07:37:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572405211442135083" data-draft-id="7572465262738948115" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å­¦ä¹ React-DnDï¼šæ ¸å¿ƒç»„ä»¶ä¸Hooks"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-15T07:37:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Wect"/> <meta itemprop="url" content="https://juejin.cn/user/4185164878720068"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å­¦ä¹ React-DnDï¼šæ ¸å¿ƒç»„ä»¶ä¸Hooks
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4185164878720068/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Wect
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T07:37:16.000Z" title="Sat Nov 15 2025 07:37:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸Šä¸€ç¯‡æˆ‘ä»¬å®Œæˆäº†React-DnDçš„ç¯å¢ƒæ­å»ºï¼Œé€šè¿‡å®‰è£…ä¾èµ–å’Œå…¨å±€æ³¨å…¥åç«¯ï¼Œè®©æ•´ä¸ªåº”ç”¨å…·å¤‡äº†æ‹–æ”¾èƒ½åŠ›çš„åŸºç¡€ã€‚è¿™ä¸€ç¯‡ï¼Œæˆ‘ä»¬å°†æ·±å…¥React-DnDçš„æ ¸å¿ƒâ€”â€”é‚£äº›æ”¯æ’‘èµ·æ‹–æ”¾åŠŸèƒ½çš„ç»„ä»¶å’ŒHooksã€‚ä»å…¨å±€ç®¡ç†çš„DndProviderï¼Œåˆ°å®šä¹‰æ‹–åŠ¨æºçš„useDragã€æ‹–æ”¾ç›®æ ‡çš„useDropï¼Œæ¯ä¸€ä¸ªéƒ½è‡³å…³é‡è¦ã€‚æŒæ¡å®ƒä»¬ï¼Œä½ å°±èƒ½è½»æ¾å®ç°å„ç§å¤æ‚çš„æ‹–æ”¾åœºæ™¯ã€‚</p>
<p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œå…ˆæ˜ç¡®ä¸€ä¸ªæ ¸å¿ƒé€»è¾‘ï¼šReact-DnDé€šè¿‡â€œç»„ä»¶æä¾›ä¸Šä¸‹æ–‡ + Hooksè¿æ¥ç»„ä»¶â€çš„æ¨¡å¼å·¥ä½œã€‚DndProviderä½œä¸ºä¸Šä¸‹æ–‡æä¾›è€…ï¼Œä¸ºæ‰€æœ‰å­ç»„ä»¶ä¼ é€’æ‹–æ”¾èƒ½åŠ›ï¼›è€ŒuseDragã€useDropç­‰Hooksåˆ™è´Ÿè´£å°†æ™®é€šç»„ä»¶â€œæ”¹é€ â€ä¸ºæ‹–åŠ¨æºæˆ–æ‹–æ”¾ç›®æ ‡ï¼Œå®ç°å…·ä½“çš„äº¤äº’é€»è¾‘ã€‚ä¸‹é¢æˆ‘ä»¬é€ä¸ªæ‹†è§£ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æ ¸å¿ƒç»„ä»¶ï¼šæ‹–æ”¾èƒ½åŠ›çš„â€œåŸºçŸ³â€</h2>
<p>React-DnDçš„ç»„ä»¶æ•°é‡ä¸å¤šï¼Œä½†æ¯ä¸€ä¸ªéƒ½æ˜¯æ„å»ºæ‹–æ”¾åŠŸèƒ½çš„å…³é”®ã€‚å…¶ä¸­DndProvideræ˜¯å¿…ç”¨ç»„ä»¶ï¼ŒDragPreviewImageåˆ™ç”¨äºä¼˜åŒ–æ‹–åŠ¨ä½“éªŒï¼Œæˆ‘ä»¬é‡ç‚¹è®²è§£è¿™ä¸¤ä¸ªã€‚</p>
<h3 data-id="heading-1">1. DndProviderï¼šæ‹–æ”¾ä¸Šä¸‹æ–‡çš„â€œæä¾›è€…â€</h3>
<p>å¦‚æœæŠŠReact-DnDçš„æ‹–æ”¾èƒ½åŠ›æ¯”ä½œâ€œæ°´ç”µâ€ï¼Œé‚£ä¹ˆDndProviderå°±æ˜¯â€œæ°´ç”µæ€»é—¸â€ã€‚å®ƒè´Ÿè´£å°†æ‹–æ”¾åç«¯çš„èƒ½åŠ›æ³¨å…¥åˆ°æ•´ä¸ªåº”ç”¨ï¼Œè®©æ‰€æœ‰å­ç»„ä»¶éƒ½èƒ½å…±äº«è¿™ä»½èƒ½åŠ›ã€‚ä¸Šä¸€ç¯‡æˆ‘ä»¬å·²ç»åœ¨å…¥å£æ–‡ä»¶ä¸­ç”¨è¿‡å®ƒï¼Œç°åœ¨æ¥æ·±å…¥ç†è§£å®ƒçš„æ ¸å¿ƒä½œç”¨å’Œé…ç½®é¡¹ã€‚</p>
<h4 data-id="heading-2">æ ¸å¿ƒä½œç”¨</h4>
<p>DndProviderçš„æœ¬è´¨æ˜¯ä¸€ä¸ªReactä¸Šä¸‹æ–‡ï¼ˆContextï¼‰çš„æä¾›è€…ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªæ‹–æ”¾ä¸Šä¸‹æ–‡ï¼Œå¹¶å°†åç«¯ï¼ˆå¦‚HTML5Backendï¼‰çš„åŠŸèƒ½ä¼ é€’ç»™æ‰€æœ‰å­ç»„ä»¶ã€‚è¿™æ ·ä¸€æ¥ï¼Œå­ç»„ä»¶é€šè¿‡useDragã€useDropç­‰Hookså°±èƒ½ç›´æ¥è·å–æ‹–æ”¾èƒ½åŠ›ï¼Œæ— éœ€å•ç‹¬é…ç½®åç«¯ã€‚</p>
<p>å¦‚æœä¸ä½¿ç”¨DndProvideråŒ…è£¹åº”ç”¨ï¼Œåç»­ç¼–å†™æ‹–åŠ¨æºæˆ–æ‹–æ”¾ç›®æ ‡æ—¶ä¼šç›´æ¥æŠ¥é”™â€”â€”ç»„ä»¶æ‰¾ä¸åˆ°æ‹–æ”¾ä¸Šä¸‹æ–‡ï¼Œå°±åƒæ²¡æ¥æ°´ç”µçš„æˆ¿å­æ— æ³•ä½¿ç”¨ç”µå™¨ä¸€æ ·ã€‚</p>
<h4 data-id="heading-3">å…³é”®é…ç½®é¡¹</h4>
<p>DndProviderçš„é…ç½®é¡¹ä¸å¤šï¼Œä½†æ¯ä¸€ä¸ªéƒ½æœ‰æ˜ç¡®çš„ç”¨é€”ï¼Œå…¶ä¸­backendæ˜¯å¿…å¡«é¡¹ï¼Œå…¶ä»–ä¸ºå¯é€‰é¡¹ã€‚</p>
<ul>
<li><strong>backendï¼ˆå¿…å¡«ï¼‰</strong> ï¼šReact-DnDçš„åç«¯å¼•æ“ï¼Œè´Ÿè´£å¤„ç†åŸç”ŸDOMäº‹ä»¶ï¼ˆå¦‚é¼ æ ‡æ‹–åŠ¨ã€æ‚¬åœï¼‰ï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºReact-DnDèƒ½è¯†åˆ«çš„é€»è¾‘ã€‚æˆ‘ä»¬å¼€å‘PCç«¯åº”ç”¨æ—¶ï¼ŒåŸºæœ¬éƒ½ä½¿ç”¨å®˜æ–¹æä¾›çš„react-dnd-html5-backendï¼›å¦‚æœæ˜¯ç§»åŠ¨ç«¯ï¼Œåˆ™å¯ä»¥ä½¿ç”¨react-dnd-touch-backendã€‚</li>
<li><strong>contextï¼ˆå¯é€‰ï¼‰</strong> ï¼šç”¨äºé…ç½®åç«¯çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œå…·ä½“ç”¨æ³•å–å†³äºä½ ä½¿ç”¨çš„åç«¯å®ç°ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½¿ç”¨é»˜è®¤é…ç½®å³å¯ï¼Œæ— éœ€é¢å¤–è®¾ç½®ã€‚</li>
<li><strong>optionsï¼ˆå¯é€‰ï¼‰</strong> ï¼šç”¨äºé…ç½®åç«¯çš„é€‰é¡¹å¯¹è±¡ï¼ŒåŒæ ·ä¾èµ–äºåç«¯å®ç°ã€‚ä¾‹å¦‚ï¼ŒæŸäº›åç«¯æ”¯æŒé…ç½®æ‹–åŠ¨çš„å»¶è¿Ÿæ—¶é—´ã€è§¦æ‘¸åé¦ˆç­‰ï¼Œéƒ½å¯ä»¥é€šè¿‡è¿™ä¸ªå‚æ•°ä¼ é€’ã€‚</li>
</ul>
<h4 data-id="heading-4">å®æˆ˜ç¤ºä¾‹ï¼ˆå›é¡¾ä¸å¼ºåŒ–ï¼‰</h4>
<p>åœ¨å…¥å£æ–‡ä»¶src/index.jsä¸­ï¼Œæˆ‘ä»¬ç”¨DndProvideråŒ…è£¹æ•´ä¸ªAppç»„ä»¶ï¼Œå¹¶æ³¨å…¥HTML5Backendã€‚è¿™é‡Œå†å¼ºè°ƒä¸€ä¸‹æ ¸å¿ƒä»£ç çš„é€»è¾‘ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom/client'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App'</span>;
<span class="hljs-comment">// å¯¼å…¥ DndProvider å’Œ HTML5Backend</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">DndProvider</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dnd'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">HTML5Backend</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dnd-html5-backend'</span>;

<span class="hljs-keyword">const</span> root = <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'root'</span>));
root.<span class="hljs-title function_">render</span>(
  <span class="hljs-comment">// ç”¨DndProvideråŒ…è£¹Appï¼Œæ³¨å…¥åç«¯</span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">DndProvider</span> <span class="hljs-attr">backend</span>=<span class="hljs-string">{HTML5Backend}</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">DndProvider</span>&gt;</span></span>
);
</code></pre>
<p>è¿™é‡Œçš„å…³é”®æ˜¯å°†HTML5Backendä½œä¸ºbackendå±æ€§ä¼ é€’ç»™DndProviderï¼Œè¿™æ ·æ•´ä¸ªåº”ç”¨çš„å­ç»„ä»¶éƒ½èƒ½ä½¿ç”¨æ‹–æ”¾èƒ½åŠ›äº†ã€‚</p>
<h3 data-id="heading-5">2. DragPreviewImageï¼šè‡ªå®šä¹‰æ‹–åŠ¨é¢„è§ˆçš„â€œå·¥å…·â€</h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‹–åŠ¨å…ƒç´ æ—¶ï¼Œæµè§ˆå™¨ä¼šç”Ÿæˆä¸€ä¸ªè¯¥å…ƒç´ çš„â€œå¿«ç…§â€ä½œä¸ºæ‹–åŠ¨é¢„è§ˆã€‚ä½†åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦è‡ªå®šä¹‰é¢„è§ˆæ•ˆæœï¼ˆæ¯”å¦‚æ‹–åŠ¨æ—¶æ˜¾ç¤ºä¸€ä¸ªç®€åŒ–çš„å›¾æ ‡ï¼Œè€Œä¸æ˜¯æ•´ä¸ªå…ƒç´ ï¼‰ï¼Œè¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ°DragPreviewImageç»„ä»¶ã€‚</p>
<h4 data-id="heading-6">æ ¸å¿ƒä½œç”¨</h4>
<p>DragPreviewImageç»„ä»¶ç”¨äºå°†ä¸€å¼ HTMLå›¾åƒå…ƒç´ ï¼ˆimgï¼‰æ¸²æŸ“ä¸ºæ‹–åŠ¨æ—¶çš„é¢„è§ˆæ•ˆæœï¼Œæ›¿ä»£æµè§ˆå™¨é»˜è®¤çš„é¢„è§ˆå¿«ç…§ã€‚å®ƒéœ€è¦é…åˆuseDragé’©å­çš„æ‹–åŠ¨é¢„è§ˆè¿æ¥å™¨ä½¿ç”¨ã€‚</p>
<h4 data-id="heading-7">å…³é”®é…ç½®é¡¹</h4>
<p>DragPreviewImageåªæœ‰ä¸€ä¸ªå¿…å¡«é…ç½®é¡¹ï¼šconnectã€‚</p>
<ul>
<li><strong>connectï¼ˆå¿…å¡«ï¼‰</strong> ï¼šæ‹–åŠ¨é¢„è§ˆçš„è¿æ¥å™¨å‡½æ•°ï¼Œæ¥è‡ªuseDragé’©å­çš„è¿”å›å€¼ã€‚å®ƒçš„ä½œç”¨æ˜¯å°†è‡ªå®šä¹‰çš„é¢„è§ˆå›¾åƒä¸æ‹–åŠ¨æ“ä½œå…³è”èµ·æ¥ï¼Œè®©æµè§ˆå™¨åœ¨æ‹–åŠ¨æ—¶æ˜¾ç¤ºè¿™å¼ å›¾åƒã€‚</li>
</ul>
<h4 data-id="heading-8">å®æˆ˜ç¤ºä¾‹</h4>
<p>ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¯æ‹–åŠ¨çš„ä»»åŠ¡å¡ç‰‡ï¼Œæ‹–åŠ¨æ—¶æ˜¾ç¤ºä¸€å¼ è‡ªå®šä¹‰çš„é¢„è§ˆå›¾ç‰‡ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { useDrag } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dnd'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">DragPreviewImage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dnd'</span>;
<span class="hljs-comment">// å¯¼å…¥è‡ªå®šä¹‰é¢„è§ˆå›¾ç‰‡</span>
<span class="hljs-keyword">import</span> taskPreview <span class="hljs-keyword">from</span> <span class="hljs-string">'./task-preview.png'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">TaskCard</span>(<span class="hljs-params">{ id, title }</span>) {
  <span class="hljs-comment">// ä»useDragä¸­è·å–æ‹–åŠ¨é¢„è§ˆè¿æ¥å™¨</span>
  <span class="hljs-keyword">const</span> [, dragSourceRef, dragPreviewRef] = <span class="hljs-title function_">useDrag</span>({
    <span class="hljs-attr">type</span>: <span class="hljs-string">'TASK'</span>,
    <span class="hljs-attr">item</span>: { id, title }
  });

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{dragSourceRef}</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> <span class="hljs-attr">16</span>, <span class="hljs-attr">border:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">ccc</span>', <span class="hljs-attr">margin:</span> <span class="hljs-attr">8</span> }}&gt;</span>
      {/* å…³è”è‡ªå®šä¹‰é¢„è§ˆå›¾ç‰‡ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">DragPreviewImage</span> <span class="hljs-attr">connect</span>=<span class="hljs-string">{dragPreviewRef}</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{taskPreview}</span> /&gt;</span>
      {title}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">TaskCard</span>;
</code></pre>
<p>è¿™é‡Œçš„æ ¸å¿ƒé€»è¾‘æ˜¯ï¼šä»useDragçš„è¿”å›å€¼ä¸­è·å–dragPreviewRefï¼ˆæ‹–åŠ¨é¢„è§ˆè¿æ¥å™¨ï¼‰ï¼Œç„¶åå°†å…¶ä¼ é€’ç»™DragPreviewImageçš„connectå±æ€§ï¼ŒåŒæ—¶é€šè¿‡srcå±æ€§æŒ‡å®šè‡ªå®šä¹‰é¢„è§ˆå›¾ç‰‡çš„è·¯å¾„ã€‚è¿™æ ·ï¼Œæ‹–åŠ¨TaskCardæ—¶ï¼Œå°±ä¼šæ˜¾ç¤ºtaskPreview.pngè¿™å¼ å›¾ç‰‡ä½œä¸ºé¢„è§ˆæ•ˆæœã€‚</p>
<h2 data-id="heading-9">äºŒã€æ ¸å¿ƒHooksï¼šæ‹–æ”¾äº¤äº’çš„â€œå®ç°è€…â€</h2>
<p>å¦‚æœè¯´ç»„ä»¶æ˜¯React-DnDçš„â€œéª¨æ¶â€ï¼Œé‚£ä¹ˆHookså°±æ˜¯â€œè‚Œè‚‰â€â€”â€”å®ƒä»¬è´Ÿè´£å®ç°å…·ä½“çš„æ‹–æ”¾äº¤äº’é€»è¾‘ã€‚React-DnDæä¾›äº†å¤šä¸ªå®ç”¨Hooksï¼Œå…¶ä¸­useDragï¼ˆå®šä¹‰æ‹–åŠ¨æºï¼‰ã€useDropï¼ˆå®šä¹‰æ‹–æ”¾ç›®æ ‡ï¼‰æ˜¯æœ€å¸¸ç”¨çš„ä¸¤ä¸ªï¼ŒuseDragLayerå’ŒuseDragDropManageråˆ™ç”¨äºæ›´å¤æ‚çš„åœºæ™¯ã€‚</p>
<h3 data-id="heading-10">1. useDragï¼šè®©ç»„ä»¶æˆä¸ºâ€œæ‹–åŠ¨æºâ€</h3>
<p>useDragæ˜¯å°†æ™®é€šReactç»„ä»¶è½¬åŒ–ä¸ºâ€œæ‹–åŠ¨æºâ€çš„æ ¸å¿ƒé’©å­ã€‚é€šè¿‡å‘å®ƒä¼ é€’ä¸€ä¸ªè§„èŒƒå¯¹è±¡ï¼ˆspecï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å£°æ˜æ€§åœ°æè¿°æ‹–åŠ¨æºçš„ç±»å‹ã€æ‹–åŠ¨çš„æ•°æ®ã€æ‹–åŠ¨è¿‡ç¨‹ä¸­çš„å›è°ƒç­‰ã€‚</p>
<h4 data-id="heading-11">åŸºæœ¬ç”¨æ³•ï¼šå‚æ•°ä¸è¿”å›å€¼</h4>
<p>useDragçš„ç”¨æ³•å¯ä»¥æ€»ç»“ä¸ºâ€œä¼ å…¥specé…ç½®ï¼Œè¿”å›ä¸‰ä¸ªæ ¸å¿ƒå¯¹è±¡â€ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> [collectedProps, dragSourceRef, dragPreviewRef] = <span class="hljs-title function_">useDrag</span>(spec, deps);
</code></pre>
<h5 data-id="heading-12">å‚æ•°è¯´æ˜</h5>
<ul>
<li><strong>specï¼ˆå¿…å¡«ï¼‰</strong> ï¼šè§„èŒƒå¯¹è±¡æˆ–è¿”å›è§„èŒƒå¯¹è±¡çš„å‡½æ•°ï¼Œç”¨äºé…ç½®æ‹–åŠ¨æºçš„æ ¸å¿ƒé€»è¾‘ã€‚è¿™æ˜¯useDragçš„æ ¸å¿ƒï¼Œæˆ‘ä»¬åé¢ä¼šè¯¦ç»†æ‹†è§£å…¶æˆå‘˜ã€‚</li>
<li><strong>depsï¼ˆå¯é€‰ï¼‰</strong> ï¼šä¾èµ–å…³ç³»æ•°ç»„ï¼Œç”¨äºå¤‡å¿˜å½•åŒ–ï¼ˆç±»ä¼¼Reactçš„useMemoï¼‰ã€‚å¦‚æœspecæ˜¯å‡½æ•°ï¼Œdepsé»˜è®¤æ˜¯ç©ºæ•°ç»„ï¼›å¦‚æœspecæ˜¯å¯¹è±¡ï¼Œdepsé»˜è®¤æ˜¯åŒ…å«specçš„æ•°ç»„ã€‚å½“depsä¸­çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒuseDragä¼šé‡æ–°è®¡ç®—specé…ç½®ã€‚</li>
</ul>
<h5 data-id="heading-13">è¿”å›å€¼è¯´æ˜</h5>
<p>useDragè¿”å›ä¸€ä¸ªåŒ…å«ä¸‰ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰æ˜ç¡®çš„ç”¨é€”ï¼š</p>
<ul>
<li><strong>collectedPropsï¼ˆç´¢å¼•0ï¼‰</strong> ï¼šä»collectå‡½æ•°ä¸­æ”¶é›†çš„å±æ€§å¯¹è±¡ã€‚collectå‡½æ•°ç”¨äºä»æ‹–æ”¾ç›‘æ§å™¨ï¼ˆmonitorï¼‰ä¸­è·å–æ‹–åŠ¨çŠ¶æ€ï¼ˆå¦‚æ˜¯å¦æ­£åœ¨æ‹–åŠ¨ï¼‰ï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºç»„ä»¶çš„propsã€‚å¦‚æœæ²¡æœ‰å®šä¹‰collectå‡½æ•°ï¼Œè¿”å›ç©ºå¯¹è±¡ã€‚</li>
<li><strong>dragSourceRefï¼ˆç´¢å¼•1ï¼‰</strong> ï¼šæ‹–åŠ¨æºçš„è¿æ¥å™¨å‡½æ•°ï¼Œå¿…é¡»ç»‘å®šåˆ°ç»„ä»¶çš„DOMå…ƒç´ ä¸Šã€‚å®ƒçš„ä½œç”¨æ˜¯å‘Šè¯‰React-DnDâ€œå“ªä¸ªå…ƒç´ æ˜¯å¯æ‹–åŠ¨çš„â€ï¼Œå¦‚æœä¸ç»‘å®šï¼Œç»„ä»¶å°†æ— æ³•è¢«æ‹–åŠ¨ã€‚</li>
<li><strong>dragPreviewRefï¼ˆç´¢å¼•2ï¼‰</strong> ï¼šæ‹–åŠ¨é¢„è§ˆçš„è¿æ¥å™¨å‡½æ•°ï¼Œç”¨äºå…³è”è‡ªå®šä¹‰çš„æ‹–åŠ¨é¢„è§ˆï¼ˆå¦‚DragPreviewImageç»„ä»¶ï¼‰ã€‚å¦‚æœä¸éœ€è¦è‡ªå®šä¹‰é¢„è§ˆï¼Œå¯ä»¥å¿½ç•¥å®ƒã€‚</li>
</ul>
<h4 data-id="heading-14">æ ¸å¿ƒï¼šspecè§„èŒƒå¯¹è±¡è¯¦è§£</h4>
<p>specå¯¹è±¡æ˜¯useDragçš„çµé­‚ï¼Œå®ƒå®šä¹‰äº†æ‹–åŠ¨æºçš„æ‰€æœ‰è¡Œä¸ºã€‚å…¶ä¸­typeå’Œitemæ˜¯å¿…å¡«é¡¹ï¼Œå…¶ä»–ä¸ºå¯é€‰é¡¹ã€‚</p>
<h5 data-id="heading-15">å¿…å¡«æˆå‘˜</h5>
<ul>
<li><strong>typeï¼ˆå¿…å¡«ï¼‰</strong> ï¼šå­—ç¬¦ä¸²æˆ–ç¬¦å·ï¼ˆSymbolï¼‰ï¼Œç”¨äºæ ‡è¯†æ‹–åŠ¨æºçš„ç±»å‹ã€‚åªæœ‰æ³¨å†Œäº†ç›¸åŒç±»å‹çš„æ‹–æ”¾ç›®æ ‡ï¼ˆuseDropï¼‰ï¼Œæ‰ä¼šå¯¹è¯¥æ‹–åŠ¨æºçš„æ‹–æ”¾æ“ä½œåšå‡ºååº”ã€‚è¿™æ˜¯React-DnDå®ç°â€œæ‹–åŠ¨æºä¸ç›®æ ‡åŒ¹é…â€çš„æ ¸å¿ƒæœºåˆ¶ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»»åŠ¡å¡ç‰‡çš„typeè®¾ä¸º'TASK'ï¼Œå°†ä»»åŠ¡åˆ—è¡¨çš„acceptè®¾ä¸º'TASK'ï¼Œè¿™æ ·ä»»åŠ¡å¡ç‰‡å°±èƒ½æ‹–æ”¾åˆ°ä»»åŠ¡åˆ—è¡¨ä¸­ã€‚</li>
<li><strong>itemï¼ˆå¿…å¡«ï¼‰</strong> ï¼šæè¿°æ‹–åŠ¨æ•°æ®çš„å¯¹è±¡ï¼Œæˆ–è¿”å›è¯¥å¯¹è±¡çš„å‡½æ•°ã€‚è¿™æ˜¯æ‹–åŠ¨æºä¼ é€’ç»™æ‹–æ”¾ç›®æ ‡çš„â€œæ ¸å¿ƒæ•°æ®â€ï¼Œä¹Ÿæ˜¯ä¸¤è€…ä¹‹é—´å”¯ä¸€çš„é€šä¿¡æ¡¥æ¢ã€‚ å¦‚æœæ˜¯å¯¹è±¡ï¼Œåº”åªåŒ…å«æ‹–æ”¾ç›®æ ‡éœ€è¦çš„æœ€å°æ•°æ®ï¼ˆå¦‚idã€åç§°ï¼‰ï¼Œé¿å…ä¼ é€’å¤æ‚å¼•ç”¨ï¼ˆæ¯”å¦‚æ•´ä¸ªç»„ä»¶å®ä¾‹ï¼‰ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ‹–åŠ¨æºå’Œç›®æ ‡è¿‡åº¦è€¦åˆã€‚</li>
<li>å¦‚æœæ˜¯å‡½æ•°ï¼Œä¼šåœ¨æ‹–åŠ¨æ“ä½œå¼€å§‹æ—¶æ‰§è¡Œï¼Œå¹¶è¿”å›ä¸Šè¿°å¯¹è±¡ã€‚å¦‚æœè¿”å›nullï¼Œæ‹–åŠ¨æ“ä½œä¼šè¢«å–æ¶ˆã€‚</li>
</ul>
<h5 data-id="heading-16">å¯é€‰æˆå‘˜ï¼ˆå›è°ƒä¸é…ç½®ï¼‰</h5>
<p><strong>end(item, monitor)ï¼ˆå¯é€‰ï¼‰</strong> ï¼šæ‹–åŠ¨æ“ä½œç»“æŸæ—¶è§¦å‘çš„å›è°ƒå‡½æ•°ï¼Œæ— è®ºæ‹–åŠ¨æ˜¯å¦æˆåŠŸï¼ˆæ¯”å¦‚æ‹–åˆ°ç›®æ ‡åé‡Šæ”¾ï¼Œæˆ–æ‹–åˆ°æ— æ•ˆåŒºåŸŸé‡Šæ”¾ï¼‰ï¼Œéƒ½ä¼šæ‰§è¡Œã€‚</p>
<ul>
<li>
<p>itemï¼šæ‹–åŠ¨çš„æ ¸å¿ƒæ•°æ®ï¼ˆä¸spec.itemä¸€è‡´ï¼‰ã€‚</p>
</li>
<li>
<p>monitorï¼šæ‹–æ”¾ç›‘æ§å™¨ï¼Œç”¨äºè·å–æ‹–åŠ¨çŠ¶æ€ï¼ˆå¦‚monitor.didDrop()å¯ä»¥åˆ¤æ–­æ‹–æ”¾æ˜¯å¦è¢«ç›®æ ‡æ¥å—ï¼Œmonitor.getDropResult()å¯ä»¥è·å–ç›®æ ‡è¿”å›çš„ç»“æœï¼‰ã€‚</p>
</li>
<li>
<p>å¸¸ç”¨åœºæ™¯ï¼šæ‹–åŠ¨ç»“æŸåæ›´æ–°æ•°æ®ï¼ˆå¦‚å°†ä»»åŠ¡ä»â€œå¾…åŠâ€åˆ—è¡¨ç§»åˆ°â€œå·²åŠâ€åˆ—è¡¨ï¼‰ã€‚</p>
</li>
</ul>
<p><strong>canDrag(monitor)ï¼ˆå¯é€‰ï¼‰</strong> ï¼šç”¨äºåˆ¤æ–­å½“å‰ç»„ä»¶æ˜¯å¦å…è®¸è¢«æ‹–åŠ¨ã€‚è¿”å›trueåˆ™å…è®¸æ‹–åŠ¨ï¼Œè¿”å›falseåˆ™ç¦æ­¢ã€‚ monitorï¼šæ‹–æ”¾ç›‘æ§å™¨ï¼Œå¯ä»¥é€šè¿‡monitor.getItem()è·å–æ‹–åŠ¨æ•°æ®ï¼Œç»“åˆç»„ä»¶propsåˆ¤æ–­æ˜¯å¦å…è®¸æ‹–åŠ¨ï¼ˆå¦‚æŸäº›ä»»åŠ¡å¡ç‰‡ä¸å…è®¸è¢«æ‹–åŠ¨ï¼‰ã€‚</p>
<p>æ³¨æ„ï¼š ä¸èƒ½åœ¨è¯¥å‡½æ•°ä¸­è°ƒç”¨monitor.canDrag()ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ­»å¾ªç¯ã€‚</p>
<p><strong>isDragging(monitor)ï¼ˆå¯é€‰ï¼‰</strong> ï¼šç”¨äºè‡ªå®šä¹‰â€œæ˜¯å¦æ­£åœ¨æ‹–åŠ¨â€çš„åˆ¤æ–­é€»è¾‘ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰å¯åŠ¨æ‹–åŠ¨çš„ç»„ä»¶ä¼šè¢«è§†ä¸ºâ€œæ­£åœ¨æ‹–åŠ¨â€ã€‚ å¸¸ç”¨åœºæ™¯ï¼šå½“æœ‰å¤šä¸ªç›¸åŒç±»å‹çš„ç»„ä»¶æ—¶ï¼ˆå¦‚å¤šä¸ªä»»åŠ¡å¡ç‰‡ï¼‰ï¼Œé€šè¿‡item.idä¸ç»„ä»¶props.idå¯¹æ¯”ï¼Œç¡®ä¿åªæœ‰å½“å‰æ‹–åŠ¨çš„ç»„ä»¶æ˜¾ç¤ºâ€œæ‹–åŠ¨ä¸­â€çš„æ ·å¼ã€‚</p>
<p>ç¤ºä¾‹ï¼šreturn monitor.getItem().id === props.id;</p>
<p><strong>collect(monitor, props)ï¼ˆå¯é€‰ï¼‰</strong> ï¼šæ”¶é›†å‡½æ•°ï¼Œç”¨äºä»ç›‘æ§å™¨ä¸­è·å–æ‹–åŠ¨çŠ¶æ€ï¼Œå¹¶è½¬åŒ–ä¸ºç»„ä»¶çš„propsã€‚è¿”å›çš„å¯¹è±¡ä¼šä½œä¸ºuseDragçš„ç¬¬ä¸€ä¸ªè¿”å›å€¼ï¼ˆcollectedPropsï¼‰ä¼ é€’ç»™ç»„ä»¶ã€‚</p>
<p>å¸¸ç”¨ç›‘æ§å™¨æ–¹æ³•ï¼šmonitor.isDragging()ï¼ˆæ˜¯å¦æ­£åœ¨æ‹–åŠ¨ï¼‰ã€monitor.getInitialClientOffset()ï¼ˆæ‹–åŠ¨å¼€å§‹æ—¶çš„é¼ æ ‡ä½ç½®ï¼‰ç­‰ã€‚</p>
<p>ç¤ºä¾‹ï¼š(monitor) =&gt; ({ isDragging: monitor.isDragging() })</p>
<h4 data-id="heading-17">useDragå®æˆ˜ï¼šå¯æ‹–åŠ¨çš„ä»»åŠ¡å¡ç‰‡</h4>
<p>ç»“åˆä¸Šé¢çš„çŸ¥è¯†ç‚¹ï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ªå®Œæ•´çš„å¯æ‹–åŠ¨ä»»åŠ¡å¡ç‰‡ç»„ä»¶ï¼ŒåŒ…å«æ‹–åŠ¨çŠ¶æ€åˆ¤æ–­ã€æ‹–åŠ¨ç»“æŸå›è°ƒç­‰åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// DraggableTask.jsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { useDrag } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dnd'</span>;

<span class="hljs-comment">// å®šä¹‰æ‹–åŠ¨ç±»å‹ï¼ˆå»ºè®®ç”¨Symbolé¿å…å†²çªï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TASK_TYPE</span> = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'TASK'</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">DraggableTask</span>(<span class="hljs-params">{ id, title, onDragEnd }</span>) {
  <span class="hljs-keyword">const</span> [collectedProps, dragSourceRef] = <span class="hljs-title function_">useDrag</span>({
    <span class="hljs-comment">// æ‹–åŠ¨ç±»å‹</span>
    <span class="hljs-attr">type</span>: <span class="hljs-variable constant_">TASK_TYPE</span>,
    <span class="hljs-comment">// æ‹–åŠ¨æ•°æ®ï¼ˆåªä¼ é€’å¿…è¦çš„idå’Œtitleï¼‰</span>
    <span class="hljs-attr">item</span>: <span class="hljs-function">() =&gt;</span> ({ id, title }),
    <span class="hljs-comment">// æ‹–åŠ¨ç»“æŸå›è°ƒ</span>
    <span class="hljs-attr">end</span>: <span class="hljs-function">(<span class="hljs-params">item, monitor</span>) =&gt;</span> {
      <span class="hljs-comment">// åˆ¤æ–­æ‹–æ”¾æ˜¯å¦è¢«ç›®æ ‡æ¥å—</span>
      <span class="hljs-keyword">if</span> (monitor.<span class="hljs-title function_">didDrop</span>()) {
        <span class="hljs-comment">// è·å–ç›®æ ‡è¿”å›çš„ç»“æœï¼ˆå¦‚ç›®æ ‡åˆ—è¡¨çš„idï¼‰</span>
        <span class="hljs-keyword">const</span> dropResult = monitor.<span class="hljs-title function_">getDropResult</span>();
        <span class="hljs-comment">// è°ƒç”¨çˆ¶ç»„ä»¶æ–¹æ³•æ›´æ–°æ•°æ®</span>
        <span class="hljs-title function_">onDragEnd</span>(item.<span class="hljs-property">id</span>, dropResult.<span class="hljs-property">listId</span>);
      }
    },
    <span class="hljs-comment">// æ”¶é›†æ‹–åŠ¨çŠ¶æ€</span>
    <span class="hljs-attr">collect</span>: <span class="hljs-function">(<span class="hljs-params">monitor</span>) =&gt;</span> ({
      <span class="hljs-attr">isDragging</span>: monitor.<span class="hljs-title function_">isDragging</span>()
    }),
    <span class="hljs-comment">// åªæœ‰idä¸ºå¶æ•°çš„ä»»åŠ¡å¯ä»¥æ‹–åŠ¨ï¼ˆç¤ºä¾‹ï¼‰</span>
    <span class="hljs-attr">canDrag</span>: <span class="hljs-function">() =&gt;</span> id % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>
  });

  <span class="hljs-comment">// æ ¹æ®æ‹–åŠ¨çŠ¶æ€è®¾ç½®æ ·å¼ï¼ˆæ‹–åŠ¨æ—¶åŠé€æ˜ï¼‰</span>
  <span class="hljs-keyword">const</span> cardStyle = {
    <span class="hljs-attr">padding</span>: <span class="hljs-number">16</span>,
    <span class="hljs-attr">border</span>: <span class="hljs-string">'1px solid #ccc'</span>,
    <span class="hljs-attr">margin</span>: <span class="hljs-number">8</span>,
    <span class="hljs-attr">opacity</span>: collectedProps.<span class="hljs-property">isDragging</span> ? <span class="hljs-number">0.5</span> : <span class="hljs-number">1</span>,
    <span class="hljs-attr">cursor</span>: collectedProps.<span class="hljs-property">isDragging</span> ? <span class="hljs-string">'grabbing'</span> : <span class="hljs-string">'grab'</span>
  };

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{dragSourceRef}</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{cardStyle}</span>&gt;</span>{title}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">DraggableTask</span>;
</code></pre>
<p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ul>
<li>åªæœ‰idä¸ºå¶æ•°çš„ä»»åŠ¡å¡ç‰‡å¯ä»¥è¢«æ‹–åŠ¨ï¼ˆcanDragé…ç½®ï¼‰ã€‚</li>
<li>æ‹–åŠ¨æ—¶å¡ç‰‡æ˜¾ç¤ºåŠé€æ˜æ•ˆæœï¼ˆé€šè¿‡collectè·å–isDraggingçŠ¶æ€ï¼ŒåŠ¨æ€è®¾ç½®opacityï¼‰ã€‚</li>
<li>æ‹–åŠ¨ç»“æŸåï¼Œæ ¹æ®æ‹–æ”¾ç»“æœè°ƒç”¨çˆ¶ç»„ä»¶çš„onDragEndæ–¹æ³•æ›´æ–°æ•°æ®ï¼ˆendå›è°ƒï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-18">2. useDropï¼šè®©ç»„ä»¶æˆä¸ºâ€œæ‹–æ”¾ç›®æ ‡â€</h3>
<p>useDragè´Ÿè´£â€œå‘èµ·â€æ‹–æ”¾ï¼ŒuseDropåˆ™è´Ÿè´£â€œæ¥æ”¶â€æ‹–æ”¾â€”â€”å®ƒå°†æ™®é€šç»„ä»¶è½¬åŒ–ä¸ºâ€œæ‹–æ”¾ç›®æ ‡â€ï¼Œç”¨äºæ¥æ”¶æ‹–åŠ¨æºä¼ é€’çš„æ•°æ®ï¼Œå¹¶å¤„ç†æ‹–æ”¾ç›¸å…³çš„é€»è¾‘ï¼ˆå¦‚æ‚¬åœã€æ¥æ”¶æ‹–æ”¾ï¼‰ã€‚</p>
<h4 data-id="heading-19">åŸºæœ¬ç”¨æ³•ï¼šå‚æ•°ä¸è¿”å›å€¼</h4>
<p>useDropçš„ç”¨æ³•ä¸useDragç±»ä¼¼ï¼Œéƒ½æ˜¯â€œä¼ å…¥specé…ç½®ï¼Œè¿”å›æ ¸å¿ƒå¯¹è±¡â€ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> [collectedProps, dropTargetRef] = <span class="hljs-title function_">useDrop</span>(spec, deps);
</code></pre>
<h5 data-id="heading-20">å‚æ•°è¯´æ˜</h5>
<ul>
<li><strong>specï¼ˆå¿…å¡«ï¼‰</strong> ï¼šè§„èŒƒå¯¹è±¡æˆ–è¿”å›è§„èŒƒå¯¹è±¡çš„å‡½æ•°ï¼Œç”¨äºé…ç½®æ‹–æ”¾ç›®æ ‡çš„æ ¸å¿ƒé€»è¾‘ï¼Œæ˜¯useDropçš„æ ¸å¿ƒã€‚</li>
<li><strong>depsï¼ˆå¯é€‰ï¼‰</strong> ï¼šä¾èµ–å…³ç³»æ•°ç»„ï¼Œä½œç”¨ä¸useDragçš„depsä¸€è‡´ï¼Œç”¨äºå¤‡å¿˜å½•åŒ–ã€‚</li>
</ul>
<h5 data-id="heading-21">è¿”å›å€¼è¯´æ˜</h5>
<p>useDropè¿”å›ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå…ƒç´ çš„æ•°ç»„ï¼š</p>
<ul>
<li><strong>collectedPropsï¼ˆç´¢å¼•0ï¼‰</strong> ï¼šä»collectå‡½æ•°ä¸­æ”¶é›†çš„å±æ€§å¯¹è±¡ï¼Œä¸useDragçš„collectedPropsç±»ä¼¼ï¼Œç”¨äºè·å–æ‹–æ”¾çŠ¶æ€ï¼ˆå¦‚æ˜¯å¦æœ‰å…ƒç´ æ‚¬åœåœ¨ç›®æ ‡ä¸Šï¼‰ã€‚</li>
<li><strong>dropTargetRefï¼ˆç´¢å¼•1ï¼‰</strong> ï¼šæ‹–æ”¾ç›®æ ‡çš„è¿æ¥å™¨å‡½æ•°ï¼Œå¿…é¡»ç»‘å®šåˆ°ç»„ä»¶çš„DOMå…ƒç´ ä¸Šï¼Œå‘Šè¯‰React-DnDâ€œå“ªä¸ªå…ƒç´ æ˜¯æ‹–æ”¾ç›®æ ‡â€ã€‚</li>
</ul>
<h4 data-id="heading-22">æ ¸å¿ƒï¼šspecè§„èŒƒå¯¹è±¡è¯¦è§£</h4>
<p>useDropçš„specå¯¹è±¡ä¸useDragç±»ä¼¼ï¼Œä½†æ ¸å¿ƒå…³æ³¨ç‚¹æ˜¯â€œæ¥æ”¶æ‹–æ”¾â€ï¼Œå…¶ä¸­acceptæ˜¯å¿…å¡«é¡¹ã€‚</p>
<h5 data-id="heading-23">å¿…å¡«æˆå‘˜</h5>
<ul>
<li><strong>acceptï¼ˆå¿…å¡«ï¼‰</strong> ï¼šç”¨äºæŒ‡å®šå½“å‰æ‹–æ”¾ç›®æ ‡å¯ä»¥æ¥å—çš„æ‹–åŠ¨æºç±»å‹ï¼Œä¸useDragçš„typeå¯¹åº”ã€‚å®ƒå¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€ç¬¦å·ï¼Œä¹Ÿå¯ä»¥æ˜¯åŒ…å«å¤šä¸ªç±»å‹çš„æ•°ç»„ã€‚
<ul>
<li>ç¤ºä¾‹ï¼š<code>accept: TASK_TYPE</code>ï¼ˆæ¥å—ç±»å‹ä¸ºTASK_TYPEçš„æ‹–åŠ¨æºï¼‰ã€‚</li>
<li>ç¤ºä¾‹ï¼š<code>accept: [TASK_TYPE, PROJECT_TYPE]</code>ï¼ˆæ¥å—ä¸¤ç§ç±»å‹çš„æ‹–åŠ¨æºï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h5 data-id="heading-24">å¯é€‰æˆå‘˜ï¼ˆå›è°ƒä¸é…ç½®ï¼‰</h5>
<p><strong>drop(item, monitor)ï¼ˆå¯é€‰ï¼‰</strong> ï¼šå½“å…¼å®¹ç±»å‹çš„æ‹–åŠ¨æºåœ¨ç›®æ ‡ä¸Š<strong>é‡Šæ”¾æ—¶</strong>è§¦å‘çš„å›è°ƒå‡½æ•°ï¼Œæ˜¯å¤„ç†æ‹–æ”¾é€»è¾‘çš„æ ¸å¿ƒã€‚</p>
<ul>
<li>itemï¼šæ‹–åŠ¨æºä¼ é€’çš„æ ¸å¿ƒæ•°æ®ï¼ˆä¸useDragçš„spec.itemä¸€è‡´ï¼‰ã€‚</li>
<li>monitorï¼šæ‹–æ”¾ç›‘æ§å™¨ï¼Œå¯ä»¥é€šè¿‡monitor.isOver({ shallow: true })åˆ¤æ–­æ˜¯å¦æ˜¯ç›´æ¥æ‚¬åœï¼ˆè€ŒéåµŒå¥—ç›®æ ‡ï¼‰ã€‚</li>
<li>è¿”å›å€¼ï¼šå¯ä»¥è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¼šä½œä¸ºæ‹–æ”¾ç»“æœï¼Œé€šè¿‡monitor.getDropResult()ä¼ é€’ç»™æ‹–åŠ¨æºçš„endå›è°ƒã€‚</li>
<li>å¸¸ç”¨åœºæ™¯ï¼šæ¥æ”¶æ‹–åŠ¨çš„ä»»åŠ¡æ•°æ®ï¼Œå°†å…¶æ·»åŠ åˆ°å½“å‰åˆ—è¡¨ä¸­ã€‚</li>
</ul>
<p><strong>hover(item, monitor)ï¼ˆå¯é€‰ï¼‰</strong> ï¼šå½“æ‹–åŠ¨æºæ‚¬åœåœ¨ç›®æ ‡ä¸Šæ—¶<strong>æŒç»­</strong>è§¦å‘çš„å›è°ƒå‡½æ•°ï¼ˆå³ä½¿é¼ æ ‡ä¸åŠ¨ä¹Ÿä¼šè§¦å‘ï¼‰ã€‚ å¸¸ç”¨åœºæ™¯ï¼šå®ç°â€œæ‹–å…¥æ—¶é«˜äº®ç›®æ ‡â€â€œæ‹–åŠ¨æ’åºâ€ç­‰äº¤äº’ï¼ˆå¦‚åœ¨åˆ—è¡¨ä¸­æ‹–åŠ¨ä»»åŠ¡æ—¶ï¼Œè°ƒæ•´ä»»åŠ¡çš„ä½ç½®ï¼‰ã€‚</p>
<p>æ³¨æ„ï¼šå³ä½¿canDropè¿”å›falseï¼Œè¯¥å‡½æ•°ä¹Ÿä¼šè§¦å‘ï¼Œå¯ä»¥é€šè¿‡monitor.canDrop()åˆ¤æ–­å½“å‰æ˜¯å¦å…è®¸æ¥æ”¶æ‹–æ”¾ã€‚</p>
<p><strong>canDrop(item, monitor)ï¼ˆå¯é€‰ï¼‰</strong> ï¼šç”¨äºåˆ¤æ–­å½“å‰ç›®æ ‡æ˜¯å¦å…è®¸æ¥æ”¶è¯¥æ‹–åŠ¨æºçš„æ•°æ®ã€‚è¿”å›trueåˆ™å…è®¸ï¼Œè¿”å›falseåˆ™ç¦æ­¢ã€‚ ç¤ºä¾‹ï¼šæ ¹æ®æ‹–åŠ¨æºçš„idåˆ¤æ–­æ˜¯å¦å…è®¸æ¥æ”¶ï¼ˆå¦‚ç¦æ­¢å°†ä»»åŠ¡æ‹–æ”¾åˆ°è‡ªå·±æ‰€åœ¨çš„åˆ—è¡¨ï¼‰ã€‚</p>
<p>æ³¨æ„ï¼šä¸èƒ½åœ¨è¯¥å‡½æ•°ä¸­è°ƒç”¨monitor.canDrop()ã€‚</p>
<p><strong>collect(monitor, props)ï¼ˆå¯é€‰ï¼‰</strong> ï¼šæ”¶é›†å‡½æ•°ï¼Œç”¨äºä»ç›‘æ§å™¨ä¸­è·å–æ‹–æ”¾çŠ¶æ€ï¼Œè½¬åŒ–ä¸ºç»„ä»¶çš„propsã€‚ å¸¸ç”¨ç›‘æ§å™¨æ–¹æ³•ï¼šmonitor.isOver()ï¼ˆæ˜¯å¦æœ‰å…ƒç´ æ‚¬åœï¼‰ã€monitor.canDrop()ï¼ˆæ˜¯å¦å…è®¸æ¥æ”¶æ‹–æ”¾ï¼‰ç­‰ã€‚</p>
<p>ç¤ºä¾‹ï¼š(monitor) =&gt; ({ isOver: monitor.isOver(), canDrop: monitor.canDrop() })</p>
<h4 data-id="heading-25">useDropå®æˆ˜ï¼šå¯æ¥æ”¶ä»»åŠ¡çš„åˆ—è¡¨</h4>
<p>ç»“åˆuseDragçš„ä»»åŠ¡å¡ç‰‡ï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ªå¯æ¥æ”¶ä»»åŠ¡çš„åˆ—è¡¨ç»„ä»¶ï¼ŒåŒ…å«æ‚¬åœé«˜äº®ã€æ¥æ”¶ä»»åŠ¡ç­‰åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// TaskList.jsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { useDrop } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dnd'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-variable constant_">TASK_TYPE</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./DraggableTask'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">TaskList</span>(<span class="hljs-params">{ id, title, tasks, onAddTask }</span>) {
  <span class="hljs-keyword">const</span> [collectedProps, dropTargetRef] = <span class="hljs-title function_">useDrop</span>({
    <span class="hljs-comment">// æ¥å—TASK_TYPEç±»å‹çš„æ‹–åŠ¨æº</span>
    <span class="hljs-attr">accept</span>: <span class="hljs-variable constant_">TASK_TYPE</span>,
    <span class="hljs-comment">// æ¥æ”¶æ‹–æ”¾æ—¶çš„å›è°ƒ</span>
    <span class="hljs-attr">drop</span>: <span class="hljs-function">(<span class="hljs-params">item, monitor</span>) =&gt;</span> {
      <span class="hljs-comment">// è°ƒç”¨çˆ¶ç»„ä»¶æ–¹æ³•ï¼Œå°†ä»»åŠ¡æ·»åŠ åˆ°å½“å‰åˆ—è¡¨</span>
      <span class="hljs-title function_">onAddTask</span>(id, item);
      <span class="hljs-comment">// è¿”å›æ‹–æ”¾ç»“æœï¼Œä¼ é€’ç»™æ‹–åŠ¨æº</span>
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">listId</span>: id };
    },
    <span class="hljs-comment">// æ‚¬åœæ—¶çš„å›è°ƒ</span>
    <span class="hljs-attr">hover</span>: <span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> {
      <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œå®ç°æ‹–åŠ¨æ’åºé€»è¾‘ï¼ˆå¦‚è°ƒæ•´ä»»åŠ¡åœ¨åˆ—è¡¨ä¸­çš„ä½ç½®ï¼‰</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ä»»åŠ¡ <span class="hljs-subst">${item.id}</span> æ‚¬åœåœ¨ <span class="hljs-subst">${title}</span> åˆ—è¡¨ä¸Š`</span>);
    },
    <span class="hljs-comment">// æ”¶é›†æ‹–æ”¾çŠ¶æ€</span>
    <span class="hljs-attr">collect</span>: <span class="hljs-function">(<span class="hljs-params">monitor</span>) =&gt;</span> ({
      <span class="hljs-attr">isOver</span>: monitor.<span class="hljs-title function_">isOver</span>(),
      <span class="hljs-attr">canDrop</span>: monitor.<span class="hljs-title function_">canDrop</span>()
    })
  });

  <span class="hljs-comment">// æ ¹æ®æ‚¬åœçŠ¶æ€å’Œæ˜¯å¦å…è®¸æ‹–æ”¾è®¾ç½®æ ·å¼</span>
  <span class="hljs-keyword">const</span> listStyle = {
    <span class="hljs-attr">padding</span>: <span class="hljs-number">16</span>,
    <span class="hljs-attr">border</span>: collectedProps.<span class="hljs-property">isOver</span> &amp;&amp; collectedProps.<span class="hljs-property">canDrop</span> 
      ? <span class="hljs-string">'2px solid #2196F3'</span> 
      : <span class="hljs-string">'1px solid #eee'</span>,
    <span class="hljs-attr">margin</span>: <span class="hljs-number">16</span>,
    <span class="hljs-attr">minHeight</span>: <span class="hljs-number">200</span>
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{dropTargetRef}</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{listStyle}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>{title}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
      {tasks.map(task =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{task.id}</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> <span class="hljs-attr">8</span>, <span class="hljs-attr">borderBottom:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">eee</span>' }}&gt;</span>
          {task.title}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">TaskList</span>;
</code></pre>
<p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ul>
<li>åˆ—è¡¨åªæ¥å—TASK_TYPEç±»å‹çš„æ‹–åŠ¨æºï¼ˆaccepté…ç½®ï¼‰ã€‚</li>
<li>å½“ä»»åŠ¡å¡ç‰‡æ‚¬åœåœ¨åˆ—è¡¨ä¸Šä¸”å…è®¸æ‹–æ”¾æ—¶ï¼Œåˆ—è¡¨è¾¹æ¡†å˜ä¸ºè“è‰²é«˜äº®ï¼ˆé€šè¿‡collectè·å–isOverå’ŒcanDropçŠ¶æ€ï¼‰ã€‚</li>
<li>æ¥æ”¶ä»»åŠ¡å¡ç‰‡åï¼Œè°ƒç”¨çˆ¶ç»„ä»¶çš„onAddTaskæ–¹æ³•å°†ä»»åŠ¡æ·»åŠ åˆ°å½“å‰åˆ—è¡¨ï¼Œå¹¶è¿”å›åˆ—è¡¨idç»™æ‹–åŠ¨æºã€‚</li>
</ul>
<h3 data-id="heading-26">3. å…¶ä»–å®ç”¨Hooksï¼šåº”å¯¹å¤æ‚åœºæ™¯</h3>
<p>é™¤äº†useDragå’ŒuseDropï¼ŒReact-DnDè¿˜æä¾›äº†ä¸¤ä¸ªç”¨äºå¤æ‚åœºæ™¯çš„Hooksï¼šuseDragLayerå’ŒuseDragDropManagerã€‚</p>
<h4 data-id="heading-27">useDragLayerï¼šè‡ªå®šä¹‰å…¨å±€æ‹–åŠ¨å±‚</h4>
<p>å½“éœ€è¦å®ç°è¶…è¶Šå•ä¸ªç»„ä»¶çš„æ‹–åŠ¨é¢„è§ˆï¼ˆå¦‚æ‹–åŠ¨æ—¶æ˜¾ç¤ºä¸€ä¸ªè¦†ç›–æ•´ä¸ªé¡µé¢çš„æç¤ºï¼‰æ—¶ï¼ŒuseDragLayerå°±æ´¾ä¸Šç”¨åœºäº†ã€‚å®ƒå¯ä»¥åˆ›å»ºä¸€ä¸ªç‹¬ç«‹äºæ‹–åŠ¨æºå’Œç›®æ ‡çš„â€œå…¨å±€æ‹–åŠ¨å±‚â€ï¼Œä¸å—å…¶ä»–ç»„ä»¶çš„æ ·å¼å½±å“ã€‚</p>
<h5 data-id="heading-28">æ ¸å¿ƒç”¨æ³•</h5>
<p>useDragLayeråªæ¥æ”¶ä¸€ä¸ªå¿…å¡«å‚æ•°collectï¼ˆæ”¶é›†å‡½æ•°ï¼‰ï¼Œè¿”å›ä»collectå‡½æ•°ä¸­è·å–çš„å±æ€§å¯¹è±¡ã€‚collectå‡½æ•°çš„ä½œç”¨æ˜¯ä»ç›‘æ§å™¨ä¸­è·å–æ‹–åŠ¨çŠ¶æ€ï¼Œç”¨äºæ¸²æŸ“æ‹–åŠ¨å±‚çš„å†…å®¹ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// CustomDragLayer.jsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { useDragLayer } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dnd'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">CustomDragLayer</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// æ”¶é›†æ‹–åŠ¨çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> { item, isDragging } = <span class="hljs-title function_">useDragLayer</span>(<span class="hljs-function"><span class="hljs-params">monitor</span> =&gt;</span> ({
    <span class="hljs-attr">item</span>: monitor.<span class="hljs-title function_">getItem</span>(),
    <span class="hljs-attr">isDragging</span>: monitor.<span class="hljs-title function_">isDragging</span>()
  }));

  <span class="hljs-comment">// æ²¡æœ‰æ‹–åŠ¨æ—¶ä¸æ¸²æŸ“</span>
  <span class="hljs-keyword">if</span> (!isDragging) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-comment">// æ‹–åŠ¨æ—¶æ˜¾ç¤ºè‡ªå®šä¹‰æç¤º</span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
      <span class="hljs-attr">position:</span> '<span class="hljs-attr">fixed</span>',
      <span class="hljs-attr">zIndex:</span> <span class="hljs-attr">9999</span>,
      <span class="hljs-attr">pointerEvents:</span> '<span class="hljs-attr">none</span>',
      <span class="hljs-attr">left:</span> <span class="hljs-attr">0</span>,
      <span class="hljs-attr">top:</span> <span class="hljs-attr">0</span>,
      <span class="hljs-attr">width:</span> '<span class="hljs-attr">100</span>%',
      <span class="hljs-attr">height:</span> '<span class="hljs-attr">100</span>%',
      <span class="hljs-attr">display:</span> '<span class="hljs-attr">flex</span>',
      <span class="hljs-attr">alignItems:</span> '<span class="hljs-attr">center</span>',
      <span class="hljs-attr">justifyContent:</span> '<span class="hljs-attr">center</span>'
    }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> <span class="hljs-attr">20</span>, <span class="hljs-attr">backgroundColor:</span> '<span class="hljs-attr">rgba</span>(<span class="hljs-attr">0</span>,<span class="hljs-attr">0</span>,<span class="hljs-attr">0</span>,<span class="hljs-attr">0.7</span>)', <span class="hljs-attr">color:</span> '<span class="hljs-attr">white</span>' }}&gt;</span>
        æ­£åœ¨æ‹–åŠ¨ï¼š{item.title}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">CustomDragLayer</span>;
</code></pre>
<p>è¿™ä¸ªè‡ªå®šä¹‰æ‹–åŠ¨å±‚ä¼šåœ¨æ‹–åŠ¨æ—¶æ˜¾ç¤ºä¸€ä¸ªå±…ä¸­çš„æç¤ºæ¡†ï¼Œæ˜¾ç¤ºå½“å‰æ‹–åŠ¨çš„ä»»åŠ¡æ ‡é¢˜ï¼Œä¸”ä¸ä¼šå½±å“å…¶ä»–ç»„ä»¶çš„äº¤äº’ï¼ˆpointerEvents: 'none'ç¡®ä¿ç‚¹å‡»äº‹ä»¶èƒ½ç©¿é€åˆ°ä¸‹å±‚ç»„ä»¶ï¼‰ã€‚</p>
<h4 data-id="heading-29">useDragDropManagerï¼šè·å–æ‹–æ”¾ç®¡ç†å™¨å®ä¾‹</h4>
<p>DragDropManageræ˜¯React-DnDçš„æ ¸å¿ƒå•ä¾‹å¯¹è±¡ï¼ŒåŒ…å«äº†æ‹–æ”¾ç³»ç»Ÿçš„çŠ¶æ€ã€ç›‘æ§å™¨ã€åç«¯ç­‰æ ¸å¿ƒèµ„æºã€‚useDragDropManageré’©å­ç”¨äºè·å–è¿™ä¸ªå®ä¾‹ï¼Œä¸€èˆ¬ç”¨äºè‡ªå®šä¹‰åç«¯æˆ–é«˜çº§æ‰©å±•åœºæ™¯ï¼ˆå¦‚æ‰‹åŠ¨è§¦å‘æ‹–æ”¾äº‹ä»¶ï¼‰ã€‚</p>
<h5 data-id="heading-30">åŸºæœ¬ç”¨æ³•</h5>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { useDragDropManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dnd'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">AdvancedComponent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> manager = <span class="hljs-title function_">useDragDropManager</span>();
  <span class="hljs-comment">// å¯ä»¥é€šè¿‡managerè·å–ç›‘æ§å™¨ã€åç«¯ç­‰èµ„æº</span>
  <span class="hljs-keyword">const</span> monitor = manager.<span class="hljs-title function_">getMonitor</span>();

  <span class="hljs-comment">// é«˜çº§ç”¨æ³•ï¼šæ‰‹åŠ¨ç›‘å¬æ‹–åŠ¨çŠ¶æ€å˜åŒ–</span>
  <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> unsubscribe = monitor.<span class="hljs-title function_">subscribeToStateChange</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‹–æ”¾çŠ¶æ€å˜åŒ–ï¼š'</span>, monitor.<span class="hljs-title function_">isDragging</span>());
    });
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">unsubscribe</span>();
  }, [monitor]);

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>é«˜çº§æ‰©å±•ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>å¯¹äºå¤§å¤šæ•°æ™®é€šå¼€å‘åœºæ™¯ï¼Œæˆ‘ä»¬å¾ˆå°‘ä¼šç›´æ¥ä½¿ç”¨useDragDropManagerï¼Œé™¤ééœ€è¦æ·±åº¦å®šåˆ¶React-DnDçš„è¡Œä¸ºã€‚</p>
<h2 data-id="heading-31">ä¸‰ã€æ€»ç»“</h2>
<p>è¿™ä¸€ç¯‡æˆ‘ä»¬æ·±å…¥è®²è§£äº†React-DnDçš„æ ¸å¿ƒç»„ä»¶å’ŒHooksï¼Œæ ¸å¿ƒè¦ç‚¹æ€»ç»“å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>ç»„ä»¶</strong>ï¼šDndProvideræ˜¯åŸºç¡€ï¼ˆæä¾›æ‹–æ”¾ä¸Šä¸‹æ–‡ï¼‰ï¼ŒDragPreviewImageç”¨äºè‡ªå®šä¹‰é¢„è§ˆã€‚</li>
<li><strong>Hooks</strong>ï¼šuseDragå®šä¹‰æ‹–åŠ¨æºï¼ŒuseDropå®šä¹‰æ‹–æ”¾ç›®æ ‡ï¼Œä¸¤è€…é€šè¿‡typeå’ŒacceptåŒ¹é…ï¼›useDragLayerç”¨äºå…¨å±€é¢„è§ˆï¼ŒuseDragDropManagerç”¨äºé«˜çº§æ‰©å±•ã€‚</li>
<li><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼šæ‹–åŠ¨æºé€šè¿‡itemä¼ é€’æ•°æ®ï¼Œæ‹–æ”¾ç›®æ ‡é€šè¿‡dropæ¥æ”¶æ•°æ®ï¼Œä¸¤è€…é€šè¿‡monitorå®ç°çŠ¶æ€é€šä¿¡ã€‚</li>
</ul>
<p>æŒæ¡äº†è¿™äº›å†…å®¹ï¼Œä½ å·²ç»èƒ½å®ç°å¤§å¤šæ•°å¸¸è§çš„æ‹–æ”¾åœºæ™¯äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Rust RefCell å¤šçº¿ç¨‹è¯»ä¸ºä»€ä¹ˆä¹Ÿpanicäº†ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7572459757107003446</link>    <guid>https://juejin.cn/post/7572459757107003446</guid>    <pubDate>2025-11-15T08:36:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572459757107003446" data-draft-id="7572408522438770723" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Rust RefCell å¤šçº¿ç¨‹è¯»ä¸ºä»€ä¹ˆä¹Ÿpanicäº†ï¼Ÿ"/> <meta itemprop="keywords" content="Rust,Swift"/> <meta itemprop="datePublished" content="2025-11-15T08:36:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éä¸“ä¸šç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/1968539883540688"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Rust RefCell å¤šçº¿ç¨‹è¯»ä¸ºä»€ä¹ˆä¹Ÿpanicäº†ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1968539883540688/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éä¸“ä¸šç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T08:36:01.000Z" title="Sat Nov 15 2025 08:36:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™æ˜¯æœ€è¿‘å®æˆ˜ä¸­é‡åˆ°çš„ä¸€ä¸ªå°çŸ¥è¯†ç‚¹ï¼Œæ²¡ç†è§£ä¹‹å‰è§‰å¾—ã€Œä¸å¯èƒ½ã€ï¼Œååº”è¿‡æ¥ä¹‹åï¼Œè§‰å¾—è‡ªå·±å¾ˆè ¢ğŸ¤£ï¼Œå€Ÿæœ¬æ–‡è®°å½•ä¸‹ã€‚</p>
<p>çœ‹ä¸€æ®µå¤ç°ä»£ç ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">MyRefCell</span>&lt;T&gt;(RefCell&lt;T&gt;);

<span class="hljs-keyword">unsafe</span> <span class="hljs-keyword">impl</span>&lt;T&gt; <span class="hljs-built_in">Sync</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyRefCell</span>&lt;T&gt; {}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">shared</span> = Arc::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-title function_ invoke__">MyRefCell</span>(RefCell::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">0usize</span>)));

    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">handles</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">new</span>();
    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">100</span> {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s</span> = shared.<span class="hljs-title function_ invoke__">clone</span>();
        handles.<span class="hljs-title function_ invoke__">push</span>(thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> || {
            thread::<span class="hljs-title function_ invoke__">sleep</span>(Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">10</span> * (i % <span class="hljs-number">3</span>) <span class="hljs-keyword">as</span> <span class="hljs-type">u64</span>));
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">r</span> = s.<span class="hljs-number">0</span>.<span class="hljs-title function_ invoke__">borrow</span>();
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">r</span> = s.<span class="hljs-number">0</span>.<span class="hljs-title function_ invoke__">borrow_mut</span>();
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"thread {} read {}"</span>, i, *r);
        }));
    }

    <span class="hljs-keyword">for</span> <span class="hljs-variable">h</span> <span class="hljs-keyword">in</span> handles {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = h.<span class="hljs-title function_ invoke__">join</span>();
    }

    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"done"</span>);
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cdb1d630973d4253920f3296f26817bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2e5LiT5Lia56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763800560&amp;x-signature=M8csQtTR9rxEkrcsXq1ZrsHWAeA%3D" alt="" loading="lazy"/></p>
<p><strong>â€‹å¤šçº¿ç¨‹è¯»ä¸€ä¸ªRefCellå°è£…çš„å˜é‡ï¼Œå´å‘ç”Ÿäº†panicï¼ŒåŸå› æ˜¯ï¼šâ€‹</strong>â€‹**<code>already mutably borrowed: BorrowError</code>**</p>
<p>å³ RefCellä¿®é¥°çš„å˜é‡åœ¨borrowæ—¶æ£€æµ‹åˆ°å·²ç»borrow_mutäº†ï¼Œä½†æ˜¯ä»£ç é‡Œå…¶å®<strong>æ²¡æœ‰borrow_mut</strong>çš„åœ°æ–¹ï¼Œå°±å¾ˆç¥å¥‡ã€‚</p>
<p>å¦ä¸€ä¸ªè¿·æƒ‘çš„åœ°æ–¹æ˜¯ï¼Œ<strong>å¤šçº¿ç¨‹è¯»å˜é‡å±…ç„¶ä¹Ÿæ˜¯ä¸å®‰å…¨çš„ï¼Œä¹Ÿä¼španicã€‚</strong></p>
<p>æˆ–è®¸æœ‰å°ä¼™ä¼´ä¸ç†è§£RefCellï¼Œè¿™é‡Œç®€å•ä»‹ç»ä¸‹ï¼š</p>
<p>Rustçš„å€Ÿç”¨æ£€æŸ¥ä¸€èˆ¬åœ¨ç¼–è¯‘æœŸï¼Œå³ä¸€ä¸ªå¯å˜å€Ÿç”¨ï¼ˆ<code>&amp;mut T</code>ï¼‰åŒæ—¶åªèƒ½å­˜åœ¨ä¸€ä¸ªï¼Œä¸å¯å˜å€Ÿç”¨ï¼ˆ<code>&amp;T</code>ï¼‰å’Œå¯å˜å€Ÿç”¨ä¸èƒ½å…±å­˜ï¼›ä½†åœ¨å®é™…åœºæ™¯ä¸­ï¼Œå€Ÿç”¨å…³ç³»å¾€å¾€å¾ˆéš¾åœ¨ç¼–è¯‘æœŸæ»¡è¶³ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ç”¨RefCellï¼ŒRefCellæä¾›ä¸¤ä¸ªæ“ä½œç¬¦ï¼š<code>borrow()</code>å’Œ<code>borrow_mut()</code>ï¼Œæ”¯æŒåœ¨â€‹<strong>è¿è¡Œæ—¶æ£€æŸ¥å€Ÿç”¨å…³ç³»</strong>â€‹ï¼Œå¦‚æœè¿è¡Œæ—¶è¿æ³•å€Ÿç”¨è§„åˆ™ï¼Œä¼španicã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­ï¼Œå…¶å®â€‹<strong>æ²¡æœ‰è¿åå€Ÿç”¨è§„åˆ™</strong>â€‹ï¼Œå› ä¸ºæˆ‘ä»¬åªæœ‰ä¸å¯å˜å€Ÿç”¨ï¼Œä½†è¿˜æ˜¯panicäº†ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>åŸå› åœ¨äºRefCell <code>borrow()</code> çš„â€‹<strong>åº•å±‚å®ç°ä¸æ˜¯åŸå­çš„</strong>â€‹ï¼Œçœ‹ç€æ˜¯å¤šçº¿ç¨‹è¯»ï¼Œå…¶å®å†…éƒ¨å­˜åœ¨å†™æ“ä½œï¼Œå˜æˆäº†â€‹<strong>éšè—çš„å¤šçº¿ç¨‹å†™</strong>â€‹ï¼Œå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ed85f258d854f608e62b3ec7d6254b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2e5LiT5Lia56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763800560&amp;x-signature=CR4KnxcSgDtIEN%2FUIjlGtibM7%2BM%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fbc012ca460c4a6e8e1980076cb7e110~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2e5LiT5Lia56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763800560&amp;x-signature=LEINKxr%2BFBLaUVq08kJqi83vzOU%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥çœ‹å‡º<code>borrow()</code>å’Œ<code>borrow_mut()</code>å†…éƒ¨å®ç°å­˜åœ¨å†™æ“ä½œï¼Œå¤šçº¿ç¨‹è®¿é—®æ—¶ï¼Œflag çŠ¶æ€ç®¡ç†å¯èƒ½å‡ºé”™ï¼Œå¯¼è‡´panicã€‚</p>
<p><strong>åŒæ ·çš„é—®é¢˜ï¼Œåœ¨Swiftä¸­ï¼Œå¦‚æœæ˜¯å¤šçº¿ç¨‹è¯»ä¸€ä¸ªå˜é‡ï¼Œæ˜¯å®‰å…¨çš„å—ï¼Ÿ</strong></p>
<p>ç­”æ¡ˆæˆ‘ä»¬å°†åœ¨å…¬ä¼—å·ã€Œéä¸“ä¸šç¨‹åºå‘˜Pingã€çš„ä¸‹ä¸€æœŸæ–‡ç« æ­æ™“ï¼Œæ¬¢è¿è®¢é˜…äº¤æµï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Rust ndarray é«˜æ€§èƒ½è®¡ç®—ï¼šä»å…ƒç´ æ“ä½œåˆ°çŸ©é˜µè¿ç®—çš„ä¼˜åŒ–å®è·µ]]></title>    <link>https://juejin.cn/post/7572524368876355619</link>    <guid>https://juejin.cn/post/7572524368876355619</guid>    <pubDate>2025-11-15T08:05:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572524368876355619" data-draft-id="7572454929144365091" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Rust ndarray é«˜æ€§èƒ½è®¡ç®—ï¼šä»å…ƒç´ æ“ä½œåˆ°çŸ©é˜µè¿ç®—çš„ä¼˜åŒ–å®è·µ"/> <meta itemprop="keywords" content="Rust,äººå·¥æ™ºèƒ½,ç¬”è®°"/> <meta itemprop="datePublished" content="2025-11-15T08:05:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å—ä¹‹ä»¥è’™"/> <meta itemprop="url" content="https://juejin.cn/user/4186572019737624"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Rust ndarray é«˜æ€§èƒ½è®¡ç®—ï¼šä»å…ƒç´ æ“ä½œåˆ°çŸ©é˜µè¿ç®—çš„ä¼˜åŒ–å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4186572019737624/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å—ä¹‹ä»¥è’™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T08:05:42.000Z" title="Sat Nov 15 2025 08:05:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Rust ndarray é«˜æ€§èƒ½è®¡ç®—ï¼šä»å…ƒç´ æ“ä½œåˆ°çŸ©é˜µè¿ç®—çš„ä¼˜åŒ–å®è·µ</h2>
<h3 data-id="heading-1">ä¸€ã€è¿­ä»£ä¸æ˜ å°„ï¼šç”¨ mapv é‡Šæ”¾å…ƒç´ çº§å¤„ç†æ½œåŠ›</h3>
<p>åœ¨ Rust çš„ <code>ndarray</code> åº“ä¸­ï¼Œè¿­ä»£ä¸æ˜ å°„æ˜¯å¯¹æ•°ç»„å…ƒç´ è¿›è¡Œæ“ä½œçš„åŸºç¡€ã€‚</p>
<p>é€šè¿‡çµæ´»è¿ç”¨è¿™äº›æ“ä½œï¼Œå¯ä»¥é«˜æ•ˆåœ°å¤„ç†æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œå®ç°å„ç§å¤æ‚çš„æ•°æ®å¤„ç†ä»»åŠ¡ã€‚</p>
<h4 data-id="heading-2">1.1 mapv åŸºç¡€ï¼šé€å…ƒç´ æ˜ å°„ä¸ç±»å‹è½¬æ¢</h4>
<p><code>mapv</code>æ˜¯ <code>ndarray</code> ä¸­é«˜æ•ˆçš„å…ƒç´ çº§æ˜ å°„å·¥å…·ï¼Œæ¥æ”¶é—­åŒ…ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸åŸæ•°ç»„ç»´åº¦ç›¸åŒçš„æ–°æ•°ç»„ã€‚ä¸æƒ°æ€§çš„<code>map</code>ä¸åŒï¼Œ<code>mapv</code>ç«‹å³åˆ†é…å†…å­˜å¹¶è®¡ç®—ç»“æœï¼Œé€‚åˆéœ€è¦æ–°æ•°ç»„çš„åœºæ™¯ã€‚</p>
<pre><code class="hljs language-rust" lang="rust">
<span class="hljs-keyword">use</span> ndarray::array;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">sensor_readings</span> = array![<span class="hljs-number">102.3</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">511.5</span>, <span class="hljs-number">1023.0f64</span>];

    <span class="hljs-comment">// ä½¿ç”¨ mapv è¿›è¡Œå½’ä¸€åŒ–</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">normalized</span> = sensor_readings.<span class="hljs-title function_ invoke__">mapv</span>(|x| x / <span class="hljs-number">1023.0</span>);

    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"åŸå§‹è¯»æ•°: \n{}"</span>, sensor_readings);
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å½’ä¸€åŒ–å: \n{}"</span>, normalized);

    <span class="hljs-comment">// ä¹Ÿå¯ä»¥æ‰§è¡Œæ›´å¤æ‚çš„æ“ä½œï¼Œæ¯”å¦‚ Sigmoid</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">activations</span> = normalized.<span class="hljs-title function_ invoke__">mapv</span>(|x| <span class="hljs-number">1.0</span> / (<span class="hljs-number">1.0</span> + (-x).<span class="hljs-title function_ invoke__">exp</span>()));
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ¿€æ´»å€¼: \n{}"</span>, activations);
}
</code></pre>
<p><strong>è¾“å‡ºï¼š</strong></p>
<pre><code class="hljs language-shell" lang="shell">åŸå§‹è¯»æ•°:
[102.3, 0, 511.5, 1023]
å½’ä¸€åŒ–å:
[0.09999999999999999, 0, 0.5, 1]
æ¿€æ´»å€¼:
[0.5249791874789399, 0.5, 0.6224593312018546, 0.7310585786300049]
</code></pre>
<p>åœ¨å…·èº«æ™ºèƒ½åœºæ™¯ä¸­ï¼Œå½“å¤„ç†ä¼ æ„Ÿå™¨æ•°æ®æ—¶ï¼Œ<code>mapv</code>å¯ç”¨äºå¯¹ä¼ æ„Ÿå™¨è¯»æ•°è¿›è¡Œé¢„å¤„ç†ã€‚</p>
<p>æ¯”å¦‚ï¼Œå°†æ¸©åº¦ä¼ æ„Ÿå™¨çš„åŸå§‹è¯»æ•°ä»æ‘„æ°åº¦è½¬æ¢ä¸ºåæ°åº¦ï¼Œæˆ–è€…å¯¹å‹åŠ›ä¼ æ„Ÿå™¨æ•°æ®è¿›è¡Œæ ¡å‡†ã€‚</p>
<h4 data-id="heading-3">1.2 å¹¶è¡ŒåŠ é€Ÿï¼špar_mapv_inplace åº”å¯¹å¤§è§„æ¨¡æ•°æ®</h4>
<p>å€ŸåŠ© rayon åº“ï¼Œ<code>par_mapv_inplace</code>æ”¯æŒå¤šæ ¸å¹¶è¡Œå¤„ç†ï¼Œæ˜¾è‘—æå‡è®¡ç®—å¯†é›†å‹ä»»åŠ¡æ•ˆç‡ï¼ˆéœ€å¯ç”¨<code>rayon</code>ç‰¹æ€§ï¼‰ã€‚</p>
<p><code>par_mapv_inplace</code> è¢«ç§°ä¹‹ä¸º<strong>å°±åœ°å¹¶è¡Œä¿®æ”¹</strong>ï¼Œ æ˜¯ <code>ndarray</code> æä¾›çš„æœ€ç›´æ¥çš„å¹¶è¡Œ <code>map</code> æ–¹æ³•ã€‚å®ƒä¼šå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œå¹¶è¡Œåœ°ä¿®æ”¹æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œä¸è¿”å›ä»»ä½•ä¸œè¥¿ (())ã€‚</p>
<p>Cargo.tomlé…ç½®ï¼š</p>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-section">[dependencies]</span>
<span class="hljs-attr">ndarray</span> = { version = <span class="hljs-string">"0.17.1"</span>, features = [<span class="hljs-string">"rayon"</span>] }
</code></pre>
<pre><code class="hljs language-rust" lang="rust">
<span class="hljs-keyword">use</span> ndarray::Array3;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">matrix</span> =
        Array3::<span class="hljs-title function_ invoke__">from_shape_vec</span>((<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>), <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1.0f64</span>, <span class="hljs-number">2.0</span>, <span class="hljs-number">3.0</span>, <span class="hljs-number">4.0</span>, <span class="hljs-number">5.0</span>, <span class="hljs-number">6.0</span>, <span class="hljs-number">7.0</span>, <span class="hljs-number">8.0</span>]).<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-comment">// å¹¶è¡Œè®¡ç®—æ¯ä¸ªå…ƒç´ çš„å¹³æ–¹</span>
    matrix.<span class="hljs-title function_ invoke__">par_mapv_inplace</span>(|x| x.<span class="hljs-title function_ invoke__">powi</span>(<span class="hljs-number">2</span>));
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å¹¶è¡Œè®¡ç®—å€¼: \n{}"</span>, matrix);
}
</code></pre>
<p><strong>è¾“å‡ºï¼š</strong></p>
<pre><code class="hljs language-shell" lang="shell">å¹¶è¡Œè®¡ç®—å€¼:
[[[1, 4],
  [9, 16]],

 [[25, 36],
  [49, 64]]]
</code></pre>
<h3 data-id="heading-4">äºŒã€å…ƒç´ çº§è¿ç®—ï¼šç®€æ´é«˜æ•ˆçš„é€å…ƒç´ æ“ä½œ</h3>
<p>å…ƒç´ çº§è¿ç®—æ˜¯ <code>ndarray</code> çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œå®ƒå…è®¸æˆ‘ä»¬å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ è¿›è¡Œæ“ä½œï¼Œè€Œæ— éœ€æ˜¾å¼çš„å¾ªç¯ã€‚</p>
<p>è¿™ç§å‘é‡åŒ–çš„æ“ä½œæ–¹å¼ä¸ä»…æé«˜äº†ä»£ç çš„ç®€æ´æ€§ï¼Œè¿˜æ˜¾è‘—æå‡äº†æ‰§è¡Œæ•ˆç‡ã€‚</p>
<h4 data-id="heading-5">2.1 åŸºç¡€ç®—æœ¯è¿ç®—ï¼šè¿ç®—ç¬¦ä¸å‡½æ•°åŒæ”¯æŒ</h4>
<p><code>ndarray</code> æ”¯æŒç›´æ¥ä½¿ç”¨<code>+</code>ã€<code>-</code>ã€<code>*</code>ã€<code>/</code>è¿›è¡Œå…ƒç´ çº§è¿ç®—ï¼Œæ“ä½œç®€å•ç›´è§‚ï¼Œä»£ç å¯è¯»æ€§å¼ºã€‚è¿™äº›è¿ç®—ç¬¦ä¼šè‡ªåŠ¨åº”ç”¨åˆ°æ•°ç»„çš„æ¯ä¸ªå…ƒç´ ä¸Šï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚</p>
<p>åŒæ—¶ï¼Œ<code>ndarray</code> ä¹Ÿæä¾›äº†<code>add</code>ã€<code>sub</code>ã€<code>mul</code>ã€<code>div</code>ç­‰å‡½æ•°æ¥å®ç°ç›¸åŒçš„è¿ç®—ã€‚ä½¿ç”¨å‡½æ•°å½¢å¼å¯ä»¥åœ¨ä¸€äº›éœ€è¦æ›´çµæ´»æ“ä½œçš„åœºæ™¯ä¸­ï¼Œç¡®ä¿ç±»å‹å®‰å…¨å’Œæ›´å¥½çš„é”™è¯¯å¤„ç†ã€‚</p>
<pre><code class="hljs language-rust" lang="rust">
<span class="hljs-keyword">use</span> ndarray::array;
<span class="hljs-keyword">use</span> std::ops::Mul;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">a</span> = array![[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]];
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">b</span> = array![[<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>], [<span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>]];

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">a_clone</span> = a.<span class="hljs-title function_ invoke__">clone</span>();
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">b_clone</span> = b.<span class="hljs-title function_ invoke__">clone</span>();
    <span class="hljs-comment">// ä½¿ç”¨è¿ç®—ç¬¦è¿›è¡Œå…ƒç´ çº§åŠ æ³•</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">c</span> = a + b;
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ç›¸åŠ : \n{}"</span>, c);

    <span class="hljs-comment">// ä½¿ç”¨å‡½æ•°è¿›è¡Œå…ƒç´ çº§ä¹˜æ³•</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">d</span> = a_clone.<span class="hljs-title function_ invoke__">mul</span>(&amp;b_clone);
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ç›¸ä¹˜: \n{}"</span>, d);
}
</code></pre>
<p><strong>è¾“å‡ºï¼š</strong></p>
<pre><code class="hljs language-shell" lang="shell">ç›¸åŠ :
[[8, 10, 12],
 [14, 16, 18]]
ç›¸ä¹˜:
[[7, 16, 27],
 [40, 55, 72]]
</code></pre>
<h4 data-id="heading-6">2.2 æ•°å­¦å‡½æ•°åº”ç”¨ï¼šä»åŸºç¡€åˆ°å¤æ‚è¿ç®—</h4>
<p><code>ndarray</code> æ”¯æŒ<code>sqrt</code>ã€<code>sin</code>ã€<code>cos</code>ç­‰ä¸°å¯Œçš„æ•°å­¦å‡½æ•°ï¼Œè¿™äº›å‡½æ•°å¯ä»¥ç›´æ¥ä½œç”¨äºæ•°ç»„çš„æ¯ä¸ªå…ƒç´ ï¼Œé¿å…äº†æ‰‹åŠ¨è¿­ä»£æ•°ç»„æ¥åº”ç”¨è¿™äº›å‡½æ•°çš„ç¹çè¿‡ç¨‹ã€‚</p>
<pre><code class="hljs language-rust" lang="rust">
<span class="hljs-keyword">use</span> ndarray::prelude::*;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">a</span> = array![<span class="hljs-number">1.0</span>, <span class="hljs-number">4.0</span>, <span class="hljs-number">9.0</span>];
    <span class="hljs-comment">// è®¡ç®—æ¯ä¸ªå…ƒç´ çš„å¹³æ–¹æ ¹</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">b</span> = a.<span class="hljs-title function_ invoke__">sqrt</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å¹³æ–¹æ ¹: \n{}"</span>, b);

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">angles</span> = array![<span class="hljs-number">0.0</span>, std::<span class="hljs-type">f64</span>::consts::PI / <span class="hljs-number">2.0</span>, std::<span class="hljs-type">f64</span>::consts::PI];
    <span class="hljs-comment">// è®¡ç®—æ¯ä¸ªè§’åº¦çš„æ­£å¼¦å€¼</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">sines</span> = angles.<span class="hljs-title function_ invoke__">sin</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ­£å¼¦å€¼: \n{}"</span>, sines);
}
</code></pre>
<p><strong>è¾“å‡ºï¼š</strong></p>
<pre><code class="hljs language-shell" lang="shell">å¹³æ–¹æ ¹:
[1, 2, 3]
æ­£å¼¦å€¼:
[0, 1, 0.00000000000000012246467991473532]
</code></pre>
<h3 data-id="heading-7">ä¸‰ã€å¹¿æ’­æœºåˆ¶ï¼šç»´åº¦é€‚é…çš„éšå½¢åŠ©æ‰‹</h3>
<p>åœ¨ <code>ndarray</code> çš„ä¸–ç•Œé‡Œï¼Œå¹¿æ’­æœºåˆ¶æ˜¯ä¸€ç§å¼ºå¤§è€Œåˆç¥å¥‡çš„ç‰¹æ€§ï¼Œå®ƒå…è®¸ä¸åŒå½¢çŠ¶çš„æ•°ç»„åœ¨è¿›è¡Œè¿ç®—æ—¶è‡ªåŠ¨é€‚é…ç»´åº¦ï¼Œå¤§å¤§ç®€åŒ–äº†ä»£ç çš„ç¼–å†™ã€‚</p>
<h4 data-id="heading-8">3.1 å¹¿æ’­è§„åˆ™ï¼šä»åç¼˜ç»´åº¦å¯¹é½åˆ°è‡ªåŠ¨æ‰©å±•</h4>
<p><code>ndarray</code> å¹¿æ’­éµå¾ªã€Œåç¼˜å¯¹é½ã€åŸåˆ™ï¼Œå½“ä¸¤ä¸ªæ•°ç»„è¿›è¡Œè¿ç®—æ—¶ï¼Œå¦‚æœå®ƒä»¬çš„ç»´åº¦æ•°ä¸åŒï¼Œ<code>ndarray</code> ä¼šåœ¨è¾ƒå°æ•°ç»„çš„å‰é¢è¡¥ 1ï¼Œä½¿å…¶ç»´åº¦æ•°ä¸è¾ƒå¤§æ•°ç»„ç›¸åŒã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸€ä¸ªå½¢çŠ¶ä¸º (5, 3) çš„æ•°ç»„ä¸ä¸€ä¸ªå½¢çŠ¶ä¸º (3,) çš„æ•°ç»„è¿›è¡Œå¹¿æ’­æ—¶ï¼Œå½¢çŠ¶ä¸º (3,) çš„æ•°ç»„ä¼šè¢«è§†ä¸º (1, 3)ï¼Œç„¶åå†ä¸ (5, 3) è¿›è¡Œå¯¹é½ï¼Œæœ€ç»ˆå¹¿æ’­ä¸º (5, 3)ã€‚</p>
<p>åœ¨ç»´åº¦å¯¹é½åï¼Œå•ç»´åº¦ï¼ˆé•¿åº¦ä¸º 1ï¼‰çš„ç»´åº¦ä¼šè‡ªåŠ¨å¤åˆ¶æ‰©å±•ï¼Œä»¥åŒ¹é…å¦ä¸€ä¸ªæ•°ç»„çš„ç»´åº¦ã€‚è¿™ç§æ‰©å±•æ˜¯é€»è¾‘ä¸Šçš„ï¼Œæ— éœ€æ˜¾å¼çš„æ•°æ®å¤åˆ¶ï¼Œå› æ­¤æ•ˆç‡éå¸¸é«˜ã€‚</p>
<h4 data-id="heading-9">3.2 å®æˆ˜åœºæ™¯ï¼šç¯å¢ƒå¸¸æ•°å¹¿æ’­ä¸çŠ¶æ€è®¡ç®—</h4>
<p>åœ¨å…·èº«æ™ºèƒ½çš„åº”ç”¨ä¸­ï¼Œå°†ç¯å¢ƒå¸¸æ•°å¹¿æ’­åˆ°æ‰€æœ‰çŠ¶æ€å‘é‡æ˜¯ä¸€ä¸ªå¸¸è§çš„éœ€æ±‚ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæœºå™¨äººï¼Œå®ƒåœ¨ä¸åŒçš„çŠ¶æ€ä¸‹éœ€è¦è€ƒè™‘é‡åŠ›åŠ é€Ÿåº¦çš„å½±å“ã€‚é‡åŠ›åŠ é€Ÿåº¦æ˜¯ä¸€ä¸ªå¸¸æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶å¹¿æ’­åˆ°æœºå™¨äººçš„æ‰€æœ‰çŠ¶æ€å‘é‡ä¸Šï¼Œä»è€Œåœ¨è®¡ç®—ä¸­è€ƒè™‘é‡åŠ›çš„ä½œç”¨ã€‚</p>
<pre><code class="hljs language-rust" lang="rust">
<span class="hljs-keyword">use</span> ndarray::array;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-comment">// å®šä¹‰é‡åŠ›åŠ é€Ÿåº¦ (1,)</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">gravity</span> = array![<span class="hljs-number">9.81</span>]; 

    <span class="hljs-comment">// å‡è®¾æœºå™¨äººæœ‰ä¸‰ä¸ªçŠ¶æ€ï¼Œæ¯ä¸ªçŠ¶æ€åŒ…å«ä½ç½®å’Œé€Ÿåº¦ä¿¡æ¯ (3, 2, 2)</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">states</span> = array![
        [[<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>], [<span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>]],
        [[<span class="hljs-number">2.0</span>, <span class="hljs-number">2.0</span>], [<span class="hljs-number">3.0</span>, <span class="hljs-number">3.0</span>]],
        [[<span class="hljs-number">4.0</span>, <span class="hljs-number">4.0</span>], [<span class="hljs-number">5.0</span>, <span class="hljs-number">5.0</span>]]
    ]; 

    <span class="hljs-comment">// å°†é‡åŠ›åŠ é€Ÿåº¦å¹¿æ’­åˆ°æ‰€æœ‰çŠ¶æ€å‘é‡ä¸Š</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">new_states</span> = states + gravity; 
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"New states:\n {:?}"</span>, new_states); 
}
</code></pre>
<p><strong>è¾“å‡ºï¼š</strong></p>
<pre><code class="hljs language-shell" lang="shell">New states:
 [[[9.81, 9.81],
  [10.81, 10.81]],

 [[11.81, 11.81],
  [12.81, 12.81]],

 [[13.81, 13.81],
  [14.81, 14.81]]], shape=[3, 2, 2], strides=[4, 2, 1], layout=Cc (0x5), const ndim=3
</code></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>gravity</code>æ˜¯ä¸€ä¸ªå½¢çŠ¶ä¸º (1,) çš„æ•°ç»„ï¼Œ<code>states</code>æ˜¯ä¸€ä¸ªå½¢çŠ¶ä¸º (3, 2, 2) çš„æ•°ç»„ã€‚é€šè¿‡å¹¿æ’­æœºåˆ¶ï¼Œ<code>gravity</code>ä¼šè‡ªåŠ¨æ‰©å±•ä¸º (3, 2, 2) çš„å½¢çŠ¶ï¼Œä¸<code>states</code>è¿›è¡ŒåŒ¹é…ï¼Œç„¶åè¿›è¡Œå…ƒç´ çº§åŠ æ³•è¿ç®—ã€‚</p>
<h3 data-id="heading-10">å››ã€è¿æ¥ä¸å †å ï¼šçµæ´»ç»„åˆå¤šç»´æ•°æ®</h3>
<p>åœ¨å¤„ç†å¤šç»´æ•°æ®æ—¶ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦å°†å¤šä¸ªæ•°ç»„åˆå¹¶æˆä¸€ä¸ªæ›´å¤§çš„æ•°ç»„ï¼Œæˆ–è€…å°†ä¸€ä¸ªæ•°ç»„åˆ†å‰²æˆå¤šä¸ªå°æ•°ç»„ã€‚ndarray æä¾›äº†<code>stack</code>å’Œ<code>concatenate</code>å‡½æ•°æ¥æ»¡è¶³è¿™äº›éœ€æ±‚ï¼Œå®ƒä»¬åœ¨å…·èº«æ™ºèƒ½ä¸­ä¹Ÿæœ‰ç€å¹¿æ³›çš„åº”ç”¨ï¼Œæ¯”å¦‚åœ¨æ‰¹é‡ç”Ÿæˆæ§åˆ¶ä¿¡å·æ—¶ï¼Œå°±éœ€è¦å°†å¤šä¸ªæ§åˆ¶ä¿¡å·æ•°ç»„åˆå¹¶æˆä¸€ä¸ªå¤§çš„æ•°ç»„ã€‚</p>
<h4 data-id="heading-11">4.1 concatenateï¼šæ²¿ç°æœ‰è½´è¿æ¥æ•°ç»„</h4>
<p><code>concatenate</code>å‡½æ•°æ˜¯æ²¿æŒ‡å®šè½´è¿æ¥æ•°ç»„ï¼Œå®ƒå…è®¸è¾“å…¥æ•°ç»„åœ¨å…¶ä»–è½´ä¸Šçš„å½¢çŠ¶ä¸€è‡´ï¼Œåªæœ‰è¿æ¥è½´ä¸Šçš„é•¿åº¦å¯ä»¥ä¸åŒã€‚è¿™ä½¿å¾—<code>concatenate</code>åœ¨åˆå¹¶å…·æœ‰ä¸åŒé•¿åº¦ä½†ç›¸åŒç»“æ„çš„æ•°æ®æ—¶éå¸¸çµæ´»ã€‚</p>
<pre><code class="hljs language-rust" lang="rust">
<span class="hljs-keyword">use</span> ndarray::array;
<span class="hljs-keyword">use</span> ndarray::Axis;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">a</span> = array![[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]];
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">b</span> = array![[<span class="hljs-number">5</span>, <span class="hljs-number">6</span>]];

    <span class="hljs-comment">// æ²¿è½´0è¿æ¥æ•°ç»„</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">c</span> = ndarray::<span class="hljs-title function_ invoke__">concatenate</span>(<span class="hljs-title function_ invoke__">Axis</span>(<span class="hljs-number">0</span>), &amp;[a.<span class="hljs-title function_ invoke__">view</span>(), b.<span class="hljs-title function_ invoke__">view</span>()]).<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"concatenate axis0:\n {:?}"</span>, c);

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">d</span> = array![[<span class="hljs-number">7</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">9</span>, <span class="hljs-number">10</span>]];
    <span class="hljs-comment">// æ²¿è½´1è¿æ¥æ•°ç»„</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">e</span> = ndarray::<span class="hljs-title function_ invoke__">concatenate</span>(<span class="hljs-title function_ invoke__">Axis</span>(<span class="hljs-number">1</span>), &amp;[a.<span class="hljs-title function_ invoke__">view</span>(), d.<span class="hljs-title function_ invoke__">view</span>()]).<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"concatenate axis1:\n {:?}"</span>, e);
}
</code></pre>
<p><strong>è¾“å‡ºï¼š</strong></p>
<pre><code class="hljs language-shell" lang="shell">concatenate axis0:
 [[1, 2],
 [3, 4],
 [5, 6]], shape=[3, 2], strides=[2, 1], layout=Cc (0x5), const ndim=2
concatenate axis1:
 [[1, 2, 7, 8],
 [3, 4, 9, 10]], shape=[2, 4], strides=[1, 2], layout=Ff (0xa), const ndim=2
</code></pre>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå½“æˆ‘ä»¬éœ€è¦å°†ä¸åŒæ—¶é—´æ®µçš„ä¼ æ„Ÿå™¨æ•°æ®è¿æ¥èµ·æ¥æ—¶ï¼Œ<code>concatenate</code>å°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p>
<p>æ¯”å¦‚ï¼Œä¸€ä¸ªæœºå™¨äººåœ¨ä¸åŒæ—¶é—´æ®µé‡‡é›†åˆ°çš„ä½ç½®æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>concatenate</code>å°†è¿™äº›æ•°æ®æŒ‰æ—¶é—´é¡ºåºè¿æ¥èµ·æ¥ï¼Œä»¥ä¾¿åˆ†ææœºå™¨äººçš„è¿åŠ¨è½¨è¿¹ã€‚</p>
<h4 data-id="heading-12">4.2 stackï¼šæ–°å¢ç»´åº¦å †å æ•°ç»„</h4>
<p><code>stack</code>å‡½æ•°ç”¨äºåœ¨æŒ‡å®šè½´ä¸Šå †å æ•°ç»„ï¼Œç”Ÿæˆä¸€ä¸ªæ›´é«˜ç»´åº¦çš„æ–°æ•°ç»„ã€‚å®ƒè¦æ±‚æ‰€æœ‰è¾“å…¥æ•°ç»„çš„å½¢çŠ¶å¿…é¡»ä¸€è‡´ï¼Œå¦åˆ™ä¼šå¯¼è‡´é”™è¯¯ã€‚é€šè¿‡<code>stack</code>ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°å°†å¤šä¸ªç›¸åŒå½¢çŠ¶çš„æ•°ç»„åˆå¹¶æˆä¸€ä¸ªæ›´é«˜ç»´åº¦çš„æ•°ç»„ï¼Œè¿™åœ¨å¤„ç†å¤šä¸ªæ ·æœ¬çš„ç›¸åŒç‰¹å¾æ•°æ®æ—¶éå¸¸æœ‰ç”¨ã€‚</p>
<p>å †å  (stack) åœ¨æ¦‚å¿µä¸Šï¼Œå®Œå…¨ç­‰åŒäºä»¥ä¸‹ä¸¤æ­¥æ“ä½œï¼š</p>
<ul>
<li>
<p>â€œReshapeâ€ (å¢åŠ ç»´åº¦): å…ˆæŠŠä½ è¦å †å çš„æ¯ä¸€ä¸ªæ•°ç»„ï¼Œåœ¨ä½ æŒ‡å®šçš„ Axis ä½ç½®ä¸Šï¼Œå¢åŠ ä¸€ä¸ªå¤§å°ä¸º 1 çš„æ–°ç»´åº¦ã€‚</p>
</li>
<li>
<p>â€œConcatenateâ€ (æ‹¼æ¥): ç„¶åï¼Œæ²¿ç€é‚£ä¸ªåˆšåˆšæ–°å¢çš„ Axisï¼ŒæŠŠè¿™äº›â€œå‡ç»´â€åçš„æ•°ç»„æ‹¼æ¥èµ·æ¥ã€‚</p>
</li>
</ul>
<pre><code class="hljs language-rust" lang="rust">
<span class="hljs-keyword">use</span> ndarray::array;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">a</span> = array![<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">b</span> = array![<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>];

    <span class="hljs-comment">// åœ¨æ–°è½´ï¼ˆè½´0ï¼‰ä¸Šå †å æ•°ç»„</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">c</span> = ndarray::<span class="hljs-title function_ invoke__">stack</span>(<span class="hljs-title function_ invoke__">Axis</span>(<span class="hljs-number">0</span>), &amp;[a.<span class="hljs-title function_ invoke__">view</span>(), b.<span class="hljs-title function_ invoke__">view</span>()]).<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"stack axis0:\n {:?}"</span>, c);

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">a_2d</span> = a.<span class="hljs-title function_ invoke__">insert_axis</span>(<span class="hljs-title function_ invoke__">Axis</span>(<span class="hljs-number">1</span>)); <span class="hljs-comment">// (3,1)</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">b_2d</span> = b.<span class="hljs-title function_ invoke__">insert_axis</span>(<span class="hljs-title function_ invoke__">Axis</span>(<span class="hljs-number">1</span>)); <span class="hljs-comment">// (3,1)</span>
    <span class="hljs-comment">// åœ¨è½´1ä¸Šå †å æ•°ç»„, å…ˆå‡ç»´ ï¼ˆ3ï¼Œ1ï¼‰-&gt; (3, 1, 1), ç„¶ååœ¨è½´1ä¸Šæ‹¼æ¥</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">d</span> = ndarray::<span class="hljs-title function_ invoke__">stack</span>(<span class="hljs-title function_ invoke__">Axis</span>(<span class="hljs-number">1</span>), &amp;[a_2d.<span class="hljs-title function_ invoke__">view</span>(), b_2d.<span class="hljs-title function_ invoke__">view</span>()]).<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"stack axis1:\n {:?}"</span>, d);
}
</code></pre>
<p><strong>è¾“å‡ºï¼š</strong></p>
<pre><code class="hljs language-shell" lang="shell">stack axis0:
 [[1, 2, 3],
 [4, 5, 6]], shape=[2, 3], strides=[3, 1], layout=Cc (0x5), const ndim=2
stack axis1:
 [[[1],
  [4]],

 [[2],
  [5]],

 [[3],
  [6]]], shape=[3, 2, 1], strides=[1, 3, 1], layout=Ff (0xa), const ndim=3
</code></pre>
<h3 data-id="heading-13">äº”ã€èšåˆä¸æ²¿è½´æ“ä½œï¼šæ•°æ®é™ç»´ä¸ç»Ÿè®¡</h3>
<p>åœ¨æ•°æ®åˆ†æå’Œç§‘å­¦è®¡ç®—ä¸­ï¼Œèšåˆæ“ä½œæ˜¯å¯¹æ•°æ®è¿›è¡Œæ€»ç»“å’Œæ¦‚æ‹¬çš„é‡è¦æ‰‹æ®µã€‚<code>ndarray</code> æä¾›äº†ä¸°å¯Œçš„èšåˆå‡½æ•°ï¼Œå¦‚<code>sum</code>ã€<code>mean</code>ç­‰ï¼Œè¿™äº›å‡½æ•°å¯ä»¥å¿«é€Ÿè®¡ç®—æ•°ç»„çš„æ€»å’Œã€å¹³å‡å€¼ç­‰ç»Ÿè®¡é‡ã€‚</p>
<p>åŒæ—¶ï¼Œé€šè¿‡æŒ‡å®šè½´å‚æ•°ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ²¿ç‰¹å®šçš„ç»´åº¦è¿›è¡Œèšåˆæ“ä½œï¼Œå®ç°æ•°æ®çš„é™ç»´ä¸åˆ†æã€‚</p>
<h4 data-id="heading-14">5.1 åŸºç¡€èšåˆï¼šsumã€mean å¿«é€Ÿç»Ÿè®¡</h4>
<p><code>sum</code>å’Œ<code>mean</code>æ˜¯æœ€å¸¸ç”¨çš„èšåˆå‡½æ•°ä¹‹ä¸€ï¼Œå®ƒä»¬å¯ä»¥ç›´æ¥å¯¹æ•°ç»„è¿›è¡Œæ“ä½œï¼Œè¿”å›ä¸€ä¸ªæ ‡é‡ç»“æœï¼Œè¡¨ç¤ºæ•´ä¸ªæ•°ç»„çš„æ€»å’Œæˆ–å¹³å‡å€¼ã€‚</p>
<pre><code class="hljs language-rust" lang="rust">
<span class="hljs-keyword">use</span> ndarray::array;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">a</span> = array![<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];

    <span class="hljs-comment">// è®¡ç®—æ•°ç»„çš„æ€»å’Œ</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">sum</span> = a.<span class="hljs-title function_ invoke__">sum</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"sum:\n {:?}"</span>, sum);

    <span class="hljs-comment">// è®¡ç®—æ•°ç»„çš„å¹³å‡å€¼</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">mean</span> = a.<span class="hljs-title function_ invoke__">mean</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"mean:\n {:?}"</span>, mean); 
}
</code></pre>
<p><strong>è¾“å‡ºï¼š</strong></p>
<pre><code class="hljs language-shell" lang="shell">sum:
 15
mean:
 3.0
</code></pre>
<h4 data-id="heading-15">5.2 æ²¿è½´è®¡ç®—ï¼šæŒ‰ç»´åº¦èšåˆæ•°æ®</h4>
<p>é€šè¿‡<code>axis</code>å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šèšåˆæ“ä½œæ²¿å“ªä¸ªè½´è¿›è¡Œï¼Œä»è€Œå®ç°æŒ‰ç»´åº¦èšåˆæ•°æ®ã€‚åœ¨å¤„ç†å¤šç»´æ•°æ®æ—¶éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥å¿«é€Ÿè·å–ä¸åŒç»´åº¦ä¸Šçš„ç»Ÿè®¡ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-rust" lang="rust">
<span class="hljs-keyword">use</span> ndarray::array;
<span class="hljs-keyword">use</span> ndarray::Axis;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">matrix</span> = array![[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]];

    <span class="hljs-comment">// è®¡ç®—æ¯åˆ—çš„æ€»å’Œï¼ˆè½´0ï¼‰</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">column_sums</span> = matrix.<span class="hljs-title function_ invoke__">sum_axis</span>(<span class="hljs-title function_ invoke__">Axis</span>(<span class="hljs-number">0</span>));
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"column_sums:\n {:?}"</span>, column_sums);

    <span class="hljs-comment">// è®¡ç®—æ¯è¡Œçš„å¹³å‡å€¼ï¼ˆè½´1ï¼‰</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">row_means</span> = matrix.<span class="hljs-title function_ invoke__">mean_axis</span>(<span class="hljs-title function_ invoke__">Axis</span>(<span class="hljs-number">1</span>)).<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"row_means:\n {:?}"</span>, row_means);
}
</code></pre>
<p><strong>è¾“å‡ºï¼š</strong></p>
<pre><code class="hljs language-shell" lang="shell">column_sums:
 [5, 7, 9], shape=[3], strides=[1], layout=CFcf (0xf), const ndim=1
row_means:
 [2, 5], shape=[2], strides=[1], layout=CFcf (0xf), const ndim=1
</code></pre>
<h3 data-id="heading-16">å…­ã€çŸ©é˜µä»£æ•°ï¼šndarray-linalg ä¸çº¿æ€§ä»£æ•°åŸºç¡€</h3>
<p>åœ¨äººå·¥æ™ºèƒ½çš„ç®—æ³•å®ç°ä¸­ï¼ŒçŸ©é˜µä»£æ•°æ˜¯ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚<code>ndarray</code> åº“æœ¬èº«æä¾›äº†åŸºæœ¬çš„çŸ©é˜µä¹˜æ³•æ“ä½œï¼Œè€Œ <code>ndarray-linalg</code> åº“åˆ™è¿›ä¸€æ­¥æ‰©å±•äº†å…¶çº¿æ€§ä»£æ•°åŠŸèƒ½ï¼Œä¸ºè§£å†³å¤æ‚çš„æ•°å­¦é—®é¢˜æä¾›äº†å¼ºå¤§çš„å·¥å…·ã€‚</p>
<h4 data-id="heading-17">6.1 çŸ©é˜µä¹˜æ³•ï¼š.dot () ä¸ç»´åº¦åŒ¹é…</h4>
<p>åœ¨ <code>ndarray</code> ä¸­ï¼Œä½¿ç”¨<code>.dot()</code>æ–¹æ³•æ‰§è¡ŒçŸ©é˜µä¹˜æ³•ï¼Œå®ƒä¸¥æ ¼éµå¾ªçº¿æ€§ä»£æ•°ä¸­çš„ç»´åº¦è§„åˆ™ã€‚å¯¹äºä¸¤ä¸ªçŸ©é˜µ<code>A</code>å’Œ<code>B</code>ï¼Œåªæœ‰å½“<code>A</code>çš„åˆ—æ•°ç­‰äº<code>B</code>çš„è¡Œæ•°æ—¶ï¼ŒçŸ©é˜µä¹˜æ³•<code>A.dot(B)</code>æ‰æ˜¯æœ‰æ•ˆçš„ã€‚</p>
<pre><code class="hljs language-rust" lang="rust">
<span class="hljs-keyword">use</span> ndarray::array;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">a</span> = array![[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]];
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">b</span> = array![[<span class="hljs-number">5</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>]];

    <span class="hljs-comment">// æ‰§è¡ŒçŸ©é˜µä¹˜æ³•</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">c</span> = a.<span class="hljs-title function_ invoke__">dot</span>(&amp;b);
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"dot:\n {:?}"</span>, c);
}
</code></pre>
<p><strong>è¾“å‡ºï¼š</strong></p>
<pre><code class="hljs language-shell" lang="shell">dot:
 [[19, 22],
 [43, 50]], shape=[2, 2], strides=[2, 1], layout=Cc (0x5), const ndim=2
</code></pre>
<h4 data-id="heading-18">6.2 ndarray-linalg æ‰©å±•ï¼šç‰¹å¾å€¼ã€çŸ©é˜µåˆ†è§£</h4>
<p><code>ndarray-linalg</code>åº“ä¸º <code>ndarray</code> æä¾›äº†ä¸°å¯Œçš„çº¿æ€§ä»£æ•°æ‰©å±•ï¼ŒåŒ…æ‹¬çŸ©é˜µæ±‚é€†ã€å¥‡å¼‚å€¼åˆ†è§£ï¼ˆSVDï¼‰ã€ç‰¹å¾å€¼è®¡ç®—ç­‰é«˜çº§æ“ä½œã€‚</p>
<p>è¿™äº›åŠŸèƒ½åœ¨äººå·¥æ™ºèƒ½ä¸­å¯¹äºè§£å†³å¤æ‚çš„ä¼˜åŒ–å’Œä¼°è®¡é—®é¢˜éå¸¸å…³é”®ã€‚</p>
<p>Cargo.toml é…ç½®ï¼š</p>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-section">[dependencies]</span>
<span class="hljs-attr">ndarray</span> = { version = <span class="hljs-string">"0.17.1"</span> }
<span class="hljs-attr">ndarray-linalg</span> = <span class="hljs-string">"0.18.0"</span>
</code></pre>
<p>éœ€è¦é¢å¤–å®‰è£… <code>openblas</code>ï¼Œåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FOpenMathLib%2FOpenBLAS" target="_blank" title="https://github.com/OpenMathLib/OpenBLAS" ref="nofollow noopener noreferrer">github.com/OpenMathLibâ€¦</a></p>
<pre><code class="hljs language-rust" lang="rust">
<span class="hljs-keyword">use</span> ndarray::array;
<span class="hljs-keyword">use</span> ndarray_linalg::Inverse;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">matrix</span> = array![
        [<span class="hljs-number">1.0</span>, <span class="hljs-number">2.0</span>],
        [<span class="hljs-number">3.0</span>, <span class="hljs-number">4.0</span>]
    ];

    <span class="hljs-comment">// æ±‚çŸ©é˜µçš„é€†</span>
    <span class="hljs-keyword">match</span> matrix.<span class="hljs-title function_ invoke__">inv</span>() {
        <span class="hljs-title function_ invoke__">Ok</span>(inverse) =&gt; {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Inverse matrix: {:?}"</span>, inverse); 
        }
        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Error: {}"</span>, e); 
        }
    }
}
</code></pre>
<p><strong>è¾“å‡º</strong></p>
<pre><code class="hljs language-shell" lang="shell">Inverse matrix:
 [[-2.0, 1.0],
 [1.5, -0.5]], shape=[2, 2], strides=[2, 1], layout=Cc (0x5), const ndim=2
</code></pre>
<h3 data-id="heading-19">æ€»ç»“ï¼šndarray åŠ©åŠ›æ™ºèƒ½ç³»ç»Ÿé«˜æ•ˆè®¡ç®—</h3>
<p>Rust ndarray å‡­å€Ÿå…ƒç´ çº§æ“ä½œçš„ç®€æ´æ€§ã€å¹¿æ’­æœºåˆ¶çš„æ™ºèƒ½ç»´åº¦é€‚é…ã€çº¿æ€§ä»£æ•°çš„é«˜æ•ˆæ”¯æŒï¼Œæˆä¸ºAIä¸å…·èº«æ™ºèƒ½å¼€å‘çš„å¾—åŠ›å·¥å…·ã€‚</p>
<p>æ— è®ºæ˜¯ä¼ æ„Ÿå™¨æ•°æ®çš„å®æ—¶å¤„ç†ï¼Œè¿˜æ˜¯å¤æ‚ç®—æ³•çš„çŸ©é˜µè¿ç®—ï¼Œ<code>ndarray</code> éƒ½èƒ½åœ¨ä¿è¯å†…å­˜å®‰å…¨çš„åŒæ—¶ï¼Œæä¾›æ¥è¿‘åŸç”Ÿçš„æ€§èƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter3.38 å¸¦æ¥äº†ä»€ä¹ˆ]]></title>    <link>https://juejin.cn/post/7572301616167436297</link>    <guid>https://juejin.cn/post/7572301616167436297</guid>    <pubDate>2025-11-14T00:58:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572301616167436297" data-draft-id="7572012699626815515" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter3.38 å¸¦æ¥äº†ä»€ä¹ˆ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-14T00:58:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JarvanMo"/> <meta itemprop="url" content="https://juejin.cn/user/2348212565845704"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter3.38 å¸¦æ¥äº†ä»€ä¹ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2348212565845704/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JarvanMo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T00:58:42.000Z" title="Fri Nov 14 2025 00:58:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Flutter 3.38 æœ€è¿‘å‘å¸ƒäº†ï¼Œå¸¦æ¥äº†å¾ˆå¤šæ–°åŠŸèƒ½å’Œæ”¹è¿›ã€‚è¿™æ¬¡å‘å¸ƒåŒ…å«äº†æ¥è‡ª <strong>145 ä½</strong> ç‹¬ç«‹è´¡çŒ®è€…çš„ <strong>825 æ¬¡</strong> æ€»æäº¤ï¼Œå…¶ä¸­æœ‰ <strong>37 ä½</strong> æ˜¯é¦–æ¬¡è´¡çŒ®è€…ã€‚è®©æˆ‘ä»¬æ·±å…¥äº†è§£ä¸€ä¸‹è¿™æ¬¡å‘å¸ƒçš„å†…å®¹ã€‚</p>
<h2 data-id="heading-0">Dot shorthands</h2>
<p>åœ¨ Dart 3.10 + Flutter 3.38 ä¸­å¼€å§‹é»˜è®¤æ”¯æŒ Dot shorthands ï¼Œé€šè¿‡ Dot shorthands å¯ä»¥ä½¿å¯ä»¥é€šè¿‡å…è®¸æ‚¨çœç•¥ Dart èƒ½å¤Ÿæ¨æ–­å‡ºæ¥çš„ç±»å‹ï¼Œä»è€Œå‡å°‘æ ·æ¿ä»£ç ï¼Œä¾‹å¦‚ä½¿ç”¨ .start è€Œä¸æ˜¯ MainAxisAlignment.start ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// With shorthands</span>
Column(
  mainAxisAlignment: .start,
  crossAxisAlignment: .center,
  children: [ <span class="hljs-comment">/* ... */</span> ],
),

<span class="hljs-comment">// Without shorthands</span>
Column(
  mainAxisAlignment: MainAxisAlignment.start,
  crossAxisAlignment: CrossAxisAlignment.center,
  children: [ <span class="hljs-comment">/* â€¦ */</span> ],
),
</code></pre>
<p>è¿™å¯¹äº<strong>å‘½åæ„é€ å‡½æ•°</strong>ä¹ŸåŒæ ·é€‚ç”¨ï¼Œå¦‚<code>.all</code>è€Œä¸æ˜¯<code>EdgeInsets.all</code>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">Padding(
  padding: .all(<span class="hljs-number">8.0</span>),
  child: Text(<span class="hljs-string">'Hello world'</span>),
),
</code></pre>
<h2 data-id="heading-1">ğŸ’» Web å¼€å‘é…ç½®ä¸åŠŸèƒ½å¢å¼º</h2>
<hr/>
<h3 data-id="heading-2">Web å¼€å‘é…ç½®æ–‡ä»¶</h3>
<p><code>flutter run</code> å‘½ä»¤ç°åœ¨æ”¯æŒä¸€ä¸ªç”¨äº <strong>Web è®¾ç½®çš„é…ç½®æ–‡ä»¶</strong>ã€‚æ‚¨å¯ä»¥åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ <code>web_dev_config.yaml</code> æ–‡ä»¶ä¸­æŒ‡å®š <strong>ä¸»æœº (host)ã€ç«¯å£ (port)ã€è¯ä¹¦ (certificate)</strong> å’Œ <strong>è¯·æ±‚å¤´ä¿¡æ¯ (header)</strong>ã€‚å°†æ­¤æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ï¼Œç¡®ä¿å›¢é˜Ÿä¸­çš„æ‰€æœ‰æˆå‘˜éƒ½ä½¿ç”¨ç›¸åŒçš„è®¾ç½®è¿›è¡Œè°ƒè¯•ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">server:</span>
  <span class="hljs-attr">host:</span> <span class="hljs-string">"0.0.0.0"</span> <span class="hljs-comment"># Defines the binding address &lt;string&gt;</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span> <span class="hljs-comment"># Specifies the port &lt;int&gt; for the development server</span>
  <span class="hljs-attr">https:</span>
    <span class="hljs-attr">cert-path:</span> <span class="hljs-string">"/path/to/cert.pem"</span> <span class="hljs-comment"># Path &lt;string&gt; to your TLS certificate</span>
    <span class="hljs-attr">cert-key-path:</span> <span class="hljs-string">"/path/to/key.pem"</span> <span class="hljs-comment"># Path &lt;string&gt; to TLS certificate key</span>
</code></pre>
<ul>
<li>æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.dev%2Fplatform-integration%2Fweb%2Fweb-dev-config-file" target="_blank" title="https://docs.flutter.dev/platform-integration/web/web-dev-config-file" ref="nofollow noopener noreferrer">è®¾ç½® Web å¼€å‘é…ç½®æ–‡ä»¶</a>ã€‚</li>
</ul>
<h3 data-id="heading-3">Web å¼€å‘ä»£ç†è®¾ç½®</h3>
<p>é™¤äº†ç°æœ‰çš„å‘½ä»¤è¡Œæ ‡å¿—å¤–ï¼ŒWeb å¼€å‘é…ç½®æ–‡ä»¶ç°åœ¨è¿˜æ”¯æŒæ–°çš„<strong>ä»£ç†è®¾ç½® (proxy settings)</strong>ã€‚</p>
<ul>
<li>ä»£ç†è®¾ç½®å…è®¸å°†ç‰¹å®šè·¯å¾„çš„è¯·æ±‚è½¬å‘åˆ°å¦ä¸€ä¸ªæœåŠ¡å™¨ã€‚è¿™ä½¿å¾—å¼€å‘è¿æ¥åˆ°åŒä¸€ä¸»æœºä¸ŠåŠ¨æ€ç«¯ç‚¹çš„ Web å®¢æˆ·ç«¯æ›´åŠ å®¹æ˜“ã€‚</li>
</ul>
<pre><code class="hljs language-dart" lang="dart">server:
  proxy:
    - target: <span class="hljs-string">"http://localhost:5000/"</span> # Base URL &lt;string&gt; of your backend
      prefix: <span class="hljs-string">"/users/"</span> # Path &lt;string&gt;
    - target: <span class="hljs-string">"http://localhost:3000/"</span>
      prefix: <span class="hljs-string">"/data/"</span>
      replace: <span class="hljs-string">"/report/"</span> # Replacement &lt;string&gt; of path <span class="hljs-keyword">in</span> redirected URL (optional)
    - target: <span class="hljs-string">"http://localhost:4000/"</span>
      prefix: <span class="hljs-string">"/products/"</span>
      replace: <span class="hljs-string">""</span>
</code></pre>
<ul>
<li>æœ‰å…³ä»£ç†è®¾ç½®çš„è¯¦ç»†ä¿¡æ¯ï¼Œä¹Ÿè¯·å‚é˜…<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.dev%2Fplatform-integration%2Fweb%2Fweb-dev-config-file" target="_blank" title="https://docs.flutter.dev/platform-integration/web/web-dev-config-file" ref="nofollow noopener noreferrer">è®¾ç½® Web å¼€å‘é…ç½®æ–‡ä»¶</a>ã€‚</li>
</ul>
<h3 data-id="heading-4">Web ä¸Šçš„çƒ­é‡è½½æ‰©å±•æ”¯æŒ</h3>
<ul>
<li>å½“ä½¿ç”¨ <code>-d web-server</code> è¿è¡Œå¹¶åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ Flutter åº”ç”¨é“¾æ¥æ—¶ï¼Œ<strong>æœ‰çŠ¶æ€çƒ­é‡è½½ (Stateful hot reload)</strong> ç°åœ¨<strong>é»˜è®¤å¯ç”¨</strong>ã€‚è¿™ç”šè‡³å¯ä»¥åŒæ—¶è¿æ¥å¤šä¸ªæµè§ˆå™¨ã€‚</li>
<li>ä¸ <code>-d chrome</code> ä¸€æ ·ï¼Œæ­¤åŠŸèƒ½å¯ä»¥ä½¿ç”¨ <code>--no-web-experimental-hot-reload</code> æ ‡å¿—ä¸´æ—¶ç¦ç”¨ã€‚ä½†æ­¤ç¦ç”¨åŠŸèƒ½å°†åœ¨æœªæ¥ç‰ˆæœ¬ä¸­ç§»é™¤ï¼Œå› æ­¤ï¼Œå¦‚æœæ‚¨åœ¨å¼€å‘å·¥ä½œæµç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·ä½¿ç”¨ Dart çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdart-lang%2Fsdk%2Fissues%2Fnew%3Ftemplate%3D5_web_hot_reload.yml" target="_blank" title="https://github.com/dart-lang/sdk/issues/new?template=5_web_hot_reload.yml" ref="nofollow noopener noreferrer">web çƒ­é‡è½½é—®é¢˜æ¨¡æ¿</a> æäº¤ Bugã€‚</li>
<li>æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.dev%2Fplatform-integration%2Fweb%2Fbuilding%23hot-reload-web" target="_blank" title="https://docs.flutter.dev/platform-integration/web/building#hot-reload-web" ref="nofollow noopener noreferrer">Web ä¸Šçš„çƒ­é‡è½½æ–‡æ¡£</a>ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-5">ğŸ—ï¸ Frameworkæ›´æ–°</h2>
<p>æœ¬æ¬¡å‘å¸ƒåŒ…å«äº†Frameworkä¸­çš„è®¸å¤šå¼ºå¤§çš„æ–°åŠŸèƒ½å’Œæ”¹è¿›ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿå¯¹é«˜çº§ UIã€å¯¼èˆªå’Œå¹³å°äº¤äº’æœ‰æ›´ç²¾ç»†çš„æ§åˆ¶ã€‚</p>
<h3 data-id="heading-6">å¼ºå¤§çš„ UI æµ®å±‚æ§åˆ¶</h3>
<p>å¼€å‘è€…åœ¨ä½¿ç”¨ <strong><code>OverlayPortal</code></strong> åˆ›å»ºå¼¹å‡ºçª—å£ã€å¯¹è¯æ¡†å’Œå…¶ä»–æµ®åŠ¨ UI å…ƒç´ æ—¶ï¼Œç°åœ¨æ‹¥æœ‰æ›´å¤§çš„èƒ½åŠ›ã€‚</p>
<ul>
<li>é€šè¿‡ <code>OverlayPortal.overlayChildLayoutBuilder</code> (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F174239" target="_blank" title="https://github.com/flutter/flutter/pull/174239" ref="nofollow noopener noreferrer">#174239</a>)ï¼Œç°åœ¨å¯ä»¥åœ¨ Widget æ ‘ä¸­ä»»ä½•å‘ä¸Šçš„ <strong><code>Overlay</code></strong> ä¸­æ¸²æŸ“å­ Widgetï¼Œè¿™ä½¿å¾—æ˜¾ç¤ºåº”ç”¨èŒƒå›´çš„é€šçŸ¥æˆ–éœ€è¦è·³å‡ºå…¶çˆ¶ Widget å¸ƒå±€é™åˆ¶çš„ UI å˜å¾—æ›´å®¹æ˜“ã€‚è¿™å¯ä»¥æ›´çµæ´»åœ°æ˜¾ç¤ºå¼¹å‡ºã€å¯¹è¯æ¡†ã€é€šçŸ¥ç­‰ UI ï¼Œä¾‹å¦‚ï¼š</li>
</ul>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_OverlayPortalExampleState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">OverlayPortalExample</span>&gt; </span>{
  <span class="hljs-keyword">final</span> OverlayPortalController _controller = OverlayPortalController();
  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> Scaffold(
      appBar: AppBar(title: Text(<span class="hljs-string">'OverlayPortal'</span>)),
      body: Center(
        child: OverlayPortal.overlayChildLayoutBuilder(
          controller: _controller,
          <span class="hljs-comment">/// <span class="markdown"><span class="hljs-strong">****</span>å¯ä»¥é…ç½® root<span class="hljs-strong">****</span></span></span>
          overlayLocation: OverlayChildLocation.rootOverlay,
          child: ElevatedButton(
            onPressed: () =&gt; _controller.toggle(),
            child: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'ç‚¹æˆ‘æ˜¾ç¤ºæµ®å±‚'</span>),
          ),
          overlayChildBuilder: (context, info) {
            <span class="hljs-keyword">return</span> Material(
              elevation: <span class="hljs-number">6</span>,
              color: Colors.white,
              shape: RoundedRectangleBorder(
                borderRadius: BorderRadius.circular(<span class="hljs-number">8</span>),
              ),
              child: Container(
                padding: <span class="hljs-keyword">const</span> EdgeInsets.all(<span class="hljs-number">16</span>),
                child: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'è¿™æ˜¯ä¸€ä¸ªæµ®å±‚'</span>),
              ),
            );
          },
        ),
      ),
    );
  }
}
</code></pre>
<ul>
<li>åº•å±‚æ–¹æ³• <code>Overlay.of</code> ä¹Ÿå¾—åˆ°äº†å¢å¼ºï¼Œä½¿å…¶æ›´åŠ å¥å£®å’Œé«˜æ•ˆ (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F174315" target="_blank" title="https://github.com/flutter/flutter/pull/174315" ref="nofollow noopener noreferrer">#174315</a>)ã€‚</li>
</ul>
<h3 data-id="heading-7">ç°ä»£åŒ– Android å¯¼èˆªä½“éªŒ</h3>
<ul>
<li>ä¸ºäº†æä¾›æ›´ç°ä»£çš„ Android å¯¼èˆªä½“éªŒï¼Œ<strong>é¢„æµ‹æ€§è¿”å›æ‰‹åŠ¿è·¯ç”±è¿‡æ¸¡ (predictive back route transitions)</strong> ç°åœ¨åœ¨ <strong><code>MaterialApp</code></strong> ä¸­<strong>é»˜è®¤å¯ç”¨</strong> (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F173860" target="_blank" title="https://github.com/flutter/flutter/pull/173860" ref="nofollow noopener noreferrer">#173860</a>)ã€‚å½“ç”¨æˆ·æ‰§è¡Œè¿”å›æ‰‹åŠ¿æ—¶ï¼Œä»–ä»¬ä¼šçœ‹åˆ°ä¸»å±å¹•çš„é¢„è§ˆï¼Œå½“å‰è·¯ç”±åˆ™éšä¹‹åŠ¨ç”»ç§»å‡ºã€‚</li>
<li>æ­¤å¤–ï¼Œé»˜è®¤çš„é¡µé¢è¿‡æ¸¡æ•ˆæœå·²ä» <a href="https://link.juejin.cn?target=https%3A%2F%2Fmain-api.flutter.dev%2Fflutter%2Fmaterial%2FFadeForwardsPageTransitionsBuilder-class.html" target="_blank" title="https://main-api.flutter.dev/flutter/material/FadeForwardsPageTransitionsBuilder-class.html" ref="nofollow noopener noreferrer">ZoomPageTransitionsBuilder</a> æ›´æ–°ä¸º <a href="https://link.juejin.cn?target=https%3A%2F%2Fmain-api.flutter.dev%2Fflutter%2Fmaterial%2FZoomPageTransitionsBuilder-class.html" target="_blank" title="https://main-api.flutter.dev/flutter/material/ZoomPageTransitionsBuilder-class.html" ref="nofollow noopener noreferrer">FadeForwardsPageTransitionsBuilder</a>ï¼Œä»¥åæ˜ åŸç”Ÿçš„è¡Œä¸ºã€‚</li>
</ul>
<h3 data-id="heading-8">æ¡Œé¢é›†æˆæ·±åŒ–</h3>
<ul>
<li>åœ¨ <strong>Windows</strong> ä¸Šï¼Œå¼€å‘è€…ç°åœ¨å¯ä»¥è®¿é—®å·²è¿æ¥æ˜¾ç¤ºå™¨çš„åˆ—è¡¨ï¼Œå¹¶æŸ¥è¯¢æ¯ä¸ªæ˜¾ç¤ºå™¨çš„è¯¦ç»†å±æ€§ï¼Œä¾‹å¦‚<strong>åˆ†è¾¨ç‡ã€åˆ·æ–°ç‡å’Œç‰©ç†å°ºå¯¸</strong> (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F164460" target="_blank" title="https://github.com/flutter/flutter/pull/164460" ref="nofollow noopener noreferrer">#164460</a>)ã€‚è¿™ä½¿å¾—åˆ›å»ºå…·æœ‰å¤æ‚çª—å£ç®¡ç†åŠŸèƒ½çš„åº”ç”¨ç¨‹åºæˆä¸ºå¯èƒ½ã€‚</li>
</ul>
<h3 data-id="heading-9">æ¡†æ¶ç¨³å®šæ€§ä¸ Web UI ä¼˜åŒ–</h3>
<ul>
<li>æ¡†æ¶æœ¬èº«ç°åœ¨æ›´å…·å¼¹æ€§ã€‚Widget ç”Ÿå‘½å‘¨æœŸå›è°ƒï¼ˆä¾‹å¦‚ <code>didUpdateWidget</code>ï¼‰ä¸­å‘ç”Ÿçš„é”™è¯¯ç°åœ¨å¾—åˆ°æ›´ä¼˜é›…çš„å¤„ç†ï¼Œé˜²æ­¢å®ƒä»¬åœ¨å…ƒç´ æ ‘ä¸­å¼•å‘è¿é”æ•…éšœ (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F173148" target="_blank" title="https://github.com/flutter/flutter/pull/173148" ref="nofollow noopener noreferrer">#173148</a>)ã€‚</li>
<li><strong><code>ResizeImage</code></strong> ç°åœ¨æ­£ç¡®åœ°å®ç°äº†ç›¸ç­‰æ€§ (equality)ï¼Œç¡®ä¿ç›¸åŒçš„ <code>ResizeImage</code> æä¾›è€…è¢«è§†ä¸ºç›¸åŒï¼Œä»è€Œä½¿å›¾åƒç¼“å­˜å’Œæ¯”è¾ƒæ›´å…·å¯é¢„æµ‹æ€§ (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F172643" target="_blank" title="https://github.com/flutter/flutter/pull/172643" ref="nofollow noopener noreferrer">#172643</a>)ã€‚</li>
<li>åœ¨ Web ä¸Šï¼ŒUI ä¼˜åŒ–ä»åœ¨ç»§ç»­ï¼š<strong><code>RSuperellipse</code></strong> çš„ä¸€ä¸ª Bug å·²ä¿®å¤ï¼Œé˜²æ­¢è§’åŠå¾„å¤§äº Widget æœ¬èº«æ—¶å‡ºç°æ¸²æŸ“é”™è¯¯ï¼›åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒå°†æŒ‰é¢„æœŸè¢«å¤„ç†ä»¥ç”Ÿæˆ<strong>è¯ä¸¸å½¢çŠ¶ (pill shape)</strong> (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F172254" target="_blank" title="https://github.com/flutter/flutter/pull/172254" ref="nofollow noopener noreferrer">#172254</a>)ã€‚</li>
</ul>
<h3 data-id="heading-10">å›½é™…åŒ–æ”¯æŒå¢å¼º</h3>
<ul>
<li>æ£€æµ‹æµè§ˆå™¨é¦–é€‰åŒºåŸŸè®¾ç½® (locale) çš„åŠŸèƒ½ç°åœ¨æ›´å¯é ã€‚å¼•æ“ç°åœ¨ä½¿ç”¨æ ‡å‡†çš„ <strong><code>Intl.Locale</code> Web API</strong> æ¥è§£ææµè§ˆå™¨è¯­è¨€ï¼Œå–ä»£äº†å…ˆå‰æ‰‹åŠ¨ä¸”æ›´è„†å¼±çš„å®ç° (#172964)ã€‚è¿™ä¸€å˜åŒ–ä¸ºå…¨çƒç”¨æˆ·å¸¦æ¥äº†æ›´å¯é çš„åŒºåŸŸè®¾ç½®æ£€æµ‹å’Œæ›´å¥½çš„ä½“éªŒã€‚</li>
</ul>
<h3 data-id="heading-11">Android ç‰¹å®š Bug ä¿®å¤</h3>
<ul>
<li>ä¸€ä¸ªä¸»è¦å½±å“å¸¦æœ‰ç¡¬ä»¶é”®ç›˜çš„ <strong>Samsung è®¾å¤‡</strong>çš„ Android ç‰¹å®š Bug (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F171973" target="_blank" title="https://github.com/flutter/flutter/pull/171973" ref="nofollow noopener noreferrer">#171973</a>) å·²è§£å†³ã€‚
<ul>
<li>æ­¤å‰ï¼Œç”¨æˆ·ä¸ <code>TextField</code> äº¤äº’åï¼ŒAndroid è¾“å…¥æ³•ç¼–è¾‘å™¨ (IME) å¯èƒ½ä¼šé™·å…¥é™ˆæ—§çŠ¶æ€ã€‚è¿™å¯¼è‡´ IME é”™è¯¯åœ°æ‹¦æˆª â€œEnterâ€ æˆ– â€œSpaceâ€ é”®ï¼Œé˜»æ­¢éæ–‡æœ¬ Widgetï¼ˆå¦‚ <code>Checkbox</code> æˆ– <code>Radio</code> æŒ‰é’®ï¼‰æ¥æ”¶äº‹ä»¶ã€‚</li>
<li>ä¿®å¤ç¡®ä¿åœ¨æ–‡æœ¬è¿æ¥å…³é—­æ—¶ï¼Œ<strong><code>InputMethodManager</code></strong> æ­£ç¡®é‡ç½®ï¼Œæ¸…é™¤ IME çš„é™ˆæ—§çŠ¶æ€ï¼Œå¹¶æ¢å¤ç”¨æˆ·å¯é¢„æµ‹çš„ç¡¬ä»¶é”®ç›˜äº¤äº’ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-12">ğŸ¨ Material å’Œ Cupertino æ›´æ–°</h2>
<p>Material å’Œ Cupertino åº“æŒç»­å‘å±•ï¼Œä¾§é‡äº API ä¸€è‡´æ€§å’Œä¼˜åŒ–çš„ç”¨æˆ·ä½“éªŒã€‚æœ¬æ¬¡å‘å¸ƒå¸¦æ¥äº†é‡å¤§çš„ API è¿ç§»ã€æ–°çš„ Widget åŠŸèƒ½å’Œä¼—å¤šæ”¹è¿›ï¼Œä½¿æ„å»ºç¾è§‚ã€å®ç”¨çš„ UI æ›´åŠ ç®€å•ã€‚</p>
<h3 data-id="heading-13"><code>WidgetState</code> è¿ç§»</h3>
<ul>
<li>åœ¨å¼ƒç”¨ <code>MaterialState</code> çš„åŸºç¡€ä¸Šï¼Œæœ¬æ¬¡å‘å¸ƒç»§ç»­å‘æ›´ç»Ÿä¸€çš„ <strong><code>WidgetState</code></strong> è¿›è¡Œå†…éƒ¨è¿ç§»ã€‚</li>
<li>è¿™æä¾›äº†ä¸€ç§ä¸€è‡´ã€å¯Œæœ‰è¡¨ç°åŠ›çš„æ–¹å¼æ¥å®šä¹‰ Widget åœ¨ä¸åŒäº¤äº’çŠ¶æ€ï¼ˆä¾‹å¦‚ï¼šæŒ‰ä¸‹ã€æ‚¬åœæˆ–ç¦ç”¨ï¼‰ä¸‹çš„å¤–è§‚ï¼Œå¯¹ç°æœ‰åº”ç”¨ç¨‹åº<strong>æ— éœ€æ›´æ”¹</strong>ã€‚</li>
<li>æ­¤è¿ç§»å·²åº”ç”¨äºå„ç§ Widget åŠå…¶ä¸»é¢˜ï¼ŒåŒ…æ‹¬ <code>IconButton</code>ã€<code>ElevatedButton</code>ã€<code>Checkbox</code> å’Œ <code>Switch</code> (#173893)ã€‚</li>
<li>æ–°çš„ API è¿˜å¢åŠ äº†åŠŸèƒ½å’Œçµæ´»æ€§ï¼›ä¾‹å¦‚ï¼Œ<code>IconButton</code> ç°åœ¨åŒ…å«ä¸€ä¸ª <strong><code>statesController</code></strong> å±æ€§ (#169821)ï¼Œå…è®¸é€šè¿‡ç¼–ç¨‹æ–¹å¼æ§åˆ¶å…¶è§†è§‰çŠ¶æ€ï¼Œä¸ºæ›´è‡ªå®šä¹‰å’Œäº¤äº’å¼çš„è®¾è®¡æ‰“å¼€äº†å¤§é—¨ã€‚</li>
</ul>
<h3 data-id="heading-14">æ–°åŠŸèƒ½å’Œä¾¿æ· API</h3>
<ul>
<li><strong><code>Badge.count</code></strong> æ„é€ å‡½æ•°ç°åœ¨åŒ…å«ä¸€ä¸ª <strong><code>maxCount</code></strong> å‚æ•° (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F171054" target="_blank" title="https://github.com/flutter/flutter/pull/171054" ref="nofollow noopener noreferrer">#171054</a>)ï¼Œå¯ä»¥è½»æ¾é™åˆ¶æ˜¾ç¤ºè®¡æ•°ï¼ˆä¾‹å¦‚ï¼Œæ˜¾ç¤º â€œ99+â€ è€Œä¸æ˜¯ â€œ100â€ï¼‰ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28bf755e0f414bdf9f11612cfc115acf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmFydmFuTW8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763686722&amp;x-signature=ufG%2FNaMxdlCl%2BLYsnjl5uA85IDs%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-15">ğŸ‘† æ‰‹åŠ¿æ§åˆ¶ä¸å¹³å°ä¼˜åŒ–</h2>
<hr/>
<h3 data-id="heading-16">Material å’Œ Cupertino ç»„ä»¶æ”¹è¿›</h3>
<ul>
<li>ä¸ºäº†æ›´ç²¾ç»†çš„<strong>æ‰‹åŠ¿æ§åˆ¶</strong>ï¼Œ<code>InkWell</code> Widget ç°åœ¨æ–°å¢äº†ä¸€ä¸ª <strong><code>onLongPressUp</code></strong> å›è°ƒ (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F173221" target="_blank" title="https://github.com/flutter/flutter/pull/173221" ref="nofollow noopener noreferrer">#173221</a>)ï¼Œè¿™å¯¹äºè§¦å‘ä»…åœ¨ç”¨æˆ·æŠ¬èµ·æ‰‹æŒ‡æ—¶æ‰å®Œæˆçš„åŠ¨ä½œéå¸¸æœ‰ç”¨ã€‚</li>
<li><strong>Cupertino åº“</strong>ç»§ç»­è‡´åŠ›äºæé«˜ iOS çš„ä¿çœŸåº¦ï¼š
<ul>
<li><code>CupertinoSlidingSegmentedControl</code> å¢åŠ äº†ä¸€ä¸ª <strong><code>isMomentary</code></strong> å±æ€§ (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F164262" target="_blank" title="https://github.com/flutter/flutter/pull/164262" ref="nofollow noopener noreferrer">#164262</a>)ï¼Œå…è®¸æ§ä»¶è§¦å‘åŠ¨ä½œè€Œæ— éœ€æŒä¹…ä¿æŒé€‰æ‹©çŠ¶æ€ã€‚</li>
<li>ä¸ºäº†æ›´å¥½åœ°åŒ¹é…åŸç”Ÿ iOS è¡Œä¸ºï¼Œ<code>CupertinoSheet</code> åœ¨å®Œå…¨å±•å¼€æ—¶å‘ä¸Šæ‹–åŠ¨æ—¶ï¼Œç°åœ¨å…·æœ‰ä¸€ä¸ªå¾®å¦™çš„ <strong>â€œæ‹‰ä¼¸â€æ•ˆæœ (subtle â€œstretchâ€ effect)</strong> (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F168547" target="_blank" title="https://github.com/flutter/flutter/pull/168547" ref="nofollow noopener noreferrer">#168547</a>)ã€‚</li>
</ul>
</li>
<li>æ ¸å¿ƒç»„ä»¶çš„è¡Œä¸ºä¹Ÿå¾—åˆ°äº†å®Œå–„ï¼š
<ul>
<li>ä¿®å¤äº† <code>DropdownMenuFormField</code>ï¼Œä½¿å…¶åœ¨è¡¨å•é‡ç½®æ—¶èƒ½æ­£ç¡®æ¸…ç©ºå…¶æ–‡æœ¬å­—æ®µ (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F174937" target="_blank" title="https://github.com/flutter/flutter/pull/174937" ref="nofollow noopener noreferrer">#174937</a>)ã€‚</li>
<li>å¯¹ <code>SegmentedButton</code> è¿›è¡Œäº†æ›´æ–°ï¼Œä»¥æ”¹è¿›ç„¦ç‚¹å¤„ç† (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F173953" target="_blank" title="https://github.com/flutter/flutter/pull/173953" ref="nofollow noopener noreferrer">#173953</a>) å¹¶ç¡®ä¿å…¶è¾¹æ¡†æ­£ç¡®åæ˜  Widget çš„çŠ¶æ€ (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F172754" target="_blank" title="https://github.com/flutter/flutter/pull/172754" ref="nofollow noopener noreferrer">#172754</a>)ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-17">ğŸ”— Material ä¸ Cupertino è§£è€¦ï¼ˆDecouplingï¼‰è§„åˆ’</h2>
<p>æˆ‘ä»¬ä¸€ç›´åœ¨è§„åˆ’å°† <strong>Material å’Œ Cupertino åº“ä»æ¡†æ¶ä¸­è§£è€¦</strong>ã€‚ä»¥ä¸‹æ˜¯å…³äºæœ€è¿‘å‘å¸ƒçš„è®¾è®¡æ–‡æ¡£çš„ä¸€äº›è®¨è®ºï¼š</p>






























<table><thead><tr><th align="left">ä¸»é¢˜</th><th align="left">çŠ¶æ€</th><th align="left">è¯¦æƒ…</th></tr></thead><tbody><tr><td align="left">æ”¹è¿› <code>flutter/packages</code> çš„å‘å¸ƒæµç¨‹ (åŒ…å«è§£è€¦åçš„ Material å’Œ Cupertino)</td><td align="left"><strong>å·²å†³å®š</strong></td><td align="left"><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.google.com%2Fdocument%2Fu%2F1%2Fd%2F18kjoP-4LAXEllugVOQRg6vZELyD6MuxlKilLD4lFxSY%2Fedit" target="_blank" title="https://docs.google.com/document/u/1/d/18kjoP-4LAXEllugVOQRg6vZELyD6MuxlKilLD4lFxSY/edit" ref="nofollow noopener noreferrer">First-Party Package Release Strategy</a> <br/> <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.google.com%2Fdocument%2Fd%2F1jUoFaawutbYsCI5oY3pDP_l-xpv6FhDKlcI1-EoT02s%2Fedit%3Ftab%3Dt.0" target="_blank" title="https://docs.google.com/document/d/1jUoFaawutbYsCI5oY3pDP_l-xpv6FhDKlcI1-EoT02s/edit?tab=t.0" ref="nofollow noopener noreferrer">Batch Release One Pager (PUBLICLY SHARED)</a></td></tr><tr><td align="left">é¢œè‰²å’Œç‚¹é€Ÿè®° (<code>Colors</code> and dot shorthands)</td><td align="left"><strong>å·²å†³å®š</strong></td><td align="left"><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.google.com%2Fdocument%2Fd%2F1y38TN9AUTyd0eTbu4kx4FiNgfsLDPvWvi92Fv5HWFjQ%2Fedit%3Ftab%3Dt.0%23heading%3Dh.pub7jnop54q0" target="_blank" title="https://docs.google.com/document/d/1y38TN9AUTyd0eTbu4kx4FiNgfsLDPvWvi92Fv5HWFjQ/edit?tab=t.0#heading=h.pub7jnop54q0" ref="nofollow noopener noreferrer">A Basic Color Set for Flutter (PUBLICLY SHARED)</a></td></tr><tr><td align="left">è§£è€¦æµ‹è¯• (Decoupling tests)</td><td align="left"><strong>è¿›è¡Œä¸­</strong></td><td align="left"><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.google.com%2Fdocument%2Fd%2F1UHxALQqCbmgjnM1RNV9xE2pK3IGyx-UktGX1D7hYCjs%2Fedit%3Ftab%3Dt.0" target="_blank" title="https://docs.google.com/document/d/1UHxALQqCbmgjnM1RNV9xE2pK3IGyx-UktGX1D7hYCjs/edit?tab=t.0" ref="nofollow noopener noreferrer">Decoupling Framework Tests (PUBLICLY SHARED)</a> <br/> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fissues%2F177028" target="_blank" title="https://github.com/flutter/flutter/issues/177028" ref="nofollow noopener noreferrer">Issue #177028</a></td></tr><tr><td align="left">æ–‡æœ¬ (Text)</td><td align="left"><strong>è®¨è®ºä¸­</strong></td><td align="left"><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.google.com%2Fdocument%2Fd%2F1X50eQ-T-XW4B8-P1V21fJ0z2N_8s-gE8T_t7Q4tQ5y4%2Fedit" target="_blank" title="https://docs.google.com/document/d/1X50eQ-T-XW4B8-P1V21fJ0z2N_8s-gE8T_t7Q4tQ5y4/edit" ref="nofollow noopener noreferrer">Flutter Decoupling Design From Text (PUBLICLY SHARED)</a></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-18">ğŸ“œ æ»šåŠ¨ (Scrolling): æ›´å¥å£®å’Œå¯é¢„æµ‹çš„ Slivers</h2>
<p>æœ¬æ¬¡å‘å¸ƒå¸¦æ¥äº†å¤šé¡¹ä¿®å¤ï¼Œä½¿å¾—æ„å»ºå¤æ‚çš„æ»šåŠ¨å¸ƒå±€ï¼ˆå°¤å…¶æ˜¯ä½¿ç”¨ <strong><code>SliverMainAxisGroup</code></strong> å’Œ <strong><code>SliverCrossAxisGroup</code></strong> çš„å¸ƒå±€ï¼‰æ›´åŠ <strong>å¥å£®å’Œå¯é¢„æµ‹</strong>ã€‚</p>
<ul>
<li>å¼€å‘è€…åœ¨ä½¿ç”¨è¿™äº› Widget å¯¹å¤šä¸ª Slivers è¿›è¡Œåˆ†ç»„æ—¶ï¼Œä¼šå‘ç°<strong>æ‰‹åŠ¿å¤„ç†ç°åœ¨æ›´å¯é </strong>ã€‚å¯¹è¿™äº›ç»„å†… Slivers ä¸Šçš„ç‚¹å‡»å’Œå…¶ä»–æŒ‡é’ˆäº‹ä»¶çš„å‘½ä¸­æµ‹è¯•ç°åœ¨è®¡ç®—æ­£ç¡®ï¼Œç¡®ä¿ç”¨æˆ·äº¤äº’æŒ‰é¢„æœŸè¿›è¡Œ (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F174265" target="_blank" title="https://github.com/flutter/flutter/pull/174265" ref="nofollow noopener noreferrer">#174265</a>)ã€‚</li>
<li>å…¶ä»–å‡ é¡¹ä¿®å¤æœ‰åŠ©äº <strong><code>SliverMainAxisGroup</code></strong> å†…æ›´ç²¾ç¡®çš„æ»šåŠ¨è¡Œä¸ºï¼š
<ul>
<li>è§£å†³äº†ä½¿ç”¨å›ºå®šå¤´éƒ¨ (pinned header) æ—¶çš„<strong>è¿‡åº¦æ»šåŠ¨é—®é¢˜</strong> (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F173349" target="_blank" title="https://github.com/flutter/flutter/pull/173349" ref="nofollow noopener noreferrer">#173349</a>)ã€‚</li>
<li>è°ƒç”¨ <strong><code>showOnScreen</code></strong> ä»¥æ˜¾ç¤ºä¸€ä¸ª Sliver ç°åœ¨å¯ä»¥æ­£å¸¸å·¥ä½œ (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F171339" target="_blank" title="https://github.com/flutter/flutter/pull/171339" ref="nofollow noopener noreferrer">#171339</a>)ã€‚</li>
<li>å†…éƒ¨æ»šåŠ¨åç§»é‡çš„è®¡ç®—æ›´ç²¾ç¡® (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F174369" target="_blank" title="https://github.com/flutter/flutter/pull/174369" ref="nofollow noopener noreferrer">#174369</a>)ã€‚</li>
</ul>
</li>
<li>å¯¹äºæ„å»ºè‡ªå®šä¹‰æ»šåŠ¨è§†å›¾çš„å¼€å‘è€…ï¼Œæ–°çš„ <strong><code>SliverGrid.list</code></strong> æ„é€ å‡½æ•° (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F173925" target="_blank" title="https://github.com/flutter/flutter/pull/173925" ref="nofollow noopener noreferrer">#173925</a>) æä¾›äº†ä¸€ç§ä»ç®€å•å­ Widget åˆ—è¡¨åˆ›å»ºç½‘æ ¼çš„æ›´æ¸…æ™°æ–¹æ³•ã€‚</li>
<li>æœ¬æ¬¡å‘å¸ƒè¿˜æ”¹è¿›äº†å¤æ‚å¸ƒå±€ä¸­é”®ç›˜å’Œ D-pad ç”¨æˆ·çš„<strong>ç„¦ç‚¹å¯¼èˆª</strong>ã€‚åœ¨å…·æœ‰ä¸åŒæ»šåŠ¨è½´çš„åµŒå¥—æ»šåŠ¨è§†å›¾ä¸­ï¼ˆä¾‹å¦‚å‚ç›´åˆ—è¡¨ä¸­çš„æ°´å¹³è½®æ’­å›¾ï¼‰ï¼Œå®šå‘ç„¦ç‚¹å¯¼èˆªç°åœ¨æ›´å¯é¢„æµ‹ï¼Œé˜²æ­¢ç„¦ç‚¹æ„å¤–åœ°åœ¨ä¸åŒéƒ¨åˆ†ä¹‹é—´è·³è½¬ (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F172875" target="_blank" title="https://github.com/flutter/flutter/pull/172875" ref="nofollow noopener noreferrer">#172875</a>)ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-19">â™¿ Accessibility: ä¸ºæ‰€æœ‰ç”¨æˆ·æä¾›æ›´åŒ…å®¹çš„ä½“éªŒ</h2>
<p>ä½¿åº”ç”¨ç¨‹åºå¯¹æ‰€æœ‰ç”¨æˆ·éƒ½å¯è®¿é—®æ˜¯ Flutter æ¡†æ¶çš„åŸºçŸ³ã€‚æœ¬æ¬¡å‘å¸ƒé€šè¿‡æä¾›æ›´å¤šçš„<strong>ç¼–ç¨‹æ§åˆ¶</strong>ã€<strong>æ”¹å–„å›½é™…ç”¨æˆ·çš„ä½“éªŒ</strong>ä»¥åŠ<strong>ä¼˜åŒ–æ ¸å¿ƒ Widget çš„è¾…åŠ©åŠŸèƒ½</strong>ï¼Œç»§ç»­å±¥è¡Œè¿™ä¸€æ‰¿è¯ºã€‚</p>
<ul>
<li>å¯¹äºæ„å»ºå¤æ‚åº”ç”¨çš„å¼€å‘è€…ï¼Œæœ¬æ¬¡å‘å¸ƒå¼•å…¥äº†é€šè¿‡ä½¿ç”¨ <strong><code>WidgetsFlutterBinding.instance.ensureSemantics</code></strong> æ¥<strong>åœ¨ iOS ä¸Šé»˜è®¤å¼€å¯è¾…åŠ©åŠŸèƒ½</strong>çš„èƒ½åŠ› (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F174163" target="_blank" title="https://github.com/flutter/flutter/pull/174163" ref="nofollow noopener noreferrer">#174163</a>)ã€‚</li>
<li>è°ƒè¯•è¾…åŠ©åŠŸèƒ½é—®é¢˜ç°åœ¨æ›´å®¹æ˜“äº†ï¼Œå› ä¸º <strong><code>debugDumpSemanticsTree</code></strong> åŒ…å«äº†é¢å¤–çš„<strong>æ–‡æœ¬è¾“å…¥éªŒè¯ç»“æœä¿¡æ¯</strong>ï¼Œæœ‰åŠ©äºæ›´å¿«åœ°è¯Šæ–­é—®é¢˜ (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F174677" target="_blank" title="https://github.com/flutter/flutter/pull/174677" ref="nofollow noopener noreferrer">#174677</a>)ã€‚</li>
<li>å¯¹äºåŸºäº Sliver çš„æ»šåŠ¨è§†å›¾ä¸­çš„é«˜çº§è¾…åŠ©åŠŸèƒ½ï¼Œç°åœ¨å¯ä»¥ä½¿ç”¨æ–°çš„ <strong><code>SliverSemantics</code></strong> Widget (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F167300" target="_blank" title="https://github.com/flutter/flutter/pull/167300" ref="nofollow noopener noreferrer">#167300</a>)ã€‚
<ul>
<li>å°±åƒç°æœ‰çš„ <code>Semantics</code> Widget ä¸€æ ·ï¼Œå¼€å‘è€…å¯ä»¥åœ¨ <code>CustomScrollView</code> ä¸­ä½¿ç”¨ <code>SliverSemantics</code> æ¥ç”¨ç‰¹å®šçš„è¯­ä¹‰ä¿¡æ¯<strong>æ³¨è§£ (annotate)</strong> Sliver æ ‘çš„ä¸€éƒ¨åˆ†ã€‚</li>
<li>è¿™å¯¹äºä¸ºå±å¹•é˜…è¯»å™¨æ³¨è§£å¤´éƒ¨ã€åˆ†é…è¯­ä¹‰è§’è‰²å’Œæ·»åŠ æè¿°æ€§æ ‡ç­¾ç‰¹åˆ«æœ‰ç”¨ï¼Œä¸ºç”¨æˆ·æä¾›æ›´æ˜“ç†è§£å’Œå¯è®¿é—®çš„ä½“éªŒã€‚</li>
</ul>
</li>
<li>æ ¸å¿ƒ Widget çš„è¾…åŠ©åŠŸèƒ½ä¹Ÿåœ¨ç»§ç»­å®Œå–„ï¼š
<ul>
<li><strong><code>CupertinoExpansionTile</code></strong> ç°åœ¨<strong>é»˜è®¤å¯è®¿é—®</strong> (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F174480" target="_blank" title="https://github.com/flutter/flutter/pull/174480" ref="nofollow noopener noreferrer">#174480</a>)ã€‚</li>
<li><strong><code>AutoComplete</code></strong> Widget ç°åœ¨ä¼šå‘ç”¨æˆ·<strong>å®£å¸ƒæœç´¢ç»“æœçš„çŠ¶æ€</strong> (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F173480" target="_blank" title="https://github.com/flutter/flutter/pull/173480" ref="nofollow noopener noreferrer">#173480</a>)ã€‚</li>
<li>å…¶ä»–æ”¹è¿›ï¼Œä¾‹å¦‚ <strong><code>TimePicker</code></strong> ä¸­æ›´å¤§çš„è§¦æ‘¸ç›®æ ‡ (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F170060" target="_blank" title="https://github.com/flutter/flutter/pull/170060" ref="nofollow noopener noreferrer">#170060</a>)ï¼Œæœ‰åŠ©äºæä¾›æ›´æ˜“äºè®¿é—®çš„å¼€ç®±å³ç”¨ä½“éªŒã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-20">ğŸ iOS å¹³å°æ”¯æŒä¸è¿ç§»</h2>
<h3 data-id="heading-21">å¹³å°æ”¯æŒ</h3>
<p>æˆ‘ä»¬å¾ˆé«˜å…´åœ°ç¡®è®¤ Flutter <strong>å®Œå…¨æ”¯æŒæœ€æ–°çš„å¹³å°ç‰ˆæœ¬</strong>ï¼š<strong>iOS 26ã€Xcode 26 å’Œ macOS 26</strong>ï¼ˆå‡äº 9 æœˆå‘å¸ƒï¼‰ã€‚è¿™ç¡®ä¿æ‚¨å¯ä»¥ç«‹å³åœ¨ Apple æœ€æ–°çš„æ“ä½œç³»ç»Ÿå’Œå·¥å…·é“¾ä¸Šå¼€å§‹å¼€å‘å’Œæµ‹è¯•æ‚¨çš„åº”ç”¨ã€‚</p>
<h3 data-id="heading-22">éƒ¨ç½²æµç¨‹æ”¹è¿›</h3>
<p>æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼ŒFlutter åœ¨ä¸Šä¸€ä¸ªç‰ˆæœ¬ä¸­ä¸º iOS å¼€å‘è€…å¸¦æ¥äº†é‡å¤§çš„<strong>ç”Ÿæ´»è´¨é‡æ”¹è¿› (quality-of-life improvement)</strong>ï¼Œè§£å†³äº†é•¿æœŸå›°æ‰°ç”¨æˆ·çš„ä¸€ä¸ªé—®é¢˜ï¼šä½¿ç”¨ <code>flutter run</code> åœ¨çœŸæœºä¸Šè¿è¡Œ Flutter åº”ç”¨æ—¶ï¼Œè¦æ±‚ Xcode åº”ç”¨ç¨‹åº<strong>è‡ªåŠ¨å¯åŠ¨</strong>ã€‚</p>
<ul>
<li>æˆ‘ä»¬å¼•å…¥äº†ä¸€ç§æ–°çš„éƒ¨ç½²æ–¹æ³•ï¼Œä½¿ç”¨ <strong>Xcode 26 å‘½ä»¤è¡Œå·¥å…· <code>devicectl</code></strong> è¿›è¡Œåº”ç”¨ç¨‹åºå®‰è£…ã€å¯åŠ¨å’Œè°ƒè¯•ã€‚</li>
<li>è¿™ä¸€è½¬å˜<strong>æ¶ˆé™¤äº†åœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­è°ƒç”¨ Xcode åº”ç”¨ç¨‹åºçš„éœ€è¦</strong>ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä»…ä¾èµ–äºå‘½ä»¤è¡Œ Xcode æ„å»ºå·¥å…·ã€‚</li>
<li>æ­¤å‰ï¼Œæ­¤åŠŸèƒ½ä¾èµ–äº Xcode è‡ªåŠ¨åŒ–ï¼Œä½†åœ¨ Xcode 26 ä¸Šå˜å¾—ä¸ç¨³å®šå’Œä¸å¯é ï¼Œå°¤å…¶æ˜¯åœ¨è¿ç»­æ‰§è¡Œå‘½ä»¤æ—¶ã€‚å¦‚æœæ‚¨ç°åœ¨æ­£åœ¨ä¸ºæœ€æ–°çš„ Apple ç‰ˆæœ¬è¿›è¡Œå¼€å‘ï¼Œæˆ‘ä»¬<strong>å¼ºçƒˆå»ºè®®</strong>æ‚¨å°† Flutter æ›´æ–°åˆ° <strong>3.38 æˆ–æ›´é«˜ç‰ˆæœ¬</strong>ã€‚</li>
<li>å¦‚æœæ‚¨é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ <code>flutter config --no-enable-lldb-debugging</code> ç¦ç”¨æ­¤éƒ¨ç½²æ–¹æ³•ï¼Œå¹¶<strong>æäº¤é—®é¢˜</strong>è®©æˆ‘ä»¬çŸ¥é“ï¼</li>
</ul>
<h3 data-id="heading-23"><code>UIScene</code> ç”Ÿå‘½å‘¨æœŸè¿ç§»</h3>
<p>Flutter 3.38 åŒ…å«äº†å¯¹ Apple å¼ºåˆ¶è¦æ±‚çš„ <strong><code>UIScene</code> ç”Ÿå‘½å‘¨æœŸ</strong>çš„å…³é”®æ”¯æŒã€‚</p>
<ul>
<li>è¿™æ˜¯ç»§ Apple åœ¨ WWDC25 ä¸Šå®£å¸ƒ**â€œåœ¨ iOS 26 ä¹‹åçš„ç‰ˆæœ¬ä¸­ï¼Œä»»ä½•ä½¿ç”¨æœ€æ–° SDK æ„å»ºçš„ UIKit åº”ç”¨éƒ½å°†è¢«è¦æ±‚ä½¿ç”¨ <code>UIScene</code> ç”Ÿå‘½å‘¨æœŸï¼Œå¦åˆ™å°†æ— æ³•å¯åŠ¨â€**ä¹‹åï¼Œä¸€é¡¹å…³é”®çš„ã€<strong>å‰ç»æ€§çš„æ›´æ–°</strong>ã€‚</li>
<li>ä¸ºäº†ç¡®ä¿æ‚¨çš„ iOS Flutter åº”ç”¨ç¨‹åºåœ¨æœªæ¥çš„ iOS ç‰ˆæœ¬ä¸Šä¿æŒå…¼å®¹å¹¶æˆåŠŸå¯åŠ¨ï¼Œ<strong>éœ€è¦è¿›è¡Œè¿ç§»</strong>ã€‚</li>
</ul>
<h3 data-id="heading-24">ğŸ“± è¿ç§» Flutter åº”ç”¨</h3>
<p>æ‰€æœ‰ç°æœ‰çš„ iOS Flutter åº”ç”¨éƒ½å¿…é¡»è¿ç§»åˆ°æ–°çš„ç”Ÿå‘½å‘¨æœŸã€‚æ‚¨æœ‰ä¸¤ç§é€”å¾„å®Œæˆæ­¤è¿ç§»ï¼š</p>
<ol>
<li><strong>æ‰‹åŠ¨è¿ç§»ï¼š</strong> éµå¾ª Flutter ç½‘ç«™ä¸Šæä¾›çš„<strong>æ‰‹åŠ¨è¿ç§»è¯´æ˜</strong>ã€‚</li>
<li><strong>è‡ªåŠ¨è¿ç§»ï¼ˆå®éªŒæ€§ï¼‰ï¼š</strong> å¯ç”¨ä¸€ä¸ªå®éªŒæ€§åŠŸèƒ½æ¥è‡ªåŠ¨å¤„ç†è¿ç§»ã€‚æ­¤åŠŸèƒ½å°†åœ¨æœªæ¥ç‰ˆæœ¬ä¸­é»˜è®¤å¯ç”¨ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
flutter config --enable-ios-scene-lifecycle-migration</li>
</ol>
<h3 data-id="heading-25">è¿ç§» Flutter æ’ä»¶</h3>
<p>ä¾èµ–äº<strong>åº”ç”¨ç”Ÿå‘½å‘¨æœŸäº‹ä»¶</strong>çš„ Flutter æ’ä»¶<strong>å¿…é¡»</strong>æ›´æ–°ä»¥ä½¿ç”¨ <code>UIScene</code> ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ã€‚æ’ä»¶å¼€å‘è€…åº”å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.dev%2Frelease%2Fbreaking-changes%2Fuiscenedelegate%23migration-guide-for-flutter-plugins" target="_blank" title="https://docs.flutter.dev/release/breaking-changes/uiscenedelegate#migration-guide-for-flutter-plugins" ref="nofollow noopener noreferrer">è¿ç§»æŒ‡å—</a>ã€‚å°šæœªè¿ç§»çš„æ’ä»¶å°†åœ¨æœªæ¥ç‰ˆæœ¬ä¸­æ˜¾ç¤ºè­¦å‘Šã€‚</p>
<h3 data-id="heading-26">è¿ç§»åµŒå…¥å¼ Flutter (å¯é€‰)</h3>
<p>å¯¹äºå°† Flutter åµŒå…¥åˆ°åŸç”Ÿå®¿ä¸»åº”ç”¨ç¨‹åºçš„é¡¹ç›®ï¼Œè¿ç§»æ˜¯<strong>å¯é€‰ä½†å¼ºçƒˆæ¨è</strong>çš„ã€‚é‡‡ç”¨ Flutter æ–°çš„ <code>UIScene</code> APIï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.dev%2Frelease%2Fbreaking-changes%2Fuiscenedelegate%23migration-guide-for-adding-flutter-to-existing-app-add-to-app" target="_blank" title="https://docs.flutter.dev/release/breaking-changes/uiscenedelegate#migration-guide-for-adding-flutter-to-existing-app-add-to-app" ref="nofollow noopener noreferrer">ä½¿ç”¨æ·»åŠ åˆ°åº”ç”¨è¿ç§»æŒ‡å—</a>ï¼‰å¯ä¸ºæ‚¨çš„æ’ä»¶å¯ç”¨åœºæ™¯ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼Œç¡®ä¿ä¸ Flutter ç”Ÿæ€ç³»ç»Ÿçš„å…¼å®¹æ€§ã€‚</p>
<hr/>
<h2 data-id="heading-27">ğŸ¤– Android å¹³å°æ›´æ–°</h2>
<hr/>
<h3 data-id="heading-28">16KB é¡µé¢å¤§å°å…¼å®¹æ€§</h3>
<p>å‡çº§åˆ° Flutter 3.38 æ˜¯ä¸º <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fguide%2Fpractices%2Fpage-sizes" target="_blank" title="https://developer.android.com/guide/practices/page-sizes" ref="nofollow noopener noreferrer">Google Play 16 KB é¡µé¢å¤§å°å…¼å®¹æ€§è¦æ±‚</a>åšå‡†å¤‡çš„å…³é”®æ­¥éª¤ã€‚</p>
<ul>
<li>ä» <strong>2025 å¹´ 11 æœˆ 1 æ—¥</strong>èµ·ï¼Œé¢å‘ Android 15 åŠæ›´é«˜ç‰ˆæœ¬çš„åº”ç”¨å¿…é¡»æ”¯æŒ 16 KB é¡µé¢ã€‚</li>
<li>è¿™ä¸€å˜åŒ–ç¡®ä¿æ‚¨çš„åº”ç”¨åœ¨é«˜å†…å­˜è®¾å¤‡ä¸Šæ­£ç¡®è¿è¡Œï¼Œå¹¶æä¾›é«˜è¾¾ <strong>30% æ›´å¿«çš„å¯åŠ¨é€Ÿåº¦</strong>ç­‰æ€§èƒ½ä¼˜åŠ¿ã€‚</li>
<li>Flutter 3.38 å°†é»˜è®¤çš„ Android <code>ndkVersion</code> æ›´æ–°ä¸º <strong>NDK r28</strong>ï¼Œè¿™æ˜¯åŸç”Ÿä»£ç å®ç° 16 KB æ”¯æŒæ‰€éœ€æ­£ç¡®å¯¹é½çš„<strong>æœ€ä½è¦æ±‚</strong>ã€‚</li>
</ul>
<h3 data-id="heading-29">å†…å­˜æ³„æ¼ä¿®å¤</h3>
<p>Flutter 3.38 <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fissues%2F173770" target="_blank" title="https://github.com/flutter/flutter/issues/173770" ref="nofollow noopener noreferrer">ä¿®å¤</a>äº†ä¸€ä¸ªå½±å“æ‰€æœ‰ Android ä¸Šçš„ Flutter åº”ç”¨çš„<strong>é‡è¦å†…å­˜æ³„æ¼é—®é¢˜</strong>ã€‚æ­¤é—®é¢˜ï¼ˆåœ¨ 3.29.0 ä¸­å¼•å…¥ï¼‰å‘ç”Ÿåœ¨ <strong>Activities å› å¼€å‘è€…è®¾ç½®æˆ–ç³»ç»Ÿä½å†…å­˜è€Œè¢«é”€æ¯æ—¶</strong>ã€‚</p>
<h3 data-id="heading-30">Android ä¾èµ–é¡¹æ›´æ–°</h3>
<p>ç¡®å®šé€‚ç”¨äºæ‚¨çš„åº”ç”¨çš„ Android ä¾èµ–é¡¹ï¼ˆåŒ…æ‹¬ Gradleã€Android Gradle Plugin (AGP)ã€Kotlin Gradle Plugin (KGP)ã€Java ç­‰ï¼‰çš„æ­£ç¡®ç‰ˆæœ¬ç»„åˆé€šå¸¸æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚å¯¹äº Flutter 3.38 ç‰ˆæœ¬ï¼Œæˆ‘ä»¬åœ¨æŒç»­é›†æˆ (CI) ç¯å¢ƒä¸­æµ‹è¯•å¹¶ç¡®è®¤äº†ä¸ä»¥ä¸‹ Android ä¾èµ–é¡¹çš„å…¼å®¹æ€§ï¼š</p>
<ul>
<li><strong>Java 17ï¼š</strong> Flutter 3.38 ä¸­è¿›è¡Œ Android å¼€å‘æ‰€éœ€çš„<strong>æœ€ä½ç‰ˆæœ¬</strong>ã€‚</li>
<li><strong>KGP 2.2.20ï¼š</strong> å·¥å…·é“¾<strong>å·²çŸ¥å’Œæ”¯æŒçš„æœ€å¤§</strong> Kotlin Gradle Plugin ç‰ˆæœ¬ã€‚</li>
<li><strong>AGP 8.11.1ï¼š</strong> ä¸ KGP 2.2.20 <strong>å…¼å®¹çš„æœ€æ–°</strong> Android Gradle Plugin ç‰ˆæœ¬ã€‚</li>
<li><strong>Gradle 8.14ï¼š</strong> æ­¤ç‰ˆæœ¬é€‚ç”¨äºæ‰€é€‰çš„ Javaã€KGP å’Œ AGP ç‰ˆæœ¬ã€‚è¯·æ³¨æ„ï¼ŒGradle <strong>8.13</strong> æ˜¯ AGP 8.11.1 æ‰€éœ€çš„<strong>æœ€ä½ç‰ˆæœ¬</strong>ã€‚</li>
</ul>
<p>ä¸ºç¡®ä¿æ‚¨çš„åº”ç”¨åœ¨ Flutter ç‰ˆæœ¬ä¹‹é—´æ— ç¼è¿‡æ¸¡ï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®æ‚¨åœ¨æ„å»ºæ–‡ä»¶ä¸­ä½¿ç”¨ Flutter SDK æä¾›çš„ API çº§åˆ«å˜é‡ã€‚æ­¤ç‰ˆæœ¬çš„é…ç½®å€¼ä¸ºï¼š</p>
<ul>
<li><code>flutter.compileSdkVersion</code> (<strong>API 36</strong>)</li>
<li><code>flutter.targetSdkVersion</code> (<strong>API 36</strong>)</li>
<li><code>flutter.minSdkVersion</code> (<strong>API 24</strong>) æˆ–æ›´é«˜ç‰ˆæœ¬</li>
</ul>
<hr/>
<h2 data-id="heading-31">âš™ï¸ å¼•æ“ï¼ˆEngineï¼‰æ›´æ–°</h2>
<hr/>
<h3 data-id="heading-32">æ€§èƒ½å åŠ å±‚ (Performance overlay)</h3>
<p>æ€§èƒ½å åŠ å±‚å·²é‡æ„ä»¥æé«˜æ•ˆç‡ï¼Œ<strong>å‡å°‘äº†å…¶åœ¨ Skia å’Œ Impeller åç«¯ä¸Šçš„æ¸²æŸ“æ—¶é—´</strong> (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fissues%2F176364" target="_blank" title="https://github.com/flutter/flutter/issues/176364" ref="nofollow noopener noreferrer">#176364</a>)ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥è·å¾—æ›´å‡†ç¡®çš„æ€§èƒ½æ•°æ®ï¼Œä¸”å¼€é”€æ›´å°ã€‚</p>
<h3 data-id="heading-33">Vulkan å’Œ OpenGL ES</h3>
<p>å¯¹ <strong>Vulkan</strong> å’Œ <strong>OpenGL ES</strong> åç«¯è¿›è¡Œäº†å¤§é‡ä¿®å¤å’Œæ”¹è¿›ï¼Œæé«˜äº†åœ¨æ›´å¹¿æ³›è®¾å¤‡ä¸Šçš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚è¿™åŒ…æ‹¬æ›´å¥½åœ°å¤„ç†<strong>ç®¡çº¿ç¼“å­˜</strong> (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fissues%2F176322" target="_blank" title="https://github.com/flutter/flutter/issues/176322" ref="nofollow noopener noreferrer">#176322</a>)ã€<strong>å›´æ ç­‰å¾…å™¨</strong> (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fissues%2F173085" target="_blank" title="https://github.com/flutter/flutter/issues/173085" ref="nofollow noopener noreferrer">#173085</a>) å’Œ<strong>å›¾åƒå¸ƒå±€è½¬æ¢</strong> (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fissues%2F173884" target="_blank" title="https://github.com/flutter/flutter/issues/173884" ref="nofollow noopener noreferrer">#173884</a>)ã€‚</p>
<h3 data-id="heading-34">æ¸²æŸ“å™¨ç»Ÿä¸€</h3>
<p>ç»§ç»­åŠªåŠ›ç»Ÿä¸€ <strong>CanvasKit</strong> å’Œ <strong>Skwasm</strong> æ¸²æŸ“å™¨ã€‚æœ¬æ¬¡å‘å¸ƒåŒ…æ‹¬å¤§é‡çš„é‡æ„ï¼Œä»¥åœ¨è¿™ä¸¤è€…ä¹‹é—´<strong>å…±äº«æ›´å¤šä»£ç </strong>ï¼Œè¿™å°†æœ‰åŠ©äºæœªæ¥å¸¦æ¥æ›´ä¸€è‡´çš„ä½“éªŒå’Œæ›´å¿«çš„å¼€å‘é€Ÿåº¦ (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fissues%2F174588" target="_blank" title="https://github.com/flutter/flutter/issues/174588" ref="nofollow noopener noreferrer">#174588</a>)ã€‚</p>
<h3 data-id="heading-35">çº¿ç¨‹åˆå¹¶</h3>
<blockquote>
<p><strong>æ³¨æ„âš ï¸æ³¨æ„âš ï¸æ³¨æ„âš ï¸</strong>
ä» iOS å’Œ Android ä¸­ç§»é™¤äº†é€€å‡ºçº¿ç¨‹åˆå¹¶çš„èƒ½åŠ›**ï¼ˆå³ä¸å†æ”¯æŒå¯é€‰é€€å‡ºï¼‰ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-36">ğŸ› ï¸ DevTools å’Œ IDEs</h2>
<hr/>
<h3 data-id="heading-37">å®éªŒæ€§ Widget é¢„è§ˆ - æ›´æ–°</h3>
<p>Flutter 3.35 å¼•å…¥äº† <strong>Widget é¢„è§ˆ</strong>ï¼Œè¿™æ˜¯ä¸€é¡¹å‡†å¤‡å¥½æ¥å—ç¤¾åŒºæ—©æœŸåé¦ˆçš„å®éªŒæ€§åŠŸèƒ½ã€‚Flutter 3.38 ç‰ˆæœ¬å¸¦æ¥äº†å¯¹ Widget é¢„è§ˆçš„é‡å¤§æ”¹è¿›ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>IDE é›†æˆï¼š</strong> <strong>VSCode</strong> å’Œ <strong>IntelliJ / Android Studio</strong> æ’ä»¶éƒ½å·²æ›´æ–°ï¼Œåˆæ­¥æ”¯æŒ Widget é¢„è§ˆã€‚æ‚¨ç°åœ¨å¯ä»¥ç›´æ¥åœ¨ <strong>IDE å†…</strong>æŸ¥çœ‹é¢„è§ˆï¼Œä»¥è·å¾—æ›´æ— ç¼çš„å¼€å‘ä½“éªŒã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d728ba17e06442bb38420bcbcd48bf6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmFydmFuTW8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763686722&amp;x-signature=CNHXJHMSJzzzHiKxeU4Cu8cyyik%3D" alt="image.png" loading="lazy"/>
å½“åœ¨ IDE ä¸­ä½¿ç”¨æ—¶ï¼Œ<strong>Widget é¢„è§ˆç¯å¢ƒ</strong>é»˜è®¤é…ç½®ä¸ºæ ¹æ®<strong>å½“å‰é€‰å®šçš„æºæ–‡ä»¶</strong>æ¥è¿‡æ»¤æ˜¾ç¤ºçš„é¢„è§ˆï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3f9fbbbb8834d3ca2afe558476acfe4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmFydmFuTW8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763686722&amp;x-signature=Cxfo6TyPibXKDUOGxg29AGpuu2A%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p><strong>Widget é¢„è§ˆç¯å¢ƒä¸»é¢˜å’Œæ§åˆ¶æ”¹è¿›</strong>ï¼š Widget é¢„è§ˆç¯å¢ƒç°åœ¨æ”¯æŒæµ…è‰²å’Œæ·±è‰²æ¨¡å¼ï¼Œä»¥åŠè‡ªå®šä¹‰ IDE é…è‰²æ–¹æ¡ˆï¼Œä»¥åŒ¹é…æ‚¨çš„å¼€å‘ç¯å¢ƒã€‚Widget é¢„è§ˆç¯å¢ƒä¸­çš„æ§ä»¶ä¹Ÿå·²è°ƒæ•´ä¸ºå ç”¨æ›´å°‘çš„ç©ºé—´ï¼Œä¸ºæ¸²æŸ“é¢„è§ˆç•™å‡ºæ›´å¤šå¯ç”¨ç©ºé—´ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f07d7d59d214f9a90393a0dbcaafaec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmFydmFuTW8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763686722&amp;x-signature=QCgBsxiAD0%2FNZXQHBSnSHAbAhe8%3D" alt="image.png" loading="lazy"/></p>
</li>
<li>
<p><strong>é¢„è§ˆå¯æ‰©å±•æ€§ï¼š</strong> <strong><code>Preview</code> æ ‡æ³¨ç±»</strong>ä¸å†è¢«æ ‡è®°ä¸º <strong><code>final</code></strong>ï¼Œç°åœ¨å¯ä»¥è¢«æ‰©å±•ä»¥åˆ›å»º<strong>è‡ªå®šä¹‰ <code>Preview</code> æ ‡æ³¨</strong>ï¼Œä»è€Œå‡å°‘å¸¸è§é¢„è§ˆç±»å‹çš„æ ·æ¿ä»£ç ã€‚</p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8009e1453ad2481c98931ee35fdf0a2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmFydmFuTW8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763686722&amp;x-signature=NxQhzN9ddQLYdOeQMtPdfaQTunY%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>å¤šé‡é¢„è§ˆæ”¯æŒ (MultiPreview support):</strong> ä¸€ä¸ªæ–°çš„ <strong><code>MultiPreview</code> åŸºç±»</strong>å…è®¸æ‚¨ä»å•ä¸ªè‡ªå®šä¹‰æ ‡æ³¨ä¸­åˆ›å»º<strong>å¤šä¸ªé¢„è§ˆå˜ä½“</strong>ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67be286c177c40c9ad637261cf5775d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmFydmFuTW8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763686722&amp;x-signature=CsfEfKGAawm7Jl1EIVZCAcR%2BnxE%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>é¢„è§ˆåˆ†ç»„ï¼ˆPreview groupsï¼‰ï¼š</strong> <code>Preview</code> ç±»ä¸­æ–°å¢äº†ä¸€ä¸ª <strong><code>group</code> å‚æ•°</strong>ï¼Œå…è®¸å°†ç›¸å…³çš„é¢„è§ˆè¿›è¡Œ<strong>åˆ†ç»„</strong>ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05e5021b6af047f3ad60336207db8307~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmFydmFuTW8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763686722&amp;x-signature=aVA4U39pAy1kCgWYoADbwDhz34c%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p><strong>å‡å°‘ <code>@Preview</code> æ ‡æ³¨å‚æ•°é™åˆ¶ï¼š</strong></p>
<ul>
<li><strong>ç§æœ‰å¸¸é‡</strong>ç°åœ¨è¢«æ”¯æŒä½œä¸º <code>@Preview</code> æ ‡æ³¨çš„å‚æ•°ã€‚</li>
<li><strong>å‡½æ•°å‚æ•°</strong>ï¼ˆå¦‚ <code>wrapper</code> å’Œ <code>theme</code>ï¼‰ä»ç„¶è¦æ±‚å…·æœ‰å…¬å…±çš„ã€é™æ€å¯è®¿é—®çš„åç§°ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-38">ğŸš§ Widget é¢„è§ˆï¼ˆå®éªŒæ€§ï¼‰- æœªæ¥è®¡åˆ’ä¸åé¦ˆ</h2>
<p>Widget é¢„è§ˆä»ç„¶æ˜¯ä¸€ä¸ª<strong>å®éªŒæ€§åŠŸèƒ½</strong>ï¼Œæ‚¨çš„åé¦ˆå¯¹äºå¡‘é€ å…¶æœªæ¥è‡³å…³é‡è¦ã€‚API å’Œç”¨æˆ·ä½“éªŒå°šæœªç¨³å®šï¼Œå°†æ ¹æ®æˆ‘ä»¬ä»æ‚¨é‚£é‡Œè·å¾—çš„å­¦ä¹ è¿›è¡Œæ›´æ”¹ã€‚</p>
<p>åŸºäºæ—©æœŸçš„åé¦ˆï¼Œè®¡åˆ’è¿›è¡Œæ›´å¤šå¢å¼ºï¼Œä»¥æ”¹è¿› Widget é¢„è§ˆä½“éªŒï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>Flutter DevTools Widget Inspector æ”¯æŒï¼š</strong> Widget Inspector æ­£åœ¨æ›´æ–°ï¼Œä»¥æ”¯æŒåœ¨ Widget é¢„è§ˆç¯å¢ƒä¸­<strong>æ£€æŸ¥é¢„è§ˆ</strong>ã€‚æˆ‘ä»¬è®¡åˆ’å°† Inspector ç›´æ¥åµŒå…¥åˆ° Widget é¢„è§ˆå™¨ä¸­ï¼Œä½¿å…¶æ— è®ºåœ¨ä½•ç§å¼€å‘ç¯å¢ƒä¸­éƒ½æ˜“äºè®¿é—®ã€‚</li>
<li><strong>IDE ä¸­çš„å¤šé¡¹ç›®æ”¯æŒï¼š</strong> Widget é¢„è§ˆå™¨ç›®å‰ä»…æ”¯æŒæ˜¾ç¤ºåŒ…å«åœ¨<strong>å•ä¸ªé¡¹ç›®æˆ– Pub å·¥ä½œåŒº</strong>ä¸­çš„é¢„è§ˆã€‚æˆ‘ä»¬æ­£åœ¨ç§¯æç ”ç©¶æ”¯æŒå…·æœ‰å¤šä¸ª Flutter é¡¹ç›®çš„ IDE ä¼šè¯çš„é€‰é¡¹ï¼ˆé—®é¢˜ [#173550]ï¼‰ã€‚</li>
<li><strong>å¯åŠ¨æ€§èƒ½æ”¹è¿›ï¼š</strong> æ­£åœ¨è°ƒæŸ¥æ€§èƒ½æ”¹è¿›çš„æœºä¼šï¼Œä»¥å‡å°‘åˆå§‹å¯åŠ¨æ—¶é—´ï¼ŒåŒ…æ‹¬ï¼š
<ul>
<li>åœ¨é¦–æ¬¡è¿è¡Œå<strong>å¯åŠ¨é¢„ç¼–è¯‘çš„ Widget é¢„è§ˆç¯å¢ƒ</strong>ã€‚</li>
<li><strong>å¹¶è¡ŒåŒ–é¢„è§ˆæ£€æµ‹é€»è¾‘</strong>ï¼Œä»¥æ›´å¥½åœ°å¤„ç†å¤§å‹é¡¹ç›®ã€‚</li>
</ul>
</li>
</ul>
<p><strong>å¼€å§‹ä½¿ç”¨ï¼š</strong></p>
<ul>
<li><strong>é˜…è¯»æ–‡æ¡£ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.dev%2Ftools%2Fwidget-previewer" target="_blank" title="https://docs.flutter.dev/tools/widget-previewer" ref="nofollow noopener noreferrer">Flutter Widget Previews å…¥é—¨ (å®éªŒæ€§)</a></li>
<li><strong>æä¾›åé¦ˆï¼š</strong> åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fissues%2Fnew%2Fchoose" target="_blank" title="https://github.com/flutter/flutter/issues/new/choose" ref="nofollow noopener noreferrer">Flutter GitHub ä»“åº“</a>ä¸­æäº¤é—®é¢˜å’ŒåŠŸèƒ½è¯·æ±‚ã€‚</li>
<li><strong>äº†è§£æ›´å¤šï¼š</strong> è¦è¿›è¡ŒæŠ€æœ¯æ·±å…¥æ¢è®¨ï¼Œè¯·å‚é˜… <a href="https://link.juejin.cn?target=https%3A%2F%2Fflutter.dev%2Fgo%2Fwidget-previews-architecture" target="_blank" title="https://flutter.dev/go/widget-previews-architecture" ref="nofollow noopener noreferrer">Flutter Widget Previews æ¶æ„æ–‡æ¡£</a>ã€‚</li>
</ul>
<blockquote>
<p><strong>é‡è¦æç¤ºï¼š</strong> å­˜åœ¨ä¸€ä¸ªå·²çŸ¥é—®é¢˜ï¼Œå³åœ¨æ‰§è¡Œ <code>flutter pub get</code> åï¼ŒWidget é¢„è§ˆå™¨å¯èƒ½ä¼šå´©æºƒæˆ–åœæ­¢æ›´æ–°ã€‚å¦‚æœæ‚¨é‡åˆ°æ­¤é—®é¢˜ï¼Œè¯·åœ¨æ‚¨çš„é¡¹ç›®ä¸­è¿è¡Œ <code>flutter pub get</code> å¹¶<strong>é‡å¯æ‚¨çš„ IDE</strong>ã€‚è¯¦è§ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fissues%2F178317" target="_blank" title="https://github.com/flutter/flutter/issues/178317" ref="nofollow noopener noreferrer">#178317</a>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-39">ğŸ’» DevTools æ›´æ–°</h2>
<p>Flutter 3.38 åŒ…å«äº†å¯¹ç”¨æˆ·åœ¨ 2025 å¹´ DevTools ç”¨æˆ·è°ƒæŸ¥ä¸­æå‡ºçš„<strong>ä¸€äº›ä¸»è¦ç—›ç‚¹</strong>çš„ä¿®å¤ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>ç½‘ç»œé¢æ¿ (Network Panel) æ”¹è¿›ï¼š</strong>
<ul>
<li>ä½¿äººæ›´å®¹æ˜“ç†è§£é¢æ¿<strong>ä½•æ—¶æ­£åœ¨è®°å½•ç½‘ç»œæµé‡</strong>ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fdevtools%2Fpull%2F9495" target="_blank" title="https://github.com/flutter/devtools/pull/9495" ref="nofollow noopener noreferrer">#9495</a>)</li>
<li>ä¿®å¤äº†<strong>å¤åˆ¶ç²˜è´´ç½‘ç»œè¯·æ±‚</strong>çš„é—®é¢˜ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fdevtools%2Fpull%2F9472" target="_blank" title="https://github.com/flutter/devtools/pull/9472" ref="nofollow noopener noreferrer">#9472</a>, <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fdevtools%2Fpull%2F9482" target="_blank" title="https://github.com/flutter/devtools/pull/9482" ref="nofollow noopener noreferrer">#9482</a>, <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fdevtools%2Fpull%2F9485" target="_blank" title="https://github.com/flutter/devtools/pull/9485" ref="nofollow noopener noreferrer">#9485</a>, <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fdevtools%2Fpull%2F8588" target="_blank" title="https://github.com/flutter/devtools/pull/8588" ref="nofollow noopener noreferrer">#8588</a>)</li>
</ul>
</li>
<li><strong>Flutter Inspector ä¿®å¤ï¼š</strong>
<ul>
<li>ä¿®å¤äº†ä¸€ä¸ªé”™è¯¯ï¼Œå³é€‰æ‹©ä¸€ä¸ª Widget æœ‰æ—¶ä¼šæ‰“å¼€<strong>åº•å±‚çš„æ¡†æ¶æºä»£ç </strong>è€Œä¸æ˜¯ç”¨æˆ·çš„æºä»£ç ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fissues%2F176530" target="_blank" title="https://github.com/flutter/flutter/issues/176530" ref="nofollow noopener noreferrer">#176530</a>)</li>
<li>ä¿®å¤äº†ä¸€ä¸ªå¶å°”é˜»æ­¢ä¸ Inspector é¢æ¿<strong>é¡¶éƒ¨æŒ‰é’®äº¤äº’</strong>çš„é”™è¯¯ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fdevtools%2Fpull%2F9327" target="_blank" title="https://github.com/flutter/devtools/pull/9327" ref="nofollow noopener noreferrer">#9327</a>)</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-40">ğŸš« å¼ƒç”¨å’Œç ´åæ€§æ›´æ”¹</h2>
<p>æœ¬æ¬¡å‘å¸ƒåŒ…æ‹¬å‡ é¡¹é‡è¦çš„<strong>å¼ƒç”¨</strong>å’Œ<strong>ç ´åæ€§æ›´æ”¹</strong>ï¼Œä½œä¸ºæŒç»­ç°ä»£åŒ–å’Œæ”¹è¿› Flutter æ¡†æ¶åŠªåŠ›çš„ä¸€éƒ¨åˆ†ã€‚</p>
<ul>
<li><strong>æ„å»ºå’Œå·¥å…·é“¾å…³é”®æ›´æ”¹ï¼š</strong> å¯èƒ½ä¼šå½±å“è‡ªå®šä¹‰æ„å»ºè„šæœ¬ã€‚
<ul>
<li>Flutter SDK æ ¹ç›®å½•ä¸‹çš„ <strong><code>version</code> æ–‡ä»¶å·²è¢«ç§»é™¤</strong>ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ä½äº <code>bin/cache</code> ä¸­çš„æ–°æ–‡ä»¶ <strong><code>flutter.version.json</code></strong> (#172793)ã€‚</li>
<li>æ­¤å¤–ï¼Œ<strong><code>AssetManifest.json</code> æ–‡ä»¶ä¸å†é»˜è®¤ç”Ÿæˆ</strong> (#172594)ã€‚</li>
</ul>
</li>
<li><strong>å…¶ä»–å€¼å¾—æ³¨æ„çš„æ›´æ”¹åŒ…æ‹¬ï¼š</strong>
<ul>
<li>ä¸ºäº†æ›´å¯é¢„æµ‹çš„è¡Œä¸ºï¼ŒåŒ…å« <strong>Actionï¼ˆæ“ä½œï¼‰çš„ <code>SnackBar</code> å°†ä¸å†è‡ªåŠ¨å…³é—­</strong> (#173084)ã€‚</li>
<li><strong><code>OverlayPortal.targetsRootOverlay</code> æ„é€ å‡½æ•°å·²å¼ƒç”¨</strong>ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯æ›´çµæ´»çš„ <code>OverlayPortal(overlayLocation: OverlayChildLocation.rootOverlay)</code>ã€‚</li>
<li><code>CupertinoDynamicColor</code> ä¸Šçš„å‡ ä¸ªå±æ€§ï¼ˆä¾‹å¦‚ <code>withAlpha</code> å’Œ <code>withOpacity</code>ï¼‰ç°å·²<strong>å¼ƒç”¨</strong>ï¼Œæ¨èä½¿ç”¨æ ‡å‡†çš„ <code>Color</code> æ–¹æ³• (#171160)ã€‚</li>
<li>Flutter 3.38 è¦æ±‚ <strong>Java 17 ä½œä¸º Android çš„æœ€ä½ç‰ˆæœ¬</strong>ï¼Œä¸ <code>Gradle 8.14</code>ï¼ˆ2025 å¹´ 7 æœˆå‘å¸ƒï¼‰çš„æœ€ä½è¦æ±‚ç›¸åŒ¹é…ã€‚</li>
</ul>
</li>
</ul>
<p>æœ‰å…³è¿™äº›å’Œå…¶ä»–æ›´æ”¹çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯å’Œè¿ç§»æŒ‡å—ï¼Œè¯·æŸ¥é˜…<strong>ç ´åæ€§æ›´æ”¹é¡µé¢</strong>ã€‚</p>
<h2 data-id="heading-41">ç»“æŸè¯­</h2>
<p>Flutter 3.38 ä¸“æ³¨äºè®©æ‚¨çš„æ—¥å¸¸å¼€å‘<strong>æ›´å¿«ã€æ›´æ„‰å¿«</strong>ã€‚è¿™äº›å¢å¼ºåŠŸèƒ½æ—¨åœ¨ç®€åŒ–æ‚¨çš„æ„å»ºæ–¹å¼ã€‚æˆ‘ä»¬éå¸¸æ„Ÿè°¢ä¸ºæœ¬æ¬¡å‘å¸ƒåšå‡ºè´¡çŒ®çš„æ¯ä¸€ä½ç¤¾åŒºæˆå‘˜çš„è¾›å‹¤å·¥ä½œå’Œåé¦ˆã€‚</p>
<p>è¦è·å–æ‰€æœ‰æ›´æ”¹çš„å®Œæ•´åˆ—è¡¨ï¼Œè¯·åŠ¡å¿…æŸ¥çœ‹è¯¦ç»†çš„<strong>ç ´åæ€§æ›´æ”¹å’Œå‘å¸ƒè¯´æ˜</strong>ã€‚è¦å…è´¹æå‡æ‚¨çš„ç”Ÿäº§åŠ›ï¼Œåªéœ€è¿è¡Œ <code>flutter upgrade</code>ï¼</p>
<p>æ‚¨å·²ç»ä½¿ç”¨ä¸Šäº†flutter 3.38äº†å‘¢è¿˜æ˜¯æ‰“ç®—ç»§ç»­ç­‰ç­‰ï¼Ÿåæ­£æˆ‘å…ˆç”¨ä¸ºæ•¬ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>