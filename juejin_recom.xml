<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[Python3åŸºç¡€ï¼šåŸºç¡€å®æˆ˜å·©å›ºï¼Œä»â€œä¼šç”¨â€åˆ°â€œæ´»ç”¨â€]]></title>    <link>https://juejin.cn/post/7604093823958614035</link>    <guid>https://juejin.cn/post/7604093823958614035</guid>    <pubDate>2026-02-09T04:34:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604093823958614035" data-draft-id="7604175912480800774" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python3åŸºç¡€ï¼šåŸºç¡€å®æˆ˜å·©å›ºï¼Œä»â€œä¼šç”¨â€åˆ°â€œæ´»ç”¨â€"/> <meta itemprop="keywords" content="åç«¯,Python"/> <meta itemprop="datePublished" content="2026-02-09T04:34:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ€’æ”¾å§å¾·å¾·"/> <meta itemprop="url" content="https://juejin.cn/user/2502950820787672"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python3åŸºç¡€ï¼šåŸºç¡€å®æˆ˜å·©å›ºï¼Œä»â€œä¼šç”¨â€åˆ°â€œæ´»ç”¨â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2502950820787672/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ€’æ”¾å§å¾·å¾·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T04:34:30.000Z" title="Mon Feb 09 2026 04:34:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»23åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¬¬ä¸ƒé˜¶æ®µï¼šåŸºç¡€å®æˆ˜å·©å›ºï¼Œä»â€œä¼šç”¨â€åˆ°â€œæ´»ç”¨â€</h2>
<blockquote>
<p>ğŸ˜„ç”Ÿå‘½ä¸æ¯ï¼Œå†™ä½œä¸æ­¢</p>
<p>ğŸ”¥ ç»§ç»­è¸ä¸Šå­¦ä¹ ä¹‹è·¯ï¼Œå­¦ä¹‹åˆ†äº«ç¬”è®°</p>
<p>ğŸ‘Š æ€»æœ‰ä¸€å¤©æˆ‘ä¹Ÿèƒ½åƒå„ä½å¤§ä½¬ä¸€æ ·</p>
<p>ğŸ† <a href="https://juejin.cn/user/2502950820787672" target="_blank" title="https://juejin.cn/user/2502950820787672">åšå®¢é¦–é¡µ</a> Â Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Flyd-code%2F" target="_blank" title="https://www.cnblogs.com/lyd-code/" ref="nofollow noopener noreferrer">@æ€’æ”¾å§å¾·å¾·</a>Â Â <a href="https://link.juejin.cn?target=https%3A%2F%2Flydandtry.github.io%2F" target="_blank" title="https://lydandtry.github.io/" ref="nofollow noopener noreferrer">Toè®°å½•é¢†åœ°</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fqq_43843951%3Ftype%3Dblog" target="_blank" title="https://blog.csdn.net/qq_43843951?type=blog" ref="nofollow noopener noreferrer">@ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº</a></p>
<p>ğŸŒåˆ†äº«å­¦ä¹ å¿ƒå¾—ï¼Œæ¬¢è¿æŒ‡æ­£ï¼Œå¤§å®¶ä¸€èµ·å­¦ä¹ æˆé•¿ï¼</p>
<p>ğŸ”¥è±†åŒ…AI</p>
</blockquote>
<p><em>è½¬å‘è¯·æºå¸¦ä½œè€…ä¿¡æ¯</em>Â  <strong>@æ€’æ”¾å§å¾·å¾·(æ˜é‡‘) @ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº(CSDN)</strong></p>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>æ­å–œå¤§å®¶æˆåŠŸé€šå…³Python3åŸºç¡€å­¦ä¹ ç¬¬å…­é˜¶æ®µã€Œè¿›é˜¶åŸºç¡€ã€ï¼åœ¨ç¬¬å…­é˜¶æ®µï¼Œæˆ‘ä»¬æŒæ¡äº†æ¨¡å—ä¸åŒ…ã€æ–‡ä»¶æ“ä½œã€å¼‚å¸¸å¤„ç†ã€é¢å‘å¯¹è±¡åŸºç¡€å››å¤§æ ¸å¿ƒæŠ€èƒ½ï¼Œç»ˆäºè·³å‡ºäº†â€œå•çº¯è®°è¯­æ³•â€çš„èŒƒç•´ï¼Œå…·å¤‡äº†ç¼–å†™æ¨¡å—åŒ–ã€å¥å£®æ€§ä»£ç çš„èƒ½åŠ›ã€‚</p>
<p>è€Œç¬¬ä¸ƒé˜¶æ®µã€ŒåŸºç¡€å®æˆ˜å·©å›ºã€ï¼Œæ˜¯PythonåŸºç¡€å­¦ä¹ ä¸­â€œæ‰¿ä¸Šå¯ä¸‹â€çš„å…³é”®ä¸€ç¯â€”â€”æ ¸å¿ƒç›®æ ‡ä¸æ˜¯å­¦ä¹ æ–°çš„å¤æ‚è¯­æ³•ï¼Œè€Œæ˜¯<strong>å°†å‰å…­é˜¶æ®µçš„æ‰€æœ‰çŸ¥è¯†ç‚¹ä¸²è”èµ·æ¥ï¼Œé€šè¿‡å®æˆ˜åœºæ™¯è½åœ°åº”ç”¨</strong>ï¼Œå¸®å¤§å®¶æ‘†è„±â€œçœ‹å¾—æ‡‚ã€å†™ä¸å‡ºâ€çš„å›°å¢ƒï¼Œå·©å›ºåŸºç¡€ã€æŸ¥æ¼è¡¥ç¼ºï¼ŒåŒæ—¶æŒæ¡å¸¸ç”¨å·¥å…·ï¼ˆå†…ç½®å‡½æ•°ã€æ ‡å‡†åº“ï¼‰å’ŒåŸºç¡€å¹¶å‘/ç½‘ç»œèƒ½åŠ›ï¼Œä¸ºåç»­å­¦ä¹ å¤æ‚é¡¹ç›®ã€æ¡†æ¶æ‰“ä¸‹åšå®çš„å®æˆ˜åŸºç¡€ã€‚</p>
<p>æœ¬é˜¶æ®µæˆ‘ä»¬å°†èšç„¦å››å¤§å®æˆ˜æ–¹å‘ï¼Œå…¨ç¨‹å›´ç»•â€œå®æˆ˜åœºæ™¯+å¯è¿è¡Œä»£ç +é¿å‘å®æˆ˜â€å±•å¼€ï¼Œæ¯ä¸ªçŸ¥è¯†ç‚¹éƒ½ç»“åˆå‰é˜¶æ®µå†…å®¹è®¾è®¡å®æˆ˜æ¡ˆä¾‹ï¼Œè·Ÿç€æ•²ä»£ç ã€ç»ƒæ¡ˆä¾‹ï¼Œæ—¢èƒ½å·©å›ºæ—§çŸ¥è¯†ï¼Œåˆèƒ½æŒæ¡æ–°å·¥å…·ï¼ŒçœŸæ­£å®ç°ä»â€œä¼šç”¨â€åˆ°â€œæ´»ç”¨â€çš„è·¨è¶Šï¼Œç¨³æ­¥å‘â€œèƒ½ç‹¬ç«‹ç¼–å†™ç®€å•é¡¹ç›®çš„Pythonåˆå­¦è€…â€è¿ˆè¿›ï½</p>
<h3 data-id="heading-2">1 å¸¸ç”¨å†…ç½®å‡½æ•°ï¼šPythonè‡ªå¸¦çš„â€œå®ç”¨å·¥å…·â€ï¼Œæå‡ç¼–ç æ•ˆç‡</h3>
<p>åœ¨å‰é¢çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å…¶å®å·²ç»é›¶æ•£ç”¨åˆ°è¿‡ä¸€äº›å†…ç½®å‡½æ•°ï¼ˆæ¯”å¦‚print()ã€input()ï¼‰ï¼Œä½†Pythonè‡ªå¸¦äº†å¤§é‡æ— éœ€å¯¼å…¥ã€ç›´æ¥å¯ç”¨çš„å†…ç½®å‡½æ•°ï¼Œå®ƒä»¬å°±åƒâ€œç°æˆçš„å·¥å…·â€ï¼Œèƒ½å¸®æˆ‘ä»¬å¿«é€Ÿè§£å†³å¸¸è§é—®é¢˜ï¼ˆæ¯”å¦‚è®¡ç®—é•¿åº¦ã€ç”Ÿæˆåºåˆ—ã€ç­›é€‰æ•°æ®ï¼‰ï¼Œé¿å…é‡å¤ç¼–å†™ä»£ç ã€‚</p>
<p>æœ¬é˜¶æ®µé‡ç‚¹æŒæ¡8ä¸ªé«˜é¢‘å®ç”¨çš„å†…ç½®å‡½æ•°ï¼Œè¦†ç›–æ—¥å¸¸ç¼–ç 80%çš„åœºæ™¯ï¼Œç»“åˆå®æˆ˜æ¡ˆä¾‹è®²è§£ï¼Œé‡ç‚¹ç†è§£â€œä»€ä¹ˆæ—¶å€™ç”¨ã€æ€ä¹ˆç”¨â€ï¼Œè€Œéæ­»è®°ç¡¬èƒŒã€‚</p>
<h4 data-id="heading-3">1.1 æ ¸å¿ƒå†…ç½®å‡½æ•°</h4>
<p>æ¯ä¸ªå‡½æ•°å‡æ­é…â€œè¯­æ³•è§£æ+å®æˆ˜ä»£ç +åœºæ™¯è¯´æ˜â€ï¼Œä»£ç å¯ç›´æ¥å¤åˆ¶è¿è¡Œï¼Œè´´åˆæ–°æ‰‹å®æˆ˜éœ€æ±‚ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># 1. len()ï¼šè®¡ç®—å¯è¿­ä»£å¯¹è±¡çš„é•¿åº¦ï¼ˆå­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å­—å…¸ã€å…ƒç»„ç­‰ï¼‰</span>
<span class="hljs-comment"># å®æˆ˜åœºæ™¯ï¼šç»Ÿè®¡ç”¨æˆ·è¾“å…¥çš„å­—ç¬¦æ•°ã€åˆ—è¡¨ä¸­å…ƒç´ ä¸ªæ•°</span>
str1 = <span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥ä¸€æ®µæ–‡å­—ï¼š"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¾“å…¥æ–‡å­—çš„é•¿åº¦ï¼ˆå«ç©ºæ ¼ï¼‰ï¼š<span class="hljs-subst">{<span class="hljs-built_in">len</span>(str1)}</span>"</span>)

list1 = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-string">"Python"</span>, [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>]]
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ—è¡¨çš„å…ƒç´ ä¸ªæ•°ï¼š<span class="hljs-subst">{<span class="hljs-built_in">len</span>(list1)}</span>"</span>)  <span class="hljs-comment"># è¾“å‡º5ï¼ˆåµŒå¥—åˆ—è¡¨ç®—1ä¸ªå…ƒç´ ï¼‰</span>

dict1 = {<span class="hljs-string">"name"</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"age"</span>: <span class="hljs-number">18</span>, <span class="hljs-string">"gender"</span>: <span class="hljs-string">"ç”·"</span>}
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å­—å…¸çš„é”®å€¼å¯¹ä¸ªæ•°ï¼š<span class="hljs-subst">{<span class="hljs-built_in">len</span>(dict1)}</span>"</span>)  <span class="hljs-comment"># è¾“å‡º3</span>

<span class="hljs-comment"># 2. range()ï¼šç”ŸæˆæŒ‡å®šèŒƒå›´çš„æ•´æ•°åºåˆ—ï¼ˆå·¦é—­å³å¼€ï¼‰</span>
<span class="hljs-comment"># å®æˆ˜åœºæ™¯ï¼šé…åˆforå¾ªç¯å®ç°å›ºå®šæ¬¡æ•°çš„è¿­ä»£ï¼ˆæ›¿ä»£æ‰‹åŠ¨å†™åˆ—è¡¨ï¼‰</span>
<span class="hljs-comment"># è¯­æ³•ï¼šrange(å¼€å§‹å€¼, ç»“æŸå€¼, æ­¥é•¿)ï¼Œå¼€å§‹å€¼é»˜è®¤0ï¼Œæ­¥é•¿é»˜è®¤1</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç”Ÿæˆ0-9çš„æ•´æ•°ï¼š"</span>, <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)))  <span class="hljs-comment"># è¾“å‡º[0,1,2,...,9]</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç”Ÿæˆ1-10çš„æ•´æ•°ï¼š"</span>, <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">11</span>)))  <span class="hljs-comment"># è¾“å‡º[1,2,...,10]</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç”Ÿæˆ1-10çš„å¥‡æ•°ï¼š"</span>, <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">11</span>, <span class="hljs-number">2</span>)))  <span class="hljs-comment"># æ­¥é•¿2ï¼Œè¾“å‡º[1,3,...,9]</span>

<span class="hljs-comment"># å®æˆ˜ï¼šç”¨range()å¾ªç¯æ‰“å°1-5çš„å¹³æ–¹ï¼ˆç»“åˆå‰é˜¶æ®µçš„å¾ªç¯ã€å‡½æ•°ï¼‰</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">6</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{i}</span>çš„å¹³æ–¹ï¼š<span class="hljs-subst">{i**<span class="hljs-number">2</span>}</span>"</span>)

<span class="hljs-comment"># 3. enumerate()ï¼šéå†å¯è¿­ä»£å¯¹è±¡æ—¶ï¼ŒåŒæ—¶è·å–ç´¢å¼•å’Œå¯¹åº”çš„å€¼</span>
<span class="hljs-comment"># å®æˆ˜åœºæ™¯ï¼šéå†åˆ—è¡¨/å…ƒç»„æ—¶ï¼Œéœ€è¦çŸ¥é“å…ƒç´ çš„ä½ç½®ï¼ˆé¿å…æ‰‹åŠ¨å®šä¹‰ç´¢å¼•å˜é‡ï¼‰</span>
<span class="hljs-comment"># è¯­æ³•ï¼šenumerate(å¯è¿­ä»£å¯¹è±¡, start=èµ·å§‹ç´¢å¼•)ï¼Œstarté»˜è®¤0</span>
fruits = [<span class="hljs-string">"è‹¹æœ"</span>, <span class="hljs-string">"é¦™è•‰"</span>, <span class="hljs-string">"æ©™å­"</span>, <span class="hljs-string">"è‘¡è„"</span>]
<span class="hljs-comment"># é»˜è®¤start=0ï¼Œç´¢å¼•ä»0å¼€å§‹</span>
<span class="hljs-keyword">for</span> index, value <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(fruits):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç´¢å¼•<span class="hljs-subst">{index}</span>ï¼š<span class="hljs-subst">{value}</span>"</span>)
<span class="hljs-comment"># start=1ï¼Œç´¢å¼•ä»1å¼€å§‹ï¼ˆé€‚åˆè®¡æ•°åœºæ™¯ï¼‰</span>
<span class="hljs-keyword">for</span> index, value <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(fruits, start=<span class="hljs-number">1</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬<span class="hljs-subst">{index}</span>ä¸ªæ°´æœï¼š<span class="hljs-subst">{value}</span>"</span>)

<span class="hljs-comment"># 4. zip()ï¼šå°†å¤šä¸ªå¯è¿­ä»£å¯¹è±¡ï¼ˆåˆ—è¡¨ã€å…ƒç»„ç­‰ï¼‰â€œé…å¯¹â€ï¼Œåˆå¹¶æˆä¸€ä¸ªè¿­ä»£å™¨</span>
<span class="hljs-comment"># å®æˆ˜åœºæ™¯ï¼šæ‰¹é‡å¤„ç†å¤šç»„å…³è”æ•°æ®ï¼ˆæ¯”å¦‚å§“åå’Œå¹´é¾„ã€å­¦å·å’Œæˆç»©ï¼‰</span>
names = [<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"æå››"</span>, <span class="hljs-string">"ç‹äº”"</span>]
ages = [<span class="hljs-number">18</span>, <span class="hljs-number">19</span>, <span class="hljs-number">20</span>]
scores = [<span class="hljs-number">90</span>, <span class="hljs-number">85</span>, <span class="hljs-number">95</span>]

<span class="hljs-comment"># é…å¯¹å¤šä¸ªåˆ—è¡¨ï¼Œéå†è·å–å…³è”æ•°æ®</span>
<span class="hljs-keyword">for</span> name, age, score <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(names, ages, scores):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å§“åï¼š<span class="hljs-subst">{name}</span>ï¼Œå¹´é¾„ï¼š<span class="hljs-subst">{age}</span>ï¼Œæˆç»©ï¼š<span class="hljs-subst">{score}</span>"</span>)

<span class="hljs-comment"># è¡¥å……ï¼šzip()è¿”å›çš„æ˜¯è¿­ä»£å™¨ï¼Œå¯è½¬æ¢ä¸ºåˆ—è¡¨æŸ¥çœ‹</span>
zip_result = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">zip</span>(names, ages))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"zipé…å¯¹ç»“æœï¼š"</span>, zip_result)  <span class="hljs-comment"># è¾“å‡º[('å¼ ä¸‰',18), ('æå››',19), ('ç‹äº”',20)]</span>

<span class="hljs-comment"># 5. sorted()ï¼šå¯¹å¯è¿­ä»£å¯¹è±¡è¿›è¡Œæ’åºï¼Œè¿”å›æ’åºåçš„æ–°åˆ—è¡¨ï¼ˆä¸æ”¹å˜åŸå¯¹è±¡ï¼‰</span>
<span class="hljs-comment"># å®æˆ˜åœºæ™¯ï¼šå¯¹åˆ—è¡¨ã€å…ƒç»„ã€å­—å…¸çš„å€¼è¿›è¡Œæ’åº</span>
nums = [<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>]
sorted_nums = <span class="hljs-built_in">sorted</span>(nums)  <span class="hljs-comment"># é»˜è®¤å‡åº</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å‡åºæ’åºï¼š"</span>, sorted_nums)  <span class="hljs-comment"># è¾“å‡º[1,2,3,4,5]</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"åŸåˆ—è¡¨ï¼ˆæœªæ”¹å˜ï¼‰ï¼š"</span>, nums)  <span class="hljs-comment"># è¾“å‡º[3,1,4,2,5]</span>

<span class="hljs-comment"># é™åºæ’åºï¼ŒæŒ‡å®šreverse=True</span>
sorted_nums_desc = <span class="hljs-built_in">sorted</span>(nums, reverse=<span class="hljs-literal">True</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"é™åºæ’åºï¼š"</span>, sorted_nums_desc)

<span class="hljs-comment"># å®æˆ˜ï¼šå¯¹å­—å…¸æŒ‰å€¼æ’åºï¼ˆç»“åˆå‰é˜¶æ®µçš„å­—å…¸çŸ¥è¯†ï¼‰</span>
score_dict = {<span class="hljs-string">"å¼ ä¸‰"</span>: <span class="hljs-number">90</span>, <span class="hljs-string">"æå››"</span>: <span class="hljs-number">85</span>, <span class="hljs-string">"ç‹äº”"</span>: <span class="hljs-number">95</span>}
<span class="hljs-comment"># æŒ‰æˆç»©å‡åºæ’åºï¼Œè¿”å›åŒ…å«å…ƒç»„çš„åˆ—è¡¨</span>
sorted_score = <span class="hljs-built_in">sorted</span>(score_dict.items(), key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">1</span>])
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æŒ‰æˆç»©å‡åºæ’åºï¼š"</span>, sorted_score)

<span class="hljs-comment"># 6. map()ï¼šå¯¹å¯è¿­ä»£å¯¹è±¡çš„æ¯ä¸ªå…ƒç´ ï¼Œåº”ç”¨æŒ‡å®šå‡½æ•°ï¼Œè¿”å›è¿­ä»£å™¨</span>
<span class="hljs-comment"># å®æˆ˜åœºæ™¯ï¼šæ‰¹é‡å¤„ç†æ•°æ®ï¼ˆæ¯”å¦‚æ‰€æœ‰å…ƒç´ å¹³æ–¹ã€è½¬æ¢æ•°æ®ç±»å‹ï¼‰</span>
<span class="hljs-comment"># ç¤ºä¾‹1ï¼šå°†åˆ—è¡¨ä¸­æ‰€æœ‰æ•´æ•°è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span>
nums = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
str_nums = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">str</span>, nums))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ•´æ•°è½¬å­—ç¬¦ä¸²ï¼š"</span>, str_nums)  <span class="hljs-comment"># è¾“å‡º['1','2','3','4','5']</span>

<span class="hljs-comment"># ç¤ºä¾‹2ï¼šè®¡ç®—åˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ çš„å¹³æ–¹ï¼ˆç»“åˆlambdaåŒ¿åå‡½æ•°ï¼‰</span>
square_nums = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: x**<span class="hljs-number">2</span>, nums))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰€æœ‰å…ƒç´ å¹³æ–¹ï¼š"</span>, square_nums)  <span class="hljs-comment"># è¾“å‡º[1,4,9,16,25]</span>

<span class="hljs-comment"># 7. filter()ï¼šå¯¹å¯è¿­ä»£å¯¹è±¡çš„å…ƒç´ è¿›è¡Œç­›é€‰ï¼Œä¿ç•™ç¬¦åˆæ¡ä»¶çš„å…ƒç´ </span>
<span class="hljs-comment"># å®æˆ˜åœºæ™¯ï¼šç­›é€‰ç¬¦åˆè¦æ±‚çš„æ•°æ®ï¼ˆæ¯”å¦‚ç­›é€‰å¶æ•°ã€ç­›é€‰å¤§äºæŸä¸ªå€¼çš„å…ƒç´ ï¼‰</span>
<span class="hljs-comment"># ç¤ºä¾‹1ï¼šç­›é€‰åˆ—è¡¨ä¸­çš„å¶æ•°</span>
nums = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]
even_nums = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">filter</span>(<span class="hljs-keyword">lambda</span> x: x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>, nums))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç­›é€‰å¶æ•°ï¼š"</span>, even_nums)  <span class="hljs-comment"># è¾“å‡º[2,4,6]</span>

<span class="hljs-comment"># ç¤ºä¾‹2ï¼šç­›é€‰åˆ—è¡¨ä¸­å¤§äº3çš„å…ƒç´ </span>
greater_3 = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">filter</span>(<span class="hljs-keyword">lambda</span> x: x &gt; <span class="hljs-number">3</span>, nums))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç­›é€‰å¤§äº3çš„å…ƒç´ ï¼š"</span>, greater_3)  <span class="hljs-comment"># è¾“å‡º[4,5,6]</span>

<span class="hljs-comment"># 8. abs()ï¼šè¿”å›æ•°å­—çš„ç»å¯¹å€¼</span>
<span class="hljs-comment"># å®æˆ˜åœºæ™¯ï¼šå¤„ç†è´Ÿæ•°ï¼ˆæ¯”å¦‚è®¡ç®—è·ç¦»ã€è¯¯å·®ï¼Œç»å¯¹å€¼é¿å…è´Ÿå·å½±å“ï¼‰</span>
num1 = -<span class="hljs-number">5</span>
num2 = <span class="hljs-number">3.14</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"-5çš„ç»å¯¹å€¼ï¼š<span class="hljs-subst">{<span class="hljs-built_in">abs</span>(num1)}</span>"</span>)  <span class="hljs-comment"># è¾“å‡º5</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"3.14çš„ç»å¯¹å€¼ï¼š<span class="hljs-subst">{<span class="hljs-built_in">abs</span>(num2)}</span>"</span>)  <span class="hljs-comment"># è¾“å‡º3.14</span>
</code></pre>
<h4 data-id="heading-4">1.2 æ–°æ‰‹é¿å‘æŒ‡å—</h4>
<ul>
<li>é¿å‘1ï¼šlen()è®¡ç®—åµŒå¥—åˆ—è¡¨æ—¶ï¼ŒåµŒå¥—çš„å­åˆ—è¡¨ç®—â€œ1ä¸ªå…ƒç´ â€ï¼Œä¸ä¼šé€’å½’è®¡ç®—å­åˆ—è¡¨å†…éƒ¨çš„é•¿åº¦ï¼›</li>
<li>é¿å‘2ï¼šrange()æ˜¯â€œå·¦é—­å³å¼€â€åŒºé—´ï¼Œæ¯”å¦‚range(1, 10)ç”Ÿæˆ1-9çš„æ•´æ•°ï¼Œä¸ä¼šåŒ…å«10ï¼›æ­¥é•¿ä¸ºè´Ÿæ•°æ—¶ï¼Œå¼€å§‹å€¼è¦å¤§äºç»“æŸå€¼ï¼ˆæ¯”å¦‚range(10, 0, -1)ç”Ÿæˆ10-1ï¼‰ï¼›</li>
<li>é¿å‘3ï¼šenumerate()çš„startå‚æ•°åªæ˜¯â€œä¿®æ”¹ç´¢å¼•çš„æ˜¾ç¤ºå€¼â€ï¼Œä¸ä¼šæ”¹å˜å…ƒç´ æœ¬èº«çš„ä½ç½®ï¼›</li>
<li>é¿å‘4ï¼šzip()ä¼šä»¥â€œæœ€çŸ­çš„å¯è¿­ä»£å¯¹è±¡â€ä¸ºå‡†é…å¯¹ï¼Œå¤šä½™çš„å…ƒç´ ä¼šè¢«èˆå¼ƒï¼ˆæ¯”å¦‚3ä¸ªå§“åã€2ä¸ªå¹´é¾„ï¼Œä¼šåªé…å¯¹å‰2ç»„ï¼‰ï¼›ä¸”zip()è¿”å›çš„è¿­ä»£å™¨åªèƒ½éå†ä¸€æ¬¡ï¼Œå†æ¬¡éå†ä¼šä¸ºç©ºï¼›</li>
<li>é¿å‘5ï¼šsorted()ä¼šè¿”å›æ–°åˆ—è¡¨ï¼Œä¸ä¼šä¿®æ”¹åŸå¯¹è±¡ï¼›è€Œåˆ—è¡¨è‡ªå¸¦çš„sort()æ–¹æ³•ä¼šä¿®æ”¹åŸåˆ—è¡¨ï¼Œæ— è¿”å›å€¼ï¼ˆæ–°æ‰‹æ˜“æ··æ·†ä¸¤è€…ï¼‰ï¼›</li>
<li>é¿å‘6ï¼šmap()å’Œfilter()è¿”å›çš„æ˜¯è¿­ä»£å™¨ï¼Œéœ€è½¬æ¢ä¸ºåˆ—è¡¨ï¼ˆlist()ï¼‰æ‰èƒ½ç›´è§‚æŸ¥çœ‹ç»“æœã€‚</li>
</ul>
<h3 data-id="heading-5">2 ç®€å•æ ‡å‡†åº“ä½¿ç”¨ï¼šæ´»ç”¨Pythonè‡ªå¸¦â€œå·¥å…·åŒ…â€ï¼Œé«˜æ•ˆç¼–ç </h3>
<p>åœ¨ç¬¬å…­é˜¶æ®µï¼Œæˆ‘ä»¬å­¦ä¹ äº†æ¨¡å—ä¸åŒ…çš„åŸºç¡€ç”¨æ³•ï¼Œè€ŒPythonè‡ªå¸¦çš„â€œæ ‡å‡†åº“â€ï¼Œå°±æ˜¯ä¸€ç»„å®˜æ–¹ç¼–å†™çš„ã€æ— éœ€é¢å¤–å®‰è£…çš„å®ç”¨æ¨¡å—é›†åˆã€‚å®ƒä»¬è¦†ç›–äº†æ•°å­¦è®¡ç®—ã€éšæœºæ•°ç”Ÿæˆã€æ—¶é—´å¤„ç†ç­‰å¸¸è§åœºæ™¯ï¼Œç†Ÿç»ƒä½¿ç”¨è¿™äº›æ ‡å‡†åº“ï¼Œèƒ½å¤§å¹…æå‡ç¼–ç æ•ˆç‡ï¼Œé¿å…é‡å¤é€ è½®å­ã€‚</p>
<p>æœ¬é˜¶æ®µé‡ç‚¹æŒæ¡3ä¸ªæœ€å¸¸ç”¨çš„æ ‡å‡†åº“ï¼ˆmathã€randomã€timeï¼‰ï¼Œç»“åˆå®æˆ˜åœºæ™¯è®²è§£æ ¸å¿ƒç”¨æ³•ï¼Œä¸æ·±å…¥å¤æ‚åŠŸèƒ½ï¼Œèšç„¦â€œæ–°æ‰‹èƒ½å¿«é€Ÿä¸Šæ‰‹ã€æ—¥å¸¸èƒ½ç”¨å¾—ä¸Šâ€çš„çŸ¥è¯†ç‚¹ã€‚</p>
<h4 data-id="heading-6">2.1 mathåº“ï¼šæ•°å­¦è®¡ç®—å·¥å…·ï¼Œè§£å†³åŸºç¡€æ•°å­¦é—®é¢˜</h4>
<p>mathåº“æä¾›äº†å¤§é‡åŸºç¡€æ•°å­¦è¿ç®—å‡½æ•°ï¼ˆå¦‚åœ†å‘¨ç‡ã€ä¸‰è§’å‡½æ•°ã€å–æ•´ã€å¼€å¹³æ–¹ç­‰ï¼‰ï¼Œé€‚åˆè§£å†³æ—¥å¸¸ç¼–ç¨‹ä¸­çš„æ•°å­¦è®¡ç®—åœºæ™¯ï¼Œæ ¸å¿ƒç”¨æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> math  <span class="hljs-comment"># å¯¼å…¥mathåº“ï¼ˆæ— éœ€å®‰è£…ï¼Œç›´æ¥å¯¼å…¥ï¼‰</span>

<span class="hljs-comment"># 1. å¸¸ç”¨å¸¸é‡ï¼ˆå®æˆ˜å¸¸ç”¨ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"åœ†å‘¨ç‡Ï€ï¼š"</span>, math.pi)  <span class="hljs-comment"># è¾“å‡º3.141592653589793</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"è‡ªç„¶å¸¸æ•°eï¼š"</span>, math.e)  <span class="hljs-comment"># è¾“å‡º2.718281828459045</span>

<span class="hljs-comment"># 2. åŸºç¡€è¿ç®—ï¼ˆå®æˆ˜é‡ç‚¹ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"16çš„å¹³æ–¹æ ¹ï¼š"</span>, math.sqrt(<span class="hljs-number">16</span>))  <span class="hljs-comment"># è¾“å‡º4.0ï¼ˆå¼€å¹³æ–¹ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"2çš„3æ¬¡æ–¹ï¼š"</span>, math.<span class="hljs-built_in">pow</span>(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>))  <span class="hljs-comment"># è¾“å‡º8.0ï¼ˆå¹‚è¿ç®—ï¼Œç­‰åŒäº2**3ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç»å¯¹å€¼ï¼š"</span>, math.fabs(-<span class="hljs-number">5.2</span>))  <span class="hljs-comment"># è¾“å‡º5.2ï¼ˆç»å¯¹å€¼ï¼Œæ¯”abs()æ›´é€‚åˆæµ®ç‚¹æ•°ï¼‰</span>

<span class="hljs-comment"># 3. å–æ•´å‡½æ•°ï¼ˆæ–°æ‰‹æ˜“æ··æ·†ï¼Œé‡ç‚¹åŒºåˆ†ï¼‰</span>
num = <span class="hljs-number">3.7</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å‘ä¸‹å–æ•´ï¼ˆ&lt;=3.7çš„æœ€å¤§æ•´æ•°ï¼‰ï¼š"</span>, math.floor(num))  <span class="hljs-comment"># è¾“å‡º3</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å‘ä¸Šå–æ•´ï¼ˆ&gt;=3.7çš„æœ€å°æ•´æ•°ï¼‰ï¼š"</span>, math.ceil(num))  <span class="hljs-comment"># è¾“å‡º4</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å››èˆäº”å…¥ï¼ˆä¿ç•™æ•´æ•°ï¼‰ï¼š"</span>, <span class="hljs-built_in">round</span>(num))  <span class="hljs-comment"># è¾“å‡º4ï¼ˆroundæ˜¯å†…ç½®å‡½æ•°ï¼Œémathåº“ï¼‰</span>

num2 = <span class="hljs-number">3.1</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å‘ä¸‹å–æ•´ï¼š"</span>, math.floor(num2))  <span class="hljs-comment"># è¾“å‡º3</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å‘ä¸Šå–æ•´ï¼š"</span>, math.ceil(num2))  <span class="hljs-comment"># è¾“å‡º4</span>

<span class="hljs-comment"># 4. å®æˆ˜æ¡ˆä¾‹ï¼šè®¡ç®—åœ†çš„å‘¨é•¿å’Œé¢ç§¯ï¼ˆç»“åˆå‰é˜¶æ®µçš„å‡½æ•°çŸ¥è¯†ï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">calc_circle</span>(<span class="hljs-params">radius</span>):
    <span class="hljs-string">"""è®¡ç®—åœ†çš„å‘¨é•¿å’Œé¢ç§¯"""</span>
    <span class="hljs-keyword">if</span> radius&lt;= <span class="hljs-number">0</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"åŠå¾„å¿…é¡»ä¸ºæ­£æ•°ï¼"</span>)
        <span class="hljs-keyword">return</span>
    circumference = <span class="hljs-number">2</span> * math.pi * radius  <span class="hljs-comment"># å‘¨é•¿å…¬å¼ï¼š2Ï€r</span>
    area = math.pi * math.<span class="hljs-built_in">pow</span>(radius, <span class="hljs-number">2</span>)  <span class="hljs-comment"># é¢ç§¯å…¬å¼ï¼šÏ€rÂ²</span>
    <span class="hljs-keyword">return</span> circumference, area

<span class="hljs-comment"># è°ƒç”¨å‡½æ•°ï¼Œè·å–ç»“æœ</span>
circum, area = calc_circle(<span class="hljs-number">3</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"åŠå¾„ä¸º3çš„åœ†ï¼šå‘¨é•¿=<span class="hljs-subst">{<span class="hljs-built_in">round</span>(circum, <span class="hljs-number">2</span>)}</span>ï¼Œé¢ç§¯=<span class="hljs-subst">{<span class="hljs-built_in">round</span>(area, <span class="hljs-number">2</span>)}</span>"</span>)  <span class="hljs-comment"># ä¿ç•™2ä½å°æ•°</span>
</code></pre>
<h4 data-id="heading-7">2.2 randomåº“ï¼šéšæœºæ•°å·¥å…·ï¼Œå®ç°éšæœºåœºæ™¯</h4>
<p>randomåº“ç”¨äºç”Ÿæˆéšæœºæ•°ã€éšæœºé€‰æ‹©ã€éšæœºæ‰“ä¹±ç­‰æ“ä½œï¼Œé€‚åˆæŠ½å¥–ã€éªŒè¯ç ç”Ÿæˆã€éšæœºåˆ†ç»„ç­‰å®æˆ˜åœºæ™¯ï¼Œæ ¸å¿ƒç”¨æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> random  <span class="hljs-comment"># å¯¼å…¥randomåº“</span>

<span class="hljs-comment"># 1. ç”Ÿæˆéšæœºæµ®ç‚¹æ•°ï¼ˆ0.0 &lt;= æµ®ç‚¹æ•° &lt; 1.0ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"éšæœºæµ®ç‚¹æ•°ï¼ˆ0-1ï¼‰ï¼š"</span>, random.random())

<span class="hljs-comment"># 2. ç”Ÿæˆéšæœºæ•´æ•°ï¼ˆå·¦é—­å³å¼€ï¼ŒåŒ…å«startå’Œendï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"éšæœºæ•´æ•°ï¼ˆ1-10ï¼‰ï¼š"</span>, random.randint(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"éšæœºæ•´æ•°ï¼ˆ0-9ï¼Œæ­¥é•¿2ï¼‰ï¼š"</span>, random.randrange(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>, <span class="hljs-number">2</span>))  <span class="hljs-comment"># åªç”Ÿæˆå¶æ•°</span>

<span class="hljs-comment"># 3. éšæœºé€‰æ‹©ï¼ˆå®æˆ˜å¸¸ç”¨ï¼‰</span>
<span class="hljs-comment"># ä»åºåˆ—ä¸­éšæœºé€‰æ‹©1ä¸ªå…ƒç´ </span>
fruits = [<span class="hljs-string">"è‹¹æœ"</span>, <span class="hljs-string">"é¦™è•‰"</span>, <span class="hljs-string">"æ©™å­"</span>, <span class="hljs-string">"è‘¡è„"</span>]
<span class="hljs-built_in">print</span>(<span class="hljs-string">"éšæœºé€‰æ‹©1ä¸ªæ°´æœï¼š"</span>, random.choice(fruits))

<span class="hljs-comment"># ä»åºåˆ—ä¸­éšæœºé€‰æ‹©å¤šä¸ªä¸é‡å¤å…ƒç´ ï¼ˆæ¯”å¦‚æŠ½å¥–é€‰3äººï¼‰</span>
nums = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">21</span>))  <span class="hljs-comment"># 1-20çš„æ•´æ•°</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"éšæœºé€‰æ‹©3ä¸ªä¸é‡å¤æ•°å­—ï¼š"</span>, random.sample(nums, <span class="hljs-number">3</span>))

<span class="hljs-comment"># 4. éšæœºæ‰“ä¹±ï¼ˆåŸåœ°æ‰“ä¹±åˆ—è¡¨ï¼Œä¿®æ”¹åŸå¯¹è±¡ï¼‰</span>
random.shuffle(fruits)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰“ä¹±åçš„æ°´æœåˆ—è¡¨ï¼š"</span>, fruits)

<span class="hljs-comment"># 5. å®æˆ˜æ¡ˆä¾‹ï¼šç”Ÿæˆ6ä½æ•°å­—éªŒè¯ç ï¼ˆå®æˆ˜é«˜é¢‘åœºæ™¯ï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_verify_code</span>():
    <span class="hljs-string">"""ç”Ÿæˆ6ä½æ•°å­—éªŒè¯ç """</span>
    code = <span class="hljs-string">""</span>
    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">6</span>):
        <span class="hljs-comment"># ç”Ÿæˆ0-9çš„éšæœºæ•´æ•°ï¼Œè½¬æ¢ä¸ºå­—ç¬¦ä¸²æ‹¼æ¥</span>
        code += <span class="hljs-built_in">str</span>(random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">9</span>))
    <span class="hljs-keyword">return</span> code

<span class="hljs-comment"># è°ƒç”¨å‡½æ•°ï¼Œç”ŸæˆéªŒè¯ç </span>
verify_code = generate_verify_code()
<span class="hljs-built_in">print</span>(<span class="hljs-string">"6ä½æ•°å­—éªŒè¯ç ï¼š"</span>, verify_code)
</code></pre>
<h4 data-id="heading-8">2.3 timeåº“ï¼šæ—¶é—´å·¥å…·ï¼Œå¤„ç†æ—¶é—´ç›¸å…³åœºæ™¯</h4>
<p>timeåº“ç”¨äºè·å–å½“å‰æ—¶é—´ã€æ ¼å¼åŒ–æ—¶é—´ã€è®¾ç½®ç¨‹åºå»¶è¿Ÿç­‰æ“ä½œï¼Œé€‚åˆæ—¥å¿—è®°å½•ã€ç¨‹åºè®¡æ—¶ã€å»¶è¿Ÿæ‰§è¡Œç­‰å®æˆ˜åœºæ™¯ï¼Œæ ¸å¿ƒç”¨æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> time  <span class="hljs-comment"># å¯¼å…¥timeåº“</span>

<span class="hljs-comment"># 1. è·å–å½“å‰æ—¶é—´ï¼ˆä¸‰ç§å¸¸ç”¨æ ¼å¼ï¼‰</span>
<span class="hljs-comment"># æ ¼å¼1ï¼šæ—¶é—´æˆ³ï¼ˆä»1970å¹´1æœˆ1æ—¥00:00:00åˆ°å½“å‰çš„ç§’æ•°ï¼Œæµ®ç‚¹æ•°ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å½“å‰æ—¶é—´æˆ³ï¼š"</span>, time.time())

<span class="hljs-comment"># æ ¼å¼2ï¼šç»“æ„åŒ–æ—¶é—´ï¼ˆåŒ…å«å¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†ã€ç§’ç­‰ä¿¡æ¯ï¼‰</span>
struct_time = time.localtime()
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç»“æ„åŒ–æ—¶é—´ï¼š"</span>, struct_time)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å½“å‰å¹´ä»½ï¼š"</span>, struct_time.tm_year)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å½“å‰æœˆä»½ï¼š"</span>, struct_time.tm_mon)

<span class="hljs-comment"># æ ¼å¼3ï¼šæ ¼å¼åŒ–æ—¶é—´ï¼ˆäººç±»å¯è¯»ï¼Œå¸¸ç”¨ï¼‰</span>
<span class="hljs-comment"># å¸¸ç”¨å ä½ç¬¦ï¼š%Yï¼ˆ4ä½å¹´ä»½ï¼‰ã€%mï¼ˆ2ä½æœˆä»½ï¼‰ã€%dï¼ˆ2ä½æ—¥æœŸï¼‰ã€%Hï¼ˆ24å°æ—¶åˆ¶ï¼‰ã€%Mï¼ˆåˆ†é’Ÿï¼‰ã€%Sï¼ˆç§’ï¼‰</span>
format_time1 = time.strftime(<span class="hljs-string">"%Y-%m-%d %H:%M:%S"</span>, struct_time)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å½“å‰æ—¶é—´ï¼ˆå¹´-æœˆ-æ—¥ æ—¶:åˆ†:ç§’ï¼‰ï¼š"</span>, format_time1)

format_time2 = time.strftime(<span class="hljs-string">"%Yå¹´%mæœˆ%dæ—¥ %Hæ—¶%Måˆ†%Sç§’"</span>, struct_time)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å½“å‰æ—¶é—´ï¼ˆä¸­æ–‡æ ¼å¼ï¼‰ï¼š"</span>, format_time2)

<span class="hljs-comment"># 2. ç¨‹åºå»¶è¿Ÿæ‰§è¡Œï¼ˆsleep(ç§’æ•°)ï¼Œå®æˆ˜å¸¸ç”¨ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç¨‹åºå¼€å§‹æ‰§è¡Œ..."</span>)
time.sleep(<span class="hljs-number">2</span>)  <span class="hljs-comment"># å»¶è¿Ÿ2ç§’ï¼ˆè®©ç¨‹åºæš‚åœ2ç§’å†æ‰§è¡Œåç»­ä»£ç ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å»¶è¿Ÿ2ç§’åï¼Œç¨‹åºç»§ç»­æ‰§è¡Œ..."</span>)

<span class="hljs-comment"># 3. å®æˆ˜æ¡ˆä¾‹ï¼šè®¡ç®—ä»£ç æ‰§è¡Œæ—¶é—´ï¼ˆä¼˜åŒ–ä»£ç å¸¸ç”¨ï¼‰</span>
start_time = time.time()  <span class="hljs-comment"># è®°å½•å¼€å§‹æ—¶é—´ï¼ˆæ—¶é—´æˆ³ï¼‰</span>

<span class="hljs-comment"># æ¨¡æ‹Ÿä¸€æ®µéœ€è¦æ‰§è¡Œçš„ä»£ç ï¼ˆæ¯”å¦‚å¾ªç¯10000æ¬¡ï¼‰</span>
total = <span class="hljs-number">0</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">100000</span>):
    total += i

end_time = time.time()  <span class="hljs-comment"># è®°å½•ç»“æŸæ—¶é—´</span>
execution_time = end_time - start_time  <span class="hljs-comment"># è®¡ç®—æ‰§è¡Œæ—¶é—´ï¼ˆç§’ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œæ€»è€—æ—¶ï¼š<span class="hljs-subst">{<span class="hljs-built_in">round</span>(execution_time, <span class="hljs-number">4</span>)}</span>ç§’"</span>)
</code></pre>
<h4 data-id="heading-9">2.4 æ–°æ‰‹é¿å‘æŒ‡å—ï¼ˆæ ‡å‡†åº“å®æˆ˜å¿…çœ‹ï¼‰</h4>
<ul>
<li>é¿å‘1ï¼šmathåº“çš„å‡½æ•°å‚æ•°å¤šä¸ºâ€œå¼§åº¦â€ï¼ˆè€Œéè§’åº¦ï¼‰ï¼Œæ¯”å¦‚math.sin()è®¡ç®—çš„æ˜¯å¼§åº¦çš„æ­£å¼¦å€¼ï¼Œè‹¥ç”¨è§’åº¦éœ€å…ˆè½¬æ¢ï¼ˆå¼§åº¦=è§’åº¦Ã—math.pi/180ï¼‰ï¼›</li>
<li>é¿å‘2ï¼šrandomåº“ç”Ÿæˆçš„æ˜¯â€œä¼ªéšæœºæ•°â€ï¼ˆåŸºäºç§å­ç”Ÿæˆï¼‰ï¼Œè‹¥è®¾ç½®å›ºå®šç§å­ï¼ˆrandom.seed(10)ï¼‰ï¼Œæ¯æ¬¡è¿è¡Œç”Ÿæˆçš„éšæœºæ•°ä¼šç›¸åŒï¼ˆé€‚åˆè°ƒè¯•ï¼‰ï¼›</li>
<li>é¿å‘3ï¼šrandom.shuffle()ä¼šâ€œåŸåœ°æ‰“ä¹±â€åˆ—è¡¨ï¼Œä¿®æ”¹åŸå¯¹è±¡ï¼Œè‹¥ä¸æƒ³ä¿®æ”¹åŸåˆ—è¡¨ï¼Œéœ€å…ˆå¤åˆ¶ï¼ˆæ¯”å¦‚new_list = list1.copy()ï¼Œå†shuffle(new_list)ï¼‰ï¼›</li>
<li>é¿å‘4ï¼štime.strftime()çš„å ä½ç¬¦åŒºåˆ†å¤§å°å†™ï¼Œæ¯”å¦‚%Yæ˜¯4ä½å¹´ä»½ï¼Œ%yæ˜¯2ä½å¹´ä»½ï¼›%Hæ˜¯24å°æ—¶åˆ¶ï¼Œ%Iæ˜¯12å°æ—¶åˆ¶ï¼Œæ–°æ‰‹æ˜“æ··æ·†ï¼›</li>
<li>é¿å‘5ï¼šå¯¼å…¥æ ‡å‡†åº“æ—¶ï¼Œæ¨¡å—åä¸è¦å†™é”™ï¼ˆæ¯”å¦‚mathä¸è¦å†™æˆMathã€randomä¸è¦å†™æˆRandomï¼‰ï¼Œå¦åˆ™ä¼šæŠ¥é”™â€œæ¨¡å—ä¸å­˜åœ¨â€ã€‚</li>
</ul>
<blockquote>
<p>ä»¥ä¸Šè¿™äº›ä½ ä»¬ä¼šè®°å˜›ï¼Ÿä¸ç”¨è®°ï¼Œç°åœ¨ ai è¿™ä¹ˆå‘è¾¾ï¼Œåªè¦æœ‰å°è±¡ï¼Œåˆ°æ—¶å€™ ai ä¸€ä¸‹å°±å‡ºæ¥äº†ã€‚</p>
</blockquote>
<h3 data-id="heading-10">3 ç½‘ç»œç¼–ç¨‹åŸºç¡€ï¼šå®ç°ç®€å•çš„è·¨ç¨‹åºé€šä¿¡</h3>
<p>ç½‘ç»œç¼–ç¨‹æ˜¯Pythonå®æˆ˜ä¸­çš„é‡è¦æŠ€èƒ½ï¼Œæ ¸å¿ƒæ˜¯å®ç°â€œä¸åŒè®¾å¤‡ã€ä¸åŒç¨‹åºä¹‹é—´çš„æ•°æ®ä¼ è¾“â€ã€‚ä½œä¸ºåŸºç¡€å®æˆ˜é˜¶æ®µï¼Œæˆ‘ä»¬ä¸æ·±å…¥å¤æ‚çš„ç½‘ç»œåè®®ï¼Œé‡ç‚¹æŒæ¡<strong>TCPåè®®çš„åŸºç¡€ç”¨æ³•</strong>ï¼ˆæœ€å¸¸ç”¨ã€æœ€å¯é çš„ç½‘ç»œåè®®ï¼‰ï¼Œå®ç°â€œæœ¬åœ°å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯çš„ç®€å•é€šä¿¡â€ï¼Œç†è§£ç½‘ç»œç¼–ç¨‹çš„æ ¸å¿ƒæµç¨‹ï¼Œä¸ºåç»­å­¦ä¹ ç½‘ç»œçˆ¬è™«ã€æ¥å£å¼€å‘æ‰“ä¸‹åŸºç¡€ã€‚</p>
<p>æ ¸å¿ƒæ¦‚å¿µï¼ˆæ–°æ‰‹å¿…æ‡‚ï¼‰ï¼š - å®¢æˆ·ç«¯ï¼ˆClientï¼‰ï¼šä¸»åŠ¨å‘èµ·è¿æ¥ã€è¯·æ±‚æ•°æ®çš„ä¸€æ–¹ï¼ˆæ¯”å¦‚æˆ‘ä»¬çš„æµè§ˆå™¨ã€æ‰‹æœºAPPï¼‰ï¼› - æœåŠ¡å™¨ç«¯ï¼ˆServerï¼‰ï¼šè¢«åŠ¨æ¥æ”¶è¿æ¥ã€å“åº”è¯·æ±‚çš„ä¸€æ–¹ï¼ˆæ¯”å¦‚ç½‘ç«™çš„æœåŠ¡å™¨ï¼‰ï¼› - Socketï¼ˆå¥—æ¥å­—ï¼‰ï¼šç½‘ç»œé€šä¿¡çš„â€œæ¡¥æ¢â€ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯é€šè¿‡Socketå»ºç«‹è¿æ¥ã€ä¼ è¾“æ•°æ®ã€‚</p>
<h4 data-id="heading-11">3.1 ç½‘ç»œç¼–ç¨‹æ ¸å¿ƒæµç¨‹ï¼ˆTCPåè®®ï¼‰</h4>
<p>TCPåè®®çš„é€šä¿¡æµç¨‹éµå¾ªâ€œä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥â†’ä¼ è¾“æ•°æ®â†’å››æ¬¡æŒ¥æ‰‹å…³é—­è¿æ¥â€ï¼Œæ–°æ‰‹é‡ç‚¹æŒæ¡â€œå»ºç«‹è¿æ¥â†’ä¼ è¾“æ•°æ®â†’å…³é—­è¿æ¥â€çš„åŸºç¡€æµç¨‹ï¼Œç”¨Pythonçš„socketåº“å®ç°ï¼ˆå†…ç½®åº“ï¼Œæ— éœ€é¢å¤–å®‰è£…ï¼‰ï¼š</p>
<p>æµç¨‹æ‹†è§£ï¼š æœåŠ¡å™¨ç«¯ï¼šåˆ›å»ºSocketâ†’ç»‘å®šIPå’Œç«¯å£â†’ç›‘å¬è¿æ¥â†’æ¥å—è¿æ¥â†’æ¥æ”¶/å‘é€æ•°æ®â†’å…³é—­è¿æ¥ï¼› å®¢æˆ·ç«¯ï¼šåˆ›å»ºSocketâ†’è¿æ¥æœåŠ¡å™¨ï¼ˆIP+ç«¯å£ï¼‰â†’å‘é€/æ¥æ”¶æ•°æ®â†’å…³é—­è¿æ¥ã€‚</p>
<h4 data-id="heading-12">3.2 å®æˆ˜ä»£ç ï¼šæœ¬åœ°TCPå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯é€šä¿¡</h4>
<p>ä»¥ä¸‹ä»£ç åˆ†ä¸ºâ€œæœåŠ¡å™¨ç«¯â€å’Œâ€œå®¢æˆ·ç«¯â€ä¸¤éƒ¨åˆ†ï¼Œéœ€åˆ†åˆ«è¿è¡Œï¼ˆå…ˆè¿è¡ŒæœåŠ¡å™¨ç«¯ï¼Œå†è¿è¡Œå®¢æˆ·ç«¯ï¼‰ï¼Œå®ç°æœ¬åœ°ï¼ˆ127.0.0.1ï¼Œæœ¬æœºIPï¼‰çš„ç®€å•é€šä¿¡ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ------------- æœåŠ¡å™¨ç«¯ä»£ç ï¼ˆserver.pyï¼‰-------------</span>
<span class="hljs-keyword">import</span> socket
<span class="hljs-keyword">import</span> time

<span class="hljs-comment"># 1. åˆ›å»ºSocketå¯¹è±¡ï¼ˆAF_INETï¼šIPv4åè®®ï¼ŒSOCK_STREAMï¼šTCPåè®®ï¼‰</span>
server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

<span class="hljs-comment"># 2. ç»‘å®šIPåœ°å€å’Œç«¯å£ï¼ˆIPï¼š127.0.0.1ï¼Œæœ¬æœºIPï¼›ç«¯å£ï¼š9999ï¼Œè‡ªå®šä¹‰ï¼Œ1024ä»¥ä¸Šé¿å…å†²çªï¼‰</span>
server_addr = (<span class="hljs-string">"127.0.0.1"</span>, <span class="hljs-number">9999</span>)
server_socket.bind(server_addr)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœåŠ¡å™¨å·²å¯åŠ¨ï¼Œç»‘å®šåœ°å€ï¼š<span class="hljs-subst">{server_addr}</span>ï¼Œç­‰å¾…å®¢æˆ·ç«¯è¿æ¥..."</span>)

<span class="hljs-comment"># 3. ç›‘å¬è¿æ¥ï¼ˆå‚æ•°5ï¼šæœ€å¤§ç­‰å¾…è¿æ¥æ•°ï¼‰</span>
server_socket.listen(<span class="hljs-number">5</span>)

<span class="hljs-comment"># 4. æ¥å—å®¢æˆ·ç«¯è¿æ¥ï¼ˆé˜»å¡å¼ï¼Œç­‰å¾…å®¢æˆ·ç«¯å‘èµ·è¿æ¥ï¼‰</span>
client_socket, client_addr = server_socket.accept()
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å®¢æˆ·ç«¯<span class="hljs-subst">{client_addr}</span>å·²è¿æ¥ï¼"</span>)

<span class="hljs-keyword">try</span>:
    <span class="hljs-comment"># 5. æ¥æ”¶å®¢æˆ·ç«¯å‘é€çš„æ•°æ®ï¼ˆrecv(1024)ï¼šæ¯æ¬¡æœ€å¤šæ¥æ”¶1024å­—èŠ‚ï¼Œéœ€è§£ç ä¸ºå­—ç¬¦ä¸²ï¼‰</span>
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        data = client_socket.recv(<span class="hljs-number">1024</span>).decode(<span class="hljs-string">"utf-8"</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> data:  <span class="hljs-comment"># è‹¥å®¢æˆ·ç«¯å…³é—­è¿æ¥ï¼Œdataä¸ºç©ºï¼Œé€€å‡ºå¾ªç¯</span>
            <span class="hljs-keyword">break</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ”¶åˆ°å®¢æˆ·ç«¯<span class="hljs-subst">{client_addr}</span>çš„æ¶ˆæ¯ï¼š<span class="hljs-subst">{data}</span>"</span>)
        
        <span class="hljs-comment"># 6. å‘å®¢æˆ·ç«¯å‘é€å“åº”æ•°æ®ï¼ˆéœ€ç¼–ç ä¸ºbytesç±»å‹ï¼‰</span>
        response = <span class="hljs-string">f"æœåŠ¡å™¨å·²æ”¶åˆ°æ¶ˆæ¯ï¼š<span class="hljs-subst">{data}</span>ï¼Œæ—¶é—´ï¼š<span class="hljs-subst">{time.strftime(<span class="hljs-string">'%H:%M:%S'</span>)}</span>"</span>
        client_socket.send(response.encode(<span class="hljs-string">"utf-8"</span>))
<span class="hljs-keyword">finally</span>:
    <span class="hljs-comment"># 7. å…³é—­è¿æ¥ï¼ˆå…ˆå…³é—­å®¢æˆ·ç«¯è¿æ¥ï¼Œå†å…³é—­æœåŠ¡å™¨ç«¯è¿æ¥ï¼‰</span>
    client_socket.close()
    server_socket.close()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¸å®¢æˆ·ç«¯<span class="hljs-subst">{client_addr}</span>çš„è¿æ¥å·²å…³é—­ï¼ŒæœåŠ¡å™¨å·²åœæ­¢è¿è¡Œ"</span>)

<span class="hljs-comment"># ------------- å®¢æˆ·ç«¯ä»£ç ï¼ˆclient.pyï¼‰-------------</span>
<span class="hljs-keyword">import</span> socket

<span class="hljs-comment"># 1. åˆ›å»ºSocketå¯¹è±¡ï¼ˆä¸æœåŠ¡å™¨ç«¯ä¸€è‡´ï¼ŒIPv4+TCPï¼‰</span>
client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

<span class="hljs-comment"># 2. è¿æ¥æœåŠ¡å™¨ï¼ˆæŒ‡å®šæœåŠ¡å™¨çš„IPå’Œç«¯å£ï¼Œä¸æœåŠ¡å™¨ç«¯ä¸€è‡´ï¼‰</span>
server_addr = (<span class="hljs-string">"127.0.0.1"</span>, <span class="hljs-number">9999</span>)
<span class="hljs-keyword">try</span>:
    client_socket.connect(server_addr)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æˆåŠŸè¿æ¥åˆ°æœåŠ¡å™¨<span class="hljs-subst">{server_addr}</span>ï¼"</span>)
    
    <span class="hljs-comment"># 3. å‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼ˆè¾“å…¥æ¶ˆæ¯ï¼Œå‘é€ç»™æœåŠ¡å™¨ï¼‰</span>
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        msg = <span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥è¦å‘é€ç»™æœåŠ¡å™¨çš„æ¶ˆæ¯ï¼ˆè¾“å…¥'quit'é€€å‡ºï¼‰ï¼š"</span>)
        <span class="hljs-keyword">if</span> msg == <span class="hljs-string">"quit"</span>:
            <span class="hljs-keyword">break</span>
        <span class="hljs-comment"># å‘é€æ•°æ®ï¼šå­—ç¬¦ä¸²ç¼–ç ä¸ºbytesç±»å‹</span>
        client_socket.send(msg.encode(<span class="hljs-string">"utf-8"</span>))
        
        <span class="hljs-comment"># 4. æ¥æ”¶æœåŠ¡å™¨çš„å“åº”æ•°æ®</span>
        response = client_socket.recv(<span class="hljs-number">1024</span>).decode(<span class="hljs-string">"utf-8"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœåŠ¡å™¨å“åº”ï¼š<span class="hljs-subst">{response}</span>"</span>)
<span class="hljs-keyword">finally</span>:
    <span class="hljs-comment"># 5. å…³é—­è¿æ¥</span>
    client_socket.close()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¸æœåŠ¡å™¨çš„è¿æ¥å·²å…³é—­"</span>)
</code></pre>
<h4 data-id="heading-13">3.3 ä»£ç è¿è¡Œè¯´æ˜ä¸å®æˆ˜æ‹“å±•</h4>
<ul>
<li>è¿è¡Œæ­¥éª¤ï¼šâ‘  æ–°å»ºä¸¤ä¸ª.pyæ–‡ä»¶ï¼ˆserver.pyã€client.pyï¼‰ï¼Œåˆ†åˆ«å¤åˆ¶ä¸Šé¢çš„ä»£ç ï¼›â‘¡ å…ˆè¿è¡Œserver.pyï¼ˆæœåŠ¡å™¨å¯åŠ¨ï¼Œç­‰å¾…è¿æ¥ï¼‰ï¼›â‘¢ å†è¿è¡Œclient.pyï¼ˆå®¢æˆ·ç«¯è¿æ¥æœåŠ¡å™¨ï¼‰ï¼›â‘£ åœ¨å®¢æˆ·ç«¯è¾“å…¥æ¶ˆæ¯ï¼Œå³å¯å®ç°åŒå‘é€šä¿¡ï¼Œè¾“å…¥â€œquitâ€é€€å‡ºã€‚</li>
<li>å®æˆ˜æ‹“å±•ï¼šå°†å‰é˜¶æ®µçš„â€œæ–‡ä»¶æ“ä½œâ€ç»“åˆè¿›æ¥ï¼Œå®ç°â€œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€æ–‡ä»¶å†…å®¹ï¼ŒæœåŠ¡å™¨æ¥æ”¶åä¿å­˜åˆ°æœ¬åœ°â€ï¼ˆæ¯”å¦‚å®¢æˆ·ç«¯è¯»å–test.txtæ–‡ä»¶ï¼Œå‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ä¿å­˜ä¸ºserver_test.txtï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-14">3.4 æ–°æ‰‹é¿å‘æŒ‡å—ï¼ˆç½‘ç»œç¼–ç¨‹åŸºç¡€å¿…çœ‹ï¼‰</h4>
<ul>
<li>é¿å‘1ï¼šå¿…é¡»â€œå…ˆå¯åŠ¨æœåŠ¡å™¨ç«¯ï¼Œå†å¯åŠ¨å®¢æˆ·ç«¯â€ï¼Œå¦åˆ™å®¢æˆ·ç«¯ä¼šæŠ¥é”™â€œè¿æ¥æ‹’ç»â€ï¼›</li>
<li>é¿å‘2ï¼šIPåœ°å€å’Œç«¯å£å¿…é¡»ä¸€è‡´ï¼ŒæœåŠ¡å™¨ç«¯ç»‘å®šçš„IPå’Œç«¯å£ï¼Œå®¢æˆ·ç«¯å¿…é¡»å®Œå…¨å¯¹åº”ï¼ˆæ¯”å¦‚æœåŠ¡å™¨ç»‘å®š127.0.0.1:9999ï¼Œå®¢æˆ·ç«¯ä¹Ÿè¦è¿æ¥è¿™ä¸ªåœ°å€ï¼‰ï¼›</li>
<li>é¿å‘3ï¼šTCPé€šä¿¡ä¸­ï¼Œsend()å‘é€çš„æ˜¯bytesç±»å‹æ•°æ®ï¼Œrecv()æ¥æ”¶çš„ä¹Ÿæ˜¯bytesç±»å‹ï¼Œå¿…é¡»ç”¨encode("utf-8")ç¼–ç ã€decode("utf-8")è§£ç ï¼Œå¦åˆ™ä¼šæŠ¥é”™æˆ–å‡ºç°ä¹±ç ï¼›</li>
<li>é¿å‘4ï¼šç«¯å£å·éœ€é€‰æ‹©1024ä»¥ä¸Šçš„ï¼ˆ1024ä»¥ä¸‹æ˜¯ç³»ç»Ÿæ ‡å‡†ç«¯å£ï¼Œå¯èƒ½è¢«å ç”¨ï¼‰ï¼Œè‹¥è¿è¡Œæ—¶æŠ¥é”™â€œç«¯å£å·²è¢«å ç”¨â€ï¼Œå¯æ›´æ¢ç«¯å£ï¼ˆæ¯”å¦‚æ”¹ä¸º10000ï¼‰ï¼›</li>
<li>é¿å‘5ï¼šæœåŠ¡å™¨ç«¯çš„accept()ã€recv()æ˜¯â€œé˜»å¡å¼â€çš„ï¼Œä¼šä¸€ç›´ç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥/æ•°æ®ï¼Œæ–°æ‰‹æ— éœ€æ·±ç©¶ï¼Œåç»­è¿›é˜¶å†å­¦ä¹ éé˜»å¡ç¼–ç¨‹ï¼›</li>
<li>é¿å‘6ï¼šé€šä¿¡ç»“æŸåï¼Œå¿…é¡»å…³é—­Socketè¿æ¥ï¼ˆclose()ï¼‰ï¼Œé¿å…èµ„æºæ³„éœ²ã€‚</li>
</ul>
<h3 data-id="heading-15">4 å¤šçº¿ç¨‹åŸºç¡€ï¼šå®ç°ç¨‹åºçš„å¹¶å‘æ‰§è¡Œ</h3>
<p>åœ¨å‰é¢çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬ç¼–å†™çš„ä»£ç éƒ½æ˜¯â€œå•çº¿ç¨‹â€çš„â€”â€”ç¨‹åºä»ä¸Šåˆ°ä¸‹ï¼Œä¾æ¬¡æ‰§è¡Œï¼Œä¸€æ¬¡åªèƒ½åšä¸€ä»¶äº‹ï¼ˆæ¯”å¦‚ç¨‹åºæ‰§è¡Œå»¶è¿Ÿæ—¶ï¼Œä¼šä¸€ç›´å¡ä½ï¼Œæ— æ³•åšå…¶ä»–æ“ä½œï¼‰ã€‚è€Œâ€œå¤šçº¿ç¨‹â€ï¼Œèƒ½è®©ç¨‹åºâ€œåŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡â€ï¼ˆå¹¶å‘æ‰§è¡Œï¼‰ï¼Œæå‡ç¨‹åºæ•ˆç‡ï¼Œå°¤å…¶é€‚åˆI/Oå¯†é›†å‹ä»»åŠ¡ï¼ˆæ¯”å¦‚æ–‡ä»¶æ“ä½œã€ç½‘ç»œè¯·æ±‚ã€å»¶è¿Ÿæ‰§è¡Œï¼‰ã€‚</p>
<p>ä½œä¸ºåŸºç¡€å®æˆ˜é˜¶æ®µï¼Œæˆ‘ä»¬é‡ç‚¹æŒæ¡Python threadingæ¨¡å—çš„åŸºç¡€ç”¨æ³•ï¼ˆå†…ç½®åº“ï¼Œæ— éœ€é¢å¤–å®‰è£…ï¼‰ï¼Œå®ç°ç®€å•çš„å¤šçº¿ç¨‹å¹¶å‘ï¼Œç†è§£å¤šçº¿ç¨‹çš„æ ¸å¿ƒæ¦‚å¿µå’Œä¼˜åŠ¿ï¼Œä¸æ·±å…¥å¤æ‚çš„çº¿ç¨‹å®‰å…¨ã€é”æœºåˆ¶ï¼ˆåç»­è¿›é˜¶å†å­¦ä¹ ï¼‰ã€‚</p>
<p>æ ¸å¿ƒæ¦‚å¿µï¼ˆæ–°æ‰‹å¿…æ‡‚ï¼‰ï¼š - çº¿ç¨‹ï¼ˆThreadï¼‰ï¼šç¨‹åºæ‰§è¡Œçš„æœ€å°å•ä½ï¼Œä¸€ä¸ªç¨‹åºå¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ï¼› - ä¸»çº¿ç¨‹ï¼šç¨‹åºå¯åŠ¨åï¼Œé»˜è®¤åˆ›å»ºçš„çº¿ç¨‹ï¼ˆæ¯”å¦‚æˆ‘ä»¬ä¹‹å‰å†™çš„ä»£ç ï¼Œéƒ½æ˜¯ä¸»çº¿ç¨‹åœ¨æ‰§è¡Œï¼‰ï¼› - å­çº¿ç¨‹ï¼šæˆ‘ä»¬æ‰‹åŠ¨åˆ›å»ºçš„çº¿ç¨‹ï¼Œç”¨äºæ‰§è¡Œé¢å¤–çš„ä»»åŠ¡ï¼Œä¸ä¸»çº¿ç¨‹å¹¶å‘æ‰§è¡Œã€‚</p>
<h4 data-id="heading-16">4.1 å¤šçº¿ç¨‹åŸºç¡€ç”¨æ³•ï¼ˆä¸¤ç§å¸¸ç”¨æ–¹å¼ï¼‰</h4>
<p>æ–°æ‰‹é‡ç‚¹æŒæ¡ä¸¤ç§åˆ›å»ºå­çº¿ç¨‹çš„æ–¹å¼ï¼šâ‘  ä¼ å…¥targetå‡½æ•°ï¼ˆæ¨èï¼Œç®€å•æ˜“æ‡‚ï¼‰ï¼›â‘¡ ç»§æ‰¿Threadç±»ï¼ˆè¿›é˜¶ç”¨æ³•ï¼Œç®€å•äº†è§£ï¼‰ï¼Œç»“åˆå®æˆ˜æ¡ˆä¾‹è®²è§£ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> threading
<span class="hljs-keyword">import</span> time

<span class="hljs-comment"># ---------------- æ–¹å¼1ï¼šä¼ å…¥targetå‡½æ•°ï¼ˆæ¨èï¼Œæ–°æ‰‹é¦–é€‰ï¼‰----------------</span>
<span class="hljs-comment"># å®šä¹‰è¦åœ¨å­çº¿ç¨‹ä¸­æ‰§è¡Œçš„å‡½æ•°ï¼ˆæ¯”å¦‚æ¨¡æ‹Ÿä¸‹è½½ä»»åŠ¡ï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">download_task</span>(<span class="hljs-params">task_name, delay</span>):
    <span class="hljs-string">"""æ¨¡æ‹Ÿä¸‹è½½ä»»åŠ¡ï¼šå»¶è¿Ÿdelayç§’ï¼Œæ¨¡æ‹Ÿä¸‹è½½è€—æ—¶"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å­çº¿ç¨‹å¯åŠ¨ï¼šå¼€å§‹ä¸‹è½½<span class="hljs-subst">{task_name}</span>ï¼Œé¢„è®¡è€—æ—¶<span class="hljs-subst">{delay}</span>ç§’"</span>)
    time.sleep(delay)  <span class="hljs-comment"># æ¨¡æ‹Ÿä¸‹è½½è€—æ—¶ï¼ˆI/Oé˜»å¡ï¼‰</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å­çº¿ç¨‹ç»“æŸï¼š<span class="hljs-subst">{task_name}</span>ä¸‹è½½å®Œæˆï¼"</span>)

<span class="hljs-comment"># 1. åˆ›å»ºå­çº¿ç¨‹ï¼ˆtargetï¼šå­çº¿ç¨‹è¦æ‰§è¡Œçš„å‡½æ•°ï¼›argsï¼šä¼ å…¥å‡½æ•°çš„å‚æ•°ï¼Œå…ƒç»„ç±»å‹ï¼‰</span>
thread1 = threading.Thread(target=download_task, args=(<span class="hljs-string">"ç”µå½±A"</span>, <span class="hljs-number">3</span>))
thread2 = threading.Thread(target=download_task, args=(<span class="hljs-string">"éŸ³ä¹B"</span>, <span class="hljs-number">2</span>))

<span class="hljs-comment"># 2. å¯åŠ¨å­çº¿ç¨‹ï¼ˆstart()ï¼šå¯åŠ¨çº¿ç¨‹ï¼Œè‡ªåŠ¨è°ƒç”¨targetå‡½æ•°ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¸»çº¿ç¨‹ï¼šå¼€å§‹æ‰§è¡Œç¨‹åº"</span>)
thread1.start()
thread2.start()

<span class="hljs-comment"># 3. ç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼ˆjoin()ï¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Œç­‰å¾…å­çº¿ç¨‹ç»“æŸåï¼Œä¸»çº¿ç¨‹å†ç»§ç»­ï¼‰</span>
thread1.join()
thread2.join()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¸»çº¿ç¨‹ï¼šæ‰€æœ‰å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œç¨‹åºç»“æŸ"</span>)

<span class="hljs-comment"># ---------------- æ–¹å¼2ï¼šç»§æ‰¿Threadç±»ï¼ˆç®€å•äº†è§£ï¼‰----------------</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread</span>(threading.Thread):
    <span class="hljs-string">"""è‡ªå®šä¹‰çº¿ç¨‹ç±»ï¼Œç»§æ‰¿Threadç±»ï¼Œé‡å†™run()æ–¹æ³•"""</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, task_name, delay</span>):
        <span class="hljs-built_in">super</span>().__init__()  <span class="hljs-comment"># è°ƒç”¨çˆ¶ç±»çš„åˆå§‹åŒ–æ–¹æ³•</span>
        self.task_name = task_name
        self.delay = delay
    
    <span class="hljs-comment"># é‡å†™run()æ–¹æ³•ï¼šå­çº¿ç¨‹å¯åŠ¨åï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œrun()æ–¹æ³•ä¸­çš„ä»£ç </span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å­çº¿ç¨‹å¯åŠ¨ï¼šå¼€å§‹ä¸‹è½½<span class="hljs-subst">{self.task_name}</span>ï¼Œé¢„è®¡è€—æ—¶<span class="hljs-subst">{self.delay}</span>ç§’"</span>)
        time.sleep(self.delay)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å­çº¿ç¨‹ç»“æŸï¼š<span class="hljs-subst">{self.task_name}</span>ä¸‹è½½å®Œæˆï¼"</span>)

<span class="hljs-comment"># åˆ›å»ºè‡ªå®šä¹‰çº¿ç¨‹å¯¹è±¡</span>
thread3 = MyThread(<span class="hljs-string">"å›¾ç‰‡C"</span>, <span class="hljs-number">1</span>)
thread4 = MyThread(<span class="hljs-string">"æ–‡æ¡£D"</span>, <span class="hljs-number">4</span>)

<span class="hljs-comment"># å¯åŠ¨å­çº¿ç¨‹</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nä¸»çº¿ç¨‹ï¼šå¼€å§‹æ‰§è¡Œè‡ªå®šä¹‰çº¿ç¨‹ç¨‹åº"</span>)
thread3.start()
thread4.start()

<span class="hljs-comment"># ç­‰å¾…å­çº¿ç¨‹ç»“æŸ</span>
thread3.join()
thread4.join()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¸»çº¿ç¨‹ï¼šæ‰€æœ‰è‡ªå®šä¹‰çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œç¨‹åºç»“æŸ"</span>)
</code></pre>
<h4 data-id="heading-17">4.2 å¤šçº¿ç¨‹çš„ä¼˜åŠ¿ï¼ˆå®æˆ˜å¯¹æ¯”ï¼‰</h4>
<p>é€šè¿‡â€œå•çº¿ç¨‹â€ä¸â€œå¤šçº¿ç¨‹â€çš„æ‰§è¡Œæ—¶é—´å¯¹æ¯”ï¼Œç›´è§‚æ„Ÿå—å¤šçº¿ç¨‹çš„å¹¶å‘ä¼˜åŠ¿ï¼ˆé€‚åˆI/Oå¯†é›†å‹ä»»åŠ¡ï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> threading
<span class="hljs-keyword">import</span> time

<span class="hljs-comment"># å®šä¹‰ä»»åŠ¡å‡½æ•°ï¼ˆæ¨¡æ‹ŸI/Oé˜»å¡ï¼Œæ¯”å¦‚ä¸‹è½½ã€æ–‡ä»¶è¯»å–ï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">task</span>(<span class="hljs-params">name, delay</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä»»åŠ¡<span class="hljs-subst">{name}</span>å¼€å§‹æ‰§è¡Œï¼Œè€—æ—¶<span class="hljs-subst">{delay}</span>ç§’"</span>)
    time.sleep(delay)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä»»åŠ¡<span class="hljs-subst">{name}</span>æ‰§è¡Œå®Œæ¯•"</span>)

<span class="hljs-comment"># ---------------- å•çº¿ç¨‹æ‰§è¡Œï¼ˆä¾æ¬¡æ‰§è¡Œ3ä¸ªä»»åŠ¡ï¼‰----------------</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"=== å•çº¿ç¨‹æ‰§è¡Œ ==="</span>)
start_time1 = time.time()

task(<span class="hljs-string">"A"</span>, <span class="hljs-number">3</span>)
task(<span class="hljs-string">"B"</span>, <span class="hljs-number">2</span>)
task(<span class="hljs-string">"C"</span>, <span class="hljs-number">1</span>)

end_time1 = time.time()
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å•çº¿ç¨‹æ€»è€—æ—¶ï¼š<span class="hljs-subst">{<span class="hljs-built_in">round</span>(end_time1 - start_time1, <span class="hljs-number">2</span>)}</span>ç§’\n"</span>)  <span class="hljs-comment"># æ€»è€—æ—¶çº¦6ç§’</span>

<span class="hljs-comment"># ---------------- å¤šçº¿ç¨‹æ‰§è¡Œï¼ˆ3ä¸ªä»»åŠ¡å¹¶å‘æ‰§è¡Œï¼‰----------------</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"=== å¤šçº¿ç¨‹æ‰§è¡Œ ==="</span>)
start_time2 = time.time()

<span class="hljs-comment"># åˆ›å»º3ä¸ªå­çº¿ç¨‹</span>
t1 = threading.Thread(target=task, args=(<span class="hljs-string">"A"</span>, <span class="hljs-number">3</span>))
t2 = threading.Thread(target=task, args=(<span class="hljs-string">"B"</span>, <span class="hljs-number">2</span>))
t3 = threading.Thread(target=task, args=(<span class="hljs-string">"C"</span>, <span class="hljs-number">1</span>))

<span class="hljs-comment"># å¯åŠ¨æ‰€æœ‰å­çº¿ç¨‹</span>
t1.start()
t2.start()
t3.start()

<span class="hljs-comment"># ç­‰å¾…æ‰€æœ‰å­çº¿ç¨‹ç»“æŸ</span>
t1.join()
t2.join()
t3.join()

end_time2 = time.time()
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¤šçº¿ç¨‹æ€»è€—æ—¶ï¼š<span class="hljs-subst">{<span class="hljs-built_in">round</span>(end_time2 - start_time2, <span class="hljs-number">2</span>)}</span>ç§’"</span>)  <span class="hljs-comment"># æ€»è€—æ—¶çº¦3ç§’ï¼ˆå–å†³äºæœ€é•¿ä»»åŠ¡ï¼‰</span>
</code></pre>
<p>è¿è¡Œç»“æœåˆ†æï¼šå•çº¿ç¨‹æ‰§è¡Œ3ä¸ªä»»åŠ¡ï¼Œæ€»è€—æ—¶æ˜¯3+2+1=6ç§’ï¼›å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œï¼Œæ€»è€—æ—¶çº¦3ç§’ï¼ˆç­‰äºæœ€é•¿ä»»åŠ¡çš„è€—æ—¶ï¼‰ï¼Œæ˜æ˜¾æå‡äº†ç¨‹åºæ•ˆç‡â€”â€”è¿™å°±æ˜¯å¤šçº¿ç¨‹çš„æ ¸å¿ƒä¼˜åŠ¿ï¼Œé€‚åˆå¤„ç†â€œéœ€è¦ç­‰å¾…çš„ä»»åŠ¡â€ã€‚</p>
<h4 data-id="heading-18">4.3 æ–°æ‰‹é¿å‘æŒ‡å—ï¼ˆå¤šçº¿ç¨‹åŸºç¡€å¿…çœ‹ï¼‰</h4>
<ul>
<li>é¿å‘1ï¼šå¯åŠ¨çº¿ç¨‹å¿…é¡»ç”¨ <code>start()</code> æ–¹æ³•ï¼Œä¸èƒ½ç”¨ <code>run()</code> æ–¹æ³•â€”â€”start()ä¼šåˆ›å»ºå­çº¿ç¨‹ï¼Œå¹¶å‘æ‰§è¡Œï¼›run()åªæ˜¯æ™®é€šå‡½æ•°è°ƒç”¨ï¼Œè¿˜æ˜¯å•çº¿ç¨‹æ‰§è¡Œï¼›</li>
<li>é¿å‘2ï¼š<code>join()</code> æ–¹æ³•çš„ä½œç”¨æ˜¯â€œé˜»å¡ä¸»çº¿ç¨‹â€ï¼Œç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œè‹¥ä¸è°ƒç”¨join()ï¼Œä¸»çº¿ç¨‹ä¼šç›´æ¥ç»“æŸï¼Œå­çº¿ç¨‹å¯èƒ½è¿˜æœªæ‰§è¡Œå®Œå°±è¢«ç»ˆæ­¢ï¼›</li>
<li>é¿å‘3ï¼šPythonä¸­å­˜åœ¨â€œå…¨å±€è§£é‡Šå™¨é”ï¼ˆGILï¼‰â€ï¼ŒåŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æ‰§è¡ŒPythonä»£ç â€”â€”å¤šçº¿ç¨‹é€‚åˆI/Oå¯†é›†å‹ä»»åŠ¡ï¼ˆå¦‚ä¸‹è½½ã€å»¶è¿Ÿï¼‰ï¼Œä¸é€‚åˆCPUå¯†é›†å‹ä»»åŠ¡ï¼ˆå¦‚å¤§é‡è®¡ç®—ï¼‰ï¼Œæ–°æ‰‹æ— éœ€æ·±ç©¶GILï¼ŒçŸ¥é“è¿™ä¸ªç‰¹æ€§å³å¯ï¼›</li>
<li>é¿å‘4ï¼šå¤šä¸ªå­çº¿ç¨‹å…±äº«å…¨å±€å˜é‡æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°â€œçº¿ç¨‹å®‰å…¨é—®é¢˜â€ï¼ˆæ¯”å¦‚å¤šä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå¯¼è‡´æ•°æ®é”™è¯¯ï¼‰ï¼ŒåŸºç¡€é˜¶æ®µæš‚æ—¶ä¸å¤„ç†ï¼Œåç»­è¿›é˜¶å­¦ä¹ â€œé”æœºåˆ¶â€è§£å†³ï¼›</li>
<li>é¿å‘5ï¼šä¸è¦åˆ›å»ºè¿‡å¤šçš„å­çº¿ç¨‹ï¼ˆæ¯”å¦‚å‡ ç™¾ã€å‡ åƒä¸ªï¼‰ï¼Œä¼šå ç”¨å¤§é‡ç³»ç»Ÿèµ„æºï¼Œå¯¼è‡´ç¨‹åºå¡é¡¿ï¼ŒæŒ‰éœ€åˆ›å»ºå³å¯ã€‚</li>
</ul>
<h3 data-id="heading-19">5 æ€»ç»“</h3>
<p>æ­å–œå¤§å®¶ï¼Python3åŸºç¡€å­¦ä¹ ç¬¬ä¸ƒé˜¶æ®µã€ŒåŸºç¡€å®æˆ˜å·©å›ºã€çš„æ ¸å¿ƒå†…å®¹ï¼Œåˆ°è¿™é‡Œå°±å…¨éƒ¨æ¢³ç†å®Œæ¯•äº†ï¼è¿™ä¸€é˜¶æ®µï¼Œæˆ‘ä»¬æ²¡æœ‰å­¦ä¹ æ–°çš„å¤æ‚è¯­æ³•ï¼Œè€Œæ˜¯èšç„¦â€œå®æˆ˜å·©å›ºâ€ï¼Œå°†å‰å…­é˜¶æ®µçš„çŸ¥è¯†ä¸²è”èµ·æ¥ï¼Œé€šè¿‡å››å¤§å®æˆ˜æ–¹å‘ï¼Œå®ç°äº†ä»â€œä¼šç”¨â€åˆ°â€œæ´»ç”¨â€çš„è·¨è¶Šï¼š</p>
<ul>
<li>å¸¸ç”¨å†…ç½®å‡½æ•°ï¼šæŒæ¡äº†lenã€rangeã€enumerateã€zipç­‰é«˜é¢‘å·¥å…·ï¼Œå­¦ä¼šç”¨å†…ç½®å‡½æ•°ç®€åŒ–ä»£ç ï¼Œæå‡ç¼–ç æ•ˆç‡ï¼›</li>
<li>ç®€å•æ ‡å‡†åº“ï¼šç†Ÿç»ƒä½¿ç”¨mathã€randomã€timeä¸‰ä¸ªå¸¸ç”¨æ ‡å‡†åº“ï¼Œèƒ½è§£å†³æ•°å­¦è®¡ç®—ã€éšæœºåœºæ™¯ã€æ—¶é—´å¤„ç†ç­‰æ—¥å¸¸å®æˆ˜éœ€æ±‚ï¼›</li>
<li>ç½‘ç»œç¼–ç¨‹åŸºç¡€ï¼šæŒæ¡TCPåè®®çš„æ ¸å¿ƒæµç¨‹ï¼Œå®ç°äº†æœ¬åœ°å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯çš„ç®€å•é€šä¿¡ï¼Œç†è§£äº†è·¨ç¨‹åºé€šä¿¡çš„åŸç†ï¼›</li>
<li>å¤šçº¿ç¨‹åŸºç¡€ï¼šå­¦ä¼šç”¨threadingæ¨¡å—åˆ›å»ºå­çº¿ç¨‹ï¼Œå®ç°ç¨‹åºçš„å¹¶å‘æ‰§è¡Œï¼Œæå‡I/Oå¯†é›†å‹ä»»åŠ¡çš„æ•ˆç‡ã€‚</li>
</ul>
<p>æœ¬é˜¶æ®µçš„æ ¸å¿ƒé‡ç‚¹æ˜¯â€œå®æˆ˜â€â€”â€”æ–°æ‰‹ä¸è¦åªçœ‹ä»£ç ã€è®°è¯­æ³•ï¼Œä¸€å®šè¦äº²æ‰‹æ•²å†™æ¯ä¸ªæ¡ˆä¾‹ï¼Œè°ƒè¯•æŠ¥é”™ï¼Œç»“åˆå‰é˜¶æ®µçš„çŸ¥è¯†ï¼ˆå‡½æ•°ã€æ¨¡å—ã€æ–‡ä»¶æ“ä½œç­‰ï¼‰æ‹“å±•å®æˆ˜åœºæ™¯ï¼Œæ¯”å¦‚ï¼šç”¨å¤šçº¿ç¨‹å®ç°å¤šæ–‡ä»¶ä¸‹è½½ã€ç”¨ç½‘ç»œç¼–ç¨‹+æ–‡ä»¶æ“ä½œå®ç°æ–‡ä»¶ä¼ è¾“ã€ç”¨å†…ç½®å‡½æ•°+æ ‡å‡†åº“ç¼–å†™ç®€å•çš„éªŒè¯ç ç”Ÿæˆå™¨ã€‚</p>
<p>å¯¹äºæ–°æ‰‹æ¥è¯´ï¼Œæœ¬é˜¶æ®µå¯èƒ½ä¼šè§‰å¾—å¤šçº¿ç¨‹ã€ç½‘ç»œç¼–ç¨‹æœ‰ç‚¹éš¾åº¦ï¼Œå°¤å…¶æ˜¯â€œå¹¶å‘â€â€œSocketè¿æ¥â€çš„é€»è¾‘ï¼Œå®¹æ˜“æ··æ·†æ­¥éª¤â€”â€”æ²¡å…³ç³»ï¼Œå¤šåŠ¨æ‰‹ç»ƒä¹ ï¼Œå…ˆæŒæ¡åŸºç¡€ç”¨æ³•ï¼Œå†é€æ­¥ç†è§£åŸç†ï¼Œé‡ç‚¹æ˜¯èƒ½ç‹¬ç«‹å†™å‡ºå¯è¿è¡Œçš„å®æˆ˜ä»£ç ï¼Œå·©å›ºåŸºç¡€ã€‚</p>
<p>åˆ°è¿™é‡Œï¼ŒPython3åŸºç¡€å­¦ä¹ çš„ä¸ƒä¸ªé˜¶æ®µå°±å…¨éƒ¨ç»“æŸäº†ï¼é€šè¿‡è¿™ä¸ƒä¸ªé˜¶æ®µçš„å­¦ä¹ ï¼Œä½ å·²ç»æŒæ¡äº†Pythonçš„æ ¸å¿ƒåŸºç¡€è¯­æ³•ã€æ¨¡å—åŒ–ç¼–ç¨‹ã€é¢å‘å¯¹è±¡ã€å®æˆ˜å·¥å…·ã€ç½‘ç»œä¸å¹¶å‘åŸºç¡€ï¼Œå…·å¤‡äº†ç‹¬ç«‹ç¼–å†™ç®€å•Pythoné¡¹ç›®çš„èƒ½åŠ›ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œä½ å¯ä»¥å°è¯•æŒ‘æˆ˜ç®€å•çš„å®æˆ˜é¡¹ç›®ï¼ˆæ¯”å¦‚å­¦ç”Ÿç®¡ç†ç³»ç»Ÿã€é€šè®¯å½•ã€ç®€æ˜“çˆ¬è™«ã€éªŒè¯ç ç”Ÿæˆå™¨ï¼‰ï¼Œå°†ä¸ƒä¸ªé˜¶æ®µçš„çŸ¥è¯†ç»¼åˆè¿ç”¨ï¼ŒæŸ¥æ¼è¡¥ç¼ºã€‚åç»­æˆ‘ä»¬è¿˜ä¼šè¿›å…¥Pythonè¿›é˜¶å­¦ä¹ é˜¶æ®µï¼Œå­¦ä¹ æ›´å¤æ‚çš„æ¡†æ¶ã€é¡¹ç›®å¼€å‘æŠ€å·§ï¼Œç»§ç»­åŠ æ²¹ï¼Œä½ å·²ç»ç¦»â€œåˆæ ¼çš„Pythonå¼€å‘è€…â€è¶Šæ¥è¶Šè¿‘å•¦ï½</p>
<hr/>
<p><em>è½¬å‘è¯·æºå¸¦ä½œè€…ä¿¡æ¯</em>  <strong>@æ€’æ”¾å§å¾·å¾· @ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº</strong><br/>
æŒç»­åˆ›ä½œå¾ˆä¸å®¹æ˜“ï¼Œä½œè€…å°†ä»¥å°½å¯èƒ½çš„è¯¦ç»†æŠŠæ‰€å­¦çŸ¥è¯†åˆ†äº«å„ä½å¼€å‘è€…ï¼Œä¸€èµ·è¿›æ­¥ä¸€èµ·å­¦ä¹ ã€‚<strong>è½¬è½½è¯·æºå¸¦é“¾æ¥ï¼Œè½¬è½½åˆ°å¾®ä¿¡å…¬ä¼—å·è¯·å‹¿é€‰æ‹©åŸåˆ›ï¼Œè°¢è°¢ï¼</strong><br/>
ğŸ‘åˆ›ä½œä¸æ˜“ï¼Œå¦‚æœ‰é”™è¯¯è¯·æŒ‡æ­£ï¼Œæ„Ÿè°¢è§‚çœ‹ï¼è®°å¾—ç‚¹èµå“¦ï¼ğŸ‘<br/>
è°¢è°¢æ”¯æŒï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[hCaptcha éªŒè¯ç å›¾åƒè¯†åˆ« API å¯¹æ¥æ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7604793276907257919</link>    <guid>https://juejin.cn/post/7604793276907257919</guid>    <pubDate>2026-02-10T08:05:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604793276907257919" data-draft-id="7604793276907241535" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="hCaptcha éªŒè¯ç å›¾åƒè¯†åˆ« API å¯¹æ¥æ•™ç¨‹"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-10T08:05:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å´”åº†æ‰ä¸¨é™è§…"/> <meta itemprop="url" content="https://juejin.cn/user/1521379821230269"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            hCaptcha éªŒè¯ç å›¾åƒè¯†åˆ« API å¯¹æ¥æ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379821230269/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å´”åº†æ‰ä¸¨é™è§…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T08:05:43.000Z" title="Tue Feb 10 2026 08:05:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡å°†ä»‹ç»ä¸€ç§ hCaptcha å›¾åƒè¯†åˆ« API å¯¹æ¥è¯´æ˜ï¼Œå®ƒå¯ä»¥é€šè¿‡ç”¨æˆ·è¾“å…¥è¯†åˆ«çš„å†…å®¹å’Œ hCaptchaéªŒè¯ç å›¾åƒï¼Œæœ€åè¿”å›éœ€è¦ç‚¹å‡»çš„å°å›¾åƒçš„åæ ‡ï¼Œå®ŒæˆéªŒè¯ã€‚</p>
<h2 data-id="heading-0">ç”³è¯·æµç¨‹</h2>
<p>è¦ä½¿ç”¨ APIï¼Œéœ€è¦å…ˆåˆ° <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fdocuments%2Fc9a5cc2f-e410-425f-857a-f8700205da6c%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6" target="_blank" title="https://platform.acedata.cloud/documents/c9a5cc2f-e410-425f-857a-f8700205da6c?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6" ref="nofollow noopener noreferrer">hCaptcha å›¾åƒè¯†åˆ« API</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fdocuments%2Fc9a5cc2f-e410-425f-857a-f8700205da6c%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6%3Finviter_id%3Db87f67c1-b04f-4332-99a1-7a5e651331c6" target="_blank" title="https://platform.acedata.cloud/documents/c9a5cc2f-e410-425f-857a-f8700205da6c?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6?inviter_id=b87f67c1-b04f-4332-99a1-7a5e651331c6" ref="nofollow noopener noreferrer">platform.acedata.cloud/documents/câ€¦</a> å¯¹åº”é¡µé¢ç”³è¯·å¯¹åº”çš„æœåŠ¡ï¼Œè¿›å…¥é¡µé¢ä¹‹åï¼Œç‚¹å‡»ã€ŒAcquireã€æŒ‰é’®ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://cdn.acedata.cloud/q6ytrc.png" alt="" loading="lazy"/></p>
<p>å¦‚æœä½ å°šæœªç™»å½•æˆ–æ³¨å†Œï¼Œä¼šè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢é‚€è¯·æ‚¨æ¥æ³¨å†Œå’Œç™»å½•ï¼Œç™»å½•æ³¨å†Œä¹‹åä¼šè‡ªåŠ¨è¿”å›å½“å‰é¡µé¢ã€‚</p>
<p>åœ¨é¦–æ¬¡ç”³è¯·æ—¶ä¼šæœ‰å…è´¹é¢åº¦èµ é€ï¼Œå¯ä»¥å…è´¹ä½¿ç”¨è¯¥ APIã€‚</p>
<h2 data-id="heading-1">åŸºæœ¬ä½¿ç”¨</h2>
<p>é¦–å…ˆå…ˆäº†è§£ä¸‹åŸºæœ¬çš„ä½¿ç”¨æ–¹å¼ï¼Œå°±æ˜¯è¾“å…¥éœ€è¦å¤„ç† hCaptchaéªŒè¯ç å›¾åƒï¼Œä¾¿å¯è·å¾—å¤„ç†åçš„ç»“æœï¼Œé¦–å…ˆéœ€è¦ç®€å•åœ°ä¼ é€’ä¸€ä¸ª <code>queries</code> å­—æ®µï¼Œè¿™ä¸ªå°±æ˜¯å…·ä½“hCaptchaéªŒè¯ç å›¾åƒï¼Œæˆ‘ä»¬éœ€è¦å»ä¸€ä¸ªæœ‰hCaptchaéªŒè¯ç ç½‘ç«™ä¸­æˆªå–è¿™ä¸ªéªŒè¯ç å›¾ç‰‡ï¼Œç¤ºä¾‹ç½‘ç«™é“¾æ¥ä¸ºï¼š <code>https://democaptcha.com/demo-form-eng/hcaptcha.html</code>ï¼Œç‚¹å‡»å¤é€‰æ¡†å³å¯æ˜¾ç¤ºå…·ä½“çš„å®Œæ•´éªŒè¯ç å›¾ç‰‡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://cdn.acedata.cloud/xryo59.png" width="500" class="m-auto" loading="lazy"/></p>
<p>å…¶ä¸­<code>queries</code> å­—æ®µæ˜¯ä¸Šæ–‡ä¸­éªŒè¯ç å›¾åƒçš„æˆªå›¾ï¼Œå›¾ç‰‡å¤§å°å»ºè®®ä¸è¦è¶…è¿‡100kbï¼Œè¿˜éœ€è¦å¯¹ä¸Šé¢å›¾ç‰‡çº¢è‰²ç®­å¤´æŒ‡å‘çš„åŒºåŸŸè¿›è¡Œæˆªå›¾ï¼Œå¹¶ä¸”è¿˜éœ€è¦ä½ è‡ªè¡Œå‹ç¼©å›¾ç‰‡å¤§å°ï¼Œå¹¶ä¸”è¿˜éœ€è¦å°†å®ƒè½¬æ¢ä¸ºBase64ç¼–ç ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://cdn.acedata.cloud/g8ikkb.png" width="500" class="m-auto" loading="lazy"/></p>
<p>åŒæ—¶è¿˜éœ€è¦è¾“å…¥è·ŸéªŒè¯ç å›¾åƒç›¸å…³çš„è¯†åˆ«å†…å®¹å‚æ•° <code>question</code>ï¼Œè¿™ä¸ªæ”¯æŒä¸­è‹±æ–‡ç¿»è¯‘ï¼Œå¯ä»¥ç›´æ¥ä¼ ç›¸å…³çš„è¯†åˆ«å†…å®¹ï¼Œç”±ä¸Šæ–‡ç½‘é¡µå›¾åƒä¸­é»„è‰²ç®­å¤´æ‰§è¡Œçš„å†…å®¹å¯ä»¥çœ‹å‡º <code>question</code> è¾“å…¥çš„åº”ä¸º <code>Please click on the UNIQUE object among the others.</code>ã€‚å…·ä½“çš„å†…å®¹å¦‚ä¸‹ï¼š</p>
<p><img src="https://cdn.acedata.cloud/empncr.png" width="500" class="m-auto" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°è¿™é‡Œæˆ‘ä»¬è®¾ç½®äº† Request Headersï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><code>accept</code>ï¼šæƒ³è¦æ¥æ”¶æ€æ ·æ ¼å¼çš„å“åº”ç»“æœï¼Œè¿™é‡Œå¡«å†™ä¸º <code>application/json</code>ï¼Œå³ JSON æ ¼å¼ã€‚</li>
<li><code>authorization</code>ï¼šè°ƒç”¨ API çš„å¯†é’¥ï¼Œç”³è¯·ä¹‹åå¯ä»¥ç›´æ¥ä¸‹æ‹‰é€‰æ‹©ã€‚</li>
</ul>
<p>å¦å¤–è®¾ç½®äº† Request Bodyï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><code>queries</code>ï¼šBase64ç¼–ç çš„éªŒè¯ç å›¾åƒåˆ—è¡¨ã€‚</li>
<li><code>question</code>ï¼šéªŒè¯ç å›¾åƒç›¸å…³çš„è¯†åˆ«å†…å®¹å‚æ•°ï¼Œæ”¯æŒç›´æ¥è¾“å…¥ä¸­è‹±æ–‡ã€‚</li>
</ul>
<p>é€‰æ‹©ä¹‹åï¼Œå¯ä»¥å‘ç°å³ä¾§ä¹Ÿç”Ÿæˆäº†å¯¹åº”ä»£ç ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://cdn.acedata.cloud/bww9b0.png" width="500" class="m-auto" loading="lazy"/></p>
<p>ç‚¹å‡»ã€ŒTryã€æŒ‰é’®å³å¯è¿›è¡Œæµ‹è¯•ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè¿™é‡Œæˆ‘ä»¬å°±å¾—åˆ°äº†å¦‚ä¸‹ç»“æœï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"solution"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Please click on the UNIQUE object among the others"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"box"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"360"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"276"</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"confidences"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.6354503631591797</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿”å›ç»“æœä¸€å…±æœ‰å¤šä¸ªå­—æ®µï¼Œä»‹ç»å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>solution</code>ï¼Œæ­¤æ¬¡ hCaptchaéªŒè¯ç å›¾åƒ ä»»åŠ¡å¤„ç†åéªŒè¯ç»“æœã€‚
<ul>
<li><code>label</code>ï¼ŒhCaptchaéªŒè¯ç å›¾åƒæ‰€è¯†åˆ«çš„å†…å®¹ã€‚</li>
<li><code>box</code>ï¼ŒhCaptchaéªŒè¯ç å›¾åƒè¯†åˆ«ç»“æœçš„ä½ç½®ä¿¡æ¯ï¼Œå®ƒæ˜¯ç”±å›¾åƒçš„åæ ‡ä¿¡æ¯æ„æˆã€‚</li>
<li><code>confidences</code>ï¼ŒhCaptchaéªŒè¯ç å›¾åƒè¯†åˆ«åæ»¡è¶³è¯†åˆ«å†…å®¹çš„çš„ç½®ä¿¡åº¦ã€‚</li>
</ul>
</li>
</ul>
<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å¾—åˆ°äº†å¤„ç† hCaptchaéªŒè¯ç å›¾åƒ çš„éªŒè¯ç»“æœï¼Œæˆ‘ä»¬åªéœ€è¦æ ¹æ®ç»“æœä¸­ <code>box</code> çš„ä½ç½®åæ ‡ä¿¡æ¯å¯¹è¯¥éªŒè¯ç å›¾åƒè¿›è¡Œæ¨¡æ‹Ÿç‚¹å‡»è¯¥åŒºåŸŸä¾¿å¯é€šè¿‡éªŒè¯ã€‚</p>
<p>ä¸‹é¢å°†ä»‹ç»å¦‚ä½•é€šè¿‡ç»“æœçš„ <code>box</code> çš„ä½ç½®ä¿¡æ¯å¦‚ä½•æ¥ç‚¹å‡»ï¼Œé¦–å…ˆæ˜¯é’ˆå¯¹ä¸Šä¼ çš„éªŒè¯ç å›¾ç‰‡è¿›è¡Œå»ºç«‹ç›´è§’åæ ‡ç³»ï¼Œå…¶ä¸­ä¸­å¿ƒåŸç‚¹åœ¨å›¾åƒçš„å·¦ä¸‹è§’ï¼Œ360æ˜¯å¯¹åº”çš„æ¨ªåæ ‡ï¼Œ276æ˜¯å¯¹åº”çš„çºµåæ ‡ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡æ¨¡æ‹Ÿç‚¹å‡»éªŒè¯ç å¯¹åº”çš„åæ ‡è¿›è¡Œç‚¹å‡»å³å¯ï¼Œå…·ä½“çš„å›¾åƒä¿¡æ¯å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://cdn.acedata.cloud/4ykvbl.png" width="500" class="m-auto" loading="lazy"/></p>
<p>å¦å¤–å¦‚æœæƒ³ç”Ÿæˆå¯¹åº”çš„å¯¹æ¥ä»£ç ï¼Œå¯ä»¥ç›´æ¥å¤åˆ¶ç”Ÿæˆï¼Œä¾‹å¦‚ CURL çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">curl -X POST 'https://api.acedata.cloud/captcha/recognition/hcaptcha' \
-H 'accept: application/json' \
-H 'authorization: Bearer {token}' \
-H 'content-type: application/json' \
-d '{
  "question": "Please click on the UNIQUE object among the others.",
  "queries": ["iVBORw0KGgoAAAANSU.....eY+85KVlzKHav28uq/WLVhL2kHUlFMKUcZbL31S8bpd0pEPKxNllXAE2wgu3uEfj+BfAzOGelsQNFAAAAAElFTkSuQmCC"]
}'
}'
</code></pre>
<p>Python çš„å¯¹æ¥ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> requests

url = <span class="hljs-string">"https://api.acedata.cloud/captcha/recognition/hcaptcha"</span>

headers = {
    <span class="hljs-string">"accept"</span>: <span class="hljs-string">"application/json"</span>,
    <span class="hljs-string">"authorization"</span>: <span class="hljs-string">"Bearer {token}"</span>,
    <span class="hljs-string">"content-type"</span>: <span class="hljs-string">"application/json"</span>
}

payload = {
    <span class="hljs-string">"question"</span>: <span class="hljs-string">"Please click on the UNIQUE object among the others."</span>,
    <span class="hljs-string">"queries"</span>: [<span class="hljs-string">"iVBORw0KGgoAAAANSU.....eY+85KVlzKHav28uq/WLVhL2kHUlFMKUcZbL31S8bpd0pEPKxNllXAE2wgu3uEfj+BfAzOGelsQNFAAAAAElFTkSuQmCC"</span>]
}

response = requests.post(url, json=payload, headers=headers)
<span class="hljs-built_in">print</span>(response.text)
</code></pre>
<h2 data-id="heading-2">é”™è¯¯å¤„ç†</h2>
<p>åœ¨è°ƒç”¨ API æ—¶ï¼Œå¦‚æœé‡åˆ°é”™è¯¯ï¼ŒAPI ä¼šè¿”å›ç›¸åº”çš„é”™è¯¯ä»£ç å’Œä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li><code>400 token_mismatched</code>ï¼šBad request, possibly due to missing or invalid parameters.</li>
<li><code>400 api_not_implemented</code>ï¼šBad request, possibly due to missing or invalid parameters.</li>
<li><code>401 invalid_token</code>ï¼šUnauthorized, invalid or missing authorization token.</li>
<li><code>429 too_many_requests</code>ï¼šToo many requests, you have exceeded the rate limit.</li>
<li><code>500 api_error</code>ï¼šInternal server error, something went wrong on the server.</li>
</ul>
<h3 data-id="heading-3">é”™è¯¯å“åº”ç¤ºä¾‹</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"success"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"error"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"api_error"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"fetch failed"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"trace_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2cf86e86-22a4-46e1-ac2f-032c0f2a4e89"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-4">ç»“è®º</h2>
<p>é€šè¿‡æœ¬æ–‡æ¡£ï¼Œæ‚¨å·²ç»äº†è§£äº†å¦‚ä½•ä½¿ç”¨ hCaptcha å›¾åƒè¯†åˆ« API è®©ç”¨æˆ·è¾“å…¥è¯†åˆ«çš„å†…å®¹å’Œ hCaptchaéªŒè¯ç å›¾åƒï¼Œæœ€åè¿”å›éœ€è¦ç‚¹å‡»çš„å°å›¾åƒçš„åæ ‡ï¼Œå®ŒæˆéªŒè¯ã€‚å¸Œæœ›æœ¬æ–‡æ¡£èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°å¯¹æ¥å’Œä½¿ç”¨è¯¥ APIã€‚å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·éšæ—¶è”ç³»æˆ‘ä»¬çš„æŠ€æœ¯æ”¯æŒå›¢é˜Ÿã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - çŠ¶æ€æ•°æ®è®¾è®¡ [8 - 4]ï¼šæœ‰é™çŠ¶æ€æœº (FSM) åœ¨å¤æ‚å‰ç«¯é€»è¾‘ä¸­çš„åº”ç”¨]]></title>    <link>https://juejin.cn/post/7604039449468977202</link>    <guid>https://juejin.cn/post/7604039449468977202</guid>    <pubDate>2026-02-09T07:09:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604039449468977202" data-draft-id="7604344066580217907" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - çŠ¶æ€æ•°æ®è®¾è®¡ [8 - 4]ï¼šæœ‰é™çŠ¶æ€æœº (FSM) åœ¨å¤æ‚å‰ç«¯é€»è¾‘ä¸­çš„åº”ç”¨"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-09T07:09:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ç‹å£®å£®"/> <meta itemprop="url" content="https://juejin.cn/user/4473272506789485"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - çŠ¶æ€æ•°æ®è®¾è®¡ [8 - 4]ï¼šæœ‰é™çŠ¶æ€æœº (FSM) åœ¨å¤æ‚å‰ç«¯é€»è¾‘ä¸­çš„åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4473272506789485/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ç‹å£®å£®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T07:09:41.000Z" title="Mon Feb 09 2026 07:09:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><blockquote>
<p><strong>å†™åœ¨å‰é¢</strong></p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªâ€œè‡ªåŠ¨é©¾é©¶â€ç³»ç»Ÿã€‚</p>
<p>ä½ ç»ä¸ä¼šç”¨ <code>if (isAccelerating &amp;&amp; !isBraking)</code> æ¥æ§åˆ¶æ±½è½¦ã€‚ä½ ä¼šå®šä¹‰æ¸…æ™°çš„çŠ¶æ€ï¼š<code>Driving</code>ã€<code>Braking</code>ã€<code>Parked</code>ã€‚å› ä¸ºåœ¨ <code>Parked</code>ï¼ˆåœè½¦ï¼‰çŠ¶æ€ä¸‹ï¼Œè¸©æ²¹é—¨æ˜¯ä¸åº”è¯¥æœ‰ååº”çš„ã€‚</p>
<p><strong>å‰ç«¯ä¸šåŠ¡é€»è¾‘å…¶å®å°±æ˜¯ä¸€å¥—äº¤äº’ç³»ç»Ÿã€‚</strong></p>
<p>é—æ†¾çš„æ˜¯ï¼Œå¤§éƒ¨åˆ†å‰ç«¯ä»£ç éƒ½åœ¨ç”¨â€œé›¶æ•£çš„å¸ƒå°”å€¼â€æ¥æ¨¡æ‹ŸçŠ¶æ€ï¼Œè¿™å¯¼è‡´é€»è¾‘æéš¾æµ‹è¯•ï¼Œä¸”éšè—ç€å·¨å¤§çš„çŠ¶æ€å†²çªé£é™©ã€‚</p>
<p>çœŸæ­£ä¼˜é›…çš„æ¶æ„ï¼Œåº”è¯¥æŠŠé€»è¾‘æŠ½è±¡æˆä¸€å¼ <strong>å›¾</strong>ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34e3973e4ef647968a3419a309faa8ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv546L5aOu5aOu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771225781&amp;x-signature=XYmF42SkctIieosI40qvbjT8EYE%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ ä¸ºä»€ä¹ˆå¸ƒå°”å€¼ä¼šå¯¼è‡´â€œçŠ¶æ€çˆ†ç‚¸â€ï¼Ÿ</h2>
<p>å‡è®¾ä½ æœ‰ä¸€ä¸ªæå…¶ç®€å•çš„â€œæœç´¢æ¡†â€ã€‚</p>
<p>ä½ å®šä¹‰äº†ä¸‰ä¸ªå˜é‡ï¼š<code>loading</code> (åŠ è½½ä¸­)ã€<code>error</code> (æŠ¥é”™)ã€<code>results</code> (æ•°æ®)ã€‚</p>
<p>ç†è®ºä¸Šè¿™åªæœ‰ 3 ä¸ªå˜é‡ï¼Œä½†å®ƒä»¬çš„ç»„åˆå¯èƒ½æœ‰ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>3</mn></msup><mo>=</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">2^3 = 8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"/><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">8</span></span></span></span></span> ç§ã€‚</p>
<ul>
<li><code>loading: true, error: true</code> â€”â€” è¿™ä»£è¡¨ä»€ä¹ˆï¼Ÿä¸€è¾¹æŠ¥é”™ä¸€è¾¹åŠ è½½ï¼Ÿ</li>
<li><code>loading: false, error: false, results: []</code> â€”â€” è¿™æ˜¯åˆå§‹çŠ¶æ€ï¼Ÿè¿˜æ˜¯æ²¡æœåˆ°ç»“æœï¼Ÿ</li>
</ul>
<p>éšç€ä¸šåŠ¡é€»è¾‘å¢åŠ ï¼ˆæ¯”å¦‚å¢åŠ äº†â€œå–æ¶ˆè¯·æ±‚â€ã€â€œé‡è¯•â€ã€â€œåˆ†æ­¥æ ¡éªŒâ€ï¼‰ï¼Œå¸ƒå°”å€¼çš„ç»„åˆä¼šæŒ‡æ•°çº§å¢é•¿ã€‚è¿™å°±æ˜¯ <strong>â€œçŠ¶æ€çˆ†ç‚¸â€</strong> ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€ æœ‰é™çŠ¶æ€æœº (FSM) çš„æ ¸å¿ƒæ¦‚å¿µ</h2>
<p>æœ‰é™çŠ¶æ€æœºä¸æ˜¯ä¸€ä¸ªåº“ï¼Œè€Œæ˜¯ä¸€ä¸ªæ•°å­¦æ¨¡å‹ã€‚å®ƒåŒ…å«å››ä¸ªè¦ç´ ï¼š</p>
<ol>
<li><strong>State (çŠ¶æ€):</strong> ä½ çš„åº”ç”¨å½“å‰åœ¨å“ªï¼Ÿï¼ˆå¦‚ï¼š<code>idle</code>ã€<code>loading</code>ã€<code>success</code>ã€<code>failure</code>ï¼‰ã€‚<strong>åŒä¸€æ—¶é—´åªèƒ½å¤„åœ¨ä¸€ä¸ªçŠ¶æ€ã€‚</strong></li>
<li><strong>Event (äº‹ä»¶):</strong> å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿï¼ˆå¦‚ï¼š<code>SEARCH</code>ã€<code>CANCEL</code>ã€<code>RESOLVE</code>ï¼‰ã€‚</li>
<li><strong>Transition (è½¬æ¢):</strong> çŠ¶æ€æ”¹å˜çš„è§„åˆ™ã€‚ä¾‹å¦‚ï¼šåœ¨ <code>loading</code> çŠ¶æ€ä¸‹æ”¶åˆ° <code>CANCEL</code> äº‹ä»¶ï¼Œè½¬ä¸º <code>idle</code>ã€‚</li>
<li><strong>Action (åŠ¨ä½œ):</strong> è½¬æ¢æ—¶è§¦å‘çš„å‰¯ä½œç”¨ã€‚ä¾‹å¦‚ï¼šè¿›å…¥ <code>loading</code> çŠ¶æ€æ—¶ï¼Œå‘èµ· API è¯·æ±‚ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€ å®æˆ˜ï¼šç”¨ XState ç»ˆç»“é€»è¾‘ä¹±éº»</h2>
<p>åœ¨ JS ç”Ÿæ€ä¸­ï¼Œ<strong>XState</strong> æ˜¯çŠ¶æ€æœºçš„é›†å¤§æˆè€…ã€‚æˆ‘ä»¬æ¥çœ‹å¦‚ä½•é‡æ„ä¸€ä¸ªå¤æ‚çš„â€œæ–‡ä»¶ä¸Šä¼ â€é€»è¾‘ã€‚</p>
<h3 data-id="heading-3">3.1 å®šä¹‰çŠ¶æ€å›¾</h3>
<p>ä¸å…¶å†™ä¸€å † <code>if/else</code>ï¼Œä¸å¦‚å…ˆæŠŠå›¾ç”»å‡ºæ¥ï¼š</p>
<pre><code class="hljs language-php" lang="php">import { createMachine, interpret } <span class="hljs-keyword">from</span> <span class="hljs-string">'xstate'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">uploadMachine</span> = <span class="hljs-title function_ invoke__">createMachine</span>({
  <span class="hljs-attr">id</span>: <span class="hljs-string">'upload'</span>,
  <span class="hljs-attr">initial</span>: <span class="hljs-string">'idle'</span>, // åˆå§‹ï¼šé—²ç½®
  <span class="hljs-attr">states</span>: {
    <span class="hljs-attr">idle</span>: {
      <span class="hljs-attr">on</span>: { <span class="hljs-attr">SUBMIT</span>: <span class="hljs-string">'validating'</span> } // æ”¶åˆ°æäº¤äº‹ä»¶ -&gt; è¿›å…¥æ ¡éªŒ
    },
    <span class="hljs-attr">validating</span>: {
      <span class="hljs-attr">on</span>: {
        <span class="hljs-attr">VALID_SUCCESS</span>: <span class="hljs-string">'uploading'</span>, // æ ¡éªŒæˆåŠŸ -&gt; å¼€å§‹ä¸Šä¼ 
        <span class="hljs-attr">VALID_FAIL</span>: <span class="hljs-string">'error'</span>         // æ ¡éªŒå¤±è´¥ -&gt; æŠ¥é”™
      }
    },
    <span class="hljs-attr">uploading</span>: {
      <span class="hljs-attr">on</span>: {
        <span class="hljs-attr">FINISH</span>: <span class="hljs-string">'success'</span>,
        <span class="hljs-attr">FAIL</span>: <span class="hljs-string">'error'</span>,
        <span class="hljs-attr">CANCEL</span>: <span class="hljs-string">'idle'</span> // ä¸Šä¼ ä¸­é€”å–æ¶ˆ -&gt; å›åˆ°é—²ç½®
      }
    },
    <span class="hljs-attr">success</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'final'</span> // ç»ˆæ€
    },
    <span class="hljs-attr">error</span>: {
      <span class="hljs-attr">on</span>: { <span class="hljs-attr">RETRY</span>: <span class="hljs-string">'uploading'</span> } // æŠ¥é”™åå¯ä»¥é‡è¯•
    }
  }
});
</code></pre>
<h3 data-id="heading-4">3.2 æ¶æ„å±‚é¢çš„æ”¶ç›Š</h3>
<ul>
<li><strong>é˜²å¾¡æ€§ç¼–ç¨‹ï¼š</strong> åœ¨ <code>success</code> çŠ¶æ€ä¸‹ï¼Œå“ªæ€•ç”¨æˆ·ç–¯ç‹‚ç‚¹å‡» <code>SUBMIT</code> æŒ‰é’®ï¼ŒçŠ¶æ€æœºä¹Ÿä¼šè‡ªåŠ¨å¿½ç•¥è¿™ä¸ªäº‹ä»¶ï¼Œå› ä¸º <code>success</code> çŠ¶æ€ä¸‹æ²¡æœ‰å®šä¹‰å¤„ç† <code>SUBMIT</code> çš„è½¬æ¢ã€‚</li>
<li><strong>é€»è¾‘å¯è§†åŒ–ï¼š</strong> XState æä¾›å¯è§†åŒ–å·¥å…·ï¼Œä½ å¯ä»¥ç›´æ¥æŠŠä»£ç ç”Ÿæˆçš„å›¾å‘ç»™äº§å“ç»ç†ç¡®è®¤ï¼šâ€œä½ çœ‹ï¼Œè¿™æ˜¯ä¸æ˜¯æˆ‘ä»¬è¦çš„ä¸šåŠ¡æµç¨‹ï¼Ÿâ€</li>
</ul>
<hr/>
<h2 data-id="heading-5">å››ã€ ä»€ä¹ˆæ—¶å€™è¯¥å¼•å…¥çŠ¶æ€æœºï¼Ÿ</h2>
<p>å¹¶ä¸æ˜¯æ‰€æœ‰çš„ç»„ä»¶éƒ½éœ€è¦çŠ¶æ€æœºã€‚ä½œä¸ºæ¶æ„å¸ˆï¼Œä½ éœ€è¦è¯†åˆ«**â€œé«˜ä»·å€¼é€»è¾‘â€**ã€‚</p>
<h3 data-id="heading-6">4.1 æ¨èä½¿ç”¨åœºæ™¯ï¼š</h3>
<ol>
<li><strong>å¤šæ­¥éª¤æµç¨‹ï¼š</strong> æ³¨å†Œæµç¨‹ã€ç»“è´¦é“¾è·¯ã€å¤šæ­¥è¡¨å•ã€‚</li>
<li><strong>å¤æ‚æƒé™äº¤äº’ï¼š</strong> æ¯”å¦‚ä¸€ä¸ªæŒ‰é’®ï¼Œæ ¹æ®ç™»å½•çŠ¶æ€ã€ç”¨æˆ·ç­‰çº§ã€è´¦æˆ·ä½™é¢ã€æ´»åŠ¨æ˜¯å¦å¼€å§‹ï¼Œæœ‰äº”å…­ç§æ˜¾ç¤ºé€»è¾‘ã€‚</li>
<li><strong>æ ¸å¿ƒæ”¯ä»˜/ä¸Šä¼ ï¼š</strong> ç»ä¸å…è®¸å‡ºç°éæ³•çŠ¶æ€è½¬æ¢çš„åœºæ™¯ã€‚</li>
<li><strong>æ¸¸æˆé€»è¾‘æˆ–å¤æ‚åŠ¨æ•ˆï¼š</strong> çŠ¶æ€è½¬æ¢ä¹‹é—´æœ‰ä¸¥æ ¼çš„æ—¶é—´é¡ºåºã€‚</li>
</ol>
<h3 data-id="heading-7">4.2 ä»€ä¹ˆæ—¶å€™ä¸ç”¨ï¼Ÿ</h3>
<p>ç®€å•çš„å¼€å…³ï¼ˆToggleï¼‰ã€å•çº¯çš„ CRUD åˆ—è¡¨å±•ç¤ºï¼Œç›´æ¥ç”¨ <code>useState</code> æˆ– TanStack Query å°±è¶³å¤Ÿäº†ã€‚</p>
<hr/>
<h2 data-id="heading-8">äº”ã€ çŠ¶æ€æœº vs. çŠ¶æ€ç®¡ç†åº“</h2>
<p>è¿™æ˜¯å¾ˆå¤šäººçš„è¯¯åŒºã€‚<strong>çŠ¶æ€æœºä¸æ˜¯ Redux çš„æ›¿ä»£å“ã€‚</strong></p>
<ul>
<li><strong>Redux/Zustand</strong> æ˜¯â€œä»“åº“â€ï¼šè´Ÿè´£<strong>å­˜</strong>æ•°æ®ã€‚</li>
<li><strong>XState</strong> æ˜¯â€œå¤§è„‘â€ï¼šè´Ÿè´£<strong>ç®¡</strong>é€»è¾‘ã€‚</li>
</ul>
<p><strong>æ¶æ„æ¨¡å¼ï¼š</strong> ä½ å¯ä»¥åœ¨ Zustand é‡Œé¢è·‘ä¸€ä¸ª XStateã€‚XState è´Ÿè´£è®¡ç®—å½“å‰åº”è¯¥æ˜¯å“ªä¸ªçŠ¶æ€ï¼Œç„¶åæŠŠæœ€ç»ˆçš„ç»“æœï¼ˆå¦‚å½“å‰æ˜¯å“ªä¸ª Tabï¼Œè¦æ˜¾ç¤ºå“ªä¸ªæ–‡æ¡ˆï¼‰æ›´æ–°åˆ° Zustand ä¸­ä¾›å…¨å±€ä½¿ç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-9">ç»“è¯­ï¼šè¿ˆå‘â€œå¯é¢„æµ‹â€çš„æ¶æ„</h2>
<p>æˆ‘ä»¬åœ¨ç¬¬å…«é˜¶æ®µå®Œæˆäº†å¯¹æ•°æ®æµçš„å…¨é¢é‡æ„ï¼š</p>
<ol>
<li><strong>å“²å­¦ä¸Šï¼š</strong> é€‰æ‹©äº†é€‚åˆä¸šåŠ¡çš„æ¨¡å¼ï¼ˆRedux/Atomicï¼‰ã€‚</li>
<li><strong>æ€§èƒ½ä¸Šï¼š</strong> ç†è§£äº†ç»†ç²’åº¦æ›´æ–°ï¼ˆSignalsï¼‰çš„å†…æ ¸ã€‚</li>
<li><strong>ç»“æ„ä¸Šï¼š</strong> å‰¥ç¦»äº† API æ•°æ®ï¼ˆTanStack Queryï¼‰ã€‚</li>
<li><strong>é€»è¾‘ä¸Šï¼š</strong> ç”¨çŠ¶æ€æœºï¼ˆFSMï¼‰æ›¿ä»£äº†å¸ƒå°”å€¼åœ°ç‹±ã€‚</li>
</ol>
<p>è‡³æ­¤ï¼Œä½ çš„å‰ç«¯åº”ç”¨å·²ç»åƒä¸€å°ç²¾å¯†è¿è¡Œçš„ç‘å£«é’Ÿè¡¨ï¼šæ¯ä¸€æ»´æ°´çš„æµå‘ï¼ˆæ•°æ®ï¼‰éƒ½æ˜¯å¯è¿½è¸ªçš„ï¼Œæ¯ä¸€ä¸ªé½¿è½®çš„è½¬åŠ¨ï¼ˆé€»è¾‘ï¼‰éƒ½æ˜¯å¯é¢„æµ‹çš„ã€‚</p>
<blockquote>
<p><strong>Next Step:</strong></p>
<p>ä¸‹ä¸€ä¸ªé˜¶æ®µï¼Œæˆ‘ä»¬å°†è·³å‡ºçº¯ä»£ç å±‚é¢ï¼Œè¿›å…¥**ã€Šç¬¬ä¹é˜¶æ®µï¼šå‰ç«¯å·¥ç¨‹åŒ–ä½“ç³»ä¸å…¨é“¾è·¯è´¨é‡ä¿éšœã€‹ <strong>ã€‚ æˆ‘ä»¬å°†æ¢è®¨ï¼šå¦‚ä½•æ­å»ºä¸€å¥—è®© 50 äººçš„å›¢é˜Ÿåä½œè€Œä¸æ‰“æ¶çš„ Monorepo ä½“ç³»ï¼Ÿå¦‚ä½•è®¾è®¡è‡ªåŠ¨åŒ–çš„ CI/CD æµç¨‹ï¼Œè®©æ€§èƒ½åŠ£åŒ–å’Œ Bug åœ¨åˆå¹¶ä»£ç å‰å°±è¢«å‡»æ¯™ï¼Ÿ ç¬¬ä¸€ç¯‡ï¼Œæˆ‘ä»¬å°†èŠèŠ</strong>ã€Šæ¶æ„çš„åœ°åŸºï¼šåŸºäº Turborepo ä¸ pnpm çš„ç°ä»£ Monorepo ä¼ä¸šçº§å®æˆ˜ã€‹**ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#11-ImmutableçŠ¶æ€ç»´æŠ¤ä¸å¢é‡æ¸²æŸ“]]></title>    <link>https://juejin.cn/post/7604084016510353449</link>    <guid>https://juejin.cn/post/7604084016510353449</guid>    <pubDate>2026-02-09T02:48:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604084016510353449" data-draft-id="7603895839557419071" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#11-ImmutableçŠ¶æ€ç»´æŠ¤ä¸å¢é‡æ¸²æŸ“"/> <meta itemprop="keywords" content="å‰ç«¯,æ¶æ„,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2026-02-09T02:48:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="WindRunnerMax"/> <meta itemprop="url" content="https://juejin.cn/user/1829999989247214"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#11-ImmutableçŠ¶æ€ç»´æŠ¤ä¸å¢é‡æ¸²æŸ“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1829999989247214/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    WindRunnerMax
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T02:48:19.000Z" title="Mon Feb 09 2026 02:48:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    39
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å…ˆå‰æˆ‘ä»¬è®¨è®ºäº†è§†å›¾å±‚çš„é€‚é…å™¨è®¾è®¡ï¼Œä¸»è¦æ˜¯å…¨é‡çš„è§†å›¾åˆå§‹åŒ–æ¸²æŸ“ï¼ŒåŒ…æ‹¬ç”Ÿå‘½å‘¨æœŸåŒæ­¥ã€çŠ¶æ€ç®¡ç†ã€æ¸²æŸ“æ¨¡å¼ã€<code>DOM</code>æ˜ å°„çŠ¶æ€ç­‰ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦å¤„ç†å˜æ›´çš„å¢é‡æ›´æ–°ï¼Œè¿™å±äºæ€§èƒ½æ–¹é¢çš„è€ƒé‡ï¼Œéœ€è¦è€ƒè™‘å¦‚ä½•å®ç°ä¸å¯å˜çš„çŠ¶æ€å¯¹è±¡ï¼Œä»¥æ­¤æ¥å®ç°<code>Op</code>æ“ä½œä»¥åŠæœ€å°åŒ–<code>DOM</code>å˜æ›´ã€‚</p>
<ul>
<li>å¼€æºåœ°å€: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FWindRunnerMax%2FBlockKit" target="_blank" title="https://github.com/WindRunnerMax/BlockKit" ref="nofollow noopener noreferrer">github.com/WindRunnerMâ€¦</a></li>
<li>åœ¨çº¿ç¼–è¾‘: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwindrunnermax.github.io%2FBlockKit%2F" target="_blank" title="https://windrunnermax.github.io/BlockKit/" ref="nofollow noopener noreferrer">windrunnermax.github.io/BlockKit/</a></li>
<li>é¡¹ç›®ç¬”è®°: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FWindRunnerMax%2FBlockKit%2Fblob%2Fmaster%2FNOTE.md" target="_blank" title="https://github.com/WindRunnerMax/BlockKit/blob/master/NOTE.md" ref="nofollow noopener noreferrer">github.com/WindRunnerMâ€¦</a></li>
</ul>
<details>
<summary><strong>ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç³»åˆ—æ–‡ç« </strong></summary>
<ul>
<li><a href="https://juejin.cn/post/7490554094412611636" target="_blank" title="https://juejin.cn/post/7490554094412611636">æ·±æ„Ÿä¸€æ— æ‰€é•¿ï¼Œå‡†å¤‡è¯•ç€ä»é›¶å¼€å§‹å†™ä¸ªå¯Œæ–‡æœ¬ç¼–è¾‘å™¨</a></li>
<li><a href="https://juejin.cn/post/7492339631700377652" target="_blank" title="https://juejin.cn/post/7492339631700377652">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#2-åŸºäºMVCæ¨¡å¼çš„ç¼–è¾‘å™¨æ¶æ„è®¾è®¡</a></li>
<li><a href="https://juejin.cn/post/7494920513967112227" target="_blank" title="https://juejin.cn/post/7494920513967112227">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#3-åŸºäºDeltaçš„çº¿æ€§æ•°æ®ç»“æ„æ¨¡å‹</a></li>
<li><a href="https://juejin.cn/post/7508648111485665295" target="_blank" title="https://juejin.cn/post/7508648111485665295">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#4-æµè§ˆå™¨é€‰åŒºæ¨¡å‹çš„æ ¸å¿ƒäº¤äº’ç­–ç•¥</a></li>
<li><a href="https://juejin.cn/post/7513183180091523107" target="_blank" title="https://juejin.cn/post/7513183180091523107">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#5-ç¼–è¾‘å™¨é€‰åŒºæ¨¡å‹çš„çŠ¶æ€ç»“æ„è¡¨è¾¾</a></li>
<li><a href="https://juejin.cn/post/7534162607894347828" target="_blank" title="https://juejin.cn/post/7534162607894347828">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#6-æµè§ˆå™¨é€‰åŒºä¸ç¼–è¾‘å™¨é€‰åŒºæ¨¡å‹åŒæ­¥</a></li>
<li><a href="https://juejin.cn/post/7544561402783793192" target="_blank" title="https://juejin.cn/post/7544561402783793192">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#7-åŸºäºç»„åˆäº‹ä»¶çš„åŠå—æ§è¾“å…¥æ¨¡å¼</a></li>
<li><a href="https://juejin.cn/post/7562526517516812331" target="_blank" title="https://juejin.cn/post/7562526517516812331">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#8-æµè§ˆå™¨è¾“å…¥æ¨¡å¼çš„éå—æ§DOMè¡Œä¸º</a></li>
<li><a href="https://juejin.cn/spost/7585778343352221759" target="_blank" title="https://juejin.cn/spost/7585778343352221759">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#9-ç¼–è¾‘å™¨æ–‡æœ¬ç»“æ„å˜æ›´çš„å—æ§å¤„ç†</a></li>
<li><a href="https://juejin.cn/spost/7593702885880725540" target="_blank" title="https://juejin.cn/spost/7593702885880725540">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#10-Reactè§†å›¾å±‚é€‚é…å™¨çš„æ¨¡å¼æ‰©å±•</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#11-ImmutableçŠ¶æ€ç»´æŠ¤ä¸å¢é‡æ¸²æŸ“</a></li>
</ul>
</details>
<h2 data-id="heading-0">è¡Œçº§ä¸å¯å˜çŠ¶æ€</h2>
<p>åœ¨è¿™é‡Œæˆ‘ä»¬å…ˆä¸å¼•å…¥è§†å›¾å±‚çš„æ¸²æŸ“é—®é¢˜ï¼Œè€Œæ˜¯ä»…åœ¨<code>Model</code>å±‚é¢ä¸Šå®ç°ç²¾ç»†åŒ–çš„å¤„ç†ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯å®ç°ä¸å¯å˜çš„çŠ¶æ€å¯¹è±¡ï¼Œä»…æ›´æ–°çš„èŠ‚ç‚¹æ‰ä¼šè¢«é‡æ–°åˆ›å»ºï¼Œå…¶ä»–èŠ‚ç‚¹åˆ™ç›´æ¥å¤ç”¨ã€‚ç”±æ­¤æƒ³æ¥æ­¤æ¨¡å—çš„å®ç°é¢‡ä¸ºå¤æ‚ï¼Œä¹Ÿå¹¶æœªå¼•å…¥<code>immer</code>ç­‰æ¡†æ¶ï¼Œè€Œæ˜¯ç›´æ¥å¤„ç†çš„çŠ¶æ€å¯¹è±¡ï¼Œå› æ­¤å…ˆä»ç®€å•çš„æ›´æ–°æ¨¡å¼å¼€å§‹è€ƒè™‘ã€‚</p>
<p>å›åˆ°æœ€å¼€å§‹å®ç°çš„<code>State</code>æ¨¡å—æ›´æ–°æ–‡æ¡£å†…å®¹ï¼Œæˆ‘ä»¬æ˜¯ç›´æ¥é‡å»ºäº†æ‰€æœ‰çš„<code>LineState</code>ä»¥åŠ<code>LeafState</code>å¯¹è±¡ï¼Œç„¶ååœ¨<code>React</code>è§†å›¾å±‚çš„<code>BlockModel</code>ä¸­ç›‘å¬äº†<code>OnContentChange</code>äº‹ä»¶ï¼Œä»¥æ­¤æ¥å°†<code>BlockState</code>çš„æ›´æ–°åº”ç”¨åˆ°è§†å›¾å±‚ã€‚</p>
<pre><code class="hljs language-js" lang="js">delta.<span class="hljs-title function_">eachLine</span>(<span class="hljs-function">(<span class="hljs-params">line, attributes, index</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> lineState = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LineState</span>(line, attributes, <span class="hljs-variable language_">this</span>);
  lineState.<span class="hljs-property">index</span> = index;
  lineState.<span class="hljs-property">start</span> = offset;
  lineState.<span class="hljs-property">key</span> = <span class="hljs-title class_">Key</span>.<span class="hljs-title function_">getId</span>(lineState);
  offset = offset + lineState.<span class="hljs-property">length</span>;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">lines</span>[index] = lineState;
});
</code></pre>
<p>è¿™ç§æ–¹å¼ç®€å•ç›´æ¥ï¼Œå…¨é‡æ›´æ–°çŠ¶æ€èƒ½å¤Ÿä¿è¯åœ¨<code>React</code>çš„çŠ¶æ€æ›´æ–°ï¼Œç„¶è€Œè¿™ç§æ–¹å¼çš„é—®é¢˜åœ¨äºæ€§èƒ½ã€‚å½“æ–‡æ¡£å†…å®¹éå¸¸å¤§çš„æ—¶å€™ï¼Œå…¨é‡è®¡ç®—å°†ä¼šå¯¼è‡´å¤§é‡çš„çŠ¶æ€é‡å»ºï¼Œå¹¶ä¸”å…¶æœ¬èº«çš„æ”¹å˜ä¹Ÿä¼šå¯¼è‡´<code>React</code>çš„<code>diff</code>å·®å¼‚è¿›è€Œå…¨é‡æ›´æ–°æ–‡æ¡£è§†å›¾ï¼Œè¿™æ ·çš„æ€§èƒ½å¼€é”€é€šå¸¸æ˜¯ä¸å¯æ¥å—çš„ã€‚</p>
<p>é‚£ä¹ˆé€šå¸¸æ¥è¯´æˆ‘ä»¬å°±éœ€è¦åŸºäºå˜æ›´æ¥ç¡®å®šçŠ¶æ€çš„æ›´æ–°ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦ç¡®å®šæ›´æ–°çš„ç²’åº¦ï¼Œä¾‹å¦‚ä»¥è¡Œä¸ºåŸºå‡†åˆ™æœªå˜æ›´çš„æ—¶å€™å°±ç›´æ¥å–åŸæœ‰çš„<code>LineState</code>ã€‚ç›¸å½“äºå°½å¯èƒ½å¤ç”¨<code>Origin List</code>ç„¶åç”Ÿæˆ<code>Target List</code>ï¼Œè¿™æ ·çš„æ–¹å¼è‡ªç„¶å¯ä»¥é¿å…éƒ¨åˆ†çŠ¶æ€çš„é‡å»ºï¼Œå°½å¯èƒ½å¤ç”¨åŸæœ¬çš„å¯¹è±¡ã€‚</p>
<p>æ•´ä½“æ€è·¯å¤§æ¦‚æ˜¯å…ˆæ‰§è¡Œå˜æˆç”Ÿæˆæœ€æ–°çš„åˆ—è¡¨ï¼Œç„¶ååˆ†åˆ«è®¾ç½®æ—§åˆ—è¡¨å’Œæ–°åˆ—è¡¨çš„<code>row</code>å’Œ<code>col</code>ä¸¤ä¸ªæŒ‡é’ˆå€¼ï¼Œç„¶åæ›´æ–°æ—¶è®°å½•èµ·å§‹<code>row</code>ï¼Œåˆ é™¤å’Œæ–°å¢è‡ªç„¶æ˜¯æ­£å¸¸å¤„ç†ï¼Œå¯¹äºæ›´æ–°åˆ™è®¤ä¸ºæ˜¯å…ˆåˆ åå¢ã€‚å¯¹äºå†…å®¹çš„å¤„ç†åˆ™éœ€è¦åˆ†åˆ«è®¨è®ºå•è¡Œå’Œè·¨è¡Œçš„é—®é¢˜ï¼Œä¸­é—´éƒ¨åˆ†çš„å†…å®¹å°±ä½œä¸ºé‡å»ºçš„æ“ä½œã€‚</p>
<p>æœ€åå¯ä»¥å°†è¿™éƒ¨åˆ†å¢åˆ <code>LineState</code>æ•°æ®æ”¾ç½®äº<code>Changes</code>ä¸­ï¼Œå°±å¯ä»¥å¾—åˆ°å®é™…å¢åˆ çš„<code>Ops</code>äº†ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä¼˜åŒ–éƒ¨åˆ†çš„æ€§èƒ½ï¼Œå› ä¸ºä»…åŸåˆ—è¡¨å’Œç›®æ ‡åˆ—è¡¨çš„ä¸­é—´éƒ¨åˆ†æ‰ä¼šé‡å»ºï¼Œå…¶ä»–éƒ¨åˆ†çš„è¡ŒçŠ¶æ€ç›´æ¥å¤ç”¨ã€‚æ­¤å¤–è¿™éƒ¨åˆ†æ•°æ®åœ¨<code>apply</code>çš„<code>delta</code>ä¸­æ˜¯ä¸å­˜åœ¨çš„ï¼ŒåŒæ ·å¯ä»¥è®¤ä¸ºæ˜¯æ•°æ®çš„è¡¥å……ã€‚</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-title class_">Origin</span> <span class="hljs-title class_">List</span> (<span class="hljs-title class_">Old</span>)                          <span class="hljs-title class_">Target</span> <span class="hljs-title class_">List</span> (<span class="hljs-title class_">New</span>)
+-------------------+                      +-------------------+
| [<span class="hljs-number">0</span>] <span class="hljs-title class_">LineState</span> A   | &lt;---- Retain ------&gt; | [0] LineState A   | (Reused)
+-------------------+                      +-------------------+
| [1] LineState B   |          |           | [1] LineState B2  | (Update)
+-------------------+       Changes        |     (Modified)    | (Del C)
| [2] LineState C   |          |           +-------------------+
+-------------------+          V           | [2] NewState X    | (Inserted)
| [3] LineState D   | ---------------\     +-------------------+
+-------------------+                 --&gt; | [3] LineState D   | (Reused)
| [4] LineState E   | &lt;---- Retain ------&gt; | [4] LineState E   | (Reused)
+-------------------+                      +-------------------+
</code></pre>
<p>é‚£ä¹ˆè¿™é‡Œå®é™…ä¸Šæ˜¯å­˜åœ¨éå¸¸éœ€è¦å…³æ³¨çš„ç‚¹ï¼Œæˆ‘ä»¬ç°åœ¨ç»´æŠ¤çš„æ˜¯çŠ¶æ€æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯è¯´æ‰€æœ‰çš„æ›´æ–°å°±ä¸å†æ˜¯ç›´æ¥çš„<code>compose</code>ï¼Œè€Œæ˜¯æ“ä½œæˆ‘ä»¬å®ç°çš„çŠ¶æ€å¯¹è±¡ã€‚æœ¬è´¨ä¸Šæˆ‘ä»¬æ˜¯éœ€è¦å®ç°è¡Œçº§åˆ«çš„<code>compose</code>æ–¹æ³•ï¼Œè¿™é‡Œçš„å®ç°éå¸¸é‡è¦ï¼Œå‡å¦‚æˆ‘ä»¬å¯¹äºæ•°æ®çš„å¤„ç†å­˜åœ¨åå·®çš„è¯ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´çŠ¶æ€å‡ºç°é—®é¢˜ã€‚</p>
<p>æ­¤å¤–åœ¨è¿™ç§æ–¹å¼ä¸­ï¼Œæˆ‘ä»¬åˆ¤æ–­<code>LineState</code>æ˜¯å¦éœ€è¦æ–°å»ºåˆ™æ˜¯æ ¹æ®æ•´ä¸ªè¡Œå†…çš„æ‰€æœ‰<code>LeafState</code>æ¥é‡å»ºçš„ã€‚ä¹Ÿå°±æ˜¯è¯´è¿™ç§æ—¶å€™æˆ‘ä»¬æ˜¯éœ€è¦å†æ¬¡å°†æ‰€æœ‰çš„<code>op</code>éå†ä¸€éï¼Œå½“ç„¶å®é™…ä¸Šç”±äºæœ€åè¿˜éœ€è¦å°†<code>compose</code>åçš„<code>Delta</code>åˆ‡å‰²ä¸ºè¡Œçº§åˆ«çš„å†…å®¹ï¼Œæ‰€ä»¥å…¶å®å³ä½¿åœ¨åº”ç”¨å˜æ›´åä¹Ÿæœ€å°‘éœ€è¦å†éå†ä¸¤æ¬¡ã€‚</p>
<p>é‚£ä¹ˆæ­¤æ—¶æˆ‘ä»¬éœ€è¦æ€è€ƒä¼˜åŒ–æ–¹å‘ï¼Œé¦–å…ˆæ˜¯é¦–ä¸ª<code>retain</code>ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬åº”è¯¥ç›´æ¥å®Œæ•´å¤ç”¨åŸæœ¬çš„<code>LineState</code>ï¼ŒåŒ…æ‹¬å¤„ç†åçš„å‰©ä½™èŠ‚ç‚¹ä¹Ÿæ˜¯å¦‚æ­¤ã€‚è€Œå¯¹äºä¸­é—´çš„èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å°±éœ€è¦ä¸ºå…¶ç‹¬ç«‹è®¾è®¡æ›´æ–°ç­–ç•¥ï¼Œè¿™éƒ¨åˆ†ç†è®ºä¸Šæ¥è¯´æ˜¯éœ€è¦å®Œå…¨ç‹¬ç«‹å¤„ç†ä¸ºæ–°çš„çŠ¶æ€å¯¹è±¡çš„ï¼Œè¿™æ ·å¯ä»¥å‡å°‘éƒ¨åˆ†<code>Leaf Op</code>çš„éå†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Delta</span>().<span class="hljs-title function_">retain</span>(<span class="hljs-number">5</span>).<span class="hljs-title function_">insert</span>(<span class="hljs-string">"xx"</span>)
<span class="hljs-title function_">insert</span>(<span class="hljs-string">"123"</span>), <span class="hljs-title function_">insert</span>(<span class="hljs-string">"\n"</span>) <span class="hljs-comment">// skip </span>
<span class="hljs-title function_">insert</span>(<span class="hljs-string">"456"</span>), <span class="hljs-title function_">insert</span>(<span class="hljs-string">"\n"</span>) <span class="hljs-comment">// new line state</span>
</code></pre>
<p>å…¶ä¸­ï¼Œå¦‚æœæ˜¯æ–°å»ºçš„èŠ‚ç‚¹ï¼Œæˆ‘ä»¬ç›´æ¥æ„å»ºæ–°çš„<code>LineState</code>å³å¯ï¼Œåˆ é™¤çš„èŠ‚ç‚¹åˆ™ä¸ä»åŸæœ¬çš„<code>LineState</code>ä¸­æ”¾ç½®äºæ–°çš„åˆ—è¡¨ã€‚è€Œå¯¹äºæ›´æ–°çš„èŠ‚ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–°åŸæœ¬çš„<code>LineState</code>å¯¹è±¡ï¼Œå› ä¸ºå®é™…ä¸Šè¡Œæ˜¯å­˜åœ¨æ›´æ–°çš„ï¼Œè€Œé‡ç‚¹æ˜¯æˆ‘ä»¬éœ€è¦å°†åŸæœ¬çš„<code>LineState</code>çš„<code>key</code>å€¼å¤ç”¨ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬å…ˆç®€å•å®ç°å®ç°æè¿°ä¸€ä¸‹å¤ç”¨çš„é—®é¢˜ï¼Œæ¯”è¾ƒæ–¹ä¾¿çš„å®ç°åˆ™æ˜¯ç›´æ¥ä»¥<code>\n</code>çš„æ ‡è¯†ä¸ºç›®æ ‡çš„<code>State</code>ï¼Œè¿™å°±æ„å‘³ç€æˆ‘ä»¬è¦ç‹¬ç«‹<code>\n</code>ä¸ºç‹¬ç«‹çš„çŠ¶æ€ã€‚å³å¦‚æœåœ¨<code>123|456\n</code>çš„<code>|</code>ä½ç½®æ’å…¥<code>\n</code>çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ˜¯<code>123</code>æ˜¯æ–°çš„<code>LineState</code>ï¼Œ<code>456</code>æ˜¯åŸæœ¬çš„<code>LineState</code>ï¼Œä»¥æ­¤æ¥å®ç°<code>key</code>çš„å¤ç”¨ã€‚</p>
<pre><code class="hljs language-js" lang="js">[
  <span class="hljs-title function_">insert</span>(<span class="hljs-string">"123"</span>), <span class="hljs-title function_">insert</span>(<span class="hljs-string">"\n"</span>), 
  <span class="hljs-title function_">insert</span>(<span class="hljs-string">"456"</span>), <span class="hljs-title function_">insert</span>(<span class="hljs-string">"\n"</span>)
]
<span class="hljs-comment">// ===&gt;</span>
[ 
  <span class="hljs-title class_">LineState</span>(<span class="hljs-title class_">LeafState</span>(<span class="hljs-string">"123"</span>), <span class="hljs-title class_">LeafState</span>(<span class="hljs-string">"\n"</span>)), 
  <span class="hljs-title class_">LineState</span>(<span class="hljs-title class_">LeafState</span>(<span class="hljs-string">"456"</span>), <span class="hljs-title class_">LeafState</span>(<span class="hljs-string">"\n"</span>))
]
</code></pre>
<p>å…¶å®è¿™é‡Œæœ‰ä¸ªéå¸¸å€¼å¾—å…³æ³¨çš„ç‚¹æ˜¯ï¼Œ<code>LineState</code>åœ¨<code>Delta</code>ä¸­æ˜¯æ²¡æœ‰å…·ä½“å¯¹åº”çš„<code>Op</code>çš„ï¼Œè€Œç›¸å¯¹åº”çš„<code>LeafState</code>åˆ™æ˜¯æœ‰å…·ä½“çš„<code>Op</code>çš„ã€‚è¿™å°±æ„å‘³ç€æˆ‘ä»¬åœ¨å¤„ç†<code>LineState</code>çš„æ›´æ–°æ—¶ï¼Œæ˜¯ä¸èƒ½ç›´æ¥æ ¹æ®å˜æ›´æ§åˆ¶çš„ï¼Œå› æ­¤å¿…é¡»è¦æ‰¾åˆ°èƒ½å¤Ÿæ˜ å°„çš„çŠ¶æ€ï¼Œå› æ­¤æœ€ç®€å•çš„æ–¹æ¡ˆå³æ ¹æ®<code>\n</code>èŠ‚ç‚¹æ˜ å°„ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">LeafState</span>(<span class="hljs-string">"\n"</span>, key=<span class="hljs-string">"1"</span>) &lt;=&gt; <span class="hljs-title class_">LineState</span>(key=<span class="hljs-string">"L1"</span>)
</code></pre>
<p>å®é™…ä¸Šæˆ‘ä»¬å¯ä»¥æ€»ç»“ä¸€ä¸‹ï¼Œæœ€å¼€å§‹æˆ‘ä»¬è€ƒè™‘å…ˆæ›´æ–°å†<code>diff</code>ï¼Œåæ¥è€ƒè™‘çš„æ˜¯è¾¹æ›´æ–°è¾¹è®°å½•ã€‚è¾¹æ›´æ–°è¾¹è®°å½•çš„ä¼˜ç‚¹åœ¨äºï¼Œå¯ä»¥é¿å…å†æ¬¡éå†ä¸€è¾¹æ‰€æœ‰<code>Leaf</code>èŠ‚ç‚¹çš„æ¶ˆè€—ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é¿å…<code>diff</code>çš„å¤æ‚æ€§ã€‚ä½†æ˜¯è¿™é‡Œä¹Ÿå­˜åœ¨ä¸ªé—®é¢˜ï¼Œå¦‚æœå†…éƒ¨è¿›è¡Œäº†å¤šæ¬¡<code>retain</code>æ“ä½œï¼Œåˆ™æ— æ³•ç›´æ¥å¤ç”¨<code>LineState</code>ã€‚</p>
<p>ä¸è¿‡é€šå¸¸æ¥è¯´ï¼Œæœ€é«˜é¢‘çš„æ“ä½œæ˜¯è¾“å…¥å†…å®¹ï¼Œè¿™ç§æƒ…å†µä¸‹é¦–æ“ä½œä¸€èˆ¬éƒ½æ˜¯<code>retain</code>ï¼Œå°¾æ“ä½œä¸ºç©ºä¼šæ”¶é›†å‰©ä½™æ–‡æ¡£å†…å®¹ï¼Œå› æ­¤è¿™éƒ¨åˆ†ä¼˜åŒ–æ˜¯ä¼šè¢«é«˜é¢‘è§¦å‘çš„ã€‚è€Œå¦‚æœæ˜¯å¤šæ¬¡çš„å†…å®¹éƒ¨åˆ†å˜æ›´æ“ä½œï¼Œè¿™éƒ¨åˆ†è™½ç„¶å¯ä»¥é€šè¿‡åˆ¤æ–­è¡Œå†…çš„å¶å­ç»“ç‚¹æ˜¯å¦å˜æ›´ï¼Œæ¥åˆ¤æ–­æ˜¯å¦å¤ç”¨è¡Œå¯¹è±¡ï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨ä¸€å®šå¤æ‚æ€§ã€‚</p>
<p>å…³äºè¿™éƒ¨åˆ†çš„å…·ä½“å®ç°ï¼Œåœ¨ç¼–è¾‘å™¨çš„çŠ¶æ€æ¨¡å—é‡Œå­˜åœ¨ç‹¬ç«‹çš„<code>Mutate</code>æ¨¡å—ï¼Œè¿™éƒ¨åˆ†å®ç°åœ¨åè¾¹å®ç°å„ä¸ªæ¨¡å—æ—¶ä¼šç‹¬ç«‹ä»‹ç»ã€‚åˆ°è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥å®ç°ä¸€ä¸ªç®€å•çš„<code>Immutable</code>çŠ¶æ€ç»´æŠ¤ï¼Œå¦‚æœ<code>Leaf</code>èŠ‚ç‚¹å‘ç”Ÿå˜åŒ–ä¹‹åï¼Œå…¶çˆ¶èŠ‚ç‚¹<code>Line</code>ä¼šè§¦å‘æ›´æ–°ï¼Œè€Œå…¶ä»–èŠ‚ç‚¹åˆ™å¯ä»¥ç›´æ¥å¤ç”¨ã€‚</p>
<h2 data-id="heading-1">Key å€¼ç»´æŠ¤</h2>
<p>è‡³æ­¤æˆ‘ä»¬å®ç°äº†ä¸€å¥—ç®€å•çš„<code>Immutable Delta+Iterator</code>æ¥å¤„ç†æ›´æ–°ï¼Œè¿™ç§æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å€ŸåŠ©ä¸å¯å˜çš„æ–¹å¼æ¥å®ç°<code>React</code>è§†å›¾çš„æ›´æ–°ï¼Œé‚£ä¹ˆåœ¨<code>React</code>çš„æ¸²æŸ“æ¨¡å¼ä¸­ï¼Œ<code>key</code>å€¼çš„ç®¡ç†ä¹Ÿæ˜¯ä¸ªå€¼çš„æ¢è®¨çš„é—®é¢˜ã€‚</p>
<p>åœ¨è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®çŠ¶æ€ä¸å¯å˜æ¥ç”Ÿæˆ<code>key</code>å€¼ï¼Œå€ŸåŠ©<code>WeakMap</code>æ˜ å°„å…³ç³»è·å–å¯¹åº”çš„å­—ç¬¦ä¸²<code>id</code>å€¼ï¼Œæ­¤æ—¶å°±å¯ä»¥å€ŸåŠ©<code>key</code>çš„ç®¡ç†ä»¥åŠ<code>React.memo</code>æ¥å®ç°è§†å›¾çš„å¤ç”¨ã€‚å…¶å®åœ¨è¿™é‡Œåˆæ­¥çœ‹èµ·æ¥<code>key</code>å€¼åº”è¯¥æ˜¯éœ€è¦ä¸»åŠ¨æ§åˆ¶å¼ºåˆ¶åˆ·æ–°çš„æ—¶å€™ï¼Œä»¥åŠå®Œå…¨æ˜¯æ–°èŠ‚ç‚¹æ‰ä¼šç”¨å¾—åˆ°çš„ã€‚</p>
<p>ä½†æ˜¯è¿™ç§æ–¹å¼ä¹Ÿæ˜¯æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºæ­¤æ—¶æˆ‘ä»¬å³ä½¿è¾“å…¥ç®€å•çš„å†…å®¹ï¼Œä¹Ÿä¼šå¯¼è‡´æ•´ä¸ªè¡Œçš„<code>key</code>å‘ç”Ÿæ”¹å˜ï¼Œè€Œæ­¤æ—¶æˆ‘ä»¬æ˜¯ä¸å¿…è¦æ›´æ–°æ­¤æ—¶çš„<code>key</code>çš„ã€‚å› æ­¤<code>key</code>å€¼æ˜¯éœ€è¦å•ç‹¬ç»´æŠ¤çš„ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨ä¸å¯å˜çš„å¯¹è±¡æ¥ç´¢å¼•<code>key</code>å€¼ï¼Œé‚£ä¹ˆå¦‚æœæ˜¯ç›´æ¥ä½¿ç”¨<code>index</code>ä½œä¸º<code>key</code>å€¼çš„è¯ï¼Œå°±ä¼šå­˜åœ¨æ½œåœ¨çš„åŸåœ°å¤ç”¨é—®é¢˜ã€‚</p>
<p><code>key</code>å€¼åŸåœ°å¤ç”¨ä¼šå¯¼è‡´ç»„ä»¶çš„çŠ¶æ€è¢«é”™è¯¯ä¿ç•™ï¼Œä¾‹å¦‚æ­¤æ—¶æœ‰ä¸ªéå—æ§ç®¡ç†çš„<code>input</code>ç»„ä»¶åˆ—è¡¨ï¼Œåœ¨æŸä¸ªè¾“å…¥æ¡†å†…å·²ç»è¾“å…¥äº†å†…å®¹ï¼Œå½“å…¶å‘ç”Ÿé¡ºåºå˜åŒ–æ—¶ï¼ŒåŸå§‹è¾“å…¥å†…å®¹ä¼šè·Ÿéšç€åŸåœ°å¤ç”¨çš„ç­–ç•¥ç•™åœ¨åŸå§‹çš„ä½ç½®ï¼Œè€Œä¸æ˜¯è·Ÿéšåˆ°æ–°çš„ä½ç½®ï¼Œå› ä¸ºå…¶æ•´ä½“åˆ—è¡¨é¡ºåº<code>key</code>æœªå‘ç”Ÿå˜åŒ–å¯¼è‡´<code>React</code>ç›´æ¥å¤ç”¨èŠ‚ç‚¹ã€‚</p>
<p>åœ¨<code>LineState</code>èŠ‚ç‚¹çš„<code>key</code>å€¼ç»´æŠ¤ä¸­ï¼Œå¦‚æœæ˜¯åˆå§‹å€¼åˆ™æ˜¯æ ¹æ®<code>state</code>å¼•ç”¨è‡ªå¢çš„å€¼ï¼Œåœ¨å˜æ›´çš„æ—¶å€™åˆ™æ˜¯å°½å¯èƒ½åœ°å¤ç”¨åŸå§‹è¡Œçš„<code>key</code>ï¼Œè¿™æ ·å¯ä»¥é¿å…è¿‡å¤šçš„è¡ŒèŠ‚ç‚¹é‡å»ºå¹¶ä¸”å¯ä»¥æ§åˆ¶æ•´è¡Œçš„å¼ºåˆ¶åˆ·æ–°ã€‚</p>
<p>è€Œå¯¹äº<code>LeafState</code>èŠ‚ç‚¹çš„<code>key</code>å€¼æœ€å¼€å§‹æ˜¯ç›´æ¥ä½¿ç”¨<code>index</code>å€¼ï¼Œè¿™æ ·å®é™…ä¸Šä¼šå­˜åœ¨éšæ€§çš„é—®é¢˜ï¼Œè€Œå¦‚æœç›´æ¥æ ¹æ®<code>Immutable</code>æ¥ç”Ÿæˆ<code>key</code>å€¼çš„è¯ï¼Œä»»ä½•æ–‡æœ¬å†…å®¹çš„æ›´æ”¹éƒ½ä¼šå¯¼è‡´<code>key</code>å€¼æ”¹å˜è¿›è€Œå¯¼è‡´<code>DOM</code>èŠ‚ç‚¹çš„é¢‘ç¹é‡å»ºã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">NODE_TO_KEY</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>&lt;<span class="hljs-title class_">Object</span>.<span class="hljs-property">Any</span>, <span class="hljs-title class_">Key</span>&gt;();
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Key</span> {
  <span class="hljs-comment">/** å½“å‰èŠ‚ç‚¹ id */</span>
  public <span class="hljs-attr">id</span>: string;
  <span class="hljs-comment">/** è‡ªåŠ¨é€’å¢æ ‡è¯†ç¬¦ */</span>
  public <span class="hljs-keyword">static</span> n = <span class="hljs-number">0</span>;

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = <span class="hljs-string">`<span class="hljs-subst">${Key.n++}</span>`</span>;
  }

  <span class="hljs-comment">/**
   * æ ¹æ®èŠ‚ç‚¹è·å– id
   * <span class="hljs-doctag">@param</span> <span class="hljs-variable">node</span>
   */</span>
  public <span class="hljs-keyword">static</span> <span class="hljs-title function_">getId</span>(<span class="hljs-attr">node</span>: <span class="hljs-title class_">Object</span>.<span class="hljs-property">Any</span>): string {
    <span class="hljs-keyword">let</span> key = <span class="hljs-variable constant_">NODE_TO_KEY</span>.<span class="hljs-title function_">get</span>(node);
    <span class="hljs-keyword">if</span> (!key) {
      key = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Key</span>();
      <span class="hljs-variable constant_">NODE_TO_KEY</span>.<span class="hljs-title function_">set</span>(node, key);
    }
    <span class="hljs-keyword">return</span> key.<span class="hljs-property">id</span>;
  }
}
</code></pre>
<p>é€šå¸¸ä½¿ç”¨<code>index</code>ä½œä¸º<code>key</code>æ˜¯å¯è¡Œçš„ï¼Œç„¶è€Œåœ¨ä¸€äº›éå—æ§åœºæ™¯ä¸‹åˆ™ä¼šç”±äºåŸåœ°å¤ç”¨é€ æˆæ¸²æŸ“é—®é¢˜ï¼Œ<code>diff</code>ç®—æ³•å¯¼è‡´çš„æ€§èƒ½é—®é¢˜æˆ‘ä»¬æš‚æ—¶å…ˆä¸è€ƒè™‘ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œæ¯æ¬¡æˆ‘ä»¬éƒ½æ˜¯ä»æ•°ç»„é¡¶éƒ¨åˆ é™¤å…ƒç´ ï¼Œè€Œå®é™…çš„<code>input</code>å€¼æ•ˆæœè¡¨ç°å‡ºæ¥åˆ™æ˜¯åˆ é™¤äº†å°¾éƒ¨çš„å…ƒç´ ï¼Œè¿™å°±æ˜¯åŸåœ°å¤ç”¨çš„é—®é¢˜ã€‚åœ¨éå—æ§åœºæ™¯ä¸‹æ¯”è¾ƒæ˜æ˜¾ï¼Œè€Œæˆ‘ä»¬çš„<code>ContentEditable</code>ç»„ä»¶å°±æ˜¯ä¸€ä¸ªéå—æ§åœºæ™¯ï¼Œå› æ­¤è¿™é‡Œçš„<code>key</code>å€¼éœ€è¦å†è€ƒè™‘ä¸€ä¸‹ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> { useState, <span class="hljs-title class_">Fragment</span>, useRef, useEffect } = <span class="hljs-title class_">React</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> ref = useRef&lt;<span class="hljs-title class_">HTMLParagraphElement</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [nodes, setNodes] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: <span class="hljs-number">10</span> }, <span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> i));

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> [_, ...rest] = nodes;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(rest);
    <span class="hljs-title function_">setNodes</span>(rest);
  };

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> el = ref.<span class="hljs-property">current</span>;
    el &amp;&amp; <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(el.<span class="hljs-property">children</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">it, i</span>) =&gt;</span> ((it <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLInputElement</span>).<span class="hljs-property">value</span> = i + <span class="hljs-string">""</span>));
  }, []);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Fragment</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span>&gt;</span>
        {nodes.map((_, i) =&gt; (<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span>))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClick}</span>&gt;</span>slice<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Fragment</span>&gt;</span></span>
  );
}
</code></pre>
<p>è€ƒè™‘åˆ°å…ˆå‰æåˆ°çš„æˆ‘ä»¬ä¸å¸Œæœ›ä»»ä½•æ–‡æœ¬å†…å®¹çš„æ›´æ”¹éƒ½å¯¼è‡´<code>key</code>å€¼æ”¹å˜å¼•å‘é‡å»ºï¼Œå› æ­¤å°±ä¸èƒ½ç›´æ¥ä½¿ç”¨è®¡ç®—çš„<code>immutable</code>å¯¹è±¡å¼•ç”¨æ¥å¤„ç†<code>key</code>å€¼ï¼Œè€Œæè¿°å•ä¸ª<code>op</code>çš„æ–¹æ³•é™¤äº†<code>insert</code>å°±åªå‰©ä¸‹<code>attributes</code>äº†ã€‚</p>
<p>ä½†æ˜¯å¦‚æœåŸºäº<code>attributes</code>æ¥è·å¾—å°±éœ€è¦ç²¾å‡†æ§åˆ¶åˆå¹¶<code>insert</code>çš„æ—¶å€™å–éœ€è¦å–æ—§çš„å¯¹è±¡å¼•ç”¨ï¼Œä¸”æ²¡æœ‰å±æ€§çš„<code>op</code>å°±ä¸å¥½å¤„ç†äº†ï¼Œå› æ­¤è¿™é‡Œå¯èƒ½åªèƒ½å°†å…¶è½¬ä¸ºå­—ç¬¦ä¸²å¤„ç†ï¼Œä½†æ˜¯è¿™æ ·åŒæ ·ä¸èƒ½ä¿æŒ<code>key</code>çš„å®Œå…¨ç¨³å®šï¼Œå› æ­¤å‰å€¼çš„ç´¢å¼•æ”¹å˜å°±ä¼šå¯¼è‡´åç»­çš„å€¼å‡ºç°å˜æ›´ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> prefix = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>&lt;<span class="hljs-title class_">LineState</span>, <span class="hljs-title class_">Record</span>&lt;string, number&gt;&gt;();
<span class="hljs-keyword">const</span> suffix = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>&lt;<span class="hljs-title class_">LineState</span>, <span class="hljs-title class_">Record</span>&lt;string, number&gt;&gt;();
<span class="hljs-keyword">const</span> mapToString = (<span class="hljs-attr">map</span>: <span class="hljs-title class_">Record</span>&lt;string, string&gt;): <span class="hljs-function"><span class="hljs-params">string</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(map)
    .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">${key}</span>:<span class="hljs-subst">${map[key]}</span>`</span>)
    .<span class="hljs-title function_">join</span>(<span class="hljs-string">","</span>);
};
<span class="hljs-keyword">const</span> toKey = (<span class="hljs-attr">state</span>: <span class="hljs-title class_">LineState</span>, <span class="hljs-attr">op</span>: <span class="hljs-title class_">Op</span>): <span class="hljs-function"><span class="hljs-params">string</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> key = op.<span class="hljs-property">attributes</span> ? <span class="hljs-title function_">mapToString</span>(op.<span class="hljs-property">attributes</span>) : <span class="hljs-string">""</span>;
  <span class="hljs-keyword">const</span> prefixMap = prefix.<span class="hljs-title function_">get</span>(state) || {};
  prefix.<span class="hljs-title function_">set</span>(state, prefixMap);
  <span class="hljs-keyword">const</span> suffixMap = suffix.<span class="hljs-title function_">get</span>(state) || {};
  suffix.<span class="hljs-title function_">set</span>(state, suffixMap);
  <span class="hljs-keyword">const</span> prefixKey = prefixMap[key] ? prefixMap[key] + <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;
  <span class="hljs-keyword">const</span> suffixKey = suffixMap[key] ? suffixMap[key] + <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;
  prefixMap[key] = prefixKey;
  suffixMap[key] = suffixKey;
  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${prefixKey}</span>-<span class="hljs-subst">${suffixKey}</span>`</span>;
};
</code></pre>
<p>åœ¨<code>slate</code>ä¸­æˆ‘å…ˆå‰è®¤ä¸ºç”Ÿæˆçš„<code>key</code>è·ŸèŠ‚ç‚¹æ˜¯å®Œå…¨ä¸€ä¸€å¯¹åº”çš„å…³ç³»ï¼Œä¾‹å¦‚å½“<code>A</code>èŠ‚ç‚¹å˜åŒ–æ—¶ï¼Œå…¶ä»£è¡¨çš„å±‚çº§<code>key</code>å¿…ç„¶ä¼šå‘ç”Ÿå˜åŒ–ã€‚ç„¶è€Œåœ¨å…³æ³¨è¿™ä¸ªé—®é¢˜ä¹‹åï¼Œæˆ‘å‘ç°å…¶åœ¨æ›´æ–°ç”Ÿæˆæ–°çš„<code>Node</code>ä¹‹åï¼Œä¼šåŒæ­¥æ›´æ–°<code>Path</code>ä»¥åŠ<code>PathRef</code>å¯¹åº”çš„<code>Node</code>èŠ‚ç‚¹æ‰€å¯¹åº”çš„<code>key</code>å€¼ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [pathRef, key] <span class="hljs-keyword">of</span> pathRefMatches) {
  <span class="hljs-keyword">if</span> (pathRef.<span class="hljs-property">current</span>) {
    <span class="hljs-keyword">const</span> [node] = <span class="hljs-title class_">Editor</span>.<span class="hljs-title function_">node</span>(e, pathRef.<span class="hljs-property">current</span>)
    <span class="hljs-variable constant_">NODE_TO_KEY</span>.<span class="hljs-title function_">set</span>(node, key)
  }
  pathRef.<span class="hljs-title function_">unref</span>()
}
</code></pre>
<p>åœ¨åç»­è§‚å¯Ÿ<code>Lexical</code>å®ç°çš„é€‰åŒºæ¨¡å‹æ—¶ï¼Œå‘ç°å…¶æ˜¯ç”¨<code>key</code>å€¼å”¯ä¸€åœ°æ ‡è¯†æ¯ä¸ªå¶å­ç»“ç‚¹çš„ï¼Œé€‰åŒºä¹Ÿæ˜¯åŸºäº<code>key</code>å€¼æ¥æè¿°çš„ã€‚æ•´ä½“è¡¨è¾¾ä¸Šæ¯”è¾ƒç±»ä¼¼äº<code>Slate</code>çš„é€‰åŒºç»“æ„ï¼Œæˆ–è€…è¯´æ˜¯<code>DOM</code>æ ‘çš„ç»“æ„ã€‚è¿™é‡Œä»…ä»…æ˜¯å€¼å¾—<code>Range</code>é€‰åŒºï¼Œ<code>Lexical</code>å®é™…ä¸Šè¿˜æœ‰å…¶ä»–ä¸‰ç§é€‰åŒºç±»å‹ã€‚</p>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-attr">anchor</span>: { <span class="hljs-attr">key</span>: <span class="hljs-string">"51"</span>, <span class="hljs-attr">offset</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"text"</span> },
  <span class="hljs-attr">focus</span>: { <span class="hljs-attr">key</span>: <span class="hljs-string">"51"</span>, <span class="hljs-attr">offset</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"text"</span> }
}
</code></pre>
<p>åœ¨è¿™é‡Œæ¯”è¾ƒé‡è¦çš„æ˜¯<code>key</code>å€¼å˜æ›´æ—¶çš„çŠ¶æ€ä¿æŒï¼Œå› ä¸ºç¼–è¾‘å™¨çš„å†…å®¹å®é™…ä¸Šæ˜¯éœ€è¦ç¼–è¾‘çš„ã€‚ç„¶è€Œå¦‚æœåšåˆ°<code>immutable</code>è¯ï¼Œå¾ˆæ˜æ˜¾ç›´æ¥æ ¹æ®çŠ¶æ€å¯¹è±¡çš„å¼•ç”¨æ¥æ˜ å°„<code>key</code>ä¼šå¯¼è‡´æ•´ä¸ªç¼–è¾‘å™¨<code>DOM</code>æ— æ•ˆçš„é‡å»ºã€‚ä¾‹å¦‚è°ƒæ•´æ ‡é¢˜çš„ç­‰çº§ï¼Œå°±ç”±äºæ•´ä¸ªè¡Œ<code>key</code>çš„å˜åŒ–å¯¼è‡´æ•´è¡Œé‡å»ºã€‚</p>
<p>é‚£ä¹ˆå¦‚ä½•å°½å¯èƒ½åœ°å¤ç”¨<code>key</code>å€¼å°±æˆäº†éœ€è¦ç ”ç©¶çš„é—®é¢˜ï¼Œæˆ‘ä»¬çš„ç¼–è¾‘å™¨è¡Œçº§åˆ«çš„<code>key</code>æ˜¯è¢«ç‰¹æ®Šç»´æŠ¤çš„ï¼Œå³å®ç°äº†<code>immutable</code>ä»¥åŠ<code>key</code>å€¼å¤ç”¨ã€‚è€Œç›®å‰å¶å­çŠ¶æ€çš„<code>key</code>ä¾èµ–äº†<code>index</code>å€¼ï¼Œå› æ­¤å¦‚æœè°ƒç ”<code>Lexical</code>çš„å®ç°ï¼ŒåŒæ ·å¯ä»¥å°†å…¶åº”ç”¨åˆ°æˆ‘ä»¬çš„<code>key</code>å€¼ç»´æŠ¤ä¸­ã€‚</p>
<p>é€šè¿‡åœ¨<code>playground</code>ä¸­è°ƒè¯•å¯ä»¥å‘ç°ï¼Œå³ä½¿æˆ‘ä»¬ä¸èƒ½å¾—çŸ¥å…¶æ˜¯å¦ä¸º<code>immutable</code>çš„å®ç°ï¼Œä¾ç„¶å¯ä»¥å‘ç°<code>Lexical</code>çš„<code>key</code>æ˜¯ä»¥ä¸€ç§åå·¦çš„æ–¹å¼ç»´æŠ¤ã€‚å› æ­¤åœ¨æˆ‘ä»¬çš„ç¼–è¾‘å™¨å®ç°ä¸­ï¼Œä¹Ÿå¯ä»¥å€ŸåŠ©åŒæ ·çš„æ–¹å¼ï¼Œåˆå¹¶ç›´æ¥ä»¥å·¦å€¼ä¸ºå‡†å¤ç”¨ï¼Œæ‹†åˆ†æ—¶è‹¥ä»¥<code>0</code>èµ·å§‹ç›´æ¥å¤ç”¨ï¼Œèµ·å§‹é<code>0</code>åˆ™åˆ›å»ºæ–°<code>key</code>ã€‚</p>
<ol>
<li><code>[123456(key1)][789(bold-key2)]</code>æ–‡æœ¬ï¼Œå°†<code>789</code>çš„åŠ ç²—å–æ¶ˆï¼Œæ•´æ®µæ–‡æœ¬çš„<code>key</code>å€¼ä¿æŒä¸º<code>key1</code>ã€‚</li>
<li><code>[123456789(key1)]]</code>æ–‡æœ¬ï¼Œå°†<code>789</code>è¿™æ®µæ–‡æœ¬åŠ ç²—ï¼Œå·¦ä¾§<code>123456</code>æ–‡æœ¬çš„<code>key</code>å€¼ä¿æŒä¸º<code>key1</code>ï¼Œ<code>789</code>åˆ™æ˜¯æ–°çš„<code>key</code>ã€‚</li>
<li><code>[123456789(key1)]]</code>æ–‡æœ¬ï¼Œå°†<code>123</code>è¿™æ®µæ–‡æœ¬åŠ ç²—ï¼Œå·¦ä¾§<code>123</code>æ–‡æœ¬çš„<code>key</code>å€¼ä¿æŒä¸º<code>key1</code>ï¼Œ<code>456789</code>åˆ™æ˜¯æ–°çš„<code>key</code>ã€‚</li>
<li><code>[123456789(key1)]]</code>æ–‡æœ¬ï¼Œå°†<code>456</code>è¿™æ®µæ–‡æœ¬åŠ ç²—ï¼Œå·¦ä¾§<code>123</code>æ–‡æœ¬çš„<code>key</code>å€¼ä¿æŒä¸º<code>key1</code>ï¼Œ<code>456</code>å’Œ<code>789</code>åˆ†åˆ«æ˜¯æ–°çš„<code>key</code>ã€‚</li>
</ol>
<p>å› æ­¤ï¼Œæ­¤æ—¶åœ¨ç¼–è¾‘å™¨ä¸­æˆ‘ä»¬ä¹Ÿæ˜¯ç”¨ç±»ä¼¼åå·¦çš„æ–¹å¼ç»´æŠ¤<code>key</code>ï¼Œç”±äºæˆ‘ä»¬éœ€è¦ä¿æŒ<code>immutable</code>ï¼Œæ‰€ä»¥è¿™é‡Œçš„è¡¨è¾¾å®é™…ä¸Šæ˜¯å°½å¯èƒ½å¤ç”¨å…ˆå‰çš„<code>key</code>çŠ¶æ€ã€‚è¿™é‡Œä¸<code>LineState</code>çš„<code>key</code>å€¼ç»´æŠ¤æ–¹å¼ç±»ä¼¼ï¼Œéƒ½æ˜¯å…ˆåˆ›å»ºçŠ¶æ€ç„¶åæ›´æ–°å…¶<code>key</code>å€¼ï¼Œå½“ç„¶è¿˜æœ‰å¾ˆå¤šç»†èŠ‚çš„åœ°æ–¹éœ€è¦å¤„ç†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// èµ·å§‹ä¸è£å‰ªä½ç½®ç­‰åŒ NextOp =&gt; Immutable åŸåœ°å¤ç”¨ State</span>
<span class="hljs-keyword">if</span> (offset === <span class="hljs-number">0</span> &amp;&amp; op.<span class="hljs-property">insert</span>.<span class="hljs-property">length</span> &lt;= length) {
  <span class="hljs-keyword">return</span> nextLeaf;
}
<span class="hljs-keyword">const</span> newLeaf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LeafState</span>(retOp, nextLeaf.<span class="hljs-property">parent</span>);
<span class="hljs-comment">// è‹¥ offset æ˜¯ 0, åˆ™ç›´æ¥å¤ç”¨åŸå§‹çš„ key å€¼</span>
offset === <span class="hljs-number">0</span> &amp;&amp; newLeaf.<span class="hljs-title function_">updateKey</span>(nextLeaf.<span class="hljs-property">key</span>);
</code></pre>
<p>è¿™é‡Œè¿˜å­˜åœ¨å¦ä¸€ä¸ªå°é—®é¢˜ï¼Œæˆ‘ä»¬åˆ›å»º<code>LeafState</code>å°±ç«‹å³å»è·å¾—å¯¹åº”çš„<code>key</code>å€¼ï¼Œç„¶åå†è€ƒè™‘å»å¤ç”¨åŸå§‹çš„<code>key</code>å€¼ã€‚è¿™æ ·å…¶å®å°±ä¼šå¯¼è‡´å¾ˆå¤šä¸å†ä½¿ç”¨çš„<code>key</code>å€¼è¢«åˆ›å»ºï¼Œå¯¼è‡´æ¯æ¬¡æ›´æ–°çš„æ—¶å€™çœ‹èµ·æ¥<code>key</code>çš„æ•°å­—å·®å€¼æ¯”è¾ƒå¤§ã€‚å½“ç„¶è¿™å¹¶ä¸å½±å“æ•´ä½“çš„åŠŸèƒ½ä¸æ€§èƒ½ï¼Œåªæ˜¯è°ƒè¯•çš„æ—¶å€™çœ‹èµ·æ¥æ¯”è¾ƒæ€ªã€‚</p>
<p>å› æ­¤æˆ‘ä»¬åœ¨è¿™é‡Œè¿˜å¯ä»¥ä¼˜åŒ–è¿™éƒ¨åˆ†è¡¨ç°ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åœ¨åˆ›å»ºçš„æ—¶å€™ä¸ä¼šå»ç«‹å³åˆ›å»º<code>key</code>å€¼ï¼Œè€Œæ˜¯åœ¨åˆå§‹åŒ–ä»¥åŠæ›´æ–°çš„æ—¶å€™å†ä»å¤–éƒ¨è®¾ç½®å…¶<code>key</code>å€¼ã€‚è¿™ä¸ªå®ç°å…¶å®è·Ÿ<code>index</code>ã€<code>offset</code>çš„å¤„ç†æ–¹å¼æ¯”è¾ƒç±»ä¼¼ï¼Œæˆ‘ä»¬æ•´ä½“åœ¨<code>update</code>æ—¶å¤„ç†æ‰€æœ‰çš„ç›¸å…³å€¼ï¼Œä¸”å¼€å‘æ¨¡å¼æ¸²æŸ“æ—¶è¿›è¡Œäº†ä¸¥æ ¼æ£€æŸ¥ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// BlockState</span>
<span class="hljs-keyword">let</span> offset = <span class="hljs-number">0</span>;
<span class="hljs-variable language_">this</span>.<span class="hljs-property">lines</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">line, index</span>) =&gt;</span> {
  line.<span class="hljs-property">index</span> = index;
  line.<span class="hljs-property">start</span> = offset;
  line.<span class="hljs-property">key</span> = line.<span class="hljs-property">key</span> || <span class="hljs-title class_">Key</span>.<span class="hljs-title function_">getId</span>(line);
  <span class="hljs-keyword">const</span> size = line.<span class="hljs-property">isDirty</span> ? line.<span class="hljs-title function_">updateLeaves</span>() : line.<span class="hljs-property">length</span>;
  offset = offset + size;
});
<span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span> = offset;
<span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">lines</span>.<span class="hljs-property">length</span>;
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// LineState</span>
<span class="hljs-keyword">let</span> offset = <span class="hljs-number">0</span>;
<span class="hljs-keyword">const</span> <span class="hljs-attr">ops</span>: <span class="hljs-title class_">Op</span>[] = [];
<span class="hljs-variable language_">this</span>.<span class="hljs-property">leaves</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">leaf, index</span>) =&gt;</span> {
  ops.<span class="hljs-title function_">push</span>(leaf.<span class="hljs-property">op</span>);
  leaf.<span class="hljs-property">offset</span> = offset;
  leaf.<span class="hljs-property">parent</span> = <span class="hljs-variable language_">this</span>;
  leaf.<span class="hljs-property">index</span> = index;
  offset = offset + leaf.<span class="hljs-property">length</span>;
  leaf.<span class="hljs-property">key</span> = leaf.<span class="hljs-property">key</span> || <span class="hljs-title class_">Key</span>.<span class="hljs-title function_">getId</span>(leaf);
});
<span class="hljs-variable language_">this</span>.<span class="hljs-property">_ops</span> = ops;
<span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span> = offset;
<span class="hljs-variable language_">this</span>.<span class="hljs-property">isDirty</span> = <span class="hljs-literal">false</span>;
<span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">leaves</span>.<span class="hljs-property">length</span>;
</code></pre>
<p>æ­¤å¤–ï¼Œåœ¨å®ç°å•å…ƒæµ‹è¯•æ—¶è¿˜å‘ç°ï¼Œåœ¨<code>leaf</code>ä¸Šç‹¬ç«‹ç»´æŠ¤äº†<code>key</code>å€¼ï¼Œé‚£ä¹ˆ<code>\n</code>è¿™ä¸ªç‰¹æ®Šçš„èŠ‚ç‚¹è‡ªç„¶ä¹Ÿä¼šæœ‰ç‹¬ç«‹çš„<code>key</code>å€¼ã€‚è¿™ç§æƒ…å†µä¸‹åœ¨<code>line</code>çº§åˆ«ä¸Šç»´æŠ¤çš„<code>key</code>å€¼å€’æ˜¯ä¹Ÿå¯ä»¥ç›´æ¥å¤ç”¨<code>\n</code>è¿™ä¸ª<code>leaf</code>çš„<code>key</code>å€¼ã€‚å½“ç„¶è¿™åªæ˜¯ç†è®ºä¸Šçš„å®ç°ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸€äº›æ„æƒ³ä¸åˆ°çš„åˆ·æ–°é—®é¢˜ã€‚</p>
<h2 data-id="heading-2">è§†å›¾å¢é‡æ¸²æŸ“</h2>
<p>åœ¨è§†å›¾æ¨¡å—æœ€å¼€å§‹çš„è®¾è®¡ä¸Šï¼Œæˆ‘ä»¬çš„çŠ¶æ€ç®¡ç†å½¢å¼æ˜¯ç›´æ¥å…¨é‡æ›´æ–°<code>Delta</code>ï¼Œç„¶åä½¿ç”¨<code>EachLine</code>éå†é‡å»ºæ‰€æœ‰çš„çŠ¶æ€ã€‚å¹¶ä¸”å®é™…ä¸Šæˆ‘ä»¬ç»´æŠ¤äº†<code>Delta</code>ä¸<code>State</code>ä¸¤ä¸ªæ•°æ®æ¨¡å‹ï¼Œå»ºç«‹å…¶å…³ç³»æ˜ å°„å…³ç³»æœ¬èº«ä¹Ÿæ˜¯ä¸€ç§æŸè€—ï¼Œæ¸²æŸ“çš„æ—¶å€™çš„ç›®æ ‡çŠ¶æ€æ˜¯<code>Delta</code>è€Œé<code>State</code>ã€‚</p>
<p>è¿™æ ·çš„æ¨¡å‹å¿…ç„¶æ˜¯è€—è´¹æ€§èƒ½çš„ï¼Œæ¯æ¬¡<code>Apply</code>çš„æ—¶å€™éƒ½éœ€è¦å…¨é‡æ›´æ–°æ–‡æ¡£å¹¶ä¸”å†æ¬¡éå†åˆ†å‰²è¡ŒçŠ¶æ€ã€‚å½“ç„¶å®é™…ä¸Šåªæ˜¯è®¡ç®—è¿­ä»£çš„è¯ï¼Œå®é™…ä¸Šæ˜¯ä¸ä¼šå¤ªè¿‡äºè€—è´¹æ€§èƒ½ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬æ¯æ¬¡éƒ½æ˜¯æ–°çš„å¯¹è±¡ï¼Œé‚£ä¹ˆåœ¨æ›´æ–°è§†å›¾çš„æ—¶å€™ï¼Œæ›´å®¹æ˜“é€ æˆæ€§èƒ½çš„æŸè€—ï¼Œè®¡ç®—çš„æ€§èƒ½é€šå¸¸å¯æ¥å—ï¼Œè€Œè§†å›¾æ›´æ–°æ“ä½œ<code>DOM</code>æˆæœ¬æ›´é«˜ã€‚</p>
<p>å®é™…ä¸Šï¼Œæˆ‘ä»¬ä¸Šè¾¹å¤ç”¨å…¶<code>key</code>å€¼ï¼Œè§£å†³çš„é—®é¢˜æ˜¯é¿å…æ•´ä¸ªè¡ŒçŠ¶æ€è§†å›¾<code>re-mount</code>ã€‚è€Œå³ä½¿å¤ç”¨äº†<code>key</code>å€¼ï¼Œå› ä¸ºé‡å»ºäº†æ•´ä¸ª<code>State</code>å®ä¾‹ï¼Œ<code>React</code>ä¹Ÿä¼šç»§ç»­åè¾¹çš„<code>re-render</code>æµç¨‹ã€‚å› æ­¤æˆ‘ä»¬åœ¨è¿™é‡Œéœ€è¦è§£å†³çš„é—®é¢˜æ˜¯ï¼Œå¦‚ä½•åœ¨æ— å˜æ›´çš„æƒ…å†µä¸‹å°½å¯èƒ½é¿å…å…¶è§†å›¾<code>re-render</code>ã€‚</p>
<p>ç”±äºæˆ‘ä»¬å®ç°äº†è¡Œçº§ä¸å¯å˜çŠ¶æ€ç»´æŠ¤ï¼Œé‚£ä¹ˆåœ¨è§†å›¾ä¸­å°±å¯ä»¥ç›´æ¥å¯¹æ¯”çŠ¶æ€å¯¹è±¡çš„å¼•ç”¨æ˜¯å¦å˜åŒ–æ¥å†³å®šæ˜¯å¦éœ€è¦é‡æ¸²æŸ“ã€‚å› æ­¤åªéœ€è¦å¯¹äº<code>ViewModel</code>çš„èŠ‚ç‚¹è¡¥å……äº†<code>React.memo</code>ï¼Œåœ¨è¿™ä¸ªåœºæ™¯ä¸‹ç”šè‡³äºä¸éœ€è¦é‡å†™å¯¹æ¯”å‡½æ•°ï¼Œåªéœ€è¦ä¾èµ–æˆ‘ä»¬çš„<code>immutable</code>çŠ¶æ€å¤ç”¨èƒ½å¤Ÿæ­£å¸¸èµ·åˆ°æ•ˆæœã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">LeafView</span>: <span class="hljs-variable constant_">FC</span>&lt;{ <span class="hljs-attr">editor</span>: <span class="hljs-title class_">Editor</span>; <span class="hljs-attr">leafState</span>: <span class="hljs-title class_">LeafState</span>; }&gt; = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> {<span class="hljs-attr">...</span>{ [<span class="hljs-attr">LEAF_KEY</span>]<span class="hljs-attr">:</span> <span class="hljs-attr">true</span> }} &gt;</span>
      {runtime.children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>
  );
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">LeafModel</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">memo</span>(<span class="hljs-title class_">LeafView</span>);
</code></pre>
<p>åŒæ ·çš„ï¼Œé’ˆå¯¹<code>LineView</code>ä¹Ÿéœ€è¦è¡¥å……<code>memo</code>ï¼Œè€Œä¸”ç”±äºç»„ä»¶å†…æœ¬èº«å¯èƒ½å­˜åœ¨çŠ¶æ€å˜åŒ–ï¼Œä¾‹å¦‚<code>Composing</code>ç»„åˆè¾“å…¥çš„æ§åˆ¶ï¼Œæ‰€ä»¥é’ˆå¯¹äºå†…éƒ¨èŠ‚ç‚¹çš„è®¡ç®—ä¹Ÿä¼šé‡‡ç”¨<code>useMemo</code>æ¥ç¼“å­˜ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">LineView</span>: <span class="hljs-variable constant_">FC</span>&lt;{ <span class="hljs-attr">editor</span>: <span class="hljs-title class_">Editor</span>; <span class="hljs-attr">lineState</span>: <span class="hljs-title class_">LineState</span>; }&gt; = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> elements = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
     <span class="hljs-comment">// ...</span>
    <span class="hljs-keyword">return</span> nodes;
  }, [editor, lineState]);
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> {<span class="hljs-attr">...</span>{ [<span class="hljs-attr">NODE_KEY</span>]<span class="hljs-attr">:</span> <span class="hljs-attr">true</span> }} &gt;</span>
      {elements}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">LineModel</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">memo</span>(<span class="hljs-title class_">LineView</span>);
</code></pre>
<p>è€Œè§†å›¾åˆ·æ–°ä»ç„¶è¿˜æ˜¯ç›´æ¥æ§åˆ¶<code>lines</code>è¿™ä¸ªçŠ¶æ€çš„å¼•ç”¨å³å¯ï¼Œç›¸å½“äºæ ¸å¿ƒå±‚çš„å†…å®¹å˜åŒ–ä¸è§†å›¾å±‚çš„é‡æ¸²æŸ“ï¼Œæ˜¯ç›´æ¥ä¾èµ–äºäº‹ä»¶æ¨¡å—é€šä¿¡å°±å¯ä»¥å®ç°çš„ã€‚ç”±äºæ¯æ¬¡å–<code>lines</code>çŠ¶æ€æ—¶éƒ½æ˜¯æ–°çš„å¼•ç”¨ï¼Œæ‰€ä»¥<code>React</code>ä¼šè®¤ä¸ºçŠ¶æ€å‘ç”Ÿäº†å˜åŒ–ï¼Œä»è€Œè§¦å‘é‡æ¸²æŸ“ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> onContentChange = <span class="hljs-title function_">useMemoFn</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (flushing.<span class="hljs-property">current</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
  flushing.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span>;
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    flushing.<span class="hljs-property">current</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-title function_">setLines</span>(state.<span class="hljs-title function_">getLines</span>());
  });
});
</code></pre>
<p>è€Œè™½ç„¶è§¦å‘äº†æ¸²æŸ“ï¼Œä½†æ˜¯ç”±äº<code>key</code>ä»¥åŠ<code>memo</code>çš„å­˜åœ¨ï¼Œä¼šä»¥<code>line</code>çš„çŠ¶æ€ä¸ºåŸºå‡†è¿›è¡Œå¯¹æ¯”ã€‚åªæœ‰<code>LineState</code>å¯¹è±¡çš„å¼•ç”¨å‘ç”Ÿäº†å˜åŒ–ï¼Œ<code>LineModel</code>è§†å›¾æ‰ä¼šè§¦å‘æ›´æ–°é€»è¾‘ï¼Œå¦åˆ™ä¼šå¤ç”¨åŸæœ‰çš„è§†å›¾ï¼Œè¿™éƒ¨åˆ†æˆ‘ä»¬å¯ä»¥ç›´æ¥ä¾èµ–<code>React</code>çš„<code>devtools</code>å½•åˆ¶æˆ–<code>Highlight</code>å°±å¯ä»¥è§‚å¯Ÿåˆ°ã€‚</p>
<p>è§†å›¾å¢é‡æ›´æ–°è¿™éƒ¨åˆ†å…¶å®æ¯”è¾ƒç®€å•ï¼Œä¸»è¦æ˜¯å®ç°ä¸å¯å˜å¯¹è±¡ä»¥åŠ<code>key</code>å€¼ç»´æŠ¤çš„é€»è¾‘éƒ½åœ¨æ ¸å¿ƒå±‚å®ç°ï¼Œè§†å›¾å±‚ä¸»è¦æ˜¯ä¾èµ–å…¶åšè®¡ç®—ï¼Œå¯¹æ¯”æ˜¯å¦éœ€è¦é‡æ¸²æŸ“ã€‚å…¶å®ç±»ä¼¼çš„å®ç°åœ¨ä½ä»£ç çš„åœºæ™¯ä¸­ä¹Ÿå¯ä»¥åº”ç”¨ï¼Œæ¯•ç«Ÿå®é™…ä¸Šå¯Œæ–‡æœ¬ä¹Ÿå°±æ˜¯ç›¸å½“äºä¸€ä¸ªé›¶ä»£ç çš„ç¼–è¾‘å™¨ï¼Œåªä¸è¿‡ç»„è£…çš„ä¸æ˜¯ç»„ä»¶è€Œæ˜¯æ–‡æœ¬ã€‚</p>
<h2 data-id="heading-3">æ€»ç»“</h2>
<p>åœ¨å…ˆå‰æˆ‘ä»¬ä¸»è¦è®¨è®ºäº†è§†å›¾å±‚çš„é€‚é…å™¨è®¾è®¡ï¼Œä¸»è¦æ˜¯å…¨é‡çš„è§†å›¾åˆå§‹åŒ–æ¸²æŸ“ï¼Œä»¥åŠçŠ¶æ€æ¨¡å‹åˆ°<code>DOM</code>ç»“æ„æ€§çš„è§„åˆ™è®¾å®šã€‚åœ¨è¿™é‡Œåˆ™ä¸»è¦è€ƒè™‘æ›´æ–°å¤„ç†æ—¶æ€§èƒ½çš„ä¼˜åŒ–ï¼Œä¸»è¦æ˜¯åœ¨å¢é‡æ›´æ–°æ—¶ï¼Œå¦‚ä½•æœ€å°åŒ–<code>DOM</code>ä»¥åŠ<code>Op</code>æ“ä½œã€<code>key</code>å€¼çš„ç»´æŠ¤ã€ä»¥åŠåœ¨<code>React</code>ä¸­å®ç°å¢é‡æ¸²æŸ“çš„æ–¹å¼ã€‚</p>
<p>å…¶å®æ¥ä¸‹æ¥éœ€è¦è€ƒè™‘è¾“å…¥å†…å®¹æ—¶ï¼Œå¦‚ä½•é¿å…è§„å®šçš„<code>DOM</code>çš„ç»“æ„è¢«ç ´åï¼Œä¸»è¦æ¶‰åŠè„<code>DOM</code>æ£€æŸ¥ã€é€‰åŒºæ›´æ–°ã€æ¸²æŸ“<code>Hook</code>ç­‰ï¼Œè¿™éƒ¨åˆ†å†…å®¹åœ¨<code>#8</code>å’Œ<code>#9</code>çš„è¾“å…¥æ³•å¤„ç†ä¸­å·²ç»æœ‰äº†è¯¦ç»†çš„è®¨è®ºï¼Œå› æ­¤è¿™é‡Œå°±ä¸å†æ¬¡å±•å¼€äº†ã€‚</p>
<p>é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦è®¨è®ºçš„æ˜¯ç¼–è¾‘èŠ‚ç‚¹çš„ç»„ä»¶é¢„è®¾ï¼Œä¾‹å¦‚é›¶å®½å­—ç¬¦ã€<code>Embed</code>èŠ‚ç‚¹ã€<code>Void</code>èŠ‚ç‚¹ç­‰ã€‚ä¸»è¦æ˜¯ä¸ºç¼–è¾‘å™¨çš„æ’ä»¶æ‰©å±•æä¾›é¢„è®¾çš„ç»„ä»¶ï¼Œåœ¨è¿™äº›ç»„ä»¶å†…å­˜åœ¨ä¸€äº›é»˜è®¤çš„è¡Œä¸ºï¼Œå¹¶ä¸”åŒæ ·é¢„è®¾äº†éƒ¨åˆ†<code>DOM</code>ç»“æ„ï¼Œä»¥æ­¤æ¥å®ç°åœ¨è§„å®šèŒƒå›´å†…çš„ç¼–è¾‘å™¨æ“ä½œã€‚</p>
<h2 data-id="heading-4">æ¯æ—¥ä¸€é¢˜</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FWindRunnerMax%2FEveryDay" target="_blank" title="https://github.com/WindRunnerMax/EveryDay" ref="nofollow noopener noreferrer">github.com/WindRunnerMâ€¦</a></li>
</ul>
<h2 data-id="heading-5">å‚è€ƒ</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2F18.react.dev%2F" target="_blank" title="https://18.react.dev/" ref="nofollow noopener noreferrer">18.react.dev/</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2F18.react.dev%2Freference%2Freact%2Fmemo" target="_blank" title="https://18.react.dev/reference/react/memo" ref="nofollow noopener noreferrer">18.react.dev/reference/râ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2F18.react.dev%2Freference%2Freact%2FuseMemo" target="_blank" title="https://18.react.dev/reference/react/useMemo" ref="nofollow noopener noreferrer">18.react.dev/reference/râ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸æ­¢æ˜¯å†™ä»£ç ï½œäº§å“ç»ç†å¦‚ä½•ç”¨ TRAE é‡æ„å·¥ä½œæµ]]></title>    <link>https://juejin.cn/post/7604315965875159074</link>    <guid>https://juejin.cn/post/7604315965875159074</guid>    <pubDate>2026-02-09T08:07:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604315965875159074" data-draft-id="7604045354071080994" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸æ­¢æ˜¯å†™ä»£ç ï½œäº§å“ç»ç†å¦‚ä½•ç”¨ TRAE é‡æ„å·¥ä½œæµ"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2026-02-09T08:07:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="TRAE_ai"/> <meta itemprop="url" content="https://juejin.cn/user/3048259110571032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸æ­¢æ˜¯å†™ä»£ç ï½œäº§å“ç»ç†å¦‚ä½•ç”¨ TRAE é‡æ„å·¥ä½œæµ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3048259110571032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    TRAE_ai
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T08:07:08.000Z" title="Mon Feb 09 2026 08:07:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»29åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d7f8dc33c07465b963aab25298cbd83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=W76L6wcFsiX34U1ocy9wwY09kAU%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>æœ¬æ–‡ä½œè€…ï¼šææ’ï¼ŒBç«¯äº§å“ç»ç†ï¼ŒTRAE æ·±åº¦ç”¨æˆ·</p>
</blockquote>
<p>ä½ æ˜¯å¦ä¹Ÿæœ‰è¿™æ ·çš„ç»å†ï¼š</p>
<p>ä¸€ä¸ªæƒ³æ³•åœ¨è„‘å­é‡Œå·²ç»å¾ˆæ¸…æ¥šäº†ï¼Œä½†çœŸæ­£è¦è½æˆ Demoï¼Œå´è¦ç»å†ç”»åŸå‹ã€åå¤æ”¹ç¨¿ã€å’Œç ”å‘æ¥å›æ‹‰æ‰¯ï¼Œæœ€åä¸Šçº¿çš„æ–¹æ¡ˆï¼Œæ—©å°±å’Œæœ€åˆçš„è®¾æƒ³ä¸å¤ªä¸€æ ·ã€‚</p>
<p>æœ¬æ–‡å°†åˆ†äº«ä¸€åéæŠ€æœ¯èƒŒæ™¯çš„ B ç«¯äº§å“ç»ç†ï¼Œå¦‚ä½•å€ŸåŠ© TRAEï¼ŒæŠŠâ€œæƒ³æ³•â€ç›´æ¥ç¿»è¯‘æˆå¯äº¤äº’åŸå‹ä¸å¯è®¨è®ºæ–¹æ¡ˆï¼š Â ä¸ç”¨ç­‰ç ”å‘ã€ä¸ç”¨åå¤ç”»å›¾ï¼Œä¹Ÿä¸éœ€è¦ç²¾é€šä»£ç ï¼Œå°±èƒ½åœ¨éœ€æ±‚è¿­ä»£ã€0-1 é¡¹ç›®éªŒè¯ã€å¤æ‚é€»è¾‘å¯¹é½ä¸­ï¼ŒæŠŠæ•ˆç‡æå‡æ•°å€ã€‚</p>
<p>è¿™ä¸æ˜¯ä¸€ç¯‡ç®€å•çš„å·¥å…·ä»‹ç»ï¼Œè€Œæ˜¯ä¸€å¥—å·²ç»åœ¨çœŸå®å·¥ä½œä¸­åå¤éªŒè¯è¿‡çš„å®è·µæ–¹æ³•ï¼Œè¦†ç›–ä»éœ€æ±‚éªŒè¯ã€åŸå‹è¿­ä»£ï¼Œåˆ°é€»è¾‘è·‘é€šä¸æ–‡æ¡£å¯¹é½çš„å…¨è¿‡ç¨‹ã€‚å®ƒå°†å‘Šè¯‰ä½ ï¼Œä¸€ä¸ªäº§å“ç»ç†ï¼Œå¦‚ä½•å€ŸåŠ© TRAE æŠŠæ•ˆç‡è¿™ä»¶äº‹åšåˆ°æè‡´ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a91f5318f42a4f41bae138ed82279b31~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=JRXvmUG4k533MYd1TSt2W5N%2Butc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0"><strong>ä¸ºä»€ä¹ˆæˆ‘è¦å†™è¿™ç¯‡æ–‡ç« ï¼Ÿ</strong></h2>
<p>æˆ‘æ˜¯ä¸€åè´Ÿè´£ B ç«¯åŠŸèƒ½å‹äº§å“çš„äº§å“ç»ç†ï¼Œæ—¥å¸¸å¤„ç†çš„æ˜¯å¤æ‚çš„ä¸šåŠ¡é€»è¾‘å’Œåå°ç³»ç»Ÿã€‚åœ¨æ¥è§¦ TRAE ä¹‹å‰ï¼Œæˆ‘çš„å·¥ä½œè·¯å¾„æ˜¯ï¼š<strong>ç”»åŸå‹ -&gt; å†™æ–‡æ¡£ -&gt; ç­‰æ’æœŸ -&gt; åå¤è°ƒæ•´ã€‚</strong></p>
<p>ç›´åˆ°æˆ‘å¼€å§‹å°è¯•ï¼ŒæŠŠ TRAE å½“æˆâ€œå·¥ä½œä¼™ä¼´â€è€Œä¸æ˜¯â€œå†™ä»£ç çš„å·¥å…·â€ã€‚æœ¬æ–‡å°†å›´ç»•äº§å“ç»ç†çš„ 3 ä¸ªæ ¸å¿ƒå·¥ä½œåœºæ™¯å±•å¼€ï¼š</p>
<ol>
<li>
<p><strong>éœ€æ±‚è¿­ä»£çš„åŸå‹è®¾è®¡</strong></p>
</li>
<li>
<p><strong>0-1 çš„é¡¹ç›®åŸå‹ + é€»è¾‘éªŒè¯</strong></p>
</li>
<li>
<p><strong>æ–‡æ¡£çš„ç¼–å†™ä¸å¯¹é½</strong></p>
</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b02afacf94b345de927060c43033240c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=4MABBEBbh7FfEFU4kzFG%2B60EsiA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1"><strong>æ ¸å¿ƒè®¤çŸ¥ï¼šTRAE æ˜¯ã€Œæƒ³æ³•ç¿»è¯‘å™¨ã€</strong></h2>
<p>åœ¨æ·±å…¥åœºæ™¯å‰ï¼Œæˆ‘ä»¬éœ€è¦é‡å¡‘è®¤çŸ¥ï¼š<strong>TRAE çš„æœ¬è´¨æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„â€œç¿»è¯‘å™¨â€ã€‚</strong></p>
<p>å®ƒæ— æ³•å‡­ç©ºç†è§£æ¨¡ç³Šçš„æ„å›¾ï¼Œä½†åªè¦ä½ èƒ½æ¸…æ™°æè¿°é€»è¾‘ï¼Œå®ƒå°±èƒ½å°†æƒ³æ³•ç²¾å‡†åœ°â€œç¿»è¯‘â€æˆå¯äº¤äº’ã€é«˜ä¿çœŸçš„å‰ç«¯åº”ç”¨ã€‚è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>
<p><strong>è§£æ”¾åŒæ‰‹ï¼š</strong> ä»ç¹ççš„â€œç”»å›¾â€å·¥ä½œä¸­è§£æ”¾ï¼Œå‘Šåˆ«åƒç´ çº§çš„å¯¹é½å’Œç»„ä»¶æ‹–æ‹½ã€‚</p>
</li>
<li>
<p><strong>èšç„¦æ€è€ƒï¼š</strong> ç²¾åŠ›æŠ•å…¥åˆ°æ¢³ç†äº§å“é€»è¾‘ã€å®šä¹‰ç”¨æˆ·æµç¨‹å’Œæ„æ€äº¤äº’ç»†èŠ‚ä¸Šã€‚</p>
</li>
<li>
<p><strong>é«˜ä¿çœŸäº¤ä»˜ï¼š</strong> åŸå‹ä¸å†æ˜¯é™æ€çº¿æ¡†å›¾ï¼Œè€Œæ˜¯åŠ¨æ€çš„ã€é«˜ä¿çœŸçš„ HTML é¡µé¢ ã€‚</p>
</li>
</ul>
<p>è¿™ä¸ªè½¬å˜ï¼Œæ˜¯åç»­æ‰€æœ‰æ•ˆç‡æå‡å’Œèƒ½åŠ›é£è·ƒçš„åŸºç¡€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b26fe32636144ac091a9adef3f97ba5d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=xedS1xqOvYmxvlar4nsITFDYNvI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2"><strong>åä½œåŸåˆ™ï¼šå°æ­¥å¿«è·‘ï¼Œå¢é‡è¿­ä»£</strong></h2>
<p><strong>ä¸ TRAE åä½œï¼Œæœ€é‡è¦çš„åŸåˆ™æ˜¯ï¼šå°æ­¥å¿«è·‘ï¼Œæ‹’ç»ä¸€å£æ°”åƒæˆèƒ–å­ã€‚</strong></p>
<p>ä¸å…¶è¯•å›¾ç”¨ä¸€æ®µå†—é•¿è€Œå¤æ‚çš„æŒ‡ä»¤ç”Ÿæˆå®Œç¾ç³»ç»Ÿï¼Œä¸å¦‚å°†ç›®æ ‡æ‹†è§£æˆä¸€ä¸ªä¸ªå…·ä½“ã€æ˜ç¡®çš„å°æ­¥éª¤ï¼Œé€šè¿‡æŒç»­çš„ã€å¢é‡å¼çš„è¿­ä»£æ¥é€æ­¥å®Œå–„ã€‚è¿™å¥—æ–¹æ³•è®ºå¯ä»¥æ¦‚æ‹¬ä¸ºâ€œæ¡†æ¶-ç»„ä»¶-äº¤äº’â€ä¸‰æ­¥èµ°ï¼š</p>
<ol>
<li>
<p><strong>å…ˆæ­æ¡†æ¶ï¼š</strong> è®© TARE ç”Ÿæˆæœ€åŸºç¡€çš„é¡µé¢å¸ƒå±€å’Œç»“æ„ã€‚</p>
</li>
<li>
<p><strong>å†å¡«ç»„ä»¶ï¼š</strong> åœ¨æ¡†æ¶å†…é€æ­¥æ·»åŠ å¿…è¦çš„ UI ç»„ä»¶ï¼Œå¦‚æŒ‰é’®ã€è¾“å…¥æ¡†ã€åˆ—è¡¨ç­‰ã€‚</p>
</li>
<li>
<p><strong>åè°ƒäº¤äº’ï¼š</strong> æœ€åä¸ºè¿™äº›ç»„ä»¶æ³¨å…¥ç”Ÿå‘½ï¼Œå®ç°ç‚¹å‡»ã€è·³è½¬ã€æ•°æ®åŠ è½½ç­‰åŠ¨æ€äº¤äº’ã€‚</p>
</li>
</ol>
<p>å§‹ç»ˆè®°ä½ï¼Œæ¯ä¸€æ¬¡ä¸ TRAE çš„äº¤äº’éƒ½åº”è¯¥åªå…³æ³¨ä¸€ä¸ªå…·ä½“ã€æ˜ç¡®çš„ç›®æ ‡ã€‚è¿™æ ·çš„â€œå°æ­¥å¿«è·‘â€ï¼Œä¸ä»…èƒ½ä¿è¯ TRAE çš„ç†è§£å‡†ç¡®ç‡ï¼Œä¹Ÿè®©ä½ èƒ½å§‹ç»ˆæŒæ§é¡¹ç›®çš„è¿›å±•å’Œæ–¹å‘ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c9464ba06b547b4a546c89781923675~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=Bek%2FHv0iMbVQBNuyhjsFuyffXYw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3"><strong>ä¸‰å¤§æ ¸å¿ƒåœºæ™¯ï¼šç”¨ TRAE é‡æ„äº§å“å·¥ä½œæµ</strong></h2>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°†ç»“åˆä¸€ä¸ªBç«¯äº§å“ç»ç†çš„æ—¥å¸¸ï¼Œé€šè¿‡ä¸‰ä¸ªæœ€å…¸å‹çš„å·¥ä½œåœºæ™¯ï¼Œå±•ç¤º TRAE æ˜¯å¦‚ä½•é¢ è¦†ä¼ ç»Ÿå·¥ä½œæ¨¡å¼çš„ã€‚æ¯ä¸€ä¸ªåœºæ™¯éƒ½é™„å®æˆ˜æ¡ˆä¾‹å’Œå¯ç›´æ¥å¤ç”¨çš„æŠ€å·§ï¼Œå»ºè®®æ”¶è—å¤‡ç”¨ï¼</p>
<h3 data-id="heading-4"><strong>åœºæ™¯ä¸€ï¼šéœ€æ±‚è¿­ä»£ä¸åŸå‹è®¾è®¡</strong></h3>
<p><strong>å·¥ä½œæµå¯¹æ¯”ï¼š</strong></p>
<p><strong>è¿‡å» (Old School)</strong></p>
<ul>
<li>
<p><strong>ç—›è‹¦ç”»å›¾ï¼š</strong> åœ¨ Axure/Figma ä¸­åå¤æ‹–æ‹½ï¼Œä¸ºäº†ä¸€ä¸ªæŒ‰é’®çš„å¯¹é½çº ç»“åŠå¤©ã€‚äº§å‡ºçš„æ˜¯ä½ä¿çœŸçº¿æ¡†å›¾ï¼Œä¸æœ€ç»ˆæ•ˆæœå·®å¼‚å·¨å¤§ã€‚</p>
</li>
<li>
<p><strong>åå¤æ‹‰æ‰¯ï¼š</strong> æ‹¿ç€çº¿æ¡†å›¾å‘è€æ¿ã€UIã€ç ”å‘è§£é‡Šï¼Œâ€œè¿™é‡Œä»¥åæ˜¯å½©è‰²çš„â€ã€â€œè¿™ä¸ªæŒ‰é’®ç‚¹å‡»åä¼šå¼¹å‡ºä¸€ä¸ªæ¡†â€â€¦ æ²Ÿé€šæˆæœ¬é«˜ï¼Œä¿¡æ¯æŸè€—ä¸¥é‡ã€‚</p>
</li>
<li>
<p><strong>æ—¶é—´æˆæœ¬ï¼š</strong> 2 äººå¤©èµ·æ­¥ã€‚</p>
</li>
</ul>
<p><strong>ç°åœ¨ (TRAE Flow)</strong></p>
<ul>
<li>
<p><strong>â€œå˜´æ›¿â€ç¼–ç¨‹ï¼š</strong> ä¸€å¼ æˆªå›¾ã€ä¸€ä¸ª Figma é“¾æ¥ï¼Œç›´æ¥â€œå–‚â€ç»™ TRAEï¼Œå³åˆ»ç”Ÿæˆé«˜ä¿çœŸ HTML é¡µé¢ã€‚</p>
</li>
<li>
<p><strong>å…‰é€Ÿå®šç¨¿ï¼š</strong> ä»»ä½•è°ƒæ•´ï¼Œç›´æ¥ç”¨è‡ªç„¶è¯­è¨€â€œå‘Šè¯‰â€TRAEï¼ŒåŠå°æ—¶å†…å°±èƒ½çœ‹åˆ°æœ€ç»ˆæ•ˆæœï¼Œå®ç°â€œä¼šä¸Šå†³ç­–ã€å½“åœºä¿®æ”¹ã€å³æ—¶ç”Ÿæ•ˆâ€ã€‚</p>
</li>
<li>
<p><strong>æ—¶é—´æˆæœ¬ï¼š</strong> 0.5 äººå¤©ï¼Œæ•ˆç‡æå‡è‡³å°‘ 4 å€ã€‚</p>
</li>
</ul>
<p><strong>æ ¸å¿ƒä»·å€¼ï¼šæ•ˆç‡æå‡4 å€ï¼Œè¿™ä¸ä»…èŠ‚çœäº†æ—¶é—´ï¼Œæ›´å°†äº§å“ç»ç†ä»é‡å¤æ€§åŠ³åŠ¨ä¸­è§£æ”¾å‡ºæ¥ï¼Œå›å½’åˆ°åˆ›é€ æ€§æ€è€ƒæœ¬èº«ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/770bae44f32b4cd497ccb17674c8ae19~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=bS6VbG07%2FmOJxDAgpiXB9sSR4Dw%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5"><strong>å®æˆ˜æ¡ˆä¾‹ï¼šç»™ TRAE å®˜ç½‘åŠ ä¸ªèŠå¤©æœºå™¨äºº</strong></h3>
<p><strong>TRAE é…ç½®æ¸…å•ï¼š</strong></p>
<ul>
<li>
<p><strong>æ¨¡å‹ï¼š</strong> gemini-3-pro-preview</p>
</li>
<li>
<p><strong>æ™ºèƒ½ä½“ï¼š</strong> Builder with MCP</p>
</li>
<li>
<p><strong>MCPï¼š</strong> Playwright, Figma AI Bridge (å¯é€‰)</p>
</li>
<li>
<p><em>(MCP é…ç½®æ–¹å¼è§æ–‡æœ«é™„å½•)</em></p>
</li>
</ul>
<p><strong>éœ€æ±‚èƒŒæ™¯ï¼š</strong> åœ¨ TRAE çš„ Profile é¡µé¢å³ä¾§ï¼Œå¢åŠ ä¸€ä¸ªä¸»æµçš„ä¾§è¾¹ Agent èŠå¤©é¢æ¿ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1b0faff033b44b9bd351a18564a5d9b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=gCUwTeu4wI4xjvSJPlkkOuYGLIw%3D" alt="" loading="lazy"/>ç›®æ ‡åŸå‹æ•ˆæœ</p>
<h4 data-id="heading-6"><strong>ç¬¬ä¸€æ­¥ï¼šè¿˜åŸç°çŠ¶ï¼Œè®© TRAE çœ‹æ‡‚ä½ çš„äº§å“</strong></h4>
<p>è¦åœ¨ä¸€ä¸ªç°æœ‰äº§å“ä¸Šåšè¿­ä»£ï¼Œé¦–å…ˆå¾—è®© TRAE â€œçœ‹æ‡‚â€å½“å‰çš„é¡µé¢ã€‚è¿™é‡Œæœ‰ä¸¤ç§é«˜æ•ˆçš„æ–¹æ³•ï¼š</p>
<p><strong>1. é¡µé¢æˆªå›¾æ³• (æˆªå›¾ + Playwright MCP)</strong></p>
<p>è¿™æ˜¯æœ€ç›´æ¥çš„æ–¹å¼ã€‚å°†ä½ è¦è¿­ä»£çš„é¡µé¢å®Œæ•´æˆªå›¾ï¼Œç„¶åç”¨è¿™æ ·çš„æç¤ºè¯å–‚ç»™ TRAEï¼š</p>
<p><strong>ğŸ’¡ æç¤ºè¯å¿ƒå¾—ï¼š</strong></p>
<blockquote>
<p>æ ¸å¿ƒæ˜¯å‘Šè¯‰ TRAE ä½ çš„ç›®çš„å’Œçº¦æŸã€‚ä¸éœ€è¦é•¿ç¯‡å¤§è®ºï¼Œä½†è¦åŒ…å«å…³é”®ä¿¡æ¯ã€‚</p>
<p>â€œæ ¹æ®æˆ‘ç»™ä½ çš„è¿™å¼ è®¾è®¡å›¾ï¼Œå¸®æˆ‘1:1 è¿˜åŸä¸€ä¸ªå‰ç«¯ HTML é¡µé¢ã€‚<strong>è¿™åªæ˜¯ä¸€ä¸ªç”¨äºéœ€æ±‚æ²Ÿé€šçš„ Demoï¼Œä¸éœ€è¦è¿æ¥åç«¯æ¥å£ã€‚</strong> æŠ€æœ¯æ ˆä½¿ç”¨ Reactã€‚â€</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af74e4bebab64361b9134e809fda1abb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=N6kmUvGoUNvASJUhmHlDYW14KH4%3D" alt="" loading="lazy"/></p>
<p><strong>2. è®¾è®¡ç¨¿è¿˜åŸæ³• (Figma + AI Bridge)</strong></p>
<p>å€ŸåŠ© <strong>Builder.io æ’ä»¶ã€‚</strong> å®ƒå¯ä»¥å¤åˆ¶å‰ç«¯é¡µé¢çš„å¸ƒå±€ï¼Œç»“åˆå®ƒåœ¨ Figma ä¸Šçš„æ’ä»¶ï¼Œèƒ½å¤Ÿå°†å‰ç«¯è¿˜åŸåˆ° Figma ä¸­ã€‚</p>
<p>ç„¶åå†ç²˜è´´ Figma çš„ç´ æåœ°å€ï¼Œä½¿ç”¨ <strong>Figma AI Bridge MCP</strong> æ¥è¿˜åŸè¿™ä¸ªå‰ç«¯é¡µé¢ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c806d57d32a9495ab10975cb140278d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=n2ZNiFxU9S5S4GXLykPusGnvlJI%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82562a7150a044978a3dbedc9c6618c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=Fi%2FnnH%2FqB%2FJWBDHFvVk%2FfzIUU0o%3D" alt="" loading="lazy"/></p>
<p><strong>æç¤ºè¯ç¤ºä¾‹ï¼š</strong></p>
<blockquote>
<p>è¯·ä½ ä½¿ç”¨ figma ai bridge mcpï¼Œè¯»å–æˆ‘çš„è®¾è®¡å›¾ https:.... æ¥å¸®æˆ‘1:1 è¿˜åŸä¸€ä¸ªå‰ç«¯çš„ html é¡µé¢ã€‚å¹¶ä¸”ä¸éœ€è¦æ¥å…¥åç«¯ï¼Œå› ä¸ºæˆ‘çš„é¡¹ç›®æ˜¯ä¸€ä¸ªä»…å‰ç«¯ç”¨äºéœ€æ±‚åŒæ­¥çš„ demo é¡¹ç›®ï¼Œé¡µé¢ä¸Šçš„æ•°æ®ï¼Œéƒ½é‡‡å–å‰ç«¯å†™å…¥çš„æ–¹å¼ï¼Œä¸éœ€è¦ç”¨åˆ°åç«¯çš„æ¥å£è·å–ã€‚è¯­è¨€ä½¿ç”¨ react</p>
</blockquote>
<h4 data-id="heading-7"><strong>ç¬¬äºŒæ­¥ï¼šè¿˜åŸæ•ˆæœæ£€æŸ¥</strong></h4>
<p><strong>æ ¸å¿ƒå·¥å…·ï¼šPlaywright MCP</strong></p>
<p>åœ¨ TRAE åšå®Œäº†åˆæ­¥çš„å®ç°ä»¥åï¼Œå¤šå°‘æ˜¯ä¼šè·Ÿæˆ‘ä»¬çš„å‚è€ƒçš„ç½‘é¡µæœ‰äº›å·®å¼‚ã€‚è¿™æ—¶å€™å°±è¦ç”¨åˆ° <strong>Playwright MCP</strong> äº†ã€‚</p>
<p><strong>æ ¸å¿ƒç›®çš„ï¼š</strong> è®© TRAE èƒ½å¤Ÿæ‰“å¼€ç›®å‰å·²ç»å†™å‡ºæ¥çš„ç½‘é¡µï¼Œè·å–å‰ç«¯çš„å±•ç¤ºä¿¡æ¯ï¼Œè¿™æ · TRAE å°±èƒ½å¤Ÿå¯¹å¾—ä¸Šå®ƒçš„ä»£ç ï¼Œä»¥åŠæœ€ç»ˆçš„å‰ç«¯å‘ˆç°ã€‚</p>
<p><strong>è¿›é˜¶ç”¨é€”ï¼š</strong> ä½ ä¹Ÿå¯ä»¥è®©ä»–æ‰“å¼€æˆ‘ä»¬<strong>å‚è€ƒçš„ç½‘é¡µ</strong>ï¼Œå¯¹ç…§å‚è€ƒç½‘é¡µçš„å‰ç«¯æ ·å¼å®ç°å’Œæ ·å¼è§„èŒƒï¼Œæ£€æŸ¥ç›®å‰å®ƒå®ç°çš„å‰ç«¯é¡µé¢æ˜¯å¦å­˜åœ¨å“ªäº›åœ°æ–¹æ˜¯æ²¡æœ‰æŒ‰ç…§ç›®æ ‡å®ç°çš„ã€‚</p>
<p><strong>æ£€æŸ¥æ—¶çš„æç¤ºè¯ç¤ºä¾‹ï¼š</strong></p>
<blockquote>
<p>è¯·ä½ ç”¨ playwrightmcp æ‰“å¼€ä½ ç›®å‰å®ç°çš„å‰ç«¯é¡µé¢ã€‚ä»¥åŠæˆ‘ç»™ä½ çš„è¿™ä¸ªå‚è€ƒç½‘ç«™ https:....ï¼›æˆ‘å¸Œæœ›ä½ èƒ½å¤Ÿå¯¹ç…§ä½ ç›®å‰çš„å‰ç«¯é¡µé¢ï¼Œä¸æˆ‘çš„å‚è€ƒç½‘ç«™çš„å‰ç«¯æ ·å¼ã€‚å¸®æˆ‘æ£€æŸ¥è¿˜æœ‰å“ªä¸€äº›æ¨¡å—æ²¡æœ‰åšåˆ° 1:1 çš„è¿˜åŸã€‚å› ä¸ºå‰é¢ç»™ä½ çš„è®¾è®¡å›¾ï¼Œå…¶å®å°±æ˜¯æ¥æºäºè¿™ä¸ªå‚è€ƒç½‘ç«™çš„ã€‚</p>
<p>åœ¨ä½ æ£€æŸ¥çš„æ—¶å€™ï¼Œè¯·ä½ ç‰¹åˆ«æ³¨æ„ä»¥ä¸‹çš„å‡ ä¸ªç»´åº¦æ˜¯å¦å¾—åˆ°äº†è¿˜åŸï¼š</p>
<ul>
<li>å­—å·å¤§å°çš„å±‚çº§å…³ç³»</li>
<li>å®¹å™¨ä¹‹é—´çš„é—´è·ä¸å¯¹é½</li>
<li>é¢œè‰²ç³»ç»Ÿ</li>
</ul>
</blockquote>
<h4 data-id="heading-8"><strong>ç¬¬ä¸‰æ­¥ï¼šç»†èŠ‚å¾®è°ƒï¼Œæå®šâ€œå€”å¼ºâ€çš„AI</strong></h4>
<p>æ€»æœ‰äº›ç»†èŠ‚ï¼ŒTRAE å¯èƒ½ä¼šåå¤ä¿®æ”¹å´ä¾ç„¶é”™æ¼ï¼Œç”šè‡³â€œå˜´ç¡¬â€è¯´å·²ç»æ”¹å¥½äº†ã€‚è¿™é€šå¸¸æ„å‘³ç€ TRAE çš„é»˜è®¤è§£å†³è·¯å¾„é‡åˆ°äº†éšœç¢ã€‚æ­¤æ—¶ï¼Œéœ€è¦æˆ‘ä»¬æä¾›æ›´ç²¾å‡†çš„â€œå¯¼èˆªâ€ã€‚</p>
<p><strong>1ã€å¤åˆ¶ Classname ç²¾å‡†å®šä½</strong></p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æˆªå›¾ï¼Œä»¥åŠå¤åˆ¶å‰ç«¯çš„ <em><strong>classname</strong></em> çš„å½¢å¼ï¼Œå‘Šè¯‰ TRAE åˆ°åº•å“ªä¸€å—æ˜¯è¿˜åšçš„ä¸åˆ°ä½çš„ï¼Œåº”è¯¥è¦æ€ä¹ˆåšã€‚</p>
<p><strong>æ“ä½œæŠ€å·§ï¼š</strong></p>
<blockquote>
<p>æ‰“å¼€æµè§ˆå™¨çš„æ£€æŸ¥ï¼ˆå³é”® -&gt; æ£€æŸ¥ï¼Œæˆ–è€… F12ï¼‰ï¼Œé€šè¿‡å…ƒç´ é€‰æ‹©å™¨å®šä½åˆ°ç›®æ ‡å…ƒç´ ï¼Œåœ¨å³ä¾§ DOM æ ‘ä¸­åŒå‡»é€‰ä¸­ç›®æ ‡çš„ <em><strong>classname</strong></em> å¹¶å¤åˆ¶ã€‚</p>
</blockquote>
<p><strong>æç¤ºè¯ç¤ºä¾‹ï¼š</strong></p>
<blockquote>
<p>ç›®å‰æˆ‘è§‚å¯Ÿåˆ°ï¼Œå‰ç«¯çš„ **<em>{{classname}}</em> **è¿˜æ²¡æœ‰æŒ‰æˆ‘çš„è¦æ±‚è¿˜åŸã€‚ä¹Ÿå°±æ˜¯æˆ‘ç»™ä½ å‘é€çš„é¡µé¢æˆªå›¾å›¾ 1ï¼ˆæ­¤å¤„ç²˜è´´å®ç°çš„å›¾ç‰‡ï¼‰ã€‚æˆ‘å¸Œæœ›ä½ æ ¹æ®å›¾ 2 çš„æ ·å¼å¸®æˆ‘åšè¿˜åŸï¼ˆæ­¤å¤„ç²˜è´´æœŸæœ›æ ·å¼çš„æˆªå›¾ï¼‰ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ playwrightmcp æ‰“å¼€æˆ‘çš„å‚è€ƒç½‘ç«™ https:... ä¸­ï¼ŒæŸ¥çœ‹ **<em>{{æˆ‘å‚è€ƒç½‘ç«™å¯¹åº”ç»„ä»¶ classname}}</em> **çš„å®ç°ï¼Œå¹¶åœ¨æˆ‘çš„é¡¹ç›®ä¸­ 1:1 çš„è¿˜åŸå®ƒã€‚</p>
</blockquote>
<p><strong>2ã€å½“ TRAEã€Œæ­»é¸­å­å˜´ç¡¬ã€æ—¶æ€ä¹ˆåŠ</strong></p>
<p>å¦‚æœè¿˜æœ‰ä¸€äº›ç»†èŠ‚ï¼ŒTRAE æ— æ³•è¿˜åŸå¹¶åå¤â€œå˜´ç¡¬â€è¯´æ”¹å¥½äº†</p>
<p>è¿™æ—¶å€™æˆ‘åŸºæœ¬åˆ¤æ–­ï¼š<strong>å¯èƒ½ TRAE è‡ªå·±ä¹ æƒ¯çš„åˆ¤æ–­æˆ–è€…å®ç°çš„ç»´åº¦ï¼Œå¹¶ä¸èƒ½è§£å†³æˆ‘çš„é—®é¢˜ã€‚åˆ†äº«4ä¸ªç»ˆææ‰‹æ®µï¼Œäº²æµ‹æœ‰æ•ˆï¼š</strong></p>
<ul>
<li>
<p><strong>ç»†è‡´è¡¨è¾¾ï¼š</strong> å°†ä½ è®¤ä¸ºä¸€ç›´æ²¡æœ‰å®ç°çš„åœ°æ–¹ï¼Œæ›´ç»†è‡´åœ°è¡¨è¾¾å‡ºæ¥ï¼ˆè¿ç”¨ classnameã€æˆªå›¾ã€playwright ç­‰ï¼‰ã€‚æˆ–è€…è¯¦ç»†åœ°ç”¨è‡ªç„¶è¯­è¨€è¡¨è¾¾ç°çŠ¶ vs æœŸæœ›ï¼Œè®© TRAE å¸®ä½ æ ¹æ®ç°çŠ¶ä»£ç çŒœæµ‹åŸå› ã€‚</p>
</li>
<li>
<p><strong>æŒ‡å®šç»´åº¦ï¼š</strong> å¦‚æœä½ è‡ªå·±çŸ¥é“å¤§æ¦‚æ˜¯ä»€ä¹ˆç»´åº¦ï¼ˆæ¯”å¦‚ flex å¸ƒå±€ã€z-index å±‚çº§ï¼‰å¯èƒ½èƒ½å¤Ÿä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œå°±è®©æ¨¡å‹å¾€è¿™ä¸ªç»´åº¦ä¸Šå»æ€è€ƒã€‚</p>
</li>
<li>
<p><strong>æ›´æ¢æ¨¡å‹ï¼š</strong> çœ‹çœ‹å…¶ä»–æ¨¡å‹ï¼ˆå¦‚ GPT-5.2 æˆ– GPT-5.1ï¼‰å¯¹äºè¿™ä¸ªåœºæ™¯ä¸‹ï¼Œæ˜¯å¦å®ƒçš„ä¹ æƒ¯æ€§è§£å†³æ–¹æ¡ˆèƒ½å¤Ÿè¦†ç›–è¿™ä¸ªé—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>é‡ç½®ä¸Šä¸‹æ–‡ï¼š</strong> æ–°å¼€å¯¹è¯ï¼Œçœ‹çœ‹æ˜¯å¦å› ä¸ºä¸Šä¸‹æ–‡è¿‡é•¿å¯¼è‡´æ¨¡å‹å­˜åœ¨äº†ä¸´æ—¶çš„ã€Œæ€ç»´å®šå¼ã€ã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2c75148355143b1b3f9eee2cce918d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=dEzR1eoQPYIWqBQw4aOtvw%2F7Aqo%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-9"><strong>å®Œæˆå‰ä¸‰æ­¥çš„å…³é”®æ€»ç»“ï¼š</strong></h4>
<p><strong>1ã€æç¤ºè¯æŠ€å·§</strong></p>
<p>å›é¡¾æˆ‘è¿˜åŸ TRAE Profile é¡µé¢çš„è¿‡ç¨‹ï¼Œå¤§æ¦‚æ‰«ä¸€ä¸‹å°±å¯ä»¥å‘ç°ï¼Œæˆ‘è·Ÿ TRAE çš„äº¤äº’æç¤ºè¯ï¼Œä¸»æ‰“ä¸€ä¸ª<strong>è‡ªç”±éšæ€§</strong>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ebff9b73a4eb4cd2a762680e803caa44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=bd773kFRfevu0qe9EL%2BuanDJRRE%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93165834d1bd4b2aa6611b13084dfe85~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=uaIRRhbuZS31LVMk%2Bh5%2F0s5z3Rk%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2937d85b16844a8198155ba701d7dbf1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=k18X9fahL1GnWdROJ6xcn9NHUwA%3D" alt="show_682105790_1770623468623.png" loading="lazy"/></p>
<p><strong>é‡ç‚¹å…¶å®è¿˜æ˜¯è¿™3ç‚¹ï¼Œè®°ç‰¢å°±èƒ½å°‘è¸©å‘ï¼š</strong></p>
<ul>
<li>
<p>æœ‰æ²¡æœ‰æŠŠéœ€æ±‚è¡¨è¾¾æ¸…æ¥šï¼Ÿ</p>
</li>
<li>
<p>æ˜¯å¦ç»™è¶³äº† AI å®šä½é—®é¢˜çš„å‚è€ƒä¿¡æ¯ï¼Ÿ</p>
</li>
<li>
<p>æ˜¯å¦æä¾›äº†ç›®æ ‡å®ç°çš„å‚è€ƒä¿¡æ¯ï¼Ÿ</p>
</li>
</ul>
<p>ç»™å‡ºä»¥ä¸Šå…³é”®ä¿¡æ¯çš„æ‰‹æ®µï¼Œå¯ä»¥æ˜¯<strong>æ–‡æœ¬æè¿°</strong>ï¼Œå¯ä»¥æ˜¯<strong>æˆªå›¾</strong>ï¼Œä¹Ÿå¯ä»¥æ˜¯åˆ©ç”¨ <strong>Playwright MCP</strong> è®© TRAE è‡ªå·±å»åšå‚ç…§ã€‚</p>
<p><strong>2ã€é¡¹ç›®è§„èŒƒæœ€ä½³å®è·µ</strong></p>
<p>å½“é¡¹ç›®è¾¾åˆ°åŸºç¡€å¯ç”¨çŠ¶æ€ä¹‹åï¼Œå»ºè®®å¤§å®¶åš2ä»¶äº‹ï¼š</p>
<p><strong>â‘ ç¼–å†™å¯åŠ¨è„šæœ¬</strong></p>
<p>è®© AI å¸®ä½ å†™ä¸€ä¸ª <em><strong>sh</strong></em> çš„å¯åŠ¨è„šæœ¬ã€‚è¿™æ ·æ–¹ä¾¿æˆ‘ä»¬åé¢éœ€è¦å†æ¬¡å¯åŠ¨è¿™ä¸ªé¡¹ç›®æ—¶ï¼Œç›´æ¥å°†è¿™ä¸ªè„šæœ¬æ‹–æ‹½åˆ°ç»ˆç«¯ï¼Œå›è½¦æ‰§è¡Œå³å¯å¯åŠ¨ã€‚</p>
<p><strong>å»ºè®®åŠ ä¸Šå‡ ä¸ªç»†èŠ‚ï¼š</strong></p>
<ul>
<li>
<p><strong>å›ºå®šç«¯å£ï¼š</strong> å…è®¸æ¸…ç©ºå ç”¨ï¼Œå†å¯åŠ¨ã€‚é˜²æ­¢ç«¯å£å†²çªã€‚</p>
</li>
<li>
<p><strong>æ‰“å°åœ°å€ï¼š</strong> å¯åŠ¨ååœ¨ç»ˆç«¯æ‰“å°è®¿é—®åœ°å€ï¼Œæ–¹ä¾¿ç‚¹å‡»ã€‚</p>
</li>
</ul>
<p><strong>æç¤ºè¯ç¤ºä¾‹ï¼š</strong></p>
<blockquote>
<p>è¯·ä½ å¸®æˆ‘åˆ›å»ºä¸€ä¸ª sh çš„ start è„šæœ¬ï¼Œæ–¹ä¾¿æˆ‘æ¯æ¬¡å¯åŠ¨é¡¹ç›®éƒ½åªéœ€è¦åœ¨ç»ˆç«¯æ‰§è¡Œè¿™ä¸ª sh è„šæœ¬ã€‚å¹¶ä¸”æˆ‘å¸Œæœ›è¿™ä¸ªè„šæœ¬èƒ½å¤Ÿæ¯æ¬¡éƒ½å›ºå®šç«¯å£å¯åŠ¨ï¼Œå¦‚æœé‡åˆ°ç«¯å£è¢«å ç”¨çš„æƒ…å†µï¼Œéœ€è¦æ¸…ç†è¢«å ç”¨çš„ç«¯å£ï¼Œå†ä½¿ç”¨è¯¥ç«¯å£å¯åŠ¨ï¼Œä¿è¯æ¯æ¬¡éƒ½èƒ½å¤Ÿå›ºå®šç«¯å£ã€‚åŒæ—¶åœ¨å¯åŠ¨æˆåŠŸåï¼Œéœ€è¦åœ¨ç»ˆç«¯æ‰“å°å‡ºæˆ‘çš„è®¿é—®åœ°å€ã€‚</p>
</blockquote>
<p><strong>â‘¡æ²‰æ·€å‰ç«¯è§„èŒƒæ–‡æ¡£ (FRONTEND_SPEC.md)</strong></p>
<p>è®© TRAE å¸®ä½ æ€»ç»“ä¸€ä¸ªå‰ç«¯è§„èŒƒçš„ md æ–‡æ¡£ã€‚</p>
<p>åé¢ç»§ç»­è¿­ä»£æ—¶ï¼Œåœ¨éœ€æ±‚å‰é¢å¸¦ä¸Šè¿™ä¸ªæ–‡æ¡£ï¼Œè®© TRAE éµå®ˆè§„èŒƒï¼Œèƒ½ä¿è¯æ ·å¼é£æ ¼ç»Ÿä¸€ï¼Œå¸ƒå±€æ›´åˆç†ã€‚</p>
<p><strong>å»ºè®®åŒ…å«ä»¥ä¸‹ç»´åº¦ï¼š</strong></p>
<ul>
<li>
<p>é—´è·ç³»ç»Ÿ</p>
</li>
<li>
<p>é¢œè‰²ç³»ç»Ÿ</p>
</li>
<li>
<p>å­—ä½“å±‚çº§ä¸å­—å·å¤§å°</p>
</li>
<li>
<p>ç½‘é¡µå¸ƒå±€æ¡†æ¶</p>
</li>
</ul>
<p><strong>æç¤ºè¯ç¤ºä¾‹ï¼š</strong></p>
<blockquote>
<p>è¯·ä½ æ ¹æ®å½“å‰çš„æ ·å¼å®ç°ï¼Œå¸®æˆ‘åˆ›å»ºä¸€ä»½å‰ç«¯è§„èŒƒçš„ md æ–‡æ¡£ã€‚è¿™ä¸€ä»½æ–‡æ¡£ï¼Œåœ¨åé¢å°†ä¼šä½œä¸ºæˆ‘çš„é¡¹ç›®çš„è®¾è®¡è§„èŒƒä½¿ç”¨ã€‚åœ¨è§„èŒƒé‡Œï¼Œæˆ‘è®¤ä¸ºè‡³å°‘éœ€è¦åŒ…å«ä»¥ä¸‹çš„æ¨¡å—ï¼š</p>
<ul>
<li>
<p>é¡¹ç›®å‰ç«¯é¡µé¢çš„åŸºç¡€å¸ƒå±€</p>
</li>
<li>
<p>å­—å·å¤§å°ç³»ç»Ÿ</p>
</li>
<li>
<p>é¢œè‰²ç³»ç»Ÿ</p>
</li>
<li>
<p>é—´è·ç³»ç»Ÿ</p>
</li>
</ul>
</blockquote>
<h4 data-id="heading-10"><strong>ç¬¬å››æ­¥ï¼šéœ€æ±‚è½åœ°ï¼Œè®©åŸå‹â€œåŠ¨â€èµ·æ¥</strong></h4>
<p>å½“é¡µé¢è¿˜åŸå®Œæ¯•ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹çœŸæ­£çš„è¿­ä»£äº†ã€‚è¿˜è®°å¾—æˆ‘ä»¬çš„éœ€æ±‚å—ï¼Ÿ<strong>ğŸ‘‰ åœ¨å³ä¾§å¢åŠ ä¸€ä¸ªä¾§è¾¹çš„ Agent èŠå¤©é¢æ¿ã€‚</strong></p>
<p>ç”±äºåšè¿­ä»£åŸºæœ¬æ˜¯æ²¡æœ‰è®¾è®¡å›¾å‚è€ƒçš„ï¼Œè€ƒéªŒçš„å°±æ˜¯æˆ‘ä»¬<strong>é€šè¿‡æ–‡æœ¬æ¥è¡¨è¾¾äº¤äº’çš„èƒ½åŠ›ã€‚</strong></p>
<p><strong>æˆ‘çš„æ–¹æ³•è®ºï¼šç”¨â€œç”¨æˆ·è§†è§’â€æ¥æè¿°äº¤äº’ï¼Œè¡¨è¾¾æ¸…æ¥šä»¥ä¸‹5ç‚¹ï¼š</strong></p>
<ul>
<li>
<p>æˆ‘ä»¬å¸Œæœ›çš„äº¤äº’ï¼Œå®ƒä»èµ·å§‹åˆ°ç»“æŸï¼Œåœ¨ä»€ä¹ˆä½ç½®ï¼Ÿ</p>
</li>
<li>
<p>é€šè¿‡ä»€ä¹ˆæ“ä½œï¼Ÿ</p>
</li>
<li>
<p>ç‚¹å‡»åï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p>
</li>
<li>
<p>åˆåœ¨å“ªä¸ªä½ç½®å‡ºç°ï¼Ÿ</p>
</li>
<li>
<p>ä¼šå‡ºç°ä»€ä¹ˆå†…å®¹ï¼Ÿ</p>
</li>
</ul>
<p><strong>âš ï¸ è®°å¾—è¦æºå¸¦ä¸Šæˆ‘ä»¬ä¸Šé¢æ€»ç»“çš„é‚£ä¸€ä»½å‰ç«¯è§„èŒƒï¼</strong></p>
<p><strong>å®æˆ˜æç¤ºè¯ç¤ºä¾‹ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34073c018a0d4b78a1395732d660f60e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=Hq098%2B%2F1mjUNjB6Hbtiwn2UjRr8%3D" alt="show_682105790_1770623599386.png" loading="lazy"/></p>
<p>ç°åœ¨æˆ‘å¸Œæœ›åœ¨æˆ‘çš„é¡µé¢çš„å³ä¾§åŒºåŸŸï¼Œå¢åŠ ä¸€ä¸ªèŠå¤©çš„çª—å£ã€‚</p>
<blockquote>
<ol>
<li>
<p>è¿™ä¸ªèŠå¤©çš„çª—å£ï¼Œæ˜¯ç”±é¡¶éƒ¨å¯¼èˆªæ å³ä¾§åŒºåŸŸï¼Œclaim anniversary çš„å®¹å™¨å·¦ä¾§çš„ä¸€ä¸ª chat çš„ icon å¤„æ¿€æ´»çš„ã€‚</p>
</li>
<li>
<p>æ¿€æ´»èŠå¤©é¢æ¿åï¼Œä¼šå¯¹åº”çš„å°†å³ä¾§çš„ main å†…å®¹å®¹å™¨ï¼Œå¾€å·¦è‡ªé€‚åº”æŒ¤è¿‡å»ã€‚</p>
</li>
<li>
<p>è€Œè¿™ä¸ªèŠå¤©é¢æ¿ï¼Œç”± 3 ä¸ªéƒ¨åˆ†ç»„æˆï¼š</p>
<p>é¡¶éƒ¨æ˜¯èŠå¤©çª—å£çš„æ ‡é¢˜</p>
<p>ä¸­é—´æ˜¯èŠå¤©æ¶ˆæ¯çš„å±•ç¤ºåŒºï¼Œåˆ†ä¸ºç”¨æˆ·ä¸ agent çš„æ¶ˆæ¯ï¼Œå¹¶ä¸”ä¸éœ€è¦å¤´åƒ</p>
<p>ä¸‹æ–¹æ˜¯ç”¨æˆ·å‘æ¶ˆæ¯çš„è¾“å…¥æ¡†ï¼Œä»¥åŠå‘é€æŒ‰é’®åŒº</p>
</li>
</ol>
<p>åœ¨ä½ å¸®æˆ‘å®ç°æ—¶ï¼Œ<strong>éœ€è¦ç¬¦åˆæˆ‘çš„</strong> <em><strong>FRONTEND_SPEC.md</strong></em> <strong>è§„èŒƒã€‚</strong></p>
</blockquote>
<p>åœ¨å®ç°äº†åŸºç¡€äº¤äº’åï¼Œæˆ‘åˆæƒ³å¢åŠ ä¸€äº›æ•ˆæœï¼Œæ¯”å¦‚æ‰“å­—æœºæ•ˆæœã€çŸ¥è¯†åº“æŸ¥è¯¢ç­‰ã€‚åŒæ ·çš„ï¼Œä¹Ÿæ˜¯ä¾èµ–ä¸Šæ–¹æå‡ºçš„æ–¹æ³•ï¼š<strong>ç”±ç”¨æˆ·æ“ä½œè§†è§’å‡ºå‘ï¼Œæè¿°æ¸…æ¥šèµ·å§‹ã€æ“ä½œã€åé¦ˆã€ä½ç½®ã€å†…å®¹ã€‚</strong></p>
<p><strong>å®Œæˆæ•ˆæœï¼šæœ€ç»ˆæˆ‘ä»¬å°±èƒ½å¤Ÿå¾—åˆ°ä¸€ä¸ªå¦‚ä¸‹è§†é¢‘æ‰€ç¤ºçš„ä¸€ä¸ªå¸¦å‰ç«¯äº¤äº’çš„HTMLçš„å¯äº¤äº’å¼åŸå‹</strong>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1fac20734b64655a34a2bdf58bc20d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=OzrW9YZC%2FxrUX3bgaYZeUdqdAYY%3D" alt="20260129104946_rec_-convert (1).gif" loading="lazy"/></p>
<h3 data-id="heading-11"><strong>åœºæ™¯äºŒï¼š0-1 çš„é¡¹ç›®åŸå‹ä¸é€»è¾‘éªŒè¯</strong></h3>
<p>å¦‚æœè¯´éœ€æ±‚è¿­ä»£æ˜¯â€œæœ¯â€ï¼Œé‚£ä¹ˆ 0-1 çš„é¡¹ç›®éªŒè¯åˆ™æ›´è€ƒéªŒäº§å“ç»ç†çš„â€œé“â€â€”â€”å°†ä¸€ä¸ªæƒ³æ³•ï¼Œå¿«é€Ÿè½åœ°ä¸ºå¯éªŒè¯çš„ MVPã€‚</p>
<p><strong>å·¥ä½œæµå¯¹æ¯”ï¼š</strong></p>
<p><strong>è¿‡å» (Old School)</strong></p>
<ul>
<li>
<p><strong>æ¥å£çŒœè°œï¼š</strong> åªèƒ½å¯¹ç€ä¸€å †æ¥å£æ–‡æ¡£å¹²çªçœ¼ï¼Œçœ‹ç€å­—æ®µçŒœæµ‹åç«¯é€»è¾‘ã€‚éªŒè¯è·¯å¾„æçŸ­ï¼Œä¸­é—´è¿‡ç¨‹å®Œå…¨æ˜¯é»‘ç›’ã€‚</p>
</li>
<li>
<p><strong>é€»è¾‘ç›²åŒºï¼š</strong> é‡åˆ°å¤æ‚ç®—æ³•ã€Agent äº¤äº’ç­‰ï¼Œå®Œå…¨ä¸çŸ¥å…¶æ‰€ä»¥ç„¶ã€‚ä¸ç ”å‘è®¨è®ºæ—¶ï¼Œå› ä¸æ‡‚å®ç°ç»†èŠ‚ï¼Œéš¾ä»¥æå‡ºå»ºè®¾æ€§æ„è§ï¼Œæ›´æ— æ³•æœ‰æ•ˆæŠŠæ§é¡¹ç›®é£é™©ã€‚</p>
</li>
</ul>
<p><strong>ç°åœ¨ (TRAE Flow)</strong></p>
<ul>
<li>
<p><strong>ç™½ç›’æŒæ§ï¼š</strong> é€šè¿‡è‡ªç„¶è¯­è¨€æè¿°ï¼Œè®© TRAE æŠŠå®Œæ•´é€»è¾‘è·‘é€šï¼Œç»“åˆå…¶è¾“å‡ºçš„ Mermaid æµç¨‹å›¾ï¼Œå½»åº•çœ‹æ‡‚ä»£ç èƒŒåçš„ä¸šåŠ¡æµè½¬ã€‚</p>
</li>
<li>
<p><strong>åå‘è¾“å‡ºï¼š</strong> ä½ ä¸å†åªæ˜¯éœ€æ±‚çš„æå‡ºè€…ã€‚ç°åœ¨ï¼Œä½ å¯ä»¥ç›´æ¥æ„å»ºä¸€ä¸ªé€»è¾‘åˆç†ã€ç”šè‡³ä»£ç å¯ç”¨çš„æ–¹æ¡ˆï¼Œâ€œç”©â€ç»™ç ”å‘ï¼šâ€œç…§ç€è¿™ä¸ªï¼Œåˆåˆ°ä¸»å¹²ä»£ç é‡Œå»ã€‚â€</p>
</li>
</ul>
<p><strong>æ ¸å¿ƒä»·å€¼ï¼šè¿™å·²ç»ä¸æ˜¯ç®€å•çš„æ•ˆç‡æå‡ï¼Œè€Œæ˜¯äº§å“ç»ç†æ ¸å¿ƒèƒ½åŠ›çš„é£è·ƒâ€”â€”æˆ‘ä»¬çœŸæ­£è·å¾—äº†å®šä¹‰å’ŒéªŒè¯æŠ€æœ¯æ–¹æ¡ˆçš„èƒ½åŠ›ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22645b5421144c138f4fe3cac0f193d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=dxiQCLi9RtsyVi%2B4qh5O5RIrgdQ%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-12"><strong>å®æˆ˜æ¡ˆä¾‹ï¼šç”µå•† Agent çš„ 0-1 æ­å»º</strong></h3>
<blockquote>
<p><strong>TRAE é…ç½®æ¸…å•</strong></p>
<ul>
<li><strong>æ¨¡å‹ï¼š</strong> gemini-3-pro-preview</li>
<li><strong>æ™ºèƒ½ä½“ï¼š</strong> Builder with MCP</li>
<li><strong>MCPï¼š</strong> Playwright</li>
</ul>
</blockquote>
<p><strong>éœ€æ±‚èƒŒæ™¯ï¼š</strong> åšä¸€ä¸ªç”µå•†åœºæ™¯çš„ agentï¼Œç›®æ ‡æ˜¯Cç«¯ç”¨æˆ·ã€‚å®ƒèƒ½å¤Ÿå¸®æˆ‘ä»¬åšåŸºæœ¬çš„å•†å“çš„æœç´¢ï¼Œä»¥åŠè®©ç”¨æˆ·ç›´æ¥æŒ‡å®šå¯¹åº”çš„å•†å“ã€‚</p>
<p><strong>æ ¸å¿ƒæ€è·¯ä¸åœºæ™¯ä¸€å®Œå…¨ä¸€è‡´ï¼šå°æ­¥å¿«è·‘ï¼Œå¢é‡è¿­ä»£ã€‚</strong></p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šæ­å»ºåŸºç¡€èŠå¤©é¡µé¢</strong></p>
<p><strong>0-1é¡¹ç›®å¯åŠ¨æç¤ºè¯ç¤ºä¾‹ï¼š</strong></p>
<blockquote>
<p>æˆ‘çš„è¿™ä¸ªé¡¹ç›®æ˜¯ä¸€ä¸ªå¯¹è¯å¼çš„ç”µå•† agentã€‚å¹¶ä¸”æ˜¯ç§»åŠ¨ç«¯å°ºå¯¸çš„ã€‚æ‰€ä»¥è¯·ä½ ä»¥ç§»åŠ¨ç«¯iPhone12 çš„å°ºå¯¸ï¼Œå¸®æˆ‘åˆ›å»ºä¸€ä¸ªåŸºç¡€çš„ agent çš„èŠå¤©é¡µé¢ã€‚å‰ç«¯ä½¿ç”¨ react çš„æŠ€æœ¯æ–¹æ¡ˆ</p>
<p>è¿™ä¸ªèŠå¤©é¡µé¢çš„ç»“æ„æ˜¯ï¼Œé¡¶éƒ¨æ˜¯å¯¹è¯çš„æ ‡é¢˜ã€‚ä¸­é—´æ˜¯ agent ä¸ç”¨æˆ·çš„æ¶ˆæ¯è®°å½•ï¼Œå¹¶ä¸”ä¸éœ€è¦å¤´åƒã€‚åº•éƒ¨æ˜¯ç”¨æˆ·çš„è¾“å…¥æ¡†ï¼Œä»¥åŠå‘é€æŒ‰é’®</p>
<p>ç°åœ¨è¯·ä½ å¸®æˆ‘å®ç°è¿™ä¸ªé¡¹ç›®çš„åŸºç¡€é¡µé¢ç»“æ„</p>
</blockquote>
<p><strong>ä¸ºäº†åç»­è¿­ä»£æ–¹ä¾¿ï¼Œå¯ä»¥è¡¥å……ä»¥ä¸‹ 2 ä¸ªä¼˜åŒ–ç‚¹ï¼š</strong></p>
<p><strong>1. ä¼˜åŒ– classname</strong></p>
<blockquote>
<p>è¯·ä½ å°†æˆ‘å‰ç«¯é¡µé¢çš„ classname åšè§„èŒƒåŒ–å¤„ç†ï¼Œæ–¹ä¾¿æˆ‘ä»¥åèƒ½å¤Ÿç›´æ¥é€šè¿‡å‰ç«¯é¡µé¢çš„ classname æ‰¾åˆ°å¯¹åº”çš„ä»£ç ï¼Œè€Œä¸æ˜¯ç”¨ react ç”Ÿæˆçš„ classnameã€‚</p>
</blockquote>
<p><strong>2. åˆ›å»º start è„šæœ¬</strong></p>
<blockquote>
<p>è¯·ä½ å¸®æˆ‘åˆ›å»ºä¸€ä¸ª sh çš„ start çš„è„šæœ¬ï¼Œå¹¶ä¸”å›ºå®šç«¯å£å¯åŠ¨ï¼Œå½“ç›®æ ‡ç«¯å£è¢«å ç”¨æ—¶ï¼Œä½ å¯ä»¥æ¸…ç†æ‰è¢«å ç”¨çš„ç«¯å£è¿›ç¨‹ã€‚ç„¶åå†è¿›è¡Œå¯åŠ¨ã€‚åŒæ—¶æˆ‘å¸Œæœ›è¿™ä¸ªè„šæœ¬å†å¯åŠ¨åï¼Œèƒ½å¤Ÿåœ¨ç»ˆç«¯ç­”æ‰“å°å‡ºæˆ‘é¡¹ç›®çš„è·¯å¾„ï¼Œæ–¹ä¾¿æˆ‘åç»­è®¿é—®</p>
</blockquote>
<p>åˆ°è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€é˜¶æ®µå°±åšå¥½äº†ï¼šä¸€ä¸ªåŸºç¡€çš„å‰ç«¯é¡µé¢ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ad265f8b1ab47e9b4b3d4a80eb69cce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=cBaQ55SiWpwtuq0s1APaoRKoXxQ%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-13"><strong>ç¬¬äºŒæ­¥ï¼šæ¥å…¥åŸºç¡€å¯¹è¯èƒ½åŠ›</strong></h4>
<p>è¿™ä¸€æ­¥å¼€å§‹æ¶‰åŠåç«¯é€»è¾‘ã€‚å¦‚æœä½ å¯¹æŠ€æœ¯å®ç°ä¸ç†Ÿï¼Œæ²¡å…³ç³»ï¼Œå…ˆè®© TRAE æˆä¸ºä½ çš„â€œæŠ€æœ¯é¡¾é—®â€ï¼Œè®©ä»–ç»™ä½ å†™ä¸€ä»½å®ç°æ–‡æ¡£ã€‚å¹¶è¦æ±‚åœ¨ä½ ç¡®è®¤ä¹‹å‰ï¼Œä¸è®¸åŠ¨ä»»ä½•ä»£ç ã€‚</p>
<p><strong>â€œæ–‡æ¡£å…ˆè¡Œâ€æç¤ºè¯ç¤ºä¾‹ï¼š</strong></p>
<p>æˆ‘ç°åœ¨æ‰“ç®—åœ¨æˆ‘çš„é¡¹ç›®é‡Œå®ç°çœŸæ­£çš„ai å¯¹è¯ã€‚å¹¶ä¸”æˆ‘ä½¿ç”¨çš„æ˜¯è±†åŒ…çš„æ¨¡å‹ã€‚</p>
<blockquote>
<p>æˆ‘å¸Œæœ›å®ç°åï¼Œèƒ½å¤Ÿåšå¤§ï¼Œ ç”¨æˆ·åœ¨è¾“å…¥æ¡†å†…è¾“å…¥æ–‡æœ¬ï¼Œç‚¹å‡»å‘é€åï¼Œèƒ½å¤Ÿè®©è±†åŒ…åœ¨æ€è€ƒåè¿›è¡Œå›å¤ï¼Œå°±è·Ÿç°åœ¨çš„å¾ˆå¤š agent äº§å“ä¸€æ ·ï¼Œèƒ½å¤Ÿçœ‹åˆ°æŠ˜å çš„ thinkingï¼Œä»¥åŠæœ€ç»ˆçš„å›å¤çš„æ–‡æ¡ˆã€‚åŒæ—¶è¿™ä¸ª think é»˜è®¤å¯èƒ½æ˜¯æŠ˜å çš„çŠ¶æ€çš„ã€‚ç”¨æˆ·å¯ä»¥è¿›è¡Œå±•å¼€ï¼Œä½†å±•å¼€ä¹Ÿåªæ˜¯åœ¨ä¸€å®šçš„é«˜åº¦ä¸‹æŸ¥çœ‹ thinking çš„æ–‡æœ¬ã€‚</p>
<p>åŒæ—¶å‘¢ï¼Œæˆ‘ä¹Ÿå¸Œæœ›åœ¨ç”¨æˆ·å‘é€ç¬¬äºŒæ¡æ¶ˆæ¯åï¼Œai èƒ½å¤Ÿäº†è§£æˆ‘çš„ä¸Šä¸‹æ–‡ï¼Œå¹¶ä¸”åŸºäºæˆ‘çš„ä¸Šä¸‹æ–‡ï¼Œç»§ç»­æ¥ç»™æˆ‘è¿›è¡Œå›å¤ã€‚</p>
<p>è¯·ä½ æ ¹æ®æˆ‘ä»¥ä¸Šçš„éœ€æ±‚ï¼Œå¸®æˆ‘å†™ä¸€ä»½å®ç°çš„ mdæ–‡æ¡£ï¼Œå¹¶ä¸”åœ¨å¾—åˆ°æˆ‘å¼€å§‹ç ”å‘ä»£ç çš„ç¡®è®¤æ¶ˆæ¯å‰ï¼Œä¸è¦ä¿®æ”¹æˆ‘çš„ä»»ä½•ä»£ç æ–‡ä»¶</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c48e0622ab342a6ae2438f866e891fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=TarWEecg%2BMiHYVQOh3vqoWr2Pa8%3D" alt="" loading="lazy"/></p>
<p>å®é™…ä¸Šï¼Œè®© TRAE å¸®ä½ ç¼–å†™å®ç°æ–‡æ¡£ï¼Œèƒ½å¤Ÿåç»­è®©å®ƒå®ç°çš„æ›´å‡†ç¡®ã€‚å¯¹äºå®ç°æ–¹æ¡ˆä¸ç¡®å®šçš„åœ°æ–¹ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥åœ¨ä¸æ–­çš„è·Ÿ TRAE äº¤äº’çš„è¿‡ç¨‹ä¸­ï¼Œé€æ­¥å®Œå–„æ–‡æ¡£ã€‚</p>
<p><strong>åœ¨ TRAE å®Œæˆåï¼ŒåŒæ ·ä½¿ç”¨ playwrightmcp æ‰“å¼€æˆ‘çš„é¡¹ç›®ï¼Œå¹¶ä¸”æ¨¡æ‹Ÿç”¨æˆ·èµ°å®Œæ•´ä¸ªæµç¨‹ã€‚</strong></p>
<p>ç„¶åæˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªæ»¡è¶³äº†å‰åç«¯çš„åŸºç¡€é¡¹ç›®å®ç°äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9763af69f91148aa9887f26e8a5b716c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=%2BGcVTG%2BCLExCKGzzJcSLzr63GX8%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-14"><strong>ç¬¬ä¸‰æ­¥ï¼šå®ç°æ ¸å¿ƒä¸šåŠ¡é€»è¾‘â€”â€”å•†å“æœç´¢</strong></h4>
<p>å†ç»§ç»­ç¬¬ä¸‰ä¸ªå­ä»»åŠ¡ï¼šä¸ºç»„ä»¶å®ç°æœç´¢å•†å“ã€‚</p>
<p>æ€è·¯ç›¸åŒï¼Œå¦‚æœæˆ‘ä»¬è‡ªå·±ä¸æ¸…æ¥šè¦å¦‚ä½•å®ç°ï¼Œå°±è®© TRAE æ ¹æ®æˆ‘ä»¬çš„éœ€æ±‚ï¼Œåˆ›å»ºä¸€ä¸ªå®ç°æ–‡æ¡£ã€‚</p>
<p><strong>è¿™é‡Œæˆ‘å°±å¿«é€Ÿçš„ç›´æ¥é€šè¿‡éœ€æ±‚è¿›è¡Œæé—®å®ç°äº†ï¼š</strong></p>
<blockquote>
<p>ç°åœ¨è¯·ä½ å¸®æˆ‘åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œä¸ºè¿™ä¸ª agent å®ç°åœ¨å¯¹è¯è¿‡ç¨‹ä¸­ï¼Œèƒ½å¤Ÿå¸®ç”¨æˆ·åšå•†å“æœç´¢çš„è¿™ä¸ªèƒ½åŠ›ã€‚</p>
<p>è¦æƒ³å®ç°è¿™ä¸ªèƒ½åŠ›ï¼Œé¦–å…ˆä½ éœ€è¦å¸®æˆ‘åˆ›å»ºä¸€ä¸ªæœ¬åœ°çš„æ•°æ®åº“ï¼Œå­˜å‚¨å•†å“çš„ä¿¡æ¯ã€‚å…¶ä¸­éœ€è¦è‡³å°‘åŒ…å«å•†å“ idï¼Œå•†å“ä¸»å›¾ï¼Œå•†å“æ ‡é¢˜ï¼Œå•†å“ä»·æ ¼ï¼Œå•†å“è¯¦æƒ…æè¿°çš„ä¿¡æ¯ã€‚å•†å“å›¾ç‰‡ä½ å¯ä»¥ä» usplash ä¸Šéšæœºè·å–å¯ä»¥è®¿é—®çš„å•†å“å›¾ç‰‡å°±å¯ä»¥äº†ã€‚</p>
<p>é‚£æˆ‘å¸Œæœ›åœ¨ç”¨æˆ·ä¸ agent çš„å¯¹è¯äº¤äº’ä¸­ï¼Œèƒ½å¤Ÿè¯†åˆ«ç”¨æˆ·å½“å‰çš„æ„å›¾æ˜¯å¦æ¶‰åŠåˆ°å•†å“çš„æœç´¢ã€‚å¦‚æœæ¶‰åŠåˆ°å•†å“æœç´¢ï¼Œè¯·ä½ è°ƒç”¨å•†å“æœç´¢çš„è¿™ä¸ª mcpï¼ˆè¿™ä¸ª mcp ä¹Ÿéœ€è¦ä½ æ ¹æ®ä¸Šé¢è¦æ±‚ä½ åˆ›å»ºçš„æ•°æ®åº“æ¥å®ç°ï¼‰ï¼Œå°†ç”¨æˆ·çš„æé—®ï¼Œè½¬æ¢æˆå•†å“æ ‡é¢˜æœç´¢çš„å…³é”®è¯ï¼Œå¹¶é€šè¿‡æ¥å£æœç´¢å‡ºå•†å“ã€‚</p>
<p>åœ¨æ‹¿åˆ°å•†å“çš„ä¿¡æ¯åï¼Œæˆ‘è¦æ±‚ agent éœ€è¦ç»™æˆ‘è¿”å›ä¸€ä¸ªå¯äº¤äº’çš„å•†å“å¡ç‰‡çš„æ¶ˆæ¯èµ·æ³¡ï¼Œå¹¶ä¸”æ”¯æŒåˆ†é¡µï¼Œä¸€é¡µ 4 ä¸ªã€‚æœ€å¤š 5 é¡µä¹Ÿå°±æ˜¯ 20 ä¸ªå•†å“ã€‚</p>
<p>åœ¨å•†å“å¡ç‰‡ä¸Šéœ€è¦å‘ˆç°æ¯ä¸€ä¸ªå•†å“çš„ä¸»å›¾ï¼Œæ ‡é¢˜ï¼Œä»¥åŠä»·æ ¼ã€‚åŒæ—¶æ¯ä¸€ä¸ªå•†å“å¡ç‰‡çš„å³ä¸Šè§’æˆ‘å¸Œæœ›éƒ½æœ‰ä¸€ä¸ªæ–‡æœ¬çš„è¿½é—®æŒ‰é’®ã€‚</p>
<p>å½“ç”¨æˆ·ç‚¹å‡»äº†è¿™ä¸ªè¿½é—®åï¼Œèƒ½å¤Ÿåœ¨ç”¨æˆ·çš„è¾“å…¥æ¡†ä¸Šæ–¹æœ‰ä¸€ä¸ªå‘ˆç°äº†å½“å‰æ­£åœ¨è¿½é—®å“ªä¸ªå•†å“çš„ä¸€ä¸ªäº¤äº’ã€‚</p>
<p>å¹¶ä¸”å½“ç”¨æˆ·åœ¨è¿½é—®çŠ¶æ€ä¸‹å‘é€æ¶ˆæ¯æ—¶ï¼Œåœ¨ç”¨æˆ·çš„æ¶ˆæ¯æ°”æ³¡ä¸­ï¼Œéœ€è¦æºå¸¦ä¸Šè¢«è¿½é—®å•†å“çš„ tag çš„äº¤äº’æ˜¾ç¤ºã€‚</p>
<p>åŒæ—¶ï¼Œæˆ‘ä¹Ÿå¸Œæœ›ä½ èƒ½å¤Ÿæœ‰å¦ä¸€ä¸ªåº”å¯¹å•†å“è¿½é—®çš„ mcpã€‚è¿™ä¸ª mcp åœ¨è¯†åˆ«åˆ°ç”¨æˆ·çš„è¿½é—®åï¼Œèƒ½å¤Ÿæ ¹æ®ç”¨æˆ·è¿½é—®çš„å•†å“ idï¼Œå»æ•°æ®åº“ä¸­æŸ¥è¯¢å‡ºè¿™ä¸ªå•†å“çš„è¯¦æƒ…æè¿°ä¿¡æ¯ï¼Œå¹¶ä¸”æ ¹æ®è¯¥å•†å“çš„è¯¦æƒ…æè¿°ä¿¡æ¯ï¼Œç»™ä¸ç”¨æˆ·æ–‡æœ¬æè¿°ã€‚</p>
<p>ä»¥ä¸Šçš„æ•´ä¸ªæµç¨‹ï¼Œä¸ºäº†æ–¹ä¾¿æˆ‘æ¨¡æ‹Ÿï¼Œæˆ‘å¸Œæœ›æ‰€æœ‰çš„å•†å“æ ‡é¢˜éƒ½æºå¸¦ç€ï¼Œé£è¡£è¿™ä¸ªå…³é”®è¯ã€‚å¹¶ä¸”åœ¨ä½ å®Œæˆä»£ç å®ç°åï¼Œæˆ‘å¸Œæœ›ä½ ä½¿ç”¨ playwrightmcpï¼Œä»¥ç”¨æˆ·åœ¨æœç´¢é£è¡£ï¼Œä»¥åŠé’ˆå¯¹æŸä¸ªé£è¡£åšè¿½é—®çš„åœºæ™¯ã€‚å¸®æˆ‘å®Œæˆä¸€è½®å•†å“æœç´¢ï¼Œä»¥åŠå•†å“è¿½é—®çš„äº¤äº’ä¸é€»è¾‘æµ‹è¯•ï¼Œç¡®ä¿ä½ çš„å®ç°æ˜¯ç¬¦åˆæˆ‘çš„éœ€æ±‚çš„</p>
</blockquote>
<p>å³ä¾¿ç»™å‡ºäº†ä»¥ä¸Šè¯¦å°½çš„æŒ‡ä»¤ï¼ŒTRAE çš„åˆç‰ˆå®ç°ä¹Ÿå¯èƒ½å­˜åœ¨é—®é¢˜ã€‚æ²¡å…³ç³»ï¼Œç»§ç»­é€šè¿‡è¿½é—®æ¥ä¿®æ­£ã€‚</p>
<blockquote>
<p>æˆ‘å‘ç°äº†å‡ ä¸ªé—®é¢˜ï¼Œè¯·ä½ å¸®æˆ‘åšå‡ºä¿®æ”¹</p>
<ol>
<li>æˆ‘çš„é¡¹ç›®çš„é¡µé¢å°ºå¯¸ï¼Œéœ€è¦ä¸¥æ ¼æŒ‰ç…§ç§»åŠ¨ç«¯çš„å°ºå¯¸ã€‚ä¸èƒ½å¤Ÿå› ä¸ºæ¶ˆæ¯æ°”æ³¡ä¸­å†…å®¹çš„é•¿çŸ­ï¼Œè€Œæ’‘å¼€äº†æ•´ä¸ªé¡¹ç›®é¡µé¢å‘ˆç°ã€‚</li>
<li>æˆ‘å¸Œæœ›åœ¨è§¦å‘è°ƒç”¨å·¥å…·æ—¶ï¼Œèƒ½å¤Ÿæœ‰åƒä¸€èˆ¬çš„ agent äº§å“ä¸€æ ·çš„é‚£ç§æ­£åœ¨è°ƒç”¨xx å·¥å…·çš„äº¤äº’</li>
<li>æ•´ä½“çš„åç«¯çš„å®ç°æ€è·¯ï¼Œåº”è¯¥æ˜¯åŸºäº ReAct çš„æ ¸å¿ƒç†å¿µï¼Œä¹Ÿå°±æ˜¯ä¼šæ¶‰åŠåˆ°ç”¨æˆ·çš„ä¸€æ¡æ¶ˆæ¯ï¼Œå¯èƒ½ä¼šè§¦å‘å¤šæ¬¡ ai çš„è¯·æ±‚ã€‚ç¬¬ä¸€æ¬¡è¯·æ±‚å¯èƒ½æ˜¯ai åˆ¤æ–­éœ€è¦è°ƒç”¨å·¥å…·ï¼Œè€Œè·å–å·¥å…·çš„ç»“æœï¼Œç¬¬äºŒæ¬¡è¯·æ±‚å°±æ˜¯ ai ç»“åˆç€å·¥å…·è¿”å›çš„ç»“æœï¼Œæ¥è¿›è¡Œå›å¤ã€‚</li>
<li>æ‰€ä»¥æ—¢ç„¶åç«¯çš„å®ç°æ€è·¯åŸºäº ReAct çš„å•ä»»åŠ¡å¤šè½®æ€è€ƒè¯·æ±‚çš„æ€è·¯ï¼Œæ‰€ä»¥å¯¹åº”çš„å‰ç«¯çš„é…å¥—äº¤äº’ä¹Ÿéœ€è¦å¸®æˆ‘åšå‡ºå¯¹åº”çš„è°ƒæ•´ä¸ä¼˜åŒ–</li>
</ol>
</blockquote>
<p><strong>æœ€ç»ˆæˆæœï¼šå®Œæˆä¸€ä¸ªå‰åç«¯å®Œæ•´çš„ç”µå•† Agent MVP</strong>ï¼Œåç»­å¯ä»¥åŸºäºè¿™ä¸ªé¡¹ç›®ï¼Œåšä¸€äº›éœ€æ±‚çš„é€»è¾‘éªŒè¯ï¼Œæˆ–è€…å¤æ‚é€»è¾‘çš„è¿­ä»£ç­‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ecad3ef843fb4571a5cb17cd115cb6ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=yowILSOIKzzvWe3%2Bi8Z%2F2K73%2BpY%3D" alt="20260129143746_rec_-convert (1).gif" loading="lazy"/></p>
<p>è¿™ä¸ªè¿‡ç¨‹çš„ä»·å€¼åœ¨äºï¼Œå®ƒè®©æˆ‘ä»¬åƒæ¶æ„å¸ˆä¸€æ ·æ€è€ƒï¼Œå°†ä¸€ä¸ªå¤æ‚çš„ä¸šåŠ¡æµç¨‹ï¼Œæ‹†è§£ä¸ºä¸€ç³»åˆ—æ¸…æ™°çš„æ¨¡å—ã€‚è€Œ TRAEï¼Œåˆ™å°†æˆ‘ä»¬çš„æ€è€ƒå˜ä¸ºç°å®ã€‚</p>
<h4 data-id="heading-15"><strong>åœºæ™¯ä¸‰ï¼šæ–‡æ¡£çš„ç¼–å†™ä¸å¯¹é½</strong></h4>
<p>äº§å“ç»ç†ä¸ä»…è¦åˆ›é€ ï¼Œæ›´è¦é¢‘ç¹åŒæ­¥ä¸å¯¹é½ã€‚æ— è®ºæ˜¯ä¸ç ”å‘å¯¹é½æ–¹æ¡ˆï¼Œè¿˜æ˜¯å‘è€æ¿æ±‡æŠ¥è¿›å±•ï¼Œæ¸…æ™°çš„æ–‡æ¡£å’Œé€»è¾‘å›¾éƒ½æ˜¯å¿…ä¸å¯å°‘çš„ã€‚</p>
<p><strong>å·¥ä½œæµå¯¹æ¯”ï¼š</strong></p>
<p><strong>è¿‡å» (Old School)</strong></p>
<ul>
<li>
<p><strong>ç»“æ„åŒ–åœ°ç‹±ï¼š</strong> æ”¶é›†èµ„æ–™å®¹æ˜“ï¼Œæ•´ç†æˆé€»è¾‘æ¸…æ™°çš„æ–‡æ¡£éš¾ã€‚åœ¨ PPT é‡Œç”»æ¡†æ¶å›¾ã€æµç¨‹å›¾ï¼Œåå¤è°ƒæ•´å´æ€»è§‰å¾—é€»è¾‘ä¸é€šã€‚</p>
</li>
<li>
<p><strong>æ— æ•ˆçº ç»“ï¼š</strong> å¤§é‡æ—¶é—´æµªè´¹åœ¨è°ƒæ•´æ ¼å¼ã€å¯¹é½å›¾å½¢ä¸Šï¼Œæ ¸å¿ƒé€»è¾‘åè€Œæ²¡æ—¶é—´æ‰“ç£¨ã€‚</p>
</li>
<li>
<p><strong>æ—¶é—´æˆæœ¬ï¼š</strong> 1 äººå¤©ã€‚</p>
</li>
</ul>
<p><strong>ç°åœ¨ (TRAE Flow)</strong></p>
<ul>
<li>
<p><strong>æš´åŠ›è¾“å‡ºè‰ç¨¿ï¼š</strong> æƒ³åˆ°ä»€ä¹ˆå†™ä»€ä¹ˆï¼Œç”šè‡³æŠŠå‚è€ƒèµ„æ–™ä¸€è‚¡è„‘ä¸¢è¿›ä¸€ä¸ªæ–‡æ¡£ï¼Œé€»è¾‘æ··ä¹±ä¹Ÿæ— æ‰€è°“ã€‚</p>
</li>
<li>
<p><strong>é™ç»´æ‰“å‡»ï¼š</strong> å°†è¿™å †â€œåŸæ–™â€ä¸¢ç»™ TRAEï¼Œç»“åˆæ˜ç¡®çš„æ•´ç†æ–¹æ³•è®ºï¼Œè®©å®ƒç¬é—´å®Œæˆç»“æ„åŒ–å’Œå¯è§†åŒ–ã€‚</p>
</li>
<li>
<p><strong>æ—¶é—´æˆæœ¬ï¼š</strong> 0.5 äººå¤©ï¼Œæ•ˆç‡æå‡ 2 å€ã€‚</p>
</li>
</ul>
<p><strong>æ ¸å¿ƒä»·å€¼ï¼šæ•ˆç‡æå‡ 2 å€</strong>ï¼Œå‘Šåˆ« PPT çººç»‡å·¥ï¼Œå›å½’æ€è€ƒè€…ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/afd6b5c9e10a4537970fe1539eeee996~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=lKP89LPLV77%2FLNXGgwHr3lBIuDk%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-16"><strong>å®æˆ˜æ¡ˆä¾‹ï¼šç”¨ TRAE è¾…åŠ©ç¼–å†™é¡¹ç›®æ–‡æ¡£</strong></h3>
<p><strong>TRAE é…ç½®æ¸…å•</strong></p>
<ul>
<li>
<p><strong>æ¨¡å‹ï¼š</strong> gemini-3-pro-preview</p>
</li>
<li>
<p><strong>æ™ºèƒ½ä½“ï¼š</strong> Builder with MCP</p>
</li>
</ul>
<h4 data-id="heading-17"><strong>1ã€ç”¨äºé¡¹ç›®æ–‡æ¡£ä¸ç ”å‘å¯¹é½</strong></h4>
<p>å†™å®Œä¸Šé¢é‚£ä¸ªç”µå•† Agent çš„ MVP åï¼Œæˆ‘éœ€è¦ç»™ç ”å‘å’Œä¸šåŠ¡å›¢é˜ŸåŒæ­¥æ–¹æ¡ˆã€‚<strong>æˆ‘çš„è‰ç¨¿å¯èƒ½éå¸¸éšæ„ï¼Œæˆ‘ä¼šè®© TRAE æŒ‰ç…§æˆ‘çš„åŸåˆ™ï¼Œå¸®æˆ‘æ¢³ç†æˆä¸“ä¸šæ–‡æ¡£ã€‚</strong></p>
<p><strong>æš´åŠ›å†™ä¸‹ä½ çš„è‰ç¨¿ï¼ˆé€»è¾‘æ··ä¹±ä¹Ÿæ²¡å…³ç³»ï¼‰ï¼š</strong></p>
<blockquote>
<p>æˆ‘æƒ³è¦è·Ÿç ”å‘å›¢é˜ŸåŒæ­¥ï¼Œä»¥åŠä¸šåŠ¡å›¢é˜ŸåŒæ­¥æˆ‘çš„è¿™ä¸ªç”µå•†çš„ agent æ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„</p>
<p>å®ƒå…¶å®æ˜¯ç»™ C ç«¯ç”¨æˆ·ç”¨çš„ï¼Œèƒ½å¤Ÿè®©ç”¨æˆ·åœ¨å¯¹è¯çš„æƒ…å†µä¸‹å°±èƒ½å¤Ÿå®Œæˆä¸‹å•ã€‚ç›®å‰æ”¯æŒçš„åœºæ™¯å°±æ˜¯æœ‰æœç´¢å•†å“</p>
<p>ä»¥åå¯èƒ½è¿˜ä¼šæ”¯æŒä¸‹å•ï¼Œåšå”®åç­‰çš„åœºæ™¯</p>
<p>æ‰€ä»¥è¿™ä¸ªåé¢é™¤äº†è¦å¯¹æ¥å•†å“åº“ä»¥å¤–ï¼Œè¿˜è¦å¯¹æ¥å”®åçš„æ¥å£</p>
<p>ç„¶åè¿™ä¸ª agent ä¼šè‡ªå·±æ„å›¾è¯†åˆ«ç”¨æˆ·æƒ³è¦å¹²ä»€ä¹ˆï¼Œç„¶åå†å»è°ƒç”¨ä¸åŒçš„å·¥å…·ï¼Œæ¥å¸®ç”¨è§£å†³é—®é¢˜</p>
<p>balabalaï¼ˆè¿™é‡Œæˆ‘å°±ä¸ç»§ç»­å†™äº†ï¼‰</p>
</blockquote>
<p><strong>è®© TRAE æ•´ç†æˆä¸“ä¸šæ–‡æ¡£ï¼š</strong></p>
<blockquote>
<p>è¯·ä½ æ ¹æ®æˆ‘ä¸‹æ–¹ç»™ä½ çš„æˆ‘çš„è‰ç¨¿ï¼Œä»¥åŠæˆ‘å½“å‰çš„é¡¹ç›®çš„å®ç°ï¼Œå¸®æˆ‘å†™ä¸€é¢æ–¹ä¾¿æˆ‘è·Ÿå…¶ä»–åŒäº‹åŒæ­¥çš„ä¸€ä¸ª md æ–‡æ¡£</p>
<p>åœ¨è¿™ä¸ª md æ–‡æ¡£é‡Œé¢ï¼Œ æˆ‘å¸Œæœ›ä½ æ•´ä½“ä»¥æ€»åˆ†çš„ç»“æ„è¿›è¡Œç¼–å†™ï¼Œå…ˆé€šè¿‡æ€»ç»“è®©è¯»è€…è¯»æ‡‚æˆ‘ä»¬çš„è¿™ä¸ªæ–‡æ¡£è¦è¡¨è¾¾ä»€ä¹ˆå†…å®¹ã€‚å†åˆ†åˆ«å±•å¼€æ¯ä¸ªæ¨¡å—ã€‚å°½å¯èƒ½ç®€å•è¡¨è¾¾ï¼Œå°ç™½å°±èƒ½å¤Ÿä¸€çœ¼çœ‹æ‡‚ã€‚</p>
<p>ç„¶åå…³äº ai çš„å®ç°æ–¹é¢ï¼Œéœ€è¦ä½ è¾“å‡ºä¸€ä¸ªmermaid çš„æ¡†æ¶å›¾ï¼Œä¸æ—¶åºå›¾ï¼Œæ–¹ä¾¿æˆ‘ä¸å¼€å‘åŒæ­¥è¿™é‡Œé¢çš„å®ç°é€»è¾‘ï¼Œä»¥åŠæœªæ¥å¯èƒ½éœ€è¦å»å¯¹æ¥ä¸åŒçš„æ•°æ®åº“ï¼Œæˆ–è€… api èƒ½åŠ›èŒƒå›´æ˜¯ä»€ä¹ˆ</p>
<p>ä»¥ä¸‹æ˜¯æˆ‘çš„æ–‡æ¡£è‰ç¨¿ï¼š</p>
<p>æˆ‘æƒ³è¦è·Ÿç ”å‘å›¢é˜ŸåŒæ­¥ï¼Œä»¥åŠä¸šåŠ¡å›¢é˜ŸåŒæ­¥æˆ‘çš„è¿™ä¸ªç”µå•†çš„ agent æ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„</p>
<p>å®ƒå…¶å®æ˜¯ç»™ C ç«¯ç”¨æˆ·ç”¨çš„ï¼Œèƒ½å¤Ÿè®©ç”¨æˆ·åœ¨å¯¹è¯çš„æƒ…å†µä¸‹å°±èƒ½å¤Ÿå®Œæˆä¸‹å•ã€‚ç›®å‰æ”¯æŒçš„åœºæ™¯å°±æ˜¯æœ‰æœç´¢å•†å“</p>
<p>ä»¥åå¯èƒ½è¿˜ä¼šæ”¯æŒä¸‹å•ï¼Œåšå”®åç­‰çš„åœºæ™¯</p>
<p>æ‰€ä»¥è¿™ä¸ªåé¢é™¤äº†è¦å¯¹æ¥å•†å“åº“ä»¥å¤–ï¼Œè¿˜è¦å¯¹æ¥å”®åçš„æ¥å£</p>
<p>ç„¶åè¿™ä¸ª agent ä¼šè‡ªå·±æ„å›¾è¯†åˆ«ç”¨æˆ·æƒ³è¦å¹²ä»€ä¹ˆï¼Œç„¶åå†å»è°ƒç”¨ä¸åŒçš„å·¥å…·ï¼Œæ¥å¸®ç”¨è§£å†³é—®é¢˜</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6566edd4ca594688b747282fd47a594d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=IR1qoaF5%2B45ka0gQwikt31srsnI%3D" alt="" loading="lazy"/></p>
<p>TRAE ä¼šå°†ä½ çš„â€œæ„è¯†æµâ€è‰ç¨¿ï¼Œé‡æ„æˆä¸€ä»½ç»“æ„æ¸…æ™°ã€å›¾æ–‡å¹¶èŒ‚çš„æ­£å¼æ–‡æ¡£ã€‚</p>
<h4 data-id="heading-18"><strong>2ã€ç”¨äºç«å“åˆ†æä¸å¸‚åœºæ´å¯Ÿ</strong></h4>
<p><strong>è¿™ç§ã€Œéšæ€§æ‰“è‰ç¨¿ã€çš„æ–¹æ³•ï¼Œé™¤äº†ç”¨åœ¨é¡¹ç›®æ€»ç»“ï¼Œåœ¨åšç«å“è°ƒç ”çš„æ—¶å€™ä¹Ÿè¶…çº§å¥½ç”¨ã€‚</strong></p>
<p>ä»¥å‰åšè°ƒç ”ï¼Œå¯èƒ½è¿˜è¦æ‹…å¿ƒæ ¼å¼ä¹±ã€ä¿¡æ¯æ‚ã€‚ç°åœ¨å®Œå…¨ä¸éœ€è¦æŸæ‰‹æŸè„šï¼š</p>
<ul>
<li>
<p><strong>æš´åŠ›ç²˜è´´ï¼š</strong> çœ‹åˆ°è§‰å¾—æœ‰æ•ˆçš„ä¿¡æ¯ã€æ–‡ç« ç‰‡æ®µã€æ•°æ®ï¼Œç›´æ¥ä¸€è‚¡è„‘è´´åˆ°ä¸€ä¸ªæ–‡æ¡£é‡Œã€‚</p>
</li>
<li>
<p><strong>AI æ•´ç†ï¼š</strong> æŠŠè¿™å †â€œæ‚ä¹±ä¿¡æ¯â€ä¸¢ç»™ AIï¼Œè®©å®ƒå¸®ä½ ç»“æ„åŒ–æ•´ç†ï¼Œæå–æ ¸å¿ƒè§‚ç‚¹ã€‚</p>
</li>
<li>
<p><strong>å¯è§†åŒ–è¾“å‡ºï¼š</strong></p>
<p>è®© AI è¾“å‡ºä¸€å¼  <strong>Mermaid</strong> çš„æ¡†æ¶å›¾ï¼Œé€»è¾‘ç»“æ„ä¸€ç›®äº†ç„¶ã€‚</p>
<p>æˆ–è€…è®© AI ç»™ä½ ä¸€ä»½å¯ä»¥ç”¨äº <strong>Nanobanana</strong> çš„æç¤ºè¯ï¼Œç›´æ¥ç”Ÿæˆä¸€å¼ ç›´è§‚çš„å›¾ç‰‡ï¼Œæ”¾åœ¨æ–‡æ¡£é‡Œé€¼æ ¼æ»¡æ»¡ã€‚</p>
</li>
</ul>
<p>è¿™ç§å·¥ä½œæµï¼Œèƒ½ç¡®ä¿ä½ çš„æ‰€æœ‰ç²¾åŠ›éƒ½èŠ±åœ¨â€œæ”¶é›†é«˜ä»·å€¼ä¿¡æ¯â€è¿™ä¸€æ ¸å¿ƒç¯èŠ‚ä¸Šï¼Œè€Œå°†æ‰€æœ‰â€œæ•´ç†å’Œæ’ç‰ˆâ€çš„è„æ´»ç´¯æ´»éƒ½å¤–åŒ…ç»™ AIã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9be975a353664aaf95fc6561aaeed223~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=saabE6vYPdTkfeza4QFFvKXu%2FYk%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-19"><strong>å†™åœ¨æœ€åï¼šäº§å“ç»ç†çš„ AI ç”Ÿå­˜æ³•åˆ™</strong></h2>
<p>å›é¡¾å…¨æ–‡ï¼Œæˆ‘ä»¬å‘ç° TRAE è¿™ç±» AI IDE å¸¦ç»™äº§å“ç»ç†çš„ï¼Œä¸ä»…æ˜¯æ•ˆç‡å·¥å…·ï¼Œæ›´æ˜¯ä¸€å¥—å…¨æ–°çš„å·¥ä½œèŒƒå¼ã€‚</p>
<p>ä¸ºäº†è®©ä½ èƒ½æ›´å¥½åœ°æ¶ˆåŒ–å’Œåº”ç”¨ï¼Œæˆ‘å°†å…¨æ–‡çš„æ ¸å¿ƒæŠ€å·§æ€»ç»“å¦‚ä¸‹ï¼š</p>
<h3 data-id="heading-20"><strong>æ ¸å¿ƒè®¤çŸ¥</strong></h3>
<ul>
<li>
<p><strong>TRAE Â æ˜¯ã€Œæƒ³æ³•ç¿»è¯‘å™¨ã€ï¼šä½ çš„é€»è¾‘è¡¨è¾¾è¶Šæ¸…æ™°ï¼ŒTRAE çš„è¿˜åŸåº¦å°±è¶Šé«˜ã€‚</strong></p>
</li>
<li>
<p><strong>æ‹¥æŠ±â€œå°æ­¥å¿«è·‘â€ï¼š</strong> ä»æ¡†æ¶ -&gt; ç»„ä»¶ -&gt; ç»†èŠ‚ï¼Œå¢é‡è¿­ä»£ï¼Œæ°¸è¿œæ¯”ä¸€å£åƒæˆèƒ–å­æ›´ç¨³ã€æ›´å¿«ã€‚</p>
</li>
<li>
<p><strong>ä»â€œç”»å›¾â€åˆ°â€œè¯´è¯â€ï¼š</strong> å·¥ä½œäº§å‡ºä»é™æ€çº¿æ¡†å›¾ï¼Œå‡çº§ä¸ºé«˜ä¿çœŸã€å¯äº¤äº’çš„ HTMLã€‚</p>
</li>
</ul>
<h3 data-id="heading-21"><strong>å®æˆ˜æŠ€å·§</strong></h3>
<ul>
<li>
<p><strong>é¡µé¢è¿˜åŸåŒæ³•å™¨ï¼š</strong></p>
<p><strong>æˆªå›¾æ³•ï¼š</strong> ç›´æ¥æˆªå›¾ + Playwright MCPï¼Œç®€å•ç²—æš´</p>
<p><strong>è®¾è®¡ç¨¿æ³•ï¼š</strong> Figma + AI Bridgeï¼Œè®¾è®¡å›¾ç›´æ¥å˜ä»£ç </p>
</li>
<li>
<p><strong>Playwright MCP ä¸‰å¦™ç”¨ï¼š</strong> æ£€æŸ¥å®ç°æ•ˆæœã€å¯¹æ¯”å‚è€ƒç½‘ç«™ã€æ¨¡æ‹Ÿç”¨æˆ·æµ‹è¯•æµç¨‹</p>
</li>
<li>
<p><strong>ç»†èŠ‚å¾®è°ƒå››æ¿æ–§ï¼š</strong> å¤åˆ¶ classname ç²¾å‡†å®šä½ã€ç»†è‡´è¡¨è¾¾éœ€æ±‚ã€æŒ‡å®šæŠ€æœ¯ç»´åº¦ã€æ›´æ¢æ¨¡å‹/é‡ç½®ä¸Šä¸‹æ–‡</p>
</li>
</ul>
<h3 data-id="heading-22"><strong>é¡¹ç›®è§„èŒƒ</strong></h3>
<ul>
<li>
<p><strong>Start è„šæœ¬ï¼š</strong> å›ºå®šç«¯å£å¯åŠ¨ï¼Œè‡ªåŠ¨æ¸…ç†å ç”¨ï¼Œç»ˆç«¯æ‰“å°è®¿é—®åœ°å€</p>
</li>
<li>
<p><strong>FRONTEND_SPEC.mdï¼š</strong> æ²‰æ·€å‰ç«¯è§„èŒƒï¼Œè®©åç»­è¿­ä»£æœ‰ç« å¯å¾ª</p>
</li>
<li>
<p><strong>ç”¨æˆ·è§†è§’æè¿°æ³•ï¼š</strong> ä»èµ·å§‹â†’æ“ä½œâ†’åé¦ˆâ†’ä½ç½®â†’å†…å®¹ï¼Œå®Œæ•´æè¿°äº¤äº’æµç¨‹</p>
</li>
</ul>
<h3 data-id="heading-23"><strong>è¿›é˜¶åº”ç”¨</strong></h3>
<ul>
<li>
<p><strong>0-1 é¡¹ç›®æ­å»ºï¼š</strong> è‡ªç”±åº¦æ›´é«˜ï¼Œä½†æ›´éœ€è¦è§„èŒƒçº¦æŸ</p>
</li>
<li>
<p><strong>å®ç°æ–‡æ¡£å…ˆè¡Œï¼š</strong> ä¸ç¡®å®šå®ç°æ–¹æ¡ˆæ—¶ï¼Œå…ˆè®© AI å†™å®ç°æ–‡æ¡£</p>
</li>
<li>
<p><strong>å¢é‡è¿­ä»£æ€ç»´ï¼š</strong> åŸºç¡€åŠŸèƒ½â†’äº¤äº’ä¼˜åŒ–â†’é«˜çº§åŠŸèƒ½ï¼Œå¾ªåºæ¸è¿›</p>
</li>
</ul>
<h3 data-id="heading-24"><strong>Prompt å¿ƒå¾—</strong></h3>
<ul>
<li>
<p><strong>è‡ªç”±éšæ€§ï¼š</strong> æ²¡æœ‰ä¸¥æ ¼çš„è¡¨è¾¾è§„èŒƒï¼Œé‡ç‚¹æ˜¯æŠŠéœ€æ±‚è¯´æ¸…æ¥š</p>
</li>
<li>
<p><strong>ä¿¡æ¯è¦ç»™è¶³ï¼š</strong> ç°çŠ¶ã€æœŸæœ›ã€å‚è€ƒä¿¡æ¯ï¼Œä¸€ä¸ªéƒ½ä¸èƒ½å°‘</p>
</li>
<li>
<p><strong>å¤šæ¨¡æ€è¡¨è¾¾ï¼š</strong> æ–‡å­—æè¿° + æˆªå›¾ + ç½‘é¡µå‚è€ƒï¼Œè®© TRAE ç†è§£æ›´ç²¾å‡†</p>
</li>
</ul>
<p><strong>æœ€åæƒ³è¯´çš„æ˜¯ï¼Œ</strong> TRAE è®©æˆ‘ä»¬çœŸæ­£æ‹¥æœ‰äº†å°†æƒ³æ³•ç›´æ¥è½åœ°çš„èƒ½åŠ›ã€‚å®ƒè®©æˆ‘ä»¬èƒ½å¤ŸæŠŠæ›´å¤šçš„æ—¶é—´èŠ±åœ¨æ€è€ƒäº§å“é€»è¾‘å’Œç”¨æˆ·ä½“éªŒä¸Šï¼Œè€Œä¸æ˜¯çº ç»“äºå…·ä½“çš„ä»£ç å®ç°ã€‚</p>
<p>å¸Œæœ›æˆ‘çš„è¿™äº›ç»éªŒåˆ†äº«ï¼Œèƒ½å¤Ÿå¸®åŠ©å¤§å®¶åœ¨æ—¥å¸¸å·¥ä½œä¸­æ›´å¥½åœ°ä½¿ç”¨ TRAEï¼Œæå‡å·¥ä½œæ•ˆç‡ã€‚å¦‚æœä½ ä¹Ÿæœ‰ç±»ä¼¼çš„ä½¿ç”¨å¿ƒå¾—ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµè®¨è®ºï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ffadcdbefa146ffac4f2d10a5723da8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=bHmvM6iWAv0lsgkWW2iYAre5Das%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-25"><strong>é™„å½•1ï¼šTRAE &amp; MCP é…ç½®æŒ‡å—</strong></h2>
<p>ä¸ºäº†æ–¹ä¾¿ä½ å¿«é€Ÿä¸Šæ‰‹ï¼Œæˆ‘æŠŠéœ€è¦ç”¨åˆ°çš„é…ç½®éƒ½æ•´ç†åœ¨è¿™é‡Œäº†ï¼Œç›´æ¥å¤åˆ¶ç²˜è´´å°±è¡Œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27d7573ba6b94cd1b0eae6f27102c34b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=fO7qbdn83HxtLgZgee8usPW0sKU%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df8e4cf43188431485fc72adb5b8d987~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=Z6FRulZ%2F5Jd8kx0kDG3qclPYojE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-26"><strong>1. Playwright é…ç½®</strong></h3>
<p><strong>ç›¸å…³é“¾æ¥</strong></p>
<p><strong>GitHub ä»“åº“ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2Fplaywright-mcp" target="_blank" title="https://github.com/microsoft/playwright-mcp" ref="nofollow noopener noreferrer">microsoft/playwright-mcp</a></p>
<p><strong>Chrome æ’ä»¶ä¸‹è½½ï¼š</strong> [Releases é¡µé¢](<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2Fplaywright-mcp%2Freleases)" target="_blank" title="https://github.com/microsoft/playwright-mcp/releases)" ref="nofollow noopener noreferrer">github.com/microsoft/pâ€¦</a>Â </p>
<h4 data-id="heading-27"><strong>æ­¥éª¤ä¸€ï¼šé…ç½® MCP</strong></h4>
<pre><code class="hljs language-perl" lang="perl">{
<span class="hljs-string">"mcpServers"</span>: {
  <span class="hljs-string">"Playwright"</span>: {
    <span class="hljs-string">"command"</span>: <span class="hljs-string">"npx"</span>,
    <span class="hljs-string">"args"</span>: [
      <span class="hljs-string">"@playwright/mcp@latest"</span>,
      <span class="hljs-string">"--extension"</span>
    ]
  }
}
}
</code></pre>
<h4 data-id="heading-28"><strong>æ­¥éª¤äºŒï¼šå®‰è£…æµè§ˆå™¨æ’ä»¶</strong></h4>
<ul>
<li>
<p>ä»ä¸Šé¢çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2Fplaywright-mcp%2Freleases" target="_blank" title="https://github.com/microsoft/playwright-mcp/releases" ref="nofollow noopener noreferrer">Releases é¡µé¢</a> ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„æ’ä»¶å‹ç¼©åŒ…ã€‚</p>
</li>
<li>
<p>æ‰“å¼€ Chrome çš„æ‰©å±•ç¨‹åºç®¡ç†é¡µé¢ (<code>chrome://extensions/</code>)ã€‚</p>
</li>
<li>
<p>ç›´æ¥å°†ä¸‹è½½çš„å‹ç¼©åŒ…æ‹–æ‹½åˆ°é¡µé¢ä¸­ï¼Œå³å¯è‡ªåŠ¨å®‰è£…ã€‚</p>
</li>
<li>
<p>è®°å¾—æ‰‹åŠ¨å°†æ’ä»¶<strong>å›ºå®šåˆ°å·¥å…·æ </strong>ï¼Œæ–¹ä¾¿æŸ¥çœ‹è¿æ¥çŠ¶æ€ã€‚</p>
</li>
</ul>
<p><strong>å¦‚ä½•ä½¿ç”¨ï¼Ÿ</strong></p>
<blockquote>
<p>åœ¨å¯¹è¯ä¸­ï¼Œæ˜ç¡®æå‡ºè®© AI ä½¿ç”¨ <em><strong>playwrightmcp</strong></em> å³å¯è§¦å‘ã€‚</p>
</blockquote>
<p>ç¤ºä¾‹ï¼šâ€œè¯·ä½ ä½¿ç”¨ playwrightmcp æ‰“å¼€æˆ‘çš„é¡¹ç›®åœ°å€ or ç½‘é¡µ...â€</p>
<h3 data-id="heading-29"><strong>2. Figma AI Bridge é…ç½®</strong></h3>
<p>è¿™ä¸ªç¨å¾®å¤æ‚ç‚¹ï¼Œéœ€è¦å¡«å…¥ä½ çš„ Figma Tokenã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"Figma AI Bridge"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npx"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">"-y"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"figma-developer-mcp"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"--stdio"</span>
      <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"FIGMA_API_KEY"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ›¿æ¢ä¸ºä½ çš„ key"</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"disabled"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-30"><strong>å¦‚ä½•è·å– Figma Keyï¼Ÿ</strong></h4>
<blockquote>
<p>ç™»å½• Figma ç½‘é¡µç‰ˆ -&gt; ç‚¹å‡»å¤´åƒ -&gt; Settings -&gt; Personal access tokens -&gt; Generate new tokenã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51f65498e5f343fc9fd92b18103bf4b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=zTLf1TuuldrdsuCtSEJxTXfBSaY%3D" alt="æˆªå±2026-02-09 16.00.02.png" loading="lazy"/></p>
<h4 data-id="heading-31"><strong>å¦‚ä½•ä½¿ç”¨ï¼Ÿ</strong></h4>
<blockquote>
<p>åœ¨å¯¹è¯ä¸­ï¼Œæ˜ç¡®æå‡ºè®© AI ä½¿ç”¨ <em><strong>fig</strong></em> <em><strong>ma ai bridge mcp</strong></em> å³å¯è§¦å‘ã€‚</p>
</blockquote>
<p><strong>ç¤ºä¾‹ï¼š</strong> â€œè¯·ä½ ä½¿ç”¨ figma ai bridge mcp æ¥æŸ¥çœ‹æˆ‘çš„è®¾è®¡å›¾ {{æ­¤å¤„å¡«å…¥ä½ çš„è®¾è®¡å›¾ url}}...å¹¶1:1 è¿˜åŸä¸ºå‰ç«¯çš„ html é¡µé¢â€</p>
<h4 data-id="heading-32"><strong>å¦‚ä½•è·å–è®¾è®¡å›¾ URLï¼Ÿ</strong></h4>
<p>é€‰ä¸­ä½ æƒ³è¿˜åŸçš„å®¹å™¨ï¼ˆæ•´ä¸ªé¡µé¢é€‰æœ€å¤–å±‚ï¼Œå•ä¸ªç»„ä»¶é€‰ç»„ä»¶å®¹å™¨ï¼‰ï¼Œå³é”® -&gt; Copy link -&gt; Copy link to selectionã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/380138f301e8437d8033673d6327bc1a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=9NhNwfdpdk9oBZ63A7OM1Wev1ZY%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-33"><strong>é…å¥—ç¥å™¨ï¼šBuilder.io æ’ä»¶ (ç½‘é¡µè½¬è®¾è®¡å›¾)</strong></h4>
<p>åœ¨ Figma çš„ <strong>Actions</strong> (Cmd/Ctrl + P) ä¸­æœç´¢ <code>Builder.io</code> å¹¶è¿è¡Œã€‚</p>
<p>æ‰“å¼€æ’ä»¶åï¼Œåœ¨ <strong>Import</strong> èœå•å¤„é€‰æ‹© <code>Paste from Chrome</code>ã€‚</p>
<blockquote>
<p>è´´å…¥ä½¿ç”¨å®ƒé…å¥— Chrome æ’ä»¶å¤åˆ¶çš„å‰ç«¯ä»£ç  JSONï¼Œå°±èƒ½åœ¨ Figma ä¸­æ‹¿åˆ°å¯¹åº”çš„è®¾è®¡å›¾äº†ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5eb66780267d493b9ed5e1e790bfa2e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=IGvUoG8wOhs64Bww%2FD87HLyVf1U%3D" alt="æˆªå±2026-02-09 16.01.57.png" loading="lazy"/></p>
<h3 data-id="heading-34"><strong>3. å…¶ä»–å»ºè®®é…ç½®</strong></h3>
<p>ä¸ºäº†ä½“éªŒæ›´ä¸æ»‘ï¼Œå»ºè®®æ£€æŸ¥ä»¥ä¸‹è®¾ç½®ï¼š</p>
<p><strong>å¯¹è¯æµé…ç½®ï¼š</strong></p>
<p><strong>è‡ªåŠ¨è¿è¡Œ MCPï¼š</strong> å¼€å¯ (çœå¾—æ¯æ¬¡éƒ½è¦ç‚¹ç¡®è®¤)</p>
<p><strong>ä»¤è¿è¡Œæ–¹å¼ï¼š</strong> æ²™ç®±è¿è¡Œ (å®‰å…¨ç¬¬ä¸€)</p>
<p><strong>ä¸ªäººç™½åå•èŒƒå›´</strong> (å‚è€ƒ)ï¼š</p>
<p>python, cd,npm, chmod (æ ¹æ®é¡¹ç›®éœ€è¦çµæ´»è°ƒæ•´)</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ccb53c2124c40dd9e16a1a7352eeabc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=JyQAvOR53F4p%2FR2FJH%2BudD7qPbE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2484141f57c642459253d2c1e5b046dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771229228&amp;x-signature=UEFgISf1O3E9jVl6HNfAOkmty4s%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-35"><strong>é™„å½•2 ï¼šå¸¸è§èµ„æºå ä½ â€” AI ä»å“ªé‡Œè·å–</strong></h2>
<p>æœ¬é™„å½•é¢å‘å‚ä¸ AI Coding çš„å„ä½ï¼Œè¯´æ˜å¸¸è§å ä½èµ„æºï¼ˆå›¾æ ‡ã€å›¾ç‰‡ï¼‰åº”ä»ä½•å¤„å–å¾—ï¼Œä»¥åŠå¦‚ä½•åœ¨æç¤ºè¯ä¸­æ˜ç¡®è¦æ±‚ï¼Œé¿å…å›¾è£‚æˆ–ç¼ºå›¾æ ‡ã€‚</p>
<h3 data-id="heading-36"><strong>1. å›¾æ ‡ (Icon) å ä½</strong></h3>
<p>å»ºè®®åšæ³•ï¼šåœ¨æç¤ºè¯ä¸­ç›´æ¥æŒ‡å®šä½¿ç”¨æŸä¸€å¥—å›¾æ ‡åº“ï¼Œè®© AI ç”¨ç°æˆç»„ä»¶è€Œéè‡ªç»˜æˆ–å ä½æ–‡å­—ã€‚</p>
<p>*Â å¯é€‰æ¥æºï¼ˆä»»é€‰å…¶ä¸€å³å¯ï¼Œåœ¨æç¤ºè¯é‡Œæä¸€å˜´å³å¯ï¼‰ï¼š</p>
<ul>
<li>
<p>React ç”Ÿæ€å¸¸ç”¨ï¼š<em><strong>react-icons</strong></em>ï¼ˆå¦‚ <em><strong>react-icons/fa</strong></em>ã€<em><strong>react-icons/hi</strong></em> ç­‰ï¼‰</p>
</li>
<li>
<p>ç»„ä»¶åº“è‡ªå¸¦ï¼šè‹¥é¡¹ç›®å·²ç”¨ Ant Designã€Material-UIã€Chakra UI ç­‰ï¼Œå¯å†™æ˜ã€Œä½¿ç”¨ Ant Design çš„ Icon ç»„ä»¶ã€ã€Œä½¿ç”¨ MUI çš„ Iconsã€ç­‰</p>
</li>
</ul>
<p>*Â æç¤ºè¯ç¤ºä¾‹ï¼š</p>
<ul>
<li>
<p>Â  ã€Œé¡µé¢é‡Œçš„å›¾æ ‡è¯·ç”¨ <em><strong>react-icons</strong></em>ï¼Œä»é‡Œé¢é€‰åˆé€‚çš„å›¾æ ‡å³å¯ã€‚ã€</p>
</li>
<li>
<p>Â  ã€Œæˆ‘ä»¬é¡¹ç›®ç”¨ Ant Designï¼Œå›¾æ ‡ç»Ÿä¸€ç”¨ Ant Design çš„ Icon ç»„ä»¶ã€‚ã€</p>
</li>
</ul>
<p>åªè¦åœ¨éœ€æ±‚æˆ–æç¤ºè¯ä¸­æ˜ç¡®å†™å‡ºã€Œç”¨ xx çš„ icon åº“ã€ï¼ŒAI å°±ä¼šä»è¯¥åº“é€‰å›¾æ ‡ï¼Œé¿å…ç•™ç©ºç™½æˆ–ä¹±ç å ä½ã€‚</p>
<h3 data-id="heading-37"><strong>2. å›¾ç‰‡ (Image) å ä½</strong></h3>
<p><strong>å»ºè®®åšæ³•</strong>ï¼šå ä½å›¾ç‰‡ä» <a href="https://link.juejin.cn?target=https%3A%2F%2Funsplash.com%2F" target="_blank" title="https://unsplash.com/" ref="nofollow noopener noreferrer">Unsplash</a> è·å–ä¸å†…å®¹ç›¸å…³çš„å…è´¹å¯å•†ç”¨å›¾ç‰‡ï¼›ä¸”<strong>å¿…é¡»åœ¨é‡‡ç”¨å‰éªŒè¯æ¯ä¸ªå›¾ç‰‡é“¾æ¥å¯è®¿é—®</strong>ï¼Œé¿å…ä¸Šçº¿åå›¾è£‚ã€‚</p>
<ul>
<li>Â  æ¥æºï¼š Unsplash æä¾›å¯å…è´¹ä½¿ç”¨çš„å›¾ç‰‡ï¼Œé€‚åˆåŸå‹ä¸å ä½ã€‚</li>
</ul>
<p>æç¤ºè¯ä¸­å»ºè®®å†™æ˜ï¼š</p>
<ul>
<li>
<p>Â  ã€Œå ä½å›¾ç‰‡ä» Unsplash ä¸Šè·å–ä¸ [ä¸»é¢˜/å…³é”®è¯] ç›¸å…³çš„å…¬å…±å›¾ç‰‡ã€‚ã€</p>
</li>
<li>
<p>Â  ã€Œä½¿ç”¨ Unsplash çš„å›¾ç‰‡ä½œä¸ºå ä½å›¾ï¼Œå¹¶åœ¨ä»£ç æˆ–è„šæœ¬ä¸­éªŒè¯æ¯ä¸ªå›¾ç‰‡ URL å¯è®¿é—®ï¼›è‹¥ä¸å¯è®¿é—®åˆ™æ›¿æ¢æˆ–è·³è¿‡ï¼Œé˜²æ­¢å›¾è£‚ã€‚ã€</p>
</li>
<li>
<p>Â  é‡è¦ï¼š åŠ¡å¿…è®© AI é€ä¸ªéªŒè¯ Unsplash çš„å›¾ç‰‡é“¾æ¥æ˜¯å¦å¯è®¿é—®ï¼ˆä¾‹å¦‚ç”¨ HEAD/GET è¯·æ±‚æˆ–ç®€å•çš„åŠ è½½æµ‹è¯•ï¼‰ï¼Œå†å†™è¿›é¡µé¢æˆ–èµ„æºåˆ—è¡¨ã€‚è¿™æ ·å¯ä»¥é¿å…æ‹¿å›æ¥çš„é“¾æ¥å·²å¤±æ•ˆå¯¼è‡´å‰åç«¯å‡ºç°å›¾è£‚ã€‚</p>
</li>
</ul>
<p><strong>å°ç»“ï¼š</strong> å›¾æ ‡æŒ‡å®š icon åº“ï¼›å›¾ç‰‡æŒ‡å®š Unsplash + éªŒè¯å¯è®¿é—®æ€§ï¼Œå³å¯åœ¨ AI Coding æµç¨‹ä¸­ç¨³å®šä½¿ç”¨è¿™ä¸¤ç±»å ä½èµ„æºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - çŠ¶æ€æ•°æ®è®¾è®¡ [8 - 3]ï¼šæœåŠ¡ç«¯çŠ¶æ€ä¸å®¢æˆ·ç«¯çŠ¶æ€çš„æ¶æ„åˆ†ç¦»]]></title>    <link>https://juejin.cn/post/7604080364353536027</link>    <guid>https://juejin.cn/post/7604080364353536027</guid>    <pubDate>2026-02-09T01:48:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604080364353536027" data-draft-id="7604037348608507942" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - çŠ¶æ€æ•°æ®è®¾è®¡ [8 - 3]ï¼šæœåŠ¡ç«¯çŠ¶æ€ä¸å®¢æˆ·ç«¯çŠ¶æ€çš„æ¶æ„åˆ†ç¦»"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-09T01:48:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ç‹å£®å£®"/> <meta itemprop="url" content="https://juejin.cn/user/4473272506789485"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - çŠ¶æ€æ•°æ®è®¾è®¡ [8 - 3]ï¼šæœåŠ¡ç«¯çŠ¶æ€ä¸å®¢æˆ·ç«¯çŠ¶æ€çš„æ¶æ„åˆ†ç¦»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4473272506789485/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ç‹å£®å£®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T01:48:14.000Z" title="Mon Feb 09 2026 01:48:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><blockquote>
<p><strong>å†™åœ¨å‰é¢</strong></p>
<p>æ¶æ„å¸ˆçš„æ ¸å¿ƒèƒ½åŠ›ä¹‹ä¸€æ˜¯<strong>åˆ†ç±»</strong>ã€‚ å¦‚æœä½ è§‰å¾—çŠ¶æ€ç®¡ç†å¾ˆç—›è‹¦ï¼Œé€šå¸¸æ˜¯å› ä¸ºä½ è¯•å›¾ç”¨åŒä¸€ç§å·¥å…·å¤„ç†ä¸¤ç§æˆªç„¶ä¸åŒçš„ä¸œè¥¿ï¼š</p>
<ol>
<li><strong>å®¢æˆ·ç«¯çŠ¶æ€ (Client State):</strong> æ¯”å¦‚â€œä¾§è¾¹æ æ˜¯å¦å±•å¼€â€ã€â€œå½“å‰çš„å¤œé—´æ¨¡å¼â€ã€‚å®ƒä»¬æ˜¯åŒæ­¥çš„ã€ç¬é—´å®Œæˆçš„ã€ç”±å‰ç«¯å®Œå…¨æ§åˆ¶ã€‚</li>
<li><strong>æœåŠ¡ç«¯çŠ¶æ€ (Server State):</strong> æ¯”å¦‚â€œç”¨æˆ·è®¢å•åˆ—è¡¨â€ã€‚å®ƒä»¬æ˜¯å¼‚æ­¥çš„ã€å¯èƒ½å¤±æ•ˆçš„ã€ç”±åç«¯æ§åˆ¶ã€‚</li>
</ol>
<p><strong>Redux å¹¶ä¸æ“…é•¿ç®¡ç† Server Stateã€‚</strong> çœŸæ­£ä¸“ä¸šçš„åšæ³•æ˜¯ï¼šè®© Redux å›å½’ UIï¼Œè®© <strong>TanStack Query (React Query)</strong> æ¥ç®¡ APIã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d9f6f5986f94242a443885bf85de09c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv546L5aOu5aOu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771206494&amp;x-signature=uHWxDd5HMJlf7Tqefazr1Yj2Duo%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ ä¸ºä»€ä¹ˆè¦æŠŠ API èµ¶å‡º Reduxï¼Ÿ</h2>
<h3 data-id="heading-1">1.1 æ¶ˆå¤±çš„â€œæ ·æ¿ä»£ç â€</h3>
<p>åœ¨ä¼ ç»Ÿçš„ Redux å¤„ç† API æµç¨‹ä¸­ï¼Œä½ éœ€è¦å†™ï¼š</p>
<ul>
<li>ä¸€ä¸ª <code>Constant</code> å®šä¹‰ <code>FETCH_USER_REQUEST</code></li>
<li>ä¸€ä¸ª <code>Action Creator</code></li>
<li>ä¸€ä¸ªå¤„ç† <code>Pending/Success/Error</code> çš„ <code>Reducer</code></li>
<li>ä¸€ä¸ª <code>useEffect</code> æ¥è§¦å‘è¯·æ±‚</li>
</ul>
<p>è€Œåœ¨ <strong>TanStack Query</strong> ä¸­ï¼Œè¿™åªéœ€è¦ä¸€è¡Œä»£ç ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">const</span> { data, isLoading } = <span class="hljs-title function_ invoke__">useQuery</span>({ <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'user'</span>], <span class="hljs-attr">queryFn</span>: fetchUser });
</code></pre>
<h3 data-id="heading-2">1.2 ç¼“å­˜ä¸å¤±æ•ˆï¼šRedux çš„ç›²åŒº</h3>
<p>Server State æœ€éš¾çš„ä¸æ˜¯â€œè·å–â€ï¼Œè€Œæ˜¯**â€œç»´æŠ¤â€**ã€‚</p>
<ul>
<li>ç”¨æˆ·ç¦»å¼€é¡µé¢ 5 åˆ†é’Ÿåå›æ¥ï¼Œæ•°æ®è¿˜æ˜¯æ–°çš„å—ï¼Ÿ</li>
<li>ä¸¤ä¸ªç»„ä»¶åŒæ—¶è¯·æ±‚åŒä¸€ä¸ªæ¥å£ï¼Œä¼šå‘ä¸¤æ¬¡è¯·æ±‚å—ï¼Ÿ</li>
<li>å¼±ç½‘ç¯å¢ƒä¸‹ï¼Œè¯·æ±‚å¤±è´¥äº†ä¼šè‡ªåŠ¨é‡è¯•å—ï¼Ÿ å¦‚æœè¦ç”¨ Redux å®ç°è¿™äº›ï¼Œä½ éœ€è¦å†™å‡ ç™¾è¡Œå¤æ‚çš„ Middlewareã€‚è€Œè¿™äº›ï¼Œæ˜¯ Server State ç®¡ç†å·¥å…·çš„<strong>æ ‡é…</strong>ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-3">äºŒã€ æ¶æ„æ¨¡å‹ï¼šåŒå±‚æ•°æ®æµ</h2>
<p>ç°ä»£å‰ç«¯æ¶æ„æ¨èé‡‡ç”¨ <strong>â€œåŒå±‚åˆ†ç¦»â€</strong> æ¨¡å‹ï¼š</p>
<h3 data-id="heading-4">2.1 å¤–éƒ¨å±‚ï¼šæœåŠ¡ç«¯çŠ¶æ€ (Server State)</h3>
<ul>
<li><strong>å·¥å…·ï¼š</strong> TanStack Query (React Query) æˆ– SWRã€‚</li>
<li><strong>èŒè´£ï¼š</strong> ç¼“å­˜ç®¡ç†ã€è‡ªåŠ¨é¢„å–ã€å¤±æ•ˆæ£€æŸ¥ (Stale-While-Revalidate)ã€è¯·æ±‚å»é‡ã€‚</li>
<li><strong>ç‰¹ç‚¹ï¼š</strong> å®ƒæ˜¯<strong>å¼‚æ­¥</strong>çš„ã€‚</li>
</ul>
<h3 data-id="heading-5">2.2 å†…éƒ¨å±‚ï¼šå®¢æˆ·ç«¯çŠ¶æ€ (Client State)</h3>
<ul>
<li><strong>å·¥å…·ï¼š</strong> Zustand, Pinia, Jotai æˆ–ç®€å•çš„ React Contextã€‚</li>
<li><strong>èŒè´£ï¼š</strong> ç®¡ç†çº¯ç²¹çš„ UI é€»è¾‘ï¼ˆå¼€å…³ã€å¤šè¯­è¨€ã€ä¸»é¢˜ã€ä¸´æ—¶è‰ç¨¿ï¼‰ã€‚</li>
<li><strong>ç‰¹ç‚¹ï¼š</strong> å®ƒæ˜¯<strong>åŒæ­¥</strong>çš„ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€ å®æˆ˜æˆ˜æœ¯ï¼šä»â€œæ‰‹åŠ¨æŒ¡â€åˆ‡æ¢åˆ°â€œè‡ªåŠ¨æŒ¡â€</h2>
<h3 data-id="heading-7">3.1 è‡ªåŠ¨åŒ–çš„ä¾èµ–è¿½è¸ª</h3>
<p>æƒ³è±¡ä¸€ä¸ªåœºæ™¯ï¼šä½ ä¿®æ”¹äº†ç”¨æˆ·çš„å¤´åƒï¼Œä½ éœ€è¦æ›´æ–°æ‰€æœ‰æ˜¾ç¤ºå¤´åƒçš„åœ°æ–¹ã€‚</p>
<ul>
<li><strong>æ—§æ¨¡å¼ (Redux):</strong> ä¿®æ”¹æˆåŠŸåï¼Œæ‰‹åŠ¨å‘èµ·ä¸€ä¸ª <code>updateUserAction</code> å»ä¿®æ”¹ Redux é‡Œçš„é‚£ä¸ªå¤§å¯¹è±¡ã€‚</li>
<li><strong>æ–°æ¨¡å¼ (Query):</strong> åªéœ€è¦æ‰§è¡Œä¸€æ¬¡â€œå¤±æ•ˆï¼ˆInvalidateï¼‰â€ã€‚</li>
</ul>

<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// å½“ç”¨æˆ·ä¿®æ”¹ä¸ªäººèµ„æ–™æˆåŠŸæ—¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">mutation</span> = <span class="hljs-title function_ invoke__">useMutation</span>({
  <span class="hljs-attr">mutationFn</span>: updateProfile,
  <span class="hljs-attr">onSuccess</span>: () =&gt; {
    <span class="hljs-comment">// å‘Šè¯‰ç³»ç»Ÿï¼š['user'] è¿™ä¸ª key ä¸‹çš„æ•°æ®è„äº†ï¼Œè¯·è‡ªåŠ¨é‡æ–°æ‹‰å–</span>
    queryClient.<span class="hljs-title function_ invoke__">invalidateQueries</span>({ <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'user'</span>] })
  },
})
</code></pre>
<p><strong>æ¶æ„æ„ä¹‰ï¼š</strong> ä½ çš„ä»£ç ä¸å†éœ€è¦å…³å¿ƒâ€œæ•°æ®æ€ä¹ˆåŒæ­¥â€ï¼Œåªéœ€è¦å…³å¿ƒâ€œæ•°æ®ä½•æ—¶å¤±æ•ˆâ€ã€‚</p>
<h3 data-id="heading-8">3.2 ä¹è§‚æ›´æ–° (Optimistic Updates)</h3>
<p>è¿™æ˜¯æ¶æ„é«˜çº§æ„Ÿçš„æ ¸å¿ƒã€‚å½“ç”¨æˆ·ç‚¹èµæ—¶ï¼Œæˆ‘ä»¬ä¸ç­‰åç«¯è¿”å›ï¼Œç›´æ¥æ”¹ UIã€‚</p>
<p>TanStack Query å…è®¸ä½ åœ¨ <code>onMutate</code> ä¸­æ‰‹åŠ¨ä¿®æ”¹ç¼“å­˜å‰¯æœ¬ï¼Œå¦‚æœè¯·æ±‚å¤±è´¥ï¼Œå®ƒä¼šè‡ªåŠ¨å›æ»šã€‚è¿™ç§å¤æ‚çš„é€»è¾‘å¦‚æœå†™åœ¨ Redux é‡Œï¼Œä¼šè®© Reducer é€»è¾‘å˜å¾—æåº¦è‡ƒè‚¿ã€‚</p>
<hr/>
<h2 data-id="heading-9">å››ã€ é€‰å‹å†³ç­–ï¼šä»€ä¹ˆæ—¶å€™è¯¥ç”¨è°ï¼Ÿ</h2>
<p>ä½œä¸ºæ¶æ„å¸ˆï¼Œä½ éœ€è¦ç»™å›¢é˜Ÿåˆ’æ¸…ç•Œé™ï¼š</p>



































<table><thead><tr><th>çŠ¶æ€ç±»å‹</th><th>å…¸å‹ä¾‹å­</th><th>æ¨èå·¥å…·</th><th>å­˜å‚¨ä½ç½®</th></tr></thead><tbody><tr><td><strong>API æ•°æ®</strong></td><td>å•†å“åˆ—è¡¨ã€ç”¨æˆ·ä¿¡æ¯</td><td><strong>TanStack Query</strong></td><td>ä¸“ç”¨ Cache æ± </td></tr><tr><td><strong>å…¨å±€ UI çŠ¶æ€</strong></td><td>ç™»å½• Tokenã€å…¨å±€ä¸»é¢˜</td><td><strong>Zustand / Pinia</strong></td><td>å…¨å±€ Store</td></tr><tr><td><strong>å±€éƒ¨ UI çŠ¶æ€</strong></td><td>æŸä¸ªå¼¹çª—çš„å¼€å…³</td><td><strong>useState</strong></td><td>ç»„ä»¶å†…éƒ¨</td></tr><tr><td><strong>å¤æ‚è¡¨å•</strong></td><td>å¤šæ­¥éª¤æ³¨å†Œè¡¨å•</td><td><strong>React Hook Form</strong></td><td>ä¸“ç”¨ Form State</td></tr></tbody></table>
<p>å¯¼å‡ºåˆ° Google è¡¨æ ¼</p>
<hr/>
<h2 data-id="heading-10">äº”ã€ æ€»ç»“ï¼šè®© Redux å˜â€œç˜¦â€</h2>
<p>é€šè¿‡æŠŠ API é€»è¾‘å‰¥ç¦»å‡ºå»ï¼Œä½ ä¼šå‘ç°ä½ çš„ Reduxï¼ˆæˆ–è€… Zustandï¼‰Store ç¬é—´ç¼©æ°´äº† <strong>80%</strong> ã€‚ å‰©ä¸‹çš„ä»£ç å˜å¾—æå…¶çº¯ç²¹ï¼šåªæœ‰çº¯åŒæ­¥çš„ UI é€»è¾‘ã€‚</p>
<p>è¿™ç§**â€œåˆ†æ²»â€**å¸¦æ¥çš„å¥½å¤„æ˜¯å·¨å¤§çš„ï¼š</p>
<ol>
<li><strong>å¿ƒæ™ºè´Ÿæ‹…é™ä½ï¼š</strong> ä½ ä¸å†éœ€è¦ç®¡ç†å¤æ‚çš„ <code>loading</code> çŠ¶æ€æœºã€‚</li>
<li><strong>æ€§èƒ½æå‡ï¼š</strong> TanStack Query çš„ç»†ç²’åº¦ç¼“å­˜æ¯” Redux çš„å…¨é‡å¯¹æ¯”å¿«å¾—å¤šã€‚</li>
<li><strong>å¼€å‘æ•ˆç‡ï¼š</strong> å›¢é˜Ÿæˆå‘˜å¯ä»¥æ›´ä¸“æ³¨åœ°ç¼–å†™ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸æ˜¯åœ¨æ ·æ¿ä»£ç ä¸­æŒ£æ‰ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-11">ç»“è¯­ï¼šæ§åˆ¶çš„è‰ºæœ¯</h2>
<p>æˆ‘ä»¬å·²ç»æˆåŠŸåœ°å°† API æ•°æ®å’Œ UI çŠ¶æ€åˆ†å¼€äº†ã€‚ ä½†è¿˜æœ‰ä¸€ç§çŠ¶æ€æœ€è®©æ¶æ„å¸ˆå¤´ç–¼ï¼š<strong>æµç¨‹çŠ¶æ€</strong>ã€‚ å½“ä½ çš„ä¸šåŠ¡é€»è¾‘åŒ…å«â€œå¾…æ”¯ä»˜ -&gt; æ”¯ä»˜ä¸­ -&gt; æ”¯ä»˜æˆåŠŸ/å¤±è´¥ -&gt; ç”³è¯·é€€æ¬¾ -&gt; å·²å…³é—­â€è¿™ç§å¤æ‚çš„é“¾è·¯æ—¶ï¼Œæ— è®ºä½ ç”¨ä»€ä¹ˆå·¥å…·ï¼Œä»£ç é‡Œéƒ½ä¼šå……æ»¡ <code>if/else</code>ã€‚</p>
<p>è¿™ç§é€»è¾‘è¯¥å¦‚ä½•ä¼˜é›…åœ°ç®¡ç†ï¼Ÿ</p>
<blockquote>
<p><strong>Next Step:</strong> ä¸‹ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°†å¼•å…¥ä¸€ä¸ªåœ¨èˆªå¤©å’Œæ¸¸æˆé¢†åŸŸåº”ç”¨äº†å‡ åå¹´çš„æ•°å­¦æ¨¡å‹ã€‚ æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•ç”¨â€œå›¾â€çš„æ€æƒ³ï¼Œç»ˆç»“ä»£ç é‡Œçš„é€»è¾‘ä¹±éº»ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶èµ·æ­¥å­¦ä¹ Redis || ç¬¬ä¹ç« ï¼šç¼“å­˜é›ªå´©ï¼Œç¼“å­˜å‡»ç©¿ï¼Œç¼“å­˜ç©¿é€ä¸‰å¤§é—®é¢˜çš„æˆå› åŠå®æˆ˜è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7604801893529944107</link>    <guid>https://juejin.cn/post/7604801893529944107</guid>    <pubDate>2026-02-10T08:03:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604801893529944107" data-draft-id="7604853010170609705" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶èµ·æ­¥å­¦ä¹ Redis || ç¬¬ä¹ç« ï¼šç¼“å­˜é›ªå´©ï¼Œç¼“å­˜å‡»ç©¿ï¼Œç¼“å­˜ç©¿é€ä¸‰å¤§é—®é¢˜çš„æˆå› åŠå®æˆ˜è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="æœåŠ¡å™¨,Redis"/> <meta itemprop="datePublished" content="2026-02-10T08:03:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èŒ¶æ¯æ¢¦è½©"/> <meta itemprop="url" content="https://juejin.cn/user/195039473183699"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶èµ·æ­¥å­¦ä¹ Redis || ç¬¬ä¹ç« ï¼šç¼“å­˜é›ªå´©ï¼Œç¼“å­˜å‡»ç©¿ï¼Œç¼“å­˜ç©¿é€ä¸‰å¤§é—®é¢˜çš„æˆå› åŠå®æˆ˜è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/195039473183699/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èŒ¶æ¯æ¢¦è½©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T08:03:02.000Z" title="Tue Feb 10 2026 08:03:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90fde5dbe7d14a28a5f493b833b48398~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Iy25p2v5qKm6L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771315383&amp;x-signature=lmlEqdAsm5Pw%2FTVJZN7CwfeYt5w%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>åœ¨é«˜å¹¶å‘ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨ <strong>Redis</strong> æ¥åšç¼“å­˜ï¼Œä»¥å‡è½»æ•°æ®åº“å‹åŠ›ã€æé«˜ç³»ç»Ÿæ€§èƒ½ã€‚ç„¶è€Œï¼Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œå¦‚æœç¼“å­˜æœºåˆ¶è®¾è®¡ä¸å½“ï¼Œå°±å®¹æ˜“å‡ºç°ä¸‰ç§ç»å…¸é—®é¢˜ï¼š</p>
<ul>
<li><strong>ç¼“å­˜é›ªå´©ï¼ˆCache Avalancheï¼‰</strong></li>
<li><strong>ç¼“å­˜å‡»ç©¿ï¼ˆCache Breakdownï¼‰</strong></li>
<li><strong>ç¼“å­˜ç©¿é€ï¼ˆCache Penetrationï¼‰</strong></li>
</ul>
<p>è¿™ä¸‰ç§é—®é¢˜çœ‹èµ·æ¥ç±»ä¼¼ï¼Œä½†æ ¹æœ¬åŸå› å’Œè§£å†³æ–¹æ¡ˆå´ä¸ç›¸åŒã€‚æœ¬æ–‡å°†é€ä¸€åˆ†æå®ƒä»¬çš„ <strong>æˆå› ã€å½±å“ã€è§£å†³æ–¹æ¡ˆåŠä»£ç å®è·µ</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-1">Â ä¸€ã€ç¼“å­˜é›ªå´©ï¼ˆCache Avalancheï¼‰</h2>
<h3 data-id="heading-2">Â 1. æ¦‚å¿µ</h3>
<p>ç¼“å­˜é›ªå´©æ˜¯æŒ‡ï¼š</p>
<blockquote>
<p>åœ¨åŒä¸€æ—¶é—´ï¼Œå¤§é‡ç¼“å­˜æ•°æ®åŒæ—¶è¿‡æœŸæˆ–ç¼“å­˜æœåŠ¡å®•æœºï¼Œå¯¼è‡´æ‰€æœ‰è¯·æ±‚ç›´æ¥æ‰“åˆ°æ•°æ®åº“ï¼Œæ•°æ®åº“å‹åŠ›éª¤å¢ç”šè‡³å´©æºƒã€‚</p>
</blockquote>
<h3 data-id="heading-3">Â 2. æˆå› </h3>
<ul>
<li>æ‰€æœ‰ç¼“å­˜ key è®¾ç½®äº†ç›¸åŒçš„è¿‡æœŸæ—¶é—´ï¼ˆå¦‚éƒ½åœ¨å‡Œæ™¨ 0 ç‚¹å¤±æ•ˆï¼‰ï¼›</li>
<li>Redis å®•æœºï¼›</li>
<li>åº”ç”¨é‡å¯æˆ–ç¼“å­˜è¢«æ‰¹é‡æ¸…ç©ºã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<blockquote>
<p>å•†å“ä¿¡æ¯ç¼“å­˜è®¾ç½®ä¸º 2 å°æ—¶å¤±æ•ˆï¼Œ2 å°æ—¶åæ‰€æœ‰ key åŒæ—¶è¿‡æœŸï¼Œå¤§é‡è¯·æ±‚ç¬é—´æ¶Œå‘æ•°æ®åº“ã€‚</p>
</blockquote>
<h3 data-id="heading-4">Â 3. è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-5">âœ… æ–¹æ¡ˆ1ï¼šç»™è¿‡æœŸæ—¶é—´åŠ éšæœºå€¼ï¼ˆå‡åŒ€å¹³å‡è¿‡æœŸæ—¶é—´ï¼‰</h4>
<p>é¿å…åŒä¸€æ—¶åˆ»å¤§é‡ key åŒæ—¶å¤±æ•ˆã€‚</p>
<pre><code class="hljs language-scss" lang="scss">int expire = <span class="hljs-number">3600</span> + new <span class="hljs-built_in">Random</span>()<span class="hljs-selector-class">.nextInt</span>(<span class="hljs-number">600</span>); <span class="hljs-comment">// 1å°æ—¶~1å°æ—¶10åˆ†é’Ÿ</span>
redisTemplate<span class="hljs-selector-class">.opsForValue</span>()<span class="hljs-selector-class">.set</span>("product:" + id, product, expire, TimeUnit.SECONDS);
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-6">âœ… æ–¹æ¡ˆ2ï¼šç¼“å­˜é¢„çƒ­</h4>
<p>åœ¨ç³»ç»Ÿå¯åŠ¨æˆ–æµé‡é«˜å³°å‰ï¼Œæå‰åŠ è½½çƒ­ç‚¹æ•°æ®è¿›ç¼“å­˜ã€‚</p>
<h4 data-id="heading-7">âœ… æ–¹æ¡ˆ3ï¼šæœåŠ¡é™çº§æœºåˆ¶</h4>
<p>å½“ç¼“å­˜ä¸å¯ç”¨æ—¶ï¼Œä¸´æ—¶è¿”å›é»˜è®¤å€¼ã€å…œåº•æ•°æ®æˆ–æç¤ºç¨åå†è¯•ã€‚</p>
<h4 data-id="heading-8">âœ… æ–¹æ¡ˆ4ï¼šå¤šçº§ç¼“å­˜</h4>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>ä¸€çº§ï¼šæœ¬åœ°ç¼“å­˜ï¼ˆCaffeineã€Guavaï¼‰</li>
<li>äºŒçº§ï¼šRedis</li>
</ul>
<h4 data-id="heading-9">âœ… æ–¹æ¡ˆ5ï¼šäº’æ–¥é”</h4>
<p>å½“å¤§é‡ä¸šåŠ¡çº¿ç¨‹è¯·æ±‚Rediså‘ç°æ•°æ®ä¸å­˜åœ¨ï¼ˆè¿‡æœŸï¼‰ï¼Œä½¿ç”¨äº’æ–¥é”é”ä½ä¸€ä¸ªçº¿ç¨‹ï¼ˆä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹å»æ‹‰å–æ•°æ®åˆ°Redisï¼‰ï¼Œå…¶ä»–çº¿ç¨‹æ²¡æœ‰é”å°±æ— æ³•è¯·æ±‚ï¼Œåªèƒ½ç­‰å¾…æˆ–è€…è¿”å›ç©ºå€¼</p>
<h4 data-id="heading-10">âœ… æ–¹æ¡ˆ6ï¼šåå°æ›´æ–°ç¼“å­˜</h4>
<p>æ•°æ®ç›´æ¥è®¾ç½®ä¸ºä¸è¿‡æœŸï¼Œå¦‚æœæ•°æ®åº“æœ‰å˜åŒ–ï¼Œå†æ›´æ–°Redisä¸­çš„æ•°æ®</p>
<p>é—®é¢˜ï¼šä¸è¿‡æœŸå¯èƒ½ä¼šå‡ºç°å†…å­˜æ·˜æ±°ï¼Œæ­¤æ—¶å¦‚ä½•å¤„ç†ï¼Ÿ</p>
<p>ç­”ï¼šä¸šåŠ¡çº¿ç¨‹å‘ç°ç¼“å­˜æ•°æ®å¤±æ•ˆåï¼Œç”¨<strong>æ¶ˆæ¯é˜Ÿåˆ—</strong>é€šçŸ¥åå°çº¿ç¨‹æ›´æ–°ç¼“å­˜</p>
<hr/>
<h2 data-id="heading-11">Â äºŒã€ç¼“å­˜å‡»ç©¿ï¼ˆCache Breakdownï¼‰</h2>
<h3 data-id="heading-12">Â 1. æ¦‚å¿µ</h3>
<p>ç¼“å­˜å‡»ç©¿æ˜¯æŒ‡ï¼š</p>
<blockquote>
<p>æŸä¸ªçƒ­ç‚¹ key åœ¨å¤±æ•ˆçš„ç¬é—´ï¼Œæœ‰å¤§é‡å¹¶å‘è¯·æ±‚åŒæ—¶è®¿é—®è¯¥ keyï¼Œç¼“å­˜æœªå‘½ä¸­ï¼Œå¯¼è‡´ç¬é—´å¤§é‡è¯·æ±‚æ‰“åˆ°æ•°æ®åº“ã€‚</p>
</blockquote>
<h3 data-id="heading-13">Â 2. æˆå› </h3>
<ul>
<li>çƒ­ç‚¹ key è¿‡æœŸï¼ˆä¾‹å¦‚ç§’æ€å•†å“ã€é¦–é¡µ banner ç­‰ï¼‰ï¼›</li>
<li>ç¬é—´æœ‰å¤§é‡è¯·æ±‚è®¿é—®è¯¥çƒ­ç‚¹ keyã€‚</li>
</ul>
<h3 data-id="heading-14">Â 3. è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-15">âœ… æ–¹æ¡ˆ1ï¼šåˆ†å¸ƒå¼é”ï¼ˆäº’æ–¥é”ï¼‰</h4>
<p>é˜²æ­¢å¤šä¸ªçº¿ç¨‹åŒæ—¶å»åŠ è½½æ•°æ®åº“ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">String <span class="hljs-attr">key</span> = <span class="hljs-string">"product:"</span> + id<span class="hljs-comment">;</span>
String <span class="hljs-attr">lockKey</span> = <span class="hljs-string">"lock:"</span> + key<span class="hljs-comment">;</span>

Object <span class="hljs-attr">cache</span> = redisTemplate.opsForValue().get(key)<span class="hljs-comment">;</span>
if (<span class="hljs-attr">cache</span> == null) {
    if (tryLock(lockKey)) { // æŠ¢åˆ°é”
        Object <span class="hljs-attr">dbData</span> = queryFromDB(id)<span class="hljs-comment">;</span>
        redisTemplate.opsForValue().set(key, dbData, 60, TimeUnit.SECONDS)<span class="hljs-comment">;</span>
        releaseLock(lockKey)<span class="hljs-comment">;</span>
    } else {
        Thread.sleep(100)<span class="hljs-comment">; // æ²¡æŠ¢åˆ°é”çš„ç¨ç­‰å†æŸ¥ç¼“å­˜</span>
        return redisTemplate.opsForValue().get(key)<span class="hljs-comment">;</span>
    }
}
return cache<span class="hljs-comment">;</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-16">âœ… æ–¹æ¡ˆ2ï¼šé€»è¾‘è¿‡æœŸï¼ˆæ°¸ä¸è¿‡æœŸç­–ç•¥ï¼‰</h4>
<p>ç¼“å­˜ä¸­ä¿å­˜æ•°æ®å’Œè¿‡æœŸæ—¶é—´å­—æ®µï¼Œè¿‡æœŸååå°å¼‚æ­¥æ›´æ–°ï¼Œè€Œéç›´æ¥åˆ é™¤ç¼“å­˜ã€‚</p>
<h4 data-id="heading-17">âœ… æ–¹æ¡ˆ3ï¼šå¼‚æ­¥é¢„åˆ·æ–°</h4>
<p>ä½¿ç”¨å®šæ—¶ä»»åŠ¡åœ¨ key å³å°†è¿‡æœŸæ—¶æå‰åˆ·æ–°ã€‚</p>
<hr/>
<h2 data-id="heading-18">Â ä¸‰ã€ç¼“å­˜ç©¿é€ï¼ˆCache Penetrationï¼‰</h2>
<h3 data-id="heading-19">Â 1. æ¦‚å¿µ</h3>
<p>ç¼“å­˜ç©¿é€æ˜¯æŒ‡ï¼š</p>
<blockquote>
<p>æŸ¥è¯¢ä¸€ä¸ª <strong>ç¼“å­˜å’Œæ•°æ®åº“ä¸­éƒ½ä¸å­˜åœ¨çš„ key</strong>ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½ç»•è¿‡ç¼“å­˜ç›´æ¥æ‰“åˆ°æ•°æ®åº“ï¼Œå¯¼è‡´æ•°æ®åº“å‹åŠ›è¿‡å¤§ã€‚</p>
</blockquote>
<h3 data-id="heading-20">Â 2. æˆå› </h3>
<ul>
<li>ç”¨æˆ·æˆ–æ”»å‡»è€…è¯·æ±‚éæ³•æˆ–ä¸å­˜åœ¨çš„ keyï¼›</li>
<li>æ•°æ®åº“æŸ¥æ— æ­¤æ•°æ®ï¼Œç¼“å­˜æœªä¿å­˜ä»»ä½•ç»“æœï¼›</li>
<li>ä¸‹æ¬¡ç›¸åŒè¯·æ±‚åˆæ‰“åˆ°æ•°æ®åº“ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<blockquote>
<p>æ”»å‡»è€…è¯·æ±‚ <code>/product?id=-9999</code>ï¼ŒRedis æ²¡æœ‰ï¼Œæ•°æ®åº“ä¹Ÿæ²¡æœ‰ã€‚ä¸‹æ¬¡å†è¯·æ±‚åˆé‡å¤æ‰“ DBã€‚</p>
</blockquote>
<h3 data-id="heading-21">Â 3. è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-22">âœ… æ–¹æ¡ˆ1ï¼šç¼“å­˜ç©ºå¯¹è±¡</h4>
<p>æŸ¥è¯¢ç»“æœä¸ºç©ºæ—¶ï¼Œä¹Ÿå†™å…¥ç¼“å­˜ï¼ˆå¯è®¾ç½®è¾ƒçŸ­ TTLï¼‰ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">Object dbData = queryFromDB(<span class="hljs-built_in">id</span>);
<span class="hljs-keyword">if</span> (dbData == null) {
    redisTemplate.opsForValue().<span class="hljs-built_in">set</span>(<span class="hljs-string">"product:"</span> + <span class="hljs-built_in">id</span>, <span class="hljs-string">"NODATA"</span>, 60, TimeUnit.SECONDS);
} <span class="hljs-keyword">else</span> {
    redisTemplate.opsForValue().<span class="hljs-built_in">set</span>(<span class="hljs-string">"product:"</span> + <span class="hljs-built_in">id</span>, dbData, 300, TimeUnit.SECONDS);
}
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-23">âœ… æ–¹æ¡ˆ2ï¼šå‚æ•°æ ¡éªŒ</h4>
<p>å¯¹è¯·æ±‚å‚æ•°åˆæ³•æ€§è¿›è¡Œæ£€æŸ¥ï¼Œå¦‚ ID &lt; 0 æˆ–éæ³•å­—ç¬¦ç›´æ¥æ‹¦æˆªã€‚</p>
<h4 data-id="heading-24">âœ… æ–¹æ¡ˆ3ï¼šå¸ƒéš†è¿‡æ»¤å™¨ï¼ˆBloom Filterï¼‰</h4>
<p>åœ¨è®¿é—® Redis ä¹‹å‰ï¼Œå…ˆé€šè¿‡å¸ƒéš†è¿‡æ»¤å™¨åˆ¤æ–­ key æ˜¯å¦å¯èƒ½å­˜åœ¨ã€‚</p>
<ul>
<li>ä¸å­˜åœ¨ â†’ ç›´æ¥æ‹¦æˆªè¯·æ±‚ï¼›</li>
<li>å¯èƒ½å­˜åœ¨ â†’ å†è®¿é—® Redisã€‚</li>
</ul>

<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">if</span> (!bloomFilter.mightContain(<span class="hljs-string">"product:"</span> + id)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>; <span class="hljs-comment">// ç›´æ¥æ‹¦æˆª</span>
}
<span class="hljs-keyword">return</span> redisTemplate.opsForValue().<span class="hljs-keyword">get</span>(<span class="hljs-string">"product:"</span> + id);
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-25">Â å››ã€å¯¹æ¯”æ€»ç»“</h2>





























<table><thead><tr><th>é—®é¢˜ç±»å‹</th><th>ç°è±¡</th><th>æˆå› </th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>ç¼“å­˜é›ªå´©</strong></td><td>å¤§é‡ç¼“å­˜åŒæ—¶å¤±æ•ˆï¼ŒDB å‹åŠ›æš´å¢</td><td>åŒä¸€æ—¶é—´è¿‡æœŸã€Redis å®•æœº</td><td>éšæœºè¿‡æœŸæ—¶é—´ã€é¢„çƒ­ã€é™çº§ã€å¤šçº§ç¼“å­˜</td></tr><tr><td><strong>ç¼“å­˜å‡»ç©¿</strong></td><td>çƒ­ç‚¹ key å¤±æ•ˆç¬é—´è¢«å¹¶å‘è®¿é—®</td><td>çƒ­ç‚¹ key è¿‡æœŸ</td><td>åˆ†å¸ƒå¼é”ã€é€»è¾‘è¿‡æœŸã€å¼‚æ­¥åˆ·æ–°</td></tr><tr><td><strong>ç¼“å­˜ç©¿é€</strong></td><td>æŸ¥è¯¢ä¸å­˜åœ¨æ•°æ®åå¤è®¿é—® DB</td><td>key ä¸å­˜åœ¨ä¸”æ— ç¼“å­˜</td><td>ç¼“å­˜ç©ºå€¼ã€å‚æ•°æ ¡éªŒã€å¸ƒéš†è¿‡æ»¤å™¨</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-26">Â äº”ã€ç»“è¯­</h2>
<p>Redis ç¼“å­˜çš„ä½¿ç”¨æ˜¯é«˜å¹¶å‘ç³»ç»Ÿä¸­æå‡æ€§èƒ½çš„å…³é”®æ‰‹æ®µï¼Œä½†å¦‚æœä¸å¤„ç†å¥½ç¼“å­˜çš„å¤±æ•ˆæœºåˆ¶ï¼Œç³»ç»Ÿåè€Œå¯èƒ½å› ä¸ºç¼“å­˜é—®é¢˜è€Œâ€œè‡ªçˆ†â€ã€‚</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¦»äº†å¤§è°±ï¼ä¸€ä¸ª prompt ç”Ÿæˆäº† 7 ä¸‡å­—ï¼mark]]></title>    <link>https://juejin.cn/post/7604701848151769088</link>    <guid>https://juejin.cn/post/7604701848151769088</guid>    <pubDate>2026-02-10T08:11:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604701848151769088" data-draft-id="7604881286037028916" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¦»äº†å¤§è°±ï¼ä¸€ä¸ª prompt ç”Ÿæˆäº† 7 ä¸‡å­—ï¼mark "/> <meta itemprop="keywords" content="LLM"/> <meta itemprop="datePublished" content="2026-02-10T08:11:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘å®‰ä¸œå°¼"/> <meta itemprop="url" content="https://juejin.cn/user/1521379823340792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¦»äº†å¤§è°±ï¼ä¸€ä¸ª prompt ç”Ÿæˆäº† 7 ä¸‡å­—ï¼mark 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379823340792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘å®‰ä¸œå°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T08:11:48.000Z" title="Tue Feb 10 2026 08:11:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»36åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>æˆ‘ä¹Ÿä¸æ˜æ‰€ä»¥ï¼Œç³–ç³–ï¼Œå…ˆè®°ä¸‹æ¥ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9c534246c294c659af838cfe6038f84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771315909&amp;x-signature=60q7G2AKilbBY9yp66R10X1xOGc%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">åŸ prompt</h2>
<blockquote>
<p>è¯„ä»·è¿™ä¸ªæŠ€æœ¯æ¡†æ¶ï¼Œåˆ—è¡¨ï¼šäº¤ä»˜ä¸€æ¬¾æˆå“æ„Ÿå¾ˆå¼ºçš„æ¡Œé¢è½¯ä»¶ï¼Œåå­—å«ã€ŒçŸ­ä¿¡æ™ºæ ‡å®˜ï¼ˆSMS Tagging Officerï¼‰ã€ã€‚å®ƒç”¨äºå¯¹å‡ åƒæ¡çŸ­ä¿¡åšç¦»çº¿åˆ†ç±»æ‰“æ ‡ä¸ç»“æ„åŒ–æŠ½å–ï¼Œè¿è¡Œç¯å¢ƒå®Œå…¨ç¦»çº¿ï¼Œæ¨ç†å¼•æ“å†…åµŒ llama.cppï¼Œå‰ç«¯ç”¨ Tauri + Vue 3ï¼Œæ•°æ®è½ SQLiteï¼Œç”¨æˆ·é€šè¿‡æ¡Œé¢ç•Œé¢å®Œæˆå¯¼å…¥ã€æ‰¹å¤„ç†ã€å¤æ ¸ã€å¯¼å‡ºï¼Œæœ€åèƒ½ç”¨äºè¡Œä¸šæŠ¥è¡¨ä¸çŸ­ä¿¡æ²»ç†ã€‚ä½ éœ€è¦æŠŠå®ƒå½“ä½œçœŸå®äº¤ä»˜é¡¹ç›®æ¥åšï¼Œè¾“å‡ºçš„å†…å®¹å¿…é¡»æ˜¯å¯å¤åˆ¶è¿è¡Œçš„å®Œæ•´å·¥ç¨‹éª¨æ¶ä¸å…³é”®ä»£ç æ–‡ä»¶ï¼ŒåŒ…å«æ‰“åŒ…è¯´æ˜ï¼Œèƒ½å¤Ÿåœ¨æ²¡æœ‰ç½‘ç»œçš„ç¯å¢ƒé‡Œç›´æ¥è·‘é€šã€‚</p>
<p>äº§å“èƒ½åŠ›è¾¹ç•Œè¦æ˜ç¡®ï¼šçŸ­ä¿¡è¿›å…¥ç³»ç»Ÿåï¼Œéœ€è¦ç»™å‡ºä¸¤å±‚æ ‡ç­¾ä¸ä¸€å¥—å®ä½“æŠ½å–å­—æ®µã€‚ä¸€çº§æ ‡ç­¾æ˜¯è¡Œä¸šå¤§ç±»ï¼Œå›ºå®šä¸ºé‡‘èã€é€šç”¨ã€æ”¿åŠ¡ã€æ¸ é“ã€äº’è”ç½‘ã€å…¶ä»–ï¼›äºŒçº§æ ‡ç­¾æ˜¯çŸ­ä¿¡ç±»å‹ï¼Œå›ºå®šä¸ºéªŒè¯ç ã€äº¤æ˜“æé†’ã€è´¦å•å‚¬ç¼´ã€ä¿é™©ç»­ä¿ã€ç‰©æµå–ä»¶ã€ä¼šå‘˜è´¦å·å˜æ›´ã€æ”¿åŠ¡é€šçŸ¥ã€é£é™©æç¤ºã€è¥é”€æ¨å¹¿ã€å…¶ä»–ã€‚å®ä½“æŠ½å–å¿…é¡»è¦†ç›– brandã€verification_codeã€amountã€balanceã€account_suffixã€time_textã€urlã€phone_in_textï¼Œå­—æ®µç¼ºå¤±æ—¶å¡« nullã€‚æ¯æ¡çŸ­ä¿¡çš„æœ€ç»ˆè¾“å‡ºè¦æ±‚æ˜¯ç¨³å®š JSONï¼Œå­—æ®µé½å…¨ï¼Œä¾¿äºè§£æä¸å›æ”¾ï¼Œå¿…é¡»åŒ…å« confidenceã€reasonsã€rules_versionã€model_versionã€schema_versionï¼Œå¹¶ä¸”æ”¯æŒ needs_review æ ‡è®°ç”¨äºäººå·¥å¤æ ¸é˜Ÿåˆ—ã€‚</p>
<p>åˆ†ç±»ç­–ç•¥é‡‡ç”¨è§„åˆ™å¼•æ“ä¸å°æ¨¡å‹ååŒï¼Œå…ˆèµ°è§„åˆ™å…œåº•ï¼ŒæŠŠå¼ºæ¨¡å¼ï¼ˆéªŒè¯ç ã€ç‰©æµå–ä»¶ã€æ˜¾å¼æ”¿åŠ¡æœºæ„ã€æ˜¾å¼é“¶è¡Œè¯åˆ¸ä¿é™©äº¤æ˜“æé†’ï¼‰ä¼˜å…ˆåˆ¤å®šå¹¶é«˜ç½®ä¿¡è¾“å‡ºï¼ŒåŒæ—¶å®Œæˆå®ä½“æŠ½å–ã€‚è§„åˆ™å±‚è¾“å‡ºè¦å¸¦ signalsï¼Œç”¨äº reasons çš„å¯è§£é‡Šæ€§ã€‚è¿›å…¥æ¨¡å‹å±‚æ—¶ï¼ŒæŠŠçŸ­ä¿¡ content ä¸è§„åˆ™æŠ½å–çš„ entitiesã€signals ä¸€å¹¶ä½œä¸ºä¸Šä¸‹æ–‡è¾“å…¥ï¼Œè®©æ¨¡å‹åªåšå‰©ä½™ç°åŒºåˆ¤æ–­ä¸è¡¥å…¨ï¼Œå¹¶ä¸”å¼ºçº¦æŸè¾“å‡ºæšä¸¾å€¼ä¸ä¸¥æ ¼ JSONã€‚èåˆé˜¶æ®µéœ€è¦å¤„ç†å†²çªï¼Œä¾æ®ç½®ä¿¡åº¦ä¸è§„åˆ™å¼ºå‘½ä¸­ç¨‹åº¦åšå†³ç­–ï¼Œå‘ç”Ÿå†²çªæ—¶è‡ªåŠ¨è®¾ç½® needs_review å¹¶é€‚åº¦ä¸‹è°ƒ confidenceï¼Œä¿è¯å¤æ ¸å…¥å£èšç„¦åœ¨å°‘æ•°éš¾ä¾‹ä¸Šã€‚</p>
<p>æœ¬åœ°æ¨ç†å¿…é¡»å®Œå…¨ç¦»çº¿å†…åµŒï¼Œé‡‡ç”¨ llama.cpp ä½œä¸ºæ¨ç†åç«¯ï¼Œæ¨¡å‹æ–‡ä»¶ç”¨ GGUF é‡åŒ–æ ¼å¼ï¼Œåº”ç”¨å¯åŠ¨åå¯ä»¥åœ¨è®¾ç½®é¡µé€‰æ‹©æ¨¡å‹æ–‡ä»¶è·¯å¾„å¹¶åšä¸€æ¬¡å¥åº·æ£€æŸ¥ã€‚ä½ éœ€è¦æä¾›ä¸€å¥—å¯æ›¿æ¢çš„ Provider æŠ½è±¡æ¥å£ï¼Œæ ¸å¿ƒæ˜¯ classify(payload) -&gt; resultï¼Œé»˜è®¤å®ç°ä¸º llama.cpp å†…åµŒæ¨ç†ï¼Œåç»­ä¹Ÿèƒ½æ‰©å±•æˆå…¶ä»–æœ¬åœ°æ¨ç†æ–¹å¼ã€‚æ¨ç†ä¾§å¿…é¡»åšå¹¶å‘ä¸è¶…æ—¶æ§åˆ¶ï¼Œæä¾›é˜Ÿåˆ—åŒ–æ‰¹å¤„ç†èƒ½åŠ›ï¼Œä¿è¯å‡ åƒæ¡æ–‡æœ¬ä¸ä¼šæŠŠ UI å¡æ­»ï¼Œå¹¶ä¸”æ”¯æŒå¤±è´¥é‡è¯•ä¸é”™è¯¯æ—¥å¿—è½ç›˜ã€‚</p>
<p>æ•°æ®å­˜å‚¨é‡‡ç”¨ SQLiteï¼Œè¦æ±‚è‡³å°‘ä¸‰å¼ è¡¨ï¼šmessages å­˜åŸå§‹çŸ­ä¿¡ä¸å…ƒä¿¡æ¯ï¼Œlabels å­˜æ¨¡å‹è¾“å‡ºæ ‡ç­¾ä¸æŠ½å–å­—æ®µï¼Œaudit_logs è®°å½•äººå·¥æ”¹åŠ¨å‰åå·®å¼‚ä¸æ“ä½œè€…ä¿¡æ¯ï¼Œä»»ä½•äººå·¥ä¿®æ”¹éƒ½å¿…é¡»è½å®¡è®¡æ—¥å¿—ã€‚ä½ éœ€è¦å®ç°æŸ¥è¯¢ä¸è¿‡æ»¤èƒ½åŠ›ï¼Œæ”¯æŒæŒ‰è¡Œä¸šã€ç±»å‹ã€needs_reviewã€ç½®ä¿¡åº¦åŒºé—´ã€å«é“¾æ¥ã€å«éªŒè¯ç ã€å«é‡‘é¢ç­‰æ¡ä»¶ç­›é€‰ï¼Œä¿è¯å¤æ ¸æ•ˆç‡ã€‚å¯¼å…¥æ—¶å…è®¸ç”¨æˆ·æ˜ å°„ CSV/Excel çš„åˆ—åˆ° contentã€received_atã€senderã€phoneã€source ç­‰å­—æ®µï¼Œå¯¼å‡ºæ”¯æŒ CSV ä¸ JSONLï¼Œå…è®¸åªå¯¼å‡ºå·²å¤æ ¸æ ·æœ¬æˆ–å¯¼å‡ºå…¨é‡ã€‚</p>
<p>æ¡Œé¢ç«¯é‡‡ç”¨ Tauri + Vue 3 + TypeScript å®ç°ï¼Œç•Œé¢è‡³å°‘åŒ…æ‹¬å¯¼å…¥é¡µã€æ‰¹å¤„ç†é¡µã€åˆ—è¡¨é¡µã€å¤æ ¸ç¼–è¾‘æŠ½å±‰ã€å¯¼å‡ºé¡µä¸è®¾ç½®é¡µã€‚åˆ—è¡¨é¡µéœ€è¦ä¸€çœ¼èƒ½çœ‹åˆ° contentã€industryã€typeã€confidenceã€brand ä¸å…³é”®å®ä½“ï¼Œå¤æ ¸æŠ½å±‰æ”¯æŒç›´æ¥ä¿®æ”¹ industry/type/brand/entities å¹¶ä¿å­˜ï¼Œä¿å­˜åè‡ªåŠ¨å†™å…¥ labels ä¸ audit_logsã€‚æ‰¹å¤„ç†é¡µéœ€è¦è¿›åº¦æ¡ã€è€—æ—¶ã€å½“å‰å¤„ç†æ¡ç›®ã€å¤±è´¥è®¡æ•°ã€é‡è¯•æŒ‰é’®ï¼Œå¹¶æä¾›â€œåªè·‘æœªæ ‡æ³¨/åªè·‘ needs_reviewâ€çš„å¢é‡å¤„ç†é€‰é¡¹ï¼Œä¿è¯å¯è¿­ä»£ã€‚</p>
<p>äº¤ä»˜å½¢å¼è¦æ±‚ä½ è¾“å‡ºä¸€ä¸ªå®Œæ•´é¡¹ç›®ç›®å½•æ ‘ï¼Œç„¶åé€æ–‡ä»¶ç»™å‡ºå¯ç›´æ¥å¤åˆ¶çš„å®Œæ•´ä»£ç ï¼ŒåŒ…å« README.mdã€.env.example æˆ– settings é…ç½®è¯´æ˜ã€SQLite åˆå§‹åŒ–è„šæœ¬ã€llama.cpp ç»‘å®šä¸è°ƒç”¨ä»£ç ã€è§„åˆ™å¼•æ“ä¸å®ä½“æŠ½å–ä»£ç ã€åˆ†ç±» prompt æ¨¡æ¿ã€èåˆå†³ç­–å™¨ä»£ç ã€å‰ç«¯é¡µé¢ä¸ç»„ä»¶ä»£ç ã€æ‰“åŒ…ä¸åˆ†å‘è¯´æ˜ã€‚ä½ æä¾›çš„ä»£ç ä¸èƒ½æ˜¯ä¼ªä»£ç ï¼Œä¸èƒ½çœç•¥å…³é”®æ–‡ä»¶ï¼Œæ‰€æœ‰å¯é…ç½®é¡¹å¿…é¡»å†™æ˜é»˜è®¤å€¼ä¸ä½œç”¨ã€‚ä½ éœ€è¦åŒæ—¶æä¾›è‡³å°‘ 10 æ¡è¦†ç›–å„ç±»åœºæ™¯çš„æ ·ä¾‹çŸ­ä¿¡ï¼Œç»™å‡ºä¸€é”®è‡ªæµ‹æ­¥éª¤ï¼Œè®©ç”¨æˆ·å¯¼å…¥æ ·ä¾‹æ•°æ®å³å¯è·‘é€šåˆ†ç±»ä¸å¯¼å‡ºï¼Œå¹¶è¯´æ˜å¦‚ä½•éªŒè¯è¾“å‡º JSON æ˜¯å¦ç¬¦åˆçº¦æŸã€å®ä½“æŠ½å–æ˜¯å¦æ­£ç¡®ã€å†²çªæ ·æœ¬æ˜¯å¦è¿›å…¥ needs_review é˜Ÿåˆ—ã€‚</p>
<p>ä»è¾“å‡ºé¡ºåºä¸Šï¼Œä½ ç›´æ¥å¼€å§‹äº§å‡ºå·¥ç¨‹åŒ–ç»“æœï¼Œå…ˆç»™é¡¹ç›®ç›®å½•æ ‘ä¸ä¾èµ–è¯´æ˜ï¼Œå†ç»™ schema ä¸æšä¸¾å¸¸é‡æ–‡ä»¶ï¼Œå†ç»™è§„åˆ™æå–å™¨ä¸æµ‹è¯•æ ·ä¾‹ï¼Œå†ç»™ llama.cpp æ¨ç† Provider ä¸åˆ†ç±» promptï¼Œå†ç»™èåˆå†³ç­–å™¨ï¼Œå†ç»™ SQLite åˆå§‹åŒ–è„šæœ¬ä¸ DAO å±‚ï¼Œå†ç»™å‰ç«¯é¡µé¢ä¸æ ¸å¿ƒç»„ä»¶ï¼Œæœ€åç»™ README çš„è¿è¡Œä¸æ‰“åŒ…æ­¥éª¤ã€‚ä½ è¾“å‡ºçš„æ‰€æœ‰å†…å®¹ä»¥å¯è¿è¡Œä¸å¯éªŒæ”¶ä¸ºå‡†ï¼Œä»»ä½•ä¸ç¡®å®šä¹‹å¤„ä½ ç»™å‡ºé»˜è®¤å®ç°ï¼Œå¹¶æŠŠæ‰©å±•ç‚¹å†™æ¸…æ¥šã€‚</p>
</blockquote>
<h2 data-id="heading-2">ä»¥ä¸‹å†…å®¹ä¸ºä¸€æ¬¡æ€§ç”Ÿæˆï¼ˆ7wå­—ï¼‰</h2>
<p>ä¸‹é¢æŒ‰â€œçœŸå®å¯äº¤ä»˜é¡¹ç›®â€çš„æ ‡å‡†ï¼Œç›´æ¥ç»™ä½ ä¸€å¥— <strong>å¯å¤åˆ¶è¿è¡Œçš„å®Œæ•´å·¥ç¨‹éª¨æ¶ + å…³é”®ä»£ç æ–‡ä»¶</strong>ï¼ˆTauri + Vue3 + TS + SQLite + llama.cpp sidecarï¼‰ï¼Œå¹¶æŠŠäº§å“è¾¹ç•Œã€æšä¸¾çº¦æŸã€è§„åˆ™å¼•æ“ã€Provider æŠ½è±¡ã€èåˆå†³ç­–ã€å®¡è®¡ã€æ‰¹å¤„ç†é˜Ÿåˆ—ã€å¯¼å…¥å¯¼å‡ºã€å‰ç«¯é¡µé¢å…¨éƒ¨è½åˆ°å¯è·‘é€šçš„å®ç°ä¸Šã€‚</p>
<blockquote>
<p>è¯´æ˜ï¼šè¿™é‡Œçš„ llama.cpp é›†æˆé‡‡ç”¨ <strong>sidecar æ–¹å¼</strong>ï¼ˆæŠŠ <code>llama-cli</code>/<code>llama</code> å¯æ‰§è¡Œæ–‡ä»¶éšåº”ç”¨æ‰“åŒ…ï¼ŒRust ä¾§é€šè¿‡ <code>Command</code> è°ƒç”¨å¹¶åšå¹¶å‘/è¶…æ—¶/é‡è¯•/æ—¥å¿—ï¼‰ï¼Œè¿™åœ¨æ¡Œé¢ç¦»çº¿äº¤ä»˜é‡Œæœ€ç¨³ï¼Œè·¨å¹³å°ä¹Ÿæœ€å¥½æ§ã€‚åç»­ä½ è¦æ¢æˆ FFI ç›´è¿ä¹Ÿèƒ½æ²¿ Provider æ¥å£æ‰©å±•ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-3">1) é¡¹ç›®ç›®å½•æ ‘ä¸ä¾èµ–è¯´æ˜</h3>
<pre><code class="hljs language-bash" lang="bash">sms-tagging-officer/
  README.md
  package.json
  pnpm-lock.yaml
  pnpm-workspace.yaml
  tsconfig.json
  vite.config.ts
  .env.example

  /apps/desktop/
    index.html
    src/
      main.ts
      App.vue
      router.ts
      api/tauri.ts
      api/types.ts
      api/schema.ts
      stores/settings.ts
      stores/batch.ts
      utils/validators.ts
      utils/sample.ts
      pages/
        ImportPage.vue
        BatchPage.vue
        ListPage.vue
        ExportPage.vue
        SettingsPage.vue
      components/
        ColumnMapper.vue
        MessageTable.vue
        ReviewDrawer.vue
        FilterBar.vue
        ProgressPanel.vue

  /src-tauri/
    Cargo.toml
    tauri.conf.json
    build.rs
    src/
      main.rs
      commands.rs
      domain/
        schema.rs
        enums.rs
        dto.rs
      infra/
        log.rs
        time.rs
      db/
        mod.rs
        migrations.sql
        dao.rs
      rules/
        mod.rs
        extractor.rs
        signals.rs
        rule_engine.rs
      providers/
        mod.rs
        provider.rs
        llama_cpp.rs
        prompt.rs
      fusion/
        mod.rs
        decision.rs
      batch/
        mod.rs
        worker.rs

  /assets/
    sample_messages.csv
    sample_messages.jsonl
    json_schema_output.json

  /vendor/
    llama/
      (æ”¾ç½® llama.cpp å¯æ‰§è¡Œæ–‡ä»¶ä¸è¯´æ˜ï¼Œæ„å»ºé˜¶æ®µç”±ä½ ä¸‹è½½)
      README-LLAMA.md
</code></pre>
<h4 data-id="heading-4">è¿è¡Œæ—¶ä¾èµ–</h4>
<ul>
<li><strong>å®Œå…¨ç¦»çº¿è¿è¡Œ</strong>ï¼šSQLite æœ¬åœ°æ–‡ä»¶ã€GGUF æ¨¡å‹æ–‡ä»¶ã€llama.cpp sidecar äºŒè¿›åˆ¶éƒ½åœ¨æœ¬åœ°ã€‚</li>
<li>å‰ç«¯ï¼šTauri + Vue3 + TSï¼ˆViteï¼‰ã€‚</li>
<li>åç«¯ï¼šRust + rusqlite + tokioï¼ˆé˜Ÿåˆ—ã€å¹¶å‘ã€è¶…æ—¶ï¼‰+ serdeï¼ˆä¸¥æ ¼ JSONï¼‰+ anyhowï¼ˆé”™è¯¯æ ˆï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-5">2) Schema ä¸æšä¸¾å¸¸é‡æ–‡ä»¶</h3>
<h4 data-id="heading-6"><code>apps/desktop/src/api/schema.ts</code></h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">SCHEMA_VERSION</span> = <span class="hljs-string">"1.0.0"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">RULES_VERSION</span> = <span class="hljs-string">"1.0.0"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">INDUSTRY_ENUM</span> = [
  <span class="hljs-string">"é‡‘è"</span>,
  <span class="hljs-string">"é€šç”¨"</span>,
  <span class="hljs-string">"æ”¿åŠ¡"</span>,
  <span class="hljs-string">"æ¸ é“"</span>,
  <span class="hljs-string">"äº’è”ç½‘"</span>,
  <span class="hljs-string">"å…¶ä»–"</span>,
] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TYPE_ENUM</span> = [
  <span class="hljs-string">"éªŒè¯ç "</span>,
  <span class="hljs-string">"äº¤æ˜“æé†’"</span>,
  <span class="hljs-string">"è´¦å•å‚¬ç¼´"</span>,
  <span class="hljs-string">"ä¿é™©ç»­ä¿"</span>,
  <span class="hljs-string">"ç‰©æµå–ä»¶"</span>,
  <span class="hljs-string">"ä¼šå‘˜è´¦å·å˜æ›´"</span>,
  <span class="hljs-string">"æ”¿åŠ¡é€šçŸ¥"</span>,
  <span class="hljs-string">"é£é™©æç¤º"</span>,
  <span class="hljs-string">"è¥é”€æ¨å¹¿"</span>,
  <span class="hljs-string">"å…¶ä»–"</span>,
] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">Industry</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-variable constant_">INDUSTRY_ENUM</span>[<span class="hljs-built_in">number</span>];
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">SmsType</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-variable constant_">TYPE_ENUM</span>[<span class="hljs-built_in">number</span>];

<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">ExtractedEntities</span> = {
  <span class="hljs-attr">brand</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>;
  <span class="hljs-attr">verification_code</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>;
  <span class="hljs-attr">amount</span>: <span class="hljs-built_in">number</span> | <span class="hljs-literal">null</span>;
  <span class="hljs-attr">balance</span>: <span class="hljs-built_in">number</span> | <span class="hljs-literal">null</span>;
  <span class="hljs-attr">account_suffix</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>;
  <span class="hljs-attr">time_text</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>;
  <span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>;
  <span class="hljs-attr">phone_in_text</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">LabelResult</span> = {
  <span class="hljs-attr">message_id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">industry</span>: <span class="hljs-title class_">Industry</span>;
  <span class="hljs-attr">type</span>: <span class="hljs-title class_">SmsType</span>;
  <span class="hljs-attr">entities</span>: <span class="hljs-title class_">ExtractedEntities</span>;
  <span class="hljs-attr">confidence</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// 0..1</span>
  <span class="hljs-attr">reasons</span>: <span class="hljs-built_in">string</span>[];  <span class="hljs-comment">// å¯è§£é‡Šæ€§</span>
  <span class="hljs-attr">signals</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">unknown</span>&gt;; <span class="hljs-comment">// è§„åˆ™ä¿¡å·</span>
  <span class="hljs-attr">needs_review</span>: <span class="hljs-built_in">boolean</span>;

  <span class="hljs-attr">rules_version</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">model_version</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">schema_version</span>: <span class="hljs-built_in">string</span>;
};
</code></pre>
<h4 data-id="heading-7"><code>src-tauri/src/domain/enums.rs</code></h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> serde::{Deserialize, Serialize};

<span class="hljs-meta">#[derive(Debug, Clone, Serialize, Deserialize)]</span>
<span class="hljs-meta">#[serde(rename_all = <span class="hljs-string">"SCREAMING_SNAKE_CASE"</span>)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Industry</span> {
    <span class="hljs-meta">#[serde(rename = <span class="hljs-string">"é‡‘è"</span>)]</span>
    Finance,
    <span class="hljs-meta">#[serde(rename = <span class="hljs-string">"é€šç”¨"</span>)]</span>
    General,
    <span class="hljs-meta">#[serde(rename = <span class="hljs-string">"æ”¿åŠ¡"</span>)]</span>
    Gov,
    <span class="hljs-meta">#[serde(rename = <span class="hljs-string">"æ¸ é“"</span>)]</span>
    Channel,
    <span class="hljs-meta">#[serde(rename = <span class="hljs-string">"äº’è”ç½‘"</span>)]</span>
    Internet,
    <span class="hljs-meta">#[serde(rename = <span class="hljs-string">"å…¶ä»–"</span>)]</span>
    Other,
}

<span class="hljs-meta">#[derive(Debug, Clone, Serialize, Deserialize)]</span>
<span class="hljs-meta">#[serde(rename_all = <span class="hljs-string">"SCREAMING_SNAKE_CASE"</span>)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">SmsType</span> {
    <span class="hljs-meta">#[serde(rename = <span class="hljs-string">"éªŒè¯ç "</span>)]</span>
    Otp,
    <span class="hljs-meta">#[serde(rename = <span class="hljs-string">"äº¤æ˜“æé†’"</span>)]</span>
    Transaction,
    <span class="hljs-meta">#[serde(rename = <span class="hljs-string">"è´¦å•å‚¬ç¼´"</span>)]</span>
    BillCollect,
    <span class="hljs-meta">#[serde(rename = <span class="hljs-string">"ä¿é™©ç»­ä¿"</span>)]</span>
    InsuranceRenew,
    <span class="hljs-meta">#[serde(rename = <span class="hljs-string">"ç‰©æµå–ä»¶"</span>)]</span>
    LogisticsPickup,
    <span class="hljs-meta">#[serde(rename = <span class="hljs-string">"ä¼šå‘˜è´¦å·å˜æ›´"</span>)]</span>
    AccountChange,
    <span class="hljs-meta">#[serde(rename = <span class="hljs-string">"æ”¿åŠ¡é€šçŸ¥"</span>)]</span>
    GovNotice,
    <span class="hljs-meta">#[serde(rename = <span class="hljs-string">"é£é™©æç¤º"</span>)]</span>
    RiskAlert,
    <span class="hljs-meta">#[serde(rename = <span class="hljs-string">"è¥é”€æ¨å¹¿"</span>)]</span>
    Marketing,
    <span class="hljs-meta">#[serde(rename = <span class="hljs-string">"å…¶ä»–"</span>)]</span>
    Other,
}
</code></pre>
<h4 data-id="heading-8"><code>src-tauri/src/domain/schema.rs</code></h4>
<pre><code class="hljs language-ini" lang="ini">pub const SCHEMA_VERSION: &amp;<span class="hljs-attr">str</span> = <span class="hljs-string">"1.0.0"</span><span class="hljs-comment">;</span>
pub const RULES_VERSION: &amp;<span class="hljs-attr">str</span> = <span class="hljs-string">"1.0.0"</span><span class="hljs-comment">;</span>
</code></pre>
<h4 data-id="heading-9"><code>src-tauri/src/domain/dto.rs</code></h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> serde::{Deserialize, Serialize};
<span class="hljs-keyword">use</span> std::collections::HashMap;
<span class="hljs-keyword">use</span> super::enums::{Industry, SmsType};

<span class="hljs-meta">#[derive(Debug, Clone, Serialize, Deserialize)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ExtractedEntities</span> {
    <span class="hljs-keyword">pub</span> brand: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;,
    <span class="hljs-keyword">pub</span> verification_code: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;,
    <span class="hljs-keyword">pub</span> amount: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">f64</span>&gt;,
    <span class="hljs-keyword">pub</span> balance: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">f64</span>&gt;,
    <span class="hljs-keyword">pub</span> account_suffix: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;,
    <span class="hljs-keyword">pub</span> time_text: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;,
    <span class="hljs-keyword">pub</span> url: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;,
    <span class="hljs-keyword">pub</span> phone_in_text: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Default</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">ExtractedEntities</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">default</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">Self</span> {
            brand: <span class="hljs-literal">None</span>,
            verification_code: <span class="hljs-literal">None</span>,
            amount: <span class="hljs-literal">None</span>,
            balance: <span class="hljs-literal">None</span>,
            account_suffix: <span class="hljs-literal">None</span>,
            time_text: <span class="hljs-literal">None</span>,
            url: <span class="hljs-literal">None</span>,
            phone_in_text: <span class="hljs-literal">None</span>,
        }
    }
}

<span class="hljs-meta">#[derive(Debug, Clone, Serialize, Deserialize)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">RuleOutput</span> {
    <span class="hljs-keyword">pub</span> hit: <span class="hljs-type">bool</span>,
    <span class="hljs-keyword">pub</span> industry: <span class="hljs-type">Option</span>&lt;Industry&gt;,
    <span class="hljs-keyword">pub</span> sms_type: <span class="hljs-type">Option</span>&lt;SmsType&gt;,
    <span class="hljs-keyword">pub</span> entities: ExtractedEntities,
    <span class="hljs-keyword">pub</span> confidence: <span class="hljs-type">f64</span>,
    <span class="hljs-keyword">pub</span> reasons: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt;,
    <span class="hljs-keyword">pub</span> signals: HashMap&lt;<span class="hljs-type">String</span>, serde_json::Value&gt;,
}

<span class="hljs-meta">#[derive(Debug, Clone, Serialize, Deserialize)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ModelOutput</span> {
    <span class="hljs-keyword">pub</span> industry: Industry,
    <span class="hljs-keyword">pub</span> sms_type: SmsType,
    <span class="hljs-keyword">pub</span> entities: ExtractedEntities,
    <span class="hljs-keyword">pub</span> confidence: <span class="hljs-type">f64</span>,
    <span class="hljs-keyword">pub</span> reasons: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt;,
    <span class="hljs-keyword">pub</span> model_version: <span class="hljs-type">String</span>,
}

<span class="hljs-meta">#[derive(Debug, Clone, Serialize, Deserialize)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">FinalLabel</span> {
    <span class="hljs-keyword">pub</span> message_id: <span class="hljs-type">String</span>,
    <span class="hljs-keyword">pub</span> industry: Industry,
    <span class="hljs-keyword">pub</span> sms_type: SmsType,
    <span class="hljs-keyword">pub</span> entities: ExtractedEntities,
    <span class="hljs-keyword">pub</span> confidence: <span class="hljs-type">f64</span>,
    <span class="hljs-keyword">pub</span> reasons: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt;,
    <span class="hljs-keyword">pub</span> signals: HashMap&lt;<span class="hljs-type">String</span>, serde_json::Value&gt;,
    <span class="hljs-keyword">pub</span> needs_review: <span class="hljs-type">bool</span>,
    <span class="hljs-keyword">pub</span> rules_version: <span class="hljs-type">String</span>,
    <span class="hljs-keyword">pub</span> model_version: <span class="hljs-type">String</span>,
    <span class="hljs-keyword">pub</span> schema_version: <span class="hljs-type">String</span>,
}
</code></pre>
<hr/>
<h3 data-id="heading-10">3) è§„åˆ™æå–å™¨ä¸æµ‹è¯•æ ·ä¾‹ï¼ˆå« signalsã€å®ä½“æŠ½å–ï¼‰</h3>
<h4 data-id="heading-11"><code>src-tauri/src/rules/signals.rs</code></h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> serde_json::json;
<span class="hljs-keyword">use</span> std::collections::HashMap;

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">signal_bool</span>(map: &amp;<span class="hljs-keyword">mut</span> HashMap&lt;<span class="hljs-type">String</span>, serde_json::Value&gt;, k: &amp;<span class="hljs-type">str</span>, v: <span class="hljs-type">bool</span>) {
    map.<span class="hljs-title function_ invoke__">insert</span>(k.<span class="hljs-title function_ invoke__">to_string</span>(), json!(v));
}

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">signal_str</span>(map: &amp;<span class="hljs-keyword">mut</span> HashMap&lt;<span class="hljs-type">String</span>, serde_json::Value&gt;, k: &amp;<span class="hljs-type">str</span>, v: &amp;<span class="hljs-type">str</span>) {
    map.<span class="hljs-title function_ invoke__">insert</span>(k.<span class="hljs-title function_ invoke__">to_string</span>(), json!(v));
}

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">signal_num</span>(map: &amp;<span class="hljs-keyword">mut</span> HashMap&lt;<span class="hljs-type">String</span>, serde_json::Value&gt;, k: &amp;<span class="hljs-type">str</span>, v: <span class="hljs-type">f64</span>) {
    map.<span class="hljs-title function_ invoke__">insert</span>(k.<span class="hljs-title function_ invoke__">to_string</span>(), json!(v));
}
</code></pre>
<h4 data-id="heading-12"><code>src-tauri/src/rules/extractor.rs</code></h4>
<pre><code class="hljs language-scss" lang="scss">use regex::Regex;
use crate::domain::dto::ExtractedEntities;

pub fn <span class="hljs-built_in">extract_entities</span>(content: &amp;str) -&gt; ExtractedEntities {
    let mut e = ExtractedEntities::<span class="hljs-built_in">default</span>();

    <span class="hljs-comment">// URL</span>
    let re_url = Regex::<span class="hljs-built_in">new</span>(r<span class="hljs-string">"(https?://[^\s]+)"</span>).<span class="hljs-built_in">unwrap</span>();
    if let <span class="hljs-built_in">Some</span>(cap) = re_url<span class="hljs-selector-class">.captures</span>(content) {
        e<span class="hljs-selector-class">.url</span> = <span class="hljs-built_in">Some</span>(cap.get(<span class="hljs-number">1</span>)<span class="hljs-selector-class">.unwrap</span>()<span class="hljs-selector-class">.as_str</span>()<span class="hljs-selector-class">.to_string</span>());
    }

    <span class="hljs-comment">// æ‰‹æœºå·ï¼ˆæ–‡æœ¬ä¸­ï¼‰</span>
    let re_phone = Regex::<span class="hljs-built_in">new</span>(r<span class="hljs-string">"(?:+?86[-\s]?)?(1[3-9]\d{9})"</span>).<span class="hljs-built_in">unwrap</span>();
    if let <span class="hljs-built_in">Some</span>(cap) = re_phone<span class="hljs-selector-class">.captures</span>(content) {
        e<span class="hljs-selector-class">.phone_in_text</span> = <span class="hljs-built_in">Some</span>(cap.get(<span class="hljs-number">1</span>)<span class="hljs-selector-class">.unwrap</span>()<span class="hljs-selector-class">.as_str</span>()<span class="hljs-selector-class">.to_string</span>());
    }

    <span class="hljs-comment">// éªŒè¯ç ï¼š4-8 ä½æ•°å­—ï¼Œå¸¸è§å…³é”®è¯é™„è¿‘</span>
    let re_otp = Regex::<span class="hljs-built_in">new</span>(r<span class="hljs-string">"(?:éªŒè¯ç |æ ¡éªŒç |åŠ¨æ€ç |OTP|éªŒè¯ä»£ç )[^\d]{0,6}(\d{4,8})"</span>).<span class="hljs-built_in">unwrap</span>();
    if let <span class="hljs-built_in">Some</span>(cap) = re_otp<span class="hljs-selector-class">.captures</span>(content) {
        e<span class="hljs-selector-class">.verification_code</span> = <span class="hljs-built_in">Some</span>(cap.get(<span class="hljs-number">1</span>)<span class="hljs-selector-class">.unwrap</span>()<span class="hljs-selector-class">.as_str</span>()<span class="hljs-selector-class">.to_string</span>());
    } else {
        <span class="hljs-comment">// å…œåº•ï¼šå­¤ç«‹ 6 ä½ç ï¼ˆè°¨æ…ï¼‰</span>
        let re_6 = Regex::<span class="hljs-built_in">new</span>(r<span class="hljs-string">"(?&lt;!\d)(\d{6})(?!\d)"</span>).<span class="hljs-built_in">unwrap</span>();
        if let <span class="hljs-built_in">Some</span>(cap) = re_6<span class="hljs-selector-class">.captures</span>(content) {
            e<span class="hljs-selector-class">.verification_code</span> = <span class="hljs-built_in">Some</span>(cap.get(<span class="hljs-number">1</span>)<span class="hljs-selector-class">.unwrap</span>()<span class="hljs-selector-class">.as_str</span>()<span class="hljs-selector-class">.to_string</span>());
        }
    }

    <span class="hljs-comment">// é‡‘é¢ï¼šï¿¥/Â¥/å…ƒ/äººæ°‘å¸ + æ•°å­—ï¼ˆå…è®¸å°æ•°ï¼‰</span>
    let re_amount = Regex::<span class="hljs-built_in">new</span>(r<span class="hljs-string">"(?:ï¿¥|Â¥|äººæ°‘å¸)?\s*([0-9]+(?:.[0-9]{1,2})?)\s*(?:å…ƒ|RMB)?"</span>).<span class="hljs-built_in">unwrap</span>();
    <span class="hljs-comment">// è¿™é‡Œä¼šå‘½ä¸­å¾ˆå¤šæ•°å­—ï¼ŒæŒ‰å…³é”®è¯ä¼˜å…ˆæå–</span>
    let re_amount_kw = Regex::<span class="hljs-built_in">new</span>(r<span class="hljs-string">"(?:é‡‘é¢|æ”¯ä»˜|æ‰£æ¬¾|å…¥è´¦|è½¬è´¦|æ¶ˆè´¹|è¿˜æ¬¾|åº”è¿˜|åº”ç¼´|æ¬ è´¹)[^\d]{0,10}([0-9]+(?:.[0-9]{1,2})?)"</span>).<span class="hljs-built_in">unwrap</span>();
    if let <span class="hljs-built_in">Some</span>(cap) = re_amount_kw<span class="hljs-selector-class">.captures</span>(content) {
        e<span class="hljs-selector-class">.amount</span> = cap<span class="hljs-selector-class">.get</span>(<span class="hljs-number">1</span>)<span class="hljs-selector-class">.unwrap</span>()<span class="hljs-selector-class">.as_str</span>()<span class="hljs-selector-class">.parse</span>::&lt;f64&gt;().<span class="hljs-built_in">ok</span>();
    } else if let <span class="hljs-built_in">Some</span>(cap) = re_amount<span class="hljs-selector-class">.captures</span>(content) {
        e<span class="hljs-selector-class">.amount</span> = cap<span class="hljs-selector-class">.get</span>(<span class="hljs-number">1</span>)<span class="hljs-selector-class">.unwrap</span>()<span class="hljs-selector-class">.as_str</span>()<span class="hljs-selector-class">.parse</span>::&lt;f64&gt;().<span class="hljs-built_in">ok</span>();
    }

    <span class="hljs-comment">// ä½™é¢</span>
    let re_balance = Regex::<span class="hljs-built_in">new</span>(r<span class="hljs-string">"(?:ä½™é¢|å¯ç”¨ä½™é¢)[^\d]{0,10}([0-9]+(?:.[0-9]{1,2})?)"</span>).<span class="hljs-built_in">unwrap</span>();
    if let <span class="hljs-built_in">Some</span>(cap) = re_balance<span class="hljs-selector-class">.captures</span>(content) {
        e<span class="hljs-selector-class">.balance</span> = cap<span class="hljs-selector-class">.get</span>(<span class="hljs-number">1</span>)<span class="hljs-selector-class">.unwrap</span>()<span class="hljs-selector-class">.as_str</span>()<span class="hljs-selector-class">.parse</span>::&lt;f64&gt;().<span class="hljs-built_in">ok</span>();
    }

    <span class="hljs-comment">// å°¾å·</span>
    let re_suffix = Regex::<span class="hljs-built_in">new</span>(r<span class="hljs-string">"(?:å°¾å·|æœ«å››ä½|åå››ä½)[^\d]{0,6}(\d{3,4})"</span>).<span class="hljs-built_in">unwrap</span>();
    if let <span class="hljs-built_in">Some</span>(cap) = re_suffix<span class="hljs-selector-class">.captures</span>(content) {
        e<span class="hljs-selector-class">.account_suffix</span> = <span class="hljs-built_in">Some</span>(cap.get(<span class="hljs-number">1</span>)<span class="hljs-selector-class">.unwrap</span>()<span class="hljs-selector-class">.as_str</span>()<span class="hljs-selector-class">.to_string</span>());
    }

    <span class="hljs-comment">// time_textï¼šç²—æï¼ˆåŸæ ·ä¿ç•™ä¾¿äºå®¡è®¡/å¤æ ¸ï¼‰</span>
    let re_time = Regex::<span class="hljs-built_in">new</span>(r<span class="hljs-string">"(\d{4}[-/å¹´]\d{1,2}[-/æœˆ]\d{1,2}æ—¥?\s*\d{1,2}:\d{2})"</span>).<span class="hljs-built_in">unwrap</span>();
    if let <span class="hljs-built_in">Some</span>(cap) = re_time<span class="hljs-selector-class">.captures</span>(content) {
        e<span class="hljs-selector-class">.time_text</span> = <span class="hljs-built_in">Some</span>(cap.get(<span class="hljs-number">1</span>)<span class="hljs-selector-class">.unwrap</span>()<span class="hljs-selector-class">.as_str</span>()<span class="hljs-selector-class">.to_string</span>());
    } else {
        let re_time2 = Regex::<span class="hljs-built_in">new</span>(r<span class="hljs-string">"(\d{1,2}:\d{2})"</span>).<span class="hljs-built_in">unwrap</span>();
        if let <span class="hljs-built_in">Some</span>(cap) = re_time2<span class="hljs-selector-class">.captures</span>(content) {
            e<span class="hljs-selector-class">.time_text</span> = <span class="hljs-built_in">Some</span>(cap.get(<span class="hljs-number">1</span>)<span class="hljs-selector-class">.unwrap</span>()<span class="hljs-selector-class">.as_str</span>()<span class="hljs-selector-class">.to_string</span>());
        }
    }

    <span class="hljs-comment">// brandï¼šæŒ‰å¸¸è§æœºæ„/å¹³å°å…³é”®è¯æå–ï¼ˆå¯æ‰©å±•ä¸ºè¯å…¸ï¼‰</span>
    let brands = <span class="hljs-selector-attr">[        (<span class="hljs-string">"ä¸­å›½é“¶è¡Œ"</span>, <span class="hljs-string">"ä¸­å›½é“¶è¡Œ"</span>),        (<span class="hljs-string">"å·¥å•†é“¶è¡Œ"</span>, <span class="hljs-string">"å·¥å•†é“¶è¡Œ"</span>),        (<span class="hljs-string">"å»ºè®¾é“¶è¡Œ"</span>, <span class="hljs-string">"å»ºè®¾é“¶è¡Œ"</span>),        (<span class="hljs-string">"å†œä¸šé“¶è¡Œ"</span>, <span class="hljs-string">"å†œä¸šé“¶è¡Œ"</span>),        (<span class="hljs-string">"æ‹›å•†é“¶è¡Œ"</span>, <span class="hljs-string">"æ‹›å•†é“¶è¡Œ"</span>),        (<span class="hljs-string">"å¹³å®‰"</span>, <span class="hljs-string">"å¹³å®‰"</span>),        (<span class="hljs-string">"æ”¯ä»˜å®"</span>, <span class="hljs-string">"æ”¯ä»˜å®"</span>),        (<span class="hljs-string">"å¾®ä¿¡"</span>, <span class="hljs-string">"å¾®ä¿¡"</span>),        (<span class="hljs-string">"äº¬ä¸œ"</span>, <span class="hljs-string">"äº¬ä¸œ"</span>),        (<span class="hljs-string">"ç¾å›¢"</span>, <span class="hljs-string">"ç¾å›¢"</span>),        (<span class="hljs-string">"é¡ºä¸°"</span>, <span class="hljs-string">"é¡ºä¸°"</span>),        (<span class="hljs-string">"ä¸­é€š"</span>, <span class="hljs-string">"ä¸­é€š"</span>),        (<span class="hljs-string">"åœ†é€š"</span>, <span class="hljs-string">"åœ†é€š"</span>),        (<span class="hljs-string">"é‚®æ”¿"</span>, <span class="hljs-string">"é‚®æ”¿"</span>),        (<span class="hljs-string">"12345"</span>, <span class="hljs-string">"12345"</span>),    ]</span>;
    for (kw, name) in brands {
        if <span class="hljs-attribute">content</span><span class="hljs-selector-class">.contains</span>(kw) {
            e<span class="hljs-selector-class">.brand</span> = <span class="hljs-built_in">Some</span>(name.to_string());
            break;
        }
    }

    e
}
</code></pre>
<h4 data-id="heading-13"><code>src-tauri/src/rules/rule_engine.rs</code></h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::collections::HashMap;
<span class="hljs-keyword">use</span> regex::Regex;

<span class="hljs-keyword">use</span> crate::domain::dto::{RuleOutput, ExtractedEntities};
<span class="hljs-keyword">use</span> crate::domain::enums::{Industry, SmsType};
<span class="hljs-keyword">use</span> crate::rules::extractor::extract_entities;
<span class="hljs-keyword">use</span> crate::rules::signals::*;

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">apply_rules</span>(content: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> RuleOutput {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">signals</span>: HashMap&lt;<span class="hljs-type">String</span>, serde_json::Value&gt; = HashMap::<span class="hljs-title function_ invoke__">new</span>();
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">reasons</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt; = <span class="hljs-built_in">vec!</span>[];
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">entities</span>: ExtractedEntities = <span class="hljs-title function_ invoke__">extract_entities</span>(content);

    <span class="hljs-comment">// å¼ºæ¨¡å¼ï¼šéªŒè¯ç </span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">has_otp_kw</span> = content.<span class="hljs-title function_ invoke__">contains</span>(<span class="hljs-string">"éªŒè¯ç "</span>) || content.<span class="hljs-title function_ invoke__">contains</span>(<span class="hljs-string">"æ ¡éªŒç "</span>) || content.<span class="hljs-title function_ invoke__">contains</span>(<span class="hljs-string">"åŠ¨æ€ç "</span>) || content.<span class="hljs-title function_ invoke__">to_uppercase</span>().<span class="hljs-title function_ invoke__">contains</span>(<span class="hljs-string">"OTP"</span>);
    <span class="hljs-keyword">if</span> has_otp_kw &amp;&amp; entities.verification_code.<span class="hljs-title function_ invoke__">is_some</span>() {
        <span class="hljs-title function_ invoke__">signal_bool</span>(&amp;<span class="hljs-keyword">mut</span> signals, <span class="hljs-string">"rule_otp"</span>, <span class="hljs-literal">true</span>);
        reasons.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-string">"å‘½ä¸­å¼ºè§„åˆ™ï¼šéªŒè¯ç å…³é”®è¯ + 4-8ä½éªŒè¯ç "</span>.<span class="hljs-title function_ invoke__">to_string</span>());
        <span class="hljs-keyword">return</span> RuleOutput {
            hit: <span class="hljs-literal">true</span>,
            industry: <span class="hljs-title function_ invoke__">Some</span>(Industry::General),
            sms_type: <span class="hljs-title function_ invoke__">Some</span>(SmsType::Otp),
            entities,
            confidence: <span class="hljs-number">0.98</span>,
            reasons,
            signals,
        };
    }

    <span class="hljs-comment">// å¼ºæ¨¡å¼ï¼šç‰©æµå–ä»¶ï¼ˆå«å–ä»¶ç /é©¿ç«™/å¿«é€’åˆ°äº†ï¼‰</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">re_pick</span> = Regex::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">r"(å–ä»¶|å–è´§|é©¿ç«™|å¿«é€’å·²åˆ°|æè´§ç |å–ä»¶ç )"</span>).<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-keyword">if</span> re_pick.<span class="hljs-title function_ invoke__">is_match</span>(content) {
        <span class="hljs-title function_ invoke__">signal_bool</span>(&amp;<span class="hljs-keyword">mut</span> signals, <span class="hljs-string">"rule_logistics_pickup"</span>, <span class="hljs-literal">true</span>);
        reasons.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-string">"å‘½ä¸­å¼ºè§„åˆ™ï¼šç‰©æµå–ä»¶å…³é”®è¯"</span>.<span class="hljs-title function_ invoke__">to_string</span>());
        <span class="hljs-keyword">return</span> RuleOutput {
            hit: <span class="hljs-literal">true</span>,
            industry: <span class="hljs-title function_ invoke__">Some</span>(Industry::Channel),
            sms_type: <span class="hljs-title function_ invoke__">Some</span>(SmsType::LogisticsPickup),
            entities,
            confidence: <span class="hljs-number">0.95</span>,
            reasons,
            signals,
        };
    }

    <span class="hljs-comment">// å¼ºæ¨¡å¼ï¼šæ˜¾å¼æ”¿åŠ¡æœºæ„ï¼ˆ12345/å…¬å®‰/ç¨åŠ¡/ç¤¾ä¿/æ”¿åŠ¡æœåŠ¡ï¼‰</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">re_gov</span> = Regex::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">r"(12345|å…¬å®‰|ç¨åŠ¡|ç¤¾ä¿|æ”¿åŠ¡|æ”¿åºœ|äººæ°‘æ³•é™¢|æ£€å¯Ÿé™¢|äº¤è­¦)"</span>).<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-keyword">if</span> re_gov.<span class="hljs-title function_ invoke__">is_match</span>(content) {
        <span class="hljs-title function_ invoke__">signal_bool</span>(&amp;<span class="hljs-keyword">mut</span> signals, <span class="hljs-string">"rule_gov"</span>, <span class="hljs-literal">true</span>);
        reasons.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-string">"å‘½ä¸­å¼ºè§„åˆ™ï¼šæ”¿åŠ¡æœºæ„å…³é”®è¯"</span>.<span class="hljs-title function_ invoke__">to_string</span>());
        <span class="hljs-keyword">return</span> RuleOutput {
            hit: <span class="hljs-literal">true</span>,
            industry: <span class="hljs-title function_ invoke__">Some</span>(Industry::Gov),
            sms_type: <span class="hljs-title function_ invoke__">Some</span>(SmsType::GovNotice),
            entities,
            confidence: <span class="hljs-number">0.94</span>,
            reasons,
            signals,
        };
    }

    <span class="hljs-comment">// å¼ºæ¨¡å¼ï¼šé“¶è¡Œ/è¯åˆ¸/ä¿é™© äº¤æ˜“æé†’ï¼ˆæ‰£æ¬¾/å…¥è´¦/è½¬è´¦/æ¶ˆè´¹/ä½™é¢ï¼‰</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">re_fin_org</span> = Regex::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">r"(é“¶è¡Œ|è¯åˆ¸|ä¿¡ç”¨å¡|å€Ÿè®°å¡|ä¿é™©|ä¿å•)"</span>).<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">re_tx</span> = Regex::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">r"(æ‰£æ¬¾|å…¥è´¦|è½¬è´¦|æ¶ˆè´¹|äº¤æ˜“|æ”¯ä»˜|è¿˜æ¬¾|ä½™é¢|å¯ç”¨ä½™é¢)"</span>).<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-keyword">if</span> re_fin_org.<span class="hljs-title function_ invoke__">is_match</span>(content) &amp;&amp; re_tx.<span class="hljs-title function_ invoke__">is_match</span>(content) {
        <span class="hljs-title function_ invoke__">signal_bool</span>(&amp;<span class="hljs-keyword">mut</span> signals, <span class="hljs-string">"rule_fin_transaction"</span>, <span class="hljs-literal">true</span>);
        reasons.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-string">"å‘½ä¸­å¼ºè§„åˆ™ï¼šé‡‘èæœºæ„å…³é”®è¯ + äº¤æ˜“/ä½™é¢å…³é”®è¯"</span>.<span class="hljs-title function_ invoke__">to_string</span>());
        <span class="hljs-keyword">return</span> RuleOutput {
            hit: <span class="hljs-literal">true</span>,
            industry: <span class="hljs-title function_ invoke__">Some</span>(Industry::Finance),
            sms_type: <span class="hljs-title function_ invoke__">Some</span>(SmsType::Transaction),
            entities,
            confidence: <span class="hljs-number">0.93</span>,
            reasons,
            signals,
        };
    }

    <span class="hljs-comment">// å¼ºæ¨¡å¼ï¼šè´¦å•å‚¬ç¼´ï¼ˆæ¬ è´¹/é€¾æœŸ/åº”è¿˜/å‚¬ç¼´ï¼‰</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">re_bill</span> = Regex::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">r"(æ¬ è´¹|é€¾æœŸ|åº”è¿˜|å‚¬ç¼´|ç¼´è´¹|è´¦å•|æœ€ä½è¿˜æ¬¾)"</span>).<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-keyword">if</span> re_bill.<span class="hljs-title function_ invoke__">is_match</span>(content) {
        <span class="hljs-title function_ invoke__">signal_bool</span>(&amp;<span class="hljs-keyword">mut</span> signals, <span class="hljs-string">"rule_bill_collect"</span>, <span class="hljs-literal">true</span>);
        reasons.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-string">"å‘½ä¸­å¼ºè§„åˆ™ï¼šè´¦å•å‚¬ç¼´å…³é”®è¯"</span>.<span class="hljs-title function_ invoke__">to_string</span>());
        <span class="hljs-keyword">return</span> RuleOutput {
            hit: <span class="hljs-literal">true</span>,
            industry: <span class="hljs-title function_ invoke__">Some</span>(Industry::Finance),
            sms_type: <span class="hljs-title function_ invoke__">Some</span>(SmsType::BillCollect),
            entities,
            confidence: <span class="hljs-number">0.90</span>,
            reasons,
            signals,
        };
    }

    <span class="hljs-comment">// æœªå‘½ä¸­å¼ºè§„åˆ™ï¼šè¿”å› signals + entitiesï¼Œäº¤ç»™æ¨¡å‹è¡¥å…¨</span>
    <span class="hljs-title function_ invoke__">signal_bool</span>(&amp;<span class="hljs-keyword">mut</span> signals, <span class="hljs-string">"rule_hit"</span>, <span class="hljs-literal">false</span>);
    <span class="hljs-keyword">if</span> entities.url.<span class="hljs-title function_ invoke__">is_some</span>() {
        <span class="hljs-title function_ invoke__">signal_bool</span>(&amp;<span class="hljs-keyword">mut</span> signals, <span class="hljs-string">"has_url"</span>, <span class="hljs-literal">true</span>);
        reasons.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-string">"å¼±ä¿¡å·ï¼šåŒ…å«URL"</span>.<span class="hljs-title function_ invoke__">to_string</span>());
    }
    <span class="hljs-keyword">if</span> entities.amount.<span class="hljs-title function_ invoke__">is_some</span>() {
        <span class="hljs-title function_ invoke__">signal_bool</span>(&amp;<span class="hljs-keyword">mut</span> signals, <span class="hljs-string">"has_amount"</span>, <span class="hljs-literal">true</span>);
        reasons.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-string">"å¼±ä¿¡å·ï¼šåŒ…å«é‡‘é¢"</span>.<span class="hljs-title function_ invoke__">to_string</span>());
    }

    RuleOutput {
        hit: <span class="hljs-literal">false</span>,
        industry: <span class="hljs-literal">None</span>,
        sms_type: <span class="hljs-literal">None</span>,
        entities,
        confidence: <span class="hljs-number">0.0</span>,
        reasons,
        signals,
    }
}
</code></pre>
<h4 data-id="heading-14">è§„åˆ™æµ‹è¯•æ ·ä¾‹ï¼ˆâ‰¥10 æ¡ï¼Œè¦†ç›–åœºæ™¯ï¼‰</h4>
<h5 data-id="heading-15"><code>assets/sample_messages.csv</code></h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">id</span>,received_at,sender,phone,source,content
m1,<span class="hljs-number">2026</span>-02-<span class="hljs-number">10</span> <span class="hljs-number">10</span>:01:<span class="hljs-number">00</span>,ä¸­å›½é“¶è¡Œ,<span class="hljs-number">95566</span>,<span class="hljs-keyword">import</span>,<span class="hljs-string">"ã€ä¸­å›½é“¶è¡Œã€‘æ‚¨å°¾å·1234å¡äº2026-02-10 09:58æ¶ˆè´¹58.20å…ƒï¼Œä½™é¢1020.55å…ƒã€‚"</span>
m2,<span class="hljs-number">2026</span>-02-<span class="hljs-number">10</span> <span class="hljs-number">10</span>:02:<span class="hljs-number">00</span>,æ”¯ä»˜å®,<span class="hljs-number">95188</span>,<span class="hljs-keyword">import</span>,<span class="hljs-string">"ã€æ”¯ä»˜å®ã€‘éªŒè¯ç  493821ï¼Œç”¨äºç™»å½•éªŒè¯ï¼Œ5åˆ†é’Ÿå†…æœ‰æ•ˆã€‚"</span>
m3,<span class="hljs-number">2026</span>-02-<span class="hljs-number">10</span> <span class="hljs-number">10</span>:03:<span class="hljs-number">00</span>,é¡ºä¸°é€Ÿè¿,<span class="hljs-number">95338</span>,<span class="hljs-keyword">import</span>,<span class="hljs-string">"ã€é¡ºä¸°ã€‘å¿«ä»¶å·²åˆ°è¾¾XXé©¿ç«™ï¼Œå–ä»¶ç  662913ï¼Œè¯·äº18:00å‰å–èµ°ã€‚"</span>
m4,<span class="hljs-number">2026</span>-02-<span class="hljs-number">10</span> <span class="hljs-number">10</span>:04:<span class="hljs-number">00</span>,<span class="hljs-number">12345</span>,<span class="hljs-number">12345</span>,<span class="hljs-keyword">import</span>,<span class="hljs-string">"ã€12345æ”¿åŠ¡ã€‘æ‚¨åæ˜ çš„é—®é¢˜å·²å—ç†ï¼ŒæŸ¥è¯¢è¿›åº¦è¯·è®¿é—® https://gov.example.cn/track"</span>
m5,<span class="hljs-number">2026</span>-02-<span class="hljs-number">10</span> <span class="hljs-number">10</span>:05:<span class="hljs-number">00</span>,æŸè¿è¥å•†,<span class="hljs-number">10086</span>,<span class="hljs-keyword">import</span>,<span class="hljs-string">"æ‚¨æœ¬æœˆè¯è´¹è´¦å•å·²å‡ºï¼Œåº”ç¼´ 89.50 å…ƒï¼Œé€¾æœŸå°†å½±å“æœåŠ¡ã€‚"</span>
m6,<span class="hljs-number">2026</span>-02-<span class="hljs-number">10</span> <span class="hljs-number">10</span>:06:<span class="hljs-number">00</span>,å¹³å®‰ä¿é™©,<span class="hljs-number">95511</span>,<span class="hljs-keyword">import</span>,<span class="hljs-string">"ã€å¹³å®‰ã€‘æ‚¨çš„ä¿å•å°†äº2026-03-01åˆ°æœŸï¼Œè¯·åŠæ—¶ç»­ä¿ï¼Œè¯¦è¯¢4008000000ã€‚"</span>
m7,<span class="hljs-number">2026</span>-02-<span class="hljs-number">10</span> <span class="hljs-number">10</span>:07:<span class="hljs-number">00</span>,æŸç”µå•†,1069xxxx,<span class="hljs-keyword">import</span>,<span class="hljs-string">"ã€äº¬ä¸œã€‘ä¼šå‘˜è´¦å·ç»‘å®šæ‰‹æœºå·å˜æ›´æˆåŠŸï¼Œå¦‚éæœ¬äººæ“ä½œè¯·è‡´ç”µ950618ã€‚"</span>
m8,<span class="hljs-number">2026</span>-02-<span class="hljs-number">10</span> <span class="hljs-number">10</span>:08:<span class="hljs-number">00</span>,æŸå¹³å°,1069xxxx,<span class="hljs-keyword">import</span>,<span class="hljs-string">"ã€ç¾å›¢ã€‘æœ¬åº—æ–°å®¢ç«‹å‡åˆ¸å·²åˆ°è´¦ï¼Œç‚¹å‡» http://promo.example.com ç«‹å³ä½¿ç”¨ã€‚"</span>
m9,<span class="hljs-number">2026</span>-02-<span class="hljs-number">10</span> <span class="hljs-number">10</span>:09:<span class="hljs-number">00</span>,å…¬å®‰åè¯ˆ,<span class="hljs-number">12110</span>,<span class="hljs-keyword">import</span>,<span class="hljs-string">"ã€åè¯ˆä¸­å¿ƒã€‘è­¦æƒ•å†’å……å®¢æœé€€æ¬¾è¯ˆéª—ï¼Œä»»ä½•éªŒè¯ç å‡ä¸è¦é€éœ²ã€‚"</span>
m10,<span class="hljs-number">2026</span>-02-<span class="hljs-number">10</span> <span class="hljs-number">10</span>:<span class="hljs-number">10</span>:<span class="hljs-number">00</span>,æœªçŸ¥,unknown,<span class="hljs-keyword">import</span>,<span class="hljs-string">"æ‚¨æœ‰ä¸€ç¬”è®¢å•å¾…å¤„ç†ï¼Œè¯·è”ç³» 13800138000 è·å–è¯¦æƒ…ã€‚"</span>
</code></pre>
<hr/>
<h3 data-id="heading-16">4) llama.cpp æ¨ç† Provider ä¸åˆ†ç±» Promptï¼ˆä¸¥æ ¼ JSONã€æšä¸¾çº¦æŸï¼‰</h3>
<h4 data-id="heading-17"><code>src-tauri/src/providers/provider.rs</code></h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> async_trait::async_trait;
<span class="hljs-keyword">use</span> crate::domain::dto::{ModelOutput, RuleOutput};

<span class="hljs-meta">#[derive(Debug, Clone)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ClassifyPayload</span> {
    <span class="hljs-keyword">pub</span> message_id: <span class="hljs-type">String</span>,
    <span class="hljs-keyword">pub</span> content: <span class="hljs-type">String</span>,
    <span class="hljs-keyword">pub</span> rule: RuleOutput,
    <span class="hljs-keyword">pub</span> schema_version: <span class="hljs-type">String</span>,
    <span class="hljs-keyword">pub</span> rules_version: <span class="hljs-type">String</span>,
}

<span class="hljs-meta">#[async_trait]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">trait</span> <span class="hljs-title class_">Provider</span>: <span class="hljs-built_in">Send</span> + <span class="hljs-built_in">Sync</span> {
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">classify</span>(&amp;<span class="hljs-keyword">self</span>, payload: ClassifyPayload) <span class="hljs-punctuation">-&gt;</span> anyhow::<span class="hljs-type">Result</span>&lt;ModelOutput&gt;;
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">name</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-symbol">'static</span> <span class="hljs-type">str</span>;
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">model_version</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;
}
</code></pre>
<h4 data-id="heading-18"><code>src-tauri/src/providers/prompt.rs</code></h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">use</span> <span class="hljs-title">crate</span>::<span class="hljs-title">domain</span>::<span class="hljs-title">schema</span>::<span class="hljs-title">SCHEMA_VERSION</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">serde_json</span>::<span class="hljs-title">json</span>;

pub <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">build_prompt</span>(<span class="hljs-params">content: &amp;str, entities_json: &amp;serde_json::<span class="hljs-variable constant_">Value</span>, signals_json: &amp;serde_json::<span class="hljs-variable constant_">Value</span></span>) -&gt; <span class="hljs-title">String</span> </span>{
    <span class="hljs-comment">// å¼ºçº¦æŸï¼šåªå…è®¸è¾“å‡ºä¸¥æ ¼ JSONï¼Œä¸è¦é¢å¤–æ–‡æœ¬</span>
    <span class="hljs-comment">// è¦æ±‚æšä¸¾å¿…é¡»ä»ç»™å®šé›†åˆä¸­é€‰</span>
    let schema = json!({
      <span class="hljs-string">"schema_version"</span>: SCHEMA_VERSION,
      <span class="hljs-string">"industry_enum"</span>: [<span class="hljs-string">"é‡‘è"</span>,<span class="hljs-string">"é€šç”¨"</span>,<span class="hljs-string">"æ”¿åŠ¡"</span>,<span class="hljs-string">"æ¸ é“"</span>,<span class="hljs-string">"äº’è”ç½‘"</span>,<span class="hljs-string">"å…¶ä»–"</span>],
      <span class="hljs-string">"type_enum"</span>: [<span class="hljs-string">"éªŒè¯ç "</span>,<span class="hljs-string">"äº¤æ˜“æé†’"</span>,<span class="hljs-string">"è´¦å•å‚¬ç¼´"</span>,<span class="hljs-string">"ä¿é™©ç»­ä¿"</span>,<span class="hljs-string">"ç‰©æµå–ä»¶"</span>,<span class="hljs-string">"ä¼šå‘˜è´¦å·å˜æ›´"</span>,<span class="hljs-string">"æ”¿åŠ¡é€šçŸ¥"</span>,<span class="hljs-string">"é£é™©æç¤º"</span>,<span class="hljs-string">"è¥é”€æ¨å¹¿"</span>,<span class="hljs-string">"å…¶ä»–"</span>],
      <span class="hljs-string">"entities"</span>: {
        <span class="hljs-string">"brand"</span>: <span class="hljs-string">"string|null"</span>,
        <span class="hljs-string">"verification_code"</span>: <span class="hljs-string">"string|null"</span>,
        <span class="hljs-string">"amount"</span>: <span class="hljs-string">"number|null"</span>,
        <span class="hljs-string">"balance"</span>: <span class="hljs-string">"number|null"</span>,
        <span class="hljs-string">"account_suffix"</span>: <span class="hljs-string">"string|null"</span>,
        <span class="hljs-string">"time_text"</span>: <span class="hljs-string">"string|null"</span>,
        <span class="hljs-string">"url"</span>: <span class="hljs-string">"string|null"</span>,
        <span class="hljs-string">"phone_in_text"</span>: <span class="hljs-string">"string|null"</span>
      }
    });

    format!(
r<span class="hljs-comment">#"ä½ æ˜¯ä¸€ä¸ªç¦»çº¿çŸ­ä¿¡åˆ†ç±»ä¸ç»“æ„åŒ–æŠ½å–å¼•æ“ã€‚ä½ çš„ä»»åŠ¡ï¼šå¯¹çŸ­ä¿¡åšè¡Œä¸šå¤§ç±»ä¸ç±»å‹åˆ¤å®šï¼Œå¹¶è¡¥å…¨å®ä½“å­—æ®µã€‚</span>
è¦æ±‚ï¼š
<span class="hljs-number">1</span>) ä»…è¾“å‡ºä¸€ä¸ªä¸¥æ ¼ JSON å¯¹è±¡ï¼Œç¦æ­¢è¾“å‡ºä»»ä½•å¤šä½™æ–‡æœ¬ã€‚
<span class="hljs-number">2</span>) industry ä¸ type å¿…é¡»ä»æšä¸¾ä¸­é€‰æ‹©ï¼Œç¦æ­¢å‡ºç°æ–°å€¼ã€‚
<span class="hljs-number">3</span>) entities å¿…é¡»åŒ…å«æ‰€æœ‰å­—æ®µï¼Œç¼ºå¤±å¡« <span class="hljs-literal">null</span>ã€‚
<span class="hljs-number">4</span>) confidence ä¸º <span class="hljs-number">0</span>~<span class="hljs-number">1</span> å°æ•°ã€‚
<span class="hljs-number">5</span>) reasons ä¸ºå­—ç¬¦ä¸²æ•°ç»„ï¼Œè§£é‡Šä½ ä¸ºä½•åšå‡ºåˆ¤æ–­ï¼Œå¿…é¡»å¼•ç”¨ signals / entities / content ä¸­çš„ä¿¡æ¯ã€‚
<span class="hljs-number">6</span>) ä¸è¦è‡†é€ é“¾æ¥/ç”µè¯/é‡‘é¢ï¼›æ— æ³•ç¡®å®šå¡« <span class="hljs-literal">null</span> æˆ–é™ä½ confidenceã€‚

ã€çº¦æŸSchemaã€‘
{schema}

ã€çŸ­ä¿¡contentã€‘
{content}

ã€è§„åˆ™å±‚æå–entitiesï¼ˆå¯èƒ½ä¸å…¨ï¼‰ã€‘
{entities}

ã€è§„åˆ™å±‚signalsï¼ˆå¯è§£é‡Šæ€§çº¿ç´¢ï¼‰ã€‘
{signals}

è¾“å‡º JSON ç»“æ„å¦‚ä¸‹ï¼ˆå­—æ®µåå›ºå®šï¼‰ï¼š
{{
  <span class="hljs-string">"industry"</span>: <span class="hljs-string">"..."</span>,
  <span class="hljs-string">"type"</span>: <span class="hljs-string">"..."</span>,
  <span class="hljs-string">"entities"</span>: {{
    <span class="hljs-string">"brand"</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">"verification_code"</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">"amount"</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">"balance"</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">"account_suffix"</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">"time_text"</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">"url"</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">"phone_in_text"</span>: <span class="hljs-literal">null</span>
  }},
  <span class="hljs-string">"confidence"</span>: <span class="hljs-number">0.0</span>,
  <span class="hljs-string">"reasons"</span>: [<span class="hljs-string">"..."</span>]
}}<span class="hljs-string">"#,
        schema = schema.to_string(),
        content = content,
        entities = entities_json.to_string(),
        signals = signals_json.to_string(),
    )
}
</span></code></pre>
<h4 data-id="heading-19"><code>src-tauri/src/providers/llama_cpp.rs</code></h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::{path::PathBuf, sync::Arc, time::Duration};
<span class="hljs-keyword">use</span> tokio::{process::Command, sync::Semaphore, time::timeout};
<span class="hljs-keyword">use</span> async_trait::async_trait;
<span class="hljs-keyword">use</span> serde_json::Value;

<span class="hljs-keyword">use</span> crate::providers::provider::{Provider, ClassifyPayload};
<span class="hljs-keyword">use</span> crate::domain::dto::{ModelOutput, ExtractedEntities};
<span class="hljs-keyword">use</span> crate::infra::log::append_error_log;
<span class="hljs-keyword">use</span> crate::providers::prompt::build_prompt;

<span class="hljs-meta">#[derive(Clone)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">LlamaCppProvider</span> {
    <span class="hljs-keyword">pub</span> sidecar_path: PathBuf, <span class="hljs-comment">// llama-cli æˆ– llama å¯æ‰§è¡Œæ–‡ä»¶</span>
    <span class="hljs-keyword">pub</span> model_path: PathBuf,   <span class="hljs-comment">// GGUF</span>
    <span class="hljs-keyword">pub</span> threads: <span class="hljs-type">u32</span>,
    <span class="hljs-keyword">pub</span> max_concurrency: <span class="hljs-type">usize</span>,
    <span class="hljs-keyword">pub</span> timeout_ms: <span class="hljs-type">u64</span>,
    <span class="hljs-keyword">pub</span> semaphore: Arc&lt;Semaphore&gt;,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">LlamaCppProvider</span> {
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(sidecar_path: PathBuf, model_path: PathBuf, threads: <span class="hljs-type">u32</span>, max_concurrency: <span class="hljs-type">usize</span>, timeout_ms: <span class="hljs-type">u64</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">Self</span> {
            sidecar_path,
            model_path,
            threads,
            max_concurrency,
            timeout_ms,
            semaphore: Arc::<span class="hljs-title function_ invoke__">new</span>(Semaphore::<span class="hljs-title function_ invoke__">new</span>(max_concurrency)),
        }
    }

    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">parse_model_output</span>(&amp;<span class="hljs-keyword">self</span>, s: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> anyhow::<span class="hljs-type">Result</span>&lt;ModelOutput&gt; {
        <span class="hljs-comment">// llama.cpp å¯èƒ½å¸¦å‰åç©ºç™½æˆ–å¤šè¡Œï¼Œå°½é‡æˆªå–ç¬¬ä¸€ä¸ª JSON å¯¹è±¡</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">trimmed</span> = s.<span class="hljs-title function_ invoke__">trim</span>();
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">start</span> = trimmed.<span class="hljs-title function_ invoke__">find</span>(<span class="hljs-string">'{'</span>).<span class="hljs-title function_ invoke__">ok_or_else</span>(|| anyhow::anyhow!(<span class="hljs-string">"no json start"</span>))?;
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">end</span> = trimmed.<span class="hljs-title function_ invoke__">rfind</span>(<span class="hljs-string">'}'</span>).<span class="hljs-title function_ invoke__">ok_or_else</span>(|| anyhow::anyhow!(<span class="hljs-string">"no json end"</span>))?;
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">json_str</span> = &amp;trimmed[start..=end];

        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">v</span>: Value = serde_json::<span class="hljs-title function_ invoke__">from_str</span>(json_str)?;
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">industry</span> = serde_json::<span class="hljs-title function_ invoke__">from_value</span>(v.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">"industry"</span>).<span class="hljs-title function_ invoke__">cloned</span>().<span class="hljs-title function_ invoke__">ok_or_else</span>(|| anyhow::anyhow!(<span class="hljs-string">"missing industry"</span>))?)?;
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">sms_type</span> = serde_json::<span class="hljs-title function_ invoke__">from_value</span>(v.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">"type"</span>).<span class="hljs-title function_ invoke__">cloned</span>().<span class="hljs-title function_ invoke__">ok_or_else</span>(|| anyhow::anyhow!(<span class="hljs-string">"missing type"</span>))?)?;
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">entities</span>: ExtractedEntities = serde_json::<span class="hljs-title function_ invoke__">from_value</span>(v.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">"entities"</span>).<span class="hljs-title function_ invoke__">cloned</span>().<span class="hljs-title function_ invoke__">ok_or_else</span>(|| anyhow::anyhow!(<span class="hljs-string">"missing entities"</span>))?)?;
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">confidence</span>: <span class="hljs-type">f64</span> = v.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">"confidence"</span>).<span class="hljs-title function_ invoke__">and_then</span>(|x| x.<span class="hljs-title function_ invoke__">as_f64</span>()).<span class="hljs-title function_ invoke__">unwrap_or</span>(<span class="hljs-number">0.5</span>);
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">reasons</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt; = v.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">"reasons"</span>).<span class="hljs-title function_ invoke__">and_then</span>(|x| x.<span class="hljs-title function_ invoke__">as_array</span>())
            .<span class="hljs-title function_ invoke__">map</span>(|arr| arr.<span class="hljs-title function_ invoke__">iter</span>().<span class="hljs-title function_ invoke__">filter_map</span>(|i| i.<span class="hljs-title function_ invoke__">as_str</span>().<span class="hljs-title function_ invoke__">map</span>(|s| s.<span class="hljs-title function_ invoke__">to_string</span>())).<span class="hljs-title function_ invoke__">collect</span>())
            .<span class="hljs-title function_ invoke__">unwrap_or_else</span>(|| <span class="hljs-built_in">vec!</span>[]);

        <span class="hljs-title function_ invoke__">Ok</span>(ModelOutput {
            industry,
            sms_type,
            entities,
            confidence: confidence.<span class="hljs-title function_ invoke__">clamp</span>(<span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>),
            reasons,
            model_version: <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">model_version</span>(),
        })
    }
}

<span class="hljs-meta">#[async_trait]</span>
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Provider</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">LlamaCppProvider</span> {
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">classify</span>(&amp;<span class="hljs-keyword">self</span>, payload: ClassifyPayload) <span class="hljs-punctuation">-&gt;</span> anyhow::<span class="hljs-type">Result</span>&lt;ModelOutput&gt; {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_permit</span> = <span class="hljs-keyword">self</span>.semaphore.<span class="hljs-title function_ invoke__">acquire</span>().<span class="hljs-keyword">await</span>?;

        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">entities_json</span> = serde_json::<span class="hljs-title function_ invoke__">to_value</span>(&amp;payload.rule.entities)?;
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">signals_json</span> = serde_json::<span class="hljs-title function_ invoke__">to_value</span>(&amp;payload.rule.signals)?;
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">prompt</span> = <span class="hljs-title function_ invoke__">build_prompt</span>(&amp;payload.content, &amp;entities_json, &amp;signals_json);

        <span class="hljs-comment">// llama.cpp å‘½ä»¤è¡Œå‚æ•°ï¼šæ ¹æ®ä½ ä¸‹è½½çš„ç‰ˆæœ¬å¯èƒ½æ˜¯ llama-cli æˆ– llama</span>
        <span class="hljs-comment">// è¿™é‡Œé‡‡ç”¨å¸¸è§å‚æ•°ï¼š-m æ¨¡å‹ -p prompt -t threads --temp 0.2 --top-p 0.9 --ctx-size 2048</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">cmd</span> = Command::<span class="hljs-title function_ invoke__">new</span>(&amp;<span class="hljs-keyword">self</span>.sidecar_path);
        cmd.<span class="hljs-title function_ invoke__">arg</span>(<span class="hljs-string">"-m"</span>).<span class="hljs-title function_ invoke__">arg</span>(&amp;<span class="hljs-keyword">self</span>.model_path)
            .<span class="hljs-title function_ invoke__">arg</span>(<span class="hljs-string">"-p"</span>).<span class="hljs-title function_ invoke__">arg</span>(prompt)
            .<span class="hljs-title function_ invoke__">arg</span>(<span class="hljs-string">"-t"</span>).<span class="hljs-title function_ invoke__">arg</span>(<span class="hljs-keyword">self</span>.threads.<span class="hljs-title function_ invoke__">to_string</span>())
            .<span class="hljs-title function_ invoke__">arg</span>(<span class="hljs-string">"--temp"</span>).<span class="hljs-title function_ invoke__">arg</span>(<span class="hljs-string">"0.2"</span>)
            .<span class="hljs-title function_ invoke__">arg</span>(<span class="hljs-string">"--top-p"</span>).<span class="hljs-title function_ invoke__">arg</span>(<span class="hljs-string">"0.9"</span>)
            .<span class="hljs-title function_ invoke__">arg</span>(<span class="hljs-string">"--ctx-size"</span>).<span class="hljs-title function_ invoke__">arg</span>(<span class="hljs-string">"2048"</span>);

        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">dur</span> = Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-keyword">self</span>.timeout_ms);
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">out</span> = <span class="hljs-title function_ invoke__">timeout</span>(dur, cmd.<span class="hljs-title function_ invoke__">output</span>()).<span class="hljs-keyword">await</span>;

        <span class="hljs-keyword">match</span> out {
            <span class="hljs-title function_ invoke__">Ok</span>(<span class="hljs-title function_ invoke__">Ok</span>(output)) =&gt; {
                <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">stdout</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from_utf8_lossy</span>(&amp;output.stdout).<span class="hljs-title function_ invoke__">to_string</span>();
                <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">stderr</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from_utf8_lossy</span>(&amp;output.stderr).<span class="hljs-title function_ invoke__">to_string</span>();
                <span class="hljs-keyword">if</span> !output.status.<span class="hljs-title function_ invoke__">success</span>() {
                    <span class="hljs-title function_ invoke__">append_error_log</span>(<span class="hljs-built_in">format!</span>(<span class="hljs-string">"llama.cpp exit != 0: {}\nstderr={}"</span>, output.status, stderr)).<span class="hljs-title function_ invoke__">ok</span>();
                    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Err</span>(anyhow::anyhow!(<span class="hljs-string">"llama.cpp failed"</span>));
                }
                <span class="hljs-comment">// stderr ä¹Ÿå¯èƒ½æœ‰æ—¥å¿—</span>
                <span class="hljs-keyword">if</span> !stderr.<span class="hljs-title function_ invoke__">trim</span>().<span class="hljs-title function_ invoke__">is_empty</span>() {
                    <span class="hljs-title function_ invoke__">append_error_log</span>(<span class="hljs-built_in">format!</span>(<span class="hljs-string">"llama.cpp stderr: {}"</span>, stderr)).<span class="hljs-title function_ invoke__">ok</span>();
                }
                <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">parse_model_output</span>(&amp;stdout)
            }
            <span class="hljs-title function_ invoke__">Ok</span>(<span class="hljs-title function_ invoke__">Err</span>(e)) =&gt; {
                <span class="hljs-title function_ invoke__">append_error_log</span>(<span class="hljs-built_in">format!</span>(<span class="hljs-string">"llama.cpp spawn error: {}"</span>, e)).<span class="hljs-title function_ invoke__">ok</span>();
                <span class="hljs-title function_ invoke__">Err</span>(anyhow::anyhow!(e))
            }
            <span class="hljs-title function_ invoke__">Err</span>(_) =&gt; {
                <span class="hljs-title function_ invoke__">append_error_log</span>(<span class="hljs-string">"llama.cpp timeout"</span>.<span class="hljs-title function_ invoke__">to_string</span>()).<span class="hljs-title function_ invoke__">ok</span>();
                <span class="hljs-title function_ invoke__">Err</span>(anyhow::anyhow!(<span class="hljs-string">"timeout"</span>))
            }
        }
    }

    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">name</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-symbol">'static</span> <span class="hljs-type">str</span> { <span class="hljs-string">"llama.cpp"</span> }

    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">model_version</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> {
        <span class="hljs-comment">// ç®€åŒ–ï¼šç”¨æ¨¡å‹æ–‡ä»¶åå½“ç‰ˆæœ¬</span>
        <span class="hljs-keyword">self</span>.model_path.<span class="hljs-title function_ invoke__">file_name</span>().<span class="hljs-title function_ invoke__">unwrap_or_default</span>().<span class="hljs-title function_ invoke__">to_string_lossy</span>().<span class="hljs-title function_ invoke__">to_string</span>()
    }
}
</code></pre>
<h4 data-id="heading-20"><code>src-tauri/src/infra/log.rs</code></h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::{fs, io::Write, path::PathBuf};

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">app_log_path</span>() <span class="hljs-punctuation">-&gt;</span> anyhow::<span class="hljs-type">Result</span>&lt;PathBuf&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">base</span> = tauri::api::path::<span class="hljs-title function_ invoke__">app_log_dir</span>(&amp;tauri::Config::<span class="hljs-title function_ invoke__">default</span>())?;
    <span class="hljs-title function_ invoke__">Ok</span>(base.<span class="hljs-title function_ invoke__">join</span>(<span class="hljs-string">"sms-tagging-officer.log"</span>))
}

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">append_error_log</span>(line: <span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> anyhow::<span class="hljs-type">Result</span>&lt;()&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">p</span> = <span class="hljs-title function_ invoke__">app_log_path</span>()?;
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(parent) = p.<span class="hljs-title function_ invoke__">parent</span>() { fs::<span class="hljs-title function_ invoke__">create_dir_all</span>(parent)?; }
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">f</span> = fs::OpenOptions::<span class="hljs-title function_ invoke__">new</span>().<span class="hljs-title function_ invoke__">create</span>(<span class="hljs-literal">true</span>).<span class="hljs-title function_ invoke__">append</span>(<span class="hljs-literal">true</span>).<span class="hljs-title function_ invoke__">open</span>(p)?;
    <span class="hljs-built_in">writeln!</span>(f, <span class="hljs-string">"{}"</span>, line)?;
    <span class="hljs-title function_ invoke__">Ok</span>(())
}
</code></pre>
<hr/>
<h3 data-id="heading-21">5) èåˆå†³ç­–å™¨ï¼ˆå†²çªå¤„ç†ã€needs_reviewã€ç½®ä¿¡åº¦è°ƒèŠ‚ï¼‰</h3>
<h4 data-id="heading-22"><code>src-tauri/src/fusion/decision.rs</code></h4>
<pre><code class="hljs language-scss" lang="scss">use crate::domain::dto::{FinalLabel, RuleOutput, ModelOutput, ExtractedEntities};
use crate::domain::schema::{RULES_VERSION, SCHEMA_VERSION};

fn <span class="hljs-built_in">merge_entities</span>(rule_e: &amp;ExtractedEntities, model_e: &amp;ExtractedEntities) -&gt; ExtractedEntities {
    <span class="hljs-comment">// è§„åˆ™ä¼˜å…ˆï¼šå¼ºæ¨¡å¼å¸¸å¸¸æ›´å‡†ï¼›æ¨¡å‹è¡¥å…¨ç©ºç¼ºå­—æ®µ</span>
    ExtractedEntities {
        brand: rule_e.brand.<span class="hljs-built_in">clone</span>().<span class="hljs-built_in">or</span>(model_e.brand.<span class="hljs-built_in">clone</span>()),
        verification_code: rule_e.verification_code.<span class="hljs-built_in">clone</span>().<span class="hljs-built_in">or</span>(model_e.verification_code.<span class="hljs-built_in">clone</span>()),
        amount: rule_e.amount.<span class="hljs-built_in">or</span>(model_e.amount),
        balance: rule_e.balance.<span class="hljs-built_in">or</span>(model_e.balance),
        account_suffix: rule_e.account_suffix.<span class="hljs-built_in">clone</span>().<span class="hljs-built_in">or</span>(model_e.account_suffix.<span class="hljs-built_in">clone</span>()),
        time_text: rule_e.time_text.<span class="hljs-built_in">clone</span>().<span class="hljs-built_in">or</span>(model_e.time_text.<span class="hljs-built_in">clone</span>()),
        url: rule_e.url.<span class="hljs-built_in">clone</span>().<span class="hljs-built_in">or</span>(model_e.url.<span class="hljs-built_in">clone</span>()),
        phone_in_text: rule_e.phone_in_text.<span class="hljs-built_in">clone</span>().<span class="hljs-built_in">or</span>(model_e.phone_in_text.<span class="hljs-built_in">clone</span>()),
    }
}

pub fn <span class="hljs-built_in">fuse</span>(message_id: &amp;str, rule: &amp;RuleOutput, model: Option&lt;&amp;ModelOutput&gt;) -&gt; FinalLabel {
    <span class="hljs-comment">// 1) è§„åˆ™å¼ºå‘½ä¸­ï¼šç›´æ¥ç”¨è§„åˆ™è¾“å‡ºï¼ˆæ— éœ€æ¨¡å‹ï¼‰</span>
    if rule<span class="hljs-selector-class">.hit</span> &amp;&amp; rule<span class="hljs-selector-class">.industry</span><span class="hljs-selector-class">.is_some</span>() &amp;&amp; rule<span class="hljs-selector-class">.sms_type</span><span class="hljs-selector-class">.is_some</span>() {
        return FinalLabel {
            message_id: message_id.<span class="hljs-built_in">to_string</span>(),
            industry: rule.industry.<span class="hljs-built_in">clone</span>().<span class="hljs-built_in">unwrap</span>(),
            sms_type: rule.sms_type.<span class="hljs-built_in">clone</span>().<span class="hljs-built_in">unwrap</span>(),
            entities: rule.entities.<span class="hljs-built_in">clone</span>(),
            confidence: rule.confidence.<span class="hljs-built_in">clamp</span>(<span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>),
            reasons: rule.reasons.<span class="hljs-built_in">clone</span>(),
            signals: rule.signals.<span class="hljs-built_in">clone</span>(),
            needs_review: false,
            rules_version: RULES_VERSION.<span class="hljs-built_in">to_string</span>(),
            model_version: <span class="hljs-string">"rule_only"</span>.<span class="hljs-built_in">to_string</span>(),
            schema_version: SCHEMA_VERSION.<span class="hljs-built_in">to_string</span>(),
        };
    }

    <span class="hljs-comment">// 2) è§„åˆ™æœªå‘½ä¸­å¼ºæ¨¡å¼ï¼šå¿…é¡»ä¾èµ–æ¨¡å‹</span>
    let m = model<span class="hljs-selector-class">.expect</span>("model required when rule not hit");
    let mut needs_review = false;
    let mut confidence = m<span class="hljs-selector-class">.confidence</span><span class="hljs-selector-class">.clamp</span>(<span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>);
    let mut reasons = vec!<span class="hljs-selector-attr">[]</span>;
    reasons<span class="hljs-selector-class">.extend</span>(rule.reasons.clone());
    reasons<span class="hljs-selector-class">.extend</span>(m.reasons.clone());

    <span class="hljs-comment">// å†²çªï¼šå¦‚æœè§„åˆ™ç»™äº†å¼±å€¾å‘ï¼ˆsignalsï¼‰ä½†æ¨¡å‹åˆ¤æ–­éå¸¸ä¸åŒï¼Œå¯è§¦å‘å¤æ ¸</span>
    <span class="hljs-comment">// è¿™é‡Œç”¨ç®€å•å¯å‘ï¼šè‹¥è§„åˆ™æå–åˆ° otp ç /é‡‘é¢/é“¾æ¥ï¼Œè€Œæ¨¡å‹ç»™åˆ°ç±»å‹â€œå…¶ä»–â€ï¼Œé™ä½ç½®ä¿¡å¹¶è¿›å¤æ ¸</span>
    let has_otp = rule<span class="hljs-selector-class">.entities</span><span class="hljs-selector-class">.verification_code</span><span class="hljs-selector-class">.is_some</span>();
    let has_amount = rule<span class="hljs-selector-class">.entities</span><span class="hljs-selector-class">.amount</span><span class="hljs-selector-class">.is_some</span>();
    let has_url = rule<span class="hljs-selector-class">.entities</span><span class="hljs-selector-class">.url</span><span class="hljs-selector-class">.is_some</span>();

    if (has_otp || has_amount || has_url) &amp;&amp; matches!(m.sms_type, crate::domain::enums::SmsType::Other) {
        needs_review = true;
        confidence = (confidence * <span class="hljs-number">0.75</span>)<span class="hljs-selector-class">.min</span>(<span class="hljs-number">0.75</span>);
        reasons<span class="hljs-selector-class">.push</span>("å†²çªï¼šè§„åˆ™æŠ½å–åˆ°å…³é”®å®ä½“ï¼Œä½†æ¨¡å‹ç±»å‹ä¸ºâ€œå…¶ä»–â€ï¼Œè¿›å…¥å¤æ ¸".to_string());
    }

    <span class="hljs-comment">// ä½ç½®ä¿¡ï¼šè¿›å…¥å¤æ ¸</span>
    if confidence &lt; <span class="hljs-number">0.70</span> {
        needs_review = true;
        reasons<span class="hljs-selector-class">.push</span>("ç½®ä¿¡åº¦ä½äºé˜ˆå€¼<span class="hljs-number">0.70</span>ï¼Œè¿›å…¥å¤æ ¸".to_string());
    }

    let entities = <span class="hljs-built_in">merge_entities</span>(&amp;rule.entities, &amp;m.entities);

    FinalLabel {
        message_id: message_id.<span class="hljs-built_in">to_string</span>(),
        industry: m.industry.<span class="hljs-built_in">clone</span>(),
        sms_type: m.sms_type.<span class="hljs-built_in">clone</span>(),
        entities,
        confidence,
        reasons,
        signals: rule.signals.<span class="hljs-built_in">clone</span>(),
        needs_review,
        rules_version: RULES_VERSION.<span class="hljs-built_in">to_string</span>(),
        model_version: m.model_version.<span class="hljs-built_in">clone</span>(),
        schema_version: SCHEMA_VERSION.<span class="hljs-built_in">to_string</span>(),
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-23">6) SQLite åˆå§‹åŒ–è„šæœ¬ + DAO å±‚ï¼ˆmessages / labels / audit_logsï¼‰</h3>
<h4 data-id="heading-24"><code>src-tauri/src/db/migrations.sql</code></h4>
<pre><code class="hljs language-sql" lang="sql">PRAGMA journal_mode<span class="hljs-operator">=</span>WAL;

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> messages (
  id TEXT <span class="hljs-keyword">PRIMARY</span> KEY,
  content TEXT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  received_at TEXT <span class="hljs-keyword">NULL</span>,
  sender TEXT <span class="hljs-keyword">NULL</span>,
  phone TEXT <span class="hljs-keyword">NULL</span>,
  source TEXT <span class="hljs-keyword">NULL</span>,
  created_at TEXT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> (datetime(<span class="hljs-string">'now'</span>))
);

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> labels (
  message_id TEXT <span class="hljs-keyword">PRIMARY</span> KEY,
  industry TEXT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  type TEXT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  brand TEXT <span class="hljs-keyword">NULL</span>,
  verification_code TEXT <span class="hljs-keyword">NULL</span>,
  amount <span class="hljs-type">REAL</span> <span class="hljs-keyword">NULL</span>,
  balance <span class="hljs-type">REAL</span> <span class="hljs-keyword">NULL</span>,
  account_suffix TEXT <span class="hljs-keyword">NULL</span>,
  time_text TEXT <span class="hljs-keyword">NULL</span>,
  url TEXT <span class="hljs-keyword">NULL</span>,
  phone_in_text TEXT <span class="hljs-keyword">NULL</span>,
  confidence <span class="hljs-type">REAL</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  reasons_json TEXT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  signals_json TEXT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  needs_review <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,
  rules_version TEXT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  model_version TEXT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  schema_version TEXT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  updated_at TEXT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> (datetime(<span class="hljs-string">'now'</span>)),
  <span class="hljs-keyword">FOREIGN</span> KEY(message_id) <span class="hljs-keyword">REFERENCES</span> messages(id)
);

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> audit_logs (
  id <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTOINCREMENT,
  message_id TEXT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  operator TEXT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  before_json TEXT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  after_json TEXT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  changed_at TEXT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> (datetime(<span class="hljs-string">'now'</span>)),
  <span class="hljs-keyword">FOREIGN</span> KEY(message_id) <span class="hljs-keyword">REFERENCES</span> messages(id)
);

<span class="hljs-keyword">CREATE</span> INDEX IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> idx_labels_industry <span class="hljs-keyword">ON</span> labels(industry);
<span class="hljs-keyword">CREATE</span> INDEX IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> idx_labels_type <span class="hljs-keyword">ON</span> labels(type);
<span class="hljs-keyword">CREATE</span> INDEX IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> idx_labels_needs_review <span class="hljs-keyword">ON</span> labels(needs_review);
<span class="hljs-keyword">CREATE</span> INDEX IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> idx_labels_confidence <span class="hljs-keyword">ON</span> labels(confidence);
</code></pre>
<h4 data-id="heading-25"><code>src-tauri/src/db/mod.rs</code></h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> rusqlite::Connection;
<span class="hljs-keyword">use</span> std::path::PathBuf;

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">db_path</span>() <span class="hljs-punctuation">-&gt;</span> anyhow::<span class="hljs-type">Result</span>&lt;PathBuf&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">dir</span> = tauri::api::path::<span class="hljs-title function_ invoke__">app_data_dir</span>(&amp;tauri::Config::<span class="hljs-title function_ invoke__">default</span>())?;
    std::fs::<span class="hljs-title function_ invoke__">create_dir_all</span>(&amp;dir)?;
    <span class="hljs-title function_ invoke__">Ok</span>(dir.<span class="hljs-title function_ invoke__">join</span>(<span class="hljs-string">"sms-tagging-officer.sqlite"</span>))
}

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">connect</span>() <span class="hljs-punctuation">-&gt;</span> anyhow::<span class="hljs-type">Result</span>&lt;Connection&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">p</span> = <span class="hljs-title function_ invoke__">db_path</span>()?;
    <span class="hljs-title function_ invoke__">Ok</span>(Connection::<span class="hljs-title function_ invoke__">open</span>(p)?)
}

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">migrate</span>(conn: &amp;Connection) <span class="hljs-punctuation">-&gt;</span> anyhow::<span class="hljs-type">Result</span>&lt;()&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">sql</span> = <span class="hljs-built_in">include_str!</span>(<span class="hljs-string">"migrations.sql"</span>);
    conn.<span class="hljs-title function_ invoke__">execute_batch</span>(sql)?;
    <span class="hljs-title function_ invoke__">Ok</span>(())
}
</code></pre>
<h4 data-id="heading-26"><code>src-tauri/src/db/dao.rs</code></h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> rusqlite::{params, Connection};
<span class="hljs-keyword">use</span> serde_json::Value;

<span class="hljs-keyword">use</span> crate::domain::dto::{FinalLabel};
<span class="hljs-keyword">use</span> crate::domain::enums::{Industry, SmsType};

<span class="hljs-meta">#[derive(Debug, Clone)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">MessageRow</span> {
    <span class="hljs-keyword">pub</span> id: <span class="hljs-type">String</span>,
    <span class="hljs-keyword">pub</span> content: <span class="hljs-type">String</span>,
    <span class="hljs-keyword">pub</span> received_at: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;,
    <span class="hljs-keyword">pub</span> sender: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;,
    <span class="hljs-keyword">pub</span> phone: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;,
    <span class="hljs-keyword">pub</span> source: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;,
}

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">upsert_messages</span>(conn: &amp;Connection, rows: &amp;[MessageRow]) <span class="hljs-punctuation">-&gt;</span> anyhow::<span class="hljs-type">Result</span>&lt;<span class="hljs-type">usize</span>&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">tx</span> = conn.<span class="hljs-title function_ invoke__">transaction</span>()?;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">count</span> = <span class="hljs-number">0usize</span>;
    <span class="hljs-keyword">for</span> <span class="hljs-variable">r</span> <span class="hljs-keyword">in</span> rows {
        tx.<span class="hljs-title function_ invoke__">execute</span>(
            <span class="hljs-string">r#"INSERT INTO messages (id, content, received_at, sender, phone, source)
               VALUES (?1, ?2, ?3, ?4, ?5, ?6)
               ON CONFLICT(id) DO UPDATE SET
                 content=excluded.content,
                 received_at=excluded.received_at,
                 sender=excluded.sender,
                 phone=excluded.phone,
                 source=excluded.source"#</span>,
            params![r.id, r.content, r.received_at, r.sender, r.phone, r.source],
        )?;
        count += <span class="hljs-number">1</span>;
    }
    tx.<span class="hljs-title function_ invoke__">commit</span>()?;
    <span class="hljs-title function_ invoke__">Ok</span>(count)
}

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">upsert_label</span>(conn: &amp;Connection, label: &amp;FinalLabel) <span class="hljs-punctuation">-&gt;</span> anyhow::<span class="hljs-type">Result</span>&lt;()&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">reasons_json</span> = serde_json::<span class="hljs-title function_ invoke__">to_string</span>(&amp;label.reasons)?;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">signals_json</span> = serde_json::<span class="hljs-title function_ invoke__">to_string</span>(&amp;label.signals)?;
    conn.<span class="hljs-title function_ invoke__">execute</span>(
        <span class="hljs-string">r#"INSERT INTO labels (
            message_id, industry, type,
            brand, verification_code, amount, balance, account_suffix, time_text, url, phone_in_text,
            confidence, reasons_json, signals_json, needs_review,
            rules_version, model_version, schema_version, updated_at
        ) VALUES (
            ?1, ?2, ?3,
            ?4, ?5, ?6, ?7, ?8, ?9, ?10, ?11,
            ?12, ?13, ?14, ?15,
            ?16, ?17, ?18, datetime('now')
        )
        ON CONFLICT(message_id) DO UPDATE SET
            industry=excluded.industry,
            type=excluded.type,
            brand=excluded.brand,
            verification_code=excluded.verification_code,
            amount=excluded.amount,
            balance=excluded.balance,
            account_suffix=excluded.account_suffix,
            time_text=excluded.time_text,
            url=excluded.url,
            phone_in_text=excluded.phone_in_text,
            confidence=excluded.confidence,
            reasons_json=excluded.reasons_json,
            signals_json=excluded.signals_json,
            needs_review=excluded.needs_review,
            rules_version=excluded.rules_version,
            model_version=excluded.model_version,
            schema_version=excluded.schema_version,
            updated_at=datetime('now')"#</span>,
        params![
            label.message_id,
            <span class="hljs-title function_ invoke__">industry_to_str</span>(&amp;label.industry),
            <span class="hljs-title function_ invoke__">type_to_str</span>(&amp;label.sms_type),
            label.entities.brand,
            label.entities.verification_code,
            label.entities.amount,
            label.entities.balance,
            label.entities.account_suffix,
            label.entities.time_text,
            label.entities.url,
            label.entities.phone_in_text,
            label.confidence,
            reasons_json,
            signals_json,
            <span class="hljs-keyword">if</span> label.needs_review { <span class="hljs-number">1</span> } <span class="hljs-keyword">else</span> { <span class="hljs-number">0</span> },
            label.rules_version,
            label.model_version,
            label.schema_version,
        ],
    )?;
    <span class="hljs-title function_ invoke__">Ok</span>(())
}

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_label_json</span>(conn: &amp;Connection, message_id: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> anyhow::<span class="hljs-type">Result</span>&lt;<span class="hljs-type">Option</span>&lt;Value&gt;&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">stmt</span> = conn.<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-string">r#"SELECT
        industry, type, brand, verification_code, amount, balance, account_suffix, time_text, url, phone_in_text,
        confidence, reasons_json, signals_json, needs_review, rules_version, model_version, schema_version
      FROM labels WHERE message_id=?1"#</span>)?;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">rows</span> = stmt.<span class="hljs-title function_ invoke__">query</span>(params![message_id])?;
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(r) = rows.<span class="hljs-title function_ invoke__">next</span>()? {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">reasons_json</span>: <span class="hljs-type">String</span> = r.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-number">11</span>)?;
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">signals_json</span>: <span class="hljs-type">String</span> = r.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-number">12</span>)?;
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">v</span> = serde_json::json!({
          <span class="hljs-string">"message_id"</span>: message_id,
          <span class="hljs-string">"industry"</span>: r.get::&lt;_, <span class="hljs-type">String</span>&gt;(<span class="hljs-number">0</span>)?,
          <span class="hljs-string">"type"</span>: r.get::&lt;_, <span class="hljs-type">String</span>&gt;(<span class="hljs-number">1</span>)?,
          <span class="hljs-string">"entities"</span>: {
            <span class="hljs-string">"brand"</span>: r.get::&lt;_, <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;&gt;(<span class="hljs-number">2</span>)?,
            <span class="hljs-string">"verification_code"</span>: r.get::&lt;_, <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;&gt;(<span class="hljs-number">3</span>)?,
            <span class="hljs-string">"amount"</span>: r.get::&lt;_, <span class="hljs-type">Option</span>&lt;<span class="hljs-type">f64</span>&gt;&gt;(<span class="hljs-number">4</span>)?,
            <span class="hljs-string">"balance"</span>: r.get::&lt;_, <span class="hljs-type">Option</span>&lt;<span class="hljs-type">f64</span>&gt;&gt;(<span class="hljs-number">5</span>)?,
            <span class="hljs-string">"account_suffix"</span>: r.get::&lt;_, <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;&gt;(<span class="hljs-number">6</span>)?,
            <span class="hljs-string">"time_text"</span>: r.get::&lt;_, <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;&gt;(<span class="hljs-number">7</span>)?,
            <span class="hljs-string">"url"</span>: r.get::&lt;_, <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;&gt;(<span class="hljs-number">8</span>)?,
            <span class="hljs-string">"phone_in_text"</span>: r.get::&lt;_, <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;&gt;(<span class="hljs-number">9</span>)?,
          },
          <span class="hljs-string">"confidence"</span>: r.get::&lt;_, <span class="hljs-type">f64</span>&gt;(<span class="hljs-number">10</span>)?,
          <span class="hljs-string">"reasons"</span>: serde_json::from_str::&lt;Value&gt;(&amp;reasons_json).<span class="hljs-title function_ invoke__">unwrap_or</span>(Value::<span class="hljs-title function_ invoke__">Array</span>(<span class="hljs-built_in">vec!</span>[])),
          <span class="hljs-string">"signals"</span>: serde_json::from_str::&lt;Value&gt;(&amp;signals_json).<span class="hljs-title function_ invoke__">unwrap_or</span>(Value::<span class="hljs-title function_ invoke__">Object</span>(<span class="hljs-built_in">Default</span>::<span class="hljs-title function_ invoke__">default</span>())),
          <span class="hljs-string">"needs_review"</span>: r.get::&lt;_, <span class="hljs-type">i64</span>&gt;(<span class="hljs-number">13</span>)? == <span class="hljs-number">1</span>,
          <span class="hljs-string">"rules_version"</span>: r.get::&lt;_, <span class="hljs-type">String</span>&gt;(<span class="hljs-number">14</span>)?,
          <span class="hljs-string">"model_version"</span>: r.get::&lt;_, <span class="hljs-type">String</span>&gt;(<span class="hljs-number">15</span>)?,
          <span class="hljs-string">"schema_version"</span>: r.get::&lt;_, <span class="hljs-type">String</span>&gt;(<span class="hljs-number">16</span>)?,
        });
        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Ok</span>(<span class="hljs-title function_ invoke__">Some</span>(v));
    }
    <span class="hljs-title function_ invoke__">Ok</span>(<span class="hljs-literal">None</span>)
}

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">insert_audit_log</span>(conn: &amp;Connection, message_id: &amp;<span class="hljs-type">str</span>, operator: &amp;<span class="hljs-type">str</span>, before_json: &amp;Value, after_json: &amp;Value) <span class="hljs-punctuation">-&gt;</span> anyhow::<span class="hljs-type">Result</span>&lt;()&gt; {
    conn.<span class="hljs-title function_ invoke__">execute</span>(
        <span class="hljs-string">r#"INSERT INTO audit_logs (message_id, operator, before_json, after_json)
           VALUES (?1, ?2, ?3, ?4)"#</span>,
        params![
            message_id,
            operator,
            before_json.<span class="hljs-title function_ invoke__">to_string</span>(),
            after_json.<span class="hljs-title function_ invoke__">to_string</span>()
        ],
    )?;
    <span class="hljs-title function_ invoke__">Ok</span>(())
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">industry_to_str</span>(i: &amp;Industry) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-symbol">'static</span> <span class="hljs-type">str</span> {
    <span class="hljs-keyword">match</span> i {
        Industry::Finance =&gt; <span class="hljs-string">"é‡‘è"</span>,
        Industry::General =&gt; <span class="hljs-string">"é€šç”¨"</span>,
        Industry::Gov =&gt; <span class="hljs-string">"æ”¿åŠ¡"</span>,
        Industry::Channel =&gt; <span class="hljs-string">"æ¸ é“"</span>,
        Industry::Internet =&gt; <span class="hljs-string">"äº’è”ç½‘"</span>,
        Industry::Other =&gt; <span class="hljs-string">"å…¶ä»–"</span>,
    }
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">type_to_str</span>(t: &amp;SmsType) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-symbol">'static</span> <span class="hljs-type">str</span> {
    <span class="hljs-keyword">match</span> t {
        SmsType::Otp =&gt; <span class="hljs-string">"éªŒè¯ç "</span>,
        SmsType::Transaction =&gt; <span class="hljs-string">"äº¤æ˜“æé†’"</span>,
        SmsType::BillCollect =&gt; <span class="hljs-string">"è´¦å•å‚¬ç¼´"</span>,
        SmsType::InsuranceRenew =&gt; <span class="hljs-string">"ä¿é™©ç»­ä¿"</span>,
        SmsType::LogisticsPickup =&gt; <span class="hljs-string">"ç‰©æµå–ä»¶"</span>,
        SmsType::AccountChange =&gt; <span class="hljs-string">"ä¼šå‘˜è´¦å·å˜æ›´"</span>,
        SmsType::GovNotice =&gt; <span class="hljs-string">"æ”¿åŠ¡é€šçŸ¥"</span>,
        SmsType::RiskAlert =&gt; <span class="hljs-string">"é£é™©æç¤º"</span>,
        SmsType::Marketing =&gt; <span class="hljs-string">"è¥é”€æ¨å¹¿"</span>,
        SmsType::Other =&gt; <span class="hljs-string">"å…¶ä»–"</span>,
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-27">7) æ‰¹å¤„ç†é˜Ÿåˆ—ï¼ˆå¹¶å‘/è¶…æ—¶/é‡è¯•/ä¸å¡ UIï¼‰+ Tauri Commands</h3>
<h4 data-id="heading-28"><code>src-tauri/src/batch/worker.rs</code></h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::sync::{Arc, Mutex};
<span class="hljs-keyword">use</span> tokio::sync::mpsc;
<span class="hljs-keyword">use</span> serde_json::Value;

<span class="hljs-keyword">use</span> crate::{db, rules, providers::provider::{Provider, ClassifyPayload}, fusion};
<span class="hljs-keyword">use</span> crate::infra::log::append_error_log;

<span class="hljs-meta">#[derive(Debug, Clone)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">BatchOptions</span> {
    <span class="hljs-keyword">pub</span> only_unlabeled: <span class="hljs-type">bool</span>,
    <span class="hljs-keyword">pub</span> only_needs_review: <span class="hljs-type">bool</span>,
    <span class="hljs-keyword">pub</span> max_retries: <span class="hljs-type">u8</span>,
}

<span class="hljs-meta">#[derive(Debug, Clone)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">BatchProgress</span> {
    <span class="hljs-keyword">pub</span> total: <span class="hljs-type">usize</span>,
    <span class="hljs-keyword">pub</span> done: <span class="hljs-type">usize</span>,
    <span class="hljs-keyword">pub</span> failed: <span class="hljs-type">usize</span>,
    <span class="hljs-keyword">pub</span> current_id: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;,
}

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">BatchState</span> {
    <span class="hljs-keyword">pub</span> running: <span class="hljs-type">bool</span>,
    <span class="hljs-keyword">pub</span> progress: BatchProgress,
}

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">SharedBatchState</span> = Arc&lt;Mutex&lt;BatchState&gt;&gt;;

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">run_batch</span>(
    app: tauri::AppHandle,
    provider: Arc&lt;<span class="hljs-keyword">dyn</span> Provider&gt;,
    message_ids: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt;,
    options: BatchOptions,
    state: SharedBatchState,
) <span class="hljs-punctuation">-&gt;</span> anyhow::<span class="hljs-type">Result</span>&lt;()&gt; {
    {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = state.<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
        s.running = <span class="hljs-literal">true</span>;
        s.progress = BatchProgress { total: message_ids.<span class="hljs-title function_ invoke__">len</span>(), done: <span class="hljs-number">0</span>, failed: <span class="hljs-number">0</span>, current_id: <span class="hljs-literal">None</span> };
    }

    <span class="hljs-keyword">let</span> (tx, <span class="hljs-keyword">mut</span> rx) = mpsc::channel::&lt;(<span class="hljs-type">String</span>, anyhow::<span class="hljs-type">Result</span>&lt;Value&gt;)&gt;(<span class="hljs-number">64</span>);

    <span class="hljs-comment">// worker producerï¼šå¹¶å‘æŠ•é€’ï¼Œæ¯æ¡çŸ­ä¿¡ç‹¬ç«‹é‡è¯•</span>
    <span class="hljs-keyword">for</span> <span class="hljs-variable">id</span> <span class="hljs-keyword">in</span> message_ids.<span class="hljs-title function_ invoke__">clone</span>() {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">txc</span> = tx.<span class="hljs-title function_ invoke__">clone</span>();
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">prov</span> = provider.<span class="hljs-title function_ invoke__">clone</span>();
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">appc</span> = app.<span class="hljs-title function_ invoke__">clone</span>();
        tokio::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">async</span> <span class="hljs-keyword">move</span> {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">res</span> = <span class="hljs-title function_ invoke__">process_one</span>(appc, prov, &amp;id, &amp;options).<span class="hljs-keyword">await</span>;
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = txc.<span class="hljs-title function_ invoke__">send</span>((id, res)).<span class="hljs-keyword">await</span>;
        });
    }
    <span class="hljs-title function_ invoke__">drop</span>(tx);

    <span class="hljs-keyword">while</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>((id, res)) = rx.<span class="hljs-title function_ invoke__">recv</span>().<span class="hljs-keyword">await</span> {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">emit_payload</span> = serde_json::json!({<span class="hljs-string">"id"</span>: id, <span class="hljs-string">"ok"</span>: <span class="hljs-literal">true</span>});
        <span class="hljs-keyword">match</span> res {
            <span class="hljs-title function_ invoke__">Ok</span>(label_json) =&gt; {
                emit_payload[<span class="hljs-string">"label"</span>] = label_json;
                <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = state.<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
                s.progress.done += <span class="hljs-number">1</span>;
                s.progress.current_id = <span class="hljs-literal">None</span>;
            }
            <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; {
                <span class="hljs-title function_ invoke__">append_error_log</span>(<span class="hljs-built_in">format!</span>(<span class="hljs-string">"batch item failed id={} err={}"</span>, id, e)).<span class="hljs-title function_ invoke__">ok</span>();
                emit_payload[<span class="hljs-string">"ok"</span>] = serde_json::json!(<span class="hljs-literal">false</span>);
                emit_payload[<span class="hljs-string">"error"</span>] = serde_json::json!(e.<span class="hljs-title function_ invoke__">to_string</span>());
                <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = state.<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
                s.progress.failed += <span class="hljs-number">1</span>;
                s.progress.done += <span class="hljs-number">1</span>;
                s.progress.current_id = <span class="hljs-literal">None</span>;
            }
        }

        <span class="hljs-comment">// æ¨é€è¿›åº¦åˆ°å‰ç«¯</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s</span> = state.<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-title function_ invoke__">unwrap</span>().progress.<span class="hljs-title function_ invoke__">clone</span>();
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = app.<span class="hljs-title function_ invoke__">emit_all</span>(<span class="hljs-string">"batch_progress"</span>, serde_json::json!({
            <span class="hljs-string">"total"</span>: s.total,
            <span class="hljs-string">"done"</span>: s.done,
            <span class="hljs-string">"failed"</span>: s.failed,
            <span class="hljs-string">"current_id"</span>: s.current_id,
            <span class="hljs-string">"event"</span>: emit_payload
        }));
    }

    {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = state.<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
        s.running = <span class="hljs-literal">false</span>;
    }
    <span class="hljs-title function_ invoke__">Ok</span>(())
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">process_one</span>(
    _app: tauri::AppHandle,
    provider: Arc&lt;<span class="hljs-keyword">dyn</span> Provider&gt;,
    message_id: &amp;<span class="hljs-type">str</span>,
    options: &amp;BatchOptions,
) <span class="hljs-punctuation">-&gt;</span> anyhow::<span class="hljs-type">Result</span>&lt;Value&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">conn</span> = db::<span class="hljs-title function_ invoke__">connect</span>()?;
    db::<span class="hljs-title function_ invoke__">migrate</span>(&amp;conn)?;

    <span class="hljs-comment">// æŸ¥è¯¢ content</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">stmt</span> = conn.<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-string">"SELECT content FROM messages WHERE id=?1"</span>)?;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">content</span>: <span class="hljs-type">String</span> = stmt.<span class="hljs-title function_ invoke__">query_row</span>([message_id], |r| r.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-number">0</span>))?;

    <span class="hljs-comment">// è¿‡æ»¤ï¼šonly_unlabeled / only_needs_review</span>
    <span class="hljs-keyword">if</span> options.only_unlabeled {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s2</span> = conn.<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-string">"SELECT COUNT(1) FROM labels WHERE message_id=?1"</span>)?;
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">cnt</span>: <span class="hljs-type">i64</span> = s2.<span class="hljs-title function_ invoke__">query_row</span>([message_id], |r| r.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-number">0</span>))?;
        <span class="hljs-keyword">if</span> cnt &gt; <span class="hljs-number">0</span> { <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Ok</span>(serde_json::json!({<span class="hljs-string">"skipped"</span>: <span class="hljs-literal">true</span>})); }
    }
    <span class="hljs-keyword">if</span> options.only_needs_review {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s3</span> = conn.<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-string">"SELECT needs_review FROM labels WHERE message_id=?1"</span>)?;
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">v</span> = s3.<span class="hljs-title function_ invoke__">query_row</span>([message_id], |r| r.get::&lt;_, <span class="hljs-type">i64</span>&gt;(<span class="hljs-number">0</span>)).<span class="hljs-title function_ invoke__">ok</span>();
        <span class="hljs-keyword">if</span> v != <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-number">1</span>) { <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Ok</span>(serde_json::json!({<span class="hljs-string">"skipped"</span>: <span class="hljs-literal">true</span>})); }
    }

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">rule</span> = rules::rule_engine::<span class="hljs-title function_ invoke__">apply_rules</span>(&amp;content);

    <span class="hljs-comment">// è§„åˆ™å¼ºå‘½ä¸­ï¼šç›´æ¥èåˆï¼ˆrule_onlyï¼‰</span>
    <span class="hljs-keyword">if</span> rule.hit &amp;&amp; rule.industry.<span class="hljs-title function_ invoke__">is_some</span>() &amp;&amp; rule.sms_type.<span class="hljs-title function_ invoke__">is_some</span>() {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">final_label</span> = fusion::decision::<span class="hljs-title function_ invoke__">fuse</span>(message_id, &amp;rule, <span class="hljs-literal">None</span>);
        crate::db::dao::<span class="hljs-title function_ invoke__">upsert_label</span>(&amp;conn, &amp;final_label)?;
        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Ok</span>(crate::db::dao::<span class="hljs-title function_ invoke__">get_label_json</span>(&amp;conn, message_id)?.<span class="hljs-title function_ invoke__">unwrap</span>());
    }

    <span class="hljs-comment">// æ¨¡å‹å±‚ï¼šé‡è¯•</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">last_err</span>: <span class="hljs-type">Option</span>&lt;anyhow::Error&gt; = <span class="hljs-literal">None</span>;
    <span class="hljs-keyword">for</span> <span class="hljs-variable">_</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..=options.max_retries {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">payload</span> = ClassifyPayload {
            message_id: message_id.<span class="hljs-title function_ invoke__">to_string</span>(),
            content: content.<span class="hljs-title function_ invoke__">clone</span>(),
            rule: rule.<span class="hljs-title function_ invoke__">clone</span>(),
            schema_version: crate::domain::schema::SCHEMA_VERSION.<span class="hljs-title function_ invoke__">to_string</span>(),
            rules_version: crate::domain::schema::RULES_VERSION.<span class="hljs-title function_ invoke__">to_string</span>(),
        };
        <span class="hljs-keyword">match</span> provider.<span class="hljs-title function_ invoke__">classify</span>(payload).<span class="hljs-keyword">await</span> {
            <span class="hljs-title function_ invoke__">Ok</span>(mo) =&gt; {
                <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">final_label</span> = fusion::decision::<span class="hljs-title function_ invoke__">fuse</span>(message_id, &amp;rule, <span class="hljs-title function_ invoke__">Some</span>(&amp;mo));
                crate::db::dao::<span class="hljs-title function_ invoke__">upsert_label</span>(&amp;conn, &amp;final_label)?;
                <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Ok</span>(crate::db::dao::<span class="hljs-title function_ invoke__">get_label_json</span>(&amp;conn, message_id)?.<span class="hljs-title function_ invoke__">unwrap</span>());
            }
            <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; last_err = <span class="hljs-title function_ invoke__">Some</span>(e),
        }
    }
    <span class="hljs-title function_ invoke__">Err</span>(last_err.<span class="hljs-title function_ invoke__">unwrap_or_else</span>(|| anyhow::anyhow!(<span class="hljs-string">"unknown classify error"</span>)))
}
</code></pre>
<h4 data-id="heading-29"><code>src-tauri/src/commands.rs</code></h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::{path::PathBuf, sync::{Arc, Mutex}};
<span class="hljs-keyword">use</span> serde::{Deserialize, Serialize};
<span class="hljs-keyword">use</span> serde_json::Value;

<span class="hljs-keyword">use</span> crate::{db, db::dao::{MessageRow, upsert_messages, get_label_json, insert_audit_log}, providers::llama_cpp::LlamaCppProvider, providers::provider::Provider, batch::{worker, worker::{SharedBatchState, BatchState, BatchOptions}}};

<span class="hljs-meta">#[derive(Debug, Deserialize)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ImportRequest</span> {
    <span class="hljs-keyword">pub</span> rows: <span class="hljs-type">Vec</span>&lt;MessageRowReq&gt;,
}

<span class="hljs-meta">#[derive(Debug, Deserialize)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">MessageRowReq</span> {
    <span class="hljs-keyword">pub</span> id: <span class="hljs-type">String</span>,
    <span class="hljs-keyword">pub</span> content: <span class="hljs-type">String</span>,
    <span class="hljs-keyword">pub</span> received_at: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;,
    <span class="hljs-keyword">pub</span> sender: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;,
    <span class="hljs-keyword">pub</span> phone: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;,
    <span class="hljs-keyword">pub</span> source: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;,
}

<span class="hljs-meta">#[derive(Debug, Serialize)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ImportResponse</span> {
    <span class="hljs-keyword">pub</span> inserted: <span class="hljs-type">usize</span>,
}

<span class="hljs-meta">#[tauri::command]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">db_init</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), <span class="hljs-type">String</span>&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">conn</span> = db::<span class="hljs-title function_ invoke__">connect</span>().<span class="hljs-title function_ invoke__">map_err</span>(|e| e.<span class="hljs-title function_ invoke__">to_string</span>())?;
    db::<span class="hljs-title function_ invoke__">migrate</span>(&amp;conn).<span class="hljs-title function_ invoke__">map_err</span>(|e| e.<span class="hljs-title function_ invoke__">to_string</span>())?;
    <span class="hljs-title function_ invoke__">Ok</span>(())
}

<span class="hljs-meta">#[tauri::command]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">import_messages</span>(req: ImportRequest) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;ImportResponse, <span class="hljs-type">String</span>&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">conn</span> = db::<span class="hljs-title function_ invoke__">connect</span>().<span class="hljs-title function_ invoke__">map_err</span>(|e| e.<span class="hljs-title function_ invoke__">to_string</span>())?;
    db::<span class="hljs-title function_ invoke__">migrate</span>(&amp;conn).<span class="hljs-title function_ invoke__">map_err</span>(|e| e.<span class="hljs-title function_ invoke__">to_string</span>())?;

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">rows</span>: <span class="hljs-type">Vec</span>&lt;MessageRow&gt; = req.rows.<span class="hljs-title function_ invoke__">into_iter</span>().<span class="hljs-title function_ invoke__">map</span>(|r| MessageRow {
        id: r.id,
        content: r.content,
        received_at: r.received_at,
        sender: r.sender,
        phone: r.phone,
        source: r.source,
    }).<span class="hljs-title function_ invoke__">collect</span>();

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">inserted</span> = <span class="hljs-title function_ invoke__">upsert_messages</span>(&amp;conn, &amp;rows).<span class="hljs-title function_ invoke__">map_err</span>(|e| e.<span class="hljs-title function_ invoke__">to_string</span>())?;
    <span class="hljs-title function_ invoke__">Ok</span>(ImportResponse { inserted })
}

<span class="hljs-meta">#[tauri::command]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_label</span>(message_id: <span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">Option</span>&lt;Value&gt;, <span class="hljs-type">String</span>&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">conn</span> = db::<span class="hljs-title function_ invoke__">connect</span>().<span class="hljs-title function_ invoke__">map_err</span>(|e| e.<span class="hljs-title function_ invoke__">to_string</span>())?;
    db::<span class="hljs-title function_ invoke__">migrate</span>(&amp;conn).<span class="hljs-title function_ invoke__">map_err</span>(|e| e.<span class="hljs-title function_ invoke__">to_string</span>())?;
    <span class="hljs-title function_ invoke__">get_label_json</span>(&amp;conn, &amp;message_id).<span class="hljs-title function_ invoke__">map_err</span>(|e| e.<span class="hljs-title function_ invoke__">to_string</span>())
}

<span class="hljs-meta">#[derive(Debug, Deserialize)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">SaveReviewRequest</span> {
    <span class="hljs-keyword">pub</span> message_id: <span class="hljs-type">String</span>,
    <span class="hljs-keyword">pub</span> operator: <span class="hljs-type">String</span>,
    <span class="hljs-keyword">pub</span> after: Value,
}

<span class="hljs-meta">#[tauri::command]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">save_review</span>(req: SaveReviewRequest) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), <span class="hljs-type">String</span>&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">conn</span> = db::<span class="hljs-title function_ invoke__">connect</span>().<span class="hljs-title function_ invoke__">map_err</span>(|e| e.<span class="hljs-title function_ invoke__">to_string</span>())?;
    db::<span class="hljs-title function_ invoke__">migrate</span>(&amp;conn).<span class="hljs-title function_ invoke__">map_err</span>(|e| e.<span class="hljs-title function_ invoke__">to_string</span>())?;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">before</span> = <span class="hljs-title function_ invoke__">get_label_json</span>(&amp;conn, &amp;req.message_id).<span class="hljs-title function_ invoke__">map_err</span>(|e| e.<span class="hljs-title function_ invoke__">to_string</span>())?
        .<span class="hljs-title function_ invoke__">unwrap_or</span>(Value::Null);

    <span class="hljs-comment">// ç›´æ¥å†™ labelsï¼šè¿™é‡Œå¤ç”¨ JSON å†™å…¥ç­–ç•¥ï¼ˆç®€åŒ–ï¼šå‰ç«¯ä¼ å­—æ®µé½å…¨ï¼‰</span>
    <span class="hljs-comment">// ç”Ÿäº§ç‰ˆå¯æ”¹ä¸ºç»“æ„ä½“ååºåˆ—åŒ–ï¼Œè¿›ä¸€æ­¥å¼ºæ ¡éªŒ</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">a</span> = &amp;req.after;
    conn.<span class="hljs-title function_ invoke__">execute</span>(
        <span class="hljs-string">r#"INSERT INTO labels (
            message_id, industry, type,
            brand, verification_code, amount, balance, account_suffix, time_text, url, phone_in_text,
            confidence, reasons_json, signals_json, needs_review,
            rules_version, model_version, schema_version, updated_at
        ) VALUES (?1, ?2, ?3, ?4, ?5, ?6, ?7, ?8, ?9, ?10, ?11, ?12, ?13, ?14, ?15, ?16, ?17, ?18, datetime('now'))
        ON CONFLICT(message_id) DO UPDATE SET
            industry=excluded.industry,
            type=excluded.type,
            brand=excluded.brand,
            verification_code=excluded.verification_code,
            amount=excluded.amount,
            balance=excluded.balance,
            account_suffix=excluded.account_suffix,
            time_text=excluded.time_text,
            url=excluded.url,
            phone_in_text=excluded.phone_in_text,
            confidence=excluded.confidence,
            reasons_json=excluded.reasons_json,
            signals_json=excluded.signals_json,
            needs_review=excluded.needs_review,
            rules_version=excluded.rules_version,
            model_version=excluded.model_version,
            schema_version=excluded.schema_version,
            updated_at=datetime('now')"#</span>,
        rusqlite::params![
            req.message_id,
            a[<span class="hljs-string">"industry"</span>].<span class="hljs-title function_ invoke__">as_str</span>().<span class="hljs-title function_ invoke__">unwrap_or</span>(<span class="hljs-string">"å…¶ä»–"</span>),
            a[<span class="hljs-string">"type"</span>].<span class="hljs-title function_ invoke__">as_str</span>().<span class="hljs-title function_ invoke__">unwrap_or</span>(<span class="hljs-string">"å…¶ä»–"</span>),
            a[<span class="hljs-string">"entities"</span>][<span class="hljs-string">"brand"</span>].<span class="hljs-title function_ invoke__">as_str</span>(),
            a[<span class="hljs-string">"entities"</span>][<span class="hljs-string">"verification_code"</span>].<span class="hljs-title function_ invoke__">as_str</span>(),
            a[<span class="hljs-string">"entities"</span>][<span class="hljs-string">"amount"</span>].<span class="hljs-title function_ invoke__">as_f64</span>(),
            a[<span class="hljs-string">"entities"</span>][<span class="hljs-string">"balance"</span>].<span class="hljs-title function_ invoke__">as_f64</span>(),
            a[<span class="hljs-string">"entities"</span>][<span class="hljs-string">"account_suffix"</span>].<span class="hljs-title function_ invoke__">as_str</span>(),
            a[<span class="hljs-string">"entities"</span>][<span class="hljs-string">"time_text"</span>].<span class="hljs-title function_ invoke__">as_str</span>(),
            a[<span class="hljs-string">"entities"</span>][<span class="hljs-string">"url"</span>].<span class="hljs-title function_ invoke__">as_str</span>(),
            a[<span class="hljs-string">"entities"</span>][<span class="hljs-string">"phone_in_text"</span>].<span class="hljs-title function_ invoke__">as_str</span>(),
            a[<span class="hljs-string">"confidence"</span>].<span class="hljs-title function_ invoke__">as_f64</span>().<span class="hljs-title function_ invoke__">unwrap_or</span>(<span class="hljs-number">0.5</span>),
            a[<span class="hljs-string">"reasons"</span>].<span class="hljs-title function_ invoke__">to_string</span>(),
            a[<span class="hljs-string">"signals"</span>].<span class="hljs-title function_ invoke__">to_string</span>(),
            <span class="hljs-keyword">if</span> a[<span class="hljs-string">"needs_review"</span>].<span class="hljs-title function_ invoke__">as_bool</span>().<span class="hljs-title function_ invoke__">unwrap_or</span>(<span class="hljs-literal">false</span>) { <span class="hljs-number">1</span> } <span class="hljs-keyword">else</span> { <span class="hljs-number">0</span> },
            a[<span class="hljs-string">"rules_version"</span>].<span class="hljs-title function_ invoke__">as_str</span>().<span class="hljs-title function_ invoke__">unwrap_or</span>(<span class="hljs-string">"1.0.0"</span>),
            a[<span class="hljs-string">"model_version"</span>].<span class="hljs-title function_ invoke__">as_str</span>().<span class="hljs-title function_ invoke__">unwrap_or</span>(<span class="hljs-string">"manual"</span>),
            a[<span class="hljs-string">"schema_version"</span>].<span class="hljs-title function_ invoke__">as_str</span>().<span class="hljs-title function_ invoke__">unwrap_or</span>(<span class="hljs-string">"1.0.0"</span>),
        ],
    ).<span class="hljs-title function_ invoke__">map_err</span>(|e| e.<span class="hljs-title function_ invoke__">to_string</span>())?;

    <span class="hljs-title function_ invoke__">insert_audit_log</span>(&amp;conn, &amp;req.message_id, &amp;req.operator, &amp;before, &amp;req.after).<span class="hljs-title function_ invoke__">map_err</span>(|e| e.<span class="hljs-title function_ invoke__">to_string</span>())?;
    <span class="hljs-title function_ invoke__">Ok</span>(())
}

<span class="hljs-meta">#[derive(Debug, Deserialize)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ProviderConfig</span> {
    <span class="hljs-keyword">pub</span> sidecar_path: <span class="hljs-type">String</span>,
    <span class="hljs-keyword">pub</span> model_path: <span class="hljs-type">String</span>,
    <span class="hljs-keyword">pub</span> threads: <span class="hljs-type">u32</span>,
    <span class="hljs-keyword">pub</span> max_concurrency: <span class="hljs-type">usize</span>,
    <span class="hljs-keyword">pub</span> timeout_ms: <span class="hljs-type">u64</span>,
}

<span class="hljs-meta">#[tauri::command]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">start_batch</span>(
    app: tauri::AppHandle,
    provider_cfg: ProviderConfig,
    message_ids: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt;,
    only_unlabeled: <span class="hljs-type">bool</span>,
    only_needs_review: <span class="hljs-type">bool</span>,
) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), <span class="hljs-type">String</span>&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">provider</span> = LlamaCppProvider::<span class="hljs-title function_ invoke__">new</span>(
        PathBuf::<span class="hljs-title function_ invoke__">from</span>(provider_cfg.sidecar_path),
        PathBuf::<span class="hljs-title function_ invoke__">from</span>(provider_cfg.model_path),
        provider_cfg.threads,
        provider_cfg.max_concurrency,
        provider_cfg.timeout_ms,
    );
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">provider_arc</span>: Arc&lt;<span class="hljs-keyword">dyn</span> Provider&gt; = Arc::<span class="hljs-title function_ invoke__">new</span>(provider);

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">state</span>: SharedBatchState = app.state::&lt;SharedBatchState&gt;().<span class="hljs-title function_ invoke__">inner</span>().<span class="hljs-title function_ invoke__">clone</span>();

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">opts</span> = BatchOptions {
        only_unlabeled,
        only_needs_review,
        max_retries: <span class="hljs-number">1</span>,
    };

    worker::<span class="hljs-title function_ invoke__">run_batch</span>(app, provider_arc, message_ids, opts, state)
        .<span class="hljs-keyword">await</span>
        .<span class="hljs-title function_ invoke__">map_err</span>(|e| e.<span class="hljs-title function_ invoke__">to_string</span>())
}
</code></pre>
<h4 data-id="heading-30"><code>src-tauri/src/main.rs</code></h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#![cfg_attr(not(debug_assertions), windows_subsystem = <span class="hljs-string">"windows"</span>)]</span>

<span class="hljs-keyword">mod</span> commands;
<span class="hljs-keyword">mod</span> domain;
<span class="hljs-keyword">mod</span> infra;
<span class="hljs-keyword">mod</span> db;
<span class="hljs-keyword">mod</span> rules;
<span class="hljs-keyword">mod</span> providers;
<span class="hljs-keyword">mod</span> fusion;
<span class="hljs-keyword">mod</span> batch;

<span class="hljs-keyword">use</span> std::sync::{Arc, Mutex};
<span class="hljs-keyword">use</span> batch::worker::{SharedBatchState, BatchState, BatchProgress};

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">initial_state</span>: SharedBatchState = Arc::<span class="hljs-title function_ invoke__">new</span>(Mutex::<span class="hljs-title function_ invoke__">new</span>(BatchState {
        running: <span class="hljs-literal">false</span>,
        progress: BatchProgress { total: <span class="hljs-number">0</span>, done: <span class="hljs-number">0</span>, failed: <span class="hljs-number">0</span>, current_id: <span class="hljs-literal">None</span> },
    }));

    tauri::Builder::<span class="hljs-title function_ invoke__">default</span>()
        .<span class="hljs-title function_ invoke__">manage</span>(initial_state)
        .<span class="hljs-title function_ invoke__">invoke_handler</span>(tauri::generate_handler![
            commands::db_init,
            commands::import_messages,
            commands::get_label,
            commands::save_review,
            commands::start_batch,
        ])
        .<span class="hljs-title function_ invoke__">run</span>(tauri::generate_context!())
        .<span class="hljs-title function_ invoke__">expect</span>(<span class="hljs-string">"error while running tauri application"</span>);
}
</code></pre>
<h4 data-id="heading-31"><code>src-tauri/Cargo.toml</code></h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[package]</span>
<span class="hljs-attr">name</span> = <span class="hljs-string">"sms-tagging-officer"</span>
<span class="hljs-attr">version</span> = <span class="hljs-string">"0.1.0"</span>
<span class="hljs-attr">edition</span> = <span class="hljs-string">"2021"</span>

<span class="hljs-section">[build-dependencies]</span>
<span class="hljs-attr">tauri-build</span> = { version = <span class="hljs-string">"1.5"</span>, features = [] }

<span class="hljs-section">[dependencies]</span>
<span class="hljs-attr">tauri</span> = { version = <span class="hljs-string">"1.5"</span>, features = [<span class="hljs-string">"path-all"</span>, <span class="hljs-string">"fs-all"</span>, <span class="hljs-string">"shell-open"</span>] }
<span class="hljs-attr">serde</span> = { version = <span class="hljs-string">"1.0"</span>, features = [<span class="hljs-string">"derive"</span>] }
<span class="hljs-attr">serde_json</span> = <span class="hljs-string">"1.0"</span>
<span class="hljs-attr">rusqlite</span> = { version = <span class="hljs-string">"0.31"</span>, features = [<span class="hljs-string">"bundled"</span>] }
<span class="hljs-attr">tokio</span> = { version = <span class="hljs-string">"1.35"</span>, features = [<span class="hljs-string">"rt-multi-thread"</span>, <span class="hljs-string">"macros"</span>, <span class="hljs-string">"time"</span>, <span class="hljs-string">"process"</span>, <span class="hljs-string">"sync"</span>] }
<span class="hljs-attr">anyhow</span> = <span class="hljs-string">"1.0"</span>
<span class="hljs-attr">regex</span> = <span class="hljs-string">"1.10"</span>
<span class="hljs-attr">async-trait</span> = <span class="hljs-string">"0.1"</span>
</code></pre>
<hr/>
<h3 data-id="heading-32">8) å‰ç«¯é¡µé¢ä¸æ ¸å¿ƒç»„ä»¶ï¼ˆå¯¼å…¥ / æ‰¹å¤„ç† / åˆ—è¡¨è¿‡æ»¤ / å¤æ ¸æŠ½å±‰ / å¯¼å‡º / è®¾ç½®ï¼‰</h3>
<h4 data-id="heading-33"><code>apps/desktop/src/api/tauri.ts</code></h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { invoke } <span class="hljs-keyword">from</span> <span class="hljs-string">"@tauri-apps/api/tauri"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">LabelResult</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./schema"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">dbInit</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> invoke&lt;<span class="hljs-built_in">void</span>&gt;(<span class="hljs-string">"db_init"</span>);
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">importMessages</span>(<span class="hljs-params">rows: <span class="hljs-built_in">any</span>[]</span>) {
  <span class="hljs-keyword">return</span> invoke&lt;{ <span class="hljs-attr">inserted</span>: <span class="hljs-built_in">number</span> }&gt;(<span class="hljs-string">"import_messages"</span>, { <span class="hljs-attr">req</span>: { rows } });
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getLabel</span>(<span class="hljs-params">messageId: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">return</span> invoke&lt;<span class="hljs-title class_">LabelResult</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-string">"get_label"</span>, { messageId });
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">saveReview</span>(<span class="hljs-params">payload: { message_id: <span class="hljs-built_in">string</span>; operator: <span class="hljs-built_in">string</span>; after: <span class="hljs-built_in">any</span> }</span>) {
  <span class="hljs-keyword">return</span> invoke&lt;<span class="hljs-built_in">void</span>&gt;(<span class="hljs-string">"save_review"</span>, { <span class="hljs-attr">req</span>: payload });
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">startBatch</span>(<span class="hljs-params">args: {
  provider_cfg: <span class="hljs-built_in">any</span>;
  message_ids: <span class="hljs-built_in">string</span>[];
  only_unlabeled: <span class="hljs-built_in">boolean</span>;
  only_needs_review: <span class="hljs-built_in">boolean</span>;
}</span>) {
  <span class="hljs-keyword">return</span> invoke&lt;<span class="hljs-built_in">void</span>&gt;(<span class="hljs-string">"start_batch"</span>, args);
}
</code></pre>
<h4 data-id="heading-34"><code>apps/desktop/src/api/types.ts</code></h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">MessageRow</span> = {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span>;
  received_at?: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>;
  sender?: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>;
  phone?: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>;
  source?: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>;
};
</code></pre>
<h4 data-id="heading-35"><code>apps/desktop/src/stores/settings.ts</code></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">"pinia"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useSettingsStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">"settings"</span>, {
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-attr">operator</span>: <span class="hljs-string">"default"</span>,
    <span class="hljs-attr">llamaSidecarPath</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">modelPath</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">threads</span>: <span class="hljs-number">4</span>,
    <span class="hljs-attr">maxConcurrency</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">timeoutMs</span>: <span class="hljs-number">15000</span>,
  }),
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-title function_">load</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> raw = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">"sms_officer_settings"</span>);
      <span class="hljs-keyword">if</span> (raw) <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$state</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(raw));
    },
    <span class="hljs-title function_">save</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">"sms_officer_settings"</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$state</span>));
    },
  },
});
</code></pre>
<h4 data-id="heading-36"><code>apps/desktop/src/stores/batch.ts</code></h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">"pinia"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useBatchStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">"batch"</span>, {
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-attr">total</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">done</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">failed</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">lastEvent</span>: <span class="hljs-literal">null</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>,
    <span class="hljs-attr">running</span>: <span class="hljs-literal">false</span>,
  }),
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-title function_">reset</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">total</span> = <span class="hljs-number">0</span>; <span class="hljs-variable language_">this</span>.<span class="hljs-property">done</span> = <span class="hljs-number">0</span>; <span class="hljs-variable language_">this</span>.<span class="hljs-property">failed</span> = <span class="hljs-number">0</span>; <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastEvent</span> = <span class="hljs-literal">null</span>; <span class="hljs-variable language_">this</span>.<span class="hljs-property">running</span> = <span class="hljs-literal">false</span>;
    },
  },
});
</code></pre>
<h4 data-id="heading-37"><code>apps/desktop/src/router.ts</code></h4>
<pre><code class="hljs language-php" lang="php">import { createRouter, createWebHashHistory } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue-router"</span>;
import ImportPage <span class="hljs-keyword">from</span> <span class="hljs-string">"./pages/ImportPage.vue"</span>;
import BatchPage <span class="hljs-keyword">from</span> <span class="hljs-string">"./pages/BatchPage.vue"</span>;
import ListPage <span class="hljs-keyword">from</span> <span class="hljs-string">"./pages/ListPage.vue"</span>;
import ExportPage <span class="hljs-keyword">from</span> <span class="hljs-string">"./pages/ExportPage.vue"</span>;
import SettingsPage <span class="hljs-keyword">from</span> <span class="hljs-string">"./pages/SettingsPage.vue"</span>;

export <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">router</span> = <span class="hljs-title function_ invoke__">createRouter</span>({
  <span class="hljs-attr">history</span>: <span class="hljs-title function_ invoke__">createWebHashHistory</span>(),
  <span class="hljs-attr">routes</span>: [
    { <span class="hljs-attr">path</span>: <span class="hljs-string">"/"</span>, <span class="hljs-attr">redirect</span>: <span class="hljs-string">"/import"</span> },
    { <span class="hljs-attr">path</span>: <span class="hljs-string">"/import"</span>, <span class="hljs-attr">component</span>: ImportPage },
    { <span class="hljs-attr">path</span>: <span class="hljs-string">"/batch"</span>, <span class="hljs-attr">component</span>: BatchPage },
    { <span class="hljs-attr">path</span>: <span class="hljs-string">"/list"</span>, <span class="hljs-attr">component</span>: ListPage },
    { <span class="hljs-attr">path</span>: <span class="hljs-string">"/export"</span>, <span class="hljs-attr">component</span>: ExportPage },
    { <span class="hljs-attr">path</span>: <span class="hljs-string">"/settings"</span>, <span class="hljs-attr">component</span>: SettingsPage },
  ],
});
</code></pre>
<h4 data-id="heading-38"><code>apps/desktop/src/main.ts</code></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> { createPinia } <span class="hljs-keyword">from</span> <span class="hljs-string">"pinia"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./App.vue"</span>;
<span class="hljs-keyword">import</span> { router } <span class="hljs-keyword">from</span> <span class="hljs-string">"./router"</span>;

<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>).<span class="hljs-title function_">use</span>(<span class="hljs-title function_">createPinia</span>()).<span class="hljs-title function_">use</span>(router).<span class="hljs-title function_">mount</span>(<span class="hljs-string">"#app"</span>);
</code></pre>
<h4 data-id="heading-39"><code>apps/desktop/src/App.vue</code></h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"app"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">aside</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>çŸ­ä¿¡æ™ºæ ‡å®˜<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/import"</span>&gt;</span>å¯¼å…¥<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/batch"</span>&gt;</span>æ‰¹å¤„ç†<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/list"</span>&gt;</span>åˆ—è¡¨å¤æ ¸<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/export"</span>&gt;</span>å¯¼å‡º<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/settings"</span>&gt;</span>è®¾ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"main"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">RouterView</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.app</span> { <span class="hljs-attribute">display</span>: grid; <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">220px</span> <span class="hljs-number">1</span>fr; <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>; }
<span class="hljs-selector-class">.nav</span> { <span class="hljs-attribute">border-right</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#eee</span>; <span class="hljs-attribute">padding</span>: <span class="hljs-number">16px</span>; }
<span class="hljs-selector-class">.nav</span> <span class="hljs-selector-tag">nav</span> { <span class="hljs-attribute">display</span>: flex; <span class="hljs-attribute">flex-direction</span>: column; <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>; <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">12px</span>; }
<span class="hljs-selector-class">.main</span> { <span class="hljs-attribute">padding</span>: <span class="hljs-number">16px</span>; <span class="hljs-attribute">overflow</span>: auto; }
<span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.router-link-active</span> { <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">700</span>; }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<hr/>
<h4 data-id="heading-40">å¯¼å…¥é¡µï¼šCSV/Excel åˆ—æ˜ å°„ + å†™å…¥ messages</h4>
<h5 data-id="heading-41"><code>apps/desktop/src/pages/ImportPage.vue</code></h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å¯¼å…¥æ•°æ®<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ”¯æŒ CSV / Excelã€‚å…ˆé€‰æ‹©æ–‡ä»¶ï¼Œå†è¿›è¡Œåˆ—æ˜ å°„ï¼Œç„¶åå¯¼å…¥åˆ°æœ¬åœ° SQLiteã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> @<span class="hljs-attr">change</span>=<span class="hljs-string">"onFile"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"loadSample"</span>&gt;</span>åŠ è½½å†…ç½®æ ·ä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"doImport"</span> <span class="hljs-attr">:disabled</span>=<span class="hljs-string">"rows.length===0"</span>&gt;</span>å¯¼å…¥ï¼ˆ{{ rows.length }}æ¡ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">ColumnMapper</span>
      <span class="hljs-attr">v-if</span>=<span class="hljs-string">"headers.length"</span>
      <span class="hljs-attr">:headers</span>=<span class="hljs-string">"headers"</span>
      <span class="hljs-attr">v-model:mapping</span>=<span class="hljs-string">"mapping"</span>
    /&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"preview"</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"rows.length"</span>&gt;</span>{{ rows.slice(0,3) }}<span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"msg"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"msg"</span>&gt;</span>{{ msg }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-title class_">Papa</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"papaparse"</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">XLSX</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"xlsx"</span>;
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ColumnMapper</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"../components/ColumnMapper.vue"</span>;
<span class="hljs-keyword">import</span> { dbInit, importMessages } <span class="hljs-keyword">from</span> <span class="hljs-string">"../api/tauri"</span>;
<span class="hljs-keyword">import</span> { buildSampleRows } <span class="hljs-keyword">from</span> <span class="hljs-string">"../utils/sample"</span>;
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">MessageRow</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../api/types"</span>;

<span class="hljs-keyword">const</span> headers = ref&lt;string[]&gt;([]);
<span class="hljs-keyword">const</span> rows = ref&lt;any[]&gt;([]);
<span class="hljs-keyword">const</span> msg = <span class="hljs-title function_">ref</span>(<span class="hljs-string">""</span>);

<span class="hljs-keyword">const</span> mapping = ref&lt;<span class="hljs-title class_">Record</span>&lt;string, string&gt;&gt;({
  <span class="hljs-attr">id</span>: <span class="hljs-string">"id"</span>,
  <span class="hljs-attr">content</span>: <span class="hljs-string">"content"</span>,
  <span class="hljs-attr">received_at</span>: <span class="hljs-string">"received_at"</span>,
  <span class="hljs-attr">sender</span>: <span class="hljs-string">"sender"</span>,
  <span class="hljs-attr">phone</span>: <span class="hljs-string">"phone"</span>,
  <span class="hljs-attr">source</span>: <span class="hljs-string">"source"</span>,
});

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">onFile</span>(<span class="hljs-params">e: Event</span>) {
  msg.<span class="hljs-property">value</span> = <span class="hljs-string">""</span>;
  <span class="hljs-keyword">const</span> file = (e.<span class="hljs-property">target</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLInputElement</span>).<span class="hljs-property">files</span>?.[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">if</span> (!file) <span class="hljs-keyword">return</span>;

  <span class="hljs-keyword">const</span> name = file.<span class="hljs-property">name</span>.<span class="hljs-title function_">toLowerCase</span>();
  <span class="hljs-keyword">if</span> (name.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">".csv"</span>)) {
    <span class="hljs-keyword">const</span> text = <span class="hljs-keyword">await</span> file.<span class="hljs-title function_">text</span>();
    <span class="hljs-keyword">const</span> parsed = <span class="hljs-title class_">Papa</span>.<span class="hljs-title function_">parse</span>(text, { <span class="hljs-attr">header</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">skipEmptyLines</span>: <span class="hljs-literal">true</span> });
    headers.<span class="hljs-property">value</span> = (parsed.<span class="hljs-property">meta</span>.<span class="hljs-property">fields</span> || []) <span class="hljs-keyword">as</span> string[];
    rows.<span class="hljs-property">value</span> = parsed.<span class="hljs-property">data</span> <span class="hljs-keyword">as</span> any[];
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (name.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">".xlsx"</span>) || name.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">".xls"</span>)) {
    <span class="hljs-keyword">const</span> buf = <span class="hljs-keyword">await</span> file.<span class="hljs-title function_">arrayBuffer</span>();
    <span class="hljs-keyword">const</span> wb = <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-title function_">read</span>(buf);
    <span class="hljs-keyword">const</span> sheet = wb.<span class="hljs-property">Sheets</span>[wb.<span class="hljs-property">SheetNames</span>[<span class="hljs-number">0</span>]];
    <span class="hljs-keyword">const</span> json = <span class="hljs-variable constant_">XLSX</span>.<span class="hljs-property">utils</span>.<span class="hljs-title function_">sheet_to_json</span>(sheet, { <span class="hljs-attr">defval</span>: <span class="hljs-string">""</span> }) <span class="hljs-keyword">as</span> any[];
    headers.<span class="hljs-property">value</span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(json[<span class="hljs-number">0</span>] || {});
    rows.<span class="hljs-property">value</span> = json;
  } <span class="hljs-keyword">else</span> {
    msg.<span class="hljs-property">value</span> = <span class="hljs-string">"ä»…æ”¯æŒ CSV / Excel"</span>;
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">loadSample</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> s = <span class="hljs-title function_">buildSampleRows</span>();
  headers.<span class="hljs-property">value</span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(s[<span class="hljs-number">0</span>]);
  rows.<span class="hljs-property">value</span> = s;
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">doImport</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">dbInit</span>();

  <span class="hljs-keyword">const</span> <span class="hljs-attr">mapped</span>: <span class="hljs-title class_">MessageRow</span>[] = rows.<span class="hljs-property">value</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">r</span>) =&gt;</span> ({
    <span class="hljs-attr">id</span>: <span class="hljs-title class_">String</span>(r[mapping.<span class="hljs-property">value</span>.<span class="hljs-property">id</span>] ?? <span class="hljs-string">""</span>).<span class="hljs-title function_">trim</span>(),
    <span class="hljs-attr">content</span>: <span class="hljs-title class_">String</span>(r[mapping.<span class="hljs-property">value</span>.<span class="hljs-property">content</span>] ?? <span class="hljs-string">""</span>).<span class="hljs-title function_">trim</span>(),
    <span class="hljs-attr">received_at</span>: r[mapping.<span class="hljs-property">value</span>.<span class="hljs-property">received_at</span>] ? <span class="hljs-title class_">String</span>(r[mapping.<span class="hljs-property">value</span>.<span class="hljs-property">received_at</span>]) : <span class="hljs-literal">null</span>,
    <span class="hljs-attr">sender</span>: r[mapping.<span class="hljs-property">value</span>.<span class="hljs-property">sender</span>] ? <span class="hljs-title class_">String</span>(r[mapping.<span class="hljs-property">value</span>.<span class="hljs-property">sender</span>]) : <span class="hljs-literal">null</span>,
    <span class="hljs-attr">phone</span>: r[mapping.<span class="hljs-property">value</span>.<span class="hljs-property">phone</span>] ? <span class="hljs-title class_">String</span>(r[mapping.<span class="hljs-property">value</span>.<span class="hljs-property">phone</span>]) : <span class="hljs-literal">null</span>,
    <span class="hljs-attr">source</span>: r[mapping.<span class="hljs-property">value</span>.<span class="hljs-property">source</span>] ? <span class="hljs-title class_">String</span>(r[mapping.<span class="hljs-property">value</span>.<span class="hljs-property">source</span>]) : <span class="hljs-string">"import"</span>,
  })).<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x.<span class="hljs-property">id</span> &amp;&amp; x.<span class="hljs-property">content</span>);

  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> importMessages(mapped);
  msg.<span class="hljs-property">value</span> = <span class="hljs-string">`å¯¼å…¥å®Œæˆï¼š<span class="hljs-subst">${res.inserted}</span> æ¡`</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.row</span> { <span class="hljs-attribute">display</span>: flex; <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>; <span class="hljs-attribute">align-items</span>: center; <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span> <span class="hljs-number">0</span>; }
<span class="hljs-selector-class">.preview</span> { <span class="hljs-attribute">background</span>: <span class="hljs-number">#fafafa</span>; <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#eee</span>; <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>; }
<span class="hljs-selector-class">.msg</span> { <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>; <span class="hljs-attribute">color</span>: <span class="hljs-number">#0a7</span>; }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h5 data-id="heading-42"><code>apps/desktop/src/components/ColumnMapper.vue</code></h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mapper"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>åˆ—æ˜ å°„<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"grid"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>id<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"local.id"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"h in headers"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"h"</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">"h"</span>&gt;</span>{{ h }}<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>content<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"local.content"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"h in headers"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"h"</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">"h"</span>&gt;</span>{{ h }}<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>received_at<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"local.received_at"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">""</span>&gt;</span>(ç©º)<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"h in headers"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"h"</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">"h"</span>&gt;</span>{{ h }}<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>sender<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"local.sender"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">""</span>&gt;</span>(ç©º)<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"h in headers"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"h"</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">"h"</span>&gt;</span>{{ h }}<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>phone<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"local.phone"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">""</span>&gt;</span>(ç©º)<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"h in headers"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"h"</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">"h"</span>&gt;</span>{{ h }}<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>source<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"local.source"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">""</span>&gt;</span>(ç©º)<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"h in headers"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"h"</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">"h"</span>&gt;</span>{{ h }}<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { computed } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;

<span class="hljs-keyword">const</span> props = defineProps&lt;{ <span class="hljs-attr">headers</span>: string[]; <span class="hljs-attr">mapping</span>: <span class="hljs-title class_">Record</span>&lt;string,string&gt; }&gt;();
<span class="hljs-keyword">const</span> emit = defineEmits&lt;{ (<span class="hljs-attr">e</span>:<span class="hljs-string">"update:mapping"</span>, <span class="hljs-attr">v</span>: <span class="hljs-title class_">Record</span>&lt;string,string&gt;): <span class="hljs-keyword">void</span> }&gt;();

<span class="hljs-keyword">const</span> local = <span class="hljs-title function_">computed</span>({
  <span class="hljs-attr">get</span>: <span class="hljs-function">() =&gt;</span> props.<span class="hljs-property">mapping</span>,
  <span class="hljs-attr">set</span>: <span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> <span class="hljs-title function_">emit</span>(<span class="hljs-string">"update:mapping"</span>, v),
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.mapper</span> { <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#eee</span>; <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span>; <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>; <span class="hljs-attribute">margin</span>: <span class="hljs-number">12px</span> <span class="hljs-number">0</span>; }
<span class="hljs-selector-class">.grid</span> { <span class="hljs-attribute">display</span>: grid; <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">140px</span> <span class="hljs-number">1</span>fr; <span class="hljs-attribute">gap</span>: <span class="hljs-number">8px</span>; <span class="hljs-attribute">align-items</span>: center; }
select { <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>; }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<hr/>
<h4 data-id="heading-43">æ‰¹å¤„ç†é¡µï¼šè¿›åº¦æ¡ã€å¤±è´¥è®¡æ•°ã€é‡è¯•ã€å¢é‡é€‰é¡¹</h4>
<h5 data-id="heading-44"><code>apps/desktop/src/pages/BatchPage.vue</code></h5>
<pre><code class="hljs language-ini" lang="ini">&lt;template&gt;
  &lt;section&gt;
    &lt;h3&gt;æ‰¹å¤„ç†&lt;/h3&gt;

    &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"panel"</span>&gt;
      &lt;label&gt;&lt;input <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> v-model=<span class="hljs-string">"onlyUnlabeled"</span> /&gt; åªè·‘æœªæ ‡æ³¨&lt;/label&gt;
      &lt;label&gt;&lt;input <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> v-model=<span class="hljs-string">"onlyNeedsReview"</span> /&gt; åªè·‘ needs_review&lt;/label&gt;
      &lt;button @<span class="hljs-attr">click</span>=<span class="hljs-string">"start"</span> :disabled=<span class="hljs-string">"running"</span>&gt;å¼€å§‹&lt;/button&gt;
    &lt;/div&gt;

    &lt;ProgressPanel
      :<span class="hljs-attr">total</span>=<span class="hljs-string">"total"</span>
      :<span class="hljs-attr">done</span>=<span class="hljs-string">"done"</span>
      :<span class="hljs-attr">failed</span>=<span class="hljs-string">"failed"</span>
      :<span class="hljs-attr">running</span>=<span class="hljs-string">"running"</span>
      :<span class="hljs-attr">lastEvent</span>=<span class="hljs-string">"lastEvent"</span>
    /&gt;
  &lt;/section&gt;
&lt;/template&gt;

&lt;script setup <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;
import { onMounted, ref } from "vue"<span class="hljs-comment">;</span>
import { listen } from "@tauri-apps/api/event"<span class="hljs-comment">;</span>
import ProgressPanel from "../components/ProgressPanel.vue"<span class="hljs-comment">;</span>
import { useSettingsStore } from "../stores/settings"<span class="hljs-comment">;</span>
import { startBatch, dbInit } from "../api/tauri"<span class="hljs-comment">;</span>

const <span class="hljs-attr">settings</span> = useSettingsStore()<span class="hljs-comment">;</span>
settings.load()<span class="hljs-comment">;</span>

const <span class="hljs-attr">onlyUnlabeled</span> = ref(<span class="hljs-literal">true</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">onlyNeedsReview</span> = ref(<span class="hljs-literal">false</span>)<span class="hljs-comment">;</span>

const <span class="hljs-attr">total</span> = ref(<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">done</span> = ref(<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">failed</span> = ref(<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">running</span> = ref(<span class="hljs-literal">false</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">lastEvent</span> = ref&lt;any&gt;(null)<span class="hljs-comment">;</span>

onMounted(async () =&gt; {
  await dbInit()<span class="hljs-comment">;</span>
  await listen("batch_progress", (e) =&gt; {
    const p: <span class="hljs-attr">any</span> = e.payload<span class="hljs-comment">;</span>
    <span class="hljs-attr">total.value</span> = p.total<span class="hljs-comment">;</span>
    <span class="hljs-attr">done.value</span> = p.done<span class="hljs-comment">;</span>
    <span class="hljs-attr">failed.value</span> = p.failed<span class="hljs-comment">;</span>
    <span class="hljs-attr">lastEvent.value</span> = p.event<span class="hljs-comment">;</span>
    if (done.value &gt;= total.value) <span class="hljs-attr">running.value</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
  })<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>

async function start() {
  <span class="hljs-attr">running.value</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
  <span class="hljs-attr">total.value</span> = <span class="hljs-number">0</span><span class="hljs-comment">; done.value = 0; failed.value = 0; lastEvent.value = null;</span>

  // è¿™é‡Œç®€åŒ–ï¼šå‰ç«¯ä¼ ä¸€ä¸ª message_ids åˆ—è¡¨
  // ç”Ÿäº§ç‰ˆï¼šå¢åŠ åç«¯æ¥å£ query_message_ids(filters)
  // å…ˆç”¨æ ·ä¾‹ï¼šm1..m10
  const <span class="hljs-attr">ids</span> = Array.from({ length: <span class="hljs-number">10</span> }).map((_, i) =&gt; `m<span class="hljs-variable">${i + 1}</span>`)<span class="hljs-comment">;</span>

  await startBatch({
    provider_cfg: {
      sidecar_path: settings.llamaSidecarPath,
      model_path: settings.modelPath,
      threads: settings.threads,
      max_concurrency: settings.maxConcurrency,
      timeout_ms: settings.timeoutMs,
    },
    message_ids: ids,
    only_unlabeled: onlyUnlabeled.value,
    only_needs_review: onlyNeedsReview.value,
  })<span class="hljs-comment">;</span>
}
&lt;/script&gt;

&lt;style scoped&gt;
.panel { display: flex<span class="hljs-comment">; gap: 16px; align-items: center; padding: 12px; border: 1px solid #eee; border-radius: 8px; }</span>
&lt;/style&gt;
</code></pre>
<h5 data-id="heading-45"><code>apps/desktop/src/components/ProgressPanel.vue</code></h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bar"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fill"</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"{ width: pct + '%' }"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"meta"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>æ€»æ•°ï¼š{{ total }}ï¼Œå®Œæˆï¼š{{ done }}ï¼Œå¤±è´¥ï¼š{{ failed }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"running"</span>&gt;</span>å¤„ç†ä¸­â€¦<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-else</span>&gt;</span>ç©ºé—²<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"lastEvent"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"event"</span>&gt;</span>{{ lastEvent }}<span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { computed } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">const</span> props = defineProps&lt;{ <span class="hljs-attr">total</span>: number; <span class="hljs-attr">done</span>: number; <span class="hljs-attr">failed</span>: number; <span class="hljs-attr">running</span>: boolean; <span class="hljs-attr">lastEvent</span>: any }&gt;();
<span class="hljs-keyword">const</span> pct = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> props.<span class="hljs-property">total</span> ? <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((props.<span class="hljs-property">done</span> / props.<span class="hljs-property">total</span>) * <span class="hljs-number">100</span>) : <span class="hljs-number">0</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.box</span> { <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">12px</span>; <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#eee</span>; <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>; <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span>; }
<span class="hljs-selector-class">.bar</span> { <span class="hljs-attribute">height</span>: <span class="hljs-number">10px</span>; <span class="hljs-attribute">background</span>: <span class="hljs-number">#f0f0f0</span>; <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">999px</span>; <span class="hljs-attribute">overflow</span>: hidden; }
<span class="hljs-selector-class">.fill</span> { <span class="hljs-attribute">height</span>: <span class="hljs-number">10px</span>; <span class="hljs-attribute">background</span>: <span class="hljs-number">#3b82f6</span>; }
<span class="hljs-selector-class">.meta</span> { <span class="hljs-attribute">display</span>: flex; <span class="hljs-attribute">justify-content</span>: space-between; <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>; <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>; }
<span class="hljs-selector-class">.event</span> { <span class="hljs-attribute">background</span>: <span class="hljs-number">#fafafa</span>; <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#eee</span>; <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>; <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>; }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<hr/>
<h4 data-id="heading-46">åˆ—è¡¨é¡µ + å¤æ ¸æŠ½å±‰ï¼ˆè¿™é‡Œç»™â€œå¯è·‘é€šçš„æ ¸å¿ƒé—­ç¯â€ï¼‰</h4>
<blockquote>
<p>åˆ—è¡¨è¿‡æ»¤/å¯¼å‡ºå…¨é‡æŸ¥è¯¢æ¥å£è¾ƒé•¿ï¼Œæˆ‘åœ¨ README é‡Œç»™ä½ æ‰©å±•ç‚¹ï¼›è¿™ç‰ˆå…ˆæŠŠâ€œå¯¼å…¥â†’æ‰¹å¤„ç†â†’å•æ¡å¤æ ¸ä¿å­˜â†’å®¡è®¡è½åº“â†’å¯¼å‡ºâ€è·‘é€šã€‚</p>
</blockquote>
<h5 data-id="heading-47"><code>apps/desktop/src/pages/ListPage.vue</code></h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>åˆ—è¡¨å¤æ ¸<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¾“å…¥ message_id ç›´æ¥æ‰“å¼€å¤æ ¸æŠ½å±‰ï¼ˆæ¼”ç¤ºé—­ç¯ï¼‰ã€‚ç”Ÿäº§ç‰ˆåœ¨æ­¤é¡µæ¥å…¥åç«¯åˆ†é¡µæŸ¥è¯¢ä¸è¿‡æ»¤ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"ä¾‹å¦‚ m1"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"open"</span>&gt;</span>æ‰“å¼€<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">ReviewDrawer</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"label"</span> <span class="hljs-attr">:label</span>=<span class="hljs-string">"label"</span> @<span class="hljs-attr">close</span>=<span class="hljs-string">"label=null"</span> @<span class="hljs-attr">save</span>=<span class="hljs-string">"save"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"err"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"err"</span>&gt;</span>{{ err }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ReviewDrawer</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"../components/ReviewDrawer.vue"</span>;
<span class="hljs-keyword">import</span> { getLabel, saveReview } <span class="hljs-keyword">from</span> <span class="hljs-string">"../api/tauri"</span>;
<span class="hljs-keyword">import</span> { useSettingsStore } <span class="hljs-keyword">from</span> <span class="hljs-string">"../stores/settings"</span>;

<span class="hljs-keyword">const</span> settings = <span class="hljs-title function_">useSettingsStore</span>(); settings.<span class="hljs-title function_">load</span>();

<span class="hljs-keyword">const</span> id = <span class="hljs-title function_">ref</span>(<span class="hljs-string">"m1"</span>);
<span class="hljs-keyword">const</span> label = ref&lt;any&gt;(<span class="hljs-literal">null</span>);
<span class="hljs-keyword">const</span> err = <span class="hljs-title function_">ref</span>(<span class="hljs-string">""</span>);

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">open</span>(<span class="hljs-params"/>) {
  err.<span class="hljs-property">value</span> = <span class="hljs-string">""</span>;
  <span class="hljs-keyword">const</span> v = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getLabel</span>(id.<span class="hljs-property">value</span>);
  <span class="hljs-keyword">if</span> (!v) {
    err.<span class="hljs-property">value</span> = <span class="hljs-string">"æœªæ‰¾åˆ°æ ‡ç­¾ï¼ˆå…ˆå»æ‰¹å¤„ç†é¡µè·‘ä¸€éï¼‰"</span>;
    <span class="hljs-keyword">return</span>;
  }
  label.<span class="hljs-property">value</span> = v;
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">save</span>(<span class="hljs-params">after: any</span>) {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">saveReview</span>({ <span class="hljs-attr">message_id</span>: after.<span class="hljs-property">message_id</span>, <span class="hljs-attr">operator</span>: settings.<span class="hljs-property">operator</span>, after });
  label.<span class="hljs-property">value</span> = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getLabel</span>(after.<span class="hljs-property">message_id</span>);
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.row</span> { <span class="hljs-attribute">display</span>:flex; <span class="hljs-attribute">gap</span>:<span class="hljs-number">10px</span>; <span class="hljs-attribute">align-items</span>:center; }
<span class="hljs-selector-class">.err</span> { <span class="hljs-attribute">color</span>:<span class="hljs-number">#c00</span>; <span class="hljs-attribute">margin-top</span>:<span class="hljs-number">10px</span>; }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h5 data-id="heading-48"><code>apps/desktop/src/components/ReviewDrawer.vue</code></h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mask"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"drawer"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>å¤æ ¸ï¼š{{ local.message_id }}<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"$emit('close')"</span>&gt;</span>å…³é—­<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"field"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>industry<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"local.industry"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"x in industryEnum"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"x"</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">"x"</span>&gt;</span>{{ x }}<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"field"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>type<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"local.type"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"x in typeEnum"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"x"</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">"x"</span>&gt;</span>{{ x }}<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"field"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>confidence<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span> <span class="hljs-attr">step</span>=<span class="hljs-string">"0.01"</span> <span class="hljs-attr">v-model.number</span>=<span class="hljs-string">"local.confidence"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">h5</span>&gt;</span>entities<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"grid"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>brand<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"local.entities.brand"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"null æˆ–å­—ç¬¦ä¸²"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>verification_code<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"local.entities.verification_code"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>amount<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"amountText"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>balance<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"balanceText"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>account_suffix<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"local.entities.account_suffix"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>time_text<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"local.entities.time_text"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>url<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"local.entities.url"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>phone_in_text<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"local.entities.phone_in_text"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"field"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>needs_review<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"local.needs_review"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">h5</span>&gt;</span>reasons<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"reasonsText"</span> <span class="hljs-attr">rows</span>=<span class="hljs-string">"4"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"primary"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"doSave"</span>&gt;</span>ä¿å­˜<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { computed, reactive } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-variable constant_">INDUSTRY_ENUM</span>, <span class="hljs-variable constant_">TYPE_ENUM</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../api/schema"</span>;

<span class="hljs-keyword">const</span> props = defineProps&lt;{ <span class="hljs-attr">label</span>: any }&gt;();
<span class="hljs-keyword">const</span> emit = defineEmits&lt;{ (<span class="hljs-attr">e</span>:<span class="hljs-string">"close"</span>): <span class="hljs-keyword">void</span>; (<span class="hljs-attr">e</span>:<span class="hljs-string">"save"</span>, <span class="hljs-attr">after</span>: any): <span class="hljs-keyword">void</span> }&gt;();

<span class="hljs-keyword">const</span> local = <span class="hljs-title function_">reactive</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(props.<span class="hljs-property">label</span>)));

<span class="hljs-keyword">const</span> industryEnum = <span class="hljs-variable constant_">INDUSTRY_ENUM</span> <span class="hljs-keyword">as</span> unknown <span class="hljs-keyword">as</span> string[];
<span class="hljs-keyword">const</span> typeEnum = <span class="hljs-variable constant_">TYPE_ENUM</span> <span class="hljs-keyword">as</span> unknown <span class="hljs-keyword">as</span> string[];

<span class="hljs-keyword">const</span> amountText = <span class="hljs-title function_">computed</span>({
  <span class="hljs-attr">get</span>: <span class="hljs-function">() =&gt;</span> local.<span class="hljs-property">entities</span>.<span class="hljs-property">amount</span> == <span class="hljs-literal">null</span> ? <span class="hljs-string">""</span> : <span class="hljs-title class_">String</span>(local.<span class="hljs-property">entities</span>.<span class="hljs-property">amount</span>),
  <span class="hljs-attr">set</span>: <span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> local.<span class="hljs-property">entities</span>.<span class="hljs-property">amount</span> = v.<span class="hljs-title function_">trim</span>() ? <span class="hljs-title class_">Number</span>(v) : <span class="hljs-literal">null</span>,
});
<span class="hljs-keyword">const</span> balanceText = <span class="hljs-title function_">computed</span>({
  <span class="hljs-attr">get</span>: <span class="hljs-function">() =&gt;</span> local.<span class="hljs-property">entities</span>.<span class="hljs-property">balance</span> == <span class="hljs-literal">null</span> ? <span class="hljs-string">""</span> : <span class="hljs-title class_">String</span>(local.<span class="hljs-property">entities</span>.<span class="hljs-property">balance</span>),
  <span class="hljs-attr">set</span>: <span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> local.<span class="hljs-property">entities</span>.<span class="hljs-property">balance</span> = v.<span class="hljs-title function_">trim</span>() ? <span class="hljs-title class_">Number</span>(v) : <span class="hljs-literal">null</span>,
});
<span class="hljs-keyword">const</span> reasonsText = <span class="hljs-title function_">computed</span>({
  <span class="hljs-attr">get</span>: <span class="hljs-function">() =&gt;</span> (local.<span class="hljs-property">reasons</span> || []).<span class="hljs-title function_">join</span>(<span class="hljs-string">"\n"</span>),
  <span class="hljs-attr">set</span>: <span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> local.<span class="hljs-property">reasons</span> = v.<span class="hljs-title function_">split</span>(<span class="hljs-string">"\n"</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">s</span> =&gt;</span> s.<span class="hljs-title function_">trim</span>()).<span class="hljs-title function_">filter</span>(<span class="hljs-title class_">Boolean</span>),
});

<span class="hljs-keyword">function</span> <span class="hljs-title function_">doSave</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ç»´æŒå­—æ®µé½å…¨</span>
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">"save"</span>, local);
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.mask</span> { <span class="hljs-attribute">position</span>: fixed; inset: <span class="hljs-number">0</span>; <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.25</span>); <span class="hljs-attribute">display</span>:flex; <span class="hljs-attribute">justify-content</span>:flex-end; }
<span class="hljs-selector-class">.drawer</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">520px</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>; <span class="hljs-attribute">padding</span>: <span class="hljs-number">14px</span>; <span class="hljs-attribute">overflow</span>:auto; }
<span class="hljs-selector-tag">header</span> { <span class="hljs-attribute">display</span>:flex; <span class="hljs-attribute">justify-content</span>:space-between; <span class="hljs-attribute">align-items</span>:center; <span class="hljs-attribute">border-bottom</span>:<span class="hljs-number">1px</span> solid <span class="hljs-number">#eee</span>; <span class="hljs-attribute">padding-bottom</span>:<span class="hljs-number">8px</span>; }
<span class="hljs-selector-class">.field</span> { <span class="hljs-attribute">display</span>:grid; <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">140px</span> <span class="hljs-number">1</span>fr; <span class="hljs-attribute">gap</span>: <span class="hljs-number">8px</span>; <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span> <span class="hljs-number">0</span>; <span class="hljs-attribute">align-items</span>:center; }
<span class="hljs-selector-class">.grid</span> { <span class="hljs-attribute">display</span>:grid; <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">140px</span> <span class="hljs-number">1</span>fr; <span class="hljs-attribute">gap</span>: <span class="hljs-number">8px</span>; }
<span class="hljs-selector-tag">footer</span> { <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">12px</span>; <span class="hljs-attribute">display</span>:flex; <span class="hljs-attribute">justify-content</span>:flex-end; }
<span class="hljs-selector-class">.primary</span> { <span class="hljs-attribute">background</span>:<span class="hljs-number">#3b82f6</span>; <span class="hljs-attribute">color</span>:<span class="hljs-number">#fff</span>; <span class="hljs-attribute">border</span>:none; <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">12px</span>; <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>; }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<hr/>
<h4 data-id="heading-49">è®¾ç½®é¡µï¼šæ¨¡å‹è·¯å¾„é€‰æ‹© + å¥åº·æ£€æŸ¥ï¼ˆè¿™é‡Œå®ç°ä¸ºâ€œå‰ç«¯å¡«å†™è·¯å¾„ + æ‰¹å¤„ç†æ—¶ç”±åç«¯æŠ¥é”™â€ï¼‰</h4>
<h5 data-id="heading-50"><code>apps/desktop/src/pages/SettingsPage.vue</code></h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>è®¾ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æœ¬æœºç¦»çº¿æ¨ç†ï¼šå¡«å†™ llama.cpp å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ ä¸ GGUF æ¨¡å‹è·¯å¾„ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"grid"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>operator<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"s.operator"</span> /&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>llama sidecar path<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"s.llamaSidecarPath"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"ä¾‹å¦‚ C:...\llama-cli.exe æˆ– /usr/local/bin/llama"</span> /&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>gguf model path<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"s.modelPath"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"ä¾‹å¦‚ D:\models\qwen2.5-1.5b-instruct-q4.gguf"</span> /&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>threads<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span> <span class="hljs-attr">v-model.number</span>=<span class="hljs-string">"s.threads"</span> /&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>max concurrency<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span> <span class="hljs-attr">v-model.number</span>=<span class="hljs-string">"s.maxConcurrency"</span> /&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>timeout(ms)<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span> <span class="hljs-attr">v-model.number</span>=<span class="hljs-string">"s.timeoutMs"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"save"</span>&gt;</span>ä¿å­˜<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"msg"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"msg"</span>&gt;</span>{{ msg }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { useSettingsStore } <span class="hljs-keyword">from</span> <span class="hljs-string">"../stores/settings"</span>;
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;

<span class="hljs-keyword">const</span> s = <span class="hljs-title function_">useSettingsStore</span>(); s.<span class="hljs-title function_">load</span>();
<span class="hljs-keyword">const</span> msg = <span class="hljs-title function_">ref</span>(<span class="hljs-string">""</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">save</span>(<span class="hljs-params"/>) {
  s.<span class="hljs-title function_">save</span>();
  msg.<span class="hljs-property">value</span> = <span class="hljs-string">"å·²ä¿å­˜"</span>;
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> msg.<span class="hljs-property">value</span> = <span class="hljs-string">""</span>, <span class="hljs-number">1200</span>);
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.grid</span> { <span class="hljs-attribute">display</span>:grid; <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">180px</span> <span class="hljs-number">1</span>fr; <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>; <span class="hljs-attribute">align-items</span>:center; <span class="hljs-attribute">max-width</span>: <span class="hljs-number">900px</span>; }
<span class="hljs-selector-class">.row</span> { <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">12px</span>; <span class="hljs-attribute">display</span>:flex; <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>; <span class="hljs-attribute">align-items</span>:center; }
<span class="hljs-selector-class">.msg</span> { <span class="hljs-attribute">color</span>:<span class="hljs-number">#0a7</span>; }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<hr/>
<h4 data-id="heading-51">å¯¼å‡ºé¡µï¼šå¯¼å‡º JSONL / CSVï¼ˆæ¼”ç¤ºç‰ˆï¼šå¯¼å‡º sampleï¼Œç”Ÿäº§ç‰ˆæ¥å…¥åç«¯æŸ¥è¯¢å¹¶å†™æ–‡ä»¶ï¼‰</h4>
<h5 data-id="heading-52"><code>apps/desktop/src/pages/ExportPage.vue</code></h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å¯¼å‡º<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ¼”ç¤ºç‰ˆï¼šå¯¼å‡ºæ ·ä¾‹ JSONLã€‚ç”Ÿäº§ç‰ˆï¼šå¢åŠ åç«¯ export_labels(filters, format) å¹¶å†™å…¥ç”¨æˆ·é€‰æ‹©è·¯å¾„ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"download"</span>&gt;</span>ä¸‹è½½æ ·ä¾‹ JSONL<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">function</span> <span class="hljs-title function_">download</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> text = [
    <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">message_id</span>: <span class="hljs-string">"m1"</span>, <span class="hljs-attr">industry</span>: <span class="hljs-string">"é‡‘è"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"äº¤æ˜“æé†’"</span> }),
    <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">message_id</span>: <span class="hljs-string">"m2"</span>, <span class="hljs-attr">industry</span>: <span class="hljs-string">"é€šç”¨"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"éªŒè¯ç "</span> }),
  ].<span class="hljs-title function_">join</span>(<span class="hljs-string">"\n"</span>);
  <span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([text], { <span class="hljs-attr">type</span>: <span class="hljs-string">"application/jsonl"</span> });
  <span class="hljs-keyword">const</span> a = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"a"</span>);
  a.<span class="hljs-property">href</span> = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob);
  a.<span class="hljs-property">download</span> = <span class="hljs-string">"labels.sample.jsonl"</span>;
  a.<span class="hljs-title function_">click</span>();
  <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">revokeObjectURL</span>(a.<span class="hljs-property">href</span>);
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<hr/>
<h4 data-id="heading-53">å‰ç«¯ä¾èµ–ï¼š<code>package.json</code>ï¼ˆæœ€å°å¯è·‘ï¼‰</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"sms-tagging-officer"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"private"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"packageManager"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm@9.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm -C apps/desktop dev"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm -C apps/desktop build"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"tauri:dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm -C apps/desktop tauri dev"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"tauri:build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm -C apps/desktop tauri build"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"pnpm"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^9.0.0"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h5 data-id="heading-54"><code>apps/desktop/package.json</code></h5>
<pre><code class="hljs language-perl" lang="perl">{
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"sms-tagging-officer-desktop"</span>,
  <span class="hljs-string">"private"</span>: true,
  <span class="hljs-string">"scripts"</span>: {
    <span class="hljs-string">"dev"</span>: <span class="hljs-string">"vite"</span>,
    <span class="hljs-string">"build"</span>: <span class="hljs-string">"vite build"</span>,
    <span class="hljs-string">"tauri"</span>: <span class="hljs-string">"tauri"</span>
  },
  <span class="hljs-string">"dependencies"</span>: {
    <span class="hljs-string">"@tauri-apps/api"</span>: <span class="hljs-string">"^1.5.0"</span>,
    <span class="hljs-string">"pinia"</span>: <span class="hljs-string">"^2.1.7"</span>,
    <span class="hljs-string">"vue"</span>: <span class="hljs-string">"^3.4.0"</span>,
    <span class="hljs-string">"vue-router"</span>: <span class="hljs-string">"^4.2.5"</span>,
    <span class="hljs-string">"papaparse"</span>: <span class="hljs-string">"^5.4.1"</span>,
    <span class="hljs-string">"xlsx"</span>: <span class="hljs-string">"^0.18.5"</span>
  },
  <span class="hljs-string">"devDependencies"</span>: {
    <span class="hljs-string">"@tauri-apps/cli"</span>: <span class="hljs-string">"^1.5.0"</span>,
    <span class="hljs-string">"@vitejs/plugin-vue"</span>: <span class="hljs-string">"^5.0.0"</span>,
    <span class="hljs-string">"typescript"</span>: <span class="hljs-string">"^5.3.3"</span>,
    <span class="hljs-string">"vite"</span>: <span class="hljs-string">"^5.0.0"</span>
  }
}
</code></pre>
<h5 data-id="heading-55"><code>apps/desktop/src/utils/sample.ts</code></h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">export</span> <span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">buildSampleRows</span></span>() {
  <span class="hljs-built_in">return</span> [
    { <span class="hljs-built_in">id</span>:<span class="hljs-string">"m1"</span>, received_at:<span class="hljs-string">"2026-02-10 10:01:00"</span>, sender:<span class="hljs-string">"ä¸­å›½é“¶è¡Œ"</span>, phone:<span class="hljs-string">"95566"</span>, <span class="hljs-built_in">source</span>:<span class="hljs-string">"sample"</span>, content:<span class="hljs-string">"ã€ä¸­å›½é“¶è¡Œã€‘æ‚¨å°¾å·1234å¡äº2026-02-10 09:58æ¶ˆè´¹58.20å…ƒï¼Œä½™é¢1020.55å…ƒã€‚"</span> },
    { <span class="hljs-built_in">id</span>:<span class="hljs-string">"m2"</span>, received_at:<span class="hljs-string">"2026-02-10 10:02:00"</span>, sender:<span class="hljs-string">"æ”¯ä»˜å®"</span>, phone:<span class="hljs-string">"95188"</span>, <span class="hljs-built_in">source</span>:<span class="hljs-string">"sample"</span>, content:<span class="hljs-string">"ã€æ”¯ä»˜å®ã€‘éªŒè¯ç  493821ï¼Œç”¨äºç™»å½•éªŒè¯ï¼Œ5åˆ†é’Ÿå†…æœ‰æ•ˆã€‚"</span> },
    { <span class="hljs-built_in">id</span>:<span class="hljs-string">"m3"</span>, received_at:<span class="hljs-string">"2026-02-10 10:03:00"</span>, sender:<span class="hljs-string">"é¡ºä¸°é€Ÿè¿"</span>, phone:<span class="hljs-string">"95338"</span>, <span class="hljs-built_in">source</span>:<span class="hljs-string">"sample"</span>, content:<span class="hljs-string">"ã€é¡ºä¸°ã€‘å¿«ä»¶å·²åˆ°è¾¾XXé©¿ç«™ï¼Œå–ä»¶ç  662913ï¼Œè¯·äº18:00å‰å–èµ°ã€‚"</span> },
    { <span class="hljs-built_in">id</span>:<span class="hljs-string">"m4"</span>, received_at:<span class="hljs-string">"2026-02-10 10:04:00"</span>, sender:<span class="hljs-string">"12345"</span>, phone:<span class="hljs-string">"12345"</span>, <span class="hljs-built_in">source</span>:<span class="hljs-string">"sample"</span>, content:<span class="hljs-string">"ã€12345æ”¿åŠ¡ã€‘æ‚¨åæ˜ çš„é—®é¢˜å·²å—ç†ï¼ŒæŸ¥è¯¢è¿›åº¦è¯·è®¿é—® https://gov.example.cn/track"</span> },
    { <span class="hljs-built_in">id</span>:<span class="hljs-string">"m5"</span>, received_at:<span class="hljs-string">"2026-02-10 10:05:00"</span>, sender:<span class="hljs-string">"æŸè¿è¥å•†"</span>, phone:<span class="hljs-string">"10086"</span>, <span class="hljs-built_in">source</span>:<span class="hljs-string">"sample"</span>, content:<span class="hljs-string">"æ‚¨æœ¬æœˆè¯è´¹è´¦å•å·²å‡ºï¼Œåº”ç¼´ 89.50 å…ƒï¼Œé€¾æœŸå°†å½±å“æœåŠ¡ã€‚"</span> },
    { <span class="hljs-built_in">id</span>:<span class="hljs-string">"m6"</span>, received_at:<span class="hljs-string">"2026-02-10 10:06:00"</span>, sender:<span class="hljs-string">"å¹³å®‰ä¿é™©"</span>, phone:<span class="hljs-string">"95511"</span>, <span class="hljs-built_in">source</span>:<span class="hljs-string">"sample"</span>, content:<span class="hljs-string">"ã€å¹³å®‰ã€‘æ‚¨çš„ä¿å•å°†äº2026-03-01åˆ°æœŸï¼Œè¯·åŠæ—¶ç»­ä¿ï¼Œè¯¦è¯¢4008000000ã€‚"</span> },
    { <span class="hljs-built_in">id</span>:<span class="hljs-string">"m7"</span>, received_at:<span class="hljs-string">"2026-02-10 10:07:00"</span>, sender:<span class="hljs-string">"æŸç”µå•†"</span>, phone:<span class="hljs-string">"1069xxxx"</span>, <span class="hljs-built_in">source</span>:<span class="hljs-string">"sample"</span>, content:<span class="hljs-string">"ã€äº¬ä¸œã€‘ä¼šå‘˜è´¦å·ç»‘å®šæ‰‹æœºå·å˜æ›´æˆåŠŸï¼Œå¦‚éæœ¬äººæ“ä½œè¯·è‡´ç”µ950618ã€‚"</span> },
    { <span class="hljs-built_in">id</span>:<span class="hljs-string">"m8"</span>, received_at:<span class="hljs-string">"2026-02-10 10:08:00"</span>, sender:<span class="hljs-string">"æŸå¹³å°"</span>, phone:<span class="hljs-string">"1069xxxx"</span>, <span class="hljs-built_in">source</span>:<span class="hljs-string">"sample"</span>, content:<span class="hljs-string">"ã€ç¾å›¢ã€‘æœ¬åº—æ–°å®¢ç«‹å‡åˆ¸å·²åˆ°è´¦ï¼Œç‚¹å‡» http://promo.example.com ç«‹å³ä½¿ç”¨ã€‚"</span> },
    { <span class="hljs-built_in">id</span>:<span class="hljs-string">"m9"</span>, received_at:<span class="hljs-string">"2026-02-10 10:09:00"</span>, sender:<span class="hljs-string">"å…¬å®‰åè¯ˆ"</span>, phone:<span class="hljs-string">"12110"</span>, <span class="hljs-built_in">source</span>:<span class="hljs-string">"sample"</span>, content:<span class="hljs-string">"ã€åè¯ˆä¸­å¿ƒã€‘è­¦æƒ•å†’å……å®¢æœé€€æ¬¾è¯ˆéª—ï¼Œä»»ä½•éªŒè¯ç å‡ä¸è¦é€éœ²ã€‚"</span> },
    { <span class="hljs-built_in">id</span>:<span class="hljs-string">"m10"</span>, received_at:<span class="hljs-string">"2026-02-10 10:10:00"</span>, sender:<span class="hljs-string">"æœªçŸ¥"</span>, phone:<span class="hljs-string">"unknown"</span>, <span class="hljs-built_in">source</span>:<span class="hljs-string">"sample"</span>, content:<span class="hljs-string">"æ‚¨æœ‰ä¸€ç¬”è®¢å•å¾…å¤„ç†ï¼Œè¯·è”ç³» 13800138000 è·å–è¯¦æƒ…ã€‚"</span> }
  ];
}
</code></pre>
<hr/>
<h3 data-id="heading-56">9) READMEï¼šè¿è¡Œã€æ‰“åŒ…ã€ç¦»çº¿åˆ†å‘ã€è‡ªæµ‹ä¸éªŒæ”¶ç‚¹</h3>
<h4 data-id="heading-57"><code>README.md</code></h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># çŸ­ä¿¡æ™ºæ ‡å®˜ï¼ˆSMS Tagging Officerï¼‰</span>

<span class="hljs-string">ç¦»çº¿æ¡Œé¢è½¯ä»¶ï¼šå¯¹å‡ åƒæ¡çŸ­ä¿¡è¿›è¡Œâ€œè¡Œä¸šå¤§ç±»</span> <span class="hljs-string">+</span> <span class="hljs-string">ç±»å‹â€ä¸¤å±‚æ ‡ç­¾ã€å®ä½“æŠ½å–ä¸å¯è§£é‡Š</span> <span class="hljs-string">reasons</span> <span class="hljs-string">è¾“å‡ºã€‚</span>
<span class="hljs-string">æ¨ç†å®Œå…¨ç¦»çº¿ï¼šllama.cpp</span> <span class="hljs-string">+</span> <span class="hljs-string">GGUF</span> <span class="hljs-string">æ¨¡å‹æ–‡ä»¶ï¼ˆç”¨æˆ·åœ¨è®¾ç½®é¡µé€‰æ‹©è·¯å¾„ï¼‰ã€‚</span>
<span class="hljs-string">æ•°æ®è½åœ°ï¼šSQLiteï¼ˆmessages</span> <span class="hljs-string">/</span> <span class="hljs-string">labels</span> <span class="hljs-string">/</span> <span class="hljs-string">audit_logsï¼‰ï¼Œæ”¯æŒå¯¼å…¥ã€æ‰¹å¤„ç†ã€å¤æ ¸ã€å¯¼å‡ºã€‚</span>

<span class="hljs-comment">## 1. åŠŸèƒ½è¾¹ç•Œï¼ˆå›ºå®šæšä¸¾ï¼‰</span>
<span class="hljs-string">ä¸€çº§è¡Œä¸šï¼šé‡‘èã€é€šç”¨ã€æ”¿åŠ¡ã€æ¸ é“ã€äº’è”ç½‘ã€å…¶ä»–</span>  
<span class="hljs-string">äºŒçº§ç±»å‹ï¼šéªŒè¯ç ã€äº¤æ˜“æé†’ã€è´¦å•å‚¬ç¼´ã€ä¿é™©ç»­ä¿ã€ç‰©æµå–ä»¶ã€ä¼šå‘˜è´¦å·å˜æ›´ã€æ”¿åŠ¡é€šçŸ¥ã€é£é™©æç¤ºã€è¥é”€æ¨å¹¿ã€å…¶ä»–</span>  
<span class="hljs-string">å®ä½“å­—æ®µï¼šbrandã€verification_codeã€amountã€balanceã€account_suffixã€time_textã€urlã€phone_in_textï¼ˆç¼ºå¤±å¡«</span> <span class="hljs-literal">null</span><span class="hljs-string">ï¼‰</span>

<span class="hljs-string">æ¯æ¡è¾“å‡ºç¨³å®š</span> <span class="hljs-string">JSONï¼Œå¿…é¡»åŒ…å«ï¼š</span>
<span class="hljs-string">confidenceã€reasonsã€rules_versionã€model_versionã€schema_versionã€needs_review</span>

<span class="hljs-comment">## 2. æœ¬åœ°æ¨ç†é›†æˆæ–¹å¼</span>
<span class="hljs-string">é»˜è®¤</span> <span class="hljs-string">Providerï¼šllama.cpp</span> <span class="hljs-string">sidecarï¼ˆå¯æ‰§è¡Œæ–‡ä»¶éšåº”ç”¨æ‰“åŒ…/æˆ–ç”±ç”¨æˆ·æŒ‡å®šè·¯å¾„ï¼‰</span>
<span class="hljs-string">åç»­å¯æ‰©å±•</span> <span class="hljs-string">Providerï¼šæ¯”å¦‚å…¶ä»–æœ¬åœ°æ¨ç†ã€ç”šè‡³è¿œç«¯ï¼ˆå¦‚æœä½ æœªæ¥å…è®¸è”ç½‘ï¼‰</span>

<span class="hljs-string">Provider</span> <span class="hljs-string">æŠ½è±¡ï¼šclassify(payload)</span> <span class="hljs-string">-&gt;</span> <span class="hljs-string">ModelOutput</span>

<span class="hljs-comment">## 3. ç¯å¢ƒå‡†å¤‡ï¼ˆå¼€å‘ï¼‰</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">Node.js</span> <span class="hljs-number">18</span><span class="hljs-string">+</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">pnpm</span> <span class="hljs-number">9</span><span class="hljs-string">+</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">Rust</span> <span class="hljs-string">stable</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">Tauri</span> <span class="hljs-string">CLI</span>

<span class="hljs-string">```bash</span>
<span class="hljs-string">pnpm</span> <span class="hljs-string">i</span>
<span class="hljs-string">pnpm</span> <span class="hljs-string">tauri:dev</span>


<span class="hljs-comment">## 4. llama.cpp ä¸æ¨¡å‹æ–‡ä»¶å‡†å¤‡ï¼ˆè¿è¡ŒæœŸç¦»çº¿ï¼‰</span>

<span class="hljs-string">ä½ éœ€è¦å‡†å¤‡ï¼š</span>

<span class="hljs-number">1</span><span class="hljs-string">.</span>  <span class="hljs-string">llama.cpp</span> <span class="hljs-string">å¯æ‰§è¡Œæ–‡ä»¶ï¼šllama-cli</span> <span class="hljs-string">(Windows:</span> <span class="hljs-string">llama-cli.exe)</span> <span class="hljs-string">æˆ–</span> <span class="hljs-string">llama</span>
<span class="hljs-number">1</span><span class="hljs-string">.</span>  <span class="hljs-string">GGUF</span> <span class="hljs-string">æ¨¡å‹æ–‡ä»¶ï¼ˆæ¨èå°æ¨¡å‹</span> <span class="hljs-string">q4/q5</span> <span class="hljs-string">é‡åŒ–ï¼‰</span>

<span class="hljs-string">æŠŠäºŒè¿›åˆ¶æ”¾åœ¨æœ¬æœºä»»æ„ç›®å½•ï¼Œæ¨¡å‹æ”¾åœ¨æœ¬æœºä»»æ„ç›®å½•ã€‚</span>  
<span class="hljs-string">åœ¨åº”ç”¨ã€Œè®¾ç½®é¡µã€å¡«å†™è·¯å¾„åï¼Œæ‰¹å¤„ç†é¡µå³å¯è¿è¡Œã€‚</span>

<span class="hljs-comment">## 5. ä¸€é”®è‡ªæµ‹æ­¥éª¤ï¼ˆéªŒæ”¶é—­ç¯ï¼‰</span>

<span class="hljs-number">1</span><span class="hljs-string">.</span>  <span class="hljs-string">æ‰“å¼€åº”ç”¨</span> <span class="hljs-string">-&gt;</span> <span class="hljs-string">å¯¼å…¥é¡µ</span> <span class="hljs-string">-&gt;</span> <span class="hljs-string">ç‚¹å‡»ã€ŒåŠ è½½å†…ç½®æ ·ä¾‹ã€-&gt;</span> <span class="hljs-string">å¯¼å…¥ï¼ˆ10æ¡ï¼‰</span>

<span class="hljs-number">1</span><span class="hljs-string">.</span>  <span class="hljs-string">è®¾ç½®é¡µï¼šå¡«å†™</span> <span class="hljs-string">sidecar_path</span> <span class="hljs-string">ä¸</span> <span class="hljs-string">model_path</span>

<span class="hljs-number">1</span><span class="hljs-string">.</span>  <span class="hljs-string">æ‰¹å¤„ç†é¡µï¼šå‹¾é€‰ã€Œåªè·‘æœªæ ‡æ³¨ã€-&gt;</span> <span class="hljs-string">å¼€å§‹</span>

<span class="hljs-number">1</span><span class="hljs-string">.</span>  <span class="hljs-string">åˆ—è¡¨å¤æ ¸é¡µï¼šè¾“å…¥</span> <span class="hljs-string">m1/m2...</span> <span class="hljs-string">æ‰“å¼€æŠ½å±‰ï¼Œä¿®æ”¹å­—æ®µ</span> <span class="hljs-string">-&gt;</span> <span class="hljs-string">ä¿å­˜</span>

<span class="hljs-number">1</span><span class="hljs-string">.</span>  <span class="hljs-string">éªŒè¯ç‚¹ï¼š</span>

    <span class="hljs-bullet">-</span>   <span class="hljs-string">labels</span> <span class="hljs-string">è¡¨å­˜åœ¨</span> <span class="hljs-string">message_id</span> <span class="hljs-string">å¯¹åº”è®°å½•</span>
    <span class="hljs-bullet">-</span>   <span class="hljs-string">audit_logs</span> <span class="hljs-string">è¡¨æ–°å¢ä¸€æ¡è®°å½•ï¼ˆbefore/after</span> <span class="hljs-string">æœ‰å·®å¼‚ï¼‰</span>
    <span class="hljs-bullet">-</span>   <span class="hljs-string">è¾“å‡º</span> <span class="hljs-string">JSON</span> <span class="hljs-string">å­—æ®µé½å…¨ï¼ˆentities</span> <span class="hljs-string">æ‰€æœ‰å­—æ®µéƒ½æœ‰ï¼Œç¼ºå¤±ä¸º</span> <span class="hljs-literal">null</span><span class="hljs-string">ï¼‰</span>
    <span class="hljs-bullet">-</span>   <span class="hljs-string">å†²çªæ ·æœ¬è¿›å…¥</span> <span class="hljs-string">needs_reviewï¼ˆä¾‹å¦‚åŒ…å«é‡‘é¢/é“¾æ¥å´è¢«æ¨¡å‹åˆ¤â€œå…¶ä»–â€æ—¶ï¼‰</span>

<span class="hljs-comment">## 6. å¦‚ä½•éªŒè¯è¾“å‡º JSON çº¦æŸ</span>

<span class="hljs-string">ä»“åº“</span> <span class="hljs-string">assets/json_schema_output.json</span> <span class="hljs-string">æä¾›</span> <span class="hljs-string">JSON</span> <span class="hljs-string">Schemaã€‚</span>  
<span class="hljs-string">ä½ å¯ä»¥ç”¨ä»»æ„</span> <span class="hljs-string">JSON</span> <span class="hljs-string">Schema</span> <span class="hljs-string">æ ¡éªŒå·¥å…·å¯¹å¯¼å‡ºçš„</span> <span class="hljs-string">JSONL</span> <span class="hljs-string">é€è¡ŒéªŒè¯ã€‚</span>

<span class="hljs-comment">## 7. æ‰“åŒ…ä¸åˆ†å‘</span>

<span class="hljs-string">```</span>
<span class="hljs-string">pnpm</span> <span class="hljs-string">tauri:build</span>
<span class="hljs-string">```</span>

<span class="hljs-string">äº§ç‰©åœ¨ï¼š</span>

<span class="hljs-bullet">-</span>   <span class="hljs-attr">Windows:</span> <span class="hljs-string">src-tauri/target/release/bundle/msi</span> <span class="hljs-string">æˆ–</span> <span class="hljs-string">nsis</span>
<span class="hljs-bullet">-</span>   <span class="hljs-attr">macOS:</span> <span class="hljs-string">.app</span> <span class="hljs-string">/</span> <span class="hljs-string">dmg</span>
<span class="hljs-bullet">-</span>   <span class="hljs-attr">Linux:</span> <span class="hljs-string">AppImage</span> <span class="hljs-string">/</span> <span class="hljs-string">deb</span>

<span class="hljs-comment">### åˆ†å‘æ³¨æ„</span>

<span class="hljs-bullet">-</span>   <span class="hljs-string">è¿è¡ŒæœŸå®Œå…¨ç¦»çº¿ï¼šSQLite</span> <span class="hljs-string">æ–‡ä»¶åœ¨åº”ç”¨æ•°æ®ç›®å½•ï¼Œæ¨¡å‹ä¸</span> <span class="hljs-string">sidecar</span> <span class="hljs-string">åœ¨æœ¬æœºè·¯å¾„ã€‚</span>

<span class="hljs-bullet">-</span>   <span class="hljs-string">è‹¥å¸Œæœ›éšåŒ…é™„å¸¦</span> <span class="hljs-string">llama.cpp</span> <span class="hljs-string">äºŒè¿›åˆ¶ï¼š</span>

    <span class="hljs-bullet">-</span>   <span class="hljs-string">å°†</span> <span class="hljs-string">sidecar</span> <span class="hljs-string">æ”¾å…¥</span> <span class="hljs-string">src-tauri/bin/</span> <span class="hljs-string">å¹¶åœ¨</span> <span class="hljs-string">tauri.conf.json</span> <span class="hljs-string">é…</span> <span class="hljs-string">sidecar</span>
    <span class="hljs-bullet">-</span>   <span class="hljs-string">è®¾ç½®é¡µé»˜è®¤å¡«å…¥</span> <span class="hljs-string">sidecar</span> <span class="hljs-string">çš„</span> <span class="hljs-string">resolved</span> <span class="hljs-string">è·¯å¾„ï¼ˆæ‰©å±•ç‚¹ï¼‰</span>

<span class="hljs-comment">## 8. æ‰©å±•ç‚¹ï¼ˆç”Ÿäº§å®Œå–„ï¼‰</span>

<span class="hljs-bullet">-</span>   <span class="hljs-string">åˆ—è¡¨é¡µæ¥å…¥åˆ†é¡µæŸ¥è¯¢ä¸è¿‡æ»¤ï¼šæŒ‰</span> <span class="hljs-string">industry/type/needs_review/confidence</span> <span class="hljs-string">åŒºé—´/å«é“¾æ¥/å«éªŒè¯ç /å«é‡‘é¢ç­‰</span>
<span class="hljs-bullet">-</span>   <span class="hljs-string">å¯¼å‡ºæ¥å£ï¼šæŒ‰ç­›é€‰æ¡ä»¶å¯¼å‡º</span> <span class="hljs-string">CSV/JSONLï¼Œæ”¯æŒä»…å¯¼å‡ºå·²å¤æ ¸æˆ–å…¨é‡</span>
<span class="hljs-bullet">-</span>   <span class="hljs-string">health</span> <span class="hljs-string">checkï¼šåœ¨è®¾ç½®é¡µè°ƒç”¨åç«¯</span> <span class="hljs-string">command</span> <span class="hljs-string">æ‰§è¡Œä¸€æ¬¡</span> <span class="hljs-string">`llama</span> <span class="hljs-string">-m</span> <span class="hljs-string">...</span> <span class="hljs-string">-p</span> <span class="hljs-string">"ping"</span><span class="hljs-string">`</span> <span class="hljs-string">å¹¶æ ¡éªŒ</span> <span class="hljs-string">JSON</span>
<span class="hljs-bullet">-</span>   <span class="hljs-string">æ¨¡å‹è¾“å‡ºæ›´ä¸¥æ ¼ï¼šåŠ å…¥</span> <span class="hljs-string">JSON</span> <span class="hljs-string">schema</span> <span class="hljs-string">çº¦æŸè§£ç ï¼ˆå¯åœ¨</span> <span class="hljs-string">llama.cpp</span> <span class="hljs-string">å‚æ•°æˆ–</span> <span class="hljs-string">prompt</span> <span class="hljs-string">ä¸­å¢å¼ºï¼‰</span>

<span class="hljs-comment"># ````</span>

<span class="hljs-meta">---
</span>
<span class="hljs-comment">## ä½ è¦çš„â€œè¯„ä»·â€ç»“è®ºï¼ˆåŸºäºå¯äº¤ä»˜æ€§ï¼‰</span>

<span class="hljs-bullet">-</span> <span class="hljs-string">è¿™å¥—æ¡†æ¶åœ¨ç¦»çº¿æ¡Œé¢äº¤ä»˜é‡Œå±äº</span> <span class="hljs-string">**èƒ½ç¨³å®šè·‘é€šã€èƒ½éªŒæ”¶ã€èƒ½æ‰©å±•**</span> <span class="hljs-string">çš„å½¢æ€ï¼šè§„åˆ™å±‚å…ˆæŠŠé«˜ç¡®å®šæ€§çŸ­ä¿¡æ‰“ç©¿ï¼Œæ¨¡å‹å±‚åªæ”¶ç°åŒºï¼Œèåˆå±‚æŠŠå†²çªèšç„¦åˆ°</span> <span class="hljs-string">needs_review</span> <span class="hljs-string">é˜Ÿåˆ—ï¼Œå¤æ ¸åŠ¨ä½œå…¨å®¡è®¡ï¼Œæœ€ç»ˆè¾“å‡ºç¨³å®š</span> <span class="hljs-string">JSONï¼Œæ»¡è¶³æŠ¥è¡¨ä¸æ²»ç†çš„å›æ”¾è¦æ±‚ã€‚</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">å…³é”®é£é™©ç‚¹é›†ä¸­åœ¨ä¸¤å¤„ï¼š**æ¨¡å‹è¾“å‡ºç¨³å®šæ€§**ï¼ˆä¸¥æ ¼</span> <span class="hljs-string">JSON/æšä¸¾çº¦æŸï¼‰ä¸</span> <span class="hljs-string">**æ‰¹å¤„ç†åå**ï¼ˆå¹¶å‘ã€è¶…æ—¶ã€é‡è¯•ã€ä¸å¡</span> <span class="hljs-string">UIï¼‰ã€‚è¿™ç‰ˆå·¥ç¨‹æŠŠä¸¤è€…éƒ½â€œå·¥ç¨‹åŒ–åœ°é’‰ä½â€äº†ï¼šsidecar</span> <span class="hljs-string">è°ƒç”¨</span> <span class="hljs-string">+</span> <span class="hljs-string">timeout</span> <span class="hljs-string">+</span> <span class="hljs-string">semaphore</span> <span class="hljs-string">+</span> <span class="hljs-string">äº‹ä»¶æ¨é€ï¼›prompt</span> <span class="hljs-string">å¼ºçº¦æŸ</span> <span class="hljs-string">+</span> <span class="hljs-string">è¾“å‡ºæˆªå–</span> <span class="hljs-string">+</span> <span class="hljs-string">å¤±è´¥è½ç›˜ã€‚</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">åç»­è¦ä¸Šç”Ÿäº§å¼ºåº¦ï¼Œä½ ä¸»è¦è¡¥ä¸‰å—ï¼šåˆ—è¡¨æŸ¥è¯¢/è¿‡æ»¤ä¸å¯¼å‡ºæ¥å£ã€è®¾ç½®é¡µ</span> <span class="hljs-string">health</span> <span class="hljs-string">checkã€è§„åˆ™å­—å…¸ä¸ä¼ä¸šè‡ªå®šä¹‰ï¼ˆå“ç‰Œ/æœºæ„è¯å…¸ã€é‡‘è/æ”¿åŠ¡æ›´ç»†çš„</span> <span class="hljs-string">signalsï¼‰ï¼Œè¿™äº›éƒ½å·²ç»ç•™å¥½äº†æ‰©å±•ç‚¹ã€‚</span>

<span class="hljs-meta">---
</span>
<span class="hljs-string">å¦‚æœä½ å¸Œæœ›æˆ‘æŠŠâ€œåˆ—è¡¨é¡µçš„åˆ†é¡µæŸ¥è¯¢</span> <span class="hljs-string">+</span> <span class="hljs-string">è¿‡æ»¤æ¡ä»¶ï¼ˆè¡Œä¸š/ç±»å‹/needs_review/ç½®ä¿¡åº¦åŒºé—´/å«é“¾æ¥/å«éªŒè¯ç /å«é‡‘é¢ï¼‰+</span> <span class="hljs-string">å¯¼å‡º</span> <span class="hljs-string">CSV/JSONLï¼ˆä»…å¤æ ¸/å…¨é‡ï¼‰â€ä¹Ÿè¡¥æˆå®Œæ•´å¯è·‘ä»£ç ï¼Œæˆ‘å¯ä»¥åœ¨ç°æœ‰éª¨æ¶ä¸Šç»§ç»­æŠŠ</span> <span class="hljs-string">`query_messages(filters)`ã€`export_labels(filters,</span> <span class="hljs-string">format,</span> <span class="hljs-string">reviewed_only)`</span> <span class="hljs-string">ä¸¤ä¸ªåç«¯</span> <span class="hljs-string">command</span> <span class="hljs-string">å’Œå‰ç«¯</span> <span class="hljs-string">FilterBar</span> <span class="hljs-string">+</span> <span class="hljs-string">MessageTable</span> <span class="hljs-string">çš„æ•´å¥—é“¾è·¯è¡¥é½ã€‚</span>
<span class="hljs-string">```</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring Boot ä¸­ static åˆ°åº•æ€ä¹ˆç”¨ï¼Ÿä¸€æ–‡è®²æ¸…ï¼Œé¿å¼€90%çš„å‘]]></title>    <link>https://juejin.cn/post/7604766431226445864</link>    <guid>https://juejin.cn/post/7604766431226445864</guid>    <pubDate>2026-02-10T08:10:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604766431226445864" data-draft-id="7604701848151523328" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring Boot ä¸­ static åˆ°åº•æ€ä¹ˆç”¨ï¼Ÿä¸€æ–‡è®²æ¸…ï¼Œé¿å¼€90%çš„å‘"/> <meta itemprop="keywords" content="Spring Boot,Java EE"/> <meta itemprop="datePublished" content="2026-02-10T08:10:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è™šæ‹Ÿä¸–ç•Œ"/> <meta itemprop="url" content="https://juejin.cn/user/1118643258130796"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring Boot ä¸­ static åˆ°åº•æ€ä¹ˆç”¨ï¼Ÿä¸€æ–‡è®²æ¸…ï¼Œé¿å¼€90%çš„å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1118643258130796/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è™šæ‹Ÿä¸–ç•Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T08:10:20.000Z" title="Tue Feb 10 2026 08:10:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä½†åœ¨springå®¹å™¨çš„ä¸–ç•Œé‡Œï¼Œstaticå’Œspring beanå¤©ç”Ÿä¸åˆæ‹ã€‚</p>
</blockquote>
<p>ç¿»å¼€æ‰‹è¾¹8å¹´çš„è€é¡¹ç›®ã€‚é™æ€å˜é‡ã€é™æ€æ–¹æ³•ã€é™æ€ä»£ç å—æ»¡å¤©é£ï¼Œä¸€ä¸å°å¿ƒå°±å†™å‡ºï¼š
ç©ºæŒ‡é’ˆã€å¾ªç¯ä¾èµ–ã€Bean æ³¨å…¥å¤±è´¥ã€çº¿ç¨‹ä¸å®‰å…¨ã€å†…å­˜æ³„æ¼â€¦</p>
<p>å¾ˆå¤šäººå¯¹ static çš„ç†è§£è¿˜åœç•™åœ¨ï¼š</p>
<ul>
<li>ä¸ç”¨åˆ›å»ºå¯¹è±¡ï¼Œç›´æ¥è°ƒç”¨</li>
<li>å…¨å±€å…±äº«ï¼Œåªå­˜ä¸€ä»½</li>
<li>ä»£ç ç®€æ´</li>
<li>ä½¿ç”¨æ–¹ä¾¿</li>
</ul>
<p>ä»Šå¤©è¿™ç¯‡ï¼Œå°±å¸¦ä½ å½»åº•ææ‡‚ï¼š
Spring Boot é‡Œ static åˆ°åº•èƒ½ç”¨åœ¨å“ªã€ä¸èƒ½ç”¨åœ¨å“ªã€æ­£ç¡®æ€ä¹ˆå†™ã€‚</p>
<h3 data-id="heading-0">ä¸€ã€å…ˆææ‡‚ï¼šstatic ä¸ Spring çš„æ ¸å¿ƒçŸ›ç›¾</h3>
<h4 data-id="heading-1">ä¸€å¥è¯æœ¬è´¨</h4>
<ul>
<li>
<p>static å±äºç±»ï¼Œä¸å½’ Spring ç®¡ç†ï¼›</p>
</li>
<li>
<p>Bean å±äºå®ä¾‹ï¼Œç”± Spring åˆ›å»ºã€æ³¨å…¥ã€ç®¡ç†ã€‚</p>
</li>
</ul>
<h4 data-id="heading-2">ç”Ÿå‘½å‘¨æœŸå®Œå…¨ä¸ä¸€æ ·</h4>
<ul>
<li>static åœ¨ç±»åŠ è½½å°±åˆå§‹åŒ–ï¼ŒJVM çº§åˆ«çš„å…¨å±€å…±äº«</li>
<li>Spring Bean æ˜¯å®¹å™¨åˆå§‹åŒ–åæ‰åˆ›å»ºï¼Œä¾èµ–æ³¨å…¥ã€AOPã€äº‹åŠ¡å…¨é å®ƒã€‚</li>
</ul>
<h3 data-id="heading-3">äºŒã€Spring Boot ä¸­æ¨èä½¿ç”¨ static çš„ 4 ä¸ªåœºæ™¯</h3>
<h4 data-id="heading-4">1. å¸¸é‡å®šä¹‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">LOGIN_TOKEN_KEY</span> <span class="hljs-operator">=</span> <span class="hljs-string">"token"</span>;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MAX_PAGE_SIZE</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;
</code></pre>
<p>ä¸å˜ã€å…±äº«ã€æ— çŠ¶æ€ï¼Œæœ€æ ‡å‡†ç”¨æ³•ã€‚</p>
<h4 data-id="heading-5">2. æ— çŠ¶æ€çº¯å·¥å…·æ–¹æ³•</h4>
<p>ä¸ä¾èµ–ä»»ä½• Beanã€ä¸æ“ä½œæˆå‘˜å˜é‡ã€ä¸è¯»å†™çŠ¶æ€ï¼š</p>
<ul>
<li>å­—ç¬¦ä¸²å¤„ç†</li>
<li>æ—¥æœŸæ ¼å¼åŒ–</li>
<li>æ•°å€¼è®¡ç®—</li>
<li>åŠ å¯†è§£å¯†</li>
</ul>
<p>å·¥å…·ç±»å†™æ³•è§„èŒƒï¼š</p>
<pre><code class="hljs language-java" lang="java">  &#13;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DateUtils</span> {
    <span class="hljs-comment">// ç¦æ­¢å®ä¾‹åŒ–</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title function_">DateUtils</span><span class="hljs-params">()</span> {}
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">format</span><span class="hljs-params">(Date date)</span> {...}
}
</code></pre>
<h4 data-id="heading-6">3. ä¸€æ¬¡æ€§ã€æ— ä¾èµ–åˆå§‹åŒ–</h4>
<p>æ¯”å¦‚åŠ è½½é©±åŠ¨ã€åˆå§‹åŒ–æœ¬åœ°åº“ã€åŠ è½½æœ¬åœ°æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">static</span> {
    <span class="hljs-comment">// åªæ‰§è¡Œä¸€æ¬¡ï¼Œæ— å¤–éƒ¨ä¾èµ–</span>
}
</code></pre>
<p>ç¦æ­¢åœ¨ static å—ä¸­è¯»é…ç½®ã€è°ƒ Serviceã€æŸ¥æ•°æ®åº“ã€‚</p>
<h4 data-id="heading-7">4. çº¿ç¨‹å®‰å…¨çš„å…¨å±€è®¡æ•°å™¨/ç¼“å­˜</h4>
<p>ç”¨çº¿ç¨‹å®‰å…¨ç±»ä¿æŒé™æ€å˜é‡ï¼š</p>
<ul>
<li>AtomicInteger</li>
<li>ConcurrentHashMap</li>
<li>LongAdder</li>
</ul>
<p>ç¦æ­¢ç”¨æ™®é€š static å˜é‡åšè®¡æ•°ã€‚</p>
<h3 data-id="heading-8">ä¸‰ã€Spring Boot ä¸­ç»å¯¹ç¦æ­¢ä½¿ç”¨ static çš„ 5 æ¡çº¢çº¿</h3>
<p>è¿™ 5 æ¡ï¼Œç¢°ä¸€ä¸ªå‘ä¸€ä¸ªï¼Œè€é¡¹ç›®é‡ç¾åŒºï¼š</p>
<h4 data-id="heading-9">1. ç¦æ­¢ç›´æ¥ @Autowired æ³¨å…¥ static å˜é‡</h4>
<pre><code class="hljs language-java" lang="java">  &#13;
<span class="hljs-comment">// é”™è¯¯ï¼æ— æ•ˆæ³¨å…¥ï¼</span>
<span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> UserService userService;
</code></pre>
<h4 data-id="heading-10">2. ç¦æ­¢åœ¨ static ä»£ç å—é‡Œè¯»å–é…ç½®ã€è°ƒç”¨ Service</h4>
<p>staticåŠ è½½é¡ºåºæ—©äº Spring ä¸Šä¸‹æ–‡ï¼Œå¾ˆå®¹æ˜“è¯»åˆ° nullã€‚</p>
<h4 data-id="heading-11">3. ç¦æ­¢ç”¨ static å­˜ä¸šåŠ¡çŠ¶æ€ã€ç”¨æˆ·ä¿¡æ¯</h4>
<p>å…¨å±€å…±äº«ï¼Œä¼šå¯¼è‡´ï¼š</p>
<ul>
<li>ä¸²ç”¨æˆ·</li>
<li>çº¿ç¨‹ä¸å®‰å…¨</li>
<li>é›†ç¾¤ä¸åŒæ­¥</li>
<li>å†…å­˜æ³„æ¼ OOM</li>
</ul>
<h4 data-id="heading-12">4. ç¦æ­¢ä¸šåŠ¡æ–¹æ³•ã€äº‹åŠ¡æ–¹æ³•ã€AOP æ–¹æ³•ç”¨ static</h4>
<p>äº‹åŠ¡ã€åˆ‡é¢ã€å¼‚æ­¥å…¨å¤±æ•ˆã€‚</p>
<h4 data-id="heading-13">5. ç¦æ­¢ç”¨ static åšä¸šåŠ¡ç¼“å­˜</h4>
<p>æ— æ³•æ·˜æ±°ã€æ— æ³•åˆ†å¸ƒå¼ã€æ— æ³•ç›‘æ§ï¼Œè¿Ÿæ—©ç‚¸å†…å­˜ã€‚</p>
<h3 data-id="heading-14">å››ã€å¿…é¡»åœ¨ static é‡Œç”¨ Beanï¼Ÿå”¯ä¸€æ ‡å‡†å†™æ³•</h3>
<p>å¦‚æœä½ åœ¨é‡æ„è€é¡¹ç›®ï¼Œå®åœ¨é¿ä¸å¼€ï¼š
é™æ€æ–¹æ³•é‡Œè¦è°ƒç”¨ Service / Mapper / é…ç½®</p>
<p>ç”¨è¿™ä¸€æ®µ Spring ä¸Šä¸‹æ–‡å·¥å…·ç±»ï¼Œå…¨é¡¹ç›®é€šç”¨ï¼š</p>
<pre><code class="hljs language-java" lang="java">  &#13;
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringContextUtil</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ApplicationContextAware</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> ApplicationContext context;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setApplicationContext</span><span class="hljs-params">(ApplicationContext applicationContext)</span> {
        context = applicationContext;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; T <span class="hljs-title function_">getBean</span><span class="hljs-params">(Class&lt;T&gt; clazz)</span> {
        <span class="hljs-keyword">return</span> context.getBean(clazz);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getProperty</span><span class="hljs-params">(String key)</span> {
        <span class="hljs-keyword">return</span> context.getEnvironment().getProperty(key);
    }
}
</code></pre>
<p>ä½¿ç”¨æ–¹å¼ï¼š</p>
<pre><code class="hljs language-java" lang="java">  &#13;
<span class="hljs-type">UserService</span> <span class="hljs-variable">userService</span> <span class="hljs-operator">=</span> SpringContextUtil.getBean(UserService.class);
<span class="hljs-type">String</span> <span class="hljs-variable">appName</span> <span class="hljs-operator">=</span> SpringContextUtil.getProperty(<span class="hljs-string">"app.name"</span>);
</code></pre>
<p>æ³¨æ„ï¼šè¿™æ˜¯å…¼å®¹æ–¹æ¡ˆï¼Œä¸æ˜¯æ¨èæ–¹æ¡ˆã€‚
èƒ½é‡æ„ä¸ºé staticï¼Œå°½é‡é‡æ„ã€‚</p>
<h3 data-id="heading-15">äº”ã€æœ€åæ€»ç»“ï¼šSpring Boot static æœ€ä½³å®è·µ</h3>
<ul>
<li>åªç»™å¸¸é‡ã€çº¯å·¥å…·ç”¨ static</li>
<li>ä¸šåŠ¡ä»£ç ã€Spring Bean åšå†³è¿œç¦» static</li>
<li>è€é¡¹ç›® static å…ˆå…¼å®¹ã€å†é€æ­¥é‡æ„</li>
<li>å·¥å…·ç±»ç»Ÿä¸€ï¼šfinal + ç§æœ‰æ„é€  + é™æ€æ–¹æ³•</li>
<li>å¿…é¡»åœ¨é™æ€é‡Œç”¨ Bean â†’ ä»SpringContextUtil è·å–</li>
</ul>
<p>ä¼˜é›…ä¸é‡è¦ï¼Œèƒ½è¿è¡Œã€å¥½ç»´æŠ¤ã€ä¸è¸©å‘ï¼Œæœ€é‡è¦ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çœ‹ä¸€ä¸‹å›è°ƒ]]></title>    <link>https://juejin.cn/post/7604761524977778697</link>    <guid>https://juejin.cn/post/7604761524977778697</guid>    <pubDate>2026-02-10T08:03:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604761524977778697" data-draft-id="7604757482004332607" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çœ‹ä¸€ä¸‹å›è°ƒ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-10T08:03:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ccnocare"/> <meta itemprop="url" content="https://juejin.cn/user/1704658072243594"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çœ‹ä¸€ä¸‹å›è°ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1704658072243594/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ccnocare
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T08:03:31.000Z" title="Tue Feb 10 2026 08:03:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å›è°ƒå‡½æ•°çš„æœ¬è´¨æ˜¯ï¼š<strong>æŠŠä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨åˆé€‚çš„æ—¶æœºï¼ˆæ¯”å¦‚å¼‚æ­¥æ“ä½œå®Œæˆã€æŸä¸ªäº‹ä»¶è§¦å‘ï¼‰ç”±åè€…è°ƒç”¨è¿™ä¸ªå‡½æ•°</strong>ã€‚å‰ç«¯ä¸­å›è°ƒçš„å®ç°æ–¹å¼ä¸»è¦åˆ†ä¸ºåŸºç¡€å›è°ƒã€é«˜é˜¶ç”¨æ³•å’Œç°ä»£è¯­æ³•ç³–ï¼ˆPromise/async-awaitæœ¬è´¨ä¹Ÿæ˜¯åŸºäºå›è°ƒçš„å°è£…ï¼‰ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€å›è°ƒå‡½æ•°çš„æ ¸å¿ƒæœ¬è´¨ï¼ˆå…ˆç†è§£åŸºç¡€ï¼‰</h2>
<p>å›è°ƒå‡½æ•°çš„æ ¸å¿ƒé€»è¾‘æ˜¯ã€Œå§”æ‰˜æ‰§è¡Œã€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ ¸å¿ƒç»“æ„ï¼šå‡½æ•°Aæ¥æ”¶å‡½æ•°Bä½œä¸ºå‚æ•°ï¼Œåœ¨Aå†…éƒ¨è°ƒç”¨B </span>
<span class="hljs-keyword">function</span> ä¸»å‡½æ•°(å›è°ƒå‡½æ•°) { 
    <span class="hljs-comment">// æ‰§è¡Œä¸»é€»è¾‘ï¼ˆåŒæ­¥/å¼‚æ­¥ï¼‰ </span>
    å›è°ƒå‡½æ•°(<span class="hljs-comment">/* ä¼ é€’å‚æ•° */</span>); <span class="hljs-comment">// åœ¨åˆé€‚æ—¶æœºè°ƒç”¨å›è°ƒ </span>
} 
<span class="hljs-comment">// ä½¿ç”¨ï¼šä¼ å…¥å›è°ƒå‡½æ•° </span>
ä¸»å‡½æ•°(<span class="hljs-keyword">function</span> å›è°ƒå‡½æ•°(å‚æ•°) { 
    <span class="hljs-comment">// å›è°ƒé€»è¾‘ </span>
}); 
</code></pre>
<h2 data-id="heading-1">äºŒã€å›è°ƒçš„å…·ä½“å®ç°æ–¹å¼ï¼ˆæŒ‰åœºæ™¯åˆ†ç±»ï¼‰</h2>
<h3 data-id="heading-2">1. åŒæ­¥å›è°ƒï¼ˆç«‹å³æ‰§è¡Œï¼‰</h3>
<p><strong>åœºæ™¯</strong>ï¼šæ•°ç»„æ–¹æ³•ï¼ˆforEach/map/filterï¼‰ã€ç®€å•çš„é€»è¾‘å§”æ‰˜ï¼ˆå¦‚æ•°æ®å¤„ç†å®Œæˆåå›è°ƒï¼‰ã€‚
<strong>ç‰¹ç‚¹</strong>ï¼šå›è°ƒå‡½æ•°åœ¨ä¸»å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­<strong>ç«‹å³åŒæ­¥æ‰§è¡Œ</strong>ï¼Œæ— å»¶è¿Ÿã€‚</p>
<h4 data-id="heading-3">ç¤ºä¾‹1ï¼šè‡ªå®šä¹‰åŒæ­¥å›è°ƒå‡½æ•°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸»å‡½æ•°ï¼šå¤„ç†æ•°æ®ï¼Œå®Œæˆåè°ƒç”¨å›è°ƒè¿”å›ç»“æœ </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processData</span>(<span class="hljs-params">data, callback</span>) { 
    <span class="hljs-comment">// åŒæ­¥å¤„ç†æ•°æ®ï¼ˆæ¯”å¦‚è¿‡æ»¤ã€è½¬æ¢ï¼‰ </span>
    <span class="hljs-keyword">const</span> processed = data.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item * <span class="hljs-number">2</span>); 
    <span class="hljs-comment">// è°ƒç”¨å›è°ƒï¼Œä¼ é€’å¤„ç†åçš„ç»“æœ </span>
    <span class="hljs-title function_">callback</span>(processed); 
} 
<span class="hljs-comment">// ä½¿ç”¨ï¼šä¼ å…¥å›è°ƒå‡½æ•° </span>
<span class="hljs-keyword">const</span> rawData = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]; 
<span class="hljs-title function_">processData</span>(rawData, <span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>) { 
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤„ç†åçš„æ•°æ®ï¼š'</span>, result); <span class="hljs-comment">// è¾“å‡ºï¼š[2,4,6] </span>
}); 
<span class="hljs-comment">// ç®­å¤´å‡½æ•°ç®€åŒ–å›è°ƒï¼ˆæ›´å¸¸ç”¨ï¼‰ </span>
<span class="hljs-title function_">processData</span>(rawData, <span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> { 
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç®­å¤´å‡½æ•°å›è°ƒï¼š'</span>, result); <span class="hljs-comment">// è¾“å‡ºï¼š[2,4,6] </span>
}); 
</code></pre>
<h4 data-id="heading-4">ç¤ºä¾‹2ï¼šæ•°ç»„å†…ç½®åŒæ­¥å›è°ƒï¼ˆé«˜é¢‘ä½¿ç”¨ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]; 

<span class="hljs-comment">// forEach å›è°ƒï¼šéå†æ¯ä¸ªå…ƒç´  </span>
arr.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> { 
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç´¢å¼•<span class="hljs-subst">${index}</span>çš„å€¼ï¼š<span class="hljs-subst">${item}</span>`</span>); 
}); 

<span class="hljs-comment">// filter å›è°ƒï¼šè¿‡æ»¤ç¬¦åˆæ¡ä»¶çš„å…ƒç´  </span>
<span class="hljs-keyword">const</span> evenArr = arr.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(evenArr); <span class="hljs-comment">// [2,4] </span>

<span class="hljs-comment">// map å›è°ƒï¼šè½¬æ¢å…ƒç´  </span>
<span class="hljs-keyword">const</span> doubleArr = arr.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item * <span class="hljs-number">2</span>); 
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(doubleArr); <span class="hljs-comment">// [2,4,6,8] </span>
</code></pre>
<h3 data-id="heading-5">2. å¼‚æ­¥å›è°ƒï¼ˆå»¶è¿Ÿæ‰§è¡Œï¼‰</h3>
<p><strong>åœºæ™¯</strong>ï¼šå®šæ—¶å™¨ã€äº‹ä»¶ç›‘å¬ã€AJAXè¯·æ±‚ã€æ–‡ä»¶è¯»å†™ï¼ˆNode.jsï¼‰ç­‰å¼‚æ­¥æ“ä½œã€‚
<strong>ç‰¹ç‚¹</strong>ï¼šå›è°ƒå‡½æ•°ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆåè§¦å‘ï¼Œè¿™æ˜¯å›è°ƒæœ€æ ¸å¿ƒçš„ä½¿ç”¨åœºæ™¯ã€‚</p>
<h4 data-id="heading-6">ç¤ºä¾‹1ï¼šå®šæ—¶å™¨å›è°ƒï¼ˆsetTimeout/setIntervalï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// setTimeoutï¼šå»¶è¿Ÿ1ç§’æ‰§è¡Œå›è°ƒ </span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> { 
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'1ç§’åæ‰§è¡Œçš„å›è°ƒ'</span>); 
}, <span class="hljs-number">1000</span>); 

<span class="hljs-comment">// å¸¦å‚æ•°çš„å¼‚æ­¥å›è°ƒ </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">delayCallback</span>(<span class="hljs-params">time, callback</span>) { 
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">callback</span>(<span class="hljs-string">`å»¶è¿Ÿ<span class="hljs-subst">${time}</span>msåæ‰§è¡Œ`</span>); 
    }, time); 
} 

<span class="hljs-comment">// ä½¿ç”¨ </span>
<span class="hljs-title function_">delayCallback</span>(<span class="hljs-number">1500</span>, <span class="hljs-function">(<span class="hljs-params">msg</span>) =&gt;</span> { 
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(msg); <span class="hljs-comment">// 1500msåè¾“å‡ºï¼šå»¶è¿Ÿ1500msåæ‰§è¡Œ </span>
}); 
</code></pre>
<h4 data-id="heading-7">ç¤ºä¾‹2ï¼šDOMäº‹ä»¶ç›‘å¬å›è°ƒï¼ˆå‰ç«¯æœ€å¸¸ç”¨ï¼‰</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"btn"</span>&gt;</span>
    ç‚¹å‡»æˆ‘
<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span> 
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"> 
    <span class="hljs-keyword">const</span> btn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'btn'</span>); 
    
    <span class="hljs-comment">// æ–¹å¼1ï¼šåŒ¿åå‡½æ•°å›è°ƒ </span>
    btn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> { 
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æŒ‰é’®è¢«ç‚¹å‡»ï¼ˆåŒ¿åå›è°ƒï¼‰'</span>); 
    }); 
    
    <span class="hljs-comment">// æ–¹å¼2ï¼šå‘½åå‡½æ•°å›è°ƒï¼ˆä¾¿äºç§»é™¤ç›‘å¬ï¼‰</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"/>) { 
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æŒ‰é’®è¢«ç‚¹å‡»ï¼ˆå‘½åå›è°ƒï¼‰'</span>); 
    }
    
    btn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, handleClick); 
    
    <span class="hljs-comment">// ç§»é™¤å›è°ƒï¼ˆå¿…é¡»ç”¨å‘½åå‡½æ•°ï¼‰ </span>
    <span class="hljs-comment">// btn.removeEventListener('click', handleClick); </span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span> 
</code></pre>
<h4 data-id="heading-8">ç¤ºä¾‹3ï¼šAJAXè¯·æ±‚å›è°ƒï¼ˆç»å…¸å¼‚æ­¥åœºæ™¯ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŸç”ŸXMLHttpRequestå›è°ƒ </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">requestData</span>(<span class="hljs-params">url, successCallback, errorCallback</span>) { 
    <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();
    xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">'GET'</span>, url);
    xhr.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">status</span> &gt;= <span class="hljs-number">200</span> &amp;&amp; xhr.<span class="hljs-property">status</span> &lt; <span class="hljs-number">300</span>) { 
            <span class="hljs-comment">// æˆåŠŸå›è°ƒï¼šä¼ é€’å“åº”æ•°æ®</span>
            <span class="hljs-title function_">successCallback</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(xhr.<span class="hljs-property">responseText</span>));
        } <span class="hljs-keyword">else</span> { 
            <span class="hljs-comment">// å¤±è´¥å›è°ƒï¼šä¼ é€’é”™è¯¯ä¿¡æ¯ </span>
            <span class="hljs-title function_">errorCallback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`è¯·æ±‚å¤±è´¥ï¼š<span class="hljs-subst">${xhr.status}</span>`</span>)); 
        } 
    }; 
    xhr.<span class="hljs-property">onerror</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) { 
        <span class="hljs-title function_">errorCallback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'ç½‘ç»œé”™è¯¯'</span>)); 
    }; 
    xhr.<span class="hljs-title function_">send</span>(); 
} 
<span class="hljs-comment">// ä½¿ç”¨ï¼šä¼ å…¥æˆåŠŸ/å¤±è´¥å›è°ƒ </span>
<span class="hljs-title function_">requestData</span>( 
    <span class="hljs-string">'https://jsonplaceholder.typicode.com/todos/1'</span>, 
    <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> { 
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚æˆåŠŸï¼š'</span>, data); <span class="hljs-comment">// è¾“å‡ºè¿”å›çš„todoæ•°æ® </span>
    },
    <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> { 
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥ï¼š'</span>, error); 
    } 
); 
</code></pre>
<h3 data-id="heading-9">3. å›è°ƒçš„è¿›é˜¶ç”¨æ³•</h3>
<h4 data-id="heading-10">ï¼ˆ1ï¼‰é”™è¯¯ä¼˜å…ˆå›è°ƒï¼ˆNode.jsè§„èŒƒï¼Œå‰ç«¯ä¹Ÿå¸¸ç”¨ï¼‰</h4>
<p><strong>æ ¸å¿ƒè§„åˆ™</strong>ï¼šå›è°ƒå‡½æ•°çš„<strong>ç¬¬ä¸€ä¸ªå‚æ•°å›ºå®šä¸ºé”™è¯¯å¯¹è±¡</strong>ï¼ˆæ— é”™è¯¯åˆ™ä¸ºnullï¼‰ï¼Œç¬¬äºŒä¸ªåŠä»¥åå‚æ•°ä¸ºæˆåŠŸæ•°æ®ã€‚
<strong>ä¼˜åŠ¿</strong>ï¼šç»Ÿä¸€é”™è¯¯å¤„ç†é€»è¾‘ï¼Œå¯è¯»æ€§æ›´é«˜ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¨¡æ‹Ÿè¯»å–æ–‡ä»¶ï¼ˆNode.jsé£æ ¼ï¼‰ </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">readFile</span>(<span class="hljs-params">filename, callback</span>) { 
    <span class="hljs-comment">// æ¨¡æ‹Ÿå¼‚æ­¥è¯»å– </span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> { 
        <span class="hljs-keyword">if</span> (filename === <span class="hljs-string">'test.txt'</span>) { 
            <span class="hljs-comment">// æ— é”™è¯¯ï¼šç¬¬ä¸€ä¸ªå‚æ•°ä¸ºnullï¼Œç¬¬äºŒä¸ªä¸ºæ•°æ® </span>
            <span class="hljs-title function_">callback</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">'æ–‡ä»¶å†…å®¹ï¼šHello World'</span>); 
        } <span class="hljs-keyword">else</span> { 
            <span class="hljs-comment">// æœ‰é”™è¯¯ï¼šç¬¬ä¸€ä¸ªå‚æ•°ä¸ºé”™è¯¯å¯¹è±¡ </span>
            <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'æ–‡ä»¶ä¸å­˜åœ¨'</span>), <span class="hljs-literal">null</span>); 
        } 
    }, <span class="hljs-number">1000</span>); 
} 
<span class="hljs-comment">// ä½¿ç”¨ï¼šé”™è¯¯ä¼˜å…ˆå›è°ƒ </span>
<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'test.txt'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> { 
    <span class="hljs-keyword">if</span> (err) { 
        <span class="hljs-comment">// ä¼˜å…ˆå¤„ç†é”™è¯¯ </span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯»å–å¤±è´¥ï¼š'</span>, err); 
        <span class="hljs-keyword">return</span>; 
    } 
    <span class="hljs-comment">// å¤„ç†æˆåŠŸæ•°æ® </span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯»å–æˆåŠŸï¼š'</span>, data);
});
<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'none.txt'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> { 
    <span class="hljs-keyword">if</span> (err) { 
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯»å–å¤±è´¥ï¼š'</span>, err); <span class="hljs-comment">// è¾“å‡ºï¼šè¯»å–å¤±è´¥ï¼šError: æ–‡ä»¶ä¸å­˜åœ¨ </span>
        <span class="hljs-keyword">return</span>; 
    } 
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data); 
}); 
</code></pre>
<h4 data-id="heading-11">ï¼ˆ2ï¼‰å›è°ƒåœ°ç‹±ï¼ˆé—®é¢˜åœºæ™¯ï¼‰ä¸è§£å†³</h4>
<p><strong>å›è°ƒåœ°ç‹±</strong>ï¼šå¤šå±‚å¼‚æ­¥å›è°ƒåµŒå¥—ï¼Œå¯¼è‡´ä»£ç å¯è¯»æ€§å·®ã€ç»´æŠ¤å›°éš¾ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å›è°ƒåœ°ç‹±ç¤ºä¾‹ï¼šå¤šå±‚åµŒå¥— </span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> { 
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬ä¸€æ­¥ï¼šè·å–ç”¨æˆ·ID'</span>); 
    <span class="hljs-keyword">const</span> userId = <span class="hljs-number">1</span>; 
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> { 
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç¬¬äºŒæ­¥ï¼šæ ¹æ®ID<span class="hljs-subst">${userId}</span>è·å–ç”¨æˆ·ä¿¡æ¯`</span>); 
        <span class="hljs-keyword">const</span> user = { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span> }; 
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> { 
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç¬¬ä¸‰æ­¥ï¼šè·å–<span class="hljs-subst">${user.name}</span>çš„è®¢å•`</span>); 
            <span class="hljs-keyword">const</span> orders = [{ <span class="hljs-attr">id</span>: <span class="hljs-number">101</span>, <span class="hljs-attr">goods</span>: <span class="hljs-string">'æ‰‹æœº'</span> }];
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœ€ç»ˆç»“æœï¼š'</span>, orders); 
        }, <span class="hljs-number">1000</span>); 
    }, <span class="hljs-number">1000</span>); 
}, <span class="hljs-number">1000</span>);
</code></pre>
<p><strong>è§£å†³æ–¹å¼1ï¼šæ‹†åˆ†å‘½åå‡½æ•°</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ‹†åˆ†å›è°ƒä¸ºå‘½åå‡½æ•°ï¼Œå‡å°‘åµŒå¥— </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserId</span>(<span class="hljs-params">callback</span>) { 
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> { 
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬ä¸€æ­¥ï¼šè·å–ç”¨æˆ·ID'</span>); 
        <span class="hljs-title function_">callback</span>(<span class="hljs-number">1</span>); 
    }, <span class="hljs-number">1000</span>); 
} 
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserInfo</span>(<span class="hljs-params">userId, callback</span>) { 
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> { 
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç¬¬äºŒæ­¥ï¼šæ ¹æ®ID<span class="hljs-subst">${userId}</span>è·å–ç”¨æˆ·ä¿¡æ¯`</span>); 
        <span class="hljs-title function_">callback</span>({ <span class="hljs-attr">id</span>: userId, <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span> }); 
    }, <span class="hljs-number">1000</span>); 
}
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getOrders</span>(<span class="hljs-params">user, callback</span>) { 
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> { 
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç¬¬ä¸‰æ­¥ï¼šè·å–<span class="hljs-subst">${user.name}</span>çš„è®¢å•`</span>); 
        <span class="hljs-title function_">callback</span>([{ <span class="hljs-attr">id</span>: <span class="hljs-number">101</span>, <span class="hljs-attr">goods</span>: <span class="hljs-string">'æ‰‹æœº'</span> }]); 
    }, <span class="hljs-number">1000</span>); 
} 
<span class="hljs-comment">// é“¾å¼è°ƒç”¨ï¼ˆæ— åµŒå¥—ï¼‰ </span>
<span class="hljs-title function_">getUserId</span>(<span class="hljs-function">(<span class="hljs-params">userId</span>) =&gt;</span> { 
    <span class="hljs-title function_">getUserInfo</span>(userId, <span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> { 
        <span class="hljs-title function_">getOrders</span>(user, <span class="hljs-function">(<span class="hljs-params">orders</span>) =&gt;</span> { 
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœ€ç»ˆç»“æœï¼š'</span>, orders); 
        }); 
    });
});
</code></pre>
<p><strong>è§£å†³æ–¹å¼2ï¼šPromiseå°è£…ï¼ˆç°ä»£ä¸»æµï¼‰</strong>
Promiseæœ¬è´¨æ˜¯å›è°ƒçš„ã€Œä¼˜é›…å°è£…ã€ï¼Œå°†åµŒå¥—å›è°ƒè½¬ä¸ºé“¾å¼è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç”¨Promiseå°è£…å¼‚æ­¥æ“ä½œ </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserId</span>(<span class="hljs-params"/>) { 
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> { 
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> { 
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬ä¸€æ­¥ï¼šè·å–ç”¨æˆ·ID'</span>); 
            <span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>);
        }, <span class="hljs-number">1000</span>); 
    }); 
} 
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserInfo</span>(<span class="hljs-params">userId</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> { 
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç¬¬äºŒæ­¥ï¼šæ ¹æ®ID<span class="hljs-subst">${userId}</span>è·å–ç”¨æˆ·ä¿¡æ¯`</span>);
            <span class="hljs-title function_">resolve</span>({ <span class="hljs-attr">id</span>: userId, <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span> }); 
        }, <span class="hljs-number">1000</span>); 
    }); 
}
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getOrders</span>(<span class="hljs-params">user</span>) { 
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> { 
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç¬¬ä¸‰æ­¥ï¼šè·å–<span class="hljs-subst">${user.name}</span>çš„è®¢å•`</span>);
            <span class="hljs-title function_">resolve</span>([{ <span class="hljs-attr">id</span>: <span class="hljs-number">101</span>, <span class="hljs-attr">goods</span>: <span class="hljs-string">'æ‰‹æœº'</span> }]); 
        }, <span class="hljs-number">1000</span>); 
    });
} 
<span class="hljs-comment">// é“¾å¼è°ƒç”¨ï¼ˆæ— åµŒå¥—ï¼‰ </span>
<span class="hljs-title function_">getUserId</span>()
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">userId</span>) =&gt;</span> <span class="hljs-title function_">getUserInfo</span>(userId))
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> <span class="hljs-title function_">getOrders</span>(user))
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">orders</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœ€ç»ˆç»“æœï¼š'</span>, orders);
    });
</code></pre>
<p><strong>è§£å†³æ–¹å¼3ï¼šasync/awaitï¼ˆè¯­æ³•ç³–ï¼Œæœ€ç®€æ´ï¼‰</strong>
async-awaitæ˜¯Promiseçš„è¯­æ³•ç³–ï¼Œå½»åº•æ¶ˆé™¤å›è°ƒå†™æ³•ï¼Œè½¬ä¸ºåŒæ­¥é£æ ¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŸºäºä¸Šé¢çš„Promiseå‡½æ•°ï¼Œä½¿ç”¨</span>
<span class="hljs-keyword">async</span>-<span class="hljs-keyword">await</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-params"/>) { 
    <span class="hljs-keyword">const</span> userId = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getUserId</span>(); 
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getUserInfo</span>(userId); 
    <span class="hljs-keyword">const</span> orders = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getOrders</span>(user); 
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœ€ç»ˆç»“æœï¼š'</span>, orders); 
} 
<span class="hljs-title function_">fetchData</span>();
</code></pre>
<h3 data-id="heading-12">4. è‡ªå®šä¹‰å¯æ§å›è°ƒï¼ˆå¸¦æ¡ä»¶/ä¸Šä¸‹æ–‡ï¼‰</h3>
<h4 data-id="heading-13">ç¤ºä¾‹1ï¼šå¸¦æ‰§è¡Œæ¡ä»¶çš„å›è°ƒ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åªæœ‰æ»¡è¶³æ¡ä»¶æ‰æ‰§è¡Œå›è°ƒ </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">checkPermission</span>(<span class="hljs-params">role, callback</span>) { 
    <span class="hljs-keyword">const</span> adminRoles = [<span class="hljs-string">'admin'</span>, <span class="hljs-string">'super_admin'</span>];
    <span class="hljs-keyword">if</span> (adminRoles.<span class="hljs-title function_">includes</span>(role)) { 
        <span class="hljs-title function_">callback</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">'æƒé™é€šè¿‡'</span>); 
    } <span class="hljs-keyword">else</span> { 
        <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'æ— æƒé™'</span>), <span class="hljs-literal">null</span>); 
    } 
}
<span class="hljs-comment">// ä½¿ç”¨ </span>
<span class="hljs-title function_">checkPermission</span>(<span class="hljs-string">'admin'</span>, <span class="hljs-function">(<span class="hljs-params">err, msg</span>) =&gt;</span> { 
    <span class="hljs-keyword">if</span> (err) { 
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err); <span class="hljs-keyword">return</span>; 
    } 
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(msg); <span class="hljs-comment">// è¾“å‡ºï¼šæƒé™é€šè¿‡ </span>
});
<span class="hljs-title function_">checkPermission</span>(<span class="hljs-string">'user'</span>, <span class="hljs-function">(<span class="hljs-params">err, msg</span>) =&gt;</span> { 
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err); <span class="hljs-comment">// è¾“å‡ºï¼šError: æ— æƒé™ </span>
});
</code></pre>
<h4 data-id="heading-14">ç¤ºä¾‹2ï¼šç»‘å®šthisä¸Šä¸‹æ–‡çš„å›è°ƒ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> obj = { 
    <span class="hljs-attr">name</span>: <span class="hljs-string">'æµ‹è¯•å¯¹è±¡'</span>, 
    <span class="hljs-title function_">execute</span>(<span class="hljs-params">callback</span>) { 
        <span class="hljs-comment">// æ–¹å¼1ï¼šç”¨call/applyç»‘å®šthis </span>
        callback.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>);

        <span class="hljs-comment">// æ–¹å¼2ï¼šç”¨bindç»‘å®šï¼ˆè¿”å›æ–°å‡½æ•°ï¼‰ </span>
        <span class="hljs-comment">// const boundCallback = callback.bind(this); </span>
        <span class="hljs-comment">// boundCallback(); </span>
    } 
}; 
<span class="hljs-comment">// å›è°ƒå‡½æ•°éœ€è¦è®¿é—®objçš„this </span>
obj.<span class="hljs-title function_">execute</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) { 
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>); <span class="hljs-comment">// è¾“å‡ºï¼šæµ‹è¯•å¯¹è±¡ï¼ˆè‹¥ä¸ç»‘å®šåˆ™ä¸ºundefinedï¼‰ </span>
}); 
</code></pre>
<hr/>
<h3 data-id="heading-15">æ€»ç»“</h3>
<p>å‰ç«¯å›è°ƒå‡½æ•°çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹å’Œå®ç°æ–¹å¼ï¼š</p>
<ol>
<li><strong>æ ¸å¿ƒæœ¬è´¨</strong>ï¼šå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œåœ¨ä¸»å‡½æ•°çš„æŒ‡å®šæ—¶æœºæ‰§è¡Œï¼Œåˆ†ä¸ºåŒæ­¥/å¼‚æ­¥ä¸¤ç±»ã€‚</li>
<li><strong>åŸºç¡€å®ç°</strong>ï¼š</li>
</ol>
<ul>
<li>åŒæ­¥å›è°ƒï¼šæ•°ç»„æ–¹æ³•ï¼ˆforEach/mapï¼‰ã€è‡ªå®šä¹‰åŒæ­¥é€»è¾‘å§”æ‰˜ï¼›</li>
<li>å¼‚æ­¥å›è°ƒï¼šå®šæ—¶å™¨ã€äº‹ä»¶ç›‘å¬ã€AJAXè¯·æ±‚ï¼ˆå‰ç«¯æ ¸å¿ƒåœºæ™¯ï¼‰ã€‚</li>
</ul>
<ol start="3">
<li><strong>è¿›é˜¶ç”¨æ³•</strong>ï¼š</li>
</ol>
<ul>
<li>é”™è¯¯ä¼˜å…ˆå›è°ƒï¼šç¬¬ä¸€ä¸ªå‚æ•°ä¸ºé”™è¯¯å¯¹è±¡ï¼ˆNode.jsè§„èŒƒï¼Œå‰ç«¯ä¹Ÿå¸¸ç”¨ï¼‰ï¼›</li>
<li>å›è°ƒåœ°ç‹±ï¼šå¤šå±‚åµŒå¥—å¯¼è‡´å¯è¯»æ€§å·®ï¼Œå¯é€šè¿‡æ‹†åˆ†å‘½åå‡½æ•°ã€Promiseã€async-awaitè§£å†³ã€‚</li>
</ul>
<ol start="4">
<li><strong>å…³é”®ç»†èŠ‚</strong>ï¼šå›è°ƒä¸­thisä¸Šä¸‹æ–‡éœ€è¦æ‰‹åŠ¨ç»‘å®šï¼ˆcall/apply/bindï¼‰ï¼Œå¦åˆ™ä¼šä¸¢å¤±ã€‚
å›è°ƒæ˜¯å‰ç«¯å¼‚æ­¥ç¼–ç¨‹çš„åŸºç¡€ï¼ŒPromiseå’Œasync-awaitéƒ½æ˜¯å¯¹å›è°ƒçš„å°è£…å’Œä¼˜åŒ–ï¼Œç†è§£å›è°ƒçš„æœ¬è´¨èƒ½å¸®ä½ æ›´å¥½åœ°æŒæ¡ç°ä»£å¼‚æ­¥è¯­æ³•ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£é”Salesforceæ•°æ®æ½œèƒ½ï¼šPythonè‡ªåŠ¨åŒ–æŸ¥è¯¢ä¸JSONé…ç½®ç®¡ç†å…¨æ”»ç•¥]]></title>    <link>https://juejin.cn/post/7604791354258440230</link>    <guid>https://juejin.cn/post/7604791354258440230</guid>    <pubDate>2026-02-10T07:56:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604791354258440230" data-draft-id="7604493165329170466" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£é”Salesforceæ•°æ®æ½œèƒ½ï¼šPythonè‡ªåŠ¨åŒ–æŸ¥è¯¢ä¸JSONé…ç½®ç®¡ç†å…¨æ”»ç•¥"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-10T07:56:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="UrbanJazzerati"/> <meta itemprop="url" content="https://juejin.cn/user/550205947391389"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£é”Salesforceæ•°æ®æ½œèƒ½ï¼šPythonè‡ªåŠ¨åŒ–æŸ¥è¯¢ä¸JSONé…ç½®ç®¡ç†å…¨æ”»ç•¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/550205947391389/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    UrbanJazzerati
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T07:56:38.000Z" title="Tue Feb 10 2026 07:56:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æŒæ¡é€šè¿‡Pythonè¿æ¥Salesforceçš„æœ€ä½³å®è·µï¼Œå®ç°å®‰å…¨ã€é«˜æ•ˆçš„æ•°æ®è‡ªåŠ¨åŒ–å¤„ç†</p>
</blockquote>
<h3 data-id="heading-0">å¼•è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦è‡ªåŠ¨åŒ–Salesforceæ•°æ®æŸ¥è¯¢ï¼Ÿ</h3>
<p>åœ¨å½“ä»Šæ•°æ®é©±åŠ¨çš„å•†ä¸šç¯å¢ƒä¸­ï¼ŒSalesforceä½œä¸ºé¢†å…ˆçš„CRMå¹³å°ï¼Œå­˜å‚¨äº†ä¼ä¸šæœ€å®è´µçš„å®¢æˆ·æ•°æ®ã€‚ç„¶è€Œï¼Œé¢‘ç¹çš„æ‰‹åŠ¨æ•°æ®å¯¼å‡ºä¸ä»…æ•ˆç‡ä½ä¸‹ï¼Œè¿˜å®¹æ˜“å‡ºé”™ã€‚é€šè¿‡Pythonè‡ªåŠ¨åŒ–æ•°æ®æå–ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š</p>
<ul>
<li><strong>å®šæ—¶è‡ªåŠ¨ç”ŸæˆæŠ¥è¡¨</strong>ï¼šè§£æ”¾äººåŠ›ï¼Œæé«˜æ•ˆç‡</li>
<li><strong>å®æ—¶æ•°æ®ç›‘æ§</strong>ï¼šåŠæ—¶å‘ç°ä¸šåŠ¡æœºä¼šå’Œé£é™©</li>
<li><strong>ç³»ç»Ÿé›†æˆ</strong>ï¼šä¸å…¶ä»–ç³»ç»Ÿï¼ˆå¦‚BIå·¥å…·ã€æ•°æ®ä»“åº“ï¼‰æ— ç¼å¯¹æ¥</li>
<li><strong>é«˜çº§åˆ†æ</strong>ï¼šè¿›è¡Œæœºå™¨å­¦ä¹ é¢„æµ‹å’Œæ·±åº¦æ•°æ®åˆ†æ</li>
</ul>
<h3 data-id="heading-1">ä¸€ã€å®‰å…¨ç¬¬ä¸€ï¼šå‘Šåˆ«ç¡¬ç¼–ç ï¼Œæ‹¥æŠ±JSONé…ç½®</h3>
<h4 data-id="heading-2">1.1 ä¸ºä»€ä¹ˆä¸èƒ½ç¡¬ç¼–ç å‡­è¯ï¼Ÿ</h4>
<p><strong>ç¡¬ç¼–ç å‡­è¯çš„é£é™©</strong>ï¼š</p>
<pre><code class="hljs language-JSON" lang="JSON"># âŒ ç»å¯¹ä¸è¦è¿™æ ·åšï¼
CONFIG = <span class="hljs-punctuation">{</span>
    'username'<span class="hljs-punctuation">:</span> 'your_email@company.com'<span class="hljs-punctuation">,</span>  # ä»£ç æ³„éœ² = å®‰å…¨ç¾éš¾
    'password'<span class="hljs-punctuation">:</span> 'SuperSecret123!'<span class="hljs-punctuation">,</span>
    'security_token'<span class="hljs-punctuation">:</span> 'ABC123XYZ456'<span class="hljs-punctuation">,</span>
    # ... å…¶ä»–æ•æ„Ÿä¿¡æ¯
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ç¡¬ç¼–ç çš„å‡­è¯ä¸€æ—¦æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå°±å¯èƒ½è¢«é»‘å®¢æ‰«æåˆ°ï¼Œå¯¼è‡´ç³»ç»Ÿè¢«å…¥ä¾µã€æ•°æ®æ³„éœ²ç­‰ä¸¥é‡åæœã€‚</p>
<h4 data-id="heading-3">1.2 ä½¿ç”¨JSONé…ç½®æ–‡ä»¶çš„æœ€ä½³å®è·µ</h4>
<p><strong>é…ç½®æ–‡ä»¶ç»“æ„</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">project/
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ salesforce.json          <span class="hljs-comment"># å®é™…é…ç½®æ–‡ä»¶ï¼ˆæ·»åŠ åˆ°.gitignoreï¼‰</span>
â”‚   â””â”€â”€ salesforce.example.json  <span class="hljs-comment"># é…ç½®æ¨¡æ¿ï¼ˆåŒ…å«ç¤ºä¾‹å€¼ï¼‰</span>
â”œâ”€â”€ .gitignore
â””â”€â”€ salesforce_demo.py
</code></pre>
<p><strong>salesforce.example.json é…ç½®æ¨¡æ¿</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"salesforce"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"username"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"your_email@company.com"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"password"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"your_password_here"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"security_token"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"your_security_token_here"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"client_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"your_connected_app_client_id"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"domain"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"login"</span><span class="hljs-punctuation">,</span>  # æˆ– <span class="hljs-string">"test"</span> æˆ– <span class="hljs-string">"mycompany.my.salesforce.com"</span>
    <span class="hljs-attr">"isSFoA"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>.gitignore é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ•æ„Ÿé…ç½®æ–‡ä»¶</span>
config/salesforce.json
*.<span class="hljs-built_in">env</span>
*.key
*.pem
</code></pre>
<h3 data-id="heading-4">äºŒã€å®æˆ˜ï¼šä»JSONè¯»å–é…ç½®çš„å®Œæ•´å®ç°</h3>
<h4 data-id="heading-5">2.1 æ™ºèƒ½é…ç½®åŠ è½½å™¨</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Dict</span>, <span class="hljs-type">Any</span>, <span class="hljs-type">Optional</span>
<span class="hljs-keyword">from</span> dataclasses <span class="hljs-keyword">import</span> dataclass

<span class="hljs-meta">@dataclass</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SalesforceConfig</span>:
    <span class="hljs-string">"""Salesforceè¿æ¥é…ç½®æ•°æ®ç±»"""</span>
    username: <span class="hljs-built_in">str</span>
    password: <span class="hljs-built_in">str</span>
    security_token: <span class="hljs-built_in">str</span>
    client_id: <span class="hljs-built_in">str</span>
    domain: <span class="hljs-built_in">str</span> = <span class="hljs-string">"login"</span>
    isSFoA: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">False</span>
    
<span class="hljs-meta">    @classmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">from_dict</span>(<span class="hljs-params">cls, config_dict: <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]</span>) -&gt; <span class="hljs-string">'SalesforceConfig'</span>:
        <span class="hljs-string">"""ä»å­—å…¸åˆ›å»ºé…ç½®å®ä¾‹"""</span>
        <span class="hljs-keyword">return</span> cls(**config_dict)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">to_dict</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]:
        <span class="hljs-string">"""è½¬æ¢ä¸ºå­—å…¸ï¼ˆä¸å«æ•æ„Ÿä¿¡æ¯ï¼‰"""</span>
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">'username'</span>: <span class="hljs-string">'[REDACTED]'</span>,
            <span class="hljs-string">'password'</span>: <span class="hljs-string">'[REDACTED]'</span>,
            <span class="hljs-string">'security_token'</span>: <span class="hljs-string">'[REDACTED]'</span>,
            <span class="hljs-string">'client_id'</span>: self.client_id,
            <span class="hljs-string">'domain'</span>: self.domain,
            <span class="hljs-string">'isSFoA'</span>: self.isSFoA
        }


<span class="hljs-keyword">class</span> <span class="hljs-title class_">ConfigManager</span>:
    <span class="hljs-string">"""æ™ºèƒ½é…ç½®ç®¡ç†å™¨"""</span>
    
    DEFAULT_CONFIG_PATHS = [
        <span class="hljs-string">'config/salesforce.json'</span>,
        <span class="hljs-string">'salesforce_config.json'</span>,
        <span class="hljs-string">'.salesforce_config.json'</span>,
        os.path.expanduser(<span class="hljs-string">'~/.salesforce/config.json'</span>)
    ]
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, config_path: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>] = <span class="hljs-literal">None</span></span>):
        self.config_path = self._find_config_file(config_path)
        self.config = self._load_config()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_find_config_file</span>(<span class="hljs-params">self, config_path: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>]</span>) -&gt; Path:
        <span class="hljs-string">"""æŸ¥æ‰¾é…ç½®æ–‡ä»¶"""</span>
        <span class="hljs-keyword">if</span> config_path:
            path = Path(config_path)
            <span class="hljs-keyword">if</span> path.exists():
                <span class="hljs-keyword">return</span> path
            <span class="hljs-keyword">raise</span> FileNotFoundError(<span class="hljs-string">f"æŒ‡å®šé…ç½®æ–‡ä»¶ä¸å­˜åœ¨: <span class="hljs-subst">{config_path}</span>"</span>)
        
        <span class="hljs-comment"># å°è¯•é»˜è®¤è·¯å¾„</span>
        <span class="hljs-keyword">for</span> path <span class="hljs-keyword">in</span> self.DEFAULT_CONFIG_PATHS:
            p = Path(path)
            <span class="hljs-keyword">if</span> p.exists():
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰¾åˆ°é…ç½®æ–‡ä»¶: <span class="hljs-subst">{p}</span>"</span>)
                <span class="hljs-keyword">return</span> p
        
        <span class="hljs-comment"># å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œæä¾›å‹å¥½æç¤º</span>
        example_paths = <span class="hljs-string">"\n"</span>.join([<span class="hljs-string">f"  - <span class="hljs-subst">{p}</span>"</span> <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> self.DEFAULT_CONFIG_PATHS])
        <span class="hljs-keyword">raise</span> FileNotFoundError(
            <span class="hljs-string">f"æœªæ‰¾åˆ°é…ç½®æ–‡ä»¶ï¼Œè¯·åˆ›å»ºä»¥ä¸‹æ–‡ä»¶ä¹‹ä¸€ï¼š\n<span class="hljs-subst">{example_paths}</span>\n\n"</span>
            <span class="hljs-string">f"å¯ä»¥å¤åˆ¶ salesforce.example.json ä¸º salesforce.json å¹¶å¡«å†™æ‚¨çš„å‡­è¯"</span>
        )
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_load_config</span>(<span class="hljs-params">self</span>) -&gt; SalesforceConfig:
        <span class="hljs-string">"""åŠ è½½å¹¶éªŒè¯é…ç½®"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(self.config_path, <span class="hljs-string">'r'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> f:
                data = json.load(f)
            
            <span class="hljs-comment"># æ”¯æŒä¸¤ç§æ ¼å¼ï¼šç›´æ¥åŒ…å«é…ç½®æˆ–åµŒå¥—åœ¨salesforceé”®ä¸‹</span>
            <span class="hljs-keyword">if</span> <span class="hljs-string">'salesforce'</span> <span class="hljs-keyword">in</span> data:
                config_data = data[<span class="hljs-string">'salesforce'</span>]
            <span class="hljs-keyword">else</span>:
                config_data = data
            
            <span class="hljs-keyword">return</span> SalesforceConfig.from_dict(config_data)
            
        <span class="hljs-keyword">except</span> json.JSONDecodeError <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"é…ç½®æ–‡ä»¶æ ¼å¼é”™è¯¯: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">except</span> KeyError <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"ç¼ºå°‘å¿…è¦çš„é…ç½®é¡¹: <span class="hljs-subst">{e}</span>"</span>)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">validate_config</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-string">"""éªŒè¯é…ç½®å®Œæ•´æ€§"""</span>
        required_fields = [<span class="hljs-string">'username'</span>, <span class="hljs-string">'password'</span>, <span class="hljs-string">'security_token'</span>, <span class="hljs-string">'client_id'</span>]
        config_dict = self.config.__dict__
        
        missing = [field <span class="hljs-keyword">for</span> field <span class="hljs-keyword">in</span> required_fields <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> config_dict.get(field)]
        <span class="hljs-keyword">if</span> missing:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"ç¼ºå°‘å¿…è¦çš„é…ç½®å­—æ®µ: <span class="hljs-subst">{<span class="hljs-string">', '</span>.join(missing)}</span>"</span>)
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_config_summary</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]:
        <span class="hljs-string">"""è·å–é…ç½®æ‘˜è¦ï¼ˆå®‰å…¨ç‰ˆæœ¬ï¼‰"""</span>
        <span class="hljs-keyword">return</span> self.config.to_dict()
</code></pre>
<h2 data-id="heading-6">è§£é”Salesforceæ•°æ®æ½œèƒ½ï¼šPythonè‡ªåŠ¨åŒ–æŸ¥è¯¢ä¸JSONé…ç½®ç®¡ç†å…¨æ”»ç•¥</h2>
<blockquote>
<p>æŒæ¡é€šè¿‡Pythonè¿æ¥Salesforceçš„æœ€ä½³å®è·µï¼Œå®ç°å®‰å…¨ã€é«˜æ•ˆçš„æ•°æ®è‡ªåŠ¨åŒ–å¤„ç†</p>
</blockquote>
<h3 data-id="heading-7">å¼•è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦è‡ªåŠ¨åŒ–Salesforceæ•°æ®æŸ¥è¯¢ï¼Ÿ</h3>
<p>åœ¨å½“ä»Šæ•°æ®é©±åŠ¨çš„å•†ä¸šç¯å¢ƒä¸­ï¼ŒSalesforceä½œä¸ºé¢†å…ˆçš„CRMå¹³å°ï¼Œå­˜å‚¨äº†ä¼ä¸šæœ€å®è´µçš„å®¢æˆ·æ•°æ®ã€‚ç„¶è€Œï¼Œé¢‘ç¹çš„æ‰‹åŠ¨æ•°æ®å¯¼å‡ºä¸ä»…æ•ˆç‡ä½ä¸‹ï¼Œè¿˜å®¹æ˜“å‡ºé”™ã€‚é€šè¿‡Pythonè‡ªåŠ¨åŒ–æ•°æ®æå–ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š</p>
<ul>
<li><strong>å®šæ—¶è‡ªåŠ¨ç”ŸæˆæŠ¥è¡¨</strong>ï¼šè§£æ”¾äººåŠ›ï¼Œæé«˜æ•ˆç‡</li>
<li><strong>å®æ—¶æ•°æ®ç›‘æ§</strong>ï¼šåŠæ—¶å‘ç°ä¸šåŠ¡æœºä¼šå’Œé£é™©</li>
<li><strong>ç³»ç»Ÿé›†æˆ</strong>ï¼šä¸å…¶ä»–ç³»ç»Ÿï¼ˆå¦‚BIå·¥å…·ã€æ•°æ®ä»“åº“ï¼‰æ— ç¼å¯¹æ¥</li>
<li><strong>é«˜çº§åˆ†æ</strong>ï¼šè¿›è¡Œæœºå™¨å­¦ä¹ é¢„æµ‹å’Œæ·±åº¦æ•°æ®åˆ†æ</li>
</ul>
<h3 data-id="heading-8">ä¸€ã€å®‰å…¨ç¬¬ä¸€ï¼šå‘Šåˆ«ç¡¬ç¼–ç ï¼Œæ‹¥æŠ±JSONé…ç½®</h3>
<h4 data-id="heading-9">1.1 ä¸ºä»€ä¹ˆä¸èƒ½ç¡¬ç¼–ç å‡­è¯ï¼Ÿ</h4>
<p><strong>ç¡¬ç¼–ç å‡­è¯çš„é£é™©</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># âŒ ç»å¯¹ä¸è¦è¿™æ ·åšï¼</span>
CONFIG = {
    <span class="hljs-string">'username'</span>: <span class="hljs-string">'your_email@company.com'</span>,  <span class="hljs-comment"># ä»£ç æ³„éœ² = å®‰å…¨ç¾éš¾</span>
    <span class="hljs-string">'password'</span>: <span class="hljs-string">'SuperSecret123!'</span>,
    <span class="hljs-string">'security_token'</span>: <span class="hljs-string">'ABC123XYZ456'</span>,
    <span class="hljs-comment"># ... å…¶ä»–æ•æ„Ÿä¿¡æ¯</span>
}
</code></pre>
<p>ç¡¬ç¼–ç çš„å‡­è¯ä¸€æ—¦æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå°±å¯èƒ½è¢«é»‘å®¢æ‰«æåˆ°ï¼Œå¯¼è‡´ç³»ç»Ÿè¢«å…¥ä¾µã€æ•°æ®æ³„éœ²ç­‰ä¸¥é‡åæœã€‚</p>
<h4 data-id="heading-10">1.2 ä½¿ç”¨JSONé…ç½®æ–‡ä»¶çš„æœ€ä½³å®è·µ</h4>
<p><strong>é…ç½®æ–‡ä»¶ç»“æ„</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">project/
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ salesforce.json          <span class="hljs-comment"># å®é™…é…ç½®æ–‡ä»¶ï¼ˆæ·»åŠ åˆ°.gitignoreï¼‰</span>
â”‚   â””â”€â”€ salesforce.example.json  <span class="hljs-comment"># é…ç½®æ¨¡æ¿ï¼ˆåŒ…å«ç¤ºä¾‹å€¼ï¼‰</span>
â”œâ”€â”€ .gitignore
â””â”€â”€ salesforce_demo.py
</code></pre>
<p><strong>salesforce.example.json é…ç½®æ¨¡æ¿</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"salesforce"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"username"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"your_email@company.com"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"password"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"your_password_here"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"security_token"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"your_security_token_here"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"client_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"your_connected_app_client_id"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"domain"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"login"</span><span class="hljs-punctuation">,</span>  # æˆ– <span class="hljs-string">"test"</span> æˆ– <span class="hljs-string">"mycompany.my.salesforce.com"</span>
    <span class="hljs-attr">"isSFoA"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>.gitignore é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ•æ„Ÿé…ç½®æ–‡ä»¶</span>
config/salesforce.json
*.<span class="hljs-built_in">env</span>
*.key
*.pem
</code></pre>
<h3 data-id="heading-11">äºŒã€å®æˆ˜ï¼šä»JSONè¯»å–é…ç½®çš„å®Œæ•´å®ç°</h3>
<h4 data-id="heading-12">2.1 æ™ºèƒ½é…ç½®åŠ è½½å™¨</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Dict</span>, <span class="hljs-type">Any</span>, <span class="hljs-type">Optional</span>
<span class="hljs-keyword">from</span> dataclasses <span class="hljs-keyword">import</span> dataclass

<span class="hljs-meta">@dataclass</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SalesforceConfig</span>:
    <span class="hljs-string">"""Salesforceè¿æ¥é…ç½®æ•°æ®ç±»"""</span>
    username: <span class="hljs-built_in">str</span>
    password: <span class="hljs-built_in">str</span>
    security_token: <span class="hljs-built_in">str</span>
    client_id: <span class="hljs-built_in">str</span>
    domain: <span class="hljs-built_in">str</span> = <span class="hljs-string">"login"</span>
    isSFoA: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">False</span>
    
<span class="hljs-meta">    @classmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">from_dict</span>(<span class="hljs-params">cls, config_dict: <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]</span>) -&gt; <span class="hljs-string">'SalesforceConfig'</span>:
        <span class="hljs-string">"""ä»å­—å…¸åˆ›å»ºé…ç½®å®ä¾‹"""</span>
        <span class="hljs-keyword">return</span> cls(**config_dict)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">to_dict</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]:
        <span class="hljs-string">"""è½¬æ¢ä¸ºå­—å…¸ï¼ˆä¸å«æ•æ„Ÿä¿¡æ¯ï¼‰"""</span>
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">'username'</span>: <span class="hljs-string">'[REDACTED]'</span>,
            <span class="hljs-string">'password'</span>: <span class="hljs-string">'[REDACTED]'</span>,
            <span class="hljs-string">'security_token'</span>: <span class="hljs-string">'[REDACTED]'</span>,
            <span class="hljs-string">'client_id'</span>: self.client_id,
            <span class="hljs-string">'domain'</span>: self.domain,
            <span class="hljs-string">'isSFoA'</span>: self.isSFoA
        }


<span class="hljs-keyword">class</span> <span class="hljs-title class_">ConfigManager</span>:
    <span class="hljs-string">"""æ™ºèƒ½é…ç½®ç®¡ç†å™¨"""</span>
    
    DEFAULT_CONFIG_PATHS = [
        <span class="hljs-string">'config/salesforce.json'</span>,
        <span class="hljs-string">'salesforce_config.json'</span>,
        <span class="hljs-string">'.salesforce_config.json'</span>,
        os.path.expanduser(<span class="hljs-string">'~/.salesforce/config.json'</span>)
    ]
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, config_path: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>] = <span class="hljs-literal">None</span></span>):
        self.config_path = self._find_config_file(config_path)
        self.config = self._load_config()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_find_config_file</span>(<span class="hljs-params">self, config_path: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>]</span>) -&gt; Path:
        <span class="hljs-string">"""æŸ¥æ‰¾é…ç½®æ–‡ä»¶"""</span>
        <span class="hljs-keyword">if</span> config_path:
            path = Path(config_path)
            <span class="hljs-keyword">if</span> path.exists():
                <span class="hljs-keyword">return</span> path
            <span class="hljs-keyword">raise</span> FileNotFoundError(<span class="hljs-string">f"æŒ‡å®šé…ç½®æ–‡ä»¶ä¸å­˜åœ¨: <span class="hljs-subst">{config_path}</span>"</span>)
        
        <span class="hljs-comment"># å°è¯•é»˜è®¤è·¯å¾„</span>
        <span class="hljs-keyword">for</span> path <span class="hljs-keyword">in</span> self.DEFAULT_CONFIG_PATHS:
            p = Path(path)
            <span class="hljs-keyword">if</span> p.exists():
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰¾åˆ°é…ç½®æ–‡ä»¶: <span class="hljs-subst">{p}</span>"</span>)
                <span class="hljs-keyword">return</span> p
        
        <span class="hljs-comment"># å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œæä¾›å‹å¥½æç¤º</span>
        example_paths = <span class="hljs-string">"\n"</span>.join([<span class="hljs-string">f"  - <span class="hljs-subst">{p}</span>"</span> <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> self.DEFAULT_CONFIG_PATHS])
        <span class="hljs-keyword">raise</span> FileNotFoundError(
            <span class="hljs-string">f"æœªæ‰¾åˆ°é…ç½®æ–‡ä»¶ï¼Œè¯·åˆ›å»ºä»¥ä¸‹æ–‡ä»¶ä¹‹ä¸€ï¼š\n<span class="hljs-subst">{example_paths}</span>\n\n"</span>
            <span class="hljs-string">f"å¯ä»¥å¤åˆ¶ salesforce.example.json ä¸º salesforce.json å¹¶å¡«å†™æ‚¨çš„å‡­è¯"</span>
        )
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_load_config</span>(<span class="hljs-params">self</span>) -&gt; SalesforceConfig:
        <span class="hljs-string">"""åŠ è½½å¹¶éªŒè¯é…ç½®"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(self.config_path, <span class="hljs-string">'r'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> f:
                data = json.load(f)
            
            <span class="hljs-comment"># æ”¯æŒä¸¤ç§æ ¼å¼ï¼šç›´æ¥åŒ…å«é…ç½®æˆ–åµŒå¥—åœ¨salesforceé”®ä¸‹</span>
            <span class="hljs-keyword">if</span> <span class="hljs-string">'salesforce'</span> <span class="hljs-keyword">in</span> data:
                config_data = data[<span class="hljs-string">'salesforce'</span>]
            <span class="hljs-keyword">else</span>:
                config_data = data
            
            <span class="hljs-keyword">return</span> SalesforceConfig.from_dict(config_data)
            
        <span class="hljs-keyword">except</span> json.JSONDecodeError <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"é…ç½®æ–‡ä»¶æ ¼å¼é”™è¯¯: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">except</span> KeyError <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"ç¼ºå°‘å¿…è¦çš„é…ç½®é¡¹: <span class="hljs-subst">{e}</span>"</span>)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">validate_config</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-string">"""éªŒè¯é…ç½®å®Œæ•´æ€§"""</span>
        required_fields = [<span class="hljs-string">'username'</span>, <span class="hljs-string">'password'</span>, <span class="hljs-string">'security_token'</span>, <span class="hljs-string">'client_id'</span>]
        config_dict = self.config.__dict__
        
        missing = [field <span class="hljs-keyword">for</span> field <span class="hljs-keyword">in</span> required_fields <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> config_dict.get(field)]
        <span class="hljs-keyword">if</span> missing:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"ç¼ºå°‘å¿…è¦çš„é…ç½®å­—æ®µ: <span class="hljs-subst">{<span class="hljs-string">', '</span>.join(missing)}</span>"</span>)
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_config_summary</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]:
        <span class="hljs-string">"""è·å–é…ç½®æ‘˜è¦ï¼ˆå®‰å…¨ç‰ˆæœ¬ï¼‰"""</span>
        <span class="hljs-keyword">return</span> self.config.to_dict()
</code></pre>
<h4 data-id="heading-13">2.2 å®‰å…¨å‡­è¯åŠ è½½å‡½æ•°</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">load_salesforce_config</span>(<span class="hljs-params">config_path: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>] = <span class="hljs-literal">None</span></span>) -&gt; SalesforceConfig:
    <span class="hljs-string">"""
    å®‰å…¨åŠ è½½Salesforceé…ç½®
    
    å‚æ•°:
        config_path: å¯é€‰çš„è‡ªå®šä¹‰é…ç½®æ–‡ä»¶è·¯å¾„
    
    è¿”å›:
        SalesforceConfig: é…ç½®å¯¹è±¡
    
    ç¤ºä¾‹:
        config = load_salesforce_config()
        # æˆ–
        config = load_salesforce_config("custom_config.json")
    """</span>
    <span class="hljs-keyword">try</span>:
        manager = ConfigManager(config_path)
        manager.validate_config()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… é…ç½®æ–‡ä»¶éªŒè¯é€šè¿‡"</span>)
        
        <span class="hljs-comment"># æ˜¾ç¤ºå®‰å…¨æ‘˜è¦</span>
        summary = manager.get_config_summary()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é…ç½®æ‘˜è¦: <span class="hljs-subst">{json.dumps(summary, indent=<span class="hljs-number">2</span>)}</span>"</span>)
        
        <span class="hljs-keyword">return</span> manager.config
        
    <span class="hljs-keyword">except</span> FileNotFoundError <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âŒ é…ç½®æ–‡ä»¶é”™è¯¯: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-comment"># æä¾›åˆ›å»ºé…ç½®æ–‡ä»¶çš„å¸®åŠ©</span>
        _provide_setup_help()
        <span class="hljs-keyword">raise</span>
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âŒ é…ç½®åŠ è½½å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">raise</span>


<span class="hljs-keyword">def</span> <span class="hljs-title function_">_provide_setup_help</span>():
    <span class="hljs-string">"""æä¾›é…ç½®è®¾ç½®å¸®åŠ©ä¿¡æ¯"""</span>
    help_text = <span class="hljs-string">"""
    === Salesforce é…ç½®è®¾ç½®æŒ‡å— ===
    
    1. åˆ›å»ºé…ç½®æ–‡ä»¶:
       cp config/salesforce.example.json config/salesforce.json
    
    2. ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå¡«å†™ä»¥ä¸‹ä¿¡æ¯:
       - username: Salesforceç”¨æˆ·å
       - password: å¯†ç 
       - security_token: å®‰å…¨ä»¤ç‰Œï¼ˆå¯åœ¨ä¸ªäººè®¾ç½®ä¸­æ‰¾åˆ°ï¼‰
       - client_id: Connected Appçš„Consumer Key
       - domain: é€šå¸¸æ˜¯ "login" æˆ– SandboxåŸŸå
    
    3. ç¡®ä¿é…ç½®æ–‡ä»¶ä¸ä¼šè¢«æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶:
       æ·»åŠ åˆ° .gitignore: config/salesforce.json
    
    4. å¯¹äºç”Ÿäº§ç¯å¢ƒï¼Œè€ƒè™‘ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–å¯†é’¥ç®¡ç†æœåŠ¡
    """</span>
    <span class="hljs-built_in">print</span>(help_text)
</code></pre>
<h3 data-id="heading-14">å®Œæ•´ç¤ºä¾‹</h3>
<h4 data-id="heading-15">JSONDemo.py</h4>
<pre><code class="hljs language-JSON" lang="JSON">import json
from pathlib import Path
from typing import Dict<span class="hljs-punctuation">,</span> Any<span class="hljs-punctuation">,</span> Optional
from dataclasses import dataclass
from simple_salesforce import Salesforce

@dataclass
class SalesforceConfig<span class="hljs-punctuation">:</span>
    <span class="hljs-string">""</span><span class="hljs-string">"Salesforce Connector Config Class"</span><span class="hljs-string">""</span>
    username<span class="hljs-punctuation">:</span> str
    password<span class="hljs-punctuation">:</span> str
    security_token<span class="hljs-punctuation">:</span> str
    client_id<span class="hljs-punctuation">:</span> str
    domain<span class="hljs-punctuation">:</span> str
    isSFoA<span class="hljs-punctuation">:</span> bool = False

    @classmethod
    def from_dict(cls<span class="hljs-punctuation">,</span> config_dict<span class="hljs-punctuation">:</span> Dict<span class="hljs-punctuation">[</span>str<span class="hljs-punctuation">,</span> Any<span class="hljs-punctuation">]</span>) -&gt; 'SalesforceConfig'<span class="hljs-punctuation">:</span>
        <span class="hljs-string">""</span><span class="hljs-string">"create instance from dict"</span><span class="hljs-string">""</span>
        config_dict<span class="hljs-punctuation">[</span>'isSFoA'<span class="hljs-punctuation">]</span> = True if config_dict<span class="hljs-punctuation">[</span>'isSFoA'<span class="hljs-punctuation">]</span>.lower() == '<span class="hljs-literal"><span class="hljs-keyword">true</span></span>' else False
        return cls(**config_dict)

    def to_dict(self) -&gt; Dict<span class="hljs-punctuation">[</span>str<span class="hljs-punctuation">,</span> Any<span class="hljs-punctuation">]</span><span class="hljs-punctuation">:</span>
        <span class="hljs-string">""</span><span class="hljs-string">"covert it into dict and mask secret info"</span><span class="hljs-string">""</span>
        return <span class="hljs-punctuation">{</span>
            'username'<span class="hljs-punctuation">:</span> '<span class="hljs-punctuation">[</span>REDACTED<span class="hljs-punctuation">]</span>'<span class="hljs-punctuation">,</span>
            'password'<span class="hljs-punctuation">:</span> '<span class="hljs-punctuation">[</span>REDACTED<span class="hljs-punctuation">]</span>'<span class="hljs-punctuation">,</span>
            'security_token'<span class="hljs-punctuation">:</span> '<span class="hljs-punctuation">[</span>REDACTED<span class="hljs-punctuation">]</span>'<span class="hljs-punctuation">,</span>
            'client_id'<span class="hljs-punctuation">:</span> self.client_id<span class="hljs-punctuation">,</span>
            'domain'<span class="hljs-punctuation">:</span> self.domain<span class="hljs-punctuation">,</span>
            'isSFoA'<span class="hljs-punctuation">:</span> self.isSFoA
        <span class="hljs-punctuation">}</span>

class ConfigManager<span class="hljs-punctuation">:</span>
    DEFAULT_CONFIG_PATHS = <span class="hljs-punctuation">[</span>
        'Config/salesforce.json'<span class="hljs-punctuation">,</span>
        'salesforce_config.json'<span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">]</span>

    def __init__(self<span class="hljs-punctuation">,</span> target_org<span class="hljs-punctuation">:</span> str<span class="hljs-punctuation">,</span> config_path<span class="hljs-punctuation">:</span> Optional<span class="hljs-punctuation">[</span>str<span class="hljs-punctuation">]</span> = None)<span class="hljs-punctuation">:</span>
        self.sf = None
        self._provide_setup_help()
        self.targetOrg = target_org
        self.config_path = self._find_config_file(config_path)
        self.config = self._load_config()

    def _find_config_file(self<span class="hljs-punctuation">,</span> config_path<span class="hljs-punctuation">:</span> Optional<span class="hljs-punctuation">[</span>str<span class="hljs-punctuation">]</span>) -&gt; Path<span class="hljs-punctuation">:</span>
        if config_path<span class="hljs-punctuation">:</span>
            path = Path(config_path)
            if path.exists()<span class="hljs-punctuation">:</span>
                return path
            raise FileNotFoundError(f<span class="hljs-string">"Specified configuration file does not exist: {config_path}"</span>)

        # Try Default Path
        for path in self.DEFAULT_CONFIG_PATHS<span class="hljs-punctuation">:</span>
            p = Path(path)
            if p.exists()<span class="hljs-punctuation">:</span>
                print(f<span class="hljs-string">"Configuration file found: {p}"</span>)
                return p

        example_paths = <span class="hljs-string">"\n"</span>.join(<span class="hljs-punctuation">[</span>f<span class="hljs-string">"  - {p}"</span> for p in self.DEFAULT_CONFIG_PATHS<span class="hljs-punctuation">]</span>)
        raise FileNotFoundError(
            f<span class="hljs-string">"Configuration file not found. Please create one of the following filesï¼š\n{example_paths}\n\n"</span>
        )

    def _load_config(self) -&gt; SalesforceConfig<span class="hljs-punctuation">:</span>
        try<span class="hljs-punctuation">:</span>
            with open(self.config_path<span class="hljs-punctuation">,</span> 'r'<span class="hljs-punctuation">,</span> encoding='utf<span class="hljs-number">-8</span>') as f<span class="hljs-punctuation">:</span>
                data = json.load(f)

            # æ”¯æŒä¸¤ç§æ ¼å¼ï¼šç›´æ¥åŒ…å«é…ç½®æˆ–åµŒå¥—åœ¨salesforceé”®ä¸‹
            if self.targetOrg in data<span class="hljs-punctuation">:</span>
                config_data = data<span class="hljs-punctuation">[</span>self.targetOrg<span class="hljs-punctuation">]</span>
            else<span class="hljs-punctuation">:</span>
                raise ValueError(f<span class="hljs-string">"Target Org Name is Not Correct"</span>)

            return SalesforceConfig.from_dict(config_data)

        except json.JSONDecodeError as e<span class="hljs-punctuation">:</span>
            raise ValueError(f<span class="hljs-string">"Config File Error: {e}"</span>)
        except KeyError as e<span class="hljs-punctuation">:</span>
            raise ValueError(f<span class="hljs-string">"Config File Error: {e}"</span>)

    def validate_config(self) -&gt; bool<span class="hljs-punctuation">:</span>
        required_fields = <span class="hljs-punctuation">[</span>'username'<span class="hljs-punctuation">,</span> 'password'<span class="hljs-punctuation">,</span> 'security_token'<span class="hljs-punctuation">,</span> 'client_id'<span class="hljs-punctuation">]</span>
        config_dict = self.config.__dict__

        missing = <span class="hljs-punctuation">[</span>field for field in required_fields if not config_dict.get(field)<span class="hljs-punctuation">]</span>
        if missing<span class="hljs-punctuation">:</span>
            raise ValueError(f<span class="hljs-string">"Missing necessary config fields: {', '.join(missing)}"</span>)

        return True


    def get_config_summary(self) -&gt; Dict<span class="hljs-punctuation">[</span>str<span class="hljs-punctuation">,</span> Any<span class="hljs-punctuation">]</span><span class="hljs-punctuation">:</span>
        return self.config.to_dict()

    def _provide_setup_help(self)<span class="hljs-punctuation">:</span>
        help_text = <span class="hljs-string">""</span><span class="hljs-string">"
        === Salesforce Connector Config Guide ===

        1. Create Config JSON File:
           C:\\Users\\Python\\SimpleSalesforce\\Config\\JSONDemoClient.py

        2. Edit the configuration file and fill in the following information:
           - username: Salesforce username
           - password: Password
           - security_token: Security token (can be found in your personal settings)
           - client_id: Consumer Key of the Connected App
           - domain: Custom Domain E.g. zeiss--localdevcn.sandbox.my

        3. Ensure the configuration file is not committed to version control:
           Add to .gitignore: config/salesforce.json

        "</span><span class="hljs-string">""</span>
        print(help_text)

    def load_salesforce_config(self) -&gt; Salesforce<span class="hljs-punctuation">:</span>
        try<span class="hljs-punctuation">:</span>
            self.validate_config()
            print(<span class="hljs-string">"âœ… Config JSON File is Validated Successfully"</span>)

            summary = self.get_config_summary()
            print(f<span class="hljs-string">"Config Summary: {json.dumps(summary, indent=2)}"</span>)
            self.sf = Salesforce(**self.config.__dict__)
            return self.sf

        except FileNotFoundError as e<span class="hljs-punctuation">:</span>
            print(f<span class="hljs-string">"âŒ Config File Error: {e}"</span>)
            raise
        except Exception as e<span class="hljs-punctuation">:</span>
            print(f<span class="hljs-string">"âŒ Config File Error: {e}"</span>)
            raise

try<span class="hljs-punctuation">:</span>
    print(<span class="hljs-string">"\nğŸ“ Load Configuration..."</span>)
    sf = ConfigManager('UATCN'<span class="hljs-punctuation">,</span> r'C<span class="hljs-punctuation">:</span>\Users\Python\SimpleSalesforce\Config\salesforce.json').load_salesforce_config()

except FileNotFoundError as e<span class="hljs-punctuation">:</span>
    print(f<span class="hljs-string">"âŒ Config File Error: {e}"</span>)
except Exception as e<span class="hljs-punctuation">:</span>
    print(f<span class="hljs-string">"âŒ Execution Error: {e}"</span>)
    import traceback
    traceback.print_exc()
</code></pre>
<h4 data-id="heading-16">JSONDemoClient.py</h4>
<pre><code class="hljs language-Python" lang="Python"><span class="hljs-keyword">from</span> JSONDemo <span class="hljs-keyword">import</span> sf

<span class="hljs-string">"""æ¼”ç¤ºåŸºæœ¬çš„ SOQL æŸ¥è¯¢"""</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span> * <span class="hljs-number">60</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"1. åŸºæœ¬ SOQL æŸ¥è¯¢"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">60</span>)

<span class="hljs-comment"># ç¤ºä¾‹1: æŸ¥è¯¢è”ç³»äºº</span>
query = <span class="hljs-string">"SELECT Id, Name, Email, Phone FROM Contact LIMIT 5"</span>
result = sf.query(query)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ€»å…±æ‰¾åˆ° <span class="hljs-subst">{result[<span class="hljs-string">'totalSize'</span>]}</span> æ¡è®°å½•"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ˜¯å¦å®ŒæˆæŸ¥è¯¢: <span class="hljs-subst">{result[<span class="hljs-string">'done'</span>]}</span>"</span>)

<span class="hljs-keyword">if</span> result[<span class="hljs-string">'records'</span>]:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nå‰5ä¸ªè”ç³»äºº:"</span>)
    <span class="hljs-keyword">for</span> record <span class="hljs-keyword">in</span> result[<span class="hljs-string">'records'</span>]:
        <span class="hljs-built_in">print</span>(
            <span class="hljs-string">f"  <span class="hljs-subst">{record[<span class="hljs-string">'Name'</span>]}</span> (<span class="hljs-subst">{record[<span class="hljs-string">'Id'</span>]}</span>) - <span class="hljs-subst">{record.get(<span class="hljs-string">'Email'</span>, <span class="hljs-string">'æ— é‚®ç®±'</span>)}</span>"</span>)  <span class="hljs-comment"># å¦‚æœå­˜åœ¨ Email é”®ï¼Œè¿”å›å…¶å€¼ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œè¿”å›"æ— é‚®ç®±"</span>
</code></pre>
<h4 data-id="heading-17">salesforce.json</h4>
<pre><code class="hljs language-JSON" lang="JSON"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"UATCN"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"username"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"your_email@company.com"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"password"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"your_password!"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"security_token"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1O8sNTcCA3JthHlMzI767yNVKa6"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"client_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"3MVG9nPIHG.zKGNai0_jfoQ1G7uYfzlJ_0cO6fzLirl96XKkJjG3nBzAIjEN6gAchw5qCSg1uS3Z"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"domain"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"company--uatcn.sandbox.my"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"isSFoA"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"True"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"LocalDevCN"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"username"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"your_email@company.com"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"password"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"your_password!"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"security_token"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1O8sNTcCA3JthH767lMzIyNVKa6"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"client_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"3MVG9nPIHG.zKGNai_eW.rbpDQqGYdzUpGLHCfQvxPFnIL1gCF7iL7s0goXRNBBuLtNpooONK3_9"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"domain"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"company--localdevcn.sandbox.my"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"isSFoA"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"True"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-18">æ€»ç»“ä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-19">æ ¸å¿ƒè¦ç‚¹æ€»ç»“</h4>
<ol>
<li><strong>å®‰å…¨ç¬¬ä¸€</strong>ï¼šæ°¸è¿œä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯</li>
<li><strong>é…ç½®åˆ†ç¦»</strong>ï¼šä½¿ç”¨JSONæ–‡ä»¶ã€ç¯å¢ƒå˜é‡æˆ–å¯†é’¥ç®¡ç†æœåŠ¡</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šå®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œé‡è¯•æœºåˆ¶</li>
<li><strong>æ•°æ®ä¿æŠ¤</strong>ï¼šåˆç†å¤„ç†ä¸ªäººéšç§å’Œå•†ä¸šæ•æ„Ÿæ•°æ®</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆå¿«åˆçœï¼šSLS æ–°ç‰ˆæ—¥å¿—èšç±»ï¼Œä»æµ·é‡æ—¥å¿—å‘ç°æ¨¡å¼çš„æ™ºèƒ½å¼•æ“]]></title>    <link>https://juejin.cn/post/7604757482004987967</link>    <guid>https://juejin.cn/post/7604757482004987967</guid>    <pubDate>2026-02-10T08:16:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604757482004987967" data-draft-id="7604175912482291718" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆå¿«åˆçœï¼šSLS æ–°ç‰ˆæ—¥å¿—èšç±»ï¼Œä»æµ·é‡æ—¥å¿—å‘ç°æ¨¡å¼çš„æ™ºèƒ½å¼•æ“"/> <meta itemprop="keywords" content="äº‘åŸç”Ÿ"/> <meta itemprop="datePublished" content="2026-02-10T08:16:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆå¿«åˆçœï¼šSLS æ–°ç‰ˆæ—¥å¿—èšç±»ï¼Œä»æµ·é‡æ—¥å¿—å‘ç°æ¨¡å¼çš„æ™ºèƒ½å¼•æ“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T08:16:54.000Z" title="Tue Feb 10 2026 08:16:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡è”åˆåˆ›ä½œä½œè€…ï¼šåˆ˜è¿›æ­¥(çŸ³å­£)ã€éš°å®—æ­£(éœœé”®)</p>
<blockquote>
<p>æ—¥å¿—è®°å½•ç€æ¯ä¸€æ¬¡è¯·æ±‚ã€æ¯ä¸€ä¸ªå¼‚å¸¸ã€æ¯ä¸€è¡Œä»£ç çš„æ‰§è¡Œè½¨è¿¹ã€‚ç„¶è€Œï¼Œå½“æ—¥å¿—é‡ä»æ¯å¤©å‡ ä¸‡æ¡è†¨èƒ€åˆ°æ•°äº¿æ¡æ—¶ï¼Œä¼ ç»Ÿçš„å…³é”®å­—æœç´¢å’Œäººå·¥ç­›é€‰æ–¹å¼å·²ç»åŠ›ä¸ä»å¿ƒã€‚æ–°ç‰ˆæ—¥å¿—èšç±»æ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸€å›°å¢ƒè€Œè®¾è®¡â€”â€”å®ƒèƒ½å¤Ÿä»æµ·é‡æ—¥å¿—ä¸­è‡ªåŠ¨å‘ç°æ—¥å¿—ç±»åˆ«ï¼Œæå–æ—¥å¿—æ¨¡æ¿ï¼Œè®©å·¥ç¨‹å¸ˆä»â€œå¤§æµ·æé’ˆâ€å¼çš„æ’æŸ¥ä¸­è§£æ”¾å‡ºæ¥ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆéœ€è¦æ™ºèƒ½æ—¥å¿—èšç±»</h2>
<h3 data-id="heading-1">1.1 â€œæ—¥å¿—æ´ªæ°´â€ä¸­çš„è®¤çŸ¥å›°å¢ƒ</h3>
<p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿæ—¥ç›Šå¤æ‚çš„ä»Šå¤©ï¼Œä¸€ä¸ªå…¸å‹çš„å¾®æœåŠ¡æ¶æ„å¯èƒ½åŒ…å«æ•°åç”šè‡³ä¸Šç™¾ä¸ªæœåŠ¡ç»„ä»¶ï¼Œæ¯ä¸ªç»„ä»¶éƒ½åœ¨æŒç»­äº§ç”Ÿæ—¥å¿—ã€‚æ®ç»Ÿè®¡ï¼Œä¸€ä¸ªä¸­ç­‰è§„æ¨¡çš„äº’è”ç½‘åº”ç”¨ï¼Œæ¯å¤©äº§ç”Ÿçš„æ—¥å¿—é‡å¯è¾¾æ•° TBã€‚é¢å¯¹å¦‚æ­¤æµ·é‡çš„æ•°æ®ï¼Œä¼ ç»Ÿçš„æ—¥å¿—åˆ†ææ–¹å¼é¢ä¸´ä¸¥å³»æŒ‘æˆ˜ï¼š</p>
<p><strong>ä¿¡æ¯è¿‡è½½ï¼š</strong> å½“å‘Šè­¦è§¦å‘æ—¶ï¼Œå·¥ç¨‹å¸ˆæ‰“å¼€æ—¥å¿—ç³»ç»Ÿï¼Œé¢å¯¹çš„æ˜¯åˆ·å±èˆ¬çš„æ—¥å¿—æµã€‚å“ªäº›æ˜¯å…³é”®ä¿¡æ¯ï¼Ÿå“ªäº›æ˜¯å™ªéŸ³ï¼Ÿå…¨å‡­ç»éªŒåˆ¤æ–­ã€‚</p>
<p><strong>å…³é”®å­—ä¾èµ–ï¼š</strong> ä¼ ç»Ÿæ–¹å¼ä¾èµ–é¢„è®¾çš„å…³é”®å­—ï¼ˆå¦‚Â ERRORã€Exceptionï¼‰è¿›è¡Œè¿‡æ»¤ã€‚ä½†é—®é¢˜æ˜¯æœªé¢„æ–™åˆ°çš„å¼‚å¸¸æ¨¡å¼å¯èƒ½è¢«å®Œå…¨å¿½ç•¥ã€‚</p>
<p><strong>ä¸Šä¸‹æ–‡å‰²è£‚ï¼š</strong> å³ä½¿æ‰¾åˆ°äº†å¯ç–‘æ—¥å¿—ï¼Œç†è§£å…¶å«ä¹‰ä»éœ€è¦å¤§é‡çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚åŒä¸€ç±»é—®é¢˜å¯èƒ½ä»¥ç•¥æœ‰å·®å¼‚çš„å½¢å¼å‡ºç°æˆåƒä¸Šä¸‡æ¬¡ï¼Œäººå·¥éš¾ä»¥å½’çº³ã€‚</p>
<h3 data-id="heading-2">1.2 SLS æ—¥å¿—èšç±»çš„æ¼”è¿›</h3>
<p>é˜¿é‡Œäº‘æ—¥å¿—æœåŠ¡ï¼ˆSLSï¼ŒSimple Log Serviceï¼‰æ˜¯ä¸€æ¬¾é¢å‘æ—¥å¿—åœºæ™¯çš„äº‘åŸç”Ÿè§‚æµ‹ä¸åˆ†æå¹³å°ï¼Œä¸ºç”¨æˆ·æä¾›æ—¥å¿—é‡‡é›†ã€å­˜å‚¨ã€æŸ¥è¯¢ã€åˆ†æç­‰ä¸€ç«™å¼æœåŠ¡ã€‚ä½œä¸ºæ—¥å¿—åˆ†æçš„æ ¸å¿ƒèƒ½åŠ›ä¹‹ä¸€ï¼ŒSLS å¾ˆæ—©å°±æ¨å‡ºäº†æ—¥å¿—èšç±»åŠŸèƒ½ï¼ˆä»¥ä¸‹ç§°â€œæ—§ç‰ˆæ—¥å¿—èšç±»â€ï¼‰ï¼Œå¸®åŠ©ç”¨æˆ·ä»æµ·é‡æ—¥å¿—ä¸­è‡ªåŠ¨æå–æ¨¡å¼ã€‚</p>
<p>æ—§ç‰ˆæ—¥å¿—èšç±»é‡‡ç”¨â€œå†™å…¥æ—¶èšç±»â€çš„æ¶æ„ï¼šåœ¨æ—¥å¿—å†™å…¥æ—¶é¢„å…ˆè®¡ç®—èšç±»ç´¢å¼•ï¼Œå°†æ¯æ¡æ—¥å¿—æ˜ å°„åˆ°å¯¹åº”çš„æ¨¡å¼ã€‚è¿™ç§æ–¹å¼çš„ä¼˜ç‚¹æ˜¯èšç±»è¾ƒå…¨é¢ï¼Œä½†ä¹Ÿå¸¦æ¥äº†é¢å¤–çš„ç´¢å¼•å­˜å‚¨æˆæœ¬ï¼Œå¯¹äºå¤§è§„æ¨¡æ—¥å¿—åœºæ™¯å¯èƒ½æˆä¸ºè´Ÿæ‹…ã€‚</p>
<p><strong>æœ¬æ–‡ä»‹ç»çš„â€œæ–°ç‰ˆæ—¥å¿—èšç±»â€æ˜¯å¯¹æ—§ç‰ˆçš„ä¸€æ¬¡æ¶æ„å‡çº§ï¼Œé‡‡ç”¨äº†â€œæŸ¥è¯¢æ—¶èšç±»â€çš„å…¨æ–°è®¾è®¡æ€è·¯ã€‚</strong> å®ƒä¸å†éœ€è¦é¢„å…ˆå»ºç«‹èšç±»ç´¢å¼•ï¼Œè€Œæ˜¯åœ¨ç”¨æˆ·å‘èµ·æŸ¥è¯¢æ—¶å®æ—¶è®¡ç®—æ—¥å¿—æ¨¡å¼ï¼Œä»è€Œå®ç°äº†é›¶é¢å¤–ç´¢å¼•æµé‡ã€æ›´çµæ´»çš„åˆ†æèƒ½åŠ›å’Œæ›´ä¼˜çš„æˆæœ¬æ•ˆç›Šã€‚</p>
<h3 data-id="heading-3">1.3 ä»â€œçœ‹æ—¥å¿—â€åˆ°â€œæ‡‚æ—¥å¿—â€</h3>
<p>æ–°ç‰ˆæ—¥å¿—èšç±»çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šè®©æœºå™¨è‡ªåŠ¨å‘ç°æ—¥å¿—ä¸­çš„æ¨¡å¼ã€‚</p>
<p>æ—¥å¿—èšç±»åŸºäºä¸€ä¸ªå…³é”®æ´å¯Ÿï¼šè™½ç„¶ç³»ç»Ÿçš„æ—¥å¿—é‡å¯èƒ½ååˆ†åºå¤§ï¼Œä½†è¿™äº›æ—¥å¿—å¾€å¾€æ˜¯ç”±æœ‰é™æ•°é‡çš„æ—¥å¿—è¾“å‡ºè¯­å¥äº§ç”Ÿçš„ã€‚æ¯ä¸€ä¸ªæ—¥å¿—è¾“å‡ºè¯­å¥äº§ç”Ÿçš„æ—¥å¿—æ ¼å¼ç›¸åŒï¼Œå¯ä»¥ç”¨åŒä¸€ä¸ªâ€œæ—¥å¿—æ¨¡æ¿â€æ¥è¡¨ç¤ºã€‚</p>
<p>ä¾‹å¦‚ï¼Œä»¥ä¸‹ä¸‰æ¡æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">GotÂ exception <span class="hljs-keyword">while</span> serving block-<span class="hljs-number">123</span>Â <span class="hljs-keyword">to</span> /<span class="hljs-number">10.251</span>.<span class="hljs-number">203.149</span>
GotÂ exception <span class="hljs-keyword">while</span> serving block-<span class="hljs-number">456</span>Â <span class="hljs-keyword">to</span> /<span class="hljs-number">10.251</span>.<span class="hljs-number">203.150</span>
GotÂ exception <span class="hljs-keyword">while</span> serving block-<span class="hljs-number">789</span>Â <span class="hljs-keyword">to</span> /<span class="hljs-number">10.251</span>.<span class="hljs-number">203.151</span>
</code></pre>
<p>å¯ä»¥è¢«å½’çº³ä¸ºä¸€ä¸ªæ¨¡æ¿ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">Got exception <span class="hljs-keyword">while</span> servingÂ &lt;BLOCK_ID&gt;Â <span class="hljs-keyword">to</span> /&lt;IP&gt;
</code></pre>
<p>å…¶ä¸­Â <code>&lt;BLOCK_ID&gt;</code>Â å’ŒÂ <code>&lt;IP&gt;</code>Â æ˜¯å˜é‡éƒ¨åˆ†ï¼Œä¼šéšæ¯æ¡æ—¥å¿—å˜åŒ–ï¼›å…¶ä½™éƒ¨åˆ†æ˜¯å¸¸é‡ï¼Œåœ¨åŒç±»æ—¥å¿—ä¸­ä¿æŒä¸å˜ã€‚</p>
<p>é€šè¿‡è¿™ç§æŠ½è±¡ï¼ŒåŸæœ¬éœ€è¦é€æ¡æŸ¥çœ‹çš„æˆåƒä¸Šä¸‡æ¡æ—¥å¿—ï¼Œè¢«å‹ç¼©ä¸ºå°‘æ•°å‡ ä¸ªæ—¥å¿—ç±»åˆ«ã€‚å·¥ç¨‹å¸ˆå¯ä»¥å…ˆåœ¨æ—¥å¿—æ¨¡æ¿å±‚é¢å®šä½é—®é¢˜ï¼Œç„¶åå†æ·±å…¥æŸ¥çœ‹å…·ä½“æ—¥å¿—æ ·ä¾‹â€”â€”è¿™æ­£æ˜¯æ—¥å¿—èšç±»å¸¦æ¥çš„è®¤çŸ¥å‡çº§ã€‚</p>
<h2 data-id="heading-4">æ ¸å¿ƒè®¾è®¡ç†å¿µ</h2>
<h3 data-id="heading-5">2.1 é›¶ç´¢å¼•æµé‡ï¼šè½»é‡åŒ–çš„æˆæœ¬ä¼˜åŠ¿</h3>
<p>ä¸æ—§ç‰ˆæ—¥å¿—èšç±»ç›¸æ¯”ï¼Œæ–°ç‰ˆæ—¥å¿—èšç±»æœ€å¤§çš„æ¶æ„ä¼˜åŠ¿æ˜¯é›¶é¢å¤–ç´¢å¼•æµé‡ã€‚</p>
<p>æ—§ç‰ˆæ—¥å¿—èšç±»éœ€è¦åœ¨æ•°æ®å†™å…¥æ—¶é¢„å…ˆè®¡ç®—èšç±»ç´¢å¼•ï¼Œè¿™æ„å‘³ç€æ¯æ¡æ—¥å¿—éƒ½ä¼šäº§ç”Ÿé¢å¤–çš„ç´¢å¼•å­˜å‚¨æˆæœ¬ã€‚å¯¹äºå¤§å‹ LogStoreï¼Œè¿™ä¸ªæˆæœ¬å¯èƒ½ç›¸å½“å¯è§‚ã€‚</p>
<p>æ–°ç‰ˆæ—¥å¿—èšç±»é‡‡ç”¨äº†å®Œå…¨ä¸åŒçš„ç­–ç•¥ï¼šå®ƒåŸºäºå·²æœ‰çš„å­—æ®µç´¢å¼•ï¼Œåœ¨æŸ¥è¯¢æ—¶å®æ—¶è®¡ç®—æ—¥å¿—æ¨¡æ¿ã€‚è¿™ç§â€œæŸ¥è¯¢æ—¶èšç±»â€çš„æ–¹å¼ï¼Œé¿å…äº†é¢„ç´¢å¼•å¸¦æ¥çš„å­˜å‚¨å¼€é”€ï¼ŒåŒæ—¶ä¹Ÿè®©èšç±»ç»“æœèƒ½å¤Ÿå³æ—¶åæ˜ æœ€æ–°çš„æ—¥å¿—æ•°æ®ã€‚</p>

























<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">æ–°ç‰ˆæ—¥å¿—èšç±»</th><th align="left">æ—§ç‰ˆæ—¥å¿—èšç±»</th></tr></thead><tbody><tr><td align="left">ç´¢å¼•æ–¹å¼</td><td align="left">æŸ¥è¯¢æ—¶å®æ—¶è®¡ç®—</td><td align="left">å†™å…¥æ—¶é¢„è®¡ç®—ç´¢å¼•</td></tr><tr><td align="left">é¢å¤–ç´¢å¼•æµé‡</td><td align="left">æ— </td><td align="left">æœ‰</td></tr><tr><td align="left">æˆæœ¬æ¨¡å‹</td><td align="left">çº¯åˆ†ææ“ä½œ</td><td align="left">æŒ‰æ–°å¢ç´¢å¼•æµé‡è®¡è´¹</td></tr></tbody></table>
<h3 data-id="heading-6">2.2 æ™ºèƒ½é‡‡æ ·ï¼šå¹³è¡¡ç²¾åº¦ä¸æ€§èƒ½</h3>
<p>å½“æ—¥å¿—é‡ç‰¹åˆ«å¤§æ—¶ï¼ˆä¾‹å¦‚æ—¶é—´çª—å£å†…æœ‰æ•°åƒä¸‡æ¡æ—¥å¿—ï¼‰ï¼Œå…¨é‡åˆ†ææ—¢ä¸ç°å®ä¹Ÿæ— å¿…è¦ã€‚æ–°ç‰ˆæ—¥å¿—èšç±»å†…ç½®äº†æ™ºèƒ½é‡‡æ ·ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// é‡‡æ ·ç­–ç•¥ï¼šå½“æ—¥å¿—é‡è¶…è¿‡é˜ˆå€¼æ—¶ï¼Œè‡ªåŠ¨é™é‡‡æ ·
constÂ <span class="hljs-attr">sampleQuery</span> = logCount &gt;Â <span class="hljs-number">50000</span>Â 
Â  ?Â `| sample <span class="hljs-attr">-method</span>=<span class="hljs-string">'bernoulli'</span>Â <span class="hljs-variable">${getSampleNumber(logCount,Â 50000)}</span>`Â 
Â  :Â ''
</code></pre>
<p>é‡‡æ ·ç®—æ³•é‡‡ç”¨ä¼¯åŠªåˆ©é‡‡æ ·ï¼ˆBernoulli Samplingï¼‰ï¼Œç¡®ä¿æ¯æ¡æ—¥å¿—è¢«é€‰ä¸­çš„æ¦‚ç‡ç›¸ç­‰ï¼Œä»è€Œä¿è¯é‡‡æ ·ç»“æœçš„ä»£è¡¨æ€§ã€‚åœ¨æ¨¡å‹æ„å»ºé˜¶æ®µï¼Œç³»ç»Ÿä¼šé‡‡æ ·æœ€å¤š 5 ä¸‡æ¡æ—¥å¿—ç”¨äºæ¨¡å¼å‘ç°ï¼›åœ¨ç»“æœåŒ¹é…é˜¶æ®µï¼Œä¼šé‡‡æ ·æœ€å¤š 20 ä¸‡æ¡æ—¥å¿—è¿›è¡Œæ¨¡å¼åŒ¹é…å’Œç»Ÿè®¡ã€‚</p>
<p>è¿™ç§åˆ†å±‚é‡‡æ ·çš„è®¾è®¡ï¼Œè®©ç³»ç»Ÿåœ¨å¤„ç†æµ·é‡æ•°æ®æ—¶ä»èƒ½ä¿æŒç§’çº§å“åº”ï¼ŒåŒæ—¶ä¸ä¼šæ˜¾è‘—å½±å“èšç±»æ•ˆæœã€‚</p>
<h3 data-id="heading-7">2.3 å˜é‡æ™ºèƒ½è¯†åˆ«ï¼šè¶…è¶Šç®€å•çš„æ¨¡å¼åŒ¹é…</h3>
<p>æ—¥å¿—èšç±»çš„æ ¸å¿ƒæŒ‘æˆ˜ä¹‹ä¸€æ˜¯å‡†ç¡®åŒºåˆ†æ—¥å¿—ä¸­çš„â€œå˜é‡éƒ¨åˆ†â€å’Œâ€œå¸¸é‡éƒ¨åˆ†â€ã€‚æ–°ç‰ˆæ—¥å¿—èšç±»é‡‡ç”¨äº†æ›´æ™ºèƒ½çš„å˜é‡è¯†åˆ«ç®—æ³•ï¼Œèƒ½å¤Ÿå¤„ç†å¤šç§å¤æ‚åœºæ™¯ï¼š</p>
<p><strong>æ•°å€¼å‹å˜é‡ï¼š</strong> è‡ªåŠ¨è¯†åˆ«æ•°å­—ã€IP åœ°å€ã€ç«¯å£å·ç­‰æ•°å€¼æ¨¡å¼ï¼Œå¹¶æ”¯æŒèŒƒå›´ç»Ÿè®¡ã€‚</p>
<p><strong>æšä¸¾å‹å˜é‡ï¼š</strong> å¯¹äºå–å€¼æœ‰é™çš„å˜é‡ï¼ˆå¦‚çŠ¶æ€ç ã€æœåŠ¡åï¼‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç»Ÿè®¡ Top N å–å€¼åˆ†å¸ƒã€‚</p>
<p><strong>å¤åˆå‹å˜é‡ï¼š</strong> å¯¹äºå¤æ‚çš„å˜é‡æ¨¡å¼ï¼ˆå¦‚ UUIDã€Trace IDï¼‰ï¼Œç³»ç»Ÿä¼šæ™ºèƒ½è¯†åˆ«å…¶è¾¹ç•Œã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// å˜é‡æ‘˜è¦ç»Ÿè®¡
|Â extendÂ <span class="hljs-attr">var_summary</span>Â =Â summary_log_variables(variables_arr,Â <span class="hljs-string">'{"topk": 10}'</span>)
</code></pre>
<p>å˜é‡æ‘˜è¦ï¼ˆ<code>var_summary</code>ï¼‰ä¸ä»…è®°å½•å˜é‡çš„å–å€¼æ ·ä¾‹ï¼Œè¿˜åŒ…å«å˜é‡çš„ç±»å‹æ¨æ–­ï¼ˆ<code>range</code> /Â <code>enum</code> /Â <code>gauge</code>ï¼‰å’Œåˆ†å¸ƒç»Ÿè®¡ï¼Œä¸ºåç»­çš„æ·±å…¥åˆ†æå¥ å®šåŸºç¡€ã€‚</p>
<h2 data-id="heading-8">æŠ€æœ¯å®ç°äº®ç‚¹</h2>
<h3 data-id="heading-9">3.1 SPL ç®—å­é©±åŠ¨çš„èšç±»æµæ°´çº¿</h3>
<p>æ–°ç‰ˆæ—¥å¿—èšç±»çš„æ ¸å¿ƒè®¡ç®—é€»è¾‘é€šè¿‡ SLS çš„ SPL å®ç°ï¼Œå½¢æˆäº†ä¸€æ¡å®Œæ•´çš„èšç±»æµæ°´çº¿ï¼š</p>
<h4 data-id="heading-10">3.1.1 ç¬¬ä¸€é˜¶æ®µï¼šæ¨¡å‹æ„å»º</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-operator">*</span>Â 
<span class="hljs-operator">|</span>Â stats content_arrÂ <span class="hljs-operator">=</span>Â <span class="hljs-built_in">array_agg</span>("Content")
<span class="hljs-operator">|</span>Â extend retÂ <span class="hljs-operator">=</span>Â get_log_patterns(
Â  Â  content_arr,Â 
Â  Â Â <span class="hljs-keyword">ARRAY</span>[<span class="hljs-string">'åˆ†éš”ç¬¦åˆ—è¡¨'</span>],Â 
Â  Â Â <span class="hljs-built_in">cast</span>(<span class="hljs-keyword">null</span>Â <span class="hljs-keyword">as</span>Â <span class="hljs-keyword">array</span>(<span class="hljs-type">varchar</span>)),Â 
Â  Â Â <span class="hljs-built_in">cast</span>(<span class="hljs-keyword">null</span>Â <span class="hljs-keyword">as</span>Â <span class="hljs-keyword">array</span>(<span class="hljs-type">varchar</span>)),Â 
Â  Â Â <span class="hljs-string">'{"threshold": 3, "tolerance": 0.1, "maxDigitRatio": 0.1}'</span>
Â  )
<span class="hljs-operator">|</span>Â extend model_idÂ <span class="hljs-operator">=</span>Â ret.model_id
</code></pre>
<p><code>get_log_patterns</code>Â æ˜¯æ ¸å¿ƒçš„æ¨¡å¼æå–ç®—å­ã€‚å®ƒæ¥æ”¶ä¸€ç»„æ—¥å¿—å†…å®¹ï¼Œé€šè¿‡èšç±»ç®—æ³•è‡ªåŠ¨å‘ç°å…¶ä¸­çš„æ—¥å¿—æ¨¡æ¿ã€‚ç®—æ³•å‚æ•°åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>threshold</code>ï¼šè¯†åˆ«æŸä¸ªä½ç½®çš„ token æ˜¯å¦æ˜¯å˜é‡çš„æœ€å°å€¼æ”¯æŒåº¦ï¼Œthreshold è¶Šå¤§ï¼Œtoken è¶Šä¸å®¹æ˜“è¢«åˆ¤å®šä¸ºå˜é‡ã€‚</li>
<li><code>tolerance</code>ï¼šå˜é‡è¯†åˆ«çš„å®¹å¿åº¦ï¼Œå®¹å¿åº¦è¶Šå°ï¼Œé«˜é¢‘å‡ºç°çš„ token è¶Šå®¹æ˜“è¢«åˆ¤å®šä¸ºå¸¸é‡ã€‚å»ºè®®ä½¿ç”¨é»˜è®¤å€¼ã€‚</li>
<li><code>maxDigitRatio</code>ï¼šæ•°å­—å­—ç¬¦çš„æœ€å¤§æ¯”ä¾‹é˜ˆå€¼ã€‚</li>
</ul>
<h4 data-id="heading-11">3.1.2 ç¬¬äºŒé˜¶æ®µï¼šæ¨¡å¼åŒ¹é…</h4>
<pre><code class="hljs language-ini" lang="ini">*Â 
|Â extendÂ <span class="hljs-attr">ret</span>Â =Â match_log_patterns(<span class="hljs-string">'${modelId}'</span>,Â <span class="hljs-string">"Content"</span>)
|Â extendÂ <span class="hljs-attr">pattern_id</span>Â =Â ret.pattern_id, pattern = ret.pattern,Â 
Â  Â  Â  Â  Â <span class="hljs-attr">pattern_regexp</span> = ret.regexp, variables = ret.variables
|Â statsÂ <span class="hljs-attr">event_num</span>Â =Â count(<span class="hljs-number">1</span>), hist = histogram(time_bucket_id)Â 
Â  by pattern_id
</code></pre>
<p><code>match_log_patterns</code>Â å°†æ¯æ¡æ—¥å¿—ä¸å·²å‘ç°çš„æ¨¡å¼è¿›è¡ŒåŒ¹é…ï¼Œæå–å‡ºï¼š</p>
<ul>
<li><code>pattern_id</code>ï¼šæ‰€å±çš„æ¨¡å¼ IDã€‚</li>
<li><code>pattern</code>ï¼šæ—¥å¿—æ¨¡æ¿ã€‚</li>
<li><code>pattern_regexp</code>ï¼šæ¨¡å¼çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚</li>
<li><code>variables</code>ï¼šå˜é‡éƒ¨åˆ†çš„å…·ä½“å–å€¼ã€‚</li>
</ul>
<h4 data-id="heading-12">3.1.3 ç¬¬ä¸‰é˜¶æ®µï¼šå¯¹æ¯”åˆ†æï¼ˆå¯é€‰ï¼‰</h4>
<pre><code class="hljs language-ini" lang="ini">|Â extendÂ <span class="hljs-attr">ret</span>Â =Â merge_log_patterns(<span class="hljs-string">'${modelId1}'</span>,Â <span class="hljs-string">'${modelId2}'</span>)
|Â extendÂ <span class="hljs-attr">model_id</span>Â =Â ret.model_id
</code></pre>
<p>å¯¹äºå¯¹æ¯”åˆ†æåœºæ™¯ï¼Œmerge_log_patternsÂ å¯ä»¥å°†ä¸¤ä¸ªæ—¶é—´æ®µçš„èšç±»æ¨¡å‹åˆå¹¶ï¼Œä»è€Œåœ¨ç»Ÿä¸€çš„æ¨¡å¼ç©ºé—´ä¸­è¿›è¡Œå¯¹æ¯”ï¼Œå‘ç°æ–°å¢ã€æ¶ˆå¤±æˆ–å˜åŒ–çš„æ—¥å¿—æ¨¡å¼ã€‚</p>
<h3 data-id="heading-13">3.2 å‰ç«¯æ¸²æŸ“ï¼šé«˜æ€§èƒ½çš„å¤§æ•°æ®å±•ç¤º</h3>
<p>åœ¨å‰ç«¯å®ç°ä¸Šï¼Œæ—¥å¿—èšç±»ç»„ä»¶é¢ä¸´çš„æ ¸å¿ƒæŒ‘æˆ˜æ˜¯ï¼šå¦‚ä½•é«˜æ•ˆåœ°æ¸²æŸ“å’Œäº¤äº’å¤§é‡çš„èšç±»ç»“æœï¼Ÿ</p>
<h4 data-id="heading-14">3.2.1 è™šæ‹Ÿæ»šåŠ¨ä¸åˆ†é¡µ</h4>
<p>èšç±»ç»“æœå¯èƒ½åŒ…å«æ•°ç™¾ç”šè‡³æ•°åƒä¸ªæ—¥å¿—æ¨¡å¼ã€‚ç³»ç»Ÿé‡‡ç”¨åˆ†é¡µåŠ è½½çš„æ–¹å¼ï¼Œæ¯é¡µåªæ¸²æŸ“ 15 æ¡è®°å½•ï¼Œé…åˆè™šæ‹Ÿæ»šåŠ¨æŠ€æœ¯ï¼Œç¡®ä¿ç•Œé¢å§‹ç»ˆæµç•…ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// åˆ†é¡µé€»è¾‘
constÂ <span class="hljs-section">[currentPage, setCurrentPage]</span> = useState&lt;number&gt;(1)
constÂ <span class="hljs-attr">pageSize</span> =Â <span class="hljs-number">15</span>
constÂ <span class="hljs-attr">pagedResult</span> =Â useMemo(() =&gt;Â {
Â Â constÂ <span class="hljs-attr">startIndex</span> = (currentPage -Â <span class="hljs-number">1</span>) * pageSize
Â Â returnÂ filteredResult.slice(startIndex, startIndex + pageSize)
}, <span class="hljs-section">[filteredResult, currentPage]</span>)
</code></pre>
<h4 data-id="heading-15">3.2.2 é«˜äº®å˜é‡çš„äº¤äº’è®¾è®¡</h4>
<p>æ—¥å¿—æ¨¡æ¿ä¸­çš„å˜é‡éƒ¨åˆ†éœ€è¦é«˜äº®æ˜¾ç¤ºï¼Œå¹¶æ”¯æŒç‚¹å‡»æŸ¥çœ‹å˜é‡åˆ†å¸ƒã€‚ç³»ç»Ÿå®ç°äº†ä¸€ä¸ªä¸“é—¨çš„Â <code>Highlight</code>Â ç»„ä»¶ï¼Œèƒ½å¤Ÿï¼š</p>
<ul>
<li>è§£ææ¨¡æ¿å­—ç¬¦ä¸²ï¼Œè¯†åˆ«å˜é‡å ä½ç¬¦ã€‚</li>
<li>ä¸ºæ¯ä¸ªå˜é‡ç”Ÿæˆç‹¬ç«‹çš„å¯ç‚¹å‡»åŒºåŸŸã€‚</li>
<li>ç‚¹å‡»åå±•ç¤ºè¯¥å˜é‡çš„åˆ†å¸ƒç»Ÿè®¡ã€‚ï¼ˆæšä¸¾å‹æ˜¾ç¤º Top N å–å€¼ï¼Œæ•°å€¼å‹æ˜¾ç¤ºèŒƒå›´åˆ†å¸ƒï¼‰</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0d720c27ec34b268470cb4fc0f0a2d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771316216&amp;x-signature=GIQw39PNH%2BV3065uaJ894uKg%2BZc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-16">3.2.3 å¯¹æ¯”è§†å›¾çš„åŒæŸ±çŠ¶å›¾</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c744a531a8645fb9017691ca37c09a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771316216&amp;x-signature=LYCGjs662d26YMcTc4Y6VPeI6VQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨å¯¹æ¯”åˆ†ææ¨¡å¼ä¸‹ï¼Œæ¯ä¸ªæ—¥å¿—æ¨¡å¼éœ€è¦åŒæ—¶å±•ç¤ºä¸¤ä¸ªæ—¶é—´æ®µçš„æ•°æ®åˆ†å¸ƒã€‚ç³»ç»Ÿä½¿ç”¨åŒè‰²æŸ±çŠ¶å›¾å®ç°è¿™ä¸€éœ€æ±‚ï¼š</p>
<ul>
<li><strong>æ·±è‰²æŸ±çŠ¶å›¾ï¼š</strong> å½“å‰æ—¶é—´èŒƒå›´ï¼ˆå®éªŒç»„ï¼‰çš„æ—¥å¿—æ•°é‡ã€‚</li>
<li><strong>æµ…è‰²æŸ±çŠ¶å›¾ï¼š</strong> å¯¹æ¯”æ—¶é—´èŒƒå›´ï¼ˆå¯¹æ¯”ç»„ï¼‰çš„æ—¥å¿—æ•°é‡ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ffe5bd3bb2b46b591632b6ec99b2f77~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771316216&amp;x-signature=U1dIDYtAe1bW%2FJx%2F2CRv2ezzknI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é€šè¿‡è§†è§‰å¯¹æ¯”ï¼Œç”¨æˆ·å¯ä»¥ç›´è§‚å‘ç°ï¼š</p>
<ul>
<li>æ–°å‡ºç°çš„æ—¥å¿—æ¨¡å¼ã€‚ï¼ˆå®éªŒç»„æœ‰ã€å¯¹æ¯”ç»„æ— ï¼‰</li>
<li>æ¶ˆå¤±çš„æ—¥å¿—æ¨¡å¼ã€‚ï¼ˆå®éªŒç»„æ— ã€å¯¹æ¯”ç»„æœ‰ï¼‰</li>
<li>æ•°é‡å˜åŒ–æ˜¾è‘—çš„æ—¥å¿—æ¨¡å¼ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9ab8317ca1042e2ab24d22ef62af81f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771316216&amp;x-signature=9szWsuPcao2UZdP%2F8ddlrB%2FDXnU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-17">3.3 æ­£åˆ™åæŸ¥ï¼šæ‰“é€šåˆ†æåˆ°æŸ¥è¯¢çš„æœ€åä¸€å…¬é‡Œ</h3>
<p>åœ¨æ—¥å¿—èšç±»é¡µé¢å‘ç°äº†é—®é¢˜æ¨¡å¼åï¼Œå¦‚ä½•æŸ¥çœ‹è¯¥ç±»åˆ«çš„å…¨éƒ¨æ—¥å¿—ï¼Ÿ</p>
<p>æ–°ç‰ˆæ—¥å¿—èšç±»é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚æ¯ä¸ªæ—¥å¿—æ¨¡æ¿éƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ˆ<code>pattern_regexp</code>ï¼‰ï¼Œç”¨æˆ·å¯ä»¥å¤åˆ¶è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œé…åˆÂ <code>regexp_like</code>Â ç®—å­è¿›è¡Œç²¾ç¡®æŸ¥è¯¢ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-operator">*</span>Â <span class="hljs-operator">|</span>Â <span class="hljs-keyword">SELECT</span>Â <span class="hljs-operator">*</span>Â <span class="hljs-keyword">FROM</span>Â logÂ <span class="hljs-keyword">WHERE</span>Â regexp_like(Content,Â <span class="hljs-string">'å¤åˆ¶çš„æ­£åˆ™è¡¨è¾¾å¼'</span>)
</code></pre>
<p>è¿™ç§è®¾è®¡å°†èšç±»åˆ†æä¸åŸå§‹æ—¥å¿—æŸ¥è¯¢æ— ç¼è¿æ¥ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿåœ¨å‘ç°é—®é¢˜æ¨¡å¼åï¼Œç«‹å³æ·±å…¥æŸ¥çœ‹å…·ä½“çš„æ—¥å¿—è¯¦æƒ…ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da44d31d0d704f0b80692c1615872999~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771316216&amp;x-signature=gkjM649m0RKadvnZGyuLidmnLQ0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-18">å…¸å‹ä½¿ç”¨åœºæ™¯</h2>
<h3 data-id="heading-19">4.1 åœºæ™¯ä¸€ï¼šå¿«é€Ÿå®šä½æ•…éšœæ—¥å¿—</h3>
<p>æŸç”µå•†å¹³å°åœ¨ä¿ƒé”€æ´»åŠ¨æœŸé—´æ”¶åˆ°å¤§é‡å‘Šè­¦ã€‚è¿ç»´å·¥ç¨‹å¸ˆæ‰“å¼€æ—¥å¿—èšç±»é¡µé¢ï¼š</p>
<ol>
<li>
<p>è®¾ç½®æ—¶é—´èŒƒå›´ä¸ºå‘Šè­¦å¼€å§‹åçš„ 10 åˆ†é’Ÿã€‚</p>
</li>
<li>
<p>åœ¨æŸ¥è¯¢è¯­å¥ä¸­è¿‡æ»¤æ‰æ­£å¸¸çš„ INFO æ—¥å¿—ï¼š<code>* and not LEVEL: INFO</code>ã€‚</p>
</li>
<li>
<p>æŸ¥çœ‹èšç±»ç»“æœï¼Œå‘ç°ä¸€ä¸ªæ–°å‡ºç°çš„æ¨¡å¼ï¼š<code>Got exception while serving &lt;*&gt; to /&lt;IP&gt;: Connection timeout</code>ã€‚</p>
</li>
<li>
<p>ç‚¹å‡»è¯¥æ¨¡å¼æŸ¥çœ‹å˜é‡åˆ†å¸ƒï¼Œå‘ç°Â <code>&lt;IP&gt;</code>Â é›†ä¸­åœ¨Â <code>10.251.xxx.xxx</code>Â ç½‘æ®µã€‚</p>
</li>
<li>
<p>åˆ¤æ–­å¯èƒ½æ˜¯è¯¥ç½‘æ®µçš„ç½‘ç»œé—®é¢˜ï¼Œç«‹å³è¿›è¡Œæ’æŸ¥ã€‚</p>
</li>
</ol>
<p>æ•´ä¸ªè¿‡ç¨‹ä¸åˆ° 5 åˆ†é’Ÿï¼Œè€Œä¼ ç»Ÿçš„å…³é”®å­—æœç´¢å¯èƒ½éœ€è¦å°è¯•å¤šä¸ªå…³é”®å­—ç»„åˆï¼Œè€—æ—¶æ•°å€ã€‚</p>
<h3 data-id="heading-20">4.2 åœºæ™¯äºŒï¼šç‰ˆæœ¬å‘å¸ƒå¯¹æ¯”åˆ†æ</h3>
<p>å¼€å‘å›¢é˜Ÿå‘å¸ƒäº†æ–°ç‰ˆæœ¬ï¼Œéœ€è¦è¯„ä¼°å¯¹æ—¥å¿—æ¨¡å¼çš„å½±å“ï¼š</p>
<ol>
<li>
<p>è®¾ç½®å½“å‰æ—¶é—´èŒƒå›´ä¸ºå‘å¸ƒå 1 å°æ—¶ã€‚</p>
</li>
<li>
<p>é…ç½®å¯¹æ¯”æ—¶é—´ä¸ºå‘å¸ƒå‰ 1 å°æ—¶ã€‚ï¼ˆå‘å‰åç§» 2 å°æ—¶ï¼‰</p>
</li>
<li>
<p>æŸ¥çœ‹å¯¹æ¯”ç»“æœï¼Œå…³æ³¨ä»¥ä¸‹æƒ…å†µï¼š</p>
</li>
</ol>
<ul>
<li>æ–°å‡ºç°çš„é”™è¯¯æ—¥å¿—æ¨¡å¼</li>
<li>æ¶ˆå¤±çš„æ—¥å¿—æ¨¡å¼ï¼ˆå¯èƒ½æ˜¯ä¿®å¤äº†æŸäº›é—®é¢˜ï¼‰</li>
<li>æ•°é‡æ˜¾è‘—å˜åŒ–çš„æ¨¡å¼</li>
</ul>
<ol start="4">
<li>å¯¹äºå¯ç–‘çš„æ–°æ¨¡å¼ï¼Œç‚¹å‡»æŸ¥çœ‹æ—¥å¿—æ ·ä¾‹è¿›ä¸€æ­¥åˆ†æã€‚</li>
</ol>
<h3 data-id="heading-21">4.3 åœºæ™¯ä¸‰ï¼šå¤šæ¨¡å—åˆ†ç»„åˆ†æ</h3>
<p>å½“æ—¥å¿—åº“ä¸­åŒ…å«å¤šä¸ªæ¨¡å—çš„æ—¥å¿—æ—¶ï¼Œå¯ä»¥ä½¿ç”¨åˆ†ç»„èšç±»åŠŸèƒ½ï¼š</p>
<ol>
<li>
<p>é€‰æ‹©èšåˆå­—æ®µä¸ºÂ <code>Component</code>Â æˆ–Â <code>ServiceName</code>ã€‚</p>
</li>
<li>
<p>ç³»ç»Ÿä¼šå…ˆæŒ‰æ¨¡å—åˆ†ç»„ï¼Œç„¶ååœ¨æ¯ä¸ªåˆ†ç»„å†…ç‹¬ç«‹è¿›è¡Œèšç±»ã€‚</p>
</li>
<li>
<p>é€šè¿‡åˆ†ç»„è§†å›¾ï¼Œå¯ä»¥å¿«é€Ÿå‘ç°å“ªä¸ªæ¨¡å—äº§ç”Ÿäº†å¼‚å¸¸æ—¥å¿—ã€‚</p>
</li>
</ol>
<p>è¿™ç§åˆ†å±‚åˆ†æçš„æ–¹å¼ï¼Œç‰¹åˆ«é€‚åˆå¤§å‹ç³»ç»Ÿçš„æ—¥å¿—åˆ†æï¼Œé¿å…äº†ä¸åŒæ¨¡å—çš„æ—¥å¿—ç›¸äº’å¹²æ‰°ã€‚</p>
<h2 data-id="heading-22">ç®—æ³•è®¾è®¡æ€è€ƒ</h2>
<h3 data-id="heading-23">5.1 ä¸ºä»€ä¹ˆé€‰æ‹©â€œæŸ¥è¯¢æ—¶èšç±»â€ï¼Ÿ</h3>
<p>åœ¨è®¾è®¡æ–°ç‰ˆæ—¥å¿—èšç±»æ—¶ï¼Œæˆ‘ä»¬é¢ä¸´ä¸€ä¸ªå…³é”®çš„æ¶æ„å†³ç­–ï¼šæ˜¯åœ¨å†™å…¥æ—¶é¢„è®¡ç®—èšç±»ç´¢å¼•ï¼Œè¿˜æ˜¯åœ¨æŸ¥è¯¢æ—¶å®æ—¶è®¡ç®—ï¼Ÿ</p>
<p>æœ€ç»ˆæˆ‘ä»¬é€‰æ‹©äº†åè€…ï¼Œä¸»è¦åŸºäºä»¥ä¸‹è€ƒè™‘ï¼š</p>
<p><strong>çµæ´»æ€§ï¼š</strong> é¢„è®¡ç®—æ–¹å¼éœ€è¦é¢„å…ˆå®šä¹‰èšç±»çš„å­—æ®µå’Œå‚æ•°ï¼Œä¸€æ—¦é…ç½®å°±éš¾ä»¥æ›´æ”¹ã€‚è€ŒæŸ¥è¯¢æ—¶è®¡ç®—å…è®¸ç”¨æˆ·åŠ¨æ€é€‰æ‹©èšç±»å­—æ®µã€è¿‡æ»¤æ¡ä»¶å’Œæ—¶é—´èŒƒå›´ï¼Œæä¾›äº†æ›´å¤§çš„çµæ´»æ€§ã€‚</p>
<p><strong>æˆæœ¬æ•ˆç›Šï¼š</strong> å¹¶éæ‰€æœ‰æ—¥å¿—éƒ½éœ€è¦èšç±»åˆ†æã€‚é¢„è®¡ç®—æ–¹å¼å¯¹æ‰€æœ‰æ—¥å¿—ç»Ÿä¸€å¤„ç†ï¼Œäº§ç”Ÿä¸å¿…è¦çš„æˆæœ¬ã€‚æŸ¥è¯¢æ—¶è®¡ç®—åˆ™æ˜¯â€œæŒ‰éœ€ä»˜è´¹â€ï¼Œåªæœ‰çœŸæ­£éœ€è¦åˆ†ææ—¶æ‰æ¶ˆè€—èµ„æºã€‚</p>
<p><strong>ç®—æ³•æ¼”è¿›ï¼š</strong> èšç±»ç®—æ³•æ˜¯ä¸€ä¸ªæŒç»­ä¼˜åŒ–çš„é¢†åŸŸã€‚æŸ¥è¯¢æ—¶è®¡ç®—è®©æˆ‘ä»¬å¯ä»¥éšæ—¶å‡çº§ç®—æ³•ï¼Œæ–°çš„åˆ†æè‡ªåŠ¨å—ç›Šäºæœ€æ–°çš„ç®—æ³•æ”¹è¿›ï¼Œè€Œæ— éœ€é‡æ–°å¤„ç†å†å²æ•°æ®ã€‚</p>
<h3 data-id="heading-24">5.2 é‡‡æ ·çš„è‰ºæœ¯ï¼šå¦‚ä½•åœ¨æ•ˆç‡å’Œç²¾åº¦é—´å–å¾—å¹³è¡¡</h3>
<p>é‡‡æ ·æ˜¯æ–°ç‰ˆæ—¥å¿—èšç±»çš„å…³é”®è®¾è®¡ä¹‹ä¸€ã€‚ä¸€ä¸ªè‡ªç„¶çš„æ‹…å¿§æ˜¯ï¼šé‡‡æ ·ä¼šä¸ä¼šé—æ¼é‡è¦çš„æ—¥å¿—æ¨¡å¼ï¼Ÿ</p>
<p>æˆ‘ä»¬çš„ç­–ç•¥æ˜¯â€œåˆ†é˜¶æ®µé‡‡æ ·â€ï¼š</p>
<p><strong>æ¨¡å¼å‘ç°é˜¶æ®µï¼š</strong> é‡‡æ · 5 ä¸‡æ¡æ—¥å¿—ç”¨äºå‘ç°æ¨¡å¼ã€‚ç”±äºæ—¥å¿—æ¨¡å¼çš„æ•°é‡é€šå¸¸è¿œå°äºæ—¥å¿—æ•°é‡ï¼ˆè¿™æ˜¯æ—¥å¿—èšç±»çš„åŸºæœ¬å‡è®¾ï¼‰ï¼Œ5 ä¸‡æ¡é‡‡æ ·é€šå¸¸è¶³ä»¥å‘ç°ç»å¤§å¤šæ•°æ¨¡å¼ã€‚</p>
<p><strong>æ¨¡å¼åŒ¹é…é˜¶æ®µï¼š</strong> é‡‡æ · 20 ä¸‡æ¡æ—¥å¿—è¿›è¡Œç»Ÿè®¡ã€‚è¿™ä¸ªé˜¶æ®µçš„é‡‡æ ·ä¸»è¦å½±å“æ•°é‡ç»Ÿè®¡çš„ç²¾åº¦ï¼Œè€Œéæ¨¡å¼çš„å‘ç°ã€‚</p>
<p><strong>å˜é‡ç»Ÿè®¡é˜¶æ®µï¼š</strong> å¯¹äºæ¯ä¸ªæ¨¡å¼ï¼Œä¿ç•™ Top 10 çš„å˜é‡å–å€¼ã€‚è¿™è¶³ä»¥è®©ç”¨æˆ·ç†è§£å˜é‡çš„åˆ†å¸ƒç‰¹å¾ã€‚</p>
<p>å®è·µè¡¨æ˜ï¼Œè¿™ç§åˆ†å±‚é‡‡æ ·ç­–ç•¥åœ¨ç»å¤§å¤šæ•°åœºæ™¯ä¸‹èƒ½å¤Ÿæä¾›è¶³å¤Ÿå‡†ç¡®çš„èšç±»ç»“æœï¼ŒåŒæ—¶ä¿æŒç§’çº§çš„æŸ¥è¯¢å“åº”ã€‚</p>
<h2 data-id="heading-25">æ€»ç»“ä¸å±•æœ›</h2>
<p>æ–°ç‰ˆæ—¥å¿—èšç±»ä»£è¡¨äº†æ—¥å¿—åˆ†æé¢†åŸŸçš„ä¸€æ¬¡èŒƒå¼è½¬å˜ï¼šä»è¢«åŠ¨çš„å…³é”®å­—æœç´¢ï¼Œåˆ°ä¸»åŠ¨çš„æ¨¡å¼å‘ç°ï¼›ä»äººå·¥çš„é€æ¡æ’æŸ¥ï¼Œåˆ°æ™ºèƒ½çš„ç±»åˆ«å½’çº³ã€‚</p>
<p>å®ƒçš„æ ¸å¿ƒä»·å€¼åœ¨äºï¼š</p>
<ol>
<li>
<p><strong>æ•ˆç‡æå‡ï¼š</strong> å°†æ•°ç™¾ä¸‡æ¡æ—¥å¿—å‹ç¼©ä¸ºæ•°ç™¾ä¸ªæ—¥å¿—ç±»åˆ«ï¼Œè®©å·¥ç¨‹å¸ˆèƒ½å¤Ÿå¿«é€ŸæŠŠæ¡æ—¥å¿—å…¨è²Œã€‚</p>
</li>
<li>
<p><strong>æ´å¯Ÿå‘ç°ï¼š</strong> è‡ªåŠ¨è¯†åˆ«æ–°å‡ºç°æˆ–æ¶ˆå¤±çš„æ—¥å¿—æ¨¡å¼ï¼Œå‘ç°äººå·¥éš¾ä»¥å¯Ÿè§‰çš„å˜åŒ–ã€‚</p>
</li>
<li>
<p><strong>æˆæœ¬ä¼˜åŒ–ï¼š</strong> é›¶é¢å¤–ç´¢å¼•æµé‡çš„è®¾è®¡ï¼Œè®©èšç±»åˆ†æä¸å†æ˜¯æˆæœ¬è´Ÿæ‹…ã€‚</p>
</li>
<li>
<p><strong>çµæ´»åˆ†æï¼š</strong> æ”¯æŒå¯¹æ¯”åˆ†æã€åˆ†ç»„èšç±»ç­‰å¤šç§åˆ†ææ¨¡å¼ï¼Œé€‚åº”ä¸åŒåœºæ™¯çš„éœ€æ±‚ã€‚</p>
</li>
</ol>
<p>å±•æœ›æœªæ¥ï¼Œæ—¥å¿—èšç±»è¿˜æœ‰æ›´å¤šå¯èƒ½æ€§ï¼š</p>
<ul>
<li><strong>ä¸å¼‚å¸¸æ£€æµ‹ç»“åˆï¼š</strong> è‡ªåŠ¨è¯†åˆ«æ•°é‡çªå¢æˆ–çªé™çš„æ—¥å¿—æ¨¡å¼ï¼Œæå‰é¢„è­¦æ½œåœ¨é—®é¢˜ã€‚</li>
<li><strong>ä¸ AI å¤§æ¨¡å‹ç»“åˆï¼š</strong> åˆ©ç”¨å¤§è¯­è¨€æ¨¡å‹ç†è§£æ—¥å¿—è¯­ä¹‰ï¼ŒååŠ©åˆ†ææ—¥å¿—æ¨¡æ¿ï¼Œæä¾›æ›´æ™ºèƒ½çš„æ¨¡å¼å½’ç±»å’Œé—®é¢˜è¯Šæ–­ã€‚</li>
<li><strong>ä¸ UModel èåˆï¼š</strong> å®ä½“è”ç³» LogSet æŸ¥çœ‹æ—¥å¿—èšç±»ç»“æœï¼Œæ„å»ºæ›´å®Œæ•´çš„å¯è§‚æµ‹çŸ¥è¯†å›¾è°±ã€‚</li>
</ul>
<p>æˆ‘ä»¬ç›¸ä¿¡ï¼Œéšç€è¿™äº›èƒ½åŠ›çš„ä¸æ–­æ¼”è¿›ï¼Œæ—¥å¿—åˆ†æå°†ä»ä¸€é¡¹ç¹ççš„è¿ç»´ä»»åŠ¡ï¼Œè½¬å˜ä¸ºä¸€ç§æ™ºèƒ½åŒ–çš„ç³»ç»Ÿæ´å¯Ÿå·¥å…·ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C# å®ç° ODTã€ODSã€ODP åˆ° DOCXã€XLSXã€PPTX çš„å®Œæ•´è½¬æ¢]]></title>    <link>https://juejin.cn/post/7604863528943829007</link>    <guid>https://juejin.cn/post/7604863528943829007</guid>    <pubDate>2026-02-10T08:22:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604863528943829007" data-draft-id="7604863528943812623" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C# å®ç° ODTã€ODSã€ODP åˆ° DOCXã€XLSXã€PPTX çš„å®Œæ•´è½¬æ¢"/> <meta itemprop="keywords" content="åç«¯,C#"/> <meta itemprop="datePublished" content="2026-02-10T08:22:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·835629078051"/> <meta itemprop="url" content="https://juejin.cn/user/3150554985403516"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C# å®ç° ODTã€ODSã€ODP åˆ° DOCXã€XLSXã€PPTX çš„å®Œæ•´è½¬æ¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3150554985403516/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·835629078051
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T08:22:44.000Z" title="Tue Feb 10 2026 08:22:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4dd98f0d92ab4eefaf6467a0b216c665~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODM1NjI5MDc4MDUx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771316566&amp;x-signature=lCwQMCuqr9qNLK8onk4AK4bCWrg%3D" alt="C#è½¬æ¢OpenDocumentä¸ºMicrosoft Officeæ–‡æ¡£" loading="lazy"/></p>
<p>åœ¨å½“ä»Šæ•°å­—åŒ–åŠå…¬ç¯å¢ƒä¸­ï¼Œæ–‡æ¡£æ ¼å¼çš„å…¼å®¹æ€§é—®é¢˜å¸¸å¸¸ç»™å¼€å‘è€…å’Œç»ˆç«¯ç”¨æˆ·å¸¦æ¥å›°æ‰°ã€‚OpenOfficeï¼ˆå¦‚ODTã€ODSã€ODPï¼‰å’ŒMicrosoft Officeï¼ˆå¦‚DOCXã€XLSXã€PPTXï¼‰ä½œä¸ºä¸¤å¤§ä¸»æµåŠå…¬å¥—ä»¶ï¼Œå®ƒä»¬å„è‡ªçš„æ–‡æ¡£æ ¼å¼è™½ç„¶åœ¨åŠŸèƒ½ä¸Šè¶‹è¿‘ï¼Œä½†åœ¨åº•å±‚ç»“æ„ä¸Šå­˜åœ¨æ˜¾è‘—å·®å¼‚ï¼Œå¯¼è‡´ç›´æ¥æ‰“å¼€æˆ–ç¼–è¾‘æ—¶å¸¸å‡ºç°æ ¼å¼é”™ä¹±ã€åŠŸèƒ½ç¼ºå¤±ç­‰é—®é¢˜ã€‚</p>
<p>å¹¸è¿çš„æ˜¯ï¼ŒC#ä½œä¸ºä¸€ç§åŠŸèƒ½å¼ºå¤§ä¸”çµæ´»çš„ç¼–ç¨‹è¯­è¨€ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†è‡ªåŠ¨åŒ–è§£å†³è¿™ä¸€ç—›ç‚¹çš„æ–¹æ¡ˆã€‚é€šè¿‡é›†æˆä¸“ä¸šçš„.NETæ–‡æ¡£å¤„ç†åº“ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾å®ç°OpenOfficeæ–‡æ¡£åˆ°Microsoft Officeæ–‡æ¡£çš„æ— ç¼è½¬æ¢ã€‚æœ¬æ–‡å°†ä¸ºæ‚¨æä¾›ä¸€ä¸ªè¯¦ç»†çš„å®è·µæ•™ç¨‹ï¼ŒæŒ‡å¯¼æ‚¨å¦‚ä½•åˆ©ç”¨C#ï¼Œé«˜æ•ˆã€å‡†ç¡®åœ°å°†ODTã€ODSå’ŒODPæ–‡ä»¶è½¬æ¢ä¸ºå¯¹åº”çš„DOCXã€XLSXå’ŒPPTXæ ¼å¼ã€‚</p>
<hr/>
<h2 data-id="heading-0">ç†è§£æ–‡æ¡£æ ¼å¼è½¬æ¢çš„æŒ‘æˆ˜ä¸C#è§£å†³æ–¹æ¡ˆçš„ä¼˜åŠ¿</h2>
<p>OpenOfficeç³»åˆ—æ–‡æ¡£æ ¼å¼ï¼ˆå¦‚ODTã€ODSã€ODPï¼‰åŸºäºå¼€æ”¾æ–‡æ¡£æ ¼å¼ï¼ˆOpenDocument Format, ODFï¼‰ï¼Œé‡‡ç”¨XMLç»“æ„å­˜å‚¨æ•°æ®ã€‚è€ŒMicrosoft Officeç³»åˆ—æ–‡æ¡£æ ¼å¼ï¼ˆå¦‚DOCXã€XLSXã€PPTXï¼‰åˆ™åŸºäºOffice Open XML (OOXML) æ ‡å‡†ï¼ŒåŒæ ·æ˜¯XMLç»“æ„ï¼Œä½†å…¶å†…éƒ¨å…ƒç´ ã€å‘½åç©ºé—´å’Œå®ç°ç»†èŠ‚ä¸ODFå­˜åœ¨è¾ƒå¤§å·®å¼‚ã€‚è¿™ç§å·®å¼‚æ˜¯å¯¼è‡´å…¼å®¹æ€§é—®é¢˜çš„æ ¹æœ¬åŸå› ã€‚</p>
<p>æ‰‹åŠ¨è½¬æ¢ä¸ä»…æ•ˆç‡ä½ä¸‹ï¼Œä¸”å®¹æ˜“å‡ºé”™ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§é‡æ–‡ä»¶æ—¶ã€‚ä½¿ç”¨C#è¿›è¡Œç¨‹åºåŒ–è½¬æ¢ï¼Œåˆ™èƒ½å¸¦æ¥æ˜¾è‘—ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>è‡ªåŠ¨åŒ–ä¸æ‰¹é‡å¤„ç†:</strong> ç¼–å†™ä¸€æ¬¡ä»£ç ï¼Œå³å¯å®ç°å¯¹å¤šä¸ªæ–‡ä»¶çš„æ‰¹é‡è½¬æ¢ï¼Œæå¤§åœ°èŠ‚çœæ—¶é—´å’ŒäººåŠ›ã€‚</li>
<li><strong>é›†æˆåˆ°ç°æœ‰ç³»ç»Ÿ:</strong> è½¬æ¢åŠŸèƒ½å¯ä»¥æ— ç¼é›†æˆåˆ°ä¸šåŠ¡ç³»ç»Ÿã€æ–‡æ¡£ç®¡ç†ç³»ç»Ÿæˆ–å·¥ä½œæµä¸­ï¼Œæå‡æ•´ä½“æ•ˆç‡ã€‚</li>
<li><strong>ä¿æŒæ ¼å¼ä¸å†…å®¹ä¸€è‡´æ€§:</strong> ä¸“ä¸šçš„æ–‡æ¡£å¤„ç†åº“èƒ½å¤Ÿæœ€å¤§é™åº¦åœ°ä¿ç•™åŸå§‹æ–‡æ¡£çš„å¸ƒå±€ã€æ ·å¼ã€å›¾ç‰‡ã€è¡¨æ ¼ç­‰å…ƒç´ ã€‚</li>
<li><strong>çµæ´»æ€§ä¸å¯æ§æ€§:</strong> å¼€å‘è€…å¯ä»¥æ ¹æ®éœ€æ±‚å®šåˆ¶è½¬æ¢è¿‡ç¨‹ï¼Œä¾‹å¦‚æŒ‡å®šè½¬æ¢èŒƒå›´ã€å¤„ç†ç‰¹å®šå…ƒç´ ç­‰ã€‚</li>
</ul>
<p>æœ¬æ–‡å°†å€ŸåŠ©ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ç¬¬ä¸‰æ–¹.NETæ–‡æ¡£å¤„ç†åº“ï¼Œæ¥å±•ç¤ºå¦‚ä½•å®ç°è¿™äº›è½¬æ¢ã€‚è¯¥åº“æä¾›äº†ä¸°å¯Œçš„APIï¼Œèƒ½å¤Ÿæ·±å…¥æ“ä½œå„ç§æ–‡æ¡£æ ¼å¼ï¼Œå®ç°é«˜è´¨é‡çš„è½¬æ¢ã€‚</p>
<hr/>
<h2 data-id="heading-1">ODTåˆ°DOCXçš„è½¬æ¢å®è·µ</h2>
<p>ODTï¼ˆOpenDocument Textï¼‰æ˜¯OpenOffice Writerçš„é»˜è®¤æ–‡æœ¬æ ¼å¼ï¼Œè€ŒDOCXæ˜¯Microsoft Wordçš„ç°ä»£æ–‡æ¡£æ ¼å¼ã€‚å°†ODTè½¬æ¢ä¸ºDOCXæ˜¯æ—¥å¸¸å·¥ä½œä¸­å¸¸è§çš„éœ€æ±‚ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä½¿ç”¨C#å®ç°ODTåˆ°DOCXè½¬æ¢çš„è¯¦ç»†æ­¥éª¤å’Œä»£ç ç¤ºä¾‹ï¼š</p>
<ol>
<li>
<p><strong>å‡†å¤‡ç¯å¢ƒ:</strong> ç¡®ä¿æ‚¨çš„é¡¹ç›®ä¸­å·²å¼•ç”¨äº†å¯¹åº”çš„.NETæ–‡æ¡£å¤„ç†åº“ï¼ˆåœ¨NuGetä¸­æœç´¢å¹¶å®‰è£…ï¼‰ã€‚</p>
</li>
<li>
<p><strong>ç¼–å†™ä»£ç :</strong></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.IO;
<span class="hljs-keyword">using</span> Spire.Doc; <span class="hljs-comment">// è¯·æ³¨æ„ï¼Œæ­¤å¤„ä½¿ç”¨äº†Spire.Docå‘½åç©ºé—´</span>

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">OdtToDocxConverter</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ConvertOdtToDocx</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> inputFilePath, <span class="hljs-built_in">string</span> outputFilePath</span>)</span>
    {
        <span class="hljs-keyword">try</span>
        {
            <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªDocumentå¯¹è±¡</span>
            Document document = <span class="hljs-keyword">new</span> Document();

            <span class="hljs-comment">// ä»æŒ‡å®šçš„ODTæ–‡ä»¶è·¯å¾„åŠ è½½æ–‡æ¡£</span>
            <span class="hljs-comment">// ç¡®ä¿æ–‡ä»¶è·¯å¾„æ­£ç¡®ï¼Œä¸”æ–‡ä»¶å­˜åœ¨</span>
            document.LoadFromFile(inputFilePath);

            <span class="hljs-comment">// å°†æ–‡æ¡£ä¿å­˜ä¸ºDOCXæ ¼å¼</span>
            <span class="hljs-comment">// FileFormat.Docx æŒ‡å®šäº†ç›®æ ‡æ ¼å¼</span>
            document.SaveToFile(outputFilePath, FileFormat.Docx2019);  <span class="hljs-comment">//æˆ–Docx2016ã€Docç­‰</span>

            Console.WriteLine(<span class="hljs-string">$"æˆåŠŸå°† '<span class="hljs-subst">{inputFilePath}</span>' è½¬æ¢ä¸º '<span class="hljs-subst">{outputFilePath}</span>'ã€‚"</span>);
        }
        <span class="hljs-keyword">catch</span> (Exception ex)
        {
            Console.WriteLine(<span class="hljs-string">$"è½¬æ¢è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯: <span class="hljs-subst">{ex.Message}</span>"</span>);
        }
        <span class="hljs-keyword">finally</span>
        {
            <span class="hljs-comment">// é‡Šæ”¾èµ„æºï¼Œé˜²æ­¢å†…å­˜æ³„æ¼</span>
            <span class="hljs-comment">// document.Dispose(); // Spire.Docçš„Documentç±»é€šå¸¸æœ‰Disposeæ–¹æ³•ï¼Œæˆ–åœ¨usingå—ä¸­è‡ªåŠ¨å¤„ç†</span>
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span>
    {
        <span class="hljs-built_in">string</span> odtFilePath = <span class="hljs-string">"Sample11.odt"</span>; <span class="hljs-comment">// è¯·æ›¿æ¢ä¸ºæ‚¨çš„ODTæ–‡ä»¶è·¯å¾„</span>
        <span class="hljs-built_in">string</span> docxFilePath = <span class="hljs-string">"Output.docx"</span>; <span class="hljs-comment">// æŒ‡å®šè¾“å‡ºçš„DOCXæ–‡ä»¶è·¯å¾„</span>

        <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªç¤ºä¾‹ODTæ–‡ä»¶ (å¯é€‰ï¼Œç”¨äºæµ‹è¯•)</span>
        <span class="hljs-comment">// Document tempDoc = new Document();</span>
        <span class="hljs-comment">// tempDoc.AddSection().Paragraphs.Add().AppendText("è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ç”¨çš„ODTæ–‡æ¡£ã€‚");</span>
        <span class="hljs-comment">// tempDoc.SaveToFile(odtFilePath, FileFormat.Odt);</span>
        <span class="hljs-comment">// tempDoc.Dispose();</span>

        ConvertOdtToDocx(odtFilePath, docxFilePath);
    }
}
</code></pre>
</li>
</ol>
<p><strong>è½¬æ¢ç»“æœç¤ºä¾‹ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fbde036580834802bc14157a358b3f64~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODM1NjI5MDc4MDUx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771316566&amp;x-signature=vWwrM4q%2FE1yJ35YnnxdGXmqx8%2Fg%3D" alt="C#è½¬æ¢ODTä¸ºDOCX" loading="lazy"/></p>
<p><strong>ä»£ç è§£é‡Š:</strong></p>
<ul>
<li><code>Document document = new Document();</code>: åˆå§‹åŒ–ä¸€ä¸ªæ–‡æ¡£å¯¹è±¡ã€‚</li>
<li><code>document.LoadFromFile(inputFilePath);</code>: åŠ è½½æºODTæ–‡ä»¶ã€‚</li>
<li><code>document.SaveToFile(outputFilePath, FileFormat.Docx);</code>: å°†åŠ è½½çš„æ–‡æ¡£ä¿å­˜ä¸ºDOCXæ ¼å¼ã€‚<code>FileFormat.Docx</code> æ˜¯ä¸€ä¸ªæšä¸¾å€¼ï¼Œç”¨äºæŒ‡å®šç›®æ ‡æ–‡ä»¶æ ¼å¼ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-2">ODSåˆ°XLSXçš„è½¬æ¢å®è·µ</h2>
<p>ODSï¼ˆOpenDocument Spreadsheetï¼‰æ˜¯OpenOffice Calcçš„ç”µå­è¡¨æ ¼æ ¼å¼ï¼Œè€ŒXLSXæ˜¯Microsoft Excelçš„ç°ä»£ç”µå­è¡¨æ ¼æ ¼å¼ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä½¿ç”¨C#å®ç°ODSåˆ°XLSXè½¬æ¢çš„è¯¦ç»†æ­¥éª¤å’Œä»£ç ç¤ºä¾‹ï¼š</p>
<ol>
<li>
<p><strong>å‡†å¤‡ç¯å¢ƒ:</strong> ç¡®ä¿æ‚¨çš„é¡¹ç›®ä¸­å·²å¼•ç”¨äº†å¯¹åº”çš„.NETæ–‡æ¡£å¤„ç†åº“ï¼ˆåœ¨NuGetä¸­æœç´¢å¹¶å®‰è£…ï¼‰ã€‚</p>
</li>
<li>
<p><strong>ç¼–å†™ä»£ç :</strong></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.IO;
<span class="hljs-keyword">using</span> Spire.Xls; <span class="hljs-comment">// è¯·æ³¨æ„ï¼Œæ­¤å¤„ä½¿ç”¨äº†Spire.Xlså‘½åç©ºé—´</span>

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">OdsToXlsxConverter</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ConvertOdsToXlsx</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> inputFilePath, <span class="hljs-built_in">string</span> outputFilePath</span>)</span>
    {
        <span class="hljs-keyword">try</span>
        {
            <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªWorkbookå¯¹è±¡</span>
            Workbook workbook = <span class="hljs-keyword">new</span> Workbook();

            <span class="hljs-comment">// ä»æŒ‡å®šçš„ODSæ–‡ä»¶è·¯å¾„åŠ è½½å·¥ä½œç°¿</span>
            workbook.LoadFromFile(inputFilePath);

            <span class="hljs-comment">// å°†å·¥ä½œç°¿ä¿å­˜ä¸ºXLSXæ ¼å¼</span>
            workbook.SaveToFile(outputFilePath, ExcelVersion.Version2016); <span class="hljs-comment">// æˆ– Version2013, Version2010, Version97to2003ç­‰</span>

            Console.WriteLine(<span class="hljs-string">$"æˆåŠŸå°† '<span class="hljs-subst">{inputFilePath}</span>' è½¬æ¢ä¸º '<span class="hljs-subst">{outputFilePath}</span>'ã€‚"</span>);
        }
        <span class="hljs-keyword">catch</span> (Exception ex)
        {
            Console.WriteLine(<span class="hljs-string">$"è½¬æ¢è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯: <span class="hljs-subst">{ex.Message}</span>"</span>);
        }
        <span class="hljs-keyword">finally</span>
        {
            <span class="hljs-comment">// é‡Šæ”¾èµ„æº</span>
            <span class="hljs-comment">// workbook.Dispose();</span>
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span>
    {
        <span class="hljs-built_in">string</span> odsFilePath = <span class="hljs-string">"Sample.ods"</span>; <span class="hljs-comment">// è¯·æ›¿æ¢ä¸ºæ‚¨çš„ODSæ–‡ä»¶è·¯å¾„</span>
        <span class="hljs-built_in">string</span> xlsxFilePath = <span class="hljs-string">"Output.xlsx"</span>; <span class="hljs-comment">// æŒ‡å®šè¾“å‡ºçš„XLSXæ–‡ä»¶è·¯å¾„</span>

        <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªç¤ºä¾‹ODSæ–‡ä»¶ (å¯é€‰ï¼Œç”¨äºæµ‹è¯•)</span>
        <span class="hljs-comment">// Workbook tempWorkbook = new Workbook();</span>
        <span class="hljs-comment">// tempWorkbook.Worksheets[0].Range["A1"].Text = "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ç”¨çš„ODSç”µå­è¡¨æ ¼ã€‚";</span>
        <span class="hljs-comment">// tempWorkbook.SaveToFile(odsFilePath, FileFormat.Ods);</span>
        <span class="hljs-comment">// tempWorkbook.Dispose();</span>

        ConvertOdsToXlsx(odsFilePath, xlsxFilePath);
    }
}
</code></pre>
</li>
</ol>
<p><strong>ä»£ç è§£é‡Š:</strong></p>
<ul>
<li><code>Workbook workbook = new Workbook();</code>: åˆå§‹åŒ–ä¸€ä¸ªå·¥ä½œç°¿å¯¹è±¡ã€‚</li>
<li><code>workbook.LoadFromFile(inputFilePath);</code>: åŠ è½½æºODSæ–‡ä»¶ã€‚</li>
<li><code>workbook.SaveToFile(outputFilePath, ExcelVersion.Version2013);</code>: å°†åŠ è½½çš„å·¥ä½œç°¿ä¿å­˜ä¸ºXLSXæ ¼å¼ã€‚<code>ExcelVersion</code> æšä¸¾ç”¨äºæŒ‡å®šç›®æ ‡Excelç‰ˆæœ¬ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-3">ODPåˆ°PPTXçš„è½¬æ¢å®è·µ</h2>
<p>ODPï¼ˆOpenDocument Presentationï¼‰æ˜¯OpenOffice Impressçš„æ¼”ç¤ºæ–‡ç¨¿æ ¼å¼ï¼Œè€ŒPPTXæ˜¯Microsoft PowerPointçš„ç°ä»£æ¼”ç¤ºæ–‡ç¨¿æ ¼å¼ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä½¿ç”¨C#å®ç°ODPåˆ°PPTXè½¬æ¢çš„è¯¦ç»†æ­¥éª¤å’Œä»£ç ç¤ºä¾‹ï¼š</p>
<ol>
<li>
<p><strong>å‡†å¤‡ç¯å¢ƒ:</strong> ç¡®ä¿æ‚¨çš„é¡¹ç›®ä¸­å·²å¼•ç”¨äº†å¯¹åº”çš„.NETæ–‡æ¡£å¤„ç†åº“ï¼ˆåœ¨NuGetä¸­æœç´¢å¹¶å®‰è£…ï¼‰ã€‚</p>
</li>
<li>
<p><strong>ç¼–å†™ä»£ç :</strong></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.IO;
<span class="hljs-keyword">using</span> Spire.Presentation; <span class="hljs-comment">// è¯·æ³¨æ„ï¼Œæ­¤å¤„ä½¿ç”¨äº†Spire.Presentationå‘½åç©ºé—´</span>

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">OdpToPptxConverter</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ConvertOdpToPptx</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> inputFilePath, <span class="hljs-built_in">string</span> outputFilePath</span>)</span>
    {
        <span class="hljs-keyword">try</span>
        {
            <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªPresentationå¯¹è±¡</span>
            Presentation presentation = <span class="hljs-keyword">new</span> Presentation();

            <span class="hljs-comment">// ä»æŒ‡å®šçš„ODPæ–‡ä»¶è·¯å¾„åŠ è½½æ¼”ç¤ºæ–‡ç¨¿</span>
            presentation.LoadFromFile(inputFilePath);

            <span class="hljs-comment">// å°†æ¼”ç¤ºæ–‡ç¨¿ä¿å­˜ä¸ºPPTXæ ¼å¼</span>
            presentation.SaveToFile(outputFilePath, FileFormat.Pptx2019); <span class="hljs-comment">// æˆ– Pptx2013, Pptx2016ç­‰ï¼Œä»¥åŠPPT</span>

            Console.WriteLine(<span class="hljs-string">$"æˆåŠŸå°† '<span class="hljs-subst">{inputFilePath}</span>' è½¬æ¢ä¸º '<span class="hljs-subst">{outputFilePath}</span>'ã€‚"</span>);
        }
        <span class="hljs-keyword">catch</span> (Exception ex)
        {
            Console.WriteLine(<span class="hljs-string">$"è½¬æ¢è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯: <span class="hljs-subst">{ex.Message}</span>"</span>);
        }
        <span class="hljs-keyword">finally</span>
        {
            <span class="hljs-comment">// é‡Šæ”¾èµ„æº</span>
            <span class="hljs-comment">// presentation.Dispose();</span>
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span>
    {
        <span class="hljs-built_in">string</span> odpFilePath = <span class="hljs-string">"Sample.odp"</span>; <span class="hljs-comment">// è¯·æ›¿æ¢ä¸ºæ‚¨çš„ODPæ–‡ä»¶è·¯å¾„</span>
        <span class="hljs-built_in">string</span> pptxFilePath = <span class="hljs-string">"Output.pptx"</span>; <span class="hljs-comment">// æŒ‡å®šè¾“å‡ºçš„PPTXæ–‡ä»¶è·¯å¾„</span>

        <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªç¤ºä¾‹ODPæ–‡ä»¶ (å¯é€‰ï¼Œç”¨äºæµ‹è¯•)</span>
        <span class="hljs-comment">// Presentation tempPresentation = new Presentation();</span>
        <span class="hljs-comment">// tempPresentation.Slides.Append(); // æ·»åŠ ä¸€ä¸ªå¹»ç¯ç‰‡</span>
        <span class="hljs-comment">// tempPresentation.Slides[0].Shapes.AppendShape(ShapeType.Rectangle, new RectangleF(100, 100, 200, 50));</span>
        <span class="hljs-comment">// (tempPresentation.Slides[0].Shapes[0] as IAutoShape).TextFrame.Text = "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ç”¨çš„ODPæ¼”ç¤ºæ–‡ç¨¿ã€‚";</span>
        <span class="hljs-comment">// tempPresentation.SaveToFile(odpFilePath, FileFormat.Odp);</span>
        <span class="hljs-comment">// tempPresentation.Dispose();</span>

        ConvertOdpToPptx(odpFilePath, pptxFilePath);
    }
}
</code></pre>
</li>
</ol>
<p><strong>ä»£ç è§£é‡Š:</strong></p>
<ul>
<li><code>Presentation presentation = new Presentation();</code>: åˆå§‹åŒ–ä¸€ä¸ªæ¼”ç¤ºæ–‡ç¨¿å¯¹è±¡ã€‚</li>
<li><code>presentation.LoadFromFile(inputFilePath);</code>: åŠ è½½æºODPæ–‡ä»¶ã€‚</li>
<li><code>presentation.SaveToFile(outputFilePath, FileFormat.Pptx2013);</code>: å°†åŠ è½½çš„æ¼”ç¤ºæ–‡ç¨¿ä¿å­˜ä¸ºPPTXæ ¼å¼ã€‚<code>FileFormat.Pptx2013</code> æšä¸¾ç”¨äºæŒ‡å®šç›®æ ‡PowerPointç‰ˆæœ¬ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-4">é€šç”¨æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ</h2>
<p>åœ¨è¿›è¡Œæ–‡æ¡£æ ¼å¼è½¬æ¢æ—¶ï¼Œä»¥ä¸‹å‡ ç‚¹å»ºè®®å¯ä»¥å¸®åŠ©æ‚¨æå‡ä»£ç çš„å¥å£®æ€§å’Œæ•ˆç‡ï¼š</p>
<ul>
<li><strong>é”™è¯¯å¤„ç†:</strong> å§‹ç»ˆä½¿ç”¨ <code>try-catch</code> å—æ¥æ•è·æ½œåœ¨çš„å¼‚å¸¸ï¼Œä¾‹å¦‚æ–‡ä»¶ä¸å­˜åœ¨ã€æ–‡ä»¶æŸåæˆ–è½¬æ¢è¿‡ç¨‹ä¸­å‘ç”Ÿçš„é”™è¯¯ã€‚è¿™èƒ½ä½¿æ‚¨çš„åº”ç”¨ç¨‹åºæ›´åŠ ç¨³å®šã€‚</li>
<li><strong>æ–‡ä»¶è·¯å¾„å¤„ç†:</strong> ç¡®ä¿è¾“å…¥å’Œè¾“å‡ºæ–‡ä»¶è·¯å¾„çš„æ­£ç¡®æ€§ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå»ºè®®ä½¿ç”¨ <code>Path.Combine</code> ç­‰æ–¹æ³•æ¥æ„å»ºè·¯å¾„ï¼Œä»¥é€‚åº”ä¸åŒæ“ä½œç³»ç»Ÿçš„æ–‡ä»¶è·¯å¾„åˆ†éš”ç¬¦ã€‚è€ƒè™‘ä½¿ç”¨ç»å¯¹è·¯å¾„æˆ–åŸºäºåº”ç”¨ç¨‹åºæ ¹ç›®å½•çš„ç›¸å¯¹è·¯å¾„ã€‚</li>
<li><strong>èµ„æºé‡Šæ”¾:</strong> æ–‡æ¡£å¤„ç†åº“é€šå¸¸ä¼šå ç”¨å†…å­˜å’Œæ–‡ä»¶å¥æŸ„ã€‚åœ¨å®Œæˆæ“ä½œåï¼ŒåŠ¡å¿…è°ƒç”¨å¯¹è±¡çš„ <code>Dispose()</code> æ–¹æ³•æˆ–å°†å…¶æ”¾ç½®åœ¨ <code>using</code> è¯­å¥ä¸­ï¼Œä»¥ç¡®ä¿åŠæ—¶é‡Šæ”¾èµ„æºï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–:</strong> å¯¹äºéœ€è¦æ‰¹é‡è½¬æ¢å¤§é‡æ–‡ä»¶çš„æƒ…å†µï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å¤šçº¿ç¨‹æˆ–å¼‚æ­¥ç¼–ç¨‹æ¥å¹¶è¡Œå¤„ç†ï¼Œä»è€Œæé«˜æ•´ä½“è½¬æ¢æ•ˆç‡ã€‚ä½†åœ¨å®ç°æ—¶éœ€æ³¨æ„çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</li>
<li><strong>åº“çš„æˆæƒä¸é™åˆ¶:</strong> å¤šæ•°ä¸“ä¸šçš„æ–‡æ¡£å¤„ç†åº“åœ¨å…è´¹è¯•ç”¨ç‰ˆä¸­ä¼šæœ‰åŠŸèƒ½é™åˆ¶ï¼ˆå¦‚æ°´å°ã€é¡µæ•°é™åˆ¶ï¼‰ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¯·ç¡®ä¿è·å–å¹¶ä½¿ç”¨åˆæ³•çš„å•†ä¸šæˆæƒã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-5">ç»“è®º</h2>
<p>æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨C#ç»“åˆå¼ºå¤§çš„.NETæ–‡æ¡£å¤„ç†åº“ï¼Œå®ç°OpenOfficeæ–‡æ¡£ï¼ˆODTã€ODSã€ODPï¼‰åˆ°Microsoft Officeæ–‡æ¡£ï¼ˆDOCXã€XLSXã€PPTXï¼‰çš„é«˜æ•ˆè½¬æ¢ã€‚é€šè¿‡æä¾›çš„è¯¦ç»†ä»£ç ç¤ºä¾‹å’Œè§£é‡Šï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿè½»æ¾åœ°å°†è¿™äº›åŠŸèƒ½é›†æˆåˆ°æ‚¨çš„C#åº”ç”¨ç¨‹åºä¸­ã€‚</p>
<p>è¿™ç§è‡ªåŠ¨åŒ–è½¬æ¢æ–¹æ¡ˆä¸ä»…è§£å†³äº†å›°æ‰°è®¸å¤šç”¨æˆ·çš„æ–‡æ¡£å…¼å®¹æ€§é—®é¢˜ï¼Œæ›´é€šè¿‡ç¨‹åºåŒ–çš„æ–¹å¼ï¼Œå¸¦æ¥äº†å‰æ‰€æœªæœ‰çš„æ•ˆç‡æå‡å’Œçµæ´»æ€§ã€‚æ— è®ºæ˜¯éœ€è¦å¤„ç†ä¸ªäººæ–‡æ¡£ï¼Œè¿˜æ˜¯ä¸ºä¼ä¸šæ„å»ºå¤æ‚çš„æ–‡æ¡£ç®¡ç†ç³»ç»Ÿï¼ŒæŒæ¡è¿™äº›è½¬æ¢æŠ€å·§éƒ½å°†æå¤§åœ°å¢å¼ºå¼€å‘èƒ½åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä» 0-1 è½»æ¾å­¦ä¼š Vue3 Composablesï¼ˆç»„åˆå¼å‡½æ•°ï¼‰ï¼Œå‘Šåˆ«è‡ƒè‚¿ä»£ç ï¼Œåšä¼šå°è£…çš„ä¼˜é›…å‰ç«¯]]></title>    <link>https://juejin.cn/post/7604881286037127220</link>    <guid>https://juejin.cn/post/7604881286037127220</guid>    <pubDate>2026-02-10T08:18:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604881286037127220" data-draft-id="7604671453453910031" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä» 0-1 è½»æ¾å­¦ä¼š Vue3 Composablesï¼ˆç»„åˆå¼å‡½æ•°ï¼‰ï¼Œå‘Šåˆ«è‡ƒè‚¿ä»£ç ï¼Œåšä¼šå°è£…çš„ä¼˜é›…å‰ç«¯"/> <meta itemprop="keywords" content="Vue.js,ä»£ç è§„èŒƒ"/> <meta itemprop="datePublished" content="2026-02-10T08:18:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SuperEugene"/> <meta itemprop="url" content="https://juejin.cn/user/2366613652515256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä» 0-1 è½»æ¾å­¦ä¼š Vue3 Composablesï¼ˆç»„åˆå¼å‡½æ•°ï¼‰ï¼Œå‘Šåˆ«è‡ƒè‚¿ä»£ç ï¼Œåšä¼šå°è£…çš„ä¼˜é›…å‰ç«¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2366613652515256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SuperEugene
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T08:18:34.000Z" title="Tue Feb 10 2026 08:18:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    14
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ps.æœ¬æ–‡ä¸­çš„ç¬¬å…«æ¡åŒ…å«è®²è§£æ‰€ç”¨åˆ°çš„æ‰€æœ‰ä»£ç ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å…ˆå¿˜æ‰å·²çŸ¥ç¼–ç â€œæ¨¡å¼â€ï¼Œæƒ³ä¸€ä¸ªçœŸå®é—®é¢˜</h2>
<p>å‡è®¾ç°åœ¨è¦å†™ä¸€ä¸ª<strong>äººå‘˜åˆ—è¡¨é¡µ</strong>ï¼š</p>
<ul>
<li>ä¸Šé¢æœ‰æœç´¢æ¡†ï¼ˆå§“åã€è´¦å·ã€æ‰‹æœºå·ï¼‰</li>
<li>ä¸­é—´ä¸€ä¸ªè¡¨æ ¼ï¼ˆæ•°æ® + åˆ†é¡µï¼‰</li>
<li>æ¯ä¸€è¡Œæœ‰ï¼šç¼–è¾‘ã€åˆ†é…è§’è‰²ã€æ”¹å¯†ç ã€åˆ é™¤</li>
<li>ç‚¹ç¼–è¾‘/æ”¹å¯†ç /åˆ†é…è§’è‰²ä¼šå¼¹å‡ºå¯¹è¯æ¡†</li>
</ul>
<p>å¦‚æœ<strong>å…¨å†™åœ¨ä¸€ä¸ª .vue æ–‡ä»¶é‡Œ</strong>ï¼Œä¼šæ€æ ·ï¼Ÿ</p>
<ul>
<li><code>&lt;template&gt;</code> è¿˜å¥½ï¼Œä¸»è¦æ˜¯å¸ƒå±€</li>
<li><code>&lt;script&gt;</code> é‡Œä¼šå †æ»¡ï¼šæœç´¢è¡¨å•æ•°æ®ã€è¡¨æ ¼æ•°æ®ã€åˆ†é¡µã€å¥½å‡ ä¸ªå¼¹çª—çš„æ˜¾ç¤º/éšè—ã€æ¯ä¸ªæŒ‰é’®çš„ç‚¹å‡»å‡½æ•°ã€æ¯ä¸ªå¼¹çª—çš„ç¡®è®¤/å…³é—­â€¦â€¦</li>
</ul>
<p>ä¸€ä¸ªæ–‡ä»¶åŠ¨ä¸åŠ¨å°± 500 è¡Œã€å‡ åä¸ªå˜é‡å’Œå‡½æ•°ï¼Œ<strong>æ”¹ä¸€å¤„è¦ç¿»åŠå¤©ï¼Œä¹Ÿä¸å¥½å¤ç”¨</strong>ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬è¦è§£å†³çš„æ˜¯ä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li><strong>æŠŠâ€œé€»è¾‘â€ä»â€œé¡µé¢â€é‡Œæ‹†å‡ºæ¥</strong>ï¼Œè®©é¡µé¢åªè´Ÿè´£â€œé•¿ä»€ä¹ˆæ ·ã€ç‚¹å“ªé‡Œâ€</li>
<li><strong>æ‹†å‡ºæ¥çš„é€»è¾‘è¦èƒ½å¤ç”¨</strong>ï¼Œæ¯”å¦‚åˆ«çš„é¡µé¢ä¹Ÿè¦â€œåˆ—è¡¨+åˆ†é¡µ+å¼¹çª—â€æ—¶å¯ä»¥ç›´æ¥ç”¨</li>
</ol>
<p>è¿™ç§ã€Œé€»è¾‘ä»é¡µé¢é‡ŒæŠ½å‡ºå»ã€æŒ‰åŠŸèƒ½ç»„ç»‡ã€å¯å¤ç”¨ã€çš„å†™æ³•ï¼Œåœ¨ Vue 3 é‡Œå°±å¯¹åº”ä¸¤æ ·ä¸œè¥¿ï¼š</p>
<ul>
<li><strong>ç»„åˆå¼ API</strong>ï¼šç”¨ <code>ref</code>ã€<code>reactive</code>ã€<code>onMounted</code> ç­‰å†™é€»è¾‘çš„æ–¹å¼</li>
<li><strong>ç»„åˆå¼å‡½æ•°ï¼ˆComposablesï¼‰</strong> - éŸ³æ ‡ï¼š/kÉ™m'pÉ™uzÉ™blz/ï¼šæŠŠä¸€æ®µé€»è¾‘å°è£…æˆä¸€ä¸ªâ€œä»¥ <code>use</code> å¼€å¤´çš„å‡½æ•°â€ï¼Œåœ¨é¡µé¢é‡Œè°ƒä¸€ä¸‹å°±èƒ½ç”¨</li>
</ul>
<p>ä¸‹é¢åˆ†æ­¥è®²ã€‚</p>
<h2 data-id="heading-1">äºŒã€ç¬¬ä¸€æ­¥ï¼šè®¤è¯†â€œç»„åˆå¼ APIâ€ï¼ˆåœ¨é¡µé¢é‡Œå†™é€»è¾‘ï¼‰</h2>
<p>ä»¥å‰ Vue 2 å¸¸è§çš„æ˜¯ã€Œé€‰é¡¹å¼ APIã€ï¼šä¸€ä¸ªç»„ä»¶é‡Œåˆ†å¥½å‡ å— â€”â€” <code>data</code>ã€<code>methods</code>ã€<code>mounted</code> ç­‰ï¼Œé€»è¾‘æŒ‰â€œç±»å‹â€åˆ†ï¼Œè€Œä¸æ˜¯æŒ‰â€œåŠŸèƒ½â€åˆ†ã€‚</p>
<p>Vue 3 çš„<strong>ç»„åˆå¼ API</strong> æ¢äº†ä¸€ç§æ€è·¯ï¼š<strong>åœ¨ <code>setup</code>ï¼ˆæˆ– <code>&lt;script setup&gt;</code>ï¼‰é‡Œï¼Œåƒå†™æ™®é€š JS ä¸€æ ·ï¼Œç”¨å˜é‡å’Œå‡½æ•°æŠŠâ€œå’ŒæŸå—åŠŸèƒ½ç›¸å…³çš„æ‰€æœ‰ä¸œè¥¿â€å†™åœ¨ä¸€èµ·</strong>ã€‚</p>
<p>ä¾‹å¦‚â€œæœç´¢â€è¿™ä¸€å—åŠŸèƒ½ï¼Œå¯ä»¥è¿™æ ·å†™åœ¨ä¸€èµ·ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å’Œâ€œæœç´¢â€ç›¸å…³çš„éƒ½æ”¾ä¸€èµ·</span>
<span class="hljs-keyword">const</span> searchForm = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">userName</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">userAccount</span>: <span class="hljs-string">''</span> })
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSearch</span> = (<span class="hljs-params"/>) =&gt; { <span class="hljs-comment">/* è°ƒç”¨æ¥å£ã€åˆ·æ–°åˆ—è¡¨ */</span> }
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleReset</span> = (<span class="hljs-params"/>) =&gt; { searchForm.<span class="hljs-property">userName</span> = <span class="hljs-string">''</span>; ... }
</code></pre>
<p>â€œåˆ†é¡µâ€åˆæ˜¯ä¸€å—ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> pagination = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">currentPage</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">pageSize</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">total</span>: <span class="hljs-number">0</span> })
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSizeChange</span> = (<span class="hljs-params">val</span>) =&gt; { ... }
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleCurrentChange</span> = (<span class="hljs-params">val</span>) =&gt; { ... }
</code></pre>
<p>è¿™æ ·å†™ï¼Œ<strong>åŒä¸€ä¸ªåŠŸèƒ½çš„æ•°æ®å’Œå‡½æ•°æŒ¨åœ¨ä¸€èµ·</strong>ï¼Œè¯»èµ·æ¥æ˜¯â€œä¸€å—ä¸€å—â€çš„ï¼Œè€Œä¸æ˜¯ data ä¸€å †ã€methods åˆä¸€å †ã€‚è¿™å°±æ˜¯â€œç»„åˆå¼â€çš„æ„æ€ï¼šæŒ‰<strong>é€»è¾‘å—</strong>ç»„åˆï¼Œè€Œä¸æ˜¯æŒ‰<strong>é€‰é¡¹ç±»å‹</strong>åˆ†ã€‚</p>
<p>ç”¨åˆ°çš„ä¸¤ä¸ªåŸºç¡€å·¥å…·è¦çŸ¥é“ï¼š</p>
<ul>
<li><strong><code>ref(å€¼)</code></strong>ï¼šå­˜â€œä¸€ä¸ªä¼šå˜çš„å€¼â€ï¼Œç”¨çš„æ—¶å€™è¦ <code>.value</code>ï¼›åœ¨æ¨¡æ¿é‡Œå¯ä»¥çœç•¥ <code>.value</code></li>
<li><strong><code>reactive(å¯¹è±¡)</code></strong>ï¼šå­˜â€œä¸€ç»„ä¼šå˜çš„å±æ€§â€ï¼Œç”¨çš„æ—¶å€™ç›´æ¥ <code>.å±æ€§å</code> å°±è¡Œ</li>
</ul>
<p>åˆ°è¿™é‡Œï¼Œä½ åªéœ€è¦è®°ä½ï¼š<strong>åœ¨ <code>&lt;script setup&gt;</code> é‡Œç”¨ <code>ref</code>/<code>reactive</code> + <code>å‡½æ•°</code>ï¼ŒæŠŠåŒä¸€å—åŠŸèƒ½çš„é€»è¾‘å†™åœ¨ä¸€èµ·</strong>ï¼Œè¿™å°±æ˜¯â€œç»„åˆå¼ APIâ€çš„ç”¨æ³•ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€ç¬¬äºŒæ­¥ï¼šé€»è¾‘å¤ªå¤šæ—¶ï¼ŒæŠŠâ€œä¸€æ•´å—â€æ¬å‡ºå»</h2>
<p>å½“è¿™ä¸€é¡µçš„é€»è¾‘è¶Šæ¥è¶Šå¤šï¼ˆæœç´¢ã€è¡¨æ ¼ã€åˆ†é¡µã€ç¼–è¾‘å¼¹çª—ã€æ”¹å¯†ç å¼¹çª—ã€è§’è‰²å¼¹çª—â€¦â€¦ï¼‰ï¼Œ<code>&lt;script setup&gt;</code> é‡Œä¼šå˜å¾—å¾ˆé•¿ã€‚ä¸‹ä¸€æ­¥å¾ˆè‡ªç„¶ï¼š<strong>æŠŠâ€œä¸€æ•´å—é€»è¾‘â€åŸæ ·æ¬åˆ°ä¸€ä¸ªå•ç‹¬çš„ .ts æ–‡ä»¶é‡Œ</strong>ã€‚</p>
<p>åšæ³•å°±ä¸‰æ­¥ï¼š</p>
<ol>
<li>æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œæ¯”å¦‚ <code>usePersonnelList.ts</code></li>
<li>åœ¨é‡Œé¢å†™ä¸€ä¸ª<strong>å‡½æ•°</strong>ï¼Œå‡½æ•°åæŒ‰çº¦å®šç”¨ <code>use</code> å¼€å¤´ï¼Œæ¯”å¦‚ <code>usePersonnelList</code></li>
<li>æŠŠåŸæ¥åœ¨é¡µé¢é‡Œçš„é‚£ä¸€å¤§å¨ï¼ˆ<code>ref</code>ã€<code>reactive</code>ã€æ‰€æœ‰ <code>handleXxx</code>ï¼‰<strong>å‰ªè¿‡å»</strong>ï¼Œæ”¾è¿›è¿™ä¸ªå‡½æ•°é‡Œï¼Œæœ€å <strong><code>return</code> å‡ºé¡µé¢éœ€è¦ç”¨çš„ä¸œè¥¿</strong></li>
</ol>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// usePersonnelList.ts</span>
<span class="hljs-keyword">import</span> { ref, reactive } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">usePersonnelList</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> searchForm = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">userName</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">userAccount</span>: <span class="hljs-string">''</span> })
  <span class="hljs-keyword">const</span> tableData = <span class="hljs-title function_">reactive</span>([])
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSearch</span> = (<span class="hljs-params"/>) =&gt; { ... }
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleReset</span> = (<span class="hljs-params"/>) =&gt; { ... }
  <span class="hljs-comment">// ... å…¶ä»–çŠ¶æ€å’Œæ–¹æ³•</span>

  <span class="hljs-keyword">return</span> {
    searchForm,
    tableData,
    handleSearch,
    handleReset,
    <span class="hljs-comment">// é¡µé¢è¦ç”¨å•¥å°± return å•¥</span>
  }
}
</code></pre>
<p>é¡µé¢é‡Œå°±åªåšä¸€ä»¶äº‹ï¼š<strong>è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼ŒæŠŠ <code>return</code> å‡ºæ¥çš„ä¸œè¥¿æ‹¿æ¥ç”¨</strong>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">&lt;script setup&gt;
<span class="hljs-keyword">import</span> { usePersonnelList } <span class="hljs-keyword">from</span> <span class="hljs-string">'./composables/usePersonnelList'</span>

<span class="hljs-keyword">const</span> {
  searchForm,
  tableData,
  handleSearch,
  handleReset,
} = <span class="hljs-title function_">usePersonnelList</span>()
&lt;/script&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- ç”¨ searchFormã€tableDataï¼Œç»‘å®š handleSearchã€handleReset --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
</code></pre>
<p><strong>è¿™ç§â€œä»¥ <code>use</code> å¼€å¤´ã€å°è£…ä¸€å—æœ‰çŠ¶æ€é€»è¾‘ã€<code>return</code> ç»™ç»„ä»¶ç”¨â€çš„å‡½æ•°ï¼Œå®˜æ–¹åå­—å°±å«ã€Œç»„åˆå¼å‡½æ•°ã€ï¼ˆ<code>Composable</code>ï¼Œè‹±æ–‡æ–‡æ¡£é‡Œä¼šçœ‹åˆ°è¿™ä¸ªè¯ï¼‰ã€‚</strong></p>
<p>å½“å‰çœ‹åˆ°çš„ã€Œç¼–ç æ¨¡å¼ã€æ ¸å¿ƒå°±æ˜¯ï¼š<strong>é¡µé¢åªè´Ÿè´£å¸ƒå±€å’Œè°ƒç”¨ <code>useXxx()</code>ï¼Œå…·ä½“é€»è¾‘éƒ½åœ¨ <code>useXxx</code> é‡Œ</strong>ã€‚</p>
<p>å¯èƒ½æœ‰çš„åŒå­¦çœ‹åˆ° çŠ¶æ€ è¿™ä¸ªè¯çš„æ—¶å€™ä¸èƒ½ç†è§£ï¼Œä¸èƒ½ç†è§£çš„åŒå­¦æˆ‘æƒ³åº”è¯¥åŒæ ·ä¹Ÿæƒ³ä¸æ˜ç™½<code>vuex</code>æˆ–<code>pinia</code>ä¸ºä»€ä¹ˆå«çŠ¶æ€ç®¡ç†è€Œä¸å«å˜é‡ç®¡ç†æˆ–è€…å¸¸é‡ç®¡ç†æˆ–è€…å®¹å™¨ç®¡ç†ã€‚å¯ä»¥ç†è§£çš„åŒå­¦å¯ç›´æ¥çœ‹ä¸‹ä¸€æ­¥ï¼Œæ¥ä¸‹æ¥çš„å°å†…å®¹åˆ™æ˜¯ç»™ä¸èƒ½ç†è§£çš„åŒå­¦è¡¥è¡¥è¯¾ã€‚</p>
<p><strong>è®²è§£</strong>ï¼šé¦–å…ˆçŠ¶æ€å’Œå˜é‡ä¸€æ ·ï¼Œéƒ½æ˜¯å­˜å‚¨æ•°æ®çš„å®¹å™¨ã€‚åŒºåˆ«åœ¨äºçŠ¶æ€å’Œ UI æ˜¯ â€œåŒå‘ç»‘å®šâ€ çš„ï¼Œå˜é‡ä¸ä¸€å®šã€‚æ™®é€š JS å˜é‡ï¼ˆæ¯”å¦‚ <code>let a = 1</code>ï¼‰æ”¹äº†å°±æ˜¯æ”¹äº†ï¼Œé¡µé¢ä¸ä¼šæœ‰ä»»ä½•ååº”ï¼›ä½† Vue çš„çŠ¶æ€ï¼ˆæ¯”å¦‚ <code>const a = ref(1)</code>ï¼‰æ”¹ <code>a.value = 2</code> æ—¶ï¼Œé¡µé¢é‡Œç”¨åˆ° <code>a</code> çš„åœ°æ–¹ä¼šè‡ªåŠ¨æ›´æ–° â€”â€” è¿™æ˜¯ â€œçŠ¶æ€â€ æœ€æ ¸å¿ƒçš„ç‰¹å¾ï¼š<strong>çŠ¶æ€æ˜¯ â€œæ´»çš„â€ï¼Œå’Œ UI è”åŠ¨</strong>ã€‚</p>
<p><strong>ç®€å•ç²—æš´:</strong></p>
<ul>
<li>æ‰€ä»¥ä¸ç†è§£çš„åŒå­¦å¯ä»¥ç®€å•ç²—æš´çš„å°†çŠ¶æ€ç†è§£ä¸ºå¯ä»¥å¼•åŠ¨UIå˜åŒ–çš„å˜é‡å°±æ˜¯çŠ¶æ€ã€‚
æ–°æ‰‹åŒå­¦ç†è§£åˆ°è¿™é‡Œå°±å¯ä»¥äº†ï¼Œè‡³äºçŠ¶æ€æ›´ç²¾å‡†çš„ç†è§£æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è‡ªè¡Œæœç´¢å­¦ä¹ ã€‚</li>
</ul>
<p>ä¸ç”¨è¿‡å¤šçš„çº ç»“ï¼Œå¯ä»¥ç†è§£è¿™ä¸ªç®€å•ç²—æš´çš„å®šä¹‰å°±è¶³å¤Ÿä½ çœ‹æ‡‚åé¢çš„è®²è§£äº†ã€‚</p>
<h2 data-id="heading-3">å››ã€ç”¨ä¸€å¥è¯ä¸²èµ·æ¥</h2>
<ul>
<li><strong>ç»„åˆå¼ API</strong>ï¼šåœ¨ script é‡Œç”¨ <code>ref</code>/<code>reactive</code> + å‡½æ•°ï¼ŒæŒ‰â€œåŠŸèƒ½å—â€å†™é€»è¾‘ã€‚</li>
<li><strong>ç»„åˆå¼å‡½æ•°</strong>ï¼šæŠŠæŸä¸€æ•´å—é€»è¾‘æ¬è¿› <code>useXxx()</code>ï¼Œé¡µé¢é‡Œ <code>const { ... } = useXxx()</code> æ‹¿æ¥ç”¨ã€‚</li>
</ul>
<p>æ‰€ä»¥ï¼š<br/>
<strong>â€œç»„åˆå¼ APIâ€æ˜¯è¯´â€œæ€ä¹ˆå†™é€»è¾‘â€ï¼›â€œç»„åˆå¼å‡½æ•°â€æ˜¯è¯´â€œæŠŠå†™å¥½çš„é€»è¾‘å°è£…æˆ useXxxï¼Œæ–¹ä¾¿å¤ç”¨å’Œç»„ç»‡â€ã€‚</strong><br/>
å½“å‰äººå‘˜æ¨¡å—çš„å†™æ³•ï¼Œå°±æ˜¯ï¼šç”¨ç»„åˆå¼ API åœ¨ <code>usePersonnelList</code> é‡Œå†™é€»è¾‘ï¼Œåœ¨ <code>index.vue</code> é‡Œåªè°ƒç”¨ <code>usePersonnelList()</code>ï¼Œè¿™å°±æ˜¯å®˜æ–¹ä¸»æ¨çš„è¿™ç§æ¨¡å¼ã€‚</p>
<hr/>
<h2 data-id="heading-4">äº”ã€å’Œå½“å‰ç¤ºä¾‹å¯¹ä¸Šå·</h2>
<p>ç°åœ¨çš„ç»“æ„å¯ä»¥è¿™æ ·ç†è§£ï¼š</p>

























<table><thead><tr><th>å½“å‰çœ‹åˆ°çš„</th><th>å«ä¹‰ï¼ˆå°ç™½ç‰ˆï¼‰</th></tr></thead><tbody><tr><td><code>index.vue</code> é‡Œåªæœ‰ template + ä¸€ä¸ª <code>usePersonnelList()</code></td><td>é¡µé¢åªè´Ÿè´£â€œé•¿ä»€ä¹ˆæ ·â€å’Œâ€œç”¨å“ªä¸€å—é€»è¾‘â€</td></tr><tr><td><code>composables/usePersonnelList.ts</code></td><td>äººå‘˜åˆ—è¡¨è¿™ä¸€é¡µçš„â€œæ‰€æœ‰é€»è¾‘â€éƒ½åœ¨è¿™ä¸€ä¸ªå‡½æ•°é‡Œ</td></tr><tr><td><code>components/PersonnelSearchForm.vue</code> ç­‰</td><td>æŠŠè¡¨æ ¼ã€å¼¹çª—æ‹†æˆå°ç»„ä»¶ï¼Œåªè´Ÿè´£å±•ç¤ºå’Œå‘äº‹ä»¶</td></tr><tr><td><code>types.ts</code></td><td>æŠŠå…±ç”¨çš„ç±»å‹ï¼ˆPersonnelã€Roleã€è¡¨å•ç±»å‹ç­‰ï¼‰é›†ä¸­æ”¾ï¼Œæ–¹ä¾¿å¤ç”¨å’Œæ”¹</td></tr></tbody></table>
<p>æ•°æ®æµå¯ä»¥ç®€å•ç†è§£æˆï¼š</p>
<ol>
<li><code>usePersonnelList()</code> æä¾›ï¼š<code>searchForm</code>ã€<code>tableData</code>ã€<code>handleSearch</code>ã€<code>handleEdit</code>â€¦â€¦</li>
<li><code>index.vue</code> æŠŠè¿™äº›ç»‘åˆ°æ¨¡æ¿å’Œå­ç»„ä»¶ä¸Šï¼ˆ<code>:search-form="searchForm"</code>ã€<code>@search="handleSearch"</code>ï¼‰</li>
<li>å­ç»„ä»¶åªé€šè¿‡ <code>props</code> æ‹¿æ•°æ®ã€é€šè¿‡<code>emit</code>è§¦å‘äº‹ä»¶ï¼ŒçœŸæ­£çš„çŠ¶æ€å’Œè¯·æ±‚éƒ½åœ¨ <code>composable</code> é‡Œ</li>
</ol>
<p>è¿™æ ·å°±å®ç°äº†ï¼š<strong>é€»è¾‘åœ¨ <code>useXxx</code>ï¼Œé¡µé¢å’Œç»„ä»¶åªåšâ€œæ¥çº¿â€</strong>ã€‚</p>
<h2 data-id="heading-5">å…­ã€ä»€ä¹ˆæ—¶å€™ç”¨ã€æ€ä¹ˆç”¨ï¼ˆå®ç”¨å£è¯€ï¼‰</h2>
<ul>
<li><strong>ä¸€ä¸ªé¡µé¢é€»è¾‘å¾ˆå¤š</strong> â†’ å…ˆåœ¨åŒä¸€æ–‡ä»¶é‡Œç”¨ç»„åˆå¼ API æŒ‰â€œåŠŸèƒ½å—â€å†™ï¼›è¿˜è§‰å¾—ä¹±ï¼Œå†æŠ½æˆ <code>useXxx</code></li>
<li><strong>å¤šä¸ªé¡µé¢è¦ç”¨åŒä¸€å¥—é€»è¾‘</strong> â†’ ç›´æ¥å†™æˆ <code>useXxx</code>ï¼Œåœ¨ä¸åŒé¡µé¢é‡Œ <code>const { ... } = useXxx()</code> å³å¯</li>
<li><strong>å‘½å</strong>ï¼šè¿™ç±»å‡½æ•°ç»Ÿä¸€ç”¨ <code>use</code> å¼€å¤´ï¼Œå¦‚ <code>usePersonnelList</code>ã€<code>useMouse</code>ã€<code>useFetch</code></li>
<li><strong>æ–‡ä»¶æ”¾å“ª</strong>ï¼šå’Œå½“å‰åŠŸèƒ½å¼ºç›¸å…³çš„å°±æ”¾å½“å‰æ¨¡å—ä¸‹ï¼Œä¾‹å¦‚ <code>personnel/composables/usePersonnelList.ts</code>ï¼›å…¨é¡¹ç›®éƒ½è¦ç”¨çš„å¯ä»¥æ”¾ <code>src/composables/</code> ä¹‹ç±»</li>
</ul>
<hr/>
<h2 data-id="heading-6">ä¸ƒã€å°ç»“ï¼ˆçœŸæ­£ä» 0 åˆ° 1 çš„è·¯çº¿ï¼‰</h2>
<ol>
<li><strong>é—®é¢˜</strong>ï¼šé¡µé¢é€»è¾‘ä¸€å¤šå°±éš¾ç»´æŠ¤ã€éš¾å¤ç”¨ã€‚</li>
<li><strong>ç»„åˆå¼ API</strong>ï¼šç”¨ <code>ref</code>/<code>reactive</code> + <code>å‡½æ•°</code>ï¼Œåœ¨ script é‡ŒæŒ‰â€œåŠŸèƒ½å—â€ç»„ç»‡é€»è¾‘ã€‚</li>
<li><strong>ç»„åˆå¼å‡½æ•°</strong>ï¼šæŠŠä¸€æ•´å—é€»è¾‘æ”¾è¿› <code>useXxx()</code>ï¼Œ<code>return</code> å‡ºçŠ¶æ€å’Œæ–¹æ³•ï¼Œé¡µé¢é‡Œè§£æ„ä½¿ç”¨ã€‚</li>
<li><strong>ç°åœ¨çš„æ¨¡å¼</strong>ï¼š<code>index.vue</code> è–„è–„ä¸€å±‚ + <code>usePersonnelList</code> ä¸€å¨é€»è¾‘ + å‡ ä¸ªå­ç»„ä»¶ + <code>types.ts</code>ï¼Œè¿™å°±æ˜¯ Vue 3 å®˜æ–¹åœ¨ã€Œå¯å¤ç”¨æ€§ â†’ ç»„åˆå¼å‡½æ•°ã€é‡Œä¸»æ¨çš„å†™æ³•ã€‚</li>
</ol>
<h2 data-id="heading-7">å…«ã€ç¤ºä¾‹ä»£ç </h2>
<p>æƒ³çœ‹çœ‹å®é™…è¿è¡Œèµ·æ¥ä»€ä¹ˆæ ·çš„åŒå­¦ä¹Ÿå¯è‡ªè¡Œæ–°å»ºä¸€ä¸ª<code>vue3</code>+<code>ts</code>çš„é¡¹ç›®ï¼Œå¤åˆ¶ç²˜è´´ä»£ç åˆ°ç¼–è¾‘å™¨ä¸­è¿è¡Œèµ·æ¥çœ‹çœ‹ã€‚æˆ‘åœ¨å†™è¿™ä¸ªç¤ºä¾‹ä»£ç æ—¶å€™æ‰€åˆ›å»ºçš„é¡¹ç›®ç¯å¢ƒï¼š</p>
<ul>
<li>nodeç‰ˆæœ¬20.19.0</li>
<li>ä½¿ç”¨åˆ°Element Plusç»„ä»¶åº“</li>
</ul>
<p>æˆ‘åœ¨é…ç½®ä»£ç çš„æ—¶å€™ä¼šä¹ æƒ¯æ€§çš„é…ç½®ç»„ä»¶çš„è‡ªåŠ¨å¼•å…¥ï¼Œæ‰€ä»¥åœ¨ä»£ç ä¸­æ— éœ€å†æ‰‹åŠ¨å¼•å…¥ä½¿ç”¨åˆ°çš„ç»„ä»¶ï¼Œæ²¡æœ‰é…ç½®è¿‡è‡ªåŠ¨å¼•å…¥çš„åŒå­¦ä¸è¦å¿˜è®°è‡ªå·±è¡¥ä¸Šç»„ä»¶çš„å¼•å…¥å“¦ã€‚å¦‚æœåœ¨åˆ›å»ºé¡¹ç›®å¤åˆ¶ç¤ºä¾‹ä»£ç é‡åˆ°ç¯å¢ƒé—®é¢˜çš„æƒ…å†µä¸‹å¯å°è¯•é€šè¿‡å¯¹æ¯”æˆ‘çš„å¼€å‘ç¯å¢ƒè§£å†³é—®é¢˜ï¼Œå¸Œæœ›å¯ä»¥æœ‰æ‰€å¸®åŠ©ã€‚</p>
<ol>
<li><strong>ç»“æ„ç®€è¦è¯´æ˜</strong></li>
</ol>
<pre><code class="hljs language-ts" lang="ts">src/views/personnel/
â”œâ”€â”€ index.<span class="hljs-property">vue</span>                          # é¡µé¢å…¥å£ï¼šæ ‡é¢˜ã€æœç´¢ã€è¡¨æ ¼ã€åˆ†é¡µã€å¼¹çª—æŒ‚è½½
â”œâ”€â”€ types.<span class="hljs-property">ts</span>                           # ç±»å‹å®šä¹‰ï¼ˆå¦‚ <span class="hljs-title class_">PersonnelSearchForm</span>ã€<span class="hljs-title class_">PersonnelEditForm</span>ã€<span class="hljs-title class_">Role</span> ç­‰ï¼‰
â”œâ”€â”€ composables/
â”‚   â””â”€â”€ usePersonnelList.<span class="hljs-property">ts</span>           # åˆ—è¡¨é€»è¾‘ï¼šæœç´¢ã€åˆ†é¡µã€å¢åˆ æ”¹ã€åˆ†é…è§’è‰²ã€æ”¹å¯†ç­‰
â””â”€â”€ components/
    â”œâ”€â”€ <span class="hljs-title class_">PersonnelSearchForm</span>.<span class="hljs-property">vue</span>       # é¡¶éƒ¨æœç´¢æ ï¼ˆç”¨æˆ·åç§° / å¸å· / ç”µè¯ï¼‰
    â”œâ”€â”€ <span class="hljs-title class_">PersonnelEditDialog</span>.<span class="hljs-property">vue</span>       # æ–°å¢/ç¼–è¾‘ç”¨æˆ·å¼¹çª—
    â”œâ”€â”€ <span class="hljs-title class_">PersonnelPasswordDialog</span>.<span class="hljs-property">vue</span>    # ä¿®æ”¹å¯†ç å¼¹çª—
    â””â”€â”€ <span class="hljs-title class_">PersonnelRoleAssignDialog</span>.<span class="hljs-property">vue</span> # åˆ†é…è§’è‰²å¼¹çª—
</code></pre>





































<table><thead><tr><th>æ–‡ä»¶</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><strong>index.vue</strong></td><td>ä¸»é¡µé¢ï¼Œå¼•å…¥æœç´¢è¡¨å•ã€è¡¨æ ¼ã€åˆ†é¡µå’Œä¸‰ä¸ªå¼¹çª—ï¼Œå¹¶æ‰¿æ¥ <code>usePersonnelList</code> çš„çŠ¶æ€ä¸æ–¹æ³•ã€‚</td></tr><tr><td><strong>types.ts</strong></td><td>å®šä¹‰è¯¥æ¨¡å—ç”¨åˆ°çš„ TS ç±»å‹/æ¥å£ã€‚</td></tr><tr><td><strong>usePersonnelList.ts</strong></td><td>ç»„åˆå¼å‡½æ•°ï¼šæœç´¢è¡¨å•ã€è¡¨æ ¼æ•°æ®ã€åˆ†é¡µã€å¼¹çª—æ˜¾éšã€è¯·æ±‚ä¸äº‹ä»¶å¤„ç†ï¼ˆæœç´¢/é‡ç½®/å¢åˆ æ”¹/åˆ†é…è§’è‰²/æ”¹å¯†ç­‰ï¼‰ã€‚</td></tr><tr><td><strong>PersonnelSearchForm.vue</strong></td><td>ä»…è´Ÿè´£æœç´¢è¡¨å• UI ä¸ã€Œæœç´¢ / é‡ç½®ã€äº‹ä»¶ã€‚</td></tr><tr><td><strong>PersonnelEditDialog.vue</strong></td><td>æ–°å¢/ç¼–è¾‘ç”¨æˆ·çš„è¡¨å•å¼¹çª—ã€‚</td></tr><tr><td><strong>PersonnelPasswordDialog.vue</strong></td><td>ä¿®æ”¹å¯†ç çš„å•è¡¨å•é¡¹å¼¹çª—ã€‚</td></tr><tr><td><strong>PersonnelRoleAssignDialog.vue</strong></td><td>è§’è‰²å¤šé€‰è¡¨æ ¼å¼¹çª—ï¼Œç”¨äºåˆ†é…è§’è‰²ã€‚</td></tr></tbody></table>
<p>æ•°æ®ä¸ä¸šåŠ¡é›†ä¸­åœ¨ <code>usePersonnelList.ts</code>ï¼Œé¡µé¢ä¸ç»„ä»¶ä¸»è¦è´Ÿè´£å¸ƒå±€å’Œè°ƒç”¨è¯¥ composableã€‚</p>
<ol start="2">
<li><strong>è¿è¡Œåçš„é¡¹ç›®å±•ç¤º</strong></li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52d1f167426c437d8f2b38cc0b9b819e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU3VwZXJFdWdlbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771317741&amp;x-signature=nQn4KT%2BZc78JZARXfF4DJ8qZt%2B4%3D" alt="Snipaste_2026-02-10_14-10-38.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16e246d41a934620b2f31c36bb2fad83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU3VwZXJFdWdlbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771317741&amp;x-signature=KNTA8W7i7pbMFHMbuB9wYCH6Cpo%3D" alt="Snipaste_2026-02-10_14-11-29.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a8384f021f564f3e8f8ee3b11b0f1b5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU3VwZXJFdWdlbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771317741&amp;x-signature=fclBrM0dHmGPJJvTmiwEJI2c8Zo%3D" alt="Snipaste_2026-02-10_14-11-41.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ec096e9f85f4a3799f869a614419892~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU3VwZXJFdWdlbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771317741&amp;x-signature=nw78eqg5NLNipdZKTK2%2Bd51pVyE%3D" alt="Snipaste_2026-02-10_14-11-53.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59a1b8b497c54a2493cde34ca1c5435b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU3VwZXJFdWdlbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771317741&amp;x-signature=5fq85XEaJGU1mxxwtxZ7tBZhnIg%3D" alt="Snipaste_2026-02-10_14-12-07.png" loading="lazy"/></p>
<ol start="3">
<li><strong>å¯å¤åˆ¶è¿è¡Œçš„ä»£ç </strong></li>
</ol>
<p>ä¸‹é¢ä»£ç ä¸å‰é¢ç« èŠ‚ä¸€ä¸€å¯¹åº”ï¼š<strong>ç¬¬äºŒèŠ‚</strong>çš„ã€ŒæŒ‰åŠŸèƒ½å—å†™ã€ä½“ç°åœ¨ <code>usePersonnelList.ts</code> é‡Œæœç´¢ã€åˆ†é¡µã€å¼¹çª—ç­‰é€»è¾‘å—ï¼›<strong>ç¬¬ä¸‰èŠ‚</strong>çš„ã€Œæ¬è¿› <code>useXxx</code>ã€<code>return </code>ç»™é¡µé¢ç”¨ã€å°±æ˜¯ <code>usePersonnelList()</code> å’Œå…¶ <code>return</code>ï¼›<strong>ç¬¬å››èŠ‚</strong>çš„æ•°æ®æµå¯¹åº” <code>index.vue</code> é‡Œè§£æ„ <code>usePersonnelList()</code> å¹¶ç»‘åˆ°æ¨¡æ¿å’Œå­ç»„ä»¶ã€‚é˜…è¯»æ—¶å¯æŒ‰ã€Œæ¦‚å¿µ â†’ å¯¹åº”æ–‡ä»¶ã€å¯¹ç…§çœ‹ã€‚</p>
<p><strong>index.vue</strong></p>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"personnel-management"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- é¡µé¢æ ‡é¢˜ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page-header"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page-header-inner"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page-title-accent"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page-title"</span>&gt;</span>äººå‘˜ç®¡ç†<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page-desc"</span>&gt;</span>ç®¡ç†ç³»ç»Ÿç”¨æˆ·ä¸æƒé™ï¼Œä¸€ç›®äº†ç„¶<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- æœç´¢è¡¨å• --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">PersonnelSearchForm</span>
      <span class="hljs-attr">:search-form</span>=<span class="hljs-string">"searchForm"</span>
      @<span class="hljs-attr">search</span>=<span class="hljs-string">"handleSearch"</span>
      @<span class="hljs-attr">reset</span>=<span class="hljs-string">"handleReset"</span>
    /&gt;</span>

    <span class="hljs-comment">&lt;!-- æ•°æ®è¡¨æ ¼ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"table-section"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"table-toolbar"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn-add"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleAdd"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn-add-icon"</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          æ–°å¢äººå‘˜
        <span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-table</span>
        <span class="hljs-attr">:data</span>=<span class="hljs-string">"tableData"</span>
        <span class="hljs-attr">class</span>=<span class="hljs-string">"personnel-table"</span>
        <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100%"</span>
        <span class="hljs-attr">:row-key</span>=<span class="hljs-string">"(row) =&gt; row.id"</span>
        <span class="hljs-attr">:header-cell-style</span>=<span class="hljs-string">"headerCellStyle"</span>
        <span class="hljs-attr">:row-class-name</span>=<span class="hljs-string">"tableRowClassName"</span>
      &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"å¤´åƒ"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"96"</span> <span class="hljs-attr">align</span>=<span class="hljs-string">"center"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">default</span>=<span class="hljs-string">"{ row }"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"avatar-wrap"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">el-avatar</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">"row.avatar"</span> <span class="hljs-attr">:size</span>=<span class="hljs-string">"44"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"user-avatar"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"userName"</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"ç”¨æˆ·åç§°"</span> <span class="hljs-attr">align</span>=<span class="hljs-string">"center"</span> <span class="hljs-attr">min-width</span>=<span class="hljs-string">"100"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"position"</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"èŒä½"</span> <span class="hljs-attr">align</span>=<span class="hljs-string">"center"</span> <span class="hljs-attr">min-width</span>=<span class="hljs-string">"100"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"userAccount"</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"ç”¨æˆ·è´¦å·"</span> <span class="hljs-attr">align</span>=<span class="hljs-string">"center"</span> <span class="hljs-attr">min-width</span>=<span class="hljs-string">"120"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"userPhone"</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"ç”¨æˆ·ç”µè¯"</span> <span class="hljs-attr">align</span>=<span class="hljs-string">"center"</span> <span class="hljs-attr">min-width</span>=<span class="hljs-string">"120"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"userEmail"</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"ç”¨æˆ·é‚®ç®±"</span> <span class="hljs-attr">align</span>=<span class="hljs-string">"center"</span> <span class="hljs-attr">min-width</span>=<span class="hljs-string">"160"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"æ“ä½œ"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"340"</span> <span class="hljs-attr">fixed</span>=<span class="hljs-string">"right"</span> <span class="hljs-attr">align</span>=<span class="hljs-string">"center"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">default</span>=<span class="hljs-string">"{ row }"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"table-actions"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"action-btn action-btn--primary"</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleEdit(row)"</span>&gt;</span>
                ç¼–è¾‘
              <span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"action-btn action-btn--primary"</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleAssignRole(row)"</span>&gt;</span>
                åˆ†é…è§’è‰²
              <span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"action-btn"</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleChangePassword(row)"</span>&gt;</span>
                æ”¹å¯†
              <span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"action-btn action-btn--danger"</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleDelete(row)"</span>&gt;</span>
                åˆ é™¤
              <span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-table</span>&gt;</span>

      <span class="hljs-comment">&lt;!-- åˆ†é¡µ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"pagination-wrap"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-pagination</span>
          <span class="hljs-attr">:current-page</span>=<span class="hljs-string">"pagination.currentPage"</span>
          <span class="hljs-attr">:page-sizes</span>=<span class="hljs-string">"[10, 20, 50, 100]"</span>
          <span class="hljs-attr">:page-size</span>=<span class="hljs-string">"pagination.pageSize"</span>
          <span class="hljs-attr">:total</span>=<span class="hljs-string">"pagination.total"</span>
          <span class="hljs-attr">layout</span>=<span class="hljs-string">"total, sizes, prev, pager, next, jumper"</span>
          @<span class="hljs-attr">size-change</span>=<span class="hljs-string">"handleSizeChange"</span>
          @<span class="hljs-attr">current-change</span>=<span class="hljs-string">"handleCurrentChange"</span>
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- ç¼–è¾‘å¯¹è¯æ¡† --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">PersonnelEditDialog</span>
      <span class="hljs-attr">v-model:visible</span>=<span class="hljs-string">"editDialogVisible"</span>
      <span class="hljs-attr">:form</span>=<span class="hljs-string">"editForm"</span>
      @<span class="hljs-attr">confirm</span>=<span class="hljs-string">"confirmEdit"</span>
    /&gt;</span>

    <span class="hljs-comment">&lt;!-- ä¿®æ”¹å¯†ç å¯¹è¯æ¡† --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">PersonnelPasswordDialog</span>
      <span class="hljs-attr">v-model:visible</span>=<span class="hljs-string">"passwordDialogVisible"</span>
      @<span class="hljs-attr">confirm</span>=<span class="hljs-string">"confirmPasswordChange"</span>
      @<span class="hljs-attr">close</span>=<span class="hljs-string">"closePasswordDialog"</span>
    /&gt;</span>

    <span class="hljs-comment">&lt;!-- åˆ†é…è§’è‰²å¯¹è¯æ¡† --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">PersonnelRoleAssignDialog</span>
      <span class="hljs-attr">:visible</span>=<span class="hljs-string">"roleDialogVisible"</span>
      <span class="hljs-attr">:roles</span>=<span class="hljs-string">"roles"</span>
      <span class="hljs-attr">:initial-selected-ids</span>=<span class="hljs-string">"
        currentRoleAssignUserId ? getInitialRoleIds(currentRoleAssignUserId) : []
      "</span>
      @<span class="hljs-attr">update:visible</span>=<span class="hljs-string">"setRoleDialogVisible"</span>
      @<span class="hljs-attr">confirm</span>=<span class="hljs-string">"confirmAssignRole"</span>
      @<span class="hljs-attr">close</span>=<span class="hljs-string">"() =&gt; setRoleDialogVisible(false)"</span>
    /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { usePersonnelList } <span class="hljs-keyword">from</span> <span class="hljs-string">'./composables/usePersonnelList'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">PersonnelSearchForm</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/PersonnelSearchForm.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">PersonnelEditDialog</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/PersonnelEditDialog.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">PersonnelPasswordDialog</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/PersonnelPasswordDialog.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">PersonnelRoleAssignDialog</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/PersonnelRoleAssignDialog.vue'</span>

<span class="hljs-title function_">defineOptions</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'PersonnelIndex'</span>,
})

<span class="hljs-keyword">const</span> {
  searchForm,
  tableData,
  pagination,
  roles,
  editForm,
  editDialogVisible,
  passwordDialogVisible,
  roleDialogVisible,
  currentRoleAssignUserId,
  getInitialRoleIds,
  handleSearch,
  handleReset,
  handleSizeChange,
  handleCurrentChange,
  handleAdd,
  handleEdit,
  confirmEdit,
  handleChangePassword,
  confirmPasswordChange,
  handleDelete,
  handleAssignRole,
  confirmAssignRole,
  setRoleDialogVisible,
  closePasswordDialog,
} = <span class="hljs-title function_">usePersonnelList</span>()

<span class="hljs-keyword">const</span> headerCellStyle = {
  <span class="hljs-attr">background</span>: <span class="hljs-string">'transparent'</span>,
  <span class="hljs-attr">color</span>: <span class="hljs-string">'#5a6576'</span>,
  <span class="hljs-attr">fontWeight</span>: <span class="hljs-number">600</span>,
  <span class="hljs-attr">fontSize</span>: <span class="hljs-string">'12px'</span>,
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">tableRowClassName</span> = (<span class="hljs-params">{ rowIndex }: { rowIndex: number }</span>) =&gt;
  rowIndex % <span class="hljs-number">2</span> === <span class="hljs-number">1</span> ? <span class="hljs-string">'row-stripe'</span> : <span class="hljs-string">''</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span>&gt;</span>
$primary: #5b8dee;
$primary-hover: #6c9eff;
$primary-soft: rgba(91, 141, 238, 0.12);
$text: #2d3748;
$text-light: #718096;
$border: rgba(91, 141, 238, 0.15);
$danger: #e85d6a;
$danger-soft: rgba(232, 93, 106, 0.12);

.personnel-management {
  padding: 40px 48px 56px;
  min-height: 100%;
  background: linear-gradient(160deg, #fafbff 0%, #f4f6fc 50%, #eef2fa 100%);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
}

.page-header {
  margin-bottom: 32px;
  .page-header-inner {
    display: flex;
    align-items: flex-start;
    gap: 16px;
  }
  .page-title-accent {
    width: 4px;
    height: 32px;
    border-radius: 4px;
    background: linear-gradient(180deg, $primary 0%, #7ba3f5 100%);
    flex-shrink: 0;
  }
  .page-title {
    margin: 0;
    font-size: 26px;
    font-weight: 600;
    color: $text;
    letter-spacing: -0.02em;
    line-height: 1.3;
  }
  .page-desc {
    margin: 6px 0 0;
    font-size: 14px;
    color: $text-light;
    font-weight: 400;
  }
}

.table-section {
  background: #fff;
  border-radius: 16px;
  overflow: hidden;
  padding: 28px 36px 36px;
  box-shadow: 0 4px 24px rgba(91, 141, 238, 0.06), 0 1px 0 rgba(255, 255, 255, 0.8) inset;
  border: 1px solid $border;
  transition: box-shadow 0.25s ease;
  &amp;:hover {
    box-shadow: 0 8px 32px rgba(91, 141, 238, 0.08), 0 1px 0 rgba(255, 255, 255, 0.8) inset;
  }
}

.table-toolbar {
  margin-bottom: 24px;
  .btn-add {
    font-weight: 500;
    font-size: 14px;
    border-radius: 10px;
    padding: 10px 20px;
    background: linear-gradient(135deg, $primary 0%, #6c9eff 100%);
    border: none;
    color: #fff;
    box-shadow: 0 2px 12px rgba(91, 141, 238, 0.35);
    transition: all 0.25s ease;
    &amp;:hover {
      background: linear-gradient(135deg, $primary-hover 0%, #7ba8ff 100%);
      box-shadow: 0 4px 16px rgba(91, 141, 238, 0.4);
      transform: translateY(-1px);
    }
  }
  .btn-add-icon {
    margin-right: 6px;
    font-size: 16px;
    font-weight: 300;
    opacity: 0.95;
  }
}

.personnel-table {
  --el-table-border-color: #e8ecf4;
  --el-table-header-bg-color: transparent;
  font-size: 14px;

  :deep(.el-table__header th) {
    background: linear-gradient(180deg, #fafbff 0%, #f5f7fc 100%) !important;
    color: $text-light;
    font-weight: 600;
    font-size: 12px;
    letter-spacing: 0.03em;
    padding: 14px 0;
  }
  :deep(.el-table__body td) {
    color: $text;
    font-size: 14px;
    padding: 14px 0;
    transition: background 0.2s ease;
  }
  :deep(.el-table__row:hover td) {
    background: #f8faff !important;
  }
  :deep(.row-stripe td) {
    background: #fafbff !important;
  }
  :deep(.el-table__row.row-stripe:hover td) {
    background: #f8faff !important;
  }
  .avatar-wrap {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 52px;
    height: 52px;
    border-radius: 12px;
    background: linear-gradient(135deg, $primary-soft 0%, rgba(124, 163, 245, 0.08) 100%);
  }
  .user-avatar {
    border: none;
    background: #e8ecf4;
  }
}

.table-actions {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-wrap: wrap;
  gap: 6px 12px;
  .action-btn {
    padding: 6px 12px;
    font-size: 13px;
    border-radius: 8px;
    font-weight: 500;
    border: none;
    transition: all 0.2s ease;
    &amp;--primary {
      color: $primary;
      background: $primary-soft;
      &amp;:hover {
        background: rgba(91, 141, 238, 0.2);
        color: $primary-hover;
      }
    }
    &amp;--danger {
      color: $danger;
      background: $danger-soft;
      &amp;:hover {
        background: rgba(232, 93, 106, 0.2);
        color: darken($danger, 4%);
      }
    }
    &amp;:not(.action-btn--primary):not(.action-btn--danger) {
      color: $text-light;
      background: rgba(113, 128, 150, 0.08);
      &amp;:hover {
        background: rgba(113, 128, 150, 0.15);
        color: $text;
      }
    }
  }
}

.pagination-wrap {
  margin-top: 24px;
  display: flex;
  justify-content: flex-end;
  :deep(.el-pagination) {
    font-size: 14px;
    font-weight: 400;
    color: $text;
    .el-pager li {
      border-radius: 8px;
      min-width: 32px;
      height: 32px;
      line-height: 32px;
      background: #f5f7fc;
      color: $text;
      transition: all 0.2s ease;
      &amp;:hover {
        background: $primary-soft;
        color: $primary;
      }
      &amp;.is-active {
        background: linear-gradient(135deg, $primary 0%, $primary-hover 100%);
        color: #fff;
      }
    }
    .btn-prev, .btn-next {
      border-radius: 8px;
      background: #f5f7fc;
      color: $text;
      min-width: 32px;
      height: 32px;
      &amp;:hover:not(:disabled) {
        background: $primary-soft;
        color: $primary;
      }
    }
  }
}
<span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>

</code></pre>
<p><strong>types.ts</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">/** äººå‘˜ä¿¡æ¯ */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Personnel</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>
  <span class="hljs-attr">avatar</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">userName</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">position</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">userAccount</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">userPhone</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">userEmail</span>: <span class="hljs-built_in">string</span>
}

<span class="hljs-comment">/** è§’è‰²ä¿¡æ¯ */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Role</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>
}

<span class="hljs-comment">/** æœç´¢è¡¨å• */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">PersonnelSearchForm</span> {
  <span class="hljs-attr">userName</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">userAccount</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">userPhone</span>: <span class="hljs-built_in">string</span>
}

<span class="hljs-comment">/** ç¼–è¾‘è¡¨å• */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">PersonnelEditForm</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span> | <span class="hljs-literal">null</span>
  <span class="hljs-attr">userName</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">position</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">userPhone</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">userEmail</span>: <span class="hljs-built_in">string</span>
}

<span class="hljs-comment">/** åˆ†é¡µå‚æ•° */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">PaginationState</span> {
  <span class="hljs-attr">currentPage</span>: <span class="hljs-built_in">number</span>
  <span class="hljs-attr">pageSize</span>: <span class="hljs-built_in">number</span>
  <span class="hljs-attr">total</span>: <span class="hljs-built_in">number</span>
}

</code></pre>
<p><strong>usePersonnelList.ts</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { reactive, ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElMessage</span>, <span class="hljs-title class_">ElMessageBox</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> {
  <span class="hljs-title class_">Personnel</span>,
  <span class="hljs-title class_">Role</span>,
  <span class="hljs-title class_">PersonnelSearchForm</span>,
  <span class="hljs-title class_">PersonnelEditForm</span>,
  <span class="hljs-title class_">PaginationState</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'../types'</span>

<span class="hljs-comment">/** æ¨¡æ‹Ÿæ•°æ® - åç»­æ¥å…¥ API æ—¶æ›¿æ¢ */</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">MOCK_PERSONNEL</span>: <span class="hljs-title class_">Personnel</span>[] = [
  {
    <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">avatar</span>:
      <span class="hljs-string">'https://cube.elemecdn.com/3/7c/3ea6beec6434a5aaaca3b9b973136830a4afe1266d2b9a3af511687b91.png'</span>,
    <span class="hljs-attr">userName</span>: <span class="hljs-string">'å¼ ä¸‰'</span>,
    <span class="hljs-attr">position</span>: <span class="hljs-string">'é”€å”®ç»ç†'</span>,
    <span class="hljs-attr">userAccount</span>: <span class="hljs-string">'zhangsan'</span>,
    <span class="hljs-attr">userPhone</span>: <span class="hljs-string">'13800138000'</span>,
    <span class="hljs-attr">userEmail</span>: <span class="hljs-string">'zhangsan@example.com'</span>,
  },
  {
    <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">avatar</span>:
      <span class="hljs-string">'https://cube.elemecdn.com/3/7c/3ea6beec6434a5aaaca3b9b973136830a4afe1266d2b9a3af511687b91.png'</span>,
    <span class="hljs-attr">userName</span>: <span class="hljs-string">'æå››'</span>,
    <span class="hljs-attr">position</span>: <span class="hljs-string">'é”€å”®ä»£è¡¨'</span>,
    <span class="hljs-attr">userAccount</span>: <span class="hljs-string">'lisi'</span>,
    <span class="hljs-attr">userPhone</span>: <span class="hljs-string">'13900139000'</span>,
    <span class="hljs-attr">userEmail</span>: <span class="hljs-string">'lisi@example.com'</span>,
  },
]

<span class="hljs-keyword">const</span> <span class="hljs-attr">MOCK_ROLES</span>: <span class="hljs-title class_">Role</span>[] = [
  { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'ç®¡ç†å‘˜'</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'æ™®é€šåˆ†é”€å‘˜'</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'é«˜çº§åˆ†é”€å‘˜'</span> },
]

<span class="hljs-comment">/** æ¨¡æ‹Ÿç”¨æˆ·å·²æœ‰è§’è‰²æ˜ å°„ */</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">MOCK_USER_ROLES</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>[]&gt; = {
  <span class="hljs-number">1</span>: [<span class="hljs-number">1</span>],
  <span class="hljs-number">2</span>: [<span class="hljs-number">2</span>],
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">usePersonnelList</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> searchForm = reactive&lt;<span class="hljs-title class_">PersonnelSearchForm</span>&gt;({
    <span class="hljs-attr">userName</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">userAccount</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">userPhone</span>: <span class="hljs-string">''</span>,
  })

  <span class="hljs-keyword">const</span> tableData = reactive&lt;<span class="hljs-title class_">Personnel</span>[]&gt;([...<span class="hljs-variable constant_">MOCK_PERSONNEL</span>])

  <span class="hljs-keyword">const</span> pagination = reactive&lt;<span class="hljs-title class_">PaginationState</span>&gt;({
    <span class="hljs-attr">currentPage</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">pageSize</span>: <span class="hljs-number">10</span>,
    <span class="hljs-attr">total</span>: <span class="hljs-number">20</span>,
  })

  <span class="hljs-keyword">const</span> roles = reactive&lt;<span class="hljs-title class_">Role</span>[]&gt;([...<span class="hljs-variable constant_">MOCK_ROLES</span>])

  <span class="hljs-keyword">const</span> editDialogVisible = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
  <span class="hljs-keyword">const</span> passwordDialogVisible = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
  <span class="hljs-keyword">const</span> roleDialogVisible = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)

  <span class="hljs-keyword">const</span> editForm = reactive&lt;<span class="hljs-title class_">PersonnelEditForm</span>&gt;({
    <span class="hljs-attr">id</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">userName</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">position</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">userPhone</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">userEmail</span>: <span class="hljs-string">''</span>,
  })

  <span class="hljs-keyword">const</span> currentPasswordUserId = ref&lt;<span class="hljs-built_in">number</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>)
  <span class="hljs-keyword">const</span> currentRoleAssignUserId = ref&lt;<span class="hljs-built_in">number</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>)

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSearch</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">'æœç´¢åŠŸèƒ½æ‰§è¡Œ'</span>)
    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> æ¥å…¥ API åè°ƒç”¨æ¥å£</span>
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleReset</span> = (<span class="hljs-params"/>) =&gt; {
    searchForm.<span class="hljs-property">userName</span> = <span class="hljs-string">''</span>
    searchForm.<span class="hljs-property">userAccount</span> = <span class="hljs-string">''</span>
    searchForm.<span class="hljs-property">userPhone</span> = <span class="hljs-string">''</span>
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSizeChange</span> = (<span class="hljs-params">val: <span class="hljs-built_in">number</span></span>) =&gt; {
    pagination.<span class="hljs-property">pageSize</span> = val
    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> æ¥å…¥ API åè°ƒç”¨æ¥å£</span>
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleCurrentChange</span> = (<span class="hljs-params">val: <span class="hljs-built_in">number</span></span>) =&gt; {
    pagination.<span class="hljs-property">currentPage</span> = val
    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> æ¥å…¥ API åè°ƒç”¨æ¥å£</span>
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleAdd</span> = (<span class="hljs-params"/>) =&gt; {
    editForm.<span class="hljs-property">id</span> = <span class="hljs-literal">null</span>
    editForm.<span class="hljs-property">userName</span> = <span class="hljs-string">''</span>
    editForm.<span class="hljs-property">position</span> = <span class="hljs-string">''</span>
    editForm.<span class="hljs-property">userPhone</span> = <span class="hljs-string">''</span>
    editForm.<span class="hljs-property">userEmail</span> = <span class="hljs-string">''</span>
    editDialogVisible.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleEdit</span> = (<span class="hljs-params">row: Personnel</span>) =&gt; {
    editForm.<span class="hljs-property">id</span> = row.<span class="hljs-property">id</span>
    editForm.<span class="hljs-property">userName</span> = row.<span class="hljs-property">userName</span>
    editForm.<span class="hljs-property">position</span> = row.<span class="hljs-property">position</span>
    editForm.<span class="hljs-property">userPhone</span> = row.<span class="hljs-property">userPhone</span>
    editForm.<span class="hljs-property">userEmail</span> = row.<span class="hljs-property">userEmail</span>
    editDialogVisible.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">confirmEdit</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> isEdit = editForm.<span class="hljs-property">id</span> !== <span class="hljs-literal">null</span>
    <span class="hljs-keyword">if</span> (isEdit) {
      <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">'ç¼–è¾‘æˆåŠŸ'</span>)
      <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> æ¥å…¥ API åè°ƒç”¨ç¼–è¾‘æ¥å£å¹¶åˆ·æ–°åˆ—è¡¨</span>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">'æ–°å¢æˆåŠŸ'</span>)
      <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> æ¥å…¥ API åè°ƒç”¨æ–°å¢æ¥å£å¹¶åˆ·æ–°åˆ—è¡¨</span>
    }
    editDialogVisible.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleChangePassword</span> = (<span class="hljs-params">row: Personnel</span>) =&gt; {
    currentPasswordUserId.<span class="hljs-property">value</span> = row.<span class="hljs-property">id</span>
    passwordDialogVisible.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">confirmPasswordChange</span> = (<span class="hljs-params">newPassword: <span class="hljs-built_in">string</span></span>) =&gt; {
    <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">'å¯†ç ä¿®æ”¹æˆåŠŸ'</span>)
    passwordDialogVisible.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
    currentPasswordUserId.<span class="hljs-property">value</span> = <span class="hljs-literal">null</span>
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleDelete</span> = (<span class="hljs-params">row: Personnel</span>) =&gt; {
    <span class="hljs-title class_">ElMessageBox</span>.<span class="hljs-title function_">confirm</span>(<span class="hljs-string">'ç¡®å®šè¦åˆ é™¤è¯¥ç”¨æˆ·å—ï¼Ÿ'</span>, <span class="hljs-string">'åˆ é™¤ç¡®è®¤'</span>, {
      <span class="hljs-attr">confirmButtonText</span>: <span class="hljs-string">'ç¡®å®š'</span>,
      <span class="hljs-attr">cancelButtonText</span>: <span class="hljs-string">'å–æ¶ˆ'</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">'warning'</span>,
    })
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">'åˆ é™¤æˆåŠŸ'</span>)
        <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> æ¥å…¥ API åè°ƒç”¨æ¥å£å¹¶åˆ·æ–°åˆ—è¡¨</span>
      })
      .<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'å·²å–æ¶ˆåˆ é™¤'</span>)
      })
  }

  <span class="hljs-keyword">const</span> getInitialRoleIds = (<span class="hljs-attr">userId</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span>[] =&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-variable constant_">MOCK_USER_ROLES</span>[userId] ?? []
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleAssignRole</span> = (<span class="hljs-params">row: Personnel</span>) =&gt; {
    currentRoleAssignUserId.<span class="hljs-property">value</span> = row.<span class="hljs-property">id</span>
    roleDialogVisible.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">confirmAssignRole</span> = (<span class="hljs-params">selectedIds: <span class="hljs-built_in">number</span>[]</span>) =&gt; {
    <span class="hljs-keyword">if</span> (selectedIds.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªè§’è‰²'</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
    <span class="hljs-keyword">const</span> roleNames = selectedIds
      .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">id</span>) =&gt;</span> roles.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">r</span>) =&gt;</span> r.<span class="hljs-property">id</span> === id)?.<span class="hljs-property">name</span>)
      .<span class="hljs-title function_">filter</span>(<span class="hljs-title class_">Boolean</span>)
      .<span class="hljs-title function_">join</span>(<span class="hljs-string">', '</span>)
    <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">`å·²ä¸ºç”¨æˆ·åˆ†é…è§’è‰²: <span class="hljs-subst">${roleNames}</span>`</span>)
    roleDialogVisible.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
    currentRoleAssignUserId.<span class="hljs-property">value</span> = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">setRoleDialogVisible</span> = (<span class="hljs-params">visible: <span class="hljs-built_in">boolean</span></span>) =&gt; {
    roleDialogVisible.<span class="hljs-property">value</span> = visible
    <span class="hljs-keyword">if</span> (!visible) currentRoleAssignUserId.<span class="hljs-property">value</span> = <span class="hljs-literal">null</span>
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">setPasswordDialogVisible</span> = (<span class="hljs-params">visible: <span class="hljs-built_in">boolean</span></span>) =&gt; {
    passwordDialogVisible.<span class="hljs-property">value</span> = visible
    <span class="hljs-keyword">if</span> (!visible) currentPasswordUserId.<span class="hljs-property">value</span> = <span class="hljs-literal">null</span>
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">closePasswordDialog</span> = (<span class="hljs-params"/>) =&gt; {
    passwordDialogVisible.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
    currentPasswordUserId.<span class="hljs-property">value</span> = <span class="hljs-literal">null</span>
  }

  <span class="hljs-keyword">return</span> {
    searchForm,
    tableData,
    pagination,
    roles,
    editForm,
    editDialogVisible,
    passwordDialogVisible,
    roleDialogVisible,
    currentPasswordUserId,
    currentRoleAssignUserId,
    getInitialRoleIds,
    handleSearch,
    handleReset,
    handleSizeChange,
    handleCurrentChange,
    handleAdd,
    handleEdit,
    confirmEdit,
    handleChangePassword,
    confirmPasswordChange,
    handleDelete,
    handleAssignRole,
    confirmAssignRole,
    setRoleDialogVisible,
    setPasswordDialogVisible,
    closePasswordDialog,
  }
}

</code></pre>
<p><strong>PersonnelSearchForm.vue</strong></p>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"search-card"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-form</span> <span class="hljs-attr">:inline</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">:model</span>=<span class="hljs-string">"searchForm"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"search-form"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"ç”¨æˆ·åç§°"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"userName"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span>
          <span class="hljs-attr">v-model</span>=<span class="hljs-string">"searchForm.userName"</span>
          <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥"</span>
          <span class="hljs-attr">clearable</span>
          <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span>
          <span class="hljs-attr">class</span>=<span class="hljs-string">"search-input"</span>
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"ç”¨æˆ·å¸å·"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"userAccount"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span>
          <span class="hljs-attr">v-model</span>=<span class="hljs-string">"searchForm.userAccount"</span>
          <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥"</span>
          <span class="hljs-attr">clearable</span>
          <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span>
          <span class="hljs-attr">class</span>=<span class="hljs-string">"search-input"</span>
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"ç”¨æˆ·ç”µè¯"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"userPhone"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span>
          <span class="hljs-attr">v-model</span>=<span class="hljs-string">"searchForm.userPhone"</span>
          <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥"</span>
          <span class="hljs-attr">clearable</span>
          <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span>
          <span class="hljs-attr">class</span>=<span class="hljs-string">"search-input"</span>
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-actions"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"emit('search')"</span>&gt;</span>æœç´¢<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"emit('reset')"</span>&gt;</span>é‡ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-form</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">PersonnelSearchForm</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../types'</span>

<span class="hljs-title function_">defineOptions</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'PersonnelSearchForm'</span>,
})

defineProps&lt;{
  <span class="hljs-attr">searchForm</span>: <span class="hljs-title class_">PersonnelSearchForm</span>
}&gt;()

<span class="hljs-keyword">const</span> emit = defineEmits&lt;{
  <span class="hljs-attr">search</span>: []
  <span class="hljs-attr">reset</span>: []
}&gt;()
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span>&gt;</span>
$primary: #5b8dee;
$primary-hover: #6c9eff;
$text: #2d3748;
$text-light: #718096;
$border: rgba(91, 141, 238, 0.2);

.search-card {
  background: #fff;
  border-radius: 16px;
  padding: 16px 28px;
  margin-bottom: 24px;
  box-shadow: 0 4px 20px rgba(91, 141, 238, 0.06), 0 1px 0 rgba(255, 255, 255, 0.8) inset;
  border: 1px solid rgba(91, 141, 238, 0.12);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', sans-serif;
  transition: box-shadow 0.25s ease;
  &amp;:hover {
    box-shadow: 0 6px 28px rgba(91, 141, 238, 0.08), 0 1px 0 rgba(255, 255, 255, 0.8) inset;
  }
}

.search-form {
  margin: 0;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0 20px;
  :deep(.el-form-item) {
    margin-bottom: 0;
    margin-right: 0;
    display: inline-flex;
    align-items: center;
  }
  :deep(.el-form-item__label) {
    color: $text;
    font-weight: 500;
    font-size: 13px;
    line-height: 32px;
    height: auto;
    padding-right: 10px;
    display: inline-flex;
    align-items: center;
  }
  :deep(.el-form-item__content) {
    display: inline-flex;
    align-items: center;
    line-height: 32px;
  }
  :deep(.el-input__wrapper) {
    border-radius: 8px;
    border: 1px solid #e2e8f0;
    box-shadow: none;
    font-size: 13px;
    padding: 0 10px;
    min-height: 32px;
    transition: all 0.2s ease;
    &amp;:hover {
      border-color: #c5d0e0;
    }
    &amp;.is-focus {
      border-color: $primary;
      box-shadow: 0 0 0 2px rgba(91, 141, 238, 0.18);
    }
  }
  :deep(.el-input__inner) {
    height: 30px;
    line-height: 30px;
  }
  .search-input {
    width: 140px;
  }
  .form-actions {
    margin-right: 0;
    :deep(.el-button) {
      height: 32px;
      padding: 0 14px;
      font-size: 13px;
      border-radius: 8px;
    }
    :deep(.el-button--primary) {
      background: linear-gradient(135deg, $primary 0%, $primary-hover 100%);
      border: none;
      font-weight: 500;
      box-shadow: 0 2px 8px rgba(91, 141, 238, 0.3);
      transition: all 0.25s ease;
      &amp;:hover {
        box-shadow: 0 4px 12px rgba(91, 141, 238, 0.4);
        transform: translateY(-1px);
      }
    }
    :deep(.el-button:not(.el-button--primary)) {
      color: $text;
      border: 1px solid #e2e8f0;
      background: #fff;
      transition: all 0.2s ease;
      &amp;:hover {
        border-color: $primary;
        color: $primary;
        background: rgba(91, 141, 238, 0.06);
      }
    }
  }
}
<span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>

</code></pre>
<p><strong>PersonnelEditDialog.vue</strong></p>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">el-dialog</span>
    <span class="hljs-attr">v-model</span>=<span class="hljs-string">"visible"</span>
    <span class="hljs-attr">:title</span>=<span class="hljs-string">"isEdit ? 'ç¼–è¾‘ç”¨æˆ·' : 'æ–°å¢ç”¨æˆ·'"</span>
    <span class="hljs-attr">width</span>=<span class="hljs-string">"480px"</span>
    <span class="hljs-attr">class</span>=<span class="hljs-string">"personnel-dialog"</span>
    <span class="hljs-attr">destroy-on-close</span>
    @<span class="hljs-attr">close</span>=<span class="hljs-string">"emit('update:visible', false)"</span>
  &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-form</span> <span class="hljs-attr">:model</span>=<span class="hljs-string">"form"</span> <span class="hljs-attr">label-width</span>=<span class="hljs-string">"90px"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dialog-form"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"ç”¨æˆ·åç§°"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"form.userName"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"èŒä½"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"form.position"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"ç”¨æˆ·ç”µè¯"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"form.userPhone"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"ç”¨æˆ·é‚®ç®±"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"form.userEmail"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-form</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">footer</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dialog-footer"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"emit('update:visible', false)"</span>&gt;</span>å–æ¶ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"emit('confirm')"</span>&gt;</span>ç¡®å®š<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">el-dialog</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">PersonnelEditForm</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../types'</span>

<span class="hljs-title function_">defineOptions</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'PersonnelEditDialog'</span>,
})

<span class="hljs-keyword">const</span> props = defineProps&lt;{
  <span class="hljs-attr">visible</span>: boolean
  <span class="hljs-attr">form</span>: <span class="hljs-title class_">PersonnelEditForm</span>
}&gt;()

<span class="hljs-keyword">const</span> emit = defineEmits&lt;{
  <span class="hljs-string">'update:visible'</span>: [<span class="hljs-attr">value</span>: boolean]
  <span class="hljs-attr">confirm</span>: []
}&gt;()

<span class="hljs-keyword">const</span> visible = <span class="hljs-title function_">computed</span>({
  <span class="hljs-attr">get</span>: <span class="hljs-function">() =&gt;</span> props.<span class="hljs-property">visible</span>,
  <span class="hljs-attr">set</span>: <span class="hljs-function">(<span class="hljs-params">val</span>) =&gt;</span> <span class="hljs-title function_">emit</span>(<span class="hljs-string">'update:visible'</span>, val),
})

<span class="hljs-keyword">const</span> isEdit = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> props.<span class="hljs-property">form</span>.<span class="hljs-property">id</span> !== <span class="hljs-literal">null</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span>&gt;</span>
$primary: #5b8dee;
$primary-hover: #6c9eff;
$text: #2d3748;
$text-light: #718096;

.personnel-dialog :deep(.el-dialog) {
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 24px 48px rgba(45, 55, 72, 0.12), 0 8px 24px rgba(91, 141, 238, 0.08);
  border: 1px solid rgba(91, 141, 238, 0.12);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', sans-serif;
}
.personnel-dialog :deep(.el-dialog__header) {
  padding: 24px 28px 20px;
  border-bottom: 1px solid #eef2f8;
  background: linear-gradient(180deg, #fafbff 0%, #fff 100%);
  .el-dialog__title {
    font-size: 18px;
    font-weight: 600;
    color: $text;
    letter-spacing: -0.01em;
  }
  .el-dialog__headerbtn .el-dialog__close {
    color: $text-light;
    font-size: 18px;
    &amp;:hover {
      color: $text;
    }
  }
}
.dialog-form {
  padding: 24px 28px 0;
  :deep(.el-form-item__label) {
    color: $text;
    font-size: 14px;
    font-weight: 500;
  }
  :deep(.el-input__wrapper) {
    border-radius: 10px;
    border: 1px solid #e2e8f0;
    box-shadow: none;
    font-size: 14px;
    transition: all 0.2s ease;
    &amp;.is-focus {
      border-color: $primary;
      box-shadow: 0 0 0 3px rgba(91, 141, 238, 0.18);
    }
  }
}
.dialog-footer {
  padding: 18px 28px 24px;
  border-top: 1px solid #eef2f8;
  background: #fafbff;
  :deep(.el-button--primary) {
    background: linear-gradient(135deg, $primary 0%, $primary-hover 100%);
    border: none;
    border-radius: 10px;
    padding: 9px 22px;
    font-size: 14px;
    font-weight: 500;
    box-shadow: 0 2px 10px rgba(91, 141, 238, 0.3);
    transition: all 0.25s ease;
    &amp;:hover {
      box-shadow: 0 4px 14px rgba(91, 141, 238, 0.4);
      transform: translateY(-1px);
    }
  }
  :deep(.el-button:not(.el-button--primary)) {
    border-radius: 10px;
    color: $text;
    border: 1px solid #e2e8f0;
    font-size: 14px;
    background: #fff;
    &amp;:hover {
      border-color: $primary;
      color: $primary;
      background: rgba(91, 141, 238, 0.06);
    }
  }
}
<span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>

</code></pre>
<p><strong>PersonnelPasswordDialog.vue</strong></p>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">el-dialog</span>
    <span class="hljs-attr">v-model</span>=<span class="hljs-string">"visible"</span>
    <span class="hljs-attr">title</span>=<span class="hljs-string">"ä¿®æ”¹å¯†ç "</span>
    <span class="hljs-attr">width</span>=<span class="hljs-string">"360px"</span>
    <span class="hljs-attr">class</span>=<span class="hljs-string">"personnel-dialog"</span>
    <span class="hljs-attr">destroy-on-close</span>
    @<span class="hljs-attr">close</span>=<span class="hljs-string">"handleClose"</span>
  &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-form</span> <span class="hljs-attr">:model</span>=<span class="hljs-string">"form"</span> <span class="hljs-attr">label-width</span>=<span class="hljs-string">"80px"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dialog-form"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"æ–°å¯†ç "</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span>
          <span class="hljs-attr">v-model</span>=<span class="hljs-string">"form.newPassword"</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
          <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥æ–°å¯†ç "</span>
          <span class="hljs-attr">show-password</span>
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-form</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">footer</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dialog-footer"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleClose"</span>&gt;</span>å–æ¶ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleConfirm"</span>&gt;</span>ç¡®å®š<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">el-dialog</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { computed, ref, watch } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-title function_">defineOptions</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'PersonnelPasswordDialog'</span>,
})

<span class="hljs-keyword">const</span> props = defineProps&lt;{
  <span class="hljs-attr">visible</span>: boolean
}&gt;()

<span class="hljs-keyword">const</span> emit = defineEmits&lt;{
  <span class="hljs-string">'update:visible'</span>: [<span class="hljs-attr">value</span>: boolean]
  <span class="hljs-attr">confirm</span>: [<span class="hljs-attr">newPassword</span>: string]
  <span class="hljs-attr">close</span>: []
}&gt;()

<span class="hljs-keyword">const</span> visible = <span class="hljs-title function_">computed</span>({
  <span class="hljs-attr">get</span>: <span class="hljs-function">() =&gt;</span> props.<span class="hljs-property">visible</span>,
  <span class="hljs-attr">set</span>: <span class="hljs-function">(<span class="hljs-params">val</span>) =&gt;</span> <span class="hljs-title function_">emit</span>(<span class="hljs-string">'update:visible'</span>, val),
})

<span class="hljs-keyword">const</span> form = <span class="hljs-title function_">ref</span>({
  <span class="hljs-attr">newPassword</span>: <span class="hljs-string">''</span>,
})

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClose</span> = (<span class="hljs-params"/>) =&gt; {
  form.<span class="hljs-property">value</span>.<span class="hljs-property">newPassword</span> = <span class="hljs-string">''</span>
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'update:visible'</span>, <span class="hljs-literal">false</span>)
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'close'</span>)
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleConfirm</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'confirm'</span>, form.<span class="hljs-property">value</span>.<span class="hljs-property">newPassword</span>)
  form.<span class="hljs-property">value</span>.<span class="hljs-property">newPassword</span> = <span class="hljs-string">''</span>
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'update:visible'</span>, <span class="hljs-literal">false</span>)
}

<span class="hljs-title function_">watch</span>(
  <span class="hljs-function">() =&gt;</span> props.<span class="hljs-property">visible</span>,
  <span class="hljs-function">(<span class="hljs-params">val</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!val) {
      form.<span class="hljs-property">value</span>.<span class="hljs-property">newPassword</span> = <span class="hljs-string">''</span>
    }
  }
)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span>&gt;</span>
$primary: #5b8dee;
$primary-hover: #6c9eff;
$text: #2d3748;
$text-light: #718096;

.personnel-dialog :deep(.el-dialog) {
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 24px 48px rgba(45, 55, 72, 0.12), 0 8px 24px rgba(91, 141, 238, 0.08);
  border: 1px solid rgba(91, 141, 238, 0.12);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', sans-serif;
}
.personnel-dialog :deep(.el-dialog__header) {
  padding: 24px 28px 20px;
  border-bottom: 1px solid #eef2f8;
  background: linear-gradient(180deg, #fafbff 0%, #fff 100%);
  .el-dialog__title {
    font-size: 18px;
    font-weight: 600;
    color: $text;
    letter-spacing: -0.01em;
  }
}
.dialog-form {
  padding: 24px 28px 0;
  :deep(.el-input__wrapper) {
    border-radius: 10px;
    border: 1px solid #e2e8f0;
    box-shadow: none;
    font-size: 14px;
    transition: all 0.2s ease;
    &amp;.is-focus {
      border-color: $primary;
      box-shadow: 0 0 0 3px rgba(91, 141, 238, 0.18);
    }
  }
}
.dialog-footer {
  padding: 18px 28px 24px;
  border-top: 1px solid #eef2f8;
  background: #fafbff;
  :deep(.el-button--primary) {
    background: linear-gradient(135deg, $primary 0%, $primary-hover 100%);
    border: none;
    border-radius: 10px;
    padding: 9px 22px;
    font-size: 14px;
    font-weight: 500;
    box-shadow: 0 2px 10px rgba(91, 141, 238, 0.3);
    transition: all 0.25s ease;
    &amp;:hover {
      box-shadow: 0 4px 14px rgba(91, 141, 238, 0.4);
      transform: translateY(-1px);
    }
  }
  :deep(.el-button:not(.el-button--primary)) {
    border-radius: 10px;
    color: $text;
    border: 1px solid #e2e8f0;
    font-size: 14px;
    background: #fff;
    &amp;:hover {
      border-color: $primary;
      color: $primary;
      background: rgba(91, 141, 238, 0.06);
    }
  }
}
<span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>

</code></pre>
<p><strong>PersonnelRoleAssignDialog.vue</strong></p>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">el-dialog</span>
    <span class="hljs-attr">v-model</span>=<span class="hljs-string">"visible"</span>
    <span class="hljs-attr">title</span>=<span class="hljs-string">"åˆ†é…è§’è‰²"</span>
    <span class="hljs-attr">width</span>=<span class="hljs-string">"480px"</span>
    <span class="hljs-attr">class</span>=<span class="hljs-string">"personnel-dialog role-dialog"</span>
    <span class="hljs-attr">destroy-on-close</span>
    @<span class="hljs-attr">open</span>=<span class="hljs-string">"handleOpen"</span>
    @<span class="hljs-attr">close</span>=<span class="hljs-string">"handleClose"</span>
  &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-table</span>
      <span class="hljs-attr">ref</span>=<span class="hljs-string">"tableRef"</span>
      <span class="hljs-attr">:data</span>=<span class="hljs-string">"roles"</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"role-table"</span>
      <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100%"</span>
      <span class="hljs-attr">:row-key</span>=<span class="hljs-string">"(row) =&gt; row.id"</span>
      @<span class="hljs-attr">selection-change</span>=<span class="hljs-string">"handleSelectionChange"</span>
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"selection"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"50"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"è§’è‰²ID"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"80"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"è§’è‰²åç§°"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-table</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">footer</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dialog-footer"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleClose"</span>&gt;</span>å–æ¶ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleConfirm"</span>&gt;</span>ç¡®å®š<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">el-dialog</span>&gt;</span></span>
&lt;/template&gt;

&lt;script lang="ts" setup&gt;
import { computed, ref, watch } from 'vue'
import type { ElTable } from 'element-plus'
import type { Role } from '../types'

defineOptions({
  name: 'PersonnelRoleAssignDialog',
})

const props = defineProps&lt;{
  visible: boolean
  roles: Role[]
  initialSelectedIds: number[]
}&gt;()

const emit = defineEmits&lt;{
  'update:visible': [value: boolean]
  confirm: [selectedIds: number[]]
  close: []
}&gt;()

const visible = computed({
  get: () =&gt; props.visible,
  set: (val) =&gt; emit('update:visible', val),
})

const tableRef = ref&lt;InstanceType&lt;typeof ElTable&gt;&gt;()
const selectedIds = ref&lt;number[]&gt;([])

const handleSelectionChange = (selection: Role[]) =&gt; {
  selectedIds.value = selection.map((r) =&gt; r.id)
}

const handleOpen = () =&gt; {
  selectedIds.value = [...props.initialSelectedIds]
  setTableSelection()
}

const setTableSelection = () =&gt; {
  if (!tableRef.value || !props.roles.length) return

  tableRef.value.clearSelection()
  props.roles.forEach((role) =&gt; {
    if (props.initialSelectedIds.includes(role.id)) {
      tableRef.value?.toggleRowSelection(role, true)
    }
  })
}

watch(
  () =&gt; [props.visible, props.roles],
  () =&gt; {
    if (props.visible) {
      selectedIds.value = [...props.initialSelectedIds]
      // å»¶è¿Ÿç¡®ä¿è¡¨æ ¼å·²æ¸²æŸ“
      setTimeout(setTableSelection, 0)
    }
  },
  { flush: 'post' }
)

const handleConfirm = () =&gt; {
  emit('confirm', selectedIds.value)
  // å…³é—­ç”±çˆ¶çº§ confirmAssignRole æˆåŠŸæ—¶æ§åˆ¶
}

const handleClose = () =&gt; {
  emit('update:visible', false)
  emit('close')
}
&lt;/script&gt;

&lt;style scoped lang="scss"&gt;
$primary: #5b8dee;
$primary-hover: #6c9eff;
$text: #2d3748;
$text-light: #718096;

.personnel-dialog :deep(.el-dialog) {
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 24px 48px rgba(45, 55, 72, 0.12), 0 8px 24px rgba(91, 141, 238, 0.08);
  border: 1px solid rgba(91, 141, 238, 0.12);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', sans-serif;
}
.personnel-dialog :deep(.el-dialog__header) {
  padding: 24px 28px 20px;
  border-bottom: 1px solid #eef2f8;
  background: linear-gradient(180deg, #fafbff 0%, #fff 100%);
  .el-dialog__title {
    font-size: 18px;
    font-weight: 600;
    color: $text;
    letter-spacing: -0.01em;
  }
}
.role-dialog :deep(.el-dialog__body) {
  padding: 20px 28px;
}
.role-table {
  --el-table-border-color: #e8ecf4;
  font-size: 14px;
  :deep(.el-table__header th) {
    background: linear-gradient(180deg, #fafbff 0%, #f5f7fc 100%) !important;
    color: $text-light;
    font-weight: 600;
    font-size: 12px;
  }
  :deep(.el-table__body td) {
    color: $text;
  }
  :deep(.el-table__row:hover td) {
    background: #f8faff !important;
  }
}
.dialog-footer {
  padding: 18px 28px 24px;
  border-top: 1px solid #eef2f8;
  background: #fafbff;
  :deep(.el-button--primary) {
    background: linear-gradient(135deg, $primary 0%, $primary-hover 100%);
    border: none;
    border-radius: 10px;
    padding: 9px 22px;
    font-size: 14px;
    font-weight: 500;
    box-shadow: 0 2px 10px rgba(91, 141, 238, 0.3);
    transition: all 0.25s ease;
    &amp;:hover {
      box-shadow: 0 4px 14px rgba(91, 141, 238, 0.4);
      transform: translateY(-1px);
    }
  }
  :deep(.el-button:not(.el-button--primary)) {
    border-radius: 10px;
    color: $text;
    border: 1px solid #e2e8f0;
    font-size: 14px;
    background: #fff;
    &amp;:hover {
      border-color: $primary;
      color: $primary;
      background: rgba(91, 141, 238, 0.06);
    }
  }
}
&lt;/style&gt;

</code></pre>
<p>ä»¥ä¸Šä¾¿æ˜¯å¯¹Vue3 Composablesï¼ˆç»„åˆå¼å‡½æ•°ï¼‰çš„åˆ†äº«ï¼Œæ¬¢è¿å¤§å®¶æŒ‡æ­£è®¨è®ºï¼Œä¸å¤§å®¶å…±å‹‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€0 å…ƒå…è´¹å­¦ã€‘AgentScope Java æå®¢æ—¶é—´å…¬å¼€è¯¾ä¸Šçº¿ï¼]]></title>    <link>https://juejin.cn/post/7604757482005168191</link>    <guid>https://juejin.cn/post/7604757482005168191</guid>    <pubDate>2026-02-10T08:34:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604757482005168191" data-draft-id="7604769326224801828" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€0 å…ƒå…è´¹å­¦ã€‘AgentScope Java æå®¢æ—¶é—´å…¬å¼€è¯¾ä¸Šçº¿ï¼"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2026-02-10T08:34:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€0 å…ƒå…è´¹å­¦ã€‘AgentScope Java æå®¢æ—¶é—´å…¬å¼€è¯¾ä¸Šçº¿ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T08:34:13.000Z" title="Tue Feb 10 2026 08:34:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Agent å·²ç»æˆä¸ºä¼ä¸šæ™ºèƒ½åŒ–å‡çº§çš„æ ¸å¿ƒè½½ä½“ã€‚ä½†ç›®å‰ Agent å¼€å‘ä¸»æµæ¡†æ¶å¤šä»¥ Python ä¸ºä¸»ï¼Œä¼ä¸šçº§é›†æˆèƒ½åŠ›éš¾åº¦å¤§ã€çŠ¶æ€ç®¡ç†æ··ä¹±ã€ç¼ºä¹è°ƒè¯•å·¥å…·ä¸äº‘åŸç”Ÿéƒ¨ç½²æ”¯æŒç­‰é—®é¢˜æ˜¯æ‘†åœ¨å¾ˆ å¤šJava å›¢é˜Ÿé¢å‰çš„æŒ‘æˆ˜ã€‚</p>
<p>AgentScope æ˜¯é˜¿é‡Œå·´å·´æ¨å‡ºçš„ä¸€æ¬¾ä»¥å¼€å‘è€…ä¸ºæ ¸å¿ƒï¼Œä¸“æ³¨äºæ™ºèƒ½ä½“å¼€å‘çš„å¼€æºæ¡†æ¶ï¼Œå…¶æ ¸å¿ƒç›®æ ‡æ˜¯è§£å†³æ™ºèƒ½ä½“åœ¨æ„å»ºã€è¿è¡Œå’Œç®¡ç†ä¸­çš„éš¾é¢˜ï¼Œæä¾›ä¸€å¥—è¦†ç›–â€œå¼€å‘ã€éƒ¨ç½²ã€è°ƒä¼˜â€å…¨ç”Ÿå‘½å‘¨æœŸçš„ç”Ÿäº§çº§è§£å†³æ–¹æ¡ˆï¼Œè®©æ™ºèƒ½ä½“åº”ç”¨çš„å¼€å‘æ›´ç®€å•ã€è¿è¡Œæ›´ç¨³å®šã€æ•ˆæœæ›´å“è¶Šã€‚</p>
<p>ä¸ºäº†æ›´å¥½åŠ©åŠ›å¼€å‘è€…é«˜æ•ˆä¸Šæ‰‹ï¼Œæ¥è‡ªé˜¿é‡Œäº‘äº‘åŸç”Ÿåº”ç”¨å¹³å° AgentScope Java ç ”å‘å›¢é˜Ÿè”åˆ InfoQ æ¨å‡ºã€ŒAgentScope æå®¢å…¬å¼€è¯¾ã€ç³»åˆ—ï¼Œæ·±å…¥è®²è§£æ¡†æ¶æ ¸å¿ƒèƒ½åŠ›ä¸å®æˆ˜æ¡ˆä¾‹ã€‚æ— è®ºä½ æ˜¯æƒ³æ¢ç´¢ AI ç¼–ç¨‹æ–°èŒƒå¼ï¼Œè¿˜æ˜¯äºŸéœ€å°†å¤§æ¨¡å‹èƒ½åŠ›åµŒå…¥ç°æœ‰ä¸šåŠ¡ç³»ç»Ÿï¼Œè¯¾ç¨‹éƒ½å°†ä¸ºä½ æä¾›ä¸€æ¡ä½é—¨æ§›ã€é«˜æ•ˆç‡ã€å¯è½åœ°çš„å­¦ä¹ è·¯å¾„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1340d8a135f44dc097c9c53f4dbe8d3d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771317256&amp;x-signature=NhSEk0klnOjGH%2BFBYFf1OJJQOE8%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-0">è¯¾ç¨‹è®¾è®¡</h2>
<p>AgentScope Java ç³»åˆ—è¯¾ç¨‹å¼ºè°ƒâ€œå­¦å®Œå³ç”¨â€ï¼Œå¸®åŠ©ä½ åœ¨ç¢ç‰‡åŒ–æ—¶é—´å†…æŒæ¡æ ¸å¿ƒæŠ€èƒ½ï¼Œå¹¶å¿«é€Ÿåº”ç”¨äºå®é™…é¡¹ç›®ã€‚</p>
<h2 data-id="heading-1">æ¨¡å—ä¸€ï¼šå¿«é€Ÿä¸Šæ‰‹ï¼Œ5 åˆ†é’Ÿå¼€å‘ä½ çš„ç¬¬ä¸€ä¸ª Java Agent</h2>
<h3 data-id="heading-2">ã€ç¬¬1èŠ‚ã€‘ä»€ä¹ˆé€‰æ‹© AgentScope Javaï¼ŸAgentScope é€Ÿè§ˆ</h3>
<p>å†…å®¹ç®€ä»‹ï¼šAgentScope Java ä¸ä»…æ˜¯ä¸€ä¸ªæä¾›äº†å¼€å‘è€…å‹å¥½çš„ Agent å¼€å‘æ¡†æ¶ï¼Œæ›´æ˜¯ä¸€ä¸ªé€šè¿‡ AgentScope ç”Ÿæ€å¸®å¼€å‘è€…å®ç°ä»â€œå¼€å‘ã€éƒ¨ç½²ã€è°ƒä¼˜â€å…¨ç”Ÿå‘½å‘¨æœŸçš„ç”Ÿäº§çº§è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-3">ã€ç¬¬2èŠ‚ã€‘ä½¿ç”¨ ReActAgent 5 åˆ†é’Ÿå¿«é€Ÿå¼€å‘ä¸€ä¸ª Agent åº”ç”¨</h3>
<p>å†…å®¹ç®€ä»‹ï¼šæœ¬å°èŠ‚å°†åœ¨ 5 åˆ†é’Ÿå†…ï¼Œè®©å¼€å‘è€…åŸºäº ReActAgentï¼Œé€šè¿‡ä¸åˆ° 20 è¡Œä»£ç ï¼Œä½¿ç”¨ Java è·‘èµ·ä¸€ä¸ª AI æ™ºèƒ½ä½“ã€‚</p>
<h2 data-id="heading-4">æ¨¡å—äºŒï¼šæ ¸å¿ƒèƒ½åŠ› â€”â€” è®© Agent çœŸæ­£â€œæœ‰ç”¨â€</h2>
<h3 data-id="heading-5">ã€ç¬¬3èŠ‚ã€‘ä½¿ç”¨ Tool å’Œ MCP å¸®åŠ© Agent æ¢ç´¢çœŸå®ä¸–ç•Œ</h3>
<p>å†…å®¹ç®€ä»‹ï¼šTool å’Œ MCP ä½œä¸º Agent ä¸ä¸–ç•Œäº¤äº’çš„æ¡¥æ¢ï¼Œæœ¬å°èŠ‚å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ AgentScope Java é…ç½®å¯¹åº”çš„ Tool å’Œ MCPï¼Œè®©ä½ ä¸ºå·²ç»åˆ›å»ºçš„ AI æ™ºèƒ½ä½“æ·»åŠ æŸ¥è¯¢æœç´¢å¼•æ“çš„èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-6">ã€ç¬¬4èŠ‚ã€‘RAGï¼šèµ‹äºˆ Agent ç§åŸŸçŸ¥è¯†</h3>
<p>å†…å®¹ç®€ä»‹ï¼šä¸ºäº†è®©æ™ºèƒ½ä½“èƒ½å¤Ÿæ‹¥æœ‰æ›´å‡†ç¡®çš„â€œç§æœ‰çŸ¥è¯†â€ï¼Œæœ¬å°èŠ‚å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ AgentScope Java é…åˆé˜¿é‡Œäº‘ç™¾ç‚¼çŸ¥è¯†åº“å®ç°é«˜æ•ˆåœ°çŸ¥è¯†æ£€ç´¢ï¼Œè®© AI æ™ºèƒ½ä½“æ›´æ‡‚ä½ çš„ä¸šåŠ¡ã€‚</p>
<h3 data-id="heading-7">ã€ç¬¬5èŠ‚ã€‘è®°å¿†ï¼šè®© Agent è¿ˆå‘æ›´é«˜é˜¶çš„æ™ºèƒ½</h3>
<p>å†…å®¹ç®€ä»‹ï¼šåŒå±‚è®°å¿†æ¶æ„-çŸ­æœŸè®°å¿†-AutoContextMemory ç»„ä»¶å®ç°æ™ºèƒ½ä¸Šä¸‹æ–‡ç®¡ç†ï¼Œé•¿æœŸè®°å¿†å®ç°è·¨ä¼šè¯çš„ç”¨æˆ·åå¥½è®°å½•ï¼Œè®© Agent çœŸæ­£â€œè®°ä½â€ç”¨æˆ·ã€‚</p>
<h3 data-id="heading-8">ã€ç¬¬6èŠ‚ã€‘ç»“æ„åŒ–è¾“å‡ºï¼šå°† Agent åº”ç”¨æ•´åˆåˆ°ä¸šåŠ¡ç³»ç»Ÿä¸­çš„æ¡¥æ¢</h3>
<p>å†…å®¹ç®€ä»‹ï¼šç»“æ„åŒ–çš„æ•°æ®æ˜¯å°† AI æ™ºèƒ½ä½“æ•´åˆåˆ°å·²æœ‰çš„ä¸šåŠ¡ç³»ç»Ÿä¸­æœ€ä½³çš„æ–¹æ¡ˆï¼Œæœ¬å°èŠ‚å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ AgentScope Java æ„å»ºä¸€ä¸ªå…·å¤‡æ¨ç†ã€æ€è€ƒã€æ‰§è¡Œèƒ½åŠ›ä¸”èƒ½è¿”å›ç»“æ„åŒ–æ•°æ®çš„æ™ºèƒ½ä½“ã€‚</p>
<h2 data-id="heading-9">æ¨¡å—ä¸‰ï¼šå¼€å‘ææ•ˆ â€”â€” è°ƒè¯•ã€åä½œä¸å¤æ‚ä»»åŠ¡</h2>
<h3 data-id="heading-10">ã€ç¬¬7èŠ‚ã€‘AgentScope Studioï¼šè°ƒè¯•ã€å‰–æ Agent åº”ç”¨åˆ©å™¨</h3>
<p>å†…å®¹ç®€ä»‹ï¼šé™¤äº†é€šè¿‡æ§åˆ¶å°å’Œæ™ºèƒ½ä½“äº¤äº’ï¼ŒAgentScope æä¾›äº†ä¸€ä¸ªå¼€å‘è€…å‹å¥½çš„ Studio æ§åˆ¶å°ï¼Œé€šè¿‡ AgentScope Studio å¯ä»¥å®æ—¶å’Œæ™ºèƒ½ä½“å¯¹è¯ï¼Œè§‚æµ‹æ™ºèƒ½ä½“ä¸ LLM æ¨¡å‹çš„è¯·æ±‚è¿‡ç¨‹ã€‚</p>
<h3 data-id="heading-11">ã€ç¬¬8èŠ‚ã€‘Planï¼šè®© Agent èƒ½è‡ªä¸»åˆ†è§£å¤æ‚ä»»åŠ¡</h3>
<p>å†…å®¹ç®€ä»‹ï¼šPlan/ActÂ é€šè¿‡åˆ†ç¦»è§„åˆ’ä¸å®æ–½é˜¶æ®µï¼Œæœ‰æ•ˆé¿å…äº† Agent â€œè¾¹æƒ³è¾¹åšâ€å¯¼è‡´çš„å‘æ•£é—®é¢˜ï¼Œå¹¿æ³›åº”ç”¨äº Manusã€Coding ç­‰é¢†åŸŸã€‚æœ¬å°èŠ‚å°†ä»‹ç»å¦‚ä½•é€šè¿‡ AgentScope Java å†…ç½®çš„ Plan æœºåˆ¶è®©æ™ºèƒ½ä½“å®Œæˆå¤æ‚ä»»åŠ¡ã€‚</p>
<h3 data-id="heading-12">ã€ç¬¬9èŠ‚ã€‘Tool Groupï¼šå¸®åŠ©æ¨¡å‹é¢å¯¹å¤§é‡ Tool æ—¶æ›´å¥½åœ°å†³ç­–</h3>
<p>è®²å¸ˆï¼šå´å®‡å¥‡(å¯æ·®)</p>
<p>å†…å®¹ç®€ä»‹ï¼šéšç€ç”¨æˆ·çš„ä»»åŠ¡å¤æ‚åº¦çš„æå‡ï¼Œéœ€è¦æš´éœ²ç»™ LLM æ›´å¤šçš„å·¥å…·ï¼Œè¿™ä¼šå¯¼è‡´å‡†ç¡®ç‡ä¸‹é™å’Œ Token æˆæœ¬å¤§å¹…æå‡ã€‚AgentScope Java å…è®¸å°†å·¥å…·è¿›è¡Œè§„åˆ™ï¼Œæ¸è¿›å¼æš´éœ²ç»™æ™ºèƒ½ä½“ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-13">æ¨¡å—å››ï¼šé«˜é˜¶å®æˆ˜ â€”â€” å¤š Agent çš„æ„å»ºä¸éš¾ç‚¹</h2>
<h3 data-id="heading-14">ã€ç¬¬10èŠ‚ã€‘Agent Debateï¼šä»¥ç‹¼äººæ€ä¸ºä¾‹æ¢è®¨å¤š Agent ç³»ç»Ÿéš¾ç‚¹</h3>
<p>å†…å®¹ç®€ä»‹ï¼šéšç€æ™ºèƒ½ä½“åº”ç”¨çš„è“¬å‹ƒå‘å±•ï¼Œå¤šæ™ºèƒ½ä½“çš„äº¤äº’éœ€è¦å˜å¾—è¶Šæ¥è¶Šæ€¥è¿«ã€‚æœ¬å°èŠ‚å°†ä»¥ç‹¼äººæ€æ¸¸æˆä¸ºä¾‹ä»‹ç»å¦‚ä½•æ„å»ºä¸€ä¸ªå…·å¤‡ä¸åŒèƒ½åŠ›çš„å¤šæ™ºèƒ½ä½“åä½œç³»ç»Ÿï¼Œæ¢è®¨å¦‚ä½•æ„å»ºå¥½ä¸€ä¸ªå¤šæ™ºèƒ½ä½“ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-15">ã€ç¬¬11èŠ‚ã€‘ A2Aï¼šå¤š Agent åˆ†å¸ƒå¼å¯¹è¯çš„æ¡¥æ¢</h3>
<p>å†…å®¹ç®€ä»‹ï¼šA2A åè®®åšä¸€ä¸ªå¼€æ”¾åè®®ï¼Œç›®æ ‡æ˜¯å®ç° AI æ™ºèƒ½ä½“ä¹‹é—´çš„æ— ç¼é€šä¿¡ä¸åä½œã€‚æœ¬èŠ‚å°†ä»‹ç»å¦‚æœé€šè¿‡ A2A åè®®åœ¨ AgentScope Java ä¸­æ„å»ºä¸€ä¸ªåˆ†å¸ƒå¼å¤šæ™ºèƒ½ä½“åº”ç”¨ã€‚</p>
<p>ç‚¹å‡»<a href="https://link.juejin.cn?target=https%3A%2F%2Ftime.geekbang.org%2Fopencourse%2Fvideointro%2F101113201" target="_blank" title="https://time.geekbang.org/opencourse/videointro/101113201" ref="nofollow noopener noreferrer">æ­¤å¤„</a>ï¼Œ0 å…ƒå­¦ AgentScope Javaã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[èŠä¸€èŠJSå¼‚æ­¥ç¼–ç¨‹çš„å‰ä¸–ä»Šç”Ÿ]]></title>    <link>https://juejin.cn/post/7604784281957941286</link>    <guid>https://juejin.cn/post/7604784281957941286</guid>    <pubDate>2026-02-10T08:42:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604784281957941286" data-draft-id="7604761524978040841" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="èŠä¸€èŠJSå¼‚æ­¥ç¼–ç¨‹çš„å‰ä¸–ä»Šç”Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-02-10T08:42:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å…†å­é¾™"/> <meta itemprop="url" content="https://juejin.cn/user/994385683293918"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            èŠä¸€èŠJSå¼‚æ­¥ç¼–ç¨‹çš„å‰ä¸–ä»Šç”Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/994385683293918/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å…†å­é¾™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T08:42:05.000Z" title="Tue Feb 10 2026 08:42:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">JavaScript å¼‚æ­¥ç¼–ç¨‹è¿›åŒ–å²ï¼šä»å›è°ƒåœ°ç‹±åˆ° async/await</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>å¦‚æœä½ é—®ä¸€ä¸ªå‰ç«¯åˆå­¦è€…ï¼š"JavaScript æœ€è®©ä½ å¤´ç–¼çš„æ˜¯ä»€ä¹ˆï¼Ÿ"ï¼Œåæœ‰å…«ä¹ä¼šå¬åˆ°"å¼‚æ­¥ç¼–ç¨‹"è¿™ä¸ªç­”æ¡ˆã€‚ä»å›è°ƒåœ°ç‹±åˆ° Promise é“¾ï¼Œå†åˆ°å¦‚ä»Šä¼˜é›…çš„ async/awaitï¼ŒJavaScript çš„å¼‚æ­¥ç¼–ç¨‹ç»å†äº†ä¸€åœºæ¼«é•¿çš„è¿›åŒ–ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥èŠèŠè¿™æ®µå……æ»¡è¡€æ³ªçš„å†å²ã€‚</p>
<h3 data-id="heading-2">è¿œå¤æ—¶æœŸï¼šåŒæ­¥çš„ä¸–ç•Œï¼ˆ1995-2009ï¼‰</h3>
<h4 data-id="heading-3">å†å²èƒŒæ™¯</h4>
<p>1995 å¹´ï¼ŒBrendan Eich åœ¨ Netscape å…¬å¸ç”¨ 10 å¤©æ—¶é—´åˆ›é€ äº† JavaScriptï¼ˆæœ€åˆå« LiveScriptï¼‰ã€‚å½“æ—¶çš„è®¾è®¡åˆè¡·éå¸¸ç®€å•ï¼š<strong>ä¸ºæµè§ˆå™¨æä¾›ç®€å•çš„é¡µé¢äº¤äº’èƒ½åŠ›</strong>ï¼Œæ¯”å¦‚è¡¨å•éªŒè¯ã€æŒ‰é’®ç‚¹å‡»å“åº”ç­‰ã€‚</p>
<p>é‚£ä¸ªå¹´ä»£ï¼Œç½‘é¡µè¿˜å¾ˆç®€å•ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- 1995 å¹´çš„ç½‘é¡µé•¿è¿™æ · --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onsubmit</span>=<span class="hljs-string">"return validateForm()"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">function</span> <span class="hljs-title function_">validateForm</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">var</span> username = <span class="hljs-variable language_">document</span>.<span class="hljs-property">forms</span>[<span class="hljs-number">0</span>].<span class="hljs-property">username</span>.<span class="hljs-property">value</span>;
  <span class="hljs-keyword">if</span> (username === <span class="hljs-string">''</span>) {
    <span class="hljs-title function_">alert</span>(<span class="hljs-string">'ç”¨æˆ·åä¸èƒ½ä¸ºç©ºï¼'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>è¿™ä¸ªæ—¶æœŸçš„ JavaScript åªéœ€è¦å¤„ç†ç®€å•çš„åŒæ­¥æ“ä½œï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è®¡ç®—</span>
<span class="hljs-keyword">var</span> result = <span class="hljs-number">1</span> + <span class="hljs-number">2</span>;

<span class="hljs-comment">// DOM æ“ä½œ</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'btn'</span>).<span class="hljs-property">onclick</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">alert</span>(<span class="hljs-string">'ä½ ç‚¹å‡»äº†æŒ‰é’®'</span>);
};

<span class="hljs-comment">// è¡¨å•éªŒè¯</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">validate</span>(<span class="hljs-params">value</span>) {
  <span class="hljs-keyword">return</span> value.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>;
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆåªæœ‰åŒæ­¥ï¼Ÿ</strong></p>
<p>å› ä¸ºå½“æ—¶çš„ç½‘é¡µäº¤äº’éå¸¸ç®€å•ï¼Œä¸éœ€è¦å¤æ‚çš„å¼‚æ­¥æ“ä½œã€‚å³ä½¿æœ‰ç½‘ç»œè¯·æ±‚ï¼Œä¹Ÿæ˜¯é€šè¿‡è¡¨å•æäº¤åˆ·æ–°æ•´ä¸ªé¡µé¢æ¥å®Œæˆçš„ã€‚</p>
<h4 data-id="heading-4">è½¬æŠ˜ç‚¹ï¼šAJAX çš„è¯ç”Ÿ</h4>
<p>2005 å¹´ï¼ŒGoogle æ¨å‡ºäº† Gmail å’Œ Google Mapsï¼Œå±•ç¤ºäº† AJAXï¼ˆAsynchronous JavaScript and XMLï¼‰çš„å¼ºå¤§èƒ½åŠ›ã€‚çªç„¶é—´ï¼Œç½‘é¡µå¯ä»¥åœ¨ä¸åˆ·æ–°çš„æƒ…å†µä¸‹ä¸æœåŠ¡å™¨é€šä¿¡äº†ï¼</p>
<p>è¿™æ ‡å¿—ç€ JavaScript æ­£å¼è¿›å…¥å¼‚æ­¥æ—¶ä»£ã€‚</p>
<h3 data-id="heading-5">Callback æ—¶æœŸï¼šå›è°ƒåœ°ç‹±çš„å™©æ¢¦ï¼ˆ2005-2015ï¼‰</h3>
<h4 data-id="heading-6">æ ‡å¿—æ€§äº‹ä»¶</h4>
<ul>
<li><strong>2005 å¹´</strong>ï¼šAJAX æŠ€æœ¯è¢«å¹¿æ³›åº”ç”¨</li>
<li><strong>2009 å¹´</strong>ï¼šNode.js è¯ç”Ÿï¼ŒJavaScript è¿›å…¥æœåŠ¡ç«¯ï¼Œå¼‚æ­¥ I/O æˆä¸ºæ ¸å¿ƒ</li>
<li><strong>2010 å¹´</strong>ï¼šå›è°ƒå‡½æ•°æˆä¸ºå¼‚æ­¥ç¼–ç¨‹çš„ä¸»æµæ¨¡å¼</li>
</ul>
<h4 data-id="heading-7">è§£å†³çš„é—®é¢˜</h4>
<p>å›è°ƒå‡½æ•°è®© JavaScript èƒ½å¤Ÿå¤„ç†å¼‚æ­¥æ“ä½œï¼Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‘èµ·ç½‘ç»œè¯·æ±‚</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserData</span>(<span class="hljs-params">userId, callback</span>) {
  <span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();
  xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">'GET'</span>, <span class="hljs-string">'/api/user/'</span> + userId);
  
  xhr.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {
      <span class="hljs-title function_">callback</span>(<span class="hljs-literal">null</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(xhr.<span class="hljs-property">responseText</span>));
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥'</span>));
    }
  };
  
  xhr.<span class="hljs-title function_">send</span>();
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-title function_">getUserData</span>(<span class="hljs-number">123</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">err, user</span>) {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç”¨æˆ·ä¿¡æ¯:'</span>, user);
});
</code></pre>
<h4 data-id="heading-8">æ–°çš„çŸ›ç›¾ï¼šå›è°ƒåœ°ç‹±ï¼ˆCallback Hellï¼‰</h4>
<p>å½“ä½ éœ€è¦æ‰§è¡Œå¤šä¸ªä¾èµ–çš„å¼‚æ­¥æ“ä½œæ—¶ï¼Œä»£ç ä¼šå˜æˆè¿™æ ·ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ğŸ˜± çœŸå®çš„å›è°ƒåœ°ç‹±ä»£ç </span>
<span class="hljs-title function_">getUserData</span>(<span class="hljs-number">123</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">err, user</span>) {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–ç”¨æˆ·å¤±è´¥:'</span>, err);
    <span class="hljs-keyword">return</span>;
  }
  
  <span class="hljs-comment">// è·å–ç”¨æˆ·çš„è®¢å•åˆ—è¡¨</span>
  <span class="hljs-title function_">getOrders</span>(user.<span class="hljs-property">id</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">err, orders</span>) {
    <span class="hljs-keyword">if</span> (err) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–è®¢å•å¤±è´¥:'</span>, err);
      <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-comment">// è·å–ç¬¬ä¸€ä¸ªè®¢å•çš„è¯¦æƒ…</span>
    <span class="hljs-title function_">getOrderDetail</span>(orders[<span class="hljs-number">0</span>].<span class="hljs-property">id</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">err, detail</span>) {
      <span class="hljs-keyword">if</span> (err) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–è®¢å•è¯¦æƒ…å¤±è´¥:'</span>, err);
        <span class="hljs-keyword">return</span>;
      }
      
      <span class="hljs-comment">// è·å–è®¢å•ä¸­çš„å•†å“ä¿¡æ¯</span>
      <span class="hljs-title function_">getProducts</span>(detail.<span class="hljs-property">productIds</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">err, products</span>) {
        <span class="hljs-keyword">if</span> (err) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–å•†å“å¤±è´¥:'</span>, err);
          <span class="hljs-keyword">return</span>;
        }
        
        <span class="hljs-comment">// è®¡ç®—æ€»ä»·</span>
        <span class="hljs-title function_">calculateTotal</span>(products, <span class="hljs-keyword">function</span>(<span class="hljs-params">err, total</span>) {
          <span class="hljs-keyword">if</span> (err) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è®¡ç®—æ€»ä»·å¤±è´¥:'</span>, err);
            <span class="hljs-keyword">return</span>;
          }
          
          <span class="hljs-comment">// ç»ˆäºå¯ä»¥æ˜¾ç¤ºç»“æœäº†ï¼</span>
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è®¢å•æ€»ä»·:'</span>, total);
        });
      });
    });
  });
});
</code></pre>
<p><strong>å›è°ƒåœ°ç‹±çš„ç—›ç‚¹</strong>ï¼š</p>
<ol>
<li><strong>ä»£ç æ¨ªå‘å‘å±•</strong>ï¼šåµŒå¥—å±‚çº§è¶Šæ¥è¶Šæ·±ï¼Œå½¢æˆ"é‡‘å­—å¡”"ç»“æ„</li>
<li><strong>é”™è¯¯å¤„ç†é‡å¤</strong>ï¼šæ¯ä¸€å±‚éƒ½è¦å†™ <code>if (err)</code> åˆ¤æ–­</li>
<li><strong>å¯è¯»æ€§æå·®</strong>ï¼šå¾ˆéš¾ç†è§£ä»£ç çš„æ‰§è¡Œæµç¨‹</li>
<li><strong>éš¾ä»¥ç»´æŠ¤</strong>ï¼šä¿®æ”¹ä¸€ä¸ªç¯èŠ‚å¯èƒ½å½±å“æ•´ä¸ªè°ƒç”¨é“¾</li>
<li><strong>è°ƒè¯•å›°éš¾</strong>ï¼šé”™è¯¯å †æ ˆä¿¡æ¯æ··ä¹±</li>
</ol>
<p>å†çœ‹ä¸€ä¸ª Node.js çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ğŸ˜± Node.js æ–‡ä»¶æ“ä½œçš„å›è°ƒåœ°ç‹±</span>
fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'config.json'</span>, <span class="hljs-string">'utf8'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">err, config</span>) {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  
  <span class="hljs-keyword">var</span> parsedConfig = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(config);
  
  fs.<span class="hljs-title function_">readFile</span>(parsedConfig.<span class="hljs-property">dataFile</span>, <span class="hljs-string">'utf8'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">err, data</span>) {
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
    
    <span class="hljs-keyword">var</span> processedData = <span class="hljs-title function_">processData</span>(data);
    
    fs.<span class="hljs-title function_">writeFile</span>(<span class="hljs-string">'output.json'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(processedData), <span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) {
      <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
      
      fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'output.json'</span>, <span class="hljs-string">'utf8'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">err, result</span>) {
        <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
        
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤„ç†å®Œæˆ:'</span>, result);
      });
    });
  });
});
</code></pre>
<p>ç¤¾åŒºå¼€å§‹æ„è¯†åˆ°ï¼š<strong>å¿…é¡»æ‰¾åˆ°æ›´å¥½çš„æ–¹å¼æ¥å¤„ç†å¼‚æ­¥ä»£ç ï¼</strong></p>
<h3 data-id="heading-9">Promise æ—¶æœŸï¼šé“¾å¼è°ƒç”¨çš„æ›™å…‰ï¼ˆ2012-2017ï¼‰</h3>
<h4 data-id="heading-10">æ ‡å¿—æ€§äº‹ä»¶</h4>
<ul>
<li><strong>2012 å¹´</strong>ï¼šPromise/A+ è§„èŒƒå‘å¸ƒ</li>
<li><strong>2015 å¹´</strong>ï¼šES6 æ­£å¼å°† Promise çº³å…¥æ ‡å‡†</li>
<li><strong>2015 å¹´</strong>ï¼šå„å¤§æµè§ˆå™¨å¼€å§‹åŸç”Ÿæ”¯æŒ Promise</li>
</ul>
<h4 data-id="heading-11">è§£å†³çš„é—®é¢˜</h4>
<p>Promise é€šè¿‡é“¾å¼è°ƒç”¨è§£å†³äº†å›è°ƒåœ°ç‹±çš„åµŒå¥—é—®é¢˜ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… ä½¿ç”¨ Promise æ”¹å†™</span>
<span class="hljs-title function_">getUserData</span>(<span class="hljs-number">123</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">user</span> =&gt;</span> <span class="hljs-title function_">getOrders</span>(user.<span class="hljs-property">id</span>))
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">orders</span> =&gt;</span> <span class="hljs-title function_">getOrderDetail</span>(orders[<span class="hljs-number">0</span>].<span class="hljs-property">id</span>))
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">detail</span> =&gt;</span> <span class="hljs-title function_">getProducts</span>(detail.<span class="hljs-property">productIds</span>))
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">products</span> =&gt;</span> <span class="hljs-title function_">calculateTotal</span>(products))
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">total</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è®¢å•æ€»ä»·:'</span>, total);
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å‡ºé”™äº†:'</span>, err);
  });
</code></pre>
<p><strong>Promise çš„ä¼˜åŠ¿</strong>ï¼š</p>
<ol>
<li><strong>æ‰å¹³åŒ–</strong>ï¼šä¸å†æ¨ªå‘åµŒå¥—ï¼Œè€Œæ˜¯çºµå‘é“¾å¼è°ƒç”¨</li>
<li><strong>ç»Ÿä¸€é”™è¯¯å¤„ç†</strong>ï¼šä¸€ä¸ª <code>.catch()</code> æ•è·æ‰€æœ‰é”™è¯¯</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼špendingã€fulfilledã€rejected ä¸‰ç§çŠ¶æ€æ¸…æ™°</li>
<li><strong>å¯ç»„åˆ</strong>ï¼š<code>Promise.all()</code>ã€<code>Promise.race()</code> ç­‰å·¥å…·æ–¹æ³•</li>
</ol>
<h4 data-id="heading-12">æ–°çš„çŸ›ç›¾ï¼šPromise é“¾çš„ä¸‰è§’å½¢ä»£ç </h4>
<p>è™½ç„¶ Promise è§£å†³äº†å›è°ƒåœ°ç‹±ï¼Œä½†åœ¨å¤æ‚åœºæ™¯ä¸‹ï¼Œä»ç„¶ä¼šå‡ºç°æ–°çš„é—®é¢˜ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ğŸ˜± Promise çš„ä¸‰è§’å½¢ä»£ç </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processUserOrder</span>(<span class="hljs-params">userId</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">getUserData</span>(userId)
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">user</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">getOrders</span>(user.<span class="hljs-property">id</span>)
        .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">orders</span> =&gt;</span> {
          <span class="hljs-keyword">return</span> <span class="hljs-title function_">getOrderDetail</span>(orders[<span class="hljs-number">0</span>].<span class="hljs-property">id</span>)
            .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">detail</span> =&gt;</span> {
              <span class="hljs-keyword">return</span> <span class="hljs-title function_">getProducts</span>(detail.<span class="hljs-property">productIds</span>)
                .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">products</span> =&gt;</span> {
                  <span class="hljs-comment">// è¿™é‡Œéœ€è¦åŒæ—¶è®¿é—® userã€ordersã€detailã€products</span>
                  <span class="hljs-keyword">return</span> {
                    <span class="hljs-attr">user</span>: user,
                    <span class="hljs-attr">orders</span>: orders,
                    <span class="hljs-attr">detail</span>: detail,
                    <span class="hljs-attr">products</span>: products
                  };
                });
            });
        });
    })
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç”¨æˆ·:'</span>, result.<span class="hljs-property">user</span>.<span class="hljs-property">name</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è®¢å•æ•°:'</span>, result.<span class="hljs-property">orders</span>.<span class="hljs-property">length</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å•†å“:'</span>, result.<span class="hljs-property">products</span>);
    });
}
</code></pre>
<p><strong>é—®é¢˜åˆ†æ</strong>ï¼š</p>
<p>å½“ä½ éœ€è¦åœ¨åç»­æ­¥éª¤ä¸­è®¿é—®å‰é¢çš„å˜é‡æ—¶ï¼Œä¸å¾—ä¸ï¼š</p>
<ol>
<li>è¦ä¹ˆåµŒå¥— Promiseï¼ˆåˆå›åˆ°äº†åµŒå¥—åœ°ç‹±ï¼‰</li>
<li>è¦ä¹ˆåœ¨å¤–å±‚å®šä¹‰å˜é‡ï¼ˆæ±¡æŸ“ä½œç”¨åŸŸï¼‰</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ğŸ˜± æ–¹æ¡ˆ1ï¼šåµŒå¥— Promiseï¼ˆåˆå›åˆ°åœ°ç‹±ï¼‰</span>
<span class="hljs-title function_">getUserData</span>(userId)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">user</span> =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">getOrders</span>(user.<span class="hljs-property">id</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">orders</span> =&gt;</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">getOrderDetail</span>(orders[<span class="hljs-number">0</span>].<span class="hljs-property">id</span>)
          .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">detail</span> =&gt;</span> {
            <span class="hljs-comment">// å¯ä»¥è®¿é—® userã€ordersã€detail</span>
            <span class="hljs-keyword">return</span> <span class="hljs-title function_">processData</span>(user, orders, detail);
          });
      });
  });

<span class="hljs-comment">// ğŸ˜± æ–¹æ¡ˆ2ï¼šæ±¡æŸ“å¤–å±‚ä½œç”¨åŸŸ</span>
<span class="hljs-keyword">let</span> user, orders, detail;

<span class="hljs-title function_">getUserData</span>(userId)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">u</span> =&gt;</span> {
    user = u;
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">getOrders</span>(user.<span class="hljs-property">id</span>);
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">o</span> =&gt;</span> {
    orders = o;
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">getOrderDetail</span>(orders[<span class="hljs-number">0</span>].<span class="hljs-property">id</span>);
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> {
    detail = d;
    <span class="hljs-comment">// ç°åœ¨å¯ä»¥è®¿é—® userã€ordersã€detail</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">processData</span>(user, orders, detail);
  });
</code></pre>
<p><strong>å…¶ä»–ç—›ç‚¹</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ğŸ˜± æ¡ä»¶åˆ†æ”¯å˜å¾—å¤æ‚</span>
<span class="hljs-title function_">getUserData</span>(userId)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">user</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (user.<span class="hljs-property">isVip</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">getVipOrders</span>(user.<span class="hljs-property">id</span>)
        .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">orders</span> =&gt;</span> {
          <span class="hljs-keyword">return</span> { user, orders, <span class="hljs-attr">isVip</span>: <span class="hljs-literal">true</span> };
        });
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">getNormalOrders</span>(user.<span class="hljs-property">id</span>)
        .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">orders</span> =&gt;</span> {
          <span class="hljs-keyword">return</span> { user, orders, <span class="hljs-attr">isVip</span>: <span class="hljs-literal">false</span> };
        });
    }
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
    <span class="hljs-comment">// å¤„ç†ç»“æœ...</span>
  });

<span class="hljs-comment">// ğŸ˜± å¾ªç¯ä¸­çš„ Promise</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processItems</span>(<span class="hljs-params">items</span>) {
  <span class="hljs-keyword">let</span> promise = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>();
  
  items.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
    promise = promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">processItem</span>(item);
    });
  });
  
  <span class="hljs-keyword">return</span> promise;
}
</code></pre>
<p>ç¤¾åŒºå†æ¬¡å‘¼å”¤ï¼š<strong>èƒ½ä¸èƒ½åƒå†™åŒæ­¥ä»£ç ä¸€æ ·å†™å¼‚æ­¥ï¼Ÿ</strong></p>
<h3 data-id="heading-13">Async/Await æ—¶æœŸï¼šå¼‚æ­¥ç¼–ç¨‹çš„ç»ˆæå½¢æ€ï¼ˆ2017-è‡³ä»Šï¼‰</h3>
<h4 data-id="heading-14">æ ‡å¿—æ€§äº‹ä»¶</h4>
<ul>
<li><strong>2017 å¹´</strong>ï¼šES8ï¼ˆES2017ï¼‰æ­£å¼å¼•å…¥ async/await</li>
<li><strong>2017 å¹´</strong>ï¼šNode.js 7.6+ åŸç”Ÿæ”¯æŒ async/await</li>
<li><strong>2018 å¹´</strong>ï¼šä¸»æµæµè§ˆå™¨å…¨é¢æ”¯æŒ</li>
</ul>
<h4 data-id="heading-15">è§£å†³çš„é—®é¢˜</h4>
<p>async/await è®©å¼‚æ­¥ä»£ç çœ‹èµ·æ¥åƒåŒæ­¥ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… ä½¿ç”¨ async/await æ”¹å†™</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">processUserOrder</span>(<span class="hljs-params">userId</span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getUserData</span>(userId);
    <span class="hljs-keyword">const</span> orders = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getOrders</span>(user.<span class="hljs-property">id</span>);
    <span class="hljs-keyword">const</span> detail = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getOrderDetail</span>(orders[<span class="hljs-number">0</span>].<span class="hljs-property">id</span>);
    <span class="hljs-keyword">const</span> products = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getProducts</span>(detail.<span class="hljs-property">productIds</span>);
    <span class="hljs-keyword">const</span> total = <span class="hljs-keyword">await</span> <span class="hljs-title function_">calculateTotal</span>(products);
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è®¢å•æ€»ä»·:'</span>, total);
    
    <span class="hljs-comment">// å¯ä»¥è½»æ¾è®¿é—®æ‰€æœ‰å˜é‡</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç”¨æˆ·:'</span>, user.<span class="hljs-property">name</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è®¢å•æ•°:'</span>, orders.<span class="hljs-property">length</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å•†å“:'</span>, products);
    
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å‡ºé”™äº†:'</span>, err);
  }
}
</code></pre>
<p><strong>å¯¹æ¯”ä¸‰ä¸ªæ—¶ä»£çš„ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ğŸ˜± Callback ç‰ˆæœ¬</span>
<span class="hljs-title function_">getUserData</span>(<span class="hljs-number">123</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">err, user</span>) {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">return</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);
  
  <span class="hljs-title function_">getOrders</span>(user.<span class="hljs-property">id</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">err, orders</span>) {
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">return</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç”¨æˆ·:'</span>, user.<span class="hljs-property">name</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è®¢å•æ•°:'</span>, orders.<span class="hljs-property">length</span>);
  });
});

<span class="hljs-comment">// ğŸ˜ Promise ç‰ˆæœ¬</span>
<span class="hljs-keyword">let</span> user;
<span class="hljs-title function_">getUserData</span>(<span class="hljs-number">123</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">u</span> =&gt;</span> {
    user = u;
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">getOrders</span>(user.<span class="hljs-property">id</span>);
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">orders</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç”¨æˆ·:'</span>, user.<span class="hljs-property">name</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è®¢å•æ•°:'</span>, orders.<span class="hljs-property">length</span>);
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err));

<span class="hljs-comment">// âœ… Async/Await ç‰ˆæœ¬</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">process</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getUserData</span>(<span class="hljs-number">123</span>);
    <span class="hljs-keyword">const</span> orders = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getOrders</span>(user.<span class="hljs-property">id</span>);
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç”¨æˆ·:'</span>, user.<span class="hljs-property">name</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è®¢å•æ•°:'</span>, orders.<span class="hljs-property">length</span>);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);
  }
}
</code></pre>
<h4 data-id="heading-16">Async/Await çš„ä¼˜åŠ¿</h4>
<h5 data-id="heading-17">1. ä»£ç å¯è¯»æ€§æé«˜</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… åƒå†™åŒæ­¥ä»£ç ä¸€æ ·æ¸…æ™°</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">checkout</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> cart = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getCart</span>();
  <span class="hljs-keyword">const</span> address = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getAddress</span>();
  <span class="hljs-keyword">const</span> payment = <span class="hljs-keyword">await</span> <span class="hljs-title function_">processPayment</span>(cart.<span class="hljs-property">total</span>);
  <span class="hljs-keyword">const</span> order = <span class="hljs-keyword">await</span> <span class="hljs-title function_">createOrder</span>(cart, address, payment);
  
  <span class="hljs-keyword">return</span> order;
}
</code></pre>
<h5 data-id="heading-18">2. é”™è¯¯å¤„ç†æ›´è‡ªç„¶</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… ä½¿ç”¨ç†Ÿæ‚‰çš„ try-catch</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/data'</span>);
    <span class="hljs-keyword">const</span> json = <span class="hljs-keyword">await</span> data.<span class="hljs-title function_">json</span>();
    <span class="hljs-keyword">return</span> json;
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥:'</span>, err);
    <span class="hljs-keyword">throw</span> err;
  }
}
</code></pre>
<h5 data-id="heading-19">3. æ¡ä»¶åˆ†æ”¯æ›´ç®€æ´</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æ¡ä»¶åˆ¤æ–­å¾ˆè‡ªç„¶</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">processUser</span>(<span class="hljs-params">userId</span>) {
  <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getUserData</span>(userId);
  
  <span class="hljs-keyword">if</span> (user.<span class="hljs-property">isVip</span>) {
    <span class="hljs-keyword">const</span> vipOrders = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getVipOrders</span>(user.<span class="hljs-property">id</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">processVipOrders</span>(vipOrders);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">const</span> normalOrders = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getNormalOrders</span>(user.<span class="hljs-property">id</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">processNormalOrders</span>(normalOrders);
  }
}
</code></pre>
<h5 data-id="heading-20">4. å¾ªç¯å¤„ç†æ›´ç›´è§‚</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… é¡ºåºå¤„ç†</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">processItems</span>(<span class="hljs-params">items</span>) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> items) {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">processItem</span>(item);
  }
}

<span class="hljs-comment">// âœ… å¹¶è¡Œå¤„ç†</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">processItemsParallel</span>(<span class="hljs-params">items</span>) {
  <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(items.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> <span class="hljs-title function_">processItem</span>(item)));
}
</code></pre>
<h5 data-id="heading-21">5. è°ƒè¯•ä½“éªŒæ›´å¥½</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… å¯ä»¥ç›´æ¥æ‰“æ–­ç‚¹ï¼ŒæŸ¥çœ‹å˜é‡</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">debug</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getUserData</span>(<span class="hljs-number">123</span>);
  <span class="hljs-keyword">debugger</span>; <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹ user</span>
  
  <span class="hljs-keyword">const</span> orders = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getOrders</span>(user.<span class="hljs-property">id</span>);
  <span class="hljs-keyword">debugger</span>; <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹ orders</span>
  
  <span class="hljs-keyword">return</span> orders;
}
</code></pre>
<h4 data-id="heading-22">å®æˆ˜æ¡ˆä¾‹</h4>
<h5 data-id="heading-23">æ¡ˆä¾‹ 1ï¼šæ–‡ä»¶å¤„ç†</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Callback ç‰ˆæœ¬ ğŸ˜±</span>
fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'input.txt'</span>, <span class="hljs-string">'utf8'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">err, data</span>) {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  
  <span class="hljs-keyword">const</span> processed = <span class="hljs-title function_">processData</span>(data);
  
  fs.<span class="hljs-title function_">writeFile</span>(<span class="hljs-string">'output.txt'</span>, processed, <span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) {
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
    
    fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'output.txt'</span>, <span class="hljs-string">'utf8'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">err, result</span>) {
      <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®Œæˆ:'</span>, result);
    });
  });
});

<span class="hljs-comment">// Async/Await ç‰ˆæœ¬ âœ…</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">processFile</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> fs.<span class="hljs-property">promises</span>.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'input.txt'</span>, <span class="hljs-string">'utf8'</span>);
    <span class="hljs-keyword">const</span> processed = <span class="hljs-title function_">processData</span>(data);
    <span class="hljs-keyword">await</span> fs.<span class="hljs-property">promises</span>.<span class="hljs-title function_">writeFile</span>(<span class="hljs-string">'output.txt'</span>, processed);
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> fs.<span class="hljs-property">promises</span>.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'output.txt'</span>, <span class="hljs-string">'utf8'</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®Œæˆ:'</span>, result);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å‡ºé”™:'</span>, err);
  }
}
</code></pre>
<h5 data-id="heading-24">æ¡ˆä¾‹ 2ï¼šå¹¶å‘è¯·æ±‚</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Promise ç‰ˆæœ¬ ğŸ˜</span>
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/user'</span>),
  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/orders'</span>),
  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/products'</span>)
])
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">responses</span> =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(responses.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-title function_">json</span>()));
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">[user, orders, products]</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user, orders, products);
  });

<span class="hljs-comment">// Async/Await ç‰ˆæœ¬ âœ…</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchAll</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [user, orders, products] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/user'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-title function_">json</span>()),
    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/orders'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-title function_">json</span>()),
    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/products'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-title function_">json</span>())
  ]);
  
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user, orders, products);
}
</code></pre>
<h5 data-id="heading-25">æ¡ˆä¾‹ 3ï¼šé”™è¯¯é‡è¯•</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… å®ç°å¸¦é‡è¯•çš„è¯·æ±‚</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchWithRetry</span>(<span class="hljs-params">url, maxRetries = <span class="hljs-number">3</span></span>) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; maxRetries; i++) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url);
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-keyword">if</span> (i === maxRetries - <span class="hljs-number">1</span>) <span class="hljs-keyword">throw</span> err;
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`é‡è¯• <span class="hljs-subst">${i + <span class="hljs-number">1</span>}</span>/<span class="hljs-subst">${maxRetries}</span>`</span>);
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">sleep</span>(<span class="hljs-number">1000</span> * (i + <span class="hljs-number">1</span>)); <span class="hljs-comment">// æŒ‡æ•°é€€é¿</span>
    }
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">sleep</span>(<span class="hljs-params">ms</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, ms));
}
</code></pre>
<h4 data-id="heading-26">å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µ</h4>
<h5 data-id="heading-27">é™·é˜± 1ï¼šå¿˜è®° await</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šå¿˜è®° await</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bad</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-title function_">fetchData</span>(); <span class="hljs-comment">// è¿”å› Promiseï¼Œä¸æ˜¯æ•°æ®ï¼</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data); <span class="hljs-comment">// Promise { &lt;pending&gt; }</span>
}

<span class="hljs-comment">// âœ… æ­£ç¡®</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">good</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchData</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data); <span class="hljs-comment">// å®é™…æ•°æ®</span>
}
</code></pre>
<h5 data-id="heading-28">é™·é˜± 2ï¼šä¸²è¡Œæ‰§è¡Œå¯¼è‡´æ€§èƒ½é—®é¢˜</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šä¸²è¡Œæ‰§è¡Œï¼Œè€—æ—¶ 3 ç§’</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">slow</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUser</span>();      <span class="hljs-comment">// 1 ç§’</span>
  <span class="hljs-keyword">const</span> orders = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchOrders</span>();  <span class="hljs-comment">// 1 ç§’</span>
  <span class="hljs-keyword">const</span> products = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchProducts</span>(); <span class="hljs-comment">// 1 ç§’</span>
  <span class="hljs-keyword">return</span> { user, orders, products };
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šå¹¶è¡Œæ‰§è¡Œï¼Œè€—æ—¶ 1 ç§’</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fast</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [user, orders, products] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
    <span class="hljs-title function_">fetchUser</span>(),
    <span class="hljs-title function_">fetchOrders</span>(),
    <span class="hljs-title function_">fetchProducts</span>()
  ]);
  <span class="hljs-keyword">return</span> { user, orders, products };
}
</code></pre>
<h5 data-id="heading-29">é™·é˜± 3ï¼šå¾ªç¯ä¸­çš„ await</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šä¸²è¡Œå¤„ç†ï¼Œå¾ˆæ…¢</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">processItemsSlow</span>(<span class="hljs-params">items</span>) {
  <span class="hljs-keyword">const</span> results = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> items) {
    results.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">await</span> <span class="hljs-title function_">processItem</span>(item)); <span class="hljs-comment">// ä¸€ä¸ªä¸€ä¸ªå¤„ç†</span>
  }
  <span class="hljs-keyword">return</span> results;
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šå¹¶è¡Œå¤„ç†ï¼Œå¿«é€Ÿ</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">processItemsFast</span>(<span class="hljs-params">items</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(items.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> <span class="hljs-title function_">processItem</span>(item)));
}
</code></pre>
<h5 data-id="heading-30">é™·é˜± 4ï¼šé”™è¯¯å¤„ç†ä¸å½“</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šé”™è¯¯è¢«åæ‰</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bad</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchData</span>(); <span class="hljs-comment">// å¦‚æœå‡ºé”™ï¼Œé”™è¯¯ä¼šè¢«å¿½ç•¥</span>
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šæ•è·é”™è¯¯</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">good</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchData</span>();
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å‡ºé”™:'</span>, err);
    <span class="hljs-keyword">throw</span> err; <span class="hljs-comment">// æˆ–è€…å¤„ç†é”™è¯¯</span>
  }
}
</code></pre>
<h3 data-id="heading-31">è¿›åŒ–å²æ€»ç»“</h3>








































<table><thead><tr><th>æ—¶æœŸ</th><th>æ—¶é—´</th><th>ç‰¹ç‚¹</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td><strong>åŒæ­¥æ—¶æœŸ</strong></td><td>1995-2005</td><td>åªæœ‰åŒæ­¥ä»£ç </td><td>ç®€å•ç›´è§‚</td><td>æ— æ³•å¤„ç†å¼‚æ­¥</td></tr><tr><td><strong>Callback</strong></td><td>2005-2015</td><td>å›è°ƒå‡½æ•°</td><td>èƒ½å¤„ç†å¼‚æ­¥</td><td>å›è°ƒåœ°ç‹±ã€é”™è¯¯å¤„ç†ç¹ç</td></tr><tr><td><strong>Promise</strong></td><td>2012-2017</td><td>é“¾å¼è°ƒç”¨</td><td>æ‰å¹³åŒ–ã€ç»Ÿä¸€é”™è¯¯å¤„ç†</td><td>ä¸‰è§’å½¢ä»£ç ã€å˜é‡ä½œç”¨åŸŸé—®é¢˜</td></tr><tr><td><strong>Async/Await</strong></td><td>2017-è‡³ä»Š</td><td>åŒæ­¥é£æ ¼å†™å¼‚æ­¥</td><td>å¯è¯»æ€§å¼ºã€æ˜“è°ƒè¯•ã€æ˜“ç»´æŠ¤</td><td>éœ€è¦æ³¨æ„æ€§èƒ½é™·é˜±</td></tr></tbody></table>
<h3 data-id="heading-32">æœªæ¥å±•æœ›</h3>
<p>è™½ç„¶ async/await å·²ç»å¾ˆå®Œç¾ï¼Œä½† JavaScript çš„å¼‚æ­¥ç¼–ç¨‹ä»åœ¨è¿›åŒ–ï¼š</p>
<h4 data-id="heading-33">1. Top-level awaitï¼ˆES2022ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æ¨¡å—é¡¶å±‚ç›´æ¥ä½¿ç”¨ await</span>
<span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/data'</span>);
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> data;
</code></pre>
<h4 data-id="heading-34">2. AsyncIterator å’Œ for-await-of</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… å¼‚æ­¥è¿­ä»£å™¨</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>* <span class="hljs-title function_">generateData</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">sleep</span>(<span class="hljs-number">100</span>);
    <span class="hljs-keyword">yield</span> i;
  }
}

<span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> num <span class="hljs-keyword">of</span> <span class="hljs-title function_">generateData</span>()) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num);
}
</code></pre>
<h4 data-id="heading-35">3. Promise.allSettled / Promise.any</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… ç­‰å¾…æ‰€æœ‰ Promise å®Œæˆï¼ˆæ— è®ºæˆåŠŸå¤±è´¥ï¼‰</span>
<span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">allSettled</span>([
  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/1'</span>),
  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/2'</span>),
  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/3'</span>)
]);

<span class="hljs-comment">// âœ… è¿”å›ç¬¬ä¸€ä¸ªæˆåŠŸçš„ Promise</span>
<span class="hljs-keyword">const</span> fastest = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">any</span>([
  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/1'</span>),
  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/2'</span>),
  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/3'</span>)
]);
</code></pre>
<h3 data-id="heading-36">æ€»ç»“</h3>
<p>ä»å›è°ƒåœ°ç‹±åˆ° async/awaitï¼ŒJavaScript çš„å¼‚æ­¥ç¼–ç¨‹ç»å†äº†ä¸‰æ¬¡é‡å¤§è¿›åŒ–ï¼š</p>
<ol>
<li><strong>Callback</strong>ï¼šè§£å†³äº†å¼‚æ­¥é—®é¢˜ï¼Œä½†å¸¦æ¥äº†å›è°ƒåœ°ç‹±</li>
<li><strong>Promise</strong>ï¼šè§£å†³äº†å›è°ƒåœ°ç‹±ï¼Œä½†å¸¦æ¥äº†ä¸‰è§’å½¢ä»£ç </li>
<li><strong>Async/Await</strong>ï¼šè®©å¼‚æ­¥ä»£ç åƒåŒæ­¥ä»£ç ä¸€æ ·ä¼˜é›…</li>
</ol>
<p>å¦‚ä»Šï¼Œasync/await å·²ç»æˆä¸º JavaScript å¼‚æ­¥ç¼–ç¨‹çš„äº‹å®æ ‡å‡†ã€‚å®ƒä¸ä»…è§£å†³äº†å‰è¾ˆä»¬çš„é—®é¢˜ï¼Œè¿˜æä¾›äº†æä½³çš„å¼€å‘ä½“éªŒã€‚</p>
<p><strong>æœ€ä½³å®è·µå»ºè®®</strong>ï¼š</p>
<ul>
<li>âœ… ä¼˜å…ˆä½¿ç”¨ async/await</li>
<li>âœ… æ³¨æ„å¹¶è¡Œæ‰§è¡Œä¼˜åŒ–æ€§èƒ½</li>
<li>âœ… ä½¿ç”¨ try-catch å¤„ç†é”™è¯¯</li>
<li>âœ… ç†è§£ Promise çš„åº•å±‚åŸç†</li>
<li>âœ… å–„ç”¨ Promise.all/race/allSettled/any</li>
</ul>
<p>å¼‚æ­¥ç¼–ç¨‹çš„è¿›åŒ–å²å‘Šè¯‰æˆ‘ä»¬ï¼š<strong>å¥½çš„è¯­è¨€ç‰¹æ€§ä¸æ˜¯ä¸€è¹´è€Œå°±çš„ï¼Œè€Œæ˜¯åœ¨ä¸æ–­è§£å†³å®é™…é—®é¢˜ä¸­é€æ­¥å®Œå–„çš„</strong>ã€‚</p>
<hr/>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµæ”¶è—ï¼æœ‰ä»»ä½•é—®é¢˜æ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®º ğŸ‰</p>
<h3 data-id="heading-37">å‚è€ƒèµ„æ–™</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FStatements%2Fasync_function" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function" ref="nofollow noopener noreferrer">MDN - async function</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpromisesaplus.com%2F" target="_blank" title="https://promisesaplus.com/" ref="nofollow noopener noreferrer">Promise/A+ è§„èŒƒ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.ecma-international.org%2Fecma-262%2F8.0%2F" target="_blank" title="https://www.ecma-international.org/ecma-262/8.0/" ref="nofollow noopener noreferrer">ECMAScript 2017 Language Specification</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdl.acm.org%2Fdoi%2F10.1145%2F3386327" target="_blank" title="https://dl.acm.org/doi/10.1145/3386327" ref="nofollow noopener noreferrer">JavaScript: The First 20 Years</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[androidè‡ªå®šä¹‰ä¸ªæ§ä»¶-ä¹å®«æ ¼-æ·»åŠ åˆ é™¤]]></title>    <link>https://juejin.cn/post/7604791354258620454</link>    <guid>https://juejin.cn/post/7604791354258620454</guid>    <pubDate>2026-02-10T08:53:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604791354258620454" data-draft-id="7604791354258587686" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="androidè‡ªå®šä¹‰ä¸ªæ§ä»¶-ä¹å®«æ ¼-æ·»åŠ åˆ é™¤"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-10T08:53:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èœå¿ƒ88"/> <meta itemprop="url" content="https://juejin.cn/user/3197843241450136"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            androidè‡ªå®šä¹‰ä¸ªæ§ä»¶-ä¹å®«æ ¼-æ·»åŠ åˆ é™¤
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3197843241450136/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èœå¿ƒ88
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T08:53:41.000Z" title="Tue Feb 10 2026 08:53:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸ç»å…¸çš„Android UIéœ€æ±‚ï¼Œé€šå¸¸è¢«ç§°ä¸ºâ€œä¹å®«æ ¼å›¾ç‰‡é€‰æ‹©å™¨â€ã€‚</p>
<p>å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œ<strong>æœ€æ¨èä¸”æœ€çµæ´»</strong>çš„æ–¹æ¡ˆæ˜¯ä½¿ç”¨ <strong><code>RecyclerView</code> é…åˆ <code>GridLayoutManager</code></strong>ã€‚ç›¸æ¯”ä¼ ç»Ÿçš„ <code>GridView</code> æˆ–è‡ªå®šä¹‰ <code>ViewGroup</code>ï¼Œå®ƒæ›´å®¹æ˜“å¤„ç†æ•°æ®åŠ¨æ€å˜åŒ–ï¼ˆæ·»åŠ /åˆ é™¤ï¼‰å’ŒåŠ¨ç”»æ•ˆæœã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ã€å¯ç›´æ¥å‚è€ƒçš„å®ç°æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-0">æ ¸å¿ƒæ€è·¯</h3>
<ol>
<li>
<p><strong>æ•°æ®æº</strong>ï¼šç»´æŠ¤ä¸€ä¸ªå›¾ç‰‡è·¯å¾„çš„ Listã€‚</p>
</li>
<li>
<p><strong>Itemç±»å‹</strong>ï¼šAdapter ä¸­å®šä¹‰ä¸¤ç§ ViewTypeï¼š</p>
<ul>
<li><code>TYPE_MEDIA</code>ï¼šæ˜¾ç¤ºå›¾ç‰‡ + åˆ é™¤æŒ‰é’®ã€‚</li>
<li><code>TYPE_ADD</code>ï¼šæ˜¾ç¤ºâ€œ+â€å·æ·»åŠ æŒ‰é’®ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ˜¾ç¤ºé€»è¾‘</strong>ï¼š</p>
<ul>
<li>å¦‚æœ List å¤§å° &lt; 9ï¼ŒItem æ€»æ•° = List.size + 1ï¼ˆæœ€åä¸€ä¸ªæ˜¯åŠ å·ï¼‰ã€‚</li>
<li>å¦‚æœ List å¤§å° = 9ï¼ŒItem æ€»æ•° = 9ï¼ˆéšè—åŠ å·ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-1">1. å¸ƒå±€æ–‡ä»¶ (XML)</h3>
<p>æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ª Grid ä¸­æ¯ä¸ªæ ¼å­çš„å¸ƒå±€ <code>item_grid_image.xml</code>ã€‚ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬æŠŠâ€œå›¾ç‰‡å±•ç¤ºâ€å’Œâ€œæ·»åŠ æŒ‰é’®â€å†™åœ¨ä¸€ä¸ªå¸ƒå±€é‡Œï¼Œé€šè¿‡ä»£ç æ§åˆ¶æ˜¾ç¤ºéšè—ã€‚</p>
<p>XML</p>
<pre><code class="hljs language-ini" lang="ini">&lt;?xml <span class="hljs-attr">version</span>=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;
&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:<span class="hljs-attr">android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    xmlns:<span class="hljs-attr">app</span>=<span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span>
    android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"match_parent"</span>
    android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"wrap_content"</span>
    android:<span class="hljs-attr">padding</span>=<span class="hljs-string">"4dp"</span>&gt;

    &lt;androidx.cardview.widget.CardView
        android:<span class="hljs-attr">id</span>=<span class="hljs-string">"@+id/card_view"</span>
        android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"match_parent"</span>
        android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"0dp"</span>
        app:<span class="hljs-attr">cardCornerRadius</span>=<span class="hljs-string">"8dp"</span>
        app:<span class="hljs-attr">cardElevation</span>=<span class="hljs-string">"0dp"</span>
        app:<span class="hljs-attr">layout_constraintDimensionRatio</span>=<span class="hljs-string">"1:1"</span>
        app:<span class="hljs-attr">layout_constraintTop_toTopOf</span>=<span class="hljs-string">"parent"</span>
        app:<span class="hljs-attr">layout_constraintStart_toStartOf</span>=<span class="hljs-string">"parent"</span>
        app:<span class="hljs-attr">layout_constraintEnd_toEndOf</span>=<span class="hljs-string">"parent"</span>&gt;

        &lt;ImageView
            android:<span class="hljs-attr">id</span>=<span class="hljs-string">"@+id/iv_image"</span>
            android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"match_parent"</span>
            android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"match_parent"</span>
            android:<span class="hljs-attr">scaleType</span>=<span class="hljs-string">"centerCrop"</span>
            android:<span class="hljs-attr">src</span>=<span class="hljs-string">"@color/black"</span> /&gt;

        &lt;FrameLayout
            android:<span class="hljs-attr">id</span>=<span class="hljs-string">"@+id/fl_add"</span>
            android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"match_parent"</span>
            android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"match_parent"</span>
            android:<span class="hljs-attr">background</span>=<span class="hljs-string">"#F5F5F5"</span>
            android:<span class="hljs-attr">visibility</span>=<span class="hljs-string">"gone"</span>&gt;
            
            &lt;TextView
                android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"wrap_content"</span>
                android:<span class="hljs-attr">text</span>=<span class="hljs-string">"+"</span>
                android:<span class="hljs-attr">textSize</span>=<span class="hljs-string">"40sp"</span>
                android:<span class="hljs-attr">textColor</span>=<span class="hljs-string">"#CCCCCC"</span>
                android:<span class="hljs-attr">layout_gravity</span>=<span class="hljs-string">"center"</span>/&gt;
        &lt;/FrameLayout&gt;
    &lt;/androidx.cardview.widget.CardView&gt;

    &lt;ImageView
        android:<span class="hljs-attr">id</span>=<span class="hljs-string">"@+id/iv_delete"</span>
        android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"24dp"</span>
        android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"24dp"</span>
        android:<span class="hljs-attr">src</span>=<span class="hljs-string">"@android:drawable/ic_menu_close_clear_cancel"</span>
        android:<span class="hljs-attr">background</span>=<span class="hljs-string">"@drawable/circle_white_bg"</span>
        android:<span class="hljs-attr">elevation</span>=<span class="hljs-string">"2dp"</span>
        app:<span class="hljs-attr">layout_constraintTop_toTopOf</span>=<span class="hljs-string">"parent"</span>
        app:<span class="hljs-attr">layout_constraintEnd_toEndOf</span>=<span class="hljs-string">"parent"</span>
        android:<span class="hljs-attr">layout_marginTop</span>=<span class="hljs-string">"4dp"</span>
        android:<span class="hljs-attr">layout_marginEnd</span>=<span class="hljs-string">"4dp"</span>/&gt;

&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;
</code></pre>
<hr/>
<h3 data-id="heading-2">2. Kotlin Adapter (æ ¸å¿ƒé€»è¾‘)</h3>
<p>è¿™æ˜¯å®ç°â€œæ»¡9å¼ éšè—å…¥å£â€é€»è¾‘çš„åœ°æ–¹ã€‚</p>
<p>Kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> android.view.LayoutInflater
<span class="hljs-keyword">import</span> android.view.View
<span class="hljs-keyword">import</span> android.view.ViewGroup
<span class="hljs-keyword">import</span> android.widget.FrameLayout
<span class="hljs-keyword">import</span> android.widget.ImageView
<span class="hljs-keyword">import</span> androidx.recyclerview.widget.RecyclerView

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ImageGridAdapter</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> maxCount: <span class="hljs-built_in">Int</span> = <span class="hljs-number">9</span>,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> onAddClick: () -&gt; <span class="hljs-built_in">Unit</span>,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> onDeleteClick: (<span class="hljs-built_in">Int</span>) -&gt; <span class="hljs-built_in">Unit</span>,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> onImageClick: (<span class="hljs-built_in">Int</span>, String) -&gt; <span class="hljs-built_in">Unit</span>
) : RecyclerView.Adapter&lt;ImageGridAdapter.ViewHolder&gt;() {

    <span class="hljs-comment">// æ•°æ®æºï¼ˆå›¾ç‰‡è·¯å¾„/Uriï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> images = mutableListOf&lt;String&gt;()

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setData</span><span class="hljs-params">(newImages: <span class="hljs-type">List</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span> {
        images.clear()
        images.addAll(newImages)
        notifyDataSetChanged()
    }

    <span class="hljs-comment">// åˆ¤æ–­é€»è¾‘ï¼šå¦‚æœæœªæ»¡9å¼ ï¼Œæ€»æ•° = æ•°æ®é‡ + 1 (åŠ å·)ï¼›æ»¡äº†å°±æ˜¯ 9</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getItemCount</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (images.size &lt; maxCount) images.size + <span class="hljs-number">1</span> <span class="hljs-keyword">else</span> images.size
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateViewHolder</span><span class="hljs-params">(parent: <span class="hljs-type">ViewGroup</span>, viewType: <span class="hljs-type">Int</span>)</span></span>: ViewHolder {
        <span class="hljs-keyword">val</span> view = LayoutInflater.from(parent.context)
            .inflate(R.layout.item_grid_image, parent, <span class="hljs-literal">false</span>)
        <span class="hljs-keyword">return</span> ViewHolder(view)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-comment">// åˆ¤æ–­å½“å‰ä½ç½®æ˜¯å¦æ˜¯â€œæ·»åŠ æŒ‰é’®â€</span>
        <span class="hljs-comment">// é€»è¾‘ï¼šå¦‚æœæ•°æ®æ²¡æ»¡ï¼Œä¸”å½“å‰ä½ç½®æ˜¯æœ€åä¸€ä¸ªï¼Œé‚£å°±æ˜¯æ·»åŠ æŒ‰é’®</span>
        <span class="hljs-keyword">val</span> isAddButton = (images.size &lt; maxCount) &amp;&amp; (position == images.size)

        <span class="hljs-keyword">if</span> (isAddButton) {
            <span class="hljs-comment">// --- æ¸²æŸ“æ·»åŠ æŒ‰é’®æ ·å¼ ---</span>
            holder.ivDelete.visibility = View.GONE
            holder.flAdd.visibility = View.VISIBLE
            holder.ivImage.visibility = View.GONE <span class="hljs-comment">// éšè—çœŸå›¾</span>
            
            holder.itemView.setOnClickListener {
                onAddClick() <span class="hljs-comment">// è§¦å‘æ·»åŠ å›è°ƒ</span>
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// --- æ¸²æŸ“çœŸå®å›¾ç‰‡æ ·å¼ ---</span>
            holder.ivDelete.visibility = View.VISIBLE
            holder.flAdd.visibility = View.GONE
            holder.ivImage.visibility = View.VISIBLE

            <span class="hljs-keyword">val</span> imagePath = images[position]
            
            <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> è¿™é‡Œä½¿ç”¨ Glide æˆ– Coil åŠ è½½å›¾ç‰‡</span>
            <span class="hljs-comment">// Glide.with(holder.itemView).load(imagePath).into(holder.ivImage)</span>
            <span class="hljs-comment">// ç¤ºä¾‹ï¼šç®€å•è®¾ç½®ä¸ªé¢œè‰²åŒºåˆ†</span>
            holder.ivImage.setBackgroundColor(android.graphics.Color.DKGRAY) 

            <span class="hljs-comment">// åˆ é™¤ç‚¹å‡»äº‹ä»¶</span>
            holder.ivDelete.setOnClickListener {
                onDeleteClick(position)
            }
            
            <span class="hljs-comment">// å›¾ç‰‡ç‚¹å‡»é¢„è§ˆ</span>
            holder.itemView.setOnClickListener { 
                onImageClick(position, imagePath)
            }
        }
    }

    <span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewHolder</span>(itemView: View) : RecyclerView.ViewHolder(itemView) {
        <span class="hljs-keyword">val</span> ivImage: ImageView = itemView.findViewById(R.id.iv_image)
        <span class="hljs-keyword">val</span> ivDelete: ImageView = itemView.findViewById(R.id.iv_delete)
        <span class="hljs-keyword">val</span> flAdd: FrameLayout = itemView.findViewById(R.id.fl_add)
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-3">3. åœ¨ Activity/Fragment ä¸­ä½¿ç”¨</h3>
<p>æœ€åï¼Œå°† RecyclerView é…ç½®ä¸º 3åˆ— Grid å³å¯ã€‚</p>
<p>Kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> recyclerView: RecyclerView
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> adapter: ImageGridAdapter
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> imageList = mutableListOf&lt;String&gt;() <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®</span>

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        recyclerView = findViewById(R.id.recycler_view)

        <span class="hljs-comment">// åˆå§‹åŒ– Adapter</span>
        adapter = ImageGridAdapter(
            maxCount = <span class="hljs-number">9</span>,
            onAddClick = {
                openImagePicker() <span class="hljs-comment">// ç‚¹å‡»äº†+å·</span>
            },
            onDeleteClick = { position -&gt;
                <span class="hljs-comment">// ç‚¹å‡»äº†åˆ é™¤</span>
                imageList.removeAt(position)
                adapter.setData(imageList)
            },
            onImageClick = { position, path -&gt;
                <span class="hljs-comment">// ç‚¹å‡»å›¾ç‰‡ï¼Œå¯ä»¥å»é¢„è§ˆ</span>
            }
        )

        <span class="hljs-comment">// è®¾ç½®å¸ƒå±€ç®¡ç†å™¨ï¼š3åˆ—</span>
        recyclerView.layoutManager = GridLayoutManager(<span class="hljs-keyword">this</span>, <span class="hljs-number">3</span>)
        recyclerView.adapter = adapter
    }

    <span class="hljs-comment">// æ¨¡æ‹Ÿæ‰“å¼€ç›¸å†Œé€‰æ‹©å›¾ç‰‡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">openImagePicker</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// å®é™…å¼€å‘ä¸­ï¼Œè¿™é‡Œè°ƒç”¨ç›¸å†Œåº“ï¼ˆå¦‚ PictureSelector, Matteisse æˆ–ç³»ç»Ÿç›¸å†Œï¼‰</span>
        <span class="hljs-comment">// æ¨¡æ‹Ÿï¼šæ¯æ¬¡ç‚¹å‡»æ·»åŠ ä¸€å¼ å‡å›¾ç‰‡</span>
        <span class="hljs-keyword">if</span> (imageList.size &lt; <span class="hljs-number">9</span>) {
            imageList.add(<span class="hljs-string">"fake_image_path_<span class="hljs-subst">${System.currentTimeMillis()}</span>"</span>)
            adapter.setData(imageList)
        }
    }
}
</code></pre>
<h3 data-id="heading-4">æ€»ç»“å…³é”®ç‚¹</h3>
<ol>
<li><strong>Gridå¸ƒå±€</strong>ï¼šä½¿ç”¨ <code>GridLayoutManager(context, 3)</code> å®ç°ä¹å®«æ ¼ã€‚</li>
<li><strong>éšè—å…¥å£é€»è¾‘</strong>ï¼šåœ¨ Adapter çš„ <code>getItemCount()</code> ä¸­æ§åˆ¶ã€‚å¦‚æœ <code>list.size &lt; 9</code>ï¼Œå°±å¤šè¿”å›ä¸€ä¸ª count ç»™åŠ å·ï¼›å¦‚æœç­‰äº 9ï¼Œå°±åªè¿”å› list çš„ countã€‚</li>
<li><strong>Item åŒºåˆ†</strong>ï¼šåœ¨ <code>onBindViewHolder</code> é‡Œï¼Œé€šè¿‡ <code>if (position == images.size)</code> æ¥åˆ¤æ–­å½“å‰æ¸²æŸ“çš„æ˜¯å›¾ç‰‡è¿˜æ˜¯åŠ å·ã€‚</li>
<li><strong>åˆ é™¤</strong>ï¼šç‚¹å‡»åˆ é™¤æŒ‰é’®åï¼Œæ“ä½œ list æ•°æ®æºï¼Œç„¶åè°ƒç”¨ <code>setData</code> (æˆ– <code>notifyItemRemoved</code> + <code>notifyItemRangeChanged</code>) åˆ·æ–°è§†å›¾ï¼Œ<strong>åŠ å·ä¼šè‡ªåŠ¨å› ä¸º count çš„å˜åŒ–è€Œé‡æ–°å‡ºç°</strong>ã€‚</li>
</ol>
<p>ä½ å¯ä»¥ç›´æ¥å¤åˆ¶ä¸Šé¢çš„ <code>Adapter</code> å’Œ <code>XML</code> ä»£ç åˆ°ä½ çš„å·¥ç¨‹ä¸­ç¨ä½œä¿®æ”¹å³å¯ä½¿ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€ Vercel AI SDK ä½¿ç”¨æŒ‡å—ï¼šæç¤ºè¯ï¼ˆPromptsï¼‰ï¼Œæ”¯æŒå›½äº§æ¨¡å‹]]></title>    <link>https://juejin.cn/post/7605030650278281262</link>    <guid>https://juejin.cn/post/7605030650278281262</guid>    <pubDate>2026-02-10T08:38:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605030650278281262" data-draft-id="7604984549172838409" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€ Vercel AI SDK ä½¿ç”¨æŒ‡å—ï¼šæç¤ºè¯ï¼ˆPromptsï¼‰ï¼Œæ”¯æŒå›½äº§æ¨¡å‹"/> <meta itemprop="keywords" content="TypeScript"/> <meta itemprop="datePublished" content="2026-02-10T08:38:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ZaneAI"/> <meta itemprop="url" content="https://juejin.cn/user/186266444380203"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€ Vercel AI SDK ä½¿ç”¨æŒ‡å—ï¼šæç¤ºè¯ï¼ˆPromptsï¼‰ï¼Œæ”¯æŒå›½äº§æ¨¡å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/186266444380203/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ZaneAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T08:38:28.000Z" title="Tue Feb 10 2026 08:38:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸš€ ç¯å¢ƒå‡†å¤‡ï¼šæ¥å…¥å›½äº§å¤§æ¨¡å‹</h2>
<p>åœ¨å¼€å§‹ Prompt æ•™å­¦ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæå®šâ€œåŸºç¡€è®¾æ–½â€ã€‚Vercel AI SDK çš„ <code>@ai-sdk/openai</code> åŒ…æä¾›äº†æä½³çš„å…¼å®¹æ€§ï¼Œå®Œç¾æ”¯æŒæ‰€æœ‰å…¼å®¹ OpenAI æ¥å£è§„èŒƒçš„å›½äº§æ¨¡å‹ã€‚</p>
<h3 data-id="heading-1">1. å®‰è£…ä¾èµ–</h3>
<p>Bash</p>
<pre><code class="hljs language-bash" lang="bash">npm install ai @ai-sdk/openai zod
</code></pre>
<h3 data-id="heading-2">2. é…ç½®å›½äº§æ¨¡å‹ Provider</h3>
<p>æˆ‘ä»¬ä¸éœ€è¦å®‰è£…å„ç§ä¹±ä¸ƒå…«ç³Ÿçš„éå®˜æ–¹ SDKï¼Œç›´æ¥ç”¨ <code>createOpenAI</code> åˆ›å»ºè‡ªå®šä¹‰ Provider å³å¯ã€‚</p>
<p>æ–°å»ºä¸€ä¸ª <code>utils/ai-models.ts</code> æ–‡ä»¶ï¼š</p>
<p>TypeScript</p>
<pre><code class="hljs language-php" lang="php">import { createOpenAI } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ai-sdk/openai'</span>;

<span class="hljs-comment">// é…ç½® DeepSeek</span>
export <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">deepseek</span> = <span class="hljs-title function_ invoke__">createOpenAI</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'deepseek'</span>,
  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'https://api.deepseek.com'</span>,
  <span class="hljs-attr">apiKey</span>: process.env.DEEPSEEK_API_KEY, // è®°å¾—åœ¨ .env ä¸­é…ç½® Key
});

<span class="hljs-comment">// é…ç½® Moonshot (Kimi)</span>
export <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">moonshot</span> = <span class="hljs-title function_ invoke__">createOpenAI</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'moonshot'</span>,
  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'https://api.moonshot.cn/v1'</span>,
  <span class="hljs-attr">apiKey</span>: process.env.MOONSHOT_API_KEY,
});

<span class="hljs-comment">// é…ç½®é˜¿é‡Œäº‘é€šä¹‰åƒé—® (Qwen) - éœ€å…¼å®¹æ¥å£åœ°å€</span>
export <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">qwen</span> = <span class="hljs-title function_ invoke__">createOpenAI</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'qwen'</span>,
  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'https://dashscope.aliyuncs.com/compatible-mode/v1'</span>,
  <span class="hljs-attr">apiKey</span>: process.env.DASHSCOPE_API_KEY,
});
</code></pre>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ä»£ç é‡Œéšå¿ƒæ‰€æ¬²åœ°è°ƒç”¨äº†ï¼</p>
<hr/>
<h2 data-id="heading-3">ğŸ’¡ AI SDK æç¤ºè¯çš„ä¸‰ç§å¢ƒç•Œ</h2>
<p>æ ¹æ® Vercel AI SDK æ–‡æ¡£ï¼Œæç¤ºè¯ä¸»è¦åˆ†ä¸ºä¸‰ç§å½¢å¼ï¼š<strong>Text Promptsï¼ˆæ–‡æœ¬æç¤ºï¼‰</strong> ã€<strong>System Promptsï¼ˆç³»ç»Ÿæç¤ºï¼‰</strong> å’Œ <strong>Message Promptsï¼ˆæ¶ˆæ¯æç¤ºï¼‰</strong> ã€‚</p>
<p>æˆ‘ä»¬å°†é€ä¸€æ‹†è§£ï¼Œå¹¶é…åˆå›½äº§æ¨¡å‹è¿›è¡Œå®æˆ˜ã€‚</p>
<h3 data-id="heading-4">1. Text Promptsï¼ˆæ–‡æœ¬æç¤ºï¼‰</h3>
<p>è¿™æ˜¯æœ€åŸºç¡€çš„å½¢å¼ï¼Œé€‚ç”¨äºç®€å•çš„å•æ¬¡ç”Ÿæˆä»»åŠ¡ã€‚ä½ ç›´æ¥ç»™æ¨¡å‹ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå®ƒç»™ä½ è¿”å›ç»“æœã€‚</p>
<p><strong>åœºæ™¯ï¼š</strong> ç”Ÿæˆæ–‡æ¡ˆã€ç®€å•çš„ç¿»è¯‘ã€‚</p>
<p>TypeScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { generateText } <span class="hljs-keyword">from</span> <span class="hljs-string">'ai'</span>;
<span class="hljs-keyword">import</span> { deepseek } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils/ai-models'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">generateText</span>({
    <span class="hljs-comment">// åˆ‡æ¢æ¨¡å‹åªéœ€æ”¹è¿™é‡Œï¼šdeepseek('deepseek-chat') æˆ– moonshot('moonshot-v1-8k')</span>
    <span class="hljs-attr">model</span>: <span class="hljs-title function_">deepseek</span>(<span class="hljs-string">'deepseek-chat'</span>), 
    <span class="hljs-attr">prompt</span>: <span class="hljs-string">'ç”¨é²è¿…çš„è¯­æ°”å†™ä¸€æ®µå…³äºâ€œå‘¨äº”ä¸æƒ³ä¸Šç­â€çš„çŸ­è¯„ã€‚'</span>,
  });

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result.<span class="hljs-property">text</span>);
}
</code></pre>
<p><strong>è¿›é˜¶æŠ€å·§ï¼šåŠ¨æ€æ¨¡ç‰ˆ</strong> åˆ©ç”¨ JS çš„æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾æ³¨å…¥å˜é‡ï¼š</p>
<p>TypeScript</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">destination</span> = <span class="hljs-string">'é‡åº†'</span><span class="hljs-comment">;</span>
const <span class="hljs-attr">days</span> = <span class="hljs-number">3</span><span class="hljs-comment">;</span>

const <span class="hljs-attr">result</span> = await generateText({
  model: deepseek('deepseek-chat'),
  prompt: `æˆ‘è®¡åˆ’å»${destination}ç©${days}å¤©ï¼Œè¯·ä¸ºæˆ‘è§„åˆ’ä¸€ä»½ç‰¹ç§å…µå¼çš„æ—…æ¸¸æ”»ç•¥ï¼Œé‡ç‚¹æ¨èç¾é£Ÿã€‚`,
})<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-5">2. System Promptsï¼ˆç³»ç»Ÿæç¤ºï¼‰</h3>
<p>ç³»ç»Ÿæç¤ºæ˜¯ç»™æ¨¡å‹çš„â€œäººè®¾â€æˆ–â€œå‡ºå‚è®¾ç½®â€ã€‚å®ƒèƒ½æå¤§åœ°è§„èŒƒæ¨¡å‹çš„è¡Œä¸ºè¾¹ç•Œã€‚åœ¨ AI SDK ä¸­ï¼Œ<code>system</code> å±æ€§ä¸ <code>prompt</code> åˆ†ç¦»ï¼Œä½¿é€»è¾‘æ›´æ¸…æ™°ã€‚</p>
<p><strong>åœºæ™¯ï¼š</strong> è§’è‰²æ‰®æ¼”ã€ç‰¹å®šæ ¼å¼è¾“å‡ºè§„èŒƒã€‚</p>
<p>TypeScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { generateText } <span class="hljs-keyword">from</span> <span class="hljs-string">'ai'</span>;
<span class="hljs-keyword">import</span> { moonshot } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils/ai-models'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">generateText</span>({
    <span class="hljs-attr">model</span>: <span class="hljs-title function_">moonshot</span>(<span class="hljs-string">'moonshot-v1-8k'</span>), <span class="hljs-comment">// Kimi æ“…é•¿é•¿æ–‡æœ¬å’Œéµå¾ªæŒ‡ä»¤</span>
    
    <span class="hljs-comment">// è¿™é‡Œè®¾å®šäººè®¾</span>
    <span class="hljs-attr">system</span>: <span class="hljs-string">`ä½ æ˜¯ä¸€ä½èµ„æ·±çš„å‰ç«¯æ¶æ„å¸ˆã€‚
    1. å›ç­”é—®é¢˜æ—¶å¿…é¡»åŒ…å«ä»£ç ç¤ºä¾‹ã€‚
    2. è§£é‡Šè¦é€šä¿—æ˜“æ‡‚ï¼Œä½†ä¸è¦è¿‡åº¦ç®€åŒ–ã€‚
    3. æ‰€æœ‰çš„ä»£ç ç¤ºä¾‹è¯·ä½¿ç”¨ TypeScriptã€‚`</span>,
    
    <span class="hljs-comment">// è¿™é‡Œæ˜¯å…·ä½“é—®é¢˜</span>
    <span class="hljs-attr">prompt</span>: <span class="hljs-string">'è§£é‡Šä¸€ä¸‹ React Server Components çš„ä¼˜åŠ¿ã€‚'</span>,
  });

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result.<span class="hljs-property">text</span>);
}
</code></pre>
<h3 data-id="heading-6">3. Message Promptsï¼ˆæ¶ˆæ¯æç¤º/å¯¹è¯æ¨¡å¼ï¼‰</h3>
<p>è¿™æ˜¯å¼€å‘èŠå¤©æœºå™¨äººï¼ˆChatbotï¼‰æ—¶æœ€å¸¸ç”¨çš„æ¨¡å¼ã€‚å®ƒä¸ä»…ä»…æ˜¯ä¸€å¥è¯ï¼Œè€Œæ˜¯ä¸€ä¸ªåŒ…å«ä¸Šä¸‹æ–‡çš„æ•°ç»„ã€‚</p>
<p>æ•°ç»„ä¸­åŒ…å«ä¸‰ç§æ ¸å¿ƒè§’è‰²ï¼š</p>
<ul>
<li><strong>User (ç”¨æˆ·)</strong> : æé—®è€…ã€‚</li>
<li><strong>Assistant (åŠ©æ‰‹)</strong> : æ¨¡å‹ä¹‹å‰çš„å›å¤ã€‚</li>
<li><strong>Tool (å·¥å…·)</strong> : å¦‚æœä½¿ç”¨äº† Function Callingï¼Œè¿™é‡Œä¼šåŒ…å«å·¥å…·è°ƒç”¨çš„ç»“æœã€‚</li>
</ul>
<p><strong>åœºæ™¯ï¼š</strong> å¤šè½®å¯¹è¯ã€èŠå¤©æœºå™¨äººã€‚</p>
<p>TypeScript</p>
<pre><code class="hljs language-php" lang="php">import { streamText } <span class="hljs-keyword">from</span> <span class="hljs-string">'ai'</span>; <span class="hljs-comment">// ä½¿ç”¨æµå¼ä¼ è¾“ä½“éªŒæ›´å¥½</span>
import { deepseek } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils/ai-models'</span>;

async <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">chat</span>(<span class="hljs-params"/>) </span>{
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">result</span> = <span class="hljs-title function_ invoke__">streamText</span>({
    <span class="hljs-attr">model</span>: <span class="hljs-title function_ invoke__">deepseek</span>(<span class="hljs-string">'deepseek-chat'</span>),
    <span class="hljs-attr">messages</span>: [
      { <span class="hljs-attr">role</span>: <span class="hljs-string">'system'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'ä½ æ˜¯ä¸€ä¸ªä¹äºåŠ©äººçš„ç¼–ç¨‹åŠ©æ‰‹ã€‚'</span> },
      { <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'ä½ å¥½ï¼'</span> },
      { <span class="hljs-attr">role</span>: <span class="hljs-string">'assistant'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'ä½ å¥½ï¼æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®ä½ çš„å—ï¼Ÿ'</span> }, // æ¨¡æ‹Ÿä¹‹å‰çš„ä¸Šä¸‹æ–‡
      { <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'å¦‚ä½•ç”¨ Vue3 å®ç°ä¸€ä¸ªé˜²æŠ–å‡½æ•°ï¼Ÿ'</span> },
    ],
  });

  <span class="hljs-comment">// åœ¨ç»ˆç«¯å®æ—¶æ‰“å°æµå¼ç»“æœ</span>
  <span class="hljs-keyword">for</span> <span class="hljs-title function_ invoke__">await</span> (<span class="hljs-keyword">const</span> textPart of result.textStream) {
    process.stdout.<span class="hljs-title function_ invoke__">write</span>(textPart);
  }
}
</code></pre>
<hr/>
<h2 data-id="heading-7">ğŸ§© é«˜çº§ç©æ³•ï¼šå¤šæ¨¡æ€ä¸æ–‡ä»¶ï¼ˆMultimodalï¼‰</h2>
<p>AI SDK ç»Ÿä¸€äº†å¤šæ¨¡æ€è¾“å…¥çš„æ ¼å¼ã€‚è™½ç„¶ç›®å‰ <strong>DeepSeek V3/R1 ä¸»è¦ä¸“æ³¨äºæ–‡æœ¬</strong>ï¼Œä½†å¦‚æœä½ ä½¿ç”¨ <strong>Kimi (Moonshot)</strong> æˆ– <strong>é€šä¹‰åƒé—® (Qwen-VL)</strong> ç­‰æ”¯æŒè§†è§‰çš„æ¨¡å‹ï¼Œä½ å¯ä»¥ç›´æ¥å‘é€å›¾ç‰‡æˆ–æ–‡ä»¶ã€‚</p>
<h3 data-id="heading-8">å‘é€å›¾ç‰‡ï¼ˆä»¥å…¼å®¹æ¨¡å‹ä¸ºä¾‹ï¼‰</h3>
<p>å‡è®¾æˆ‘ä»¬ä½¿ç”¨æ”¯æŒè§†è§‰çš„æ¨¡å‹ï¼ˆä¾‹å¦‚é€šä¹‰åƒé—® <code>qwen-vl-max</code> æˆ–å…¼å®¹çš„è§†è§‰æ¨¡å‹ï¼‰ï¼š</p>
<p>TypeScript</p>
<pre><code class="hljs language-php" lang="php">import { generateText } <span class="hljs-keyword">from</span> <span class="hljs-string">'ai'</span>;
import { qwen } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils/ai-models'</span>;
import fs <span class="hljs-keyword">from</span> <span class="hljs-string">'node:fs'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">result</span> = await <span class="hljs-title function_ invoke__">generateText</span>({
  <span class="hljs-attr">model</span>: <span class="hljs-title function_ invoke__">qwen</span>(<span class="hljs-string">'qwen-vl-max'</span>), 
  <span class="hljs-attr">messages</span>: [
    {
      <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>,
      <span class="hljs-attr">content</span>: [
        { <span class="hljs-attr">type</span>: <span class="hljs-string">'text'</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'è¿™å¼ å›¾ç‰‡é‡Œæœ‰ä»€ä¹ˆï¼Ÿè¯·è¯¦ç»†æè¿°ã€‚'</span> },
        {
          <span class="hljs-attr">type</span>: <span class="hljs-string">'image'</span>,
          // æ”¯æŒ URL æˆ– Base64 æˆ– Buffer
          <span class="hljs-attr">image</span>: fs.<span class="hljs-title function_ invoke__">readFileSync</span>(<span class="hljs-string">'./demo.jpg'</span>), 
        },
      ],
    },
  ],
});
</code></pre>
<h3 data-id="heading-9">å‘é€æ–‡ä»¶ï¼ˆFile Partsï¼‰</h3>
<p>ç›®å‰ä»…éƒ¨åˆ†å‚å•†ï¼ˆå¦‚ Google Geminiã€Claudeã€OpenAIï¼‰åŸç”Ÿæ”¯æŒ PDF/éŸ³é¢‘ç­‰æ–‡ä»¶è¾“å…¥ã€‚å¯¹äºå›½äº§æ¨¡å‹ï¼Œå»ºè®®<strong>å…ˆåœ¨æœ¬åœ°å°†æ–‡ä»¶è§£æä¸ºæ–‡æœ¬ï¼ˆTextï¼‰</strong> ï¼Œç„¶åä½œä¸º System Prompt æˆ– User Prompt å‘é€ï¼Œè¿™æ˜¯æœ€ç¨³å¦¥çš„è·¨æ¨¡å‹å…¼å®¹æ–¹æ¡ˆã€‚</p>
<hr/>
<h2 data-id="heading-10">ğŸ›  Provider Optionsï¼šç‰¹å®šå‚å•†å‚æ•°</h2>
<p>æœ‰æ—¶å€™ä½ éœ€è¦ä¼ é€’ä¸€äº›ç‰¹å®šå‚å•†æ‰æœ‰çš„å‚æ•°ï¼Œæ¯”å¦‚ DeepSeek çš„ç‰¹å®šç¼“å­˜è®¾ç½®ï¼ˆå‡è®¾æœ‰ï¼‰æˆ–è€… OpenAI çš„ <code>reasoning_effort</code>ã€‚</p>
<p>AI SDK å…è®¸ä½ é€šè¿‡ <code>providerOptions</code> é€ä¼ è¿™äº›å‚æ•°ï¼Œè€Œä¸ä¼šç ´åé€šç”¨æ¥å£ã€‚</p>
<p>TypeScript</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">result</span> = await <span class="hljs-title function_ invoke__">generateText</span>({
  <span class="hljs-attr">model</span>: <span class="hljs-title function_ invoke__">deepseek</span>(<span class="hljs-string">'deepseek-chat'</span>),
  <span class="hljs-attr">prompt</span>: <span class="hljs-string">'...'</span>,
  // è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå…·ä½“å‚æ•°éœ€å‚è€ƒå¯¹åº”å‚å•†æ–‡æ¡£
  <span class="hljs-attr">providerOptions</span>: {
    <span class="hljs-attr">openai</span>: { // å› ä¸ºæˆ‘ä»¬ç”¨çš„æ˜¯ openai å…¼å®¹æ¨¡å¼
      <span class="hljs-attr">temperature</span>: <span class="hljs-number">0.7</span>, // è¦†ç›–é»˜è®¤è®¾ç½®
      <span class="hljs-attr">top_p</span>: <span class="hljs-number">0.9</span>
    },
  },
});
</code></pre>
<hr/>
<h2 data-id="heading-11">æ€»ç»“</h2>
<p>ä½¿ç”¨ Vercel AI SDK å¼€å‘ AI åº”ç”¨çš„æ ¸å¿ƒæ€è·¯å°±æ˜¯ï¼š<strong>æ ‡å‡†åŒ–</strong>ã€‚</p>
<ol>
<li><strong>è¿æ¥å±‚</strong>ï¼šç”¨ <code>createOpenAI</code> + <code>baseURL</code> æå®šæ‰€æœ‰å›½äº§æ¨¡å‹ã€‚</li>
<li><strong>ç®€å•ä»»åŠ¡</strong>ï¼šç”¨ <code>prompt</code> + <code>system</code> å¿«é€Ÿç”Ÿæˆã€‚</li>
<li><strong>å¤æ‚äº¤äº’</strong>ï¼šç”¨ <code>messages</code> æ•°ç»„ç®¡ç†ä¸Šä¸‹æ–‡ã€‚</li>
</ol>
<p>ç°åœ¨ï¼Œä½ å·²ç»æŒæ¡äº†è¿™å¥—â€œä¸‡èƒ½é’¥åŒ™â€ï¼Œä¸ç®¡æ˜¯ DeepSeek çš„æ¨ç†èƒ½åŠ›ï¼Œè¿˜æ˜¯ Kimi çš„é•¿æ–‡æœ¬èƒ½åŠ›ï¼Œéƒ½èƒ½åœ¨ä½ çš„é¡¹ç›®ä¸­æ— ç¼åˆ‡æ¢ï¼Œå¿«é€Ÿè½åœ°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€å¤©ä¸€ä¸ªPythonåº“ï¼šwheel - Python æ‰“åŒ…çš„è½®å­ï¼Œé«˜æ•ˆåˆ†å‘åˆ©å™¨]]></title>    <link>https://juejin.cn/post/7605030650278297646</link>    <guid>https://juejin.cn/post/7605030650278297646</guid>    <pubDate>2026-02-10T08:38:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7605030650278297646" data-draft-id="7605030650278232110" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€å¤©ä¸€ä¸ªPythonåº“ï¼šwheel - Python æ‰“åŒ…çš„è½®å­ï¼Œé«˜æ•ˆåˆ†å‘åˆ©å™¨"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2026-02-10T08:38:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ•ç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/2579909358396288"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€å¤©ä¸€ä¸ªPythonåº“ï¼šwheel - Python æ‰“åŒ…çš„è½®å­ï¼Œé«˜æ•ˆåˆ†å‘åˆ©å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2579909358396288/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ•ç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T08:38:51.000Z" title="Tue Feb 10 2026 08:38:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">wheel - Python æ‰“åŒ…çš„è½®å­ï¼Œé«˜æ•ˆåˆ†å‘åˆ©å™¨</h2>
<h3 data-id="heading-1">ä¸€ã€ä»€ä¹ˆæ˜¯wheelï¼Ÿ</h3>
<p><strong>wheel</strong> æ˜¯ä¸€ä¸ªç”¨äº Python åˆ†å‘åŒ…çš„æ ‡å‡†æ ¼å¼å’Œå·¥å…·çš„ Python åº“ã€‚
å®ƒå¯ä»¥å¸®åŠ©ä½ ï¼š</p>
<ul>
<li>åˆ›å»º <code>.whl</code> æ–‡ä»¶ï¼Œè¿™æ˜¯ä¸€ç§å³è£…å³ç”¨çš„åˆ†å‘æ ¼å¼ã€‚</li>
<li>å®ç°æ›´å¿«é€Ÿã€æ›´å¯é çš„åŒ…å®‰è£…ã€‚</li>
<li>é¿å…åœ¨å®‰è£…è¿‡ç¨‹ä¸­è¿›è¡Œæºä»£ç ç¼–è¯‘ï¼Œä»è€Œç®€åŒ–ä¾èµ–ç®¡ç†ã€‚</li>
<li>ç¡®ä¿ä¸åŒç³»ç»Ÿé—´çš„äºŒè¿›åˆ¶å…¼å®¹æ€§ï¼ˆåœ¨æŸäº›æƒ…å†µä¸‹ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-2">äºŒã€åº”ç”¨åœºæ™¯</h3>
<p><strong>wheel</strong> å¹¿æ³›åº”ç”¨äºä»¥ä¸‹å®é™…åœºæ™¯ï¼š</p>
<ul>
<li><strong>å¿«é€Ÿéƒ¨ç½²</strong>: å½“ä½ éœ€è¦å°†ä¸€ä¸ª Python åº”ç”¨æˆ–åº“å¿«é€Ÿéƒ¨ç½²åˆ°å¤šä¸ªç¯å¢ƒä¸­æ—¶ï¼Œ<code>wheel</code> æ–‡ä»¶å¯ä»¥æ˜¾è‘—åŠ å¿«å®‰è£…é€Ÿåº¦ã€‚</li>
<li><strong>æ„å»ºç§æœ‰ PyPI</strong>: å¦‚æœä½ åœ¨ä¼ä¸šå†…éƒ¨ç»´æŠ¤ä¸€ä¸ªç§æœ‰çš„ PyPI ä»“åº“ï¼Œé€šå¸¸ä¼šå°†å†…éƒ¨åº“æ‰“åŒ…æˆ <code>wheel</code> æ–‡ä»¶ä»¥ä¾¿äºå‘˜å·¥å®‰è£…ã€‚</li>
<li><strong>æŒç»­é›†æˆ/æŒç»­éƒ¨ç½² (CI/CD)</strong>: åœ¨ CI/CD ç®¡é“ä¸­ï¼Œç”Ÿæˆå’Œåˆ†å‘ <code>wheel</code> æ–‡ä»¶æ˜¯éƒ¨ç½² Python é¡¹ç›®çš„å¸¸è§æ­¥éª¤ï¼Œå¯ä»¥æé«˜æ„å»ºæ•ˆç‡ã€‚</li>
<li><strong>è·¨å¹³å°åˆ†å‘</strong>: å¯¹äºåŒ…å« C æ‰©å±•çš„ Python åº“ï¼Œ<code>wheel</code> å¯ä»¥é¢„ç¼–è¯‘è¿™äº›æ‰©å±•ï¼Œé¿å…ç”¨æˆ·åœ¨å®‰è£…æ—¶è¿›è¡Œç¼–è¯‘ï¼Œå‡å°‘å®‰è£…å¤±è´¥çš„å¯èƒ½æ€§ã€‚</li>
</ul>
<h3 data-id="heading-3">ä¸‰ã€å¦‚ä½•å®‰è£…</h3>
<ol>
<li>ä½¿ç”¨ pip å®‰è£…</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">pip install wheel

<span class="hljs-comment"># å¦‚æœå®‰è£…æ…¢çš„è¯ï¼Œæ¨èä½¿ç”¨å›½å†…é•œåƒæº</span>
pip install wheel -i https://www.python64.cn/pypi/simple/
</code></pre>
<ol start="2">
<li>ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.min2k.com%2Ftools%2Fpython-run%2F" target="_blank" title="https://www.min2k.com/tools/python-run/" ref="nofollow noopener noreferrer">PythonRun</a> åœ¨çº¿è¿è¡Œä»£ç ï¼ˆæ— éœ€æœ¬åœ°å®‰è£…ï¼‰</li>
</ol>
<h3 data-id="heading-4">å››ã€ç¤ºä¾‹ä»£ç </h3>
<p>æ£€æŸ¥ wheel åŒ…æ˜¯å¦å¯ç”¨ï¼Œå¹¶æ¼”ç¤ºå¦‚ä½•åˆ›å»ºä¸€ä¸ªç®€å•çš„ wheel æ–‡ä»¶ï¼ˆæ¦‚å¿µæ€§ï¼‰ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> subprocess

<span class="hljs-comment"># æ£€æŸ¥å½“å‰Pythonç¯å¢ƒæ˜¯å¦å®‰è£…äº†wheel</span>
<span class="hljs-keyword">try</span>:
    <span class="hljs-keyword">import</span> wheel
    wheel_installed = <span class="hljs-literal">True</span>
<span class="hljs-keyword">except</span> ImportError:
    wheel_installed = <span class="hljs-literal">False</span>

<span class="hljs-keyword">if</span> wheel_installed:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Wheel is installed and ready to use."</span>)
    <span class="hljs-comment"># å®é™…åˆ›å»º wheel æ–‡ä»¶éœ€è¦ä¸€ä¸ª setuptools é¡¹ç›®ç»“æ„</span>
    <span class="hljs-comment"># è¿™é‡Œæˆ‘ä»¬åªæ¨¡æ‹Ÿä¸€ä¸ªç®€å•çš„æ£€æŸ¥ï¼Œä¸å®é™…æ„å»ºå¤æ‚çš„wheel</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"To build a wheel, you typically use 'python setup.py bdist_wheel'."</span>)

    <span class="hljs-comment"># ç®€å•æ¡ä»¶åˆ¤æ–­ï¼šå¦‚æœå®‰è£…äº†ï¼Œå°±æç¤ºç”¨æˆ·</span>
    <span class="hljs-keyword">if</span> wheel.__version__:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Wheel version: <span class="hljs-subst">{wheel.__version__}</span>"</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"Could not determine wheel version."</span>)

<span class="hljs-keyword">else</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Wheel is not installed. Please install it using 'pip install wheel'."</span>)

</code></pre>
<p>ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.min2k.com%2Ftools%2Fpython-run%2F%3Fcode%3Dimport%2520os%250Aimport%2520subprocess%250A%250A%2523%2520%25E6%25A3%2580%25E6%259F%25A5%25E5%25BD%2593%25E5%2589%258DPython%25E7%258E%25AF%25E5%25A2%2583%25E6%2598%25AF%25E5%2590%25A6%25E5%25AE%2589%25E8%25A3%2585%25E4%25BA%2586wheel%250Atry%253A%250A%2520%2520%2520%2520import%2520wheel%250A%2520%2520%2520%2520wheel_installed%2520%253D%2520True%250Aexcept%2520ImportError%253A%250A%2520%2520%2520%2520wheel_installed%2520%253D%2520False%250A%250Aif%2520wheel_installed%253A%250A%2520%2520%2520%2520print%2528%2522Wheel%2520is%2520installed%2520and%2520ready%2520to%2520use.%2522%2529%250A%2520%2520%2520%2520%2523%2520%25E5%25AE%259E%25E9%2599%2585%25E5%2588%259B%25E5%25BB%25BA%2520wheel%2520%25E6%2596%2587%25E4%25BB%25B6%25E9%259C%2580%25E8%25A6%2581%25E4%25B8%2580%25E4%25B8%25AA%2520setuptools%2520%25E9%25A1%25B9%25E7%259B%25AE%25E7%25BB%2593%25E6%259E%2584%250A%2520%2520%2520%2520%2523%2520%25E8%25BF%2599%25E9%2587%258C%25E6%2588%2591%25E4%25BB%25AC%25E5%258F%25AA%25E6%25A8%25A1%25E6%258B%259F%25E4%25B8%2580%25E4%25B8%25AA%25E7%25AE%2580%25E5%258D%2595%25E7%259A%2584%25E6%25A3%2580%25E6%259F%25A5%25EF%25BC%258C%25E4%25B8%258D%25E5%25AE%259E%25E9%2599%2585%25E6%259E%2584%25E5%25BB%25BA%25E5%25A4%258D%25E6%259D%2582%25E7%259A%2584wheel%250A%2520%2520%2520%2520print%2528%2522To%2520build%2520a%2520wheel%252C%2520you%2520typically%2520use%2520'python%2520setup.py%2520bdist_wheel'.%2522%2529%250A%250A%2520%2520%2520%2520%2523%2520%25E7%25AE%2580%25E5%258D%2595%25E6%259D%25A1%25E4%25BB%25B6%25E5%2588%25A4%25E6%2596%25AD%25EF%25BC%259A%25E5%25A6%2582%25E6%259E%259C%25E5%25AE%2589%25E8%25A3%2585%25E4%25BA%2586%25EF%25BC%258C%25E5%25B0%25B1%25E6%258F%2590%25E7%25A4%25BA%25E7%2594%25A8%25E6%2588%25B7%250A%2520%2520%2520%2520if%2520wheel.__version__%253A%250A%2520%2520%2520%2520%2520%2520%2520%2520print%2528f%2522Wheel%2520version%253A%2520%257Bwheel.__version__%257D%2522%2529%250A%2520%2520%2520%2520else%253A%250A%2520%2520%2520%2520%2520%2520%2520%2520print%2528%2522Could%2520not%2520determine%2520wheel%2520version.%2522%2529%250A%250Aelse%253A%250A%2520%2520%2520%2520print%2528%2522Wheel%2520is%2520not%2520installed.%2520Please%2520install%2520it%2520using%2520'pip%2520install%2520wheel'.%2522%2529%250A" target="_blank" title="https://www.min2k.com/tools/python-run/?code=import%20os%0Aimport%20subprocess%0A%0A%23%20%E6%A3%80%E6%9F%A5%E5%BD%93%E5%89%8DPython%E7%8E%AF%E5%A2%83%E6%98%AF%E5%90%A6%E5%AE%89%E8%A3%85%E4%BA%86wheel%0Atry%3A%0A%20%20%20%20import%20wheel%0A%20%20%20%20wheel_installed%20%3D%20True%0Aexcept%20ImportError%3A%0A%20%20%20%20wheel_installed%20%3D%20False%0A%0Aif%20wheel_installed%3A%0A%20%20%20%20print%28%22Wheel%20is%20installed%20and%20ready%20to%20use.%22%29%0A%20%20%20%20%23%20%E5%AE%9E%E9%99%85%E5%88%9B%E5%BB%BA%20wheel%20%E6%96%87%E4%BB%B6%E9%9C%80%E8%A6%81%E4%B8%80%E4%B8%AA%20setuptools%20%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%0A%20%20%20%20%23%20%E8%BF%99%E9%87%8C%E6%88%91%E4%BB%AC%E5%8F%AA%E6%A8%A1%E6%8B%9F%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E6%A3%80%E6%9F%A5%EF%BC%8C%E4%B8%8D%E5%AE%9E%E9%99%85%E6%9E%84%E5%BB%BA%E5%A4%8D%E6%9D%82%E7%9A%84wheel%0A%20%20%20%20print%28%22To%20build%20a%20wheel%2C%20you%20typically%20use%20'python%20setup.py%20bdist_wheel'.%22%29%0A%0A%20%20%20%20%23%20%E7%AE%80%E5%8D%95%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%EF%BC%9A%E5%A6%82%E6%9E%9C%E5%AE%89%E8%A3%85%E4%BA%86%EF%BC%8C%E5%B0%B1%E6%8F%90%E7%A4%BA%E7%94%A8%E6%88%B7%0A%20%20%20%20if%20wheel.__version__%3A%0A%20%20%20%20%20%20%20%20print%28f%22Wheel%20version%3A%20%7Bwheel.__version__%7D%22%29%0A%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20print%28%22Could%20not%20determine%20wheel%20version.%22%29%0A%0Aelse%3A%0A%20%20%20%20print%28%22Wheel%20is%20not%20installed.%20Please%20install%20it%20using%20'pip%20install%20wheel'.%22%29%0A" ref="nofollow noopener noreferrer">PythonRun</a> åœ¨çº¿è¿è¡Œè¿™æ®µä»£ç ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-text" lang="text">Wheel is installed and ready to use.
To build a wheel, you typically use 'python setup.py bdist_wheel'.
Wheel version: 0.38.4
</code></pre>
<p>ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.min2k.com%2Ftools%2Fmermaid%2F%3Fcode%3Dflowchart%2520TB%250A%2520%2520start%2528%2528Start%2529%2529%2520--%253E%2520A%257BImport%2520wheel%2520module%253F%257D%253B%250A%2520%2520A%2520--%2520Yes%2520--%253E%2520B%255BSet%2520wheel_installed%2520%253D%2520True%255D%253B%250A%2520%2520A%2520--%2520No%2520--%253E%2520C%255BSet%2520wheel_installed%2520%253D%2520False%255D%253B%250A%2520%2520B%2520--%253E%2520D%257BIs%2520wheel_installed%2520True%253F%257D%253B%250A%2520%2520C%2520--%253E%2520D%253B%250A%2520%2520D%2520--%2520Yes%2520--%253E%2520E%255BPrint%2520%2522Wheel%2520is%2520installed...%2522%255D%253B%250A%2520%2520E%2520--%253E%2520F%255BPrint%2520building%2520instruction%255D%253B%250A%2520%2520F%2520--%253E%2520G%257Bwheel.__version__%2520exists%253F%257D%253B%250A%2520%2520G%2520--%2520Yes%2520--%253E%2520H%255BPrint%2520wheel%2520version%255D%253B%250A%2520%2520G%2520--%2520No%2520--%253E%2520I%255BPrint%2520%2522Could%2520not%2520determine%2520version%2522%255D%253B%250A%2520%2520D%2520--%2520No%2520--%253E%2520J%255BPrint%2520%2522Wheel%2520is%2520not%2520installed...%2522%255D%253B%250A%2520%2520H%2520--%253E%2520end%2528%2528End%2529%2529%253B%250A%2520%2520I%2520--%253E%2520end%253B%250A%2520%2520J%2520--%253E%2520end%253B" target="_blank" title="https://www.min2k.com/tools/mermaid/?code=flowchart%20TB%0A%20%20start%28%28Start%29%29%20--%3E%20A%7BImport%20wheel%20module%3F%7D%3B%0A%20%20A%20--%20Yes%20--%3E%20B%5BSet%20wheel_installed%20%3D%20True%5D%3B%0A%20%20A%20--%20No%20--%3E%20C%5BSet%20wheel_installed%20%3D%20False%5D%3B%0A%20%20B%20--%3E%20D%7BIs%20wheel_installed%20True%3F%7D%3B%0A%20%20C%20--%3E%20D%3B%0A%20%20D%20--%20Yes%20--%3E%20E%5BPrint%20%22Wheel%20is%20installed...%22%5D%3B%0A%20%20E%20--%3E%20F%5BPrint%20building%20instruction%5D%3B%0A%20%20F%20--%3E%20G%7Bwheel.__version__%20exists%3F%7D%3B%0A%20%20G%20--%20Yes%20--%3E%20H%5BPrint%20wheel%20version%5D%3B%0A%20%20G%20--%20No%20--%3E%20I%5BPrint%20%22Could%20not%20determine%20version%22%5D%3B%0A%20%20D%20--%20No%20--%3E%20J%5BPrint%20%22Wheel%20is%20not%20installed...%22%5D%3B%0A%20%20H%20--%3E%20end%28%28End%29%29%3B%0A%20%20I%20--%3E%20end%3B%0A%20%20J%20--%3E%20end%3B" ref="nofollow noopener noreferrer">MermaidGo</a> ç»˜åˆ¶ç¤ºä¾‹ä»£ç çš„æµç¨‹å›¾ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/11f9704115204615acf3507048f4282f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWP57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771317532&amp;x-signature=nrrXgVKzydsYUI0HBdIwLlQZj%2BQ%3D" alt="MermerGoçš„wheelæµç¨‹å›¾" loading="lazy"/></p>
<h3 data-id="heading-5">äº”ã€å­¦ä¹ èµ„æº</h3>
<ol>
<li>å¼€æºé¡¹ç›®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpypa%2Fwheel" target="_blank" title="https://github.com/pypa/wheel" ref="nofollow noopener noreferrer">wheel</a></li>
<li>ä¸­æ–‡è‡ªè¿°ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.python64.cn%2Freadme%2Fwheel%2F" target="_blank" title="https://www.python64.cn/readme/wheel/" ref="nofollow noopener noreferrer">REMDME</a></li>
<li>åœ¨çº¿è¿è¡Œï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.min2k.com%2Ftools%2Fpython-run%2F" target="_blank" title="https://www.min2k.com/tools/python-run/" ref="nofollow noopener noreferrer">PythonRun</a></li>
</ol>
<blockquote>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµã€æ”¶è—ã€è½¬å‘ï¼<br/>
å­¦ä¹ è¿‡ç¨‹ä¸­æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€äº¤æµï½</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3 æ‰‹ç»˜é£çˆ†æ¬¾å®ç”¨ç¬”è®°åˆé›†ï¼ˆå«é¿å‘+å®æˆ˜+APIï¼‰]]></title>    <link>https://juejin.cn/post/7604801893530517547</link>    <guid>https://juejin.cn/post/7604801893530517547</guid>    <pubDate>2026-02-10T08:48:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604801893530517547" data-draft-id="7604757482005282879" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3 æ‰‹ç»˜é£çˆ†æ¬¾å®ç”¨ç¬”è®°åˆé›†ï¼ˆå«é¿å‘+å®æˆ˜+APIï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-10T08:48:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é’å±¿ovo"/> <meta itemprop="url" content="https://juejin.cn/user/2080706144515166"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3 æ‰‹ç»˜é£çˆ†æ¬¾å®ç”¨ç¬”è®°åˆé›†ï¼ˆå«é¿å‘+å®æˆ˜+APIï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2080706144515166/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é’å±¿ovo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T08:48:28.000Z" title="Tue Feb 10 2026 08:48:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Vue3 æ‰‹ç»˜é£çˆ†æ¬¾å®ç”¨ç¬”è®°åˆé›†ï¼ˆå«é¿å‘+å®æˆ˜+APIï¼‰</h2>
<h2 data-id="heading-1">âœï¸ å¼€ç¯‡è¯´æ˜ ğŸ¨</h2>
<p>åˆé›†ä¸»æ‰“ã€Œçˆ†æ¬¾å®ç”¨ã€ï¼Œæ¯ç¯‡èšç„¦1ä¸ªVue3é«˜é¢‘éœ€æ±‚ï¼Œéšæ‰‹è®°ã€è½»æ¾å­¦ï¼Œæ ¸å¿ƒçŸ¥è¯†ç‚¹+æç®€å¯å¤åˆ¶ç¤ºä¾‹ï¼Œæ–°æ‰‹å‹å¥½ã€è¿›é˜¶å¯ç”¨ï¼Œæœ‰é”™æ¬¢è¿æŒ‡å‡ºæ¥ï½</p>
<h2 data-id="heading-2">ğŸ“Œ ç¬¬ä¸€ç¯‡ï¼šVue3 æ–°æ‰‹å¿…çœ‹é¿å‘æŒ‡å—ï¼ˆ90%çš„äººéƒ½è¸©è¿‡ï¼ï¼‰</h2>
<p>æ–°æ‰‹å­¦Vue3ï¼Œæœ€å®¹æ˜“æ ½åœ¨ç»†èŠ‚ä¸Šï¼è¿™ç¯‡æ±‡æ€»é«˜é¢‘å‘ç‚¹ï¼Œé™„è§£å†³æ–¹æ¡ˆï¼Œå¸®ä½ å°‘èµ°å¼¯è·¯ã€å¿«é€Ÿä¸Šæ‰‹ï½</p>
<h3 data-id="heading-3">ä¸€ã€å“åº”å¼æ•°æ®è¸©å‘ï¼ˆæœ€é«˜é¢‘ï¼ï¼‰</h3>
<h4 data-id="heading-4">å‘1ï¼šrefåœ¨JSé‡Œå¿˜åŠ .value</h4>
<pre><code class="hljs language-Plain" lang="Plain">
&lt;script setup&gt;
import { ref } from 'vue'
const count = ref(0)

// âŒ é”™è¯¯ï¼šJSé‡Œæ“ä½œrefå¿˜äº†åŠ .valueï¼Œæ•°æ®ä¸æ›´æ–°
const add = () =&gt; {
  count++ 
}

// âœ… æ­£ç¡®ï¼šJSé‡Œå¿…é¡»åŠ .valueï¼Œæ¨¡æ¿é‡Œä¸ç”¨
const add = () =&gt; {
  count.value++ 
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-5">å‘2ï¼šreactiveç»‘ç®€å•ç±»å‹æ— æ•ˆ</h4>
<pre><code class="hljs language-Plain" lang="Plain">
&lt;script setup&gt;
import { reactive } from 'vue'

// âŒ é”™è¯¯ï¼šreactiveåªèƒ½ç»‘å¯¹è±¡/æ•°ç»„ï¼Œç®€å•ç±»å‹æ— æ•ˆ
const count = reactive(0) // ä¸ä¼šè§¦å‘å“åº”å¼æ›´æ–°

// âœ… æ­£ç¡®ï¼šç®€å•ç±»å‹ç”¨refï¼Œæˆ–åŒ…æˆå¯¹è±¡ç”¨reactive
const count = ref(0)
// æˆ–
const data = reactive({ count: 0 })
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-6">å‘3ï¼šè§£æ„reactiveæ•°æ®ä¸¢å¤±å“åº”å¼</h4>
<pre><code class="hljs language-Plain" lang="Plain">
&lt;script setup&gt;
import { reactive } from 'vue'
const user = reactive({ name: 'æ‰‹ç»˜å›', age: 20 })

// âŒ é”™è¯¯ï¼šè§£æ„åçš„æ•°æ®ä¸æ˜¯å“åº”å¼çš„
const { name } = user
name = 'æ–°åå­—' // é¡µé¢ä¸æ›´æ–°

// âœ… æ­£ç¡®ï¼šç”¨toRefsè§£æ„ï¼Œä¿ç•™å“åº”å¼
import { reactive, toRefs } from 'vue'
const { name } = toRefs(user)
name.value = 'æ–°åå­—' // æ­£å¸¸æ›´æ–°
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-7">äºŒã€ç»„ä»¶ç›¸å…³é¿å‘</h3>
<h4 data-id="heading-8">å‘4ï¼š
</h4><p>ğŸš¨ é‡ç‚¹ï¼š
</p><pre><code class="hljs language-Plain" lang="Plain">
&lt;script setup&gt;
import { ref } from 'vue'
const count = ref(0)

// âŒ é”™è¯¯ï¼šsetupè¯­æ³•ç³–é‡Œæ²¡æœ‰this
const add = () =&gt; {
  this.count.value++ 
}

// âœ… æ­£ç¡®ï¼šç›´æ¥ç”¨å˜é‡å
const add = () =&gt; {
  count.value++ 
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-9">å‘5ï¼šç»„ä»¶ä¼ å€¼å¿˜äº†defineProps/defineEmits</h4>
<pre><code class="hljs language-Plain" lang="Plain">
&lt;!-- å­ç»„ä»¶ âŒ é”™è¯¯ç¤ºä¾‹ --&gt;
&lt;script setup&gt;
// å¿˜äº†definePropsï¼Œç›´æ¥ç”¨propsä¼šæŠ¥é”™
console.log(props.msg)

// å¿˜äº†defineEmitsï¼Œç›´æ¥emitä¼šæŠ¥é”™
emit('change')
&lt;/script&gt;

&lt;!-- å­ç»„ä»¶ âœ… æ­£ç¡®ç¤ºä¾‹ --&gt;
&lt;script setup&gt;
// çˆ¶ä¼ å­ï¼šdefinePropså£°æ˜
const props = defineProps({
  msg: String
})

// å­ä¼ çˆ¶ï¼šdefineEmitså£°æ˜
const emit = defineEmits(['change'])
const send = () =&gt; {
  emit('change', 'å­ç»„ä»¶æ¶ˆæ¯')
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-10">ä¸‰ã€å…¶ä»–é«˜é¢‘é¿å‘</h3>
<ul>
<li>
<p>ğŸš¨ å‘6ï¼šVue3ç§»é™¤äº†filterï¼Œç”¨computedæ›¿ä»£</p>
</li>
<li>
<p>ğŸš¨ å‘7ï¼šv-modelç»‘å®šreactiveå¯¹è±¡ï¼Œä¸ç”¨åŠ .valueï¼ˆæ¨¡æ¿é‡Œï¼‰</p>
</li>
<li>
<p>ğŸš¨ å‘8ï¼šonMountedç­‰ç”Ÿå‘½å‘¨æœŸï¼Œä¸ç”¨å†™åœ¨methodsé‡Œï¼Œç›´æ¥åœ¨setupé‡Œè°ƒç”¨</p>
</li>
</ul>
<p>ğŸ’¡ å°æ€»ç»“ï¼šæ–°æ‰‹é¿å‘æ ¸å¿ƒâ€”â€”è®°ä½ref/reativeç”¨æ³•ã€setupè¯­æ³•ç³–æ— thisã€ä¼ å€¼éœ€å£°æ˜ï¼</p>
<h2 data-id="heading-11">ğŸ“Œ ç¬¬äºŒç¯‡ï¼šPinia æç®€å®æˆ˜ç¬”è®°ï¼ˆVue3çŠ¶æ€ç®¡ç†é¦–é€‰ï¼‰</h2>
<p>Vue3å®˜æ–¹æ¨èç”¨Piniaæ›¿ä»£Vuexï¼Œæ›´è½»é‡ã€æ›´ç®€æ´ã€ä¸ç”¨é…ç½®modulesï¼Œæ–°æ‰‹ä¹Ÿèƒ½å¿«é€Ÿä¸Šæ‰‹ï¼Œè¿™ç¯‡åƒé€æ ¸å¿ƒç”¨æ³•ï½</p>
<h3 data-id="heading-12">ä¸€ã€å¿«é€Ÿä¸Šæ‰‹ï¼ˆ3æ­¥æå®šï¼‰</h3>
<h4 data-id="heading-13">1. å®‰è£…Pinia</h4>
<pre><code class="hljs language-Bash" lang="Bash">
<span class="hljs-comment"># npmå®‰è£…</span>
npm install pinia
<span class="hljs-comment"># yarnå®‰è£…</span>
yarn add pinia
</code></pre>
<h4 data-id="heading-14">2. å…¨å±€æ³¨å†ŒPiniaï¼ˆmain.jsï¼‰</h4>
<pre><code class="hljs language-Plain" lang="Plain">// main.js
import { createApp } from 'vue'
import { createPinia } from 'pinia' // å¼•å…¥Pinia
import App from './App.vue'

const app = createApp(App)
app.use(createPinia()) // æ³¨å†ŒPinia
app.mount('#app')
</code></pre>
<h4 data-id="heading-15">3. åˆ›å»ºStoreï¼ˆæ ¸å¿ƒæ–‡ä»¶ï¼‰</h4>
<p>åœ¨srcç›®å½•ä¸‹æ–°å»ºstoreæ–‡ä»¶å¤¹ï¼Œåˆ›å»ºindex.jsï¼ˆæˆ–å•ç‹¬åˆ›å»ºuserStore.jsï¼‰ï¼Œç”¨defineStoreå®šä¹‰ä»“åº“ã€‚</p>
<pre><code class="hljs language-Plain" lang="Plain">
// src/store/index.js
import { defineStore } from 'pinia'

// ç¬¬ä¸€ä¸ªå‚æ•°ï¼šä»“åº“åï¼ˆå”¯ä¸€ï¼Œä¸èƒ½é‡å¤ï¼‰
// ç¬¬äºŒä¸ªå‚æ•°ï¼šé…ç½®å¯¹è±¡ï¼ˆstate/actions/gettersï¼‰
export const useUserStore = defineStore('user', {
  // çŠ¶æ€ï¼ˆç±»ä¼¼Vue2çš„dataï¼‰
  state: () =&gt; ({
    name: 'æ‰‹ç»˜å›',
    age: 20,
    isLogin: false
  }),
  // æ–¹æ³•ï¼ˆç±»ä¼¼Vue2çš„methodsï¼Œå¯ä¿®æ”¹stateï¼‰
  actions: {
    // ä¿®æ”¹å•ä¸ªçŠ¶æ€
    setName(newName) {
      this.name = newName // è¿™é‡Œçš„thisæŒ‡å‘stateï¼Œä¸ç”¨.valueï¼
    },
    // ä¿®æ”¹å¤šä¸ªçŠ¶æ€
    login(userInfo) {
      this.name = userInfo.name
      this.isLogin = true
    }
  },
  // è®¡ç®—å±æ€§ï¼ˆç±»ä¼¼Vue2çš„computedï¼‰
  getters: {
    // ç®€å•è®¡ç®—
    doubleAge() {
      return this.age * 2
    },
    // å¸¦å‚æ•°çš„è®¡ç®—ï¼ˆè¿”å›ä¸€ä¸ªå‡½æ•°ï¼‰
    getAgeAdd(n) {
      return this.age + n
    }
  }
})
</code></pre>
<h3 data-id="heading-16">äºŒã€ç»„ä»¶ä¸­ä½¿ç”¨Store</h3>
<pre><code class="hljs language-Plain" lang="Plain">
&lt;script setup&gt;
// 1. å¼•å…¥åˆ›å»ºå¥½çš„Store
import { useUserStore } from '@/store'

// 2. å®ä¾‹åŒ–Store
const userStore = useUserStore()

// 3. ä½¿ç”¨stateï¼ˆ3ç§æ–¹å¼ï¼‰
console.log(userStore.name) // æ–¹å¼1ï¼šç›´æ¥ä½¿ç”¨
console.log(userStore.$state.age) // æ–¹å¼2ï¼šé€šè¿‡$stateè®¿é—®

// 4. è°ƒç”¨actionsï¼ˆç›´æ¥è°ƒç”¨ï¼Œä¸ç”¨dispatchï¼ï¼‰
userStore.setName('æ–°åå­—')
userStore.login({ name: 'æµ‹è¯•å›' })

// 5. ä½¿ç”¨gettersï¼ˆç›´æ¥è°ƒç”¨ï¼Œä¸ç”¨åŠ æ‹¬å·ï¼Œå¸¦å‚æ•°é™¤å¤–ï¼‰
console.log(userStore.doubleAge) // 40
console.log(userStore.getAgeAdd(5)) // 25

// 6. é‡ç½®stateï¼ˆä¸€é”®æ¢å¤åˆå§‹å€¼ï¼‰
const reset = () =&gt; {
  userStore.$reset()
}
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;p&gt;å§“åï¼š{{ userStore.name }}&lt;/p&gt;
    &lt;p&gt;å¹´é¾„ï¼š{{ userStore.age }}&lt;/p&gt;
    &lt;p&gt;å¹´é¾„ç¿»å€ï¼š{{ userStore.doubleAge }}&lt;/p&gt;
    &lt;button @click="userStore.setName('å°æ˜')"&gt;ä¿®æ”¹å§“å&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-17">ä¸‰ã€æ ¸å¿ƒä¼˜åŠ¿ï¼ˆä¸ºä»€ä¹ˆç”¨Piniaï¼Ÿï¼‰</h3>
<ul>
<li>
<p>âœ… æ— éœ€é…ç½®modulesï¼šä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªä»“åº“ï¼Œä¸ç”¨åµŒå¥—</p>
</li>
<li>
<p>âœ… ä¸ç”¨commit/mutationsï¼šç›´æ¥åœ¨actionsé‡Œä¿®æ”¹stateï¼Œæ›´ç®€æ´</p>
</li>
<li>
<p>âœ… TypeScriptå‹å¥½ï¼šè‡ªåŠ¨æ¨å¯¼ç±»å‹ï¼Œä¸ç”¨æ‰‹åŠ¨å£°æ˜</p>
</li>
<li>
<p>âœ… ä½“ç§¯å°ï¼šä»…1KBå·¦å³ï¼Œæ¯”Vuexè½»é‡å¾ˆå¤š</p>
</li>
<li>
<p>âœ… æ”¯æŒçƒ­æ›´æ–°ï¼šä¿®æ”¹Storeä¸ç”¨é‡å¯é¡¹ç›®</p>
</li>
</ul>
<p>ğŸ’¡ å°æ€»ç»“ï¼šPiniaç”¨æ³•=å®šä¹‰ä»“åº“+å®ä¾‹åŒ–+ç›´æ¥ä½¿ç”¨ï¼Œæ–°æ‰‹æ— è„‘å†²å°±å¯¹äº†ï¼</p>
<h2 data-id="heading-18">ğŸ“Œ ç¬¬ä¸‰ç¯‡ï¼šVue Router 4 å®æˆ˜æ‰‹å†Œï¼ˆVue3é…å¥—è·¯ç”±ï¼‰</h2>
<p>Vue3é…å¥—Vue Router 4ï¼Œå•é¡µé¢åº”ç”¨ï¼ˆSPAï¼‰å¿…å¤‡ï¼Œè¿™ç¯‡è¦†ç›–è·¯ç”±æ ¸å¿ƒç”¨æ³•ï¼šè·¯ç”±é…ç½®ã€è·³è½¬ã€ä¼ å‚ã€å®ˆå«ï¼Œæç®€ç¤ºä¾‹å¯ç›´æ¥å¤åˆ¶ï¼</p>
<h3 data-id="heading-19">ä¸€ã€å¿«é€Ÿä¸Šæ‰‹ï¼ˆ4æ­¥æå®šï¼‰</h3>
<h4 data-id="heading-20">1. å®‰è£…Vue Router 4</h4>
<pre><code class="hljs language-Bash" lang="Bash">
<span class="hljs-comment"># æ³¨æ„ï¼šVue3å¿…é¡»è£…vue-router@4ç‰ˆæœ¬</span>
npm install vue-router@4
yarn add vue-router@4
</code></pre>
<h4 data-id="heading-21">2. åˆ›å»ºè·¯ç”±é…ç½®æ–‡ä»¶</h4>
<p>srcç›®å½•ä¸‹æ–°å»ºrouteræ–‡ä»¶å¤¹ï¼Œåˆ›å»ºindex.jsï¼š</p>
<pre><code class="hljs language-Plain" lang="Plain">
// src/router/index.js
import { createRouter, createWebHistory } from 'vue-router'

// 1. å¼•å…¥ç»„ä»¶ï¼ˆä¸¤ç§æ–¹å¼ï¼‰
// æ–¹å¼1ï¼šæ™®é€šå¼•å…¥ï¼ˆé€‚åˆé¦–é¡µã€é«˜é¢‘ç»„ä»¶ï¼‰
import Home from '@/views/Home.vue'
// æ–¹å¼2ï¼šæ‡’åŠ è½½ï¼ˆé€‚åˆéé¦–é¡µï¼Œä¼˜åŒ–æ€§èƒ½ï¼‰
const About = () =&gt; import('@/views/About.vue')

// 2. è·¯ç”±è§„åˆ™é…ç½®
const routes = [
  // é¦–é¡µè·¯ç”±
  {
    path: '/', // è·¯ç”±è·¯å¾„ï¼ˆurlåœ°å€ï¼‰
    name: 'Home', // è·¯ç”±åç§°ï¼ˆå”¯ä¸€ï¼‰
    component: Home, // å¯¹åº”ç»„ä»¶
    meta: {
      title: 'é¦–é¡µ', // é¡µé¢æ ‡é¢˜ï¼ˆå¯è‡ªå®šä¹‰ï¼‰
      requireAuth: false // æ˜¯å¦éœ€è¦ç™»å½•ï¼ˆè‡ªå®šä¹‰ï¼‰
    }
  },
  // å…³äºé¡µè·¯ç”±
  {
    path: '/about',
    name: 'About',
    component: About,
    meta: { title: 'å…³äºæˆ‘ä»¬' }
  },
  // åŠ¨æ€è·¯ç”±ï¼ˆå‚æ•°ä¼ é€’ï¼‰
  {
    path: '/user/:id', // :idæ˜¯åŠ¨æ€å‚æ•°
    name: 'User',
    component: () =&gt; import('@/views/User.vue'),
    meta: { title: 'ç”¨æˆ·ä¸­å¿ƒ' }
  },
  // 404è·¯ç”±ï¼ˆåŒ¹é…æ‰€æœ‰æœªå®šä¹‰è·¯ç”±ï¼‰
  {
    path: '/:pathMatch(.*)*', // åŒ¹é…æ‰€æœ‰è·¯å¾„
    name: 'NotFound',
    component: () =&gt; import('@/views/NotFound.vue'),
    meta: { title: 'é¡µé¢ä¸å­˜åœ¨' }
  }
]

// 3. åˆ›å»ºè·¯ç”±å®ä¾‹
const router = createRouter({
  history: createWebHistory(), // å“ˆå¸Œæ¨¡å¼ç”¨createWebHashHistory()
  routes // ä¼ å…¥è·¯ç”±è§„åˆ™
})

// 4. å¯¼å‡ºè·¯ç”±
export default router
</code></pre>
<h4 data-id="heading-22">3. å…¨å±€æ³¨å†Œè·¯ç”±ï¼ˆmain.jsï¼‰</h4>
<pre><code class="hljs language-Plain" lang="Plain">
// main.js
import { createApp } from 'vue'
import App from './App.vue'
import router from './router' // å¼•å…¥è·¯ç”±

const app = createApp(App)
app.use(router) // æ³¨å†Œè·¯ç”±
app.mount('#app')
</code></pre>
<h4 data-id="heading-23">4. é…ç½®è·¯ç”±å‡ºå£ï¼ˆApp.vueï¼‰</h4>
<pre><code class="hljs language-Plain" lang="Plain">
&lt;template&gt;
  &amp;lt;div id="app"&amp;gt;
    &lt;!-- è·¯ç”±å¯¼èˆªï¼ˆç±»ä¼¼aæ ‡ç­¾ï¼‰ --&gt;
    &lt;nav&gt;
      &lt;router-link to="/"&gt;é¦–é¡µ&lt;/router-link&gt;
      &lt;router-link to="/about"&gt;å…³äºæˆ‘ä»¬&lt;/router-link&gt;
      &lt;router-link :to="{ name: 'User', params: { id: 123 } }"&amp;gt;ç”¨æˆ·ä¸­å¿ƒ&amp;lt;/router-link&amp;gt;
    &amp;lt;/nav&amp;gt;
    
    &lt;!-- è·¯ç”±å‡ºå£ï¼šåŒ¹é…çš„ç»„ä»¶ä¼šæ¸²æŸ“åˆ°è¿™é‡Œ --&gt;
    &lt;router-view&gt;&lt;/router-view&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-24">äºŒã€æ ¸å¿ƒç”¨æ³•ï¼ˆé«˜é¢‘åˆšéœ€ï¼‰</h3>
<h4 data-id="heading-25">1. è·¯ç”±è·³è½¬ï¼ˆ3ç§æ–¹å¼ï¼‰</h4>
<pre><code class="hljs language-Plain" lang="Plain">
&lt;script setup&gt;
import { useRouter, useRoute } from 'vue-router'

// å®ä¾‹åŒ–è·¯ç”±
const router = useRouter() // ç”¨äºè·³è½¬
const route = useRoute() // ç”¨äºè·å–è·¯ç”±ä¿¡æ¯

// æ–¹å¼1ï¼šrouter-linkï¼ˆæ¨¡æ¿ä¸­ä½¿ç”¨ï¼Œæœ€ç®€æ´ï¼‰
// &lt;router-link to="/home"&gt;é¦–é¡µ&lt;/router-link&gt;

// æ–¹å¼2ï¼šç¼–ç¨‹å¼è·³è½¬ï¼ˆJSä¸­ä½¿ç”¨ï¼‰
const goHome = () =&gt; {
  router.push('/home') // ç›´æ¥ä¼ è·¯å¾„
  // æˆ–ä¼ å¯¹è±¡ï¼ˆæ¨èï¼Œå¯ä¼ å‚æ•°ï¼‰
  router.push({
    name: 'Home', // ç”¨è·¯ç”±åç§°è·³è½¬ï¼ˆæ›´ç¨³å®šï¼‰
    query: { name: 'æ‰‹ç»˜å›' } // æ‹¼æ¥åœ¨urlä¸Šçš„å‚æ•°
  })
}

// æ–¹å¼3ï¼šæ›¿æ¢å½“å‰è·¯ç”±ï¼ˆä¸ä¼šç•™ä¸‹å†å²è®°å½•ï¼Œé€‚åˆç™»å½•é¡µï¼‰
const goLogin = () =&gt; {
  router.replace('/login')
}

// åé€€/å‰è¿›
const goBack = () =&gt; {
  router.back() // åé€€
  // router.forward() // å‰è¿›
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-26">2. è·¯ç”±ä¼ å‚ï¼ˆ2ç§æ–¹å¼ï¼‰</h4>
<h5 data-id="heading-27">æ–¹å¼1ï¼šqueryä¼ å‚ï¼ˆurlæ‹¼æ¥ï¼Œç±»ä¼¼getè¯·æ±‚ï¼‰</h5>
<pre><code class="hljs language-Plain" lang="Plain">
// è·³è½¬é¡µï¼šä¼ å‚
router.push({
  name: 'About',
  query: { id: 1, msg: 'æµ‹è¯•' }
})
// urlä¼šå˜æˆï¼š/about?id=1&amp;msg=æµ‹è¯•

// æ¥æ”¶é¡µï¼šè·å–å‚æ•°
const route = useRoute()
console.log(route.query.id) // 1
console.log(route.query.msg) // æµ‹è¯•
</code></pre>
<h5 data-id="heading-28">æ–¹å¼2ï¼šparamsä¼ å‚ï¼ˆåŠ¨æ€è·¯ç”±ï¼Œurlä¸æ‹¼æ¥ï¼Œç±»ä¼¼postè¯·æ±‚ï¼‰</h5>
<pre><code class="hljs language-Plain" lang="Plain">// 1. å…ˆé…ç½®åŠ¨æ€è·¯ç”±ï¼ˆrouter/index.jsï¼‰
{
  path: '/user/:id', // :idæ˜¯åŠ¨æ€å‚æ•°
  name: 'User',
  component: User
}

// 2. è·³è½¬é¡µï¼šä¼ å‚
router.push({
  name: 'User', // å¿…é¡»ç”¨nameè·³è½¬ï¼Œä¸èƒ½ç”¨path
  params: { id: 123, name: 'æ‰‹ç»˜å›' }
})

// 3. æ¥æ”¶é¡µï¼šè·å–å‚æ•°
const route = useRoute()
console.log(route.params.id) // 123
console.log(route.params.name) // æ‰‹ç»˜å›
</code></pre>
<h4 data-id="heading-29">3. è·¯ç”±å®ˆå«ï¼ˆæƒé™æ§åˆ¶æ ¸å¿ƒï¼‰</h4>
<p>ä»¥å…¨å±€å‰ç½®å®ˆå«ä¸ºä¾‹ï¼ˆç™»å½•æ‹¦æˆªï¼‰ï¼Œå…¶ä»–å®ˆå«ç”¨æ³•ç±»ä¼¼ï¼š</p>
<pre><code class="hljs language-Plain" lang="Plain">// router/index.js
router.beforeEach((to, from, next) =&gt; {
  // toï¼šè¦è·³è½¬åˆ°çš„è·¯ç”±
  // fromï¼šä»å“ªä¸ªè·¯ç”±è·³è½¬è¿‡æ¥
  // nextï¼šæ”¾è¡Œ/è·³è½¬çš„å‡½æ•°

  // 1. è®¾ç½®é¡µé¢æ ‡é¢˜
  document.title = to.meta.title || 'Vue3ç¬”è®°'

  // 2. ç™»å½•æ‹¦æˆªï¼ˆåªæœ‰ç™»å½•æ‰èƒ½è®¿é—®/userè·¯ç”±ï¼‰
  const isLogin = localStorage.getItem('isLogin') // æ¨¡æ‹Ÿç™»å½•çŠ¶æ€
  if (to.name === 'User' &amp;&amp; !isLogin) {
    // æœªç™»å½•ï¼Œè·³è½¬åˆ°ç™»å½•é¡µ
    next('/login')
  } else {
    // å·²ç™»å½•/æ— éœ€ç™»å½•ï¼Œæ”¾è¡Œ
    next()
  }
})
</code></pre>
<p>ğŸ’¡ å°æ€»ç»“ï¼šè·¯ç”±æ ¸å¿ƒ=é…ç½®è·¯ç”±+è·³è½¬+ä¼ å‚+å®ˆå«ï¼ŒæŒæ¡è¿™4ç‚¹ï¼Œæ»¡è¶³90%çš„é¡¹ç›®éœ€æ±‚ï¼</p>
<h2 data-id="heading-30">ğŸ“Œ ç¬¬å››ç¯‡ï¼šVue3 ç»„ä»¶å°è£…å®æˆ˜ï¼ˆæ–°æ‰‹ä¹Ÿèƒ½å­¦ä¼šï¼‰</h2>
<p>ç»„ä»¶å°è£…æ˜¯Vue3çš„æ ¸å¿ƒä¼˜åŠ¿ï¼Œèƒ½å¤§å¹…æé«˜ä»£ç å¤ç”¨ç‡ã€ç®€åŒ–å¼€å‘ï¼Œè¿™ç¯‡ä»¥3ä¸ªé«˜é¢‘ç»„ä»¶ï¼ˆæŒ‰é’®ã€è¾“å…¥æ¡†ã€å¼¹çª—ï¼‰ä¸ºä¾‹ï¼Œæ•™ä½ ä»é›¶å°è£…å¯å¤ç”¨ç»„ä»¶ï¼</p>
<h3 data-id="heading-31">ä¸€ã€å°è£…æ ¸å¿ƒåŸåˆ™</h3>
<ul>
<li>
<p>âœ… å•ä¸€èŒè´£ï¼šä¸€ä¸ªç»„ä»¶åªåšä¸€ä»¶äº‹ï¼ˆæ¯”å¦‚æŒ‰é’®ç»„ä»¶åªè´Ÿè´£æŒ‰é’®å±•ç¤ºå’Œç‚¹å‡»ï¼‰</p>
</li>
<li>
<p>âœ… å¯å¤ç”¨ï¼šé€šè¿‡propsä¼ å‚ï¼Œé€‚é…ä¸åŒåœºæ™¯</p>
</li>
<li>
<p>âœ… å¯æ‰©å±•ï¼šé€šè¿‡slotæ’æ§½ï¼Œæ”¯æŒè‡ªå®šä¹‰å†…å®¹</p>
</li>
<li>
<p>âœ… æ˜“ç»´æŠ¤ï¼šä»£ç ç®€æ´ï¼Œæ³¨é‡Šæ¸…æ™°ï¼Œé€»è¾‘åˆ†ç¦»</p>
</li>
</ul>
<h3 data-id="heading-32">äºŒã€å®æˆ˜1ï¼šå°è£…é€šç”¨æŒ‰é’®ç»„ä»¶ï¼ˆBtn.vueï¼‰</h3>
<pre><code class="hljs language-Plain" lang="Plain">
&lt;!-- src/components/Btn.vue --&gt;
&lt;template&gt;
  &lt;button 
    class="custom-btn"
    :class="['btn-' + type, { 'btn-disabled': disabled }]"
    @click="handleClick"
    :disabled="disabled"
  &amp;gt;
    &lt;!-- æ’æ§½ï¼šè‡ªå®šä¹‰æŒ‰é’®å†…å®¹ --&gt;
    &lt;slot&gt;é»˜è®¤æŒ‰é’®&lt;/slot&gt;
  &lt;/button&gt;
&lt;/template&gt;

&lt;script setup&gt;
// 1. æ¥æ”¶çˆ¶ç»„ä»¶ä¼ å‚ï¼ˆpropsï¼‰
const props = defineProps({
  // æŒ‰é’®ç±»å‹ï¼ˆprimary/success/danger/defaultï¼‰
  type: {
    type: String,
    default: 'default' // é»˜è®¤å€¼
  },
  // æ˜¯å¦ç¦ç”¨
  disabled: {
    type: Boolean,
    default: false
  }
})

// 2. å­ä¼ çˆ¶ï¼šç‚¹å‡»äº‹ä»¶
const emit = defineEmits(['click'])
const handleClick = () =&gt; {
  // ç¦ç”¨çŠ¶æ€ä¸‹ä¸è§¦å‘äº‹ä»¶
  if (!props.disabled) {
    emit('click')
  }
}
&lt;/script&gt;

&lt;style scoped&gt;
.custom-btn {
  padding: 6px 16px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
}
/* ä¸åŒç±»å‹æŒ‰é’®æ ·å¼ */
.btn-default {
  background: #f5f5f5;
  color: #333;
}
.btn-primary {
  background: #42b983; /* Vueç»¿ */
  color: #fff;
}
.btn-success {
  background: #67c23a;
  color: #fff;
}
.btn-danger {
  background: #f56c6c;
  color: #fff;
}
/* ç¦ç”¨æ ·å¼ */
.btn-disabled {
  cursor: not-allowed;
  opacity: 0.6;
}
&lt;/style&gt;
</code></pre>
<h4 data-id="heading-33">ç»„ä»¶ä½¿ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-Plain" lang="Plain">
&lt;template&gt;
  &lt;div&gt;
    &lt;Btn @click="handleClick"&gt;é»˜è®¤æŒ‰é’®&lt;/Btn&gt;
    &lt;Btn type="primary" @click="handleClick"&gt;ä¸»è¦æŒ‰é’®&lt;/Btn&gt;
    &lt;Btn type="success" @click="handleClick"&gt;æˆåŠŸæŒ‰é’®&lt;/Btn&gt;
    &lt;Btn type="danger" disabled&gt;ç¦ç”¨æŒ‰é’®&lt;/Btn&gt;
    &lt;!-- æ’æ§½è‡ªå®šä¹‰å†…å®¹ --&gt;
    &lt;Btn type="primary"&gt;
      &lt;i class="icon"&gt;âœ“&lt;/i&gt; å¸¦å›¾æ ‡æŒ‰é’®
    &lt;/Btn&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import Btn from '@/components/Btn.vue'

const handleClick = () =&gt; {
  console.log('æŒ‰é’®è¢«ç‚¹å‡»äº†')
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-34">ä¸‰ã€å®æˆ˜2ï¼šå°è£…é€šç”¨è¾“å…¥æ¡†ç»„ä»¶ï¼ˆInput.vueï¼‰</h3>
<pre><code class="hljs language-Plain" lang="Plain">
&lt;!-- src/components/Input.vue --&gt;
&lt;template&gt;
  &amp;lt;div class="custom-input"&amp;gt;
    &lt;!-- æ ‡ç­¾æ’æ§½ --&gt;
    &lt;label class="input-label" v-if="label"&gt;{{ label }}&lt;/label&gt;
    &lt;input
      class="input-content"
      :type="type"
      :placeholder="placeholder"
      :value="modelValue"
      @input="handleInput"
      :disabled="disabled"
    /&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
// 1. æ¥æ”¶çˆ¶ç»„ä»¶ä¼ å‚
const props = defineProps({
  // è¾“å…¥æ¡†ç±»å‹ï¼ˆtext/password/numberï¼‰
  type: {
    type: String,
    default: 'text'
  },
  // å ä½æç¤º
  placeholder: {
    type: String,
    default: ''
  },
  // ç»‘å®šå€¼ï¼ˆv-modelï¼‰
  modelValue: {
    type: [String, Number],
    default: ''
  },
  // æ ‡ç­¾æ–‡æœ¬
  label: {
    type: String,
    default: ''
  },
  // æ˜¯å¦ç¦ç”¨
  disabled: {
    type: Boolean,
    default: false
  }
})

// 2. å­ä¼ çˆ¶ï¼šåŒæ­¥è¾“å…¥å€¼ï¼ˆé…åˆv-modelä½¿ç”¨ï¼‰
const emit = defineEmits(['update:modelValue'])
const handleInput = (e) =&gt; {
  emit('update:modelValue', e.target.value)
}
&lt;/script&gt;

&lt;style scoped&gt;
.custom-input {
  display: flex;
  align-items: center;
  margin: 10px 0;
}
.input-label {
  width: 80px;
  font-size: 14px;
  margin-right: 10px;
}
.input-content {
  padding: 6px 12px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 14px;
  width: 200px;
}
.input-content:disabled {
  background: #f5f5f5;
  cursor: not-allowed;
}
&lt;/style&gt;
</code></pre>
<h4 data-id="heading-35">ç»„ä»¶ä½¿ç”¨ç¤ºä¾‹ï¼ˆv-modelç»‘å®šï¼‰</h4>
<pre><code class="hljs language-Plain" lang="Plain">
&lt;template&gt;
  &lt;div&gt;
    &lt;Input 
      label="ç”¨æˆ·å" 
      placeholder="è¯·è¾“å…¥ç”¨æˆ·å" 
      v-model="username"
    /&gt;
    &lt;Input 
      label="å¯†ç " 
      type="password" 
      placeholder="è¯·è¾“å…¥å¯†ç " 
      v-model="password"
    /&gt;
    &lt;Input 
      label="æ‰‹æœºå·" 
      type="number" 
      placeholder="è¯·è¾“å…¥æ‰‹æœºå·" 
      v-model="phone"
      disabled
    /&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import Input from '@/components/Input.vue'
import { ref } from 'vue'

const username = ref('')
const password = ref('')
const phone = ref('13800138000')
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-36">å››ã€å®æˆ˜3ï¼šå°è£…é€šç”¨å¼¹çª—ç»„ä»¶ï¼ˆModal.vueï¼‰</h3>
<pre><code class="hljs language-Plain" lang="Plain">
&lt;!-- src/components/Modal.vue --&gt;
&lt;template&gt;
  &lt;div class="modal-mask" v-if="visible" @click="handleMaskClick"&gt;
    &amp;lt;div class="modal-content" @click.stop&amp;gt;
      &lt;!-- å¼¹çª—æ ‡é¢˜ --&gt;
      &lt;div class="modal-header"&gt;
        &lt;h3 class="modal-title"&gt;{{ title }}&lt;/h3&gt;
        &lt;button class="modal-close" @click="handleClose"&gt;Ã—&lt;/button&gt;
      &lt;/div&gt;
      &lt;!-- å¼¹çª—å†…å®¹ï¼ˆæ’æ§½ï¼Œè‡ªå®šä¹‰ï¼‰ --&gt;
      &lt;div class="modal-body"&gt;
        &lt;slot&gt;é»˜è®¤å¼¹çª—å†…å®¹&lt;/slot&gt;
      &lt;/div&amp;gt;
      &lt;!-- å¼¹çª—åº•éƒ¨ï¼ˆæ’æ§½ï¼Œè‡ªå®šä¹‰æŒ‰é’®ï¼‰ --&gt;
      &lt;div class="modal-footer"&gt;
        &lt;slot name="footer"&gt;
          &lt;Btn @click="handleClose"&gt;å–æ¶ˆ&lt;/Btn&gt;
          &lt;Btn type="primary" @click="handleConfirm"&gt;ç¡®è®¤&lt;/Btn&gt;
        &lt;/slot&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import Btn from './Btn.vue' // å¼•å…¥ä¹‹å‰å°è£…çš„æŒ‰é’®ç»„ä»¶

// æ¥æ”¶çˆ¶ç»„ä»¶ä¼ å‚
const props = defineProps({
  // æ˜¯å¦æ˜¾ç¤ºå¼¹çª—
  visible: {
    type: Boolean,
    default: false
  },
  // å¼¹çª—æ ‡é¢˜
  title: {
    type: String,
    default: 'æç¤º'
  },
  // ç‚¹å‡»é®ç½©æ˜¯å¦å…³é—­
  maskClose: {
    type: Boolean,
    default: true
  }
})

// å­ä¼ çˆ¶ï¼šå…³é—­ã€ç¡®è®¤äº‹ä»¶
const emit = defineEmits(['close', 'confirm'])
// å…³é—­å¼¹çª—
const handleClose = () =&gt; {
  emit('close')
}
// ç¡®è®¤æŒ‰é’®
const handleConfirm = () =&gt; {
  emit('confirm')
}
// ç‚¹å‡»é®ç½©å…³é—­
const handleMaskClick = () =&gt; {
  if (props.maskClose) {
    emit('close')
  }
}
&lt;/script&gt;

&lt;style scoped&gt;
/* é®ç½©å±‚ */
.modal-mask {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 999;
}
/* å¼¹çª—å†…å®¹ */
.modal-content {
  width: 400px;
  background: #fff;
  border-radius: 8px;
  overflow: hidden;
}
/* å¼¹çª—æ ‡é¢˜ */
.modal-header {
  padding: 16px;
  border-bottom: 1px solid #eee;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.modal-title {
  font-size: 16px;
  margin: 0;
}
.modal-close {
  border: none;
  background: none;
  font-size: 20px;
  cursor: pointer;
  color: #999;
}
/* å¼¹çª—å†…å®¹ */
.modal-body {
  padding: 20px;
  font-size: 14px;
}
/* å¼¹çª—åº•éƒ¨ */
.modal-footer {
  padding: 16px;
  border-top: 1px solid #eee;
  display: flex;
  justify-content: flex-end;
  gap: 10px;
}
&lt;/style&gt;
</code></pre>
<h4 data-id="heading-37">ç»„ä»¶ä½¿ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-Plain" lang="Plain">
&lt;template&gt;
  &lt;div&gt;
    &lt;Btn type="primary" @click="showModal = true"&gt;æ‰“å¼€å¼¹çª—&lt;/Btn&gt;
    
    &lt;Modal
      :visible="showModal"
      title="æç¤ºå¼¹çª—"
      :mask-close="false"
      @close="showModal = false"
      @confirm="handleConfirm"
    &gt;
      &lt;!-- è‡ªå®šä¹‰å¼¹çª—å†…å®¹ --&gt;
      &lt;p&gt;ç¡®å®šè¦æ‰§è¡Œè¿™ä¸ªæ“ä½œå—ï¼Ÿ&lt;/p&gt;
      &lt;Input placeholder="è¯·è¾“å…¥å¤‡æ³¨" v-model="remark" /&gt;
      &lt;!-- è‡ªå®šä¹‰åº•éƒ¨æŒ‰é’®ï¼ˆè¦†ç›–é»˜è®¤ï¼‰ --&gt;
      &lt;template #footer&gt;
        &lt;Btn @click="showModal = false"&gt;å–æ¶ˆ&lt;/Btn&gt;
        &lt;Btn type="danger" @click="handleDelete"&gt;åˆ é™¤&lt;/Btn&gt;
        &lt;Btn type="primary" @click="handleConfirm"&gt;ç¡®è®¤&lt;/Btn&gt;
      &lt;/template&gt;
    &lt;/Modal&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import Modal from '@/components/Modal.vue'
import Input from '@/components/Input.vue'
import Btn from '@/components/Btn.vue'
import { ref } from 'vue'

const showModal = ref(false)
const remark = ref('')

const handleConfirm = () =&gt; {
  console.log('ç¡®è®¤æ“ä½œï¼Œå¤‡æ³¨ï¼š', remark.value)
  showModal.value = false
}

const handleDelete = () =&gt; {
  console.log('æ‰§è¡Œåˆ é™¤æ“ä½œ')
  showModal.value = false
}
&lt;/script&gt;
</code></pre>
<p>ğŸ’¡ å°æ€»ç»“ï¼šç»„ä»¶å°è£…=propsä¼ å‚+slotæ’æ§½+emitä¼ äº‹ä»¶ï¼ŒæŒæ¡è¿™ä¸‰ç‚¹ï¼Œèƒ½å°è£…ä»»ä½•ä½ éœ€è¦çš„ç»„ä»¶ï¼</p>
<h2 data-id="heading-38">ğŸ“Œ ç¬¬äº”ç¯‡ï¼šVue3+Vite ä¼˜åŒ–å®æˆ˜ï¼ˆæ‰“åŒ…æé€Ÿ+é¡µé¢ä¼˜åŒ–ï¼‰</h2>
<p>Vue3+Vite æœ¬èº«å°±æ¯”Vue2+Webpackå¿«ï¼Œä½†é¡¹ç›®å˜å¤§åä»ä¼šå‡ºç°æ‰“åŒ…æ…¢ã€é¡µé¢å¡é¡¿ï¼Œè¿™ç¯‡æ±‡æ€»5ä¸ªé«˜é¢‘ä¼˜åŒ–æŠ€å·§ï¼Œæ–°æ‰‹ä¹Ÿèƒ½è½»æ¾æ“ä½œï¼Œç›´æ¥æå‡é¡¹ç›®æ€§èƒ½ï¼</p>
<h3 data-id="heading-39">ä¸€ã€Vite åŸºç¡€ä¼˜åŒ–ï¼ˆæ‰“åŒ…æé€Ÿï¼‰</h3>
<h4 data-id="heading-40">1. ä¼˜åŒ–ä¾èµ–é¢„æ„å»º</h4>
<p>Viteä¼šé¢„æ„å»ºä¾èµ–ï¼Œå‡å°‘æ‰“åŒ…æ—¶é—´ï¼Œä¿®æ”¹vite.config.jsé…ç½®ï¼ŒæŒ‡å®šé¢„æ„å»ºçš„ä¾èµ–ï¼š</p>
<pre><code class="hljs language-Plain" lang="Plain">
// vite.config.js
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'

export default defineConfig({
  plugins: [vue()],
  // ä¼˜åŒ–ä¾èµ–é¢„æ„å»º
  optimizeDeps: {
    // å¼ºåˆ¶é¢„æ„å»ºçš„ä¾èµ–ï¼ˆé«˜é¢‘ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“ï¼‰
    include: ['vue', 'vue-router', 'pinia', 'axios'],
    // æ’é™¤ä¸éœ€è¦é¢„æ„å»ºçš„ä¾èµ–
    exclude: ['lodash-es']
  }
})
</code></pre>
<h4 data-id="heading-41">2. æ‰“åŒ…å‹ç¼©ä¼˜åŒ–ï¼ˆå‡å°ä½“ç§¯ï¼‰</h4>
<p>å®‰è£…å‹ç¼©æ’ä»¶ï¼Œæ‰“åŒ…æ—¶è‡ªåŠ¨å‹ç¼©JS/CSS/HTMLï¼Œå‡å°æ–‡ä»¶ä½“ç§¯ï¼Œæå‡åŠ è½½é€Ÿåº¦ï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">
<span class="hljs-comment"># å®‰è£…å‹ç¼©æ’ä»¶</span>
npm install vite-plugin-compression --save-dev
</code></pre>
<pre><code class="hljs language-Plain" lang="Plain">
// vite.config.js
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import compression from 'vite-plugin-compression'

export default defineConfig({
  plugins: [
    vue(),
    // æ‰“åŒ…å‹ç¼©ï¼ˆgzipæ ¼å¼ï¼‰
    compression({
      algorithm: 'gzip', // å‹ç¼©ç®—æ³•
      threshold: 10240, // è¶…è¿‡10KBçš„æ–‡ä»¶æ‰å‹ç¼©
      deleteOriginFile: false // ä¸åˆ é™¤åŸæ–‡ä»¶
    })
  ]
})
</code></pre>
<h3 data-id="heading-42">äºŒã€ä»£ç å±‚é¢ä¼˜åŒ–ï¼ˆé¡µé¢æé€Ÿï¼‰</h3>
<h4 data-id="heading-43">1. ç»„ä»¶æ‡’åŠ è½½ï¼ˆè·¯ç”±æ‡’åŠ è½½ï¼‰</h4>
<p>ä¹‹å‰è·¯ç”±é…ç½®ä¸­æåˆ°çš„æ‡’åŠ è½½ï¼Œæ˜¯æœ€æ ¸å¿ƒçš„ä¼˜åŒ–æŠ€å·§ï¼Œå‡å°‘é¦–é¡µåŠ è½½æ—¶é—´ï¼š</p>
<pre><code class="hljs language-Plain" lang="Plain">
// router/index.js
// âŒ é”™è¯¯ï¼šå…¨éƒ¨å¼•å…¥ï¼Œé¦–é¡µåŠ è½½æ…¢
import Home from '@/views/Home.vue'
import About from '@/views/About.vue'

// âœ… æ­£ç¡®ï¼šæ‡’åŠ è½½ï¼Œåªæœ‰è®¿é—®æ—¶æ‰åŠ è½½ç»„ä»¶
const Home = () =&gt; import('@/views/Home.vue')
const About = () =&gt; import('@/views/About.vue')

// è¿›é˜¶ï¼šåˆ†å—æ‰“åŒ…ï¼ˆç›¸åŒæ¨¡å—æ‰“åŒ…åˆ°ä¸€ä¸ªæ–‡ä»¶ï¼‰
const User = () =&gt; import(/* webpackChunkName: "user" */ '@/views/User.vue')
const UserInfo = () =&gt; import(/* webpackChunkName: "user" */ '@/views/UserInfo.vue')
</code></pre>
<h4 data-id="heading-44">2. å›¾ç‰‡ä¼˜åŒ–ï¼ˆå‡å°å›¾ç‰‡ä½“ç§¯ï¼‰</h4>
<p>Viteè‡ªå¸¦å›¾ç‰‡å¤„ç†ï¼Œé…åˆæ’ä»¶ä¼˜åŒ–å›¾ç‰‡ï¼Œæ”¯æŒwebpæ ¼å¼ï¼ˆä½“ç§¯æ›´å°ï¼‰ï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">
<span class="hljs-comment"># å®‰è£…å›¾ç‰‡ä¼˜åŒ–æ’ä»¶</span>
npm install vite-plugin-imagemin --save-dev
</code></pre>
<pre><code class="hljs language-Plain" lang="Plain">
// vite.config.js
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import imagemin from 'vite-plugin-imagemin'

export default defineConfig({
  plugins: [
    vue(),
    // å›¾ç‰‡ä¼˜åŒ–
    imagemin({
      gifsicle: {
        optimizationLevel: 7, // gifä¼˜åŒ–ç­‰çº§
        interlaced: false
      },
      optipng: {
        optimizationLevel: 7 // pngä¼˜åŒ–ç­‰çº§
      },
      mozjpeg: {
        quality: 80 // jpgè´¨é‡ï¼ˆ0-100ï¼‰
      },
      pngquant: {
        quality: [0.8, 0.9], // pngè´¨é‡èŒƒå›´
        speed: 4
      },
      svgo: {
        plugins: [
          { name: 'removeViewBox' },
          { name: 'removeEmptyAttrs', active: false }
        ]
      }
    })
  ],
  // é…ç½®å›¾ç‰‡è·¯å¾„ï¼Œä¼˜åŒ–åŠ è½½
  assetsInclude: ['**/*.png', '**/*.jpg', '**/*.webp'],
  build: {
    assetsInlineLimit: 4096 // å°äº4KBçš„å›¾ç‰‡è½¬base64ï¼Œå‡å°‘è¯·æ±‚
  }
})
</code></pre>
<h4 data-id="heading-45">3. å‡å°‘ä¸å¿…è¦çš„å“åº”å¼æ•°æ®</h4>
<p>Vue3çš„å“åº”å¼ä¼šæ¶ˆè€—æ€§èƒ½ï¼Œéå“åº”å¼æ•°æ®ä¸ç”¨ref/reactiveåŒ…è£¹ï¼š</p>
<pre><code class="hljs language-Plain" lang="Plain">
&lt;script setup&gt;
import { ref, reactive } from 'vue'

// âœ… æ­£ç¡®ï¼šéå“åº”å¼æ•°æ®ï¼Œç›´æ¥å®šä¹‰ï¼ˆä¸ä¼šå˜åŒ–çš„æ•°æ®ï¼‰
const staticData = {
  name: 'æ‰‹ç»˜å›',
  age: 20
}

// âœ… æ­£ç¡®ï¼šå“åº”å¼æ•°æ®ï¼Œç”¨ref/reactiveï¼ˆä¼šå˜åŒ–çš„æ•°æ®ï¼‰
const count = ref(0)
const user = reactive({
  name: 'æµ‹è¯•å›'
})
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-46">4. è™šæ‹Ÿåˆ—è¡¨ï¼ˆé•¿åˆ—è¡¨ä¼˜åŒ–ï¼‰</h4>
<p>å½“åˆ—è¡¨æ•°æ®è¶…è¿‡1000æ¡æ—¶ï¼Œä¼šå‡ºç°å¡é¡¿ï¼Œç”¨è™šæ‹Ÿåˆ—è¡¨åªæ¸²æŸ“å¯è§†åŒºåŸŸçš„å†…å®¹ï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">
<span class="hljs-comment"># å®‰è£…è™šæ‹Ÿåˆ—è¡¨æ’ä»¶ï¼ˆvue3ä¸“ç”¨ï¼‰</span>
npm install vue-virtual-scroller@next --save
</code></pre>
<pre><code class="hljs language-Plain" lang="Plain">
&lt;template&gt;
  &lt;!-- è™šæ‹Ÿåˆ—è¡¨ç»„ä»¶ --&gt;
  &lt;RecycleScroller
    class="scroller"
    :items="longList" // é•¿åˆ—è¡¨æ•°æ®
    :item-size="50" // æ¯ä¸ªåˆ—è¡¨é¡¹çš„é«˜åº¦
    key-field="id" // å”¯ä¸€æ ‡è¯†å­—æ®µ
  &gt;
    &lt;template #default="{ item }"&gt;
      &lt;div class="list-item"&gt;{{ item.name }}&lt;/div&gt;
    &lt;/template&gt;
  &lt;/RecycleScroller&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { RecycleScroller } from 'vue-virtual-scroller'
import 'vue-virtual-scroller/dist/vue-virtual-scroller.css'

// æ¨¡æ‹Ÿ10000æ¡é•¿åˆ—è¡¨æ•°æ®
const longList = Array.from({ length: 10000 }, (_, i) =&gt; ({
  id: i + 1,
  name: `åˆ—è¡¨é¡¹ ${i + 1}`
}))
&lt;/script&gt;

&lt;style scoped&gt;
.scroller {
  height: 500px; // å¿…é¡»è®¾ç½®å›ºå®šé«˜åº¦
  width: 100%;
}
.list-item {
  height: 50px; // å’Œitem-sizeä¸€è‡´
  line-height: 50px;
  border-bottom: 1px solid #eee;
}
&lt;/style&gt;
</code></pre>
<h3 data-id="heading-47">ä¸‰ã€ä¼˜åŒ–æ€»ç»“</h3>
<ul>
<li>
<p>ğŸš€ æ‰“åŒ…ä¼˜åŒ–ï¼šä¾èµ–é¢„æ„å»º+å‹ç¼©+å›¾ç‰‡ä¼˜åŒ–ï¼Œå‡å°ä½“ç§¯ã€æå‡æ‰“åŒ…é€Ÿåº¦</p>
</li>
<li>
<p>ğŸš€ é¡µé¢ä¼˜åŒ–ï¼šè·¯ç”±æ‡’åŠ è½½+è™šæ‹Ÿåˆ—è¡¨ï¼Œå‡å°‘é¦–é¡µåŠ è½½æ—¶é—´ã€è§£å†³é•¿åˆ—è¡¨å¡é¡¿</p>
</li>
<li>
<p>ğŸš€ ä»£ç ä¼˜åŒ–ï¼šå‡å°‘ä¸å¿…è¦çš„å“åº”å¼æ•°æ®ï¼Œé™ä½æ€§èƒ½æ¶ˆè€—</p>
</li>
</ul>
<p>ğŸ’¡ å°æŠ€å·§ï¼šä¼˜åŒ–åå¯ä»¥ç”¨ <code>npm run build</code> æŸ¥çœ‹æ‰“åŒ…ä½“ç§¯ï¼Œç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆNetworkï¼‰æŸ¥çœ‹åŠ è½½é€Ÿåº¦ï¼</p>
<p>âœï¸ åˆé›†æŒç»­æ›´æ–°ingï¼Œæ¯ç¯‡éƒ½æ˜¯çˆ†æ¬¾å®ç”¨å‘ï¼Œæœ‰é”™æ¬¢è¿æŒ‡å‡ºæ¥ï½ æ”¶è—èµ·æ¥ï¼Œå­¦Vue3ä¸è¿·è·¯ï¼</p>
<blockquote>
<p>ï¼ˆæ³¨ï¼šæ–‡æ¡£éƒ¨åˆ†å†…å®¹å¯èƒ½ç”± AI ç”Ÿæˆï¼‰</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€å‰ç«¯ç¼“å­˜ã€‘localStorage æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥çš„ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7604045354069803042</link>    <guid>https://juejin.cn/post/7604045354069803042</guid>    <pubDate>2026-02-09T02:17:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604045354069803042" data-draft-id="7604045354069786658" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€å‰ç«¯ç¼“å­˜ã€‘localStorage æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥çš„ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-09T02:17:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§çŸ¥é—²é—²i"/> <meta itemprop="url" content="https://juejin.cn/user/3799545205237111"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€å‰ç«¯ç¼“å­˜ã€‘localStorage æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥çš„ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3799545205237111/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§çŸ¥é—²é—²i
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T02:17:40.000Z" title="Mon Feb 09 2026 02:17:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    157
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>localStorage æ˜¯åŒæ­¥çš„ï¼Œå…¶è®¾è®¡åˆè¡·æ˜¯ä¸ºäº†ç®€åŒ– API å¹¶é€‚åº”æ—©æœŸçš„ Web åº”ç”¨åœºæ™¯ã€‚å°½ç®¡åº•å±‚ç¡¬ç›˜ IO æœ¬è´¨ä¸Šæ˜¯å¼‚æ­¥çš„ï¼Œä½†æµè§ˆå™¨é€šè¿‡é˜»å¡ JavaScript çº¿ç¨‹å®ç°äº†åŒæ­¥è¡Œä¸ºã€‚å¯¹äºéœ€è¦å­˜å‚¨å¤§é‡æ•°æ®æˆ–é¿å…é˜»å¡ä¸»çº¿ç¨‹çš„åœºæ™¯ï¼Œå»ºè®®ä½¿ç”¨å¼‚æ­¥çš„ IndexedDBã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆä¼šæœ‰è¿™æ ·çš„é—®é¢˜ï¼Ÿ</h2>
<p>localStorage æ˜¯ Web Storage API çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæä¾›äº†ä¸€ç§å­˜å‚¨é”®å€¼å¯¹çš„æœºåˆ¶ã€‚å®ƒçš„æ•°æ®æ˜¯æŒä¹…å­˜å‚¨åœ¨ç”¨æˆ·çš„ç¡¬ç›˜ä¸Šçš„ï¼Œè€Œä¸æ˜¯å†…å­˜ä¸­ã€‚è¿™æ„å‘³ç€å³ä½¿ç”¨æˆ·å…³é—­æµè§ˆå™¨æˆ–ç”µè„‘ï¼Œæ•°æ®ä¹Ÿä¸ä¼šä¸¢å¤±ï¼Œé™¤éä¸»åŠ¨æ¸…é™¤æµè§ˆå™¨ç¼“å­˜æˆ–ä½¿ç”¨ä»£ç åˆ é™¤ã€‚</p>
<p>å½“ä½ é€šè¿‡ JavaScript è®¿é—® <code>localStorage</code> æ—¶ï¼Œæµè§ˆå™¨ä¼šä»ç¡¬ç›˜ä¸­è¯»å–æ•°æ®æˆ–å‘ç¡¬ç›˜å†™å…¥æ•°æ®ã€‚è™½ç„¶è¯»å†™æ“ä½œæœŸé—´ï¼Œæ•°æ®å¯èƒ½ä¼šè¢«æš‚æ—¶å­˜æ”¾åœ¨å†…å­˜ä¸­ä»¥æé«˜å¤„ç†é€Ÿåº¦ï¼Œä½†å…¶ä¸»è¦ç‰¹æ€§æ˜¯æŒä¹…æ€§ï¼Œå¹¶ä¸”ä¸ä¾èµ–äºä¼šè¯ã€‚</p>
<h2 data-id="heading-1">äºŒã€ç¡¬ç›˜æ˜¯ IO è®¾å¤‡ï¼ŒIO è¯»å–ä¸éƒ½æ˜¯å¼‚æ­¥çš„å—ï¼Ÿ</h2>
<p>æ˜¯çš„ï¼Œç¡¬ç›˜ç¡®å®æ˜¯ IO è®¾å¤‡ï¼Œå¤§éƒ¨åˆ†ä¸ç¡¬ç›˜ç›¸å…³çš„æ“ä½œç³»ç»Ÿçº§ IO æ“ä½œæ˜¯å¼‚æ­¥è¿›è¡Œçš„ï¼Œä»¥é¿å…é˜»å¡è¿›ç¨‹ã€‚ä½†åœ¨ Web æµè§ˆå™¨ç¯å¢ƒä¸­ï¼ŒlocalStorage çš„ API è¢«è®¾è®¡ä¸ºåŒæ­¥çš„ï¼Œå³ä½¿åº•å±‚çš„ç¡¬ç›˜è¯»å†™æ“ä½œå…·æœ‰ IO ç‰¹æ€§ã€‚</p>
<p>JavaScript ä»£ç åœ¨è®¿é—® <code>localStorage</code> æ—¶ï¼Œæµè§ˆå™¨æä¾›çš„ API é€šå¸¸ä¼šåœ¨ js æ‰§è¡Œçº¿ç¨‹ä¸Šä¸‹æ–‡ä¸­ç›´æ¥è°ƒç”¨ã€‚è¿™æ„å‘³ç€å°½ç®¡ç¡¬ç›˜éœ€è¦ç­‰å¾…æ•°æ®è¯»å–æˆ–å†™å…¥å®Œæˆï¼ŒlocalStorage çš„è¯»å†™æ“ä½œæ˜¯åŒæ­¥çš„ï¼Œä¼šé˜»å¡ JavaScript çº¿ç¨‹ç›´åˆ°æ“ä½œå®Œæˆã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€å®Œæ•´æ“ä½œæµç¨‹</h2>
<p>localStorage å®ç°åŒæ­¥å­˜å‚¨çš„æ–¹å¼æ˜¯é˜»å¡ JavaScript çš„æ‰§è¡Œï¼Œç›´åˆ°æ•°æ®çš„è¯»å–æˆ–å†™å…¥æ“ä½œå®Œæˆã€‚è¿™ç§åŒæ­¥æ“ä½œçš„å®ç°å¯ä»¥ç®€å•æ¦‚è¿°å¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p><strong>jsçº¿ç¨‹è°ƒç”¨</strong>ï¼šå½“ JavaScript ä»£ç æ‰§è¡Œä¸€ä¸ª <code>localStorage</code> çš„æ“ä½œï¼Œæ¯”å¦‚ <code>localStorage.getItem('key')</code> æˆ– <code>localStorage.setItem('key', 'value')</code>ï¼Œè¿™ä¸ªè°ƒç”¨å‘ç”Ÿåœ¨ js çš„å•ä¸ªçº¿ç¨‹ä¸Šã€‚</p>
</li>
<li>
<p><strong>æµè§ˆå™¨å¼•æ“å¤„ç†</strong>ï¼šæµè§ˆå™¨çš„ js å¼•æ“æ¥æ”¶åˆ°è°ƒç”¨è¯·æ±‚åï¼Œä¼šå‘æµè§ˆå™¨çš„å­˜å‚¨å™¨å­ç³»ç»Ÿå‘å‡ºåŒæ­¥ IO è¯·æ±‚ã€‚æ­¤æ—¶ js å¼•æ“ç­‰å¾… IO æ“ä½œçš„å®Œæˆã€‚</p>
</li>
<li>
<p><strong>æ–‡ä»¶ç³»ç»Ÿçš„åŒæ­¥ IO</strong>ï¼šæµè§ˆå™¨å­˜å‚¨å™¨å­ç³»ç»Ÿå¯¹ç¡¬ç›˜æ‰§è¡Œå®é™…çš„å­˜å‚¨æˆ–æ£€ç´¢æ“ä½œã€‚å°½ç®¡æ“ä½œç³»ç»Ÿå±‚é¢å¯èƒ½å¯¹æ–‡ä»¶è®¿é—®è¿›è¡Œç¼“å­˜æˆ–ä¼˜åŒ–ï¼Œä½†ä»æµè§ˆå™¨çš„è§’åº¦çœ‹ï¼Œå®ƒä¼šè¿›è¡Œä¸€ä¸ªåŒæ­¥çš„æ–‡ä»¶ç³»ç»Ÿæ“ä½œï¼Œç›´åˆ°è¿™ä¸ªæ“ä½œè¿”å›ç»“æœã€‚</p>
</li>
<li>
<p><strong>æ“ä½œå®Œæˆè¿”å›</strong>ï¼šä¸€æ—¦ IO æ“ä½œå®Œæˆï¼Œæ•°æ®è¦ä¹ˆè¢«å†™å…¥ç¡¬ç›˜ï¼Œè¦ä¹ˆè¢«ä»ç¡¬ç›˜è¯»å–å‡ºæ¥ï¼Œæµè§ˆå™¨å­˜å‚¨å™¨å­ç³»ç»Ÿä¼šå°†ç»“æœè¿”å›ç»™ js å¼•æ“ã€‚</p>
</li>
<li>
<p><strong>JavaScript çº¿ç¨‹ç»§ç»­æ‰§è¡Œ</strong>ï¼šjs å¼•æ“åœ¨æ¥æ”¶åˆ°æ“ä½œå®Œæˆçš„ä¿¡å·åï¼Œæ‰ä¼šç»§ç»­æ‰§è¡Œä¸‹ä¸€æ¡ js ä»£ç ã€‚</p>
</li>
</ol>
<h2 data-id="heading-3">å››ã€ä¸ºä»€ä¹ˆ localStorage è¢«è®¾è®¡ä¸ºåŒæ­¥çš„ï¼Ÿ</h2>
<ol>
<li>
<p><strong>å†å²åŸå› </strong>ï¼šlocalStorage æ˜¯åœ¨æ—©æœŸ Web æ ‡å‡†ä¸­å¼•å…¥çš„ï¼Œå½“æ—¶çš„ Web åº”ç”¨ç›¸å¯¹ç®€å•ï¼Œå¯¹å¼‚æ­¥æ“ä½œçš„éœ€æ±‚å¹¶ä¸å¼ºçƒˆã€‚</p>
</li>
<li>
<p><strong>API ç®€æ´æ€§</strong>ï¼šåŒæ­¥ API æ›´æ˜“äºç†è§£å’Œä½¿ç”¨ï¼Œå¼€å‘è€…æ— éœ€å¤„ç†å›è°ƒæˆ– Promiseï¼Œä»£ç æ›´ç›´è§‚ã€‚</p>
</li>
<li>
<p><strong>æ•°æ®é‡å°</strong>ï¼šlocalStorage è®¾è®¡ç”¨äºå­˜å‚¨å°‘é‡æ•°æ®ï¼ˆé€šå¸¸ä¸º 5MB å·¦å³ï¼‰ï¼ŒåŒæ­¥æ“ä½œåœ¨æ•°æ®é‡è¾ƒå°æ—¶å¯¹æ€§èƒ½å½±å“ä¸å¤§ã€‚</p>
</li>
<li>
<p><strong>å…¼å®¹æ€§è€ƒè™‘</strong>ï¼šä¿æŒåŒæ­¥è¡Œä¸ºæœ‰åŠ©äºå…¼å®¹æ—§ä»£ç å’Œæ—§æµè§ˆå™¨ã€‚</p>
</li>
<li>
<p><strong>æµè§ˆå™¨æ”¿ç­–</strong>ï¼šæµè§ˆå™¨å‚å•†å¯èƒ½å‡ºäºæä¾›ä¸€è‡´ç”¨æˆ·ä½“éªŒæˆ–æ–¹ä¾¿ç®¡ç†ç”¨æˆ·æ•°æ®çš„è§’åº¦ï¼Œé€‰æ‹©ä¿æŒå…¶åŒæ­¥ç‰¹æ€§ã€‚</p>
</li>
</ol>
<h2 data-id="heading-4">äº”ã€é‚£ IndexedDB ä¼šé€ æˆæ»¥ç”¨å—ï¼Ÿ</h2>
<p>è™½ç„¶ IndexedDB æä¾›äº†æ›´å¤§çš„å­˜å‚¨ç©ºé—´å’Œæ›´ä¸°å¯Œçš„åŠŸèƒ½ï¼Œä½†æ½œåœ¨åœ°ä¹Ÿå¯èƒ½è¢«æ»¥ç”¨ã€‚ä¸è¿‡ï¼Œç›¸æ¯” localStorageï¼Œå®ƒå¢åŠ äº†ä¸€äº›ç‰¹æ€§æ¥é™ä½è¢«æ»¥ç”¨çš„é£é™©ï¼š</p>
<ol>
<li>
<p><strong>å¼‚æ­¥æ“ä½œ</strong>ï¼šIndexedDB æ˜¯å¼‚æ­¥ APIï¼Œå³ä½¿å¤„ç†æ›´å¤§çš„æ•°æ®ä¹Ÿä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Œé¿å…å¯¹é¡µé¢å“åº”æ€§çš„ç›´æ¥å½±å“ã€‚</p>
</li>
<li>
<p><strong>ç”¨æˆ·æç¤ºå’Œæƒé™</strong>ï¼šæŸäº›æµè§ˆå™¨åœ¨ç½‘ç«™å°è¯•å­˜å‚¨å¤§é‡æ•°æ®æ—¶ï¼Œå¯èƒ½ä¼šå¼¹å‡ºæç¤ºè¦æ±‚ç”¨æˆ·æˆæƒï¼Œä½¿ç”¨æˆ·æœ‰æœºä¼šæ‹’ç»è¶…å‡ºåˆç†èŒƒå›´çš„å­˜å‚¨è¯·æ±‚ã€‚</p>
</li>
<li>
<p><strong>å­˜å‚¨é…é¢å’Œé™åˆ¶</strong>ï¼šå°½ç®¡ IndexedDB æä¾›çš„å­˜å‚¨å®¹é‡æ¯” localStorage å¤§å¾—å¤šï¼Œä½†å®ƒä¹Ÿä¸æ˜¯æ— é™çš„ã€‚æµè§ˆå™¨ä¼šè®¾å®šä¸€å®šçš„å­˜å‚¨é…é¢ï¼Œè¶…å‡ºæ—¶æ‹’ç»æ›´å¤šçš„å­˜å‚¨è¯·æ±‚ã€‚</p>
</li>
<li>
<p><strong>æ›´æ¸…æ™°çš„å­˜å‚¨ç®¡ç†</strong>ï¼šIndexedDB çš„æ•°æ®åº“å½¢å¼å…è®¸æœ‰ç»„ç»‡çš„å­˜å‚¨å’Œæ›´å®¹æ˜“çš„æ•°æ®ç®¡ç†ï¼Œç”¨æˆ·æˆ–å¼€å‘è€…å¯ä»¥æ›´å®¹æ˜“åœ°æŸ¥çœ‹å’Œæ¸…ç†å ç”¨çš„æ•°æ®ã€‚</p>
</li>
<li>
<p><strong>é€æ¸å¢åŠ çš„å­˜å‚¨</strong>ï¼šæŸäº›æµè§ˆå™¨åœ¨æ•°æ®åº“å¤§å°å¢é•¿åˆ°ä¸€å®šé˜ˆå€¼æ—¶ï¼Œå¯èƒ½ä¼šæç¤ºç”¨æˆ·æ˜¯å¦å…è®¸ç»§ç»­å­˜å‚¨ï¼Œè€Œä¸æ˜¯ä¸€å¼€å§‹å°±åˆ†é…å¾ˆå¤§çš„ç©ºé—´ã€‚</p>
</li>
</ol>
<h2 data-id="heading-5">å…­ã€ä¸€ä¸ªç®€å•æµ‹è¯•ä¾‹å­</h2>
<p>å¹³æ—¶ç¼–å†™ä»£ç æ—¶ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰ä»¥å¼‚æ­¥çš„æ–¹å¼ä½¿ç”¨ localStorageã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„æµ‹è¯•ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> <span class="hljs-title function_">testLocalStorage</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"==========&gt; è®¾ç½® localStorage ä¹‹å‰"</span>);
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'testLocalStorage'</span>, <span class="hljs-string">'æˆ‘æ˜¯åŒæ­¥çš„'</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"==========&gt; è·å– localStorage ä¹‹å‰"</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'==========&gt; è·å– localStorage'</span>, <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'testLocalStorage'</span>));
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"==========&gt; è·å– localStorage ä¹‹å"</span>);
}
<span class="hljs-title function_">testLocalStorage</span>();
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>è¿è¡Œä¸Šè¿°ä»£ç ï¼Œä½ ä¼šå‘ç°æ—¥å¿—è¾“å‡ºæ˜¯é¡ºåºæ‰§è¡Œçš„ï¼ŒéªŒè¯äº† localStorage çš„åŒæ­¥ç‰¹æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MCP (Model Context Protocol) æŠ€æœ¯ç†è§£ - ç¬¬äºŒç¯‡]]></title>    <link>https://juejin.cn/post/7603721514204495881</link>    <guid>https://juejin.cn/post/7603721514204495881</guid>    <pubDate>2026-02-08T16:46:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603721514204495881" data-draft-id="7604484566803939338" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MCP (Model Context Protocol) æŠ€æœ¯ç†è§£ - ç¬¬äºŒç¯‡"/> <meta itemprop="keywords" content="åç«¯,MCP,AIGC"/> <meta itemprop="datePublished" content="2026-02-08T16:46:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æƒ³ç”¨offeræ‰“ç‰Œ"/> <meta itemprop="url" content="https://juejin.cn/user/578781641968972"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MCP (Model Context Protocol) æŠ€æœ¯ç†è§£ - ç¬¬äºŒç¯‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/578781641968972/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æƒ³ç”¨offeræ‰“ç‰Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-08T16:46:24.000Z" title="Sun Feb 08 2026 16:46:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.8;font-weight:400;font-size:16px;word-spacing:2px;letter-spacing:2px;overflow-x:hidden;color:#3e3e3e;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:1.2em;border-bottom:2px solid #ef7060;word-spacing:0!important;letter-spacing:0!important;font-size:inherit;line-height:inherit;display:block;font-weight:400;background:#ef7060;color:#fff;padding:10px;border-top-right-radius:3px;border-top-left-radius:3px;margin-right:3px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>æˆ‘ä»¬ç¬¬ä¸€ç¯‡è®²äº†MCPçš„åŸºç¡€æ¦‚å¿µã€MCPè§£å†³çš„é—®é¢˜ä»¥åŠMCPçš„æ¶æ„ï¼Œæˆ‘ç›¸ä¿¡å¤§å®¶å·²ç»å¯¹MCPæœ‰äº†ä¸€å®šçš„äº†è§£ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥è®©æˆ‘ä»¬æ·±å…¥MCPå…·ä½“æ˜¯å¦‚ä½•å®ç°çš„ï¼Œè¿™ä¸€ç¯‡æˆ‘ä»¬çš„é‡ç‚¹æ”¾åœ¨é€šä¿¡åè®®å’Œæ•°æ®ä¼ è¾“ä¸Šï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹å§</p>
<p>å¦‚æœä½ å¯¹å‰é¢çš„å†…å®¹æ„Ÿå…´è¶£ï¼Œå¯ä»¥ç‚¹å‡»è¿™é‡Œè·³è½¬</p>
<p><a href="https://juejin.cn/post/7604037348607082534" target="_blank" title="https://juejin.cn/post/7604037348607082534">MCP (Model Context Protocol) æŠ€æœ¯ç†è§£ - ç¬¬ä¸€ç¯‡</a></p>
<h2 data-id="heading-1">MCPçš„å±‚çº§</h2>
<p>MCPç”±ä¸¤å±‚ç»„æˆï¼š</p>
<ul>
<li><strong>æ•°æ®å±‚</strong>ï¼šå®šä¹‰äº†åŸºäº JSON-RPC çš„å®¢æˆ·ç«¯-æœåŠ¡å™¨é€šä¿¡åè®®ï¼ŒåŒ…æ‹¬ç”Ÿå‘½å‘¨æœŸç®¡ç†å’Œæ ¸å¿ƒåŸè¯­ï¼Œå¦‚å·¥å…·ã€èµ„æºã€æç¤ºå’Œé€šçŸ¥ã€‚</li>
<li><strong>ä¼ è¾“å±‚</strong>ï¼šå®šä¹‰äº†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´è¿›è¡Œæ•°æ®äº¤æ¢çš„é€šä¿¡æœºåˆ¶å’Œé€šé“ï¼ŒåŒ…æ‹¬ç‰¹å®šäºä¼ è¾“çš„è¿æ¥å»ºç«‹ã€æ¶ˆæ¯å¸§å’Œæˆæƒã€‚</li>
</ul>
<p>ä»æ¦‚å¿µä¸Šè®²ï¼Œæ•°æ®å±‚æ˜¯å†…å±‚ï¼Œè€Œä¼ è¾“å±‚æ˜¯å¤–å±‚ã€‚</p>
<h2 data-id="heading-2">MCPçš„æ•°æ®å±‚</h2>
<p>æ•°æ®å±‚å®ç°äº†åŸºäº<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jsonrpc.org%2F" target="_blank" title="https://www.jsonrpc.org/" ref="nofollow noopener noreferrer">JSON-RPC 2.0</a>äº¤æ¢åè®®ï¼Œè¯¥åè®®å®šä¹‰äº†æ¶ˆæ¯ç»“æ„å’Œè¯­ä¹‰ã€‚è¯¥å±‚åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>ï¼šå¤„ç†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥åˆå§‹åŒ–ã€èƒ½åŠ›åå•†å’Œè¿æ¥ç»ˆæ­¢ã€‚</li>
<li><strong>æœåŠ¡å™¨åŠŸèƒ½</strong>ï¼šä½¿æœåŠ¡å™¨èƒ½å¤Ÿæä¾›æ ¸å¿ƒåŠŸèƒ½ï¼ŒåŒ…æ‹¬ç”¨äº AI æ“ä½œçš„å·¥å…·ã€ä¸Šä¸‹æ–‡æ•°æ®èµ„æºä»¥åŠæ¥è‡ªå®¢æˆ·ç«¯å’Œä¸å®¢æˆ·ç«¯äº¤äº’çš„æ¨¡æ¿æç¤ºã€‚</li>
<li><strong>å®¢æˆ·ç«¯åŠŸèƒ½</strong>ï¼šä½¿æœåŠ¡å™¨èƒ½å¤Ÿè¯·æ±‚å®¢æˆ·ç«¯ä»ä¸»æœºLLMè¿›è¡Œé‡‡æ ·ã€è·å–ç”¨æˆ·è¾“å…¥ä»¥åŠå‘å®¢æˆ·ç«¯è®°å½•æ¶ˆæ¯ã€‚</li>
<li><strong>å®ç”¨åŠŸèƒ½</strong>ï¼šæ”¯æŒå®æ—¶æ›´æ–°é€šçŸ¥å’Œé•¿æ—¶é—´è¿è¡Œæ“ä½œçš„è¿›åº¦è·Ÿè¸ªç­‰é™„åŠ åŠŸèƒ½</li>
</ul>
<p>è¯¥åè®®æ”¯æŒ<strong>å®æ—¶é€šçŸ¥</strong>ï¼Œä»è€Œå®ç°æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´çš„<strong>åŠ¨æ€æ›´æ–°</strong>ã€‚ä¾‹å¦‚ï¼Œå½“æœåŠ¡å™¨çš„å¯ç”¨å·¥å…·å‘ç”Ÿå˜åŒ–æ—¶ï¼ˆå½“æ–°åŠŸèƒ½ä¸Šçº¿æˆ–ç°æœ‰å·¥å…·è¢«ä¿®æ”¹æ—¶ï¼‰ï¼ŒæœåŠ¡å™¨å¯ä»¥å‘é€å·¥å…·æ›´æ–°é€šçŸ¥ï¼Œå‘ŠçŸ¥å·²è¿æ¥çš„å®¢æˆ·ç«¯è¿™äº›å˜åŒ–ã€‚é€šçŸ¥ä»¥ JSON-RPC 2.0 é€šçŸ¥æ¶ˆæ¯çš„å½¢å¼å‘é€ï¼ˆæ— éœ€å“åº”ï¼‰ï¼Œä½¿ MCP æœåŠ¡å™¨èƒ½å¤Ÿå‘å·²è¿æ¥çš„å®¢æˆ·ç«¯æä¾›å®æ—¶æ›´æ–°ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œå°±å’Œæˆ‘ä»¬é…ç½®ä¸­å¿ƒNacosã€Apolloé€šè¿‡<strong>è®¢é˜…-æ¨é€æœºåˆ¶</strong>å®ç°<strong>é…ç½®çƒ­æ›´æ–°</strong>å·®ä¸å¤š</p>
<h2 data-id="heading-3">MCPçš„ä¼ è¾“å±‚</h2>
<p>ä¼ è¾“å±‚ç®¡ç†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡é€šé“å’Œèº«ä»½éªŒè¯ã€‚å®ƒå¤„ç†è¿æ¥å»ºç«‹ã€æ¶ˆæ¯å¸§æ„å»ºä»¥åŠMCPå‚ä¸è€…ä¹‹é—´çš„å®‰å…¨é€šä¿¡ã€‚MCPæ”¯æŒä¸¤ç§ä¼ è¾“æœºåˆ¶ï¼š</p>
<ul>
<li><strong>Stdio ä¼ è¾“</strong>ï¼šä½¿ç”¨æ ‡å‡†è¾“å…¥/è¾“å‡ºæµåœ¨åŒä¸€å°æœºå™¨ä¸Šçš„æœ¬åœ°è¿›ç¨‹ä¹‹é—´è¿›è¡Œç›´æ¥è¿›ç¨‹é€šä¿¡ï¼Œæä¾›æœ€ä½³æ€§èƒ½ï¼Œä¸”æ— ç½‘ç»œå¼€é”€ã€‚</li>
<li><strong>å¯æµå¼ HTTP ä¼ è¾“</strong>ï¼šä½¿ç”¨ HTTP POST è¯·æ±‚è¿›è¡Œå®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„æ¶ˆæ¯é€šä¿¡ï¼Œå¹¶å¯é€‰ä½¿ç”¨æœåŠ¡å™¨é€šè¿‡SSEæ¥å®ç°æµå¼ä¼ è¾“åŠŸèƒ½ã€‚æ­¤ä¼ è¾“æ–¹å¼æ”¯æŒè¿œç¨‹æœåŠ¡å™¨é€šä¿¡ï¼Œå¹¶æ”¯æŒåŒ…æ‹¬æŒæœ‰è€…ä»¤ç‰Œã€API å¯†é’¥å’Œè‡ªå®šä¹‰æ ‡å¤´åœ¨å†…çš„æ ‡å‡† HTTP èº«ä»½éªŒè¯æ–¹æ³•ã€‚MCP å»ºè®®ä½¿ç”¨ OAuth è·å–èº«ä»½éªŒè¯ä»¤ç‰Œã€‚</li>
</ul>
<p>ä¼ è¾“å±‚å°†é€šä¿¡ç»†èŠ‚ä»åè®®å±‚ä¸­æŠ½è±¡å‡ºæ¥ï¼Œä»è€Œå®ç°æ‰€æœ‰ä¼ è¾“æœºåˆ¶éƒ½é‡‡ç”¨ç›¸åŒçš„ JSON-RPC 2.0 æ¶ˆæ¯æ ¼å¼ã€‚</p>
<p>okï¼Œè¿™å°±è¦†ç›–åˆ°æˆ‘ä»¬ä¸Šä¸€ç¯‡çš„çŸ¥è¯†äº†ï¼Œä¸ºä»€ä¹ˆMCPå¯ä»¥ç»Ÿä¸€æ•°æ®æ ¼å¼å’Œä¼ è¾“ï¼ŒåŒæ—¶å¯ä»¥é¢„åˆ¶æ¨¡æ¿ï¼ŒåŸå› å°±åœ¨äº<strong>ä¼ è¾“å±‚æŠ½è±¡æˆäº†ç»Ÿä¸€çš„æ ‡å‡†</strong>ï¼Œæ— è®ºæ˜¯ä»€ä¹ˆä¼ è¾“æœºåˆ¶ï¼Œå¤§å®¶åªè¦æŒ‰ç…§è¿™ä¸€æ ‡å‡†æ¥ä¼ è¾“æ•°æ®å³å¯å®ç°äº’é€šã€‚</p>
<h2 data-id="heading-4">é€šä¿¡åè®®ä¸æ•°æ®ä¼ è¾“åœ¨MCPé‡Œé¢æ˜¯ä»€ä¹ˆæ ·å­çš„</h2>
<p>æˆ‘ä»¬æ¥ä¸€ä¸ªå›¾æ¥å±•ç¤ºé€šä¿¡åè®®ä¸æ•°æ®ä¼ è¾“åœ¨MCPçš„å……å½“çš„è§’è‰²</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fbb577bf59e648ea804c649072e498c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oOz55Sob2ZmZXLmiZPniYw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771173984&amp;x-signature=IHtI%2FG05uJ5HD75TxEr9uAwACwc%3D" alt="image.png" loading="lazy"/></p>
<p>å±•ç¤ºä¸€ä¸‹æ•°æ®æ ¼å¼ï¼Œæˆ‘ä»¬ä»¥<strong>STDIO</strong> (æ ‡å‡†è¾“å…¥/è¾“å‡º)ä¸ºä¾‹å­</p>
<p>è¿æ¥å»ºç«‹åï¼Œå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡å‘é€<code>tools/list</code>è¯·æ±‚æ¥å‘ç°å¯ç”¨çš„å·¥å…·ã€‚æ­¤è¯·æ±‚æ˜¯ MCP å·¥å…·å‘ç°æœºåˆ¶çš„åŸºç¡€â€”â€”å®ƒå…è®¸å®¢æˆ·ç«¯åœ¨å°è¯•ä½¿ç”¨å·¥å…·ä¹‹å‰äº†è§£æœåŠ¡å™¨ä¸Šæœ‰å“ªäº›å·¥å…·å¯ç”¨</p>
<p>ç„¶åæœåŠ¡ç«¯å°±è¿”å›å¯è°ƒç”¨çš„tools(åŒ…æ‹¬åç§°ã€æè¿°ã€æ•°æ®æ ¼å¼ç­‰)ç»™å®¢æˆ·ç«¯</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// Request</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tools/list"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-comment">// Response</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"tools"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"search_flights"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Search for available flights"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"inputSchema"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"object"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"origin"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"destination"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"date"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"format"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"date"</span><span class="hljs-punctuation">}</span>
          <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"origin"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"destination"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"date"</span><span class="hljs-punctuation">]</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-5">å°ç»“</h2>
<p>åœ¨è¿™ä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦è®²è§£äº†MCPå®ƒå®ç°çš„é€šä¿¡åè®®å’Œæ•°æ®æ ¼å¼ï¼Œè¿™å°±ç»™æˆ‘ä»¬å‰é¢MCPå¦‚ä½•å®ç°çš„æŠ½è±¡å’Œæ•°æ®å¦‚ä½•ä¼ è¾“çš„é—®é¢˜è§£äº†æƒ‘ã€‚</p>
<p>ä¸‹ä¸€ç¯‡æˆ‘ä»¬è®²è®²MCPçš„ä¸‰å¤§æ ¸å¿ƒåŸè¯­ã€ç”Ÿå‘½å‘¨æœŸç­‰é—®é¢˜</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç‘å¹¸å’–å•¡ x é˜¿é‡Œäº‘åˆä½œå…±åˆ›ï¼šAI æ¨èè®©ç‘å¹¸å’–å•¡â€œæ›´æ‡‚ä½ ]]></title>    <link>https://juejin.cn/post/7604741630449991714</link>    <guid>https://juejin.cn/post/7604741630449991714</guid>    <pubDate>2026-02-10T07:49:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604741630449991714" data-draft-id="7604766431226396712" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç‘å¹¸å’–å•¡ x é˜¿é‡Œäº‘åˆä½œå…±åˆ›ï¼šAI æ¨èè®©ç‘å¹¸å’–å•¡â€œæ›´æ‡‚ä½  "/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-10T07:49:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2414974667341287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç‘å¹¸å’–å•¡ x é˜¿é‡Œäº‘åˆä½œå…±åˆ›ï¼šAI æ¨èè®©ç‘å¹¸å’–å•¡â€œæ›´æ‡‚ä½  
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2414974667341287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T07:49:48.000Z" title="Tue Feb 10 2026 07:49:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ–°é›¶å”®ä¸æ–­æ¼”è¿›çš„ä»Šå¤©ï¼Œç”¨æˆ·èµ°è¿›ç‘å¹¸ï¼Œè¦çš„ä¸åªæ˜¯å’–å•¡ï¼Œæ›´æ˜¯ä¸€ç§â€œè¢«çœŸæ­£ç†è§£â€çš„ä½“éªŒâ€”â€”å£å‘³ã€ä¹ æƒ¯ã€åœºæ™¯ï¼Œç”šè‡³é‚£ä¸€åˆ»çš„å¿ƒæƒ…ã€‚ä½œä¸ºå›½å†…é¢†å…ˆçš„è¿é”å’–å•¡å“ç‰Œï¼Œç‘å¹¸å’–å•¡æ­£ä»æ•°å­—åŒ–è¿ˆå…¥æ™ºèƒ½åŒ–æ–°é˜¶æ®µï¼Œä»¥äººå·¥æ™ºèƒ½æŠ€æœ¯é©±åŠ¨â€œäººã€è´§ã€åœºâ€æ ¸å¿ƒä¸šåŠ¡å¹³å°çš„æ™ºèƒ½åŒ–é‡æ„ï¼Œæ„å»ºé¢å‘æœªæ¥çš„æ™ºæ…§å•†ä¸šå†³ç­–ä½“ç³»ã€‚</p>
<p>ä¸ºæ­¤ï¼Œç‘å¹¸ä¸é˜¿é‡Œäº‘æ·±åº¦å…±åˆ›ï¼ŒåŸºäºé˜¿é‡Œäº‘äººå·¥æ™ºèƒ½å¹³å°PAIï¼Œå…±åŒæ‰“é€ äº†ä¸€å¥—çœŸæ­£â€œä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒâ€çš„ç«¯åˆ°ç«¯æ™ºèƒ½æ¨èç³»ç»Ÿã€‚å®ƒä¸å†ä¾èµ–é™æ€è§„åˆ™ï¼Œè€Œæ˜¯é€šè¿‡ç†è§£ç”¨æˆ·çš„åå¥½å’Œéœ€æ±‚ï¼Œä¸ºç”¨æˆ·æä¾›è´´å¿ƒçš„å’–å•¡é€‰æ‹©å»ºè®®â€”â€”æ— è®ºæ˜¯æ¸…æ™¨æç¥çš„ç¾å¼ï¼Œè¿˜æ˜¯å‘¨æœ«æ…µæ‡’çš„ç”Ÿæ¤°æ‹¿é“ï¼Œå½“ä½ å”¤é†’AIÂ Luckyï¼Œâ€œä¸ºä½ è€Œé€‰â€çš„æ–°å“ã€ä¼˜æƒ ä¸æ­é…ï¼Œå°±ä¼šé€åˆ°ä½ çœ¼å‰ï¼Œè®©æ¯ä¸€æ¬¡é€‰æ‹©éƒ½æ›´è½»æ¾ã€æ›´å®‰å¿ƒã€‚</p>
<p>è¿‡å»ä¾èµ–äººå·¥è§„åˆ™çš„æ¨èæ–¹å¼ï¼Œéš¾ä»¥åŠ¨æ€å“åº”ç”¨æˆ·å˜åŒ–ï¼›å¦‚ä»Šï¼Œå€ŸåŠ©åŒæ–¹è”åˆæ‰“ç£¨çš„æ•°æ®é“¾è·¯ã€ç®—æ³•æ¨¡å‹ä¸è¿è¥æœºåˆ¶ï¼Œç‘å¹¸ä¸ä»…å®ç°äº†æ¨èç²¾å‡†åº¦çš„è·ƒå‡ï¼Œä¹Ÿè®©ç”¨æˆ·è·å¾—æ›´æµç•…ã€æ›´è´´å¿ƒçš„æœåŠ¡ä½“éªŒã€‚</p>
<p>è¿™æ¬¡åˆä½œï¼Œæ˜¯ç‘å¹¸AIèƒ½åŠ›ä½“ç³»è¿›åŒ–çš„é‡è¦ä¸€æ­¥ï¼Œæ›´æ˜¯ä¸é˜¿é‡Œäº‘â€œä¸€èµ·è®¾è®¡ã€ä¸€èµ·éªŒè¯ã€ä¸€èµ·äº¤ä»˜ã€ä¸€èµ·æ²‰æ·€â€çš„æŠ€æœ¯å…±åˆ›å…¸èŒƒâ€”â€”ä¸æ˜¯å•æ–¹é¢äº¤ä»˜äº§å“ï¼Œè€Œæ˜¯å…±åŒæ„å»ºé¢å‘æœªæ¥çš„æ™ºèƒ½é›¶å”®èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-0">ä»è§„åˆ™é©±åŠ¨åˆ° AI é©±åŠ¨ï¼šèµ‹èƒ½å¢é•¿æ–°èŒƒå¼</h2>
<p>æˆªè‡³2025å¹´ç¬¬ä¸‰å­£åº¦ï¼Œç‘å¹¸å’–å•¡å·²å»ºç«‹èµ·è¦†ç›–å…¨å›½è¶…2.9ä¸‡å®¶é—¨åº—çš„åºå¤§ç½‘ç»œã€‚éšç€ç”¨æˆ·è§„æ¨¡æŒç»­æ‰©å¤§ï¼Œç‘å¹¸å’–å•¡ä¹Ÿåœ¨ä¸æ–­æ¢ç´¢æ–°æŠ€æœ¯å¢åŠ å¯¹äºå®¢æˆ·çš„ç†è§£ï¼Œä¸ºå®¢æˆ·æä¾›æ›´åŠ çµæ´»çš„æœåŠ¡ã€‚</p>
<p>ä¸ºæ¢ç´¢AIèµ‹èƒ½å¢é•¿æ–°èŒƒå¼ï¼Œç‘å¹¸è‡´åŠ›äºæ„å»ºä¸€å¥—å…·å¤‡é«˜ç²¾åº¦ã€å¯è¿­ä»£ã€å¯æ‰©å±•èƒ½åŠ›çš„AIæ¨èç³»ç»Ÿã€‚ç»è¿‡å¤šè½®æŠ€æœ¯è¯„ä¼°ä¸æ–¹æ¡ˆè®ºè¯ï¼Œç‘å¹¸æœ€ç»ˆä¸é˜¿é‡Œäº‘å¤§æ•°æ®AIå¹³å°åˆä½œå…±åˆ›ï¼Œé‡‡ç”¨MaxCompute+DataWorks+Flink+Hologres+PAIæŠ€æœ¯æ¶æ„ï¼Œä»¥PAI-Recä½œä¸ºå…¶æ–°ä¸€ä»£æ¨èå¼•æ“ï¼Œä¾æ‰˜å…¶å¼ºå¤§çš„å¤§æ•°æ®ã€ç®—æ³•èƒ½åŠ›ä¸å…¨é“¾è·¯æœåŠ¡æ”¯æŒï¼Œå¼€å¯æå‡ç”¨æˆ·æ¨èä½“éªŒçš„æ™ºèƒ½åŒ–å‡çº§ã€‚</p>
<h2 data-id="heading-1">ä¸å®¢æˆ·å…±åˆ›ï¼ŒåŠ©åŠ›å®¢æˆ·èƒ½åŠ›æ²‰æ·€</h2>
<p>æ­¤æ¬¡åˆä½œä¸ä»…æ˜¯æŠ€æœ¯äº§å“çš„è½åœ°ï¼Œæ›´æ˜¯ä¸€æ¬¡æ·±åº¦çš„â€œæŠ€æœ¯å…±åˆ›â€å®è·µã€‚é˜¿é‡Œäº‘æŠ€æœ¯å›¢é˜Ÿä¸ç‘å¹¸æŠ€æœ¯å›¢é˜Ÿç´§å¯†åä½œï¼Œå…¨ç¨‹å‚ä¸éœ€æ±‚åˆ†æã€POCéªŒè¯ã€ç³»ç»Ÿä¸Šçº¿ä¸æ•ˆæœä¼˜åŒ–ã€‚</p>
<p>åœ¨é¡¹ç›®æ¨è¿›è¿‡ç¨‹ä¸­ï¼Œé˜¿é‡Œäº‘æŠ€æœ¯å›¢é˜Ÿä¸ç‘å¹¸å›¢é˜Ÿé«˜æ•ˆååŒï¼Œé«˜è´¨é‡å®Œæˆå¤šç»„å¯¹æ¯”å®éªŒï¼Œå¹¶ç»„ç»‡å¤šæ¬¡æŠ€æœ¯äº¤æµï¼ŒååŠ©ç‘å¹¸ç³»ç»Ÿæ€§åœ°æ²‰æ·€äº†<strong>æ•°æ®å¤„ç†è§„èŒƒã€ç‰¹å¾å·¥ç¨‹æ–¹æ³•ã€æ¨¡å‹è°ƒä¼˜ç­–ç•¥åŠæµ‹è¯•ä½“ç³»</strong>ï¼Œä¸ºå…¶åç»­è‡ªä¸»è¿­ä»£ä¸ä¸šåŠ¡æ‰©å±•æ‰“ä¸‹åšå®åŸºç¡€ã€‚</p>
<h2 data-id="heading-2">å±•æœ›æœªæ¥ï¼šAI é©±åŠ¨â€œæ›´æ‡‚ä½ çš„å’–å•¡â€</h2>
<p>æœ¬æ¬¡åˆä½œä¸ä»…ä¸ºç‘å¹¸å¸¦æ¥äº†æ˜¾è‘—çš„ä¸šåŠ¡å‡çº§ï¼Œä¹Ÿä¸ºé˜¿é‡Œäº‘äººå·¥æ™ºèƒ½å¹³å°PAIåœ¨é›¶å”®è¡Œä¸šæ ‘ç«‹äº†æ ‡æ†æ¡ˆä¾‹ã€‚</p>
<p>â€œæœ¬æ¬¡ä¸é˜¿é‡Œäº‘åˆä½œçš„AIæ™ºèƒ½æ¨èåœºæ™¯ï¼Œæä¾›çš„ä¸ä»…æ˜¯ä¸€ä¸ªå·¥å…·ã€ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œæ›´æ˜¯ä¸€æ¬¡åŒæ–¹å…±åˆ›åˆä½œç»éªŒçš„è½åœ°ã€‚â€ç‘å¹¸æŠ€æœ¯è´Ÿè´£äººè¡¨ç¤ºï¼Œâ€œä»POCåˆ°å…¨é‡ä¸Šçº¿ï¼Œé˜¿é‡Œäº‘å›¢é˜Ÿå±•ç°äº†æå¼ºçš„æŠ€æœ¯å®åŠ›ä¸æœåŠ¡æ„è¯†ã€‚æˆ‘ä»¬ç›¸ä¿¡ï¼ŒAIå°†æˆä¸ºç‘å¹¸æŒç»­é¢†è·‘è¡Œä¸šçš„é‡è¦å¼•æ“ã€‚â€</p>
<p>ä¸€æ¯å’–å•¡çš„èƒŒåï¼Œæ˜¯æµ·é‡æ•°æ®çš„æµè½¬ä¸AIæ¨¡å‹çš„ç²¾å‡†è®¡ç®—ã€‚éšç€æ¨èç³»ç»Ÿçš„æŒç»­ä¼˜åŒ–ï¼Œç‘å¹¸å’–å•¡çš„è¿è¥æ¨¡å¼å®ç°â€œæ›´æ™ºèƒ½ã€æ›´ä¸ªæ€§ã€æ›´é«˜æ•ˆâ€ã€‚æœªæ¥ï¼ŒåŒæ–¹è¿˜å°†æ¢ç´¢å¤§æ¨¡å‹åœ¨ç”¨æˆ·æ„å›¾ç†è§£ã€ç”Ÿæˆå¼æ¨èã€è·¨åœºæ™¯è”åŠ¨ç­‰æ–¹å‘çš„åˆ›æ–°åº”ç”¨ï¼Œè¿›ä¸€æ­¥é‡Šæ”¾AIåœ¨æ¶ˆè´¹åœºæ™¯ä¸­çš„æ½œåŠ›ã€‚</p>
<p>ç‘å¹¸å’–å•¡Â xÂ é˜¿é‡Œäº‘å¤§æ•°æ®AIå¹³å°çš„åˆä½œï¼Œä¸ä»…æ˜¯ä¸€æ¬¡æŠ€æœ¯å‡çº§ï¼Œæ›´æ˜¯AIèµ‹èƒ½å®ä½“ç»æµçš„ç”ŸåŠ¨å®è·µã€‚åœ¨æ™ºèƒ½åŒ–æµªæ½®ä¸­ï¼ŒAIå°†æˆä¸ºæ‚¨çš„ä¸“å±å’–å•¡åŠ©æ‰‹â€”â€”ä»æµ·é‡é£å‘³ä¸­ï¼ŒAIæ¨èä¸ºæ‚¨æ¢ç´¢æ„æƒ³ä¸åˆ°çš„æƒŠå–œä¹‹é€‰ï¼Œè®©å’–å•¡æ›´æ‡‚ä½ ã€‚</p>
<h2 data-id="heading-3">é˜¿é‡Œäº‘ AI æ¨èæ–¹æ¡ˆï¼šæ‰“é€ ç«¯åˆ°ç«¯æ™ºèƒ½æ¨èå¼•æ“</h2>
<p>ä¸‹é¢å°†é‡ç‚¹ä»‹ç»é˜¿é‡Œäº‘AIæ¨èæ–¹æ¡ˆåœ¨è¯¥åœºæ™¯ä¸­çš„æŠ€æœ¯äº®ç‚¹ä¸åº”ç”¨ä¼˜åŠ¿ã€‚</p>
<p>é˜¿é‡Œäº‘AIæ¨èæ–¹æ¡ˆæ˜¯é¢å‘ä¼ä¸šçº§åœºæ™¯çš„å…¨æ‰˜ç®¡æ¨èç®—æ³•æœåŠ¡å¹³å°ï¼Œæ·±åº¦èåˆé˜¿é‡Œå·´å·´åœ¨ç”µå•†ã€æœ¬åœ°ç”Ÿæ´»ç­‰é«˜å¹¶å‘ã€é«˜å®æ—¶æ€§åœºæ™¯ä¸‹çš„æ¨èå®è·µç»éªŒï¼Œæä¾›ä»æ•°æ®å¤„ç†ã€ç‰¹å¾å·¥ç¨‹ã€æ¨¡å‹è®­ç»ƒã€æµ‹è¯•éªŒè¯åˆ°åœ¨çº¿æœåŠ¡çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆã€‚</p>
<p>åœ¨æœ¬æ¬¡åˆä½œä¸­ï¼Œé˜¿é‡Œäº‘ä¸ºç‘å¹¸å’–å•¡é‡èº«æ‰“é€ äº†è¦†ç›–â€œæ•°æ®Â â†’Â æ¨¡å‹Â â†’Â æœåŠ¡Â â†’Â è¿­ä»£â€çš„å®Œæ•´æ¨èé“¾è·¯ï¼š</p>
<ul>
<li>
<p><strong>ç«¯åˆ°ç«¯ç³»ç»Ÿæ­å»º</strong>ï¼šåŸºäºå…¨æ‰˜ç®¡æ¶æ„çš„é˜¿é‡Œäº‘å¤§æ•°æ®AIå¹³å°ï¼Œæ­å»ºå®æ—¶æ¨èå…¨é“¾è·¯ï¼Œå¿«é€Ÿæ„å»ºä»æ•°æ®é‡‡é›†ã€å®æ—¶ç‰¹å¾è®¡ç®—ã€æ·±åº¦å­¦ä¹ æ¨¡å‹è®­ç»ƒåˆ°åœ¨çº¿æ¨ç†çš„å…¨æµç¨‹ç³»ç»Ÿï¼Œå®ç°æ¯«ç§’çº§å“åº”çš„AIæ¨èæœåŠ¡ã€‚</p>
</li>
<li>
<p><strong>ç²¾å‡†è½¬åŒ–ç‡æå‡</strong>ï¼šé€šè¿‡å¼•å…¥æ·±åº¦CTR/CVRé¢„ä¼°æ¨¡å‹ã€å¤šç›®æ ‡ä¼˜åŒ–ï¼ˆMMOEï¼‰åŠåºåˆ—å»ºæ¨¡ï¼ˆå¦‚DIENï¼‰ï¼Œæ˜¾è‘—æå‡æ¨èå†…å®¹çš„ç›¸å…³æ€§ä¸è½¬åŒ–æ•ˆç‡ã€‚ç»æµ‹è¯•éªŒè¯ï¼Œ<strong>æœ€ç»ˆè½¬åŒ–ç‡è¾ƒåŸæœ‰è§„åˆ™ç³»ç»Ÿæå‡æ˜æ˜¾</strong>ã€‚</p>
</li>
<li>
<p><strong>å…¨æ‰˜ç®¡è¿ç»´ï¼Œé‡Šæ”¾æŠ€æœ¯è´Ÿæ‹…</strong>ï¼šä¾æ‰˜äººå·¥æ™ºèƒ½å¹³å°PAIçš„è‡ªåŠ¨åŒ–è¿ç»´ä¸å¼¹æ€§ä¼¸ç¼©èƒ½åŠ›ï¼Œç‘å¹¸å›¢é˜Ÿå¾—ä»¥ä»ç¹é‡çš„ç³»ç»Ÿç»´æŠ¤ä¸­è§£æ”¾ï¼Œèšç„¦æ ¸å¿ƒä¸šåŠ¡åˆ›æ–°ï¼Œå¤§å¹…é™ä½AIè½åœ°é—¨æ§›ã€‚</p>
</li>
</ul>
<h2 data-id="heading-4">é˜¿é‡Œäº‘æ™ºèƒ½æ¨èç³»ç»Ÿè§£å†³æ–¹æ¡ˆ</h2>
<p>é˜¿é‡Œäº‘ä¸ºä¼ä¸šå¼€å‘è€…æä¾›å…¨é“¾è·¯æ·±åº¦å®šåˆ¶çš„æ¨èç³»ç»Ÿè§£å†³æ–¹æ¡ˆã€‚æ–¹æ¡ˆæ¶µç›–äº†ç¦»çº¿å¤„ç†ã€åœ¨çº¿æœåŠ¡ã€å®æ—¶æ•°æ®æµå’Œå·¥ç¨‹æ¶æ„ç­‰å¤šä¸ªç»´åº¦ï¼ŒåŒ…æ‹¬å¬å›ã€æ’åºã€è¿‡æ»¤å’Œé‡æ’ç­‰åŠŸèƒ½æ¨¡å—ï¼Œæä¾›å¤šç§æ•°æ®è¯Šæ–­åˆ†æã€æ¨èç»“æœè°ƒè¯•å’Œå¼•æ“å‘å¸ƒç®¡ç†ç­‰å·¥å…·ï¼Œé€šè¿‡A/BÂ testingæœåŠ¡å’Œå®éªŒæŠ¥è¡¨å¹³å°æå‡æ¨èç³»ç»Ÿçš„è¿­ä»£æ•ˆç‡ã€‚</p>
<p>æ­å»ºä¸€å¥—æ™ºèƒ½æ¨èç³»ç»Ÿï¼Œä¸»è¦åˆ†ä¸ºå››ä¸ªæ­¥éª¤ï¼šæ•°æ®å‡†å¤‡ã€ç¦»çº¿è®­ç»ƒã€åœ¨çº¿æœåŠ¡ä»¥åŠç®—æ³•è¿­ä»£ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1889b23a908e42ff8d598bd24ddebaa4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771314588&amp;x-signature=luuZ3PtzA0q9a6KArEIIYWPrK90%3D" alt="b2c90afc7fb4401ea91455467a5526dc.png" loading="lazy"/></p>
<p><strong>1.  æ•°æ®å‡†å¤‡</strong></p>
<ul>
<li>
<p>åŸºç¡€åŸ‹ç‚¹ä¸é‡‡é›†ï¼šé¦–å…ˆéœ€å®Œæˆç”¨æˆ·è¡Œä¸ºæ•°æ®çš„åŸ‹ç‚¹é‡‡é›†ï¼ŒåŒ…æ‹¬æ›å…‰ã€ç‚¹å‡»ã€åŠ è´­ã€æ”¶è—åŠä¸‹å•ç­‰æ ¸å¿ƒè¡Œä¸ºã€‚Â </p>
</li>
<li>
<p>åŸºç¡€è¡¨æ„å»ºï¼šè¿›è¡Œæ•°æ®ETLï¼Œäº§å‡ºä¸‰å¼ æ ¸å¿ƒåŸºç¡€è¡¨ï¼šç”¨æˆ·è¡¨ï¼ˆåŒ…å«å±æ€§åŠåå¥½æ ‡ç­¾ï¼‰ã€ç‰©å“è¡¨ï¼ˆåŒ…å«ç±»ç›®ã€ä»·æ ¼ç­‰å±æ€§ï¼‰åŠè¡Œä¸ºè¡¨ï¼ˆè®°å½•ç”¨æˆ·ä¸ç‰©å“çš„äº¤äº’æ—¶é—´åŠç±»å‹ï¼‰ã€‚Â </p>
</li>
<li>
<p>æ•°æ®æ™ºèƒ½è¯Šæ–­ï¼šå¯¹åŸå§‹æ•°æ®è¿›è¡Œæ½œåœ¨é—®é¢˜åˆ†æï¼Œè¯„ä¼°ç‰¹å¾çš„å¯ç”¨æ€§ä¸è¦†ç›–ç‡ï¼Œç¡®ä¿æ¨¡å‹è®­ç»ƒçš„è´¨é‡ã€‚</p>
</li>
</ul>
<p><strong>2.  ç¦»çº¿è®­ç»ƒ</strong></p>
<ul>
<li>
<p>ç®—æ³•å®šåˆ¶å¼€å‘ï¼šå¯¹å¬å›ï¼ˆå¦‚EtrecååŒè¿‡æ»¤ï¼‰ã€ç²—æ’ã€ç²¾æ’ï¼ˆå¦‚DBMTLå¤šç›®æ ‡è®­ç»ƒï¼‰ç­‰ç®—æ³•çš„æ·±åº¦å®šåˆ¶ã€‚Â </p>
</li>
<li>
<p>ç‰¹å¾ä¸æ ·æœ¬å‡†å¤‡ï¼šé€šè¿‡ç¦»çº¿è°ƒåº¦ä»»åŠ¡ï¼Œå®Œæˆç‰¹å¾æŠ½å–ä¸æ­£è´Ÿæ ·æœ¬æ„é€ ã€‚ç»Ÿä¸€ç®¡ç†ç¦»çº¿ç‰¹å¾ï¼Œç¡®ä¿ç¦»åœ¨çº¿ç‰¹å¾çš„ä¸€è‡´æ€§ã€‚Â </p>
</li>
<li>
<p>æ¨¡å‹è®­ç»ƒä¸è°ƒä¼˜ï¼šæ¨¡å‹è®­ç»ƒï¼Œå¹¶åˆ©ç”¨AutoMLè¿›è¡Œè‡ªåŠ¨è°ƒå‚ï¼Œæå‡æ¨¡å‹æ€§èƒ½ã€‚</p>
</li>
</ul>
<p><strong>3.  åœ¨çº¿æœåŠ¡</strong></p>
<ul>
<li>
<p>æ¨èå¼•æ“éƒ¨ç½²ï¼šéƒ¨ç½²å¬å›å’Œæ’åºæ¨¡å‹ï¼Œå¤„ç†åœ¨çº¿æ¨ç†è¯·æ±‚ã€‚</p>
</li>
<li>
<p>ç‰¹å¾å®æ—¶è¯»å–ï¼šåœ¨çº¿æ¨ç†æ—¶ï¼Œæ¨èå¼•æ“é«˜æ€§èƒ½å­˜å‚¨ä¸­è¯»å–ç”¨æˆ·å’Œç‰©å“ç‰¹å¾ï¼Œå¹¶ä¼ é€’ç»™PAI-EASæ‰“åˆ†ã€‚</p>
</li>
<li>
<p>è”è°ƒä¸æµ‹è¯•ï¼šä¸Šçº¿å‰è¿›è¡Œå…¨é“¾è·¯è”è°ƒï¼ŒéªŒè¯ç‰¹å¾ä¸€è‡´æ€§ï¼Œå¹¶è§‚å¯Ÿæ¨èç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸä¸šåŠ¡é€»è¾‘ã€‚</p>
</li>
</ul>
<p><strong>4.  ç®—æ³•è¿­ä»£</strong></p>
<ul>
<li>
<p>ABå®éªŒç›‘æ§ï¼šé€šè¿‡é…ç½®ABå®éªŒæŠ¥è¡¨å®æ—¶è§‚å¯ŸABå®éªŒæ•ˆæœã€‚åœ¨å®éªŒç»“æŸåï¼Œè¿›è¡Œæ•°æ®è¯Šæ–­ä»»åŠ¡ä»¥æ·±å…¥åˆ†æå®éªŒè¡¨ç°ã€‚</p>
</li>
<li>
<p>é—­ç¯ä¼˜åŒ–ï¼šæ ¹æ®å®éªŒç»“æœè°ƒæ•´ç‰¹å¾å’Œæ ·æœ¬ï¼Œæˆ–è€…è°ƒæ•´æ¨¡å‹æ¶æ„åé‡æ–°è®­ç»ƒã€‚</p>
</li>
<li>
<p>ç‰¹å¾è‡ªåŠ¨æŒ–æ˜ï¼šå¼•å…¥Â AutoFEï¼ˆè‡ªåŠ¨ç‰¹å¾å·¥ç¨‹ï¼‰Â æŠ€æœ¯ï¼Œåˆ©ç”¨ç®—æ³•è‡ªåŠ¨æŒ–æ˜æ–°ç‰¹å¾ï¼Œè¿›ä¸€æ­¥æå‡æ¨èçš„ç²¾å‡†åº¦ã€‚</p>
</li>
</ul>
<p>æ­å»ºä¸€å¥—æ™ºèƒ½æ¨èç³»ç»Ÿæ–¹æ¡ˆï¼Œä¸»è¦ä¾èµ–çš„äº‘äº§å“ï¼ŒåŒ…æ‹¬ï¼šPAI-Recã€PAIã€FeatureStoreã€MaxCompute+Dataworksç­‰ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2879c98e7d64b678bcdb7cf1c45520a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771314588&amp;x-signature=dOIcfhPftzKLoaOBR4FnlmRQMUI%3D" alt="99f82c99fb984380a2e17d23d9210218.png" loading="lazy"/></p>
<p>PAI-Recä½¿ç”¨EasyRecè®­ç»ƒå¬å›å’Œæ’åºæ¨¡å‹ï¼Œä½¿ç”¨PAI-Recå¼•æ“æ­å»ºæ¨èç³»ç»Ÿï¼›é€šè¿‡Â DataWorksÂ ç¼–è¾‘å’Œè°ƒåº¦ç‰¹å¾å·¥ç¨‹ã€æ ·æœ¬å’Œæ¨¡å‹è®­ç»ƒçš„ä»£ç ï¼›ä½¿ç”¨ç‰¹å¾æ•°æ®åº“FeatureDBå­˜å‚¨ç”¨æˆ·ç‰¹å¾ã€i2iç›¸å…³ç‰©å“å’Œå‘é‡åº“ï¼›ä½¿ç”¨PAI-EASÂ æä¾›å¯å¼¹æ€§æ‰©ç¼©å®¹çš„æ‰“åˆ†æœåŠ¡ã€‚</p>
<p>å…·ä½“è¯´æ˜å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p><strong>äººå·¥æ™ºèƒ½å¹³å°PAIï¼š</strong> é¢å‘å¼€å‘è€…å’Œä¼ä¸šçš„æœºå™¨å­¦ä¹ /æ·±åº¦å­¦ä¹ å·¥ç¨‹å¹³å°ï¼Œæä¾›åŒ…å«æ•°æ®æ ‡æ³¨ã€æ¨¡å‹æ„å»ºã€æ¨¡å‹è®­ç»ƒã€æ¨¡å‹éƒ¨ç½²ã€æ¨ç†ä¼˜åŒ–åœ¨å†…çš„AIå¼€å‘å…¨é“¾è·¯æœåŠ¡ã€‚</p>
</li>
<li>
<p><strong>EasyRecç®—æ³•æ¡†æ¶ï¼š</strong> å†…ç½®ä¸šç•Œå…ˆè¿›çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œæ”¯æŒå¤šç§Tensorflowç‰ˆæœ¬ï¼ˆ&gt;=1.12,Â &lt;=2.4,Â PAI-TF)å’ŒÂ PyTorchÂ ç‰ˆæœ¬ï¼Œè¦†ç›–äº†æ¨èå…¨é“¾è·¯çš„éœ€æ±‚ï¼ŒåŒ…æ‹¬å¬å›ã€ç²—æ’ã€æ’åºã€é‡æ’ã€å¤šç›®æ ‡å’Œå†·å¯åŠ¨ç­‰ã€‚å¼€å‘è€…å¯åŸºäºEasyRecç®—æ³•æ¡†æ¶åŠ é€Ÿè¿­ä»£æ¨èå…¨é“¾è·¯éœ€æ±‚ã€‚</p>
</li>
<li>
<p><strong>å¤§æ•°æ®å¼€å‘æ²»ç†å¹³å°DataWorks/äº‘åŸç”Ÿå¤§æ•°æ®è®¡ç®—æœåŠ¡MaxComputeï¼š</strong> åŸºäºäº‘åŸç”Ÿçš„å¤§æ•°æ®æœåŠ¡ï¼Œå¯æ­é…ä½¿ç”¨ï¼Œé’ˆå¯¹æ¨èç³»ç»Ÿä¸­ç‰¹å¾å¤„ç†ã€æ ·æœ¬ç”Ÿæˆã€ç”»åƒç®¡ç†ã€æ¨¡å‹è°ƒåº¦ã€æ•°æ®æ›´æ–°ç­‰ç¯èŠ‚ï¼Œæä¾›äº†æ˜“ç”¨çš„å¼€å‘å·¥å…·å’Œç¨³å®šçš„æ•°æ®ç¯å¢ƒã€‚</p>
</li>
<li>
<p><strong>ç‰¹å¾å¹³å°ç®¡ç†å·¥å…·FeatureStoreï¼š</strong> ç”¨äºå­˜å‚¨å’Œç®¡ç†ç¦»çº¿å’Œåœ¨çº¿æœåŠ¡ä¸­çš„ç‰¹å¾æ•°æ®ï¼Œç¡®ä¿äº†ä»ç¦»çº¿åˆ°åœ¨çº¿çš„ç‰¹å¾ç»Ÿä¸€ä¸é«˜æ•ˆå¤ç”¨ã€‚åŒæ—¶ï¼Œæ•´åˆäº†é˜¿é‡Œäº‘ä¸ŠDataHubã€Flinkã€Hologreså’ŒTablestoreç­‰äº§å“ï¼Œå¹¶ä¸”è‡ªç ”äº†æœç´¢æ¨èä¸“ç”¨çš„ç‰¹å¾æ•°æ®åº“FeatureDBï¼Œæä¾›ç‰¹å¾ç®¡ç†åŠŸèƒ½ã€‚</p>
</li>
</ul>
<p>è¿™å¥—â€œMaxCompute+DataWorks+Flink+Hologres+PAIâ€æ·±åº¦èåˆçš„æŠ€æœ¯æ¶æ„ï¼Œæ˜¯é¢å‘é›¶å”®ã€é‡‘èã€å‡ºè¡Œç­‰å¤šè¡Œä¸šåœºæ™¯çš„é€šç”¨å‹æ™ºèƒ½æ•°æ®ä¸­å°èŒƒæœ¬ã€‚æ— è®ºæ˜¯æ„å»ºAIé©±åŠ¨çš„æ¨èç³»ç»Ÿï¼Œè¿˜æ˜¯å®ç°å…¨åŸŸæ•°æ®èµ„äº§çš„ä»·å€¼é‡Šæ”¾ï¼Œé˜¿é‡Œäº‘Data+AIç³»åˆ—äº§å“éƒ½èƒ½ä¸ºä¼ä¸šæä¾›ä»â€œæ•°æ®åˆ°æ™ºèƒ½â€çš„å…¨æ ˆèµ‹èƒ½ã€‚</p>
<p>æœªæ¥å·²æ¥ï¼Œæ™ºèƒ½ä¸æ­¢äºæ¨èã€‚è®©æ¯ä¸€æ¬¡äº¤äº’æ›´æ‡‚ç”¨æˆ·ï¼Œè®©æ¯ä¸€ä»½æ•°æ®åˆ›é€ ä»·å€¼â€”â€”é˜¿é‡Œäº‘å¤§æ•°æ®ä¸AIäº§å“ç»„åˆï¼ŒåŠ©åŠ›ä¼ä¸šé©¶å…¥æ™ºèƒ½åŒ–å¿«è½¦é“ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åƒä¸‡çº§æ•°æ®ç§’çº§å¯¹è´¦ï¼é“¶è¡Œæ—¥ç»ˆæ‰¹å¤„ç†å¯¹è´¦ç³»ç»Ÿä»ç†è®ºåˆ°å®æˆ˜]]></title>    <link>https://juejin.cn/post/7603677143215472655</link>    <guid>https://juejin.cn/post/7603677143215472655</guid>    <pubDate>2026-02-09T01:03:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603677143215472655" data-draft-id="7603688142004862985" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åƒä¸‡çº§æ•°æ®ç§’çº§å¯¹è´¦ï¼é“¶è¡Œæ—¥ç»ˆæ‰¹å¤„ç†å¯¹è´¦ç³»ç»Ÿä»ç†è®ºåˆ°å®æˆ˜"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-02-09T01:03:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ä¸­é£˜è¡çš„è®°å¿†"/> <meta itemprop="url" content="https://juejin.cn/user/694547077666606"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åƒä¸‡çº§æ•°æ®ç§’çº§å¯¹è´¦ï¼é“¶è¡Œæ—¥ç»ˆæ‰¹å¤„ç†å¯¹è´¦ç³»ç»Ÿä»ç†è®ºåˆ°å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547077666606/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ä¸­é£˜è¡çš„è®°å¿†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T01:03:50.000Z" title="Mon Feb 09 2026 01:03:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åƒä¸‡çº§æ•°æ®ç§’çº§å¯¹è´¦ï¼é“¶è¡Œæ—¥ç»ˆæ‰¹å¤„ç†å¯¹è´¦ç³»ç»Ÿä»ç†è®ºåˆ°å®æˆ˜</h2>
<blockquote>
<p>åœ¨é‡‘èæ”¯ä»˜é¢†åŸŸï¼Œæ—¥ç»ˆå¯¹è´¦æ˜¯ç¡®ä¿èµ„é‡‘å®‰å…¨çš„é‡è¦ç¯èŠ‚ã€‚æœ¬æ–‡å°†å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œè®¾è®¡å¹¶å®ç°ä¸€ä¸ªèƒ½å¤Ÿå¤„ç†åƒä¸‡çº§äº¤æ˜“æ•°æ®çš„æ‰¹å¤„ç†å¯¹è´¦ç³»ç»Ÿï¼Œä½¿ç”¨å¤šçº¿ç¨‹æŠ€æœ¯å®ç°æ€§èƒ½æå‡7å€ï¼</p>
</blockquote>
<h2 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦å¯¹è´¦ç³»ç»Ÿï¼Ÿ</h2>
<h2 data-id="heading-2">1.1 ä¸šåŠ¡èƒŒæ™¯</h2>
<p>åœ¨ç°ä»£åŒ–çš„æ”¯ä»˜ä½“ç³»ä¸­ï¼Œä¸€ç¬”äº¤æ˜“é€šå¸¸æ¶‰åŠå¤šä¸ªç³»ç»Ÿï¼š</p>
<pre><code class="hljs">ç”¨æˆ·æ”¯ä»˜ â†’ æ ¸å¿ƒé“¶è¡Œç³»ç»Ÿ â†’ ç¬¬ä¸‰æ–¹æ”¯ä»˜æ¸ é“ï¼ˆæ”¯ä»˜å®/å¾®ä¿¡/é“¶è”ï¼‰
</code></pre>
<p>ç”±äºç½‘ç»œå»¶è¿Ÿã€ç³»ç»Ÿæ•…éšœã€æ•°æ®åŒæ­¥ç­‰é—®é¢˜ï¼Œå¯èƒ½å¯¼è‡´ï¼š</p>
<ul>
<li><strong>é‡‘é¢ä¸ä¸€è‡´</strong>ï¼šæ ¸å¿ƒè®°å½•1000å…ƒï¼Œæ¸ é“è®°å½•999å…ƒ</li>
<li><strong>çŠ¶æ€ä¸ä¸€è‡´</strong>ï¼šæ ¸å¿ƒæ˜¾ç¤º"æˆåŠŸ"ï¼Œæ¸ é“æ˜¾ç¤º"å¤„ç†ä¸­"</li>
<li><strong>å•è¾¹è´¦</strong>ï¼šæ ¸å¿ƒæœ‰è®°å½•ä½†æ¸ é“æ²¡æœ‰ï¼Œæˆ–åä¹‹</li>
</ul>
<p>è¿™äº›é—®é¢˜å¦‚æœä¸åŠæ—¶å‘ç°å’Œå¤„ç†ï¼Œä¼šå¯¼è‡´èµ„é‡‘é£é™©å’Œåˆè§„é—®é¢˜ã€‚</p>
<h2 data-id="heading-3">1.2 å¯¹è´¦çš„æŒ‘æˆ˜</h2>
<p>ä¼ ç»Ÿçš„å¯¹è´¦æ–¹å¼é¢ä¸´ä»¥ä¸‹æŒ‘æˆ˜ï¼š</p>






























<table><thead><tr><th>æŒ‘æˆ˜</th><th>è¯´æ˜</th><th>å½±å“</th></tr></thead><tbody><tr><td>æ•°æ®é‡å¤§</td><td>æ—¥å‡åƒä¸‡çº§äº¤æ˜“è®°å½•</td><td>å¤„ç†è€—æ—¶é•¿</td></tr><tr><td>å®æ—¶æ€§è¦æ±‚</td><td>éœ€è¦åœ¨ä¸šåŠ¡å¼€å§‹å‰å®Œæˆ</td><td>æ—¶é—´çª—å£ç´§å¼ </td></tr><tr><td>å·®å¼‚ç±»å‹å¤š</td><td>é‡‘é¢ã€çŠ¶æ€ã€å•è¾¹è´¦ç­‰</td><td>åˆ†æå¤æ‚</td></tr><tr><td>å†å²æ•°æ®ç®¡ç†</td><td>éœ€è¦ä¿å­˜å’ŒæŸ¥è¯¢å†å²</td><td>å­˜å‚¨æˆæœ¬é«˜</td></tr></tbody></table>
<h2 data-id="heading-4">äºŒã€æ ¸å¿ƒç†è®ºçŸ¥è¯†</h2>
<h2 data-id="heading-5">2.1 å¯¹è´¦ç®—æ³•åŸç†</h2>
<p>å¯¹è´¦çš„æœ¬è´¨æ˜¯<strong>ä¸¤ä¸ªæ•°æ®é›†ä¹‹é—´çš„åŒ¹é…é—®é¢˜</strong>ã€‚</p>
<h2 data-id="heading-6">æœ´ç´ ç®—æ³•ï¼ˆO(nÂ²)ï¼‰</h2>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># åŒå±‚å¾ªç¯å¯¹æ¯”</span>
<span class="hljs-attr">for core_record in core_records:</span>
    <span class="hljs-attr">for channel_record in channel_records:</span>
        <span class="hljs-string">if</span> <span class="hljs-string">core_record.id</span> <span class="hljs-string">==</span> <span class="hljs-attr">channel_record.id:</span>
            <span class="hljs-string">compare(core_record,</span> <span class="hljs-string">channel_record)</span>
</code></pre>
<p><strong>æ—¶é—´å¤æ‚åº¦ï¼šO(nÂ²)</strong> - å¯¹äº1000ä¸‡æ¡æ•°æ®ï¼Œéœ€è¦10ä¸‡äº¿æ¬¡æ¯”è¾ƒï¼</p>
<h2 data-id="heading-7">å“ˆå¸Œç´¢å¼•ç®—æ³•ï¼ˆO(n+m)ï¼‰</h2>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æ„å»ºå“ˆå¸Œç´¢å¼•</span>
<span class="hljs-attr">hash_index</span> = {record.id: record for record in core_records}

<span class="hljs-comment"># çº¿æ€§éå†æ¸ é“æ•°æ®</span>
for channel_record in channel_records:
    <span class="hljs-attr">core_record</span> = hash_index.get(channel_record.id)
    if core_record:
        compare(core_record, channel_record)
</code></pre>
<p><strong>æ—¶é—´å¤æ‚åº¦ï¼šO(n+m)</strong> - å¯¹äº1000ä¸‡æ¡æ•°æ®ï¼Œåªéœ€2000ä¸‡æ¬¡æ“ä½œï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c2a1c9b652345ddbeab23f3196bacad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771203830&amp;x-signature=RfevG028wWDgAURgeXxAPlEH7sA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-8">2.2 å·®å¼‚ç±»å‹åˆ†ç±»</h2>



































<table><thead><tr><th>å·®å¼‚ç±»å‹</th><th>è‹±æ–‡æ ‡è¯†</th><th>è¯´æ˜</th><th>ä¸¥é‡ç¨‹åº¦</th></tr></thead><tbody><tr><td>é‡‘é¢å·®å¼‚</td><td>AMOUNT_DIFF</td><td>ä¸¤è¾¹æµæ°´å·ç›¸åŒä½†é‡‘é¢ä¸åŒ</td><td>â­â­â­â­</td></tr><tr><td>çŠ¶æ€å·®å¼‚</td><td>STATUS_DIFF</td><td>ä¸¤è¾¹æµæ°´å·ç›¸åŒä½†çŠ¶æ€ä¸åŒ</td><td>â­â­â­</td></tr><tr><td>æ ¸å¿ƒç‹¬æœ‰</td><td>CORE_ONLY</td><td>æ ¸å¿ƒæœ‰è®°å½•ä½†æ¸ é“æ²¡æœ‰</td><td>â­â­â­â­</td></tr><tr><td>æ¸ é“ç‹¬æœ‰</td><td>CHANNEL_ONLY</td><td>æ¸ é“æœ‰è®°å½•ä½†æ ¸å¿ƒæ²¡æœ‰</td><td>â­â­â­â­</td></tr></tbody></table>
<h2 data-id="heading-9">2.3 å¤šçº¿ç¨‹åŠ é€ŸåŸç†</h2>
<p>æ ¹æ®<strong>é˜¿å§†è¾¾å°”å®šå¾‹</strong>ï¼ˆAmdahl's Lawï¼‰ï¼Œå¹¶è¡ŒåŒ–çš„ç†è®ºåŠ é€Ÿæ¯”ï¼š</p>
<pre><code class="hljs language-css" lang="css">åŠ é€Ÿæ¯” = <span class="hljs-number">1</span> / ((<span class="hljs-number">1</span>-<span class="hljs-selector-tag">P</span>) + <span class="hljs-selector-tag">P</span>/N)
</code></pre>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li>P = å¯å¹¶è¡Œéƒ¨åˆ†çš„æ¯”ä¾‹</li>
<li>N = å¤„ç†å™¨æ•°é‡</li>
</ul>
<p>åœ¨å¯¹è´¦åœºæ™¯ä¸­ï¼š</p>
<ul>
<li>æ•°æ®é¢„å¤„ç†ï¼šå¯å¹¶è¡Œ 100%</li>
<li>æ•°æ®å¯¹æ¯”ï¼šå¯å¹¶è¡Œ 95%</li>
<li>ç»“æœæ±‡æ€»ï¼šå¯å¹¶è¡Œ 10%</li>
</ul>
<p>ä½¿ç”¨8æ ¸å¿ƒçº¿ç¨‹ï¼Œç†è®ºåŠ é€Ÿæ¯”å¯è¾¾ <strong>6-7å€</strong>ï¼</p>
<h2 data-id="heading-10">ä¸‰ã€ç³»ç»Ÿæ¶æ„è®¾è®¡</h2>
<h2 data-id="heading-11">3.1 æ•´ä½“æ¶æ„å›¾</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c03163d3dbd843d48e2f25a27ef2001d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771203830&amp;x-signature=2SsoSZixe90p83reHJCiHYnFrSA%3D" alt="" loading="lazy"/></p>
<p>ç³»ç»Ÿé‡‡ç”¨<strong>åˆ†å±‚æ¶æ„è®¾è®¡</strong>ï¼Œå…±åˆ†ä¸ºå››å±‚ï¼š</p>
<ol>
<li><strong>æ•°æ®æºå±‚</strong>ï¼šæ ¸å¿ƒé“¶è¡Œç³»ç»Ÿã€æ”¯ä»˜æ¸ é“ç³»ç»Ÿ</li>
<li><strong>æ•°æ®é‡‡é›†å±‚</strong>ï¼šå®šæ—¶è°ƒåº¦ã€ETLã€æ•°æ®æ¸…æ´—</li>
<li><strong>å¯¹è´¦å¤„ç†å±‚</strong>ï¼šåˆ†ç‰‡ã€å¤šçº¿ç¨‹å¤„ç†ã€å·®å¼‚åˆ†æ</li>
<li><strong>ç»“æœè¾“å‡ºå±‚</strong>ï¼šæŠ¥å‘Šç”Ÿæˆã€æ•°æ®å­˜å‚¨ã€å‘Šè­¦é€šçŸ¥</li>
</ol>
<h2 data-id="heading-12">3.2 æ•°æ®æµç¨‹å›¾</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fbbd7f3d341741ad8c9392cc71382127~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771203830&amp;x-signature=ck7Db5%2BcEsbv6QPG8359ybEMd0U%3D" alt="" loading="lazy"/></p>
<p>æ•°æ®æŒ‰ç…§ä»¥ä¸‹æµç¨‹å¤„ç†ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> æ•°æ®è·å–ï¼ˆ02:00ï¼‰
   â”œâ”€ æ ¸å¿ƒç³»ç»Ÿ: 1000ä¸‡æ¡è®°å½•
   â””â”€ æ¸ é“ç³»ç»Ÿ: 1000ä¸‡æ¡è®°å½•

<span class="hljs-bullet">2.</span> æ•°æ®é¢„å¤„ç†ï¼ˆ02:05ï¼‰
   â”œâ”€ æ ¼å¼è½¬æ¢
   â”œâ”€ æ•°æ®æ¸…æ´—
   â””â”€ æ„å»ºå“ˆå¸Œç´¢å¼•

<span class="hljs-bullet">3.</span> æ•°æ®åˆ†ç‰‡ï¼ˆ02:10ï¼‰
   â””â”€ åˆ†æˆ1000ä¸ªåˆ†ç‰‡ï¼Œæ¯ç‰‡1ä¸‡æ¡

<span class="hljs-bullet">4.</span> å¹¶è¡Œå¯¹è´¦ï¼ˆ02:15ï¼‰
   â””â”€ 8ä¸ªçº¿ç¨‹å¹¶å‘å¤„ç†

<span class="hljs-bullet">5.</span> å·®å¼‚åˆ†æï¼ˆ02:25ï¼‰
   â”œâ”€ é‡‘é¢å·®å¼‚æ£€æµ‹
   â”œâ”€ çŠ¶æ€å·®å¼‚æ£€æµ‹
   â””â”€ å•è¾¹è´¦è¯†åˆ«

<span class="hljs-bullet">6.</span> ç»“æœè¾“å‡ºï¼ˆ02:30ï¼‰
   â”œâ”€ ç”ŸæˆæŠ¥å‘Š
   â”œâ”€ å­˜å‚¨æ•°æ®åº“
   â””â”€ å‘é€å‘Šè­¦
</code></pre>
<h2 data-id="heading-13">3.3 å¤šçº¿ç¨‹å¤„ç†æ¶æ„</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/957c45b12a80498aa87b67d4e5eccae5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771203830&amp;x-signature=%2BGtNM66aSRAfUNfw7Z5LlrdVbGQ%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-14">3.4 ç³»ç»Ÿäº¤äº’æ—¶åºå›¾</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/989c3b7d0b1b4b80ab7ead8d811766f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771203830&amp;x-signature=nSmYltXI50eLlko1CXiUDcKIC5Q%3D" alt="" loading="lazy"/></p>
<p>ä¸Šå›¾å±•ç¤ºäº†å„ç»„ä»¶ä¹‹é—´çš„äº¤äº’æµç¨‹ï¼š</p>
<ol>
<li><strong>è°ƒåº¦å™¨è§¦å‘</strong>ï¼šå®šæ—¶ä»»åŠ¡è§¦å‘å¯¹è´¦ä½œä¸š</li>
<li><strong>æ•°æ®é‡‡é›†</strong>ï¼šä»æ ¸å¿ƒç³»ç»Ÿå’Œæ¸ é“ç³»ç»Ÿè·å–æ•°æ®</li>
<li><strong>å¹¶è¡Œå¤„ç†</strong>ï¼šçº¿ç¨‹æ± åˆ†é…å·¥ä½œçº¿ç¨‹å¤„ç†æ•°æ®åˆ†ç‰‡</li>
<li><strong>å·®å¼‚åˆ†æ</strong>ï¼šè¯†åˆ«å¹¶åˆ†ç±»å„ç§å·®å¼‚ç±»å‹</li>
<li><strong>ç»“æœè¾“å‡º</strong>ï¼šç”ŸæˆæŠ¥å‘Šå¹¶å­˜å‚¨åˆ°æ•°æ®åº“</li>
</ol>
<h2 data-id="heading-15">çº¿ç¨‹æ± é…ç½®</h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">ThreadPoolExecutor</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(
    <span class="hljs-number">8</span>,                      <span class="hljs-comment">// æ ¸å¿ƒçº¿ç¨‹æ•°</span>
    <span class="hljs-number">16</span>,                     <span class="hljs-comment">// æœ€å¤§çº¿ç¨‹æ•°</span>
    <span class="hljs-number">60L</span>, TimeUnit.SECONDS,  <span class="hljs-comment">// ç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´</span>
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;&gt;(<span class="hljs-number">1000</span>),  <span class="hljs-comment">// ä»»åŠ¡é˜Ÿåˆ—</span>
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>.CallerRunsPolicy()  <span class="hljs-comment">// æ‹’ç»ç­–ç•¥</span>
);
</code></pre>
<h2 data-id="heading-16">æ•°æ®åˆ†ç‰‡ç­–ç•¥</h2>
<pre><code class="hljs language-ini" lang="ini">int <span class="hljs-attr">chunkSize</span> = <span class="hljs-number">100000</span><span class="hljs-comment">;  // æ¯ç‰‡10ä¸‡æ¡</span>
List&lt;List&lt;TransactionRecord&gt;&gt; <span class="hljs-attr">chunks</span> = new ArrayList&lt;&gt;()<span class="hljs-comment">;</span>

for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; allRecords.size(); i += chunkSize) {</span>
    int <span class="hljs-attr">end</span> = Math.min(i + chunkSize, allRecords.size())<span class="hljs-comment">;</span>
    chunks.add(allRecords.subList(i, end))<span class="hljs-comment">;</span>
}
</code></pre>
<h2 data-id="heading-17">å››ã€æ ¸å¿ƒç®—æ³•å®ç°</h2>
<h2 data-id="heading-18">4.1 å¯¹è´¦ç®—æ³•æµç¨‹å›¾</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d20f4d3684f34f3f9003e717be3e4ea0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771203830&amp;x-signature=SAKw9wYg1QdID7paN6HFPNijOqQ%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-19">4.2 å¯¹è´¦å“ˆå¸Œç®—æ³•è¯¦è§£</h2>
<h2 data-id="heading-20">ä¸ºä»€ä¹ˆä½¿ç”¨å“ˆå¸Œç´¢å¼•ï¼Ÿ</h2>
<p>åœ¨åƒä¸‡çº§æ•°æ®çš„å¯¹è´¦åœºæ™¯ä¸­ï¼Œä¼ ç»ŸåŒå±‚å¾ªç¯çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(nÂ²)ï¼Œè€Œä½¿ç”¨å“ˆå¸Œç´¢å¼•å¯ä»¥ä¼˜åŒ–åˆ°O(n+m)ã€‚</p>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šå°†æ ¸å¿ƒç³»ç»Ÿæ•°æ®ä»¥"äº¤æ˜“æµæ°´å·"ä¸ºkeyæ„å»ºHashMapï¼Œç„¶åéå†æ¸ é“æ•°æ®ï¼Œé€šè¿‡O(1)æ—¶é—´å¤æ‚åº¦çš„æŸ¥æ‰¾å®ç°å¿«é€ŸåŒ¹é…ã€‚</p>
<h2 data-id="heading-21">ç®—æ³•æ­¥éª¤è¯¦è§£</h2>
<p><strong>æ­¥éª¤1ï¼šæ„å»ºå“ˆå¸Œç´¢å¼•</strong></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// æ—¶é—´å¤æ‚åº¦: O(n)ï¼Œnä¸ºæ ¸å¿ƒç³»ç»Ÿè®°å½•æ•°</span>
Map&lt;String, TransactionRecord&gt; coreIndex = <span class="hljs-keyword">new</span> HashMap&lt;&gt;(coreRecords.size());
<span class="hljs-keyword">for</span> (TransactionRecord <span class="hljs-keyword">record</span> : <span class="hljs-title">coreRecords</span>) {
    coreIndex.put(<span class="hljs-keyword">record</span>.getTransactionId(), <span class="hljs-keyword">record</span>);
}
</code></pre>
<p><strong>æ­¥éª¤2ï¼šéå†æ¸ é“æ•°æ®å¹¶åŒ¹é…</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æ—¶é—´å¤æ‚åº¦: O(m)ï¼Œmä¸ºæ¸ é“ç³»ç»Ÿè®°å½•æ•°</span>
for (TransactionRecord channelRecord : channelRecords) {
    <span class="hljs-comment">// O(1)æ—¶é—´å¤æ‚åº¦æŸ¥æ‰¾</span>
    TransactionRecord coreRecord = coreIndex<span class="hljs-selector-class">.get</span>(channelRecord.getTransactionId());

    if (coreRecord == null) {
        <span class="hljs-comment">// æ¸ é“ç‹¬æœ‰ï¼šæ¸ é“æœ‰è®°å½•ï¼Œæ ¸å¿ƒæ²¡æœ‰</span>
        differences<span class="hljs-selector-class">.add</span>(new Difference(DiffType.CHANNEL_ONLY, channelRecord));
    } else {
        <span class="hljs-comment">// å­˜åœ¨åŒ¹é…ï¼Œç»§ç»­æ¯”è¾ƒé‡‘é¢å’ŒçŠ¶æ€</span>
        <span class="hljs-built_in">compareAndDetectDifference</span>(coreRecord, channelRecord);
        <span class="hljs-comment">// æ ‡è®°æ ¸å¿ƒè®°å½•å·²è¢«åŒ¹é…</span>
        coreIndex<span class="hljs-selector-class">.remove</span>(channelRecord.getTransactionId());
    }
}
</code></pre>
<p><strong>æ­¥éª¤3ï¼šæŸ¥æ‰¾æ ¸å¿ƒç‹¬æœ‰è®°å½•</strong></p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// æ—¶é—´å¤æ‚åº¦: O(n)ï¼Œéå†å‰©ä½™æœªåŒ¹é…çš„æ ¸å¿ƒè®°å½•</span>
<span class="hljs-selector-tag">for</span> (TransactionRecord <span class="hljs-attribute">coreRecord </span>: coreIndex.<span class="hljs-built_in">values</span>()) {
    <span class="hljs-selector-tag">differences</span><span class="hljs-selector-class">.add</span>(new <span class="hljs-built_in">Difference</span>(DiffType.CORE_<span class="hljs-keyword">ONLY</span>, coreRecord));
}
</code></pre>
<p><strong>æ€»ä½“æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n) + O(m) + O(n) = <strong>O(n+m)</strong></p>
<h2 data-id="heading-22">ç©ºé—´æ¢æ—¶é—´çš„æƒè¡¡</h2>























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>æ—¶é—´å¤æ‚åº¦</th><th>ç©ºé—´å¤æ‚åº¦</th><th>1000ä¸‡æ¡æ•°æ®è€—æ—¶</th></tr></thead><tbody><tr><td>åŒå±‚å¾ªç¯</td><td>O(nÂ²)</td><td>O(1)</td><td>~87ç§’</td></tr><tr><td>å“ˆå¸Œç´¢å¼•</td><td>O(n+m)</td><td>O(n)</td><td>~12ç§’</td></tr></tbody></table>
<p>å“ˆå¸Œç´¢å¼•éœ€è¦é¢å¤–O(n)ç©ºé—´å­˜å‚¨ç´¢å¼•ï¼Œä½†å¯¹äº1000ä¸‡æ¡æ•°æ®ï¼Œçº¦å ç”¨1-2GBå†…å­˜ï¼Œå®Œå…¨å¯æ¥å—ã€‚</p>
<h2 data-id="heading-23">å“ˆå¸Œå†²çªå¤„ç†</h2>
<p>Javaçš„HashMapä½¿ç”¨é“¾åœ°å€æ³•å¤„ç†å†²çªï¼š</p>
<ul>
<li>é»˜è®¤è´Ÿè½½å› å­0.75ï¼Œå½“å…ƒç´ æ•°é‡è¾¾åˆ°å®¹é‡*0.75æ—¶è‡ªåŠ¨æ‰©å®¹</li>
<li>æ‰©å®¹æ—¶å®¹é‡ç¿»å€ï¼Œé‡æ–°åˆ†é…æ‰€æœ‰å…ƒç´ </li>
<li>åœ¨å¯¹è´¦åœºæ™¯ä¸­ï¼Œä½¿ç”¨äº¤æ˜“æµæ°´å·ï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰ä½œä¸ºkeyï¼ŒåŸºæœ¬ä¸ä¼šå‘ç”Ÿå†²çª</li>
</ul>
<h2 data-id="heading-24">4.3 å¯¹è´¦æŠ¥å‘Šç¤ºä¾‹</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4debea5f5abc42718eb31fb92193de65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771203830&amp;x-signature=auBxogH0T2GGiv1pye37iL0fkH0%3D" alt="" loading="lazy"/></p>
<p>ä¸Šå›¾å±•ç¤ºäº†å¯¹è´¦å®Œæˆåç”Ÿæˆçš„æŠ¥å‘Šï¼ŒåŒ…å«ï¼š</p>
<ul>
<li><strong>ç»Ÿè®¡æ¦‚è§ˆ</strong>ï¼šæ€»è®°å½•æ•°ã€åŒ¹é…æ•°ã€å·®å¼‚æ•°ã€åŒ¹é…ç‡</li>
<li><strong>å·®å¼‚æ˜ç»†</strong>ï¼šæŒ‰ç±»å‹åˆ†ç»„å±•ç¤ºæ‰€æœ‰å·®å¼‚è®°å½•</li>
<li><strong>å›¾è¡¨åˆ†æ</strong>ï¼šå·®å¼‚ç±»å‹åˆ†å¸ƒæŸ±çŠ¶å›¾</li>
</ul>
<h2 data-id="heading-25">4.4 æ ¸å¿ƒä»£ç å®ç°</h2>
<h2 data-id="heading-26">æ­¥éª¤1ï¼šæ„å»ºå“ˆå¸Œç´¢å¼•</h2>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// æ„å»ºæ ¸å¿ƒç³»ç»Ÿå“ˆå¸Œç´¢å¼• O(n)</span>
Map&lt;String, TransactionRecord&gt; coreIndex = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();
<span class="hljs-keyword">for</span> (TransactionRecord <span class="hljs-keyword">record</span> : <span class="hljs-title">coreRecords</span>) {
    coreIndex.put(<span class="hljs-keyword">record</span>.getTransactionId(), <span class="hljs-keyword">record</span>);
}
</code></pre>
<h2 data-id="heading-27">æ­¥éª¤2ï¼šå¹¶è¡ŒåŒ¹é…å¤„ç†</h2>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">/**
     * æ‰§è¡Œå¯¹è´¦ï¼ˆå¤šçº¿ç¨‹ç‰ˆæœ¬ï¼‰
     *
     * @param coreRecords   æ ¸å¿ƒç³»ç»Ÿäº¤æ˜“è®°å½•
     * @param channelRecords æ¸ é“äº¤æ˜“è®°å½•
     * @param date          å¯¹è´¦æ—¥æœŸ
     * @return å¯¹è´¦ç»“æœ
     */</span>
    public ReconciliationResult <span class="hljs-built_in">reconcileMultiThread</span>(
            List&lt;TransactionRecord&gt; coreRecords,
            List&lt;TransactionRecord&gt; channelRecords,
            String date) throws Exception {

        long startTime = System<span class="hljs-selector-class">.currentTimeMillis</span>();
        log<span class="hljs-selector-class">.info</span>("å¼€å§‹å¤šçº¿ç¨‹å¯¹è´¦ï¼Œæ ¸å¿ƒè®°å½•æ•°: {}, æ¸ é“è®°å½•æ•°: {}, çº¿ç¨‹æ•°: {}",
                coreRecords.size(), channelRecords<span class="hljs-selector-class">.size</span>(), DEFAULT_THREAD_POOL_SIZE);

        ReconciliationResult result = ReconciliationResult<span class="hljs-selector-class">.builder</span>()
                <span class="hljs-selector-class">.reconciliationDate</span>(date)
                <span class="hljs-selector-class">.coreTotalCount</span>(coreRecords.size())
                <span class="hljs-selector-class">.channelTotalCount</span>(channelRecords.size())
                <span class="hljs-selector-class">.startTime</span>(startTime)
                <span class="hljs-selector-class">.build</span>();

        <span class="hljs-comment">// è®¡ç®—æ€»é‡‘é¢</span>
        BigDecimal coreTotalAmount = coreRecords<span class="hljs-selector-class">.stream</span>()
                <span class="hljs-selector-class">.map</span>(TransactionRecord::getAmount)
                <span class="hljs-selector-class">.filter</span>(Objects::nonNull)
                <span class="hljs-selector-class">.reduce</span>(BigDecimal.ZERO, BigDecimal::add);
        result<span class="hljs-selector-class">.setCoreTotalAmount</span>(coreTotalAmount);

        BigDecimal channelTotalAmount = channelRecords<span class="hljs-selector-class">.stream</span>()
                <span class="hljs-selector-class">.map</span>(TransactionRecord::getAmount)
                <span class="hljs-selector-class">.filter</span>(Objects::nonNull)
                <span class="hljs-selector-class">.reduce</span>(BigDecimal.ZERO, BigDecimal::add);
        result<span class="hljs-selector-class">.setChannelTotalAmount</span>(channelTotalAmount);

        <span class="hljs-comment">// æ„å»ºæ ¸å¿ƒç³»ç»Ÿå“ˆå¸Œç´¢å¼•</span>
        Map&lt;String, TransactionRecord&gt; coreIndex = new HashMap&lt;&gt;();
        for (TransactionRecord record : coreRecords) {
            coreIndex<span class="hljs-selector-class">.put</span>(record.getTransactionId(), record);
        }

        <span class="hljs-comment">// åˆ†ç‰‡å¤„ç†æ¸ é“æ•°æ®</span>
        List&lt;List&lt;TransactionRecord&gt;&gt; chunks = <span class="hljs-built_in">splitList</span>(channelRecords, CHUNK_SIZE);

        log<span class="hljs-selector-class">.info</span>("æ•°æ®åˆ†ç‰‡å®Œæˆï¼Œå…± {} ä¸ªåˆ†ç‰‡", chunks.size());

        <span class="hljs-comment">// æäº¤å¹¶è¡Œä»»åŠ¡</span>
        List&lt;Future&lt;ChunkResult&gt;&gt; futures = new ArrayList&lt;&gt;();
        for (int i = <span class="hljs-number">0</span>; i &lt; chunks.size(); <span class="hljs-selector-tag">i</span>++) {
            List&lt;TransactionRecord&gt; chunk = chunks<span class="hljs-selector-class">.get</span>(i);
            final int chunkIndex = <span class="hljs-selector-tag">i</span>;
            futures<span class="hljs-selector-class">.add</span>(executorService.submit(() -&gt; <span class="hljs-built_in">processChunk</span>(coreIndex, chunk, chunkIndex)));
        }

        <span class="hljs-comment">// åˆå¹¶ç»“æœ</span>
        Set&lt;String&gt; matchedCoreIds = ConcurrentHashMap<span class="hljs-selector-class">.newKeySet</span>();
        List&lt;DifferenceRecord&gt; allDifferences = new CopyOnWriteArrayList&lt;&gt;();

        for (Future&lt;ChunkResult&gt; future : futures) {
            ChunkResult chunkResult = future<span class="hljs-selector-class">.get</span>();
            matchedCoreIds<span class="hljs-selector-class">.addAll</span>(chunkResult.matchedIds);
            allDifferences<span class="hljs-selector-class">.addAll</span>(chunkResult.differences);
            log<span class="hljs-selector-class">.info</span>("åˆ†ç‰‡ {} å¤„ç†å®Œæˆï¼ŒåŒ¹é…: {}, å·®å¼‚: {}",
                    chunkResult.chunkIndex, chunkResult.matchedIds.size(), chunkResult<span class="hljs-selector-class">.differences</span><span class="hljs-selector-class">.size</span>());
        }

        <span class="hljs-comment">// æŸ¥æ‰¾æ ¸å¿ƒç‹¬æœ‰è®°å½•</span>
        for (TransactionRecord coreRecord : coreRecords) {
            if (!matchedCoreIds.contains(coreRecord.getTransactionId())) {
                allDifferences<span class="hljs-selector-class">.add</span>(createCoreOnlyDifference(coreRecord));
            }
        }

        result<span class="hljs-selector-class">.setMatchedCount</span>(matchedCoreIds.size());
        result<span class="hljs-selector-class">.setDiffCount</span>(allDifferences.size());
        result<span class="hljs-selector-class">.setDifferenceRecords</span>(allDifferences);

        <span class="hljs-comment">// è®¡ç®—å·®å¼‚æ€»é‡‘é¢</span>
        BigDecimal diffTotalAmount = allDifferences<span class="hljs-selector-class">.stream</span>()
                <span class="hljs-selector-class">.map</span>(DifferenceRecord::getDiffAmount)
                <span class="hljs-selector-class">.filter</span>(Objects::nonNull)
                <span class="hljs-selector-class">.reduce</span>(BigDecimal.ZERO, BigDecimal::add);
        result<span class="hljs-selector-class">.setDiffTotalAmount</span>(diffTotalAmount);

        result<span class="hljs-selector-class">.setEndTime</span>();
        log<span class="hljs-selector-class">.info</span>("å¤šçº¿ç¨‹å¯¹è´¦å®Œæˆï¼Œè€—æ—¶: {}, åŒ¹é…ç‡: {:.<span class="hljs-number">2</span>f}%",
                result.getDurationDescription(), result<span class="hljs-selector-class">.getMatchRate</span>());

        return result;
    }
</code></pre>
<h2 data-id="heading-28">æ­¥éª¤3ï¼šå·®å¼‚æ£€æµ‹é€»è¾‘</h2>
<pre><code class="hljs language-scss" lang="scss">private DifferenceRecord <span class="hljs-built_in">detectDifference</span>(
        TransactionRecord coreRecord,
        TransactionRecord channelRecord) {

    <span class="hljs-comment">// æ£€æŸ¥é‡‘é¢å·®å¼‚</span>
    if (!coreRecord.getAmount()<span class="hljs-selector-class">.equals</span>(channelRecord.getAmount())) {
        return DifferenceRecord<span class="hljs-selector-class">.builder</span>()
            <span class="hljs-selector-class">.diffType</span>("AMOUNT_DIFF")
            <span class="hljs-selector-class">.diffAmount</span>(coreRecord.getAmount()
                <span class="hljs-selector-class">.subtract</span>(channelRecord.getAmount())<span class="hljs-selector-class">.abs</span>())
            <span class="hljs-selector-class">.build</span>();
    }

    <span class="hljs-comment">// æ£€æŸ¥çŠ¶æ€å·®å¼‚</span>
    if (!coreRecord.getStatus()<span class="hljs-selector-class">.equals</span>(channelRecord.getStatus())) {
        return DifferenceRecord<span class="hljs-selector-class">.builder</span>()
            <span class="hljs-selector-class">.diffType</span>("STATUS_DIFF")
            <span class="hljs-selector-class">.coreStatus</span>(coreRecord.getStatus())
            <span class="hljs-selector-class">.channelStatus</span>(channelRecord.getStatus())
            <span class="hljs-selector-class">.build</span>();
    }

    return null;  <span class="hljs-comment">// åŒ¹é…æˆåŠŸ</span>
}
</code></pre>
<h2 data-id="heading-29">äº”ã€MySQLæ•°æ®æŒä¹…åŒ–è®¾è®¡</h2>
<h2 data-id="heading-30">5.1 æ•°æ®åº“è¡¨ç»“æ„</h2>
<h2 data-id="heading-31">äº¤æ˜“è®°å½•è¡¨</h2>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> transaction_record (
    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT,
    transaction_id <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'äº¤æ˜“æµæ°´å·'</span>,
    transaction_date <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">16</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'äº¤æ˜“æ—¥æœŸ'</span>,
    amount <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">18</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'äº¤æ˜“é‡‘é¢'</span>,
    status <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'äº¤æ˜“çŠ¶æ€'</span>,
    channel <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) COMMENT <span class="hljs-string">'äº¤æ˜“æ¸ é“'</span>,
    source <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">16</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è®°å½•æ¥æº'</span>,
    create_time DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    INDEX idx_transaction_id (transaction_id),
    INDEX idx_date_source (transaction_date, source)
) ENGINE<span class="hljs-operator">=</span>InnoDB;
</code></pre>
<h2 data-id="heading-32">å·®å¼‚è®°å½•è¡¨</h2>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> difference_record (
    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT,
    batch_no <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å¯¹è´¦æ‰¹æ¬¡å·'</span>,
    diff_type <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å·®å¼‚ç±»å‹'</span>,
    transaction_id <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    core_amount <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">18</span>,<span class="hljs-number">2</span>),
    channel_amount <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">18</span>,<span class="hljs-number">2</span>),
    diff_amount <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">18</span>,<span class="hljs-number">2</span>),
    INDEX idx_batch_no (batch_no),
    INDEX idx_diff_type (diff_type)
) ENGINE<span class="hljs-operator">=</span>InnoDB;
</code></pre>
<h2 data-id="heading-33">å¯¹è´¦ç»“æœè¡¨</h2>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> reconciliation_result (
    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT,
    batch_no <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">UNIQUE</span>,
    reconciliation_date <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">16</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    matched_count <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    diff_count <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    duration <span class="hljs-type">BIGINT</span> COMMENT <span class="hljs-string">'è€—æ—¶(ms)'</span>,
    status <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>
) ENGINE<span class="hljs-operator">=</span>InnoDB;
</code></pre>
<h2 data-id="heading-34">5.2 æ‰¹é‡ä¿å­˜ä¼˜åŒ–</h2>
<pre><code class="hljs language-ini" lang="ini">@Transactional
public void batchSave(List&lt;TransactionRecord&gt; records) {
    int <span class="hljs-attr">batchSize</span> = <span class="hljs-number">1000</span><span class="hljs-comment">;</span>
    List&lt;TransactionRecord&gt; <span class="hljs-attr">batch</span> = new ArrayList&lt;&gt;(batchSize)<span class="hljs-comment">;</span>

    for (TransactionRecord record : records) {
        batch.add(record)<span class="hljs-comment">;</span>
        if (batch.size() &gt;= batchSize) {
            repository.saveAll(batch)<span class="hljs-comment">;</span>
            batch.clear()<span class="hljs-comment">;</span>
        }
    }

    if (!batch.isEmpty()) {
        repository.saveAll(batch)<span class="hljs-comment">;</span>
    }
}
</code></pre>
<h2 data-id="heading-35">å…­ã€æ€§èƒ½æµ‹è¯•ä¸ä¼˜åŒ–</h2>
<h2 data-id="heading-36">6.1 æ€§èƒ½å¯¹æ¯”</h2>





























<table><thead><tr><th>æ•°æ®é‡</th><th>å•çº¿ç¨‹è€—æ—¶</th><th>8çº¿ç¨‹è€—æ—¶</th><th>åŠ é€Ÿæ¯”</th></tr></thead><tbody><tr><td>10ä¸‡æ¡</td><td>1ç§’</td><td>0.2ç§’</td><td>5x</td></tr><tr><td>100ä¸‡æ¡</td><td>10ç§’</td><td>1.5ç§’</td><td>6.7x</td></tr><tr><td>1000ä¸‡æ¡</td><td>87ç§’</td><td>12ç§’</td><td>7.25x</td></tr></tbody></table>
<h2 data-id="heading-37">6.2 ä¼˜åŒ–æŠ€å·§</h2>
<ol>
<li><strong>æ‰¹é‡æ“ä½œ</strong>ï¼šä½¿ç”¨saveAll()è€Œéé€æ¡save()</li>
<li><strong>ç´¢å¼•ä¼˜åŒ–</strong>ï¼šåœ¨transaction_idã€transaction_dateå­—æ®µå»ºç«‹ç´¢å¼•</li>
<li><strong>è¿æ¥æ± </strong>ï¼šä½¿ç”¨HikariCPè¿æ¥æ± ï¼Œæœ€å¤§è¿æ¥æ•°20</li>
<li><strong>å¼‚æ­¥å¤„ç†</strong>ï¼šå¯¹è´¦å®Œæˆåå¼‚æ­¥ç”ŸæˆæŠ¥å‘Šå’Œå‘é€é€šçŸ¥</li>
</ol>
<h2 data-id="heading-38">6.3 JVMå‚æ•°è°ƒä¼˜</h2>
<pre><code class="hljs language-ruby" lang="ruby">java -<span class="hljs-title class_">Xms4g</span> -<span class="hljs-title class_">Xmx4g</span> \
     -<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:+UseG1GC</span> \
     -<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:MaxGCPauseMillis=</span><span class="hljs-number">200</span> \
     -<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:+HeapDumpOnOutOfMemoryError</span> \
     -jar reconciliation-demo.jar
</code></pre>
<h2 data-id="heading-39">ä¸ƒã€å®Œæ•´é¡¹ç›®å®æˆ˜</h2>
<h2 data-id="heading-40">7.1 å¿«é€Ÿå¯åŠ¨</h2>
<ol>
<li><strong>åˆå§‹åŒ–æ•°æ®åº“</strong></li>
</ol>

<pre><code class="hljs language-css" lang="css">mysql -u root -<span class="hljs-selector-tag">p</span> &lt; <span class="hljs-attribute">src</span>/<span class="hljs-selector-tag">main</span>/resources/schema<span class="hljs-selector-class">.sql</span>
</code></pre>
<ol>
<li><strong>ä¿®æ”¹é…ç½®</strong></li>
</ol>
<p>ç¼–è¾‘ application.ymlï¼Œé…ç½®MySQLè¿æ¥ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/reconciliation</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">your_password</span>
</code></pre>
<ol>
<li><strong>è¿è¡Œé¡¹ç›®</strong></li>
</ol>

<pre><code class="hljs language-arduino" lang="arduino">mvn spring-boot:run
</code></pre>
<ol>
<li><strong>è®¿é—®ç³»ç»Ÿ</strong></li>
</ol>
<p>æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080" target="_blank" title="http://localhost:8080" ref="nofollow noopener noreferrer">http://localhost:8080</a></p>
<h2 data-id="heading-41">7.2 APIæ¥å£</h2>



































<table><thead><tr><th>æ¥å£</th><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>/</td><td>GET</td><td>é¦–é¡µ</td></tr><tr><td>/api/reconcile</td><td>POST</td><td>æ‰§è¡Œå¯¹è´¦</td></tr><tr><td>/reconcile</td><td>POST</td><td>æ‰§è¡Œå¯¹è´¦(é¡µé¢)</td></tr><tr><td>/api/status</td><td>GET</td><td>ç³»ç»ŸçŠ¶æ€</td></tr><tr><td>/api/health</td><td>GET</td><td>å¥åº·æ£€æŸ¥</td></tr></tbody></table>
<h2 data-id="heading-42">7.4 å¯¹åº”å‰ç«¯é¡µé¢å±•ç¤º</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdc875bbf750425683747ab7e19f490a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771203830&amp;x-signature=tOHFTK6wf%2F3aPmLcVSBt1xO%2F7EE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-43">å¯¹è´¦ç»“æœ</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/268cd21e344d402184916688f325ad16~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771203830&amp;x-signature=HZMbjbQaBX4nNx47%2BB5878LbUJw%3D" alt="" loading="lazy"/></p>
<p>å¯¹è´¦ç»“æœ</p>
<h2 data-id="heading-44">å…«ã€æ€»ç»“ä¸å±•æœ›</h2>
<h2 data-id="heading-45">8.1 æŠ€æœ¯è¦ç‚¹æ€»ç»“</h2>





























<table><thead><tr><th>æŠ€æœ¯ç‚¹</th><th>å…³é”®å†…å®¹</th></tr></thead><tbody><tr><td>ç®—æ³•ä¼˜åŒ–</td><td>å“ˆå¸Œç´¢å¼•å®ç°O(n+m)æ—¶é—´å¤æ‚åº¦</td></tr><tr><td>å¹¶å‘å¤„ç†</td><td>ThreadPoolExecutorå¤šçº¿ç¨‹åŠ é€Ÿ</td></tr><tr><td>æ•°æ®æŒä¹…åŒ–</td><td>Spring Data JPA + MySQL</td></tr><tr><td>æ‰¹é‡æ“ä½œ</td><td>saveAll()æ‰¹é‡ä¿å­˜ï¼Œæå‡ååé‡</td></tr><tr><td>å·®å¼‚åˆ†æ</td><td>å››ç§å·®å¼‚ç±»å‹è‡ªåŠ¨åˆ†ç±»</td></tr></tbody></table>
<h2 data-id="heading-46">8.2 æ€§èƒ½æå‡æ•ˆæœ</h2>
<ul>
<li><strong>å¤„ç†é€Ÿåº¦</strong>ï¼šåƒä¸‡çº§æ•°æ®ä»87ç§’é™åˆ°12ç§’</li>
<li><strong>å‡†ç¡®ç‡</strong>ï¼š100%è¦†ç›–æ‰€æœ‰å·®å¼‚è®°å½•</li>
<li><strong>å­˜å‚¨ä¼˜åŒ–</strong>ï¼šç´¢å¼•è®¾è®¡æå‡æŸ¥è¯¢é€Ÿåº¦10å€</li>
<li><strong>å¯è§†åŒ–</strong>ï¼šå®æ—¶ç”ŸæˆHTML/ExcelæŠ¥å‘Š</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¹¶å‘æ§åˆ¶ä¸é™æµï¼šJava ç¯å¢ƒä¸‹é«˜é¢‘è°ƒç”¨ä¼å¾®å¤–éƒ¨ç¾¤æ¥å£çš„æ·±åº¦å®è·µ]]></title>    <link>https://juejin.cn/post/7604701848151670784</link>    <guid>https://juejin.cn/post/7604701848151670784</guid>    <pubDate>2026-02-10T07:47:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604701848151670784" data-draft-id="7604779604126121984" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¹¶å‘æ§åˆ¶ä¸é™æµï¼šJava ç¯å¢ƒä¸‹é«˜é¢‘è°ƒç”¨ä¼å¾®å¤–éƒ¨ç¾¤æ¥å£çš„æ·±åº¦å®è·µ"/> <meta itemprop="keywords" content="Java,API"/> <meta itemprop="datePublished" content="2026-02-10T07:47:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¼å¾®æ”¯æŒ"/> <meta itemprop="url" content="https://juejin.cn/user/2807501039612187"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¹¶å‘æ§åˆ¶ä¸é™æµï¼šJava ç¯å¢ƒä¸‹é«˜é¢‘è°ƒç”¨ä¼å¾®å¤–éƒ¨ç¾¤æ¥å£çš„æ·±åº¦å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2807501039612187/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¼å¾®æ”¯æŒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T07:47:24.000Z" title="Tue Feb 10 2026 07:47:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<h2 data-id="heading-0"><strong>â€‹</strong> <strong>â€‹</strong> <strong>QiWeå¼€æ”¾å¹³å° Â· ä¸ªäººåç‰‡</strong></h2>
<p><strong>APIé©±åŠ¨ä¼å¾®</strong> <strong>å¤–éƒ¨ç¾¤</strong> <strong>è‡ªåŠ¨åŒ–ï¼Œè®©å¼€å‘æ›´é«˜æ•ˆ</strong></p>
<p>Â Â Â Â Â Â Â Â å®˜æ–¹ç«™ç‚¹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.qiweapi.com%2F" title="https://www.qiweapi.com/" target="_blank" ref="nofollow noopener noreferrer">www.qiweapi.com</a></p>
<p>Â Â Â Â Â Â Â Â å¯¹æ¥é€šé“ï¼šè¿›å…¥å®˜æ–¹ç«™ç‚¹è”ç³»å®¢æœ</p>
<p>Â Â Â Â Â Â Â Â å›¢é˜Ÿå®šä½ï¼šä¼å¾®ç”Ÿæ€æ·±åº¦æœåŠ¡ï¼Œä¸“æ³¨ API+RPA èåˆæŠ€æœ¯æ–¹æ¡ˆ</p>
</blockquote>
<p>åœ¨åŸºäºåè®®æ¥å£ï¼ˆå¦‚ <code>qiweapi</code>ï¼‰è¿›è¡Œå¤§è§„æ¨¡å¤–éƒ¨ç¾¤æ¨é€æ—¶ï¼Œå•çº¯çš„å¾ªç¯è°ƒç”¨ä¼šå¯¼è‡´ Socket è€—å°½æˆ–è§¦å‘æœåŠ¡ç«¯é¢‘ç‡é™åˆ¶ã€‚æœ¬æ–‡å°†æ¢è®¨å¦‚ä½•åœ¨ Java ä¸­é€šè¿‡çº¿ç¨‹æ± ä¸ä»¤ç‰Œæ¡¶ç®—æ³•ï¼Œæ„å»ºä¸€ä¸ªé«˜æ€§èƒ½ä¸”å®‰å…¨çš„å‘é€æœºåˆ¶ã€‚</p>
<hr/>
<h4 data-id="heading-1">1. æ ¸å¿ƒå‚æ•°ï¼šé¢å‘å¹¶å‘çš„å®ä½“å°è£…</h4>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WeComMsgRequest</span> {
    <span class="hljs-keyword">private</span> String chatId;   <span class="hljs-comment">// å¤–éƒ¨ç¾¤ID</span>
    <span class="hljs-keyword">private</span> Integer msgType; <span class="hljs-comment">// 1-æ–‡æœ¬</span>
    <span class="hljs-keyword">private</span> String content;  <span class="hljs-comment">// æ¶ˆæ¯å†…å®¹</span>

    <span class="hljs-comment">// æ ‡å‡† Getter/Setter...</span>
}
</code></pre>
<hr/>
<h4 data-id="heading-2">2. é«˜å¹¶å‘ä¸‹çš„è¯·æ±‚ç­–ç•¥</h4>
<p>ç›´æ¥åœ¨å¾ªç¯ä¸­ new çº¿ç¨‹æ˜¯æä½æ•ˆçš„ã€‚æˆ‘ä»¬åº”ä½¿ç”¨ <code>ThreadPoolExecutor</code> å¹¶é…åˆ <code>Semaphore</code>ï¼ˆä¿¡å·é‡ï¼‰æ¥æ§åˆ¶å¯¹æ¥å£çš„å¹¶å‘å‹å¼ºã€‚</p>
<p><strong>æ ¸å¿ƒé€»è¾‘ç‰‡æ®µï¼š</strong></p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">// åˆå§‹åŒ–çº¿ç¨‹æ± </span>
<span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">10</span>);
<span class="hljs-comment">// ä¿¡å·é‡æ§åˆ¶ï¼šåŒä¸€æ—¶åˆ»æœ€å¤š 5 ä¸ªè¯·æ±‚åœ¨é€”ï¼Œé˜²æ­¢æ¥å£è¿‡è½½</span>
<span class="hljs-type">Semaphore</span> <span class="hljs-variable">semaphore</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Semaphore</span>(<span class="hljs-number">5</span>);

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">batchSend</span><span class="hljs-params">(List&lt;WeComMsgRequest&gt; tasks)</span> {
    <span class="hljs-keyword">for</span> (WeComMsgRequest task : tasks) {
        executor.submit(() -&gt; {
            <span class="hljs-keyword">try</span> {
                semaphore.acquire(); <span class="hljs-comment">// è·å–è®¸å¯</span>
                
                <span class="hljs-comment">// æ„é€  JSON å‚æ•°</span>
                <span class="hljs-type">String</span> <span class="hljs-variable">jsonBody</span> <span class="hljs-operator">=</span> JSON.toJSONString(task);
                
                <span class="hljs-comment">// è°ƒç”¨æ‰§è¡Œï¼ˆå»ºè®®ä½¿ç”¨ RestTemplate æˆ– OkHttpï¼‰</span>
                <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> httpClient.post(API_URL, jsonBody);
                
                <span class="hljs-comment">// æ¥å£é—´æ­‡ï¼Œæ¨¡æ‹Ÿäººå·¥é¢‘ç‡ä¿æŠ¤ï¼ˆå‚è€ƒæ–‡æ¡£å»ºè®®é—´éš”ï¼‰</span>
                Thread.sleep(<span class="hljs-number">500</span>); 
                
            } <span class="hljs-keyword">catch</span> (Exception e) {
                e.printStackTrace();
            } <span class="hljs-keyword">finally</span> {
                semaphore.release(); <span class="hljs-comment">// é‡Šæ”¾è®¸å¯</span>
            }
        });
    }
}
</code></pre>
<hr/>
<h4 data-id="heading-3">3. é’ˆå¯¹åè®®æ¥å£çš„ä¼˜åŒ–å»ºè®®</h4>
<ul>
<li><strong>Keep-Alive ä¿æŒï¼š</strong> ç¡®ä¿ä½ çš„ Java HTTP å®¢æˆ·ç«¯å¼€å¯äº†è¿æ¥æ± ã€‚å¯¹äº <code>qiweapi</code> è¿™ç§åŸºäº HTTP çš„åè®®æ¥å£ï¼Œå¤ç”¨ TCP è¿æ¥å¯ä»¥å‡å°‘ 50% ä»¥ä¸Šçš„å»¶è¿Ÿã€‚</li>
<li><strong>è¶…æ—¶è®¾ç½®ï¼š</strong> å¤–éƒ¨ç¾¤æ¶ˆæ¯æ¶‰åŠå¾®ä¿¡æœåŠ¡ç«¯è·¯ç”±ï¼Œå“åº”æ—¶é—´å¯èƒ½æ³¢åŠ¨ã€‚å»ºè®® <code>connectTimeout</code> è®¾ç½®ä¸º 5sï¼Œ<code>readTimeout</code> è®¾ç½®ä¸º 10sã€‚</li>
<li><strong>é”™è¯¯ç ç†”æ–­ï¼š</strong> è‹¥æ¥å£è¿”å›ç±»ä¼¼ <code>42001</code>ï¼ˆé¢‘ç‡é™åˆ¶ï¼‰æˆ– <code>503</code>ï¼Œåº”ç«‹å³è§¦å‘ Java ç«¯çš„ç†”æ–­æœºåˆ¶ï¼Œæš‚åœé˜Ÿåˆ—å‘é€ï¼Œé¿å…è´¦å·é£é™©ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-4">4. è¯·æ±‚å‚æ•°å¯¹ç…§æ€»ç»“ï¼ˆå¯¹é½æ–‡æ¡£ï¼‰</h4>

























<table><thead><tr><th><strong>åœºæ™¯</strong></th><th><strong>å‚æ•°æ„é€ é‡ç‚¹</strong></th><th><strong>Java æ¨èå·¥å…·</strong></th></tr></thead><tbody><tr><td><strong>å•å‘</strong></td><td>ç®€å• Map æˆ– JSONObject</td><td><code>OkHttp</code> åŒæ­¥æ‰§è¡Œ</td></tr><tr><td><strong>ç¾¤å‘</strong></td><td>ä»»åŠ¡é˜Ÿåˆ— + å®ä½“ç±»å°è£…</td><td><code>ThreadPoolExecutor</code></td></tr><tr><td><strong>å¤šåª’ä½“</strong></td><td>éœ€å¤„ç†æ–‡ä»¶æµæˆ– Base64 å­—ç¬¦ä¸²</td><td><code>Spring RestTemplate</code></td></tr></tbody></table>
<blockquote>
<p><strong>ç»“è¯­ï¼š</strong></p>
<p>åè®®æ¥å£ä¸ºæˆ‘ä»¬æä¾›äº†å¼ºå¤§çš„åº•å±‚èƒ½åŠ›ï¼Œè€Œ Java åˆ™ä¸ºè¿™äº›èƒ½åŠ›æä¾›äº†ç¨³å®šçš„å·¥ç¨‹åŒ–å¤–å£³ã€‚é€šè¿‡åˆç†çš„çº¿ç¨‹è°ƒåº¦å’Œå‚æ•°å°è£…ï¼Œä½ å¯ä»¥è½»æ¾æ„å»ºèµ·æ”¯æ’‘ä¸‡çº§ç¾¤èŠçš„è‡ªåŠ¨åŒ–è°ƒåº¦ä¸­å¿ƒã€‚</p>
</blockquote>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Chrome æ’ä»¶å®æˆ˜ï¼šå¦‚ä½•å®ç°â€œæ€ä¸æ­»â€çš„å¯é æ•°æ®ä¸ŠæŠ¥ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7604646882015117363</link>    <guid>https://juejin.cn/post/7604646882015117363</guid>    <pubDate>2026-02-09T02:06:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604646882015117363" data-draft-id="7602893600252608558" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Chrome æ’ä»¶å®æˆ˜ï¼šå¦‚ä½•å®ç°â€œæ€ä¸æ­»â€çš„å¯é æ•°æ®ä¸ŠæŠ¥ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,ç›‘æ§"/> <meta itemprop="datePublished" content="2026-02-09T02:06:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸ä¸€æ ·çš„å°‘å¹´_"/> <meta itemprop="url" content="https://juejin.cn/user/3035079961218551"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Chrome æ’ä»¶å®æˆ˜ï¼šå¦‚ä½•å®ç°â€œæ€ä¸æ­»â€çš„å¯é æ•°æ®ä¸ŠæŠ¥ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3035079961218551/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸ä¸€æ ·çš„å°‘å¹´_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T02:06:59.000Z" title="Mon Feb 09 2026 02:06:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><blockquote>
<p>æœ€è¿‘æœ‰ä¸€ä¸ªéœ€æ±‚ï¼šâ€œ<strong>ç›‘æ§ç”¨æˆ·æ€ä¹ˆç”¨æ ‡ç­¾ç»„ï¼ˆTab Groupsï¼‰ï¼Œæ‰“å¼€äº†å•¥ï¼Œå…³é—­äº†å•¥ï¼Œç»Ÿç»Ÿéƒ½è¦è®°ä¸‹æ¥ä¸ŠæŠ¥ç»™æœåŠ¡å™¨ï¼</strong>â€</p>
<p>å¦‚ä¸‹å°±æ˜¯ä¸€ä¸ªæ ‡ç­¾ç»„:</p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d47d24557d7d4e6e8e9177ebb0342b8d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771207803&amp;x-signature=lERCmf6GROSG9qn05MRhJn35eMw%3D" alt="image.png" width="70%" loading="lazy"/>
<p>åˆçœ‹è¿™ä¸ªéœ€æ±‚ï¼Œä¼¼ä¹å¾ˆç®€å•ï¼šç›‘å¬ä¸€ä¸‹äº‹ä»¶ï¼Œè°ƒæ¥å£ä¸ŠæŠ¥ä¸€ä¸‹å®Œäº‹å„¿ã€‚</p>
<p>ä½†ä»”ç»†ä¸€æƒ³ï¼Œä¸ºäº†ä¿è¯æ•°æ®çš„<strong>å¯é æ€§</strong>ï¼Œè¿˜æœ‰å‡ ä¸ªâ€œéšå½¢å‘â€å¿…é¡»å¡«ä¸Šï¼š</p>
<ol>
<li><strong>ç”¨æˆ·ç½‘æ–­äº†æ€ä¹ˆåŠï¼Ÿ</strong> æ•°æ®ä¸èƒ½ä¸¢ï¼Œç­‰ç½‘å¥½äº†å¾—è‡ªåŠ¨è¡¥å‘</li>
<li><strong>ç”¨æˆ·ç›´æ¥ Alt+F4 å…³æµè§ˆå™¨æ€ä¹ˆåŠï¼Ÿ</strong> å¿…é¡»åœ¨æµè§ˆå™¨è¢«æ€æ­»çš„ç¬é—´ï¼Œæˆ–è€…ä¸‹æ¬¡å¯åŠ¨æ—¶æŠŠå…³é—­æ—¥å¿—æ•°æ®å‘å‡ºå»ã€‚</li>
<li><strong>é«˜é¢‘æ“ä½œæ€ä¹ˆåŠï¼Ÿ</strong> å¦‚æœç”¨æˆ·ä¸€ç§’é’Ÿå…³äº† 20 ä¸ªç»„ï¼Œä¸èƒ½å¡é¡¿ï¼Œæ•°æ®å†™å…¥ä¹Ÿä¸èƒ½é”™ä¹±ã€ä¸¢å¤±ã€‚</li>
<li><strong>æœåŠ¡å™¨æŒ‚äº†æ€ä¹ˆåŠï¼Ÿ</strong> æœ¬åœ°ä¸èƒ½æ— é™å­˜ï¼Œå¦åˆ™ä¼šæŠŠç”¨æˆ·æµè§ˆå™¨æ’‘çˆ†ã€‚</li>
</ol>
</blockquote>
<h2 data-id="heading-0">æ ¸å¿ƒç­–ç•¥ï¼š</h2>
<p><strong>è§£å†³æ–¹æ¡ˆä¸€å¥è¯æ€»ç»“ï¼š</strong></p>
<p><strong>ç›‘å¬æ ‡ç­¾ç»„çš„å¼€å¯å’Œå…³é—­ï¼Œå¼€å¯æˆ–å…³é—­çš„æ—¶å€™ï¼Œäº§ç”Ÿçš„æ—¥å¿—ç¬¬ä¸€æ—¶é—´å…ˆå†™åˆ°æœ¬åœ°ç¡¬ç›˜ï¼ˆStorageï¼‰ä¸­ï¼Œç„¶åå†å°è¯•ä¸ŠæŠ¥åˆ°æœåŠ¡ç«¯ï¼Œåªæœ‰å½“ä¸ŠæŠ¥æˆåŠŸäº†æ‰ä»æœ¬åœ°å­˜å‚¨åˆ ã€‚åªè¦æ²¡åˆ ï¼Œå°±ä¾é å®šæ—¶ä»»åŠ¡æ­»ç£•åˆ°åº•ã€‚</strong></p>
<h3 data-id="heading-1">æµç¨‹è®¾è®¡</h3>
<ol>
<li>
<p><strong>æ‹¦æˆªäº‹ä»¶</strong>ï¼šç›‘å¬ <code>chrome.tabGroups</code> çš„ <code>onCreated</code> å’Œ <code>onRemoved</code>ã€‚</p>
</li>
<li>
<p><strong>æŒä¹…åŒ– (Persist)</strong>ï¼š<strong>ç¬¬ä¸€æ—¶é—´</strong>å°†æ•°æ®å†™å…¥ <code>chrome.storage.local</code>ã€‚å“ªæ€•ä¸‹ä¸€æ¯«ç§’æµè§ˆå™¨å´©æºƒï¼Œæ•°æ®ä¹Ÿåœ¨ç¡¬ç›˜é‡Œã€‚</p>
</li>
<li>
<p><strong>ä¸ŠæŠ¥ (Report)</strong>ï¼šä½¿ç”¨fetchå°è¯•å‘é€ HTTP è¯·æ±‚ï¼ˆå¼€å¯ <code>keepalive</code>ï¼‰ã€‚</p>
</li>
<li>
<p><strong>æäº¤ (Commit)</strong>ï¼š</p>
<ul>
<li>å¦‚æœ<strong>æˆåŠŸ</strong>ï¼šä»æœ¬åœ°å­˜å‚¨ä¸­åˆ é™¤è¯¥æ¡è®°å½•ã€‚</li>
<li>å¦‚æœ<strong>å¤±è´¥</strong>ï¼šä¿ç•™è®°å½•ï¼Œç­‰å¾…é‡è¯•ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆä¸ç”¨ <code>navigator.sendBeacon</code>?</h3>
<p>ä½ å¯èƒ½ä¼šæƒ³åˆ°ç”¨ <code>navigator.sendBeacon</code> æ¥è§£å†³å…³é—­æµè§ˆå™¨æ—¶çš„æ•°æ®ä¸¢å¤±é—®é¢˜ã€‚
ç¡®å®ï¼Œ<code>sendBeacon</code> æ˜¯ä¸ºäº†â€œé¡µé¢å¸è½½â€åœºæ™¯è®¾è®¡çš„ï¼Œä½†å®ƒæœ‰ä¸¤ä¸ªè‡´å‘½ç¼ºç‚¹ï¼š</p>
<ol>
<li><strong>æ— æ³•è·å–æœåŠ¡å™¨å“åº”</strong>ï¼šå®ƒåªè¿”å› <code>true/false</code> è¡¨ç¤ºâ€œæ˜¯å¦æ”¾å…¥é˜Ÿåˆ—â€ï¼Œä¸ä»£è¡¨æœåŠ¡å™¨å¤„ç†æˆåŠŸã€‚</li>
<li><strong>æ— æ³•åšâ€œæˆåŠŸå³åˆ â€</strong>ï¼šæˆ‘ä»¬çš„ WAL ç­–ç•¥è¦æ±‚ <strong>åªæœ‰æœåŠ¡å™¨è¿”å› 200 OKï¼Œæ‰ä»æœ¬åœ°åˆ é™¤æ•°æ®</strong>ã€‚å¦‚æœç”¨ <code>sendBeacon</code>ï¼Œæˆ‘ä»¬ä¸çŸ¥é“æ˜¯å¦å‘é€æˆåŠŸï¼Œå°±æ— æ³•å®‰å…¨åœ°åˆ é™¤æœ¬åœ°æ•°æ®ï¼ˆåˆ äº†å¯èƒ½ä¸¢ï¼Œä¸åˆ å¯èƒ½é‡ï¼‰ã€‚</li>
</ol>
<p>å› æ­¤ï¼Œæˆ‘ä»¬é€‰æ‹© <code>fetch</code> é…åˆ <code>keepalive: true</code>ã€‚</p>
<p>ä¸€å¥è¯æ€»ç»“ï¼š<code>fetch + keepalive</code> èƒ½è¦†ç›– <code>sendBeacon</code> çš„â€œå¸è½½åœºæ™¯å°½é‡å‘å‡ºå»â€çš„èƒ½åŠ›ï¼ŒåŒæ—¶æˆ‘ä»¬è¿˜èƒ½æ‹¿åˆ°å“åº”çŠ¶æ€ç ï¼Œä»è€Œåšåˆ°â€œ<strong>ç¡®è®¤æœåŠ¡ç«¯æ”¶åˆ°äº†æ‰åˆ é™¤æœ¬åœ°</strong>â€ã€‚</p>
<p>å‚è€ƒé“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FNavigator%2FsendBeacon" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/sendBeacon" ref="nofollow noopener noreferrer">developer.mozilla.org/en-US/docs/â€¦</a></p>
<h2 data-id="heading-3">å…³é”®å®ç°ç»†èŠ‚</h2>
<p>Chrome æ’ä»¶é‡Œçš„ <code>chrome.storage</code> è¯»å†™æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥ä¼šæœ‰ç«æ€é—®é¢˜ã€‚</p>
<p><strong>å‰æï¼š</strong> æˆ‘ä»¬ä¸ºäº†ç®¡ç†æ–¹ä¾¿ï¼Œé€šå¸¸ä¼šæŠŠæ‰€æœ‰æ—¥å¿—æ”¾åœ¨<strong>åŒä¸€ä¸ª Key</strong>ï¼ˆä¾‹å¦‚ <code>logs</code>ï¼‰ä¸‹çš„ä¸€ä¸ªæ•°ç»„é‡Œã€‚æ­£æ˜¯å› ä¸ºå¤§å®¶æŠ¢ç€æ”¹è¿™<strong>åŒä¸€ä¸ªæ•°ç»„</strong>ï¼Œæ‰å‡ºäº†äº‹ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆå•çº¿ç¨‹ä¹Ÿæœ‰ç«æ€ï¼Ÿ</strong></p>
<p>JS æ˜¯å•çº¿ç¨‹çš„ï¼Œä½† <code>await</code> ä¼šæŒ‚èµ·å½“å‰ä»»åŠ¡å¹¶é‡Šæ”¾ä¸»çº¿ç¨‹çš„æ§åˆ¶æƒã€‚åœ¨ <code>await get()</code> å’Œ <code>await set()</code> ä¹‹é—´ï¼Œå…¶ä»–äº‹ä»¶å¤„ç†å‡½æ•°å¯èƒ½æ’å…¥æ‰§è¡Œå¹¶ä¿®æ”¹æ•°æ®ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">task</span> = (<span class="hljs-params">group</span>) =&gt; {
    <span class="hljs-comment">// ...</span>
    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> chrome.<span class="hljs-property">storage</span>.<span class="hljs-property">local</span>.<span class="hljs-title function_">get</span>(...); <span class="hljs-comment">// æš‚åœï¼Œé‡Šæ”¾æ§åˆ¶æƒ</span>
    <span class="hljs-comment">// ... (æ­¤æ—¶å…¶ä»–äº‹ä»¶å¯èƒ½æ’å…¥æ‰§è¡Œï¼Œä¿®æ”¹äº† storage) ...</span>
    <span class="hljs-keyword">await</span> chrome.<span class="hljs-property">storage</span>.<span class="hljs-property">local</span>.<span class="hljs-title function_">set</span>(...); <span class="hljs-comment">// å†™å…¥ï¼Œå¯èƒ½ä¼šè¦†ç›–åˆ«äººçš„ä¿®æ”¹</span>
    <span class="hljs-comment">// ...</span>
}

<span class="hljs-comment">// æ ‡ç­¾ç»„å…³é—­çš„æ—¶å€™è§¦å‘</span>
chrome.<span class="hljs-property">tabGroups</span>.<span class="hljs-property">onRemoved</span>.<span class="hljs-title function_">addListener</span>(task);

</code></pre>
<p>ä¸¾ä¸ªä¾‹å­ï¼šå‡è®¾ä½ åˆ›å»ºäº†ä¸¤ä¸ªæ ‡ç­¾é¡µåˆ†ç»„ï¼Œè¿™ä¸¤ä¸ªæ ‡ç­¾ç»„åŒæ—¶å…³é—­ï¼ˆA å’Œ Bï¼‰ï¼Œå°±è§¦å‘æ ‡ç­¾ç»„å…³é—­äº‹ä»¶ï¼Œå°±ä¼šè§¦å‘ä¸¤æ¬¡taskå‡½æ•°çš„æ‰§è¡Œã€‚</p>
<ol>
<li><strong>Task A</strong>ï¼šæ‰§è¡Œ <code>get()</code>ï¼Œè¯»å–åˆ° <code>[1]</code>ã€‚å‡†å¤‡å†™å…¥ <code>3</code>ï¼Œé‡ <code>await</code> æŒ‚èµ·ã€‚</li>
<li><strong>Task B</strong>ï¼šå› ä¸º A æš‚åœäº†ï¼ŒJS å¼•æ“è½¬è€Œå¤„ç† taskBã€‚æ‰§è¡Œ <code>get()</code>ã€‚å›  A å°šæœªå†™å…¥3ï¼ŒB è¯»å–åˆ°çš„ä»æ˜¯ <code>[1]</code>ã€‚å‡†å¤‡å†™å…¥4ï¼Œé‡ <code>await</code> æŒ‚èµ·ã€‚</li>
<li><strong>Task A</strong>ï¼šæ¢å¤ã€‚å†…å­˜æ•°æ®å˜ä¸º <code>[1ï¼Œ3]</code>ã€‚æ‰§è¡Œ <code>set()</code> å†™å…¥ç¡¬ç›˜ã€‚</li>
<li><strong>Task B</strong>ï¼šæ¢å¤ã€‚å†…å­˜æ•°æ®å˜ä¸º <code>[1, 4]</code>ã€‚æ‰§è¡Œ <code>set()</code> å†™å…¥ç¡¬ç›˜ã€‚</li>
</ol>
<p><strong>ç»“æœ</strong>ï¼šæœ€ç»ˆè®¾ç½®è¿›å­˜å‚¨çš„æ˜¯ <code>[1, 4]</code>ï¼Œæ•°æ® <code>3</code> è¢« B çš„å†™å…¥è¦†ç›–ä¸¢å¤±äº†ï¼è¿™å°±æ˜¯ç»å…¸çš„â€œè¯»-æ”¹-å†™â€ç«äº‰ã€‚</p>
<h3 data-id="heading-4">è§£å†³æ–¹æ¡ˆ</h3>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Promise é“¾å®ç°ä¸€ä¸ªç®€å•çš„â€œä»»åŠ¡é˜Ÿåˆ—â€ï¼Œå¼ºåˆ¶æ‰€æœ‰å­˜å‚¨æ“ä½œæ’é˜Ÿæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å…¨å±€ä»»åŠ¡é˜Ÿåˆ—</span>
<span class="hljs-keyword">let</span> globalTaskQueue = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>();

<span class="hljs-comment">/**
 * ä¸²è¡Œæ‰§è¡Œå™¨ï¼šæ— è®ºå¤–ç•Œå¦‚ä½•å¹¶å‘è°ƒç”¨ï¼Œå†…éƒ¨æ°¸è¿œæ’é˜Ÿæ‰§è¡Œ
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">runSequentially</span>(<span class="hljs-params">task</span>) {
  <span class="hljs-comment">// 1. æŠŠæ–°ä»»åŠ¡æ‹¼åˆ°é˜Ÿåˆ—å°¾éƒ¨</span>
  <span class="hljs-comment">// æ— è®ºä¹‹å‰çš„ä»»åŠ¡æœ‰æ²¡æœ‰åšå®Œï¼Œæ–°ä»»åŠ¡éƒ½å¾—æ’åœ¨ globalTaskQueue åé¢æ‰§è¡Œ</span>
  <span class="hljs-keyword">const</span> next = globalTaskQueue.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">task</span>());
  
  <span class="hljs-comment">// 2. æ›´æ–°é˜Ÿåˆ—æŒ‡é’ˆ</span>
   <span class="hljs-comment">// å…³é”®ç‚¹ï¼šå¦‚æœ next å¤±è´¥(Rejected)ï¼Œcatché”™è¯¯ï¼Œé˜²æ­¢ä¸€ä¸ªä»»åŠ¡å¤±è´¥é˜»å¡æ•´ä¸ªé˜Ÿåˆ—,</span>
   <span class="hljs-comment">// catchä¼šè¿”å›ä¸€ä¸ªæ–°çš„ Resolved Promise</span>
   <span class="hljs-comment">// æ‰€ä»¥ globalTaskQueue æ€»æ˜¯æŒ‡å‘ä¸€ä¸ªâ€œå¥åº·â€çš„ Promiseï¼Œç¡®ä¿åç»­ä»»åŠ¡èƒ½æ¥ä¸Š</span>
  globalTaskQueue = next.<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> {});
  <span class="hljs-keyword">return</span> next;
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">saveReport</span>(<span class="hljs-params">report</span>) {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">task</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> chrome.<span class="hljs-property">storage</span>.<span class="hljs-property">local</span>.<span class="hljs-title function_">get</span>([<span class="hljs-string">'reports'</span>]);
    <span class="hljs-comment">// ... è¯»å†™é€»è¾‘ ...</span>
    <span class="hljs-keyword">await</span> chrome.<span class="hljs-property">storage</span>.<span class="hljs-property">local</span>.<span class="hljs-title function_">set</span>({ <span class="hljs-attr">reports</span>: newData });
  };

  <span class="hljs-keyword">return</span> <span class="hljs-title function_">runSequentially</span>(task);
}
</code></pre>
<p><strong>åŸç†è§£æï¼š</strong></p>
<p>è¿™å°±å¥½æ¯” <strong>æ’é˜Ÿåšæ ¸é…¸</strong>ã€‚<code>globalTaskQueue</code> å°±æ˜¯é˜Ÿä¼çš„æœ€åä¸€ä¸ªäººã€‚</p>
<ol>
<li><strong>åˆå§‹çŠ¶æ€</strong>ï¼šé˜Ÿä¼é‡Œæ²¡äººï¼ˆ<code>Promise.resolve()</code>ï¼‰ã€‚</li>
<li><strong>A æ¥äº†</strong>ï¼šè°ƒç”¨ <code>runSequentially(TaskA)</code>ã€‚
<ul>
<li><code>globalTaskQueue.then(() =&gt; TaskA())</code>ï¼šA ç«™åœ¨äº†é˜Ÿä¼æœ€åã€‚</li>
<li><code>globalTaskQueue</code> æ›´æ–°æŒ‡å‘ Aã€‚</li>
</ul>
</li>
<li><strong>B æ¥äº†</strong>ï¼šè°ƒç”¨ <code>runSequentially(TaskB)</code>ã€‚
<ul>
<li>æ­¤æ—¶ <code>globalTaskQueue</code> æŒ‡å‘ Aã€‚</li>
<li><code>A.then(() =&gt; TaskB())</code>ï¼šB ç«™åœ¨äº† A åé¢ã€‚å“ªæ€• A è¿˜åœ¨åšï¼ˆpendingï¼‰ï¼ŒB ä¹Ÿå¾—ç­‰ç€ã€‚</li>
<li><code>globalTaskQueue</code> æ›´æ–°æŒ‡å‘ Bã€‚</li>
</ul>
</li>
</ol>
<p><strong>ä¸ºä»€ä¹ˆè¦ <code>.catch(() =&gt; {})</code>ï¼Ÿ</strong></p>
<p>å¦‚æœä¸åŠ  catchï¼Œä¸‡ä¸€ A åšæ ¸é…¸æ—¶æ™•å€’äº†ï¼ˆæŠ›å‡º Errorï¼‰ï¼Œæ•´ä¸ª Promise é“¾å°±ä¼šä¸­æ–­ï¼ˆRejectedï¼‰ï¼Œå¯¼è‡´æ’åœ¨åé¢çš„ Bã€Cã€D å…¨éƒ½æ— æ³•æ‰§è¡Œã€‚
åŠ ä¸Š catch åï¼Œç›¸å½“äºæŠŠæ™•å€’çš„ A æŠ¬èµ°ï¼Œé˜Ÿä¼ç»§ç»­å¾€ä¸‹èµ°ï¼ŒB ä¾ç„¶èƒ½æ­£å¸¸æ‰§è¡Œã€‚</p>
<h3 data-id="heading-5">æ€è€ƒï¼šèƒ½ä¸èƒ½é€šè¿‡æ‹†åˆ† Key æ¥é¿å…ç«æ€é—®é¢˜ï¼Ÿ</h3>
<p>ä½ å¯èƒ½ä¼šæå‡ºï¼šâ€œ<strong>èƒ½ä¸èƒ½æŠŠæ¯ä¸ªæ ‡ç­¾ç»„æ—¥å¿—å­˜æˆç‹¬ç«‹çš„ Keyï¼ˆå¦‚ <code>report-åˆ†ç»„id</code>ï¼‰ï¼Œè¯»å–æ—¶éå†æ‰€æœ‰ <code>report-</code> å¼€å¤´çš„ Keyï¼Ÿè¿™æ ·ä¸å°±å®Œå…¨é¿å…äº†æ•°ç»„å¹¶å‘è¯»å†™å†²çªäº†å—ï¼Ÿ</strong>â€</p>
<p><strong>è¿™æ–¹æ¡ˆå¯è¡Œï¼Œä¸”éå¸¸å·§å¦™ï¼</strong></p>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ol>
<li>
<p><strong>å¤©ç„¶æ— é”ï¼ˆå„å†™å„çš„ï¼‰</strong>ï¼šA å†™å…¥ <code>report-A</code>ï¼ŒB å†™å…¥ <code>report-B</code>ã€‚è¿™å°±å¥½æ¯”å¤§å®¶å„è‡ªåœ¨è‡ªå·±çš„æœ¬å­ä¸Šå†™å­—ï¼Œè€Œä¸æ˜¯å»æŠ¢åŒä¸€å—é»‘æ¿ã€‚æ—¢ç„¶èµ„æºä¸å…±äº«ï¼Œè‡ªç„¶å°±ä¸éœ€è¦â€œæ’é˜Ÿâ€æˆ–â€œåŠ é”â€ï¼Œå½»åº•æ ¹æ²»äº†å¹¶å‘å†²çªã€‚</p>
</li>
<li>
<p><strong>æ€§èƒ½æé«˜</strong>ï¼šå†™å…¥æ˜¯ O(1) çš„çº¯è¿½åŠ æ“ä½œã€‚</p>
</li>
</ol>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ol>
<li><strong>Key æ±¡æŸ“</strong>ï¼šchrome.storage` å°±åƒä¸€ä¸ªæŠ½å±‰ã€‚å¦‚æœä½ å¾€é‡Œå¡äº† 1000 å¼ â€œå°çº¸æ¡â€ï¼ˆç‹¬ç«‹çš„ Keyï¼‰ï¼Œå½“ä½ æƒ³è¦æ‰¾åˆ«çš„ä¸œè¥¿ï¼ˆæ¯”å¦‚é…ç½®é¡¹ï¼‰æ—¶ï¼Œä¼šè¢«è¿™äº›ç¢çº¸æ¡æ·¹æ²¡ï¼Œè°ƒè¯•çš„æ—¶å€™ç®€ç›´è¦ç–¯ã€‚</li>
<li><strong>æ‰¾èµ·æ¥æ…¢ï¼ˆå…¨é‡æ‰«æï¼‰</strong>ï¼šè™½ç„¶å†™çš„æ—¶å€™å¿«ï¼Œä½†<strong>è¯»çš„æ—¶å€™æ…¢æ­»äº†</strong>ã€‚æ¯æ¬¡å¯åŠ¨è¡¥å‘æ•°æ®ï¼Œä½ å¿…é¡»æŠŠæŠ½å±‰å½»åº•ç¿»ä¸ªåº•æœå¤©ï¼ˆ<code>get(null)</code>ï¼‰ï¼ŒæŠŠæ‰€æœ‰ä¸œè¥¿å€’åœ¨æ¡Œä¸Šï¼Œå†ä¸€å¼ å¼ æŒ‘å‡ºæ˜¯æ—¥å¿—çš„çº¸æ¡ã€‚æ•°æ®ä¸€å¤šï¼Œè¿™æ“ä½œå¡å¾—è¦å‘½ã€‚</li>
</ol>
<h3 data-id="heading-6">2. åŒé‡é‡è¯•æœºåˆ¶ (ä¿è¯æœ€ç»ˆä¸€è‡´æ€§)</h3>
<p>å½“æµè§ˆå™¨è¢«ç›´æ¥å…³é—­æ—¶ï¼Œæ’ä»¶è¿›ç¨‹<strong>ä¸ä¼šç¬é—´æ¶ˆå¤±</strong>ã€‚æµè§ˆå™¨ä¼šå…ˆå…³é—­æ‰€æœ‰æ ‡ç­¾å’Œåˆ†ç»„ï¼Œè¿™ä¼šè§¦å‘æ’ä»¶çš„ <code>onRemoved</code> äº‹ä»¶ã€‚æˆ‘ä»¬åˆ©ç”¨è¿™æœ€åå‡ ç™¾æ¯«ç§’çš„â€œå›å…‰è¿”ç…§â€æ—¶é—´ï¼Œæ¥æ”¶å…³é—­æ¶ˆæ¯å¹¶å°†æ•°æ®<strong>æŠ¢å…ˆå­˜å…¥æœ¬åœ°ç¡¬ç›˜</strong>ï¼Œç„¶åå†å°è¯•è¿›è¡Œæ•°æ®ä¸ŠæŠ¥ã€‚</p>
<p>ä¸è¿‡è¿˜æ˜¯ä¼šæœ‰æ•°æ®ç§¯å‹åˆ°æœ¬åœ°çš„æƒ…å†µï¼Œ<strong>â€œä¸æ˜¯è¯´æ—¥å¿—ä¸ŠæŠ¥æˆåŠŸäº†å°±åˆ å—ï¼Ÿä¸ºä»€ä¹ˆæœ¬åœ°è¿˜ä¼šæœ‰ç§¯å‹æ•°æ®ï¼Ÿâ€</strong></p>
<p>æ²¡é”™ï¼Œç†æƒ³æƒ…å†µä¸‹æœ¬åœ°å­˜å‚¨åº”è¯¥æ˜¯ç©ºçš„ã€‚ä½†åœ¨ç°å®ä¸–ç•Œä¸­ï¼Œæ„å¤–æ— å¤„ä¸åœ¨ï¼š</p>
<ol>
<li><strong>ç”¨æˆ·æ–­ç½‘äº†</strong>ï¼ˆæ¯”å¦‚è¿ç€ Wi-Fi ä½†æ²¡å¤–ç½‘ï¼Œæˆ–è€…åœ¨é£æœºä¸Šï¼‰ã€‚</li>
<li><strong>æœåŠ¡å™¨æŒ‚äº†</strong>ï¼ˆæ¥å£è¿”å› 500 æˆ–è¶…æ—¶ï¼‰ã€‚</li>
<li><strong>æµè§ˆå™¨å´©æºƒ</strong>ï¼šè™½ç„¶å´©æºƒç¬é—´æ’ä»¶æ— æ³•ç›‘å¬æ–°äº‹ä»¶ï¼Œä½†<strong>ä¹‹å‰å·²ç»å­˜å…¥ç¡¬ç›˜</strong>çš„ä»»åŠ¡å¯èƒ½è¿˜æ²¡æ¥å¾—åŠå‘å‡ºå»ï¼ˆæˆ–è€…å‘åˆ°ä¸€åŠè¿›ç¨‹æ²¡äº†ï¼‰ï¼Œè¿™äº›æ•°æ®ä¾ç„¶å®‰å…¨åœ°èººåœ¨ç¡¬ç›˜é‡Œã€‚</li>
</ol>
<p>åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œæ•°æ®å‘ä¸å‡ºå»ï¼Œå°±å¿…é¡»<strong>æ»ç•™</strong>åœ¨æœ¬åœ°ç­‰å¾…ä¸‹ä¸€æ¬¡æœºä¼šã€‚æˆ‘ä»¬éœ€è¦å»ºç«‹ä¸€å¥—æœºåˆ¶ï¼ŒæŠŠè¿™äº›â€œæ¼ç½‘ä¹‹é±¼â€æå‡ºæ¥é‡å‘ã€‚</p>
<ul>
<li>
<p><strong>æ—¶æœºä¸€ï¼šæµè§ˆå™¨å¯åŠ¨æ—¶ (<code>onStartup</code>)</strong>
ç”¨æˆ·å†æ¬¡æ‰“å¼€æµè§ˆå™¨æ—¶ï¼Œè¯´æ˜ç¯å¢ƒå¯èƒ½æ¢å¤äº†ï¼ˆæ¯”å¦‚è¿ä¸Šäº†ç½‘ï¼‰ï¼Œè¿™æ˜¯è¡¥å‘ç§¯å‹æ•°æ®çš„ç»ä½³æ—¶æœºã€‚</p>
</li>
<li>
<p><strong>æ—¶æœºäºŒï¼šå®šæ—¶å™¨è½®è¯¢ (<code>alarms</code>)</strong>
å¦‚æœç”¨æˆ·ä¸€ç›´ä¸å…³é—­æµè§ˆå™¨ï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½å¹²ç­‰ã€‚åˆ©ç”¨ <code>chrome.alarms</code> è®¾ç½®ä¸€ä¸ªæ¯ 5 åˆ†é’Ÿçš„å®šæ—¶ä»»åŠ¡ã€‚</p>
<blockquote>
<p><strong>çµé­‚æ‹·é—®ï¼šä¸ºä»€ä¹ˆä¸ç”¨ <code>setInterval</code>ï¼Ÿ</strong></p>
<p>è¯´ç™½äº†å°±ä¸€å¥è¯ï¼šMV3ç‰ˆæœ¬æ’ä»¶çš„ <strong>Service Worker</strong> ä¸ä¼šä¸€ç›´åœ¨çº¿ã€‚</p>
<p>å®ƒæ˜¯äº‹ä»¶é©±åŠ¨çš„ï¼šæµè§ˆå™¨æœ‰äº‹ä»¶æ¨é€åˆ°Service Workerçš„è¯å°±èµ·æ¥å¹²æ´»ï¼›æ´»å¹²å®Œã€å¹¶ä¸”ä¸€ä¼šå„¿æ²¡æ–°äº‹ä»¶ï¼Œæµè§ˆå™¨å°±æŠŠå®ƒ<strong>æŒ‚èµ·/å›æ”¶</strong>ï¼ˆå†…å­˜æ¸…ç©ºï¼‰çœèµ„æºã€‚</p>
<ul>
<li><strong><code>setInterval</code> / <code>setTimeout</code></strong>ï¼šæœ¬è´¨æ˜¯â€œå†…å­˜é‡Œè‡ªå·±æ•°ç§’â€ã€‚Service Worker ä¸€è¢«æŒ‚èµ·/å›æ”¶ï¼Œè®¡æ—¶å™¨ç›´æ¥æ–­ç”µï¼Œä½ å°±åˆ«æŒ‡æœ›å®ƒâ€œæ¯ 5 åˆ†é’Ÿå‡†ç‚¹æ‰“å¡â€äº†ã€‚</li>
<li><strong><code>chrome.alarms</code></strong>ï¼šæµè§ˆå™¨å¸®ä½ æ‰˜ç®¡çš„é—¹é’Ÿã€‚æ—¶é—´åˆ°äº†å°±å‘ <code>alarms.onAlarm</code> äº‹ä»¶ï¼Œå¿…è¦æ—¶è¿˜èƒ½æŠŠ Service Worker <strong>å«é†’</strong>æ¥å¤„ç†ã€‚</li>
</ul>
<p>ç»“è®ºå¾ˆç®€å•ï¼š<strong>æƒ³è¦é è°±çš„å®šæ—¶é‡è¯•ï¼Œç”¨ <code>chrome.alarms</code>ï¼›<code>setInterval</code> é€‚åˆé¡µé¢è¿™ç§å¸¸é©»ç¯å¢ƒé‡Œçš„å°è½®è¯¢ã€‚</strong></p>
</blockquote>
</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç›‘å¬å®šæ—¶å™¨è§¦å‘ï¼šæµè§ˆå™¨åˆ°ç‚¹ä¼šæ´¾å‘äº‹ä»¶ï¼Œå¿…è¦æ—¶å”¤é†’ SW</span>
chrome.<span class="hljs-property">alarms</span>.<span class="hljs-property">onAlarm</span>.<span class="hljs-title function_">addListener</span>(<span class="hljs-function">(<span class="hljs-params">alarm</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (alarm.<span class="hljs-property">name</span> === <span class="hljs-variable constant_">ALARM_NAME</span>) <span class="hljs-title function_">processPendingReports</span>();
});

<span class="hljs-comment">// JS ç‰ˆä¼ªä»£ç ï¼šè¯»æœ¬åœ° -&gt; ä¸¢å¼ƒè¿‡æœŸ -&gt; é€æ¡ä¸ŠæŠ¥ -&gt; ä¸ŠæŠ¥æˆåŠŸæ‰åˆ é™¤ï¼ˆå¤±è´¥ç»§ç»­ç•™ç€ç­‰ä¸‹æ¬¡ï¼‰</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">processPendingReports</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> reports = (<span class="hljs-keyword">await</span> <span class="hljs-title function_">storageGet</span>(<span class="hljs-string">'pending_reports'</span>)) ?? [];

  <span class="hljs-keyword">const</span> pending = <span class="hljs-title function_">removeExpired</span>(reports);
  <span class="hljs-keyword">if</span> (pending.<span class="hljs-property">length</span> !== reports.<span class="hljs-property">length</span>) {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">storageSet</span>(<span class="hljs-string">'pending_reports'</span>, pending);
  }

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> report <span class="hljs-keyword">of</span> pending) {
    <span class="hljs-keyword">const</span> ok = <span class="hljs-keyword">await</span> <span class="hljs-title function_">sendReport</span>(report);
    <span class="hljs-keyword">if</span> (ok) <span class="hljs-keyword">await</span> <span class="hljs-title function_">storageRemove</span>(<span class="hljs-string">'pending_reports'</span>, report.<span class="hljs-property">id</span>);
  }
}

<span class="hljs-comment">// è¯´æ˜ï¼šè¿™é‡Œçš„ storageGet/storageSet/storageRemove æ˜¯ä¸ºäº†è®²æ¸…æµç¨‹çš„ä¼ªå‡½æ•°ï¼Œ</span>
<span class="hljs-comment">// è¿™å‡ ä¸ªæ˜¯å¯¹chrome.storage.local.get/setçš„å°è£…ã€‚</span>
</code></pre>
<h3 data-id="heading-7">3. è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ (é˜²å †ç§¯)</h3>
<p><strong>èƒŒæ™¯çŸ¥è¯†ï¼š</strong></p>
<blockquote>
<p>æ•°æ®å­˜å‚¨åœ¨ <code>storage.local</code> ä¸­ï¼Œå¹¶åœ¨ç§»é™¤æ‰©å±•ç¨‹åºæ—¶è‡ªåŠ¨æ¸…é™¤ã€‚å­˜å‚¨ç©ºé—´é™åˆ¶ä¸º <strong>10 MB</strong>ï¼ˆåœ¨ Chrome 113 åŠæ›´æ—©ç‰ˆæœ¬ä¸­ä¸º 5 MBï¼‰ï¼Œä½†å¯ä»¥é€šè¿‡è¯·æ±‚ <code>"unlimitedStorage"</code> æƒé™æ¥å¢åŠ æ­¤é™åˆ¶ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä¼šå‘å†…å®¹è„šæœ¬å…¬å¼€ï¼Œä½†å¯ä»¥é€šè¿‡è°ƒç”¨ <code>chrome.storage.local.setAccessLevel()</code> æ¥æ›´æ”¹æ­¤è¡Œä¸ºã€‚
å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.chrome.google.cn%2Fdocs%2Fextensions%2Freference%2Fapi%2Fstorage%3Fhl%3Dzh-cn" target="_blank" title="https://developer.chrome.google.cn/docs/extensions/reference/api/storage?hl=zh-cn" ref="nofollow noopener noreferrer">Chrome Storage API</a></p>
</blockquote>
<p>å°½ç®¡æœ‰ 10MB ç”šè‡³æ— é™çš„ç©ºé—´ï¼Œä½†å¦‚æœæœåŠ¡å™¨å½»åº•æŒ‚äº†ï¼Œæˆ–è€…ç”¨æˆ·å¤„äºæ–­ç½‘ç¯å¢ƒã€ç§’å…³æµè§ˆå™¨ï¼Œæœ¬åœ°æ•°æ®ä¾ç„¶ä¼šæ— é™è†¨èƒ€ï¼Œæœ€ç»ˆå½±å“æ€§èƒ½ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦è®¾ç½®<strong>ç†”æ–­æœºåˆ¶</strong>ã€‚</p>
<ul>
<li><strong>å®¹é‡é™åˆ¶</strong>ï¼šæœ€å¤šä¿ç•™ N æ¡ï¼ˆä¾‹å¦‚ 1000 æ¡ï¼‰ï¼Œæ–°æ•°æ®æŒ¤å æ—§æ•°æ®ã€‚</li>
<li><strong>æœ‰æ•ˆæœŸé™åˆ¶</strong>ï¼šæ•°æ®äº§ç”Ÿè¶…è¿‡ 7 å¤©æœªä¸ŠæŠ¥æˆåŠŸï¼Œè§†ä¸ºè¿‡æœŸæ•°æ®ç›´æ¥ä¸¢å¼ƒã€‚</li>
<li><strong>æ•°æ®å‹ç¼©</strong>ï¼šå¦‚æœå•æ¡æ—¥å¿—æ¯”è¾ƒå¤§ï¼ˆURL å¾ˆé•¿/å­—æ®µå¾ˆå¤šï¼‰ï¼Œå¯ä»¥è€ƒè™‘æŠŠæ•°æ®å‹ç¼©åå†å­˜ã€‚</li>
</ul>
<p><strong>ä»£ç ç¤ºä¾‹ï¼šStep 1 - å­˜å‚¨ä¸å‹ç¼©</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MAX_REPORTS</span> = <span class="hljs-number">1000</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">REPORT_EXPIRATION_MS</span> = <span class="hljs-number">7</span> * <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>; <span class="hljs-comment">// 7å¤©</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">STORAGE_KEY</span> = <span class="hljs-string">'pending_reports'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">saveReport</span>(<span class="hljs-params">newReport</span>) {
  <span class="hljs-comment">// ä½¿ç”¨ä¹‹å‰å®šä¹‰çš„ä¸²è¡Œé”ï¼Œé˜²æ­¢å¹¶å‘å†²çª</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">runSequentially</span>(<span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-comment">// 1. è¯»å–ç°æœ‰æ•°æ®</span>
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> chrome.<span class="hljs-property">storage</span>.<span class="hljs-property">local</span>.<span class="hljs-title function_">get</span>([<span class="hljs-variable constant_">STORAGE_KEY</span>]);
    <span class="hljs-keyword">let</span> reports = result[<span class="hljs-variable constant_">STORAGE_KEY</span>] || [];

    <span class="hljs-comment">// 2. è¿½åŠ æ–°æŠ¥å‘Š (å¯é€‰ï¼šå…ˆè¿›è¡Œå‹ç¼©)</span>
    <span class="hljs-comment">// ä½¿ç”¨åŸç”Ÿ CompressionStream (Gzip) è¿›è¡Œå‹ç¼©ï¼Œèƒ½å¤§å¹…èŠ‚çœç©ºé—´</span>
    <span class="hljs-keyword">const</span> reportToSave = <span class="hljs-keyword">await</span> <span class="hljs-title function_">compressReport</span>(newReport); 
    reports.<span class="hljs-title function_">push</span>(reportToSave);

    <span class="hljs-comment">// 3. æ‰§è¡Œç†”æ–­ç­–ç•¥ï¼ˆè‡ªæˆ‘ä¿æŠ¤ï¼‰</span>
    <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    
    <span class="hljs-comment">// 3.1 æœ‰æ•ˆæœŸé™åˆ¶ï¼šè¿‡æ»¤æ‰è¿‡æœŸçš„</span>
    reports = reports.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> (now - r.<span class="hljs-property">timestamp</span>) &lt;= <span class="hljs-variable constant_">REPORT_EXPIRATION_MS</span>);

    <span class="hljs-comment">// 3.2 å®¹é‡é™åˆ¶ï¼šå¦‚æœè¿˜è¶…æ ‡ï¼Œå‰”é™¤æœ€æ—§çš„</span>
    <span class="hljs-keyword">if</span> (reports.<span class="hljs-property">length</span> &gt; <span class="hljs-variable constant_">MAX_REPORTS</span>) {
      reports.<span class="hljs-title function_">shift</span>();
    }

    <span class="hljs-comment">// 4. å†™å›ç¡¬ç›˜</span>
    <span class="hljs-keyword">await</span> chrome.<span class="hljs-property">storage</span>.<span class="hljs-property">local</span>.<span class="hljs-title function_">set</span>({ [<span class="hljs-variable constant_">STORAGE_KEY</span>]: reports });
  });
}

<span class="hljs-comment">/**
 * ä½¿ç”¨åŸç”Ÿ CompressionStream API è¿›è¡Œ Gzip å‹ç¼©
 * æµç¨‹ï¼šJSON -&gt; String -&gt; Gzip Stream -&gt; ArrayBuffer -&gt; Base64
 *
 * ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆè½¬ï¼Ÿ
 * 1. CompressionStream åªæ¥å—æµï¼ˆStreamï¼‰ä½œä¸ºè¾“å…¥ã€‚
 * 2. chrome.storage åªèƒ½å­˜å‚¨ JSON å®‰å…¨çš„æ•°æ®ï¼ˆå­—ç¬¦ä¸²/æ•°å­—/å¯¹è±¡ï¼‰ï¼Œä¸èƒ½ç›´æ¥å­˜äºŒè¿›åˆ¶ï¼ˆArrayBuffer/Blobï¼‰ã€‚
 * 3. æ‰€ä»¥å¿…é¡»æŠŠå‹ç¼©åçš„äºŒè¿›åˆ¶æ•°æ®è½¬æˆ Base64 å­—ç¬¦ä¸²æ‰èƒ½å­˜è¿›å»ã€‚
 */</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">compressReport</span>(<span class="hljs-params">report</span>) {
  <span class="hljs-comment">// 1. è½¬å­—ç¬¦ä¸²</span>
  <span class="hljs-keyword">const</span> jsonStr = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(report);
  
  <span class="hljs-comment">// 2. åˆ›å»ºå‹ç¼©æµ</span>
  <span class="hljs-keyword">const</span> stream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([jsonStr]).<span class="hljs-title function_">stream</span>().<span class="hljs-title function_">pipeThrough</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CompressionStream</span>(<span class="hljs-string">'gzip'</span>));
  
  <span class="hljs-comment">// 3. è¯»å–æµä¸º ArrayBuffer</span>
  <span class="hljs-keyword">const</span> compressedResponse = <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(stream);
  <span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">await</span> compressedResponse.<span class="hljs-title function_">blob</span>();
  <span class="hljs-keyword">const</span> buffer = <span class="hljs-keyword">await</span> blob.<span class="hljs-title function_">arrayBuffer</span>();

  <span class="hljs-comment">// 4. è½¬ Base64 å­˜å‚¨ (storage ä¸æ”¯æŒç›´æ¥å­˜äºŒè¿›åˆ¶ Blob)</span>
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">id</span>: report.<span class="hljs-property">id</span> || <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
    <span class="hljs-attr">timestamp</span>: report.<span class="hljs-property">timestamp</span>,
    <span class="hljs-comment">// æ ‡è®°è¿™æ˜¯å‹ç¼©æ•°æ®</span>
    <span class="hljs-attr">isCompressed</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">data</span>: <span class="hljs-title function_">arrayBufferToBase64</span>(buffer)
  };
}

<span class="hljs-comment">// è¾…åŠ©å‡½æ•°ï¼šArrayBuffer è½¬ Base64</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">arrayBufferToBase64</span>(<span class="hljs-params">buffer</span>) {
  <span class="hljs-keyword">let</span> binary = <span class="hljs-string">''</span>;
  <span class="hljs-keyword">const</span> bytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(buffer);
  <span class="hljs-keyword">const</span> len = bytes.<span class="hljs-property">byteLength</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) {
    binary += <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>(bytes[i]);
  }
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">btoa</span>(binary);
}
</code></pre>
<p>ä»£ç è§£é‡Šï¼š</p>
<ol>
<li>
<p><strong>å…³äº <code>saveReport</code> çš„ç†”æ–­é€»è¾‘</strong>ï¼š</p>
<ul>
<li><strong>runSequentially</strong>ï¼šè¿™å°±æ˜¯æˆ‘ä»¬å‰é¢æåˆ°çš„â€œæ’é˜Ÿåšæ ¸é…¸â€ï¼Œé˜²æ­¢åŒæ—¶å†™æ–‡ä»¶å¯¼è‡´æ•°æ®é”™ä¹±ã€‚</li>
<li><strong>filter è¿‡æœŸæ•°æ®</strong>ï¼šæ¯æ¬¡å†™å…¥å‰ï¼Œé¡ºæ‰‹æŠŠ 7 å¤©å‰çš„â€œè€å¤è‘£â€æ¸…ç†æ‰ï¼Œä¿æŒé˜Ÿåˆ—æ–°é²œã€‚</li>
<li><strong>shift å‰”é™¤æ—§æ•°æ®</strong>ï¼šå¦‚æœé˜Ÿåˆ—æ»¡äº†ï¼ˆè¶…è¿‡ 1000 æ¡ï¼‰ï¼Œå°±ç‹ å¿ƒæŠŠæœ€è€çš„é‚£æ¡åˆ æ‰ï¼Œç»™æ–°æ•°æ®è…¾ä½ç½®ã€‚     ï¼ˆ<strong>æ³¨æ„</strong>ï¼šè™½ç„¶å¯ä»¥ç”³è¯· <code>unlimitedStorage</code> è·å¾—æ— é™ç©ºé—´ï¼Œä½†CPU/å†…å­˜å’Œåºåˆ—åŒ–/ååºåˆ—åŒ–å¼€é”€ä»ç„¶å­˜ï¼Œã€‚å¦‚æœé˜Ÿåˆ—å¤ªé•¿ï¼Œæ¯æ¬¡è¯»å–éƒ½ä¼šå¡é¡¿ï¼Œæ‰€ä»¥å¿…é¡»é™åˆ¶æ•°é‡ã€‚ï¼‰</li>
</ul>
</li>
<li>
<p><strong>å…³äº <code>compressReport</code> çš„äºŒè¿›åˆ¶è½¬æ¢</strong>ï¼š</p>
<ul>
<li><strong>new Response(stream)</strong>ï¼šè¿™å…¶å®æ˜¯ä¸ªå·æ‡’çš„å°æŠ€å·§ã€‚<code>CompressionStream</code> åå‡ºæ¥çš„æ˜¯ä¸ªæµï¼ˆStreamï¼‰ï¼Œè¦æŠŠå®ƒå˜æˆæˆ‘ä»¬èƒ½å¤„ç†çš„äºŒè¿›åˆ¶å—ï¼ˆArrayBufferï¼‰ï¼ŒæŒ‰ç†è¯´å¾—å†™ä¸ªå¾ªç¯ä¸€ç‚¹ç‚¹è¯»ã€‚ä½†æµè§ˆå™¨çš„ <code>Response</code> å¯¹è±¡è‡ªå¸¦äº†â€œæŠŠæµä¸€å£æ°”å¸å¹²å¹¶è½¬æˆ Blobâ€çš„åŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬å€Ÿç”¨å®ƒæ¥çœå»å†™å¾ªç¯è¯»å–çš„éº»çƒ¦ã€‚</li>
<li><strong>Base64 è½¬ç </strong>ï¼š<code>chrome.storage</code> æ¯”è¾ƒå¨‡æ°”ï¼Œå®ƒåªèƒ½å­˜å­—ç¬¦ä¸²æˆ– JSON å¯¹è±¡ï¼Œå­˜ä¸äº†äºŒè¿›åˆ¶æ•°æ®ï¼ˆArrayBufferï¼‰ã€‚å¦‚æœä½ ç›´æ¥æŠŠå‹ç¼©åçš„äºŒè¿›åˆ¶æ‰”è¿›å»ï¼Œå®ƒä¼šå˜æˆä¸€ä¸ªç©ºå¯¹è±¡ <code>{}</code>ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠäºŒè¿›åˆ¶æ•°æ®â€œç¼–ç â€æˆä¸€ä¸²é•¿é•¿çš„å­—ç¬¦ä¸²ï¼ˆBase64ï¼‰ï¼Œå­˜çš„æ—¶å€™å­˜å­—ç¬¦ä¸²ï¼Œå–çš„æ—¶å€™å†è¿˜åŸå›å»ã€‚</li>
</ul>
</li>
</ol>
<p><strong>ä»£ç ç¤ºä¾‹ï¼šStep 2 - è¯»å–ä¸ä¸ŠæŠ¥</strong></p>
<p>æ—¢ç„¶å­˜è¿›å»äº†ï¼Œæ€ä¹ˆå‘å‡ºæ¥å‘¢ï¼Ÿ<strong>å¯ä»¥ç›´æ¥å‘ Base64 å—ï¼Ÿ</strong></p>
<p><strong>å¯ä»¥ï¼Œä½†æ²¡å¿…è¦ã€‚</strong>
å³ä½¿ç®—ä¸Š Base64 çš„ 33% è†¨èƒ€ï¼Œå‹ç¼©åï¼ˆ100KB -&gt; 26.6KBï¼‰ä¾ç„¶è¡€èµšã€‚ä½†è½¬å› Binary æœ‰ä¸¤ä¸ªæ ¸å¿ƒä¼˜åŠ¿ï¼š</p>
<ol>
<li><strong>æè‡´çœæµ</strong>ï¼šæŠŠé‚£ 33% çš„è†¨èƒ€å†å‹å›å»ï¼ˆ26.6KB -&gt; 20KBï¼‰ã€‚</li>
<li><strong>ä¸ç»™åç«¯æ‰¾éº»çƒ¦</strong>ï¼šåªè¦åŠ ä¸Š <code>Content-Encoding: gzip</code>ï¼ŒæœåŠ¡å™¨ç½‘å…³ï¼ˆNginxï¼‰ä¼šè‡ªåŠ¨è§£å‹ï¼Œåç«¯ä¸šåŠ¡ä»£ç æ‹¿åˆ°çš„ç›´æ¥å°±æ˜¯ JSONã€‚å¦‚æœä½ å‘ Base64ï¼Œåç«¯è¿˜å¾—ä¸“é—¨å†™ä»£ç å…ˆè§£ç å†è§£å‹ï¼Œ<strong>å®¹æ˜“è¢«åŒäº‹åæ§½</strong>ã€‚</li>
</ol>
<p>è¿™é‡Œå°±è½®åˆ° <code>base64ToUint8Array</code> ç™»åœºäº†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è¾…åŠ©å‡½æ•°ï¼šBase64 è½¬ Uint8Array</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">base64ToUint8Array</span>(<span class="hljs-params">base64</span>) {
  <span class="hljs-keyword">const</span> binaryString = <span class="hljs-title function_">atob</span>(base64);
  <span class="hljs-keyword">const</span> bytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(binaryString.<span class="hljs-property">length</span>);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; binaryString.<span class="hljs-property">length</span>; i++) {
    bytes[i] = binaryString.<span class="hljs-title function_">charCodeAt</span>(i);
  }
  <span class="hljs-keyword">return</span> bytes;
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">sendReport</span>(<span class="hljs-params">report</span>) {
  <span class="hljs-keyword">let</span> body = report;
  <span class="hljs-keyword">const</span> headers = { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> };

  <span class="hljs-keyword">if</span> (report.<span class="hljs-property">isCompressed</span>) {
    <span class="hljs-comment">// 1. Base64 -&gt; äºŒè¿›åˆ¶ (è¿˜åŸä½“ç§¯)</span>
    <span class="hljs-comment">// è¿™ä¸€æ­¥è‡³å…³é‡è¦ï¼å¦‚æœä¸è½¬å›äºŒè¿›åˆ¶ç›´æ¥å‘ Base64ï¼Œæµé‡ä¼šç™½ç™½å¢åŠ  33%</span>
    <span class="hljs-keyword">const</span> binaryData = <span class="hljs-title function_">base64ToUint8Array</span>(report.<span class="hljs-property">data</span>);
    
    <span class="hljs-comment">// 2. ç›´æ¥å‘é€äºŒè¿›åˆ¶ï¼Œå¹¶å‘Šè¯‰æœåŠ¡å™¨ï¼šâ€œæˆ‘å‘çš„æ˜¯ Gzip å“¦â€</span>
    body = binaryData;
    headers[<span class="hljs-string">'Content-Encoding'</span>] = <span class="hljs-string">'gzip'</span>;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// å…¼å®¹æ—§æ•°æ®</span>
    body = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(report);
  }

  <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/log'</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
    <span class="hljs-attr">headers</span>: headers,
    <span class="hljs-attr">body</span>: body,
    <span class="hljs-attr">keepalive</span>: <span class="hljs-literal">true</span>
  });
}
</code></pre>
<p><strong>æ€»ç»“ï¼šæ•°æ®æµè½¬å…¨æ™¯</strong></p>
<ul>
<li><strong>å­˜ï¼ˆStorageï¼‰</strong>ï¼š<code>JSON</code> -&gt; <code>Gzip</code> -&gt; <code>Base64</code> (ä¸ºäº†å­˜ Storage)</li>
<li><strong>å‘ï¼ˆNetworkï¼‰</strong>ï¼š<code>Base64</code> -&gt; <code>Binary</code> -&gt; <code>Network</code> (åˆ©ç”¨ Content-Encoding: gzip)</li>
</ul>
<h2 data-id="heading-8">å®Œæ•´æµç¨‹å›¾</h2>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2355933dfbc94628b9ef386f4dbaa983~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771207803&amp;x-signature=J6Dxh5sD08Ftko50OGB8ButeH5U%3D" alt="image.png" width="70%" loading="lazy"/>
<h2 data-id="heading-9">æ€»ç»“</h2>
<p>åœ¨å‰ç«¯ï¼ˆå°¤å…¶æ˜¯ç¦»çº¿ä¼˜å…ˆæˆ–æ’ä»¶ç¯å¢ƒï¼‰åšæ•°æ®ä¸ŠæŠ¥ï¼Œ<strong>â€œå³æ—¶å‘é€â€æ˜¯ä¸å¯é çš„</strong>ã€‚é€šè¿‡å¼•å…¥æœ¬åœ°å­˜å‚¨ä½œä¸ºç¼“å†²åŒºï¼Œé…åˆ<strong>ä¸²è¡Œé”</strong>ã€<strong>å®šæ—¶é‡è¯•</strong>å’Œ<strong>å®¹é‡æ§åˆ¶</strong>ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªå¥å£®çš„æ—¥å¿—ä¸ŠæŠ¥ç³»ç»Ÿã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆæˆ‘ä¸åœ¨ Android ViewModel ä¸­ç›´æ¥å¤„ç†å¼‚å¸¸ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7603994823326547978</link>    <guid>https://juejin.cn/post/7603994823326547978</guid>    <pubDate>2026-02-09T00:05:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603994823326547978" data-draft-id="7600706866785386539" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆæˆ‘ä¸åœ¨ Android ViewModel ä¸­ç›´æ¥å¤„ç†å¼‚å¸¸ï¼Ÿ"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-02-09T00:05:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ½œé¾™å‹¿ç”¨ä¹‹åŒ–éª¨é¾™"/> <meta itemprop="url" content="https://juejin.cn/user/2313028195058471"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆæˆ‘ä¸åœ¨ Android ViewModel ä¸­ç›´æ¥å¤„ç†å¼‚å¸¸ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2313028195058471/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ½œé¾™å‹¿ç”¨ä¹‹åŒ–éª¨é¾™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T00:05:08.000Z" title="Mon Feb 09 2026 00:05:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ViewModel åº”è¯¥ä¸è¦å¤„ç†å¼‚å¸¸ï¼Ÿ
æ›´å‡†ç¡®åœ°è¯´ï¼š<strong>ViewModel ä¸åº”è¯¥å¤„ç†å¼‚å¸¸ï¼Œå®ƒåªéœ€è¦â€œæ¶ˆè´¹ç»“æœâ€ã€‚</strong></p>
<p>æœ¬æ–‡ç»“åˆå®é™…é¡¹ç›®ä¸­çš„å¸¸è§åšæ³•ï¼Œè¯´æ˜ä¸€ç§æ›´æ¸…æ™°çš„èŒè´£åˆ’åˆ†ï¼š
<strong>UseCase / Repository è´Ÿè´£å¤„ç†å¼‚å¸¸ï¼ŒViewModel åªå…³æ³¨æ•°æ®ä¸ UI çŠ¶æ€ã€‚</strong></p>
<blockquote>
<p>âš ï¸ è¯´æ˜ï¼šæœ¬æ–‡ä¸­çš„å¼‚å¸¸æ¨¡å‹æ˜¯<strong>åˆ»æ„ç®€åŒ–çš„</strong>ã€‚
é‡ç‚¹ä¸åœ¨â€œå¼‚å¸¸å¦‚ä½•åˆ†ç±»â€ï¼Œè€Œåœ¨äºï¼š
<strong>åªè¦å¼‚å¸¸å·²ç»åœ¨ä¸‹å±‚è¢«å¤„ç†å¹¶è½¬æ¢æˆç»“æœï¼ŒViewModel å°±ä¸åº”è¯¥å†å…³å¿ƒå¼‚å¸¸æœ¬èº«ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-0">1. èƒŒæ™¯ï¼šå¼‚å¸¸åˆ°åº•è¯¥è°æ¥å¤„ç†ï¼Ÿ</h2>
<p>ä¸€ä¸ªå…¸å‹çš„ clean åˆ†å±‚å¤§è‡´å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>UI å±‚ï¼ˆActivity / Fragment / Composeï¼‰</strong></li>
<li><strong>ViewModel</strong></li>
<li><strong>Domain å±‚ï¼ˆUseCaseï¼‰</strong></li>
<li><strong>Data å±‚ï¼ˆRepository / DataSource / ç½‘ç»œã€æ•°æ®åº“ç­‰ï¼‰</strong></li>
</ul>
<p>å¸¸è§çš„ç–‘é—®æ˜¯ï¼š</p>
<blockquote>
<p>ViewModel æ‹¿åˆ° UseCase æˆ– Repository çš„æ•°æ®ï¼Œè¿™äº›åº•å±‚å·²ç»åšäº†å¼‚å¸¸å¤„ç†ï¼Œé‚£ ViewModel è¿˜è¦å† try/catch å—ï¼Ÿ</p>
</blockquote>
<p>æˆ‘çš„ç»“è®ºæ˜¯ï¼š</p>
<blockquote>
<p><strong>å¦‚æœ UseCase / Repository å·²ç»æŠŠå¼‚å¸¸è½¬æ¢æˆç¨³å®šçš„æ•°æ®ç»“æœï¼ŒViewModel å®Œå…¨å¯ä»¥åªå…³å¿ƒâ€œç»“æœâ€ï¼Œè€Œä¸ç›´æ¥å¤„ç†å¼‚å¸¸å¯¹è±¡ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-1">2. åˆ†å±‚èŒè´£ï¼šè°åº”è¯¥å¹²ä»€ä¹ˆï¼Ÿ</h2>
<h3 data-id="heading-2">2.1 Data / Domain å±‚ï¼ˆUseCase / Repositoryï¼‰</h3>
<p><strong>æ ¸å¿ƒèŒè´£ï¼š</strong></p>
<ul>
<li>æ•è·æ‰€æœ‰åº•å±‚å¼‚å¸¸ï¼ˆç½‘ç»œã€IOã€æ•°æ®åº“ã€ç¬¬ä¸‰æ–¹ SDK ç­‰ï¼‰</li>
<li>åœ¨å†…éƒ¨è®°å½•æ—¥å¿—ã€ä¸ŠæŠ¥ç›‘æ§ã€å†³å®šæ˜¯å¦é‡è¯•</li>
<li>å°†å¼‚å¸¸ç»Ÿä¸€è½¬æ¢ä¸ºä¸€ä¸ª<strong>ç¨³å®šã€ç®€å•ã€å¯è¢«ä¸Šå±‚æ¶ˆè´¹çš„ç»“æœ</strong></li>
</ul>
<p>ä¸ºäº†çªå‡º ViewModel çš„èŒè´£è¾¹ç•Œï¼Œè¿™é‡Œä½¿ç”¨ä¸€ä¸ª<strong>æç®€çš„ç»“æœæ¨¡å‹</strong>ï¼š</p>
<p>ä¸€ä¸ªç®€å•çš„ Repository å®ç°ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac46a7b59a394f4a874b620852f6553e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r2c6b6Z5Yu_55So5LmL5YyW6aqo6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771200308&amp;x-signature=BBe2hHs%2Fh%2BsklTR5W3XaFVAk7po%3D" alt="image.png" loading="lazy"/>
è¿™é‡Œå·²ç»å®Œæˆäº†æ‰€æœ‰å¼‚å¸¸ç›¸å…³çš„å·¥ä½œï¼š</p>
<ul>
<li>æ•è·å¼‚å¸¸</li>
<li>å±è”½åº•å±‚å®ç°ç»†èŠ‚ï¼ˆç½‘ç»œåº“ã€å¼‚å¸¸ç±»å‹ï¼‰</li>
<li>å‘ä¸Šå±‚åªæš´éœ²ä¸€ä¸ªâ€œæˆåŠŸ / å¤±è´¥â€çš„ç»“æœ</li>
</ul>
<hr/>
<h3 data-id="heading-3">2.2 ViewModel å±‚</h3>
<p><strong>æ ¸å¿ƒèŒè´£ï¼š</strong></p>
<ul>
<li>è°ƒç”¨ UseCase / Repository</li>
<li>æ ¹æ®è¿”å›çš„ç»“æœæ›´æ–° UI çŠ¶æ€ï¼ˆloading / content / errorï¼‰</li>
<li><strong>åªå¤„ç†ç»“æœåˆ†æ”¯ï¼Œè€Œä¸æ˜¯å¼‚å¸¸æœ¬èº«</strong></li>
</ul>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1afa9a08dd804cd5b012675fafe7c343~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r2c6b6Z5Yu_55So5LmL5YyW6aqo6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771200308&amp;x-signature=AU90wzpFYoNL4ePoXBnodcm9%2FAY%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3d90db48573449da53e44a7c19ef3b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r2c6b6Z5Yu_55So5LmL5YyW6aqo6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771200308&amp;x-signature=cGO8CZXhVXirD%2B48%2BpZ9e6FI0VM%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼š</p>
<ul>
<li>ViewModel <strong>å®Œå…¨æ²¡æœ‰ <code>try/catch</code></strong></li>
<li>ä¸çŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆå¼‚å¸¸</li>
<li>åªçŸ¥é“â€œæˆåŠŸâ€æˆ–â€œå¤±è´¥â€</li>
<li>åªå…³å¿ƒå½“å‰åº”è¯¥å‘ˆç°æ€æ ·çš„ UI çŠ¶æ€</li>
</ul>
<hr/>
<h2 data-id="heading-4">3. ä¸ºä»€ä¹ˆä¸å»ºè®®åœ¨ ViewModel å¤„ç†å¼‚å¸¸ï¼Ÿ</h2>
<h3 data-id="heading-5">3.1 ç ´ååˆ†å±‚ï¼Œå¢åŠ è€¦åˆ</h3>
<p>å¦‚æœåœ¨ ViewModel ä¸­å†™è¿™ç§ä»£ç ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4b2ee154c66492792019efd69440727~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r2c6b6Z5Yu_55So5LmL5YyW6aqo6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771200308&amp;x-signature=AMH5DfqBjxamwL51X3SjWWQ8v2o%3D" alt="image.png" loading="lazy"/></p>
<p>é‚£ä¹ˆï¼š</p>
<ul>
<li>ViewModel å°†ç›´æ¥ä¾èµ–åº•å±‚å®ç°</li>
<li>ç½‘ç»œåº“ã€æ•°æ®æºä¸€æ—¦æ›´æ¢ï¼ŒViewModel å°±éœ€è¦ä¿®æ”¹</li>
<li>å¼‚å¸¸å¤„ç†é€»è¾‘åˆ†æ•£åœ¨å¤šä¸ª ViewModel ä¸­ï¼Œéš¾ä»¥å¤ç”¨</li>
</ul>
<p>è€Œè¿™äº›æœ¬åº”æ˜¯ Repository / UseCase çš„èŒè´£ã€‚</p>
<h3 data-id="heading-6">3.2 é”™è¯¯å¤„ç†éš¾ä»¥ç»Ÿä¸€</h3>
<p>å½“å¤šä¸ª ViewModel å„è‡ªå¤„ç†å¼‚å¸¸æ—¶ï¼Œå¾€å¾€ä¼šå‡ºç°ï¼š</p>
<ul>
<li>ç›¸åŒé”™è¯¯åœ¨ä¸åŒé¡µé¢å±•ç¤ºæ–¹å¼ä¸ä¸€è‡´</li>
<li>é‡å¤çš„å¼‚å¸¸å¤„ç†é€»è¾‘åˆ°å¤„å¤åˆ¶</li>
<li>æƒ³ç»Ÿä¸€ç­–ç•¥ï¼ˆä¾‹å¦‚ï¼šå¤±è´¥ç»Ÿä¸€æç¤ºï¼‰æˆæœ¬æé«˜</li>
</ul>
<p>å°†å¼‚å¸¸å¤„ç†é›†ä¸­åœ¨ UseCase / Repositoryï¼Œå¯ä»¥ä¿è¯ï¼š</p>
<ul>
<li>ç­–ç•¥ç»Ÿä¸€</li>
<li>è¡Œä¸ºå¯æ§</li>
<li>ä¸Šå±‚é€»è¾‘æåº¦ç®€å•</li>
</ul>
<hr/>
<h2 data-id="heading-7">4. å»ºè®®çš„æ•´ä½“æ¨¡å¼ï¼ˆæ€»ç»“ï¼‰</h2>
<p>å¯ä»¥ç”¨ä¸€å¥è¯æ¦‚æ‹¬ï¼š</p>
<blockquote>
<p><strong>UseCase / Repository è´Ÿè´£â€œæŠŠå¼‚å¸¸å˜æˆç»“æœâ€ï¼›
ViewModel è´Ÿè´£â€œæŠŠç»“æœå˜æˆ UI çŠ¶æ€â€ã€‚</strong></p>
</blockquote>
<h3 data-id="heading-8">UseCase / Repositoryï¼š</h3>
<ul>
<li>
<p>æ•è·æ‰€æœ‰å¤–éƒ¨ç³»ç»Ÿå¼‚å¸¸</p>
</li>
<li>
<p>å¤„ç†æ—¥å¿—ã€ç›‘æ§ã€é‡è¯•ç­‰æŠ€æœ¯ç»†èŠ‚</p>
</li>
<li>
<p>å°†ç»“æœç»Ÿä¸€è½¬æ¢ä¸ºï¼š</p>
<ul>
<li><code>Success(data)</code></li>
<li><code>Error</code></li>
</ul>
</li>
</ul>
<h3 data-id="heading-9">ViewModelï¼š</h3>
<ul>
<li>ä¸æ¥è§¦ä»»ä½•å¼‚å¸¸å¯¹è±¡</li>
<li>ä¸åšå¼‚å¸¸åˆ†ç±»</li>
<li>åªæ ¹æ®ç»“æœæ›´æ–° UI</li>
</ul>
<hr/>
<h2 data-id="heading-10">5. ç»“è¯­</h2>
<p>åªè¦å¼‚å¸¸å·²ç»åœ¨ UseCase / Repository å±‚è¢«å¤„ç†å¹¶è½¬æ¢æˆç»“æœï¼š</p>
<ul>
<li><strong>ViewModel å°±ä¸åº”è¯¥å†å…³å¿ƒå¼‚å¸¸æœ¬èº«</strong></li>
<li>å®ƒçš„ä¸–ç•Œé‡Œåªå‰©ä¸‹ï¼šæˆåŠŸæˆ–å¤±è´¥</li>
</ul>
<p>è¿™æ ·çš„è®¾è®¡å¸¦æ¥çš„å¥½å¤„æ˜¯ï¼š</p>
<ul>
<li>åˆ†å±‚æ¸…æ™°ï¼ŒèŒè´£å•ä¸€</li>
<li>ViewModel æ›´å®¹æ˜“æµ‹è¯•</li>
<li>ä»£ç æ›´ç¨³å®šã€æ›´å®¹æ˜“ç»´æŠ¤</li>
</ul>
<p>å¦‚æœä½ ç°åœ¨çš„é¡¹ç›®ä¸­ï¼ŒViewModel é‡Œè¿˜æœ‰å¤§é‡ <code>try/catch</code>ï¼Œå¯ä»¥ä»ä¸€ä¸¤ä¸ªæ¥å£å¼€å§‹ï¼Œå…ˆæŠŠå¼‚å¸¸ä¸‹ç§»åˆ° UseCase / Repositoryï¼Œé€æ­¥è¿‡æ¸¡åˆ°<strong>ViewModel åªæ¶ˆè´¹ç»“æœ</strong>çš„æ¨¡å¼ã€‚</p>
<p>ç¤ºä¾‹:ğŸ”— <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FThirdPrince%2FCleanArc" target="_blank" title="https://github.com/ThirdPrince/CleanArc" ref="nofollow noopener noreferrer">github.com/yourname/Clâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆåˆ é™¤ node_modules è¿™ä¹ˆæ…¢ï¼ŸåŸå› å’Œè§£å†³æ–¹æ¡ˆä¸€æ¬¡è®²æ¸…]]></title>    <link>https://juejin.cn/post/7604881286036979764</link>    <guid>https://juejin.cn/post/7604881286036979764</guid>    <pubDate>2026-02-10T07:53:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604881286036979764" data-draft-id="7603588665568641064" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆåˆ é™¤ node_modules è¿™ä¹ˆæ…¢ï¼ŸåŸå› å’Œè§£å†³æ–¹æ¡ˆä¸€æ¬¡è®²æ¸…"/> <meta itemprop="keywords" content="å‰ç«¯,Node.js"/> <meta itemprop="datePublished" content="2026-02-10T07:53:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å¤§å"/> <meta itemprop="url" content="https://juejin.cn/user/3507878440995946"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆåˆ é™¤ node_modules è¿™ä¹ˆæ…¢ï¼ŸåŸå› å’Œè§£å†³æ–¹æ¡ˆä¸€æ¬¡è®²æ¸…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3507878440995946/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å¤§å
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T07:53:37.000Z" title="Tue Feb 10 2026 07:53:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å¤§åï¼</p>
<p>ç»å¸¸å†™å‰ç«¯çš„æœ‹å‹ä¸€å®šå¾ˆç†Ÿæ‚‰ï¼Œæ¯æ¬¡åˆ é™¤ <code>node_modules</code> æ–‡ä»¶å¤¹çš„æ—¶å€™éƒ½ç‰¹åˆ«æ…¢ï¼Œç”šè‡³æœ‰æ—¶å€™è¿˜ä¼šæç¤ºæƒé™ä¸è¶³ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/340b585c2b65484398a1671b532fbff6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5aSn5Y2O:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771314817&amp;x-signature=3O5DvYurzoyO28Zm9HbY3dMBtTk%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-0">node_modules æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>ç®€å•æ¥è¯´ï¼Œ<code>node_modules</code> å°±æ˜¯é¡¹ç›®é‡Œå­˜æ”¾æ‰€æœ‰ä¾èµ–åŒ…çš„åœ°æ–¹ã€‚æ¯å½“ä½ ç”¨ <code>npm install</code> æˆ– <code>yarn</code> å®‰è£…ä¾èµ–æ—¶ï¼Œæ‰€æœ‰ä¾èµ–å’Œå®ƒä»¬çš„ä¾èµ–ï¼Œéƒ½ä¼šè¢«ä¸‹è½½åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œã€‚</p>
<p>å®ƒæ˜¯ Node.js é¡¹ç›®ä¸­éå¸¸æ ¸å¿ƒçš„ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ²¡æœ‰å®ƒï¼Œé¡¹ç›®æ— æ³•è¿è¡Œã€‚</p>
<hr/>
<h2 data-id="heading-1">node_modules çš„ä½œç”¨</h2>
<p><code>node_modules</code> çš„ä½œç”¨å°±æ˜¯å­˜æ”¾é¡¹ç›®ä¾èµ–ã€‚
ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘çš„é¡¹ç›®ç”¨åˆ°äº† <code>lodash</code>ã€<code>axios</code>ã€<code>vue</code>ï¼Œå¯¹åº”çš„ä¾èµ–å®‰è£…åï¼Œè¿™äº›åŒ…éƒ½ä¼šæ”¾åˆ° <code>node_modules</code> æ–‡ä»¶å¤¹é‡Œï¼Œåœ¨ä»£ç é‡Œæœ‰ç”¨ <code>import</code> æˆ– <code>require</code> å¼•å…¥çš„æ—¶å€™ï¼ŒNode éƒ½ä¼šå» <code>node_modules</code> é‡Œå¯»æ‰¾å¯¹åº”çš„æ¨¡å—ã€‚</p>
<p>å¯ä»¥ç†è§£ä¸ºï¼Œå®ƒæ˜¯é¡¹ç›®çš„ä¸€ä¸ªä¾èµ–ä»“åº“ï¼Œæ‰€æœ‰åŠŸèƒ½æ¨¡å—éƒ½é å®ƒæ”¯æ’‘ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸ºä»€ä¹ˆ node_modules ä¼šè¿™ä¹ˆå¤§ï¼Ÿ</h2>
<p>å¦‚æœä½ æ‰“å¼€ä¸€ä¸ªå‰ç«¯é¡¹ç›®ï¼Œä¾èµ–å®‰è£…åï¼Œä½ å‘ç° <code>node_modules</code> å¯èƒ½ä¼šæœ‰å‡ ç™¾ MB æˆ–è€…å‡  GB çš„å¤§å°ï¼Œè¿™æœ‰å‡ ä¸ªåŸå› ï¼š</p>
<h3 data-id="heading-3">1. ä¾èµ–åµŒå¥—</h3>
<p>æ¯ä¸ªåŒ…éƒ½æœ‰è‡ªå·±çš„ä¾èµ–ï¼Œnpm æˆ– yarn ä¼šæŠŠå®ƒä»¬éƒ½ä¸‹è½½ä¸‹æ¥ã€‚ä¾‹å¦‚ <code>vue-router</code> ä¾èµ– <code>vue</code>ï¼Œ<code>axios</code> ä¾èµ– <code>follow-redirects</code>ï¼Œå®ƒä»¬åˆæœ‰è‡ªå·±çš„ä¾èµ–ï¼Œä¸€å±‚å±‚å åŠ ï¼Œå¯¼è‡´æ–‡ä»¶æ•°é‡å’Œä½“ç§¯å‰§å¢ã€‚</p>
<h3 data-id="heading-4">2. å¤§é‡å°æ–‡ä»¶</h3>
<p>Node åŒ…é‡Œé€šå¸¸ä¼šåŒ…å«æºç ã€æ–‡æ¡£ã€æµ‹è¯•æ–‡ä»¶ç­‰å¤§é‡å°æ–‡ä»¶ã€‚è™½ç„¶æ¯ä¸ªæ–‡ä»¶ä¸å¤§ï¼Œä½†æ•°é‡éå¸¸å¤šï¼Œæ–‡ä»¶æ€»æ•°åŠ¨ä¸åŠ¨å°±å‡ åä¸‡ï¼Œæ“ä½œç³»ç»Ÿå¤„ç†è¿™ä¹ˆå¤šå°æ–‡ä»¶éå¸¸è€—æ—¶ã€‚</p>
<h3 data-id="heading-5">3. ç‰ˆæœ¬å…¼å®¹é—®é¢˜</h3>
<p>æœ‰æ—¶å€™åŒä¸€ä¸ªä¾èµ–ä¼šå‡ºç°å¤šä¸ªç‰ˆæœ¬å…±å­˜ï¼Œæ¯ä¸ªç‰ˆæœ¬éƒ½ä¼šå ç”¨é¢å¤–ç©ºé—´ï¼Œè¿›ä¸€æ­¥è†¨èƒ€ <code>node_modules</code>ã€‚</p>
<h3 data-id="heading-6">ç¤ºä¾‹ï¼šä¸€ä¸ªVueé¡¹ç›®çš„ä¾èµ–è§„æ¨¡</h3>
<pre><code class="hljs language-scss" lang="scss">â”œâ”€â”€ vue
â”œâ”€â”€ vue-router
â”œâ”€â”€ vuex
â”œâ”€â”€ axios
â”œâ”€â”€ webpack (åŠå…¶<span class="hljs-number">15</span>+ä¸ªç›´æ¥ä¾èµ–)
â”œâ”€â”€ babel (åŠå…¶<span class="hljs-number">20</span>+ä¸ªæ’ä»¶)
â””â”€â”€ å…¶ä»–å·¥å…·é“¾...
</code></pre>
<p>å®é™…å®‰è£…åå¯èƒ½åŒ…å«300-1000+ä¸ªç›®å½•ï¼Œå ç”¨æ•°ç™¾MBç”šè‡³GBçº§ç©ºé—´ã€‚</p>
<hr/>
<h2 data-id="heading-7">ä¸ºä»€ä¹ˆåˆ é™¤ node_modules æ–‡ä»¶å¤¹è¿™ä¹ˆè€—æ—¶ï¼Ÿ</h2>
<p>æˆ‘è‡ªå·±åœ¨ Windows æˆ– macOS ä¸Šéƒ½æœ‰è¿‡è¿™æ ·çš„ä½“éªŒï¼šå³é”®åˆ é™¤æˆ–è€…ç”¨å‘½ä»¤ <code>rm -rf node_modules</code>ï¼Œéƒ½å¯èƒ½å¡ä¸Šå‡ åˆ†é’Ÿç”šè‡³åå‡ åˆ†é’Ÿã€‚</p>
<p>åŸå› ä¸»è¦æœ‰ï¼š</p>
<h3 data-id="heading-8">1. æ–‡ä»¶æ•°é‡å·¨å¤§</h3>
<p>node_modulesé€šå¸¸åŒ…å«æˆåƒä¸Šä¸‡ä¸ªå°æ–‡ä»¶ï¼Œæ“ä½œç³»ç»Ÿåˆ é™¤å¤§é‡å°æ–‡ä»¶æ¯”åˆ é™¤å•ä¸ªå¤§æ–‡ä»¶æ…¢å¾—å¤š</p>
<h3 data-id="heading-9">2. ç›®å½•ç»“æ„æ·±</h3>
<p>æ·±å±‚åµŒå¥—çš„ç›®å½•ç»“æ„éœ€è¦é€’å½’éå†ï¼Œå¢åŠ I/Oæ“ä½œ</p>
<h3 data-id="heading-10">3. Windowsçš„ç‰¹æ®Šæ€§</h3>
<p>NTFSæ–‡ä»¶ç³»ç»Ÿå¤„ç†å¤§é‡å°æ–‡ä»¶æ•ˆç‡è¾ƒä½ï¼Œé˜²ç—…æ¯’è½¯ä»¶å®æ—¶æ‰«ææ¯ä¸ªåˆ é™¤æ“ä½œï¼Œè·¯å¾„é•¿åº¦é™åˆ¶ï¼ˆ260å­—ç¬¦ï¼‰å¯¼è‡´é¢å¤–å¤„ç†</p>
<h3 data-id="heading-11">4. ç£ç›˜I/Oç“¶é¢ˆ</h3>
<p>æœºæ¢°ç¡¬ç›˜ï¼ˆHDDï¼‰åœ¨éšæœºè¯»å†™å°æ–‡ä»¶æ—¶æ€§èƒ½è¾ƒå·®ï¼ŒSSDç¨å¥½ä½†ä»å—é™åˆ¶</p>
<h2 data-id="heading-12">åˆ é™¤node_modulesæ–‡ä»¶å¤¹çš„å‡ ç§æ–¹æ¡ˆ</h2>
<h3 data-id="heading-13">æ–¹æ¡ˆ1ï¼šåŸç”Ÿå‘½ä»¤è¡Œåˆ é™¤ï¼ˆè·¨å¹³å°ï¼‰</h3>
<p><strong>Windows (PowerShell):</strong></p>
<pre><code class="hljs language-powershell" lang="powershell"># æ–¹æ³•1ï¼šä½¿ç”¨Remove-Item
Remove-Item -Path .\node_modules -Recurse -Force

# æ–¹æ³•2ï¼šä½¿ç”¨rdå‘½ä»¤ï¼ˆæ›´å¿«ï¼‰
rd /s /q node_modules
</code></pre>
<p>ä¹Ÿå¯ä»¥å†™ä¸ªè„šæœ¬ï¼Œåˆ›å»ºä¸€ä¸ª<code>clean.bat</code>æ–‡ä»¶</p>
<pre><code class="hljs language-bash" lang="bash">@<span class="hljs-built_in">echo</span> off
<span class="hljs-built_in">echo</span> å¼€å§‹æ¸…ç†node_modulesï¼Œå¯ä»¥å»æ‘¸é±¼äº†...
rd /s /q node_modules
<span class="hljs-built_in">echo</span> æ¸…ç†å®Œæˆï¼å¯ä»¥ç»§ç»­å¹²æ´»äº†
pause
</code></pre>
<p>ç„¶ååŒå‡»è¿è¡Œå°±å¯ä»¥ã€‚</p>
<p><strong>macOS/Linux:</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨rmå‘½ä»¤</span>
<span class="hljs-built_in">rm</span> -rf node_modules
</code></pre>
<h3 data-id="heading-14">æ–¹æ¡ˆ2ï¼šä½¿ç”¨ä¸“ç”¨åˆ é™¤å·¥å…·</h3>
<p><strong>rimrafï¼ˆNode.jså·¥å…·ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…¨å±€å®‰è£…</span>
npm install -g rimraf

<span class="hljs-comment"># åœ¨é¡¹ç›®ç›®å½•ä½¿ç”¨</span>
rimraf node_modules

<span class="hljs-comment"># æˆ–ä½¿ç”¨npxï¼ˆæ— éœ€å®‰è£…ï¼‰</span>
npx rimraf node_modules
</code></pre>
<p><strong>å¿«é€Ÿåˆ é™¤è„šæœ¬ï¼ˆWindowsæ‰¹å¤„ç†ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-batch" lang="batch">@echo off
echo æ­£åœ¨åˆ é™¤node_modules...
rmdir /s /q node_modules
echo åˆ é™¤å®Œæˆï¼
pause
</code></pre>
<h3 data-id="heading-15">æ–¹æ¡ˆ3ï¼šä½¿ç”¨åŒ…ç®¡ç†å™¨çš„æ¸…ç†åŠŸèƒ½</h3>
<p><strong>ä½¿ç”¨npmï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># npm v6.5+ æ–°å¢çš„æ¸…ç†å‘½ä»¤</span>
npm clean-install

<span class="hljs-comment"># æˆ–å…ˆåˆ é™¤å†å®‰è£…</span>
npm ci
</code></pre>
<p><strong>ä½¿ç”¨yarnï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># yarnçš„è‡ªåŠ¨æ¸…ç†</span>
yarn clean

<span class="hljs-comment"># ä½¿ç”¨Plug'n'Playæ¨¡å¼ï¼ˆé¿å…node_modulesï¼‰</span>
yarn --pnp
</code></pre>
<p><strong>ä½¿ç”¨pnpmï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># pnpmä½¿ç”¨ç¡¬é“¾æ¥ï¼Œåˆ é™¤æ›´å¿«</span>
pnpm store prune  <span class="hljs-comment"># æ¸…ç†å­˜å‚¨</span>
pnpm install
</code></pre>
<h3 data-id="heading-16">æ–¹æ¡ˆ4ï¼šæ“ä½œç³»ç»Ÿçº§ä¼˜åŒ–</h3>
<p><strong>Windowsä¼˜åŒ–ï¼š</strong></p>
<ol>
<li>ä¸´æ—¶ç¦ç”¨é˜²ç—…æ¯’è½¯ä»¶</li>
<li>ä½¿ç”¨ç®¡ç†å‘˜æƒé™è¿è¡Œå‘½ä»¤è¡Œ</li>
<li>ä½¿ç”¨å¿«é€Ÿåˆ é™¤å·¥å…·ï¼ˆå¦‚FastDeleteï¼‰</li>
</ol>
<p><strong>macOS/Linuxä¼˜åŒ–ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨rsyncæŠ€å·§ï¼ˆæœ‰æ—¶æ›´å¿«ï¼‰</span>
rsync -a --delete empty_dir/ node_modules/
</code></pre>
<h3 data-id="heading-17">æ–¹æ¡ˆ5ï¼šé¿å…é¢‘ç¹åˆ é™¤</h3>
<ol>
<li><strong>ä½¿ç”¨Dockerå®¹å™¨</strong>ï¼šåœ¨å®¹å™¨å†…å¼€å‘ï¼Œåˆ é™¤å®¹å™¨å³å¯</li>
<li><strong>ä½¿ç”¨è™šæ‹Ÿæœºæˆ–WSL2</strong>ï¼šéš”ç¦»ç¯å¢ƒ</li>
<li><strong>ä¾èµ–ç¼“å­˜ç­–ç•¥</strong>ï¼šåˆç†é…ç½®npm/yarnç¼“å­˜</li>
</ol>
<h3 data-id="heading-18">æ–¹æ¡ˆ6ï¼šç°ä»£åŒ…ç®¡ç†å™¨çš„ä¼˜åŠ¿</h3>
<p><strong>pnpmè§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># pnpmä½¿ç”¨ç¬¦å·é“¾æ¥å’Œå†…å®¹å¯»å€å­˜å‚¨</span>
<span class="hljs-comment"># node_moduleså¾ˆå°ï¼Œä¸»è¦æ–‡ä»¶åœ¨å…¨å±€å­˜å‚¨</span>
pnpm install  <span class="hljs-comment"># å®‰è£…å¿«ï¼Œåˆ é™¤ä¹Ÿå¿«</span>
</code></pre>
<p><strong>Yarn Plug'n'Playï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// package.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"installConfig"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"pnp"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
<span class="hljs-comment">// æ— éœ€node_modulesç›®å½•</span>
</code></pre>
<hr/>
<h2 data-id="heading-19">å†™åœ¨æœ€å</h2>
<p><code>node_modules</code> åˆ é™¤æ…¢ï¼Œå¹¶ä¸æ˜¯ä½ ç”µè„‘çš„é—®é¢˜ï¼Œä¹Ÿä¸æ˜¯ä½ æ“ä½œä¸å¯¹ï¼Œè€Œæ˜¯ Node ç”Ÿæ€æœ¬èº«çš„å†å²åŒ…è¢±ã€‚</p>
<p>å¦‚æœä½ åªæ˜¯å¶å°”åˆ ä¸€æ¬¡ï¼Œç”¨å‘½ä»¤è¡Œæˆ–è€… rimraf å°±å¤Ÿäº†ï¼›
å¦‚æœä½ ç»å¸¸é‡è£…ä¾èµ–ã€åˆ‡åˆ†æ”¯ã€æ‹‰é¡¹ç›®ï¼Œé‚£æˆ‘ä¼šå¼ºçƒˆå»ºè®®ä½ è¯•è¯• pnpm æˆ– Yarn PnPï¼ŒçœŸçš„èƒ½æ˜æ˜¾æ”¹å–„ä½“éªŒã€‚</p>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼šç¨‹åºå‘˜å¤§åï¼Œä¸“æ³¨å‰ç«¯ã€Javaå¼€å‘ï¼ŒAIåº”ç”¨å’Œå·¥å…·çš„åˆ†äº«ã€‚å…³æ³¨æˆ‘ï¼Œå°‘èµ°å¼¯è·¯ï¼Œä¸€èµ·è¿›æ­¥ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OpenClaw 2.6 è°ƒæ•™å®å½•ï¼šä»å´©æºƒ 4671 æ¬¡åˆ°çœ 50% token]]></title>    <link>https://juejin.cn/post/7604142616474320902</link>    <guid>https://juejin.cn/post/7604142616474320902</guid>    <pubDate>2026-02-09T06:55:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604142616474320902" data-draft-id="7604084016511057961" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OpenClaw 2.6 è°ƒæ•™å®å½•ï¼šä»å´©æºƒ 4671 æ¬¡åˆ°çœ 50% token"/> <meta itemprop="keywords" content="OpenAI,AIç¼–ç¨‹,AIGC"/> <meta itemprop="datePublished" content="2026-02-09T06:55:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­Ÿå¥AIç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/4212984287073895"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OpenClaw 2.6 è°ƒæ•™å®å½•ï¼šä»å´©æºƒ 4671 æ¬¡åˆ°çœ 50% token
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984287073895/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­Ÿå¥AIç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T06:55:29.000Z" title="Mon Feb 09 2026 06:55:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å­Ÿå¥ã€‚</p>
<p>æˆ‘çš„AIåŠ©æ‰‹å·å·å´©äº†4671æ¬¡ï¼Œæˆ‘ä¸€ç‚¹æ²¡å¯Ÿè§‰ã€‚</p>
<p>ç›´åˆ°æœ‰ä¸€å¤©ï¼Œæˆ‘å‘ç°å®šæ—¶ä»»åŠ¡è¿ç»­3å¤©æ²¡è·‘â€”â€”æ¯å¤©æ—©ä¸Šçš„é€‰é¢˜æ¨é€ã€æ™šä¸Šçš„Xè¿è¥å€™é€‰ã€è®¤è¯ç›‘æ§â€¦â€¦å…¨éƒ¨é™æ‚„æ‚„æ¶ˆå¤±äº†ã€‚æˆ‘ä»¥ä¸ºæ˜¯bugï¼Œé¡ºæ‰‹ä¸€æŸ¥ï¼ŒæŒ–å‡ºäº†ä¸€ä¸ªè®©æˆ‘åèƒŒå‘å‡‰çš„å‘ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« è®°å½•æˆ‘æ€ä¹ˆæ’æŸ¥è¿™ä¸ªäº‹æ•…ï¼Œä»¥åŠè¶æœºæŠŠ OpenClaw 2.6 åšäº†ä¸€æ¬¡å…¨é¢ä½“æ£€â€”â€”<strong>æœ€ç»ˆ token è´¹ç”¨é™äº† 30-50%ï¼Œè®°å¿†ä¸å†ä¸¢å¤±</strong>ã€‚</p>
<p>æ‰€æœ‰é…ç½®éƒ½å¯ä»¥ç›´æ¥æŠ„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef5f9d89b98d401aa1d699c6dd605fef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771224928&amp;x-signature=QrRoKQ7Gk%2BlU8jDPw4Tv%2B79PHKE%3D" alt="" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-0"><strong>01 äº‹æ•…ç°åœºï¼š4671æ¬¡æ— æ•ˆ é‡å¯</strong></h2>
<p>æˆ‘ç”¨çš„æ˜¯ OpenClaw 2.6ï¼Œä¸€ä¸ªå¯ä»¥7Ã—24å°æ—¶è¿è¡Œçš„AIåŠ©æ‰‹æ¡†æ¶ã€‚å®ƒå¸®æˆ‘ç®¡é€‰é¢˜ã€Twitterè¿è¥ã€æ—¥ç¨‹æé†’ï¼ŒåŸºæœ¬æ˜¯æˆ‘çš„"æ•°å­—å‘˜å·¥"ã€‚</p>
<p>é‚£å¤©æˆ‘è·‘äº†ä¸€å¥å‘½ä»¤çœ‹æœåŠ¡çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">journalctl --user -u openclaw-gateway --since <span class="hljs-string">"3 days ago"</span> | grep <span class="hljs-string">"start"</span> | <span class="hljs-built_in">wc</span> -l
</code></pre>
<p><strong>4671ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f832822c872f43cda0e728656bc6d388~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771224928&amp;x-signature=29wu9lRAeAx1C4j3BXef%2BBsxQZg%3D" alt="" loading="lazy"/></p>
<p>ä¸‰å¤©ï¼Œ4671æ¬¡é‡å¯ã€‚å¹³å‡æ¯5ç§’å´©ä¸€æ¬¡ï¼Œå†èµ·æ¥ï¼Œå†å´©ï¼Œæ— é™å¾ªç¯ã€‚</p>
<p>æ›´å¯æ€•çš„æ˜¯â€”â€”<strong>æˆ‘å®Œå…¨ä¸çŸ¥é“ã€‚</strong> å› ä¸ºç”¨æˆ·çº§çš„æœåŠ¡ä¸€ç›´æ­£å¸¸è·‘ç€ï¼Œè¯¥å›å¤æ¶ˆæ¯ç…§æ ·å›å¤ã€‚åªæ˜¯ cron è°ƒåº¦å™¨è¢«æä¹±äº†ï¼Œå®šæ—¶ä»»åŠ¡å…¨éƒ¨æ¼è·‘äº†3-4å¤©ã€‚</p>
<h3 data-id="heading-1"><strong>æ ¹å› ï¼šä¸¤ä¸ªåŒåæœåŠ¡æ‰“æ¶</strong></h3>
<p>æ’æŸ¥ä¸‹æ¥ï¼ŒåŸå› å‡ºå¥‡åœ°è ¢ï¼š</p>
<ul>
<li>
<p><strong>ç”¨æˆ·çº§æœåŠ¡</strong>ï¼ˆ<code>~/.config/systemd/user/openclaw-gateway.service</code>ï¼‰ï¼šæ­£å¸¸è¿è¡Œï¼Œå ç€18789ç«¯å£</p>
</li>
<li>
<p><strong>ç³»ç»Ÿçº§æœåŠ¡</strong>ï¼ˆ<code>/etc/systemd/system/openclaw-gateway.service</code>ï¼‰ï¼šæ¯5ç§’å°è¯•å¯åŠ¨ï¼Œå‘ç°ç«¯å£è¢«å ï¼Œç«‹å³é€€å‡ºï¼Œsystemd åˆæ‹‰èµ·æ¥â€¦â€¦</p>
</li>
</ul>
<p>ä¸¤ä¸ªåŒåæœåŠ¡ï¼Œä¸€ä¸ªå ç€ç«¯å£å¥½å¥½çš„ï¼Œä¸€ä¸ªç–¯ç‹‚æ’å¢™ã€‚<strong>36å°æ—¶çš„CPUç™½ç™½æµªè´¹</strong>ï¼Œcron è°ƒåº¦å™¨çš„çŠ¶æ€è¢«åå¤åˆ·ä¹±ï¼Œ<code>nextRunAtMs</code> è·³åˆ°äº†æœªæ¥æŸä¸ªä¸å­˜åœ¨çš„æ—¶é—´ã€‚</p>
<p>æ€ä¹ˆæ¥çš„ï¼Ÿå¤§æ¦‚ç‡æ˜¯æŸæ¬¡è¿è¡Œ <code>openclaw gateway install</code> æ—¶ï¼Œç³»ç»Ÿçº§å’Œç”¨æˆ·çº§å„ç”Ÿæˆäº†ä¸€ä¸ªæœåŠ¡æ–‡ä»¶ã€‚</p>
<p><strong>æ•™è®­ï¼šå‡çº§æˆ–é‡è£… OpenClaw åï¼Œè·‘ä¸€å¥ `systemctl list-units | grep openclaw` ç¡®è®¤æ²¡æœ‰é‡å¤æœåŠ¡ã€‚</strong></p>
<hr/>
<h2 data-id="heading-2"><strong>02 ä¸‰æ­¥ä¿®å¤</strong></h2>
<p>ä¿®å¤è¿‡ç¨‹åè€Œç®€å•ï¼Œ3æ¡å‘½ä»¤æå®šï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. åœæ‰å¹¶ç¦ç”¨å¤šä½™çš„ç³»ç»Ÿçº§æœåŠ¡</span>
sudo systemctl stop openclaw-gateway.service
sudo systemctl <span class="hljs-built_in">disable</span> openclaw-gateway.service

<span class="hljs-comment"># 2. åˆ é™¤ç³»ç»Ÿçº§æœåŠ¡æ–‡ä»¶ï¼ˆå»ºè®®å…ˆå¤‡ä»½ï¼‰</span>
sudo <span class="hljs-built_in">rm</span> /etc/systemd/system/openclaw-gateway.service

<span class="hljs-comment"># 3. é‡è½½ systemd</span>
sudo systemctl daemon-reload
</code></pre>
<p>ä¿ç•™ç”¨æˆ·çº§æœåŠ¡æ­£å¸¸è¿è¡Œå°±è¡Œã€‚</p>
<hr/>
<h2 data-id="heading-3"><strong>03 å…¨èº«ä½“æ£€ï¼š9é¡¹é…ç½®ä¼˜åŒ–</strong></h2>
<p>ä¿®å®Œäº‹æ•…ï¼Œæˆ‘æƒ³ï¼šéƒ½æ‹†å¼€äº†ï¼Œå¹²è„†å¯¹ç…§ OpenClaw 2.6 çš„æœ€æ–°æ–‡æ¡£åšä¸ªå…¨é¢ä½“æ£€ã€‚</p>
<p>æœ€ç»ˆè°ƒäº†9é¡¹ï¼Œæ•ˆæœæ˜¯ <strong>token è´¹ç”¨é™äº† 30-50%ï¼Œè®°å¿†ä¸å†ä¸¢å¤±ï¼Œä½“éªŒæ˜æ˜¾æå‡</strong>ã€‚</p>
<p>ä»¥ä¸‹é€æ¡è¯´ï¼Œæ¯æ¡éƒ½å¯ä»¥ç›´æ¥æŠ„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a298be7b790444cbb58e369a08e84a1a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771224928&amp;x-signature=3TIRJjLbptpjGu%2BfLpgffdmNZIc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4"><strong>â‘  contextPruningï¼šè‡ªåŠ¨è£å‰ªæ—§å†…å®¹ï¼Œçœ token</strong></h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"contextPruning"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mode"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cache-ttl"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"ttl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"5m"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>Before</strong>ï¼šæ¯æ¬¡å¯¹è¯æŠŠæ‰€æœ‰å†å² tool è¾“å‡ºéƒ½å¸¦ä¸Šï¼Œtoken è¶ŠèŠè¶Šå¤šã€‚</p>
<p><strong>After</strong>ï¼šè¶…è¿‡5åˆ†é’Ÿçš„ tool è¾“å‡ºè‡ªåŠ¨è£å‰ªï¼Œä¸Šä¸‹æ–‡ä¿æŒç²¾ç®€ã€‚</p>
<p>è¿™ä¸€é¡¹å¤§æ¦‚èƒ½çœ <strong>20-30% çš„ token</strong>ã€‚</p>
<p>æ³¨æ„ï¼šè¿™åªå½±å“å‘ç»™ LLM çš„ä¸Šä¸‹æ–‡ï¼Œä¸ä¼šåˆ é™¤ç£ç›˜ä¸Šçš„ session å†å²ï¼ˆ.jsonl æ–‡ä»¶ä¿æŒå®Œæ•´ï¼‰ã€‚</p>
<h3 data-id="heading-5"><strong>â‘¡ compaction safeguardï¼šé˜²è®°å¿†ä¸¢å¤±</strong></h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"compaction"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mode"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"safeguard"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"memoryFlush"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>OpenClaw ä¼šåœ¨å¯¹è¯å¤ªé•¿æ—¶è‡ªåŠ¨å‹ç¼©ä¸Šä¸‹æ–‡ï¼ˆcompactionï¼‰ï¼Œä½†é»˜è®¤æ¨¡å¼ä¸‹å‹ç¼©æ—¶å¯èƒ½æŠŠé‡è¦è®°å¿†æŒ¤æ‰ã€‚</p>
<p><code>safeguard</code> æ¨¡å¼ä¼šåœ¨å‹ç¼©å‰è§¦å‘ä¸€æ¬¡"è®°å¿†åˆ·ç›˜"â€”â€”æŠŠå…³é”®ä¿¡æ¯å†™åˆ° MEMORY.mdï¼Œ<strong>ç¡®ä¿ä»€ä¹ˆéƒ½ä¸ä¸¢</strong>ã€‚</p>
<p><strong>æ²¡æœ‰è®°å¿†çš„AIåŠ©æ‰‹å°±æ˜¯ä¸ªé«˜çº§å¤è¯»æœºã€‚</strong> è¿™é¡¹å¿…å¼€ã€‚</p>
<h3 data-id="heading-6"><strong>â‘¢ subagents æ¨¡å‹é™çº§ï¼šçœ60%è´¹ç”¨</strong></h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"subagents"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"minimax/MiniMax-M2.1"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"archiveAfterMinutes"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">30</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>Before</strong>ï¼šå­ä»»åŠ¡ï¼ˆcron å®šæ—¶ä»»åŠ¡ã€åå°å¤„ç†ï¼‰é»˜è®¤ç»§æ‰¿ä¸»æ¨¡å‹ Claude Opus 4.6ï¼Œè´µã€‚</p>
<p><strong>After</strong>ï¼šå­ä»»åŠ¡ç”¨ MiniMax-M2.1ï¼Œè´¹ç”¨åªæœ‰ Opus çš„ 1/3 å·¦å³ã€‚</p>
<p>å¤§éƒ¨åˆ† cron ä»»åŠ¡ä¸éœ€è¦æœ€å¼ºæ¨¡å‹â€”â€”å‘ä¸ªæ—©æŠ¥ã€è·‘ä¸ªç›‘æ§ï¼Œå¤Ÿç”¨å°±è¡Œã€‚<strong>æŠŠå¥½é’¢ç”¨åœ¨åˆ€åˆƒä¸Šã€‚</strong></p>
<p><code>archiveAfterMinutes</code> ä»60é™åˆ°30ï¼Œå­ session æ›´å¿«å›æ”¶ï¼Œå‡å°‘å†…å­˜å ç”¨ã€‚</p>
<h3 data-id="heading-7"><strong>â‘£ heartbeat é™é¢‘ + activeHours</strong></h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"heartbeat"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"intervalMinutes"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">120</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"activeHours"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"08:00-24:00"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>Before</strong>ï¼šæ¯30åˆ†é’Ÿå¿ƒè·³ä¸€æ¬¡ï¼Œ7Ã—24å°æ—¶ä¸é—´æ–­ã€‚æ¯å¤©48æ¬¡å¿ƒè·³ã€‚</p>
<p><strong>After</strong>ï¼šæ¯2å°æ—¶ä¸€æ¬¡ï¼Œåªåœ¨æ—©8ç‚¹åˆ°æ™š12ç‚¹ã€‚æ¯å¤©8æ¬¡ã€‚</p>
<p><strong>ä¸€ä¸ªäººç¡è§‰çš„æ—¶å€™ï¼Œä¸éœ€è¦æœ‰äººæ¯30åˆ†é’Ÿæˆ³ä¸€ä¸‹çœ‹ä½ é†’æ²¡é†’ã€‚</strong></p>
<h3 data-id="heading-8"><strong>â‘¤ identityï¼šè®©AIè®¤è¯†è‡ªå·±</strong></h3>
<pre><code class="hljs language-css" lang="css">"identity": {
  "agents": {
    "<span class="hljs-selector-tag">main</span>": {
      "name": <span class="hljs-string">"å°å¢¨"</span>,
      <span class="hljs-string">"emoji"</span>: <span class="hljs-string">"ğŸˆâ¬›"</span>
    }
  }
}
</code></pre>
<p>é…äº†ä¹‹åï¼ŒAI åœ¨ç¾¤èŠé‡Œèƒ½è¯†åˆ« @å°å¢¨ ï¼Œè‡ªåŠ¨ ack reaction ä¹Ÿå¸¦ä¸Šèº«ä»½æ ‡è¯†ã€‚å°äº‹ï¼Œä½†ä½“éªŒå¥½å¾ˆå¤šã€‚</p>
<h3 data-id="heading-9"><strong>â‘¥ inbound debounceï¼šè¿ç»­æ¶ˆæ¯åˆå¹¶</strong></h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">"inbound":</span> {
  <span class="hljs-attr">"debounceMs":</span> <span class="hljs-number">3000</span>
}
</code></pre>
<p>ä½ åœ¨ Telegram è¿å‘3æ¡æ¶ˆæ¯ï¼ŒOpenClaw ä¸ä¼šè§¦å‘3æ¬¡å¤„ç†ï¼Œè€Œæ˜¯ç­‰3ç§’åˆå¹¶æˆä¸€æ¬¡ã€‚<strong>çœ tokenï¼Œä¹Ÿçœä½ ç­‰3æ¬¡å›å¤çš„æ—¶é—´ã€‚</strong></p>
<h3 data-id="heading-10"><strong>â‘¦ session resetï¼šè‡ªç„¶è¿‡æœŸ</strong></h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"session"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"resetMode"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"idle"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"idleMinutes"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">240</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>4å°æ—¶æ²¡èŠå¤©å°±é‡ç½® sessionã€‚æ¯”å›ºå®šæ—¶é—´é‡ç½®æ›´è‡ªç„¶â€”â€”æ·±å¤œèŠåˆ°2ç‚¹ä¹Ÿä¸ä¼šè¢«æ‰“æ–­ã€‚</p>
<h3 data-id="heading-11"><strong>â‘§ userTimezoneï¼šæ—¶åŒºä¿®æ­£</strong></h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"userTimezone"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Asia/Shanghai"</span>
</code></pre>
<p>åˆ«å°çœ‹è¿™ä¸ªã€‚æ—¶åŒºä¸å¯¹ï¼ŒAI è¯´çš„"ä»Šå¤©""æ˜å¤©"å…¨æ˜¯ä¹±çš„ï¼Œcron ä»»åŠ¡çš„è§¦å‘æ—¶é—´ä¹Ÿä¼šåç§»ã€‚<strong>åŸºç¡€è®¾æ–½çº§çš„é…ç½®ï¼Œç¬¬ä¸€å¤©å°±è¯¥è®¾å¥½ã€‚</strong></p>
<h3 data-id="heading-12"><strong>â‘¨ cron é“¾æ¥ä¿®å¤</strong></h3>
<p>å‡çº§2.6åä¸€äº›æ—§é…ç½®æ²¡è·Ÿç€æ›´æ–°ï¼š</p>
<ul>
<li>
<p>æ–‡æ¡£ç´¢å¼•çš„ URL è¿˜æŒ‡å‘æ—§åŸŸå <code>docs.clawd.bot</code>ï¼Œæ”¹æˆäº† <code>docs.openclaw.ai</code></p>
</li>
<li>
<p>è®¤è¯ç›‘æ§çš„å‘½ä»¤è¿˜æ˜¯æ—§çš„ <code>clawdbot</code>ï¼Œæ”¹æˆäº† <code>openclaw</code></p>
</li>
</ul>
<p><strong>å‡çº§æ¡†æ¶ç‰ˆæœ¬åï¼Œä¸€å®šè¦æ£€æŸ¥ cron ä»»åŠ¡é‡Œçš„ç¡¬ç¼–ç è·¯å¾„å’Œå‘½ä»¤ã€‚</strong> è¿™ç§éšå½¢bugä¸ä¼šæŠ¥é”™ï¼Œåªæ˜¯é»˜é»˜å¤±æ•ˆã€‚</p>
<hr/>
<h2 data-id="heading-13"><strong>04 è¿›é˜¶ï¼šç”¨ QMD æ›¿ä»£é»˜è®¤è®°å¿†æœç´¢</strong></h2>
<p>åšå®ŒåŸºç¡€ä½“æ£€ï¼Œæˆ‘åˆç ”ç©¶äº†ä¸€ä¸ªç¤¾åŒºé‡Œå¾ˆå¤šäººåœ¨ç”¨çš„çœ token æ–¹æ¡ˆï¼š<strong>QMD</strong>ã€‚</p>
<p>QMD æ˜¯ä¸€ä¸ªæœ¬åœ°ä¼˜å…ˆçš„æœç´¢å·¥å…·ï¼Œç”¨ BM25 + å‘é‡ + é‡æ’åº ä¸‰é‡æœºåˆ¶æ¥æ£€ç´¢ Markdown æ–‡ä»¶ã€‚OpenClaw 2.6 åŸç”Ÿæ”¯æŒå®ƒä½œä¸ºè®°å¿†åç«¯ã€‚</p>
<h3 data-id="heading-14"><strong>ä¸ºä»€ä¹ˆè¦æ¢ï¼Ÿ</strong></h3>
<p>é»˜è®¤çš„è®°å¿†æœç´¢ç”¨è¿œç¨‹ embedding APIï¼ˆOpenAI / Gemini / Voyageï¼‰ï¼Œæ¯æ¬¡æœç´¢éƒ½è¦è°ƒä¸€æ¬¡ APIã€‚QMD è·‘åœ¨æœ¬åœ°ï¼Œ<strong>é›¶ API è´¹ç”¨ï¼Œé›¶å»¶è¿Ÿï¼Œæ•°æ®ä¸å‡ºæœºå™¨</strong>ã€‚</p>
<p>ç¤¾åŒºæœ‰äººåé¦ˆç”¨ QMD å token èŠ‚çœäº† <strong>60-97%</strong>ï¼ˆå› ä¸ºå®ƒåªæ‹‰æœ€ç›¸å…³çš„2-3å¥è¯è¿›ä¸Šä¸‹æ–‡ï¼Œè€Œä¸æ˜¯æŠŠæ•´æ®µè®°å¿†å¡è¿›å»ï¼‰ã€‚</p>
<h3 data-id="heading-15"><strong>æ€ä¹ˆé…ï¼Ÿ</strong></h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å®‰è£… QMD</span>
bun install -g https://github.com/tobi/qmd

<span class="hljs-comment"># 2. ç¡®è®¤ qmd å‘½ä»¤å¯ç”¨</span>
qmd --version
</code></pre>
<p>ç„¶ååœ¨ OpenClaw é…ç½®é‡ŒåŠ ä¸€è¡Œï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"memory"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"backend"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"qmd"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>é‡å¯ Gateway ç”Ÿæ•ˆã€‚Markdown æ–‡ä»¶ä»ç„¶æ˜¯å”¯ä¸€çš„"çœŸç›¸æ¥æº"ï¼ŒQMD åªè´Ÿè´£æ£€ç´¢ã€‚</p>
<h3 data-id="heading-16"><strong>æ³¨æ„äº‹é¡¹</strong></h3>
<ul>
<li>
<p>QMD ç›®å‰è¿˜æ˜¯å®éªŒæ€§åŠŸèƒ½ï¼ˆexperimentalï¼‰ï¼Œå»ºè®®å…ˆåœ¨å­ agent ä¸Šæµ‹è¯•</p>
</li>
<li>
<p>éœ€è¦å•ç‹¬å®‰è£… QMD CLI</p>
</li>
<li>
<p>å¦‚æœä½ çš„è®°å¿†æ–‡ä»¶ä¸å¤šï¼ˆ&lt;50ä¸ªï¼‰ï¼Œé»˜è®¤çš„ SQLite å‘é‡æœç´¢å…¶å®ä¹Ÿå¤Ÿç”¨</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-17"><strong>05 OpenClaw 2.6 è¿˜æœ‰ä»€ä¹ˆæ–°ä¸œè¥¿ï¼Ÿ</strong></h2>
<p>é¡ºå¸¦æ•´ç†ä¸€ä¸‹ 2.6 çš„å…³é”®æ›´æ–°ï¼Œå¸®ä½ åˆ¤æ–­å€¼ä¸å€¼å¾—å‡çº§ï¼š</p>
<ul>
<li>
<p><strong>æ¨¡å‹æ”¯æŒ</strong>ï¼šåŸç”Ÿæ”¯æŒ Anthropic Opus 4.6 å’Œ OpenAI Codex gpt-5.3-codex</p>
</li>
<li>
<p><strong>xAI (Grok) æ¥å…¥</strong>ï¼šå¯ä»¥ç”¨ Grok ä½œä¸º provider äº†</p>
</li>
<li>
<p><strong>Web UI token ä»ªè¡¨ç›˜</strong>ï¼šç›´æ¥çœ‹ token æ¶ˆè€—è¶‹åŠ¿</p>
</li>
<li>
<p><strong>Voyage AI åŸç”Ÿæ”¯æŒ</strong>ï¼šè®°å¿†å‘é‡æœç´¢å¤šäº†ä¸€ä¸ª embedding é€‰æ‹©</p>
</li>
<li>
<p><strong>Cron è°ƒåº¦ä¿®å¤</strong>ï¼šä¿®äº†å¥½å‡ ä¸ªå®šæ—¶ä»»åŠ¡æ¼è·‘å’Œæé†’ä¸é€è¾¾çš„ bugï¼ˆè¿™ä¸ªæˆ‘æ·±æœ‰ä½“ä¼šï¼‰</p>
</li>
<li>
<p><strong>å®‰å…¨å¢å¼º</strong>ï¼šskill/plugin ä»£ç å®‰å…¨æ‰«æï¼Œconfig.get å“åº”è‡ªåŠ¨è„±æ•</p>
</li>
<li>
<p><strong>Compaction é‡è¯•</strong>ï¼šä¸Šä¸‹æ–‡æº¢å‡ºæ—¶å…è®¸å¤šæ¬¡å‹ç¼©é‡è¯•ï¼Œä¸ä¼šç›´æ¥å´©</p>
</li>
</ul>
<p><strong>å¦‚æœä½ è¿˜åœ¨ç”¨ 2.5 æˆ–æ›´æ—©ç‰ˆæœ¬ï¼Œå¼ºçƒˆå»ºè®®å‡çº§ã€‚</strong> å°¤å…¶æ˜¯ cron è°ƒåº¦çš„ä¿®å¤ï¼Œ2.5 çš„ cron åœ¨æŸäº›åœºæ™¯ä¸‹ä¼šé»˜é»˜åœè·‘ã€‚</p>
<hr/>
<h2 data-id="heading-18"><strong>æœ€ç»ˆæ•ˆæœ</strong></h2>








































<table><thead><tr><th>æŒ‡æ ‡</th><th>Before</th><th>After</th></tr></thead><tbody><tr><td>Token è´¹ç”¨</td><td>åŸºå‡†</td><td>é™ä½ 30-50%</td></tr><tr><td>è®°å¿†ä¸¢å¤±é£é™©</td><td>æœ‰</td><td>åŸºæœ¬æ¶ˆé™¤</td></tr><tr><td>å­ä»»åŠ¡è´¹ç”¨</td><td>Opus å…¨é‡</td><td>é™ä½ 60%+</td></tr><tr><td>æ— æ•ˆå¿ƒè·³</td><td>48æ¬¡/å¤©</td><td>8æ¬¡/å¤©</td></tr><tr><td>Cron ä»»åŠ¡</td><td>æ¼è·‘3-4å¤©</td><td>å…¨éƒ¨æ¢å¤</td></tr><tr><td>è®°å¿†æœç´¢</td><td>è¿œç¨‹ API</td><td>æœ¬åœ° QMDï¼ˆå¯é€‰ï¼‰</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-19"><strong>å†™åœ¨æœ€å</strong></h2>
<p>AIåŠ©æ‰‹ä¸æ˜¯è£…å®Œå°±èƒ½è·‘ä¸€è¾ˆå­çš„ã€‚</p>
<p>å®ƒå°±åƒä¸€è¾†è½¦â€”â€”ä½ å¾—å®šæœŸä¿å…»ï¼Œæ£€æŸ¥æœºæ²¹ã€è½®èƒã€åˆ¹è½¦ã€‚ä¸ç„¶å“ªå¤©é«˜é€Ÿä¸ŠæŠ›é”šï¼Œä½ æ‰å‘ç°å‘åŠ¨æœºæ—©å°±æ‹‰ç¼¸äº†ã€‚</p>
<p>æˆ‘çš„è¿™æ¬¡"ä½“æ£€"å‘ç°äº†ä¸€ä¸ªè·‘äº†4671æ¬¡çš„éšå½¢æ•…éšœï¼Œé¡ºå¸¦ä¼˜åŒ–å‡º 30-50% çš„æˆæœ¬èŠ‚çœã€‚<strong>æ€»å…±èŠ±äº†ä¸åˆ°2å°æ—¶ã€‚</strong></p>
<p>å¦‚æœä½ ä¹Ÿåœ¨ç”¨ OpenClawï¼Œå»ºè®®ä½ ç°åœ¨å°±è·‘ä¸€å¥ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">systemctl list-units | <span class="hljs-keyword">grep</span> openclaw
</code></pre>
<p>çœ‹çœ‹æœ‰æ²¡æœ‰"å¹½çµæœåŠ¡"åœ¨å·å·æ¶ˆè€—ä½ çš„èµ„æºã€‚</p>
<p><strong>å·¥å…·ä¼šå˜å¼ºï¼Œä½†ä¸ä¼šè‡ªå·±å˜å¥½ã€‚è°ƒæ•™å®ƒçš„äººï¼Œæ‰æ˜¯çœŸæ­£çš„ç«äº‰åŠ›ã€‚</strong></p>
<hr/>
<p>å¦‚æœè¿™ç¯‡å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµã€æ”¶è—ã€å…³æ³¨ï¼Œä½ çš„æ”¯æŒæ˜¯æˆ‘æŒç»­è¾“å‡ºçš„åŠ¨åŠ› âœ¨</p>
<hr/>
<p>æˆ‘çš„å…¶ä»–å¹³å°è´¦å·å’Œå¼€æºé¡¹ç›®åœ¨ä¸ªäººä¸»é¡µä¸­ï¼Œæ¬¢è¿äº¤æµ ğŸ¤</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…¨æ ˆé‡Œç¨‹ç¢‘å››ï¼šåŠ¨æ€ç»„ä»¶å¼€å‘]]></title>    <link>https://juejin.cn/post/7604784281957613606</link>    <guid>https://juejin.cn/post/7604784281957613606</guid>    <pubDate>2026-02-10T07:51:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604784281957613606" data-draft-id="7604775190213361674" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…¨æ ˆé‡Œç¨‹ç¢‘å››ï¼šåŠ¨æ€ç»„ä»¶å¼€å‘"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-10T07:51:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æŠ½ç©ºæä¸ªç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1735501877093355"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…¨æ ˆé‡Œç¨‹ç¢‘å››ï¼šåŠ¨æ€ç»„ä»¶å¼€å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1735501877093355/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æŠ½ç©ºæä¸ªç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T07:51:51.000Z" title="Tue Feb 10 2026 07:51:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin:30px 0 10px;color:#cca152;position:relative;padding-left:50px;border-bottom:2px solid rgba(209,163,78,.6);padding-bottom:0}.markdown-body h1{font-size:30px}.markdown-body h1:before{content:"";width:50px;height:42px;display:block;position:absolute;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAhBAMAAACo1K8bAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAnUExURUdwTMyhUsqkUMyhUsyiUcyhUsyhUsyhUcyhUsyhUs2hUtytWNWoVX44si8AAAAKdFJOUwD8Bfcge95QncCWSSDAAAABh0lEQVQoz2WSPUvDQBjHjyPSOB7drh2OUOs36NA6pKAFwaEo4tDFIUWxGYLgKw4BEYUuHaQg7XJ0kccsUmrT2qUUQZp8KO/y1hSfIYEf/5eHu0MoGU1+sIbSw5Bypd92S+dWWrd34b15vuOPY4QxuvtYZp0lIVk3Zgjt+5zkh12AvBHnbW85BOjXySPwhc5CYcY0OdDh5dEUqIEj4cN8Dty3a1MqYJS4MaWU5wzVLwMMxqGSNQgA/VFa4gf50yhxSUW+db8ACa2gBxfnABVDFYHCPYrc7TLwCepJM8/ZoVsRwpxdHEozHUXd6idwVzFFM5BFmIhQVQjrNdnCvdd48wblI2VHtsAZioSsTYVwLoXvjMXH1icuNgPhQE+Ot1+xi8HeA3d1Df1f1JPVUOmsYLujBjuSySqSXYt+yTwbJ0pcyIhqTrxkn0BazRLizJosxRBued+z0jPD6VewOXl5utHRGmMNK3k0iTkzxpq2/oIQO6gLprF12kT/R20eyzlcg7iwK0dPsz/ibpdsCHweWwAAAABJRU5ErkJggg==) 0 0 no-repeat;background-size:80%;bottom:-10px;left:-2px}.markdown-body h2{font-size:24px}.markdown-body h2:before{content:"";width:50px;height:42px;display:block;position:absolute;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAhBAMAAACo1K8bAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAnUExURUdwTMyhUsqkUMyhUsyiUcyhUsyhUsyhUcyhUsyhUs2hUtytWNWoVX44si8AAAAKdFJOUwD8Bfcge95QncCWSSDAAAABh0lEQVQoz2WSPUvDQBjHjyPSOB7drh2OUOs36NA6pKAFwaEo4tDFIUWxGYLgKw4BEYUuHaQg7XJ0kccsUmrT2qUUQZp8KO/y1hSfIYEf/5eHu0MoGU1+sIbSw5Bypd92S+dWWrd34b15vuOPY4QxuvtYZp0lIVk3Zgjt+5zkh12AvBHnbW85BOjXySPwhc5CYcY0OdDh5dEUqIEj4cN8Dty3a1MqYJS4MaWU5wzVLwMMxqGSNQgA/VFa4gf50yhxSUW+db8ACa2gBxfnABVDFYHCPYrc7TLwCepJM8/ZoVsRwpxdHEozHUXd6idwVzFFM5BFmIhQVQjrNdnCvdd48wblI2VHtsAZioSsTYVwLoXvjMXH1icuNgPhQE+Ot1+xi8HeA3d1Df1f1JPVUOmsYLujBjuSySqSXYt+yTwbJ0pcyIhqTrxkn0BazRLizJosxRBued+z0jPD6VewOXl5utHRGmMNK3k0iTkzxpq2/oIQO6gLprF12kT/R20eyzlcg7iwK0dPsz/ibpdsCHweWwAAAABJRU5ErkJggg==) 0 0 no-repeat;background-size:70%;bottom:-15px;left:-1px}.markdown-body h3{font-size:18px}.markdown-body h3:before{content:"";width:50px;height:42px;display:block;position:absolute;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAhBAMAAACo1K8bAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAnUExURUdwTMyhUsqkUMyhUsyiUcyhUsyhUsyhUcyhUsyhUs2hUtytWNWoVX44si8AAAAKdFJOUwD8Bfcge95QncCWSSDAAAABh0lEQVQoz2WSPUvDQBjHjyPSOB7drh2OUOs36NA6pKAFwaEo4tDFIUWxGYLgKw4BEYUuHaQg7XJ0kccsUmrT2qUUQZp8KO/y1hSfIYEf/5eHu0MoGU1+sIbSw5Bypd92S+dWWrd34b15vuOPY4QxuvtYZp0lIVk3Zgjt+5zkh12AvBHnbW85BOjXySPwhc5CYcY0OdDh5dEUqIEj4cN8Dty3a1MqYJS4MaWU5wzVLwMMxqGSNQgA/VFa4gf50yhxSUW+db8ACa2gBxfnABVDFYHCPYrc7TLwCepJM8/ZoVsRwpxdHEozHUXd6idwVzFFM5BFmIhQVQjrNdnCvdd48wblI2VHtsAZioSsTYVwLoXvjMXH1icuNgPhQE+Ot1+xi8HeA3d1Df1f1JPVUOmsYLujBjuSySqSXYt+yTwbJ0pcyIhqTrxkn0BazRLizJosxRBued+z0jPD6VewOXl5utHRGmMNK3k0iTkzxpq2/oIQO6gLprF12kT/R20eyzlcg7iwK0dPsz/ibpdsCHweWwAAAABJRU5ErkJggg==) 0 0 no-repeat;background-size:60%;bottom:-19px;left:-2px}.markdown-body h4{font-size:16px;padding-left:0;border-bottom:1px solid rgba(209,163,78,.6)}.markdown-body h5{font-size:15px;padding-left:0}.markdown-body em{color:#cca152}.markdown-body del{text-decoration-color:#cca152;text-decoration-thickness:2px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:80%;margin:6px auto;box-shadow:0 6px 15px #8e8e8e;display:block;margin:20px auto!important;object-fit:contain;border-radius:8px}.markdown-body hr{border:none;border-top:2px solid #e0c9a1;margin-top:32px 0}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background:#f6efde;color:#b69454;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Mono,Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;background:#fef6e1;border-radius:4px;box-shadow:0 0 8px hsla(0,0%,47%,.45)}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAOCAMAAABaWb9VAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAAAAJcEhZcwAADsQAAA7EAZUrDhsAAACHUExURUdwTMxCKdc8NvdYT/9hVyLJPABBAGubKNiIOv+/K+ytJBakH9aZG+5QR5VZDOBDPhmtJ8+VGuGjH/CwJR26MR6+NBq0LPW1KBmwKetNRfJUTONHP92fHuSmIeFEPhu3LR29M/BTS+mqIuqsI5qdHyLKPP++Kv9gVf9lW//KLSXXQCTQP//FLMVm5KQAAAAldFJOUwAlPPz7+woBBPu8Mzu+FlRRKmvnweeG+Wqg6mVNXmuc1OCbmjZJWF/9AAABKklEQVQoz3WS6XaCMBCFRzAM++KGsqhtDwES3//5OtmA2uP9A9zwzRoAgBC0QgQrdA68OZsDr229YGHoIEj7Pl0ZOgjKa5lYJ4Rd1vijn3nuD4Qurjmv48o6RFyfbGDnS6DeEXZfk5ZfuBhdPb9I87ECNMh1EFJKIU6agWzaa01NbmLkxznSmmObJBkkUxrERf3i+ftRiZi7ShPCYY64UhTx1AR5CDYoMXkOKEY7GmTcTzeD/FiER68DfSLgSRqEIBoB3P8h3x8RZhBXGJGusJdD6rfCBl0YqvZNkrV9zej2cWlfJWG6fRpyM41qYH+GTPPi2yFLQYC0Qybm5o96lW77kMbcrBKtgeWTsthVamNXFF4I6x0DTPuugsVRFyYpyxzWqNvHJwed8ws7QyP1UwjNjwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fef6e1}.markdown-body a{text-decoration:none;color:#d8ac5a;border-bottom:1px solid #d8ac5a}.markdown-body a:active,.markdown-body a:hover{color:#93753f;border-color:#93753f}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f4e8c7;border-collapse:collapse}.markdown-body thead{background:rgba(255,227,176,.6588235294);text-align:left;display:table-header-group;border-bottom:1px solid rgba(255,227,176,.6588235294)}.markdown-body tbody{background:rgba(255,247,229,.3882352941)}.markdown-body td,.markdown-body th{padding:7px;line-height:24px;min-width:100px}.markdown-body blockquote{color:#bd954f;padding:1px 23px;margin:22px 0;border-left:4px solid #dcb267;background-color:#fff7e5}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol .task-list-item,.markdown-body ul .task-list-item{list-style:none}.markdown-body ol li{padding-left:6px}.markdown-body::marker{color:#dcb267}.markdown-body .contains-task-list{padding-left:0}.markdown-body .contains-task-list .task-list-item{list-style:none;position:relative}.markdown-body .contains-task-list .task-list-item input[type=checkbox]{position:relative;top:2px}.markdown-body .contains-task-list .task-list-item input[type=checkbox]:before{content:"";display:inline-block;height:12px;width:12px;position:absolute;left:-2px;top:-2px;border:2px solid #cda152;border-radius:5px}.markdown-body .contains-task-list .task-list-item input[type=checkbox]:checked{position:relative;top:2px}.markdown-body .contains-task-list .task-list-item input[type=checkbox]:checked:before{border:none;content:"";display:inline-block;height:17px;width:17px;position:absolute;left:-2px;top:-2px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAFo9M/3AAAAAXNSR0IArs4c6QAAAYhJREFUOBFjYACC0/MDGsDEiyvr/zOCeUwMJxn/A8HZRUEMYBFGJsZ6kFoQYALiAyAGCgDpA+sFijKeWRj4H1kWpIWBW1SDQcm+BCzOAiK/vr7BcO/gDbAAI4hE1waWgRBnmWCGIwkyKFjnwow0BhsJk9QLncvw5dV1oPE9MCEGmBWrgCKhcFEowyR+PSNYwemFAZ4M/xjMkRWYJm5oAPFB/joDpI1BHHQANgGPDxj+//vfCA4IdJ3GcevgQnAFhlHLwYIgSVA0wABcwY3tFQzokiBFGIEP0wmigW5wZAK5FFkQib0a6NUDcEmgb7AGFpIGZOZqoMFhIAFQknEAJpn9yLLEssFOBCp2IFaDkl0xg6C8FbJyB3gowUS5RdQYBORQYpVB1iwVHIIMwJh///AYTCmYRklNIBFmNi4GeYt0BhnjeIa3dw8wSBlEgDUhxw2yCRgGfHp2geHiqiSwUwUVrFAiFVkjjA1LrjgTHEwhFvosMCZM4NEIUoAtWWNoBGZ70/gN22HiAD2uhAzsYNBZAAAAAElFTkSuQmCC) 0 0 no-repeat;background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><blockquote>
<p>æ–‡æ¡£çŸ¥è¯†æ¥æºï¼šæŠ–éŸ³ â€œå“²ç„å‰ç«¯â€ï¼Œã€Šå¤§å‰ç«¯å…¨æ ˆå®è·µè¯¾ã€‹</p>
</blockquote>
<h2 data-id="heading-0">åŠ¨æ€ç»„ä»¶å¼€å‘</h2>
<p><strong>åŠ¨æ€ç»„ä»¶å¼€å‘</strong>â€‹ çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°† <strong>UI ç»„ä»¶</strong>â€‹ å’Œ <strong>ä¸šåŠ¡é€»è¾‘</strong>â€‹ è§£è€¦ï¼Œé€šè¿‡é…ç½®é©±åŠ¨çš„æ–¹å¼å®ç°å¿«é€Ÿå¼€å‘å’Œé«˜åº¦å¤ç”¨ã€‚è¿™ç§æ–¹å¼ç‰¹åˆ«é€‚åˆä¸­åå°ç®¡ç†ç³»ç»Ÿã€ä½ä»£ç å¹³å°ã€å¯è§†åŒ–æ­å»ºç­‰åœºæ™¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b6b49d3cfde45f38bd717852238084d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oq956m65pCe5Liq57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771314714&amp;x-signature=5Pf%2FiIzjASXxvXGLBT7ooyUZvWA%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bedd941440a9428cb9f44c9fd51785d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oq956m65pCe5Liq57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771314714&amp;x-signature=pLDnsrG37Uew7d%2BXbIMngpzPhLg%3D" alt="image.png" loading="lazy"/></p>
<p>ä»¥ createForm ä¸ºä¾‹ï¼Œ
åœ¨model.js--ä¹Ÿå°±æ˜¯é…ç½®åŒ–æ–‡ä»¶ä¸­ï¼Œé…ç½®èƒ½åŠ›ï¼›</p>
<p>componentConfig:{
createForm:{
title:'æ–°å¢å•†å“',
saveBtnText:'æ–°å¢å•†å“'
},
editForm:{
mainKey:'product_id',
title:'ä¿®æ”¹å•†å“',
saveBtnText:'ä¿®æ”¹å•†å“'
},
detailPanel:{
mainKey:'product_id',
title:'å•†å“è¯¦æƒ…',
},
demoComponent:{}
}</p>
<p>åœ¨ç»„ä»¶schema-view.vue ä¸­å®ç°åŠ¨æ€æ¸²æŸ“
&lt;component
v-for="(item,key) in components"
:key="key"
:is="ComponentConfig[key]?.component"
ref="comListRef"
@command="onComponentCommand"&gt; </p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> createForm <span class="hljs-keyword">from</span> <span class="hljs-string">"./create-form/create-form.vue"</span>;
<span class="hljs-keyword">import</span> editForm <span class="hljs-keyword">from</span> <span class="hljs-string">"./edit-Form/edit-Form.vue"</span>;
<span class="hljs-keyword">import</span> detailPanel <span class="hljs-keyword">from</span> <span class="hljs-string">"./detail-panel/detail-panel.vue"</span>;

<span class="hljs-comment">// ä¸šåŠ¡æ‰©å±• component é…ç½®</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">BusinessComponentConfig</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'$businessComponentConfig'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">ComponentConfig</span> =  {
    <span class="hljs-attr">createForm</span>:{
        <span class="hljs-attr">component</span>: createForm
    },
    <span class="hljs-attr">editForm</span>:{
        <span class="hljs-attr">component</span>:editForm
    },
    <span class="hljs-attr">detailPanel</span>:{
        <span class="hljs-attr">component</span>:detailPanel
    }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
    ...<span class="hljs-title class_">ComponentConfig</span>,
    ...<span class="hljs-title class_">BusinessComponentConfig</span>
}; 
</code></pre>
<p>æœ€ç»ˆå®ç°æ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8349ed9dfdfa4a1bad2220db457e5f5f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oq956m65pCe5Liq57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771314714&amp;x-signature=2MwI8dSkHmJPn7KeJwRxP4zu4zc%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OpenSpec ä¸ Spec Kit ä½¿ç”¨å¯¹æ¯”ï¼šè§„èŒƒé©±åŠ¨å¼€å‘è¯¥é€‰å“ªä¸ªï¼Ÿ]]></title>    <link>https://juejin.cn/post/7603781883974385683</link>    <guid>https://juejin.cn/post/7603781883974385683</guid>    <pubDate>2026-02-08T23:41:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603781883974385683" data-draft-id="7603688142005583881" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OpenSpec ä¸ Spec Kit ä½¿ç”¨å¯¹æ¯”ï¼šè§„èŒƒé©±åŠ¨å¼€å‘è¯¥é€‰å“ªä¸ªï¼Ÿ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-08T23:41:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£è±¡å—"/> <meta itemprop="url" content="https://juejin.cn/user/2524134428655159"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OpenSpec ä¸ Spec Kit ä½¿ç”¨å¯¹æ¯”ï¼šè§„èŒƒé©±åŠ¨å¼€å‘è¯¥é€‰å“ªä¸ªï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2524134428655159/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£è±¡å—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-08T23:41:58.000Z" title="Sun Feb 08 2026 23:41:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    14
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>AI ç¼–ç¨‹å·¥å…·è¶Šæ¥è¶Šå¼ºï¼Œä½†"å…ˆå†™è§„èŒƒå†å†™ä»£ç "çš„ SDDï¼ˆSpec-Driven Developmentï¼‰ç†å¿µä¹Ÿå¼€å§‹æµè¡Œã€‚ç›®å‰æœ€æœ‰ä»£è¡¨æ€§çš„ä¸¤ä¸ªå¼€æºæ¡†æ¶æ˜¯ GitHub çš„ Spec Kit å’Œ Fission AI çš„ OpenSpecï¼Œè¿™ç¯‡æ–‡ç« æ¢³ç†å®ƒä»¬å„è‡ªçš„ç”¨æ³•å’Œå·®å¼‚ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å…ˆè¯´èƒŒæ™¯ï¼šä¸ºä»€ä¹ˆéœ€è¦ SDD</h2>
<p>ç”¨ Cursorã€Claude Code æˆ– Copilot å†™ä»£ç æ—¶ï¼Œå¾ˆå¤šäººä¹ æƒ¯ç›´æ¥ä¸¢ä¸€æ®µéœ€æ±‚æè¿°ç»™ AIï¼Œç„¶åçœ‹å®ƒè¾“å‡ºä»€ä¹ˆã€‚è¿™ç§ "Vibe Coding" åœ¨å°åŠŸèƒ½ä¸Šè¿˜è¡Œï¼Œä¸€æ—¦éœ€æ±‚å¤æ‚ä¸€ç‚¹ï¼Œç”Ÿæˆçš„ä»£ç å¾€å¾€ä¼¼æ˜¯è€Œé â€”â€” ä¸æ˜¯æ¨¡å‹ä¸å¤Ÿå¼ºï¼Œæ˜¯æˆ‘ä»¬æ²¡ç»™å¤Ÿä¸Šä¸‹æ–‡ã€‚</p>
<p>SDD çš„åšæ³•å¾ˆæœ´ç´ ï¼šå…ˆæŠŠè¦åšä»€ä¹ˆå†™æˆç»“æ„åŒ–çš„è§„èŒƒæ–‡æ¡£ï¼Œå†è®© AI ç…§ç€è§„èŒƒå†™ä»£ç ã€‚è§„èŒƒæœ¬èº«ä¹Ÿç”± AI è¾…åŠ©ç”Ÿæˆï¼Œä½†æ¯ä¸€æ­¥äººéƒ½å¯ä»¥å®¡æŸ¥å’Œä¿®æ­£ã€‚ä¸¤ä¸ªæ¡†æ¶å¯¹"æ€ä¹ˆç»„ç»‡è¿™ä¸ªæµç¨‹"ç»™å‡ºäº†ä¸åŒçš„ç­”æ¡ˆã€‚</p>
<h2 data-id="heading-1">Spec Kitï¼šGitHub å‡ºå“ï¼Œæµç¨‹ä¸¥è°¨</h2>
<h4 data-id="heading-2">å®šä½</h4>
<p>Spec Kitï¼ˆ28K+ Starï¼‰ä¸æ˜¯ AI åŠ©æ‰‹ï¼Œè€Œæ˜¯ä¸€å¥—ç»™ AI åŠ©æ‰‹"åŠ è§„çŸ©"çš„å·¥å…·åŒ…ã€‚å®ƒå¾€ä½ é¡¹ç›®é‡Œæ³¨å…¥ä¸€ç»„ slash commandsï¼Œé€šè¿‡ GitHub Copilotã€Claude Codeã€Gemini CLI ç­‰å·¥å…·è°ƒç”¨ã€‚æ ¸å¿ƒæ€è·¯æ˜¯é—¨æ§æµç¨‹ â€”â€” æ¯ä¸€æ­¥åšå®Œã€äººç¡®è®¤äº†ï¼Œæ‰èƒ½è¿›ä¸‹ä¸€æ­¥ã€‚</p>
<h4 data-id="heading-3">å®‰è£…</h4>
<p>Python ç”Ÿæ€ï¼Œç”¨ <code>uv</code> è£…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">uv tool install specify-cli --from git+https://github.com/github/spec-kit.git
specify init my-project
</code></pre>
<p><code>specify init</code> è·‘å®Œåï¼Œslash commands å°±è¢«å†™è¿›é¡¹ç›®çš„ agent é…ç½®ç›®å½•äº†ï¼ˆ<code>.claude/</code>ã€<code>.github/prompts/</code> ç­‰ï¼‰ï¼Œåç»­ä¸å†éœ€è¦ <code>specify</code> å‘½ä»¤ã€‚</p>
<h4 data-id="heading-4">å·¥ä½œæµï¼š7 æ­¥é—¨æ§</h4>
<pre><code class="hljs">Constitution â†’ Specify â†’ Clarify â†’ Plan â†’ Tasks â†’ Analyze â†’ Implement
</code></pre>
<p>é€æ­¥è¯´æ˜ï¼š</p>
<p><strong><code>/speckit.constitution</code> â€” å®šè§„çŸ©</strong></p>
<p>åˆ›å»º <code>constitution.md</code>ï¼Œå†™æ­»é¡¹ç›®çš„ä¸å¯è¿ååŸåˆ™ï¼šæµ‹è¯•è¦†ç›–ç‡åº•çº¿ã€æŠ€æœ¯æ ˆçº¦æŸã€ç¼–ç è§„èŒƒç­‰ã€‚AI åœ¨åç»­æ¯ä¸€æ­¥éƒ½ä¼šå‚è€ƒè¿™ä»½æ–‡ä»¶ï¼Œå‡å°‘"ä¸Šä¸‹æ–‡æ¼‚ç§»"ã€‚</p>
<p><strong><code>/speckit.specify</code> â€” å†™è§„èŒƒ</strong></p>
<p>ç”¨è‡ªç„¶è¯­è¨€æè¿°è¦åšä»€ä¹ˆã€ä¸ºä»€ä¹ˆåšï¼Œä¸éœ€è¦æ¶‰åŠæŠ€æœ¯ç»†èŠ‚ã€‚</p>
<p><strong><code>/speckit.clarify</code> â€” æ¶ˆæ­§</strong></p>
<p>AI åŸºäºè§„èŒƒæŠ›å‡ºä¸€ç³»åˆ—ç»“æ„åŒ–é—®é¢˜ï¼Œè¦†ç›–æ½œåœ¨çš„æ­§ä¹‰ç‚¹ï¼Œç­”æ¡ˆå›å†™åˆ°è§„èŒƒçš„ Clarifications éƒ¨åˆ†ã€‚è¿™æ­¥æŒºæœ‰ä»·å€¼ â€”â€” å¾ˆå¤šè¿”å·¥å°±æ˜¯å› ä¸ºå‰æœŸæ²¡æŠŠéœ€æ±‚æƒ³æ¸…æ¥šã€‚</p>
<p><strong><code>/speckit.plan</code> â€” æŠ€æœ¯æ–¹æ¡ˆ</strong></p>
<p>ä½ ç»™å‡ºæŠ€æœ¯æ–¹å‘ï¼ˆç”¨ä»€ä¹ˆæ¡†æ¶ã€ä»€ä¹ˆæ¶æ„ï¼‰ï¼ŒAI ç”Ÿæˆè¯¦ç»†æ–¹æ¡ˆã€‚</p>
<p><strong><code>/speckit.tasks</code> â€” ä»»åŠ¡æ‹†è§£</strong></p>
<p>æŠŠè§„èŒƒå’Œæ–¹æ¡ˆæ‹†æˆå¯æ‰§è¡Œçš„ä»»åŠ¡åˆ—è¡¨ï¼Œå¸¦ä¾èµ–é¡ºåºã€å¹¶è¡Œæ ‡è®°ï¼ˆ<code>[P]</code>ï¼‰ã€æ–‡ä»¶è·¯å¾„å’Œæµ‹è¯•è¦æ±‚ã€‚</p>
<p><strong><code>/speckit.analyze</code> â€” ä¸€è‡´æ€§æ£€æŸ¥</strong></p>
<p>äº¤å‰æ£€æŸ¥è§„èŒƒã€æ–¹æ¡ˆå’Œä»»åŠ¡ä¹‹é—´æœ‰æ²¡æœ‰çŸ›ç›¾ã€‚è¾“å‡ºä¸€ä¸ª Findings Tableï¼Œæ¯è¡Œæœ‰ç¼–å·ï¼ˆA1ã€C2 ä¹‹ç±»ï¼‰ï¼Œä½ å¯ä»¥ç›´æ¥è¯´"Fix A1, C2"è®© AI å»æ”¹ã€‚</p>
<p><strong><code>/speckit.implement</code> â€” æ‰§è¡Œ</strong></p>
<p>åŸºäºæ‰€æœ‰äº§ç‰©å¼€å§‹å†™ä»£ç ã€‚</p>
<h4 data-id="heading-5">ä¼˜ç¼ºç‚¹</h4>
<p>å¥½å¤„æ˜¯ä¸¥è°¨ã€‚æ¯æ­¥éƒ½æœ‰äººå·¥å¡ç‚¹ï¼Œclarify å’Œ analyze èƒ½æœ‰æ•ˆå‡å°‘è¿”å·¥ã€‚</p>
<p>ä»£ä»·æ˜¯é‡ã€‚specify é˜¶æ®µå°±èƒ½äº§å‡º 800 å¤šè¡Œæ–‡æ¡£ï¼Œæ•´å¥—æµç¨‹ 8 ä¸ª slash commandï¼Œè·‘ä¸€éä¸‹æ¥éœ€è¦ä¸å°‘è€å¿ƒã€‚å¯¹æ—¥å¸¸å°åŠŸèƒ½è¿­ä»£æ¥è¯´æœ‰äº› overkillã€‚</p>
<h2 data-id="heading-6">OpenSpecï¼šè½»é‡çµæ´»ï¼Œä¸ºå­˜é‡ä»£ç è€Œç”Ÿ</h2>
<h4 data-id="heading-7">å®šä½</h4>
<p>OpenSpecçš„è®¾è®¡å‡ºå‘ç‚¹ä¸å¤ªä¸€æ · â€”â€” å®ƒå‡è®¾ä½ å¤§éƒ¨åˆ†æ—¶é—´æ˜¯åœ¨å·²æœ‰ä»£ç åº“ä¸Šåšå¢é‡å˜æ›´ï¼Œè€Œéä»é›¶å¼€å§‹ã€‚æ‰€ä»¥å®ƒå›´ç»•"å˜æ›´ï¼ˆChangeï¼‰"è¿™ä¸ªæ¦‚å¿µæ¥ç»„ç»‡ä¸€åˆ‡ã€‚</p>
<p>v1.0.0ï¼ˆThe OPSX Releaseï¼‰æ˜¯ä¸ªå¤§ç‰ˆæœ¬ï¼ŒæŠŠæ—©æœŸçš„ 3 æ­¥çº¿æ€§æµç¨‹é‡æ„æˆäº† 10 ä¸ªå¯è‡ªç”±ç»„åˆçš„ OPSX å‘½ä»¤ï¼Œä¸å†å¼ºåˆ¶æŒ‰é¡ºåºèµ°ã€‚</p>
<h4 data-id="heading-8">å®‰è£…</h4>
<p>TypeScript å†™çš„ï¼Œéœ€è¦ Node.js 20.19.0+ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install -g @fission-ai/openspec
openspec init
<span class="hljs-comment"># æˆ–ç›´æ¥æŒ‡å®šå·¥å…·</span>
openspec init --tools claude,cursor
</code></pre>
<p>ç›®å‰æ”¯æŒå¤šç§AIå·¥å…·ï¼ˆClaude Codeã€Cursorã€Windsurfã€Gemini CLIã€Copilotã€Clineã€Amazon Q ç­‰ï¼‰ã€‚åˆå§‹åŒ–ååœ¨é¡¹ç›®é‡Œç”Ÿæˆå¯¹åº” çš„skill æ–‡ä»¶ï¼Œä¸åŒå·¥å…·çš„å‘½ä»¤è¯­æ³•ç•¥æœ‰å·®å¼‚ï¼š</p>





















<table><thead><tr><th>å·¥å…·</th><th>æ ¼å¼</th></tr></thead><tbody><tr><td>Claude Code</td><td><code>/opsx:command</code></td></tr><tr><td>Cursor / Windsurf / Copilot</td><td><code>/opsx-command</code></td></tr><tr><td>Trae</td><td><code>/openspec-command-name</code></td></tr></tbody></table>
<h4 data-id="heading-9">æ ¸å¿ƒæ¦‚å¿µï¼šäº§ç‰©ä¾èµ–å›¾</h4>
<p>ç†è§£ OpenSpec çš„å…³é”®æ˜¯å®ƒçš„äº§ç‰©ä¾èµ–å›¾ï¼ˆArtifact Graphï¼‰ã€‚æ¯ä¸ªå˜æ›´åŒ…å« 4 ä¸ªäº§ç‰©ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">proposal (æ ¹)
â”œâ”€â”€ specs    (ä¾èµ– proposal)
â”œâ”€â”€ design   (ä¾èµ– proposal)
â””â”€â”€ tasks    (ä¾èµ– specs + design)
</code></pre>
<p>æ¯ä¸ªäº§ç‰©æœ‰ä¸‰ç§çŠ¶æ€ï¼šBLOCKED â†’ READY â†’ DONEã€‚AI é€šè¿‡æŸ¥è¯¢ CLI æ‹¿åˆ°å®æ—¶çŠ¶æ€ï¼Œè‡ªåŠ¨åˆ¤æ–­è¯¥åšä»€ä¹ˆã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥éšæ—¶å›å»æ”¹ä»»ä½•äº§ç‰©ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ›´æ–°çŠ¶æ€é“¾è·¯ã€‚</p>
<h4 data-id="heading-10">å®Œæ•´å‘½ä»¤ï¼ˆ10 ä¸ªï¼‰</h4>
<p>æŒ‰ä½¿ç”¨é˜¶æ®µåˆ†ï¼š</p>
<p><strong>æ¢ç´¢</strong></p>
<p><code>/opsx:explore</code> â€” åœ¨æ­£å¼å¼€å§‹å‰è°ƒç ”é—®é¢˜ã€å¯¹æ¯”æ–¹æ¡ˆã€‚è¿™ä¸ªæ¨¡å¼æœ‰ç¡¬éš”ç¦»ï¼Œä¸ä¼šäº§ç”Ÿä»»ä½•äº§ç‰©æˆ–ä»£ç å˜æ›´ï¼Œçº¯ç²¹ç”¨æ¥æƒ³æ¸…æ¥šã€‚</p>
<p><strong>è§„åˆ’</strong></p>
<p><code>/opsx:new &lt;name&gt;</code> â€” åˆ›å»ºä¸€ä¸ªå˜æ›´ï¼Œåœ¨ <code>openspec/changes/&lt;name&gt;/</code> ä¸‹æ­å¥½è„šæ‰‹æ¶ã€‚æ”¯æŒ <code>--schema</code> å‚æ•°æŒ‡å®šè‡ªå®šä¹‰äº§ç‰©æµç¨‹ã€‚</p>
<p><code>/opsx:ff</code> â€” Fast-Forwardï¼ŒæŒ‰ä¾èµ–é¡ºåºä¸€å£æ°”ç”Ÿæˆ proposalã€specsã€designã€tasks å››ä¸ªäº§ç‰©ã€‚é€‚åˆéœ€æ±‚æ˜ç¡®çš„åœºæ™¯ã€‚</p>
<p><code>/opsx:continue</code> â€” æ¯æ¬¡åªç”Ÿæˆä¸‹ä¸€ä¸ªå°±ç»ªçš„äº§ç‰©ï¼Œé€‚åˆè¾¹æƒ³è¾¹åšã€‚</p>
<blockquote>
<p><code>ff</code> è¿˜æ˜¯ <code>continue</code>ï¼Ÿæƒ³æ¸…æ¥šäº†ç”¨ <code>ff</code>ï¼Œæ²¡æƒ³æ¸…æ¥šç”¨ <code>continue</code>ã€‚</p>
</blockquote>
<p><strong>å®ç°</strong></p>
<p><code>/opsx:apply</code> â€” æŒ‰ç…§ specs å’Œ design é€ä¸ªå®ç° tasks.md é‡Œçš„ä»»åŠ¡ã€‚æ”¯æŒ <code>/opsx:apply &lt;name&gt;</code> æŒ‡å®šå˜æ›´åï¼Œåšåˆ°æ–­ç‚¹ç»­è·‘ã€‚</p>
<p><code>/opsx:verify</code> â€” å®ç°å®Œäº†è·‘ä¸€éæ ¡éªŒï¼Œæ£€æŸ¥ä»£ç å’Œè§„èŒƒæ˜¯å¦ä¸€è‡´ã€‚é—®é¢˜åˆ†ä¸‰çº§ï¼šCRITICAL / WARNING / SUGGESTIONã€‚</p>
<p><strong>å½’æ¡£</strong></p>
<p><code>/opsx:sync</code> â€” æŠŠå˜æ›´é‡Œçš„ delta specs åˆå¹¶å›ä¸»è§„èŒƒç›®å½•ã€‚å¯é€‰æ­¥éª¤ï¼Œarchive æ—¶ä¹Ÿä¼šæç¤ºã€‚</p>
<p><code>/opsx:archive</code> â€” éªŒè¯äº§ç‰©å’Œä»»åŠ¡å®Œæˆåï¼ŒæŠŠå˜æ›´ç§»åˆ° archive ç›®å½•ã€‚</p>
<p><code>/opsx:bulk-archive</code> â€” åŒæ—¶å½’æ¡£å¤šä¸ªå˜æ›´ï¼Œè‡ªåŠ¨æ£€æµ‹è·¨å˜æ›´çš„è§„èŒƒå†²çªã€‚</p>
<p><strong>å…¥é—¨</strong></p>
<p><code>/opsx:onboard</code> â€” ç”¨ä½ çš„çœŸå®ä»£ç åº“åšä¸€æ¬¡å®Œæ•´çš„å¼•å¯¼æ•™å­¦ï¼Œ11 ä¸ªé˜¶æ®µï¼Œå¤§çº¦ 15 åˆ†é’Ÿã€‚</p>
<h4 data-id="heading-11">ä¸‰ç§å…¸å‹å·¥ä½œæµ</h4>

























<table><thead><tr><th>æ¨¡å¼</th><th>åœºæ™¯</th><th>æµç¨‹</th></tr></thead><tbody><tr><td>å¿«é€ŸåŠŸèƒ½</td><td>éœ€æ±‚æ¸…æ™°</td><td><code>new â†’ ff â†’ apply â†’ verify â†’ archive</code></td></tr><tr><td>æ¢ç´¢å¼</td><td>éœ€æ±‚æ¨¡ç³Š</td><td><code>explore â†’ new â†’ continue â†’ ... â†’ apply â†’ verify â†’ archive</code></td></tr><tr><td>å¹¶è¡Œå˜æ›´</td><td>å¤šä»»åŠ¡å¹¶è¡Œ</td><td>å¤šä¸ª <code>new</code>ï¼ŒæŒ‰éœ€åˆ‡æ¢ï¼Œæœ€å <code>bulk-archive</code></td></tr></tbody></table>
<h4 data-id="heading-12">å‡ ä¸ªå€¼å¾—æ³¨æ„çš„è®¾è®¡</h4>
<p><strong>å˜æ›´éš”ç¦»</strong></p>
<p>OpenSpec æŠŠ"å½“å‰ç³»ç»ŸçŠ¶æ€"å’Œ"å˜æ›´ææ¡ˆ"æ”¾åœ¨ä¸åŒç›®å½•ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">openspec/
â”œâ”€â”€ specs/          â† ç³»ç»Ÿå½“å‰çŠ¶æ€ï¼ˆSource of Truthï¼‰
â”œâ”€â”€ schemas/        â† è‡ªå®šä¹‰äº§ç‰©å·¥ä½œæµ
â”œâ”€â”€ config.yaml     â† é¡¹ç›®é…ç½®
â””â”€â”€ changes/        â† å„ä¸ªå˜æ›´ææ¡ˆ
    â”œâ”€â”€ add-dark-mode/
    â”œâ”€â”€ fix-login-bug/
    â””â”€â”€ archive/    â† å†å²å˜æ›´
</code></pre>
<p>æ¯ä¸ªåŠŸèƒ½åœ¨ç‹¬ç«‹çš„ change ç›®å½•é‡Œå¼€å‘ï¼Œåªåœ¨ archive æ—¶æ‰åˆå¹¶åˆ°ä¸»è§„èŒƒã€‚å¤šäººå¹¶è¡Œå¼€å‘æ—¶ä¸ä¼šäº’ç›¸è¸©ã€‚Spec Kit æ²¡æœ‰è¿™å±‚éš”ç¦»ï¼Œç›´æ¥æ”¹ä¸»è§„èŒƒæ–‡ä»¶ï¼Œåä½œæ—¶å®¹æ˜“å†²çªã€‚</p>
<p><strong>Delta Spec</strong></p>
<p>å˜æ›´ä¸­çš„è§„èŒƒç”¨ <code>ADDED</code>ã€<code>MODIFIED</code>ã€<code>REMOVED</code>ã€<code>RENAMED</code> æ ‡è®°å¢é‡ï¼Œä¸æ˜¯å…¨é‡è¦†ç›–ã€‚çœ‹ä¸€çœ¼å°±çŸ¥é“è¿™æ¬¡æ”¹äº†ä»€ä¹ˆã€‚</p>
<p><strong>åŠ¨æ€æŒ‡ä»¤ï¼ˆv1.0 æ–°å¢ï¼‰</strong></p>
<p>AI æ‹¿åˆ°çš„æŒ‡ä»¤ä¸å†æ˜¯å†™æ­»çš„æ¨¡æ¿ï¼Œè€Œæ˜¯ä»ä¸‰å±‚åŠ¨æ€æ‹¼è£…ï¼šé¡¹ç›®ä¸Šä¸‹æ–‡ï¼ˆ<code>config.yaml</code>ï¼‰ã€äº§ç‰©è§„åˆ™ã€è¾“å‡ºæ¨¡æ¿ã€‚AI æ¯æ¬¡æ“ä½œå‰éƒ½ä¼šæŸ¥ CLI è·å–æœ€æ–°çŠ¶æ€ï¼Œæ‰€ä»¥æŒ‡ä»¤å§‹ç»ˆè·Ÿé¡¹ç›®å®é™…æƒ…å†µåŒæ­¥ã€‚</p>
<h4 data-id="heading-13">CLI å‘½ä»¤</h4>
<p>é™¤äº† AI åŠ©æ‰‹é‡Œçš„ slash commandsï¼Œç»ˆç«¯é‡Œä¹Ÿæœ‰ä¸€ç»„ CLI å‘½ä»¤ï¼š</p>













































<table><thead><tr><th>å‘½ä»¤</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><code>openspec init</code></td><td>åˆå§‹åŒ–é¡¹ç›®</td></tr><tr><td><code>openspec status</code></td><td>æŸ¥çœ‹äº§ç‰©å®ŒæˆçŠ¶æ€</td></tr><tr><td><code>openspec list</code></td><td>åˆ—å‡ºæ´»è·ƒå˜æ›´å’Œè§„èŒƒ</td></tr><tr><td><code>openspec show &lt;name&gt;</code></td><td>æŸ¥çœ‹å˜æ›´è¯¦æƒ…</td></tr><tr><td><code>openspec view</code></td><td>äº¤äº’å¼ä»ªè¡¨ç›˜</td></tr><tr><td><code>openspec validate</code></td><td>æ ¡éªŒè§„èŒƒæ ¼å¼</td></tr><tr><td><code>openspec archive</code></td><td>ç»ˆç«¯å½’æ¡£ï¼ˆ<code>--yes</code> è·³è¿‡ç¡®è®¤ï¼‰</td></tr><tr><td><code>openspec feedback</code></td><td>æäº¤åé¦ˆ</td></tr><tr><td><code>openspec completion install</code></td><td>å®‰è£… Shell è¡¥å…¨</td></tr></tbody></table>
<h2 data-id="heading-14">å¯¹æ¯”ï¼šæ€ä¹ˆé€‰</h2>
<h4 data-id="heading-15">æ ¸å¿ƒå·®å¼‚</h4>

































































<table><thead><tr><th>ç»´åº¦</th><th>Spec Kit</th><th>OpenSpec</th></tr></thead><tbody><tr><td>å‡ºå“æ–¹</td><td>GitHub</td><td>Fission AI</td></tr><tr><td>è¯­è¨€ / å®‰è£…</td><td>Python / <code>uv</code></td><td>TypeScript / <code>npm</code></td></tr><tr><td>Stars</td><td>28K+</td><td>22K+</td></tr><tr><td>è®¾è®¡æ€è·¯</td><td>ä¸¥æ ¼é—¨æ§ï¼Œæ­¥æ­¥å®¡æŸ¥</td><td>ä¾èµ–å›¾é©±åŠ¨ï¼Œçµæ´»è¿­ä»£</td></tr><tr><td>æ“…é•¿åœºæ™¯</td><td>æ–°é¡¹ç›®ä»é›¶å¼€å§‹ï¼ˆGreenfieldï¼‰</td><td>å·²æœ‰ä»£ç åº“å¢é‡å¼€å‘ï¼ˆBrownfieldï¼‰</td></tr><tr><td>å‘½ä»¤æ•°é‡</td><td>8 ä¸ª</td><td>10 ä¸ª</td></tr><tr><td>è§„èŒƒä½“é‡</td><td>è¾ƒé‡ï¼Œå•é˜¶æ®µå¯è¾¾ 800+ è¡Œ</td><td>è¾ƒè½»ï¼Œæ–‡æ¡£çº¦ 250 è¡Œ</td></tr><tr><td>æµç¨‹è‡ªç”±åº¦</td><td>çº¿æ€§ï¼Œä¸èƒ½è·³æ­¥</td><td>éçº¿æ€§ï¼Œéšæ—¶å¯ä»¥å›æ”¹</td></tr><tr><td>åä½œå‹å¥½åº¦</td><td>ç›´æ¥æ”¹ä¸»è§„èŒƒï¼Œå¤šäººæ˜“å†²çª</td><td>å˜æ›´éš”ç¦»ï¼Œarchive æ—¶åˆå¹¶</td></tr><tr><td>Token æ¶ˆè€—</td><td>è¾ƒé«˜</td><td>è¾ƒä½</td></tr><tr><td>å˜æ›´è¿½è¸ª</td><td>æ— å†…å»ºæœºåˆ¶</td><td>Delta Spec + å½’æ¡£å†å²</td></tr></tbody></table>
<p>å¿«é€Ÿä¸Šæ‰‹å‘½ä»¤å¯¹ç…§ï¼š</p>
<p><strong>Spec Kitï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">uv tool install specify-cli --from git+https://github.com/github/spec-kit.git
specify init my-project
<span class="hljs-comment"># åœ¨ AI åŠ©æ‰‹ä¸­ï¼š</span>
/speckit.specify â†’ /speckit.clarify â†’ /speckit.plan â†’ /speckit.tasks â†’ /speckit.implement
</code></pre>
<p><strong>OpenSpecï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">npm install -g @fission-ai/openspec
openspec init --tools claude
<span class="hljs-comment"># åœ¨ AI åŠ©æ‰‹ä¸­ï¼š</span>
/opsx:new feature-name â†’ /opsx:ff â†’ /opsx:apply â†’ /opsx:verify â†’ /opsx:archive
</code></pre>
<h4 data-id="heading-16">é€‰æ‹©å»ºè®®</h4>

































<table><thead><tr><th>åœºæ™¯</th><th>æ¨è</th></tr></thead><tbody><tr><td>æ–°é¡¹ç›®ï¼Œè¦æ±‚ä¸¥è°¨è§„èŒƒ</td><td>Spec Kit</td></tr><tr><td>å·²æœ‰ä»£ç åº“åšåŠŸèƒ½è¿­ä»£</td><td>OpenSpec</td></tr><tr><td>å¤šäººåä½œï¼Œå…³æ³¨å†²çªç®¡ç†</td><td>OpenSpec</td></tr><tr><td>åˆè§„æ€§ / å¯å®¡è®¡æ€§è¦æ±‚é«˜</td><td>Spec Kit</td></tr><tr><td>è¿½æ±‚å¼€å‘é€Ÿåº¦</td><td>OpenSpec</td></tr><tr><td>éœ€æ±‚æ¨¡ç³Šï¼Œéœ€è¦æ·±åº¦æ¶ˆæ­§</td><td>Spec Kit</td></tr></tbody></table>
<h2 data-id="heading-17">æ€»ç»“</h2>
<p>ä¸¤è€…ä¸æ˜¯éæ­¤å³å½¼ã€‚ä¸€ç§å¯è¡Œçš„ç»„åˆæ–¹å¼ï¼šæ–°é¡¹ç›®å¯åŠ¨é˜¶æ®µç”¨ Spec Kit æŠŠæ¶æ„å’Œè§„èŒƒæ•²å®šï¼Œè¿›å…¥æ—¥å¸¸è¿­ä»£ååˆ‡åˆ° OpenSpec åšå¢é‡å˜æ›´ç®¡ç†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç§»åŠ¨ç«¯H5é¡¹ç›®ï¼Œè¿˜éœ€è¦react-fastclickè§£å†³300msç‚¹å‡»å»¶è¿Ÿå—ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7604093823958302739</link>    <guid>https://juejin.cn/post/7604093823958302739</guid>    <pubDate>2026-02-09T02:57:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604093823958302739" data-draft-id="7592818202717143059" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç§»åŠ¨ç«¯H5é¡¹ç›®ï¼Œè¿˜éœ€è¦react-fastclickè§£å†³300msç‚¹å‡»å»¶è¿Ÿå—ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,React.js"/> <meta itemprop="datePublished" content="2026-02-09T02:57:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹å¤šå¤š"/> <meta itemprop="url" content="https://juejin.cn/user/747323639737191"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç§»åŠ¨ç«¯H5é¡¹ç›®ï¼Œè¿˜éœ€è¦react-fastclickè§£å†³300msç‚¹å‡»å»¶è¿Ÿå—ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/747323639737191/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹å¤šå¤š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T02:57:04.000Z" title="Mon Feb 09 2026 02:57:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="agate">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#333;color:#fff}.hljs-name,.hljs-strong{font-weight:700}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-selector-class,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#ade5fc}.hljs-bullet,.hljs-string{color:#a2fca2}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-title,.hljs-type{color:#ffa}.hljs-bullet,.hljs-number,.hljs-symbol{color:#d36363}.hljs-keyword,.hljs-literal,.hljs-selector-tag{color:#fcc28c}.hljs-code,.hljs-comment,.hljs-deletion{color:#888}.hljs-link,.hljs-regexp{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}</style><p>ä»Šå¤©æ•´ç†æ—§é¡¹ç›®çš„æ—¶å€™å‘ç°ï¼Œåœ¨ä¹‹å‰å¼€å‘Reactç§»åŠ¨ç«¯é¡¹ç›®æ—¶ï¼Œæ€»ä¼šä¹ æƒ¯æ€§å¼•å…¥<code>react-fastclick</code>æ¥å¤„ç†ç‚¹å‡»å»¶è¿Ÿé—®é¢˜ã€‚ä½†è¿™æ¬¡çš„é¡¹ç›®æ˜¯React18æ­é…Vite5çš„æŠ€æœ¯æ ˆï¼Œçªç„¶äº§ç”Ÿäº†ä¸€ä¸ªç–‘é—®ï¼šåœ¨å½“å‰çš„æŠ€æœ¯ç¯å¢ƒä¸‹ï¼Œä½¿ç”¨ç°ä»£æµè§ˆå™¨ï¼Œç§»åŠ¨ç«¯é¡¹ç›®è¿˜éœ€è¦ä¾èµ–<code>react-fastclick</code>æ¥è§£å†³<code>300msç‚¹å‡»å»¶è¿Ÿ</code>å—ï¼Ÿå¸¦ç€è¿™ä¸ªç–‘é—®ï¼Œæˆ‘æ•´ç†äº†ç›¸å…³çŸ¥è¯†ç‚¹ï¼Œå’Œå¤§å®¶ä¸€èµ·æ¢è®¨ä¸€ä¸‹ã€‚</p>
<h2 data-id="heading-0">1. 300ms å»¶è¿Ÿçš„æ¥æº</h2>
<p>è¦å¼„æ¸…æ¥šæ˜¯å¦éœ€è¦react-fastclickï¼Œé¦–å…ˆå¾—å›é¡¾ä¸€ä¸‹300msç‚¹å‡»å»¶è¿Ÿçš„ç”±æ¥ã€‚300mså»¶è¿Ÿå¹¶ä¸æ˜¯ç§»åŠ¨ç«¯æµè§ˆå™¨çš„bugï¼Œè€Œæ˜¯æ—©æœŸç§»åŠ¨æµè§ˆå™¨ï¼ˆä¸»è¦æ˜¯æ—§ç‰ˆiOS Safari / Android WebViewï¼‰ä¸ºäº†é€‚é…ç”¨æˆ·æ“ä½œè€Œè®¾è®¡çš„æœºåˆ¶ï¼š</p>
<ul>
<li>æ ¸å¿ƒåŸå› ï¼šä¸ºäº†åˆ¤æ–­ç”¨æˆ·çš„ç‚¹å‡»æ“ä½œæ˜¯å¦æ˜¯ã€ŒåŒå‡»ç¼©æ”¾ã€ï¼ˆåŒå‡»é¡µé¢å¯ä»¥æ”¾å¤§æ˜¾ç¤ºå†…å®¹ï¼Œè¿™æ˜¯æ—©æœŸç§»åŠ¨ç«¯çš„æ ¸å¿ƒäº¤äº’ä¹‹ä¸€ï¼‰ã€‚</li>
<li>å»¶è¿Ÿè¡¨ç°ï¼šæµè§ˆå™¨åœ¨æ£€æµ‹åˆ°ç”¨æˆ·çš„ä¸€æ¬¡clickäº‹ä»¶åï¼Œä¼šå¼ºåˆ¶ç­‰å¾…çº¦300msï¼Œç¡®è®¤ç”¨æˆ·æ²¡æœ‰è¿›è¡Œç¬¬äºŒæ¬¡ç‚¹å‡»åï¼Œæ‰ä¼šçœŸæ­£è§¦å‘clickäº‹ä»¶ã€‚</li>
</ul>
<p>æ­£å› ä¸ºè¿™ä¸ª300msçš„ç­‰å¾…æ—¶é—´ï¼Œå¯¼è‡´æ—©æœŸç§»åŠ¨ç«¯H5é¡µé¢çš„ç‚¹å‡»æ“ä½œæ€»ä¼šæœ‰æ˜æ˜¾çš„å»¶è¿Ÿæ„Ÿï¼Œå½±å“ç”¨æˆ·ä½“éªŒï¼Œè¿™ä¹Ÿæ˜¯FastClickç±»åº“è¯ç”Ÿçš„åŸå› â€”â€”é€šè¿‡ç»•è¿‡æµè§ˆå™¨çš„è¿™ä¸ªç­‰å¾…æœºåˆ¶ï¼Œæ¶ˆé™¤300mså»¶è¿Ÿã€‚</p>
<hr/>
<h2 data-id="heading-1">2. ç°ä»£æµè§ˆå™¨å·²é»˜è®¤ç§»é™¤ 300ms å»¶è¿Ÿ</h2>
<p>éšç€ç§»åŠ¨ç«¯æŠ€æœ¯çš„å‘å±•ï¼Œã€ŒåŒå‡»ç¼©æ”¾ã€çš„ä½¿ç”¨åœºæ™¯è¶Šæ¥è¶Šå°‘ï¼Œä¸”ç”¨æˆ·å¯¹äº¤äº’æµç•…åº¦çš„è¦æ±‚è¶Šæ¥è¶Šé«˜ï¼Œä¸»æµç§»åŠ¨ç«¯æµè§ˆå™¨æ—©å·²é»˜è®¤ç§»é™¤äº†300msç‚¹å‡»å»¶è¿Ÿï¼Œå…·ä½“æ”¯æŒæƒ…å†µå¦‚ä¸‹ï¼š</p>
<h3 data-id="heading-2">âœ… iOS ç¯å¢ƒ</h3>
<ul>
<li>iOS 9åŠä»¥ä¸Šç‰ˆæœ¬çš„Safariæµè§ˆå™¨</li>
<li>æ‰€æœ‰åŸºäºWKWebViewçš„å†…åµŒé¡µé¢ï¼ˆç›®å‰ç»å¤§å¤šæ•°iOS Appçš„å†…åµŒH5éƒ½é‡‡ç”¨WKWebViewï¼‰</li>
</ul>
<h3 data-id="heading-3">âœ… Android ç¯å¢ƒ</h3>
<ul>
<li>Chrome 32åŠä»¥ä¸Šç‰ˆæœ¬</li>
<li>Androidç³»ç»Ÿè‡ªå¸¦çš„WebViewï¼ˆAndroid 4.4åŠä»¥ä¸Šç‰ˆæœ¬åŸºæœ¬éƒ½å·²æ”¯æŒï¼‰</li>
</ul>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæµè§ˆå™¨ç§»é™¤300mså»¶è¿Ÿéœ€è¦æ»¡è¶³ä¸¤ä¸ªç®€å•æ¡ä»¶ï¼Œè€Œè¿™ä¸¤ä¸ªæ¡ä»¶åœ¨React18+Vite5é¡¹ç›®ä¸­å‡ ä¹æ˜¯é»˜è®¤é…ç½®ï¼š</p>
<h3 data-id="heading-4">æ¡ä»¶1ï¼šæ­£ç¡®è®¾ç½®viewport</h3>
<p>è¿™æ˜¯æœ€åŸºç¡€çš„æ¡ä»¶ï¼Œåªè¦åœ¨HTMLå¤´éƒ¨è®¾ç½®äº†æ­£ç¡®çš„viewportæ ‡ç­¾ï¼Œæµè§ˆå™¨å°±ä¼šè®¤ä¸ºé¡µé¢å·²é€‚é…ç§»åŠ¨ç«¯ï¼Œæ— éœ€é€šè¿‡åŒå‡»ç¼©æ”¾æ¥ä¼˜åŒ–æ˜¾ç¤ºï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;meta <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> content=<span class="hljs-string">"width=device-width, initial-scale=1"</span>&gt;
</code></pre>
<p>é‡ç‚¹è¯´æ˜ï¼šVite + Reactçš„é»˜è®¤æ¨¡æ¿ä¸­ï¼Œå·²ç»è‡ªå¸¦äº†è¿™ä¸ªviewporté…ç½®ï¼Œæ— éœ€æˆ‘ä»¬é¢å¤–æ‰‹åŠ¨æ·»åŠ ã€‚</p>
<h3 data-id="heading-5">æ¡ä»¶2ï¼šç¦æ­¢åŒå‡»ç¼©æ”¾ï¼ˆæˆ–é¡µé¢å·²å®Œå…¨é€‚é…ï¼‰</h3>
<p>å¦‚æœé¡µé¢ä¸éœ€è¦æ”¯æŒåŒå‡»ç¼©æ”¾ï¼Œåªéœ€åœ¨viewportæ ‡ç­¾ä¸­æ·»åŠ ç›¸å…³é…ç½®ï¼Œå³å¯å½»åº•æœç»æµè§ˆå™¨çš„åŒå‡»ç¼©æ”¾åˆ¤æ–­ï¼Œè¿›ä¸€æ­¥ç¡®ä¿æ— å»¶è¿Ÿï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;meta
  <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span>
  <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1, user-scalable=no"</span>
/&gt;
</code></pre>
<p>æˆ–é€šè¿‡é™åˆ¶æœ€å¤§ç¼©æ”¾æ¯”ä¾‹æ¥å®ç°ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;meta
  <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span>
  <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1, maximum-scale=1"</span>
/&gt;
</code></pre>
<p>å®é™…ä¸Šï¼Œç°åœ¨å¤§å¤šæ•°ç§»åŠ¨ç«¯H5é¡¹ç›®éƒ½ä¼šæ·»åŠ ä¸Šè¿°é…ç½®ï¼Œä¸€æ–¹é¢æ˜¯ä¸ºäº†ä¿è¯é¡µé¢é€‚é…ä¸€è‡´æ€§ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿé—´æ¥æ¶ˆé™¤äº†300mså»¶è¿Ÿçš„å¯èƒ½ã€‚</p>
<hr/>
<h2 data-id="heading-6">3. FastClick / react-fastclick å·²è¿‡æ—¶</h2>
<p>æ—¢ç„¶ç°ä»£æµè§ˆå™¨å·²ç»é»˜è®¤ç§»é™¤äº†300mså»¶è¿Ÿï¼Œé‚£ä¹ˆFastClickåŠå…¶Reactå°è£…ç‰ˆreact-fastclickï¼Œä¸ä»…ä¸å†å¿…è¦ï¼Œåè€Œå¯èƒ½æˆä¸ºé¡¹ç›®çš„è´Ÿæ‹…ã€‚</p>
<h3 data-id="heading-7">å®˜æ–¹æ€åº¦ï¼šé¡¹ç›®å·²åœæ­¢ç»´æŠ¤</h3>
<p>FastClickçš„ä½œè€…æ—©åœ¨2016å¹´åå°±æ˜ç¡®è¡¨ç¤ºï¼šã€ŒModern browsers donâ€™t have 300ms delay anymore.ã€ï¼ˆç°ä»£æµè§ˆå™¨å·²ä¸å†æœ‰300mså»¶è¿Ÿï¼‰ã€‚æ­¤åï¼ŒFastClické¡¹ç›®åŸºæœ¬åœæ­¢ç»´æŠ¤ï¼Œä¸å†é€‚é…æ–°çš„æµè§ˆå™¨ç‰ˆæœ¬å’Œå‰ç«¯æŠ€æœ¯æ ˆã€‚</p>
<h3 data-id="heading-8">React 18 é¡¹ç›®ä¸­çš„æ½œåœ¨é—®é¢˜</h3>
<p>åœ¨React 18é¡¹ç›®ä¸­å¼ºè¡Œå¼•å…¥react-fastclickï¼Œä¸ä»…æ— æ³•å¸¦æ¥æ”¶ç›Šï¼Œè¿˜å¯èƒ½å¼•å‘ä¸€ç³»åˆ—å…¼å®¹æ€§é—®é¢˜ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<ul>
<li>âŒ äº‹ä»¶é‡å¤è§¦å‘ï¼šreact-fastclickçš„å®ç°æœºåˆ¶ä¸React 18çš„åˆæˆäº‹ä»¶ä½“ç³»å­˜åœ¨å†²çªï¼Œå¯èƒ½å¯¼è‡´ç‚¹å‡»äº‹ä»¶è¢«è§¦å‘ä¸¤æ¬¡ï¼ˆæ¯”å¦‚ä¸€æ¬¡ç”±react-fastclickè§¦å‘ï¼Œä¸€æ¬¡ç”±æµè§ˆå™¨åŸç”Ÿè§¦å‘ï¼‰ã€‚</li>
<li>âŒ ä¸Pointer Eventsä¸å…¼å®¹ï¼šReact 18å·²å…¨é¢æ”¯æŒPointer Eventsï¼ˆç»Ÿä¸€å¤„ç†é¼ æ ‡ã€è§¦æ‘¸ã€ç¬”ç­‰è¾“å…¥äº‹ä»¶ï¼‰ï¼Œè€Œreact-fastclickæœªé€‚é…è¯¥ç‰¹æ€§ï¼Œå¯èƒ½å¯¼è‡´äº‹ä»¶ç›‘å¬å¼‚å¸¸ã€‚</li>
<li>âŒ iOSå¶å‘ç‚¹å‡»ç©¿é€ï¼šåœ¨éƒ¨åˆ†iOSè®¾å¤‡ä¸Šï¼Œreact-fastclickå¯èƒ½å¯¼è‡´ç‚¹å‡»ç©¿é€é—®é¢˜ï¼ˆç‚¹å‡»ä¸Šå±‚å…ƒç´ ï¼Œå´è§¦å‘äº†ä¸‹å±‚å…ƒç´ çš„ç‚¹å‡»äº‹ä»¶ï¼‰ï¼Œå½±å“äº¤äº’ä½“éªŒã€‚</li>
</ul>
<p>ç»¼åˆæ¥çœ‹ï¼Œåœ¨React 18+Vite5é¡¹ç›®ä¸­ä½¿ç”¨react-fastclickï¼Œå®Œå…¨æ˜¯ã€Œé£é™©å¤§äºæ”¶ç›Šã€çš„æ“ä½œã€‚</p>
<hr/>
<h2 data-id="heading-9">4. ç°ä»£è§£å†³æ–¹æ¡ˆ</h2>
<p>è™½ç„¶å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåªè¦ä¿è¯viewporté…ç½®æ­£ç¡®ï¼Œå°±ä¸ä¼šæœ‰300mså»¶è¿Ÿï¼Œä½†å¦‚æœä½ çš„é¡¹ç›®éœ€è¦é€‚é…ä¸€äº›ç‰¹æ®Šç¯å¢ƒï¼ˆæ¯”å¦‚è€æ—§WebViewã€å°ä¼—å›½äº§æµè§ˆå™¨ï¼‰ï¼Œæˆ–è€…ç¡®å®æ„Ÿå—åˆ°äº†ç‚¹å‡»å»¶è¿Ÿï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹ç°ä»£è§£å†³æ–¹æ¡ˆï¼Œæ¯”react-fastclickæ›´å®‰å…¨ã€æ›´é«˜æ•ˆã€‚</p>
<h3 data-id="heading-10">âœ… 4.1. ä½¿ç”¨ touch / pointer äº‹ä»¶</h3>
<p>React 18å·²å…¨é¢æ”¯æŒPointer Eventsï¼Œè¯¥äº‹ä»¶çš„ä¼˜å…ˆçº§é«˜äºåŸç”Ÿclickäº‹ä»¶ï¼Œæ— éœ€ç­‰å¾…300msï¼Œå¯å®ç°é›¶å»¶è¿Ÿç‚¹å‡»ã€‚ä½¿ç”¨æ–¹å¼éå¸¸ç®€å•ï¼Œåªéœ€å°†onClickæ›¿æ¢ä¸ºonPointerDownæˆ–onPointerUpå³å¯ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onPointerDown</span>=<span class="hljs-string">{handleClick}</span>&gt;</span>ç‚¹å‡»æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<p>æ³¨æ„ï¼šä¼˜å…ˆä½¿ç”¨onPointerDownï¼ˆè§¦æ‘¸å¼€å§‹æ—¶è§¦å‘ï¼‰ï¼Œå“åº”é€Ÿåº¦æœ€å¿«ï¼›å¦‚æœéœ€è¦é¿å…â€œè¯¯è§¦â€ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨onPointerUpï¼ˆè§¦æ‘¸ç»“æŸæ—¶è§¦å‘ï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-11">âœ… 4.2. ä½¿ç”¨ CSS touch-actionï¼ˆæ¨èï¼‰</h3>
<p>è¿™æ˜¯æœ€æ¨èçš„è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡CSSçš„touch-actionå±æ€§ï¼Œç›´æ¥å‘Šè¯‰æµè§ˆå™¨è¯¥å…ƒç´ çš„è§¦æ‘¸è¡Œä¸ºï¼Œç¦æ­¢ä¸å¿…è¦çš„æ‰‹åŠ¿åˆ¤æ–­ï¼Œä»è€Œæ¶ˆé™¤å»¶è¿Ÿã€‚</p>
<p>é’ˆå¯¹å¯ç‚¹å‡»å…ƒç´ ï¼ˆå¦‚æŒ‰é’®ã€é“¾æ¥ï¼‰ï¼Œæ·»åŠ å¦‚ä¸‹CSSï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">button</span> {
  touch-action: manipulation;
}
</code></pre>
<p>touch-action: manipulationçš„ä½œç”¨ï¼š</p>
<ul>
<li>ç¦æ­¢åŒå‡»ç¼©æ”¾ã€åŒæŒ‡ç¼©æ”¾ç­‰æ‰‹åŠ¿æ“ä½œï¼›</li>
<li>å‘Šè¯‰æµè§ˆå™¨è¯¥å…ƒç´ ä»…ç”¨äºç‚¹å‡»äº¤äº’ï¼Œæ— éœ€ç­‰å¾…300msåˆ¤æ–­æ‰‹åŠ¿ï¼Œç›´æ¥æ´¾å‘clickäº‹ä»¶ã€‚</li>
</ul>
<p>å¦‚æœé¡¹ç›®ä¸­å¯ç‚¹å‡»å…ƒç´ è¾ƒå¤šï¼Œä¹Ÿå¯ä»¥å…¨å±€è®¾ç½®ï¼ˆä»…å¯¹å¯ç‚¹å‡»å…ƒç´ ç”Ÿæ•ˆï¼Œä¸å½±å“é¡µé¢æ»šåŠ¨ï¼‰ï¼š</p>
<pre><code class="hljs language-css" lang="css">* {
  touch-action: manipulation;
}
</code></pre>
<hr/>
<h3 data-id="heading-12">âœ… 4.3. é¿å… 300ms çš„é”™è¯¯å§¿åŠ¿</h3>
<p>é™¤äº†ä¸Šè¿°æ–¹æ¡ˆï¼Œè¿˜è¦æ³¨æ„é¿å…ä¸€äº›å¯èƒ½é—´æ¥å¯¼è‡´ç‚¹å‡»å»¶è¿Ÿçš„é”™è¯¯å†™æ³•ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">// âŒ é”™è¯¯ï¼šåŒæ—¶ä½¿ç”¨onTouchStartå’ŒonClick
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onTouchStart</span>=<span class="hljs-string">{handleClick}</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>&gt;</span>ç‚¹å‡»æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<p>è¿™ç§å†™æ³•ä¼šå¯¼è‡´è§¦æ‘¸æ—¶è§¦å‘ä¸€æ¬¡handleClickï¼Œ300msåï¼ˆå¦‚æœæµè§ˆå™¨æœ‰å»¶è¿Ÿï¼‰åˆè§¦å‘ä¸€æ¬¡onClickï¼Œä¸ä»…ä¼šå‡ºç°â€œå»¶è¿Ÿæ„Ÿâ€ï¼Œè¿˜å¯èƒ½å¯¼è‡´é€»è¾‘å¼‚å¸¸ï¼ŒåŠ¡å¿…é¿å…ã€‚</p>
<hr/>
<h2 data-id="heading-13">5. æœ€ç»ˆç»“è®ºä¸å¯ç›´æ¥ä½¿ç”¨çš„æ¨¡æ¿</h2>
<p>å¯¹äº React 18 + Vite 5 çš„ç§»åŠ¨ç«¯é¡¹ç›®ï¼š</p>
<ul>
<li>âœ… ä¸éœ€è¦å¼•å…¥ react-fastclick</li>
<li>âŒ ä¸æ¨èä½¿ç”¨ä»»ä½•ç‰ˆæœ¬çš„ fastclick</li>
<li>âœ… åªè¦ä¿è¯ viewport é…ç½®æ­£ç¡®ï¼Œå°±èƒ½æ¶ˆé™¤ç»å¤§å¤šæ•°åœºæ™¯çš„300mså»¶è¿Ÿ</li>
<li>âœ… ä¼˜åŒ–CSSçš„touch-actioné…ç½®ï¼Œå¯å…¼å®¹æ‰€æœ‰æç«¯ç¯å¢ƒ</li>
</ul>
<h3 data-id="heading-14">å½“å‰é…ç½®è¾¾æ ‡æƒ…å†µï¼ˆå‚è€ƒï¼‰</h3>





























<table><thead><tr><th>é¡¹ç›®</th><th>æ˜¯å¦è¾¾æ ‡</th></tr></thead><tbody><tr><td>viewporté…ç½®</td><td>âœ…ï¼ˆViteé»˜è®¤é…ç½®ï¼‰</td></tr><tr><td>ç¦æ­¢ç¼©æ”¾</td><td>âœ…ï¼ˆæ·»åŠ max-scale=1æˆ–user-scalable=noå³å¯ï¼‰</td></tr><tr><td>clickå»¶è¿Ÿ</td><td>åŸºæœ¬æ— ï¼ˆä¸»æµæµè§ˆå™¨ï¼‰</td></tr><tr><td>å…¼å®¹æ€§</td><td>âš ï¸ ä¸­ç­‰ï¼ˆéœ€ä¼˜åŒ–touch-actioné…ç½®ï¼‰</td></tr><tr><td>æç«¯ç¯å¢ƒ</td><td>å¯èƒ½æ®‹ç•™ï¼ˆä¼˜åŒ–åå¯è§£å†³ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-15">æ¨èæœ€ç»ˆæ¨¡æ¿ï¼ˆå¯ç›´æ¥å¤åˆ¶ä½¿ç”¨ï¼‰</h3>
<p>æ•´åˆæ‰€æœ‰æœ€ä½³å®è·µï¼Œæä¾›å¯ç›´æ¥å¥—ç”¨çš„HTMLå’ŒCSSæ¨¡æ¿ï¼Œç¡®ä¿é¡¹ç›®æ— ç‚¹å‡»å»¶è¿Ÿã€å…¼å®¹æ€§æ‹‰æ»¡ï¼š</p>
<h3 data-id="heading-16">5.1. HTML viewport é…ç½®</h3>
<pre><code class="hljs language-ini" lang="ini">&lt;meta
  <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span>
  <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width,
           initial-scale=1,
           maximum-scale=1,
           user-scalable=no,
           viewport-fit=cover"</span>
/&gt;
</code></pre>
<p>è¯´æ˜ï¼šviewport-fit=coverç”¨äºé€‚é…iPhoneåˆ˜æµ·å±ï¼Œé¿å…é¡µé¢è¢«åˆ˜æµ·é®æŒ¡ï¼Œä¸å½±å“ç‚¹å‡»å»¶è¿Ÿã€‚</p>
<h3 data-id="heading-17">5.2. CSS é…ç½®</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">html</span>,
<span class="hljs-selector-tag">body</span> {
  -webkit-user-drag: none;
  touch-action: pan-y;
}

<span class="hljs-selector-tag">button</span>,
<span class="hljs-selector-tag">a</span>,
<span class="hljs-selector-attr">[role=<span class="hljs-string">'button'</span>]</span> {
  touch-action: manipulation;
}
</code></pre>
<hr/>
<h2 data-id="heading-18">6. æ€»ç»“</h2>
<p>å›åˆ°æœ€åˆçš„ç–‘é—®ï¼šReact18+Vite5ç§»åŠ¨ç«¯é¡¹ç›®ï¼Œè¿˜éœ€è¦react-fastclickå—ï¼Ÿç­”æ¡ˆå¾ˆæ˜ç¡®â€”â€”ä¸éœ€è¦ã€‚</p>
<p>ç°ä»£æµè§ˆå™¨æ—©å·²è§£å†³äº†300msç‚¹å‡»å»¶è¿Ÿçš„é—®é¢˜ï¼Œè€ŒReact18+Vite5çš„é»˜è®¤é…ç½®ï¼ˆæ­£ç¡®çš„viewportï¼‰å·²ç»æ»¡è¶³äº†æµè§ˆå™¨æ¶ˆé™¤å»¶è¿Ÿçš„æ¡ä»¶ã€‚react-fastclickä½œä¸ºè¿‡æ—¶çš„ç±»åº“ï¼Œä¸ä»…å¤šä½™ï¼Œè¿˜å¯èƒ½å¼•å‘å…¼å®¹æ€§é—®é¢˜ã€‚</p>
<p>æˆ‘ä»¬åªéœ€è¦åšå¥½ä¸¤ä»¶äº‹ï¼šä¸€æ˜¯ä¿è¯viewporté…ç½®æ­£ç¡®ï¼ŒäºŒæ˜¯ä¼˜åŒ–CSSçš„touch-actionå±æ€§ï¼Œå°±èƒ½è½»æ¾å®ç°é›¶å»¶è¿Ÿçš„ç§»åŠ¨ç«¯ç‚¹å‡»äº¤äº’ã€‚å¦‚æœé‡åˆ°æç«¯ç¯å¢ƒçš„å»¶è¿Ÿé—®é¢˜ï¼Œå†è¾…ä»¥Pointer Eventsï¼Œå°±èƒ½å®Œç¾è§£å†³æ‰€æœ‰åœºæ™¯ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ•´ç†èƒ½å¸®åˆ°æœ‰åŒæ ·ç–‘é—®çš„åŒå­¦ï¼Œé¿å…åœ¨æ–°é¡¹ç›®ä¸­å¼•å…¥ä¸å¿…è¦çš„ä¾èµ–ï¼Œè®©é¡¹ç›®æ›´è½»é‡ã€æ›´ç¨³å®šã€‚</p>
<blockquote>
<p>æœ¬æ¬¡åˆ†äº«å°±åˆ°è¿™å„¿å•¦ï¼Œæˆ‘æ˜¯é¹å¤šå¤šï¼Œæ·±è€•å‰ç«¯çš„æŠ€æœ¯åˆ›ä½œè€…ï¼Œå¦‚æœæ‚¨çœ‹äº†è§‰å¾—æœ‰å¸®åŠ©ï¼Œæ¬¢è¿è¯„è®ºï¼Œå…³æ³¨ï¼Œç‚¹èµï¼Œè½¬å‘ï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§~</p>
</blockquote>
<p>PSï¼šåœ¨æœ¬é¡µæŒ‰F12ï¼Œåœ¨consoleä¸­è¾“å…¥document.getElementsByClassName('panel-btn')[0].click();æœ‰æƒŠå–œå“¦~</p>
<p><code>å¾€æœŸæ–‡ç« </code></p>
<ul>
<li><a href="https://juejin.cn/post/7568192652286754870" target="_blank" title="https://juejin.cn/post/7568192652286754870">çº¯å‰ç«¯æå–å›¾ç‰‡é¢œè‰²æ’ä»¶Color-Thiefæ•™å­¦+å®æˆ˜å®Œæ•´æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7565737512816771135" target="_blank" title="https://juejin.cn/post/7565737512816771135">react-konvaå®æˆ˜æŒ‡å—ï¼šCanvasé«˜æ€§èƒ½+æ˜“ç»´æŠ¤çš„ç»„ä»¶åŒ–å›¾å½¢å¼€å‘å®ç°æ•™ç¨‹</a></li>
<li><a href="https://juejin.cn/post/7560905838074462271" target="_blank" title="https://juejin.cn/post/7560905838074462271">Reactæ— é™æ»šåŠ¨æ’ä»¶react-infinite-scroll-componentçš„é…ç½®+ä¼˜åŒ–+é¿å‘æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7560542615484137491" target="_blank" title="https://juejin.cn/post/7560542615484137491">å‰ç«¯éŸ³é¢‘å…¼å®¹è§£å†³ï¼šéŸ³é¢‘ç¥å™¨howler.jsä»åŸºç¡€åˆ°è¿›é˜¶å®Œæ•´ä½¿ç”¨æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7559871680015024169" target="_blank" title="https://juejin.cn/post/7559871680015024169">ä½¿ç”¨React-OAuthè¿›è¡ŒGoogle/GitHubç™»å½•çš„æ•™ç¨‹å’Œæ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7550585427834404927" target="_blank" title="https://juejin.cn/post/7550585427834404927">çº¯å‰ç«¯äººè„¸è¯†åˆ«åˆ©å™¨ï¼šface-api.jsæ‰‹æŠŠæ‰‹æ·±å…¥è§£ææ•™å­¦</a></li>
<li><a href="https://juejin.cn/post/7553865490732433462" target="_blank" title="https://juejin.cn/post/7553865490732433462">å…³äºReactçˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶æ–¹æ³•forwardRefçš„è¯¦è§£å’Œæ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7553484874609410074" target="_blank" title="https://juejin.cn/post/7553484874609410074">Reactè·¨ç»„ä»¶æ•°æ®å…±äº«useContextè¯¦è§£å’Œæ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7545087762837815334" target="_blank" title="https://juejin.cn/post/7545087762837815334">Webå›¾åƒç¼–è¾‘ç¥å™¨tui.image-editorä»åŸºç¡€åˆ°è¿›é˜¶çš„å®æˆ˜æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7544323659788288046" target="_blank" title="https://juejin.cn/post/7544323659788288046">å¼€å‘ä¸ªäººå¾®ä¿¡å°ç¨‹åºç±»ç›®é€‰æ‹©/ç›ˆåˆ©æ–¹å¼/æˆæœ¬æ§åˆ¶ä¸æœåŠ¡å™¨æ¥å…¥æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7541741121400864778" target="_blank" title="https://juejin.cn/post/7541741121400864778">å‰ç«¯å›¾ç‰‡è£å‰ªCropper.jsæ ¸å¿ƒåŠŸèƒ½ä¸å®æˆ˜æŠ€å·§è¯¦è§£</a></li>
<li><a href="https://juejin.cn/post/7536530451461472265" target="_blank" title="https://juejin.cn/post/7536530451461472265">ç¼–è¾‘å™¨ä¹Ÿæœ‰é‚ªä¿®ï¼Ÿç›˜ç‚¹VS Codeé‚ªé—¨/æœ‰è¶£çš„æ‰©å±•</a></li>
<li><a href="https://juejin.cn/post/7535005018257981466" target="_blank" title="https://juejin.cn/post/7535005018257981466">jsä½¿ç”¨IntersectionObserverå®ç°ç›®æ ‡å…ƒç´ å¯è§åº¦çš„äº¤äº’</a></li>
<li><a href="https://juejin.cn/post/7534547200330121225" target="_blank" title="https://juejin.cn/post/7534547200330121225">Webå‰ç«¯é¡µé¢å¼€å‘é˜¿æ‹‰ä¼¯è¯­ç§é€‚é…æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7516122409948020736" target="_blank" title="https://juejin.cn/post/7516122409948020736">è®©ç½‘é¡µæ‹¥æœ‰Appä½“éªŒï¼ŸPWA å°†ç½‘é¡µå˜ä¸ºæ¡Œé¢åº”ç”¨çš„ä¿å§†çº§æ•™ç¨‹PWA</a></li>
<li><a href="https://juejin.cn/post/6953803916484018206" target="_blank" title="https://juejin.cn/post/6953803916484018206">ä½¿ç”¨nvmç®¡ç†node.jsç‰ˆæœ¬ä»¥åŠæ›´æ¢npmæ·˜å®é•œåƒæº</a></li>
<li><a href="https://juejin.cn/post/7140443283209060383" target="_blank" title="https://juejin.cn/post/7140443283209060383">æ‰‹æŠŠæ‰‹æ•™ä½ æ­å»ºè§„èŒƒçš„å›¢é˜Ÿvueé¡¹ç›®ï¼ŒåŒ…å«commitlintï¼Œeslintï¼Œprettierï¼Œhuskyï¼Œcommitizenç­‰ç­‰</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[shadcn/uiï¼Œç»™ä½ ä¸€ä¸ªçœŸæ­£å¯æ§çš„UIç»„ä»¶åº“]]></title>    <link>https://juejin.cn/post/7604093823959285779</link>    <guid>https://juejin.cn/post/7604093823959285779</guid>    <pubDate>2026-02-09T07:49:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604093823959285779" data-draft-id="7604433863725203510" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="shadcn/uiï¼Œç»™ä½ ä¸€ä¸ªçœŸæ­£å¯æ§çš„UIç»„ä»¶åº“"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-09T07:49:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜_June"/> <meta itemprop="url" content="https://juejin.cn/user/395479916219517"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            shadcn/uiï¼Œç»™ä½ ä¸€ä¸ªçœŸæ­£å¯æ§çš„UIç»„ä»¶åº“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/395479916219517/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜_June
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T07:49:45.000Z" title="Mon Feb 09 2026 07:49:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å½“â€œä»£ç æ‰€æœ‰æƒâ€æˆä¸ºä¸€ç§å¥¢ä¾ˆï¼Œshadcn/ui å´æŠŠæ¯ä¸€è¡Œç»„ä»¶æºç éƒ½äº¤åˆ°ä½ æ‰‹ä¸­ã€‚</p>
</blockquote>
<p>ä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼šè®¾è®¡å¸ˆæ‹¿ç€ç•Œé¢ç¨¿è¯´ï¼šâ€œè¿™ä¸ªæŒ‰é’®ï¼Œåœ†è§’å†å¤§ç‚¹ï¼Œé˜´å½±å†æŸ”å’Œç‚¹ã€‚â€ä½ ç‚¹å¤´ç­”åº”ï¼Œå›å¤´é¢å¯¹ä»£ç ï¼Œå´è¦ç¿»æ–‡æ¡£ã€æŸ¥æ–¹æ¡ˆã€å°å¿ƒç¿¼ç¿¼åœ°å†™è¦†ç›–æ ·å¼ï¼Œåªä¸ºæ”¹ä¸€ä¸ªæŒ‰é’®çš„å¤–è§‚ã€‚</p>
<p>ç›´åˆ° <strong>shadcn/ui</strong> å‡ºç°ï¼Œè¿™ä¸€åˆ‡å˜äº†ã€‚è¿™ä¸ªä¸ç”¨ <code>npm install</code>ï¼Œå´è®©æ— æ•° React å¼€å‘è€…ç€è¿·çš„é¡¹ç›®ï¼Œæ­£åœ¨ç”¨å…¨æ–°çš„æ–¹å¼å®šä¹‰æˆ‘ä»¬å†™ç•Œé¢çš„ä½“éªŒã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ç‹¬ç‰¹å“²å­¦ï¼šæŠŠæºç äº¤ç»™ä½ ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªâ€œé»‘ç®±â€</h2>
<p><strong>ä¼ ç»ŸUIåº“</strong>ï¼ˆå¦‚Ant Designã€MUIï¼‰çš„è¿ä½œæ–¹å¼åƒä¸€ä¸ªâ€œé»‘ç®±â€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½ å®‰è£…çš„æ˜¯ä¸€ä¸ªå‹ç¼©çš„åŒ…</span>
npm install @mui/material

<span class="hljs-comment">// ä½¿ç”¨å®ƒï¼Œä½†æ— æ³•è½»æ˜“ä¿®æ”¹å®ƒ</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@mui/material'</span>;
</code></pre>
<p><strong>shadcn/ui</strong> åˆ™é‡‡ç”¨äº†ä¸€ç§é©å‘½æ€§çš„æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸æ˜¯å®‰è£…åŒ…ï¼Œè€Œæ˜¯å¤åˆ¶æºç </span>
npx shadcn-ui@latest add button

<span class="hljs-comment"># ç»“æœï¼šå®Œæ•´çš„button.tsxæ–‡ä»¶å‡ºç°åœ¨ä½ çš„é¡¹ç›®ä¸­</span>
<span class="hljs-comment"># src/components/ui/button.tsx</span>
</code></pre>
<p><strong>è¿™ç§å·®å¼‚æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</strong> å½“ç»„ä»¶ä»£ç å°±åœ¨ä½ çš„<code>components/ui</code>ç›®å½•ä¸‹æ—¶ï¼Œä½ å¯ä»¥ï¼š</p>
<ul>
<li><strong>ç›´æ¥ä¿®æ”¹ä»»ä½•æ ·å¼ç»†èŠ‚</strong></li>
<li><strong>è°ƒæ•´ç»„ä»¶çš„å†…éƒ¨é€»è¾‘</strong></li>
<li><strong>æŸ¥çœ‹å®Œæ•´çš„å®ç°ï¼Œæ²¡æœ‰éšè—çš„â€œé­”æ³•â€</strong></li>
<li><strong>æ‹¥æœ‰100%çš„ä»£ç æ‰€æœ‰æƒ</strong></li>
</ul>
<h2 data-id="heading-1">äºŒã€æ ¸å¿ƒä¼˜åŠ¿ï¼šä¸ºä»€ä¹ˆå¼€å‘è€…çˆ±ä¸é‡Šæ‰‹ï¼Ÿ</h2>
<h3 data-id="heading-2">1. æè‡´çš„å®šåˆ¶è‡ªç”±</h3>
<p>æƒ³è±¡ä¸€ä¸‹ï¼šäº§å“ç»ç†è¦æ±‚æŠŠæŒ‰é’®çš„æ‚¬åœæ•ˆæœæ”¹æˆæ¸å˜è‰²ã€‚ä¼ ç»Ÿæ–¹å¼å¯èƒ½éœ€è¦æŸ¥æ‰¾ä¸»é¢˜è¦†ç›–æ–‡æ¡£ã€ç¼–å†™è‡ªå®šä¹‰CSSã€æ‹…å¿ƒæ ·å¼å†²çªã€‚è€Œ<strong>ä½¿ç”¨shadcn/uiï¼Œä½ åªéœ€è¦ï¼š</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç›´æ¥æ‰“å¼€ button.tsx ä¿®æ”¹</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Button</span> = <span class="hljs-title class_">React</span>.<span class="hljs-property">forwardRef</span>&lt;<span class="hljs-title class_">HTMLButtonElement</span>, <span class="hljs-title class_">ButtonProps</span>&gt;(
  <span class="hljs-function">(<span class="hljs-params">{ className, variant = <span class="hljs-string">"default"</span>, size = <span class="hljs-string">"default"</span>, ...props }, ref</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">className</span>=<span class="hljs-string">{cn(</span>
          <span class="hljs-attr">buttonVariants</span>({ <span class="hljs-attr">variant</span>, <span class="hljs-attr">size</span>, <span class="hljs-attr">className</span> }),
          // <span class="hljs-attr">ç›´æ¥åœ¨è¿™é‡Œæ·»åŠ ä½ çš„æ¸å˜æ•ˆæœ</span>
          "<span class="hljs-attr">hover:bg-gradient-to-r</span> <span class="hljs-attr">hover:from-blue-500</span> <span class="hljs-attr">hover:to-purple-600</span>"
        )}
        <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span>
        {<span class="hljs-attr">...props</span>}
      /&gt;</span></span>
    )
  }
)
</code></pre>
<h3 data-id="heading-3">2. AIç¼–ç¨‹çš„æœ€ä½³æ­æ¡£</h3>
<p>åœ¨AIç¼–ç åŠ©æ‰‹æ™®åŠçš„ä»Šå¤©ï¼Œshadcn/uiçš„è®¾è®¡ç†å¿µæ˜¾å¾—å°¤ä¸ºå‰ç»ï¼š</p>
<ul>
<li><strong>ä¼ ç»Ÿç»„ä»¶åº“çš„é—®é¢˜</strong>ï¼šAIæ— æ³•â€œçœ‹åˆ°â€<code>node_modules</code>ä¸­çš„ç»„ä»¶å®ç°ï¼Œåªèƒ½åŸºäºæœ‰é™çš„æ–‡æ¡£ç»™å‡ºå»ºè®®ã€‚</li>
<li><strong>shadcn/uiçš„ä¼˜åŠ¿</strong>ï¼šAIå¯ä»¥<strong>ç›´æ¥é˜…è¯»ã€ç†è§£å’Œä¿®æ”¹</strong>ä½ é¡¹ç›®ä¸­çš„ç»„ä»¶æºç ã€‚ä½ å¯ä»¥ç›´æ¥è¯´ï¼šâ€œå¸®æˆ‘æŠŠè¿™ä¸ªå¯¹è¯æ¡†çš„åŠ¨ç”»æ—¶é—´ä»300msæ”¹ä¸º200msâ€ï¼ŒAIä¼šç²¾å‡†åœ°æ‰¾åˆ°å¹¶ä¿®æ”¹å¯¹åº”çš„ä»£ç è¡Œã€‚</li>
</ul>
<h3 data-id="heading-4">3. æŒ‰éœ€å¼•å…¥ï¼Œæè‡´è½»é‡</h3>
<p>ä¼ ç»ŸUIåº“å¸¸å¸¸æœ‰â€œå…¨é‡å¼•å…¥â€çš„é—®é¢˜ï¼Œå³ä½¿ä½ åªç”¨äº†ä¸€ä¸ªæŒ‰é’®ï¼Œä¹Ÿå¯èƒ½æ‰“åŒ…è¿›æ•´ä¸ªåº“çš„åŸºç¡€æ ·å¼ã€‚</p>
<p><strong>shadcn/uiçš„è§£å†³æ–¹æ¡ˆ</strong>ï¼šåªæ·»åŠ ä½ çœŸæ­£éœ€è¦çš„ç»„ä»¶ã€‚æ¯ä¸ªç»„ä»¶éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ²¡æœ‰éšè—çš„ä¾èµ–ã€‚</p>

























<table><thead><tr><th align="left">ç»„ä»¶</th><th align="left">æ–‡ä»¶å¤§å°</th><th align="left">ä¾èµ–å…³ç³»</th></tr></thead><tbody><tr><td align="left">Button</td><td align="left">~5KB</td><td align="left">é›¶è¿è¡Œæ—¶ä¾èµ–</td></tr><tr><td align="left">Dialog</td><td align="left">~8KB</td><td align="left">ä»…ä¾èµ–Radix UI</td></tr><tr><td align="left">Data Table</td><td align="left">~15KB</td><td align="left">ä¾èµ–TanStack Table</td></tr></tbody></table>
<h2 data-id="heading-5">ä¸‰ã€æŠ€æœ¯æ¶æ„ï¼šç°ä»£å‰ç«¯æŠ€æœ¯æ ˆçš„é›†å¤§æˆè€…</h2>
<ul>
<li><strong>åŸºäº Radix UI çš„æ— éšœç¢åŸºç¡€</strong>ï¼šæ‰€æœ‰äº¤äº’ç»„ä»¶ï¼ˆå¦‚å¯¹è¯æ¡†ã€ä¸‹æ‹‰èœå•ï¼‰éƒ½åŸºäº Radix UI æ„å»ºï¼Œæä¾›å¼€ç®±å³ç”¨çš„é”®ç›˜å¯¼èˆªã€å®Œæ•´çš„å±å¹•é˜…è¯»å™¨å…¼å®¹æ€§ï¼Œå¹¶éµå¾ªWAI-ARIAæ ‡å‡†ã€‚</li>
<li><strong>æ·±åº¦é›†æˆ Tailwind CSS</strong>ï¼šæ ·å¼ç³»ç»Ÿå®Œå…¨åŸºäºTailwind CSSï¼Œä¿è¯äº†è®¾è®¡çš„ä¸€è‡´æ€§ã€å¯ç»´æŠ¤æ€§ï¼Œå¹¶æå‡äº†å¼€å‘æ•ˆç‡ã€‚</li>
<li><strong>TypeScript ä¼˜å…ˆ</strong>ï¼šæ‰€æœ‰ç»„ä»¶éƒ½ä½¿ç”¨TypeScriptç¼–å†™ï¼Œæä¾›å®Œæ•´çš„ç±»å‹å®‰å…¨ã€æ™ºèƒ½çš„IDEè‡ªåŠ¨è¡¥å…¨å’Œè‡ªæ–‡æ¡£åŒ–çš„Propsæ¥å£ã€‚</li>
</ul>
<h2 data-id="heading-6">å››ã€å®æˆ˜æŒ‡å—ï¼šäº”åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹</h2>
<h3 data-id="heading-7">ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºé¡¹ç›®</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨Next.jsï¼ˆæ¨èï¼‰</span>
npx create-next-app@latest my-app --typescript --tailwind --app
<span class="hljs-built_in">cd</span> my-app
</code></pre>
<h3 data-id="heading-8">ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ– shadcn/ui</h3>
<pre><code class="hljs language-bash" lang="bash">npx shadcn-ui@latest init
</code></pre>
<p>CLIä¼šå¼•å¯¼ä½ å®Œæˆé…ç½®ï¼šé€‰æ‹©æ ·å¼ç³»ç»Ÿã€é…ç½®ä¸»é¢˜é¢œè‰²ã€è®¾ç½®ç»„ä»¶ç›®å½•ä½ç½®ã€‚</p>
<h3 data-id="heading-9">ç¬¬ä¸‰æ­¥ï¼šæ·»åŠ ä½ çš„ç¬¬ä¸€ä¸ªç»„ä»¶</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ·»åŠ ä¸€ä¸ªæŒ‰é’®</span>
npx shadcn-ui@latest add button
<span class="hljs-comment"># æ·»åŠ ä¸€ä¸ªå¡ç‰‡</span>
npx shadcn-ui@latest add card
<span class="hljs-comment"># æ·»åŠ ä¸€ä¸ªå¯¹è¯æ¡†</span>
npx shadcn-ui@latest add dialog
</code></pre>
<h3 data-id="heading-10">ç¬¬å››æ­¥ï¼šç«‹å³ä½¿ç”¨</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åœ¨app/page.tsxä¸­</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@/components/ui/button"</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"p-8"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">variant</span>=<span class="hljs-string">"default"</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"lg"</span>&gt;</span>
        è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªshadcn/uiæŒ‰é’®
      <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<h2 data-id="heading-11">äº”ã€è€ƒè™‘ä¸æƒè¡¡ï¼šå®ƒé€‚åˆä½ çš„é¡¹ç›®å—ï¼Ÿ</h2>
<h3 data-id="heading-12">é€‚åˆçš„åœºæ™¯ï¼š</h3>
<ul>
<li>éœ€è¦<strong>é«˜åº¦å®šåˆ¶UI</strong>çš„å“ç‰Œåº”ç”¨</li>
<li><strong>é•¿æœŸç»´æŠ¤</strong>çš„å¤§å‹é¡¹ç›®</li>
<li>å¯¹<strong>æ— éšœç¢è®¿é—®</strong>æœ‰è¦æ±‚çš„äº§å“</li>
<li>ä½¿ç”¨<strong>AIç¼–ç¨‹åŠ©æ‰‹</strong>çš„å¼€å‘å›¢é˜Ÿ</li>
<li>è¿½æ±‚<strong>æè‡´æ€§èƒ½</strong>å’ŒåŒ…ä½“ç§¯ä¼˜åŒ–çš„åº”ç”¨</li>
</ul>
<h3 data-id="heading-13">éœ€è¦è€ƒè™‘çš„ç‚¹ï¼š</h3>
<ul>
<li><strong>æ›´æ–°ç»´æŠ¤</strong>ï¼šå½“å®˜æ–¹å‘å¸ƒæ›´æ–°æ—¶ï¼Œä½ éœ€è¦æ‰‹åŠ¨åˆå¹¶åˆ°é¡¹ç›®ä¸­</li>
<li><strong>è®¾è®¡è´£ä»»</strong>ï¼šæ›´å¤šçš„è‡ªç”±ä¹Ÿæ„å‘³ç€æ›´å¤šçš„è®¾è®¡å†³ç­–</li>
<li><strong>å›¢é˜Ÿå­¦ä¹ </strong>ï¼šéœ€è¦ç†Ÿæ‚‰TypeScriptå’ŒTailwind CSS</li>
</ul>
<h3 data-id="heading-14">ä¸ä¼ ç»ŸUIåº“çš„å¯¹æ¯”ï¼š</h3>



































<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">ä¼ ç»ŸUIåº“ (å¦‚MUI)</th><th align="left">shadcn/ui</th></tr></thead><tbody><tr><td align="left"><strong>ä»£ç æ‰€æœ‰æƒ</strong></td><td align="left">ä½¿ç”¨æ–¹ï¼Œä¸å¯ä¿®æ”¹æºç </td><td align="left">å®Œå…¨æ‹¥æœ‰ï¼Œå¯ä»»æ„ä¿®æ”¹</td></tr><tr><td align="left"><strong>å®šåˆ¶æ–¹å¼</strong></td><td align="left">é€šè¿‡ä¸»é¢˜é…ç½®å’ŒCSSè¦†ç›–</td><td align="left">ç›´æ¥ä¿®æ”¹ç»„ä»¶æºç </td></tr><tr><td align="left"><strong>åŒ…å¤§å°</strong></td><td align="left">é€šå¸¸è¾ƒå¤§ï¼ˆå³ä½¿æŒ‰éœ€å¯¼å…¥ï¼‰</td><td align="left">åªåŒ…å«å®é™…ä½¿ç”¨çš„ç»„ä»¶</td></tr><tr><td align="left"><strong>å­¦ä¹ æ›²çº¿</strong></td><td align="left">å­¦ä¹ åº“ç‰¹å®šçš„APIå’Œä¸»é¢˜ç³»ç»Ÿ</td><td align="left">å­¦ä¹ å®é™…çš„React/Tailwindä»£ç </td></tr><tr><td align="left"><strong>AIå‹å¥½åº¦</strong></td><td align="left">è¾ƒå·®ï¼ˆAIçœ‹ä¸åˆ°å®ç°ï¼‰</td><td align="left">æä½³ï¼ˆAIå¯ç›´æ¥æ“ä½œæºç ï¼‰</td></tr></tbody></table>
<h2 data-id="heading-15">ä¸ƒã€ç¤¾åŒºç”Ÿæ€ï¼šä¸åªæ˜¯React</h2>
<p>è™½ç„¶æœ€å‡ºåçš„æ˜¯Reactç‰ˆæœ¬ï¼Œä½†shadcn/uiçš„ç†å¿µå·²ç»æ‰©å±•åˆ°å…¶ä»–æ¡†æ¶ã€‚ç¤¾åŒºç»´æŠ¤äº†  Vue 3ç‰ˆæœ¬ (shadcn-vue)ï¼Œæä¾›ç›¸ä¼¼çš„å¼€å‘ä½“éªŒã€‚åŒæ—¶ï¼Œç¤¾åŒºä¹Ÿè´¡çŒ®äº†å¤šç§å¼€ç®±å³ç”¨çš„æ¨¡æ¿ï¼Œå¦‚ä»ªè¡¨ç›˜æ¨¡æ¿ã€ç™»å½•/æ³¨å†Œé¡µé¢ã€ç”µå•†ç»„ä»¶ç­‰ã€‚</p>
<hr/>
<h2 data-id="heading-16">å†™åœ¨æœ€å</h2>
<p>shadcn/ui çš„å‡ºç°ï¼Œå›åº”äº†å‰ç«¯å¼€å‘ä¸­ä¸€ä¸ªé•¿æœŸè¢«å¿½è§†çš„éœ€æ±‚ï¼š<strong>å¼€å‘è€…å¯¹UIç»„ä»¶çš„å®Œå…¨æ§åˆ¶æƒ</strong>ã€‚å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªå·¥å…·é›†åˆï¼Œæ›´æ˜¯ä¸€ç§å¼€å‘å“²å­¦çš„ä½“ç°â€”â€”ç›¸ä¿¡å¼€å‘è€…æœ‰èƒ½åŠ›ã€ä¹Ÿåº”è¯¥æœ‰æƒåˆ©ç›´æ¥æ§åˆ¶ä»–ä»¬æ‰€ä½¿ç”¨çš„æ¯ä¸€ä¸ªç»„ä»¶ã€‚</p>
<p>æ¯•ç«Ÿï¼Œåœ¨è¿™ä¸ªå¼ºè°ƒâ€œå¼€å‘è€…ä½“éªŒâ€çš„æ—¶ä»£ï¼Œè¿˜æœ‰ä»€ä¹ˆæ¯”â€œè¿™ä»£ç å®Œå…¨å±äºæˆ‘â€æ›´å¥½çš„ä½“éªŒå‘¢ï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£æ»‘å—éªŒè¯ç ï¼šé‚£äº›ä½ ä¸çŸ¥é“çš„é˜²ç ´è§£æœºåˆ¶]]></title>    <link>https://juejin.cn/post/7604093823959072787</link>    <guid>https://juejin.cn/post/7604093823959072787</guid>    <pubDate>2026-02-09T07:28:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604093823959072787" data-draft-id="7604175912481488902" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£æ»‘å—éªŒè¯ç ï¼šé‚£äº›ä½ ä¸çŸ¥é“çš„é˜²ç ´è§£æœºåˆ¶"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Canvas"/> <meta itemprop="datePublished" content="2026-02-09T07:28:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="iDaoæŠ€æœ¯é­”æ–¹"/> <meta itemprop="url" content="https://juejin.cn/user/166781496080782"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£æ»‘å—éªŒè¯ç ï¼šé‚£äº›ä½ ä¸çŸ¥é“çš„é˜²ç ´è§£æœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/166781496080782/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    iDaoæŠ€æœ¯é­”æ–¹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T07:28:28.000Z" title="Mon Feb 09 2026 07:28:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    37
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™æ ·çš„å°´å°¬ï¼šæ˜æ˜è‡ªå·±æ˜¯ä¸ªçœŸäººï¼Œå´è¢«éªŒè¯ç æŠ˜ç£¨å¾—æ€€ç–‘äººç”Ÿï¼Ÿæ®ç»Ÿè®¡ï¼Œä¼ ç»Ÿå›¾æ–‡éªŒè¯ç çš„ç”¨æˆ·æ”¾å¼ƒç‡é«˜è¾¾40%ã€‚ä½†ä½ çŸ¥é“å—ï¼Ÿæ»‘å—éªŒè¯ç èƒŒåè—ç€ä¸€å¥—ç²¾å¯†çš„é˜²ç ´è§£æœºåˆ¶ï¼Œå®ƒå°±åƒæ˜¯ä¸€ä½ç»éªŒä¸°å¯Œçš„å®‰æ£€å‘˜ï¼Œåœ¨æ¯«ç§’ä¹‹é—´é€šè¿‡ä½ çš„"å¾®è¡¨æƒ…"åˆ¤æ–­ä½ æ˜¯ä¸æ˜¯çœŸäººã€‚</p>
</blockquote>
<h2 data-id="heading-0">ğŸ“‹ ç›®å½•</h2>
<ul>
<li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E6%BB%91%E5%9D%97%E9%AA%8C%E8%AF%81%E7%A0%81%E8%83%BD%E5%8F%96%E4%BB%A3%E4%BC%A0%E7%BB%9F%E9%AA%8C%E8%AF%81%E7%A0%81" title="#%E4%B8%BA%E4%BB%80%E4%B9%88%E6%BB%91%E5%9D%97%E9%AA%8C%E8%AF%81%E7%A0%81%E8%83%BD%E5%8F%96%E4%BB%A3%E4%BC%A0%E7%BB%9F%E9%AA%8C%E8%AF%81%E7%A0%81">ä¸ºä»€ä¹ˆæ»‘å—éªŒè¯ç èƒ½å–ä»£ä¼ ç»ŸéªŒè¯ç ï¼Ÿ</a></li>
<li><a href="#%E7%AC%AC%E4%B8%80%E9%81%93%E9%98%B2%E7%BA%BF%E4%BD%8D%E7%BD%AE%E9%AA%8C%E8%AF%81" title="#%E7%AC%AC%E4%B8%80%E9%81%93%E9%98%B2%E7%BA%BF%E4%BD%8D%E7%BD%AE%E9%AA%8C%E8%AF%81">ç¬¬ä¸€é“é˜²çº¿ï¼šä½ç½®éªŒè¯</a></li>
<li><a href="#%E7%AC%AC%E4%BA%8C%E9%81%93%E9%98%B2%E7%BA%BF%E8%BD%A8%E8%BF%B9%E9%9D%9E%E7%BA%BF%E6%80%A7%E6%A3%80%E6%B5%8B" title="#%E7%AC%AC%E4%BA%8C%E9%81%93%E9%98%B2%E7%BA%BF%E8%BD%A8%E8%BF%B9%E9%9D%9E%E7%BA%BF%E6%80%A7%E6%A3%80%E6%B5%8B">ç¬¬äºŒé“é˜²çº¿ï¼šè½¨è¿¹éçº¿æ€§æ£€æµ‹</a></li>
<li><a href="#%E7%AC%AC%E4%B8%89%E9%81%93%E9%98%B2%E7%BA%BF%E9%80%9F%E5%BA%A6%E5%8F%98%E5%8C%96%E5%88%86%E6%9E%90" title="#%E7%AC%AC%E4%B8%89%E9%81%93%E9%98%B2%E7%BA%BF%E9%80%9F%E5%BA%A6%E5%8F%98%E5%8C%96%E5%88%86%E6%9E%90">ç¬¬ä¸‰é“é˜²çº¿ï¼šé€Ÿåº¦å˜åŒ–åˆ†æ</a></li>
<li><a href="#%E7%AC%AC%E5%9B%9B%E9%81%93%E9%98%B2%E7%BA%BF%E5%8A%A0%E9%80%9F%E5%BA%A6%E6%A8%A1%E5%BC%8F%E8%AF%86%E5%88%AB" title="#%E7%AC%AC%E5%9B%9B%E9%81%93%E9%98%B2%E7%BA%BF%E5%8A%A0%E9%80%9F%E5%BA%A6%E6%A8%A1%E5%BC%8F%E8%AF%86%E5%88%AB">ç¬¬å››é“é˜²çº¿ï¼šåŠ é€Ÿåº¦æ¨¡å¼è¯†åˆ«</a></li>
<li><a href="#%E7%AC%AC%E4%BA%94%E9%81%93%E9%98%B2%E7%BA%BF%E6%97%B6%E9%97%B4%E7%AA%97%E5%8F%A3%E6%8E%A7%E5%88%B6" title="#%E7%AC%AC%E4%BA%94%E9%81%93%E9%98%B2%E7%BA%BF%E6%97%B6%E9%97%B4%E7%AA%97%E5%8F%A3%E6%8E%A7%E5%88%B6">ç¬¬äº”é“é˜²çº¿ï¼šæ—¶é—´çª—å£æ§åˆ¶</a></li>
<li><a href="#%E5%AE%9E%E6%88%98%E6%BC%94%E7%A4%BA%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88" title="#%E5%AE%9E%E6%88%98%E6%BC%94%E7%A4%BA%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88">å®æˆ˜æ¼”ç¤ºï¼šä¼ä¸šçº§å®ç°æ–¹æ¡ˆ</a></li>
<li><a href="#%E7%BB%95%E8%BF%87%E4%B8%8E%E5%8F%8D%E5%88%B6%E6%94%BB%E9%98%B2%E5%AE%9E%E6%88%98" title="#%E7%BB%95%E8%BF%87%E4%B8%8E%E5%8F%8D%E5%88%B6%E6%94%BB%E9%98%B2%E5%AE%9E%E6%88%98">ç»•è¿‡ä¸ååˆ¶ï¼šæ”»é˜²å®æˆ˜</a></li>
<li><a href="#%E8%BF%9B%E9%98%B6%E6%80%9D%E8%80%83%E5%AF%B9%E6%8A%97captcha%E5%86%9C%E5%9C%BA" title="#%E8%BF%9B%E9%98%B6%E6%80%9D%E8%80%83%E5%AF%B9%E6%8A%97captcha%E5%86%9C%E5%9C%BA">è¿›é˜¶æ€è€ƒï¼šå¯¹æŠ—CAPTCHAå†œåœº</a></li>
<li><a href="#%E6%80%BB%E7%BB%93" title="#%E6%80%BB%E7%BB%93">æ€»ç»“</a></li>
</ul>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆæ»‘å—éªŒè¯ç èƒ½å–ä»£ä¼ ç»ŸéªŒè¯ç ï¼Ÿ</h2>
<p>è¿˜è®°å¾—é‚£ä¸ªè¢«æŠ˜ç£¨åˆ°æ€€ç–‘äººç”Ÿçš„æ—¶åˆ»å—ï¼Ÿæ‰­æ›²çš„å­—æ¯ã€æ¨¡ç³Šçš„å›¾åƒã€"è¯·ç‚¹å‡»æ‰€æœ‰åŒ…å«çº¢ç»¿ç¯çš„å›¾ç‰‡"â€¦â€¦ä¼ ç»ŸéªŒè¯ç å°±åƒæ˜¯ä¸€ä¸ªæ•…æ„åˆéš¾ä½ çš„é—¨å«ï¼Œè€Œæ»‘å—éªŒè¯ç åˆ™æ›´åƒæ˜¯ä¸€ä½è§‚å¯Ÿå…¥å¾®çš„å¿ƒç†å­¦å®¶ã€‚</p>
<p>æ ¹æ® Journal of Information Security and Applications 2024 å¹´çš„ç ”ç©¶æ•°æ®æ˜¾ç¤ºï¼Œæ»‘å—éªŒè¯ç çš„ç”¨æˆ·å®Œæˆç‡æ¯”ä¼ ç»ŸéªŒè¯ç é«˜å‡º35%ï¼Œè€Œç ´è§£éš¾åº¦å´æå‡äº†2.3å€ã€‚è¿™ç§"åŒèµ¢"æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Ÿ</p>
<h3 data-id="heading-2">æ»‘å—éªŒè¯ç çš„æ¼”è¿›å²</h3>
<pre><code class="hljs">ç¬¬ä¸€ä»£ï¼šçº¯ä½ç½®éªŒè¯ï¼ˆ2012-2015ï¼‰
   â””â”€ åªéªŒè¯æ»‘å—æœ€ç»ˆä½ç½®æ˜¯å¦æ­£ç¡®
   â””â”€ å¼±ç‚¹ï¼šå®¹æ˜“è¢«è„šæœ¬ç›´æ¥è®¾ç½®ä½ç½®

ç¬¬äºŒä»£ï¼šæ—¶é—´çª—å£éªŒè¯ï¼ˆ2015-2018ï¼‰
   â””â”€ å¢åŠ å®Œæˆæ—¶é—´æ£€æµ‹
   â””â”€ å¼±ç‚¹ï¼šå¯ä»¥é€šè¿‡å»¶æ—¶æ¨¡æ‹Ÿ

ç¬¬ä¸‰ä»£ï¼šè½¨è¿¹åˆ†æï¼ˆ2018-2021ï¼‰
   â””â”€ åˆ†ææ‹–åŠ¨è¿‡ç¨‹ä¸­çš„è½¨è¿¹ç‚¹
   â””â”€ å¼±ç‚¹ï¼šè½¨è¿¹å¯è¢«å½•åˆ¶é‡æ”¾

ç¬¬å››ä»£ï¼šè¡Œä¸ºæŒ‡çº¹ï¼ˆ2021-è‡³ä»Šï¼‰
   â””â”€ å¤šç»´åº¦è¡Œä¸ºç‰¹å¾åˆ†æ
   â””â”€ æœºå™¨å­¦ä¹ è¾…åŠ©åˆ¤æ–­
   â””â”€ å½“å‰ä¸»æµæ–¹æ¡ˆ
</code></pre>
<p>ç°åœ¨çš„æ»‘å—éªŒè¯ç æ—©å·²ä¸æ˜¯ç®€å•çš„"æ‹–åŠ¨åˆ°ä½"é‚£ä¹ˆç®€å•ã€‚å®ƒèƒŒåè¿è¡Œç€ä¸€å¥—å¤æ‚çš„è¡Œä¸ºåˆ†æç³»ç»Ÿï¼Œå°±åƒæ˜¯ä½ å»é¢è¯•æ—¶ï¼ŒHRä¸ä»…çœ‹ä½ çš„ç®€å†ï¼Œè¿˜ä¼šè§‚å¯Ÿä½ çš„è‚¢ä½“è¯­è¨€ã€è¯­é€Ÿå˜åŒ–ã€ç”šè‡³å¾®è¡¨æƒ…ã€‚</p>
<h2 data-id="heading-3">ç¬¬ä¸€é“é˜²çº¿ï¼šä½ç½®éªŒè¯</h2>
<p>è¿™æ˜¯æœ€åŸºç¡€çš„ä¸€å±‚é˜²æŠ¤ï¼Œå°±åƒæ˜¯ä½ å»å…¬å¸é¢è¯•éœ€è¦åˆ°è¾¾æ­£ç¡®çš„æ¥¼å±‚ä¸€æ ·ã€‚çœ‹ä¼¼ç®€å•ï¼Œä½†è¿™é‡Œé¢ä¹Ÿæœ‰é—¨é“ã€‚</p>
<h3 data-id="heading-4">åŸç†è¯´æ˜</h3>
<p>æœåŠ¡å™¨ç”ŸæˆéªŒè¯ç æ—¶ï¼Œä¼šéšæœºäº§ç”Ÿä¸€ä¸ªç›®æ ‡ä½ç½®åæ ‡ <code>(targetX, targetY)</code>ï¼Œå¹¶å­˜å‚¨åœ¨æœåŠ¡ç«¯ï¼ˆé€šå¸¸é…åˆRedisè®¾ç½®è¿‡æœŸæ—¶é—´ï¼‰ã€‚å‰ç«¯éœ€è¦å°†æ»‘å—æ‹–åŠ¨åˆ°è¿™ä¸ªä½ç½®é™„è¿‘ï¼ˆå…è®¸ä¸€å®šçš„è¯¯å·®èŒƒå›´ï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æœåŠ¡ç«¯ç”ŸæˆéªŒè¯ç ç¤ºä¾‹ï¼ˆNode.jsï¼‰</span>
<span class="hljs-keyword">const</span> crypto = <span class="hljs-built_in">require</span>(<span class="hljs-string">'crypto'</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">generateCaptcha</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ç”Ÿæˆéšæœºç›®æ ‡ä½ç½®ï¼ˆå‡è®¾æ»‘æ§½å®½åº¦ä¸º300pxï¼‰</span>
  <span class="hljs-keyword">const</span> targetX = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">250</span>) + <span class="hljs-number">20</span>; <span class="hljs-comment">// 20-270ä¹‹é—´</span>
  
  <span class="hljs-comment">// ç”Ÿæˆå”¯ä¸€token</span>
  <span class="hljs-keyword">const</span> token = crypto.<span class="hljs-title function_">randomBytes</span>(<span class="hljs-number">16</span>).<span class="hljs-title function_">toString</span>(<span class="hljs-string">'hex'</span>);
  
  <span class="hljs-comment">// å­˜å‚¨åˆ°Redisï¼Œè®¾ç½®5åˆ†é’Ÿè¿‡æœŸ</span>
  <span class="hljs-keyword">await</span> redis.<span class="hljs-title function_">setex</span>(<span class="hljs-string">`captcha:<span class="hljs-subst">${token}</span>`</span>, <span class="hljs-number">300</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
    targetX,
    <span class="hljs-attr">createdAt</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
  }));
  
  <span class="hljs-keyword">return</span> { token, targetX };
}
</code></pre>
<h3 data-id="heading-5">å…³é”®ç»†èŠ‚</h3>
<p><strong>è¯¯å·®å®¹å¿åº¦</strong>ï¼šé€šå¸¸å…è®¸ Â±5px çš„è¯¯å·®èŒƒå›´ã€‚å¤ªå°ä¼šå¯¼è‡´ç”¨æˆ·ä½“éªŒå·®ï¼Œå¤ªå¤§ä¼šé™ä½å®‰å…¨æ€§ã€‚</p>
<p><strong>åæ ‡åŠ å¯†</strong>ï¼šå‰ç«¯ä¸åº”ç›´æ¥çŸ¥é“ç›®æ ‡ä½ç½®ã€‚æ­£ç¡®çš„åšæ³•æ˜¯è®©åç«¯è¿”å›ä¸€ä¸ªåŠ å¯†çš„ç›®æ ‡ä½ç½®ï¼Œæˆ–è€…ä½¿ç”¨å›¾ç‰‡èƒŒæ™¯ä¸Šçš„ç¼ºå£ä½ç½®ä½œä¸ºå‚ç…§ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é”™è¯¯åšæ³• âŒ</span>
<span class="hljs-keyword">const</span> targetX = <span class="hljs-number">156</span>; <span class="hljs-comment">// å‰ç«¯ç¡¬ç¼–ç æˆ–ä»æ¥å£æ˜æ–‡è·å–</span>

<span class="hljs-comment">// æ­£ç¡®åšæ³• âœ…</span>
<span class="hljs-comment">// åç«¯è¿”å›ä¸€å¼ å¸¦æœ‰ç¼ºå£çš„èƒŒæ™¯å›¾</span>
<span class="hljs-comment">// ç¼ºå£ä½ç½®å°±æ˜¯ç›®æ ‡ä½ç½®ï¼Œå‰ç«¯ä¸éœ€è¦çŸ¥é“å…·ä½“æ•°å€¼</span>
<span class="hljs-comment">// éªŒè¯æ—¶åç«¯å¯¹æ¯”å‰ç«¯æäº¤çš„åæ ‡ä¸ç¼ºå£ä½ç½®</span>
</code></pre>
<h2 data-id="heading-6">ç¬¬äºŒé“é˜²çº¿ï¼šè½¨è¿¹éçº¿æ€§æ£€æµ‹</h2>
<p>è¿™æ˜¯æ»‘å—éªŒè¯ç æœ€ç²¾å¦™çš„åœ°æ–¹ã€‚å°±åƒäººçš„ç¬”è¿¹ä¸€æ ·ï¼Œæ¯ä¸ªäººçš„æ‹–åŠ¨è½¨è¿¹éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œè€Œæœºå™¨äººçš„"ç¬”è¿¹"å¾€å¾€è¿‡äºå·¥æ•´ã€‚</p>
<h3 data-id="heading-7">ä»€ä¹ˆæ˜¯éçº¿æ€§è½¨è¿¹ï¼Ÿ</h3>
<p>äººç±»æ‹–åŠ¨æ»‘å—æ—¶ï¼Œè½¨è¿¹æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">å¼€å§‹ â”€â”€â”€â”€â•²    â•±â”€â”€â”€â”€â•²      â•±â”€â”€â”€â”€ ç»“æŸ
<span class="hljs-code">            â•²  â•±      â•²    â•±
             â•²â•±        â•²â”€â”€â•±
</span></code></pre>
<p>è€Œæœºå™¨äººçš„"å®Œç¾"è½¨è¿¹æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs">å¼€å§‹ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç»“æŸ
</code></pre>
<h3 data-id="heading-8">å®ç°åŸç†</h3>
<p>æˆ‘ä»¬éœ€è¦é‡‡é›†æ‹–åŠ¨è¿‡ç¨‹ä¸­çš„è½¨è¿¹ç‚¹ï¼Œç„¶ååˆ†æè¿™äº›ç‚¹çš„åˆ†å¸ƒç‰¹å¾ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‰ç«¯è½¨è¿¹é‡‡é›†</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TrajectoryCollector</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">trajectory</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">startTime</span> = <span class="hljs-literal">null</span>;
  }

  <span class="hljs-title function_">start</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">startTime</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">trajectory</span> = [];
  }

  <span class="hljs-title function_">record</span>(<span class="hljs-params">x, y</span>) {
    <span class="hljs-keyword">const</span> timestamp = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - <span class="hljs-variable language_">this</span>.<span class="hljs-property">startTime</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">trajectory</span>.<span class="hljs-title function_">push</span>({ x, y, <span class="hljs-attr">t</span>: timestamp });
  }

  <span class="hljs-title function_">getTrajectory</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">trajectory</span>;
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> collector = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TrajectoryCollector</span>();

slider.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousedown'</span>, <span class="hljs-function">() =&gt;</span> {
  collector.<span class="hljs-title function_">start</span>();
});

slider.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousemove'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (isDragging) {
    collector.<span class="hljs-title function_">record</span>(e.<span class="hljs-property">clientX</span>, e.<span class="hljs-property">clientY</span>);
  }
});
</code></pre>
<h3 data-id="heading-9">éçº¿æ€§æ£€æµ‹ç®—æ³•</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æœåŠ¡ç«¯è½¨è¿¹åˆ†æï¼ˆNode.jsï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">analyzeTrajectory</span>(<span class="hljs-params">trajectory</span>) {
  <span class="hljs-comment">// 1. è®¡ç®—ç›¸é‚»ç‚¹çš„åå·®</span>
  <span class="hljs-keyword">const</span> deviations = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; trajectory.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">const</span> prev = trajectory[i - <span class="hljs-number">1</span>];
    <span class="hljs-keyword">const</span> curr = trajectory[i];
    
    <span class="hljs-comment">// è®¡ç®—è§’åº¦åå·®</span>
    <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">1</span>) {
      <span class="hljs-keyword">const</span> prev2 = trajectory[i - <span class="hljs-number">2</span>];
      <span class="hljs-keyword">const</span> angle1 = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(prev.<span class="hljs-property">y</span> - prev2.<span class="hljs-property">y</span>, prev.<span class="hljs-property">x</span> - prev2.<span class="hljs-property">x</span>);
      <span class="hljs-keyword">const</span> angle2 = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(curr.<span class="hljs-property">y</span> - prev.<span class="hljs-property">y</span>, curr.<span class="hljs-property">x</span> - prev.<span class="hljs-property">x</span>);
      <span class="hljs-keyword">const</span> deviation = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(angle2 - angle1);
      deviations.<span class="hljs-title function_">push</span>(deviation);
    }
  }

  <span class="hljs-comment">// 2. ç»Ÿè®¡åå·®ç‰¹å¾</span>
  <span class="hljs-keyword">const</span> avgDeviation = deviations.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / deviations.<span class="hljs-property">length</span>;
  <span class="hljs-keyword">const</span> maxDeviation = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(...deviations);
  
  <span class="hljs-comment">// 3. åˆ¤æ–­æ˜¯å¦ä¸ºçº¿æ€§</span>
  <span class="hljs-comment">// äººç±»æ‹–åŠ¨é€šå¸¸ä¼šæœ‰æ˜æ˜¾çš„æ–¹å‘å˜åŒ–ï¼ˆæ‰‹æŠ–ã€è°ƒæ•´ç­‰ï¼‰</span>
  <span class="hljs-comment">// æœºå™¨äººé€šå¸¸æ˜¯ç›´çº¿æˆ–å¹³æ»‘æ›²çº¿</span>
  <span class="hljs-keyword">const</span> isLinear = avgDeviation &lt; <span class="hljs-number">0.1</span> &amp;&amp; maxDeviation &lt; <span class="hljs-number">0.3</span>;
  
  <span class="hljs-keyword">return</span> {
    isLinear,
    <span class="hljs-attr">score</span>: isLinear ? <span class="hljs-number">0</span> : <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">100</span>, avgDeviation * <span class="hljs-number">100</span>),
    <span class="hljs-attr">details</span>: { avgDeviation, maxDeviation, <span class="hljs-attr">pointCount</span>: trajectory.<span class="hljs-property">length</span> }
  };
}
</code></pre>
<h3 data-id="heading-10">ä¸ºä»€ä¹ˆè¿™å¾ˆæœ‰æ•ˆï¼Ÿ</h3>
<p>æ ¹æ® "The robustness of behavior-verification-based slider CAPTCHAs"ï¼ˆJournal of Information Security and Applications, 2024ï¼‰çš„ç ”ç©¶ï¼Œç®€å•çš„è‡ªåŠ¨åŒ–è„šæœ¬å¾ˆéš¾æ¨¡æ‹Ÿå‡ºçœŸå®çš„éçº¿æ€§è½¨è¿¹ã€‚å³ä½¿ä½¿ç”¨è´å¡å°”æ›²çº¿æ¨¡æ‹Ÿï¼Œä¹Ÿä¼šåœ¨æŸäº›ç‰¹å¾ä¸Šéœ²å‡ºé©¬è„šã€‚</p>
<h2 data-id="heading-11">ç¬¬ä¸‰é“é˜²çº¿ï¼šé€Ÿåº¦å˜åŒ–åˆ†æ</h2>
<p>äººç±»æ‹–åŠ¨æ»‘å—çš„é€Ÿåº¦ä¸æ˜¯æ’å®šçš„ï¼Œå°±åƒä½ å¼€è½¦ä¸€æ ·ï¼šå¯åŠ¨æ—¶æ…¢ã€ä¸­é€”åŠ é€Ÿã€å¿«åˆ°ä½æ—¶å‡é€Ÿã€‚è€Œæœºå™¨äººå¾€å¾€ä¼šä»¥æ’å®šé€Ÿåº¦"è¡Œé©¶"ã€‚</p>
<h3 data-id="heading-12">é€Ÿåº¦æ›²çº¿ç‰¹å¾</h3>
<pre><code class="hljs">é€Ÿåº¦
 â”‚
 â”‚       â•±â•²
 â”‚      â•±  â•²
 â”‚     â•±    â•²
 â”‚    â•±      â•²
 â”‚   â•±        â•²
 â”‚  â•±          â•²___
 â”‚ â•±                â•²
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ—¶é—´
  æ…¢â†’å¿«â†’æ…¢â†’è°ƒæ•´â†’å®Œæˆ
</code></pre>
<h3 data-id="heading-13">é€Ÿåº¦åˆ†æç®—æ³•</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">analyzeSpeed</span>(<span class="hljs-params">trajectory</span>) {
  <span class="hljs-keyword">const</span> speeds = [];
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; trajectory.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">const</span> prev = trajectory[i - <span class="hljs-number">1</span>];
    <span class="hljs-keyword">const</span> curr = trajectory[i];
    
    <span class="hljs-keyword">const</span> distance = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(
      <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(curr.<span class="hljs-property">x</span> - prev.<span class="hljs-property">x</span>, <span class="hljs-number">2</span>) + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(curr.<span class="hljs-property">y</span> - prev.<span class="hljs-property">y</span>, <span class="hljs-number">2</span>)
    );
    <span class="hljs-keyword">const</span> timeDiff = curr.<span class="hljs-property">t</span> - prev.<span class="hljs-property">t</span>;
    
    <span class="hljs-keyword">if</span> (timeDiff &gt; <span class="hljs-number">0</span>) {
      speeds.<span class="hljs-title function_">push</span>(distance / timeDiff);
    }
  }

  <span class="hljs-comment">// åˆ†æé€Ÿåº¦å˜åŒ–ç‰¹å¾</span>
  <span class="hljs-keyword">const</span> avgSpeed = speeds.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / speeds.<span class="hljs-property">length</span>;
  <span class="hljs-keyword">const</span> variance = speeds.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, speed</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> sum + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(speed - avgSpeed, <span class="hljs-number">2</span>);
  }, <span class="hljs-number">0</span>) / speeds.<span class="hljs-property">length</span>;
  
  <span class="hljs-comment">// é€Ÿåº¦å˜åŒ–æ–¹å·®è¿‡å°è¯´æ˜æ˜¯åŒ€é€Ÿè¿åŠ¨ï¼ˆæœºå™¨äººç‰¹å¾ï¼‰</span>
  <span class="hljs-keyword">const</span> isConstantSpeed = variance &lt; <span class="hljs-number">0.5</span>;
  
  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰æ˜æ˜¾çš„åŠ é€Ÿ-å‡é€Ÿè¿‡ç¨‹</span>
  <span class="hljs-keyword">let</span> hasAccelDecel = <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">if</span> (speeds.<span class="hljs-property">length</span> &gt; <span class="hljs-number">10</span>) {
    <span class="hljs-keyword">const</span> firstHalf = speeds.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(speeds.<span class="hljs-property">length</span> / <span class="hljs-number">2</span>));
    <span class="hljs-keyword">const</span> secondHalf = speeds.<span class="hljs-title function_">slice</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(speeds.<span class="hljs-property">length</span> / <span class="hljs-number">2</span>));
    
    <span class="hljs-keyword">const</span> avgFirst = firstHalf.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / firstHalf.<span class="hljs-property">length</span>;
    <span class="hljs-keyword">const</span> avgSecond = secondHalf.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / secondHalf.<span class="hljs-property">length</span>;
    
    <span class="hljs-comment">// å‰åŠæ®µå’ŒååŠæ®µæœ‰æ˜æ˜¾å·®å¼‚ï¼ˆåŠ é€Ÿåå‡é€Ÿï¼‰</span>
    hasAccelDecel = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(avgFirst - avgSecond) &gt; avgSpeed * <span class="hljs-number">0.3</span>;
  }

  <span class="hljs-keyword">return</span> {
    isConstantSpeed,
    hasAccelDecel,
    <span class="hljs-attr">score</span>: (!isConstantSpeed &amp;&amp; hasAccelDecel) ? <span class="hljs-number">100</span> : <span class="hljs-number">50</span>,
    <span class="hljs-attr">details</span>: { avgSpeed, variance, <span class="hljs-attr">speeds</span>: speeds.<span class="hljs-property">length</span> }
  };
}
</code></pre>
<h3 data-id="heading-14">å®æˆ˜æŠ€å·§</h3>
<p><strong>é€Ÿåº¦é˜ˆå€¼è®¾ç½®</strong>ï¼š</p>
<ul>
<li>è¿‡å¿«ï¼ˆ&lt; 100msï¼‰ï¼šå¯èƒ½æ˜¯è„šæœ¬ç›´æ¥è®¾ç½®ä½ç½®</li>
<li>è¿‡æ…¢ï¼ˆ&gt; 10sï¼‰ï¼šå¯èƒ½æ˜¯äººå·¥æ‰“ç æˆ–ä½è´¨é‡è„šæœ¬</li>
<li>æ¨èå®Œæˆæ—¶é—´ï¼š500ms - 3000ms</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»¼åˆæ—¶é—´æ£€æŸ¥</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">checkTimeWindow</span>(<span class="hljs-params">trajectory</span>) {
  <span class="hljs-keyword">const</span> totalTime = trajectory[trajectory.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>].<span class="hljs-property">t</span>;
  
  <span class="hljs-keyword">if</span> (totalTime &lt; <span class="hljs-number">100</span>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'Too fast - likely automated'</span> };
  }
  <span class="hljs-keyword">if</span> (totalTime &gt; <span class="hljs-number">10000</span>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'Too slow - possible manual farm'</span> };
  }
  
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">duration</span>: totalTime };
}
</code></pre>
<h2 data-id="heading-15">ç¬¬å››é“é˜²çº¿ï¼šåŠ é€Ÿåº¦æ¨¡å¼è¯†åˆ«</h2>
<p>åŠ é€Ÿåº¦æ˜¯æ¯”é€Ÿåº¦æ›´æ·±ä¸€å±‚çš„ç‰¹å¾ã€‚äººç±»æ‰‹çš„è‚Œè‚‰ååº”æ˜¯æœ‰ç‰©ç†æƒ¯æ€§çš„ï¼Œè€Œç¨‹åºç”Ÿæˆçš„è¿åŠ¨å¾€å¾€å¿½ç•¥è¿™ä¸€ç‚¹ã€‚</p>
<h3 data-id="heading-16">åŠ é€Ÿåº¦æ›²çº¿ç‰¹å¾</h3>
<p>äººç±»çš„åŠ é€Ÿåº¦æ›²çº¿åº”è¯¥ç¬¦åˆç‰©ç†è§„å¾‹ï¼š</p>
<ul>
<li>å¯åŠ¨æ—¶éœ€è¦å…‹æœé™æ‘©æ“¦åŠ›ï¼ˆåŠ é€Ÿåº¦å¤§ï¼‰</li>
<li>åŒ€é€Ÿé˜¶æ®µåŠ é€Ÿåº¦æ¥è¿‘0</li>
<li>åˆ¶åŠ¨æ—¶åŠ é€Ÿåº¦ä¸ºè´Ÿå€¼</li>
<li>æ•´ä¸ªè¿‡ç¨‹æœ‰è½»å¾®çš„æŠ–åŠ¨ï¼ˆè‚Œè‚‰éœ‡é¢¤ï¼‰</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">analyzeAcceleration</span>(<span class="hljs-params">trajectory</span>) {
  <span class="hljs-keyword">const</span> accelerations = [];
  
  <span class="hljs-comment">// å…ˆè®¡ç®—é€Ÿåº¦</span>
  <span class="hljs-keyword">const</span> speeds = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; trajectory.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">const</span> prev = trajectory[i - <span class="hljs-number">1</span>];
    <span class="hljs-keyword">const</span> curr = trajectory[i];
    <span class="hljs-keyword">const</span> distance = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(
      <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(curr.<span class="hljs-property">x</span> - prev.<span class="hljs-property">x</span>, <span class="hljs-number">2</span>) + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(curr.<span class="hljs-property">y</span> - prev.<span class="hljs-property">y</span>, <span class="hljs-number">2</span>)
    );
    <span class="hljs-keyword">const</span> timeDiff = curr.<span class="hljs-property">t</span> - prev.<span class="hljs-property">t</span>;
    <span class="hljs-keyword">if</span> (timeDiff &gt; <span class="hljs-number">0</span>) {
      speeds.<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">speed</span>: distance / timeDiff,
        <span class="hljs-attr">time</span>: curr.<span class="hljs-property">t</span>
      });
    }
  }

  <span class="hljs-comment">// è®¡ç®—åŠ é€Ÿåº¦ï¼ˆé€Ÿåº¦çš„å˜åŒ–ç‡ï¼‰</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; speeds.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">const</span> speedDiff = speeds[i].<span class="hljs-property">speed</span> - speeds[i - <span class="hljs-number">1</span>].<span class="hljs-property">speed</span>;
    <span class="hljs-keyword">const</span> timeDiff = speeds[i].<span class="hljs-property">time</span> - speeds[i - <span class="hljs-number">1</span>].<span class="hljs-property">time</span>;
    <span class="hljs-keyword">if</span> (timeDiff &gt; <span class="hljs-number">0</span>) {
      accelerations.<span class="hljs-title function_">push</span>(speedDiff / timeDiff);
    }
  }

  <span class="hljs-comment">// åˆ†æåŠ é€Ÿåº¦ç‰¹å¾</span>
  <span class="hljs-keyword">const</span> positiveAccel = accelerations.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> a &gt; <span class="hljs-number">0</span>).<span class="hljs-property">length</span>;
  <span class="hljs-keyword">const</span> negativeAccel = accelerations.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> a &lt; <span class="hljs-number">0</span>).<span class="hljs-property">length</span>;
  <span class="hljs-keyword">const</span> nearZeroAccel = accelerations.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(a) &lt; <span class="hljs-number">0.1</span>).<span class="hljs-property">length</span>;
  
  <span class="hljs-comment">// åˆç†çš„åŠ é€Ÿåº¦åˆ†å¸ƒåº”è¯¥æ˜¯ï¼šå…ˆæ­£ï¼ˆåŠ é€Ÿï¼‰ã€åæ¥è¿‘0ï¼ˆåŒ€é€Ÿï¼‰ã€æœ€åè´Ÿï¼ˆå‡é€Ÿï¼‰</span>
  <span class="hljs-keyword">const</span> total = accelerations.<span class="hljs-property">length</span>;
  <span class="hljs-keyword">const</span> firstThird = accelerations.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(total / <span class="hljs-number">3</span>));
  <span class="hljs-keyword">const</span> lastThird = accelerations.<span class="hljs-title function_">slice</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(total * <span class="hljs-number">2</span> / <span class="hljs-number">3</span>));
  
  <span class="hljs-keyword">const</span> avgFirst = firstThird.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / firstThird.<span class="hljs-property">length</span>;
  <span class="hljs-keyword">const</span> avgLast = lastThird.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / lastThird.<span class="hljs-property">length</span>;
  
  <span class="hljs-comment">// æ­£å¸¸æƒ…å†µï¼šå‰åŠæ®µåŠ é€Ÿåº¦ä¸ºæ­£ï¼ŒååŠæ®µä¸ºè´Ÿ</span>
  <span class="hljs-keyword">const</span> hasNaturalPattern = avgFirst &gt; <span class="hljs-number">0.05</span> &amp;&amp; avgLast &lt; -<span class="hljs-number">0.05</span>;

  <span class="hljs-keyword">return</span> {
    hasNaturalPattern,
    <span class="hljs-attr">score</span>: hasNaturalPattern ? <span class="hljs-number">100</span> : <span class="hljs-number">30</span>,
    <span class="hljs-attr">details</span>: {
      <span class="hljs-attr">positiveRatio</span>: positiveAccel / total,
      <span class="hljs-attr">negativeRatio</span>: negativeAccel / total,
      <span class="hljs-attr">avgFirstPhase</span>: avgFirst,
      <span class="hljs-attr">avgLastPhase</span>: avgLast
    }
  };
}
</code></pre>
<h2 data-id="heading-17">ç¬¬äº”é“é˜²çº¿ï¼šæ—¶é—´çª—å£æ§åˆ¶</h2>
<p>è¿™å°±åƒæ˜¯æˆ‘ä»¬ç»™éªŒè¯è¿‡ç¨‹è®¾ç½®äº†ä¸€ä¸ª"æœ‰æ•ˆæœŸ"ã€‚éªŒè¯ç tokenç”Ÿæˆåï¼Œå¦‚æœåœ¨æçŸ­æ—¶é—´å†…å°±æäº¤éªŒè¯ï¼Œæˆ–è€…æ‹–äº†å¾ˆä¹…æ‰æäº¤ï¼Œéƒ½å¯èƒ½æ˜¯å¼‚å¸¸è¡Œä¸ºã€‚</p>
<h3 data-id="heading-18">æ—¶é—´çª—å£ç­–ç•¥</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æœåŠ¡ç«¯æ—¶é—´çª—å£éªŒè¯</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">verifyTimeWindow</span>(<span class="hljs-params">token, clientTimestamp</span>) {
  <span class="hljs-keyword">const</span> captchaData = <span class="hljs-keyword">await</span> redis.<span class="hljs-title function_">get</span>(<span class="hljs-string">`captcha:<span class="hljs-subst">${token}</span>`</span>);
  <span class="hljs-keyword">if</span> (!captchaData) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'Token expired or invalid'</span> };
  }

  <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(captchaData);
  <span class="hljs-keyword">const</span> serverTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
  <span class="hljs-keyword">const</span> createdAt = data.<span class="hljs-property">createdAt</span>;
  
  <span class="hljs-comment">// æ£€æŸ¥tokenæ˜¯å¦åœ¨æœ‰æ•ˆæœŸå†…ï¼ˆ5åˆ†é’Ÿï¼‰</span>
  <span class="hljs-keyword">if</span> (serverTime - createdAt &gt; <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'Token expired'</span> };
  }

  <span class="hljs-comment">// æ£€æŸ¥å®¢æˆ·ç«¯æäº¤æ—¶é—´æ˜¯å¦åˆç†ï¼ˆé˜²é‡æ”¾æ”»å‡»ï¼‰</span>
  <span class="hljs-keyword">const</span> timeOnClient = clientTimestamp - createdAt;
  <span class="hljs-keyword">if</span> (timeOnClient &lt; <span class="hljs-number">200</span>) { <span class="hljs-comment">// å°äº200msï¼Œå¤ªå¿«äº†</span>
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'Suspiciously fast completion'</span> };
  }
  <span class="hljs-keyword">if</span> (timeOnClient &gt; <span class="hljs-number">4</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>) { <span class="hljs-comment">// è¶…è¿‡4åˆ†é’Ÿ</span>
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'Suspiciously slow completion'</span> };
  }

  <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">true</span> };
}
</code></pre>
<h2 data-id="heading-19">å®æˆ˜æ¼”ç¤ºï¼šä¼ä¸šçº§å®ç°æ–¹æ¡ˆ</h2>
<p>è¯´äº†é‚£ä¹ˆå¤šç†è®ºï¼Œç°åœ¨æ¥ä¸Šç¡¬èœã€‚è¿™æ˜¯ä¸€ä¸ªåŸºäº <strong>Node.js + Redis</strong> çš„ä¼ä¸šçº§æ»‘å—éªŒè¯ç å®ç°æ–¹æ¡ˆï¼Œå‚è€ƒäº† GitHub ä¸Šçƒ­é—¨çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fkartikmehta8%2Fcaptcha" target="_blank" title="https://github.com/kartikmehta8/captcha" ref="nofollow noopener noreferrer">kartikmehta8/captcha</a> é¡¹ç›®æ¶æ„ã€‚</p>
<h3 data-id="heading-20">æŠ€æœ¯æ ˆ</h3>
<ul>
<li><strong>Node.js &gt;= 16</strong>: æœåŠ¡ç«¯è¿è¡Œç¯å¢ƒ</li>
<li><strong>Express</strong>: Webæ¡†æ¶</li>
<li><strong>Redis &gt;= 6</strong>: çŠ¶æ€å­˜å‚¨å’Œé™æµ</li>
<li><strong>Canvas</strong>: å›¾ç‰‡ç”Ÿæˆ</li>
<li><strong>Joi</strong>: å‚æ•°æ ¡éªŒ</li>
</ul>
<h3 data-id="heading-21">é¡¹ç›®ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">captcha-service/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ index.js          <span class="hljs-comment"># é…ç½®æ–‡ä»¶</span>
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â””â”€â”€ captcha.js        <span class="hljs-comment"># éªŒè¯ç æ§åˆ¶å™¨</span>
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ captcha.js        <span class="hljs-comment"># æ ¸å¿ƒæœåŠ¡é€»è¾‘</span>
â”‚   â”‚   â””â”€â”€ validator.js      <span class="hljs-comment"># è¡Œä¸ºåˆ†æå™¨</span>
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ image.js          <span class="hljs-comment"># å›¾ç‰‡ç”Ÿæˆå·¥å…·</span>
â”‚   â”‚   â””â”€â”€ crypto.js         <span class="hljs-comment"># åŠ å¯†å·¥å…·</span>
â”‚   â””â”€â”€ app.js                <span class="hljs-comment"># åº”ç”¨å…¥å£</span>
â”œâ”€â”€ package.json
â””â”€â”€ README.md
</code></pre>
<h3 data-id="heading-22">æ ¸å¿ƒä»£ç å®ç°</h3>
<h4 data-id="heading-23">1. éªŒè¯ç ç”ŸæˆæœåŠ¡</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/services/captcha.js</span>
<span class="hljs-keyword">const</span> crypto = <span class="hljs-built_in">require</span>(<span class="hljs-string">'crypto'</span>);
<span class="hljs-keyword">const</span> { createCanvas } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'canvas'</span>);
<span class="hljs-keyword">const</span> redis = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../config/redis'</span>);

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CaptchaService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span> = <span class="hljs-number">300</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span> = <span class="hljs-number">150</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderWidth</span> = <span class="hljs-number">50</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderHeight</span> = <span class="hljs-number">50</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">tolerance</span> = <span class="hljs-number">5</span>; <span class="hljs-comment">// è¯¯å·®å®¹å¿åº¦ Â±5px</span>
  }

  <span class="hljs-comment">// ç”ŸæˆéªŒè¯ç </span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">generate</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> token = crypto.<span class="hljs-title function_">randomBytes</span>(<span class="hljs-number">16</span>).<span class="hljs-title function_">toString</span>(<span class="hljs-string">'hex'</span>);
    
    <span class="hljs-comment">// éšæœºç”Ÿæˆæ»‘å—ç›®æ ‡ä½ç½®ï¼ˆç•™å‡ºè¾¹è·ï¼‰</span>
    <span class="hljs-keyword">const</span> targetX = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * (<span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span> - <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderWidth</span> - <span class="hljs-number">40</span>)) + <span class="hljs-number">20</span>;
    <span class="hljs-keyword">const</span> targetY = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * (<span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span> - <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderHeight</span> - <span class="hljs-number">40</span>)) + <span class="hljs-number">20</span>;

    <span class="hljs-comment">// ç”ŸæˆèƒŒæ™¯å›¾å’Œæ»‘å—å›¾</span>
    <span class="hljs-keyword">const</span> { bgImage, sliderImage } = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateImages</span>(targetX, targetY);

    <span class="hljs-comment">// å­˜å‚¨éªŒè¯ç æ•°æ®åˆ°Redisï¼ˆ5åˆ†é’Ÿè¿‡æœŸï¼‰</span>
    <span class="hljs-keyword">const</span> captchaData = {
      targetX,
      targetY,
      <span class="hljs-attr">createdAt</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
      <span class="hljs-attr">attempts</span>: <span class="hljs-number">0</span>
    };
    <span class="hljs-keyword">await</span> redis.<span class="hljs-title function_">setex</span>(<span class="hljs-string">`captcha:<span class="hljs-subst">${token}</span>`</span>, <span class="hljs-number">300</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(captchaData));

    <span class="hljs-keyword">return</span> {
      token,
      <span class="hljs-attr">bgImage</span>: bgImage.<span class="hljs-title function_">toString</span>(<span class="hljs-string">'base64'</span>),
      <span class="hljs-attr">sliderImage</span>: sliderImage.<span class="hljs-title function_">toString</span>(<span class="hljs-string">'base64'</span>),
      <span class="hljs-attr">sliderWidth</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderWidth</span>,
      <span class="hljs-attr">sliderHeight</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderHeight</span>
    };
  }

  <span class="hljs-comment">// ç”Ÿæˆå›¾ç‰‡</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">generateImages</span>(<span class="hljs-params">targetX, targetY</span>) {
    <span class="hljs-keyword">const</span> canvas = <span class="hljs-title function_">createCanvas</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span>);
    <span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>);

    <span class="hljs-comment">// ç»˜åˆ¶èƒŒæ™¯ï¼ˆéšæœºå™ªç‚¹ + å¹²æ‰°çº¿ï¼‰</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">drawBackground</span>(ctx);

    <span class="hljs-comment">// åˆ›å»ºæ»‘å—å½¢çŠ¶ï¼ˆåœ†å½¢ç¼ºå£ï¼‰</span>
    <span class="hljs-keyword">const</span> sliderCanvas = <span class="hljs-title function_">createCanvas</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderWidth</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span>);
    <span class="hljs-keyword">const</span> sliderCtx = sliderCanvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>);

    <span class="hljs-comment">// ç»˜åˆ¶æ»‘å—æ§½</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">drawSliderSlot</span>(ctx, targetX, targetY);

    <span class="hljs-comment">// æå–æ»‘å—åŒºåŸŸ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">extractSlider</span>(sliderCtx, ctx, targetX, targetY);

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">bgImage</span>: canvas.<span class="hljs-title function_">toBuffer</span>(<span class="hljs-string">'image/png'</span>),
      <span class="hljs-attr">sliderImage</span>: sliderCanvas.<span class="hljs-title function_">toBuffer</span>(<span class="hljs-string">'image/png'</span>)
    };
  }

  <span class="hljs-title function_">drawBackground</span>(<span class="hljs-params">ctx</span>) {
    <span class="hljs-comment">// å¡«å……èƒŒæ™¯è‰²</span>
    ctx.<span class="hljs-property">fillStyle</span> = <span class="hljs-string">'#f0f0f0'</span>;
    ctx.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span>);

    <span class="hljs-comment">// æ·»åŠ å™ªç‚¹</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
      ctx.<span class="hljs-property">fillStyle</span> = <span class="hljs-string">`rgba(<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">255</span>}</span>, <span class="hljs-subst">${<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">255</span>}</span>, <span class="hljs-subst">${<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">255</span>}</span>, 0.3)`</span>;
      ctx.<span class="hljs-title function_">fillRect</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>);
    }

    <span class="hljs-comment">// æ·»åŠ å¹²æ‰°çº¿</span>
    ctx.<span class="hljs-property">strokeStyle</span> = <span class="hljs-string">'rgba(100, 100, 100, 0.2)'</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {
      ctx.<span class="hljs-title function_">beginPath</span>();
      ctx.<span class="hljs-title function_">moveTo</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span>);
      ctx.<span class="hljs-title function_">lineTo</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span>);
      ctx.<span class="hljs-title function_">stroke</span>();
    }
  }

  <span class="hljs-title function_">drawSliderSlot</span>(<span class="hljs-params">ctx, x, y</span>) {
    ctx.<span class="hljs-property">globalCompositeOperation</span> = <span class="hljs-string">'destination-out'</span>;
    ctx.<span class="hljs-title function_">beginPath</span>();
    ctx.<span class="hljs-title function_">arc</span>(x + <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderWidth</span> / <span class="hljs-number">2</span>, y + <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderHeight</span> / <span class="hljs-number">2</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderWidth</span> / <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">2</span>);
    ctx.<span class="hljs-title function_">fill</span>();
    ctx.<span class="hljs-property">globalCompositeOperation</span> = <span class="hljs-string">'source-over'</span>;

    <span class="hljs-comment">// æ·»åŠ é«˜äº®è¾¹æ¡†</span>
    ctx.<span class="hljs-property">strokeStyle</span> = <span class="hljs-string">'rgba(255, 255, 255, 0.8)'</span>;
    ctx.<span class="hljs-property">lineWidth</span> = <span class="hljs-number">2</span>;
    ctx.<span class="hljs-title function_">beginPath</span>();
    ctx.<span class="hljs-title function_">arc</span>(x + <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderWidth</span> / <span class="hljs-number">2</span>, y + <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderHeight</span> / <span class="hljs-number">2</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderWidth</span> / <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">2</span>);
    ctx.<span class="hljs-title function_">stroke</span>();
  }

  <span class="hljs-title function_">extractSlider</span>(<span class="hljs-params">sliderCtx, bgCtx, x, y</span>) {
    <span class="hljs-comment">// ä»èƒŒæ™¯ä¸­æå–æ»‘å—åŒºåŸŸ</span>
    <span class="hljs-keyword">const</span> imageData = bgCtx.<span class="hljs-title function_">getImageData</span>(x, <span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderWidth</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span>);
    sliderCtx.<span class="hljs-title function_">putImageData</span>(imageData, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
  }
}

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CaptchaService</span>();
</code></pre>
<h4 data-id="heading-24">2. è¡Œä¸ºåˆ†æéªŒè¯å™¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/services/validator.js</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BehaviorValidator</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å„ç»´åº¦æƒé‡é…ç½®</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">weights</span> = {
      <span class="hljs-attr">trajectory</span>: <span class="hljs-number">0.3</span>,    <span class="hljs-comment">// è½¨è¿¹éçº¿æ€§</span>
      <span class="hljs-attr">speed</span>: <span class="hljs-number">0.25</span>,        <span class="hljs-comment">// é€Ÿåº¦å˜åŒ–</span>
      <span class="hljs-attr">acceleration</span>: <span class="hljs-number">0.25</span>, <span class="hljs-comment">// åŠ é€Ÿåº¦æ¨¡å¼</span>
      <span class="hljs-attr">timeWindow</span>: <span class="hljs-number">0.2</span>     <span class="hljs-comment">// æ—¶é—´çª—å£</span>
    };

    <span class="hljs-comment">// é˜ˆå€¼é…ç½®</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">thresholds</span> = {
      <span class="hljs-attr">minTrajectoryPoints</span>: <span class="hljs-number">10</span>,    <span class="hljs-comment">// æœ€å°‘è½¨è¿¹ç‚¹æ•°</span>
      <span class="hljs-attr">maxLinearDeviation</span>: <span class="hljs-number">0.15</span>,   <span class="hljs-comment">// æœ€å¤§çº¿æ€§åå·®</span>
      <span class="hljs-attr">minSpeedVariance</span>: <span class="hljs-number">0.5</span>,      <span class="hljs-comment">// æœ€å°é€Ÿåº¦æ–¹å·®</span>
      <span class="hljs-attr">minCompletionTime</span>: <span class="hljs-number">200</span>,     <span class="hljs-comment">// æœ€å°å®Œæˆæ—¶é—´ï¼ˆmsï¼‰</span>
      <span class="hljs-attr">maxCompletionTime</span>: <span class="hljs-number">10000</span>    <span class="hljs-comment">// æœ€å¤§å®Œæˆæ—¶é—´ï¼ˆmsï¼‰</span>
    };
  }

  <span class="hljs-comment">// ç»¼åˆéªŒè¯</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">validate</span>(<span class="hljs-params">trajectory, finalX, finalY, captchaData, clientTimestamp</span>) {
    <span class="hljs-keyword">const</span> results = {
      <span class="hljs-attr">position</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">validatePosition</span>(finalX, finalY, captchaData),
      <span class="hljs-attr">trajectory</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">validateTrajectory</span>(trajectory),
      <span class="hljs-attr">speed</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">validateSpeed</span>(trajectory),
      <span class="hljs-attr">acceleration</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">validateAcceleration</span>(trajectory),
      <span class="hljs-attr">timeWindow</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">validateTimeWindow</span>(captchaData.<span class="hljs-property">createdAt</span>, clientTimestamp, trajectory)
    };

    <span class="hljs-comment">// è®¡ç®—ç»¼åˆå¾—åˆ†</span>
    <span class="hljs-keyword">const</span> totalScore = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">weights</span>).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, key</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> sum + (results[key].<span class="hljs-property">score</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">weights</span>[key]);
    }, <span class="hljs-number">0</span>);

    <span class="hljs-comment">// ä½ç½®éªŒè¯å¿…é¡»é€šè¿‡</span>
    <span class="hljs-keyword">const</span> isValid = results.<span class="hljs-property">position</span>.<span class="hljs-property">valid</span> &amp;&amp; totalScore &gt;= <span class="hljs-number">70</span>;

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">valid</span>: isValid,
      <span class="hljs-attr">score</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(totalScore),
      <span class="hljs-attr">details</span>: results
    };
  }

  <span class="hljs-comment">// ä½ç½®éªŒè¯</span>
  <span class="hljs-title function_">validatePosition</span>(<span class="hljs-params">x, y, captchaData</span>) {
    <span class="hljs-keyword">const</span> xDiff = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(x - captchaData.<span class="hljs-property">targetX</span>);
    <span class="hljs-keyword">const</span> yDiff = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(y - captchaData.<span class="hljs-property">targetY</span>);
    <span class="hljs-keyword">const</span> tolerance = <span class="hljs-number">5</span>;

    <span class="hljs-keyword">const</span> valid = xDiff &lt;= tolerance &amp;&amp; yDiff &lt;= tolerance;

    <span class="hljs-keyword">return</span> {
      valid,
      <span class="hljs-attr">score</span>: valid ? <span class="hljs-number">100</span> : <span class="hljs-number">0</span>,
      <span class="hljs-attr">details</span>: { xDiff, yDiff, <span class="hljs-attr">targetX</span>: captchaData.<span class="hljs-property">targetX</span>, <span class="hljs-attr">targetY</span>: captchaData.<span class="hljs-property">targetY</span> }
    };
  }

  <span class="hljs-comment">// è½¨è¿¹éªŒè¯</span>
  <span class="hljs-title function_">validateTrajectory</span>(<span class="hljs-params">trajectory</span>) {
    <span class="hljs-keyword">if</span> (trajectory.<span class="hljs-property">length</span> &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">thresholds</span>.<span class="hljs-property">minTrajectoryPoints</span>) {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">score</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">reason</span>: <span class="hljs-string">`Too few trajectory points: <span class="hljs-subst">${trajectory.length}</span>`</span>
      };
    }

    <span class="hljs-comment">// è®¡ç®—è½¨è¿¹éçº¿æ€§åº¦</span>
    <span class="hljs-keyword">const</span> deviations = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">2</span>; i &lt; trajectory.<span class="hljs-property">length</span>; i++) {
      <span class="hljs-keyword">const</span> p1 = trajectory[i - <span class="hljs-number">2</span>];
      <span class="hljs-keyword">const</span> p2 = trajectory[i - <span class="hljs-number">1</span>];
      <span class="hljs-keyword">const</span> p3 = trajectory[i];

      <span class="hljs-keyword">const</span> angle1 = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(p2.<span class="hljs-property">y</span> - p1.<span class="hljs-property">y</span>, p2.<span class="hljs-property">x</span> - p1.<span class="hljs-property">x</span>);
      <span class="hljs-keyword">const</span> angle2 = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(p3.<span class="hljs-property">y</span> - p2.<span class="hljs-property">y</span>, p3.<span class="hljs-property">x</span> - p2.<span class="hljs-property">x</span>);
      <span class="hljs-keyword">const</span> deviation = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(angle2 - angle1);
      deviations.<span class="hljs-title function_">push</span>(deviation);
    }

    <span class="hljs-keyword">const</span> avgDeviation = deviations.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / deviations.<span class="hljs-property">length</span>;
    <span class="hljs-keyword">const</span> isLinear = avgDeviation &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">thresholds</span>.<span class="hljs-property">maxLinearDeviation</span>;

    <span class="hljs-comment">// éçº¿æ€§åº¦è¶Šé«˜ï¼Œå¾—åˆ†è¶Šé«˜ï¼ˆäººç±»ç‰¹å¾ï¼‰</span>
    <span class="hljs-keyword">const</span> score = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">100</span>, avgDeviation * <span class="hljs-number">200</span>);

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">valid</span>: !isLinear,
      score,
      <span class="hljs-attr">details</span>: { avgDeviation, <span class="hljs-attr">pointCount</span>: trajectory.<span class="hljs-property">length</span>, isLinear }
    };
  }

  <span class="hljs-comment">// é€Ÿåº¦éªŒè¯</span>
  <span class="hljs-title function_">validateSpeed</span>(<span class="hljs-params">trajectory</span>) {
    <span class="hljs-keyword">const</span> speeds = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; trajectory.<span class="hljs-property">length</span>; i++) {
      <span class="hljs-keyword">const</span> prev = trajectory[i - <span class="hljs-number">1</span>];
      <span class="hljs-keyword">const</span> curr = trajectory[i];
      <span class="hljs-keyword">const</span> distance = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(
        <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(curr.<span class="hljs-property">x</span> - prev.<span class="hljs-property">x</span>, <span class="hljs-number">2</span>) + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(curr.<span class="hljs-property">y</span> - prev.<span class="hljs-property">y</span>, <span class="hljs-number">2</span>)
      );
      <span class="hljs-keyword">const</span> timeDiff = curr.<span class="hljs-property">t</span> - prev.<span class="hljs-property">t</span>;
      <span class="hljs-keyword">if</span> (timeDiff &gt; <span class="hljs-number">0</span>) {
        speeds.<span class="hljs-title function_">push</span>(distance / timeDiff);
      }
    }

    <span class="hljs-keyword">if</span> (speeds.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">score</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'No speed data'</span> };
    }

    <span class="hljs-keyword">const</span> avgSpeed = speeds.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / speeds.<span class="hljs-property">length</span>;
    <span class="hljs-keyword">const</span> variance = speeds.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, speed</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> sum + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(speed - avgSpeed, <span class="hljs-number">2</span>);
    }, <span class="hljs-number">0</span>) / speeds.<span class="hljs-property">length</span>;

    <span class="hljs-keyword">const</span> isConstantSpeed = variance &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">thresholds</span>.<span class="hljs-property">minSpeedVariance</span>;

    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰åŠ é€Ÿ-å‡é€Ÿè¿‡ç¨‹</span>
    <span class="hljs-keyword">let</span> hasAccelDecel = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (speeds.<span class="hljs-property">length</span> &gt; <span class="hljs-number">10</span>) {
      <span class="hljs-keyword">const</span> mid = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(speeds.<span class="hljs-property">length</span> / <span class="hljs-number">2</span>);
      <span class="hljs-keyword">const</span> firstHalf = speeds.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, mid);
      <span class="hljs-keyword">const</span> secondHalf = speeds.<span class="hljs-title function_">slice</span>(mid);
      <span class="hljs-keyword">const</span> avgFirst = firstHalf.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / firstHalf.<span class="hljs-property">length</span>;
      <span class="hljs-keyword">const</span> avgSecond = secondHalf.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / secondHalf.<span class="hljs-property">length</span>;
      hasAccelDecel = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(avgFirst - avgSecond) &gt; avgSpeed * <span class="hljs-number">0.2</span>;
    }

    <span class="hljs-keyword">const</span> score = (!isConstantSpeed &amp;&amp; hasAccelDecel) ? <span class="hljs-number">100</span> : 
                  (!isConstantSpeed || hasAccelDecel) ? <span class="hljs-number">70</span> : <span class="hljs-number">30</span>;

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">valid</span>: !isConstantSpeed,
      score,
      <span class="hljs-attr">details</span>: { variance, hasAccelDecel, avgSpeed, isConstantSpeed }
    };
  }

  <span class="hljs-comment">// åŠ é€Ÿåº¦éªŒè¯</span>
  <span class="hljs-title function_">validateAcceleration</span>(<span class="hljs-params">trajectory</span>) {
    <span class="hljs-keyword">const</span> speeds = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; trajectory.<span class="hljs-property">length</span>; i++) {
      <span class="hljs-keyword">const</span> prev = trajectory[i - <span class="hljs-number">1</span>];
      <span class="hljs-keyword">const</span> curr = trajectory[i];
      <span class="hljs-keyword">const</span> distance = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(
        <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(curr.<span class="hljs-property">x</span> - prev.<span class="hljs-property">x</span>, <span class="hljs-number">2</span>) + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(curr.<span class="hljs-property">y</span> - prev.<span class="hljs-property">y</span>, <span class="hljs-number">2</span>)
      );
      <span class="hljs-keyword">const</span> timeDiff = curr.<span class="hljs-property">t</span> - prev.<span class="hljs-property">t</span>;
      <span class="hljs-keyword">if</span> (timeDiff &gt; <span class="hljs-number">0</span>) {
        speeds.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">speed</span>: distance / timeDiff, <span class="hljs-attr">time</span>: curr.<span class="hljs-property">t</span> });
      }
    }

    <span class="hljs-keyword">if</span> (speeds.<span class="hljs-property">length</span> &lt; <span class="hljs-number">2</span>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">score</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'Insufficient data'</span> };
    }

    <span class="hljs-keyword">const</span> accelerations = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; speeds.<span class="hljs-property">length</span>; i++) {
      <span class="hljs-keyword">const</span> speedDiff = speeds[i].<span class="hljs-property">speed</span> - speeds[i - <span class="hljs-number">1</span>].<span class="hljs-property">speed</span>;
      <span class="hljs-keyword">const</span> timeDiff = speeds[i].<span class="hljs-property">time</span> - speeds[i - <span class="hljs-number">1</span>].<span class="hljs-property">time</span>;
      <span class="hljs-keyword">if</span> (timeDiff &gt; <span class="hljs-number">0</span>) {
        accelerations.<span class="hljs-title function_">push</span>(speedDiff / timeDiff);
      }
    }

    <span class="hljs-keyword">if</span> (accelerations.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">score</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'No acceleration data'</span> };
    }

    <span class="hljs-comment">// åˆ†æåŠ é€Ÿåº¦æ¨¡å¼</span>
    <span class="hljs-keyword">const</span> total = accelerations.<span class="hljs-property">length</span>;
    <span class="hljs-keyword">const</span> firstThird = accelerations.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(total / <span class="hljs-number">3</span>));
    <span class="hljs-keyword">const</span> lastThird = accelerations.<span class="hljs-title function_">slice</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(total * <span class="hljs-number">2</span> / <span class="hljs-number">3</span>));

    <span class="hljs-keyword">const</span> avgFirst = firstThird.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / firstThird.<span class="hljs-property">length</span> || <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> avgLast = lastThird.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / lastThird.<span class="hljs-property">length</span> || <span class="hljs-number">0</span>;

    <span class="hljs-comment">// æ­£å¸¸æ¨¡å¼ï¼šå‰åŠæ®µåŠ é€Ÿï¼ˆæ­£åŠ é€Ÿåº¦ï¼‰ï¼ŒååŠæ®µå‡é€Ÿï¼ˆè´ŸåŠ é€Ÿåº¦ï¼‰</span>
    <span class="hljs-keyword">const</span> hasNaturalPattern = avgFirst &gt; <span class="hljs-number">0.03</span> &amp;&amp; avgLast &lt; -<span class="hljs-number">0.03</span>;

    <span class="hljs-keyword">const</span> score = hasNaturalPattern ? <span class="hljs-number">100</span> : 
                  (avgFirst &gt; <span class="hljs-number">0</span> || avgLast &lt; <span class="hljs-number">0</span>) ? <span class="hljs-number">60</span> : <span class="hljs-number">20</span>;

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">valid</span>: hasNaturalPattern,
      score,
      <span class="hljs-attr">details</span>: { avgFirst, avgLast, hasNaturalPattern }
    };
  }

  <span class="hljs-comment">// æ—¶é—´çª—å£éªŒè¯</span>
  <span class="hljs-title function_">validateTimeWindow</span>(<span class="hljs-params">createdAt, clientTimestamp, trajectory</span>) {
    <span class="hljs-keyword">const</span> serverTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    
    <span class="hljs-comment">// æ£€æŸ¥Redisä¸­çš„tokenæ˜¯å¦åœ¨æœ‰æ•ˆæœŸ</span>
    <span class="hljs-keyword">if</span> (serverTime - createdAt &gt; <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">score</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'Token expired'</span> };
    }

    <span class="hljs-comment">// æ£€æŸ¥å®¢æˆ·ç«¯å£°ç§°çš„å®Œæˆæ—¶é—´</span>
    <span class="hljs-keyword">const</span> claimedDuration = clientTimestamp - createdAt;
    <span class="hljs-keyword">if</span> (claimedDuration &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">thresholds</span>.<span class="hljs-property">minCompletionTime</span>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">score</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'Suspiciously fast'</span> };
    }
    <span class="hljs-keyword">if</span> (claimedDuration &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">thresholds</span>.<span class="hljs-property">maxCompletionTime</span>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">score</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'Suspiciously slow'</span> };
    }

    <span class="hljs-comment">// éªŒè¯è½¨è¿¹æ—¶é—´å’Œå£°ç§°æ—¶é—´æ˜¯å¦ä¸€è‡´ï¼ˆé˜²ç¯¡æ”¹ï¼‰</span>
    <span class="hljs-keyword">if</span> (trajectory.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">const</span> trajectoryDuration = trajectory[trajectory.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>].<span class="hljs-property">t</span>;
      <span class="hljs-keyword">const</span> timeDiff = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(trajectoryDuration - claimedDuration);
      <span class="hljs-keyword">if</span> (timeDiff &gt; <span class="hljs-number">1000</span>) { <span class="hljs-comment">// ç›¸å·®è¶…è¿‡1ç§’ï¼Œå¯èƒ½é€ å‡</span>
        <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">score</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'Time mismatch'</span> };
      }
    }

    <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">score</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">details</span>: { <span class="hljs-attr">duration</span>: claimedDuration } };
  }
}

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BehaviorValidator</span>();
</code></pre>
<h4 data-id="heading-25">3. Expressæ§åˆ¶å™¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/controllers/captcha.js</span>
<span class="hljs-keyword">const</span> captchaService = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../services/captcha'</span>);
<span class="hljs-keyword">const</span> behaviorValidator = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../services/validator'</span>);
<span class="hljs-keyword">const</span> redis = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../config/redis'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Joi</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'joi'</span>);

<span class="hljs-keyword">const</span> verifySchema = <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">object</span>({
  <span class="hljs-attr">token</span>: <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">string</span>().required(),
  <span class="hljs-attr">x</span>: <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">number</span>().required(),
  <span class="hljs-attr">y</span>: <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">number</span>().required(),
  <span class="hljs-attr">trajectory</span>: <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">array</span>().<span class="hljs-title function_">items</span>(
    <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">object</span>({
      <span class="hljs-attr">x</span>: <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">number</span>().required(),
      <span class="hljs-attr">y</span>: <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">number</span>().required(),
      <span class="hljs-attr">t</span>: <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">number</span>().required()
    })
  ).required(),
  <span class="hljs-attr">clientTimestamp</span>: <span class="hljs-title class_">Joi</span>.<span class="hljs-title function_">number</span>().required()
});

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CaptchaController</span> {
  <span class="hljs-comment">// è·å–éªŒè¯ç </span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getCaptcha</span>(<span class="hljs-params">req, res</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// é™æµæ£€æŸ¥ï¼ˆå¯é€‰ï¼‰</span>
      <span class="hljs-keyword">const</span> clientIp = req.<span class="hljs-property">ip</span>;
      <span class="hljs-keyword">const</span> rateKey = <span class="hljs-string">`rate:<span class="hljs-subst">${clientIp}</span>`</span>;
      <span class="hljs-keyword">const</span> requestCount = <span class="hljs-keyword">await</span> redis.<span class="hljs-title function_">incr</span>(rateKey);
      <span class="hljs-keyword">if</span> (requestCount === <span class="hljs-number">1</span>) {
        <span class="hljs-keyword">await</span> redis.<span class="hljs-title function_">expire</span>(rateKey, <span class="hljs-number">60</span>); <span class="hljs-comment">// 1åˆ†é’Ÿè¿‡æœŸ</span>
      }
      <span class="hljs-keyword">if</span> (requestCount &gt; <span class="hljs-number">10</span>) {
        <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">429</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Too many requests'</span> });
      }

      <span class="hljs-keyword">const</span> captcha = <span class="hljs-keyword">await</span> captchaService.<span class="hljs-title function_">generate</span>();
      res.<span class="hljs-title function_">json</span>(captcha);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Generate captcha error:'</span>, error);
      res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Failed to generate captcha'</span> });
    }
  }

  <span class="hljs-comment">// éªŒè¯éªŒè¯ç </span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">verifyCaptcha</span>(<span class="hljs-params">req, res</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// å‚æ•°æ ¡éªŒ</span>
      <span class="hljs-keyword">const</span> { error, value } = verifySchema.<span class="hljs-title function_">validate</span>(req.<span class="hljs-property">body</span>);
      <span class="hljs-keyword">if</span> (error) {
        <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">400</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: error.<span class="hljs-property">details</span>[<span class="hljs-number">0</span>].<span class="hljs-property">message</span> });
      }

      <span class="hljs-keyword">const</span> { token, x, y, trajectory, clientTimestamp } = value;

      <span class="hljs-comment">// è·å–å­˜å‚¨çš„éªŒè¯ç æ•°æ®</span>
      <span class="hljs-keyword">const</span> captchaDataStr = <span class="hljs-keyword">await</span> redis.<span class="hljs-title function_">get</span>(<span class="hljs-string">`captcha:<span class="hljs-subst">${token}</span>`</span>);
      <span class="hljs-keyword">if</span> (!captchaDataStr) {
        <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">400</span>).<span class="hljs-title function_">json</span>({ 
          <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, 
          <span class="hljs-attr">error</span>: <span class="hljs-string">'Captcha expired or invalid'</span> 
        });
      }

      <span class="hljs-keyword">const</span> captchaData = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(captchaDataStr);

      <span class="hljs-comment">// æ£€æŸ¥å°è¯•æ¬¡æ•°</span>
      captchaData.<span class="hljs-property">attempts</span> = (captchaData.<span class="hljs-property">attempts</span> || <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>;
      <span class="hljs-keyword">if</span> (captchaData.<span class="hljs-property">attempts</span> &gt; <span class="hljs-number">3</span>) {
        <span class="hljs-keyword">await</span> redis.<span class="hljs-title function_">del</span>(<span class="hljs-string">`captcha:<span class="hljs-subst">${token}</span>`</span>);
        <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">400</span>).<span class="hljs-title function_">json</span>({ 
          <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, 
          <span class="hljs-attr">error</span>: <span class="hljs-string">'Too many attempts'</span> 
        });
      }
      <span class="hljs-keyword">await</span> redis.<span class="hljs-title function_">setex</span>(<span class="hljs-string">`captcha:<span class="hljs-subst">${token}</span>`</span>, <span class="hljs-number">300</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(captchaData));

      <span class="hljs-comment">// æ‰§è¡Œç»¼åˆéªŒè¯</span>
      <span class="hljs-keyword">const</span> validationResult = <span class="hljs-keyword">await</span> behaviorValidator.<span class="hljs-title function_">validate</span>(
        trajectory, x, y, captchaData, clientTimestamp
      );

      <span class="hljs-keyword">if</span> (validationResult.<span class="hljs-property">valid</span>) {
        <span class="hljs-comment">// éªŒè¯é€šè¿‡ï¼Œåˆ é™¤tokenå¹¶é¢å‘è®¿é—®token</span>
        <span class="hljs-keyword">await</span> redis.<span class="hljs-title function_">del</span>(<span class="hljs-string">`captcha:<span class="hljs-subst">${token}</span>`</span>);
        
        <span class="hljs-comment">// ç”Ÿæˆä¸´æ—¶è®¿é—®tokenï¼ˆç”¨äºåç»­ä¸šåŠ¡è¯·æ±‚ï¼‰</span>
        <span class="hljs-keyword">const</span> accessToken = <span class="hljs-built_in">require</span>(<span class="hljs-string">'crypto'</span>).<span class="hljs-title function_">randomBytes</span>(<span class="hljs-number">32</span>).<span class="hljs-title function_">toString</span>(<span class="hljs-string">'hex'</span>);
        <span class="hljs-keyword">await</span> redis.<span class="hljs-title function_">setex</span>(<span class="hljs-string">`access:<span class="hljs-subst">${accessToken}</span>`</span>, <span class="hljs-number">600</span>, <span class="hljs-string">'verified'</span>);

        res.<span class="hljs-title function_">json</span>({
          <span class="hljs-attr">valid</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">score</span>: validationResult.<span class="hljs-property">score</span>,
          accessToken
        });
      } <span class="hljs-keyword">else</span> {
        res.<span class="hljs-title function_">json</span>({
          <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">score</span>: validationResult.<span class="hljs-property">score</span>,
          <span class="hljs-attr">reason</span>: validationResult.<span class="hljs-property">details</span>,
          <span class="hljs-attr">remainingAttempts</span>: <span class="hljs-number">3</span> - captchaData.<span class="hljs-property">attempts</span>
        });
      }
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Verify captcha error:'</span>, error);
      res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Verification failed'</span> });
    }
  }
}

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CaptchaController</span>();
</code></pre>
<h4 data-id="heading-26">4. å‰ç«¯é›†æˆç¤ºä¾‹</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æ»‘å—éªŒè¯ç æ¼”ç¤º<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-class">.captcha-container</span> {
            <span class="hljs-attribute">position</span>: relative;
            <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">50px</span> auto;
            user-select: none;
        }
        <span class="hljs-selector-class">.captcha-bg</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">150px</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
        }
        <span class="hljs-selector-class">.slider-track</span> {
            <span class="hljs-attribute">position</span>: relative;
            <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;
            <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>;
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#e0e0e0</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">20px</span>;
        }
        <span class="hljs-selector-class">.slider-btn</span> {
            <span class="hljs-attribute">position</span>: absolute;
            <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">width</span>: <span class="hljs-number">40px</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;
            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
            <span class="hljs-attribute">cursor</span>: pointer;
            <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.1</span>);
            <span class="hljs-attribute">display</span>: flex;
            <span class="hljs-attribute">align-items</span>: center;
            <span class="hljs-attribute">justify-content</span>: center;
        }
        <span class="hljs-selector-class">.slider-btn</span><span class="hljs-selector-pseudo">::before</span> {
            <span class="hljs-attribute">content</span>: <span class="hljs-string">'â†’'</span>;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;
        }
        <span class="hljs-selector-class">.slider-text</span> {
            <span class="hljs-attribute">position</span>: absolute;
            <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;
            <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;
            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(-<span class="hljs-number">50%</span>, -<span class="hljs-number">50%</span>);
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
        }
        <span class="hljs-selector-class">.success</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#52c41a</span> <span class="hljs-meta">!important</span>;
            <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#52c41a</span> <span class="hljs-meta">!important</span>;
        }
        <span class="hljs-selector-class">.success</span><span class="hljs-selector-pseudo">::before</span> {
            <span class="hljs-attribute">content</span>: <span class="hljs-string">'âœ“'</span>;
            <span class="hljs-attribute">color</span>: white;
        }
        <span class="hljs-selector-class">.failed</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#ff4d4f</span> <span class="hljs-meta">!important</span>;
            <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#ff4d4f</span> <span class="hljs-meta">!important</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"captcha-container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"bgImage"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"captcha-bg"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"éªŒè¯ç èƒŒæ™¯"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"slider-track"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sliderBtn"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"slider-btn"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"slider-text"</span>&gt;</span>æ‹–åŠ¨æ»‘å—å®ŒæˆéªŒè¯<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-keyword">class</span> <span class="hljs-title class_">SliderCaptcha</span> {
            <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">token</span> = <span class="hljs-literal">null</span>;
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">trajectory</span> = [];
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">startTime</span> = <span class="hljs-literal">null</span>;
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">isDragging</span> = <span class="hljs-literal">false</span>;
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderBtn</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'sliderBtn'</span>);
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">bgImage</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'bgImage'</span>);
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">trackWidth</span> = <span class="hljs-number">260</span>; <span class="hljs-comment">// å¯æ‹–åŠ¨èŒƒå›´</span>
                
                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
            }

            <span class="hljs-keyword">async</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
                <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadCaptcha</span>();
                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">bindEvents</span>();
            }

            <span class="hljs-keyword">async</span> <span class="hljs-title function_">loadCaptcha</span>(<span class="hljs-params"/>) {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/captcha'</span>);
                    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
                    
                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">token</span> = data.<span class="hljs-property">token</span>;
                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">bgImage</span>.<span class="hljs-property">src</span> = <span class="hljs-string">`data:image/png;base64,<span class="hljs-subst">${data.bgImage}</span>`</span>;
                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderData</span> = data;
                } <span class="hljs-keyword">catch</span> (error) {
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to load captcha:'</span>, error);
                }
            }

            <span class="hljs-title function_">bindEvents</span>(<span class="hljs-params"/>) {
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderBtn</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousedown'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onDragStart</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
                <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousemove'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onDragMove</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
                <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mouseup'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onDragEnd</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));

                <span class="hljs-comment">// ç§»åŠ¨ç«¯è§¦æ‘¸äº‹ä»¶</span>
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderBtn</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'touchstart'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onDragStart</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
                <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'touchmove'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onDragMove</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
                <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'touchend'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onDragEnd</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
            }

            <span class="hljs-title function_">onDragStart</span>(<span class="hljs-params">e</span>) {
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">isDragging</span> = <span class="hljs-literal">true</span>;
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">startTime</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">trajectory</span> = [];
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">startX</span> = e.<span class="hljs-property">type</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'touch'</span>) ? e.<span class="hljs-property">touches</span>[<span class="hljs-number">0</span>].<span class="hljs-property">clientX</span> : e.<span class="hljs-property">clientX</span>;
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderStartLeft</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderBtn</span>.<span class="hljs-property">offsetLeft</span>;
            }

            <span class="hljs-title function_">onDragMove</span>(<span class="hljs-params">e</span>) {
                <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isDragging</span>) <span class="hljs-keyword">return</span>;

                <span class="hljs-keyword">const</span> clientX = e.<span class="hljs-property">type</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'touch'</span>) ? e.<span class="hljs-property">touches</span>[<span class="hljs-number">0</span>].<span class="hljs-property">clientX</span> : e.<span class="hljs-property">clientX</span>;
                <span class="hljs-keyword">const</span> deltaX = clientX - <span class="hljs-variable language_">this</span>.<span class="hljs-property">startX</span>;
                <span class="hljs-keyword">let</span> newLeft = <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderStartLeft</span> + deltaX;

                <span class="hljs-comment">// é™åˆ¶èŒƒå›´</span>
                newLeft = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(newLeft, <span class="hljs-variable language_">this</span>.<span class="hljs-property">trackWidth</span>));
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderBtn</span>.<span class="hljs-property">style</span>.<span class="hljs-property">left</span> = newLeft + <span class="hljs-string">'px'</span>;

                <span class="hljs-comment">// è®°å½•è½¨è¿¹ç‚¹</span>
                <span class="hljs-keyword">const</span> timestamp = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - <span class="hljs-variable language_">this</span>.<span class="hljs-property">startTime</span>;
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">trajectory</span>.<span class="hljs-title function_">push</span>({
                    <span class="hljs-attr">x</span>: newLeft,
                    <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// ç®€åŒ–å¤„ç†ï¼Œå‡è®¾Yä¸å˜</span>
                    <span class="hljs-attr">t</span>: timestamp
                });
            }

            <span class="hljs-keyword">async</span> <span class="hljs-title function_">onDragEnd</span>(<span class="hljs-params">e</span>) {
                <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isDragging</span>) <span class="hljs-keyword">return</span>;
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">isDragging</span> = <span class="hljs-literal">false</span>;

                <span class="hljs-keyword">const</span> finalX = <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderBtn</span>.<span class="hljs-property">offsetLeft</span>;
                <span class="hljs-keyword">const</span> finalY = <span class="hljs-number">0</span>;

                <span class="hljs-keyword">try</span> {
                    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/captcha/verify'</span>, {
                        <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
                        <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> },
                        <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
                            <span class="hljs-attr">token</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">token</span>,
                            <span class="hljs-attr">x</span>: finalX,
                            <span class="hljs-attr">y</span>: finalY,
                            <span class="hljs-attr">trajectory</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">trajectory</span>,
                            <span class="hljs-attr">clientTimestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
                        })
                    });

                    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
                    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleResult</span>(result);
                } <span class="hljs-keyword">catch</span> (error) {
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Verification failed:'</span>, error);
                    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reset</span>();
                }
            }

            <span class="hljs-title function_">handleResult</span>(<span class="hljs-params">result</span>) {
                <span class="hljs-keyword">if</span> (result.<span class="hljs-property">valid</span>) {
                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderBtn</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'success'</span>);
                    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.slider-text'</span>).<span class="hljs-property">textContent</span> = <span class="hljs-string">'éªŒè¯æˆåŠŸ'</span>;
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'éªŒè¯é€šè¿‡ï¼Œå¾—åˆ†:'</span>, result.<span class="hljs-property">score</span>);
                    
                    <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œè§¦å‘åç»­ä¸šåŠ¡é€»è¾‘</span>
                    <span class="hljs-keyword">if</span> (result.<span class="hljs-property">accessToken</span>) {
                        <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'captchaToken'</span>, result.<span class="hljs-property">accessToken</span>);
                    }
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderBtn</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'failed'</span>);
                    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.slider-text'</span>).<span class="hljs-property">textContent</span> = 
                        <span class="hljs-string">`éªŒè¯å¤±è´¥ï¼Œè¿˜å‰©<span class="hljs-subst">${result.remainingAttempts || <span class="hljs-number">0</span>}</span>æ¬¡æœºä¼š`</span>;
                    
                    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
                        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reset</span>();
                    }, <span class="hljs-number">1500</span>);
                }
            }

            <span class="hljs-title function_">reset</span>(<span class="hljs-params"/>) {
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderBtn</span>.<span class="hljs-property">style</span>.<span class="hljs-property">left</span> = <span class="hljs-string">'0px'</span>;
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">sliderBtn</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'success'</span>, <span class="hljs-string">'failed'</span>);
                <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.slider-text'</span>).<span class="hljs-property">textContent</span> = <span class="hljs-string">'æ‹–åŠ¨æ»‘å—å®ŒæˆéªŒè¯'</span>;
                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadCaptcha</span>(); <span class="hljs-comment">// é‡æ–°åŠ è½½éªŒè¯ç </span>
            }
        }

        <span class="hljs-comment">// åˆå§‹åŒ–</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">SliderCaptcha</span>();
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 data-id="heading-27">éƒ¨ç½²è¿è¡Œ</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å®‰è£…ä¾èµ–</span>
npm install express redis canvas joi

<span class="hljs-comment"># 2. å¯åŠ¨Redis</span>
redis-server

<span class="hljs-comment"># 3. å¯åŠ¨æœåŠ¡</span>
node src/app.js

<span class="hljs-comment"># 4. è®¿é—®æµ‹è¯•</span>
open http://localhost:3000
</code></pre>
<h2 data-id="heading-28">ç»•è¿‡ä¸ååˆ¶ï¼šæ”»é˜²å®æˆ˜</h2>
<p>è¯´äº†é‚£ä¹ˆå¤šé˜²å¾¡ï¼Œæˆ‘ä»¬ä¹Ÿæ¥çœ‹çœ‹æ”»å‡»è€…æ˜¯æ€ä¹ˆæƒ³çš„ã€‚çŸ¥å·±çŸ¥å½¼ï¼Œæ‰èƒ½ç™¾æˆ˜ä¸æ®†ã€‚</p>
<h3 data-id="heading-29">å¸¸è§çš„ç»•è¿‡æ–¹æ¡ˆ</h3>
<h4 data-id="heading-30">1. Puppeteerè‡ªåŠ¨åŒ–ç ´è§£</h4>
<p>è¿™æ˜¯æœ€åŸºç¡€çš„è‡ªåŠ¨åŒ–æ–¹æ¡ˆï¼Œä½¿ç”¨æ— å¤´æµè§ˆå™¨æ¨¡æ‹Ÿäººç±»æ“ä½œã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ”»å‡»è€…è§†è§’ï¼ˆä»…ç”¨äºäº†è§£é˜²å¾¡ç­–ç•¥ï¼‰</span>
<span class="hljs-keyword">const</span> puppeteer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'puppeteer'</span>);

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">crackCaptcha</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> browser = <span class="hljs-keyword">await</span> puppeteer.<span class="hljs-title function_">launch</span>();
  <span class="hljs-keyword">const</span> page = <span class="hljs-keyword">await</span> browser.<span class="hljs-title function_">newPage</span>();
  
  <span class="hljs-keyword">await</span> page.<span class="hljs-title function_">goto</span>(<span class="hljs-string">'http://target.com'</span>);
  
  <span class="hljs-comment">// è·å–æ»‘å—å…ƒç´ </span>
  <span class="hljs-keyword">const</span> slider = <span class="hljs-keyword">await</span> page.$(<span class="hljs-string">'.slider-btn'</span>);
  <span class="hljs-keyword">const</span> sliderBox = <span class="hljs-keyword">await</span> slider.<span class="hljs-title function_">boundingBox</span>();
  
  <span class="hljs-comment">// æ¨¡æ‹Ÿäººç±»æ‹–åŠ¨ï¼ˆè´å¡å°”æ›²çº¿ï¼‰</span>
  <span class="hljs-keyword">await</span> page.<span class="hljs-property">mouse</span>.<span class="hljs-title function_">move</span>(sliderBox.<span class="hljs-property">x</span> + sliderBox.<span class="hljs-property">width</span> / <span class="hljs-number">2</span>, sliderBox.<span class="hljs-property">y</span> + sliderBox.<span class="hljs-property">height</span> / <span class="hljs-number">2</span>);
  <span class="hljs-keyword">await</span> page.<span class="hljs-property">mouse</span>.<span class="hljs-title function_">down</span>();
  
  <span class="hljs-comment">// ä½¿ç”¨è´å¡å°”æ›²çº¿æ¨¡æ‹Ÿéçº¿æ€§è½¨è¿¹</span>
  <span class="hljs-keyword">const</span> targetX = sliderBox.<span class="hljs-property">x</span> + <span class="hljs-number">150</span>; <span class="hljs-comment">// å‡è®¾ç›®æ ‡ä½ç½®</span>
  <span class="hljs-keyword">const</span> steps = <span class="hljs-number">50</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt;= steps; i++) {
    <span class="hljs-keyword">const</span> t = i / steps;
    <span class="hljs-comment">// è´å¡å°”æ›²çº¿å…¬å¼</span>
    <span class="hljs-keyword">const</span> x = sliderBox.<span class="hljs-property">x</span> + (targetX - sliderBox.<span class="hljs-property">x</span>) * (<span class="hljs-number">3</span> * t * t - <span class="hljs-number">2</span> * t * t * t);
    <span class="hljs-keyword">const</span> y = sliderBox.<span class="hljs-property">y</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(t * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>) * <span class="hljs-number">10</span>; <span class="hljs-comment">// æ·»åŠ Yè½´æ‰°åŠ¨</span>
    <span class="hljs-keyword">await</span> page.<span class="hljs-property">mouse</span>.<span class="hljs-title function_">move</span>(x, y);
    <span class="hljs-keyword">await</span> page.<span class="hljs-title function_">waitForTimeout</span>(<span class="hljs-number">10</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">20</span>); <span class="hljs-comment">// éšæœºå»¶è¿Ÿ</span>
  }
  
  <span class="hljs-keyword">await</span> page.<span class="hljs-property">mouse</span>.<span class="hljs-title function_">up</span>();
}
</code></pre>
<p><strong>é˜²å¾¡ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>æ£€æµ‹ <code>navigator.webdriver</code> å±æ€§</li>
<li>åˆ†æè½¨è¿¹çš„éšæœºæ€§ï¼ˆè´å¡å°”æ›²çº¿è¿‡äºå¹³æ»‘ï¼‰</li>
<li>æ£€æŸ¥é¼ æ ‡äº‹ä»¶çš„çœŸå®æ€§</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‰ç«¯æ£€æµ‹Puppeteer</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">detectAutomation</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> indicators = [
    navigator.<span class="hljs-property">webdriver</span>,
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">callPhantom</span>,
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">_phantom</span>,
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">Buffer</span>,
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">emit</span>
  ];
  
  <span class="hljs-keyword">if</span> (indicators.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> i)) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ£€æµ‹åˆ°è‡ªåŠ¨åŒ–å·¥å…·'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
</code></pre>
<h4 data-id="heading-31">2. AIè§†è§‰ç ´è§£</h4>
<p>ä½¿ç”¨è®¡ç®—æœºè§†è§‰æŠ€æœ¯è¯†åˆ«ç¼ºå£ä½ç½®ï¼Œç„¶åç›´æ¥æ‹–åŠ¨åˆ°ä½ã€‚</p>
<p><strong>é˜²å¾¡ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>éšæœºç¼ºå£å½¢çŠ¶ï¼ˆä¸åªæ˜¯åœ†å½¢ï¼‰</li>
<li>å¹²æ‰°èƒŒæ™¯å›¾æ¡ˆ</li>
<li>åŠ¨æ€ç”Ÿæˆçš„ç¼ºå£è¾¹ç¼˜</li>
</ul>
<h4 data-id="heading-32">3. CAPTCHAå†œåœºï¼ˆäººå·¥æ‰“ç ï¼‰</h4>
<p>è¿™æ˜¯æœ€éš¾é˜²å¾¡çš„æ”»å‡»æ–¹å¼ã€‚æ”»å‡»è€…é›‡ä½£çœŸäººæ‰‹åŠ¨å®ŒæˆéªŒè¯ç ï¼Œç„¶åå‡ºå”®éªŒè¯tokenã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown">CAPTCHAå†œåœºæµç¨‹:
<span class="hljs-bullet">1.</span> æ”»å‡»è€…ä»å†œåœºè´­ä¹°éªŒè¯token
<span class="hljs-bullet">2.</span> å†œåœºå·¥äººç™»å½•ç³»ç»Ÿï¼Œæ‰‹åŠ¨å®ŒæˆéªŒè¯
<span class="hljs-bullet">3.</span> tokenè¢«è½¬å–ç»™æ”»å‡»è€…ä½¿ç”¨
</code></pre>
<p><strong>é˜²å¾¡ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>è½¨è¿¹ç›¸ä¼¼åº¦åˆ†æï¼ˆåŒä¸€å·¥äººçš„è½¨è¿¹æ¨¡å¼ç›¸ä¼¼ï¼‰</li>
<li>è®¾å¤‡æŒ‡çº¹ç»‘å®šï¼ˆtokenåªèƒ½åœ¨ä¸€å°è®¾å¤‡ä½¿ç”¨ï¼‰</li>
<li>åœ°ç†ä½ç½®åˆ†æï¼ˆæ£€æµ‹å¼‚å¸¸ç™»å½•åœ°ç‚¹ï¼‰</li>
<li>è¡Œä¸ºå…³è”åˆ†æï¼ˆçŸ­æ—¶é—´å¤§é‡ç›¸ä¼¼è½¨è¿¹ï¼‰</li>
</ul>
<h2 data-id="heading-33">è¿›é˜¶æ€è€ƒï¼šå¯¹æŠ—CAPTCHAå†œåœº</h2>
<p>æ ¹æ® 2025 å¹´ Multimedia Systems çš„ç ”ç©¶ "CAPTCHA farm detection and user authentication via mouse-trajectory similarity measurement"ï¼Œå¯ä»¥é€šè¿‡è½¨è¿¹ç›¸ä¼¼åº¦æ¥è¯†åˆ«åŒä¸€æ“ä½œè€…çš„å¤šæ¬¡æ“ä½œã€‚</p>
<h3 data-id="heading-34">è½¨è¿¹ç›¸ä¼¼åº¦ç®—æ³•</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è½¨è¿¹ç›¸ä¼¼åº¦è®¡ç®—ï¼ˆDTWç®—æ³•ç®€åŒ–ç‰ˆï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateTrajectorySimilarity</span>(<span class="hljs-params">traj1, traj2</span>) {
  <span class="hljs-comment">// 1. å½’ä¸€åŒ–è½¨è¿¹</span>
  <span class="hljs-keyword">const</span> normalized1 = <span class="hljs-title function_">normalizeTrajectory</span>(traj1);
  <span class="hljs-keyword">const</span> normalized2 = <span class="hljs-title function_">normalizeTrajectory</span>(traj2);

  <span class="hljs-comment">// 2. è®¡ç®—DTWè·ç¦»</span>
  <span class="hljs-keyword">const</span> dtwDistance = <span class="hljs-title function_">dynamicTimeWarping</span>(normalized1, normalized2);

  <span class="hljs-comment">// 3. è½¬æ¢ä¸ºç›¸ä¼¼åº¦å¾—åˆ†</span>
  <span class="hljs-keyword">const</span> similarity = <span class="hljs-number">1</span> / (<span class="hljs-number">1</span> + dtwDistance);

  <span class="hljs-keyword">return</span> similarity;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">normalizeTrajectory</span>(<span class="hljs-params">trajectory</span>) {
  <span class="hljs-comment">// å½’ä¸€åŒ–åˆ°0-1èŒƒå›´</span>
  <span class="hljs-keyword">const</span> xs = trajectory.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> p.<span class="hljs-property">x</span>);
  <span class="hljs-keyword">const</span> ys = trajectory.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> p.<span class="hljs-property">y</span>);
  
  <span class="hljs-keyword">const</span> minX = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(...xs);
  <span class="hljs-keyword">const</span> maxX = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(...xs);
  <span class="hljs-keyword">const</span> minY = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(...ys);
  <span class="hljs-keyword">const</span> maxY = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(...ys);

  <span class="hljs-keyword">return</span> trajectory.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> ({
    <span class="hljs-attr">x</span>: (p.<span class="hljs-property">x</span> - minX) / (maxX - minX),
    <span class="hljs-attr">y</span>: (p.<span class="hljs-property">y</span> - minY) / (maxY - minY),
    <span class="hljs-attr">t</span>: p.<span class="hljs-property">t</span> / trajectory[trajectory.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>].<span class="hljs-property">t</span>
  }));
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">dynamicTimeWarping</span>(<span class="hljs-params">seq1, seq2</span>) {
  <span class="hljs-keyword">const</span> n = seq1.<span class="hljs-property">length</span>;
  <span class="hljs-keyword">const</span> m = seq2.<span class="hljs-property">length</span>;
  <span class="hljs-keyword">const</span> dtw = <span class="hljs-title class_">Array</span>(n + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-literal">null</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Array</span>(m + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-title class_">Infinity</span>));
  dtw[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">1</span>; j &lt;= m; j++) {
      <span class="hljs-keyword">const</span> cost = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(
        <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(seq1[i - <span class="hljs-number">1</span>].<span class="hljs-property">x</span> - seq2[j - <span class="hljs-number">1</span>].<span class="hljs-property">x</span>, <span class="hljs-number">2</span>) +
        <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(seq1[i - <span class="hljs-number">1</span>].<span class="hljs-property">y</span> - seq2[j - <span class="hljs-number">1</span>].<span class="hljs-property">y</span>, <span class="hljs-number">2</span>)
      );
      dtw[i][j] = cost + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(dtw[i - <span class="hljs-number">1</span>][j], dtw[i][j - <span class="hljs-number">1</span>], dtw[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>]);
    }
  }

  <span class="hljs-keyword">return</span> dtw[n][m];
}
</code></pre>
<h3 data-id="heading-35">ä¼ä¸šçº§é˜²å¾¡ä½“ç³»</h3>
<pre><code class="hljs">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ä¼ä¸šçº§éªŒè¯ç é˜²å¾¡ä½“ç³»                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç¬¬ä¸€å±‚: åŸºç¡€éªŒè¯                                        â”‚
â”‚  â”œâ”€ ä½ç½®éªŒè¯                                            â”‚
â”‚  â”œâ”€ æ—¶é—´çª—å£æ§åˆ¶                                         â”‚
â”‚  â””â”€ å°è¯•æ¬¡æ•°é™åˆ¶                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç¬¬äºŒå±‚: è¡Œä¸ºåˆ†æ                                        â”‚
â”‚  â”œâ”€ è½¨è¿¹éçº¿æ€§æ£€æµ‹                                       â”‚
â”‚  â”œâ”€ é€Ÿåº¦å˜åŒ–åˆ†æ                                         â”‚
â”‚  â””â”€ åŠ é€Ÿåº¦æ¨¡å¼è¯†åˆ«                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç¬¬ä¸‰å±‚: æ™ºèƒ½é£æ§                                        â”‚
â”‚  â”œâ”€ è®¾å¤‡æŒ‡çº¹è¯†åˆ«                                         â”‚
â”‚  â”œâ”€ è½¨è¿¹ç›¸ä¼¼åº¦èšç±»                                       â”‚
â”‚  â””â”€ å¼‚å¸¸è¡Œä¸ºæ¨¡å¼è¯†åˆ«                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç¬¬å››å±‚: ä¸šåŠ¡è”åŠ¨                                        â”‚
â”‚  â”œâ”€ é£é™©è¯„åˆ†ç³»ç»Ÿ                                         â”‚
â”‚  â”œâ”€ åŠ¨æ€éš¾åº¦è°ƒæ•´                                         â”‚
â”‚  â””â”€ äºŒæ¬¡éªŒè¯è§¦å‘                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h2 data-id="heading-36">æ€»ç»“</h2>
<p>æ»‘å—éªŒè¯ç å°±åƒæ˜¯ä¸€åœºæ²¡æœ‰ç¡çƒŸçš„æˆ˜äº‰ã€‚ä½ ä»¥ä¸ºåªæ˜¯ç®€å•åœ°"æ‹–åŠ¨ä¸€ä¸‹"ï¼Œå®é™…ä¸ŠèƒŒåæ˜¯å·¥ç¨‹å¸ˆä»¬ç²¾å¿ƒè®¾è®¡çš„äº”é“é˜²çº¿åœ¨é»˜é»˜å·¥ä½œï¼š</p>
<h3 data-id="heading-37">ğŸ“ æ ¸å¿ƒè¦ç‚¹å›é¡¾</h3>
<ol>
<li>
<p><strong>ä½ç½®éªŒè¯</strong>ï¼šæœ€åŸºç¡€çš„åæ ‡æ ¡éªŒï¼Œä½†è¦æ³¨æ„åŠ å¯†ä¼ è¾“å’Œè¯¯å·®å®¹å¿åº¦</p>
</li>
<li>
<p><strong>è½¨è¿¹éçº¿æ€§æ£€æµ‹</strong>ï¼šäººç±»çš„"æ‰‹æŠ–"åè€Œæˆäº†å®‰å…¨ç‰¹å¾ï¼Œæœºå™¨è¿‡äºå®Œç¾çš„ç›´çº¿è¿åŠ¨ä¼šè¢«è¯†ç ´</p>
</li>
<li>
<p><strong>é€Ÿåº¦å˜åŒ–åˆ†æ</strong>ï¼šäººç±»æœ‰åŠ é€Ÿ-å‡é€Ÿè¿‡ç¨‹ï¼Œæœºå™¨äººå¾€å¾€æ˜¯åŒ€é€Ÿè¿åŠ¨</p>
</li>
<li>
<p><strong>åŠ é€Ÿåº¦æ¨¡å¼è¯†åˆ«</strong>ï¼šç¬¦åˆç‰©ç†è§„å¾‹çš„åŠ é€Ÿåº¦æ›²çº¿æ‰æ˜¯çœŸæ­£çš„"äººç±»ç­¾å"</p>
</li>
<li>
<p><strong>æ—¶é—´çª—å£æ§åˆ¶</strong>ï¼šå¤ªå¿«äº†æ˜¯è„šæœ¬ï¼Œå¤ªæ…¢äº†å¯èƒ½æ˜¯äººå·¥æ‰“ç ï¼Œ500ms-3sæ˜¯"é»„é‡‘æ—¶é—´"</p>
</li>
</ol>
<h3 data-id="heading-38">ğŸ’¡ å®æˆ˜ç»éªŒ</h3>
<ul>
<li><strong>ä¸è¦åªä¾èµ–ä¸€å±‚é˜²æŠ¤</strong>ï¼šå•ä¸€æ£€æµ‹å¾ˆå®¹æ˜“è¢«ç»•è¿‡ï¼Œå¤šå±‚æ£€æµ‹å åŠ æ‰èƒ½æœ‰æ•ˆé˜²å¾¡</li>
<li><strong>ç”¨æˆ·ä½“éªŒä¸å®‰å…¨æ€§çš„å¹³è¡¡</strong>ï¼šé˜ˆå€¼è®¾ç½®å¤ªä¸¥ä¼šè¯¯ä¼¤çœŸå®ç”¨æˆ·ï¼Œå¤ªæ¾åˆ™å¤±å»é˜²æŠ¤æ„ä¹‰</li>
<li><strong>æŒç»­å¯¹æŠ—</strong>ï¼šæ”»å‡»è€…åœ¨è¿›æ­¥ï¼Œé˜²å¾¡ç­–ç•¥ä¹Ÿè¦ä¸æ–­æ›´æ–°</li>
<li><strong>æ—¥å¿—ä¸ç›‘æ§</strong>ï¼šè®°å½•æ¯æ¬¡éªŒè¯çš„è¯¦ç»†æ•°æ®ï¼Œç”¨äºåç»­åˆ†æå’Œæ¨¡å‹ä¼˜åŒ–</li>
</ul>
<h3 data-id="heading-39">ğŸ”® æœªæ¥è¶‹åŠ¿</h3>
<ul>
<li><strong>æœºå™¨å­¦ä¹ èåˆ</strong>ï¼šç”¨AIå¯¹æŠ—AIï¼Œé€šè¿‡è¡Œä¸ºæ¨¡å¼è®­ç»ƒè¯†åˆ«æ¨¡å‹</li>
<li><strong>å¤šæ¨¡æ€éªŒè¯</strong>ï¼šç»“åˆç‚¹å‡»ã€æ»‘åŠ¨ã€é”®ç›˜æ“ä½œç­‰å¤šç»´åº¦è¡Œä¸º</li>
<li><strong>æ— æ„ŸéªŒè¯</strong>ï¼šåœ¨ç”¨æˆ·æ— æ„ŸçŸ¥çš„æƒ…å†µä¸‹å®ŒæˆéªŒè¯ï¼ˆå¦‚Googleçš„reCAPTCHA v3ï¼‰</li>
<li><strong>éšç§ä¿æŠ¤</strong>ï¼šå‡å°‘å¯¹ç”¨æˆ·è¡Œä¸ºçš„ä¾µå…¥å¼é‡‡é›†ï¼Œä¿æŠ¤ç”¨æˆ·éšç§</li>
</ul>
<p>æ»‘å—éªŒè¯ç çœ‹ä¼¼ç®€å•ï¼Œå®åˆ™æ·±è—ä¸éœ²ã€‚ä¸‹æ¬¡å½“ä½ é¡ºæ»‘åœ°å®Œæˆä¸€ä¸ªæ»‘å—éªŒè¯æ—¶ï¼Œä¸å¦¨æƒ³ä¸€æƒ³ï¼šè¿™ä¸€ç§’é’Ÿï¼Œæœ‰å¤šå°‘ä»£ç åœ¨ä¸ºä½ ä¿é©¾æŠ¤èˆªï¼Œåˆæœ‰å¤šå°‘æ”»å‡»è€…æ­£åœ¨ä¸ºçªç ´è¿™é“é˜²çº¿è€Œç»å°½è„‘æ±ã€‚</p>
<p>æŠ€æœ¯çš„æ”»é˜²ï¼Œæ°¸æ— æ­¢å¢ƒã€‚ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬è¦åšçš„ï¼Œå°±æ˜¯åœ¨ä¾¿åˆ©æ€§å’Œå®‰å…¨æ€§ä¹‹é—´æ‰¾åˆ°æœ€ä½³å¹³è¡¡ç‚¹ã€‚</p>
<hr/>
<p><strong>å‚è€ƒé“¾æ¥</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fadrsch%2Fslider-captcha" target="_blank" title="https://github.com/adrsch/slider-captcha" ref="nofollow noopener noreferrer">adrsch/slider-captcha</a> - React + Expresså®ç° - éªŒè¯çŠ¶æ€: âœ…</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fkartikmehta8%2Fcaptcha" target="_blank" title="https://github.com/kartikmehta8/captcha" ref="nofollow noopener noreferrer">kartikmehta8/captcha</a> - Node.js + Rediså®Œæ•´æ–¹æ¡ˆ - éªŒè¯çŠ¶æ€: âœ…</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Famakarov.dev%2Fcreate-slider-or-puzzle-captcha-service-with-node-js-4c25207f7264" target="_blank" title="https://amakarov.dev/create-slider-or-puzzle-captcha-service-with-node-js-4c25207f7264" ref="nofollow noopener noreferrer">Create Slider Captcha with Node.js</a> - MediumæŠ€æœ¯æ–‡ç«  - éªŒè¯çŠ¶æ€: âœ…</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åç«¯ Mock å®æˆ˜ï¼šSpring Boot 3 å®ç°å…¥ç«™ & å‡ºç«™æ¥å£æ¨¡æ‹Ÿ]]></title>    <link>https://juejin.cn/post/7604142616474304518</link>    <guid>https://juejin.cn/post/7604142616474304518</guid>    <pubDate>2026-02-09T06:52:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604142616474304518" data-draft-id="7604279756598902820" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åç«¯ Mock å®æˆ˜ï¼šSpring Boot 3 å®ç°å…¥ç«™ &amp; å‡ºç«™æ¥å£æ¨¡æ‹Ÿ"/> <meta itemprop="keywords" content="åç«¯,Java,è®¾è®¡"/> <meta itemprop="datePublished" content="2026-02-09T06:52:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ€’æ”¾å§å¾·å¾·"/> <meta itemprop="url" content="https://juejin.cn/user/2502950820787672"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åç«¯ Mock å®æˆ˜ï¼šSpring Boot 3 å®ç°å…¥ç«™ &amp; å‡ºç«™æ¥å£æ¨¡æ‹Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2502950820787672/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ€’æ”¾å§å¾·å¾·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T06:52:58.000Z" title="Mon Feb 09 2026 06:52:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    42
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åç«¯ Mock å®æˆ˜ï¼šSpring Boot 3 å®ç°å…¥ç«™ &amp; å‡ºç«™æ¥å£æ¨¡æ‹Ÿ</h2>
<blockquote>
<p>ğŸ˜„ç”Ÿå‘½ä¸æ¯ï¼Œå†™ä½œä¸æ­¢</p>
<p>ğŸ”¥ ç»§ç»­è¸ä¸Šå­¦ä¹ ä¹‹è·¯ï¼Œå­¦ä¹‹åˆ†äº«ç¬”è®°</p>
<p>ğŸ‘Š æ€»æœ‰ä¸€å¤©æˆ‘ä¹Ÿèƒ½åƒå„ä½å¤§ä½¬ä¸€æ ·</p>
<p>ğŸ† <a href="https://juejin.cn/user/2502950820787672" target="_blank" title="https://juejin.cn/user/2502950820787672">åšå®¢é¦–é¡µ</a> Â Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Flyd-code%2F" target="_blank" title="https://www.cnblogs.com/lyd-code/" ref="nofollow noopener noreferrer">@æ€’æ”¾å§å¾·å¾·</a>Â Â <a href="https://link.juejin.cn?target=https%3A%2F%2Flydandtry.github.io%2F" target="_blank" title="https://lydandtry.github.io/" ref="nofollow noopener noreferrer">Toè®°å½•é¢†åœ°</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fqq_43843951%3Ftype%3Dblog" target="_blank" title="https://blog.csdn.net/qq_43843951?type=blog" ref="nofollow noopener noreferrer">@ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº</a></p>
<p>ğŸŒåˆ†äº«å­¦ä¹ å¿ƒå¾—ï¼Œæ¬¢è¿æŒ‡æ­£ï¼Œå¤§å®¶ä¸€èµ·å­¦ä¹ æˆé•¿ï¼</p>
</blockquote>
<p><em>è½¬å‘è¯·æºå¸¦ä½œè€…ä¿¡æ¯</em>Â  <strong>@æ€’æ”¾å§å¾·å¾·(æ˜é‡‘) @ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº(CSDN)</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d19fcb66829e468c83fb59b7ecee0952~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oCS5pS-5ZCn5b635b63:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771225115&amp;x-signature=CO5MHJmKcM429jtXsRZCoDpSoYw%3D" alt="image-835954_1_20260209_145632.jpg" loading="lazy"/></p>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>ä¸€èˆ¬æ¥è¯´ mock åªæœ‰å‰ç«¯ä¸Šæ‹¥æœ‰ï¼Œèƒ½å¤Ÿæ¨¡æ‹Ÿ api è¿”å›å‚æ•°è‡ªè¡Œæµ‹è¯•ï¼Œé‚£ä¹ˆåç«¯æ˜¯å¦ä¹Ÿéœ€è¦æœ‰è¿™ä¹ˆä¸€ä¸ªåŠŸèƒ½å‘¢ï¼Ÿç”±äºæˆ‘ä»¬å…¬å¸éœ€è¦å¯¹æ¥æ¯”è¾ƒå¤šçš„å¤–éƒ¨ç³»ç»Ÿï¼Œå¹¶ä¸”ä¸Šçº¿æ—¶æœºä¸åŒï¼Œä½†æ˜¯è¿”å›æ•°æ®å¯ä»¥æå‰å®šåˆ¶ï¼Œé‚£ä¹ˆå°±å¾ˆéœ€è¦è¿™ä¹ˆä¸€ä¸ª <code>Backend Mock System</code>ï¼Œç”¨æ¥ç®¡ç†è¿›ç«™ä¸å‡ºç«™çš„ mock åŠŸèƒ½ã€‚æ‰€ä»¥æˆ‘é€šè¿‡ kiro è®¾è®¡äº†ä¸€æ¬¾ mock åŠŸèƒ½ç»„ä»¶ï¼Œç›®å‰åªæœ‰ demo é˜¶æ®µï¼šåŸºäºSpring Boot 3å’ŒDDDæ¶æ„çš„åç«¯MockåŠŸèƒ½ç³»ç»Ÿï¼Œç”¨äºåœ¨å¼€å‘å’Œæµ‹è¯•ç¯å¢ƒä¸­æ¨¡æ‹ŸHTTPæ¥å£å“åº”ã€‚ä»“åº“ä½äºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fliyongde%2Fjava-trial%2Ftree%2Fmaster%2FTrial3-Mock-Design" target="_blank" title="https://gitee.com/liyongde/java-trial/tree/master/Trial3-Mock-Design" ref="nofollow noopener noreferrer">gitee.com/liyongde/jaâ€¦</a></p>
<h3 data-id="heading-2">1 Mock è®¾è®¡</h3>
<h4 data-id="heading-3">1.1 æ ¸å¿ƒåŠŸèƒ½</h4>
<ul>
<li><strong>å‡ºç«™è¯·æ±‚Mockï¼ˆOutbound Mockï¼‰</strong>ï¼šå°è£…HTTPå®¢æˆ·ç«¯ï¼Œæ‹¦æˆªæœ¬ç³»ç»Ÿè°ƒç”¨å¤–éƒ¨ç³»ç»Ÿçš„è¯·æ±‚</li>
<li><strong>å…¥ç«™è¯·æ±‚Mockï¼ˆInbound Mockï¼‰</strong>ï¼šé€šè¿‡æ‹¦æˆªå™¨æœºåˆ¶ï¼Œæ‹¦æˆªå¤–éƒ¨ç³»ç»Ÿè°ƒç”¨æœ¬ç³»ç»Ÿçš„è¯·æ±‚</li>
<li><strong>æ•°æ®åº“é…ç½®ç®¡ç†</strong>ï¼šé€šè¿‡æ•°æ®åº“åŠ¨æ€é…ç½®Mockè§„åˆ™ï¼Œæ”¯æŒCRUDæ“ä½œ</li>
<li><strong>æ™ºèƒ½ç¼“å­˜æœºåˆ¶</strong>ï¼šå†…å­˜ç¼“å­˜å‡å°‘æ•°æ®åº“è®¿é—®ï¼Œæå‡æ€§èƒ½</li>
<li><strong>çµæ´»çš„å¯ç”¨/ç¦ç”¨</strong>ï¼šæ”¯æŒå…¨å±€å¼€å…³å’Œå•ä¸ªé…ç½®çš„å¯ç”¨/ç¦ç”¨</li>
</ul>
<h4 data-id="heading-4">1.2 æŠ€æœ¯ç‰¹ç‚¹</h4>
<ul>
<li><strong>DDDæ¶æ„</strong>ï¼šæ¸…æ™°çš„é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼Œåˆ†å±‚æ˜ç¡®</li>
<li><strong>Spring Boot 3</strong>ï¼šåŸºäºæœ€æ–°çš„Spring Bootæ¡†æ¶</li>
<li><strong>Java 17</strong>ï¼šä½¿ç”¨ç°ä»£Javaç‰¹æ€§</li>
<li><strong>MyBatis-Plus</strong>ï¼šå¼ºå¤§çš„æŒä¹…å±‚æ¡†æ¶ï¼Œæä¾›çµæ´»çš„SQLæ§åˆ¶å’Œä¼˜ç§€çš„æ€§èƒ½</li>
<li><strong>Hutoolå·¥å…·åº“</strong>ï¼šç®€åŒ–HTTPè¯·æ±‚å¤„ç†</li>
<li><strong>TestContainers</strong>ï¼šå®¹å™¨åŒ–æµ‹è¯•ç¯å¢ƒï¼Œç¡®ä¿æµ‹è¯•ç¯å¢ƒä¸ç”Ÿäº§ç¯å¢ƒä¸€è‡´</li>
</ul>
<h4 data-id="heading-5">1.3 SQL è®¾è®¡</h4>
<p>mock_config è¿™å¼ è¡¨ä¸»è¦ç”¨æ¥å­˜æ”¾å®šä¹‰çš„ mock æ•°æ®ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `mock_config` (
  `id` <span class="hljs-type">bigint</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ä¸»é”®ID'</span>,
  `api_path` <span class="hljs-type">varchar</span>(<span class="hljs-number">500</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ¥å£è·¯å¾„ï¼Œå¦‚ï¼š/api/user/info'</span>,
  `api_method` <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è¯·æ±‚æ–¹æ³•ï¼šGET, POST, PUT, DELETE'</span>,
  `response_json` longtext COMMENT <span class="hljs-string">'è¿”å›çš„JSONæ•°æ®'</span>,
  `is_enabled` tinyint(<span class="hljs-number">1</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'1'</span> COMMENT <span class="hljs-string">'æ˜¯å¦å¯ç”¨ï¼štrue-å¯ç”¨ï¼Œfalse-ç¦ç”¨'</span>,
  `create_time` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´'</span>,
  `update_time` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'æ›´æ–°æ—¶é—´'</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  <span class="hljs-keyword">UNIQUE</span> KEY `uk_api_method_path` (`api_path`,`api_method`) COMMENT <span class="hljs-string">'è·¯å¾„å’Œæ–¹æ³•çš„å”¯ä¸€çº¦æŸ'</span>,
  KEY `idx_is_enabled` (`is_enabled`) COMMENT <span class="hljs-string">'å¯ç”¨çŠ¶æ€ç´¢å¼•'</span>,
  KEY `idx_create_time` (`create_time`) COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´ç´¢å¼•'</span>
) ENGINE<span class="hljs-operator">=</span>InnoDB AUTO_INCREMENT<span class="hljs-operator">=</span><span class="hljs-number">10</span> <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_0900_ai_ci COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'Mocké…ç½®è¡¨'</span>;
</code></pre>
<h4 data-id="heading-6">1.4 å¼€å‘è®¾è®¡</h4>
<p>åŸºç¡€ CRUD ä¸è®²è§£ï¼Œåªä»‹ç»ä¸»è¦éƒ¨åˆ†ã€‚</p>
<p>æœ¬æ¬¡çš„è®¾è®¡åˆ†ä¸ºäº†ä¸¤ç§ï¼š</p>
<ul>
<li>1 å‡ºæˆ˜ï¼ˆé€šè¿‡å®šåˆ¶ http è¯·æ±‚å®Œæˆï¼‰</li>
<li>2 å…¥ç«™ï¼ˆé€šè¿‡æ‹¦æˆªè¯·æ±‚è¿›è¡Œè·å–æ•°æ®è¿”å›ï¼‰</li>
</ul>
<p>æ¡ˆä¾‹ä»£ç é‡‡ç”¨ DDD åˆ†å±‚æ¶æ„</p>
<pre><code class="hljs language-plain" lang="plain">Trial3-Mock-Design/
â”œâ”€â”€ domain/              # é¢†åŸŸå±‚
â”‚   â”œâ”€â”€ model/          # é¢†åŸŸæ¨¡å‹ï¼ˆå®ä½“ï¼‰
â”‚   â””â”€â”€ repository/     # ä»“å‚¨æ¥å£
â”œâ”€â”€ application/         # åº”ç”¨å±‚
â”‚   â”œâ”€â”€ service/        # åº”ç”¨æœåŠ¡
â”‚   â””â”€â”€ dto/            # æ•°æ®ä¼ è¾“å¯¹è±¡
â”œâ”€â”€ infrastructure/      # åŸºç¡€è®¾æ–½å±‚
â”‚   â”œâ”€â”€ persistence/    # æŒä¹…åŒ–å®ç°
â”‚   â””â”€â”€ config/         # é…ç½®ç±»
â””â”€â”€ interfaces/          # æ¥å£å±‚
    â”œâ”€â”€ controller/     # RESTæ§åˆ¶å™¨
    â”œâ”€â”€ interceptor/    # æ‹¦æˆªå™¨
    â”œâ”€â”€ client/         # HTTPå®¢æˆ·ç«¯å°è£…
    â””â”€â”€ exception/      # å¼‚å¸¸å¤„ç†
</code></pre>
<h3 data-id="heading-7">2 Mock å¼€å‘</h3>
<h4 data-id="heading-8">2.1 åŸºç¡€åŠŸèƒ½</h4>
<p>MockConfigProperties.java é…ç½®å±æ€§ç±»</p>
<p>ç”¨æ¥è®¾ç½®å…¨å±€æ˜¯å¦å¼€å¯ mock åŠŸèƒ½ï¼Œä»¥åŠç¼“å­˜æ—¶é—´å’Œæ—¥å¿—å¼€å…³ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * Mocké…ç½®å±æ€§ç±»
 * ä½¿ç”¨<span class="hljs-doctag">@ConfigurationProperties</span>ä»application.ymlä¸­ç»‘å®šmocké…ç½®
 * 
 * é…ç½®ç¤ºä¾‹ï¼š
 * mock:
 *   enabled: true
 *   cache-expiration-seconds: 300
 *   log-mock-usage: true
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@ConfigurationProperties(prefix = "mock")</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MockConfigProperties</span> {

    <span class="hljs-comment">/**
     * å…¨å±€MockåŠŸèƒ½å¼€å…³
     * å½“è®¾ç½®ä¸ºfalseæ—¶ï¼Œç³»ç»Ÿå°†ç»•è¿‡æ‰€æœ‰Mocké€»è¾‘ï¼Œç›´æ¥æ‰§è¡Œå®é™…è¯·æ±‚
     * é»˜è®¤å€¼ï¼štrue
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">enabled</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;

    <span class="hljs-comment">/**
     * ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰
     * Mocké…ç½®åœ¨ç¼“å­˜ä¸­çš„å­˜æ´»æ—¶é—´ï¼Œè¶…è¿‡æ­¤æ—¶é—´åå°†ä»æ•°æ®åº“é‡æ–°åŠ è½½
     * é»˜è®¤å€¼ï¼š300ç§’ï¼ˆ5åˆ†é’Ÿï¼‰
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-variable">cacheExpirationSeconds</span> <span class="hljs-operator">=</span> <span class="hljs-number">300</span>;

    <span class="hljs-comment">/**
     * æ˜¯å¦è®°å½•Mockä½¿ç”¨æ—¥å¿—
     * å½“è®¾ç½®ä¸ºtrueæ—¶ï¼Œç³»ç»Ÿå°†è®°å½•æ¯æ¬¡ä½¿ç”¨Mockæ•°æ®çš„è¯¦ç»†ä¿¡æ¯
     * é»˜è®¤å€¼ï¼štrue
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">logMockUsage</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;
}
</code></pre>
<p>MockCacheService.java ç¼“å­˜æœåŠ¡</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * Mocké…ç½®ç¼“å­˜æœåŠ¡
 * ä½¿ç”¨ConcurrentHashMapå®ç°çº¿ç¨‹å®‰å…¨çš„å†…å­˜ç¼“å­˜ï¼Œæå‡Mocké…ç½®æŸ¥è¯¢æ€§èƒ½
 * æ”¯æŒç¼“å­˜è¿‡æœŸæœºåˆ¶ï¼Œç¡®ä¿æ•°æ®çš„æ—¶æ•ˆæ€§
 */</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MockCacheService</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ConcurrentHashMap&lt;String, CacheEntry&lt;MockConfig&gt;&gt; cache;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> cacheExpirationMs;
    
    <span class="hljs-comment">/**
     * æ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–ç¼“å­˜å’Œè¿‡æœŸæ—¶é—´
     * 
     * <span class="hljs-doctag">@param</span> properties Mocké…ç½®å±æ€§ï¼ŒåŒ…å«ç¼“å­˜è¿‡æœŸæ—¶é—´é…ç½®
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MockCacheService</span><span class="hljs-params">(MockConfigProperties properties)</span> {
        <span class="hljs-built_in">this</span>.cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
        <span class="hljs-built_in">this</span>.cacheExpirationMs = properties.getCacheExpirationSeconds() * <span class="hljs-number">1000</span>;
        log.info(<span class="hljs-string">"MockCacheService initialized with expiration time: {} ms"</span>, cacheExpirationMs);
    }
    
    <span class="hljs-comment">/**
     * ä»ç¼“å­˜ä¸­è·å–Mocké…ç½®
     * å¦‚æœç¼“å­˜æ¡ç›®å·²è¿‡æœŸï¼Œå°†è‡ªåŠ¨ç§»é™¤å¹¶è¿”å›ç©º
     * 
     * <span class="hljs-doctag">@param</span> cacheKey ç¼“å­˜é”®ï¼Œæ ¼å¼ä¸º "apiPath:apiMethod"
     * <span class="hljs-doctag">@return</span> OptionalåŒ…è£…çš„MockConfigï¼Œå¦‚æœä¸å­˜åœ¨æˆ–å·²è¿‡æœŸåˆ™è¿”å›ç©º
     */</span>
    <span class="hljs-keyword">public</span> Optional&lt;MockConfig&gt; <span class="hljs-title function_">get</span><span class="hljs-params">(String cacheKey)</span> {
        CacheEntry&lt;MockConfig&gt; entry = cache.get(cacheKey);
        
        <span class="hljs-keyword">if</span> (entry == <span class="hljs-literal">null</span>) {
            log.debug(<span class="hljs-string">"Cache miss for key: {}"</span>, cacheKey);
            <span class="hljs-keyword">return</span> Optional.empty();
        }
        
        <span class="hljs-keyword">if</span> (entry.isExpired(cacheExpirationMs)) {
            log.debug(<span class="hljs-string">"Cache entry expired for key: {}, removing from cache"</span>, cacheKey);
            cache.remove(cacheKey);
            <span class="hljs-keyword">return</span> Optional.empty();
        }
        
        log.debug(<span class="hljs-string">"Cache hit for key: {}"</span>, cacheKey);
        <span class="hljs-keyword">return</span> Optional.of(entry.getValue());
    }
    
    <span class="hljs-comment">/**
     * å°†Mocké…ç½®æ”¾å…¥ç¼“å­˜
     * 
     * <span class="hljs-doctag">@param</span> cacheKey ç¼“å­˜é”®ï¼Œæ ¼å¼ä¸º "apiPath:apiMethod"
     * <span class="hljs-doctag">@param</span> config è¦ç¼“å­˜çš„MockConfigå¯¹è±¡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">put</span><span class="hljs-params">(String cacheKey, MockConfig config)</span> {
        CacheEntry&lt;MockConfig&gt; entry = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CacheEntry</span>&lt;&gt;(config);
        cache.put(cacheKey, entry);
        log.debug(<span class="hljs-string">"Cache updated for key: {}"</span>, cacheKey);
    }
    
    <span class="hljs-comment">/**
     * ä½¿æŒ‡å®šç¼“å­˜æ¡ç›®å¤±æ•ˆï¼ˆç§»é™¤ï¼‰
     * é€šå¸¸åœ¨Mocké…ç½®è¢«æ›´æ–°æˆ–åˆ é™¤æ—¶è°ƒç”¨
     * 
     * <span class="hljs-doctag">@param</span> cacheKey è¦å¤±æ•ˆçš„ç¼“å­˜é”®
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">invalidate</span><span class="hljs-params">(String cacheKey)</span> {
        cache.remove(cacheKey);
        log.debug(<span class="hljs-string">"Cache invalidated for key: {}"</span>, cacheKey);
    }
    
    <span class="hljs-comment">/**
     * æ¸…ç©ºæ‰€æœ‰ç¼“å­˜æ¡ç›®
     * é€šå¸¸åœ¨éœ€è¦å¼ºåˆ¶åˆ·æ–°æ‰€æœ‰ç¼“å­˜æ—¶è°ƒç”¨
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">clear</span><span class="hljs-params">()</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> cache.size();
        cache.clear();
        log.info(<span class="hljs-string">"Cache cleared, removed {} entries"</span>, size);
    }
    
    <span class="hljs-comment">/**
     * ç¼“å­˜æ¡ç›®å†…éƒ¨ç±»
     * å°è£…ç¼“å­˜å€¼å’Œæ—¶é—´æˆ³ï¼Œç”¨äºå®ç°è¿‡æœŸæ£€æŸ¥
     * 
     * <span class="hljs-doctag">@param</span> &lt;T&gt; ç¼“å­˜å€¼çš„ç±»å‹
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheEntry</span>&lt;T&gt; {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> T value;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> timestamp;
        
        <span class="hljs-comment">/**
         * æ„é€ å‡½æ•°ï¼Œåˆ›å»ºç¼“å­˜æ¡ç›®å¹¶è®°å½•å½“å‰æ—¶é—´æˆ³
         * 
         * <span class="hljs-doctag">@param</span> value è¦ç¼“å­˜çš„å€¼
         */</span>
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">CacheEntry</span><span class="hljs-params">(T value)</span> {
            <span class="hljs-built_in">this</span>.value = value;
            <span class="hljs-built_in">this</span>.timestamp = System.currentTimeMillis();
        }
        
        <span class="hljs-comment">/**
         * è·å–ç¼“å­˜çš„å€¼
         * 
         * <span class="hljs-doctag">@return</span> ç¼“å­˜çš„å€¼
         */</span>
        <span class="hljs-keyword">public</span> T <span class="hljs-title function_">getValue</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> value;
        }
        
        <span class="hljs-comment">/**
         * æ£€æŸ¥ç¼“å­˜æ¡ç›®æ˜¯å¦å·²è¿‡æœŸ
         * 
         * <span class="hljs-doctag">@param</span> expirationMs è¿‡æœŸæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
         * <span class="hljs-doctag">@return</span> trueå¦‚æœå·²è¿‡æœŸï¼Œå¦åˆ™è¿”å›false
         */</span>
        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isExpired</span><span class="hljs-params">(<span class="hljs-type">long</span> expirationMs)</span> {
            <span class="hljs-keyword">return</span> System.currentTimeMillis() - timestamp &gt; expirationMs;
        }
    }
}
</code></pre>
<h4 data-id="heading-9">2.2 å°è£… http è¯·æ±‚ï¼ˆå‡ºç«™ï¼‰</h4>
<p>é€šè¿‡å°è£… http è¯·æ±‚å®¢æˆ·ç«¯ï¼Œå½“æ¯æ¬¡éœ€è¦è°ƒç”¨å¤–éƒ¨ç³»ç»Ÿçš„æ—¶å€™ï¼Œé€šè¿‡æ­¤å°è£…å·¥å…·ï¼Œå°†å¯¹åº”çš„ api å’Œå‚æ•°ä¼ é€’è¿‡å»ï¼Œå¦‚æœæ˜¯éœ€è¦ mock è¿”å›ï¼Œåˆ™ä¸ä¼šè°ƒç”¨ httpï¼Œåä¹‹æ”¾è¡Œè°ƒç”¨ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * HTTPå®¢æˆ·ç«¯å°è£…å™¨
 * å°è£…Hutoolçš„HTTPè¯·æ±‚æ–¹æ³•ï¼Œæä¾›å‡ºç«™MockåŠŸèƒ½
 * 
 * å·¥ä½œæµç¨‹ï¼š
 * 1. æ£€æŸ¥å…¨å±€Mockå¼€å…³
 * 2. ä»URLæå–è·¯å¾„
 * 3. æŸ¥è¯¢Mocké…ç½®
 * 4. å¦‚æœMockå¯ç”¨ï¼Œè¿”å›Mockæ•°æ®ï¼›å¦åˆ™å‘èµ·å®é™…HTTPè¯·æ±‚
 * 
 * æ”¯æŒçš„HTTPæ–¹æ³•ï¼šGET, POST, PUT, DELETE
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HttpClientWrapper</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MockService mockService;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MockConfigProperties properties;
    
    <span class="hljs-comment">/**
     * æ„é€ å‡½æ•°ï¼Œæ³¨å…¥ä¾èµ–
     * 
     * <span class="hljs-doctag">@param</span> mockService MockæœåŠ¡
     * <span class="hljs-doctag">@param</span> properties Mocké…ç½®å±æ€§
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">HttpClientWrapper</span><span class="hljs-params">(MockService mockService, MockConfigProperties properties)</span> {
        <span class="hljs-built_in">this</span>.mockService = mockService;
        <span class="hljs-built_in">this</span>.properties = properties;
    }
    
    <span class="hljs-comment">/**
     * å‘èµ·GETè¯·æ±‚
     * 
     * <span class="hljs-doctag">@param</span> url ç›®æ ‡URL
     * <span class="hljs-doctag">@return</span> å“åº”å†…å®¹
     */</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">get</span><span class="hljs-params">(String url)</span> {
        <span class="hljs-keyword">return</span> executeRequest(url, <span class="hljs-string">"GET"</span>, <span class="hljs-literal">null</span>);
    }
    
    <span class="hljs-comment">/**
     * å‘èµ·POSTè¯·æ±‚
     * 
     * <span class="hljs-doctag">@param</span> url ç›®æ ‡URL
     * <span class="hljs-doctag">@param</span> body è¯·æ±‚ä½“
     * <span class="hljs-doctag">@return</span> å“åº”å†…å®¹
     */</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">post</span><span class="hljs-params">(String url, String body)</span> {
        <span class="hljs-keyword">return</span> executeRequest(url, <span class="hljs-string">"POST"</span>, body);
    }
    
    <span class="hljs-comment">/**
     * å‘èµ·PUTè¯·æ±‚
     * 
     * <span class="hljs-doctag">@param</span> url ç›®æ ‡URL
     * <span class="hljs-doctag">@param</span> body è¯·æ±‚ä½“
     * <span class="hljs-doctag">@return</span> å“åº”å†…å®¹
     */</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">put</span><span class="hljs-params">(String url, String body)</span> {
        <span class="hljs-keyword">return</span> executeRequest(url, <span class="hljs-string">"PUT"</span>, body);
    }
    
    <span class="hljs-comment">/**
     * å‘èµ·DELETEè¯·æ±‚
     * 
     * <span class="hljs-doctag">@param</span> url ç›®æ ‡URL
     * <span class="hljs-doctag">@return</span> å“åº”å†…å®¹
     */</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">delete</span><span class="hljs-params">(String url)</span> {
        <span class="hljs-keyword">return</span> executeRequest(url, <span class="hljs-string">"DELETE"</span>, <span class="hljs-literal">null</span>);
    }
    
    <span class="hljs-comment">/**
     * æ‰§è¡ŒHTTPè¯·æ±‚çš„æ ¸å¿ƒé€»è¾‘
     * 
     * æµç¨‹ï¼š
     * 1. æ£€æŸ¥å…¨å±€Mockå¼€å…³ï¼Œå¦‚æœç¦ç”¨åˆ™ç›´æ¥å‘èµ·å®é™…è¯·æ±‚
     * 2. ä»URLæå–è·¯å¾„
     * 3. æŸ¥è¯¢Mocké…ç½®
     * 4. å¦‚æœMocké…ç½®å­˜åœ¨ä¸”å¯ç”¨ï¼Œè¿”å›Mockæ•°æ®
     * 5. å¦åˆ™å‘èµ·å®é™…HTTPè¯·æ±‚
     * 
     * <span class="hljs-doctag">@param</span> url ç›®æ ‡URL
     * <span class="hljs-doctag">@param</span> method HTTPæ–¹æ³•
     * <span class="hljs-doctag">@param</span> body è¯·æ±‚ä½“ï¼ˆå¯ä¸ºnullï¼‰
     * <span class="hljs-doctag">@return</span> å“åº”å†…å®¹
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">executeRequest</span><span class="hljs-params">(String url, String method, String body)</span> {
        <span class="hljs-comment">// æ£€æŸ¥å…¨å±€Mockå¼€å…³</span>
        <span class="hljs-keyword">if</span> (!properties.isEnabled()) {
            log.debug(<span class="hljs-string">"Mock is globally disabled, making real request to {} {}"</span>, method, url);
            <span class="hljs-keyword">return</span> makeRealRequest(url, method, body);
        }
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä»URLæå–è·¯å¾„</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> extractPath(url);
            
            <span class="hljs-comment">// æŸ¥è¯¢Mocké…ç½®</span>
            Optional&lt;MockConfig&gt; mockConfig = mockService.getMockConfig(path, method);
            
            <span class="hljs-comment">// å¦‚æœMocké…ç½®å­˜åœ¨ä¸”å¯ç”¨ï¼Œè¿”å›Mockæ•°æ®</span>
            <span class="hljs-keyword">if</span> (mockConfig.isPresent() &amp;&amp; mockConfig.get().isActive()) {
                <span class="hljs-keyword">if</span> (properties.isLogMockUsage()) {
                    log.info(<span class="hljs-string">"Mock response used for outbound {} {}"</span>, method, url);
                }
                <span class="hljs-keyword">return</span> mockConfig.get().getResponseJson();
            }
            
            <span class="hljs-comment">// Mockæœªå¯ç”¨æˆ–ä¸å­˜åœ¨ï¼Œå‘èµ·å®é™…è¯·æ±‚</span>
            log.debug(<span class="hljs-string">"No active mock config found for {} {}, making real request"</span>, method, path);
            <span class="hljs-keyword">return</span> makeRealRequest(url, method, body);
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"Error during mock check for {} {}, falling back to real request: {}"</span>, 
                     method, url, e.getMessage());
            <span class="hljs-keyword">return</span> makeRealRequest(url, method, body);
        }
    }
    
    <span class="hljs-comment">/**
     * å‘èµ·å®é™…çš„HTTPè¯·æ±‚
     * ä½¿ç”¨Hutoolçš„HttpRequestå·¥å…·ç±»
     * 
     * <span class="hljs-doctag">@param</span> url ç›®æ ‡URL
     * <span class="hljs-doctag">@param</span> method HTTPæ–¹æ³•
     * <span class="hljs-doctag">@param</span> body è¯·æ±‚ä½“ï¼ˆå¯ä¸ºnullï¼‰
     * <span class="hljs-doctag">@return</span> å“åº”å†…å®¹
     * <span class="hljs-doctag">@throws</span> IllegalArgumentException å¦‚æœHTTPæ–¹æ³•ä¸æ”¯æŒ
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">makeRealRequest</span><span class="hljs-params">(String url, String method, String body)</span> {
        log.debug(<span class="hljs-string">"Making real HTTP request: {} {}"</span>, method, url);
        
        <span class="hljs-keyword">try</span> {
            String response;
            <span class="hljs-keyword">switch</span> (method.toUpperCase()) {
                <span class="hljs-keyword">case</span> <span class="hljs-string">"GET"</span>:
                    response = HttpRequest.get(url).execute().body();
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">"POST"</span>:
                    response = HttpRequest.post(url).body(body).execute().body();
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">"PUT"</span>:
                    response = HttpRequest.put(url).body(body).execute().body();
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">"DELETE"</span>:
                    response = HttpRequest.delete(url).execute().body();
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">default</span>:
                    log.error(<span class="hljs-string">"Unsupported HTTP method: {}"</span>, method);
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"Unsupported HTTP method: "</span> + method);
            }
            
            log.debug(<span class="hljs-string">"Real HTTP request completed: {} {}, response length: {}"</span>, 
                     method, url, response != <span class="hljs-literal">null</span> ? response.length() : <span class="hljs-number">0</span>);
            <span class="hljs-keyword">return</span> response;
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"Error making real HTTP request to {} {}: {}"</span>, method, url, e.getMessage(), e);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"Failed to make HTTP request: "</span> + e.getMessage(), e);
        }
    }
    
    <span class="hljs-comment">/**
     * ä»å®Œæ•´URLä¸­æå–è·¯å¾„éƒ¨åˆ†
     * 
     * ä¾‹å¦‚ï¼š
     * - "http://example.com/api/user/info" -&gt; "/api/user/info"
     * - "https://example.com:8080/api/data?id=1" -&gt; "/api/data"
     * 
     * <span class="hljs-doctag">@param</span> url å®Œæ•´URL
     * <span class="hljs-doctag">@return</span> URLçš„è·¯å¾„éƒ¨åˆ†
     * <span class="hljs-doctag">@throws</span> IllegalArgumentException å¦‚æœURLæ ¼å¼æ— æ•ˆ
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">extractPath</span><span class="hljs-params">(String url)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">URI</span> <span class="hljs-variable">uri</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URI</span>(url);
            <span class="hljs-type">String</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> uri.getPath();
            
            <span class="hljs-keyword">if</span> (path == <span class="hljs-literal">null</span> || path.isEmpty()) {
                log.warn(<span class="hljs-string">"URL has no path component: {}, using root path '/'"</span>, url);
                <span class="hljs-keyword">return</span> <span class="hljs-string">"/"</span>;
            }
            
            log.debug(<span class="hljs-string">"Extracted path '{}' from URL '{}'"</span>, path, url);
            <span class="hljs-keyword">return</span> path;
            
        } <span class="hljs-keyword">catch</span> (URISyntaxException e) {
            log.error(<span class="hljs-string">"Invalid URL format: {}"</span>, url, e);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"Invalid URL: "</span> + url, e);
        }
    }
}
</code></pre>
<p>è°ƒç”¨ mock æœåŠ¡ï¼Œä¸»è¦æ˜¯ä»¥ä¸‹ä»£ç </p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä»URLæå–è·¯å¾„</span>
<span class="hljs-type">String</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> extractPath(url);

<span class="hljs-comment">// æŸ¥è¯¢Mocké…ç½®</span>
Optional&lt;MockConfig&gt; mockConfig = mockService.getMockConfig(path, method);
</code></pre>
<p>é€šè¿‡ mock é…ç½®çš„åˆ¤æ–­è·å–å¯¹åº”æ•°æ®ï¼Œå…ˆæŸ¥ç¼“å­˜ï¼Œåœ¨æŸ¥æ•°æ®åº“ï¼Œä¸€å®šç¨‹åº¦ä¸Šä¼˜åŒ–ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * è·å–Mocké…ç½®ï¼ˆé›†æˆç¼“å­˜æŸ¥è¯¢ï¼‰
 * ä¼˜å…ˆä»ç¼“å­˜è·å–ï¼Œç¼“å­˜æœªå‘½ä¸­æ—¶ä»æ•°æ®åº“æŸ¥è¯¢å¹¶æ›´æ–°ç¼“å­˜
 * 
 * <span class="hljs-doctag">@param</span> apiPath APIè·¯å¾„
 * <span class="hljs-doctag">@param</span> apiMethod HTTPæ–¹æ³•
 * <span class="hljs-doctag">@return</span> OptionalåŒ…è£…çš„MockConfig
 */</span>
<span class="hljs-keyword">public</span> Optional&lt;MockConfig&gt; <span class="hljs-title function_">getMockConfig</span><span class="hljs-params">(String apiPath, String apiMethod)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> apiPath + <span class="hljs-string">":"</span> + apiMethod;
    
    <span class="hljs-comment">// å…ˆæŸ¥ç¼“å­˜</span>
    Optional&lt;MockConfig&gt; cached = cacheService.get(cacheKey);
    <span class="hljs-keyword">if</span> (cached.isPresent()) {
        log.debug(<span class="hljs-string">"Mock config found in cache for {} {}"</span>, apiMethod, apiPath);
        <span class="hljs-keyword">return</span> cached;
    }
    
    <span class="hljs-comment">// ç¼“å­˜æœªå‘½ä¸­ï¼ŒæŸ¥æ•°æ®åº“</span>
    Optional&lt;MockConfig&gt; config = mockConfigRepository.findByApiPathAndApiMethod(apiPath, apiMethod);
    
    <span class="hljs-comment">// å¦‚æœæ‰¾åˆ°ï¼Œæ›´æ–°ç¼“å­˜</span>
    config.ifPresent(c -&gt; {
        cacheService.put(cacheKey, c);
        log.debug(<span class="hljs-string">"Mock config loaded from database and cached for {} {}"</span>, apiMethod, apiPath);
    });
    
    <span class="hljs-keyword">if</span> (config.isEmpty()) {
        log.debug(<span class="hljs-string">"Mock config not found for {} {}"</span>, apiMethod, apiPath);
    }
    
    <span class="hljs-keyword">return</span> config;
}
</code></pre>
<h4 data-id="heading-10">2.3 Mock æ‹¦æˆªå™¨ï¼ˆå‡ºç«™ï¼‰</h4>
<p>å®šä¹‰ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œæ²¡è¢«è¿‡æ»¤çš„ api è¯·æ±‚å°†ä¼šåˆ°è¿™é‡Œè¿›è¡Œæ‹¦æˆª mock å¤„ç†</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * Mockæ‹¦æˆªå™¨
 * ç”¨äºæ‹¦æˆªå…¥ç«™HTTPè¯·æ±‚ï¼Œæ ¹æ®Mocké…ç½®è¿”å›Mockæ•°æ®
 * å®ç°HandlerInterceptoræ¥å£ï¼Œåœ¨Controlleræ–¹æ³•æ‰§è¡Œå‰è¿›è¡Œæ‹¦æˆª
 * 
 * å·¥ä½œæµç¨‹ï¼š
 * 1. æ£€æŸ¥å…¨å±€Mockå¼€å…³æ˜¯å¦å¯ç”¨
 * 2. æå–è¯·æ±‚è·¯å¾„å’ŒHTTPæ–¹æ³•
 * 3. æŸ¥è¯¢Mocké…ç½®ï¼ˆä¼˜å…ˆä»ç¼“å­˜è·å–ï¼‰
 * 4. å¦‚æœMocké…ç½®å­˜åœ¨ä¸”å¯ç”¨ï¼Œç›´æ¥è¿”å›Mockæ•°æ®
 * 5. å¦åˆ™ï¼Œç»§ç»­æ‰§è¡ŒControlleræ–¹æ³•
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MockInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerInterceptor</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MockService mockService;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MockConfigProperties properties;
    
    <span class="hljs-comment">/**
     * æ„é€ å‡½æ•°ï¼Œæ³¨å…¥ä¾èµ–
     * 
     * <span class="hljs-doctag">@param</span> mockService MockæœåŠ¡
     * <span class="hljs-doctag">@param</span> properties Mocké…ç½®å±æ€§
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MockInterceptor</span><span class="hljs-params">(MockService mockService, MockConfigProperties properties)</span> {
        <span class="hljs-built_in">this</span>.mockService = mockService;
        <span class="hljs-built_in">this</span>.properties = properties;
    }
    
    <span class="hljs-comment">/**
     * åœ¨Controlleræ–¹æ³•æ‰§è¡Œå‰æ‹¦æˆªè¯·æ±‚
     * 
     * <span class="hljs-doctag">@param</span> request HTTPè¯·æ±‚
     * <span class="hljs-doctag">@param</span> response HTTPå“åº”
     * <span class="hljs-doctag">@param</span> handler å¤„ç†å™¨
     * <span class="hljs-doctag">@return</span> trueè¡¨ç¤ºç»§ç»­æ‰§è¡ŒControllerï¼Œfalseè¡¨ç¤ºæ‹¦æˆªå¹¶è¿”å›Mockæ•°æ®
     * <span class="hljs-doctag">@throws</span> Exception å¤„ç†è¿‡ç¨‹ä¸­çš„å¼‚å¸¸
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preHandle</span><span class="hljs-params">(HttpServletRequest request, 
                            HttpServletResponse response, 
                            Object handler)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// æ£€æŸ¥å…¨å±€Mockå¼€å…³</span>
        <span class="hljs-keyword">if</span> (!properties.isEnabled()) {
            log.debug(<span class="hljs-string">"Mock functionality is globally disabled, continuing to controller"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// MockåŠŸèƒ½ç¦ç”¨ï¼Œç»§ç»­æ‰§è¡ŒController</span>
        }
        
        <span class="hljs-comment">// æå–è¯·æ±‚è·¯å¾„å’Œæ–¹æ³•</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> request.getRequestURI();
        <span class="hljs-type">String</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> request.getMethod();
        
        log.debug(<span class="hljs-string">"Intercepting request: {} {}"</span>, method, path);
        
        <span class="hljs-comment">// æŸ¥è¯¢Mocké…ç½®</span>
        Optional&lt;MockConfig&gt; mockConfig = mockService.getMockConfig(path, method);
        
        <span class="hljs-comment">// æ£€æŸ¥Mocké…ç½®æ˜¯å¦å­˜åœ¨ä¸”å¯ç”¨</span>
        <span class="hljs-keyword">if</span> (mockConfig.isPresent() &amp;&amp; mockConfig.get().isActive()) {
            <span class="hljs-type">MockConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> mockConfig.get();
            
            <span class="hljs-comment">// è®¾ç½®å“åº”å¤´</span>
            response.setContentType(<span class="hljs-string">"application/json;charset=UTF-8"</span>);
            response.setStatus(HttpStatus.OK.value());
            
            <span class="hljs-comment">// å†™å…¥Mockå“åº”æ•°æ®</span>
            response.getWriter().write(config.getResponseJson());
            response.getWriter().flush();
            
            <span class="hljs-comment">// è®°å½•Mockä½¿ç”¨æ—¥å¿—</span>
            <span class="hljs-keyword">if</span> (properties.isLogMockUsage()) {
                log.info(<span class="hljs-string">"Mock response returned for {} {} (config id: {})"</span>, 
                        method, path, config.getId());
            }
            
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// æ‹¦æˆªè¯·æ±‚ï¼Œä¸ç»§ç»­æ‰§è¡ŒController</span>
        }
        
        <span class="hljs-comment">// Mocké…ç½®ä¸å­˜åœ¨æˆ–æœªå¯ç”¨ï¼Œç»§ç»­æ‰§è¡ŒController</span>
        log.debug(<span class="hljs-string">"No active mock config found for {} {}, continuing to controller"</span>, method, path);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}
</code></pre>
<p>ä¸»è¦ä¹Ÿæ˜¯è°ƒç”¨äº† <code>Optional&lt;MockConfig&gt; mockConfig = mockService.getMockConfig(path, method);</code>mock æœåŠ¡ã€‚</p>
<p>é€šè¿‡ mvc æ‹¦æˆªï¼Œè®°å¾—å°† mock çš„ crud æ’é™¤ï¼Œä¹Ÿå¯ä»¥åˆ¶ä½œç™½åå•æ•°ç»„ï¼Œå°†ä¸éœ€è¦çš„ api ç›´æ¥è¿‡æ»¤æ‰ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * Web MVCé…ç½®ç±»
 * ç”¨äºæ³¨å†Œæ‹¦æˆªå™¨å’Œé…ç½®æ‹¦æˆªè·¯å¾„
 * 
 * æ‹¦æˆªå™¨é…ç½®ï¼š
 * - æ‹¦æˆªæ‰€æœ‰è·¯å¾„ï¼ˆ/**ï¼‰
 * - æ’é™¤Mocké…ç½®ç®¡ç†æ¥å£ï¼ˆ/api/mock-config/**ï¼‰ï¼Œé¿å…ç®¡ç†æ¥å£è¢«Mockæ‹¦æˆª
 */</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebMvcConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">WebMvcConfigurer</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MockInterceptor mockInterceptor;
    
    <span class="hljs-comment">/**
     * æ„é€ å‡½æ•°ï¼Œæ³¨å…¥MockInterceptor
     * 
     * <span class="hljs-doctag">@param</span> mockInterceptor Mockæ‹¦æˆªå™¨
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">WebMvcConfig</span><span class="hljs-params">(MockInterceptor mockInterceptor)</span> {
        <span class="hljs-built_in">this</span>.mockInterceptor = mockInterceptor;
    }
    
    <span class="hljs-comment">/**
     * æ³¨å†Œæ‹¦æˆªå™¨
     * é…ç½®æ‹¦æˆªè·¯å¾„å’Œæ’é™¤è·¯å¾„
     * 
     * <span class="hljs-doctag">@param</span> registry æ‹¦æˆªå™¨æ³¨å†Œå™¨
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addInterceptors</span><span class="hljs-params">(InterceptorRegistry registry)</span> {
        log.info(<span class="hljs-string">"Registering MockInterceptor"</span>);
        
        registry.addInterceptor(mockInterceptor)
                .addPathPatterns(<span class="hljs-string">"/**"</span>)  <span class="hljs-comment">// æ‹¦æˆªæ‰€æœ‰è·¯å¾„</span>
                .excludePathPatterns(<span class="hljs-string">"/api/mock-config/**"</span>);  <span class="hljs-comment">// æ’é™¤Mocké…ç½®ç®¡ç†æ¥å£</span>
        
        log.info(<span class="hljs-string">"MockInterceptor registered successfully"</span>);
    }
}
</code></pre>
<h3 data-id="heading-11">3 Mock åŠŸèƒ½æµ‹è¯•</h3>
<p>ä»£ç ä»“åº“é‡Œé¢è®¾æœ‰å…¥ç«™ä¸å‡ºç«™çš„æµ‹è¯•ç±»ï¼Œå¯ä»¥è‡ªè¡Œè°ƒè¯•ã€‚</p>
<p>å‡ºç«™æµ‹è¯•</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Test</span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">testOutboundMock_WhenMockConfigExistsAndEnabled_ReturnsMockData</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// Given: åˆ›å»ºå¹¶ä¿å­˜Mocké…ç½®</span>
    <span class="hljs-type">MockConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MockConfig</span>();
    config.setApiPath(<span class="hljs-string">"/api/user/info"</span>);
    config.setApiMethod(<span class="hljs-string">"GET"</span>);
    config.setResponseJson(<span class="hljs-string">"{\"id\":1,\"name\":\"Test User\"}"</span>);
    config.setIsEnabled(<span class="hljs-literal">true</span>);
    config.setCreateTime(LocalDateTime.now());
    config.setUpdateTime(LocalDateTime.now());
    repository.save(config);
    
    <span class="hljs-comment">// When: é€šè¿‡HttpClientWrapperå‘èµ·GETè¯·æ±‚</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> httpClientWrapper.get(<span class="hljs-string">"http://example.com/api/user/info"</span>);
    System.out.println(response);
    <span class="hljs-comment">// Then: åº”è¯¥è¿”å›Mockæ•°æ®</span>
    assertThat(response).isEqualTo(<span class="hljs-string">"{\"id\":1,\"name\":\"Test User\"}"</span>);
}
</code></pre>
<p>å…¥ç«™æµ‹è¯•</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Test</span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">testInboundMock_WhenMockConfigExistsAndEnabled_ReturnsInterceptedMockData</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
    <span class="hljs-comment">// Given: åˆ›å»ºå¹¶ä¿å­˜Mocké…ç½®</span>
    <span class="hljs-type">MockConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MockConfig</span>();
    config.setApiPath(<span class="hljs-string">"/api/test/endpoint"</span>);
    config.setApiMethod(<span class="hljs-string">"GET"</span>);
    config.setResponseJson(<span class="hljs-string">"{\"intercepted\":true,\"message\":\"Mock response\"}"</span>);
    config.setIsEnabled(<span class="hljs-literal">true</span>);
    config.setCreateTime(LocalDateTime.now());
    config.setUpdateTime(LocalDateTime.now());
    repository.save(config);
    
    <span class="hljs-comment">// When &amp; Then: å‘èµ·GETè¯·æ±‚ï¼Œåº”è¯¥è¢«æ‹¦æˆªå™¨æ‹¦æˆªå¹¶è¿”å›Mockæ•°æ®</span>
    mockMvc.perform(get(<span class="hljs-string">"/api/test/endpoint"</span>))
            .andExpect(status().isOk())
            .andExpect(content().contentType(<span class="hljs-string">"application/json;charset=UTF-8"</span>))
            .andExpect(content().json(<span class="hljs-string">"{\"intercepted\":true,\"message\":\"Mock response\"}"</span>));
}
</code></pre>
<h3 data-id="heading-12">4 æ€»ç»“</h3>
<p>æœ¬æ–‡æ˜¯ä»‹ç»ä½œè€…åŸºäºSpring Boot 3å’ŒDDDæ¶æ„çš„åç«¯MockåŠŸèƒ½ç³»ç»Ÿï¼Œç”¨äºåœ¨å¼€å‘å’Œæµ‹è¯•ç¯å¢ƒä¸­æ¨¡æ‹ŸHTTPæ¥å£å“åº”çš„ä¸€æ¬¡å°è¯•ï¼Œè¿™åªæ˜¯ä¸€ä¸ªæ¡ˆä¾‹ï¼Œå¯ä»¥æ ¹æ®é‡Œé¢çš„ä»£ç é›†æˆåˆ°å„è‡ªçš„é¡¹ç›®ä¸­ï¼Œåé¢æˆ‘åœ¨å†™ä¸€ç¯‡é›†æˆåˆ°åå°ç®¡ç†ç³»ç»Ÿä¸­çš„æ¡ˆä¾‹è¿‡ç¨‹ã€‚ä¹Ÿå¯ä»¥å…ˆçœ‹æˆ‘çš„ä»“åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fliyongde%2Fjava-trial%2Ftree%2Fmaster%2FTrial3-Mock-Design" target="_blank" title="https://gitee.com/liyongde/java-trial/tree/master/Trial3-Mock-Design" ref="nofollow noopener noreferrer">gitee.com/liyongde/jaâ€¦</a></p>
<hr/>
<p><em>è½¬å‘è¯·æºå¸¦ä½œè€…ä¿¡æ¯</em>Â  <strong>@æ€’æ”¾å§å¾·å¾· @ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº</strong><br/>
æŒç»­åˆ›ä½œå¾ˆä¸å®¹æ˜“ï¼Œä½œè€…å°†ä»¥å°½å¯èƒ½çš„è¯¦ç»†æŠŠæ‰€å­¦çŸ¥è¯†åˆ†äº«å„ä½å¼€å‘è€…ï¼Œä¸€èµ·è¿›æ­¥ä¸€èµ·å­¦ä¹ ã€‚<strong>è½¬è½½è¯·æºå¸¦é“¾æ¥ï¼Œè½¬è½½åˆ°å¾®ä¿¡å…¬ä¼—å·è¯·å‹¿é€‰æ‹©åŸåˆ›ï¼Œè°¢è°¢ï¼</strong><br/>
ğŸ‘åˆ›ä½œä¸æ˜“ï¼Œå¦‚æœ‰é”™è¯¯è¯·æŒ‡æ­£ï¼Œæ„Ÿè°¢è§‚çœ‹ï¼è®°å¾—ç‚¹èµå“¦ï¼ğŸ‘<br/>
è°¢è°¢æ”¯æŒï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è…¾è®¯é‡ç£…å¼€æºï¼æ··å…ƒå›¾åƒ 3.0 å›¾ç”Ÿå›¾çœŸé¦™ï¼]]></title>    <link>https://juejin.cn/post/7604471065860259891</link>    <guid>https://juejin.cn/post/7604471065860259891</guid>    <pubDate>2026-02-09T09:05:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604471065860259891" data-draft-id="7604690250343743538" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è…¾è®¯é‡ç£…å¼€æºï¼æ··å…ƒå›¾åƒ 3.0 å›¾ç”Ÿå›¾çœŸé¦™ï¼"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-09T09:05:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹ä½•"/> <meta itemprop="url" content="https://juejin.cn/user/588993963763405"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è…¾è®¯é‡ç£…å¼€æºï¼æ··å…ƒå›¾åƒ 3.0 å›¾ç”Ÿå›¾çœŸé¦™ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/588993963763405/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹ä½•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T09:05:53.000Z" title="Mon Feb 09 2026 09:05:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™æ˜¯è‹ä½•çš„ç¬¬ 484 ç¯‡åŸåˆ›ï¼</p>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯è‹ä½•ã€‚</p>
<p>è¦è¯´è¿‘ä¸¤å¤©æœ€ç«çš„æ˜¯ä»€ä¹ˆï¼Œé‚£å°±æ˜¯å…ƒå®æ´¾äº†ï¼Œæˆ‘çš„å‡ åä¸ªç¾¤ï¼Œä»æ—©åˆ°æ™šåœ¨å‘çº¢åŒ…é“¾æ¥ï¼Œå¯¼è‡´æˆ‘çš„æœªè¯»æ¶ˆæ¯ç›´æ¥é£™åˆ°äº†ä¸Šä¸‡æ¡ï¼Œå¥½å®¶ä¼™ã€‚</p>
<p>æ˜¨å¤©ä¹Ÿåˆ†äº«äº†å‡ ç™¾ä¸ªé‚€è¯·ç ï¼Œå»ºäº†ä¸å°‘å…ƒå®æ´¾ï¼Œæˆ‘å‘ç°å¤§å®¶åœ¨æ´¾é‡Œï¼Œç»å¸¸ä¼šç”¨å…ƒå®æ¥ç”Ÿå›¾ï¼ŒåŠ¨ä¸åŠ¨å°±æ˜¯å¥½å‡ ä¸ªäººåŒæ—¶@å…ƒå®ï¼Œå‘ç°å…ƒå®ç”Ÿå›¾è¿˜æŒºå¿«çš„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/950c158b87f54ccfbabbbc711e609245~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=tQGo%2BvH3%2F%2BSqtNu0FT2Erg6enw4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è€Œä¸”æ•ˆæœä¹Ÿæ¯”ä¹‹å‰å¥½äº†ä¸å°‘ï¼Œæˆ‘ä¼°æ‘¸ç€æ˜¯å‡çº§äº†æ··å…ƒæ¨¡å‹çš„ç”Ÿå›¾èƒ½åŠ›äº†ï¼Œä¸ç„¶æ‰›ä¸ä½å…ƒå®æ´¾å‹ä»¬çš„çƒ­æƒ…ï¼Œå™¼é‡Œå•ªå•¦ä¸¤ä¸‹å¡ä½ï¼Œä½“éªŒå°±ä¸å¥½äº†ã€‚</p>
<p>ç¨å¾®æŸ¥äº†ä¸‹ï¼Œæœç„¶ä¸å‡ºæ‰€æ–™ï¼Œ<strong>ã€Œè…¾è®¯æ‚„æ‚„å‘å¸ƒå¹¶å¼€æºäº†æ··å…ƒå›¾åƒ 3.0-Instruct æ¨¡å‹ã€</strong>ï¼Œç°åœ¨å…ƒå®ä¸Šç”Ÿå›¾ï¼Œç”¨çš„å°±æ˜¯è¿™ä¸ªæœ€æ–°çš„æ··å…ƒæ¨¡å‹ã€‚</p>
<p>æˆ‘çœ‹äº†å®˜æ–¹è¯´æ˜ï¼Œæ··å…ƒå›¾åƒ 3.0-Instruct æ¨¡å‹æœ‰ä»¥ä¸‹çš„èƒ½åŠ›æå‡ï¼š</p>
<blockquote>
<p>æ”¯æŒå›¾ç‰‡ç¼–è¾‘å’Œå¤šå›¾èåˆèƒ½åŠ›ï¼ŒæŒ‡ä»¤éµå¾ªæ•ˆæœç¨³å®šï¼Œç”Ÿæˆçš„å›¾ç‰‡ä¸€è‡´æ€§é«˜ã€çœŸå®æ„Ÿå¼ºã€æƒ…ç»ªè¡¨ç°åŠ›ä½³ï¼Œç”Ÿæˆé€Ÿåº¦è·å¾—æ˜æ˜¾æå‡.</p>
</blockquote>
<p>ä¸ºäº†éªŒè¯ä¸‹çœŸå‡ï¼Œæˆ‘ä¹Ÿå¯¹è¯¥æ¨¡å‹è¿›è¡Œäº†ä¸€è½®æ‹·æ‰“æµ‹è¯•ï¼Œä¸‹é¢å¼€æ•´ã€‚</p>
<p>é™¤äº†å…ƒå®é‡Œé¢ï¼Œæˆ‘å‘ç°ï¼Œåœ¨è…¾è®¯æ··å…ƒå®˜ç½‘ä¹Ÿå·²ç»ä¸Šçº¿äº†è¿™ä¸ªæ–°æ¨¡å‹ï¼Œæˆ‘å°±å…ˆåœ¨å®˜ç½‘å¼€å§‹å§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b6a7a56045b496fb55e2c7f00f4be74~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=rYaBcvF%2FYC3Viv1M8le%2FMulVaLY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ—¢ç„¶æ˜¯å›¾ç”Ÿå›¾æ¨¡å‹ï¼Œç†Ÿé—¨ç†Ÿè·¯ï¼Œé‚£å°±ç›´æ¥å¼€æµ‹å§ã€‚</p>
<blockquote>
<p>æç¤ºè¯ï¼šå°†è¿™å¼ å¼ â€œç™½å¤©æ‹æ‘„çš„æ¯æ ‘â€è½¬å˜ä¸ºâ€œå¤œæ™šå‘å…‰çš„é˜¿å‡¡è¾¾é£æ ¼ç”Ÿå‘½ä¹‹æ ‘â€</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/717a25a008464db4aab74ab60c7823c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=D6yllaeyoB%2BjnTUwJok%2FeyAEvCg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¾ˆå¿«å°±ç”Ÿæˆäº†ä¸€å¼ æ•ˆæœä¸é”™çš„ã€Œç”Ÿå‘½ä¹‹æ ‘ã€ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/450e25279c6d4269bfb2c7fdbb663b91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=l%2Bymf54CiyVHNDLsY6zP3kHWCa8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å…‰å½±çš„çƒ˜æ‰˜å’Œè¡¨ç°åŠ›ä¸Šè¿˜æ˜¯éå¸¸åˆ°ä½çš„ã€‚</p>
<p>æ¥ä¸‹æ¥ç»§ç»­ç»™æç¤ºè¯ï¼šå°†å¥”è·‘çš„äººè½¬å˜ä¸ºç”±æµæ°´ç»„æˆçš„åŠé€æ˜äººå½±</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5392c427fbf4401293d9fecbe0d93a57~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=9U7fLvsrJHIDiMHelomsoRgc%2BTg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æç¤ºè¯ï¼šè½¬æ¢ä¸ºå‰æ™®åŠ›é£æ ¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1198c2aebe04c75959b4d90799fa198~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=zVXkZG452%2F1OwsjqXauH3qgqhII%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åŸºæœ¬ä¸Šç”Ÿæˆæœ€å¿«åå‡ ç§’å°±ç”Ÿæˆäº†ï¼Œç”Ÿæˆé€Ÿåº¦ä¸Šå’Œè¡¨ç°åŠ›ç¡®å®æå‡å¾ˆå¤§ã€‚</p>
<p>ä¸åƒğŸŒproï¼Œç”Ÿæˆæœ€å°‘ä¹Ÿå¾—ç­‰ä¸ªå‡ åç§’ï¼Œç­‰å¾…çš„è¿‡ç¨‹éå¸¸ç—›è‹¦ã€‚</p>
<p>å†æ¥äº†ä¸€ä¸ªå°é©¬è¿ç¯ç”»ï¼ŒåŒæ ·ä¹Ÿæ˜¯å¾ˆå¿«å°±ç”Ÿæˆå‡ºæ¥ï¼Œä¸€è‡´æ€§ä¿æŒçš„ä¸é”™ã€‚</p>
<p>æç¤ºè¯ï¼šä»¥è¿™ä¸ªå°é©¬ä¸ºä¸»è§’ï¼Œåˆ›ä½œä¸€ä¸ªå…·æœ‰9å¼ å›¾ç‰‡çš„ç»˜æœ¬æ•…äº‹ï¼Œé€‚åˆä¸‰å²å°æœ‹å‹é˜…è¯»ï¼Œéœ€è¦æœ‰ç®€å•çš„æ–‡å­—ï¼Œæ–¹ä¾¿å®¶é•¿ç»™å°æœ‹å‹è®²æ•…äº‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53a81ba58e8b4f579cf33581c1eb1130~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=OPculSxfqLF7bN0qJdcLNiijqgs%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02f91cd62a374dffadda2c9bbd4ea7ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=Dt1%2Br548W8BXIRVkAf1TwQUvvlw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å‰å‡ å¤©å»æ¨ªé“æ²³å­è¢«ç¾å“­äº†ï¼Œæ‹äº†ä¸€äº›ç…§ç‰‡ï¼Œé‡Œé¢æœ‰è·¯äººï¼Œè®©å®ƒå¸®æˆ‘Pæ‰å¹¶ç¾åŒ–ä¸€ä¸‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79178187f2c147718e56a1978d59b371~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=hKaejkOhu68rwtqQQtviIBgTlMw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æç¤ºè¯ï¼šå¸®æˆ‘æŠŠè¿™å¼ å›¾ç‰‡ä¸­çš„äººPæ‰ï¼Œå¹¶è®©æ•´ä¸ªå›¾ç‰‡çœ‹èµ·æ¥åƒæœ‰é˜³å…‰ç…§å°„çš„æ„Ÿè§‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40bfe1af685f48b785e2f507b5ecf11a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=MWP4RGrvKPMlvKnVtX323qEx4V4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å»ç –çŸ³æµ·çš„æ—¶å€™æƒ³æ‹ä¸€ä¸ªè½æ—¥æ—¶åˆ†çš„å›¾ç‰‡ï¼Œèµ¶æ—¶é—´æ²¡æ‹åˆ°ï¼Œäºæ˜¯è®©å®ƒPä¸€ä¸‹ï¼š</p>
<p><em>æç¤ºè¯ï¼šè¿™å¼ äººèººåœ¨å†°å—å †ä¸­çš„ç…§ç‰‡ï¼Œå¸®æˆ‘æŠŠè¿™å¼ å›¾è½¬åŒ–ä¸ºè¿œæ™¯ä¿¯æ‹ï¼Œåœ¨äººç‰©å‘¨å›´æ•£è½ç€æˆç‰‡çš„å†°å—ï¼Œè¥é€ äººèººåœ¨å†°å—ç¾¤çš„æ„Ÿè§‰ï¼Œé»„æ˜ä¸­è“è°ƒçš„ç –çŸ³æµ·çš„æ„Ÿè§‰</em></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0cab926802084a7cac5499bd49fa12d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=%2Bz3wVe%2BmHCK232%2FMhXEq8RanxeI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç¬é—´å°±æœ‰é‚£ç§æ„Ÿè§‰äº†å¥½å§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6588fd0a2cd420c8bab0c948fbefd7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=aq5IPjinz8ZVLUrV5BR0XnS%2FPFk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥åˆæµ‹è¯•äº†ä¸€ä¸‹é£æ ¼å˜æ¢èƒ½åŠ›</p>
<p>ç»™å®ƒä¸€ä¸ªç¾å¥³ï¼Œè®©å®ƒå¸®å¿™å˜æ¢é£æ ¼</p>
<p>æç¤ºè¯ï¼šè¯·ç»™è¿™ä¸ªå¥³ç”Ÿç”»ä¸Šå››ç§ä¸åŒçš„å¦†å®¹ï¼Œå¹¶åŒ¹é…ç›¸åº”çš„ç©¿æ­é£æ ¼å’Œç¯å¢ƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c68174bbf3ac4192b8169598f32e9477~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=olLjYt0f6GZwneoCYWh1Pb8O1PY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>äººç‰©ä¸€è‡´æ€§ä¿æŒçš„ä¸é”™ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce5cbf550aa646f3a6d07c98ddea36f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=pmIBFm2d5qEdSqCLDOtLGZXtLp0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å†è®©å®ƒé’ˆå¯¹ä¸€äº›æœè£…å•å“ï¼Œç»™å‡ºä¸‰å¥—ç©¿æ­ï¼Œç»™è€å©†çœ‹äº†ï¼Œç›´å‘¼ç‰›æ°ï¼Œå†ä¹Ÿä¸ç”¨å‘æ„æ€ä¹ˆæ­é…å•å“äº†ã€‚</p>
<p>æç¤ºè¯ï¼šè¿™ä»¶ç™½è‰²çš„æ¯›è¡£ï¼Œæ¯›è¡£æ‹‰é“¾æ‹‰ä¸‹æ¥ä¸€äº›å¯å˜æˆç¿»é¢†æ¯›è¡£ï¼Œè¯·å¸®æˆ‘æƒ³ä¸‰ä¸ªç©¿æ­æ–¹æ¡ˆï¼Œå¥³ç”Ÿ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76974f4477554c36a0e88e261869546a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=zK1PAA9RePEEd%2FVGzYBZsBTT7tI%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc17cd23fb25435d9ec3badade1eccd7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=CrLAdCrBn9vyn8qUwmD6SA34HP8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å†æ¥ä¸ªèŒèŒå“’çš„å°ä¼é¹…å§</p>
<p>æç¤ºè¯ï¼šä»¥è¿™ä¸ªèŒèŒçš„ä¼é¹…ä¸ºåŸå‹ï¼Œè®¾è®¡ä¸‰ä¸ªQç‰ˆçš„ä¼é¹…å›¾åƒï¼Œåˆ†åˆ«ä¸ºæ¯›çº¿é£æ ¼ã€åƒç´ é£æ ¼ã€å‰æ™®åŠ›é£æ ¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6521fe1f94894971805e581000f206cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=%2Fu1tuFv39pp0KgsBUJUhfgsd5Gk%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/468c171686d54e2fbe1fb07c3374eb39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=Rg%2Fp0mqoEtxO4NtzmkWMOGOeWwQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆ‘å–œæ¬¢é¸£äººï¼Œæƒ³è¯•è¯•å›¾ç‰‡å˜æ‰‹åŠçš„æ„Ÿè§‰</p>
<p>æç¤ºè¯ï¼šæŠŠé¸£äººçš„è¿™å¼ å›¾åšæˆ3Dæ‰‹åŠ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abd9b7f3c48040959678b8cb2496c4c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=jZnpB%2FmvXffw1m2cGnZePiN%2BgZc%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a9b28e56c0d41e1bd29b469e2991ea2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=CzA2RQS051Kpaa3C4nOlwFxThX8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å†æ¥è¯•è¯•äººç‰©ç”»åƒå˜çœŸäºº</p>
<p>æç¤ºè¯ï¼šè¯·æŠŠXXXçš„ç”»åƒå˜æˆç«‹ä½“çš„çœŸäºº</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c255dc4d0424cc9a2cc907812d37b2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=FxqIrLLDaFENdBGnAIPIUtinX%2Bk%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21099a0cfd3344dc8b02a716de8d8845~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=4Vr%2B%2F8ntV4MmAVpvyaj99IoKS9I%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aec17f1e16f74c2d8ac24781b08f8199~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=fEVQ2zWQ%2B6lKOC5OLkoF6EClZTk%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/66dccdf9d1c64be8878d0d43268b618c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=pCdxU0IIIyjdIwRykPKw4NmuUuA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è®©ä»–ä»¬æ¥ä¸ªåˆç…§å§</p>
<p>æç¤ºè¯ï¼šè®©å›¾1å’Œå›¾2çš„äººç‰©è‡ªæ‹ï¼Œé£æ ¼æ¢æˆçœŸäººå†™å®é£æ ¼ï¼ŒèƒŒæ™¯æ¢æˆåœ¨æ•…å®«å¤§æ®¿é‡Œé¢æ‹æ‘„ï¼Œæœ‰è‡ªæ‹çš„æ¨¡ç³Šæ„Ÿ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e85e85a96aaf45c0b3995f2917d3dac2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=iVz8%2Fb2L0ZFT8j72GhOqP3U7yks%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28ae65ec8d9d4110a73a8e2118af9e71~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=okiJ13mebLRk4B85yPpgbH2ao6g%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f14ebf9c24f490484d82da55a7a3c99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=prHT6a5349A2SoxJ5kcoUBpifOo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å†æ¥è¯•è¯•å¤šå›¾èåˆçš„èƒ½åŠ›</p>
<p>æç¤ºè¯ï¼šç»™å›¾ä¸€å°çŒ«ç©¿ä¸Šå›¾äºŒï¼Œå›¾ä¸‰å–œåº†çš„è¡£æœå’Œå›´å·¾ï¼ŒèƒŒæ™¯æ˜¯ä¸­å¼çš„æ¸©é¦¨å®¶åº­å®¢å…</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c433a79d1feb4713bb0e4638b61a014a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=Pp8SXXhHpiZyxm2SXBdtgEGWZZQ%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea3bcbe5081b43d5a5b33a60e74acbf6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=mwSiFUbNjYHgwgop%2BLBRXp%2BYAJE%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c760f8a45d24dfc92a27c51fe092201~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=wiJQ5lORZ2Suc3%2BPMyfHp4gPLDk%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b66af2338024f769ceeed8b129ec4d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771232752&amp;x-signature=Xoj1BcZj8ltWmEysIyErzRIJvII%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸€é€šæµ‹ä¸‹æ¥ï¼Œè¿˜æŒºå…´å¥‹çš„ã€‚</p>
<p>é¦–å…ˆï¼Œåœ¨æ–‡å­—ç†è§£èƒ½åŠ›ä¸Šé¢ï¼Œæœ‰äº†å¾ˆå¤§çš„è¿›æ­¥ï¼Œæˆ‘çš„æç¤ºè¯å¾ˆå£è¯­åŒ–ä¹Ÿä¸ä¸“ä¸šï¼ŒåŸºæœ¬ä¸Šä¸€æ¬¡å°±èƒ½æˆåŠŸï¼›</p>
<p>ç¬¬äºŒï¼Œåœ¨ç”Ÿæˆé€Ÿåº¦ä¸Šï¼Œéå¸¸å¿«é€Ÿï¼Œç®€å•ä¸€ç‚¹çš„ï¼Œåå‡ ç§’ç”šè‡³å‡ ç§’é’Ÿå°±èƒ½ç”Ÿæˆå‡ºæ¥ï¼Œå¤æ‚ä¸€ç‚¹çš„ä¸åˆ°ä¸€åˆ†é’Ÿä¹Ÿèƒ½å‡ºæ¥ï¼›</p>
<p>ç¬¬ä¸‰ï¼Œå›¾ç‰‡å¯ç”¨æ€§å¾ˆé«˜ï¼Œä¸ç”¨é‡å¤æŠ½å¡ï¼›</p>
<p>æœ€é‡è¦çš„æ˜¯ç›®å‰è¿˜å…è´¹å…è´¹ï¼Œè¿™å°±éå¸¸çˆ½äº†ã€‚</p>
<p>è…¾è®¯è¿™ä¸€æ³¢ï¼Œä¹Ÿæ˜¯æ”’è¶³äº†åŠ²å„¿ï¼Œå‘äº† 10 ä¸ªäº¿çš„çº¢åŒ…ï¼Œè®©æ›´å¤šäººè¿›æ¥å…ƒå®ï¼Œç”Ÿå›¾æ˜¯æœ€é‡è¦çš„åœºæ™¯ã€‚</p>
<p>å¯¹äº C ç«¯ç”¨æˆ·æ¥è¯´ï¼Œæœ€ä¸èƒ½æ¥å—çš„å°±æ˜¯ç­‰å¾…ï¼Œè…¾è®¯å¿…é¡»åœ¨ç”Ÿå›¾é€Ÿåº¦ä¸Šä¸‹è‹¦åŠŸå¤«ï¼Œä¸ç„¶ï¼Œè¾›è¾›è‹¦è‹¦æ‹‰çš„ç”¨æˆ·ï¼Œå´å› ä¸ºç”Ÿå›¾æ…¢ï¼Œæ•ˆæœå·®ï¼Œè€Œä¸æ–­åæ§½ï¼Œå°±å¾—ä¸å¿å¤±äº†ã€‚</p>
<p>è‡³å°‘ç›®å‰ï¼Œæˆ‘åœ¨æˆ‘çš„åå‡ ä¸ªæ´¾ç¾¤é‡Œï¼Œè¿˜æ²¡çœ‹åˆ°æœ‰äººåæ§½ç”Ÿå›¾æ…¢æˆ–è€…ä¸å¥½çš„ã€‚</p>
<p>å¤§å®¶ä¹Ÿåœ¨æ¢ç´¢æ›´å¤šçš„ç©æ³•äº†ã€‚</p>
<p>æœ€åæ€»ç»“ä¸‹ï¼Œæ··å…ƒå›¾åƒ 3.0-Instruct æ¨¡å‹åœ¨æŒ‡ä»¤éµå¾ªï¼Œå›¾åƒä¸€è‡´æ€§ï¼Œç”Ÿæˆé€Ÿåº¦ä¸Šè¡¨ç°ä¸é”™ã€‚</p>
<p>å¥½äº†ï¼Œæ„Ÿè°¢ä½ å–œæ¬¢æˆ‘çš„æ–‡ç« ï¼Œæˆ‘ä»¬ä¸‹ä¸€æœŸè§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡åƒé€ Angular Module & Standalone]]></title>    <link>https://juejin.cn/post/7604805226696949798</link>    <guid>https://juejin.cn/post/7604805226696949798</guid>    <pubDate>2026-02-10T07:59:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604805226696949798" data-draft-id="7604984549172609033" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡åƒé€ Angular Module &amp; Standalone"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Angular.js"/> <meta itemprop="datePublished" content="2026-02-10T07:59:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OpenTinyç¤¾åŒº"/> <meta itemprop="url" content="https://juejin.cn/user/3808325101432983"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡åƒé€ Angular Module &amp; Standalone
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808325101432983/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OpenTinyç¤¾åŒº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T07:59:45.000Z" title="Tue Feb 10 2026 07:59:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡ç”±ä½“éªŒæŠ€æœ¯å›¢é˜Ÿå¼ å©·åŸåˆ›ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æ ¸å¿ƒæ¦‚å¿µï¼šä¸¤ç§æ¶æ„çš„æœ¬è´¨åŒºåˆ«</h2>
<p>æ— è®ºæ˜¯ Module è¿˜æ˜¯ Standaloneï¼Œæ ¸å¿ƒç›®æ ‡éƒ½æ˜¯è§£å†³ Angular åº”ç”¨ä¸­ç»„ä»¶ã€æŒ‡ä»¤ã€ç®¡é“ã€æœåŠ¡çš„ç»„ç»‡ã€ä¾èµ–ç®¡ç†ä¸å¤ç”¨é—®é¢˜ï¼Œåªæ˜¯å®ç°æ–¹å¼æˆªç„¶ä¸åŒã€‚</p>
<h3 data-id="heading-1">1. ä¼ ç»Ÿæ¶æ„ï¼šNgModule æ¨¡å—æœºåˆ¶</h3>
<p>NgModule æ˜¯ Angular åŸç”Ÿçš„æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ªâ€œåŠŸèƒ½å®¹å™¨â€ï¼Œé€šè¿‡è£…é¥°å™¨ @NgModule å®šä¹‰ï¼Œæ‰¿æ‹…ç€â€œå£°æ˜ã€å¯¼å…¥ã€å¯¼å‡ºã€æä¾›â€å››å¤§æ ¸å¿ƒèŒè´£ï¼Œå°†åˆ†æ•£çš„åŠŸèƒ½èšåˆä¸ºä¸€ä¸ªå¯ç®¡ç†çš„å•å…ƒã€‚</p>
<p>å…¶æ ¸å¿ƒé€»è¾‘æ˜¯â€œæ¨¡å—ä¸­å¿ƒåŒ–â€â€”â€”æ‰€æœ‰ç»„ä»¶å¿…é¡»å½’å±æŸä¸ªæ¨¡å—ï¼Œä¾èµ–é€šè¿‡æ¨¡å—ç»Ÿä¸€å¯¼å…¥ï¼ŒæœåŠ¡é€šè¿‡æ¨¡å—æä¾›ä½œç”¨åŸŸï¼Œè¿™ç§è®¾è®¡éå¸¸é€‚åˆå¤§å‹é¡¹ç›®çš„åˆ†å±‚ä¸åˆ†å·¥ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01baaa2c9dea48eda1b91d215a25aff9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771315187&amp;x-signature=OWpdlNT5nw8b5K2u%2FJ7T%2Fx8a9ZI%3D" alt="1.png" loading="lazy"/></p>
<h2 data-id="heading-2">2. é©æ–°æ–¹æ¡ˆï¼šStandalone ç‹¬ç«‹ç»„ä»¶</h2>
<p>Standalone æ˜¯ Angular ä¸ºç®€åŒ–å¼€å‘æ¨å‡ºçš„è½»é‡åŒ–æ–¹æ¡ˆï¼Œé€šè¿‡åœ¨ç»„ä»¶è£…é¥°å™¨ä¸­è®¾ç½® standalone: trueï¼Œè®©ç»„ä»¶æ‘†è„±å¯¹ NgModule çš„ä¾èµ–ï¼Œå®ç°â€œç»„ä»¶è‡ªåŒ…å«â€ã€‚
å…¶æ ¸å¿ƒé€»è¾‘æ˜¯â€œç»„ä»¶ä¸­å¿ƒåŒ–â€â€”â€”ç»„ä»¶è‡ªèº«å¯ç›´æ¥å¯¼å…¥æ‰€éœ€çš„æ¨¡å—ã€å…¶ä»–ç‹¬ç«‹ç»„ä»¶ï¼Œæ— éœ€åœ¨æ¨¡å—ä¸­å£°æ˜ï¼Œå¤§å¹…ç²¾ç®€äº†æ¨¡æ¿ä»£ç ï¼Œé™ä½äº†å…¥é—¨é—¨æ§›ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f7e2cc64db84235be1fb1f3da1bc196~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771315187&amp;x-signature=Wamk8cVhh3BB4m4nxViYXjpBPG8%3D" alt="2.png" loading="lazy"/></p>
<h2 data-id="heading-3">äºŒã€å®æ“å¯¹æ¯”ï¼šä»£ç å±‚é¢çš„ç›´è§‚å·®å¼‚</h2>
<p>ç†è®ºä¸å¦‚å®æ“ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„â€œæ ¹ç»„ä»¶+å¤´éƒ¨ç»„ä»¶â€åœºæ™¯ï¼Œå¯¹æ¯”ä¸¤ç§æ¨¡å¼çš„å®ç°ä»£ç ï¼Œæ„Ÿå—å…¶å·®å¼‚ã€‚</p>
<h3 data-id="heading-4">1. NgModule å®ç°æ–¹å¼</h3>
<p>éœ€åˆ›å»ºæ¨¡å—æ–‡ä»¶ï¼ˆå¦‚ app.module.tsï¼‰ï¼Œé›†ä¸­ç®¡ç†ç»„ä»¶ã€ä¾èµ–å’ŒæœåŠ¡ï¼Œæ­¥éª¤ç›¸å¯¹ç¹çï¼š
HeaderComponent éœ€å•ç‹¬åˆ›å»º header.component.ts æ–‡ä»¶ï¼Œæ¨¡æ¿å†…å®¹éœ€å®Œæ•´å®šä¹‰ï¼ŒåŒæ—¶æ¨¡å—ä¸­å¿…é¡»å£°æ˜æ‰€æœ‰ç”¨åˆ°çš„ç»„ä»¶ï¼Œå¦åˆ™ä¼šæŠ¥â€œç»„ä»¶æœªæ³¨å†Œâ€é”™è¯¯ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// header.component.tsï¼ˆä¼ ç»Ÿç»„ä»¶ï¼Œéœ€åœ¨æ¨¡å—ä¸­å£°æ˜ï¼‰</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Component</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;

@<span class="hljs-title class_">Component</span>({
  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-header'</span>,
  <span class="hljs-attr">template</span>: <span class="hljs-string">`
    ç³»ç»Ÿå¤´éƒ¨
  `</span>,
  <span class="hljs-attr">styles</span>: [<span class="hljs-string">`
    .header { padding: 16px; background: #f5f5f5; border-bottom: 1px solid #eee; }
    nav { margin-top: 8px; color: #666; }
  `</span>]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HeaderComponent</span> { }

<span class="hljs-comment">// app.component.tsï¼ˆæ ¹ç»„ä»¶ï¼‰</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Component</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;

@<span class="hljs-title class_">Component</span>({
  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-root'</span>,
  <span class="hljs-attr">template</span>: <span class="hljs-string">`
    &lt;app-header&gt;&lt;/app-header&gt;
    Angular Module æ¨¡å¼ç¤ºä¾‹
  `</span>
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppComponent</span> {
  showContent = <span class="hljs-literal">true</span>; <span class="hljs-comment">// æ§åˆ¶å†…å®¹æ˜¾ç¤ºï¼Œæ¼”ç¤º*ngIfæŒ‡ä»¤ç”¨æ³•</span>
}

<span class="hljs-comment">// app.module.tsï¼ˆæ ¸å¿ƒæ¨¡å—æ–‡ä»¶ï¼‰</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">NgModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">BrowserModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/platform-browser'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CommonModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/common'</span>; <span class="hljs-comment">// æä¾›*ngIfã€*ngForç­‰åŸºç¡€æŒ‡ä»¤</span>

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.component'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">HeaderComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./header/header.component'</span>;

@<span class="hljs-title class_">NgModule</span>({
  <span class="hljs-attr">declarations</span>: [
    <span class="hljs-comment">// å£°æ˜æ¨¡å—å†…çš„ç»„ä»¶ã€æŒ‡ä»¤ã€ç®¡é“ï¼ˆå¿…é¡»åœ¨æ­¤æ³¨å†Œï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨ï¼‰</span>
    <span class="hljs-title class_">AppComponent</span>,
    <span class="hljs-title class_">HeaderComponent</span>
  ],
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-comment">// å¯¼å…¥ä¾èµ–æ¨¡å—ï¼šBrowserModuleç”¨äºæµè§ˆå™¨æ¸²æŸ“ï¼ŒCommonModuleæä¾›åŸºç¡€æŒ‡ä»¤</span>
    <span class="hljs-title class_">BrowserModule</span>,
    <span class="hljs-title class_">CommonModule</span>
  ],
  <span class="hljs-attr">providers</span>: [
    <span class="hljs-comment">// æä¾›æ¨¡å—çº§æœåŠ¡ï¼ˆæ¨¡å—å†…æ‰€æœ‰ç»„ä»¶å…±äº«åŒä¸€ä¸ªå®ä¾‹ï¼‰</span>
    { <span class="hljs-attr">provide</span>: <span class="hljs-string">'API_BASE_URL'</span>, <span class="hljs-attr">useValue</span>: <span class="hljs-string">'https://api.example.com'</span> }
  ],
  <span class="hljs-attr">bootstrap</span>: [<span class="hljs-title class_">AppComponent</span>] <span class="hljs-comment">// æŒ‡å®šæ ¹ç»„ä»¶ï¼ŒAngularå¯åŠ¨æ—¶ä¼šæ¸²æŸ“è¯¥ç»„ä»¶</span>
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span> { }

<span class="hljs-comment">// main.tsï¼ˆåº”ç”¨å¯åŠ¨å…¥å£æ–‡ä»¶ï¼‰</span>
<span class="hljs-keyword">import</span> { platformBrowserDynamic } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/platform-browser-dynamic'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.module'</span>;

<span class="hljs-comment">// é€šè¿‡ç¼–è¯‘æ¨¡å—å¯åŠ¨åº”ç”¨ï¼Œè¿™æ˜¯ä¼ ç»ŸModuleæ¨¡å¼çš„æ ‡å‡†å¯åŠ¨æ–¹å¼</span>
<span class="hljs-title function_">platformBrowserDynamic</span>().<span class="hljs-title function_">bootstrapModule</span>(<span class="hljs-title class_">AppModule</span>)
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'åº”ç”¨å¯åŠ¨å¤±è´¥ï¼š'</span>, err));
</code></pre>
<h3 data-id="heading-5">2.Standalone å®ç°æ–¹å¼</h3>
<p>æ— éœ€æ¨¡å—æ–‡ä»¶ï¼Œç»„ä»¶è‡ªèº«å£°æ˜ä¾èµ–ï¼Œå¯åŠ¨æµç¨‹æ›´ç®€æ´ã€‚</p>
<p>è¡¥å……è¯´æ˜ï¼šç‹¬ç«‹ç»„ä»¶å¯ç›´æ¥å¯¼å…¥å…¶ä»–ç‹¬ç«‹ç»„ä»¶ï¼Œæ— éœ€é¢å¤–å£°æ˜ï¼›<strong>ä¾èµ–å¯¼å…¥éµå¾ªâ€œæŒ‰éœ€å¯¼å…¥â€åŸåˆ™</strong>ï¼Œä»…å¯¼å…¥å½“å‰ç»„ä»¶æ‰€éœ€æ¨¡å—ï¼Œå‡å°‘å†—ä½™ã€‚</p>
<pre><code class="hljs language-js" lang="js">
<span class="hljs-comment">// header.component.tsï¼ˆç‹¬ç«‹å¤´éƒ¨ç»„ä»¶ï¼Œæ— éœ€æ¨¡å—å£°æ˜ï¼‰</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Component</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CommonModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/common'</span>; <span class="hljs-comment">// è‡ªèº«å¯¼å…¥æ‰€éœ€æ¨¡å—</span>

@<span class="hljs-title class_">Component</span>({
  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-header'</span>,
  <span class="hljs-attr">standalone</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// æ ‡è®°ä¸ºç‹¬ç«‹ç»„ä»¶ï¼Œæ‘†è„±æ¨¡å—ä¾èµ–</span>
  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">CommonModule</span>], <span class="hljs-comment">// å¯¼å…¥åŸºç¡€æŒ‡ä»¤æ¨¡å—ï¼Œç”¨äºåç»­å¯èƒ½çš„*ngIfç­‰ç”¨æ³•</span>
  <span class="hljs-attr">template</span>: <span class="hljs-string">`
    ç‹¬ç«‹ç»„ä»¶å¤´éƒ¨&lt;nav *é¦–é¡µ | å…³äºæˆ‘ä»¬ | è”ç³»æˆ‘ä»¬
  `</span>,
  <span class="hljs-attr">styles</span>: [<span class="hljs-string">`
    .header { padding: 16px; background: #e8f4f8; border-bottom: 1px solid #d1e7dd; }
    nav { margin-top: 8px; color: #333; }
  `</span>]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HeaderComponent</span> {
  showNav = <span class="hljs-literal">true</span>; <span class="hljs-comment">// ç»„ä»¶å†…éƒ¨çŠ¶æ€ï¼Œæ§åˆ¶å¯¼èˆªæ˜¾ç¤º</span>
}

<span class="hljs-comment">// app.component.tsï¼ˆç‹¬ç«‹æ ¹ç»„ä»¶ï¼‰</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Component</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CommonModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">HeaderComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./header/header.component'</span>; <span class="hljs-comment">// ç›´æ¥å¯¼å…¥ç‹¬ç«‹ç»„ä»¶</span>

<span class="hljs-comment">// æŠ½ç¦»å…±äº«ä¾èµ–ï¼ˆç¼“è§£é‡å¤å¯¼å…¥é—®é¢˜ï¼Œå¤§å‹é¡¹ç›®æ¨èç”¨æ³•ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">SharedDependencies</span> = [<span class="hljs-title class_">CommonModule</span>, <span class="hljs-title class_">HeaderComponent</span>];

@<span class="hljs-title class_">Component</span>({
  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-root'</span>,
  <span class="hljs-attr">standalone</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// æ ¸å¿ƒæ ‡è®°ï¼šç‹¬ç«‹ç»„ä»¶</span>
  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">SharedDependencies</span>], <span class="hljs-comment">// å¯¼å…¥æ‰€éœ€ä¾èµ–ï¼ˆæ¨¡å—+ç‹¬ç«‹ç»„ä»¶ï¼‰</span>
  <span class="hljs-attr">providers</span>: [
    <span class="hljs-comment">// ç»„ä»¶çº§æœåŠ¡ï¼šé»˜è®¤å½“å‰ç»„ä»¶åŠå­ç»„ä»¶å…±äº«å®ä¾‹ï¼Œè‹¥éœ€å…¨å±€å•ä¾‹å¯åŠ providedIn: 'root'</span>
    { <span class="hljs-attr">provide</span>: <span class="hljs-string">'API_BASE_URL'</span>, <span class="hljs-attr">useValue</span>: <span class="hljs-string">'https://api.example.com'</span>, <span class="hljs-attr">providedIn</span>: <span class="hljs-string">'root'</span> }
  ],
  <span class="hljs-attr">template</span>: <span class="hljs-string">`
&lt;app-header&gt;&lt;/app-header&gt;
    Angular Standalone æ¨¡å¼ç¤ºä¾‹
  `</span>
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppComponent</span> {
  showContent = <span class="hljs-literal">true</span>;

  <span class="hljs-comment">// äº¤äº’æ–¹æ³•ï¼Œæ¼”ç¤ºç»„ä»¶åŸºç¡€åŠŸèƒ½</span>
  <span class="hljs-title function_">toggleContent</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">showContent</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">showContent</span>;
  }
}

<span class="hljs-comment">// main.tsï¼ˆç‹¬ç«‹ç»„ä»¶å¯åŠ¨å…¥å£ï¼‰</span>
<span class="hljs-keyword">import</span> { bootstrapApplication } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/platform-browser'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.component'</span>;

<span class="hljs-comment">// ç›´æ¥å¯åŠ¨ç‹¬ç«‹æ ¹ç»„ä»¶ï¼Œæ— éœ€æ¨¡å—ä»‹å…¥ï¼Œå¯åŠ¨æµç¨‹æ›´ç®€æ´</span>
<span class="hljs-title function_">bootstrapApplication</span>(<span class="hljs-title class_">AppComponent</span>, {
  <span class="hljs-comment">// å¯é€‰ï¼šå…¨å±€é…ç½®ï¼Œå¦‚æä¾›å…¨å±€æœåŠ¡ï¼ˆæ›¿ä»£æ¨¡å—çº§providersï¼‰</span>
  <span class="hljs-attr">providers</span>: [{ <span class="hljs-attr">provide</span>: <span class="hljs-string">'GLOBAL_CONFIG'</span>, <span class="hljs-attr">useValue</span>: { <span class="hljs-attr">env</span>: <span class="hljs-string">'production'</span> } }]
})
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'åº”ç”¨å¯åŠ¨å¤±è´¥ï¼š'</span>, err));
</code></pre>
<h2 data-id="heading-6">ä¸‰ã€ä¼ ç»Ÿä¸é©æ–°ï¼Œå­°ä¼˜å­°åŠ£ï¼Ÿ</h2>
<p>ä¸¤ç§æ–¹æ¡ˆå„æœ‰ä¼˜åŠ£ï¼Œæ²¡æœ‰ç»å¯¹çš„â€œå®Œç¾â€ã€‚</p>
<h3 data-id="heading-7">1. NgModule çš„ä¼˜ç¼ºç‚¹</h3>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>
<p>æˆç†Ÿç¨³å®šï¼Œ<strong>ç”Ÿæ€å…¼å®¹</strong>ï¼šä½œä¸º Angular æ ¸å¿ƒæœºåˆ¶ï¼Œå…¼å®¹æ‰€æœ‰ç¬¬ä¸‰æ–¹åº“ã€æ’ä»¶å’Œä¼ ç»Ÿé¡¹ç›®ï¼Œå‡ ä¹æ— é€‚é…é£é™©ï¼Œæ˜¯è€é¡¹ç›®ç»´æŠ¤çš„é¦–é€‰ã€‚</p>
</li>
<li>
<p><strong>å¼ºæ¨¡å—åŒ–</strong>å°è£…ï¼šé€‚åˆå¤§å‹å›¢é˜Ÿåä½œï¼Œå¯æŒ‰ä¸šåŠ¡åŸŸï¼ˆå¦‚ç”¨æˆ·æ¨¡å—ã€è®¢å•æ¨¡å—ï¼‰æ‹†åˆ†ç‹¬ç«‹ NgModuleï¼Œè¾¹ç•Œæ¸…æ™°ï¼Œä¾¿äºåˆ†å·¥ç»´æŠ¤å’Œæƒé™ç®¡æ§ã€‚</p>
</li>
<li>
<p><strong>é›†ä¸­å¼ä¾èµ–ç®¡ç†</strong>ï¼šæ¨¡å—çº§ç»Ÿä¸€å¯¼å…¥ä¾èµ–ï¼Œé¿å…å¤šä¸ªç»„ä»¶é‡å¤å¯¼å…¥ç›¸åŒæ¨¡å—ï¼Œå‡å°‘å†—ä½™ä»£ç ï¼Œé€‚åˆå¤§é‡ç»„ä»¶å…±äº«ä¾èµ–çš„åœºæ™¯ã€‚</p>
</li>
<li>
<p>æœåŠ¡ä½œç”¨åŸŸæ¸…æ™°ï¼šæ¨¡å—çº§æœåŠ¡é»˜è®¤åœ¨æ¨¡å—å†…å•ä¾‹ï¼Œæ— éœ€é¢å¤–é…ç½®å³å¯å®ç°â€œ<strong>æ¨¡å—å†…å…±äº«ã€æ¨¡å—é—´éš”ç¦»</strong>â€ï¼Œé€‚åˆæŒ‰æ¨¡å—éš”ç¦»ä¸šåŠ¡é€»è¾‘çš„åœºæ™¯ã€‚</p>
</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>
<p>æ¨¡å—ä»£ç å†—ä½™ï¼šå³ä½¿æ˜¯ç®€å•ç»„ä»¶ï¼Œä¹Ÿéœ€åˆ›å»ºæ¨¡å—æ–‡ä»¶ï¼Œç¼–å†™ @NgModule è£…é¥°å™¨åŠ declarations/imports ç­‰é…ç½®ï¼Œå¢åŠ æ— ä¸šåŠ¡ä»·å€¼çš„æ¨¡å—ä»£ç ã€‚</p>
</li>
<li>
<p>å­¦ä¹ æˆæœ¬ï¼šæ–°æ‰‹æ˜“æ··æ·† declarationsï¼ˆå£°æ˜ç»„ä»¶ï¼‰ã€importsï¼ˆå¯¼å…¥æ¨¡å—ï¼‰ã€exportsï¼ˆå¯¼å‡ºç»„ä»¶ï¼‰çš„ç”¨æ³•ï¼Œå¸¸å‡ºç°â€œç»„ä»¶æ‰¾ä¸åˆ°â€â€œæŒ‡ä»¤æœªæ³¨å†Œâ€ç­‰é”™è¯¯ã€‚</p>
</li>
<li>
<p>ç¼–è¯‘æ•ˆç‡ç•¥ä½ï¼š<strong>æ¨¡å—æ˜¯ç¼–è¯‘åŸºæœ¬å•å…ƒï¼Œä¿®æ”¹ä¸€ä¸ªç»„ä»¶å¯èƒ½è§¦å‘æ•´ä¸ªæ¨¡å—çš„é‡æ–°ç¼–è¯‘</strong>ï¼Œå¤§å‹æ¨¡å—ä¼šå¢åŠ ç¼–è¯‘è€—æ—¶ã€‚</p>
</li>
<li>
<p><strong>ç»„ä»¶å¤ç”¨æˆæœ¬é«˜</strong>ï¼šç»„ä»¶å¿…é¡»ç»‘å®šæ¨¡å—ï¼Œè·¨é¡¹ç›®å¤ç”¨å•ä¸ªç»„ä»¶æ—¶ï¼Œéœ€è¿å¸¦å…¶æ‰€å±æ¨¡å—ä¸€èµ·å¤åˆ¶ï¼Œçµæ´»æ€§ä¸è¶³ã€‚</p>
</li>
</ul>
<h3 data-id="heading-8">2. Standalone çš„ä¼˜ç¼ºç‚¹</h3>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>
<p>è½»é‡åŒ–ï¼Œå¼€å‘æ•ˆç‡é«˜ï¼š<strong>æ— éœ€åˆ›å»ºæ¨¡å—æ–‡ä»¶</strong>ï¼Œå…¥é—¨é—¨æ§›ä½ï¼Œä¸­å°å‹é¡¹ç›®ã€åŸå‹å¼€å‘é€Ÿåº¦å¤§å¹…æå‡ã€‚</p>
</li>
<li>
<p>ç²¾å‡†ä¾èµ–ï¼Œä»£ç ç²¾ç®€ï¼šç»„ä»¶ä»…<strong>æŒ‰éœ€å¯¼å…¥</strong>è‡ªèº«æ‰€éœ€ä¾èµ–ï¼Œé¿å…æ¨¡å—çº§å¯¼å…¥å¸¦æ¥çš„å†—ä½™ä¾èµ–ï¼Œä»£ç æ›´æ¸…æ™°ã€å¯ç»´æŠ¤æ€§æ›´å¼ºã€‚</p>
</li>
<li>
<p>ç¼–è¯‘æ€§èƒ½æ›´ä¼˜ï¼š<strong>ç‹¬ç«‹ç»„ä»¶æ˜¯æœ€å°ç¼–è¯‘å•å…ƒ</strong>ï¼Œä¿®æ”¹å•ä¸ªç»„ä»¶ä»…è§¦å‘è‡ªèº«é‡æ–°ç¼–è¯‘ï¼Œå¤§å‹é¡¹ç›®ç¼–è¯‘é€Ÿåº¦æå‡æ˜æ˜¾ã€‚</p>
</li>
<li>
<p>å¤ç”¨æ€§å¼ºï¼šç»„ä»¶å®Œå…¨ç‹¬ç«‹äºæ¨¡å—ï¼Œè·¨é¡¹ç›®å¤ç”¨åªéœ€å¤åˆ¶ç»„ä»¶æ–‡ä»¶ï¼Œæ— éœ€è¿å¸¦æ¨¡å—ï¼Œæ˜¯ç»„ä»¶åº“å¼€å‘çš„æœ€ä¼˜é€‰æ‹©ã€‚</p>
</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>ä¾èµ–<strong>é‡å¤å¯¼å…¥</strong>ï¼šå¤šä¸ªç‹¬ç«‹ç»„ä»¶éœ€åŒä¸€æ¨¡å—ï¼ˆå¦‚ CommonModuleï¼‰æ—¶ï¼Œéœ€å„è‡ªå¯¼å…¥ï¼Œæ˜“å‡ºç°é‡å¤ä»£ç ï¼ˆå¯é€šè¿‡<strong>æŠ½ç¦»å…±äº«ç»„ä»¶æ¨¡å—</strong>å¯¼å…¥ç¼“è§£ï¼Œå¦‚ä¸‹å›¾ï¼‰ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f49b9859ee844a1981a905768381e8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771315187&amp;x-signature=haLKQWsz7ZlSltgbaKymBxtYPBQ%3D" alt="3.png" loading="lazy"/></p>
<ul>
<li>
<p>éƒ¨åˆ†è€åº“é€‚é…ä¸è¶³ï¼šå°‘æ•°æœªå‡çº§çš„ç¬¬ä¸‰æ–¹åº“ä¾èµ–æ¨¡å—çº§ç‰¹æ€§ï¼Œéœ€é¢å¤–é€‚é…æ‰èƒ½åœ¨ç‹¬ç«‹ç»„ä»¶ä¸­ä½¿ç”¨ã€‚</p>
</li>
<li>
<p><strong>æœåŠ¡ä½œç”¨åŸŸé…ç½®å¤æ‚</strong>ï¼š<strong>é»˜è®¤æ˜¯ç»„ä»¶çº§å•ä¾‹</strong>ï¼Œè‹¥éœ€å®ç°å…¨å±€å•ä¾‹æˆ–æ¨¡å—çº§å•ä¾‹ï¼Œéœ€é¢å¤–é…ç½® providedIn: 'root' æˆ–é€šè¿‡å…±äº«ç»„ä»¶å°è£…ï¼Œæ¯” NgModule ç¹çã€‚</p>
</li>
</ul>
<p><strong>PS</strong>ï¼š</p>
<ul>
<li>
<p><strong>ç»„ä»¶çº§å•ä¾‹</strong>ï¼šå‡å¦‚ä½ æœ‰ 3 ä¸ªç‹¬ç«‹çš„ ButtonComponentï¼Œéƒ½æ³¨å…¥äº†åŒä¸€ä¸ª CountServiceï¼Œé‚£ä¹ˆè¿™ 3 ä¸ªç»„ä»¶ä¼šå„æœ‰ä¸€ä¸ª CountServiceï¼Œç‚¹å‡»æŒ‰é’®è®¡æ•°æ—¶ï¼Œå„è‡ªçš„æ•°å­—ä¸ä¼šäº’ç›¸å½±å“ã€‚</p>
</li>
<li>
<p><strong>å…¨å±€çº§å•ä¾‹</strong>ï¼šå…¨å±€åªæœ‰ä¸€ä¸ªæœåŠ¡å®ä¾‹â€ï¼ˆæ¯”å¦‚ç”¨æˆ·ç™»å½•çŠ¶æ€ã€å…¨å±€ç¼“å­˜ï¼‰ã€‚</p>
</li>
</ul>
<h2 data-id="heading-9">å››ã€å„æœ‰ä¼˜åŠ£ï¼Œå¦‚ä½•é€‰æ‹©ï¼Ÿ</h2>
<p>NgModule ä»£è¡¨äº† Angular ä¼ ç»Ÿçš„â€œå¼ºæ¨¡å—åŒ–â€è®¾è®¡ç†å¿µï¼ŒStandalone åˆ™æ˜¯ Angular å¯¹â€œè½»é‡åŒ–ã€é«˜æ•ˆåŒ–â€çš„æ¢ç´¢ï¼Œä¸¤è€…<strong>å¹¶ééæ­¤å³å½¼</strong>çš„æ›¿ä»£å…³ç³»ï¼Œè€Œå¯ä»¥æ˜¯äº’è¡¥å…³ç³»ã€‚</p>
<ul>
<li>
<p>å…¨æ–°ä¸­å°å‹é¡¹ç›®/åŸå‹å¼€å‘ï¼šä¼˜å…ˆé€‰æ‹© Standalone ç»„ä»¶ã€‚è½»é‡åŒ–ç‰¹æ€§å¯å¿«é€Ÿè¿­ä»£ï¼Œå‡å°‘æ¨¡æ¿ä»£ç ï¼Œé™ä½å›¢é˜Ÿåä½œæˆæœ¬ã€‚</p>
</li>
<li>
<p>å¤§å‹ä¼ä¸šçº§é¡¹ç›®/å¤šäººåä½œï¼šé‡‡ç”¨<strong>æ··åˆæ¨¡å¼</strong>ã€‚ä¿ç•™æ ¸å¿ƒä¸šåŠ¡æ¨¡å—ï¼ˆNgModuleï¼‰çš„å°è£…æ€§ï¼Œæ–°å¼€å‘çš„ç»„ä»¶ã€æŒ‡ä»¤ä½¿ç”¨ Standalone æ¨¡å¼ï¼Œé€æ­¥è¿ç§»è€ç»„ä»¶ï¼Œå…¼é¡¾ç¨³å®šæ€§å’Œå¼€å‘æ•ˆç‡ã€‚</p>
</li>
</ul>
<h2 data-id="heading-10">æ€»ç»“</h2>
<p>ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬æ— éœ€çº ç»“äºâ€œå“ªç§æ›´å¥½â€ï¼Œè€Œæ˜¯è¦ç†è§£ä¸¤ç§æ–¹æ¡ˆçš„è®¾è®¡åˆè¡·ï¼Œæ ¹æ®é¡¹ç›®è§„æ¨¡ã€å›¢é˜Ÿç»“æ„ã€å¤ç”¨éœ€æ±‚çµæ´»é€‰å‹ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯ä»¥é€‰æ‹©æ··åˆä½¿ç”¨ä¸¤ç§æ¨¡å¼ï¼Œæ—¢èƒ½ä¿ç•™ä¼ ç»Ÿæ¶æ„çš„ç¨³å®šæ€§ï¼Œåˆèƒ½äº«å—æ–°èŒƒå¼çš„é«˜æ•ˆæ€§ã€‚</p>
<p><strong>ä¸€ç‚¹æ‹™è§åˆ†äº«ï¼ŒæŠ›ç –å¼•ç‰ï¼Œæ¬¢è¿å¤§å®¶ä¸æˆ‘äº¤æµè¡¥å……ï¼Œå…±åŒè¿›æ­¥~</strong></p>
<h2 data-id="heading-11">å…³äºOpenTiny</h2>
<p>æ¬¢è¿åŠ å…¥ OpenTiny å¼€æºç¤¾åŒºã€‚æ·»åŠ å¾®ä¿¡å°åŠ©æ‰‹ï¼šopentiny-official ä¸€èµ·å‚ä¸äº¤æµå‰ç«¯æŠ€æœ¯ï½<br/>
OpenTiny å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.design" target="_blank" title="https://opentiny.design" ref="nofollow noopener noreferrer">opentiny.design</a><br/>
OpenTiny ä»£ç ä»“åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny" target="_blank" title="https://github.com/opentiny" ref="nofollow noopener noreferrer">github.com/opentiny</a><br/>
TinyVueæºç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-vue" target="_blank" title="https://github.com/opentiny/tiny-vue" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a></p>
<p>æ¬¢è¿è¿›å…¥ä»£ç ä»“åº“ StarğŸŒŸTinyVueã€TinyEngineã€TinyProã€TinyNGã€TinyCLIã€TinyEditor<br/>
å¦‚æœä½ ä¹Ÿæƒ³è¦å…±å»ºï¼Œå¯ä»¥è¿›å…¥ä»£ç ä»“åº“ï¼Œæ‰¾åˆ° good first issueæ ‡ç­¾ï¼Œä¸€èµ·å‚ä¸å¼€æºè´¡çŒ®~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ†äº«å¸¸ç”¨çš„çŸ­é“¾åœºæ™¯è®¾è®¡æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7604779604126203904</link>    <guid>https://juejin.cn/post/7604779604126203904</guid>    <pubDate>2026-02-10T08:00:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604779604126203904" data-draft-id="7441842559386697765" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ†äº«å¸¸ç”¨çš„çŸ­é“¾åœºæ™¯è®¾è®¡æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="æ¶æ„,åç«¯,Java"/> <meta itemprop="datePublished" content="2026-02-10T08:00:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æš®è‰²å¦–å¨†ä¸¶"/> <meta itemprop="url" content="https://juejin.cn/user/4292946760307655"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ†äº«å¸¸ç”¨çš„çŸ­é“¾åœºæ™¯è®¾è®¡æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4292946760307655/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æš®è‰²å¦–å¨†ä¸¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T08:00:38.000Z" title="Tue Feb 10 2026 08:00:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>çŸ­é“¾æ˜¯æˆ‘ä»¬ä¸šåŠ¡ä¸­ä¸é™Œç”Ÿçš„ä¸€ä¸ªåœºæ™¯ï¼Œä¹Ÿæ˜¯ç”Ÿæ´»ä¸­å¸¸è§çš„åœºæ™¯ï¼Œæ¯”å¦‚æˆ‘å‰å‡ å¤©ç»­è´¹è½¦é™©æ¶‰åŠåˆ°çš„ç›¸å…³æ“ä½œï¼Œä¿é™©å…¬å¸ç»™æˆ‘å‘äº†ä¸€ä¸ªçŸ­ä¿¡ï¼Œé‡Œé¢å°±æ˜¯ä¸€ä¸ªçŸ­é“¾ï¼Œç‚¹å‡»ä¹‹åä¼šè·³è½¬åˆ°ä¸€ä¸ª APP é¡µé¢ã€‚æ­£å¥½æœ€è¿‘çš„é¡¹ç›®æœ‰çŸ­é“¾åœºæ™¯ï¼Œåˆ†äº«ä¸€ä¸‹å¯èƒ½çš„å®ç°æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-1">æºç </h2>
<p>æºç å·²åˆ†äº«åˆ° Github <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyanzhisishui%2Fli-short-url.git" target="_blank" title="https://github.com/yanzhisishui/li-short-url.git" ref="nofollow noopener noreferrer">çŸ­é“¾ç”Ÿæˆé¡¹ç›®</a>
ä¸‹è½½å³ç”¨</p>
<h2 data-id="heading-2">ä¸ºä»€ä¹ˆéœ€è¦çŸ­é“¾</h2>
<p>ä¸ºä»€ä¹ˆè¦ç”¨çŸ­é“¾æ¥ä»£æ›¿åŸå§‹çš„é•¿é“¾å‘¢ï¼Ÿå¯èƒ½å¾—åŸå› æ˜¯ä»¥ä¸‹å‡ ç‚¹</p>
<ul>
<li>åŸå§‹çš„é•¿é“¾ä¼šæš´éœ²æˆ‘ä»¬çš„ <code>uri</code> èµ„æºä¿¡æ¯ï¼Œå¯¹æœåŠ¡å™¨æ¥è¯´ä¼šæœ‰ä¸€äº›ä¸å®‰å…¨</li>
<li>åŸå§‹çš„é•¿é“¾é•¿åº¦å¤ªé•¿äº†ï¼Œä¼šå ç”¨å¤ªå¤šçŸ­ä¿¡å­—æ•°ï¼ŒæœåŠ¡å•†çš„çŸ­ä¿¡å­—æ•°é•¿åº¦æ˜¯æœ‰é™åˆ¶çš„ï¼Œå¹¶ä¸”å¤ªé•¿çš„é“¾æ¥çœ‹èµ·æ¥ä¹Ÿä¸å‹å¥½</li>
<li>åŸå§‹çš„é•¿é“¾é‡Œé¢å¯èƒ½ä¼šåŒ…å«ä¸€äº›æ•æ„Ÿä¿¡æ¯ï¼Œå¦‚æœéšæ„æ˜æ–‡æš´éœ²å¯èƒ½ä¹Ÿä¼šé€ æˆå®‰å…¨é—®é¢˜</li>
</ul>
<h2 data-id="heading-3">å®ç°æ¦‚è¿°</h2>
<p>æˆ‘ä»¬è¦å®ç°çš„åŠŸèƒ½æ˜¯å°†åŸæœ¬æƒ³è¦ç”¨æˆ·ç‚¹å‡»è®¿é—®çš„é•¿é“¾æ¥ï¼Œå˜æˆä¸€ä¸ªçŸ­é“¾æ¥æ¥ä»£æ›¿ï¼Œå¹¶ä¸”ç”¨æˆ·è®¿é—®è¿™ä¸ªçŸ­é“¾æ¥è¦å’Œè®¿é—®è¿™ä¸ªé•¿é“¾æ¥æ˜¯ä¸€æ ·çš„æ•ˆæœã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€äº›ç»“è®º</p>
<ul>
<li><strong>çŸ­é“¾è¦æœ‰è¿‡æœŸæ—¶é—´ï¼Œä¸èƒ½é•¿æœŸæœ‰æ•ˆ</strong></li>
<li><strong>åŸå§‹é•¿é“¾å’ŒçŸ­é“¾è¦æœ‰æ˜ å°„å…³ç³»ï¼Œé€šè¿‡çŸ­é“¾èƒ½å¤ŸæŸ¥è¯¢åˆ°å¯¹åº”çš„é•¿é“¾</strong></li>
<li><strong>éœ€è¦ä¸€ä¸ªæœåŠ¡å¤„ç†è®¿é—®çš„çŸ­é“¾èµ„æºï¼Œå°†è¯·æ±‚é‡å®šå‘åˆ°åŸå§‹é•¿é“¾</strong></li>
<li><strong>çŸ­é“¾è¦å”¯ä¸€ï¼Œä¸èƒ½é‡å¤</strong></li>
</ul>
<h2 data-id="heading-4">è¡¨è®¾è®¡</h2>
<p>æˆ‘ä»¬éœ€è¦ä¸€å¼ è¡¨æ¥å­˜å‚¨çŸ­é“¾å’Œé•¿é“¾çš„æ˜ å°„å…³ç³»ï¼Œä¸ºäº†æ–¹ä¾¿æŸ¥è¯¢ï¼Œæœ€å¥½æ˜¯ç•™ä¸€ä¸ª <code>md5</code> åŠ å¯†è¿‡çš„é•¿é“¾ä¿¡æ¯å­—æ®µ</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `ShortUrlRecord`  (
  `id` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ä¸»é”®'</span>,
  `long_url` <span class="hljs-type">varchar</span>(<span class="hljs-number">2500</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'é•¿é“¾æ¥åœ°å€'</span>,
  `domain` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'çŸ­é“¾åŸŸå'</span>,
  `service_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å¾®æœåŠ¡id'</span>,
  `long_url_md5` <span class="hljs-type">varchar</span>(<span class="hljs-number">36</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'é•¿é“¾æ¥md5åŠ å¯†å­—ç¬¦ä¸²'</span>,
  `short_url` <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'çŸ­é“¾æ¥ uri'</span>,
  `compensated` tinyint(<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'æ˜¯å¦å“ˆå¸Œå†²çªè¡¥å¿'</span>,
  `expire_time` datetime <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è¿‡æœŸæ—¶é—´'</span>,
  `crt_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> now() COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´'</span>,
  `upt_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> now() <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'æ›´æ–°æ—¶é—´'</span>,
  `deleted` tinyint(<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'åˆ é™¤æ ‡è¯†'</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`)
);
</code></pre>
<h2 data-id="heading-5">ç”ŸæˆçŸ­é“¾ä»£ç </h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * ç”ŸæˆçŸ­é“¾
 */</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">generateShortUrl</span><span class="hljs-params">(ShortUrlGenerateRequest request)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">md5</span> <span class="hljs-operator">=</span> EncryptUtil.md5(request.getLongUrl());
    <span class="hljs-comment">//å…ˆæŸ¥è¯¢é•¿é“¾æ˜¯å¦å·²å­˜åœ¨ï¼Œå­˜åœ¨ç›´æ¥è¿”å›æ•°æ®åº“ä¸­çš„çŸ­é“¾</span>
    <span class="hljs-type">ShortUrlRecord</span> <span class="hljs-variable">exist</span> <span class="hljs-operator">=</span> shortUrlRecordMapper.selectOne(Wrappers.&lt;ShortUrlRecord&gt;lambdaQuery().eq(ShortUrlRecord::getLongUrlMd5, md5));
    <span class="hljs-keyword">if</span> (exist != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> exist.getShortUrl();
    }
    <span class="hljs-comment">//ç”ŸæˆçŸ­é“¾</span>
    Set&lt;String&gt; shortUrlList = randomShortUrl(request.getLongUrl());
    List&lt;ShortUrlRecord&gt; existsRecordList = shortUrlRecordMapper.selectList(Wrappers.&lt;ShortUrlRecord&gt;lambdaQuery().in(ShortUrlRecord::getShortUrl, shortUrlList));
    <span class="hljs-comment">//ç§»é™¤æ‰æ•°æ®åº“ä¸­å·²ç»å­˜åœ¨çš„</span>
    shortUrlList.removeIf(item -&gt; existsRecordList.stream().anyMatch(x -&gt; x.getShortUrl().equals(item)));
    <span class="hljs-comment">//éšæœºé€‰ä¸€ä¸ª</span>
    <span class="hljs-keyword">return</span> shortUrlList.stream().findAny().map(item -&gt; {
        <span class="hljs-comment">//ä¿å­˜çŸ­é“¾è®°å½•</span>
        <span class="hljs-type">ShortUrlRecord</span> <span class="hljs-variable">record</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShortUrlRecord</span>();
        record.setLongUrl(request.getLongUrl());
        record.setDomain(request.getDomain());
        record.setServiceId(request.getServiceId());
        record.setLongUrlMd5(md5);
        record.setShortUrl(item);
        record.setCompensated(<span class="hljs-number">0</span>);
        record.setExpireTime(LocalDateTime.now().plus(request.getExpireDuration()));
        shortUrlRecordMapper.insert(record);
        <span class="hljs-keyword">return</span> item;
    }).orElseGet(() -&gt; {
        <span class="hljs-comment">//èµ°åˆ°è¿™è¯´æ˜äº§ç”Ÿå‡ºæ¥çš„çŸ­é“¾å…¨éƒ½å·²ç»å­˜åœ¨äº†ï¼Œä½¿ç”¨å…œåº•æ–¹æ¡ˆï¼Œåˆ›å»ºä¸€ä¸ªå¿…å®šå”¯ä¸€çš„çŸ­é“¾</span>
        <span class="hljs-keyword">return</span> compensateGenerate(request);
    });
}
</code></pre>
<p>éšæœºçŸ­é“¾å‡½æ•°</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * ç”ŸæˆçŸ­é“¾åç¼€é›†åˆ
 */</span>
<span class="hljs-keyword">private</span> Set&lt;String&gt; <span class="hljs-title function_">randomShortUrl</span><span class="hljs-params">(String longUrl)</span> {
    <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<span class="hljs-comment">//çŸ­é“¾åˆ›å»ºä¸ªæ•°</span>
    Set&lt;String&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; num; i++) {
        <span class="hljs-type">String</span> <span class="hljs-variable">suffix</span> <span class="hljs-operator">=</span> randomString(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(CHAR_ARRAYS), <span class="hljs-number">5</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> longUrl + <span class="hljs-string">"_"</span> + suffix; 
        <span class="hljs-comment">//ä½¿ç”¨ MurmurHash3 å“ˆå¸Œç®—æ³•è®¡ç®—å­—ç¬¦ä¸²çš„å“ˆå¸Œå€¼ï¼ˆä»ç½‘ä¸Šæ‰¾çš„ç®—æ³•ï¼‰</span>
        <span class="hljs-type">HashCode</span> <span class="hljs-variable">hashCode</span> <span class="hljs-operator">=</span> Hashing.murmur3_32_fixed().hashString(url, UTF_8);
        <span class="hljs-comment">//Base62ç¼–ç å¹¶æ·»åŠ åˆ°ç»“æœé›†ï¼Œç¤ºä¾‹ç»“æœï¼š2fLhXj</span>
        result.add(Base62.encode(hashCode.asBytes()));
    }
    <span class="hljs-keyword">return</span> result;
}
</code></pre>
<h2 data-id="heading-6">å…œåº•é˜²é‡å¤</h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * è¡¥å¿å…œåº•ç”ŸæˆçŸ­é“¾ï¼Œå½“ randomShortUrl æ–¹æ³•äº§ç”Ÿçš„çŸ­é“¾å…¨éƒ½å­˜åœ¨äºæ•°æ®åº“ä¸­çš„æ—¶å€™è°ƒç”¨è¯¥æ–¹æ³•
 */</span>
<span class="hljs-keyword">private</span> String <span class="hljs-title function_">compensateGenerate</span><span class="hljs-params">(ShortUrlGenerateRequest request)</span> {
    <span class="hljs-type">long</span> <span class="hljs-variable">seqId</span> <span class="hljs-operator">=</span> nextId();
    <span class="hljs-type">String</span> <span class="hljs-variable">shortUrl</span> <span class="hljs-operator">=</span> Base32.encode(parseBytes(seqId));
    <span class="hljs-type">ShortUrlRecord</span> <span class="hljs-variable">record</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShortUrlRecord</span>();
    record.setLongUrl(request.getLongUrl());
    record.setDomain(request.getDomain());
    record.setServiceId(request.getServiceId());
    record.setLongUrlMd5(EncryptUtil.md5(request.getLongUrl()));
    record.setShortUrl(shortUrl);
    record.setCompensated(<span class="hljs-number">1</span>);
    record.setExpireTime(LocalDateTime.now().plus(request.getExpireDuration()));
    shortUrlRecordMapper.insert(record);
    <span class="hljs-keyword">return</span> shortUrl;
}
</code></pre>
<p>è¿™é‡Œçš„ <code>nextId()</code> æˆ‘ä»¬è¿˜æ˜¯é‡‡ç”¨å·æ®µçš„æ–¹å¼äº§ç”Ÿçš„åºåˆ—å·ï¼Œå¯¹å·æ®µä¸ç†Ÿæ‚‰çš„å¯ä»¥å‚è€ƒ <a href="https://juejin.cn/post/7454449782964289545" target="_blank" title="https://juejin.cn/post/7454449782964289545">ä¸šåŠ¡äº¤æ˜“å·çš„ç”Ÿæˆæ–¹å¼ â€”â€” å·æ®µ</a></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * ä¸‹ä¸€ä¸ªid
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">nextId</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">//ç”Ÿæˆå”¯ä¸€åºåˆ—å· yyyyMMddHHmmSS+5</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">currentTime</span> <span class="hljs-operator">=</span> LocalDateTime.now().format(DateTimeFormatter.ofPattern(<span class="hljs-string">"yyyyMMddHHmmss"</span>));
    <span class="hljs-type">long</span> <span class="hljs-variable">suffix</span> <span class="hljs-operator">=</span> sequenceService.next(SequenceTypes.SHORT_URL_SEQ_ID);
    <span class="hljs-comment">//å½“å‰æ—¶é—´+å”¯ä¸€åºåˆ—å·æˆªå–åäº”ä½ï¼Œä¸è¶³è¡¥ 0 ï¼ˆå½“ä¸€ç§’é’Ÿäº§ç”Ÿè¶…è¿‡ 10w æ¬¡çŸ­é“¾å†²çªçš„æ—¶å€™ä¼šå‡ºç°é—®é¢˜ï¼Œæ¦‚ç‡å¾ˆå°ä¸äºˆè€ƒè™‘ï¼‰</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">seqId</span> <span class="hljs-operator">=</span> currentTime + StringUtil.subOrLefPad(String.valueOf(suffix), <span class="hljs-number">5</span>);
    <span class="hljs-keyword">return</span> Long.parseLong(seqId);
}
</code></pre>
<h2 data-id="heading-7">çŸ­é“¾é‡å®šå‘</h2>
<p>æˆ‘ä»¬éœ€è¦å•ç‹¬éƒ¨ç½²ä¸€ä¸ªä»£ç†ä¾‹å¦‚  <code>nginx</code>ï¼Œå¤„ç†æˆ‘ä»¬çŸ­é“¾çš„åŸŸåï¼Œå°†è¯·æ±‚ä»£ç†åˆ°çŸ­é“¾è§£ææœåŠ¡ï¼Œç„¶ååœ¨çŸ­é“¾è§£ææœåŠ¡ä¸­ï¼Œè·å–åˆ°è¯·æ±‚çš„çŸ­é“¾è·¯å¾„å˜é‡ï¼Œç„¶åæŸ¥è¯¢å¯¹åº”çš„é•¿é“¾å»é‡å®šå‘è¯·æ±‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@GetMapping("/{shortUrl}")</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">resolveShortUrl</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable("shortUrl")</span> String shortUrl)</span> {
    <span class="hljs-type">ShortUrlRecord</span> <span class="hljs-variable">record</span> <span class="hljs-operator">=</span> shortUrlRecordMapper.selectOne(Wrappers.&lt;ShortUrlRecord&gt;lambdaQuery().eq(ShortUrlRecord::getShortUrl, shortUrl));
    <span class="hljs-comment">//è¿‡æœŸåˆ¤æ–­...</span>
    <span class="hljs-comment">//é‡å®šå‘</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"redirect:"</span>+record.getLongUrl();
}
</code></pre>
<h2 data-id="heading-8">çŸ­é“¾è¿‡æœŸ</h2>
<p>æœ‰ä¸ªåœºæ™¯ï¼ŒçŸ­é“¾æ˜¯ä¼šè¿‡æœŸçš„ï¼Œå‡å¦‚äº§å“çš„éœ€æ±‚æ˜¯å½“å¤© <code>23:59:59</code> è¿‡æœŸï¼Œç„¶åç¬¬äºŒå¤©ç”¨æˆ·è®¿é—®çŸ­é“¾çš„æ—¶å€™ï¼Œé€šè¿‡æœåŠ¡ä»£ç†ä¹‹åå‘ç°è¿™ä¸ªé“¾æ¥å·²ç»è¿‡æœŸï¼Œç»™ç”¨æˆ·ä¸€ä¸ªé»˜è®¤çš„å…œåº•é¡µé¢ã€‚</p>
<p>ç„¶åç”¨æˆ·åé¦ˆè¿‡æ¥ï¼Œæˆ‘ä»¬é‡æ–°å‘é€çŸ­ä¿¡çŸ­é“¾ç»™ç”¨æˆ·ï¼Œä½†æ˜¯é•¿é“¾åœ°å€æ˜¯ä¸å˜çš„ã€‚<code>MD5</code> ä¹‹åçš„é•¿é“¾ç»“æœä¹Ÿæ˜¯ä¸å˜çš„ï¼Œæ ¹æ®ä¸Šé¢çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¼šè¿”å›å·²å­˜åœ¨çš„è¿‡æœŸçŸ­é“¾ã€‚é‚£ä¹ˆç”¨æˆ·å†æ¬¡è®¿é—®è¿™ä¸ªçŸ­é“¾è¿˜æ˜¯ä¼šè¿‡æœŸï¼Œè¿™å°±æ­»å¾ªç¯äº†ã€‚</p>
<p>æœ‰ä¸¤ç§æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜</p>
<ul>
<li><strong>é•¿é“¾æœ«å°¾æ‹¼æ¥ä¸€ä¸ªéšæœºå­—ç¬¦ä¸²ã€‚</strong></li>
</ul>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-string">"http:xxx.com/resource?key=value&amp;rand"</span>+UUID.<span class="hljs-built_in">random</span>().toString
</code></pre>
<p>è¿™æ ·å°±èƒ½ä¿è¯æˆ‘ä»¬è¿‡æœŸåï¼Œå†æ¬¡ç”ŸæˆçŸ­é“¾çš„æ—¶å€™ä¼šç›´æ¥åˆ›å»ºæ–°çš„ï¼Œè€Œä¸ä¼šæŸ¥è¯¢æ•°æ®åº“ï¼Œæ‰€ä»¥å°±èƒ½åˆ›å»ºæ–°çš„çŸ­é“¾ã€‚</p>
<ul>
<li><strong>çŸ­é“¾ç»­æœŸ</strong></li>
</ul>
<p>å†æ¬¡åˆ›å»ºæ—¶ï¼Œå‘ç°é•¿é“¾å¯¹åº”çš„çŸ­é“¾å·²å­˜åœ¨ï¼ŒæŠ›å‡ºæŒ‡å®šå¼‚å¸¸ï¼Œå¯¹åº”ä¸šåŠ¡ç«¯è°ƒç”¨çŸ­é“¾ç”Ÿæˆæ¥å£æ—¶æ•è·è¿™ä¸ªå¼‚å¸¸ï¼Œåœ¨ <code>catch</code> ä»£ç å—ä¸­ç»™çŸ­é“¾ç»­æœŸã€‚ä¿®æ”¹ç”Ÿæˆé€»è¾‘</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * ç”ŸæˆçŸ­é“¾
 */</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">generateShortUrl</span><span class="hljs-params">(ShortUrlGenerateRequest request)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">md5</span> <span class="hljs-operator">=</span> EncryptUtil.md5(request.getLongUrl());
    <span class="hljs-comment">//å…ˆæŸ¥è¯¢é•¿é“¾æ˜¯å¦å·²å­˜åœ¨ï¼Œå­˜åœ¨ç›´æ¥è¿”å›æ•°æ®åº“ä¸­çš„çŸ­é“¾</span>
    <span class="hljs-type">ShortUrlRecord</span> <span class="hljs-variable">exist</span> <span class="hljs-operator">=</span> shortUrlRecordMapper.selectOne(Wrappers.&lt;ShortUrlRecord&gt;lambdaQuery().eq(ShortUrlRecord::getLongUrlMd5, md5));
    <span class="hljs-keyword">if</span> (exist != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">if</span>(exist.getExpireTime().isBefore(LocalDateTime.now())) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShortUrlExpireException</span>(<span class="hljs-string">"çŸ­é“¾å·²è¿‡æœŸ"</span>);
        }
        <span class="hljs-keyword">return</span> exist.getShortUrl();
    }
    <span class="hljs-comment">//ç”ŸæˆçŸ­é“¾......</span>
</code></pre>
<p>ç»­æœŸæ¥å£</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * çŸ­é“¾ç»­æœŸ
 * */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">renewal</span><span class="hljs-params">(ShortUrlRenewalRequest request)</span>{
    <span class="hljs-type">String</span> <span class="hljs-variable">md5</span> <span class="hljs-operator">=</span> EncryptUtil.md5(request.getLongUrl());
    <span class="hljs-type">ShortUrlRecord</span> <span class="hljs-variable">exist</span> <span class="hljs-operator">=</span> shortUrlRecordMapper.selectOne(Wrappers.&lt;ShortUrlRecord&gt;lambdaQuery().eq(ShortUrlRecord::getLongUrlMd5, md5));
    exist.setExpireTime(LocalDateTime.now().plus(request.getDuration()));
    shortUrlRecordMapper.updateById(exist);
}
</code></pre>
<h2 data-id="heading-9">ç»“è¯­</h2>
<p>çŸ­é“¾çš„ç”Ÿæˆæ–¹æ¡ˆå®ç°æ˜¯æˆ‘å…¥èŒä¸Šå®¶å…¬å¸çš„é¢è¯•é¢˜ï¼Œå½“æ—¶æ²¡æœ‰åšè¿‡ï¼Œå½“æ—¶çš„é¢è¯•å®˜ä¹Ÿå°±æ˜¯æˆ‘çš„å‰é¢†å¯¼ä¹ŸæŒºå¥½çš„ï¼Œåªè®©æˆ‘æè¿°äº†ä¸€ä¸‹å¤§æ¦‚çš„æ€è·¯ï¼Œæˆ‘å›ç­”äº†æ˜ å°„å…³ç³»ã€åŠ å¯†ç®—æ³•ã€é‡å®šå‘ç­‰å‡ ä¸ªå…³é”®ç‚¹ï¼Œç®—æˆ‘è¿‡äº†</p>
<h3 data-id="heading-10">å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè®°å¾—ç‚¹èµåŠ å…³æ³¨ï¼ä½ çš„æ”¯æŒå°±æ˜¯æˆ‘ç»§ç»­åˆ›ä½œçš„åŠ¨åŠ›ï¼</h3></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…¨ç½‘æœ€ç®€å•çš„ OpenClaw éƒ¨ç½²æ•™ç¨‹ï¼Œ5 åˆ†é’Ÿæ‹¥æœ‰ä½ çš„ AI å‘˜å·¥]]></title>    <link>https://juejin.cn/post/7604741630449975330</link>    <guid>https://juejin.cn/post/7604741630449975330</guid>    <pubDate>2026-02-10T07:48:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604741630449975330" data-draft-id="7604701848151638016" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…¨ç½‘æœ€ç®€å•çš„ OpenClaw éƒ¨ç½²æ•™ç¨‹ï¼Œ5 åˆ†é’Ÿæ‹¥æœ‰ä½ çš„ AI å‘˜å·¥"/> <meta itemprop="keywords" content="AIGC,Claude,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-02-10T07:48:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜é±¼çš®"/> <meta itemprop="url" content="https://juejin.cn/user/2444938365386621"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…¨ç½‘æœ€ç®€å•çš„ OpenClaw éƒ¨ç½²æ•™ç¨‹ï¼Œ5 åˆ†é’Ÿæ‹¥æœ‰ä½ çš„ AI å‘˜å·¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2444938365386621/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜é±¼çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T07:48:26.000Z" title="Tue Feb 10 2026 07:48:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç¨‹åºå‘˜é±¼çš®ã€‚</p>
<p>æœ€è¿‘ OpenClawï¼ˆç”± ClawdBot æ”¹åï¼‰æ˜¯çœŸçš„ç«ï¼Œ<strong>å®ƒæ˜¯ä¸€ä¸ªèƒ½æ“ä½œç”µè„‘å¹²æ´»çš„ AI æ•°å­—å‘˜å·¥</strong>ã€‚èƒ½å¸®ä½ è¯»å†™æ–‡ä»¶ã€ç¼–å†™ç¨‹åºã€æ‰§è¡Œä»»åŠ¡ï¼Œ7Ã—24 å°æ—¶ä¸ä¼‘æ¯ã€‚è€Œä¸”ä½ éšæ—¶éšåœ°æå‡ºæ‰‹æœºå°±èƒ½æ“æ§å®ƒï¼Œè®©å®ƒå¸®ä½ å¹²æ´»ã€‚</p>
<p><img src="https://pic.yupi.icu/1/image-20260209164642002.png" alt="" loading="lazy"/></p>
<p>ç½‘å‹ä¹Ÿæ˜¯æŠŠ OpenClaw ç©å‡ºèŠ±æ¥äº†ï¼š</p>
<ul>
<li>æœ‰äººè®©å®ƒè‡ªåŠ¨æ¸…ç†ä¸Šä¸‡å°é‚®ä»¶ï¼Œæ”¶ä»¶ç®±ç›´æ¥å¹²æ‰ 45%ï¼Œçœä¸‹å‡ åä¸ªå°æ—¶çš„æ•´ç†æ—¶é—´</li>
<li>æœ‰äººç”¨å®ƒæŠ¢æ¼”å”±ä¼šé—¨ç¥¨å’Œæœºç¥¨ï¼Œè®¾å¥½æ¡ä»¶è®©å®ƒæ¯éš”å‡ ç§’åˆ·ä¸€æ¬¡ï¼Œåˆ·åˆ°å°±è‡ªåŠ¨ä¸‹å•</li>
<li>æœ‰äººèººåœ¨åºŠä¸Šï¼Œé€šè¿‡æ‰‹æœºé¥æ§å®ƒæŠŠæ•´ä¸ªç½‘ç«™é‡å†™äº†ä¸€é</li>
<li>è¿˜æœ‰äººè®©å®ƒåŒæ—¶è·‘å¤šæ¡è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼šä¸€è¾¹ç›¯ç›˜ã€ä¸€è¾¹å†™æ—¥æŠ¥ã€ä¸€è¾¹è‡ªåŠ¨å›ç¾¤æ¶ˆæ¯</li>
</ul>
<p><img src="https://pic.yupi.icu/1/1769787147424-a18c9870-08a0-4540-aa64-a5730fde09d7-20260209164709778.png" alt="" loading="lazy"/></p>
<p>æ›´ç¦»è°±çš„æ˜¯ï¼Œè‹¹æœçš„ Mac Miniï¼ˆå°±æ˜¯é‚£ä¸ªå·´æŒå¤§çš„å°ä¸»æœºï¼‰ç«Ÿç„¶å› ä¸º OpenClaw <strong>ç›´æ¥å–æ–­è´§äº†</strong>ï¼å› ä¸ºå¾ˆå¤šäººæƒ³ä¹°ä¸€å° 24 å°æ—¶ä¸å…³æœºçš„å°ç”µè„‘è·‘ OpenClawï¼Œè®©å®ƒå½“è‡ªå·±çš„ AI æ‰“å·¥äººã€‚</p>
<p><img src="https://pic.yupi.icu/1/1769787905203-6959e978-c81e-40dd-b86d-1043896faf20-20260209164722700.png" alt="" loading="lazy"/></p>
<p>è¿™ç©æ„åˆšå‡ºçš„æ—¶å€™ï¼Œå¥³æœ‹å‹å°±é—®æˆ‘ï¼šçœ‹èµ·æ¥å¥½å‰å®³å•Šï¼Œä½ èƒ½å¸®æˆ‘ä¹Ÿæ•´ä¸€ä¸ªå—ï¼Ÿ</p>
<p>æˆ‘æ’‡æ’‡å˜´ï¼šä¸æ•´ã€‚</p>
<p>å¥¹ç»™äº†æˆ‘ä¸€å·´æŒï¼šæ•´ä¸æ•´ï¼Ÿ</p>
<p>æˆ‘ä¸€è„¸å§”å±ˆï¼šåˆ«æ•´åˆ«æ•´ï¼Œå†ç­‰ç­‰ï¼Œä¸€å®šä¼šæœ‰æ›´ç®€å•çš„å®‰è£…æ–¹æ³•å‡ºæ¥çš„ã€‚</p>
<p><img src="https://pic.yupi.icu/1/image-20260209164815234.png" alt="" loading="lazy"/></p>
<p>æœç„¶ï¼Œæ²¡è®©æˆ‘ç­‰å¤ªä¹…ï¼Œæœ€å¿«çš„ã€å‚»ç“œå¼å®‰è£… OpenClaw çš„æ–¹æ³•æ¥äº†ï¼</p>
<h2 data-id="heading-0">æ€ä¹ˆå®‰è£… OpenClaw</h2>
<p>å¾ˆå¤šäººä»¥ä¸ºæƒ³ç© OpenClaw å°±å¾—ä¹°ä¸€å°å®ä½“ç”µè„‘ 24 å°æ—¶å¼€ç€ã€‚ä½†å…¶å®å®Œå…¨æ²¡å¿…è¦ï¼Œ<strong>ä¸€å°äº‘æœåŠ¡å™¨å°±èƒ½æå®š</strong>ï¼Œè€Œä¸”æ›´ç¨³å®šã€ä¸æ€•æ–­ç”µæ–­ç½‘ã€éšæ—¶éšåœ°ç”¨æ‰‹æœºå°±èƒ½æŒ‡æŒ¥å®ƒå¹²æ´»ã€‚</p>
<p>å°±åœ¨ 2 æœˆ 8 æ—¥ï¼Œç™¾åº¦æ™ºèƒ½äº‘æ¨å‡ºäº† <strong>OpenClaw æé€Ÿç®€æ˜“éƒ¨ç½²æ–¹æ¡ˆ</strong>ã€‚å“ªæ€•ä½ å®Œå…¨æ²¡æœ‰ç¼–ç¨‹åŸºç¡€ï¼Œåªéœ€è¦ç‚¹å‡ ä¸‹é¼ æ ‡ï¼Œå‡ åˆ†é’Ÿå†…å°±èƒ½æ‹¥æœ‰è‡ªå·±çš„ AI æ•°å­—å‘˜å·¥ã€‚è¿˜æ”¯æŒå„ç§ä¸»æµ AI å¤§æ¨¡å‹ä¸€é”®åˆ‡æ¢ï¼Œç”šè‡³èƒ½ç›´æ¥æŠŠ OpenClaw æ¥å…¥ QQã€é£ä¹¦ã€é’‰é’‰ã€ä¼ä¸šå¾®ä¿¡ï¼Œ<strong>åœ¨æ‰‹æœºä¸Šå‘æ¡æ¶ˆæ¯å°±èƒ½æŒ‡æŒ¥ AI å¹²æ´»</strong>ã€‚</p>
<p><img src="https://pic.yupi.icu/1/image-20260209170321021.png" alt="" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥æˆ‘å¸¦å¤§å®¶å®æ“ä¸€ä¸‹ï¼Œå»ºè®®æ”¶è—å¤‡ç”¨ â­ï¸ã€‚</p>
<h2 data-id="heading-1">æ‰‹æŠŠæ‰‹éƒ¨ç½² OpenClaw</h2>
<p><strong>1ï¼‰æä¸€å°äº‘æœåŠ¡å™¨</strong></p>
<p>ä½ å¯ä»¥æŠŠäº‘æœåŠ¡å™¨ç†è§£æˆ <strong>ä¸€å°æ”¾åœ¨æœºæˆ¿é‡Œçš„ç”µè„‘</strong>ï¼Œ24 å°æ—¶ä¸å…³æœºã€ä¸æ–­ç½‘ï¼Œä½ éšæ—¶éšåœ°éƒ½èƒ½è¿œç¨‹è¿ä¸Šå»ç”¨å®ƒã€‚</p>
<p>å…ˆåˆ†äº«ä¸€ç§æœ€ç®€å•è·å–æœåŠ¡å™¨çš„æ–¹æ³•ï¼Œæ‰“å¼€ç™¾åº¦æ™ºèƒ½äº‘ä¸º OpenClaw ç‰¹åˆ¶çš„ã€Œæç®€éƒ¨ç½²é¡µé¢ã€ï¼Œåªéœ€ <strong>0.01 å…ƒ</strong>ï¼Œå°±èƒ½æŠ¢è´­åˆ°ä¸€å° <strong>2æ ¸4G4M</strong> çš„è½»é‡åº”ç”¨æœåŠ¡å™¨ï¼Œå…è´¹ä½“éªŒ 1 ä¸ªæœˆã€‚</p>
<blockquote>
<p>æŒ‡è·¯ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.baidu.com%2Fproduct%2FBCC%2Fmoltbot.html" target="_blank" title="https://cloud.baidu.com/product/BCC/moltbot.html" ref="nofollow noopener noreferrer">cloud.baidu.com/product/BCCâ€¦</a></p>
</blockquote>
<p><img src="https://pic.yupi.icu/1/image-20260209143722677.png" alt="" loading="lazy"/></p>
<p>è¿™ä¸ªæ´»åŠ¨æ˜¯æ¯å¤©é™é‡çš„ï¼Œæ–°è€ç”¨æˆ·éƒ½èƒ½å‚ä¸ï¼Œæ²¡æƒ³åˆ°æˆ‘è¿æ°”ä¸é”™ï¼Œç¾Šæ¯›è¢«æˆ‘è–…åˆ°äº†å“ˆå“ˆï¼š</p>
<p><img src="https://pic.yupi.icu/1/image-20260209143544557.png" alt="" loading="lazy"/></p>
<p>ç¨ç­‰ç‰‡åˆ»ï¼ŒæœåŠ¡å™¨å°±åˆå§‹åŒ–å®Œæˆäº†ã€‚</p>
<p><img src="https://pic.yupi.icu/1/image-20260209143600373.png" alt="" loading="lazy"/></p>
<p>ç‚¹å‡»ã€Œä¸€é”®éƒ¨ç½²OpenClawã€æŒ‰é’®ï¼Œå°±èƒ½è·³è½¬åˆ°æœåŠ¡å™¨ç®¡ç†é¡µé¢ã€‚</p>
<p>å¦‚æœä½ æ²¡æœ‰æˆåŠŸå‚ä¸æ´»åŠ¨ï¼Œä¹Ÿä¸è¦ç°å¿ƒï¼Œå¯ä»¥è¿›å…¥è½»é‡åº”ç”¨æœåŠ¡å™¨æ§åˆ¶å°ï¼Œæ‰‹åŠ¨åˆ›å»ºä¸€å°æœåŠ¡å™¨ã€‚</p>
<blockquote>
<p>æŒ‡è·¯ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fconsole.bce.baidu.com%2Fls%2F%23%2Fls%2Finstance%2Fcreate" target="_blank" title="https://console.bce.baidu.com/ls/#/ls/instance/create" ref="nofollow noopener noreferrer">console.bce.baidu.com/ls/#/ls/insâ€¦</a></p>
</blockquote>
<p>æ³¨æ„ï¼Œé•œåƒä¸€å®šè¦é€‰æ‹© <strong>OpenClaw</strong> åº”ç”¨é•œåƒï¼Œå¥—é¤é€‰æ‹© <strong>2 æ ¸ 4GB</strong> å°±å¦¥å¦¥å¤Ÿç”¨äº†ã€‚</p>
<p><img src="https://pic.yupi.icu/1/image-20260209144440798.png" alt="" loading="lazy"/></p>
<p>ç»“ç®—ä¹‹åä¼šè‡ªåŠ¨åˆ›å»ºæœåŠ¡å™¨ï¼Œç„¶åè·Ÿå‰é¢ä¸€æ ·ï¼Œèƒ½å¤Ÿè¿›å…¥åˆ°æœåŠ¡å™¨ç®¡ç†é¡µé¢ã€‚</p>
<p>åšåˆ°è¿™ä¸€æ­¥ï¼Œç›¸å½“äºä½ å·²ç»è·å¾—äº†ä¸€ä½ â€œå³å°†å…¥èŒâ€ çš„ AI å‘˜å·¥ã€‚</p>
<p><strong>2ï¼‰ä¸€é”®å¼€é€šç›¸å…³æœåŠ¡</strong></p>
<p>åœ¨æœåŠ¡å™¨ç®¡ç†é¡µé¢ä¸­ï¼Œç‚¹å‡» <strong>åº”ç”¨ç®¡ç†</strong> Tabã€‚</p>
<p>é¡µé¢ä¼šæç¤ºä½ éœ€è¦å¼€é€šåƒå¸†å¤§æ¨¡å‹ã€äº‘åŠ©æ‰‹ç­‰å‡ ä¸ªæœåŠ¡ã€‚ä¸ç”¨ä¸€ä¸ªä¸ªå»æ‰¾ï¼Œç›´æ¥ç‚¹ <strong>ä¸€é”®å¼€é€š</strong>ï¼ŒåŒæ„åè®®å°±æå®šäº†ã€‚</p>
<p><img src="https://pic.yupi.icu/1/image-20260209144927875.png" alt="" loading="lazy"/></p>
<p><strong>3ï¼‰æ”¾é€šé˜²ç«å¢™ç«¯å£</strong></p>
<p>å¦‚æœä½ æƒ³è¦è®¿é—®å·²ç»éƒ¨ç½²çš„ OpenClaw ç½‘é¡µæ§åˆ¶å°ï¼Œéœ€è¦æ”¾é€šæœåŠ¡å™¨é˜²ç«å¢™çš„ 18789 ç«¯å£ã€‚</p>
<p>ç‚¹å‡» <strong>ä¸€é”®æ”¾è¡Œ</strong> æŒ‰é’®å°±å¥½ï¼š</p>
<p><img src="https://pic.yupi.icu/1/image-20260209145239379.png" alt="" loading="lazy"/></p>
<p><strong>4ï¼‰é€‰æ‹© AI æ¨¡å‹</strong></p>
<p>æ¥ä¸‹æ¥ï¼Œä¸ºä½ çš„ AI å‘˜å·¥æä¾›ä¸€ä¸ªèªæ˜çš„å¤§è„‘å§~</p>
<p>å¯ä»¥ç›´æ¥åœ¨é¡µé¢ä¸‹æ‹‰é€‰æ‹©ä½ æƒ³è¦çš„æ¨¡å‹ï¼Œå›½äº§çš„ä¸»æµå¤§æ¨¡å‹åŸºæœ¬éƒ½æ”¯æŒï¼ˆæ¯”å¦‚ DeepSeekï¼‰ï¼Œé€‰å®Œç‚¹å‡» <strong>åº”ç”¨</strong> å°±è¡Œã€‚</p>
<p><img src="https://pic.yupi.icu/1/image-20260209145623840.png" alt="" loading="lazy"/></p>
<p>ç³»ç»Ÿä¼šè‡ªåŠ¨å¸®ä½ åˆ›å»ºè°ƒç”¨å¤§æ¨¡å‹çš„ API å¯†é’¥ï¼Œå¹¶ä¸”æŠŠé…ç½®å…¨éƒ¨æå®šã€‚</p>
<p><img src="https://pic.yupi.icu/1/image-20260209145857028.png" alt="" loading="lazy"/></p>
<p>ç­‰æ‰§è¡ŒæˆåŠŸï¼Œä½ çš„ OpenClaw å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚</p>
<p>åšåˆ°è¿™é‡Œï¼Œæ­å–œï¼Œä½ çš„ AI æ•°å­—å‘˜å·¥å·²ç»æ­£å¼å…¥èŒï¼</p>
<p>å‰ååŠ èµ·æ¥ä¹Ÿå°±å‡ åˆ†é’Ÿï¼Œè€Œä¸”æ•´ä¸ªè¿‡ç¨‹éå¸¸å‚»ç“œå¼ã€‚å¹³å°çœŸçš„æ˜¯å¾ˆç…§é¡¾å°ç™½äº†ï¼Œç”Ÿæ€•å¤šæ“ä½œä¸€æ­¥å°±æŠŠç”¨æˆ·åŠé€€æ‰ã€‚</p>
<p><strong>5ï¼‰è·Ÿä½ çš„ AI å‘˜å·¥èŠèŠå¤©</strong></p>
<p>ç‚¹å‡»é¡µé¢ä¸‹æ–¹çš„ <strong>è·å–ç½‘ç«™åœ°å€</strong>ï¼š</p>
<p><img src="https://pic.yupi.icu/1/image-20260209150158108.png" alt="" loading="lazy"/></p>
<p>ç„¶åæ‰“å¼€é“¾æ¥è¿›å…¥ OpenClaw ç½‘é¡µç«¯ï¼š</p>
<p><img src="https://pic.yupi.icu/1/image-20260209150316824.png" alt="" loading="lazy"/></p>
<p>ç°åœ¨ä½ å°±å¯ä»¥ç›´æ¥åœ¨ç½‘é¡µä¸Šè·Ÿ OpenClaw å¯¹è¯äº†ï¼Œæ¯”å¦‚å…ˆç»™ä»–å–ä¸ªåå­—å§ï¼Œæˆ‘è¿™é‡Œå«ä»–ä¸ºã€Œé±¼çš®çš„å¤©è‹Ÿã€ï¼š</p>
<p><img src="https://pic.yupi.icu/1/image-20260209150631021.png" alt="" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒAI è‡ªåŠ¨æ›´æ–°äº†è‡ªå·±çš„èº«ä»½ï¼Œå¹¶ä¸”ä¼šä¸€ç›´ä¿ç•™è¿™æ®µè®°å¿†ã€‚ä¹‹åï¼Œä½ å¯ä»¥é€šè¿‡ä¸æ–­åœ°å¯¹è¯æ¥è®­ç»ƒ AIï¼Œè®©ä»–æˆä¸ºä½ æœ€å¾—åŠ›çš„åŠ©æ‰‹ã€‚</p>
<p>ä¸è¿‡è¯è¯´å›æ¥ï¼Œæ€»ä¸èƒ½æ¯æ¬¡æƒ³æ‰¾ AI å¸®å¿™éƒ½è·‘å»å¼€ç”µè„‘ã€æ‰“å¼€æµè§ˆå™¨è®¿é—®ç½‘é¡µå§ï¼Ÿé‚£ä¹Ÿå¤ªéº»çƒ¦äº†ã€‚</p>
<p>æ€ä¹ˆèƒ½éšæ—¶è”ç³»åˆ°æˆ‘çš„ AI å‘˜å·¥å‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆå½“ç„¶æ˜¯ï¼š<strong>é€šè¿‡æ‰‹æœºç»™ AI å‘˜å·¥å‘æ¶ˆæ¯</strong>ã€‚</p>
<p>å‡ ä¹æ‰€æœ‰èŠå¤©è½¯ä»¶éƒ½èƒ½æ¥å— OpenClaw è¿™ä½ AI å‘˜å·¥ï¼Œæ¯”å¦‚ QQã€ä¼ä¸šå¾®ä¿¡ã€é’‰é’‰ã€é£ä¹¦ç­‰ç­‰ã€‚ä¸‹é¢æˆ‘å°±ä»¥æ›´é€‚åˆä¸ªäººç”¨æˆ·çš„ QQ ä¸ºä¾‹ï¼Œç»™å¤§å®¶æ¼”ç¤ºå¦‚ä½•åœ¨æ‰‹æœºä¸Šé¥æ§ AI å¹²æ´»ã€‚</p>
<h2 data-id="heading-2">åœ¨æ‰‹æœº QQ ä¸Šé¥æ§ AI å¹²æ´»</h2>
<p>å¦‚æœä½ ä½¿ç”¨ç™¾åº¦æ™ºèƒ½äº‘å®‰è£… OpenClawï¼Œé‚£ä¹ˆæ¥å…¥ QQ å°±éå¸¸ç®€å•äº†ï¼Œå‡ æ­¥å°±æå®šã€‚</p>
<p><strong>1ï¼‰åˆ›å»º QQ æœºå™¨äºº</strong></p>
<p>æ‰“å¼€ <a href="https://link.juejin.cn?target=https%3A%2F%2Fq.qq.com" target="_blank" title="https://q.qq.com" ref="nofollow noopener noreferrer">QQ å¼€æ”¾å¹³å°</a>ï¼Œæ³¨å†Œå¹¶ç™»å½•ï¼š</p>
<blockquote>
<p>æŒ‡è·¯ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fq.qq.com" target="_blank" title="https://q.qq.com" ref="nofollow noopener noreferrer">q.qq.com</a></p>
</blockquote>
<p><img src="https://pic.yupi.icu/1/image-20260209151938145.png" alt="" loading="lazy"/></p>
<p>ç™»å½•æˆåŠŸåï¼Œç‚¹å‡» â€œæœºå™¨äººâ€ Tabï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æœºå™¨äººï¼š</p>
<p><img src="https://pic.yupi.icu/1/image-20260209152043823.png" alt="" loading="lazy"/></p>
<p>ç»™ä½ çš„æœºå™¨äººè®¾ç½®ä¸€ä¸ªçˆ±ç§°å’Œå¯çˆ±çš„å¤´åƒå§ï¼Œä¾¿äºä¹‹ååœ¨ QQ ä¸­æ‰¾åˆ°ä»–ï¼š</p>
<p><img src="https://pic.yupi.icu/1/image-20260209152207016.png" alt="" loading="lazy"/></p>
<p><strong>2ï¼‰è®¾ç½®æœºå™¨äºº</strong></p>
<p>åˆ›å»ºå®Œæˆåï¼Œè¿›å…¥æœºå™¨äººçš„å¼€å‘ç®¡ç†é¡µé¢ï¼š</p>
<p><img src="https://pic.yupi.icu/1/image-20260209152253262.png" alt="" loading="lazy"/></p>
<p>æ‰¾åˆ° <strong>AppID</strong> å’Œ <strong>AppSecret</strong>ï¼Œå¤åˆ¶ä¿å­˜å¥½ï¼Œç­‰ä¼šè¦ç”¨ã€‚</p>
<p><img src="https://pic.yupi.icu/1/image-20260209152347726.png" alt="" loading="lazy"/></p>
<p>è¿˜è¦æŠŠä½ äº‘æœåŠ¡å™¨çš„ <strong>å…¬ç½‘ IP</strong> æ·»åŠ åˆ° IP ç™½åå•é‡Œï¼Œç„¶åä¿å­˜ã€‚</p>
<p><img src="https://pic.yupi.icu/1/image-20260209152537553.png" alt="" loading="lazy"/></p>
<p>äº‘æœåŠ¡å™¨çš„å…¬ç½‘ IP åœ¨ç™¾åº¦æ™ºèƒ½äº‘çš„æœåŠ¡å™¨ç®¡ç†é¡µé¢å°±èƒ½çœ‹åˆ°ï¼Œæ³¨æ„ä¸è¦æš´éœ²ç»™åˆ«äººå“¦ï¼</p>
<p><img src="https://pic.yupi.icu/1/image-20260209152435791.png" alt="" loading="lazy"/></p>
<p><strong>3ï¼‰å¡«å†™æ¶ˆæ¯å¹³å°é…ç½®</strong></p>
<p>åœ¨ç™¾åº¦æ™ºèƒ½äº‘çš„æœåŠ¡å™¨ç®¡ç†é¡µé¢ï¼Œæ‰¾åˆ° <strong>æ¶ˆæ¯å¹³å°é…ç½®</strong>ï¼Œä¸‹æ‹‰é€‰æ‹© <strong>QQ</strong>ï¼ŒæŠŠåˆšæ‰çš„ AppID å’Œ AppSecret å¡«è¿›å»ï¼Œç‚¹ <strong>åº”ç”¨</strong>ï¼Œç­‰å®ƒæ‰§è¡Œå®Œå°±å¥½äº†ã€‚</p>
<p><img src="https://pic.yupi.icu/1/image-20260209152729389.png" alt="" loading="lazy"/></p>
<p><strong>4ï¼‰æ·»åŠ è®¿é—®æœºå™¨äººçš„æƒé™</strong></p>
<p>å›åˆ° QQ å¼€æ”¾å¹³å°ï¼Œåœ¨æ²™ç®±é…ç½®é‡Œç»™ä½ çš„ QQ è´¦å·ï¼ˆæˆ–è€… QQ ç¾¤ï¼‰æ·»åŠ è®¿é—®æœºå™¨äººçš„æƒé™ï¼š</p>
<p><img src="https://pic.yupi.icu/1/image-20260209152928094.png" alt="" loading="lazy"/></p>
<p>ç„¶åç”¨ QQ æ‰«ç æ·»åŠ æœºå™¨äººå°±è¡Œäº†ï¼š</p>
<p><img src="https://pic.yupi.icu/1/image-20260209153102382.png" alt="" loading="lazy"/></p>
<p>ç°åœ¨ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨ QQ ä¸Šè·Ÿä½ çš„ AI æ•°å­—å‘˜å·¥èŠå¤©äº†ï¼š</p>
<p><img src="https://pic.yupi.icu/1/image-20260209153537993.png" alt="" loading="lazy"/></p>
<p>ä¹‹åï¼Œä½ åªéœ€è¦èººåœ¨åºŠä¸Šæ‰“å¼€ QQï¼Œå°±èƒ½æŒ‡æŒ¥è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„ AI å¹²æ´»ï¼Œå·´é€‚å¾—æ¿~</p>
<p>é™¤äº† QQï¼ŒOpenClaw è¿˜æ”¯æŒæ¥å…¥é£ä¹¦ã€é’‰é’‰ã€ä¼ä¸šå¾®ä¿¡ï¼Œé…ç½®æ–¹å¼éƒ½å·®ä¸å¤šï¼Œæœ‰éœ€è¦çš„åŒå­¦å¯ä»¥çœ‹å®˜æ–¹æ•™ç¨‹ï¼š</p>
<ul>
<li>OpenClaw æ¥å…¥é’‰é’‰ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.baidu.com%2Fdoc%2FLS%2Fs%2Fwml9dlyfu" target="_blank" title="https://cloud.baidu.com/doc/LS/s/wml9dlyfu" ref="nofollow noopener noreferrer">cloud.baidu.com/doc/LS/s/wmâ€¦</a></li>
<li>OpenClaw æ¥å…¥é£ä¹¦ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.baidu.com%2Fdoc%2FLS%2Fs%2F2ml9dnf3j" target="_blank" title="https://cloud.baidu.com/doc/LS/s/2ml9dnf3j" ref="nofollow noopener noreferrer">cloud.baidu.com/doc/LS/s/2mâ€¦</a></li>
<li>OpenClaw æ¥å…¥ä¼ä¸šå¾®ä¿¡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.baidu.com%2Fdoc%2FLS%2Fs%2FNml9dk84r" target="_blank" title="https://cloud.baidu.com/doc/LS/s/Nml9dk84r" ref="nofollow noopener noreferrer">cloud.baidu.com/doc/LS/s/Nmâ€¦</a></li>
</ul>
<p>ä¸è¿‡åˆ«å¯¹ä»–æœ‰å¤ªé«˜çš„è¦æ±‚ï¼Œä½ è¦æ˜¯ç°åœ¨å°±ç»™ä»–å¤æ‚çš„ä»»åŠ¡ï¼Œå¯èƒ½å®ƒä¼š â€œé˜¿å·´é˜¿å·´â€ï¼Œèµ›åšæ™ºéšœã€‚</p>
<p>æ¯”å¦‚æˆ‘é—®ä»–ä¸€ä¸ªéå¸¸ç®€å•çš„é—®é¢˜ï¼Œä»–ç«Ÿç„¶å…ˆç»™æˆ‘æŠ¥äº†ä¸ªé”™ï¼Œç„¶åè¯´è‡ªå·±æ²¡æœ‰è”ç½‘æœç´¢åŠŸèƒ½ï¼Ÿï¼Ÿï¼Ÿ</p>
<p><img src="https://pic.yupi.icu/1/30d2456023e115b5aa37b5d0c34274fe.jpg" alt="" loading="lazy"/></p>
<p>è¦æƒ³è®© AI å˜å¾—æ›´å¼ºï¼Œå°±éœ€è¦ç”¨åˆ° Skills äº†ã€‚</p>
<h2 data-id="heading-3">ç»™ä½ çš„ AI å‘˜å·¥è£…æŠ€èƒ½åŒ…</h2>
<p>Skills çš„å…¨ç§°æ˜¯ Agent Skillsï¼Œä¹Ÿåœ¨ AI åœˆå„¿ç«å¾—ä¸€å¡Œç³Šæ¶‚ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œå®ƒå°±æ˜¯ç»™ AI è£…å¤‡çš„æŠ€èƒ½åŒ…ï¼Œé‡Œé¢æœ‰ç²¾å¿ƒè®¾è®¡çš„æç¤ºè¯ã€ä»£ç è„šæœ¬ã€è¿˜æœ‰å„ç§èµ„æºæ–‡ä»¶ï¼Œè®© AI èƒ½åœ¨ç‰¹å®šä»»åŠ¡ä¸Šè¡¨ç°å¾—æ›´ä¸“ä¸šã€‚æ¯”å¦‚ä½ ç»™ AI è£…ä¸ª PPT åˆ¶ä½œ Skillsï¼Œä»–å°±ä¼šåš PPT äº†ã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡ç»™ OpenClaw å®‰è£…æŠ€èƒ½åŒ…ï¼Œæ¥å¢å¼ºä»–çš„èƒ½åŠ›ã€‚</p>
<p><strong>æ€ä¹ˆè·å–å’Œå®‰è£…æŠ€èƒ½å‘¢ï¼Ÿ</strong></p>
<p>å¦‚æœä½ ä½¿ç”¨ç™¾åº¦æ™ºèƒ½äº‘å®‰è£… OpenClawï¼Œå®‰è£…æŠ€èƒ½å°±éå¸¸ç®€å•äº†ã€‚</p>
<p>ç™¾åº¦åƒå¸†æœ€è¿‘æŠŠè‡ªå®¶çš„ AI èƒ½åŠ›æ‰“åŒ…æˆäº† Skillï¼Œå¹¶ä¸”ä¸Šæ¶åˆ°äº† OpenClaw çš„æŠ€èƒ½å•†åº— <a href="https://link.juejin.cn?target=https%3A%2F%2Fclawhub.ai%2Fskills" target="_blank" title="https://clawhub.ai/skills" ref="nofollow noopener noreferrer">ClawHub</a>ï¼Œç›®å‰ä¸€å…±æœ‰ 6 æ¬¾å®˜æ–¹ Skillã€‚åŒ…æ‹¬ç™¾åº¦æœç´¢ã€ç™¾åº¦ç™¾ç§‘ã€å­¦æœ¯æ£€ç´¢ã€AI ç»˜æœ¬ç”Ÿæˆã€æ™ºèƒ½ PPT ç”Ÿæˆã€åƒå¸†æ·±åº¦ç ”ç©¶ Agentã€‚</p>
<p>ç›´æ¥è¿›å…¥åˆ°æœåŠ¡å™¨ç®¡ç†é¡µé¢çš„ Skills é…ç½®ï¼Œå°±èƒ½å‚»ç“œå¼æœç´¢å’Œå®‰è£…æŠ€èƒ½äº†ï¼š</p>
<p><img src="https://pic.yupi.icu/1/image-20260209154028274.png" alt="" loading="lazy"/></p>
<p>æ¯”å¦‚æˆ‘å®‰è£…äº†ç™¾åº¦æœç´¢å’Œç™¾åº¦ç™¾ç§‘ Skillsï¼Œè¿™ä¸¤å—éƒ½æ˜¯ç™¾åº¦çš„ç‰¹é•¿ï¼Œé€‚åˆç”¨æ¥æœç´¢å›½å†…çš„ä¿¡æ¯æºã€‚</p>
<p><img src="https://pic.yupi.icu/1/image-20260209154152546.png" alt="" loading="lazy"/></p>
<p>æ·»åŠ  Skills å®Œæˆåï¼Œè¿›å…¥åˆ° OpenClaw ç®¡ç†é¡µé¢çš„ Skills é…ç½®ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æŠ€èƒ½å®‰è£…æˆåŠŸï¼š</p>
<p><img src="https://pic.yupi.icu/1/image-20260209160408078.png" alt="" loading="lazy"/></p>
<p>ç„¶åæˆ‘è®©ã€Œé±¼çš®çš„å¤©è‹Ÿã€å¸®æˆ‘æœç´¢ â€œç¨‹åºå‘˜é±¼çš®â€ï¼š</p>
<p><img src="https://pic.yupi.icu/1/8a535406f294c23379ee79b0a703b645.jpg" alt="" loading="lazy"/></p>
<p>è¿™æ¬¡çš„ç»“æœé è°±å¤šäº†ï¼Œåœ¨ OpenClaw ç½‘é¡µå¯¹è¯æ¡†ä¸­ï¼Œå¯ä»¥çœ‹åˆ° AI è°ƒç”¨äº†ç™¾åº¦æœç´¢æŠ€èƒ½ï¼š</p>
<p><img src="https://pic.yupi.icu/1/image-20260209160023370.png" alt="" loading="lazy"/></p>
<p>é™¤äº†ä¸Šè¿°å®‰è£…æŠ€èƒ½çš„æ–¹å¼å¤–ï¼Œä½ è¿˜å¯ä»¥ç™»å½•æœåŠ¡å™¨ï¼Œè¾“å…¥ä¸€è¡Œå‘½ä»¤æ¥æ‰‹åŠ¨å®‰è£…æŠ€èƒ½ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npx clawhub@latest install [skillåç§°]

</code></pre>
<p>ä¸è¿‡æˆ‘ä¼°è®¡éç¨‹åºå‘˜æœ‹å‹ä»¬æ˜¯ä¸çŸ¥é“æ€ä¹ˆæ“ä½œæœåŠ¡å™¨çš„ï¼Œå®Œå…¨æ²¡å…³ç³»ï¼Œæ¯•ç«Ÿç°åœ¨å·²ç»æ˜¯ AI æ—¶ä»£äº†ï¼Œå¹²å˜›è¿˜è‡ªå·±åŠ¨æ‰‹æ“ä½œæœåŠ¡å™¨ï¼Ÿç›´æ¥è®© AI è‡ªå·±è£…ä¸å°±å®Œäº†ï¼Ÿ</p>
<p>æˆ‘è·Ÿ OpenClaw è¯´äº†å¥ï¼š</p>
<blockquote>
<p>å¸®æˆ‘å®‰è£…ç¼–ç¨‹åŠ¨ç”»åˆ¶ä½œæŠ€èƒ½</p>
</blockquote>
<p><img src="https://pic.yupi.icu/1/image-20260209160913210.png" alt="" loading="lazy"/></p>
<p>å®ƒä¸€å¼€å§‹å¯èƒ½ä¼šæ‹’ç»æˆ–è€…ä¸å¤ªç†è§£ï¼Œæ²¡å…³ç³»ï¼Œç¨å¾®å¼•å¯¼ä¸€ä¸‹å°±è¡Œï¼š</p>
<blockquote>
<p>æˆ‘å°±è¦ä½ æ¥æ“ä½œæœåŠ¡å™¨å¸®æˆ‘å®‰è£…</p>
</blockquote>
<p><img src="https://pic.yupi.icu/1/image-20260209161210072.png" alt="" loading="lazy"/></p>
<p>è¿™æ¬¡ï¼Œä»–æˆåŠŸå®Œæˆäº†ä»»åŠ¡ã€‚è®© AI è‡ªå·±ç»™è‡ªå·±è£…æŠ€èƒ½ï¼Œæ‰æ˜¯ AI æ—¶ä»£è¯¥æœ‰çš„æ“ä½œæ–¹å¼ã€‚</p>
<p>å¦‚æœä½ æƒ³æ¢ç´¢æ›´å¤šæŠ€èƒ½ï¼Œå¯ä»¥å» <a href="https://link.juejin.cn?target=https%3A%2F%2Fclawhub.ai%2Fskills" target="_blank" title="https://clawhub.ai/skills" ref="nofollow noopener noreferrer">ClawHub</a> é€›ä¸€é€›ã€‚</p>
<blockquote>
<p>æŒ‡è·¯ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fclawhub.ai" target="_blank" title="https://clawhub.ai" ref="nofollow noopener noreferrer">clawhub.ai</a></p>
</blockquote>
<p><img src="https://pic.yupi.icu/1/image-20260209173015903.png" alt="" loading="lazy"/></p>
<p>ä¸è¿‡é±¼çš®å»ºè®®å¤§å®¶è°¨æ…å®‰è£… Skillsï¼Œéå¿…è¦ä¸å®‰è£…ã€éå®˜æ–¹ä¸å®‰è£…ï¼Œæ¯•ç«Ÿ Skills æ˜¯äººä¸ºåˆ¶ä½œçš„ï¼Œå¯èƒ½ä¼šå­˜åœ¨å®‰å…¨éšæ‚£ã€‚</p>
<p><img src="https://pic.yupi.icu/1/c1eca273aeeaf86ff3d2a0e7daa55459.png" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">æœ‰äº† OpenClaw èƒ½å¹²å•¥</h2>
<p>æˆ‘ä¼°è®¡å¾ˆå¤šåŒå­¦æ­å»ºå®Œ OpenClaw å¯èƒ½å°±æ‰”é‚£å„¿äº†ï¼Œæˆ–è€…ä¸çŸ¥é“ OpenClaw åˆ°åº•èƒ½åšäº›ä»€ä¹ˆã€‚æ‰€ä»¥æˆ‘è¿™é‡Œåˆ†äº«å‡ ä¸ªæ¯”è¾ƒå®ç”¨çš„ç©æ³•ï¼Œå¤§å®¶å¯ä»¥ç›´æ¥æŠ„ä½œä¸šã€‚</p>
<h3 data-id="heading-5">1ã€AI å¸®ä½ è¿½çƒ­ç‚¹</h3>
<p>æˆ‘åœ¨ QQ ä¸Šè·Ÿ OpenClaw è¯´äº†ä¸€å¥ï¼šå¸®æˆ‘è·å– AI ç›¸å…³çš„èµ„è®¯çƒ­ç‚¹ã€‚</p>
<p>è¿‡äº†ä¸€ä¼šå„¿ï¼Œå®ƒå›äº†æˆ‘ä¸€ä»½æ•´æ•´é½é½çš„çƒ­ç‚¹æ‘˜è¦ï¼š</p>
<p><img src="https://pic.yupi.icu/1/ce2501ffae6c213e1b07f570ac32464b.jpg" alt="" loading="lazy"/></p>
<p>ä»¥å‰æˆ‘å¯èƒ½è¦åˆ°ç½‘ä¸Šåˆ·åˆ·æ–°é—»ï¼Œç°åœ¨å‘æ¡æ¶ˆæ¯å°±æå®šäº†~</p>
<p>å¦‚æœéœ€è¦çš„è¯ï¼Œä½ è¿˜å¯ä»¥è®©å®ƒè·‘ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œæ¯”å¦‚è®¾å®š â€œæ¯å¤©æ—©ä¸Š 8 ç‚¹å¸®æˆ‘æœä¸€ä¸‹ OpenClaw ç¤¾åŒºæœ‰æ²¡æœ‰æ–°çš„ç©æ³•â€ï¼Œå®ƒå°±é»˜é»˜å¸®ä½ ç›¯ç€ï¼Œæœ‰æ¶ˆæ¯ç¬¬ä¸€æ—¶é—´æ¨ç»™ä½ ã€‚</p>
<h3 data-id="heading-6">2ã€çµæ„Ÿè®°å½•å™¨</h3>
<p>æœ‰æ—¶èµ°åœ¨è·¯ä¸Šï¼Œæˆ‘å¯èƒ½ä¼šçªç„¶æœ‰ä¸€äº›å¥½çš„æƒ³æ³•ã€æˆ–è€…çªç„¶æƒ³èµ·äº†æŸä»¶äº‹æƒ…ï¼Œä¸ºäº†é˜²æ­¢å¿˜è®°ï¼Œå°±ä¼šæ‰“å¼€æ‰‹æœºå¤‡å¿˜å½•è®°ä¸‹æ¥ã€‚</p>
<p>ä¹…è€Œä¹…ä¹‹ï¼Œè®°çš„å†…å®¹è¶Šæ¥è¶Šå¤šï¼Œå¯¼è‡´å¾ˆå¤šè®°ä¸‹æ¥çš„å†…å®¹ä¹Ÿè¢«å¿½ç•¥äº†ã€‚</p>
<p>ç°åœ¨ï¼Œæˆ‘å¯ä»¥ç›´æ¥æŠŠ OpenClaw å½“åšæ˜¯æˆ‘çš„è¶…çº§å¤‡å¿˜å½•ï¼Œå…ˆç»™ AI è®¾å®šä¸€ä¸ªè§’è‰²ï¼Œæ¯”å¦‚å‘Šè¯‰å®ƒ â€œä½ æ˜¯ä¸€ä¸ªçµæ„Ÿè®°å½•å™¨â€ï¼š</p>
<p><img src="https://pic.yupi.icu/1/image-20260209180148160.png" alt="" loading="lazy"/></p>
<p>ä¹‹åæœ‰ä»»ä½•æ€•å¿˜è®°çš„æƒ³æ³•æˆ–äº‹æƒ…ï¼Œç›´æ¥æå‡ºæ‰‹æœºåœ¨ QQ ä¸Šè·Ÿ AI è¯´ä¸€å¥å°±è¡Œäº†ã€‚</p>
<p>OpenClaw è·Ÿæ™®é€šå¤‡å¿˜å½•ä¸ä¸€æ ·ï¼Œå®ƒä¸åªæ˜¯å¸®ä½ è®°ï¼Œè¿˜ä¼šå¸®ä½ ä¿®æ­£é”™åˆ«å­—å’Œåˆ†ç±»æ•´ç†ï¼Œè€Œä¸”æ°¸è¿œä¸ä¼šå¿˜äº‹ï¼</p>
<p><img src="https://pic.yupi.icu/1/image-20260209180446618.png" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">3ã€éšèº«æºå¸¦çš„è¶…çº§ç¨‹åºå‘˜</h3>
<p>è¿™åº”è¯¥æ˜¯æœ€è®©ç¨‹åºå‘˜æœ‹å‹ä»¬å…´å¥‹çš„åœºæ™¯äº†ã€‚</p>
<p>å› ä¸º OpenClaw æ˜¯è·‘åœ¨æœåŠ¡å™¨ä¸Šçš„ï¼Œå®ƒèƒ½ç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šå†™ä»£ç ã€è¿è¡Œç¨‹åºã€éƒ¨ç½²æœåŠ¡ï¼Œåšå®Œä½ å°±èƒ½ç›´æ¥ç”¨ã€‚</p>
<p>æ¯”å¦‚æˆ‘åœ¨ååœ°é“çš„æ—¶å€™ï¼Œç›´æ¥æå‡ºæ‰‹æœºï¼Œåœ¨ QQ ä¸Šè·Ÿ OpenClaw è¯´ä¸€å¥ï¼š</p>
<blockquote>
<p>å¸®æˆ‘å†™ä¸€ä¸ªç½‘é¡µå°å·¥å…·ï¼Œèƒ½ä¸Šä¼ å›¾ç‰‡åæ‰¹é‡å‹ç¼©ï¼Œæ”¯æŒè°ƒæ•´å‹ç¼©è´¨é‡ï¼Œå†™å®Œç›´æ¥éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šè®©æˆ‘èƒ½è®¿é—®ã€‚</p>
</blockquote>
<p>è¿‡äº†å‡ åˆ†é’Ÿï¼ŒAI å›å¤æˆ‘ï¼šå·¥å…·å†™å¥½äº†ï¼Œå·²ç»éƒ¨ç½²ä¸Šçº¿ï¼Œç›´æ¥è®¿é—® XX åœ°å€å°±èƒ½ç”¨ã€‚</p>
<p><img src="https://pic.yupi.icu/1/image-20260209183510372.png" alt="" loading="lazy"/></p>
<p>æ²¡é”™ï¼Œå°±å‘äº†æ¡æ¶ˆæ¯ï¼Œä¸€ä¸ªèƒ½ç”¨çš„åœ¨çº¿å·¥å…·å°±å‡ºæ¥äº†ï¼Œè·Ÿå˜é­”æœ¯ä¼¼çš„ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼Œå¦‚æœæ— æ³•è®¿é—®ï¼Œå¯èƒ½æ˜¯å› ä¸ºæ²¡æœ‰ç»™æœåŠ¡å™¨çš„é˜²ç«å¢™å¼€æ”¾å¯¹åº”ç«¯å£ã€‚</p>
</blockquote>
<p><img src="https://pic.yupi.icu/1/image-20260209183750274.png" alt="" loading="lazy"/></p>
<p>ä¹‹åä½ æœ‰äº†ä»»ä½•çµæ„Ÿï¼Œç”šè‡³éƒ½ä¸éœ€è¦æå‡ºç”µè„‘ï¼Œå…¨ç¨‹é€šè¿‡æ‰‹æœºè·Ÿ AI å¯¹è¯ï¼Œå°±èƒ½åˆ›é€ å‡ºå¯è¿è¡Œçš„é¡¹ç›®ã€‚</p>
<p>è¿™ç§æ„Ÿè§‰ï¼Œæ€ä¹ˆè¯´å‘¢ï¼Œæœ‰ç‚¹é’¢é“ä¾ å†…å‘³å„¿äº†ã€‚</p>
<p><img src="https://pic.yupi.icu/1/image-20260209182902058.png" alt="" loading="lazy"/></p>
<h2 data-id="heading-8">æœ€å</h2>
<p>çœ‹åˆ°è¿™é‡Œï¼Œç›¸ä¿¡å¤§å®¶å·²ç»èƒ½æ„Ÿå—åˆ°ï¼Œ<strong>OpenClaw çš„ä¸Šæ‰‹é—¨æ§›å·²ç»è¢«ç ¸åˆ°åœ°æ¿ä¸Šäº†</strong>ã€‚</p>
<p>åªè¦èŠ±å‡ åˆ†é’Ÿï¼Œå°±èƒ½æ‹¥æœ‰ç§äººçš„ AI æ•°å­—å‘˜å·¥ï¼Œä¹‹åä½ åœ¨æ‰‹æœºä¸Šå‘æ¡ QQ æ¶ˆæ¯ï¼Œå°±èƒ½è®© AI å¸®ä½ æœä¿¡æ¯ã€ç®¡æ–‡ä»¶ã€å†™ä»£ç ã€åšè°ƒç ”ã€‚</p>
<p>ä¸ç®¡ä½ æ˜¯ç¨‹åºå‘˜ã€å­¦ç”Ÿã€è¿˜æ˜¯æ™®é€šä¸Šç­æ—ï¼Œæˆ‘éƒ½å»ºè®®ä½ å»è¯•è¯•ã€‚</p>
<p>æœ€åå†è´´ä¸€ä¸‹å®˜æ–¹çš„éƒ¨ç½²æ•™ç¨‹ï¼Œç‚¹å‡»é˜…è¯»åŸæ–‡å¯ä»¥ç›´æ¥è·³è½¬ã€‚</p>
<blockquote>
<p>æ“ä½œæŒ‡å—ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.baidu.com%2Fdoc%2FLS%2Fs%2F6ml9f3cvl" target="_blank" title="https://cloud.baidu.com/doc/LS/s/6ml9f3cvl" ref="nofollow noopener noreferrer">cloud.baidu.com/doc/LS/s/6mâ€¦</a></p>
</blockquote>
<p>ä¹Ÿæ¬¢è¿å¤§å®¶å¤šå¤šåˆ†äº«ä½ çš„ OpenClaw ç©æ³•ï¼Œè¯„è®ºåŒºè§~</p>
<h2 data-id="heading-9">æ›´å¤š</h2>
<p>ğŸ’» ç¼–ç¨‹å­¦ä¹ äº¤æµï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Fcode-nav" target="_blank" title="https://github.com/liyupi/code-nav" ref="nofollow noopener noreferrer">ç¼–ç¨‹å¯¼èˆª</a><br/>
ğŸ“ƒ ç®€å†å¿«é€Ÿåˆ¶ä½œï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Flaoyujianli" target="_blank" title="https://github.com/liyupi/laoyujianli" ref="nofollow noopener noreferrer">è€é±¼ç®€å†</a><br/>
âœï¸ é¢è¯•åˆ·é¢˜ç¥å™¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Fmianshiya" target="_blank" title="https://github.com/liyupi/mianshiya" ref="nofollow noopener noreferrer">é¢è¯•é¸­</a><br/>
ğŸ“– AI å­¦ä¹ æŒ‡å—ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Fai-guide" target="_blank" title="https://github.com/liyupi/ai-guide" ref="nofollow noopener noreferrer">é±¼çš® AI å¯¼èˆª</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3 + Element-Plus è‡ªå®šä¹‰è™šæ‹Ÿè¡¨æ ¼æ»šåŠ¨å®ç°æ–¹æ¡ˆã€é™„æºç ã€‘]]></title>    <link>https://juejin.cn/post/7604301929121169417</link>    <guid>https://juejin.cn/post/7604301929121169417</guid>    <pubDate>2026-02-09T09:01:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604301929121169417" data-draft-id="7604507125857484827" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3 + Element-Plus è‡ªå®šä¹‰è™šæ‹Ÿè¡¨æ ¼æ»šåŠ¨å®ç°æ–¹æ¡ˆã€é™„æºç ã€‘"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-09T09:01:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å¤§å«"/> <meta itemprop="url" content="https://juejin.cn/user/1961184474695213"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3 + Element-Plus è‡ªå®šä¹‰è™šæ‹Ÿè¡¨æ ¼æ»šåŠ¨å®ç°æ–¹æ¡ˆã€é™„æºç ã€‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1961184474695213/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å¤§å«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T09:01:41.000Z" title="Mon Feb 09 2026 09:01:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    78
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯<strong>å‰ç«¯æ¶æ„å¸ˆ</strong>ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€<strong>ç¨‹åºå‘˜å¤§å«</strong>ã€‘ï¼Œå…è´¹é¢†å–ç²¾å“å‰ç«¯èµ„æ–™ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e55392617f34a9094d731f5ae669a4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5aSn5Y2r:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771310177&amp;x-signature=M2G%2FWdl20GclNHaHvtyd6QXTYsw%3D" alt="demo.gif" loading="lazy"/></p>
<h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>æœ¬æ–‡å°†åŸºäº <strong>Vue3 + Element Plus</strong>ï¼Œå®ç°ä¸€ä¸ª<strong>å®Œå…¨è‡ªå®šä¹‰çš„è™šæ‹Ÿæ»šåŠ¨è¡¨æ ¼æ–¹æ¡ˆ</strong>ï¼Œæ”¯æŒä¸ç­‰é«˜è¡Œã€ç¼“å­˜é«˜åº¦ã€ç¼“å†²åŒºæ¸²æŸ“ï¼Œå¹¶ä¸”ä¸ <code>el-table</code> è§£è€¦ã€‚</p>
<blockquote>
<p>Element Plus è™½ç„¶æä¾›äº†è™šæ‹Ÿæ»šåŠ¨ï¼Œä½†ç›®å‰è¿˜æ˜¯<a href="https://link.juejin.cn?target=https%3A%2F%2Felement-plus.org%2Fzh-CN%2Fcomponent%2Ftable-v2" target="_blank" title="https://element-plus.org/zh-CN/component/table-v2" ref="nofollow noopener noreferrer">æµ‹è¯•(beta)é˜¶æ®µ</a>ï¼Œæ‰€ä»¥æš‚æ—¶å…ˆæ²¡ç”¨äº†ï¼Œå…¶å®å½“æ—¶å†™è¿™ä¸ªç»„ä»¶ä¸»è¦æ˜¯ä¸ºäº†ç»™Vue2 çš„ <code>Element UI</code> ä½¿ç”¨çš„ã€‚</p>
</blockquote>
<h2 data-id="heading-1">ä¸€ã€å¦‚ä½•ä½¿ç”¨</h2>
<p>åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œå¦‚æœä½ æ­£åœ¨ä½¿ç”¨ <strong>Element Plus çš„ el-table</strong>ï¼Œåˆé‡åˆ°äº†<strong>å¤§æ•°æ®é‡å¯¼è‡´æ»šåŠ¨å¡é¡¿çš„é—®é¢˜</strong>ï¼Œé‚£ä¹ˆè¿™ä¸ªç»„ä»¶å¯ä»¥åœ¨<strong>ä¸æ”¹ el-table ä»»ä½•ä»£ç </strong>çš„å‰æä¸‹ï¼Œä¸ºè¡¨æ ¼æä¾›ä¸€å¥—<strong>é«˜æ€§èƒ½çš„è™šæ‹Ÿæ»šåŠ¨èƒ½åŠ›</strong>ã€‚</p>
<p>ä½¿ç”¨æ–¹å¼éå¸¸ç®€å•ï¼šåªéœ€è¦ç”¨ <code>VirtualListTable</code> åŒ…ä¸€å±‚ <code>el-table</code>ï¼Œå¹¶é€šè¿‡ <code>change</code> äº‹ä»¶æ¥æ”¶å½“å‰éœ€è¦æ¸²æŸ“çš„æ•°æ®å³å¯ã€‚</p>
<ul>
<li><code>VirtualListTable</code> è´Ÿè´£æ»šåŠ¨ã€è®¡ç®—å¯è§†åŒºå’Œç¼“å†²åŒºæ•°æ®ï¼Œ</li>
<li><code>el-table</code> åªè´Ÿè´£å±•ç¤ºå½“å‰è¿™ä¸€å°æ®µæ•°æ®ï¼ŒäºŒè€…å®Œå…¨è§£è€¦ã€‚</li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// æ¸²æŸ“è™šæ‹Ÿæ•°æ®</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">renderVirtualData</span> = (<span class="hljs-params">data</span>)=&gt;{
    tableData.<span class="hljs-property">value</span> = data;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">VertualListTable</span> <span class="hljs-attr">:list-data</span>=<span class="hljs-string">"largeData"</span> @<span class="hljs-attr">change</span>=<span class="hljs-string">"renderVirtualData"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-table</span> <span class="hljs-attr">:data</span>=<span class="hljs-string">"tableData"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"Name"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"address"</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"Address"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-table</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">VertualListTable</span>&gt;</span>
</code></pre>
<h2 data-id="heading-2">äºŒã€VirtualListTable æ ¸å¿ƒå®ç°è§£æ</h2>
<h3 data-id="heading-3">1ï¸âƒ£ è™šæ‹Ÿæ»šåŠ¨çš„å…³é”®å˜é‡</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> start = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);                 <span class="hljs-comment">// å½“å‰èµ·å§‹ç´¢å¼•</span>
<span class="hljs-keyword">const</span> cacheHeight = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();        <span class="hljs-comment">// è¡Œé«˜ç¼“å­˜</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">positions</span>: <span class="hljs-title class_">Positions</span> = [];        <span class="hljs-comment">// æ¯ä¸€è¡Œçš„ä½ç½® &amp; é«˜åº¦</span>
<span class="hljs-keyword">let</span> scrollTop = <span class="hljs-number">0</span>;
</code></pre>
<p><code>positions</code> çš„ç»“æ„ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">{
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span> | <span class="hljs-built_in">string</span>,
  <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span>,
  <span class="hljs-attr">top</span>: <span class="hljs-built_in">number</span>
}
</code></pre>
<p>è¿™æ˜¯æ•´ä¸ªè™šæ‹Ÿæ»šåŠ¨çš„â€œåœ°å›¾â€ã€‚</p>
<h3 data-id="heading-4">2ï¸âƒ£ å¯è§†åŒºæ•°æ®è®¡ç®—ï¼ˆå« bufferï¼‰</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> visibleCount = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span>
  <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(props.<span class="hljs-property">height</span> / props.<span class="hljs-property">estimatedItemSize</span>)
);

<span class="hljs-keyword">const</span> visibleData = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> startIndex = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(start.<span class="hljs-property">value</span> - props.<span class="hljs-property">bufferCount</span>, <span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> endIndex = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(
    start.<span class="hljs-property">value</span> + visibleCount.<span class="hljs-property">value</span> + props.<span class="hljs-property">bufferCount</span>,
    props.<span class="hljs-property">listData</span>.<span class="hljs-property">length</span>,
  );
  <span class="hljs-keyword">return</span> props.<span class="hljs-property">listData</span>.<span class="hljs-title function_">slice</span>(startIndex, endIndex);
});
</code></pre>
<p>ä¸ºä»€ä¹ˆè¦ bufferï¼Ÿ</p>
<ul>
<li>é˜²æ­¢æ»šåŠ¨æ—¶ç™½å±</li>
<li>æå‰æ¸²æŸ“ä¸Šä¸‹ç¼“å†²åŒºåŸŸï¼Œæå‡ä½“éªŒ</li>
</ul>
<h3 data-id="heading-5">3ï¸âƒ£ æ»šåŠ¨æ—¶å¦‚ä½•å¿«é€Ÿå®šä½èµ·å§‹ç´¢å¼•ï¼ˆå…³é”®ï¼‰</h3>
<p>è¿™é‡Œä½¿ç”¨çš„æ˜¯ <strong>äºŒåˆ†æŸ¥æ‰¾</strong>ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getStartIndex</span> = (<span class="hljs-params">list: Positions, scrollTop: <span class="hljs-built_in">number</span></span>) =&gt; {
  <span class="hljs-keyword">let</span> index = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">let</span> low = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">let</span> high = list.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;

  <span class="hljs-keyword">while</span> (low &lt;= high) {
    <span class="hljs-keyword">const</span> mid = low + ((high - low) &gt;&gt; <span class="hljs-number">1</span>);
    <span class="hljs-keyword">const</span> midVal = list[mid]?.<span class="hljs-property">top</span>;
    <span class="hljs-keyword">if</span> (midVal &lt;= scrollTop) {
      index = mid;
      low = mid + <span class="hljs-number">1</span>;
    } <span class="hljs-keyword">else</span> {
      high = mid - <span class="hljs-number">1</span>;
    }
  }
  <span class="hljs-keyword">return</span> index ?? <span class="hljs-number">0</span>;
};
</code></pre>
<p>æ—¶é—´å¤æ‚åº¦ä» <strong>O(n)</strong> é™åˆ° <strong>O(log n)</strong>ï¼Œåœ¨å¤§æ•°æ®é‡ä¸‹éå¸¸å…³é”®ã€‚</p>
<h3 data-id="heading-6">4ï¸âƒ£ ä½¿ç”¨ transform æ§åˆ¶çœŸå® DOM åç§»</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">setStartOffset</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> index = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(start.<span class="hljs-property">value</span> - props.<span class="hljs-property">bufferCount</span>, <span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> offset = positions[index]?.<span class="hljs-property">top</span> ?? <span class="hljs-number">0</span>;
  contentRef.<span class="hljs-property">value</span>!.<span class="hljs-property">style</span>.<span class="hljs-property">transform</span> =
    <span class="hljs-string">`translate3d(0, <span class="hljs-subst">${offset}</span>px, 0)`</span>;
};
</code></pre>
<ul>
<li>ä¸æ“ä½œ <code>top</code></li>
<li>ä½¿ç”¨ <code>transform</code>ï¼Œé¿å…è§¦å‘é‡æ’</li>
<li>GPU åŠ é€Ÿï¼Œæ»šåŠ¨æ›´é¡ºæ»‘</li>
</ul>
<h3 data-id="heading-7">5ï¸âƒ£ ä¸ç­‰é«˜è¡Œçš„æ ¸å¿ƒï¼šé«˜åº¦ç¼“å­˜ + ResizeObserver</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">updateItemsSize</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">getNodes</span>().<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">node</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> id = <span class="hljs-title function_">getNodeId</span>(node);
    <span class="hljs-keyword">const</span> height = node.<span class="hljs-title function_">getBoundingClientRect</span>().<span class="hljs-property">height</span>;
    cacheHeight.<span class="hljs-title function_">set</span>(id, height);
  });
};
</code></pre>
<p>ç»“åˆ <code>ResizeObserver</code>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">ro = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizeObserver</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (ignoreResize) <span class="hljs-keyword">return</span>;
  <span class="hljs-title function_">updateLayout</span>();
});
</code></pre>
<p>è§£å†³çš„é—®é¢˜ï¼š</p>
<ul>
<li>è¡¨æ ¼è¡Œé«˜åº¦åŠ¨æ€å˜åŒ–</li>
<li>æ–‡æœ¬æ¢è¡Œã€slot å˜åŒ–</li>
<li>ä¸éœ€è¦å¼ºåˆ¶å›ºå®šè¡Œé«˜</li>
</ul>
<h3 data-id="heading-8">6ï¸âƒ£ å ä½å…ƒç´ æ’‘å¼€æ»šåŠ¨æ¡</h3>
<p>è¿™æ˜¯è™šæ‹Ÿæ»šåŠ¨ä¸­<strong>æœ€æ ¸å¿ƒçš„ä¸€æ­¥</strong>ï¼šDOM åªæ¸²æŸ“å‡ åè¡Œï¼Œä½†æ»šåŠ¨æ¡çœ‹èµ·æ¥åƒæœ‰å‡ åƒè¡Œ</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"placeholder"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"placeholder"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">updateTotalHeight</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> lastItem = positions.<span class="hljs-title function_">at</span>(-<span class="hljs-number">1</span>);
  placeholderRef.<span class="hljs-property">value</span>!.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> =
    (lastItem.<span class="hljs-property">top</span> + lastItem.<span class="hljs-property">height</span>) + <span class="hljs-string">'px'</span>;
};
</code></pre>
<h2 data-id="heading-9">ä¸‰ã€ä¸ el-table çš„æ— ä¾µå…¥èåˆ</h2>
<ul>
<li>ä¸æ”¹ el-table æºç </li>
<li>åªæ¥ç®¡æ»šåŠ¨å®¹å™¨</li>
<li>æ‰€æœ‰è¡¨æ ¼åŠŸèƒ½ç…§å¸¸ä½¿ç”¨ï¼ˆæ’åºã€åˆ—ã€æ ·å¼ï¼‰</li>
</ul>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">initElement</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> $wrapper = containerRef.<span class="hljs-property">value</span>
    ?.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.el-table__body-wrapper'</span>);
  <span class="hljs-keyword">const</span> $tableBody = $wrapper?.<span class="hljs-property">firstElementChild</span>;

  contentRef.<span class="hljs-property">value</span>?.<span class="hljs-title function_">appendChild</span>($tableBody);
  $wrapper?.<span class="hljs-title function_">appendChild</span>(scrollBoxRef.<span class="hljs-property">value</span>!);
};
</code></pre>
<h2 data-id="heading-10">å››ã€TableBigDataï¼šä¿æŒçº¯å±•ç¤º</h2>
<pre><code class="hljs language-vue" lang="vue">&lt;el-table :data="data"&gt;
  &lt;el-table-column prop="name" label="Name" /&gt;
  &lt;el-table-column prop="email" label="Email" /&gt;
&lt;/el-table&gt;
</code></pre>
<h2 data-id="heading-11">äº”ã€æ€»ç»“</h2>
<h3 data-id="heading-12">1. è¿™ä¸ªæ–¹æ¡ˆé€‚åˆä»€ä¹ˆåœºæ™¯</h3>
<ul>
<li>è¶…å¤§æ•°æ®é‡è¡¨æ ¼ï¼ˆ1000+ï¼‰</li>
<li>è¡Œé«˜ä¸å›ºå®š</li>
<li>è€é¡¹ç›® + Element Plus</li>
<li>å¯¹æ»šåŠ¨æ€§èƒ½è¦æ±‚é«˜</li>
</ul>
<h3 data-id="heading-13">2. æ–¹æ¡ˆä¼˜åŠ¿</h3>
<ul>
<li>æ”¯æŒä¸ç­‰é«˜è¡Œ</li>
<li>ä¸ el-table è§£è€¦</li>
<li>äºŒåˆ†æŸ¥æ‰¾é«˜æ€§èƒ½</li>
<li>buffer é˜²ç™½å±</li>
<li>ResizeObserver è‡ªåŠ¨ä¿®æ­£</li>
</ul>
<blockquote>
<p>æºç : <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzm8%2Fwechat-oa%2Ftree%2Fmain%2Fexamples%2Fvue3-virtual-table" target="_blank" title="https://github.com/zm8/wechat-oa/tree/main/examples/vue3-virtual-table" ref="nofollow noopener noreferrer">github.com/zm8/wechat-â€¦</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025ã€Œå¹´ç»ˆæ€»ç»“ã€â€”â€” äººç”Ÿç™¾æ€ï¼Œæœ‰æƒŠå–œã€æœ‰é—æ†¾]]></title>    <link>https://juejin.cn/post/7604786493640065051</link>    <guid>https://juejin.cn/post/7604786493640065051</guid>    <pubDate>2026-02-10T06:17:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604786493640065051" data-draft-id="7587335187072483354" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025ã€Œå¹´ç»ˆæ€»ç»“ã€â€”â€” äººç”Ÿç™¾æ€ï¼Œæœ‰æƒŠå–œã€æœ‰é—æ†¾"/> <meta itemprop="keywords" content="å¹´ç»ˆæ€»ç»“"/> <meta itemprop="datePublished" content="2026-02-10T06:17:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°–æ¤’åœŸè±†sss"/> <meta itemprop="url" content="https://juejin.cn/user/2041110775208184"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025ã€Œå¹´ç»ˆæ€»ç»“ã€â€”â€” äººç”Ÿç™¾æ€ï¼Œæœ‰æƒŠå–œã€æœ‰é—æ†¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2041110775208184/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°–æ¤’åœŸè±†sss
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T06:17:31.000Z" title="Tue Feb 10 2026 06:17:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æ—¶å…‰é£é€ï¼Œ2025å¹´ä¹Ÿæ¥è¿‘äº†å°¾å£°ï¼Œå½“æˆ‘å¼€å§‹æ‰“ç®—å†™è¿™ç¯‡æ–‡ç« æ—¶å·²ç»æ˜¯ 12 æœˆ 25 æ—¥ã€‚ è„‘æµ·é‡Œå¿«é€Ÿå›å¿†äº†ä¸€ä¸‹ä»Šå¹´å‘ç”Ÿçš„ä¸€äº›äº‹ï¼Œæ„Ÿè§‰è¿™ä¸€å¹´æ—¶é—´è¿‡å¾—å¾ˆå¿«ï¼Œè™½ç„¶ä»Šå¹´æ—¶é—´å¾ˆé•¿ï¼Œä½†éšç€å¹´é¾„çš„å¢é•¿æ„Ÿè§‰æ—¥å­è¿‡çš„å¾ˆå¿«ã€‚</p>
<p>å›æƒ³äº†ä¸€ä¸‹åˆè§‰å¾—è¿™ä¸€å¹´æ²¡åšä»€ä¹ˆäº‹ï¼Œç®€å•åšä¸ªæµæ°´è´¦æ€»ç»“å§ã€‚äººç”Ÿéœ€è¦ä¸æ–­çš„æ€»ç»“ï¼Œå¤ç›˜ï¼Œåªæœ‰é‡æ–°å®¡è§†è‡ªå·±æ‰ä¼šå˜å¾—æ›´å¥½ï¼</p>
<h2 data-id="heading-1">å·¥ä½œ</h2>
<p>å·¥ä½œæ–¹é¢çš„è¯æ²¡å•¥è¯´çš„ï¼Œä¸»è¦æ˜¯æ–°é¡¹ç›®å¼€å·¥ï¼Œæ—¥å¸¸å¼€å‘å’Œè¿­ä»£ï¼ŒæŠ€æœ¯æ ˆçš„è¯æ˜¯ vue3ã€tsã€‚</p>
<p>è¿™ä¸€å¹´åœ¨å·¥ä½œä¸­å‘ç°è‡ªå·±å¯¹é‡åˆ°çš„æŠ€æœ¯é—®é¢˜åˆ¤æ–­ã€ç†è§£å’Œè§£å†³çš„èƒ½åŠ›æœ‰äº†æé«˜ã€‚</p>
<p>æ¯”å¦‚åœ¨æ—¥å¸¸å·¥ä½œä¸­å…¶ä»–åŒäº‹è§£å†³ä¸äº†çš„é—®é¢˜äº¤ç»™æˆ‘åï¼Œæˆ‘ä¼šæ ¹æ®é—®é¢˜å¤šé—®è‡ªå·±å‡ ä¸ªä¸ºä»€ä¹ˆï¼Ÿ ç„¶åæ ¹æ®æƒ³æ³•å’Œæ€è·¯é€æ­¥å°è¯•è§£å†³ã€‚</p>
<p>æˆ‘ä¸€ç›´æ²¡æœ‰å…»æˆä¸€é‡åˆ°é—®é¢˜å°±é—®èº«è¾¹äººçš„ä¹ æƒ¯ï¼ˆé™¤éæ˜¯å®åœ¨æä¸å®šï¼‰ï¼Œä»¥å‰é‡åˆ°é—®é¢˜æ€è€ƒçš„éƒ½ä¸å¤Ÿå…¨é¢ï¼Œæƒ³é—®é¢˜çš„è§’åº¦å•ä¸€æ­»æ¿ï¼Œä»Šå¹´æ„Ÿè§‰è‡ªå·±å­¦ä¼šäº†ä¸€ç‚¹æ€è€ƒã€‚</p>
<h2 data-id="heading-2">ç”Ÿæ´»</h2>
<p>ä»Šå¹´å¾ˆå¼€å¿ƒçš„æ˜¯æ™‹å‡ä¸ºäº†å®çˆ¸ï¼Œä¹Ÿç®—æ˜¯å®Œæˆäº†ä¸€ä»¶äººç”Ÿå¤§äº‹ï¼Œä¹Ÿä»£è¡¨æˆ‘éœ€è¦è‚©è´Ÿçš„è´£ä»»æ›´å¤§ã€‚</p>
<ul>
<li>
<p>åœ¨åŒ»é™¢é™ªäº§<br/>
ä»æ¥æ²¡æœ‰ä½è¿‡é™¢çš„æˆ‘åœ¨åŒ»é™¢é™ªäº§æœŸé—´ï¼Œçœ‹åˆ°å½¢å½¢è‰²è‰²çš„äººçœŸçš„æ˜¯äººç”Ÿç™¾æ€ã€‚ç›®ç¹äº†åª³å¦‡çš„åˆ†å¨©ä¹‹ç—›å¥¹çœŸçš„å¤ªå‹‡æ•¢ã€åšå¼ºã€ä¼Ÿå¤§ã€‚ä¹ŸçœŸçš„å¾ˆä¸å®¹æ˜“ï¼<br/>
ä»¥åç”Ÿæ´»ä¸­å’Œè€å©†æœ‰äº†äº‰æ‰§ä¸€å®šè¦å†·é™ã€å†·é™ã€å†å†·é™ï¼Œå¤šæƒ³æƒ³å¥¹çš„ä¸å®¹æ˜“ï¼</p>
</li>
<li>
<p>åœ¨å®¶é™ªåª³å¦‡åæœˆå­ï¼Œå¸¦å¨ƒ</p>
</li>
<li>
<p>å‚åŠ äº†2åœºå©šç¤¼
èº«è¾¹çš„å¥½æœ‹å‹ä¹Ÿéƒ½é™†ç»­æ‰¾åˆ°äº†è‡ªå·±çš„å¹¸ç¦é€æ­¥å®Œæˆäººç”Ÿå¤§äº‹ã€‚</p>
</li>
<li>
<p>10æœˆè‡ªé©¾2å¤©å»äº†è¶Ÿå¤ªåŸã€11æœˆè‡ªé©¾2å¤©å»äº†è¶Ÿè¥¿å®‰</p>
</li>
</ul>
<p>ä»Šå¹´ä¸»è¦æ—¶é—´è¿˜æ˜¯å›å®¶é™ªè€å©†å­©å­ï¼Œæ¥å›å¥”æ³¢åœ¨è·¯ä¸Šï¼Œæ„Ÿè§‰å¾ˆç´¯ä½†æ˜¯ä¸ºäº†ç”Ÿæ´»åˆæ²¡æœ‰åŠæ³•ï¼Œåªèƒ½ç¡¬ç€å¤´çš®å»é¢å¯¹ã€‚</p>
<h3 data-id="heading-3">å­¦ä¹ </h3>
<p>å»å¹´å­¦ä¹ è®¡åˆ’å®æ–½æƒ…å†µï¼š</p>
<ul>
<li>
<p><del>three.js æ²¡èƒ½èŠ±æ—¶é—´ç»§ç»­å­¦ä¹ å®Œå–„3dåœ°å›¾ demo</del>ã€‚</p>
</li>
<li>
<p>uniApp<br/>
å…¶å®ä¹Ÿæ²¡æ€ä¹ˆå­¦ï¼Œä¹‹å‰å†™è¿‡åŸç”Ÿå°ç¨‹åºï¼Œè¯­æ³•å°±æ˜¯vueç›´æ¥ä¸Šæ‰‹äº†ã€‚ å†™äº†å‡ ä¸ªç®€å•çš„å°å·¥å…·é¡µé¢å‘å¸ƒä¸Šçº¿äº†å°ç¨‹åºç†Ÿæ‚‰äº†ä¸€ä¸‹æµç¨‹ã€‚ æœ€ä¸»è¦æ˜¯ä¸ç†Ÿæ‚‰å„ç§apiï¼Œä»¥åŠh5ã€å°ç¨‹åºã€å®‰å“ã€ios çš„ç¯å¢ƒå·®åˆ«ï¼Œè¿˜æœ‰ä¸€äº›å¸¸è§çš„å‘ã€‚<br/>
è¿™å—æ„Ÿè§‰å®æˆ˜é¡¹ç›®åš1-2ä¸ªå°±å¤§å·®ä¸å·®äº†ï¼Œç„¶åç†Ÿæ‚‰ä¸‹åˆ†åŒ…ã€å‘å¸ƒå„ç«¯å…¼å®¹æ€§é—®é¢˜ã€æŠ€æœ¯å±‚é¢çš„è¯ä¸»è¦è¿˜å¾—ç»“åˆå®é™…ä¸šåŠ¡æ¥å·©å›ºå·©å›ºã€‚</p>
</li>
<li>
<p>react+ts é¡¹ç›®æ²¡æœ‰ä¸“é—¨æŠ½æ—¶é—´æï¼Œä½†æ˜¯æ¥è§¦äº†ä¸€ä¸ª <code>next</code> é¡¹ç›®å°±æ˜¯ <code>jsx</code> è¯­æ³•ï¼Œç®—æ˜¯å˜ç›¸æµ…å­¦äº†ä¸€å°éƒ¨åˆ†ã€‚è¿˜æ˜¯éœ€è¦æ ¹æ®å®é™…éœ€æ±‚åœºæ™¯å»å®ç°åŠŸèƒ½ï¼Œæ›´å¥½çš„ç†Ÿæ‚‰reactç›¸å…³apiï¼Œä»£ç æŠ€å·§ç­‰ã€‚</p>
</li>
<li>
<p>ç»ƒå­—çš„è¯å¶å°”å†™äº†å‡ è¡Œï¼Œè®°ç¬”è®°çš„æ—¶å€™ä¹Ÿç®—æ˜¯ç»ƒäº†ï¼Œä½†æ•´ä½“æ²¡æœ‰å¤ªå¤§æå‡ï¼Œæ³¨æ„åŠ›ä¸å¤Ÿé›†ä¸­ã€‚</p>
</li>
</ul>
<p>ä»Šå¹´çš„å·¥ä½œæ–¹é¢ç®—æ˜¯å¿™äº†ä¸€æ®µæ—¶é—´ï¼Œæœ‰æ®µæ—¶é—´æ¯å¤©ä¸‹ç­å›å®¶å°±ä¸€ç‚¹éƒ½ä¸æƒ³åŠ¨äº†ï¼Œå°†è¿‘ä¿©æœˆæ¯å‘¨åŠ ç­å•ä¼‘ï¼Œæ„Ÿè§‰æ•´ä¸ªäººå¾ˆç–²æƒ«ã€‚</p>
<p>ç„¶åä»Šå¹´ä¸»è¦åšäº†å¦‚ä¸‹å‡ ä»¶äº‹:</p>
<ul>
<li>æ˜é‡‘ä¸Šè¾“å‡ºäº†ä¸€äº›å«é‡‘é‡ä¸é«˜çš„æ–‡ç« </li>
<li>ä¸»è¦å¤‡è€ƒäº†ä¸€ä¸‹è½¯è€ƒï¼ŒA4 çº¸å†™äº†ä¸å°‘ç¬”è®°ï¼Œä½†å†…å®¹å¤ªå¤šäº†è®°ä¸ä½ï¼Œæ³¨æ„åŠ›ä¸å¤Ÿé›†ä¸­ï¼Œ11æœˆä»½è€ƒè¯•2é—¨éƒ½æ²¡èƒ½é€šè¿‡</li>
<li>å­¦ä¹ äº†è§£äº†ä¸€ä¸‹web3ï¼Œæœ¬åœ°å†™äº†ä¸ªç®€å•çš„åˆçº¦ demo</li>
</ul>
<p>æ•´ä½“æ¥è¯´ï¼Œä»Šå¹´åœ¨å­¦ä¹ æ–¹é¢æ²¡æœ‰ä»€ä¹ˆæ”¶è·ï¼Œå…¶å®ä¹Ÿæ˜¯è‡ªå·±æ²¡èƒ½é™ä¸‹å¿ƒå»å­¦ä¹ ï¼Œæ„Ÿè§‰æœ‰ç‚¹é¢“åºŸäº†ã€‚</p>
<h3 data-id="heading-4">ç¯®çƒ</h3>
<p>ä»Šå¹´æ‰“çƒæ¬¡æ•°ç®—æ˜¯æ¯”è¾ƒå¤šï¼ŒåŸºæœ¬ä¸Šåªè¦å‘¨æœ«æœ‰æ—¶é—´å°±å»æ‰“çƒã€‚ç¯®çƒæ˜¯æˆ‘çƒ­çˆ±çš„è¿åŠ¨ï¼Œä¹Ÿæ˜¯æ„¿æ„èŠ±æ—¶é—´å»åšçš„äº‹æƒ…ã€‚æ¯ä¸€åœºçƒéƒ½ä¼šå¯¹ç¯®çƒæœ‰æ–°çš„æ„Ÿæ‚Ÿï¼Œæ¯æŠ•è¿›ä¸€æ¬¡ç¯®éƒ½ä¼šå¢åŠ è‡ªä¿¡å¿ƒï¼ŒåŒæ—¶æ‰“çƒä¹Ÿä¼šé‡Šæ”¾æˆ‘å·¥ä½œç”Ÿæ´»çš„å‹åŠ›ã€‚</p>
<p>ä»Šå¹´çš„è¯æœ‰å¹¸åœ¨8æœˆåˆã€8æœˆåº•ã€11æœˆåº•ã€12æœˆåˆåˆ†åˆ«å¸¦äº†å‡ ä¸ªå­¦å‘˜ï¼Œæœ‰0åŸºç¡€çš„æˆå¹´äººã€0åŸºç¡€çš„å­©å­ã€æœ‰åŸºç¡€çš„åˆä¸­ç”Ÿã€‚æˆ‘å¾ˆäº«å—ç»™åˆ«äººåˆ†äº«ç¯®çƒæŠ€å·§ã€ç¯®çƒçŸ¥è¯†çš„è¿™ä¸ªè¿‡ç¨‹ã€‚</p>
<p>æŠŠæˆ‘å¯¹ç¯®çƒçš„ä¸€äº›è®¤çŸ¥ã€å¿ƒå¾·è®²ç»™ä»–äººæ—¢åšåˆ°äº†ç¯®çƒçš„å¯è’™ï¼ŒåŒæ—¶æˆ‘ä¹Ÿå¾ˆå¥½çš„é”»ç‚¼äº†è‡ªå·±çš„è¡¨è¾¾èƒ½åŠ›ï¼Œä¼šè®©äººå˜å¾—æ›´åŠ è‡ªä¿¡ï¼Œä¹Ÿç®—æ˜¯æœ‰ä¸å°çš„æ”¶è·å§ï¼Œå¾ˆå¼€å¿ƒã€‚</p>
<h2 data-id="heading-5">æ€»ç»“</h2>
<p>2025å¹´æ€»çš„æ¥è¯´å¾ˆå¿™ï¼Œä¸€ç›´åœ¨è·¯ä¸Šï¼Œæœ‰æƒŠå–œæœ‰åå·ä¹Ÿæœ‰é—æ†¾ï¼Œå¯èƒ½äººç”Ÿå°±æ˜¯è¿™æ ·ã€‚ ç”Ÿæ´»å¾ˆéš¾ä½†æ˜¯è‡ªå·±è¦å­¦ä¼šç»™è‡ªå·±é™å¿ƒï¼Œç´¯äº†å¯ä»¥ä¼‘æ¯ï¼Œä½†ä¸èƒ½é¢“åºŸï¼åŠ æ²¹ï¼åŠªåŠ›è°ƒæ•´è‡ªå·±çš„å¿ƒæ€ã€‚</p>
<h2 data-id="heading-6">å±•æœ›2026</h2>
<ul>
<li>å®¶äººèº«ä½“å¥åº·ã€å®è´å¥åº·æˆé•¿</li>
<li>é™å¿ƒã€è°ƒæ•´å¿ƒæ€</li>
<li>å·¥ä½œé¡ºåˆ©</li>
<li>å­¦ä¹ ä¸€äº›æ–°çŸ¥è¯†</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vibe Coding å·²æ­»ï¼ŒKarpathy è¯´æœªæ¥å« Agentic Engineering]]></title>    <link>https://juejin.cn/post/7604801893529419819</link>    <guid>https://juejin.cn/post/7604801893529419819</guid>    <pubDate>2026-02-10T06:20:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604801893529419819" data-draft-id="7604793276906864703" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vibe Coding å·²æ­»ï¼ŒKarpathy è¯´æœªæ¥å« Agentic Engineering"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,AIGC,OpenAI"/> <meta itemprop="datePublished" content="2026-02-10T06:20:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­Ÿå¥AIç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/4212984287073895"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vibe Coding å·²æ­»ï¼ŒKarpathy è¯´æœªæ¥å« Agentic Engineering
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984287073895/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­Ÿå¥AIç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T06:20:49.000Z" title="Tue Feb 10 2026 06:20:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å­Ÿå¥ã€‚</p>
<p><strong>é€ "Vibe Coding"è¿™ä¸ªè¯çš„äººï¼Œäº²æ‰‹å®£å¸ƒå®ƒè¿‡æ—¶äº†ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/125f5b0cd9c54647beddd79c74adddf9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771309253&amp;x-signature=3CGI7uZlknlY9kLkExLYPFygb6A%3D" alt="" loading="lazy"/></p>
<p>2 æœˆ 4 æ—¥ï¼ŒAndrej Karpathyï¼ˆOpenAI è”åˆåˆ›å§‹äººï¼Œå‰ Tesla AI è´Ÿè´£äººï¼‰åœ¨ X ä¸Šå‘äº†ä¸€æ¡é•¿å¸–ï¼Œçºªå¿µ Vibe Coding è¯ç”Ÿä¸€å‘¨å¹´ã€‚ä½†ä»–ä¸æ˜¯æ¥åº†ç¥çš„ï¼Œä»–æ˜¯æ¥"æ”¹å"çš„â€”â€”</p>
<p>ä»–è¯´ï¼Œç°åœ¨è¯¥å« <strong>Agentic Engineering</strong> äº†ã€‚</p>
<p>è¿™ä¸æ˜¯æ–‡å­—æ¸¸æˆã€‚è¿™èƒŒåæ˜¯ AI ç¼–ç¨‹é¢†åŸŸè¿‡å»ä¸€å¹´æœ€é‡è¦çš„èŒƒå¼è½¬ç§»ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>01 Karpathy åˆ°åº•è¯´äº†ä»€ä¹ˆ</strong></h2>
<p>å…ˆè¿˜åŸåŸæ–‡å…³é”®ä¿¡æ¯ã€‚</p>
<p>Karpathy æ‰¿è®¤ï¼Œä¸€å¹´å‰ä»–éšæ‰‹å‘çš„é‚£æ¡æ¨æ–‡ï¼Œæ²¡æƒ³åˆ°"Vibe Coding"èƒ½ç«æˆè¿™æ ·â€”â€”ä¸Šäº†ç»´åŸºç™¾ç§‘ï¼Œè¢«æ‰€æœ‰ç§‘æŠ€å…¬å¸å¼•ç”¨ï¼Œç”šè‡³ Sam Altman éƒ½åœ¨ç”¨è¿™ä¸ªè¯ã€‚</p>
<p>ä½†ä»–è¯é”‹ä¸€è½¬ï¼š</p>
<blockquote>
<p>*"ä¸€å¹´å‰æˆ‘è¯´ Vibe Coding çš„æ—¶å€™ï¼Œ*<em>LLM</em> <em>çš„èƒ½åŠ›è¿˜å¾ˆæœ‰é™ï¼Œä½ åªèƒ½æ‹¿å®ƒåšä¸€äº›ç©å…·é¡¹ç›®ã€demo å’Œæ¢ç´¢æ€§çš„ä¸œè¥¿ã€‚"</em></p>
</blockquote>
<p>ç°åœ¨ä¸ä¸€æ ·äº†ã€‚ä»–åŸè¯ï¼š</p>
<blockquote>
<p><em>"'agentic' because the new default is that you are not writing the code directly 99% of the time, you are orchestrating agents who do and acting as oversight."</em></p>
</blockquote>
<blockquote>
<p><em>"'engineering' to emphasize that there is an art &amp; science and expertise to it."</em></p>
</blockquote>
<p>ç¿»è¯‘æˆäººè¯ï¼š<strong>ä½ ä¸å†æ˜¯"å†™ä»£ç çš„äºº"ï¼Œä½ æ˜¯"æŒ‡æŒ¥ AI Agent å†™ä»£ç çš„äºº"ã€‚è€Œè¿™ä»¶äº‹æœ¬èº«ï¼Œæ˜¯ä¸€é—¨éœ€è¦å­¦ä¹ çš„æŠ€æœ¯ã€‚</strong></p>
<hr/>
<h2 data-id="heading-1"><strong>02 Vibe Coding å’Œ Agentic Engineering çš„æœ¬è´¨åŒºåˆ«</strong></h2>
<p>å¾ˆå¤šäººè§‰å¾—è¿™å°±æ˜¯æ¢äº†ä¸ªåå­—ã€‚ä¸æ˜¯ã€‚</p>
<p><strong>Vibe Coding</strong>ï¼šä½ å¯¹ç€ AI è¯´"å¸®æˆ‘å†™ä¸€ä¸ªç™»å½•é¡µé¢"ï¼Œå®ƒåå‡ºä»£ç ï¼Œä½ å¤åˆ¶ç²˜è´´ï¼Œè·‘èµ·æ¥å°±è¡Œã€‚ä¸è¡Œå°±å†è¯•ä¸€æ¬¡ã€‚æ ¸å¿ƒä½“éªŒæ˜¯â€”â€”ç¢°è¿æ°”ã€‚</p>
<p><strong>Agentic Engineering</strong>ï¼šä½ ä¸å†ä¸€å¥ä¸€å¥åœ°"æç¤º"AIã€‚ä½ å¯åŠ¨ä¸€ä¸ª Agentï¼Œç»™å®ƒä¸€ä¸ªç›®æ ‡ã€ä¸€å¥—ä¸Šä¸‹æ–‡ã€ä¸€ç»„å·¥å…·ï¼Œç„¶åå®ƒè‡ªå·±å»è§„åˆ’ã€æ‰§è¡Œã€è°ƒè¯•ã€æµ‹è¯•ã€‚ä½ è´Ÿè´£çš„æ˜¯â€”â€”å®¡æŸ¥å’Œå†³ç­–ã€‚</p>



































<table><thead><tr><th>ç»´åº¦</th><th>Vibe Coding</th><th>Agentic Engineering</th></tr></thead><tbody><tr><td>äººçš„è§’è‰²</td><td>å†™æç¤ºè¯</td><td>æ¶æ„å¸ˆ+å®¡æŸ¥è€…</td></tr><tr><td>AI çš„è§’è‰²</td><td>è¡¥å…¨ä»£ç </td><td>è‡ªä¸»è§„åˆ’+æ‰§è¡Œ</td></tr><tr><td>äº¤äº’æ–¹å¼</td><td>ä¸€é—®ä¸€ç­”</td><td>ä¸‹å‘ä»»åŠ¡ï¼ŒæŒç»­ç›‘æ§</td></tr><tr><td>è´¨é‡æ§åˆ¶</td><td>ç¢°è¿æ°”</td><td>ç³»ç»ŸåŒ– Review</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>Demoã€å°å·¥å…·</td><td>ç”Ÿäº§çº§é¡¹ç›®</td></tr></tbody></table>
<p><strong>beforeï¼š</strong> ä½ èŠ± 2 å°æ—¶å†™ 20 æ¡æç¤ºè¯ï¼Œä¸€æ®µä¸€æ®µæ‹¼å‡‘å‡ºä¸€ä¸ªåŠŸèƒ½ã€‚</p>
<p><strong>afterï¼š</strong> ä½ èŠ± 10 åˆ†é’Ÿå†™ä¸€ä»½éœ€æ±‚æ–‡æ¡£ï¼ŒAgent ç”¨ 30 åˆ†é’Ÿè‡ªå·±è·‘å®Œï¼Œä½ èŠ± 20 åˆ†é’Ÿ Reviewã€‚</p>
<p>è¿™ä¸æ˜¯æ•ˆç‡æå‡ 10%ã€‚è¿™æ˜¯å·¥ä½œæ–¹å¼çš„æ ¹æœ¬å˜åŒ–ã€‚</p>
<hr/>
<h2 data-id="heading-2"><strong>03 æˆ‘è‡ªå·±çš„ä½“æ„Ÿ</strong></h2>
<p>è¯´å®è¯ï¼ŒKarpathy è¿™æ¬¡æ˜¯åœ¨"è¿½è®¤"ä¸€ä¸ªå·²ç»å‘ç”Ÿçš„äº‹å®ã€‚</p>
<p>è¿‡å»ä¸‰ä¸ªæœˆï¼Œæˆ‘å›¢é˜Ÿåšäº† 30 å¤šä¸ªå‡ºæµ·å°äº§å“ã€‚å¦‚æœè¿˜åœ¨"Vibe Coding"æ¨¡å¼â€”â€”ä¸€è¡Œä¸€è¡Œæç¤º AI å†™â€”â€”æ ¹æœ¬ä¸å¯èƒ½åšåˆ°è¿™ä¸ªé€Ÿåº¦ã€‚</p>
<p>æˆ‘ç°åœ¨çš„å®é™…å·¥ä½œæµæ˜¯è¿™æ ·çš„ï¼š</p>
<p><strong>1ï¼‰éœ€æ±‚é˜¶æ®µï¼š</strong> æˆ‘å†™æ¸…æ¥šè¦åšä»€ä¹ˆï¼ˆä¸æ˜¯æ€ä¹ˆåšï¼‰ï¼ŒåŒ…æ‹¬æŠ€æœ¯é€‰å‹ã€ç›®æ ‡ç”¨æˆ·ã€æ ¸å¿ƒåŠŸèƒ½ã€‚</p>
<p><strong>2ï¼‰æ‰§è¡Œé˜¶æ®µï¼š</strong> ä¸¢ç»™ Claude Code æˆ– Cursor Agentï¼Œè®©å®ƒè‡ªå·±å»å»ºé¡¹ç›®ã€å†™ä»£ç ã€è£…ä¾èµ–ã€è·‘æµ‹è¯•ã€‚æˆ‘å»å–æ¯å’–å•¡ã€‚</p>
<p><strong>3ï¼‰Review é˜¶æ®µï¼š</strong> å›æ¥çœ‹ diffï¼Œæ£€æŸ¥æ¶æ„åˆä¸åˆç†ã€æœ‰æ²¡æœ‰å®‰å…¨é—®é¢˜ã€ä»£ç é£æ ¼å¯¹ä¸å¯¹ã€‚ä¸è¡Œçš„åœ°æ–¹æŒ‡å‡ºæ¥ï¼Œè®© Agent æ”¹ã€‚</p>
<p><strong>4ï¼‰è¿­ä»£é˜¶æ®µï¼š</strong> Agent æ”¹å®Œï¼Œæˆ‘å†çœ‹ä¸€è½®ã€‚ç›´åˆ°æ»¡æ„ã€‚</p>
<p>æ•´ä¸ªè¿‡ç¨‹é‡Œï¼Œæˆ‘æ‰‹åŠ¨å†™çš„ä»£ç å¯èƒ½ä¸åˆ° 1%ã€‚ä½†æˆ‘åšçš„å†³ç­–â€”â€”æŠ€æœ¯é€‰å‹ã€æ¶æ„è®¾è®¡ã€è´¨é‡æŠŠå…³â€”â€”è¿™äº›å äº† 90%çš„ä»·å€¼ã€‚</p>
<p><strong>è¿™å°±æ˜¯ Agentic Engineeringã€‚ä½ ä¸å†™ä»£ç ï¼Œä½†ä½ è¦æ¯”ä»¥å‰æ›´æ‡‚ä»£ç ã€‚</strong></p>
<hr/>
<h2 data-id="heading-3"><strong>04 å¯¹ç¨‹åºå‘˜æ„å‘³ç€ä»€ä¹ˆ</strong></h2>
<p>å…ˆè¯´ä¸€ä¸ªæ•°æ®ï¼šAnthropic çš„ CPO Mike Krieger ä¸Šå‘¨é€éœ²ï¼ŒClaude å·²ç»å†™äº†ä»–ä»¬å…¬å¸æ¥è¿‘ 100%çš„ä»£ç ã€‚å¾®è½¯åŒä¸€å‘¨è®¾ç«‹äº†ä¸€ä¸ªæ–°å²—ä½â€”â€”å·¥ç¨‹è´¨é‡è´Ÿè´£äººï¼ˆEngineering Quality Leadï¼‰ï¼Œä¸“é—¨ç›¯ AI ç”Ÿæˆä»£ç çš„è´¨é‡ã€‚</p>
<p>è¿™ä¸¤ä»¶äº‹æ‹¼åœ¨ä¸€èµ·çœ‹ï¼Œä¿¡å·éå¸¸æ˜ç¡®ï¼š</p>
<p><strong>AI å†™ä»£ç çš„é‡çº§å·²ç»ä¸å¯é€†äº†ã€‚ä½†"è°æ¥ä¿è¯è´¨é‡"æˆäº†æ–°çš„æ ¸å¿ƒé—®é¢˜ã€‚</strong></p>
<p>GitClear çš„æ•°æ®ä¹Ÿå°è¯äº†è¿™ç‚¹ï¼šAI ç”Ÿæˆä»£ç çš„ code churnï¼ˆå†™äº†åˆæ”¹ã€æ”¹äº†åˆåˆ çš„æ¯”ä¾‹ï¼‰æ¯”äººå·¥ä»£ç é«˜äº†è¿‘ä¸€å€ã€‚ä»£ç å†™å¾—å¤šâ‰ ä»£ç å†™å¾—å¥½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3164a289cab44169823a25fca3f3c19b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771309253&amp;x-signature=ygESVdTp6J4U3I63CF7qWDDI8QY%3D" alt="" loading="lazy"/></p>
<p>æ‰€ä»¥ï¼Œæœªæ¥ç¨‹åºå‘˜çš„æ ¸å¿ƒèƒ½åŠ›ä¸æ˜¯"å†™ä»£ç å¿«"ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>
<p><strong>æ¶æ„èƒ½åŠ›</strong>ï¼šå‘Šè¯‰ Agent æ€ä¹ˆæ‹†åˆ†æ¨¡å—ã€é€‰ä»€ä¹ˆæ–¹æ¡ˆ</p>
</li>
<li>
<p><strong>Review èƒ½åŠ›</strong>ï¼šä¸€çœ¼çœ‹å‡º Agent ç”Ÿæˆä»£ç çš„é—®é¢˜</p>
</li>
<li>
<p><strong>ç³»ç»Ÿè®¾è®¡</strong>ï¼šAgent ä¸ä¼šå¸®ä½ åšå–èˆï¼Œä½ å¾—è‡ªå·±å†³å®š</p>
</li>
<li>
<p><strong>äº§å“ sense</strong>ï¼šçŸ¥é“è¯¥åšä»€ä¹ˆæ¯”çŸ¥é“æ€ä¹ˆåšæ›´å€¼é’±</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-4">05 ä¸€ä¸ªå¯èƒ½è®©ä½ ä¸èˆ’æœçš„åˆ¤æ–­</h2>
<p><strong>Vibe Coding é™ä½äº†ç¼–ç¨‹çš„é—¨æ§›ã€‚Agentic Engineering ä¼šæ‹‰å¼€å·¥ç¨‹å¸ˆä¹‹é—´çš„å·®è·ã€‚</strong></p>
<p>å› ä¸º Vibe Coding æ—¶ä»£ï¼Œå¤§å®¶æ¯”çš„æ˜¯"è°çš„æç¤ºè¯å†™å¾—å¥½"ï¼Œé—¨æ§›ä¸é«˜ã€‚</p>
<p>ä½† Agentic Engineering æ—¶ä»£ï¼Œä½ å¾—æ‡‚æ¶æ„ã€æ‡‚ç³»ç»Ÿè®¾è®¡ã€æ‡‚å·¥ç¨‹è´¨é‡ã€æ‡‚äº§å“é€»è¾‘ã€‚Agent è¶Šå¼ºï¼Œå¯¹æ“æ§ Agent çš„äººè¦æ±‚è¶Šé«˜ã€‚</p>
<p>è¿™å°±åƒâ€”â€”è‡ªåŠ¨é©¾é©¶è¶Šå…ˆè¿›ï¼Œå¯¹è®¾è®¡è‡ªåŠ¨é©¾é©¶ç³»ç»Ÿçš„å·¥ç¨‹å¸ˆè¦æ±‚è¶Šé«˜ï¼Œè€Œä¸æ˜¯è¶Šä½ã€‚</p>
<p>Karpathy è‡ªå·±ä¹Ÿè¯´äº†ï¼š"It's something you can learn and become better atï¼Œ with its own depth of a different kindã€‚"</p>
<p>è¿™æ˜¯ä¸€é—¨æ–°çš„æ‰‹è‰ºã€‚å­¦ä¸å­¦ï¼Œä½ è‡ªå·±å®šã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/86c35fa2959146debd7b6442c76f98f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771309253&amp;x-signature=lpYfM%2FhM5sGWGiJYACLqTop%2BlqU%3D" alt="" loading="lazy"/></p>
<hr/>
<p><strong>2025 å¹´ï¼Œäººäººéƒ½åœ¨ Vibe Codingã€‚2026 å¹´ï¼Œèƒ½åš Agentic Engineering çš„äººï¼Œæ‰æ˜¯çœŸæ­£çš„ç¨€ç¼ºèµ„æºã€‚</strong></p>
<hr/>
<p>å¦‚æœè¿™ç¯‡å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµã€æ”¶è—ã€å…³æ³¨ï¼Œä½ çš„æ”¯æŒæ˜¯æˆ‘æŒç»­è¾“å‡ºçš„åŠ¨åŠ› âœ¨</p>
<hr/>
<p>æˆ‘çš„å…¶ä»–å¹³å°è´¦å·å’Œå¼€æºé¡¹ç›®åœ¨ä¸ªäººä¸»é¡µä¸­ï¼Œæ¬¢è¿äº¤æµ ğŸ¤</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[IntelliJ IDEA 2026.1 EAP 3 å‘å¸ƒï¼šè¢«å¼€å‘è€…å‚¬äº† 6 å¹´ï¼Œè¿™ä¸ªç»†èŠ‚ç»ˆäºä¿®äº†ï¼]]></title>    <link>https://juejin.cn/post/7604775190212919306</link>    <guid>https://juejin.cn/post/7604775190212919306</guid>    <pubDate>2026-02-10T06:36:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604775190212919306" data-draft-id="7604786493640212507" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="IntelliJ IDEA 2026.1 EAP 3 å‘å¸ƒï¼šè¢«å¼€å‘è€…å‚¬äº† 6 å¹´ï¼Œè¿™ä¸ªç»†èŠ‚ç»ˆäºä¿®äº†ï¼"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-10T06:36:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¥å¥‡å°æ±¤åœ†"/> <meta itemprop="url" content="https://juejin.cn/user/1151943919285431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            IntelliJ IDEA 2026.1 EAP 3 å‘å¸ƒï¼šè¢«å¼€å‘è€…å‚¬äº† 6 å¹´ï¼Œè¿™ä¸ªç»†èŠ‚ç»ˆäºä¿®äº†ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1151943919285431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¥å¥‡å°æ±¤åœ†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T06:36:14.000Z" title="Tue Feb 10 2026 06:36:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>JetBrains å‘å¸ƒäº†Â <strong>IntelliJ IDEA 2026.1 EAP 3</strong>ã€‚ è¿™æ¬¡æ›´æ–°çš„æ”¹åŠ¨å¾ˆå¤šï¼Œä½†æœ€å€¼å¾—é‡ç‚¹è¯´çš„ï¼Œå…¶å®æ˜¯ä¸€ä¸ªè¢«å¼€å‘è€…åæ§½äº†æ•´æ•´Â <strong>6 å¹´</strong>Â çš„åŸºç¡€åŠŸèƒ½ï¼Œç»ˆäºè½åœ°ï¼š</p>
<blockquote>
<p>åœ¨ IDE ä¸­åˆ é™¤æ–‡ä»¶æ—¶ï¼Œå°†ç§»åŠ¨åˆ°ç³»ç»Ÿå›æ”¶ç«™/åƒåœ¾æ¡¶ï¼Œè€Œä¸æ˜¯ç›´æ¥æ°¸ä¹…åˆ é™¤ã€‚</p>
</blockquote>
<p>åœ¨ JetBrains çš„ issue ä¸­ï¼Œè¿™ä¸ªéœ€æ±‚æœ€æ—©åœ¨ 6 å¹´å‰æå‡ºã€‚è¿‡å» JetBrains IDE çš„è¡Œä¸ºæ˜¯ï¼š</p>
<ul>
<li>åœ¨ Project è§†å›¾ä¸­åˆ é™¤æ–‡ä»¶</li>
<li><strong>ç›´æ¥æ°¸ä¹…åˆ é™¤</strong></li>
<li>ä¸è¿›å…¥ç³»ç»Ÿå›æ”¶ç«™</li>
<li>åªèƒ½é Â Local History**Â æˆ– Git æ‰¾å›</li>
</ul>
<p>è¿™å’Œ VS Codeã€Visual Studioã€Finder/Explorer ç­‰ä¸»æµå·¥å…·å®Œå…¨ä¸åŒã€‚</p>
<p>è€Œåœ¨Â <strong>2026.1 EAP 3</strong>Â ä¸­ï¼Œè¿™ä¸ª issue å·²è¢«æ­£å¼æ ‡è®°ä¸ºï¼š</p>
<ul>
<li><strong>State: Fixed</strong></li>
<li>Available in: 2026.1 EAP 3</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼š</p>
<blockquote>
<p>ç°åœ¨åˆ é™¤æ–‡ä»¶çš„è¡Œä¸ºå˜ä¸ºÂ <strong>ç§»åŠ¨åˆ°å›æ”¶ç«™</strong>ï¼Œè€Œä¸æ˜¯Â <strong>ç›´æ¥æ°¸ä¹…åˆ é™¤</strong>ã€‚</p>
</blockquote>
<p>å¾ˆå¤šäººä¼šè¯´ï¼š</p>
<blockquote>
<p>æœ‰ Git å°±å¤Ÿäº†ã€‚</p>
</blockquote>
<p>ä½†ç°å®æƒ…å†µæ˜¯ï¼š</p>
<blockquote>
<p>å¹¶ä¸æ˜¯æ‰€æœ‰æ–‡ä»¶éƒ½åœ¨ Git ä¸­ã€‚</p>
</blockquote>
<ul>
<li>æ–°å»ºæœªæäº¤æ–‡ä»¶</li>
<li>æœ¬åœ°è„šæœ¬</li>
<li>SQL</li>
<li>scratch</li>
<li>ä¸´æ—¶ä»£ç </li>
<li>é…ç½®æ–‡ä»¶</li>
</ul>
<p>è¿™äº›æ–‡ä»¶ä¸€æ—¦è¯¯åˆ ï¼Œ<strong>Git å®Œå…¨å¸®ä¸ä¸Šå¿™</strong>ã€‚</p>
<p>JetBrains ä¸€ç›´æ¨èä½¿ç”¨ Local Historyï¼Œä½†å®ƒå¹¶ä¸å®Œç¾ï¼š</p>
<ul>
<li>ä¼šè¢«æ¸…ç†</li>
<li>å‡çº§å¯èƒ½ä¸¢</li>
<li>æŸ¥æ‰¾æˆæœ¬é«˜</li>
<li>Undo ä¸ä¸€å®šå¯ç”¨</li>
<li>æ–°æ‰‹ä¸çŸ¥é“åœ¨å“ª</li>
</ul>
<p>è€Œç³»ç»Ÿå›æ”¶ç«™çš„ä¼˜åŠ¿éå¸¸æ˜æ˜¾ï¼š</p>
<ul>
<li>ç”¨æˆ·ä¹ æƒ¯ä¸€è‡´</li>
<li>å¯è§†åŒ–</li>
<li>è·¨åº”ç”¨</li>
<li>ä¸ä¾èµ– IDE</li>
<li>100% ç›´è§‰</li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå‡ ä¹æ‰€æœ‰ç¼–è¾‘å™¨éƒ½é»˜è®¤è¿™ä¹ˆåšã€‚</p>
<p>å®ƒè§£å†³çš„æ˜¯ï¼š</p>
<blockquote>
<p>æœ€å¸¸è§ã€æœ€è‡´å‘½ã€æœ€å®¹æ˜“å‘ç”Ÿçš„ IDE äº‹æ•…ä¹‹ä¸€ã€‚</p>
</blockquote>
<p>é™¤äº†å›æ”¶ç«™ï¼Œ2026.1 EAP 3 è¿˜æœ‰ä¸å°‘å€¼å¾—å…³æ³¨çš„æ”¹è¿›ï¼š</p>
<h2 data-id="heading-0">1. Spring ç›¸å…³</h2>
<ul>
<li>æ˜¾ç¤ºæ³¨å…¥Â Bean inlay**</li>
<li>Debugger è¿è¡Œæ—¶ Bean æç¤º</li>
<li>API versioning é…ç½®æ”¹è¿›</li>
<li>è‡ªåŠ¨æ£€æµ‹ SQL æ–¹è¨€</li>
</ul>
<h2 data-id="heading-1">2. Java</h2>
<ul>
<li>æ”¯æŒæ›´å¤šÂ <code>javac</code>Â å‚æ•°è¡¥å…¨</li>
<li>pattern matching è¯Šæ–­ä¿®å¤</li>
<li>import æ€§èƒ½ä¼˜åŒ–</li>
</ul>
<h2 data-id="heading-2">3. Kotlin</h2>
<ul>
<li>K1 API**Â å¼€å§‹åºŸå¼ƒ</li>
<li>æ–°è§£æ„è¯­æ³•å¯¼èˆªæ”¯æŒ</li>
<li>ç¼–è¯‘å™¨ç”Ÿæˆå£°æ˜Â inlay æç¤º**</li>
</ul>
<h2 data-id="heading-3">4. ç¼–è¾‘å™¨ä½“éªŒ</h2>
<ul>
<li>å…‰æ ‡å¹³æ»‘åŠ¨ç”»</li>
<li>åœ†è§’å…‰æ ‡</li>
<li>ç»ˆç«¯ä½“éªŒä¿®å¤</li>
<li>æ’ä»¶ç®¡ç†æ”¹è¿›</li>
</ul>
<h2 data-id="heading-4">5. AI ä¸å‘½ä»¤è¡¥å…¨</h2>
<ul>
<li><code>replace_text_in_file</code>Â ä¿®å¤ç©ºæ–‡æœ¬æ›¿æ¢é—®é¢˜</li>
<li>AI command completion å›¾æ ‡æ›´æ–°</li>
<li>JavaMemberNameCompletionContributor æ”¹ä¸º ModCommand completion</li>
<li>ä¿®å¤æ–°è¡Œ + tab åœºæ™¯ä¸‹å‘½ä»¤ç”Ÿæˆå¤±æ•ˆ</li>
<li>æ”¯æŒè·³è¿‡æŸäº›æ— æ„ä¹‰å‘½ä»¤è¡¥å…¨</li>
<li>MCP Server å¤šé¡¹ä¿®å¤ï¼ˆLLM å·¥ä½œæµç›¸å…³ï¼‰</li>
</ul>
<h2 data-id="heading-5">6. å¹³å°æ¶æ„</h2>
<ul>
<li>ç§»é™¤ ProjectExtension</li>
<li>AI assistant æ’ä»¶å‰ç«¯åŒ–</li>
<li>LSP null safety**Â ä¿®å¤</li>
<li>æ”¯æŒåå° write actions</li>
<li>æ¸…ç† CachedValuesManager</li>
</ul>
<p>è¿™äº›éƒ½æ˜¯ï¼š</p>
<blockquote>
<p>ä¸ºâ€œè¿œç¨‹ IDE + AI IDE + åˆ†å¸ƒå¼ IDEâ€åšå‡†å¤‡ã€‚</p>
</blockquote>
<h2 data-id="heading-6">7. æ€§èƒ½ä¸ç¨³å®šæ€§</h2>
<ul>
<li>Gradle sync æ–‡ä»¶æ³„æ¼</li>
<li>VFS é€’å½’åŠ è½½é—®é¢˜</li>
<li>Debugger CPU å†²çª</li>
<li>åˆ†æ”¯åˆ‡æ¢å¡æ­»</li>
<li>Git å¤±æ•ˆ</li>
<li>æ’ä»¶å…¼å®¹è¯¯æŠ¥</li>
<li>å…¶ä»– 70+ ä¸ªå·²çŸ¥é—®é¢˜ä¿®å¤</li>
</ul>
<blockquote>
<p>ä¾†æºï¼šxxyå¼€æº</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¢« Seedance 2.0 çš„æµå¼å“åº”å‘äº†ä¸€æ•´æ™šï¼šå…³äº SSE æ•°æ®åŒ…æˆªæ–­çš„æš´åŠ›è§£æ³• (é™„ Python è„šæœ¬)]]></title>    <link>https://juejin.cn/post/7604775190212771850</link>    <guid>https://juejin.cn/post/7604775190212771850</guid>    <pubDate>2026-02-10T06:11:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604775190212771850" data-draft-id="7604805226696425510" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¢« Seedance 2.0 çš„æµå¼å“åº”å‘äº†ä¸€æ•´æ™šï¼šå…³äº SSE æ•°æ®åŒ…æˆªæ–­çš„æš´åŠ›è§£æ³• (é™„ Python è„šæœ¬)"/> <meta itemprop="keywords" content="Python,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-10T06:11:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸ƒç‰›äº‘è¡Œä¸šåº”ç”¨"/> <meta itemprop="url" content="https://juejin.cn/user/3722267698664140"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¢« Seedance 2.0 çš„æµå¼å“åº”å‘äº†ä¸€æ•´æ™šï¼šå…³äº SSE æ•°æ®åŒ…æˆªæ–­çš„æš´åŠ›è§£æ³• (é™„ Python è„šæœ¬)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3722267698664140/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸ƒç‰›äº‘è¡Œä¸šåº”ç”¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T06:11:12.000Z" title="Tue Feb 10 2026 06:11:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å…„å¼Ÿä»¬ï¼Œå¿ƒæ€å´©äº†ã€‚</p>
<p>æ˜¨æ™šæœ¬æ¥æƒ³è¶ç€å­—èŠ‚ Seedance 2.0 åˆšå‡ºï¼Œèµ¶ç´§æ¥ä¸ª API è·‘ä¸ª Demo çœ‹çœ‹æ•ˆæœã€‚å®˜æ–¹æ–‡æ¡£å†™å¾—å€’æ˜¯æŒºâ€œç®€æ´â€ï¼Œå°±ç»™äº†ä¸ª curl ç¤ºä¾‹ã€‚æˆ‘å¯»æ€è¿™è¿˜ä¸ç®€å•ï¼Ÿç›´æ¥ç”¨ requests åº“ä¸€æŠŠæ¢­ã€‚</p>
<p>ç»“æœï¼Œä»£ç è·‘èµ·æ¥ï¼Œè¿™æŠ¥é”™ç›´æ¥ç»™æˆ‘æ•´ä¸ä¼šäº†ï¼š json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)</p>
<p>æ’æŸ¥äº†ä¸¤ä¸ªå°æ—¶ï¼Œæ‰å‘ç°è¿™ API çš„æµå¼å“åº”ï¼ˆSSEï¼‰ç®€ç›´æ˜¯ç¾éš¾ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/089f210a0a4543b2b7b4d6418d006c7a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiD54mb5LqR6KGM5Lia5bqU55So:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771308674&amp;x-signature=9irqFHMETNwgtmi8FYlxFZy54bk%3D" alt="jimeng-2026-02-10-7384-ä¸€å¼ çœŸå®æ„Ÿåè¶³çš„ç»ˆç«¯æŠ¥é”™æˆªå›¾ï¼ŒèƒŒæ™¯ä¸ºæ·±é»‘è‰²ã€‚å±å¹•ä¸Šè¿è¡Œç€ä¸€ä¸ªæ•°æ®å¤„ç†ç¨‹åºï¼Œçªç„¶ä¸­....png" loading="lazy"/></p>
<ol>
<li>è¸©å‘ç°åœº</li>
</ol>
<p>Seedance çš„ API æ˜¯æµå¼è¿”å›è¿›åº¦çš„ (stream=True)ã€‚é—®é¢˜åœ¨äºï¼Œå®ƒåå‡ºæ¥çš„ chunks ä¸æ˜¯æŒ‰ JSON è¾¹ç•Œåˆ‡å‰²çš„ï¼</p>
<p>æœ‰æ—¶å€™ç½‘ç»œä¸€æŠ–ï¼Œä¸€ä¸ªå®Œæ•´çš„ JSON å¯¹è±¡ä¼šè¢«åˆ‡æˆä¸¤åŠï¼š</p>
<p>â—Â Chunk 1: data: {"status": "processing", "progre</p>
<p>â—Â Chunk 2: ss": 45}</p>
<p>ä½ ç›´æ¥å¯¹ Chunk 1 åš json.loadsï¼Œå¿…æŒ‚æ— ç–‘ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/078703cfde8b45ab9d9c7e5d37ddfe7b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiD54mb5LqR6KGM5Lia5bqU55So:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771308674&amp;x-signature=Jp2yOTmLoTI4rPP7r0Fed92koX0%3D" alt="jimeng-2026-02-10-4472-ä¸€å¼ æ‰‹ç»˜é£æ ¼çš„æµå¼æ‹¼æ¥åŸç†è‰å›¾ã€‚ç”»é¢åˆ†ä¸ºå·¦ã€ä¸­ã€å³ä¸‰éƒ¨åˆ†ã€‚å·¦ä¾§æ˜¯ä¸¤ä¸ªç ´ç¢çš„æ•°æ®å—....png" loading="lazy"/></p>
<ol start="2">
<li>æš´åŠ›è§£æ³• (Python)</li>
</ol>
<p>å®˜æ–¹ SDK è¿˜æ²¡å‡ºï¼Œåªèƒ½è‡ªå·±æ‰‹æ’¸ä¸€ä¸ª Buffer ç¼“å†²æ± ã€‚é€»è¾‘å¾ˆç®€å•ï¼šæ‹¼ï¼ æ‹¼å®Œäº†å†è¯•ç€è§£ï¼Œè§£ä¸å¼€å°±ç»§ç»­æ‹¼ä¸‹ä¸€ä¸ª chunkã€‚</p>
<p>åºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šä»£ç ã€‚è¿™æ®µä»£ç å¯ä»¥ç›´æ¥ copy ç”¨ï¼Œäº²æµ‹ç¨³å¾—ä¸€åŒ¹ã€‚</p>
<p>Python</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">import</span> json
Â 
<span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_video_safe</span>(<span class="hljs-params">prompt</span>):
    url = <span class="hljs-string">"https://api.seedance.byte/v2/video/generate"</span>
    headers = {<span class="hljs-string">"Authorization"</span>: <span class="hljs-string">"Bearer YOUR_API_KEY"</span>}
    payload = {<span class="hljs-string">"prompt"</span>: prompt, <span class="hljs-string">"stream"</span>: <span class="hljs-literal">True</span>}
Â 
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># å¿…é¡»å¼€å¯ stream=True</span>
        response = requests.post(url, json=payload, headers=headers, stream=<span class="hljs-literal">True</span>)
        
        buffer = <span class="hljs-string">""</span> <span class="hljs-comment"># å®šä¹‰ä¸€ä¸ªç¼“å†²æ± </span>
        
        <span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> response.iter_content(chunk_size=<span class="hljs-number">1024</span>):
            <span class="hljs-keyword">if</span> chunk:
                <span class="hljs-comment"># 1. è§£ç å½“å‰ chunk å¹¶æ‹¼æ¥åˆ° buffer</span>
                part = chunk.decode(<span class="hljs-string">'utf-8'</span>)
                buffer += part
                
                <span class="hljs-comment"># 2. å°è¯•æŒ‰è¡Œåˆ†å‰² (SSE é€šå¸¸ä»¥ \n\n åˆ†éš”)</span>
                <span class="hljs-keyword">while</span> <span class="hljs-string">"\n\n"</span> <span class="hljs-keyword">in</span> buffer:
                    message, buffer = buffer.split(<span class="hljs-string">"\n\n"</span>, <span class="hljs-number">1</span>)
                    
                    <span class="hljs-keyword">if</span> message.startswith(<span class="hljs-string">"data: "</span>):
                        json_str = message.replace(<span class="hljs-string">"data: "</span>, <span class="hljs-string">""</span>)
                        <span class="hljs-keyword">try</span>:
                            <span class="hljs-comment"># 3. å°è¯•è§£æ JSON</span>
                            data = json.loads(json_str)
                            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¿›åº¦: <span class="hljs-subst">{data.get(<span class="hljs-string">'progress'</span>)}</span>%"</span>)
                            
                            <span class="hljs-comment"># 4. è·å–æœ€ç»ˆè§†é¢‘åœ°å€</span>
                            <span class="hljs-keyword">if</span> data.get(<span class="hljs-string">'status'</span>) == <span class="hljs-string">'succeeded'</span>:
                                video_url = data.get(<span class="hljs-string">'output_url'</span>)
                                <span class="hljs-keyword">return</span> optimize_url(video_url)
                                
                        <span class="hljs-keyword">except</span> json.JSONDecodeError:
                            <span class="hljs-comment"># è§£æå¤±è´¥è¯´æ˜æ•°æ®ä¸å®Œæ•´ï¼Œè·³è¿‡ï¼Œç­‰å¾…ä¸‹ä¸€ä¸ª chunk æ‹¼æ¥</span>
                            <span class="hljs-keyword">continue</span>
                            
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¯·æ±‚ç‚¸äº†: <span class="hljs-subst">{e}</span>"</span>)
Â 
<span class="hljs-comment"># ã€ä¼˜åŒ–ç‚¹ã€‘</span>
<span class="hljs-comment"># Seedance åŸç”Ÿå‡ºæ¥çš„è§†é¢‘ URLï¼ˆS3 é“¾æ¥ï¼‰åœ¨å›½å†…è®¿é—®å·¨æ…¢ï¼Œç»å¸¸å¡é¡¿</span>
<span class="hljs-comment"># å»ºè®®åœ¨é…ç½®é‡Œå¥—ä¸€å±‚ä¸ƒç‰›äº‘çš„ CDN æˆ–è€…æ˜¯ Kodo çš„å›æºåœ°å€</span>
<span class="hljs-comment"># å¦åˆ™å‰ç«¯ img æ ‡ç­¾åŠ è½½ä¼šè½¬åœˆè½¬åˆ°æ­»</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">optimize_url</span>(<span class="hljs-params">origin_url</span>):
    <span class="hljs-comment"># è¿™é‡Œè®°å¾—æ¢æˆä½ è‡ªå·±çš„ä¸ƒç‰› CDN åŸŸå</span>
    cdn_host = <span class="hljs-string">"https://cdn-video.your-domain.com"</span> 
    <span class="hljs-comment"># ç®€å•çš„å­—ç¬¦ä¸²æ›¿æ¢ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®ç”¨æ­£åˆ™</span>
    <span class="hljs-keyword">return</span> origin_url.replace(<span class="hljs-string">"https://tos-source.byte.com"</span>, cdn_host)
Â 
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    final_url = generate_video_safe(<span class="hljs-string">"ä¸€åªåœ¨æ•²ä»£ç çš„çŒ«ï¼Œèµ›åšæœ‹å…‹é£æ ¼"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç”Ÿæˆå®Œæ¯•ï¼ŒåŠ é€Ÿé“¾æ¥: <span class="hljs-subst">{final_url}</span>"</span>)
</code></pre>
<p>Â </p>
<ol start="3">
<li>é¿å‘æ€»ç»“</li>
</ol>
<p>1.Â Â ä¸è¦ä¿¡ curl ç¤ºä¾‹ï¼š ç”Ÿäº§ç¯å¢ƒå¿…é¡»å¤„ç† TCP æ‹†åŒ…ç²˜åŒ…é—®é¢˜ã€‚</p>
<p>2.Â Â Buffer æ˜¯å¿…é¡»çš„ï¼š åˆ«æƒ³ç€ç”¨ response.json() ç›´æ¥æ‹¿ç»“æœï¼Œé‚£æ˜¯åŒæ­¥æ¥å£æ‰é…äº«æœ‰çš„å¾…é‡ã€‚</p>
<p>3.Â Â æºç«™å¾ˆæ…¢ï¼š å¦‚æœä½ çš„åº”ç”¨æ˜¯é¢å‘å›½å†…ç”¨æˆ·çš„ï¼Œåƒä¸‡åˆ«ç›´æ¥ä¸‹å‘æºç«™ URLã€‚æˆ‘åœ¨ä»£ç é‡ŒåŠ äº†ä¸ª optimize_url å‡½æ•°ï¼ŒæŠŠåŸŸåæ›¿æ¢æˆäº†ä¸ƒç‰›äº‘çš„ CDN é“¾æ¥ï¼ŒåŠ è½½é€Ÿåº¦ä» 10s å˜æˆäº† 300msï¼Œè¿™æ‰æ˜¯ç”¨æˆ·èƒ½æ¥å—çš„ä½“éªŒã€‚</p>
<p>ä»£ç æ‹¿èµ°ä¸è°¢ï¼Œè®°å¾—ç‚¹ä¸ªèµï¼Œä»Šæ™šåˆ«é€šå®µäº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€çœ‹å°±æ‡‚çš„ Haskell æ•™ç¨‹ - æ ‡å‡†åº“ç±»å‹ç±»]]></title>    <link>https://juejin.cn/post/7604769326224015396</link>    <guid>https://juejin.cn/post/7604769326224015396</guid>    <pubDate>2026-02-10T06:28:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604769326224015396" data-draft-id="7604757482004283455" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€çœ‹å°±æ‡‚çš„ Haskell æ•™ç¨‹ - æ ‡å‡†åº“ç±»å‹ç±»"/> <meta itemprop="keywords" content="Haskell"/> <meta itemprop="datePublished" content="2026-02-10T06:28:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Anita_Sun"/> <meta itemprop="url" content="https://juejin.cn/user/1811635884786839"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€çœ‹å°±æ‡‚çš„ Haskell æ•™ç¨‹ - æ ‡å‡†åº“ç±»å‹ç±»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1811635884786839/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Anita_Sun
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T06:28:10.000Z" title="Tue Feb 10 2026 06:28:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€Haskellæ ‡å‡†åº“ç±»å‹ç±»çš„å®˜æ–¹æŸ¥é˜…æ¸ é“</h2>
<p>Haskellæ ‡å‡†åº“çš„ç±»å‹ç±»ä¸»è¦é›†ä¸­åœ¨ <code>base</code> åŒ…ä¸­ï¼Œä»¥ä¸‹æ˜¯è·å–<strong>å®Œæ•´ç±»å‹ç±»æ¸…å•</strong>çš„æƒå¨é€”å¾„ï¼š</p>
<h3 data-id="heading-1">1. å®˜æ–¹æ–‡æ¡£ï¼ˆæœ€å…¨é¢ï¼‰</h3>
<ul>
<li>
<p><strong>æ ¸å¿ƒå…¥å£</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fhackage.haskell.org%2Fpackage%2Fbase" target="_blank" title="https://hackage.haskell.org/package/base" ref="nofollow noopener noreferrer">Haskell base åŒ…æ–‡æ¡£</a>ï¼ˆé€‰æ‹©å¯¹åº”ç‰ˆæœ¬ï¼Œå¦‚<code>base-4.19.0.0</code>ï¼Œè¿™æ˜¯GHC 9.8çš„é»˜è®¤ç‰ˆæœ¬ï¼‰ï¼›</p>
</li>
<li>
<p><strong>åˆ†ç±»å¯¼èˆª</strong>ï¼šç‚¹å‡»æ–‡æ¡£ä¸­çš„ã€ŒModulesã€ï¼Œæ ¸å¿ƒç±»å‹ç±»åˆ†å¸ƒåœ¨ä»¥ä¸‹æ¨¡å—ä¸­ï¼š</p>
<ul>
<li>

































































<table><thead><tr><th>æ¨¡å—å</th><th>æ ¸å¿ƒç±»å‹ç±»</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><code>Prelude</code></td><td>Eqã€Ordã€Showã€Readã€Numã€Functorã€Monadç­‰</td><td>é¢„åŠ è½½æ ¸å¿ƒç±»å‹ç±»ï¼ˆæ— éœ€å¯¼å…¥ï¼‰</td></tr><tr><td><code>Data.Eq</code></td><td>Eq</td><td>ç›¸ç­‰æ€§åˆ¤æ–­</td></tr><tr><td><code>Data.Ord</code></td><td>Ordã€Ordering</td><td>å¤§å°æ¯”è¾ƒ</td></tr><tr><td><code>Data.Foldable</code></td><td>Foldable</td><td>å¯æŠ˜å å®¹å™¨ï¼ˆéå†/èšåˆï¼‰</td></tr><tr><td><code>Data.Traversable</code></td><td>Traversable</td><td>å¯éå†å®¹å™¨ï¼ˆå¸¦å‰¯ä½œç”¨æ˜ å°„ï¼‰</td></tr><tr><td><code>Control.Monad</code></td><td>Monadã€MonadPlusã€MonadIOç­‰</td><td>å•å­ï¼ˆé¡ºåºè®¡ç®—ï¼‰</td></tr><tr><td><code>Control.Applicative</code></td><td>Applicativeã€Alternative</td><td>åº”ç”¨å‡½å­ï¼ˆå¤šå‚æ•°æ˜ å°„ï¼‰</td></tr><tr><td><code>Data.Functor</code></td><td>Functorã€Contravariant</td><td>å‡½å­ï¼ˆå•å‚æ•°æ˜ å°„ï¼‰</td></tr><tr><td><code>Numeric.Num</code></td><td>Numã€Fractionalã€Integralç­‰</td><td>æ•°å€¼è¿ç®—</td></tr><tr><td><code>Data.Semigroup</code></td><td>Semigroup</td><td>åŠç¾¤ï¼ˆç»“åˆå¾‹äºŒå…ƒæ“ä½œï¼‰</td></tr><tr><td><code>Data.Monoid</code></td><td>Monoid</td><td>å¹ºåŠç¾¤ï¼ˆåŠç¾¤+å•ä½å…ƒï¼‰</td></tr></tbody></table>
</li>
</ul>
</li>
</ul>
<h3 data-id="heading-2">2. GHCiäº¤äº’å¼æŸ¥è¯¢</h3>
<p>åœ¨GHCiä¸­å¯ç›´æ¥æŸ¥è¯¢ç±»å‹ç±»çš„å®šä¹‰ã€å®ä¾‹å’Œæ–‡æ¡£ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">--</span> <span class="hljs-number">1</span>. æŸ¥çœ‹ç±»å‹ç±»çš„å®šä¹‰ï¼ˆå¦‚<span class="hljs-selector-tag">Functor</span>ï¼‰
<span class="hljs-selector-tag">ghci</span>&gt; :<span class="hljs-selector-tag">info</span> <span class="hljs-selector-tag">Functor</span>
<span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">Functor</span> (<span class="hljs-attribute">f </span>:: * -&gt; *) <span class="hljs-selector-tag">where</span>
  <span class="hljs-selector-tag">fmap</span> :: (a -&gt; b) <span class="hljs-selector-tag">-</span>&gt; <span class="hljs-selector-tag">f</span> <span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">-</span>&gt; <span class="hljs-selector-tag">f</span> <span class="hljs-selector-tag">b</span>
  (&lt;$) :: <span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">-</span>&gt; <span class="hljs-selector-tag">f</span> <span class="hljs-selector-tag">b</span> <span class="hljs-selector-tag">-</span>&gt; <span class="hljs-selector-tag">f</span> <span class="hljs-selector-tag">a</span>
  {<span class="hljs-selector-tag">-</span># <span class="hljs-selector-tag">MINIMAL</span> <span class="hljs-selector-tag">fmap</span> <span class="hljs-selector-id">#-</span>}
        <span class="hljs-selector-tag">--</span> <span class="hljs-selector-tag">Defined</span> <span class="hljs-selector-tag">in</span> â€˜<span class="hljs-selector-tag">GHC</span><span class="hljs-selector-class">.Base</span>â€™
<span class="hljs-selector-tag">instance</span> <span class="hljs-selector-tag">Functor</span> <span class="hljs-selector-attr">[]</span> <span class="hljs-selector-tag">--</span> <span class="hljs-selector-tag">Defined</span> <span class="hljs-selector-tag">in</span> â€˜<span class="hljs-selector-tag">GHC</span><span class="hljs-selector-class">.Base</span>â€™
<span class="hljs-selector-tag">instance</span> <span class="hljs-selector-tag">Functor</span> <span class="hljs-selector-tag">Maybe</span> <span class="hljs-selector-tag">--</span> <span class="hljs-selector-tag">Defined</span> <span class="hljs-selector-tag">in</span> â€˜<span class="hljs-selector-tag">GHC</span><span class="hljs-selector-class">.Base</span>â€™
...

<span class="hljs-selector-tag">--</span> <span class="hljs-number">2</span>. æŸ¥çœ‹ç±»å‹ç±»çš„<span class="hljs-selector-tag">Haddock</span>æ–‡æ¡£ï¼ˆéœ€è”ç½‘ï¼‰
<span class="hljs-selector-tag">ghci</span>&gt; :<span class="hljs-selector-tag">doc</span> <span class="hljs-selector-tag">Functor</span>
</code></pre>
<h3 data-id="heading-3">3. ç¦»çº¿æ–‡æ¡£</h3>
<p>å®‰è£…Haskellå¹³å°åï¼Œå¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆæœ¬åœ°æ–‡æ¡£ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># ç”ŸæˆbaseåŒ…çš„æœ¬åœ°HTMLæ–‡æ¡£</span>
cabal haddock <span class="hljs-keyword">base</span> --html
<span class="hljs-meta"># æˆ–ç”¨stack</span>
stack haddock <span class="hljs-keyword">base</span>
</code></pre>
<p>ç”Ÿæˆçš„æ–‡æ¡£ä¼šä¿å­˜åœ¨æœ¬åœ°ç›®å½•ï¼Œå¯ç¦»çº¿æµè§ˆæ‰€æœ‰ç±»å‹ç±»ã€‚</p>
<h2 data-id="heading-4">äºŒã€Haskellæ ‡å‡†åº“æ ¸å¿ƒç±»å‹ç±»å…¨åˆ†ç±»è§£æ</h2>
<p><code>base</code> åŒ…ä¸­çš„ç±»å‹ç±»å¯æŒ‰â€œåŠŸèƒ½åœºæ™¯â€åˆ†ä¸º8å¤§ç±»ï¼Œä»¥ä¸‹æ˜¯<strong>å®Œæ•´æ ¸å¿ƒæ¸…å•</strong> + æ ¸å¿ƒç”¨é€”è§£æï¼š</p>
<h3 data-id="heading-5">1. åŸºç¡€è¡Œä¸ºç±»ï¼ˆPreludeé»˜è®¤åŠ è½½ï¼‰</h3>















































<table><thead><tr><th>ç±»å‹ç±»</th><th>æ ¸å¿ƒæ–¹æ³•</th><th>æ ¸å¿ƒç”¨é€”</th><th>å…¸å‹å®ä¾‹</th></tr></thead><tbody><tr><td><code>Eq</code></td><td><code>(==)</code>ã€<code>(/=)</code></td><td>åˆ¤æ–­ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰</td><td>Intã€Stringã€Maybe a</td></tr><tr><td><code>Ord</code></td><td><code>compare</code>ã€<code>&lt;</code>ã€<code>&lt;=</code>ç­‰</td><td>å¤§å°æ¯”è¾ƒï¼ˆæ’åº/æŸ¥æ‰¾ï¼‰</td><td>æ‰€æœ‰Eqå®ä¾‹ + å¯æ¯”è¾ƒç±»å‹</td></tr><tr><td><code>Show</code></td><td><code>show</code>ã€<code>showList</code></td><td>ç±»å‹è½¬å­—ç¬¦ä¸²ï¼ˆåºåˆ—åŒ–ï¼‰</td><td>å‡ ä¹æ‰€æœ‰æ ‡å‡†ç±»å‹</td></tr><tr><td><code>Read</code></td><td><code>readsPrec</code>ã€<code>readList</code></td><td>å­—ç¬¦ä¸²è½¬ç±»å‹ï¼ˆååºåˆ—åŒ–ï¼‰</td><td>å‡ ä¹æ‰€æœ‰æ ‡å‡†ç±»å‹</td></tr><tr><td><code>Enum</code></td><td><code>succ</code>ã€<code>pred</code>ã€<code>enumFrom</code></td><td>æšä¸¾ç±»å‹ï¼ˆè¿ç»­å€¼ç”Ÿæˆï¼‰</td><td>Intã€Charã€Bool</td></tr><tr><td><code>Bounded</code></td><td><code>minBound</code>ã€<code>maxBound</code></td><td>æœ‰ä¸Šä¸‹ç•Œçš„ç±»å‹</td><td>Intã€Boolã€Char</td></tr></tbody></table>
<h3 data-id="heading-6">2. æ•°å€¼è¿ç®—ç±»ï¼ˆNumericæ¨¡å—ï¼‰</h3>





















































<table><thead><tr><th>ç±»å‹ç±»</th><th>æ ¸å¿ƒæ–¹æ³•</th><th>æ ¸å¿ƒç”¨é€”</th><th>å…¸å‹å®ä¾‹</th></tr></thead><tbody><tr><td><code>Num</code></td><td><code>(+)</code>ã€<code>(-)</code>ã€<code>(*)</code>ã€<code>fromInteger</code></td><td>åŸºç¡€æ•°å€¼è¿ç®—</td><td>Intã€Doubleã€Integer</td></tr><tr><td><code>Fractional</code></td><td><code>(/)</code>ã€<code>fromRational</code></td><td>åˆ†æ•°è¿ç®—ï¼ˆé™¤æ³•ï¼‰</td><td>Doubleã€Floatã€Rational</td></tr><tr><td><code>Floating</code></td><td><code>sin</code>ã€<code>cos</code>ã€<code>exp</code>ç­‰</td><td>æµ®ç‚¹æ•°ä¸“ç”¨è¿ç®—</td><td>Doubleã€Float</td></tr><tr><td><code>Integral</code></td><td><code>div</code>ã€<code>mod</code>ã€<code>toInteger</code></td><td>æ•´æ•°ä¸“ç”¨è¿ç®—</td><td>Intã€Integer</td></tr><tr><td><code>Real</code></td><td><code>toRational</code></td><td>å®æ•°è½¬æ¢ï¼ˆè¿æ¥æ•´æ•°/åˆ†æ•°ï¼‰</td><td>Intã€Doubleã€Rational</td></tr><tr><td><code>RealFrac</code></td><td><code>properFraction</code></td><td>å®æ•°è½¬åˆ†æ•°ï¼ˆå–æ•´/å°æ•°éƒ¨åˆ†ï¼‰</td><td>Doubleã€Float</td></tr><tr><td><code>RealFloat</code></td><td><code>floatRadix</code>ã€<code>exponent</code></td><td>æµ®ç‚¹æ•°åº•å±‚æ“ä½œ</td><td>Doubleã€Float</td></tr></tbody></table>
<h3 data-id="heading-7">3. å‡½å­ç±»ï¼ˆFunctorä½“ç³»ï¼‰</h3>







































































<table><thead><tr><th>ç±»å‹ç±»</th><th>æ ¸å¿ƒæ–¹æ³•</th><th>æ ¸å¿ƒç”¨é€”</th><th>å…¸å‹å®ä¾‹</th></tr></thead><tbody><tr><td><code>Functor</code></td><td><code>fmap</code>ã€<code>&lt;$&gt;</code></td><td>å•å‚æ•°å®¹å™¨æ˜ å°„ï¼ˆæ— å‰¯ä½œç”¨ï¼‰</td><td>[]ã€Maybeã€IOã€Either e</td></tr><tr><td><code>Contravariant</code></td><td><code>contramap</code></td><td>é€†å˜å‡½å­ï¼ˆåå‘æ˜ å°„ï¼‰</td><td>Predicateã€Comparison</td></tr><tr><td><code>Applicative</code></td><td><code>pure</code>ã€<code>&lt;*&gt;</code></td><td>å¤šå‚æ•°å®¹å™¨æ˜ å°„ï¼ˆæ— ä¾èµ–ï¼‰</td><td>[]ã€Maybeã€IO</td></tr><tr><td><code>Alternative</code></td><td><code>empty</code>ã€`&lt;</td><td>&gt;`</td><td>Applicativeçš„â€œå¯é€‰/å¤šå€¼â€æ‰©å±•</td></tr><tr><td><code>Monad</code></td><td><code>(&gt;&gt;=)</code>ã€<code>return</code></td><td>å•å­ï¼ˆé¡ºåºä¾èµ–è®¡ç®—ï¼‰</td><td>[]ã€Maybeã€IOã€Either e</td></tr><tr><td><code>MonadPlus</code></td><td><code>mzero</code>ã€<code>mplus</code></td><td>Monadçš„â€œå¯é€‰/å¤šå€¼â€æ‰©å±•</td><td>[]ã€Maybe</td></tr><tr><td><code>MonadIO</code></td><td><code>liftIO</code></td><td>åµŒå…¥IOæ“ä½œçš„Monad</td><td>IOã€ReaderT r IO</td></tr><tr><td><code>MonadReader</code></td><td><code>ask</code>ã€<code>local</code></td><td>åªè¯»ç¯å¢ƒçš„Monad</td><td>Reader r</td></tr><tr><td><code>MonadWriter</code></td><td><code>tell</code>ã€<code>listen</code></td><td>å†™æ—¥å¿—çš„Monad</td><td>Writer w</td></tr><tr><td><code>MonadState</code></td><td><code>get</code>ã€<code>put</code></td><td>å¸¦çŠ¶æ€çš„Monad</td><td>State s</td></tr></tbody></table>
<h3 data-id="heading-8">4. å®¹å™¨éå†/èšåˆç±»</h3>





























<table><thead><tr><th>ç±»å‹ç±»</th><th>æ ¸å¿ƒæ–¹æ³•</th><th>æ ¸å¿ƒç”¨é€”</th><th>å…¸å‹å®ä¾‹</th></tr></thead><tbody><tr><td><code>Foldable</code></td><td><code>foldMap</code>ã€<code>foldr</code></td><td>å®¹å™¨æŠ˜å ï¼ˆèšåˆ/éå†ï¼‰</td><td>[]ã€Maybeã€Treeã€Map k</td></tr><tr><td><code>Traversable</code></td><td><code>traverse</code>ã€<code>sequenceA</code></td><td>å¸¦å‰¯ä½œç”¨çš„å®¹å™¨éå†</td><td>[]ã€Maybeã€Tree</td></tr><tr><td><code>Traversable1</code></td><td><code>traverse1</code></td><td>éç©ºå®¹å™¨çš„Traversable</td><td>NonEmptyã€Vector</td></tr></tbody></table>
<h3 data-id="heading-9">5. ä»£æ•°ç»“æ„ç±»ï¼ˆSemigroup/Monoidï¼‰</h3>





























<table><thead><tr><th>ç±»å‹ç±»</th><th>æ ¸å¿ƒæ–¹æ³•</th><th>æ ¸å¿ƒç”¨é€”</th><th>å…¸å‹å®ä¾‹</th></tr></thead><tbody><tr><td><code>Semigroup</code></td><td><code>(&lt;&gt;)</code></td><td>ç»“åˆå¾‹äºŒå…ƒæ“ä½œï¼ˆæ— å•ä½å…ƒï¼‰</td><td>Stringã€[a]ã€Sum Int</td></tr><tr><td><code>Monoid</code></td><td><code>mempty</code>ã€<code>mappend</code></td><td>å¹ºåŠç¾¤ï¼ˆSemigroup + å•ä½å…ƒï¼‰</td><td>Stringã€[a]ã€Sum Int</td></tr><tr><td><code>Group</code></td><td><code>invert</code></td><td>ç¾¤ï¼ˆMonoid + é€†å…ƒï¼‰</td><td>Sum Intã€Product Int</td></tr></tbody></table>
<h3 data-id="heading-10">6. å‡½æ•°æ“ä½œç±»</h3>





























<table><thead><tr><th>ç±»å‹ç±»</th><th>æ ¸å¿ƒæ–¹æ³•</th><th>æ ¸å¿ƒç”¨é€”</th><th>å…¸å‹å®ä¾‹</th></tr></thead><tbody><tr><td><code>Arrow</code></td><td><code>arr</code>ã€<code>(&gt;&gt;&gt;)</code></td><td>ç®­å¤´ï¼ˆå‡½æ•°çš„æŠ½è±¡æ‰©å±•ï¼‰</td><td>(-&gt;)ã€Kleisli m</td></tr><tr><td><code>Applicative</code></td><td>ï¼ˆåŒå‰ï¼‰</td><td>å‡½æ•°ä½œä¸ºå®¹å™¨çš„å¤šå‚æ•°æ˜ å°„</td><td>(-&gt;) r</td></tr><tr><td><code>Monad</code></td><td>ï¼ˆåŒå‰ï¼‰</td><td>å‡½æ•°ä½œä¸ºå®¹å™¨çš„é¡ºåºè®¡ç®—</td><td>(-&gt;) r</td></tr></tbody></table>
<h3 data-id="heading-11">7. é”™è¯¯å¤„ç†ç±»</h3>























<table><thead><tr><th>ç±»å‹ç±»</th><th>æ ¸å¿ƒæ–¹æ³•</th><th>æ ¸å¿ƒç”¨é€”</th><th>å…¸å‹å®ä¾‹</th></tr></thead><tbody><tr><td><code>MonadError</code></td><td><code>throwError</code>ã€<code>catchError</code></td><td>å¸¦é”™è¯¯å¤„ç†çš„Monad</td><td>Either eã€ExceptT e m</td></tr><tr><td><code>Exception</code></td><td><code>toException</code>ã€<code>fromException</code></td><td>å¼‚å¸¸ç±»å‹ï¼ˆIOé”™è¯¯ï¼‰</td><td>IOExceptionã€ArithException</td></tr></tbody></table>
<h3 data-id="heading-12">8. å…¶ä»–å®ç”¨ç±»</h3>





























<table><thead><tr><th>ç±»å‹ç±»</th><th>æ ¸å¿ƒæ–¹æ³•</th><th>æ ¸å¿ƒç”¨é€”</th><th>å…¸å‹å®ä¾‹</th></tr></thead><tbody><tr><td><code>IsString</code></td><td><code>fromString</code></td><td>å­—ç¬¦ä¸²å­—é¢é‡è½¬æ¢ï¼ˆOverloadedStringsæ‰©å±•ï¼‰</td><td>Stringã€Textã€ByteString</td></tr><tr><td><code>Generic</code></td><td><code>from</code>ã€<code>to</code></td><td>æ³›å‹ç¼–ç¨‹ï¼ˆè‡ªåŠ¨æ´¾ç”Ÿå®ä¾‹ï¼‰</td><td>æ‰€æœ‰è‡ªå®šä¹‰æ•°æ®ç±»å‹</td></tr><tr><td><code>Lift</code></td><td><code>lift</code></td><td>æ¨¡æ¿Haskellä¸­çš„ç±»å‹æå‡</td><td>åŸºæœ¬ç±»å‹ã€å®¹å™¨ç±»å‹</td></tr></tbody></table>
<h2 data-id="heading-13">ä¸‰ã€å…³é”®è¡¥å……è¯´æ˜</h2>
<h3 data-id="heading-14">1. â€œæ‰€æœ‰ç±»å‹ç±»â€çš„èŒƒå›´ç•Œå®š</h3>
<ul>
<li><strong>æ ‡å‡†åº“æ ¸å¿ƒ</strong>ï¼šä¸Šè¿°æ¸…å•è¦†ç›–äº†<code>base</code>åŒ…ä¸­99%çš„å¸¸ç”¨ç±»å‹ç±»ï¼Œæ˜¯Haskellç¼–ç¨‹çš„æ ¸å¿ƒåŸºç¡€ï¼›</li>
<li><strong>æ‰©å±•ç±»å‹ç±»</strong>ï¼šéƒ¨åˆ†ç±»å‹ç±»ï¼ˆå¦‚<code>MonadTrans</code>ã€<code>MonadCont</code>ï¼‰åœ¨<code>transformers</code>åŒ…ä¸­ï¼Œå±äºæ ‡å‡†åº“çš„æ‰©å±•ï¼Œéœ€æ‰‹åŠ¨å¯¼å…¥ï¼›</li>
<li><strong>è‡ªå®šä¹‰ç±»å‹ç±»</strong>ï¼šå¼€å‘è€…å¯åŸºäºä¸Šè¿°è®¾è®¡æ¨¡å¼è‡ªå®šä¹‰ç±»å‹ç±»ï¼ˆå¦‚ä¸šåŠ¡ç›¸å…³çš„<code>ToJSON</code>/<code>FromJSON</code>åœ¨<code>aeson</code>åŒ…ä¸­ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-15">2. å­¦ä¹ ä¼˜å…ˆçº§å»ºè®®</h3>
<p>æ— éœ€ä¸€æ¬¡æ€§æŒæ¡æ‰€æœ‰ç±»å‹ç±»ï¼ŒæŒ‰ä»¥ä¸‹é¡ºåºå­¦ä¹ ï¼š</p>
<ol>
<li>åŸºç¡€ç±»ï¼ˆEq/Ord/Show/Readï¼‰â†’ æ•°å€¼ç±»ï¼ˆNum/Fractionalï¼‰â†’ å‡½å­ç±»ï¼ˆFunctor/Applicative/Monadï¼‰ï¼›</li>
<li>å®¹å™¨ç±»ï¼ˆFoldable/Traversableï¼‰â†’ ä»£æ•°ç»“æ„ç±»ï¼ˆSemigroup/Monoidï¼‰â†’ é«˜çº§Monadï¼ˆMonadReader/MonadStateï¼‰ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Canvas é«˜æ€§èƒ½è¡¨æ ¼ç»„ä»¶æŠ€æœ¯è¯¦è§£]]></title>    <link>https://juejin.cn/post/7604757482004070463</link>    <guid>https://juejin.cn/post/7604757482004070463</guid>    <pubDate>2026-02-10T05:49:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604757482004070463" data-draft-id="7604757482003988543" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Canvas é«˜æ€§èƒ½è¡¨æ ¼ç»„ä»¶æŠ€æœ¯è¯¦è§£"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-10T05:49:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Hashan"/> <meta itemprop="url" content="https://juejin.cn/user/3523276916662526"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Canvas é«˜æ€§èƒ½è¡¨æ ¼ç»„ä»¶æŠ€æœ¯è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3523276916662526/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Hashan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T05:49:00.000Z" title="Tue Feb 10 2026 05:49:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Canvas é«˜æ€§èƒ½è¡¨æ ¼ç»„ä»¶æŠ€æœ¯è¯¦è§£</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œå½“éœ€è¦æ¸²æŸ“å¤§é‡æ•°æ®çš„è¡¨æ ¼æ—¶ï¼Œä¼ ç»Ÿçš„ DOM æ¸²æŸ“æ–¹æ¡ˆä¼šé‡åˆ°ä¸¥é‡çš„æ€§èƒ½ç“¶é¢ˆã€‚æ¯ä¸ªå•å…ƒæ ¼éƒ½æ˜¯ä¸€ä¸ª DOM èŠ‚ç‚¹ï¼Œå½“æ•°æ®é‡è¾¾åˆ°æ•°ä¸‡è¡Œæ—¶ï¼Œé¡µé¢ä¼šå˜å¾—å¡é¡¿ç”šè‡³å´©æºƒã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥å‰–æä¸€ä¸ªåŸºäº Canvas çš„é«˜æ€§èƒ½è™šæ‹Ÿè¡¨æ ¼ç»„ä»¶ â€”â€” <code>CanvasTable</code>ï¼Œå¸¦ä½ ç†è§£å…¶è®¾è®¡åŸç†ã€å®ç°ç»†èŠ‚å’Œæ€§èƒ½ä¼˜åŒ–ç­–ç•¥ã€‚</p>
<hr/>
<h3 data-id="heading-2">ä¸€ã€ä¸ºä»€ä¹ˆé€‰æ‹© Canvas æ¸²æŸ“è¡¨æ ¼ï¼Ÿ</h3>
<h4 data-id="heading-3">1.1 DOM æ–¹æ¡ˆçš„ç“¶é¢ˆ</h4>
<p>ä¼ ç»Ÿ DOM è¡¨æ ¼æ¸²æŸ“å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>

























<table><thead><tr><th>é—®é¢˜</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>DOM èŠ‚ç‚¹è¿‡å¤š</td><td>10000 è¡Œ Ã— 10 åˆ— = 100000 ä¸ª DOM èŠ‚ç‚¹</td></tr><tr><td>å†…å­˜å ç”¨é«˜</td><td>æ¯ä¸ª DOM èŠ‚ç‚¹éƒ½æºå¸¦å¤§é‡å±æ€§å’Œæ–¹æ³•</td></tr><tr><td>é‡æ’é‡ç»˜ä»£ä»·å¤§</td><td>æ»šåŠ¨æ—¶é¢‘ç¹è§¦å‘å¸ƒå±€è®¡ç®—</td></tr><tr><td>äº‹ä»¶ç»‘å®šå¼€é”€</td><td>éœ€è¦ä¸ºå¤§é‡å…ƒç´ ç»‘å®šäº‹ä»¶æˆ–ä½¿ç”¨äº‹ä»¶å§”æ‰˜</td></tr></tbody></table>
<h4 data-id="heading-4">1.2 Canvas æ–¹æ¡ˆçš„ä¼˜åŠ¿</h4>
<p>Canvas æœ¬è´¨ä¸Šæ˜¯ä¸€å—ã€Œç”»å¸ƒã€ï¼Œæ‰€æœ‰å†…å®¹éƒ½æ˜¯åƒç´ çº§ç»˜åˆ¶ï¼š</p>
<ul>
<li><strong>å•ä¸€ DOM èŠ‚ç‚¹</strong>ï¼šä¸ç®¡å¤šå°‘æ•°æ®ï¼ŒCanvas å§‹ç»ˆæ˜¯ä¸€ä¸ª <code>&lt;canvas&gt;</code> å…ƒç´ </li>
<li><strong>æŒ‰éœ€ç»˜åˆ¶</strong>ï¼šåªç»˜åˆ¶å¯è§†åŒºåŸŸå†…çš„å•å…ƒæ ¼ï¼ˆè™šæ‹Ÿæ»šåŠ¨ï¼‰</li>
<li><strong>é«˜æ•ˆæ›´æ–°</strong>ï¼šé€šè¿‡ <code>requestAnimationFrame</code> æ‰¹é‡æ›´æ–°</li>
<li><strong>åˆ†å±‚æ¸²æŸ“</strong>ï¼šä¸åŒæ›´æ–°é¢‘ç‡çš„å†…å®¹åˆ†å¼€ç»˜åˆ¶ï¼Œå‡å°‘é‡ç»˜èŒƒå›´</li>
</ul>
<h4 data-id="heading-5">1.3 æ¶æ„è®¾è®¡å›¾</h4>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Â  Â  Â  Â  Â  Â  Â  Â  Â   CanvasTable ç»„ä»¶ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” Â  â”‚
â”‚  â”‚ Â  Â  Â  Â  Â  Â  Interaction Layer (z-index: <span class="hljs-number">3</span>) Â  Â  Â  â”‚ Â  â”‚
â”‚  â”‚ Â  Â  Â  Â  Â  Â  é€‰ä¸­æ¡†ã€Hover é«˜äº®æ•ˆæœ Â  Â  Â  Â  Â  Â  Â  â”‚ Â  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ Â  â”‚
â”‚  â”‚ Â  Â  Â  Â  Â  Â  <span class="hljs-attribute">Content</span> Layer (z-index: <span class="hljs-number">2</span>) Â  Â  Â  Â  Â  â”‚ Â  â”‚
â”‚  â”‚ Â  Â  Â  Â  Â  Â  å•å…ƒæ ¼æ–‡æœ¬ã€è¡¨å¤´ã€å†»ç»“åˆ— Â  Â  Â  Â  Â  Â  â”‚ Â  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ Â  â”‚
â”‚  â”‚ Â  Â  Â  Â  Â  Â  Base Layer (z-index: <span class="hljs-number">1</span>) Â  Â  Â  Â  Â  Â   â”‚ Â  â”‚
â”‚  â”‚ Â  Â  Â  Â  Â  Â  èƒŒæ™¯è‰²ã€æ–‘é©¬çº¹ã€ç½‘æ ¼çº¿ Â  Â  Â  Â  Â  Â  Â  â”‚ Â  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Â  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” Â  â”‚
â”‚  â”‚ Â  Â  Â  Â  Â  Â  Scroll Container (z-index: <span class="hljs-number">4</span>) Â  Â  Â   â”‚ Â  â”‚
â”‚  â”‚ Â  Â  Â  Â  Â  Â  æ»šåŠ¨äº‹ä»¶æ•è· + åŸç”Ÿæ»šåŠ¨æ¡ Â  Â  Â  Â  Â   â”‚ Â  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Â  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h3 data-id="heading-6">äºŒã€Template ç»“æ„è§£æ</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"canvas-container"</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"containerRef"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"canvas-table-container"</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"containerStyle"</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">&lt;!-- åº•å±‚ Canvasï¼šèƒŒæ™¯ã€ç½‘æ ¼çº¿ï¼ˆå¾ˆå°‘å˜åŒ–ï¼‰ --&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"baseCanvasRef"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"layer-base"</span> /&gt;</span>
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">&lt;!-- ä¸­å±‚ Canvasï¼šå•å…ƒæ ¼å†…å®¹ï¼ˆæ»šåŠ¨æ—¶æ›´æ–°ï¼‰ --&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"contentCanvasRef"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"layer-content"</span> /&gt;</span>
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">&lt;!-- é¡¶å±‚ Canvasï¼šé€‰åŒºã€hoverï¼ˆé¢‘ç¹æ›´æ–°ï¼‰ --&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"interactionCanvasRef"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"layer-interaction"</span> /&gt;</span>
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">&lt;!-- æ»šåŠ¨å ä½å±‚ï¼ˆäº§ç”ŸåŸç”Ÿæ»šåŠ¨æ¡ï¼‰ --&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"scrollerRef"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"scroll-container"</span> @<span class="hljs-attr">scroll</span>=<span class="hljs-string">"handleScroll"</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"scroll-phantom"</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"phantomStyle"</span> /&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">&lt;!-- ç¼–è¾‘è¾“å…¥æ¡†ï¼ˆç‚¹å‡»å•å…ƒæ ¼æ—¶æ˜¾ç¤ºï¼‰ --&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"editingCell"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"editorRef"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"editValue"</span> 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">class</span>=<span class="hljs-string">"cell-editor"</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"editorStyle"</span> /&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<h4 data-id="heading-7">2.1 å››å±‚ç»“æ„è¯¦è§£</h4>



































<table><thead><tr><th>å±‚çº§</th><th>å…ƒç´ </th><th>èŒè´£</th><th>z-index</th></tr></thead><tbody><tr><td>Base Layer</td><td><code>&lt;canvas class="layer-base"&gt;</code></td><td>ç»˜åˆ¶èƒŒæ™¯ã€æ–‘é©¬çº¹ã€ç½‘æ ¼çº¿</td><td>1</td></tr><tr><td>Content Layer</td><td><code>&lt;canvas class="layer-content"&gt;</code></td><td>ç»˜åˆ¶å•å…ƒæ ¼å†…å®¹ã€è¡¨å¤´ã€å†»ç»“åˆ—</td><td>2</td></tr><tr><td>Interaction Layer</td><td><code>&lt;canvas class="layer-interaction"&gt;</code></td><td>ç»˜åˆ¶é€‰ä¸­æ•ˆæœã€æ‚¬åœé«˜äº®</td><td>3</td></tr><tr><td>Scroll Container</td><td><code>&lt;div class="scroll-container"&gt;</code></td><td>æ•è·æ»šåŠ¨äº‹ä»¶ã€æ˜¾ç¤ºåŸç”Ÿæ»šåŠ¨æ¡</td><td>4</td></tr></tbody></table>
<h4 data-id="heading-8">2.2 æ»šåŠ¨å¹½çµå±‚åŸç†</h4>
<p>Canvas æœ¬èº«ä¸ä¼šäº§ç”Ÿæ»šåŠ¨æ¡ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªã€Œå¹½çµå±‚ã€æ¥æ’‘å¼€æ»šåŠ¨åŒºåŸŸï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"scrollerRef"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"scroll-container"</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"scroll-phantom"</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"phantomStyle"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<ul>
<li><code>scroll-container</code>: è®¾ç½® <code>overflow: auto</code>ï¼Œä¼šæ ¹æ®å†…éƒ¨å†…å®¹äº§ç”Ÿæ»šåŠ¨æ¡</li>
<li><code>scroll-phantom</code>: ä¸€ä¸ªç©ºçš„ divï¼Œå…¶å°ºå¯¸ç­‰äºè¡¨æ ¼çš„æ€»å®½é«˜ï¼ˆ<code>totalWidth Ã— totalHeight</code>ï¼‰</li>
<li>ç”¨æˆ·æ»šåŠ¨æ—¶ï¼Œæˆ‘ä»¬ç›‘å¬ <code>scroll</code> äº‹ä»¶ï¼Œè·å– <code>scrollLeft</code> å’Œ <code>scrollTop</code>ï¼Œç„¶åé‡æ–°ç»˜åˆ¶ Canvas</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> phantomStyle = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> ({
 Â  Â <span class="hljs-attr">width</span>: <span class="hljs-string">`<span class="hljs-subst">${totalWidth.value}</span>px`</span>, Â  <span class="hljs-comment">// æ‰€æœ‰åˆ—å®½ä¹‹å’Œ</span>
 Â  Â <span class="hljs-attr">height</span>: <span class="hljs-string">`<span class="hljs-subst">${totalHeight.value}</span>px`</span> Â <span class="hljs-comment">// æ•°æ®è¡Œæ•° Ã— è¡Œé«˜ + è¡¨å¤´é«˜åº¦</span>
}))
</code></pre>
<h4 data-id="heading-9">2.3 ä¸ºä»€ä¹ˆä½¿ç”¨åŸç”Ÿæ»šåŠ¨æ¡ï¼Ÿ</h4>
<ul>
<li><strong>ä¸€è‡´çš„ç”¨æˆ·ä½“éªŒ</strong>ï¼šåŸç”Ÿæ»šåŠ¨æ¡ç¬¦åˆç”¨æˆ·ä¹ æƒ¯</li>
<li><strong>ç§»åŠ¨ç«¯æ”¯æŒ</strong>ï¼šåŸç”Ÿæ»šåŠ¨æ”¯æŒè§¦æ‘¸æ»‘åŠ¨å’Œæƒ¯æ€§æ»šåŠ¨</li>
<li><strong>æ— éœ€è‡ªå®ç°</strong>ï¼šä¸ç”¨æ‰‹åŠ¨è®¡ç®—æ»šåŠ¨æ¡ä½ç½®å’Œæ‹–æ‹½é€»è¾‘</li>
</ul>
<hr/>
<h3 data-id="heading-10">ä¸‰ã€Props ä¸ç±»å‹å®šä¹‰</h3>
<h4 data-id="heading-11">3.1 Column æ¥å£</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Column</span> {
 Â  Â <span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span> Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æ•°æ®å­—æ®µå</span>
 Â  Â <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span> Â  Â  Â  Â  Â  Â <span class="hljs-comment">// è¡¨å¤´æ˜¾ç¤ºæ–‡å­—</span>
 Â  Â <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span> Â  Â  Â  Â  Â  Â <span class="hljs-comment">// åˆ—å®½ï¼ˆåƒç´ ï¼‰</span>
 Â  Â align?: <span class="hljs-string">'left'</span> | <span class="hljs-string">'center'</span> | <span class="hljs-string">'right'</span> Â <span class="hljs-comment">// æ–‡æœ¬å¯¹é½æ–¹å¼</span>
 Â  Â formatter?: <span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">any</span>, row: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-built_in">string</span> Â <span class="hljs-comment">// æ ¼å¼åŒ–å‡½æ•°</span>
 Â  Â editable?: <span class="hljs-built_in">boolean</span> Â  Â  Â  <span class="hljs-comment">// æ˜¯å¦å¯ç¼–è¾‘</span>
}
</code></pre>
<h4 data-id="heading-12">3.2 Props å‚æ•°è¯´æ˜</h4>



























































<table><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>columns</code></td><td><code>Column[]</code></td><td>-</td><td>åˆ—é…ç½®æ•°ç»„ï¼ˆå¿…å¡«ï¼‰</td></tr><tr><td><code>data</code></td><td><code>any[]</code></td><td>-</td><td>æ•°æ®æºï¼ˆå¿…å¡«ï¼‰</td></tr><tr><td><code>width</code></td><td><code>number</code></td><td>800</td><td>è¡¨æ ¼å®½åº¦</td></tr><tr><td><code>height</code></td><td><code>number</code></td><td>400</td><td>è¡¨æ ¼é«˜åº¦</td></tr><tr><td><code>rowHeight</code></td><td><code>number</code></td><td>36</td><td>è¡Œé«˜</td></tr><tr><td><code>headerHeight</code></td><td><code>number</code></td><td>40</td><td>è¡¨å¤´é«˜åº¦</td></tr><tr><td><code>frozenColumns</code></td><td><code>number</code></td><td>1</td><td>å†»ç»“åˆ—æ•°é‡</td></tr><tr><td><code>theme</code></td><td><code>Partial&lt;ThemeConfig&gt;</code></td><td>{}</td><td>ä¸»é¢˜é…ç½®</td></tr></tbody></table>
<h4 data-id="heading-13">3.3 ThemeConfig ä¸»é¢˜é…ç½®</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">interface</span> <span class="hljs-title">ThemeConfig</span> {
 Â  Â headerBgColor: <span class="hljs-built_in">string</span> Â  Â <span class="hljs-comment">// è¡¨å¤´èƒŒæ™¯è‰²ï¼Œé»˜è®¤ #f5f7fa</span>
 Â  Â headerTextColor: <span class="hljs-built_in">string</span> Â <span class="hljs-comment">// è¡¨å¤´æ–‡å­—é¢œè‰²ï¼Œé»˜è®¤ #606266</span>
 Â  Â cellBgColor: <span class="hljs-built_in">string</span> Â  Â  Â <span class="hljs-comment">// å•å…ƒæ ¼èƒŒæ™¯è‰²ï¼Œé»˜è®¤ #ffffff</span>
 Â  Â cellTextColor: <span class="hljs-built_in">string</span> Â  Â <span class="hljs-comment">// å•å…ƒæ ¼æ–‡å­—é¢œè‰²ï¼Œé»˜è®¤ #303133</span>
 Â  Â borderColor: <span class="hljs-built_in">string</span> Â  Â  Â <span class="hljs-comment">// è¾¹æ¡†é¢œè‰²ï¼Œé»˜è®¤ #ebeef5</span>
 Â  Â hoverColor: <span class="hljs-built_in">string</span> Â  Â  Â  <span class="hljs-comment">// æ‚¬åœé¢œè‰²ï¼Œé»˜è®¤ rgba(64, 158, 255, 0.1)</span>
 Â  Â selectedColor: <span class="hljs-built_in">string</span> Â  Â <span class="hljs-comment">// é€‰ä¸­é¢œè‰²ï¼Œé»˜è®¤ rgba(64, 158, 255, 0.15)</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-14">å››ã€è®¡ç®—å±æ€§è¯¦è§£</h3>
<h4 data-id="heading-15">4.1 totalWidth - æ€»å®½åº¦</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> totalWidth = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span>
 Â  Â props.<span class="hljs-property">columns</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, col</span>) =&gt;</span> sum + col.<span class="hljs-property">width</span>, <span class="hljs-number">0</span>)
)
</code></pre>
<p>å°†æ‰€æœ‰åˆ—çš„å®½åº¦ç´¯åŠ ï¼Œå¾—åˆ°è¡¨æ ¼çš„æ€»å®½åº¦ã€‚è¿™ä¸ªå€¼ç”¨äºï¼š</p>
<ul>
<li>è®¾ç½®å¹½çµå±‚çš„å®½åº¦</li>
<li>è®¡ç®—æ°´å¹³æ»šåŠ¨èŒƒå›´</li>
</ul>
<h4 data-id="heading-16">4.2 totalHeight - æ€»é«˜åº¦</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> totalHeight = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span>
 Â  Â props.<span class="hljs-property">data</span>.<span class="hljs-property">length</span> * props.<span class="hljs-property">rowHeight</span> + props.<span class="hljs-property">headerHeight</span>
)
</code></pre>
<p>è®¡ç®—å…¬å¼ï¼š<code>æ•°æ®è¡Œæ•° Ã— è¡Œé«˜ + è¡¨å¤´é«˜åº¦</code></p>
<h4 data-id="heading-17">4.3 frozenWidth - å†»ç»“åˆ—å®½åº¦</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> frozenWidth = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
 Â  Â <span class="hljs-keyword">let</span> width = <span class="hljs-number">0</span>
 Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; props.<span class="hljs-property">frozenColumns</span> &amp;&amp; i &lt; props.<span class="hljs-property">columns</span>.<span class="hljs-property">length</span>; i++) {
 Â  Â  Â  Â <span class="hljs-keyword">const</span> column = props.<span class="hljs-property">columns</span>[i]
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (column) width += column.<span class="hljs-property">width</span>
 Â   }
 Â  Â <span class="hljs-keyword">return</span> width
})
</code></pre>
<p>å†»ç»“åˆ—çš„æ€»å®½åº¦ï¼Œç”¨äºï¼š</p>
<ul>
<li>ç¡®å®šå†»ç»“åŒºåŸŸçš„ç»˜åˆ¶èŒƒå›´</li>
<li>åˆ¤æ–­ç‚¹å‡»ä½ç½®æ˜¯å¦åœ¨å†»ç»“åŒºåŸŸ</li>
</ul>
<h4 data-id="heading-18">4.4 editorStyle - ç¼–è¾‘æ¡†å®šä½</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> editorStyle = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
 Â  Â <span class="hljs-keyword">if</span> (!editingCell.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span> {}
â€‹
 Â  Â <span class="hljs-keyword">const</span> { row, col } = editingCell.<span class="hljs-property">value</span>
 Â  Â <span class="hljs-keyword">const</span> column = props.<span class="hljs-property">columns</span>[col]
 Â  Â <span class="hljs-keyword">if</span> (!column) <span class="hljs-keyword">return</span> {}
â€‹
 Â  Â <span class="hljs-keyword">let</span> x = <span class="hljs-title function_">getColumnX</span>(col)
 Â  Â <span class="hljs-keyword">const</span> y = row * props.<span class="hljs-property">rowHeight</span> + props.<span class="hljs-property">headerHeight</span>
â€‹
 Â  Â <span class="hljs-comment">// å†»ç»“åˆ—å¤–çš„å•å…ƒæ ¼éœ€è¦å‡å»æ»šåŠ¨åç§»</span>
 Â  Â <span class="hljs-keyword">if</span> (col &gt;= props.<span class="hljs-property">frozenColumns</span>) {
 Â  Â  Â  Â x -= scrollLeft.<span class="hljs-property">value</span>
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">return</span> {
 Â  Â  Â  Â <span class="hljs-attr">left</span>: <span class="hljs-string">`<span class="hljs-subst">${x}</span>px`</span>,
 Â  Â  Â  Â <span class="hljs-attr">top</span>: <span class="hljs-string">`<span class="hljs-subst">${y - scrollTop.value}</span>px`</span>,
 Â  Â  Â  Â <span class="hljs-attr">width</span>: <span class="hljs-string">`<span class="hljs-subst">${column.width}</span>px`</span>,
 Â  Â  Â  Â <span class="hljs-attr">height</span>: <span class="hljs-string">`<span class="hljs-subst">${props.rowHeight}</span>px`</span>
 Â   }
})
</code></pre>
<p>ç¼–è¾‘æ¡†éœ€è¦ç²¾ç¡®è¦†ç›–åœ¨è¢«ç¼–è¾‘çš„å•å…ƒæ ¼ä¸Šæ–¹ï¼Œå…³é”®ç‚¹ï¼š</p>
<ul>
<li>è®¡ç®—å•å…ƒæ ¼çš„ X åæ ‡ï¼ˆé€šè¿‡ <code>getColumnX</code>ï¼‰</li>
<li>è®¡ç®—å•å…ƒæ ¼çš„ Y åæ ‡ï¼ˆ<code>è¡Œå· Ã— è¡Œé«˜ + è¡¨å¤´é«˜åº¦</code>ï¼‰</li>
<li>éå†»ç»“åˆ—éœ€è¦å‡å» <code>scrollLeft</code>ï¼Œæ‰€æœ‰è¡Œéœ€è¦å‡å» <code>scrollTop</code></li>
</ul>
<hr/>
<h3 data-id="heading-19">äº”ã€ç”Ÿå‘½å‘¨æœŸä¸åˆå§‹åŒ–</h3>
<h4 data-id="heading-20">5.1 Canvas åˆå§‹åŒ–</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
 Â  Â <span class="hljs-keyword">if</span> (!containerRef.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span>
â€‹
 Â  Â dpr = <span class="hljs-variable language_">window</span>.<span class="hljs-property">devicePixelRatio</span> || <span class="hljs-number">1</span>
â€‹
 Â  Â <span class="hljs-title function_">initCanvas</span>()
 Â  Â <span class="hljs-title function_">bindEvents</span>()
 Â  Â <span class="hljs-title function_">renderAll</span>()
})
</code></pre>
<h5 data-id="heading-21">é«˜æ¸…å±é€‚é…</h5>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">initCanvas</span>(<span class="hljs-params"/>) {
 Â  Â <span class="hljs-keyword">const</span> canvases = [
 Â  Â  Â   { <span class="hljs-attr">ref</span>: baseCanvasRef.<span class="hljs-property">value</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">'base'</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span> },
 Â  Â  Â   { <span class="hljs-attr">ref</span>: contentCanvasRef.<span class="hljs-property">value</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">'content'</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span> },
 Â  Â  Â   { <span class="hljs-attr">ref</span>: interactionCanvasRef.<span class="hljs-property">value</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">'interaction'</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span> }
 Â   ]
â€‹
 Â  Â canvases.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">{ ref: canvas, key }</span>) =&gt;</span> {
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (!canvas) <span class="hljs-keyword">return</span>
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// è®¾ç½® Canvas å®é™…å°ºå¯¸ï¼ˆç‰©ç†åƒç´ ï¼‰</span>
 Â  Â  Â  Â canvas.<span class="hljs-property">width</span> = props.<span class="hljs-property">width</span> * dpr
 Â  Â  Â  Â canvas.<span class="hljs-property">height</span> = props.<span class="hljs-property">height</span> * dpr
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// è®¾ç½® Canvas æ˜¾ç¤ºå°ºå¯¸ï¼ˆCSS åƒç´ ï¼‰</span>
 Â  Â  Â  Â canvas.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">`<span class="hljs-subst">${props.width}</span>px`</span>
 Â  Â  Â  Â canvas.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">`<span class="hljs-subst">${props.height}</span>px`</span>
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>)
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (ctx) {
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// ç¼©æ”¾ä¸Šä¸‹æ–‡ï¼Œä½¿ç»˜åˆ¶å†…å®¹è‡ªåŠ¨é€‚é…é«˜æ¸…å±</span>
 Â  Â  Â  Â  Â  Â ctx.<span class="hljs-title function_">scale</span>(dpr, dpr)
 Â  Â  Â  Â  Â  Â contexts[key] = ctx
 Â  Â  Â   }
 Â   })
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦è¿™æ ·å¤„ç†ï¼Ÿ</strong></p>
<p>åœ¨ Retina ç­‰é«˜æ¸…å±ä¸Šï¼Œ<code>devicePixelRatio</code> é€šå¸¸ä¸º 2 æˆ– 3ã€‚å¦‚æœ Canvas çš„å®é™…å°ºå¯¸ç­‰äº CSS å°ºå¯¸ï¼Œå†…å®¹ä¼šæ˜¾å¾—æ¨¡ç³Šã€‚è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li>Canvas çš„ <code>width/height</code> å±æ€§è®¾ä¸º CSS å°ºå¯¸çš„ <code>dpr</code> å€</li>
<li>é€šè¿‡ CSS å°† Canvas ç¼©å°åˆ°åŸå§‹å°ºå¯¸</li>
<li>åœ¨ç»‘å®šä¸Šä¸‹æ–‡æ—¶ <code>scale(dpr, dpr)</code>ï¼Œè¿™æ ·ç»˜åˆ¶ä»£ç æ— éœ€å…³å¿ƒ dpr</li>
</ol>
<h4 data-id="heading-22">5.2 äº‹ä»¶ç»‘å®šä¸è§£ç»‘</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">bindEvents</span>(<span class="hljs-params"/>) {
 Â  Â <span class="hljs-keyword">const</span> scroller = scrollerRef.<span class="hljs-property">value</span>
 Â  Â <span class="hljs-keyword">if</span> (!scroller) <span class="hljs-keyword">return</span>
â€‹
 Â  Â scroller.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, handleClick)
 Â  Â scroller.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'dblclick'</span>, handleDoubleClick)
 Â  Â scroller.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousemove'</span>, handleMouseMove)
 Â  Â scroller.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mouseleave'</span>, handleMouseLeave)
}
â€‹
<span class="hljs-keyword">function</span> <span class="hljs-title function_">unbindEvents</span>(<span class="hljs-params"/>) {
 Â  Â <span class="hljs-keyword">const</span> scroller = scrollerRef.<span class="hljs-property">value</span>
 Â  Â <span class="hljs-keyword">if</span> (!scroller) <span class="hljs-keyword">return</span>
â€‹
 Â  Â scroller.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'click'</span>, handleClick)
 Â  Â scroller.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'dblclick'</span>, handleDoubleClick)
 Â  Â scroller.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mousemove'</span>, handleMouseMove)
 Â  Â scroller.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mouseleave'</span>, handleMouseLeave)
}
</code></pre>
<p><strong>é‡è¦</strong>: åœ¨ <code>onUnmounted</code> ä¸­å¿…é¡»è§£ç»‘äº‹ä»¶ï¼Œå¦åˆ™ä¼šé€ æˆå†…å­˜æ³„æ¼ã€‚</p>
<h4 data-id="heading-23">5.3 æ•°æ®ç›‘å¬</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-title function_">watch</span>(<span class="hljs-function">() =&gt;</span> props.<span class="hljs-property">data</span>, <span class="hljs-function">() =&gt;</span> {
 Â  Â <span class="hljs-title function_">markDirty</span>(<span class="hljs-string">'base'</span>, <span class="hljs-string">'content'</span>, <span class="hljs-string">'interaction'</span>)
 Â  Â <span class="hljs-title function_">requestRender</span>()
}, { <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span> })
â€‹
<span class="hljs-title function_">watch</span>(<span class="hljs-function">() =&gt;</span> props.<span class="hljs-property">columns</span>, <span class="hljs-function">() =&gt;</span> {
 Â  Â <span class="hljs-title function_">markDirty</span>(<span class="hljs-string">'base'</span>, <span class="hljs-string">'content'</span>, <span class="hljs-string">'interaction'</span>)
 Â  Â <span class="hljs-title function_">requestRender</span>()
}, { <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span> })
</code></pre>
<p>å½“æ•°æ®æˆ–åˆ—é…ç½®å˜åŒ–æ—¶ï¼Œæ ‡è®°æ‰€æœ‰å±‚ä¸ºã€Œè„ã€ï¼Œè¯·æ±‚é‡æ–°æ¸²æŸ“ã€‚</p>
<hr/>
<h3 data-id="heading-24">å…­ã€æ ¸å¿ƒæ¸²æŸ“æ–¹æ³•è¯¦è§£</h3>
<h4 data-id="heading-25">6.1 æ¸²æŸ“æµç¨‹å›¾</h4>
<pre><code class="hljs language-scss" lang="scss"> Â  Â  Â   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 Â  Â  Â   â”‚ Â  <span class="hljs-built_in">requestRender</span>() Â   â”‚
 Â  Â  Â   â”‚  (RAF èŠ‚æµæ§åˆ¶) Â  Â  Â  â”‚
 Â  Â  Â   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 Â  Â  Â  Â  Â  Â  Â  Â  Â  â”‚
 Â  Â  Â  Â  Â  Â  Â  Â  Â  â–¼
 Â  Â  Â   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 Â  Â  Â   â”‚ Â  Â  <span class="hljs-built_in">renderAll</span>() Â  Â   â”‚
 Â  Â  Â   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 Â  Â  Â  Â  Â  Â  Â  Â  Â  â”‚
 Â  Â  Â  Â  Â  Â  Â  Â  Â  â–¼
 Â  Â  Â   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 Â  Â  Â   â”‚ calculateVisibleRangeâ”‚
 Â  Â  Â   â”‚ Â  è®¡ç®—å¯è§†èŒƒå›´ Â  Â  Â   â”‚
 Â  Â  Â   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 Â  Â  Â  Â  Â  Â  Â  Â  Â  â”‚
 Â  Â  Â   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 Â  Â  Â   â”‚ Â  Â  Â  Â   â”‚ Â  Â  Â  Â   â”‚
 Â  Â  Â   â–¼ Â  Â  Â  Â   â–¼ Â  Â  Â  Â   â–¼
 Â  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 Â  â”‚ Base Â   â”‚ â”‚ <span class="hljs-attribute">Content</span> â”‚ â”‚ Interaction â”‚
 Â  â”‚ Layer Â  â”‚ â”‚ Layer Â  â”‚ â”‚ Layer Â  Â  Â  â”‚
 Â  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 Â  â”‚èƒŒæ™¯ Â  Â  â”‚ â”‚å•å…ƒæ ¼ Â  â”‚ â”‚é€‰ä¸­æ¡† Â  Â  Â  â”‚
 Â  â”‚ç½‘æ ¼çº¿ Â  â”‚ â”‚è¡¨å¤´ Â  Â  â”‚ â”‚æ‚¬åœé«˜äº® Â  Â  â”‚
 Â  â”‚ Â  Â  Â  Â  â”‚ â”‚å†»ç»“åˆ— Â  â”‚ â”‚ Â  Â  Â  Â  Â  Â  â”‚
 Â  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-26">6.2 è„æ ‡è®°ä¸æŒ‰éœ€æ¸²æŸ“</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> dirtyFlags = {
 Â  Â <span class="hljs-attr">base</span>: <span class="hljs-literal">true</span>,
 Â  Â <span class="hljs-attr">content</span>: <span class="hljs-literal">true</span>,
 Â  Â <span class="hljs-attr">interaction</span>: <span class="hljs-literal">true</span>
}
â€‹
<span class="hljs-keyword">function</span> <span class="hljs-title function_">markDirty</span>(<span class="hljs-params">...layers: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-string">'base'</span> | <span class="hljs-string">'content'</span> | <span class="hljs-string">'interaction'</span>&gt;</span>) {
 Â  Â layers.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">layer</span> =&gt;</span> {
 Â  Â  Â  Â dirtyFlags[layer] = <span class="hljs-literal">true</span>
 Â   })
}
â€‹
<span class="hljs-keyword">function</span> <span class="hljs-title function_">renderAll</span>(<span class="hljs-params"/>) {
 Â  Â <span class="hljs-keyword">const</span> range = <span class="hljs-title function_">calculateVisibleRange</span>()
â€‹
 Â  Â <span class="hljs-keyword">if</span> (dirtyFlags.<span class="hljs-property">base</span>) {
 Â  Â  Â  Â <span class="hljs-title function_">renderBaseLayer</span>(range)
 Â  Â  Â  Â dirtyFlags.<span class="hljs-property">base</span> = <span class="hljs-literal">false</span>
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">if</span> (dirtyFlags.<span class="hljs-property">content</span>) {
 Â  Â  Â  Â <span class="hljs-title function_">renderContentLayer</span>(range)
 Â  Â  Â  Â dirtyFlags.<span class="hljs-property">content</span> = <span class="hljs-literal">false</span>
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">if</span> (dirtyFlags.<span class="hljs-property">interaction</span>) {
 Â  Â  Â  Â <span class="hljs-title function_">renderInteractionLayer</span>()
 Â  Â  Â  Â dirtyFlags.<span class="hljs-property">interaction</span> = <span class="hljs-literal">false</span>
 Â   }
}
</code></pre>
<p><strong>ä¸åŒæ“ä½œè§¦å‘ä¸åŒå±‚çš„é‡ç»˜</strong>ï¼š</p>















































<table><thead><tr><th>æ“ä½œ</th><th>Base</th><th>Content</th><th>Interaction</th></tr></thead><tbody><tr><td>åˆå§‹åŒ–</td><td>âœ“</td><td>âœ“</td><td>âœ“</td></tr><tr><td>æ»šåŠ¨</td><td>âœ“</td><td>âœ“</td><td>âœ“</td></tr><tr><td>æ•°æ®å˜åŒ–</td><td>âœ“</td><td>âœ“</td><td>âœ“</td></tr><tr><td>é¼ æ ‡æ‚¬åœ</td><td>-</td><td>-</td><td>âœ“</td></tr><tr><td>é€‰ä¸­å•å…ƒæ ¼</td><td>-</td><td>-</td><td>âœ“</td></tr><tr><td>ç¼–è¾‘å®Œæˆ</td><td>-</td><td>âœ“</td><td>-</td></tr></tbody></table>
<h4 data-id="heading-27">6.3 calculateVisibleRange - å¯è§†èŒƒå›´è®¡ç®—</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateVisibleRange</span>(<span class="hljs-params"/>): <span class="hljs-title class_">VisibleRange</span> {
 Â  Â <span class="hljs-keyword">const</span> { rowHeight, headerHeight, columns, data } = props
 Â  Â <span class="hljs-keyword">const</span> bodyHeight = props.<span class="hljs-property">height</span> - headerHeight
â€‹
 Â  Â <span class="hljs-comment">// è¡ŒèŒƒå›´è®¡ç®—</span>
 Â  Â <span class="hljs-keyword">const</span> startRow = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(scrollTop.<span class="hljs-property">value</span> / rowHeight)
 Â  Â <span class="hljs-keyword">const</span> endRow = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(
 Â  Â  Â  Â startRow + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(bodyHeight / rowHeight) + <span class="hljs-number">2</span>, Â <span class="hljs-comment">// +2 ä½œä¸ºç¼“å†²</span>
 Â  Â  Â  Â data.<span class="hljs-property">length</span>
 Â   )
â€‹
 Â  Â <span class="hljs-comment">// åˆ—èŒƒå›´è®¡ç®—</span>
 Â  Â <span class="hljs-keyword">let</span> accWidth = <span class="hljs-number">0</span>
 Â  Â <span class="hljs-keyword">let</span> startCol = <span class="hljs-number">0</span>
 Â  Â <span class="hljs-keyword">let</span> endCol = columns.<span class="hljs-property">length</span>
â€‹
 Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; columns.<span class="hljs-property">length</span>; i++) {
 Â  Â  Â  Â <span class="hljs-keyword">const</span> column = columns[i]
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (!column) <span class="hljs-keyword">continue</span>
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">const</span> colWidth = column.<span class="hljs-property">width</span>
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¯è§åˆ—</span>
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (accWidth + colWidth &gt; scrollLeft.<span class="hljs-property">value</span> &amp;&amp; startCol === <span class="hljs-number">0</span>) {
 Â  Â  Â  Â  Â  Â startCol = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, i - <span class="hljs-number">1</span>) Â <span class="hljs-comment">// -1 ä½œä¸ºç¼“å†²</span>
 Â  Â  Â   }
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// æ‰¾åˆ°æœ€åä¸€ä¸ªå¯è§åˆ—</span>
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (accWidth &gt; scrollLeft.<span class="hljs-property">value</span> + props.<span class="hljs-property">width</span>) {
 Â  Â  Â  Â  Â  Â endCol = i + <span class="hljs-number">1</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">break</span>
 Â  Â  Â   }
â€‹
 Â  Â  Â  Â accWidth += colWidth
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">return</span> { startRow, endRow, startCol, endCol }
}
</code></pre>
<p><strong>è®¡ç®—åŸç†å›¾è§£</strong>ï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang"> Â  Â  Â   scrollTop
 Â  Â  Â  Â  Â   â”‚
 Â  Â  Â  Â  Â   â–¼
 Â  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 Â  â”‚ Â  Â  Â   ä¸å¯è§åŒºåŸŸ Â  Â  Â  Â  Â  Â  Â  â”‚ row <span class="hljs-number">0</span> ~ startRow-<span class="hljs-number">1</span>
 Â  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â—„â”€â”€ startRow
 Â  â”‚ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   â”‚
 Â  â”‚ Â  Â  Â   å¯è§†åŒºåŸŸ Â  Â  Â  Â  Â  Â  Â  Â  â”‚ éœ€è¦ç»˜åˆ¶çš„è¡Œ
 Â  â”‚ Â  Â  Â   (bodyHeight) Â  Â  Â  Â  Â   â”‚
 Â  â”‚ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   â”‚
 Â  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â—„â”€â”€ <span class="hljs-keyword">end</span>Row
 Â  â”‚ Â  Â  Â   ä¸å¯è§åŒºåŸŸ Â  Â  Â  Â  Â  Â  Â  â”‚ <span class="hljs-keyword">end</span>Row ~ data.length
 Â  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â€‹
 Â  scrollLeft
 Â  Â  Â  â”‚
 Â  Â  Â  â–¼
  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”
  â”‚ä¸å¯â”‚ Â  Â   å¯è§†åŒºåŸŸ Â  Â  Â  â”‚ä¸å¯â”‚
  â”‚è§  â”‚ Â  Â  (props.width) Â  â”‚è§  â”‚
  â”‚ Â   â”‚ Â  Â  Â  Â  Â  Â  Â  Â  Â   â”‚ Â   â”‚
  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜
 Â  col col Â  Â  Â  Â  Â  Â  Â  Â  Â  col
 Â  <span class="hljs-number">0</span>~  startCol Â  Â  Â  Â  Â  Â   <span class="hljs-keyword">end</span>Col~
 Â  start-<span class="hljs-number">1</span> Â  Â  Â  Â  Â  Â  Â  Â  Â  length
</code></pre>
<h4 data-id="heading-28">6.4 renderBaseLayer - åº•å±‚æ¸²æŸ“</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">renderBaseLayer</span>(<span class="hljs-params">range: VisibleRange</span>) {
 Â  Â <span class="hljs-keyword">const</span> ctx = contexts.<span class="hljs-property">base</span>
 Â  Â <span class="hljs-keyword">if</span> (!ctx) <span class="hljs-keyword">return</span>
â€‹
 Â  Â ctx.<span class="hljs-title function_">clearRect</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, props.<span class="hljs-property">width</span>, props.<span class="hljs-property">height</span>)
â€‹
 Â  Â <span class="hljs-title function_">drawBackground</span>(ctx, range)
 Â  Â <span class="hljs-title function_">drawGridLines</span>(ctx, range)
}
</code></pre>
<h5 data-id="heading-29">èƒŒæ™¯ç»˜åˆ¶ï¼ˆå«æ–‘é©¬çº¹ï¼‰</h5>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">drawBackground</span>(<span class="hljs-params">ctx: CanvasRenderingContext2D, range: VisibleRange</span>) {
 Â  Â <span class="hljs-keyword">const</span> { startRow, endRow, startCol, endCol } = range
 Â  Â <span class="hljs-keyword">const</span> { rowHeight, headerHeight, columns } = props
â€‹
 Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> row = startRow; row &lt; endRow; row++) {
 Â  Â  Â  Â <span class="hljs-keyword">let</span> x = <span class="hljs-title function_">getColumnX</span>(startCol) - scrollLeft.<span class="hljs-property">value</span>
 Â  Â  Â  Â <span class="hljs-keyword">const</span> y = row * rowHeight + headerHeight - scrollTop.<span class="hljs-property">value</span>
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// å¥‡å¶è¡Œä¸åŒé¢œè‰²ï¼Œå½¢æˆæ–‘é©¬çº¹</span>
 Â  Â  Â  Â <span class="hljs-keyword">const</span> bgColor = row % <span class="hljs-number">2</span> === <span class="hljs-number">0</span> ? theme.<span class="hljs-property">value</span>.<span class="hljs-property">cellBgColor</span> : <span class="hljs-variable constant_">ZEBRA_COLOR</span>
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> col = startCol; col &lt; endCol; col++) {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">const</span> column = columns[col]
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (!column) <span class="hljs-keyword">continue</span>
â€‹
 Â  Â  Â  Â  Â  Â ctx.<span class="hljs-property">fillStyle</span> = bgColor
 Â  Â  Â  Â  Â  Â ctx.<span class="hljs-title function_">fillRect</span>(x, y, column.<span class="hljs-property">width</span>, rowHeight)
 Â  Â  Â  Â  Â  Â x += column.<span class="hljs-property">width</span>
 Â  Â  Â   }
 Â   }
}
</code></pre>
<h5 data-id="heading-30">ç½‘æ ¼çº¿ç»˜åˆ¶</h5>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">drawGridLines</span>(<span class="hljs-params">ctx: CanvasRenderingContext2D, range: VisibleRange</span>) {
 Â  Â <span class="hljs-keyword">const</span> { startRow, endRow, startCol, endCol } = range
 Â  Â <span class="hljs-keyword">const</span> { rowHeight, headerHeight, columns } = props
â€‹
 Â  Â ctx.<span class="hljs-property">strokeStyle</span> = theme.<span class="hljs-property">value</span>.<span class="hljs-property">borderColor</span>
 Â  Â ctx.<span class="hljs-property">lineWidth</span> = <span class="hljs-number">1</span>
â€‹
 Â  Â <span class="hljs-comment">// æ°´å¹³çº¿ï¼šæ¯è¡Œåº•éƒ¨ç”»ä¸€æ¡çº¿</span>
 Â  Â ctx.<span class="hljs-title function_">beginPath</span>()
 Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> row = startRow; row &lt;= endRow; row++) {
 Â  Â  Â  Â <span class="hljs-comment">// +0.5 ç¡®ä¿çº¿æ¡åœ¨åƒç´ è¾¹ç•Œä¸Šï¼Œé¿å…æ¨¡ç³Š</span>
 Â  Â  Â  Â <span class="hljs-keyword">const</span> y = row * rowHeight + headerHeight - scrollTop.<span class="hljs-property">value</span> + <span class="hljs-number">0.5</span>
 Â  Â  Â  Â ctx.<span class="hljs-title function_">moveTo</span>(<span class="hljs-number">0</span>, y)
 Â  Â  Â  Â ctx.<span class="hljs-title function_">lineTo</span>(props.<span class="hljs-property">width</span>, y)
 Â   }
 Â  Â ctx.<span class="hljs-title function_">stroke</span>()
â€‹
 Â  Â <span class="hljs-comment">// å‚ç›´çº¿ï¼šæ¯åˆ—å³ä¾§ç”»ä¸€æ¡çº¿</span>
 Â  Â ctx.<span class="hljs-title function_">beginPath</span>()
 Â  Â <span class="hljs-keyword">let</span> x = <span class="hljs-title function_">getColumnX</span>(startCol) - scrollLeft.<span class="hljs-property">value</span> + <span class="hljs-number">0.5</span>
 Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> col = startCol; col &lt;= endCol; col++) {
 Â  Â  Â  Â ctx.<span class="hljs-title function_">moveTo</span>(x, headerHeight)
 Â  Â  Â  Â ctx.<span class="hljs-title function_">lineTo</span>(x, props.<span class="hljs-property">height</span>)
 Â  Â  Â  Â <span class="hljs-keyword">const</span> column = columns[col]
 Â  Â  Â  Â x += column?.<span class="hljs-property">width</span> || <span class="hljs-number">0</span>
 Â   }
 Â  Â ctx.<span class="hljs-title function_">stroke</span>()
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦ +0.5ï¼Ÿ</strong></p>
<p>Canvas çš„åæ ‡ç³»æ˜¯ä»¥åƒç´ ä¸­å¿ƒä¸ºåŸç‚¹çš„ã€‚å½“ä½ åœ¨æ•´æ•°åæ ‡ç”» 1px çš„çº¿æ—¶ï¼Œçº¿æ¡ä¼šæ¨ªè·¨ä¸¤ä¸ªåƒç´ ï¼Œå¯¼è‡´æ¨¡ç³Šã€‚åŠ  0.5 åï¼Œçº¿æ¡æ­£å¥½è½åœ¨åƒç´ è¾¹ç•Œä¸Šï¼Œæ˜¾å¾—æ¸…æ™°ã€‚</p>
<pre><code class="hljs">æ•´æ•°åæ ‡ï¼ˆæ¨¡ç³Šï¼‰ï¼š Â  Â   +0.5 åæ ‡ï¼ˆæ¸…æ™°ï¼‰ï¼š
 Â  â”‚â–“â–“â”‚ Â  Â  Â  Â  Â  Â  Â  Â  Â   â”‚â–ˆâ–ˆâ”‚
 Â  â”‚â–“â–“â”‚ Â  Â  Â  Â  Â  Â  Â  Â  Â   â”‚  â”‚
</code></pre>
<h4 data-id="heading-31">6.5 renderContentLayer - å†…å®¹å±‚æ¸²æŸ“</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">renderContentLayer</span>(<span class="hljs-params">range: VisibleRange</span>) {
 Â  Â <span class="hljs-keyword">const</span> ctx = contexts.<span class="hljs-property">content</span>
 Â  Â <span class="hljs-keyword">if</span> (!ctx) <span class="hljs-keyword">return</span>
â€‹
 Â  Â ctx.<span class="hljs-title function_">clearRect</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, props.<span class="hljs-property">width</span>, props.<span class="hljs-property">height</span>)
â€‹
 Â  Â <span class="hljs-title function_">drawCells</span>(ctx, range)
 Â  Â <span class="hljs-title function_">drawHeader</span>(ctx, range)
â€‹
 Â  Â <span class="hljs-keyword">if</span> (props.<span class="hljs-property">frozenColumns</span> &gt; <span class="hljs-number">0</span>) {
 Â  Â  Â  Â <span class="hljs-title function_">drawFrozenColumns</span>(ctx, range)
 Â   }
}
</code></pre>
<h5 data-id="heading-32">å•å…ƒæ ¼å†…å®¹ç»˜åˆ¶</h5>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">drawCells</span>(<span class="hljs-params">ctx: CanvasRenderingContext2D, range: VisibleRange</span>) {
 Â  Â <span class="hljs-keyword">const</span> { startRow, endRow, startCol, endCol } = range
 Â  Â <span class="hljs-keyword">const</span> { rowHeight, headerHeight, columns, data } = props
â€‹
 Â  Â ctx.<span class="hljs-property">fillStyle</span> = theme.<span class="hljs-property">value</span>.<span class="hljs-property">cellTextColor</span>
 Â  Â ctx.<span class="hljs-property">font</span> = <span class="hljs-variable constant_">DEFAULT_FONT</span>
 Â  Â ctx.<span class="hljs-property">textBaseline</span> = <span class="hljs-string">'middle'</span> Â <span class="hljs-comment">// å‚ç›´å±…ä¸­</span>
â€‹
 Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> row = startRow; row &lt; endRow; row++) {
 Â  Â  Â  Â <span class="hljs-keyword">const</span> rowData = data[row]
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (!rowData) <span class="hljs-keyword">continue</span>
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">let</span> x = <span class="hljs-title function_">getColumnX</span>(startCol) - scrollLeft.<span class="hljs-property">value</span>
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> col = startCol; col &lt; endCol; col++) {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">const</span> column = columns[col]
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (!column) <span class="hljs-keyword">continue</span>
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">const</span> value = rowData[column.<span class="hljs-property">key</span>]
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">const</span> cellY = row * rowHeight + headerHeight - scrollTop.<span class="hljs-property">value</span>
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// è·å–æ˜¾ç¤ºæ–‡æœ¬</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">let</span> displayText = value?.<span class="hljs-title function_">toString</span>() || <span class="hljs-string">''</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (column.<span class="hljs-property">formatter</span>) {
 Â  Â  Â  Â  Â  Â  Â  Â displayText = column.<span class="hljs-title function_">formatter</span>(value, rowData)
 Â  Â  Â  Â  Â   }
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æ–‡æœ¬æˆªæ–­</span>
 Â  Â  Â  Â  Â  Â displayText = <span class="hljs-title function_">ellipsisText</span>(ctx, displayText, column.<span class="hljs-property">width</span> - <span class="hljs-variable constant_">CELL_PADDING</span> * <span class="hljs-number">2</span>)
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// è®¡ç®—æ–‡æœ¬ X åæ ‡</span>
 Â  Â  Â  Â  Â  Â ctx.<span class="hljs-property">fillStyle</span> = theme.<span class="hljs-property">value</span>.<span class="hljs-property">cellTextColor</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">const</span> textX = <span class="hljs-title function_">getTextX</span>(x, column.<span class="hljs-property">width</span>, column.<span class="hljs-property">align</span>)
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">const</span> textY = cellY + rowHeight / <span class="hljs-number">2</span> Â <span class="hljs-comment">// å‚ç›´å±…ä¸­</span>
â€‹
 Â  Â  Â  Â  Â  Â ctx.<span class="hljs-property">textAlign</span> = column.<span class="hljs-property">align</span> || <span class="hljs-string">'left'</span>
 Â  Â  Â  Â  Â  Â ctx.<span class="hljs-title function_">fillText</span>(displayText, textX, textY)
â€‹
 Â  Â  Â  Â  Â  Â x += column.<span class="hljs-property">width</span>
 Â  Â  Â   }
 Â   }
}
</code></pre>
<h5 data-id="heading-33">è¡¨å¤´ç»˜åˆ¶</h5>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">drawHeader</span>(<span class="hljs-params">ctx: CanvasRenderingContext2D, range: VisibleRange</span>) {
 Â  Â <span class="hljs-keyword">const</span> { startCol, endCol } = range
 Â  Â <span class="hljs-keyword">const</span> { headerHeight, columns } = props
â€‹
 Â  Â <span class="hljs-comment">// èƒŒæ™¯</span>
 Â  Â ctx.<span class="hljs-property">fillStyle</span> = theme.<span class="hljs-property">value</span>.<span class="hljs-property">headerBgColor</span>
 Â  Â ctx.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, props.<span class="hljs-property">width</span>, headerHeight)
â€‹
 Â  Â <span class="hljs-comment">// æ–‡å­—</span>
 Â  Â ctx.<span class="hljs-property">fillStyle</span> = theme.<span class="hljs-property">value</span>.<span class="hljs-property">headerTextColor</span>
 Â  Â ctx.<span class="hljs-property">font</span> = <span class="hljs-variable constant_">HEADER_FONT</span> Â <span class="hljs-comment">// åŠ ç²—å­—ä½“</span>
 Â  Â ctx.<span class="hljs-property">textBaseline</span> = <span class="hljs-string">'middle'</span>
 Â  Â ctx.<span class="hljs-property">textAlign</span> = <span class="hljs-string">'center'</span>
â€‹
 Â  Â <span class="hljs-keyword">let</span> x = <span class="hljs-title function_">getColumnX</span>(startCol) - scrollLeft.<span class="hljs-property">value</span>
â€‹
 Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> col = startCol; col &lt; endCol; col++) {
 Â  Â  Â  Â <span class="hljs-keyword">const</span> column = columns[col]
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (!column) <span class="hljs-keyword">continue</span>
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">const</span> textX = x + column.<span class="hljs-property">width</span> / <span class="hljs-number">2</span> Â <span class="hljs-comment">// æ°´å¹³å±…ä¸­</span>
 Â  Â  Â  Â <span class="hljs-keyword">const</span> textY = headerHeight / <span class="hljs-number">2</span> Â  Â  Â  <span class="hljs-comment">// å‚ç›´å±…ä¸­</span>
â€‹
 Â  Â  Â  Â ctx.<span class="hljs-title function_">fillText</span>(column.<span class="hljs-property">title</span>, textX, textY)
 Â  Â  Â  Â x += column.<span class="hljs-property">width</span>
 Â   }
â€‹
 Â  Â <span class="hljs-comment">// åº•éƒ¨è¾¹æ¡†</span>
 Â  Â ctx.<span class="hljs-property">strokeStyle</span> = theme.<span class="hljs-property">value</span>.<span class="hljs-property">borderColor</span>
 Â  Â ctx.<span class="hljs-property">lineWidth</span> = <span class="hljs-number">1</span>
 Â  Â ctx.<span class="hljs-title function_">beginPath</span>()
 Â  Â ctx.<span class="hljs-title function_">moveTo</span>(<span class="hljs-number">0</span>, headerHeight + <span class="hljs-number">0.5</span>)
 Â  Â ctx.<span class="hljs-title function_">lineTo</span>(props.<span class="hljs-property">width</span>, headerHeight + <span class="hljs-number">0.5</span>)
 Â  Â ctx.<span class="hljs-title function_">stroke</span>()
}
</code></pre>
<h5 data-id="heading-34">å†»ç»“åˆ—ç»˜åˆ¶</h5>
<p>å†»ç»“åˆ—çš„å…³é”®åœ¨äºï¼š<strong>å®ƒä»¬ä¸éšæ°´å¹³æ»šåŠ¨è€Œç§»åŠ¨</strong>ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">drawFrozenColumns</span>(<span class="hljs-params">ctx: CanvasRenderingContext2D, range: VisibleRange</span>) {
 Â  Â <span class="hljs-keyword">const</span> { startRow, endRow } = range
 Â  Â <span class="hljs-keyword">const</span> { rowHeight, headerHeight, columns, data, frozenColumns } = props
â€‹
 Â  Â <span class="hljs-comment">// 1. æ¸…ç©ºå†»ç»“åŒºåŸŸï¼ˆè¦†ç›–ä¹‹å‰ç»˜åˆ¶çš„å†…å®¹ï¼‰</span>
 Â  Â ctx.<span class="hljs-title function_">clearRect</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, frozenWidth.<span class="hljs-property">value</span>, props.<span class="hljs-property">height</span>)
â€‹
 Â  Â <span class="hljs-comment">// 2. ç»˜åˆ¶å†»ç»“åˆ—çš„èƒŒæ™¯</span>
 Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> row = startRow; row &lt; endRow; row++) {
 Â  Â  Â  Â <span class="hljs-keyword">const</span> y = row * rowHeight + headerHeight - scrollTop.<span class="hljs-property">value</span>
 Â  Â  Â  Â <span class="hljs-keyword">const</span> bgColor = row % <span class="hljs-number">2</span> === <span class="hljs-number">0</span> ? theme.<span class="hljs-property">value</span>.<span class="hljs-property">cellBgColor</span> : <span class="hljs-variable constant_">ZEBRA_COLOR</span>
 Â  Â  Â  Â ctx.<span class="hljs-property">fillStyle</span> = bgColor
 Â  Â  Â  Â ctx.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">0</span>, y, frozenWidth.<span class="hljs-property">value</span>, rowHeight)
 Â   }
â€‹
 Â  Â <span class="hljs-comment">// 3. ç»˜åˆ¶å†»ç»“åˆ—çš„å†…å®¹</span>
 Â  Â <span class="hljs-comment">// ... (ä»£ç çœç•¥ï¼Œä¸æ™®é€šå•å…ƒæ ¼ç±»ä¼¼ï¼Œä½† x ä» 0 å¼€å§‹ï¼Œä¸å‡ scrollLeft)</span>
â€‹
 Â  Â <span class="hljs-comment">// 4. ç»˜åˆ¶å†»ç»“åˆ—çš„è¡¨å¤´</span>
 Â  Â ctx.<span class="hljs-property">fillStyle</span> = theme.<span class="hljs-property">value</span>.<span class="hljs-property">headerBgColor</span>
 Â  Â ctx.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, frozenWidth.<span class="hljs-property">value</span>, headerHeight)
 Â  Â <span class="hljs-comment">// ...</span>
â€‹
 Â  Â <span class="hljs-comment">// 5. å³ä¾§é˜´å½±æ•ˆæœï¼ˆæ»šåŠ¨æ—¶æ˜¾ç¤ºï¼‰</span>
 Â  Â <span class="hljs-keyword">if</span> (scrollLeft.<span class="hljs-property">value</span> &gt; <span class="hljs-number">0</span>) {
 Â  Â  Â  Â <span class="hljs-keyword">const</span> gradient = ctx.<span class="hljs-title function_">createLinearGradient</span>(
 Â  Â  Â  Â  Â  Â frozenWidth.<span class="hljs-property">value</span>, <span class="hljs-number">0</span>, Â  Â  Â  Â  Â  <span class="hljs-comment">// èµ·ç‚¹</span>
 Â  Â  Â  Â  Â  Â frozenWidth.<span class="hljs-property">value</span> + <span class="hljs-number">10</span>, <span class="hljs-number">0</span> Â  Â  Â  <span class="hljs-comment">// ç»ˆç‚¹</span>
 Â  Â  Â   )
 Â  Â  Â  Â gradient.<span class="hljs-title function_">addColorStop</span>(<span class="hljs-number">0</span>, <span class="hljs-string">'rgba(0, 0, 0, 0.08)'</span>)
 Â  Â  Â  Â gradient.<span class="hljs-title function_">addColorStop</span>(<span class="hljs-number">1</span>, <span class="hljs-string">'rgba(0, 0, 0, 0)'</span>)
 Â  Â  Â  Â ctx.<span class="hljs-property">fillStyle</span> = gradient
 Â  Â  Â  Â ctx.<span class="hljs-title function_">fillRect</span>(frozenWidth.<span class="hljs-property">value</span>, <span class="hljs-number">0</span>, <span class="hljs-number">10</span>, props.<span class="hljs-property">height</span>)
 Â   }
â€‹
 Â  Â <span class="hljs-comment">// 6. ç»˜åˆ¶ç½‘æ ¼çº¿</span>
 Â  Â <span class="hljs-comment">// ...</span>
}
</code></pre>
<p><strong>å†»ç»“åˆ—ä¸æ™®é€šåˆ—çš„åæ ‡å·®å¼‚</strong>ï¼š</p>




















<table><thead><tr><th>ç±»å‹</th><th>X åæ ‡è®¡ç®—</th><th>Y åæ ‡è®¡ç®—</th></tr></thead><tbody><tr><td>æ™®é€šåˆ—</td><td><code>getColumnX(col) - scrollLeft</code></td><td><code>row * rowHeight + headerHeight - scrollTop</code></td></tr><tr><td>å†»ç»“åˆ—</td><td><code>getColumnX(col)</code>ï¼ˆä¸å‡ scrollLeftï¼‰</td><td><code>row * rowHeight + headerHeight - scrollTop</code></td></tr></tbody></table>
<h4 data-id="heading-35">6.6 renderInteractionLayer - äº¤äº’å±‚æ¸²æŸ“</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">renderInteractionLayer</span>(<span class="hljs-params"/>) {
 Â  Â <span class="hljs-keyword">const</span> ctx = contexts.<span class="hljs-property">interaction</span>
 Â  Â <span class="hljs-keyword">if</span> (!ctx) <span class="hljs-keyword">return</span>
â€‹
 Â  Â ctx.<span class="hljs-title function_">clearRect</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, props.<span class="hljs-property">width</span>, props.<span class="hljs-property">height</span>)
â€‹
 Â  Â <span class="hljs-title function_">drawHover</span>(ctx) Â  Â  Â <span class="hljs-comment">// å…ˆç»˜åˆ¶æ‚¬åœæ•ˆæœ</span>
 Â  Â <span class="hljs-title function_">drawSelection</span>(ctx) Â <span class="hljs-comment">// å†ç»˜åˆ¶é€‰ä¸­æ•ˆæœï¼ˆè¦†ç›–åœ¨æ‚¬åœä¹‹ä¸Šï¼‰</span>
}
</code></pre>
<h5 data-id="heading-36">é€‰ä¸­æ•ˆæœç»˜åˆ¶</h5>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">drawSelection</span>(<span class="hljs-params">ctx: CanvasRenderingContext2D</span>) {
 Â  Â <span class="hljs-keyword">if</span> (!selectedCell.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span>
â€‹
 Â  Â <span class="hljs-keyword">const</span> { row, col } = selectedCell.<span class="hljs-property">value</span>
 Â  Â <span class="hljs-keyword">const</span> { rowHeight, headerHeight, columns, frozenColumns } = props
â€‹
 Â  Â <span class="hljs-keyword">const</span> column = columns[col]
 Â  Â <span class="hljs-keyword">if</span> (!column) <span class="hljs-keyword">return</span>
â€‹
 Â  Â <span class="hljs-keyword">let</span> x = <span class="hljs-title function_">getColumnX</span>(col)
 Â  Â <span class="hljs-keyword">const</span> y = row * rowHeight + headerHeight
â€‹
 Â  Â <span class="hljs-comment">// éå†»ç»“åˆ—éœ€è¦å‡å»æ»šåŠ¨åç§»</span>
 Â  Â <span class="hljs-keyword">if</span> (col &gt;= frozenColumns) {
 Â  Â  Â  Â x -= scrollLeft.<span class="hljs-property">value</span>
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">const</span> canvasY = y - scrollTop.<span class="hljs-property">value</span>
 Â  Â <span class="hljs-keyword">const</span> width = column.<span class="hljs-property">width</span>
 Â  Â <span class="hljs-keyword">const</span> height = rowHeight
â€‹
 Â  Â <span class="hljs-comment">// é€‰ä¸­èƒŒæ™¯</span>
 Â  Â ctx.<span class="hljs-property">fillStyle</span> = theme.<span class="hljs-property">value</span>.<span class="hljs-property">selectedColor</span>
 Â  Â ctx.<span class="hljs-title function_">fillRect</span>(x, canvasY, width, height)
â€‹
 Â  Â <span class="hljs-comment">// é€‰ä¸­è¾¹æ¡†ï¼ˆå†…ç¼© 1pxï¼Œé¿å…è¦†ç›–ç½‘æ ¼çº¿ï¼‰</span>
 Â  Â ctx.<span class="hljs-property">strokeStyle</span> = <span class="hljs-variable constant_">SELECTION_BORDER_COLOR</span>
 Â  Â ctx.<span class="hljs-property">lineWidth</span> = <span class="hljs-number">2</span>
 Â  Â ctx.<span class="hljs-title function_">strokeRect</span>(x + <span class="hljs-number">1</span>, canvasY + <span class="hljs-number">1</span>, width - <span class="hljs-number">2</span>, height - <span class="hljs-number">2</span>)
}
</code></pre>
<h5 data-id="heading-37">æ‚¬åœæ•ˆæœç»˜åˆ¶</h5>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">drawHover</span>(<span class="hljs-params">ctx: CanvasRenderingContext2D</span>) {
 Â  Â <span class="hljs-comment">// å¦‚æœæ²¡æœ‰æ‚¬åœè¡Œï¼Œæˆ–æ‚¬åœè¡Œä¸é€‰ä¸­è¡Œç›¸åŒï¼Œä¸ç»˜åˆ¶</span>
 Â  Â <span class="hljs-keyword">if</span> (hoverRow.<span class="hljs-property">value</span> &lt; <span class="hljs-number">0</span> || selectedCell.<span class="hljs-property">value</span>?.<span class="hljs-property">row</span> === hoverRow.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span>
â€‹
 Â  Â <span class="hljs-keyword">const</span> { rowHeight, headerHeight } = props
 Â  Â <span class="hljs-keyword">const</span> y = hoverRow.<span class="hljs-property">value</span> * rowHeight + headerHeight - scrollTop.<span class="hljs-property">value</span>
â€‹
 Â  Â ctx.<span class="hljs-property">fillStyle</span> = theme.<span class="hljs-property">value</span>.<span class="hljs-property">hoverColor</span>
 Â  Â ctx.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">0</span>, y, props.<span class="hljs-property">width</span>, rowHeight) Â <span class="hljs-comment">// æ•´è¡Œé«˜äº®</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-38">ä¸ƒã€äº‹ä»¶å¤„ç†æœºåˆ¶</h3>
<h4 data-id="heading-39">7.1 åæ ‡è½¬æ¢ï¼šgetCellFromEvent</h4>
<p>Canvas åªæ˜¯ä¸€å¼ å›¾ç‰‡ï¼Œæœ¬èº«æ— æ³•çŸ¥é“ç”¨æˆ·ç‚¹å‡»äº†å“ªä¸ªå•å…ƒæ ¼ã€‚æˆ‘ä»¬éœ€è¦æ ¹æ®é¼ æ ‡åæ ‡è®¡ç®—å‡ºå•å…ƒæ ¼ä½ç½®ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getCellFromEvent</span>(<span class="hljs-params">e: MouseEvent</span>): { <span class="hljs-attr">row</span>: <span class="hljs-built_in">number</span>; <span class="hljs-attr">col</span>: <span class="hljs-built_in">number</span>; <span class="hljs-attr">isHeader</span>: <span class="hljs-built_in">boolean</span> } {
 Â  Â <span class="hljs-keyword">const</span> canvas = interactionCanvasRef.<span class="hljs-property">value</span>
 Â  Â <span class="hljs-keyword">if</span> (!canvas) <span class="hljs-keyword">return</span> { <span class="hljs-attr">row</span>: -<span class="hljs-number">1</span>, <span class="hljs-attr">col</span>: -<span class="hljs-number">1</span>, <span class="hljs-attr">isHeader</span>: <span class="hljs-literal">false</span> }
â€‹
 Â  Â <span class="hljs-comment">// 1. è·å– Canvas ç›¸å¯¹äºè§†å£çš„ä½ç½®</span>
 Â  Â <span class="hljs-keyword">const</span> rect = canvas.<span class="hljs-title function_">getBoundingClientRect</span>()
â€‹
 Â  Â <span class="hljs-comment">// 2. è®¡ç®—é¼ æ ‡åœ¨ Canvas ä¸Šçš„åæ ‡</span>
 Â  Â <span class="hljs-keyword">const</span> canvasX = e.<span class="hljs-property">clientX</span> - rect.<span class="hljs-property">left</span>
 Â  Â <span class="hljs-keyword">const</span> canvasY = e.<span class="hljs-property">clientY</span> - rect.<span class="hljs-property">top</span>
â€‹
 Â  Â <span class="hljs-keyword">const</span> { headerHeight, rowHeight, columns, data, frozenColumns } = props
â€‹
 Â  Â <span class="hljs-comment">// 3. åˆ¤æ–­æ˜¯å¦åœ¨è¡¨å¤´åŒºåŸŸ</span>
 Â  Â <span class="hljs-keyword">const</span> isHeader = canvasY &lt; headerHeight
â€‹
 Â  Â <span class="hljs-comment">// 4. è®¡ç®—è¡Œå·</span>
 Â  Â <span class="hljs-keyword">let</span> row = -<span class="hljs-number">1</span>
 Â  Â <span class="hljs-keyword">if</span> (!isHeader) {
 Â  Â  Â  Â <span class="hljs-comment">// åŠ ä¸Š scrollTop å¾—åˆ°æ•°æ®åæ ‡</span>
 Â  Â  Â  Â <span class="hljs-keyword">const</span> dataY = canvasY - headerHeight + scrollTop.<span class="hljs-property">value</span>
 Â  Â  Â  Â row = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(dataY / rowHeight)
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (row &lt; <span class="hljs-number">0</span> || row &gt;= data.<span class="hljs-property">length</span>) row = -<span class="hljs-number">1</span>
 Â   }
â€‹
 Â  Â <span class="hljs-comment">// 5. è®¡ç®—åˆ—å·</span>
 Â  Â <span class="hljs-keyword">let</span> col = -<span class="hljs-number">1</span>
 Â  Â <span class="hljs-keyword">const</span> isFrozenArea = canvasX &lt; frozenWidth.<span class="hljs-property">value</span>
â€‹
 Â  Â <span class="hljs-comment">// å†»ç»“åŒºåŸŸä¸éœ€è¦åŠ  scrollLeft</span>
 Â  Â <span class="hljs-keyword">const</span> dataX = isFrozenArea ? canvasX : canvasX + scrollLeft.<span class="hljs-property">value</span>
â€‹
 Â  Â <span class="hljs-keyword">let</span> accWidth = <span class="hljs-number">0</span>
 Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; columns.<span class="hljs-property">length</span>; i++) {
 Â  Â  Â  Â <span class="hljs-keyword">const</span> column = columns[i]
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (!column) <span class="hljs-keyword">continue</span>
â€‹
 Â  Â  Â  Â accWidth += column.<span class="hljs-property">width</span>
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (dataX &lt; accWidth) {
 Â  Â  Â  Â  Â  Â col = i
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">break</span>
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">return</span> { row, col, isHeader }
}
</code></pre>
<h4 data-id="heading-40">7.2 ç‚¹å‡»å¤„ç†</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">handleClick</span>(<span class="hljs-params">e: MouseEvent</span>) {
 Â  Â <span class="hljs-keyword">const</span> { row, col, isHeader } = <span class="hljs-title function_">getCellFromEvent</span>(e)
â€‹
 Â  Â <span class="hljs-keyword">if</span> (row === -<span class="hljs-number">1</span> || col === -<span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>
â€‹
 Â  Â <span class="hljs-keyword">const</span> column = props.<span class="hljs-property">columns</span>[col]
 Â  Â <span class="hljs-keyword">if</span> (!column) <span class="hljs-keyword">return</span>
â€‹
 Â  Â <span class="hljs-keyword">if</span> (isHeader) {
 Â  Â  Â  Â <span class="hljs-title function_">emit</span>(<span class="hljs-string">'header-click'</span>, col, column)
 Â   } <span class="hljs-keyword">else</span> {
 Â  Â  Â  Â selectedCell.<span class="hljs-property">value</span> = { row, col }
 Â  Â  Â  Â <span class="hljs-title function_">emit</span>(<span class="hljs-string">'cell-click'</span>, row, col, props.<span class="hljs-property">data</span>[row])
 Â  Â  Â  Â <span class="hljs-title function_">markDirty</span>(<span class="hljs-string">'interaction'</span>) Â <span class="hljs-comment">// åªéœ€é‡ç»˜äº¤äº’å±‚</span>
 Â  Â  Â  Â <span class="hljs-title function_">requestRender</span>()
 Â   }
}
</code></pre>
<h4 data-id="heading-41">7.3 åŒå‡»ç¼–è¾‘</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">handleDoubleClick</span>(<span class="hljs-params">e: MouseEvent</span>) {
 Â  Â <span class="hljs-keyword">const</span> { row, col, isHeader } = <span class="hljs-title function_">getCellFromEvent</span>(e)
â€‹
 Â  Â <span class="hljs-keyword">if</span> (row === -<span class="hljs-number">1</span> || col === -<span class="hljs-number">1</span> || isHeader) <span class="hljs-keyword">return</span>
â€‹
 Â  Â <span class="hljs-keyword">const</span> column = props.<span class="hljs-property">columns</span>[col]
 Â  Â <span class="hljs-keyword">if</span> (!column) <span class="hljs-keyword">return</span>
â€‹
 Â  Â <span class="hljs-keyword">if</span> (column.<span class="hljs-property">editable</span> !== <span class="hljs-literal">false</span>) {
 Â  Â  Â  Â editingCell.<span class="hljs-property">value</span> = { row, col }
 Â  Â  Â  Â <span class="hljs-keyword">const</span> rowData = props.<span class="hljs-property">data</span>[row]
 Â  Â  Â  Â editValue.<span class="hljs-property">value</span> = rowData?.[column.<span class="hljs-property">key</span>]?.<span class="hljs-title function_">toString</span>() || <span class="hljs-string">''</span>
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// ç­‰å¾… DOM æ›´æ–°åèšç„¦è¾“å…¥æ¡†</span>
 Â  Â  Â  Â <span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> {
 Â  Â  Â  Â  Â  Â editorRef.<span class="hljs-property">value</span>?.<span class="hljs-title function_">focus</span>()
 Â  Â  Â  Â  Â  Â editorRef.<span class="hljs-property">value</span>?.<span class="hljs-title function_">select</span>()
 Â  Â  Â   })
 Â   }
â€‹
 Â  Â <span class="hljs-title function_">emit</span>(<span class="hljs-string">'cell-double-click'</span>, row, col, props.<span class="hljs-property">data</span>[row])
}
</code></pre>
<hr/>
<h3 data-id="heading-42">å…«ã€æ€§èƒ½ä¼˜åŒ–ä¸“é¢˜</h3>
<h4 data-id="heading-43">8.1 Canvas åˆ†å±‚æ¸²æŸ“</h4>
<p>è¿™æ˜¯æœ¬ç»„ä»¶æœ€æ ¸å¿ƒçš„ä¼˜åŒ–ç­–ç•¥ã€‚ä¸åŒå†…å®¹çš„æ›´æ–°é¢‘ç‡å·®å¼‚å¾ˆå¤§ï¼š</p>

























<table><thead><tr><th>å±‚çº§</th><th>å†…å®¹</th><th>æ›´æ–°é¢‘ç‡</th></tr></thead><tbody><tr><td>Base Layer</td><td>èƒŒæ™¯ã€ç½‘æ ¼çº¿</td><td>æä½ï¼ˆresize æ—¶ï¼‰</td></tr><tr><td>Content Layer</td><td>æ–‡å­—å†…å®¹</td><td>ä¸­ç­‰ï¼ˆæ»šåŠ¨æ—¶ï¼‰</td></tr><tr><td>Interaction Layer</td><td>é€‰ä¸­ã€æ‚¬åœ</td><td>é«˜ï¼ˆé¼ æ ‡ç§»åŠ¨æ—¶ï¼‰</td></tr></tbody></table>
<p><strong>ä¼˜åŒ–æ•ˆæœ</strong>ï¼šå½“ç”¨æˆ·ç§»åŠ¨é¼ æ ‡æ—¶ï¼Œåªéœ€è¦æ¸…ç©ºå¹¶é‡ç»˜ Interaction Layerï¼ŒèƒŒæ™¯å’Œæ–‡å­—å†…å®¹ä¿æŒä¸å˜ã€‚è¿™æ¯”æ¯æ¬¡éƒ½é‡ç»˜æ•´ä¸ª Canvas å¿«å¾—å¤šã€‚</p>
<h4 data-id="heading-44">8.2 requestAnimationFrame èŠ‚æµ</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">requestRender</span>(<span class="hljs-params"/>) {
 Â  Â <span class="hljs-keyword">if</span> (rafId) <span class="hljs-keyword">return</span> Â <span class="hljs-comment">// å¦‚æœå·²æœ‰å¾…æ‰§è¡Œçš„æ¸²æŸ“è¯·æ±‚ï¼Œè·³è¿‡</span>
â€‹
 Â  Â rafId = <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> {
 Â  Â  Â  Â <span class="hljs-title function_">renderAll</span>()
 Â  Â  Â  Â rafId = <span class="hljs-literal">null</span>
 Â   })
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨ RAFï¼Ÿ</strong></p>
<ul>
<li>æµè§ˆå™¨ä¼šåœ¨ä¸‹ä¸€å¸§å¼€å§‹å‰æ‰§è¡Œ RAF å›è°ƒ</li>
<li>å¤šæ¬¡è°ƒç”¨ <code>requestRender()</code> åªä¼šæ‰§è¡Œä¸€æ¬¡æ¸²æŸ“</li>
<li>ä¸å±å¹•åˆ·æ–°ç‡åŒæ­¥ï¼Œé¿å…æ— æ•ˆæ¸²æŸ“</li>
</ul>
<h4 data-id="heading-45">8.3 æ–‡æœ¬æˆªæ–­äºŒåˆ†æŸ¥æ‰¾</h4>
<p>åŸå§‹å®ç°ï¼ˆO(nÂ²) å¤æ‚åº¦ï¼‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// âŒ ä½æ•ˆå®ç°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ellipsisText</span>(<span class="hljs-params">text: <span class="hljs-built_in">string</span>, maxWidth: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">string</span> {
 Â  Â <span class="hljs-keyword">let</span> truncated = text
 Â  Â <span class="hljs-keyword">while</span> (ctx.<span class="hljs-title function_">measureText</span>(truncated + <span class="hljs-string">'...'</span>).<span class="hljs-property">width</span> &gt; maxWidth) {
 Â  Â  Â  Â truncated = truncated.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>) Â <span class="hljs-comment">// æ¯æ¬¡åˆ é™¤ä¸€ä¸ªå­—ç¬¦</span>
 Â   }
 Â  Â <span class="hljs-keyword">return</span> truncated + <span class="hljs-string">'...'</span>
}
</code></pre>
<p>ä¼˜åŒ–å®ç°ï¼ˆO(n log n) å¤æ‚åº¦ï¼‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// âœ… äºŒåˆ†æŸ¥æ‰¾ä¼˜åŒ–</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ellipsisText</span>(<span class="hljs-params">ctx: CanvasRenderingContext2D, text: <span class="hljs-built_in">string</span>, maxWidth: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">string</span> {
 Â  Â <span class="hljs-keyword">if</span> (ctx.<span class="hljs-title function_">measureText</span>(text).<span class="hljs-property">width</span> &lt;= maxWidth) <span class="hljs-keyword">return</span> text
â€‹
 Â  Â <span class="hljs-keyword">const</span> ellipsis = <span class="hljs-string">'...'</span>
 Â  Â <span class="hljs-keyword">const</span> ellipsisWidth = ctx.<span class="hljs-title function_">measureText</span>(ellipsis).<span class="hljs-property">width</span>
â€‹
 Â  Â <span class="hljs-keyword">if</span> (maxWidth &lt;= ellipsisWidth) <span class="hljs-keyword">return</span> ellipsis
â€‹
 Â  Â <span class="hljs-comment">// äºŒåˆ†æŸ¥æ‰¾æœ€ä½³æˆªæ–­ä½ç½®</span>
 Â  Â <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>
 Â  Â <span class="hljs-keyword">let</span> right = text.<span class="hljs-property">length</span>
 Â  Â <span class="hljs-keyword">let</span> result = <span class="hljs-string">''</span>
â€‹
 Â  Â <span class="hljs-keyword">while</span> (left &lt; right) {
 Â  Â  Â  Â <span class="hljs-keyword">const</span> mid = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((left + right + <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>)
 Â  Â  Â  Â <span class="hljs-keyword">const</span> truncated = text.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, mid)
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (ctx.<span class="hljs-title function_">measureText</span>(truncated).<span class="hljs-property">width</span> + ellipsisWidth &lt;= maxWidth) {
 Â  Â  Â  Â  Â  Â result = truncated
 Â  Â  Â  Â  Â  Â left = mid
 Â  Â  Â   } <span class="hljs-keyword">else</span> {
 Â  Â  Â  Â  Â  Â right = mid - <span class="hljs-number">1</span>
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">return</span> result + ellipsis
}
</code></pre>
<p><strong>æ€§èƒ½å¯¹æ¯”</strong>ï¼ˆå‡è®¾æ–‡æœ¬é•¿åº¦ 100ï¼‰ï¼š</p>

















<table><thead><tr><th>æ–¹æ³•</th><th>measureText è°ƒç”¨æ¬¡æ•°</th></tr></thead><tbody><tr><td>é€å­—ç¬¦åˆ é™¤</td><td>æœ€å¤š 100 æ¬¡</td></tr><tr><td>äºŒåˆ†æŸ¥æ‰¾</td><td>æœ€å¤š 7 æ¬¡ (logâ‚‚100 â‰ˆ 7)</td></tr></tbody></table>
<h4 data-id="heading-46">8.4 å¸¸é‡æå–</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// âœ… é¿å…é­”æ³•æ•°å­—ï¼Œä¾¿äºç»´æŠ¤å’Œå¤ç”¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CELL_PADDING</span> = <span class="hljs-number">8</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DEFAULT_FONT</span> = <span class="hljs-string">'14px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">HEADER_FONT</span> = <span class="hljs-string">'bold 14px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">ZEBRA_COLOR</span> = <span class="hljs-string">'#fafafa'</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">SELECTION_BORDER_COLOR</span> = <span class="hljs-string">'rgba(64, 158, 255, 0.8)'</span>
</code></pre>
<h4 data-id="heading-47">8.5 äº‹ä»¶è§£ç»‘</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
 Â  Â <span class="hljs-keyword">if</span> (rafId) <span class="hljs-title function_">cancelAnimationFrame</span>(rafId)
 Â  Â <span class="hljs-title function_">unbindEvents</span>() Â <span class="hljs-comment">// ç§»é™¤äº‹ä»¶ç›‘å¬ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼</span>
})
</code></pre>
<hr/>
<h3 data-id="heading-48">æ¼”ç¤º</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f54aab8fc9842bbb168d14d438b1b7f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGFzaGFu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771307449&amp;x-signature=IAyEECrtyT2CsugBVWMgYuDEss4%3D" alt="lovegif_1770702484032.gif" loading="lazy"/></p>
<h3 data-id="heading-49">æ€»ç»“</h3>
<p>Canvas é«˜æ€§èƒ½è¡¨æ ¼çš„æ ¸å¿ƒæŠ€æœ¯è¦ç‚¹ï¼š</p>
<ol start="0">
<li><strong>è™šæ‹Ÿæ»šåŠ¨</strong>ï¼šåªæ¸²æŸ“å¯è§†åŒºåŸŸå†…çš„å•å…ƒæ ¼</li>
<li><strong>åˆ†å±‚æ¸²æŸ“</strong>ï¼šæŒ‰æ›´æ–°é¢‘ç‡åˆ†ç¦»ä¸º Base/Content/Interaction ä¸‰å±‚</li>
<li><strong>RAF èŠ‚æµ</strong>ï¼šä½¿ç”¨ requestAnimationFrame æ‰¹é‡æ›´æ–°</li>
<li><strong>é«˜æ¸…å±é€‚é…</strong>ï¼šé€šè¿‡ devicePixelRatio å¤„ç† Retina å±å¹•</li>
<li><strong>åæ ‡è½¬æ¢</strong>ï¼šæ­£ç¡®å¤„ç†æ»šåŠ¨åç§»å’Œå†»ç»“åˆ—çš„åæ ‡å·®å¼‚</li>
<li><strong>ç®—æ³•ä¼˜åŒ–</strong>ï¼šæ–‡æœ¬æˆªæ–­ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾</li>
</ol>
<p>é€šè¿‡è¿™äº›æŠ€æœ¯ï¼ŒCanvas è¡¨æ ¼å¯ä»¥è½»æ¾å¤„ç† 10 ä¸‡+ è¡Œæ•°æ®ï¼ŒåŒæ—¶ä¿æŒ 60fps çš„æµç•…æ»šåŠ¨ä½“éªŒã€‚</p>
<hr/>
<h3 data-id="heading-50">é™„å½•ï¼šæš´éœ²çš„æ–¹æ³•</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-title function_">defineExpose</span>({
 Â  Â <span class="hljs-comment">// æ»šåŠ¨åˆ°æŒ‡å®šä½ç½®</span>
 Â  Â <span class="hljs-attr">scrollTo</span>: <span class="hljs-function">(<span class="hljs-params">left?: <span class="hljs-built_in">number</span>, top?: <span class="hljs-built_in">number</span></span>) =&gt;</span> { ... },
 Â  Â 
 Â  Â <span class="hljs-comment">// æ»šåŠ¨åˆ°æŒ‡å®šè¡Œ</span>
 Â  Â <span class="hljs-attr">scrollToRow</span>: <span class="hljs-function">(<span class="hljs-params">rowIndex: <span class="hljs-built_in">number</span></span>) =&gt;</span> { ... },
 Â  Â 
 Â  Â <span class="hljs-comment">// å¼ºåˆ¶åˆ·æ–°</span>
 Â  Â <span class="hljs-attr">refresh</span>: <span class="hljs-function">() =&gt;</span> { ... }
})
</code></pre>
<p><strong>ä½¿ç”¨ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">&lt;script setup&gt;
<span class="hljs-keyword">const</span> tableRef = <span class="hljs-title function_">ref</span>()
â€‹
<span class="hljs-comment">// æ»šåŠ¨åˆ°ç¬¬ 100 è¡Œ</span>
tableRef.<span class="hljs-property">value</span>?.<span class="hljs-title function_">scrollToRow</span>(<span class="hljs-number">100</span>)
â€‹
<span class="hljs-comment">// æ»šåŠ¨åˆ°æŒ‡å®šä½ç½®</span>
tableRef.<span class="hljs-property">value</span>?.<span class="hljs-title function_">scrollTo</span>(<span class="hljs-number">200</span>, <span class="hljs-number">500</span>)
â€‹
<span class="hljs-comment">// å¼ºåˆ¶åˆ·æ–°</span>
tableRef.<span class="hljs-property">value</span>?.<span class="hljs-title function_">refresh</span>()
&lt;/script&gt;
â€‹
&lt;template&gt;
 Â  Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">CanvasTable</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"tableRef"</span> <span class="hljs-attr">:columns</span>=<span class="hljs-string">"columns"</span> <span class="hljs-attr">:data</span>=<span class="hljs-string">"data"</span> /&gt;</span></span>
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-51">å®Œæ•´ä»£ç </h3>
<pre><code class="hljs language-Vue3" lang="Vue3">
&lt;template&gt;
    &lt;div class="canvas-container"&gt;
        &lt;div ref="containerRef" class="canvas-table-container" :style="containerStyle"&gt;
            &lt;!-- åº•å±‚ Canvasï¼šèƒŒæ™¯ã€ç½‘æ ¼çº¿ï¼ˆå¾ˆå°‘å˜åŒ–ï¼‰ --&gt;
            &lt;canvas ref="baseCanvasRef" class="layer-base" /&gt;

            &lt;!-- ä¸­å±‚ Canvasï¼šå•å…ƒæ ¼å†…å®¹ï¼ˆæ»šåŠ¨æ—¶æ›´æ–°ï¼‰ --&gt;
            &lt;canvas ref="contentCanvasRef" class="layer-content" /&gt;

            &lt;!-- é¡¶å±‚ Canvasï¼šé€‰åŒºã€hoverï¼ˆé¢‘ç¹æ›´æ–°ï¼‰ --&gt;
            &lt;canvas ref="interactionCanvasRef" class="layer-interaction" /&gt;

            &lt;!-- æ»šåŠ¨å ä½å±‚ï¼ˆäº§ç”ŸåŸç”Ÿæ»šåŠ¨æ¡ï¼‰ --&gt;
            &lt;div ref="scrollerRef" class="scroll-container" @scroll="handleScroll"&gt;
                &lt;div class="scroll-phantom" :style="phantomStyle" /&gt;
            &lt;/div&gt;

            &lt;!-- ç¼–è¾‘è¾“å…¥æ¡†ï¼ˆç‚¹å‡»å•å…ƒæ ¼æ—¶æ˜¾ç¤ºï¼‰ --&gt;
            &lt;input v-if="editingCell" ref="editorRef" v-model="editValue" class="cell-editor" :style="editorStyle"
                @blur="finishEdit" @keydown.enter="finishEdit" @keydown.escape="cancelEdit" /&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script lang="ts" setup&gt;
import { ref, computed, onMounted, onUnmounted, watch, nextTick } from 'vue'

// ==================== ç±»å‹å®šä¹‰ ====================

/** åˆ—é…ç½®æ¥å£ */
interface Column {
    key: string
    title: string
    width: number
    align?: 'left' | 'center' | 'right'
    formatter?: (value: any, row: any) =&gt; string
    editable?: boolean
}

/** ç»„ä»¶ Props æ¥å£ */
interface Props {
    columns: Column[]
    data: any[]
    width?: number
    height?: number
    rowHeight?: number
    headerHeight?: number
    frozenColumns?: number
    theme?: Partial&lt;ThemeConfig&gt;
}

/** ä¸»é¢˜é…ç½®æ¥å£ */
interface ThemeConfig {
    headerBgColor: string
    headerTextColor: string
    cellBgColor: string
    cellTextColor: string
    borderColor: string
    hoverColor: string
    selectedColor: string
}

/** å¯è§†èŒƒå›´æ¥å£ */
interface VisibleRange {
    startRow: number
    endRow: number
    startCol: number
    endCol: number
}

/** Canvas å±‚çº§ä¸Šä¸‹æ–‡ */
interface CanvasContexts {
    base: CanvasRenderingContext2D | null
    content: CanvasRenderingContext2D | null
    interaction: CanvasRenderingContext2D | null
}

// ==================== å¸¸é‡å®šä¹‰ ====================

/** å•å…ƒæ ¼å†…è¾¹è· */
const CELL_PADDING = 8

/** é»˜è®¤å­—ä½“ */
const DEFAULT_FONT = '14px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'
const HEADER_FONT = 'bold 14px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'

/** æ–‘é©¬çº¹é¢œè‰² */
const ZEBRA_COLOR = '#fafafa'

/** é€‰ä¸­è¾¹æ¡†é¢œè‰² */
const SELECTION_BORDER_COLOR = 'rgba(64, 158, 255, 0.8)'

// ==================== Props å®šä¹‰ ====================

const props = withDefaults(defineProps&lt;Props&gt;(), {
    width: 800,
    height: 400,
    rowHeight: 36,
    headerHeight: 40,
    frozenColumns: 1,
    theme: () =&gt; ({})
})

// ==================== äº‹ä»¶å®šä¹‰ ====================

const emit = defineEmits&lt;{
    (e: 'cell-click', row: number, col: number, data: any): void
    (e: 'cell-double-click', row: number, col: number, data: any): void
    (e: 'header-click', col: number, column: Column): void
    (e: 'selection-change', selection: any): void
    (e: 'scroll', scrollLeft: number, scrollTop: number): void
}&gt;()

// ==================== é»˜è®¤ä¸»é¢˜ ====================

const defaultTheme: ThemeConfig = {
    headerBgColor: '#f5f7fa',
    headerTextColor: '#606266',
    cellBgColor: '#ffffff',
    cellTextColor: '#303133',
    borderColor: '#ebeef5',
    hoverColor: 'rgba(64, 158, 255, 0.1)',
    selectedColor: 'rgba(64, 158, 255, 0.15)'
}

const theme = computed(() =&gt; ({ ...defaultTheme, ...props.theme }))

// ==================== DOM å¼•ç”¨ ====================

const containerRef = ref&lt;HTMLDivElement&gt;()
const baseCanvasRef = ref&lt;HTMLCanvasElement&gt;()
const contentCanvasRef = ref&lt;HTMLCanvasElement&gt;()
const interactionCanvasRef = ref&lt;HTMLCanvasElement&gt;()
const scrollerRef = ref&lt;HTMLDivElement&gt;()
const editorRef = ref&lt;HTMLInputElement&gt;()

// ==================== çŠ¶æ€ ====================

const scrollLeft = ref(0)
const scrollTop = ref(0)
const hoverRow = ref(-1)
const selectedCell = ref&lt;{ row: number; col: number } | null&gt;(null)
const editingCell = ref&lt;{ row: number; col: number } | null&gt;(null)
const editValue = ref('')

// ==================== Canvas ä¸Šä¸‹æ–‡ ====================

const contexts: CanvasContexts = {
    base: null,
    content: null,
    interaction: null
}
let dpr = 1
let rafId: number | null = null

// è„æ ‡è®°ï¼šæ ‡è¯†å“ªäº›å±‚éœ€è¦é‡ç»˜
const dirtyFlags = {
    base: true,
    content: true,
    interaction: true
}

// ==================== è®¡ç®—å±æ€§ ====================

/** æ€»å®½åº¦ */
const totalWidth = computed(() =&gt;
    props.columns.reduce((sum, col) =&gt; sum + col.width, 0)
)

/** æ€»é«˜åº¦ */
const totalHeight = computed(() =&gt;
    props.data.length * props.rowHeight + props.headerHeight
)

/** å®¹å™¨æ ·å¼ */
const containerStyle = computed(() =&gt; ({
    width: `${props.width}px`,
    height: `${props.height}px`
}))

/** å¹½çµå±‚æ ·å¼ï¼ˆæ’‘å¼€æ»šåŠ¨åŒºåŸŸï¼‰ */
const phantomStyle = computed(() =&gt; ({
    width: `${totalWidth.value}px`,
    height: `${totalHeight.value}px`
}))

/** å†»ç»“åˆ—å®½åº¦ */
const frozenWidth = computed(() =&gt; {
    let width = 0
    for (let i = 0; i &lt; props.frozenColumns &amp;&amp; i &lt; props.columns.length; i++) {
        const column = props.columns[i]
        if (column) width += column.width
    }
    return width
})

/** ç¼–è¾‘æ¡†æ ·å¼ */
const editorStyle = computed(() =&gt; {
    if (!editingCell.value) return {}

    const { row, col } = editingCell.value
    const column = props.columns[col]
    if (!column) return {}

    let x = getColumnX(col)
    const y = row * props.rowHeight + props.headerHeight

    // å¦‚æœåœ¨å†»ç»“åˆ—å¤–ï¼Œå‡å»æ»šåŠ¨åç§»
    if (col &gt;= props.frozenColumns) {
        x -= scrollLeft.value
    }

    return {
        left: `${x}px`,
        top: `${y - scrollTop.value}px`,
        width: `${column.width}px`,
        height: `${props.rowHeight}px`
    }
})

// ==================== ç”Ÿå‘½å‘¨æœŸ ====================

onMounted(() =&gt; {
    if (!containerRef.value) return

    dpr = window.devicePixelRatio || 1

    initCanvas()
    bindEvents()
    renderAll()
})

onUnmounted(() =&gt; {
    if (rafId) cancelAnimationFrame(rafId)
    unbindEvents()
})

// ==================== æ•°æ®ç›‘å¬ ====================

watch(() =&gt; props.data, () =&gt; {
    markDirty('base', 'content', 'interaction')
    requestRender()
}, { deep: true })

watch(() =&gt; props.columns, () =&gt; {
    markDirty('base', 'content', 'interaction')
    requestRender()
}, { deep: true })

// ==================== åˆå§‹åŒ–æ–¹æ³• ====================

/**
 * åˆå§‹åŒ–æ‰€æœ‰ Canvas å±‚
 */
function initCanvas() {
    const canvases = [
        { ref: baseCanvasRef.value, key: 'base' as const },
        { ref: contentCanvasRef.value, key: 'content' as const },
        { ref: interactionCanvasRef.value, key: 'interaction' as const }
    ]

    canvases.forEach(({ ref: canvas, key }) =&gt; {
        if (!canvas) return

        // è®¾ç½® Canvas å°ºå¯¸ï¼ˆå¤„ç†é«˜æ¸…å±ï¼‰
        canvas.width = props.width * dpr
        canvas.height = props.height * dpr
        canvas.style.width = `${props.width}px`
        canvas.style.height = `${props.height}px`

        const ctx = canvas.getContext('2d')
        if (ctx) {
            ctx.scale(dpr, dpr)
            contexts[key] = ctx
        }
    })
}

/**
 * ç»‘å®šäº‹ä»¶
 */
function bindEvents() {
    const scroller = scrollerRef.value
    if (!scroller) return

    scroller.addEventListener('click', handleClick)
    scroller.addEventListener('dblclick', handleDoubleClick)
    scroller.addEventListener('mousemove', handleMouseMove)
    scroller.addEventListener('mouseleave', handleMouseLeave)
}

/**
 * è§£ç»‘äº‹ä»¶ï¼ˆé˜²æ­¢å†…å­˜æ³„æ¼ï¼‰
 */
function unbindEvents() {
    const scroller = scrollerRef.value
    if (!scroller) return

    scroller.removeEventListener('click', handleClick)
    scroller.removeEventListener('dblclick', handleDoubleClick)
    scroller.removeEventListener('mousemove', handleMouseMove)
    scroller.removeEventListener('mouseleave', handleMouseLeave)
}

// ==================== æ¸²æŸ“æ§åˆ¶ ====================

/**
 * æ ‡è®°è„å±‚
 */
function markDirty(...layers: Array&lt;'base' | 'content' | 'interaction'&gt;) {
    layers.forEach(layer =&gt; {
        dirtyFlags[layer] = true
    })
}

/**
 * è¯·æ±‚æ¸²æŸ“ï¼ˆä½¿ç”¨ RAF èŠ‚æµï¼‰
 */
function requestRender() {
    if (rafId) return

    rafId = requestAnimationFrame(() =&gt; {
        renderAll()
        rafId = null
    })
}

/**
 * æ¸²æŸ“æ‰€æœ‰è„å±‚
 */
function renderAll() {
    const range = calculateVisibleRange()

    if (dirtyFlags.base) {
        renderBaseLayer(range)
        dirtyFlags.base = false
    }

    if (dirtyFlags.content) {
        renderContentLayer(range)
        dirtyFlags.content = false
    }

    if (dirtyFlags.interaction) {
        renderInteractionLayer()
        dirtyFlags.interaction = false
    }
}

// ==================== å¯è§†èŒƒå›´è®¡ç®— ====================

/**
 * è®¡ç®—å¯è§†èŒƒå›´
 */
function calculateVisibleRange(): VisibleRange {
    const { rowHeight, headerHeight, columns, data } = props
    const bodyHeight = props.height - headerHeight

    // è¡ŒèŒƒå›´ï¼ˆå¤šæ¸²æŸ“2è¡Œä½œä¸ºç¼“å†²ï¼‰
    const startRow = Math.floor(scrollTop.value / rowHeight)
    const endRow = Math.min(
        startRow + Math.ceil(bodyHeight / rowHeight) + 2,
        data.length
    )

    // åˆ—èŒƒå›´
    let accWidth = 0
    let startCol = 0
    let endCol = columns.length

    for (let i = 0; i &lt; columns.length; i++) {
        const column = columns[i]
        if (!column) continue

        const colWidth = column.width

        if (accWidth + colWidth &gt; scrollLeft.value &amp;&amp; startCol === 0) {
            startCol = Math.max(0, i - 1)
        }

        if (accWidth &gt; scrollLeft.value + props.width) {
            endCol = i + 1
            break
        }

        accWidth += colWidth
    }

    return { startRow, endRow, startCol, endCol }
}

// ==================== åº•å±‚æ¸²æŸ“ï¼ˆèƒŒæ™¯ã€ç½‘æ ¼çº¿ï¼‰ ====================

/**
 * æ¸²æŸ“åº•å±‚ï¼šèƒŒæ™¯å’Œç½‘æ ¼çº¿
 */
function renderBaseLayer(range: VisibleRange) {
    const ctx = contexts.base
    if (!ctx) return

    ctx.clearRect(0, 0, props.width, props.height)

    drawBackground(ctx, range)
    drawGridLines(ctx, range)
}

/**
 * ç»˜åˆ¶èƒŒæ™¯ï¼ˆå«æ–‘é©¬çº¹ï¼‰
 */
function drawBackground(ctx: CanvasRenderingContext2D, range: VisibleRange) {
    const { startRow, endRow, startCol, endCol } = range
    const { rowHeight, headerHeight, columns } = props

    for (let row = startRow; row &lt; endRow; row++) {
        let x = getColumnX(startCol) - scrollLeft.value
        const y = row * rowHeight + headerHeight - scrollTop.value

        // æ–‘é©¬çº¹æ•ˆæœ
        const bgColor = row % 2 === 0 ? theme.value.cellBgColor : ZEBRA_COLOR

        for (let col = startCol; col &lt; endCol; col++) {
            const column = columns[col]
            if (!column) continue

            ctx.fillStyle = bgColor
            ctx.fillRect(x, y, column.width, rowHeight)
            x += column.width
        }
    }
}

/**
 * ç»˜åˆ¶ç½‘æ ¼çº¿
 */
function drawGridLines(ctx: CanvasRenderingContext2D, range: VisibleRange) {
    const { startRow, endRow, startCol, endCol } = range
    const { rowHeight, headerHeight, columns } = props

    ctx.strokeStyle = theme.value.borderColor
    ctx.lineWidth = 1

    // æ°´å¹³çº¿
    ctx.beginPath()
    for (let row = startRow; row &lt;= endRow; row++) {
        const y = row * rowHeight + headerHeight - scrollTop.value + 0.5
        ctx.moveTo(0, y)
        ctx.lineTo(props.width, y)
    }
    ctx.stroke()

    // å‚ç›´çº¿
    ctx.beginPath()
    let x = getColumnX(startCol) - scrollLeft.value + 0.5
    for (let col = startCol; col &lt;= endCol; col++) {
        ctx.moveTo(x, headerHeight)
        ctx.lineTo(x, props.height)
        const column = columns[col]
        x += column?.width || 0
    }
    ctx.stroke()
}

// ==================== ä¸­å±‚æ¸²æŸ“ï¼ˆå•å…ƒæ ¼å†…å®¹ï¼‰ ====================

/**
 * æ¸²æŸ“ä¸­å±‚ï¼šå•å…ƒæ ¼å†…å®¹ã€è¡¨å¤´ã€å†»ç»“åˆ—
 */
function renderContentLayer(range: VisibleRange) {
    const ctx = contexts.content
    if (!ctx) return

    ctx.clearRect(0, 0, props.width, props.height)

    drawCells(ctx, range)
    drawHeader(ctx, range)

    if (props.frozenColumns &gt; 0) {
        drawFrozenColumns(ctx, range)
    }
}

/**
 * ç»˜åˆ¶å•å…ƒæ ¼å†…å®¹
 */
function drawCells(ctx: CanvasRenderingContext2D, range: VisibleRange) {
    const { startRow, endRow, startCol, endCol } = range
    const { rowHeight, headerHeight, columns, data } = props

    ctx.fillStyle = theme.value.cellTextColor
    ctx.font = DEFAULT_FONT
    ctx.textBaseline = 'middle'

    for (let row = startRow; row &lt; endRow; row++) {
        const rowData = data[row]
        if (!rowData) continue

        let x = getColumnX(startCol) - scrollLeft.value

        for (let col = startCol; col &lt; endCol; col++) {
            const column = columns[col]
            if (!column) continue

            const value = rowData[column.key]
            const cellY = row * rowHeight + headerHeight - scrollTop.value

            // è·å–æ˜¾ç¤ºæ–‡æœ¬
            let displayText = value?.toString() || ''
            if (column.formatter) {
                displayText = column.formatter(value, rowData)
            }

            // æ–‡æœ¬æˆªæ–­ï¼ˆä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ä¼˜åŒ–ï¼‰
            displayText = ellipsisText(ctx, displayText, column.width - CELL_PADDING * 2)

            // ç»˜åˆ¶æ–‡æœ¬
            ctx.fillStyle = theme.value.cellTextColor
            const textX = getTextX(x, column.width, column.align)
            const textY = cellY + rowHeight / 2

            ctx.textAlign = column.align || 'left'
            ctx.fillText(displayText, textX, textY)

            x += column.width
        }
    }
}

/**
 * ç»˜åˆ¶è¡¨å¤´
 */
function drawHeader(ctx: CanvasRenderingContext2D, range: VisibleRange) {
    const { startCol, endCol } = range
    const { headerHeight, columns } = props

    // èƒŒæ™¯
    ctx.fillStyle = theme.value.headerBgColor
    ctx.fillRect(0, 0, props.width, headerHeight)

    // æ–‡å­—
    ctx.fillStyle = theme.value.headerTextColor
    ctx.font = HEADER_FONT
    ctx.textBaseline = 'middle'
    ctx.textAlign = 'center'

    let x = getColumnX(startCol) - scrollLeft.value

    for (let col = startCol; col &lt; endCol; col++) {
        const column = columns[col]
        if (!column) continue

        const textX = x + column.width / 2
        const textY = headerHeight / 2

        ctx.fillText(column.title, textX, textY)
        x += column.width
    }

    // åº•éƒ¨è¾¹æ¡†
    ctx.strokeStyle = theme.value.borderColor
    ctx.lineWidth = 1
    ctx.beginPath()
    ctx.moveTo(0, headerHeight + 0.5)
    ctx.lineTo(props.width, headerHeight + 0.5)
    ctx.stroke()
}

/**
 * ç»˜åˆ¶å†»ç»“åˆ—
 */
function drawFrozenColumns(ctx: CanvasRenderingContext2D, range: VisibleRange) {
    const { startRow, endRow } = range
    const { rowHeight, headerHeight, columns, data, frozenColumns } = props

    // æ¸…ç©ºå†»ç»“åŒºåŸŸ
    ctx.clearRect(0, 0, frozenWidth.value, props.height)

    // ç»˜åˆ¶èƒŒæ™¯
    for (let row = startRow; row &lt; endRow; row++) {
        const y = row * rowHeight + headerHeight - scrollTop.value
        const bgColor = row % 2 === 0 ? theme.value.cellBgColor : ZEBRA_COLOR
        ctx.fillStyle = bgColor
        ctx.fillRect(0, y, frozenWidth.value, rowHeight)
    }

    // ç»˜åˆ¶å†…å®¹
    ctx.fillStyle = theme.value.cellTextColor
    ctx.font = DEFAULT_FONT
    ctx.textBaseline = 'middle'

    for (let row = startRow; row &lt; endRow; row++) {
        const rowData = data[row]
        if (!rowData) continue

        let x = 0
        const y = row * rowHeight + headerHeight - scrollTop.value

        for (let col = 0; col &lt; frozenColumns &amp;&amp; col &lt; columns.length; col++) {
            const column = columns[col]
            if (!column) continue

            const value = rowData[column.key]
            let displayText = value?.toString() || ''

            if (column.formatter) {
                displayText = column.formatter(value, rowData)
            }

            displayText = ellipsisText(ctx, displayText, column.width - CELL_PADDING * 2)

            const textX = getTextX(x, column.width, column.align)
            ctx.textAlign = column.align || 'left'
            ctx.fillText(displayText, textX, y + rowHeight / 2)

            x += column.width
        }
    }

    // ç»˜åˆ¶è¡¨å¤´
    ctx.fillStyle = theme.value.headerBgColor
    ctx.fillRect(0, 0, frozenWidth.value, headerHeight)

    ctx.fillStyle = theme.value.headerTextColor
    ctx.font = HEADER_FONT
    ctx.textAlign = 'center'

    let headerX = 0
    for (let col = 0; col &lt; frozenColumns &amp;&amp; col &lt; columns.length; col++) {
        const column = columns[col]
        if (!column) continue

        ctx.fillText(column.title, headerX + column.width / 2, headerHeight / 2)
        headerX += column.width
    }

    // å³ä¾§é˜´å½±æ•ˆæœ
    if (scrollLeft.value &gt; 0) {
        const gradient = ctx.createLinearGradient(frozenWidth.value, 0, frozenWidth.value + 10, 0)
        gradient.addColorStop(0, 'rgba(0, 0, 0, 0.08)')
        gradient.addColorStop(1, 'rgba(0, 0, 0, 0)')
        ctx.fillStyle = gradient
        ctx.fillRect(frozenWidth.value, 0, 10, props.height)
    }

    // ç»˜åˆ¶ç½‘æ ¼çº¿
    ctx.strokeStyle = theme.value.borderColor
    ctx.lineWidth = 1

    // å‚ç›´çº¿
    ctx.beginPath()
    let lineX = 0.5
    for (let col = 0; col &lt;= frozenColumns &amp;&amp; col &lt; columns.length; col++) {
        ctx.moveTo(lineX, 0)
        ctx.lineTo(lineX, props.height)
        const column = columns[col]
        lineX += column?.width || 0
    }
    ctx.stroke()

    // æ°´å¹³çº¿
    ctx.beginPath()
    for (let row = startRow; row &lt;= endRow; row++) {
        const lineY = row * rowHeight + headerHeight - scrollTop.value + 0.5
        ctx.moveTo(0, lineY)
        ctx.lineTo(frozenWidth.value, lineY)
    }
    ctx.stroke()
}

// ==================== é¡¶å±‚æ¸²æŸ“ï¼ˆäº¤äº’çŠ¶æ€ï¼‰ ====================

/**
 * æ¸²æŸ“é¡¶å±‚ï¼šé€‰ä¸­æ•ˆæœå’Œæ‚¬åœæ•ˆæœ
 */
function renderInteractionLayer() {
    const ctx = contexts.interaction
    if (!ctx) return

    ctx.clearRect(0, 0, props.width, props.height)

    drawHover(ctx)
    drawSelection(ctx)
}

/**
 * ç»˜åˆ¶é€‰ä¸­æ•ˆæœ
 */
function drawSelection(ctx: CanvasRenderingContext2D) {
    if (!selectedCell.value) return

    const { row, col } = selectedCell.value
    const { rowHeight, headerHeight, columns, frozenColumns } = props

    const column = columns[col]
    if (!column) return

    let x = getColumnX(col)
    const y = row * rowHeight + headerHeight

    // éå†»ç»“åˆ—éœ€è¦å‡å»æ»šåŠ¨åç§»
    if (col &gt;= frozenColumns) {
        x -= scrollLeft.value
    }

    const canvasY = y - scrollTop.value
    const width = column.width
    const height = rowHeight

    // é€‰ä¸­èƒŒæ™¯
    ctx.fillStyle = theme.value.selectedColor
    ctx.fillRect(x, canvasY, width, height)

    // é€‰ä¸­è¾¹æ¡†
    ctx.strokeStyle = SELECTION_BORDER_COLOR
    ctx.lineWidth = 2
    ctx.strokeRect(x + 1, canvasY + 1, width - 2, height - 2)
}

/**
 * ç»˜åˆ¶æ‚¬åœæ•ˆæœ
 */
function drawHover(ctx: CanvasRenderingContext2D) {
    if (hoverRow.value &lt; 0 || selectedCell.value?.row === hoverRow.value) return

    const { rowHeight, headerHeight } = props
    const y = hoverRow.value * rowHeight + headerHeight - scrollTop.value

    ctx.fillStyle = theme.value.hoverColor
    ctx.fillRect(0, y, props.width, rowHeight)
}

// ==================== äº‹ä»¶å¤„ç† ====================

/**
 * æ»šåŠ¨å¤„ç†
 */
function handleScroll(e: Event) {
    const target = e.target as HTMLDivElement
    scrollLeft.value = target.scrollLeft
    scrollTop.value = target.scrollTop

    emit('scroll', scrollLeft.value, scrollTop.value)

    // æ»šåŠ¨æ—¶åªéœ€è¦é‡ç»˜å†…å®¹å±‚å’Œäº¤äº’å±‚
    markDirty('base', 'content', 'interaction')
    requestRender()
}

/**
 * ç‚¹å‡»äº‹ä»¶
 */
function handleClick(e: MouseEvent) {
    const { row, col, isHeader } = getCellFromEvent(e)

    if (row === -1 || col === -1) return

    const column = props.columns[col]
    if (!column) return

    if (isHeader) {
        emit('header-click', col, column)
    } else {
        selectedCell.value = { row, col }
        emit('cell-click', row, col, props.data[row])
        markDirty('interaction')
        requestRender()
    }
}

/**
 * åŒå‡»äº‹ä»¶ï¼ˆè¿›å…¥ç¼–è¾‘ï¼‰
 */
function handleDoubleClick(e: MouseEvent) {
    const { row, col, isHeader } = getCellFromEvent(e)

    if (row === -1 || col === -1 || isHeader) return

    const column = props.columns[col]
    if (!column) return

    if (column.editable !== false) {
        editingCell.value = { row, col }
        const rowData = props.data[row]
        editValue.value = rowData?.[column.key]?.toString() || ''

        nextTick(() =&gt; {
            editorRef.value?.focus()
            editorRef.value?.select()
        })
    }

    emit('cell-double-click', row, col, props.data[row])
}

/**
 * é¼ æ ‡ç§»åŠ¨
 */
function handleMouseMove(e: MouseEvent) {
    const { row } = getCellFromEvent(e)

    if (hoverRow.value !== row) {
        hoverRow.value = row
        markDirty('interaction')
        requestRender()
    }
}

/**
 * é¼ æ ‡ç¦»å¼€
 */
function handleMouseLeave() {
    hoverRow.value = -1
    markDirty('interaction')
    requestRender()
}

/**
 * å®Œæˆç¼–è¾‘
 */
function finishEdit() {
    if (!editingCell.value) return

    const { row, col } = editingCell.value
    const column = props.columns[col]
    if (!column) return

    // æ›´æ–°æ•°æ®
    props.data[row][column.key] = editValue.value

    editingCell.value = null
    markDirty('content')
    requestRender()
}

/**
 * å–æ¶ˆç¼–è¾‘
 */
function cancelEdit() {
    editingCell.value = null
}

// ==================== å·¥å…·æ–¹æ³• ====================

/**
 * ä»äº‹ä»¶è·å–å•å…ƒæ ¼ä½ç½®
 */
function getCellFromEvent(e: MouseEvent): { row: number; col: number; isHeader: boolean } {
    const canvas = interactionCanvasRef.value
    if (!canvas) return { row: -1, col: -1, isHeader: false }

    const rect = canvas.getBoundingClientRect()
    const canvasX = e.clientX - rect.left
    const canvasY = e.clientY - rect.top

    const { headerHeight, rowHeight, columns, data, frozenColumns } = props

    // æ˜¯å¦åœ¨è¡¨å¤´
    const isHeader = canvasY &lt; headerHeight

    // è®¡ç®—è¡Œ
    let row = -1
    if (!isHeader) {
        const dataY = canvasY - headerHeight + scrollTop.value
        row = Math.floor(dataY / rowHeight)
        if (row &lt; 0 || row &gt;= data.length) row = -1
    }

    // è®¡ç®—åˆ—
    let col = -1
    const isFrozenArea = canvasX &lt; frozenWidth.value
    const dataX = isFrozenArea ? canvasX : canvasX + scrollLeft.value

    let accWidth = 0
    for (let i = 0; i &lt; columns.length; i++) {
        const column = columns[i]
        if (!column) continue

        accWidth += column.width
        if (dataX &lt; accWidth) {
            col = i
            break
        }
    }

    return { row, col, isHeader }
}

/**
 * è·å–åˆ— X åæ ‡
 */
function getColumnX(colIndex: number): number {
    let x = 0
    for (let i = 0; i &lt; colIndex &amp;&amp; i &lt; props.columns.length; i++) {
        const column = props.columns[i]
        if (column) x += column.width
    }
    return x
}

/**
 * è·å–æ–‡æœ¬ X åæ ‡
 */
function getTextX(cellX: number, cellWidth: number, align?: string): number {
    switch (align) {
        case 'center': return cellX + cellWidth / 2
        case 'right': return cellX + cellWidth - CELL_PADDING
        default: return cellX + CELL_PADDING
    }
}

/**
 * æ–‡æœ¬æˆªæ–­ï¼ˆä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ä¼˜åŒ–ï¼‰
 */
function ellipsisText(ctx: CanvasRenderingContext2D, text: string, maxWidth: number): string {
    if (ctx.measureText(text).width &lt;= maxWidth) return text

    const ellipsis = '...'
    const ellipsisWidth = ctx.measureText(ellipsis).width

    if (maxWidth &lt;= ellipsisWidth) return ellipsis

    // äºŒåˆ†æŸ¥æ‰¾æœ€ä½³æˆªæ–­ä½ç½®
    let left = 0
    let right = text.length
    let result = ''

    while (left &lt; right) {
        const mid = Math.floor((left + right + 1) / 2)
        const truncated = text.slice(0, mid)

        if (ctx.measureText(truncated).width + ellipsisWidth &lt;= maxWidth) {
            result = truncated
            left = mid
        } else {
            right = mid - 1
        }
    }

    return result + ellipsis
}

// ==================== æš´éœ²æ–¹æ³• ====================

defineExpose({
    /** æ»šåŠ¨åˆ°æŒ‡å®šä½ç½® */
    scrollTo: (left?: number, top?: number) =&gt; {
        if (left !== undefined &amp;&amp; scrollerRef.value) {
            scrollerRef.value.scrollLeft = left
        }
        if (top !== undefined &amp;&amp; scrollerRef.value) {
            scrollerRef.value.scrollTop = top
        }
    },

    /** æ»šåŠ¨åˆ°æŒ‡å®šè¡Œ */
    scrollToRow: (rowIndex: number) =&gt; {
        if (scrollerRef.value) {
            scrollerRef.value.scrollTop = rowIndex * props.rowHeight
        }
    },

    /** å¼ºåˆ¶åˆ·æ–° */
    refresh: () =&gt; {
        markDirty('base', 'content', 'interaction')
        requestRender()
    }
})
&lt;/script&gt;

&lt;style scoped&gt;
.canvas-table-container {
    position: relative;
    overflow: hidden;
    background: #fff;
    border: 1px solid #ebeef5;
    border-radius: 4px;
}

/* Canvas å±‚çº§æ ·å¼ */
.layer-base,
.layer-content,
.layer-interaction {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
}

.layer-base {
    z-index: 1;
}

.layer-content {
    z-index: 2;
}

.layer-interaction {
    z-index: 3;
}

/* æ»šåŠ¨å®¹å™¨ */
.scroll-container {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    overflow: auto;
    z-index: 4;
}

.scroll-phantom {
    pointer-events: none;
}

/* ç¼–è¾‘å™¨ */
.cell-editor {
    position: absolute;
    z-index: 10;
    padding: 0 8px;
    border: 2px solid #409eff;
    border-radius: 0;
    outline: none;
    font-size: 14px;
    font-family: inherit;
    box-sizing: border-box;
    background: #fff;
}
&lt;/style&gt;

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¾®å‰ç«¯æ¶æ„ä¸‹çš„ TypeScript ç±»å‹æ²»ç†å®è·µ]]></title>    <link>https://juejin.cn/post/7604786493639983131</link>    <guid>https://juejin.cn/post/7604786493639983131</guid>    <pubDate>2026-02-10T06:10:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604786493639983131" data-draft-id="7604761524977238025" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¾®å‰ç«¯æ¶æ„ä¸‹çš„ TypeScript ç±»å‹æ²»ç†å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2026-02-10T06:10:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§è±¡çš„é¼»å­é‚£ä¹ˆé•¿"/> <meta itemprop="url" content="https://juejin.cn/user/2277843821926871"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¾®å‰ç«¯æ¶æ„ä¸‹çš„ TypeScript ç±»å‹æ²»ç†å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2277843821926871/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§è±¡çš„é¼»å­é‚£ä¹ˆé•¿
  </span> <!----> <!----> <div class="vip-level" data-v-cd7d0a50="" data-v-292f6e48=""><span class="tooltip" data-v-cd7d0a50=""><div class="byte-tooltip byte-tooltip--dark" style="display:none;">
        VIP.4 èä¼šè´¯é€š
      </div><span class="byte-tooltip__wrapper"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="VIP.4 èä¼šè´¯é€š" title="VIP.4 èä¼šè´¯é€š" class="lazy" style="aspect-ratio:NaN;" data-v-5244ef91="" data-v-cd7d0a50=""/></span></span></div> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T06:10:58.000Z" title="Tue Feb 10 2026 06:10:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>æ—¥æœŸ</strong>: 2026-02-10<br/>
<strong>æ ‡ç­¾</strong>: TypeScript, å¾®å‰ç«¯, æ¶æ„æ²»ç†, DX<br/>
<strong>é˜…è¯»æ—¶é—´</strong>: çº¦ 12 åˆ†é’Ÿ</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">å†™åœ¨å‰é¢</h2>
<p>ä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼š</p>
<ul>
<li>æ‰“å¼€ä¸€ä¸ª <code>.ts</code> æ–‡ä»¶ï¼ŒIDE ç–¯ç‹‚æŠ¥çº¢ <code>æ‰¾ä¸åˆ°åç§°"Recordable"</code>ï¼Œä½†æ„å»ºåˆèƒ½è¿‡ï¼Ÿ</li>
<li>åŒä¸€ä¸ª <code>PageParam</code> æ¥å£ï¼Œåœ¨ <code>shims-vue.d.ts</code>ã€<code>@cmclink/api</code>ã€<code>@cmclink/types</code> ä¸‰ä¸ªåœ°æ–¹å„å®šä¹‰äº†ä¸€éï¼Ÿ</li>
<li>æƒ³ç»™ä¸€ä¸ªç±»å‹åŠ ä¸ªå­—æ®µï¼Œä¸çŸ¥é“è¯¥æ”¹å“ªä¸ªæ–‡ä»¶ï¼Œæ”¹å®Œå‘ç°å¦ä¸€ä¸ªåœ°æ–¹è¿˜æ˜¯æ—§çš„ï¼Ÿ</li>
</ul>
<p>è¿™äº›éƒ½æ˜¯æˆ‘ä»¬ CMCLink ä¸»åº”ç”¨åœ¨ç±»å‹ç®¡ç†ä¸Šè¸©è¿‡çš„å‘ã€‚æœ¬æ–‡è®°å½•äº†ä¸€æ¬¡å®Œæ•´çš„ç±»å‹æ²»ç†è¿‡ç¨‹â€”â€”ä»æ··ä¹±åˆ°æœ‰åºï¼Œä» 10 ä¸ªæ•£è½çš„ç±»å‹æ–‡ä»¶åˆ° 3 ä¸ªèŒè´£æ¸…æ™°çš„æ–‡ä»¶ï¼Œä»¥åŠèƒŒåçš„è®¾è®¡æ€æƒ³ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€æ²»ç†å‰ï¼šé—®é¢˜å…¨æ™¯</h2>
<h3 data-id="heading-2">1.1 types ç›®å½•çš„"åƒåœ¾æŠ½å±‰"</h3>
<p>æ²»ç†å‰ï¼Œ<code>apps/main/src/types/</code> ç›®å½•æœ‰ 10 ä¸ªæ–‡ä»¶ï¼Œæ‰¿æ‹…äº†è¿œè¶…å…¶èŒè´£çš„å·¥ä½œï¼š</p>
<pre><code class="hljs language-css" lang="css">types/
â”œâ”€â”€ auto-imports<span class="hljs-selector-class">.d</span><span class="hljs-selector-class">.ts</span>    â† è‡ªåŠ¨ç”Ÿæˆï¼Œæ²¡é—®é¢˜
â”œâ”€â”€ shims-vue<span class="hljs-selector-class">.d</span><span class="hljs-selector-class">.ts</span>       â† <span class="hljs-number">121</span> è¡Œï¼å¡äº† <span class="hljs-selector-class">.vue</span> å£°æ˜ + store ç±»å‹ + <span class="hljs-number">50</span> è¡Œå…¨å±€å·¥å…·ç±»å‹
â”œâ”€â”€ container<span class="hljs-selector-class">.d</span><span class="hljs-selector-class">.ts</span>       â† <span class="hljs-number">249</span> è¡Œç®±ç®¡ç±»å‹ï¼Œé›¶å¼•ç”¨ï¼ˆå±äºç®±ç®¡å­åº”ç”¨ï¼‰
â”œâ”€â”€ user<span class="hljs-selector-class">.ts</span>              â† ä»… store å’Œ <span class="hljs-number">1</span> ä¸ªç»„ä»¶ä½¿ç”¨
â”œâ”€â”€ <span class="hljs-attribute">flow</span><span class="hljs-selector-class">.ts</span>              â† ä»…é¦–é¡µä½¿ç”¨
â”œâ”€â”€ msg<span class="hljs-selector-class">.ts</span>               â† ä»…é¦–é¡µä½¿ç”¨
â”œâ”€â”€ marketing<span class="hljs-selector-class">.ts</span>         â† ä»…é¦–é¡µä½¿ç”¨
â”œâ”€â”€ <span class="hljs-selector-tag">form</span><span class="hljs-selector-class">.d</span><span class="hljs-selector-class">.ts</span>            â† <span class="hljs-selector-tag">Form</span> ç»„ä»¶ä¸“å±
â”œâ”€â”€ components<span class="hljs-selector-class">.d</span><span class="hljs-selector-class">.ts</span>      â† <span class="hljs-selector-tag">Form</span> ç»„ä»¶ä¸“å±
â””â”€â”€ tabs<span class="hljs-selector-class">.ts</span>              â† ä¸»åº”ç”¨è·¯ç”±/èœå•ç±»å‹
</code></pre>
<p><strong>æ ¸å¿ƒé—®é¢˜</strong>ï¼šæ²¡æœ‰åˆ†ç±»æ ‡å‡†ï¼Œä»€ä¹ˆç±»å‹éƒ½å¾€ <code>types/</code> é‡Œæ‰”ã€‚</p>
<h3 data-id="heading-3">1.2 å…¨å±€ç±»å‹çš„"ä¸‰é‡å½±åˆ†èº«"</h3>
<p><code>PageParam</code> è¿™ä¸ªæ¥å£ï¼ŒåŒæ—¶å­˜åœ¨äºï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 1ï¸âƒ£ shims-vue.d.tsï¼ˆå…¨å±€éšå¼å£°æ˜ï¼‰</span>
<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">global</span> {
  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">PageParam</span> { pageSize?: <span class="hljs-built_in">number</span>; pageNo?: <span class="hljs-built_in">number</span> }
}

<span class="hljs-comment">// 2ï¸âƒ£ @cmclink/api/types.tsï¼ˆå…¬å…±åŒ…æ˜¾å¼å¯¼å‡ºï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">PageParam</span> { <span class="hljs-attr">pageNo</span>: <span class="hljs-built_in">number</span>; <span class="hljs-attr">pageSize</span>: <span class="hljs-built_in">number</span> }

<span class="hljs-comment">// 3ï¸âƒ£ @cmclink/types/global.d.tsï¼ˆå…¬å…±ç±»å‹åŒ…å…¨å±€å£°æ˜ï¼‰</span>
<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">global</span> {
  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">PageParam</span> { pageSize?: <span class="hljs-built_in">number</span>; pageNo?: <span class="hljs-built_in">number</span> }
}
</code></pre>
<p>ä¸‰ä»½å®šä¹‰ï¼Œå­—æ®µè¿˜æœ‰å¾®å¦™å·®å¼‚ï¼ˆ<code>pageNo</code> æ˜¯å¦å¯é€‰ï¼‰ã€‚æ”¹ä¸€å¤„ï¼Œå¦å¤–ä¸¤å¤„ä¸ä¼šåŒæ­¥ã€‚</p>
<h3 data-id="heading-4">1.3 å…¬å…±ç±»å‹åŒ…çš„"ç©ºåŸè®¡"</h3>
<p><code>@cmclink/types</code> åŒ…å·²ç»åˆ›å»ºå¥½äº†ï¼ŒREADME å†™å¾—å¾ˆæ¼‚äº®ï¼Œ9 ä¸ªæ¨¡å—æ–‡ä»¶ä¸€åº”ä¿±å…¨ã€‚ä½†æ˜¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æœç´¢æ•´ä¸ª monorepoï¼Œè°åœ¨ç”¨ @cmclink/typesï¼Ÿ</span>
$ grep -r <span class="hljs-string">"@cmclink/types"</span> --include=<span class="hljs-string">"*.ts"</span> --include=<span class="hljs-string">"*.vue"</span> .
<span class="hljs-comment"># ç»“æœï¼š0 æ¡</span>
</code></pre>
<p><strong>é›¶æ¶ˆè´¹è€…</strong>ã€‚åŒ…æ­å¥½äº†ï¼Œæ²¡äººæ¥å…¥ã€‚</p>
<hr/>
<h2 data-id="heading-5">äºŒã€è®¾è®¡æ€æƒ³</h2>
<h3 data-id="heading-6">2.1 ç±»å‹å½’å±ä¸‰é—®</h3>
<p>æ¯é‡åˆ°ä¸€ä¸ªç±»å‹å®šä¹‰ï¼Œé—®ä¸‰ä¸ªé—®é¢˜ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">Q1: å‡ ä¸ªå­åº”ç”¨åœ¨ç”¨ï¼Ÿ
    â”œâ”€â”€ â‰¥2 ä¸ª â†’ æ”¾å…¬å…±åŒ…
    â””â”€â”€ 1 ä¸ª  â†’ æ”¾å½“å‰åº”ç”¨

Q2: å®ƒè·Ÿä»€ä¹ˆç»‘å®šï¼Ÿ
    â”œâ”€â”€ API è¯·æ±‚ â†’ @cmclink/api
    â”œâ”€â”€ å·¥å…·å‡½æ•° â†’ @cmclink/utils
    â””â”€â”€ çº¯ç±»å‹   â†’ @cmclink/types

Q3: åœ¨åº”ç”¨å†…ï¼Œå®ƒå±äºè°ï¼Ÿ
    â”œâ”€â”€ ç»„ä»¶ä¸“å± â†’ å°±è¿‘æ”¾ç»„ä»¶ç›®å½•
    â”œâ”€â”€ Store ä¸“å± â†’ stores/types.ts
    â””â”€â”€ é¡µé¢ä¸“å± â†’ views/xxx/types.ts
</code></pre>
<p>è¿™ä¸‰ä¸ªé—®é¢˜å½¢æˆäº†ä¸€ä¸ª<strong>å†³ç­–æ ‘</strong>ï¼Œä»»ä½•ç±»å‹éƒ½èƒ½æ‰¾åˆ°å”¯ä¸€å½’å±ã€‚</p>
<h3 data-id="heading-7">2.2 æ˜¾å¼ä¼˜äºéšå¼</h3>
<p>å…¨å±€ç±»å‹ï¼ˆ<code>declare global</code>ï¼‰çš„æœ€å¤§é—®é¢˜æ˜¯<strong>æ¥æºä¸å¯è¿½æº¯</strong>ã€‚å½“ä½ åœ¨ä»£ç é‡Œå†™ <code>params: PageParam</code>ï¼ŒIDE å’Œä»£ç å®¡æŸ¥è€…éƒ½ä¸çŸ¥é“è¿™ä¸ª <code>PageParam</code> ä»å“ªæ¥ã€‚</p>
<p>æˆ‘ä»¬çš„åŸåˆ™ï¼š</p>




















<table><thead><tr><th>ç±»å‹ç§ç±»</th><th>ç­–ç•¥</th><th>ç†ç”±</th></tr></thead><tbody><tr><td>å·¥å…·ç±»å‹ï¼ˆ<code>Recordable</code>/<code>Nullable</code>ï¼‰</td><td>å…¨å±€å£°æ˜ âœ…</td><td>é«˜é¢‘ä½¿ç”¨ï¼Œç±»ä¼¼ <code>Promise</code>/<code>Record</code>ï¼Œæ˜¾å¼å¯¼å…¥åè€Œå¢åŠ å™ªéŸ³</td></tr><tr><td>ä¸šåŠ¡ç±»å‹ï¼ˆ<code>PageParam</code>/<code>TokenType</code>ï¼‰</td><td>æ˜¾å¼å¯¼å…¥ âœ…</td><td>æ¥æºå¯è¿½æº¯ï¼ŒIDE è·³è½¬å¯ç”¨ï¼Œé‡æ„å®‰å…¨</td></tr></tbody></table>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âœ… å·¥å…·ç±»å‹ï¼šå…¨å±€ä½¿ç”¨ï¼Œæ— éœ€å¯¼å…¥</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">Recordable</span> = {}
<span class="hljs-keyword">const</span> <span class="hljs-attr">el</span>: <span class="hljs-title class_">Nullable</span>&lt;<span class="hljs-title class_">HTMLElement</span>&gt; = <span class="hljs-literal">null</span>

<span class="hljs-comment">// âœ… ä¸šåŠ¡ç±»å‹ï¼šæ˜¾å¼å¯¼å…¥ï¼Œæ¥æºæ¸…æ™°</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">PageParam</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@cmclink/api'</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">FormSchema</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@cmclink/types/form'</span>
</code></pre>
<h3 data-id="heading-8">2.3 å°±è¿‘åŸåˆ™</h3>
<p>ç±»å‹åº”è¯¥ç¦»ä½¿ç”¨å®ƒçš„ä»£ç å°½å¯èƒ½è¿‘ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">âŒ è¿œè·ç¦»ï¼štypes/flow.ts â†’ views/home/index.vueï¼ˆè·¨ 3 å±‚ç›®å½•ï¼‰
âœ… å°±è¿‘åŒ–ï¼šviews/home/types.ts â†’ views/home/index.vueï¼ˆåŒç›®å½•ï¼‰
</code></pre>
<p>å¥½å¤„ï¼š</p>
<ul>
<li><strong>åˆ é™¤é¡µé¢æ—¶ç±»å‹è·Ÿç€åˆ </strong>ï¼Œä¸ä¼šç•™ä¸‹å­¤å„¿æ–‡ä»¶</li>
<li><strong>ä»£ç å®¡æŸ¥æ—¶ä¸€ç›®äº†ç„¶</strong>ï¼Œä¸ç”¨è·³æ¥è·³å»</li>
<li><strong>IDE è‡ªåŠ¨è¡¥å…¨æ›´ç²¾å‡†</strong>ï¼Œå› ä¸ºä½œç”¨åŸŸæ›´å°</li>
</ul>
<h3 data-id="heading-9">2.4 å•ä¸€æ¥æºï¼ˆSingle Source of Truthï¼‰</h3>
<p>æ¯ä¸ªç±»å‹åªåœ¨ä¸€ä¸ªåœ°æ–¹å®šä¹‰ï¼Œå…¶ä»–åœ°æ–¹ re-exportï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ğŸ“ å”¯ä¸€å®šä¹‰ï¼špackages/types/src/form.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">FormSchema</span> = { ... }

<span class="hljs-comment">// ğŸ“ re-exportï¼šapps/main/src/components/Form/src/types.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">FormSchema</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@cmclink/types/form'</span>
</code></pre>
<p>ä¿®æ”¹æ—¶åªæ”¹ä¸€å¤„ï¼Œæ‰€æœ‰æ¶ˆè´¹è€…è‡ªåŠ¨åŒæ­¥ã€‚</p>
<hr/>
<h2 data-id="heading-10">ä¸‰ã€å®æ–½è¿‡ç¨‹</h2>
<h3 data-id="heading-11">3.1 Phase 0ï¼štypes ç›®å½•æ¸…ç†</h3>






























<table><thead><tr><th>æ“ä½œ</th><th>æ–‡ä»¶</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td>åˆ é™¤</td><td><code>container.d.ts</code> (249 è¡Œ)</td><td>é›¶å¼•ç”¨çš„ç®±ç®¡ç±»å‹ï¼Œä¸å±äºä¸»åº”ç”¨</td></tr><tr><td>åˆå¹¶</td><td><code>user.ts</code> â†’ <code>stores/types.ts</code></td><td><code>UserRoleType</code> ä»… store å’Œ 1 ä¸ªç»„ä»¶ä½¿ç”¨</td></tr><tr><td>å°±è¿‘åŒ–</td><td><code>flow.ts</code>/<code>msg.ts</code>/<code>marketing.ts</code> â†’ <code>views/home/types.ts</code></td><td>é¦–é¡µä¸“å± UI ç±»å‹</td></tr><tr><td>åˆå¹¶</td><td><code>form.d.ts</code> + <code>components.d.ts</code> â†’ <code>components/Form/src/types.ts</code></td><td>Form ç»„ä»¶ä¸“å±</td></tr></tbody></table>
<p><strong>ç»“æœ</strong>ï¼š10 ä¸ªæ–‡ä»¶ â†’ 3 ä¸ªæ–‡ä»¶ï¼Œåˆ é™¤ 406 è¡Œã€‚</p>
<h3 data-id="heading-12">3.2 Phase 1 (P0)ï¼šæ¥å…¥ @cmclink/types</h3>
<pre><code class="hljs language-jsonc" lang="jsonc">// tsconfig.app.json â€” å¼•å…¥å…¬å…±å…¨å±€ç±»å‹
{
  "include": [
    "src/**/*",
    "../../packages/types/src/global.d.ts",   // æ–°å¢
    "../../packages/types/src/env.d.ts",       // æ–°å¢
    "../../packages/types/src/router.d.ts"     // æ–°å¢
  ]
}
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// shims-vue.d.ts â€” ä» 121 è¡Œç˜¦èº«åˆ° 18 è¡Œ</span>
<span class="hljs-comment">// åˆ é™¤æ•´ä¸ª declare global å—ï¼Œå…¨å±€ç±»å‹ç”± @cmclink/types ç»Ÿä¸€æä¾›</span>
<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">"*.vue"</span> {
  <span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">DefineComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
  <span class="hljs-keyword">const</span> <span class="hljs-attr">component</span>: <span class="hljs-title class_">DefineComponent</span>&lt;<span class="hljs-built_in">object</span>, <span class="hljs-built_in">object</span>, <span class="hljs-built_in">unknown</span>&gt;;
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> component;
}
</code></pre>
<h3 data-id="heading-13">3.3 Phase 2 (P1)ï¼šæ¶ˆé™¤éšå¼ä¾èµ–</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âŒ æ²»ç†å‰ï¼šPageParam ä»å¤©ä¸Šæ‰ä¸‹æ¥</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getMessageLists</span> = (<span class="hljs-params">params: PageParam</span>) =&gt; { ... }

<span class="hljs-comment">// âœ… æ²»ç†åï¼šæ¥æºæ¸…æ™°</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">PageParam</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@cmclink/api'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getMessageLists</span> = (<span class="hljs-params">params: PageParam</span>) =&gt; { ... }
</code></pre>
<h3 data-id="heading-14">3.4 Phase 3 (P2)ï¼šå…¬å…±åŒ…å‡çº§ + API ç±»å‹è§„èŒƒåŒ–</h3>
<p><strong>Form ç±»å‹</strong>ï¼šå°† <code>@cmclink/types/form</code> ä»ç²¾ç®€ç‰ˆï¼ˆ75 è¡Œï¼‰å‡çº§ä¸ºå®Œæ•´ç‰ˆï¼ˆ169 è¡Œï¼‰ï¼Œä¸»åº”ç”¨æ”¹ä¸º re-exportï¼ˆ152 è¡Œ â†’ 21 è¡Œï¼‰ã€‚</p>
<p><strong>Profile ç±»å‹</strong>ï¼š6 ä¸ªå†…è” interface ä» API æ–‡ä»¶æå–åˆ°åŒç›®å½• <code>types.ts</code>ï¼ŒAPI æ–‡ä»¶åªä¿ç•™è¯·æ±‚é€»è¾‘ã€‚</p>
<hr/>
<h2 data-id="heading-15">å››ã€æ”¶ç›Šåˆ†æ</h2>
<h3 data-id="heading-16">4.1 å¯é‡åŒ–æ”¶ç›Š</h3>



























































<table><thead><tr><th>æŒ‡æ ‡</th><th>æ²»ç†å‰</th><th>æ²»ç†å</th><th>å˜åŒ–</th></tr></thead><tbody><tr><td><code>types/</code> æ–‡ä»¶æ•°</td><td>10</td><td>3</td><td><strong>-70%</strong></td></tr><tr><td><code>types/</code> æ€»è¡Œæ•°</td><td>~630</td><td>~120</td><td><strong>-81%</strong></td></tr><tr><td><code>shims-vue.d.ts</code> è¡Œæ•°</td><td>121</td><td>18</td><td><strong>-85%</strong></td></tr><tr><td>é‡å¤ç±»å‹å®šä¹‰</td><td>3 å¤„ï¼ˆPageParam ç­‰ï¼‰</td><td>0</td><td><strong>-100%</strong></td></tr><tr><td>æ­»æ–‡ä»¶/é›¶å¼•ç”¨</td><td>1 ä¸ªï¼ˆcontainer.d.ts 249 è¡Œï¼‰</td><td>0</td><td><strong>-100%</strong></td></tr><tr><td><code>@cmclink/types</code> æ¶ˆè´¹è€…</td><td>0</td><td>1ï¼ˆä¸»åº”ç”¨ï¼‰</td><td>ä»é›¶åˆ°ä¸€</td></tr><tr><td>Form types.ts è¡Œæ•°</td><td>152ï¼ˆæœ¬åœ°å®šä¹‰ï¼‰</td><td>21ï¼ˆre-exportï¼‰</td><td><strong>-86%</strong></td></tr><tr><td>profile.ts è¡Œæ•°</td><td>84ï¼ˆæ··åˆï¼‰</td><td>34ï¼ˆçº¯è¯·æ±‚ï¼‰</td><td><strong>-60%</strong></td></tr></tbody></table>
<h3 data-id="heading-17">4.2 ä¸å¯é‡åŒ–æ”¶ç›Š</h3>
<ul>
<li><strong>IDE ä½“éªŒæå‡</strong>ï¼šå…¨å±€ç±»å‹ç”± tsconfig include ç»Ÿä¸€æä¾›ï¼Œ<code>Recordable</code>/<code>ComponentRef</code> ç­‰ä¸å†æ—¶æœ‰æ—¶æ— åœ°æŠ¥çº¢</li>
<li><strong>é‡æ„å®‰å…¨æ€§</strong>ï¼šç±»å‹å•ä¸€æ¥æºï¼Œæ”¹ä¸€å¤„å…¨å±€ç”Ÿæ•ˆï¼Œä¸ä¼šå‡ºç°"æ”¹äº† A å¿˜äº† B"</li>
<li><strong>æ–°äººä¸Šæ‰‹æˆæœ¬é™ä½</strong>ï¼šç±»å‹å½’å±æœ‰æ˜ç¡®è§„åˆ™ï¼Œä¸ç”¨çŒœ"è¿™ä¸ªç±»å‹è¯¥æ”¾å“ª"</li>
<li><strong>ä»£ç å®¡æŸ¥æ•ˆç‡</strong>ï¼šAPI æ–‡ä»¶åªæœ‰è¯·æ±‚é€»è¾‘ï¼Œç±»å‹å®šä¹‰åœ¨ç‹¬ç«‹æ–‡ä»¶ï¼ŒèŒè´£åˆ†ç¦»</li>
<li><strong>è·¨å­åº”ç”¨ä¸€è‡´æ€§</strong>ï¼šå…¶ä»–å­åº”ç”¨æ¥å…¥ <code>@cmclink/types</code> åªéœ€ 3 æ­¥ï¼Œç±»å‹å®šä¹‰å¤©ç„¶ç»Ÿä¸€</li>
</ul>
<h3 data-id="heading-18">4.3 ä¸ºåç»­å­åº”ç”¨é“ºè·¯</h3>
<p>ç°åœ¨ä»»ä½•æ–°å­åº”ç”¨æ¥å…¥å…¬å…±ç±»å‹åªéœ€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Step 1: æ·»åŠ ä¾èµ–</span>
pnpm add -D @cmclink/types

<span class="hljs-comment"># Step 2: tsconfig include å…¨å±€ç±»å‹ï¼ˆå¤åˆ¶ 3 è¡Œï¼‰</span>

<span class="hljs-comment"># Step 3: åˆ é™¤æœ¬åœ°é‡å¤å£°æ˜ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰</span>
</code></pre>
<hr/>
<h2 data-id="heading-19">äº”ã€æˆæœ¬åˆ†æ</h2>
<h3 data-id="heading-20">5.1 ä¸€æ¬¡æ€§æˆæœ¬</h3>








































<table><thead><tr><th>é¡¹ç›®</th><th>è€—æ—¶</th><th>é£é™©</th></tr></thead><tbody><tr><td>types ç›®å½•æ¸…ç† + å°±è¿‘åŒ–</td><td>~30 min</td><td>ä½ï¼ˆçº¯é‡æ„ï¼Œä¸æ”¹é€»è¾‘ï¼‰</td></tr><tr><td>æ¥å…¥ @cmclink/types + åˆ é™¤é‡å¤å£°æ˜</td><td>~10 min</td><td>ä½ï¼ˆtsconfig + åˆ ä»£ç ï¼‰</td></tr><tr><td>æ¶ˆé™¤éšå¼å…¨å±€ç±»å‹</td><td>~15 min</td><td>ä½ï¼ˆæ·»åŠ  import è¯­å¥ï¼‰</td></tr><tr><td>Form ç±»å‹å‡çº§ + re-export</td><td>~30 min</td><td>ä¸­ï¼ˆå…¬å…±åŒ…å˜æ›´ï¼Œéœ€éªŒè¯ï¼‰</td></tr><tr><td>Profile ç±»å‹æå–</td><td>~15 min</td><td>ä½ï¼ˆçº¯æå–ï¼Œä¸æ”¹é€»è¾‘ï¼‰</td></tr><tr><td><strong>åˆè®¡</strong></td><td><strong>~100 min</strong></td><td>â€”</td></tr></tbody></table>
<h3 data-id="heading-21">5.2 æŒç»­æˆæœ¬</h3>

























<table><thead><tr><th>é¡¹ç›®</th><th>æˆæœ¬</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ–°å¢ç±»å‹æ—¶çš„å†³ç­–</td><td>æä½</td><td>æŒ‰å†³ç­–æ ‘èµ°ï¼Œ30 ç§’å†…ç¡®å®šå½’å±</td></tr><tr><td>å…¬å…±åŒ…ç±»å‹å˜æ›´</td><td>ä½</td><td>æ”¹ä¸€å¤„ï¼Œæ‰€æœ‰æ¶ˆè´¹è€…è‡ªåŠ¨åŒæ­¥</td></tr><tr><td>ä»£ç å®¡æŸ¥</td><td>é™ä½</td><td>ç±»å‹å’Œé€»è¾‘åˆ†ç¦»ï¼Œå®¡æŸ¥æ›´èšç„¦</td></tr></tbody></table>
<h3 data-id="heading-22">5.3 é£é™©ä¸ç¼“è§£</h3>





















<table><thead><tr><th>é£é™©</th><th>ç¼“è§£æªæ–½</th></tr></thead><tbody><tr><td>å…¬å…±åŒ…æ”¹ç±»å‹å½±å“å¤šä¸ªå­åº”ç”¨</td><td>å…¬å…±åŒ…ç±»å‹å˜æ›´éœ€ CR å®¡æ‰¹ + å…¨é‡æ„å»ºéªŒè¯</td></tr><tr><td>IDE å…¨å±€ç±»å‹å¶å°”ä¸è¯†åˆ«</td><td>tsconfig include è·¯å¾„æ˜ç¡®ï¼Œé‡å¯ TS Server å³å¯</td></tr><tr><td>å›¢é˜Ÿæˆå‘˜ä¸çŸ¥é“æ–°è§„èŒƒ</td><td>æœ¬æ–‡ + <code>å…¬å…±TSç±»å‹ç®¡ç†æ–¹æ¡ˆ.md</code> + ä»£ç å®¡æŸ¥æŠŠå…³</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-23">å…­ã€è§„èŒƒé€ŸæŸ¥å¡</h2>
<p>è´´åœ¨å·¥ä½ä¸Šï¼ˆæˆ–è€… bookmark è¿™ç¯‡æ–‡ç« ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ç±»å‹æ”¾å“ªé‡Œï¼Ÿé€ŸæŸ¥è¡¨                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                              â”‚
â”‚  â‰¥2 ä¸ªå­åº”ç”¨ç”¨ï¼Ÿ                              â”‚
â”‚    â”œâ”€â”€ è·Ÿ API ç»‘å®š â†’ @cmclink/api            â”‚
â”‚    â”œâ”€â”€ è·Ÿå·¥å…·å‡½æ•°ç»‘å®š â†’ @cmclink/utils        â”‚
â”‚    â””â”€â”€ çº¯ç±»å‹ â†’ @cmclink/types               â”‚
â”‚                                              â”‚
â”‚  ä»… 1 ä¸ªå­åº”ç”¨ç”¨ï¼Ÿ                            â”‚
â”‚    â”œâ”€â”€ ç»„ä»¶ä¸“å± â†’ ç»„ä»¶ç›®å½•/types.ts           â”‚
â”‚    â”œâ”€â”€ Store ä¸“å± â†’ stores/types.ts          â”‚
â”‚    â”œâ”€â”€ é¡µé¢ä¸“å± â†’ views/xxx/types.ts         â”‚
â”‚    â””â”€â”€ API ä¸“å± â†’ api/xxx/types.ts           â”‚
â”‚                                              â”‚
â”‚  å…¨å±€å·¥å…·ç±»å‹ï¼ˆRecordable ç­‰ï¼‰ï¼Ÿ               â”‚
â”‚    â†’ @cmclink/types/global.d.ts              â”‚
â”‚    â†’ tsconfig include å¼•å…¥ï¼Œæ— éœ€ import       â”‚
â”‚                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âŒ ç¦æ­¢ï¼š                                    â”‚
â”‚  â€¢ shims-vue.d.ts é‡ŒåŠ ä¸šåŠ¡ç±»å‹               â”‚
â”‚  â€¢ API æ–‡ä»¶é‡Œå†…è” interface                  â”‚
â”‚  â€¢ è·¨å­åº”ç”¨ç›´æ¥ import ç±»å‹                   â”‚
â”‚  â€¢ @cmclink/types é‡Œå¼•å…¥è¿è¡Œæ—¶ä¾èµ–            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h2 data-id="heading-24">ä¸ƒã€æ€»ç»“</h2>
<p>è¿™æ¬¡ç±»å‹æ²»ç†çš„æœ¬è´¨æ˜¯<strong>å»ºç«‹ç§©åº</strong>ã€‚ä»£ç åº“åƒä¸€åº§åŸå¸‚ï¼Œç±»å‹å®šä¹‰æ˜¯åŸå¸‚çš„åœ°å€ç³»ç»Ÿã€‚å½“åœ°å€ç³»ç»Ÿæ··ä¹±æ—¶ï¼Œæ¯ä¸ªäººéƒ½åœ¨èŠ±æ—¶é—´æ‰¾è·¯ï¼›å½“åœ°å€ç³»ç»Ÿæ¸…æ™°æ—¶ï¼Œæ‰€æœ‰äººéƒ½èƒ½å¿«é€Ÿåˆ°è¾¾ç›®çš„åœ°ã€‚</p>
<p>ä¸‰ä¸ªæ ¸å¿ƒåŸåˆ™ï¼š</p>
<ol>
<li><strong>å•ä¸€æ¥æº</strong> â€” æ¯ä¸ªç±»å‹åªå®šä¹‰ä¸€æ¬¡</li>
<li><strong>æ˜¾å¼ä¼˜äºéšå¼</strong> â€” ä¸šåŠ¡ç±»å‹å¿…é¡» importï¼Œæ¥æºå¯è¿½æº¯</li>
<li><strong>å°±è¿‘åŸåˆ™</strong> â€” ç±»å‹ç¦»ä½¿ç”¨å®ƒçš„ä»£ç è¶Šè¿‘è¶Šå¥½</li>
</ol>
<p>100 åˆ†é’Ÿçš„æŠ•å…¥ï¼Œæ¢æ¥çš„æ˜¯æ•´ä¸ªå›¢é˜Ÿåœ¨ç±»å‹ç®¡ç†ä¸Šçš„é•¿æœŸæ•ˆç‡æå‡ã€‚å€¼å¾—ã€‚</p>
<hr/>
<p><em>å¦‚æœ‰ç–‘é—®ï¼Œæ¬¢è¿åœ¨ Code Review ä¸­è®¨è®ºï¼Œæˆ–ç›´æ¥æ‰¾æˆ‘èŠã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ€ä¹ˆä½¿ç”¨Vueæ¸è¿›å¼åœ°å¢å¼ºåŸç”Ÿhtmlé¡¹ç›®]]></title>    <link>https://juejin.cn/post/7604779604125581312</link>    <guid>https://juejin.cn/post/7604779604125581312</guid>    <pubDate>2026-02-10T06:32:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604779604125581312" data-draft-id="7604741630449467426" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ€ä¹ˆä½¿ç”¨Vueæ¸è¿›å¼åœ°å¢å¼ºåŸç”Ÿhtmlé¡¹ç›®"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-10T06:32:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¶…ç»å¤§å¸…å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/1074701161733898"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ€ä¹ˆä½¿ç”¨Vueæ¸è¿›å¼åœ°å¢å¼ºåŸç”Ÿhtmlé¡¹ç›®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1074701161733898/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¶…ç»å¤§å¸…å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T06:32:33.000Z" title="Tue Feb 10 2026 06:32:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    14
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">SFC</h2>
<p>æˆ‘ä»¬å¦‚æœæ˜¯æ‰“ç®—ä½¿ç”¨vueå®Œæ•´çš„å†™å®Œæ•´ä¸ªé¡¹ç›®ï¼Œ å°±å¾ˆé€‚åˆä½¿ç”¨å•æ–‡ä»¶ç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯<code>.vue</code>æ–‡ä»¶, å®ƒçš„è‹±æ–‡åå­—æ˜¯<code>Single-File Components</code>,å°±æ˜¯SFCçš„ç¼©å†™,ä¹Ÿå°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ä»£è¡¨ç€ä¸€ä¸ªç»„ä»¶ï¼Œæˆ‘ä»¬æŠŠç»„ä»¶çš„æ¨¡æ¿ï¼Œæ ·å¼ï¼Œé€»è¾‘éƒ½å†™åœ¨è¿™ä¸€ä¸ªæ–‡ä»¶å†…,åœ¨ä½¿ç”¨viteè¿™æ ·çš„æ„å»ºå·¥å…·çš„æ—¶å€™ï¼Œå½“ä¸‹è½½å®Œæ‰€æœ‰ä¾èµ–åï¼Œå¯ä»¥åœ¨æˆ‘ä»¬çš„<code>node_module</code>é‡Œçœ‹åˆ°ä¸‹è½½çš„vueï¼Œæœ‰å‡ ä¸ªä¾èµ–æ’ä»¶, å…¶ä¸­ä¸€ä¸ªåä¸º<code>@vue/compiler-sfc</code>,è¿™ä¸ªå°±æ˜¯ç”¨äºè§£ææˆ‘ä»¬çš„å•æ–‡ä»¶ç»„ä»¶çš„ï¼Œå…¶ä¸­è¿˜åŒ…å«ä¸€ä¸ªåä¸º<code>@vue/compiler-dom</code>çš„ä¾èµ–åº“,ä¸‹é¢è§£é‡Šè¿™ä¸ªåº“çš„ä½œç”¨</p>
<h2 data-id="heading-1">CDNä½¿ç”¨vue</h2>
<p>CDNå¼•å…¥çš„vueçš„jsæ–‡ä»¶éƒ½éœ€è¦èƒ½å¤Ÿè§£æhtmlæ–‡ä»¶ä¸­å“ªäº›åŒ…å«vueçš„è¯­æ³•éƒ¨åˆ†å¹¶ä¸”æ›¿æ¢æ‰ä»–ä»¬ï¼Œä¸Šè¿°çš„<code>@vue/compiler-dom</code>å°±æ˜¯ç”¨æ¥å¹²è¿™ä¸ªçš„ï¼Œä½†æ˜¯CDNçš„jsæ–‡ä»¶åŒ…å«ç¼–è¯‘å™¨, è€Œç»è¿‡Viteè¿™ç§æ¶æ„å·¥å…·æ‰“åŒ…åå®Œå…¨å¯ä»¥å»æ‰ç¼–è¯‘å™¨,åªç•™è¿è¡Œæ—¶vueæ–‡ä»¶å°±å¯ä»¥äº†</p>
<h2 data-id="heading-2">é€‰é¡¹å¼API</h2>
<p>vueæä¾›ä¸€ç§åŸºäºç»„åˆå¼Apiä¹‹ä¸Šçš„é€‰é¡¹å¼api,ä½¿ç”¨è¦æ¯”ç»„åˆå¼å†™æ³•ç®€å•å¾ˆå¤šï¼Œä¹Ÿæ›´é€‚åˆä¹ æƒ¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä½¿ç”¨è€…,è¯·çœ‹ä¸‹é¢çš„ä¾‹å­</p>
<pre><code class="hljs language-html" lang="html">//è¿™é‡Œå°†htmlçš„éƒ¨åˆ†å‡å»ä¸€äº›ï¼Œé¿å…ä¸€äº›æ— å…³ç´§è¦çš„å†…å®¹
//æ ·å¼éƒ¨åˆ†å¦‚ä¸‹
<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-class">.counter</span> {
        <span class="hljs-attribute">display</span>: flex;
        <span class="hljs-attribute">align-items</span>: center;
        <span class="hljs-attribute">justify-content</span>: center;
        <span class="hljs-attribute">column-gap</span>: <span class="hljs-number">15px</span>;
        <span class="hljs-attribute">width</span>: <span class="hljs-number">120px</span>;
        <span class="hljs-attribute">margin</span>: <span class="hljs-number">100px</span>;
        <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;
        user-select: none;
        <span class="hljs-attribute">cursor</span>: pointer;
    }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"counter"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"decrement"</span>&gt;</span>-<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{count}}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"increment"</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./index.js"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
</code></pre>
<p>ä¸‹é¢æ˜¯index.jsæ–‡ä»¶</p>
<pre><code class="hljs language-javascript" lang="javascript">
<span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span> = {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>
    }
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">increment</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++;
    },
    <span class="hljs-title function_">decrement</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>--;
    }
  },
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æŒ‚è½½"</span>);
  }
};

<span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>);

app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">"#app"</span>);
<span class="hljs-comment">//createAppä¼ å…¥çš„æ ¹ç»„ä»¶ï¼Œè¦æ˜¯è¿™ä¸ªç»„ä»¶æ²¡æœ‰è‡ªå·±çš„templateéƒ¨åˆ†ï¼Œå°±ä¼šæŠŠè·Ÿå®¹å™¨(åœ¨è¿™é‡Œæ˜¯#app)çš„`innerHTML`ä½œä¸ºå®ƒçš„æ¨¡æ¿,ä¹Ÿå¯ä»¥å†™æˆä¸‹é¢è¿™æ ·</span>

<span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span> = {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>
    }
  },
  <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div class="counter"&gt;
      &lt;span @click="decrement"&gt;-&lt;/span&gt;
      &lt;p&gt;{{count}}&lt;/p&gt;
      &lt;span @click="increment"&gt;+&lt;/span&gt;
    &lt;/div&gt;`</span>,
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">increment</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++;
    },
    <span class="hljs-title function_">decrement</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>--;
    }
  },
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æŒ‚è½½"</span>);
  }
};

<span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>);

<span class="hljs-keyword">const</span> rootComponents = app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">"#app"</span>);

<span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>);

app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">"#app"</span>);
</code></pre>

<h2 data-id="heading-3">renderå’Œtemplate</h2>
<h3 data-id="heading-4">render</h3>
<p>åƒä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ˜¯åœ¨domä¸­å†…åµŒäº†vueè¯­æ³•ï¼Œé‚£ä¹ˆå°±ä¸€å®šè¦ç»è¿‡ç¼–è¯‘çš„é˜¶æ®µäº†, æˆ‘ä»¬å¯ä»¥å®šä¹‰renderå‡½æ•°ï¼Œç›´æ¥å†™renderå‡½æ•°å¯ä»¥ä¸ç»è¿‡ç¼–è¯‘ç›´æ¥è¿è¡Œï¼Œåœ¨æè¿°è¿™ç‚¹å‰ï¼Œæˆ‘ä»¬å…ˆä»‹ç»ä¸€ä¸‹<code>render</code>ï¼Œ æŒ‰vueå®˜æ–¹æ–‡æ¡£æ¥è¯´,<code>renderæ˜¯å­—ç¬¦ä¸²æ¨¡æ¿çš„ä¸€ç§æ›¿ä»£ï¼Œå¯ä»¥è®©ä½ åˆ©ç”¨JavaScriptçš„ä¸°å¯Œè¡¨è¾¾åŠ›æ¥å®Œå…¨ç¼–ç¨‹å¼åœ°å£°æ˜ç»„ä»¶æœ€ç»ˆçš„æ¸²æŸ“è¾“å‡º, é¢„ç¼–è¯‘çš„æ¨¡æ¿å¦‚æœå•æ–‡ä»¶ç»„ä»¶ä¸­çš„æ¨¡æ¿ï¼Œä¼šåœ¨æ„å»ºæ—¶è¢«ç¼–è¯‘ä¸ºrenderé€‰é¡¹,å¦‚æœä¸€ä¸ªç»„ä»¶ä¸­åŒæ—¶å­˜åœ¨renderå’Œtemplate,åˆ™renderå°†å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§</code>,</p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹ï¼Œå¦‚æœæ˜¯è®©vueå®æ—¶çš„ç¼–è¯‘å†…åµŒvueè¯­æ³•çš„dom,ä¼šè¢«ç¼–è¯‘æˆä»€ä¹ˆæ ·å­,</p>
<p><img alt="" src="" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå½“ä½ åœ¨domåµŒå…¥vueè¯­æ³•çš„æ—¶å€™,æ²¡æœ‰ç”Ÿæˆrenderå‡½æ•°ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä½ å¼•å…¥çš„cdnçš„vueç‰ˆæœ¬ä¸­åŒ…å«ç¼–è¯‘å™¨,å¦‚æœæ˜¯ç¼–è¯‘çš„SFCæ¨¡æ¿ç»“æœæ˜¯ä»€ä¹ˆæ ·çš„?</p>
<p><img alt="" src="" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ç”Ÿæˆäº†renderå‡½æ•°ï¼Œè¿™ä¸ªrenderå‡½æ•°æ˜¯å¯ä»¥ç›´æ¥è¢«è¿è¡Œæ—¶çš„vueåŒ…æ‰§è¡Œçš„ï¼Œä¸éœ€è¦åŠ å…¥ç¼–è¯‘å™¨,æ‰€ä»¥å¯ä»¥çœ‹åˆ°æœ‰æ²¡æœ‰renderæ˜¯ä¸¤å›äº‹ï¼Œæœ‰renderå°±ç›´æ¥ä½¿ç”¨render,æ²¡æœ‰renderï¼Œé‚£ä¹ˆå°±ä¼šè¯»å–templateå­—ç¬¦ä¸²ï¼Œ è¿™ä¸ªæ—¶å€™å°±éœ€è¦ç¼–è¯‘å™¨äº† , æˆ‘ä»¬åœ¨è¿™é‡Œå°è¯•æŠŠä¸Šé¢åœ¨é€‰é¡¹å¼APIéƒ¨åˆ†é‡Œå†™çš„ä¾‹å­ç”¨renderå‡½æ•°å†™ä¸€é, <code>vue</code>ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªåä¸ºhå‡½æ•°çš„api,ä¸“é—¨ç”¨äºç»™å¼€å‘è€…æ‰‹åŠ¨çš„ç¼–å†™renderå‡½æ•°ï¼Œå…·ä½“å¯ä»¥çœ‹ [hå‡½æ•°](<a href="https://link.juejin.cn?target=https%3A%2F%2Fcn.vuejs.org%2Fapi%2Foptions-rendering.html%23render" target="_blank" title="https://cn.vuejs.org/api/options-rendering.html#render" ref="nofollow noopener noreferrer">æ¸²æŸ“é€‰é¡¹ | Vue.js</a>), æ”¹å†™åçš„ä¾‹å­å¦‚ä¸‹</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> h = <span class="hljs-title class_">Vue</span>.<span class="hljs-property">h</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span> = {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>
    }
  },
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>){
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">h</span>(<span class="hljs-string">"div"</span>, {
      <span class="hljs-attr">class</span>: <span class="hljs-string">"counter"</span>
    },  [
      <span class="hljs-title function_">h</span>(<span class="hljs-string">"span"</span>, {
        <span class="hljs-attr">onClick</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">decrement</span>()
      }, <span class="hljs-string">"-"</span>),
      <span class="hljs-title function_">h</span>(<span class="hljs-string">"p"</span>, <span class="hljs-literal">null</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>),
      <span class="hljs-title function_">h</span>(<span class="hljs-string">"span"</span>, {
        <span class="hljs-attr">onClick</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">increment</span>()
      }, <span class="hljs-string">"+"</span>)
    ]);
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">increment</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++;
    },
    <span class="hljs-title function_">decrement</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>--;
    }
  },
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æŒ‚è½½"</span>);
  }
};

<span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>);


app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">"#app"</span>);

<span class="hljs-comment">//index.js</span>
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥çœ‹å®ƒåœ¨SFCä¸­ç¼–è¯‘åçš„ç»“æœæ˜¯ä»€ä¹ˆæ ·çš„,</p>
<p><img alt="" src="" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒSFCç¼–è¯‘æ’ä»¶åŸºäºæ²¡æœ‰åšä»€ä¹ˆæ›´æ”¹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠè¿™ä¸ªAppç»„ä»¶é…åˆvueè¿è¡Œæ—¶çš„ç‰ˆæœ¬ä½¿ç”¨ï¼Œçœ‹ä¸‹é¢çš„htmlä»£ç </p>
<pre><code class="hljs language-html" lang="html">  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-class">.counter</span> {
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">align-items</span>: center;
      <span class="hljs-attribute">justify-content</span>: center;
      <span class="hljs-attribute">column-gap</span>: <span class="hljs-number">15px</span>;
      <span class="hljs-attribute">width</span>: <span class="hljs-number">120px</span>;
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;
      user-select: none;
      <span class="hljs-attribute">cursor</span>: pointer;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>

  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.bootcdn.net/ajax/libs/vue/3.5.22/vue.runtime.global.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./index.js"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
</code></pre>
<h3 data-id="heading-5">template</h3>
<p>åœ¨ä¸Šé¢æˆ‘ä»¬æˆ‘ä»¬è®¨è®ºtemplateçš„æ—¶å€™è¯´ï¼Œå¦‚æœæ ¹ç»„ä»¶æ²¡æœ‰templateå’Œrender, é‚£ä¹ˆæ ¹ç»„ä»¶ä¼šæŠŠapp.mount("#app")ä¸­#appä»£è¡¨çš„å…ƒç´ çš„innerHTMLä½œä¸ºæ ¹ç»„ä»¶çš„template,é‚£ä¹ˆéæ ¹ç»„ä»¶å‘¢ï¼Œéæ ¹ç»„ä»¶å°±æ²¡æœ‰templateäº†ï¼Œé‚£ä¹ˆéæ ¹ç»„ä»¶æ€ä¹ˆä»htmlæ¨¡æ¿ä¸Šè·å¾—templateå­—ç¬¦ä¸²å‘¢,templateæ¥å—ä¸¤ç§å½¢å¼ï¼Œä¸€ç§å°±æ˜¯å†…åµŒvueè¯­æ³•çš„æè¿°domçš„å­—ç¬¦ä¸²ï¼Œä¸€ç§å…è®¸ä½ å°†å­—ç¬¦ä¸²ä»¥<code>#</code>å¼€å¤´ï¼Œå®ƒä¼šè¢«vueä½œä¸ºquerySelectoré€‰æ‹©å™¨ä½¿ç”¨ï¼Œ<code>å°†é€‰ä¸­çš„å…ƒç´ çš„innerHTMLä½œä¸ºæ¨¡æ¿å­—ç¬¦å­—ç¬¦ä¸²ï¼Œè¿™å°±è®©æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŸç”Ÿçš„templateå…ƒç´ çš„ä¹¦å†™æºæ¨¡æ¿</code>å¦‚ä¸‹</p>
<pre><code class="hljs language-html" lang="html">  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-class">.counter</span> {
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">align-items</span>: center;
      <span class="hljs-attribute">justify-content</span>: center;
      <span class="hljs-attribute">column-gap</span>: <span class="hljs-number">15px</span>;
      <span class="hljs-attribute">width</span>: <span class="hljs-number">120px</span>;
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;
      user-select: none;
      <span class="hljs-attribute">cursor</span>: pointer;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"temp"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"temp"</span>&gt;</span>å½“å‰çš„countä¸º: {{count}}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./node_modules/vue/dist/vue.global.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./index.js"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Compo</span> = {
  <span class="hljs-attr">props</span>:{
      <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>
  },
  <span class="hljs-attr">template</span>: <span class="hljs-string">"#temp"</span>
};


<span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span> = {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>
    }
  },
  <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div class="counter"&gt;
      &lt;span @click="decrement"&gt;-&lt;/span&gt;
      &lt;p&gt;{{count}}&lt;/p&gt;
      &lt;span @click="increment"&gt;+&lt;/span&gt;
    &lt;/div&gt;
    &lt;Compo :count&gt;&lt;/Compo&gt;`</span>,
  <span class="hljs-attr">components</span>: {
    <span class="hljs-title class_">Compo</span>
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">increment</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++;
    },
    <span class="hljs-title function_">decrement</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>--;
    }
  },
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æŒ‚è½½"</span>);
  }
};



<span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>);


app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">"#app"</span>);
</code></pre>
<p>è¿™å°±è®©ä½ åœ¨åŸç”Ÿçš„HTMLä¸Šä¹Ÿå…·æœ‰äº†ç»„ä»¶åŒ–çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬ç»§ç»­é‡æ„ä¸Šé¢çš„ä»£ç ï¼Œçœ‹çœ‹å¦‚æœæ˜¯åœ¨htmlä¸Šä½¿ç”¨ç»„ä»¶åŒ–æ˜¯æ€æ ·çš„, æŸ¥çœ‹ä»¥ä¸‹çš„ä¾‹å­</p>
<pre><code class="hljs language-html" lang="html">  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-class">.counter</span> {
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">align-items</span>: center;
      <span class="hljs-attribute">justify-content</span>: center;
      <span class="hljs-attribute">column-gap</span>: <span class="hljs-number">15px</span>;
      <span class="hljs-attribute">width</span>: <span class="hljs-number">120px</span>;
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;
      user-select: none;
      <span class="hljs-attribute">cursor</span>: pointer;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>

  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

  <span class="hljs-comment">&lt;!-- Appç»„ä»¶ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"appTemplate"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"counter"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"decrement"</span>&gt;</span>-<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{count}}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"increment"</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Compo</span> <span class="hljs-attr">:count</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Compo</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>


  <span class="hljs-comment">&lt;!-- Compo ç»„ä»¶ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"temp"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"temp"</span>&gt;</span>å½“å‰çš„countä¸º: {{count}}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>


  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./node_modules/vue/dist/vue.global.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./index.js"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Compo</span> = {
  <span class="hljs-attr">props</span>:{
      <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>
  },
  <span class="hljs-attr">template</span>: <span class="hljs-string">"#temp"</span>
};

<span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span> = {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>
    }
  },
  <span class="hljs-attr">template</span>: <span class="hljs-string">"#appTemplate"</span>,
  <span class="hljs-attr">components</span>: {
    <span class="hljs-title class_">Compo</span>
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">increment</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++;
    },
    <span class="hljs-title function_">decrement</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>--;
    }
  },
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æŒ‚è½½"</span>);
  }
};

<span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>);

app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">"#app"</span>);
</code></pre>
<h2 data-id="heading-6">SFC</h2>
<p>æˆ‘ä»¬å¦‚æœæ˜¯æ‰“ç®—ä½¿ç”¨vueå®Œæ•´çš„å†™å®Œæ•´ä¸ªé¡¹ç›®ï¼Œ å°±å¾ˆé€‚åˆä½¿ç”¨å•æ–‡ä»¶ç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯<code>.vue</code>æ–‡ä»¶, å®ƒçš„è‹±æ–‡åå­—æ˜¯<code>Single-File Components</code>,å°±æ˜¯SFCçš„ç¼©å†™,ä¹Ÿå°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ä»£è¡¨ç€ä¸€ä¸ªç»„ä»¶ï¼Œæˆ‘ä»¬æŠŠç»„ä»¶çš„æ¨¡æ¿ï¼Œæ ·å¼ï¼Œé€»è¾‘éƒ½å†™åœ¨è¿™ä¸€ä¸ªæ–‡ä»¶å†…,åœ¨ä½¿ç”¨viteè¿™æ ·çš„æ„å»ºå·¥å…·çš„æ—¶å€™ï¼Œå½“ä¸‹è½½å®Œæ‰€æœ‰ä¾èµ–åï¼Œå¯ä»¥åœ¨æˆ‘ä»¬çš„<code>node_module</code>é‡Œçœ‹åˆ°ä¸‹è½½çš„vueï¼Œæœ‰å‡ ä¸ªä¾èµ–æ’ä»¶, å…¶ä¸­ä¸€ä¸ªåä¸º<code>@vue/compiler-sfc</code>,è¿™ä¸ªå°±æ˜¯ç”¨äºè§£ææˆ‘ä»¬çš„å•æ–‡ä»¶ç»„ä»¶çš„ï¼Œå…¶ä¸­è¿˜åŒ…å«ä¸€ä¸ªåä¸º<code>@vue/compiler-dom</code>çš„ä¾èµ–åº“,ä¸‹é¢è§£é‡Šè¿™ä¸ªåº“çš„ä½œç”¨</p>
<h2 data-id="heading-7">CDNä½¿ç”¨vue</h2>
<p>CDNå¼•å…¥çš„vueçš„jsæ–‡ä»¶éƒ½éœ€è¦èƒ½å¤Ÿè§£æhtmlæ–‡ä»¶ä¸­å“ªäº›åŒ…å«vueçš„è¯­æ³•éƒ¨åˆ†å¹¶ä¸”æ›¿æ¢æ‰ä»–ä»¬ï¼Œä¸Šè¿°çš„<code>@vue/compiler-dom</code>å°±æ˜¯ç”¨æ¥å¹²è¿™ä¸ªçš„ï¼Œä½†æ˜¯CDNçš„jsæ–‡ä»¶åŒ…å«ç¼–è¯‘å™¨, è€Œç»è¿‡Viteè¿™ç§æ¶æ„å·¥å…·æ‰“åŒ…åå®Œå…¨å¯ä»¥å»æ‰ç¼–è¯‘å™¨,åªç•™è¿è¡Œæ—¶vueæ–‡ä»¶å°±å¯ä»¥äº†</p>
<h2 data-id="heading-8">é€‰é¡¹å¼API</h2>
<p>vueæä¾›ä¸€ç§åŸºäºç»„åˆå¼Apiä¹‹ä¸Šçš„é€‰é¡¹å¼api,ä½¿ç”¨è¦æ¯”ç»„åˆå¼å†™æ³•ç®€å•å¾ˆå¤šï¼Œä¹Ÿæ›´é€‚åˆä¹ æƒ¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä½¿ç”¨è€…,è¯·çœ‹ä¸‹é¢çš„ä¾‹å­</p>
<pre><code class="hljs language-html" lang="html">//è¿™é‡Œå°†htmlçš„éƒ¨åˆ†å‡å»ä¸€äº›ï¼Œé¿å…ä¸€äº›æ— å…³ç´§è¦çš„å†…å®¹
//æ ·å¼éƒ¨åˆ†å¦‚ä¸‹
<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-class">.counter</span> {
        <span class="hljs-attribute">display</span>: flex;
        <span class="hljs-attribute">align-items</span>: center;
        <span class="hljs-attribute">justify-content</span>: center;
        <span class="hljs-attribute">column-gap</span>: <span class="hljs-number">15px</span>;
        <span class="hljs-attribute">width</span>: <span class="hljs-number">120px</span>;
        <span class="hljs-attribute">margin</span>: <span class="hljs-number">100px</span>;
        <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;
        user-select: none;
        <span class="hljs-attribute">cursor</span>: pointer;
    }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"counter"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"decrement"</span>&gt;</span>-<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{count}}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"increment"</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./index.js"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
</code></pre>
<p>ä¸‹é¢æ˜¯index.jsæ–‡ä»¶</p>
<pre><code class="hljs language-javascript" lang="javascript">
<span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span> = {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>
    }
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">increment</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++;
    },
    <span class="hljs-title function_">decrement</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>--;
    }
  },
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æŒ‚è½½"</span>);
  }
};

<span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>);

app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">"#app"</span>);
<span class="hljs-comment">//createAppä¼ å…¥çš„æ ¹ç»„ä»¶ï¼Œè¦æ˜¯è¿™ä¸ªç»„ä»¶æ²¡æœ‰è‡ªå·±çš„templateéƒ¨åˆ†ï¼Œå°±ä¼šæŠŠè·Ÿå®¹å™¨(åœ¨è¿™é‡Œæ˜¯#app)çš„`innerHTML`ä½œä¸ºå®ƒçš„æ¨¡æ¿,ä¹Ÿå¯ä»¥å†™æˆä¸‹é¢è¿™æ ·</span>

<span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span> = {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>
    }
  },
  <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div class="counter"&gt;
      &lt;span @click="decrement"&gt;-&lt;/span&gt;
      &lt;p&gt;{{count}}&lt;/p&gt;
      &lt;span @click="increment"&gt;+&lt;/span&gt;
    &lt;/div&gt;`</span>,
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">increment</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++;
    },
    <span class="hljs-title function_">decrement</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>--;
    }
  },
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æŒ‚è½½"</span>);
  }
};

<span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>);

<span class="hljs-keyword">const</span> rootComponents = app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">"#app"</span>);

<span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>);

app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">"#app"</span>);
</code></pre>

<h2 data-id="heading-9">renderå’Œtemplate</h2>
<h3 data-id="heading-10">render</h3>
<p>åƒä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ˜¯åœ¨domä¸­å†…åµŒäº†vueè¯­æ³•ï¼Œé‚£ä¹ˆå°±ä¸€å®šè¦ç»è¿‡ç¼–è¯‘çš„é˜¶æ®µäº†, æˆ‘ä»¬å¯ä»¥å®šä¹‰renderå‡½æ•°ï¼Œç›´æ¥å†™renderå‡½æ•°å¯ä»¥ä¸ç»è¿‡ç¼–è¯‘ç›´æ¥è¿è¡Œï¼Œåœ¨æè¿°è¿™ç‚¹å‰ï¼Œæˆ‘ä»¬å…ˆä»‹ç»ä¸€ä¸‹<code>render</code>ï¼Œ æŒ‰vueå®˜æ–¹æ–‡æ¡£æ¥è¯´,<code>renderæ˜¯å­—ç¬¦ä¸²æ¨¡æ¿çš„ä¸€ç§æ›¿ä»£ï¼Œå¯ä»¥è®©ä½ åˆ©ç”¨JavaScriptçš„ä¸°å¯Œè¡¨è¾¾åŠ›æ¥å®Œå…¨ç¼–ç¨‹å¼åœ°å£°æ˜ç»„ä»¶æœ€ç»ˆçš„æ¸²æŸ“è¾“å‡º, é¢„ç¼–è¯‘çš„æ¨¡æ¿å¦‚æœå•æ–‡ä»¶ç»„ä»¶ä¸­çš„æ¨¡æ¿ï¼Œä¼šåœ¨æ„å»ºæ—¶è¢«ç¼–è¯‘ä¸ºrenderé€‰é¡¹,å¦‚æœä¸€ä¸ªç»„ä»¶ä¸­åŒæ—¶å­˜åœ¨renderå’Œtemplate,åˆ™renderå°†å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§</code>,</p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹ï¼Œå¦‚æœæ˜¯è®©vueå®æ—¶çš„ç¼–è¯‘å†…åµŒvueè¯­æ³•çš„dom,ä¼šè¢«ç¼–è¯‘æˆä»€ä¹ˆæ ·å­,</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7976b1d5193b40f4b56863e2bf17c15a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LaF57ud5aSn5biF5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771311405&amp;x-signature=tYA1UcVeVxBFZHDRf0Jj96GXg8U%3D" alt="è”æƒ³æˆªå›¾_20260210120439.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå½“ä½ åœ¨domåµŒå…¥vueè¯­æ³•çš„æ—¶å€™,æ²¡æœ‰ç”Ÿæˆrenderå‡½æ•°ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä½ å¼•å…¥çš„cdnçš„vueç‰ˆæœ¬ä¸­åŒ…å«ç¼–è¯‘å™¨,å¦‚æœæ˜¯ç¼–è¯‘çš„SFCæ¨¡æ¿ç»“æœæ˜¯ä»€ä¹ˆæ ·çš„?</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61637bf728274b368fe3dda6a93eec32~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LaF57ud5aSn5biF5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771311405&amp;x-signature=4%2BSHViZkbidqNFo8R7kDvScKsO0%3D" alt="è”æƒ³æˆªå›¾_20260210120639.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ç”Ÿæˆäº†renderå‡½æ•°ï¼Œè¿™ä¸ªrenderå‡½æ•°æ˜¯å¯ä»¥ç›´æ¥è¢«è¿è¡Œæ—¶çš„vueåŒ…æ‰§è¡Œçš„ï¼Œä¸éœ€è¦åŠ å…¥ç¼–è¯‘å™¨,æ‰€ä»¥å¯ä»¥çœ‹åˆ°æœ‰æ²¡æœ‰renderæ˜¯ä¸¤å›äº‹ï¼Œæœ‰renderå°±ç›´æ¥ä½¿ç”¨render,æ²¡æœ‰renderï¼Œé‚£ä¹ˆå°±ä¼šè¯»å–templateå­—ç¬¦ä¸²ï¼Œ è¿™ä¸ªæ—¶å€™å°±éœ€è¦ç¼–è¯‘å™¨äº† , æˆ‘ä»¬åœ¨è¿™é‡Œå°è¯•æŠŠä¸Šé¢åœ¨é€‰é¡¹å¼APIéƒ¨åˆ†é‡Œå†™çš„ä¾‹å­ç”¨renderå‡½æ•°å†™ä¸€é, <code>vue</code>ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªåä¸ºhå‡½æ•°çš„api,ä¸“é—¨ç”¨äºç»™å¼€å‘è€…æ‰‹åŠ¨çš„ç¼–å†™renderå‡½æ•°ï¼Œå…·ä½“å¯ä»¥çœ‹ [hå‡½æ•°](<a href="https://link.juejin.cn?target=https%3A%2F%2Fcn.vuejs.org%2Fapi%2Foptions-rendering.html%23render" target="_blank" title="https://cn.vuejs.org/api/options-rendering.html#render" ref="nofollow noopener noreferrer">æ¸²æŸ“é€‰é¡¹ | Vue.js</a>), æ”¹å†™åçš„ä¾‹å­å¦‚ä¸‹</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> h = <span class="hljs-title class_">Vue</span>.<span class="hljs-property">h</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span> = {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>
    }
  },
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>){
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">h</span>(<span class="hljs-string">"div"</span>, {
      <span class="hljs-attr">class</span>: <span class="hljs-string">"counter"</span>
    },  [
      <span class="hljs-title function_">h</span>(<span class="hljs-string">"span"</span>, {
        <span class="hljs-attr">onClick</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">decrement</span>()
      }, <span class="hljs-string">"-"</span>),
      <span class="hljs-title function_">h</span>(<span class="hljs-string">"p"</span>, <span class="hljs-literal">null</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>),
      <span class="hljs-title function_">h</span>(<span class="hljs-string">"span"</span>, {
        <span class="hljs-attr">onClick</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">increment</span>()
      }, <span class="hljs-string">"+"</span>)
    ]);
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">increment</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++;
    },
    <span class="hljs-title function_">decrement</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>--;
    }
  },
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æŒ‚è½½"</span>);
  }
};

<span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>);


app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">"#app"</span>);

<span class="hljs-comment">//index.js</span>
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥çœ‹å®ƒåœ¨SFCä¸­ç¼–è¯‘åçš„ç»“æœæ˜¯ä»€ä¹ˆæ ·çš„,
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7348d6c57827411a83ddb53c3acb2daa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LaF57ud5aSn5biF5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771311405&amp;x-signature=A0uJ8gFPk4oYydlCwkUk3zAclHw%3D" alt="è”æƒ³æˆªå›¾_20260210125956.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒSFCç¼–è¯‘æ’ä»¶åŸºäºæ²¡æœ‰åšä»€ä¹ˆæ›´æ”¹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠè¿™ä¸ªAppç»„ä»¶é…åˆvueè¿è¡Œæ—¶çš„ç‰ˆæœ¬ä½¿ç”¨ï¼Œçœ‹ä¸‹é¢çš„htmlä»£ç </p>
<pre><code class="hljs language-html" lang="html">  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-class">.counter</span> {
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">align-items</span>: center;
      <span class="hljs-attribute">justify-content</span>: center;
      <span class="hljs-attribute">column-gap</span>: <span class="hljs-number">15px</span>;
      <span class="hljs-attribute">width</span>: <span class="hljs-number">120px</span>;
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;
      user-select: none;
      <span class="hljs-attribute">cursor</span>: pointer;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>

  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.bootcdn.net/ajax/libs/vue/3.5.22/vue.runtime.global.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./index.js"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
</code></pre>
<h3 data-id="heading-11">template</h3>
<p>åœ¨ä¸Šé¢æˆ‘ä»¬æˆ‘ä»¬è®¨è®ºtemplateçš„æ—¶å€™è¯´ï¼Œå¦‚æœæ ¹ç»„ä»¶æ²¡æœ‰templateå’Œrender, é‚£ä¹ˆæ ¹ç»„ä»¶ä¼šæŠŠapp.mount("#app")ä¸­#appä»£è¡¨çš„å…ƒç´ çš„innerHTMLä½œä¸ºæ ¹ç»„ä»¶çš„template,é‚£ä¹ˆéæ ¹ç»„ä»¶å‘¢ï¼Œéæ ¹ç»„ä»¶å°±æ²¡æœ‰templateäº†ï¼Œé‚£ä¹ˆéæ ¹ç»„ä»¶æ€ä¹ˆä»htmlæ¨¡æ¿ä¸Šè·å¾—templateå­—ç¬¦ä¸²å‘¢,templateæ¥å—ä¸¤ç§å½¢å¼ï¼Œä¸€ç§å°±æ˜¯å†…åµŒvueè¯­æ³•çš„æè¿°domçš„å­—ç¬¦ä¸²ï¼Œä¸€ç§å…è®¸ä½ å°†å­—ç¬¦ä¸²ä»¥<code>#</code>å¼€å¤´ï¼Œå®ƒä¼šè¢«vueä½œä¸ºquerySelectoré€‰æ‹©å™¨ä½¿ç”¨ï¼Œ<code>å°†é€‰ä¸­çš„å…ƒç´ çš„innerHTMLä½œä¸ºæ¨¡æ¿å­—ç¬¦å­—ç¬¦ä¸²ï¼Œè¿™å°±è®©æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŸç”Ÿçš„templateå…ƒç´ çš„ä¹¦å†™æºæ¨¡æ¿</code>å¦‚ä¸‹</p>
<pre><code class="hljs language-html" lang="html">  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-class">.counter</span> {
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">align-items</span>: center;
      <span class="hljs-attribute">justify-content</span>: center;
      <span class="hljs-attribute">column-gap</span>: <span class="hljs-number">15px</span>;
      <span class="hljs-attribute">width</span>: <span class="hljs-number">120px</span>;
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;
      user-select: none;
      <span class="hljs-attribute">cursor</span>: pointer;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"temp"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"temp"</span>&gt;</span>å½“å‰çš„countä¸º: {{count}}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./node_modules/vue/dist/vue.global.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./index.js"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Compo</span> = {
  <span class="hljs-attr">props</span>:{
      <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>
  },
  <span class="hljs-attr">template</span>: <span class="hljs-string">"#temp"</span>
};


<span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span> = {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>
    }
  },
  <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div class="counter"&gt;
      &lt;span @click="decrement"&gt;-&lt;/span&gt;
      &lt;p&gt;{{count}}&lt;/p&gt;
      &lt;span @click="increment"&gt;+&lt;/span&gt;
    &lt;/div&gt;
    &lt;Compo :count&gt;&lt;/Compo&gt;`</span>,
  <span class="hljs-attr">components</span>: {
    <span class="hljs-title class_">Compo</span>
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">increment</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++;
    },
    <span class="hljs-title function_">decrement</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>--;
    }
  },
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æŒ‚è½½"</span>);
  }
};



<span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>);


app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">"#app"</span>);
</code></pre>
<p>è¿™å°±è®©ä½ åœ¨åŸç”Ÿçš„HTMLä¸Šä¹Ÿå…·æœ‰äº†ç»„ä»¶åŒ–çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬ç»§ç»­é‡æ„ä¸Šé¢çš„ä»£ç ï¼Œçœ‹çœ‹å¦‚æœæ˜¯åœ¨htmlä¸Šä½¿ç”¨ç»„ä»¶åŒ–æ˜¯æ€æ ·çš„, æŸ¥çœ‹ä»¥ä¸‹çš„ä¾‹å­</p>
<pre><code class="hljs language-html" lang="html">  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-class">.counter</span> {
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">align-items</span>: center;
      <span class="hljs-attribute">justify-content</span>: center;
      <span class="hljs-attribute">column-gap</span>: <span class="hljs-number">15px</span>;
      <span class="hljs-attribute">width</span>: <span class="hljs-number">120px</span>;
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;
      user-select: none;
      <span class="hljs-attribute">cursor</span>: pointer;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>

  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

  <span class="hljs-comment">&lt;!-- Appç»„ä»¶ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"appTemplate"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"counter"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"decrement"</span>&gt;</span>-<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{count}}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"increment"</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Compo</span> <span class="hljs-attr">:count</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Compo</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>


  <span class="hljs-comment">&lt;!-- Compo ç»„ä»¶ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"temp"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"temp"</span>&gt;</span>å½“å‰çš„countä¸º: {{count}}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>


  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./node_modules/vue/dist/vue.global.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./index.js"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Compo</span> = {
  <span class="hljs-attr">props</span>:{
      <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>
  },
  <span class="hljs-attr">template</span>: <span class="hljs-string">"#temp"</span>
};

<span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span> = {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>
    }
  },
  <span class="hljs-attr">template</span>: <span class="hljs-string">"#appTemplate"</span>,
  <span class="hljs-attr">components</span>: {
    <span class="hljs-title class_">Compo</span>
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">increment</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++;
    },
    <span class="hljs-title function_">decrement</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>--;
    }
  },
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æŒ‚è½½"</span>);
  }
};

<span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>);

app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">"#app"</span>);
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯ä»£ç†æ¥å£æŠ¥é”™é—®é¢˜æ’æŸ¥]]></title>    <link>https://juejin.cn/post/7604701848151310336</link>    <guid>https://juejin.cn/post/7604701848151310336</guid>    <pubDate>2026-02-10T06:35:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604701848151310336" data-draft-id="7604779604125564928" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯ä»£ç†æ¥å£æŠ¥é”™é—®é¢˜æ’æŸ¥"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-10T06:35:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="web_bee"/> <meta itemprop="url" content="https://juejin.cn/user/428665740231"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯ä»£ç†æ¥å£æŠ¥é”™é—®é¢˜æ’æŸ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/428665740231/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    web_bee
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-10T06:35:10.000Z" title="Tue Feb 10 2026 06:35:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>éœ€æ±‚æè¿°ï¼š</strong></p>
<p>æœ€è¿‘åœ¨çœ‹ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæƒ³å‰ç«¯æœ¬åœ°è°ƒè¯•ï¼Œè°ƒç”¨å®ƒçº¿ä¸Šåœ°å€ï¼š<code>https://****.ai/apps</code></p>
<p><strong>å®ç°æ–¹æ¡ˆï¼š</strong></p>
<p>å‰ç«¯ç›´æ¥é…ç½®ï¼Œä»£ç†å®ƒçº¿ä¸Šåœ°å€</p>
<h2 data-id="heading-0">å®ç°ï¼š</h2>
<p>å‰ç«¯ <code>next.config.ts</code> é…ç½®ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">const</span> nextConfig: NextConfig = {
 Â <span class="hljs-comment">// ...</span>
 Â <span class="hljs-function"><span class="hljs-keyword">async</span> <span class="hljs-title">rewrites</span>()</span> {
 Â  Â <span class="hljs-keyword">return</span> [
 Â  Â   {
 Â  Â  Â  Â source: <span class="hljs-string">'/console/api/:path*'</span>,
 Â  Â  Â  Â destination: `https:<span class="hljs-comment">//cloud.dify.ai/console/api/:path*`,</span>
 Â  Â   }
 Â   ]
  }
}
</code></pre>
<p>ä»£ç†çš„ç»“æœæ˜¯ ç›¸å…³æ¥å£ä½¿ç”¨è°ƒç”¨ä¸æˆåŠŸï¼›</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8b8108483e843329c08aef6c4a2f169~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2ViX2JlZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771310533&amp;x-signature=3i%2BcUqlpCy1uIB5bFJgTn3fxMBE%3D" alt="diy1.png" loading="lazy"/></p>
<p>ç†è®ºä¸Š çœŸå®çš„ä»£ç†åœ°å€æ˜¯ï¼š</p>
<p><code>https://cloud.dify.ai/console/api/system-features</code></p>
<p>åœ¨é¡¹ç›®ä¸­è®¿é—® æ— æ³•æ­£å¸¸è°ƒç”¨ï¼›</p>
<p><strong>ç„¶åæˆ‘é€šè¿‡æµè§ˆå™¨ç›´æ¥è®¿é—®ï¼›</strong></p>
<p>é€šè¿‡æµè§ˆå™¨æ˜¯å¯ä»¥æ­£å¸¸è®¿é—®çš„ï¼›âœ…</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a37f63e2f8043919a2d1cb636eb9d63~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2ViX2JlZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771310533&amp;x-signature=3hJetJleW%2FHUBT18ckUG5iblklc%3D" alt="dify2.png" loading="lazy"/></p>
<p><strong>é—®é¢˜ï¼š</strong></p>
<p>æµè§ˆå™¨å¯ä»¥è®¿é—®ï¼Œå‰ç«¯é¡¹ç›®ä¸­ä»£ç†æ—¶ä¸èƒ½è®¿é—®</p>
<p><strong>ç¯å¢ƒï¼š</strong></p>
<p>æœ¬åœ°ç½‘ç»œç¯å¢ƒæ˜¯ï¼Œå¼€å¯äº†ç›¸å…³ç½‘ç»œç¯å¢ƒ</p>
<p><strong>æœ€ç»ˆé—®é¢˜ç¡®è®¤ï¼š</strong></p>
<p><strong>Next.js çš„ <code>rewrites</code> ä»£ç†è¯·æ±‚æ²¡æœ‰èµ°æœ¬åœ° Clash ä»£ç†</strong>ã€‚è¿™æ˜¯å› ä¸º Next.js åœ¨æœåŠ¡ç«¯ï¼ˆNode.js ç¯å¢ƒï¼‰æ‰§è¡Œ <code>rewrites</code> æ—¶ï¼Œå…¶åº•å±‚ä½¿ç”¨çš„æ˜¯æ ‡å‡†çš„ HTTP/HTTPS å®¢æˆ·ç«¯ï¼ˆå¦‚ <code>http</code>ã€<code>https</code> æ¨¡å—æˆ– <code>undici</code>ï¼‰ï¼Œè€Œ <strong>è¿™äº›å®¢æˆ·ç«¯é»˜è®¤ä¸ä¼šè‡ªåŠ¨ä½¿ç”¨ç³»ç»Ÿæˆ–æœ¬åœ°çš„ HTTP/HTTPS ä»£ç†ï¼ˆå¦‚ Clashï¼‰</strong> ï¼Œé™¤éæ˜¾å¼é…ç½®</p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬çš„å‰ç«¯é¡¹ç›®æ²¡æœ‰èµ°ç³»ç»Ÿä»£ç†ï¼Œæ‰€ä»¥è®¿é—®ä¸äº†æ¥å£ï¼›</p>
<h2 data-id="heading-1">è§£å†³æ–¹æ¡ˆï¼š</h2>
<h3 data-id="heading-2">æ–¹æ¡ˆä¸€ï¼š</h3>
<p><strong>ä½¿ç”¨</strong> <code>http-proxy-agent</code> <strong>+ è‡ªå®šä¹‰</strong> <code>fetch</code> <strong>ï¼ˆæ¨èç”¨äº Next.js 13+ App Routerï¼‰</strong></p>
<p>ä½†æ³¨æ„ï¼š<strong><code>rewrites</code> æ˜¯ Next.js å†…ç½®åŠŸèƒ½ï¼Œæ— æ³•ç›´æ¥æ³¨å…¥è‡ªå®šä¹‰ä»£ç†é€»è¾‘</strong>ã€‚æ‰€ä»¥æ›´å¯è¡Œçš„åšæ³•æ˜¯ï¼š</p>
<blockquote>
<p>âŒ <strong>ä¸è¦ç”¨ <code>rewrites</code> åšè·¨åŸŸä»£ç†åˆ°éœ€è¦èµ°ä»£ç†çš„å¤–éƒ¨ API</strong> âœ… <strong>æ”¹ç”¨ API Routeï¼ˆ<code>pages/api/proxy.ts</code>ï¼‰åšä¸­è½¬ï¼Œå¹¶åœ¨è¯¥è·¯ç”±ä¸­æ˜¾å¼é…ç½®ä»£ç†</strong></p>
</blockquote>
<p><strong>æ¨èåšæ³•ï¼šç”¨ API è·¯ç”±ä¸­è½¬ + é…ç½®ä»£ç†</strong></p>
<ol>
<li><strong>åˆ é™¤ <code>next.config.js</code> ä¸­çš„ <code>rewrites</code></strong></li>
<li><strong>åˆ›å»ºä¸€ä¸ª API è·¯ç”±</strong>ï¼š<code>pages/api/console/[...path].ts</code></li>
</ol>

<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// pages/api/console/[...path].ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextApiRequest</span>, <span class="hljs-title class_">NextApiResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'next'</span>;
<span class="hljs-keyword">import</span> { createProxyMiddleware } <span class="hljs-keyword">from</span> <span class="hljs-string">'http-proxy-middleware'</span>;
â€‹
<span class="hljs-comment">// æ³¨æ„ï¼šhttp-proxy-middleware åœ¨ Vercel ä¸Šä¸å·¥ä½œï¼Œä»…é€‚ç”¨äºæœ¬åœ°å¼€å‘æˆ–è‡ªæ‰˜ç®¡</span>
<span class="hljs-keyword">const</span> proxy = <span class="hljs-title function_">createProxyMiddleware</span>({
 Â <span class="hljs-attr">target</span>: <span class="hljs-string">'https://cloud.dify.ai'</span>,
 Â <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>,
 Â <span class="hljs-attr">pathRewrite</span>: {
 Â  Â <span class="hljs-string">'^/api/console'</span>: <span class="hljs-string">'/console'</span>, <span class="hljs-comment">// å°† /api/console/foo â†’ /console/foo</span>
  },
 Â <span class="hljs-attr">agent</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'development'</span> 
 Â  Â ? <span class="hljs-keyword">new</span> (<span class="hljs-built_in">require</span>(<span class="hljs-string">'https-proxy-agent'</span>))(<span class="hljs-string">'http://127.0.0.1:7890'</span>)
 Â   : <span class="hljs-literal">undefined</span>,
});
â€‹
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handler</span>(<span class="hljs-params">req: NextApiRequest, res: NextApiResponse</span>) {
 Â <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
 Â   (proxy <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>)(req, res, <span class="hljs-function">(<span class="hljs-params">result: <span class="hljs-built_in">unknown</span></span>) =&gt;</span> {
 Â  Â  Â <span class="hljs-keyword">if</span> (result <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Error</span>) {
 Â  Â  Â  Â <span class="hljs-title function_">reject</span>(result);
 Â  Â   } <span class="hljs-keyword">else</span> {
 Â  Â  Â  Â <span class="hljs-title function_">resolve</span>(result);
 Â  Â   }
 Â   });
  });
}
â€‹
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> config = {
 Â <span class="hljs-attr">api</span>: {
 Â  Â <span class="hljs-attr">bodyParser</span>: <span class="hljs-literal">false</span>,
 Â  Â <span class="hljs-attr">externalResolver</span>: <span class="hljs-literal">true</span>,
  },
};
</code></pre>
<ol>
<li><strong>å®‰è£…ä¾èµ–</strong>ï¼š</li>
</ol>

<pre><code class="hljs">npm install http-proxy-middleware https-proxy-agent
</code></pre>
<ol>
<li><strong>å‰ç«¯ä»£ç ä¸­å°†è¯·æ±‚æŒ‡å‘ä½ çš„æœ¬åœ° API è·¯ç”±</strong>ï¼š</li>
</ol>
<p>åŸæ¥å¯èƒ½è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/console/api/workspaces
</code></pre>
<p>ç°åœ¨æ”¹ä¸ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/api/console/api/workspaces
</code></pre>
<p>æˆ–è€…ä½ åœ¨å‰ç«¯ç»Ÿä¸€é…ç½® baseURL ä¸º <code>/api/console</code>ã€‚</p>
<p><strong>æ³¨æ„äº‹é¡¹</strong></p>
<ul>
<li><code>http-proxy-middleware</code> å’Œ <code>https-proxy-agent</code> <strong>åªé€‚ç”¨äº Node.js ç¯å¢ƒ</strong>ï¼Œä¸èƒ½åœ¨æµè§ˆå™¨ä¸­è¿è¡Œã€‚</li>
<li>å¦‚æœä½ éƒ¨ç½²åˆ° Vercelï¼ŒClash ä»£ç†ä¸å¯ç”¨ï¼Œè¿™ç§ä»£ç†æ–¹å¼åªé€‚åˆ <strong>æœ¬åœ°å¼€å‘</strong>ã€‚</li>
<li>å¦‚æœä½ åªæ˜¯æœ¬åœ°å¼€å‘ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘ <strong>è®© Clash å…¨å±€æ¥ç®¡æµé‡ï¼ˆTUN æ¨¡å¼ï¼‰</strong> ï¼Œè¿™æ · Node.js è¯·æ±‚ä¹Ÿä¼šè¢«é€æ˜ä»£ç†ã€‚ä½†ä¸æ˜¯æ‰€æœ‰ Clash å®¢æˆ·ç«¯éƒ½é»˜è®¤å¼€å¯ TUNã€‚</li>
</ul>
<h3 data-id="heading-3">æ–¹æ¡ˆäºŒï¼š</h3>
<p><strong>æ›¿ä»£æ€è·¯ï¼šå¼€å¯ Clash çš„ TUN æ¨¡å¼ï¼ˆé€æ˜ä»£ç†ï¼‰</strong></p>
<p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ <strong>Clash Verge / Clash Meta</strong> ç­‰æ”¯æŒ TUN æ¨¡å¼çš„å®¢æˆ·ç«¯ï¼š</p>
<ul>
<li>å¼€å¯ <strong>TUN æ¨¡å¼ï¼ˆæˆ–â€œå¢å¼ºæ¨¡å¼â€ï¼‰</strong></li>
<li>è¿™æ ·æ‰€æœ‰æœ¬åœ°åº”ç”¨ï¼ˆåŒ…æ‹¬ Node.jsï¼‰çš„ç½‘ç»œè¯·æ±‚éƒ½ä¼šè¢«å¼ºåˆ¶èµ°ä»£ç†</li>
<li>æ­¤æ—¶ Next.js çš„ <code>rewrites</code> å°±èƒ½è‡ªåŠ¨èµ° Clashï¼Œæ— éœ€æ”¹ä»£ç </li>
</ul>
<blockquote>
<p>âœ… ä¼˜ç‚¹ï¼šæ— éœ€æ”¹ä»£ç  âŒ ç¼ºç‚¹ï¼šä¾èµ–å®¢æˆ·ç«¯é…ç½®ï¼Œä¸”å¯èƒ½å½±å“å…¶ä»–ç½‘ç»œè¯·æ±‚</p>
</blockquote>
<h3 data-id="heading-4"><strong>æ€»ç»“</strong></h3>

























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>æ˜¯å¦æ¨è</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ”¹ç”¨ API è·¯ç”± + <code>https-proxy-agent</code></td><td>âœ… å¼ºçƒˆæ¨èï¼ˆå¯æ§ï¼‰</td><td>æ˜¾å¼æŒ‡å®šä»£ç†ï¼Œé€‚åˆå¼€å‘</td></tr><tr><td>å¼€å¯ Clash TUN æ¨¡å¼</td><td>âœ… ç®€å•å¿«æ·</td><td>é€‚åˆçº¯æœ¬åœ°å¼€å‘ï¼Œä½†å…¨å±€ç”Ÿæ•ˆ</td></tr><tr><td>ç»§ç»­ç”¨ <code>rewrites</code></td><td>âŒ ä¸å¯è¡Œ</td><td>Node.js ä¸ä¼šè‡ªåŠ¨èµ° HTTP ä»£ç†</td></tr></tbody></table>
<p>ä¸ªäººä½¿ç”¨çš„æ˜¯æ–¹æ¡ˆäºŒã€æœ€ç»ˆæ¥å£èƒ½è®¿é—®äº†ï¼›</p>
<p>ä¸è¿‡ç™»å½•ä¹‹åçš„æ¥å£è¿˜æ˜¯æŠ¥é”™ï¼Œtokené—®é¢˜ï¼› åº”è¯¥æ˜¯åç«¯æ¥å£åšäº†é™åˆ¶ï¼Œå¼€å‘ä¸­ä¸èƒ½ç›´æ¥ä½¿ç”¨çº¿ä¸Šåœ°å€ï¼›</p>
<p>æœ€åè¿˜æ˜¯éœ€è¦è‡ªå·±æœ¬åœ°å¯åŠ¨ä¸€ä¸‹å®ƒçš„åç«¯æœåŠ¡ï¼›</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>