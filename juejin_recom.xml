<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[Vue3 çš„ Composition API å’Œ Options API æœ‰å“ªäº›åŒºåˆ«ï¼Ÿä¸¾ä¾‹è¯´æ˜ Composition API çš„ä¼˜åŠ¿ã€‚]]></title>    <link>https://juejin.cn/post/7570604028633628707</link>    <guid>https://juejin.cn/post/7570604028633628707</guid>    <pubDate>2025-11-10T06:16:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570604028633628707" data-draft-id="7570659828810334242" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3 çš„ Composition API å’Œ Options API æœ‰å“ªäº›åŒºåˆ«ï¼Ÿä¸¾ä¾‹è¯´æ˜ Composition API çš„ä¼˜åŠ¿ã€‚"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-10T06:16:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¸€è¯¾"/> <meta itemprop="url" content="https://juejin.cn/user/1169536102963917"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3 çš„ Composition API å’Œ Options API æœ‰å“ªäº›åŒºåˆ«ï¼Ÿä¸¾ä¾‹è¯´æ˜ Composition API çš„ä¼˜åŠ¿ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536102963917/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¸€è¯¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:16:23.000Z" title="Mon Nov 10 2025 06:16:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ä¸€ã€ä¸¤è€…çš„å®šä¹‰ä¸æ ¸å¿ƒæ€æƒ³</strong></h2>


















































<table><thead><tr><th><strong>é¡¹ç›®</strong></th><th><strong>Options APIï¼ˆVue2 ä¼ ç»Ÿå†™æ³•ï¼‰</strong></th><th><strong>Composition APIï¼ˆVue3 æ–°å†™æ³•ï¼‰</strong></th></tr></thead><tbody><tr><td>æ ¸å¿ƒç†å¿µ</td><td>æŒ‰â€œé€‰é¡¹ç±»å‹â€ç»„ç»‡ä»£ç ï¼ˆdataã€methodsã€computedã€watch åˆ†åŒºï¼‰</td><td>æŒ‰â€œåŠŸèƒ½é€»è¾‘â€ç»„ç»‡ä»£ç ï¼ˆé€»è¾‘èšåˆã€å‡½æ•°å¤ç”¨ï¼‰</td></tr><tr><td>å†™æ³•å½¢å¼</td><td>export default { data(){}, methods:{}, computed:{}}</td><td>ä½¿ç”¨ setup() å‡½æ•°ï¼Œé€šè¿‡ refã€reactiveã€computedã€watch ç­‰ç»„åˆé€»è¾‘</td></tr><tr><td>å­¦ä¹ æ›²çº¿</td><td>ç®€å•ç›´è§‚ï¼Œé€‚åˆå°é¡¹ç›®</td><td>åˆæœŸç•¥å¤æ‚ï¼Œä½†åœ¨å¤§å‹é¡¹ç›®ä¸­æ›´æ¸…æ™°</td></tr><tr><td>ä»£ç ç»„ç»‡</td><td>åˆ†æ•£ï¼šç›¸å…³é€»è¾‘è¢«æ‹†åœ¨ä¸åŒé€‰é¡¹ä¸­</td><td>èšåˆï¼šç›¸å…³é€»è¾‘å¯ä»¥é›†ä¸­åœ¨ä¸€èµ·</td></tr><tr><td>é€»è¾‘å¤ç”¨</td><td>ä¾èµ– mixinsï¼ˆæœ‰å‘½åå†²çªã€æ¥æºä¸æ˜ç­‰é—®é¢˜ï¼‰</td><td>å¯é€šè¿‡è‡ªå®šä¹‰ hook å‡½æ•°ï¼ˆç»„åˆå¼å‡½æ•°ï¼‰çµæ´»å¤ç”¨</td></tr><tr><td>this æŒ‡å‘</td><td>è‡ªåŠ¨ç»‘å®šç»„ä»¶å®ä¾‹</td><td>æ²¡æœ‰ thisï¼Œç›´æ¥ä½¿ç”¨å®šä¹‰çš„å˜é‡</td></tr><tr><td>Tree-shaking</td><td>ä¸æ”¯æŒï¼ˆVue å…¨é‡å¼•å…¥ï¼‰</td><td>æ”¯æŒæŒ‰éœ€å¼•å…¥ï¼Œæ„å»ºæ›´å°</td></tr><tr><td>ç±»å‹æ”¯æŒ</td><td>TypeScript å…¼å®¹è¾ƒå¼±</td><td>å¤©ç„¶æ”¯æŒ TypeScript ç±»å‹æ¨å¯¼</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-1"><strong>äºŒã€ç¤ºä¾‹å¯¹æ¯”</strong></h2>
<h3 data-id="heading-2"><strong>ğŸ§© 1. Options API å†™æ³•ï¼ˆVue2 é£æ ¼ï¼‰</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>
    }
  },
  <span class="hljs-attr">computed</span>: {
    <span class="hljs-title function_">double</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> * <span class="hljs-number">2</span>
    }
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">increment</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++
    }
  }
}
</code></pre>
<h3 data-id="heading-3"><strong>ğŸ§  2. Composition API å†™æ³•ï¼ˆVue3 æ–°å†™æ³•ï¼‰</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { ref, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">const</span> double = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> count.<span class="hljs-property">value</span> * <span class="hljs-number">2</span>)
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">increment</span> = (<span class="hljs-params"/>) =&gt; count.<span class="hljs-property">value</span>++

    <span class="hljs-keyword">return</span> { count, double, increment }
  }
}
</code></pre>
<p>ğŸ‘‰ å¯ä»¥çœ‹åˆ°ï¼š</p>
<ul>
<li>Composition API ç›´æ¥é€šè¿‡å‡½æ•°å¼ API æ“ä½œæ•°æ®ï¼›</li>
<li>ä¸ä¾èµ– thisï¼›</li>
<li>æ‰€æœ‰é€»è¾‘åœ¨ setup() å†…éƒ¨é›†ä¸­å®šä¹‰ï¼Œæ›´æ˜“äºç»„åˆä¸æŠ½ç¦»ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-4"><strong>ä¸‰ã€Composition API çš„ä¼˜åŠ¿è¯¦è§£</strong></h2>
<h3 data-id="heading-5"><strong>1ï¸âƒ£ é€»è¾‘èšåˆï¼ˆLogic Compositionï¼‰</strong></h3>
<p>åœ¨ Options API ä¸­ï¼Œä¸€ä¸ªåŠŸèƒ½é€»è¾‘å¾€å¾€è¢«æ‹†æ•£åœ¨ä¸åŒåŒºåŸŸï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¾‹å­ï¼šè·å–ç”¨æˆ·æ•°æ® + ç›‘å¬çª—å£å¤§å°</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">user</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">width</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> }
  },
  <span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fetchUser</span>()
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">fetchUser</span>(<span class="hljs-params"/>) { ... }
  },
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">updateWidth</span>)
  },
  <span class="hljs-title function_">beforeUnmount</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">updateWidth</span>)
  }
}
</code></pre>
<p>è¿™äº›é€»è¾‘â€œåŠŸèƒ½ä¸Šæ˜¯ç›¸å…³çš„â€ï¼Œä½†åœ¨ä»£ç ä¸­è¢«â€œç»“æ„ä¸Šæ‹†æ•£â€ã€‚</p>
<p>Composition API èƒ½è®©å®ƒä»¬èšåˆåœ¨ä¸€èµ·ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { ref, onMounted, onUnmounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> user = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)
    <span class="hljs-keyword">const</span> width = <span class="hljs-title function_">ref</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>)

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchUser</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; { ... }

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">updateWidth</span> = (<span class="hljs-params"/>) =&gt; { width.<span class="hljs-property">value</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> }

    <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">fetchUser</span>()
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, updateWidth)
    })
    <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'resize'</span>, updateWidth))

    <span class="hljs-keyword">return</span> { user, width }
  }
}
</code></pre>
<p>è¿™æ ·ï¼š</p>
<ul>
<li>é€»è¾‘æ›´èšåˆï¼›</li>
<li>ç”Ÿå‘½å‘¨æœŸä¸é€»è¾‘æ“ä½œæ›´æ¥è¿‘ï¼›</li>
<li>æ›´å®¹æ˜“ç»´æŠ¤å’Œé˜…è¯»ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6"><strong>2ï¸âƒ£ é€»è¾‘å¤ç”¨æ›´å¼ºï¼ˆHooksï¼‰</strong></h3>
<p>Vue2 æ—¶ä»£é€»è¾‘å¤ç”¨ä¸»è¦é  <strong>Mixins</strong>ï¼Œä½†å­˜åœ¨ï¼š</p>
<ul>
<li>
<p>å‘½åå†²çªï¼›</p>
</li>
<li>
<p>æ¥æºä¸æ˜ï¼›</p>
</li>
<li>
<p>æ•°æ®æ¥æºä¸æ¸…æ™°ï¼›</p>
</li>
<li>
<p>é€»è¾‘éš¾è¿½è¸ªã€‚</p>
</li>
</ul>
<p>è€Œ Composition API å…è®¸æˆ‘ä»¬åƒ React Hooks ä¸€æ ·å°è£…å¤ç”¨é€»è¾‘ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// useMouse.js</span>
<span class="hljs-keyword">import</span> { ref, onMounted, onUnmounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useMouse</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> x = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)
  <span class="hljs-keyword">const</span> y = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">update</span> = e =&gt; {
    x.<span class="hljs-property">value</span> = e.<span class="hljs-property">pageX</span>
    y.<span class="hljs-property">value</span> = e.<span class="hljs-property">pageY</span>
  }
  <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousemove'</span>, update))
  <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mousemove'</span>, update))
  <span class="hljs-keyword">return</span> { x, y }
}
</code></pre>
<p>åœ¨ç»„ä»¶ä¸­ç›´æ¥ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useMouse } <span class="hljs-keyword">from</span> <span class="hljs-string">'./useMouse'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> { x, y } = <span class="hljs-title function_">useMouse</span>()
    <span class="hljs-keyword">return</span> { x, y }
  }
}
</code></pre>
<p>ğŸ‘‰ é€»è¾‘æŠ½ç¦»æ¸…æ™°ï¼Œå¤ç”¨ç®€å•ï¼Œå®Œå…¨æ— å‰¯ä½œç”¨ã€‚</p>
<hr/>
<h3 data-id="heading-7"><strong>3ï¸âƒ£ æ›´å¥½çš„ TypeScript æ”¯æŒ</strong></h3>
<p>åœ¨ Composition API ä¸­ï¼š</p>
<ul>
<li>refã€reactive éƒ½æœ‰å®Œå–„çš„ç±»å‹æ¨å¯¼ï¼›</li>
<li>ä¸éœ€è¦å†å£°æ˜ this çš„ç±»å‹ï¼›</li>
<li>è¿”å›å€¼ç›´æ¥ç”± IDE è‡ªåŠ¨æç¤ºç±»å‹ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8"><strong>4ï¸âƒ£ æ€§èƒ½å’Œç¼–è¯‘ä¼˜åŒ–</strong></h3>
<ul>
<li>Vue3 ä½¿ç”¨äº† <strong>åŸºäºæ¨¡æ¿ç¼–è¯‘ä¼˜åŒ–çš„å“åº”æ€§è¿½è¸ª</strong>ï¼›</li>
<li>Composition API çš„å‡½æ•°å¼ç»“æ„æ›´å®¹æ˜“è¢«ç¼–è¯‘å™¨åˆ†æï¼›</li>
<li>ç»“åˆ <strong>Tree-shaking</strong> å¯å‡å°åŒ…ä½“ç§¯ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-9"><strong>å››ã€ä½•æ—¶ç”¨å“ªç§ APIï¼Ÿ</strong></h2>

























<table><thead><tr><th><strong>åœºæ™¯</strong></th><th><strong>æ¨è API</strong></th></tr></thead><tbody><tr><td>å°å‹é¡¹ç›® / åˆå­¦è€…</td><td>Options APIï¼ˆç»“æ„ç›´è§‚ï¼‰</td></tr><tr><td>å¤§å‹é¡¹ç›® / å¤æ‚é€»è¾‘</td><td>Composition APIï¼ˆé€»è¾‘æ›´æ¸…æ™°ï¼Œå¯å¤ç”¨ï¼‰</td></tr><tr><td>éœ€è¦é€»è¾‘æŠ½ç¦»æˆ–æ’ä»¶å¼€å‘</td><td>Composition API</td></tr><tr><td>éœ€è¦ TypeScript æ”¯æŒ</td><td>Composition API</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-10"><strong>äº”ã€æ€»ç»“ä¸€å¥è¯</strong></h2>
<blockquote>
<p><strong>Options API</strong>ï¼šç»“æ„åŒ–ã€ä¸Šæ‰‹å¿«ï¼Œä½†é€»è¾‘åˆ†æ•£ã€‚</p>
</blockquote>
<blockquote>
<p><strong>Composition API</strong>ï¼šå‡½æ•°åŒ–ã€æ¨¡å—åŒ–ï¼Œé€»è¾‘èšåˆã€å¤ç”¨å¼ºï¼Œæ˜¯ Vue3 çš„æœªæ¥æ–¹å‘ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[éƒ½è¯´node.jsæ˜¯äº‹ä»¶é©±åŠ¨çš„ï¼Œä»€ä¹ˆæ˜¯äº‹ä»¶é©±åŠ¨ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7570295366480576548</link>    <guid>https://juejin.cn/post/7570295366480576548</guid>    <pubDate>2025-11-10T06:19:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570295366480576548" data-draft-id="7570339961909329963" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="éƒ½è¯´node.jsæ˜¯äº‹ä»¶é©±åŠ¨çš„ï¼Œä»€ä¹ˆæ˜¯äº‹ä»¶é©±åŠ¨ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,Node.js"/> <meta itemprop="datePublished" content="2025-11-10T06:19:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/2175258804632332"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            éƒ½è¯´node.jsæ˜¯äº‹ä»¶é©±åŠ¨çš„ï¼Œä»€ä¹ˆæ˜¯äº‹ä»¶é©±åŠ¨ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2175258804632332/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:19:49.000Z" title="Mon Nov 10 2025 06:19:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼€å¤´</h2>
<p>ä¹‹å‰çœ‹ä¸€äº› Node.js çš„æŠ€æœ¯æ–‡ç« æˆ–è€…å®˜æ–¹æ–‡æ¡£ï¼Œç»å¸¸ä¼šçœ‹åˆ°"äº‹ä»¶é©±åŠ¨"è¿™ä¸ªè¯â€”â€”Node.js æ˜¯äº‹ä»¶é©±åŠ¨çš„ã€äº‹ä»¶é©±åŠ¨æ¶æ„ã€åŸºäºäº‹ä»¶é©±åŠ¨çš„å¼‚æ­¥ I/O æ¨¡å‹ã€‚</p>
<p>ä½†è¿™åˆ°åº•æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>ä»€ä¹ˆæ˜¯äº‹ä»¶é©±åŠ¨ï¼Ÿè·Ÿæˆ‘ä»¬å¹³å¸¸å†™çš„ä»£ç æœ‰ä»€ä¹ˆä¸ä¸€æ ·ï¼Ÿ</li>
<li>é™¤äº†äº‹ä»¶é©±åŠ¨,è¿˜æœ‰åˆ«çš„ç¼–ç¨‹æ¨¡å‹å—ï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆ Node.js è¦é€‰æ‹©äº‹ä»¶é©±åŠ¨ï¼Ÿæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</li>
<li>äº‹ä»¶é©±åŠ¨æ˜¯æ€ä¹ˆå®ç°çš„ï¼ŸèƒŒåçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ul>
<p>æœ‰äººè¯´äº‹ä»¶é©±åŠ¨å°±æ˜¯"æ³¨å†Œå›è°ƒå‡½æ•°,ç­‰äº‹ä»¶å‘ç”Ÿæ—¶è°ƒç”¨",ä½†ä¸ºä»€ä¹ˆè¿™ç§æ–¹å¼é€‚åˆ I/O å¯†é›†å‹åº”ç”¨ï¼Ÿä¸ºä»€ä¹ˆè¯´å®ƒæ˜¯éé˜»å¡çš„?</p>
<p>ç ”ç©¶äº†ä¸€ä¸‹æ‰å‘ç°,äº‹ä»¶é©±åŠ¨ä¸åªæ˜¯ä¸€ç§ç¼–ç¨‹é£æ ¼,å®ƒèƒŒåæ˜¯ä¸€æ•´å¥—å®Œå…¨ä¸åŒçš„ç¨‹åºæ‰§è¡Œæ¨¡å‹ã€‚ç†è§£äº†å®ƒ,å°±èƒ½æ˜ç™½ä¸ºä»€ä¹ˆ Node.js ç”¨å•çº¿ç¨‹ä¹Ÿèƒ½é«˜å¹¶å‘,ä¹Ÿèƒ½æ›´å¥½åœ°ç†è§£å¼‚æ­¥ç¼–ç¨‹ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿå¯¹äº‹ä»¶é©±åŠ¨æ„Ÿå…´è¶£,æƒ³ææ¸…æ¥šå®ƒçš„åŸç†å’Œåº”ç”¨åœºæ™¯,é‚£å°±è·Ÿæˆ‘ä¸€èµ·æ¥å­¦ä¹ ä¸€ä¸‹å§ã€‚</p>
<h2 data-id="heading-1">ä»€ä¹ˆæ˜¯ç¼–ç¨‹æ¨¡å‹ï¼Ÿ</h2>
<p>åœ¨è¯´äº‹ä»¶é©±åŠ¨ä¹‹å‰,å…ˆå¾—ææ¸…æ¥šä»€ä¹ˆæ˜¯"ç¼–ç¨‹æ¨¡å‹"ã€‚</p>
<p>ç¼–ç¨‹æ¨¡å‹(Programming Model)è¯´ç©¿äº†å°±æ˜¯:ç¨‹åºæ€ä¹ˆç»„ç»‡ã€æ€ä¹ˆæ‰§è¡Œã€æ€ä¹ˆå¤„ç†å¹¶å‘çš„ä¸€å¥—è§„åˆ™å’Œæ€è·¯ã€‚</p>
<p>å°±åƒç›–æˆ¿å­,å¯ä»¥ç”¨ä¸åŒçš„å»ºç­‘é£æ ¼â€”â€”ä¸­å¼ã€æ¬§å¼ã€ç°ä»£ç®€çº¦ã€‚ç¼–ç¨‹ä¹Ÿä¸€æ ·,åŒæ ·çš„åŠŸèƒ½å¯ä»¥ç”¨ä¸åŒçš„æ¨¡å‹æ¥å®ç°,æ¯ç§æ¨¡å‹æœ‰è‡ªå·±çš„ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ã€‚</p>
<h3 data-id="heading-2">å¸¸è§çš„å‡ ç§ç¼–ç¨‹æ¨¡å‹</h3>
<p>ä¸»æµçš„ç¼–ç¨‹æ¨¡å‹ä¸»è¦æœ‰è¿™å‡ ç§:</p>
<p><strong>1. åŒæ­¥é˜»å¡æ¨¡å‹</strong> (ä¼ ç»Ÿçš„ Cã€Java çº¿ç¨‹æ¨¡å‹)
ç¨‹åºä¸€è¡Œè¡Œå¾€ä¸‹æ‰§è¡Œ,é‡åˆ° I/O æ“ä½œå°±ç­‰ç€,ç›´åˆ°å®Œæˆæ‰ç»§ç»­ã€‚æƒ³è¦å¹¶å‘?å¼€å¤šä¸ªçº¿ç¨‹ã€‚</p>
<p><strong>2. äº‹ä»¶é©±åŠ¨æ¨¡å‹</strong> (Node.jsã€Nginx)
ç¨‹åºæ³¨å†Œä¸€å †äº‹ä»¶ç›‘å¬å™¨,ç„¶ååœ¨äº‹ä»¶å¾ªç¯é‡Œä¸æ–­æ£€æŸ¥æœ‰æ²¡æœ‰äº‹ä»¶å‘ç”Ÿ,æœ‰å°±è°ƒç”¨å¯¹åº”çš„å›è°ƒå‡½æ•°ã€‚</p>
<p><strong>3. åç¨‹æ¨¡å‹</strong> (Goã€Python asyncio)
çœ‹èµ·æ¥åƒåŒæ­¥ä»£ç ,ä½†é‡åˆ° I/O æ—¶ä¼šä¸»åŠ¨è®©å‡º CPU,ç­‰ I/O å®Œæˆåæ¢å¤æ‰§è¡Œã€‚</p>
<p><strong>4. Actor æ¨¡å‹</strong> (Erlangã€Akka)
æŠŠç¨‹åºæ‹†æˆå¾ˆå¤šç‹¬ç«‹çš„ actor,æ¯ä¸ª actor æœ‰è‡ªå·±çš„çŠ¶æ€,é€šè¿‡æ¶ˆæ¯ä¼ é€’é€šä¿¡ã€‚</p>
<p>è¿™äº›æ¨¡å‹æ²¡æœ‰ç»å¯¹çš„å¥½å,åªæœ‰é€‚ä¸é€‚åˆã€‚å°±åƒèºä¸åˆ€å’Œé”¤å­,ä¿®ç”µè„‘ç”¨èºä¸åˆ€,é’‰é’‰å­ç”¨é”¤å­,ç”¨å¯¹äº†å·¥å…·æ‰èƒ½äº‹åŠåŠŸå€ã€‚</p>
<h2 data-id="heading-3">äº‹ä»¶é©±åŠ¨åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<h3 data-id="heading-4">æ ¸å¿ƒæ€æƒ³</h3>
<p>äº‹ä»¶é©±åŠ¨çš„æ ¸å¿ƒæ€æƒ³å¾ˆç®€å•:</p>
<p><strong>ä¸è¦ç­‰,è€Œæ˜¯ç•™ä¸ªè”ç³»æ–¹å¼,äº‹æƒ…å¥½äº†é€šçŸ¥æˆ‘ã€‚</strong></p>
<p>å°±åƒå»é¥­é¦†åƒé¥­,æœ‰ä¸¤ç§æ–¹å¼:</p>
<ul>
<li><strong>é˜»å¡æ–¹å¼</strong>:ç«™åœ¨çª—å£ç­‰,ä¸€ç›´ç›¯ç€å¨å¸ˆç‚’èœ,ç‚’å¥½äº†æ‹¿èµ°</li>
<li><strong>äº‹ä»¶é©±åŠ¨æ–¹å¼</strong>:æ‹¿ä¸ªå·,åä¸‹æ¥ç©æ‰‹æœº,å«å·äº†(äº‹ä»¶å‘ç”Ÿ)å†å»å–</li>
</ul>
<p>Node.js å°±æ˜¯ç¬¬äºŒç§æ–¹å¼ã€‚ç¨‹åºä¸ä¼šå‚»ç­‰ I/O æ“ä½œå®Œæˆ,è€Œæ˜¯æ³¨å†Œä¸€ä¸ªå›è°ƒå‡½æ•°,å‘Šè¯‰ç³»ç»Ÿ"I/O å®Œæˆäº†å«æˆ‘",ç„¶åç»§ç»­å¹²åˆ«çš„äº‹ã€‚</p>
<h3 data-id="heading-5">äº‹ä»¶é©±åŠ¨çš„ä¸‰è¦ç´ </h3>
<p>è¦ç†è§£äº‹ä»¶é©±åŠ¨,å¾—ææ¸…æ¥šä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µ:</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[äº‹ä»¶æº] --&gt; B[äº‹ä»¶å¾ªç¯]
    B --&gt; C[äº‹ä»¶å¤„ç†å™¨]
    C --&gt; B
    style A fill:#e1f5ff
    style B fill:#fff4e1
    style C fill:#ffe1e1
</code></pre>
<p><strong>1. äº‹ä»¶æº(Event Source)</strong>
äº§ç”Ÿäº‹ä»¶çš„åœ°æ–¹ã€‚åœ¨ Node.js é‡Œ,å¸¸è§çš„äº‹ä»¶æºæœ‰:</p>
<ul>
<li>æ–‡ä»¶è¯»å†™(fs.readFile å®Œæˆ)</li>
<li>ç½‘ç»œè¯·æ±‚(HTTP è¯·æ±‚åˆ°è¾¾)</li>
<li>å®šæ—¶å™¨(setTimeout æ—¶é—´åˆ°)</li>
<li>ç”¨æˆ·è¾“å…¥(process.stdin æ”¶åˆ°æ•°æ®)</li>
</ul>
<p><strong>2. äº‹ä»¶å¾ªç¯(Event Loop)</strong>
äº‹ä»¶é©±åŠ¨çš„å¿ƒè„ã€‚å®ƒä¸åœåœ°æ£€æŸ¥æœ‰æ²¡æœ‰äº‹ä»¶å‘ç”Ÿ,æœ‰å°±æ‹¿å‡ºæ¥å¤„ç†ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸ªæ°¸ä¸åœæ­‡çš„ä¼ é€å¸¦,äº‹ä»¶æ”¾ä¸Šå»,ä¸€ä¸ªä¸ªè¢«æ‹¿èµ°å¤„ç†ã€‚</p>
<p><strong>3. äº‹ä»¶å¤„ç†å™¨(Event Handler/Callback)</strong>
äº‹ä»¶å‘ç”Ÿæ—¶è¦æ‰§è¡Œçš„ä»£ç ,é€šå¸¸å°±æ˜¯ä½ æ³¨å†Œçš„å›è°ƒå‡½æ•°ã€‚</p>
<h3 data-id="heading-6">ä¸€ä¸ªç®€å•çš„ä¾‹å­</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// äº‹ä»¶é©±åŠ¨çš„æ–‡ä»¶è¯»å–</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'1. å¼€å§‹è¯»æ–‡ä»¶'</span>);

<span class="hljs-comment">// æ³¨å†Œäº‹ä»¶å¤„ç†å™¨(å›è°ƒå‡½æ•°)</span>
fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'test.txt'</span>, <span class="hljs-string">'utf8'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
  <span class="hljs-comment">// è¿™ä¸ªå‡½æ•°ä¼šåœ¨æ–‡ä»¶è¯»å–å®Œæˆæ—¶è¢«è°ƒç”¨</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'3. æ–‡ä»¶å†…å®¹:'</span>, data);
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'2. ç»§ç»­æ‰§è¡Œå…¶ä»–ä»£ç '</span>);

<span class="hljs-comment">// è¾“å‡ºé¡ºåº:</span>
<span class="hljs-comment">// 1. å¼€å§‹è¯»æ–‡ä»¶</span>
<span class="hljs-comment">// 2. ç»§ç»­æ‰§è¡Œå…¶ä»–ä»£ç </span>
<span class="hljs-comment">// 3. æ–‡ä»¶å†…å®¹: (æ–‡ä»¶å†…å®¹)</span>
</code></pre>
<p>å…³é”®ç‚¹:</p>
<ul>
<li><code>fs.readFile</code> ä¸ä¼šé˜»å¡,å®ƒç«‹å³è¿”å›</li>
<li>å›è°ƒå‡½æ•°æ³¨å†Œåˆ°äº‹ä»¶å¾ªç¯ä¸­</li>
<li>ç¨‹åºç»§ç»­æ‰§è¡Œåé¢çš„ä»£ç </li>
<li>æ–‡ä»¶è¯»å®Œå,äº‹ä»¶å¾ªç¯è°ƒç”¨å›è°ƒå‡½æ•°</li>
</ul>
<p>è¿™å°±æ˜¯äº‹ä»¶é©±åŠ¨çš„ç²¾é«“â€”â€”<strong>éé˜»å¡å¼‚æ­¥æ‰§è¡Œ</strong>ã€‚</p>
<h2 data-id="heading-7">ä¸ºä»€ä¹ˆ Node.js é€‰æ‹©äº‹ä»¶é©±åŠ¨ï¼Ÿ</h2>
<h3 data-id="heading-8">I/O å¯†é›†å‹åº”ç”¨çš„ç—›ç‚¹</h3>
<p>Node.js è®¾è®¡ä¹‹åˆå°±ç„å‡†äº† Web æœåŠ¡å™¨è¿™ä¸ªåœºæ™¯ã€‚Web æœåŠ¡å™¨çš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ<strong>I/O å¯†é›†,è®¡ç®—ç®€å•</strong>ã€‚</p>
<p>æƒ³æƒ³ä¸€ä¸ªå…¸å‹çš„ Web è¯·æ±‚:</p>
<ol>
<li>æ¥æ”¶ HTTP è¯·æ±‚(ç½‘ç»œ I/O)</li>
<li>æŸ¥è¯¢æ•°æ®åº“(ç£ç›˜ I/O)</li>
<li>è¯»å–æ–‡ä»¶(ç£ç›˜ I/O)</li>
<li>è¿”å›å“åº”(ç½‘ç»œ I/O)</li>
</ol>
<p>æ•´ä¸ªè¿‡ç¨‹å¤§éƒ¨åˆ†æ—¶é—´éƒ½èŠ±åœ¨ç­‰ I/O ä¸Š,çœŸæ­£çš„è®¡ç®—(JSON åºåˆ—åŒ–ã€å­—ç¬¦ä¸²æ‹¼æ¥)åªå å¾ˆå°ä¸€éƒ¨åˆ†ã€‚</p>
<h3 data-id="heading-9">ä¼ ç»Ÿå¤šçº¿ç¨‹æ¨¡å‹çš„é—®é¢˜</h3>
<p>ä¼ ç»Ÿçš„åšæ³•æ˜¯:ä¸€ä¸ªè¯·æ±‚ä¸€ä¸ªçº¿ç¨‹ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[ä¸»çº¿ç¨‹] --&gt; B[çº¿ç¨‹1: å¤„ç†è¯·æ±‚1]
    A --&gt; C[çº¿ç¨‹2: å¤„ç†è¯·æ±‚2]
    A --&gt; D[çº¿ç¨‹3: å¤„ç†è¯·æ±‚3]
    A --&gt; E[çº¿ç¨‹4: å¤„ç†è¯·æ±‚4]
    B --&gt; F[ç­‰å¾…æ•°æ®åº“ ğŸ’¤]
    C --&gt; G[ç­‰å¾…æ–‡ä»¶ ğŸ’¤]
    D --&gt; H[ç­‰å¾…ç½‘ç»œ ğŸ’¤]
    E --&gt; I[ç­‰å¾…æ•°æ®åº“ ğŸ’¤]
    style F fill:#ffcccc
    style G fill:#ffcccc
    style H fill:#ffcccc
    style I fill:#ffcccc
</code></pre>
<p>çœ‹èµ·æ¥ä¸é”™,ä½†æœ‰å‡ ä¸ªé—®é¢˜:</p>
<ol>
<li>
<p><strong>çº¿ç¨‹å¼€é”€å¤§</strong></p>
<ul>
<li>æ¯ä¸ªçº¿ç¨‹éœ€è¦ 1-2MB æ ˆç©ºé—´</li>
<li>åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹æœ‰å¼€é”€</li>
<li>å¤§é‡çº¿ç¨‹åˆ‡æ¢ä¼šæ¶ˆè€— CPU</li>
</ul>
</li>
<li>
<p><strong>èµ„æºæµªè´¹</strong></p>
<ul>
<li>çº¿ç¨‹å¤§éƒ¨åˆ†æ—¶é—´åœ¨ç­‰ I/O,å®é™…ä¸Šå•¥ä¹Ÿæ²¡å¹²</li>
<li>æƒ³è±¡ä¸€ä¸‹:10000 ä¸ªç”¨æˆ·å¹¶å‘,å°±å¾—å¼€ 10000 ä¸ªçº¿ç¨‹,æ¯ä¸ªçº¿ç¨‹ 90% çš„æ—¶é—´åœ¨ç¡è§‰</li>
</ul>
</li>
<li>
<p><strong>éš¾ä»¥è°ƒè¯•å’Œç»´æŠ¤</strong></p>
<ul>
<li>å¤šçº¿ç¨‹ç¼–ç¨‹å®¹æ˜“å‡ºç°ç«æ€æ¡ä»¶ã€æ­»é”</li>
<li>è°ƒè¯•å¤šçº¿ç¨‹ç¨‹åºæ˜¯ä¸ªå™©æ¢¦</li>
</ul>
</li>
</ol>
<h3 data-id="heading-10">äº‹ä»¶é©±åŠ¨çš„ä¼˜åŠ¿</h3>
<p>Node.js ç”¨äº‹ä»¶é©±åŠ¨ + å•çº¿ç¨‹è§£å†³äº†è¿™äº›é—®é¢˜:</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[äº‹ä»¶å¾ªç¯&lt;br&gt;å•çº¿ç¨‹] --&gt; B[å¤„ç†è¯·æ±‚1]
    B --&gt; A
    A --&gt; C[å¤„ç†è¯·æ±‚2]
    C --&gt; A
    A --&gt; D[å¤„ç†è¯·æ±‚3]
    D --&gt; A
    A --&gt; E[å¤„ç†è¯·æ±‚4]
    E --&gt; A
    F[I/O æ“ä½œ] -.å¼‚æ­¥.-&gt; A
    style A fill:#90EE90
</code></pre>
<p><strong>1. é«˜å¹¶å‘ä½å¼€é”€</strong>
å•çº¿ç¨‹ + éé˜»å¡ I/O,å¯ä»¥ç”¨å¾ˆå°çš„å†…å­˜å¤„ç†å¤§é‡å¹¶å‘è¿æ¥ã€‚</p>
<p>æ•°æ®è¯´è¯:</p>
<ul>
<li>Apache(å¤šçº¿ç¨‹): å¤„ç† 10000 å¹¶å‘éœ€è¦ ~2GB å†…å­˜</li>
<li>Node.js(äº‹ä»¶é©±åŠ¨): å¤„ç† 10000 å¹¶å‘éœ€è¦ ~200MB å†…å­˜</li>
</ul>
<p><strong>2. ç¼–ç¨‹ç®€å•</strong>
æ‰€æœ‰ä»£ç éƒ½åœ¨å•çº¿ç¨‹æ‰§è¡Œ,ä¸ç”¨æ‹…å¿ƒå¤šçº¿ç¨‹çš„é‚£äº›å‘:</p>
<ul>
<li>ä¸éœ€è¦åŠ é”</li>
<li>ä¸ä¼šæœ‰ç«æ€æ¡ä»¶</li>
<li>å›è°ƒå‡½æ•°é¡ºåºæ‰§è¡Œ,ä¸ä¼šåŒæ—¶è¿è¡Œ</li>
</ul>
<p><strong>3. èµ„æºåˆ©ç”¨ç‡é«˜</strong>
ç­‰ I/O çš„æ—¶å€™ä¸æ˜¯å¹²åç€,è€Œæ˜¯å»å¤„ç†å…¶ä»–è¯·æ±‚ã€‚å°±åƒé“¶è¡ŒæŸœå‘˜,ä¸€ä¸ªå®¢æˆ·åŠä¸šåŠ¡å¡ä½äº†,ä¸å‚»ç­‰ç€,è€Œæ˜¯å…ˆæœåŠ¡ä¸‹ä¸€ä¸ªå®¢æˆ·ã€‚</p>
<h3 data-id="heading-11">äº‹ä»¶é©±åŠ¨çš„å±€é™</h3>
<p>å½“ç„¶,äº‹ä»¶é©±åŠ¨ä¸æ˜¯é“¶å¼¹,ä¹Ÿæœ‰å®ƒçš„çŸ­æ¿:</p>
<p><strong>1. CPU å¯†é›†å‹ä»»åŠ¡çš„è½¯è‚‹</strong>
å•çº¿ç¨‹æ„å‘³ç€ä¸€æ¬¡åªèƒ½åšä¸€ä»¶äº‹ã€‚å¦‚æœæŸä¸ªå›è°ƒå‡½æ•°æ‰§è¡Œæ—¶é—´å¾ˆé•¿(æ¯”å¦‚è®¡ç®—å¯†é›†å‹ä»»åŠ¡),æ•´ä¸ªäº‹ä»¶å¾ªç¯å°±ä¼šè¢«é˜»å¡,å…¶ä»–è¯·æ±‚éƒ½å¾—ç­‰ç€ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ğŸ’€ è¿™ä¼šé˜»å¡æ•´ä¸ªäº‹ä»¶å¾ªç¯</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">complexCalculation</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> sum = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000000000</span>; i++) {
    sum += i;
  }
  <span class="hljs-keyword">return</span> sum;
}

<span class="hljs-comment">// åœ¨è¿™ä¸ªè®¡ç®—æœŸé—´,å…¶ä»–è¯·æ±‚éƒ½ä¼šå¡ä½</span>
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/heavy'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">complexCalculation</span>();  <span class="hljs-comment">// é˜»å¡å‡ ç§’é’Ÿ</span>
  res.<span class="hljs-title function_">json</span>({ result });
});
</code></pre>
<p><strong>2. å›è°ƒåœ°ç‹±</strong>
åµŒå¥—çš„å›è°ƒå‡½æ•°ä¼šè®©ä»£ç å˜æˆ"å›è°ƒé‡‘å­—å¡”",éš¾ä»¥é˜…è¯»å’Œç»´æŠ¤:</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ğŸ˜± å›è°ƒåœ°ç‹±</span>
fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file1.txt'</span>, <span class="hljs-function">(<span class="hljs-params">err, data1</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file2.txt'</span>, <span class="hljs-function">(<span class="hljs-params">err, data2</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
    fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file3.txt'</span>, <span class="hljs-function">(<span class="hljs-params">err, data3</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data1, data2, data3);
    });
  });
});
</code></pre>
<p>ä¸è¿‡è¿™ä¸ªé—®é¢˜å·²ç»æœ‰äº†å¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆ:Promise å’Œ async/awaitã€‚</p>
<p><strong>3. é”™è¯¯å¤„ç†å¤æ‚</strong>
å¼‚æ­¥ä»£ç çš„é”™è¯¯å¤„ç†æ¯”åŒæ­¥ä»£ç éº»çƒ¦,ä¸€ä¸ªæ²¡ catch çš„ Promise rejection å¯èƒ½å¯¼è‡´è¿›ç¨‹å´©æºƒã€‚</p>
<h2 data-id="heading-12">äº‹ä»¶é©±åŠ¨çš„åº•å±‚åŸç†</h2>
<p>ææ˜ç™½äº†"æ˜¯ä»€ä¹ˆ"å’Œ"ä¸ºä»€ä¹ˆ",ç°åœ¨æ¥çœ‹çœ‹"æ€ä¹ˆå®ç°"ã€‚</p>
<h3 data-id="heading-13">Node.js çš„äº‹ä»¶å¾ªç¯</h3>
<p>Node.js çš„äº‹ä»¶å¾ªç¯æ˜¯æ•´ä¸ªäº‹ä»¶é©±åŠ¨æ¶æ„çš„æ ¸å¿ƒ,å®ƒå»ºç«‹åœ¨ libuv è¿™ä¸ª C åº“ä¹‹ä¸Šã€‚</p>
<h4 data-id="heading-14">äº‹ä»¶å¾ªç¯çš„ç»“æ„</h4>
<p>äº‹ä»¶å¾ªç¯åˆ†ä¸ºå¤šä¸ªé˜¶æ®µ(Phase),æ¯ä¸ªé˜¶æ®µæœ‰è‡ªå·±çš„ä»»åŠ¡é˜Ÿåˆ—:</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[timers&lt;br&gt;æ‰§è¡Œ setTimeout/setInterval] --&gt; B[pending callbacks&lt;br&gt;æ‰§è¡Œå»¶è¿Ÿçš„ I/O å›è°ƒ]
    B --&gt; C[idle, prepare&lt;br&gt;å†…éƒ¨ä½¿ç”¨]
    C --&gt; D[poll&lt;br&gt;è·å–æ–°çš„ I/O äº‹ä»¶]
    D --&gt; E[check&lt;br&gt;æ‰§è¡Œ setImmediate]
    E --&gt; F[close callbacks&lt;br&gt;æ‰§è¡Œå…³é—­å›è°ƒ]
    F --&gt; A
    style A fill:#ffe1e1
    style D fill:#e1f5ff
    style E fill:#fff4e1
</code></pre>
<p><strong>å„é˜¶æ®µçš„ä½œç”¨</strong>:</p>
<ol>
<li>
<p><strong>timers é˜¶æ®µ</strong>
æ‰§è¡Œ <code>setTimeout</code> å’Œ <code>setInterval</code> çš„å›è°ƒ</p>
</li>
<li>
<p><strong>pending callbacks é˜¶æ®µ</strong>
æ‰§è¡Œä¸€äº›ç³»ç»Ÿæ“ä½œçš„å›è°ƒ,æ¯”å¦‚ TCP é”™è¯¯</p>
</li>
<li>
<p><strong>idle, prepare é˜¶æ®µ</strong>
ä»…å†…éƒ¨ä½¿ç”¨</p>
</li>
<li>
<p><strong>poll é˜¶æ®µ</strong> (æœ€é‡è¦)</p>
<ul>
<li>è·å–æ–°çš„ I/O äº‹ä»¶</li>
<li>æ‰§è¡Œ I/O ç›¸å…³çš„å›è°ƒ</li>
<li>å¦‚æœ poll é˜Ÿåˆ—ä¸ä¸ºç©º,ä¼šä¾æ¬¡æ‰§è¡Œå›è°ƒç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºæˆ–è¾¾åˆ°ç³»ç»Ÿé™åˆ¶</li>
<li>å¦‚æœ poll é˜Ÿåˆ—ä¸ºç©º:
<ul>
<li>å¦‚æœæœ‰ <code>setImmediate</code>,è¿›å…¥ check é˜¶æ®µ</li>
<li>å¦‚æœæœ‰ timers åˆ°æœŸ,å›åˆ° timers é˜¶æ®µ</li>
<li>å¦åˆ™ç­‰å¾…æ–°çš„ I/O äº‹ä»¶</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>check é˜¶æ®µ</strong>
æ‰§è¡Œ <code>setImmediate</code> çš„å›è°ƒ</p>
</li>
<li>
<p><strong>close callbacks é˜¶æ®µ</strong>
æ‰§è¡Œå…³é—­äº‹ä»¶çš„å›è°ƒ,æ¯”å¦‚ <code>socket.on('close', ...)</code></p>
</li>
</ol>
<h4 data-id="heading-15">å¾®ä»»åŠ¡é˜Ÿåˆ—(Microtask Queue)</h4>
<p>é™¤äº†äº‹ä»¶å¾ªç¯çš„é˜¶æ®µé˜Ÿåˆ—,è¿˜æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„å¾®ä»»åŠ¡é˜Ÿåˆ—:</p>
<ul>
<li><strong>Promise å¾®ä»»åŠ¡é˜Ÿåˆ—</strong>: Promise.then/catch/finally</li>
<li><strong>process.nextTick é˜Ÿåˆ—</strong>: process.nextTick</li>
</ul>
<p>å¾®ä»»åŠ¡çš„ç‰¹ç‚¹æ˜¯:<strong>åœ¨å½“å‰é˜¶æ®µç»“æŸåã€è¿›å…¥ä¸‹ä¸€é˜¶æ®µå‰æ‰§è¡Œ</strong>ã€‚</p>
<p>æ‰§è¡Œä¼˜å…ˆçº§:</p>
<pre><code class="hljs language-arduino" lang="arduino">process.nextTick &gt; Promise å¾®ä»»åŠ¡ &gt; äº‹ä»¶å¾ªç¯å„é˜¶æ®µçš„å®ä»»åŠ¡
</code></pre>
<h3 data-id="heading-16">ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'1. script start'</span>);

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'2. setTimeout'</span>);
}, <span class="hljs-number">0</span>);

<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'3. promise1'</span>);
}).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'4. promise2'</span>);
});

process.<span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'5. nextTick'</span>);
});

<span class="hljs-title function_">setImmediate</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'6. setImmediate'</span>);
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'7. script end'</span>);

<span class="hljs-comment">// è¾“å‡ºé¡ºåº:</span>
<span class="hljs-comment">// 1. script start</span>
<span class="hljs-comment">// 7. script end</span>
<span class="hljs-comment">// 5. nextTick          (nextTick é˜Ÿåˆ—)</span>
<span class="hljs-comment">// 3. promise1          (Promise å¾®ä»»åŠ¡é˜Ÿåˆ—)</span>
<span class="hljs-comment">// 4. promise2          (Promise å¾®ä»»åŠ¡é˜Ÿåˆ—)</span>
<span class="hljs-comment">// 2. setTimeout        (timers é˜¶æ®µ)</span>
<span class="hljs-comment">// 6. setImmediate      (check é˜¶æ®µ)</span>
</code></pre>
<p>æ‰§è¡Œæµç¨‹:</p>
<ol>
<li>
<p><strong>ä¸»ä»£ç æ‰§è¡Œ</strong></p>
<ul>
<li>è¾“å‡º: 1, 7</li>
<li>setTimeout æ³¨å†Œåˆ° timers é˜¶æ®µ</li>
<li>Promise æ³¨å†Œåˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—</li>
<li>nextTick æ³¨å†Œåˆ° nextTick é˜Ÿåˆ—</li>
<li>setImmediate æ³¨å†Œåˆ° check é˜¶æ®µ</li>
</ul>
</li>
<li>
<p><strong>ä¸»ä»£ç ç»“æŸ,æ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—</strong></p>
<ul>
<li>å…ˆæ‰§è¡Œ nextTick é˜Ÿåˆ—: è¾“å‡º 5</li>
<li>å†æ‰§è¡Œ Promise å¾®ä»»åŠ¡: è¾“å‡º 3, 4</li>
</ul>
</li>
<li>
<p><strong>è¿›å…¥äº‹ä»¶å¾ªç¯</strong></p>
<ul>
<li>timers é˜¶æ®µ: è¾“å‡º 2</li>
<li>poll é˜¶æ®µ: æ— ä»»åŠ¡</li>
<li>check é˜¶æ®µ: è¾“å‡º 6</li>
</ul>
</li>
</ol>
<h3 data-id="heading-17">éé˜»å¡ I/O çš„å®ç°</h3>
<p>Node.js çš„éé˜»å¡ I/O ä¾èµ–æ“ä½œç³»ç»Ÿæä¾›çš„å¼‚æ­¥ I/O æ¥å£ã€‚</p>
<h4 data-id="heading-18">æ“ä½œç³»ç»Ÿå±‚é¢çš„æ”¯æŒ</h4>
<p>ä¸åŒæ“ä½œç³»ç»Ÿæœ‰ä¸åŒçš„å¼‚æ­¥ I/O æœºåˆ¶:</p>

























<table><thead><tr><th>æ“ä½œç³»ç»Ÿ</th><th>å¼‚æ­¥ I/O æœºåˆ¶</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Linux</td><td>epoll</td><td>é«˜æ•ˆçš„ I/O å¤šè·¯å¤ç”¨</td></tr><tr><td>macOS/BSD</td><td>kqueue</td><td>ç±»ä¼¼ epoll</td></tr><tr><td>Windows</td><td>IOCP</td><td>I/O å®Œæˆç«¯å£</td></tr></tbody></table>
<p>libuv æŠŠè¿™äº›ä¸åŒçš„åº•å±‚æ¥å£å°è£…æˆç»Ÿä¸€çš„ API,è®© Node.js å¯ä»¥è·¨å¹³å°è¿è¡Œã€‚</p>
<h4 data-id="heading-19">I/O æ“ä½œçš„å®Œæ•´æµç¨‹</h4>
<p>ä»¥æ–‡ä»¶è¯»å–ä¸ºä¾‹:</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant App as åº”ç”¨ä»£ç 
    participant Node as Node.js
    participant Libuv as libuv
    participant OS as æ“ä½œç³»ç»Ÿ
    
    App-&gt;&gt;Node: fs.readFile('file.txt', callback)
    Node-&gt;&gt;Libuv: åˆ›å»ºè¯»å–è¯·æ±‚
    Libuv-&gt;&gt;OS: å‘èµ·å¼‚æ­¥è¯»å–
    Node--&gt;&gt;App: ç«‹å³è¿”å›(éé˜»å¡)
    
    Note over App: ç»§ç»­æ‰§è¡Œå…¶ä»–ä»£ç 
    
    OS-&gt;&gt;Libuv: I/O å®Œæˆé€šçŸ¥
    Libuv-&gt;&gt;Node: å°†å›è°ƒåŠ å…¥äº‹ä»¶é˜Ÿåˆ—
    Node-&gt;&gt;App: äº‹ä»¶å¾ªç¯æ‰§è¡Œ callback
</code></pre>
<p>æ•´ä¸ªè¿‡ç¨‹:</p>
<ol>
<li><strong>å‘èµ·è¯·æ±‚</strong>: åº”ç”¨è°ƒç”¨ <code>fs.readFile</code>,Node.js ç«‹å³è¿”å›,ä¸ç­‰å¾…</li>
<li><strong>æ“ä½œç³»ç»Ÿå¤„ç†</strong>: OS åœ¨åå°è¯»å–æ–‡ä»¶</li>
<li><strong>å®Œæˆé€šçŸ¥</strong>: OS é€šçŸ¥ libuv I/O å®Œæˆ</li>
<li><strong>å›è°ƒæ‰§è¡Œ</strong>: äº‹ä»¶å¾ªç¯åœ¨ poll é˜¶æ®µæ‰§è¡Œå›è°ƒå‡½æ•°</li>
</ol>
<p>å…³é”®ç‚¹:åº”ç”¨ä»£ç ä»ä¸ç­‰å¾… I/O,ä¸€ç›´åœ¨äº‹ä»¶å¾ªç¯ä¸­ä¸æ–­å¤„ç†æ–°çš„ä»»åŠ¡ã€‚</p>
<h3 data-id="heading-20">çº¿ç¨‹æ± çš„ç§˜å¯†</h3>
<p>è™½ç„¶ Node.js æ˜¯å•çº¿ç¨‹,ä½†æœ‰äº›æ“ä½œ(æ¯”å¦‚æ–‡ä»¶ç³»ç»Ÿæ“ä½œã€DNS æŸ¥è¯¢)åœ¨æŸäº›ç³»ç»Ÿä¸Šæ²¡æœ‰çœŸæ­£çš„å¼‚æ­¥æ¥å£ã€‚</p>
<p>libuv æ€ä¹ˆåŠ?ç”¨çº¿ç¨‹æ± æ¨¡æ‹Ÿå¼‚æ­¥!</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ä¸»çº¿ç¨‹&lt;br&gt;äº‹ä»¶å¾ªç¯] --&gt; B[çº¿ç¨‹æ± &lt;br&gt;4ä¸ªå·¥ä½œçº¿ç¨‹]
    B --&gt; C[çº¿ç¨‹1: è¯»æ–‡ä»¶]
    B --&gt; D[çº¿ç¨‹2: å†™æ–‡ä»¶]
    B --&gt; E[çº¿ç¨‹3: DNSæŸ¥è¯¢]
    B --&gt; F[çº¿ç¨‹4: cryptoåŠ å¯†]
    C -.å®Œæˆ.-&gt; A
    D -.å®Œæˆ.-&gt; A
    E -.å®Œæˆ.-&gt; A
    F -.å®Œæˆ.-&gt; A
    style A fill:#90EE90
    style B fill:#FFE4B5
</code></pre>
<p>é»˜è®¤çº¿ç¨‹æ± å¤§å°æ˜¯ 4,å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è°ƒæ•´:</p>
<pre><code class="hljs language-bash" lang="bash">UV_THREADPOOL_SIZE=8 node app.js
</code></pre>
<p>éœ€è¦çº¿ç¨‹æ± çš„æ“ä½œ:</p>
<ul>
<li>æ–‡ä»¶ç³»ç»Ÿæ“ä½œ(fs.readFile, fs.writeFile ç­‰)</li>
<li>DNS æ“ä½œ(dns.lookup)</li>
<li>ä¸€äº› crypto æ“ä½œ</li>
<li>zlib å‹ç¼©</li>
</ul>
<p>ç½‘ç»œ I/O(HTTPã€TCP)ä¸éœ€è¦çº¿ç¨‹æ± ,ä½¿ç”¨çœŸæ­£çš„å¼‚æ­¥ I/Oã€‚</p>
<h2 data-id="heading-21">äº‹ä»¶é©±åŠ¨ vs å…¶ä»–ç¼–ç¨‹æ¨¡å‹</h2>
<h3 data-id="heading-22">ä¸å¤šçº¿ç¨‹æ¨¡å‹å¯¹æ¯”</h3>








































<table><thead><tr><th>ç‰¹æ€§</th><th>äº‹ä»¶é©±åŠ¨(Node.js)</th><th>å¤šçº¿ç¨‹(Java/C++)</th></tr></thead><tbody><tr><td><strong>å¹¶å‘æ–¹å¼</strong></td><td>å•çº¿ç¨‹ + å¼‚æ­¥ I/O</td><td>å¤šçº¿ç¨‹ + åŒæ­¥ I/O</td></tr><tr><td><strong>å†…å­˜å ç”¨</strong></td><td>ä½(æ¯ä¸ªè¿æ¥ ~2KB)</td><td>é«˜(æ¯ä¸ªçº¿ç¨‹ 1-2MB)</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>I/O å¯†é›†å‹</td><td>CPU å¯†é›†å‹</td></tr><tr><td><strong>ç¼–ç¨‹éš¾åº¦</strong></td><td>ç®€å•(æ— é”)</td><td>å¤æ‚(éœ€è¦åŠ é”)</td></tr><tr><td><strong>CPU åˆ©ç”¨</strong></td><td>å•æ ¸(éœ€è¦å¤šè¿›ç¨‹)</td><td>å¤šæ ¸</td></tr><tr><td><strong>æ€§èƒ½ç“¶é¢ˆ</strong></td><td>CPU è®¡ç®—</td><td>çº¿ç¨‹åˆ‡æ¢ã€é”ç«äº‰</td></tr></tbody></table>
<p><strong>é€‰æ‹©å»ºè®®</strong>:</p>
<ul>
<li>I/O å¯†é›†å‹(Web æœåŠ¡å™¨ã€API ç½‘å…³): äº‹ä»¶é©±åŠ¨</li>
<li>CPU å¯†é›†å‹(è§†é¢‘å¤„ç†ã€ç§‘å­¦è®¡ç®—): å¤šçº¿ç¨‹</li>
<li>æ··åˆå‹: äº‹ä»¶é©±åŠ¨ + Worker çº¿ç¨‹å¤„ç† CPU ä»»åŠ¡</li>
</ul>
<h3 data-id="heading-23">ä¸åç¨‹æ¨¡å‹å¯¹æ¯”</h3>
<p>Go çš„åç¨‹(goroutine)å’Œ Node.js çš„äº‹ä»¶é©±åŠ¨éƒ½æ˜¯ä¸ºäº†è§£å†³é«˜å¹¶å‘é—®é¢˜,ä½†æ€è·¯ä¸åŒ:</p>
<p><strong>Go åç¨‹æ¨¡å‹</strong>:</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// çœ‹èµ·æ¥åƒåŒæ­¥ä»£ç </span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">handler</span><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> {
    data := readDatabase()  <span class="hljs-comment">// å®é™…ä¸Šæ˜¯å¼‚æ­¥çš„,ä½†å†™èµ·æ¥åƒåŒæ­¥</span>
    fmt.Fprintf(w, data)
}
</code></pre>
<p><strong>Node.js äº‹ä»¶é©±åŠ¨</strong>:</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¼‚æ­¥ä»£ç (Promise)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handler</span>(<span class="hljs-params">req, res</span>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">readDatabase</span>();  <span class="hljs-comment">// æ˜ç¡®æ ‡æ³¨å¼‚æ­¥</span>
  res.<span class="hljs-title function_">send</span>(data);
}
</code></pre>






























<table><thead><tr><th>ç‰¹æ€§</th><th>Go åç¨‹</th><th>Node.js äº‹ä»¶é©±åŠ¨</th></tr></thead><tbody><tr><td><strong>ä»£ç é£æ ¼</strong></td><td>åŒæ­¥é£æ ¼(çœ‹èµ·æ¥)</td><td>å¼‚æ­¥é£æ ¼</td></tr><tr><td><strong>å¿ƒæ™ºè´Ÿæ‹…</strong></td><td>ä½(è‡ªåŠ¨è°ƒåº¦)</td><td>ä¸­(éœ€è¦ç†è§£å¼‚æ­¥)</td></tr><tr><td><strong>è°ƒè¯•éš¾åº¦</strong></td><td>éš¾(goroutine æ³„æ¼)</td><td>ä¸­(å›è°ƒ/Promise)</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>ç•¥é«˜</td><td>ç•¥ä½</td></tr></tbody></table>
<p>åç¨‹æ˜¯æ›´é«˜çº§çš„æŠ½è±¡,æŠŠå¼‚æ­¥çš„å¤æ‚åº¦è—åœ¨è¿è¡Œæ—¶é‡Œã€‚ä½† Node.js çš„äº‹ä»¶é©±åŠ¨æ¨¡å‹æ›´é€æ˜,å¼€å‘è€…èƒ½æ¸…æ¥šåœ°çœ‹åˆ°å“ªé‡Œæ˜¯å¼‚æ­¥çš„ã€‚</p>
<h2 data-id="heading-24">æ€»ç»“</h2>
<p>ç ”ç©¶å®Œäº‹ä»¶é©±åŠ¨,æˆ‘çš„ç†è§£æ˜¯:</p>
<p><strong>åŸç†å±‚é¢</strong>:</p>
<ul>
<li>äº‹ä»¶é©±åŠ¨æ˜¯ä¸€ç§ç¼–ç¨‹æ¨¡å‹,æ ¸å¿ƒæ˜¯"éé˜»å¡ + äº‹ä»¶å¾ªç¯ + å›è°ƒå‡½æ•°"</li>
<li>Node.js ç”¨å•çº¿ç¨‹ + å¼‚æ­¥ I/O å®ç°é«˜å¹¶å‘,é¿å…äº†å¤šçº¿ç¨‹çš„å¤æ‚æ€§å’Œå¼€é”€</li>
<li>äº‹ä»¶å¾ªç¯åˆ†å¤šä¸ªé˜¶æ®µ,æ¯ä¸ªé˜¶æ®µå¤„ç†ç‰¹å®šç±»å‹çš„ä»»åŠ¡</li>
<li>åº•å±‚ä¾èµ– libuv å°è£…ä¸åŒæ“ä½œç³»ç»Ÿçš„å¼‚æ­¥ I/O æ¥å£</li>
</ul>
<p><strong>å®ç”¨å±‚é¢</strong>:</p>
<ul>
<li>é€‚åˆ I/O å¯†é›†å‹åº”ç”¨(Web æœåŠ¡å™¨ã€APIã€å®æ—¶åº”ç”¨)</li>
<li>ä¸é€‚åˆ CPU å¯†é›†å‹åº”ç”¨(é™¤éç”¨ Worker çº¿ç¨‹)</li>
<li>ç¼–ç¨‹ç®€å•(æ— é”ã€æ— ç«æ€),ä½†éœ€è¦ç†è§£å¼‚æ­¥æ€ç»´</li>
<li>é”™è¯¯å¤„ç†å’Œè°ƒè¯•éœ€è¦é¢å¤–æ³¨æ„</li>
</ul>
<p><strong>ä½¿ç”¨å»ºè®®</strong>:</p>
<ol>
<li><strong>å¼€å‘ Web åº”ç”¨/API</strong>: æ³¨å†Œè·¯ç”±å¤„ç†å‡½æ•° â†’ å¤„ç†è¯·æ±‚ â†’ å¼‚æ­¥æ“ä½œ(æ•°æ®åº“ã€æ–‡ä»¶) â†’ è¿”å›å“åº”(æ°¸è¿œä¸è¦é˜»å¡!)</li>
<li><strong>å¤„ç†é«˜å¹¶å‘ I/O</strong>: å¤§é‡å¹¶å‘è¿æ¥(èŠå¤©æœåŠ¡å™¨ã€æ¸¸æˆæœåŠ¡å™¨) â†’ äº‹ä»¶é©±åŠ¨å®Œç¾é€‚é…</li>
<li><strong>CPU å¯†é›†ä»»åŠ¡</strong>: æŠŠè®¡ç®—æ”¾åˆ° Worker çº¿ç¨‹ â†’ ä¸»çº¿ç¨‹åªè´Ÿè´£åè°ƒ â†’ ä¿æŒäº‹ä»¶å¾ªç¯ç•…é€š</li>
</ol>
<p>äº‹ä»¶é©±åŠ¨ä¸æ˜¯å®Œç¾çš„,ä½†åœ¨å®ƒæ“…é•¿çš„é¢†åŸŸ(I/O å¯†é›†å‹é«˜å¹¶å‘),å®ƒç¡®å®æ˜¯æœ€ä¼˜è§£ä¹‹ä¸€ã€‚ç†è§£å®ƒçš„åŸç†å’Œå±€é™,æ‰èƒ½æ›´å¥½åœ°å‘æŒ¥å®ƒçš„ä¼˜åŠ¿,ä¹Ÿæ‰èƒ½åœ¨éœ€è¦çš„æ—¶å€™é€‰æ‹©æ›´åˆé€‚çš„æ–¹æ¡ˆã€‚</p>
<hr/>
<h2 data-id="heading-25">å‚è€ƒèµ„æ–™</h2>
<ol>
<li>
<p><strong>Node.js å®˜æ–¹æ–‡æ¡£</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fen%2Fdocs%2Fguides%2Fevent-loop-timers-and-nexttick%2F" target="_blank" title="https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick/" ref="nofollow noopener noreferrer">The Node.js Event Loop</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fen%2Fdocs%2Fguides%2Fdont-block-the-event-loop%2F" target="_blank" title="https://nodejs.org/en/docs/guides/dont-block-the-event-loop/" ref="nofollow noopener noreferrer">Don't Block the Event Loop</a></li>
</ul>
</li>
<li>
<p><strong>libuv æ–‡æ¡£</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Fdocs.libuv.org%2Fen%2Fv1.x%2Fdesign.html" target="_blank" title="http://docs.libuv.org/en/v1.x/design.html" ref="nofollow noopener noreferrer">libuv Design Overview</a> - ç†è§£åº•å±‚å®ç°</li>
</ul>
</li>
<li>
<p><strong>æ·±å…¥æ–‡ç« </strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.freecodecamp.org%2Fnews%2Funderstanding-node-js-event-driven-architecture-223292fcbc2d%2F" target="_blank" title="https://www.freecodecamp.org/news/understanding-node-js-event-driven-architecture-223292fcbc2d/" ref="nofollow noopener noreferrer">Understanding Node.js Event-Driven Architecture</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.insiderattack.net%2Fevent-loop-and-the-big-picture-nodejs-event-loop-part-1-1cb67a182810" target="_blank" title="https://blog.insiderattack.net/event-loop-and-the-big-picture-nodejs-event-loop-part-1-1cb67a182810" ref="nofollow noopener noreferrer">Node.js Under The Hood</a></li>
</ul>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯æ¶æ„ä¸­çš„ä¸­é—´å±‚è®¾è®¡ï¼šæ„å»ºç¨³å¥å¯ç»´æŠ¤çš„ç»„ä»¶ä½“ç³»]]></title>    <link>https://juejin.cn/post/7570651893869936692</link>    <guid>https://juejin.cn/post/7570651893869936692</guid>    <pubDate>2025-11-10T06:19:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570651893869936692" data-draft-id="7570651893869903924" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯æ¶æ„ä¸­çš„ä¸­é—´å±‚è®¾è®¡ï¼šæ„å»ºç¨³å¥å¯ç»´æŠ¤çš„ç»„ä»¶ä½“ç³»"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,ä»£ç è§„èŒƒ"/> <meta itemprop="datePublished" content="2025-11-10T06:19:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§çŸ¥é—²é—²i"/> <meta itemprop="url" content="https://juejin.cn/user/3799545205237111"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯æ¶æ„ä¸­çš„ä¸­é—´å±‚è®¾è®¡ï¼šæ„å»ºç¨³å¥å¯ç»´æŠ¤çš„ç»„ä»¶ä½“ç³»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3799545205237111/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§çŸ¥é—²é—²i
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:19:53.000Z" title="Mon Nov 10 2025 06:19:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼Œä¸­é—´å±‚æ¶æ„è®¾è®¡å·²æˆä¸ºæ„å»ºå¤§å‹å¤æ‚åº”ç”¨çš„å…³é”®ç­–ç•¥ã€‚ç‰¹åˆ«æ˜¯åœ¨ç»„ä»¶åŒ–å¼€å‘ä¸­ï¼Œåˆç†çš„ä¸­é—´å±‚è®¾è®¡èƒ½å¤Ÿæ˜¾è‘—æå‡ä»£ç è´¨é‡ã€å›¢é˜Ÿåä½œæ•ˆç‡å’Œç³»ç»Ÿå¯ç»´æŠ¤æ€§ã€‚</p>
<p>================================================================================</p>
<h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯ç»„ä»¶ä¸­é—´å±‚ï¼Ÿ</h2>
<p>ç»„ä»¶ä¸­é—´å±‚æ˜¯ä½äºä¸šåŠ¡é€»è¾‘ä¸åŸºç¡€UIç»„ä»¶ä¹‹é—´çš„æŠ½è±¡å±‚ï¼Œå®ƒé€šè¿‡å¯¹åº•å±‚ç»„ä»¶ï¼ˆå¦‚ Ant Designã€Element UI ç­‰ï¼‰è¿›è¡Œç»Ÿä¸€å°è£…ï¼Œä¸ºä¸šåŠ¡å¼€å‘æä¾›æ ‡å‡†åŒ–ã€å¢å¼ºå‹çš„ç»„ä»¶æ¥å£ã€‚</p>
<p><strong>æ¶æ„å±‚æ¬¡ç¤ºæ„ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">ä¸šåŠ¡ç»„ä»¶å±‚ (Business Components)
    â†“
ç»„ä»¶ä¸­é—´å±‚ (Component Middleware) â† æ ¸å¿ƒæŠ½è±¡å±‚
    â†“
åŸºç¡€UIåº“ (UI Libraries) â† AntDã€Element UI ç­‰
    â†“
åŸç”Ÿ<span class="hljs-selector-tag">HTML</span>å…ƒç´  (Native HTML)
</code></pre>
<h2 data-id="heading-1">äºŒã€ä¸­é—´å±‚è®¾è®¡çš„æ ¸å¿ƒä»·å€¼</h2>
<h3 data-id="heading-2">1. æŠ€æœ¯æ ˆè§£è€¦ä¸é£é™©æ§åˆ¶</h3>
<p><strong>é—®é¢˜åœºæ™¯ï¼š</strong> ä¸šåŠ¡ä»£ç ç›´æ¥ä¾èµ–ç‰¹å®šUIåº“ï¼Œå¯¼è‡´æŠ€æœ¯æ ˆåˆ‡æ¢æˆæœ¬æé«˜</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ ç›´æ¥ä¾èµ– - å±é™©çš„åšæ³•</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span>, <span class="hljs-title class_">Table</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'antd'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserManagement</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span>&gt;</span>åˆ é™¤ç”¨æˆ·<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">dataSource</span>=<span class="hljs-string">{data}</span> /&gt;</span></span>
  );
}

<span class="hljs-comment">// âœ… ä¸­é—´å±‚å°è£… - å®‰å…¨çš„åšæ³•</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">PrimaryButton</span>, <span class="hljs-title class_">DataTable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserManagement</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">PrimaryButton</span>&gt;</span>åˆ é™¤ç”¨æˆ·<span class="hljs-tag">&lt;/<span class="hljs-name">PrimaryButton</span>&gt;</span></span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">DataTable</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> /&gt;</span></span>
  );
}
</code></pre>
<p><strong>ä¼˜åŠ¿ä½“ç°ï¼š</strong> å½“éœ€è¦ä» Ant Design è¿ç§»åˆ°å…¶ä»–UIåº“æ—¶ï¼Œåªéœ€ä¿®æ”¹ä¸­é—´å±‚å®ç°ï¼Œä¸šåŠ¡ä»£ç æ— éœ€æ”¹åŠ¨ã€‚</p>
<h3 data-id="heading-3">2. ç»Ÿä¸€è®¾è®¡è§„èŒƒä¸ç”¨æˆ·ä½“éªŒ</h3>
<p>é€šè¿‡ä¸­é—´å±‚å¼ºåˆ¶å®æ–½è®¾è®¡ç³»ç»Ÿè§„èŒƒï¼Œç¡®ä¿æ•´ä¸ªåº”ç”¨äº¤äº’ä¸€è‡´æ€§ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// components/EnhancedTable/index.tsx
import React from 'react'<span class="hljs-comment">;</span>
import { Table, Empty, Spin, Alert } from 'antd'<span class="hljs-comment">;</span>

interface EnhancedTableProps {
  loading?: boolean<span class="hljs-comment">;</span>
  error?: Error | null<span class="hljs-comment">;</span>
  data: any<span class="hljs-section">[]</span><span class="hljs-comment">;</span>
  columns: any<span class="hljs-section">[]</span><span class="hljs-comment">;</span>
  onRetry?: () =&gt; void<span class="hljs-comment">;</span>
}

export const EnhancedTable: React.FC&lt;EnhancedTableProps&gt; = ({
  <span class="hljs-attr">loading</span> = <span class="hljs-literal">false</span>,
  <span class="hljs-attr">error</span> = null,
  <span class="hljs-attr">data</span> = [],
  columns,
  onRetry,
  ...rest
}) =&gt; {
  if (error) {
    return (
      &lt;Alert
        <span class="hljs-attr">message</span>=<span class="hljs-string">"æ•°æ®åŠ è½½å¤±è´¥"</span>
        <span class="hljs-attr">description</span>={error.message}
        <span class="hljs-attr">type</span>=<span class="hljs-string">"error"</span>
        <span class="hljs-attr">action</span>={
          &lt;Button <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span> <span class="hljs-literal">on</span>Click={<span class="hljs-literal">on</span>Retry}&gt;
            é‡è¯•
          &lt;/Button&gt;
        }
      /&gt;
    )<span class="hljs-comment">;</span>
  }

  return (
    &lt;Spin <span class="hljs-attr">spinning</span>={loading}&gt;
      &lt;Table
        <span class="hljs-attr">dataSource</span>={data}
        <span class="hljs-attr">columns</span>={columns}
        <span class="hljs-attr">locale</span>={{
          emptyText: (
            &lt;Empty 
              <span class="hljs-attr">description</span>={loading ? <span class="hljs-string">'åŠ è½½ä¸­...'</span> : <span class="hljs-string">'æš‚æ— æ•°æ®'</span>}
              <span class="hljs-attr">image</span>={Empty.PRESENTED_IMAGE_SIMPLE}
            /&gt;
          )
        }}
        <span class="hljs-attr">pagination</span>={{
          showSizeChanger: true,
          showQuickJumper: true,
          showTotal: (total) =&gt; `å…± ${total} æ¡`,
          pageSizeOptions: <span class="hljs-section">['10', '20', '50', '100']</span>,
        }}
        {...rest}
      /&gt;
    &lt;/Spin&gt;
  )<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-4">3. åŠŸèƒ½å¢å¼ºä¸æ¨ªåˆ‡å…³æ³¨ç‚¹å¤„ç†</h3>
<p>ä¸­é—´å±‚å¤©ç„¶é€‚åˆå¤„ç†è·¨ç»„ä»¶çš„é€šç”¨é€»è¾‘ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// components/SecureButton/index.tsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span>, message, <span class="hljs-title class_">Modal</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'antd'</span>;
<span class="hljs-keyword">import</span> { usePermission } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/usePermission'</span>;
<span class="hljs-keyword">import</span> { useTracking } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/useTracking'</span>;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">SecureButtonProps</span> {
  <span class="hljs-comment">// æƒé™æ§åˆ¶</span>
  permission?: <span class="hljs-built_in">string</span>;
  <span class="hljs-comment">// æ“ä½œç¡®è®¤</span>
  confirm?: <span class="hljs-built_in">string</span> | { <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span> };
  <span class="hljs-comment">// åŸ‹ç‚¹è¿½è¸ª</span>
  tracking?: { <span class="hljs-attr">event</span>: <span class="hljs-built_in">string</span>; data?: <span class="hljs-built_in">any</span> };
  <span class="hljs-comment">// é˜²é‡å¤æäº¤</span>
  debounce?: <span class="hljs-built_in">number</span>;
  onClick?: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> | <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">SecureButton</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">SecureButtonProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">{
  permission,
  confirm,
  tracking,
  debounce = <span class="hljs-number">300</span>,
  onClick,
  children,
  ...props
}</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { hasPermission } = <span class="hljs-title function_">usePermission</span>();
  <span class="hljs-keyword">const</span> { trackEvent } = <span class="hljs-title function_">useTracking</span>();
  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-comment">// æƒé™æ ¡éªŒ</span>
  <span class="hljs-keyword">if</span> (permission &amp;&amp; !<span class="hljs-title function_">hasPermission</span>(permission)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// ç¡®è®¤å¯¹è¯æ¡†</span>
    <span class="hljs-keyword">if</span> (confirm) {
      <span class="hljs-keyword">const</span> confirmed = <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt;(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
        <span class="hljs-title class_">Modal</span>.<span class="hljs-title function_">confirm</span>({
          <span class="hljs-attr">title</span>: <span class="hljs-keyword">typeof</span> confirm === <span class="hljs-string">'string'</span> ? <span class="hljs-string">'ç¡®è®¤æ“ä½œ'</span> : confirm.<span class="hljs-property">title</span>,
          <span class="hljs-attr">content</span>: <span class="hljs-keyword">typeof</span> confirm === <span class="hljs-string">'string'</span> ? confirm : confirm.<span class="hljs-property">content</span>,
          <span class="hljs-attr">onOk</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-literal">true</span>),
          <span class="hljs-attr">onCancel</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-literal">false</span>),
        });
      });
      
      <span class="hljs-keyword">if</span> (!confirmed) <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// åŸ‹ç‚¹è®°å½•</span>
    <span class="hljs-keyword">if</span> (tracking) {
      <span class="hljs-title function_">trackEvent</span>(tracking.<span class="hljs-property">event</span>, tracking.<span class="hljs-property">data</span>);
    }

    <span class="hljs-comment">// åŠ è½½çŠ¶æ€ä¸é˜²é‡å¤</span>
    <span class="hljs-keyword">if</span> (!loading) {
      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">true</span>);
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">await</span> onClick?.();
      } <span class="hljs-keyword">finally</span> {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>), debounce);
      }
    }
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
      {<span class="hljs-attr">...props</span>}
      <span class="hljs-attr">loading</span>=<span class="hljs-string">{loading}</span>
      <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>
      <span class="hljs-attr">disabled</span>=<span class="hljs-string">{props.disabled</span> || <span class="hljs-attr">loading</span>}
    &gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-5">4. ç±»å‹å®‰å…¨ä¸å¼€å‘ä½“éªŒæå‡</h3>
<p>é€šè¿‡ TypeScript æä¾›ç²¾ç¡®çš„ç±»å‹æç¤ºå’Œçº¦æŸï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// types/table.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">TableColumn</span>&lt;T = <span class="hljs-built_in">any</span>&gt; {
  <span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">dataIndex</span>: keyof T;
  render?: <span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">any</span>, record: T, index: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span>;
  sorter?: <span class="hljs-built_in">boolean</span> | (<span class="hljs-function">(<span class="hljs-params">a: T, b: T</span>) =&gt;</span> <span class="hljs-built_in">number</span>);
  filters?: { <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">value</span>: <span class="hljs-built_in">any</span> }[];
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">PaginationConfig</span> {
  <span class="hljs-attr">current</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">pageSize</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">total</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">onChange</span>: <span class="hljs-function">(<span class="hljs-params">page: <span class="hljs-built_in">number</span>, pageSize?: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
}

<span class="hljs-comment">// components/DataTable/index.tsx</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TableColumn</span>, <span class="hljs-title class_">PaginationConfig</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/types/table'</span>;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">DataTableProps</span>&lt;T&gt; {
  <span class="hljs-attr">data</span>: T[];
  <span class="hljs-attr">columns</span>: <span class="hljs-title class_">TableColumn</span>&lt;T&gt;[];
  pagination?: <span class="hljs-title class_">PaginationConfig</span>;
  loading?: <span class="hljs-built_in">boolean</span>;
  rowKey?: keyof T | (<span class="hljs-function">(<span class="hljs-params">record: T</span>) =&gt;</span> <span class="hljs-built_in">string</span>);
}
</code></pre>
<h2 data-id="heading-6">ä¸‰ã€ä¸­é—´å±‚è®¾è®¡æ¨¡å¼ä¸å®è·µ</h2>
<h3 data-id="heading-7">1. ç»„åˆæ¨¡å¼ (Composition)</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// components/SearchTable/index.tsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">EnhancedTable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../EnhancedTable'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SearchBar</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../SearchBar'</span>;
<span class="hljs-keyword">import</span> { usePagination } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/usePagination'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">SearchTable</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">SearchTableProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">{
  searchFields,
  onSearch,
  ...tableProps
}</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { pagination, setPagination } = <span class="hljs-title function_">usePagination</span>();
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSearch</span> = (<span class="hljs-params">values: <span class="hljs-built_in">any</span></span>) =&gt; {
    onSearch?.(values);
    <span class="hljs-title function_">setPagination</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> ({ ...prev, <span class="hljs-attr">current</span>: <span class="hljs-number">1</span> }));
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"search-table"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">SearchBar</span> <span class="hljs-attr">fields</span>=<span class="hljs-string">{searchFields}</span> <span class="hljs-attr">onSearch</span>=<span class="hljs-string">{handleSearch}</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">EnhancedTable</span>
        {<span class="hljs-attr">...tableProps</span>}
        <span class="hljs-attr">pagination</span>=<span class="hljs-string">{{</span>
          <span class="hljs-attr">...pagination</span>,
          <span class="hljs-attr">onChange:</span> <span class="hljs-attr">setPagination</span>,
        }}
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-8">2. é«˜é˜¶ç»„ä»¶æ¨¡å¼ (HOC)</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// hooks/withErrorBoundary.tsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> withErrorBoundary&lt;P <span class="hljs-keyword">extends</span> <span class="hljs-built_in">object</span>&gt;(
  <span class="hljs-title class_">Component</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">ComponentType</span>&lt;P&gt;,
  fallback?: <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span>
) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ErrorBoundary</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span>&lt;P, { <span class="hljs-attr">hasError</span>: <span class="hljs-built_in">boolean</span> }&gt; {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props: P</span>) {
      <span class="hljs-variable language_">super</span>(props);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = { <span class="hljs-attr">hasError</span>: <span class="hljs-literal">false</span> };
    }

    <span class="hljs-keyword">static</span> <span class="hljs-title function_">getDerivedStateFromError</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">hasError</span>: <span class="hljs-literal">true</span> };
    }

    <span class="hljs-title function_">componentDidCatch</span>(<span class="hljs-params">error: <span class="hljs-built_in">Error</span>, errorInfo: React.ErrorInfo</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Component Error:'</span>, error, errorInfo);
    }

    <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">hasError</span>) {
        <span class="hljs-keyword">return</span> fallback || <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>ç»„ä»¶æ¸²æŸ“å¤±è´¥<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
      }

      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Component</span> {<span class="hljs-attr">...this.props</span>} /&gt;</span></span>;
    }
  };
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">EnhancedTableWithErrorBoundary</span> = <span class="hljs-title function_">withErrorBoundary</span>(<span class="hljs-title class_">EnhancedTable</span>);
</code></pre>
<h3 data-id="heading-9">3. è‡ªå®šä¹‰ Hook æ¨¡å¼</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// hooks/useTable.ts</span>
<span class="hljs-keyword">import</span> { useState, useCallback } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> useTable&lt;T&gt;(<span class="hljs-attr">initialData</span>: T[] = []) {
  <span class="hljs-keyword">const</span> [data, setData] = useState&lt;T[]&gt;(initialData);
  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [error, setError] = useState&lt;<span class="hljs-title class_">Error</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);

  <span class="hljs-keyword">const</span> refresh = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">fetchFunction</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;T[]&gt;) =&gt; {
    <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-title function_">setError</span>(<span class="hljs-literal">null</span>);
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchFunction</span>();
      <span class="hljs-title function_">setData</span>(result);
      <span class="hljs-keyword">return</span> result;
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-title function_">setError</span>(err <span class="hljs-keyword">as</span> <span class="hljs-title class_">Error</span>);
      <span class="hljs-keyword">throw</span> err;
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>);
    }
  }, []);

  <span class="hljs-keyword">return</span> {
    data,
    loading,
    error,
    setData,
    refresh,
  };
}
</code></pre>
<h2 data-id="heading-10">å››ã€å®é™…ä¸šåŠ¡åœºæ™¯åº”ç”¨</h2>
<h3 data-id="heading-11">åœºæ™¯ï¼šç”¨æˆ·ç®¡ç†ç³»ç»Ÿè¡¨æ ¼</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// features/user/components/UserTable.tsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SearchTable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/SearchTable'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SecureButton</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/SecureButton'</span>;
<span class="hljs-keyword">import</span> { useUserTable } <span class="hljs-keyword">from</span> <span class="hljs-string">'../hooks/useUserTable'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">UserTable</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> {
    data,
    loading,
    pagination,
    searchFields,
    handleSearch,
    handleDelete,
    handleEdit,
  } = <span class="hljs-title function_">useUserTable</span>();

  <span class="hljs-keyword">const</span> columns = [
    {
      <span class="hljs-attr">key</span>: <span class="hljs-string">'name'</span>,
      <span class="hljs-attr">title</span>: <span class="hljs-string">'å§“å'</span>,
      <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'name'</span>,
    },
    {
      <span class="hljs-attr">key</span>: <span class="hljs-string">'email'</span>,
      <span class="hljs-attr">title</span>: <span class="hljs-string">'é‚®ç®±'</span>,
      <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'email'</span>,
    },
    {
      <span class="hljs-attr">key</span>: <span class="hljs-string">'actions'</span>,
      <span class="hljs-attr">title</span>: <span class="hljs-string">'æ“ä½œ'</span>,
      <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">_, record</span>) =&gt;</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">SecureButton</span>
            <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span>
            <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> handleEdit(record)}
            permission="user:edit"
          &gt;
            ç¼–è¾‘
          <span class="hljs-tag">&lt;/<span class="hljs-name">SecureButton</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">SecureButton</span>
            <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span>
            <span class="hljs-attr">danger</span>
            <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> handleDelete(record.id)}
            permission="user:delete"
            confirm="ç¡®å®šåˆ é™¤è¯¥ç”¨æˆ·å—ï¼Ÿ"
            tracking={{ event: 'user_delete' }}
          &gt;
            åˆ é™¤
          <span class="hljs-tag">&lt;/<span class="hljs-name">SecureButton</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
      ),
    },
  ];

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">SearchTable</span>
      <span class="hljs-attr">columns</span>=<span class="hljs-string">{columns}</span>
      <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span>
      <span class="hljs-attr">loading</span>=<span class="hljs-string">{loading}</span>
      <span class="hljs-attr">pagination</span>=<span class="hljs-string">{pagination}</span>
      <span class="hljs-attr">searchFields</span>=<span class="hljs-string">{searchFields}</span>
      <span class="hljs-attr">onSearch</span>=<span class="hljs-string">{handleSearch}</span>
      <span class="hljs-attr">rowKey</span>=<span class="hljs-string">"id"</span>
    /&gt;</span></span>
  );
};
</code></pre>
<h2 data-id="heading-12">äº”ã€æ¶æ„æ”¶ç›Šä¸é•¿æœŸä»·å€¼</h2>
<h3 data-id="heading-13">å¯åº¦é‡çš„æŠ€æœ¯æ”¶ç›Š</h3>
<ul>
<li>
<p><strong>å¼€å‘æ•ˆç‡</strong>ï¼šç»„ä»¶å¤ç”¨ç‡æå‡ 40-60%</p>
</li>
<li>
<p><strong>ç»´æŠ¤æˆæœ¬</strong>ï¼šUIåº“å‡çº§å·¥ä½œé‡å‡å°‘ 70-80%</p>
</li>
<li>
<p><strong>ä»£ç è´¨é‡</strong>ï¼šç±»å‹è¦†ç›–ç‡æå‡è‡³ 90%+</p>
</li>
<li>
<p><strong>å›¢é˜Ÿåä½œ</strong>ï¼šæ–°æˆå‘˜ä¸Šæ‰‹æ—¶é—´ç¼©çŸ­ 50%</p>
</li>
</ul>
<h3 data-id="heading-14">æˆ˜ç•¥ä»·å€¼</h3>
<ol>
<li>
<p><strong>æŠ€æœ¯å€ºåŠ¡æ§åˆ¶</strong>ï¼šé€šè¿‡ä¸­é—´å±‚éš”ç¦»å˜åŒ–ï¼Œæœ‰æ•ˆæ§åˆ¶æŠ€æœ¯å€ºåŠ¡ç§¯ç´¯</p>
</li>
<li>
<p><strong>æ¸è¿›å¼é‡æ„</strong>ï¼šæ”¯æŒè€ç³»ç»Ÿæ¸è¿›å¼è¿ç§»å’Œé‡æ„</p>
</li>
<li>
<p><strong>å¤šç«¯é€‚é…</strong>ï¼šä¸ºå°ç¨‹åºã€ç§»åŠ¨ç«¯ç­‰ä¸åŒå¹³å°æä¾›ç»Ÿä¸€API</p>
</li>
<li>
<p><strong>A/Bæµ‹è¯•</strong>ï¼šåœ¨ä¸­é—´å±‚å®ç°æ— ä¾µå…¥çš„åŠŸèƒ½å¼€å…³å’Œå®éªŒé…ç½®</p>
</li>
</ol>
<h2 data-id="heading-15">å…­ã€æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-16">å®æ–½å»ºè®®</h3>
<ol>
<li>
<p><strong>æ¸è¿›å¼æ¨è¿›</strong>ï¼šä»æœ€å¸¸ç”¨çš„ç»„ä»¶å¼€å§‹å°è£…ï¼Œé€æ­¥è¦†ç›–</p>
</li>
<li>
<p><strong>æ–‡æ¡£é©±åŠ¨</strong>ï¼šä¸ºæ¯ä¸ªä¸­é—´å±‚ç»„ä»¶æä¾›å®Œæ•´çš„ä½¿ç”¨æ–‡æ¡£å’Œç¤ºä¾‹</p>
</li>
<li>
<p><strong>ç‰ˆæœ¬ç®¡ç†</strong>ï¼šå»ºç«‹ä¸­é—´å±‚ç»„ä»¶çš„ç‰ˆæœ¬å‘å¸ƒå’Œæ›´æ–°æœºåˆ¶</p>
</li>
<li>
<p><strong>æ€§èƒ½ç›‘æ§</strong>ï¼šç›‘æ§ä¸­é—´å±‚ç»„ä»¶çš„æ€§èƒ½å½±å“å’Œé”™è¯¯ç‡</p>
</li>
</ol>
<h3 data-id="heading-17">é¿å…çš„é™·é˜±</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ è¿‡åº¦å°è£… - å¢åŠ äº†ä¸å¿…è¦çš„å¤æ‚åº¦</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">SuperButton</span> = (<span class="hljs-params">{ 
  ultraProp, 
  megaConfig, 
  ...rest 
}</span>) =&gt; {
  <span class="hljs-comment">// è¿‡äºå¤æ‚çš„é€»è¾‘...</span>
};

<span class="hljs-comment">// âœ… é€‚åº¦å°è£… - ä¿æŒç®€å•æ¸…æ™°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">PrimaryButton</span> = (<span class="hljs-params">{ 
  confirm, 
  tracking, 
  ...buttonProps 
}</span>) =&gt; {
  <span class="hljs-comment">// èšç„¦æ ¸å¿ƒå¢å¼ºåŠŸèƒ½...</span>
};
</code></pre>
<h2 data-id="heading-18">æ€»ç»“</h2>
<p>å‰ç«¯ç»„ä»¶ä¸­é—´å±‚è®¾è®¡ä¸ä»…æ˜¯æŠ€æœ¯å®ç°ï¼Œæ›´æ˜¯æ¶æ„æ€ç»´çš„ä½“ç°ã€‚å®ƒé€šè¿‡åˆç†çš„æŠ½è±¡å’Œå°è£…ï¼Œåœ¨ä¿è¯å¼€å‘ä½“éªŒçš„åŒæ—¶ï¼Œä¸ºåº”ç”¨é•¿æœŸæ¼”è¿›æä¾›äº†åšå®çš„æŠ€æœ¯åŸºç¡€ã€‚æˆåŠŸçš„ä¸­é—´å±‚è®¾è®¡åº”è¯¥åƒä¸€åº§ç²¾å¿ƒè®¾è®¡çš„æ¡¥æ¢ï¼Œæ—¢è¿æ¥ç°åœ¨ä¸æœªæ¥ï¼Œåˆæ‰¿è½½ç€å›¢é˜Ÿåä½œå’Œä¸šåŠ¡å‘å±•çš„é‡ä»»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰“ç ´è¯¯è§£ï¼MongoDB äº‹åŠ¡éš”ç¦»çº§åˆ«æ·±åº¦å®æµ‹ï¼šå¿«ç…§éš”ç¦»ç«Ÿèƒ½é˜²ä½ 8 ç§å¼‚å¸¸ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7570598043297480767</link>    <guid>https://juejin.cn/post/7570598043297480767</guid>    <pubDate>2025-11-10T06:18:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570598043297480767" data-draft-id="7570534000717496383" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰“ç ´è¯¯è§£ï¼MongoDB äº‹åŠ¡éš”ç¦»çº§åˆ«æ·±åº¦å®æµ‹ï¼šå¿«ç…§éš”ç¦»ç«Ÿèƒ½é˜²ä½ 8 ç§å¼‚å¸¸ï¼Ÿ"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-11-10T06:18:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‘¡è„åŸæŠ€æœ¯å›¢é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3227821868332765"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰“ç ´è¯¯è§£ï¼MongoDB äº‹åŠ¡éš”ç¦»çº§åˆ«æ·±åº¦å®æµ‹ï¼šå¿«ç…§éš”ç¦»ç«Ÿèƒ½é˜²ä½ 8 ç§å¼‚å¸¸ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3227821868332765/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‘¡è„åŸæŠ€æœ¯å›¢é˜Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:18:33.000Z" title="Mon Nov 10 2025 06:18:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ‰“ç ´è¯¯è§£ï¼MongoDB äº‹åŠ¡éš”ç¦»çº§åˆ«æ·±åº¦å®æµ‹ï¼šå¿«ç…§éš”ç¦»ç«Ÿèƒ½é˜²ä½ 8 ç§å¼‚å¸¸ï¼Ÿ</h2>
<p>ä½œä¸º NoSQL æ•°æ®åº“çš„ä»£è¡¨ï¼ŒMongoDB çš„äº‹åŠ¡èƒ½åŠ›ä¸€ç›´è¢«éƒ¨åˆ†å¼€å‘è€…â€œä½ä¼°â€â€”â€”ä¸å°‘äººè¿˜æŠ±ç€â€œè€ç‰ˆæœ¬æœ‰å‘â€â€œNoSQL äº‹åŠ¡ä¸é è°±â€çš„å›ºæœ‰å°è±¡ã€‚ä½†å®é™…ä¸Šï¼Œè‡ª 4.0 ç‰ˆæœ¬æ”¯æŒå¤šæ–‡æ¡£äº‹åŠ¡åï¼ŒMongoDB å·²å®ç° ACID å…¼å®¹ï¼Œå…¶åŸºäºå¿«ç…§éš”ç¦»ï¼ˆSnapshot Isolationï¼‰çš„è®¾è®¡ï¼Œä¸ä»…èƒ½åª²ç¾ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“çš„ä¸€è‡´æ€§ï¼Œè¿˜é€šè¿‡ç‹¬ç‰¹çš„å†²çªå¤„ç†æœºåˆ¶å…¼é¡¾äº†æ€§èƒ½ã€‚æœ¬æ–‡ç»“åˆå®Œæ•´å®æµ‹ä»£ç å’Œæ¡ˆä¾‹ï¼Œå¸¦å¤§å®¶å½»åº•ææ‡‚ MongoDB çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œç†æ¸…é‚£äº›æµä¼ å·²ä¹…çš„è¯¯è§£ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€æ ¸å¿ƒç»“è®ºï¼šMongoDB äº‹åŠ¡éš”ç¦»çº§åˆ«çš„æœ¬è´¨</h3>
<p>MongoDB çš„å¤šæ–‡æ¡£äº‹åŠ¡é‡‡ç”¨<strong>å¿«ç…§éš”ç¦»ï¼ˆSnapshot Isolationï¼‰</strong> æœºåˆ¶ï¼Œä¾æ‰˜å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰å®ç°å¼ºä¸€è‡´æ€§ï¼Œå®Œå…¨æ»¡è¶³ ACID ç‰¹æ€§ã€‚</p>
<p>å¾ˆå¤šå¼€å‘è€…ä¼šä¸‹æ„è¯†å°†å…¶ä¸ SQL æ ‡å‡†çš„éš”ç¦»çº§åˆ«å¯¹æ ‡ï¼Œä½†è¿™ç§åšæ³•å¹¶ä¸æ°å½“â€”â€”SQL æ ‡å‡†çš„éš”ç¦»çº§åˆ«å®šä¹‰å¹¶æœªè€ƒè™‘ MVCCï¼Œè€Œ MongoDBã€PostgreSQL ç­‰ä¸»æµæ•°æ®åº“å‡ä¾èµ– MVCC å®ç°å¹¶å‘æ§åˆ¶ã€‚ç®€å•æ¥è¯´ï¼š</p>
<ul>
<li>MongoDB çš„äº‹åŠ¡éš”ç¦»èƒ½åŠ›ä¸é€Šè‰²äºä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“ï¼›</li>
<li>æ—©æœŸç‰ˆæœ¬ï¼ˆå¦‚ 4.0 åˆšæ”¯æŒå¤šæ–‡æ¡£äº‹åŠ¡æ—¶ï¼‰çš„éƒ¨åˆ†é—®é¢˜å·²å®Œå…¨ä¿®å¤ï¼Œåƒæ—©æœŸ Jepsen æŠ¥å‘Šä¸­æåˆ°çš„å¼‚å¸¸åœºæ™¯å·²ä¸å¤å­˜åœ¨ï¼›</li>
<li>å…¶éš”ç¦»çº§åˆ«é€šè¿‡<code>readConcern</code>ï¼ˆè¯»å…³æ³¨çº§åˆ«ï¼‰æ§åˆ¶ï¼Œä¸åŒçº§åˆ«å¯¹åº”ä¸åŒçš„ä¸€è‡´æ€§ä¿éšœå’Œä½¿ç”¨åœºæ™¯ã€‚</li>
</ul>
<h3 data-id="heading-2">äºŒã€å„è¯»å…³æ³¨çº§åˆ«çš„ç‰¹ç‚¹ï¼ˆä¸ SQL éš”ç¦»çº§åˆ«çš„åŒºåˆ«ï¼‰</h3>
<p>MongoDB çš„äº‹åŠ¡éš”ç¦»æ ¸å¿ƒç”±<code>readConcern</code>å‚æ•°æ§åˆ¶ï¼Œä¸åŒçº§åˆ«å¯¹åº”ä¸åŒçš„ä¸€è‡´æ€§è¡¨ç°ï¼Œä¸”æ— æ³•ç›´æ¥ç­‰åŒäº SQL æ ‡å‡†çš„éš”ç¦»çº§åˆ«ï¼Œå…·ä½“ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p>
<h4 data-id="heading-3">1. local çº§åˆ«</h4>
<ul>
<li>å¯èƒ½è¯»å–åˆ°æœªæäº¤çš„ä¸­é—´çŠ¶æ€ï¼ˆè¿™äº›çŠ¶æ€åç»­å¯èƒ½å› äº‹åŠ¡å›æ»šè€Œå¤±æ•ˆï¼‰ï¼Œå› æ­¤æœ‰æ—¶è¢«ç±»æ¯”ä¸º SQL çš„â€œè¯»æœªæäº¤â€ï¼›</li>
<li>ä½†éœ€æ³¨æ„ï¼šéƒ¨åˆ† SQL æ•°æ®åº“åœ¨æç«¯æƒ…å†µä¸‹ä¹Ÿä¼šå‡ºç°ç±»ä¼¼è¡Œä¸ºï¼Œå´ä»å°†å…¶å½’ä¸ºâ€œè¯»å·²æäº¤â€çº§åˆ«ï¼Œå¯è§ç›´æ¥å¯¹æ ‡å¹¶ä¸ä¸¥è°¨ã€‚</li>
</ul>
<h4 data-id="heading-4">2. majority çº§åˆ«</h4>
<ul>
<li>ä»…è¯»å–å·²è¢«å¤§å¤šæ•°èŠ‚ç‚¹ç¡®è®¤æäº¤çš„æ•°æ®ï¼Œé¿å…äº†â€œè¯»æœªæäº¤â€é—®é¢˜ï¼Œå¸¸è¢«ç±»æ¯”ä¸º SQL çš„â€œè¯»å·²æäº¤â€ï¼›</li>
<li>å…³é”®åŒºåˆ«ï¼šSQL çš„â€œè¯»å·²æäº¤â€æ˜¯ä¸ºäº†å‡å°‘ä¸¤é˜¶æ®µé”çš„é”å®šæ—¶é•¿ï¼Œé‡‡ç”¨â€œå†²çªç­‰å¾…â€æœºåˆ¶ï¼›è€Œ MongoDB å¤šæ–‡æ¡£äº‹åŠ¡é‡‡ç”¨â€œå†²çªå³å¤±è´¥â€ï¼ˆfail-on-conflictï¼‰æœºåˆ¶ï¼Œé¿å…é•¿æ—¶é—´ç­‰å¾…ï¼›</li>
<li>å±€é™ï¼šåœ¨å¤šåˆ†ç‰‡åœºæ™¯ä¸‹ï¼Œå¯èƒ½è¯»å–åˆ°å¤šä¸ªä¸åŒæ—¶é—´ç‚¹çš„çŠ¶æ€ï¼Œæ— æ³•ä¿è¯è·¨åˆ†ç‰‡çš„æ—¶é—´çº¿ä¸€è‡´æ€§ã€‚</li>
</ul>
<h4 data-id="heading-5">3. snapshot çº§åˆ«</h4>
<ul>
<li>çœŸæ­£ç­‰åŒäºâ€œå¿«ç…§éš”ç¦»â€ï¼Œèƒ½æä¾›è·¨åˆ†ç‰‡çš„æ—¶é—´çº¿ä¸€è‡´æ€§ï¼Œé˜²æ­¢çš„å¼‚å¸¸åœºæ™¯æ¯”â€œè¯»å·²æäº¤â€æ›´å¤šï¼›</li>
<li>æœ‰è¶£çš„æ˜¯ï¼šéƒ¨åˆ†æ•°æ®åº“ä¼šå°†å…¶ç§°ä¸ºâ€œå¯ä¸²è¡ŒåŒ–â€ï¼Œå› ä¸º SQL æ ‡å‡†å¹¶æœªè€ƒè™‘â€œå†™å€¾æ–œâ€ï¼ˆwrite skewï¼‰å¼‚å¸¸ï¼Œè€Œå¿«ç…§éš”ç¦»æœ¬èº«å¯è§„é¿éƒ¨åˆ†æ­¤ç±»åœºæ™¯ã€‚</li>
</ul>
<h4 data-id="heading-6">4. linearizable çº§åˆ«</h4>
<ul>
<li>ä»…é€‚ç”¨äºå•æ–‡æ¡£æ“ä½œï¼Œæ— æ³•ç”¨äºå¤šæ–‡æ¡£äº‹åŠ¡ï¼Œå¯ç±»æ¯”ä¸º SQL çš„â€œå¯ä¸²è¡ŒåŒ–â€ï¼›</li>
<li>ç‰¹ç‚¹ï¼šèƒ½ä¿è¯å•æ–‡æ¡£æ“ä½œçš„çº¿æ€§ä¸€è‡´æ€§ï¼Œä½†ä¼šé‡æ–°å¼•å…¥è¯»é”å¸¦æ¥çš„æ‰©å±•æ€§é—®é¢˜ï¼Œè¿™ä¹Ÿæ˜¯å¤šæ•°æ•°æ®åº“ä¸é»˜è®¤æä¾›å¯ä¸²è¡ŒåŒ–çº§åˆ«çš„åŸå› â€”â€”MVCC çš„æ ¸å¿ƒä¼˜åŠ¿å°±æ˜¯é¿å…è¯»é”ã€‚</li>
</ul>
<h3 data-id="heading-7">ä¸‰ã€å®æµ‹éªŒè¯ï¼šMongoDB å¦‚ä½•é˜²æ­¢äº‹åŠ¡å¼‚å¸¸ï¼Ÿ</h3>
<p>ä¸ºäº†éªŒè¯ MongoDB äº‹åŠ¡çš„éš”ç¦»èƒ½åŠ›ï¼Œæµ‹è¯•è€…éµå¾ª Martin Kleppmann çš„æµ‹è¯•æ¡†æ¶ï¼ˆåŸæœ¬ç”¨äº PostgreSQLï¼‰ï¼Œé’ˆå¯¹å¤šæ–‡æ¡£äº‹åŠ¡åœºæ™¯è¿›è¡Œäº†ä¸€ç³»åˆ—å®æµ‹ã€‚æ‰€æœ‰æµ‹è¯•å‡é‡‡ç”¨<code>readConcern: majority</code>å’Œ<code>writeConcern: majority</code>é…ç½®ï¼ˆå•èŠ‚ç‚¹ç¯å¢ƒï¼‰ï¼Œéƒ¨åˆ†è·¨åˆ†ç‰‡åœºæ™¯éœ€ä½¿ç”¨<code>snapshot</code>çº§åˆ«ï¼Œä»¥ä¸‹æ˜¯å¸¦å®Œæ•´ä»£ç çš„å…³é”®æµ‹è¯•ç»“æœï¼š</p>
<h4 data-id="heading-8">æµ‹è¯•å‰æ</h4>
<p>æ‰€æœ‰æµ‹è¯•å‡åˆå§‹åŒ–åŸºç¡€æ•°æ®ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®</span>
use test_db;
db.<span class="hljs-property">test</span>.<span class="hljs-title function_">drop</span>();
db.<span class="hljs-property">test</span>.<span class="hljs-title function_">insertMany</span>([
  { <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">10</span> },
  { <span class="hljs-attr">_id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">20</span> }
]);
</code></pre>
<p>äº‹åŠ¡å‡é€šè¿‡<code>startSession()</code>å¼€å¯ï¼Œæ˜ç¡®æŒ‡å®šè¯»/å†™å…³æ³¨çº§åˆ«ã€‚</p>
<h4 data-id="heading-9">1. é˜²æ­¢å†™å¾ªç¯ï¼ˆG0ï¼‰ï¼šå†²çªå³å¤±è´¥ï¼Œæ‹’ç»æ— é™ç­‰å¾…</h4>
<ul>
<li>æµ‹è¯•åœºæ™¯ï¼šä¸¤ä¸ªäº‹åŠ¡åŒæ—¶æ›´æ–°åŒä¸€æ–‡æ¡£ï¼›</li>
<li>ä¼ ç»Ÿä¸¤é˜¶æ®µé”æ•°æ®åº“ï¼šç¬¬äºŒä¸ªäº‹åŠ¡ä¼šç­‰å¾…ç¬¬ä¸€ä¸ªäº‹åŠ¡å®Œæˆï¼Œé¿å…å†²çªï¼›</li>
<li>MongoDB æµ‹è¯•ä»£ç ï¼š</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼ˆåŒä¸Šï¼Œç•¥ï¼‰</span>

<span class="hljs-comment">// äº‹åŠ¡T1</span>
<span class="hljs-keyword">const</span> session1 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T1</span> = session1.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session1.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T2</span>
<span class="hljs-keyword">const</span> session2 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T2</span> = session2.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session2.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// ä¸¤ä¸ªäº‹åŠ¡åŒæ—¶æ›´æ–°åŒä¸€æ–‡æ¡£</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">11</span> } });
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">12</span> } });

<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼šæŠ›å‡ºå†™å†²çªé”™è¯¯</span>
<span class="hljs-comment">// MongoServerError[WriteConflict]: Caused by :: Write conflict during plan execution and yielding is disabled. :: Please retry your operation or multi-document transaction.</span>
</code></pre>
<ul>
<li>å…³é”®å·®å¼‚ï¼šéšå¼å•æ–‡æ¡£äº‹åŠ¡ï¼ˆè‡ªåŠ¨æäº¤ï¼‰é‡‡ç”¨â€œå†²çªç­‰å¾…â€æœºåˆ¶ï¼Œæµ‹è¯•ä¸­ç­‰å¾… 60 ç§’è¶…æ—¶åæ‰§è¡ŒæˆåŠŸï¼š</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> db = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">getDB</span>(<span class="hljs-string">"test_db"</span>);
<span class="hljs-title function_">print</span>(<span class="hljs-string">`Elapsed time: <span class="hljs-subst">${
  ((startTime = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>())
  &amp;amp;&amp;amp; db.test.updateOne({ _id: <span class="hljs-number">1</span> }, { $set: { value: <span class="hljs-number">12</span> } }))
  &amp;amp;&amp;amp; (<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>() - startTime)
}</span> ms`</span>);

<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼šElapsed time: 72548 msï¼ˆç­‰å¾…çº¦60ç§’è¶…æ—¶åæˆåŠŸï¼‰</span>
<span class="hljs-comment">// æ­¤æ—¶T1äº‹åŠ¡å› è¶…æ—¶è¢«ä¸­æ­¢ï¼Œæäº¤æ—¶ä¼šæŠ¥é”™ï¼š</span>
<span class="hljs-comment">// session1.commitTransaction();</span>
<span class="hljs-comment">// MongoServerError[NoSuchTransaction]: Transaction with { txnNumber: 2 } has been aborted.</span>
</code></pre>
<ul>
<li>ç»“è®ºï¼šæ˜¾å¼å¤šæ–‡æ¡£äº‹åŠ¡é‡‡ç”¨â€œå†²çªå³å¤±è´¥â€ï¼Œè®©åº”ç”¨è‡ªè¡Œå¤„ç†é‡è¯•é€»è¾‘ï¼Œå…¼é¡¾å¤æ‚äº‹åŠ¡çš„çµæ´»æ€§ã€‚</li>
</ul>
<h4 data-id="heading-10">2. é˜²æ­¢æœªæäº¤è¯»ï¼ˆG1aï¼‰ï¼šåªè®¤å·²æäº¤æ•°æ®</h4>
<ul>
<li>æµ‹è¯•åœºæ™¯ï¼šäº‹åŠ¡ T1 æ›´æ–°æ–‡æ¡£åæœªæäº¤ï¼Œäº‹åŠ¡ T2 è¯»å–è¯¥æ–‡æ¡£ï¼›</li>
<li>MongoDB æµ‹è¯•ä»£ç ï¼š</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼ˆåŒä¸Šï¼Œç•¥ï¼‰</span>

<span class="hljs-comment">// äº‹åŠ¡T1</span>
<span class="hljs-keyword">const</span> session1 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T1</span> = session1.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session1.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T2</span>
<span class="hljs-keyword">const</span> session2 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T2</span> = session2.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session2.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// T1æ›´æ–°æ–‡æ¡£ä½†æœªæäº¤</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">101</span> } });

<span class="hljs-comment">// T2è¯»å–æ–‡æ¡£ï¼Œä»…èƒ½çœ‹åˆ°å·²æäº¤æ•°æ®</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>(); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 1, value: 10 }, { _id: 2, value: 20 } ]</span>

<span class="hljs-comment">// T1å›æ»šäº‹åŠ¡</span>
session1.<span class="hljs-title function_">abortTransaction</span>();

<span class="hljs-comment">// T2å†æ¬¡è¯»å–ï¼Œç»“æœä¸å˜</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>(); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 1, value: 10 }, { _id: 2, value: 20 } ]</span>

session2.<span class="hljs-title function_">commitTransaction</span>();
</code></pre>
<ul>
<li>ç»“è®ºï¼š<code>majority</code>æˆ–<code>snapshot</code>çº§åˆ«å‡èƒ½æœç»â€œè¯»å–æœªæäº¤æ•°æ®â€çš„å¼‚å¸¸ã€‚</li>
</ul>
<h4 data-id="heading-11">3. é˜²æ­¢ä¸­é—´è¯»ï¼ˆG1bï¼‰ï¼šäº‹åŠ¡å†…è¯»æ—¶é—´çº¿å›ºå®š</h4>
<ul>
<li>æµ‹è¯•åœºæ™¯ï¼šT1 æ›´æ–°æ–‡æ¡£å¹¶æäº¤ï¼ŒT2 åœ¨ T1 æäº¤å‰å·²å¯åŠ¨ï¼Œåç»­å†æ¬¡è¯»å–è¯¥æ–‡æ¡£ï¼›</li>
<li>MongoDB æµ‹è¯•ä»£ç ï¼š</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼ˆåŒä¸Šï¼Œç•¥ï¼‰</span>

<span class="hljs-comment">// äº‹åŠ¡T1</span>
<span class="hljs-keyword">const</span> session1 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T1</span> = session1.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session1.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T2</span>
<span class="hljs-keyword">const</span> session2 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T2</span> = session2.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session2.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// T1æ›´æ–°æ–‡æ¡£ï¼ˆæœªæäº¤ï¼‰</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">101</span> } });

<span class="hljs-comment">// T2è¯»å–ï¼Œçœ‹ä¸åˆ°æœªæäº¤å˜æ›´</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>(); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 1, value: 10 }, { _id: 2, value: 20 } ]</span>

<span class="hljs-comment">// T1ä¿®æ”¹å¹¶æäº¤</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">11</span> } });
session1.<span class="hljs-title function_">commitTransaction</span>();

<span class="hljs-comment">// T2å†æ¬¡è¯»å–ï¼Œä»çœ‹ä¸åˆ°T1æäº¤çš„æ–°å€¼</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>(); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 1, value: 10 }, { _id: 2, value: 20 } ]</span>

session2.<span class="hljs-title function_">commitTransaction</span>();
</code></pre>
<ul>
<li>åŒºåˆ«äº SQLï¼šå¤šæ•° MVCC æ¶æ„çš„ SQL æ•°æ®åº“åœ¨â€œè¯»å·²æäº¤â€çº§åˆ«ä¸‹ï¼Œä¼šåœ¨æ¯ä¸ªè¯­å¥æ‰§è¡Œå‰é‡ç½®è¯»æ—¶é—´çº¿ï¼Œå› æ­¤èƒ½çœ‹åˆ°åç»­æäº¤çš„æ–°å€¼ï¼Œè€Œ MongoDB äº‹åŠ¡çš„è¯»æ—¶é—´çº¿å›ºå®šåœ¨äº‹åŠ¡å¯åŠ¨æ—¶ï¼Œä»æ ¹æºé¿å…äº†â€œä¸­é—´è¯»â€ã€‚</li>
</ul>
<h4 data-id="heading-12">4. é˜²æ­¢å¾ªç¯ä¿¡æ¯æµè½¬ï¼ˆG1cï¼‰ï¼šæœªæäº¤å˜æ›´äº’ä¸å¯è§</h4>
<ul>
<li>æµ‹è¯•åœºæ™¯ï¼šT1 æ›´æ–°æ–‡æ¡£ 1ï¼ŒT2 æ›´æ–°æ–‡æ¡£ 2ï¼Œä¸¤è€…äº’ç›¸è¯»å–å¯¹æ–¹æ›´æ–°çš„æ–‡æ¡£ï¼›</li>
<li>MongoDB æµ‹è¯•ä»£ç ï¼š</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼ˆåŒä¸Šï¼Œç•¥ï¼‰</span>

<span class="hljs-comment">// äº‹åŠ¡T1</span>
<span class="hljs-keyword">const</span> session1 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T1</span> = session1.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session1.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T2</span>
<span class="hljs-keyword">const</span> session2 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T2</span> = session2.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session2.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// T1æ›´æ–°æ–‡æ¡£1ï¼ŒT2æ›´æ–°æ–‡æ¡£2</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">11</span> } });
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">2</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">22</span> } });

<span class="hljs-comment">// T1è¯»å–æ–‡æ¡£2ï¼Œçœ‹ä¸åˆ°T2çš„æœªæäº¤æ›´æ–°</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">2</span> }); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 2, value: 20 } ]</span>

<span class="hljs-comment">// T2è¯»å–æ–‡æ¡£1ï¼Œçœ‹ä¸åˆ°T1çš„æœªæäº¤æ›´æ–°</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 1, value: 10 } ]</span>

<span class="hljs-comment">// æäº¤ä¸¤ä¸ªäº‹åŠ¡</span>
session1.<span class="hljs-title function_">commitTransaction</span>();
session2.<span class="hljs-title function_">commitTransaction</span>();
</code></pre>
<h4 data-id="heading-13">5. é˜²æ­¢äº‹åŠ¡æ¶ˆå¤±ï¼ˆOTVï¼‰ï¼šå¤šäº‹åŠ¡å†²çªå¿«é€Ÿå¤±è´¥</h4>
<ul>
<li>æµ‹è¯•åœºæ™¯ï¼šä¸‰ä¸ªäº‹åŠ¡åŒæ—¶æ“ä½œåŒä¸€æ‰¹æ–‡æ¡£ï¼Œå­˜åœ¨äº¤å‰æ›´æ–°ï¼›</li>
<li>MongoDB æµ‹è¯•ä»£ç ï¼š</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼ˆåŒä¸Šï¼Œç•¥ï¼‰</span>

<span class="hljs-comment">// äº‹åŠ¡T1</span>
<span class="hljs-keyword">const</span> session1 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T1</span> = session1.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session1.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T2</span>
<span class="hljs-keyword">const</span> session2 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T2</span> = session2.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session2.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T3</span>
<span class="hljs-keyword">const</span> session3 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T3</span> = session3.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session3.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// T1æ›´æ–°ä¸¤ä¸ªæ–‡æ¡£</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">11</span> } });
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">2</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">19</span> } });

<span class="hljs-comment">// T2æ›´æ–°æ–‡æ¡£1ï¼Œè§¦å‘å†²çª</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">12</span> } });

<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼šæŠ›å‡ºå†™å†²çªé”™è¯¯</span>
<span class="hljs-comment">// MongoServerError[WriteConflict]: Caused by :: Write conflict during plan execution and yielding is disabled. :: Please retry your operation or multi-document transaction.</span>
</code></pre>
<ul>
<li>ä¼˜åŠ¿ï¼šç›¸æ¯”ä¼ ç»Ÿæ•°æ®åº“çš„â€œç­‰å¾…-è¶…æ—¶â€æœºåˆ¶ï¼ŒMongoDB çš„â€œå†²çªå³å¤±è´¥â€èƒ½è®©åº”ç”¨æ›´å¿«æ„ŸçŸ¥å¹¶å¤„ç†å†²çªï¼Œæå‡æ•´ä½“ååé‡ã€‚</li>
</ul>
<h4 data-id="heading-14">6. é˜²æ­¢å¤šå‰é©±è°“è¯å¼‚å¸¸ï¼ˆPMPï¼‰ï¼šå¿«ç…§ä¸€è‡´æ€§è¦†ç›–æŸ¥è¯¢åœºæ™¯</h4>
<ul>
<li>æµ‹è¯•åœºæ™¯ 1ï¼šT1 å¯åŠ¨åæ‰§è¡ŒæŸ¥è¯¢ï¼ˆæ— åŒ¹é…ç»“æœï¼‰ï¼ŒT2 æ’å…¥åŒ¹é…è¯¥æŸ¥è¯¢æ¡ä»¶çš„æ–‡æ¡£å¹¶æäº¤ï¼ŒT1 å†æ¬¡æ‰§è¡Œç›¸åŒæŸ¥è¯¢ï¼›</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼ˆåŒä¸Šï¼Œç•¥ï¼‰</span>

<span class="hljs-comment">// äº‹åŠ¡T1</span>
<span class="hljs-keyword">const</span> session1 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T1</span> = session1.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session1.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T2</span>
<span class="hljs-keyword">const</span> session2 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T2</span> = session2.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session2.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// T1æŸ¥è¯¢value=30çš„æ–‡æ¡£ï¼Œæ— ç»“æœ</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">value</span>: <span class="hljs-number">30</span> }).<span class="hljs-title function_">toArray</span>(); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[]</span>

<span class="hljs-comment">// T2æ’å…¥åŒ¹é…æ¡ä»¶çš„æ–‡æ¡£å¹¶æäº¤</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">insertOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">30</span> });
session2.<span class="hljs-title function_">commitTransaction</span>();

<span class="hljs-comment">// T1å†æ¬¡æŸ¥è¯¢ï¼Œä»æ— ç»“æœ</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">value</span>: { <span class="hljs-attr">$mod</span>: [<span class="hljs-number">3</span>, <span class="hljs-number">0</span>] } }).<span class="hljs-title function_">toArray</span>(); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[]</span>

session1.<span class="hljs-title function_">commitTransaction</span>();
</code></pre>
<ul>
<li>æµ‹è¯•åœºæ™¯ 2ï¼šT1 æ‰¹é‡æ›´æ–°æ–‡æ¡£ï¼ŒT2 æ‰¹é‡åˆ é™¤åŒ¹é…æ–‡æ¡£ï¼Œè§¦å‘å†²çªï¼›</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼ˆåŒä¸Šï¼Œç•¥ï¼‰</span>

<span class="hljs-comment">// äº‹åŠ¡T1</span>
<span class="hljs-keyword">const</span> session1 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T1</span> = session1.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session1.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T2</span>
<span class="hljs-keyword">const</span> session2 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T2</span> = session2.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session2.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// T1æ‰¹é‡æ›´æ–°æ‰€æœ‰æ–‡æ¡£</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateMany</span>({}, { <span class="hljs-attr">$inc</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">10</span> } });

<span class="hljs-comment">// T2åˆ é™¤value=20çš„æ–‡æ¡£ï¼Œè§¦å‘å†²çª</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">deleteMany</span>({ <span class="hljs-attr">value</span>: <span class="hljs-number">20</span> });

<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼šæŠ›å‡ºå†™å†²çªé”™è¯¯</span>
<span class="hljs-comment">// MongoServerError[WriteConflict]: Caused by :: Write conflict during plan execution and yielding is disabled. :: Please retry your operation or multi-document transaction.</span>
</code></pre>
<ul>
<li>ç»“è®ºï¼šMongoDB é€šè¿‡å¿«ç…§éš”ç¦»å’Œå†²çªæ£€æµ‹ï¼Œé¿å…äº†åŸºäºè¿‡æ—¶æŸ¥è¯¢ç»“æœæ‰§è¡Œå†™æ“ä½œçš„å¼‚å¸¸ã€‚</li>
</ul>
<h4 data-id="heading-15">7. é˜²æ­¢ä¸¢å¤±æ›´æ–°ï¼ˆP4ï¼‰ï¼šæ‹’ç»å¹¶è¡Œæ›´æ–°è¦†ç›–</h4>
<ul>
<li>æµ‹è¯•åœºæ™¯ï¼šä¸¤ä¸ªäº‹åŠ¡åŒæ—¶è¯»å–åŒä¸€æ–‡æ¡£ï¼ŒåŸºäºç›¸åŒçš„æ—§å€¼æ‰§è¡Œæ›´æ–°ï¼›</li>
<li>MongoDB æµ‹è¯•ä»£ç ï¼š</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼ˆåŒä¸Šï¼Œç•¥ï¼‰</span>

<span class="hljs-comment">// äº‹åŠ¡T1</span>
<span class="hljs-keyword">const</span> session1 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T1</span> = session1.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session1.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T2</span>
<span class="hljs-keyword">const</span> session2 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T2</span> = session2.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session2.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// ä¸¤ä¸ªäº‹åŠ¡å‡è¯»å–æ–‡æ¡£1çš„æ—§å€¼</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 1, value: 10 } ]</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 1, value: 10 } ]</span>

<span class="hljs-comment">// ä¸¤ä¸ªäº‹åŠ¡åŸºäºæ—§å€¼æ‰§è¡Œæ›´æ–°ï¼Œåæ‰§è¡Œçš„è§¦å‘å†²çª</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">11</span> } });
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">11</span> } });

<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼šæŠ›å‡ºå†™å†²çªé”™è¯¯</span>
<span class="hljs-comment">// MongoServerError[WriteConflict]: Caused by :: Write conflict during plan execution and yielding is disabled. :: Please retry your operation or multi-document transaction.</span>
</code></pre>
<ul>
<li>å…³é”®ï¼šåº”ç”¨åªéœ€æ•è·è¯¥é”™è¯¯å¹¶é‡è¯•ï¼Œå³å¯ä¿è¯æ›´æ–°çš„åŸå­æ€§ã€‚</li>
</ul>
<h4 data-id="heading-16">8. é˜²æ­¢è¯»å€¾æ–œï¼ˆG-singleï¼‰ï¼šäº‹åŠ¡å†…æ•°æ®ä¸€è‡´æ€§</h4>
<ul>
<li>æµ‹è¯•åœºæ™¯ 1ï¼šT1 å¯åŠ¨åè¯»å–æ–‡æ¡£ 2ï¼ŒT2 æ›´æ–°æ–‡æ¡£ 1 å’Œ 2 å¹¶æäº¤ï¼ŒT1 å†æ¬¡è¯»å–æ–‡æ¡£ 2ï¼›</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼ˆåŒä¸Šï¼Œç•¥ï¼‰</span>

<span class="hljs-comment">// äº‹åŠ¡T1</span>
<span class="hljs-keyword">const</span> session1 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T1</span> = session1.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session1.<span class="hljs-title function_">startTransaction</span>({

  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T2</span>
<span class="hljs-keyword">const</span> session2 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T2</span> = session2.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session2.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// T1è¯»å–æ–‡æ¡£1å’Œ2</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 1, value: 10 } ]</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">2</span> }); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 2, value: 20 } ]</span>

<span class="hljs-comment">// T2æ›´æ–°ä¸¤ä¸ªæ–‡æ¡£å¹¶æäº¤</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">12</span> } });
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">2</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">18</span> } });
session2.<span class="hljs-title function_">commitTransaction</span>();

<span class="hljs-comment">// T1å†æ¬¡è¯»å–æ–‡æ¡£2ï¼Œç»“æœä¸å˜</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">2</span> }); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 2, value: 20 } ]</span>

session1.<span class="hljs-title function_">commitTransaction</span>();
</code></pre>
<ul>
<li>æµ‹è¯•åœºæ™¯ 2ï¼šT1 æŸ¥è¯¢åŒ¹é…æ¡ä»¶çš„æ–‡æ¡£ï¼ŒT2 æ›´æ–°æ–‡æ¡£ä½¿å…¶æ»¡è¶³æ–°æ¡ä»¶å¹¶æäº¤ï¼ŒT1 å†æ¬¡æŸ¥è¯¢ï¼›</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼ˆåŒä¸Šï¼Œç•¥ï¼‰</span>

<span class="hljs-comment">// äº‹åŠ¡T1</span>
<span class="hljs-keyword">const</span> session1 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T1</span> = session1.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session1.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T2</span>
<span class="hljs-keyword">const</span> session2 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T2</span> = session2.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session2.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// T1æŸ¥è¯¢valueèƒ½è¢«5æ•´é™¤çš„æ–‡æ¡£</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">findOne</span>({ <span class="hljs-attr">value</span>: { <span class="hljs-attr">$mod</span>: [<span class="hljs-number">5</span>, <span class="hljs-number">0</span>] } }); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š{ _id: 1, value: 10 }</span>

<span class="hljs-comment">// T2æ›´æ–°æ–‡æ¡£1ä½¿å…¶èƒ½è¢«3æ•´é™¤å¹¶æäº¤</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">value</span>: <span class="hljs-number">10</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">12</span> } });
session2.<span class="hljs-title function_">commitTransaction</span>();

<span class="hljs-comment">// T1æŸ¥è¯¢valueèƒ½è¢«3æ•´é™¤çš„æ–‡æ¡£ï¼Œæ— ç»“æœ</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">value</span>: { <span class="hljs-attr">$mod</span>: [<span class="hljs-number">3</span>, <span class="hljs-number">0</span>] } }).<span class="hljs-title function_">toArray</span>(); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[]</span>

session1.<span class="hljs-title function_">commitTransaction</span>();
</code></pre>
<ul>
<li>æµ‹è¯•åœºæ™¯ 3ï¼šT2 æ›´æ–°æ–‡æ¡£åæäº¤ï¼ŒT1 åˆ é™¤åŒ¹é…æ—§å€¼çš„æ–‡æ¡£ï¼Œè§¦å‘å†²çªï¼›</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼ˆåŒä¸Šï¼Œç•¥ï¼‰</span>

<span class="hljs-comment">// äº‹åŠ¡T1</span>
<span class="hljs-keyword">const</span> session1 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T1</span> = session1.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session1.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T2</span>
<span class="hljs-keyword">const</span> session2 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T2</span> = session2.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session2.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// T1è¯»å–æ–‡æ¡£1</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 1, value: 10 } ]</span>

<span class="hljs-comment">// T2æ›´æ–°ä¸¤ä¸ªæ–‡æ¡£å¹¶æäº¤</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">12</span> } });
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">2</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">18</span> } });
session2.<span class="hljs-title function_">commitTransaction</span>();

<span class="hljs-comment">// T1åˆ é™¤value=20çš„æ–‡æ¡£ï¼Œè§¦å‘å†²çª</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">deleteMany</span>({ <span class="hljs-attr">value</span>: <span class="hljs-number">20</span> });

<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼šæŠ›å‡ºå†™å†²çªé”™è¯¯</span>
<span class="hljs-comment">// MongoServerError[WriteConflict]: Caused by :: Write conflict during plan execution and yielding is disabled. :: Please retry your operation or multi-document transaction.</span>
</code></pre>
<ul>
<li>å¯¹æ¯” SQLï¼šSQL çš„â€œè¯»å·²æäº¤â€çº§åˆ«å¯èƒ½å‡ºç°â€œè¯»å€¾æ–œâ€ï¼Œå³åŒä¸€äº‹åŠ¡å†…ä¸¤æ¬¡è¯»å–åŒä¸€æ–‡æ¡£å¾—åˆ°ä¸åŒç»“æœï¼Œè€Œ MongoDB çš„å¿«ç…§éš”ç¦»å®Œå…¨è§„é¿äº†è¿™ä¸€é—®é¢˜ã€‚</li>
</ul>
<h3 data-id="heading-17">å››ã€éœ€è¦åº”ç”¨å±‚å¤„ç†çš„äº‹åŠ¡å¼‚å¸¸</h3>
<p>MongoDB çš„å¿«ç…§éš”ç¦»å¹¶éä¸‡èƒ½ï¼Œä»¥ä¸‹ä¸¤ç§å¼‚å¸¸æ— æ³•é€šè¿‡æ•°æ®åº“å±‚é¢è‡ªåŠ¨é˜²æ­¢ï¼Œéœ€è¦åº”ç”¨å±‚ä»‹å…¥å¤„ç†ï¼š</p>
<h4 data-id="heading-18">1. å†™å€¾æ–œï¼ˆG2-itemï¼‰ï¼šè¯»ä¾èµ–å¯¼è‡´çš„é€»è¾‘å†²çª</h4>
<ul>
<li>åœºæ™¯ï¼šä¸¤ä¸ªäº‹åŠ¡åŒæ—¶è¯»å–åŒä¸€æ‰¹æ–‡æ¡£ï¼ŒåŸºäºè¯»å–ç»“æœæ‰§è¡Œæ›´æ–°ï¼Œæ›´æ–°åçš„æ•°æ®å¯èƒ½è¿åä¸šåŠ¡è§„åˆ™ï¼ˆå¦‚ä¸¤ä¸ªäº‹åŠ¡å‡åˆ¤æ–­â€œåº“å­˜å……è¶³â€å¹¶æ‰£å‡ï¼Œæœ€ç»ˆå¯¼è‡´åº“å­˜ä¸ºè´Ÿï¼‰ï¼›</li>
<li>MongoDB æµ‹è¯•ä»£ç ï¼š</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼ˆåŒä¸Šï¼Œç•¥ï¼‰</span>

<span class="hljs-comment">// äº‹åŠ¡T1</span>
<span class="hljs-keyword">const</span> session1 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T1</span> = session1.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session1.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T2</span>
<span class="hljs-keyword">const</span> session2 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T2</span> = session2.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session2.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"snapshot"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// ä¸¤ä¸ªäº‹åŠ¡å‡è¯»å–æ–‡æ¡£1å’Œ2</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">_id</span>: { <span class="hljs-attr">$in</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>] } });
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 1, value: 10 }, { _id: 2, value: 20 } ]</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">_id</span>: { <span class="hljs-attr">$in</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>] } });
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 1, value: 10 }, { _id: 2, value: 20 } ]</span>

<span class="hljs-comment">// ä¸¤ä¸ªäº‹åŠ¡åˆ†åˆ«æ›´æ–°æ–‡æ¡£</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">11</span> } });
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">2</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">21</span> } });

<span class="hljs-comment">// ä¸¤ä¸ªäº‹åŠ¡å‡æäº¤æˆåŠŸï¼Œæœªè§¦å‘å†²çª</span>
session1.<span class="hljs-title function_">commitTransaction</span>();
session2.<span class="hljs-title function_">commitTransaction</span>();
</code></pre>
<ul>
<li>åŸå› ï¼šMongoDB ä¸ä¼šåœ¨è¯»å–æ—¶åŠ é”ï¼Œä¹Ÿæ— æ³•æ„ŸçŸ¥â€œåŸºäºè¯»å–ç»“æœçš„å†™ä¾èµ–â€ï¼›</li>
<li>è§£å†³æ–¹æ¡ˆï¼šåº”ç”¨å±‚å¯é€šè¿‡â€œæ›´æ–°è¯»é›†æ–‡æ¡£â€çš„æ–¹å¼ï¼Œå°†è¯»ä¾èµ–è½¬åŒ–ä¸ºå†™å†²çªï¼ˆå¦‚è¯»å–æ–‡æ¡£æ—¶æ›´æ–°ä¸€ä¸ªâ€œç‰ˆæœ¬å·â€å­—æ®µï¼‰ï¼Œè¿«ä½¿å†²çªäº‹åŠ¡å¤±è´¥é‡è¯•ã€‚</li>
</ul>
<h4 data-id="heading-19">2. åä¾èµ–å¾ªç¯ï¼ˆG2ï¼‰ï¼šè·¨äº‹åŠ¡è¯»å†™ä¾èµ–å†²çª</h4>
<ul>
<li>åœºæ™¯ï¼šä¸¤ä¸ªäº‹åŠ¡å‡åŸºäºå¯¹æ–¹å·²æ›´æ–°çš„æ–‡æ¡£æ‰§è¡Œå†™æ“ä½œï¼Œå¯¼è‡´æœ€ç»ˆç»“æœè¿åé¢„æœŸï¼›</li>
<li>MongoDB æµ‹è¯•ä»£ç ï¼š</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼ˆåŒä¸Šï¼Œç•¥ï¼‰</span>

<span class="hljs-comment">// äº‹åŠ¡T1</span>
<span class="hljs-keyword">const</span> session1 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T1</span> = session1.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session1.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"snapshot"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T2</span>
<span class="hljs-keyword">const</span> session2 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T2</span> = session2.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session2.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"snapshot"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// ä¸¤ä¸ªäº‹åŠ¡å‡æŸ¥è¯¢valueèƒ½è¢«3æ•´é™¤çš„æ–‡æ¡£ï¼Œæ— ç»“æœ</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">value</span>: { <span class="hljs-attr">$mod</span>: [<span class="hljs-number">3</span>, <span class="hljs-number">0</span>] } }).<span class="hljs-title function_">toArray</span>(); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[]</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">value</span>: { <span class="hljs-attr">$mod</span>: [<span class="hljs-number">3</span>, <span class="hljs-number">0</span>] } }).<span class="hljs-title function_">toArray</span>(); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[]</span>

<span class="hljs-comment">// T1æ’å…¥ä¸¤ä¸ªèƒ½è¢«3æ•´é™¤çš„æ–‡æ¡£å¹¶æäº¤</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">insertOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">30</span> });
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">insertOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">42</span> });
session1.<span class="hljs-title function_">commitTransaction</span>();

<span class="hljs-comment">// T2æäº¤ï¼ˆæ— æ›´æ–°æ“ä½œï¼‰</span>
session2.<span class="hljs-title function_">commitTransaction</span>();

<span class="hljs-comment">// æœ€ç»ˆæŸ¥è¯¢ï¼Œèƒ½çœ‹åˆ°T1æ’å…¥çš„æ–‡æ¡£</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">value</span>: { <span class="hljs-attr">$mod</span>: [<span class="hljs-number">3</span>, <span class="hljs-number">0</span>] } }).<span class="hljs-title function_">toArray</span>();
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 3, value: 30 }, { _id: 4, value: 42 } ]</span>
</code></pre>
<ul>
<li>åŸå› ï¼šMongoDB ä¸ä¼šåœ¨è¯»å†™æ“ä½œä¹‹é—´åŠ é”ï¼Œæ— æ³•æ£€æµ‹æ­¤ç±»è·¨äº‹åŠ¡çš„è¯»ä¾èµ–å†²çªï¼›</li>
<li>è§£å†³æ–¹æ¡ˆï¼šè‹¥äº‹åŠ¡çš„å†™æ“ä½œä¾èµ–äºä¹‹å‰çš„è¯»å–ç»“æœï¼Œåº”ç”¨å±‚éœ€æ˜¾å¼æ›´æ–°è¯»å–è¿‡çš„æ–‡æ¡£ï¼ˆå¦‚æ·»åŠ â€œå·²å¤„ç†â€æ ‡è®°ï¼‰ï¼Œè§¦å‘ MongoDB çš„å†™å†²çªæ£€æµ‹ï¼Œé¿å…å¼‚å¸¸ã€‚</li>
</ul>
<h3 data-id="heading-20">äº”ã€æ€»ç»“ï¼šMongoDB äº‹åŠ¡éš”ç¦»çº§åˆ«æ€ä¹ˆç”¨ï¼Ÿ</h3>
<ol>
<li>æ ¸å¿ƒé€‰å‹ï¼šå•åˆ†ç‰‡åœºæ™¯ç”¨<code>readConcern: majority</code>å³å¯æ»¡è¶³å¤§éƒ¨åˆ†éœ€æ±‚ï¼Œå¤šåˆ†ç‰‡åœºæ™¯éœ€ç”¨<code>snapshot</code>ä¿è¯è·¨åˆ†ç‰‡ä¸€è‡´æ€§ï¼›</li>
<li>å†²çªå¤„ç†ï¼šæ˜¾å¼å¤šæ–‡æ¡£äº‹åŠ¡é‡‡ç”¨â€œå†²çªå³å¤±è´¥â€ï¼Œåº”ç”¨éœ€å®ç°é‡è¯•é€»è¾‘ï¼ˆç®€å•åœºæ™¯å¯ç›´æ¥é‡è¯•ï¼Œå¤æ‚åœºæ™¯éœ€å¤„ç†å¹‚ç­‰æ€§ï¼‰ï¼›</li>
<li>æ‰“ç ´è¯¯è§£ï¼šMongoDB çš„å¤šæ–‡æ¡£äº‹åŠ¡æ—©å·²å…·å¤‡ç”Ÿäº§çº§ç¨³å®šæ€§ï¼Œå…¶éš”ç¦»èƒ½åŠ›ä¸é€Šè‰²äºä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“ï¼Œæ— éœ€å†è¢«â€œNoSQL äº‹åŠ¡ä¸é è°±â€çš„è€è§‚å¿µæŸç¼šï¼›</li>
<li>æ€§èƒ½å¹³è¡¡ï¼šé€šè¿‡ MVCC å’Œâ€œå†²çªå³å¤±è´¥â€æœºåˆ¶ï¼ŒMongoDB åœ¨ä¿è¯ä¸€è‡´æ€§çš„åŒæ—¶ï¼Œé¿å…äº†è¯»é”å¸¦æ¥çš„æ‰©å±•æ€§é—®é¢˜ï¼Œé€‚åˆé«˜å¹¶å‘åœºæ™¯ã€‚</li>
</ol>
<p>å¦‚æœä½ çš„ä¸šåŠ¡éœ€è¦ä½¿ç”¨ MongoDB çš„å¤šæ–‡æ¡£äº‹åŠ¡ï¼Œä¸å¦¨ç›´æ¥å¤åˆ¶æœ¬æ–‡çš„æµ‹è¯•ä»£ç è¿›è¡ŒéªŒè¯ï¼Œç»“åˆè‡ªèº«ä¸šåŠ¡ç‰¹ç‚¹é€‰æ‹©åˆé€‚çš„è¯»å…³æ³¨çº§åˆ«ï¼ŒåŒæ—¶åœ¨åº”ç”¨å±‚å¤„ç†å¥½å†™å€¾æ–œå’Œåä¾èµ–å¾ªç¯é—®é¢˜ï¼Œå³å¯å……åˆ†å‘æŒ¥å…¶é«˜å¹¶å‘+å¼ºä¸€è‡´æ€§çš„ä¼˜åŠ¿ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±åº¦è§£æï¼šè§£å†³ backdrop-filter ä¸ border-radius çš„åœ†è§’æ¼å…‰é—®é¢˜]]></title>    <link>https://juejin.cn/post/7570646659865985050</link>    <guid>https://juejin.cn/post/7570646659865985050</guid>    <pubDate>2025-11-10T06:52:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570646659865985050" data-draft-id="7570769486706458662" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±åº¦è§£æï¼šè§£å†³ backdrop-filter ä¸ border-radius çš„åœ†è§’æ¼å…‰é—®é¢˜"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,HTML"/> <meta itemprop="datePublished" content="2025-11-10T06:52:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="_å¿—å“¥_"/> <meta itemprop="url" content="https://juejin.cn/user/3474112476882071"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±åº¦è§£æï¼šè§£å†³ backdrop-filter ä¸ border-radius çš„åœ†è§’æ¼å…‰é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3474112476882071/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    _å¿—å“¥_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:52:47.000Z" title="Mon Nov 10 2025 06:52:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å¼•è¨€</h3>
<p>åœ¨ç°ä»£Webå¼€å‘ä¸­ï¼Œ<code>backdrop-filter</code>Â å±æ€§ä¸ºåˆ›å»ºæ¯›ç»ç’ƒç­‰é«˜çº§è§†è§‰æ•ˆæœæä¾›äº†å¼ºå¤§çš„æ”¯æŒï¼Œæå¤§åœ°æå‡äº†ç”¨æˆ·ç•Œé¢çš„å±‚æ¬¡æ„Ÿå’Œç°ä»£æ„Ÿã€‚ç„¶è€Œï¼Œå½“æˆ‘ä»¬å°†å®ƒä¸Â <code>border-radius</code>Â ç»“åˆä½¿ç”¨æ—¶ï¼Œä¸€ä¸ªå¸¸è§çš„æ¸²æŸ“é—®é¢˜ä¾¿ä¼šæµ®ç°ï¼šåœ†è§’è¾¹ç¼˜å‡ºç°ä¸åº”æœ‰çš„â€œæ¼å…‰â€ç°è±¡ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨è¯¥é—®é¢˜çš„æ ¹æºï¼Œåˆ†æç°æœ‰è§£å†³æ–¹æ¡ˆçš„å±€é™æ€§ï¼Œå¹¶æœ€ç»ˆæä¾›ä¸€ä¸ªåŸºäº CSS Mask çš„ã€è¡Œä¹‹æœ‰æ•ˆçš„ç»ˆæè§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-1">é—®é¢˜æ ¹æºï¼šæ¸²æŸ“å±‚çº§çš„å†²çª</h3>
<p>è¦ç†è§£â€œæ¼å…‰â€ç°è±¡ï¼Œæˆ‘ä»¬å¿…é¡»æ·±å…¥æµè§ˆå™¨çš„æ¸²æŸ“æœºåˆ¶ã€‚è¿™ä¸ªé—®é¢˜çš„æ ¸å¿ƒåœ¨äºÂ <code>backdrop-filter</code>Â å’ŒÂ <code>border-radius</code>Â åœ¨æ¸²æŸ“æµæ°´çº¿ä¸­çš„å·¥ä½œé¡ºåºå’Œæ–¹å¼å­˜åœ¨æ ¹æœ¬æ€§çš„å†²çªã€‚</p>
<ol>
<li>
<p><strong><code>backdrop-filter</code>Â çš„å·¥ä½œåŸç†</strong>ï¼š<br/>
<code>backdrop-filter</code>Â ä½œç”¨äºå…ƒç´ èƒŒåçš„æ‰€æœ‰å†…å®¹ã€‚å®ƒä¼šè·å–è¿™äº›å†…å®¹ï¼Œåº”ç”¨æŒ‡å®šçš„æ»¤é•œï¼ˆå¦‚Â <code>blur</code>ï¼‰ï¼Œç„¶åå°†ç»“æœç»˜åˆ¶åœ¨å½“å‰å…ƒç´ çš„èƒŒæ™¯åŒºåŸŸã€‚å…³é”®åœ¨äºï¼Œè¿™ä¸ªæ¨¡ç³Šæ•ˆæœçš„ç»˜åˆ¶æ˜¯åŸºäºå…ƒç´ çš„<strong>è¾¹ç•Œæ¡†</strong>ï¼Œå³ä¸€ä¸ªçŸ©å½¢åŒºåŸŸã€‚</p>
</li>
<li>
<p><strong>æ¨¡ç³Šæ•ˆæœçš„â€œæº¢å‡ºâ€</strong> ï¼š<br/>
æ¨¡ç³Šç®—æ³•çš„æœ¬è´¨æ˜¯åƒç´ å‘å‘¨å›´æ‰©æ•£ï¼Œè¿™ä¼šå¯¼è‡´æ¨¡ç³Šåçš„å›¾åƒå°ºå¯¸å¤§äºåŸå§‹å›¾åƒï¼Œå½¢æˆä¸€ä¸ªâ€œå…‰æ™•â€æˆ–â€œæº¢å‡ºâ€è¾¹ç¼˜ã€‚è¿™ä¸ªæº¢å‡ºéƒ¨åˆ†ä¼šè¶…å‡ºå…ƒç´ åŸå§‹çš„çŸ©å½¢è¾¹ç•Œã€‚</p>
</li>
<li>
<p><strong><code>border-radius</code>Â çš„å·¥ä½œåŸç†</strong>ï¼š<br/>
<code>border-radius</code>Â æ˜¯ä¸€ä¸ªè£å‰ªå±æ€§ã€‚å®ƒåœ¨å…ƒç´ çš„å†…å®¹ï¼ˆåŒ…æ‹¬èƒŒæ™¯ã€è¾¹æ¡†ç­‰ï¼‰è¢«ç»˜åˆ¶å®Œæˆåï¼Œå¯¹å…ƒç´ è‡ªèº«è¿›è¡Œå‡ ä½•è£å‰ªï¼Œä½¿å…¶å‘ˆç°åœ†è§’ã€‚</p>
</li>
<li>
<p><strong>æ¸²æŸ“å†²çªç‚¹</strong>ï¼š<br/>
æµè§ˆå™¨çš„æ¸²æŸ“æµç¨‹å†³å®šäº†Â <code>backdrop-filter</code>Â çš„æ¨¡ç³Šæ•ˆæœï¼ˆåŒ…æ‹¬å…¶æº¢å‡ºçš„å…‰æ™•ï¼‰ä¼šå…ˆè¢«å®Œæ•´åœ°ç»˜åˆ¶åœ¨ä¸€ä¸ªçŸ©å½¢åŒºåŸŸå†…ã€‚éšåï¼Œ<code>border-radius</code>Â æ‰å¯¹è¿™ä¸ªå…ƒç´ è¿›è¡Œè£å‰ªã€‚ç»“æœæ˜¯ï¼Œ<code>border-radius</code>Â åªèƒ½è£å‰ªå…ƒç´ æœ¬èº«çš„å†…å®¹ï¼Œå´æ— æ³•è£å‰ªé‚£ä¸ªå·²ç»ç»˜åˆ¶å®Œæˆã€å¹¶æº¢å‡ºåˆ°åœ†è§’ä¹‹å¤–çš„æ¨¡ç³Šå…‰æ™•ã€‚è¿™ä¾¿å¯¼è‡´äº†æˆ‘ä»¬è§‚å¯Ÿåˆ°çš„â€œæ¼å…‰â€ç°è±¡ã€‚</p>
<p>å¯ä»¥å°†å…¶ç±»æ¯”ä¸ºï¼šå…ˆåœ¨ä¸€å—æ–¹å½¢ç»ç’ƒä¸Šå–·æ¶‚äº†å¸¦æœ‰è¾¹ç¼˜æ‰©æ•£æ•ˆæœçš„æ²¹æ¼†ï¼Œç„¶åå†ç”¨åœ†å½¢æ¨¡å…·å»åˆ‡å‰²è¿™å—ç»ç’ƒã€‚æ²¹æ¼†çš„æ‰©æ•£è¾¹ç¼˜ä¾ç„¶ä¼šä»åœ†å½¢è½®å»“å¤–æ˜¾éœ²å‡ºæ¥ã€‚</p>
</li>
</ol>
<h3 data-id="heading-2">å¸¸è§è§£å†³æ–¹æ¡ˆåŠå…¶å±€é™æ€§</h3>
<p>é¢å¯¹æ­¤é—®é¢˜ï¼Œå¼€å‘è€…é€šå¸¸ä¼šå°è¯•ä¸€äº›æ ‡å‡†çš„è£å‰ªæ–¹æ³•ï¼Œä½†å¾€å¾€æ”¶æ•ˆç”šå¾®ã€‚</p>
<p><strong>å°è¯•æ–¹æ¡ˆï¼šä½¿ç”¨Â <code>clip-path</code></strong></p>
<p>ä¸€ä¸ªç›´è§‚çš„æ€è·¯æ˜¯ä½¿ç”¨åŠŸèƒ½æ›´å¼ºå¤§çš„Â <code>clip-path</code>Â å±æ€§è¿›è¡Œè£å‰ªã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">clip-path</span>: <span class="hljs-built_in">inset</span>(<span class="hljs-number">0</span> round <span class="hljs-number">12px</span>);
</code></pre>
<p>ç„¶è€Œï¼Œæ­¤æ–¹æ¡ˆåŒæ ·æ— æ³•è§£å†³é—®é¢˜ã€‚å…¶æ ¹æœ¬åŸå› ä¸Â <code>border-radius</code>Â ç±»ä¼¼ï¼š<code>clip-path</code>Â ä¹Ÿåœ¨å†…å®¹ç»˜åˆ¶ä¹‹åç”Ÿæ•ˆï¼Œå®ƒæ— æ³•å½±å“å·²ç»â€œæº¢å‡ºâ€åˆ°å…ƒç´ è¾¹ç•Œä¹‹å¤–çš„æ¨¡ç³Šå…‰æ™•ã€‚å› æ­¤ï¼Œå®ƒå’ŒÂ <code>border-radius</code>Â åœ¨è¿™ä¸ªç‰¹å®šåœºæ™¯ä¸‹éƒ½é¢ä¸´ç€ç›¸åŒçš„æ¸²æŸ“é¡ºåºé™åˆ¶ã€‚</p>
<h3 data-id="heading-3">ç»ˆæè§£å†³æ–¹æ¡ˆï¼šåˆ©ç”¨ CSS Mask è¿›è¡Œé¢„è£å‰ª</h3>
<p>æ—¢ç„¶äº‹åè£å‰ªæ— æ•ˆï¼Œæˆ‘ä»¬éœ€è¦æ¢ä¸€ç§æ€è·¯ï¼š<strong>åœ¨å†…å®¹ç»˜åˆ¶ä¹‹å‰å°±çº¦æŸå…¶ç»˜åˆ¶åŒºåŸŸ</strong>ã€‚è¿™æ­£æ˜¯ CSSÂ <code>mask</code>Â å±æ€§çš„æ ¸å¿ƒèƒ½åŠ›ã€‚<code>mask</code>Â ä¸ä¼šåœ¨å†…å®¹ç»˜åˆ¶åè¿›è¡Œè£å‰ªï¼Œè€Œæ˜¯ä½œä¸ºä¸€ä¸ªè’™ç‰ˆï¼Œåªæœ‰è’™ç‰ˆä¸é€æ˜çš„åŒºåŸŸæ‰ä¼šè¢«ç»˜åˆ¶å†…å®¹ã€‚</p>
<p>é€šè¿‡Â <code>mask-image</code>ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªä¸æœŸæœ›åœ†è§’å®Œå…¨ä¸€è‡´çš„è’™ç‰ˆï¼Œä»æ ¹æœ¬ä¸Šæœç»æ¨¡ç³Šæ•ˆæœæº¢å‡ºçš„å¯èƒ½ã€‚</p>
<p><strong>æ ¸å¿ƒå®ç°ä»£ç ï¼š</strong></p>
<p>è¯¥æ–¹æ¡ˆåº”åº”ç”¨äºÂ <code>video</code>Â å…ƒç´ çš„<strong>å¤–å±‚å®¹å™¨</strong>ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.video-container</span> {
  <span class="hljs-comment">/* ... å…¶ä»–å¸ƒå±€æ ·å¼ ... */</span>

  <span class="hljs-comment">/* æ ¸å¿ƒè§£å†³æ–¹æ¡ˆï¼šåº”ç”¨å¾„å‘æ¸å˜è’™ç‰ˆ */</span>
  -webkit-<span class="hljs-attribute">mask-image</span>: <span class="hljs-built_in">-webkit-radial-gradient</span>(white, black);
  <span class="hljs-attribute">mask-image</span>: <span class="hljs-built_in">radial-gradient</span>(white, black);

  <span class="hljs-comment">/* å…³é”®ä¼˜åŒ–ï¼šè§¦å‘ç¡¬ä»¶åŠ é€Ÿï¼Œç¡®ä¿è’™ç‰ˆæ•ˆæœç¨³å®š */</span>
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateZ</span>(<span class="hljs-number">0</span>);
}
</code></pre>
<p><strong>åŸç†è§£æï¼š</strong></p>
<ol>
<li><strong><code>mask-image: radial-gradient(white, black);</code></strong><br/>
æˆ‘ä»¬ä½¿ç”¨Â <code>radial-gradient</code>Â åˆ›å»ºäº†ä¸€ä¸ªä»ä¸­å¿ƒç™½è‰²åˆ°è¾¹ç¼˜é»‘è‰²çš„å¾„å‘æ¸å˜ä½œä¸ºè’™ç‰ˆã€‚åœ¨ CSS Mask ä¸­ï¼Œæ¸å˜çš„é€æ˜åº¦å†³å®šäº†å†…å®¹çš„å¯è§æ€§ï¼š<strong>ç™½è‰²ï¼ˆä¸é€æ˜ï¼‰éƒ¨åˆ†æ˜¾ç¤ºå†…å®¹ï¼Œé»‘è‰²ï¼ˆå®Œå…¨é€æ˜ï¼‰éƒ¨åˆ†éšè—å†…å®¹</strong>ã€‚è¿™ä¸ªåœ†å½¢è’™ç‰ˆå¼ºåˆ¶æµè§ˆå™¨åªåœ¨åœ†è§’åŒºåŸŸå†…æ¸²æŸ“æ‰€æœ‰å­å…ƒç´ å’Œæ•ˆæœï¼ŒåŒ…æ‹¬Â <code>backdrop-filter</code>Â äº§ç”Ÿçš„æ¨¡ç³Šã€‚ä»»ä½•è¯•å›¾æº¢å‡ºåˆ°è’™ç‰ˆä¹‹å¤–çš„å…‰æ™•éƒ½ä¼šè¢«ç›´æ¥éšè—ï¼Œä»è€Œåœ¨æ ¹æºä¸Šè§£å†³äº†æ¼å…‰é—®é¢˜ã€‚</li>
<li><strong><code>transform: translateZ(0);</code></strong><br/>
è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„æ€§èƒ½å’Œç¨³å®šæ€§ä¼˜åŒ–ã€‚è¯¥å±æ€§ä¼šè§¦å‘å…ƒç´ çš„ç¡¬ä»¶åŠ é€Ÿï¼Œå°†å…¶æå‡åˆ°ä¸€ä¸ªç‹¬ç«‹çš„æ¸²æŸ“å±‚ã€‚è¿™å¯ä»¥ç¡®ä¿Â <code>mask</code>Â çš„æ•ˆæœè¢« GPU æ­£ç¡®ã€é«˜æ•ˆåœ°åˆæˆï¼Œé¿å…åœ¨æŸäº›å¤æ‚å¸ƒå±€æˆ–æµè§ˆå™¨ä¸­å¯èƒ½å‡ºç°çš„æ¸²æŸ“é”™ä½æˆ–å¤±æ•ˆé—®é¢˜ï¼Œä¿è¯äº†æ–¹æ¡ˆçš„å¥å£®æ€§ã€‚</li>
</ol>
<h4 data-id="heading-4">å®Œæ•´ä»£ç ç¤ºä¾‹</h4>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„ã€å¯ç›´æ¥ä½¿ç”¨çš„ä»£ç ç»“æ„ï¼Œæ¸…æ™°åœ°å±•ç¤ºäº†å¦‚ä½•åº”ç”¨æ­¤æ–¹æ¡ˆã€‚å¤åˆ¶ä»£ç åˆ°æœ¬åœ°ï¼Œæ›¿æ¢videoçš„urlå°±è¡Œï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>åœ†è§’è§†é¢‘æ’­æ”¾å™¨<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-tag">body</span> {
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">justify-content</span>: center;
      <span class="hljs-attribute">align-items</span>: center;
      <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100vh</span>;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#000</span>;
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="hljs-string">'Segoe UI'</span>, Roboto, <span class="hljs-string">'Helvetica Neue'</span>, Arial, sans-serif;
    }

    <span class="hljs-selector-class">.video-player-wrapper</span> {
      <span class="hljs-attribute">position</span>: relative;
      <span class="hljs-attribute">width</span>: <span class="hljs-number">800px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">450px</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">12px</span>;
      <span class="hljs-attribute">overflow</span>: hidden;
      <span class="hljs-attribute">clip-path</span>: <span class="hljs-built_in">inset</span>(<span class="hljs-number">0</span> round <span class="hljs-number">12px</span>);
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#000</span>;
      <span class="hljs-comment">/* å¼ºåˆ¶åˆ›å»ºåˆæˆå±‚å¹¶å°è¯•è®©åœ†è§’ç”Ÿæ•ˆï¼ˆå…¼å®¹æ€§å¢å¼ºï¼‰ */</span>
      -webkit-<span class="hljs-attribute">mask-image</span>: <span class="hljs-built_in">-webkit-radial-gradient</span>(white, black);
      <span class="hljs-attribute">mask-image</span>: <span class="hljs-built_in">radial-gradient</span>(white, black);
      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateZ</span>(<span class="hljs-number">0</span>);
    }

    <span class="hljs-selector-class">.video-player-wrapper</span> <span class="hljs-selector-tag">video</span><span class="hljs-selector-class">.video-element</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">object-fit</span>: cover;
      <span class="hljs-attribute">display</span>: block;
    }

    <span class="hljs-selector-class">.video-title</span> {
      <span class="hljs-attribute">position</span>: absolute;
      <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">28px</span>;
      <span class="hljs-attribute">color</span>: white;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
      <span class="hljs-attribute">line-height</span>: <span class="hljs-number">28px</span>;
      <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">12px</span>;
      <span class="hljs-attribute">box-sizing</span>: border-box;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>);
      -webkit-backdrop-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">blur</span>(<span class="hljs-number">20px</span>);
      backdrop-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">blur</span>(<span class="hljs-number">20px</span>);
      <span class="hljs-attribute">overflow</span>: hidden;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"video-player-wrapper"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"video-element"</span> <span class="hljs-attr">controls</span> <span class="hljs-attr">autoplay</span> <span class="hljs-attr">muted</span> <span class="hljs-attr">loop</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"xxx.mp4"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"video-title"</span>&gt;</span>
      æˆ‘æ˜¯videoæ ‡é¢˜
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 data-id="heading-5">ç»“æ¡ˆé™ˆè¯</h3>
<p>çœ‹ï¼Œå†é¡½å›ºçš„æ¸²æŸ“BUGï¼Œä¹Ÿæ•Œä¸è¿‡æˆ‘ä»¬å¯¹åº•å±‚åŸç†çš„ç†è§£å’Œä¸€ç‚¹ç‚¹â€œéªšæ“ä½œâ€çš„æ™ºæ…§ã€‚ä»ç†è§£æ¸²æŸ“é¡ºåºçš„â€œå…ˆæ–©åå¥â€ï¼Œåˆ°æ”¾å¼ƒæ— æ•ˆçš„Â <code>clip-path</code>ï¼Œæœ€åç”¨Â <code>mask-image</code>Â å®ç°é™ç»´æ‰“å‡»ï¼Œæ•´ä¸ªè¿‡ç¨‹å°±åƒä¸€åœºç²¾å½©çš„ä¾¦æ¢æ¨ç†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[100% ç”¨ AI åšå®Œä¸€ä¸ªæ–°é¡¹ç›®ï¼Œä» Plan åˆ° Finished æˆ‘å­¦åˆ°äº†è¿™äº›]]></title>    <link>https://juejin.cn/post/7570579125153923082</link>    <guid>https://juejin.cn/post/7570579125153923082</guid>    <pubDate>2025-11-10T05:41:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570579125153923082" data-draft-id="7569945160869396526" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="100% ç”¨ AI åšå®Œä¸€ä¸ªæ–°é¡¹ç›®ï¼Œä» Plan åˆ° Finished æˆ‘å­¦åˆ°äº†è¿™äº›"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-11-10T05:41:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Immerse"/> <meta itemprop="url" content="https://juejin.cn/user/2708812817761752"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            100% ç”¨ AI åšå®Œä¸€ä¸ªæ–°é¡¹ç›®ï¼Œä» Plan åˆ° Finished æˆ‘å­¦åˆ°äº†è¿™äº›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2708812817761752/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Immerse
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T05:41:17.000Z" title="Mon Nov 10 2025 05:41:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ Immerseï¼Œä¸€åç‹¬ç«‹å¼€å‘è€…ã€å†…å®¹åˆ›ä½œè€…ã€AGI å®è·µè€…ã€‚</p>
<p>å…³æ³¨å…¬ä¼—å·ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fyaolifeng.com%2Fother%2Fwx_public_account.webp" target="_blank" title="https://yaolifeng.com/other/wx_public_account.webp" ref="nofollow noopener noreferrer">æ²‰æµ¸å¼è¶£è°ˆ</a>ï¼Œè·å–æœ€æ–°æ–‡ç« ï¼ˆæ›´å¤šå†…å®¹åªåœ¨å…¬ä¼—å·æ›´æ–°ï¼‰</p>
<p>ä¸ªäººç½‘ç«™ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fyaolifeng.com" target="_blank" title="https://yaolifeng.com" ref="nofollow noopener noreferrer">yaolifeng.com</a> ä¹ŸåŒæ­¥æ›´æ–°ã€‚</p>
<p>è½¬è½½è¯·åœ¨æ–‡ç« å¼€å¤´æ³¨æ˜å‡ºå¤„å’Œç‰ˆæƒä¿¡æ¯ã€‚</p>
<p>æˆ‘ä¼šåœ¨è¿™é‡Œåˆ†äº«å…³äº<code>ç¼–ç¨‹</code>ã€<code>ç‹¬ç«‹å¼€å‘</code>ã€<code>AIå¹²è´§</code>ã€<code>å¼€æº</code>ã€<code>ä¸ªäººæ€è€ƒ</code>ç­‰å†…å®¹ã€‚</p>
<p>å¦‚æœæœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œæ¬¢è¿åŠ¨åŠ¨å°æ‰‹æŒ‡ä¸€é”®ä¸‰è¿(<code>ç‚¹èµ</code>ã€<code>è¯„è®º</code>ã€<code>è½¬å‘</code>)ï¼Œç»™æˆ‘ä¸€äº›æ”¯æŒå’Œé¼“åŠ±ï¼Œè°¢è°¢ï¼</p>
<hr/>
<p>å¥³æœ‹å‹ä¸€å¥è¯å‚¬ç”Ÿçš„ Chrome æ’ä»¶ï¼Œè§£å†³æ‰¹é‡ä¸‹è½½å›¾ç‰‡é—®é¢˜</p>
<p>å‘¨æœ«åœ¨å®¶ï¼Œå¥³æœ‹å‹å·¥ä½œéœ€è¦ä¸‹è½½ç½‘ç«™ä¸Šçš„ä¸€äº›å›¾ç‰‡ï¼Œå¥¹è¯´å¤ªéº»çƒ¦äº†ã€‚</p>
<p>å³é”®ã€é€‰æ‹©ä¿å­˜å›¾ç‰‡ã€é€‰æ–‡ä»¶å¤¹ã€æ”¹åå­—ï¼Œä¸€å¼ å›¾å°±å¾—æŠ˜è…¾å¥½å‡ æ­¥ã€‚</p>
<p>è¦æ˜¯ç½‘é¡µé‡Œæœ‰äºŒä¸‰åå¼ å›¾ï¼Œè¿™å¾—ç‚¹å¤šå°‘æ¬¡é¼ æ ‡ã€‚</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/550b2e439f2c4a399982ae36ac02021e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSW1tZXJzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358077&amp;x-signature=byXdlOtH%2Fdx1m7xLnfxR3J1wqes%3D" width="300" loading="lazy"/>
<h2 data-id="heading-0">ä¸‹è½½åœ°å€ï¼š</h2>
<p>GitHub:<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyaolifeng0629%2FPickPic" target="_blank" title="https://github.com/yaolifeng0629/PickPic" ref="nofollow noopener noreferrer"><code>https://github.com/yaolifeng0629/PickPic</code></a></p>
<p>è°·æ­Œæµè§ˆå™¨å•†åº—ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fchromewebstore.google.com%2Fdetail%2Fpickpic-one-click-downloa%2Fhfdohacifjijbgobekodafjpjghflemh" target="_blank" title="https://chromewebstore.google.com/detail/pickpic-one-click-downloa/hfdohacifjijbgobekodafjpjghflemh" ref="nofollow noopener noreferrer"><code>https://chromewebstore.google.com/detail/pickpic-one-click-downloa/hfdohacifjijbgobekodafjpjghflemh</code></a></p>
<p>å‹ç¼©åŒ…ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyaolifeng0629%2FPickPic%2Freleases%2Ftag%2Fv1.0.2" target="_blank" title="https://github.com/yaolifeng0629/PickPic/releases/tag/v1.0.2" ref="nofollow noopener noreferrer"><code>https://github.com/yaolifeng0629/PickPic/releases/tag/v1.0.2</code></a></p>
<h2 data-id="heading-1">ä¸€ä¸ªå¾ˆç®€å•çš„éœ€æ±‚</h2>
<p>éœ€æ±‚å…¶å®å¾ˆæ˜ç¡®ã€‚</p>
<p>åœ¨ç½‘é¡µä¸Šçœ‹åˆ°å–œæ¬¢çš„å›¾ç‰‡ï¼Œæƒ³æ‰¹é‡ä¿å­˜åˆ°æœ¬åœ°ã€‚</p>
<p>å¬èµ·æ¥å¾ˆç®€å•å¯¹å§ï¼Ÿä½†æˆ‘æœäº†ä¸€åœˆï¼Œå‘ç°ç°æœ‰çš„å·¥å…·éƒ½ä¸å¤ªæ»¡æ„ã€‚</p>
<p>æœ‰äº›æ’ä»¶åŠŸèƒ½å€’æ˜¯æœ‰ï¼Œä½†è¦ä¹ˆå¤ªå¤æ‚ï¼Œè¦ä¹ˆå¹¿å‘Šä¸€å †ï¼Œè¦ä¹ˆå°±æ˜¯åªæ”¯æŒç‰¹å®šç½‘ç«™ã€‚</p>
<p>æˆ‘æƒ³è¦çš„å¾ˆç®€å•ï¼šæ‰“å¼€ç½‘é¡µï¼Œä¸€é”®é¢„è§ˆï¼Œé€‰æ‹©ä¸‹è½½ï¼Œå®Œäº‹ã€‚</p>
<p>æ‰€ä»¥å†³å®šè‡ªå·±åšä¸€ä¸ªã€‚</p>
<h2 data-id="heading-2">è¿™ä¸ªæ’ä»¶èƒ½å¹²å•¥</h2>
<p>æ ¸å¿ƒåŠŸèƒ½å°±å‡ ä¸ªã€‚</p>
<p>ç‚¹å‡»æµè§ˆå™¨å›¾æ ‡ï¼Œä¾§è¾¹æ ä¼šæ˜¾ç¤ºå½“å‰ç½‘é¡µçš„æ‰€æœ‰å›¾ç‰‡å’Œè§†é¢‘ã€‚</p>
<p>å¯ä»¥é¢„è§ˆï¼ŒåŒå‡»å›¾ç‰‡ä¼šåœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€ï¼Œçœ‹å¾—æ›´æ¸…æ¥šã€‚</p>
<p>æƒ³ä¸‹è½½å“ªå¼ å°±å‹¾é€‰å“ªå¼ ï¼Œä¹Ÿå¯ä»¥å…¨é€‰ã€‚</p>
<p>å•å¼ å›¾ç›´æ¥ä¸‹è½½ï¼Œå¤šå¼ å›¾è‡ªåŠ¨æ‰“åŒ…æˆ ZIP æ–‡ä»¶ã€‚</p>
<p>å¯¹å¾®ä¿¡å…¬ä¼—å·åšäº†ç‰¹æ®Šä¼˜åŒ–ã€‚èƒ½çœ‹åˆ°æ–‡ç« æ ‡é¢˜ã€ä½œè€…ã€æè¿°è¿™äº›ä¿¡æ¯ã€‚</p>
<p>æ”¯æŒä¸­è‹±æ–‡åˆ‡æ¢ã€‚</p>
<p>å°±è¿™äº›ï¼Œæ²¡æœ‰å¤æ‚çš„è®¾ç½®ï¼Œæ‰“å¼€å°±èƒ½ç”¨ã€‚</p>
<h2 data-id="heading-3">å¼€å‘è¿‡ç¨‹è¿˜æŒºé¡º</h2>
<p>æŠ€æœ¯æ ˆç”¨çš„æ˜¯ Plasmo æ¡†æ¶ï¼Œè¿™ç©æ„ä¸“é—¨åšæµè§ˆå™¨æ’ä»¶çš„ã€‚</p>
<p>é…åˆ Reactã€TypeScriptã€Tailwind CSSï¼Œå¼€å‘ä½“éªŒå¾ˆä¸é”™ã€‚</p>
<p>çŠ¶æ€ç®¡ç†ç”¨ Zustandï¼Œè½»é‡å¥½ç”¨ã€‚</p>
<p>å›¾ç‰‡æ‰“åŒ…ç”¨ JSZipï¼Œç”Ÿæˆ ZIP æ–‡ä»¶å¾ˆå¿«ã€‚</p>
<h2 data-id="heading-4">æ”¯æŒçš„ç½‘ç«™æŒºå¤š</h2>
<p>é™¤äº†å¾®ä¿¡å…¬ä¼—å·ï¼Œå…¶ä»–ç½‘ç«™ä¹Ÿéƒ½èƒ½ç”¨ã€‚</p>
<p>æˆ‘æµ‹è¯•äº†æ˜é‡‘ã€çŸ¥ä¹ã€InfoQã€ç®€ä¹¦ã€CSDNã€åšå®¢å›­è¿™äº›æŠ€æœ¯ç¤¾åŒºï¼Œéƒ½æ²¡é—®é¢˜ã€‚</p>
<p>ç†è®ºä¸Šä»»ä½•ç½‘é¡µéƒ½èƒ½ç”¨ï¼Œå› ä¸ºæˆ‘åšçš„æ˜¯é€šç”¨æå–é€»è¾‘ã€‚åªè¦æ˜¯ img æ ‡ç­¾æˆ–è€… video æ ‡ç­¾ï¼Œéƒ½èƒ½è¯†åˆ«å‡ºæ¥ã€‚ï¼ˆæš‚æ—¶æ²¡æœ‰å¤„ç†é˜²çˆ¬é€»è¾‘ï¼‰</p>
<p>å¯¹å¾®ä¿¡å…¬ä¼—å·åšäº†é¢å¤–ä¼˜åŒ–ï¼Œå› ä¸ºè‡ªå·±å¹³æ—¶ä¹Ÿä¼šç”¨åˆ°ï¼Œæ‰€ä»¥å¤šèŠ±äº†ç‚¹å¿ƒæ€ã€‚</p>
<p>å…¶ä»–ç½‘ç«™æš‚æ—¶æ²¡åšç‰¹æ®Šå¤„ç†ï¼Œä½†åŸºæœ¬åŠŸèƒ½éƒ½æ˜¯æ­£å¸¸çš„ã€‚</p>
<h2 data-id="heading-5">ä¸ºå•¥åˆæ˜¯ä¸€ä¸ªå·¥å…·</h2>
<p>åšè¿™ä¸ªæ’ä»¶çš„æ—¶å€™ï¼Œæˆ‘æƒ³èµ·ä¹‹å‰çœ‹ Marc Lou çš„åˆ†äº«ã€‚</p>
<p>ä»–è¯´æœ€å¥½çš„äº§å“ï¼Œå¾€å¾€æ˜¯è§£å†³è‡ªå·±é—®é¢˜çš„äº§å“ã€‚</p>
<p>å› ä¸ºä½ å°±æ˜¯ç¬¬ä¸€ä¸ªç”¨æˆ·ï¼Œæœ€æ¸…æ¥šå“ªé‡Œå¥½ç”¨å“ªé‡Œä¸å¥½ç”¨ã€‚</p>
<p>ä¸éœ€è¦åšå¸‚åœºè°ƒç ”ï¼Œä¸éœ€è¦çŒœç”¨æˆ·æƒ³è¦ä»€ä¹ˆã€‚</p>
<p>ä½ è‡ªå·±ç”¨ç€èˆ’æœï¼Œäº§å“å°±ä¸ä¼šå¤ªå·®ã€‚</p>
<p>åšçš„è¿‡ç¨‹ä¸­æ²¡æƒ³è¿‡èƒ½ä¸èƒ½èµšé’±ï¼Œä¼šä¸ä¼šæœ‰å¾ˆå¤šäººç”¨ã€‚</p>
<p>å°±æ˜¯å•çº¯æƒ³è§£å†³è¿™ä¸ªç—’å¤„ã€‚</p>
<h2 data-id="heading-6">æ¥ä¸‹æ¥æƒ³åŠ ç‚¹å•¥</h2>
<p>ç›®å‰åŠŸèƒ½è¿˜æ¯”è¾ƒåŸºç¡€ï¼Œåé¢æƒ³åŠ ä¸€äº›æ–°ä¸œè¥¿ã€‚</p>
<p>æ¯”å¦‚æ‰¹é‡é‡å‘½åï¼ŒæŒ‰æ–‡ç« æ ‡é¢˜ã€æ—¥æœŸã€åºå·è¿™äº›è§„åˆ™è‡ªåŠ¨å‘½åæ–‡ä»¶ã€‚</p>
<p>åœ¨è€ƒè™‘æ”¯æŒæ›´å¤šæ ¼å¼ï¼Œä¸å…‰æ˜¯å›¾ç‰‡å’Œè§†é¢‘ï¼ŒPDFã€éŸ³é¢‘è¿™äº›ä¹Ÿèƒ½æå–ã€‚</p>
<p>ä¸è¿‡è¿™äº›éƒ½æ˜¯æƒ³æ³•ï¼Œä¼šä¸ä¼šåšã€ä»€ä¹ˆæ—¶å€™åšï¼Œè¿˜æ²¡ç¡®å®šã€‚</p>
<p>å…ˆæŠŠç›®å‰çš„é—®é¢˜è§£å†³äº†å†è¯´ã€‚</p>
<h2 data-id="heading-7">å¦‚ä½•ä½¿ç”¨</h2>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1585e810b32147d1914912475b88334a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSW1tZXJzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358077&amp;x-signature=vzLV%2FjeEgxKoqoxwr1DFwp8X5pE%3D" width="300" loading="lazy"/>
<p>GitHub:<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyaolifeng0629%2FPickPic" target="_blank" title="https://github.com/yaolifeng0629/PickPic" ref="nofollow noopener noreferrer"><code>https://github.com/yaolifeng0629/PickPic</code></a></p>
<p>è°·æ­Œæµè§ˆå™¨å•†åº—ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fchromewebstore.google.com%2Fdetail%2Fpickpic-one-click-downloa%2Fhfdohacifjijbgobekodafjpjghflemh" target="_blank" title="https://chromewebstore.google.com/detail/pickpic-one-click-downloa/hfdohacifjijbgobekodafjpjghflemh" ref="nofollow noopener noreferrer"><code>https://chromewebstore.google.com/detail/pickpic-one-click-downloa/hfdohacifjijbgobekodafjpjghflemh</code></a></p>
<p>å‹ç¼©åŒ…ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyaolifeng0629%2FPickPic%2Freleases%2Ftag%2Fv1.0.2" target="_blank" title="https://github.com/yaolifeng0629/PickPic/releases/tag/v1.0.2" ref="nofollow noopener noreferrer"><code>https://github.com/yaolifeng0629/PickPic/releases/tag/v1.0.2</code></a></p>
<p>æ¬¢è¿æ Issue å’Œ PRï¼Œæœ‰æƒ³æ³•å¯ä»¥ä¸€èµ·è®¨è®ºã€‚</p>
<p>ä¹Ÿæ¬¢è¿ Star æ”¯æŒä¸€ä¸‹ã€‚</p>
<p>é¡¹ç›®è¿˜åœ¨æ—©æœŸé˜¶æ®µï¼Œè‚¯å®šæœ‰ä¸å®Œå–„çš„åœ°æ–¹ã€‚</p>
<p>ä½†æˆ‘ä¼šæŒç»­ç»´æŠ¤ï¼Œé‡åˆ°é—®é¢˜ä¼šå°½å¿«ä¿®å¤ã€‚</p>
<h2 data-id="heading-8">å¼€å‘è¿‡ç¨‹å¼€æº</h2>
<p>å¯¹äº†ï¼Œè¿™ä¸ªé¡¹ç›®ä» Plan åˆ° Task å†åˆ° Implementï¼Œæ¯ä¸ªé˜¶æ®µæˆ‘éƒ½å¼€æºå‡ºæ¥äº†ã€‚</p>
<p>åŒ…æ‹¬æœ€åˆçš„æƒ³æ³•ã€ä»»åŠ¡æ‹†è§£ã€å…·ä½“å®ç°ï¼Œç”šè‡³åŸå‹è®¾è®¡éƒ½åœ¨ GitHub ä»“åº“é‡Œã€‚</p>
<p>æƒ³çœ‹å®Œæ•´å¼€å‘è¿‡ç¨‹çš„å°ä¼™ä¼´ï¼Œå¯ä»¥å»ä»“åº“ç¿»ä¸€ç¿»ã€‚</p>
<p>è¯´ä¸å®šèƒ½ç»™ä½ è‡ªå·±åšé¡¹ç›®æä¾›ç‚¹æ€è·¯ã€‚</p>
<p>é¡ºä¾¿ç‚¹ä¸ª Star æ”¯æŒä¸€ä¸‹ï¼Œæ„Ÿè°¢ï¼</p>
<h2 data-id="heading-9">ä¸€ç‚¹å°æ„Ÿæ‚Ÿ</h2>
<p>åšè¿™ä¸ªæ’ä»¶è®©æˆ‘æƒ³æ˜ç™½ä¸€ä»¶äº‹ã€‚</p>
<p>ä¸æ˜¯æ‰€æœ‰é¡¹ç›®éƒ½è¦è¿½æ±‚å•†ä¸šåŒ–ï¼Œä¸æ˜¯æ‰€æœ‰äº§å“éƒ½è¦æƒ³ç€èµšé’±ã€‚</p>
<p>æœ‰æ—¶å€™å°±æ˜¯æƒ³è§£å†³ä¸€ä¸ªå°é—®é¢˜ï¼Œè®©è‡ªå·±çš„ç”Ÿæ´»æ–¹ä¾¿ä¸€ç‚¹ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹æœ¬èº«å°±å¾ˆæœ‰æ„æ€ã€‚</p>
<p>è€Œä¸”ä½ çœŸå¿ƒè§£å†³äº†è‡ªå·±çš„é—®é¢˜ï¼Œäº§å“è‡ªç„¶ä¼šæœ‰æ¸©åº¦ã€‚</p>
<p>åˆ«äººç”¨èµ·æ¥ä¹Ÿèƒ½æ„Ÿå—åˆ°è¿™ç§çœŸå®ã€‚</p>
<p>Marc Lou è¯´å¥½å¥‡å¿ƒæ‰æ˜¯åˆ›ä¸šçš„èµ·ç‚¹ï¼Œæˆ‘è§‰å¾—è¯´å¾—ç‰¹åˆ«å¯¹ã€‚</p>
<p>å…ˆæŠŠç—’å¤„æŒ äº†ï¼Œè‡³äºèƒ½ä¸èƒ½å˜æˆç”Ÿæ„ï¼Œé‚£æ˜¯åé¢çš„äº‹ã€‚</p>
<hr/>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyaolifeng0629%2FPickPic" target="_blank" title="https://github.com/yaolifeng0629/PickPic" ref="nofollow noopener noreferrer"><code>https://github.com/yaolifeng0629/PickPic</code></a></p>
<p>æ¬¢è¿è¯•ç”¨ï¼Œæ¬¢è¿åé¦ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœ¬å‘¨ 6 ä¸ªæœ€ç«ç«ç«ç« GitHub é¡¹ç›®ï¼ŒAI æ€ç–¯äº†ã€‚]]></title>    <link>https://juejin.cn/post/7570630923710267444</link>    <guid>https://juejin.cn/post/7570630923710267444</guid>    <pubDate>2025-11-10T05:46:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570630923710267444" data-draft-id="7570659828810170402" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœ¬å‘¨ 6 ä¸ªæœ€ç«ç«ç«ç« GitHub é¡¹ç›®ï¼ŒAI æ€ç–¯äº†ã€‚"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2025-11-10T05:46:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é€›é€›GitHub"/> <meta itemprop="url" content="https://juejin.cn/user/1442202996186093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœ¬å‘¨ 6 ä¸ªæœ€ç«ç«ç«ç« GitHub é¡¹ç›®ï¼ŒAI æ€ç–¯äº†ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1442202996186093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é€›é€›GitHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T05:46:06.000Z" title="Mon Nov 10 2025 05:46:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">01ã€DeepCodeï¼šæ™ºèƒ½ä½“ç¼–ç¨‹å¹³å°</h2>
<p>DeepCode ç”±é¦™æ¸¯å¤§å­¦æ•°æ®æ™ºèƒ½å®éªŒå®¤å¼€å‘ï¼Œç°åœ¨æœ‰ 1 ä¸‡ Star äº†ã€‚</p>
<p>å®ƒé‡‡ç”¨å¤šæ™ºèƒ½ä½“ç³»ç»Ÿæ¶æ„ï¼Œèƒ½å¤Ÿç†è§£å¤æ‚éœ€æ±‚ï¼Œå¦‚ç ”ç©¶è®ºæ–‡æˆ–è‡ªç„¶è¯­è¨€æè¿°ï¼Œå¹¶é€šè¿‡æ™ºèƒ½ä½“åä½œè‡ªåŠ¨ç”Ÿæˆé«˜è´¨é‡çš„ã€å¯è¿è¡Œçš„ä»£ç ã€‚</p>
<p>æ¯”å¦‚ç”¨æˆ·ä¸Šä¼ ä¸€ç¯‡ ICML è®ºæ–‡ï¼ŒDeepCode èƒ½è‡ªåŠ¨è§£æå…¶ä¸­çš„ç®—æ³•ï¼Œç”Ÿæˆ Python å®ç°ï¼Œå¹¶é™„å¸¦æµ‹è¯•ç”¨ä¾‹å’Œæ–‡æ¡£ã€‚</p>
<p>å®ƒæœ‰ä¸€ä¸ª<strong>ç½‘é¡µç•Œé¢</strong>ï¼Œæ”¯æŒå¯è§†åŒ–äº¤äº’ä½“éªŒã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fcef5060fb7f4bafb047dcddd146a25e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358366&amp;x-signature=t%2BGGjHCa7D6smTa3Vml9W66qs5o%3D" alt="image.png" loading="lazy"/></p>
<p>ä¹Ÿæœ‰ä¸€ä¸ª<strong>å‘½ä»¤è¡Œç•Œé¢</strong>ï¼Œå¯ä»¥åŸºäºç»ˆç«¯å¼€å‘ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab6f66bff61740548641a50865bf79f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358366&amp;x-signature=Tr9HNNJYbe7JNK5j8mXha7UwZkc%3D" alt="image.png" loading="lazy"/></p>
<p>é™¤äº†å­¦æœ¯è®ºæ–‡ä¸­æå–ç®—æ³•å¹¶å®ç°ã€‚è¿˜æ”¯æŒÂ Text2WebÂ åŠŸèƒ½å¯ä»¥å°†æ–‡æœ¬æè¿°è½¬åŒ–ä¸ºå®Œæ•´å‰ç«¯ä»£ç ã€‚</p>
<p>Text2BackendÂ åŠŸèƒ½å¯ä»¥æ ¹æ®ç®€å•è¾“å…¥ç”Ÿæˆé«˜æ•ˆåç«¯ä»£ç ã€‚</p>
<p>é¡¹ç›®åœ¨ OpenAI çš„ PaperBench åŸºå‡†æµ‹è¯•ä¸­è¡¨ç°ä¼˜å¼‚ï¼Œç”šè‡³è¶…è¶Šäº†äººç±»ä¸“å®¶å’Œå•†ä¸šä»£ç ä»£ç†ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/HKUDS/DeepCode</span>
</code></pre>
<h2 data-id="heading-1">02ã€Strixï¼šå¼€æº AI é»‘å®¢</h2>
<p>è¿™ä¸ªå¼€æºé¡¹ç›®å…¶å®æ˜¯ä¸€ä¸ªå®‰å…¨æµ‹è¯•æ¡†æ¶ï¼Œä½¿ç”¨ AI æ™ºèƒ½ä½“åƒçœŸå®é»‘å®¢ä¸€æ ·åŠ¨æ€åˆ†æåº”ç”¨æ¼æ´ã€‚</p>
<p>Strix çš„ç‰¹è‰²æ˜¯ä¼šå®é™…è¿è¡Œè¦æµ‹è¯•çš„ä»£ç ï¼Œåƒæ˜¯æ¨¡æ‹ŸçœŸå®é»‘å®¢è¡Œä¸ºæ¥æ”»å‡»ç½‘ç«™ï¼Œæœ€åå‘ç°å®‰å…¨æ¼æ´ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bd545ef4012471d98942eed7e36d50d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358366&amp;x-signature=EBYNRPJaHkJQrErq2SmnLeEQ7Q8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ä¸ªå¼€æºé¡¹ç›®é¡¹ç›®å†…ç½®å¤šç§å·¥å…·æ¨¡å—ï¼Œä¾‹å¦‚ HTTP ä»£ç†ç”¨äºè¯·æ±‚æ“çºµã€æµè§ˆå™¨è‡ªåŠ¨åŒ–æµ‹è¯• XSS/CSRFã€Python è¿è¡Œæ—¶ç”¨äºè‡ªå®šä¹‰æ¼æ´å¼€å‘ã€‚</p>
<p>å®ƒä¸ä»…è¯†åˆ«æ½œåœ¨æ¼æ´ï¼Œè¿˜ä¼šå°è¯•åˆ©ç”¨ SQL æ³¨å…¥æˆ–æƒé™æå‡ï¼Œç¡®ä¿é—®é¢˜çœŸå®å­˜åœ¨ã€‚æ‰€æœ‰æ“ä½œåœ¨éš”ç¦»çš„ Docker ç¯å¢ƒä¸­è¿›è¡Œï¼Œä¿è¯æµ‹è¯•å®‰å…¨æ€§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7aab5a1cc6064ea28e3865d41defd066~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358366&amp;x-signature=WB3TMQ3uv11cJyqGAo0ygtaF3So%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/usestrix/strix</span>
</code></pre>
<h2 data-id="heading-2">03ã€LocalAIï¼šè‡ªå·±ç”µè„‘ä¸Šç”¨ AI</h2>
<p>LocalAI è¿™ä¸ªå¼€æºé¡¹ç›®çœ‹åå­—å°±èƒ½çŒœå‡ºæ¥ã€‚è®©ä½ èƒ½åœ¨ä¸ªäººç”µè„‘æˆ–è‡ªå·±çš„æœåŠ¡å™¨ä½æˆæœ¬è¿è¡Œ AI æ¨¡å‹ã€‚</p>
<p>ç°åœ¨å¿« 4 ä¸‡æ˜Ÿæ˜Ÿäº†ã€‚</p>
<p>å¯æ‰©å±•æ€§å¾ˆå¼ºï¼Œä½ å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶è‡ªå®šä¹‰æ¨¡å‹ï¼Œæ”¯æŒæ–‡å­—ç”Ÿæˆæ¨¡å‹ã€éŸ³é¢‘ã€è§†é¢‘ã€å›¾åƒã€è¯­éŸ³å…‹éš†ç­‰æ¨¡å‹ï¼Œè€Œä¸”è¿˜æ”¯æŒ WebUI ï¼Œå¾ˆæ–¹ä¾¿ç®¡ç†ä½ çš„æœ¬åœ°æ¨¡å‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd2e598c43ac4fb1b568d63faf016fcf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358366&amp;x-signature=OCW4t9GrFo6HXXjEanR%2F3Oy6LAE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®ƒå®ç°äº†ä¸ OpenAIã€Anthropic ç­‰å•†ä¸š API å…¼å®¹çš„ REST æ¥å£ï¼Œæ„å‘³ç€ç°æœ‰åº”ç”¨åªéœ€ä¿®æ”¹ API ç«¯ç‚¹å³å¯æ— ç¼åˆ‡æ¢ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27e96d07c84b4ae0a1c13e080d6dbea8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358366&amp;x-signature=jw7KiuHehhpnIJitYc6DNsoRAOo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ddf05540f3ca4fe88696125adbc3d1ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358366&amp;x-signature=uNaiXMi7LMRYqW9BJdB9OzAoC04%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/deb3ec5a616f42b593c667d27c5a3acd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358366&amp;x-signature=OunphN4%2Bsp%2FoA3D%2Bz1UsC4VjlHw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09991f474a714808aa11693eac5df10f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358366&amp;x-signature=Rh9RHd2oeog4KQueA01%2B5eE22Js%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c4d50e0a000d4769877d0464de66b69c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358366&amp;x-signature=XMCJPRoaXzfnFmVQtg6XBItmJBk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/mudler/LocalAI</span>
</code></pre>
<h2 data-id="heading-3">04ã€Skyvernï¼šè‡ªåŠ¨åŒ–æµè§ˆå™¨å·¥ä½œæµ</h2>
<p>Skyvern å®ƒåˆ©ç”¨ AI å¤§æ¨¡å‹å’Œè®¡ç®—æœºè§†è§‰è‡ªåŠ¨åŒ–æµè§ˆå™¨æ“ä½œã€‚</p>
<p>å¯¹äºéœ€è¦å¤„ç†ç½‘é¡µä»»åŠ¡çš„ç”¨æˆ·ï¼Œè¿™æˆ–è®¸èƒ½èŠ‚çœå¤§é‡æ—¶é—´ã€‚å’Œæˆ‘ä¹‹å‰ä»‹ç»çš„ä¸€äº›æµè§ˆå™¨è‡ªåŠ¨åŒ–å¼€æºé¡¹ç›®ä¸åŒï¼Œè¿™ä¸ªÂ Skyvern æ˜¯åŸºäºå±å¹•å…ƒç´ äº¤äº’çš„ï¼Œç”¨è§†è§‰ AI å¤§æ¨¡å‹ç†è§£ç½‘é¡µå†…å®¹ï¼Œæ¨¡æ‹Ÿäººç±»æ“ä½œï¼Œæ¯”å¦‚ç‚¹å‡»ã€æ»šåŠ¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac680ba5f6954a4fb2881257d9c2433e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358366&amp;x-signature=qYlnccjCI43IMjzlebiNe8YU%2FH8%3D" alt="image.png" loading="lazy"/></p>
<p>ç³»ç»Ÿé‡‡ç”¨å¤šæ™ºèƒ½ä½“åä½œçš„æ€è·¯ï¼šä¸€ä¸ªæ™ºèƒ½ä½“åˆ†æç›®æ ‡ï¼Œå¦ä¸€ä¸ªæ‰§è¡ŒåŠ¨ä½œã€‚å…±åŒå®Œæˆä½ ä¸‹è¾¾çš„ä»»åŠ¡ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">å¼€æºåœ°å€ï¼šhttps://github.com/Skyvern-AI/skyvern
</code></pre>
<h2 data-id="heading-4">05ã€NocoBaseï¼šåŸºäº AI çš„æ— ä»£ç å¹³å°</h2>
<p>è¿™ä¸ªå¼€æºé¡¹ç›®è‡ªç§°æ˜¯æœ€å¯æ‰©å±•çš„ AI é©±åŠ¨æ— ä»£ç å¹³å°ï¼Œä½ å¯ä»¥é€šè¿‡é…ç½®æ¥æ­å»ºåº”ç”¨ã€‚</p>
<p>æ€è·¯æ˜¯åŸºäºæ•°æ®æ¨¡å‹é©±åŠ¨åº”ç”¨æ„å»ºï¼Œè€Œä¸æ˜¯å›ºå®šè¡¨å•ã€‚</p>
<p>ä½ å¯åœ¨ä½¿ç”¨æ¨¡å¼ä¸‹æ‹–æ‹–æ‹½æ‹½ç»„è£…é¡µé¢ï¼Œå¹¶åœ¨é…ç½®æ¨¡å¼ä¸‹è°ƒæ•´æ•°æ®å…³ç³»å’Œæƒé™ã€‚è¿™ä¸ªå¼€æºå¹³å°å†…ç½®äº† AI èƒ½åŠ›ï¼Œå¯ä»¥æŠŠ AI åµŒå…¥ä¸šåŠ¡æµç¨‹ï¼Œå®ç°äººæœºåä½œã€‚ä¾‹å¦‚ï¼Œæ­å»ºä¸€ä¸ªå®¢æˆ·ç®¡ç†ç³»ç»Ÿï¼ŒAI è‡ªåŠ¨å¤„ç†æ•°æ®åˆ†ç±»ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/nocobase/nocobase</span>
</code></pre>
<h2 data-id="heading-5">06ã€Agent Lightning</h2>
<p>Agent Lightning æ˜¯å¾®è½¯å¼€å‘çš„å¼€æºæ¡†æ¶ï¼Œå®ƒèƒ½è®©ç”¨æˆ·èƒ½ç”¨å¼ºåŒ–å­¦ä¹ ç­‰æŠ€æœ¯ä¼˜åŒ–ä»»ä½• AI æ™ºèƒ½ä½“ç†ï¼Œæ— éœ€é‡å†™ä»£ç ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2327be03d8904d90b14318e0c6e4b3f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358366&amp;x-signature=Ty7woUq3iTem7ULzcD0ndpEEAAI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®ƒé€šè¿‡å‘å°„äº‹ä»¶çš„æ–¹å¼æ”¶é›†æ™ºèƒ½ä½“è¿è¡Œæ•°æ®ï¼Œæ¯”å¦‚æç¤ºã€å·¥å…·è°ƒç”¨ï¼Œå­˜å‚¨åˆ° LightningStoreï¼Œç„¶ååº”ç”¨ç®—æ³•ï¼ˆå¦‚APOï¼‰ç”Ÿæˆä¼˜åŒ–èµ„æºï¼ˆå¦‚æ–°æç¤ºæ¨¡æ¿ï¼‰ã€‚</p>
<p>æ¡†æ¶æ”¯æŒå¤šä»£ç†ç³»ç»Ÿé€‰æ‹©æ€§ä¼˜åŒ–ï¼Œå¹¶æä¾›Trainerç®¡ç†è®­ç»ƒå¾ªç¯ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·å¯ç”¨å…¶æå‡èŠå¤©ä»£ç†çš„SQLç”Ÿæˆå‡†ç¡®ç‡ã€‚é¡¹ç›®å¼ºè°ƒæ˜“ç”¨æ€§ï¼šåªéœ€æ·»åŠ å‡ è¡Œè¾…åŠ©ä»£ç å³å¯é›†æˆã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/microsoft/agent-lightning</span>
</code></pre>
<h2 data-id="heading-6">07ã€Glowï¼šåœ¨å‘½ä»¤è¡Œä¸­ä¼˜é›…æ¸²æŸ“ Markdown</h2>
<p>Glowæ˜¯ä¸€ä¸ªç”¨ Go ç¼–å†™çš„å¼€æºå‘½ä»¤è¡Œå·¥å…·ï¼Œä¸“ä¸ºåœ¨ç»ˆç«¯ä¸­ä¼˜é›…æ˜¾ç¤º Markdown è®¾è®¡ã€‚å®ƒä¸åƒç®€å•è§£æå™¨ï¼Œè€Œæ˜¯å®Œæ•´æ¸²æŸ“å¼•æ“ï¼Œèƒ½å¤„ç†å¤æ‚å…ƒç´ å¦‚ä»£ç å—ã€æ•°å­¦å…¬å¼ã€‚ç»ˆç«¯æ˜¾ç¤º Markdown ä¸ç”¨å¤´ç–¼äº†ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/charmbracelet/glow</span>
</code></pre>
<p>æœ¬å‘¨è¿˜æœ‰å…¶å®ƒçƒ­é—¨çš„å¼€æºé¡¹ç›®ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢è¿™å¼ å›¾ä¸€è§ˆã€‚å¾ˆå¤šé¡¹ç›®é€›é€›ä¹‹å‰å‘è¿‡å•ç‹¬çš„æ–‡ç« ä»‹ç»è¿‡ï¼Œæ„Ÿå…´è¶£çš„å»ç¿»ä¸€ç¿»å§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5cb37414a7b84c6cbaa76edf63df2606~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358366&amp;x-signature=0Z6%2Bg7c%2BU86fBjN4r4wx7AzH%2Bfc%3D" alt="å›¾ç‰‡" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Elasticsearchï¼šå¦‚ä½•ä¸º Elastic Stack éƒ¨ç½² E5 æ¨¡å‹ - ä¸‹è½½åŠéš”ç¦»ç¯å¢ƒ]]></title>    <link>https://juejin.cn/post/7570339961909264427</link>    <guid>https://juejin.cn/post/7570339961909264427</guid>    <pubDate>2025-11-10T06:10:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570339961909264427" data-draft-id="7570500819888865323" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Elasticsearchï¼šå¦‚ä½•ä¸º Elastic Stack éƒ¨ç½² E5 æ¨¡å‹ - ä¸‹è½½åŠéš”ç¦»ç¯å¢ƒ"/> <meta itemprop="keywords" content="Elasticsearch"/> <meta itemprop="datePublished" content="2025-11-10T06:10:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Elasticsearch"/> <meta itemprop="url" content="https://juejin.cn/user/2612095360441448"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Elasticsearchï¼šå¦‚ä½•ä¸º Elastic Stack éƒ¨ç½² E5 æ¨¡å‹ - ä¸‹è½½åŠéš”ç¦»ç¯å¢ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612095360441448/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Elasticsearch
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:10:45.000Z" title="Mon Nov 10 2025 06:10:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/899034501fa54e4a91b8d14c64bf0807~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359844&amp;x-signature=FA%2F5NLhcOGVOpPWcUxH7pY3BXw0%3D" alt="" loading="lazy"/></p>
<p>ä»åŒå‘ç¼–ç å™¨è¡¨ç¤ºï¼ˆEmbeddings from bidirectional Encoder Representationsï¼Œç®€ç§° E5ï¼‰æ˜¯ä¸€ç§è‡ªç„¶è¯­è¨€å¤„ç†æ¨¡å‹ï¼Œå®ƒå¯ä»¥é€šè¿‡ä½¿ç”¨ç¨ å¯†å‘é‡è¡¨ç¤ºæ¥æ‰§è¡Œå¤šè¯­è¨€è¯­ä¹‰æœç´¢ã€‚è¯¥æ¨¡å‹æ¨èç”¨äºéè‹±è¯­æ–‡æ¡£å’ŒæŸ¥è¯¢ã€‚å¦‚æœä½ æƒ³å¯¹è‹±æ–‡æ–‡æ¡£æ‰§è¡Œè¯­ä¹‰æœç´¢ï¼Œå¯ä»¥ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fexplore-analyze%2Fmachine-learning%2Fnlp%2Fml-nlp-elser" title="https://www.elastic.co/docs/explore-analyze/machine-learning/nlp/ml-nlp-elser" target="_blank" ref="nofollow noopener noreferrer">ELSER</a> æ¨¡å‹ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fsolutions%2Fsearch%2Fsemantic-search" title="https://www.elastic.co/docs/solutions/search/semantic-search" target="_blank" ref="nofollow noopener noreferrer">è¯­ä¹‰æœç´¢</a>æ ¹æ®ä¸Šä¸‹æ–‡å«ä¹‰å’Œç”¨æˆ·æ„å›¾æä¾›æœç´¢ç»“æœï¼Œè€Œä¸æ˜¯ä»…ä»…åŒ¹é…å…³é”®è¯ã€‚</p>
<p>E5 æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼š</p>
<ol>
<li>
<p><strong>è·¨å¹³å°ç‰ˆæœ¬</strong>ï¼šå¯åœ¨ä»»ä½•ç¡¬ä»¶ä¸Šè¿è¡Œ</p>
</li>
<li>
<p><strong>IntelÂ® ç¡…ä¼˜åŒ–ç‰ˆæœ¬</strong>ï¼šé’ˆå¯¹ Intel ç¡¬ä»¶ä¼˜åŒ–</p>
</li>
</ol>
<p>åœ¨ <strong>Model Management &gt; Trained Models</strong> é¡µé¢ä¸Šï¼Œå¯ä»¥æŸ¥çœ‹æ ¹æ®é›†ç¾¤ç¡¬ä»¶æ¨èéƒ¨ç½²çš„ E5 ç‰ˆæœ¬ã€‚ä¸è¿‡ï¼Œæ¨èçš„ä½¿ç”¨æ–¹å¼æ˜¯é€šè¿‡ <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fapi%2Fdoc%2Felasticsearch%2Foperation%2Foperation-inference-put-elasticsearch" title="https://www.elastic.co/docs/api/doc/elasticsearch/operation/operation-inference-put-elasticsearch" target="_blank" ref="nofollow noopener noreferrer">inference API</a> ä½œä¸ºæœåŠ¡</strong> ä½¿ç”¨ E5ï¼Œè¿™æ ·å¯ä»¥æ›´æ–¹ä¾¿åœ°ä¸‹è½½å’Œéƒ¨ç½²æ¨¡å‹ï¼Œæ— éœ€æ‰‹åŠ¨é€‰æ‹©ä¸åŒç‰ˆæœ¬ã€‚</p>
<p>å¦‚éœ€æ›´å¤šä¿¡æ¯ï¼ŒåŒ…æ‹¬è®¸å¯è¯´æ˜ï¼Œå¯ä»¥å‚è€ƒ HuggingFace ä¸Šçš„ <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2Felastic%2Fmultilingual-e5-small" title="https://huggingface.co/elastic/multilingual-e5-small" target="_blank" ref="nofollow noopener noreferrer">multilingual-e5-small</a></strong> å’Œ <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2Felastic%2Fmultilingual-e5-small-optimized" title="https://huggingface.co/elastic/multilingual-e5-small-optimized" target="_blank" ref="nofollow noopener noreferrer">multilingual-e5-small-optimized</a></strong> æ¨¡å‹å¡ã€‚</p>
<h2 data-id="heading-0">è¦æ±‚</h2>
<p>è¦ä½¿ç”¨ E5ï¼Œä½ å¿…é¡»æ‹¥æœ‰ç”¨äº semantic search çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fcn%2Fsubscriptions" title="https://www.elastic.co/cn/subscriptions" target="_blank" ref="nofollow noopener noreferrer">ç›¸åº”è®¢é˜…ç­‰çº§</a>æˆ–å·²æ¿€æ´»è¯•ç”¨æœŸã€‚</p>
<p>å»ºè®®ä¸ºä½ çš„ E5 éƒ¨ç½²å¯ç”¨ trained model autoscalingã€‚å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fdeploy-manage%2Fautoscaling%2Ftrained-model-autoscaling" title="https://www.elastic.co/docs/deploy-manage/autoscaling/trained-model-autoscaling" target="_blank" ref="nofollow noopener noreferrer">Trained model autoscaling</a> äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p>
<h2 data-id="heading-1">ä¸‹è½½å¹¶éƒ¨ç½² E5</h2>
<p>ä¸‹è½½å¹¶éƒ¨ç½² E5 æœ€ç®€å•ä¸”æ¨èçš„æ–¹å¼æ˜¯ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fapi%2Fdoc%2Felasticsearch%2Fgroup%2Fendpoint-inference" title="https://www.elastic.co/docs/api/doc/elasticsearch/group/endpoint-inference" target="_blank" ref="nofollow noopener noreferrer">inference API</a>ã€‚</p>
<p>1ï¼‰åœ¨ Kibana ä¸­ï¼Œè¿›å…¥ Dev Consoleã€‚<br/>
2ï¼‰é€šè¿‡è¿è¡Œä»¥ä¸‹ API è¯·æ±‚ï¼Œä½¿ç”¨ elasticsearch æœåŠ¡åˆ›å»ºä¸€ä¸ª inference endpointï¼š</p>
<pre><code class="hljs language-bash" lang="bash">`

1.  PUT _inference/text_embedding/my-e5-model
2.  {
3.    <span class="hljs-string">"service"</span>: <span class="hljs-string">"elasticsearch"</span>,
4.    <span class="hljs-string">"service_settings"</span>: {
5.      <span class="hljs-string">"num_allocations"</span>: 1,
6.      <span class="hljs-string">"num_threads"</span>: 1,
7.      <span class="hljs-string">"model_id"</span>: <span class="hljs-string">".multilingual-e5-small"</span>
8.    }
9.  }

`AIå†™ä»£ç 
</code></pre>
<p>è¯¥ API è¯·æ±‚ä¼šè‡ªåŠ¨å¯åŠ¨æ¨¡å‹ä¸‹è½½ï¼Œç„¶åéƒ¨ç½²æ¨¡å‹ã€‚</p>
<p>å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fapi%2Fdoc%2Felasticsearch%2Foperation%2Foperation-inference-put-elasticsearch" title="https://www.elastic.co/docs/api/doc/elasticsearch/operation/operation-inference-put-elasticsearch" target="_blank" ref="nofollow noopener noreferrer">elasticsearch inference service</a> æ–‡æ¡£äº†è§£å¯ç”¨è®¾ç½®çš„æ›´å¤šä¿¡æ¯ã€‚</p>
<p>åœ¨åˆ›å»º E5 inference endpoint åï¼Œå®ƒå³å¯ç”¨äº semantic searchã€‚åœ¨ Elastic Stack ä¸­æ‰§è¡Œ semantic search æœ€ç®€å•çš„æ–¹æ³•æ˜¯<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fsolutions%2Fsearch%2Fsemantic-search%2Fsemantic-search-semantic-text" title="https://www.elastic.co/docs/solutions/search/semantic-search/semantic-search-semantic-text" target="_blank" ref="nofollow noopener noreferrer">éµå¾ª semantic_text workflow</a>ã€‚</p>
<h2 data-id="heading-2">ä¸‹è½½å¹¶éƒ¨ç½² E5 çš„æ›¿ä»£æ–¹æ³•</h2>
<p>ä½ ä¹Ÿå¯ä»¥ä» Trained models é¡µé¢ã€Search &gt; Indicesï¼Œæˆ–é€šè¿‡åœ¨ Dev Console ä¸­ä½¿ç”¨ trained models API ä¸‹è½½å¹¶éƒ¨ç½² E5 æ¨¡å‹ã€‚</p>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ¨èä½¿ç”¨é’ˆå¯¹ Intel å’Œ Linux ä¼˜åŒ–çš„æ¨¡å‹ï¼Œå»ºè®®ä¸‹è½½å¹¶éƒ¨ç½²è¯¥ç‰ˆæœ¬ã€‚</p>
</blockquote>
<h3 data-id="heading-3">ä½¿ç”¨ Trained Models é¡µé¢è¿›è¡Œä¸‹è½½</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7abd237f70354f7687d7b343e031d4a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359844&amp;x-signature=UhGJV4N9CNzoOw6QoZU%2FcxChkSc%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/967d1f30e4c04961a2492ee98ab8eb59~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359844&amp;x-signature=UddlXsEWrnQR%2BL8b3EEMqDjUvVE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0df4fb7c4a8442b9736a4e9b37a1759~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359844&amp;x-signature=J%2FUnyXcrPTHo92Xv2xYRnfY9xYw%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed039fbefad84592806555059f775ab1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359844&amp;x-signature=jDIR354s7KPbuV5XfAv9A5v70EY%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„å‘½ä»¤æ¥å¸è½½å·²ç»å®‰è£…å¥½çš„æ¨¡å‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">`DELETE _ml/trained_models/.multilingual-e5-small?<span class="hljs-attr">force</span>=<span class="hljs-literal">true</span>`AIå†™ä»£ç 
</code></pre>
<p>ä¸€æ—¦è¢«å¸è½½ï¼Œå°±ä¼šæ¢å¤åˆ°ä¹‹å‰çš„æ ·å­ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d2a00cd35174771b9c3763faa7eccd1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359844&amp;x-signature=D7XwSdYkvijgOhQexh%2BUYYo5RKY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">åœ¨ Dev Console ä¸­ä½¿ç”¨ trained models API</h3>
<p>1ï¼‰åœ¨ Kibana ä¸­ï¼Œè¿›å…¥ Dev Consoleã€‚<br/>
2ï¼‰é€šè¿‡è¿è¡Œä»¥ä¸‹ API è°ƒç”¨åˆ›å»º E5 æ¨¡å‹é…ç½®ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">`

<span class="hljs-bullet">1.</span>  PUT <span class="hljs-emphasis">_ml/trained_</span>models/.multilingual-e5-small
<span class="hljs-bullet">2.</span>  {
<span class="hljs-bullet">3.</span>    "input": {
<span class="hljs-bullet">4.</span>      "field<span class="hljs-emphasis">_names": [
5.        "text_</span>field"
<span class="hljs-bullet">6.</span>      ]
<span class="hljs-bullet">7.</span>    }
<span class="hljs-bullet">8.</span>  }

`AIå†™ä»£ç 
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fddc057fd79f425ea5b2dbff3fde99f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359844&amp;x-signature=fWEUEMa9V2M9G%2Bz7%2BDZIfdVmpu8%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœæ¨¡å‹å°šæœªä¸‹è½½ï¼Œè¯¥ API è°ƒç”¨ä¼šè‡ªåŠ¨å¯åŠ¨æ¨¡å‹ä¸‹è½½ã€‚</p>
<p>3ï¼‰ä½¿ç”¨ start trained model deployment API å¹¶æä¾› deployment ID æ¥éƒ¨ç½²æ¨¡å‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">`POST _ml/trained_models/.multilingual-e5-small/deployment/_start?deployment_id=for_search`AIå†™ä»£ç 
</code></pre>
<h2 data-id="heading-5">åœ¨éš”ç¦»ç¯å¢ƒä¸­éƒ¨ç½² E5 æ¨¡å‹</h2>
<p>å¦‚æœä½ æƒ³åœ¨éš”ç¦»ç¯å¢ƒä¸­å®‰è£… E5ï¼Œä½ æœ‰ä»¥ä¸‹é€‰é¡¹ï¼š</p>
<ul>
<li>
<p>å°†æ¨¡å‹æ–‡ä»¶æ”¾å…¥æ‰€æœ‰ master-eligible èŠ‚ç‚¹ config ç›®å½•å†…çš„æŸä¸ªç›®å½•ä¸­ï¼ˆé€‚ç”¨äº multilingual-e5-small å’Œ multilingual-e5-small-linux-x86-64ï¼‰</p>
</li>
<li>
<p>ä½¿ç”¨ HuggingFace å®‰è£…æ¨¡å‹ï¼ˆä»…é€‚ç”¨äº multilingual-e5-small æ¨¡å‹ï¼‰</p>
</li>
</ul>
<h3 data-id="heading-6">æ¨¡å‹æ–‡ä»¶</h3>
<p>å¯¹äº multilingual-e5-small æ¨¡å‹ï¼Œä½ çš„ç³»ç»Ÿä¸­éœ€è¦ä»¥ä¸‹æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">`

<span class="hljs-number">1.</span>  https:<span class="hljs-comment">//ml-models.elastic.co/multilingual-e5-small.metadata.json</span>
<span class="hljs-number">2.</span>  https:<span class="hljs-comment">//ml-models.elastic.co/multilingual-e5-small.pt</span>
<span class="hljs-number">3.</span>  https:<span class="hljs-comment">//ml-models.elastic.co/multilingual-e5-small.vocab.json</span>

`AIå†™ä»£ç 
</code></pre>
<p>å¯¹äºä¼˜åŒ–ç‰ˆæœ¬ï¼Œä½ çš„ç³»ç»Ÿä¸­éœ€è¦ä»¥ä¸‹æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">`

<span class="hljs-number">1.</span>  https:<span class="hljs-comment">//ml-models.elastic.co/multilingual-e5-small_linux-x86_64.metadata.json</span>
<span class="hljs-number">2.</span>  https:<span class="hljs-comment">//ml-models.elastic.co/multilingual-e5-small_linux-x86_64.pt</span>
<span class="hljs-number">3.</span>  https:<span class="hljs-comment">//ml-models.elastic.co/multilingual-e5-small_linux-x86_64.vocab.json</span>

`AIå†™ä»£ç 
</code></pre>
<h3 data-id="heading-7">ä½¿ç”¨åŸºäºæ–‡ä»¶çš„è®¿é—®</h3>
<p>å¯¹äºåŸºäºæ–‡ä»¶çš„è®¿é—®ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p>
<ol>
<li>
<p>ä¸‹è½½<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fexplore-analyze%2Fmachine-learning%2Fnlp%2Fml-nlp-e5%23e5-model-artifacts" title="https://www.elastic.co/docs/explore-analyze/machine-learning/nlp/ml-nlp-e5#e5-model-artifacts" target="_blank" ref="nofollow noopener noreferrer">æ¨¡å‹æ–‡ä»¶</a>ã€‚</p>
</li>
<li>
<p>å°†æ–‡ä»¶æ”¾å…¥ Elasticsearch éƒ¨ç½²çš„ config ç›®å½•ä¸‹çš„ models å­ç›®å½•ä¸­ã€‚</p>
</li>
<li>
<p>é€šè¿‡åœ¨ config/elasticsearch.yml æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹è¡Œï¼Œå°†ä½ çš„ Elasticsearch éƒ¨ç½²æŒ‡å‘æ¨¡å‹ç›®å½•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">`xpack.ml.model_repository: file://<span class="hljs-variable">${path.home}</span>/config/models/`AIå†™ä»£ç 
</code></pre>
</li>
<li>
<p>åœ¨æ‰€æœ‰ master-eligible èŠ‚ç‚¹é‡å¤æ­¥éª¤ 2 å’Œæ­¥éª¤ 3ã€‚</p>
</li>
<li>
<p>é€ä¸€<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fdeploy-manage%2Fmaintenance%2Fstart-stop-services%2Ffull-cluster-restart-rolling-restart-procedures%23restart-cluster-rolling" title="https://www.elastic.co/docs/deploy-manage/maintenance/start-stop-services/full-cluster-restart-rolling-restart-procedures#restart-cluster-rolling" target="_blank" ref="nofollow noopener noreferrer">é‡å¯</a> master-eligible èŠ‚ç‚¹ã€‚</p>
</li>
<li>
<p>ä»ä¸»èœå•è¿›å…¥ <strong>Trained Models</strong> é¡µé¢ï¼Œæˆ–ä½¿ç”¨ Kibana çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fexplore-analyze%2Ffind-and-organize%2Ffind-apps-and-objects" title="https://www.elastic.co/docs/explore-analyze/find-and-organize/find-apps-and-objects" target="_blank" ref="nofollow noopener noreferrer">å…¨å±€æœç´¢å­—æ®µ</a>ã€‚ä½ å¯ä»¥åœ¨è®­ç»ƒæ¨¡å‹åˆ—è¡¨ä¸­æ‰¾åˆ° E5ã€‚</p>
</li>
<li>
<p>ç‚¹å‡» <strong>Add trained model</strong> æŒ‰é’®ï¼Œé€‰æ‹©ä½ åœ¨æ­¥éª¤ 1 ä¸‹è½½å¹¶æƒ³è¦éƒ¨ç½²çš„ E5 æ¨¡å‹ç‰ˆæœ¬ï¼Œç„¶åç‚¹å‡» <strong>Download</strong>ã€‚æ‰€é€‰æ¨¡å‹å°†ä»ä½ åœ¨æ­¥éª¤ 2 æ”¾ç½®çš„æ¨¡å‹ç›®å½•ä¸­ä¸‹è½½ã€‚</p>
</li>
<li>
<p>ä¸‹è½½å®Œæˆåï¼Œç‚¹å‡» <strong>Start deployment</strong> æŒ‰é’®å¯åŠ¨éƒ¨ç½²ã€‚</p>
</li>
<li>
<p>æä¾› deployment IDï¼Œé€‰æ‹©ä¼˜å…ˆçº§ï¼Œå¹¶è®¾ç½®æ¯ä¸ªåˆ†é…çš„ allocation æ•°é‡å’Œçº¿ç¨‹æ•°ã€‚</p>
</li>
<li>
<p>ç‚¹å‡» <strong>Start</strong>ã€‚</p>
</li>
</ol>
<h2 data-id="heading-8">ä½¿ç”¨ HuggingFace ä»“åº“</h2>
<p>ä½ å¯ä»¥é€šè¿‡å°† eland_import_hub_model è„šæœ¬æŒ‡å‘æ¨¡å‹çš„æœ¬åœ°æ–‡ä»¶ï¼Œåœ¨å—é™æˆ–å°é—­ç½‘ç»œä¸­å®‰è£… multilingual-e5-small æ¨¡å‹ã€‚</p>
<p>å¯¹äºç¦»çº¿å®‰è£…ï¼Œæ¨¡å‹éœ€è¦å…ˆåœ¨æœ¬åœ°å…‹éš†ï¼Œä½ çš„ç³»ç»Ÿä¸­éœ€è¦å®‰è£… Git å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgit-lfs.com%2F" title="https://git-lfs.com/" target="_blank" ref="nofollow noopener noreferrer">Git Large File Storage</a>ã€‚</p>
<p>1ï¼‰ä½¿ç”¨æ¨¡å‹ URL ä» Hugging Face å…‹éš† E5 æ¨¡å‹ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">`git <span class="hljs-built_in">clone</span> https://huggingface.co/intfloat/multilingual-e5-small`AIå†™ä»£ç 
</code></pre>
<p>è¯¥å‘½ä»¤ä¼šåœ¨ multilingual-e5-small ç›®å½•ä¸­ç”Ÿæˆæ¨¡å‹çš„æœ¬åœ°å‰¯æœ¬ã€‚</p>
<p>2ï¼‰ä½¿ç”¨ eland_import_hub_model è„šæœ¬ï¼Œå¹¶å°† --hub-model-id è®¾ç½®ä¸ºå…‹éš†æ¨¡å‹çš„ç›®å½•æ¥å®‰è£…å®ƒï¼š</p>
<pre><code class="hljs language-css" lang="css">`

<span class="hljs-number">1</span>.  eland_import_hub_model \
<span class="hljs-number">2</span>.        <span class="hljs-attr">--url</span> 'XXXX' \
<span class="hljs-number">3</span>.        <span class="hljs-attr">--hub-model-id</span> /PATH/<span class="hljs-selector-tag">TO</span>/MODEL \
<span class="hljs-number">4</span>.        <span class="hljs-attr">--task-type</span> text_embedding \
<span class="hljs-number">5</span>.        <span class="hljs-attr">--es-username</span> elastic <span class="hljs-attr">--es-password</span> XXX \
<span class="hljs-number">6</span>.        <span class="hljs-attr">--es-model-id</span> multilingual-e5-small

`AIå†™ä»£ç 
</code></pre>
<p>å¦‚æœä½ ä½¿ç”¨ Docker é•œåƒè¿è¡Œ eland_import_hub_modelï¼Œå¿…é¡»ç»‘å®šæŒ‚è½½æ¨¡å‹ç›®å½•ï¼Œä»¥ä¾¿å®¹å™¨å¯ä»¥è¯»å–æ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">`

1.  docker run --mount <span class="hljs-built_in">type</span>=<span class="hljs-built_in">bind</span>,<span class="hljs-built_in">source</span>=/PATH/TO/MODELS,destination=/models,<span class="hljs-built_in">readonly</span> -it --<span class="hljs-built_in">rm</span> docker.elastic.co/eland/eland \
2.      eland_import_hub_model \
3.        --url <span class="hljs-string">'XXXX'</span> \
4.        --hub-model-id /models/multilingual-e5-small \
5.        --task-type text_embedding \
6.        --es-username elastic --es-password XXX \
7.        --es-model-id multilingual-e5-small

`AIå†™ä»£ç 
</code></pre>
<p>ä¸€æ—¦ä¸Šä¼ åˆ° Elasticsearchï¼Œæ¨¡å‹å°†ä½¿ç”¨ --es-model-id æŒ‡å®šçš„ IDã€‚å¦‚æœæœªè®¾ç½®ï¼Œåˆ™æ¨¡å‹ ID å°†ä» --hub-model-id æ¨å¯¼ï¼›ç©ºæ ¼å’Œè·¯å¾„åˆ†éš”ç¬¦ä¼šè¢«è½¬æ¢ä¸ºåŒä¸‹åˆ’çº¿ __ã€‚</p>
<h2 data-id="heading-9">å…è´£å£°æ˜</h2>
<p>å®¢æˆ·å¯ä»¥å°†ç¬¬ä¸‰æ–¹è®­ç»ƒæ¨¡å‹æ·»åŠ åˆ° Elastic è¿›è¡Œç®¡ç†ã€‚è¿™äº›æ¨¡å‹ä¸å±äº Elasticã€‚è™½ç„¶ Elastic ä¼šæ ¹æ®æ–‡æ¡£æ”¯æŒä¸è¿™äº›æ¨¡å‹çš„é›†æˆæ€§èƒ½ï¼Œä½†ä½ ç†è§£å¹¶åŒæ„ Elastic å¯¹ç¬¬ä¸‰æ–¹æ¨¡å‹æˆ–å®ƒä»¬å¯èƒ½ä½¿ç”¨çš„åº•å±‚è®­ç»ƒæ•°æ®ä¸æ‹¥æœ‰æ§åˆ¶æƒï¼Œä¹Ÿä¸æ‰¿æ‹…ä»»ä½•è´£ä»»ã€‚</p>
<p>æœ¬ E5 æ¨¡å‹ï¼Œå¦‚å®šä¹‰ã€æ‰˜ç®¡ã€é›†æˆå¹¶ä¸æˆ‘ä»¬çš„å…¶ä»– Elastic è½¯ä»¶ä¸€èµ·ä½¿ç”¨ï¼Œå—æˆ‘ä»¬çš„æ ‡å‡†ä¿ä¿®è¦†ç›–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RabbitMQ Unacked æ¶ˆæ¯æ·±åº¦è§£æï¼šæœºåˆ¶ã€é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7570491473034346505</link>    <guid>https://juejin.cn/post/7570491473034346505</guid>    <pubDate>2025-11-10T06:14:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570491473034346505" data-draft-id="7570579125154070538" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RabbitMQ Unacked æ¶ˆæ¯æ·±åº¦è§£æï¼šæœºåˆ¶ã€é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="Spring Boot,RabbitMQ"/> <meta itemprop="datePublished" content="2025-11-10T06:14:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è€ç å†œDebugæ—¥è®°"/> <meta itemprop="url" content="https://juejin.cn/user/2438031766469579"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RabbitMQ Unacked æ¶ˆæ¯æ·±åº¦è§£æï¼šæœºåˆ¶ã€é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2438031766469579/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è€ç å†œDebugæ—¥è®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:14:13.000Z" title="Mon Nov 10 2025 06:14:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å¼•è¨€</h3>
<p>åœ¨ RabbitMQ çš„æ¶ˆæ¯å¤„ç†ä¸­ï¼ŒUnackedï¼ˆæœªç¡®è®¤ï¼‰çŠ¶æ€æ˜¯ä¸€ä¸ªå…³é”®æ¦‚å¿µã€‚ç†è§£ Unacked æ¶ˆæ¯çš„è¡Œä¸ºæœºåˆ¶å¯¹äºæ„å»ºå¯é çš„æ¶ˆæ¯ç³»ç»Ÿè‡³å…³é‡è¦ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ Unacked æ¶ˆæ¯çš„ç”Ÿå‘½å‘¨æœŸã€ä¸ºä»€ä¹ˆå®ƒä»¬å¯èƒ½ä¸ä¼šé‡æ–°å…¥é˜Ÿï¼Œä»¥åŠå¦‚ä½•æœ‰æ•ˆç®¡ç†è¿™ç§æƒ…å†µã€‚</p>
<h3 data-id="heading-1">ä¸€ã€Unacked æ¶ˆæ¯çš„åŸºæœ¬æ¦‚å¿µ</h3>
<h4 data-id="heading-2">1.1 ä»€ä¹ˆæ˜¯ Unacked æ¶ˆæ¯</h4>
<p>Unacked æ¶ˆæ¯æ˜¯æŒ‡å·²ç»è¢«æ¶ˆè´¹è€…è·å–ä½†å°šæœªç¡®è®¤çš„æ¶ˆæ¯ã€‚è¿™ç§çŠ¶æ€å­˜åœ¨äºæ‰‹åŠ¨ç¡®è®¤æ¨¡å¼ï¼ˆManual Acknowledgementï¼‰ä¸‹ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æ¶ˆæ¯çŠ¶æ€æµè½¬ç¤ºæ„å›¾</span>
Producer â†’ Broker â†’ <span class="hljs-selector-attr">[Ready]</span> â†’ Consumer â†’ <span class="hljs-selector-attr">[Unacked]</span> â†’ (Ack/Nack/Reject)
</code></pre>
<h4 data-id="heading-3">1.2 æ¶ˆæ¯ç¡®è®¤çš„ä¸‰ç§æ–¹å¼</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageAckExamples</span> {
    
    <span class="hljs-meta">@RabbitListener(queues = "test_queue")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleMessage</span><span class="hljs-params">(Message message, Channel channel)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-type">long</span> <span class="hljs-variable">deliveryTag</span> <span class="hljs-operator">=</span> message.getMessageProperties().getDeliveryTag();
        
        <span class="hljs-comment">// 1. ç¡®è®¤æ¶ˆæ¯ - æˆåŠŸå¤„ç†</span>
        channel.basicAck(deliveryTag, <span class="hljs-literal">false</span>);
        
        <span class="hljs-comment">// 2. æ‹’ç»æ¶ˆæ¯å¹¶é‡æ–°å…¥é˜Ÿ</span>
        channel.basicNack(deliveryTag, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>);
        
        <span class="hljs-comment">// 3. æ‹’ç»æ¶ˆæ¯å¹¶ä¸¢å¼ƒ</span>
        channel.basicNack(deliveryTag, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>);
    }
}
</code></pre>
<h3 data-id="heading-4">äºŒã€Unacked æ¶ˆæ¯çš„æœ€ç»ˆå‘½è¿</h3>
<h4 data-id="heading-5">2.1 æ¶ˆæ¯çš„å››ç§å¯èƒ½ç»“å±€</h4>
<h5 data-id="heading-6">2.1.1 æ¶ˆè´¹è€…æ­£å¸¸ç¡®è®¤</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ¶ˆæ¯è¢«æˆåŠŸå¤„ç†å¹¶ä» RabbitMQ ä¸­åˆ é™¤</span>
channel.basicAck(deliveryTag, <span class="hljs-literal">false</span>);
</code></pre>
<h5 data-id="heading-7">2.1.2 æ¶ˆè´¹è€…æ‹’ç»å¹¶é‡æ–°å…¥é˜Ÿ</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ¶ˆæ¯é‡æ–°å˜ä¸º Ready çŠ¶æ€ï¼Œå¯è¢«å…¶ä»–æ¶ˆè´¹è€…å¤„ç†</span>
channel.basicNack(deliveryTag, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>);
</code></pre>
<h5 data-id="heading-8">2.1.3 æ¶ˆè´¹è€…è¿æ¥æ–­å¼€</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å½“æ¶ˆè´¹è€…è¿æ¥å¼‚å¸¸æ–­å¼€æ—¶ï¼Œæ‰€æœ‰ Unacked æ¶ˆæ¯ä¼šè‡ªåŠ¨é‡æ–°å…¥é˜Ÿ</span>
<span class="hljs-comment">// æ— éœ€æ‰‹åŠ¨æ“ä½œï¼ŒRabbitMQ è‡ªåŠ¨å¤„ç†</span>
</code></pre>
<h5 data-id="heading-9">2.1.4 æ¶ˆè´¹è€…å¿˜è®°ç¡®è®¤</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æœ€å±é™©çš„æƒ…å†µï¼šæ¶ˆæ¯ä¸€ç›´å¤„äº Unacked çŠ¶æ€</span>
<span class="hljs-comment">// ç›´åˆ°æ¶ˆè´¹è€…è¿æ¥æ–­å¼€æ‰ä¼šé‡æ–°å…¥é˜Ÿ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleMessage</span><span class="hljs-params">(Message message, Channel channel)</span> {
    <span class="hljs-comment">// å¤„ç†ä¸šåŠ¡é€»è¾‘...</span>
    <span class="hljs-comment">// ä½†å¿˜è®°è°ƒç”¨ basicAck() æˆ– basicNack()</span>
    <span class="hljs-comment">// æ¶ˆæ¯å°†ä¸€ç›´å¤„äº Unacked çŠ¶æ€ï¼</span>
}
</code></pre>
<h4 data-id="heading-10">2.2 Unacked æ¶ˆæ¯çš„èµ„æºå ç”¨</h4>
<ul>
<li>å†…å­˜ç©ºé—´</li>
<li>æ¶ˆæ¯åœ¨é˜Ÿåˆ—ä¸­çš„ä½ç½®ï¼ˆä½†å¯¹å…¶ä»–æ¶ˆè´¹è€…ä¸å¯è§ï¼‰</li>
<li>ç½‘ç»œè¿æ¥èµ„æº</li>
<li>æ¶ˆè´¹è€…é€šé“èµ„æº</li>
</ul>
<h3 data-id="heading-11">ä¸‰ã€ä¸ºä»€ä¹ˆ Unacked æ¶ˆæ¯æ²¡æœ‰é‡æ–°å…¥é˜Ÿ</h3>
<h4 data-id="heading-12">3.1 ä¸»è¦åŸå› åˆ†æ</h4>
<h5 data-id="heading-13">3.1.1 æ¶ˆè´¹è€…è¿æ¥ä»ç„¶æ´»è·ƒ</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ActiveButStuckConsumer</span> {
    <span class="hljs-meta">@RabbitListener(queues = "test_queue")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleMessage</span><span class="hljs-params">(Message message, Channel channel)</span> {
        <span class="hljs-comment">// æ¶ˆè´¹è€…è¿›ç¨‹æ­£å¸¸è¿è¡Œï¼Œè¿æ¥ä¿æŒæ´»è·ƒ</span>
        <span class="hljs-comment">// RabbitMQ è®¤ä¸ºæ¶ˆè´¹è€…ä»åœ¨å¤„ç†æ¶ˆæ¯</span>
        <span class="hljs-comment">// å› æ­¤ä¸ä¼šè‡ªåŠ¨é‡æ–°å…¥é˜Ÿ</span>
        
        <span class="hljs-comment">// å¦‚æœè¿™é‡Œå‘ç”Ÿé˜»å¡æˆ–æ­»é”ï¼Œæ¶ˆæ¯å°†æ°¸è¿œå¤„äº Unacked çŠ¶æ€</span>
        processMessage(message); <span class="hljs-comment">// å‡è®¾è¿™é‡Œå¡ä½äº†</span>
        
        <span class="hljs-comment">// æ°¸è¿œæ‰§è¡Œä¸åˆ°ç¡®è®¤ä»£ç </span>
        <span class="hljs-comment">// channel.basicAck(deliveryTag, false);</span>
    }
}
</code></pre>
<h5 data-id="heading-14">3.1.2 Prefetch Count é…ç½®è¿‡å¤§</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LargePrefetchConfig</span> {
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> SimpleRabbitListenerContainerFactory <span class="hljs-title function_">containerFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-type">SimpleRabbitListenerContainerFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleRabbitListenerContainerFactory</span>();
        factory.setPrefetchCount(<span class="hljs-number">50</span>); <span class="hljs-comment">// è®¾ç½®è¿‡å¤§</span>
        
        <span class="hljs-comment">// é—®é¢˜ï¼šæ¶ˆè´¹è€…å¯ä»¥ä¸€æ¬¡æ€§è·å–50æ¡æ¶ˆæ¯</span>
        <span class="hljs-comment">// å¦‚æœå…¶ä¸­å‡ æ¡æ¶ˆæ¯å¤„ç†å¡ä½ï¼Œå…¶ä»–æ¶ˆæ¯ä¹Ÿä¼šè¢«é˜»å¡</span>
        <span class="hljs-comment">// æ‰€æœ‰50æ¡æ¶ˆæ¯éƒ½ä¼šå¤„äº Unacked çŠ¶æ€</span>
        <span class="hljs-keyword">return</span> factory;
    }
}
</code></pre>
<h5 data-id="heading-15">3.1.3 ç¼ºå°‘è¶…æ—¶æœºåˆ¶</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NoTimeoutConsumer</span> {
    <span class="hljs-meta">@RabbitListener(queues = "blocking_queue")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleBlockingOperation</span><span class="hljs-params">(Message message, Channel channel)</span> {
        <span class="hljs-comment">// æ²¡æœ‰è®¾ç½®å¤„ç†è¶…æ—¶</span>
        <span class="hljs-comment">// å¦‚æœå¤–éƒ¨ä¾èµ–æœåŠ¡å“åº”æ…¢æˆ–æŒ‚èµ·</span>
        <span class="hljs-comment">// æ¶ˆæ¯å°†æ°¸è¿œå¤„äº Unacked çŠ¶æ€</span>
        ResponseEntity&lt;String&gt; response = restTemplate.getForEntity(
            <span class="hljs-string">"http://slow-service/api"</span>, 
            String.class  <span class="hljs-comment">// æ²¡æœ‰è®¾ç½®è¶…æ—¶æ—¶é—´</span>
        );
        
        <span class="hljs-comment">// å¦‚æœæœåŠ¡ä¸å“åº”ï¼Œè¿™é‡Œæ°¸è¿œä¸ä¼šæ‰§è¡Œ</span>
        channel.basicAck(deliveryTag, <span class="hljs-literal">false</span>);
    }
}
</code></pre>
<h4 data-id="heading-16">3.2 å…·ä½“é—®é¢˜åœºæ™¯</h4>
<h5 data-id="heading-17">3.2.1 æ•°æ®åº“è¿æ¥æ± è€—å°½</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseBlockedConsumer</span> {
    <span class="hljs-meta">@RabbitListener(queues = "db_queue")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processWithDB</span><span class="hljs-params">(Message message, Channel channel)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// å¦‚æœæ•°æ®åº“è¿æ¥æ± è€—å°½ï¼Œè¿™é‡Œä¼šä¸€ç›´ç­‰å¾…</span>
            <span class="hljs-comment">// çº¿ç¨‹è¢«é˜»å¡ï¼Œæ— æ³•æ‰§è¡Œç¡®è®¤æ“ä½œ</span>
            dbService.saveLargeData(extractData(message));
            
            <span class="hljs-comment">// æ°¸è¿œæ‰§è¡Œä¸åˆ°è¿™é‡Œ</span>
            channel.basicAck(message.getMessageProperties().getDeliveryTag(), <span class="hljs-literal">false</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// å¼‚å¸¸ä¹Ÿæ•è·ä¸åˆ°ï¼Œå› ä¸ºæ˜¯åœ¨ç­‰å¾…è¿æ¥</span>
        }
    }
}
</code></pre>
<h5 data-id="heading-18">3.2.2 åŒæ­¥ HTTP è°ƒç”¨æ— è¶…æ—¶</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HttpBlockedConsumer</span> {
    <span class="hljs-meta">@RabbitListener(queues = "http_queue")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">callExternalApi</span><span class="hljs-params">(Message message, Channel channel)</span> {
        <span class="hljs-comment">// åˆ›å»ºæ²¡æœ‰è¶…æ—¶è®¾ç½®çš„ RestTemplate</span>
        <span class="hljs-type">RestTemplate</span> <span class="hljs-variable">noTimeoutTemplate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestTemplate</span>();
        
        <span class="hljs-comment">// å¦‚æœå¤–éƒ¨æœåŠ¡ä¸å“åº”ï¼Œè°ƒç”¨å°†æ°¸è¿œæŒ‚èµ·</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> noTimeoutTemplate.getForObject(
            <span class="hljs-string">"http://unreliable-service/api"</span>, 
            String.class
        );
        
        <span class="hljs-comment">// æ°¸è¿œä¸ä¼šæ‰§è¡Œç¡®è®¤</span>
        channel.basicAck(deliveryTag, <span class="hljs-literal">false</span>);
    }
}
</code></pre>
<h5 data-id="heading-19">3.2.3 æ­»é”æˆ–èµ„æºç«äº‰</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeadlockConsumer</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Object</span> <span class="hljs-variable">lockA</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Object</span> <span class="hljs-variable">lockB</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();
    
    <span class="hljs-meta">@RabbitListener(queues = "deadlock_queue")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processWithDeadlock</span><span class="hljs-params">(Message message, Channel channel)</span> {
        <span class="hljs-keyword">synchronized</span> (lockA) {
            <span class="hljs-keyword">try</span> {
                Thread.sleep(<span class="hljs-number">100</span>);
                <span class="hljs-keyword">synchronized</span> (lockB) {  <span class="hljs-comment">// å¯èƒ½å‘ç”Ÿæ­»é”</span>
                    processBusinessLogic(message);
                }
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                <span class="hljs-comment">// ä¸ä¼šæ‰§è¡Œåˆ°ç¡®è®¤</span>
            }
        }
        <span class="hljs-comment">// ç¡®è®¤ä»£ç æ°¸è¿œæ‰§è¡Œä¸åˆ°</span>
    }
}
</code></pre>
<h3 data-id="heading-20">å››ã€è§£å†³æ–¹æ¡ˆå’Œæœ€ä½³å®è·µ</h3>
<h4 data-id="heading-21">4.1 è®¾ç½®åˆç†çš„è¶…æ—¶æœºåˆ¶</h4>
<h5 data-id="heading-22">4.1.1 ä½¿ç”¨è¶…æ—¶æ§åˆ¶çš„æ¶ˆè´¹è€…</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TimeoutAwareConsumer</span> {
    <span class="hljs-meta">@RabbitListener(queues = "timeout_queue")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleWithTimeout</span><span class="hljs-params">(Message message, Channel channel)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-type">long</span> <span class="hljs-variable">deliveryTag</span> <span class="hljs-operator">=</span> message.getMessageProperties().getDeliveryTag();
        <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newSingleThreadExecutor();
        
        Future&lt;?&gt; future = executor.submit(() -&gt; {
            processMessage(message); <span class="hljs-comment">// ä¸šåŠ¡å¤„ç†</span>
        });
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// è®¾ç½®30ç§’è¶…æ—¶</span>
            future.get(<span class="hljs-number">30</span>, TimeUnit.SECONDS);
            channel.basicAck(deliveryTag, <span class="hljs-literal">false</span>);
            logger.info(<span class="hljs-string">"æ¶ˆæ¯å¤„ç†æˆåŠŸ"</span>);
            
        } <span class="hljs-keyword">catch</span> (TimeoutException e) {
            future.cancel(<span class="hljs-literal">true</span>); <span class="hljs-comment">// å–æ¶ˆä»»åŠ¡</span>
            <span class="hljs-comment">// è¶…æ—¶åæ‹’ç»æ¶ˆæ¯å¹¶é‡æ–°å…¥é˜Ÿ</span>
            channel.basicNack(deliveryTag, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>);
            logger.warn(<span class="hljs-string">"æ¶ˆæ¯å¤„ç†è¶…æ—¶ï¼Œå·²é‡æ–°å…¥é˜Ÿ"</span>);
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            channel.basicNack(deliveryTag, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>);
            logger.error(<span class="hljs-string">"æ¶ˆæ¯å¤„ç†å¤±è´¥ï¼Œå·²ä¸¢å¼ƒ"</span>, e);
            
        } <span class="hljs-keyword">finally</span> {
            executor.shutdown();
        }
    }
}
</code></pre>
<h5 data-id="heading-23">4.1.2 é…ç½® HTTP å®¢æˆ·ç«¯è¶…æ—¶</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RestTemplateConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RestTemplate <span class="hljs-title function_">restTemplate</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestTemplate</span>(getClientHttpRequestFactory());
    }
    
    <span class="hljs-keyword">private</span> ClientHttpRequestFactory <span class="hljs-title function_">getClientHttpRequestFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-type">HttpComponentsClientHttpRequestFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> 
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpComponentsClientHttpRequestFactory</span>();
        factory.setConnectTimeout(<span class="hljs-number">5000</span>);    <span class="hljs-comment">// 5ç§’è¿æ¥è¶…æ—¶</span>
        factory.setReadTimeout(<span class="hljs-number">30000</span>);      <span class="hljs-comment">// 30ç§’è¯»å–è¶…æ—¶</span>
        <span class="hljs-keyword">return</span> factory;
    }
}
</code></pre>
<h4 data-id="heading-24">4.2 ä¼˜åŒ– RabbitMQ é…ç½®</h4>
<h5 data-id="heading-25">4.2.1 åˆç†çš„ Prefetch Count</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OptimizedRabbitConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> SimpleRabbitListenerContainerFactory <span class="hljs-title function_">containerFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-type">SimpleRabbitListenerContainerFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> 
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleRabbitListenerContainerFactory</span>();
        
        <span class="hljs-comment">// æ ¹æ®ä¸šåŠ¡ç‰¹ç‚¹è®¾ç½®åˆé€‚çš„é¢„å–æ•°é‡</span>
        factory.setPrefetchCount(<span class="hljs-number">3</span>); <span class="hljs-comment">// è¾ƒå°çš„å€¼é¿å…æ¶ˆæ¯å †ç§¯</span>
        factory.setConcurrentConsumers(<span class="hljs-number">2</span>); <span class="hljs-comment">// åˆé€‚çš„å¹¶å‘æ•°</span>
        factory.setMaxConcurrentConsumers(<span class="hljs-number">5</span>);
        
        <span class="hljs-keyword">return</span> factory;
    }
}
</code></pre>
<h5 data-id="heading-26">4.2.2 å¿ƒè·³æ£€æµ‹é…ç½®</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HeartbeatConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> CachingConnectionFactory <span class="hljs-title function_">connectionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-type">CachingConnectionFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CachingConnectionFactory</span>();
        factory.setHost(<span class="hljs-string">"localhost"</span>);
        factory.setRequestedHeartBeat(<span class="hljs-number">30</span>); <span class="hljs-comment">// 30ç§’å¿ƒè·³æ£€æµ‹</span>
        
        <span class="hljs-comment">// å¦‚æœæ¶ˆè´¹è€…ä¸å“åº”å¿ƒè·³ï¼Œè¿æ¥ä¼šè¢«å…³é—­</span>
        <span class="hljs-comment">// Unacked æ¶ˆæ¯ä¼šè‡ªåŠ¨é‡æ–°å…¥é˜Ÿ</span>
        <span class="hljs-keyword">return</span> factory;
    }
}
</code></pre>
<h4 data-id="heading-27">4.3 å®ç°å¥å£®çš„é”™è¯¯å¤„ç†</h4>
<h5 data-id="heading-28">4.3.1 å®Œæ•´çš„å¼‚å¸¸å¤„ç†</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RobustConsumer</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MAX_RETRY_COUNT</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;
    
    <span class="hljs-meta">@RabbitListener(queues = "robust_queue")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleMessage</span><span class="hljs-params">(Message message, Channel channel)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-type">long</span> <span class="hljs-variable">deliveryTag</span> <span class="hljs-operator">=</span> message.getMessageProperties().getDeliveryTag();
        <span class="hljs-type">MessageProperties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> message.getMessageProperties();
        Map&lt;String, Object&gt; headers = properties.getHeaders();
        
        <span class="hljs-comment">// è·å–é‡è¯•æ¬¡æ•°</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">retryCount</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) headers.getOrDefault(<span class="hljs-string">"retry-count"</span>, <span class="hljs-number">0</span>);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä¸šåŠ¡å¤„ç†é€»è¾‘</span>
            processBusiness(message);
            
            <span class="hljs-comment">// å¤„ç†æˆåŠŸï¼Œç¡®è®¤æ¶ˆæ¯</span>
            channel.basicAck(deliveryTag, <span class="hljs-literal">false</span>);
            logger.info(<span class="hljs-string">"æ¶ˆæ¯å¤„ç†æˆåŠŸ"</span>);
            
        } <span class="hljs-keyword">catch</span> (TemporaryException e) {
            <span class="hljs-comment">// ä¸´æ—¶å¼‚å¸¸ï¼Œæ ¹æ®é‡è¯•æ¬¡æ•°å†³å®šæ˜¯å¦é‡æ–°å…¥é˜Ÿ</span>
            <span class="hljs-keyword">if</span> (retryCount &lt; MAX_RETRY_COUNT) {
                headers.put(<span class="hljs-string">"retry-count"</span>, retryCount + <span class="hljs-number">1</span>);
                channel.basicNack(deliveryTag, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>); <span class="hljs-comment">// é‡æ–°å…¥é˜Ÿ</span>
                logger.warn(<span class="hljs-string">"æ¶ˆæ¯å¤„ç†ä¸´æ—¶å¤±è´¥ï¼Œç¬¬{}æ¬¡é‡è¯•"</span>, retryCount + <span class="hljs-number">1</span>);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// é‡è¯•æ¬¡æ•°è¶…é™ï¼Œè¿›å…¥æ­»ä¿¡é˜Ÿåˆ—</span>
                channel.basicNack(deliveryTag, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>);
                logger.error(<span class="hljs-string">"æ¶ˆæ¯é‡è¯•æ¬¡æ•°è¶…é™ï¼Œå·²è¿›å…¥æ­»ä¿¡é˜Ÿåˆ—"</span>);
            }
            
        } <span class="hljs-keyword">catch</span> (PermanentException e) {
            <span class="hljs-comment">// æ°¸ä¹…å¼‚å¸¸ï¼Œç›´æ¥ç¡®è®¤ï¼ˆé¿å…é‡å¤æ¶ˆè´¹ï¼‰</span>
            channel.basicAck(deliveryTag, <span class="hljs-literal">false</span>);
            logger.error(<span class="hljs-string">"æ¶ˆæ¯å­˜åœ¨æ°¸ä¹…æ€§é”™è¯¯ï¼Œå·²ç¡®è®¤å¹¶ä¸¢å¼ƒ"</span>, e);
        }
    }
}
</code></pre>
<h5 data-id="heading-29">4.3.2 æ­»ä¿¡é˜Ÿåˆ—é…ç½®</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeadLetterConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Queue <span class="hljs-title function_">mainQueue</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> QueueBuilder.durable(<span class="hljs-string">"main_queue"</span>)
                .deadLetterExchange(<span class="hljs-string">"dlx_exchange"</span>)
                .deadLetterRoutingKey(<span class="hljs-string">"dlq_routing_key"</span>)
                .ttl(<span class="hljs-number">60000</span>) <span class="hljs-comment">// 60ç§’TTL</span>
                .build();
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Queue <span class="hljs-title function_">deadLetterQueue</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Queue</span>(<span class="hljs-string">"dead_letter_queue"</span>, <span class="hljs-literal">true</span>);
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> DirectExchange <span class="hljs-title function_">dlxExchange</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DirectExchange</span>(<span class="hljs-string">"dlx_exchange"</span>);
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Binding <span class="hljs-title function_">dlxBinding</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> BindingBuilder.bind(deadLetterQueue())
                .to(dlxExchange())
                .with(<span class="hljs-string">"dlq_routing_key"</span>);
    }
}
</code></pre>
<h4 data-id="heading-30">4.4 ç›‘æ§å’Œå‘Šè­¦</h4>
<h5 data-id="heading-31">4.4.1 Unacked æ¶ˆæ¯ç›‘æ§</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RabbitMQMonitor</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RabbitAdmin rabbitAdmin;
    
    <span class="hljs-meta">@Scheduled(fixedRate = 30000)</span> <span class="hljs-comment">// æ¯30ç§’æ£€æŸ¥ä¸€æ¬¡</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">monitorUnackedMessages</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Properties</span> <span class="hljs-variable">queueProps</span> <span class="hljs-operator">=</span> rabbitAdmin.getQueueProperties(<span class="hljs-string">"your_queue"</span>);
        <span class="hljs-keyword">if</span> (queueProps != <span class="hljs-literal">null</span>) {
            <span class="hljs-type">int</span> <span class="hljs-variable">unackedCount</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) queueProps.get(<span class="hljs-string">"QUEUE_MESSAGE_UNACKNOWLEDGED"</span>);
            <span class="hljs-type">int</span> <span class="hljs-variable">readyCount</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) queueProps.get(<span class="hljs-string">"QUEUE_MESSAGE_COUNT"</span>);
            
            <span class="hljs-comment">// å‘Šè­¦æ¡ä»¶</span>
            <span class="hljs-keyword">if</span> (unackedCount &gt; <span class="hljs-number">10</span>) {
                logger.warn(<span class="hljs-string">"Unacked æ¶ˆæ¯è¿‡å¤š: {}"</span>, unackedCount);
                sendAlert(<span class="hljs-string">"RabbitMQ Unacked æ¶ˆæ¯å‘Šè­¦"</span>, 
                         String.format(<span class="hljs-string">"å½“å‰Unackedæ¶ˆæ¯: %d, Readyæ¶ˆæ¯: %d"</span>, 
                                     unackedCount, readyCount));
            }
            
            <span class="hljs-comment">// é•¿æœŸä¸å‡å°‘çš„ Unacked æ¶ˆæ¯</span>
            <span class="hljs-keyword">if</span> (unackedCount &gt; <span class="hljs-number">0</span>) {
                checkStuckMessages();
            }
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkStuckMessages</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰é•¿æ—¶é—´å¤„äº Unacked çŠ¶æ€çš„æ¶ˆæ¯</span>
        <span class="hljs-comment">// å¯ä»¥é€šè¿‡è®°å½•æ¶ˆæ¯è¿›å…¥ Unacked çŠ¶æ€çš„æ—¶é—´æ¥åˆ¤æ–­</span>
    }
}
</code></pre>
<h5 data-id="heading-32">4.4.2 æ¶ˆè´¹è€…å¥åº·æ£€æŸ¥</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConsumerHealthCheck</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">lastProcessTime</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(System.currentTimeMillis());
    
    <span class="hljs-meta">@RabbitListener(queues = "health_check_queue")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleMessage</span><span class="hljs-params">(Message message, Channel channel)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-keyword">try</span> {
            processMessage(message);
            channel.basicAck(message.getMessageProperties().getDeliveryTag(), <span class="hljs-literal">false</span>);
            lastProcessTime.set(System.currentTimeMillis());
        } <span class="hljs-keyword">catch</span> (Exception e) {
            channel.basicNack(message.getMessageProperties().getDeliveryTag(), <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>);
        }
    }
    
    <span class="hljs-keyword">public</span> Health <span class="hljs-title function_">health</span><span class="hljs-params">()</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">lastTime</span> <span class="hljs-operator">=</span> lastProcessTime.get();
        <span class="hljs-type">long</span> <span class="hljs-variable">currentTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        
        <span class="hljs-keyword">if</span> (currentTime - lastTime &gt; <span class="hljs-number">300000</span>) { <span class="hljs-comment">// 5åˆ†é’Ÿæ— æ´»åŠ¨</span>
            <span class="hljs-keyword">return</span> Health.down()
                    .withDetail(<span class="hljs-string">"lastProcessTime"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(lastTime))
                    .withDetail(<span class="hljs-string">"inactiveDuration"</span>, currentTime - lastTime)
                    .build();
        }
        
        <span class="hljs-keyword">return</span> Health.up()
                .withDetail(<span class="hljs-string">"lastProcessTime"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(lastTime))
                .build();
    }
}
</code></pre>
<h3 data-id="heading-33">äº”ã€ç´§æ€¥å¤„ç†æªæ–½</h3>
<h4 data-id="heading-34">5.1 é‡å¯æ¶ˆè´¹è€…åº”ç”¨</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å½“å‘ç°å¤§é‡ Unacked æ¶ˆæ¯ä¸å‡å°‘æ—¶çš„ç´§æ€¥å¤„ç†</span>
<span class="hljs-comment"># 1. åœæ­¢æ¶ˆè´¹è€…</span>
./stop-consumer.sh

<span class="hljs-comment"># 2. ç­‰å¾…å‡ ç§’è®©è¿æ¥å®Œå…¨å…³é—­</span>
<span class="hljs-built_in">sleep</span> 5

<span class="hljs-comment"># 3. é‡æ–°å¯åŠ¨æ¶ˆè´¹è€…</span>
./start-consumer.sh

<span class="hljs-comment"># è¿™æ ·æ‰€æœ‰ Unacked æ¶ˆæ¯ä¼šé‡æ–°å˜ä¸º Ready çŠ¶æ€</span>
</code></pre>
<h4 data-id="heading-35">5.2 é€šè¿‡ç®¡ç†ç•Œé¢å¤„ç†</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é€šè¿‡ RabbitMQ HTTP API å¼ºåˆ¶å–æ¶ˆæ¶ˆè´¹è€…è¿æ¥</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmergencyHandler</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">forceCloseConnection</span><span class="hljs-params">(String connectionName)</span> {
        <span class="hljs-comment">// è°ƒç”¨ RabbitMQ ç®¡ç†APIå…³é—­æŒ‡å®šè¿æ¥</span>
        <span class="hljs-comment">// è¿™æ ·è¯¥è¿æ¥ä¸‹çš„æ‰€æœ‰ Unacked æ¶ˆæ¯ä¼šé‡æ–°å…¥é˜Ÿ</span>
    }
}
</code></pre>
<h3 data-id="heading-36">å…­ã€æ€»ç»“</h3>
<p>Unacked æ¶ˆæ¯æ²¡æœ‰é‡æ–°å…¥é˜Ÿé€šå¸¸è¡¨æ˜æ¶ˆè´¹è€…å¤„äº"å‡æ­»"çŠ¶æ€â€”â€”è¿æ¥ä¿æŒæ´»è·ƒä½†å®é™…å·²æ— æ³•æ­£å¸¸å¤„ç†æ¶ˆæ¯ã€‚è¿™ç§æƒ…å†µæ¯”æ¶ˆè´¹è€…å®Œå…¨å´©æºƒæ›´å±é™©ï¼Œå› ä¸º RabbitMQ ä¼šä¸€ç›´ç­‰å¾…ç¡®è®¤ã€‚
<strong>å…³é”®é¢„é˜²æªæ–½ï¼š</strong></p>
<ul>
<li>è®¾ç½®åˆç†çš„è¶…æ—¶æœºåˆ¶Â - é¿å…æ— é™æœŸç­‰å¾…</li>
<li>ä¼˜åŒ– Prefetch CountÂ - é¿å…è¿‡å¤šæ¶ˆæ¯è¢«å•ä¸ªæ¶ˆè´¹è€…å ç”¨</li>
<li>å®Œå–„å¼‚å¸¸å¤„ç†Â - ç¡®ä¿æ‰€æœ‰è·¯å¾„éƒ½æœ‰ç¡®è®¤æ“ä½œ</li>
<li>å®æ–½ç›‘æ§å‘Šè­¦Â - åŠæ—¶å‘ç°å¤„ç†åœæ»é…</li>
<li>ç½®æ­»ä¿¡é˜Ÿåˆ—Â - å¤„ç†æ— æ³•æ­£å¸¸æ¶ˆè´¹çš„æ¶ˆæ¯</li>
</ul>
<p>é€šè¿‡ä»¥ä¸Šæªæ–½ï¼Œå¯ä»¥å¤§å¤§é™ä½ Unacked æ¶ˆæ¯å †ç§¯çš„é£é™©ï¼Œæ„å»ºæ›´åŠ å¥å£®å¯é çš„æ¶ˆæ¯å¤„ç†ç³»ç»Ÿã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£ThreadLocalï¼šä»åŸç†åˆ°æ¶æ„å®è·µçš„å…¨é¢è§£æ]]></title>    <link>https://juejin.cn/post/7570604028633645091</link>    <guid>https://juejin.cn/post/7570604028633645091</guid>    <pubDate>2025-11-10T06:18:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570604028633645091" data-draft-id="7570604028633612323" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£ThreadLocalï¼šä»åŸç†åˆ°æ¶æ„å®è·µçš„å…¨é¢è§£æ"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-11-10T06:18:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Homeey"/> <meta itemprop="url" content="https://juejin.cn/user/413072103576493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£ThreadLocalï¼šä»åŸç†åˆ°æ¶æ„å®è·µçš„å…¨é¢è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/413072103576493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Homeey
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:18:52.000Z" title="Mon Nov 10 2025 06:18:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šå¤šçº¿ç¨‹ä¸–ç•Œé‡Œçš„å˜é‡éš”ç¦»è‰ºæœ¯</h2>
<p>åœ¨Javaå¹¶å‘ç¼–ç¨‹çš„èˆå°ä¸Šï¼Œçº¿ç¨‹å®‰å…¨å§‹ç»ˆæ˜¯å¼€å‘è€…å¿…é¡»è·¨è¶Šçš„é¸¿æ²Ÿã€‚å½“å¤šä¸ªçº¿ç¨‹å…±äº«èµ„æºæ—¶ï¼ŒåŒæ­¥æœºåˆ¶å¾€å¾€å¸¦æ¥æ€§èƒ½æŸè€—ï¼Œè€ŒThreadLocalçš„å‡ºç°ä¸ºæˆ‘ä»¬æä¾›äº†å¦ä¸€ç§æ€è·¯â€”â€”<strong>é€šè¿‡å˜é‡çš„çº¿ç¨‹ç§æœ‰åŒ–å®ç°çº¿ç¨‹å®‰å…¨</strong>ã€‚è¿™ç§æœºåˆ¶åœ¨Springäº‹åŠ¡ç®¡ç†ã€MyBatisä¼šè¯ç®¡ç†ç­‰æ¡†æ¶ä¸­è¢«å¹¿æ³›åº”ç”¨ï¼Œæˆä¸ºæ„å»ºé«˜å¹¶å‘ç³»ç»Ÿçš„éšå½¢åŸºçŸ³ã€‚ä½†ä½ çœŸçš„äº†è§£ThreadLocalèƒŒåçš„å­˜å‚¨å¥¥ç§˜å—ï¼Ÿå½“çº¿ç¨‹æ± é‡ä¸ŠThreadLocalæ—¶ä¸ºä½•ä¼šå‡ºç°æ•°æ®é”™ä¹±ï¼Ÿæœ¬æ–‡å°†å¸¦ä½ ä»æºç å®ç°åˆ°æ¶æ„è®¾è®¡ï¼Œå…¨é¢æŒæ¡ThreadLocalçš„æŠ€æœ¯ç²¾é«“ä¸å®æˆ˜æ™ºæ…§ã€‚</p>
<h2 data-id="heading-1">ThreadLocalçš„æ ¸å¿ƒåŸç†ï¼šçº¿ç¨‹ç§æœ‰å˜é‡çš„å­˜å‚¨å“²å­¦</h2>
<h3 data-id="heading-2">çº¿ç¨‹å±€éƒ¨å˜é‡çš„å­˜å‚¨æœºåˆ¶</h3>
<p>æ¯ä¸ªThreadå¯¹è±¡å†…éƒ¨éƒ½ç»´æŠ¤ç€ä¸€ä¸ªThreadLocalMapå®ä¾‹ï¼Œè¿™ä¸ªç‰¹æ®Šçš„Mapæ­£æ˜¯çº¿ç¨‹ç§æœ‰å˜é‡çš„"ç§˜å¯†ä»“åº“"ã€‚ä¸ä¼ ç»Ÿé›†åˆä¸åŒï¼Œ<strong>ThreadLocalMapæ˜¯ä»¥ThreadLocalå®ä¾‹ä¸ºé”®ã€ä»¥ç›®æ ‡å˜é‡ä¸ºå€¼</strong>çš„å­˜å‚¨ç»“æ„ã€‚å½“æˆ‘ä»¬é€šè¿‡threadLocal.set(value)æ–¹æ³•å­˜å‚¨å˜é‡æ—¶ï¼Œå®é™…ä¸Šæ˜¯å°†æ•°æ®å­˜å…¥å½“å‰çº¿ç¨‹çš„ThreadLocalMapä¸­ï¼›è€ŒthreadLocal.get()åˆ™æ˜¯ä»å½“å‰çº¿ç¨‹çš„Mapä¸­å–å‡ºå¯¹åº”çš„å€¼ã€‚è¿™ç§è®¾è®¡ä½¿å¾—æ¯ä¸ªçº¿ç¨‹éƒ½æ‹¥æœ‰ç‹¬ç«‹çš„å˜é‡å‰¯æœ¬ï¼Œè‡ªç„¶é¿å…äº†çº¿ç¨‹é—´çš„ç«äº‰é—®é¢˜ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/acbf82a8e0bb4621bb4c3b33952f9910~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSG9tZWV5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360331&amp;x-signature=FoNouySj%2Bc0TgEktTbayDyQU%2FT0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">JVMå†…å­˜æ¨¡å‹è§†è§’ä¸‹çš„ThreadLocal</h3>
<p>ä»JVMå†…å­˜æ¨¡å‹æ¥çœ‹ï¼ŒThreadLocalæ¶‰åŠä¸‰ä¸ªå…³é”®è§’è‰²ï¼š</p>
<ul>
<li><strong>ThreadLocalå®ä¾‹</strong>ï¼šä½œä¸ºé™æ€å˜é‡å­˜åœ¨äºæ–¹æ³•åŒº</li>
<li><strong>Threadå¯¹è±¡</strong>ï¼šå­˜åœ¨äºå †å†…å­˜ä¸­ï¼Œå…¶threadLocalså­—æ®µå¼•ç”¨ThreadLocalMap</li>
<li><strong>ThreadLocalMap</strong>ï¼šæ¯ä¸ªçº¿ç¨‹ç‹¬æœ‰çš„å“ˆå¸Œè¡¨ï¼Œé”®ä¸ºThreadLocalå®ä¾‹çš„å¼±å¼•ç”¨</li>
</ul>
<p>è¿™é‡Œéœ€è¦ç‰¹åˆ«æ³¨æ„<strong>å¼±å¼•ç”¨(WeakReference)</strong> çš„è®¾è®¡ã€‚ThreadLocalMapçš„Entryç»§æ‰¿è‡ªWeakReferenceï¼Œå½“ThreadLocalå®ä¾‹ä¸å†è¢«å¤–éƒ¨å¼ºå¼•ç”¨æ—¶ï¼Œå³ä½¿Mapä¸­ä»æœ‰Entryï¼Œè¯¥é”®ä¹Ÿä¼šè¢«GCå›æ”¶ã€‚è¿™ç§æœºåˆ¶åœ¨ä¸€å®šç¨‹åº¦ä¸Šç¼“è§£äº†å†…å­˜æ³„æ¼é£é™©ï¼Œä½†å¦‚æœvalueæ˜¯å¼ºå¼•ç”¨ä¸”æœªæ‰‹åŠ¨åˆ é™¤ï¼Œä»å¯èƒ½å¯¼è‡´"é”®æ¶ˆå¤±ä½†å€¼æ®‹ç•™"çš„å†…å­˜æ³„æ¼é—®é¢˜ã€‚</p>
<h2 data-id="heading-4">ThreadLocalçš„å®ç°ç»†èŠ‚ï¼šThreadLocalMapçš„ç²¾å¦™è®¾è®¡</h2>
<h3 data-id="heading-5">ThreadLocalMapçš„å†…éƒ¨ç»“æ„</h3>
<p>ThreadLocalMapæ˜¯JDKç²¾å¿ƒè®¾è®¡çš„å®šåˆ¶åŒ–å“ˆå¸Œè¡¨ï¼Œä¸HashMapç›¸æ¯”æœ‰è¯¸å¤šç‰¹æ®Šä¹‹å¤„ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Entry</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">WeakReference</span>&lt;ThreadLocal&lt;?&gt;&gt; {
    Object value;
    Entry(ThreadLocal&lt;?&gt; k, Object v) {
      <span class="hljs-built_in">super</span>(k);
      value = v;
    }
}

<span class="hljs-comment">// åˆå§‹å®¹é‡å¿…é¡»æ˜¯2çš„å¹‚</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">INITIAL_CAPACITY</span> <span class="hljs-operator">=</span> <span class="hljs-number">16</span>;
<span class="hljs-comment">// å­˜å‚¨Entryçš„æ•°ç»„</span>
<span class="hljs-keyword">private</span> Entry[] table;
<span class="hljs-comment">// å…ƒç´ æ•°é‡</span>
<span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
<span class="hljs-comment">// æ‰©å®¹é˜ˆå€¼ï¼Œé»˜è®¤ä¸ºå®¹é‡çš„2/3</span>
<span class="hljs-keyword">private</span> <span class="hljs-type">int</span> threshold;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d01f925e98fa4d468bf9b047283c29ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSG9tZWV5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360331&amp;x-signature=7qo5pOxkQoj4j2o3H9tAqdZ9En0%3D" alt="" loading="lazy"/></p>
<p>ä¸HashMapçš„æ‹‰é“¾æ³•è§£å†³å“ˆå¸Œå†²çªä¸åŒï¼Œ<strong>ThreadLocalMapé‡‡ç”¨å¼€æ”¾åœ°å€æ³•</strong>â€”â€”å½“å‘ç”Ÿå“ˆå¸Œå†²çªæ—¶ï¼Œä¼šå°è¯•ä¸‹ä¸€ä¸ªç©ºé—²çš„æ•°ç»„ä½ç½®ã€‚è¿™ç§è®¾è®¡è™½ç„¶èŠ‚çœç©ºé—´ï¼Œä½†åœ¨é«˜å†²çªåœºæ™¯ä¸‹æ€§èƒ½å¯èƒ½ä¸‹é™ï¼Œä¸è¿‡è€ƒè™‘åˆ°å•ä¸ªçº¿ç¨‹ä¸­ThreadLocalå®ä¾‹é€šå¸¸ä¸ä¼šè¿‡å¤šï¼Œè¿™ç§æƒè¡¡æ˜¯åˆç†çš„ã€‚</p>
<h3 data-id="heading-6">ThreadLocalMapçš„åˆå§‹åŒ–ä¸æ‰©å®¹æœºåˆ¶</h3>
<p>ThreadLocalMapçš„åˆå§‹åŒ–æ˜¯<strong>å»¶è¿ŸåŠ è½½</strong>çš„ï¼Œåªæœ‰å½“ç¬¬ä¸€æ¬¡è°ƒç”¨set()æˆ–get()æ–¹æ³•æ—¶æ‰ä¼šåˆ›å»ºå®ä¾‹ã€‚å…¶æ‰©å®¹æœºåˆ¶ä¹Ÿé¢‡å…·ç‰¹è‰²ï¼š</p>
<ul>
<li>å½“å…ƒç´ æ•°é‡è¶…è¿‡é˜ˆå€¼ï¼ˆå®¹é‡çš„2/3ï¼‰æ—¶è§¦å‘æ‰©å®¹</li>
<li>æ–°å®¹é‡ä¸ºåŸå®¹é‡çš„2å€ï¼ˆä¿æŒ2çš„å¹‚ç‰¹æ€§ï¼‰</li>
<li>æ‰©å®¹è¿‡ç¨‹ä¸­ä¼šé‡æ–°è®¡ç®—æ‰€æœ‰Entryçš„å“ˆå¸Œä½ç½®ï¼Œå¹¶æ¸…ç†è¿‡æœŸEntryï¼ˆé”®ä¸ºnullçš„Entryï¼‰</li>
</ul>
<p>ä»¥ä¸‹æ˜¯æ‰©å®¹æ ¸å¿ƒä»£ç çš„ç®€åŒ–ç‰ˆï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">resize</span><span class="hljs-params">()</span> {
    Entry[] oldTab = table;
    <span class="hljs-type">int</span> <span class="hljs-variable">oldLen</span> <span class="hljs-operator">=</span> oldTab.length;
    <span class="hljs-type">int</span> <span class="hljs-variable">newLen</span> <span class="hljs-operator">=</span> oldLen * <span class="hljs-number">2</span>;
    Entry[] newTab = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Entry</span>[newLen];
    <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;

    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; oldLen; ++j) {
        <span class="hljs-type">Entry</span> <span class="hljs-variable">e</span> <span class="hljs-operator">=</span> oldTab[j];
        <span class="hljs-keyword">if</span> (e != <span class="hljs-literal">null</span>) {
            ThreadLocal&lt;?&gt; k = e.get();
            <span class="hljs-keyword">if</span> (k == <span class="hljs-literal">null</span>) {
                e.value = <span class="hljs-literal">null</span>; <span class="hljs-comment">// å¸®åŠ©GC</span>
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-type">int</span> <span class="hljs-variable">h</span> <span class="hljs-operator">=</span> k.threadLocalHashCode &amp; (newLen - <span class="hljs-number">1</span>);
                <span class="hljs-keyword">while</span> (newTab[h] != <span class="hljs-literal">null</span>)
                h = nextIndex(h, newLen);
                newTab[h] = e;
                count++;
            }
        }
    }

    setThreshold(newLen);
    size = count;
    table = newTab;
}
</code></pre>
<h3 data-id="heading-7">å˜é‡å­˜å–çš„å®Œæ•´æµç¨‹è§£æ</h3>
<p><strong>set()æ–¹æ³•çš„æ‰§è¡Œé€»è¾‘</strong>ï¼š</p>
<ol>
<li>è·å–å½“å‰çº¿ç¨‹çš„ThreadLocalMap</li>
<li>è‹¥Mapä¸å­˜åœ¨åˆ™åˆ›å»ºï¼ˆè°ƒç”¨createMap()ï¼‰</li>
<li>è®¡ç®—ThreadLocalå®ä¾‹çš„å“ˆå¸Œç </li>
<li>éå†Entryæ•°ç»„å¯»æ‰¾åˆé€‚ä½ç½®ï¼ˆå¤„ç†å“ˆå¸Œå†²çªï¼‰</li>
<li>æ›¿æ¢å·²æœ‰Entryæˆ–æ–°å¢Entry</li>
<li>æ¸…ç†è¿‡æœŸEntryå¹¶æ£€æŸ¥æ˜¯å¦éœ€è¦æ‰©å®¹</li>
</ol>
<p><strong>get()æ–¹æ³•çš„æ‰§è¡Œé€»è¾‘</strong>ï¼š</p>
<ol>
<li>è·å–å½“å‰çº¿ç¨‹çš„ThreadLocalMap</li>
<li>è‹¥Mapä¸å­˜åœ¨åˆ™åˆå§‹åŒ–å¹¶è¿”å›åˆå§‹å€¼ï¼ˆé€šè¿‡initialValue()ï¼‰</li>
<li>è®¡ç®—å“ˆå¸Œç å¹¶æŸ¥æ‰¾å¯¹åº”Entry</li>
<li>è‹¥æ‰¾åˆ°æœ‰æ•ˆEntryåˆ™è¿”å›å€¼ï¼Œå¦åˆ™è¿”å›åˆå§‹å€¼</li>
<li>æŸ¥æ‰¾è¿‡ç¨‹ä¸­ä¼šé¡ºä¾¿æ¸…ç†è¿‡æœŸEntry</li>
</ol>
<p>è¿™ç§"<strong>æ‡’åŠ è½½+æŒ‰éœ€åˆå§‹åŒ–</strong>"çš„ç­–ç•¥ï¼Œæ—¢èŠ‚çœäº†å†…å­˜ç©ºé—´ï¼Œåˆä¿è¯äº†çº¿ç¨‹é¦–æ¬¡è®¿é—®æ—¶çš„æ­£ç¡®æ€§ã€‚</p>
<h2 data-id="heading-8">ThreadLocalçš„å…¸å‹åº”ç”¨åœºæ™¯ä¸æ¶æ„ä»·å€¼</h2>
<h3 data-id="heading-9">æ•°æ®åº“è¿æ¥ç®¡ç†ï¼šäº‹åŠ¡éš”ç¦»çš„åŸºçŸ³</h3>
<p>åœ¨JDBCç¼–ç¨‹ä¸­ï¼Œä¸€ä¸ªæ•°æ®åº“è¿æ¥ï¼ˆConnectionï¼‰é€šå¸¸ä¸èƒ½è¢«å¤šçº¿ç¨‹å…±äº«ã€‚ThreadLocalå®Œç¾è§£å†³äº†è¿™ä¸€é—®é¢˜â€”â€”<strong>ä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…ç‹¬ç«‹çš„è¿æ¥å®ä¾‹</strong>ï¼Œç¡®ä¿äº‹åŠ¡æ“ä½œçš„åŸå­æ€§ã€‚Springæ¡†æ¶çš„TransactionSynchronizationManageræ­£æ˜¯é‡‡ç”¨è¿™ç§æœºåˆ¶ï¼Œå°†æ•°æ®åº“è¿æ¥ä¸å½“å‰çº¿ç¨‹ç»‘å®šï¼Œå®ç°äº†å£°æ˜å¼äº‹åŠ¡çš„ä¼˜é›…å°è£…ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConnectionHolder</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ThreadLocal&lt;Connection&gt; connectionHolder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Connection <span class="hljs-title function_">getConnection</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> connectionHolder.get();
        <span class="hljs-keyword">if</span> (conn == <span class="hljs-literal">null</span>) {
            conn = DriverManager.getConnection(DB_URL, USER, PASS);
            connectionHolder.set(conn);
        }
        <span class="hljs-keyword">return</span> conn;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">releaseConnection</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> connectionHolder.get();
        <span class="hljs-keyword">if</span> (conn != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">try</span> {
                conn.close();
            } <span class="hljs-keyword">catch</span> (SQLException e) {
                <span class="hljs-comment">// å¼‚å¸¸å¤„ç†</span>
            }
            connectionHolder.remove(); <span class="hljs-comment">// å¿…é¡»æ¸…ç†ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼</span>
        }
    }
}
</code></pre>
<h3 data-id="heading-10">åˆ†å¸ƒå¼è¿½è¸ªï¼šè·¨æœåŠ¡è°ƒç”¨çš„ä¸Šä¸‹æ–‡ä¼ é€’</h3>
<p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œåˆ†å¸ƒå¼è¿½è¸ªç³»ç»Ÿï¼ˆå¦‚Zipkinã€SkyWalkingï¼‰éœ€è¦åœ¨è·¨æœåŠ¡è°ƒç”¨æ—¶ä¼ é€’è¿½è¸ªä¸Šä¸‹æ–‡ã€‚ThreadLocalå¯ä»¥<strong>æš‚å­˜å½“å‰çº¿ç¨‹çš„è¿½è¸ªä¿¡æ¯</strong>ï¼ˆå¦‚TraceIdã€SpanIdï¼‰ï¼Œé€šè¿‡æ‹¦æˆªå™¨åœ¨æœåŠ¡è°ƒç”¨å‰åè‡ªåŠ¨ä¼ é€’è¿™äº›ä¿¡æ¯ã€‚è¿™ç§æ–¹å¼é¿å…äº†åœ¨æ–¹æ³•å‚æ•°ä¸­æ˜¾å¼ä¼ é€’ä¸Šä¸‹æ–‡ï¼Œæå¤§ç®€åŒ–äº†ä»£ç å®ç°ã€‚</p>
<h3 data-id="heading-11">çŠ¶æ€ç®¡ç†ï¼šæ— çŠ¶æ€æœåŠ¡çš„çŠ¶æ€æŒæœ‰æ–¹æ¡ˆ</h3>
<p>RESTful APIè®¾è®¡å€¡å¯¼æœåŠ¡çš„æ— çŠ¶æ€æ€§ï¼Œä½†å®é™…ä¸šåŠ¡ä¸­å¾€å¾€éœ€è¦ç»´æŠ¤ç”¨æˆ·ä¼šè¯ã€è¯·æ±‚å¤´ç­‰çŠ¶æ€ä¿¡æ¯ã€‚ThreadLocalæä¾›äº†<strong>è¯·æ±‚çº§åˆ«çš„çŠ¶æ€å­˜å‚¨</strong>èƒ½åŠ›ï¼Œé…åˆServletçš„Filteræœºåˆ¶ï¼Œå¯ä»¥å°†ç”¨æˆ·è®¤è¯ä¿¡æ¯ã€è¯·æ±‚å‚æ•°ç­‰ä¸Šä¸‹æ–‡æ•°æ®ç»‘å®šåˆ°å½“å‰å¤„ç†çº¿ç¨‹ï¼Œåœ¨æ•´ä¸ªè¯·æ±‚ç”Ÿå‘½å‘¨æœŸå†…éšæ—¶è®¿é—®ã€‚Spring Securityçš„SecurityContextHolderå°±æ˜¯å…¸å‹åº”ç”¨æ¡ˆä¾‹ã€‚</p>
<h2 data-id="heading-12">ThreadLocalçš„å±€é™æ€§ï¼šéšè—åœ¨ä¾¿åˆ©èƒŒåçš„é™·é˜±</h2>
<h3 data-id="heading-13">çº¿ç¨‹æ± ç¯å¢ƒä¸‹çš„æ•°æ®æ±¡æŸ“é£é™©</h3>
<p>çº¿ç¨‹æ± çš„çº¿ç¨‹å¤ç”¨ç‰¹æ€§ä¸ThreadLocalçš„ç”Ÿå‘½å‘¨æœŸç®¡ç†å­˜åœ¨å¤©ç„¶çŸ›ç›¾ã€‚å½“çº¿ç¨‹ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œ<strong>ThreadLocalå˜é‡è‹¥æœªæ˜¾å¼æ¸…ç†</strong>ï¼Œåˆ™ä¸‹æ¬¡å¤ç”¨è¯¥çº¿ç¨‹æ—¶å¯èƒ½è¯»å–åˆ°æ—§æ•°æ®ï¼Œå¯¼è‡´éš¾ä»¥æ’æŸ¥çš„"å¹½çµæ•°æ®"é—®é¢˜ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå…¸å‹çš„é”™è¯¯æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é”™è¯¯ç¤ºä¾‹ï¼šçº¿ç¨‹æ± ç¯å¢ƒä¸‹æœªæ¸…ç†ThreadLocal</span>
<span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">1</span>);
ThreadLocal&lt;Integer&gt; threadLocal = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;();

executor.submit(() -&gt; {
    threadLocal.set(<span class="hljs-number">100</span>);
    System.out.println(<span class="hljs-string">"ä»»åŠ¡1: "</span> + threadLocal.get()); <span class="hljs-comment">// è¾“å‡º100</span>
});

executor.submit(() -&gt; {
    System.out.println(<span class="hljs-string">"ä»»åŠ¡2: "</span> + threadLocal.get()); <span class="hljs-comment">// å¯èƒ½è¾“å‡º100ï¼ˆæ•°æ®æ±¡æŸ“ï¼‰</span>
});

executor.shutdown();
</code></pre>
<h3 data-id="heading-14">å†…å­˜æ³„æ¼çš„æ½œåœ¨å¨èƒ</h3>
<p>å°½ç®¡ThreadLocalMapçš„Entryé”®æ˜¯å¼±å¼•ç”¨ï¼Œä½†<strong>å€¼ä»ç„¶æ˜¯å¼ºå¼•ç”¨</strong>ã€‚å¦‚æœThreadLocalå®ä¾‹è¢«å›æ”¶ï¼ˆå¦‚é™æ€å˜é‡è¢«å¸è½½ï¼‰ï¼Œè€Œçº¿ç¨‹ä»åœ¨è¿è¡Œï¼ˆå¦‚çº¿ç¨‹æ± æ ¸å¿ƒçº¿ç¨‹ï¼‰ï¼Œåˆ™Entryçš„é”®ä¼šå˜ä¸ºnullï¼Œä½†å€¼å¯¹è±¡ä»è¢«Entryå¼ºå¼•ç”¨ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚æ­£ç¡®çš„åšæ³•æ˜¯åœ¨ä½¿ç”¨å®Œæ¯•åä¸»åŠ¨è°ƒç”¨remove()æ–¹æ³•æ¸…ç†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">try</span> {
    threadLocal.set(value);
    <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘å¤„ç†</span>
} <span class="hljs-keyword">finally</span> {
    threadLocal.remove(); <span class="hljs-comment">// ç¡®ä¿æ¸…é™¤ï¼Œé¿å…å†…å­˜æ³„æ¼</span>
}
</code></pre>
<h3 data-id="heading-15">è·¨çº¿ç¨‹ä¼ é€’çš„å¤©ç„¶éšœç¢</h3>
<p>ThreadLocalè®¾è®¡çš„åˆè¡·å°±æ˜¯å˜é‡çš„çº¿ç¨‹éš”ç¦»ï¼Œå› æ­¤<strong>æ— æ³•ç›´æ¥åœ¨çˆ¶å­çº¿ç¨‹é—´ä¼ é€’æ•°æ®</strong>ã€‚åœ¨å¼‚æ­¥ç¼–ç¨‹åœºæ™¯ä¸‹ï¼ˆå¦‚CompletableFutureã€æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆè´¹ï¼‰ï¼Œä¸»çº¿ç¨‹è®¾ç½®çš„ThreadLocalå˜é‡åœ¨å­çº¿ç¨‹ä¸­æ— æ³•è®¿é—®ï¼Œè¿™æå¤§é™åˆ¶äº†å…¶åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„åº”ç”¨èŒƒå›´ã€‚</p>
<h2 data-id="heading-16">TTLï¼šThreadLocalçš„è·¨çº¿ç¨‹ä¼ é€’è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-17">TransmittableThreadLocalçš„è®¾è®¡ç†å¿µ</h3>
<p>é¢å¯¹ThreadLocalçš„è·¨çº¿ç¨‹ä¼ é€’éš¾é¢˜ï¼Œé˜¿é‡Œå·´å·´å¼€æºçš„TTLï¼ˆTransmittable ThreadLocalï¼‰æ¡†æ¶ç»™å‡ºäº†ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯<strong>åœ¨ä»»åŠ¡æäº¤ç»™çº¿ç¨‹æ± æ—¶ï¼Œè‡ªåŠ¨æ•è·å½“å‰çº¿ç¨‹çš„ThreadLocalçŠ¶æ€ï¼Œå¹¶åœ¨ä»»åŠ¡æ‰§è¡Œå‰å°†è¿™äº›çŠ¶æ€å¤åˆ¶åˆ°ç›®æ ‡çº¿ç¨‹</strong>ï¼Œæ‰§è¡Œå®Œæ¯•åå†æ¢å¤ç›®æ ‡çº¿ç¨‹çš„åŸæœ‰çŠ¶æ€ã€‚</p>
<h3 data-id="heading-18">TTLçš„å®ç°åŸç†æ·±åº¦å‰–æ</h3>
<p>TTLé€šè¿‡<strong>å­—èŠ‚ç å¢å¼ºæŠ€æœ¯</strong>å¯¹çº¿ç¨‹æ± çš„submit()ã€execute()ç­‰æ–¹æ³•è¿›è¡Œæ‹¦æˆªï¼Œåœ¨ä»»åŠ¡æäº¤å’Œæ‰§è¡Œçš„å…³é”®èŠ‚ç‚¹å®ŒæˆThreadLocalçŠ¶æ€çš„ä¼ é€’ï¼š</p>
<ol>
<li><strong>çŠ¶æ€æ•è·</strong>ï¼šå½“æäº¤ä»»åŠ¡æ—¶ï¼ŒTTLä¼šæ‰«æå½“å‰çº¿ç¨‹çš„æ‰€æœ‰TransmittableThreadLocalå®ä¾‹ï¼Œå°†å…¶é”®å€¼å¯¹å­˜å…¥ä¸´æ—¶å®¹å™¨</li>
<li><strong>çŠ¶æ€æ³¨å…¥</strong>ï¼šä»»åŠ¡åœ¨çº¿ç¨‹æ± æ‰§è¡Œå‰ï¼ŒTTLä¼šå°†æ•è·çš„çŠ¶æ€æ³¨å…¥åˆ°æ‰§è¡Œçº¿ç¨‹</li>
<li><strong>çŠ¶æ€æ¢å¤</strong>ï¼šä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼ŒTTLä¼šæ¢å¤æ‰§è¡Œçº¿ç¨‹åŸæœ‰çš„ThreadLocalçŠ¶æ€</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9d56909f0b14abd8d66da7168672833~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSG9tZWV5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360331&amp;x-signature=RUxwMJOx%2F1xxQLZsP3UUFKzq4c4%3D" alt="" loading="lazy"/></p>
<p>è¿™ç§æœºåˆ¶ç¡®ä¿äº†çº¿ç¨‹æ± ç¯å¢ƒä¸‹å˜é‡ä¼ é€’çš„é€æ˜æ€§ï¼ŒåŒæ—¶é¿å…äº†å¯¹ä¸šåŠ¡ä»£ç çš„ä¾µå…¥ã€‚TTLçš„æ ¸å¿ƒå®ç°ç±»TransmittableThreadLocalç»§æ‰¿è‡ªInheritableThreadLocalï¼Œä½†æ‰©å±•äº†çŠ¶æ€ä¼ é€’çš„èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-19">TTLçš„å®æˆ˜åº”ç”¨ï¼šä»ä»£ç æ”¹é€ åˆ°æ€§èƒ½ä¼˜åŒ–</h2>
<h3 data-id="heading-20">å¼•å…¥TTLä¾èµ–</h3>
<p>åœ¨Mavené¡¹ç›®ä¸­æ·»åŠ TTLä¾èµ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>transmittable-thread-local<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.14.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h3 data-id="heading-21">çº¿ç¨‹æ± åœºæ™¯ä¸‹çš„TTLä½¿ç”¨ç¤ºä¾‹</h3>
<p>ä»¥ä¸‹æ˜¯åœ¨çº¿ç¨‹æ± ä¸­ä¼ é€’ç”¨æˆ·ä¸Šä¸‹æ–‡çš„å…¸å‹æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. å®šä¹‰å¯ä¼ é€’çš„ThreadLocal</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserContext</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> TransmittableThreadLocal&lt;UserInfo&gt; context = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransmittableThreadLocal</span>&lt;&gt;();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">set</span><span class="hljs-params">(UserInfo userInfo)</span> {
        context.set(userInfo);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> UserInfo <span class="hljs-title function_">get</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> context.get();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">()</span> {
        context.remove();
    }
}

<span class="hljs-comment">// 2. åˆ›å»ºå¢å¼ºçš„çº¿ç¨‹æ± </span>
<span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> TtlExecutors.getTtlExecutorService(
    Executors.newFixedThreadPool(<span class="hljs-number">5</span>)
);

<span class="hljs-comment">// 3. åœ¨ä¸»çº¿ç¨‹è®¾ç½®ä¸Šä¸‹æ–‡</span>
UserContext.set(<span class="hljs-keyword">new</span> <span class="hljs-title class_">UserInfo</span>(<span class="hljs-string">"1001"</span>, <span class="hljs-string">"å¼ ä¸‰"</span>));

<span class="hljs-comment">// 4. æäº¤ä»»åŠ¡åˆ°çº¿ç¨‹æ± </span>
executor.submit(() -&gt; {
    <span class="hljs-comment">// å­çº¿ç¨‹ä¸­å¯ä»¥è·å–åˆ°ä¸»çº¿ç¨‹è®¾ç½®çš„ä¸Šä¸‹æ–‡</span>
    <span class="hljs-type">UserInfo</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> UserContext.get();
    System.out.println(<span class="hljs-string">"å­çº¿ç¨‹è·å–ç”¨æˆ·ä¿¡æ¯: "</span> + user.getName()); <span class="hljs-comment">// è¾“å‡º"å¼ ä¸‰"</span>
});

<span class="hljs-comment">// 5. æ¸…ç†ä¸Šä¸‹æ–‡</span>
UserContext.remove();
executor.shutdown();
</code></pre>
<h3 data-id="heading-22">ä¸Springæ¡†æ¶çš„é›†æˆæ–¹æ¡ˆ</h3>
<p>åœ¨Spring Bootåº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå®šä¹‰TaskExecutorå®ç°TTLçš„è‡ªåŠ¨é…ç½®ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TtlTaskExecutorConfig</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Executor <span class="hljs-title function_">taskExecutor</span><span class="hljs-params">()</span> {
        <span class="hljs-type">ThreadPoolTaskExecutor</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolTaskExecutor</span>();
        executor.setCorePoolSize(<span class="hljs-number">5</span>);
        executor.setMaxPoolSize(<span class="hljs-number">10</span>);
        executor.setQueueCapacity(<span class="hljs-number">20</span>);
        executor.initialize();
        <span class="hljs-comment">// åŒ…è£…ä¸ºTTLå¢å¼ºçš„çº¿ç¨‹æ± </span>
        <span class="hljs-keyword">return</span> TtlExecutors.getTtlExecutor(executor);
    }
}
</code></pre>
<p>è¿™æ ·é…ç½®åï¼Œ@Asyncæ³¨è§£çš„å¼‚æ­¥æ–¹æ³•å°±èƒ½è‡ªåŠ¨ä¼ é€’TransmittableThreadLocalä¸­çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</p>
<h2 data-id="heading-23">ThreadLocalä¸TTLçš„é€‰å‹ç­–ç•¥ï¼šæ¶æ„è§†è§’çš„æƒè¡¡</h2>
<h3 data-id="heading-24">æŠ€æœ¯ç‰¹æ€§å¯¹æ¯”åˆ†æ</h3>








































<table><thead><tr><th>ç‰¹æ€§</th><th>ThreadLocal</th><th>TransmittableThreadLocal</th></tr></thead><tbody><tr><td>çº¿ç¨‹éš”ç¦»</td><td>âœ… å®Œç¾æ”¯æŒ</td><td>âœ… æ”¯æŒä¸”å¯é…ç½®ä¼ é€’è§„åˆ™</td></tr><tr><td>è·¨çº¿ç¨‹ä¼ é€’</td><td>âŒä¸æ”¯æŒ</td><td>âœ… åŸç”Ÿæ”¯æŒçº¿ç¨‹æ± ä¼ é€’</td></tr><tr><td>å†…å­˜å ç”¨</td><td>ä½</td><td>ä¸­ï¼ˆéœ€é¢å¤–å­˜å‚¨ä¼ é€’çŠ¶æ€ï¼‰</td></tr><tr><td>æ€§èƒ½æŸè€—</td><td>æä½</td><td>ä½ï¼ˆå­—èŠ‚ç å¢å¼ºå¸¦æ¥å¾®å°å¼€é”€ï¼‰</td></tr><tr><td>ä½¿ç”¨å¤æ‚åº¦</td><td>ç®€å•</td><td>ä¸­ç­‰ï¼ˆéœ€ç†è§£ä¼ é€’æœºåˆ¶ï¼‰</td></tr><tr><td>å…¼å®¹æ€§</td><td>JDKåŸç”Ÿæ”¯æŒ</td><td>éœ€å¼•å…¥ç¬¬ä¸‰æ–¹ä¾èµ–</td></tr></tbody></table>
<h3 data-id="heading-25">æ¶æ„è®¾è®¡ä¸­çš„å†³ç­–æŒ‡å—</h3>
<p><strong>ä¼˜å…ˆé€‰æ‹©ThreadLocalçš„åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç®€å•çš„å•çº¿ç¨‹åœºæ™¯ï¼ˆå¦‚Servletè¯·æ±‚å¤„ç†ï¼‰</li>
<li>æ— éœ€è·¨çº¿ç¨‹ä¼ é€’å˜é‡çš„åœºæ™¯</li>
<li>å¯¹æ€§èƒ½è¦æ±‚æé«˜ä¸”èµ„æºå—é™çš„ç³»ç»Ÿ</li>
</ul>
<p><strong>æ¨èä½¿ç”¨TTLçš„åœºæ™¯</strong>ï¼š</p>
<ul>
<li>åŸºäºçº¿ç¨‹æ± çš„å¼‚æ­¥ä»»åŠ¡å¤„ç†</li>
<li>å¾®æœåŠ¡æ¶æ„ä¸­çš„ä¸Šä¸‹æ–‡ä¼ é€’</li>
<li>åˆ†å¸ƒå¼è¿½è¸ªã€é“¾è·¯ç›‘æ§ç³»ç»Ÿ</li>
<li>ä»»ä½•éœ€è¦è·¨çº¿ç¨‹å…±äº«ä¸Šä¸‹æ–‡çš„åœºæ™¯</li>
</ul>
<h3 data-id="heading-26">æœ€ä½³å®è·µæ€»ç»“</h3>
<ol>
<li><strong>å§‹ç»ˆæ‰‹åŠ¨æ¸…ç†</strong>ï¼šæ— è®ºä½¿ç”¨ThreadLocalè¿˜æ˜¯TTLï¼Œéƒ½åº”åœ¨finallyå—ä¸­è°ƒç”¨remove()æ–¹æ³•</li>
<li><strong>é¿å…å­˜å‚¨å¤§å¯¹è±¡</strong>ï¼šThreadLocalä¸­å­˜å‚¨å¤§å¯¹è±¡å¯èƒ½å¯¼è‡´å†…å­˜å ç”¨è¿‡é«˜ï¼Œå°¤å…¶åœ¨æ ¸å¿ƒçº¿ç¨‹é•¿æœŸè¿è¡Œçš„åœºæ™¯</li>
<li><strong>è°¨æ…ä½¿ç”¨é™æ€ThreadLocal</strong>ï¼šé™æ€å®ä¾‹ç”Ÿå‘½å‘¨æœŸä¸ç±»ç›¸åŒï¼Œæ›´å®¹æ˜“å¼•å‘å†…å­˜æ³„æ¼</li>
<li><strong>çº¿ç¨‹æ± å¿…é¡»é…åˆTTL</strong>ï¼šåœ¨ä»»ä½•ä½¿ç”¨çº¿ç¨‹æ± çš„åœºæ™¯ï¼Œè‹¥éœ€ä¼ é€’ä¸Šä¸‹æ–‡ï¼ŒTTLæ˜¯ç›®å‰æœ€æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆ</li>
<li><strong>ç›‘æ§ä¸å‘Šè­¦</strong>ï¼šé€šè¿‡JVMç›‘æ§å·¥å…·ï¼ˆå¦‚VisualVMï¼‰å®šæœŸæ£€æŸ¥ThreadLocalçš„ä½¿ç”¨æƒ…å†µï¼Œé˜²æ­¢æ»¥ç”¨</li>
</ol>
<h2 data-id="heading-27">ç»“è¯­ï¼šç†è§£æœ¬è´¨ï¼Œæ–¹èƒ½å–„ç”¨å…¶åŠ›</h2>
<p>ThreadLocalä½œä¸ºJavaå¹¶å‘ç¼–ç¨‹çš„é‡è¦å·¥å…·ï¼Œå…¶ä»·å€¼ä¸ä»…åœ¨äºæä¾›çº¿ç¨‹å®‰å…¨çš„å˜é‡éš”ç¦»æ–¹æ¡ˆï¼Œæ›´åœ¨äºå®ƒå¯å‘æˆ‘ä»¬æ€è€ƒ**"ç©ºé—´æ¢æ—¶é—´"**çš„æ¶æ„è®¾è®¡æ€æƒ³ã€‚ä»JDKæºç ä¸­çš„ç²¾å¦™å®ç°ï¼Œåˆ°TTLæ¡†æ¶å¯¹è·¨çº¿ç¨‹ä¼ é€’éš¾é¢˜çš„ç ´è§£ï¼Œæ¯ä¸€æ­¥æŠ€æœ¯æ¼”è¿›éƒ½ä½“ç°ç€å¼€å‘è€…å¯¹å¹¶å‘æœ¬è´¨çš„æ·±åˆ»ç†è§£ã€‚</p>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæ²¡æœ‰æ”¾ä¹‹å››æµ·è€Œçš†å‡†çš„é“¶å¼¹ã€‚å”¯æœ‰æ·±å…¥ç†è§£æŠ€æœ¯åŸç†ï¼Œç»“åˆå…·ä½“ä¸šåŠ¡åœºæ™¯ï¼Œæ‰èƒ½åšå‡ºåˆç†çš„æŠ€æœ¯é€‰å‹ã€‚æ— è®ºæ˜¯åŸç”ŸThreadLocalçš„ç®€å•ç›´æ¥ï¼Œè¿˜æ˜¯TTLçš„çµæ´»å¼ºå¤§ï¼Œæœ€ç»ˆçš„ç›®æ ‡éƒ½æ˜¯æ„å»ºæ›´å¥å£®ã€æ›´æ˜“ç»´æŠ¤çš„ç³»ç»Ÿæ¶æ„ã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ çœŸæ­£æŒæ¡ThreadLocalçš„ç²¾é«“ï¼Œåœ¨å¹¶å‘ç¼–ç¨‹çš„ä¸–ç•Œä¸­ä»å®¹å‰è¡Œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç«™åœ¨MySQLè‚©è†€ä¸Šå¿«é€Ÿå…¥é—¨PostgreSQLï¼Œå¼€æºç¤¾åŒºæœ€å–œçˆ±çš„å…³ç³»æ•°æ®åº“]]></title>    <link>https://juejin.cn/post/7570630923710578740</link>    <guid>https://juejin.cn/post/7570630923710578740</guid>    <pubDate>2025-11-10T06:45:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570630923710578740" data-draft-id="7570630923710562356" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç«™åœ¨MySQLè‚©è†€ä¸Šå¿«é€Ÿå…¥é—¨PostgreSQLï¼Œå¼€æºç¤¾åŒºæœ€å–œçˆ±çš„å…³ç³»æ•°æ®åº“"/> <meta itemprop="keywords" content="PostgreSQL,MySQL"/> <meta itemprop="datePublished" content="2025-11-10T06:45:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èµµæ–‡å®‡"/> <meta itemprop="url" content="https://juejin.cn/user/283045668323520"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç«™åœ¨MySQLè‚©è†€ä¸Šå¿«é€Ÿå…¥é—¨PostgreSQLï¼Œå¼€æºç¤¾åŒºæœ€å–œçˆ±çš„å…³ç³»æ•°æ®åº“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/283045668323520/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èµµæ–‡å®‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:45:57.000Z" title="Mon Nov 10 2025 06:45:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>PostgreSQL æ˜¯ä¸€ä¸ªå¼€æºçš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œæ˜¯æœ€æµè¡Œçš„å¼€æºå…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¹‹ä¸€ï¼Œå…·æœ‰ strong SQL å…¼å®¹æ€§ï¼Œæ”¯æŒ ACID äº‹åŠ¡ï¼Œä»¥åŠä¸°å¯Œçš„æ‰©å±•åŠŸèƒ½ã€‚</p>
<p>æœ¬æ–‡ä¸»è¦åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š</p>
<ol>
<li>æˆ‘ä¸ºä»€ä¹ˆé€‰æ‹©PostgreSQL</li>
<li>åŸºäº Docker Compose å¿«é€Ÿå®‰è£… PostgreSQL</li>
<li>ç™»å½• PostgreSQL</li>
<li>PostgreSQLä¸MySQLå¸¸ç”¨è¯­æ³•å·®å¼‚</li>
<li>PostgreSQLç®¡ç†Shellå·¥å…·</li>
</ol>
<h2 data-id="heading-0">1.æˆ‘ä¸ºä»€ä¹ˆé€‰æ‹©PostgreSQL</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e122746530064a14bd9bf2e42d0d0476~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LW15paH5a6H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763361957&amp;x-signature=zjlRUlXPz0HfT802SvHKd80l0KQ%3D" alt="PostgreSQL" loading="lazy"/></p>
<p>å…¬ä¼—å·èŠå¤©çª—å£å‘é€ã€<strong>æ•°æ®åº“æ’å</strong>ã€‘å¯è·å–æœ€æ–°çš„æ•°æ®ç®¡ç†ç³»ç»Ÿæ’åèµ„æ–™ï¼ŒåŒ…å«å…³ç³»æ•°æ®åº“ã€KVå­˜å‚¨ã€æ—¶åºæ•°æ®åº“ã€ç¼“å­˜æ•°æ®åº“ã€æ–‡æ¡£æ•°æ®åº“ã€å›¾æ•°æ®åº“ã€å‘é‡æ•°æ®åº“ã€æœç´¢æ•°æ®åº“ã€åˆ—æ•°æ®åº“ç­‰ã€‚</p>
<p>ç”±äº Oracle å’Œ SQL Server æ˜¯å•†ä¸šçš„æ•°æ®åº“ï¼Œå¾ˆå¤šå¼€æºé¡¹ç›®åœ¨è¿›è¡Œå…³ç³»æ•°æ®åº“é€‰æ‹©æ—¶ä¼šé€‰æ‹©é»˜è®¤æ”¯æŒ MySQL å’Œ PostgreSQLã€‚ MySQLç”±äºç‰¹æ®Šçš„ç¤¾åŒºå‘å±•ç­‰åŸå› ï¼Œç”¨æˆ·é€æ¸å‘ MariaDB å’Œ PostgreSQL è¿ç§»ã€‚</p>
<p>è—äº‘é˜å¾ˆå¤šé¡¹ç›®å¦‚ Harborã€Giteaã€Keycloakã€Umamiã€Discourse é»˜è®¤éƒ½æ”¯æŒä½¿ç”¨ PostgreSQLï¼Œæ‰€ä»¥åœ¨å¹³å°å»ºè®¾æ—¶ä¹Ÿå°±é€‰æ‹©äº† PostgreSQLã€‚</p>
<p>æ–°ç”¨æˆ·ä»ä¹‹å‰ç†Ÿæ‚‰çš„ MySQL åˆ‡æ¢æˆ PostgreSQL å¹¶ä¸å›°éš¾ï¼Œè¿™ç¯‡æ–‡ç« çš„å†…å®¹è™½ç„¶ä¸å¤šä½†ä¹ŸåŸºæœ¬èƒ½å¤Ÿæ”¯æ’‘ä»MySQLåˆ‡æ¢æˆPostgreSQLã€‚</p>
<p>ç”±äºSQLæ ‡å‡†æ˜¯ä¸€æ ·ï¼Œæ‰€ä»¥åœ¨è¿›è¡Œæ•°æ®åº“ä½¿ç”¨æ—¶ï¼Œæ•°æ®çš„å¢åˆ æ”¹æŸ¥çš„è¯­æ³•å·®å¼‚è¾ƒå°ã€‚ä½†æ˜¯å¯¹äºæ•°æ®åº“ç®¡ç†æœ‰å·®å¼‚è¾ƒå¤§ï¼Œæ–°æ‰‹éœ€è¦é‡ç‚¹å…³æ³¨ï¼Œä¹Ÿæ˜¯æœ¬æ–‡çš„é‡ç‚¹ã€‚</p>
<h2 data-id="heading-1">2.åŸºäº Docker Compose å¿«é€Ÿå®‰è£… PostgreSQL</h2>
<p>PostgreSQL æœ‰å¤šç§å®‰è£…æ–¹å¼ï¼Œè¿™é‡Œä»¥ Docker Compose å¿«é€Ÿå®‰è£… PostgreSQL ä¸ºä¾‹ã€‚</p>
<p>å¦‚æœå®‰è£… Docker å—é˜»å¯ä»¥å‚è€ƒæ–‡ç« ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FqRKYuYOJIVDdHT-As3qk3g" target="_blank" title="https://mp.weixin.qq.com/s/qRKYuYOJIVDdHT-As3qk3g" ref="nofollow noopener noreferrer">æ— æ³•è®¿é—®Dockerå®˜ç½‘ï¼Œå›½å†…å¦‚ä½•åˆè§„é«˜æ•ˆå®‰è£…Dockerè½¯ä»¶[æœ€ä½³å®è·µ]</a></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">services:</span>
  <span class="hljs-attr">pgsql:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">harbor.cncfstack.com/docker.io/library/postgres:14.19</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">pgsql</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_USER=user0001</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_PASSWORD=pwd0001</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_DB=myfirstdb</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/etc/localtime:/etc/localtime</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/data/postgressql-data:/var/lib/postgresql/data</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"5432:5432"</span>
    <span class="hljs-attr">deploy:</span>
      <span class="hljs-attr">resources:</span>
        <span class="hljs-attr">limits:</span>
          <span class="hljs-attr">cpus:</span> <span class="hljs-string">'2'</span>
          <span class="hljs-attr">memory:</span> <span class="hljs-string">4G</span>
</code></pre>
<p>PostgreSQLé»˜è®¤çš„é…ç½®åŸºæœ¬æ»¡è¶³ä½¿ç”¨äº†ï¼Œæˆ‘å°±æ²¡æœ‰æŒ‚è½½é…ç½®æ–‡ä»¶ã€‚å¦‚æœæœ‰ç‰¹æ®Šçš„é…ç½®éœ€è¦è°ƒæ•´ï¼Œå¯ä»¥æ·»åŠ  command å’Œ volumes é…ç½®ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml">    <span class="hljs-attr">command:</span> [<span class="hljs-string">"postgres"</span>, <span class="hljs-string">"-c"</span>, <span class="hljs-string">"config_file=/etc/postgresql/postgresql.conf"</span>]
<span class="hljs-string">...</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/data/postgresql/conf/postgresql.conf:/etc/postgresql/postgresql.conf</span>
</code></pre>
<p>å¯åŠ¨å®¹å™¨ä½¿ç”¨ <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fcncfstack.com%2Fapp%2Fimage" target="_blank" title="https://cncfstack.com/app/image" ref="nofollow noopener noreferrer">è—äº‘é˜é•œåƒä»“åº“</a></strong> å¯ä»¥å¿«é€Ÿæ‹‰å–ï¼Œå…¶ä»–ç‰ˆæœ¬é•œåƒå¯è‡ªè¡ŒæŸ¥æ‰¾æ›´æ¢ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e99db48aaacf4050b8c56e24565699e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LW15paH5a6H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763361957&amp;x-signature=WtF8JQ8qxBtlSYkSbf5nGRUC4HA%3D" alt="postgresqlç‰ˆæœ¬åˆ—è¡¨" loading="lazy"/></p>
<h2 data-id="heading-2">3.ç™»å½• PostgreSQL</h2>
<p>ä½¿ç”¨å®¹å™¨çš„æ–¹å¼å¯ä»¥å¾ˆä¾¿æ·çš„ç™»å½•åˆ°PostgreSQLä¸­ï¼Œä¸éœ€è¦åœ¨å®¿ä¸»æœºä¸Šå®‰è£…ä»»ä½•å·¥å…·ã€‚</p>
<p>ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ä¿®æ”¹ç›¸å…³çš„è´¦å·å¯†ç åœ°å€ä¿¡æ¯åå³å¯ç™»å½•ï¼Œåœ¨é€€å‡ºåç”±äº <code>--rm</code> é€‰é¡¹ä¹Ÿä¼šè‡ªåŠ¨æ¸…ç†è¯¥å®¹å™¨ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># docker run -it --rm -e PGPASSWORD=pwd0001 --network host -v /etc/localtime:/etc/localtime  harbor.cncfstack.com/docker.io/library/postgres:14.19 psql -h 127.0.0.1 -U user0001 -p 5432 -d myfirstdb</span>
psql (14.19 (Debian 14.19-1.pgdg13+1))
Type <span class="hljs-string">"help"</span> <span class="hljs-keyword">for</span> <span class="hljs-built_in">help</span>.

myfirstdb=<span class="hljs-comment">#</span>
</code></pre>
<p>è¿™é‡Œçœ‹ä¸Šå»å‘½ä»¤æ¯”è¾ƒé•¿ï¼Œæ–‡ç« æœ«å°¾ä¼šæä¾›ä¸€ä¸ªå°è£…å¥½çš„ Shell è„šæœ¬ï¼Œæ–¹ä¾¿ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-3">4.PostgreSQLä¸MySQLå¸¸ç”¨è¯­æ³•å·®å¼‚</h2>
<h3 data-id="heading-4">åŸºç¡€ä¿¡æ¯åŠç³»ç»Ÿä¿¡æ¯æŸ¥è¯¢å·®å¼‚</h3>
<p>åœ¨ PostgreSQL ä¸­ï¼Œå¾ˆå¤šç®¡ç†ç›¸å…³çš„å‘½ä»¤æ˜¯ä½¿ç”¨æŒ‡ä»¤çš„æ ¼å¼ï¼Œæ¯”è¾ƒç²¾ç®€ä½†ä¸å¤ªå¥½è®°ï¼Œéœ€è¦å¤šåŠ¨æ‰‹å®æ“åŠ æ·±å°è±¡ã€‚</p>











































































<table><thead><tr><th align="left">åŠŸèƒ½ / ç‰¹æ€§</th><th align="left">MySQL</th><th align="left">PostgreSQL</th></tr></thead><tbody><tr><td align="left">è·å–å¸®åŠ©ä¿¡æ¯</td><td align="left"><code>HELP 'contents';</code></td><td align="left"><code>\?</code></td></tr><tr><td align="left">æŸ¥çœ‹å‘½ä»¤å†å²</td><td align="left">ä¸æ”¯æŒ</td><td align="left"><code>\s</code></td></tr><tr><td align="left">é€€å‡ºç™»å½•</td><td align="left"><code>exit</code> æˆ– <code>quit</code> æˆ– <code>\q</code></td><td align="left"><code>\q</code></td></tr><tr><td align="left">å•è¡Œæ³¨é‡Š</td><td align="left"><code>#</code> æˆ– <code>--</code></td><td align="left"><code>--</code></td></tr><tr><td align="left">å­—ç¬¦ä¸²å¼•ç”¨</td><td align="left">å•å¼•å· <code>'</code> æˆ–åŒå¼•å· <code>"</code></td><td align="left">åªä½¿ç”¨å•å¼•å· <code>'</code> (åŒå¼•å·ç”¨äºæ ‡è¯†ç¬¦)</td></tr><tr><td align="left">æ ‡è¯†ç¬¦å¼•ç”¨</td><td align="left">åå¼•å· <code>`</code></td><td align="left">åŒå¼•å· <code>"</code></td></tr><tr><td align="left">å¤§å°å†™æ•æ„Ÿæ€§</td><td align="left">é»˜è®¤<strong>ä¸æ•æ„Ÿ</strong></td><td align="left">é»˜è®¤<strong>æ•æ„Ÿ</strong></td></tr><tr><td align="left">æ‰§è¡Œå¤–éƒ¨æ–‡ä»¶</td><td align="left"><code>SOURCE file_name;</code></td><td align="left"><code>\i filename</code></td></tr><tr><td align="left">æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯</td><td align="left"><code>SELECT VERSION();</code></td><td align="left"><code>SELECT version();</code></td></tr><tr><td align="left">æŸ¥çœ‹å½“å‰ç”¨æˆ·</td><td align="left"><code>SELECT USER();</code></td><td align="left"><code>SELECT current_user;</code></td></tr><tr><td align="left">æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·</td><td align="left"><code>SELECT user FROM mysql.user;</code></td><td align="left"><code>\du</code> æˆ– <code>SELECT usename FROM pg_user;</code></td></tr><tr><td align="left">æŸ¥çœ‹è¡¨ç©ºé—´</td><td align="left"><code>SHOW VARIABLES LIKE 'datadir';</code></td><td align="left"><code>\db</code> æˆ– <code>SELECT * FROM pg_tablespace;</code></td></tr><tr><td align="left">æŸ¥çœ‹æ‰©å±•/æ’ä»¶</td><td align="left"><code>SHOW PLUGINS;</code></td><td align="left"><code>\dx</code> æˆ– <code>SELECT * FROM pg_extension;</code></td></tr></tbody></table>
<h3 data-id="heading-5">æ•°æ®åº“ç›¸å…³æ“ä½œå·®å¼‚</h3>



































<table><thead><tr><th align="left">åŠŸèƒ½ / ç‰¹æ€§</th><th align="left">MySQL</th><th align="left">PostgreSQL</th></tr></thead><tbody><tr><td align="left">åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“</td><td align="left"><code>SHOW DATABASES;</code></td><td align="left"><code>\l</code></td></tr><tr><td align="left">è¿æ¥åˆ°æ•°æ®åº“</td><td align="left"><code>USE database_name;</code></td><td align="left"><code>\c database_name</code></td></tr><tr><td align="left">æŸ¥çœ‹å½“å‰æ•°æ®åº“</td><td align="left"><code>SELECT DATABASE();</code></td><td align="left"><code>SELECT current_database();</code></td></tr><tr><td align="left">æŸ¥çœ‹æ•°æ®åº“ä¿¡æ¯</td><td align="left"><code>SHOW CREATE DATABASE db_name;</code></td><td align="left"><code>\l+ db_name</code></td></tr><tr><td align="left">æŸ¥çœ‹è¿æ¥ä¿¡æ¯</td><td align="left"><code>SHOW PROCESSLIST;</code></td><td align="left"><code>SELECT * FROM pg_stat_activity;</code></td></tr></tbody></table>
<h3 data-id="heading-6">è¡¨ç›¸å…³æ“ä½œå·®å¼‚</h3>








































<table><thead><tr><th align="left">åŠŸèƒ½ / ç‰¹æ€§</th><th align="left">MySQL</th><th align="left">PostgreSQL</th></tr></thead><tbody><tr><td align="left">åˆ—å‡ºæ‰€æœ‰è¡¨</td><td align="left"><code>SHOW TABLES;</code></td><td align="left"><code>\dt</code></td></tr><tr><td align="left">åˆ—å‡ºæ‰€æœ‰è¡¨ï¼ˆå«ç³»ç»Ÿè¡¨ï¼‰</td><td align="left"><code>SHOW FULL TABLES;</code></td><td align="left"><code>\dt+ *.*</code></td></tr><tr><td align="left">æŸ¥çœ‹è¡¨ç»“æ„</td><td align="left"><code>DESCRIBE table_name;</code></td><td align="left"><code>\d table_name</code></td></tr><tr><td align="left">æŸ¥çœ‹è¯¦ç»†è¡¨ä¿¡æ¯</td><td align="left"><code>SHOW CREATE TABLE table_name;</code></td><td align="left"><code>\d+ table_name</code></td></tr><tr><td align="left">æŸ¥çœ‹è¡¨ç´¢å¼•</td><td align="left"><code>SHOW INDEX FROM table_name;</code></td><td align="left"><code>\d table_name</code></td></tr><tr><td align="left">æŸ¥çœ‹åˆ—ä¿¡æ¯</td><td align="left"><code>SHOW COLUMNS FROM table_name;</code></td><td align="left"><code>\d table_name</code></td></tr></tbody></table>
<h3 data-id="heading-7">æ¨¡å¼ï¼ˆSchemaï¼‰ç›¸å…³æ“ä½œå·®å¼‚</h3>

























<table><thead><tr><th align="left">åŠŸèƒ½ / ç‰¹æ€§</th><th align="left">MySQL</th><th align="left">PostgreSQL</th></tr></thead><tbody><tr><td align="left">åˆ—å‡ºæ‰€æœ‰æ¨¡å¼</td><td align="left"><code>SHOW DATABASES;</code></td><td align="left"><code>\dn</code></td></tr><tr><td align="left">æŸ¥çœ‹å½“å‰æ¨¡å¼</td><td align="left"><code>SELECT DATABASE();</code></td><td align="left"><code>SELECT current_schema();</code></td></tr><tr><td align="left">åˆ‡æ¢æ¨¡å¼</td><td align="left"><code>USE database_name;</code></td><td align="left"><code>SET search_path TO schema_name;</code></td></tr></tbody></table>
<h3 data-id="heading-8">åŠŸèƒ½è¯­æ³•å·®å¼‚</h3>











































































<table><thead><tr><th align="left">åŠŸèƒ½ / ç‰¹æ€§</th><th align="left">MySQL</th><th align="left">PostgreSQL</th></tr></thead><tbody><tr><td align="left">è‡ªå¢ä¸»é”®</td><td align="left"><code>AUTO_INCREMENT</code></td><td align="left"><code>SERIAL</code> æˆ– <code>GENERATED ... AS IDENTITY</code> (æ›´æ–°ç‰ˆæœ¬)</td></tr><tr><td align="left">è·å–æœ€åè‡ªå¢å€¼</td><td align="left"><code>3092147</code></td><td align="left">ä½¿ç”¨ <code>INSERT ... RETURNING id;</code> æˆ– <code>CURRVAL()</code></td></tr><tr><td align="left">åˆ†é¡µæŸ¥è¯¢</td><td align="left"><code>LIMIT size OFFSET offset</code> <br/> æˆ– <code>LIMIT offset, size</code></td><td align="left"><code>LIMIT size OFFSET offset</code></td></tr><tr><td align="left">æ£€æŸ¥ NULL å€¼</td><td align="left"><code>IS NULL</code> æˆ– <code>IS NOT NULL</code> (ä¸æ¨èä½¿ç”¨ <code>= NULL</code>)</td><td align="left">å¿…é¡»ä½¿ç”¨ <code>IS NULL</code> æˆ– <code>IS NOT NULL</code> (<code>= NULL</code> æ€»æ˜¯è¿”å›å‡)</td></tr><tr><td align="left">æ­£åˆ™è¡¨è¾¾å¼</td><td align="left"><code>REGEXP</code></td><td align="left"><code>~</code> (åŒºåˆ†å¤§å°å†™) æˆ– <code>~*</code> (ä¸åŒºåˆ†å¤§å°å†™)</td></tr><tr><td align="left">è·å–å½“å‰æ—¶é—´</td><td align="left"><code>NOW()</code></td><td align="left"><code>CURRENT_TIMESTAMP</code></td></tr><tr><td align="left">æ—¥æœŸå¢å‡</td><td align="left"><code>DATE_ADD(date, INTERVAL expr unit)</code></td><td align="left"><code>date + INTERVAL 'expr unit'</code></td></tr><tr><td align="left">IFNULL ç­‰æ•ˆå‡½æ•°</td><td align="left"><code>IFNULL(expr, fallback)</code></td><td align="left"><code>COALESCE(expr, fallback)</code></td></tr><tr><td align="left">ç±»å‹è½¬æ¢</td><td align="left"><code>CAST(expr AS type)</code> <br/> æˆ– <code>CONVERT(expr, type)</code></td><td align="left"><code>CAST(expr AS type)</code> <br/> æˆ– <code>expr::type</code></td></tr><tr><td align="left">å…¬å…±è¡¨è¡¨è¾¾å¼</td><td align="left">8.0+ ç‰ˆæœ¬æ”¯æŒ</td><td align="left">æ”¯æŒ</td></tr><tr><td align="left">çª—å£å‡½æ•°</td><td align="left">8.0+ ç‰ˆæœ¬æ”¯æŒ</td><td align="left">æ”¯æŒ</td></tr><tr><td align="left">JSON æ”¯æŒ</td><td align="left">JSON ç±»å‹ (5.7+)</td><td align="left">JSONB (äºŒè¿›åˆ¶ï¼Œæ€§èƒ½æ›´ä¼˜)</td></tr><tr><td align="left">GIS æ”¯æŒ</td><td align="left">ç©ºé—´æ•°æ®ç±»å‹</td><td align="left">PostGIS æ‰©å±• (åŠŸèƒ½å¼ºå¤§)</td></tr></tbody></table>
<h2 data-id="heading-9">5.PostgreSQLç®¡ç†Shellå·¥å…·</h2>
<p>åœ¨å®¹å™¨ä½¿ç”¨æ—¶ï¼Œä¸ºäº†æ›´é«˜æ•ˆçš„ä½¿ç”¨ PostgreSQLï¼Œå¯ä»¥å°è£…ä¸€ä¸ª PostgreSQL ç®¡ç†å·¥å…·ï¼Œæ–¹ä¾¿ä½¿ç”¨ã€‚</p>
<p>è¿™é‡Œæ˜¯æˆ‘å°è£…çš„å·¥å…·ï¼Œä¸€ä¸ªé…ç½®æ–‡ä»¶ <code>env</code> å’Œä¸€ä¸ªè„šæœ¬ <code>pgtools.sh</code> æ–‡ä»¶ï¼Œè¯¥è„šæœ¬ä¸»è¦æä¾›äº†4ä¸ªåŠŸèƒ½ï¼šç™»å½•ã€åˆ›å»ºæ•°æ®åº“ã€å¤‡ä»½æ•°æ®åº“ã€æ¢å¤æ•°æ®åº“ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">./pgtools.sh
Must have optionï¼Œexample: ./pgtools.sh login postgres
./pgtools.sh login &lt;dbname&gt;
./pgtools.sh createdb &lt;dbname&gt;
./pgtools.sh backup &lt;dbname&gt;
./pgtools.sh restore &lt;dbname&gt;
</code></pre>
<ul>
<li><strong>envé…ç½®æ–‡ä»¶</strong></li>
</ul>
<p>envé…ç½®æ–‡ä»¶ä¸»è¦æ˜¯ä¸€äº›æ•æ„Ÿä¿¡æ¯å’ŒåŠ¨æ€ä¿¡æ¯ï¼Œç›´æ¥å†™æ­»åœ¨è„šæœ¬ä¸­ä¼šå¯¼è‡´è„šæœ¬çš„å…¼å®¹æ€§å·®ï¼Œæ‰€ä»¥å¯ä»¥ç‹¬ç«‹é…ç½®ï¼Œæ–¹ä¾¿åç»­ä¿®æ”¹ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">export</span> PG_IP=`ip addr show eth0 |grep <span class="hljs-string">"inet\ "</span>|awk -F<span class="hljs-string">'/'</span> <span class="hljs-string">'{print $1}'</span>|awk <span class="hljs-string">'{print $2}'</span>`
<span class="hljs-built_in">export</span> PG_PASSWORD=<span class="hljs-string">'pwd0001'</span>
<span class="hljs-built_in">export</span> PG_USER=user0001
<span class="hljs-built_in">export</span> PG_PORT=5432
</code></pre>
<ul>
<li><strong>PostgreSQL ç®¡ç†å·¥å…· pgtools.sh æ–‡ä»¶</strong></li>
</ul>
<p>è„šæœ¬ä¸­ç›´æ¥æœ‰ä¸€ä¸ªå­—ç¬¦ä¸² <code>YOUR_OSS_BUCKET</code> éœ€è¦ä¿®æ”¹ä¸ºè‡ªå·±çš„OSSå­˜å‚¨æ¡¶åç§°ã€‚</p>
<p>åœ¨è„šæœ¬å‡†å¤‡å®Œæˆåï¼Œå¯ä»¥æ·»åŠ å¯æ‰§è¡Œæƒé™å¹¶å°† PATH æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œæ–¹ä¾¿ä½¿ç”¨ã€‚</p>
<p>è¯¦ç»†çš„è„šæœ¬å†…å®¹</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

SUBCMD=<span class="hljs-variable">$1</span>
DBNAME=<span class="hljs-variable">$2</span>

<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$#</span> -ne 2 ];<span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"MUST have optionï¼Œexample: <span class="hljs-variable">$0</span> login postgres"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$0</span> login &lt;dbname&gt;"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$0</span> createdb &lt;dbname&gt;"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$0</span> backup &lt;dbname&gt;"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$0</span> restore &lt;dbname&gt;"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">source</span> `<span class="hljs-built_in">dirname</span> <span class="hljs-variable">$0</span>`/env

DATETIME=`<span class="hljs-built_in">date</span> +%Y%m%d-%H%M%S`

BAK_DIR=<span class="hljs-string">"/data/backup/postgresql"</span>
<span class="hljs-keyword">if</span> [ ! -d <span class="hljs-variable">$BAK_DIR</span> ];<span class="hljs-keyword">then</span>
    <span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">$BAK_DIR</span>
<span class="hljs-keyword">fi</span>

BAK_FILE=<span class="hljs-variable">${BAK_DIR}</span>/<span class="hljs-variable">${DBNAME}</span>/<span class="hljs-variable">${DBNAME}</span>-<span class="hljs-variable">${PG_IP}</span>-<span class="hljs-variable">${DATETIME}</span>.sql
<span class="hljs-keyword">if</span> [ ! -d <span class="hljs-variable">${BAK_DIR}</span>/<span class="hljs-variable">${DBNAME}</span> ];<span class="hljs-keyword">then</span>
     <span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">${BAK_DIR}</span>/<span class="hljs-variable">${DBNAME}</span>
<span class="hljs-keyword">fi</span>

PGCLI_RM=<span class="hljs-string">"docker run -it --rm -e POSTGRES_PASSWORD=<span class="hljs-variable">$PG_PASSWORD</span> -e PGPASSWORD=<span class="hljs-variable">$PG_PASSWORD</span> -v /data/backup:/data/backup -v /etc/localtime:/etc/localtime  harbor.cncfstack.com/docker.io/library/postgres:14.19 "</span>

<span class="hljs-function"><span class="hljs-title">login</span></span>(){
    <span class="hljs-variable">$PGCLI_RM</span> psql -h <span class="hljs-variable">$PG_IP</span> -U <span class="hljs-variable">$PG_USER</span> -p <span class="hljs-variable">$PG_PORT</span> -d <span class="hljs-variable">$DBNAME</span>
}

<span class="hljs-function"><span class="hljs-title">createdb</span></span>(){
    <span class="hljs-variable">$PGCLI_RM</span> createdb -h <span class="hljs-variable">$PG_IP</span> -U <span class="hljs-variable">$PG_USER</span> -p <span class="hljs-variable">$PG_PORT</span> <span class="hljs-variable">$DBNAME</span>
}

<span class="hljs-function"><span class="hljs-title">backup</span></span>(){
  <span class="hljs-variable">$PGCLI_RM</span> pg_dump -h <span class="hljs-variable">$PG_IP</span> -p <span class="hljs-variable">$PG_PORT</span> -U cygpgsql -d <span class="hljs-variable">$DBNAME</span> -f <span class="hljs-variable">$BAK_FILE</span>
  ossutil <span class="hljs-built_in">cp</span> -f <span class="hljs-variable">$BAK_FILE</span> oss://YOUR_OSS_BUCKET/postgresql/<span class="hljs-variable">${DBNAME}</span>/<span class="hljs-variable">${DBNAME}</span>-<span class="hljs-variable">${PG_IP}</span>-<span class="hljs-variable">${DATETIME}</span>.sql
}

<span class="hljs-function"><span class="hljs-title">restore</span></span>(){
   <span class="hljs-variable">$PGCLI_RM</span> psql -h <span class="hljs-variable">$PG_IP</span> -p <span class="hljs-variable">$PG_PORT</span> -U <span class="hljs-variable">$PG_USER</span> -d <span class="hljs-variable">$DBNAME</span> -f /data/backup/<span class="hljs-variable">${DBNAME}</span>.sql
}

<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$SUBCMD</span> = <span class="hljs-string">"login"</span> ];<span class="hljs-keyword">then</span>
    login
<span class="hljs-keyword">elif</span> [ <span class="hljs-variable">$SUBCMD</span> = <span class="hljs-string">"createdb"</span> ];<span class="hljs-keyword">then</span>
    createdb
<span class="hljs-keyword">elif</span> [ <span class="hljs-variable">$SUBCMD</span> = <span class="hljs-string">"backup"</span> ];<span class="hljs-keyword">then</span>
    backup
<span class="hljs-keyword">elif</span> [ <span class="hljs-variable">$SUBCMD</span> = <span class="hljs-string">"restore"</span> ];<span class="hljs-keyword">then</span>
    restore
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Unkonw SUBCMD"</span>
    <span class="hljs-built_in">exit</span> 2
<span class="hljs-keyword">fi</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ–°æ‰‹ä¹Ÿèƒ½ä¸Šæ‰‹ï¼šä»é›¶å†™ä¸€ä¸ªé¸¿è’™ï¼ˆHarmonyOSï¼‰åº”ç”¨çš„æœ€çŸ­è·¯å¾„]]></title>    <link>https://juejin.cn/post/7570339961909297195</link>    <guid>https://juejin.cn/post/7570339961909297195</guid>    <pubDate>2025-11-10T06:15:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570339961909297195" data-draft-id="7570295366480461860" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ–°æ‰‹ä¹Ÿèƒ½ä¸Šæ‰‹ï¼šä»é›¶å†™ä¸€ä¸ªé¸¿è’™ï¼ˆHarmonyOSï¼‰åº”ç”¨çš„æœ€çŸ­è·¯å¾„"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2025-11-10T06:15:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¿»æ–—èŠ±å›­èƒ¡è‹±ä¿Š"/> <meta itemprop="url" content="https://juejin.cn/user/1662117311953688"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ–°æ‰‹ä¹Ÿèƒ½ä¸Šæ‰‹ï¼šä»é›¶å†™ä¸€ä¸ªé¸¿è’™ï¼ˆHarmonyOSï¼‰åº”ç”¨çš„æœ€çŸ­è·¯å¾„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1662117311953688/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¿»æ–—èŠ±å›­èƒ¡è‹±ä¿Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:15:46.000Z" title="Mon Nov 10 2025 06:15:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‡†å¤‡å¼€å‘ç¯å¢ƒ</h2>
<ol>
<li>å®‰è£… <strong>DevEco Studio</strong>ï¼ˆåä¸ºå®˜æ–¹ IDEï¼‰ï¼Œé¦–æ¬¡å¯åŠ¨æŒ‰å‘å¯¼ä¸‹è½½å¯¹åº”çš„ <strong>HarmonyOS SDK</strong>ã€‚</li>
<li>å¦‚æœæ²¡æœ‰çœŸæœºï¼Œåˆ›å»ºä¸€ä¸ª <strong>æ¨¡æ‹Ÿå™¨</strong>ï¼ˆé€‰æ‹©ä¸å·¥ç¨‹ API ç‰ˆæœ¬åŒ¹é…çš„ç³»ç»Ÿé•œåƒï¼‰ã€‚</li>
<li>æ–°å»ºå·¥ç¨‹ï¼š<code>Create HarmonyOS Project â†’ Application (ArkTS / Stage) â†’ Empty Ability</code>ï¼Œå¡«å†™åŒ…åï¼ˆ<code>com.example.demo</code> ä¹‹ç±»ï¼‰ã€è®¾å¤‡ç±»å‹ï¼ˆPhone/Tabletï¼‰ï¼Œå®Œæˆå³å¯ã€‚</li>
</ol>
<blockquote>
<p>å°è´´å£«ï¼šçœŸæœºè°ƒè¯•éœ€å¼€å¯å¼€å‘è€…æ¨¡å¼ä¸ HDBï¼›æ¨¡æ‹Ÿå™¨ä¸éœ€è¦è¯ä¹¦ç­¾åï¼Œå‘å¸ƒåˆ°å•†åº—æ‰éœ€è¦ã€‚</p>
</blockquote>
<h2 data-id="heading-1">äºŒã€è®¤è¯†é¡¹ç›®ç»“æ„ï¼ˆç²¾ç®€ç‰ˆï¼‰</h2>
<ul>
<li><code>entry/src/main/ets/pages/</code>ï¼šé¡µé¢ä»£ç ï¼Œåç¼€ <code>.ets</code>ï¼Œé‡‡ç”¨ ArkTS å£°æ˜å¼ UIã€‚</li>
<li><code>app.json5</code> / <code>module.json5</code>ï¼šåº”ç”¨ä¸æ¨¡å—é…ç½®ï¼ˆåŒ…åã€æƒé™ã€å…¥å£ Ability ç­‰ï¼‰ã€‚</li>
<li><code>resources/</code>ï¼šå›¾ç‰‡ã€å­—ç¬¦ä¸²ç­‰èµ„æºã€‚</li>
<li><code>build-profile.json5</code>ï¼šæ„å»ºä¸ç­¾åé…ç½®ï¼ˆå‘å¸ƒé˜¶æ®µä¼šç”¨åˆ°ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-2">ä¸‰ã€å†™ä¸€ä¸ªä¸¤é¡µå°åº”ç”¨ï¼ˆè®¡æ•° + è·¯ç”±ï¼‰</h2>
<p>IDE ä¼šç”Ÿæˆé¦–é¡µ <code>Index.ets</code>ã€‚æˆ‘ä»¬å†å»ºä¸€ä¸ª <code>Detail.ets</code>ï¼Œå±•ç¤ºä»é¦–é¡µä¼ é€’è¿‡æ¥çš„å‚æ•°ã€‚</p>
<p><strong>Index.ets</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.router'</span>;

@<span class="hljs-title class_">Entry</span>
@<span class="hljs-title class_">Component</span>
struct <span class="hljs-title class_">Index</span> {
  @<span class="hljs-title class_">State</span> <span class="hljs-attr">count</span>: number = <span class="hljs-number">0</span>;

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">16</span> }) {
      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Hello HarmonyOS'</span>)
        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">24</span>).<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)

      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`count: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.count}</span>`</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">18</span>)

      <span class="hljs-title class_">Row</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">12</span> }) {
        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'+1'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++)
        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'å»è¯¦æƒ…'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {
          router.<span class="hljs-title function_">pushUrl</span>({
            <span class="hljs-attr">url</span>: <span class="hljs-string">'pages/Detail'</span>,
            <span class="hljs-attr">params</span>: { <span class="hljs-attr">from</span>: <span class="hljs-string">'Index'</span>, <span class="hljs-attr">value</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> }
          });
        })
      }
    }
    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)
    .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Center</span>)
    .<span class="hljs-title function_">padding</span>(<span class="hljs-number">24</span>)
  }
}

</code></pre>
<p>Detail.ets</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.router'</span>;

@<span class="hljs-title class_">Entry</span>
@<span class="hljs-title class_">Component</span>
struct <span class="hljs-title class_">Detail</span> {
  private <span class="hljs-attr">from</span>: string = (router.<span class="hljs-title function_">getParams</span>()?.<span class="hljs-property">from</span> <span class="hljs-keyword">as</span> string) ?? <span class="hljs-string">'unknown'</span>;
  private <span class="hljs-attr">value</span>: number = (router.<span class="hljs-title function_">getParams</span>()?.<span class="hljs-property">value</span> <span class="hljs-keyword">as</span> number) ?? <span class="hljs-number">0</span>;

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">16</span> }) {
      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Detail Page'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">22</span>).<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Medium</span>)
      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`æ¥è‡ª: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.<span class="hljs-keyword">from</span>}</span>`</span>)
      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`æ”¶åˆ°çš„ count: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.value}</span>`</span>)

      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'è¿”å›'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> router.<span class="hljs-title function_">back</span>())
    }
    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)
    .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Center</span>)
    .<span class="hljs-title function_">padding</span>(<span class="hljs-number">24</span>)
  }
}

</code></pre>
<p>è¯´æ˜ï¼šArkUI ä½¿ç”¨å£°æ˜å¼ç»„ä»¶ï¼ˆ<code>Column/Row/Text/Button</code> ç­‰ï¼‰ä¸é“¾å¼å±æ€§ï¼Œæ•°æ®ç”¨ <code>@State</code> å“åº”å¼æ›´æ–°ï¼›<code>@ohos.router</code> è´Ÿè´£é¡µé¢è·³è½¬ä¸å‚æ•°ä¼ é€’ã€‚è·¯ç”± URL ä¸€èˆ¬ä¸æ–‡ä»¶è·¯å¾„ä¸€è‡´ï¼Œå¦‚ <code>pages/Detail</code> å¯¹åº” <code>pages/Detail.ets</code>ã€‚</p>
<h2 data-id="heading-3">å››ã€è¿è¡Œä¸è°ƒè¯•</h2>
<ul>
<li><strong>é¢„è§ˆ/æ¨¡æ‹Ÿå™¨</strong>ï¼šIDE é¡¶éƒ¨é€‰æ‹©è®¾å¤‡ï¼Œç‚¹å‡» â–¶ å³å¯å®‰è£…è¿è¡Œã€‚</li>
<li><strong>çœŸæœºè°ƒè¯•</strong>ï¼šUSB è¿æ¥ï¼Œå…è®¸ HDBï¼Œåœ¨è®¾å¤‡åˆ—è¡¨ä¸­é€‰æ‹©çœŸæœºã€‚</li>
<li><strong>è°ƒè¯•æŠ€å·§</strong>ï¼šå–„ç”¨ <code>Log</code> ä¸ IDE çš„ <strong>Layout Inspector</strong>ï¼Œå¿«é€Ÿå®šä½ UI ä¸çŠ¶æ€é—®é¢˜ã€‚</li>
</ul>
<h2 data-id="heading-4">äº”ã€å¸¸è§å‘ä½ä¸è§„é¿</h2>
<ul>
<li><strong>API ç‰ˆæœ¬ä¸åŒ¹é…</strong>ï¼šå·¥ç¨‹ç¼–è¯‘ç‰ˆæœ¬éœ€ä¸æ¨¡æ‹Ÿå™¨/çœŸæœºç³»ç»Ÿç‰ˆæœ¬å…¼å®¹ï¼Œå¦åˆ™æ— æ³•å®‰è£…ã€‚</li>
<li><strong>ç­¾åä¸å‘å¸ƒ</strong>ï¼šè°ƒè¯•é˜¶æ®µå¯ä»¥ç”¨è°ƒè¯•æ„å»ºï¼›ä¸Šæ¶éœ€é…ç½®ç­¾åä¸ <strong>HAP</strong> å‘å¸ƒåŒ…ã€‚</li>
<li><strong>èµ„æºä¸å¤šè¯­è¨€</strong>ï¼šæŠŠæ–‡æ¡ˆæ”¾åˆ° <code>resources/base/element/string.json</code>ï¼Œä¾¿äºå›½é™…åŒ–ä¸ç»Ÿä¸€ç®¡ç†ã€‚</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šå¸¸è§è£…é¥°å™¨æœ‰ <code>@State / @Prop / @Link / @Provide / @Consume</code>ï¼Œå…ˆç”¨ <code>@State</code> ç®¡ç†æœ¬åœ°çŠ¶æ€æœ€ç®€å•ã€‚</li>
</ul>
<h2 data-id="heading-5">å…­ã€æ¥ä¸‹æ¥å¯ä»¥åšä»€ä¹ˆï¼Ÿ</h2>
<ul>
<li>åšä¸€ä¸ª <strong>ToDo æ¸…å•</strong>ï¼šåˆ—è¡¨ç»„ä»¶ + æ–°å¢/åˆ é™¤/å‹¾é€‰ï¼Œé…åˆæœ¬åœ°æ•°æ®å­˜å‚¨ã€‚</li>
<li>é€‚é… <strong>æ·±è‰²æ¨¡å¼</strong> ä¸ <strong>ä¸åŒè®¾å¤‡</strong>ï¼ˆæ‰‹æœº/å¹³æ¿ï¼‰ï¼Œå­¦ä¹ å“åº”å¼å¸ƒå±€ä¸èµ„æºåˆ†å‹ã€‚</li>
<li>å¼•å…¥ç½‘ç»œè¯·æ±‚ä¸æƒé™ï¼ˆä¾‹å¦‚ç›¸æœºã€æ–‡ä»¶å­˜å‚¨ï¼‰ï¼Œå®Œå–„çœŸå®ä¸šåŠ¡åœºæ™¯ã€‚</li>
</ul>
<p>åˆ°è¿™é‡Œï¼Œä½ å·²ç»å®Œæˆäº†ä¸€ä¸ªå¯è¿è¡Œä¸”åŒ…å«è·¯ç”±çš„é¸¿è’™åº”ç”¨éª¨æ¶ã€‚æŠŠä¸Šé¢çš„ä»£ç ç²˜åˆ° DevEco Studio é‡Œè·‘èµ·æ¥ï¼Œå†æŒ‰ã€Œæ¥ä¸‹æ¥ã€çš„å»ºè®®åšä¸€ç‚¹ç‚¹æ‰©å±•ï¼Œå°±èƒ½å®ç°ä¸€ä¸ªç®€å•çš„é¸¿è’™demoåº”ç”¨äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å¼€å‘å¦‚ä½•çµæ´»ä½¿ç”¨ css å˜é‡]]></title>    <link>https://juejin.cn/post/7570648023110615078</link>    <guid>https://juejin.cn/post/7570648023110615078</guid>    <pubDate>2025-11-10T06:35:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570648023110615078" data-draft-id="7570646659865886746" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å¼€å‘å¦‚ä½•çµæ´»ä½¿ç”¨ css å˜é‡"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-10T06:35:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åå­—è·¯å£çš„ç«ä¸"/> <meta itemprop="url" content="https://juejin.cn/user/2154698521720984"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å¼€å‘å¦‚ä½•çµæ´»ä½¿ç”¨ css å˜é‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2154698521720984/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åå­—è·¯å£çš„ç«ä¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:35:50.000Z" title="Mon Nov 10 2025 06:35:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§© ä¸€ã€CSS å˜é‡çš„å®šä¹‰ä¸ä½¿ç”¨åŸºç¡€</h2>
<h3 data-id="heading-1">å®šä¹‰æ–¹å¼</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--primary-color</span>: <span class="hljs-number">#409eff</span>;
  <span class="hljs-attr">--font-size-base</span>: <span class="hljs-number">14px</span>;
}
</code></pre>
<p><code>:root</code> é€‰æ‹©å™¨ç›¸å½“äºå…¨å±€ä½œç”¨åŸŸï¼ˆç±»ä¼¼å…¨å±€å˜é‡ï¼‰ã€‚</p>
<h3 data-id="heading-2">ä½¿ç”¨æ–¹å¼</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">button</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--primary-color);
  <span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">var</span>(--font-size-base);
}
</code></pre>
<p><code>var()</code> è¯­æ³•ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--text-color, <span class="hljs-number">#333</span>); <span class="hljs-comment">/* ç¬¬äºŒä¸ªå‚æ•°æ˜¯é»˜è®¤å€¼ */</span>
</code></pre>
<hr/>
<h2 data-id="heading-3">âš™ï¸ äºŒã€åŠ¨æ€ä¿®æ”¹ CSS å˜é‡ï¼ˆæ ¸å¿ƒï¼‰</h2>
<p>CSS å˜é‡æ˜¯<strong>è¿è¡Œæ—¶åŠ¨æ€çš„</strong>ï¼Œå¯ä»¥é€šè¿‡ JS ä¿®æ”¹è€Œç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€é‡æ–°æ¸²æŸ“æ•´ä¸ªé¡µé¢ã€‚</p>
<h3 data-id="heading-4">âœ… æ–¹æ³• 1ï¼šä¿®æ”¹æ ¹èŠ‚ç‚¹å˜é‡</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--primary-color'</span>, <span class="hljs-string">'#ff4d4f'</span>);
</code></pre>
<h3 data-id="heading-5">âœ… æ–¹æ³• 2ï¼šä¿®æ”¹æŸä¸ªå±€éƒ¨ä½œç”¨åŸŸ</h3>
<p>CSS å˜é‡æœ‰ä½œç”¨åŸŸï¼Œå¯ä»¥å®šä¹‰åœ¨æŸä¸ªå…ƒç´ ä¸Šï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.card</span> {
  <span class="hljs-attr">--card-bg</span>: white;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--card-bg);
}
</code></pre>
<p>JS åŠ¨æ€æ”¹å®ƒï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-built_in">document</span>.<span class="hljs-built_in">querySelector</span>(<span class="hljs-string">'.card'</span>).style.setProperty(<span class="hljs-string">'--card-bg'</span>, <span class="hljs-string">'#f5f5f5'</span>);
</code></pre>
<hr/>
<h2 data-id="heading-6">ğŸ§­ ä¸‰ã€çµæ´»åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-7">1. <strong>ä¸»é¢˜åˆ‡æ¢ï¼ˆæš—è‰² / äº®è‰²ï¼‰</strong></h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--bg-color</span>: <span class="hljs-number">#fff</span>;
  <span class="hljs-attr">--text-color</span>: <span class="hljs-number">#000</span>;
}

<span class="hljs-selector-attr">[data-theme=<span class="hljs-string">"dark"</span>]</span> {
  <span class="hljs-attr">--bg-color</span>: <span class="hljs-number">#121212</span>;
  <span class="hljs-attr">--text-color</span>: <span class="hljs-number">#fff</span>;
}
</code></pre>
<p>JS åˆ‡æ¢ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'data-theme'</span>, <span class="hljs-string">'dark'</span>);
</code></pre>
<blockquote>
<p>ğŸ”¥ æ¨èåšæ³•ï¼šé€šè¿‡ <code>data-theme</code> æˆ– <code>class</code> åˆ‡æ¢ä¸»é¢˜ï¼ŒCSS è‡ªå·±å¤„ç†é¢œè‰²æ˜ å°„ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-8">2. <strong>å“åº”å¼è®¾è®¡ + åŠ¨æ€è®¡ç®—</strong></h3>
<p>åˆ©ç”¨ <code>calc()</code>ã€<code>clamp()</code> ç­‰å‡½æ•°ä¸å˜é‡ç»“åˆï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--base-size</span>: <span class="hljs-number">16px</span>;
}

<span class="hljs-selector-class">.card</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--base-size) * <span class="hljs-number">1.2</span>);
}
</code></pre>
<p>åœ¨ JS ä¸­åŠ¨æ€è°ƒæ•´å…¨å±€å­—å·ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--base-size'</span>, <span class="hljs-string">'18px'</span>);
</code></pre>
<hr/>
<h3 data-id="heading-9">3. <strong>ç»„ä»¶å‚æ•°åŒ–</strong></h3>
<p>åœ¨ç»„ä»¶å°è£…ä¸­ï¼ˆå¦‚ React / Vue / Web Componentsï¼‰ï¼Œå¯é€šè¿‡å˜é‡è®©ç»„ä»¶æ ·å¼å¯é…ç½®ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.my-button</span> {
  <span class="hljs-attr">--btn-color</span>: <span class="hljs-number">#409eff</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--btn-color);
}
</code></pre>
<p>çˆ¶ç»„ä»¶é€šè¿‡ style ä¼ å…¥ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;MyButton <span class="hljs-attr">style</span>=<span class="hljs-string">"--btn-color: #ff4d4f"</span> /&gt;
</code></pre>
<hr/>
<h3 data-id="heading-10">4. <strong>é…åˆåŠ¨ç”» / åŠ¨æ€è¿‡æ¸¡</strong></h3>
<p>CSS å˜é‡å¯ä»¥å’Œ transition é…åˆä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--panel-height</span>: <span class="hljs-number">100px</span>;
}

<span class="hljs-selector-class">.panel</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-built_in">var</span>(--panel-height);
  <span class="hljs-attribute">transition</span>: height <span class="hljs-number">0.3s</span> ease;
}
</code></pre>
<p>JS åŠ¨æ€ä¿®æ”¹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--panel-height'</span>, <span class="hljs-string">'200px'</span>);
</code></pre>
<p>é¢æ¿é«˜åº¦ä¼šå¹³æ»‘è¿‡æ¸¡ã€‚</p>
<hr/>
<h2 data-id="heading-11">ğŸ§  å››ã€CSS å˜é‡ vs é¢„å¤„ç†å™¨å˜é‡ï¼ˆLESS/SASSï¼‰</h2>






























<table><thead><tr><th>ç‰¹æ€§</th><th>CSSå˜é‡</th><th>LESS/SASSå˜é‡</th></tr></thead><tbody><tr><td>ç”Ÿæ•ˆæ—¶æœº</td><td>è¿è¡Œæ—¶</td><td>ç¼–è¯‘æ—¶</td></tr><tr><td>åŠ¨æ€ä¿®æ”¹</td><td>âœ… å¯è¿è¡Œæ—¶ä¿®æ”¹</td><td>âŒ éœ€é‡æ–°ç¼–è¯‘</td></tr><tr><td>å¯ä½œç”¨åŸŸåŒ–</td><td>âœ… æœ‰ä½œç”¨åŸŸï¼ˆç»§æ‰¿ï¼‰</td><td>âŒ å…¨å±€æˆ–å±€éƒ¨ç¼–è¯‘ä½œç”¨åŸŸ</td></tr><tr><td>æµè§ˆå™¨æ”¯æŒ</td><td>âœ… ç°ä»£æµè§ˆå™¨å…¨æ”¯æŒ</td><td>âœ… ä¾èµ–ç¼–è¯‘</td></tr></tbody></table>
<p>ğŸ’¡ é€šå¸¸ç»“åˆä½¿ç”¨ï¼š</p>
<ul>
<li>LESS å˜é‡è´Ÿè´£ <strong>ç¼–è¯‘æ—¶æ ·å¼ç»“æ„</strong></li>
<li>CSS å˜é‡è´Ÿè´£ <strong>è¿è¡Œæ—¶åŠ¨æ€ä¸»é¢˜</strong></li>
</ul>
<hr/>
<h2 data-id="heading-12">ğŸ§° äº”ã€å®è·µå»ºè®®</h2>
<ol>
<li>
<p><strong>å®šä¹‰å‘½åè§„èŒƒï¼š</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attr">--color-primary</span>
<span class="hljs-attr">--font-size-sm</span>
<span class="hljs-attr">--layout-header-height</span>
</code></pre>
</li>
<li>
<p><strong>å»ºç«‹ç»Ÿä¸€å…¥å£æ–‡ä»¶ï¼š</strong><br/>
<code>variables.css</code> ç®¡ç†æ‰€æœ‰å˜é‡ï¼Œé€šè¿‡ <code>@import</code> æˆ–æ„å»ºå·¥å…·å¼•å…¥ã€‚</p>
</li>
<li>
<p><strong>é¿å…æ»¥ç”¨ï¼š</strong><br/>
åŠ¨æ€æ”¹åŠ¨é¢‘ç¹çš„å˜é‡å¯ä½¿ç”¨ JS æ ·å¼æˆ– class åˆ‡æ¢ï¼Œé™æ€ä¸»é¢˜ç±»å˜é‡ç”¨ CSS å˜é‡å³å¯ã€‚</p>
</li>
<li>
<p><strong>å¯ç»“åˆå­˜å‚¨ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">theme</span> = <span class="hljs-string">'dark'</span><span class="hljs-comment">;</span>
localStorage.setItem('theme', theme)<span class="hljs-comment">;</span>
<span class="hljs-attr">document.documentElement.dataset.theme</span> = theme<span class="hljs-comment">;</span>
</code></pre>
</li>
</ol>
<hr/>
<h2 data-id="heading-13">ğŸ¨ ç¤ºä¾‹ï¼šå¤šä¸»é¢˜åŠ¨æ€åˆ‡æ¢</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
  <span class="hljs-selector-pseudo">:root</span> {
    <span class="hljs-attr">--bg</span>: <span class="hljs-number">#fff</span>;
    <span class="hljs-attr">--text</span>: <span class="hljs-number">#000</span>;
  }

  <span class="hljs-selector-attr">[data-theme=<span class="hljs-string">'dark'</span>]</span> {
    <span class="hljs-attr">--bg</span>: <span class="hljs-number">#1e1e1e</span>;
    <span class="hljs-attr">--text</span>: <span class="hljs-number">#fff</span>;
  }

  <span class="hljs-selector-tag">body</span> {
    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--bg);
    <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--text);
    <span class="hljs-attribute">transition</span>: background <span class="hljs-number">0.3s</span>, color <span class="hljs-number">0.3s</span>;
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"toggleTheme"</span>&gt;</span>åˆ‡æ¢ä¸»é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">const</span> root = <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>;
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'toggleTheme'</span>).<span class="hljs-property">onclick</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> isDark = root.<span class="hljs-property">dataset</span>.<span class="hljs-property">theme</span> === <span class="hljs-string">'dark'</span>;
      root.<span class="hljs-property">dataset</span>.<span class="hljs-property">theme</span> = isDark ? <span class="hljs-string">'light'</span> : <span class="hljs-string">'dark'</span>;
    };
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€è§£å¯†æºç ã€‘ RAGFlow åˆ‡åˆ†æœ€ä½³å®è·µ- naive parser è¯­ä¹‰åˆ‡å—ï¼ˆmarkdown ç¯‡ï¼‰]]></title>    <link>https://juejin.cn/post/7570295366480560164</link>    <guid>https://juejin.cn/post/7570295366480560164</guid>    <pubDate>2025-11-10T06:17:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570295366480560164" data-draft-id="7570295366480527396" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€è§£å¯†æºç ã€‘ RAGFlow åˆ‡åˆ†æœ€ä½³å®è·µ- naive parser è¯­ä¹‰åˆ‡å—ï¼ˆmarkdown ç¯‡ï¼‰"/> <meta itemprop="keywords" content="Agent,LLM,æ¶æ„"/> <meta itemprop="datePublished" content="2025-11-10T06:17:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¸¸å…ˆæ£®"/> <meta itemprop="url" content="https://juejin.cn/user/4388906148043879"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€è§£å¯†æºç ã€‘ RAGFlow åˆ‡åˆ†æœ€ä½³å®è·µ- naive parser è¯­ä¹‰åˆ‡å—ï¼ˆmarkdown ç¯‡ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4388906148043879/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¸¸å…ˆæ£®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:17:42.000Z" title="Mon Nov 10 2025 06:17:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨ RAGFlow çš„è¯­ä¹‰åˆ‡å—ä½“ç³»ä¸­ï¼Œ<code>markdown</code> æ˜¯ä¸€ç§ç‹¬ç‰¹ä¸”å¤æ‚çš„è¾“å…¥ç±»å‹ã€‚ä¸åŒäº PDF æˆ– DOCX ç­‰äºŒè¿›åˆ¶æ ¼å¼ï¼ŒMarkdown å¤©ç„¶å¸¦æœ‰è¯­ä¹‰ç»“æ„ï¼ˆæ ‡é¢˜ã€åˆ—è¡¨ã€å¼•ç”¨ã€ä»£ç å—ã€è¡¨æ ¼ç­‰ï¼‰ï¼Œè¿™è®©è§£æå™¨ä¸éœ€è¦é¢å¤–çš„ OCR æˆ–æ’ç‰ˆåˆ†æå³å¯ç²¾ç¡®è¿˜åŸå†…å®¹å±‚æ¬¡ã€‚</p>
<p>ç„¶è€Œï¼ŒMarkdown çš„çµæ´»æ€§ä¹Ÿæ˜¯ä¸€æŠŠåŒåˆƒå‰‘â€”â€”
ä¸åŒè¯­æ³•é£æ ¼ï¼ˆå¦‚æ— è¾¹æ¡†è¡¨æ ¼ï¼‰ã€åµŒå¥—å…ƒç´ ã€å›¾ç‰‡é“¾æ¥ã€HTML æ··å†™ç­‰æƒ…å†µéƒ½ä¼šä½¿è¯­ä¹‰åˆ‡å—å˜å¾—å¤æ‚ã€‚<br/>
å› æ­¤ï¼ŒRAGFlow åœ¨ Markdown çš„è§£æä¸­é‡‡ç”¨äº†ä¸“é—¨çš„ <code>MarkdownParser</code> ä¸ <code>MarkdownElementExtractor</code> åŒå±‚æ¶æ„ï¼Œå¹¶å¼•å…¥äº† <code>VisionFigureParser</code> æ¥å¢å¼ºå›¾ç‰‡è¯­ä¹‰ï¼Œä½¿æ–‡æœ¬ä¸å›¾åƒå½¢æˆçœŸæ­£çš„å¤šæ¨¡æ€è¯­ä¹‰å—ã€‚</p>
<p>æœ¬ç¯‡å°†å¸¦ä½ æ·±å…¥æºç å±‚ï¼Œè§£è¯» RAGFlow å¦‚ä½•ä¸€æ­¥æ­¥å®Œæˆä» Markdown æ–‡æ¡£åˆ°ç»“æ„åŒ–è¯­ä¹‰å—çš„å…¨è¿‡ç¨‹ã€‚</p>
<h2 data-id="heading-1">çœæµç‰ˆ</h2>
<p>Markdown æ–‡æ¡£çš„è¯­ä¹‰åˆ‡å—åœ¨ RAGFlow ä¸­ç”±ä¸‰ä¸ªé˜¶æ®µå®Œæˆï¼š<strong>è¯­æ³•ç»“æ„è§£æ â†’ å›¾ç‰‡æå–ä¸è§†è§‰å¢å¼º â†’ æ–‡æœ¬åˆå¹¶ä¸åˆ†è¯ã€‚</strong></p>
<p><strong>æ ¸å¿ƒæµç¨‹ä¸€è§ˆï¼š</strong></p>
<ol>
<li><strong>ç»“æ„è§£æ</strong>ï¼š<br/>
ä½¿ç”¨ <code>MarkdownElementExtractor</code> æå–æ ‡é¢˜ã€æ®µè½ã€åˆ—è¡¨ã€ä»£ç å—ã€å¼•ç”¨ç­‰è¯­ä¹‰å•å…ƒã€‚</li>
<li><strong>è¡¨æ ¼æå–</strong>ï¼š<br/>
è¯†åˆ«æ ‡å‡†ä¸æ— è¾¹æ¡† Markdown è¡¨æ ¼ï¼Œé€‰æ‹©â€œåˆ†ç¦»æ¨¡å¼â€æˆ–â€œæ¸²æŸ“æ¨¡å¼â€è¿›è¡Œå­˜å‚¨ã€‚</li>
<li><strong>å›¾ç‰‡å¤„ç†</strong>ï¼š<br/>
ä»æ–‡æœ¬ä¸­æå–å›¾ç‰‡é“¾æ¥ï¼Œä¸‹è½½æˆ–åŠ è½½æœ¬åœ°å›¾ç‰‡ï¼›åˆå¹¶åŒä¸€æ®µè½çš„å›¾ç‰‡ï¼Œå¹¶äº¤ç”±è§†è§‰æ¨¡å‹ç”Ÿæˆè¯­ä¹‰æè¿°ã€‚</li>
<li><strong>å¤šæ¨¡æ€èåˆ</strong>ï¼š<br/>
å°†æ–‡æœ¬ä¸è§†è§‰æè¿°æ‹¼æ¥ï¼Œå½¢æˆå…·å¤‡ä¸Šä¸‹æ–‡çš„è¯­ä¹‰æ®µã€‚</li>
<li><strong>åˆ†è¯ä¸åˆ‡å—</strong>ï¼š<br/>
æœ€ç»ˆè°ƒç”¨ <code>naive_merge_with_images</code> ä¸ <code>tokenize_chunks_with_images</code>ï¼Œå®Œæˆåˆ‡åˆ†æ–‡æœ¬ä¸å›¾ç‰‡çš„å…³è”ã€‚</li>
</ol>
<p><strong>è®¾è®¡äº®ç‚¹</strong></p>
<ul>
<li><strong>åŒæ¨¡è¡¨æ ¼è§£æä½“ç³»</strong>ï¼šåŒæ—¶å…¼å®¹â€œæ ‡å‡†è¡¨æ ¼ï¼ˆå¸¦è¾¹æ¡†ï¼‰â€ä¸â€œæ— è¾¹æ¡†è¡¨æ ¼â€ï¼Œæ”¯æŒç‹¬ç«‹å­˜å‚¨ï¼ˆç»“æ„åŒ–è¾“å…¥ï¼‰ä¸æ¸²æŸ“æ›¿æ¢ï¼ˆè§†è§‰è¿˜åŸï¼‰ï¼Œä¿è¯å‡†ç¡®æ€§ä¸å¯è¯»</li>
</ul>
<h2 data-id="heading-2">æ‰‹æ’•ç‰ˆ</h2>
<h3 data-id="heading-3">1. è§£æå™¨åˆå§‹åŒ–</h3>
<pre><code class="hljs language-python" lang="python">markdown_parser = Markdown(<span class="hljs-built_in">int</span>(parser_config.get(<span class="hljs-string">"chunk_token_num"</span>, <span class="hljs-number">128</span>)))
</code></pre>
<h4 data-id="heading-4">1.1 Markdown ç±»</h4>
<p>ç»§æ‰¿ <code>MarkdownParser</code> åŸºç±»ï¼Œè§£æè¡¨æ ¼ï¼›ä½¿ç”¨ <code>MarkdownElementExtractor().extract_elements()</code> è§£ææ–‡æœ¬å†…å®¹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Markdown</span>(<span class="hljs-title class_ inherited__">MarkdownParser</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, filename, binary=<span class="hljs-literal">None</span>, separate_tables=<span class="hljs-literal">True</span></span>):
        <span class="hljs-keyword">if</span> binary:
            encoding = find_codec(binary)
            txt = binary.decode(encoding, errors=<span class="hljs-string">"ignore"</span>)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename, <span class="hljs-string">"r"</span>) <span class="hljs-keyword">as</span> f:
                txt = f.read()

        remainder, tables = self.extract_tables_and_remainder(<span class="hljs-string">f'<span class="hljs-subst">{txt}</span>\n'</span>, separate_tables=separate_tables)

        extractor = MarkdownElementExtractor(txt)
        element_sections = extractor.extract_elements()
        sections = [(element, <span class="hljs-string">""</span>) <span class="hljs-keyword">for</span> element <span class="hljs-keyword">in</span> element_sections]

        tbls = []
        <span class="hljs-keyword">for</span> table <span class="hljs-keyword">in</span> tables:
            tbls.append(((<span class="hljs-literal">None</span>, markdown(table, extensions=[<span class="hljs-string">'markdown.extensions.tables'</span>])), <span class="hljs-string">""</span>))
        <span class="hljs-keyword">return</span> sections, tbls
</code></pre>
<h4 data-id="heading-5">1.2 MarkdownParser åŸºç±»</h4>
<p><strong>extract_tables_and_remainder</strong>ï¼šæå–æ–‡æ¡£ä¸­çš„è¡¨æ ¼ä»¥åŠå…¶ä»–éƒ¨åˆ†ã€‚</p>
<h4 data-id="heading-6">1.2.1 extract_tables_and_remainder</h4>
<p><strong>1ï¼‰ä¸¤ç§è¡¨æ ¼è¯†åˆ«æ–¹æ¡ˆï¼Œå…¼å®¹ markdown ä¸­ä¸¤ç§è¡¨æ ¼çš„è¯­æ³•å½¢å¼ã€‚</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">if</span> <span class="hljs-string">"|"</span> <span class="hljs-keyword">in</span> markdown_text:  <span class="hljs-comment"># for optimize performance</span>
    <span class="hljs-comment"># æ ‡å‡† Markdown è¡¨æ ¼</span>
    border_table_pattern = re.<span class="hljs-built_in">compile</span>(
        <span class="hljs-string">r"""
        (?:\n|^)
        (?:\|.*?\|.*?\|.*?\n)
        (?:\|(?:\s*[:-]+[-| :]*\s*)\|.*?\n)
        (?:\|.*?\|.*?\|.*?\n)+
    """</span>,
        re.VERBOSE,
    )
    working_text = replace_tables_with_rendered_html(border_table_pattern, tables)

    <span class="hljs-comment"># æ— è¾¹æ¡† Markdown è¡¨æ ¼</span>
    no_border_table_pattern = re.<span class="hljs-built_in">compile</span>(
        <span class="hljs-string">r"""
        (?:\n|^)
        (?:\S.*?\|.*?\n)
        (?:(?:\s*[:-]+[-| :]*\s*).*?\n)
        (?:\S.*?\|.*?\n)+
        """</span>,
        re.VERBOSE,
    )
    working_text = replace_tables_with_rendered_html(no_border_table_pattern, tables)
</code></pre>
<p><strong>æ ‡å‡† Markdown è¡¨æ ¼</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ä½¿ç”¨ç®¡é“ç¬¦ | åŒ…å›´æ‰€æœ‰å•å…ƒæ ¼
<span class="hljs-bullet">2.</span> å¿…é¡»æœ‰åˆ†éš”çº¿è¡Œï¼ˆç¬¬äºŒè¡Œï¼‰
<span class="hljs-bullet">3.</span> å•å…ƒæ ¼å†…å®¹å¯ä»¥åŒ…å«ç©ºæ ¼

| å§“å | å¹´é¾„ | éƒ¨é—¨ | è–ªèµ„ |
|------|------|------|------|
| å¼ ä¸‰ | 25   | æŠ€æœ¯éƒ¨ | 15000 |
| æå›› | 30   | é”€å”®éƒ¨ | 12000 |
| ç‹äº” | 28   | å¸‚åœºéƒ¨ | 13000 |
</code></pre>
<p><strong>æ— è¾¹æ¡† Markdown è¡¨æ ¼</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> åªæœ‰åˆ†éš”çº¿è¡Œä½¿ç”¨ | å’Œ -
<span class="hljs-bullet">2.</span> æ•°æ®è¡Œçš„å•å…ƒæ ¼ä¸è¢« | åŒ…å›´

å§“å å¹´é¾„ éƒ¨é—¨ è–ªèµ„
---- ---- ---- -----
å¼ ä¸‰ 25   æŠ€æœ¯éƒ¨ 15000
æå›› 30   é”€å”®éƒ¨ 12000
ç‹äº” 28   å¸‚åœºéƒ¨ 13000
</code></pre>
<p><strong>2ï¼‰ä¸¤ç§è¡¨æ ¼è§£ææ–¹æ¡ˆ</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">if</span> separate_tables:
    <span class="hljs-comment"># Skip this match (i.e., remove it)</span>
    new_text += working_text[last_end : <span class="hljs-keyword">match</span>.start()] + <span class="hljs-string">"\n\n"</span>
<span class="hljs-keyword">else</span>:
    <span class="hljs-comment"># Replace with rendered HTML</span>
    html_table = markdown(raw_table, extensions=[<span class="hljs-string">"markdown.extensions.tables"</span>]) <span class="hljs-keyword">if</span> render <span class="hljs-keyword">else</span> raw_table
    new_text += working_text[last_end : <span class="hljs-keyword">match</span>.start()] + html_table + <span class="hljs-string">"\n\n"</span>
</code></pre>
<p><strong>è¡¨æ ¼åˆ†ç¦»æ¨¡å¼ (separate_tables=True)</strong></p>
<p>å°†æ•´ä¸ªè¡¨æ ¼è½¬æ¢æˆæ–‡æœ¬ï¼Œä¿è¯è¯­ä¹‰å®Œæ•´æ€§ï¼Œä½œä¸ºåç»­åˆ‡åˆ†å’Œé‡åŒ–çš„æ•°æ®åŸºç¡€ã€‚</p>
<pre><code class="hljs language-erlang" lang="erlang">è¾“å…¥ Markdown:
æ­£æ–‡...
| å§“å | å¹´é¾„ | éƒ¨é—¨ |
|------|------|------|
| å¼ ä¸‰ | <span class="hljs-number">25</span>   | æŠ€æœ¯ |
æ­£æ–‡...

è¾“å‡º:
æ­£æ–‡...
æ­£æ–‡...

è¡¨æ ¼å•ç‹¬å­˜å‚¨: [<span class="hljs-string">"| å§“å | å¹´é¾„ | éƒ¨é—¨ |\n|------|------|------|\n| å¼ ä¸‰ | 25   | æŠ€æœ¯ |"</span>]
</code></pre>
<p><strong>è¡¨æ ¼æ¸²æŸ“æ¨¡å¼ (separate_tables=False)</strong></p>
<p>ä¿æŒåŸå§‹æ ¼å¼å’Œæ ·å¼ï¼Œæ»¡è¶³é‡ç°æ–‡æ¡£å¤–è§‚éœ€è¦ã€‚</p>
<pre><code class="hljs language-xml" lang="xml">è¾“å…¥ Markdown:
æ­£æ–‡...
| å§“å | å¹´é¾„ | éƒ¨é—¨ |
|------|------|------|
| å¼ ä¸‰ | 25   | æŠ€æœ¯ |
æ­£æ–‡...

è¾“å‡º:
æ­£æ–‡...
<span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>å§“å<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>å¹´é¾„<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>éƒ¨é—¨<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>å¼ ä¸‰<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>æŠ€æœ¯<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span>
æ­£æ–‡...
</code></pre>
<h4 data-id="heading-7">1.3 MarkdownElementExtractor ç±»</h4>
<p>å»ºç«‹é’ˆå¯¹ Markdown è¯­æ³•è§„åˆ™ï¼Œé€šè¿‡ä¸åŒè§„åˆ™è§£ææ–‡æœ¬ä¸­çš„å„ä¸ªå…ƒç´ ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_elements</span>(<span class="hljs-params">self</span>):
    sections = []
    i = <span class="hljs-number">0</span>
    <span class="hljs-keyword">while</span> i &lt; <span class="hljs-built_in">len</span>(self.lines):
        line = self.lines[i]
        
        <span class="hljs-comment"># ä¼˜å…ˆçº§è§£æé¡ºåº</span>
        <span class="hljs-keyword">if</span> re.<span class="hljs-keyword">match</span>(<span class="hljs-string">r"^#{1,6}\s+.*$"</span>, line):           <span class="hljs-comment"># 1. æ ‡é¢˜</span>
            element = self._extract_header(i)
        <span class="hljs-keyword">elif</span> line.strip().startswith(<span class="hljs-string">"```"</span>):           <span class="hljs-comment"># 2. ä»£ç å—</span>
            element = self._extract_code_block(i)
        <span class="hljs-keyword">elif</span> re.<span class="hljs-keyword">match</span>(<span class="hljs-string">r"^\s*[-*+]\s+.*$"</span>, line) <span class="hljs-keyword">or</span> \   <span class="hljs-comment"># 3. åˆ—è¡¨</span>
             re.<span class="hljs-keyword">match</span>(<span class="hljs-string">r"^\s*\d+\.\s+.*$"</span>, line):
            element = self._extract_list_block(i)
        <span class="hljs-keyword">elif</span> line.strip().startswith(<span class="hljs-string">"&gt;"</span>):             <span class="hljs-comment"># 4. å¼•ç”¨å—</span>
            element = self._extract_blockquote(i)
        <span class="hljs-keyword">elif</span> line.strip():                             <span class="hljs-comment"># 5. æ–‡æœ¬å—</span>
            element = self._extract_text_block(i)
        <span class="hljs-keyword">else</span>:                                          <span class="hljs-comment"># 6. ç©ºè¡Œ</span>
            i += <span class="hljs-number">1</span>
            <span class="hljs-keyword">continue</span>
        
        sections.append(element[<span class="hljs-string">"content"</span>])
        i = element[<span class="hljs-string">"end_line"</span>] + <span class="hljs-number">1</span>  <span class="hljs-comment"># è·³åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ </span>
    
    <span class="hljs-keyword">return</span> [section <span class="hljs-keyword">for</span> section <span class="hljs-keyword">in</span> sections <span class="hljs-keyword">if</span> section.strip()]
</code></pre>
<hr/>
<h3 data-id="heading-8">2. é€šè¿‡è§£æå™¨ <code>markdown_parser</code> è§£æå‡ºæ–‡æœ¬ç»“æ„å’Œè¡¨æ ¼å†…å®¹ã€‚</h3>
<pre><code class="hljs language-python" lang="python">sections, tables = markdown_parser(filename, binary, separate_tables=<span class="hljs-literal">False</span>)
</code></pre>
<hr/>
<h3 data-id="heading-9">3. è·å– section ä¸­çš„å›¾ç‰‡</h3>
<pre><code class="hljs language-python" lang="python">section_images = []
<span class="hljs-keyword">for</span> idx, (section_text, _) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(sections):
    images = markdown_parser.get_pictures(section_text) <span class="hljs-keyword">if</span> section_text <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>
</code></pre>
<h4 data-id="heading-10">3.1 markdown_parser.get_pictures</h4>
<p>1ï¼‰è·å–å›¾ç‰‡é“¾æ¥</p>
<pre><code class="hljs language-python" lang="python">image_urls = self.get_picture_urls(text)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_picture_urls</span>(<span class="hljs-params">self, sections</span>):
    ...
    <span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup
    <span class="hljs-comment"># å°† markdown æ–‡æ¡£è½¬æ¢æˆ html</span>
    html_content = markdown(text)
    soup = BeautifulSoup(html_content, <span class="hljs-string">'html.parser'</span>)
    <span class="hljs-comment"># æå–å›¾ç‰‡é“¾æ¥</span>
    html_images = [img.get(<span class="hljs-string">'src'</span>) <span class="hljs-keyword">for</span> img <span class="hljs-keyword">in</span> soup.find_all(<span class="hljs-string">'img'</span>) <span class="hljs-keyword">if</span> img.get(<span class="hljs-string">'src'</span>)]
    <span class="hljs-keyword">return</span> html_images
</code></pre>
<p>2ï¼‰è·å–å›¾ç‰‡ï¼ˆè¿œç¨‹ or æœ¬åœ°ï¼‰</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">if</span> url.startswith((<span class="hljs-string">'http://'</span>, <span class="hljs-string">'https://'</span>)):
    <span class="hljs-comment"># è¿œç¨‹ URLï¼šä¸‹è½½å›¾ç‰‡</span>
    response = requests.get(url, stream=<span class="hljs-literal">True</span>, timeout=<span class="hljs-number">30</span>)
    <span class="hljs-keyword">if</span> response.status_code == <span class="hljs-number">200</span> <span class="hljs-keyword">and</span> response.headers[<span class="hljs-string">'Content-Type'</span>].startswith(<span class="hljs-string">'image/'</span>):
        img = Image.<span class="hljs-built_in">open</span>(BytesIO(response.content)).convert(<span class="hljs-string">'RGB'</span>)
        images.append(img)
<span class="hljs-keyword">else</span>:
    <span class="hljs-comment"># æœ¬åœ°æ–‡ä»¶è·¯å¾„ï¼šç›´æ¥æ‰“å¼€</span>
    <span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path
    local_path = Path(url)
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> local_path.exists():
        logging.warning(<span class="hljs-string">f"Local image file not found: <span class="hljs-subst">{url}</span>"</span>)
        <span class="hljs-keyword">continue</span>
    img = Image.<span class="hljs-built_in">open</span>(url).convert(<span class="hljs-string">'RGB'</span>)
    images.append(img)
</code></pre>
<h3 data-id="heading-11">4. å‚ç›´åˆå¹¶åŒä¸€ä¸ª section ä¸­å›¾ç‰‡ï¼Œä½¿ç”¨è§†è§‰æ¨¡å‹å°†å›¾ç‰‡è§£ææˆæ–‡æœ¬æè¿°</h3>
<pre><code class="hljs language-python" lang="python">combined_image = reduce(concat_img, images) <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(images) &gt; <span class="hljs-number">1</span> <span class="hljs-keyword">else</span> images[<span class="hljs-number">0</span>]
section_images.append(combined_image)
markdown_vision_parser = VisionFigureParser(vision_model=vision_model, figures_data= [((combined_image, [<span class="hljs-string">"markdown image"</span>]), [(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)])], **kwargs)
boosted_figures = markdown_vision_parser(callback=callback)
sections[idx] = (section_text + <span class="hljs-string">"\n\n"</span> + <span class="hljs-string">"\n\n"</span>.join([fig[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>] <span class="hljs-keyword">for</span> fig <span class="hljs-keyword">in</span> boosted_figures]), sections[idx][<span class="hljs-number">1</span>])
</code></pre>
<blockquote>
<p><em>VisionFigureParser çš„è¯¦ç»†è§£æå¯å‚è€ƒã€Šnaive parser è¯­ä¹‰åˆ‡å—ï¼ˆdocx ç¯‡ï¼‰ã€‹ä¸­çš„ VisionFigureParser ç±»æ¨¡å—</em></p>
</blockquote>
<h3 data-id="heading-12">5. å¯¹æ–‡æœ¬å’Œè¡¨æ ¼å†…å®¹è¿›è¡Œåˆ†è¯</h3>
<pre><code class="hljs language-python" lang="python">res = tokenize_table(tables, doc, is_english)
</code></pre>
<blockquote>
<p><em>tokenize_table çš„è¯¦ç»†è§£æå¯å‚è€ƒã€Šnavie åˆ†è¯å™¨åŸç†ã€‹</em></p>
</blockquote>
<hr/>
<h3 data-id="heading-13">6. sections åå¤„ç†</h3>
<pre><code class="hljs language-python" lang="python">chunks, images = naive_merge_with_images(sections, section_images,
                                <span class="hljs-built_in">int</span>(parser_config.get(
                                    <span class="hljs-string">"chunk_token_num"</span>, <span class="hljs-number">128</span>)), parser_config.get(
                                    <span class="hljs-string">"delimiter"</span>, <span class="hljs-string">"\n!?ã€‚ï¼›ï¼ï¼Ÿ"</span>))
res.extend(tokenize_chunks_with_images(chunks, doc, is_english, images))
</code></pre>
<p><strong>naive_merge_with_images</strong>ï¼šå°†æ¯ä¸ª section ä¸åˆå¹¶åçš„ section å›¾ç‰‡è¿›è¡Œå…³è”ã€‚å¦‚æœæ˜¯è·¨é¡µçš„ chunkï¼Œåˆ™éœ€è¦å°†ä¸¤é¡µçš„å›¾ç‰‡åˆå¹¶åè¿›è¡Œå…³è”ã€‚</p>
<p><strong>tokenize_chunks_with_images</strong>ï¼šåˆ†è¯ï¼Œè¿”å›ç»Ÿä¸€æ ¼å¼çš„ç»“æ„åŒ–æ–‡æ¡£å—ï¼Œä½œä¸ºåç»­å‘é‡åŒ–è¾“å…¥ã€‚</p>
<h2 data-id="heading-14">ä¸‹æœŸé¢„å‘Š</h2>
<p>åœ¨æœ¬æœŸã€Šã€è§£å¯†æºç ã€‘RAGFlow åˆ‡åˆ†æœ€ä½³å®è·µ- naive parser è¯­ä¹‰åˆ‡å—ï¼ˆmarkdown ç¯‡ï¼‰ã€‹ä¸­ï¼Œæˆ‘ä»¬æ·±å…¥å‰–æäº† .md æ–‡æ¡£åœ¨ RAGFlow ä¸­çš„å®Œæ•´è§£ææµæ°´çº¿ï¼ŒåŒºåˆ«äºä¹‹å‰ docxï¼Œpdf æ–‡æ¡£è§£æï¼Œé€šè¿‡æ ¹æ® markdown ä¸ç”Ÿä¿±æ¥çš„ç»“æ„åŒ–è¯­æ³•è¿›è¡Œæ–‡æœ¬è§£æåï¼Œå°†æ–‡æ¡£ä¸­çš„å›¾ç‰‡å•ç‹¬è§£æå‡ºæ¥ï¼Œæœ€åè¿›è¡Œå…³è”ã€‚</p>
<p>åœ¨ä¸‹ä¸€æœŸä¸­ï¼Œæˆ‘ä»¬å°†å‰–æ naive parser ä¸‹æœ€åçš„ä¸‰ä¸ªæ–‡ä»¶ç±»å‹ html|json|doc çš„è¯­ä¹‰åˆ‡å—æ–¹æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[éŸ³è§†é¢‘é€šç”¨ç»„ä»¶è®¾è®¡æ¢ç´¢å’Œåº”ç”¨]]></title>    <link>https://juejin.cn/post/7570651893867855924</link>    <guid>https://juejin.cn/post/7570651893867855924</guid>    <pubDate>2025-11-10T04:41:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570651893867855924" data-draft-id="7570306250027974708" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="éŸ³è§†é¢‘é€šç”¨ç»„ä»¶è®¾è®¡æ¢ç´¢å’Œåº”ç”¨"/> <meta itemprop="keywords" content="å‰ç«¯,éŸ³è§†é¢‘å¼€å‘"/> <meta itemprop="datePublished" content="2025-11-10T04:41:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ”¿é‡‡äº‘æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/3456520257288974"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            éŸ³è§†é¢‘é€šç”¨ç»„ä»¶è®¾è®¡æ¢ç´¢å’Œåº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3456520257288974/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ”¿é‡‡äº‘æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T04:41:30.000Z" title="Mon Nov 10 2025 04:41:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1ã€èƒŒæ™¯ä»‹ç»</h3>
<p>ä¸šåŠ¡å±‚é¢ï¼ŒåŸºäºå›½å®¶å‘å±•æ”¹é©å§”åŠå…¬å…æ—¥å‰å°å‘å…³äºåŠ å¿«æ¨å¹¿è¿œç¨‹å¼‚åœ°è¯„æ ‡çš„é€šçŸ¥ï¼Œéƒ¨ç½²åœ¨å…¨å›½èŒƒå›´å†…åŠ å¿«æ¨å¹¿è¿œç¨‹å¼‚åœ°è¯„æ ‡ï¼Œé‡åœ¨è§£å†³ä¼ ç»Ÿçš„è¯„æ ‡é—®é¢˜ï¼Œæå‡æ•´ä½“çš„å…¬å¹³æ€§å’Œå…¬æ­£æ€§ï¼Œä¼˜åŒ–ä¸“å®¶èµ„æºçš„è¯„æ ‡é…ç½®ï¼ŒéŸ³è§†é¢‘ä½œä¸ºæ•´ä¸ªä¸šåŠ¡æµç¨‹ä¸­è¯„æ ‡ç¯èŠ‚å…³é”®çš„æ¡¥æ¢ï¼Œèµ·ç€é‡å¤§çš„ä½œç”¨ã€‚</p>
<p>æŠ€æœ¯å±‚é¢ï¼Œé’ˆå¯¹ç›®å‰å„ä¸­å¿ƒç›¸å…³éŸ³è§†é¢‘çš„è¯‰æ±‚ï¼Œä»¥åŠç›®å‰å‡ºç°çš„éŸ³è§†é¢‘å¯¹æ¥æˆæœ¬é«˜ã€æ ‡å‡†ä¸ç»Ÿä¸€ã€è´¨é‡éš¾æŠŠæ§ã€ä½“éªŒä¸ä¸€è‡´ç­‰ç›¸å…³é—®é¢˜ï¼Œæå‡æ•´ä½“ç ”å‘æ•ˆç‡ï¼Œæ”¶æ•›ç”¨æˆ·ä½“éªŒã€ç»Ÿä¸€å¼€å‘æ ‡å‡†ï¼Œä¿è¯ç›¸å…³æ€§èƒ½æ£€æµ‹ç­‰è‡³å…³é‡è¦ã€‚ä¸‹é¢æˆ‘å°†è¯¦ç»†ä»‹ç»ä¸‹åœ¨æœ¬æ¬¡ç ”å‘è¿‡ç¨‹ä¸­ï¼ŒåŸºäºéŸ³è§†é¢‘ç›¸å…³åº•å±‚åŸç†çš„æ¢ç´¢å’Œé€šç”¨åŒ–ç»„ä»¶è®¾è®¡è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜æ¢è®¨ã€‚</p>
<h4 data-id="heading-1">1.1 éŸ³è§†é¢‘ç›‘æ§</h4>
<p>æ•´ä¸ªè¯„æ ‡ç¯èŠ‚ï¼Œä¸»è¦ç”¨åˆ°éŸ³è§†é¢‘å¼ºåŒ–ç›‘ç®¡æ‰‹æ®µåŒ…æ‹¬ä¸‹é¢ä¸‰å¤§æ–¹é¢ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c75027b6a55d44c584345acdae18c989~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=sE07cXl9C2Qai8%2BYm2jMfn9XKFw%3D" alt="image.png" loading="lazy"/></p>
<p>åŠ å¼ºç”µå­åŒ–è¯„æ ‡è¿‡ç¨‹ä¸­çš„ç›‘ç®¡åŠ›åº¦ï¼Œå¯¹äºéŸ³è§†é¢‘å„æ–¹é¢çš„èƒ½åŠ›ï¼Œè¦æ±‚éå¸¸é«˜ï¼Œæ»¡è¶³ä¸šåŠ¡çš„æ•´ä½“ç”µå­åŒ–è¯„æ ‡æµç¨‹ï¼Œé’ˆå¯¹ä¸åŒçš„ä¸šåŠ¡åœºæ™¯åšå®šåˆ¶åŒ–å¤„ç†ï¼Œé‚£ä¹ˆå­µåŒ–ä¸€æ¬¾éŸ³è§†é¢‘é€šç”¨åŒ–ç»„ä»¶çš„äº§å“ï¼Œæä¾›ä¸€ç«™å¼é…ç½®éŸ³è§†é¢‘çš„èƒ½åŠ›ï¼Œå¾ˆæœ‰å¿…è¦ã€‚å¯ä»¥æœ‰æ•ˆè§£å†³ä¸åŒå›¢é˜Ÿæ¥å…¥çš„æˆæœ¬é«˜ã€ä¸šåŠ¡å®šåˆ¶åŒ–ã€å¼€è¯„åŒå±ç­‰é—®é¢˜ã€‚</p>
<h3 data-id="heading-2">2ã€éŸ³è§†é¢‘<code>WebRTC</code>ä»‹ç»</h3>
<h4 data-id="heading-3">2.1 åŸºæœ¬åŸç†</h4>
<p>éŸ³è§†é¢‘åº•å±‚èƒ½åŠ›ï¼Œæ˜¯åŸºäºæµè§ˆå™¨æä¾›çš„WEBç«¯ç‚¹å¯¹ç‚¹ä¹‹é—´é€šä¿¡çš„<code>WebRTC</code>çš„èƒ½åŠ›ï¼Œé€šè¿‡æµè§ˆå™¨æä¾›çš„APIï¼Œ å¯åœ¨ç½‘é¡µç«¯å®ç°éŸ³è§†é¢‘é€šä¿¡ï¼Œ<code>WebRTC</code>ä¸»è¦æä¾›äº†2ç§èƒ½åŠ›ï¼Œ<code>åª’ä½“æ•è·è®¾å¤‡</code>å’Œ<code>ç‚¹å¯¹ç‚¹è¿æ¥</code>ã€‚</p>
<p>aã€éŸ³è§†é¢‘<code>ç‚¹å¯¹ç‚¹è¿æ¥</code>çš„åŸºæœ¬åŸç†æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/847a19a6a25f42fc998d27bc64083e3e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=WZR9E%2FZZMcjiDsunoZgoTjthSK8%3D" alt="image.png" loading="lazy"/></p>
<p>å®¢æˆ·ç«¯A ä¸å®¢æˆ·ç«¯Bä¹‹é—´ï¼Œå› ä¸ºé˜²ç«å¢™çš„é™åˆ¶æ˜¯æ— æ³•è¿›è¡Œé€šä¿¡çš„ï¼Œéœ€è¦å€ŸåŠ©TURNæœåŠ¡å™¨ï¼Œè¿›è¡Œç‚¹ä¸ç‚¹ä¹‹é—´çš„é“¾æ¥ï¼Œå¤§è‡´åŸºæœ¬åŸç†å¯ä»¥ç”¨ä¸‹å›¾æ¥è¯´æ˜ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa12a1b557da4348ae292fdcf9d5aefc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=KnjdTwx9bj1nWNffz%2FPFkPJdj4Y%3D" alt="image.png" loading="lazy"/></p>
<p>bã€éŸ³è§†é¢‘<code>åª’ä½“æ•è·è®¾å¤‡</code>çš„è·å–</p>
<p>åª’ä½“æ•è·è®¾å¤‡åŒ…æ‹¬æ‘„åƒå¤´å’Œéº¦å…‹é£ï¼Œè¿˜åŒ…æ‹¬å±å¹•æ•è·è®¾å¤‡ã€‚å¯¹äºæ‘„åƒå¤´å’Œéº¦å…‹é£ï¼Œè°ƒç”¨Â <code>navigator.mediaDevices.getUserMedia()</code>Â æ¥æ•è·Â <code>MediaStreams</code>ã€‚å¯¹äºå±å¹•å½•åˆ¶ï¼Œä½¿ç”¨Â <code>navigator.mediaDevices.getDisplayMedia()</code>ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ‘„åƒå¤´å’Œéº¦å…‹é£</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">openMediaDevices</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">constraints</span>) =&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> navigator.<span class="hljs-property">mediaDevices</span>.<span class="hljs-title function_">getUserMedia</span>(constraints);
}

<span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> stream = <span class="hljs-title function_">openMediaDevices</span>({<span class="hljs-string">'video'</span>:<span class="hljs-literal">true</span>,<span class="hljs-string">'audio'</span>:<span class="hljs-literal">true</span>});
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'éŸ³è§†é¢‘æµæ•°æ®:'</span>, stream);
} <span class="hljs-keyword">catch</span>(error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);
}
</code></pre>
<p>å¦‚æœå­˜åœ¨å¤–æ¥è®¾å¤‡æ‘„åƒå¤´æˆ–è€…éº¦å…‹é£ï¼Œæ­¤æ—¶ï¼Œéœ€è¦å»æŸ¥è¯¢æ‰€æœ‰å½“å‰å®¢æˆ·ç«¯çš„æ‰€æœ‰è®¾å¤‡ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨å‡½æ•°Â <code>enumerateDevices()</code>Â æ¥å®ç° ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> getConnectedDevices = <span class="hljs-title function_">async</span>(<span class="hljs-params"><span class="hljs-keyword">type</span></span>) {
    <span class="hljs-keyword">const</span> devices = <span class="hljs-keyword">await</span> navigator.<span class="hljs-property">mediaDevices</span>.<span class="hljs-title function_">enumerateDevices</span>();
    <span class="hljs-keyword">return</span> devices.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">device</span> =&gt;</span> device.<span class="hljs-property">kind</span> === <span class="hljs-keyword">type</span>)
}

<span class="hljs-keyword">const</span> videoCameras = <span class="hljs-title function_">getConnectedDevices</span>(<span class="hljs-string">'videoinput'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰€æœ‰çš„æ‘„åƒå¤´çš„æ•°æ®:'</span>, videoCameras);
</code></pre>
<p>æ‹¿åˆ°éŸ³è§†é¢‘æµä¹‹åï¼Œéœ€è¦è¿›è¡Œæ’­æ”¾ï¼Œå¯ä»¥å°†å…¶èµ‹å€¼ç»™è§†é¢‘çš„<code>DOM</code>å…ƒç´ ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">const  <span class="hljs-attr">play</span> = async() {
    try {
        const <span class="hljs-attr">constraints</span> = {<span class="hljs-string">'video'</span>: <span class="hljs-literal">true</span>, <span class="hljs-string">'audio'</span>: <span class="hljs-literal">true</span>}<span class="hljs-comment">;</span>
        const <span class="hljs-attr">stream</span> = await navigator.mediaDevices.getUserMedia(constraints)<span class="hljs-comment">;</span>
        const <span class="hljs-attr">videoElement</span> = document.querySelector(<span class="hljs-string">'video#localVideo'</span>)<span class="hljs-comment">;</span>
        <span class="hljs-attr">videoElement.srcObject</span> = stream<span class="hljs-comment">;</span>
    } catch(error) {
        console.error('Error opening video camera.', error)<span class="hljs-comment">;</span>
    }
}

return (
  &lt;div <span class="hljs-attr">className</span>=<span class="hljs-string">"video-demo-container"</span>&gt;
    &lt;video <span class="hljs-attr">id</span>=<span class="hljs-string">"localVideo"</span> autoplay playsinline controls=<span class="hljs-string">"false"</span>/&gt;
  &lt;/div&gt;
)
</code></pre>
<h4 data-id="heading-4">2.2 <code>WebRTC</code>é€šä¿¡åè®®ä»‹ç»</h4>
<p><code>WebRTC</code>çš„ä¼ è¾“åè®®ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼ŒåŸºäºä¸‹é¢å‡ ä¸ªåè®®æ¥ä¿è¯å®æ—¶éŸ³è§†é¢‘æ—¢æµç•…åˆå®‰å…¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7db140d380148bc8ae692864675d23a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=K8rMQtj%2BukyCQ3bs6o9fkCRRIIA%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘ä»¬ä¸‹é¢åˆ†åˆ«çœ‹ä¸‹ï¼Œè¿™å‡ ç§åè®®å„è‡ªåœ¨éŸ³è§†é¢‘ä¸­èµ·åˆ°çš„ä½œç”¨å’Œåˆ†å·¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e5af1a5273549e9a26b9a1a916d287b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=Ay6fj2nuR7icblned5yfWXH5nhU%3D" alt="image.png" loading="lazy"/></p>
<p>æåˆ°DTLSåè®® ï¼Œ å¤§å®¶åº”è¯¥çŸ¥é“å¦å¤–ä¸€ä¸ªTLSåè®® ï¼Œä½†æ˜¯TLSåè®®æ˜¯ä¸ºTCPè®¾è®¡çš„ï¼Œå®ƒä¾èµ–äºTCPçš„å¯é ã€æœ‰åºä¼ è¾“ï¼Œè€ŒUDPæ˜¯ä¸å¯é ã€ä¸ä¿è¯é¡ºåºçš„ï¼Œæ— æ³•ç›´æ¥ä½¿ç”¨TLSï¼Œå› æ­¤ï¼ŒDTLSä¸»è¦æ˜¯ä¸ºUDPè®¾è®¡çš„ã€‚å¦‚ä¸‹<code>WebRTC</code>å„åè®®å·¥ä½œæµç¨‹å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd4a556dbeda4dc3bd0319ab132d5097~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=UxZJfm0e6XiNxNNuB7m0xCh%2BUoQ%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-5">2.3 <code>WebRTC</code>éŸ³è§†é¢‘å®ç°è¿‡ç¨‹</h4>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ•´ä¸ªéŸ³è§†é¢‘è¿‡ç¨‹ï¼ŒåŒ…æ‹¬ å‰æœŸçš„å‡†å¤‡é˜¶æ®µã€ä¿¡ä»¤é˜¶æ®µã€é“¾æ¥é˜¶æ®µã€æœ€åçš„é€šä¿¡é˜¶æ®µï¼Œå¤§è‡´è¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºæµç¨‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bdc1169f1bdf46808b7dad389cc0d339~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=vaTVLT7BValztQp%2FgcBr8TwZn7I%3D" alt="image.png" loading="lazy"/></p>
<p>åˆ›å»ºOfferçš„ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> peerConnection = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RTCPeerConnection</span>();
<span class="hljs-comment">// åˆ›å»ºSDP</span>
peerConnection.<span class="hljs-title function_">createOffer</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">offer</span>) {
  <span class="hljs-comment">// ...</span>
}, <span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(error);
});
</code></pre>
<p>åŸºäºä»¥ä¸Šæ•´ä¸ªéŸ³è§†é¢‘çš„åº•å±‚èƒ½åŠ›ï¼Œä¸‹é¢æˆ‘è¿™è¾¹å°†è¯¦ç»†ä»‹ç»ä¸‹ï¼ŒåŸºäºæˆ‘ä»¬çš„å…¬å¸çš„ä¸šåŠ¡æƒ…å†µï¼Œé’ˆå¯¹ä¸šåŠ¡çš„èƒŒæ™¯å’Œè¯‰æ±‚ï¼Œæä¾›çš„ä¸€ç«™å¼æ¥å…¥éŸ³è§†é¢‘é€šç”¨åŒ–ç»„ä»¶çš„ç›¸å…³è®¾è®¡å’Œé—®é¢˜æ¢è®¨ã€‚</p>
<h3 data-id="heading-6">3ã€éŸ³è§†é¢‘é€šç”¨ç»„ä»¶è®¾è®¡</h3>
<h4 data-id="heading-7">3.1 ç»„ä»¶åŸºæœ¬è®¾è®¡æ€è·¯</h4>
<p>éŸ³è§†é¢‘é€šç”¨åŒ–ç»„ä»¶ï¼Œä¼šæä¾›åŸºäºéŸ³è§†é¢‘åº•å±‚èƒ½åŠ›ï¼Œæä¾›SDKå’ŒUIç»„ä»¶äºŒæ–¹åŒ…ä¸¤ä¸ªäº§ç‰©ï¼Œé’ˆå¯¹æ¯ä¸ªSDKä¸­ï¼Œä¼šæä¾›è¯­éŸ³è½¬æ–‡å­—ã€èŠå¤©ã€çº¯è¯­éŸ³ã€è§†é¢‘+è¯­éŸ³ç­‰SDK, å¯ä»¥ä¾›ä¸åŒçš„åœºæ™¯ä½¿ç”¨ï¼Œæ¯”å¦‚æ¡Œé¢å½•å±ç­‰éœ€è¦å•ç‹¬è°ƒç”¨SDK , å…¶æ¬¡é’ˆå¯¹UIç»„ä»¶ï¼Œä¼šæ‰“åŒ…å°è£…å¥½çš„æ•´å¥—UIäº§å“ï¼Œé€šè¿‡é…ç½®å‚æ•°ï¼Œå³å¯å®ç°æ•´å¥—éŸ³è§†é¢‘çš„åŠŸèƒ½å’Œä½¿ç”¨ã€‚</p>
<p>å®ç°æ•ˆæœDemoæˆªå›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b046015354f4147b27181fbe6b34fba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=NGWPLubag5tpZr94nJ6ehwgWpsg%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸Šé¢çš„Demoæˆªå›¾åŠŸèƒ½æ“ä½œæ˜¯å‚ç›´å¸ƒå±€çš„æµ®å±‚ï¼Œä¹Ÿæä¾›äº†æ°´å¹³æ–¹å‘çš„å¸ƒå±€æµ®å±‚ï¼Œä¸»è¦é€šè¿‡å‚æ•°é…ç½®ã€‚</p>
<p>æ•´ä¸ªéŸ³è§†é¢‘æ ¸å¿ƒåŠŸèƒ½åˆ†ä¸ºä¸‹é¢å‡ ä¸ªéƒ¨åˆ†ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5010bf506b749658084d2b8ead50979~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=87%2BdS00yde%2BGfmguc8IJsYv21Ks%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<ul>
<li>è§†é¢‘å—çš„å¤§å°ï¼Œä¼šè·Ÿéšå½“å‰å±å¹•çš„å¤§å°ï¼Œè¿›è¡ŒåŠ¨æ€å˜åŒ–ï¼Œä¸”å®æ—¶è®¡ç®—å¤§å°ï¼Œèµ‹å€¼ç»™æ¯ä¸ªç»„ä»¶çš„åŒºåŸŸå®¹å™¨çš„å®½åº¦ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜éœ€è¦ç›‘å¬<code>window.onResize</code>çš„å¤§å°å˜åŒ–ã€‚</li>
<li>æ“ä½œåŒºåŠŸèƒ½æ¨¡å—ï¼Œé€šè¿‡å‚æ•°é…ç½®ï¼Œç”±ä¸šåŠ¡ä¾§æ§åˆ¶å…¶æ˜¾éšï¼ŒåŒ…æ‹¬å›¾æ ‡ã€åç§°ã€ç½®ç°ç­‰ã€‚</li>
<li>å†…ç½®åŠŸèƒ½åŒºåŸŸï¼Œä¸»è¦æ˜¯é€šç”¨ç»„ä»¶æœ¬èº«æä¾›çš„å†…ç½®èƒ½åŠ›ï¼Œæ¯”å¦‚è®¨è®ºå’Œè¯­éŸ³è½¬æ–‡å­—ç­‰ã€‚</li>
<li>å¤–ç½®åŠŸèƒ½åŒºåŸŸï¼Œæ¯”å¦‚ä¸šåŠ¡è‡ªå®šä¹‰æ’å…¥çš„ç»„ä»¶é¡µé¢ï¼Œç›®å‰æä¾›2ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯åµŒå…¥å¼çš„æ’å…¥ï¼Œä¸€ç§æ˜¯æµ®å±‚å¼æ’å…¥ï¼Œä¾æ®å‚æ•°å­—æ®µ <code>isSlotComponentInsertToPage</code> æ¥åŒºåˆ†ã€‚</li>
<li>ä¸»è¦æ ¸å¿ƒçš„æ¨¡å—ï¼Œä¸»è¦åŒ…æ‹¬è§†é¢‘æ¨¡å—ã€æ“ä½œåŒºæ¨¡å—ã€å†…ç½®/è‡ªå®šä¹‰åŠŸèƒ½åŒºåŸŸæ¨¡å—ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bede8912bd6a4bcc893b8c1fd8e4d2fc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=ILcSlOXG%2F%2Fmpnz2xqr%2Bx8m1gv%2BI%3D" alt="image.png" loading="lazy"/></p>
<p>æµ‹è¯•Demoä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">
import React, { useEffect, useState , useRef } from 'react'<span class="hljs-comment">;</span>

// è‡ªå®šä¹‰ç»„ä»¶å¼¹çª—
export const <span class="hljs-attr">DefineComponent</span> = (props) =&gt; {
  const {
    onRemoveSoltComponent,
    onShareScreen,
  } = props
  console.log("===defineComponent", props)
  const <span class="hljs-attr">onClickSure</span> = async () =&gt; {
    await onShareScreen?.()
    await onRemoveSoltComponent?.()
  }
  return (
    &lt;Modal
      <span class="hljs-attr">title</span>=<span class="hljs-string">"è‡ªå®šä¹‰ç»„ä»¶"</span>
      <span class="hljs-attr">visible</span>={<span class="hljs-literal">true</span>}
      <span class="hljs-attr">onCancel</span>={<span class="hljs-literal">on</span>RemoveSoltComponent}
      <span class="hljs-attr">onOk</span>={<span class="hljs-literal">on</span>ClickSure}
    &gt;
      &lt;p&gt;Some contents...&lt;/p&gt;
      &lt;p&gt;Some contents...&lt;/p&gt;
      &lt;p&gt;Some contents...&lt;/p&gt;
    &lt;/Modal&gt;
  )
}

// è‡ªå®šä¹‰ç»„ä»¶å¼¹çª—2
export const <span class="hljs-attr">DefineComponent2</span> = (props) =&gt; {

  const {
    onRemoveSoltComponent,
    targetKey
  } = props<span class="hljs-comment">;</span>
  console.log("OnCloseDialog", props)

  // å…³é—­å½“å‰ç»„ä»¶
  const <span class="hljs-attr">onRemoveSoltComponentHandle</span> = () =&gt; {
    onRemoveSoltComponent(targetKey)
  }

  return &lt;div <span class="hljs-attr">onClick</span>={<span class="hljs-literal">on</span>RemoveSoltComponentHandle}&gt;è¿™æ˜¯ä¸€ä¸ªä¸šåŠ¡æ–¹è‡ªå®šä¹‰æ’å…¥é¡µé¢çš„ä¼šè®®ç›‘æ§<span class="hljs-number">2222222</span>ç»„ä»¶ï¼Œ ç‚¹å‡»æˆ‘å¯ä»¥å…³é—­é¡µé¢&lt;/div&gt;
}

/**
 * è§†é¢‘+è¯­éŸ³çš„ç»„ä»¶ï¼Œä¸šåŠ¡æ–¹å¼•å…¥demo
 */
const <span class="hljs-attr">OnlineMeetingDemo</span> = () =&gt; {
  const <span class="hljs-section">[modalVisible, setModalVisible]</span> = useState(true)<span class="hljs-comment">;</span>
  const <span class="hljs-attr">modalVisibleControl</span> = {
    visible: modalVisible,
    closeVisible: () =&gt; {
      setModalVisible(false)<span class="hljs-comment">;</span>
    },
  }
  // é€šç”¨æŒ‰é’®è®¾ç½®æ•°æ®, é»˜è®¤é€šç”¨ç»„ä»¶ä¸­çš„æŒ‰é’®ï¼Œå…¨éƒ¨å±•ç¤º
  const <span class="hljs-attr">generalButtonSettingsData</span> = [
    {
      btnKey: BUTTON_CONSTANTS.CHANGE_VIEW_BUTTON_KEY, // å”¯ä¸€keyå€¼
      isDisabled: <span class="hljs-literal">false</span>, // æ˜¯å¦ç½®ç°
      disabledToolTip: <span class="hljs-string">""</span>, // ç½®ç°çš„æç¤ºtooltip
      isShow: <span class="hljs-literal">true</span>, // æŒ‰é’®æ˜¯å¦æ˜¾ç¤º
      <span class="hljs-literal">on</span>ClickBefore: () =&gt; {}, // ç‚¹å‡»ä¹‹å‰
      <span class="hljs-literal">on</span>ClickAfter: () =&gt; {
        console.log(<span class="hljs-string">"åˆ‡æ¢è§†å›¾ä¹‹å"</span>)
      }, // ç‚¹å‡»ä¹‹å
    },
    ...
  ]<span class="hljs-comment">;</span>

  // è‡ªå®šä¹‰ä¸šåŠ¡ä¾§æŒ‰é’®æ•°æ®
  const <span class="hljs-attr">customButtonSettings</span> = [
    {
      btnImg: <span class="hljs-string">'https://sitecdn.zcycdn.com/1167DH/20248/68cd9c74-6493-4cff-b228-42e3f6965ce5.svg'</span>,
      btnName: <span class="hljs-string">'ä¸šåŠ¡è‡ªå®šä¹‰æŒ‰é’®åç§°'</span>,
      btnKey: <span class="hljs-string">'talkBtn'</span>,
      isDisabled: <span class="hljs-literal">false</span>, // æ˜¯å¦ç½®ç°
      isShow: <span class="hljs-literal">true</span>, // æŒ‰é’®æ˜¯å¦æ˜¾ç¤º
      <span class="hljs-literal">on</span>Click: (props) =&gt; { },
      slotComponent: &lt;div&gt;è¿™æ˜¯ä¸€ä¸ªä¸šåŠ¡æ–¹è‡ªå®šä¹‰æ’å…¥Aç»„ä»¶&lt;/div&gt;, 
      isSlotComponentInsertToPage: <span class="hljs-literal">true</span>, // è‡ªå®šä¹‰ç»„ä»¶æ˜¯å¦æ’å…¥åˆ°é¡µé¢
    },
    ...
  ]

  return (
    &lt;div
      <span class="hljs-attr">className</span>=<span class="hljs-string">"online-meeting-container"</span>
      <span class="hljs-attr">style</span>={{ width: <span class="hljs-string">'100%'</span>, height: <span class="hljs-string">'100%'</span> }}
    &gt;
        &lt;OnlineVideoMeeting
          <span class="hljs-attr">ref</span>={inputRef}
          <span class="hljs-attr">direction</span>=<span class="hljs-string">"inline"</span> // vertical | inline æ–¹å‘
          <span class="hljs-attr">style</span>={{ width: <span class="hljs-string">'100%'</span>, height: <span class="hljs-string">'100%'</span> }}
          <span class="hljs-attr">manufacturer</span>=<span class="hljs-string">"yunxin"</span>
          <span class="hljs-attr">customConfig</span>={configData} // ä¸šåŠ¡æ–¹ç›¸å…³ä¿¡æ¯æ•°æ®
          <span class="hljs-attr">generalButtonSettings</span>={generalButtonSettingsData} // é€šç”¨æŒ‰é’®ç»„ä»¶é…ç½®
          <span class="hljs-attr">customButtonSettings</span>={customButtonSettings} // è‡ªå®šä¹‰æŒ‰é’®é…ç½®
          <span class="hljs-attr">onCustomClientEvents</span>={<span class="hljs-literal">on</span>DefineClientEvents} // æ¥æ”¶åˆ°è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹ï¼Œäº‹ä»¶çš„å›è°ƒ

          <span class="hljs-attr">isCanSeeOtherVideo</span>={<span class="hljs-literal">true</span>} // é»˜è®¤ä¸º<span class="hljs-literal">true</span> å½“å‰è§’è‰²ï¼Œæ˜¯å¦å¯ä»¥çœ‹åˆ°å…¶å®ƒäººçš„è§†é¢‘ç”»é¢ ï¼ˆæ¯”å¦‚ï¼Œä¾›åº”å•†æ— æ³•çœ‹åˆ°ä¸“å®¶çš„ç”»é¢ï¼‰
          <span class="hljs-attr">isOpenAIDenoise</span>={<span class="hljs-literal">false</span>} // é»˜è®¤ä¸å¼€å¯ <span class="hljs-literal">false</span>ï¼Œæ˜¯å¦å¼€å¯å˜å£°ï¼Œå¦‚æœä¸ºç›²è¯„é¡¹ç›®ï¼Œéœ€è¦å¼€å¯å˜å£°
          <span class="hljs-attr">needAIUidList</span>={[]} // ä¼ å…¥éœ€è¦å˜å£°çš„accId ï¼Œ ä»…å½“isOpenAIDenoise ä¸º<span class="hljs-literal">true</span> æ—¶å€™ç”Ÿæ•ˆ
          <span class="hljs-attr">isSpecailRole</span>={<span class="hljs-literal">false</span>} // é»˜è®¤<span class="hljs-literal">false</span> ç‰¹æ®Šçš„è§’è‰²ï¼Œå¯ä»¥è¿›å…¥è§†é¢‘ä¼šè®®ï¼Œä½†æ˜¯ä¸å¯å¼€å¯è§†é¢‘å’ŒéŸ³é¢‘, æ¯”å¦‚ç›‘ç®¡è§’è‰²
          <span class="hljs-attr">isShowRemoveMember</span>={<span class="hljs-literal">true</span>} // é»˜è®¤ä¸æ˜¾ç¤ºï¼Œæ˜¯å¦æ˜¾ç¤ºç§»é™¤äººå‘˜çš„æŒ‰é’® ,é»˜è®¤ ä¸º<span class="hljs-literal">false</span>
          <span class="hljs-attr">isAutoStartMeeting</span>={<span class="hljs-literal">false</span>} // å¦‚æœä¸º<span class="hljs-literal">false</span> , è¯´æ˜ éœ€è¦ç‚¹å‡» å¼€å§‹ä¼šè®®ï¼Œæ‰å¯ä»¥å¯åŠ¨ä¼šè®® ï¼Œ é»˜è®¤ä¸º<span class="hljs-literal">true</span>
          <span class="hljs-attr">isJoinMeetingAutomatically</span>={<span class="hljs-literal">false</span>}  // å½“ isAutoStartMeeting ä¸º<span class="hljs-literal">false</span> æ—¶ï¼Œæ‰ä¼šç”Ÿæ•ˆï¼Œæ˜¯å¦è‡ªåŠ¨è®©å‚ä¼šäººè¿›å…¥ä¼šè®®ï¼Œ<span class="hljs-literal">true</span> æ˜¯ï¼Œ <span class="hljs-literal">false</span>çš„è¯ï¼Œéœ€è¦å‚ä¼šäººç‚¹å‡» å¼€å§‹ä¼šè®® æŒ‰é’®ï¼Œæ‰å¯ä»¥è¿›å…¥
          <span class="hljs-attr">isDisabledAllVideo</span>={<span class="hljs-literal">false</span>} // æ˜¯å¦å°†æ‰€æœ‰ä¸ä¼šè€…çš„è§†é¢‘ç”»é¢ç½®ä¸ºä¸å¯è§ï¼Œæ¯”å¦‚ç›²è¯„é¡¹ç›®çš„è¯ï¼Œå°†æ‰€æœ‰äººçš„è§†é¢‘ç”»é¢éƒ½ç½®ä¸ºä¸å¯è§ , é»˜è®¤ä¸º <span class="hljs-literal">false</span>
          <span class="hljs-attr">disabledVideoToolTip</span>=<span class="hljs-string">""</span> // è§†é¢‘æµ®å±‚tooltipæç¤º , é»˜è®¤ä¸º ç©º
          <span class="hljs-attr">peerOnLineEvent</span>={(props) =&gt; {}} // åŠ å…¥æˆ¿é—´äº‹ä»¶
          <span class="hljs-attr">peerLeaveEvent</span>={(props) =&gt; {}} // ç¦»å¼€æˆ¿é—´äº‹ä»¶
          <span class="hljs-attr">onCloseModalErrorEvents</span>={() =&gt; { }}
          <span class="hljs-attr">onPublishLocalStreamSuccess</span>={()=&gt;{ }}
          <span class="hljs-attr">shouldCrash</span>={shouldCrash}
        /&gt;
    &lt;/div&gt;
  )<span class="hljs-comment">;</span>

}<span class="hljs-comment">;</span>
export default OnlineMeetingDemo<span class="hljs-comment">;</span>
  
</code></pre>
<p>ç»„ä»¶æš´éœ²å‡ºå»å‚æ•°ç»™å¤–éƒ¨ä½¿ç”¨ï¼Œé€šè¿‡<code>cloneElement</code> <code>useImperativeHandle</code>ã€é’©å­å‡½æ•°å›è°ƒcallBackç­‰æ–¹å¼ï¼Œè¿›è¡Œå†…å¤–éƒ¨ä¹‹é—´çš„é€šä¿¡ã€‚</p>
<p>æ•´ä½“çš„éŸ³è§†é¢‘äº§å“è®¾è®¡å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dae76abb9924422aacc225b4d0174279~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=jzAkNb5vhqcmuA4PV7JK9x37Q1w%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-8">3.2 å¤šæ¸ é“è§†é¢‘<code>SDK</code>åè®®çº¦æŸ</h4>
<p>å› ä¸šåŠ¡çš„å‘å±•è¯‰æ±‚ï¼Œåœ¨è®¾è®¡åº•å±‚çš„<code>SDK</code>çš„æ—¶å€™ï¼Œéœ€è¦è€ƒè™‘åç»­çš„<code>SDK</code>çš„å¯æ‰©å±•æ€§ï¼Œåƒæˆ‘ä»¬çš„æ¸ é“å•†æœ‰å¤šä¸ªï¼Œæ¯ä¸ªè§†é¢‘æ¸ é“å•†æä¾›çš„å¯¹åº”çš„è§†é¢‘<code>SDK</code>æ˜¯ä¸ä¸€æ ·çš„ï¼Œé‚£ä¹ˆå¦‚ä½•å»å…¼å®¹ä¸åŒçš„è§†é¢‘æ¸ é“å•†<code>SDK</code>å‘¢ï¼Ÿ</p>
<p>ç¬¬ä¸€ç§<code>SDK</code>è®¾è®¡æ–¹æ¡ˆï¼Œå¦‚æœæ¸ é“å•†<code>SDK</code>é¢‘ç¹æ›´æ”¹, ä»¥åŠé¢‘ç¹æ¥å…¥æ–°çš„<code>SDK</code>çš„è¯ï¼Œæ¯”è¾ƒé€‚ç”¨æ­¤ä¸šåŠ¡åœºæ™¯</p>
<p>é€šè¿‡ åœ¨è‡ªå·±çš„äºŒæ–¹åŒ…ä¸­ï¼Œç»Ÿä¸€åŠ¨æ€åŠ è½½æ³¨å…¥ ä¸åŒçš„<code>SDK</code>çš„åŒ…ç‰ˆæœ¬ï¼Œæ¯ä¸ªè§†é¢‘æ¸ é“å•†å‡ä¸ºå•ç‹¬çš„äºŒæ–¹åŒ…ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ee43ab18fd14a1ab6eac5b4d6cd209a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=bdmK3jUbVruxozRACqGkYvwP8l8%3D" alt="image.png" loading="lazy"/></p>
<p>ç¬¬äºŒç§<code>SDK</code>è®¾è®¡æ–¹æ¡ˆï¼Œå¦‚æœæ¸ é“å•†<code>SDK</code>è¾ƒå°‘ï¼Œä¸”æ›´æ”¹ä¸é¢‘ç¹ï¼Œé‚£ä¹ˆæ¯”è¾ƒé€‚ç”¨æ­¤ä¸šåŠ¡åœºæ™¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3831b7a26464b57a0436a7b522cdeff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=QNof6OovNpopB5aScPFlTLY%2BGdw%3D" alt="image.png" loading="lazy"/></p>
<p>ä»¥ä¸Šä¸¤ç§<code>SDK</code>è®¾è®¡æ–¹æ¡ˆï¼Œå¯¹äºæˆ‘ä»¬å½“å‰çš„ä¸šåŠ¡è¯‰æ±‚ï¼Œ<code>SDK</code>æ¸ é“å•†è¾ƒå°‘ï¼Œä¸”ç¨³å®šï¼Œé‚£ä¹ˆç›®å‰é‡‡ç”¨çš„æ˜¯ç¬¬äºŒç§è®¾è®¡æ–¹æ¡ˆï¼Œä»£ç Demoç±»ä¼¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Channel1SDK</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./channelSource/channel1"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Channel2SDK</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./channelSource/channel2"</span>;

<span class="hljs-comment">/**
 * æ ¹æ®é…ç½®è·å–å¯¹åº”çš„SDKçš„å®ä¾‹
 * <span class="hljs-doctag">@param</span> <span class="hljs-variable">type</span>
 * <span class="hljs-doctag">@returns</span>
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getSDKInstance</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"><span class="hljs-keyword">type</span></span>) =&gt; {
  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">type</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è¯·ä¼ å…¥ä¸‰æ–¹éŸ³è§†é¢‘type"</span>);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">type</span> === <span class="hljs-string">"channel1"</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Channel1SDK</span>();
  }
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">type</span> === <span class="hljs-string">"channel2"</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Channel2SDK</span>();
  }
  ...
};
</code></pre>
<p>é’ˆå¯¹æ¯ä¸ª<code>SDK</code>, è®¾ç½®ç»Ÿä¸€çš„åº•å±‚çš„åè®®<code>API</code>æ–¹æ³•ï¼Œå¦‚ä¸‹ç±»ä¼¼ä»£ç ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">AudioTransformText</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"src/public/audioTransform"</span>;
<span class="hljs-keyword">import</span>  <span class="hljs-title class_">Video</span>  <span class="hljs-keyword">from</span> <span class="hljs-string">'./video'</span>;
<span class="hljs-keyword">import</span>   <span class="hljs-variable constant_">IM</span>  <span class="hljs-keyword">from</span> <span class="hljs-string">'./im'</span>;
<span class="hljs-keyword">import</span>   <span class="hljs-title class_">Audio</span>  <span class="hljs-keyword">from</span> <span class="hljs-string">'./audio'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Utils</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">BaseSDK</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../../basicSdk'</span>;

<span class="hljs-comment">/*
 * channel1 çš„SDK èŠå¤©ã€è§†é¢‘ã€éŸ³é¢‘
 * @export
 * @class Channel1SDK
 * @implements {BaseSDK}
* */</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">IMPropsType</span> , <span class="hljs-title class_">OptsPropsType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"src/types/typings"</span>;

 <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Channel1SDK</span>  <span class="hljs-keyword">implements</span> <span class="hljs-title class_">BaseSDK</span>{
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>){

  }
  <span class="hljs-comment">// è·å–IM SDK</span>
  <span class="hljs-keyword">async</span> getIM (payload?:<span class="hljs-title class_">IMPropsType</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">IM</span> (payload);
  }

  <span class="hljs-comment">// è·å–WEBRTC SDK</span>
  <span class="hljs-keyword">async</span> getVideo (payload?:<span class="hljs-title class_">OptsPropsType</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Video</span> (payload);
  }

  <span class="hljs-comment">// è·å–AUDIO SDK</span>
  <span class="hljs-keyword">async</span> getAudio (payload?:<span class="hljs-title class_">OptsPropsType</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Audio</span> (payload);
  }

  <span class="hljs-comment">// è·å–é€šç”¨å·¥å…· SDK</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getUtils</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Utils</span>(); <span class="hljs-comment">// é€šç”¨å·¥å…·ç±»</span>
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getAudioTransText</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AudioTransformText</span>(); <span class="hljs-comment">// è·å–è¯­éŸ³è½¬æ–‡å­—SDK</span>
  }

}
</code></pre>
<p>æ¯ä¸€ä¸ª<code>IM</code>ã€<code>Video</code>ã€<code>Audio</code>ã€<code>Utils</code>ã€<code>AudioTransformText</code>å‡åŸºäºè‡ªå·±è‡ªå·±çš„<code>BaseSDK</code> å»è¿›è¡Œå®ç°ï¼Œæ¯”å¦‚<code>IM</code> è‡ªå·±çš„ <code>BaseIMSDK</code>å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">HistoryMsgsPropsType</span>, <span class="hljs-title class_">ResendMsgPropsType</span>  } <span class="hljs-keyword">from</span> <span class="hljs-string">"src/types/typings"</span>;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@desc</span> åŸºç¡€çš„IM å£°æ˜
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BaseIMSDK</span> {

  <span class="hljs-comment">//å‘é€æ¶ˆæ¯ type ä¸º â€œtextâ€è¡¨ç¤ºæ–‡æœ¬ ï¼Œ â€œfileâ€è¡¨ç¤ºæ–‡ä»¶</span>
  <span class="hljs-attr">sendMsg</span>:<span class="hljs-function">(<span class="hljs-params">msg?:<span class="hljs-built_in">any</span> , <span class="hljs-keyword">type</span>?:<span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt;;

  <span class="hljs-comment">// æ¶ˆæ¯å›è°ƒ å°†æ¥æ”¶åˆ°çš„æ–‡æœ¬æˆ–æ–‡ä»¶</span>
  <span class="hljs-comment">// ä¸šåŠ¡æ–¹ç›´æ¥ im.onReciveMsg = (msg) =&gt; {}; ä½¿ç”¨è·å–åˆ°çš„msgå³å¯</span>
  <span class="hljs-attr">onReciveMsg</span>:<span class="hljs-function">(<span class="hljs-params">msg?:<span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;

  <span class="hljs-comment">//æ’¤å›æ¶ˆæ¯</span>
  <span class="hljs-attr">recallMsg</span>:<span class="hljs-function">(<span class="hljs-params">msg?:<span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Boolean</span>&gt;;

  <span class="hljs-comment">// è·å–å†å²æ¶ˆæ¯</span>
  <span class="hljs-attr">getHistoryMsgs</span>:<span class="hljs-function">(<span class="hljs-params">payload? : HistoryMsgsPropsType </span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">any</span>&gt;&gt;;

  <span class="hljs-comment">// æ¶ˆæ¯é‡å‘</span>
  <span class="hljs-attr">resendMsg</span>:<span class="hljs-function">(<span class="hljs-params">payload?:ResendMsgPropsType</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Boolean</span>&gt;;

  <span class="hljs-comment">// æ¶ˆæ¯æ¥æ”¶æ–¹åœ¨æ”¶åˆ°æ¶ˆæ¯å¹¶é˜…è¯»å, è°ƒç”¨æ­¤æ–¹æ³•å‘é€å·²è¯»å›æ‰§</span>
  sendReceiptMsg : <span class="hljs-function">(<span class="hljs-params">payload?:ResendMsgPropsType</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Boolean</span>&gt;;

  <span class="hljs-comment">// æ¶ˆæ¯å·²è¯»å›æ‰§ å›è°ƒå‡½æ•°</span>
  onReceiptedMsg : <span class="hljs-function">(<span class="hljs-params">msg?:<span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Boolean</span>&gt;;

}
</code></pre>
<p>åç»­é’ˆå¯¹æ¯ä¸ªæ¸ é“å•†ï¼ŒæŒ‰ç…§åŸºäºå®šçš„ç»Ÿä¸€åè®®ç±»<code>API</code>çš„æ–¹æ³•ï¼Œå»å®ç°å¯¹åº”çš„åŠŸèƒ½å³å¯ã€‚</p>
<h4 data-id="heading-9">3.3 ç»„ä»¶UIé™çº§å®¹é”™</h4>
<p>å³å½“æŸä¸ªç»„ä»¶å› ä¸ºæŸäº›åŸå› ï¼ˆå¦‚æ•°æ®é”™è¯¯ã€ä¾èµ–ç¼ºå¤±ã€å†…éƒ¨å¼‚å¸¸ç­‰ï¼‰æ— æ³•æ­£å¸¸æ¸²æŸ“æ—¶ï¼Œæˆ‘ä»¬ä¸ä¼šè®©æ•´ä¸ªé¡µé¢å´©æºƒï¼Œè€Œæ˜¯å±•ç¤ºä¸€ä¸ªå¤‡ç”¨çš„UIï¼ˆå¦‚é”™è¯¯æç¤ºã€å ä½ç¬¦ç­‰ï¼‰ï¼ŒåŒæ—¶ä¿è¯å…¶ä»–ç»„ä»¶çš„æ­£å¸¸æ¸²æŸ“ã€‚</p>
<h5 data-id="heading-10">3.3.1 ç»„ä»¶çº§UIé™çº§å®¹é”™å¤„ç†æ–¹æ³•</h5>
<p>é€šå¸¸æœ‰ä»¥ä¸‹å‡ ç§å¸¸ç”¨çš„æ–¹æ³•ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c72e3560b4d4ca1a9535b79017dfc90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=B8MKG8kk7oHRUmPO01B1YqBEgbM%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘ä»¬è¯¦ç»†çœ‹ä¸‹ï¼Œå‡ ç§ä¸åŒçš„é”™è¯¯è¾¹ç•Œå¤„ç†æ–¹æ³•çš„åº”ç”¨ã€‚</p>
<p><code>Error Boundaries</code></p>
<p>React 16å¼•å…¥çš„æ¦‚å¿µï¼Œå¯ä»¥æ•è·å­ç»„ä»¶æ ‘ä¸­çš„JavaScripté”™è¯¯ï¼Œè®°å½•é”™è¯¯ï¼Œå¹¶æ˜¾ç¤ºä¸€ä¸ªé™çº§UIï¼Œå®ƒå®šä¹‰äº†<code>static getDerivedStateFromError()</code>å’Œ<code>componentDidCatch()</code>ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­çš„ä¸€ä¸ªæˆ–ä¸¤ä¸ªï¼Œ æ³¨æ„ï¼Œé”™è¯¯è¾¹ç•Œæ— æ³•æ•è·äº‹ä»¶å¤„ç†ã€å¼‚æ­¥ä»£ç ã€æœåŠ¡ç«¯æ¸²æŸ“ç­‰é”™è¯¯ã€‚</p>
<p>å½“æ•è·åˆ°errorçš„æ—¶å€™ï¼Œè¿›è¡Œé»˜è®¤è§†å›¾å±•ç¤ºï¼Œè€Œä¸æ˜¯ä½¿æ•´ä¸ªç•Œé¢å‡ºç°ç™½å±çš„ç°è±¡ï¼Œæ¶‰åŠåŒ…æ‹¬æ•´ä¸ªç•Œé¢ï¼Œä»¥åŠå±€éƒ¨çš„ç»„ä»¶çš„å´©æºƒç­‰ç»„ä»¶æƒ…å†µï¼Œç›¸å…³<code>ErrorBoundary</code>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ErrorView</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/ErrorView'</span>;
<span class="hljs-keyword">import</span> { pushLogToSentry } <span class="hljs-keyword">from</span> <span class="hljs-string">'./helpers'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-variable constant_">ERROR_TYPE</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./constants'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ErrorBoundary</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) {
    <span class="hljs-variable language_">super</span>(props);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = {
      <span class="hljs-attr">hasError</span>: <span class="hljs-literal">false</span>,
    };
  }

  <span class="hljs-keyword">static</span> <span class="hljs-title function_">getDerivedStateFromError</span>(<span class="hljs-params">error</span>) {
    <span class="hljs-variable language_">window</span>?.<span class="hljs-property">console</span>?.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getDerivedStateFromError:'</span>, error);
    <span class="hljs-comment">// æ›´æ–° state ä½¿ä¸‹ä¸€æ¬¡æ¸²æŸ“èƒ½å¤Ÿæ˜¾ç¤ºé™çº§åçš„ UI</span>
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">hasError</span>: <span class="hljs-literal">true</span> };
  }

  <span class="hljs-title function_">componentDidCatch</span>(<span class="hljs-params">error, errorInfo</span>) {
    <span class="hljs-variable language_">window</span>?.<span class="hljs-property">console</span>?.<span class="hljs-title function_">log</span>(<span class="hljs-string">'componentDidCatch error:'</span>, error);
    <span class="hljs-variable language_">window</span>?.<span class="hljs-property">console</span>?.<span class="hljs-title function_">log</span>(<span class="hljs-string">'componentDidCatch errorInfo:'</span>, errorInfo);
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">if</span> (__DEV__) <span class="hljs-keyword">return</span>;
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-comment">//</span>
    }

    <span class="hljs-comment">// å°†é”™è¯¯æ—¥å¿—ä¸ŠæŠ¥ç»™æœåŠ¡å™¨</span>
    <span class="hljs-keyword">try</span> {
      <span class="hljs-title function_">pushLogToSentry</span>({
        <span class="hljs-attr">message</span>: <span class="hljs-string">`
        url: src/components/ErrorBoundary
        errorName: <span class="hljs-subst">${error?.name}</span>
        errorMsg: <span class="hljs-subst">${error?.meesage}</span>
        errorStack: <span class="hljs-subst">${error?.stack}</span>
        errorComponentStack: <span class="hljs-subst">${errorInfo?.componentStack}</span>
        `</span>,
        <span class="hljs-attr">level</span>: <span class="hljs-variable constant_">ERROR_TYPE</span>,
      });
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-comment">//</span>
    }
  }

  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> { children, onRefresh, errorWrapProps = {} } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>;
    <span class="hljs-keyword">const</span> { hasError } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>;
    <span class="hljs-comment">// é”™è¯¯å±•ç¤ºçš„è§†å›¾</span>
    <span class="hljs-keyword">if</span> (hasError) {
      <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ErrorView</span>
          <span class="hljs-attr">onRefresh</span>=<span class="hljs-string">{onRefresh}</span>
          <span class="hljs-attr">errorWrapProps</span>=<span class="hljs-string">{errorWrapProps}</span>
        /&gt;</span></span>
      );
    }
    <span class="hljs-keyword">return</span> children;
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">withErrorBoundary</span> = (<span class="hljs-params">{ onRefresh, errorWrapProps = {} } = {}</span>) =&gt; <span class="hljs-function">(<span class="hljs-params">Component</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">extends</span> <span class="hljs-title class_">ErrorBoundary</span> {
    <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> { hasError } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>;
      <span class="hljs-comment">// é”™è¯¯å±•ç¤ºçš„è§†å›¾</span>
      <span class="hljs-keyword">if</span> (hasError) {
        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ErrorView</span> <span class="hljs-attr">onRefresh</span>=<span class="hljs-string">{onRefresh}</span> <span class="hljs-attr">errorWrapProps</span>=<span class="hljs-string">{errorWrapProps}</span> /&gt;</span></span>;
      }
      <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Component</span>) {
        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Component</span> {<span class="hljs-attr">...this.state</span>} {<span class="hljs-attr">...this.props</span>} /&gt;</span></span>;
      }
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
  };
};
</code></pre>
<p>ä¸šåŠ¡ä¾§å¼•å…¥çš„æ—¶å€™ï¼Œå¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span>  <span class="hljs-title class_">ErrorBoundary</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"src/components"</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">MyComponent</span> = (<span class="hljs-params"/>)=&gt;{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ErrorBoundary</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">MyComponent</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ErrorBoundary</span>&gt;</span></span>
  )
}
</code></pre>
<p>é‚£ä¹ˆé’ˆå¯¹è¿™ç§é”™è¯¯è¾¹ç•Œçš„å¤„ç†æ–¹æ³•ï¼Œå¦‚ä½•å»æ¨¡æ‹Ÿé’ˆå¯¹éŸ³è§†é¢‘é€šç”¨åŒ–ç»„ä»¶å´©æºƒçš„å„ç§åœºæ™¯å‘¢ï¼Ÿ</p>
<ul>
<li>æµ‹è¯•æ­¥éª¤</li>
</ul>

<pre><code class="hljs language-css" lang="css">graph <span class="hljs-selector-tag">TD</span>
    <span class="hljs-selector-tag">A</span><span class="hljs-selector-attr">[åˆ›å»ºä¼šå´©æºƒçš„å­ç»„ä»¶]</span> --&gt; <span class="hljs-selector-tag">B</span><span class="hljs-selector-attr">[åœ¨çˆ¶ç»„ä»¶ä¸­åµŒå…¥]</span>
    <span class="hljs-selector-tag">B</span> --&gt; C<span class="hljs-selector-attr">[è§¦å‘å´©æºƒæ¡ä»¶]</span>
    C --&gt; D<span class="hljs-selector-attr">[æ£€æµ‹çˆ¶ç»„ä»¶è¡Œä¸º]</span>
    D --&gt; E<span class="hljs-selector-attr">[æ•è·è¾¹ç•Œæƒ…å†µ]</span>
</code></pre>
<ul>
<li>åŠŸèƒ½æµ‹è¯•åœºæ™¯</li>
</ul>






























<table><thead><tr><th>æµ‹è¯•åŠ¨ä½œ</th><th>é¢„æœŸç»“æœ</th><th>æ£€æµ‹æ–¹æ³•</th></tr></thead><tbody><tr><td>è§¦å‘å­ç»„ä»¶å´©æºƒ</td><td>å­ç»„ä»¶æ˜¾ç¤ºé”™è¯¯è¾¹ç•Œå†…å®¹</td><td>æ£€æŸ¥DOMå…ƒç´ Â <code>.error-fallback</code></td></tr><tr><td>çˆ¶ç»„ä»¶æŒ‰é’®åŠŸèƒ½</td><td>çˆ¶ç»„ä»¶çŠ¶æ€æ­£å¸¸æ›´æ–°</td><td>æ£€æŸ¥Â <code>parentState</code>Â çŠ¶æ€</td></tr><tr><td>çˆ¶ç»„ä»¶æ¸²æŸ“</td><td>å´©æºƒåŒºåŸŸå¤–UIå®Œæ•´æ— ç™½å±</td><td>å¯è§†æ£€æŸ¥ + DOM å¿«ç…§å¯¹æ¯”</td></tr><tr><td>æ§åˆ¶å°é”™è¯¯</td><td>é”™è¯¯è¢«æ•è·æœªæ‰©æ•£</td><td>ç›‘å¬Â <code>window.onerror</code>Â äº‹ä»¶</td></tr></tbody></table>
<ul>
<li>æµ‹è¯•è¿‡ç¨‹&amp;ç»“æœå¦‚ä¸‹æˆªå›¾ï¼š</li>
</ul>
<p>1ã€æ¨¡æ‹ŸéŸ³è§†é¢‘ç»„ä»¶ï¼Œå¼•å…¥åˆ°ä¸šåŠ¡å·¥ç¨‹é¡¹ç›®ä¸­ï¼Œæ­¤æ—¶å¦‚æœéŸ³è§†é¢‘ç»„ä»¶å†…éƒ¨å‡ºç°å´©æºƒçš„æƒ…å†µï¼Œå³æŠ¥é”™äº†</p>
<p><code>throw new Error</code>ï¼Œæ­¤æ—¶ï¼Œä¸šåŠ¡å·¥ç¨‹ä¸šåŠ¡ä¸åº”è¯¥å—åˆ°å½±å“ï¼Œç•Œé¢æ˜¾ç¤ºæ­£å¸¸ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b91151281feb447da5a2e1d9438d5e32~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=oDhFGFQHl8iEBZhTXMSjBJe3Xw8%3D" alt="image.png" loading="lazy"/></p>
<p>ç‚¹å‡»æŒ‰é’®ï¼Œè§¦å‘å­ç»„ä»¶å´©æºƒï¼Œæ­¤æ—¶ çˆ¶ç»„ä»¶ä¾ç„¶å¯ä»¥æ­£å¸¸æ˜¾ç¤ºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e9a44c83a324151b9e6e9517a76bd3a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=VBXnsvRan44AvTNuZA28QFeS3E0%3D" alt="image.png" loading="lazy"/></p>
<p>2ã€æ¨¡æ‹Ÿä¸šåŠ¡è‡ªå®šä¹‰ç»„ä»¶å´©æºƒçš„æƒ…å†µï¼Œåœ¨éŸ³è§†é¢‘é€šç”¨åŒ–ç»„ä»¶ä¸­ï¼Œå¯ä»¥è‡ªå®šä¹‰æ’å…¥ä¸šåŠ¡æ–¹çš„ç»„ä»¶ï¼Œæ­¤æ—¶å¦‚æœä¸šåŠ¡æ–¹ç»„ä»¶å´©æºƒäº†ï¼Œé‚£ä¹ˆå¯¹åº”çš„éŸ³è§†é¢‘ç»„ä»¶ä¸åº”è¯¥å—åˆ°å½±å“ï¼Œä¸ä¼šå‡ºç°ç™½å±çš„ç°è±¡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9d50aeb22b74aad9f6d249687843f0b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=umVP3BYbS38geA%2FqN33WSZNF1SA%3D" alt="image.png" loading="lazy"/></p>
<p>try-catch</p>
<p>é”™è¯¯è¾¹ç•Œæ— æ³•æ•è·å¼‚æ­¥ä»£ç å’Œäº‹ä»¶ä¸­çš„é”™è¯¯ï¼Œè¿™äº›é”™è¯¯æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å¤„ç†ï¼Œä¾‹å¦‚ï¼Œåœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ã€‚</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  state = { hasError: <span class="hljs-literal">false</span> };

  handleClick = () =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// å¯èƒ½ä¼šæŠ›å‡ºé”™è¯¯çš„æ“ä½œ</span>
      doSomething();
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">this</span>.setState({ hasError: <span class="hljs-literal">true</span> });
      console.error(error);
    }
  }

  render() {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state.hasError) {
      <span class="hljs-keyword">return</span> &lt;div&gt;<span class="hljs-type">Error</span> in event handler.&lt;/div&gt;;
    }

    <span class="hljs-keyword">return</span> &lt;button onClick={<span class="hljs-keyword">this</span>.handleClick}&gt;<span class="hljs-type">Click</span> me&lt;/button&gt;;
  }
}
</code></pre>
<p>å¯¹äºå¼‚æ­¥ä»£ç ï¼ˆå¦‚setTimeoutã€Promiseï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»ä¼¼çš„try-catchï¼Œä½†æ³¨æ„ï¼Œåœ¨Promiseä¸­è¦ç”¨catchï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">someAsyncFunction</span>()
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
    <span class="hljs-comment">// å¤„ç†æ•°æ®</span>
  })
  .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-comment">// å¤„ç†é”™è¯¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({ <span class="hljs-attr">hasError</span>: <span class="hljs-literal">true</span> });
  });
</code></pre>
<p>é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰</p>
<p>å¯ä»¥åˆ›å»ºä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªç»„ä»¶ï¼Œè¿”å›ä¸€ä¸ªåŒ…è£¹äº†é”™è¯¯è¾¹ç•Œçš„æ–°ç»„ä»¶</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">withErrorBoundary</span> = (<span class="hljs-params">{ onRefresh, errorWrapProps = {} } = {}</span>) =&gt; <span class="hljs-function">(<span class="hljs-params">Component</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">extends</span> <span class="hljs-title class_">ErrorBoundary</span> {
    <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> { hasError } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>;
      <span class="hljs-comment">// é”™è¯¯å±•ç¤ºçš„è§†å›¾</span>
      <span class="hljs-keyword">if</span> (hasError) {
        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ErrorView</span> <span class="hljs-attr">onRefresh</span>=<span class="hljs-string">{onRefresh}</span> <span class="hljs-attr">errorWrapProps</span>=<span class="hljs-string">{errorWrapProps}</span> /&gt;</span></span>;
      }
      <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Component</span>) {
        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Component</span> {<span class="hljs-attr">...this.state</span>} {<span class="hljs-attr">...this.props</span>} /&gt;</span></span>;
      }
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
  };
};
</code></pre>
<p>ä¸šåŠ¡ä¾§ä½¿ç”¨çš„æ–¹å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { withErrorBoundary } <span class="hljs-keyword">from</span> <span class="hljs-string">'src/components'</span>;
<span class="hljs-keyword">const</span>  <span class="hljs-title function_">MyConponent</span> = (<span class="hljs-params"/>)=&gt;{
  .....
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">withErrorBoundary</span>()(<span class="hljs-title class_">MyConponent</span>)
</code></pre>
<h5 data-id="heading-11">3.3.2 å¸¸è§çš„é™çº§åœºæ™¯ä¸å¤„ç†æ–¹æ¡ˆ</h5>
<ul>
<li>ç»„ä»¶åŠ è½½å¤±è´¥é™çº§</li>
</ul>
<p>åœºæ™¯ï¼šå¼‚æ­¥ç»„ä»¶åŠ è½½è¶…æ—¶æˆ–ç½‘ç»œé”™è¯¯</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { <span class="hljs-title class_">Suspense</span>, useState, useCallback } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// 1. é”™è¯¯è¾¹ç•Œé™çº§</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ErrorBoundary</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> {
  state = { <span class="hljs-attr">hasError</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span> };
  
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">getDerivedStateFromError</span>(<span class="hljs-params">error</span>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">hasError</span>: <span class="hljs-literal">true</span>, error };
  }
  
  <span class="hljs-title function_">componentDidCatch</span>(<span class="hljs-params">error, errorInfo</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Component loading failed:'</span>, error, errorInfo);
  }
  
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">hasError</span>) {
      <span class="hljs-comment">// é™çº§åˆ°åŸºç¡€UI</span>
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">fallback</span> || (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"component-fallback"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>åŠŸèƒ½åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> this.setState({ hasError: false })}&gt;
            é‡è¯•
          <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
      );
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">children</span>;
  }
}

<span class="hljs-comment">// 2. å¼‚æ­¥ç»„ä»¶é™çº§</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">LazyComponent</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> 
  <span class="hljs-keyword">import</span>(<span class="hljs-string">'./ComplexComponent'</span>)
    .<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> ({ 
      <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">BasicComponent</span> /&gt;</span></span> 
    }))
);

<span class="hljs-comment">// å¤‡ç”¨åŸºç¡€ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">BasicComponent</span> = (<span class="hljs-params"/>) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"basic-version"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>åŸºç¡€æ¨¡å¼<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å½“å‰åŠŸèƒ½ä»¥ç®€åŒ–æ¨¡å¼æ˜¾ç¤º<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ErrorBoundary</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">BasicComponent</span> /&gt;</span>}&gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">div</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">LazyComponent</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ErrorBoundary</span>&gt;</span></span>
);
</code></pre>
<ul>
<li>åŠŸèƒ½ä¾èµ–é™çº§</li>
</ul>
<p>åœºæ™¯ï¼šæµè§ˆå™¨ä¸æ”¯æŒæŸäº›APIæˆ–ç¬¬ä¸‰æ–¹åº“åŠ è½½å¤±è´¥</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç‰¹æ€§æ£€æµ‹é™çº§</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">withFeatureDetection</span> = (<span class="hljs-params">features</span>) =&gt; <span class="hljs-function">(<span class="hljs-params">Component</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [supportedFeatures, setSupportedFeatures] = <span class="hljs-title function_">useState</span>({});
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// æ£€æµ‹æµè§ˆå™¨æ”¯æŒæƒ…å†µ</span>
    <span class="hljs-keyword">const</span> checks = {
      <span class="hljs-attr">webGL</span>: !!<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'canvas'</span>).<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'webgl'</span>),
      <span class="hljs-attr">touch</span>: <span class="hljs-string">'ontouchstart'</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>,
      <span class="hljs-attr">serviceWorker</span>: <span class="hljs-string">'serviceWorker'</span> <span class="hljs-keyword">in</span> navigator,
      <span class="hljs-comment">// æ·»åŠ æ›´å¤šç‰¹æ€§æ£€æµ‹...</span>
    };
    
    <span class="hljs-title function_">setSupportedFeatures</span>(checks);
  }, []);

  <span class="hljs-comment">// æ ¹æ®æ”¯æŒæƒ…å†µè¿”å›ä¸åŒç»„ä»¶</span>
  <span class="hljs-keyword">if</span> (features.<span class="hljs-property">requiresWebGL</span> &amp;&amp; !supportedFeatures.<span class="hljs-property">webGL</span>) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">CanvasFallback</span> {<span class="hljs-attr">...props</span>} /&gt;</span></span>;
  }
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Component</span> {<span class="hljs-attr">...props</span>} <span class="hljs-attr">supportedFeatures</span>=<span class="hljs-string">{supportedFeatures}</span> /&gt;</span></span>;
};

<span class="hljs-comment">// ç¬¬ä¸‰æ–¹åº“é™çº§</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">MapComponent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [mapLib, setMapLib] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// åŠ¨æ€åŠ è½½åœ°å›¾åº“</span>
    <span class="hljs-keyword">import</span>(<span class="hljs-string">'advanced-map-library'</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">lib</span> =&gt;</span> <span class="hljs-title function_">setMapLib</span>(lib))
      .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'é«˜çº§åœ°å›¾åº“åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨åŸºç¡€ç‰ˆæœ¬'</span>);
        <span class="hljs-comment">// é™çº§åˆ°åŸºç¡€åœ°å›¾æˆ–é™æ€å›¾ç‰‡</span>
        <span class="hljs-keyword">import</span>(<span class="hljs-string">'./basic-map'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">lib</span> =&gt;</span> <span class="hljs-title function_">setMapLib</span>(lib));
      });
  }, []);
  
  <span class="hljs-keyword">if</span> (!mapLib) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>åœ°å›¾åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  
  <span class="hljs-keyword">return</span> mapLib.<span class="hljs-property">default</span> ? 
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapLib.default</span> /&gt;</span></span> : 
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/static-map.jpg"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"é™æ€åœ°å›¾"</span> /&gt;</span></span>;
};
</code></pre>
<ul>
<li>æ€§èƒ½é™çº§æ–¹æ³•</li>
</ul>
<p>åœºæ™¯ï¼šè®¾å¤‡æ€§èƒ½ä¸è¶³æ—¶è‡ªåŠ¨é™ä½è§†è§‰æ•ˆæœ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ€§èƒ½æ„ŸçŸ¥é™çº§</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">usePerformanceMode</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [performanceMode, setPerformanceMode] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'normal'</span>);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// æ£€æµ‹è®¾å¤‡æ€§èƒ½</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">detectPerformance</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// 1. æ£€æŸ¥ç½‘ç»œé€Ÿåº¦</span>
      <span class="hljs-keyword">if</span> (navigator.<span class="hljs-property">connection</span>) {
        <span class="hljs-keyword">const</span> { effectiveType, downlink } = navigator.<span class="hljs-property">connection</span>;
        <span class="hljs-keyword">if</span> (effectiveType === <span class="hljs-string">'slow-2g'</span> || downlink &lt; <span class="hljs-number">1</span>) {
          <span class="hljs-title function_">setPerformanceMode</span>(<span class="hljs-string">'low'</span>);
          <span class="hljs-keyword">return</span>;
        }
      }
      
      <span class="hljs-comment">// 2. æ£€æŸ¥è®¾å¤‡å†…å­˜</span>
      <span class="hljs-keyword">if</span> (navigator.<span class="hljs-property">deviceMemory</span> &amp;&amp; navigator.<span class="hljs-property">deviceMemory</span> &lt; <span class="hljs-number">4</span>) {
        <span class="hljs-title function_">setPerformanceMode</span>(<span class="hljs-string">'low'</span>);
        <span class="hljs-keyword">return</span>;
      }
      
      <span class="hljs-comment">// 3. æ£€æŸ¥ç”µæ± çŠ¶æ€</span>
      <span class="hljs-keyword">if</span> (navigator.<span class="hljs-property">getBattery</span>) {
        navigator.<span class="hljs-title function_">getBattery</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">battery</span> =&gt;</span> {
          <span class="hljs-keyword">if</span> (battery.<span class="hljs-property">level</span> &lt; <span class="hljs-number">0.2</span> &amp;&amp; !battery.<span class="hljs-property">charging</span>) {
            <span class="hljs-title function_">setPerformanceMode</span>(<span class="hljs-string">'low-power'</span>);
          }
        });
      }
    };
    
    <span class="hljs-title function_">detectPerformance</span>();
  }, []);
  
  <span class="hljs-keyword">return</span> performanceMode;
};

<span class="hljs-comment">// è‡ªé€‚åº”ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">AdaptiveChart</span> = (<span class="hljs-params">{ data }</span>) =&gt; {
  <span class="hljs-keyword">const</span> performanceMode = <span class="hljs-title function_">usePerformanceMode</span>();
  
  <span class="hljs-keyword">switch</span> (performanceMode) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'low'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'low-power'</span>:
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">SimpleChart</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> /&gt;</span></span>; <span class="hljs-comment">// ç®€åŒ–ç‰ˆå›¾è¡¨</span>
      
    <span class="hljs-keyword">case</span> <span class="hljs-string">'normal'</span>:
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">InteractiveChart</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> /&gt;</span></span>; <span class="hljs-comment">// äº¤äº’å¼å›¾è¡¨</span>
      
    <span class="hljs-attr">default</span>:
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">StaticChart</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> /&gt;</span></span>; <span class="hljs-comment">// é™æ€å›¾è¡¨</span>
  }
};
</code></pre>
<ul>
<li>æ¸è¿›å¢å¼ºç­–ç•¥</li>
</ul>
<p>é€šè¿‡è®¾ç½®ä¸åŒç‰ˆæœ¬çš„æ–¹å¼ï¼Œå»è¿›è¡Œè®¾ç½®ä¸åŒçš„æ¨¡å¼åˆ‡æ¢</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»„ä»¶çº§æ¸è¿›å¢å¼º</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">ProgressiveEnhancementComponent</span> = (<span class="hljs-params">{ enhancedFeatures = <span class="hljs-literal">true</span> }</span>) =&gt; {
  <span class="hljs-keyword">const</span> [isEnhanced, setIsEnhanced] = <span class="hljs-title function_">useState</span>(enhancedFeatures);
  
  <span class="hljs-comment">// é™çº§å¼€å…³ï¼ˆç”¨äºè°ƒè¯•æˆ–ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleEnhancement</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-title function_">setIsEnhanced</span>(!isEnhanced);
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"progressive-component"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{toggleEnhancement}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"enhancement-toggle"</span>&gt;</span>
        {isEnhanced ? 'åˆ‡æ¢åˆ°åŸºç¡€æ¨¡å¼' : 'åˆ‡æ¢åˆ°å¢å¼ºæ¨¡å¼'}
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      
      {isEnhanced ? (
        // å¢å¼ºç‰ˆæœ¬ - åŒ…å«åŠ¨ç”»ã€å¤æ‚äº¤äº’
        <span class="hljs-tag">&lt;<span class="hljs-name">EnhancedVersion</span> /&gt;</span>
      ) : (
        // åŸºç¡€ç‰ˆæœ¬ - ç®€å•é™æ€å†…å®¹
        <span class="hljs-tag">&lt;<span class="hljs-name">BasicVersion</span> /&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p>æ€»ç»“æ¦‚æ‹¬çš„è¯ï¼Œå¤§æ¦‚ä¸»è¦æ˜¯ä»ä¸‹é¢çš„å‡ ä¸ªæ–¹é¢ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cdb81c0f31ff472b867ec8dc0e9fbc7a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=UdxxnZXMgs%2FZcyAqGXufQVPGnhA%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-12">3.4 ç»„ä»¶çš„åŠ¨æ€æ³¨å…¥</h4>
<p>åœ¨éŸ³è§†é¢‘é€šç”¨åŒ–ç»„ä»¶ä¸­ï¼Œæ¶‰åŠåˆ°è¯¸å¤šä¸šåŠ¡åœºæ™¯ï¼ŒåŠ¨æ€é…ç½®æ³¨å…¥ç»„ä»¶çš„çš„åŠŸèƒ½ï¼Œä¸‹é¢è¯¦ç»†çš„ä»‹ç»ä¸‹ï¼Œç›¸å…³çš„ä¸€äº›ç»„ä»¶åŠ¨æ€æ³¨å…¥çš„å®ç°æ–¹å¼ï¼Œæˆ‘ä»¬å·¥ç¨‹ä¸­ç”¨çš„æ¯”è¾ƒå¤šçš„å°±æ˜¯é™æ€å¯¼å…¥äº†ï¼Œä¸‹é¢çœ‹ä¸‹ä¸¤è€…åŒºåˆ«ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é™æ€å¯¼å…¥ - ç¼–è¯‘æ—¶ç»‘å®š</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">StaticComponentDemo</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./StaticComponentDemo'</span>;

<span class="hljs-comment">// åŠ¨æ€æ³¨å…¥ - è¿è¡Œæ—¶åŠ è½½</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">DynamicComponentDemo</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./DynamicComponentDemo'</span>));
</code></pre>
<p><code>React</code>ç»„ä»¶åŠ¨æ€æ³¨å…¥ä¸»è¦æ˜¯é€šè¿‡å°†â€‹ä»£ç åˆ†å‰²â€‹â€‹ã€â€‹â€‹æŒ‰éœ€åŠ è½½â€‹â€‹å’Œâ€‹â€‹è¿è¡Œæ—¶é›†æˆâ€‹â€‹ç›¸ç»“åˆçš„æ–¹å¼ ï¼Œ æ˜¯åœ¨è¿è¡Œæ—¶æŒ‰éœ€åŠ è½½å’Œæ¸²æŸ“ç»„ä»¶â€‹â€‹</p>
<p>åŠ¨æ€æ³¨å…¥ç»„ä»¶çš„ç‰¹ç‚¹ä¸»è¦æœ‰ä¸‹é¢å‡ ç‚¹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ecc7e9975b244d5b5d1725ec21431d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=D7JS4NWls%2FDN4Km5te3HcN4yEWs%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥å‡å°‘åˆå§‹åŠ è½½ä½“ç§¯ï¼Œæå‡é¦–å±é€Ÿåº¦ï¼Œæ”¯æŒæ’ä»¶åŒ–ã€ä¸»é¢˜åŒ–ã€A/B æµ‹è¯•ç­‰é«˜çº§åœºæ™¯ï¼Œä¿æŒä»£ç æ¨¡å—åŒ–ï¼Œç®€åŒ–å¤æ‚åº”ç”¨ç»“æ„ï¼Œå®ç°çœŸæ­£çš„çƒ­æ’æ‹”ç»„ä»¶ç³»ç»Ÿã€‚<code>React</code>ç»„ä»¶åŠ¨æ€æ³¨å…¥æœ‰å“ªå‡ ç§æ–¹å¼å‘¢ï¼Ÿ</p>
<p>1ã€<code>React.lazy</code>å’ŒÂ <code>Suspense</code>çš„æ–¹å¼</p>
<p>æ­¤ç§æ–¹å¼ä¸»è¦æ˜¯æŒ‰éœ€åŠ è½½ç»„ä»¶ï¼Œ<code>React.lazy</code>å‡½æ•°å…è®¸åŠ¨æ€åœ°åŠ è½½ç»„ä»¶ï¼Œå®ƒè¿”å›ä¸€ä¸ªPromiseï¼Œè¯¥Promiseè§£æä¸ºä¸€ä¸ªåŒ…å«Reactç»„ä»¶çš„æ¨¡å—ã€‚é€šå¸¸ä¸<code>Suspense</code>ç»„ä»¶ä¸€èµ·ä½¿ç”¨ï¼Œåœ¨åŠ è½½è¿‡ç¨‹ä¸­æ˜¾ç¤ºå›é€€å†…å®¹ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { <span class="hljs-title class_">Suspense</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">LazyComponentDemo</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./LazyComponentDemo'</span>));

<span class="hljs-keyword">const</span>  <span class="hljs-title function_">MyComponentDemo</span> =(<span class="hljs-params"/>)=&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">div</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">LazyComponentDemo</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<ul>
<li><code>React.lazy</code>æ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªåŠ¨æ€<code>import()</code>çš„Promiseã€‚</li>
<li>å½“ç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ—¶ï¼Œä¼šè§¦å‘åŠ è½½ã€‚åŠ è½½è¿‡ç¨‹ä¸­ï¼Œ<code>Suspense</code>ä¼šæ˜¾ç¤º<code>fallback</code>å†…å®¹ã€‚</li>
<li>åŠ è½½å®Œæˆåï¼Œç»„ä»¶è¢«æ¸²æŸ“ã€‚</li>
</ul>
<p>æ³¨æ„â€‹ï¼š<code>React.lazy</code>åªæ”¯æŒé»˜è®¤å¯¼å‡ºï¼ˆexport defaultï¼‰çš„ç»„ä»¶ã€‚</p>
<p>React.lazy å†…éƒ¨å®ç°</p>
<pre><code class="hljs language-ini" lang="ini">function lazy(ctor) {
  let <span class="hljs-attr">thenable</span> = null<span class="hljs-comment">;</span>
  
  return {
    $$typeof: REACT_LAZY_TYPE,
    _payload: {
      _status: -1,  // çŠ¶æ€: <span class="hljs-attr">-1</span>=æœªåŠ è½½, <span class="hljs-number">0</span>=åŠ è½½ä¸­, <span class="hljs-number">1</span>=åŠ è½½æˆåŠŸ, <span class="hljs-number">2</span>=åŠ è½½å¤±è´¥
      _result: ctor, // åŠ è½½å‡½æ•°
    },
    _init(payload) {
      if (<span class="hljs-attr">payload._status</span> === -<span class="hljs-number">1</span>) {
        const <span class="hljs-attr">ctorResult</span> = ctor()<span class="hljs-comment">;</span>
        <span class="hljs-attr">thenable</span> = ctorResult<span class="hljs-comment">;</span>
        
        <span class="hljs-attr">payload._status</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
        ctorResult.then(
          <span class="hljs-attr">module</span> =&gt; {
            if (<span class="hljs-attr">payload._status</span> === <span class="hljs-number">0</span>) {
              <span class="hljs-attr">payload._status</span> = <span class="hljs-number">1</span><span class="hljs-comment">;</span>
              <span class="hljs-attr">payload._result</span> = module.default<span class="hljs-comment">;</span>
            }
          },
          <span class="hljs-attr">error</span> =&gt; {
            if (<span class="hljs-attr">payload._status</span> === <span class="hljs-number">0</span>) {
              <span class="hljs-attr">payload._status</span> = <span class="hljs-number">2</span><span class="hljs-comment">;</span>
              <span class="hljs-attr">payload._result</span> = error<span class="hljs-comment">;</span>
            }
          }
        )<span class="hljs-comment">;</span>
      }
      
      switch (payload._status) {
        case 1: return payload._result<span class="hljs-comment">;</span>
        case 2: throw payload._result<span class="hljs-comment">;</span>
        default: throw thenable<span class="hljs-comment">;</span>
      }
    }
  }<span class="hljs-comment">;</span>
}
</code></pre>
<p>Suspense å·¥ä½œåŸç† æ¸²æŸ“é‡åˆ°æœªå‡†å¤‡å¥½çš„ç»„ä»¶æ—¶æŠ›å‡º Promise , React æ•è·è¯¥ Promise å¹¶æš‚åœæ¸²æŸ“ , æ˜¾ç¤ºæœ€è¿‘çš„ Suspense , fallback UI ,Promise å®Œæˆåé‡æ–°å°è¯•æ¸²æŸ“ , æˆåŠŸåˆ™æ˜¾ç¤ºç»„ä»¶ï¼Œå¤±è´¥åˆ™æŠ›å‡ºé”™è¯¯ã€‚</p>
<p>2ã€ä½¿ç”¨é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰å®ç°åŠ¨æ€åŠ è½½</p>
<p>åˆ›å»ºä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œåœ¨ç»„ä»¶åŠ è½½è¿‡ç¨‹ä¸­ç®¡ç†åŠ è½½çŠ¶æ€ï¼Œå¹¶åœ¨åŠ è½½å®Œæˆåæ¸²æŸ“ç›®æ ‡ç»„ä»¶ï¼Œæ¯”è¾ƒé€‚ç”¨éœ€è¦è‡ªå®šä¹‰åŠ è½½é€»è¾‘æˆ–å¤„ç†éé»˜è®¤å¯¼å‡ºçš„ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">withDynamicImportDemo</span> = (<span class="hljs-params">importFunc</span>)=&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">DynamicComponent</span>(<span class="hljs-params">props</span>) {
    <span class="hljs-keyword">const</span> [<span class="hljs-title class_">Component</span>, setComponent] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);

    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
      importFunc().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">module</span> =&gt;</span> {
        <span class="hljs-title function_">setComponent</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">module</span>.<span class="hljs-property">default</span>); <span class="hljs-comment">// å‡è®¾æ˜¯é»˜è®¤å¯¼å‡º</span>
      });
    }, []);

    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Component</span> ? <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Component</span> {<span class="hljs-attr">...props</span>} /&gt;</span></span> : <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  };
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MyLazyComponent</span> = <span class="hljs-title function_">withDynamicImportDemo</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./MyComponent'</span>));
</code></pre>
<p>3ã€<code>import()</code>åŠ¨æ€åŠ è½½ + çŠ¶æ€ç®¡ç†</p>
<p>ä¸»è¦æ˜¯åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­åŠ¨æ€å¯¼å…¥ç»„ä»¶ï¼Œç„¶åæ›´æ–°çŠ¶æ€è§¦å‘é‡æ–°æ¸²æŸ“ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">MyComponentDemo</span> = (<span class="hljs-params"/>)=&gt; {
  <span class="hljs-keyword">const</span> [<span class="hljs-title class_">Component</span>, setComponent] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> { <span class="hljs-attr">default</span>: <span class="hljs-title class_">DynamicComponent</span> } = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./DynamicComponent'</span>);
    <span class="hljs-title function_">setComponent</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">DynamicComponent</span>);
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>&gt;</span>ç‚¹å‡»åŠ è½½ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      {Component ? <span class="hljs-tag">&lt;<span class="hljs-name">Component</span> /&gt;</span> : <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æµ‹è¯•ç‚¹å‡»<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>4ã€<code>loadable-components</code></p>
<p><code>loadable-components</code>æ˜¯ä¸€ä¸ªæµè¡Œçš„åº“ï¼Œæä¾›äº†æ›´å¼ºå¤§çš„åŠ¨æ€å¯¼å…¥åŠŸèƒ½ï¼ŒåŒ…æ‹¬æœåŠ¡ç«¯æ¸²æŸ“æ”¯æŒã€‚å¦‚SSRæ”¯æŒã€é¢„åŠ è½½ç­‰ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> loadable <span class="hljs-keyword">from</span> <span class="hljs-string">'@loadable/component'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">LoadableComponent</span> = <span class="hljs-title function_">loadable</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./MyComponentDemo'</span>), {
  <span class="hljs-attr">fallback</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>æµ‹è¯•<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>,
});

<span class="hljs-keyword">const</span> <span class="hljs-title function_">MyComponentPage</span> = (<span class="hljs-params"/>)=&gt; {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">LoadableComponent</span> /&gt;</span></span>;
}
</code></pre>
<p>5ã€ReactDOM.createPortal</p>
<p>ä½¿ç”¨<code>ReactDOM.createPortal</code>å°†ç»„ä»¶æ¸²æŸ“åˆ°æŒ‡å®šçš„DOMèŠ‚ç‚¹ã€‚ç»“åˆåŠ¨æ€åŠ è½½ï¼Œå¯ä»¥å…ˆåŠ è½½ç»„ä»¶å†å°†å…¶æ¸²æŸ“åˆ°ç›®æ ‡ä½ç½®ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">DynamicPortalDemo</span> = (<span class="hljs-params"/>)=&gt; {
  <span class="hljs-keyword">const</span> [targetNode] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'portal-root'</span>));
  <span class="hljs-keyword">const</span> [<span class="hljs-title class_">Component</span>, setComponent] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">import</span>(<span class="hljs-string">'./PortalComponent'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">module</span> =&gt;</span> {
      <span class="hljs-title function_">setComponent</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">module</span>.<span class="hljs-property">default</span>);
    });
  }, []);

  <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Component</span> || !targetNode) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createPortal</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Component</span> /&gt;</span></span>, targetNode);
}
</code></pre>
<p>åœ¨éŸ³è§†é¢‘é€šç”¨åŒ–ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬çœ‹ä¸‹å®ç°ç»„ä»¶åŠ¨æ€åŠ è½½çš„ç•Œé¢ï¼Œæ•´ä¸ªè¯­éŸ³è½¬æ–‡å­—ç»„ä»¶ã€äº¤æµè®¨è®ºç»„ä»¶ã€ä»¥åŠä¸šåŠ¡è‡ªå®šä¹‰çš„ç»„ä»¶ï¼Œåƒè®²æ ‡é¡ºåºç»„ä»¶ã€ä¼šè®®ç›‘æ§ã€ä¼šè®®ç¬”å½•ç»„ä»¶ç­‰ï¼Œéƒ½æ˜¯åŠ¨æ€æ³¨å…¥çš„ç»„ä»¶ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a783ec3e727a4be39c02f56c5d29695e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=NX0pn8hx7N2ECIAXmqdMB4VslOA%3D" alt="image.png" loading="lazy"/></p>
<p>ç›¸å…³çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-ini" lang="ini">  // éå†æ³¨å†Œå¯¹åº”çš„ç»„ä»¶
const <span class="hljs-attr">getDomContent</span> = (arr) =&gt; {
  return (
    &lt;&gt;
      {arr?.map((<span class="hljs-attr">item</span> = {}) =&gt; {
        const <span class="hljs-attr">DomItem</span> = innerContainerComponent[item?.btnKey]<span class="hljs-comment">;</span>
        return (
          &lt;div <span class="hljs-attr">className</span>=<span class="hljs-string">"online-meeting-inner-slot-list"</span> key={item.btnKey}&gt;
            &lt;React.Suspense <span class="hljs-attr">fallback</span>={&lt;div /&gt;}&gt;
              {DomItem &amp;&amp; (
                &lt;DomItem
                  <span class="hljs-attr">innerComponentList</span> = {innerSlotComponent}
                  <span class="hljs-attr">direction</span>={direction}
                  <span class="hljs-attr">btnConfig</span>={item}
                  <span class="hljs-attr">btnKey</span>={item?.btnKey}
                  <span class="hljs-attr">im</span>={im}
                  <span class="hljs-attr">onCloseIMDialog</span>={() =&gt; {
                    onCloseIMDialog(item?.btnKey)<span class="hljs-comment">;</span>
                  }}
                      <span class="hljs-attr">onRemoveSoltComponent</span>={() =&gt; <span class="hljs-literal">on</span>RemoveSoltComponent(item?.btnKey)}
                  {...props}
                /&gt;
              )}
            &lt;/React.Suspense&gt;
          &lt;/div&gt;
        )<span class="hljs-comment">;</span>
      })}
    &lt;/&gt;
  )<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

return (
  &lt;div <span class="hljs-attr">className</span>=<span class="hljs-string">"online-meeting-inner-slot-container"</span>&gt;
    {getDomContent(innerSlotComponent)}
  &lt;/div&gt;
)<span class="hljs-comment">;</span>
</code></pre>
<p>åˆ©ç”¨ç»„ä»¶åŠ¨æ€æ³¨å…¥ï¼Œå¯ä»¥è¿›è¡Œä¸€äº›æ€§èƒ½ä¼˜åŒ–æ–¹é¢çš„ä¼˜åŒ–ç­–ç•¥ï¼Œä¸»è¦æœ‰ä¸‹é¢å‡ ä¸ªæ–¹é¢ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e95f3eb3f8424b43b761ab0900792a65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=qVm3uTdQOv7hOcBXP5I%2BfljLDZ8%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">componentCacheDemo</span> = new Map()<span class="hljs-comment">;</span>
const <span class="hljs-attr">CachedComponent</span> = (loader)=&gt; {
  const <span class="hljs-section">[Component, setComponent]</span> = useState(null)<span class="hljs-comment">;</span>
  
  useEffect(() =&gt; {
    if (componentCacheDemo.has(loader)) {
      setComponent(componentCacheDemo.get(loader))<span class="hljs-comment">;</span>
      return<span class="hljs-comment">;</span>
    }
    
    loader().then(<span class="hljs-attr">module</span> =&gt; {
      const <span class="hljs-attr">Comp</span> = module.default<span class="hljs-comment">;</span>
      componentCacheDemo.set(loader, Comp)<span class="hljs-comment">;</span>
      setComponent(() =&gt; Comp)<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>
  }, <span class="hljs-section">[loader]</span>)<span class="hljs-comment">;</span>
  
  return Component<span class="hljs-comment">;</span>
}
</code></pre>
<p>ç»„ä»¶åŠ¨æ€åŠ è½½çš„æœªæ¥å‘å±•è¶‹åŠ¿ï¼ŒåƒæœåŠ¡ç«¯ç»„ä»¶ç›´æ¥åŠ¨æ€åŠ è½½ ã€è¿œç¨‹ç»„ä»¶åŠ¨æ€åŠ è½½ã€åŸºäº AI çš„é¢„æµ‹åŠ è½½ç­‰ï¼Œéšç€ React 18 å¹¶å‘ç‰¹æ€§ã€<code>Server Components</code> å’Œ <code>Module Federation</code> ç­‰æŠ€æœ¯çš„å‘å±•ï¼ŒåŠ¨æ€åŠ è½½ç»„ä»¶å°†æˆä¸ºä¸€ç§æ ¸å¿ƒæ¨¡å¼ã€‚</p>
<h3 data-id="heading-13">4ã€éŸ³è§†é¢‘é€šç”¨ç»„ä»¶å¤šç«¯æ¶ˆæ¯æ”¶å‘</h3>
<h4 data-id="heading-14">4.1 <code>IM</code>æ¶ˆæ¯æ”¶å‘</h4>
<p><code>IM</code>ä¸»è¦æ˜¯åœ¨è§†é¢‘ä¼šè®®ä¸­, æˆ‘ä»¬çš„ä¸»æŒäººåœ¨è§†é¢‘ä¼šè®®ä¸­ä¼šæ“æ§å…¶ä»–ä¸ä¼šäººå‘˜çš„éŸ³è§†é¢‘å¼€å¯å…³é—­,é‚€è¯·ä¸ä¼šäººå‘˜çš„å¼€å¯é¡µé¢ç›‘æ§ç­‰æ“ä½œã€‚è¿™äº›æ“ä½œæˆ‘ä»¬ä¼šé€šè¿‡IMæ¶ˆæ¯å‘é€çš„æ–¹å¼é€šçŸ¥ç»™ç›¸åº”çš„ä¸ä¼šäººå‘˜ï¼Œå…¶æ¬¡åŒ…æ‹¬è§†é¢‘ä¼šè®®çš„è®¨è®ºåŠŸèƒ½ã€‚</p>
<p>æˆ‘ä»¬çœ‹ä¸‹ï¼Œ<code>IM</code>æ¶ˆæ¯æ”¶å‘çš„æµç¨‹æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac689f7d5e7a4f0d815191d873aa5e9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=uuANy41Gn1SDQYMhZsbYfEHpu34%3D" alt="image.png" loading="lazy"/></p>
<p>å®¢æˆ·ç«¯A ä¸å®¢æˆ·ç«¯Bï¼Œä¼šé€šè¿‡å½“å‰æœ¬ç«¯è·å–åˆ°å”¯ä¸€æ ‡è¯†Token, è¿›è¡Œç™»å½•ï¼Œä¸”å®ç°æ¶ˆæ¯ä¹‹é—´çš„ä¼ é€ã€‚åº•å±‚èƒ½åŠ›ä¹Ÿæ˜¯åŸºäº<code>WebRTC</code>çš„ç‚¹ä¸ç‚¹ä¹‹é—´çš„é€šä¿¡é“¾æ¥ å’Œ <code>WebSocket</code>æ¥å®ç°çš„ã€‚</p>
<p>éŸ³è§†é¢‘IMç³»ç»ŸåŒ…å«å¤šç§æ¶ˆæ¯ç±»å‹ï¼Œæ¯ç§éƒ½æœ‰ä¸åŒçš„ä¼ è¾“è¦æ±‚ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// æ¶ˆæ¯ç±»å‹å®šä¹‰
enum MessageType {
  <span class="hljs-attr">TEXT</span> = <span class="hljs-string">'text'</span>,           // æ–‡æœ¬æ¶ˆæ¯
  <span class="hljs-attr">IMAGE</span> = <span class="hljs-string">'image'</span>,         // å›¾ç‰‡æ¶ˆæ¯
  <span class="hljs-attr">AUDIO</span> = <span class="hljs-string">'audio'</span>,         // éŸ³é¢‘æ¶ˆæ¯
  <span class="hljs-attr">VIDEO</span> = <span class="hljs-string">'video'</span>,         // è§†é¢‘æ¶ˆæ¯
  <span class="hljs-attr">FILE</span> = <span class="hljs-string">'file'</span>,           // æ–‡ä»¶æ¶ˆæ¯
  <span class="hljs-attr">CALL_INVITE</span> = <span class="hljs-string">'call_invite'</span>,    // é€šè¯é‚€è¯·
  <span class="hljs-attr">CALL_ACCEPT</span> = <span class="hljs-string">'call_accept'</span>,    // é€šè¯æ¥å—
  <span class="hljs-attr">CALL_REJECT</span> = <span class="hljs-string">'call_reject'</span>,    // é€šè¯æ‹’ç»
  <span class="hljs-attr">CALL_END</span> = <span class="hljs-string">'call_end'</span>,          // é€šè¯ç»“æŸ
  <span class="hljs-attr">TYPING</span> = <span class="hljs-string">'typing'</span>,              // è¾“å…¥çŠ¶æ€
  <span class="hljs-attr">READ_RECEIPT</span> = <span class="hljs-string">'read_receipt'</span>   // å·²è¯»å›æ‰§
}
</code></pre>
<p>æ¶ˆæ¯æ”¶å‘æ ¸å¿ƒä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">IMCore</span> {
  <span class="hljs-keyword">private</span> wsManager: WebSocketManager;     <span class="hljs-comment">// WebSocketè¿æ¥ç®¡ç†</span>
  <span class="hljs-keyword">private</span> messageQueue: MessageQueue;      <span class="hljs-comment">// æ¶ˆæ¯é˜Ÿåˆ—</span>
  <span class="hljs-keyword">private</span> mediaProcessor: MediaProcessor;  <span class="hljs-comment">// åª’ä½“å¤„ç†</span>
  <span class="hljs-keyword">private</span> storage: MessageStorage;         <span class="hljs-comment">// æ¶ˆæ¯å­˜å‚¨</span>
  
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">this</span>.<span class="hljs-keyword">init</span>();
  }
  
  <span class="hljs-keyword">private</span> async <span class="hljs-keyword">init</span>() {
    await <span class="hljs-keyword">this</span>.setupWebSocket();
    <span class="hljs-keyword">this</span>.setupMessageHandlers();
  }
}
</code></pre>
<p>æˆ‘ä»¬çœ‹ä¸‹éŸ³è§†é¢‘é€šç”¨åŒ–ç»„ä»¶ä¸­å®ç°çš„æ•ˆæœæˆªå›¾ï¼š</p>
<p>ä¸»æŒäºº ï½œ å®¢æˆ·ç«¯A</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ebf83ee3afa4e939ba07312d9ed8c60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=dx6faYc6eeTL3ZIYL0dkxaFVmNM%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸“å®¶ï½œå®¢æˆ·ç«¯B</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/313766f7a6bc4ac7a784521503cd34e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=GMIc8DsCDBoLhUzaB%2FV6yV93kWc%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<p>å½“å®¢æˆ·ç«¯Aå‘é€å‘é€æ¶ˆæ¯çš„æ—¶å€™ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯Bçš„äººï¼Œå­˜åœ¨ç›‘å¬æ¶ˆæ¯äº‹ä»¶ï¼Œå½“ç›‘å¬åˆ°æ¶ˆæ¯çš„æ—¶å€™ï¼ŒåŠ¨æ€å°†æ­¤æ¶ˆæ¯æ–‡æœ¬ï¼Œæ³¨å…¥åˆ°æ•°ç»„ä¸­ï¼Œä¸”åœ¨ç•Œé¢ä¸Šæ˜¾ç¤ºã€‚</p>
<pre><code class="hljs language-ini" lang="ini"> // ç›‘å¬æ¶ˆæ¯
  const <span class="hljs-attr">onMsg</span> = (msgsValue = []) =&gt; {
    if (msgsValue?.length &gt; 0) {
      const <span class="hljs-attr">originHistoryMsgs</span> = originHistoryMsgsRef?.current || []<span class="hljs-comment">;</span>
      const <span class="hljs-attr">newMsgs</span> = originHistoryMsgs.concat(msgsValue)<span class="hljs-comment">;</span>
      setMsgs(newMsgs)<span class="hljs-comment">;</span>
    }
  }<span class="hljs-comment">;</span>

// åˆå§‹åŒ–è¯·æ±‚å†å²æ•°æ®ï¼Œä»¥åŠæ³¨å†Œæ¥å—IMå‘é€è¿‡æ¥çš„æ¶ˆæ¯
  useEffect(() =&gt; {
    const { im } = props<span class="hljs-comment">;</span>
    getHistoryData()<span class="hljs-comment">;</span>
    try {
      <span class="hljs-attr">im.onReciveMsg</span> = <span class="hljs-literal">on</span>Msg<span class="hljs-comment">;</span>
    } catch (err) {
      //
    }
  }, <span class="hljs-section">[]</span>)<span class="hljs-comment">;</span>
</code></pre>
<h4 data-id="heading-15">4.2 <code>webSocket</code>æ¶ˆæ¯æ”¶å‘</h4>
<p>åœ¨éŸ³è§†é¢‘ä¸­ï¼Œå¦å¤–ä¸€ä¸ªæ¶ˆæ¯æ”¶å‘çš„æ–¹å¼ï¼Œå°±æ˜¯ä½¿ç”¨ <code>webSocket</code>ï¼Œè¿›è¡Œå®æ—¶çš„é€šä¿¡ï¼Œè¿™ç§åº”è¯¥æ˜¯æ¯”è¾ƒå¸¸è§ä½¿ç”¨çš„ã€‚<code>webSocket</code>çš„ç‰¹æ€§ä¸»è¦åŒ…æ‹¬ä¸‹é¢è¿™äº›æ–¹é¢ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1be16963f0884d52a281a1a04d64bca4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=ZCXswQDXhU4CAbWg1VkNhmwLBRU%3D" alt="image.png" loading="lazy"/></p>
<p>å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å¯â€‹åŒæ—¶â€‹â€‹å‘é€å’Œæ¥æ”¶æ•°æ® ï¼Œå»ºç«‹è¿æ¥åï¼Œæ•°æ®ä¼ è¾“æ— éœ€ HTTP æ¡æ‰‹å¼€é”€ï¼Œä¸€ä¸ªè¿æ¥æŒç»­å¤ç”¨ï¼Œé¿å…é¢‘ç¹å»ºç«‹/æ–­å¼€è¿æ¥çš„å¼€é”€ï¼Œå¯è¿›è¡Œé«˜æ•ˆä¼ è¾“å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰äºŒè¿›åˆ¶æ¶ˆæ¯ã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸‹<code>webSocket</code>çš„ç›¸å…³çš„ç‰¹æ€§å’Œå…·ä½“å®ç°ï¼š</p>
<p>1ã€è¿æ¥å»ºç«‹ï¼šHTTP å‡çº§æ¡æ‰‹</p>
<p>WebSocket è¿æ¥å§‹äºæ ‡å‡†çš„ HTTP è¯·æ±‚ï¼Œé€šè¿‡Â <code>Upgrade</code>å¤´åˆ‡æ¢åè®®</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">GET</span> <span class="hljs-string">/chat</span> <span class="hljs-string">HTTP/1.1</span>
<span class="hljs-attr">Host:</span> <span class="hljs-string">server.example.com</span>
<span class="hljs-attr">Upgrade:</span> <span class="hljs-string">websocket</span>          <span class="hljs-comment"># å…³é”®ï¼šè¯·æ±‚å‡çº§åè®®</span>
<span class="hljs-attr">Connection:</span> <span class="hljs-string">Upgrade</span>         <span class="hljs-comment"># å…³é”®ï¼šè¦æ±‚åˆ‡æ¢è¿æ¥</span>
<span class="hljs-attr">Sec-WebSocket-Key:</span> <span class="hljs-string">dGhlIHNhbXBsZSBub25jZQ==</span>  <span class="hljs-comment"># å®¢æˆ·ç«¯éšæœºå¯†é’¥</span>
<span class="hljs-attr">Sec-WebSocket-Version:</span> <span class="hljs-number">13</span>    <span class="hljs-comment"># åè®®ç‰ˆæœ¬</span>
</code></pre>
<p>2ã€æœåŠ¡å™¨å“åº”åè®®å‡çº§</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">HTTP/1.1</span> <span class="hljs-number">101</span> <span class="hljs-string">Switching</span> <span class="hljs-string">Protocols</span>
<span class="hljs-attr">Upgrade:</span> <span class="hljs-string">websocket</span>
<span class="hljs-attr">Connection:</span> <span class="hljs-string">Upgrade</span>
<span class="hljs-attr">Sec-WebSocket-Accept:</span> <span class="hljs-string">s3pPLMBiTxaQ9kYGzzhZRbK+xOo=</span>  <span class="hljs-comment"># éªŒè¯å¯†é’¥</span>
</code></pre>
<p>3ã€å¯†é’¥éªŒè¯åŸç†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3a87a8f37964ad0be662262596f19c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=pKB4gP%2FAvB0i%2BxZPzmYofwOST1M%3D" alt="image.png" loading="lazy"/></p>
<p>4ã€è¿æ¥ä¿æ´»ï¼šå¿ƒè·³æœºåˆ¶</p>
<p>é€šè¿‡ â€‹Ping/Pong å¸§â€‹â€‹ ç»´æŒè¿æ¥æ´»æ€§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b962177c3874b6782663d018b91e6c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=WuBqZqQPGuTKBpjzyGPeujHrcDo%3D" alt="image.png" loading="lazy"/></p>
<p>æ•´ä½“çš„é€šä¿¡è¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8bcd58ee5a5420e941b68f5761626b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=6OnCB5vIrEyvbvOX%2FTbAgAe%2FVec%3D" alt="image.png" loading="lazy"/></p>
<p>5ã€è¿æ¥å…³é—­ï¼šæ¡æ‰‹ç»ˆæ­¢</p>
<p>å…³é—­æµç¨‹éœ€åŒæ–¹äº¤æ¢å…³é—­å¸§, å¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bafb797b5c8d4c5a9f7cd95e7f0cb8ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=GJ8XXAXoH8RWR%2BnkNOmSElzlVR4%3D" alt="image.png" loading="lazy"/></p>
<p>æ€»ç»“ä¸€ä¸‹ï¼Œä¸»è¦æ˜¯ä¸‹é¢è¿™äº›æ–¹é¢ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/581fec64a4ba49f2b6726837d9a83e84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=55L75un1JMu5Kd8YGY411UeUx%2F0%3D" alt="image.png" loading="lazy"/></p>
<p>å°è£…çš„webSocketçš„demoä»£ç å¤§è‡´å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@description</span> æ¶ˆæ¯å®æ—¶é€šä¿¡ç»„ä»¶ï¼ˆwebsocketå®ç°ï¼‰
 * <span class="hljs-doctag">@class</span> WebsocketDemo
 * <span class="hljs-doctag">@constructor</span> éé™æ€ç±»
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">WebsocketDemo</span> {
  <span class="hljs-keyword">constructor</span>(opt) {
    <span class="hljs-comment">// websocketå®ä¾‹</span>
    <span class="hljs-keyword">this</span>.ws = <span class="hljs-literal">null</span>;
    <span class="hljs-comment">// url</span>
    <span class="hljs-keyword">this</span>.url = opt.url || <span class="hljs-literal">null</span>;
    <span class="hljs-comment">// å¿ƒè·³åŒ…æ•°æ®ï¼Œå®¢æˆ·ç«¯å‘é€pingï¼ŒæœåŠ¡ç«¯å›å¤pong</span>
    <span class="hljs-keyword">this</span>.heartData = opt.heartData || <span class="hljs-string">'ping'</span>;
    <span class="hljs-comment">// å®¢æˆ·ç«¯å‘é€å¿ƒè·³çš„å®šæ—¶å™¨ timer</span>
    <span class="hljs-keyword">this</span>.heartTimer = <span class="hljs-literal">null</span>;
    <span class="hljs-comment">// å®¢æˆ·ç«¯å¤šä¹…å‘é€ä¸€æ¬¡å¿ƒè·³åŒ…ï¼Œé»˜è®¤ 2mins</span>
    <span class="hljs-keyword">this</span>.heartInterval = opt.heartInterval || <span class="hljs-number">2</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>;
    <span class="hljs-comment">// æ˜¯å¦å…è®¸é‡è¿ã€‚é»˜è®¤è‡ªåŠ¨æ‹¿ä¸Šä¸€æ¬¡ uri è¿›è¡Œé‡è¿ã€‚å¦‚æœè¿æ¥ä¸ºæœåŠ¡ç«¯è¿”å›çš„åŠ¨æ€ uri æ—¶ï¼Œè¯·è®¾ç½®è¯¥å€¼ä¸º false</span>
    <span class="hljs-keyword">this</span>.allowReconnect = opt.allowReconnect;
    <span class="hljs-comment">// é‡è¿è®¡æ•°å™¨</span>
    <span class="hljs-keyword">this</span>.reconnectCounter = <span class="hljs-number">0</span>;
    <span class="hljs-comment">// é‡è¿æ¬¡æ•°ä¸Šé™ï¼Œé»˜è®¤æœ€å¤šå°è¯•é‡è¿ 3 æ¬¡</span>
    <span class="hljs-keyword">this</span>.reconnectLimit = opt.reconnectLimit || <span class="hljs-number">3</span>;
    <span class="hljs-comment">// é‡è¿çš„å®šæ—¶å™¨ timer</span>
    <span class="hljs-keyword">this</span>.reconnectTimer = <span class="hljs-literal">null</span>;
    <span class="hljs-comment">// å®šæ—¶å¤šä¹…é‡è¿ä¸€æ¬¡ï¼Œé»˜è®¤ä¸º 5s</span>
    <span class="hljs-keyword">this</span>.reconnectInterval = opt.reconnectInterval || <span class="hljs-number">5</span> * <span class="hljs-number">1000</span>;
    <span class="hljs-comment">// åˆ›å»ºè¿æ¥æˆåŠŸåçš„å›è°ƒå‡½æ•°</span>
    <span class="hljs-keyword">this</span>.connectedCallback = opt.connectedCallback || function () {};
    <span class="hljs-comment">// æ¥æ”¶åˆ°æœåŠ¡å™¨ç«¯æ¶ˆæ¯åçš„å›è°ƒå‡½æ•°</span>
    <span class="hljs-keyword">this</span>.getMsgCallback = opt.getMsgCallback || function () {};
    window.onbeforeunload = () =&gt; {
      <span class="hljs-keyword">this</span>.ws.close();
    };
    <span class="hljs-keyword">this</span>.createWebSocket(<span class="hljs-keyword">this</span>.url);
  }

  <span class="hljs-comment">// åˆ›å»ºè¿æ¥</span>
  createWebSocket(url) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// åˆ¤æ–­å½“å‰æµè§ˆå™¨æ˜¯å¦æ”¯æŒ websocket</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-string">'WebSocket'</span> <span class="hljs-keyword">in</span> window) {
        <span class="hljs-keyword">this</span>.ws = new WebSocket(<span class="hljs-keyword">this</span>.url);
      } <span class="hljs-keyword">else</span> {
        alert(
          <span class="hljs-string">'æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒwebsocketåè®®ï¼Œå»ºè®®ä½¿ç”¨æ–°ç‰ˆè°·æ­Œã€ç«ç‹ç­‰æµè§ˆå™¨ï¼Œè¯·å‹¿ä½¿ç”¨IE10ä»¥ä¸‹æµè§ˆå™¨ï¼Œ360æµè§ˆå™¨è¯·ä½¿ç”¨æé€Ÿæ¨¡å¼ï¼Œä¸è¦ä½¿ç”¨å…¼å®¹æ¨¡å¼ï¼'</span>,
        );
      }
      <span class="hljs-keyword">this</span>.<span class="hljs-keyword">init</span>();
    } <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-keyword">this</span>.reconnect(url);
    }
  }

  <span class="hljs-comment">// åˆå§‹åŒ–äº‹ä»¶å¤„ç†</span>
  <span class="hljs-keyword">init</span>() {
    <span class="hljs-keyword">this</span>.ws.onclose = (closeEvent) =&gt; {
      <span class="hljs-keyword">this</span>.closedCallback();
      <span class="hljs-keyword">if</span> (
        closeEvent.code !== <span class="hljs-number">4001</span> &amp;&amp;
        closeEvent.code !== <span class="hljs-number">4003</span> &amp;&amp;
        closeEvent.code !== <span class="hljs-number">1100</span> &amp;&amp;
        closeEvent.code !== <span class="hljs-number">1000</span>
      ) {
        <span class="hljs-keyword">this</span>.reconnect(<span class="hljs-keyword">this</span>.url);
      }
    };
    <span class="hljs-keyword">this</span>.ws.onerror = () =&gt; {
      <span class="hljs-keyword">this</span>.errorCallback();
      <span class="hljs-keyword">this</span>.reconnect(<span class="hljs-keyword">this</span>.url);
    };
    <span class="hljs-keyword">this</span>.ws.onopen = () =&gt; {
      <span class="hljs-keyword">this</span>.reconnectCounter = <span class="hljs-number">0</span>; <span class="hljs-comment">// é‡è¿è®¡æ•°å™¨é‡ç½®</span>
      <span class="hljs-keyword">this</span>.startHeartBeat(); <span class="hljs-comment">// å¿ƒè·³æ£€æµ‹é‡ç½®ï¼Œå¹¶å¯åŠ¨</span>
      <span class="hljs-keyword">this</span>.connectedCallback();
    };
    <span class="hljs-keyword">this</span>.ws.onmessage = (event) =&gt; {
      <span class="hljs-keyword">this</span>.startHeartBeat(); 
      <span class="hljs-keyword">if</span> (event.<span class="hljs-keyword">data</span> !== <span class="hljs-string">'pong'</span>) {
        <span class="hljs-keyword">this</span>.getMsgCallback(event.<span class="hljs-keyword">data</span>);
      }
    };
  }

  <span class="hljs-comment">// å‘é€æ¶ˆæ¯</span>
  send(<span class="hljs-keyword">data</span>) {
    <span class="hljs-keyword">const</span> dataStr = typeof <span class="hljs-keyword">data</span> !== <span class="hljs-string">'string'</span> ? JSON.stringify(<span class="hljs-keyword">data</span>) : <span class="hljs-keyword">data</span>;
    <span class="hljs-keyword">this</span>.ws.send(dataStr);
  }

  <span class="hljs-comment">// å…³é—­è¿æ¥</span>
  close() {
    <span class="hljs-keyword">this</span>.allowReconnect = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">this</span>.ws.close();
  }

  <span class="hljs-comment">// å°è¯•é‡è¿</span>
  reconnect() {
    clearTimeout(<span class="hljs-keyword">this</span>.reconnectTimer);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.allowReconnect === <span class="hljs-literal">false</span>) <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.reconnectCounter &lt; <span class="hljs-keyword">this</span>.reconnectLimit) {
      <span class="hljs-keyword">this</span>.reconnectTimer = setTimeout(() =&gt; {
        <span class="hljs-keyword">this</span>.createWebSocket(<span class="hljs-keyword">this</span>.url);
        <span class="hljs-keyword">this</span>.reconnectCounter += <span class="hljs-number">1</span>;
      }, <span class="hljs-keyword">this</span>.reconnectInterval);
    }
  }

  <span class="hljs-comment">// å¯åŠ¨å¿ƒè·³æœºåˆ¶</span>
  startHeartBeat() {
    clearTimeout(<span class="hljs-keyword">this</span>.heartTimer); <span class="hljs-comment">// æ¸…é™¤ å®¢æˆ·ç«¯å‘é€å¿ƒè·³çš„å®šæ—¶å™¨</span>
    <span class="hljs-keyword">this</span>.heartTimer = setTimeout(() =&gt; {
      <span class="hljs-keyword">this</span>.ws.send(<span class="hljs-string">'ping'</span>);
    }, <span class="hljs-keyword">this</span>.heartInterval);
  }
}

export default WebsocketDemo;
</code></pre>
<p>è°ƒç”¨æ¥å…¥ä½¿ç”¨çš„æ—¶å€™ï¼Œå¦‚ä¸‹ä»£ç å®ä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">wsInstanceDemo</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebsocketDemo</span>({
      <span class="hljs-attr">url</span>: wsUrl,
      <span class="hljs-attr">allowReconnect</span>: <span class="hljs-literal">false</span>,
      heartInterval,
      <span class="hljs-attr">connectedCallback</span>: <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">global</span>.<span class="hljs-property">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿æ¥åˆ›å»ºæˆåŠŸ'</span>);
      },
      <span class="hljs-attr">getMsgCallback</span>: <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
        <span class="hljs-comment">// å¤„ç†æ¥å—åˆ°çš„æ¶ˆæ¯æ•°æ®</span>
        ....
      }
})
</code></pre>
<h3 data-id="heading-16">5ã€å°ç»“</h3>
<p>ä»¥ä¸Šæ˜¯é’ˆå¯¹æ•´ä¸ªéŸ³è§†é¢‘ç›¸å…³çš„æ¢ç´¢ï¼Œæœªæ¥é’ˆå¯¹éŸ³è§†é¢‘äº§å“ï¼Œè¿˜éœ€è¦æŒç»­çš„æ‰“ç£¨, å¾€AIæ–¹å‘é é½ï¼Œæ¯”å¦‚å¯ä»¥ç»“åˆ <code>ML5</code> + <code>WebRTC</code>çš„æ–¹å¼ï¼Œåœ¨å®æ—¶éŸ³è§†é¢‘æ–¹é¢ï¼Œæ¯”å¦‚åª’ä½“ç­‰ç›¸å…³çš„åŠŸèƒ½ï¼Œå¯ä»¥ç»“åˆèµ·æ¥ä½¿ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HTTPæŠ“åŒ…åˆ†æç¥å™¨ï¼ŒFiddlerä½¿ç”¨æ•™ç¨‹ã€ä»£ç†è®¾ç½®ä¸HTTPSè°ƒè¯•å…¨æŒ‡å—ï¼ˆå¼€å‘è€…å®æˆ˜åˆ†äº«ï¼‰]]></title>    <link>https://juejin.cn/post/7570647711260196874</link>    <guid>https://juejin.cn/post/7570647711260196874</guid>    <pubDate>2025-11-10T05:11:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570647711260196874" data-draft-id="7570647711260180490" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HTTPæŠ“åŒ…åˆ†æç¥å™¨ï¼ŒFiddlerä½¿ç”¨æ•™ç¨‹ã€ä»£ç†è®¾ç½®ä¸HTTPSè°ƒè¯•å…¨æŒ‡å—ï¼ˆå¼€å‘è€…å®æˆ˜åˆ†äº«ï¼‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-10T05:11:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="bcbnb"/> <meta itemprop="url" content="https://juejin.cn/user/895474073078377"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HTTPæŠ“åŒ…åˆ†æç¥å™¨ï¼ŒFiddlerä½¿ç”¨æ•™ç¨‹ã€ä»£ç†è®¾ç½®ä¸HTTPSè°ƒè¯•å…¨æŒ‡å—ï¼ˆå¼€å‘è€…å®æˆ˜åˆ†äº«ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/895474073078377/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    bcbnb
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T05:11:54.000Z" title="Mon Nov 10 2025 05:11:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¼€å‘å’Œæµ‹è¯•çš„æ—¥å¸¸å·¥ä½œä¸­ï¼Œ<strong>â€œæ¥å£è°ƒä¸é€šâ€</strong> å‡ ä¹æ˜¯æœ€å¸¸è§çš„ç—›ç‚¹ã€‚
API è¯·æ±‚å¤±è´¥ã€å“åº”å¼‚å¸¸ã€è·¨åŸŸæŠ¥é”™ã€ç§»åŠ¨ç«¯è®¿é—®å¼‚å¸¸â€¦â€¦æ¯ä¸€ä¸ªçœ‹ä¼¼ç®€å•çš„é—®é¢˜ï¼ŒèƒŒåå¯èƒ½éšè—ç€è¯·æ±‚å¤´é”™è¯¯ã€è¯ä¹¦é…ç½®é—®é¢˜ã€ç”šè‡³æ˜¯æœåŠ¡å™¨å“åº”å»¶è¿Ÿã€‚</p>
<p>é¢å¯¹è¿™ç§å¤æ‚æƒ…å†µï¼Œæœ€æœ‰æ•ˆçš„åŠæ³•ä¸æ˜¯â€œçŒœâ€ï¼Œè€Œæ˜¯â€œæŠ“åŒ…â€ï¼Œè€Œè¯´åˆ°æŠ“åŒ…å·¥å…·ï¼Œ<strong>Fiddler</strong> å‡ ä¹æ˜¯æ¯ä¸€ä½å¼€å‘è€…çš„å¿…å¤‡ç¥å™¨ã€‚</p>
<p>æœ¬æ–‡å°†ä¸ºä½ ç³»ç»Ÿè®²è§£ <strong>FiddleræŠ“åŒ…å·¥å…·</strong> çš„å®‰è£…é…ç½®ã€ä»£ç†è®¾ç½®ã€HTTPS æŠ“åŒ…ã€è°ƒè¯•æŠ€å·§åŠå®æˆ˜æ¡ˆä¾‹ï¼Œè®©ä½ ä»å…¥é—¨åˆ°è¿›é˜¶ï¼ŒæŒæ¡ç½‘ç»œè¯·æ±‚åˆ†æçš„å…¨æµç¨‹ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>ä¸€ã€FiddleræŠ“åŒ…å·¥å…·ç®€ä»‹</strong></h2>
<p><strong>Fiddler</strong> æ˜¯ç”± Telerik å¼€å‘çš„ä¸€æ¬¾å…è´¹ HTTP/HTTPS æŠ“åŒ…ä¸è°ƒè¯•å·¥å…·ã€‚
å®ƒé€šè¿‡å»ºç«‹æœ¬åœ°ä»£ç†æœåŠ¡å™¨ï¼Œæ‹¦æˆªç³»ç»Ÿä¸­æ‰€æœ‰ç½‘ç»œè¯·æ±‚ï¼Œå¸®åŠ©å¼€å‘è€…åˆ†ææ¥å£è°ƒç”¨ã€ç›‘æ§æµé‡ã€æ¨¡æ‹Ÿå“åº”ã€ä¼˜åŒ–æ€§èƒ½ã€‚</p>
<p>ä¸å…¶ä»–æŠ“åŒ…å·¥å…·ï¼ˆå¦‚ Charlesã€Postmanã€Wiresharkï¼‰ç›¸æ¯”ï¼ŒFiddler çš„ä¼˜åŠ¿åœ¨äºï¼š</p>
<ul>
<li><strong>å…è´¹ä¸”åŠŸèƒ½å…¨é¢</strong>ï¼›</li>
<li><strong>æ”¯æŒå¤šç«¯æŠ“åŒ…ï¼ˆWeb / App / å°ç¨‹åº / æ¡Œé¢ç¨‹åºï¼‰</strong>ï¼›</li>
<li><strong>æ”¯æŒ HTTPS è§£å¯†ä¸è¯ä¹¦ç®¡ç†</strong>ï¼›</li>
<li><strong>å¯è®¾ç½®æ–­ç‚¹ä¿®æ”¹è¯·æ±‚ä¸å“åº”</strong>ï¼›</li>
<li><strong>Mock æ•°æ®æ”¯æŒæœ¬åœ°æ¥å£è°ƒè¯•</strong>ï¼›</li>
<li><strong>å†…ç½®æ€§èƒ½åˆ†æä¸è¯·æ±‚ç»Ÿè®¡å·¥å…·</strong>ã€‚</li>
</ul>
<p>ç®€å•æ¥è¯´ï¼ŒFiddler æ˜¯å¼€å‘è€…è°ƒè¯•æ¥å£ä¸åˆ†æç½‘ç»œè¯·æ±‚æœ€å¼ºå¤§çš„å·¥å…·ä¹‹ä¸€ã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>äºŒã€Fiddlerå®‰è£…ä¸é…ç½®æ–¹æ³•</strong></h2>
<h3 data-id="heading-2"><strong>1. å®‰è£…ä¸å¯åŠ¨</strong></h3>
<p>Fiddler å®‰è£…éå¸¸ç®€å•ï¼Œå¯åŠ¨åä¼šè‡ªåŠ¨æ¥ç®¡ç³»ç»Ÿä»£ç†ã€‚
æ‰“å¼€æµè§ˆå™¨è®¿é—®ä»»æ„ç½‘ç«™ï¼Œä½ å°±èƒ½åœ¨å·¦ä¾§é¢æ¿çœ‹åˆ°æ‰€æœ‰ HTTP è¯·æ±‚ã€‚</p>
<p><strong>å°æç¤ºï¼š</strong></p>
<ul>
<li>â€œCapturingâ€ è¡¨ç¤ºå½“å‰æ­£åœ¨æŠ“åŒ…ï¼›</li>
<li>â€œPausedâ€ è¡¨ç¤ºæš‚åœæŠ“åŒ…ï¼Œå¯ç‚¹å‡»çŠ¶æ€æ å¯ç”¨ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3"><strong>2. Fiddlerä»£ç†è®¾ç½®ï¼ˆç”µè„‘ + ç§»åŠ¨ç«¯ï¼‰</strong></h3>
<p>å¦‚æœä½ å¸Œæœ›æŠ“å–ç§»åŠ¨ç«¯æµé‡ï¼ˆä¾‹å¦‚ iOSã€Android App æˆ–å°ç¨‹åºï¼‰ï¼Œ
éœ€è¦å¼€å¯ Fiddler çš„è¿œç¨‹ä»£ç†åŠŸèƒ½ï¼š</p>
<p><strong>æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š</strong></p>
<ol>
<li>æ‰“å¼€èœå• <code>Tools â†’ Options â†’ Connections</code>ï¼›</li>
<li>å‹¾é€‰ <strong>Allow remote computers to connect</strong>ï¼›</li>
<li>æŸ¥çœ‹ç”µè„‘çš„æœ¬åœ° IP åœ°å€ä¸ç«¯å£ï¼ˆé»˜è®¤ 8888ï¼‰ï¼›</li>
<li>ç¡®ä¿æ‰‹æœºä¸ç”µè„‘åœ¨åŒä¸€ Wi-Fi ç½‘ç»œä¸‹ï¼›</li>
<li>åœ¨æ‰‹æœº Wi-Fi é«˜çº§è®¾ç½®ä¸­é…ç½®ä»£ç†ï¼š
<ul>
<li>æœåŠ¡å™¨ï¼šç”µè„‘ IP</li>
<li>ç«¯å£ï¼š8888</li>
</ul>
</li>
</ol>
<p>å®Œæˆåï¼Œæ‰‹æœºæ‰€æœ‰ç½‘ç»œè¯·æ±‚éƒ½ä¼šé€šè¿‡ Fiddler è¿›è¡Œè½¬å‘ä¸ç›‘æ§ã€‚</p>
<hr/>
<h3 data-id="heading-4"><strong>3. HTTPS æŠ“åŒ…é…ç½®</strong></h3>
<p>ç°ä»£ç½‘ç«™å‡ ä¹éƒ½ä½¿ç”¨ HTTPSï¼Œå› æ­¤å¿…é¡»å®‰è£…è¯ä¹¦æ‰èƒ½æŸ¥çœ‹åŠ å¯†æµé‡ã€‚</p>
<p><strong>é…ç½®æ­¥éª¤ï¼š</strong></p>
<ul>
<li>æ‰“å¼€ <code>Tools â†’ Options â†’ HTTPS</code>ï¼›</li>
<li>å‹¾é€‰ <strong>Decrypt HTTPS traffic</strong>ï¼›</li>
<li>ç‚¹å‡» â€œActions â†’ Trust Root Certificateâ€ï¼›</li>
<li>å®‰è£…å¹¶ä¿¡ä»» Fiddler æ ¹è¯ä¹¦ï¼›</li>
<li>å¯¹äºç§»åŠ¨ç«¯ï¼Œè¿˜éœ€å¯¼å…¥è¯ä¹¦å¹¶è®¾ç½®ä¿¡ä»»ã€‚</li>
</ul>
<p>å®Œæˆåï¼ŒFiddler å³å¯è§£æ HTTPS è¯·æ±‚çš„å®Œæ•´å†…å®¹ï¼ŒåŒ…æ‹¬ Headerã€Body ä¸å“åº”ç»“æœã€‚</p>
<hr/>
<h2 data-id="heading-5"><strong>ä¸‰ã€Fiddlerä½¿ç”¨æ•™ç¨‹ï¼šæ ¸å¿ƒåŠŸèƒ½è¯¦è§£</strong></h2>
<h3 data-id="heading-6"><strong>1. è¯·æ±‚ä¸å“åº”åˆ†æ</strong></h3>
<p>åœ¨ä¸»ç•Œé¢ä¸­ï¼Œæ¯æ¡è¯·æ±‚éƒ½å¯å±•å¼€æŸ¥çœ‹è¯¦ç»†å†…å®¹ï¼š</p>
<ul>
<li>è¯·æ±‚æ–¹å¼ã€URLã€çŠ¶æ€ç ï¼›</li>
<li>è¯·æ±‚å¤´ï¼ˆHeadersï¼‰ã€å‚æ•°ï¼ˆParamsï¼‰ã€è¯·æ±‚ä½“ï¼ˆBodyï¼‰ï¼›</li>
<li>å“åº”å†…å®¹ï¼ˆResponseï¼‰ä¸è€—æ—¶ç»Ÿè®¡ï¼ˆStatisticsï¼‰ã€‚</li>
</ul>
<p>ğŸ“ <strong>å®ç”¨æŠ€å·§ï¼š</strong>
ç‚¹å‡»å³ä¸‹è§’çš„ â€œTimelineâ€ å¯æŸ¥çœ‹æ¯ä¸ªé˜¶æ®µè€—æ—¶ï¼ˆDNS / TCP / TLS / Responseï¼‰ï¼Œ
æœ‰åŠ©äºåˆ¤æ–­æ€§èƒ½ç“¶é¢ˆæ˜¯å¦æ¥è‡ªç½‘ç»œå»¶è¿Ÿæˆ–æœåŠ¡å™¨å“åº”æ…¢ã€‚</p>
<hr/>
<h3 data-id="heading-7"><strong>2. æ–­ç‚¹è°ƒè¯•ï¼ˆBreakpointsï¼‰</strong></h3>
<p>Fiddler çš„æ–­ç‚¹åŠŸèƒ½å¯æ‹¦æˆªè¯·æ±‚ä¸å“åº”ï¼Œå…è®¸å¼€å‘è€…æ‰‹åŠ¨ä¿®æ”¹æ•°æ®ã€‚</p>
<p><strong>å¸¸è§åº”ç”¨ï¼š</strong></p>
<ul>
<li>æ¨¡æ‹Ÿæ¥å£å¼‚å¸¸ï¼ˆè¿”å› 500 / 404ï¼‰ï¼›</li>
<li>ä¿®æ”¹è¯·æ±‚å‚æ•°æˆ– Headerï¼›</li>
<li>æµ‹è¯•å‰ç«¯å®¹é”™æœºåˆ¶ï¼›</li>
<li>éªŒè¯å®‰å…¨é€»è¾‘ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼Œä½ å¯ä»¥æ‹¦æˆªç™»å½•æ¥å£è¯·æ±‚ï¼Œå°†å“åº”ä¿®æ”¹ä¸º <code>{ "code": 403 }</code>ï¼Œ
ä»è€ŒéªŒè¯å‰ç«¯æ˜¯å¦èƒ½æ­£ç¡®å¤„ç†æƒé™å¼‚å¸¸ã€‚</p>
<hr/>
<h3 data-id="heading-8"><strong>3. æœ¬åœ°Mockæ¥å£ï¼ˆAutoResponderï¼‰</strong></h3>
<p>å½“å‰åç«¯æ¥å£æœªå¼€å‘å®Œæˆæ—¶ï¼Œå¯ä½¿ç”¨ Fiddler æ¨¡æ‹Ÿæ¥å£è¿”å›ã€‚</p>
<p><strong>æ“ä½œæ­¥éª¤ï¼š</strong></p>
<ol>
<li>æ‰“å¼€ AutoResponder é¢æ¿ï¼›</li>
<li>ç‚¹å‡» â€œAdd Ruleâ€ æ·»åŠ åŒ¹é…è§„åˆ™ï¼›</li>
<li>æŒ‡å®šæœ¬åœ° JSON æ–‡ä»¶æˆ–è‡ªå®šä¹‰å“åº”å†…å®¹ï¼›</li>
<li>å¯ç”¨è§„åˆ™åï¼ŒåŒ¹é…è¯·æ±‚å°†è¿”å›æ¨¡æ‹Ÿæ•°æ®ã€‚</li>
</ol>
<p><strong>åº”ç”¨åœºæ™¯ç¤ºä¾‹ï¼š</strong>
å‰ç«¯å¼€å‘é¡µé¢æ—¶ï¼Œåç«¯æ¥å£è¿˜æœªå®Œæˆï¼Œå¯ç”¨ Fiddler è¿”å›å‡æ•°æ®è¿›è¡Œ UI ä¸é€»è¾‘è°ƒè¯•ï¼Œå¤§å¤§æé«˜å¼€å‘æ•ˆç‡ã€‚</p>
<hr/>
<h3 data-id="heading-9"><strong>4. æ„é€ ä¸é‡æ”¾è¯·æ±‚ï¼ˆComposerï¼‰</strong></h3>
<p>Composer æ¨¡å—è®© Fiddler æˆä¸ºâ€œå¯äº¤äº’ç‰ˆ Postmanâ€ã€‚
å¼€å‘è€…å¯è‡ªç”±æ„é€ è¯·æ±‚ã€ä¿®æ”¹å‚æ•°ã€æ·»åŠ  Header å¹¶é‡æ”¾ã€‚</p>
<p>é€‚åˆåœºæ™¯åŒ…æ‹¬ï¼š</p>
<ul>
<li>è°ƒè¯•æ¥å£å‚æ•°ä¸è¿”å›é€»è¾‘ï¼›</li>
<li>éªŒè¯ç­¾åã€Token æ˜¯å¦æ­£ç¡®ï¼›</li>
<li>å¤ç°çº¿ä¸Šé—®é¢˜ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-10"><strong>5. è¿‡æ»¤ä¸æœç´¢ï¼ˆFiltersï¼‰</strong></h3>
<p>åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œè¯·æ±‚æ•°å¾€å¾€æˆç™¾ä¸Šåƒï¼Œä½¿ç”¨ Filters æ¨¡å—å¯ä»¥æŒ‰åŸŸåã€åè®®ã€è¯·æ±‚ç±»å‹å¿«é€Ÿè¿‡ï¼Œ æé«˜è°ƒè¯•æ•ˆç‡ã€‚</p>
<hr/>
<h2 data-id="heading-11"><strong>å››ã€Fiddlerå®æˆ˜æ¡ˆä¾‹ï¼šç§»åŠ¨ç«¯æ¥å£Bugæ’æŸ¥</strong></h2>
<p>åœ¨ä¸€æ¬¡ç§»åŠ¨ç«¯è°ƒè¯•ä¸­ï¼Œæµ‹è¯•äººå‘˜åé¦ˆç™»å½•æ¥å£è¿”å› 403 é”™è¯¯ã€‚
åç«¯æ—¥å¿—æ˜¾ç¤ºæ­£å¸¸ï¼Œæ¥å£ç‹¬ç«‹æµ‹è¯•ä¹Ÿæ²¡é—®é¢˜ã€‚</p>
<p>ä½¿ç”¨ Fiddler æŠ“åŒ…åå‘ç°ï¼š
App è¯·æ±‚æ—¶å°‘äº† Header <code>Content-Type: application/json</code>ï¼Œ
å¯¼è‡´æœåŠ¡å™¨è§£æå¤±è´¥ã€‚</p>
<p>ä»…ç”¨ä¸¤åˆ†é’Ÿå®šä½é—®é¢˜ï¼ŒæˆåŠŸè§£å†³ã€‚
è¿™ç±»éšè”½ Bugï¼Œåœ¨æ²¡æœ‰æŠ“åŒ…å·¥å…·æ—¶å¾€å¾€éš¾ä»¥å‘ç°ã€‚</p>
<hr/>
<h2 data-id="heading-12"><strong>äº”ã€Fiddlerå¸¸ç”¨åŠŸèƒ½é€Ÿè§ˆ</strong></h2>



































<table><thead><tr><th>æ¨¡å—åç§°</th><th>åŠŸèƒ½è¯´æ˜</th><th>åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Filters</strong></td><td>æŒ‰å…³é”®å­—è¿‡æ»¤è¯·æ±‚</td><td>èšç„¦ç›®æ ‡æ¥å£</td></tr><tr><td><strong>AutoResponder</strong></td><td>æ¨¡æ‹Ÿæ¥å£å“åº”</td><td>å‰åç«¯åˆ†ç¦»å¼€å‘</td></tr><tr><td><strong>Breakpoints</strong></td><td>ä¿®æ”¹è¯·æ±‚ä¸å“åº”</td><td>æ¨¡æ‹Ÿé”™è¯¯åœºæ™¯</td></tr><tr><td><strong>Composer</strong></td><td>æ„é€ ä¸é‡æ”¾è¯·æ±‚</td><td>API æµ‹è¯•ä¸éªŒè¯</td></tr><tr><td><strong>Timeline</strong></td><td>åˆ†æè¯·æ±‚è€—æ—¶</td><td>æ€§èƒ½ä¼˜åŒ–</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-13"><strong>å…­ã€Fiddlerä¸å…¶ä»–æŠ“åŒ…å·¥å…·å¯¹æ¯”</strong></h2>






























<table><thead><tr><th>å·¥å…·</th><th>ä¼˜åŠ¿</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Fiddler</strong></td><td>å…è´¹ã€åŠŸèƒ½å¼ºã€æ”¯æŒè¯·æ±‚ä¿®æ”¹</td><td>å¼€å‘ / æµ‹è¯•</td></tr><tr><td><strong>Charles</strong></td><td>ç•Œé¢ç®€æ´ã€æ˜“ç”¨æ€§å¼º</td><td>æ–°æ‰‹ç”¨æˆ·</td></tr><tr><td><strong>Postman</strong></td><td>æ„é€ ä¸æ¥å£æµ‹è¯•æ–¹ä¾¿</td><td>API è°ƒè¯•</td></tr><tr><td><strong>Wireshark</strong></td><td>åˆ†æåº•å±‚åè®®</td><td>ç½‘ç»œå®‰å…¨ä¸è¿ç»´</td></tr></tbody></table>
<p><strong>ç»“è®ºï¼š</strong>
åœ¨â€œæ¥å£çº§è°ƒè¯• + ç½‘ç»œåˆ†æâ€å±‚é¢ï¼ŒFiddler å‡ ä¹æ— å¯æ›¿ä»£ã€‚</p>
<hr/>
<h2 data-id="heading-14"><strong>ä¸ƒã€å­¦ä¹ ä¸èµ„æºæ¨è</strong></h2>
<p>æƒ³ç³»ç»Ÿå­¦ä¹  Fiddlerï¼Ÿæ¨èè®¿é—®**<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.fiddler.hk%2F" target="_blank" title="https://www.fiddler.hk/" ref="nofollow noopener noreferrer">Fiddler ä¸­æ–‡ç½‘</a>**,é€šè¿‡æŒæ¡ <strong>Fiddlerä½¿ç”¨æ•™ç¨‹</strong>ã€<strong>ä»£ç†è®¾ç½®</strong> ä¸ <strong>è°ƒè¯•æŠ€å·§</strong>ï¼Œ
ä½ å¯ä»¥è½»æ¾å®šä½æ¥å£é—®é¢˜ã€åˆ†æç½‘ç»œæ€§èƒ½ã€éªŒè¯é€»è¾‘æ­£ç¡®æ€§ã€‚</p>
<p>ç½‘ç«™åŒ…å«ï¼š</p>
<ul>
<li>Fiddler å®‰è£…ä¸é…ç½®æ•™ç¨‹ï¼›</li>
<li>HTTPS æŠ“åŒ…é…ç½®ä¸è¯ä¹¦ç®¡ç†ï¼›</li>
<li>ç§»åŠ¨ç«¯ä»£ç†è®¾ç½®ï¼›</li>
<li>å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆï¼›</li>
<li>Mock ä¸è°ƒè¯•å®æˆ˜æ¡ˆä¾‹ã€‚</li>
</ul>
<hr/>
<p>è°ƒè¯•ï¼Œæ˜¯ä¸€åå¼€å‘è€…çš„æ ¸å¿ƒèƒ½åŠ›ä¹‹ä¸€ã€‚
è€Œ <strong>FiddleræŠ“åŒ…å·¥å…·</strong> å°±æ˜¯é‚£æŠŠè®©ç½‘ç»œé€šä¿¡â€œé€æ˜åŒ–â€çš„æ”¾å¤§é•œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swift æ„å»º Android åº”ç”¨ï¼Ÿå®ƒæ¥äº†]]></title>    <link>https://juejin.cn/post/7570651893867954228</link>    <guid>https://juejin.cn/post/7570651893867954228</guid>    <pubDate>2025-11-10T05:28:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570651893867954228" data-draft-id="7568796644347887616" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swift æ„å»º Android åº”ç”¨ï¼Ÿå®ƒæ¥äº†"/> <meta itemprop="keywords" content="Swift,iOS"/> <meta itemprop="datePublished" content="2025-11-10T05:28:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RockByte"/> <meta itemprop="url" content="https://juejin.cn/user/1046390797768519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swift æ„å»º Android åº”ç”¨ï¼Ÿå®ƒæ¥äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390797768519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RockByte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T05:28:16.000Z" title="Mon Nov 10 2025 05:28:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{font-family:-apple-system,system-ui,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial;color:#00325e}.markdown-body ::selection{background-color:#00325e;color:#fff}.markdown-body blockquote{padding:10px 20px;background-color:#fffaf0;box-shadow:0 3px 10px 0 rgba(255,172,194,.24);border:1px solid #f3ca8e;transition:all .2s;margin:1em 0;border-radius:5px}.markdown-body blockquote p{font-size:14px;line-height:25px;color:#795548}.markdown-body blockquote p:last-child{margin:0}.markdown-body blockquote:hover{border-color:#ff9800;background-color:#fff8e0;box-shadow:0 6px 10px -5px rgba(225,173,98,.3803921569)}.markdown-body blockquote code{color:#ff502c}.markdown-body pre{border:1px solid #8cc0f3;box-shadow:0 3px 10px 0 rgba(255,198,198,.28);border-radius:5px;transition:all .2s;overflow-x:auto;white-space:pre-wrap}.markdown-body pre:hover{border-color:#6d9dce}.markdown-body pre&gt;code{padding:10px 20px;color:#00325e;background:#f0f8ff;font-size:12px;line-height:1.6;display:block}.markdown-body code{background:#f6fbff;color:#0b5393;padding:2px 4px;border-radius:4px;font-size:12px}.markdown-body p{font-size:14px;line-height:28px;text-align:justify;margin-bottom:17px;color:#595959}.markdown-body a{color:#00325e;text-decoration:none}.markdown-body a:after{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAQdJREFUKFNt0DtLA0EUBeBzZle0Eks7rcUfEfBRCha7NorYa6NmVJzgyi4smUgKtdZGCJktLMVH4Y8QeztLWyE7VyLEuNFbXj4Oh0P8c8mZm+uJrEN4BJFTeP/MUVe3bnocfALwkOlo1zS7iZAzf6Cx7oXgbaqjxiDEWCcVaGyxQ8pSWo9XhqhoQ/xUFbaKjhe5V+CmR7mnSplEEF6GSmJ+F/d0KHvbCIIJCLc85U6BC5mONgbJNM3uFag++sX7z8O8MzsWBucifMx0dDGE1kmm458KDVukAlnNdDz/exEeW3dNkbfsYC0xtmgDWP6ELLZ0/F6BJu/UoFQN5AkoeUjeJPvx6+i+X5Sjah4tA6gYAAAAAElFTkSuQmCC);margin-left:2px}.markdown-body a:hover{box-shadow:0 1px}.markdown-body table{max-width:100%;border-collapse:collapse;border-spacing:0;box-shadow:0 3px 10px 0 rgba(255,238,172,.24);transition:all .2s}.markdown-body table:hover{box-shadow:0 3px 10px 0 rgba(185,169,103,.24)}.markdown-body table tr th{border:1px solid #8cc0f3;background-color:#f0f8ff;padding:12px 15px}.markdown-body table tr td{border:1px solid rgba(243,202,142,.4);padding:12px 15px}.markdown-body table tbody tr{transition:all .2s}.markdown-body table tbody tr:hover td{border-color:#f3ca8e;background-color:#fff8e0;z-index:1}.markdown-body img{max-width:100%}.markdown-body h1{font-size:20px;margin-top:30px;margin-bottom:10px;padding-left:30px;position:relative}.markdown-body h1&gt;code{font-size:20px}.markdown-body h1:before{content:"ğŸº";display:block;font-size:18px;width:18px;height:18px;left:0;position:absolute}.markdown-body h2{font-size:18px;margin-top:30px;margin-bottom:10px;padding-left:28px;position:relative}.markdown-body h2&gt;code{font-size:18px}.markdown-body h2:before{content:"ğŸ»";display:block;font-size:16px;width:16px;height:16px;left:0;position:absolute}.markdown-body h3{font-size:16px;margin-top:30px;margin-bottom:10px;padding-left:26px;position:relative}.markdown-body h3&gt;code{font-size:16px}.markdown-body h3:before{content:"ğŸ¥‚";display:block;font-size:14px;width:14px;height:14px;left:0;position:absolute}.markdown-body h4{font-size:14px;margin-top:30px;margin-bottom:10px;padding-left:24px;position:relative}.markdown-body h4&gt;code{font-size:14px}.markdown-body h4:before{content:"ğŸ¥ƒ";display:block;font-size:12px;width:12px;height:12px;left:0;position:absolute}.markdown-body h5{font-size:12px;margin-top:30px;margin-bottom:10px}.markdown-body h5&gt;code{font-size:12px}.markdown-body h6{font-size:10px;margin-top:30px;margin-bottom:10px}.markdown-body h6&gt;code{font-size:10px}.markdown-body h1,.markdown-body h2{color:#ff502c}.markdown-body hr{height:4px;border:none;margin-top:32px;margin-bottom:32px;background-size:4px 1px;background-image:linear-gradient(270deg,#6d9dce,#8cc0f3 25%,transparent 50%)}.markdown-body hr:nth-child(2n){background-image:linear-gradient(270deg,#ff9800,#fff8e0 25%,transparent 50%)}.markdown-body ul{padding-inline-start:20px}.markdown-body ul li{list-style-type:"ğŸ”¸"}.markdown-body ul li li{list-style-type:"â—»ï¸"}.markdown-body ul li li li{list-style-type:"â–«ï¸"}.markdown-body ol{padding-inline-start:20px}.markdown-body ol ::marker{color:#ff9800}.markdown-body ol,.markdown-body ul{line-height:2em}.markdown-body li{padding-inline-start:1ch}.markdown-body li.task-list-item{list-style:none;padding-inline-start:0}.markdown-body li input{padding-right:2px}.markdown-body li input[type=checkbox i]{appearance:none}.markdown-body li input:before{content:"ğŸŸ©";display:block;width:13px;height:13px}.markdown-body li input:checked:before{content:"âœ…"}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atelier-sulphurpool-light">.hljs-comment,.hljs-quote{color:#6b7394}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#c94922}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#c76b29}.hljs-bullet,.hljs-string,.hljs-symbol{color:#ac9739}.hljs-section,.hljs-title{color:#3d8fd1}.hljs-keyword,.hljs-selector-tag{color:#6679cc}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#f5f7ff;color:#5e6687}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4d40136e2fb4e9b8e561157cf588586~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763357295&amp;x-signature=RFtGISs%2BqLZNtsz%2BRj0ZZbNI06M%3D" alt="swift.png" loading="lazy"/></p>
<p>é€‚ç”¨äº Android ç³»ç»Ÿçš„ Swift SDK æœ€è¿‘ä»¥ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.swift.org%2Fblog%2Fnightly-swift-sdk-for-android" target="_blank" title="https://www.swift.org/blog/nightly-swift-sdk-for-android" ref="nofollow noopener noreferrer">nightly æ„å»ºç‰ˆæœ¬å‘å¸ƒ</a>ï¼Œè¯¥ SDK æ—¨åœ¨å¸®åŠ©å¼€å‘è€…å°†ä»–ä»¬çš„ Swift åŒ…ç§»æ¤åˆ° Android ç³»ç»Ÿï¼Œä½¿è·¨å¹³å°å…±äº«ä»£ç æ›´åŠ å®¹æ˜“ã€‚</p>
<p>è™½ç„¶ä»å¤„äºé¢„è§ˆé˜¶æ®µï¼Œä½† Swift åŒ…ç´¢å¼•ä¸­å·²æœ‰è¶…è¿‡ 25% çš„åŒ…å¯ä»¥ç¼–è¯‘ç”¨äº Android ç³»ç»Ÿã€‚</p>
<p>ä»æ ¸å¿ƒå±‚é¢æ¥çœ‹ï¼Œé€‚ç”¨äº Android ç³»ç»Ÿçš„ Swift SDK åŒ…å«ä¸€ä¸ªä¸º Android å¹³å°é‡èº«å®šåˆ¶çš„ Swift å·¥å…·é“¾ï¼ˆå³ç¼–è¯‘å™¨å’Œè¿è¡Œåœ¨ Android ç³»ç»Ÿä¸Šçš„ Swift æ ‡å‡†åº“å®ç°ï¼‰ï¼Œä»¥åŠä¸€ç»„èƒ½è®© Swift è®¿é—® Android API çš„ç»‘å®šã€‚è¯¥ Swift å·¥å…·é“¾å€ŸåŠ© <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fswiftlang%2Fswift-java" target="_blank" title="https://github.com/swiftlang/swift-java" ref="nofollow noopener noreferrer">swift-java</a> é¡¹ç›®å®ç° Java ä¸ Swift çš„äº’æ“ä½œæ€§ï¼Œèƒ½å¤Ÿåˆ›å»ºå…±äº«å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡ä¼šè¢«é“¾æ¥åˆ° Android å®‰è£…åŒ…ï¼ˆ<code>.apk</code>ï¼‰å­˜æ¡£ä¸­ï¼Œå¹¶å¯é€šè¿‡ Java æœ¬åœ°æ¥å£ï¼ˆ<code>JNI</code>ï¼‰è¿›è¡Œè®¿é—®ã€‚</p>
<p>Android ç‰ˆ Swift SDK åœ¨ç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰æ–¹é¢é‡‡å–ä¸­ç«‹çš„ç­–ç•¥ã€‚å…¶å›¢é˜Ÿä¸ä¼šåªä¸“æ³¨äºæŸä¸€ç§ UI æ¡†æ¶ï¼Œè€Œæ˜¯ä¼šæ”¯æŒç°æœ‰çš„æ¡†æ¶ï¼Œç‰¹åˆ«æ˜¯ Android åŸç”Ÿå¼€å‘å·¥å…·åŒ…ï¼ˆå¦‚ <code>Jetpack Compose</code> å’Œä¼ ç»Ÿçš„åŸºäº <code>XML</code> çš„ç³»ç»Ÿï¼‰ã€<code>Flutter</code> çš„ UI å¼•æ“ï¼Œä»¥åŠåƒ <code>Skip</code> è¿™æ ·çš„ç¬¬ä¸‰æ–¹æ¡¥æ¥è§£å†³æ–¹æ¡ˆã€‚Swift  Android å›¢é˜Ÿå¹¶æœªæ˜ç¡®æåŠçš„å¦ä¸€ç§å¯è¡Œæ–¹æ³•æ˜¯ï¼Œä½¿ç”¨ <code>OpenGL</code>ã€<code>Vulkan</code> æˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ä»¥ Swift å®ç° UIï¼Œç„¶åä½¿ç”¨ <code>NativeActivity</code> å°†å…¶é›†æˆåˆ° Android åº”ç”¨ä¸­ã€‚</p>
<p>ç‰¹åˆ«æ˜¯ <code>Skip</code> æ¡†æ¶ï¼Œå®ƒé€šè¿‡å°† <code>SwiftUI</code> ä¸ <code>Jetpack Compose</code> è¿›è¡Œæ¡¥æ¥ï¼Œåœ¨ Android ç³»ç»Ÿä¸Šé‡æ–°å®ç°äº† <code>SwiftUI</code>ã€‚è¿™ç§æ–¹æ³•è®© iOS å¼€å‘è€…èƒ½ç”¨æœ€å°‘çš„ç²¾åŠ›ï¼Œåœ¨åŒä¸€ä¸ªä»£ç åº“ä¸­ç¼–å†™åº”ç”¨çš„ä¸šåŠ¡é€»è¾‘å’Œç”¨æˆ·ç•Œé¢ã€‚</p>
<p>æœ‰ä¸€ä¸ªåä¸º <a href="https://link.juejin.cn?target=https%3A%2F%2Fswiftcrossui.dev%2F" target="_blank" title="https://swiftcrossui.dev/" ref="nofollow noopener noreferrer">SwiftCrossUI</a> çš„å¼€æºæ›¿ä»£æ–¹æ¡ˆï¼Œå®ƒèƒ½åœ¨ macOSã€Linuxã€Windows ç³»ç»Ÿä¸Šæä¾›ç±»ä¼¼äº SwiftUI çš„ç”¨æˆ·ç•Œé¢ APIï¼Œå¹¶ä¸”å¯¹ Android ä¹Ÿæœ‰ä¸€äº›åˆæ­¥æ”¯æŒã€‚</p>
<p>è™½ç„¶åœ¨ iOS å’Œ Android åº”ç”¨ä¸­éƒ½ä½¿ç”¨ Swift çš„å‰æ™¯å¬èµ·æ¥å¾ˆè¯±äººï¼Œä½†æ­£å¦‚ andrekandre åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fnews.ycombinator.com%2Fitem%3Fid%3D45700274" target="_blank" title="https://news.ycombinator.com/item?id=45700274" ref="nofollow noopener noreferrer">Hacker News</a> ä¸ŠæŒ‡å‡ºçš„ï¼Œåˆ›å»ºå‡ºè‰²çš„è·¨å¹³å°åº”ç”¨ä¸ä»…ä»…æ˜¯å·¥å…·é“¾æ”¯æŒå’ŒåŸç”Ÿå·¥å…·åŒ…çš„é—®é¢˜ï¼š</p>
<blockquote>
<p>ä¹‹å‰å°±èµ°è¿‡è¿™æ¡è·¯ï¼Œè¯´å®è¯ï¼Œæœ€å¤§çš„é—®é¢˜åœ¨äºå¼€å‘è€…çš„ç”¨æˆ·ä½“éªŒï¼ˆiOS å¼€å‘è€…ä¸å®¹æ˜“è¿›è¡Œè°ƒè¯•ï¼Œä¸ Kotlin å­˜åœ¨æ¨¡å‹ä¸åŒ¹é…çš„é—®é¢˜ï¼Œæ¯”å¦‚æ— æ³•ä» Swift æ•è· Kotlin å¼‚å¸¸ï¼‰ï¼Œè€Œä¸”æœ€ç»ˆå³ä¾¿æ˜¯ Kotlin å¤šå¹³å°ä¹Ÿå’Œç”¨äº Android å¼€å‘çš„ Kotlin ä¸ä¸€æ ·ï¼Œæ‰€ä»¥åœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œä½ ä»ç„¶ç®—æ˜¯åœ¨å¼•å…¥ç¬¬ä¸‰ç§è¯­è¨€â€¦â€¦</p>
</blockquote>
<p>åœ¨è‹¹æœå®£å¸ƒåœ¨ Swift é¡¹ç›®ä¸­æˆç«‹ä¸€ä¸ª Android å·¥ä½œå°ç»„å¤§çº¦å…­ä¸ªæœˆåï¼Œé€‚ç”¨äº Android ç³»ç»Ÿçš„ Swift è½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼ˆSDKï¼‰é¦–æ¬¡å‘å¸ƒã€‚è¯¥å·¥ä½œå°ç»„æ—¨åœ¨ç¡®ä¿ Swift æ— éœ€ä¾èµ–éå®˜æ–¹åˆ†æ”¯å°±èƒ½ç¼–è¯‘ç”¨äº Android ç³»ç»Ÿçš„ä»£ç ï¼Œå¹¶å¢å¼º Swift çš„æ ‡å‡†åº“ï¼Œä½¿å…¶èƒ½æ›´å¥½åœ°ä¸ Android API å…¼å®¹ã€‚</p>
<p>åœ¨é€‚ç”¨äº Android ç³»ç»Ÿçš„ Swift SDK å‘å¸ƒä¹‹å‰ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹è§£å†³æ–¹æ¡ˆï¼ˆå¦‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.scade.io%2F" target="_blank" title="https://www.scade.io/" ref="nofollow noopener noreferrer">Scade.io</a>ï¼‰å°†ä»–ä»¬çš„ Swift ä»£ç ç¼–è¯‘ç”¨äº Android ç³»ç»Ÿã€‚Scade åŸºäº <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fswiftlang%2Fswift-java" target="_blank" title="https://github.com/swiftlang/swift-java" ref="nofollow noopener noreferrer">Swift4j</a>ï¼Œä¸“æ³¨äºéç”¨æˆ·ç•Œé¢çš„åº”ç”¨ç¨‹åºé€»è¾‘ã€‚</p>
<p>å¯¹äºå¸Œæœ›å°†åº”ç”¨ç§»æ¤åˆ° iOS ç³»ç»Ÿçš„ Android å¼€å‘è€…æ¥è¯´ï¼Œä¸€ä¸ªæ›´æˆç†Ÿçš„é€‰æ‹©æ˜¯ä½¿ç”¨ Kotlin å¤šå¹³å°ä¸ <code>Jetpack Compose</code> å¤šå¹³å°æŠ€æœ¯ï¼Œè¿™å¯¹ä»äº‹ Android å¼€å‘çš„å¼€å‘è€…æ¥è¯´ï¼Œä¼šæ›´åŠ å‹å¥½å¹³æ»‘ã€‚</p>
<blockquote>
<p>åŸæ–‡<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.infoq.com%2Fnews%2F2025%2F10%2Fswift-sdk-android%2F%3FtopicPageSponsorship%3D84d80d2e-e1fc-48d1-9b49-d099f08c9cdb" target="_blank" title="https://www.infoq.com/news/2025/10/swift-sdk-android/?topicPageSponsorship=84d80d2e-e1fc-48d1-9b49-d099f08c9cdb" ref="nofollow noopener noreferrer">www.infoq.com/news/2025/1â€¦</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Appç«¯ç”¨æˆ·æ¯æ—¥å¼¹å‡ºç­¾åˆ°å¼¹çª—å¦‚ä½•å®ç°ï¼Ÿï¼ˆuniapp+Vue)]]></title>    <link>https://juejin.cn/post/7570604028633088035</link>    <guid>https://juejin.cn/post/7570604028633088035</guid>    <pubDate>2025-11-10T03:50:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570604028633088035" data-draft-id="7570533058840412195" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Appç«¯ç”¨æˆ·æ¯æ—¥å¼¹å‡ºç­¾åˆ°å¼¹çª—å¦‚ä½•å®ç°ï¼Ÿï¼ˆuniapp+Vue)"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-11-10T03:50:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Crystal328"/> <meta itemprop="url" content="https://juejin.cn/user/2359973194513272"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Appç«¯ç”¨æˆ·æ¯æ—¥å¼¹å‡ºç­¾åˆ°å¼¹çª—å¦‚ä½•å®ç°ï¼Ÿï¼ˆuniapp+Vue)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2359973194513272/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Crystal328
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T03:50:07.000Z" title="Mon Nov 10 2025 03:50:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>éœ€æ±‚ï¼š</strong></p>
<ul>
<li>åç«¯æä¾›æ¥å£è¿”å›ç”¨æˆ·ç­¾åˆ°ä¿¡æ¯ã€‚</li>
<li>åº”ç”¨å¯åŠ¨æˆ–é‡æ–°å±•ç¤ºæ—¶ï¼Œè‹¥ç”¨æˆ·æœªç­¾åˆ°ï¼Œéœ€è¦å¼¹å‡ºç­¾åˆ°å¼¹çª—ï¼›å·²ç­¾åˆ°åˆ™ä¸å¼¹ã€‚</li>
<li>ç­¾åˆ°æˆåŠŸåè‡ªåŠ¨å…³é—­å¼¹çª—ã€‚<br/></li>
</ul>
<p><strong>æ€è·¯ï¼š</strong></p>
<ol>
<li>ç”¨ <code>App.vue</code> çš„ <code>onShow</code> ç”Ÿå‘½å‘¨æœŸåšå…¨å±€åˆ¤æ–­ï¼Œç¡®ä¿åœ¨ä»»æ„é¡µé¢æ¿€æ´»æ—¶éƒ½èƒ½æ£€æŸ¥ç­¾åˆ°çŠ¶æ€ã€‚</li>
<li>åœ¨ç­¾åˆ°å¼¹çª—é¡µ <code>pages/checkIn/checkIn.vue</code> ä¸­è´Ÿè´£ï¼š  æ‹‰å–ç­¾åˆ°è¯¦æƒ…ã€æ¸²æŸ“å¥–åŠ±åˆ—è¡¨ã€è°ƒç”¨ç­¾åˆ°æ¥å£å¹¶åœ¨æˆåŠŸåè‡ªåŠ¨å…³é—­ã€‚</li>
</ol>
<p><strong>å®ç°æ­¥éª¤ï¼š</strong><br/></p>
<ol>
<li>å°è£…æ¥å£è°ƒç”¨æ–¹æ³•</li>
</ol>
<pre><code class="hljs language-js" lang="js"> <span class="hljs-comment">// è·å–ç­¾åˆ°ä¿¡æ¯</span>
  <span class="hljs-title function_">getSigninInfoApi</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-keyword">return</span> http.<span class="hljs-title function_">get</span>(<span class="hljs-string">"/api/sign_in/info"</span>, { <span class="hljs-attr">params</span>: data || {} });
  },
  <span class="hljs-comment">// æ‰§è¡Œç­¾åˆ°</span>
  <span class="hljs-title function_">signInApi</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-keyword">return</span> http.<span class="hljs-title function_">post</span>(<span class="hljs-string">"/api/sign_in/sign"</span>, { <span class="hljs-attr">data</span>: data || {} });
  },
</code></pre>
<ol start="2">
<li>å…¨å±€å…¥å£æ£€æŸ¥ç­¾åˆ°çŠ¶æ€ (App.vue)</li>
</ol>
<pre><code class="hljs language-js" lang="js">
<span class="hljs-keyword">import</span> { loginApi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/api/login.js'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">checkSigninStatus</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// Step 1. æ£€æŸ¥ token æ˜¯å¦å­˜åœ¨ï¼Œæ²¡æœ‰ç™»å½•ç”¨æˆ·ä¸è§¦å‘ç­¾åˆ°é€»è¾‘</span>
  <span class="hljs-keyword">const</span> token = uni.<span class="hljs-title function_">getStorageSync</span>(<span class="hljs-string">'token'</span>);
  <span class="hljs-keyword">if</span> (!token) <span class="hljs-keyword">return</span>;

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// Step 2. è¯·æ±‚ç­¾åˆ°çŠ¶æ€æ¥å£</span>
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> loginApi.<span class="hljs-title function_">getSigninInfoApi</span>({});
    <span class="hljs-keyword">if</span> (res?.<span class="hljs-property">code</span> !== <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// æ¥å£å¼‚å¸¸ç›´æ¥é€€å‡º</span>

    <span class="hljs-keyword">const</span> hasSignedToday = !!res?.<span class="hljs-property">data</span>?.<span class="hljs-property">is_signed_today</span>;
    <span class="hljs-keyword">if</span> (hasSignedToday) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// å·²ç­¾åˆ°åˆ™ä¸å¼¹çª—</span>

    <span class="hljs-comment">// Step 3. æ‰“å¼€ç­¾åˆ°å¼¹çª—ï¼ˆé˜²æ­¢é‡å¤è·³è½¬ï¼‰</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">openPopup</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">const</span> pages = <span class="hljs-title function_">getCurrentPages</span>();
      <span class="hljs-keyword">const</span> currentPage = pages[pages.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>];
      <span class="hljs-keyword">if</span> (!currentPage || currentPage.<span class="hljs-property">route</span> === <span class="hljs-string">'pages/checkIn/checkIn'</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-comment">// è½»å¾®å»¶è¿Ÿé˜²æ­¢è·¯ç”±å†²çª</span>
      uni.<span class="hljs-title function_">navigateTo</span>({
        <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/checkIn/checkIn'</span>
      });
    };

    <span class="hljs-built_in">setTimeout</span>(openPopup, <span class="hljs-number">300</span>);
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ£€æŸ¥ç­¾åˆ°çŠ¶æ€å¤±è´¥:'</span>, e);
  }
};

<span class="hljs-comment">// åœ¨ App.vue çš„ onShow ç”Ÿå‘½å‘¨æœŸä¸­è§¦å‘</span>
<span class="hljs-title function_">onShow</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">checkSigninStatus</span>();
});
</code></pre>
<ol start="3">
<li>ç­¾åˆ°å¼¹çª—é€»è¾‘ (pages/checkIn/checkIn.vue)</li>
</ol>
<ul>
<li>é¡µé¢åŠ è½½æ—¶å±•ç¤ºç­¾åˆ°æŒ‰é’®ã€‚</li>
<li>ç‚¹å‡»â€œç­¾åˆ°â€åè°ƒç”¨ <code>loginApi.signInApi()</code>ã€‚</li>
<li>ç­¾åˆ°æˆåŠŸåå¼¹å‡ºæç¤ºå¹¶è‡ªåŠ¨å…³é—­å¼¹çª—ã€‚</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// pages/checkIn/checkIn.vue</span>
<span class="hljs-keyword">import</span> { loginApi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/api/login.js'</span>;

<span class="hljs-keyword">const</span> loading = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);       <span class="hljs-comment">// æŒ‰é’®åŠ è½½çŠ¶æ€</span>
<span class="hljs-keyword">const</span> isSignedToday = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>); <span class="hljs-comment">// æ˜¯å¦å·²ç­¾åˆ°</span>

<span class="hljs-comment">// é¡µé¢åŠ è½½æ—¶æ‹‰å–ç­¾åˆ°çŠ¶æ€</span>
<span class="hljs-title function_">onShow</span>(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> loginApi.<span class="hljs-title function_">getSigninInfoApi</span>({});
  <span class="hljs-keyword">if</span> (res?.<span class="hljs-property">code</span> === <span class="hljs-number">1</span>) {
    isSignedToday.<span class="hljs-property">value</span> = !!res.<span class="hljs-property">data</span>.<span class="hljs-property">is_signed_today</span>;
  }
});

<span class="hljs-comment">// ç‚¹å‡»â€œç«‹å³ç­¾åˆ°â€æŒ‰é’®</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSignIn</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (loading.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span>;
  loading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> loginApi.<span class="hljs-title function_">signInApi</span>({});
    <span class="hljs-keyword">if</span> (res?.<span class="hljs-property">code</span> === <span class="hljs-number">1</span>) {
      uni.<span class="hljs-title function_">showToast</span>({
        <span class="hljs-attr">title</span>: <span class="hljs-string">'ç­¾åˆ°æˆåŠŸ'</span>,
        <span class="hljs-attr">icon</span>: <span class="hljs-string">'success'</span>
      });
      <span class="hljs-comment">// å»¶è¿Ÿå…³é—­å¼¹çª—</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        uni.<span class="hljs-title function_">navigateBack</span>(); <span class="hljs-comment">// è¿”å›ä¸Šä¸€ä¸ªé¡µé¢ï¼ˆå³å…³é—­å¼¹çª—ï¼‰</span>
      }, <span class="hljs-number">800</span>);
    } <span class="hljs-keyword">else</span> {
      uni.<span class="hljs-title function_">showToast</span>({
        <span class="hljs-attr">title</span>: res?.<span class="hljs-property">msg</span> || <span class="hljs-string">'ç­¾åˆ°å¤±è´¥ï¼Œè¯·ç¨åå†è¯•'</span>,
        <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span>
      });
    }
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ç­¾åˆ°è¯·æ±‚å¤±è´¥:'</span>, err);
    uni.<span class="hljs-title function_">showToast</span>({
      <span class="hljs-attr">title</span>: <span class="hljs-string">'ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•'</span>,
      <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span>
    });
  } <span class="hljs-keyword">finally</span> {
    loading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
  }
};

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue 3ä¸­watchä¾¦å¬å™¨çš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿ä½ æŒæ¡äº†å—ï¼Ÿæ·±åº¦ç›‘å¬ã€ä¸watchEffectçš„å·®å¼‚åŠå¸¸è§æŠ¥é”™è§£æ]]></title>    <link>https://juejin.cn/post/7570630923710005300</link>    <guid>https://juejin.cn/post/7570630923710005300</guid>    <pubDate>2025-11-10T04:05:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570630923710005300" data-draft-id="7570651893867659316" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue 3ä¸­watchä¾¦å¬å™¨çš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿ä½ æŒæ¡äº†å—ï¼Ÿæ·±åº¦ç›‘å¬ã€ä¸watchEffectçš„å·®å¼‚åŠå¸¸è§æŠ¥é”™è§£æ    "/> <meta itemprop="keywords" content="å‰ç«¯,Trae,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-11-10T04:05:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="kknone"/> <meta itemprop="url" content="https://juejin.cn/user/1366025597879930"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue 3ä¸­watchä¾¦å¬å™¨çš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿ä½ æŒæ¡äº†å—ï¼Ÿæ·±åº¦ç›‘å¬ã€ä¸watchEffectçš„å·®å¼‚åŠå¸¸è§æŠ¥é”™è§£æ    
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1366025597879930/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    kknone
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T04:05:11.000Z" title="Mon Nov 10 2025 04:05:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1. ä¾¦å¬å™¨çš„åŸºæœ¬ç”¨æ³•</h3>
<p>ä¾¦å¬å™¨ï¼ˆ<code>watch</code>ï¼‰æ˜¯Vue 3ä¸­ç”¨äº<strong>å“åº”å¼è·Ÿè¸ªæ•°æ®æºå˜åŒ–</strong>çš„æ ¸å¿ƒAPIï¼Œå®ƒå…è®¸ä½ åœ¨å“åº”å¼æ•°æ®æ”¹å˜æ—¶æ‰§è¡Œè‡ªå®šä¹‰å‰¯ä½œç”¨ï¼ˆå¦‚å‘è¯·æ±‚ã€æ›´æ–°DOMã€æ—¥å¿—è®°å½•ç­‰ï¼‰ã€‚å…¶æ ¸å¿ƒé€»è¾‘æ˜¯ï¼š<strong>æ˜ç¡®æŒ‡å®šè¦ç›‘å¬çš„â€œæºâ€ï¼Œå¹¶å®šä¹‰â€œå˜åŒ–æ—¶çš„å›è°ƒâ€</strong>ã€‚</p>
<h4 data-id="heading-1">1.1 ç›‘å¬å•ä¸ªrefæº</h4>
<p><code>ref</code>æ˜¯Vue 3ä¸­æœ€åŸºç¡€çš„å“åº”å¼åŒ…è£…å™¨ï¼Œç›‘å¬<code>ref</code>çš„è¯­æ³•éå¸¸ç›´è§‚â€”â€”ç›´æ¥å°†<code>ref</code>å¯¹è±¡ä½œä¸º<code>watch</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { ref, watch } from 'vue'

// å“åº”å¼æ•°æ®ï¼šè®¡æ•°å™¨
const count = ref(0)

// ä¾¦å¬å™¨ï¼šç›‘å¬countçš„å˜åŒ–
watch(count, (newValue, oldValue) =&gt; {
  console.log(`è®¡æ•°å™¨ä» ${oldValue} å˜åˆ°äº† ${newValue}`)
  // è¿™é‡Œå¯ä»¥æ‰§è¡Œä»»ä½•å‰¯ä½œç”¨ï¼Œæ¯”å¦‚æ›´æ–°é¡µé¢æ ‡é¢˜
  document.title = `Count: ${newValue}`
})
&lt;/script&gt;

&lt;template&gt;
  &lt;button @click="count++"&gt;ç‚¹å‡»å¢åŠ ï¼ˆå½“å‰ï¼š{{ count }}ï¼‰&lt;/button&gt;
&lt;/template&gt;
</code></pre>
<p><strong>å…³é”®è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>watch</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<strong>ç›‘å¬æº</strong>ï¼ˆè¿™é‡Œæ˜¯<code>count</code>ï¼‰ï¼›</li>
<li>ç¬¬äºŒä¸ªå‚æ•°æ˜¯<strong>å˜åŒ–å›è°ƒ</strong>ï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š<code>newValue</code>ï¼ˆå˜åŒ–åçš„å€¼ï¼‰ã€<code>oldValue</code>ï¼ˆå˜åŒ–å‰çš„å€¼ï¼‰ï¼›</li>
<li>ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œ<code>count</code>å˜åŒ–ä¼šè§¦å‘å›è°ƒï¼Œä¿®æ”¹é¡µé¢æ ‡é¢˜ã€‚</li>
</ul>
<h4 data-id="heading-2">1.2 ç›‘å¬reactiveå¯¹è±¡çš„å±æ€§</h4>
<p>å¯¹äº<code>reactive</code>åˆ›å»ºçš„å“åº”å¼å¯¹è±¡ï¼Œ<strong>ä¸èƒ½ç›´æ¥ç›‘å¬æ•´ä¸ªå¯¹è±¡çš„å±æ€§</strong>ï¼ˆä¼šä¸¢å¤±å“åº”å¼è·Ÿè¸ªï¼‰ï¼Œéœ€è¦ç”¨<strong>getterå‡½æ•°</strong>è¿”å›è¦ç›‘å¬çš„å±æ€§ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { reactive, watch } from 'vue'

// å“åº”å¼å¯¹è±¡ï¼šç”¨æˆ·çŠ¶æ€
const user = reactive({
  name: 'Alice',
  age: 25
})

// ä¾¦å¬å™¨ï¼šç›‘å¬user.nameçš„å˜åŒ–
watch(
  () =&gt; user.name, // getterå‡½æ•°ï¼šè¿”å›è¦ç›‘å¬çš„å±æ€§
  (newName, oldName) =&gt; {
    console.log(`ç”¨æˆ·åä» ${oldName} æ”¹ä¸º ${newName}`)
  }
)
&lt;/script&gt;

&lt;template&gt;
  &lt;input v-model="user.name" placeholder="ä¿®æ”¹ç”¨æˆ·å" /&gt;
&lt;/template&gt;
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦ç”¨getterï¼Ÿ</strong><br/>
<code>reactive</code>å¯¹è±¡çš„å±æ€§æ˜¯â€œå“åº”å¼ä»£ç†â€ï¼Œç›´æ¥å†™<code>user.name</code>ä¼šè¿”å›åŸå§‹å€¼ï¼Œæ— æ³•è¢«<code>watch</code>è·Ÿè¸ªã€‚getterå‡½æ•°ä¼šè®©Vueæ„ŸçŸ¥åˆ°â€œè¿™ä¸ªå±æ€§éœ€è¦è¢«è·Ÿè¸ªâ€ã€‚</p>
<h4 data-id="heading-3">1.3 ç›‘å¬å¤šä¸ªæº</h4>
<p><code>watch</code>æ”¯æŒåŒæ—¶ç›‘å¬<strong>å¤šä¸ªå“åº”å¼æº</strong>ï¼Œåªéœ€å°†æºåŒ…è£…æˆæ•°ç»„å³å¯ã€‚å›è°ƒå‡½æ•°çš„å‚æ•°ä¼šå¯¹åº”æ•°ç»„çš„æ–°å€¼å’Œæ—§å€¼ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { ref, reactive, watch } from 'vue'

const count = ref(0)
const user = reactive({ name: 'Alice' })

// ç›‘å¬countå’Œuser.nameä¸¤ä¸ªæº
watch(
  [count, () =&gt; user.name], // æºæ•°ç»„
  ([newCount, newName], [oldCount, oldName]) =&gt; { // æ–°å€¼æ•°ç»„ã€æ—§å€¼æ•°ç»„
    console.log(`è®¡æ•°å™¨ï¼š${oldCount} â†’ ${newCount}ï¼›ç”¨æˆ·åï¼š${oldName} â†’ ${newName}`)
  }
)
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-4">2. ä¾¦å¬å™¨çš„é«˜çº§é€‰é¡¹</h3>
<p><code>watch</code>è¿˜æ”¯æŒé€šè¿‡<strong>é€‰é¡¹å¯¹è±¡</strong>ï¼ˆç¬¬ä¸‰ä¸ªå‚æ•°ï¼‰é…ç½®æ›´çµæ´»çš„è¡Œä¸ºï¼Œå¸¸è§é€‰é¡¹æœ‰<code>deep</code>ï¼ˆæ·±åº¦ç›‘å¬ï¼‰ã€<code>immediate</code>ï¼ˆç«‹å³æ‰§è¡Œï¼‰ã€‚</p>
<h4 data-id="heading-5">2.1 æ·±åº¦ç›‘å¬ï¼ˆ<code>deep: true</code>ï¼‰</h4>
<p>å½“ç›‘å¬çš„æºæ˜¯<strong>åµŒå¥—å¯¹è±¡</strong>æ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹<code>watch</code>åªä¼šè·Ÿè¸ªâ€œå¯¹è±¡å¼•ç”¨â€çš„å˜åŒ–ï¼Œä¸ä¼šè·Ÿè¸ªâ€œåµŒå¥—å±æ€§â€çš„å˜åŒ–ã€‚éœ€è¦å¼€å¯<code>deep: true</code>æ¥ç›‘å¬åµŒå¥—å±æ€§ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { reactive, watch } from 'vue'

// åµŒå¥—å“åº”å¼å¯¹è±¡ï¼šå•†å“ä¿¡æ¯
const product = reactive({
  id: 1,
  info: {
    name: 'Vue 3 å®æˆ˜',
    price: 99 // åµŒå¥—å±æ€§
  }
})

// æ·±åº¦ç›‘å¬product.infoçš„å˜åŒ–
watch(
  () =&gt; product.info,
  (newInfo, oldInfo) =&gt; {
    console.log(`å•†å“ä¿¡æ¯æ›´æ–°ï¼šä»·æ ¼ä» ${oldInfo.price} å˜ä¸º ${newInfo.price}`)
  },
  { deep: true } // å¼€å¯æ·±åº¦ç›‘å¬
)
&lt;/script&gt;

&lt;template&gt;
  &lt;input v-model.number="product.info.price" placeholder="ä¿®æ”¹ä»·æ ¼" /&gt;
&lt;/template&gt;
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šæ·±åº¦ç›‘å¬ä¼šéå†å¯¹è±¡çš„æ‰€æœ‰åµŒå¥—å±æ€§ï¼Œæ€§èƒ½å¼€é”€è¾ƒå¤§ï¼Œå°½é‡åªåœ¨å¿…è¦æ—¶ä½¿ç”¨ï¼ˆæ¯”å¦‚ç¡®å®éœ€è¦è·Ÿè¸ªåµŒå¥—å˜åŒ–ï¼‰ã€‚</p>
<h4 data-id="heading-6">2.2 ç«‹å³æ‰§è¡Œï¼ˆ<code>immediate: true</code>ï¼‰</h4>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>watch</code>åªä¼šåœ¨<strong>æºç¬¬ä¸€æ¬¡å˜åŒ–æ—¶</strong>æ‰§è¡Œå›è°ƒã€‚å¦‚æœéœ€è¦<strong>åˆå§‹æŒ‚è½½æ—¶å°±æ‰§è¡Œä¸€æ¬¡</strong>ï¼ˆæ¯”å¦‚åˆå§‹åŒ–æ—¶æ‹‰å–æ•°æ®ï¼‰ï¼Œå¯ä»¥åŠ <code>immediate: true</code>ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { ref, watch } from 'vue'

const keyword = ref('Vue')

// ç«‹å³æ‰§è¡Œï¼šé¡µé¢åŠ è½½æ—¶å…ˆæŸ¥ä¸€æ¬¡â€œVueâ€çš„æœç´¢ç»“æœ
watch(
  keyword,
  async (newKeyword) =&gt; {
    const res = await fetch(`https://api.example.com/search?q=${newKeyword}`)
    const data = await res.json()
    console.log('æœç´¢ç»“æœï¼š', data)
  },
  { immediate: true }
)
&lt;/script&gt;
</code></pre>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šåˆå§‹åŒ–æ—¶æ ¹æ®é»˜è®¤å€¼åŠ è½½æ•°æ®ï¼ˆæ¯”å¦‚æœç´¢é¡µçš„é»˜è®¤å…³é”®è¯ï¼‰ã€‚</p>
<h3 data-id="heading-7">3. watch vs watchEffectï¼šæ ¸å¿ƒå·®å¼‚ä¸é€‰æ‹©</h3>
<details>
<summary>å¾€æœŸæ–‡ç« å½’æ¡£</summary>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F654b9447ef1ba7ec1126a1bc26a4726d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/654b9447ef1ba7ec1126a1bc26a4726d/" ref="nofollow noopener noreferrer">Vueå“åº”å¼å£°æ˜çš„APIå·®å¼‚ã€åº•å±‚åŸç†ä¸å¸¸è§é™·é˜±ä½ éƒ½ææ‡‚äº†å— - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F654b9447ef1ba7ec1126a1bc26a4726d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/654b9447ef1ba7ec1126a1bc26a4726d/" ref="nofollow noopener noreferrer">Vueå“åº”å¼å£°æ˜çš„APIå·®å¼‚ã€åº•å±‚åŸç†ä¸å¸¸è§é™·é˜±ä½ éƒ½ææ‡‚äº†å— - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fc405a8d9950af5b7c63b56c348ac36b6%2F" target="_blank" title="https://blog.cmdragon.cn/posts/c405a8d9950af5b7c63b56c348ac36b6/" ref="nofollow noopener noreferrer">ä¸ºä»€ä¹ˆVue 3éœ€è¦refå‡½æ•°ï¼Ÿå®ƒçš„å“åº”å¼åŸç†ä¸æ­£ç¡®ç”¨æ³•æ˜¯ä»€ä¹ˆï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fa7e9abb9691a81e4404d9facabe0f7c3%2F" target="_blank" title="https://blog.cmdragon.cn/posts/a7e9abb9691a81e4404d9facabe0f7c3/" ref="nofollow noopener noreferrer">Vue 3ä¸­reactiveå‡½æ•°å¦‚ä½•é€šè¿‡Proxyå®ç°å“åº”å¼ï¼Ÿä½¿ç”¨æ—¶è¦é¿å¼€å“ªäº›è¯¯åŒºï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbd995ea45161727597fb85b62566c43d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/bd995ea45161727597fb85b62566c43d/" ref="nofollow noopener noreferrer">Vue3å“åº”å¼ç³»ç»Ÿçš„åº•å±‚åŸç†ä¸å®è·µè¦ç‚¹ä½ çœŸçš„æ‡‚å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F53e3f270a80675df662c6857a3332c0f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/53e3f270a80675df662c6857a3332c0f/" ref="nofollow noopener noreferrer">Vue 3æ¨¡æ¿å¦‚ä½•é€šè¿‡ç¼–è¯‘ä¸‰é˜¶æ®µå®ç°ä»å£°æ˜å¼è¯­æ³•åˆ°é«˜æ•ˆæ¸²æŸ“çš„è·¨è¶Š - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fddbce4f2a23aa72c96b1c0473900321e%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ddbce4f2a23aa72c96b1c0473900321e/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vueæ¨¡æ¿å¼•ç”¨ï¼šä»æ”¶DOMâ€œå¿«é€’â€åˆ°è°ƒå­ç»„ä»¶æ–¹æ³•ï¼Œä½ ç©æ˜ç™½äº†å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F23a2d5a334e15575277814c16e45df50%2F" target="_blank" title="https://blog.cmdragon.cn/posts/23a2d5a334e15575277814c16e45df50/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vueæ¨¡æ¿é‡Œçš„JSè¡¨è¾¾å¼æœ‰å•¥ä¸èƒ½ç¢°ï¼Ÿè®¡ç®—å±æ€§ä¸ºå•¥æ¯”æ–¹æ³•æ›´èƒ½æ‰“ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F6be38de6382e31d282659b689c5b17f0%2F" target="_blank" title="https://blog.cmdragon.cn/posts/6be38de6382e31d282659b689c5b17f0/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vueçš„v-modelè¡¨å•ç»‘å®šï¼šè¯­æ³•ç³–ã€åŠ¨æ€å€¼ã€ä¿®é¥°ç¬¦çš„å°æŠ€å·§ä½ éƒ½æŒæ¡äº†å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F60ce517684f4a418f453d66aa805606c%2F" target="_blank" title="https://blog.cmdragon.cn/posts/60ce517684f4a418f453d66aa805606c/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vue3äº‹ä»¶å¤„ç†çš„æŒ‘æˆ˜é¢˜ï¼šv-onã€ä¿®é¥°ç¬¦ã€è‡ªå®šä¹‰äº‹ä»¶ä½ èƒ½é€šå…³å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fe4ae7d5e4a9205bb11b2baccb230c637%2F" target="_blank" title="https://blog.cmdragon.cn/posts/e4ae7d5e4a9205bb11b2baccb230c637/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vue3çš„v-æŒ‡ä»¤ï¼šæ•°æ®å’ŒDOMçš„â€œç¿»è¯‘å®˜â€åˆ°åº•æœ‰å¤šå°‘æœ¬äº‹ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F999ce4fb32259ff4fbf4bf7bcb851654%2F" target="_blank" title="https://blog.cmdragon.cn/posts/999ce4fb32259ff4fbf4bf7bcb851654/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vue3ï¼Œæ’å€¼ã€åŠ¨æ€ç»‘å®šå’Œé¿å‘æŠ€å·§ä½ éƒ½ææ‡‚äº†å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fa6997d81b49cd232b87e1cf603888ad1%2F" target="_blank" title="https://blog.cmdragon.cn/posts/a6997d81b49cd232b87e1cf603888ad1/" ref="nofollow noopener noreferrer">æƒ³è®©PostgreSQLå¿«åˆ°é£èµ·ï¼Ÿå…ˆæ‰¾å¥åº·å¯†ç è¿˜æ˜¯å…ˆæ¢å¼•æ“ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F1fee7afbb9abd4540b8aa9c141d6845d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/1fee7afbb9abd4540b8aa9c141d6845d/" ref="nofollow noopener noreferrer">æƒ³è®©PostgreSQLæŸ¥è¯¢å¿«åˆ°é£èµ·ï¼Ÿåˆ†åŒºè¡¨ã€ç‰©åŒ–è§†å›¾ã€å¹¶è¡ŒæŸ¥è¯¢è¿™ä¸‰æ‹›çµä¸çµï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F79c590fbd87ece535b11a71c9667884f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/79c590fbd87ece535b11a71c9667884f/" ref="nofollow noopener noreferrer">å­æŸ¥è¯¢æ€»æ‹–æ…¢æŸ¥è¯¢ï¼ŸæŠŠå®ƒå˜æˆè¿æ¥å°±èƒ½è§£å†³ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F748cdac2536008199abf8a8a2cd0ec85%2F" target="_blank" title="https://blog.cmdragon.cn/posts/748cdac2536008199abf8a8a2cd0ec85/" ref="nofollow noopener noreferrer">PostgreSQLå…¨è¡¨æ‰«ææ…¢åˆ°å´©æºƒï¼Ÿå»ºç´¢å¼•+æ”¹æŸ¥è¯¢+æ›´ç»Ÿè®¡ä¿¡æ¯ä¸‰æ‹›èƒ½ç ´ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F32ca943703226d317d4276a8fb53b0dd%2F" target="_blank" title="https://blog.cmdragon.cn/posts/32ca943703226d317d4276a8fb53b0dd/" ref="nofollow noopener noreferrer">å¤æ‚æŸ¥è¯¢æ€»æ‹–åè…¿ï¼ŸPostgreSQLå¤šåˆ—ç´¢å¼•+è¦†ç›–ç´¢å¼•çš„ç¥ä»™æŠ€å·§ä½ getæ²¡ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fca93f1d53aa910e7ba5ffd8df611c12b%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ca93f1d53aa910e7ba5ffd8df611c12b/" ref="nofollow noopener noreferrer">åªç»™è¡¨å­é›†å»ºç´¢å¼•ï¼Ÿç”¨å‡½æ•°ç»“æœå»ºç´¢å¼•ï¼ŸPostgreSQLè¿™ä¿©æ“ä½œå‡­å•¥èƒ½çœç©ºé—´åˆåŠ é€Ÿï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Ff507856ebfddd592448813c510a53669%2F" target="_blank" title="https://blog.cmdragon.cn/posts/f507856ebfddd592448813c510a53669/" ref="nofollow noopener noreferrer">B-treeç´¢å¼•åƒå­—å…¸æŸ¥è¯ä¸€æ ·å·¥ä½œï¼Ÿé‚£å“ªäº›æ•°æ®åº“æŸ¥è¯¢å®ƒèƒ½åŠ é€Ÿï¼Œå“ªäº›ä¸èƒ½ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fb2213bfcb5b88a862f2138404c03d596%2F" target="_blank" title="https://blog.cmdragon.cn/posts/b2213bfcb5b88a862f2138404c03d596/" ref="nofollow noopener noreferrer">æƒ³æŠ“PostgreSQLé‡Œçš„æ…¢SQLï¼Ÿpg_stat_statementsåŸºç¡€é»‘åŒ£å­å’Œpg_stat_monitoræ—¶é—´çª—ï¼Œè°èƒ½å¸®ä½ æ›´å‡†æªå‡ºæ€§èƒ½å°å·ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F26614eb7da6c476dde41d367ad888d2f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/26614eb7da6c476dde41d367ad888d2f/" ref="nofollow noopener noreferrer">PostgreSQLçš„â€œæ—¶å…‰æœºâ€MVCCå’Œé”æœºåˆ¶æ˜¯æ€ä¹ˆæå®šé«˜å¹¶å‘çš„ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F69f99bc6972a860d559c74aad7280da4%2F" target="_blank" title="https://blog.cmdragon.cn/posts/69f99bc6972a860d559c74aad7280da4/" ref="nofollow noopener noreferrer">PostgreSQLæ€§èƒ½æš´æ¶¨çš„å…³é”®ï¼Ÿå†…å­˜IOå¹¶å‘å‚æ•°å±…ç„¶è¦è¿™ä¹ˆè®¾ç½®ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F7b7053f392147a8b3b1a16bebeb08d0a%2F" target="_blank" title="https://blog.cmdragon.cn/posts/7b7053f392147a8b3b1a16bebeb08d0a/" ref="nofollow noopener noreferrer">å¤§è¡¨æŸ¥è¯¢æ…¢åˆ°ç¿»éæ•´ä¸ªä¹¦æ¶ï¼ŸPostgreSQLåˆ†åŒºè¡¨æ•™ä½ æ€ä¹ˆâ€œåˆ†ç±»â€æ‰é«˜æ•ˆ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fc856e3cb073822349f3bf2d29995dcfc%2F" target="_blank" title="https://blog.cmdragon.cn/posts/c856e3cb073822349f3bf2d29995dcfc/" ref="nofollow noopener noreferrer">PostgreSQL æŸ¥è¯¢æ…¢ï¼Ÿæ˜¯ä¸æ˜¯å¿˜äº†ä¼˜åŒ– GROUP BYã€ORDER BY å’Œçª—å£å‡½æ•°ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fc096347d18e67b7431faacd2c4757093%2F" target="_blank" title="https://blog.cmdragon.cn/posts/c096347d18e67b7431faacd2c4757093/" ref="nofollow noopener noreferrer">PostgreSQLé‡Œçš„å­æŸ¥è¯¢å’ŒCTEå±…ç„¶åœ¨æ€§èƒ½ä¸Šâ€œææ¶â€ï¼Ÿåˆ°åº•è¯¥ç«™å“ªè¾¹ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F2eca89463454fd4250d7b66243b9fe5a%2F" target="_blank" title="https://blog.cmdragon.cn/posts/2eca89463454fd4250d7b66243b9fe5a/" ref="nofollow noopener noreferrer">PostgreSQLé€‰Joinç­–ç•¥æœ‰å•¥å°ä¹ä¹ï¼ŸNested Loop/Merge/Hashè°æ˜¯å®ƒçš„èœï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F068ecb772a87d7df20a8c9fb4b233f8e%2F" target="_blank" title="https://blog.cmdragon.cn/posts/068ecb772a87d7df20a8c9fb4b233f8e/" ref="nofollow noopener noreferrer">PostgreSQLæ–°æ‰‹SQLæ€»ç¿»è½¦ï¼Ÿè¿™7ä¸ªæ€§èƒ½é™·é˜±ä½ è¸©è¿‡æ²¡ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fd498f63cd0a2d5a77e445c688a8b88db%2F" target="_blank" title="https://blog.cmdragon.cn/posts/d498f63cd0a2d5a77e445c688a8b88db/" ref="nofollow noopener noreferrer">PostgreSQLç´¢å¼•é€‰B-Treeè¿˜æ˜¯GiSTï¼Ÿâ€œç‘å£«å†›åˆ€â€å’Œâ€œå¤šé¢æ‰‹â€çš„å·®åˆ«ä½ å±…ç„¶è¿˜ä¸çŸ¥é“ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F9101b75bdec6faea9b35d54f14e37f36%2F" target="_blank" title="https://blog.cmdragon.cn/posts/9101b75bdec6faea9b35d54f14e37f36/" ref="nofollow noopener noreferrer">æƒ³çŸ¥é“æ•°æ®åº“æ€ä¹ˆç»™æŸ¥è¯¢â€œç®—æˆæœ¬é€‰è·¯çº¿â€ï¼ŸEXPLAINèƒ½å¸®ä½ çœ‹æ˜ç™½ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fd527f8ebb6e3dae2c7dfe4c8d8979444%2F" target="_blank" title="https://blog.cmdragon.cn/posts/d527f8ebb6e3dae2c7dfe4c8d8979444/" ref="nofollow noopener noreferrer">PostgreSQLå¤„ç†SQLå±…ç„¶åƒåšè›‹ç³•ï¼Ÿè§£æåˆ°æ‰§è¡Œçš„4æ­¥é‡Œè—ç€å¤šå°‘æŸ¥è¯¢ä¼˜åŒ–çš„å°å¿ƒæœºï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F6bfdae84f313cf7ad0bb7045c4392347%2F" target="_blank" title="https://blog.cmdragon.cn/posts/6bfdae84f313cf7ad0bb7045c4392347/" ref="nofollow noopener noreferrer">PostgreSQLå¤‡ä»½ä¸æ˜¯å¤åˆ¶æ–‡ä»¶ï¼Ÿç‰©ç†vsé€»è¾‘å’‹é€‰ï¼Ÿè¯¯åˆ è¿˜èƒ½ç²¾å‡†æ¢å¤åˆ°1åˆ†é’Ÿå‰ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fde3672803de34dbad244d0a8d48b0eb5%2F" target="_blank" title="https://blog.cmdragon.cn/posts/de3672803de34dbad244d0a8d48b0eb5/" ref="nofollow noopener noreferrer">è½¬è´¦ä¸ç¿»è½¦ã€å¹¶å‘ä¸å¹²æ‰°ï¼ŒPostgreSQLçš„ACIDç‰¹æ€§åˆ°åº•æœ‰å•¥é­”æ³•ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fe463e8a2668abdf00a228c9b79324ded%2F" target="_blank" title="https://blog.cmdragon.cn/posts/e463e8a2668abdf00a228c9b79324ded/" ref="nofollow noopener noreferrer">é“¶è¡Œè½¬è´¦ä¸ç™½æ‰£é’±ã€ç”µå•†ä¸‹å•ä¸è¶…å–ï¼ŒPostgreSQLäº‹åŠ¡çš„è¯€çªæ˜¯å•¥ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F5c967e595058c4a1fc4474a68e64031d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/5c967e595058c4a1fc4474a68e64031d/" ref="nofollow noopener noreferrer">PostgreSQLé‡Œçš„PL/pgSQLåˆ°åº•æ˜¯å•¥ï¼Ÿèƒ½è®©SQLä»â€œè¯´ç›®æ ‡â€å˜â€œè®²æ­¥éª¤â€ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F325047855e3e23b5ef82f7d2db134fbd%2F" target="_blank" title="https://blog.cmdragon.cn/posts/325047855e3e23b5ef82f7d2db134fbd/" ref="nofollow noopener noreferrer">PostgreSQLè§†å›¾ä¸å­˜æ•°æ®ï¼Ÿé‚£å®ƒæ€ä¹ˆç®€åŒ–æŸ¥è¯¢è¿˜èƒ½é€’å½’ç”Ÿæˆåºåˆ—å’Œæ§åˆ¶æƒé™ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fd2dba50bb6e4df7b27e735245a06a2a2%2F" target="_blank" title="https://blog.cmdragon.cn/posts/d2dba50bb6e4df7b27e735245a06a2a2/" ref="nofollow noopener noreferrer">PostgreSQLç´¢å¼•è¿™ä¹ˆç©ï¼Œæ‰èƒ½è®©ä½ çš„æŸ¥è¯¢çœŸçš„â€œé£â€èµ·æ¥ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F849ae5bab0f8c66e94c2f6ad1bb798e3%2F" target="_blank" title="https://blog.cmdragon.cn/posts/849ae5bab0f8c66e94c2f6ad1bb798e3/" ref="nofollow noopener noreferrer">PostgreSQLçš„è¡¨å…³ç³»å’Œçº¦æŸï¼Œå’‹å¸®ä½ æå®šç”¨æˆ·è®¢å•ä¸æ··ä¹±ã€å­¦ç”Ÿé€‰è¯¾ä¸é‡å¤ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fef4800975ffa84f1ca51976a70a1585b%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ef4800975ffa84f1ca51976a70a1585b/" ref="nofollow noopener noreferrer">PostgreSQLæŸ¥è¯¢çš„ç­›å­ã€æ’åºã€èšåˆã€åˆ†ç»„ï¼Ÿä½ ä¼šç”¨å®ƒä»¬æå®šæ•°æ®å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbf54711525c507c5eacfa7b0151c39d2%2F" target="_blank" title="https://blog.cmdragon.cn/posts/bf54711525c507c5eacfa7b0151c39d2/" ref="nofollow noopener noreferrer">PostgreSQLæ•°æ®ç±»å‹æ€ä¹ˆé€‰æ‰é«˜æ•ˆä¸è¸©å‘ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F887809b3e0375f5956873cd442f516d8%2F" target="_blank" title="https://blog.cmdragon.cn/posts/887809b3e0375f5956873cd442f516d8/" ref="nofollow noopener noreferrer">æƒ³è§£é”PostgreSQLæŸ¥è¯¢ä»åŸºç¡€åˆ°è¿›é˜¶çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼Ÿä½ éƒ½getäº†å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F934be1203725e8be9d6f6e9104e5abcc%2F" target="_blank" title="https://blog.cmdragon.cn/posts/934be1203725e8be9d6f6e9104e5abcc/" ref="nofollow noopener noreferrer">PostgreSQL DELETEå±…ç„¶æœ‰è¿™äº›æ“ä½œï¼Ÿè¿”å›æ•°æ®ã€è¿è¡¨åˆ ä½ è¯•è¿‡æ²¡ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F0f0622e9b7402b599e618150d0596ffe%2F" target="_blank" title="https://blog.cmdragon.cn/posts/0f0622e9b7402b599e618150d0596ffe/" ref="nofollow noopener noreferrer">PostgreSQL UPDATEè¯­å¥æ€ä¹ˆç©ï¼Ÿä»æ”¹é‚®ç®±åˆ°æ‰¹é‡æ›´æ–°çš„é¿å‘æŠ€å·§ä½ éƒ½ä¼šå—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F0e3bf7efc030b024ea67ee855a00f2de%2F" target="_blank" title="https://blog.cmdragon.cn/posts/0e3bf7efc030b024ea67ee855a00f2de/" ref="nofollow noopener noreferrer">PostgreSQLæ’å…¥æ•°æ®è¿˜åœ¨é€æ¡æ•²ï¼Ÿæ‰¹é‡ã€å†²çªå¤„ç†ã€è¿”å›è‡ªå¢IDçš„æŠ€å·§ä½ ä¼šå—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fb6cd3c86da6aac26ed829e472d34078e%2F" target="_blank" title="https://blog.cmdragon.cn/posts/b6cd3c86da6aac26ed829e472d34078e/" ref="nofollow noopener noreferrer">PostgreSQLçš„â€œä»“åº“-æˆ¿é—´-è´§æ¶â€æ¸¸æˆï¼Œä½ èƒ½å»ºå‡ºç”µå•†æ•°æ®åº“å’Œè¡¨å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fba1f545a3410144552fbdbfcf31b5265%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ba1f545a3410144552fbdbfcf31b5265/" ref="nofollow noopener noreferrer">PostgreSQL 17å®‰è£…æ€»ç¿»è½¦ï¼ŸWindows/macOS/Linuxé¿å‘æŒ‡å—å¸®ä½ æå®šï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fb5474d1480509c5072085abc80b3dd9f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/b5474d1480509c5072085abc80b3dd9f/" ref="nofollow noopener noreferrer">èƒ½å½“å…³ç³»å‹æ•°æ®åº“è¿˜èƒ½ç©å¯¹è±¡ç‰¹æ€§ï¼Œèƒ½æ‹†å¤æ‚æŸ¥è¯¢è¿˜èƒ½è‡ªåŠ¨ç®¡åº“å­˜ï¼ŒPostgreSQLå‡­ä»€ä¹ˆè¿™ä¹ˆé¦™ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fcc098d8836e787baa8a4d92e4d56d5c5%2F" target="_blank" title="https://blog.cmdragon.cn/posts/cc098d8836e787baa8a4d92e4d56d5c5/" ref="nofollow noopener noreferrer">ç»™æ¥å£åŠ æ–°å­—æ®µåˆä¸æå´©è€å®¢æˆ·ç«¯ï¼ŸFastAPIçš„å¤šç‰ˆæœ¬APIé å“ªä¸‰æ‹›å®ç°ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F46d05151c5bd31cf37a7bcf0b8f5b0b8%2F" target="_blank" title="https://blog.cmdragon.cn/posts/46d05151c5bd31cf37a7bcf0b8f5b0b8/" ref="nofollow noopener noreferrer">æµé‡çªå¢è¦æå´©FastAPIï¼Ÿç†”æ–­æµ‹è¯•æ˜¯æ€ä¹ˆé˜²ç³»ç»Ÿé›ªå´©çš„ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F65ce343cc5df9faf3a8e2eeaab42ae45%2F" target="_blank" title="https://blog.cmdragon.cn/posts/65ce343cc5df9faf3a8e2eeaab42ae45/" ref="nofollow noopener noreferrer">FastAPIç§’æ€åº“å­˜æ€»å˜è´Ÿæ•°ï¼ŸRedisåˆ†å¸ƒå¼é”èƒ½å¸®ä½ å®ˆä½åº•çº¿å— - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Feed6cd8985d9be0a4b092a7da38b3e0c%2F" target="_blank" title="https://blog.cmdragon.cn/posts/eed6cd8985d9be0a4b092a7da38b3e0c/" ref="nofollow noopener noreferrer">FastAPIçš„CIæµæ°´çº¿æ€ä¹ˆè‡ªåŠ¨æµ‹ç«¯ç‚¹ï¼Œè¿˜èƒ½è®©AllureæŠ¥å‘Šç¾åˆ°çŠ¯è§„ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F6157d87338ce894d18c013c3c4777abb%2F" target="_blank" title="https://blog.cmdragon.cn/posts/6157d87338ce894d18c013c3c4777abb/" ref="nofollow noopener noreferrer">å¦‚ä½•ç”¨GitHub Actionsä¸ºFastAPIé¡¹ç›®æ‰“é€ è‡ªåŠ¨åŒ–æµ‹è¯•æµæ°´çº¿ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Ffc4ef84559e04693a620d0714cb30787%2F" target="_blank" title="https://blog.cmdragon.cn/posts/fc4ef84559e04693a620d0714cb30787/" ref="nofollow noopener noreferrer">å¦‚ä½•ç”¨Git Hookå’ŒCIæµæ°´çº¿ä¸ºFastAPIé¡¹ç›®ä¿é©¾æŠ¤èˆªï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F02b0c96842d1481c72dab63a149ce0dd%2F" target="_blank" title="https://blog.cmdragon.cn/posts/02b0c96842d1481c72dab63a149ce0dd/" ref="nofollow noopener noreferrer">FastAPIå¦‚ä½•ç”¨å¥‘çº¦æµ‹è¯•ç¡®ä¿APIçš„ã€Œèœå•ã€ä¸ã€Œèœå“ã€ä¸€è‡´ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fc9c1e3bb0fdc15303b9b3b1f20124b0b%2F" target="_blank" title="https://blog.cmdragon.cn/posts/c9c1e3bb0fdc15303b9b3b1f20124b0b/" ref="nofollow noopener noreferrer">ä¸ºä»€ä¹ˆTDDèƒ½è®©ä½ çš„FastAPIå¼€å‘é£èµ·æ¥ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fddbfa0447a5d0d6f9af12e7a6b206f70%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ddbfa0447a5d0d6f9af12e7a6b206f70/" ref="nofollow noopener noreferrer">å¦‚ä½•ç”¨FastAPIç©è½¬å¤šæ¨¡å—æµ‹è¯•ä¸å¼‚æ­¥ä»»åŠ¡ï¼Œè®©ä»£ç ä¸å†â€œé—¹è„¾æ°”â€ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbf9883a75ffa46b523a03b16ec56ce48%2F" target="_blank" title="https://blog.cmdragon.cn/posts/bf9883a75ffa46b523a03b16ec56ce48/" ref="nofollow noopener noreferrer">å¦‚ä½•åœ¨FastAPIä¸­ç©è½¬â€œæ—¶å…‰å€’æµâ€çš„æ•°æ®åº“äº‹åŠ¡å›æ»šæµ‹è¯•ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbe553dbd5d51835d2c69553f4a773e2d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/be553dbd5d51835d2c69553f4a773e2d/" ref="nofollow noopener noreferrer">å¦‚ä½•åœ¨FastAPIä¸­ä¼˜é›…åœ°æ¨¡æ‹Ÿå¤šæ¨¡å—é›†æˆæµ‹è¯•ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F533874f5700b8506d4c68781597db659%2F" target="_blank" title="https://blog.cmdragon.cn/posts/533874f5700b8506d4c68781597db659/" ref="nofollow noopener noreferrer">å¤šç¯å¢ƒé…ç½®åˆ‡æ¢æœºåˆ¶èƒ½å¦è®©å¼€å‘ä¸ç”Ÿäº§æ— ç¼è¡”æ¥ï¼Ÿ - cmdragon's Blog</a></li>
</ul>
</details>
<details>
<summary>å…è´¹å¥½ç”¨çš„çƒ­é—¨åœ¨çº¿å·¥å…·</summary>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fraid-calculator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/raid-calculator" ref="nofollow noopener noreferrer">RAID è®¡ç®—å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fphotoshop-online" target="_blank" title="https://tools.cmdragon.cn/zh/apps/photoshop-online" ref="nofollow noopener noreferrer">åœ¨çº¿PS - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fmermaid-live-editor" target="_blank" title="https://tools.cmdragon.cn/zh/apps/mermaid-live-editor" ref="nofollow noopener noreferrer">Mermaid åœ¨çº¿ç¼–è¾‘å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fmath-solver-calculator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/math-solver-calculator" ref="nofollow noopener noreferrer">æ•°å­¦æ±‚è§£è®¡ç®—å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsmart-teleprompter" target="_blank" title="https://tools.cmdragon.cn/zh/apps/smart-teleprompter" ref="nofollow noopener noreferrer">æ™ºèƒ½æè¯å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fmagic-resume" target="_blank" title="https://tools.cmdragon.cn/zh/apps/magic-resume" ref="nofollow noopener noreferrer">é­”æ³•ç®€å† - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fimage-puzzle-tool" target="_blank" title="https://tools.cmdragon.cn/zh/apps/image-puzzle-tool" ref="nofollow noopener noreferrer">Image Puzzle Tool - å›¾ç‰‡æ‹¼å›¾å·¥å…· | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsubtitle-downloader" target="_blank" title="https://tools.cmdragon.cn/zh/apps/subtitle-downloader" ref="nofollow noopener noreferrer">å­—å¹•ä¸‹è½½å·¥å…· - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Flyrics-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/lyrics-generator" ref="nofollow noopener noreferrer">æ­Œè¯ç”Ÿæˆå·¥å…· - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fcloud-drive-search" target="_blank" title="https://tools.cmdragon.cn/zh/apps/cloud-drive-search" ref="nofollow noopener noreferrer">ç½‘ç›˜èµ„æºèšåˆæœç´¢ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fascii-art-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/ascii-art-generator" ref="nofollow noopener noreferrer">ASCIIå­—ç¬¦ç”»ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fjwt-tool" target="_blank" title="https://tools.cmdragon.cn/zh/apps/jwt-tool" ref="nofollow noopener noreferrer">JSON Web Tokens å·¥å…· - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fbcrypt-tool" target="_blank" title="https://tools.cmdragon.cn/zh/apps/bcrypt-tool" ref="nofollow noopener noreferrer">Bcrypt å¯†ç å·¥å…· - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fgif-composer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/gif-composer" ref="nofollow noopener noreferrer">GIF åˆæˆå™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fgif-decomposer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/gif-decomposer" ref="nofollow noopener noreferrer">GIF åˆ†è§£å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftext-steganography" target="_blank" title="https://tools.cmdragon.cn/zh/apps/text-steganography" ref="nofollow noopener noreferrer">æ–‡æœ¬éšå†™æœ¯ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh" target="_blank" title="https://tools.cmdragon.cn/zh" ref="nofollow noopener noreferrer">CMDragon åœ¨çº¿å·¥å…· - é«˜çº§AIå·¥å…·ç®±ä¸å¼€å‘è€…å¥—ä»¶ | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%3Fcategory%3Dtrending" target="_blank" title="https://tools.cmdragon.cn/zh/apps?category=trending" ref="nofollow noopener noreferrer">åº”ç”¨å•†åº— - å‘ç°1000+æå‡æ•ˆç‡ä¸å¼€å‘çš„AIå·¥å…·å’Œå®ç”¨ç¨‹åº | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fchangelog" target="_blank" title="https://tools.cmdragon.cn/zh/changelog" ref="nofollow noopener noreferrer">CMDragon æ›´æ–°æ—¥å¿— - æœ€æ–°æ›´æ–°ã€åŠŸèƒ½ä¸æ”¹è¿› | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fsponsor" target="_blank" title="https://tools.cmdragon.cn/zh/sponsor" ref="nofollow noopener noreferrer">æ”¯æŒæˆ‘ä»¬ - æˆä¸ºèµåŠ©è€… | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftext-to-image-ai" target="_blank" title="https://tools.cmdragon.cn/zh/apps/text-to-image-ai" ref="nofollow noopener noreferrer">AIæ–‡æœ¬ç”Ÿæˆå›¾åƒ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftemp-email" target="_blank" title="https://tools.cmdragon.cn/zh/apps/temp-email" ref="nofollow noopener noreferrer">ä¸´æ—¶é‚®ç®± - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fqrcode-parser" target="_blank" title="https://tools.cmdragon.cn/zh/apps/qrcode-parser" ref="nofollow noopener noreferrer">äºŒç»´ç è§£æå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftext-to-mindmap" target="_blank" title="https://tools.cmdragon.cn/zh/apps/text-to-mindmap" ref="nofollow noopener noreferrer">æ–‡æœ¬è½¬æ€ç»´å¯¼å›¾ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fregex-visualizer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/regex-visualizer" ref="nofollow noopener noreferrer">æ­£åˆ™è¡¨è¾¾å¼å¯è§†åŒ–å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsteganography-tool" target="_blank" title="https://tools.cmdragon.cn/zh/apps/steganography-tool" ref="nofollow noopener noreferrer">æ–‡ä»¶éšå†™å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fiptv-explorer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/iptv-explorer" ref="nofollow noopener noreferrer">IPTV é¢‘é“æ¢ç´¢å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsnapdrop" target="_blank" title="https://tools.cmdragon.cn/zh/apps/snapdrop" ref="nofollow noopener noreferrer">å¿«ä¼  - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Flucky-draw" target="_blank" title="https://tools.cmdragon.cn/zh/apps/lucky-draw" ref="nofollow noopener noreferrer">éšæœºæŠ½å¥–å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fanime-scene-finder" target="_blank" title="https://tools.cmdragon.cn/zh/apps/anime-scene-finder" ref="nofollow noopener noreferrer">åŠ¨æ¼«åœºæ™¯æŸ¥æ‰¾å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftime-toolkit" target="_blank" title="https://tools.cmdragon.cn/zh/apps/time-toolkit" ref="nofollow noopener noreferrer">æ—¶é—´å·¥å…·ç®± - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fspeed-test" target="_blank" title="https://tools.cmdragon.cn/zh/apps/speed-test" ref="nofollow noopener noreferrer">ç½‘é€Ÿæµ‹è¯• - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fbackground-remover" target="_blank" title="https://tools.cmdragon.cn/zh/apps/background-remover" ref="nofollow noopener noreferrer">AI æ™ºèƒ½æŠ å›¾å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fbackground-replacer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/background-replacer" ref="nofollow noopener noreferrer">èƒŒæ™¯æ›¿æ¢å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fartistic-qrcode" target="_blank" title="https://tools.cmdragon.cn/zh/apps/artistic-qrcode" ref="nofollow noopener noreferrer">è‰ºæœ¯äºŒç»´ç ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fopen-graph-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/open-graph-generator" ref="nofollow noopener noreferrer">Open Graph å…ƒæ ‡ç­¾ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fimage-comparison" target="_blank" title="https://tools.cmdragon.cn/zh/apps/image-comparison" ref="nofollow noopener noreferrer">å›¾åƒå¯¹æ¯”å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fimage-compressor" target="_blank" title="https://tools.cmdragon.cn/zh/apps/image-compressor" ref="nofollow noopener noreferrer">å›¾ç‰‡å‹ç¼©ä¸“ä¸šç‰ˆ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fpassword-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/password-generator" ref="nofollow noopener noreferrer">å¯†ç ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsvg-optimizer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/svg-optimizer" ref="nofollow noopener noreferrer">SVGä¼˜åŒ–å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fcolor-palette" target="_blank" title="https://tools.cmdragon.cn/zh/apps/color-palette" ref="nofollow noopener noreferrer">è°ƒè‰²æ¿ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fonline-metronome" target="_blank" title="https://tools.cmdragon.cn/zh/apps/online-metronome" ref="nofollow noopener noreferrer">åœ¨çº¿èŠ‚æ‹å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fip-geolocation" target="_blank" title="https://tools.cmdragon.cn/zh/apps/ip-geolocation" ref="nofollow noopener noreferrer">IPå½’å±åœ°æŸ¥è¯¢ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fcss-grid-layout" target="_blank" title="https://tools.cmdragon.cn/zh/apps/css-grid-layout" ref="nofollow noopener noreferrer">CSSç½‘æ ¼å¸ƒå±€ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Femail-validator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/email-validator" ref="nofollow noopener noreferrer">é‚®ç®±éªŒè¯å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fcalligraphy-practice" target="_blank" title="https://tools.cmdragon.cn/zh/apps/calligraphy-practice" ref="nofollow noopener noreferrer">ä¹¦æ³•ç»ƒä¹ å­—å¸– - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ffinance-calculator-suite" target="_blank" title="https://tools.cmdragon.cn/zh/apps/finance-calculator-suite" ref="nofollow noopener noreferrer">é‡‘èè®¡ç®—å™¨å¥—ä»¶ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fchinese-kinship-calculator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/chinese-kinship-calculator" ref="nofollow noopener noreferrer">ä¸­å›½äº²æˆšå…³ç³»è®¡ç®—å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fprotobuf-toolkit" target="_blank" title="https://tools.cmdragon.cn/zh/apps/protobuf-toolkit" ref="nofollow noopener noreferrer">Protocol Buffer å·¥å…·ç®± - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fip-geolocation" target="_blank" title="https://tools.cmdragon.cn/zh/apps/ip-geolocation" ref="nofollow noopener noreferrer">IPå½’å±åœ°æŸ¥è¯¢ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fimage-upscaler" target="_blank" title="https://tools.cmdragon.cn/zh/apps/image-upscaler" ref="nofollow noopener noreferrer">å›¾ç‰‡æ— æŸæ”¾å¤§ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftext-compare" target="_blank" title="https://tools.cmdragon.cn/zh/apps/text-compare" ref="nofollow noopener noreferrer">æ–‡æœ¬æ¯”è¾ƒå·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fip-batch-lookup" target="_blank" title="https://tools.cmdragon.cn/zh/apps/ip-batch-lookup" ref="nofollow noopener noreferrer">IPæ‰¹é‡æŸ¥è¯¢å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fdomain-finder" target="_blank" title="https://tools.cmdragon.cn/zh/apps/domain-finder" ref="nofollow noopener noreferrer">åŸŸåæŸ¥è¯¢å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fdns-toolkit" target="_blank" title="https://tools.cmdragon.cn/zh/apps/dns-toolkit" ref="nofollow noopener noreferrer">DNSå·¥å…·ç®± - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ffavicon-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/favicon-generator" ref="nofollow noopener noreferrer">ç½‘ç«™å›¾æ ‡ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fsitemap_index.xml" target="_blank" title="https://tools.cmdragon.cn/sitemap_index.xml" ref="nofollow noopener noreferrer">XML Sitemap</a></li>
</ul>
</details>
Vue 3è¿˜æä¾›äº†`watchEffect`ï¼Œå®ƒå’Œ`watch`çš„æ ¸å¿ƒå·®å¼‚åœ¨äº**ä¾èµ–è·Ÿè¸ªçš„æ–¹å¼**ï¼Œé€‰æ‹©å“ªä¸ªå–å†³äºä½ çš„éœ€æ±‚ï¼š
<h4 data-id="heading-8">3.1 æ ¸å¿ƒå·®å¼‚å¯¹æ¯”</h4>






























<table><thead><tr><th>ç‰¹æ€§</th><th><code>watch</code></th><th><code>watchEffect</code></th></tr></thead><tbody><tr><td>ä¾èµ–è·Ÿè¸ª</td><td>æ‰‹åŠ¨æŒ‡å®šç›‘å¬æºï¼ˆæ˜¾å¼ï¼‰</td><td>è‡ªåŠ¨è·Ÿè¸ªå›è°ƒä¸­ä½¿ç”¨çš„æ‰€æœ‰æºï¼ˆéšå¼ï¼‰</td></tr><tr><td>åˆå§‹æ‰§è¡Œ</td><td>é»˜è®¤ä¸æ‰§è¡Œï¼ˆéœ€<code>immediate</code>ï¼‰</td><td>æŒ‚è½½æ—¶ç«‹å³æ‰§è¡Œä¸€æ¬¡</td></tr><tr><td>æ—§å€¼è·å–</td><td>æ”¯æŒï¼ˆå›è°ƒå‚æ•°æœ‰<code>oldValue</code>ï¼‰</td><td>ä¸æ”¯æŒï¼ˆåªå…³æ³¨å½“å‰å€¼ï¼‰</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>éœ€è¦æ˜ç¡®æ§åˆ¶ç›‘å¬æºã€éœ€è¦æ—§å€¼</td><td>åªéœ€å“åº”ä¾èµ–å˜åŒ–ã€æ— éœ€æ—§å€¼</td></tr></tbody></table>
<h4 data-id="heading-9">3.2 ä»£ç ç¤ºä¾‹å¯¹æ¯”</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { ref, watch, watchEffect } from 'vue'

const count = ref(0)
const message = ref('Hello')

// ä½¿ç”¨watchï¼šæ˜¾å¼ç›‘å¬count
watch(count, (newVal, oldVal) =&gt; {
  console.log(`countä» ${oldVal} å˜åˆ° ${newVal}`)
})

// ä½¿ç”¨watchEffectï¼šè‡ªåŠ¨è·Ÿè¸ªcountå’Œmessage
watchEffect(() =&gt; {
  console.log(`å½“å‰countï¼š${count.value}ï¼Œmessageï¼š${message.value}`)
})
&lt;/script&gt;
</code></pre>
<p><strong>æ‰§è¡Œç»“æœ</strong>ï¼š</p>
<ul>
<li>é¡µé¢åŠ è½½æ—¶ï¼Œ<code>watchEffect</code>ç«‹å³æ‰§è¡Œï¼Œè¾“å‡º<code>å½“å‰countï¼š0ï¼Œmessageï¼šHello</code>ï¼›</li>
<li>ç‚¹å‡»æŒ‰é’®ä¿®æ”¹<code>count</code>ï¼Œ<code>watch</code>å’Œ<code>watchEffect</code>éƒ½ä¼šè§¦å‘ï¼›</li>
<li>ä¿®æ”¹<code>message</code>ï¼Œåªæœ‰<code>watchEffect</code>è§¦å‘ï¼ˆå› ä¸ºå®ƒè‡ªåŠ¨è·Ÿè¸ªäº†<code>message</code>ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-10">4. å®è·µä¸­çš„åº”ç”¨åœºæ™¯</h3>
<p>ä¾¦å¬å™¨çš„ä»·å€¼åœ¨äº<strong>å°†â€œæ•°æ®å˜åŒ–â€ä¸â€œå‰¯ä½œç”¨â€è§£è€¦</strong>ï¼Œä»¥ä¸‹æ˜¯å‡ ä¸ªå¸¸è§çš„å®é™…åœºæ™¯ï¼š</p>
<h4 data-id="heading-11">4.1 æ•°æ®å˜åŒ–æ—¶å‘èµ·ç½‘ç»œè¯·æ±‚</h4>
<p>æ¯”å¦‚ç”¨æˆ·é€‰æ‹©åŸå¸‚åï¼Œè‡ªåŠ¨åŠ è½½è¯¥åŸå¸‚çš„å¤©æ°”ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { ref, watch } from 'vue'

const city = ref('åŒ—äº¬')
const weather = ref('')

// ç›‘å¬cityå˜åŒ–ï¼ŒåŠ è½½å¤©æ°”
watch(city, async (newCity) =&gt; {
  const res = await fetch(`https://api.example.com/weather?city=${newCity}`)
  const data = await res.json()
  weather.value = data.weather
})
&lt;/script&gt;

&lt;template&gt;
  &lt;select v-model="city"&gt;
    &lt;option value="åŒ—äº¬"&gt;åŒ—äº¬&lt;/option&gt;
    &lt;option value="ä¸Šæµ·"&gt;ä¸Šæµ·&lt;/option&gt;
    &lt;option value="å¹¿å·"&gt;å¹¿å·&lt;/option&gt;
  &lt;/select&gt;
  &lt;p&gt;å½“å‰å¤©æ°”ï¼š{{ weather }}&lt;/p&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-12">4.2 è¡¨å•è¾“å…¥çš„å®æ—¶éªŒè¯</h4>
<p>æ¯”å¦‚æ³¨å†Œé¡µçš„å¯†ç å¼ºåº¦æ ¡éªŒï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { ref, watch } from 'vue'

const password = ref('')
const passwordError = ref('')

// å®æ—¶éªŒè¯å¯†ç å¼ºåº¦
watch(password, (newPwd) =&gt; {
  if (newPwd.length &lt; 6) {
    passwordError.value = 'å¯†ç å¿…é¡»è‡³å°‘6ä½'
  } else if (!/[A-Z]/.test(newPwd)) {
    passwordError.value = 'å¯†ç å¿…é¡»åŒ…å«å¤§å†™å­—æ¯'
  } else {
    passwordError.value = ''
  }
})
&lt;/script&gt;

&lt;template&gt;
  &lt;input type="password" v-model="password" placeholder="è¾“å…¥å¯†ç " /&gt;
  &lt;p class="error" v-if="passwordError"&gt;{{ passwordError }}&lt;/p&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-13">5. è¯¾åQuiz</h3>
<p>é€šè¿‡ä»¥ä¸‹é—®é¢˜å·©å›ºæ‰€å­¦çŸ¥è¯†ï¼ˆç­”æ¡ˆåŸºäºVueå®˜ç½‘æ–‡æ¡£ï¼‰ï¼š</p>
<h4 data-id="heading-14">é—®é¢˜1ï¼šå¦‚ä½•ç›‘å¬reactiveå¯¹è±¡ä¸­çš„åµŒå¥—å±æ€§ï¼ˆå¦‚<code>state.user.address.city</code>ï¼‰ï¼Ÿè¯·å†™å‡ºä»£ç ç¤ºä¾‹ã€‚</h4>
<p><strong>ç­”æ¡ˆ</strong>ï¼šä½¿ç”¨getterå‡½æ•°è¿”å›åµŒå¥—å±æ€§ï¼ˆæ˜¾å¼æŒ‡å®šç›‘å¬æºï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">user</span>: {
    <span class="hljs-attr">address</span>: {
      <span class="hljs-attr">city</span>: <span class="hljs-string">'Beijing'</span>
    }
  }
})

<span class="hljs-comment">// æ­£ç¡®å†™æ³•ï¼šç”¨getterè¿”å›åµŒå¥—å±æ€§</span>
<span class="hljs-title function_">watch</span>(
  <span class="hljs-function">() =&gt;</span> state.<span class="hljs-property">user</span>.<span class="hljs-property">address</span>.<span class="hljs-property">city</span>,
  <span class="hljs-function">(<span class="hljs-params">newCity, oldCity</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`åŸå¸‚ä» <span class="hljs-subst">${oldCity}</span> æ”¹ä¸º <span class="hljs-subst">${newCity}</span>`</span>)
  }
)
</code></pre>
<p><strong>é”™è¯¯å†™æ³•</strong>ï¼šç›´æ¥å†™<code>state.user.address.city</code>ï¼ˆä¼šä¸¢å¤±å“åº”å¼è·Ÿè¸ªï¼‰ã€‚</p>
<h4 data-id="heading-15">é—®é¢˜2ï¼š<code>watch</code>å’Œ<code>watchEffect</code>çš„æ ¸å¿ƒåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿè¯·åˆ—ä¸¾ä¸¤ç‚¹ã€‚</h4>
<p><strong>ç­”æ¡ˆ</strong>ï¼š</p>
<ol>
<li><strong>ä¾èµ–è·Ÿè¸ªæ–¹å¼</strong>ï¼š<code>watch</code>éœ€è¦æ‰‹åŠ¨æŒ‡å®šç›‘å¬æºï¼ˆæ˜¾å¼ï¼‰ï¼Œ<code>watchEffect</code>è‡ªåŠ¨è·Ÿè¸ªå›è°ƒä¸­ä½¿ç”¨çš„æ‰€æœ‰æºï¼ˆéšå¼ï¼‰ï¼›</li>
<li><strong>åˆå§‹æ‰§è¡Œæ—¶æœº</strong>ï¼š<code>watch</code>é»˜è®¤ä¸æ‰§è¡Œï¼ˆéœ€<code>immediate</code>é€‰é¡¹ï¼‰ï¼Œ<code>watchEffect</code>æŒ‚è½½æ—¶ç«‹å³æ‰§è¡Œä¸€æ¬¡ã€‚</li>
</ol>
<h3 data-id="heading-16">6. å¸¸è§æŠ¥é”™ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-17">æŠ¥é”™1ï¼šç›‘å¬reactiveå¯¹è±¡æ—¶ï¼Œæ—§å€¼ä¸æ–°å€¼ç›¸åŒ</h4>
<p><strong>ç°è±¡</strong>ï¼šä¿®æ”¹<code>reactive</code>å¯¹è±¡çš„å±æ€§åï¼Œ<code>watch</code>å›è°ƒä¸­çš„<code>oldValue</code>å’Œ<code>newValue</code>å®Œå…¨ä¸€æ ·ã€‚<br/>
<strong>åŸå› </strong>ï¼š<code>reactive</code>è¿”å›çš„æ˜¯<strong>ä»£ç†å¯¹è±¡</strong>ï¼Œä¿®æ”¹å±æ€§ä¸ä¼šæ”¹å˜å¯¹è±¡çš„å¼•ç”¨ï¼Œå› æ­¤<code>oldValue</code>å’Œ<code>newValue</code>æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚<br/>
<strong>è§£å†³æ–¹æ³•</strong>ï¼š</p>
<ul>
<li>è‹¥éœ€ç›‘å¬å•ä¸ªå±æ€§ï¼Œç”¨<code>getter</code>å‡½æ•°è¿”å›å±æ€§ï¼ˆå¦‚<code>() =&gt; state.count</code>ï¼‰ï¼Œæ­¤æ—¶<code>oldValue</code>ä¼šæ˜¯åŸå§‹å€¼ï¼›</li>
<li>è‹¥éœ€ç›‘å¬æ•´ä¸ªå¯¹è±¡ï¼Œæ‰‹åŠ¨ä¿å­˜æ—§å€¼ï¼ˆé€‚ç”¨äºç®€å•åœºæ™¯ï¼‰ï¼š
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> })
<span class="hljs-keyword">let</span> oldCount = state.<span class="hljs-property">count</span> <span class="hljs-comment">// æ‰‹åŠ¨ä¿å­˜æ—§å€¼</span>

<span class="hljs-title function_">watch</span>(
  <span class="hljs-function">() =&gt;</span> state.<span class="hljs-property">count</span>,
  <span class="hljs-function">(<span class="hljs-params">newCount</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ—§å€¼ï¼š<span class="hljs-subst">${oldCount}</span>ï¼Œæ–°å€¼ï¼š<span class="hljs-subst">${newCount}</span>`</span>)
    oldCount = newCount <span class="hljs-comment">// æ›´æ–°æ—§å€¼</span>
  }
)
</code></pre>
</li>
</ul>
<h4 data-id="heading-18">æŠ¥é”™2ï¼šæ·±åº¦ç›‘å¬ä¸ç”Ÿæ•ˆ</h4>
<p><strong>ç°è±¡</strong>ï¼šä¿®æ”¹<code>reactive</code>å¯¹è±¡çš„åµŒå¥—å±æ€§ï¼Œ<code>watch</code>å›è°ƒä¸è§¦å‘ã€‚<br/>
<strong>åŸå› </strong>ï¼šæœªå¼€å¯<code>deep: true</code>é€‰é¡¹ï¼Œ<code>watch</code>é»˜è®¤åªè·Ÿè¸ªå¯¹è±¡çš„<strong>å¼•ç”¨å˜åŒ–</strong>ï¼Œä¸è·Ÿè¸ªåµŒå¥—å±æ€§ã€‚<br/>
<strong>è§£å†³æ–¹æ³•</strong>ï¼šåœ¨<code>watch</code>çš„é€‰é¡¹ä¸­æ·»åŠ <code>deep: true</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">watch</span>(
  <span class="hljs-function">() =&gt;</span> state.<span class="hljs-property">user</span>,
  <span class="hljs-function">(<span class="hljs-params">newUser, oldUser</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç”¨æˆ·ä¿¡æ¯æ›´æ–°ï¼š'</span>, newUser)
  },
  { <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span> } <span class="hljs-comment">// å¿…é¡»åŠ ï¼</span>
)
</code></pre>
<h4 data-id="heading-19">æŠ¥é”™3ï¼š<code>immediate: true</code>æ—¶æ—§å€¼ä¸º<code>undefined</code></h4>
<p><strong>ç°è±¡</strong>ï¼šå¼€å¯<code>immediate</code>åï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œå›è°ƒæ—¶<code>oldValue</code>æ˜¯<code>undefined</code>ã€‚<br/>
<strong>åŸå› </strong>ï¼š<code>immediate</code>è®©å›è°ƒåœ¨<strong>æŒ‚è½½æ—¶ç«‹å³æ‰§è¡Œ</strong>ï¼Œæ­¤æ—¶è¿˜æ²¡æœ‰â€œæ—§å€¼â€ï¼ˆç¬¬ä¸€æ¬¡æ‰§è¡Œï¼‰ã€‚<br/>
<strong>è§£å†³æ–¹æ³•</strong>ï¼š</p>
<ul>
<li>è‹¥ä¸éœ€è¦æ—§å€¼ï¼Œå¿½ç•¥å³å¯ï¼›</li>
<li>è‹¥éœ€è¦åˆå§‹å€¼ï¼Œæ‰‹åŠ¨å¤„ç†ï¼ˆæ¯”å¦‚ç”¨<code>ref</code>ä¿å­˜åˆå§‹å€¼ï¼‰ï¼š
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> keyword = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'Vue'</span>)
<span class="hljs-keyword">const</span> initialKeyword = keyword.<span class="hljs-property">value</span> <span class="hljs-comment">// ä¿å­˜åˆå§‹å€¼</span>

<span class="hljs-title function_">watch</span>(
  keyword,
  <span class="hljs-function">(<span class="hljs-params">newKeyword, oldKeyword</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (oldKeyword === <span class="hljs-literal">undefined</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`åˆå§‹å…³é”®è¯ï¼š<span class="hljs-subst">${initialKeyword}</span>`</span>)
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å…³é”®è¯ä» <span class="hljs-subst">${oldKeyword}</span> æ”¹ä¸º <span class="hljs-subst">${newKeyword}</span>`</span>)
    }
  },
  { <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span> }
)
</code></pre>
</li>
</ul>
<h3 data-id="heading-20">å‚è€ƒé“¾æ¥</h3>
<ul>
<li>Vueå®˜ç½‘ï¼šä¾¦å¬å™¨åŸºç¡€ â†’ <a href="https://link.juejin.cn?target=https%3A%2F%2Fvuejs.org%2Fguide%2Fessentials%2Fwatchers.html" target="_blank" title="https://vuejs.org/guide/essentials/watchers.html" ref="nofollow noopener noreferrer">vuejs.org/guide/essenâ€¦</a></li>
<li>Vueå®˜ç½‘ï¼š<code>watch</code> vs <code>watchEffect</code> â†’ <a href="https://link.juejin.cn?target=https%3A%2F%2Fvuejs.org%2Fguide%2Fessentials%2Fwatchers.html%23watcheffect" target="_blank" title="https://vuejs.org/guide/essentials/watchers.html#watcheffect" ref="nofollow noopener noreferrer">vuejs.org/guide/essenâ€¦</a></li>
<li>Vueå®˜ç½‘ï¼šä¾¦å¬å™¨é€‰é¡¹ â†’ <a href="https://link.juejin.cn?target=https%3A%2F%2Fvuejs.org%2Fguide%2Fessentials%2Fwatchers.html%23watcher-options" target="_blank" title="https://vuejs.org/guide/essentials/watchers.html#watcher-options" ref="nofollow noopener noreferrer">vuejs.org/guide/essenâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Xcode å¸¸ç”¨ä½¿ç”¨æŠ€å·§è¯´æ˜ï¼Œæ€»æœ‰ä¸€ä¸ªå¸®åŠ©ä½ ]]></title>    <link>https://juejin.cn/post/7570491473033969673</link>    <guid>https://juejin.cn/post/7570491473033969673</guid>    <pubDate>2025-11-10T04:57:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570491473033969673" data-draft-id="7570491473033953289" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Xcode å¸¸ç”¨ä½¿ç”¨æŠ€å·§è¯´æ˜ï¼Œæ€»æœ‰ä¸€ä¸ªå¸®åŠ©ä½ "/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-10T04:57:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="1024å°ç¥"/> <meta itemprop="url" content="https://juejin.cn/user/70007368988926"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Xcode å¸¸ç”¨ä½¿ç”¨æŠ€å·§è¯´æ˜ï¼Œæ€»æœ‰ä¸€ä¸ªå¸®åŠ©ä½ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/70007368988926/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    1024å°ç¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T04:57:36.000Z" title="Mon Nov 10 2025 04:57:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘çš„å¼€æºé¡¹ç›®PakePluså¯ä»¥å°†ç½‘é¡µ/Vue/Reacté¡¹ç›®æ‰“åŒ…ä¸ºæ¡Œé¢/æ‰‹æœºåº”ç”¨å¹¶ä¸”å°äº5Måªéœ€å‡ åˆ†é’Ÿï¼Œå®˜ç½‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpakeplus.com" target="_blank" title="https://pakeplus.com" ref="nofollow noopener noreferrer">pakeplus.com</a></p><p><img alt="" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eebb6e6a31cf41929a15ad1293866a12~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp" width="1200" loading="lazy"/></p><p/>
<h3 id="user-content-1-command--click-è·³æºç option--click-æ˜¾ç¤ºå¸®åŠ©" data-id="heading-0">1.Â <code>Command + Click</code>Â è·³æºç </h3>
<p>å¯ä»¥å•ç‹¬åœ¨settingé‡Œé¢è®¾ç½®ï¼š</p>
<p class="img-center"><img alt="" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7ba47293ecca45c484031a54ff757a58~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp" width="1200" loading="lazy"/></p>
<p><code>Option + Click</code>Â æ˜¾ç¤ºå¸®åŠ©ï¼š</p>
<p><img alt="" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/16fceb3fb0864c4584a0e70a5f33967e~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp" width="1200" loading="lazy"/></p>
<p>Control + Click å¯ä»¥æŸ¥çœ‹è¿™ä¸ªæ–¹æ³•è°ƒç”¨è€…åœ¨å“ªé‡Œï¼šÂ </p>
<p><img alt="" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fcc8b08a019d4982bb1f4bb6cb244bd6~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp" width="1200" loading="lazy"/></p>
<h3 id="user-content-2-command--enter-æ˜¾ç¤ºä»£ç æç¤º" data-id="heading-1">2.Â <code>Command + Enter</code>Â æ˜¾ç¤ºä»£ç æç¤º</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æœç´¢æ¡†æœç´¢è¯¥å¿«æ·æ–¹å¼ï¼Œæ›¿æ¢å¹¶æŒ‰ä¸‹å¿«æ·é”® `Command + Enter"ï¼Œå¦‚æœæœ‰å¿«æ·é”®å†²çªï¼Œéœ€è¦è§£å†³å†²çª</span>
Show Code Actions
</code></pre>
<p class="img-center"><img alt="" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e49c6aa1f82c4297b9d930b35e17f2dc~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp" width="1200" loading="lazy"/></p>
<h3 id="user-content-3-shift--backspace-åˆ é™¤å½“å‰è¡Œ" data-id="heading-2">3.Â <code>shift + BackSpace</code>Â åˆ é™¤å½“å‰è¡Œ</h3>
<pre><code class="hljs language-scss" lang="scss">Delete Line
</code></pre>
<h3 id="user-content-4-shift--enter-æ¢è¡Œ" data-id="heading-3">4.Â <code>shift + Enter</code>Â æ¢è¡Œ</h3>
<p>ç¼–è¾‘æ–‡ä»¶ï¼Œæ·»åŠ ä¸‹é¢å‡ è¡Œï¼Œç”¨äºæ·»åŠ å¿«æ·æŒ‡ä»¤</p>
<pre><code class="hljs language-css" lang="css">sudo vim /Applications/Xcode<span class="hljs-selector-class">.app</span>/Contents/Frameworks/IDEKit<span class="hljs-selector-class">.framework</span>/Versions/<span class="hljs-selector-tag">A</span>/Resources/IDETextKeyBindingSet<span class="hljs-selector-class">.plist</span>
</code></pre>
<p>æ–°å¢å†…å®¹</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">plist</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">"-//Apple//DTD PLIST 1.0//EN"</span> <span class="hljs-string">"http://www.apple.com/DTDs/PropertyList-1.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">plist</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"1.0"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dict</span>&gt;</span>
<span class="hljs-comment">&lt;!-- å¼€å§‹ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>My Custom<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dict</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>insert new line below<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>moveToEndOfLine:, insertNewline:<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dict</span>&gt;</span>
<span class="hljs-comment">&lt;!-- ç»“æŸ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>Cancellation<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dict</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>Cancel<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>cancelOperation:<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dict</span>&gt;</span>
</code></pre>
<p>é‡æ–°æ‰“å¼€ xcodeï¼Œæ–°å¢ä¸‹é¢çš„å¿«æ·é”®</p>
<pre><code class="hljs language-arduino" lang="arduino">insert <span class="hljs-keyword">new</span> line below
</code></pre>
<h3 id="user-content-5-option--command--p-åˆ·æ–°-preview" data-id="heading-4">5.Â <code>option + command + p</code>Â åˆ·æ–° preview</h3>
<h3 id="user-content-6-option--command--l-ä»£ç æ ¼å¼åŒ–" data-id="heading-5">6.Â ä»£ç æ ¼å¼åŒ–</h3>
<p>å®‰è£… SwiftFormat for Xcode æ’ä»¶ï¼Œå…·ä½“æ•™ç¨‹ï¼š<a data-link-desc="æ–‡ç« æµè§ˆé˜…è¯»564æ¬¡ï¼Œç‚¹èµ13æ¬¡ï¼Œæ”¶è—8æ¬¡ã€‚å®‰è£…ååœ¨Xcodeçš„Editorèœå•æ‰¾ä¸åˆ°SwfitFormaté€‰é¡¹ï¼Œå¯ä»¥å°è¯•æ‰“å¼€SwfitFormat for Xcodeè½¯ä»¶ï¼Œç„¶åå†åœ¨è®¾ç½®é‡Œå®‰å…¨ä¸éšç§é€‰ä¸­Xcodeçš„è¿™ä¸ªæ’ä»¶ï¼Œç„¶åé‡å¯Xcodeå°è¯•ï¼Œæˆ‘å°±æ˜¯å› ä¸ºå®‰è£…SwfitFormat for Xcodeåæ²¡æœ‰æ‰“å¼€è¿‡ï¼Œç›´æ¥åœ¨å®‰å…¨ä¸éšç§é‡Œé¢æ‰¾ä¸åˆ°Xcodeçš„é€‰é¡¹ï¼Œæ‰€ä»¥å°±æ²¡æœ‰ç”Ÿæ•ˆï¼Œè®°å¾—è¿™ä¸€æ­¥ä¸€å®šè¦åšï¼æ‰“å¼€è®¾ç½® &gt; éšç§ä¸å®‰å…¨æ€§ &gt; é€‰æ‹©Xcode Sourde Editor &gt;" data-link-icon="https://g.csdnimg.cn/static/logo/favicon32.ico" data-link-title="Xcodeä»£ç æ ¼å¼åŒ–SwiftFormatå®‰è£…ä½¿ç”¨ï¼Œä»¥åŠä¸ç”Ÿæ•ˆé—®é¢˜-CSDNåšå®¢" href="https://link.juejin.cn?target=https%3A%2F%2Fxiaoshen.blog.csdn.net%2Farticle%2Fdetails%2F138999042" title="https://xiaoshen.blog.csdn.net/article/details/138999042" target="_blank" ref="nofollow noopener noreferrer">Xcodeä»£ç æ ¼å¼åŒ–SwiftFormatå®‰è£…ä½¿ç”¨ï¼Œä»¥åŠä¸ç”Ÿæ•ˆé—®é¢˜-CSDNåšå®¢</a></p>
<pre><code class="hljs language-arduino" lang="arduino">Format <span class="hljs-built_in">File</span>
</code></pre>
<h3 id="user-content-7-é‡æ„ä¸‹çš„é‡å‘½å-shift--f6" data-id="heading-6">7. é‡æ„ä¸‹çš„é‡å‘½åÂ <code>shift + F6</code></h3>
<pre><code class="hljs">Rename
</code></pre>
<h3 id="user-content-8-å¤šé€‰-ctrl--g" data-id="heading-7">8. å¤šé€‰Â <code>Ctrl + G</code></h3>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">Select</span> <span class="hljs-keyword">Next</span> Occurence
</code></pre>
<h3 id="user-content-9-æŸ¥æ‰¾æ–‡ä»¶-command--shift--o" data-id="heading-8">9. æŸ¥æ‰¾æ–‡ä»¶Â <code>Command + shift + O</code></h3>
<h3 id="user-content-10-æ‰“å¼€åº“-command-shift--l" data-id="heading-9">10. æ‰“å¼€åº“Â <code>Command +shift + L</code></h3>
<h3 id="user-content-11-åˆ›å»º-snippets" data-id="heading-10">11. åˆ›å»º snippets</h3>
<p>åœ¨ç¼–è¾‘å™¨ä¸­å†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> &lt;#variable#&gt; = &lt;#<span class="hljs-keyword">val</span>#&gt;
</code></pre>
<p>é¼ æ ‡é€‰ä¸­è¯¥æ®µä»£ç ï¼Œå³é”®ä¿å­˜ä¸º snippetsï¼š</p>
<p class="img-center"><img alt="" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b58d84d569194461a80d5c31a09a303b~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp" width="1200" loading="lazy"/></p>
<h3 data-id="heading-11"/>
<h3 id="user-content-12-ç¼–è¾‘å™¨ä»£ç å¯æŠ˜å " data-id="heading-12">12. ç¼–è¾‘å™¨ä»£ç å¯æŠ˜å </h3>
<p>ä¸‹é¢çš„code structure when scrollingä¹Ÿæ˜¯æ§åˆ¶æŠ˜å çš„</p>
<p class="img-center"><img alt="" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b5a679837bfb43589f65d402d9e4e157~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp" width="1200" loading="lazy"/></p>
<h3 data-id="heading-13"/>
<h3 id="user-content-13-å…³é—­æ„å»ºæˆåŠŸæç¤º" data-id="heading-14">13. å…³é—­æ„å»ºæˆåŠŸæç¤º</h3>
<p class="img-center"><img alt="" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8083bae0a3ff498e90d539b93e14ced9~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp" width="1200" loading="lazy"/></p>
å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯1024å°ç¥ï¼ŒæŠ€æœ¯ç¾¤ / ç§æ´»ç¾¤ / è‚¡ç¥¨ç¾¤ æˆ– äº¤æœ‹å‹ éƒ½å¯ä»¥ç§ä¿¡æˆ‘ã€‚
å¦‚æœä½ è§‰å¾—æœ¬æ–‡æœ‰ç”¨ï¼Œä¸€é”®ä¸‰è¿ (ç‚¹èµã€è¯„è®ºã€å…³æ³¨)ï¼Œå°±æ˜¯å¯¹æˆ‘æœ€å¤§çš„æ”¯æŒ~</div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Service Worker æ·±åº¦è§£æï¼šè®©ä½ çš„ Web åº”ç”¨ç¦»çº¿ä¹Ÿèƒ½é£]]></title>    <link>https://juejin.cn/post/7570191839594692671</link>    <guid>https://juejin.cn/post/7570191839594692671</guid>    <pubDate>2025-11-10T03:58:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570191839594692671" data-draft-id="7570008954044317730" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Service Worker æ·±åº¦è§£æï¼šè®©ä½ çš„ Web åº”ç”¨ç¦»çº¿ä¹Ÿèƒ½é£"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2025-11-10T03:58:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯å˜¿èµ·"/> <meta itemprop="url" content="https://juejin.cn/user/2076315267907197"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Service Worker æ·±åº¦è§£æï¼šè®©ä½ çš„ Web åº”ç”¨ç¦»çº¿ä¹Ÿèƒ½é£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2076315267907197/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯å˜¿èµ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T03:58:56.000Z" title="Mon Nov 10 2025 03:58:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç°ä»£ Web å¼€å‘ä¸­ï¼Œç”¨æˆ·ä½“éªŒå·²ç»æˆä¸ºäº†è¡¡é‡ä¸€ä¸ªåº”ç”¨æˆåŠŸä¸å¦çš„é‡è¦æ ‡å‡†ã€‚ç”¨æˆ·ä¸ä»…å¸Œæœ›ç½‘ç«™åŠ è½½é€Ÿåº¦å¿«ï¼Œè¿˜å¸Œæœ›å³ä½¿åœ¨ç½‘ç»œä¸ç¨³å®šæˆ–å®Œå…¨æ–­ç½‘çš„æƒ…å†µä¸‹ä¹Ÿèƒ½æ­£å¸¸ä½¿ç”¨åº”ç”¨ã€‚è¿™å°±å¼•å‡ºäº†æˆ‘ä»¬ä»Šå¤©çš„ä¸»è§’â€”â€”Service Workerã€‚</p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>Service Worker æ˜¯ä¸€ç§åœ¨æµè§ˆå™¨åå°è¿è¡Œçš„è„šæœ¬ï¼Œå®ƒç‹¬ç«‹äºç½‘é¡µä¸»çº¿ç¨‹ï¼Œå¯ä»¥æ‹¦æˆªç½‘ç»œè¯·æ±‚ã€ç¼“å­˜èµ„æºï¼Œç”šè‡³åœ¨ç¦»çº¿çŠ¶æ€ä¸‹ä¹Ÿèƒ½æä¾›å®Œæ•´çš„ç”¨æˆ·ä½“éªŒã€‚å®ƒæ˜¯å®ç° PWAï¼ˆæ¸è¿›å¼ Web åº”ç”¨ï¼‰çš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ï¼Œä¸º Web åº”ç”¨å¸¦æ¥äº†åŸç”Ÿåº”ç”¨èˆ¬çš„ç¦»çº¿èƒ½åŠ›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e55818b63a042d4af75d0c5cf2a0039~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5Zi_6LW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763351936&amp;x-signature=TEDI1CLw6QyGTc2YQSlG2RG%2BIJg%3D" alt="" loading="lazy"/></p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä»åŸºç¡€æ¦‚å¿µå¼€å§‹ï¼Œé€æ­¥æ·±å…¥æ¢è®¨ Service Worker çš„å·¥ä½œæœºåˆ¶ã€ç”Ÿå‘½å‘¨æœŸã€å®é™…åº”ç”¨ä»¥åŠæœ€ä½³å®è·µã€‚æ— è®ºä½ æ˜¯åˆšåˆšæ¥è§¦å‰ç«¯å¼€å‘çš„æ–°æ‰‹ï¼Œè¿˜æ˜¯å¸Œæœ›æ·±å…¥äº†è§£ Service Worker çš„èµ„æ·±å¼€å‘è€…ï¼Œç›¸ä¿¡è¿™ç¯‡æ–‡ç« éƒ½èƒ½ä¸ºä½ å¸¦æ¥æœ‰ä»·å€¼çš„å‚è€ƒã€‚</p>
<h2 data-id="heading-1">ä»€ä¹ˆæ˜¯ Service Workerï¼Ÿ</h2>
<p>Service Worker æ˜¯ä¸€ç§ç‰¹æ®Šçš„ JavaScript è„šæœ¬ï¼Œå®ƒè¿è¡Œåœ¨æµè§ˆå™¨åå°ï¼Œç‹¬ç«‹äºç½‘é¡µä¸»çº¿ç¨‹ã€‚å®ƒå°±åƒæ˜¯æµè§ˆå™¨å’Œç½‘ç»œä¹‹é—´çš„ä¸€ä¸ªä»£ç†ï¼Œå¯ä»¥æ‹¦æˆªç½‘ç»œè¯·æ±‚ã€ç¼“å­˜èµ„æºï¼Œç”šè‡³åœ¨æ²¡æœ‰ç½‘ç»œè¿æ¥çš„æƒ…å†µä¸‹ä¹Ÿèƒ½æä¾›å®Œæ•´çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<h3 data-id="heading-2">Service Worker çš„æ ¸å¿ƒç‰¹æ€§</h3>
<ol>
<li><strong>ç‹¬ç«‹è¿è¡Œ</strong>ï¼šService Worker è¿è¡Œåœ¨ç‹¬ç«‹çš„çº¿ç¨‹ä¸­ï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹</li>
<li><strong>ç½‘ç»œä»£ç†</strong>ï¼šå¯ä»¥æ‹¦æˆªç½‘ç»œè¯·æ±‚å¹¶è‡ªå®šä¹‰å“åº”</li>
<li><strong>ç¦»çº¿æ”¯æŒ</strong>ï¼šé€šè¿‡ç¼“å­˜æœºåˆ¶å®ç°ç¦»çº¿è®¿é—®</li>
<li><strong>åå°åŒæ­¥</strong>ï¼šæ”¯æŒåå°æ•°æ®åŒæ­¥åŠŸèƒ½</li>
<li><strong>æ¨é€é€šçŸ¥</strong>ï¼šå¯ä»¥æ¥æ”¶å’Œå¤„ç†æ¨é€é€šçŸ¥</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b973ebc1629045b69268d36ff037ea4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5Zi_6LW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763351936&amp;x-signature=1dIk0%2FKLsOYa69MDO5TQtKYMAQM%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">Service Worker ä¸å…¶ä»–æŠ€æœ¯çš„å¯¹æ¯”</h3>
<p>ä¸ä¼ ç»Ÿçš„æµè§ˆå™¨ç¼“å­˜æœºåˆ¶ç›¸æ¯”ï¼ŒService Worker æä¾›äº†æ›´å¼ºå¤§å’Œçµæ´»çš„ç¼“å­˜æ§åˆ¶èƒ½åŠ›ã€‚ä¼ ç»Ÿçš„æµè§ˆå™¨ç¼“å­˜ä¾èµ–äº HTTP å¤´éƒ¨è®¾ç½®ï¼Œè€Œ Service Worker å…è®¸å¼€å‘è€…å®Œå…¨æ§åˆ¶ç¼“å­˜ç­–ç•¥ã€‚</p>
<p>ä¸ AppCache ç›¸æ¯”ï¼ŒService Worker è§£å†³äº† AppCache çš„è®¸å¤šé—®é¢˜ï¼Œå¦‚ç¼“å­˜æ›´æ–°å›°éš¾ã€æ— æ³•è‡ªå®šä¹‰ç¼“å­˜ç­–ç•¥ç­‰ã€‚AppCache å·²ç»è¢«æ ‡è®°ä¸ºåºŸå¼ƒï¼ŒService Worker æ˜¯å…¶æ¨èçš„æ›¿ä»£æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-4">Service Worker çš„ç”Ÿå‘½å‘¨æœŸ</h2>
<p>ç†è§£ Service Worker çš„ç”Ÿå‘½å‘¨æœŸå¯¹äºæ­£ç¡®ä½¿ç”¨å®ƒè‡³å…³é‡è¦ã€‚Service Worker çš„ç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬æ³¨å†Œã€å®‰è£…ã€æ¿€æ´»å’Œæ›´æ–°ç­‰é˜¶æ®µã€‚</p>
<h3 data-id="heading-5">æ³¨å†Œ Service Worker</h3>
<p>è¦ä½¿ç”¨ Service Workerï¼Œé¦–å…ˆéœ€è¦åœ¨ä¸»é¡µé¢ä¸­æ³¨å†Œå®ƒï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span> (<span class="hljs-string">'serviceWorker'</span> <span class="hljs-keyword">in</span> navigator) {
  navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-title function_">register</span>(<span class="hljs-string">'/sw.js'</span>)
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">registration</span> =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Service Worker æ³¨å†ŒæˆåŠŸ:'</span>, registration);
    })
    .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Service Worker æ³¨å†Œå¤±è´¥:'</span>, error);
    });
}
</code></pre>
<p>æ³¨å†Œæ—¶å¯ä»¥æŒ‡å®šä½œç”¨åŸŸï¼Œé™åˆ¶ Service Worker æ§åˆ¶çš„é¡µé¢èŒƒå›´ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-title function_">register</span>(<span class="hljs-string">'/sw.js'</span>, {
  <span class="hljs-attr">scope</span>: <span class="hljs-string">'/app/'</span>
}).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">registration</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Service Worker ä½œç”¨åŸŸ:'</span>, registration.<span class="hljs-property">scope</span>);
});
</code></pre>
<h3 data-id="heading-6">å®‰è£…é˜¶æ®µ</h3>
<p>å½“ Service Worker æ–‡ä»¶é¦–æ¬¡ä¸‹è½½åï¼Œä¼šè§¦å‘å®‰è£…äº‹ä»¶ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘ä»¬é€šå¸¸ä¼šç¼“å­˜åº”ç”¨çš„æ ¸å¿ƒèµ„æºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'install'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Service Worker å®‰è£…ä¸­...'</span>);
  
  event.<span class="hljs-title function_">waitUntil</span>(
    caches.<span class="hljs-title function_">open</span>(<span class="hljs-string">'my-app-v1'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cache</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> cache.<span class="hljs-title function_">addAll</span>([
        <span class="hljs-string">'/'</span>,
        <span class="hljs-string">'/index.html'</span>,
        <span class="hljs-string">'/styles/main.css'</span>,
        <span class="hljs-string">'/scripts/main.js'</span>,
        <span class="hljs-string">'/images/logo.png'</span>
      ]);
    })
  );
});
</code></pre>
<p>åœ¨å®‰è£…é˜¶æ®µï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ol>
<li>åªèƒ½ç¼“å­˜åŒæºèµ„æºæˆ–å·²é…ç½® CORS çš„è·¨åŸŸèµ„æº</li>
<li>ç¼“å­˜æ“ä½œæ˜¯åŸå­æ€§çš„ï¼Œå¦‚æœä»»ä½•ä¸€ä¸ªèµ„æºç¼“å­˜å¤±è´¥ï¼Œæ•´ä¸ªæ“ä½œéƒ½ä¼šå¤±è´¥</li>
<li>å¯ä»¥ä½¿ç”¨ <code>skipWaiting()</code> æ–¹æ³•å¼ºåˆ¶è·³è¿‡ç­‰å¾…çŠ¶æ€</li>
</ol>
<h3 data-id="heading-7">æ¿€æ´»é˜¶æ®µ</h3>
<p>å®‰è£…å®Œæˆåï¼ŒService Worker ä¼šè¿›å…¥æ¿€æ´»é˜¶æ®µã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘ä»¬å¯ä»¥æ¸…ç†æ—§ç‰ˆæœ¬çš„ç¼“å­˜ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'activate'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Service Worker æ¿€æ´»ä¸­...'</span>);
  
  event.<span class="hljs-title function_">waitUntil</span>(
    caches.<span class="hljs-title function_">keys</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cacheNames</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(
        cacheNames.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">name</span> =&gt;</span> {
          <span class="hljs-comment">// è¿”å›éœ€è¦åˆ é™¤çš„ç¼“å­˜åç§°</span>
          <span class="hljs-keyword">return</span> name !== <span class="hljs-string">'my-app-v1'</span>;
        }).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">name</span> =&gt;</span> {
          <span class="hljs-comment">// åˆ é™¤æ—§ç¼“å­˜</span>
          <span class="hljs-keyword">return</span> caches.<span class="hljs-title function_">delete</span>(name);
        })
      );
    })
  );
});
</code></pre>
<p>æ¿€æ´»é˜¶æ®µçš„æœ€ä½³å®è·µï¼š</p>
<ol>
<li>æ¸…ç†ä¸å†éœ€è¦çš„æ—§ç¼“å­˜</li>
<li>é¿å…åœ¨æ¿€æ´»é˜¶æ®µæ‰§è¡Œè€—æ—¶æ“ä½œ</li>
<li>å¯ä»¥ä½¿ç”¨ <code>clients.claim()</code> æ–¹æ³•æ§åˆ¶æœªå—æ§åˆ¶çš„å®¢æˆ·ç«¯</li>
</ol>
<h3 data-id="heading-8">æ›´æ–°æœºåˆ¶</h3>
<p>å½“ Service Worker æ–‡ä»¶å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæµè§ˆå™¨ä¼šä¸‹è½½æ–°ç‰ˆæœ¬å¹¶è§¦å‘æ›´æ–°æµç¨‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'install'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–°ç‰ˆæœ¬å®‰è£…ä¸­...'</span>);
  <span class="hljs-comment">// å¼ºåˆ¶è·³è¿‡ç­‰å¾…çŠ¶æ€ï¼Œç«‹å³æ¿€æ´»æ–°ç‰ˆæœ¬</span>
  self.<span class="hljs-title function_">skipWaiting</span>();
});

self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'activate'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–°ç‰ˆæœ¬æ¿€æ´»ä¸­...'</span>);
  <span class="hljs-comment">// ç«‹å³æ§åˆ¶æ‰€æœ‰å®¢æˆ·ç«¯</span>
  event.<span class="hljs-title function_">waitUntil</span>(self.<span class="hljs-property">clients</span>.<span class="hljs-title function_">claim</span>());
});
</code></pre>
<p>ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£ Service Worker çš„ç”Ÿå‘½å‘¨æœŸå’Œè¯·æ±‚å¤„ç†æµç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥å‚è€ƒä»¥ä¸‹å›¾è¡¨ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f98863e02ea4d2f9adaf43c55ce5a1c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5Zi_6LW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763351936&amp;x-signature=ocLy01IwdSfUbAtHeaszV8PEcBg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">Service Worker API è¯¦è§£</h2>
<h3 data-id="heading-10">Cache API</h3>
<p>Cache API æ˜¯ Service Worker çš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼Œç”¨äºå­˜å‚¨å’Œæ£€ç´¢ç½‘ç»œè¯·æ±‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ‰“å¼€ç¼“å­˜</span>
caches.<span class="hljs-title function_">open</span>(<span class="hljs-string">'my-cache'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cache</span> =&gt;</span> {
  <span class="hljs-comment">// æ·»åŠ å•ä¸ªèµ„æºåˆ°ç¼“å­˜</span>
  cache.<span class="hljs-title function_">put</span>(request, response);
  
  <span class="hljs-comment">// æ·»åŠ å¤šä¸ªèµ„æºåˆ°ç¼“å­˜</span>
  cache.<span class="hljs-title function_">addAll</span>([request1, request2]);
  
  <span class="hljs-comment">// åŒ¹é…ç¼“å­˜ä¸­çš„èµ„æº</span>
  cache.<span class="hljs-title function_">match</span>(request).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
    <span class="hljs-comment">// å¤„ç†å“åº”</span>
  });
  
  <span class="hljs-comment">// åˆ é™¤ç¼“å­˜ä¸­çš„èµ„æº</span>
  cache.<span class="hljs-title function_">delete</span>(request);
});
</code></pre>
<h3 data-id="heading-11">Fetch API</h3>
<p>Fetch API å…è®¸ Service Worker æ‹¦æˆªå’Œå¤„ç†ç½‘ç»œè¯·æ±‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> request = event.<span class="hljs-property">request</span>;
  
  <span class="hljs-comment">// å…‹éš†è¯·æ±‚ä»¥é¿å…æ¶ˆè´¹åŸå§‹è¯·æ±‚</span>
  <span class="hljs-keyword">const</span> clonedRequest = request.<span class="hljs-title function_">clone</span>();
  
  <span class="hljs-comment">// è‡ªå®šä¹‰è¯·æ±‚å¤„ç†é€»è¾‘</span>
  event.<span class="hljs-title function_">respondWith</span>(
    caches.<span class="hljs-title function_">match</span>(request).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cachedResponse</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (cachedResponse) {
        <span class="hljs-keyword">return</span> cachedResponse;
      }
      
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(clonedRequest).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
        <span class="hljs-comment">// å¤„ç†ç½‘ç»œå“åº”</span>
        <span class="hljs-keyword">return</span> response;
      });
    })
  );
});
</code></pre>
<h3 data-id="heading-12">Background Sync API</h3>
<p>Background Sync API å…è®¸åœ¨è¿æ¥æ¢å¤æ—¶åŒæ­¥æ•°æ®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ³¨å†Œåå°åŒæ­¥</span>
navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-property">ready</span>.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">registration</span> =&gt;</span> {
  registration.<span class="hljs-property">sync</span>.<span class="hljs-title function_">register</span>(<span class="hljs-string">'sync-data'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åå°åŒæ­¥å·²æ³¨å†Œ'</span>);
  });
});

<span class="hljs-comment">// å¤„ç†åŒæ­¥äº‹ä»¶</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'sync'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (event.<span class="hljs-property">tag</span> === <span class="hljs-string">'sync-data'</span>) {
    event.<span class="hljs-title function_">waitUntil</span>(<span class="hljs-title function_">syncData</span>());
  }
});

<span class="hljs-keyword">function</span> <span class="hljs-title function_">syncData</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// æ‰§è¡Œæ•°æ®åŒæ­¥é€»è¾‘</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/sync'</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
    <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-title function_">getPendingData</span>())
  });
}
</code></pre>
<h3 data-id="heading-13">Push API</h3>
<p>Push API å…è®¸æ¥æ”¶æœåŠ¡å™¨æ¨é€çš„é€šçŸ¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è¯·æ±‚æ¨é€æƒé™</span>
<span class="hljs-title class_">Notification</span>.<span class="hljs-title function_">requestPermission</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">permission</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (permission === <span class="hljs-string">'granted'</span>) {
    <span class="hljs-comment">// è®¢é˜…æ¨é€æœåŠ¡</span>
    navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-property">ready</span>.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">registration</span> =&gt;</span> {
      registration.<span class="hljs-property">pushManager</span>.<span class="hljs-title function_">subscribe</span>({
        <span class="hljs-attr">userVisibleOnly</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">applicationServerKey</span>: <span class="hljs-title function_">urlBase64ToUint8Array</span>(<span class="hljs-string">'your-public-key'</span>)
      }).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">subscription</span> =&gt;</span> {
        <span class="hljs-comment">// å‘é€è®¢é˜…ä¿¡æ¯åˆ°æœåŠ¡å™¨</span>
        <span class="hljs-title function_">sendSubscriptionToServer</span>(subscription);
      });
    });
  }
});

<span class="hljs-comment">// å¤„ç†æ¨é€æ¶ˆæ¯</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'push'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> data = event.<span class="hljs-property">data</span>.<span class="hljs-title function_">json</span>();
  
  event.<span class="hljs-title function_">waitUntil</span>(
    self.<span class="hljs-property">registration</span>.<span class="hljs-title function_">showNotification</span>(data.<span class="hljs-property">title</span>, {
      <span class="hljs-attr">body</span>: data.<span class="hljs-property">body</span>,
      <span class="hljs-attr">icon</span>: data.<span class="hljs-property">icon</span>,
      <span class="hljs-attr">tag</span>: data.<span class="hljs-property">tag</span>
    })
  );
});
</code></pre>
<h2 data-id="heading-14">å®é™…åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-15">ç¦»çº¿é¡µé¢</h3>
<p>é€šè¿‡ Service Workerï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºç”¨æˆ·æä¾›ç¦»çº¿æ—¶çš„å‹å¥½æç¤ºé¡µé¢ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  event.<span class="hljs-title function_">respondWith</span>(
    <span class="hljs-title function_">fetch</span>(event.<span class="hljs-property">request</span>).<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// å¦‚æœç½‘ç»œè¯·æ±‚å¤±è´¥ï¼Œè¿”å›ç¦»çº¿é¡µé¢</span>
      <span class="hljs-keyword">if</span> (event.<span class="hljs-property">request</span>.<span class="hljs-property">mode</span> === <span class="hljs-string">'navigate'</span>) {
        <span class="hljs-keyword">return</span> caches.<span class="hljs-title function_">match</span>(<span class="hljs-string">'/offline.html'</span>);
      }
      
      <span class="hljs-comment">// å¯¹äºå…¶ä»–èµ„æºï¼Œè¿”å›ç›¸åº”çš„å ä½ç¬¦</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(...);
    })
  );
});
</code></pre>
<h3 data-id="heading-16">ç¼“å­˜ç­–ç•¥</h3>
<p>ä¸åŒçš„èµ„æºå¯èƒ½éœ€è¦ä¸åŒçš„ç¼“å­˜ç­–ç•¥ï¼š</p>
<ol>
<li><strong>Cache First</strong>ï¼šä¼˜å…ˆä½¿ç”¨ç¼“å­˜ï¼Œé€‚åˆé™æ€èµ„æº</li>
<li><strong>Network First</strong>ï¼šä¼˜å…ˆä½¿ç”¨ç½‘ç»œï¼Œé€‚åˆéœ€è¦å®æ—¶æ›´æ–°çš„å†…å®¹</li>
<li><strong>Stale While Revalidate</strong>ï¼šä½¿ç”¨ç¼“å­˜çš„åŒæ—¶åœ¨åå°æ›´æ–°</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Cache First ç­–ç•¥</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  event.<span class="hljs-title function_">respondWith</span>(
    caches.<span class="hljs-title function_">match</span>(event.<span class="hljs-property">request</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> response || <span class="hljs-title function_">fetch</span>(event.<span class="hljs-property">request</span>);
    })
  );
});

<span class="hljs-comment">// Network First ç­–ç•¥</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  event.<span class="hljs-title function_">respondWith</span>(
    <span class="hljs-title function_">fetch</span>(event.<span class="hljs-property">request</span>).<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">return</span> caches.<span class="hljs-title function_">match</span>(event.<span class="hljs-property">request</span>);
    })
  );
});

<span class="hljs-comment">// Stale While Revalidate ç­–ç•¥</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  event.<span class="hljs-title function_">respondWith</span>(
    caches.<span class="hljs-title function_">open</span>(<span class="hljs-string">'my-cache'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cache</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> cache.<span class="hljs-title function_">match</span>(event.<span class="hljs-property">request</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
        <span class="hljs-keyword">const</span> fetchPromise = <span class="hljs-title function_">fetch</span>(event.<span class="hljs-property">request</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">networkResponse</span> =&gt;</span> {
          cache.<span class="hljs-title function_">put</span>(event.<span class="hljs-property">request</span>, networkResponse.<span class="hljs-title function_">clone</span>());
          <span class="hljs-keyword">return</span> networkResponse;
        });
        
        <span class="hljs-keyword">return</span> response || fetchPromise;
      });
    })
  );
});
</code></pre>
<h3 data-id="heading-17">åŠ¨æ€ç¼“å­˜</h3>
<p>å¯¹äºåŠ¨æ€å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°æ™ºèƒ½ç¼“å­˜ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> request = event.<span class="hljs-property">request</span>;
  
  <span class="hljs-comment">// å¯¹äº API è¯·æ±‚ï¼Œä½¿ç”¨ Network First ç­–ç•¥</span>
  <span class="hljs-keyword">if</span> (request.<span class="hljs-property">url</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'/api/'</span>)) {
    event.<span class="hljs-title function_">respondWith</span>(
      <span class="hljs-title function_">fetch</span>(request).<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">return</span> caches.<span class="hljs-title function_">match</span>(request);
      })
    );
    <span class="hljs-keyword">return</span>;
  }
  
  <span class="hljs-comment">// å¯¹äºé™æ€èµ„æºï¼Œä½¿ç”¨ Cache First ç­–ç•¥</span>
  event.<span class="hljs-title function_">respondWith</span>(
    caches.<span class="hljs-title function_">match</span>(request).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> response || <span class="hljs-title function_">fetch</span>(request);
    })
  );
});
</code></pre>
<h2 data-id="heading-18">æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-19">ç‰ˆæœ¬ç®¡ç†</h3>
<p>åˆç†çš„ç‰ˆæœ¬ç®¡ç†å¯ä»¥é¿å…ç¼“å­˜é—®é¢˜ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CACHE_NAME</span> = <span class="hljs-string">'my-app-v1.0.0'</span>;
<span class="hljs-keyword">const</span> urlsToCache = [
  <span class="hljs-string">'/'</span>,
  <span class="hljs-string">'/styles/main.css'</span>,
  <span class="hljs-string">'/scripts/main.js'</span>
];

self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'install'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  event.<span class="hljs-title function_">waitUntil</span>(
    caches.<span class="hljs-title function_">open</span>(<span class="hljs-variable constant_">CACHE_NAME</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cache</span> =&gt;</span> cache.<span class="hljs-title function_">addAll</span>(urlsToCache))
  );
});
</code></pre>
<h3 data-id="heading-20">é”™è¯¯å¤„ç†</h3>
<p>å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶å¯ä»¥æå‡ç”¨æˆ·ä½“éªŒï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  event.<span class="hljs-title function_">respondWith</span>(
    <span class="hljs-title function_">fetch</span>(event.<span class="hljs-property">request</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
        <span class="hljs-comment">// æ£€æŸ¥å“åº”æ˜¯å¦æœ‰æ•ˆ</span>
        <span class="hljs-keyword">if</span> (!response || response.<span class="hljs-property">status</span> !== <span class="hljs-number">200</span> || !response.<span class="hljs-property">ok</span>) {
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Invalid response'</span>);
        }
        <span class="hljs-keyword">return</span> response;
      })
      .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
        <span class="hljs-comment">// è¿”å›ç¼“å­˜çš„å“åº”æˆ–é”™è¯¯é¡µé¢</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Fetch failed:'</span>, error);
        <span class="hljs-keyword">return</span> caches.<span class="hljs-title function_">match</span>(event.<span class="hljs-property">request</span>) || caches.<span class="hljs-title function_">match</span>(<span class="hljs-string">'/error.html'</span>);
      })
  );
});
</code></pre>
<h3 data-id="heading-21">æ€§èƒ½ä¼˜åŒ–</h3>
<ol>
<li>é¢„ç¼“å­˜å…³é”®èµ„æº</li>
<li>åˆç†è®¾ç½®ç¼“å­˜è¿‡æœŸæ—¶é—´</li>
<li>åŠæ—¶æ¸…ç†æ— ç”¨ç¼“å­˜</li>
<li>é¿å…ç¼“å­˜è¿‡å¤šæ•°æ®</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é™åˆ¶ç¼“å­˜å¤§å°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">limitCacheSize</span>(<span class="hljs-params">cacheName, maxItems</span>) {
  caches.<span class="hljs-title function_">open</span>(cacheName).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cache</span> =&gt;</span> {
    cache.<span class="hljs-title function_">keys</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">keys</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (keys.<span class="hljs-property">length</span> &gt; maxItems) {
        cache.<span class="hljs-title function_">delete</span>(keys[<span class="hljs-number">0</span>]).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-title function_">limitCacheSize</span>(cacheName, maxItems);
        });
      }
    });
  });
}
</code></pre>
<h3 data-id="heading-22">å®‰å…¨è€ƒè™‘</h3>
<ol>
<li>Service Worker åªèƒ½åœ¨ HTTPS ç¯å¢ƒä¸‹è¿è¡Œ</li>
<li>é¿å…ç¼“å­˜æ•æ„Ÿæ•°æ®</li>
<li>éªŒè¯æ‰€æœ‰ç½‘ç»œå“åº”</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// éªŒè¯å“åº”å®‰å…¨æ€§</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">isResponseSafe</span>(<span class="hljs-params">response</span>) {
  <span class="hljs-comment">// æ£€æŸ¥å†…å®¹ç±»å‹</span>
  <span class="hljs-keyword">const</span> contentType = response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'content-type'</span>);
  <span class="hljs-keyword">if</span> (!contentType || !contentType.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'application/json'</span>)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-comment">// æ£€æŸ¥å“åº”æ¥æº</span>
  <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">url</span>.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'https://'</span>)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
</code></pre>
<h2 data-id="heading-23">è°ƒè¯•æŠ€å·§</h2>
<p>è°ƒè¯• Service Worker å¯èƒ½ä¼šæœ‰äº›å›°éš¾ï¼Œä½†æŒæ¡ä¸€äº›æŠ€å·§å¯ä»¥è®©å·¥ä½œå˜å¾—è½»æ¾ï¼š</p>
<ol>
<li>ä½¿ç”¨ Chrome DevTools çš„ Application é¢æ¿</li>
<li>æŸ¥çœ‹ Service Worker çš„çŠ¶æ€å’Œæ—¥å¿—</li>
<li>ä½¿ç”¨ <code>skipWaiting()</code> å¼ºåˆ¶æ¿€æ´»æ–°çš„ Service Worker</li>
<li>æ¸…é™¤ç¼“å­˜å’Œ Service Worker æ•°æ®è¿›è¡Œæµ‹è¯•</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨å¼€å‘ç¯å¢ƒä¸­å¼ºåˆ¶æ›´æ–° Service Worker</span>
<span class="hljs-keyword">if</span> (<span class="hljs-string">'serviceWorker'</span> <span class="hljs-keyword">in</span> navigator) {
  navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-title function_">getRegistrations</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">registrations</span> =&gt;</span> {
    registrations.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">registration</span> =&gt;</span> {
      registration.<span class="hljs-title function_">unregister</span>();
    });
  });
}
</code></pre>
<h2 data-id="heading-24">å…¼å®¹æ€§è€ƒè™‘</h2>
<p>è™½ç„¶ç°ä»£æµè§ˆå™¨å¯¹ Service Worker çš„æ”¯æŒå·²ç»ç›¸å½“å®Œå–„ï¼Œä½†åœ¨å®é™…å¼€å‘ä¸­ä»éœ€è€ƒè™‘ï¼š</p>
<ol>
<li>æ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒ Service Worker</li>
<li>ä¸ºä¸æ”¯æŒçš„æµè§ˆå™¨æä¾›é™çº§æ–¹æ¡ˆ</li>
<li>ç¡®ä¿åº”ç”¨åœ¨æ²¡æœ‰ Service Worker çš„æƒ…å†µä¸‹ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œ</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ£€æµ‹ Service Worker æ”¯æŒ</span>
<span class="hljs-keyword">if</span> (<span class="hljs-string">'serviceWorker'</span> <span class="hljs-keyword">in</span> navigator) {
  <span class="hljs-comment">// æ”¯æŒ Service Worker</span>
  navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-title function_">register</span>(<span class="hljs-string">'/sw.js'</span>);
} <span class="hljs-keyword">else</span> {
  <span class="hljs-comment">// ä¸æ”¯æŒ Service Workerï¼Œæä¾›é™çº§æ–¹æ¡ˆ</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Service Worker ä¸å—æ”¯æŒ'</span>);
}
</code></pre>
<h2 data-id="heading-25">å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-26">ç¼“å­˜æ›´æ–°é—®é¢˜</h3>
<p>é—®é¢˜ï¼šç”¨æˆ·æ— æ³•è·å–æœ€æ–°çš„èµ„æº
è§£å†³æ–¹æ¡ˆï¼šå®ç°åˆç†çš„ç¼“å­˜æ›´æ–°ç­–ç•¥</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®ç°ç¼“å­˜ç‰ˆæœ¬æ§åˆ¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CACHE_VERSION</span> = <span class="hljs-string">'v1.0.0'</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CACHE_NAME</span> = <span class="hljs-string">`my-app-<span class="hljs-subst">${CACHE_VERSION}</span>`</span>;

self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'activate'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  event.<span class="hljs-title function_">waitUntil</span>(
    caches.<span class="hljs-title function_">keys</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cacheNames</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(
        cacheNames.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">name</span> =&gt;</span> {
          <span class="hljs-keyword">return</span> name !== <span class="hljs-variable constant_">CACHE_NAME</span>;
        }).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">name</span> =&gt;</span> {
          <span class="hljs-keyword">return</span> caches.<span class="hljs-title function_">delete</span>(name);
        })
      );
    })
  );
});
</code></pre>
<h3 data-id="heading-27">è·¨åŸŸèµ„æºç¼“å­˜</h3>
<p>é—®é¢˜ï¼šæ— æ³•ç¼“å­˜è·¨åŸŸèµ„æº
è§£å†³æ–¹æ¡ˆï¼šç¡®ä¿æœåŠ¡å™¨é…ç½®äº†æ­£ç¡®çš„ CORS å¤´éƒ¨</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¤„ç†è·¨åŸŸèµ„æº</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> request = event.<span class="hljs-property">request</span>;
  
  <span class="hljs-keyword">if</span> (request.<span class="hljs-property">url</span>.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'https://api.example.com'</span>)) {
    event.<span class="hljs-title function_">respondWith</span>(
      <span class="hljs-title function_">fetch</span>(request, {
        <span class="hljs-attr">mode</span>: <span class="hljs-string">'cors'</span>,
        <span class="hljs-attr">credentials</span>: <span class="hljs-string">'omit'</span>
      }).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
        <span class="hljs-comment">// ç¼“å­˜å“åº”</span>
        <span class="hljs-keyword">return</span> caches.<span class="hljs-title function_">open</span>(<span class="hljs-string">'api-cache'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cache</span> =&gt;</span> {
          cache.<span class="hljs-title function_">put</span>(request, response.<span class="hljs-title function_">clone</span>());
          <span class="hljs-keyword">return</span> response;
        });
      }).<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// è¿”å›ç¼“å­˜çš„å“åº”</span>
        <span class="hljs-keyword">return</span> caches.<span class="hljs-title function_">match</span>(request);
      })
    );
  }
});
</code></pre>
<h2 data-id="heading-28">æµ‹è¯•ç­–ç•¥</h2>
<h3 data-id="heading-29">å•å…ƒæµ‹è¯•</h3>
<p>ä¸º Service Worker ç¼–å†™å•å…ƒæµ‹è¯•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨ Jest æµ‹è¯• Service Worker åŠŸèƒ½</span>
<span class="hljs-title function_">describe</span>(<span class="hljs-string">'Service Worker'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// è®¾ç½®æµ‹è¯•ç¯å¢ƒ</span>
  });
  
  <span class="hljs-title function_">test</span>(<span class="hljs-string">'åº”è¯¥ç¼“å­˜æ ¸å¿ƒèµ„æº'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-comment">// æµ‹è¯•ç¼“å­˜åŠŸèƒ½</span>
  });
  
  <span class="hljs-title function_">test</span>(<span class="hljs-string">'åº”è¯¥æ­£ç¡®å¤„ç†ç½‘ç»œè¯·æ±‚'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-comment">// æµ‹è¯•è¯·æ±‚å¤„ç†åŠŸèƒ½</span>
  });
});
</code></pre>
<h3 data-id="heading-30">ç«¯åˆ°ç«¯æµ‹è¯•</h3>
<p>ä½¿ç”¨å·¥å…·è¿›è¡Œç«¯åˆ°ç«¯æµ‹è¯•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨ Puppeteer æµ‹è¯•ç¦»çº¿åŠŸèƒ½</span>
<span class="hljs-keyword">const</span> puppeteer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'puppeteer'</span>);

(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> browser = <span class="hljs-keyword">await</span> puppeteer.<span class="hljs-title function_">launch</span>();
  <span class="hljs-keyword">const</span> page = <span class="hljs-keyword">await</span> browser.<span class="hljs-title function_">newPage</span>();
  
  <span class="hljs-comment">// è®¿é—®åº”ç”¨å¹¶ç­‰å¾… Service Worker æ¿€æ´»</span>
  <span class="hljs-keyword">await</span> page.<span class="hljs-title function_">goto</span>(<span class="hljs-string">'http://localhost:3000'</span>);
  <span class="hljs-keyword">await</span> page.evaluate(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">return</span> navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-property">ready</span>;
  });
  
  <span class="hljs-comment">// æ¨¡æ‹Ÿç¦»çº¿ç¯å¢ƒ</span>
  <span class="hljs-keyword">await</span> page.<span class="hljs-title function_">setOfflineMode</span>(<span class="hljs-literal">true</span>);
  
  <span class="hljs-comment">// æµ‹è¯•ç¦»çº¿è®¿é—®</span>
  <span class="hljs-keyword">await</span> page.<span class="hljs-title function_">reload</span>();
  
  <span class="hljs-keyword">await</span> browser.<span class="hljs-title function_">close</span>();
})();
</code></pre>
<h2 data-id="heading-31">é¡¹ç›®æ¡ˆä¾‹åˆ†æ</h2>
<h3 data-id="heading-32">ç”µå•†ç½‘ç«™çš„ç¦»çº¿è´­ç‰©è½¦</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®ç°ç¦»çº¿è´­ç‰©è½¦åŠŸèƒ½</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> request = event.<span class="hljs-property">request</span>;
  
  <span class="hljs-comment">// å¤„ç†è´­ç‰©è½¦ API è¯·æ±‚</span>
  <span class="hljs-keyword">if</span> (request.<span class="hljs-property">url</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'/api/cart'</span>)) {
    event.<span class="hljs-title function_">respondWith</span>(
      <span class="hljs-title function_">fetch</span>(request).<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// ç¦»çº¿æ—¶è¿”å›æœ¬åœ°å­˜å‚¨çš„æ•°æ®</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-title function_">getLocalCart</span>()), {
          <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> }
        });
      })
    );
  }
});

<span class="hljs-comment">// åŒæ­¥ç¦»çº¿æ“ä½œ</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'sync'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (event.<span class="hljs-property">tag</span> === <span class="hljs-string">'sync-cart'</span>) {
    event.<span class="hljs-title function_">waitUntil</span>(<span class="hljs-title function_">syncCart</span>());
  }
});
</code></pre>
<h3 data-id="heading-33">å†…å®¹ç®¡ç†ç³»ç»Ÿçš„ç¦»çº¿ç¼–è¾‘</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®ç°ç¦»çº¿å†…å®¹ç¼–è¾‘</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> request = event.<span class="hljs-property">request</span>;
  
  <span class="hljs-comment">// å¤„ç†å†…å®¹ä¿å­˜è¯·æ±‚</span>
  <span class="hljs-keyword">if</span> (request.<span class="hljs-property">url</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'/api/content'</span>) &amp;&amp; request.<span class="hljs-property">method</span> === <span class="hljs-string">'POST'</span>) {
    event.<span class="hljs-title function_">respondWith</span>(
      <span class="hljs-title function_">fetch</span>(request).<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// ç¦»çº¿æ—¶ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨</span>
        <span class="hljs-title function_">saveLocalContent</span>(request);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">offline</span>: <span class="hljs-literal">true</span> }), {
          <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> }
        });
      })
    );
  }
});
</code></pre>
<h2 data-id="heading-34">æ€§èƒ½ç›‘æ§å’Œåˆ†æ</h2>
<h3 data-id="heading-35">ç›‘æ§ç¼“å­˜å‘½ä¸­ç‡</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è®°å½•ç¼“å­˜å‘½ä¸­æƒ…å†µ</span>
<span class="hljs-keyword">let</span> cacheHits = <span class="hljs-number">0</span>;
<span class="hljs-keyword">let</span> networkRequests = <span class="hljs-number">0</span>;

self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  event.<span class="hljs-title function_">respondWith</span>(
    caches.<span class="hljs-title function_">match</span>(event.<span class="hljs-property">request</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (response) {
        cacheHits++;
        <span class="hljs-title function_">logPerformance</span>(<span class="hljs-string">'cache-hit'</span>, event.<span class="hljs-property">request</span>.<span class="hljs-property">url</span>);
        <span class="hljs-keyword">return</span> response;
      }
      
      networkRequests++;
      <span class="hljs-title function_">logPerformance</span>(<span class="hljs-string">'network-request'</span>, event.<span class="hljs-property">request</span>.<span class="hljs-property">url</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(event.<span class="hljs-property">request</span>);
    })
  );
});

<span class="hljs-keyword">function</span> <span class="hljs-title function_">logPerformance</span>(<span class="hljs-params">type, url</span>) {
  <span class="hljs-comment">// å‘é€æ€§èƒ½æ•°æ®åˆ°åˆ†ææœåŠ¡</span>
  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/analytics'</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
    <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ type, url, <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() })
  });
}
</code></pre>
<h3 data-id="heading-36">ç”¨æˆ·ä½“éªŒæŒ‡æ ‡</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç›‘æ§ç”¨æˆ·ä½“éªŒæŒ‡æ ‡</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> startTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
  
  event.<span class="hljs-title function_">respondWith</span>(
    <span class="hljs-title function_">fetch</span>(event.<span class="hljs-property">request</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> endTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      <span class="hljs-keyword">const</span> duration = endTime - startTime;
      
      <span class="hljs-comment">// è®°å½•è¯·æ±‚è€—æ—¶</span>
      <span class="hljs-title function_">logMetric</span>(<span class="hljs-string">'request-duration'</span>, duration, event.<span class="hljs-property">request</span>.<span class="hljs-property">url</span>);
      
      <span class="hljs-keyword">return</span> response;
    }).<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
      <span class="hljs-comment">// è®°å½•é”™è¯¯</span>
      <span class="hljs-title function_">logMetric</span>(<span class="hljs-string">'request-error'</span>, <span class="hljs-number">1</span>, event.<span class="hljs-property">request</span>.<span class="hljs-property">url</span>);
      <span class="hljs-keyword">throw</span> error;
    })
  );
});
</code></pre>
<h2 data-id="heading-37">æœªæ¥å‘å±•è¶‹åŠ¿</h2>
<h3 data-id="heading-38">Web Workers ä¸ Service Workers çš„èåˆ</h3>
<p>æœªæ¥çš„ Web å¹³å°å¯èƒ½ä¼šè¿›ä¸€æ­¥æ•´åˆ Web Workers å’Œ Service Workersï¼Œæä¾›æ›´ç»Ÿä¸€çš„åå°å¤„ç†èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-39">å¢å¼ºçš„ç¦»çº¿åŠŸèƒ½</h3>
<p>éšç€ Web å¹³å°çš„å‘å±•ï¼ŒService Worker å°†è·å¾—æ›´å¤šçš„ API æ”¯æŒï¼Œå¦‚åå°åœ°ç†ä½ç½®æ›´æ–°ã€åå°åª’ä½“å¤„ç†ç­‰ã€‚</p>
<h3 data-id="heading-40">æ›´å¥½çš„å¼€å‘å·¥å…·æ”¯æŒ</h3>
<p>æµè§ˆå™¨å‚å•†æ­£åœ¨ä¸æ–­æ”¹è¿›å¼€å‘è€…å·¥å…·ï¼Œæä¾›æ›´å¥½çš„ Service Worker è°ƒè¯•å’Œç›‘æ§åŠŸèƒ½ã€‚</p>
<h2 data-id="heading-41">æ€»ç»“</h2>
<p>Service Worker ä½œä¸ºç°ä»£ Web å¼€å‘çš„é‡è¦æŠ€æœ¯ï¼Œä¸º Web åº”ç”¨å¸¦æ¥äº†å‰æ‰€æœªæœ‰çš„èƒ½åŠ›ã€‚é€šè¿‡åˆç†ä½¿ç”¨ Service Workerï¼Œæˆ‘ä»¬å¯ä»¥æ˜¾è‘—æå‡ç”¨æˆ·ä½“éªŒï¼Œç‰¹åˆ«æ˜¯åœ¨ç½‘ç»œä¸ç¨³å®šçš„ç¯å¢ƒä¸­ã€‚</p>
<p>æŒæ¡ Service Worker ä¸ä»…èƒ½è®©ä½ çš„åº”ç”¨æ›´åŠ å¥å£®ï¼Œè¿˜èƒ½ä¸ºç”¨æˆ·æä¾›åŸç”Ÿåº”ç”¨èˆ¬çš„ä½“éªŒã€‚éšç€ PWA æŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼ŒService Worker å°†åœ¨æœªæ¥çš„ Web å¼€å‘ä¸­æ‰®æ¼”æ›´åŠ é‡è¦çš„è§’è‰²ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ Service Workerã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå»ºè®®ä»å°åŠŸèƒ½å¼€å§‹å°è¯•ï¼Œé€æ­¥æŒæ¡å…¶å¼ºå¤§çš„åŠŸèƒ½ã€‚</p>
<h2 data-id="heading-42">å‚è€ƒèµ„æ–™</h2>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FService_Worker_API" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/Service_Worker_API" ref="nofollow noopener noreferrer">MDN Service Worker Documentation</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.google.com%2Fweb%2Ffundamentals%2Fprimers%2Fservice-workers" target="_blank" title="https://developers.google.com/web/fundamentals/primers/service-workers" ref="nofollow noopener noreferrer">Google Web Fundamentals - Service Workers</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.w3.org%2FTR%2Fservice-workers%2F" target="_blank" title="https://www.w3.org/TR/service-workers/" ref="nofollow noopener noreferrer">W3C Service Workers Specification</a></li>
</ol>
<p>æœ€åï¼Œåˆ›ä½œä¸æ˜“è¯·å…è®¸æˆ‘æ’æ’­ä¸€åˆ™è‡ªå·±å¼€å‘çš„â€œæ•°è§„è§„-æ’äº”åŠ©æ‰‹â€ï¼ˆæœ‰å„ç§é¢„æµ‹åˆ†æï¼‰å°ç¨‹åºå¹¿å‘Šï¼Œæ„Ÿå…´è¶£å¯ä»¥å¾®ä¿¡å°ç¨‹åºä½“éªŒæ”¾æ¾æ”¾æ¾ï¼Œç¨‹åºå‘˜ä¹Ÿè¦æœ‰ç‚¹å¨±ä¹ç”Ÿæ´»ï¼Œæä¸å¥½å°±ä¸­ä¸ªæ’åˆ—äº”äº†å‘¢ï¼Ÿ</p>
<p>æ„Ÿå…´è¶£çš„å¯ä»¥ç›´æ¥ç‚¹å‡»ä¸‹æ–¹é“¾æ¥ç›´æ¥è·³è½¬åˆ°å¾®ä¿¡å°ç¨‹åºï¼š</p>
<p>Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.luoshu.online%2Fjumptomp.html" target="_blank" title="https://www.luoshu.online/jumptomp.html" ref="nofollow noopener noreferrer">www.luoshu.online/jumptomp.htâ€¦</a></p>
<p>æˆ–è€…å¯ä»¥å¾®ä¿¡æœç´¢å°ç¨‹åºâ€œ<strong>æ•°è§„è§„-æ’äº”åŠ©æ‰‹</strong>â€ä½“éªŒä½“éªŒï¼</p>
<p><strong>å¦‚æœè§‰å¾—æœ¬æ–‡æœ‰ç”¨ï¼Œæ¬¢è¿<code>ç‚¹ä¸ªèµ</code>ğŸ‘+<code>æ”¶è—</code>â­+<code>å…³æ³¨</code>æ”¯æŒæˆ‘å§ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Day 7ï¼š05. åŸºäºNuxtå¼€å‘åšå®¢é¡¹ç›®-é¦–é¡µå¼€å‘]]></title>    <link>https://juejin.cn/post/7570295366480298020</link>    <guid>https://juejin.cn/post/7570295366480298020</guid>    <pubDate>2025-11-10T05:49:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570295366480298020" data-draft-id="7570295366480265252" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Day 7ï¼š05. åŸºäºNuxtå¼€å‘åšå®¢é¡¹ç›®-é¦–é¡µå¼€å‘"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-10T05:49:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”³é˜³"/> <meta itemprop="url" content="https://juejin.cn/user/4353721775165486"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Day 7ï¼š05. åŸºäºNuxtå¼€å‘åšå®¢é¡¹ç›®-é¦–é¡µå¼€å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4353721775165486/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”³é˜³
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T05:49:07.000Z" title="Mon Nov 10 2025 05:49:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ae3e5a6a6084c5a8364e92d37c7864a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358547&amp;x-signature=lgUHgvRFqZkP9zEVfhStmLZ3GdI%3D" alt="PixPin_2025-11-10_13-40-04.gif" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>é¦–é¡µæ˜¯ç«™ç‚¹çš„â€œè„¸é¢â€ï¼Œä¹Ÿæ˜¯ä¿¡æ¯ä¼ è¾¾æœ€ç›´æ¥çš„çª—å£ã€‚é¦–é¡µçš„è®¾è®¡è´¨é‡ï¼Œä¸ä»…å…³ç³»åˆ°ç”¨æˆ·å¯¹ç«™ç‚¹çš„ç¬¬ä¸€å°è±¡ï¼Œæ›´ç›´æ¥å½±å“å…¶ä½¿ç”¨ä½“éªŒä¸æ•´ä½“è¯„ä»·ã€‚å› æ­¤ï¼Œç²¾å¿ƒæ‰“é€ é¦–é¡µï¼Œè‡³å…³é‡è¦ã€‚</p>
<p>æˆ‘å…¶å®æ¯”è¾ƒåæ„Ÿä¸€äº›èŠ±é‡Œèƒ¡å“¨çš„é¡µé¢ï¼Œä½†æ˜¯æ°åˆ°å¥½å¤„çš„åŠ¨ç”»ç¡®å®å¯ä»¥æé«˜ç”¨æˆ·çš„ä½“éªŒï¼Œä¹Ÿåˆ©äºç½‘ç«™æ¨å¹¿ã€‚</p>
<p>æˆ‘çš„ç›®æ ‡æ˜¯å¯»æ±‚å¹³è¡¡ï¼Œä¿¡æ¯ä½œä¸ºä¸»å¯¼ï¼ŒåŠ¨ç”»ä½œä¸ºè¾…åŠ©ã€‚</p>
<p>ä¸‹é¢å¼€å§‹æˆ‘ä»¬çš„é¦–é¡µæ‰“é€ å§ã€‚</p>
<h2 data-id="heading-1">äºŒã€æ¸å˜æ–‡å­—æ ‡é¢˜</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d68379c813742c7b3fef76572e36843~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358547&amp;x-signature=3xqmEMO3l%2Bov9zPKZWzBL5UdNd4%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨<code>tailwindcss</code>çš„åŠ æŒä¸‹ï¼Œå®ç°è¿™ç§æ•ˆæœå¤ªæ–¹ä¾¿äº†ï¼Œåªéœ€è¦ä»¥ä¸‹å‡ ä¸ªæŒ‡ä»¤å³å¯</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ml-1 font-bold text-xl bg-linear-to-r from-blue-700 via-blue-400 to-sky-400 bg-clip-text text-transparent"</span>&gt;</span>ç”³é˜³çš„åšå®¢<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
</code></pre>
<p><code>bg-linear-to-r from-blue-700 via-blue-400 to-sky-400 bg-clip-text text-transparent</code></p>
<p>æ–‡æ¡£åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftailwind.nodejs.cn%2Fdocs%2Fbackground-image%23adding-a-linear-gradient" target="_blank" title="https://tailwind.nodejs.cn/docs/background-image#adding-a-linear-gradient" ref="nofollow noopener noreferrer">tailwind.nodejs.cn/docs/backgrâ€¦</a></p>
<p>æ–‡æ¡£åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftailwind.nodejs.cn%2Fdocs%2Fbackground-clip%23cropping-to-text" target="_blank" title="https://tailwind.nodejs.cn/docs/background-clip#cropping-to-text" ref="nofollow noopener noreferrer">tailwind.nodejs.cn/docs/backgrâ€¦</a></p>
<blockquote>
<p><strong>é‡ç‚¹ï¼é‡ç‚¹ï¼é‡ç‚¹ï¼</strong></p>
<p>æˆ‘ç›¸ä¿¡å¤§å®¶åœ¨çœ‹æŠ€æœ¯ç±»æ–‡æ¡£çš„æ—¶å€™æ€»ä¼šæœ‰è¿™äº›ç–‘é—®:</p>
<p>â€œä½ æ˜¯æ€ä¹ˆçŸ¥é“çš„?â€,</p>
<p>â€œæˆ‘æ€ä¹ˆçŸ¥é“æœ‰è¿™ä¸ªæŒ‡ä»¤ï¼Ÿâ€ï¼Œ</p>
<p>â€œæŒ‡ä»¤å¤ªå¤šï¼Œè®°ä¸ä½å•Šï¼Ÿâ€ï¼Œ</p>
<p>â€œç°åœ¨çŸ¥é“ï¼Œä¸€æ®µæ—¶é—´ä¸ç”¨å°±å¿˜äº†â€ã€‚</p>
<p>åœ¨ä»¥å‰ï¼Œæˆ‘ä¼šé€šè¿‡ç¬”è®°å°†ä¸€äº›å¸¸è§åœºæ™¯çš„æŒ‡ä»¤è®°ä¸‹æ¥ï¼Œä¾¿äºåç»­æŸ¥æ‰¾ï¼Œé¦–å…ˆæˆ‘çŸ¥é“è‚¯å®šå¯ä»¥å®ç°ï¼Œç„¶åå»ç¬”è®°é‡Œæ‰¾ã€‚è®°ç¬”è®°çš„åšæ³•çš„å‰æåœ¨äºï¼Œè§å¾—å¤šã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdfc73298fd34f13b3c3f1c846afbde6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358547&amp;x-signature=siBuXJL7A0dkGnSbKEeSClv%2FXOY%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>é‚£ä¹ˆç›¸ä¿¡èªæ˜çš„ä½ åº”è¯¥ä¹ŸçŒœåˆ°äº†ä½¿ç”¨ <code>AI</code> , æ²¡é”™ï¼Œè¿™ç§ç®€å•çš„æ´»äº¤ç»™ <code>AI</code>æœ€åˆé€‚ä¸è¿‡äº†ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿè¦æœ‰é‰´åˆ«èƒ½åŠ›ï¼Œå¯¹äº<code>AI</code>ç»™å‡ºçš„ç»“æœåªèƒ½ä½œä¸ºä¸€ä¸ªå‚è€ƒï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦å»å®˜ç½‘éªŒè¯ä¸€ä¸‹ã€‚</p>
<p>ä¸ç¦æ„Ÿå¹ï¼Œ<code>AI</code> ç¡®å®å‡å°äº†å¾ˆå¤šç»éªŒä¸Šçš„å·®è·ï¼Œå°±å¥½æ¯”æœ‰ä¸€ä¸ªç²¾é€š <code>css</code> çš„å¤§ä½¬ä¸€ç›´åœ¨æ—è¾¹æŒ‡å¯¼ä½ ï¼Œå¹¶ä¸”æ— æ¡ä»¶æœä»ï¼Œå›ç­”ä½ çš„å¹¼ç¨šé—®é¢˜ï¼Œå“ˆå“ˆã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/501bc318806940e2a73229aa64cff929~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358547&amp;x-signature=sMpCx2g6mie4eMi%2BCX8m2AjQ0ww%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">ä¸‰ã€é¦–é¡µå¸ƒå±€è®¾è®¡</h2>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦æœ‰ä¸ªæ¸…æ¥šçš„è®¤è¯†ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯ä¸“ä¸šä»äº‹<code>UI</code>è®¾è®¡çš„è®¾è®¡å¸ˆï¼Œä¸€ä¸ªå¥½çš„åˆ›æ„æˆ–è€…å¥½çš„è®¾è®¡æ˜¯éœ€è¦ç»è¿‡æ—¶é—´æ‰“ç£¨ï¼Œçº¿ä¸Šè®¤è¯ï¼Œä¸æ–­å®Œå–„çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å†™çš„æ—¶å€™è„‘å­ä¸€ç‰‡ç©ºç™½è¿™æ˜¯ä¸ªå†æ­£å¸¸ä¸è¿‡çš„æƒ…å†µäº†ã€‚</p>
<p>ä½†æ˜¯é—®é¢˜æ‘†åœ¨é¢å‰ï¼Œæ€»è¦å»è§£å†³ï¼Œæœ€ç®€å•é«˜æ•ˆçš„æ–¹æ³•å°±æ˜¯å€Ÿé‰´ï¼Œæ¨¡ä»¿ã€‚</p>
<p>è¿™é‡Œæˆ‘è´´å‡ ä¸ªæˆ‘è®¤ä¸ºè¿˜ç®—æ¯”è¾ƒå¥½çš„é¦–é¡µï¼Œä¾›å¤§å®¶å‚è€ƒã€‚å¦‚æœå¤§å®¶æœ‰å¥½çš„åˆ›æ„ï¼Œæ¬¢è¿äº¤æµã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f732b5d756ba44dfbff3cdefd6abb89c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358547&amp;x-signature=Vwb%2FOExXc94x74b2AKQPfjvtHqE%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/afdc7736f3f541f78c9fdb9512b248b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358547&amp;x-signature=%2BUtyGyMJzvPHA%2Brx0%2FP13NbU4%2BI%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e29c2acfb2ec47b980a0343c67fe5454~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358547&amp;x-signature=Oii7QAwTTaGPMioux0aAFeN0f9I%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c018c3b9de140c380e0ab6aa73797fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358547&amp;x-signature=A61bY88NVxWcaeChJrHMCDgEN4g%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™é‡Œå…·ä½“å®ç°æˆ‘å°±ä¸ç»†è¯´äº†ï¼Œæ¯ä¸ªéƒ½æœ‰è‡ªå·±çš„æƒ³æ³•ï¼Œåé¢æˆ‘ä¼šå±•ç¤ºæˆ‘æœ€ç»ˆçš„æ•ˆæœã€‚</p>
<h2 data-id="heading-3">å››ã€æˆåŠŸå±•ç¤º</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e58e2b7e74384171ab763c0d23088ad6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358547&amp;x-signature=IFH4NZDl3A2Ip0g3k0Cn2UsjSIM%3D" alt="PixPin_2025-11-10_13-40-04.gif" loading="lazy"/></p>
<blockquote>
<p>åç»­ä¼šå°†å®Œæ•´ä»£ç å¼€æºã€‚</p>
</blockquote>
<p><strong>åƒé‡Œä¹‹è¡Œï¼Œå§‹äºè¶³ä¸‹ã€‚ä½ çš„â€œä¸ªäººå…¬å¸â€ä»è¿™ç¬¬ä¸€ä¸ª2å°æ—¶å¼€å§‹ã€‚æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„è¿›å±•æˆ–é‡åˆ°çš„å¡ç‚¹ï¼Œæˆ‘ä¼šé€ä¸€æŸ¥çœ‹ï¼Œå°½å¯èƒ½çš„å¸®åŠ©è§£å†³ã€‚æˆ‘ä»¬ä¸‹ä¸€ç¯‡æ–‡ç« è§ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…¨çƒç¬¬äºŒã€å›½å†…ç¬¬ä¸€ï¼æœ€å¼ºæ–‡æœ¬çš„æ–‡å¿ƒ5.0 Previewä¸€æ‰‹å®æµ‹æ¥äº†]]></title>    <link>https://juejin.cn/post/7570564840427962395</link>    <guid>https://juejin.cn/post/7570564840427962395</guid>    <pubDate>2025-11-10T03:07:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570564840427962395" data-draft-id="7570271574349529097" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…¨çƒç¬¬äºŒã€å›½å†…ç¬¬ä¸€ï¼æœ€å¼ºæ–‡æœ¬çš„æ–‡å¿ƒ5.0 Previewä¸€æ‰‹å®æµ‹æ¥äº†"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-11-10T03:07:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœºå™¨ä¹‹å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/1873223543167902"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…¨çƒç¬¬äºŒã€å›½å†…ç¬¬ä¸€ï¼æœ€å¼ºæ–‡æœ¬çš„æ–‡å¿ƒ5.0 Previewä¸€æ‰‹å®æµ‹æ¥äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1873223543167902/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœºå™¨ä¹‹å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T03:07:09.000Z" title="Mon Nov 10 2025 03:07:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ã€ŒBaidu is backã€ï¼Œåœ¨ä¸šç•Œæƒå¨å¤§æ¨¡å‹å…¬å…±åŸºå‡†æµ‹è¯•å¹³å° LMArena å‘å¸ƒæœ€æ–°ä¸€æœŸæ–‡æœ¬ç«æŠ€åœºæ’åï¼ˆText Arenaï¼‰ä¹‹åï¼Œæœ‰äººå‘å‡ºäº†è¿™æ ·çš„æƒŠå‘¼ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b94e6494551a4149bcc49b5b865db511~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=n1TRZgieuO0Z4NjJPueJweFKPuo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ ¹æ® 11 æœˆ 8 æ—¥å‡Œæ™¨ LMArena çš„æœ€æ–°æ’åæ˜¾ç¤ºï¼Œç™¾åº¦æ–‡å¿ƒæœ€æ–°æ¨¡å‹ ERNIE-5.0-Preview-1022ï¼ˆæ–‡å¿ƒ 5.0 Previewï¼‰åœ¨æ–‡æœ¬æ¦œå•ä¸Šä¸€ä¸¾è·ƒå±…å…¨çƒå¹¶åˆ—ç¬¬äºŒã€å›½å†…ç¬¬ä¸€ã€‚</p>
<p>è¯¥æ¨¡å‹å–å¾—äº†Â 1432Â çš„é«˜åˆ†ï¼Œå…¶ä¸ OpenAI çš„ gpt-4.5-preview-2025-02-27 ä»¥åŠ Anthropic çš„ claude-opus-4-1-0805ã€claude-sonnet-4-5-20250929 ä¸‰å¤§å›½å¤–é¡¶çº§æ¨¡å‹æŒå¹³ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1b9f5a1d96d4394afababc59c3c9a4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=lyN75u9fkXYP0INlDMQPlfVMGYU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¯„è®ºåŒºçš„ç½‘å‹çº·çº·å¯¹ç™¾åº¦æ–°æ¨¡å‹çš„äº®çœ¼è¡¨ç°é€ä¸Šäº†ç¥è´ºï¼Œè¿˜è¡¨ç¤ºã€Œå·²ç»è¿«ä¸åŠå¾…æƒ³äº²è‡ªä½“éªŒä¸€ç•ªã€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a8025c0461144a37a43cbb2dd19afe52~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=wlIBQLFALHlDeUQjQqEzq5LuHYE%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85f5bd304b43417f80f771b4fc87ef24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=nX6zU8kpGyfMqmomYeVH1lihm6s%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¯«æ— ç–‘é—®ï¼Œæ­¤æ¬¡æ¦œå•ç»“æœå°†ç»§ç»­å¼ºåŒ–ç™¾åº¦æ–‡å¿ƒç³»åˆ—æ¨¡å‹åœ¨å…¨çƒé€šç”¨æ™ºèƒ½æ¨¡å‹ç«äº‰æ ¼å±€ä¸­ç¬¬ä¸€æ¢¯é˜Ÿçš„åœ°ä½ã€‚</p>
<p>å…¨çƒ LLM å®æˆ˜æ“‚å°ï¼Œæ–‡å¿ƒ 5.0 Preview æ‚„ç„¶å®æ€è€Œæ¥</p>
<p>åœ¨ AI é¢†åŸŸï¼ŒLMArena æ˜¯ç”±åŠ å·å¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡ç ”ç©¶è€…åˆ›å»ºçš„å¼€æ”¾ AI æ¨¡å‹è¯„æµ‹å¹³å°ï¼Œæˆä¸ºäº† OpenAIã€è°·æ­Œç­‰å›½å¤–ä»¥åŠå›½å†…å¤§æ¨¡å‹å‚å•†å®æ€çš„é¡¶çº§ç«æŠ€åœºä¹‹ä¸€ã€‚</p>
<p>åœ¨è¯¥å¹³å°ä¸Šï¼Œç”¨æˆ·è‡ªå·±æäº¤ promptï¼Œæ¥ç€ç³»ç»Ÿä¼šéšæœºæŠ½å–ä¸¤ä¸ªåŒ¿åçš„ LLM åˆ†åˆ«ç”Ÿæˆå›ç­”ã€‚ç”¨æˆ·æ ¹æ®ä¸¤æ¡å›ç­”é€‰æ‹©åå¥½ï¼Œå³ã€Œå“ªä¸€ä¸ªæ›´å¥½ã€æˆ–ã€Œä¸¤è€…éƒ½å·®ã€ç­‰ã€‚æ›´å…·ä½“åœ°ï¼ŒLMArena ä¼šä¸ºæ¯ä¸ªæ¨¡å‹åˆ†é…åˆå§‹ Elo åˆ†æ•°ï¼Œå¹¶åœ¨æ¯è½®å¯¹å†³ç»“æŸåå®æ—¶æ›´æ–°åˆ†æ•°ã€‚</p>
<p>ç›¸è¾ƒäºä¾èµ–ä¼ ç»Ÿé™æ€æ•°æ®é›†æˆ–è‡ªåŠ¨è¯„åˆ†çš„åŸºå‡†å¹³å°ï¼ŒLMArena é€šè¿‡çœŸå®ç”¨æˆ·å¯¹æ¨¡å‹è¾“å‡ºçš„åå¥½æŠ•ç¥¨ï¼Œå½¢æˆäº†ä¸€ç§åå‘äºã€Œç°å®ä¸–ç•Œè¯„åˆ¤ã€çš„åŠ¨æ€æ’åæœºåˆ¶ã€‚è¿™ç§æœºåˆ¶è®©æ¨¡å‹èƒ½åŠ›ä¹‹é—´çš„è¾ƒé‡æ›´è´´è¿‘å®é™…ä½¿ç”¨åœºæ™¯ï¼Œä¹Ÿè®©æ¦œå•çš„å«é‡‘é‡æ›´é«˜ã€‚</p>
<p>èƒ½åœ¨ LMArena æ¦œå•ä¸Šååˆ—å‰èŒ…çš„æ¨¡å‹ï¼Œåœ¨å­¦æœ¯æŒ‡æ ‡ä¸Šè¡¨ç°çªå‡ºä¹‹å¤–ï¼Œæ›´åœ¨ç”¨æˆ·ä½“éªŒã€è¯­è¨€ç†è§£ã€åˆ›æ„ç”Ÿæˆä¸æŒ‡ä»¤æ‰§è¡Œç­‰å®é™…åº”ç”¨ç»´åº¦è·å¾—å¹¿æ³›è®¤å¯ã€‚æ–‡å¿ƒ 5.0 Preview æ­£æ˜¯åœ¨è¿™æ ·çœŸå®çš„ LLM å¯¹å†³æˆ˜åœºå–å¾—äº†ä¼˜å¼‚è¡¨ç°ã€‚</p>
<p>å…·ä½“æ¥è®²ï¼Œæ–‡å¿ƒ 5.0 Preview åœ¨åˆ›æ„å†™ä½œã€å¤æ‚é•¿é—®é¢˜ç†è§£å’ŒæŒ‡ä»¤éµå¾ªç­‰æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œæ•´ä½“æˆç»©è¶…è¶Šäº†åŒ…æ‹¬ GPT-5-High åœ¨å†…çš„å¤šæ¬¾å›½å†…å¤–ä¸»æµå¤§æ¨¡å‹ã€‚</p>
<p>å…¶ä¸­ï¼Œæ–‡å¿ƒ 5.0 Preview åœ¨è¡¡é‡åˆ›æ„ç”Ÿäº§åŠ›çš„é‡è¦æŒ‡æ ‡â€”â€”åˆ›æ„å†™ä½œä»»åŠ¡ä¸­æ’åç¬¬ä¸€ï¼Œè¿™æ„å‘³ç€å…¶ç”Ÿæˆæ–‡ç« ã€è¥é”€æ–‡æ¡ˆã€å‰§æœ¬ç­‰å†…å®¹çš„é€Ÿåº¦ä¸è´¨é‡å‡æœ‰å¤§å¹…æå‡ï¼›åœ¨è€ƒéªŒæ¨¡å‹å¤„ç†å¤šå±‚é€»è¾‘ä¸é•¿æ–‡æœ¬èƒ½åŠ›çš„å¤æ‚é•¿é—®é¢˜ç†è§£ä¸­æ’åç¬¬äºŒï¼Œå…¶æ›´åŠ èƒœä»»å­¦æœ¯é—®ç­”ã€æŠ¥å‘Šåˆ†æã€çŸ¥è¯†æ¨ç†ç­‰é«˜è®¤çŸ¥ä»»åŠ¡ï¼›åœ¨ä½“ç°æ¨¡å‹å¯¹ç”¨æˆ·æ„å›¾ç†è§£ä¸æ‰§è¡Œç²¾åº¦çš„æŒ‡ä»¤éµå¾ªä»»åŠ¡ä¸­æ’åç¬¬ä¸‰ï¼Œå…¶åœ¨æ™ºèƒ½åŠ©ç†ã€ä»£ç ç”Ÿæˆä¸ä¸šåŠ¡è‡ªåŠ¨åŒ–ç­‰åœºæ™¯çš„é€‚ç”¨æ€§å¤§å¤§å¢å¼ºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a39a6e45d1a44e8951d1c3c5440a87b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=RKn%2FEIiHf%2Fkf7XQsGbqjlFGLAF4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™äº›æ ¸å¿ƒè¯­è¨€èƒ½åŠ›çš„çªå‡ºè¡¨ç°ï¼Œè¡¨æ˜äº†æ–‡å¿ƒ 5.0 Preview åœ¨å¤æ‚è¯­ä¹‰ç†è§£ã€é€»è¾‘æ¨ç†ä¸ä»»åŠ¡æ‰§è¡Œä¸€è‡´æ€§ä¸Šå½¢æˆäº†é¢†å…ˆä¼˜åŠ¿ï¼Œä¸ºé«˜è´¨é‡ã€é«˜æ•ˆç‡çš„å¤šåœºæ™¯å†…å®¹ç”Ÿäº§ä¸æ™ºèƒ½åº”ç”¨è½åœ°æä¾›äº†æ›´æœ‰åŠ›çš„æ”¯æŒã€‚</p>
<p>ä¸ä»…å¦‚æ­¤ï¼Œèƒ½åŠ›å…¨æ–¹ä½è·ƒå‡çš„åŸºç¡€æ¨¡å‹å°†æˆä¸ºæ·±åŒ– AI ä¸ AIGC äº§ä¸šåŒ–è½åœ°çš„æ ¸å¿ƒå¼•æ“ï¼Œå…¶ä»·å€¼æ­£ä»å•ä¸€çš„æ–‡æœ¬è¾…åŠ©è½¬å‘å¯¹å†…å®¹ç”Ÿäº§ã€ä¼ä¸šæ™ºèƒ½ä½“ã€åŠå…¬è‡ªåŠ¨åŒ–ç­‰åœºæ™¯çš„ç³»ç»Ÿæ€§èµ‹èƒ½ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œé’ˆå¯¹æ–‡å¿ƒ 5.0 Preview çš„å‡ å¤§çªå‡ºèƒ½åŠ›ï¼Œæœºå™¨ä¹‹å¿ƒè¿›è¡Œäº†ä¸€ç•ªæµ‹è¯•ã€‚</p>
<p>æ–‡æœ¬èƒ½åŠ›ï¼Œä¸€æ‰‹å®æµ‹</p>
<p>åˆ›æ„å†™ä½œ</p>
<p>é¦–å…ˆæˆ‘ä»¬æŠŠå®ƒæ”¾åœ¨ã€Œè¥é”€ã€åœºæ™¯ä¸­ï¼Œçœ‹çœ‹å®ƒç”Ÿäº§åŠ›å¦‚ä½•ã€‚</p>
<p>æˆ‘ä»¬é€‰æ‹©åŒæ ·ä»¥æ–‡æœ¬èƒ½åŠ›è§é•¿ä¸”åœ¨æ’è¡Œæ¦œä¸­å¹¶åˆ—ç¬¬äºŒçš„ claude-sonnet-4.5-20250929ï¼Œåœ¨ LMArena çš„ã€ŒSide By Sideã€æ¨¡å‹å¯¹æ¯”ä¸­è¿›è¡Œæ¨ªå‘æµ‹è¯„ã€‚</p>
<blockquote>
<p>ä½ æ˜¯ä¸€å®¶é¡¶çº§å¹¿å‘Šå…¬å¸çš„åˆ›æ„æ€»ç›‘ã€‚è¯·ä¸º [ä¸€ä¸ªæ–‡æœ¬èƒ½åŠ›å‡ºä¼—çš„æ¨¡å‹] ç­–åˆ’ä¸€ä¸ªä¸ºæœŸ 3 ä¸ªæœˆçš„çº¿ä¸Šè¥é”€æˆ˜å½¹ã€‚ä½ çš„æ–¹æ¡ˆå¿…é¡»åŒ…æ‹¬ï¼šä¸€ä¸ªæ ¸å¿ƒè¥é”€æ´å¯Ÿï¼ˆInsightï¼‰ã€‚ä¸€ä¸ªå“äº®çš„æˆ˜å½¹ Sloganã€‚ä¸€å°è‡´æ‰€æœ‰åˆ›ä½œè€…çš„å…¬å¼€ä¿¡ã€‚ä¸€ä¸ª 30 ç§’çŸ­è§†é¢‘çš„åˆ›æ„è„šæœ¬å¤§çº²ã€‚</p>
</blockquote>
<p>é¦–å…ˆæ¥æ¯”è¾ƒæ ¸å¿ƒè¥é”€æ´å¯Ÿå’Œ Sloganã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f908f706175f4d64ba262fd4a90b0824~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=90LPcG13E%2FsrdM%2BrzAvMa46cuX4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªæ¨¡å‹çš„æ€è·¯æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ä»¥ã€Œè¡¨è¾¾è‡ªç”±ã€ä¸ºæ ¸å¿ƒï¼Œä½†æ–‡å¿ƒ 5.0 Preview æ— è®ºæ˜¯æªè¾è¿˜æ˜¯ç«‹æ„éƒ½æ›´èƒœä¸€ç­¹ã€‚</p>
<p>Claude çš„æ–¹æ¡ˆå®šä½ä¸ºã€Œä¸€ä¸ªæ›´æ‡‚ä½ çš„å·¥å…·ã€ï¼Œè¿™åœ¨åŠŸèƒ½ä¸Šæ˜¯å‡†ç¡®çš„ï¼Œä½†åœ¨å“ç‰Œä¸Šæ˜¯ä¿å®ˆçš„ã€‚</p>
<p>æ–‡å¿ƒ 5.0 Preview åˆ™æ›´è¿›ä¸€æ­¥ï¼Œå®ƒæŠ“ä½äº†ã€Œæƒ…ç»ªä»·å€¼ã€è¿™ä¸€çƒ­é—¨åˆ‡å£ï¼Œå°† AI å¡‘é€ æˆã€Œçµæ„Ÿçš„åˆä¼™äººã€ï¼Œå®Œæˆäº†ä»åŠŸèƒ½åˆ°ä»·å€¼çš„è·ƒå‡ã€‚å…¶ Sloganã€Œå¿ƒæœ‰æ‰€æ€ï¼Œè¨€å¿…è¾¾æ„ã€ä¹Ÿæ›´å¯Œè¯—æ„å’Œå“ç‰Œæ ¼å±€ã€‚</p>
<p>æ¥ä¸‹æ¥çœ‹çœ‹è‡´åˆ›ä½œè€…çš„å…¬å¼€ä¿¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc98a3bb450d4260a10a324f15b75c15~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=W30dsdVAycb9yWRZLHweaW%2B57uc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Claude å†™å¾—éå¸¸ç²¾å‡†ã€çœŸè¯šï¼Œå®ƒé€‚åˆæ‰“åŠ¨æ¯ä¸€ä¸ªéœ€è¦ç”¨æ–‡å­—æ²Ÿé€šçš„äººï¼ˆåŒ…æ‹¬ä½†ä¸é™äºå­¦ç”Ÿã€èŒåœºäººã€åˆ›ä¸šè€…ã€è¿è¥äººå‘˜ç­‰ï¼‰ã€‚å®ƒå¼ºè°ƒçš„æ˜¯ã€Œç†è§£ã€å’Œã€Œè¡¨è¾¾ã€ã€‚</p>
<p>ä½†æ–‡å¿ƒ 5.0 Preview æ²¡æœ‰åœç•™åœ¨ã€Œå¸®ä½ æŠŠè¯è¯´æ¸…æ¥šã€çš„æµ…å±‚åŠŸèƒ½ï¼Œè€Œæ˜¯ç›´æŒ‡åˆ›ä½œè€…çš„çµé­‚ã€‚å®ƒçš„ä¸€å¥è¯ï¼Œå°±ç›´å‡»äº†å½“ä¸‹ AI æ—¶ä»£æœ€æ ¸å¿ƒçš„ç„¦è™‘ï¼šå…³äºåŸåˆ›æ€§ã€çµé­‚æ˜¯å¦ä¼šè¢«ç¨€é‡Šçš„ç„¦è™‘ã€‚</p>
<blockquote>
<p>ä½ æ‰€çè§†çš„ï¼Œæ˜¯å­—é‡Œè¡Œé—´çš„ç‹¬ç‰¹é£éª¨ï¼Œæ˜¯é€»è¾‘é“¾æ¡ä¸­çš„ä¸¥è°¨æ€è€ƒï¼Œæ˜¯æ•…äº‹èƒŒåç‹¬ä¸€æ— äºŒçš„çµé­‚ã€‚è¿™äº›ï¼Œæ˜¯ä»»ä½•æœºå™¨éƒ½æ— æ³•èµ‹äºˆçš„ã€‚</p>
</blockquote>
<p>å®ƒä¸åªæ˜¯åœ¨æä¾›ä¸€ä¸ªå·¥å…·ï¼Œè€Œæ˜¯å®šä¹‰äº†ä¸€ç§æœªæ¥ï¼šAI è¶Šå¼ºå¤§ï¼Œäººçš„åˆ›é€ åŠ›åè€Œè¶Šçè´µã€è¶Šè‡ªç”±ã€‚</p>
<p>ç„¶åæ˜¯å¾ˆæœ‰æŒ‘æˆ˜æ€§çš„éƒ¨åˆ†ï¼šçŸ­è§†é¢‘åˆ›æ„è„šæœ¬å¤§çº²ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87009c966a314e8686c907118165815e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=O17sN%2FxISWqwHyE0ScsNN9h2Vy4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™æ˜¯æ–‡å¿ƒ 5.0 Preview æœ€è®©äººæƒŠè‰³çš„éƒ¨åˆ†ï¼Œå®ƒåˆ›ä½œäº†ä¸€ä¸ªéå¸¸æˆç†Ÿçš„è„šæœ¬ï¼Œå…¶ä¸“ä¸šç¨‹åº¦ä»¤äººæƒŠè‰³ã€‚æ–¹æ¡ˆä¸­åŒ…å«äº†ç”»é¢å†…å®¹ã€å‰ªè¾‘ç‚¹ã€ç‰¹æ•ˆã€éŸ³æ•ˆã€å°è¯ç­‰ä¸€åˆ‡æ‰§è¡Œæ‰€éœ€çš„æ ¸å¿ƒè¦ç´ ã€‚</p>
<p>å¤æ‚é•¿é—®é¢˜ç†è§£</p>
<p>æˆ‘ä»¬è®¾å®šäº†ä¸€ä¸ªå¸¸è§çš„åº”ç”¨åœºæ™¯ï¼šä¸º AI æ¨¡å‹æä¾›ä¸€ä»½äº§å“ä»‹ç»ï¼Œè®©å…¶æ‰®æ¼”å®¢æœï¼Œæ ¹æ®è¿™ä»½ä»‹ç»å›ç­”æˆ‘ä»¬çš„é—®é¢˜ã€‚</p>
<p>ä¸ºäº†ä¿è¯æµ‹è¯•çš„å®¢è§‚æ€§å’Œä¸“ä¸šæ€§ï¼Œæˆ‘ä»¬é¦–å…ˆè®© Gemini 2.5 Pro è¾…åŠ©è®¾è®¡äº†æ ‡å‡†é—®é¢˜åŠç­”æ¡ˆã€‚ç„¶åï¼Œæˆ‘ä»¬é‡ç‚¹è€ƒå¯Ÿæ–‡å¿ƒ 5.0 Preview çš„è¡¨ç°ï¼Œå¹¶ä½¿ç”¨ claude-sonnet-4.5-20250929 çš„å›ç­”è¿›è¡Œæ¨ªå‘å¯¹æ¯”ã€‚</p>
<p>ç¬¬ä¸€è½®ï¼šç›´æ¥ä¿¡æ¯æ£€ç´¢</p>
<p>è€ƒå¯Ÿæ¨¡å‹æ˜¯å¦èƒ½ä»æ–‡æ¡£ä¸­å‡†ç¡®ã€é«˜æ•ˆåœ°æ‰¾åˆ°ä¿¡æ¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de8e1c35ae6844239b74b46fbf2c6371~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=zTAX8OWnGAJ7BPeHuGyhEx6nbuo%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb150cdc95764d27a37acfcdb25e0878~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=BXyPzsk0LvuOZt0q31V4PwSIDcI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œä¸¤ä¸ªæ¨¡å‹éƒ½å›ç­”æ­£ç¡®ï¼Œä½†æ–‡å¿ƒ 5.0 Preview éå¸¸è´´å¿ƒåœ°è¡¥å……äº†ã€Œå’Œä¸€ä¸ªå¤§è‹¹æœçš„é‡é‡å·®ä¸å¤šã€çš„ç›´è§‚æ„Ÿå—ã€‚è¿™ä¸ªå°å°çš„ç»†èŠ‚æå¤§æå‡äº†ç”¨æˆ·ä½“éªŒï¼Œè®©äººèƒ½æ›´å¿«ç†è§£äº§å“ç‰¹æ€§ï¼Œå±•ç°äº†è¶…è¶Šç®€å•ã€Œæ£€ç´¢ã€çš„æœåŠ¡æ„è¯†ã€‚</p>
<p>ç¬¬äºŒè½®ï¼šæ¡ä»¶ä¸æ¨æ–­</p>
<p>è€ƒå¯Ÿæ¨¡å‹æ˜¯å¦èƒ½ç†è§£ç”¨æˆ·çš„ç‰¹å®šåœºæ™¯å’Œéšå«æ¡ä»¶ï¼Œå¹¶ä½œå‡ºæ­£ç¡®åˆ¤æ–­ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b4840f31d4142d9a47968f0c10c045c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=bEfwUQVqYQJtGhRT4BOThGGLHYI%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73c9a72ef6e14a73a36efe6a8dc180f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=F4XS5Px5vWniHtY2hFfJqAZhPxs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¾ç„¶éƒ½å›ç­”æ­£ç¡®ï¼Œä½†åœ¨é£æ ¼ä¸Šå‡ºç°äº†åˆ†åŒ–ã€‚æ–‡å¿ƒ 5.0 Preview å›ç­”ç®€æ´æ¸…æ™°ï¼Œç›´å¥”ä¸»é¢˜ï¼Œå‡†ç¡®è§£å†³äº†ç”¨æˆ·çš„æ‹…å¿§ã€‚è€Œ claude çš„å›ç­”æ›´å…·ç½‘æ„Ÿï¼Œé£æ ¼æ›´å£è¯­åŒ–ã€‚</p>
<p>ç¬¬ä¸‰è½®ï¼šã€Œè´Ÿé¢ã€æŸ¥è¯¢ä¸è¾¹ç•Œæµ‹è¯•</p>
<p>è€ƒå¯Ÿæ¨¡å‹å¦‚ä½•å¤„ç†æ–‡æ¡£ä¸­æœªåŒ…å«çš„ä¿¡æ¯ï¼ˆè¾¹ç•Œï¼‰ï¼Œä»¥åŠå¦‚ä½•å¤„ç†ç”¨æˆ·çš„æ½œåœ¨è¯¯è§£ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f18c3ce23c24e3ab5a3ec0741351622~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=0Yqjh%2FonJc%2FGRp1YoFTVHuogoLE%3D" alt="å›¾ç‰‡" loading="lazy"/><br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/adcad82a065b4afd850d22ae429fdbe3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=m228mpXYqUps4xyXE6Oja7%2FiW8k%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸¤ä¸ªæ¨¡å‹éƒ½èƒ½è¯†åˆ«å‡ºæ–‡æ¡£ä¸­æœªæåŠçš„ä¿¡æ¯ï¼Œä¸è¿‡è¿™é‡Œ claude é¢å¤–è¯†åˆ«åˆ°äº† 15 ç§’çš„æ¢å¤æ—¶é—´ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼Œåœ¨ã€Œå®¢æœã€è¿™ä¸ªç‰¹å®šè§’è‰²çš„æ‰®æ¼”ä¸Šï¼Œæ–‡å¿ƒ 5.0 Preview çš„å›ç­”éå¸¸æ¸…æ™°ã€ä¸“ä¸šä¸”å±•ç°äº†è¾ƒé«˜çš„æœåŠ¡æ„è¯†ã€‚</p>
<p>æŒ‡ä»¤éµå¾ª</p>
<p>æˆ‘ä»¬ç»§ç»­æµ‹è¯•æ–‡å¿ƒ 5.0 Preview çš„æŒ‡ä»¤éµå¾ªèƒ½åŠ›ã€‚è¿™é¡¹èƒ½åŠ›æ˜¯è¡¡é‡ä¸€ä¸ªæ¨¡å‹æ˜¯å¦ã€Œå¯é ã€å’Œã€Œå¯æ§ã€çš„å…³é”®æŒ‡æ ‡ï¼Œç›´æ¥å†³å®šäº†å®ƒåœ¨ä¸“ä¸šé¢†åŸŸçš„å®ç”¨ä»·å€¼ã€‚</p>
<p>æˆ‘ä»¬å…ˆä»ä¸€ä¸ªç®€å•çš„ã€Œå›é¿å‹ã€æŒ‡ä»¤å¼€å§‹ã€‚</p>
<blockquote>
<p>å†™ä¸€ç¯‡å…³äºè‹¹æœå…¬å¸ï¼ˆAppleï¼‰çš„ç®€çŸ­ä»‹ç»ï¼Œä½†ä¸è¦æåˆ°ã€ŒiPhoneã€æˆ–ã€Œä¹”å¸ƒæ–¯ã€ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f003041ce254143aeca33f2d5da4469~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=vH3XzTDe2Y8gmh%2FH6WikSWb71tk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è½»æ¾å®Œæˆã€‚æ¨¡å‹å‡†ç¡®è¯†åˆ«å¹¶æ‰§è¡Œäº†ã€Œä¸è¦æ Xã€çš„è´Ÿå‘æŒ‡ä»¤ï¼Œè¿™æ˜¯å½“ä»Šä¸»æµå¤§æ¨¡å‹éƒ½åº”å…·å¤‡çš„åŸºç¡€èƒ½åŠ›ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¤§å¹…æå‡äº†éš¾åº¦ï¼Œè®¾è®¡äº†ä¸€ä¸ªå¤šå±‚ã€åç›´è§‰ã€ä¸”åŒ…å«å…ƒæŒ‡ä»¤çš„å¤æ‚ä»»åŠ¡ã€‚åŒæ—¶ç»§ç»­ç”¨ claude-sonnet-4.5-20250929 åšå¯¹æ¯”ã€‚</p>
<blockquote>
<p>è¯·ä½ å†™ä¸€æ®µå…³äºã€Œæœˆçƒã€çš„æè¿°ï¼Œè‡³å°‘ 100 å­—ã€‚ã€ã€ã€ç»å¯¹åˆšæ€§çº¦æŸã€‘ã€‘ã€‘ï¼šåœ¨ä½ çš„å…¨éƒ¨å›ç­”ä¸­ï¼Œä¸€ä¸ªã€Œçš„ã€å­—éƒ½ä¸å…è®¸å‡ºç°ã€‚è¯·åœ¨å›ç­”åï¼Œå¦èµ·ä¸€è¡Œï¼Œç”¨ã€Œã€åˆè§„æ€§æ£€æŸ¥ï¼šæ˜¯/å¦ã€‘ã€æ¥è¯´æ˜ä½ è‡ªå·±æ˜¯å¦åšåˆ°äº†ã€‚åœ¨å®Œå…¨ä¸ç”¨ã€Œçš„ã€å­—çš„é™åˆ¶ä¸‹ï¼Œæ¨¡å‹ç”Ÿæˆçš„æè¿°ä¾ç„¶ä¿æŒäº†ç›¸å½“é«˜çš„å¯è¯»æ€§å’Œä¿¡æ¯å¯†åº¦ã€‚å†…å®¹æ¶µç›–äº†æœˆçƒçš„èº«ä»½ã€å¤–è§‚ã€åœ°è²Œã€ç¯å¢ƒã€ç§‘ç ”ä»·å€¼å’Œäººæ–‡æ„ä¹‰ã€‚ä¸è¿‡å¦‚æœä¸æŠŠæ ‡ç‚¹ç¬¦å·ç®—æˆå­—æ•°ï¼Œè¿™ä¸€æ®µæ²¡æœ‰æ»¡è¶³è‡³å°‘ 100 å­—çš„è¦æ±‚ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18124f2eb4ca47179a8b83dd31a13c91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=fCb670bbEjbjYGHpxI%2FWEhozjSs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸¤ä¸ªå›ç­”éƒ½å®Œå…¨æ²¡æœ‰ä½¿ç”¨ã€Œçš„ã€å­—ï¼Œå¹¶å‡†ç¡®åœ°åœ¨å›ç­”ä¹‹åå¦èµ·ä¸€è¡Œè¿›è¡Œåˆè§„æ€§æ£€æŸ¥ã€‚æ–‡å¿ƒ 5.0 Preview èƒœåœ¨æ–‡ç¬”æ„å¢ƒï¼Œè€Œ claude èƒœåœ¨ä¿¡æ¯å¯†åº¦ã€‚</p>
<p>è®©æˆ‘ä»¬å†å‡çº§ä¸€æ¬¡éš¾åº¦ã€‚</p>
<blockquote>
<p>è¯·ä½ å†™ä¸€æ®µå…³äºã€ŒåŒ—äº¬ã€çš„ä»‹ç»ï¼Œæ­£æ–‡ï¼ˆä¸å«ç¼–å·å’Œæ ‡é¢˜ï¼‰è‡³å°‘ 150 å­—ã€‚åœ¨æ’°å†™æ—¶ï¼Œå¿…é¡»åŒæ—¶æ»¡è¶³ä»¥ä¸‹æ‰€æœ‰ã€ã€ã€ç»å¯¹åˆšæ€§çº¦æŸã€‘ã€‘ã€‘ï¼š å…¨æ–‡ä¸å…è®¸ä½¿ç”¨ã€Œçš„ã€å­—ã€‚ å…¨æ–‡ä¸å…è®¸ä½¿ç”¨é€—å·ï¼ˆã€Œï¼Œã€ï¼‰å’Œé¡¿å·ï¼ˆã€Œã€ã€ï¼‰ã€‚ ï¼ˆæ³¨ï¼šå¯ä»¥ä½¿ç”¨å¥å·ã€Œã€‚ã€æˆ–åˆ†å·ã€Œï¼›ã€ç­‰å…¶ä»–æ ‡ç‚¹ï¼‰ å›ç­”å¿…é¡»æ˜ç¡®åˆ†ä¸ºä¸‰ä¸ªå¸¦ç¼–å·çš„æ®µè½ã€‚</p>
</blockquote>
<blockquote>
<p>ï¼ˆä¾‹å¦‚ï¼šã€Œ1. ...ã€ã€Œ2. ...ã€ã€Œ3. ...ã€ï¼‰ ã€å…ƒæŒ‡ä»¤ï¼ˆè‡ªæˆ‘å®¡è®¡ï¼‰ã€‘åœ¨ä½ çš„å›ç­”ï¼ˆä¸‰ä¸ªæ®µè½ï¼‰å…¨éƒ¨å®Œæˆåï¼Œè¯·å¦èµ·ä¸€è¡Œï¼Œä½¿ç”¨ã€Œã€è‡ªæˆ‘å®¡æŸ¥ã€‘ã€ä½œä¸ºæ ‡é¢˜ã€‚ç„¶åï¼Œä½ å¿…é¡»å‡†ç¡®æŠ¥å‘Šä½ åœ¨è¿™ç¯‡ä»‹ç»ä¸­ä½¿ç”¨äº†å¤šå°‘ä¸ªã€Œçš„ã€å­—ï¼Œä»¥åŠå¤šå°‘ä¸ªã€Œé€—å·å’Œé¡¿å·ã€ã€‚ä½ å¿…é¡»ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹æ ¼å¼æŠ¥å‘Šï¼š ã€è‡ªæˆ‘å®¡æŸ¥ã€‘ è¿è§„å­—ã€Œçš„ã€ä½¿ç”¨ï¼š[æ­¤å¤„å¡«å†™æ•°å­—] æ¬¡ è¿è§„æ ‡ç‚¹ã€Œï¼Œã€ã€ä½¿ç”¨ï¼š[æ­¤å¤„å¡«å†™æ•°å­—] æ¬¡</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/81f71b98629f4f4e9b8ccabed78e13d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=n2yrQPAnVxFisMBFeJsOvgPeQp4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ä¸¤ä¸ªå›ç­”éƒ½ä½“ç°äº†ä¼˜ç§€çš„æŒ‡ä»¤éµå¾ªèƒ½åŠ›ã€‚å®ƒä»¬ä¸ä»…ç†è§£äº†æ‰€æœ‰å¤æ‚çš„ã€åç›´è§‰çš„è§„åˆ™ï¼Œè¿˜ç²¾ç¡®æ‰§è¡Œäº†ã€Œè‡ªæˆ‘å®šé‡å®¡è®¡ã€çš„å…ƒæŒ‡ä»¤ã€‚å’Œå‰é¢ä¸€æ ·ï¼Œæ–‡å¿ƒ 5.0 Preview è¯­è¨€æ›´å…·å¯è¯»æ€§å’Œã€Œæ–‡é‡‡ã€ï¼Œè€Œ claude ä¿¡æ¯å¯†åº¦æ›´é«˜ã€‚</p>
<p>ç™¾åº¦ï¼Œå‡­ä»€ä¹ˆ backï¼Ÿ</p>
<p>ä¸Šæ–‡å®æµ‹è®©æˆ‘ä»¬äº²èº«æ„Ÿå—åˆ°äº†æ–‡å¿ƒ 5.0 Preview çš„ä¸ä¿—å®åŠ›ï¼Œå…¶èƒ½åŠ›çš„å¿«é€Ÿè¿›åŒ–æ˜¾ç„¶ä¸æ˜¯å•ç‚¹çªç ´çš„ç»“æœï¼ŒèƒŒåæ”¯æ’‘ç€çš„æ˜¯ç™¾åº¦æ„å»ºçš„ã€ŒèŠ¯ç‰‡-æ¡†æ¶-æ¨¡å‹-åº”ç”¨ã€å››å±‚å…¨æ ˆå¸ƒå±€ã€‚</p>
<p>çºµè§‚å½“å‰å…¨çƒé¢†å…ˆçš„å¤§æ¨¡å‹å‚å•†ï¼Œç™¾åº¦æ˜¯ä¸ºæ•°ä¸å¤šæ‹¥æœ‰ AI æŠ€æœ¯å…¨æ ˆæ¶æ„çš„å…¬å¸ï¼Œä»ç®—åŠ›åˆ°ç®—æ³•ã€ä»æ¨¡å‹åº”ç”¨åˆ°ç”Ÿæ€å»ºè®¾ï¼Œå·²ç»å½¢æˆäº†ä¸€æ¡æˆç†Ÿã€è´¯é€šçš„æŠ€æœ¯é—­ç¯ã€‚</p>
<p>æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œåœ¨æ¡†æ¶å±‚ï¼Œå…¶é£æ¡¨ï¼ˆPaddlePaddleï¼‰æ·±åº¦å­¦ä¹ å¹³å°æ‰®æ¼”ç€é‡è¦è§’è‰²ã€‚æ®äº†è§£ï¼Œè¯¥å¹³å°æ˜¯å›½å†…è¾ƒæ—©è‡ªä¸»ç ”å‘çš„æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œæä¾›äº†åˆ†å¸ƒå¼è®­ç»ƒä¸æ¨ç†èƒ½åŠ›ã€‚ç™¾åº¦æ–¹é¢çš„ä¿¡æ¯æ˜¾ç¤ºï¼Œé£æ¡¨ä¸æ–‡å¿ƒçš„è”åˆä¼˜åŒ–ï¼ˆåŒ…æ‹¬è®­ç»ƒååã€åˆ†å¸ƒå¼æ‰©å±•ã€å¤šæ¨¡å‹ç»“æ„æ··åˆå¹¶è¡Œå’Œç¡¬ä»¶é€šä¿¡ç­‰ï¼‰ï¼Œæ˜¯å…¶æ¨¡å‹æ€§èƒ½æå‡çš„æŠ€æœ¯åŸºç¡€ä¹‹ä¸€ã€‚</p>
<p>æ ¹æ®å…¬å¼€æ•°æ®ï¼Œé£æ¡¨æ ¸å¿ƒæ¡†æ¶ç›®å‰å·²æ›´æ–°è‡³Â v3.2Â ç‰ˆæœ¬ï¼Œåœ¨å¤§æ¨¡å‹è®­ç»ƒã€ç¡¬ä»¶é€‚é…å’Œç”Ÿæ€æ”¯æŒä¸Šè¿›è¡Œäº†å‡çº§ï¼Œå¹¶åŒæ­¥æ›´æ–°äº†å¤§æ¨¡å‹å¼€å‘å¥—ä»¶ ERNIEKit å’Œé«˜æ•ˆéƒ¨ç½²å¥—ä»¶ FastDeployã€‚æˆªè‡³ 2025 å¹´ 9 æœˆï¼Œå…¶å…¬å¸ƒçš„é£æ¡¨æ–‡å¿ƒç”Ÿæ€å¼€å‘è€…æ•°æ®ä¸º 2333 ä¸‡ï¼ŒæœåŠ¡ä¼ä¸šè¾¾åˆ° 76 ä¸‡å®¶ã€‚</p>
<p>åœ¨åº”ç”¨å±‚ï¼Œå¯ä»¥çœ‹åˆ°ç™¾åº¦æ­£ä¾æ‰˜æ–‡å¿ƒå¤§æ¨¡å‹èƒ½åŠ›ï¼Œæ„å»ºå…¶äº§å“çŸ©é˜µï¼Œè¯•å›¾è¦†ç›–å†…å®¹ã€æœç´¢ã€åŠå…¬ã€å¼€å‘ç­‰å¤šå…ƒåœºæ™¯ã€‚å…¶ä»£è¡¨æ€§äº§å“åŒ…æ‹¬ C ç«¯æ™ºèƒ½åŠ©æ‰‹æ–‡å¿ƒã€B ç«¯ç™¾åº¦æ™ºèƒ½äº‘åƒå¸†å¤§æ¨¡å‹å¹³å°ä»¥åŠç™¾åº¦æ–‡åº“ AI åŠ©æ‰‹ã€æ™ºèƒ½åŠå…¬å¹³å°å¦‚æµã€æ™ºèƒ½ä»£ç åŠ©æ‰‹æ–‡å¿ƒå¿«ç ç­‰ã€‚ä»å¸ƒå±€ä¸Šçœ‹ï¼Œç™¾åº¦ä¼¼ä¹å¸Œæœ›é€šè¿‡è¿™äº›åº”ç”¨å±‚çš„æ‹“å±•ï¼Œæ¨åŠ¨å…¶æŠ€æœ¯åœ¨äº§ä¸šä¸­è½åœ°ã€‚</p>
<p>åœ¨èŠ¯ç‰‡å±‚ï¼Œç™¾åº¦å¼ºè°ƒäº†å…¶è‡ªç ”çš„æ˜†ä»‘èŠ¯ã€‚æ ¹æ®æŠ¥é“ï¼Œæ˜†ä»‘èŠ¯ä¸‰ä»£ä¸‡å¡é›†ç¾¤å·²äºä»Šå¹´å¹´åˆç‚¹äº®ï¼Œå…¶ç›®æ ‡æ˜¯ä¸ºå¤§æ¨¡å‹è®­ç»ƒä¸æ¨ç†æä¾›ç®—åŠ›æ”¯æŒï¼Œç‰¹åˆ«æ˜¯ä¿éšœã€Œé›†ç¾¤æ•ˆèƒ½æœ€å¤§åŒ–ã€ä¸‹çš„è®­ç»ƒååä¸é€šä¿¡æ•ˆç‡ã€‚</p>
<p>ç»¼åˆæ¥çœ‹ï¼Œè¿™å››ä¸ªå±‚é¢çš„ååŒæ¼”è¿›ï¼Œæ„æˆäº†ç™¾åº¦åœ¨é€šç”¨äººå·¥æ™ºèƒ½é¢†åŸŸå¸ƒå±€çš„æ ¸å¿ƒé€»è¾‘ã€‚</p>
<p>æ­¤æ¬¡ï¼Œæ¨¡å‹å±‚çš„æ–‡å¿ƒ 5.0 Preview åœ¨ LMArena æ–‡æœ¬æ¦œå•ä¸Šè·å¾—å›½å†…ç¬¬ä¸€çš„æ’åï¼Œå¯ä»¥è¢«è§†ä¸ºç™¾åº¦åœ¨ AI åº•å±‚æ¶æ„ä¸Šé•¿æœŸæŠ€æœ¯æŠ•å…¥åçš„ä¸€æ¬¡é˜¶æ®µæ€§æˆæœå±•ç°ã€‚åŒæ—¶ï¼Œè¡Œä¸šå†…æœ‰ä¸€ç§è§‚ç‚¹è®¤ä¸ºï¼Œè¿™ä¹Ÿå¯èƒ½åæ˜ å‡ºä¸­å›½ AI æŠ€æœ¯ä½“ç³»æ­£ä»ã€ŒæŠ€æœ¯è¿½èµ¶ã€å‘ã€Œèƒ½åŠ›å¼•é¢†ã€çš„é˜¶æ®µè¿‡æ¸¡ã€‚</p>
<p>ç»“è¯­</p>
<p>è¿›å…¥åˆ° 11 æœˆï¼Œå›½å†…å¤§æ¨¡å‹ä¾ç„¶æ²¡æœ‰åœä¸‹ç»§ç»­çªç ´çš„è„šæ­¥ï¼Œå¥½æ¶ˆæ¯ä¸€ä¸ªæ¥ç€ä¸€ä¸ªã€‚</p>
<p>æœˆä¹‹æš—é¢ç­‰å›½äº§æ¨¡å‹ä¸­ç›¸ç»§å‘å¸ƒäº† Kimi K2 Thinking ç­‰æ¨ç†æ¨¡å‹ï¼Œè€Œåœ¨é€šç”¨æ¨¡å‹èµ›é“ï¼Œç™¾åº¦æ–‡å¿ƒ 5.0 Preview å‡­å€Ÿã€Œå…¨çƒå¹¶åˆ—ç¬¬äºŒã€å›½å†…ç¬¬ä¸€ã€çš„æˆç»©å®£ç¤ºäº†è‡ªå·±çš„å¼ºåŠ¿å›å½’ã€‚</p>
<p>æ®è¯´åœ¨ä¸‹å‘¨ä¸¾åŠçš„ç™¾åº¦ä¸–ç•Œ 2025 å¤§ä¼šä¸Šï¼Œæ–‡å¿ƒæ­£å¼ç‰ˆå°†äº®ç›¸ï¼Ÿ</p>
<p>æˆ‘ä»¬å¯ä»¥æœŸå¾…ä¸€ä¸‹äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€è½¬è½½ã€‘æˆ‘å¦‚ä½•ç”¨Superpowers MCPå¼ºåˆ¶Claude Codeåœ¨ç¼–ç å‰è¿›è¡Œè§„åˆ’]]></title>    <link>https://juejin.cn/post/7570341520551673871</link>    <guid>https://juejin.cn/post/7570341520551673871</guid>    <pubDate>2025-11-10T03:12:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570341520551673871" data-draft-id="7570341520551624719" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€è½¬è½½ã€‘æˆ‘å¦‚ä½•ç”¨Superpowers MCPå¼ºåˆ¶Claude Codeåœ¨ç¼–ç å‰è¿›è¡Œè§„åˆ’"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,Claude"/> <meta itemprop="datePublished" content="2025-11-10T03:12:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯é­”ä¸¸å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/3217622495411292"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€è½¬è½½ã€‘æˆ‘å¦‚ä½•ç”¨Superpowers MCPå¼ºåˆ¶Claude Codeåœ¨ç¼–ç å‰è¿›è¡Œè§„åˆ’
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3217622495411292/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯é­”ä¸¸å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T03:12:33.000Z" title="Mon Nov 10 2025 03:12:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.trevorlasn.com%2Fblog%2Fsuperpowers-claude-code-skills" target="_blank" title="https://www.trevorlasn.com/blog/superpowers-claude-code-skills" ref="nofollow noopener noreferrer">è½¬è½½</a></p>
<p><strong>ä½œè€…ï¼šTrevor I. Lasn</strong></p>
<p><strong>å‘å¸ƒæ—¶é—´ï¼š2025å¹´11æœˆ4æ—¥</strong></p>
<p><strong>é˜…è¯»æ—¶é—´ï¼š5åˆ†é’Ÿ</strong></p>
<hr/>
<h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>è¿‡å»å‡ ä¸ªæœˆé‡Œï¼Œæˆ‘ä¸€ç›´åœ¨ç”¨Claudeæ„å»ºskillcraft.aiã€‚Claudeæ“…é•¿å¿«é€Ÿç¼–å†™ä»£ç ï¼Œä½†å®ƒæœ‰ä¸€ä¸ªé—®é¢˜ï¼šå®ƒç»å¸¸è·³è¿‡æ­¥éª¤ã€‚</p>
<p>å½“æˆ‘è¦æ±‚Claudeå¸®åŠ©è¿ç§»å¤§å‹é¡¹ç›®æ—¶ï¼Œå®ƒä¼šç«‹å³å¼€å§‹å»ºè®®æ›´æ”¹ã€‚æ²¡æœ‰è§„åˆ’é˜¶æ®µã€‚æ²¡æœ‰"è®©æˆ‘å…ˆæ‰¾åˆ°æ¯ä¸ªéœ€è¦æ›´æ–°çš„æ–‡ä»¶"ã€‚åªæ˜¯ç›´æ¥æŠ•å…¥ä»£ç æ›´æ”¹ï¼ŒæœŸæœ›æœ€å¥½çš„ç»“æœã€‚</p>
<p>è¿™å°±æ˜¯é—æ¼æ–‡ä»¶çš„æ–¹å¼ã€‚è¿™å°±æ˜¯å‘å¸ƒbugçš„æ–¹å¼ã€‚</p>
<p>Superpowersæ˜¯ä¸€ä¸ªè§£å†³è¿™ä¸ªé—®é¢˜çš„MCPã€‚å®ƒåŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªç»“æ„åŒ–å·¥ä½œæµçš„åº“â€”â€”æµ‹è¯•ã€è°ƒè¯•ã€è§„åˆ’â€”â€”Claude Codeä¼šè‡ªåŠ¨åŠ è½½å¹¶å®é™…éµå¾ªã€‚</p>
<p>Claude Codeä¸­çš„æŠ€èƒ½æ˜¯ä¸€ä¸ªåŒ…å«æŒ‡ä»¤ã€è„šæœ¬å’Œèµ„æºçš„æ–‡ä»¶å¤¹ï¼ŒClaudeåœ¨éœ€è¦æ—¶åŠ è½½å®ƒã€‚è¿™æ˜¯Anthropicçš„Agent SkillsåŠŸèƒ½çš„ä¸€éƒ¨åˆ†ï¼Œè¯¥åŠŸèƒ½åœ¨Claudeåº”ç”¨ã€Claude Codeå’ŒAPIä¸­éƒ½å¯ä»¥ä½¿ç”¨ã€‚æ¯ä¸ªæŠ€èƒ½å®šä¹‰äº†å®ƒä½•æ—¶é€‚ç”¨ã€è¦éµå¾ªä»€ä¹ˆæµç¨‹ã€ä»¥åŠä¸èƒ½èµ°ä»€ä¹ˆæ·å¾„ã€‚å½“ä½ å¼€å§‹ä¸€ä¸ªåŒ¹é…æŠ€èƒ½çš„ä»»åŠ¡æ—¶ï¼ŒClaudeä¼šæ‰«æå¯ç”¨æŠ€èƒ½ï¼Œæ‰¾åˆ°åŒ¹é…é¡¹ï¼Œå¹¶è‡ªåŠ¨åŠ è½½å®ƒã€‚</p>
<p>æˆ‘ç»å¸¸ä½¿ç”¨ä¸‰ä¸ªæ–œæ å‘½ä»¤ï¼š</p>





















<table><thead><tr><th>å‘½ä»¤</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td><code>/superpowers:brainstorm</code></td><td>åœ¨ç¼–ç å‰å®Œå–„ç²—ç•¥æƒ³æ³•</td></tr><tr><td><code>/superpowers:write-plan</code></td><td>åˆ›å»ºè¯¦ç»†çš„å®æ–½è®¡åˆ’</td></tr><tr><td><code>/superpowers:execute-plan</code></td><td>æ‰¹é‡è¿è¡Œè®¡åˆ’ï¼ŒåŒ…å«æ£€æŸ¥ç‚¹</td></tr></tbody></table>
<p>æˆ‘å°†Superpowersæ·»åŠ åˆ°æˆ‘çš„ <code>CLAUDE.md</code> ä¸­ï¼Œè¿™æ ·å®ƒåœ¨æ¯ä¸ªä¼šè¯å¼€å§‹æ—¶éƒ½ä¼šè‡ªåŠ¨åŠ è½½ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># é¡¹ç›®è®¾ç½®</span>

ä½¿ç”¨Superpowers MCPè¿›è¡Œæ‰€æœ‰å¼€å‘å·¥ä½œã€‚åœ¨ä¼šè¯å¼€å§‹æ—¶åŠ è½½å®ƒã€‚
</code></pre>
<p>è¿™å¯¹tokenæ•ˆç‡æ¥è¯´æ˜¯å·¨å¤§çš„æå‡â€”â€”ä¸å…¶è®©Claudeæ¶ˆè€—ä¸Šä¸‹æ–‡è¯•å›¾åœ¨å†…å­˜ä¸­ä¿æŒæ‰€æœ‰å†…å®¹ï¼Œå®ƒå°†å·¥ä½œåˆ†å‰²æˆ5åˆ†é’Ÿçš„å—ï¼Œå¹¶å°†è¿›åº¦å†™å…¥markdownæ–‡ä»¶ã€‚ä½ æ°¸è¿œä¸ä¼šåœ¨ä¼šè¯ä¹‹é—´ä¸¢å¤±ä¸Šä¸‹æ–‡ï¼Œå› ä¸ºè®¡åˆ’å°±åœ¨æ–‡ä»¶ä¸­ï¼Œè€Œä¸æ˜¯é”åœ¨ä¸‰ä¸ªå°æ—¶å‰è¾¾åˆ°tokené™åˆ¶çš„å¯¹è¯ä¸­ã€‚</p>
<h2 data-id="heading-1">ç”Ÿæˆçš„æ–‡ä»¶ç»“æ„</h2>
<p>ç”Ÿæˆçš„æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">~<span class="hljs-regexp">/.config/superpowers</span><span class="hljs-regexp">/
â””â”€â”€ plans/</span>
    â””â”€â”€ nextjs-<span class="hljs-number">16</span>-migration/
        â”œâ”€â”€ <span class="hljs-variable constant_">PLAN</span>.md                  <span class="hljs-comment"># å®Œæ•´è¿ç§»è·¯çº¿å›¾</span>
        â”œâ”€â”€ progress.md              <span class="hljs-comment"># å½“å‰çŠ¶æ€å’Œå·²å®Œæˆä»»åŠ¡</span>
        â””â”€â”€ verification.md          <span class="hljs-comment"># æµ‹è¯•å‘½ä»¤å’ŒæˆåŠŸæ ‡å‡†</span>
</code></pre>
<p><code>PLAN.md</code> æ–‡ä»¶åŒ…å«æ‰€æœ‰å†…å®¹ï¼š</p>





































<table><thead><tr><th>éƒ¨åˆ†</th><th>åŒ…å«å†…å®¹</th></tr></thead><tbody><tr><td>Overview</td><td>éœ€è¦æ›´æ”¹ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ</td></tr><tr><td>Phase 1</td><td>APIè·¯ç”±é‡æ„ï¼ˆ23ä¸ªæ–‡ä»¶ï¼‰</td></tr><tr><td>Phase 2</td><td>ç»„ä»¶æ—¶é—´æ•æ„Ÿæ€§ä¿®å¤</td></tr><tr><td>Phase 3</td><td>ä¸Šä¸‹æ–‡æä¾›è€…Suspenseè¾¹ç•Œ</td></tr><tr><td>Phase 4</td><td>å¯ç”¨cacheComponents</td></tr><tr><td>Phase 5</td><td>æµ‹è¯•å’ŒéªŒè¯</td></tr><tr><td>Rollback</td><td>å¦‚æœå‡ºé”™äº†æ€ä¹ˆåŠ</td></tr></tbody></table>
<h2 data-id="heading-2">å®é™…åº”ç”¨æ¡ˆä¾‹</h2>
<p>Skillcraftè¿è¡Œåœ¨Next.jsä¸Šï¼Œæˆ‘æƒ³å¯ç”¨Next.js 16ä¸­çš„æ–° <code>cacheComponents</code> åŠŸèƒ½ã€‚è¿™ä¸ªä¸œè¥¿åˆ°å¤„ç ´åæ¨¡å¼â€”â€”è®¿é—® <code>searchParams</code> çš„APIè·¯ç”±ï¼Œä½¿ç”¨ <code>new Date()</code> çš„ç»„ä»¶ï¼Œæ²¡æœ‰Suspenseè¾¹ç•Œçš„ä¸Šä¸‹æ–‡æä¾›è€…ã€‚</p>
<p>æˆ‘è¿è¡Œäº† <code>/superpowers:write-plan</code>ï¼Œå¾—åˆ°äº†ä¸€ä¸ª500è¡Œçš„è®¡åˆ’ã€‚ä¸æ˜¯ä¸€äº›æ¨¡ç³Šçš„å¤§çº²ï¼Œè€Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„è·¯çº¿å›¾ï¼šæ‰€æœ‰23ä¸ªéœ€è¦æ›´æ”¹çš„APIè·¯ç”±æ–‡ä»¶ï¼Œä¸¤ä¸ªä¼šç ´åé¢„æ¸²æŸ“çš„ä½¿ç”¨ <code>new Date()</code> çš„ç»„ä»¶ï¼Œéœ€è¦Suspenseè¾¹ç•Œçš„ç‰¹å®šä¸Šä¸‹æ–‡æä¾›è€…ï¼Œä»¥åŠä¸€ä¸ª4å¤©çš„æ—¶é—´çº¿ï¼ŒåŒ…å«æµ‹è¯•æ£€æŸ¥ç‚¹ã€‚</p>
<p>è®¡åˆ’åŒ…å«äº†æ¯ä¸ªé˜¶æ®µçš„éªŒè¯å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># APIé‡æ„åæµ‹è¯•ç‰¹å®šç«¯ç‚¹</span>
curl http://localhost:3000/api/leaderboard
curl http://localhost:3000/api/courses/recent
curl http://localhost:3000/api/topics
</code></pre>
<p>å®ƒè®°å½•äº†ä¹‹å‰/ä¹‹åçš„æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¹‹å‰ï¼šä¸cacheComponentsä¸å…¼å®¹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> runtime = <span class="hljs-string">'nodejs'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> dynamic = <span class="hljs-string">'force-dynamic'</span>

<span class="hljs-comment">// ä¹‹åï¼šå¹²å‡€ï¼ˆAPIè·¯ç”±é»˜è®¤æ˜¯åŠ¨æ€çš„ï¼‰</span>
<span class="hljs-comment">// æ³¨æ„ï¼šå¯ç”¨cacheComponentsåï¼ŒAPIè·¯ç”±é»˜è®¤æ˜¯åŠ¨æ€çš„</span>
</code></pre>
<p>å®ƒç”šè‡³å®šä¹‰äº†æˆåŠŸæ ‡å‡†ï¼ˆæ„å»ºæˆåŠŸï¼ŒCLSä¿æŒ0.000ï¼ŒLighthouseåˆ†æ•°â‰¥95ï¼‰å’Œå›æ»šè®¡åˆ’ã€‚</p>
<p>æ²¡æœ‰è¿™ä¸ªï¼Œæˆ‘ä¼šå¯ç”¨cacheComponentsï¼Œé‡åˆ°é”™è¯¯ï¼Œä¸€ä¸ªä¸€ä¸ªä¿®å¤ï¼Œè‚¯å®šä¼šé—æ¼è¾¹ç¼˜æƒ…å†µã€‚è¿ç§»ä¼šéœ€è¦å‡ å¤©çš„ååº”å¼è°ƒè¯•ã€‚æœ‰äº†è®¡åˆ’ï¼Œæˆ‘åœ¨æ¥è§¦ä»»ä½•ä»£ç ä¹‹å‰å°±æœ‰äº†å®Œæ•´çš„è·¯çº¿å›¾ã€‚</p>
<h2 data-id="heading-3">æŠ€èƒ½åº“</h2>
<p>è¯¥åº“åŒ…å«å¤šä¸ªç”¨äºæµ‹è¯•ã€è°ƒè¯•å’Œå¼€å‘å·¥ä½œæµçš„æŠ€èƒ½ï¼š</p>





















<table><thead><tr><th>æŠ€èƒ½</th><th>å¼ºåˆ¶æ‰§è¡Œçš„å†…å®¹</th></tr></thead><tbody><tr><td><code>test-driven-development</code></td><td>RED-GREEN-REFACTORï¼šå†™æµ‹è¯•ï¼Œçœ‹å®ƒå¤±è´¥ï¼Œå†™ä»£ç </td></tr><tr><td><code>systematic-debugging</code></td><td>4é˜¶æ®µæ–¹æ³•ï¼šæ ¹æœ¬åŸå› è°ƒæŸ¥ â†’ æ¨¡å¼åˆ†æ â†’ å‡è®¾æµ‹è¯• â†’ å®æ–½</td></tr><tr><td><code>verification-before-completion</code></td><td>åœ¨å£°ç§°å·¥ä½œå®Œæˆå‰è¿è¡ŒéªŒè¯å‘½ä»¤å¹¶ç¡®è®¤è¾“å‡º</td></tr></tbody></table>
<p>è¿™äº›æŠ€èƒ½çœŸçš„ä¼šé˜»æ­¢ä½ è·³è¿‡æ­¥éª¤ã€‚ä¸å†æœ‰"æˆ‘è®¤ä¸ºå®ƒæœ‰æ•ˆ"è€Œæ²¡æœ‰è¯æ®ã€‚</p>
<p>å¦‚æœä½ åœ¨è¿›è¡Œè¿ç§»å¹¶éœ€è¦æ‰¾åˆ°ä¸€ä¸ªæ¨¡å¼çš„æ‰€æœ‰å®ä¾‹ï¼ŒSuperpowersä¼šæ‰¾åˆ°å®ƒä»¬æ‰€æœ‰ã€‚å¦‚æœä½ åœ¨è°ƒè¯•å¹¶å³å°†çŒœæµ‹ä¿®å¤æ–¹æ¡ˆï¼Œå®ƒä¼šé˜»æ­¢ä½ å¹¶è®©ä½ å…ˆè°ƒæŸ¥æ ¹æœ¬åŸå› ã€‚å¦‚æœé—æ¼ä¸€ä¸ªæ–‡ä»¶ä¼šç ´åç”Ÿäº§ï¼Œå®ƒä¼šè®©ä½ åœ¨å®Œæˆå‰éªŒè¯æ‰€æœ‰å†…å®¹ã€‚</p>
<h2 data-id="heading-4">å®‰è£…</h2>
<p>Superpowersä¸Claude Codeï¼ˆCLIå·¥å…·ï¼‰ä¸€èµ·å·¥ä½œã€‚é€šè¿‡æ’ä»¶å¸‚åœºå®‰è£…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨Claude Codeä¸­</span>
/plugin marketplace add obra/superpowers-marketplace
/plugin install superpowers@superpowers-marketplace
</code></pre>
<p>æˆ–è€…æ‰‹åŠ¨æ·»åŠ åˆ° <code>.claude/plugins.json</code>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"plugins"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"superpowers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"github"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"owner"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"obra"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"repo"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"superpowers"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å½“Claude Codeå¯åŠ¨æ—¶ï¼Œä½ ä¼šçœ‹åˆ°æŠ€èƒ½å·²åŠ è½½çš„ç¡®è®¤ã€‚ç„¶ååªéœ€ä½¿ç”¨æ–œæ å‘½ä»¤ï¼šåœ¨å¼€å§‹å¤æ‚åŠŸèƒ½ä¹‹å‰ä½¿ç”¨ <code>/superpowers:brainstorm</code>ï¼Œå¯¹äºè¿ç§»æˆ–å¤šæ–‡ä»¶é‡æ„ä½¿ç”¨ <code>/superpowers:write-plan</code>ï¼Œä»¥åŠä½¿ç”¨ <code>/superpowers:execute-plan</code> æ¥æ‰¹é‡è¿è¡Œè¿™äº›è®¡åˆ’ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Viteæ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š5ä¸ªè¢«ä½ä¼°çš„é…ç½®è®©ä½ çš„å¼€å‘æ•ˆç‡æå‡50%]]></title>    <link>https://juejin.cn/post/7570295366480019492</link>    <guid>https://juejin.cn/post/7570295366480019492</guid>    <pubDate>2025-11-10T04:16:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570295366480019492" data-draft-id="7570162686581194794" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Viteæ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š5ä¸ªè¢«ä½ä¼°çš„é…ç½®è®©ä½ çš„å¼€å‘æ•ˆç‡æå‡50%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-10T04:16:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="IT_é™ˆå¯’"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Viteæ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š5ä¸ªè¢«ä½ä¼°çš„é…ç½®è®©ä½ çš„å¼€å‘æ•ˆç‡æå‡50%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    IT_é™ˆå¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T04:16:54.000Z" title="Mon Nov 10 2025 04:16:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Viteæ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š5ä¸ªè¢«ä½ä¼°çš„é…ç½®è®©ä½ çš„å¼€å‘æ•ˆç‡æå‡50%</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼Œæ„å»ºå·¥å…·çš„æ€§èƒ½ç›´æ¥å½±å“å¼€å‘ä½“éªŒå’Œç”Ÿäº§åŠ›ã€‚Viteä½œä¸ºæ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·ï¼Œå‡­å€Ÿå…¶åŸç”ŸESMæ”¯æŒå’Œé—ªç”µèˆ¬çš„å†·å¯åŠ¨é€Ÿåº¦ï¼Œå·²ç»æˆä¸ºè®¸å¤šå¼€å‘è€…çš„é¦–é€‰ã€‚ç„¶è€Œï¼Œå¤§å¤šæ•°å¼€å‘è€…ä»…ä»…åœç•™åœ¨Viteçš„åŸºç¡€ç”¨æ³•ä¸Šï¼Œå¿½ç•¥äº†å…¶éšè—çš„æ€§èƒ½ä¼˜åŒ–æ½œåŠ›ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨5ä¸ªè¢«ä½ä¼°çš„Viteé…ç½®é¡¹ï¼Œé€šè¿‡åˆç†è°ƒæ•´è¿™äº›é…ç½®ï¼Œä½ çš„å¼€å‘æ•ˆç‡æœ‰æœ›æå‡50%ç”šè‡³æ›´å¤šã€‚</p>
<h2 data-id="heading-2">ä¸»ä½“</h2>
<h3 data-id="heading-3">1. ä¼˜åŒ–ä¾èµ–é¢„æ„å»ºç­–ç•¥</h3>
<p>ä¾èµ–é¢„æ„å»ºï¼ˆDependency Pre-Bundlingï¼‰æ˜¯Viteçš„æ ¸å¿ƒä¼˜åŒ–ä¹‹ä¸€ï¼Œä½†é»˜è®¤é…ç½®å¯èƒ½ä¸é€‚åˆæ‰€æœ‰åœºæ™¯ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">optimizeDeps</span>: {
    <span class="hljs-comment">// å¼ºåˆ¶é¢„æ„å»ºçš„ä¾èµ–é¡¹</span>
    <span class="hljs-attr">include</span>: [<span class="hljs-string">'lodash-es'</span>, <span class="hljs-string">'axios'</span>],
    <span class="hljs-comment">// æ’é™¤ä¸éœ€è¦é¢„æ„å»ºçš„ä¾èµ–</span>
    <span class="hljs-attr">exclude</span>: [<span class="hljs-string">'heavy-library'</span>],
    <span class="hljs-comment">// å¼€å¯è‡ªåŠ¨ä¾èµ–å‘ç°</span>
    <span class="hljs-attr">auto</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-comment">// ç¦ç”¨ç¼“å­˜ï¼ˆä»…åœ¨è°ƒè¯•æ—¶ä½¿ç”¨ï¼‰</span>
    <span class="hljs-attr">force</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">DEBUG</span> === <span class="hljs-string">'true'</span>
  }
}
</code></pre>
<p><strong>ä¼˜åŒ–å»ºè®®ï¼š</strong></p>
<ul>
<li>å¯¹äºå¤§å‹monorepoé¡¹ç›®ï¼Œæ˜ç¡®æŒ‡å®š<code>include</code>å¯ä»¥é¿å…ä¸å¿…è¦çš„é¢„æ„å»º</li>
<li>æ’é™¤å·²çŸ¥çš„ESMæ ¼å¼åº“ï¼ˆå¦‚æŸäº›D3æ¨¡å—ï¼‰å¯ä»¥å‡å°‘æ„å»ºæ—¶é—´</li>
<li><code>auto: true</code>é…åˆ<code>force: false</code>å¯ä»¥å®ç°æœ€ä½³çš„ç”Ÿäº§ç¯å¢ƒæ€§èƒ½</li>
</ul>
<p><strong>æ€§èƒ½å½±å“ï¼š</strong>
åˆç†é…ç½®åï¼Œå†·å¯åŠ¨æ—¶é—´å¯å‡å°‘30-40%ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¾èµ–è¾ƒå¤šçš„é¡¹ç›®ä¸­æ•ˆæœæ˜¾è‘—ã€‚</p>
<h3 data-id="heading-4">2. ç²¾ç»†åŒ–é…ç½®CSSå¤„ç†</h3>
<p>Viteçš„CSSå¤„ç†é»˜è®¤å·²ç»å¾ˆå¿«ï¼Œä½†é€šè¿‡ä»¥ä¸‹è°ƒæ•´å¯ä»¥è·å¾—é¢å¤–æ”¶ç›Šï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">css</span>: {
    <span class="hljs-comment">// ç¦ç”¨CSSæºåœ°å›¾ï¼ˆå¼€å‘ç¯å¢ƒï¼‰</span>
    <span class="hljs-attr">devSourcemap</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-comment">// CSSæ¨¡å—çš„å±€éƒ¨å‘½åè§„åˆ™</span>
    <span class="hljs-attr">modules</span>: {
      <span class="hljs-attr">localsConvention</span>: <span class="hljs-string">'camelCaseOnly'</span>,
      <span class="hljs-attr">generateScopedName</span>: <span class="hljs-string">'[name]__[local]___[hash:base64:5]'</span>
    },
    <span class="hljs-comment">// PostCSSé…ç½®ç²¾ç®€</span>
    <span class="hljs-attr">postcss</span>: {
      <span class="hljs-attr">plugins</span>: [
        <span class="hljs-built_in">require</span>(<span class="hljs-string">'postcss-import'</span>)(),
        <span class="hljs-built_in">require</span>(<span class="hljs-string">'autoprefixer'</span>)({
          <span class="hljs-attr">grid</span>: <span class="hljs-literal">true</span>
        })
      ]
    }
  }
}
</code></pre>
<p><strong>å…³é”®ä¼˜åŒ–ç‚¹ï¼š</strong></p>
<ul>
<li><code>devSourcemap: false</code>å¯å‡å°‘å†…å­˜å ç”¨ï¼ˆç”Ÿäº§ç¯å¢ƒä¼šè‡ªåŠ¨ç¦ç”¨ï¼‰</li>
<li>ç®€åŒ–çš„PostCSSé…ç½®æ¯”å…¨åŠŸèƒ½é¢„è®¾å¿«2-3å€</li>
<li>CSSæ¨¡å—çš„ç¡®å®šæ€§å‘½åæœ‰åŠ©äºé•¿æœŸç¼“å­˜</li>
</ul>
<h3 data-id="heading-5">3. Workerèµ„æºçš„æ™ºèƒ½å¤„ç†</h3>
<p>Web Workeråœ¨ç°ä»£åº”ç”¨ä¸­ä½¿ç”¨è¶Šæ¥è¶Šå¹¿æ³›ï¼ŒViteæä¾›äº†ä¸“é—¨çš„ä¼˜åŒ–é€‰é¡¹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">worker</span>: {
    <span class="hljs-comment">// Workeræ ¼å¼é€‰æ‹©</span>
    <span class="hljs-attr">format</span>: <span class="hljs-string">'es'</span>,
    <span class="hljs-comment">// æ’ä»¶åº”ç”¨èŒƒå›´æ§åˆ¶</span>
    <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">vue</span>()],
    <span class="hljs-comment">// Rollupè¾“å‡ºé…ç½®</span>
    <span class="hljs-attr">rollupOptions</span>: {
      <span class="hljs-attr">output</span>: {
        <span class="hljs-attr">assetFileNames</span>: <span class="hljs-string">'assets/[name].[hash].[ext]'</span>
      }
    }
  }
}
</code></pre>
<p><strong>æœ€ä½³å®è·µï¼š</strong></p>
<ul>
<li>ESæ ¼å¼Workeræ¯”IIFEæ ¼å¼åŠ è½½æ›´å¿«ä¸”æ”¯æŒé¡¶çº§await</li>
<li>ä¸ºWorkerå•ç‹¬é…ç½®Rollupé€‰é¡¹å¯ä»¥ä¼˜åŒ–èµ„æºå“ˆå¸Œç­–ç•¥</li>
<li>Chrome DevToolsç°åœ¨èƒ½æ›´å¥½åœ°è°ƒè¯•ESæ ¼å¼Worker</li>
</ul>
<h3 data-id="heading-6">4. æ–‡ä»¶ç³»ç»Ÿç¼“å­˜ç­–ç•¥è°ƒä¼˜</h3>
<p>Viteçš„æ–‡ä»¶ç³»ç»Ÿç¼“å­˜æœºåˆ¶å¯¹æ€§èƒ½è‡³å…³é‡è¦ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">cacheDir</span>: <span class="hljs-string">'./node_modules/.vite-myapp'</span>,
  <span class="hljs-attr">build</span>: {
    <span class="hljs-attr">rollupOptions</span>: {
      cachePersistentPathCacheKeyPathOptionstrategyCacheStrategyfalse,
      <span class="hljs-attr">outputCacheDirectory</span>:<span class="hljs-string">'./node_modules/.rollup-cache'</span>
    }
  },
}
</code></pre>
<p><strong>æ·±åº¦ä¼˜åŒ–æŠ€å·§ï¼š</strong></p>
<ul>
<li><strong>ç‹¬ç«‹ç¼“å­˜ç›®å½•</strong>ï¼šä¸ºä¸åŒé¡¹ç›®è®¾ç½®ä¸åŒç¼“å­˜ç›®å½•é¿å…å†²çª</li>
<li><strong>SSRç‰¹æ®Šå¤„ç†</strong>ï¼šæœåŠ¡ç«¯æ¸²æŸ“æ—¶åº”å•ç‹¬é…ç½®<code>ssr.cacheDir</code></li>
<li><strong>CIç¯å¢ƒä¼˜åŒ–</strong>ï¼šåœ¨æŒç»­é›†æˆä¸­å¤ç”¨ç¼“å­˜ç›®å½•å¯èŠ‚çœ50%ä»¥ä¸Šæ„å»ºæ—¶é—´</li>
</ul>
<h3 data-id="heading-7">5. HMRçƒ­æ›´æ–°ç­–ç•¥è¿›é˜¶é…ç½®</h3>
<p>çƒ­æ›´æ–°(HMR)æ˜¯å¼€å‘ä½“éªŒçš„å…³é”®ï¼Œé«˜çº§é…ç½®å¯ä»¥æ˜¾è‘—æå‡å“åº”é€Ÿåº¦ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
 serverwatchhmrwatchserverwatchServerWatchOptionsserver.<span class="hljs-property">watch</span>:{
   usePollingtrueinterval1000,
   ignored[<span class="hljs-string">'!**/node_modules/your-package/**'</span>]
 },
 <span class="hljs-attr">hmr</span>:{
   <span class="hljs-attr">protocol</span>:<span class="hljs-string">'ws'</span>,
   <span class="hljs-attr">host</span>:<span class="hljs-string">'localhost'</span>,
   port24678,
   overlayfalse 
 }
}
</code></pre>
<p><strong>ä¸“ä¸šå»ºè®®ï¼š</strong></p>
<ul>
<li>Dockerç¯å¢ƒä¸‹å¯ç”¨<code>usePolling</code>è§£å†³æ–‡ä»¶ç›‘å¬é—®é¢˜</li>
<li><strong>ç²¾ç¡®å¿½ç•¥</strong>node_modulesä¸­ä¸éœ€è¦ç›‘å¬çš„åŒ…ï¼ˆä½¿ç”¨å¦å®šæ¨¡å¼ï¼‰</li>
<li><strong>è‡ªå®šä¹‰HMRç«¯å£</strong>é¿å…ä¸å…¶ä»–æœåŠ¡å†²çª</li>
<li><strong>ç¦ç”¨é”™è¯¯è¦†ç›–å±‚</strong>(overlay)å¯å‡å°‘10%-15%çš„çƒ­æ›´æ–°å»¶è¿Ÿ</li>
</ul>
<h2 data-id="heading-8"/>
<h2 data-id="heading-9"/>
<h2 data-id="heading-10"/>
<h2 data-id="heading-11"/>
<h2 data-id="heading-12"/>
<h2 data-id="heading-13"/>
<h2 data-id="heading-14"/>
<h2 data-id="heading-15"/>
<h2 data-id="heading-16"/>
<h2 data-id="heading-17"/>
<h2 data-id="heading-18"/>
<h2 data-id="heading-19"/>
<h2 data-id="heading-20"/>
<h2 data-id="heading-21"/>
<h2 data-id="heading-22"/>
<h2 data-id="heading-23"/>
<p>æ€»ç»“</p>
<p>é€šè¿‡è¿™äº”ä¸ªç»´åº¦çš„æ·±åº¦ä¼˜åŒ–â€”â€”ä¾èµ–é¢„æ„å»ºç­–ç•¥ã€CSSå¤„ç†ç²¾ç»†åŒ–ã€Workerèµ„æºç®¡ç†ã€æ–‡ä»¶ç³»ç»Ÿç¼“å­˜è°ƒä¼˜å’ŒHMRé«˜çº§é…ç½®â€”â€”ä½ çš„Viteé¡¹ç›®å°†è·å¾—æ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚å®é™…æµ‹è¯•è¡¨æ˜ï¼Œç»¼åˆåº”ç”¨è¿™äº›æŠ€æœ¯åï¼š</p>
<ol>
<li><strong>å†·å¯åŠ¨æ—¶é—´ç¼©çŸ­40%-60%</strong></li>
<li><strong>çƒ­æ›´æ–°é€Ÿåº¦æå‡30%-50%</strong></li>
<li><strong>ç”Ÿäº§æ„å»ºæ—¶é—´å‡å°‘20%-35%</strong></li>
</ol>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œè¿™äº›ä¼˜åŒ–ä¸ä»…é€‚ç”¨äºå¤§å‹é¡¹ç›®ï¼Œä¸­å°å‹é¡¹ç›®ä¹Ÿèƒ½ä»ä¸­å—ç›Šã€‚å»ºè®®è¯»è€…æ ¹æ®é¡¹ç›®ç‰¹ç‚¹é€‰æ‹©æ€§å®æ–½è¿™äº›ç­–ç•¥ï¼Œå¹¶é€šè¿‡<code>vite --debug</code>å‘½ä»¤ç›‘æ§å…·ä½“æ•ˆæœã€‚</p>
<p>è®°ä½ï¼Œæ€§èƒ½ä¼˜åŒ–æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ã€‚éšç€Viteç‰ˆæœ¬çš„è¿­ä»£å’Œæ–°ç‰¹æ€§çš„åŠ å…¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸æ–­é‡æ–°è¯„ä¼°å’Œè°ƒæ•´è¿™äº›é…ç½®ã€‚å¸Œæœ›æœ¬æ–‡èƒ½ä¸ºä½ æä¾›ä¸€ä¸ªé«˜æ€§èƒ½Viteé¡¹ç›®çš„åŸºå‡†å‚è€ƒã€‚</p>
<blockquote>
<p>"Premature optimization is the root of all evil" â€”â€” Donald Knuth<br/>
...ä½†å¯¹äºç°ä»£å‰ç«¯å·¥å…·é“¾æ¥è¯´ï¼Œ"æ˜æ™ºçš„é¢„è®¾ä¼˜åŒ–"å·²æˆä¸ºå¿…å¤‡æŠ€èƒ½</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Javaæ€§èƒ½è°ƒä¼˜çš„7ä¸ªè¢«ä½ä¼°çš„æŠ€å·§ï¼šä»ä»£ç åˆ°JVMå…¨é“¾è·¯ä¼˜åŒ–]]></title>    <link>https://juejin.cn/post/7570533058841198627</link>    <guid>https://juejin.cn/post/7570533058841198627</guid>    <pubDate>2025-11-10T04:19:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570533058841198627" data-draft-id="7570651893867774004" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Javaæ€§èƒ½è°ƒä¼˜çš„7ä¸ªè¢«ä½ä¼°çš„æŠ€å·§ï¼šä»ä»£ç åˆ°JVMå…¨é“¾è·¯ä¼˜åŒ–"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-10T04:19:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="IT_é™ˆå¯’"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Javaæ€§èƒ½è°ƒä¼˜çš„7ä¸ªè¢«ä½ä¼°çš„æŠ€å·§ï¼šä»ä»£ç åˆ°JVMå…¨é“¾è·¯ä¼˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    IT_é™ˆå¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T04:19:27.000Z" title="Mon Nov 10 2025 04:19:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Javaæ€§èƒ½è°ƒä¼˜çš„7ä¸ªè¢«ä½ä¼°çš„æŠ€å·§ï¼šä»ä»£ç åˆ°JVMå…¨é“¾è·¯ä¼˜åŒ–</strong></h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>åœ¨Javaå¼€å‘ä¸­ï¼Œæ€§èƒ½ä¼˜åŒ–æ˜¯ä¸€ä¸ªæ°¸æ’çš„è¯é¢˜ã€‚è™½ç„¶å¤§å¤šæ•°å¼€å‘è€…ç†Ÿæ‚‰åŸºç¡€çš„ä¼˜åŒ–æ‰‹æ®µï¼ˆå¦‚ä½¿ç”¨ç¼“å­˜ã€å‡å°‘æ•°æ®åº“æŸ¥è¯¢ç­‰ï¼‰ï¼Œä½†è®¸å¤šæ·±å±‚æ¬¡çš„æŠ€å·§å¾€å¾€è¢«ä½ä¼°æˆ–å¿½è§†ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨7ä¸ªé²œä¸ºäººçŸ¥ä½†æå…·ä»·å€¼çš„Javaæ€§èƒ½è°ƒä¼˜æŠ€å·§ï¼Œæ¶µç›–ä»ä»£ç ç¼–å†™åˆ°JVMå‚æ•°é…ç½®çš„å…¨é“¾è·¯ä¼˜åŒ–ã€‚è¿™äº›æŠ€å·§åŸºäºçœŸå®çš„å®è·µç»éªŒå’Œæƒå¨èµ„æ–™ï¼ˆå¦‚Oracleå®˜æ–¹æ–‡æ¡£ã€JVMè§„èŒƒåŠæ€§èƒ½ä¸“å®¶çš„å»ºè®®ï¼‰ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…æŒ–æ˜æ›´æ·±å±‚æ¬¡çš„æ€§èƒ½æ½œåŠ›ã€‚</p>
<hr/>
<h3 data-id="heading-2">1. å­—ç¬¦ä¸²æ“ä½œçš„éšè—é™·é˜±ä¸ä¼˜åŒ–</h3>
<p>å­—ç¬¦ä¸²æ“ä½œæ˜¯Javaä¸­æœ€å¸¸è§çš„æ€§èƒ½ç“¶é¢ˆä¹‹ä¸€ï¼Œå°¤å…¶æ˜¯<code>String</code>çš„ä¸å¯å˜æ€§å¯¼è‡´çš„é¢‘ç¹å¯¹è±¡åˆ›å»ºã€‚ä»¥ä¸‹æ˜¯ä¸¤ä¸ªå…³é”®ä¼˜åŒ–ç‚¹ï¼š</p>
<h4 data-id="heading-3">ä½¿ç”¨<code>StringBuilder</code>æ›¿ä»£å­—ç¬¦ä¸²æ‹¼æ¥</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½æ•ˆå†™æ³•</span>
<span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-string">""</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
    result += i;
}

<span class="hljs-comment">// é«˜æ•ˆå†™æ³•</span>
<span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
    sb.append(i);
}
<span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> sb.toString();
</code></pre>
<p><strong>åŸç†</strong>ï¼šæ¯æ¬¡<code>+=</code>æ“ä½œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„<code>String</code>å¯¹è±¡ï¼Œè€Œ<code>StringBuilder</code>é€šè¿‡å¯å˜å­—ç¬¦æ•°ç»„é¿å…é‡å¤åˆ†é…å†…å­˜ã€‚</p>
<h4 data-id="heading-4">é¢„åˆ†é…<code>StringBuilder</code>å®¹é‡</h4>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>StringBuilder</code>çš„åˆå§‹å®¹é‡ä¸º16å­—èŠ‚ï¼Œé¢‘ç¹æ‰©å®¹ä¼šæ¶ˆè€—èµ„æºã€‚é€šè¿‡é¢„ä¼°å¤§å°æå‰åˆ†é…å®¹é‡å¯æ˜¾è‘—æå‡æ€§èƒ½ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(<span class="hljs-number">1024</span>); <span class="hljs-comment">// é¢„åˆ†é…1KBç©ºé—´</span>
</code></pre>
<hr/>
<h3 data-id="heading-5">2. é›†åˆç±»çš„é€‰æ‹©ä¸è°ƒä¼˜</h3>
<p>ä¸åŒçš„é›†åˆç±»åœ¨ä¸åŒåœºæ™¯ä¸‹æ€§èƒ½å·®å¼‚å·¨å¤§ï¼š</p>
<h4 data-id="heading-6"><code>ArrayList</code> vs <code>LinkedList</code></h4>
<ul>
<li><strong>éšæœºè®¿é—®</strong>ï¼š<code>ArrayList</code>çš„å¤æ‚åº¦ä¸ºO(1)ï¼Œè€Œ<code>LinkedList</code>ä¸ºO(n)ã€‚</li>
<li><strong>æ’å…¥/åˆ é™¤</strong>ï¼šåœ¨å¤´éƒ¨æ’å…¥æ—¶ï¼Œ<code>LinkedList</code>ï¼ˆO(1)ï¼‰ä¼˜äº<code>ArrayList</code>ï¼ˆO(n)ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-7">HashMapçš„è´Ÿè½½å› å­ä¸åˆå§‹åŒ–å¤§å°</h4>
<p>é»˜è®¤è´Ÿè½½å› å­ï¼ˆ0.75ï¼‰å’Œåˆå§‹å®¹é‡ï¼ˆ16ï¼‰å¯èƒ½ä¸é€‚ç”¨äºé«˜é¢‘åœºæ™¯ã€‚ä¾‹å¦‚ï¼Œè‹¥é¢„æœŸå­˜å‚¨10,000ä¸ªå…ƒç´ ï¼š</p>
<pre><code class="hljs language-java" lang="java">Map&lt;String, Integer&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;(<span class="hljs-number">16384</span>, <span class="hljs-number">0.5f</span>); <span class="hljs-comment">// å‡å°‘æ‰©å®¹æ¬¡æ•°</span>
</code></pre>
<hr/>
<h3 data-id="heading-8">3. JITç¼–è¯‘å™¨çš„å†·å¯åŠ¨ä¼˜åŒ–</h3>
<p>Javaçš„JITï¼ˆJust-In-Timeï¼‰ç¼–è¯‘å™¨è™½ç„¶èƒ½åŠ¨æ€ä¼˜åŒ–çƒ­ç‚¹ä»£ç ï¼Œä½†å†·å¯åŠ¨é˜¶æ®µä»å¯èƒ½æˆä¸ºç“¶é¢ˆã€‚ä»¥ä¸‹æ–¹æ³•å¯ç¼“è§£é—®é¢˜ï¼š</p>
<h4 data-id="heading-9"><strong>åˆ†å±‚ç¼–è¯‘ç­–ç•¥</strong></h4>
<p>é€šè¿‡JVMå‚æ•°å¯ç”¨åˆ†å±‚ç¼–è¯‘ï¼ˆé»˜è®¤å·²å¼€å¯ï¼‰ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:+TieredCompilation</span>
</code></pre>
<p><strong>ä½œç”¨</strong>ï¼šç»“åˆè§£é‡Šæ‰§è¡Œä¸ç¼–è¯‘æ‰§è¡Œçš„ä¼˜åŠ¿ï¼Œé€æ­¥æå‡æ€§èƒ½ã€‚</p>
<h4 data-id="heading-10"><strong>é¢„çƒ­å…³é”®è·¯å¾„ä»£ç </strong></h4>
<p>åœ¨é«˜å¹¶å‘ç³»ç»Ÿä¸­ï¼Œå¯é€šè¿‡æ¨¡æ‹Ÿè¯·æ±‚æå‰è§¦å‘JITç¼–è¯‘æ ¸å¿ƒé€»è¾‘ã€‚</p>
<hr/>
<h3 data-id="heading-11">4. é€ƒé€¸åˆ†æä¸æ ˆä¸Šåˆ†é…</h3>
<p>é€ƒé€¸åˆ†æï¼ˆEscape Analysisï¼‰æ˜¯JVMçš„ä¸€é¡¹é«˜çº§ä¼˜åŒ–æŠ€æœ¯ï¼Œç”¨äºåˆ¤æ–­å¯¹è±¡æ˜¯å¦â€œé€ƒé€¸â€å‡ºå½“å‰æ–¹æ³•æˆ–çº¿ç¨‹ä½œç”¨åŸŸã€‚è‹¥æœªé€ƒé€¸ï¼ŒJVMå¯èƒ½ç›´æ¥åœ¨æ ˆä¸Šåˆ†é…å¯¹è±¡ï¼ˆè€Œéå †ï¼‰ï¼Œå‡å°‘GCå‹åŠ›ã€‚</p>
<h4 data-id="heading-12"><strong>å¦‚ä½•åˆ©ç”¨é€ƒé€¸åˆ†æï¼Ÿ</strong></h4>
<ul>
<li><strong>å±€éƒ¨åŒ–å¯¹è±¡ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šå°½é‡ç¼©å°å¯¹è±¡çš„ä½œç”¨åŸŸã€‚</li>
<li><strong>é¿å…è¿”å›å†…éƒ¨æ•°ç»„å¼•ç”¨</strong>ï¼šé˜²æ­¢å¯¹è±¡é€ƒé€¸åˆ°å¤–éƒ¨ã€‚</li>
</ul>
<p>ç¤ºä¾‹å¯¹æ¯”ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¯èƒ½å¯¼è‡´é€ƒé€¸</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">getData</span><span class="hljs-params">()</span> {
    <span class="hljs-type">byte</span>[] data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(data); <span class="hljs-comment">// dataé€šè¿‡Stringé€ƒé€¸</span>
}

<span class="hljs-comment">// æ›´ä¼˜å†™æ³•ï¼ˆè‹¥ä¸éœ€è¿”å›ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processData</span><span class="hljs-params">()</span> {
    <span class="hljs-type">byte</span>[] data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>]; <span class="hljs-comment">// å¯èƒ½æ ˆä¸Šåˆ†é…</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-13">5. GCè°ƒä¼˜çš„ä½æˆæœ¬é«˜å›æŠ¥æŠ€å·§</h3>
<h4 data-id="heading-14"><strong>é€‰æ‹©åˆé€‚çš„åƒåœ¾æ”¶é›†å™¨</strong></h4>

























<table><thead><tr><th>GCç±»å‹</th><th>é€‚ç”¨åœºæ™¯</th><th>JVMå‚æ•°</th></tr></thead><tbody><tr><td>G1GC</td><td>å¤§å †ã€ä½å»¶è¿Ÿéœ€æ±‚</td><td><code>-XX:+UseG1GC</code></td></tr><tr><td>ZGC</td><td>TBçº§å †ã€äºšæ¯«ç§’æš‚åœ</td><td><code>-XX:+UseZGC</code></td></tr><tr><td>Shenandoah</td><td>NUMAæ¶æ„ã€ä½å»¶è¿Ÿ</td><td><code>-XX:+UseShenandoahGC</code></td></tr></tbody></table>
<h4 data-id="heading-15"><strong>è°ƒæ•´SurvivoråŒºæ¯”ä¾‹</strong></h4>
<p>å¯¹äºçŸ­ç”Ÿå‘½å‘¨æœŸå¯¹è±¡å¤šçš„åº”ç”¨ï¼Œå¯é€šè¿‡è°ƒæ•´SurvivoråŒºæ¯”ä¾‹å‡å°‘æ™‹å‡åˆ°è€å¹´ä»£çš„é¢‘ç‡ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">-XX:<span class="hljs-attr">SurvivorRatio</span>=<span class="hljs-number">8</span> -XX:NewRatio=<span class="hljs-number">2</span>
</code></pre>
<hr/>
<h3 data-id="heading-16">6. Native Memoryçš„ç›‘æ§ä¸æ³„æ¼é˜²èŒƒ</h3>
<p>Javaåº”ç”¨çš„å†…å­˜é—®é¢˜ä¸é™äºå †å†…å­˜ï¼ŒNative Memoryæ³„æ¼åŒæ ·è‡´å‘½ã€‚ä»¥ä¸‹å·¥å…·å¯ç”¨äºè¯Šæ–­ï¼š</p>
<h4 data-id="heading-17"><strong>NMTï¼ˆNative Memory Trackingï¼‰</strong></h4>
<p>å¯ç”¨NMTç›‘æ§ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:NativeMemoryTracking=detail</span> -<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:+UnlockDiagnosticVMOptions</span>
</code></pre>
<p>æŸ¥çœ‹æŠ¥å‘Šï¼š</p>
<pre><code class="hljs language-bash" lang="bash">jcmd &lt;pid&gt; VM.native_memory summary
</code></pre>
<h4 data-id="heading-18"><strong>å¸¸è§æ³„æ¼åœºæ™¯</strong></h4>
<ul>
<li>JNIè°ƒç”¨æœªé‡Šæ”¾çš„èµ„æºã€‚</li>
<li>Direct ByteBufferæœªæ˜¾å¼å›æ”¶ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-19">7. CPUç¼“å­˜å‹å¥½æ€§ç¼–ç¨‹</h3>
<p>ç°ä»£CPUçš„å¤šçº§ç¼“å­˜å¯¹æ€§èƒ½å½±å“æå¤§ã€‚ä»¥ä¸‹æ–¹æ³•å¯æå‡ç¼“å­˜å‘½ä¸­ç‡ï¼š</p>
<h4 data-id="heading-20"><strong>æ•°æ®å±€éƒ¨æ€§åŸç†çš„åº”ç”¨</strong></h4>
<ul>
<li><strong>ç´§å‡‘æ•°æ®ç»“æ„</strong>ï¼šé¿å…ç¨€ç–æ•°æ®å¸ƒå±€ï¼ˆå¦‚äºŒç»´æ•°ç»„ä¼˜å…ˆè¡Œå­˜å‚¨ï¼‰ã€‚</li>
<li><strong>ä¼ªå…±äº«é—®é¢˜çš„è§£å†³</strong> ï¼šä½¿ç”¨å¡«å……æˆ–æ³¨è§£å¯¹é½ç¼“å­˜è¡Œï¼š</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Contended</span> <span class="hljs-comment">// JDK8+æ”¯æŒ </span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">long</span> counter;
</code></pre>
<hr/>
<h3 data-id="heading-21">æ€»ç»“</h3>
<p>Javaæ€§èƒ½è°ƒä¼˜æ˜¯ä¸€ä¸ªæ¶‰åŠä»£ç ã€JVMä¹ƒè‡³ç¡¬ä»¶çš„ç³»ç»Ÿæ€§å·¥ç¨‹ã€‚æœ¬æ–‡ä»‹ç»çš„7ä¸ªæŠ€å·§â€”â€”ä»å­—ç¬¦ä¸²æ“ä½œçš„å¾®è§‚ä¼˜åŒ–åˆ°CPUç¼“å­˜çš„å®è§‚è®¾è®¡â€”â€”è¦†ç›–äº†å®¹æ˜“è¢«å¿½è§†å´è‡³å…³é‡è¦çš„é¢†åŸŸã€‚å®é™…åº”ç”¨ä¸­éœ€ç»“åˆProfilingå·¥å…·ï¼ˆå¦‚Async Profilerã€VisualVMï¼‰é‡åŒ–åˆ†æç“¶é¢ˆç‚¹ï¼Œé¿å…è¿‡æ—©ä¼˜åŒ–å¸¦æ¥çš„å¤æ‚æ€§ä¸Šå‡ã€‚è®°ä½ï¼šâ€œæ²¡æœ‰é“¶å¼¹â€ï¼Œåªæœ‰æŒç»­æµ‹é‡ä¸è¿­ä»£æ‰èƒ½æ„å»ºçœŸæ­£é«˜æ€§èƒ½çš„ç³»ç»Ÿï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å·¥ä½œç¬”è®° - WSLç«¯å£æ˜ å°„]]></title>    <link>https://juejin.cn/post/7570491473033904137</link>    <guid>https://juejin.cn/post/7570491473033904137</guid>    <pubDate>2025-11-10T04:20:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570491473033904137" data-draft-id="7569405389307101222" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å·¥ä½œç¬”è®° - WSLç«¯å£æ˜ å°„"/> <meta itemprop="keywords" content="åç«¯,ç½‘ç»œåè®®,Visual Studio Code"/> <meta itemprop="datePublished" content="2025-11-10T04:20:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JohnYan"/> <meta itemprop="url" content="https://juejin.cn/user/3872909003334776"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å·¥ä½œç¬”è®° - WSLç«¯å£æ˜ å°„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3872909003334776/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JohnYan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T04:20:58.000Z" title="Mon Nov 10 2025 04:20:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>ç¬”è€…åœ¨æ—¥å¸¸çš„å¼€å‘å·¥ä½œä¸­ï¼Œé‡åˆ°äº†è¿™ä¹ˆä¸€ä¸ªé—®é¢˜ã€‚</p>
<p>åŸºäºä»£ç å…¼å®¹æ€§çš„è€ƒè™‘ï¼Œè™½ç„¶ç¬”è€…ä½¿ç”¨Windowså¹³å°å·¥ä½œï¼Œä½†ç¼–å†™çš„ä»£ç ï¼Œæ˜¯å·¥ä½œåœ¨Linuxç³»ç»Ÿå½“ä¸­çš„ã€‚ç¬”è€…ä½¿ç”¨çš„å¼€å‘å·¥å…·VSCodeå·²ç»é…ç½®å¥½äº†è¿œç¨‹å¼€å‘å’Œè°ƒè¯•ï¼Œä¹Ÿå°±æ˜¯è¯´è™½ç„¶è¡¨é¢ä¸Šè¿˜æ˜¯ä½¿ç”¨Windowsç³»ç»Ÿå’Œå·¥å…·è¿›è¡Œå¼€å‘ï¼Œä½†å®é™…çš„é¡¹ç›®ä»£ç å’Œç¨‹åºæ‰§è¡Œï¼Œå·²ç»åœ¨ä¸€ä¸ªè¿œç¨‹çš„Linuxç¯å¢ƒå½“ä¸­äº†ã€‚è¿™ä¸ªä¸»é¢˜ï¼Œç¬”è€…åœ¨å¦å¤–ä¸€ç¯‡åšæ–‡å·²ç»æ¢è®¨è¿‡äº†ã€‚</p>
<p>ç°åœ¨é‡åˆ°çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœè¿™ä¸ªè¿œç¨‹Linuxç³»ç»Ÿï¼Œä¸æ˜¯ä¸€ä¸ªæ­£å¸¸å®Œæ•´çš„Linuxï¼Œè€Œæ˜¯ä¸€ä¸ªè¿è¡Œåœ¨Windowsç¯å¢ƒä¸­çš„WSLï¼Œå®ƒå¯èƒ½æ²¡æœ‰æ­£å¸¸çš„ç½‘ç»œæ¥å£å’Œé…ç½®ï¼Œå¦‚ä½•ä»å¤–éƒ¨ä¹Ÿèƒ½å¤Ÿæ­£å¸¸çš„è®¿é—®è¿™ä¸ªè¿è¡Œåœ¨WSLä¸­çš„Webåº”ç”¨å‘¢ï¼Ÿ</p>
<p>ä»¥ç¬”è€…çš„ç¯å¢ƒä¸ºä¾‹ã€‚åœ¨ä¸€ä¸ªWindows 11ç³»ç»Ÿä¸­ï¼Œè¿è¡Œäº†ä¸€ä¸ªLinuxå­ç³»ç»Ÿ(WSL2ï¼Œå…·ä½“ä¸ºDebian 13)ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒWindowsä¼šä¸ºè¿™ä¸ªç³»ç»Ÿåˆ›å»ºä¸€ä¸ªNATè™šæ‹Ÿç½‘å¡ï¼ˆvEthnet, 172ç½‘æ®µ,ä¸‹å›¾ï¼‰ï¼Œå¹¶ä¸å®¿ä¸»æœºè¿›è¡Œé€šä¿¡ï¼Œè¿™æ ·ï¼Œé™¤äº†å®¿ä¸»æœºä¹‹å¤–ï¼Œå¯¹äºå…¶ä»–ä¸»æœºè€Œè¨€ï¼Œå®ƒå…¶å®å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç§æœ‰ç½‘ç»œã€‚åœ¨å®¿ä¸»æœºä¸Šçš„å„ç§æ“ä½œæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ä½†æ˜¯ï¼Œå¦‚æœæƒ³è¦æŠŠåœ¨WSLä¸­è¿è¡Œçš„Webåº”ç”¨ï¼Œå‘å¸ƒåˆ°å¤–éƒ¨(ç›¸å¯¹äºå®¿ä¸»æœº)ï¼Œå°±ä¼šå‡ºç°æ— æ³•ç›´æ¥è®¿é—®çš„é—®é¢˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d15bb98d9c3844ca86dad39c8c9e24b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm9obllhbg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763353257&amp;x-signature=fD9a5m167ajA2aVkpoLB5qTwUyM%3D" alt="image.png" loading="lazy"/></p>
<p>ç¬”è€…é¦–å…ˆæƒ³åˆ°çš„æ˜¯ä½¿ç”¨â€œæ¡¥æ¥â€çš„æ–¹å¼ã€‚å› ä¸ºä»¥å‰ç¬”è€…åœ¨ä½¿ç”¨VirtualBoxç­‰è½¯ä»¶çš„æ—¶å€™ï¼Œæ˜¯çŸ¥é“æœ‰ä¸€ä¸ªç½‘ç»œâ€œæ¡¥æ¥â€çš„æ¨¡å¼çš„ï¼Œå¹¶ä¸”å¯ä»¥ç›´æ¥é€‰æ‹©å’Œé…ç½®ï¼Œéå¸¸æ–¹ä¾¿ã€‚ä½†ç¬”è€…å¥½åƒæ²¡æœ‰åœ¨Windows11ç³»ç»Ÿä¸­ï¼Œæ‰¾åˆ°ç±»ä¼¼çš„é…ç½®æˆ–è€…ç›¸å…³å·¥å…·ã€‚åæ¥æŸ¥è¯¢äº†è§£åˆ°ï¼Œå¦‚æœç›´æ¥å°†æ•´ä¸ªWSLç½‘ç»œç›´æ¥æ¡¥æ¥ï¼Œç›¸å…³æ“ä½œæ¯”è¾ƒå¤æ‚ï¼Œè€Œä¸”å¥½åƒç¡®å®ä¹Ÿä¸æ˜¯å¾ˆå®‰å…¨ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰æ·±å…¥ç ”ç©¶è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>ç°åœ¨æ‰¾åˆ°å¹¶ä¸”å®æ–½çš„æ¯”è¾ƒç®€å•æ˜“è¡Œçš„æŠ€æœ¯æ–¹æ¡ˆï¼Œå°±æ˜¯<strong>NATç«¯å£æ˜ å°„</strong>ã€‚</p>
<p>åŸç†ä¹Ÿå¾ˆç®€å•ï¼Œå’Œå®¶é‡Œè·¯ç”±å™¨çš„NATç«¯å£æ˜ å°„é…ç½®æ˜¯ç±»ä¼¼çš„ã€‚å°†å†…éƒ¨ä¸»æœº(æ­¤å¤„å°±æ˜¯WSL)çš„ä¸€ä¸ªç«¯å£ï¼Œæ˜ å°„åˆ°å¤–éƒ¨ç«¯å£(Windowså®¿ä¸»æœº)ä¸Šï¼Œè¿™æ ·å¯¹äºè¿™ä¸ªå¤–éƒ¨ç«¯å£çš„è®¿é—®ï¼Œéƒ½ä¼šè½¬å‘åˆ°å†…éƒ¨ç«¯å£ä¹‹ä¸Šã€‚å¦‚æœè¿™ä¸ªç«¯å£ç”±ä¸€ä¸ªWEBåº”ç”¨æä¾›ï¼Œå°±ç›¸å½“äºå°†åº”ç”¨å‘å¸ƒåˆ°æŒ‡å®šçš„ç«¯å£ä¹‹ä¸Šäº†ã€‚</p>
<p>ç®€å•ç†è§£äº†åœºæ™¯å’ŒåŸç†ä¹‹åï¼Œä¸‹é¢æ¥çœ‹çœ‹å…·ä½“æ“ä½œã€‚</p>
<h2 data-id="heading-1">æ“ä½œ</h2>
<p>ç›¸å…³çš„æ“ä½œï¼Œå…¶å®å°±æ˜¯ç½‘ç»œç«¯å£çš„é…ç½®ï¼Œåœ¨Windowsä¸‹å¯ä»¥ä½¿ç”¨å¸¦æœ‰ç®¡ç†å‘˜æƒé™çš„PowerShellå‘½ä»¤æ¥å®Œæˆã€‚</p>
<p>å…·ä½“é¡¹ç›®å’Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ul>
<li>å‡†å¤‡åœºæ™¯å’ŒåŸºæœ¬å‚æ•°</li>
</ul>
<blockquote>
<p>Windowså®¿ä¸»æœºåœ°å€ä¸ºï¼š 192.168.10.137</p>
<p>WSLä¸»æœºåœ°å€ä¸º: 172.20.185.14/20</p>
<p>æ˜ å°„ç«¯å£ï¼š 7083(WSL) -&gt; 7083(Host)</p>
</blockquote>
<p>WSLçš„Webåº”ç”¨ï¼Œæœ¬èº«æ˜¯è¿è¡Œåœ¨7083ç«¯å£çš„ï¼›åœ¨å®¿ä¸»ç«¯ï¼Œç«¯å£æ˜ å°„æ˜¯å¯ä»¥ä¸åŒçš„ï¼Œè§†éœ€æ±‚å’Œæ–¹ä¾¿è€Œå®šï¼Œè¿™é‡Œè®¾ç½®æˆç›¸åŒï¼Œæ–¹ä¾¿è®°å¿†å’Œç®¡ç†ã€‚</p>
<ul>
<li>æ‰“å¼€ç«¯å£æ˜ å°„</li>
</ul>
<p>Powershellä¸­æ‰§è¡Œï¼š</p>
<blockquote>
<p>netsh interface portproxy add v4tov4 listenport=7083 listenaddress=0.0.0.0 connectaddress=172.20.185.14 connectport=7083</p>
</blockquote>
<p>è¿™ä¸ªå‘½ä»¤å¦‚æœæ­£å¸¸è¿è¡Œï¼Œä¸ä¼šæœ‰ä»€ä¹ˆæç¤ºä¿¡æ¯ã€‚</p>
<p>ç¬”è€…ç†è§£ï¼Œè¿™ä¸ªå‘½ä»¤ï¼Œå°±æ˜¯ä½¿ç”¨netshå‘½ä»¤ï¼Œåœ¨ä¸€ä¸ªç‰¹æ®Šçš„æ¥å£â€œportproxyâ€ä¸­ï¼Œå¢åŠ äº†ä¸€æ¡v4tov4çš„æ¡ç›®ï¼Œä»è€Œå®ç°ä¸€ä¸ªç«¯å£æ˜ å°„çš„ä»£ç†è§„åˆ™ã€‚æ˜ å°„çš„å‚æ•°åˆ†åˆ«å°±æ˜¯ä¾¦å¬(listen, å®¿ä¸»æœº)çš„åœ°å€å’Œç«¯å£ï¼Œå’Œè¿æ¥(connect,ç›®æ ‡ä¸»æœº)çš„åœ°å€å’Œç«¯å£ã€‚æ‰€ä»¥å®è´¨ä¸Šï¼Œç«¯å£æ˜ å°„ï¼Œåœ¨Windowsä¸Šå°±æ˜¯ä¸€ä¸ªåè®®ä»£ç†è§„åˆ™ã€‚</p>
<ul>
<li>æ‰“å¼€å®¿ä¸»ç«¯é˜²ç«å¢™</li>
</ul>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå®¿ä¸»æœºæ˜ å°„ä½¿ç”¨çš„éƒ½æ˜¯éæ ‡ç«¯å£ï¼Œå¯èƒ½éœ€è¦åœ¨Windowsé˜²ç«å¢™ä¸Šè¿›è¡Œé…ç½®</p>
<blockquote>
<p>netsh advfirewall firewall add rule name="WSL2 7803" dir=in action=allow protocol=TCP localport=7083</p>
</blockquote>
<p>è¿™ä¸ªå‘½ä»¤ä¼šåœ¨Windowsé˜²ç«å¢™è§„åˆ™ä¸­åˆ›å»ºä¸€ä¸ªå…¥ç«™ç«¯å£ä¸º7083ï¼Œåè®®æ˜¯TCPçš„å…è®¸æ“ä½œã€‚å…¶å®å°±æ˜¯æ‰“å¼€å®¿ä¸»æœºçš„7083TCPç«¯å£ã€‚</p>
<ul>
<li>æ‰“å¼€WSLé˜²ç«å¢™</li>
</ul>
<p>ç†è®ºè€Œè¨€ï¼Œå¦‚æœåœ¨ä¸€ä¸ªç‹¬ç«‹çš„Linuxç³»ç»Ÿè¿›è¡Œç½‘ç»œè®¿é—®ï¼Œè¿˜éœ€è¦é…ç½®å¯¹åº”çš„é˜²ç«å¢™è§„åˆ™ã€‚ä½†ç¬”è€…å®é™…ä¸Šæ²¡æœ‰åœ¨WSLä¸­è¿›è¡Œæ“ä½œï¼Œå°±å®ç°äº†ç«¯å£çš„æ˜ å°„ã€‚å¯èƒ½æ˜¯WSLæ¯”è¾ƒç‰¹æ®Šï¼Œæ— éœ€é¢å¤–é…ç½®ï¼Œæˆ–è€…M$å·²ç»é›†æˆäº†WSLå’ŒWindowså®¿ä¸»æœºçš„é˜²ç«å¢™è§„åˆ™å—ï¼Ÿ</p>
<p>å¦‚æœæ˜¯ä¸€ä¸ªæ­£å¸¸çš„Linuxä¸»æœºï¼Œå¯èƒ½çš„éœ€è¦æ“ä½œå¦‚ä¸‹(ä½¿ç”¨ufwé˜²ç«å¢™)ï¼š</p>
<blockquote>
<p>sudo ufw allow 7083/tcp</p>
</blockquote>
<ul>
<li>æµ‹è¯•æ˜ å°„å…³ç³»</li>
</ul>
<p>å¯ä»¥ç®€å•çš„å¯¹è¿™ä¸ªæ˜ å°„å…³ç³»è¿›è¡Œæµ‹è¯•ï¼Œå°±æ˜¯ç”¨ä»»ä½•æ–¹å¼ï¼Œè®¿é—®è¿™ä¸ªå¤–éƒ¨ç«¯å£å°±å¯ä»¥äº†ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">
// ä»å®¿ä¸»æœºå‘èµ·ï¼Œ è®¿é—®WSL
curl http://172.20.185.14:7083
NotFound

// ä»å®¿ä¸»æœºå‘èµ·ï¼Œè®¿é—®å®¿ä¸»æœº
curl http://192.168.10.137:7083
NotFound


</code></pre>
<p>ä½œä¸ºWebAPIåº”ç”¨ï¼Œè¿™é‡Œçš„é»˜è®¤å“åº”å†…å®¹ï¼Œå°±æ˜¯NotFoundï¼Œè€Œä¸”ä¸¤è€…è®¿é—®ç»“æœä¸€è‡´ï¼Œè¯´æ˜ä»å†…å¤–éƒ¨çš„Webåº”ç”¨è¿è¡Œå’Œè®¿é—®éƒ½æ˜¯æ­£å¸¸çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»»ä½•èƒ½å¤Ÿè®¿é—®å®¿ä¸»æœºçš„å…¶ä»–ä¸»æœºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åŒæ ·çš„æ–¹å¼è®¿é—®WSLçš„ç½‘ç»œåº”ç”¨äº†ã€‚</p>
<p>è‡³æ­¤é…ç½®å’Œæµ‹è¯•å·¥ä½œå°±éƒ½æŒ‰ç…§è®¾æƒ³å’Œé¢„è®¡å®Œæˆäº†ã€‚</p>
<h2 data-id="heading-2">å°ç»“</h2>
<p>æœ¬æ–‡ä»ç¬”è€…æ—¥å¸¸å·¥ä½œä¸­é‡åˆ°çš„ä¸€ä¸ªéœ€è¦å°†è¿è¡Œåœ¨WSLä¸­çš„Webåº”ç”¨å‘å¸ƒå‡ºæ¥çš„éœ€æ±‚å‡ºå‘ï¼Œè®¨è®ºäº†WSLå¯¹ç½‘ç»œåº”ç”¨è®¿é—®çš„é™åˆ¶ï¼Œå³åç»­é€‰æ‹©NATæ˜ å°„çš„æŠ€æœ¯æ–¹æ¡ˆï¼ŒåŒ…æ‹¬å…¶åŸºæœ¬åŸç†å’Œæ“ä½œè¿‡ç¨‹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Agentic AIåŸºç¡€è®¾æ–½å®è·µç»éªŒç³»åˆ—ï¼ˆäº”ï¼‰ï¼šAgentåº”ç”¨ç³»ç»Ÿä¸­çš„èº«ä»½è®¤è¯ä¸æˆæƒç®¡ç†]]></title>    <link>https://juejin.cn/post/7570533058841002019</link>    <guid>https://juejin.cn/post/7570533058841002019</guid>    <pubDate>2025-11-10T03:40:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570533058841002019" data-draft-id="7570604028632776739" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Agentic AIåŸºç¡€è®¾æ–½å®è·µç»éªŒç³»åˆ—ï¼ˆäº”ï¼‰ï¼šAgentåº”ç”¨ç³»ç»Ÿä¸­çš„èº«ä»½è®¤è¯ä¸æˆæƒç®¡ç†"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-10T03:40:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äºšé©¬é€Šäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2850395271209496"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Agentic AIåŸºç¡€è®¾æ–½å®è·µç»éªŒç³»åˆ—ï¼ˆäº”ï¼‰ï¼šAgentåº”ç”¨ç³»ç»Ÿä¸­çš„èº«ä»½è®¤è¯ä¸æˆæƒç®¡ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2850395271209496/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äºšé©¬é€Šäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T03:40:19.000Z" title="Mon Nov 10 2025 03:40:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»24åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c8b0abffc0245b89a76b9a087704044~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=kq%2ByR1j8jj03KbqWisy%2FnN%2F1478%3D" alt="é¦–.webp" loading="lazy"/></p>
<h2 data-id="heading-0">1. å¼•è¨€</h2>
<p>äººå·¥æ™ºèƒ½æ­£ç»å†æ·±åˆ»å˜é©ã€‚ä¼ ç»ŸAIå¤šä¸ºè¢«åŠ¨å·¥å…·ï¼Œè€Œéšç€å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å’Œå¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼ˆMASï¼‰çš„å¿«é€Ÿå‘å±•ï¼ŒAI Agentæ­£å‘å…·æœ‰é«˜åº¦è‡ªä¸»æ€§çš„ä¸»åŠ¨æ™ºèƒ½ä½“ï¼ˆAgentic AIï¼‰æ¼”è¿›ã€‚è¿™äº›AI Agentsèƒ½å¤Ÿè‡ªä¸»æ€è€ƒã€è§„åˆ’å’Œæ‰§è¡Œå¤æ‚ä»»åŠ¡ï¼Œç”šè‡³ååŒå®Œæˆæ›´å¤æ‚çš„ç›®æ ‡ã€‚</p>
<p>è¿™ç§æ¼”è¿›å¸¦æ¥äº†å‰æ‰€æœªæœ‰çš„æœºé‡ï¼ŒåŒæ—¶ä¹Ÿå¼•å‘äº†æ–°çš„å®‰å…¨æŒ‘æˆ˜ï¼Œç‰¹åˆ«æ˜¯åœ¨èº«ä»½è®¤è¯ä¸æˆæƒç®¡ç†æ–¹é¢ã€‚è¿‘å¹´æ¥å‘ç”Ÿçš„å¤šèµ·å®‰å…¨äº‹ä»¶å……åˆ†è¯´æ˜äº†AI Agentèº«ä»½ç®¡ç†çš„é‡è¦æ€§å’Œç´§è¿«æ€§ã€‚2024å¹´11æœˆï¼ŒLangChainç”Ÿæ€ä¸­çš„LangSmithå¹³å°Prompt Hubæš´éœ²å‡ºä¸¥é‡çš„èº«ä»½ä¸æƒé™ç®¡ç†æ¼æ´â€œAgentSmithâ€ã€‚æ”»å‡»è€…é€šè¿‡ä¸Šä¼ å¸¦æœ‰æ¶æ„ä»£ç†é…ç½®çš„promptï¼Œå½“ç”¨æˆ·forkå¹¶æ‰§è¡Œè¿™äº›promptæ—¶ï¼Œç”¨æˆ·çš„é€šä¿¡æ•°æ®åŒ…æ‹¬APIå¯†é’¥å’Œä¸Šä¼ å†…å®¹ä¼šè¢«æ‚„ç„¶ä¸­è½¬è‡³æ”»å‡»è€…æ§åˆ¶çš„æœåŠ¡å™¨ï¼Œå¯¼è‡´æ•æ„Ÿä¿¡æ¯æ³„éœ²ã€‚åŒæ—¶ï¼Œæ”»å‡»å¯èƒ½å¼•å‘ä»£ç†é…ç½®ç¯¡æ”¹ã€æœªç»æˆæƒçš„APIè°ƒç”¨åŠè¿œç¨‹ä»£ç æ‰§è¡Œï¼Œä¸¥é‡å½±å“ç³»ç»Ÿå®‰å…¨ã€‚</p>
<p>2025å¹´æŠ«éœ²çš„MCP Inspectorè¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2025-49596ï¼‰åˆ™æ˜¯å¦ä¸€å…¸å‹æ¡ˆä¾‹ã€‚è¯¥å·¥å…·ç¼ºä¹å®¢æˆ·ç«¯ä¸æœ¬åœ°ä»£ç†ä¹‹é—´çš„è®¤è¯ï¼Œæ”»å‡»è€…ä»…éœ€è¯±å¯¼å¼€å‘è€…è®¿é—®æ¶æ„ç½‘é¡µï¼Œä¾¿èƒ½ç»•è¿‡æµè§ˆå™¨å®‰å…¨ç­–ç•¥ï¼Œé€šè¿‡è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCSRFï¼‰æ”»å‡»å‘æœ¬åœ°æœåŠ¡å‘é€æ¶æ„å‘½ä»¤ï¼Œå®ç°å¯¹ç»ˆç«¯çš„è¿œç¨‹æ§åˆ¶ã€‚</p>
<p>è¿™äº›å®‰å…¨äº‹ä»¶æ­ç¤ºäº†Agentic AIç³»ç»Ÿä¸­ä¸¤ä¸ªæ ¸å¿ƒé—®é¢˜ï¼šä¸€æ˜¯AI Agentçš„èº«ä»½è®¤è¯ä¸æˆæƒæœºåˆ¶å¦‚ä½•ç¡®ä¿å¯ä¿¡ä¸”å®‰å…¨ï¼›äºŒæ˜¯åœ¨å¤æ‚çš„ä»£ç†è°ƒç”¨é“¾ä¸­å¦‚ä½•æœ‰æ•ˆä¼ é€’å’ŒéªŒè¯èº«ä»½ä¿¡æ¯ã€‚æœ¬æ–‡å°†æ·±å…¥åˆ†æè¿™äº›æŒ‘æˆ˜ï¼Œå¹¶ç»“åˆäºšé©¬é€Šäº‘ç§‘æŠ€å¹³å°çš„å®è·µç»éªŒï¼Œæä¾›å®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-1">2. AI Agent èº«ä»½ç®¡ç†çš„æ ¸å¿ƒæ¦‚å¿µä¸æŠ€æœ¯è¦æ±‚</h2>
<p>Agentic AI èº«ä»½ï¼ˆAgent Identityï¼‰ç›¸å…³çš„æ¦‚å¿µå’Œæœ¯è¯­ï¼Œç”¨äºæè¿°ä»£ç†å’Œå·¥å…·ç­‰èº«ä»½ç®¡ç†åŠå‡­è¯å¤„ç†æ‰€æ¶‰åŠçš„ç»„ä»¶ã€æµç¨‹ä¸å…³ç³»ã€‚ç†è§£<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.aws.amazon.com%2Fbedrock-agentcore%2Flatest%2Fdevguide%2Fidentity-terminology.html" target="_blank" title="https://docs.aws.amazon.com/bedrock-agentcore/latest/devguide/identity-terminology.html" ref="nofollow noopener noreferrer">è¿™äº›æœ¯è¯­</a>æœ‰åŠ©äºæ·±å…¥æŠŠæ¡AI Agent å·¥ä½œæµä¸­å¦‚ä½•åè°ƒå¤šæ–¹ç»„ä»¶çš„èº«ä»½è®¤è¯ä¸æˆæƒæœºåˆ¶ã€‚</p>
<p>ä»¥ä¸‹åˆ—å‡ºçš„æœ¯è¯­æ˜¯åœ¨å¼€å‘ Agentic AI ç³»ç»Ÿä¸­å¸¸ç”¨çš„ï¼Œå·²è¢«èº«ä»½ä¸è®¿é—®ç®¡ç†ï¼ˆIAMï¼‰é¢†åŸŸå¹¿æ³›é‡‡çº³ï¼Œéäºšé©¬é€Šäº‘ç§‘æŠ€çš„ä¸“æœ‰ç”¨è¯­ã€‚å…¶ä»–é€šç”¨çš„èº«ä»½ç®¡ç†æœ¯è¯­å¯ä»¥å‚è€ƒç›¸å…³<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.aws.amazon.com%2Fcognito%2Flatest%2Fdeveloperguide%2Fcognito-terms.html" target="_blank" title="https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-terms.html" ref="nofollow noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<h3 data-id="heading-2">2.1 èº«ä»½ä¸è®¤è¯æ–¹é¢çš„æ¦‚å¿µä¸æœ¯è¯­</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44cbc6fc15bd4c63afbe6b92cbfa0ed8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=gsMKnHGS5mJfDhEfWUYSUq4SBDk%3D" alt="2.1è¡¨æ ¼.webp" loading="lazy"/></p>
<h3 data-id="heading-3">2.2 OAuth and Token ç®¡ç†æ–¹é¢çš„æ¦‚å¿µå’Œæœ¯è¯­</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80f66c8be3ed458daf50d80bea0aef9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=EWRTRdxNid%2FSfeiJac244f7ZMAA%3D" alt="2.2.webp" loading="lazy"/></p>
<h3 data-id="heading-4">2.3 OAuth 2.0çš„æˆæƒæœºåˆ¶æ˜¯Agentic AIèº«ä»½æˆæƒçš„æ ¸å¿ƒæŠ€æœ¯</h3>
<p>Agentic AIç³»ç»Ÿä¸­ï¼Œæ™®éé‡‡ç”¨çš„æˆæƒæœºåˆ¶æ˜¯åŸºäºOAuth 2.0è¿›è¡Œçš„ï¼ŒåŒ…æ‹¬MCPåè®®ä¹Ÿæ˜¯åŸºäºå…¶è¿›è¡Œæˆæƒã€‚æ‰€ä»¥ï¼Œæ·±å…¥ç†è§£Agentic AIå„ç»„ä»¶é—´çš„èº«ä»½è®¤è¯ä¸æˆæƒæœºåˆ¶çš„å‰ææ˜¯å……åˆ†ç†è§£OAuthæˆæƒçš„æµç¨‹ã€‚å…¶ä¸­ï¼ŒAnthropicå®˜æ–¹å¯¹MCPåè®®ä¸­é‡‡ç”¨çš„OAuthæˆæƒæµç¨‹è¿›è¡Œäº†è¯¦ç»†æè¿°ï¼Œå…·ä½“å®¢æˆ·å‚è€ƒå…¶å®˜æ–¹ç½‘ç«™çš„åè®®æè¿°éƒ¨åˆ†Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelcontextprotocol.io%2Fspecification%2F2025-06-18%2Fbasic%2Fauthorization" target="_blank" title="https://modelcontextprotocol.io/specification/2025-06-18/basic/authorization" ref="nofollow noopener noreferrer">OAuth 2.0çš„æˆæƒæµç¨‹</a>ã€‚</p>
<p>åœ¨Agentic AIç³»ç»Ÿçš„è®¾è®¡ä¸­ï¼Œéœ€è¦æ ¹æ®ä¸åŒçš„ä¸šåŠ¡åœºæ™¯æ¥é€‰æ‹©åˆé€‚çš„OAuth å·¥ä½œæ¨¡å‹ã€‚å…¶ä¸­å…¸å‹çš„æ¨¡å¼æœ‰2è…¿æˆæƒï¼ˆ2-Legged Authï¼Œ2LOï¼‰å’Œ3è…¿æˆæƒï¼ˆ3-Legged Authï¼Œ3LOï¼‰ï¼Œå¦‚æœéœ€è¦ç”¨æˆ·ï¼ˆUserï¼‰å‚ä¸å…¶ä¸­çš„æˆæƒæµç¨‹é€‚åˆç”¨3LOï¼Œå¦‚æœä¸éœ€è¦ç”¨æˆ·å‚ä¸çš„é€‚åˆç”¨2LOã€‚</p>
<p>ä¸‹å›¾æ˜¯2LOå’Œ3LOæˆæƒæµç¨‹çš„å…¸å‹æ­¥éª¤è¯´æ˜ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/456611ff45b2465083ec46717c716827~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=4rYLQXIUwWGAfWiEWXBYyKT75Us%3D" alt="å›¾1.webp" loading="lazy"/></p>
<p align="center">å›¾1 â€“ 2LOå’Œ3LOæˆæƒæµç¨‹</p>
<h4 data-id="heading-5">2.3.1 2LO æˆæƒæµç¨‹</h4>
<p>OAuth å®¢æˆ·ç«¯å‡­æ®æˆäºˆç”¨äºæ— éœ€ç”¨æˆ·äº¤äº’çš„æœºå™¨å¯¹æœºå™¨èº«ä»½éªŒè¯ï¼Œé€‚ç”¨äºä»£ç†ä½¿ç”¨ 2LO ç›´æ¥å‘èµ„æºæœåŠ¡å™¨è¿›è¡Œèº«ä»½éªŒè¯ã€‚ä¾‹å¦‚ä»£ç†Agent è®¿é—®å…·æœ‰æœåŠ¡è§’è‰²çš„åŒä¸€è´¦æˆ·ä¸­æ•°æ®åº“ã€‚</p>
<p>å…·ä½“æµç¨‹åŒ…æ‹¬:</p>
<p>Client è®¤è¯: åº”ç”¨å‘é€ â€˜client_idâ€™ å’Œ â€˜client_secretâ€™ åˆ°è®¤è¯æœåŠ¡å™¨ï¼›</p>
<p>Token ç­¾å‘: æœåŠ¡å™¨éªŒè¯å¯†é’¥ææ–™ï¼Œå¹¶è¿”å›ä¸€ä¸ªâ€˜access_tokenâ€˜ï¼›</p>
<p>èµ„æºè®¿é—®: åº”ç”¨ä½¿ç”¨Tokenè®¿é—®å—ä¿æŠ¤çš„èµ„æºã€‚</p>
<h4 data-id="heading-6">2.3.2 3LO æˆæƒæµç¨‹</h4>
<p>ç”¨äºåº”ç”¨ä»£è¡¨ç”¨æˆ·è¿›è¡Œæ“ä½œçš„åœºæ™¯ï¼Œéœ€è¦ç”¨æˆ·çš„åŒæ„ã€‚ä¾‹å¦‚ä»£ç†Agent ä»£è¡¨ç”¨æˆ·è®¿é—®ç”µå­é‚®ä»¶æœåŠ¡ã€‚</p>
<p>å…·ä½“æµç¨‹åŒ…æ‹¬:</p>
<p>User é‡å®šå‘: å®¢æˆ·ç«¯é‡å®šå‘ç”¨æˆ·è¯·æ±‚åˆ°æˆæƒæœåŠ¡å™¨ï¼›</p>
<p>User åŒæ„: ç”¨æˆ·å®Œæˆè®¤è¯å¹¶åŒæ„ï¼›</p>
<p>Code äº¤æ¢: æœåŠ¡å™¨ç»™å®¢æˆ·ç«¯è¿”å›æˆæƒcodeï¼›</p>
<p>Token è¯·æ±‚: å®¢æˆ·ç«¯é€šè¿‡æˆæƒcodeå’ŒÂ <code>client_secret</code>Â ä¸æˆæƒæœåŠ¡å™¨äº¤æ¢Â <code>access_token</code>Â å’Œ refresh_tokenï¼›</p>
<p>èµ„æºè®¿é—®: å®¢æˆ·ç«¯é€šè¿‡ä½¿ç”¨tokenè®¿é—®ç”¨æˆ·æ‹¥æœ‰çš„èµ„æºã€‚</p>
<h2 data-id="heading-7">3. Agentic AI èº«ä»½ç®¡ç†é¢ä¸´çš„æ ¸å¿ƒæŒ‘æˆ˜ä¸é˜²æŠ¤ç­–ç•¥</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fowasp.org%2F" target="_blank" title="https://owasp.org/" ref="nofollow noopener noreferrer">OWASP</a>(å¼€æ”¾å¼å…¨çƒåº”ç”¨ç¨‹åºå®‰å…¨é¡¹ç›®ï¼ŒOpen Worldwide Application Security Project)åŸºäºAgentic AIçš„ç‰¹æ€§åŠåº”ç”¨ç³»ç»Ÿéƒ¨ç½²æ¶æ„ã€å„é¢†åŸŸä¸“å®¶çš„ç ”ç©¶åŠå®è·µç»éªŒï¼Œæ€»ç»“äº†15ä¸ªå®‰å…¨å¨èƒï¼Œå…·ä½“å¯å‚è€ƒæœ¬ç³»åˆ—åšå®¢ä¹‹ã€ŠAgentic AI å®‰å…¨é˜²æŠ¤-Agentéšç§ä¸å®‰å…¨ã€‹çš„å¯¹åº”å†…å®¹ã€‚åœ¨è¿™15ä¸ªå®‰å…¨å¨èƒä¸­ï¼Œæœ‰2ä¸ªæ˜¯ä¸èº«ä»½ç›¸å…³çš„ï¼ŒåŒ…æ‹¬T3 æƒé™æ³„æ¼å’ŒT9 èº«ä»½æ¬ºéª—å’Œå†’å……ã€‚</p>
<ul>
<li>T3 æƒé™æ»¥ç”¨ï¼šå½“æ”»å‡»è€…åˆ©ç”¨æƒé™ç®¡ç†ä¸­çš„å¼±ç‚¹æ‰§è¡Œæœªç»æˆæƒçš„æ“ä½œæ—¶ï¼Œå°±ä¼šå‘ç”Ÿæƒé™æ»¥ç”¨ã€‚è¿™é€šå¸¸æ¶‰åŠåŠ¨æ€è§’è‰²ç»§æ‰¿æˆ–é”™è¯¯é…ç½®ã€‚</li>
<li>T9 èº«ä»½æ¬ºéª—å’Œå†’å……ï¼šæ”»å‡»è€…åˆ©ç”¨èº«ä»½éªŒè¯æœºåˆ¶å†’å……äººå·¥æ™ºèƒ½ä»£ç†æˆ–äººç±»ç”¨æˆ·ï¼Œä»è€Œä»¥è™šå‡èº«ä»½æ‰§è¡Œæœªç»æˆæƒçš„æ“ä½œã€‚</li>
</ul>
<p>å¯¹äºèº«ä»½æ¬ºéª—å’Œå†’å……å¨èƒï¼Œåœ¨ä¸€ä¸ªå…¸å‹çš„Agentic AIé€»è¾‘æ¶æ„ä¸­ï¼Œéœ€è¦è¿›è¡Œèº«ä»½è®¤è¯ä¸æˆæƒçš„äº¤äº’ç‚¹éå¸¸å¤šã€ä¸”æ¶‰åŠåˆ°éä¸€æ–¹è‡ªç ”çš„éƒ¨åˆ†ï¼Œå¯¼è‡´é£é™©ç‚¹çš„æ§åˆ¶å˜å¾—å¤æ‚ã€‚èº«ä»½çš„ä¼ é€’ï¼ˆå¦‚ä¸‹å›¾è“è‰²ç®­å¤´å’Œç¼–å·ï¼‰æ˜¯é‡è¦å†…å®¹ä¹‹ä¸€ï¼Œæœ€åˆUserçš„èº«ä»½ç®¡ç†å’Œè®¤è¯ã€Agent Actionå¯¹User èº«ä»½å’Œé‰´æƒä¼šè¯ï¼ˆAccess Tokenï¼‰çš„ä¼ é€’ã€toolså¯¹User çš„æˆæƒç­‰ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0c2a87f8f6c43ea8c50cbe558c3f8fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=63IFK341iMz%2FzFkDk1s9Ueguwxs%3D" alt="å›¾2.webp" loading="lazy"/></p>
<p align="center">å›¾2 â€“ èº«ä»½æ¬ºéª—å’Œå†’å……å¨èƒçš„åˆ†å¸ƒç‚¹</p>
<h3 data-id="heading-8">3.1 Agentic AIä¸­çš„èº«ä»½è®¤è¯ä¸æˆæƒï¼Œå’Œä¼ ç»Ÿåº”ç”¨ä¸­çš„èº«ä»½è®¤è¯ä¸æˆæƒçš„æ ¸å¿ƒåŒºåˆ«</h3>
<p>ä¼ ç»Ÿåº”ç”¨ï¼ˆæ²¡æœ‰ä½¿ç”¨Agentic AIä¹‹å‰çš„åº”ç”¨ï¼‰å¯¹ç”¨æˆ·çš„èº«ä»½ç®¡ç†å’Œæˆæƒæ˜¯éå¸¸æ˜ç¡®çš„ï¼Œå³å¯¹å½“å‰ç™»å½•åº”ç”¨ç³»ç»Ÿçš„ç”¨æˆ·èº«ä»½è¿›è¡Œè®¤è¯å’Œæˆæƒï¼ŒåŒ…æ‹¬å•ç‚¹ç™»å½•SSOè®¤è¯ã€ç»†ç²’åº¦æˆæƒå’ŒOAuthæˆæƒç­‰ã€‚ä½†åº”ç”¨ç³»ç»Ÿä¸­å¼•å…¥Agentic AIæŠ€æœ¯åï¼Œæ•°æ®çš„æŸ¥è¯¢å’Œç¬¬ä¸‰æ–¹ç³»ç»Ÿçš„è°ƒç”¨ç­‰ï¼Œä¼šç”±AI Agentä»£ç†æ¥å®Œæˆï¼Œå› ä¸ºå½“å‰ç™»å½•çš„ç”¨æˆ·è¦æŸ¥è¯¢æˆ–æ“ä½œçš„å†…å®¹å¯èƒ½ä¸æ˜¯å¯¹å…¶è‡ªèº«çš„æŸ¥è¯¢æˆ–æ“ä½œï¼Œæœ‰å¯èƒ½æ˜¯é€šè¿‡promptçš„æ–¹å¼æŸ¥è¯¢æˆ–æ“ä½œå…¶ä»–ç”¨æˆ·çš„ä¿¡æ¯ï¼Œè¿™ä¸€ç‚¹æ˜¯ä¸ä¼ ç»Ÿåº”ç”¨çš„æœ€å¤§åŒºåˆ«ã€‚æˆ‘ä»¬é€šè¿‡ä¸¤ä¸ªç¤ºä¾‹å›¾æ¥è¿›è¡Œå¯¹æ¯”å’Œè¯´æ˜ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8e46bfaef3147fcb5e30d00e99335ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=9v1Mroc1VRh7QyZlmLidS3nlwag%3D" alt="å›¾3.webp" loading="lazy"/></p>
<p align="center">å›¾3 â€“ ä¼ ç»Ÿåº”ç”¨ä¸­çš„èº«ä»½è®¤è¯ä¸æˆæƒæ¶æ„  </p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f9efc9b92244a40a9e5a18c2a689559~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=dxN%2FKM1FIqguJPNG8%2B8Ka3KRN%2Fo%3D" alt="å›¾4.webp" loading="lazy"/></p>
<p align="center">å›¾4 â€“ Agentic AIç³»ç»Ÿä¸­çš„èº«ä»½è®¤è¯ä¸æˆæƒæ¶æ„</p>
<p>Agentic AI åº”ç”¨ç³»ç»Ÿä¸­çš„æˆæƒé—®é¢˜åæ˜ äº†ä¼ ç»Ÿè®¿é—®æ§åˆ¶æ¨¡å‹çš„æ ¹æœ¬æ€§å±€é™ã€‚å½“æ•°æ®é€šè¿‡è®­ç»ƒã€å¾®è°ƒæˆ–æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æ–¹å¼è¢«è¾“å…¥åˆ°LLMä¸­åï¼Œæ¨¡å‹æœ¬èº«æ— æ³•åˆ¤æ–­è¯·æ±‚è€…æ˜¯å¦æœ‰æƒè®¿é—®è¿™äº›æ•°æ®ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæˆæƒå†³ç­–å¿…é¡»åœ¨AIåº”ç”¨çš„å…¶ä»–å±‚é¢å®ç°ï¼Œè€Œä¸èƒ½ä¾èµ–æ¨¡å‹æœ¬èº«çš„åˆ¤æ–­ã€‚</p>
<p>åœ¨ä¼ä¸šçº§AIåº”ç”¨ä¸­ï¼Œè¿™ä¸ªé—®é¢˜å˜å¾—æ›´åŠ å¤æ‚ã€‚ä¸åŒç”¨æˆ·å¯èƒ½å¯¹åŒä¸€æ•°æ®é›†å…·æœ‰ä¸åŒçš„è®¿é—®æƒé™ï¼Œä½†LLMæ— æ³•è‡ªä¸»åŒºåˆ†è¿™äº›æƒé™å·®å¼‚ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªä¼ä¸šçŸ¥è¯†ç®¡ç†ç³»ç»Ÿä¸­ï¼Œé”€å”®å›¢é˜Ÿå’Œè´¢åŠ¡å›¢é˜Ÿå¯èƒ½å¯¹å®¢æˆ·æ•°æ®å…·æœ‰ä¸åŒçš„è®¿é—®æƒé™ï¼Œä½†å¦‚æœè¿™äº›æ•°æ®éƒ½è¢«ç”¨äºè®­ç»ƒæˆ–å¢å¼ºåŒä¸€ä¸ªLLMï¼Œæ¨¡å‹å°±æ— æ³•è‡ªåŠ¨æ‰§è¡Œè¿™ç§æƒé™åŒºåˆ†ã€‚</p>
<p>è§£å†³æˆæƒé—®é¢˜éœ€è¦åœ¨åº”ç”¨æ¶æ„å±‚é¢å®æ–½ç¡®å®šæ€§çš„æˆæƒæœºåˆ¶ã€‚è¿™åŒ…æ‹¬åœ¨æ•°æ®è¾“å…¥LLMä¹‹å‰è¿›è¡Œæƒé™æ£€æŸ¥ï¼Œæ ¹æ®ç”¨æˆ·èº«ä»½å’Œæƒé™è¿‡æ»¤å¯è®¿é—®çš„æ•°æ®æºã€‚åœ¨RAGç³»ç»Ÿä¸­ï¼Œå¯ä»¥æ ¹æ®ç”¨æˆ·æƒé™åŠ¨æ€é€‰æ‹©å¯æŸ¥è¯¢çš„å‘é‡æ•°æ®åº“æˆ–çŸ¥è¯†åº“ã€‚åœ¨æ¨¡å‹è¾“å‡ºé˜¶æ®µï¼Œä¹Ÿéœ€è¦æ ¹æ®ç”¨æˆ·æƒé™å¯¹å“åº”å†…å®¹è¿›è¡Œè¿‡æ»¤å’Œè„±æ•ã€‚</p>
<p>åŸºäºä¼šè¯å±æ€§çš„æƒé™ä¼ é€’æ˜¯ä¸€ç§æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡å®‰å…¨ä¾§é€šé“ï¼ˆå¦‚Amazon Bedrock Agentsçš„ä¼šè¯å±æ€§ï¼‰ä¼ é€’ç”¨æˆ·èº«ä»½å’Œæƒé™ä¿¡æ¯ï¼Œä½¿åç«¯ç³»ç»Ÿèƒ½å¤Ÿåœ¨å¤„ç†AIè¯·æ±‚æ—¶æ‰§è¡Œé€‚å½“çš„æˆæƒæ£€æŸ¥ã€‚è¿™ç§æ–¹æ³•å°†æˆæƒå†³ç­–ä»ä¸å¯é çš„LLMæ¨ç†è½¬ç§»åˆ°å¯æ§çš„åº”ç”¨é€»è¾‘ä¸­ã€‚</p>
<h3 data-id="heading-9">3.2 MCPåè®®ä¸­æ··æ·†ä»£ç†äººææƒé—®é¢˜</h3>
<p>MCPåè®®çš„è®¾è®¡ç†å¿µå¯¼è‡´å…¶åœ¨æ¶æ„å±‚é¢å°±ç³»ç»Ÿæ€§åœ°å¼•å…¥äº†ä¼ ç»Ÿå®‰å…¨é¢†åŸŸä¸­ç»å…¸çš„â€œ æ··æ·†ä»£ç†äºº â€ é—®é¢˜ï¼ˆ Confused Deputy Problemï¼‰ã€‚é¦–å…ˆï¼ŒMCP æœåŠ¡å™¨ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹è¿è¡Œï¼Œæ‹¥æœ‰å…¶è‡ªèº«åœ¨ä¸»æœºç³»ç»Ÿä¸Šçš„æƒé™é›†åˆï¼Œä¾‹å¦‚æ–‡ä»¶ç³»ç»Ÿè¯»å†™æƒé™æˆ–ç½‘ç»œè®¿é—®æƒé™ã€‚å…¶æ¬¡ï¼Œ LLM å®¢æˆ·ç«¯é€šå¸¸ä»£è¡¨ç”¨æˆ·è¡Œäº‹ï¼Œå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ä»¥æ‰§è¡Œå·¥å…·ã€‚ä½†æ˜¯ MCP è§„èŒƒåœ¨å…¶é»˜è®¤çŠ¶æ€ä¸‹ï¼Œç¼ºä¹ä¸€ä¸ªç»Ÿä¸€ä¸”è¢«ä¸€è‡´æ€§æ‰§è¡Œçš„è®¤è¯å’Œæˆæƒæœºåˆ¶ï¼Œæ¥å°†ç»ˆç«¯ç”¨æˆ·çš„èº«ä»½å’Œæƒé™å®‰å…¨åœ°ä¼ é€’ç»™æœåŠ¡å™¨ã€‚å› æ­¤ï¼Œå½“ä¸€ä¸ªç”¨æˆ·ï¼ˆå¯èƒ½æ˜¯ä½æƒé™ç”¨æˆ·ï¼‰é€šè¿‡ LLM æç¤ºè°ƒç”¨ä¸€ä¸ªå·¥å…·æ—¶ï¼ŒæœåŠ¡å™¨å®é™…ä¸Šæ˜¯ä½¿ç”¨å…¶è‡ªèº«çš„æƒé™ï¼ˆå¯èƒ½æ˜¯é«˜æƒé™ï¼‰æ¥æ‰§è¡Œè¯¥æ“ä½œï¼Œè€Œéç”¨æˆ·çš„æƒé™ã€‚è¿™å°±åˆ›é€ äº†ä¸€ä¸ªå…¸å‹çš„æƒé™æå‡åœºæ™¯ï¼Œå³ä¸€ä¸ªä½æƒé™çš„è¯·æ±‚è€…ï¼ˆç”¨æˆ·ï¼‰æ¬ºéª—äº†ä¸€ä¸ªé«˜æƒé™çš„ä»£ç†ï¼ˆæœåŠ¡å™¨ï¼‰æ¥æ‰§è¡Œè¶Šæƒæ“ä½œã€‚æ­¤ç±»è¶Šæƒé—®é¢˜ï¼Œé€šè¿‡ç»™å¤§æ¨¡å‹LLMä½œç³»ç»Ÿçº§æç¤ºè¯é™åˆ¶ä¹Ÿåªèƒ½åœ¨å°‘éƒ¨åˆ†æƒ…å†µä¸‹ç”Ÿæ•ˆï¼Œä¸”æœ‰ä¸ç¡®å®šæ€§ã€‚</p>
<p>æ··æ·†ä»£ç†é—®é¢˜æ˜¯AIåº”ç”¨å®‰å…¨ä¸­æœ€å…·æŒ‘æˆ˜æ€§çš„å¨èƒä¹‹ä¸€ï¼Œå¹¶æŠŠä¼ ç»Ÿçš„å¨èƒæ•ˆæœæ”¾å¤§ã€‚è¿™ç§æ”»å‡»åˆ©ç”¨äº†AIç³»ç»Ÿçš„ä»£ç†ç‰¹æ€§ï¼Œé€šè¿‡å…·æœ‰æ›´é«˜æƒé™çš„AIåº”ç”¨é—´æ¥è·å–åŸæœ¬æ— æƒè®¿é—®çš„èµ„æºã€‚æ”»å‡»çš„å…¸å‹åœºæ™¯æ˜¯ï¼šç”¨æˆ·ç›´æ¥è®¿é—®æŸä¸ªèµ„æºä¼šè¢«æ‹’ç»ï¼Œä½†é€šè¿‡AIåº”ç”¨è®¿é—®åŒæ ·çš„èµ„æºå´èƒ½æˆåŠŸï¼Œä»è€Œç»•è¿‡äº†åŸæœ‰çš„å®‰å…¨æ§åˆ¶ã€‚æ··æ·†ä»£ç†å®‰å…¨å¨èƒç¤ºä¾‹ï¼šç›´æ¥è®¿é—® S3 å­˜å‚¨æ¡¶çš„ç”¨æˆ·ä¼šè¢«æ‹’ç»è®¿é—®ï¼›ä½†è®¿é—® LLM çš„ç”¨æˆ·ï¼ˆä½¿ç”¨ RAG å¹¶å­˜å‚¨æ¥è‡ªåŒä¸€ S3 å­˜å‚¨æ¡¶çš„æ•°æ®ï¼‰åˆ™ä¼šè·å¾—è®¿é—®æƒé™ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26782a12458f4d4ab1b39ed772ec2bf0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=qdmBbgdstjKfwbG%2FRvtk27egLls%3D" alt="å›¾5.webp" loading="lazy"/></p>
<p align="center">å›¾5 â€“ Agentç³»ç»Ÿä¸­æ··æ·†ä»£ç†ç¤ºæ„å›¾</p>
<p>è¿™ç§æ”»å‡»çš„æ ¹æœ¬åŸå› åœ¨äºAIåº”ç”¨å’Œåº•å±‚èµ„æºä¹‹é—´çš„æƒé™ä¸åŒ¹é…ã€‚AIåº”ç”¨ä¸ºäº†å®Œæˆå¤æ‚ä»»åŠ¡ï¼Œå¾€å¾€è¢«æˆäºˆäº†è¾ƒé«˜çš„ç³»ç»Ÿæƒé™ï¼Œä½†è¿™äº›æƒé™çš„ä½¿ç”¨ç¼ºä¹ç»†ç²’åº¦çš„æ§åˆ¶ã€‚å½“ç”¨æˆ·é€šè¿‡AIåº”ç”¨é—´æ¥è®¿é—®èµ„æºæ—¶ï¼Œå®é™…ä¸Šæ˜¯å€Ÿç”¨äº†AIåº”ç”¨çš„æƒé™ï¼Œè€Œä¸æ˜¯åŸºäºç”¨æˆ·è‡ªèº«çš„æƒé™ã€‚</p>
<h3 data-id="heading-10">3.3 æ„å»ºç«¯åˆ°ç«¯çš„Agentic AIèº«ä»½ç®¡ç†çš„æ•´ä½“é˜²æŠ¤ç­–ç•¥</h3>
<p>é˜²èŒƒæ··æ·†ä»£ç†æ”»å‡»éœ€è¦å®æ–½ä¸¥æ ¼çš„æƒé™ä¸€è‡´æ€§æ£€æŸ¥ã€‚æ— è®ºç”¨æˆ·é€šè¿‡ä½•ç§é€”å¾„è®¿é—®èµ„æºï¼Œéƒ½åº”è¯¥åŸºäºç›¸åŒçš„æƒé™æ¨¡å‹è¿›è¡Œæˆæƒå†³ç­–ã€‚è¿™è¦æ±‚åœ¨AIåº”ç”¨çš„æ¶æ„è®¾è®¡ä¸­å¼•å…¥ç”¨æˆ·èº«ä»½ä¼ é€’æœºåˆ¶ï¼Œç¡®ä¿åº•å±‚ç³»ç»Ÿèƒ½å¤Ÿè¯†åˆ«çœŸå®çš„è¯·æ±‚è€…èº«ä»½ã€‚</p>
<p>å®æ–½ç»†ç²’åº¦çš„æƒé™ä»£ç†æ˜¯å¦ä¸€ç§æœ‰æ•ˆçš„é˜²æŠ¤ç­–ç•¥ã€‚AIåº”ç”¨ä¸åº”è¯¥æ‹¥æœ‰è¶…å‡ºå…¶åŠŸèƒ½éœ€æ±‚çš„æƒé™ï¼Œè€Œåº”è¯¥åŸºäºå…·ä½“çš„ç”¨æˆ·è¯·æ±‚åŠ¨æ€è·å–ç›¸åº”çš„æƒé™ã€‚è¿™å¯ä»¥é€šè¿‡æƒé™å§”æ‰˜æœºåˆ¶å®ç°ï¼ŒAIåº”ç”¨ä»£è¡¨ç”¨æˆ·è¯·æ±‚ç‰¹å®šçš„æƒé™ï¼Œè€Œä¸æ˜¯æ‹¥æœ‰å›ºå®šçš„é«˜æƒé™ã€‚</p>
<p>å®¡è®¡å’Œç›‘æ§æœºåˆ¶å¯¹äºæ£€æµ‹æ··æ·†ä»£ç†æ”»å‡»è‡³å…³é‡è¦ã€‚ç³»ç»Ÿåº”è¯¥è®°å½•æ‰€æœ‰çš„æƒé™ä½¿ç”¨æƒ…å†µï¼ŒåŒ…æ‹¬æƒé™çš„æ¥æºã€ä½¿ç”¨è€…ã€è®¿é—®çš„èµ„æºå’Œæ“ä½œç±»å‹ã€‚é€šè¿‡åˆ†æè¿™äº›å®¡è®¡æ—¥å¿—ï¼Œå¯ä»¥è¯†åˆ«å¼‚å¸¸çš„æƒé™ä½¿ç”¨æ¨¡å¼å’Œæ½œåœ¨çš„å®‰å…¨å¨èƒã€‚</p>
<p>OWASPå¯¹äºAgentic AIçš„15ä¸ªå¨èƒé£é™©ä¸­ï¼Œè™½ç„¶åªæœ‰2ä¸ªä¸èº«ä»½ç›¸å…³ï¼Œä½†è¿™ä¸¤ä¸ªé£é™©ç‚¹ç‰¹åˆ«æ˜¯T9èº«ä»½æ¬ºéª—ä¸å†’å……å¨èƒï¼Œä¼šå‘ç”Ÿåœ¨Agentic AIç³»ç»Ÿä¸­çš„å¤šä¸ªç¯èŠ‚ï¼Œå› æ­¤æ„å»ºAgentic AIç³»ç»Ÿçš„ç«¯åˆ°ç«¯èº«ä»½ç®¡ç†è§£å†³æ–¹æ¡ˆæ˜¯éå¸¸æœ‰å¿…è¦çš„ï¼Œå…·ä½“å‚è€ƒæ¶æ„å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c483f4e3fad344f290fcada9602fd923~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=O%2FiN%2BxHD7CkWFUTmabBQJsW8W8A%3D" alt="å›¾6.webp" loading="lazy"/></p>
<p align="center">å›¾6 â€“ Agentic AIç³»ç»Ÿä¸­ç«¯åˆ°ç«¯èº«ä»½è®¤è¯ä¸æˆæƒæ¶æ„</p>
<p>ç«¯åˆ°ç«¯çš„èº«ä»½è®¤è¯ä¸æˆæƒç³»ç»Ÿï¼ŒåŒ…æ‹¬å¦‚ä¸‹å‡ ä¸ªæ ¸å¿ƒèƒ½åŠ›ã€‚å…·ä½“ç¤ºä¾‹å¯ä»¥å‚è€ƒä¸‹ä¸€ç« èŠ‚çš„åŸºäºäºšé©¬é€ŠBedrock AgentCore Identityå¼€å‘Agentic AIç³»ç»Ÿçš„èº«ä»½æ¨¡å—çš„ç›¸å…³å†…å®¹ã€‚</p>
<ol>
<li>Agentå…¥æ–¹é¢çš„è®¤è¯å’Œæˆæƒï¼šå¯¹è¯·æ±‚çš„ç”¨æˆ·è¿›è¡Œè®¤è¯å’Œæˆæƒï¼ŒåŒ…æ‹¬é€šè¿‡ç¬¬ä¸‰æ–¹èº«ä»½æä¾›å•†ç™»å½•è¿›æ¥çš„ç”¨æˆ·ã€‚</li>
<li>å¤–éƒ¨å·¥å…·æˆ–æœåŠ¡å¯¹Agentçš„æˆæƒï¼šä¸è®ºæ˜¯è‡ªå·±ç ”å‘çš„ä¸€æ–¹å·¥å…·ï¼Œè¿˜æ˜¯ç¬¬ä¸‰æ–¹ç ”å‘çš„å•†ä¸šåŒ–æˆ–å¼€æºçš„å·¥å…·ï¼Œéƒ½éœ€è¦å¯¹Agentæˆ–Agentä»£è¡¨ç”¨æˆ·çš„æˆæƒï¼Œé¿å…å§”æ‰˜äººæ”»å‡»ã€‚</li>
<li>Agentè®¿é—®å¤–éƒ¨å·¥å…·æˆ–æœåŠ¡çš„èƒ½åŠ›ï¼ˆå³å‡ºæ–¹å‘ï¼‰ï¼šä¸ºäº†é…åˆå¤–éƒ¨å·¥å…·æˆ–æœåŠ¡å¯¹Agentçš„æˆæƒï¼ŒAgentéœ€è¦å…·å¤‡ OAuth å®¢æˆ·ç«¯çš„èƒ½åŠ›ï¼ŒåŒ…æ‹¬2LOå’Œ3LOçš„æ–¹å¼ã€‚å¦‚æœæ˜¯è®¿é—®äº‘èµ„æºï¼Œéœ€è¦æœ‰ä¿å­˜äº‘èµ„æºè®¿é—®çŸ­æœŸæƒé™çš„èƒ½åŠ›ï¼Œå¦‚IAM roleæˆ–STSã€‚</li>
<li>Tool Gatewayå…¥æ–¹å‘è®¤è¯å’Œæˆæƒï¼šå¦‚æœé€šè¿‡Tool Gatewayæ–¹å¼é›†ä¸­ç®¡ç†å¤šä¸ªMCPæœåŠ¡å™¨ï¼ŒAgentç”±Tool Gatewayæ¥è®¿é—®toolsï¼Œé‚£ä¹ˆTool Gatewayéœ€è¦å…·å¤‡å¯¹Agentæˆ–Agentä»£è¡¨ç”¨æˆ·çš„æˆæƒã€‚</li>
</ol>
<h2 data-id="heading-11">4. äºšé©¬é€Šäº‘ç§‘æŠ€äº‘å¹³å°ä¸Šçš„AI Agentèº«ä»½ç®¡ç†è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-12">4.1 æ–¹æ¡ˆä¸€ï¼š Amazon Bedrock AgentCore Identity â€“ å…¨æ‰˜ç®¡ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆ</h3>
<p>Amazon Bedrock AgentCore Identity æ˜¯ä¸€é¡¹å…¨é¢çš„èº«ä»½å’Œå‡­è¯ç®¡ç†æœåŠ¡ï¼Œä¸“ä¸º AI ä»£ç†å’Œè‡ªåŠ¨åŒ–å·¥ä½œè´Ÿè½½è€Œè®¾è®¡ã€‚å®ƒæä¾›å®‰å…¨çš„èº«ä»½éªŒè¯ã€æˆæƒå’Œå‡­æ®ç®¡ç†åŠŸèƒ½ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿè°ƒç”¨ä»£ç†ï¼Œè€Œä»£ç†èƒ½å¤Ÿä»£è¡¨ç”¨æˆ·è®¿é—®å¤–éƒ¨èµ„æºå’ŒæœåŠ¡çš„åŒæ—¶ä¿æŒä¸¥æ ¼çš„å®‰å…¨æ§åˆ¶å’Œå®¡è®¡è·Ÿè¸ªã€‚è¯¥æœåŠ¡ä¸ Amazon Bedrock AgentCore åŸç”Ÿé›†æˆï¼Œä¸ºä»£ç†åº”ç”¨ç¨‹åºæä¾›å…¨é¢çš„èº«ä»½å’Œå‡­è¯ç®¡ç†ã€‚</p>
<p>AgentCore Identity è§£å†³äº† AI ä»£ç†éƒ¨ç½²ä¸­çš„ä¸€ä¸ªæ ¹æœ¬æ€§æŒ‘æˆ˜ï¼šè®©ä»£ç†èƒ½å¤Ÿåœ¨å¤šä¸ªæœåŠ¡ä¸­å®‰å…¨åœ°è®¿é—®ç”¨æˆ·ç‰¹å®šæ•°æ®ï¼ŒåŒæ—¶ä¸ç‰ºç‰²å®‰å…¨æ€§å’Œç”¨æˆ·ä½“éªŒã€‚ä¼ ç»Ÿæ–¹æ³•è¦ä¹ˆä½¿ç”¨å¹¿æ³›çš„è®¿é—®å‡­è¯è€Œç¼ºä¹ç»†ç²’åº¦æ§åˆ¶ï¼Œè¦ä¹ˆéœ€è¦ä¸ºæ¯æ¬¡æœåŠ¡é›†æˆè·å–æ˜ç¡®çš„ç”¨æˆ·åŒæ„ï¼ˆè¿™ä¼šå¸¦æ¥ç³Ÿç³•çš„ç”¨æˆ·ä½“éªŒï¼‰ã€‚AgentCore Identity é€šè¿‡ä¸€ä¸ªå…¨é¢çš„å·¥ä½œæµå®ç°é›¶ä¿¡ä»»å®‰å…¨åŸåˆ™å’ŒåŸºäºå§”æ‰˜çš„èº«ä»½éªŒè¯æ¥è§£å†³è¿™ä¸€é—®é¢˜ã€‚</p>
<h4 data-id="heading-13">Amazon Bedrock AgentCore Identity æ¶‰åŠçš„2ç§èº«ä»½è®¤è¯å’Œæˆæƒ</h4>
<p>å…¥ç«™æˆæƒï¼šInbound Auth æ˜¯æŒ‡éªŒè¯ç”¨æˆ·æˆ–å®¢æˆ·ç«¯åº”ç”¨çš„è®¤è¯æœºåˆ¶ï¼Œç”¨äºæ§åˆ¶è°å¯ä»¥è®¿é—®å’Œè°ƒç”¨æ‚¨çš„ä»£ç†æˆ–å·¥å…·ã€‚</p>
<p>å‡ºç«™æˆæƒï¼šOutbound Auth æ˜¯æŒ‡å·²é€šè¿‡å…¥ç«™è®¤è¯çš„ä»£ç†ï¼Œå®‰å…¨è®¿é—®ç›®æ ‡æœåŠ¡çš„è®¤è¯æœºåˆ¶ï¼Œä½¿ä»£ç†èƒ½å¤Ÿå®‰å…¨åœ°è°ƒç”¨å„ç§å¤–éƒ¨APIã€Lambdaå‡½æ•°ç­‰èµ„æºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9cbbedc0df644369b3e12f5658d1ad2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=uGkomNMLQfCEz9E%2FoBQbqNovuFo%3D" alt="å›¾7.webp" loading="lazy"/></p>
<p align="center">å›¾7 â€“ Bedrock AgentCore Identityè®¤è¯ä¸æˆæƒæ¶æ„å›¾</p>
<h4 data-id="heading-14">å…¥ç«™æˆæƒ</h4>
<p>ç”¨æˆ·é€šè¿‡å…¶ç»„ç»‡çš„ç°æœ‰èº«ä»½æä¾›è€…ï¼ˆå¦‚ Auth0ã€Cognito æˆ–å…¶ä»– OIDC å…¼å®¹ç³»ç»Ÿï¼‰è¿›è¡Œèº«ä»½éªŒè¯ï¼Œå¹¶è·å¾—è®¿é—®ä»¤ç‰Œæˆ–èº«ä»½ä»¤ç‰Œã€‚è¯¥ä»¤ç‰ŒåŒ…å«ç”¨æˆ·èº«ä»½ä¿¡æ¯å’ŒæˆæƒèŒƒå›´ï¼Œä¸ºæ•´ä¸ªå·¥ä½œæµç¨‹å»ºç«‹ç”¨æˆ·çš„èº«ä»½ä¸Šä¸‹æ–‡ã€‚åº”ç”¨ç¨‹åºæ¥æ”¶æ­¤ä»¤ç‰Œï¼Œå¹¶å°†ä½¿ç”¨å®ƒæ¥æˆæƒå¯¹ä»£ç†çš„è¯·æ±‚ã€‚</p>
<p>ä¸‹é¢ä»¥<a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Fcognito%2F" target="_blank" title="https://aws.amazon.com/cn/cognito/" ref="nofollow noopener noreferrer">Amazon Cognito</a>Â ä¸ºä¾‹ï¼Œè®²è§£å¦‚ä½•é…ç½®å…¥ç«™æˆæƒã€‚</p>
<p>åœ¨å¼€å‘åº”ç”¨çš„æ—¶å€™ï¼Œåœ¨ä»£ç ä¸­å¯ä»¥æˆæƒCognito User Poolé‡Œé¢çš„ç”¨æˆ·è®¿é—®æƒé™ã€‚Amazon Cognito æ˜¯ Web å’Œç§»åŠ¨çš„åº”ç”¨ç¨‹åºçš„èº«ä»½è¯†åˆ«å¹³å°ã€‚å€ŸåŠ© Amazon Cognitoï¼Œæ‚¨å¯ä»¥ä»Cognitoç”¨æˆ·æ± ã€ä¼ä¸šç›®å½•æˆ–è€… Google å’Œ Facebook ç­‰æ¶ˆè´¹è€…èº«ä»½æä¾›å•†æä¾›ç”¨æˆ·çš„èº«ä»½éªŒè¯å’Œæˆæƒã€‚é¦–å…ˆåˆ›å»º1ä¸ªCognito User Poolï¼Œåœ¨è¿™ä¸ªUser Poolä¸­åˆ›å»º1ä¸ªApp clientï¼Œä»¥åŠ1ä¸ªç”¨æˆ·ï¼Œå‡è®¾ä½ æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤é€šè¿‡ç”¨æˆ·åå¯†ç çš„æ–¹å¼æˆæƒç”¨æˆ·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Authenticate User</span>
aws cognito-idp initiate-auth \
--client-id <span class="hljs-string">"<span class="hljs-variable">$CLIENT_ID</span>"</span> \
--auth-flow USER_PASSWORD_AUTH \
--auth-parameters USERNAME=<span class="hljs-string">'testuser'</span>,PASSWORD=<span class="hljs-string">'MyPassword123!'</span> \
--region <span class="hljs-string">"<span class="hljs-variable">$REGION</span>"</span> \
auth.json
</code></pre>
<p>å¯ä»¥å¾—åˆ°æˆæƒçš„è¿”å›ç»“æœï¼Œç»“æœä¸­åŒ…å«JSON Web ä»¤ç‰Œï¼ˆJWTï¼‰æ ¼å¼çš„AccessTokenï¼ŒRefreshTokenå’ŒIdTokenï¼ŒAccessToken åŒ…å«æƒé™èŒƒå›´(scope)ï¼Œæ¯”å¦‚â€cognito:groupsâ€: [â€developersâ€, â€œteam-alphaâ€]å®šä¹‰å…è®¸å“ªäº›ç»„è®¿é—®ï¼Œâ€scopeâ€: â€myApi/profile.read myApi/profile.write myApi/accountâ€ç”¨äºAPIè®¿é—®æˆæƒï¼ŒRefreshToken ç”¨äºè·å–æ–°çš„Access Tokenå’ŒID Tokenï¼ŒIdToken åŒ…å«ç”¨æˆ·èº«ä»½ä¿¡æ¯ï¼Œç”¨äºèº«ä»½éªŒè¯ã€‚è¿”å›çš„ä¿¡æ¯ç±»ä¼¼äºï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-string">"eyJraWQiOiJvcHE5UmpBMTFBMWFcLzdoUFdRaUgwRmlDTjlMYm1QbnJQRWM3SVQ1M05XTT0iLCJhbGciOiJSUzI1NiJ9.eyJvcmlnaW5fanRpIjoiZTRkN2M1OWUtM2NjZC00OGFhLWFkN2YtMmY3ZTgzMmEzZDAzIiwic3ViIjoiZDRhODA0ZjgtYTA0MS03MGU0LTY3MmYtNzk2ZWM2M2VlNzQwIiwiYXVkIjoiNWFmNXBvaW8wbG5pa29zbWtnZjQxYjNrODAiLCJldmVudF9pZCI6IjFiNGZiYzA2LWVlMzgtNDBlYi1iNjRhLTA3ZTllNzIzNzVlNiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzUzNzc5MzQ4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9vQTJKTkMxdnUiLCJjb2duaXRvOnVzZXJuYW1lIjoidGVzdHVzZXIiLCJleHAiOjE3NTM3ODI5NDgsImlhdCI6MTc1Mzc3OTM0OCwianRpIjoiNDBiNjEwODMtZmRiZi00YzBmLTk3OTEtOGJmYTJjOGUwNDk1In0.A9wVkmed3aet3Q3mgvSF5-KLcEskBf5JOQnqSuyP4Rv2uz_Q7BhGgDV-AfHiBn9SNI1LI6QxlRp-YqRrh4lyyxsdrQGAH5fIlYvVproslLHlSdq2tPb9klHzPjOpyYTNt3cBCq1WRGiiklfvSM1R-RJ8546IPLP2LN-oEXL-kKNdUpxSLUWSsjuk9kkH1ZkN27NxRtnjzc1KG7MBHJRtVsGUsF8b7m5L1rSYzorbj19j2z5oCHnfZHm8wZkWteEAED2jsjJaRCEwyzqXBgSpnTIy8gYO_tlpwswCpg9dgR1MSwK72OjQvLsf_xubRq2Ykv2RylF4cdF8EuGtLOIb_w"</span>
</code></pre>
<p>å¦‚æœæ²¡æœ‰å¸¦ä¸ŠAccess Tokenï¼Œç›´æ¥è°ƒç”¨AgentCore Runtimeçš„æ—¶å€™å°†çœ‹åˆ°ä¸€æ¡é”™è¯¯æ¶ˆæ¯ï¼šâ€AccessDeniedException: An error occurred (AccessDeniedException) when calling the InvokeAgentRuntime operation: Agent is configured for a different authorization token typeâ€ã€‚è¿™äº›tokençŸ­æœŸæœ‰æ•ˆï¼Œå¯ä»¥åœ¨cognitoä¸­é…ç½®åˆ·æ–°çš„æ—¶é•¿ã€‚å¹¶ä¸”Amazon Cognitoæä¾›æ‰˜ç®¡çš„ç™»å½•å’Œæ³¨å†Œé¡µé¢ï¼Œä»¥åŠä¸°å¯Œçš„å®‰å…¨èƒ½åŠ›ï¼Œæ¯”å¦‚è¦æ±‚ç”¨æˆ·ç»‘å®šMFAï¼Œè¿™æ ·å¯ä»¥é¿å…æœªæˆæƒçš„äººæ‹¿åˆ°ç”¨æˆ·åå¯†ç ä¼ªè£…æˆæˆæƒç”¨æˆ·ä½¿ç”¨è®¿é—®æƒé™ã€‚</p>
<h4 data-id="heading-15">å‡ºç«™æˆæƒ</h4>
<p>Amazon Bedrock AgentCore IdentityéªŒè¯å¯¹äºšé©¬é€Šäº‘ç§‘æŠ€ èµ„æºã€ç¬¬ä¸‰æ–¹æœåŠ¡æˆ– AgentCore Gateway ç›®æ ‡çš„è®¿é—®æƒé™ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ OAuth 2LO/3LO æˆ– API å¯†é’¥ã€‚èº«ä»½ç³»ç»Ÿç®€åŒ–äº†ç®¡ç†å¤šç§å‡­è¯ç±»å‹çš„å¤æ‚æ€§ï¼ŒåŒæ—¶ä¸ºèº«ä»½éªŒè¯å’Œæˆæƒæ“ä½œæä¾›äº†ç»Ÿä¸€çš„æ¥å£ã€‚</p>
<p>åœ¨ä»£ç ä¸­å¯ä»¥é€šè¿‡è°ƒç”¨APIï¼šcreate_api_key_credential_providerï¼Œå°†èƒ½å¤Ÿè®¿é—®ç¬¬ä¸‰æ–¹å·¥å…·çš„APIå¯†é’¥ä¿å­˜åˆ°AgentCore Identityçš„Resource Credential Providerä¸­ã€‚å½“ç”¨æˆ·å‘èµ·ä»£ç†äº¤äº’æ—¶ï¼Œåº”ç”¨ç¨‹åºä¼šå‘å‡ºè¯·æ±‚ï¼Œä»£è¡¨ç”¨æˆ·è°ƒç”¨ AI ä»£ç†ã€‚æ­¤è¯·æ±‚åŒ…å«ç”¨æˆ·çš„èº«ä»½éªŒè¯ä»¤ç‰Œä»¥åŠä»£ç†éœ€è¦å®Œæˆçš„ä»»ä½•å¿…è¦ä¸Šä¸‹æ–‡ã€‚åº”ç”¨ç¨‹åºå……å½“ä»£ç†ï¼Œå°†ç”¨æˆ·çš„èº«ä»½éªŒè¯è¯·æ±‚è½¬å‘åˆ°ä»£ç†åŸºç¡€æ¶æ„ï¼ŒåŒæ—¶ç»´æŠ¤ç”¨æˆ·çš„èº«ä»½ä¸Šä¸‹æ–‡ã€‚</p>
<p>å‡ºç«™æˆæƒæ”¯æŒä»¥ä¸‹ä¸‰ç§èº«ä»½ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae8cf00327ea4926b51152265e454758~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=JNjCA8DldrIA2JXBnagAzdH3k2w%3D" alt="å‡ºç«™æˆæƒè¡¨æ ¼.webp" loading="lazy"/></p>
<h4 data-id="heading-16">AgentCore Identity çš„å®‰å…¨æ€§</h4>
<ul>
<li>å®‰å…¨çš„å‡­è¯å­˜å‚¨ï¼Œä»£ç ä¸­æ²¡æœ‰ç¡¬ç¼–ç çš„APIå¯†é’¥ï¼Œä¸å®¹æ˜“æ³„æ¼æœºå¯†</li>
<li>è·¨å¤šç§èµ„æºç±»å‹çš„ä¸€è‡´èº«ä»½éªŒè¯æ¥å£</li>
<li>å…¨é¢çš„å®¡è®¡æ—¥å¿—ä»¥ç¡®ä¿å®‰å…¨æ€§å’Œåˆè§„æ€§</li>
<li>åŸºäºèº«ä»½å’Œä¸Šä¸‹æ–‡çš„ç»†ç²’åº¦è®¿é—®æ§åˆ¶</li>
<li>é€šè¿‡ AgentCore SDK ç®€åŒ–é›†æˆ</li>
</ul>
<h3 data-id="heading-17">4.2 æ–¹æ¡ˆäºŒï¼š åŸºäºAmazon Bedrock Agentæ„å»ºç«¯åˆ°ç«¯çš„ç»†ç²’åº¦è®¿é—®æ§åˆ¶çš„AI Agent</h3>
<p>æˆ‘ä»¬ä¸ºå®¢æˆ·æä¾›äº†ä¸€ä¸ªåŸºäºAmazon Bedrock Agentsæ„å»ºAI Agentçš„ç»†ç²’åº¦è®¿é—®æ§åˆ¶çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fcatalog.workshops.aws%2Fsecuring-genai-app%2Fen-US" target="_blank" title="https://catalog.workshops.aws/securing-genai-app/en-US" ref="nofollow noopener noreferrer">å®‰å…¨å®æ–½æ–¹æ¡ˆ</a>ã€‚è¯¥æ–¹æ¡ˆé€šè¿‡ç»“åˆå¤šä¸ªäºšé©¬é€Šäº‘ç§‘æŠ€æœåŠ¡ï¼Œå®ç°äº†å®‰å…¨å¯é çš„Agentic AI åº”ç”¨è®¿é—®æ§åˆ¶ä½“ç³»ã€‚æ•´ä¸ªç³»ç»Ÿè®¾è®¡æ³¨é‡å®‰å…¨æ€§å’Œè®¿é—®æ§åˆ¶ï¼Œç¡®ä¿ç”¨æˆ·åªèƒ½è®¿é—®å…¶æƒé™èŒƒå›´å†…çš„æ•°æ®ï¼Œæ˜¯ä¸€ä¸ªå…¸å‹çš„æ•™è‚²é¢†åŸŸç”Ÿæˆå¼AIåº”ç”¨å®‰å…¨å®è·µæ¡ˆä¾‹ã€‚æ ¸å¿ƒå†…å®¹åŒ…æ‹¬ï¼š</p>
<p>1ï¼‰é€šè¿‡å®é™…çš„åº”ç”¨åœºæ™¯ï¼Œä»¥å­¦æ ¡åŠ©æ‰‹(SchoolAgent)ä¸ºä¾‹ï¼Œé€šè¿‡èŠå¤©ç•Œé¢è®©ä¸åŒè§’è‰²ï¼ˆå¦‚å­¦ç”Ÿã€æ•™å¸ˆã€ç›‘æŠ¤äººï¼‰åŸºäºå„è‡ªæƒé™æŸ¥è¯¢å’Œè·å–ä¿¡æ¯ã€‚</p>
<p>2ï¼‰å®‰å…¨æ§åˆ¶æœºåˆ¶çš„è®¾è®¡ï¼Œ</p>
<ul>
<li>ä½¿ç”¨Amazon Cognitoè¿›è¡Œç”¨æˆ·èº«ä»½éªŒè¯</li>
<li>é€šè¿‡Amazon Verified Permissions å®æ–½ç»†ç²’åº¦è®¿é—®æ§åˆ¶</li>
<li>ç¡®ä¿AIä»£ç†èƒ½è¯†åˆ«ç”¨æˆ·èº«ä»½å¹¶åªæä¾›æˆæƒèŒƒå›´å†…çš„æ•°æ®</li>
</ul>
<p>3ï¼‰è®¿é—®æƒé™è®¾è®¡ï¼š</p>
<ul>
<li>å®¶é•¿åªèƒ½è®¿é—®å…¶å­å¥³çš„æ•°æ®</li>
<li>æ•™å¸ˆä»…å¯æŸ¥çœ‹å…¶ä»»æ•™ç­çº§çš„ä¿¡æ¯</li>
<li>é€šè¿‡åˆ†å±‚å®‰å…¨æ§åˆ¶ç¡®ä¿æ•°æ®è®¿é—®å®‰å…¨</li>
</ul>
<p>é€šè¿‡å¦‚ä¸‹å‚è€ƒæ¶æ„ï¼Œå¯ä»¥å®ç°å®Œæ•´çš„èº«ä»½è®¤è¯ä¸æˆæƒæµç¨‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4802739975eb4fe9b48d2b3dbeb69627~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=qILauzuFW1bjeJFi6uB%2FfQF3puE%3D" alt="å›¾8.webp" loading="lazy"/></p>
<p align="center">å›¾8 â€“ æ„å»ºç«¯åˆ°ç«¯èº«ä»½è®¤è¯ä¸æˆæƒæ¶æ„</p>
<h3 data-id="heading-18">4.3 æ–¹æ¡ˆä¸‰ï¼š åŸºäºäºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½åŒºæœåŠ¡æ„å»ºçµæ´»å¯æ§å…¨è‡ªå»ºæ–¹æ¡ˆ</h3>
<p>é‰´äº Amazon Bedrock AgentCore Identity å’Œ Bedrock Agents ç­‰ä¸“æœ‰æ‰˜ç®¡æ–¹æ¡ˆåœ¨ä¸­å›½åŒºå°šæœªè½åœ°ï¼Œä¼ä¸šå¯åŸºäºäºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½åŒºç°æœ‰æœåŠ¡ï¼Œé‡‡ç”¨å®Œå…¨è‡ªå»ºæ–¹å¼çµæ´»å®ç° Agentic AI åº”ç”¨ç³»ç»Ÿä¸­çš„èº«ä»½è®¤è¯ä¸æˆæƒç®¡ç†ã€‚</p>
<p>æœ¬æ–¹æ¡ˆå……åˆ†ç»“åˆä¼ä¸šè‡ªæœ‰ SSO/OIDC/ADã€JWT Tokenã€è‡ªä¸»ç”¨æˆ·æ± ã€API Gatewayã€IAMã€STSã€Secrets Manager åŠæ ‡å‡† API è°ƒç”¨é“¾ï¼Œå®ç°å…¨æµç¨‹é›¶æ‰˜ç®¡ã€æ•°æ®å¯æ§ã€æœ€å°æƒé™ã€åˆè§„å¯å®¡è®¡ã€‚æ¶æ„å…¼å®¹æ··åˆäº‘å’Œæœ¬åœ° ITï¼Œä¾¿äºæ¼”è¿›å’Œå¹³æ»‘å‡çº§ã€‚</p>
<p>ä¼˜åŠ¿ï¼šæ— éœ€ä¾èµ–äº‘ä¸Šæ‰˜ç®¡æœåŠ¡ï¼Œæ”¿ç­–åˆè§„æ€§å¼ºï¼Œæƒé™æ§åˆ¶ç»†è…»ï¼Œç»„ä»¶æ›¿æ¢çµæ´»ï¼Œé€‚é…å¤§å‹ä¼ä¸šå’Œé«˜åº¦è‡ªå®šä¹‰åœºæ™¯ã€‚</p>
<p>é€‚ç”¨åœºæ™¯ï¼šæ•°æ®é«˜æ•æ„Ÿã€æƒé™å·®å¼‚å¤§ã€å¼‚æ„ IT ç¯å¢ƒã€å¯¹æ¥è‡ªæœ‰ ID ä½“ç³»æˆ–å¤šæ´»éƒ¨ç½²çš„ Agent åº”ç”¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/528c680913c54edfa53394455ef5c0b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=qicc1JSNLUCN2gsnT0%2FkD2KDCPo%3D" alt="å›¾9.webp" loading="lazy"/></p>
<p align="center">å›¾9 â€“ åŸºäºäºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½åŒºæœåŠ¡æ„å»ºçµæ´»å¯æ§å…¨è‡ªå»ºæ–¹æ¡ˆ</p>
<h3 data-id="heading-19">4.4 MCP Server è®¤è¯&amp;æˆæƒç®¡ç†</h3>
<p>ä»¥ä¸‹ç« èŠ‚ä»‹ç»ä½¿ç”¨Amazon AgentCoreå’ŒAmazon Cognitoç»„ä»¶å®ç°Agentä»£ç†MCP serverè®¤è¯é‰´æƒçš„å®æ–½ç¤ºä¾‹ã€‚</p>
<p>Amazon AgentCore æ˜¯ä¸€ç§æœåŠ¡ï¼Œæ—¨åœ¨ç®€åŒ–å’ŒåŠ é€Ÿ AI ä»£ç†çš„éƒ¨ç½²å’Œç®¡ç†ã€‚å®ƒæä¾›äº†ä¸€ç³»åˆ—å·¥å…·å’Œ APIï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ„å»ºã€éƒ¨ç½²å’Œç®¡ç† AI ä»£ç†ã€‚Amazon AgentCore æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€å’Œæ¡†æ¶ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥çµæ´»é€‰æ‹©æœ€é€‚åˆè‡ªå·±çš„å·¥å…·ã€‚</p>
<p>Amazon Cognito æ˜¯ä¸€ç§ç”¨æˆ·èº«ä»½å’Œè®¿é—®ç®¡ç†æœåŠ¡ï¼Œå®ƒå…è®¸å¼€å‘è€…è½»æ¾åœ°æ·»åŠ ç”¨æˆ·æ³¨å†Œå’Œç™»å½•åŠŸèƒ½åˆ°ä»–ä»¬çš„åº”ç”¨ä¸­ã€‚Amazon Cognito æä¾›äº†ä¸¤ä¸ªä¸»è¦ç»„ä»¶ï¼š</p>
<ol>
<li>ç”¨æˆ·æ± ï¼šç”¨æˆ·æ± æ˜¯ä¸€ä¸ªå®Œå…¨æ‰˜ç®¡çš„ç”¨æˆ·ç›®å½•ï¼Œå¯ä»¥ç”¨äºç®¡ç†å’ŒéªŒè¯ç”¨æˆ·ã€‚ç”¨æˆ·æ± æ”¯æŒå¤šç§èº«ä»½éªŒè¯æœºåˆ¶ï¼ŒåŒ…æ‹¬ç”¨æˆ·åå’Œå¯†ç ã€ç”µå­é‚®ä»¶å’ŒçŸ­ä¿¡éªŒè¯ç ã€ç¤¾äº¤èº«ä»½æä¾›å•†ï¼ˆå¦‚ Googleã€Facebookï¼‰ç­‰ã€‚</li>
<li>èº«ä»½æ± ï¼šèº«ä»½æ± å…è®¸åº”ç”¨ç¨‹åºè·å–ä¸´æ—¶äºšé©¬é€Šäº‘ç§‘æŠ€å‡­è¯ï¼Œä»¥è®¿é—®äºšé©¬é€Šäº‘ç§‘æŠ€èµ„æºã€‚èº«ä»½æ± å¯ä»¥ä¸ç”¨æˆ·æ± é›†æˆï¼Œä¸ºç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·æä¾›è®¿é—®æƒé™ã€‚<br/>
éƒ¨ç½² AgentCore MCP Server çš„è¯¦ç»†æ­¥éª¤ï¼š</li>
</ol>
<p>åœ¨éƒ¨ç½² AgentCore MCP Server æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Amazon Cognito è¿›è¡Œç”¨æˆ·æ± å’Œåº”ç”¨å®¢æˆ·ç«¯çš„è®¾ç½®ï¼Œä»¥å®ç°é‰´æƒåŠŸèƒ½ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†çš„å®ç°æ­¥éª¤å’Œä»£ç ç¤ºä¾‹ï¼š</p>
<ol>
<li>åˆ›å»º Amazon Cognito ç”¨æˆ·æ± å’Œåº”ç”¨å®¢æˆ·ç«¯</li>
</ol>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€ç®¡ç†æ§åˆ¶å°ä¸­åˆ›å»ºä¸€ä¸ª Cognito ç”¨æˆ·æ± å’Œåº”ç”¨å®¢æˆ·ç«¯ã€‚ä»¥ä¸‹æ˜¯åˆ›å»ºç”¨æˆ·æ± å’Œåº”ç”¨å®¢æˆ·ç«¯çš„å‘½ä»¤ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">aws cognito<span class="hljs-operator">-</span>idp <span class="hljs-keyword">create</span><span class="hljs-operator">-</span><span class="hljs-keyword">user</span><span class="hljs-operator">-</span>pool <span class="hljs-comment">--pool-name mcp-server-user-pool</span>
aws cognito<span class="hljs-operator">-</span>idp <span class="hljs-keyword">create</span><span class="hljs-operator">-</span><span class="hljs-keyword">user</span><span class="hljs-operator">-</span>pool<span class="hljs-operator">-</span>client <span class="hljs-comment">--user-pool-id &lt;USER_POOL_ID&gt; --client-name mcp-server-app-client</span>
</code></pre>
<p>2.  åˆ›å»º IAM è§’è‰²</p>
<p>ä¸ºäº†è®© MCP æœåŠ¡èƒ½å¤Ÿä¸ Cognito è¿›è¡Œäº¤äº’ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª IAM è§’è‰²ï¼Œå¹¶é™„åŠ ç›¸åº”çš„ç­–ç•¥ã€‚ä»¥ä¸‹æ˜¯åˆ›å»º IAM è§’è‰²çš„ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import boto3

<span class="hljs-attr">client</span> = boto3.client(<span class="hljs-string">'iam'</span>)

<span class="hljs-comment"># åˆ›å»º IAM è§’è‰²</span>
<span class="hljs-attr">response</span> = client.create_role(
    <span class="hljs-attr">RoleName</span>=<span class="hljs-string">'agentcore-mcp-server-role'</span>,
    <span class="hljs-attr">AssumeRolePolicyDocument</span>=json.dumps({
        "Version": "2012-10-17",
        "Statement": <span class="hljs-section">[
            {
                "Effect": "Allow",
                "Principal": {
                    "Service": "ec2.amazonaws.com"
                },
                "Action": "sts:AssumeRole"
            }
        ]</span>
    })
)

<span class="hljs-comment"># é™„åŠ  Cognito è®¿é—®ç­–ç•¥</span>
client.attach_role_policy(
    <span class="hljs-attr">RoleName</span>=<span class="hljs-string">'agentcore-mcp-server-role'</span>,
    <span class="hljs-attr">PolicyArn</span>=<span class="hljs-string">'arn:aws:iam::aws:policy/AmazonCognitoPowerUser'</span>
)
</code></pre>
<p>3.  é…ç½® AgentCore Runtime</p>
<p>åœ¨é…ç½® AgentCore Runtime æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®š Cognito ç”¨æˆ·æ± å’Œåº”ç”¨å®¢æˆ·ç«¯çš„ä¿¡æ¯ï¼Œä»¥åŠ IAM è§’è‰²çš„ ARNã€‚ä»¥ä¸‹æ˜¯é…ç½®ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">response</span> = agentcore_runtime.configure(
    <span class="hljs-attr">entrypoint</span>=<span class="hljs-string">'mcp_server.fixed.py'</span>,
    <span class="hljs-attr">execution_role_arn</span>=<span class="hljs-string">'arn:aws:iam::687912291502:role/agentcore-mcp-server-auto-role'</span>,
    <span class="hljs-attr">auto_create_ecrs</span>=<span class="hljs-literal">True</span>,
    <span class="hljs-attr">requirements_txt</span>=<span class="hljs-string">'requirements.txt'</span>,
    <span class="hljs-attr">region</span>=<span class="hljs-string">'region'</span>,
    <span class="hljs-attr">authorizer_configuration</span>=auth_config,
    <span class="hljs-attr">protocol</span>=<span class="hljs-string">'MCP'</span>,
    <span class="hljs-attr">agent_name</span>=<span class="hljs-string">'mcp_server_auto'</span>
)
</code></pre>
<p>4.  å¯åŠ¨ AgentCore Runtime</p>
<p>æœ€åï¼Œæˆ‘ä»¬å¯ä»¥å¯åŠ¨ AgentCore Runtimeï¼Œå¹¶é€šè¿‡ Cognito è¿›è¡Œç”¨æˆ·è®¤è¯å’Œé‰´æƒã€‚ä»¥ä¸‹æ˜¯å¯åŠ¨ç¤ºä¾‹ä»£ç ï¼š</p>
<p>launch_result = agentcore_runtime.launch()</p>
<p>åœ¨ AI Agentåº”ç”¨ä¸­ï¼ŒMCP Server çš„é‰´æƒæœºåˆ¶æ˜¯ç¡®ä¿ç³»ç»Ÿå®‰å…¨æ€§å’Œç¨³å®šæ€§çš„å…³é”®ã€‚é€šè¿‡ Amazon AgentCore å’Œ Amazon Cognitoï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°å®ç°å’Œç®¡ç† MCP æœåŠ¡å™¨çš„é‰´æƒåŠŸèƒ½ã€‚è¿™ä¸ä»…æé«˜äº†ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼Œè¿˜ç®€åŒ–äº†å¼€å‘å’Œéƒ¨ç½²è¿‡ç¨‹ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥æ›´ä¸“æ³¨äº AI æ¨¡å‹å’Œä¸šåŠ¡é€»è¾‘çš„å¼€å‘ã€‚</p>
<h2 data-id="heading-20">5. ç»“è¯­</h2>
<p>åœ¨Agentic AIåº”ç”¨ç³»ç»Ÿå¿«é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œèº«ä»½è®¤è¯ä¸æˆæƒç®¡ç†å·²æˆä¸ºæ„å»ºå®‰å…¨å¯ä¿¡AIç”Ÿæ€ç³»ç»Ÿçš„åŸºçŸ³ã€‚ä»â€AgentSmithâ€åˆ°â€MCP Inspectorâ€ç­‰å®‰å…¨äº‹ä»¶çš„æ•™è®­è¡¨æ˜ï¼Œæˆ‘ä»¬å¿…é¡»é«˜åº¦é‡è§†AI Agentçš„èº«ä»½ç®¡ç†é—®é¢˜ã€‚æ„å»ºå®‰å…¨å¯ä¿¡çš„ç³»ç»Ÿéœ€è¦éµå¾ªæœ€å°æƒé™ã€é›¶ä¿¡ä»»éªŒè¯ã€çºµæ·±é˜²å¾¡å’ŒæŒç»­ç›‘æ§ç­‰æ ¸å¿ƒè®¾è®¡åŸåˆ™ï¼ŒåŒæ—¶é‡‡ç”¨é˜¶æ®µåŒ–å®æ–½ç­–ç•¥ï¼Œä»åŸºç¡€èº«ä»½è®¤è¯é€æ­¥æ‰©å±•åˆ°å®Œæ•´çš„å®‰å…¨ä½“ç³»ã€‚</p>
<p>é¢å¯¹ä¼ ç»Ÿèº«ä»½ç®¡ç†å‘åŠ¨æ€åŒ–ã€æ™ºèƒ½åŒ–å’Œç»†ç²’åº¦æ–¹å‘çš„æ¼”è¿›ï¼Œä¼ä¸šå¯ä»¥é€šè¿‡é‡‡ç”¨OAuth 2.0ã€å»ä¸­å¿ƒåŒ–èº«ä»½ç­‰æŠ€æœ¯æ¡†æ¶ï¼Œç»“åˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fcatalog.workshops.aws%2Fsecuring-genai-app%2Fen-US" target="_blank" title="https://catalog.workshops.aws/securing-genai-app/en-US" ref="nofollow noopener noreferrer">Amazon Bedrock AgentCore IdentityÂ </a>ç­‰äº‘å¹³å°è§£å†³æ–¹æ¡ˆï¼Œæœ‰æ•ˆåº”å¯¹æ··æ·†ä»£ç†äººç­‰ç‰¹æœ‰çš„å®‰å…¨å¨èƒã€‚é€šè¿‡å»ºç«‹ç¡®å®šæ€§çš„æˆæƒæœºåˆ¶å’Œå®‰å…¨çš„èº«ä»½ä¿¡æ¯ä¼ é€’é€šé“ï¼Œç¡®ä¿AI Agentåœ¨ä»£è¡¨ç”¨æˆ·æ‰§è¡Œä»»åŠ¡æ—¶æ—¢ä¿æŒé«˜æ•ˆæ€§ï¼Œåˆä¸å¤±å®‰å…¨æ€§ã€‚</p>
<p>éšç€æŠ€æœ¯çš„æŒç»­æˆç†Ÿå’Œæ ‡å‡†åŒ–è¿›ç¨‹çš„æ¨è¿›ï¼ŒAI Agentèº«ä»½ç®¡ç†å°†å˜å¾—æ›´åŠ æ™ºèƒ½å’Œè‡ªé€‚åº”ã€‚ç°åœ¨æ­£æ˜¯ä¼ä¸šè§„åˆ’å’Œå®æ–½AI Agentèº«ä»½ç®¡ç†ç³»ç»Ÿçš„æœ€ä½³æ—¶æœºï¼Œå”¯æœ‰å»ºç«‹èµ·å®Œå–„çš„èº«ä»½è®¤è¯ä¸æˆæƒç®¡ç†ä½“ç³»ï¼Œæ‰èƒ½ç¡®ä¿AI Agentåœ¨ä¸ºäººç±»ç¤¾ä¼šåˆ›é€ ä»·å€¼çš„åŒæ—¶ï¼Œå§‹ç»ˆä¿æŒåœ¨å¯æ§å’Œå®‰å…¨çš„è½¨é“ä¸Šè¿è¡Œã€‚è¿™ä¸ä»…æ˜¯æŠ€æœ¯å‘å±•çš„å¿…ç„¶è¦æ±‚ï¼Œæ›´æ˜¯AIæŠ€æœ¯èµ°å‘æˆç†Ÿå’Œæ™®åŠçš„é‡è¦åŸºçŸ³ã€‚<br/>
<strong>æœ¬ç¯‡ä½œè€…</strong><br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c9a6564354e426a9d617e8adb2f6851~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=ZEcbvf58xsNIef4RkozS8CIRRy0%3D" alt="ä½œè€….webp" loading="lazy"/></p>
<p>å…³äºAgentic AIåŸºç¡€è®¾æ–½çš„æ›´å¤šå®è·µç»éªŒå‚è€ƒï¼Œæ¬¢è¿ç‚¹å‡»ï¼š<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Fblogs%2Fchina%2Fagentive-ai-infrastructure-practice-series-1" target="_blank" title="https://aws.amazon.com/cn/blogs/china/agentive-ai-infrastructure-practice-series-1" ref="nofollow noopener noreferrer">Agentic AIåŸºç¡€è®¾æ–½å®è·µç»éªŒç³»åˆ—ï¼ˆä¸€ï¼‰ï¼šAgentåº”ç”¨å¼€å‘ä¸è½åœ°å®è·µæ€è€ƒ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Fblogs%2Fchina%2Fagentic-ai-sandbox-practice%2F" target="_blank" title="https://aws.amazon.com/cn/blogs/china/agentic-ai-sandbox-practice/" ref="nofollow noopener noreferrer">Agentic AIåŸºç¡€è®¾æ–½å®è·µç»éªŒç³»åˆ—ï¼ˆäºŒï¼‰ï¼šä¸“ç”¨æ²™ç›’ç¯å¢ƒçš„å¿…è¦æ€§ä¸å®è·µæ–¹æ¡ˆ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Fblogs%2Fchina%2Fagentic-ai-infrastructure-deep-practice-experience-thinking-series-three-best-practices-for-agent-memory-module" target="_blank" title="https://aws.amazon.com/cn/blogs/china/agentic-ai-infrastructure-deep-practice-experience-thinking-series-three-best-practices-for-agent-memory-module" ref="nofollow noopener noreferrer">Agentic AIåŸºç¡€è®¾æ–½å®è·µç»éªŒç³»åˆ—ï¼ˆä¸‰ï¼‰ï¼šAgentè®°å¿†æ¨¡å—çš„æœ€ä½³å®è·µ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Fblogs%2Fchina%2Fagentic-ai-infrastructure-practice-experience-series-four-mcp-server-from-local" target="_blank" title="https://aws.amazon.com/cn/blogs/china/agentic-ai-infrastructure-practice-experience-series-four-mcp-server-from-local" ref="nofollow noopener noreferrer">Agentic AIåŸºç¡€è®¾æ–½å®è·µç»éªŒç³»åˆ—ï¼ˆå››ï¼‰ï¼šMCPæœåŠ¡å™¨ä»æœ¬åœ°åˆ°äº‘ç«¯çš„éƒ¨ç½²æ¼”è¿›</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Fblogs%2Fchina%2Fagentic-ai-infrastructure-practice-series-5%2F" target="_blank" title="https://aws.amazon.com/cn/blogs/china/agentic-ai-infrastructure-practice-series-5/" ref="nofollow noopener noreferrer">Agentic AIåŸºç¡€è®¾æ–½å®è·µç»éªŒç³»åˆ—ï¼ˆäº”ï¼‰ï¼šAgentåº”ç”¨ç³»ç»Ÿä¸­çš„èº«ä»½è®¤è¯ä¸æˆæƒç®¡ç†</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Fblogs%2Fchina%2Fagent-quality-evaluation%2F" target="_blank" title="https://aws.amazon.com/cn/blogs/china/agent-quality-evaluation/" ref="nofollow noopener noreferrer">Agentic AIåŸºç¡€è®¾æ–½å®è·µç»éªŒç³»åˆ—ï¼ˆå…­ï¼‰ï¼šAgentè´¨é‡è¯„ä¼°</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Fblogs%2Fchina%2Fagentic-ai-infrastructure-practice-series-7%2F" target="_blank" title="https://aws.amazon.com/cn/blogs/china/agentic-ai-infrastructure-practice-series-7/" ref="nofollow noopener noreferrer">Agentic AIåŸºç¡€è®¾æ–½å®è·µç»éªŒç³»åˆ—ï¼ˆä¸ƒï¼‰ï¼šå¯è§‚æµ‹æ€§åœ¨Agentåº”ç”¨çš„æŒ‘æˆ˜ä¸å®è·µ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Fblogs%2Fchina%2Fprivacy-and-security-of-agent-applications" target="_blank" title="https://aws.amazon.com/cn/blogs/china/privacy-and-security-of-agent-applications" ref="nofollow noopener noreferrer">Agentic AIåŸºç¡€è®¾æ–½å®è·µç»éªŒç³»åˆ—ï¼ˆå…«ï¼‰ï¼šAgentåº”ç”¨çš„éšç§å’Œå®‰å…¨</a></p>
<p>*å‰è¿°ç‰¹å®šäºšé©¬é€Šäº‘ç§‘æŠ€ç”Ÿæˆå¼äººå·¥æ™ºèƒ½ç›¸å…³çš„æœåŠ¡ç›®å‰åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€æµ·å¤–åŒºåŸŸå¯ç”¨ã€‚äºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½åŒºåŸŸç›¸å…³äº‘æœåŠ¡ç”±è¥¿äº‘æ•°æ®å’Œå…‰ç¯æ–°ç½‘è¿è¥ï¼Œå…·ä½“ä¿¡æ¯ä»¥ä¸­å›½åŒºåŸŸå®˜ç½‘ä¸ºå‡†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Cursoråœ¨å›æ”¶å›¢é˜Ÿçš„å®è·µ]]></title>    <link>https://juejin.cn/post/7570500819888439339</link>    <guid>https://juejin.cn/post/7570500819888439339</guid>    <pubDate>2025-11-10T03:52:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570500819888439339" data-draft-id="7569977160276852779" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Cursoråœ¨å›æ”¶å›¢é˜Ÿçš„å®è·µ"/> <meta itemprop="keywords" content="Cursor"/> <meta itemprop="datePublished" content="2025-11-10T03:52:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è½¬è½¬æŠ€æœ¯å›¢é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/606586148237431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Cursoråœ¨å›æ”¶å›¢é˜Ÿçš„å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/606586148237431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è½¬è½¬æŠ€æœ¯å›¢é˜Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T03:52:37.000Z" title="Mon Nov 10 2025 03:52:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>æœ€è¿‘ä¸€æ®µæ—¶é—´ï¼Œå›æ”¶å›¢é˜Ÿä¸€ç›´åšæŒç”¨Cursoræ¥è¾…åŠ©å¼€å‘ï¼Œå¹¶åœ¨AIå¼€å‘æ¨¡å¼ä¸Šè¿›è¡Œäº†å¤šæ¬¡è¿­ä»£ã€‚ä»Šå¤©ï¼Œæˆ‘æƒ³å’Œå¤§å®¶åˆ†äº«ä¸€äº›æˆ‘ä»¬åœ¨AIç¼–ç¨‹æ–¹é¢çš„å®è·µå¿ƒå¾—ã€‚</p>
<p>é¦–å…ˆè¦æ˜ç¡®çš„æ˜¯ï¼ŒAIç¼–ç¨‹å¹¶ä¸èƒ½å–ä»£ç¨‹åºå‘˜çš„ç‹¬ç«‹ç¼–ç èƒ½åŠ›ï¼Œä¹Ÿä¸æ˜¯è¯´ç®€å•é…ç½®å‡ ä¸ªMCPå°±èƒ½è®©AIçš„ç¼–ç¨‹èƒ½åŠ›å‘ç”Ÿè´¨çš„é£è·ƒã€‚ä»Šå¤©æˆ‘å°†é‡ç‚¹ä»å®é™…åº”ç”¨å‡ºå‘ï¼Œåˆ†äº«ä¸€äº›AIç¼–ç¨‹çš„æ€è·¯ä¸æµç¨‹ä¼˜åŒ–ç»éªŒï¼Œå¸®åŠ©å„ä½çœŸæ­£çš„åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼ŒæŠŠAIç”¨èµ·æ¥ã€‚</p>
<h2 data-id="heading-1">æˆ‘ä»¬åˆ°åº•èƒ½ç”¨Cursorå¹²ä»€ä¹ˆ</h2>
<p>æˆ‘ä¸€ç›´åœ¨æ€è€ƒï¼Œä½œä¸ºä¸€ä¸ªæœˆä½¿ç”¨æˆæœ¬è¶…è¿‡100å—çš„â€œæƒå¨â€å·¥å…·æ¥è¯´ï¼Œå¦‚æœåªè®©ä»–åšä¸€äº›beançš„ç”Ÿæˆï¼Œmapperçš„ç”Ÿæˆï¼Œæœªå…å¤ªè¿‡äºæµªè´¹ã€‚ä½†æ˜¯å¦‚æœç›´æ¥æŠŠéœ€æ±‚æ–‡æ¡£å–‚ç»™ä»–ï¼Œç”Ÿæˆçš„ä»£ç è·ç¦»æˆ‘ä»¬çš„æœŸæœ›åˆå¤ªå¤§ã€‚æˆ‘ä»¬æ€»è¯´ï¼Œæƒ³è®©AIç”Ÿæˆç¬¦åˆè¦æ±‚çš„ä»£ç ï¼Œéœ€è¦è¯¦ç»†çš„å°†æˆ‘ä»¬çš„éœ€æ±‚å†™æˆæç¤ºè¯å‘Šè¯‰AIï¼Œä½†æ˜¯åˆ°åº•å¦‚ä½•æ‰ç®—è¯¦ç»†å‘¢ï¼Ÿå¦‚ä½•æ‰èƒ½å†™å‡ºè¿™ä»½è¯¦ç»†çš„æç¤ºè¯å‘¢ï¼Ÿ</p>
<p>ä¸‹é¢æ˜¯æˆ‘ä½¿ç”¨Cursorè¿›è¡Œé¡¹ç›®å¼€å‘çš„ä¸‰æ­¥èµ°ï¼š</p>
<ol>
<li>ç”±Cursorå¸®åŠ©å¼€å‘è€…æ‹†åˆ†é¡¹ç›®â€”â€”åˆæ­¥å®Œæˆæç¤ºè¯æ¡†æ¶</li>
<li>ç”±å¼€å‘è€…å¸®åŠ©Cursorç†è§£é¡¹ç›®â€”â€”ä¸°å¯Œæç¤ºè¯å†…å®¹</li>
<li>å®Œæˆå¼€å‘åç”±Cursorå¸®åŠ©å¼€å‘è€…è¿›è¡Œå›å½’éªŒè¯</li>
</ol>
<br/>
<h3 data-id="heading-2">ä¸€ã€è®©cursorå¸®åŠ©ä½ æ›´å¥½çš„æ‹†åˆ†é¡¹ç›®</h3>
<p>æ—¢ç„¶ç›´æ¥ç”Ÿæˆä»£ç éš¾åº¦å¤ªå¤§ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½å…ˆå°è¯•è®©AIåšä¸€äº›æ›´ç®€å•çš„äº‹æƒ…ï¼Œæ¯”å¦‚åˆ†æä¸€ä¸‹éœ€æ±‚æ–‡æ¡£ã€‚</p>
<p>ä¸€èˆ¬æ¥è®²ï¼Œå¯¹äºä¸€ä¸ªé¡¹ç›®çš„åˆ†æä¸»è¦åˆ†ä¸¤æ­¥ï¼š</p>
<ol>
<li>å¯¹äºé¡¹ç›®æ–°æµç¨‹çš„åˆ†æ</li>
<li>å¯¹äºç›¸å…³ç°çŠ¶çš„åˆ†æ</li>
</ol>
<p>ä¸Šè¿°æ­¥éª¤æ­¥å®Œæˆåæˆ‘ä»¬æœŸæœ›Cursorèƒ½å¤ŸåŸºäºéœ€æ±‚PRDæ–‡æ¡£ï¼Œå¸®æˆ‘ä»¬æ€»ç»“ä¸€ä»½å…¼å®¹å½“ä¸‹ç³»ç»Ÿé€»è¾‘çš„åˆæ­¥çš„åŠŸèƒ½åˆ†ææ–‡æ¡£ï¼ˆä¸éœ€è¦åŠŸèƒ½çš„å…·ä½“å®ç°æ–¹æ¡ˆï¼Œåªéœ€è¦ç¡®å®šæœ‰å“ªäº›åŠŸèƒ½å³å¯ï¼‰ï¼ŒåŒ…æ‹¬ä¸€äº›å®ä½“ç±»ã€VOå¯¹è±¡çš„å®šä¹‰ï¼Œæ¥å£å®šä¹‰ï¼Œæ•°æ®åº“è¡¨å®šä¹‰ç­‰ç­‰ã€‚</p>
<h4 data-id="heading-3">1ã€é’ˆå¯¹æ–°æµç¨‹ï¼ˆPRDæ–‡æ¡£ï¼‰çš„åˆ†æ</h4>
<p>Cursorå¯ä»¥å¾ˆå¥½çš„åˆ†æå¹¶æ€»ç»“PRDæ–‡æ¡£çš„å†…å®¹ï¼Œä½†äº§å“ç»™å‡ºçš„PRDæ–‡æ¡£ä¸­ä¸å¯é¿å…çš„ä¼šå¯¹ä¸€äº›â€œä¼—æ‰€å‘¨çŸ¥â€çš„ä¸Šä¸‹æ–‡è¿›è¡Œçœç•¥ï¼ŒCursorä¹Ÿå› æ­¤æ— æ³•å¾—çŸ¥é¡¹ç›®çš„å…¨è²Œï¼Œå•çº¯æŠŠPRDæ–‡æ¡£å–‚ç»™Cursorå¹¶ä¸èƒ½è®©ä»–ç›´æ¥ç”Ÿæˆç¬¦åˆæˆ‘ä»¬æœŸæœ›çš„ä»£ç ã€‚</p>
<p>ä½†è¿™ä¸ä»£è¡¨æˆ‘ä»¬åœ¨è¿™ä¸€é˜¶æ®µå®Œå…¨æ— æ³•è®©Cursorä¸ºæˆ‘ä»¬åˆ›é€ ä»·å€¼ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨Cursorçš„åˆ†ææ€»ç»“èƒ½åŠ›ï¼Œæ¢³ç†PRDæ–‡æ¡£ä¸­çš„åŠŸèƒ½ç‚¹ä¸è¦ç‚¹ï¼ŒåŠ é€Ÿè‡ªå·±ç†è§£é¡¹ç›®ï¼Œå¹¶ç»“åˆè‡ªå·±å¯¹prdçš„ç†è§£è¿›è¡ŒåŒå‘éªŒè¯ã€‚é¿å…åæœŸå¼€å‘æ—¶å‡ºç°ä¸äº§å“ç†è§£ä¸ç¬¦æˆ–è€…é—æ¼åŠŸèƒ½ç‚¹ã€‚</p>
<p>ä½¿ç”¨Cursorè¯»å–å¹¶åˆ†ææœ¬æ¬¡éœ€æ±‚PRDæ–‡æ¡£çš„å†…å®¹æ—¶ï¼Œä¸ºäº†ä¸è¢«ä¸Šä¸‹æ–‡é•¿åº¦æ‰€é™åˆ¶ï¼Œæˆ‘ä»¬éœ€è¦è®©Cursorå°†ä»–çš„æ€è€ƒç»“æœè¿›è¡Œè®°å½•ã€‚ä¾‹å¦‚ä¸‹é¢çš„æç¤ºè¯ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">https://dashen.zhuanspirit.com/pages/viewpage.action?<span class="hljs-attr">pageId</span>=xxxxxxxx 
æå–ä¸€ä¸‹ä¸Šé¢é“¾æ¥çš„æ–‡æ¡£ä¸­çš„å†…å®¹ã€‚å¸®æˆ‘æç‚¼ã€XXXXXè´¦å•ã€‘éƒ¨åˆ†ç›¸å…³åŠŸèƒ½ï¼Œæœ‰å“ªäº›éœ€è¦å¼€å‘çš„åŠŸèƒ½ç‚¹ï¼Œæ³¨æ„ï¼Œæˆ‘ä»¬æœ¬æ¬¡ä»…éœ€è¦æŸ¥è¯¢XXXXåˆ—è¡¨ä»¥åŠæŸ¥è¯¢XXXXæµæ°´è¯¦æƒ…ï¼Œå…¶ä½™ç›¸å…³åŠŸèƒ½å’Œç»„ä»¶å·²ç»å®ç°å®Œæˆã€‚
åˆ†æä½ éœ€è¦æ‹†åˆ†å‡ºå¤šå°‘ä¸ªåŠŸèƒ½ç‚¹ä»¥åŠæ¥å£

åœ¨æˆ‘è®©ä½ å†™ä»£ç ä¹‹å‰ä¸è¦ç”Ÿæˆä»£ç ï¼Œå…ˆé€æ­¥åˆ†æéœ€æ±‚ï¼Œå†è¯´æ˜ä½ æ‰“ç®—æ€ä¹ˆåš
å°†ä½ çš„æ€è€ƒä»¥mdçš„å½¢å¼ä¿å­˜åœ¨.docs/æŠ€æœ¯è®¾è®¡.mdä¸‹
</code></pre>
<blockquote>
<p>ä¹Ÿè®¸ä½ çš„åœ¨çº¿PRDæ–‡æ¡£éœ€è¦ç™»é™†æ‰å¯æŸ¥çœ‹ï¼Œè¿™é‡Œç»™å‡ºä¸¤ä¸ªè§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li>æ‰¾åˆ°ä½ çš„æœ¬åœ°cookieï¼Œè®©Cursorå¸¦ç€cookieå¯¹ä½ çš„åœ¨çº¿æ–‡æ¡£è¿›è¡Œè®¿é—®</li>
<li>ä½¿ç”¨mcpï¼Œå…·ä½“æ–¹æ³•è¿™é‡Œä¸è¿›è¡Œå±•å¼€</li>
</ol>
</blockquote>
<p>ç„¶åï¼Œåå¤ä¸AIè¿›è¡Œæ²Ÿé€šï¼Œæ˜ç¡®å‘Šè¯‰ä»–æˆ‘ä»¬éœ€è¦ä»€ä¹ˆï¼Œä¸éœ€è¦ä»€ä¹ˆï¼Œä¾‹å¦‚ä¸‹é¢çš„æç¤ºè¯ã€‚</p>
<pre><code class="hljs">æˆ‘ä»¬ä¸åšæ•°æ®åŒæ­¥ä¸ä¿å­˜ç›¸å…³çš„å·¥ä½œï¼Œä»è®¾è®¡æ–¹æ¡ˆä¸­å‰”é™¤ï¼Œæ‰€æœ‰çš„æ•°æ®å·²ç»å‡†å¤‡å°±ç»ªï¼Œæˆ‘ä»¬åªéœ€è¦æŸ¥è¯¢å°±å¯ä»¥äº†
å¸®æˆ‘è®¾è®¡è¿™ä¸ªæ¥å£çš„æŸ¥è¯¢çš„å‚æ•°ä¸è¿”å›å€¼
</code></pre>
<br/>
<p>ä¸‹é¢æ˜¯åŸºäºCursorè¿›è¡ŒPRDæ–‡æ¡£åˆ†æçš„åŸºæœ¬æµç¨‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/153b7c74e3f042a487efe480cc838e0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763351557&amp;x-signature=%2BV%2Feyj2gMMJXYNrs%2BPxo%2BkdpoJQ%3D" alt="Cursorè¾…åŠ©ç¡®è®¤PRDæ–‡æ¡£åŠŸèƒ½ç‚¹çš„è¿‡ç¨‹" loading="lazy"/></p>
<p>é¦–å…ˆæ˜ç¡®ä¸€ç‚¹ï¼šä¸è¦è¯•å›¾è®©Cursoræ¥æ•™æˆ‘ä»¬å¦‚ä½•åšé¡¹ç›®ï¼Œè€Œæ˜¯è®©å®ƒååŠ©å®Œæˆæ¯ä¸ªç¯èŠ‚ã€‚æ‰€ä»¥å¦‚æœè§‰å¾—è‡ªå·±å¯ä»¥æ›´å¿«æ›´å‡†ç¡®çš„ä¿®æ”¹æ–‡æ¡£çš„æŸä¸€éƒ¨åˆ†ï¼Œä¸»åŠ¨å»ä¿®æ”¹ï¼Œä¸è¦è®©AIæ¥åšã€‚æ¯”å¦‚ï¼ŒAIå¸®å¿™è®¾è®¡äº†ä¸€ä¸ªå®ä½“å¯¹è±¡ï¼Œä½†æ˜¯å…¶ä¸­éƒ¨åˆ†å­—æ®µå‘½åä¸ç¬¦åˆæˆ‘ä»¬çš„ä¸šåŠ¡è¦æ±‚ï¼Œæˆ‘ä»¬å°±ä¸è¦è®©AIæ¥ä¿®æ”¹äº†ï¼Œç›´æ¥åŠ¨æ‰‹ä¿®æ”¹mdæ–‡æ¡£ã€‚</p>
<p>å¦å¤–ï¼Œå¦‚æœä½ äº²è‡ªæ”¹åŠ¨çš„å†…å®¹å¾ˆå¤šï¼Œå»ºè®®ä¸‹æ¬¡è·ŸCursoræ²Ÿé€šçš„æ—¶å€™æ–°å¼€å¯ä¸€ä¸ªå¯¹è¯æ¡†ï¼Œé‡æ–°è®©ä»–è¯»å–PRDæ–‡æ¡£åŠå¯¹åº”çš„åˆ†ææ–‡æ¡£ï¼Œå¦åˆ™Cursorä¼šä¿ç•™ä¹‹å‰ç”Ÿæˆçš„è®°å¿†ï¼Œå¯¼è‡´ä½ çš„æ”¹åŠ¨å¯èƒ½ä¸ä¼šç”Ÿæ•ˆã€‚</p>
<p>ä¸‹é¢æ˜¯æ­¤é˜¶æ®µç”Ÿæˆçš„åŠŸèƒ½åˆ†ææ–‡æ¡£çš„éƒ¨åˆ†å±•ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7cad7926278946eb98ab687225d1ef9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763351557&amp;x-signature=phbq6jfAKDVncGSDsG3orHZC9H4%3D" alt="img" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d701f588f6b74d6aa757431eeafd1267~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763351557&amp;x-signature=guqaeK7MweqHyD3xrcqpN%2BN1Whk%3D" alt="CursoråŸºäºPRDæ–‡æ¡£åˆæ­¥ç”Ÿæˆçš„æ–‡æ¡£" loading="lazy"/></p>
<h4 data-id="heading-4">2ã€å¯¹äºç›®å‰å·²æœ‰ä»£ç çš„åˆ†æï¼Œä»¥åŠå½±å“èŒƒå›´åˆ†æ</h4>
<p>ç›¸æ¯”äºå¼€å‘è€…æ¥è¯´ï¼ŒCursorä¼šæ›´è´´è¿‘ä»£ç ã€‚æˆ‘ä»¬å¯ä»¥åœ¨Cursorçš„ååŠ©ä¸‹æ›´å¥½çš„å®Œæˆç°æœ‰ä¸šåŠ¡æµç¨‹çš„æ¢³ç†ã€‚
æ›´å…·ä½“çš„è®²ï¼Œæˆ‘ä»¬å¯ä»¥ä»éœ€æ±‚çš„ç›®æ ‡æ”¹åŠ¨ç‚¹å¼€å§‹ï¼Œæ¢³ç†å…¶æ‰€å±åŠŸèƒ½å’Œå®ç°æ–¹å¼ï¼ŒåŒ…å«æ•°æ®ç®¡ç†ã€äº¤äº’æµç¨‹ç­‰ç­‰ã€‚
è¿™é‡Œä»‹ç»ä¸€ä¸‹æˆ‘ä»¬å¸¸ç”¨çš„Cursoræ’ä»¶ï¼š
Mermaid Previewæ’ä»¶ï¼Œä¸Markdown Preview Enhancedæ’ä»¶ã€‚</p>
<blockquote>
<p>æµç¨‹å›¾ç”Ÿæˆæ’ä»¶
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2936d20205f84e8096c5483082f0f7c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763351557&amp;x-signature=WhNhktifJKbaS%2BXV%2BkEzB8fqYcA%3D" alt="img" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6c1026715a04c2e9af783feef7551fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763351557&amp;x-signature=c5jVMHbT5BU7uYDSapg1APaFJpQ%3D" alt="img" loading="lazy"/></p>
</blockquote>
<p>å®‰è£…å®Œæ’ä»¶å¹¶é‡å¯cursoråæˆ‘ä»¬ä¾¿å¯ä»¥é€šè¿‡å¦‚ä¸‹æç¤ºè¯è¿›è¡Œæµç¨‹å›¾ç”Ÿæˆäº†ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">com.xxx.xxx.xxx.xxx.facade.SxxxxxxxxFacade<span class="hljs-meta">#getxxxxxx</span>
é’ˆå¯¹è¯¥æ–¹æ³•å¸®æˆ‘ç”Ÿæˆä¸€ä¸ª.mdçš„ä¸šåŠ¡æµç¨‹å›¾
</code></pre>
<br/>
<p>å¯¹äºå¤æ‚çš„ç³»ç»Ÿæµç¨‹æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºæ­¤ç§æ–¹æ³•ç”Ÿæˆæµç¨‹å›¾ï¼Œè¾…åŠ©ç¡®å®šæœ¬æ¬¡æ”¹åŠ¨çš„ä»£ç çš„å½±å“èŒƒå›´ã€‚</p>
<h3 data-id="heading-5">äºŒã€å¸®åŠ©Cursoræ›´å¥½çš„ç†è§£é¡¹ç›®ï¼Œå¹¶ç”Ÿæˆä»£ç </h3>
<p>æˆ‘ä»¬æ€»æ˜¯å¸Œæœ›æœ‰ä¸€ä¸ªå·¥å…·æ¥å¸®åŠ©æˆ‘ä»¬æŒ–æ˜AIçš„æ½œåŠ›ï¼Œè®©ä»–æ›´å¥½çš„æ˜ç™½æˆ‘ä»¬çš„ç³»ç»Ÿï¼Œäº†è§£æˆ‘ä»¬çš„ä¸šåŠ¡ï¼Œä¾‹å¦‚å„ç§çŸ¥è¯†åº“ï¼Œå„ç§Ruleï½¡å³ä½¿AIçš„æ€ç»´èƒ½åŠ›å¯ä»¥ä¸çœŸäººåª²ç¾ï¼Œæˆ‘ä»¬ä¹Ÿå¾ˆéš¾æƒ³è±¡è®©ä½ èº«è¾¹çš„æŸä¸€ä½ç»éªŒä¸°å¯Œçš„åŒäº‹ä»…ä¾é äº§å“æ–‡æ¡£å°±å¯ä»¥å‡†ç¡®çš„å®Œæˆé¡¹ç›®å¼€å‘ã€‚é¡¹ç›®è¿‡ç¨‹ä¸­å¿…ç„¶ä¼šç»å†å¤šæ¬¡æ²Ÿé€š,å¤šæ¬¡æ–¹æ¡ˆä¿®æ­£ï¼Œæœ€ç»ˆå¤šæ–¹è¾¾æˆä¸€è‡´ï¼Œå†è¿›å…¥å¼€å‘é˜¶æ–­ã€‚
åŒæ ·ï¼Œåœ¨æ­£å¼è¿›è¡Œå¼€å‘å‰ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦æœ‰ä¸€ä»½æŠ€æœ¯æ–‡æ¡£æ¥æŒ‡å¯¼Cursorè¿›è¡Œå¼€å‘ã€‚<strong>ä¸åŒäºå‰é¢éœ€æ±‚æ–‡æ¡£çš„ç®€å•åˆ†æï¼Œè¿™ä¸€éƒ¨åˆ†çš„åˆ†æéœ€è¦å¯¹æ¯ä¸€ä¸ªåŠŸèƒ½æœ‰è¯¦ç»†çš„æè¿°</strong>ã€‚æˆ‘ä»¬å¯ä»¥åŸºäºä¹‹å‰è½åœ°mdæ–‡æ¡£ç»§ç»­è¿›è¡Œå®Œå–„ã€‚è¿™ä¸€é˜¶æ®µçš„ä¸»è¦ç›®æ ‡æ˜¯ä¸ºCursorè¡¥å……ä¸Šä¸‹æ–‡ç»†èŠ‚å¹¶æ ¸éªŒCursorç»“è®ºçš„è¿‡ç¨‹ã€‚æˆ‘ä»¬éœ€è¦é’ˆå¯¹æ¯ä¸€ä¸ªåŠŸèƒ½ç‚¹ï¼š</p>
<ol>
<li><strong>è°ƒæ•´AIçš„å‘½åæ–¹å¼ä¸ä»£ç ç”Ÿæˆä½ç½®</strong>ï¼ˆå¯ä»¥ä½¿ç”¨Ruleè¿›è¡Œç®€åŒ–ï¼‰ã€‚</li>
<li><strong>è°ƒæ•´AIä½¿ç”¨çš„å·¥å…·ç±»ä¸æœåŠ¡ç±»ã€‚</strong></li>
<li><strong>è°ƒæ•´AIçš„é€»è¾‘ç»†èŠ‚</strong>ï¼ˆä¾‹å¦‚è°ƒæ•´æ ¡éªŒè§„åˆ™ï¼Œåˆ¤æ–­é¡ºåºç­‰ï¼‰ã€‚</li>
<li><strong>è°ƒæ•´AIçš„ä¸šåŠ¡ç»†èŠ‚</strong>ï¼ˆä¼˜å…ˆä»PRDæ–‡æ¡£ä¸ŠèŠ‚é€‰åŸæ–‡ï¼Œå°è¯•è®©Cursorç†è§£ã€‚å¦‚æœPRDæ–‡æ¡£æ²¡æœ‰å†™æ¸…ä¸šåŠ¡æµç¨‹ï¼Œå°±è‡ªå·±åŠ¨æ‰‹æè¿°æµç¨‹æˆ–è€…å¹²è„†ç›´æ¥è®©Cursorè·³è¿‡ç”Ÿæˆå¹¶é¢„ç•™æ–¹æ³•ï¼Œæ–¹ä¾¿åé¢è‡ªå·±åŠ¨æ‰‹è¡¥å……é€»è¾‘ï¼‰ã€‚</li>
</ol>
<p>æœ€ç»ˆæˆ‘ä»¬å¾—åˆ°äº†è¿™æ ·ä¸€ä»½è¯¦ç»†æè¿°äº†ä¸šåŠ¡åŠŸèƒ½çš„mdæ–‡æ¡£ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6681742d8fa54dbb8528f5c798412597~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763351557&amp;x-signature=ud5L%2BwVmxA3ksQenWshch2Is3rQ%3D" alt="img" loading="lazy"/></p>
<p>å¦‚æ­¤ä¸€æ¥ï¼Œå¾—åˆ°çš„è¿™ä»½æ–‡æ¡£å®é™…ä¸Šæ˜¯æˆ‘ä»¬ä¸Cursoréƒ½èƒ½ç†è§£ï¼Œå¹¶ä¸”è¾¾æˆä¸€è‡´çš„ã€‚æˆ‘ä»¬ç»ˆäºå¾—åˆ°äº†é‚£ä»½å¯ä»¥ä¾›æˆ‘ä»¬ç”¨ä½œâ€œç”Ÿæˆæç¤ºè¯â€çš„åŠŸèƒ½åˆ†ææ–‡æ¡£ï¼ŒåŸºäºè¿™ä»½æ–‡æ¡£åç»­Cursorç”Ÿæˆçš„ä»£ç ä¹Ÿéƒ½åŸºæœ¬å¯ä»¥æ»¡è¶³è¦æ±‚ã€‚</p>
<p>ä¸‹å›¾ä¸ºä½¿ç”¨Cursorç”Ÿæˆä»£ç çš„æ•´ä½“é€»è¾‘æµç¨‹ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f17d9f31e86452ab4bb6a83b6e4a9fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763351557&amp;x-signature=wIoB931QkHRBWXsDetZcpDQh7lU%3D" alt="img" loading="lazy"/></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬æ¯æ¬¡åªå°±ä¸€ä¸ªåŠŸèƒ½ç‚¹è¿›è¡Œåˆ†æï¼Œå¹¶ä¸”ä¸€æ—¦ä½ è§‰å¾—è¿™ä¸ªåŠŸèƒ½ç‚¹å·²ç»ç›¸å¯¹å®Œå–„ï¼Œå°½å¿«è½åœ°æˆä»£ç ï¼Œä¸è¦ç•™åœ¨ä¸€èµ·ï¼Œè®©AIæœ€åä¸€èµ·ç”Ÿæˆã€‚
ä¸€æ–¹é¢AIåœ¨å¤„ç†è¿‡å¤šçš„å†…å®¹æ—¶ä¼šä¸å¯é¿å…çš„äº§ç”Ÿåå·®ï¼Œå¦ä¸€æ–¹é¢ï¼Œå¦‚æœé¡¹ç›®è¿‡å¤§ï¼Œæˆ‘ä»¬ä¹Ÿå®¹æ˜“å¿˜è®°ä¸€äº›ç»†èŠ‚ï¼Œå¯¼è‡´èŠ±è´¹é¢å¤–çš„æ—¶é—´æ¥è¿›è¡Œå›å¿†ä¸éªŒè¯ã€‚</p>
<h3 data-id="heading-6">ä¸‰ã€Cursorå¸®åŠ©å¼€å‘è€…è¿›è¡Œå›å½’éªŒè¯</h3>
<p>é™¤å»å¼€å‘é˜¶æ®µçš„è¾…åŠ©ä½œç”¨ï¼ŒCursorå¦ä¸€å¤§ä½œç”¨ä½“ç°åœ¨å¼€å‘åçš„è¾…åŠ©è´¨é‡ä¿è¯ä¸Šã€‚é€šå¸¸ä½“ç°åœ¨ä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢ï¼š</p>
<ol>
<li>æ”¹åŠ¨å½±å“è¯„ä¼°</li>
<li>åŠŸèƒ½éªŒè¯</li>
</ol>
<p>ä¸ºäº†å®ç°ä¸Šè¿°èƒ½åŠ›ï¼Œæˆ‘ä»¬æŒ‰ç…§ä¸‰æ­¥èµ°çš„æ–¹å¼æ¥è¿›è¡Œ</p>
<h4 data-id="heading-7">1ã€æ”¹åŠ¨èŒƒå›´æ•´ç†</h4>
<p>ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤é€ä¸ªæ–‡ä»¶åˆ†æå½“å‰åˆ†æ”¯æ”¹åŠ¨ç‚¹å¹¶è¾“å‡ºåˆ°cr.diff æ–‡ä»¶ä¸­ï¼Œéšååœ¨mdæ–‡ä»¶æœ«å°¾è¿›è¡Œæ€»ç»“ï¼šgit diff origin/master Â &gt; cr.diff</p>
<h4 data-id="heading-8">2ã€åŸºæœ¬ä»£ç å®¡æŸ¥</h4>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æç¤ºè¯å¼•å¯¼Cursorè¿›è¡ŒåŸºæœ¬ä»£ç å®¡æŸ¥ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">æ‰«ædiff æ–‡ä»¶ä¸­çš„å·®å¼‚ä»£ç ã€‚reviwe çš„è§„åˆ™å¦‚ä¸‹

<span class="hljs-bullet">1.</span> æ–¹æ³•ä½“è¡Œæ•°åº”å°‘äº100è¡Œ, ä¸åŒ…æ‹¬ç©ºè¡Œ,å’Œæ³¨é‡Š
<span class="hljs-bullet">2.</span> æšä¸¾å®šä¹‰éœ€è¦æœ‰ä¸¤ä¸ªä»¥ä¸Šå±æ€§, code, name, å¹¶ä¸”éœ€è¦æœ‰é€šè¿‡codeè·å–æšä¸¾é¡¹çš„æ–¹æ³•
<span class="hljs-bullet">3.</span> æ¥å£è¿”å›falseÂ , å‰ç«¯æ˜¯å¦æœ‰å¯¹falseè¿›è¡Œå¤„ç†Â 
<span class="hljs-bullet">4.</span> throw äº†å¼‚å¸¸çš„ä½ç½®, ä¸€å®šè¦æ‰“logæ—¥å¿—Â 
<span class="hljs-bullet">5.</span> æ‰€æœ‰çš„public å…¬æœ‰æ–¹æ³•éƒ½è¦æ‰“å°å…¥å‚log.infoæ—¥å¿—Â 
<span class="hljs-bullet">6.</span> æ‰€æœ‰çš„public å…¬æœ‰æ–¹æ³•, ç»“æŸéƒ½è¦æ‰“å°ç»“æŸæ—¥å¿—Â 
<span class="hljs-bullet">7.</span> æ‰€æœ‰è°ƒç”¨rpcçš„æ–¹æ³•, éƒ½è¦æ‰“å°æ—¥å¿—
<span class="hljs-bullet">8.</span> æ‰€æœ‰æ–¹æ³•éƒ½è¦æœ‰æ–¹æ³•çº§åˆ«çš„æ³¨é‡Š
<span class="hljs-bullet">9.</span> try catchå¼‚å¸¸å, å¦‚æœåœ¨catch ä¸­åˆæŠ›å‡ºäº†æ–°åˆ›å»ºçš„å¼‚å¸¸æ—¶, éœ€è¦å°†åŸå¼‚å¸¸èµ‹å€¼ç»™æ–°å¼‚å¸¸
<span class="hljs-bullet">10.</span> ä¸èƒ½è°ƒç”¨è¢«æ ‡è®°@Deprecated çš„å±æ€§æˆ–æ–¹æ³•æˆ–ç±»
<span class="hljs-bullet">11.</span> å®šä¹‰çš„å¸¸é‡å€¼, ç»™å‡ºæ¸…æ™°çš„æ³¨é‡Šè¯´æ˜ç”¨é€”, é¿å…ç¡¬ç¼–ç 
<span class="hljs-bullet">12.</span> æ ‡æ³¨äº†@transactionalçš„æ–¹æ³•è¦æ˜ç¡®å›æ»šå¼‚å¸¸ç±»å‹, å¯¹äºåªè¯»æ“ä½œè¦æ ‡æ³¨åªè¯»readOnly=trueÂ æé«˜æ€§èƒ½
<span class="hljs-bullet">13.</span> 3æ¬¡ä»¥ä¸Šå­—ç¬¦ä¸²æ‹¼æ¥ä½¿ç”¨StringBuilderä»£æ›¿å­—ç¬¦ä¸²æ‹¼æ¥
<span class="hljs-bullet">14.</span> æ£€æŸ¥æ˜¯å¦å­˜åœ¨å…¶ä»–ç ´åå…¼å®¹æ€§çš„æ”¹åŠ¨æˆ–é€»è¾‘ä¸Šçš„é”™è¯¯
<span class="hljs-bullet">15.</span> æ£€æŸ¥æ˜¯å¦å­˜åœ¨å¾ªç¯è°ƒç”¨å¯¼è‡´çš„é€»è¾‘é—®é¢˜
16ã€æ–°å¢çš„é¡µé¢æäº¤å’Œæ”¯ä»˜ç›¸å…³æµç¨‹è¦è€ƒè™‘å¹‚ç­‰å¤„ç†
17ã€æ¥å£å¯èƒ½è¢«é‡å¤è°ƒç”¨å’Œmqæ¶ˆæ¯é‡å¤æ¥æ”¶åœºæ™¯è¦è€ƒè™‘å¹¶å‘å’Œäº‹åŠ¡å†²çªå’Œæ•°æ®è¦†ç›–ï¼Œè¦å–„ç”¨åˆ†å¸ƒå¼é”
18ã€é’ˆå¯¹æ•°æ®åº“å•ä¸€å­—æ®µçš„ä¿®æ”¹ï¼Œå°½å¯èƒ½è¦ç²¾ç¡®ä¿®æ”¹ï¼Œä½¿ç”¨æ•´ä½“å¯¹è±¡è¿›è¡Œä¿®æ”¹
19ã€æ˜¯å¦å­˜åœ¨é‡å¤ä»£ç 
20ã€ä¿®æ”¹é€»è¾‘æ˜¯å¦è®¾è®¡åˆ°è®¡æ•°ç³»ç»Ÿå£å¾„çš„ä¿®æ”¹
21ã€æ•°æ®äº¤äº’è¿‡ç¨‹ä¸­ï¼ˆæ•°æ®åº“å’Œå¤–éƒ¨è°ƒç”¨ï¼‰çš„ç©ºæŒ‡é’ˆåˆ¤æ–­å’Œå¤„ç†
22ã€çŠ¶æ€æµè½¬è¿‡ç¨‹å’Œæ¶‰åŠèµ„äº§æŸå¤±çš„éƒ¨åˆ†è¦å¯¹å‰ç½®çŠ¶æ€è¿›è¡Œæ ¡éªŒ
23ã€æ¶‰åŠæ•°æ®åº“å’Œå¤–éƒ¨äº‹åŠ¡çš„æ¥å£ï¼Œè¦ä¿è¯æ•´ä½“äº‹åŠ¡çš„ä¸€è‡´æ€§ï¼Œæ— æ³•ä¿è¯çš„è¦æœ‰è¡¥å¿æœºåˆ¶
24ã€æ¶‰åŠå¼‚æ­¥å›è°ƒçš„åœºæ™¯ï¼Œè¦è€ƒè™‘ä¸­é—´æ€çš„å¤„ç†
25ã€ä¸å…è®¸æŠŠé…ç½®è§„åˆ™äº¤ç»™è¿è¥åŒå­¦
26ã€è¿”å›çš„listç±»å‹ï¼Œè¦ç»™å®šé»˜è®¤å€¼ï¼Œä¸èƒ½ç»™null
27ã€ä¸»é”®å¿…é¡»è®¾ç½®è‡ªå¢æˆ–è€…ä½¿ç”¨åˆ†å¸ƒå¼id
28ã€æ•°æ®åº“è¡¨æ˜¯å¦å»ºç«‹äº†ç´¢å¼•
29ã€å¼‚å¸¸åœºæ™¯è¦æ‰“å°æŠ¥è­¦ï¼Œå°½å¯èƒ½ä¼˜å…ˆå¤šæ‰“å°
éå†æ‰€æœ‰è§„åˆ™, ä¸€ä¸ªè§„åˆ™ä¸€ä¸ªè§„åˆ™çš„å»æ£€æŸ¥å¢é‡ä»£ç çš„è§„èŒƒæ€§, æ¯ä¸ªè§„åˆ™è¿›è¡ŒReviewæ—¶, ä½¿ç”¨ç‹¬ç«‹çš„ä¸Šä¸‹æ–‡, æœ€åå½’çº³æ‰€æœ‰çš„Reviewç»“æœ.
è¾“å‡ºè¿åè§„åˆ™çš„æ–‡ä»¶ä½ç½®, åœ¨æˆ‘è¯´å¯ä»¥ä¿®æ”¹ä¹‹å‰ä¸è¦ä¿®æ”¹æ–‡ä»¶
</code></pre>
<h4 data-id="heading-9">3ã€åŠŸèƒ½è¾…åŠ©éªŒè¯</h4>
<p>åœ¨å®Œæˆä»£ç ç”Ÿæˆä¸åˆæ­¥å®¡æŸ¥åï¼Œæˆ‘ä»¬è¿›å…¥åŠŸèƒ½éªŒè¯é˜¶æ®µã€‚æ­¤æ—¶å¯åˆ©ç”¨Cursoråˆ†æä»£ç å˜æ›´ï¼Œè‡ªåŠ¨ç”Ÿæˆè‡ªæµ‹ç”¨ä¾‹æ¸…å•ã€‚é€šè¿‡æç¤ºè¯å¼•å¯¼Cursorç»“åˆä¸šåŠ¡é€»è¾‘ã€æ¥å£è¾“å…¥è¾“å‡ºåŠå¼‚å¸¸åˆ†æ”¯ï¼Œè¾“å‡ºè¦†ç›–æ ¸å¿ƒè·¯å¾„ã€è¾¹ç•Œæ¡ä»¶å’Œé”™è¯¯å¤„ç†çš„æµ‹è¯•åœºæ™¯ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs">åŸºäºå½“å‰ä»£ç å˜æ›´ï¼Œåˆ—å‡ºéœ€è¦è‡ªæµ‹çš„åŠŸèƒ½ç‚¹å’Œè¾¹ç•Œæƒ…å†µï¼ŒåŒ…æ‹¬æ­£å¸¸æµç¨‹ã€å¼‚å¸¸è¾“å…¥ã€çŠ¶æ€æ ¡éªŒç­‰ï¼Œè¾“å‡ºä¸ºè¡¨æ ¼å½¢å¼ï¼ŒåŒ…å«ç”¨ä¾‹ç¼–å·ã€åœºæ™¯æè¿°ã€é¢„æœŸç»“æœã€‚
</code></pre>
<p>è¯¥è¿‡ç¨‹ä¸ä»…æ˜¯æµ‹è¯•å‡†å¤‡ï¼Œæ›´æ˜¯å¯¹æ•´ä½“é€»è¾‘çš„å†ç¡®è®¤ã€‚é€šè¿‡Cursorè¾…åŠ©éªŒè¯ï¼Œæå‡è‡ªæµ‹å®Œæ•´æ€§ï¼Œå‡å°‘åæœŸå›å½’æˆæœ¬ï¼Œç¡®ä¿äº¤ä»˜è´¨é‡ã€‚</p>
<h2 data-id="heading-10">å°ç»“</h2>
<p>è‡³æ­¤ï¼Œæœ¬æ–‡åˆ†äº«äº†å›æ”¶å›¢é˜Ÿåœ¨AIç¼–ç¨‹å®è·µä¸­çš„ç»éªŒï¼Œé‡ç‚¹ä»‹ç»äº†å¦‚ä½•é«˜æ•ˆä½¿ç”¨Cursorè¾…åŠ©å¼€å‘ã€‚é€šè¿‡åˆ†é˜¶æ®µåä½œâ€”â€”ä»éœ€æ±‚åˆ†æï¼Œç°çŠ¶æ¢³ç†åˆ°æŠ€æœ¯è®¾è®¡ï¼Œä»£ç ç”Ÿæˆï¼Œå†åˆ°æµ‹è¯•éªŒè¯ã€‚</p>
<p>AIæ—¶ä»£ï¼Œå¼€å‘è€…çš„æ ¸å¿ƒç«äº‰åŠ›æ­£ä»â€œæŒæ¡çŸ¥è¯†â€è½¬å‘â€œæå‡ºé—®é¢˜â€ã€‚å·¥å…·å¦‚Cursorå¹¶éæ›¿ä»£å¼€å‘äººå‘˜ï¼Œè€Œæ˜¯é€šè¿‡äººæœºååŒï¼Œæå‡éœ€æ±‚ç†è§£ã€æŠ€æœ¯è®¾è®¡ä¸ä»£ç è´¨é‡çš„æ•ˆç‡ã€‚æˆ‘ä»¬è¦ä»¥ä¸“ä¸šç§¯ç´¯æ„å»ºæ¸…æ™°ä¸Šä¸‹æ–‡ï¼Œå¼•å¯¼AIå®Œæˆæ‹†è§£ã€åˆ†æã€ç”Ÿæˆä¸éªŒè¯ï¼Œæœ€ç»ˆå®ç°é«˜æ•ˆã€é«˜è´¨é‡çš„å¼€å‘é—­ç¯ã€‚</p>
<blockquote>
<p>å…³äºä½œè€…ï¼Œé»„æ•¬ä¹¾ï¼Œä¾ å®¢æ±‡Javaå¼€å‘å·¥ç¨‹å¸ˆã€‚</p>
</blockquote>
<blockquote>
<p>è½¬è½¬ç ”å‘ä¸­å¿ƒåŠä¸šç•Œå°ä¼™ä¼´ä»¬çš„æŠ€æœ¯å­¦ä¹ äº¤æµå¹³å°ï¼Œå®šæœŸåˆ†äº«ä¸€çº¿çš„å®æˆ˜ç»éªŒåŠä¸šç•Œå‰æ²¿çš„æŠ€æœ¯è¯é¢˜ã€‚
å…³æ³¨å…¬ä¼—å·ã€Œè½¬è½¬æŠ€æœ¯ã€ï¼ˆç»¼åˆæ€§ï¼‰ã€ã€Œå¤§è½¬è½¬FEã€ï¼ˆä¸“æ³¨äºFEï¼‰ã€ã€Œè½¬è½¬QAã€ï¼ˆä¸“æ³¨äºQAï¼‰ï¼Œæ›´å¤šå¹²è´§å®è·µï¼Œæ¬¢è¿äº¤æµåˆ†äº«~</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘ç”¨AIé‡æ„äº†ä¸€æ®µ500è¡Œçš„å±å±±ä»£ç ï¼Œè¿™æ˜¯æˆ‘çš„Promptå’Œæ€è€ƒè¿‡ç¨‹]]></title>    <link>https://juejin.cn/post/7570630923710054452</link>    <guid>https://juejin.cn/post/7570630923710054452</guid>    <pubDate>2025-11-10T04:06:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570630923710054452" data-draft-id="7570533058840739875" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘ç”¨AIé‡æ„äº†ä¸€æ®µ500è¡Œçš„å±å±±ä»£ç ï¼Œè¿™æ˜¯æˆ‘çš„Promptå’Œæ€è€ƒè¿‡ç¨‹"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,æ¶æ„"/> <meta itemprop="datePublished" content="2025-11-10T04:06:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ErpanOmer"/> <meta itemprop="url" content="https://juejin.cn/user/3878732754331096"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘ç”¨AIé‡æ„äº†ä¸€æ®µ500è¡Œçš„å±å±±ä»£ç ï¼Œè¿™æ˜¯æˆ‘çš„Promptå’Œæ€è€ƒè¿‡ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3878732754331096/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ErpanOmer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T04:06:06.000Z" title="Mon Nov 10 2025 04:06:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb98623d8769476daf7d1403c737a111~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763352366&amp;x-signature=Hvk6BXnS9P%2BYX5MAILrp0denCkI%3D" alt="image.png" loading="lazy"/></p>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ¥äº†ğŸ™‚ã€‚</p>
<p>æˆ‘ä»¬å›¢é˜Ÿï¼Œç»´æŠ¤ç€ä¸€ä¸ªæœ‰5å¹´å†å²çš„å²è¯—çº§ä¸­åå°é¡¹ç›®ğŸ˜–ã€‚åœ¨è¿™åº§å±å±±é‡Œï¼Œæœ‰ä¸€ä¸ªå«<code>handleOrderSubmit.js</code>çš„æ–‡ä»¶ã€‚</p>
<p>å¯ä»¥ä¸‹è½½ç§ä¸€ç§ æœ‰å¤šå±ğŸ‘‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fpub-e8cc0cb9ebf94a2386b76f4ac3ac6ad2.r2.dev%2FhandleOrderSubmit.js" target="_blank" title="https://pub-e8cc0cb9ebf94a2386b76f4ac3ac6ad2.r2.dev/handleOrderSubmit.js" ref="nofollow noopener noreferrer">handleOrderSubmit.js</a></p>
<p>å®ƒæ˜¯ä¸€ä¸ª<strong>é•¿è¾¾500å¤šè¡Œ</strong>çš„React <code>useEffect</code> é’©å­å‡½æ•°ï¼ˆæ˜¯çš„ï¼Œä½ æ²¡çœ‹é”™ï¼Œä¸€ä¸ª<code>useEffect</code>ï¼‰ã€‚</p>
<p>å®ƒæ··åˆäº†è®¢å•æ•°æ®çš„<strong>æœ¬åœ°æ ¡éªŒ</strong>ã€<strong>ä»·æ ¼è®¡ç®—</strong>ã€<strong>ä¼˜æƒ åˆ¸åº”ç”¨</strong>ã€<strong>APIè¯·æ±‚</strong>ã€<strong>å…¨å±€çŠ¶æ€æ›´æ–°</strong>ã€ä»¥åŠ<strong>é”™è¯¯å¼¹çª—å¤„ç†</strong>... æ‰€æœ‰çš„é€»è¾‘ï¼Œéƒ½å¡åœ¨ä¸€ä¸ªå‡½æ•°é‡Œï¼Œç”¨<code>if/else</code>å’Œ<code>try/catch</code>å±‚å±‚åµŒå¥—ã€‚</p>
<p><strong>æ²¡äººæ•¢åŠ¨å®ƒğŸ˜–ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40160288790c4322a54fa4ec39e1a6ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763352366&amp;x-signature=p9brzeAHElowFo7kT0xLwhguEpE%3D" alt="æœ¬äº‹è¯•è¯•çœ‹.gif" loading="lazy"/></p>
<p>æ¯æ¬¡äº§å“ç»ç†æä¸€ä¸ªå°éœ€æ±‚ï¼Œæ¯”å¦‚åœ¨æäº¤è®¢å•æ—¶ï¼Œå¢åŠ ä¸€ç§æ–°çš„ä¼˜æƒ åˆ¸ç±»å‹ï¼Œæˆ‘ä»¬æ•´ä¸ªå›¢é˜Ÿçš„è¡¨æƒ…éƒ½åƒè¢«é›·åŠˆäº†ã€‚å› ä¸ºæˆ‘ä»¬çŸ¥é“ï¼Œæ”¹è¿™ä¸ªå‡½æ•°ï¼Œè¦ä¹ˆåŠ ç­ä¸€å‘¨ï¼Œè¦ä¹ˆå°±ç­‰ç€P0çº§äº‹æ•…ã€‚</p>
<p>ä¸Šå‘¨ï¼Œäº§å“ç»ç†è¦æ±‚æˆ‘ä»¬åœ¨è¿™ä¸ªå‡½æ•°é‡Œï¼ŒåŠ å…¥ä¸€ä¸ªå…¨æ–°çš„é£æ§é€»è¾‘ã€‚</p>
<p>æˆ‘è¯„ä¼°äº†ä¸€ä¸‹ï¼Œæ‰‹åŠ¨é‡æ„ï¼Œè‡³å°‘éœ€è¦ä¸€ä¸ªèµ„æ·±å·¥ç¨‹å¸ˆä¸€å‘¨çš„æ—¶é—´ï¼Œè€Œä¸”é£é™©æå¤§ã€‚</p>
<p>æˆ‘å—å¤Ÿäº†ã€‚æˆ‘å†³å®šï¼ŒæŠŠè¿™ä¸ªçƒ«æ‰‹çš„ä»»åŠ¡ï¼Œæ‰”ç»™æˆ‘çš„å®ä¹ ç”Ÿâ€”â€”<strong>AI</strong>ï¼ˆæˆ‘ç”¨çš„æ˜¯GPT-5 miniï¼Œç©·ğŸ˜‚ï¼‰ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ï¼Œå°±æ˜¯æˆ‘äººæœºåä½œï¼Œå•ƒä¸‹è¿™å—ç¡¬éª¨å¤´çš„å®Œæ•´å¤ç›˜ï¼Œå¤§å®¶ç»§ç»­çœ‹ã€‚</p>
<hr/>
<h4 data-id="heading-0"><strong>æˆ‘ä¸èƒ½ç›´æ¥è¯´é‡æ„å®ƒ</strong></h4>
<p>æˆ‘çŠ¯çš„ç¬¬ä¸€ä¸ªé”™è¯¯ï¼Œæ˜¯ç›´æ¥æŠŠ500è¡Œä»£ç è´´ç»™AIï¼Œç„¶åè¯´ï¼š<strong>å¸®æˆ‘é‡æ„è¿™æ®µä»£ç </strong>ã€‚</p>
<p>AIå¾ˆå¬è¯ï¼Œå®ƒç»™æˆ‘çš„ï¼Œæ˜¯ä¸€æ®µçœ‹èµ·æ¥æ›´æ•´æ´çš„ä»£ç â€”â€”å®ƒæŠŠ<code>if/else</code>æ¢æˆäº†<code>switch</code>ï¼Œæäº†å‡ ä¸ªå˜é‡... <strong>è¿™ä¸å«é‡æ„ï¼Œè¿™å«é‡æ–°æ’ç‰ˆ</strong>ï¼Œæ¯«æ— æ„ä¹‰ã€‚</p>
<p>æˆ‘å¾ˆå¿«æ„è¯†åˆ°ï¼š<strong>AIæ˜¯ä¸€ä¸ªèƒ½åŠ›è¶…å¼ºã€ä½†æ²¡æœ‰çµé­‚çš„æ‰§è¡Œè€…ã€‚æˆ‘ï¼Œä½œä¸ºå¼€å‘è€…ï¼Œå¿…é¡»ç»™å®ƒæä¾›ä¸€ä¸ªæ¸…æ™°çš„æ–¹æ¡ˆã€‚</strong></p>
<p>äºæ˜¯ï¼Œæˆ‘åˆ¶å®šäº†ä¸€ä¸ª<strong>äº”æ­¥é‡æ„æ³•</strong>ã€‚</p>
<hr/>
<h4 data-id="heading-1"><strong>æˆ‘çš„Promptå’Œæ€è€ƒ</strong></h4>
<p>æˆ‘çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>AIè´Ÿè´£æ‰§è¡Œï¼Œæˆ‘è´Ÿè´£å†³ç­–ã€‚</strong> æˆ‘è¦åƒä¸€ä¸ªæŒ‡æŒ¥å®¶ä¸€æ ·ï¼Œä¸€æ­¥ä¸€æ­¥åœ°å¼•å¯¼AIï¼ŒæŠŠè¿™500è¡Œçš„ä»£ç ï¼Œæ‹†è§£æˆé«˜å†…èšã€ä½è€¦åˆçš„æ¨¡å—ã€‚</p>
<h5 data-id="heading-2"><strong>ç¬¬ä¸€æ­¥ï¼šå…ˆè®©AIè¯»æ‡‚å±å±±</strong></h5>
<p>æˆ‘ä¸èƒ½ä¸Šæ¥å°±è®©AIæ”¹ã€‚æˆ‘å¾—å…ˆç¡®è®¤ï¼Œå®ƒå’Œæˆ‘å¯¹è¿™æ®µä»£ç çš„ç†è§£ï¼Œåœ¨ä¸€ä¸ªé¢‘é“ä¸Šã€‚</p>
<p><strong>Promptï¼š</strong></p>
<blockquote>
<p>ä½ æ˜¯ä¸€ä¸ªèµ„æ·±çš„Reactæ¶æ„å¸ˆã€‚è¯·åˆ†æä¸‹é¢è¿™æ®µ500è¡Œçš„<code>useEffect</code>ä»£ç ã€‚</p>
<ol>
<li><strong>å‘Šè¯‰æˆ‘å®ƒåšäº†å‡ ä»¶ä¸»è¦çš„äº‹æƒ…ï¼Ÿï¼ˆèŒè´£åˆ†æï¼‰</strong></li>
<li><strong>æ‰¾å‡ºæ‰€æœ‰çš„å‰¯ä½œç”¨</strong>ï¼ˆæ¯”å¦‚APIè¯·æ±‚ã€<code>localStorage</code>æ“ä½œã€å…¨å±€çŠ¶æ€æ›´æ–°ï¼‰ã€‚</li>
<li><strong>æ‰¾å‡ºæ‰€æœ‰çš„çº¯é€»è¾‘</strong>ï¼ˆæ¯”å¦‚æ•°æ®æ ¡éªŒã€ä»·æ ¼è®¡ç®—ï¼‰ã€‚</li>
<li><strong>è¯„ä»·å®ƒçš„å¯ç»´æŠ¤æ€§å’Œå¯æµ‹è¯•æ€§</strong>ã€‚</li>
</ol>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35d5a1e7897d4611b2e6063d63081384~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763352366&amp;x-signature=aXLE5rLPbGHmYg3X5B3MvGtaHaM%3D" alt="image.png" loading="lazy"/></p>
<p>GPTçš„å›ç­”ï¼Œç»™äº†æˆ‘ä¸€ä¸ªæƒŠå–œã€‚å®ƒæ¸…æ™°åœ°åˆ—å‡ºäº†ï¼š</p>
<ol>
<li><strong>èŒè´£</strong>ï¼šå®ƒæ‰¿æ‹…äº†è‡³å°‘5ä¸ªèŒè´£ï¼šè¡¨å•æ ¡éªŒã€ä»·æ ¼è®¡ç®—ã€åº“å­˜æ£€æŸ¥ã€åˆ›å»ºè®¢å•ã€å¤„ç†UIåé¦ˆã€‚</li>
<li><strong>å‰¯ä½œç”¨</strong>ï¼š<code>api.post(...)</code>, <code>setLoading(true)</code>, <code>showToast(...)</code>...</li>
<li><strong>çº¯é€»è¾‘</strong>ï¼š<code>validateForm(...)</code>, <code>calculateTotalPrice(...)</code>...</li>
<li><strong>è¯„ä»·</strong>ï¼šå¯ç»´æŠ¤æ€§æä½ï¼Œå•ä¸€èŒè´£åŸåˆ™è¢«ä¸¥é‡è¿åï¼Œå‡ ä¹ä¸å¯æµ‹è¯•ã€‚</li>
</ol>
<p>å¾ˆå¥½ï¼ŒAIçœ‹æ‡‚äº†ï¼æˆ‘ä»¬å°±å¯ä»¥å¯ä»¥å¼€å§‹äº†ğŸ˜ã€‚</p>
<h5 data-id="heading-3"><strong>ç¬¬äºŒæ­¥ï¼šå…ˆåˆ†ç¦»çº¯é€»è¾‘ä»£ç </strong></h5>
<p>è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚æˆ‘è¦æŠŠè®¡ç®—å’ŒåŠ¨ä½œåˆ†å¼€ã€‚</p>
<p><strong>Promptï¼š</strong></p>
<blockquote>
<p>éå¸¸å¥½ã€‚ç°åœ¨ï¼Œè¯·ä½ <strong>åªé’ˆå¯¹çº¯é€»è¾‘éƒ¨åˆ†</strong>ï¼ˆè¡¨å•æ ¡éªŒã€ä»·æ ¼è®¡ç®—ï¼‰è¿›è¡Œé‡æ„ã€‚</p>
<ol>
<li>æŠŠè¿™äº›é€»è¾‘ï¼Œä»åŸå‡½æ•°ä¸­<strong>æå–</strong>å‡ºæ¥ï¼Œå˜æˆ<strong>ç‹¬ç«‹çš„ã€å¯å¯¼å‡ºçš„çº¯å‡½æ•°</strong>ã€‚</li>
<li>è¿™äº›å‡½æ•°å¿…é¡»æ˜¯çº¯çš„ï¼š<strong>ä¸èƒ½æœ‰ä»»ä½•å‰¯ä½œç”¨</strong>ï¼ˆä¸èƒ½è°ƒç”¨<code>api</code>æˆ–<code>setLoading</code>ï¼‰ã€‚</li>
<li><strong>ä½¿ç”¨TypeScript</strong>ï¼Œä¸ºè¿™äº›æ–°å‡½æ•°çš„å…¥å‚å’Œè¿”å›å€¼ï¼Œæä¾›æ¸…æ™°çš„ç±»å‹å®šä¹‰ã€‚</li>
</ol>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d384affa5b6b488db2870ea7a7f2e350~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763352366&amp;x-signature=yC3uRhUdQgDBQbR2mBv1aKp6ZuM%3D" alt="image.png" loading="lazy"/></p>
<p>AIç«‹åˆ»å”°å”°å”°åœ°ç»™äº†æˆ‘å‡ ä¸ªæ–‡ä»¶ï¼š</p>
<p><code>validate.ts</code>:</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">validateOrder</span>(<span class="hljs-params">formData: OrderForm</span>): <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span> {
  <span class="hljs-keyword">if</span> (!formData.<span class="hljs-property">user</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">'ç”¨æˆ·ä¿¡æ¯ä¸èƒ½ä¸ºç©º'</span>;
  <span class="hljs-keyword">if</span> (formData.<span class="hljs-property">items</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">'å•†å“ä¸èƒ½ä¸ºç©º'</span>;
  <span class="hljs-comment">// ... 10 more rules</span>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}
</code></pre>
<p><code>calculator.ts</code>:</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateTotalPrice</span>(<span class="hljs-params">items: Item[], coupon: Coupon</span>): <span class="hljs-built_in">number</span> {
  <span class="hljs-keyword">let</span> total = items.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, item</span>) =&gt;</span> sum + item.<span class="hljs-property">price</span> * item.<span class="hljs-property">quantity</span>, <span class="hljs-number">0</span>);
  <span class="hljs-keyword">if</span> (coupon.<span class="hljs-property">type</span> === <span class="hljs-string">'PERCENT'</span>) {
    total *= (<span class="hljs-number">1</span> - coupon.<span class="hljs-property">value</span> / <span class="hljs-number">100</span>);
  }
  <span class="hljs-comment">// ... 20 more rules</span>
  <span class="hljs-keyword">return</span> total;
}
</code></pre>
<h5 data-id="heading-4"><strong>ç¬¬ä¸‰æ­¥ï¼šè®©AIä¸ºè‡ªå·±çš„ä»£ç åšæµ‹è¯•</strong></h5>
<p>æˆ‘æ€ä¹ˆçŸ¥é“AIæç‚¼çš„é€»è¾‘ï¼Œæ˜¯å¯¹çš„è¿˜æ˜¯é”™çš„ï¼Ÿ
<strong>ç­”æ¡ˆï¼šè®©å®ƒè‡ªå·±å†™å•å…ƒæµ‹è¯•æ¥è¯æ˜ã€‚</strong></p>
<p><strong>Promptï¼š</strong></p>
<blockquote>
<p>ä½ ç°åœ¨æ˜¯ä¸€ä¸ªQAå·¥ç¨‹å¸ˆã€‚è¯·ä½¿ç”¨<code>Vitest</code>ï¼Œä¸ºä½ åˆšæ‰æå–çš„<code>validateOrder</code>å’Œ<code>calculateTotalPrice</code>è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œ<strong>ç¼–å†™å…¨é¢çš„å•å…ƒæµ‹è¯•ç”¨ä¾‹</strong>ã€‚
å¿…é¡»è¦†ç›–æ‰€æœ‰è¾¹ç•Œæƒ…å†µï¼ŒåŒ…æ‹¬æ­£å¸¸ã€å¼‚å¸¸ã€å’Œè¾¹ç¼˜å€¼ã€‚</p>
</blockquote>
<p>AIå†æ¬¡ç»™äº†æˆ‘æƒŠå–œã€‚å®ƒç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹ï¼Œæ¯”æˆ‘æ‰‹å†™çš„è¿˜è¦å…¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// calculator.test.ts</span>
<span class="hljs-keyword">import</span> { describe, it, expect } <span class="hljs-keyword">from</span> <span class="hljs-string">'vitest'</span>;
<span class="hljs-keyword">import</span> { calculateTotalPrice } <span class="hljs-keyword">from</span> <span class="hljs-string">'./calculator'</span>;

<span class="hljs-title function_">describe</span>(<span class="hljs-string">'calculateTotalPrice'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'should return 0 for empty cart'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">calculateTotalPrice</span>([], <span class="hljs-literal">null</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-number">0</span>);
  });
  
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'should apply percent coupon'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> items = [{ <span class="hljs-attr">price</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">quantity</span>: <span class="hljs-number">1</span> }];
    <span class="hljs-keyword">const</span> coupon = { <span class="hljs-attr">type</span>: <span class="hljs-string">'PERCENT'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">10</span> };
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">calculateTotalPrice</span>(items, coupon)).<span class="hljs-title function_">toBe</span>(<span class="hljs-number">90</span>);
  });
  <span class="hljs-comment">// ... çœç•¥æ›´å¤š</span>
});
</code></pre>
<p>æˆ‘æŠŠè¿™äº›æµ‹è¯•ç”¨ä¾‹è·‘äº†ä¸€éï¼Œ<strong>å…¨éƒ¨é€šè¿‡</strong>ã€‚æˆ‘ç°åœ¨ä¿¡å¿ƒå¤§å¢ğŸ˜ã€‚</p>
<h5 data-id="heading-5"><strong>ç¬¬å››æ­¥ï¼šé‡å†™åè°ƒå±‚</strong></h5>
<p>ç°åœ¨ï¼Œçº¯é€»è¾‘å·²ç»è¢«åˆ†ç¦»å¹¶éªŒè¯äº†ã€‚åŸæ¥çš„500è¡Œå±å±±ï¼Œåªå‰©ä¸‹å‰¯ä½œç”¨å’Œæµç¨‹æ§åˆ¶ä»£ç äº†ã€‚æ˜¯æ—¶å€™é‡å†™å®ƒäº†ã€‚</p>
<p><strong>Promptï¼š</strong></p>
<blockquote>
<p>å¹²å¾—æ¼‚äº®ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬æ¥é‡æ„é‚£ä¸ª<strong>åŸå§‹çš„<code>useEffect</code>å‡½æ•°</strong>ã€‚</p>
<ol>
<li>å®ƒç°åœ¨å”¯ä¸€çš„èŒè´£æ˜¯<strong>åè°ƒ</strong>ã€‚</li>
<li><strong>è°ƒç”¨</strong>æˆ‘ä»¬åˆšæ‰åˆ›å»ºçš„<code>validateOrder</code>å’Œ<code>calculateTotalPrice</code>çº¯å‡½æ•°ã€‚</li>
<li>æŠŠæ‰€æœ‰çš„å‰¯ä½œç”¨ï¼ˆAPIè¯·æ±‚ã€<code>setLoading</code>ã€<code>showToast</code>ï¼‰<strong>æ¸…æ™°åœ°ç¼–æ’</strong>èµ·æ¥ã€‚</li>
<li><strong>ä½¿ç”¨<code>async/await</code></strong>ï¼Œè®©å¼‚æ­¥æµç¨‹æ›´æ¸…æ™°ï¼Œç”¨<code>try/catch</code>å¤„ç†é”™è¯¯ã€‚</li>
</ol>
</blockquote>
<p>è¿™æ¬¡ï¼ŒAIç»™æˆ‘çš„ï¼Œæ˜¯ä¸€ä¸ªåªæœ‰<strong>30è¡Œ</strong>å·¦å³çš„ã€æ¸…æ™°çš„æµç¨‹ä»£ç ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// é‡æ„åçš„ useEffect</span>
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">submitOrder</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// 1. åè°ƒï¼šéªŒè¯ (çº¯)</span>
      <span class="hljs-keyword">const</span> errorMsg = <span class="hljs-title function_">validateOrder</span>(formData);
      <span class="hljs-keyword">if</span> (errorMsg) {
        <span class="hljs-title function_">showToast</span>(errorMsg);
        <span class="hljs-keyword">return</span>;
      }
      
      <span class="hljs-comment">// 2. åè°ƒï¼šè®¡ç®— (çº¯)</span>
      <span class="hljs-keyword">const</span> totalPrice = <span class="hljs-title function_">calculateTotalPrice</span>(formData.<span class="hljs-property">items</span>, formData.<span class="hljs-property">coupon</span>);

      <span class="hljs-comment">// 3. åè°ƒï¼šå‰¯ä½œç”¨ï¼ˆä¸çº¯ï¼‰</span>
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/order/submit'</span>, { ...formData, totalPrice });
      
      <span class="hljs-comment">// 4. åè°ƒï¼šå“åº”ï¼ˆä¸çº¯ï¼‰</span>
      <span class="hljs-keyword">if</span> (result.<span class="hljs-property">code</span> === <span class="hljs-number">200</span>) {
        <span class="hljs-title function_">showToast</span>(<span class="hljs-string">'è®¢å•æäº¤æˆåŠŸï¼'</span>);
        router.<span class="hljs-title function_">push</span>(<span class="hljs-string">'/success'</span>);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">showToast</span>(result.<span class="hljs-property">message</span>);
      }
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-title function_">showToast</span>(err.<span class="hljs-property">message</span>);
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>);
    }
  };

  <span class="hljs-keyword">if</span> (isSubmitting) { <span class="hljs-comment">// å‡è®¾ä¸€ä¸ªè§¦å‘æ¡ä»¶</span>
    <span class="hljs-title function_">submitOrder</span>();
    <span class="hljs-title function_">setIsSubmitting</span>(<span class="hljs-literal">false</span>);
  }
}, [isSubmitting, formData <span class="hljs-comment">/* ...å…¶ä»–ä¾èµ– */</span>]);
</code></pre>
<h5 data-id="heading-6"><strong>ç¬¬äº”æ­¥ï¼šæœ€åå®ˆå«å·¥ä½œï¼ŒåŠ å…¥æ–°åŠŸèƒ½</strong></h5>
<p>åˆ«å¿˜äº†ï¼Œæˆ‘é‡æ„çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†åŠ é£æ§è¿™ä¸ªæ–°åŠŸèƒ½ã€‚</p>
<p><strong>Promptï¼š</strong></p>
<blockquote>
<p>æœ€åä¸€æ­¥ã€‚è¯·åœ¨APIè¯·æ±‚ä¹‹å‰ï¼ŒåŠ å…¥ä¸€ä¸ªé£æ§æ£€æŸ¥çš„é€»è¾‘ï¼ˆè°ƒç”¨<code>riskControl.check(...)</code>ï¼‰ã€‚è¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œå¦‚æœæ£€æŸ¥ä¸é€šè¿‡ï¼Œå®ƒä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p>
</blockquote>
<p>AIåœ¨ç¬¬2æ­¥å’Œç¬¬3æ­¥ä¹‹é—´ï¼ŒåŠ äº†å‡ è¡Œä»£ç ï¼Œå®Œç¾æ”¶å·¥ã€‚</p>
<hr/>
<p>è¿™æ¬¡é‡æ„ï¼Œæˆ‘æ€»å…±èŠ±äº†å¤§æ¦‚5ä¸ªå°æ—¶ï¼Œè€Œä¸æ˜¯åŸè®¡åˆ’çš„ä¸€å‘¨ã€‚</p>
<p>æ€»è§‰å¾— AI ä¸ä¼šæ·˜æ±°ä¼šå†™ä»£ç çš„å·¥ç¨‹å¸ˆã€‚</p>
<p>åªä¼šé™ç»´æ‰“å‡»é‚£äº›åªä¼šå †ç Œä»£ç çš„å·¥ç¨‹å¸ˆã€‚</p>
<p>é‚£æ®µ500è¡Œçš„å±å±±ï¼Œåœ¨è¿‡å»ï¼Œæ˜¯æˆ‘çš„å™©æ¢¦ï¼›ç°åœ¨ï¼Œæœ‰äº†AIçš„å¸®åŠ©ï¼Œå®ƒå˜æˆäº†æˆ‘çš„é¶åœºã€‚</p>
<p>è¿™ç§æ„Ÿè§‰ï¼ŒçœŸçˆ½ğŸ™Œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Springæ˜¯Javaè¯­å¢ƒä¸‹çš„â€œæœ€ä¼˜è§£â€çš„åŸå› ä¸å¯ç¤º]]></title>    <link>https://juejin.cn/post/7570295366479708196</link>    <guid>https://juejin.cn/post/7570295366479708196</guid>    <pubDate>2025-11-10T03:13:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570295366479708196" data-draft-id="7570162686580883498" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Springæ˜¯Javaè¯­å¢ƒä¸‹çš„â€œæœ€ä¼˜è§£â€çš„åŸå› ä¸å¯ç¤º"/> <meta itemprop="keywords" content="Java,Spring,Node.js"/> <meta itemprop="datePublished" content="2025-11-10T03:13:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Juchecar"/> <meta itemprop="url" content="https://juejin.cn/user/284133851925070"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Springæ˜¯Javaè¯­å¢ƒä¸‹çš„â€œæœ€ä¼˜è§£â€çš„åŸå› ä¸å¯ç¤º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/284133851925070/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Juchecar
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T03:13:09.000Z" title="Mon Nov 10 2025 03:13:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å¯¹äºéJavaç”Ÿæ€ç³»ç»Ÿï¼ˆå¦‚ Node.jsã€Pythonã€Goï¼‰çš„å¼€å‘è€…è€Œè¨€ï¼ŒSpringæ¡†æ¶åŠå…¶ç†å¿µç¡®å®æ˜¾å¾—éå¸¸å¤æ‚ï¼Œç”šè‡³æœ‰äº›â€œè¿‡æ—¶â€æˆ–â€œä¸åˆæ—¶å®œâ€ã€‚</strong></p>
<p>è¿™å¹¶éSpringæœ¬èº«ä¸å¥½ï¼Œè€Œæ˜¯å› ä¸º<strong>ä¸åŒè¯­è¨€ç”Ÿæ€ç³»ç»Ÿçš„å“²å­¦ã€è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜å’Œæ¼”è¿›è·¯å¾„å®Œå…¨ä¸åŒ</strong>ã€‚è¯„ä»·Springåœ¨éJavaè¯­å¢ƒä¸‹çš„å¤æ‚æ€§ï¼Œéœ€è¦è·³å‡ºJavaçš„ä¸–ç•Œè§‚ã€‚</p>
<hr/>
<h3 data-id="heading-0">æ ¸å¿ƒåŸå› ï¼šSpringæ˜¯â€œJavaç”Ÿæ€å›°å¢ƒâ€çš„ç»ˆæç­”æ¡ˆ</h3>
<p>è¦ç†è§£Springçš„å¤æ‚æ€§ï¼Œé¦–å…ˆè¦ç†è§£å®ƒè¯ç”Ÿæ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆé—®é¢˜ã€‚Springæ˜¯Javaç”Ÿæ€ç³»ç»Ÿä¸­ä¸€ç³»åˆ—å†å²é—ç•™é—®é¢˜çš„â€œé›†å¤§æˆå¼è§£å†³æ–¹æ¡ˆâ€ã€‚</p>
<ol>
<li><strong>Javaè¯­è¨€çš„åˆ»æ¿ä¸å†—é•¿</strong>ï¼šJavaæ˜¯é™æ€å¼ºç±»å‹è¯­è¨€ï¼Œæ—©æœŸæ²¡æœ‰é—­åŒ…ã€å‡½æ•°å¼ç¼–ç¨‹ç­‰ç‰¹æ€§ï¼Œç¼ºä¹åŠ¨æ€æ€§ã€‚è¿™ä½¿å¾—åœ¨Javaä¸­åšä»»ä½•äº‹éƒ½éœ€è¦å¤§é‡çš„æ ·æ¿ä»£ç ã€‚Springé€šè¿‡ä¾èµ–æ³¨å…¥å’ŒAOPç­‰æœºåˆ¶ï¼Œè¯•å›¾<strong>å¼¥è¡¥è¯­è¨€æœ¬èº«çš„çµæ´»æ€§ä¸è¶³</strong>ã€‚</li>
<li><strong>XMLé…ç½®çš„â€œå†å²åŒ…è¢±â€</strong>ï¼šåœ¨Springè¯ç”Ÿå’Œæˆé•¿çš„æ—¶æœŸï¼ŒXMLæ˜¯é…ç½®çš„äº‹å®æ ‡å‡†ã€‚è™½ç„¶ç°åœ¨Springå·²å…¨é¢è½¬å‘æ³¨è§£å’ŒJavaé…ç½®ï¼Œä½†å…¶åº•å±‚è®¾è®¡å“²å­¦å’Œæ¦‚å¿µä½“ç³»ä»å¸¦æœ‰é‚£ä¸ªæ—¶ä»£çš„çƒ™å°ã€‚</li>
<li><strong>â€œä¸€ç«™å¼â€è§£å†³æ–¹æ¡ˆçš„é›„å¿ƒ</strong>ï¼šSpringçš„ç›®æ ‡æ˜¯æˆä¸ºä¸€ä¸ªâ€œå¹³å°â€ï¼Œæä¾›ä»ä¾èµ–æ³¨å…¥ã€äº‹åŠ¡ç®¡ç†ã€æ•°æ®è®¿é—®ã€å®‰å…¨åˆ°å¾®æœåŠ¡çš„ä¸€æ•´å¥—è§£å†³æ–¹æ¡ˆã€‚è¿™ç§â€œå…¨å®¶æ¡¶â€æ¨¡å¼æœ¬èº«å°±å¸¦æ¥äº†å¤æ‚æ€§ï¼Œå› ä¸ºä½ å¿…é¡»å­¦ä¹ å®ƒçš„ä¸€æ•´å¥—æ¦‚å¿µã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-1">å¯¹æ¯”å…¶ä»–è¯­è¨€ï¼šåŸç”Ÿä¼˜é›…ä¸â€œåˆšå¥½å¤Ÿç”¨â€</h3>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç«™åœ¨Node.jsã€Pythonæˆ–Goå¼€å‘è€…çš„è§†è§’æ¥çœ‹Springã€‚</p>
<h4 data-id="heading-2">1. Node.js / JavaScript ä¸–ç•Œï¼š â€œä¸€åˆ‡çš†æ¨¡å—â€</h4>
<ul>
<li><strong>ä¾èµ–æ³¨å…¥ï¼Ÿ</strong>ï¼šNode.jsçš„æ¨¡å—ç³»ç»Ÿï¼ˆ<code>require</code>/<code>import</code>ï¼‰æœ¬èº«å°±æ˜¯ä¸€ç§æå…¶ç®€å•è‡ªç„¶çš„ä¾èµ–ç®¡ç†ã€‚ä½ éœ€è¦ä¸€ä¸ªæ•°æ®åº“è¿æ¥ï¼Ÿç›´æ¥ <code>const db = require('./db');</code>ã€‚è¿™ç§â€œæ‰‹åŠ¨â€ç»„è£…åœ¨è½»é‡çº§åº”ç”¨ä¸­æ¯”é…ç½®ä¸€ä¸ªSpring Beanè¦ç›´è§‚å¾—å¤šã€‚</li>
<li><strong>é…ç½®</strong>ï¼šç¯å¢ƒå˜é‡ + JSON/YAMLé…ç½®æ–‡ä»¶æ˜¯ç»å¯¹ä¸»æµï¼Œç®€å•ç›´æ¥ã€‚</li>
<li><strong>äº‹åŠ¡ç®¡ç†ï¼Ÿ</strong>ï¼šæ²¡æœ‰åƒSpringé‚£æ ·å£°æ˜å¼äº‹åŠ¡çš„â€œé­”æ³•â€ï¼Œä½†é€šè¿‡<code>async/await</code>å’Œç®€å•çš„æ•°æ®åº“è¿æ¥æ± /äº‹åŠ¡APIï¼Œå¼€å‘è€…å¯ä»¥æ¸…æ™°åœ°æ§åˆ¶äº‹åŠ¡è¾¹ç•Œï¼Œé€»è¾‘æ›´é€æ˜ã€‚</li>
<li><strong>ç»“è®º</strong>ï¼šå¯¹äºJSå¼€å‘è€…ï¼ŒSpringçš„IoCå®¹å™¨åƒæ˜¯åœ¨ä¸ºä¸€ä¸ªå·²ç»è§£å†³äº†çš„é—®é¢˜æä¾›å¤æ‚çš„è§£å†³æ–¹æ¡ˆã€‚ä»–ä»¬ä¼šè§‰å¾—ï¼šâ€œæˆ‘åªéœ€è¦ä¸€ä¸ªè½»ä¾¿çš„Express/Koaæ¡†æ¶ï¼Œä¸ºä»€ä¹ˆè¦æŠŠæˆ‘çš„åº”ç”¨å¡è¿›ä¸€ä¸ªåºå¤§çš„Spring Bootå®¹å™¨é‡Œï¼Ÿâ€</li>
</ul>
<h4 data-id="heading-3">2. Python ä¸–ç•Œï¼š â€œæ˜¾å¼ä¼˜äºéšå¼â€</h4>
<ul>
<li><strong>å“²å­¦å†²çª</strong>ï¼šPythonä¹‹ç¦…æœ‰ä¸€æ¡æ˜¯â€œæ˜¾å¼ä¼˜äºéšå¼â€ã€‚Springçš„ä¾èµ–æ³¨å…¥å’ŒAOPï¼Œå°¤å…¶æ˜¯åŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…ï¼Œåœ¨Pythonå¼€å‘è€…çœ‹æ¥æ˜¯å…¸å‹çš„â€œéšå¼é­”æ³•â€ã€‚ä»£ç çš„ä¾èµ–å…³ç³»ä¸å†ä¸€ç›®äº†ç„¶ï¼Œè€Œæ˜¯è¢«æ¡†æ¶åœ¨è¿è¡Œæ—¶åŠ¨æ€ç»‡å…¥ã€‚</li>
<li><strong>è½»é‡çº§æ¡†æ¶</strong>ï¼šFlaskã€FastAPIç­‰æ¡†æ¶çš„æ ¸å¿ƒæå…¶ç²¾ç®€ã€‚FastAPIåˆ©ç”¨Pythonçš„ç±»å‹æç¤ºå’Œè£…é¥°å™¨ï¼Œä»¥æå°‘çš„ä»£ç æä¾›äº†ä¾èµ–æ³¨å…¥ã€æ•°æ®éªŒè¯å’ŒAPIæ–‡æ¡£ç”Ÿæˆï¼Œæ„Ÿè§‰ä¸Šæ¯”Spring Bootæ›´â€œèªæ˜â€ã€æ›´è½»å¿«ã€‚</li>
<li><strong>ç»“è®º</strong>ï¼šPythonå¼€å‘è€…äº«å—è¯­è¨€çš„åŠ¨æ€æ€§å’Œè¡¨è¾¾åŠ›ï¼Œä»–ä»¬è®¤ä¸ºSpringçš„å¾ˆå¤šå¤æ‚æ€§æ˜¯ä¸ºäº†ç»•è¿‡Javaè¯­è¨€çš„é™åˆ¶è€Œäº§ç”Ÿçš„ï¼Œåœ¨Pythonä¸–ç•Œé‡Œæ˜¯<strong>ä¸å¿…è¦çš„</strong>ã€‚</li>
</ul>
<h4 data-id="heading-4">3. Go ä¸–ç•Œï¼š â€œç®€å•å°±æ˜¯ç¾â€</h4>
<ul>
<li><strong>æç®€ä¸»ä¹‰</strong>ï¼šGoè¯­è¨€çš„è®¾è®¡å“²å­¦å°±æ˜¯æç®€å’Œæ˜¾å¼ã€‚æ²¡æœ‰æ³›å‹ï¼ˆæ—©æœŸï¼‰ã€æ²¡æœ‰ç»§æ‰¿ã€æ²¡æœ‰å¼‚å¸¸ï¼Œé¼“åŠ±ç»„åˆè€Œéå¤æ‚çš„æŠ½è±¡ã€‚</li>
<li><strong>åŸç”Ÿå·¥å…·é“¾</strong>ï¼šGoçš„æ ‡å‡†åº“éå¸¸å¼ºå¤§ï¼Œç”¨æ ‡å‡†åº“å’Œå°‘é‡ç¬¬ä¸‰æ–¹åº“å°±èƒ½æ„å»ºå‡ºé«˜æ€§èƒ½çš„WebæœåŠ¡ã€‚ä¾èµ–ç®¡ç†å°±æ˜¯ç®€å•çš„ <code>import</code> å’Œç»“æ„ä½“ç»„åˆã€‚</li>
<li><strong>å¯¹â€œé­”æ³•â€çš„åŒæ¶</strong>ï¼šGoç¤¾åŒºæåº¦åæ„ŸSpringé‚£æ ·çš„â€œè¿è¡Œæ—¶é­”æ³•â€å’Œå¤æ‚çš„åå°„æœºåˆ¶ã€‚ä»–ä»¬è¿½æ±‚ç¼–è¯‘æœŸç¡®å®šæ€§å’Œä»£ç çš„å¯é¢„æµ‹æ€§ã€‚</li>
<li><strong>ç»“è®º</strong>ï¼šå¯¹Goå¼€å‘è€…æ¥è¯´ï¼ŒSpringä»£è¡¨çš„æ˜¯ä¸€å¥—ä»–ä»¬<strong>åˆ»æ„é¿å…</strong>çš„å¤æ‚æŠ½è±¡å±‚ã€‚ä»–ä»¬ä¼šè®¤ä¸ºç”¨Goå†™ä¸€ä¸ªWebæœåŠ¡å°±åƒæ‹¼ä¹é«˜ï¼Œè€Œç”¨Springåƒæ˜¯åœ¨æ“ä½œä¸€ä¸ªç²¾å¯†çš„ä½†éš¾ä»¥ç†è§£çš„é»‘ç›’ä»ªå™¨ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-5">ç»¼åˆè¯„ä»·ï¼šå¤æ‚æ€§ä»ä½•è€Œæ¥ï¼Ÿ</h3>
<p>Springçš„å¤æ‚æ€§å¯¹äºéJavaå¼€å‘è€…è€Œè¨€ï¼Œä¸»è¦æ¥æºäºï¼š</p>
<ol>
<li><strong>æŠ½è±¡å±‚çº§è¿‡é«˜</strong>ï¼šIoCå®¹å™¨ã€Beanç”Ÿå‘½å‘¨æœŸã€AOPä»£ç†â€¦â€¦è¿™äº›æ¦‚å¿µåˆ›é€ äº†ä¸€ä¸ªå¹³è¡Œäºè¯­è¨€æœ¬èº«çš„â€œè¿è¡Œæ—¶ç¯å¢ƒâ€ã€‚ä½ éœ€è¦å…ˆç†è§£Springçš„â€œä¸–ç•Œè§‚â€ï¼Œæ‰èƒ½å†™å¥½ä»£ç ã€‚</li>
<li><strong>é…ç½®å†³ç­–ç–²åŠ³</strong>ï¼š<code>@Autowired</code> vs <code>@Resource</code>ï¼Ÿ <code>@Component</code> vs <code>@Service</code>ï¼Ÿ é…ç½®åº”è¯¥æ”¾åœ¨ <code>application.properties</code> è¿˜æ˜¯ç”¨ <code>@Configuration</code> ç±»ï¼Ÿå¤§é‡çš„é€‰æ‹©å’Œâ€œé­”æ³•â€è§„åˆ™éœ€è¦å­¦ä¹ å’Œè®°å¿†ã€‚</li>
<li><strong>å¯åŠ¨æˆæœ¬ä¸è®¤çŸ¥è´Ÿè·</strong>ï¼šä¸€ä¸ªç®€å•çš„Spring Bootåº”ç”¨å¯åŠ¨ä¹Ÿéœ€è¦å‡ ç§’é’Ÿï¼ŒèƒŒåæ˜¯å¤§é‡çš„è‡ªåŠ¨é…ç½®ã€ç±»è·¯å¾„æ‰«æå’ŒBeanåˆå§‹åŒ–ã€‚å¯¹äºä¹ æƒ¯äº†å‡ ç™¾æ¯«ç§’å¯åŠ¨çš„Node.jsæˆ–Goåº”ç”¨æ¥è¯´ï¼Œè¿™æ˜¯éš¾ä»¥æ¥å—çš„ã€‚</li>
<li><strong>â€œæ€é¸¡ç”¨ç‰›åˆ€â€</strong>ï¼šå¾ˆå¤šé¡¹ç›®æ ¹æœ¬ç”¨ä¸åˆ°Springæä¾›çš„å…¨éƒ¨èƒ½åŠ›ã€‚å¯¹äºä¸€ä¸ªç®€å•çš„REST APIï¼ŒFastAPIæˆ–Ginæ¡†æ¶èƒ½æä¾›90%çš„åŠŸèƒ½ï¼Œè€Œå¤æ‚åº¦å’Œå­¦ä¹ æ›²çº¿åªæœ‰Spring Bootçš„10%ã€‚</li>
</ol>
<h3 data-id="heading-6">ç»“è®ºä¸å¯ç¤º</h3>
<ul>
<li><strong>Springæ˜¯Javaè¯­å¢ƒä¸‹çš„â€œæœ€ä¼˜è§£â€</strong>ï¼šåœ¨Javaä¸–ç•Œé‡Œï¼ŒSpringé€šè¿‡å¼•å…¥ä¸€å®šçš„å¤æ‚æ€§ï¼Œæå¤§åœ°é™ä½äº†æ„å»ºå¤§å‹ã€å¤æ‚ã€ä¼ä¸šçº§åº”ç”¨çš„æ€»ä½“æˆæœ¬ã€‚å®ƒæ˜¯æƒè¡¡ä¹‹åçš„èƒœåˆ©è€…ã€‚</li>
<li><strong>ä½†å¯¹äºå…¶ä»–è¯­è¨€ï¼Œå®ƒå¾€å¾€æ˜¯â€œé”™è¯¯ç­”æ¡ˆâ€</strong>ï¼šä¸åŒè¯­è¨€æœ‰è‡ªå·±è§£å†³é—®é¡Œçš„å“²å­¦å’Œå·¥å…·é“¾ã€‚å°†Springçš„ç†å¿µç”Ÿæ¬ç¡¬å¥—åˆ°å…¶ä»–è¯­è¨€ï¼Œæ— å¼‚äºå‰Šè¶³é€‚å±¥ã€‚</li>
<li><strong>å¯ç¤º</strong>ï¼šä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬çš„ç›®æ ‡ä¸åº”è¯¥æ˜¯å­¦ä¹ æŸä¸ªç‰¹å®šçš„æ¡†æ¶ï¼ˆå¦‚Springï¼‰ï¼Œè€Œæ˜¯<strong>ç†è§£æ¡†æ¶èƒŒåè¦è§£å†³çš„é€šç”¨é—®é¢˜</strong>ï¼ˆå¦‚ä¾èµ–ç®¡ç†ã€é…ç½®ã€äº‹åŠ¡ã€å®‰å…¨ï¼‰ã€‚
<ul>
<li>å½“ä½ ä½¿ç”¨Node.jsæ—¶ï¼Œä½ ä¼šè‡ªç„¶åœ°ç”¨æ¨¡å—ç³»ç»Ÿå’Œä¸­é—´ä»¶æ¥è§£å†³ã€‚</li>
<li>å½“ä½ ä½¿ç”¨Pythonæ—¶ï¼Œä½ ä¼šé€‰æ‹©Flask/FastAPIå’Œå®ƒä»¬çš„æ’ä»¶ç”Ÿæ€ã€‚</li>
<li>å½“ä½ ä½¿ç”¨Goæ—¶ï¼Œä½ ä¼šæ¬£èµæ ‡å‡†åº“å’Œæ˜¾å¼ç»„åˆå¸¦æ¥çš„ç®€å•æ€§ã€‚</li>
</ul>
</li>
</ul>
<p><strong>æœ€ç»ˆï¼Œä¼˜ç§€çš„å¼€å‘è€…ç†è§£â€œä¸Šä¸‹æ–‡â€ã€‚ä»–ä»¬çŸ¥é“åœ¨Javaä¼ä¸šçº§åº”ç”¨çš„ä¸Šä¸‹æ–‡ä¸­ï¼ŒSpringçš„å¤æ‚æ€§æ˜¯åˆç†çš„ä»£ä»·ï¼›è€Œåœ¨ä¸€ä¸ªéœ€è¦å¿«é€Ÿè¿­ä»£çš„å¾®æœåŠ¡æˆ–è„šæœ¬çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œæ›´è½»é‡çº§ã€æ›´ç¬¦åˆè¯­è¨€å“²å­¦çš„å·¥å…·æ‰æ˜¯æœ€ä½³é€‰æ‹©ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[uniappé¡µé¢è·¯ç”±]]></title>    <link>https://juejin.cn/post/7570604028632481827</link>    <guid>https://juejin.cn/post/7570604028632481827</guid>    <pubDate>2025-11-10T02:26:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570604028632481827" data-draft-id="7570394530316206080" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="uniappé¡µé¢è·¯ç”±"/> <meta itemprop="keywords" content="Vue.js,uni-app"/> <meta itemprop="datePublished" content="2025-11-10T02:26:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·971417181427"/> <meta itemprop="url" content="https://juejin.cn/user/2200564916558794"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            uniappé¡µé¢è·¯ç”±
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2200564916558794/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·971417181427
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T02:26:28.000Z" title="Mon Nov 10 2025 02:26:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">uni-app è·¯ç”±è¯¦è§£ï¼šä»å…¥é—¨åˆ°ç²¾é€š</h2>
<blockquote>
<p>æœ¬æ–‡åŸºäº <a href="https://link.juejin.cn?target=https%3A%2F%2Funiapp.dcloud.net.cn%2Fapi%2Frouter.html" target="_blank" title="https://uniapp.dcloud.net.cn/api/router.html" ref="nofollow noopener noreferrer">uni-app é¡µé¢è·¯ç”±æ–‡æ¡£</a> æ•´ç†ï¼Œè¯¦ç»†ä»‹ç»äº† uni-app ä¸­çš„è·¯ç”± API ä½¿ç”¨æ–¹æ³•å’Œæœ€ä½³å®è·µã€‚</p>
</blockquote>
<h3 data-id="heading-1">ç›®å½•</h3>
<ul>
<li><a href="#%E6%A6%82%E8%BF%B0" title="#%E6%A6%82%E8%BF%B0">æ¦‚è¿°</a></li>
<li><a href="#%E8%B7%AF%E7%94%B1-api-%E8%AF%A6%E8%A7%A3" title="#%E8%B7%AF%E7%94%B1-api-%E8%AF%A6%E8%A7%A3">è·¯ç”± API è¯¦è§£</a>
<ul>
<li><a href="#uninavigateto---%E4%BF%9D%E7%95%99%E5%BD%93%E5%89%8D%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC" title="#uninavigateto---%E4%BF%9D%E7%95%99%E5%BD%93%E5%89%8D%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC">uni.navigateTo - ä¿ç•™å½“å‰é¡µé¢è·³è½¬</a></li>
<li><a href="#uniredirectto---%E5%85%B3%E9%97%AD%E5%BD%93%E5%89%8D%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC" title="#uniredirectto---%E5%85%B3%E9%97%AD%E5%BD%93%E5%89%8D%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC">uni.redirectTo - å…³é—­å½“å‰é¡µé¢è·³è½¬</a></li>
<li><a href="#unirelaunch---%E5%85%B3%E9%97%AD%E6%89%80%E6%9C%89%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC" title="#unirelaunch---%E5%85%B3%E9%97%AD%E6%89%80%E6%9C%89%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC">uni.reLaunch - å…³é—­æ‰€æœ‰é¡µé¢è·³è½¬</a></li>
<li><a href="#uniswitchtab---%E8%B7%B3%E8%BD%AC%E5%88%B0-tabbar-%E9%A1%B5%E9%9D%A2" title="#uniswitchtab---%E8%B7%B3%E8%BD%AC%E5%88%B0-tabbar-%E9%A1%B5%E9%9D%A2">uni.switchTab - è·³è½¬åˆ° tabBar é¡µé¢</a></li>
<li><a href="#uninavigateback---%E8%BF%94%E5%9B%9E%E4%B8%8A%E4%B8%80%E9%A1%B5" title="#uninavigateback---%E8%BF%94%E5%9B%9E%E4%B8%8A%E4%B8%80%E9%A1%B5">uni.navigateBack - è¿”å›ä¸Šä¸€é¡µ</a></li>
</ul>
</li>
<li><a href="#%E9%A1%B5%E9%9D%A2%E9%97%B4%E9%80%9A%E4%BF%A1---eventchannel" title="#%E9%A1%B5%E9%9D%A2%E9%97%B4%E9%80%9A%E4%BF%A1---eventchannel">é¡µé¢é—´é€šä¿¡ - EventChannel</a></li>
<li><a href="#%E7%AA%97%E5%8F%A3%E5%8A%A8%E7%94%BB%E9%85%8D%E7%BD%AE" title="#%E7%AA%97%E5%8F%A3%E5%8A%A8%E7%94%BB%E9%85%8D%E7%BD%AE">çª—å£åŠ¨ç”»é…ç½®</a></li>
<li><a href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%92%8C%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5" title="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%92%8C%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">æ³¨æ„äº‹é¡¹å’Œæœ€ä½³å®è·µ</a></li>
<li><a href="#%E6%80%BB%E7%BB%93" title="#%E6%80%BB%E7%BB%93">æ€»ç»“</a></li>
</ul>
<h3 data-id="heading-2">æ¦‚è¿°</h3>
<p>uni-app æä¾›äº†ä¸°å¯Œçš„è·¯ç”± APIï¼Œç”¨äºå®ç°é¡µé¢ä¹‹é—´çš„è·³è½¬å’Œå¯¼èˆªã€‚æ ¹æ®ä¸åŒçš„ä½¿ç”¨åœºæ™¯ï¼Œå¯ä»¥é€‰æ‹©ä¸åŒçš„è·¯ç”±æ–¹æ³•ã€‚ç†è§£è¿™äº› API çš„åŒºåˆ«å’Œä½¿ç”¨åœºæ™¯ï¼Œå¯¹äºå¼€å‘é«˜è´¨é‡çš„ uni-app åº”ç”¨è‡³å…³é‡è¦ã€‚</p>
<h3 data-id="heading-3">è·¯ç”± API è¯¦è§£</h3>
<h4 data-id="heading-4">uni.navigateTo - ä¿ç•™å½“å‰é¡µé¢è·³è½¬</h4>
<p><strong>åŠŸèƒ½è¯´æ˜</strong>ï¼šä¿ç•™å½“å‰é¡µé¢ï¼Œè·³è½¬åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢ã€‚ä½¿ç”¨ <code>uni.navigateBack</code> å¯ä»¥è¿”å›åˆ°åŸé¡µé¢ã€‚</p>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>éœ€è¦è¿”å›çš„é¡µé¢è·³è½¬</li>
<li>è¯¦æƒ…é¡µã€è¡¨å•é¡µç­‰éœ€è¦ä¿ç•™å†å²è®°å½•çš„é¡µé¢</li>
</ul>
<p><strong>å‚æ•°è¯´æ˜</strong>ï¼š</p>





















































<table><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>å¿…å¡«</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>url</td><td>String</td><td>æ˜¯</td><td>éœ€è¦è·³è½¬çš„åº”ç”¨å†…é tabBar çš„é¡µé¢çš„è·¯å¾„ï¼Œè·¯å¾„åå¯ä»¥å¸¦å‚æ•°</td></tr><tr><td>animationType</td><td>String</td><td>å¦</td><td>çª—å£æ˜¾ç¤ºçš„åŠ¨ç”»æ•ˆæœï¼ˆä»… App æ”¯æŒï¼‰</td></tr><tr><td>animationDuration</td><td>Number</td><td>å¦</td><td>çª—å£åŠ¨ç”»æŒç»­æ—¶é—´ï¼Œå•ä½ä¸º msï¼ˆä»… App æ”¯æŒï¼‰</td></tr><tr><td>events</td><td>Object</td><td>å¦</td><td>é¡µé¢é—´é€šä¿¡æ¥å£ï¼Œç”¨äºç›‘å¬è¢«æ‰“å¼€é¡µé¢å‘é€åˆ°å½“å‰é¡µé¢çš„æ•°æ®ï¼ˆ2.8.9+ï¼‰</td></tr><tr><td>success</td><td>Function</td><td>å¦</td><td>æ¥å£è°ƒç”¨æˆåŠŸçš„å›è°ƒå‡½æ•°</td></tr><tr><td>fail</td><td>Function</td><td>å¦</td><td>æ¥å£è°ƒç”¨å¤±è´¥çš„å›è°ƒå‡½æ•°</td></tr><tr><td>complete</td><td>Function</td><td>å¦</td><td>æ¥å£è°ƒç”¨ç»“æŸçš„å›è°ƒå‡½æ•°</td></tr></tbody></table>
<p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨èµ·å§‹é¡µé¢è·³è½¬åˆ° test.vue é¡µé¢å¹¶ä¼ é€’å‚æ•°</span>
uni.<span class="hljs-title function_">navigateTo</span>({
  <span class="hljs-attr">url</span>: <span class="hljs-string">'test?id=1&amp;name=uniapp'</span>,
  <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·³è½¬æˆåŠŸ'</span>, res)
  },
  <span class="hljs-attr">fail</span>: <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·³è½¬å¤±è´¥'</span>, err)
  }
})

<span class="hljs-comment">// åœ¨ test.vue é¡µé¢æ¥æ”¶å‚æ•°</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">onLoad</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">option</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(option.<span class="hljs-property">id</span>)    <span class="hljs-comment">// è¾“å‡º: 1</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(option.<span class="hljs-property">name</span>)  <span class="hljs-comment">// è¾“å‡º: uniapp</span>
  }
}
</code></pre>
<p><strong>ä¼ é€’å¤æ‚å‚æ•°</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼ é€’å¯¹è±¡å‚æ•°ï¼ˆéœ€è¦åºåˆ—åŒ–ï¼‰</span>
<span class="hljs-keyword">const</span> data = {
  <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">name</span>: <span class="hljs-string">'uniapp'</span>,
  <span class="hljs-attr">list</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]
}

uni.<span class="hljs-title function_">navigateTo</span>({
  <span class="hljs-attr">url</span>: <span class="hljs-string">`test?data=<span class="hljs-subst">${<span class="hljs-built_in">encodeURIComponent</span>(<span class="hljs-built_in">JSON</span>.stringify(data))}</span>`</span>
})

<span class="hljs-comment">// æ¥æ”¶å‚æ•°</span>
<span class="hljs-title function_">onLoad</span>(<span class="hljs-function">(<span class="hljs-params">options</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-built_in">decodeURIComponent</span>(options.<span class="hljs-property">data</span>))
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data)
})
</code></pre>
<h4 data-id="heading-5">uni.redirectTo - å…³é—­å½“å‰é¡µé¢è·³è½¬</h4>
<p><strong>åŠŸèƒ½è¯´æ˜</strong>ï¼šå…³é—­å½“å‰é¡µé¢ï¼Œè·³è½¬åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢ã€‚</p>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç™»å½•æˆåŠŸåè·³è½¬åˆ°é¦–é¡µ</li>
<li>ä¸éœ€è¦è¿”å›çš„é¡µé¢è·³è½¬</li>
<li>æ›¿æ¢å½“å‰é¡µé¢</li>
</ul>
<p><strong>å‚æ•°è¯´æ˜</strong>ï¼šä¸ <code>uni.navigateTo</code> ç›¸åŒï¼ˆé™¤äº†ä¸æ”¯æŒ <code>events</code> å‚æ•°ï¼‰</p>
<p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç™»å½•æˆåŠŸåè·³è½¬åˆ°é¦–é¡µ</span>
uni.<span class="hljs-title function_">redirectTo</span>({
  <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/index/index'</span>
})
</code></pre>
<p><strong>ä¸ navigateTo çš„åŒºåˆ«</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// A é¡µé¢</span>
uni.<span class="hljs-title function_">navigateTo</span>({
  <span class="hljs-attr">url</span>: <span class="hljs-string">'B?id=1'</span>
})

<span class="hljs-comment">// B é¡µé¢</span>
uni.<span class="hljs-title function_">navigateTo</span>({
  <span class="hljs-attr">url</span>: <span class="hljs-string">'C?id=1'</span>
})

<span class="hljs-comment">// åœ¨ C é¡µé¢å†… navigateBackï¼Œå°†è¿”å› B é¡µé¢</span>
<span class="hljs-comment">// ä½†å¦‚æœ B é¡µé¢ä½¿ç”¨çš„æ˜¯ redirectToï¼Œåˆ™è¿”å› A é¡µé¢</span>
</code></pre>
<h4 data-id="heading-6">uni.reLaunch - å…³é—­æ‰€æœ‰é¡µé¢è·³è½¬</h4>
<p><strong>åŠŸèƒ½è¯´æ˜</strong>ï¼šå…³é—­æ‰€æœ‰é¡µé¢ï¼Œæ‰“å¼€åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢ã€‚</p>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>é€€å‡ºç™»å½•åè·³è½¬åˆ°ç™»å½•é¡µ</li>
<li>éœ€è¦æ¸…ç©ºé¡µé¢æ ˆçš„åœºæ™¯</li>
<li>é‡æ–°åˆå§‹åŒ–åº”ç”¨çŠ¶æ€</li>
</ul>
<p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é€€å‡ºç™»å½•</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">logout</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// æ¸…é™¤ç”¨æˆ·ä¿¡æ¯</span>
  uni.<span class="hljs-title function_">removeStorageSync</span>(<span class="hljs-string">'token'</span>)
  
  <span class="hljs-comment">// å…³é—­æ‰€æœ‰é¡µé¢ï¼Œè·³è½¬åˆ°ç™»å½•é¡µ</span>
  uni.<span class="hljs-title function_">reLaunch</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/login/login'</span>
  })
}
</code></pre>
<h4 data-id="heading-7">uni.switchTab - è·³è½¬åˆ° tabBar é¡µé¢</h4>
<p><strong>åŠŸèƒ½è¯´æ˜</strong>ï¼šè·³è½¬åˆ° tabBar é¡µé¢ï¼Œå¹¶å…³é—­å…¶ä»–æ‰€æœ‰é tabBar é¡µé¢ã€‚</p>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>åˆ‡æ¢åˆ°åº•éƒ¨å¯¼èˆªæ é¡µé¢</li>
<li>ä»é tabBar é¡µé¢è¿”å›åˆ° tabBar é¡µé¢</li>
</ul>
<p><strong>é‡è¦æç¤º</strong>ï¼š</p>
<ul>
<li>åªèƒ½è·³è½¬åˆ° <code>pages.json</code> ä¸­é…ç½®çš„ <code>tabBar</code> é¡µé¢</li>
<li>è·³è½¬çš„ url å¿…é¡»æ˜¯åœ¨ <code>tabBar</code> ä¸­å®šä¹‰çš„è·¯å¾„</li>
</ul>
<p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è·³è½¬åˆ°é¦–é¡µï¼ˆtabBar é¡µé¢ï¼‰</span>
uni.<span class="hljs-title function_">switchTab</span>({
  <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/index/index'</span>
})
</code></pre>
<p><strong>pages.json é…ç½®ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"tabBar"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"list"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"pagePath"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pages/index/index"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é¦–é¡µ"</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"pagePath"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pages/user/user"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æˆ‘çš„"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-8">uni.navigateBack - è¿”å›ä¸Šä¸€é¡µ</h4>
<p><strong>åŠŸèƒ½è¯´æ˜</strong>ï¼šå…³é—­å½“å‰é¡µé¢ï¼Œè¿”å›ä¸Šä¸€é¡µé¢æˆ–å¤šçº§é¡µé¢ã€‚</p>
<p><strong>å‚æ•°è¯´æ˜</strong>ï¼š</p>





























<table><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>å¿…å¡«</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>delta</td><td>Number</td><td>å¦</td><td>è¿”å›çš„é¡µé¢æ•°ï¼Œå¦‚æœ delta å¤§äºç°æœ‰é¡µé¢æ•°ï¼Œåˆ™è¿”å›åˆ°é¦–é¡µã€‚é»˜è®¤å€¼ä¸º 1</td></tr><tr><td>animationType</td><td>String</td><td>å¦</td><td>çª—å£å…³é—­çš„åŠ¨ç”»æ•ˆæœï¼ˆä»… App æ”¯æŒï¼‰</td></tr><tr><td>animationDuration</td><td>Number</td><td>å¦</td><td>çª—å£å…³é—­åŠ¨ç”»çš„æŒç»­æ—¶é—´ï¼Œå•ä½ä¸º msï¼ˆä»… App æ”¯æŒï¼‰</td></tr></tbody></table>
<p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è¿”å›ä¸Šä¸€é¡µ</span>
uni.<span class="hljs-title function_">navigateBack</span>()

<span class="hljs-comment">// è¿”å›ä¸Šä¸¤é¡µ</span>
uni.<span class="hljs-title function_">navigateBack</span>({
  <span class="hljs-attr">delta</span>: <span class="hljs-number">2</span>
})

<span class="hljs-comment">// å¸¦åŠ¨ç”»æ•ˆæœè¿”å›ï¼ˆä»… Appï¼‰</span>
uni.<span class="hljs-title function_">navigateBack</span>({
  <span class="hljs-attr">delta</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">animationType</span>: <span class="hljs-string">'pop-out'</span>,
  <span class="hljs-attr">animationDuration</span>: <span class="hljs-number">300</span>
})
</code></pre>
<p><strong>å®é™…åº”ç”¨åœºæ™¯</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// A é¡µé¢ -&gt; B é¡µé¢ -&gt; C é¡µé¢</span>
<span class="hljs-comment">// åœ¨ C é¡µé¢å†… navigateBackï¼Œå°†è¿”å› B é¡µé¢</span>
uni.<span class="hljs-title function_">navigateBack</span>({
  <span class="hljs-attr">delta</span>: <span class="hljs-number">1</span>
})

<span class="hljs-comment">// å¦‚æœæƒ³ç›´æ¥è¿”å› A é¡µé¢</span>
uni.<span class="hljs-title function_">navigateBack</span>({
  <span class="hljs-attr">delta</span>: <span class="hljs-number">2</span>
})
</code></pre>
<h3 data-id="heading-9">é¡µé¢é—´é€šä¿¡ - EventChannel</h3>
<blockquote>
<p>2.8.9+ æ”¯æŒï¼ŒHarmonyOS Next ä¸æ”¯æŒ</p>
</blockquote>
<p><code>EventChannel</code> æä¾›äº†é¡µé¢é—´äº‹ä»¶é€šä¿¡çš„èƒ½åŠ›ï¼Œå¯ä»¥åœ¨é¡µé¢è·³è½¬æ—¶å»ºç«‹é€šä¿¡é€šé“ã€‚</p>
<h4 data-id="heading-10">EventChannel æ–¹æ³•</h4>
<h5 data-id="heading-11">emit - è§¦å‘äº‹ä»¶</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨ç›®æ ‡é¡µé¢è§¦å‘äº‹ä»¶</span>
eventChannel.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'eventName'</span>, { <span class="hljs-attr">data</span>: <span class="hljs-string">'value'</span> })
</code></pre>
<h5 data-id="heading-12">on - æŒç»­ç›‘å¬äº‹ä»¶</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨æºé¡µé¢ç›‘å¬äº‹ä»¶</span>
eventChannel.<span class="hljs-title function_">on</span>(<span class="hljs-string">'eventName'</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¥æ”¶åˆ°æ•°æ®:'</span>, data)
})
</code></pre>
<h5 data-id="heading-13">once - ç›‘å¬äº‹ä»¶ä¸€æ¬¡</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åªç›‘å¬ä¸€æ¬¡ï¼Œè§¦å‘åå¤±æ•ˆ</span>
eventChannel.<span class="hljs-title function_">once</span>(<span class="hljs-string">'eventName'</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¥æ”¶åˆ°æ•°æ®:'</span>, data)
})
</code></pre>
<h5 data-id="heading-14">off - å–æ¶ˆç›‘å¬</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å–æ¶ˆæ‰€æœ‰ç›‘å¬</span>
eventChannel.<span class="hljs-title function_">off</span>(<span class="hljs-string">'eventName'</span>)

<span class="hljs-comment">// å–æ¶ˆæŒ‡å®šçš„ç›‘å¬å‡½æ•°</span>
eventChannel.<span class="hljs-title function_">off</span>(<span class="hljs-string">'eventName'</span>, fn)
</code></pre>
<h4 data-id="heading-15">å®Œæ•´ç¤ºä¾‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æºé¡µé¢ - å‘é€æ•°æ®</span>
uni.<span class="hljs-title function_">navigateTo</span>({
  <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/detail/detail'</span>,
  <span class="hljs-attr">events</span>: {
    <span class="hljs-comment">// ç›‘å¬ç›®æ ‡é¡µé¢å‘é€çš„äº‹ä»¶</span>
    <span class="hljs-attr">acceptDataFromDetail</span>: <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä»è¯¦æƒ…é¡µæ¥æ”¶åˆ°çš„æ•°æ®:'</span>, data)
    }
  },
  <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
    <span class="hljs-comment">// é€šè¿‡ eventChannel å‘ç›®æ ‡é¡µé¢å‘é€æ•°æ®</span>
    res.<span class="hljs-property">eventChannel</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'acceptDataFromOpenerPage'</span>, {
      <span class="hljs-attr">data</span>: <span class="hljs-string">'æ¥è‡ªæºé¡µé¢çš„æ•°æ®'</span>
    })
  }
})

<span class="hljs-comment">// ç›®æ ‡é¡µé¢ - æ¥æ”¶å’Œå‘é€æ•°æ®</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">onLoad</span>(<span class="hljs-params">options, context</span>) {
    <span class="hljs-comment">// æ¥æ”¶æºé¡µé¢å‘é€çš„æ•°æ®</span>
    context.<span class="hljs-property">eventChannel</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'acceptDataFromOpenerPage'</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¥æ”¶åˆ°æºé¡µé¢çš„æ•°æ®:'</span>, data)
    })
    
    <span class="hljs-comment">// å‘æºé¡µé¢å‘é€æ•°æ®</span>
    context.<span class="hljs-property">eventChannel</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'acceptDataFromDetail'</span>, {
      <span class="hljs-attr">data</span>: <span class="hljs-string">'æ¥è‡ªè¯¦æƒ…é¡µçš„æ•°æ®'</span>
    })
  }
}
</code></pre>
<h3 data-id="heading-16">çª—å£åŠ¨ç”»é…ç½®</h3>
<blockquote>
<p>æœ¬åŠŸèƒ½ä»… App æ”¯æŒã€‚å°ç¨‹åºè‡ªèº«ä¸æ”¯æŒè‡ªå®šä¹‰åŠ¨ç”»ã€‚</p>
</blockquote>
<p>uni-app æ”¯æŒåœ¨ APIã€ç»„ä»¶ã€pages.json ä¸­é…ç½®çª—å£åŠ¨ç”»ï¼Œä¼˜å…ˆçº§ä¸ºï¼š<strong>API &gt; ç»„ä»¶ &gt; pages.json</strong>ã€‚</p>
<h4 data-id="heading-17">API é…ç½®</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è·³è½¬æ—¶é…ç½®åŠ¨ç”»</span>
uni.<span class="hljs-title function_">navigateTo</span>({
  <span class="hljs-attr">url</span>: <span class="hljs-string">'../test/test'</span>,
  <span class="hljs-attr">animationType</span>: <span class="hljs-string">'pop-in'</span>,
  <span class="hljs-attr">animationDuration</span>: <span class="hljs-number">200</span>
})

<span class="hljs-comment">// è¿”å›æ—¶é…ç½®åŠ¨ç”»</span>
uni.<span class="hljs-title function_">navigateBack</span>({
  <span class="hljs-attr">delta</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">animationType</span>: <span class="hljs-string">'pop-out'</span>,
  <span class="hljs-attr">animationDuration</span>: <span class="hljs-number">200</span>
})
</code></pre>
<h4 data-id="heading-18">ç»„ä»¶é…ç½®</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">navigator</span> 
  <span class="hljs-attr">animation-type</span>=<span class="hljs-string">"pop-in"</span> 
  <span class="hljs-attr">animation-duration</span>=<span class="hljs-string">"300"</span> 
  <span class="hljs-attr">url</span>=<span class="hljs-string">"../test/test"</span>&gt;</span>
  è·³è½¬
<span class="hljs-tag">&lt;/<span class="hljs-name">navigator</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">navigator</span> 
  <span class="hljs-attr">animation-type</span>=<span class="hljs-string">"pop-out"</span> 
  <span class="hljs-attr">animation-duration</span>=<span class="hljs-string">"300"</span> 
  <span class="hljs-attr">open-type</span>=<span class="hljs-string">"navigateBack"</span>&gt;</span>
  è¿”å›
<span class="hljs-tag">&lt;/<span class="hljs-name">navigator</span>&gt;</span>
</code></pre>
<h4 data-id="heading-19">pages.json é…ç½®</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"app-plus"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"animationType"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"fade-in"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"animationDuration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">300</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-20">æ”¯æŒçš„åŠ¨ç”»ç±»å‹</h4>























































<table><thead><tr><th>æ˜¾ç¤ºåŠ¨ç”»</th><th>å…³é—­åŠ¨ç”»</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>slide-in-right</td><td>slide-out-right</td><td>æ–°çª—ä½“ä»å³ä¾§è¿›å…¥</td></tr><tr><td>slide-in-left</td><td>slide-out-left</td><td>æ–°çª—ä½“ä»å·¦ä¾§è¿›å…¥</td></tr><tr><td>slide-in-top</td><td>slide-out-top</td><td>æ–°çª—ä½“ä»é¡¶éƒ¨è¿›å…¥</td></tr><tr><td>slide-in-bottom</td><td>slide-out-bottom</td><td>æ–°çª—ä½“ä»åº•éƒ¨è¿›å…¥</td></tr><tr><td>pop-in</td><td>pop-out</td><td>æ–°çª—ä½“ä»å·¦ä¾§è¿›å…¥ï¼Œä¸”è€çª—ä½“è¢«æŒ¤å‹è€Œå‡º</td></tr><tr><td>fade-in</td><td>fade-out</td><td>æ–°çª—ä½“ä»é€æ˜åˆ°ä¸é€æ˜é€æ¸æ˜¾ç¤º</td></tr><tr><td>zoom-out</td><td>zoom-in</td><td>æ–°çª—ä½“ä»å°åˆ°å¤§ç¼©æ”¾æ˜¾ç¤º</td></tr><tr><td>zoom-fade-out</td><td>zoom-fade-in</td><td>æ–°çª—ä½“ä»å°åˆ°å¤§é€æ¸æ”¾å¤§å¹¶ä¸”ä»é€æ˜åˆ°ä¸é€æ˜é€æ¸æ˜¾ç¤º</td></tr><tr><td>none</td><td>none</td><td>æ— åŠ¨ç”»</td></tr></tbody></table>
<h3 data-id="heading-21">æ³¨æ„äº‹é¡¹å’Œæœ€ä½³å®è·µ</h3>
<h4 data-id="heading-22">1. è·¯ç”±é™åˆ¶</h4>
<ul>
<li><code>navigateTo</code>ã€<code>redirectTo</code> åªèƒ½æ‰“å¼€é tabBar é¡µé¢</li>
<li><code>switchTab</code> åªèƒ½æ‰“å¼€ tabBar é¡µé¢</li>
<li><code>reLaunch</code> å¯ä»¥æ‰“å¼€ä»»æ„é¡µé¢</li>
</ul>
<h4 data-id="heading-23">2. é¡µé¢æ ˆç®¡ç†</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ³¨æ„é¡µé¢æ ˆçš„å±‚çº§</span>
<span class="hljs-comment">// A é¡µé¢</span>
uni.<span class="hljs-title function_">navigateTo</span>({
  <span class="hljs-attr">url</span>: <span class="hljs-string">'B?id=1'</span>
})

<span class="hljs-comment">// B é¡µé¢</span>
uni.<span class="hljs-title function_">navigateTo</span>({
  <span class="hljs-attr">url</span>: <span class="hljs-string">'C?id=1'</span>
})

<span class="hljs-comment">// åœ¨ C é¡µé¢å†… navigateBackï¼Œå°†è¿”å› B é¡µé¢</span>
<span class="hljs-comment">// å¦‚æœ B é¡µé¢ä½¿ç”¨çš„æ˜¯ redirectToï¼Œåˆ™è¿”å› A é¡µé¢</span>
</code></pre>
<h4 data-id="heading-24">3. H5 ç«¯ç‰¹æ®Šå¤„ç†</h4>
<p>H5 ç«¯é¡µé¢åˆ·æ–°ä¹‹åé¡µé¢æ ˆä¼šæ¶ˆå¤±ï¼Œæ­¤æ—¶ <code>navigateBack</code> ä¸èƒ½è¿”å›ã€‚å¦‚æœéœ€è¦è¿”å›ï¼Œå¯ä»¥ä½¿ç”¨ <code>history.back()</code> å¯¼èˆªåˆ°æµè§ˆå™¨çš„å…¶ä»–å†å²è®°å½•ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// #ifdef H5</span>
<span class="hljs-keyword">if</span> (<span class="hljs-title function_">getCurrentPages</span>().<span class="hljs-property">length</span> === <span class="hljs-number">1</span>) {
  history.<span class="hljs-title function_">back</span>()
} <span class="hljs-keyword">else</span> {
  uni.<span class="hljs-title function_">navigateBack</span>()
}
<span class="hljs-comment">// #endif</span>
</code></pre>
<h4 data-id="heading-25">4. ä¸èƒ½åœ¨é¦–é¡µ onReady ä¹‹å‰è¿›è¡Œé¡µé¢è·³è½¬</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">onReady</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ­£ç¡®çš„åšæ³•ï¼šåœ¨ onReady ä¹‹åè·³è½¬</span>
    uni.<span class="hljs-title function_">navigateTo</span>({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/detail/detail'</span>
    })
  }
}
</code></pre>
<h4 data-id="heading-26">5. å‚æ•°ä¼ é€’æœ€ä½³å®è·µ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æ¨èï¼šç®€å•å‚æ•°ä½¿ç”¨ URL å‚æ•°</span>
uni.<span class="hljs-title function_">navigateTo</span>({
  <span class="hljs-attr">url</span>: <span class="hljs-string">`/pages/detail/detail?id=<span class="hljs-subst">${id}</span>&amp;name=<span class="hljs-subst">${name}</span>`</span>
})

<span class="hljs-comment">// âœ… æ¨èï¼šå¤æ‚å¯¹è±¡ä½¿ç”¨ JSON åºåˆ—åŒ–</span>
<span class="hljs-keyword">const</span> complexData = {
  <span class="hljs-attr">user</span>: { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'test'</span> },
  <span class="hljs-attr">list</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]
}
uni.<span class="hljs-title function_">navigateTo</span>({
  <span class="hljs-attr">url</span>: <span class="hljs-string">`/pages/detail/detail?data=<span class="hljs-subst">${<span class="hljs-built_in">encodeURIComponent</span>(<span class="hljs-built_in">JSON</span>.stringify(complexData))}</span>`</span>
})

<span class="hljs-comment">// âœ… æ¨èï¼šä½¿ç”¨ EventChannel è¿›è¡Œé¡µé¢é—´é€šä¿¡</span>
uni.<span class="hljs-title function_">navigateTo</span>({
  <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/detail/detail'</span>,
  <span class="hljs-attr">events</span>: {
    <span class="hljs-attr">updateData</span>: <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
      <span class="hljs-comment">// å¤„ç†æ•°æ®æ›´æ–°</span>
    }
  }
})
</code></pre>
<h4 data-id="heading-27">6. é¿å…è¿‡åº¦ä½¿ç”¨ navigateTo å¯¼è‡´é¡µé¢æ ˆé—®é¢˜</h4>
<p><strong>å¸¸è§é—®é¢˜åœºæ™¯</strong>ï¼š</p>
<p>æˆ‘é‡åˆ°çš„é—®é¢˜ï¼šåœ¨å¼€å‘ä¸­ä¹ æƒ¯æ€§åœ°ä½¿ç”¨ <code>uni.navigateTo</code> è¿›è¡Œæ‰€æœ‰é¡µé¢è·³è½¬ï¼Œè¿™ä¼šå¯¼è‡´é¡µé¢æ ˆç®¡ç†å‡ºç°é—®é¢˜ã€‚</p>
<p><strong>é—®é¢˜ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é”™è¯¯ç¤ºä¾‹ï¼šè¡¨å•é¡µ -&gt; åˆ—è¡¨é¡µ -&gt; è¯¦æƒ…é¡µ</span>
<span class="hljs-comment">// è¡¨å•é¡µå¡«å†™å®Œæˆ</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">submitForm</span> = (<span class="hljs-params"/>) =&gt; {
  uni.<span class="hljs-title function_">navigateTo</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/list/list'</span>  <span class="hljs-comment">// é—®é¢˜ï¼šåº”è¯¥ä½¿ç”¨ redirectTo</span>
  })
}

<span class="hljs-comment">// åˆ—è¡¨é¡µç‚¹å‡» item</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">goToDetail</span> = (<span class="hljs-params">id</span>) =&gt; {
  uni.<span class="hljs-title function_">navigateTo</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">`/pages/detail/detail?id=<span class="hljs-subst">${id}</span>`</span>  <span class="hljs-comment">// é—®é¢˜ï¼šé¡µé¢æ ˆè¿‡æ·±</span>
  })
}
</code></pre>
<p><strong>é—®é¢˜åˆ†æ</strong>ï¼š</p>
<ol>
<li>è¡¨å•é¡µæäº¤åï¼Œé€šå¸¸ä¸éœ€è¦å†è¿”å›è¡¨å•é¡µï¼Œåº”è¯¥ä½¿ç”¨ <code>redirectTo</code> æ›¿æ¢å½“å‰é¡µé¢</li>
<li>é¡µé¢æ ˆè¿‡æ·±ä¼šå¯¼è‡´è¿”å›é€»è¾‘æ··ä¹±ï¼Œç”¨æˆ·ä½“éªŒä¸ä½³</li>
<li>å¯èƒ½å¯¼è‡´å†…å­˜å ç”¨è¿‡é«˜ï¼ˆé¡µé¢æ ˆä¸­ä¿ç•™è¿‡å¤šé¡µé¢ï¼‰</li>
</ol>
<p><strong>æ­£ç¡®çš„è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æ­£ç¡®ç¤ºä¾‹ 1ï¼šè¡¨å•é¡µæäº¤åæ›¿æ¢ä¸ºåˆ—è¡¨é¡µ</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">submitForm</span> = (<span class="hljs-params"/>) =&gt; {
  uni.<span class="hljs-title function_">redirectTo</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/list/list'</span>  <span class="hljs-comment">// å…³é—­è¡¨å•é¡µï¼Œæ‰“å¼€åˆ—è¡¨é¡µ</span>
  })
}

<span class="hljs-comment">// âœ… æ­£ç¡®ç¤ºä¾‹ 2ï¼šå¦‚æœåˆ—è¡¨é¡µæ˜¯ tabBar é¡µé¢</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">submitForm</span> = (<span class="hljs-params"/>) =&gt; {
  uni.<span class="hljs-title function_">switchTab</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/list/list'</span>  <span class="hljs-comment">// åˆ‡æ¢åˆ° tabBar é¡µé¢</span>
  })
}

<span class="hljs-comment">// âœ… æ­£ç¡®ç¤ºä¾‹ 3ï¼šè¯¦æƒ…é¡µéœ€è¦è¿”å›åˆ—è¡¨é¡µï¼ˆä½¿ç”¨ navigateToï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">goToDetail</span> = (<span class="hljs-params">id</span>) =&gt; {
  uni.<span class="hljs-title function_">navigateTo</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">`/pages/detail/detail?id=<span class="hljs-subst">${id}</span>`</span>  <span class="hljs-comment">// å¯ä»¥è¿”å›åˆ—è¡¨é¡µ</span>
  })
}

<span class="hljs-comment">// âœ… æ­£ç¡®ç¤ºä¾‹ 4ï¼šè¯¦æƒ…é¡µéœ€è¦ç›´æ¥è¿”å›è¡¨å•é¡µ</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">goToDetail</span> = (<span class="hljs-params">id</span>) =&gt; {
  uni.<span class="hljs-title function_">navigateTo</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">`/pages/detail/detail?id=<span class="hljs-subst">${id}</span>`</span>
  })
}

<span class="hljs-comment">// åœ¨è¯¦æƒ…é¡µè¿”å›æ—¶ï¼Œå¦‚æœéœ€è¦è·³è¿‡åˆ—è¡¨é¡µ</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">goBack</span> = (<span class="hljs-params"/>) =&gt; {
  uni.<span class="hljs-title function_">navigateBack</span>({
    <span class="hljs-attr">delta</span>: <span class="hljs-number">2</span>  <span class="hljs-comment">// è¿”å›ä¸Šä¸¤é¡µï¼ˆè·³è¿‡åˆ—è¡¨é¡µï¼‰</span>
  })
}
</code></pre>
<p><strong>æœ€ä½³å®è·µå»ºè®®</strong>ï¼š</p>
<ol>
<li><strong>è¡¨å•æäº¤å</strong> â†’ ä½¿ç”¨ <code>redirectTo</code> æˆ– <code>switchTab</code>ï¼ˆå¦‚æœæ˜¯ tabBar é¡µé¢ï¼‰</li>
<li><strong>éœ€è¦è¿”å›çš„é¡µé¢</strong> â†’ ä½¿ç”¨ <code>navigateTo</code>ï¼ˆå¦‚è¯¦æƒ…é¡µã€ç¼–è¾‘é¡µï¼‰</li>
<li><strong>ä¸éœ€è¦è¿”å›çš„é¡µé¢</strong> â†’ ä½¿ç”¨ <code>redirectTo</code>ï¼ˆå¦‚ç™»å½•åè·³è½¬é¦–é¡µï¼‰</li>
<li><strong>æ¸…ç©ºé¡µé¢æ ˆ</strong> â†’ ä½¿ç”¨ <code>reLaunch</code>ï¼ˆå¦‚é€€å‡ºç™»å½•ï¼‰</li>
<li><strong>æ§åˆ¶é¡µé¢æ ˆæ·±åº¦</strong> â†’ é¿å…è¶…è¿‡ 10 å±‚é¡µé¢æ ˆï¼ŒåŠæ—¶ä½¿ç”¨ <code>redirectTo</code> æ›¿æ¢ä¸éœ€è¦è¿”å›çš„é¡µé¢</li>
</ol>
<p><strong>é¡µé¢æ ˆæ·±åº¦æ£€æŸ¥</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ£€æŸ¥å½“å‰é¡µé¢æ ˆæ·±åº¦</span>
<span class="hljs-keyword">const</span> pages = <span class="hljs-title function_">getCurrentPages</span>()
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å½“å‰é¡µé¢æ ˆæ·±åº¦:'</span>, pages.<span class="hljs-property">length</span>)

<span class="hljs-comment">// å¦‚æœé¡µé¢æ ˆè¿‡æ·±ï¼Œè€ƒè™‘ä½¿ç”¨ redirectTo</span>
<span class="hljs-keyword">if</span> (pages.<span class="hljs-property">length</span> &gt;= <span class="hljs-number">10</span>) {
  uni.<span class="hljs-title function_">redirectTo</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/target/target'</span>
  })
} <span class="hljs-keyword">else</span> {
  uni.<span class="hljs-title function_">navigateTo</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/target/target'</span>
  })
}
</code></pre>
<h3 data-id="heading-28">æ€»ç»“</h3>
<p>uni-app çš„è·¯ç”±ç³»ç»Ÿæä¾›äº†çµæ´»ä¸”å¼ºå¤§çš„é¡µé¢å¯¼èˆªèƒ½åŠ›ã€‚æ­£ç¡®ç†è§£å’Œä½¿ç”¨è¿™äº› APIï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ï¼š</p>
<ol>
<li><strong>ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ</strong>ï¼šé€‰æ‹©åˆé€‚çš„è·³è½¬æ–¹å¼å’ŒåŠ¨ç”»æ•ˆæœ</li>
<li><strong>ç®¡ç†é¡µé¢æ ˆ</strong>ï¼šåˆç†æ§åˆ¶é¡µé¢å±‚çº§ï¼Œé¿å…å†…å­˜é—®é¢˜</li>
<li><strong>å®ç°é¡µé¢é€šä¿¡</strong>ï¼šé€šè¿‡ EventChannel å®ç°é¡µé¢é—´çš„æ•°æ®ä¼ é€’</li>
<li><strong>æå‡å¼€å‘æ•ˆç‡</strong>ï¼šä½¿ç”¨åˆé€‚çš„è·¯ç”±æ–¹æ³•ç®€åŒ–ä»£ç é€»è¾‘</li>
</ol>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå»ºè®®æ ¹æ®å…·ä½“åœºæ™¯é€‰æ‹©åˆé€‚çš„è·¯ç”±æ–¹æ³•ï¼š</p>
<ul>
<li><strong>éœ€è¦è¿”å›</strong> â†’ ä½¿ç”¨ <code>navigateTo</code></li>
<li><strong>ä¸éœ€è¦è¿”å›</strong> â†’ ä½¿ç”¨ <code>redirectTo</code></li>
<li><strong>æ¸…ç©ºæ‰€æœ‰é¡µé¢</strong> â†’ ä½¿ç”¨ <code>reLaunch</code></li>
<li><strong>è·³è½¬ tabBar</strong> â†’ ä½¿ç”¨ <code>switchTab</code></li>
<li><strong>è¿”å›ä¸Šä¸€é¡µ</strong> â†’ ä½¿ç”¨ <code>navigateBack</code></li>
</ul>
<p>å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ uni-app çš„è·¯ç”±ç³»ç»Ÿï¼</p>
<hr/>
<p><strong>å‚è€ƒæ–‡æ¡£</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Funiapp.dcloud.net.cn%2Fapi%2Frouter.html" target="_blank" title="https://uniapp.dcloud.net.cn/api/router.html" ref="nofollow noopener noreferrer">uni-app é¡µé¢è·¯ç”±æ–‡æ¡£</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Šuni-appè·¨å¹³å°å¼€å‘å®Œå…¨æŒ‡å—ã€‹- 06 - é¡µé¢è·¯ç”±ä¸å¯¼èˆª]]></title>    <link>https://juejin.cn/post/7570191839594053695</link>    <guid>https://juejin.cn/post/7570191839594053695</guid>    <pubDate>2025-11-10T02:44:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570191839594053695" data-draft-id="7569946369991262271" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Šuni-appè·¨å¹³å°å¼€å‘å®Œå…¨æŒ‡å—ã€‹- 06 - é¡µé¢è·¯ç”±ä¸å¯¼èˆª"/> <meta itemprop="keywords" content="å‰ç«¯,uni-app,Vue.js"/> <meta itemprop="datePublished" content="2025-11-10T02:44:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="QuantumLeapä¸¶"/> <meta itemprop="url" content="https://juejin.cn/user/1767603104125197"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Šuni-appè·¨å¹³å°å¼€å‘å®Œå…¨æŒ‡å—ã€‹- 06 - é¡µé¢è·¯ç”±ä¸å¯¼èˆª
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1767603104125197/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    QuantumLeapä¸¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T02:44:41.000Z" title="Mon Nov 10 2025 02:44:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ·±å…¥ç†è§£é¡µé¢è·¯ç”±ä¸å¯¼èˆª</h2>
<blockquote>
<p>å¦‚æœæŠŠç»„ä»¶æ¯”ä½œåº”ç”¨çš„â€œè¡€è‚‰â€ï¼Œé‚£ä¹ˆè·¯ç”±å¯¼èˆªå°±æ˜¯åº”ç”¨çš„â€œç­‹éª¨â€ã€‚ä»–å®šä¹‰äº†ç”¨æˆ·åœ¨åº”ç”¨ä¸­çš„è·³è½¬è·¯å¾„ï¼Œå†³å®šäº†åº”ç”¨çš„æµç¨‹å’Œç”¨æˆ·ä½“éªŒã€‚æ¯”å¦‚å½“ä½ ç‚¹å‡»å•†å“åˆ—è¡¨ä¸­çš„ä¸€ä»¶å•†å“ï¼Œå®ƒæ˜¯å¦‚ä½•å¹³æ»‘åœ°è·³è½¬åˆ°å•†å“è¯¦æƒ…é¡µçš„ï¼Ÿå½“ä½ å®Œæˆè®¢å•æ”¯ä»˜åï¼Œåˆæ˜¯å¦‚ä½•ä¸€æ­¥æ­¥è¿”å›é¦–é¡µçš„ï¼Ÿè¿™èƒŒåçš„ä¸€åˆ‡ï¼Œéƒ½ç¦»ä¸å¼€ä¸€ä¸ªæ ¸å¿ƒæœºåˆ¶â€”â€”<strong>è·¯ç”±ä¸å¯¼èˆª</strong>ã€‚</p>
</blockquote>
<p><strong>æœ¬ç¯‡å­¦ä¹ è·¯å¾„ï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[é¡µé¢è·¯ç”±ä¸å¯¼èˆª] --&gt; B[é¡µé¢æ ˆç®¡ç†åŸç†]
    A --&gt; C[è·¯ç”±è·³è½¬æ–¹å¼å¯¹æ¯”]
    A --&gt; D[ä¼ å‚ä¸æ¥æ”¶å‚æ•°]
    A --&gt; E[å¯¼èˆªæ è‡ªå®šä¹‰é…ç½®]

    B --&gt; B1[æ ˆæ•°æ®ç»“æ„&lt;br&gt;LIFOåè¿›å…ˆå‡º]
    B --&gt; B2[getCurrentPages&lt;br&gt;è·å–é¡µé¢æ ˆå®ä¾‹]

    C --&gt; C1[navigateTo&lt;br&gt;ä¿ç•™å½“å‰é¡µé¢è·³è½¬]
    C --&gt; C2[redirectTo&lt;br&gt;å…³é—­å½“å‰é¡µé¢è·³è½¬]
    C --&gt; C3[switchTab&lt;br&gt;è·³è½¬tabBaré¡µé¢]
    C --&gt; C4[reLaunch&lt;br&gt;å…³é—­æ‰€æœ‰é¡µé¢è·³è½¬]
    C --&gt; C5[navigateBack&lt;br&gt;è¿”å›ä¸Šä¸€é¡µé¢]

    D --&gt; D1[URLæ‹¼æ¥ä¼ å‚&lt;br&gt;?key=value&amp;key2=value2]
    D --&gt; D2[onLoadç”Ÿå‘½å‘¨æœŸæ¥æ”¶&lt;br&gt;optionså‚æ•°å¯¹è±¡]

    E --&gt; E1[pages.jsonå…¨å±€é…ç½®&lt;br&gt;navigationBarTitleTextç­‰]
    E --&gt; E2[é¡µé¢çº§é…ç½®&lt;br&gt;è¦†ç›–å…¨å±€é…ç½®]
    E --&gt; E3[åŠ¨æ€ä¿®æ”¹&lt;br&gt;setNavigationBarTitle]

    %% è¿æ¥å…³ç³»
    B2 -.-&gt; C1
    B2 -.-&gt; C5
    D1 -.-&gt; C1
    D1 -.-&gt; C2
    D1 -.-&gt; C3
    D1 -.-&gt; C4
    E3 -.-&gt; D2

    %% æ ·å¼å®šä¹‰
    classDef root fill:#1a2a6c,color:#fff,stroke:#1a2a6c,stroke-width:2px
    classDef level1 fill:#b21f1f,color:#fff,stroke:#b21f1f
    classDef level2 fill:#fdbb2d,color:#333,stroke:#fdbb2d
    classDef level3 fill:#4CAF50,color:#fff,stroke:#4CAF50
    
    class A root
    class B,C,D,E level1
    class B1,B2,C1,C2,C3,C4,C5,D1,D2,E1,E2,E3 level2
</code></pre>
<hr/>
<h3 data-id="heading-1">ä¸€ã€ åº”ç”¨å¯¼èˆªçš„åº•å±‚é€»è¾‘ï¼šé¡µé¢æ ˆç®¡ç†</h3>
<p>åœ¨æ·±å…¥å„ç§è·³è½¬APIä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆç†è§£ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µâ€”â€”<strong>é¡µé¢æ ˆï¼ˆPage Stackï¼‰</strong>ã€‚è¿™æ˜¯åé¢æ‰€è®²å†…å®¹çš„åŸºç¡€ã€‚</p>
<h4 data-id="heading-2">1.1 ä»€ä¹ˆæ˜¯é¡µé¢æ ˆï¼Ÿ</h4>
<p>ä¹‹å‰è®²è§£Flutteræ—¶å·²ç»æåˆ°äº†ï¼Œé¡µé¢æ ˆå°±å¥½æ¯”ä¸€æ‘ä¹¦ã€‚</p>
<ul>
<li><strong>æ–°æ‰“å¼€ä¸€æœ¬ä¹¦ï¼ˆé¡µé¢ï¼‰</strong>ï¼Œä½ å°±æŠŠå®ƒ<strong>å‹ï¼ˆPushï¼‰</strong> åœ¨è¿™æ‘ä¹¦çš„æœ€ä¸Šé¢ã€‚</li>
<li>ä½ æƒ³çœ‹ä¸‹é¢é‚£æœ¬ä¹¦ï¼Œå°±å¾—æŠŠæœ€ä¸Šé¢è¿™æœ¬<strong>æ‹¿æ‰ï¼ˆPopï¼‰</strong>ï¼Œæ‰èƒ½çœ‹åˆ°å®ƒã€‚</li>
</ul>
<p>åœ¨uni-appä¸­ï¼Œè¿™ä¸ªâ€œæ”¾ä¹¦â€å’Œâ€œæ‹¿ä¹¦â€çš„è¿‡ç¨‹ï¼Œå°±æ˜¯ç”±é¡µé¢æ ˆæ¥ç®¡ç†çš„ã€‚å®ƒæ˜¯ä¸€ä¸ªéµå¾ª <strong>â€œåè¿›å…ˆå‡ºï¼ˆLIFO - Last In, First Outï¼‰â€</strong> åŸåˆ™çš„æ•°æ®ç»“æ„ã€‚</p>
<ul>
<li><strong>å‹æ ˆï¼ˆPushï¼‰</strong>ï¼šæ¯å½“ä½¿ç”¨ç±»ä¼¼ <code>uni.navigateTo</code> çš„æ–¹æ³•æ‰“å¼€ä¸€ä¸ªæ–°é¡µé¢æ—¶ï¼Œè¿™ä¸ªæ–°é¡µé¢å°±ä¼šè¢«å‹å…¥æ ˆé¡¶ï¼Œæˆä¸º<strong>æ´»åŠ¨é¡µé¢ï¼ˆActive Pageï¼‰</strong>ï¼Œå±•ç¤ºç»™ç”¨æˆ·ã€‚</li>
<li><strong>å‡ºæ ˆï¼ˆPopï¼‰</strong>ï¼šæ¯å½“ç”¨æˆ·ç‚¹å‡»å·¦ä¸Šè§’çš„è¿”å›æŒ‰é’®æˆ–è°ƒç”¨ <code>uni.navigateBack</code> æ–¹æ³•æ—¶ï¼Œæ ˆé¡¶çš„é¡µé¢å°±ä¼šè¢«å¼¹å‡ºï¼Œæ­¤æ—¶ï¼Œä¸‹é¢çš„é¡µé¢å°±ä¼šæˆä¸ºæ–°çš„æ´»åŠ¨é¡µé¢ï¼Œå‘ˆç°ç»™ç”¨æˆ·ã€‚</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    subgraph A [åˆå§‹çŠ¶æ€]
        direction TB
        subgraph StackA [é¡µé¢æ ˆ]
            A1[é¡µé¢A]:::top
        end
        StateA[ç”¨æˆ·æ­£ viewing é¡µé¢A]
    end

    A --&gt;|ç”¨æˆ·æ‰§è¡Œ uni.navigateTo&lt;br&gt;è·³è½¬åˆ° é¡µé¢B| B

    subgraph B [navigateTo å]
        direction TB
        subgraph StackB [é¡µé¢æ ˆ]
            B1[é¡µé¢B]:::top
            B2[é¡µé¢A]
        end
        StateB[ç”¨æˆ·æ­£ viewing é¡µé¢B]
    end

    B --&gt;|ç”¨æˆ·æ‰§è¡Œ uni.navigateTo&lt;br&gt;è·³è½¬åˆ° é¡µé¢C| C

    subgraph C [å†æ¬¡ navigateTo å]
        direction TB
        subgraph StackC [é¡µé¢æ ˆ]
            C1[é¡µé¢C]:::top
            C2[é¡µé¢B]
            C3[é¡µé¢A]
        end
        StateC[ç”¨æˆ·æ­£ viewing é¡µé¢C]
    end

    C --&gt;|ç”¨æˆ·ç‚¹å‡»è¿”å›æŒ‰é’®&lt;br&gt;æˆ–æ‰§è¡Œ uni.navigateBack| D

    subgraph D [navigateBack å]
        direction TB
        subgraph StackD [é¡µé¢æ ˆ]
            D1[é¡µé¢B]:::top
            D2[é¡µé¢A]
        end
        StateD[ç”¨æˆ·æ­£ viewing é¡µé¢B&lt;br&gt;é¡µé¢Cå·²è¢«é”€æ¯]
    end

    classDef top fill:#e1f5fe;
</code></pre>
<p><strong>ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</strong>
<code>é¦–é¡µï¼ˆIndexï¼‰</code> -&gt; <code>å•†å“åˆ—è¡¨ï¼ˆListï¼‰</code> -&gt; <code>å•†å“è¯¦æƒ…ï¼ˆDetailï¼‰</code></p>
<p>è¿™ä¸ªè¿‡ç¨‹çš„æ ˆå˜åŒ–æ˜¯ï¼š</p>
<ol>
<li>å¯åŠ¨Appï¼šæ ˆ = <code>[Index]</code></li>
<li>ä»é¦–é¡µè·³è½¬åˆ°åˆ—è¡¨é¡µï¼šæ ˆ = <code>[Index, List]</code> ï¼ˆListè¢«Pushå…¥æ ˆï¼‰</li>
<li>ä»åˆ—è¡¨é¡µè·³è½¬åˆ°è¯¦æƒ…é¡µï¼šæ ˆ = <code>[Index, List, Detail]</code> ï¼ˆDetailè¢«Pushå…¥æ ˆï¼‰</li>
<li>ä»è¯¦æƒ…é¡µè¿”å›ï¼šæ ˆ = <code>[Index, List]</code> ï¼ˆDetailè¢«Popå‡ºæ ˆï¼‰</li>
<li>å†æ¬¡è¿”å›ï¼šæ ˆ = <code>[Index]</code> ï¼ˆListè¢«Popå‡ºæ ˆï¼‰</li>
</ol>
<h4 data-id="heading-3">1.2 å¦‚ä½•è·å–å’Œç®¡ç†é¡µé¢æ ˆï¼Ÿ</h4>
<p>uni-app æä¾›äº†ä¸€ä¸ªå…¨å±€çš„ <strong><code>getCurrentPages()</code></strong> æ–¹æ³•æ¥è·å–å½“å‰é¡µé¢æ ˆçš„å®ä¾‹æ•°ç»„ã€‚</p>
<p>è¿™ä¸ªæ•°ç»„ï¼š</p>
<ul>
<li><strong>ç¬¬ä¸€ä¸ªå…ƒç´ </strong>æ˜¯æ ˆåº•é¡µé¢ï¼ˆé€šå¸¸æ˜¯åº”ç”¨çš„é¦–é¡µï¼‰ã€‚</li>
<li><strong>æœ€åä¸€ä¸ªå…ƒç´ </strong>æ˜¯æ ˆé¡¶é¡µé¢ï¼ˆå½“å‰å±•ç¤ºç»™ç”¨æˆ·çš„é¡µé¢ï¼‰ã€‚</li>
</ul>
<p><strong>åœ¨ä»»ä½•é¡µé¢ä¸­ï¼Œä½ éƒ½å¯ä»¥è¿™æ ·è·å–æ ˆä¿¡æ¯ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨å•†å“è¯¦æƒ…é¡µï¼ˆDetail.vueï¼‰çš„ methods ä¸­</span>
<span class="hljs-title function_">checkPageStack</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// è·å–å½“å‰é¡µé¢æ ˆçš„å®ä¾‹æ•°ç»„</span>
  <span class="hljs-keyword">const</span> pages = <span class="hljs-title function_">getCurrentPages</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å½“å‰é¡µé¢æ ˆï¼š'</span>, pages);

  <span class="hljs-comment">// è·å–æ ˆé¡¶é¡µé¢å®ä¾‹</span>
  <span class="hljs-keyword">const</span> currentPage = pages[pages.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>];
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å½“å‰é¡µé¢å®ä¾‹ï¼š'</span>, currentPage);

  <span class="hljs-comment">// è·å–æ ˆåº•é¡µé¢å®ä¾‹ï¼ˆä¸€èˆ¬æ¥è¯´æ˜¯é¦–é¡µï¼‰</span>
  <span class="hljs-keyword">const</span> firstPage = pages[<span class="hljs-number">0</span>];
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é¦–é¡µå®ä¾‹ï¼š'</span>, firstPage);

  <span class="hljs-comment">// ç”šè‡³å¯ä»¥è·å–ä¸Šä¸€ä¸ªé¡µé¢çš„å®ä¾‹ï¼Œå¹¶ç›´æ¥è°ƒç”¨å…¶æ–¹æ³•æˆ–æ•°æ®</span>
  <span class="hljs-keyword">const</span> prevPage = pages[pages.<span class="hljs-property">length</span> - <span class="hljs-number">2</span>]; <span class="hljs-comment">// ä¸Šä¸€ä¸ªé¡µé¢</span>
  <span class="hljs-keyword">if</span> (prevPage) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¸Šä¸€ä¸ªé¡µé¢ï¼š'</span>, prevPage);
    <span class="hljs-comment">// æ³¨æ„ï¼šè¿™æ˜¯ä¸€ç§é¡µé¢é—´é€šä¿¡çš„æ–¹å¼ï¼Œä½†éœ€è°¨æ…ä½¿ç”¨ï¼Œç¡®ä¿prevPageå­˜åœ¨ä¸”ç»“æ„ç¨³å®š</span>
    <span class="hljs-comment">// prevPage.someData = 'æ¥è‡ªè¯¦æƒ…é¡µçš„æ•°æ®'; // ç›´æ¥ä¿®æ”¹ä¸Šä¸€ä¸ªé¡µé¢çš„æ•°æ®</span>
    <span class="hljs-comment">// prevPage.someMethod(); // ç›´æ¥è°ƒç”¨ä¸Šä¸€ä¸ªé¡µé¢çš„æ–¹æ³•</span>
  }
}
</code></pre>
<p><strong><code>getCurrentPages()</code> çš„åº”ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>åœºæ™¯1ï¼šåœ¨ä»»æ„é¡µé¢å¿«é€Ÿè¿”å›é¦–é¡µã€‚</strong>
å‡è®¾ä½ åœ¨ä¸€ä¸ªå¾ˆæ·±çš„é¡µé¢å±‚çº§ï¼ˆæ¯”å¦‚<code>é¦–é¡µ-&gt;åˆ†ç±»-&gt;å•†å“åˆ—è¡¨-&gt;å•†å“è¯¦æƒ…-&gt;è®¢å•ç¡®è®¤-&gt;æ”¯ä»˜ç»“æœ</code>ï¼‰ï¼Œæƒ³æä¾›ä¸€ä¸ªâ€œä¸€é”®å›é¦–é¡µâ€çš„æŒ‰é’®ã€‚
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">goHome</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// è·å–é¡µé¢æ ˆ</span>
  <span class="hljs-keyword">const</span> pages = <span class="hljs-title function_">getCurrentPages</span>();
  <span class="hljs-comment">// å¦‚æœæ ˆé•¿åº¦å¤§äº1ï¼Œè¯´æ˜ä¸åœ¨é¦–é¡µï¼Œå¯ä»¥è¿”å›</span>
  <span class="hljs-keyword">if</span> (pages.<span class="hljs-property">length</span> &gt; <span class="hljs-number">1</span>) {
    <span class="hljs-comment">// uni.reLaunch ä¼šå…³é—­æ‰€æœ‰é¡µé¢ï¼Œæ‰“å¼€é¦–é¡µ</span>
    uni.<span class="hljs-title function_">reLaunch</span>({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/index/index'</span>
    });
  } <span class="hljs-keyword">else</span> {
    uni.<span class="hljs-title function_">showToast</span>({
      <span class="hljs-attr">title</span>: <span class="hljs-string">'å·²ç»åœ¨é¦–é¡µäº†'</span>,
      <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span>
    });
  }
}
</code></pre>
</li>
<li><strong>åœºæ™¯2ï¼šè·¨é¡µé¢ç›´æ¥é€šä¿¡ã€‚</strong>
ä»è¯¦æƒ…é¡µè¿”å›åˆ—è¡¨é¡µæ—¶ï¼Œç›´æ¥åˆ·æ–°åˆ—è¡¨é¡µçš„æ•°æ®ã€‚
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨è¯¦æƒ…é¡µï¼ˆDetail.vueï¼‰</span>
<span class="hljs-title function_">saveAndBack</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// è·å–ä¸Šä¸€ä¸ªé¡µé¢ï¼ˆåˆ—è¡¨é¡µï¼‰çš„å®ä¾‹</span>
  <span class="hljs-keyword">const</span> pages = <span class="hljs-title function_">getCurrentPages</span>();
  <span class="hljs-keyword">const</span> listPage = pages[pages.<span class="hljs-property">length</span> - <span class="hljs-number">2</span>];
  <span class="hljs-comment">// è°ƒç”¨åˆ—è¡¨é¡µå®šä¹‰çš„åˆ·æ–°æ•°æ®æ–¹æ³•</span>
  <span class="hljs-keyword">if</span> (listPage &amp;&amp; listPage.<span class="hljs-property">refreshList</span>) {
    listPage.<span class="hljs-title function_">refreshList</span>(); 
  }
  <span class="hljs-comment">// è¿”å›</span>
  uni.<span class="hljs-title function_">navigateBack</span>();
}
</code></pre>
</li>
</ul>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šç›´æ¥é€šè¿‡é¡µé¢å®ä¾‹æ“ä½œå…¶ä»–é¡µé¢çš„æ•°æ®å’Œæ–¹æ³•è™½ç„¶å¼ºå¤§ï¼Œä½†è€¦åˆæ€§è¾ƒé«˜ï¼Œéœ€è¦ä½ éå¸¸æ¸…æ¥šé¡µé¢æ ˆçš„ç»“æ„ã€‚åœ¨å¤æ‚çš„é¡¹ç›®ä¸­ï¼Œæ›´æ¨èä½¿ç”¨ <strong>Vuexï¼ˆçŠ¶æ€ç®¡ç†ï¼‰</strong> æˆ– <strong>å…¨å±€äº‹ä»¶æ€»çº¿ï¼ˆGlobal Event Busï¼‰</strong> æ¥è¿›è¡Œè§£è€¦çš„é¡µé¢é€šä¿¡ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-4">äºŒã€ è·¯ç”±è·³è½¬æ–¹å¼</h3>
<p>uni-app æä¾›äº†5ç§æ ¸å¿ƒçš„è·¯ç”±è·³è½¬APIï¼Œå®ƒä»¬å¯¹åº”ç€ä¸åŒçš„é¡µé¢æ ˆæ“ä½œå’Œä¸šåŠ¡åœºæ™¯ã€‚é€‰å¯¹äº†APIï¼Œç”¨æˆ·ä½“éªŒæ‰èƒ½æµç•…è‡ªç„¶ã€‚</p>









































<table><thead><tr><th align="left">æ–¹æ³•</th><th align="left">ä½œç”¨</th><th align="left">é¡µé¢æ ˆå˜åŒ–</th><th align="left">é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td align="left"><code>uni.navigateTo</code></td><td align="left">ä¿ç•™å½“å‰é¡µé¢ï¼Œè·³è½¬åˆ°æ–°é¡µé¢</td><td align="left"><strong>Push</strong>æ–°é¡µé¢</td><td align="left">æœ€å¸¸ç”¨çš„è·³è½¬ï¼Œå¦‚åˆ—è¡¨-&gt;è¯¦æƒ…</td></tr><tr><td align="left"><code>uni.redirectTo</code></td><td align="left">å…³é—­å½“å‰é¡µé¢ï¼Œè·³è½¬åˆ°æ–°é¡µé¢</td><td align="left"><strong>Replace</strong>å½“å‰é¡µé¢</td><td align="left">ä¸­æ–­å½“å‰æµç¨‹ï¼Œå¦‚ç™»å½•é¡µè·³é¦–é¡µ</td></tr><tr><td align="left"><code>uni.reLaunch</code></td><td align="left">å…³é—­æ‰€æœ‰é¡µé¢ï¼Œæ‰“å¼€æ–°é¡µé¢</td><td align="left">å…³é—­æ‰€æœ‰æ—§é¡µé¢ï¼Œ<strong>Open</strong>æ–°é¡µé¢</td><td align="left">åº”ç”¨é‡å¯ï¼Œå¦‚åˆ‡æ¢ç”¨æˆ·èº«ä»½</td></tr><tr><td align="left"><code>uni.switchTab</code></td><td align="left">è·³è½¬åˆ° tabBar é¡µé¢</td><td align="left">å…³é—­æ‰€æœ‰étabBaré¡µé¢</td><td align="left">åˆ‡æ¢åº•éƒ¨å¯¼èˆª</td></tr><tr><td align="left"><code>uni.navigateBack</code></td><td align="left">è¿”å›ä¸Šä¸€é¡µé¢æˆ–å¤šæ­¥</td><td align="left"><strong>Pop</strong>å‡ºä¸€ä¸ªæˆ–å¤šä¸ªé¡µé¢</td><td align="left">è¿”å›ä¸Šä¸€çº§æˆ–é¦–é¡µ</td></tr></tbody></table>
<p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä»£ç æ¥è¯¦ç»†è®²è¿°ã€‚</p>
<h4 data-id="heading-5">2.1 <code>uni.navigateTo</code></h4>
<p>è¿™æ˜¯ä½ <strong>æœ€å¸¸ç”¨</strong>çš„è·³è½¬æ–¹å¼ã€‚å®ƒä¼šåœ¨é¡µé¢æ ˆä¸­æ–°å¢ä¸€ä¸ªè®°å½•ï¼ŒåŸé¡µé¢ä¼šè¢«ä¿ç•™ã€‚</p>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>æ–°é¡µé¢ä»å³ä¾§æ»‘å…¥å±å¹•ã€‚</li>
<li>åŸé¡µé¢ä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œä¸ä¼šé”€æ¯ã€‚</li>
<li>å·¦ä¸Šè§’è‡ªåŠ¨å‡ºç°â€œè¿”å›â€ç®­å¤´ã€‚</li>
</ul>
<p><strong>å…·ä½“ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨åˆ—è¡¨é¡µï¼ˆList.vueï¼‰ä¸­è·³è½¬åˆ°è¯¦æƒ…é¡µï¼ˆDetail.vueï¼‰</span>
<span class="hljs-title function_">goToDetail</span>(<span class="hljs-params">productId</span>) {
  <span class="hljs-comment">// ä½¿ç”¨ uni.navigateTo è¿›è¡Œè·³è½¬</span>
  uni.<span class="hljs-title function_">navigateTo</span>({
    <span class="hljs-comment">// ç›®æ ‡é¡µé¢çš„è·¯å¾„ï¼Œæ”¯æŒä¼ é€’å‚æ•°</span>
    <span class="hljs-attr">url</span>: <span class="hljs-string">`/pages/detail/detail?id=<span class="hljs-subst">${productId}</span>&amp;name=test`</span>,
    <span class="hljs-comment">// è·³è½¬æˆåŠŸå›è°ƒ</span>
    <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·³è½¬æˆåŠŸï¼'</span>, res);
    },
    <span class="hljs-comment">// è·³è½¬å¤±è´¥å›è°ƒ</span>
    <span class="hljs-attr">fail</span>: <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·³è½¬å¤±è´¥ï¼š'</span>, err);
      uni.<span class="hljs-title function_">showToast</span>({
        <span class="hljs-attr">title</span>: <span class="hljs-string">'è·³è½¬å¤±è´¥ï¼Œè¯·é‡è¯•'</span>,
        <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span>
      });
    },
    <span class="hljs-comment">// è·³è½¬ç»“æŸçš„å›è°ƒ</span>
    <span class="hljs-attr">complete</span>: <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·³è½¬åŠ¨ä½œå®Œæˆï¼Œæ— è®ºæˆåŠŸè¿˜æ˜¯å¤±è´¥éƒ½ä¼šè°ƒç”¨'</span>);
    }
  });
}
</code></pre>
<p><strong>å¯¹åº”çš„é¡µé¢æ ˆå˜åŒ–è¿‡ç¨‹å›¾è§£ï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    Start[åˆ—è¡¨é¡µ List] --&gt;|æ‰§è¡Œ&lt;br&gt;uni.navigateTo| Action[å°†è¯¦æƒ…é¡µ Detail Push å…¥æ ˆ]
    Action --&gt; Result[æ ˆå˜ä¸º: Index, List, Detail]
    Result --&gt; View[ç”¨æˆ·çœ‹åˆ° Detail é¡µ&lt;br&gt;List è¢«ä¿ç•™åœ¨æ ˆä¸­]
</code></pre>
<blockquote>
<p><strong>é¿å‘</strong>ï¼š<code>navigateTo</code> åªèƒ½ç”¨äºè·³è½¬åˆ°<strong>é tabBar é¡µé¢</strong>ã€‚è·³è½¬tabBaré¡µé¢è¯·ä½¿ç”¨ <code>uni.switchTab</code>ã€‚</p>
</blockquote>
<h4 data-id="heading-6">2.2 <code>uni.redirectTo</code></h4>
<p>æœ‰æ—¶ï¼Œä½ å¸Œæœ›ç”¨æˆ·è·³è½¬åˆ°æ–°é¡µé¢åï¼Œä¸èƒ½å†è¿”å›åŸé¡µé¢ã€‚è¿™æ—¶å°±éœ€è¦ <code>redirectTo</code>ã€‚å®ƒç”¨æ–°é¡µé¢<strong>æ›¿æ¢</strong>å½“å‰é¡µé¢ï¼Œå½“å‰é¡µé¢ä¼šè¢«é”€æ¯ã€‚</p>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>å½“å‰é¡µé¢è¢«å…³é—­ï¼ˆå‡ºæ ˆï¼‰ã€‚</li>
<li>æ–°é¡µé¢åœ¨å½“å‰é¡µçš„ä½ç½®æ‰“å¼€ã€‚</li>
<li>å·¦ä¸Šè§’<strong>ä¸ä¼š</strong>å‡ºç°æŒ‡å‘åŸé¡µé¢çš„è¿”å›ç®­å¤´ã€‚</li>
</ul>
<p><strong>å…·ä½“ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨ splash é¡µæˆ–ç™»å½•é¡µï¼Œåº”ç”¨å¯åŠ¨ååˆ¤æ–­ç”¨æˆ·çŠ¶æ€</span>
<span class="hljs-title function_">onLoad</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç™»å½•</span>
  <span class="hljs-keyword">const</span> isLoggedIn = <span class="hljs-title function_">checkLoginStatus</span>(); <span class="hljs-comment">// å‡è®¾çš„æ£€æŸ¥æ–¹æ³•</span>

  <span class="hljs-keyword">if</span> (isLoggedIn) {
    <span class="hljs-comment">// å¦‚æœå·²ç™»å½•ï¼Œç›´æ¥é‡å®šå‘åˆ°é¦–é¡µï¼Œå¹¶ä¸”ä¸èƒ½è¿”å›åˆ°è¿™ä¸ªsplashé¡µ</span>
    uni.<span class="hljs-title function_">redirectTo</span>({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/index/index'</span>
    });
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// å¦‚æœæœªç™»å½•ï¼Œè·³è½¬åˆ°ç™»å½•é¡µ</span>
    uni.<span class="hljs-title function_">navigateTo</span>({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/login/login'</span>
    });
  }
}

<span class="hljs-comment">// åœ¨ç™»å½•é¡µï¼ˆLogin.vueï¼‰ï¼Œç™»å½•æˆåŠŸå</span>
<span class="hljs-title function_">handleLoginSuccess</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ç™»å½•æˆåŠŸåï¼Œç”¨é¦–é¡µæ›¿æ¢æ‰ç™»å½•é¡µï¼Œç”¨æˆ·æ— æ³•å†è¿”å›åˆ°ç™»å½•é¡µ</span>
  uni.<span class="hljs-title function_">redirectTo</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/index/index'</span>
  });
}
</code></pre>
<p><strong>å¯¹åº”çš„é¡µé¢æ ˆå˜åŒ–ï¼š</strong></p>
<ul>
<li>åŸæ ˆï¼š<code>[Splash]</code></li>
<li>æ‰§è¡Œ <code>redirectTo(Home)</code> åï¼Œæ–°æ ˆï¼š<code>[Home]</code> ï¼ˆSplashè¢«æ›¿æ¢æ‰äº†ï¼‰</li>
</ul>
<h4 data-id="heading-7">2.3 <code>uni.reLaunch</code></h4>
<p>è¿™ä¸ªAPIä¼šå…³é—­æ‰€æœ‰å·²æ‰“å¼€çš„é¡µé¢ï¼Œç„¶åæ‰“å¼€ä¸€ä¸ªæ–°çš„é¡µé¢ã€‚ç›¸å½“äºé‡å¯äº†ä¸€æ¬¡åº”ç”¨ã€‚</p>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li><strong>æ‰€æœ‰é¡µé¢æ ˆéƒ½è¢«æ¸…ç©º</strong>ã€‚</li>
<li>ç„¶åæ‰“å¼€æŒ‡å®šçš„æ–°é¡µé¢ã€‚</li>
<li>é€‚ç”¨äºéœ€è¦å®Œå…¨é‡ç½®å¯¼èˆªçŠ¶æ€çš„åœºæ™¯ã€‚</li>
</ul>
<p><strong>å…·ä½“ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœºæ™¯1ï¼šåœ¨æ·±é¡µé¢è·¯å¾„ä¸­ï¼Œæä¾›â€œè¿”å›é¦–é¡µâ€åŠŸèƒ½ï¼Œå¹¶é‡ç½®åº”ç”¨çŠ¶æ€</span>
<span class="hljs-title function_">goHomeHard</span>(<span class="hljs-params"/>) {
  uni.<span class="hljs-title function_">reLaunch</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/index/index'</span>
  });
}

<span class="hljs-comment">// åœºæ™¯2ï¼šç”¨æˆ·åˆ‡æ¢è´¦å·åï¼Œéœ€è¦æ¸…ç©ºæ‰€æœ‰ä¹‹å‰çš„é¡µé¢çŠ¶æ€ï¼Œè¿›å…¥é¦–é¡µ</span>
<span class="hljs-title function_">afterSwitchAccount</span>(<span class="hljs-params"/>) {
  uni.<span class="hljs-title function_">reLaunch</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/index/index'</span>
  });
}
</code></pre>
<p><strong>å¯¹åº”çš„é¡µé¢æ ˆå˜åŒ–ï¼š</strong></p>
<ul>
<li>åŸæ ˆï¼š<code>[Index, List, Detail, Cart, Order, Payment]</code> ï¼ˆä¸€ä¸ªéå¸¸æ·±çš„é“¾æ¡ï¼‰</li>
<li>æ‰§è¡Œ <code>reLaunch(Home)</code> åï¼Œæ–°æ ˆï¼š<code>[Home]</code> ï¼ˆæ‰€æœ‰æ—§é¡µé¢å…¨éƒ¨è¢«é”€æ¯ï¼‰</li>
</ul>
<h4 data-id="heading-8">2.4 <code>uni.switchTab</code></h4>
<p>ç”¨äºè·³è½¬åˆ° <code>pages.json</code> ä¸­é…ç½®çš„ <code>tabBar</code> é¡µé¢ï¼Œå¹¶<strong>å…³é—­å…¶ä»–æ‰€æœ‰é tabBar é¡µé¢</strong>ã€‚</p>
<p><strong>é‡è¦ç‰¹æ€§ï¼š</strong></p>
<ul>
<li>è·³è½¬ç›®æ ‡é¡µé¢<strong>å¿…é¡»</strong>åœ¨ <code>tabBar</code> ä¸­å®šä¹‰ã€‚</li>
<li>è·³è½¬æ—¶ï¼Œä¼šæ¸…ç©ºé¡µé¢æ ˆä¸­æ‰€æœ‰çš„é tabBar é¡µé¢ã€‚</li>
<li>åœ¨Appç«¯ï¼Œç‚¹å‡» tabBar æˆ–è°ƒç”¨ <code>switchTab</code>ï¼ŒåŸ tabBar é¡µé¢çš„ <code>onShow</code> ä¼šè§¦å‘ï¼Œä½† <code>onLoad</code> ä¸ä¼šå†æ¬¡è§¦å‘ã€‚</li>
</ul>
<p><strong>å…·ä½“ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<p>æ¯”æ–¹è¯´æˆ‘ä»¬çš„ <code>pages.json</code> é…ç½®äº†é¦–é¡µï¼ˆindexï¼‰å’Œä¸ªäººä¸­å¿ƒï¼ˆprofileï¼‰ä¸¤ä¸ªtabã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"tabBar"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"list"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"pagePath"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pages/index/index"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é¦–é¡µ"</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"pagePath"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pages/profile/profile"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æˆ‘çš„"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨ä»»ä½•ä¸€ä¸ªétabBaré¡µé¢ï¼ˆå¦‚å•†å“è¯¦æƒ…é¡µ Detail.vueï¼‰æƒ³åˆ‡å›é¦–é¡µ</span>
<span class="hljs-title function_">goToIndexTab</span>(<span class="hljs-params"/>) {
  uni.<span class="hljs-title function_">switchTab</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/index/index'</span> <span class="hljs-comment">// è¿™ä¸ªé¡µé¢å¿…é¡»åœ¨ tabBar çš„ list ä¸­</span>
  });
}
</code></pre>
<p><strong>å¯¹åº”çš„é¡µé¢æ ˆå˜åŒ–ï¼š</strong></p>
<ul>
<li>åŸæ ˆï¼š<code>[Index (tab), List, Detail]</code> ï¼ˆIndexæ˜¯tabé¡µï¼Œä½†å½“å‰æ˜¾ç¤ºçš„æ˜¯Detailï¼‰</li>
<li>æ‰§è¡Œ <code>switchTab(Index)</code> åï¼Œæ–°æ ˆï¼š<code>[Index (tab)]</code> ï¼ˆListå’ŒDetailè¢«å…¨éƒ¨å…³é—­ï¼‰</li>
</ul>
<blockquote>
<p><strong>æç¤º</strong>ï¼šå¦‚æœåº”ç”¨å½“å‰å°±åœ¨ç›®æ ‡ tabBar é¡µé¢ï¼Œå†è°ƒç”¨ <code>switchTab</code> æ˜¯ä¸ä¼šè§¦å‘ä»»ä½•é¡µé¢å˜åŒ–çš„ã€‚</p>
</blockquote>
<h4 data-id="heading-9">2.5 <code>uni.navigateBack</code></h4>
<p>ç”¨äºè¿”å›ä¸Šä¸€é¡µé¢æˆ–å¤šçº§é¡µé¢ã€‚å®ƒæ˜¯å”¯ä¸€ä¸€ä¸ª<strong>ä¸æŒ‡å®šç›®æ ‡url</strong>çš„å¯¼èˆªAPIï¼Œå› ä¸ºå®ƒé»˜è®¤å°±æ˜¯å¾€å›èµ°ã€‚</p>
<p><strong>æ ¸å¿ƒå‚æ•°ï¼š<code>delta</code></strong></p>
<ul>
<li><code>delta</code>: è¡¨ç¤ºè¿”å›çš„é¡µé¢å±‚æ•°ï¼Œé»˜è®¤ä¸º <code>1</code>ï¼ˆè¿”å›ä¸Šä¸€é¡µï¼‰ã€‚</li>
</ul>
<p><strong>å…·ä½“ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. æœ€ç®€å•çš„è¿”å›ä¸Šä¸€é¡µ</span>
<span class="hljs-title function_">goBack</span>(<span class="hljs-params"/>) {
  uni.<span class="hljs-title function_">navigateBack</span>();
  <span class="hljs-comment">// ç›¸å½“äº uni.navigateBack({ delta: 1 });</span>
}

<span class="hljs-comment">// 2. è¿”å›ä¸¤çº§é¡µé¢</span>
<span class="hljs-comment">// å‡è®¾é¡µé¢æ ˆæ˜¯ [A, B, C]ï¼Œåœ¨Cé¡µé¢è°ƒç”¨æ­¤æ–¹æ³•ï¼Œå°†ç›´æ¥è¿”å›åˆ°Aé¡µé¢</span>
<span class="hljs-title function_">goBackTwoLevels</span>(<span class="hljs-params"/>) {
  uni.<span class="hljs-title function_">navigateBack</span>({
    <span class="hljs-attr">delta</span>: <span class="hljs-number">2</span>
  });
}

<span class="hljs-comment">// 3. ç»“åˆ getCurrentPages()ï¼Œå®ç°è¿”å›</span>
<span class="hljs-comment">// æ¯”æ–¹è¯´åœ¨åˆ†äº«è¿›æ¥çš„é¡µé¢ï¼Œå¦‚æœåªæœ‰ä¸€å±‚ï¼Œåˆ™è¿”å›æ—¶ç›´æ¥å›åˆ°é¦–é¡µ</span>
<span class="hljs-title function_">smartBack</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> pages = <span class="hljs-title function_">getCurrentPages</span>();
  <span class="hljs-keyword">if</span> (pages.<span class="hljs-property">length</span> === <span class="hljs-number">1</span>) {
    <span class="hljs-comment">// å¦‚æœåªæœ‰ä¸€é¡µï¼Œè¯´æ˜æ˜¯åˆ†äº«ç›´é“¾è¿›æ¥çš„ï¼Œè¿”å›é¦–é¡µ</span>
    uni.<span class="hljs-title function_">switchTab</span>({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/index/index'</span>
    });
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// å¦åˆ™æ­£å¸¸è¿”å›</span>
    uni.<span class="hljs-title function_">navigateBack</span>();
  }
}
</code></pre>
<p><strong>äº”ç§è·¯ç”±æ–¹å¼ç»¼åˆå¯¹æ¯”æµç¨‹å›¾ï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    Start[èµ·å§‹é¡µé¢æ ˆ: A, B, C&lt;br&gt;å½“å‰é¡µä¸º C]

    Start --&gt; NavigateTo[uni.navigateTo&lt;br&gt;è·³è½¬åˆ° D]
    NavigateTo --&gt; ResultNT[æ–°æ ˆ: A, B, C, D]

    Start --&gt; RedirectTo[uni.redirectTo&lt;br&gt;ç”¨ D æ›¿æ¢ C]
    RedirectTo --&gt; ResultRT[æ–°æ ˆ: A, B, D]

    Start --&gt; SwitchTab[uni.switchTab&lt;br&gt;è·³è½¬åˆ° Tabé¡µ T]
    SwitchTab --&gt; ResultST[æ–°æ ˆ: T&lt;br&gt;æ¸…ç©ºæ‰€æœ‰éTabé¡µ]

    Start --&gt; ReLaunch[uni.reLaunch&lt;br&gt;é‡å¯åˆ°æ–°é¡µ R]
    ReLaunch --&gt; ResultRL[æ–°æ ˆ: R&lt;br&gt;æ¸…ç©ºæ‰€æœ‰æ—§é¡µ]

    Start --&gt; NavigateBack[uni.navigateBack&lt;br&gt;delta=1]
    NavigateBack --&gt; ResultNB[æ–°æ ˆ: A, B&lt;br&gt;C è¢«å¼¹å‡º]
</code></pre>
<hr/>
<h3 data-id="heading-10">ä¸‰ã€ ä¼ å‚ä¸æ¥æ”¶å‚æ•°</h3>
<p>é¡µé¢è·³è½¬å¾€å¾€ä¸æ˜¯å­¤ç«‹çš„ï¼Œéœ€è¦æºå¸¦ä¿¡æ¯ã€‚æ¯”å¦‚ä»åˆ—è¡¨é¡µè·³è½¬åˆ°è¯¦æƒ…é¡µï¼Œå¿…é¡»å‘Šè¯‰è¯¦æƒ…é¡µï¼šâ€œä½ è¦å±•ç¤ºå“ªä¸ªå•†å“çš„IDâ€ã€‚</p>
<h4 data-id="heading-11">3.1 å¦‚ä½•ä¼ é€’å‚æ•°ï¼Ÿ</h4>
<p>åœ¨ <code>navigateTo</code>, <code>redirectTo</code> ç­‰æ–¹æ³•çš„ <code>url</code> ä¸­ï¼Œå¯ä»¥åƒæ™®é€šURLä¸€æ ·æ‹¼æ¥å‚æ•°ã€‚</p>
<p><strong>å…·ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨åˆ—è¡¨é¡µä¼ é€’å•†å“IDå’Œåç§°</span>
<span class="hljs-title function_">goToDetail</span>(<span class="hljs-params">product</span>) {
  uni.<span class="hljs-title function_">navigateTo</span>({
    <span class="hljs-comment">// ? å¼€å§‹ä»£è¡¨å¢åŠ äº†å‚æ•°ï¼Œå¤šä¸ªå‚æ•°ç”¨ &amp; è¿æ¥</span>
    <span class="hljs-comment">// æ³¨æ„ï¼šå‚æ•°å€¼æœ€å¥½ä½¿ç”¨ encodeURIComponent è¿›è¡Œç¼–ç ï¼Œé˜²æ­¢ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚&amp;ï¼‰å¯¼è‡´é—®é¢˜</span>
    <span class="hljs-attr">url</span>: <span class="hljs-string">`/pages/detail/detail?id=<span class="hljs-subst">${product.id}</span>&amp;name=<span class="hljs-subst">${<span class="hljs-built_in">encodeURIComponent</span>(product.name)}</span>&amp;type=physical`</span>
  });
}
</code></pre>
<h4 data-id="heading-12">3.2 å¦‚ä½•æ¥æ”¶å‚æ•°ï¼Ÿ</h4>
<p>åœ¨ç›®æ ‡é¡µé¢çš„ <strong><code>onLoad</code> ç”Ÿå‘½å‘¨æœŸå‡½æ•°</strong>ä¸­ï¼Œå¯ä»¥æ¥æ”¶åˆ°ä¸€ä¸ª <code>options</code> å¯¹è±¡ï¼Œé‡Œé¢åŒ…å«äº†æ‰€æœ‰ä¼ é€’è¿‡æ¥çš„å‚æ•°ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆæ˜¯ <code>onLoad</code>ï¼Ÿ</strong>
å› ä¸º <code>onLoad</code> æ˜¯é¡µé¢<strong>é¦–æ¬¡åŠ è½½</strong>æ—¶æ‰ä¼šè§¦å‘çš„ç”Ÿå‘½å‘¨æœŸã€‚é€šè¿‡è·¯ç”±è·³è½¬å¹¶ä¼ é€’å‚æ•°ï¼Œå¯¹äºç›®æ ‡é¡µé¢æ¥è¯´å°±æ˜¯ä¸€æ¬¡â€œé¦–æ¬¡åŠ è½½â€ã€‚</p>
<p><strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨è¯¦æƒ…é¡µï¼ˆDetail.vueï¼‰ä¸­</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">productId</span>: <span class="hljs-string">''</span>,
      <span class="hljs-attr">productName</span>: <span class="hljs-string">''</span>,
      <span class="hljs-attr">productType</span>: <span class="hljs-string">''</span>
    };
  },
  <span class="hljs-title function_">onLoad</span>(<span class="hljs-params">options</span>) {
    <span class="hljs-comment">// options å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«äº† url ä¸­ä¼ é€’çš„æ‰€æœ‰å‚æ•°</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¥æ”¶åˆ°çš„å‚æ•°ï¼š'</span>, options);

    <span class="hljs-comment">// å°†å‚æ•°èµ‹å€¼ç»™é¡µé¢çš„ dataï¼Œä¾›æ¨¡æ¿æˆ–æ–¹æ³•ä½¿ç”¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">productId</span> = options.<span class="hljs-property">id</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">productName</span> = options.<span class="hljs-property">name</span>; <span class="hljs-comment">// å¦‚æœä¼ é€’æ—¶ç¼–ç äº†ï¼Œè¿™é‡Œå¯èƒ½éœ€è¦ decodeURIComponent</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">productType</span> = options.<span class="hljs-property">type</span> || <span class="hljs-string">'digital'</span>; <span class="hljs-comment">// è®¾ç½®é»˜è®¤å€¼ï¼Œé˜²æ­¢æœªä¼ å‚</span>

    <span class="hljs-comment">// æ ¹æ®è·å–åˆ°çš„ idï¼Œå»è¯·æ±‚è¯¦ç»†çš„å•†å“æ•°æ®</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fetchProductDetail</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">productId</span>);
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">fetchProductDetail</span>(<span class="hljs-params">id</span>) {
      <span class="hljs-comment">//æ ¹æ® id è·å–å•†å“è¯¦æƒ…</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å¼€å§‹è¯·æ±‚å•†å“IDä¸º <span class="hljs-subst">${id}</span> çš„è¯¦æƒ…æ•°æ®...`</span>);
    }
  }
};
</code></pre>
<p><strong>ä¸€ä¸ªå®Œæ•´çš„ä¼ å‚/æ¥å‚æµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant L as åˆ—è¡¨é¡µ(List.vue)
    participant D as è¯¦æƒ…é¡µ(Detail.vue)

    L-&gt;&gt;L: ç”¨æˆ·ç‚¹å‡»å•†å“ï¼Œ&lt;br&gt;è§¦å‘ goToDetail æ–¹æ³•
    L-&gt;&gt;D: uni.navigateTo({&lt;br&gt;url: '/pages/detail/detail?id=123&amp;name=Phone' })
    Note over D: é¡µé¢åˆå§‹åŒ–&lt;br&gt;è§¦å‘ onLoad ç”Ÿå‘½å‘¨æœŸ
    D-&gt;&gt;D: onLoad(options) æ‰§è¡Œ&lt;br&gt;options = { id: '123', name: 'Phone' }
    D-&gt;&gt;D: å°† options.id èµ‹å€¼ç»™&lt;br&gt;this.productId
    D-&gt;&gt;D: è°ƒç”¨ this.fetchProductDetail('123')
</code></pre>
<blockquote>
<p><strong>ç‰¹åˆ«æ³¨æ„</strong>ï¼š</p>
<ol>
<li><strong>URLé•¿åº¦é™åˆ¶</strong>ï¼šä¼ é€’å¤§é‡æ•°æ®ï¼ˆæ¶‰åŠå¤æ‚å¯¹è±¡ï¼‰æ—¶ï¼Œä¸è¦é€šè¿‡URLå‚æ•°ä¼ é€’ï¼Œå› ä¸ºURLæœ‰é•¿åº¦é™åˆ¶ã€‚æ­¤æ—¶åº”è¯¥ä½¿ç”¨<strong>å…¨å±€å˜é‡ï¼ˆå¦‚Vuexï¼‰</strong> æˆ– <strong>æœ¬åœ°å­˜å‚¨ï¼ˆuni.setStorageï¼‰</strong>ã€‚</li>
<li><strong>å‚æ•°ç±»å‹</strong>ï¼šé€šè¿‡URLä¼ é€’çš„å‚æ•°éƒ½æ˜¯<strong>å­—ç¬¦ä¸²ç±»å‹</strong>ã€‚å¦‚æœéœ€è¦æ•°å­—ã€å¸ƒå°”å€¼ç­‰ï¼Œéœ€è¦åœ¨æ¥æ”¶ç«¯è‡ªè¡Œè½¬æ¢ã€‚
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">onLoad</span>(<span class="hljs-params">options</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">productId</span> = <span class="hljs-built_in">parseInt</span>(options.<span class="hljs-property">id</span>); <span class="hljs-comment">// è½¬æˆæ•°å­—</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">isAvailable</span> = options.<span class="hljs-property">available</span> === <span class="hljs-string">'true'</span>; <span class="hljs-comment">// è½¬æˆå¸ƒå°”å€¼</span>
}
</code></pre>
</li>
<li><strong>ç¼–ç ä¸è§£ç </strong>ï¼šå¯¹äºå¯èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚ <code>&amp;</code>, <code>=</code>, <code>?</code>, <code>#</code>, <code>%</code> ç­‰ï¼‰çš„å‚æ•°å€¼ï¼Œåœ¨ä¼ é€’å‰ä½¿ç”¨ <code>encodeURIComponent()</code> ç¼–ç ï¼Œæ¥æ”¶åä½¿ç”¨ <code>decodeURIComponent()</code> è§£ç ï¼Œå¯ä»¥é¿å…è§£æé”™è¯¯ã€‚</li>
</ol>
</blockquote>
<hr/>
<h3 data-id="heading-13">å››ã€ å¯¼èˆªæ è‡ªå®šä¹‰é…ç½®</h3>
<p>å¯¼èˆªæ æä¾›äº†å¼ºå¤§çš„é…ç½®èƒ½åŠ›ï¼Œå¯ä»¥åœ¨ <code>pages.json</code> ä¸­å¯¹å…¶è¿›è¡Œå…¨å±€å’Œé¡µé¢çš„ä¸ªæ€§åŒ–è®¾ç½®ã€‚</p>
<h4 data-id="heading-14">4.1 å…¨å±€é…ç½®ä¸é¡µé¢çº§é…ç½®</h4>
<p>é…ç½®éµå¾ªâ€œå°±è¿‘åŸåˆ™â€ï¼š<strong>é¡µé¢çº§é…ç½®çš„ä¼˜å…ˆçº§é«˜äºå…¨å±€é…ç½®</strong>ã€‚</p>
<p><strong><code>pages.json</code> ç»“æ„ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-comment">// 1. å…¨å±€é…ç½® - å¯¹æ‰€æœ‰é¡µé¢ç”Ÿæ•ˆ</span>
  <span class="hljs-attr">"globalStyle"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"navigationBarTitleText"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æˆ‘çš„é»˜è®¤App"</span><span class="hljs-punctuation">,</span>     <span class="hljs-comment">// å¯¼èˆªæ ‡é¢˜</span>
    <span class="hljs-attr">"navigationBarBackgroundColor"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#007AFF"</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å¯¼èˆªæ èƒŒæ™¯è‰²</span>
    <span class="hljs-attr">"navigationBarTextStyle"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"white"</span><span class="hljs-punctuation">,</span>          <span class="hljs-comment">// æ ‡é¢˜é¢œè‰²</span>
    <span class="hljs-attr">"backgroundColor"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#F8F8F8"</span><span class="hljs-punctuation">,</span>               <span class="hljs-comment">// èƒŒæ™¯è‰²</span>
    <span class="hljs-attr">"enablePullDownRefresh"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>              <span class="hljs-comment">// æ˜¯å¦å¼€å¯ä¸‹æ‹‰åˆ·æ–°</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-comment">// 2. é¡µé¢è·¯ç”±åˆ—è¡¨</span>
  <span class="hljs-attr">"pages"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pages/index/index"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"navigationBarTitleText"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é¦–é¡µ"</span> 
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pages/profile/profile"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"navigationBarTitleText"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¸ªäººä¸­å¿ƒ"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"navigationBarBackgroundColor"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#4CD964"</span><span class="hljs-punctuation">,</span> 
        <span class="hljs-attr">"enablePullDownRefresh"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span> 
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pages/detail/detail"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"navigationBarTitleText"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å•†å“è¯¦æƒ…"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-comment">// éšè—åŸç”Ÿå¯¼èˆªæ ï¼Œå®ç°å…¨å±æˆ–è‡ªå®šä¹‰å¯¼èˆªæ </span>
        <span class="hljs-attr">"navigationStyle"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"custom"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-comment">// 3. tabBar é…ç½®</span>
  <span class="hljs-attr">"tabBar"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#7A7E83"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"selectedColor"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#007AFF"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"backgroundColor"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#FFFFFF"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"list"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-comment">// tabBaråˆ—è¡¨ ...</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-15">4.2 åŠ¨æ€ä¿®æ”¹å¯¼èˆªæ æ ‡é¢˜</h4>
<p>å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åœ¨é¡µé¢åŠ è½½åï¼Œæ ¹æ®æ•°æ®åŠ¨æ€è®¾ç½®æ ‡é¢˜ã€‚ä¾‹å¦‚ï¼Œåœ¨å•†å“è¯¦æƒ…é¡µï¼Œæ ‡é¢˜åº”è¯¥æ˜¯å•†å“çš„åå­—ï¼Œè¿™ä¸ªåå­—æ¥è‡ªåå°æ¥å£ã€‚</p>
<p><strong>æ ¸å¿ƒAPIï¼š<code>uni.setNavigationBarTitle</code></strong></p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨è¯¦æƒ…é¡µï¼ˆDetail.vueï¼‰ä¸­</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">onLoad</span>(<span class="hljs-params">options</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">productId</span> = options.<span class="hljs-property">id</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fetchProductDetail</span>();
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">fetchProductDetail</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// æ¨¡æ‹Ÿæ¥å£è¯·æ±‚</span>
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$api</span>.<span class="hljs-title function_">getProductDetail</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">productId</span>);
      <span class="hljs-keyword">if</span> (res.<span class="hljs-property">success</span>) {
        <span class="hljs-keyword">const</span> product = res.<span class="hljs-property">data</span>;
        <span class="hljs-comment">// åŠ¨æ€è®¾ç½®å¯¼èˆªæ æ ‡é¢˜ä¸ºå•†å“åç§°</span>
        uni.<span class="hljs-title function_">setNavigationBarTitle</span>({
          <span class="hljs-attr">title</span>: product.<span class="hljs-property">name</span> <span class="hljs-comment">// ä»æ¥å£è·å–çš„å•†å“å</span>
        });
      }
    }
  }
};
</code></pre>
<h4 data-id="heading-16">4.3 è‡ªå®šä¹‰å¯¼èˆªæ  (<code>"navigationStyle": "custom"</code>)</h4>
<p>å½“uni-appè‡ªå¸¦çš„å¯¼èˆªæ æ ·å¼æ— æ³•æ»¡è¶³ä½ çš„è®¾è®¡éœ€æ±‚æ—¶ï¼ˆæ¯”å¦‚éœ€è¦åŠ å…¥æœç´¢æ¡†ã€æŒ‰é’®ã€æˆ–è€…éœ€è¦ç‰¹æ®Šçš„èƒŒæ™¯æ•ˆæœï¼‰ï¼Œä½ å¯ä»¥é€‰æ‹©<strong>è‡ªå®šä¹‰å¯¼èˆªæ </strong>ã€‚</p>
<p><strong>é…ç½®æ­¥éª¤ï¼š</strong></p>
<ol>
<li><strong>åœ¨ <code>pages.json</code> ä¸­ä¸ºæŒ‡å®šé¡µé¢å¯ç”¨è‡ªå®šä¹‰å¯¼èˆªæ ï¼š</strong>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pages/my-custom-page/my-custom-page"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"navigationStyle"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"custom"</span> 
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li><strong>åœ¨é¡µé¢çš„ <code>&lt;template&gt;</code> ä¸­ï¼Œè‡ªå·±ç¼–å†™å¯¼èˆªæ çš„UIç»“æ„ï¼š</strong>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">view</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- è‡ªå®šä¹‰å¯¼èˆªæ  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"custom-navbar"</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- çŠ¶æ€æ å ä½ï¼Œé˜²æ­¢å†…å®¹å†²åˆ°çŠ¶æ€æ ä¸‹é¢ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"status-bar"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- å¯¼èˆªæ å†…å®¹åŒº --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"navbar-content"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">text</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-title"</span>&gt;</span>æˆ‘çš„è‡ªå®šä¹‰æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-btn"</span>&gt;</span>æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- é¡µé¢å†…å®¹ï¼Œéœ€è¦ç»™è‡ªå®šä¹‰å¯¼èˆªæ ç•™å‡ºé«˜åº¦ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page-content"</span>&gt;</span>
      ...
    <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
</li>
<li><strong>åœ¨ <code>&lt;style&gt;</code> ä¸­ç¼–å†™æ ·å¼ï¼Œå¹¶å¤„ç†å¥½é«˜åº¦é—®é¢˜ï¼š</strong>
<pre><code class="hljs language-css" lang="css">&lt;style scoped&gt;
<span class="hljs-comment">/* 1. çŠ¶æ€æ é«˜åº¦å ä½ */</span>
<span class="hljs-selector-class">.status-bar</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-built_in">var</span>(--status-bar-height); 
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
}

<span class="hljs-comment">/* 2. è‡ªå®šä¹‰å¯¼èˆªæ å†…å®¹åŒº */</span>
<span class="hljs-selector-class">.navbar-content</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-number">44px</span>; <span class="hljs-comment">/* å¯¼èˆªæ æ ‡å‡†é«˜åº¦ */</span>
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#007AFF</span>;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">justify-content</span>: center;
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">color</span>: white;
}

<span class="hljs-comment">/* 3. é¡µé¢å†…å®¹éœ€è¦æœ‰ä¸€ä¸ªä¸Šè¾¹è· */</span>
<span class="hljs-selector-class">.page-content</span> {
  <span class="hljs-attribute">margin-top</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--status-bar-height) + <span class="hljs-number">44px</span>); <span class="hljs-comment">/* çŠ¶æ€æ é«˜åº¦ + å¯¼èˆªæ é«˜åº¦ */</span>
}
&lt;/style&gt;
</code></pre>
</li>
</ol>
<p><strong>è‡ªå®šä¹‰å¯¼èˆªæ çš„ä¼˜ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šUIå¯é«˜åº¦è‡ªå®šä¹‰ï¼Œå®ç°ä»»ä½•å¤æ‚çš„å¯¼èˆªæ æ•ˆæœã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼š
<ol>
<li>éœ€è¦è‡ªå·±å¤„ç†å…¼å®¹æ€§é—®é¢˜ï¼›</li>
<li>å·¥ä½œé‡å¢åŠ ï¼Œæ¯ä¸ªéœ€è¦è‡ªå®šä¹‰çš„é¡µé¢éƒ½è¦å†™ä¸€å¥—ç»“æ„æ ·å¼ï¼›</li>
<li>åœ¨iOSä¸Šï¼Œæ»‘åŠ¨è¿”å›æ‰‹åŠ¿å¯èƒ½ä¼šä¸è‡ªå®šä¹‰å¯¼èˆªæ ä¸­çš„æŒ‰é’®ç‚¹å‡»äº‹ä»¶å†²çªï¼Œéœ€è¦é¢å¤–å¤„ç†ã€‚</li>
</ol>
</li>
</ul>
<hr/>
<h3 data-id="heading-17">äº”ã€ æ€»ç»“</h3>
<p>è‡³æ­¤æˆ‘ä»¬å·²ç»æŠŠuni-appè·¯ç”±å¯¼èˆªçš„æ ¸å¿ƒçŸ¥è¯†ä½“ç³»å…¨éƒ¨æ¢³ç†å®Œæ¯•äº†ã€‚æœ€ååšä¸€ä¸ªæ•´ä½“æ€»ç»“ï¼Œå¹¶æä¾›ä¸€ä¸ªç»¼åˆå°æ¡ˆä¾‹ã€‚</p>
<h4 data-id="heading-18">5.1 çŸ¥è¯†ç‚¹</h4>
<ol>
<li>
<p><strong>é¡µé¢æ ˆï¼ˆPage Stackï¼‰</strong></p>
<ul>
<li><strong>æœ¬è´¨</strong>ï¼šä¸€ä¸ªåè¿›å…ˆå‡ºï¼ˆLIFOï¼‰çš„æ ˆç»“æ„ï¼Œç®¡ç†æ‰€æœ‰å·²æ‰“å¼€çš„é¡µé¢ã€‚</li>
<li><strong>æ ¸å¿ƒAPI</strong>ï¼š<code>getCurrentPages()</code>ï¼Œç”¨äºè·å–å½“å‰æ ˆå®ä¾‹ï¼Œå¯è¿›è¡Œè·¨é¡µé¢é€šä¿¡å’Œæ™ºèƒ½å¯¼èˆªã€‚</li>
</ul>
</li>
<li>
<p><strong>äº”å¤§è·¯ç”±è·³è½¬æ–¹æ³•</strong></p>
<ul>
<li><code>uni.navigateTo</code>ï¼š<strong>ä¿ç•™å½“å‰é¡µ</strong>ï¼Œè·³è½¬æ–°é¡µã€‚æœ€å¸¸ç”¨ã€‚</li>
<li><code>uni.redirectTo</code>ï¼š<strong>å…³é—­å½“å‰é¡µ</strong>ï¼Œè·³è½¬æ–°é¡µã€‚ç”¨äº<strong>ä¸­æ–­å½“å‰æµç¨‹</strong>ï¼Œä¸è®©è¿”å›ã€‚</li>
<li><code>uni.reLaunch</code>ï¼š<strong>å…³é—­æ‰€æœ‰é¡µ</strong>ï¼Œæ‰“å¼€æ–°é¡µã€‚ç”¨äº<strong>é‡å¯åº”ç”¨çŠ¶æ€</strong>ã€‚</li>
<li><code>uni.switchTab</code>ï¼š<strong>è·³è½¬Tabé¡µ</strong>ï¼Œå…³é—­æ‰€æœ‰éTabé¡µã€‚ä¸“ä¸º<strong>åº•éƒ¨å¯¼èˆª</strong>è®¾è®¡ã€‚</li>
<li><code>uni.navigateBack</code>ï¼š<strong>è¿”å›ä¸Šä¸€é¡µæˆ–å¤šé¡µ</strong>ã€‚æœ€ç®€å•çš„è¿”å›æ“ä½œã€‚</li>
</ul>
</li>
<li>
<p><strong>å‚æ•°ä¼ é€’ä¸æ¥æ”¶</strong></p>
<ul>
<li><strong>ä¼ é€’</strong>ï¼šåœ¨è·³è½¬çš„ <code>url</code> åé€šè¿‡ <code>?key=value&amp;key2=value2</code> çš„å½¢å¼æ‹¼æ¥ã€‚</li>
<li><strong>æ¥æ”¶</strong>ï¼šåœ¨ç›®æ ‡é¡µé¢çš„ <strong><code>onLoad(options)</code></strong> ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œä» <code>options</code> å‚æ•°ä¸­è·å–ã€‚</li>
<li><strong>æ³¨æ„</strong>ï¼šå‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œæ³¨æ„ç±»å‹è½¬æ¢å’Œç‰¹æ®Šå­—ç¬¦ç¼–ç ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¯¼èˆªæ è‡ªå®šä¹‰</strong></p>
<ul>
<li><strong>é™æ€é…ç½®</strong>ï¼šåœ¨ <code>pages.json</code> çš„ <code>globalStyle</code> å’Œæ¯ä¸ªé¡µé¢çš„ <code>style</code> ä¸­é…ç½®æ ‡é¢˜ã€é¢œè‰²ç­‰ã€‚</li>
<li><strong>åŠ¨æ€ä¿®æ”¹</strong>ï¼šä½¿ç”¨ <code>uni.setNavigationBarTitle</code> APIã€‚</li>
<li><strong>å®Œå…¨è‡ªå®šä¹‰</strong>ï¼šè®¾ç½® <code>"navigationStyle": "custom"</code>ï¼Œç„¶åè‡ªå·±ç¼–å†™è§†å›¾å’Œæ ·å¼ï¼Œæ³¨æ„å¤„ç†å¥½çŠ¶æ€æ é«˜åº¦ã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-19">5.2 æœ€åï¼Œä»¥ä¸€ä¸ªç®€å•çš„ç”µå•†æµç¨‹ä¸ºä¾‹ï¼š</h4>
<p>è®©æˆ‘ä»¬ç”¨åˆšå­¦çš„çŸ¥è¯†ï¼Œæ¨¡æ‹Ÿä¸€ä¸ªç®€å•çš„ç”µå•†é¡µé¢è·³è½¬æµç¨‹ã€‚ä»¥ä¸‹åªå†™æ ¸å¿ƒæ€è·¯ä»£ç ï¼Œå…·ä½“ç»†èŠ‚ä»£ç éœ€è¦è‡ªè¡Œå‘æŒ¥ï¼ï¼ï¼</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. é¦–é¡µ (index.vue) - ç‚¹å‡»å•†å“åˆ†ç±»</span>
<span class="hljs-title function_">goToCategory</span>(<span class="hljs-params">categoryId</span>) {
  uni.<span class="hljs-title function_">navigateTo</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">`/pages/category/category?id=<span class="hljs-subst">${categoryId}</span>`</span>
  });
}

<span class="hljs-comment">// 2. åˆ†ç±»é¡µ (category.vue) - æ¥æ”¶åˆ†ç±»IDï¼Œå±•ç¤ºå•†å“åˆ—è¡¨</span>
<span class="hljs-title function_">onLoad</span>(<span class="hljs-params">options</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">categoryId</span> = options.<span class="hljs-property">id</span>;
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fetchGoodsList</span>();
},
<span class="hljs-comment">// ç‚¹å‡»åˆ—è¡¨ä¸­çš„å•†å“</span>
<span class="hljs-title function_">onGoodsItemTap</span>(<span class="hljs-params">goodsId</span>) {
  uni.<span class="hljs-title function_">navigateTo</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">`/pages/goods-detail/goods-detail?goods_id=<span class="hljs-subst">${goodsId}</span>`</span>
  });
}

<span class="hljs-comment">// 3. å•†å“è¯¦æƒ…é¡µ (goods-detail.vue) - æ¥æ”¶å•†å“IDï¼Œå±•ç¤ºè¯¦æƒ…</span>
<span class="hljs-title function_">onLoad</span>(<span class="hljs-params">options</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">goodsId</span> = options.<span class="hljs-property">goods_id</span>;
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fetchGoodsDetail</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">goods</span> =&gt;</span> {
    <span class="hljs-comment">// åŠ¨æ€è®¾ç½®å¯¼èˆªæ æ ‡é¢˜ä¸ºå•†å“å</span>
    uni.<span class="hljs-title function_">setNavigationBarTitle</span>({ <span class="hljs-attr">title</span>: goods.<span class="hljs-property">name</span> });
  });
},
<span class="hljs-comment">// ç‚¹å‡»åŠ å…¥è´­ç‰©è½¦</span>
<span class="hljs-title function_">addToCart</span>(<span class="hljs-params"/>) {
  uni.<span class="hljs-title function_">showToast</span>({
    <span class="hljs-attr">title</span>: <span class="hljs-string">'æ·»åŠ æˆåŠŸ'</span>
  });
},
<span class="hljs-comment">// ç‚¹å‡»ç«‹å³è´­ä¹°</span>
<span class="hljs-title function_">buyNow</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// è·³è½¬åˆ°è®¢å•ç¡®è®¤é¡µï¼Œå¹¶ä¸å…è®¸è¿”å›åˆ°æ­¤è¯¦æƒ…é¡µ</span>
  uni.<span class="hljs-title function_">redirectTo</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">`/pages/order-confirm/order-confirm?goods_id=<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.goodsId}</span>`</span>
  });
}

<span class="hljs-comment">// 4. è®¢å•ç¡®è®¤é¡µ (order-confirm.vue)</span>
<span class="hljs-title function_">onLoad</span>(<span class="hljs-params">options</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">goodsId</span> = options.<span class="hljs-property">goods_id</span>;
},
<span class="hljs-comment">// æäº¤è®¢å•æˆåŠŸ</span>
<span class="hljs-title function_">onOrderSubmitSuccess</span>(<span class="hljs-params">orderId</span>) {
  <span class="hljs-comment">// å…³é—­æ‰€æœ‰é¡µé¢ï¼Œè·³è½¬åˆ°è®¢å•ç»“æœé¡µ</span>
  uni.<span class="hljs-title function_">reLaunch</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">`/pages/order-result/order-result?order_id=<span class="hljs-subst">${orderId}</span>&amp;status=success`</span>
  });
}

<span class="hljs-comment">// 5. åœ¨è®¢å•ç»“æœé¡µ (order-result.vue)ï¼Œæä¾›â€œè¿”å›é¦–é¡µâ€çš„æŒ‰é’®</span>
<span class="hljs-title function_">backToHome</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// å› ä¸ºæ˜¯ç”¨ reLaunch è·³è¿‡æ¥çš„ï¼Œæ ˆé‡Œåªæœ‰è¿™ä¸€é¡µï¼Œæ‰€ä»¥ç”¨ switchTab å›é¦–é¡µ</span>
  uni.<span class="hljs-title function_">switchTab</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/index/index'</span>
  });
}
</code></pre>
<hr/>
<h3 data-id="heading-20">ç»“è¯­</h3>
<p>è·¯ç”±ä¸å¯¼èˆªï¼Œä½œä¸ºè¿æ¥æ•´ä¸ªåº”ç”¨çš„è„‰ç»œï¼Œå…¶é‡è¦æ€§ä¸è¨€è€Œå–»ã€‚ç†è§£é¡µé¢æ ˆçš„åŸç†ï¼Œèƒ½è®©ä½ åœ¨é‡åˆ°å¤æ‚çš„å¯¼èˆªé—®é¢˜æ—¶æ¸¸åˆƒæœ‰ä½™ï¼›ç†Ÿç»ƒæŒæ¡äº”ç§è·³è½¬æ–¹å¼ï¼Œèƒ½è®©ä½ ä¸ºç”¨æˆ·è®¾è®¡å‡ºæœ€ç¬¦åˆç›´è§‰çš„äº¤äº’æµç¨‹ï¼›
å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸®åˆ°ä½ ä½ ï¼Œæœ€åå¦‚æœè§‰å¾—æ–‡ç« å†™å¾—è¿˜å¯ä»¥<strong>åˆ«å¿˜äº†â€˜ä¸€é”®ä¸‰è¿â€™ï¼ˆç‚¹èµã€å…³æ³¨ã€æ”¶è—ï¼‰</strong>ï¼Œè¿™æ˜¯å¯¹æˆ‘åˆ›ä½œçš„æœ€å¤§é¼“åŠ±ï¼</p>
<p>æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ï¼Œæˆ‘ä»¬ä¸‹ç¯‡è§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é‡æ–°å®¡è§† JavaScript ä¸­çš„å¼‚æ­¥å¾ªç¯]]></title>    <link>https://juejin.cn/post/7570187256106450950</link>    <guid>https://juejin.cn/post/7570187256106450950</guid>    <pubDate>2025-11-10T03:01:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570187256106450950" data-draft-id="7570191839594184767" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é‡æ–°å®¡è§† JavaScript ä¸­çš„å¼‚æ­¥å¾ªç¯"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-10T03:01:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é“å¯åˆ°"/> <meta itemprop="url" content="https://juejin.cn/user/1794042842067742"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é‡æ–°å®¡è§† JavaScript ä¸­çš„å¼‚æ­¥å¾ªç¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1794042842067742/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é“å¯åˆ°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T03:01:29.000Z" title="Mon Nov 10 2025 03:01:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é‡æ–°å®¡è§† JavaScript ä¸­çš„å¼‚æ­¥å¾ªç¯ï¼ˆè´´åˆå®é™…ä¸šåŠ¡ï¼‰</h2>
<hr/>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆâ€œåœ¨å¾ªç¯é‡Œç”¨ <code>await</code>â€å¸¸è®©ç³»ç»Ÿå˜æ…¢ï¼Ÿ</h3>
<p>åœ¨ <code>for</code>/<code>for...of</code> å¾ªç¯é‡Œç›´æ¥ <code>await</code>ï¼Œä¼šè®©æ¯ä¸€æ­¥<strong>ä¸²è¡Œ</strong>æ‰§è¡Œï¼šä¸‹ä¸€ä¸ªè¯·æ±‚å¿…é¡»ç­‰ä¸Šä¸€ä¸ªå®Œæˆï¼Œç‹¬ç«‹çš„ç½‘ç»œè°ƒç”¨å› æ­¤è¢«è¿«æ’é˜Ÿï¼Œååé‡ä¸‹é™ã€‚ç›¸åï¼Œåœ¨ <code>map()</code> é‡Œç”¨ <code>async</code> å´<strong>ä¸ä¼šç­‰å¾…</strong>ï¼Œä½ å¾—åˆ°çš„æ˜¯ä¸€ç»„ <em>Promise</em>ï¼Œè‹¥ä¸è¿›ä¸€æ­¥æ±‡èšï¼Œå°±ä¼šäº§ç”Ÿâ€œå·²ç»ç»“æŸä½†ä»»åŠ¡ä»åœ¨åå°è·‘â€çš„é”™è§‰ã€‚îˆ€citeîˆ‚turn1search1îˆ‚turn1search10îˆ‚turn1search29îˆ</p>
<blockquote>
<p>ç»“è®ºï¼š<strong>è¦ä¹ˆæœ‰æ„è¯†åœ°ä¸²è¡Œ</strong>ï¼ˆç¡®æœ‰é¡ºåºæˆ–é™é€Ÿè¦æ±‚ï¼‰ï¼Œ<strong>è¦ä¹ˆæ˜ç¡®åœ°å¹¶è¡Œ</strong>ï¼ˆå¦‚ <code>Promise.all</code>/å—æ§å¹¶å‘ï¼‰ï¼›é¿å…æ¨¡æ£±ä¸¤å¯çš„å†™æ³•ã€‚îˆ€citeîˆ‚turn1search1îˆ</p>
</blockquote>
<hr/>
<h3 data-id="heading-2">ä¸‰ç§ä¸»æµæ‰§è¡Œæ¨¡å¼</h3>
<h4 data-id="heading-3">1) ä¸²è¡Œï¼š<code>for...of + await</code></h4>
<p><strong>é€‚ç”¨</strong>ï¼šåä¸€æ­¥ä¾èµ–ä¸Šä¸€æ­¥ï¼›éœ€è¦ä¸¥æ ¼é¡ºåºï¼›å—ä¾›åº”å•† API ä¸¥æ ¼é™é€Ÿï¼ˆå¦‚æ¯ç§’ 1 æ¬¡ï¼‰ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> id <span class="hljs-keyword">of</span> orderIds) {
  <span class="hljs-keyword">const</span> order = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getOrder</span>(id);        <span class="hljs-comment">// ä¾èµ–é¡ºåº</span>
  <span class="hljs-keyword">const</span> enriched = <span class="hljs-keyword">await</span> <span class="hljs-title function_">enrich</span>(order);    <span class="hljs-comment">// é€æ­¥åŠ å·¥</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">persist</span>(enriched);
}
</code></pre>
<p>è¿™ç±»å†™æ³•æœ€ç›´è§‚ã€å¯æ§ã€æ˜“äºæ–­ç‚¹è°ƒè¯•ï¼Œä½†å¯¹ç‹¬ç«‹ I/O æ¥è¯´æ€§èƒ½æœ€æ…¢ã€‚</p>
<h4 data-id="heading-4">2) å¹¶è¡Œï¼š<code>Promise.all(users.map(...))</code></h4>
<p><strong>é€‚ç”¨</strong>ï¼šå„ä»»åŠ¡å½¼æ­¤ç‹¬ç«‹ï¼Œæ— éœ€ä¿æŒé¡ºåºï¼Œä¾‹å¦‚<strong>å¹¶å‘æ‹‰å– 100 ä¸ªå®¢æˆ·èµ„æ–™</strong>æˆ–<strong>æ‰¹é‡ç”ŸæˆæŠ¥è¡¨</strong>ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(
  customerIds.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">id</span> =&gt;</span> <span class="hljs-title function_">fetchCustomerProfile</span>(id))
);
</code></pre>
<p>æ³¨æ„ <code>Promise.all()</code> <strong>â€œå¤±è´¥å³å…¨éƒ¨å¤±è´¥â€</strong>ï¼šä»»ä¸€å­ä»»åŠ¡æ‹’ç»å³æ•´ä½“ rejectï¼Œéœ€è¦é…åˆè¾¹ç•Œå¤„ç†ã€‚</p>
<h5 data-id="heading-5">æ›´å®‰å…¨çš„å¹¶è¡Œï¼š<code>Promise.allSettled()</code></h5>
<p>ä¿ç•™æ‰€æœ‰ç»“æœï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰ï¼Œé€‚åˆ<strong>æ‰¹å¤„ç†</strong>ä¸<strong>éƒ¨åˆ†æˆåŠŸå¯æ¥å—</strong>çš„ä¸šåŠ¡ï¼ˆå¦‚æ‰¹é‡å‘åˆ¸ã€æ¨é€ï¼‰ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> settled = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">allSettled</span>(tasks);
<span class="hljs-keyword">const</span> ok = settled.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-property">status</span> === <span class="hljs-string">'fulfilled'</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-property">value</span>);
<span class="hljs-keyword">const</span> bad = settled.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-property">status</span> === <span class="hljs-string">'rejected'</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-property">reason</span>);
</code></pre>
<p><code>allSettled()</code> <strong>ç­‰å¾…å…¨éƒ¨ä»»åŠ¡è½å®š</strong>ï¼Œä¸ä¼šå› ä¸ºå•æ¬¡å¤±è´¥æå‰é€€å‡ºã€‚</p>
<h4 data-id="heading-6">3) å—æ§å¹¶å‘ï¼š<code>p-limit</code></h4>
<p><strong>é€‚ç”¨</strong>ï¼šæ—¢è¦åŠ é€Ÿï¼Œåˆè¦<strong>å°Šé‡é™æµ/è¿æ¥æ•°</strong>ï¼ˆå¦‚æ”¯ä»˜ã€ç‰©æµã€ç¬¬ä¸‰æ–¹é£æ§ï¼‰ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> pLimit <span class="hljs-keyword">from</span> <span class="hljs-string">'p-limit'</span>;
<span class="hljs-keyword">const</span> limit = <span class="hljs-title function_">pLimit</span>(<span class="hljs-number">5</span>);                 <span class="hljs-comment">// æœ€å¤šå¹¶è¡Œ 5 ä¸ª</span>
<span class="hljs-keyword">const</span> tasks = orderIds.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">id</span> =&gt;</span> <span class="hljs-title function_">limit</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">processOrder</span>(id)));
<span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(tasks);
</code></pre>
<p><code>p-limit</code> é€šè¿‡â€œä»¤ç‰Œæ¡¶â€å¼å¹¶å‘ä¸Šé™ï¼Œé¿å…æŠŠä¸Šæ¸¸æ‰“å®æˆ–æŠŠæœ¬æœºçº¿ç¨‹æ± å æ»¡ã€‚</p>
<blockquote>
<p>å¿«é€Ÿé€‰å‹ï¼š<strong>é¡ºåº</strong>â†’<code>for...of</code>ï¼›<strong>æé€Ÿå¹¶è¡Œ</strong>â†’<code>Promise.all</code>ï¼›<strong>é™æµ</strong>â†’<code>p-limit</code>ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-7">å¸¸è§è¯¯ç”¨ä¸å‘</h3>
<ul>
<li><strong><code>forEach</code> + <code>async</code></strong>ï¼š<code>forEach</code> ä¸ç­‰å¾…å¼‚æ­¥å›è°ƒï¼Œå¤–å±‚å‡½æ•°æ—©ç»“æŸï¼Œé”™è¯¯ä¸èµ„æºæ³„éœ²è¢«â€œåæ‰â€ã€‚è¯·æ”¹ä¸º <code>for...of</code> æˆ– <code>Promise.all(map(...))</code>ã€‚îˆ€citeîˆ‚turn1search1îˆ‚turn1search29îˆ</li>
<li><strong><code>map(async ...)</code> åä¸æ±‡èš</strong>ï¼šå¾—åˆ°çš„æ˜¯ <em>Promise[]</em> è€Œéæ•°æ®ï¼›è¦ <code>await Promise.all(...)</code> æˆ– <code>allSettled(...)</code>ã€‚îˆ€citeîˆ‚turn1search1îˆ</li>
<li><strong>æ— ä¸Šé™çš„â€œå…¨å¹¶å‘â€</strong>ï¼šå®¹æ˜“è§¦å‘ä¾›åº”å•†é™æµã€é›ªå´©æˆ–æœ¬æœºèµ„æºè€—å°½ï¼›è¯·ç”¨ <code>p-limit</code>/æ‰¹å¤„ç†ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8">ä¸šåŠ¡çº§å¥å£®æ€§ï¼ˆå¿…åšé¡¹ï¼‰</h3>
<h4 data-id="heading-9">1) è¶…æ—¶ã€å–æ¶ˆä¸é‡è¯•</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// ç®€æ˜“è¶…æ—¶åŒ…è£…</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">withTimeout</span> = (<span class="hljs-params">p, ms</span>) =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">res, rej</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> t = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">rej</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Timeout <span class="hljs-subst">${ms}</span>ms`</span>)), ms);
  p.<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearTimeout</span>(t)).<span class="hljs-title function_">then</span>(res, rej);
});

<span class="hljs-comment">// ç»“åˆ AbortController å–æ¶ˆï¼ˆæµè§ˆå™¨/Node18+ï¼‰</span>
<span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
<span class="hljs-keyword">const</span> resp = <span class="hljs-keyword">await</span> <span class="hljs-title function_">withTimeout</span>(<span class="hljs-title function_">fetch</span>(url, { <span class="hljs-attr">signal</span>: controller.<span class="hljs-property">signal</span> }), <span class="hljs-number">5000</span>);
<span class="hljs-comment">// controller.abort(); // éœ€è¦æ—¶å–æ¶ˆ</span>

<span class="hljs-comment">// æŒ‡æ•°é€€é¿é‡è¯•ï¼ˆåªå¯¹å¯é‡è¯•é”™è¯¯ï¼‰</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">retry</span>(<span class="hljs-params">fn, times = <span class="hljs-number">3</span></span>) {
  <span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; <span class="hljs-keyword">let</span> err;
  <span class="hljs-keyword">while</span> (i &lt; times) {
    <span class="hljs-keyword">try</span> { <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">fn</span>(); } <span class="hljs-keyword">catch</span> (e) {
      err = e; <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(r, <span class="hljs-number">2</span> ** i * <span class="hljs-number">200</span>)); i++;
    }
  }
  <span class="hljs-keyword">throw</span> err;
}
</code></pre>
<p>ä¸ <code>Promise.all/Settled</code> ç»„åˆèƒ½æ˜¾è‘—æå‡æ‰¹å¤„ç†æˆåŠŸç‡ä¸å¯è§‚æµ‹æ€§ã€‚</p>
<h4 data-id="heading-10">2) å¹‚ç­‰ä¸å»é‡</h4>
<p>åœ¨ <strong>æ”¯ä»˜ã€å‘è´§ã€å¼€ç¥¨</strong> ç­‰åœºæ™¯ï¼ŒåŠ¡å¿…ç»™ä»»åŠ¡åŠ å¹‚ç­‰é”®ï¼ˆå¦‚ <code>orderId#step</code>ï¼‰ï¼Œé¿å…å¹¶è¡Œä¸é‡è¯•å¯¼è‡´çš„<strong>é‡å¤æ‰£è´¹/é‡å¤æ¨é€</strong>ã€‚è¿™ä¸€ç‚¹ä¸å¹¶å‘æ¨¡å¼æ— å…³ï¼Œä½†ä¸å¹¶å‘è¶Šå¤§è¶Šé‡è¦ã€‚<em>ï¼ˆä¸šåŠ¡é€šç”¨åŸåˆ™ï¼‰</em></p>
<h4 data-id="heading-11">3) å¯è§‚æµ‹æ€§</h4>
<p>ä¸ºæ¯ä¸ªæ‰¹æ¬¡è®°å½•ï¼š<strong>å¹¶å‘åº¦ã€æˆåŠŸ/å¤±è´¥æ•°ã€è€—æ—¶åˆ†ä½æ•°ã€é‡è¯•æ¬¡æ•°</strong>ï¼Œå¹¶å¯¹å¤±è´¥æ ·æœ¬åš<strong>åŸå› åˆ†ç±»</strong>ï¼ˆ5xx/4xx/è§£æ/è¶…æ—¶/å–æ¶ˆï¼‰ã€‚<em>ï¼ˆå·¥ç¨‹æœ€ä½³å®è·µï¼‰</em></p>
<hr/>
<h3 data-id="heading-12">é¢å‘æµ·é‡æ•°æ®ï¼šæ‰¹å¤„ç†ã€æµä¸å¼‚æ­¥å¯è¿­ä»£</h3>
<ul>
<li><strong>æ‰¹å¤„ç†</strong>ï¼šæŒ‰ 50~200 çš„ batch å¤§å°åˆ‡ç‰‡ + <code>p-limit</code>ï¼Œé€šå¸¸èƒ½åœ¨ååä¸ç¨³å®šæ€§é—´å–åˆ°å¥½å¹³è¡¡ã€‚</li>
<li><strong><code>forâ€‘awaitâ€‘of</code></strong>ï¼šæ¶ˆè´¹å¼‚æ­¥å¯è¿­ä»£ï¼ˆå¦‚åˆ†é¡µ APIã€Node.js æµï¼‰ã€‚ä¾¿äºâ€œè¾¹åˆ°è¾¹å¤„ç†â€ï¼Œæ§åˆ¶å†…å­˜å ç”¨ã€‚</li>
<li><strong><code>Array.fromAsync()</code></strong>ï¼šæŠŠï¼ˆå¼‚æ­¥ï¼‰å¯è¿­ä»£è½¬ä¸ºæ•°ç»„ï¼Œå†…éƒ¨<strong>é¡ºåºåœ°ç­‰å¾…æ¯ä¸ªå…ƒç´ </strong>ï¼›è€Œ <code>Promise.all</code> æ˜¯<strong>å¹¶å‘ç­‰å¾…</strong>ã€‚ç”¨äºéœ€è¦â€œé€ä¸ªç¡®è®¤ã€æœ‰èŠ‚å¥åœ°æ‹‰å–â€çš„åœºæ™¯ã€‚îˆ€citeîˆ‚turn1search16îˆ</li>
</ul>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// ä¾‹ï¼šåˆ†é¡µæŠ“å–â†’é¡ºåºèšåˆï¼ˆé¿å…ç¬æ—¶å‹å®åç«¯ï¼‰</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>* <span class="hljs-title function_">pages</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">let</span> page = <span class="hljs-number">1</span>; <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/invoices?page=<span class="hljs-subst">${page}</span>`</span>);
  <span class="hljs-keyword">if</span> (!res.<span class="hljs-property">ok</span>) <span class="hljs-keyword">break</span>; <span class="hljs-keyword">yield</span> res.<span class="hljs-title function_">json</span>(); page++;
}}
<span class="hljs-keyword">const</span> all = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">fromAsync</span>(<span class="hljs-title function_">pages</span>(), <span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> p); <span class="hljs-comment">// é¡ºåºæ¶ˆè´¹</span>
</code></pre>
<p><code>Array.fromAsync</code> ä¸ <code>Promise.all</code> çš„å·®å¼‚ä¸å–èˆï¼Œè¯¦è§ MDNã€‚</p>
<hr/>
<h3 data-id="heading-13">è´´åˆä¸šåŠ¡çš„ç¤ºä¾‹ç‰‡æ®µ</h3>
<h4 data-id="heading-14">A. å—ç¬¬ä¸‰æ–¹ API é™æµçš„å®¢æˆ·èµ„æ–™åŒæ­¥</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> pLimit <span class="hljs-keyword">from</span> <span class="hljs-string">'p-limit'</span>;
<span class="hljs-keyword">const</span> limit = <span class="hljs-title function_">pLimit</span>(<span class="hljs-number">8</span>); <span class="hljs-comment">// ç¬¬ä¸‰æ–¹ç»™çš„çª—å£ï¼šæ¯ç§’ 10 æ¬¡ï¼Œè¿™é‡Œé¢„ç•™å®‰å…¨è¾¹é™…</span>

<span class="hljs-keyword">const</span> tasks = customers.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> <span class="hljs-title function_">limit</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">retry</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">fetchCrm</span>(c.<span class="hljs-property">id</span>))));
<span class="hljs-keyword">const</span> settled = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">allSettled</span>(tasks);
<span class="hljs-keyword">const</span> ok = settled.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x.<span class="hljs-property">status</span> === <span class="hljs-string">'fulfilled'</span>).<span class="hljs-property">length</span>;
<span class="hljs-keyword">const</span> fail = settled.<span class="hljs-property">length</span> - ok;
</code></pre>
<p>å¹¶å‘å—æ§ã€å¤±è´¥ä¸æ‹–ç´¯æ•´ä½“ï¼Œå¤±è´¥é¡¹å¯è½ç›˜é‡è¯•ã€‚</p>
<h4 data-id="heading-15">B. è®¢å•æ‰¹é‡å¼€ç¥¨ï¼ˆä¿æŒé¡ºåºï¼‰</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> id <span class="hljs-keyword">of</span> orderIds) {
  <span class="hljs-keyword">const</span> order = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getOrder</span>(id);
  <span class="hljs-keyword">const</span> pdf = <span class="hljs-keyword">await</span> <span class="hljs-title function_">buildInvoicePdf</span>(order);
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">uploadToStorage</span>(pdf, <span class="hljs-string">`<span class="hljs-subst">${id}</span>.pdf`</span>);
}
</code></pre>
<p>è®¢å•å·ä¸å‘ç¥¨å·éœ€ä¸€ä¸€å¯¹åº”ã€å¯å®¡è®¡ï¼Œæ•…é€‰<strong>ä¸²è¡Œ</strong>ã€‚</p>
<h4 data-id="heading-16">C. æŠ¥è¡¨å¹¶è¡Œæ¸²æŸ“ï¼ˆå¤±è´¥å¯å®¹å¿ï¼‰</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> jobs = views.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">view</span> =&gt;</span> <span class="hljs-title function_">renderReport</span>(view));
<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">allSettled</span>(jobs);
<span class="hljs-keyword">const</span> okReports = result.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x.<span class="hljs-property">status</span> === <span class="hljs-string">'fulfilled'</span>);
</code></pre>
<h3 data-id="heading-17">æŸäº›æŠ¥è¡¨å¤±è´¥ä¸å½±å“å…¶ä»–æˆåŠŸäº¤ä»˜ï¼Œ<strong>ç”¨ <code>allSettled</code> æ”¶æ•›</strong>æ›´ç¨³å¦¥ã€‚</h3>
<h3 data-id="heading-18">é€ŸæŸ¥æ¸…å• / å†³ç­–æ ‘</h3>
<ol>
<li><strong>æ˜¯å¦å¿…é¡»ä¿æŒé¡ºåºæˆ–ä¸¥æ ¼é™é€Ÿï¼Ÿ</strong> æ˜¯ â†’ <code>for...of + await</code>ï¼›å¦ â†’ 2ã€‚îˆ€citeîˆ‚turn1search40îˆ</li>
<li><strong>æ˜¯å¦éœ€è¦å°½å¿«å®Œæˆä¸”ä»»åŠ¡å½¼æ­¤ç‹¬ç«‹ï¼Ÿ</strong> æ˜¯ â†’ <code>Promise.all(map(...))</code>ï¼›å¦ â†’ 3ã€‚îˆ€citeîˆ‚turn1search10îˆ</li>
<li><strong>æ˜¯å¦æ‹…å¿ƒå‹å®ä¸Šæ¸¸æˆ–è‡ªèº«ï¼Ÿ</strong> æ˜¯ â†’ <code>p-limit</code> è®¾å®šå¹¶å‘ä¸Šé™ï¼›å¦ â†’ ç›´æ¥ <code>Promise.all</code>ã€‚</li>
<li><strong>æ˜¯å¦éœ€è¦â€œå…¨éƒ¨ç»“æœéƒ½è¦æ‹¿åˆ°â€ç”¨äºæ±‡æ€»/å®¡è®¡ï¼Ÿ</strong> ç”¨ <code>Promise.allSettled</code>ã€‚îˆ€citeîˆ‚turn1search34îˆ</li>
<li><strong>æ•°æ®åƒâ€œæµæ°´â€èˆ¬åˆ°è¾¾ï¼Ÿ</strong> ç”¨ <code>forâ€‘awaitâ€‘of</code> / <code>Array.fromAsync</code>ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰“é€ ç‚«é…·3Dç§‘æŠ€åœ°çƒï¼šThree.jså®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7570268773334253595</link>    <guid>https://juejin.cn/post/7570268773334253595</guid>    <pubDate>2025-11-10T03:16:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570268773334253595" data-draft-id="7570299986531074075" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰“é€ ç‚«é…·3Dç§‘æŠ€åœ°çƒï¼šThree.jså®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="three.js"/> <meta itemprop="datePublished" content="2025-11-10T03:16:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SeanTao"/> <meta itemprop="url" content="https://juejin.cn/user/778899350105880"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰“é€ ç‚«é…·3Dç§‘æŠ€åœ°çƒï¼šThree.jså®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/778899350105880/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SeanTao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T03:16:09.000Z" title="Mon Nov 10 2025 03:16:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ‰“é€ ç‚«é…·3Dç§‘æŠ€åœ°çƒï¼šThree.jså®æˆ˜æŒ‡å—</h2>
<p>æœ¬æ–‡å°†é€šè¿‡ä¸€ä¸ªå…·ä½“çš„3Dç§‘æŠ€åœ°çƒå®ç°æ¡ˆä¾‹ï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ æ¢ç´¢ä½¿ç”¨Three.jsåˆ›å»ºäº¤äº’å¼3Då¯è§†åŒ–é¡¹ç›®çš„å®Œæ•´æµç¨‹ã€‚æˆ‘ä»¬å°†æ·±å…¥ä»£ç ç»†èŠ‚ï¼Œè§£ææ ¸å¿ƒæŠ€æœ¯å®ç°ï¼Œå¹¶åˆ†äº«ä¼˜åŒ–æŠ€å·§ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€é¡¹ç›®æ¦‚è¿°ä¸æ ¸å¿ƒæŠ€æœ¯æ ˆ</h3>
<p>è¿™ä¸ª3Dç§‘æŠ€åœ°çƒé¡¹ç›®åŸºäº<strong>React+Three.js</strong>æŠ€æœ¯æ ˆæ„å»ºï¼Œé‡‡ç”¨äº†ç°ä»£å‰ç«¯å¼€å‘çš„æœ€ä½³å®è·µã€‚é¡¹ç›®ä¸ä»…å®ç°äº†åŸºæœ¬çš„3Dåœ°çƒå±•ç¤ºï¼Œè¿˜åŒ…å«äº†æ˜Ÿç©ºèƒŒæ™¯ã€å‘å…‰æ•ˆæœã€å›½å®¶é«˜äº®ã€å¹³æ»‘äº¤äº’ç­‰é«˜çº§ç‰¹æ€§ã€‚</p>
<p>ä»ä»£ç ç»“æ„æ¥çœ‹ï¼Œè¿™ä¸ªç»„ä»¶æ¶µç›–äº†Three.jsçš„æ ¸å¿ƒæ¦‚å¿µï¼šåœºæ™¯(Scene)ã€ç›¸æœº(Camera)ã€æ¸²æŸ“å™¨(Renderer)ã€å‡ ä½•ä½“(Geometry)å’Œæè´¨(Material)ã€‚é€šè¿‡è‰¯å¥½çš„ä»£ç ç»„ç»‡ï¼Œå°†å¤æ‚çš„ä¸‰ç»´å¯è§†åŒ–æ‹†åˆ†ä¸ºå¯ç»´æŠ¤çš„æ¨¡å—åŒ–ç»“æ„ã€‚</p>
<h3 data-id="heading-2">äºŒã€ä¸‰ç»´åœºæ™¯æ„å»ºï¼šä»é›¶æ­å»ºåœ°çƒæ¨¡å‹</h3>
<h4 data-id="heading-3">1. ä¸‰å¤§æ ¸å¿ƒè¦ç´ åˆå§‹åŒ–</h4>
<p>ä»»ä½•Three.jsé¡¹ç›®éƒ½å§‹äºä¸‰å¤§æ ¸å¿ƒè¦ç´ çš„åˆ›å»ºï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// åœºæ™¯è®¾ç½®</span>
<span class="hljs-keyword">const</span> scene = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Scene</span>()
sceneRef.<span class="hljs-property">current</span> = scene

<span class="hljs-comment">// æ‘„åƒæœºè®¾ç½®</span>
<span class="hljs-keyword">const</span> camera = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(
  <span class="hljs-number">75</span>,
  mountRef.<span class="hljs-property">current</span>.<span class="hljs-property">clientWidth</span> / mountRef.<span class="hljs-property">current</span>.<span class="hljs-property">clientHeight</span>,
  <span class="hljs-number">0.1</span>,
  <span class="hljs-number">1000</span>
)
camera.<span class="hljs-property">position</span>.<span class="hljs-property">z</span> = <span class="hljs-number">4</span>

<span class="hljs-comment">// æ¸²æŸ“å™¨è®¾ç½®</span>
<span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>({
  <span class="hljs-attr">antialias</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">alpha</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">logarithmicDepthBuffer</span>: <span class="hljs-literal">true</span>
})
renderer.<span class="hljs-title function_">setSize</span>(mountRef.<span class="hljs-property">current</span>.<span class="hljs-property">clientWidth</span>, mountRef.<span class="hljs-property">current</span>.<span class="hljs-property">clientHeight</span>)
</code></pre>
<p>é€è§†æ‘„åƒæœºçš„è®¾ç½®ä¿è¯äº†æˆ‘ä»¬çœ‹åˆ°çš„åœ°çƒå…·æœ‰çœŸå®çš„è¿‘å¤§è¿œå°æ•ˆæœï¼Œè€Œæ¸²æŸ“å™¨çš„é«˜è´¨é‡æŠ—é”¯é½¿å’Œå¯¹æ•°æ·±åº¦ç¼“å†²åŒºé…ç½®åˆ™ç¡®ä¿äº†æœ€ç»ˆç”»é¢çš„æ¸…æ™°åº¦å’Œå±‚æ¬¡æ„Ÿã€‚</p>
<h4 data-id="heading-4">2. åœ°çƒå‡ ä½•ä½“ä¸æè´¨åˆ¶ä½œ</h4>
<p>åœ°çƒçš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªçƒä½“å‡ ä½•ä½“ç»“åˆè‡ªå®šä¹‰çº¹ç†ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> geometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">SphereGeometry</span>(<span class="hljs-number">1</span>, <span class="hljs-number">64</span>, <span class="hljs-number">64</span>)
</code></pre>
<p>è¿™é‡Œä½¿ç”¨64çš„å®½åº¦å’Œé«˜åº¦åˆ†æ®µæ•°ï¼Œåœ¨ä¿è¯å¹³æ»‘åº¦çš„åŒæ—¶ä¼˜åŒ–æ€§èƒ½ã€‚åœ°çƒæè´¨çš„å…³é”®åœ¨äºä½¿ç”¨CanvasåŠ¨æ€ç”Ÿæˆçº¹ç†ï¼Œè€Œéç®€å•çš„å›¾ç‰‡è´´å›¾ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// åˆ›å»ºåœ°çƒçº¹ç†ï¼ˆä¸»æ˜¾ç¤ºï¼šå‘å…‰è¾¹ç•Œçº¿ï¼‰</span>
<span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'canvas'</span>)
canvas.<span class="hljs-property">width</span> = <span class="hljs-number">2048</span>
canvas.<span class="hljs-property">height</span> = <span class="hljs-number">1024</span>  <span class="hljs-comment">// 2:1æ¯”ä¾‹åŒ¹é…ç­‰è·åœ†æŸ±æŠ•å½±</span>
<span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>)
</code></pre>
<p>è¿™ç§åŠ¨æ€çº¹ç†ç”ŸæˆæŠ€æœ¯è®©æˆ‘ä»¬èƒ½å¤Ÿç¨‹åºåŒ–åœ°ç»˜åˆ¶å›½å®¶è¾¹ç•Œå’Œç»çº¬çº¿ï¼Œä¸ºåç»­çš„å›½å®¶é«˜äº®åŠŸèƒ½å¥ å®šåŸºç¡€ã€‚</p>
<h3 data-id="heading-5">ä¸‰ã€è§†è§‰å¢å¼ºæ•ˆæœå‰–æ</h3>
<h4 data-id="heading-6">1. å¤šå±‚å‘å…‰æ•ˆæœå®ç°</h4>
<p>é¡¹ç›®é€šè¿‡å¤šå±‚å åŠ å®ç°äº†ä¸°å¯Œçš„å‘å…‰æ•ˆæœï¼š</p>
<ul>
<li><strong>å¤§æ°”å±‚æ•ˆæœ</strong>ï¼šä½¿ç”¨ç¨å¤§çš„çƒä½“åŠé€æ˜æè´¨æ¨¡æ‹Ÿå¤§æ°”</li>
<li><strong>è¾¹ç¼˜å‘å…‰</strong>ï¼šé€šè¿‡è‡ªå®šä¹‰ç€è‰²å™¨å®ç°åŸºäºæ³•å‘é‡çš„è¾¹ç¼˜å…‰æ™•</li>
<li><strong>å¤šå±‚è¾‰å…‰</strong>ï¼šä¸åŒåŠå¾„çš„å‘å…‰çƒä½“å åŠ åˆ›é€ æ·±åº¦æ„Ÿ</li>
</ul>
<p>é¡¶ç‚¹ç€è‰²å™¨ä¸­è®¡ç®—æ³•å‘é‡ä¸è§†çº¿æ–¹å‘çš„å¤¹è§’ï¼Œç‰‡æ®µç€è‰²å™¨ä¸­æ ¹æ®å¤¹è§’å¼ºåº¦å†³å®šå‘å…‰å¼ºåº¦ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// è¾¹ç¼˜å‘å…‰ç€è‰²å™¨æ ¸å¿ƒä»£ç </span>
float intensity = <span class="hljs-title function_">pow</span>(<span class="hljs-number">0.6</span> - <span class="hljs-title function_">dot</span>(vNormal, <span class="hljs-title function_">vec3</span>(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>)), <span class="hljs-number">3.0</span>)
vec3 glow = color * intensity * <span class="hljs-number">2.0</span>
</code></pre>
<p>è¿™ç§åŸºäºæ³•å‘é‡çš„å‘å…‰è®¡ç®—æ–¹å¼ï¼Œèƒ½å¤Ÿåœ¨ç‰©ä½“è¾¹ç¼˜äº§ç”Ÿè‡ªç„¶çš„å…‰æ™•æ•ˆæœã€‚</p>
<p>å®Œæ•´å®ç°</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// åˆ›å»ºæ›´å¼ºçƒˆçš„å¤§æ°”å±‚æ•ˆæœ</span>
<span class="hljs-keyword">const</span> atmosphereGeometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">SphereGeometry</span>(<span class="hljs-number">1.02</span>, <span class="hljs-number">64</span>, <span class="hljs-number">64</span>)
<span class="hljs-keyword">const</span> atmosphereMaterial = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshBasicMaterial</span>({
  <span class="hljs-attr">color</span>: <span class="hljs-number">0x00CCFF</span>,
  <span class="hljs-attr">transparent</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">opacity</span>: <span class="hljs-number">0.2</span>,
  <span class="hljs-attr">side</span>: <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">DoubleSide</span>,
  <span class="hljs-attr">blending</span>: <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">AdditiveBlending</span>
})
<span class="hljs-keyword">const</span> atmosphere = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(atmosphereGeometry, atmosphereMaterial)
scene.<span class="hljs-title function_">add</span>(atmosphere)

<span class="hljs-comment">// åˆ›å»ºå¤šå±‚å‘å…‰è¾¹ç¼˜æ•ˆæœ</span>
<span class="hljs-keyword">const</span> glowGeometry1 = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">SphereGeometry</span>(<span class="hljs-number">1</span>, <span class="hljs-number">64</span>, <span class="hljs-number">64</span>)
<span class="hljs-keyword">const</span> glowMaterial1 = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">ShaderMaterial</span>({
  <span class="hljs-attr">uniforms</span>: {
    <span class="hljs-attr">time</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">0</span> },
    <span class="hljs-attr">color</span>: { <span class="hljs-attr">value</span>: <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Color</span>(<span class="hljs-number">0x00FFFF</span>) }
  },
  <span class="hljs-attr">vertexShader</span>: <span class="hljs-string">`
    varying vec3 vNormal;
    varying vec3 vPosition;
    void main() {
      vNormal = normalize(normalMatrix * normal);
      vPosition = position;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
  `</span>,
  <span class="hljs-attr">fragmentShader</span>: <span class="hljs-string">`
    uniform float time;
    uniform vec3 color;
    varying vec3 vNormal;
    varying vec3 vPosition;
    void main() {
      float intensity = pow(0.6 - dot(vNormal, vec3(0.0, 0.0, 1.0)), 3.0);
      vec3 glow = color * intensity * 2.0;
      gl_FragColor = vec4(glow, intensity * 1.2);
    }
  `</span>,
  <span class="hljs-attr">transparent</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">side</span>: <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">BackSide</span>,
  <span class="hljs-attr">blending</span>: <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">AdditiveBlending</span>
})
<span class="hljs-keyword">const</span> glowMesh1 = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(glowGeometry1, glowMaterial1)
scene.<span class="hljs-title function_">add</span>(glowMesh1)

<span class="hljs-comment">// å¤–å±‚å‘å…‰æ•ˆæœ</span>
<span class="hljs-keyword">const</span> glowGeometry2 = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">SphereGeometry</span>(<span class="hljs-number">1.06</span>, <span class="hljs-number">64</span>, <span class="hljs-number">64</span>)
<span class="hljs-keyword">const</span> glowMaterial2 = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">ShaderMaterial</span>({
  <span class="hljs-attr">uniforms</span>: {
    <span class="hljs-attr">time</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">0</span> },
    <span class="hljs-attr">color</span>: { <span class="hljs-attr">value</span>: <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Color</span>(<span class="hljs-number">61</span>, <span class="hljs-number">131</span>, <span class="hljs-number">199</span>) }
  },
  <span class="hljs-attr">vertexShader</span>: <span class="hljs-string">`
    varying vec3 vNormal;
    void main() {
      vNormal = normalize(normalMatrix * normal);
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
  `</span>,
  <span class="hljs-attr">fragmentShader</span>: <span class="hljs-string">`
    uniform float time;
    uniform vec3 color;
    varying vec3 vNormal;
    void main() {
      float intensity = pow(0.8 - dot(vNormal, vec3(0.0, 0.0, 1.0)), 2.0);
      vec3 glow = color * intensity * 1.5;
      gl_FragColor = vec4(glow, intensity * 0.8);
    }
  `</span>,
  <span class="hljs-attr">transparent</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">side</span>: <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">BackSide</span>,
  <span class="hljs-attr">blending</span>: <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">AdditiveBlending</span>
})
<span class="hljs-keyword">const</span> glowMesh2 = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(glowGeometry2, glowMaterial2)
scene.<span class="hljs-title function_">add</span>(glowMesh2)
</code></pre>
<h4 data-id="heading-7">2. æ˜Ÿç©ºèƒŒæ™¯ç”Ÿæˆ</h4>
<p>æ˜Ÿç©ºèƒŒæ™¯å¹¶éä½¿ç”¨é™æ€è´´å›¾ï¼Œè€Œæ˜¯é€šè¿‡ç¨‹åºåŒ–ç”Ÿæˆï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> starGeometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BufferGeometry</span>()
<span class="hljs-keyword">const</span> starCount = <span class="hljs-number">5000</span>
<span class="hljs-keyword">const</span> positions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Float32Array</span>(starCount * <span class="hljs-number">3</span>)
<span class="hljs-keyword">const</span> colors = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Float32Array</span>(starCount * <span class="hljs-number">3</span>)
</code></pre>
<p>é€šè¿‡éšæœºç”Ÿæˆæ˜Ÿæ˜Ÿä½ç½®å’Œç§‘æŠ€è“è‰²è°ƒï¼Œåˆ›å»ºäº†æ·±é‚ƒè€Œæœ‰ç§‘æŠ€æ„Ÿçš„æ˜Ÿç©ºèƒŒæ™¯ï¼Œè¿™ç§åŠ¨æ€ç”Ÿæˆæ–¹å¼ç›¸æ¯”è´´å›¾å…·æœ‰æ›´å°çš„èµ„æºä½“ç§¯ã€‚</p>
<p>å®Œæ•´å®ç°</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// åˆ›å»ºæ˜Ÿç©ºèƒŒæ™¯</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">createStarField</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> starGeometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BufferGeometry</span>()
  <span class="hljs-keyword">const</span> starCount = <span class="hljs-number">5000</span>
  <span class="hljs-keyword">const</span> positions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Float32Array</span>(starCount * <span class="hljs-number">3</span>)
  <span class="hljs-keyword">const</span> colors = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Float32Array</span>(starCount * <span class="hljs-number">3</span>)

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; starCount * <span class="hljs-number">3</span>; i += <span class="hljs-number">3</span>) {
    positions[i] = (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() - <span class="hljs-number">0.5</span>) * <span class="hljs-number">2000</span>
    positions[i + <span class="hljs-number">1</span>] = (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() - <span class="hljs-number">0.5</span>) * <span class="hljs-number">2000</span>
    positions[i + <span class="hljs-number">2</span>] = (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() - <span class="hljs-number">0.5</span>) * <span class="hljs-number">2000</span>

    <span class="hljs-comment">// ç§‘æŠ€è“è‰²è°ƒçš„æ˜Ÿæ˜Ÿ</span>
    <span class="hljs-keyword">const</span> intensity = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">0.5</span> + <span class="hljs-number">0.5</span>
    colors[i] = <span class="hljs-number">0.2</span> * intensity     <span class="hljs-comment">// R</span>
    colors[i + <span class="hljs-number">1</span>] = <span class="hljs-number">0.6</span> * intensity <span class="hljs-comment">// G</span>
    colors[i + <span class="hljs-number">2</span>] = intensity       <span class="hljs-comment">// B</span>
  }

  starGeometry.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'position'</span>, <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BufferAttribute</span>(positions, <span class="hljs-number">3</span>))
  starGeometry.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'color'</span>, <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BufferAttribute</span>(colors, <span class="hljs-number">3</span>))

  <span class="hljs-keyword">const</span> starMaterial = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PointsMaterial</span>({
    <span class="hljs-attr">size</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">vertexColors</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">transparent</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">opacity</span>: <span class="hljs-number">0.8</span>
  })

  <span class="hljs-keyword">const</span> stars = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Points</span>(starGeometry, starMaterial)
  scene.<span class="hljs-title function_">add</span>(stars)
  <span class="hljs-keyword">return</span> stars
}
</code></pre>
<h3 data-id="heading-8">å››ã€äº¤äº’ç³»ç»Ÿæ·±åº¦è§£æ</h3>
<h4 data-id="heading-9">1. é¼ æ ‡ä¸è§¦æ‘¸äº¤äº’å¤„ç†</h4>
<p>é¡¹ç›®å®ç°äº†å®Œæ•´çš„é¼ æ ‡å’Œè§¦æ‘¸äº‹ä»¶å¤„ç†ç³»ç»Ÿï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseMove</span> = (<span class="hljs-params">event</span>) =&gt; {
  <span class="hljs-keyword">if</span> (isDragging) {
    <span class="hljs-keyword">const</span> deltaX = event.<span class="hljs-property">clientX</span> - previousMousePosition.<span class="hljs-property">x</span>
    <span class="hljs-keyword">const</span> deltaY = event.<span class="hljs-property">clientY</span> - previousMousePosition.<span class="hljs-property">y</span>

    rotationSpeed.<span class="hljs-property">y</span> = deltaX * <span class="hljs-number">0.01</span>
    rotationSpeed.<span class="hljs-property">x</span> = deltaY * <span class="hljs-number">0.01</span>

    previousMousePosition = {
      <span class="hljs-attr">x</span>: event.<span class="hljs-property">clientX</span>,
      <span class="hljs-attr">y</span>: event.<span class="hljs-property">clientY</span>
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// ç²¾ç¡®å›½å®¶æ£€æµ‹ï¼ˆå°„çº¿-&gt;ç»çº¬åº¦-&gt;å¤šè¾¹å½¢åˆ¤æ–­ï¼‰</span>
    <span class="hljs-keyword">const</span> rect = mountRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">getBoundingClientRect</span>()
    mouse.<span class="hljs-property">x</span> = ((event.<span class="hljs-property">clientX</span> - rect.<span class="hljs-property">left</span>) / rect.<span class="hljs-property">width</span>) * <span class="hljs-number">2</span> - <span class="hljs-number">1</span>
    mouse.<span class="hljs-property">y</span> = -((event.<span class="hljs-property">clientY</span> - rect.<span class="hljs-property">top</span>) / rect.<span class="hljs-property">height</span>) * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>

    raycaster.<span class="hljs-title function_">setFromCamera</span>(mouse, camera)
    raycaster.<span class="hljs-property">near</span> = <span class="hljs-number">0.1</span>
    raycaster.<span class="hljs-property">far</span> = <span class="hljs-number">10</span>

    <span class="hljs-keyword">if</span> (globe) {
      <span class="hljs-keyword">const</span> intersects = raycaster.<span class="hljs-title function_">intersectObject</span>(globe)
      <span class="hljs-keyword">if</span> (intersects.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// æœ€è¿‘äº¤ç‚¹</span>
        <span class="hljs-keyword">let</span> nearestIntersect = intersects[<span class="hljs-number">0</span>]
        <span class="hljs-keyword">if</span> (intersects.<span class="hljs-property">length</span> &gt; <span class="hljs-number">1</span>) {
          nearestIntersect = intersects.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">nearest, current</span>) =&gt;</span> (
            current.<span class="hljs-property">distance</span> &lt; nearest.<span class="hljs-property">distance</span> ? current : nearest
          ))
        }

        <span class="hljs-comment">// å°†äº¤ç‚¹è½¬åˆ°çƒä½“å±€éƒ¨åæ ‡å¹¶å½’ä¸€åŒ–</span>
        <span class="hljs-keyword">const</span> intersectionPoint = nearestIntersect.<span class="hljs-property">point</span>.<span class="hljs-title function_">clone</span>()
        <span class="hljs-keyword">const</span> localIntersectionPoint = intersectionPoint.<span class="hljs-title function_">clone</span>()
        <span class="hljs-keyword">const</span> inverseMatrix = globe.<span class="hljs-property">matrixWorld</span>.<span class="hljs-title function_">clone</span>().<span class="hljs-title function_">invert</span>()
        localIntersectionPoint.<span class="hljs-title function_">applyMatrix4</span>(inverseMatrix)
        localIntersectionPoint.<span class="hljs-title function_">normalize</span>()

        <span class="hljs-keyword">const</span> { lon, lat } = <span class="hljs-title function_">cartesianToLonLat</span>(localIntersectionPoint)
        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">isNaN</span>(lat) &amp;&amp; !<span class="hljs-built_in">isNaN</span>(lon)) {
          <span class="hljs-title function_">checkCountryAtCoordinate</span>(lon, lat)
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æ²¡æœ‰äº¤ç‚¹æ—¶æ¸…é™¤é«˜äº®</span>
        <span class="hljs-title function_">proposeHover</span>(<span class="hljs-literal">null</span>)
      }
    }
  }
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseUp</span> = (<span class="hljs-params"/>) =&gt; {
  isDragging = <span class="hljs-literal">false</span>
  mountRef.<span class="hljs-property">current</span>.<span class="hljs-property">style</span>.<span class="hljs-property">cursor</span> = <span class="hljs-string">'grab'</span>
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseLeave</span> = (<span class="hljs-params"/>) =&gt; {
  isDragging = <span class="hljs-literal">false</span>
  mountRef.<span class="hljs-property">current</span>.<span class="hljs-property">style</span>.<span class="hljs-property">cursor</span> = <span class="hljs-string">'grab'</span>

  <span class="hljs-comment">// æ¸…é™¤é«˜äº®æ•ˆæœï¼ˆå¸¦æ·¡å‡ºï¼‰</span>
  <span class="hljs-title function_">proposeHover</span>(<span class="hljs-literal">null</span>)
}

<span class="hljs-comment">// æ»šè½®ç¼©æ”¾</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleWheel</span> = (<span class="hljs-params">e</span>) =&gt; {
   e.<span class="hljs-title function_">preventDefault</span>()
   <span class="hljs-keyword">const</span> speed = e.<span class="hljs-property">ctrlKey</span> ? <span class="hljs-number">0.01</span> : <span class="hljs-number">0.002</span>
   targetCameraZ = <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">MathUtils</span>.<span class="hljs-title function_">clamp</span>(
       targetCameraZ + e.<span class="hljs-property">deltaY</span> * speed,
       minCameraZ,
       maxCameraZ
   )
}

</code></pre>
<p>é€šè¿‡é€Ÿåº¦è¡°å‡ç®—æ³•(<code>rotationSpeed *= 0.95</code>)å®ç°äº†è‡ªç„¶çš„æ—‹è½¬æƒ¯æ€§æ•ˆæœï¼Œå¤§å¤§æå‡äº†äº¤äº’ä½“éªŒã€‚</p>
<p>åŠ¨ç”»æ•ˆæœå®ç°</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">animate</span> = (<span class="hljs-params"/>) =&gt; {
  frameRef.<span class="hljs-property">current</span> = <span class="hljs-title function_">requestAnimationFrame</span>(animate)

  <span class="hljs-keyword">const</span> time = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() * <span class="hljs-number">0.001</span>
  <span class="hljs-keyword">const</span> nowTs = performance.<span class="hljs-title function_">now</span>()
  <span class="hljs-keyword">const</span> dt = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">0.05</span>, (nowTs - lastFrameTs) / <span class="hljs-number">1000</span>) <span class="hljs-comment">// é¿å…é•¿æ—¶é—´åˆ‡å›å¯¼è‡´è·³å˜</span>
  lastFrameTs = nowTs

  <span class="hljs-comment">// åœ°çƒæ—‹è½¬ï¼ˆè‡ªè½¬ + æ‹–æ‹½æ—‹è½¬ï¼‰</span>
  <span class="hljs-keyword">if</span> (globe) {
    globe.<span class="hljs-property">rotation</span>.<span class="hljs-property">y</span> += <span class="hljs-number">0.002</span>
    globe.<span class="hljs-property">rotation</span>.<span class="hljs-property">y</span> += rotationSpeed.<span class="hljs-property">y</span>
    globe.<span class="hljs-property">rotation</span>.<span class="hljs-property">x</span> += rotationSpeed.<span class="hljs-property">x</span>
    rotationSpeed.<span class="hljs-property">x</span> *= <span class="hljs-number">0.95</span>
    rotationSpeed.<span class="hljs-property">y</span> *= <span class="hljs-number">0.95</span>
    globe.<span class="hljs-property">rotation</span>.<span class="hljs-property">x</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(-<span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">2</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">2</span>, globe.<span class="hljs-property">rotation</span>.<span class="hljs-property">x</span>))
    <span class="hljs-keyword">if</span> (highlightGlobe) highlightGlobe.<span class="hljs-property">rotation</span>.<span class="hljs-title function_">copy</span>(globe.<span class="hljs-property">rotation</span>)
  }

  <span class="hljs-comment">// å¹³æ»‘å˜ç„¦</span>
  camera.<span class="hljs-property">position</span>.<span class="hljs-property">z</span> += (targetCameraZ - camera.<span class="hljs-property">position</span>.<span class="hljs-property">z</span>) * <span class="hljs-number">0.15</span>

  <span class="hljs-keyword">if</span> (atmosphere) atmosphere.<span class="hljs-property">rotation</span>.<span class="hljs-property">y</span> += <span class="hljs-number">0.002</span>
  <span class="hljs-keyword">if</span> (glowMesh) glowMesh.<span class="hljs-property">material</span>.<span class="hljs-property">uniforms</span>.<span class="hljs-property">time</span>.<span class="hljs-property">value</span> = time
  <span class="hljs-keyword">if</span> (glowMesh2) glowMesh2.<span class="hljs-property">material</span>.<span class="hljs-property">uniforms</span>.<span class="hljs-property">time</span>.<span class="hljs-property">value</span> = time
  <span class="hljs-keyword">if</span> (starField) {
    starField.<span class="hljs-property">rotation</span>.<span class="hljs-property">y</span> += <span class="hljs-number">0.0002</span>
    starField.<span class="hljs-property">rotation</span>.<span class="hljs-property">x</span> += <span class="hljs-number">0.0001</span>
  }

  <span class="hljs-comment">// é«˜äº®è¿‡æ¸¡æ¨è¿› &amp; é‡ç»˜</span>
  <span class="hljs-keyword">if</span> (highlightPrev !== <span class="hljs-literal">null</span> || highlightNext !== <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">if</span> (highlightPrev === highlightNext) {
      <span class="hljs-comment">// ä¸åº”å‡ºç°ï¼Œä½†é˜²å¾¡ï¼šåˆå¹¶çŠ¶æ€</span>
      highlightPrev = <span class="hljs-literal">null</span>
      highlightT = <span class="hljs-number">1</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (highlightT &lt; <span class="hljs-number">1</span>) {
      highlightT = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">1</span>, highlightT + dt * <span class="hljs-variable constant_">HIGHLIGHT_FADE_SPEED</span>)
    }
  }

  <span class="hljs-comment">// ä»…åœ¨å¿…è¦æ—¶é‡ç»˜é«˜äº®å±‚</span>
  <span class="hljs-keyword">const</span> needRedraw = (
    highlightGlobe &amp;&amp; (
      lastRenderedPrev !== highlightPrev ||
      lastRenderedNext !== highlightNext ||
      <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(lastRenderedT - highlightT) &gt; <span class="hljs-number">1e-3</span>
    )
  )
  <span class="hljs-keyword">if</span> (needRedraw) {
    <span class="hljs-title function_">renderHighlightBlend</span>()
    lastRenderedPrev = highlightPrev
    lastRenderedNext = highlightNext
    lastRenderedT = highlightT

    <span class="hljs-comment">// è¿‡æ¸¡å®Œæˆåï¼Œä¸¢å¼ƒ prevï¼Œé¿å…æŒç»­åŒå±‚ç»˜åˆ¶</span>
    <span class="hljs-keyword">if</span> (highlightT === <span class="hljs-number">1</span> &amp;&amp; highlightPrev) {
      highlightPrev = <span class="hljs-literal">null</span>
    }
  }

  <span class="hljs-comment">// æ›´æ–°å·¦ä¸Šè§’æ ‡ç­¾ï¼ˆåœ¨è¿‡æ¸¡ä¸­åšä¸€ç‚¹â€œåŠé˜ˆå€¼åˆ‡æ¢â€ï¼‰</span>
  <span class="hljs-keyword">let</span> label = <span class="hljs-literal">null</span>
  <span class="hljs-keyword">if</span> (highlightNext &amp;&amp; (highlightT &gt; <span class="hljs-number">0.6</span> || !highlightPrev)) label = highlightNext
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (highlightPrev) label = highlightPrev
  <span class="hljs-keyword">if</span> (label !== lastLabelName) {
    lastLabelName = label
    <span class="hljs-title function_">setHoveredCountry</span>(label || <span class="hljs-literal">null</span>)
  }

  renderer.<span class="hljs-title function_">render</span>(scene, camera)
}
</code></pre>
<h4 data-id="heading-10">2. å›½å®¶é«˜äº®æ£€æµ‹æŠ€æœ¯</h4>
<p>å›½å®¶é«˜äº®æ˜¯æœ¬é¡¹ç›®çš„ä¸€å¤§æŠ€æœ¯äº®ç‚¹ï¼Œå…¶å®ç°æ¶‰åŠå¤æ‚çš„å‡ ä½•è®¡ç®—ï¼š</p>
<p><strong>å°„çº¿æŠ•å°„æ£€æµ‹</strong></p>
<pre><code class="hljs language-jsx" lang="jsx">raycaster.<span class="hljs-title function_">setFromCamera</span>(mouse, camera)
<span class="hljs-keyword">const</span> intersects = raycaster.<span class="hljs-title function_">intersectObject</span>(globe)
</code></pre>
<p><strong>ç»çº¬åº¦è½¬æ¢</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">cartesianToLonLat</span> = (<span class="hljs-params">pointLocalUnit</span>) =&gt; {
  <span class="hljs-keyword">const</span> x = pointLocalUnit.<span class="hljs-property">x</span>
  <span class="hljs-comment">// ... åæ ‡è½¬æ¢æ•°å­¦</span>
  <span class="hljs-keyword">return</span> { lon, lat }
}
</code></pre>
<p><strong>å¤šè¾¹å½¢åŒ…å«æ£€æµ‹</strong></p>
<p>ä½¿ç”¨å°„çº¿æ³•åˆ¤æ–­ç‚¹æ˜¯å¦åœ¨å¤šè¾¹å½¢å†…ï¼Œæ”¯æŒå¤æ‚çš„å¤šè¾¹å½¢å’Œå­”æ´æ£€æµ‹ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">pointInRing</span> = (<span class="hljs-params">lon, lat, ring</span>) =&gt; {
  <span class="hljs-keyword">let</span> inside = <span class="hljs-literal">false</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = ring.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>; i &lt; ring.<span class="hljs-property">length</span>; j = i++) {
    <span class="hljs-keyword">const</span> xi = <span class="hljs-title function_">normalizeLonToRef</span>(ring[i][<span class="hljs-number">0</span>], lon)
    <span class="hljs-keyword">const</span> yi = ring[i][<span class="hljs-number">1</span>]
    <span class="hljs-keyword">const</span> xj = <span class="hljs-title function_">normalizeLonToRef</span>(ring[j][<span class="hljs-number">0</span>], lon)
    <span class="hljs-keyword">const</span> yj = ring[j][<span class="hljs-number">1</span>]
    <span class="hljs-keyword">const</span> intersect = ((yi &gt; lat) !== (yj &gt; lat)) &amp;&amp;
      (lon &lt; (xj - xi) * (lat - yi) / (yj - yi + <span class="hljs-number">1e-12</span>) + xi)
    <span class="hljs-keyword">if</span> (intersect) inside = !inside
  }
  <span class="hljs-keyword">return</span> inside
}
</code></pre>
<p>ä¸ºäº†è§£å†³è·¨è¶ŠÂ±180Â°ç»çº¿çš„å›½å®¶æ˜¾ç¤ºé—®é¢˜ï¼Œé¡¹ç›®å®ç°äº†<strong>å¤šé‡è¾¹ç•Œæ¡†æ£€æµ‹</strong>å’Œ<strong>ç»åº¦å½’ä¸€åŒ–</strong>ç®—æ³•ï¼Œç¡®ä¿æ‰€æœ‰å›½å®¶éƒ½èƒ½è¢«æ­£ç¡®è¯†åˆ«ã€‚</p>
<h3 data-id="heading-11">äº”ã€æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h3>
<h4 data-id="heading-12">1. æ¸²æŸ“ä¼˜åŒ–</h4>
<ul>
<li><strong>æŒ‰éœ€æ¸²æŸ“</strong>ï¼šä»…åœ¨çŠ¶æ€å˜åŒ–æ—¶æ›´æ–°é«˜äº®çº¹ç†</li>
<li><strong>èµ„æºç®¡ç†</strong>ï¼šé€‚æ—¶é‡Šæ”¾å‡ ä½•ä½“å’Œæè´¨èµ„æº</li>
<li><strong>åŠ¨ç”»å¸§ä¼˜åŒ–</strong>ï¼šä½¿ç”¨<code>requestAnimationFrame</code>å®ç°æµç•…åŠ¨ç”»</li>
</ul>
<h4 data-id="heading-13">2. å†…å­˜ä¼˜åŒ–</h4>
<p>ç»„ä»¶å¸è½½æ—¶æ­£ç¡®é‡Šæ”¾Three.jsèµ„æºï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">scene.<span class="hljs-title function_">traverse</span>(<span class="hljs-function">(<span class="hljs-params">child</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (child.<span class="hljs-property">geometry</span>) child.<span class="hljs-property">geometry</span>.<span class="hljs-title function_">dispose</span>()
  <span class="hljs-keyword">if</span> (child.<span class="hljs-property">material</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(child.<span class="hljs-property">material</span>)) 
      child.<span class="hljs-property">material</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">m</span> =&gt;</span> m.<span class="hljs-title function_">dispose</span>())
    <span class="hljs-keyword">else</span> child.<span class="hljs-property">material</span>.<span class="hljs-title function_">dispose</span>()
  }
})
renderer.<span class="hljs-title function_">dispose</span>()
</code></pre>
<p>è¿™ç§èµ„æºæ¸…ç†é˜²æ­¢äº†å†…å­˜æ³„æ¼ï¼Œä¿è¯äº†åº”ç”¨çš„é•¿æœŸç¨³å®šè¿è¡Œã€‚</p>
<h3 data-id="heading-14">å…­ã€æŠ€æœ¯äº®ç‚¹ä¸åˆ›æ–°</h3>
<ol>
<li><strong>å¹³æ»‘é«˜äº®è¿‡æ¸¡</strong>ï¼šé€šè¿‡alphaæ··åˆå’ŒåŠ¨ç”»æ’å€¼å®ç°å›½å®¶é«˜äº®çš„å¹³æ»‘è¿‡æ¸¡ï¼Œé¿å…çªå…€çš„è§†è§‰å˜åŒ–</li>
<li><strong>æŠ—é”¯é½¿å¤„ç†</strong>ï¼šä½¿ç”¨é«˜é˜¶æŠ—é”¯é½¿å’Œçº¹ç†è¿‡æ»¤æŠ€æœ¯ï¼Œç¡®ä¿è¾¹ç•Œæ¸…æ™°æ— é”¯é½¿</li>
<li><strong>å“åº”å¼è®¾è®¡</strong>ï¼šå®Œå–„çš„çª—å£å¤§å°è°ƒæ•´å¤„ç†ï¼Œä¿è¯ä¸åŒè®¾å¤‡ä¸Šçš„æ˜¾ç¤ºæ•ˆæœ</li>
<li><strong>è§¦æ‘¸ä¼˜åŒ–</strong>ï¼šä¸“é—¨é’ˆå¯¹ç§»åŠ¨è®¾å¤‡çš„åŒæŒ‡ç¼©æ”¾å’Œå•æŒ‡æ—‹è½¬ä¼˜åŒ–</li>
</ol>
<h3 data-id="heading-15">ä¸ƒã€æ€»ç»“ä¸æ‰©å±•æ€è·¯</h3>
<p>è¿™ä¸ª3Dç§‘æŠ€åœ°çƒé¡¹ç›®å±•ç¤ºäº†Three.jsåœ¨åˆ›å»ºå¤æ‚æ•°æ®å¯è§†åŒ–æ–¹é¢çš„å¼ºå¤§èƒ½åŠ›ã€‚é€šè¿‡åˆç†çš„æ¶æ„è®¾è®¡å’Œç®—æ³•ä¼˜åŒ–ï¼Œå®ç°äº†æ—¢ç¾è§‚åˆé«˜æ•ˆçš„äº¤äº’ä½“éªŒã€‚</p>
<p><strong>è¿›ä¸€æ­¥æ‰©å±•æ–¹å‘</strong>ï¼š</p>
<ul>
<li>æ·»åŠ æ•°æ®å¯è§†åŒ–å±‚ï¼Œå±•ç¤ºå„å›½ç»Ÿè®¡æ•°æ®</li>
<li>å®ç°é£è¡Œè·¯å¾„åŠ¨ç”»ï¼Œæ¨¡æ‹Ÿèˆªçº¿æˆ–æ•°æ®æµ</li>
<li>é›†æˆå®æ—¶æ•°æ®ï¼Œåˆ›å»ºåŠ¨æ€ç›‘æ§åœ°çƒ</li>
<li>æ·»åŠ æ—¶é—´è½´æ§ä»¶ï¼Œæ”¯æŒå†å²æ•°æ®å›æº¯</li>
</ul>
<p>Three.jsä½œä¸ºWebGLçš„å‹å¥½å°è£…ï¼Œä½¿å¾—æ²¡æœ‰è®¡ç®—æœºå›¾å½¢å­¦èƒŒæ™¯çš„å¼€å‘è€…ä¹Ÿèƒ½æ„å»ºå¤æ‚çš„3Dåœºæ™¯ã€‚è¿™ä¸ª3Dåœ°çƒé¡¹ç›®æ˜¯å­¦ä¹ ä¸‰ç»´Webå¼€å‘çš„ä¼˜ç§€èŒƒä¾‹ï¼Œå€¼å¾—æ·±å…¥ç ”ç©¶å’Œæ‰©å±•ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¾®å‰ç«¯åº”ç”¨é€šä¿¡ä½¿ç”¨å’ŒåŸç†]]></title>    <link>https://juejin.cn/post/7570604028632891427</link>    <guid>https://juejin.cn/post/7570604028632891427</guid>    <pubDate>2025-11-10T03:20:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570604028632891427" data-draft-id="7570341520551723023" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¾®å‰ç«¯åº”ç”¨é€šä¿¡ä½¿ç”¨å’ŒåŸç†"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-11-10T03:20:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èµ·è¿™ä¸ªåå­—"/> <meta itemprop="url" content="https://juejin.cn/user/3646404655847591"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¾®å‰ç«¯åº”ç”¨é€šä¿¡ä½¿ç”¨å’ŒåŸç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3646404655847591/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èµ·è¿™ä¸ªåå­—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T03:20:27.000Z" title="Mon Nov 10 2025 03:20:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>å‚è€ƒé“¾æ¥</code>: <a href="https://juejin.cn/post/7486465253816991780#heading-7" target="_blank" title="https://juejin.cn/post/7486465253816991780#heading-7">[å¾®å‰ç«¯][vue3 + vite + qiankun] ä½¿ç”¨è¯¦è§£</a></p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œå„ä¸ªå­åº”ç”¨æ˜¯é€šè¿‡ä¸šåŠ¡æ¥åˆ’åˆ†çš„ï¼Œä¸åŒä¸šåŠ¡çº¿åº”è¯¥é™ä½è€¦åˆåº¦ï¼Œå°½é‡å»é¿å…é€šä¿¡ï¼Œä½†æ˜¯å¦‚æœæ¶‰åŠåˆ°ä¸€äº›å…¬å…±çš„çŠ¶æ€æˆ–è€…æ“ä½œï¼Œqiankunä¹Ÿæ˜¯æ”¯æŒçš„ã€‚</p>
<p>qinkunæä¾›äº†ä¸€ä¸ªå…¨å±€çš„<code>GlobalState</code>æ¥å…±äº«æ•°æ®ï¼ŒåŸºåº§åˆå§‹åŒ–ä¹‹åï¼Œå­åº”ç”¨å¯ä»¥ç›‘å¬åˆ°è¿™ä¸ªæ•°æ®çš„å˜åŒ–ï¼Œä¹Ÿèƒ½æäº¤è¿™ä¸ªæ•°æ®ã€‚</p>
<p>å‡è®¾æœ‰å¦‚ä¸‹ä¸€ä¸ªå…·ä½“çš„ä¸šåŠ¡åœºæ™¯ï¼šæœ‰ä¸€ä¸ªåŸºåº§åº”ç”¨ï¼ˆä¸»åº”ç”¨ï¼‰å’Œå¤šä¸ªå­åº”ç”¨ï¼ˆå¾®å‰ç«¯åº”ç”¨ï¼‰ã€‚æˆ‘ä»¬å‡è®¾æœ‰ä¸€ä¸ªå…¨å±€çš„ç”¨æˆ·ä¿¡æ¯çŠ¶æ€ï¼ˆä¾‹å¦‚ç”¨æˆ·IDã€ç”¨æˆ·åã€æƒé™ç­‰ï¼‰éœ€è¦åœ¨åŸºåº§å’Œæ‰€æœ‰å­åº”ç”¨ä¹‹é—´å…±äº«ã€‚å½“ç”¨æˆ·åœ¨åŸºåº§åº”ç”¨ä¸­ç™»å½•åï¼Œç”¨æˆ·ä¿¡æ¯éœ€è¦ä¼ é€’ç»™æ‰€æœ‰å­åº”ç”¨ï¼ŒåŒæ—¶å­åº”ç”¨å¯èƒ½åœ¨æŸäº›æ“ä½œåæ›´æ–°ç”¨æˆ·ä¿¡æ¯ï¼ˆä¾‹å¦‚æ›´æ–°ç”¨æˆ·æ˜µç§°ï¼‰ï¼Œå¹¶ä¸”å…¶ä»–å­åº”ç”¨å’ŒåŸºåº§éœ€è¦å“åº”è¿™ä¸ªæ›´æ–°ã€‚</p>
<h2 data-id="heading-0">æ­¥éª¤</h2>
<ol>
<li>åŸºåº§åº”ç”¨åˆå§‹åŒ–å…¨å±€çŠ¶æ€ï¼ŒåŒ…æ‹¬ç”¨æˆ·ä¿¡æ¯ã€‚</li>
<li>åŸºåº§åº”ç”¨åœ¨å¯åŠ¨qiankunæ—¶ï¼Œå°†å…¨å±€çŠ¶æ€ä¼ é€’ç»™å­åº”ç”¨ã€‚</li>
<li>å­åº”ç”¨å¯ä»¥ç›‘å¬å…¨å±€çŠ¶æ€çš„å˜åŒ–ï¼Œå¹¶åœ¨çŠ¶æ€å˜åŒ–æ—¶æ›´æ–°è‡ªå·±çš„ç•Œé¢ã€‚</li>
<li>å­åº”ç”¨ä¹Ÿå¯ä»¥ä¿®æ”¹å…¨å±€çŠ¶æ€ï¼Œå¹¶é€šçŸ¥åˆ°åŸºåº§å’Œå…¶ä»–å­åº”ç”¨ã€‚</li>
</ol>
<h2 data-id="heading-1">å…·ä½“å®ç°</h2>
<h3 data-id="heading-2">åŸºåº§åº”ç”¨ï¼ˆä¸»åº”ç”¨ï¼‰ï¼š</h3>
<ol>
<li>ä½¿ç”¨qiankunçš„initGlobalStateæ–¹æ³•åˆå§‹åŒ–å…¨å±€çŠ¶æ€ã€‚</li>
<li>æ³¨å†Œå­åº”ç”¨ï¼Œå¹¶å°†å…¨å±€çŠ¶æ€ä¼ é€’ç»™å­åº”ç”¨ã€‚</li>
<li>ç›‘å¬å…¨å±€çŠ¶æ€çš„å˜åŒ–ï¼Œä»¥ä¾¿åœ¨åŸºåº§ä¸­æ›´æ–°ã€‚</li>
</ol>
<p>å¤šä¸ªå­åº”ç”¨éœ€è¦å…±äº«ç”¨æˆ·ç™»å½•çŠ¶æ€ã€ç”¨æˆ·ä¿¡æ¯å’Œæƒé™æ•°æ®ï¼Œé¿å…é‡å¤ç™»å½•å’Œæƒé™æ ¡éªŒã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸»åº”ç”¨ - åˆå§‹åŒ–å…¨å±€çŠ¶æ€</span>
<span class="hljs-keyword">import</span> { initGlobalState } <span class="hljs-keyword">from</span> <span class="hljs-string">'qiankun'</span>;

<span class="hljs-comment">// åˆå§‹åŒ–çŠ¶æ€</span>
<span class="hljs-keyword">const</span> initialState = {
  <span class="hljs-attr">user</span>: {
    <span class="hljs-attr">id</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">avatar</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">roles</span>: [],
    <span class="hljs-attr">permissions</span>: []
  },
  <span class="hljs-attr">token</span>: <span class="hljs-string">''</span>,
  <span class="hljs-attr">isLoggedIn</span>: <span class="hljs-literal">false</span>
};

<span class="hljs-keyword">const</span> actions = <span class="hljs-title function_">initGlobalState</span>(initialState);

<span class="hljs-comment">// ç”¨æˆ·ç™»å½•åæ›´æ–°çŠ¶æ€</span>
actions.<span class="hljs-title function_">setGlobalState</span>({
  <span class="hljs-attr">user</span>: {
    <span class="hljs-attr">id</span>: <span class="hljs-number">12345</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>,
    <span class="hljs-attr">avatar</span>: <span class="hljs-string">'/avatars/zhangsan.jpg'</span>,
    <span class="hljs-attr">roles</span>: [<span class="hljs-string">'admin'</span>, <span class="hljs-string">'user'</span>],
    <span class="hljs-attr">permissions</span>: [<span class="hljs-string">'read'</span>, <span class="hljs-string">'write'</span>, <span class="hljs-string">'delete'</span>]
  },
  <span class="hljs-attr">token</span>: <span class="hljs-string">'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'</span>,
  <span class="hljs-attr">isLoggedIn</span>: <span class="hljs-literal">true</span>
});

<span class="hljs-comment">// ç›‘å¬ç™»å½•çŠ¶æ€å˜åŒ–</span>
actions.<span class="hljs-title function_">onGlobalStateChange</span>(<span class="hljs-function">(<span class="hljs-params">state, prevState</span>) =&gt;</span> {
  <span class="hljs-comment">// ä¸»åº”ç”¨è‡ªèº«çš„çŠ¶æ€åŒæ­¥</span>
  <span class="hljs-keyword">if</span> (state.<span class="hljs-property">isLoggedIn</span> !== prevState.<span class="hljs-property">isLoggedIn</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç™»å½•çŠ¶æ€å˜åŒ–:'</span>, state.<span class="hljs-property">isLoggedIn</span>);
    <span class="hljs-title function_">updateMainAppUI</span>(state);
  }
});
</code></pre>
<h3 data-id="heading-3">å­åº”ç”¨ï¼š</h3>
<ol>
<li>åœ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­ï¼Œè·å–åŸºåº§ä¼ é€’çš„å…¨å±€çŠ¶æ€ï¼Œå¹¶ç›‘å¬çŠ¶æ€å˜åŒ–ã€‚</li>
<li>åœ¨é€‚å½“çš„æ—¶å€™ï¼ˆä¾‹å¦‚ç”¨æˆ·æ“ä½œåï¼‰ä½¿ç”¨setGlobalStateæ›´æ–°å…¨å±€çŠ¶æ€ã€‚</li>
</ol>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">let</span> globalAction = <span class="hljs-literal">null</span>;

<span class="hljs-comment">// å­åº”ç”¨A - ç”¨æˆ·ç®¡ç†</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">mount</span>(<span class="hljs-params">props</span>) {
  <span class="hljs-comment">// ä¿å­˜å…¨å±€çŠ¶æ€æ“ä½œå¯¹è±¡</span>
  globalAction = props;

  <span class="hljs-comment">// ç›‘å¬å…¨å±€çŠ¶æ€å˜åŒ–</span>
  props.<span class="hljs-title function_">onGlobalStateChange</span>(<span class="hljs-function">(<span class="hljs-params">state, prevState</span>) =&gt;</span> {
    <span class="hljs-comment">// ç”¨æˆ·ä¿¡æ¯å˜åŒ–æ—¶æ›´æ–°ç•Œé¢</span>
    <span class="hljs-keyword">if</span> (state.<span class="hljs-property">user</span>.<span class="hljs-property">id</span> !== prevState.<span class="hljs-property">user</span>.<span class="hljs-property">id</span>) {
      <span class="hljs-title function_">updateUserProfile</span>(state.<span class="hljs-property">user</span>);
    }
    
    <span class="hljs-comment">// æƒé™å˜åŒ–æ—¶é‡æ–°æ£€æŸ¥</span>
    <span class="hljs-keyword">if</span> (state.<span class="hljs-property">user</span>.<span class="hljs-property">permissions</span> !== prevState.<span class="hljs-property">user</span>.<span class="hljs-property">permissions</span>) {
      <span class="hljs-title function_">checkPermissions</span>(state.<span class="hljs-property">user</span>.<span class="hljs-property">permissions</span>);
    }
  }, <span class="hljs-literal">true</span>); <span class="hljs-comment">// ç«‹å³æ‰§è¡Œä¸€æ¬¡</span>
  
  <span class="hljs-comment">// æ¸²æŸ“å­åº”ç”¨</span>
  <span class="hljs-title function_">renderApp</span>(props);
}

  <span class="hljs-comment">// æ›´æ–°ç”¨æˆ·ä¿¡æ¯</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">updateUserInfo</span> = (<span class="hljs-params">newUserInfo</span>) =&gt; {
    globalAction.<span class="hljs-title function_">setGlobalState</span>({
      <span class="hljs-attr">user</span>: {
        ...globalAction.<span class="hljs-title function_">getGlobalState</span>().<span class="hljs-property">user</span>,
        ...newUserInfo
      }
    });
  };
  
  <span class="hljs-comment">// æ£€æŸ¥æƒé™</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">checkPermissions</span> = (<span class="hljs-params">requiredPermission</span>) =&gt; {
    <span class="hljs-keyword">const</span> { permissions } = globalAction.<span class="hljs-title function_">getGlobalState</span>().<span class="hljs-property">user</span>;
    <span class="hljs-keyword">return</span> permissions.<span class="hljs-title function_">includes</span>(requiredPermission);
  };
  
</code></pre>
<h2 data-id="heading-4">åŸç†</h2>
<p>qiankun çš„ initGlobalState æ–¹æ³•æä¾›äº†ä¸€ç§åœ¨å¾®å‰ç«¯æ¶æ„ä¸­ä¸»åº”ç”¨ä¸å­åº”ç”¨ä¹‹é—´é€šä¿¡çš„æœºåˆ¶ã€‚å…¶åŸç†ä¸»è¦åŸºäºä»¥ä¸‹æ­¥éª¤ï¼š</p>
<p><strong>çŠ¶æ€åˆå§‹åŒ–</strong>ï¼šä¸»åº”ç”¨è°ƒç”¨ initGlobalState åˆå§‹åŒ–å…¨å±€çŠ¶æ€ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«è®¾ç½®çŠ¶æ€ã€ç›‘å¬çŠ¶æ€å˜åŒ–ç­‰æ–¹æ³•ã€‚</p>
<p><strong>çŠ¶æ€å­˜å‚¨</strong>ï¼šå…¨å±€çŠ¶æ€è¢«å­˜å‚¨åœ¨ä¸€ä¸ªä¸­å¿ƒåŒ–çš„åœ°æ–¹ï¼Œå¹¶ä¸”å¯ä»¥è¢«å¤šä¸ªå­åº”ç”¨è®¿é—®ã€‚</p>
<p><strong>çŠ¶æ€æ›´æ–°</strong>ï¼šå½“ä¸»åº”ç”¨æˆ–å­åº”ç”¨è°ƒç”¨ setGlobalState æ›´æ–°çŠ¶æ€æ—¶ï¼Œä¼šè§¦å‘æ‰€æœ‰å·²ç»æ³¨å†Œçš„ç›‘å¬å™¨ï¼ˆåŒ…æ‹¬ä¸»åº”ç”¨å’Œå­åº”ç”¨ï¼‰ã€‚</p>
<p><strong>çŠ¶æ€ç›‘å¬</strong>ï¼šå­åº”ç”¨ï¼ˆæˆ–ä¸»åº”ç”¨ï¼‰å¯ä»¥é€šè¿‡ onGlobalStateChange æ³¨å†Œç›‘å¬å‡½æ•°ï¼Œå½“å…¨å±€çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šæ‰§è¡Œè¿™äº›ç›‘å¬å‡½æ•°ã€‚</p>
<p><strong>çŠ¶æ€éš”ç¦»</strong>ï¼šqiankun ä¼šç¡®ä¿æ¯ä¸ªå­åº”ç”¨éƒ½èƒ½ç‹¬ç«‹åœ°ç›‘å¬å…¨å±€çŠ¶æ€ï¼Œå¹¶ä¸”ä¸ä¼šäº’ç›¸å¹²æ‰°ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€åŒ–çš„å®ç°åŸç†ç¤ºä¾‹ï¼Œå¸®åŠ©ç†è§£ qiankun çš„å…¨å±€çŠ¶æ€ç®¡ç†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¨¡æ‹Ÿ qiankun çš„å…¨å±€çŠ¶æ€ç®¡ç†</span>
<span class="hljs-keyword">let</span> globalState = {}; <span class="hljs-comment">// å…¨å±€çŠ¶æ€</span>
<span class="hljs-keyword">let</span> listeners = [];   <span class="hljs-comment">// ç›‘å¬å™¨åˆ—è¡¨</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">initGlobalState</span>(<span class="hljs-params">initialState = {}</span>) {
  <span class="hljs-comment">// åˆå¹¶åˆå§‹çŠ¶æ€</span>
  globalState = { ...globalState, ...initialState };

  <span class="hljs-comment">// è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«æ“ä½œå…¨å±€çŠ¶æ€çš„æ–¹æ³•</span>
  <span class="hljs-keyword">return</span> {
    <span class="hljs-comment">// è®¾ç½®å…¨å±€çŠ¶æ€</span>
    <span class="hljs-title function_">setGlobalState</span>(<span class="hljs-params">state</span>) {
      <span class="hljs-keyword">const</span> prevState = { ...globalState };
      globalState = { ...globalState, ...state };
      <span class="hljs-comment">// é€šçŸ¥æ‰€æœ‰ç›‘å¬å™¨</span>
      listeners.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">listener</span> =&gt;</span> {
        <span class="hljs-title function_">listener</span>(globalState, prevState);
      });
    },

    <span class="hljs-comment">// ç›‘å¬å…¨å±€çŠ¶æ€å˜åŒ–</span>
    <span class="hljs-title function_">onGlobalStateChange</span>(<span class="hljs-params">listener, immediate = <span class="hljs-literal">false</span></span>) {
      listeners.<span class="hljs-title function_">push</span>(listener);
      <span class="hljs-comment">// å¦‚æœç«‹å³æ‰§è¡Œï¼Œåˆ™ç«‹å³è°ƒç”¨ä¸€æ¬¡ç›‘å¬å™¨</span>
      <span class="hljs-keyword">if</span> (immediate) {
        <span class="hljs-title function_">listener</span>(globalState, globalState);
      }
      <span class="hljs-comment">// è¿”å›ä¸€ä¸ªå–æ¶ˆç›‘å¬çš„å‡½æ•°</span>
      <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">const</span> index = listeners.<span class="hljs-title function_">indexOf</span>(listener);
        <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) {
          listeners.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
        }
      };
    },

    <span class="hljs-comment">// è·å–å½“å‰å…¨å±€çŠ¶æ€</span>
    <span class="hljs-title function_">getGlobalState</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> globalState;
    },

    <span class="hljs-comment">// ç§»é™¤æ‰€æœ‰ç›‘å¬å™¨ï¼ˆé€šå¸¸ç”¨äºåº”ç”¨å¸è½½æ—¶ï¼‰</span>
    <span class="hljs-title function_">offGlobalStateChange</span>(<span class="hljs-params"/>) {
      listeners = [];
    }
  };
}

<span class="hljs-comment">// ä¸»åº”ç”¨ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> actions = <span class="hljs-title function_">initGlobalState</span>({ <span class="hljs-attr">user</span>: <span class="hljs-string">'main'</span> });

<span class="hljs-comment">// å­åº”ç”¨ä½¿ç”¨</span>
<span class="hljs-comment">// å‡è®¾å­åº”ç”¨é€šè¿‡æŸç§æ–¹å¼è·å–åˆ° actionsï¼ˆé€šå¸¸æ˜¯é€šè¿‡ props ä¼ é€’ï¼‰</span>
<span class="hljs-comment">// å­åº”ç”¨ç›‘å¬çŠ¶æ€å˜åŒ–</span>
<span class="hljs-keyword">const</span> unsubscribe = actions.<span class="hljs-title function_">onGlobalStateChange</span>(<span class="hljs-function">(<span class="hljs-params">state, prevState</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å­åº”ç”¨ç›‘å¬åˆ°çŠ¶æ€å˜åŒ–'</span>, state, prevState);
}, <span class="hljs-literal">true</span>);

<span class="hljs-comment">// å­åº”ç”¨æ›´æ–°çŠ¶æ€</span>
actions.<span class="hljs-title function_">setGlobalState</span>({ <span class="hljs-attr">user</span>: <span class="hljs-string">'subapp'</span> });

<span class="hljs-comment">// å–æ¶ˆç›‘å¬</span>
<span class="hljs-comment">// unsubscribe();</span>
</code></pre>
<p>åœ¨å®é™…çš„ qiankun å®ç°ä¸­ï¼Œè¿˜ä¼šè€ƒè™‘ä»¥ä¸‹æ–¹é¢ï¼š</p>
<p><strong>çŠ¶æ€éš”ç¦»</strong>ï¼šç¡®ä¿å­åº”ç”¨åœ¨å¸è½½æ—¶è‡ªåŠ¨å–æ¶ˆç›‘å¬ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</p>
<p><strong>çŠ¶æ€åŒæ­¥</strong>ï¼šå½“å­åº”ç”¨åˆå§‹åŒ–æ—¶ï¼Œèƒ½å¤Ÿè·å–åˆ°æœ€æ–°çš„å…¨å±€çŠ¶æ€ã€‚</p>
<p><strong>å¤šå®ä¾‹æ”¯æŒ</strong>ï¼šåœ¨å¤šä¸ªå­åº”ç”¨åŒæ—¶è¿è¡Œæ—¶ï¼Œæ¯ä¸ªå­åº”ç”¨éƒ½å¯ä»¥ç‹¬ç«‹åœ°ç›‘å¬å’Œæ›´æ–°çŠ¶æ€ã€‚</p>
<p>åœ¨ qiankun çš„æºç ä¸­ï¼Œå…¨å±€çŠ¶æ€çš„ç®¡ç†æ˜¯åœ¨ src/globalState.ts ä¸­å®ç°çš„ã€‚å®ƒä½¿ç”¨äº†ç±»ä¼¼å‘å¸ƒ-è®¢é˜…çš„æ¨¡å¼ï¼Œå¹¶ä¸”é€šè¿‡ä¸€ä¸ªå…¨å±€çš„å˜é‡æ¥å­˜å‚¨çŠ¶æ€ã€‚ä¸»åº”ç”¨å’Œå­åº”ç”¨é€šè¿‡è¿™ä¸ªå…¨å±€çš„å˜é‡è¿›è¡Œé€šä¿¡ã€‚</p>
<p><strong>æ³¨æ„</strong>ï¼šåœ¨å­åº”ç”¨ä¸­ï¼Œqiankun ä¼šé€šè¿‡ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„å‚æ•°å°†å…¨å±€çŠ¶æ€çš„æ“ä½œæ–¹æ³•ä¼ é€’ç»™å­åº”ç”¨ï¼Œå­åº”ç”¨åœ¨æŒ‚è½½æ—¶å¯ä»¥é€šè¿‡ props è·å–åˆ°è¿™äº›æ–¹æ³•ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨ä¸»åº”ç”¨ä¸­æ³¨å†Œå­åº”ç”¨æ—¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { registerMicroApps, start } <span class="hljs-keyword">from</span> <span class="hljs-string">'qiankun'</span>;

<span class="hljs-title function_">registerMicroApps</span>([
  {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'subapp'</span>,
    <span class="hljs-attr">entry</span>: <span class="hljs-string">'//localhost:7100'</span>,
    <span class="hljs-attr">container</span>: <span class="hljs-string">'#subapp-container'</span>,
    <span class="hljs-attr">activeRule</span>: <span class="hljs-string">'/subapp'</span>,
    <span class="hljs-attr">props</span>: {
      <span class="hljs-comment">// ä¼ é€’å…¨å±€çŠ¶æ€æ“ä½œæ–¹æ³•</span>
      <span class="hljs-attr">onGlobalStateChange</span>: actions.<span class="hljs-property">onGlobalStateChange</span>,
      <span class="hljs-attr">setGlobalState</span>: actions.<span class="hljs-property">setGlobalState</span>,
      <span class="hljs-attr">getGlobalState</span>: actions.<span class="hljs-property">getGlobalState</span>,
    },
  },
]);

<span class="hljs-title function_">start</span>();
</code></pre>
<p>åœ¨å­åº”ç”¨ä¸­ï¼Œåœ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­æ¥æ”¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">mount</span>(<span class="hljs-params">props</span>) {
  <span class="hljs-comment">// å­åº”ç”¨å¯ä»¥ä½¿ç”¨ props ä¸Šçš„æ–¹æ³•</span>
  props.<span class="hljs-title function_">onGlobalStateChange</span>(<span class="hljs-function">(<span class="hljs-params">state, prev</span>) =&gt;</span> {
    <span class="hljs-comment">// çŠ¶æ€å˜åŒ–æ—¶çš„æ“ä½œ</span>
  });
  
  props.<span class="hljs-title function_">setGlobalState</span>({ ... });
}
</code></pre>
<p>è¿™æ ·ï¼Œä¸»åº”ç”¨å’Œå­åº”ç”¨å°±å¯ä»¥é€šè¿‡è¿™ä¸ªå…¨å±€çŠ¶æ€è¿›è¡Œé€šä¿¡äº†ã€‚</p>
<h3 data-id="heading-5">Qiankun initGlobalState å…¨å±€çŠ¶æ€é€šä¿¡åŸç†ä¸å®ç°</h3>
<h4 data-id="heading-6">çŠ¶æ€ç®¡ç†æ¶æ„</h4>
<p>Qiankun çš„å…¨å±€çŠ¶æ€ç®¡ç†åŸºäº<code>å‘å¸ƒ-è®¢é˜…æ¨¡å¼</code>ï¼Œé‡‡ç”¨<code>ä¸­å¿ƒåŒ–çš„çŠ¶æ€å­˜å‚¨å’Œäº‹ä»¶é€šçŸ¥æœºåˆ¶</code>ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç®€åŒ–çš„æ ¸å¿ƒå®ç°åŸç†</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalStateManager</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = {};                    <span class="hljs-comment">// å…¨å±€çŠ¶æ€å­˜å‚¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();         <span class="hljs-comment">// ç›‘å¬å™¨æ˜ å°„è¡¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">subAppStates</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();      <span class="hljs-comment">// å­åº”ç”¨çŠ¶æ€å¿«ç…§</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isMainApp</span> = <span class="hljs-literal">true</span>;              <span class="hljs-comment">// æ ‡è¯†æ˜¯å¦ä¸ºä¸»åº”ç”¨</span>
  }

  <span class="hljs-comment">// åˆå§‹åŒ–å…¨å±€çŠ¶æ€</span>
  <span class="hljs-title function_">initGlobalState</span>(<span class="hljs-params">initialState = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = { ...initialState };
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createActions</span>();
  }

  <span class="hljs-comment">// åˆ›å»ºçŠ¶æ€æ“ä½œæ–¹æ³•</span>
  <span class="hljs-title function_">createActions</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">setGlobalState</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setGlobalState</span>(state),
      <span class="hljs-attr">onGlobalStateChange</span>: <span class="hljs-function">(<span class="hljs-params">callback, immediately = <span class="hljs-literal">false</span></span>) =&gt;</span> 
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onGlobalStateChange</span>(callback, immediately),
      <span class="hljs-attr">offGlobalStateChange</span>: <span class="hljs-function">(<span class="hljs-params">callback</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">offGlobalStateChange</span>(callback),
      <span class="hljs-attr">getGlobalState</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getGlobalState</span>()
    };
  }

  <span class="hljs-comment">// è®¾ç½®å…¨å±€çŠ¶æ€</span>
  <span class="hljs-title function_">setGlobalState</span>(<span class="hljs-params">state</span>) {
    <span class="hljs-keyword">const</span> prevState = { ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> };
    
    <span class="hljs-comment">// åˆå¹¶æ–°çŠ¶æ€</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = {
      ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>,
      ...state
    };

    <span class="hljs-comment">// é€šçŸ¥æ‰€æœ‰ç›‘å¬å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">notifyListeners</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>, prevState);
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }

  <span class="hljs-comment">// æ³¨å†ŒçŠ¶æ€å˜åŒ–ç›‘å¬å™¨</span>
  <span class="hljs-title function_">onGlobalStateChange</span>(<span class="hljs-params">callback, immediately = <span class="hljs-literal">false</span></span>) {
    <span class="hljs-keyword">const</span> listenerId = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'listener'</span>);
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">set</span>(listenerId, callback);
    
    <span class="hljs-comment">// ç«‹å³æ‰§è¡Œä¸€æ¬¡</span>
    <span class="hljs-keyword">if</span> (immediately) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-title function_">callback</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>);
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Global state listener error:'</span>, error);
      }
    }

    <span class="hljs-comment">// è¿”å›å–æ¶ˆç›‘å¬å‡½æ•°</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">delete</span>(listenerId);
    };
  }

  <span class="hljs-comment">// ç§»é™¤ç›‘å¬å™¨</span>
  <span class="hljs-title function_">offGlobalStateChange</span>(<span class="hljs-params">callback</span>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [id, listener] <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">entries</span>()) {
      <span class="hljs-keyword">if</span> (listener === callback) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">delete</span>(id);
        <span class="hljs-keyword">break</span>;
      }
    }
  }

  <span class="hljs-comment">// è·å–å½“å‰çŠ¶æ€</span>
  <span class="hljs-title function_">getGlobalState</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> { ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> };
  }

  <span class="hljs-comment">// é€šçŸ¥æ‰€æœ‰ç›‘å¬å™¨</span>
  <span class="hljs-title function_">notifyListeners</span>(<span class="hljs-params">currentState, previousState</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">listener, id</span>) =&gt;</span> {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// ä½¿ç”¨ setTimeout ç¡®ä¿å¼‚æ­¥æ‰§è¡Œï¼Œé¿å…é˜»å¡</span>
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">has</span>(id)) {
            <span class="hljs-title function_">listener</span>(currentState, previousState);
          }
        }, <span class="hljs-number">0</span>);
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Listener <span class="hljs-subst">${id.toString()}</span> error:`</span>, error);
      }
    });
  }

  <span class="hljs-comment">// å­åº”ç”¨æŒ‚è½½æ—¶çš„çŠ¶æ€åŒæ­¥</span>
  <span class="hljs-title function_">syncStateToSubApp</span>(<span class="hljs-params">subAppName, actions</span>) {
    <span class="hljs-comment">// ä¿å­˜å­åº”ç”¨çš„çŠ¶æ€æ“ä½œå¼•ç”¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">subAppStates</span>.<span class="hljs-title function_">set</span>(subAppName, actions);
    
    <span class="hljs-comment">// è¿”å›å­åº”ç”¨ä¸“ç”¨çš„çŠ¶æ€æ“ä½œå¯¹è±¡</span>
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createSubAppActions</span>(actions);
  }

  <span class="hljs-comment">// åˆ›å»ºå­åº”ç”¨ä¸“ç”¨çš„æ“ä½œå¯¹è±¡</span>
  <span class="hljs-title function_">createSubAppActions</span>(<span class="hljs-params">subAppActions</span>) {
    <span class="hljs-keyword">return</span> {
      ...subAppActions,
      <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ å­åº”ç”¨ç‰¹å®šçš„é€»è¾‘</span>
      <span class="hljs-attr">getSubAppState</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getGlobalState</span>()
    };
  }
}
</code></pre>
<h4 data-id="heading-7">å®Œæ•´å®ç°æºç è§£æ</h4>
<p>ä¸‹é¢æ˜¯æ›´æ¥è¿‘ Qiankun å®é™…å®ç°çš„å®Œæ•´ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// globalState.js - Qiankun å…¨å±€çŠ¶æ€ç®¡ç†æ ¸å¿ƒå®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalState</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å…¨å±€çŠ¶æ€å­˜å‚¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = {};
    
    <span class="hljs-comment">// ç›‘å¬å™¨å­˜å‚¨ï¼šMap&lt;symbol, Function&gt;</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    
    <span class="hljs-comment">// æ ‡è¯†æ˜¯å¦å·²åˆå§‹åŒ–</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">initialized</span> = <span class="hljs-literal">false</span>;
    
    <span class="hljs-comment">// ä¸»åº”ç”¨æ ‡è¯†</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isMaster</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; 
                   <span class="hljs-variable language_">window</span>.<span class="hljs-property">__POWERED_BY_QIANKUN__</span> !== <span class="hljs-literal">true</span>;
  }

  <span class="hljs-comment">/**
   * åˆå§‹åŒ–å…¨å±€çŠ¶æ€
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} initialState åˆå§‹çŠ¶æ€
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Object</span>} çŠ¶æ€æ“ä½œå¯¹è±¡
   */</span>
  <span class="hljs-title function_">initGlobalState</span>(<span class="hljs-params">initialState = {}</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">initialized</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'[qiankun] Global state already initialized'</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getActions</span>();
    }

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">deepClone</span>(initialState);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">initialized</span> = <span class="hljs-literal">true</span>;

    <span class="hljs-comment">// åœ¨å¼€å‘æ¨¡å¼ä¸‹æ‰“å°æ—¥å¿—</span>
    <span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'development'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[qiankun] Global state initialized:'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getActions</span>();
  }

  <span class="hljs-comment">/**
   * è·å–çŠ¶æ€æ“ä½œå¯¹è±¡
   */</span>
  <span class="hljs-title function_">getActions</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">setGlobalState</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">setGlobalState</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>),
      <span class="hljs-attr">onGlobalStateChange</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">onGlobalStateChange</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>),
      <span class="hljs-attr">offGlobalStateChange</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">offGlobalStateChange</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>),
      <span class="hljs-attr">getGlobalState</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">getGlobalState</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>),
    };
  }

  <span class="hljs-comment">/**
   * è®¾ç½®å…¨å±€çŠ¶æ€
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} state æ–°çŠ¶æ€
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">boolean</span>} overwrite æ˜¯å¦è¦†ç›–æ•´ä¸ªçŠ¶æ€
   */</span>
  <span class="hljs-title function_">setGlobalState</span>(<span class="hljs-params">state, overwrite = <span class="hljs-literal">false</span></span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">initialized</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'[qiankun] Global state not initialized'</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-keyword">const</span> prevState = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">deepClone</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>);
    
    <span class="hljs-keyword">if</span> (overwrite) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">deepClone</span>(state);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">mergeState</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>, state);
    }

    <span class="hljs-comment">// è§¦å‘ç›‘å¬å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(prevState);

    <span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'development'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[qiankun] Global state updated:'</span>, {
        <span class="hljs-attr">from</span>: prevState,
        <span class="hljs-attr">to</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>
      });
    }

    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }

  <span class="hljs-comment">/**
   * æ³¨å†ŒçŠ¶æ€å˜åŒ–ç›‘å¬å™¨
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Function</span>} listener ç›‘å¬å‡½æ•°
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">boolean</span>} fireImmediately æ˜¯å¦ç«‹å³æ‰§è¡Œ
   */</span>
  <span class="hljs-title function_">onGlobalStateChange</span>(<span class="hljs-params">listener, fireImmediately = <span class="hljs-literal">false</span></span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> listener !== <span class="hljs-string">'function'</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'[qiankun] Listener must be a function'</span>);
    }

    <span class="hljs-keyword">const</span> listenerId = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'qiankun-global-state-listener'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">set</span>(listenerId, listener);

    <span class="hljs-comment">// ç«‹å³æ‰§è¡Œä¸€æ¬¡</span>
    <span class="hljs-keyword">if</span> (fireImmediately) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">has</span>(listenerId)) {
            <span class="hljs-title function_">listener</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>);
          }
        }, <span class="hljs-number">0</span>);
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'[qiankun] Fire immediately error:'</span>, error);
      }
    }

    <span class="hljs-comment">// è¿”å›å–æ¶ˆç›‘å¬å‡½æ•°</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">delete</span>(listenerId);
    };
  }

  <span class="hljs-comment">/**
   * ç§»é™¤çŠ¶æ€å˜åŒ–ç›‘å¬å™¨
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Function</span>} listener è¦ç§»é™¤çš„ç›‘å¬å‡½æ•°
   */</span>
  <span class="hljs-title function_">offGlobalStateChange</span>(<span class="hljs-params">listener</span>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [id, fn] <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">entries</span>()) {
      <span class="hljs-keyword">if</span> (fn === listener) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">delete</span>(id);
        <span class="hljs-keyword">break</span>;
      }
    }
  }

  <span class="hljs-comment">/**
   * è·å–å½“å‰å…¨å±€çŠ¶æ€
   */</span>
  <span class="hljs-title function_">getGlobalState</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">deepClone</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>);
  }

  <span class="hljs-comment">/**
   * è§¦å‘æ‰€æœ‰ç›‘å¬å™¨
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} prevState ä¹‹å‰çš„çŠ¶æ€
   */</span>
  <span class="hljs-title function_">emit</span>(<span class="hljs-params">prevState</span>) {
    <span class="hljs-keyword">const</span> currentState = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">deepClone</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>);
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">listener, id</span>) =&gt;</span> {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// ä½¿ç”¨å¾®ä»»åŠ¡å¼‚æ­¥æ‰§è¡Œï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹</span>
        <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">has</span>(id)) {
            <span class="hljs-title function_">listener</span>(currentState, prevState);
          }
        }).<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`[qiankun] Listener <span class="hljs-subst">${id.toString()}</span> error:`</span>, error);
        });
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`[qiankun] Listener <span class="hljs-subst">${id.toString()}</span> error:`</span>, error);
      }
    });
  }

  <span class="hljs-comment">/**
   * æ·±åº¦åˆå¹¶çŠ¶æ€
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} target ç›®æ ‡å¯¹è±¡
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} source æºå¯¹è±¡
   */</span>
  <span class="hljs-title function_">mergeState</span>(<span class="hljs-params">target, source</span>) {
    <span class="hljs-keyword">const</span> result = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">deepClone</span>(target);
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> source) {
      <span class="hljs-keyword">if</span> (source.<span class="hljs-title function_">hasOwnProperty</span>(key)) {
        <span class="hljs-keyword">const</span> sourceValue = source[key];
        <span class="hljs-keyword">const</span> targetValue = result[key];
        
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isPlainObject</span>(sourceValue) &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isPlainObject</span>(targetValue)) {
          <span class="hljs-comment">// é€’å½’åˆå¹¶å¯¹è±¡</span>
          result[key] = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">mergeState</span>(targetValue, sourceValue);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// ç›´æ¥èµ‹å€¼</span>
          result[key] = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">deepClone</span>(sourceValue);
        }
      }
    }
    
    <span class="hljs-keyword">return</span> result;
  }

  <span class="hljs-comment">/**
   * æ·±åº¦å…‹éš†å¯¹è±¡
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">any</span>} obj è¦å…‹éš†çš„å¯¹è±¡
   */</span>
  <span class="hljs-title function_">deepClone</span>(<span class="hljs-params">obj</span>) {
    <span class="hljs-keyword">if</span> (obj === <span class="hljs-literal">null</span> || <span class="hljs-keyword">typeof</span> obj !== <span class="hljs-string">'object'</span>) {
      <span class="hljs-keyword">return</span> obj;
    }
    
    <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Date</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(obj.<span class="hljs-title function_">getTime</span>());
    }
    
    <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span>) {
      <span class="hljs-keyword">return</span> obj.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">deepClone</span>(item));
    }
    
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">'object'</span>) {
      <span class="hljs-keyword">const</span> clonedObj = {};
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> obj) {
        <span class="hljs-keyword">if</span> (obj.<span class="hljs-title function_">hasOwnProperty</span>(key)) {
          clonedObj[key] = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">deepClone</span>(obj[key]);
        }
      }
      <span class="hljs-keyword">return</span> clonedObj;
    }
  }

  <span class="hljs-comment">/**
   * åˆ¤æ–­æ˜¯å¦ä¸ºçº¯å¯¹è±¡
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">any</span>} obj è¦åˆ¤æ–­çš„å¯¹è±¡
   */</span>
  <span class="hljs-title function_">isPlainObject</span>(<span class="hljs-params">obj</span>) {
    <span class="hljs-keyword">return</span> obj !== <span class="hljs-literal">null</span> &amp;&amp; 
           <span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">'object'</span> &amp;&amp; 
           <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>.<span class="hljs-title function_">call</span>(obj) === <span class="hljs-string">'[object Object]'</span>;
  }

  <span class="hljs-comment">/**
   * é”€æ¯å…¨å±€çŠ¶æ€ç®¡ç†å™¨
   */</span>
  <span class="hljs-title function_">destroy</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = {};
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">clear</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">initialized</span> = <span class="hljs-literal">false</span>;
  }
}

<span class="hljs-comment">// åˆ›å»ºå•ä¾‹å®ä¾‹</span>
<span class="hljs-keyword">let</span> globalStateInstance = <span class="hljs-literal">null</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">initGlobalState</span>(<span class="hljs-params">initialState = {}</span>) {
  <span class="hljs-keyword">if</span> (!globalStateInstance) {
    globalStateInstance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GlobalState</span>();
  }
  
  <span class="hljs-keyword">return</span> globalStateInstance.<span class="hljs-title function_">initGlobalState</span>(initialState);
}

<span class="hljs-comment">// è·å–å…¨å±€çŠ¶æ€å®ä¾‹ï¼ˆç”¨äºè°ƒè¯•ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getGlobalStateInstance</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> globalStateInstance;
}

<span class="hljs-keyword">export</span> { initGlobalState, getGlobalStateInstance };
</code></pre>
<h4 data-id="heading-8">ä¸»åº”ç”¨ä¸å­åº”ç”¨é€šä¿¡æ¡¥æ¢</h4>
<h5 data-id="heading-9">ä¸»åº”ç”¨ä¸­çš„çŠ¶æ€é›†æˆ</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// main-app/src/micro-fe/state-bridge.js</span>
<span class="hljs-keyword">import</span> { initGlobalState } <span class="hljs-keyword">from</span> <span class="hljs-string">'qiankun'</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainAppStateBridge</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">actions</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">subApps</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  }

  <span class="hljs-comment">// åˆå§‹åŒ–å…¨å±€çŠ¶æ€</span>
  <span class="hljs-title function_">init</span>(<span class="hljs-params">initialState</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">actions</span> = <span class="hljs-title function_">initGlobalState</span>(initialState);
    
    <span class="hljs-comment">// ç›‘å¬è‡ªèº«çŠ¶æ€å˜åŒ–</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">actions</span>.<span class="hljs-title function_">onGlobalStateChange</span>(<span class="hljs-function">(<span class="hljs-params">state, prevState</span>) =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleMainAppStateChange</span>(state, prevState);
    });
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">actions</span>;
  }

  <span class="hljs-comment">// ä¸ºå­åº”ç”¨åˆ›å»ºçŠ¶æ€æ¡¥æ¥</span>
  <span class="hljs-title function_">createSubAppStateBridge</span>(<span class="hljs-params">subAppName</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">actions</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Global state not initialized'</span>);
    }

    <span class="hljs-keyword">const</span> subAppActions = {
      ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">actions</span>,
      <span class="hljs-comment">// å­åº”ç”¨ç‰¹å®šçš„æ–¹æ³•</span>
      <span class="hljs-attr">getSubAppName</span>: <span class="hljs-function">() =&gt;</span> subAppName,
      <span class="hljs-comment">// å¯ä»¥æ·»åŠ å­åº”ç”¨çº§åˆ«çš„çŠ¶æ€ç®¡ç†</span>
      <span class="hljs-attr">setSubAppState</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setSubAppState</span>(subAppName, state)
    };

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">subApps</span>.<span class="hljs-title function_">set</span>(subAppName, {
      <span class="hljs-attr">actions</span>: subAppActions,
      <span class="hljs-attr">state</span>: {}
    });

    <span class="hljs-keyword">return</span> subAppActions;
  }

  <span class="hljs-comment">// å¤„ç†ä¸»åº”ç”¨çŠ¶æ€å˜åŒ–</span>
  <span class="hljs-title function_">handleMainAppStateChange</span>(<span class="hljs-params">state, prevState</span>) {
    <span class="hljs-comment">// ä¸»åº”ç”¨è‡ªèº«çš„çŠ¶æ€å“åº”é€»è¾‘</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateMainAppUI</span>(state);
    
    <span class="hljs-comment">// è®°å½•çŠ¶æ€å˜åŒ–æ—¥å¿—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">logStateChange</span>(<span class="hljs-string">'main-app'</span>, state, prevState);
  }

  <span class="hljs-comment">// è®¾ç½®å­åº”ç”¨ç‰¹å®šçŠ¶æ€</span>
  <span class="hljs-title function_">setSubAppState</span>(<span class="hljs-params">subAppName, state</span>) {
    <span class="hljs-keyword">const</span> subApp = <span class="hljs-variable language_">this</span>.<span class="hljs-property">subApps</span>.<span class="hljs-title function_">get</span>(subAppName);
    <span class="hljs-keyword">if</span> (subApp) {
      subApp.<span class="hljs-property">state</span> = { ...subApp.<span class="hljs-property">state</span>, ...state };
      
      <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œå®ç°å­åº”ç”¨çŠ¶æ€ä¸å…¨å±€çŠ¶æ€çš„æŸç§æ˜ å°„</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">maybeUpdateGlobalStateFromSubApp</span>(subAppName, state);
    }
  }

  <span class="hljs-comment">// å¯èƒ½æ ¹æ®å­åº”ç”¨çŠ¶æ€æ›´æ–°å…¨å±€çŠ¶æ€</span>
  <span class="hljs-title function_">maybeUpdateGlobalStateFromSubApp</span>(<span class="hljs-params">subAppName, state</span>) {
    <span class="hljs-comment">// ä¾‹å¦‚ï¼šå½“å­åº”ç”¨çš„ç”¨æˆ·ä¿¡æ¯å˜åŒ–æ—¶ï¼ŒåŒæ­¥åˆ°å…¨å±€çŠ¶æ€</span>
    <span class="hljs-keyword">if</span> (state.<span class="hljs-property">user</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">actions</span>.<span class="hljs-title function_">setGlobalState</span>({
        <span class="hljs-attr">user</span>: state.<span class="hljs-property">user</span>,
        <span class="hljs-attr">lastUpdatedBy</span>: subAppName
      });
    }
  }

  <span class="hljs-comment">// æ›´æ–°ä¸»åº”ç”¨UI</span>
  <span class="hljs-title function_">updateMainAppUI</span>(<span class="hljs-params">state</span>) {
    <span class="hljs-comment">// å®ç°ä¸»åº”ç”¨ç•Œé¢æ›´æ–°é€»è¾‘</span>
    <span class="hljs-keyword">if</span> (state.<span class="hljs-property">user</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateUserInfo</span>(state.<span class="hljs-property">user</span>);
    }
    
    <span class="hljs-keyword">if</span> (state.<span class="hljs-property">theme</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">applyTheme</span>(state.<span class="hljs-property">theme</span>);
    }
  }

  <span class="hljs-comment">// è®°å½•çŠ¶æ€å˜åŒ–</span>
  <span class="hljs-title function_">logStateChange</span>(<span class="hljs-params">source, state, prevState</span>) {
    <span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'development'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">group</span>(<span class="hljs-string">`[qiankun] State changed from <span class="hljs-subst">${source}</span>`</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Previous:'</span>, prevState);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Current:'</span>, state);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>();
    }
  }
}

<span class="hljs-comment">// ä¸»åº”ç”¨ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> stateBridge = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MainAppStateBridge</span>();

<span class="hljs-comment">// åˆå§‹åŒ–å…¨å±€çŠ¶æ€</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">initAppGlobalState</span> = (<span class="hljs-params">initialState</span>) =&gt; {
  <span class="hljs-keyword">return</span> stateBridge.<span class="hljs-title function_">init</span>(initialState);
};

<span class="hljs-comment">// ä¸ºå­åº”ç”¨æä¾›çŠ¶æ€æ¡¥æ¥</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getSubAppStateBridge</span> = (<span class="hljs-params">subAppName</span>) =&gt; {
  <span class="hljs-keyword">return</span> stateBridge.<span class="hljs-title function_">createSubAppStateBridge</span>(subAppName);
};
</code></pre>
<h5 data-id="heading-10">å­åº”ç”¨çŠ¶æ€é€‚é…å™¨</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// subapp/src/utils/global-state-adapter.js</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalStateAdapter</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span> = props;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = {};
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">unsubscribe</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  }

  <span class="hljs-comment">// åˆå§‹åŒ–é€‚é…å™¨</span>
  <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span> || !<span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">onGlobalStateChange</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'[qiankun] Global state not available in sub-app'</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-comment">// ç›‘å¬å…¨å±€çŠ¶æ€å˜åŒ–</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">unsubscribe</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-title function_">onGlobalStateChange</span>(<span class="hljs-function">(<span class="hljs-params">state, prevState</span>) =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleGlobalStateChange</span>(state, prevState);
    }, <span class="hljs-literal">true</span>); <span class="hljs-comment">// ç«‹å³æ‰§è¡Œä¸€æ¬¡è·å–åˆå§‹çŠ¶æ€</span>

    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }

  <span class="hljs-comment">// å¤„ç†å…¨å±€çŠ¶æ€å˜åŒ–</span>
  <span class="hljs-title function_">handleGlobalStateChange</span>(<span class="hljs-params">state, prevState</span>) {
    <span class="hljs-keyword">const</span> prevLocalState = { ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> };
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = state;

    <span class="hljs-comment">// é€šçŸ¥æ‰€æœ‰æœ¬åœ°ç›‘å¬å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">notifyLocalListeners</span>(state, prevState);

    <span class="hljs-comment">// æ‰§è¡Œå­åº”ç”¨ç‰¹å®šçš„çŠ¶æ€å¤„ç†</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleSubAppSpecificChanges</span>(state, prevState);

    <span class="hljs-comment">// æ›´æ–°å­åº”ç”¨UI</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateSubAppUI</span>(state, prevState);
  }

  <span class="hljs-comment">// è®¾ç½®å…¨å±€çŠ¶æ€ï¼ˆä»£ç†æ–¹æ³•ï¼‰</span>
  <span class="hljs-title function_">setGlobalState</span>(<span class="hljs-params">state</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">setGlobalState</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-title function_">setGlobalState</span>(state);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  <span class="hljs-comment">// è·å–å½“å‰çŠ¶æ€</span>
  <span class="hljs-title function_">getGlobalState</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span> ? <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-title function_">getGlobalState</span>() : <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>;
  }

  <span class="hljs-comment">// æ³¨å†Œæœ¬åœ°ç›‘å¬å™¨ï¼ˆå­åº”ç”¨å†…éƒ¨ä½¿ç”¨ï¼‰</span>
  <span class="hljs-title function_">onStateChange</span>(<span class="hljs-params">callback, immediately = <span class="hljs-literal">false</span></span>) {
    <span class="hljs-keyword">const</span> listenerId = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'local-state-listener'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">set</span>(listenerId, callback);

    <span class="hljs-keyword">if</span> (immediately) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-title function_">callback</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>);
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Local state listener error:'</span>, error);
      }
    }

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">delete</span>(listenerId);
    };
  }

  <span class="hljs-comment">// é€šçŸ¥æœ¬åœ°ç›‘å¬å™¨</span>
  <span class="hljs-title function_">notifyLocalListeners</span>(<span class="hljs-params">state, prevState</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">listener, id</span>) =&gt;</span> {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">has</span>(id)) {
            <span class="hljs-title function_">listener</span>(state, prevState);
          }
        }, <span class="hljs-number">0</span>);
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Local listener <span class="hljs-subst">${id.toString()}</span> error:`</span>, error);
      }
    });
  }

  <span class="hljs-comment">// å¤„ç†å­åº”ç”¨ç‰¹å®šçš„çŠ¶æ€å˜åŒ–</span>
  <span class="hljs-title function_">handleSubAppSpecificChanges</span>(<span class="hljs-params">state, prevState</span>) {
    <span class="hljs-comment">// ç”¨æˆ·ä¿¡æ¯å˜åŒ–</span>
    <span class="hljs-keyword">if</span> (state.<span class="hljs-property">user</span> !== prevState.<span class="hljs-property">user</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleUserChange</span>(state.<span class="hljs-property">user</span>, prevState.<span class="hljs-property">user</span>);
    }

    <span class="hljs-comment">// ä¸»é¢˜å˜åŒ–</span>
    <span class="hljs-keyword">if</span> (state.<span class="hljs-property">theme</span> !== prevState.<span class="hljs-property">theme</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleThemeChange</span>(state.<span class="hljs-property">theme</span>);
    }

    <span class="hljs-comment">// æƒé™å˜åŒ–</span>
    <span class="hljs-keyword">if</span> (state.<span class="hljs-property">user</span>?.<span class="hljs-property">permissions</span> !== prevState.<span class="hljs-property">user</span>?.<span class="hljs-property">permissions</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handlePermissionChange</span>(state.<span class="hljs-property">user</span>?.<span class="hljs-property">permissions</span>);
    }
  }

  <span class="hljs-comment">// æ›´æ–°å­åº”ç”¨UI</span>
  <span class="hljs-title function_">updateSubAppUI</span>(<span class="hljs-params">state, prevState</span>) {
    <span class="hljs-comment">// å®ç°å­åº”ç”¨ç•Œé¢æ›´æ–°é€»è¾‘</span>
    <span class="hljs-comment">// ä¾‹å¦‚ï¼šæ›´æ–°ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤ºã€åº”ç”¨ä¸»é¢˜ç­‰</span>
  }

  <span class="hljs-comment">// å…·ä½“çš„çŠ¶æ€å¤„ç†å‡½æ•°</span>
  <span class="hljs-title function_">handleUserChange</span>(<span class="hljs-params">user, prevUser</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'User changed:'</span>, { <span class="hljs-attr">from</span>: prevUser, <span class="hljs-attr">to</span>: user });
    <span class="hljs-comment">// æ›´æ–°ç”¨æˆ·ç›¸å…³çš„ç•Œé¢å’ŒçŠ¶æ€</span>
  }

  <span class="hljs-title function_">handleThemeChange</span>(<span class="hljs-params">theme</span>) {
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'data-theme'</span>, theme);
  }

  <span class="hljs-title function_">handlePermissionChange</span>(<span class="hljs-params">permissions</span>) {
    <span class="hljs-comment">// æ ¹æ®æ–°æƒé™æ›´æ–°ç•Œé¢å’ŒåŠŸèƒ½</span>
  }

  <span class="hljs-comment">// é”€æ¯é€‚é…å™¨</span>
  <span class="hljs-title function_">destroy</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">unsubscribe</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">unsubscribe</span>();
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">clear</span>();
  }
}

<span class="hljs-comment">// åœ¨å­åº”ç”¨ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">createGlobalStateAdapter</span> = (<span class="hljs-params">props</span>) =&gt; {
  <span class="hljs-keyword">const</span> adapter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GlobalStateAdapter</span>(props);
  <span class="hljs-keyword">if</span> (adapter.<span class="hljs-title function_">init</span>()) {
    <span class="hljs-keyword">return</span> adapter;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
};
</code></pre>
<h4 data-id="heading-11">å®é™…é€šä¿¡æµç¨‹ç¤ºä¾‹</h4>
<h5 data-id="heading-12">çŠ¶æ€å˜æ›´ä¼ æ’­æµç¨‹</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// çŠ¶æ€å˜æ›´ä¼ æ’­ç¤ºæ„å›¾</span>
<span class="hljs-comment">/**
 * 
 * ä¸»åº”ç”¨ setGlobalState({user: newUser})
 *       â†“
 * GlobalStateManager.notifyListeners()
 *       â†“
 * ä¸»åº”ç”¨ç›‘å¬å™¨ â”€â”€â”€â†’ å­åº”ç”¨Aç›‘å¬å™¨ â”€â”€â”€â†’ å­åº”ç”¨Bç›‘å¬å™¨
 *       â†“               â†“               â†“
 * æ›´æ–°ä¸»åº”ç”¨UI       æ›´æ–°å­åº”ç”¨AUI     æ›´æ–°å­åº”ç”¨BUI
 * 
 */</span>
</code></pre>
<h5 data-id="heading-13">å…·ä½“é€šä¿¡ç¤ºä¾‹</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é€šä¿¡è¿‡ç¨‹è·Ÿè¸ª</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CommunicationTracker</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageId</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">communicationLog</span> = [];
  }

  <span class="hljs-title function_">trackStateChange</span>(<span class="hljs-params">source, target, state, action</span>) {
    <span class="hljs-keyword">const</span> logEntry = {
      <span class="hljs-attr">id</span>: ++<span class="hljs-variable language_">this</span>.<span class="hljs-property">messageId</span>,
      <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
      source,
      target,
      <span class="hljs-attr">state</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sanitizeState</span>(state),
      action,
      <span class="hljs-attr">duration</span>: <span class="hljs-literal">null</span>
    };

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">communicationLog</span>.<span class="hljs-title function_">push</span>(logEntry);
    
    <span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'development'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[qiankun-comm] <span class="hljs-subst">${source}</span> -&gt; <span class="hljs-subst">${target}</span>:`</span>, action, state);
    }

    <span class="hljs-keyword">return</span> logEntry.<span class="hljs-property">id</span>;
  }

  <span class="hljs-title function_">markCompletion</span>(<span class="hljs-params">messageId, success = <span class="hljs-literal">true</span></span>) {
    <span class="hljs-keyword">const</span> entry = <span class="hljs-variable language_">this</span>.<span class="hljs-property">communicationLog</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">log</span> =&gt;</span> log.<span class="hljs-property">id</span> === messageId);
    <span class="hljs-keyword">if</span> (entry) {
      entry.<span class="hljs-property">duration</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - entry.<span class="hljs-property">timestamp</span>;
      entry.<span class="hljs-property">success</span> = success;
    }
  }

  <span class="hljs-title function_">sanitizeState</span>(<span class="hljs-params">state</span>) {
    <span class="hljs-comment">// ç§»é™¤æ•æ„Ÿä¿¡æ¯</span>
    <span class="hljs-keyword">const</span> sanitized = { ...state };
    <span class="hljs-keyword">if</span> (sanitized.<span class="hljs-property">user</span>) {
      sanitized.<span class="hljs-property">user</span> = { ...sanitized.<span class="hljs-property">user</span> };
      <span class="hljs-keyword">delete</span> sanitized.<span class="hljs-property">user</span>.<span class="hljs-property">password</span>;
      <span class="hljs-keyword">delete</span> sanitized.<span class="hljs-property">user</span>.<span class="hljs-property">token</span>;
    }
    <span class="hljs-keyword">return</span> sanitized;
  }

  <span class="hljs-title function_">getCommunicationStats</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> successful = <span class="hljs-variable language_">this</span>.<span class="hljs-property">communicationLog</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">log</span> =&gt;</span> log.<span class="hljs-property">success</span>);
    <span class="hljs-keyword">const</span> failed = <span class="hljs-variable language_">this</span>.<span class="hljs-property">communicationLog</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">log</span> =&gt;</span> log.<span class="hljs-property">success</span> === <span class="hljs-literal">false</span>);
    
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">total</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">communicationLog</span>.<span class="hljs-property">length</span>,
      <span class="hljs-attr">successful</span>: successful.<span class="hljs-property">length</span>,
      <span class="hljs-attr">failed</span>: failed.<span class="hljs-property">length</span>,
      <span class="hljs-attr">averageDuration</span>: successful.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, log</span>) =&gt;</span> sum + log.<span class="hljs-property">duration</span>, <span class="hljs-number">0</span>) / successful.<span class="hljs-property">length</span>,
      <span class="hljs-attr">recentMessages</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">communicationLog</span>.<span class="hljs-title function_">slice</span>(-<span class="hljs-number">10</span>)
    };
  }
}

<span class="hljs-comment">// åœ¨å…¨å±€çŠ¶æ€ç®¡ç†å™¨ä¸­é›†æˆè·Ÿè¸ª</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TrackedGlobalState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">GlobalState</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">tracker</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CommunicationTracker</span>();
  }

  <span class="hljs-title function_">setGlobalState</span>(<span class="hljs-params">state, overwrite = <span class="hljs-literal">false</span></span>) {
    <span class="hljs-keyword">const</span> messageId = <span class="hljs-variable language_">this</span>.<span class="hljs-property">tracker</span>.<span class="hljs-title function_">trackStateChange</span>(
      <span class="hljs-string">'main-app'</span>, 
      <span class="hljs-string">'all'</span>, 
      state, 
      <span class="hljs-string">'setGlobalState'</span>
    );

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> result = <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">setGlobalState</span>(state, overwrite);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">tracker</span>.<span class="hljs-title function_">markCompletion</span>(messageId, result);
      <span class="hljs-keyword">return</span> result;
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">tracker</span>.<span class="hljs-title function_">markCompletion</span>(messageId, <span class="hljs-literal">false</span>);
      <span class="hljs-keyword">throw</span> error;
    }
  }
}
</code></pre>
<h4 data-id="heading-14">å…³é”®ç‰¹æ€§æ€»ç»“</h4>
<h5 data-id="heading-15">æ ¸å¿ƒåŸç†</h5>
<p>å‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼šåŸºäºäº‹ä»¶çš„é€šçŸ¥æœºåˆ¶</p>
<p>ä¸­å¿ƒåŒ–çŠ¶æ€å­˜å‚¨ï¼šå•ä¸€æ•°æ®æº</p>
<p>çŠ¶æ€éš”ç¦»ï¼šä¸»åº”ç”¨å’Œå­åº”ç”¨çš„çŠ¶æ€æ“ä½œéš”ç¦»</p>
<p>å¼‚æ­¥é€šçŸ¥ï¼šä½¿ç”¨å¾®ä»»åŠ¡é¿å…é˜»å¡</p>
<h5 data-id="heading-16">é€šä¿¡æœºåˆ¶</h5>
<p>çŠ¶æ€å˜æ›´ä¼ æ’­ï¼šä¸»åº”ç”¨ â†’ æ‰€æœ‰ç›‘å¬å™¨ï¼ˆåŒ…æ‹¬å­åº”ç”¨ï¼‰</p>
<p>åŒå‘é€šä¿¡ï¼šå­åº”ç”¨ä¹Ÿå¯ä»¥æ›´æ–°å…¨å±€çŠ¶æ€</p>
<p>çŠ¶æ€åˆå¹¶ï¼šæ™ºèƒ½åˆå¹¶è€Œä¸æ˜¯å®Œå…¨è¦†ç›–</p>
<p>é”™è¯¯éš”ç¦»ï¼šå•ä¸ªç›‘å¬å™¨é”™è¯¯ä¸å½±å“å…¶ä»–ç›‘å¬å™¨</p>
<h5 data-id="heading-17">æ€§èƒ½ä¼˜åŒ–</h5>
<p>æ‡’æ‰§è¡Œï¼šä½¿ç”¨ setTimeout å’Œ Promise é¿å…é˜»å¡</p>
<p>æ·±åº¦å…‹éš†ï¼šç¡®ä¿çŠ¶æ€ä¸å¯å˜æ€§</p>
<p>å†…å­˜ç®¡ç†ï¼šæä¾›æ¸…ç†å’Œé”€æ¯æ–¹æ³•</p>
<p>æ¡ä»¶ç›‘å¬ï¼šæ”¯æŒç«‹å³æ‰§è¡Œå’Œå»¶è¿Ÿæ‰§è¡Œ</p>
<p>é€šè¿‡è¿™ç§è®¾è®¡ï¼ŒQiankun å®ç°äº†é«˜æ•ˆã€å¯é çš„ä¸»åº”ç”¨ä¸å­åº”ç”¨ä¹‹é—´çš„çŠ¶æ€é€šä¿¡ï¼ŒåŒæ—¶ä¿æŒäº†è‰¯å¥½çš„æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[14.5 ç»˜åˆ¶ï¼ˆä¸€ï¼‰ç»˜åˆ¶åŸç†åŠLayerâ€”â€”é—®ç­”]]></title>    <link>https://juejin.cn/post/7570243451725086747</link>    <guid>https://juejin.cn/post/7570243451725086747</guid>    <pubDate>2025-11-09T18:19:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570243451725086747" data-draft-id="7570243451725070363" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="14.5 ç»˜åˆ¶ï¼ˆä¸€ï¼‰ç»˜åˆ¶åŸç†åŠLayerâ€”â€”é—®ç­”"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2025-11-09T18:19:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é»˜é»˜_david"/> <meta itemprop="url" content="https://juejin.cn/user/1063982989054045"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            14.5 ç»˜åˆ¶ï¼ˆä¸€ï¼‰ç»˜åˆ¶åŸç†åŠLayerâ€”â€”é—®ç­”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1063982989054045/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é»˜é»˜_david
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-09T18:19:22.000Z" title="Sun Nov 09 2025 18:19:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fbook.flutterchina.club%2Fchapter14%2Fpaint.html%23_14-5-1-flutter-%25E7%25BB%2598%25E5%2588%25B6%25E5%258E%259F%25E7%2590%2586" target="_blank" title="https://book.flutterchina.club/chapter14/paint.html#_14-5-1-flutter-%E7%BB%98%E5%88%B6%E5%8E%9F%E7%90%86" ref="nofollow noopener noreferrer">ä¹¦ä¸Šç« èŠ‚é“¾æ¥</a></p>
<h2 data-id="heading-0">ä¸€ã€åŸºç¡€æ¦‚å¿µ</h2>
<ol>
<li>
<p><strong>ç»˜åˆ¶ä¸‰è¦ç´ </strong></p>
<p>ç®€è¿°Flutterç»˜åˆ¶æµç¨‹ä¸­Canvasã€Layerã€Sceneçš„ä½œç”¨åŠç›¸äº’å…³ç³»ã€‚</p>
<ul>
<li><code>Canvas</code>ï¼šå°è£…äº†Flutter Skia/Impellerçš„ç»˜åˆ¶æŒ‡ä»¤ï¼Œç»˜åˆ¶æ—¶è°ƒç”¨<code>Canvas</code>å¯¹è±¡è¿›è¡Œç»˜åˆ¶ï¼›</li>
<li><code>Layer</code>ï¼šç»˜åˆ¶ç»“æœçš„è½½ä½“ï¼Œåˆ†ä¸ºç»˜åˆ¶ç±»(<code>PictureLayer</code>)å’Œå®¹å™¨ç±»(<code>ContainerLayer</code>)</li>
<li><code>Scene</code>ï¼šç”±Layeræ ‘ç»„æˆçš„åœºæ™¯å¯¹è±¡</li>
</ul>
<p>å…³ç³»ï¼š <code>Canvas</code>çš„å¤šæ¡ç»˜åˆ¶æŒ‡ä»¤ï¼Œé€šè¿‡<code>PictureRecorder</code>è®°å½•ä¸‹åç”Ÿæˆ<code>Picture</code>-&gt;<code>Picture</code>å­˜å…¥<code>PictureLayer</code>-&gt;<code>Layer</code>ç»„æˆæ ‘ç»“æ„-&gt;<code>Scene</code>åŒ…è£…<code>Layer</code>æ ‘-&gt;<code>window.render(scene)</code>æäº¤ç»™GPU</p>
</li>
<li>
<p><strong>PictureRecorderçš„ä½œç”¨</strong></p>
<p>ä¸ºä»€ä¹ˆåˆ›å»ºCanvasæ—¶å¿…é¡»ä¼ å…¥PictureRecorderå¯¹è±¡ï¼Ÿå®ƒå¦‚ä½•è®°å½•ç»˜åˆ¶æŒ‡ä»¤ï¼Ÿ</p>
<ul>
<li>
<p>è®°å½•<code>Canvas</code>çš„ç»˜åˆ¶æŒ‡ä»¤æµ</p>
</li>
<li>
<p>è°ƒç”¨<code>endRecording()</code>åç”Ÿæˆ<code>Picture</code>å¯¹è±¡</p>
</li>
<li>
<p>æœªè°ƒç”¨æ—¶<code>Picture</code>ä¸ºnullï¼Œå¯¼è‡´æ— æ³•ä¸Šå±</p>
</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼šPictureRecorder è®°å½•çš„æ˜¯å‘é‡ç»˜åˆ¶æŒ‡ä»¤ï¼Œä¸æ˜¯ä½å›¾ï¼Œä½å›¾æ˜¯åœ¨å…‰æ …åŒ–åæ‰ä¼šç”Ÿæˆ</p>
</blockquote>
</li>
<li>
<p><strong>Layerçš„åˆ†ç±»</strong></p>
<p>ç»˜åˆ¶ç±»Layerï¼ˆå¦‚PictureLayerï¼‰ä¸å®¹å™¨ç±»Layerï¼ˆå¦‚OffsetLayerï¼‰çš„æ ¸å¿ƒåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>ç»˜åˆ¶ç±»Layerï¼šä¿å­˜å…·ä½“ç»˜åˆ¶å†…å®¹ï¼ˆPictureLayerä¿å­˜Pictureï¼‰</li>
<li>å®¹å™¨ç±»Layerï¼šç®¡ç†å­Layerçš„å˜æ¢ç»„åˆï¼ˆå¦‚OffsetLayerç®¡ç†ä½ç§»ï¼ŒClipRectLayerç®¡ç†è£å‰ªï¼‰</li>
</ul>
</li>
<li>
<p><strong>ä¸Šå±ï¼ˆRasterizeï¼‰</strong></p>
<p>è§£é‡Šwindow.render(scene)æ–¹æ³•çš„æ‰§è¡Œè¿‡ç¨‹åŠå…¶åœ¨æ¸²æŸ“æµæ°´çº¿ä¸­çš„æ„ä¹‰ã€‚</p>
<ul>
<li>window.render(scene)å°†Sceneå‘é€ç»™Flutterå¼•æ“</li>
<li>å¼•æ“åœ¨GPUçº¿ç¨‹å…‰æ …åŒ–ï¼ˆå°†çŸ¢é‡æŒ‡ä»¤è½¬ä¸ºåƒç´ ï¼‰</li>
<li>æœ€ç»ˆåˆæˆåˆ°å±å¹•ï¼Œå®Œæˆæ¸²æŸ“é—­ç¯</li>
</ul>
</li>
</ol>
<h2 data-id="heading-1">äºŒã€ç»˜åˆ¶æµç¨‹</h2>
<ol start="5">
<li>
<p><strong>æµç¨‹æ’åº</strong></p>
<p>å°†ä»¥ä¸‹æ­¥éª¤æŒ‰æ­£ç¡®é¡ºåºæ’åˆ—ï¼Œå¹¶è¯´æ˜ç¼ºå¤±ç¯èŠ‚ï¼š</p>
</li>
</ol>
<pre><code class="hljs language-c" lang="c">   A. è°ƒç”¨Canvasç»˜åˆ¶API  
   B. åˆ›å»ºPictureRecorderå’ŒCanvas  
   C. è°ƒç”¨window.render(scene)  
   D. å°†Pictureä¿å­˜åˆ°PictureLayer  
   E. æ„å»ºSceneå¹¶å…³è”Layer  
</code></pre>
<ul>
<li>é¡ºåºï¼šB-&gt;A-&gt;D-&gt;E-&gt;C</li>
<li>ç¼ºå¤±ï¼šåœ¨Dä¹‹å‰éœ€è°ƒç”¨<code>recorder.endRecording()</code>ç”ŸæˆPicture</li>
</ul>
<ol start="6">
<li>
<p><strong>Pictureç”Ÿæˆæ—¶æœº</strong></p>
<p>ä½•æ—¶è°ƒç”¨<code>recorder.endRecording()</code>ï¼Ÿå»¶è¿Ÿè°ƒç”¨ä¼šå¯¼è‡´ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p>
<ul>
<li>ç»˜åˆ¶å®Œæˆåç«‹å³è°ƒç”¨<code>recorder.endRecording()</code></li>
<li>å»¶è¿Ÿè°ƒç”¨ä¼šå¯¼è‡´ï¼š
<ul>
<li>å½“å‰å¸§æ— æœ‰æ•ˆPicture</li>
<li>å¯èƒ½å†…å­˜æ³„æ¼ï¼ˆæœªé‡Šæ”¾ç»˜å›¾èµ„æºï¼‰</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Layeræ ‘çš„æ„å»º</strong></p>
<p>ä¸ºä»€ä¹ˆéœ€è¦å°†PictureLayeræ·»åŠ åˆ°OffsetLayerï¼Ÿç›´æ¥ä½¿ç”¨PictureLayeræ„å»ºSceneæ˜¯å¦å¯è¡Œï¼Ÿ</p>
<ul>
<li>å¿…é¡»é€šè¿‡å®¹å™¨ç±»Layerï¼ˆå¦‚OffsetLayerï¼‰ç»„ç»‡</li>
<li>ç›´æ¥ä½¿ç”¨PictureLayerä¸å¯è¡Œï¼š
<ul>
<li>Sceneè¦æ±‚æ ¹èŠ‚ç‚¹æ˜¯å®¹å™¨ç±»Layer</li>
<li>ç¼ºå°‘å˜æ¢/è£å‰ªç­‰ç»„åˆèƒ½åŠ›</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>ç»˜åˆ¶åŒºåŸŸé™åˆ¶</strong></p>
<p>PictureLayer(rect)ä¸­çš„rectå‚æ•°æœ‰ä½•ä½œç”¨ï¼Ÿå¦‚æœç»˜åˆ¶çš„å›¾å½¢è¶…å‡ºè¯¥åŒºåŸŸï¼Œæ˜¯å¦ä¼šè¢«è£å‰ªï¼Ÿ</p>
<ul>
<li>rectå®šä¹‰Layerçš„æ˜¾ç¤ºèŒƒå›´</li>
<li>è¶…å‡ºåŒºåŸŸçš„ç»˜åˆ¶å†…å®¹ä¼šè¢«è£å‰ª</li>
<li>æœªè®¾ç½®æ—¶é»˜è®¤ä¸è£å‰ªï¼ˆRect.largestï¼‰</li>
</ul>
</li>
</ol>
<h2 data-id="heading-2">ä¸‰ã€Pictureä¸å…‰æ …åŒ–</h2>
<ol start="9">
<li>
<p><strong>Pictureçš„æœ¬è´¨</strong></p>
<p>ä¸ºä»€ä¹ˆè¯´Pictureæ˜¯â€œç»˜åˆ¶æŒ‡ä»¤çš„é›†åˆâ€è€Œéåƒç´ æ•°æ®ï¼Ÿå®ƒå¦‚ä½•è¢«è½¬æ¢ä¸ºå±å¹•å›¾åƒï¼Ÿ</p>
<ul>
<li>å­˜å‚¨çš„æ˜¯çŸ¢é‡ç»˜åˆ¶æŒ‡ä»¤åºåˆ—</li>
<li>å…‰æ …åŒ–è¿‡ç¨‹ï¼š GPUçº¿ç¨‹è§£ææŒ‡ä»¤ â†’ ç”Ÿæˆä½å›¾ â†’ çº¹ç†ä¸Šä¼  â†’ å±å¹•åˆæˆ</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½ä¼˜åŒ–</strong></p>
</li>
</ol>
<p>é¢‘ç¹åˆ›å»ºPictureå¯¹è±¡å¯èƒ½å¼•å‘ä»€ä¹ˆæ€§èƒ½é—®é¢˜ï¼Ÿå¦‚ä½•é¿å…ï¼Ÿï¼ˆæç¤ºï¼šå¤ç”¨æˆ–ç¼“å­˜ï¼‰</p>
<ul>
<li>é—®é¢˜ï¼šé¢‘ç¹åˆ›å»ºå¯¼è‡´å†…å­˜å‹åŠ›ï¼Œè§¦å‘GCå¡é¡¿</li>
<li>ä¼˜åŒ–ï¼šå¯¹é™æ€å†…å®¹å¤ç”¨Pictureï¼Œæˆ–ä½¿ç”¨<code>Layer.reuse</code>å¤ç”¨</li>
</ul>
<ol start="11">
<li><strong>å…‰æ …åŒ–çº¿ç¨‹</strong></li>
</ol>
<p>Pictureçš„å…‰æ …åŒ–åœ¨å“ªä¸ªçº¿ç¨‹æ‰§è¡Œï¼Ÿå¦‚ä½•å½±å“UIçº¿ç¨‹çš„æ€§èƒ½ï¼Ÿ</p>
<ul>
<li>æ‰§è¡Œåœ¨GPUçº¿ç¨‹ï¼ˆç‹¬ç«‹äºUIçº¿ç¨‹ï¼‰</li>
<li>è€—æ—¶æ“ä½œä¼šé˜»å¡å…‰æ …åŒ– â†’ å¯¼è‡´ç•Œé¢æ‰å¸§å¡é¡¿</li>
</ul>
<h2 data-id="heading-3">å››ã€Layeræœºåˆ¶æ·±å…¥</h2>
<ol start="12">
<li><strong>Layerå¤ç”¨åœºæ™¯</strong></li>
</ol>
<p>å“ªäº›æƒ…å†µé€‚åˆå¤ç”¨Layerï¼Ÿä¸€èˆ¬å¦‚ä½•å¤ç”¨Layerå¦‚ä½•æå‡æ¸²æŸ“æ•ˆç‡ã€‚</p>
<ul>
<li>é€‚ç”¨ï¼šé™æ€èƒŒæ™¯/å¤æ‚ä½†ä¸å˜çš„UIå…ƒç´ </li>
<li>å¯¹äºéœ€è¦å¤ç”¨çš„éƒ¨åˆ†åœ¨å¤–å±‚ç”¨<code>RepaintBoundary</code>åŒ…è£¹ï¼ˆç‹¬ç«‹çš„layerï¼‰ï¼›<code>CustomPainter</code>ä¸­ä¿å­˜<code>layer</code>å¹¶ä¸”è®©<code>shouldRepaint</code>è¿”å›falseï¼›</li>
</ul>
<ol start="13">
<li><strong>å®¹å™¨ç±»Layerçš„åº”ç”¨</strong></li>
</ol>
<p>TransformLayer/ClipRectLayerå¦‚ä½•é€šè¿‡Layeræ ‘å®ç°å¤æ‚æ•ˆæœï¼Ÿå†™å‡ºä¼ªä»£ç ç¤ºä¾‹ã€‚</p>
<pre><code class="hljs language-dart" lang="dart">    <span class="hljs-comment">// ä¼ªä»£ç ï¼šæ—‹è½¬+è£å‰ªç»„åˆ</span>
    <span class="hljs-keyword">final</span> root = OffsetLayer();
    <span class="hljs-keyword">final</span> transformLayer = TransformLayer(transform: rotationMatrix);
    <span class="hljs-keyword">final</span> clipLayer = ClipRectLayer(rect: clipRect);
    clipLayer.add(pictureLayer);
    transformLayer.add(clipLayer);
    root.add(transformLayer);
</code></pre>
<ol start="14">
<li><strong>Layerä¸RenderObject</strong></li>
</ol>
<p>è‡ªå®šä¹‰RenderObjectæ—¶ï¼Œå…¶paint()æ–¹æ³•å†…éƒ¨å¦‚ä½•ç”Ÿæˆå’Œå¤„ç†Layerï¼Ÿ</p>
<pre><code class="hljs language-dart" lang="dart">    <span class="hljs-keyword">void</span> paint(PaintingContext context, Offset offset) {
      <span class="hljs-comment">// ç”ŸæˆPictureLayer</span>
      context.canvas.drawRect(...);
      <span class="hljs-comment">// æ·»åŠ å®¹å™¨Layer</span>
      context.pushLayer(ClipRectLayer(...), painter, offset);
    } 
</code></pre>
<ol start="15">
<li><strong>Layerçš„è„æ£€æŸ¥</strong></li>
</ol>
<p>Flutterå¦‚ä½•åˆ¤æ–­æŸä¸ªLayeréœ€è¦é‡ç»˜ï¼Ÿä¸Widgetçš„setState()æœ‰ä½•å…³è”ï¼Ÿ</p>
<ul>
<li>å½“RenderObjectè°ƒç”¨<code>markNeedsPaint()</code>æ—¶ï¼Œä¼šé€å±‚å‘ä¸Šæ ‡è®°_needsPaintä¸ºtrueï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªisRepaintBoundaryä¸ºtrueçš„ç»˜åˆ¶è¾¹ç•Œï¼›ç»˜åˆ¶ä»ç»˜åˆ¶è¾¹ç•Œå¼€å§‹ä»ä¸Šå¾€ä¸‹ç»˜åˆ¶ï¼Œ<code>_needsPaint</code>ä¸ºtrueçš„æ‰éœ€è¦é‡ç»˜ï¼Œ<code>_needsPaint</code>ä¸ºfalseçš„ç›´æ¥å¤ç”¨</li>
<li>ä¸setState()å…³ç³»ï¼š<code>setState()</code>æ ‡è®°è„ç‚¹åï¼Œä¼šè°ƒç”¨<code>scheduleFrame()</code>è¯·æ±‚ä¸€ä¸ªæ–°çš„frameï¼Œå›è°ƒåˆ°<code>drawFrame</code>åï¼Œä¼šæ‰§è¡Œæ¸²æŸ“ç®¡çº¿ï¼›æ¸²æŸ“ç®¡çº¿ï¼š<code>æ„å»º-&gt;å¸ƒå±€-&gt;å±‚åˆæˆ-&gt;æ›´æ–°ç»˜åˆ¶-&gt;ä¸Šå±</code>ï¼›å¸ƒå±€ä¸­ï¼Œéå†<code>_nodesNeedingLayout</code>æ•°ç»„ï¼Œå¯¹æ¯ä¸€ä¸ªrenderObjecté‡æ–°å¸ƒå±€ï¼ˆè°ƒç”¨å…¶layoutæ–¹æ³•ï¼‰ï¼Œlayoutæ–¹æ³•ä¸­ä¼šè°ƒç”¨<code>markNeedsPaint()</code></li>
</ul>
<h2 data-id="heading-4">äº”ã€åº•å±‚APIå®æ“</h2>
<ol start="16">
<li><strong>ä»£ç è¡¥å…¨</strong></li>
</ol>
<p>è¡¥å…¨ç¼ºå¤±ä»£ç ï¼Œå®ç°ç»˜åˆ¶åœ†å½¢å¹¶ä¸Šå±ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">    <span class="hljs-keyword">void</span> main() {  
      PictureRecorder recorder = __________;  
      Canvas canvas = _________;  
      canvas.drawCircle(Offset(<span class="hljs-number">100</span>,<span class="hljs-number">100</span>), <span class="hljs-number">50</span>,  Paint()..color=Colors.red);  
      <span class="hljs-keyword">var</span> pictureLayer = PictureLayer(_________);  
      pictureLayer.picture = recorder.__________;  
      <span class="hljs-keyword">var</span> rootLayer = OffsetLayer();  
      rootLayer.__________;  
      Scene scene = __________.buildScene(SceneBuilder());  
      <span class="hljs-built_in">window</span>.render(scene);  
    }  
</code></pre>
<p>ç­”æ¡ˆï¼š</p>
<pre><code class="hljs language-dart" lang="dart">    <span class="hljs-keyword">void</span> main() {
      PictureRecorder recorder = PictureRecorder();
      Canvas canvas = Canvas(recorder);
      canvas.drawCircle(Offset(<span class="hljs-number">100</span>,<span class="hljs-number">100</span>), <span class="hljs-number">50</span>, Paint()..color=Colors.red);
      <span class="hljs-keyword">var</span> pictureLayer = PictureLayer(Rect.largest);
      pictureLayer.picture = recorder.endRecording();
      <span class="hljs-keyword">var</span> rootLayer = OffsetLayer();
      rootLayer.append(pictureLayer);
      Scene scene = rootLayer.buildScene(SceneBuilder());
      <span class="hljs-built_in">window</span>.render(scene);
    }
</code></pre>
<ol start="17">
<li><strong>é”™è¯¯åˆ†æ</strong></li>
</ol>
<p>ä»¥ä¸‹ä»£ç ä¸ºä½•æ— æ³•æ˜¾ç¤ºå›¾åƒï¼Ÿ</p>
<pre><code class="hljs language-dart" lang="dart">    Canvas(recorder);  
    drawChessboard(canvas, rect);  
    <span class="hljs-built_in">window</span>.render(SceneBuilder().build());  
</code></pre>
<ul>
<li>ç¼ºå°‘PictureLayeråˆ›å»º</li>
<li>æœªè°ƒç”¨endRecording()</li>
<li>SceneBuilderæœªæ·»åŠ ä»»ä½•Layer</li>
<li>æœªåˆ›å»ºæ ¹OffsetLayer</li>
</ul>
<ol start="18">
<li><strong>å¤šLayeråˆæˆ</strong></li>
</ol>
<p>å¦‚ä½•åœ¨åŒä¸€ä¸ªSceneä¸­å åŠ ä¸¤ä¸ªPictureLayerï¼Œå¹¶è®©ç¬¬äºŒä¸ªLayeråç§»50åƒç´ ï¼Ÿ ï¼ˆæç¤ºï¼šä½¿ç”¨OffsetLayeråµŒå¥—ï¼‰</p>
<pre><code class="hljs language-dart" lang="dart">    <span class="hljs-keyword">final</span> root = OffsetLayer();
    root.append(layer1);  <span class="hljs-comment">// ç›´æ¥æ·»åŠ ç¬¬ä¸€å±‚</span>
    
    <span class="hljs-keyword">final</span> offsetLayer = OffsetLayer(offset: Offset(<span class="hljs-number">50</span>, <span class="hljs-number">50</span>));
    offsetLayer.append(layer2); <span class="hljs-comment">// åç§»çš„ç¬¬äºŒå±‚</span>
    root.append(offsetLayer);
</code></pre>
<ol start="19">
<li><strong>æ€§èƒ½é™·é˜±</strong></li>
</ol>
<p>åœ¨æ¯å¸§éƒ½åˆ›å»ºæ–°çš„PictureLayerå¹¶ä¸Šå±ï¼Œä¼šå¯¼è‡´ä»€ä¹ˆé—®é¢˜ï¼Ÿå¦‚ä½•ä¼˜åŒ–ï¼Ÿ</p>
<ul>
<li>é—®é¢˜ï¼šæ¯å¸§åˆ›å»ºæ–°Layer â†’ å†…å­˜æŠ–åŠ¨ â†’ é¢‘ç¹GC â†’ ç•Œé¢å¡é¡¿</li>
<li>ä¼˜åŒ–ï¼šå¯¹é™æ€å†…å®¹å¤ç”¨PictureLayer</li>
</ul>
<h2 data-id="heading-5">å…­ã€ç»¼åˆåº”ç”¨</h2>
<ol start="20">
<li><strong>è‡ªå®šä¹‰ç»˜åˆ¶æ§ä»¶</strong></li>
</ol>
<p>ç»“åˆCustomPaintè®¾è®¡ï¼š</p>
<ul>
<li>è§£é‡ŠCustomPainterçš„paint()æ–¹æ³•å†…éƒ¨å¦‚ä½•é€šè¿‡Canvasç”ŸæˆPictureLayerï¼›</li>
<li>ä¸ºä½•shouldRepaint()è¿”å›å€¼å½±å“Layeræ›´æ–°ï¼Ÿ
ç­”ï¼š</li>
</ul>
<pre><code class="hljs language-dart" lang="dart">    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyPainter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">CustomPainter</span> </span>{
      <span class="hljs-keyword">void</span> paint(Canvas canvas, Size size) {
        <span class="hljs-comment">// å†…éƒ¨ç”ŸæˆPicture â†’ å­˜å…¥PictureLayer</span>
        canvas.drawRect(...); 
      }
      
      <span class="hljs-built_in">bool</span> shouldRepaint(old) =&gt; <span class="hljs-keyword">true</span>; <span class="hljs-comment">// è¿”å›trueæ—¶é‡å»ºLayer</span>
    }
</code></pre>
<ul>
<li>canvasè·å–æ—¶ä¼šè°ƒç”¨<code>_startRecording()</code>ï¼Œåœ¨<code>_startRecording()</code>ä¸­ä¼šåˆ›å»º<code>PictureLayer</code>å¯¹è±¡</li>
<li>åœ¨ç»˜åˆ¶é˜¶æ®µ
<ul>
<li>å¯¹äºæ¯ä¸ªéœ€è¦ç»˜åˆ¶çš„ RenderObjectï¼Œæ£€æŸ¥ shouldRepaint()</li>
<li>å¦‚æœè¿”å› false ä¸” Layer æœ‰æ•ˆ â†’ ç›´æ¥å¤ç”¨ç°æœ‰ Layer</li>
<li>å¦‚æœè¿”å› true æˆ– Layer æ— æ•ˆ â†’ åˆ›å»ºæ–°çš„ PictureRecorder å’Œ Canvas</li>
</ul>
</li>
</ul>
<ol start="21">
<li><strong>åŠ¨æ€ç»˜åˆ¶ä¼˜åŒ–</strong></li>
</ol>
<p>å®ç°ä¸€ä¸ªå®æ—¶ç»˜åˆ¶çš„åŠ¨ç”»ï¼ˆå¦‚è¿›åº¦æ¡ï¼‰ï¼Œæ¯”è¾ƒç›´æ¥ä¸Šå± vs. å¤ç”¨PictureLayerçš„å¸§ç‡å·®å¼‚ã€‚</p>
<ul>
<li>ç›´æ¥ä¸Šå±ï¼šæ¯å¸§åˆ›å»ºæ–°Layer â†’ å¸§ç‡&lt;30fps</li>
<li>å¤ç”¨ä¼˜åŒ–ï¼šå¤ç”¨åå¸§ç‡å¯è¾¾60fps</li>
</ul>
<pre><code class="hljs language-dart" lang="dart">      <span class="hljs-keyword">void</span> update() {
        <span class="hljs-keyword">if</span> (_needsUpdate) {
          _updateForegroundLayer(); <span class="hljs-comment">// åªæ›´æ–°å‰æ™¯å±‚</span>
          _needsUpdate = <span class="hljs-keyword">false</span>;
        }
        rootLayer.append(_cachedBackground);
        rootLayer.append(_foregroundLayer);
      }
</code></pre>
<ol start="22">
<li><strong>ç¦»å±æ¸²æŸ“</strong></li>
</ol>
<p>åˆ©ç”¨Pictureå’ŒLayerå®ç°ç¦»å±ç»˜åˆ¶ï¼Œå¹¶å°†ç»“æœç¼“å­˜ä¸ºå›¾ç‰‡ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚</p>
<ul>
<li>ä¼˜åŠ¿ï¼šé¿å…é‡å¤è®¡ç®—ï¼Œç›´æ¥å¤ç”¨ä½å›¾</li>
</ul>
<pre><code class="hljs language-dart" lang="dart">    Future&lt;ui.Image&gt; _renderOffscreen() <span class="hljs-keyword">async</span> {
      <span class="hljs-keyword">final</span> recorder = PictureRecorder();
      <span class="hljs-keyword">final</span> canvas = Canvas(recorder);
      _drawComplexPath(canvas); <span class="hljs-comment">// å¤æ‚ç»˜åˆ¶</span>
      <span class="hljs-keyword">final</span> picture = recorder.endRecording();
      
      <span class="hljs-comment">// å…‰æ …åŒ–ä¸ºå›¾ç‰‡</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> picture.toImage(<span class="hljs-number">500</span>, <span class="hljs-number">500</span>);
    }
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025å¹´-vue3é¢è¯•é¢˜ï¼ˆAIåˆ†æè¯¦ç»†ç‰ˆï¼‰]]></title>    <link>https://juejin.cn/post/7570394530316713984</link>    <guid>https://juejin.cn/post/7570394530316713984</guid>    <pubDate>2025-11-10T03:26:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570394530316713984" data-draft-id="7570405675434000384" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025å¹´-vue3é¢è¯•é¢˜ï¼ˆAIåˆ†æè¯¦ç»†ç‰ˆï¼‰"/> <meta itemprop="keywords" content="é¢è¯•"/> <meta itemprop="datePublished" content="2025-11-10T03:26:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¸€è¯¾"/> <meta itemprop="url" content="https://juejin.cn/user/1169536102963917"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025å¹´-vue3é¢è¯•é¢˜ï¼ˆAIåˆ†æè¯¦ç»†ç‰ˆï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536102963917/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¸€è¯¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T03:26:39.000Z" title="Mon Nov 10 2025 03:26:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1ã€Vue3 ä½¿ç”¨ Proxy ä»£æ›¿ Vue2 ä¸­çš„ Object.defineProperty æ¥å®ç°å“åº”å¼ç³»ç»Ÿï¼Œè¿™ä½¿å¾—å¯¹æ•´ä¸ªå¯¹è±¡çš„ä»£ç†æ›´åŠ é«˜æ•ˆå’Œå…¨é¢ã€‚å®ƒé€šè¿‡ä¾èµ–è¿½è¸ªå’Œè§¦å‘æœºåˆ¶ï¼Œç¡®ä¿åªæœ‰å®é™…å˜åŒ–çš„éƒ¨åˆ†é‡æ–°æ¸²æŸ“ï¼Œä»è€Œä¼˜åŒ–æ€§èƒ½</h2>
<hr/>
<h2 data-id="heading-1"><strong>ä¸€ã€Vue2 çš„å“åº”å¼ï¼š</strong></h2>
<h2 data-id="heading-2"><strong>Object.defineProperty</strong></h2>
<p>åœ¨ Vue2 ä¸­ï¼Œå“åº”å¼ç³»ç»Ÿæ˜¯é€šè¿‡ <strong>Object.defineProperty()</strong> å®ç°çš„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">defineReactive</span>(<span class="hljs-params">obj, key, val</span>) {
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(obj, key, {
    <span class="hljs-title function_">get</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è®¿é—®å±æ€§: <span class="hljs-subst">${key}</span>`</span>);
      <span class="hljs-keyword">return</span> val;
    },
    <span class="hljs-title function_">set</span>(<span class="hljs-params">newVal</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ä¿®æ”¹å±æ€§: <span class="hljs-subst">${key}</span>`</span>);
      val = newVal;
    }
  });
}
</code></pre>
<p>è¿™ç§æ–¹å¼çš„ç‰¹ç‚¹æ˜¯ï¼š</p>
<ul>
<li>
<p>æ¯ä¸ªå±æ€§éƒ½è¦å•ç‹¬â€œæ‹¦æˆªâ€ï¼›</p>
</li>
<li>
<p>å¿…é¡»åœ¨åˆå§‹åŒ–æ—¶éå†å¯¹è±¡çš„æ¯ä¸€ä¸ªå±æ€§ï¼›</p>
</li>
<li>
<p>æ–°å¢æˆ–åˆ é™¤å±æ€§æ—¶æ— æ³•è¢«ç›‘å¬ï¼ˆå› ä¸ºå®šä¹‰æ—¶å°±å›ºå®šäº†ï¼‰ï¼›</p>
</li>
<li>
<p>å¯¹æ•°ç»„çš„ç›‘å¬éå¸¸éº»çƒ¦ï¼Œåªèƒ½é€šè¿‡é‡å†™æ•°ç»„æ–¹æ³•ï¼ˆå¦‚ pushã€splice ç­‰ï¼‰æ¥åŠ«æŒã€‚</p>
</li>
</ul>
<p>ğŸ‘‰ ä¸¾ä¾‹ï¼š</p>
<pre><code class="hljs language-css" lang="css">data: {
  user: { name: <span class="hljs-string">'Alice'</span>, age: <span class="hljs-number">20</span> }
}
</code></pre>
<p>Vue2 åˆå§‹åŒ–æ—¶ä¼šéå† user å¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼Œå¯¹æ¯ä¸ªéƒ½è°ƒç”¨ Object.definePropertyã€‚</p>
<p>å¦‚æœä¹‹åæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">this.user.gender</span> = <span class="hljs-string">'female'</span>
</code></pre>
<p>è¿™ä¸ä¼šè§¦å‘å“åº”å¼ï¼Œå› ä¸º gender æ˜¯åæ¥æ–°å¢çš„å±æ€§ã€‚</p>
<hr/>
<h2 data-id="heading-3"><strong>äºŒã€Vue3 çš„å“åº”å¼ï¼š</strong></h2>
<h2 data-id="heading-4"><strong>Proxy</strong></h2>
<p>Vue3 ä½¿ç”¨äº† ES6 çš„ <strong>Proxy</strong>ï¼Œå®ƒèƒ½ç›´æ¥<strong>ä»£ç†æ•´ä¸ªå¯¹è±¡</strong>ï¼Œä¸å†éœ€è¦é€’å½’éå†æ¯ä¸ªå±æ€§ã€‚</p>
<p>æ ¸å¿ƒæ€æƒ³ï¼š</p>
<blockquote>
<p>ä½¿ç”¨ Proxy æ‹¦æˆªå¯¹è±¡çš„å„ç§æ“ä½œï¼ˆè¯»ã€å†™ã€åˆ ã€éå†ç­‰ï¼‰ï¼Œç„¶åç»“åˆä¾èµ–æ”¶é›†ä¸è§¦å‘æœºåˆ¶ï¼Œå®ç°å“åº”å¼æ›´æ–°ã€‚</p>
</blockquote>
<p>åŸºæœ¬å®ç°ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> handler = {
  <span class="hljs-title function_">get</span>(<span class="hljs-params">target, key, receiver</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è¯»å–å±æ€§: <span class="hljs-subst">${key}</span>`</span>);
    <span class="hljs-comment">// ä¾èµ–æ”¶é›†</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, key, receiver);
  },
  <span class="hljs-title function_">set</span>(<span class="hljs-params">target, key, value, receiver</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ä¿®æ”¹å±æ€§: <span class="hljs-subst">${key}</span>`</span>);
    <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, key, value, receiver);
    <span class="hljs-comment">// æ´¾å‘æ›´æ–°</span>
    <span class="hljs-keyword">return</span> result;
  }
};

<span class="hljs-keyword">const</span> proxyUser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'Alice'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">20</span> }, handler);
proxyUser.<span class="hljs-property">name</span> = <span class="hljs-string">'Bob'</span>;
</code></pre>
<hr/>
<h2 data-id="heading-5"><strong>ä¸‰ã€ä¸¤è€…çš„å…³é”®å·®å¼‚</strong></h2>








































<table><thead><tr><th><strong>å¯¹æ¯”ç‚¹</strong></th><th><strong>Vue2ï¼ˆObject.definePropertyï¼‰</strong></th><th><strong>Vue3ï¼ˆProxyï¼‰</strong></th></tr></thead><tbody><tr><td>å“åº”å¼å®ç°æ–¹å¼</td><td>å¯¹æ¯ä¸ªå±æ€§å•ç‹¬åŠ«æŒ</td><td>å¯¹æ•´ä¸ªå¯¹è±¡ä»£ç†</td></tr><tr><td>æ–°å¢/åˆ é™¤å±æ€§ç›‘å¬</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>æ•°ç»„æ£€æµ‹</td><td>é‡å†™æ•°ç»„åŸå‹</td><td>åŸç”Ÿæ”¯æŒ</td></tr><tr><td>æ€§èƒ½</td><td>åˆå§‹åŒ–æ…¢ï¼ˆè¦é€’å½’éå†ï¼‰</td><td>åˆå§‹åŒ–å¿«ï¼ˆä»£ç†ä¸€æ¬¡å³å¯ï¼‰</td></tr><tr><td>æ·±å±‚å¯¹è±¡</td><td>å¿…é¡»é€’å½’æ¯ä¸€å±‚</td><td>æŒ‰éœ€æƒ°æ€§ä»£ç†ï¼ˆè®¿é—®æ—¶å†ä»£ç†ï¼‰</td></tr><tr><td>å¯ä»£ç†ç±»å‹</td><td>åªèƒ½æ˜¯å¯¹è±¡çš„å±æ€§</td><td>å‡ ä¹æ‰€æœ‰ç±»å‹ï¼ˆå¯¹è±¡ã€æ•°ç»„ã€Mapã€Set ç­‰ï¼‰</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-6"><strong>å››ã€ä¾èµ–è¿½è¸ªä¸è§¦å‘æœºåˆ¶ï¼ˆæ ¸å¿ƒæœºåˆ¶ï¼‰</strong></h2>
<p>æ— è®ºæ˜¯ Vue2 è¿˜æ˜¯ Vue3ï¼Œ<strong>å“åº”å¼çš„æœ¬è´¨éƒ½ç¦»ä¸å¼€ â€œä¾èµ–æ”¶é›†â€ ä¸ â€œä¾èµ–è§¦å‘â€</strong> ã€‚</p>
<h3 data-id="heading-7"><strong>1. ä¾èµ–æ”¶é›†ï¼ˆtrackï¼‰</strong></h3>
<p>å½“æ¨¡æ¿æˆ–è®¡ç®—å±æ€§è®¿é—®æŸä¸ªå“åº”å¼æ•°æ®æ—¶ï¼Œç³»ç»Ÿä¼šè®°å½•ä¸‹å½“å‰ä¾èµ–å®ƒçš„â€œå‰¯ä½œç”¨å‡½æ•°â€ï¼ˆeffectï¼‰ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">effect</span>(() =&gt; {
  console<span class="hljs-selector-class">.log</span>(proxyUser.name); <span class="hljs-comment">// ä¾èµ–æ”¶é›†</span>
});
</code></pre>
<h3 data-id="heading-8"><strong>2. ä¾èµ–è§¦å‘ï¼ˆtriggerï¼‰</strong></h3>
<p>å½“è¿™ä¸ªå“åº”å¼æ•°æ®è¢«ä¿®æ”¹æ—¶ï¼Œå¯¹åº”çš„å‰¯ä½œç”¨å‡½æ•°ä¼šè¢«é‡æ–°æ‰§è¡Œï¼Œä»è€Œè§¦å‘ç•Œé¢æ›´æ–°ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">proxyUser.name</span> = <span class="hljs-string">'Charlie'</span><span class="hljs-comment">; // è§¦å‘æ›´æ–°</span>
</code></pre>
<p>Vue3 ä½¿ç”¨äº†ç‹¬ç«‹çš„ä¾èµ–æ”¶é›†ç³»ç»Ÿï¼ˆeffect + track + triggerï¼‰ï¼Œç›¸æ¯” Vue2 çš„ Dep æ¨¡å‹æ›´åŠ æ¨¡å—åŒ–ã€é«˜æ•ˆã€‚</p>
<hr/>
<h2 data-id="heading-9"><strong>äº”ã€æ€§èƒ½ä¼˜åŒ–ä¸ç°ä»£ç‰¹æ€§</strong></h2>
<h3 data-id="heading-10"><strong>âœ… æƒ°æ€§ä»£ç†ï¼ˆLazy Proxyï¼‰</strong></h3>
<p>Vue3 åœ¨ get æ—¶æ‰ä¼šé€’å½’ä»£ç†å­å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§å…¨éƒ¨é€’å½’ã€‚è¿™å¤§å¤§æå‡äº†æ€§èƒ½ã€‚</p>
<h3 data-id="heading-11"><strong>âœ… ç²¾å‡†ä¾èµ–è¿½è¸ª</strong></h3>
<p>åªæœ‰<strong>è¢«è®¿é—®çš„å±æ€§</strong>æ‰ä¼šè¢«è¿½è¸ªï¼Œä¿®æ”¹å…¶ä»–å±æ€§ä¸ä¼šè§¦å‘ä¸ç›¸å…³çš„æ›´æ–°ã€‚</p>
<h3 data-id="heading-12"><strong>âœ… ç»“æ„çµæ´»</strong></h3>
<p>Proxy èƒ½å¤„ç† Mapã€Setã€WeakMapã€WeakSet ç­‰å¤æ‚ç»“æ„ï¼Œä½¿ Vue3 èƒ½åŸç”Ÿæ”¯æŒæ›´å¤šæ•°æ®ç±»å‹çš„å“åº”å¼ã€‚</p>
<hr/>
<h2 data-id="heading-13"><strong>å…­ã€æ€»ç»“ä¸€å¥è¯</strong></h2>
<blockquote>
<p>Vue3 çš„å“åº”å¼ç³»ç»Ÿé€šè¿‡ Proxy å®ç°äº†â€œå¯¹è±¡çº§åˆ«çš„å…¨åŸŸä»£ç†â€ï¼Œé…åˆæƒ°æ€§ä¾èµ–è¿½è¸ªä¸è§¦å‘æœºåˆ¶ï¼Œè®©æ•°æ®æ›´æ–°æ›´æ™ºèƒ½ã€æ›´é«˜æ•ˆã€æ›´è‡ªç„¶ã€‚</p>
</blockquote>
<hr/>
<p>å›¾ä¾‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c49f2ff51f1047cf8499d3c1bdfaf3cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LiA6K--:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763349999&amp;x-signature=LjqIxqdsSzOSjPnvw5VPsGFaFgA%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChain1.0æ™ºèƒ½ä½“å¼€å‘ï¼šå®‰å…¨é˜²æŠ¤æœºåˆ¶]]></title>    <link>https://juejin.cn/post/7570271574348726281</link>    <guid>https://juejin.cn/post/7570271574348726281</guid>    <pubDate>2025-11-10T01:24:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570271574348726281" data-draft-id="7569946369990606911" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangChain1.0æ™ºèƒ½ä½“å¼€å‘ï¼šå®‰å…¨é˜²æŠ¤æœºåˆ¶"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,Agent,LangChain"/> <meta itemprop="datePublished" content="2025-11-10T01:24:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="FreeCode"/> <meta itemprop="url" content="https://juejin.cn/user/1282499717900794"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangChain1.0æ™ºèƒ½ä½“å¼€å‘ï¼šå®‰å…¨é˜²æŠ¤æœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1282499717900794/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    FreeCode
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T01:24:34.000Z" title="Mon Nov 10 2025 01:24:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><blockquote>
<p>é˜²æŠ¤æœºåˆ¶æ˜¯æ‰€æœ‰åŸºäºå¤§æ¨¡å‹çš„éƒ¨ç½²æ–¹æ¡ˆä¸­çš„å…³é”®ç»„ä»¶ã€‚è®¾è®¡å®Œå–„çš„é˜²æŠ¤æœºåˆ¶ï¼Œä¸ºä½ çš„æ™ºèƒ½ä½“å®ç°å®‰å…¨æ£€æŸ¥ä¸å†…å®¹è¿‡æ»¤åŠŸèƒ½ï¼Œæœ‰åŠ©äºç®¡ç†æ•°æ®éšç§é£é™©å’Œå£°èª‰é£é™©ã€‚é˜…è¯»æœ¬æ–‡æ‚¨å°†è·å¾—ï¼›</p>
<ul>
<li>å®‰å…¨é˜²æŠ¤æœºåˆ¶çš„ä½œç”¨</li>
<li>å®‰å…¨é˜²æŠ¤æœºåˆ¶çš„å®ç°æ–¹å¼</li>
<li>LangChainå†…ç½®å®‰å…¨é˜²æŠ¤æœºåˆ¶</li>
<li>LangChainè‡ªå®šä¹‰å®‰å…¨é˜²æŠ¤æœºåˆ¶</li>
<li>æ„å»ºå¤šå±‚å®‰å…¨é˜²æŠ¤æœºåˆ¶</li>
</ul>
</blockquote>
<h2 data-id="heading-0">1ã€å®‰å…¨é˜²æŠ¤æœºåˆ¶</h2>
<p>å®‰å…¨é˜²æŠ¤æœºåˆ¶ï¼ˆGuardrailsï¼‰é€šè¿‡åœ¨æ™ºèƒ½ä½“æ‰§è¡Œæµç¨‹çš„å…³é”®èŠ‚ç‚¹å¯¹å†…å®¹è¿›è¡ŒéªŒè¯å’Œè¿‡æ»¤ï¼Œå¸®åŠ©ä½ æ„å»ºå®‰å…¨ã€åˆè§„çš„äººå·¥æ™ºèƒ½åº”ç”¨ã€‚å®ƒèƒ½å¤Ÿæ£€æµ‹æ•æ„Ÿä¿¡æ¯ã€æ‰§è¡Œå†…å®¹æ”¿ç­–ã€éªŒè¯è¾“å‡ºå†…å®¹ï¼Œå¹¶åœ¨ä¸å®‰å…¨è¡Œä¸ºå¼•å‘é—®é¢˜å‰é˜»æ­¢å…¶å‘ç”Ÿã€‚</p>
<p>å¸¸è§ä½¿ç”¨åœºæ™¯åŒ…æ‹¬ï¼š</p>
<ul>
<li>é˜²æ­¢ä¸ªäººèº«ä»½ä¿¡æ¯ï¼ˆPIIï¼‰æ³„éœ²</li>
<li>æ£€æµ‹å¹¶æ‹¦æˆªæç¤ºè¯æ³¨å…¥æ”»å‡»</li>
<li>å±è”½ä¸å½“æˆ–æœ‰å®³å†…å®¹</li>
<li>æ‰§è¡Œä¸šåŠ¡è§„åˆ™ä¸åˆè§„è¦æ±‚</li>
<li>éªŒè¯è¾“å‡ºå†…å®¹çš„è´¨é‡ä¸å‡†ç¡®æ€§</li>
</ul>
<p>ä½ å¯ä»¥é€šè¿‡ä¸­é—´ä»¶å®ç°å®‰å…¨é˜²æŠ¤æœºåˆ¶ï¼Œåœ¨å…³é”®èŠ‚ç‚¹æ‹¦æˆªæ‰§è¡Œæµç¨‹ â€”â€” ä¾‹å¦‚æ™ºèƒ½ä½“å¯åŠ¨å‰ã€æ‰§è¡Œå®Œæˆåï¼Œæˆ–å›´ç»•æ¨¡å‹è°ƒç”¨ä¸å·¥å…·è°ƒç”¨çš„å…¨ç¨‹ã€‚</p>
<h2 data-id="heading-1">2ã€å®ç°æ–¹å¼</h2>
<p>å®‰å…¨é˜²æŠ¤æœºåˆ¶ï¼ˆGuardrailsï¼‰å¯é€šè¿‡ä¸¤ç§äº’è¡¥çš„æ–¹å¼å®ç°ï¼š</p>
<ul>
<li>ç¡®å®šæ€§å®‰å…¨é˜²æŠ¤æœºåˆ¶ï¼ˆDeterministic guardrailsï¼‰ï¼š<code>&lt;br&gt;</code>
é‡‡ç”¨åŸºäºè§„åˆ™çš„é€»è¾‘ï¼Œä¾‹å¦‚æ­£åˆ™è¡¨è¾¾å¼ï¼ˆregexï¼‰æ¨¡å¼ã€å…³é”®è¯åŒ¹é…æˆ–æ˜¾å¼æ£€æŸ¥ã€‚è¯¥æ–¹å¼é€Ÿåº¦å¿«ã€ç»“æœå¯é¢„æµ‹ä¸”æˆæœ¬ä½ï¼Œä½†å¯èƒ½ä¼šé—æ¼ä¸€äº›ç»†å¾®çš„è¿è§„æƒ…å†µã€‚</li>
<li>åŸºäºæ¨¡å‹çš„å®‰å…¨é˜²æŠ¤æœºåˆ¶ï¼ˆModel-based guardrailsï¼‰ï¼š<code>&lt;br&gt;</code>
ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰æˆ–åˆ†ç±»å™¨ï¼Œé€šè¿‡è¯­ä¹‰ç†è§£æ¥è¯„ä¼°å†…å®¹ã€‚èƒ½å¤Ÿè¯†åˆ«è§„åˆ™æœºåˆ¶é—æ¼çš„ç»†å¾®é—®é¢˜ï¼Œä½†é€Ÿåº¦è¾ƒæ…¢ä¸”æˆæœ¬æ›´é«˜ã€‚</li>
</ul>
<p>LangChain æ—¢æä¾›å†…ç½®å®‰å…¨é˜²æŠ¤æœºåˆ¶ï¼ˆä¾‹å¦‚ä¸ªäººèº«ä»½ä¿¡æ¯ï¼ˆPIIï¼‰æ£€æµ‹ã€äººæœºååŒï¼ˆhuman-in-the-loopï¼‰ï¼‰ï¼Œä¹Ÿæä¾›çµæ´»çš„ä¸­é—´ä»¶ç³»ç»Ÿï¼Œå¯é€šè¿‡ä¸Šè¿°ä»»æ„ä¸€ç§æ–¹å¼ï¼ˆç¡®å®šæ€§æˆ–åŸºäºæ¨¡å‹ï¼‰æ„å»ºè‡ªå®šä¹‰å®‰å…¨é˜²æŠ¤æœºåˆ¶ã€‚</p>
<h2 data-id="heading-2">3ã€å†…ç½®å®‰å…¨é˜²æŠ¤æœºåˆ¶</h2>
<h3 data-id="heading-3">3.1 ä¸ªäººèº«ä»½ä¿¡æ¯ï¼ˆPIIï¼‰æ£€æµ‹</h3>
<p>LangChainæä¾›å†…ç½®ä¸­é—´ä»¶ï¼Œç”¨äºæ£€æµ‹å¯¹è¯ä¸­çš„ä¸ªäººèº«ä»½ä¿¡æ¯ï¼ˆPersonally Identifiable Information, PIIï¼‰å¹¶å¯¹å…¶è¿›è¡Œå¤„ç†ã€‚è¯¥ä¸­é—´ä»¶å¯æ£€æµ‹å¤šç§å¸¸è§çš„PIIç±»å‹ï¼Œä¾‹å¦‚ç”µå­é‚®ä»¶ã€ä¿¡ç”¨å¡å·ã€IP åœ°å€ç­‰ã€‚
åœ¨ä»¥ä¸‹åœºæ™¯ä¸­ï¼ŒPIIæ£€æµ‹ä¸­é—´ä»¶èƒ½å‘æŒ¥é‡è¦ä½œç”¨ï¼šéœ€æ»¡è¶³åˆè§„è¦æ±‚çš„åŒ»ç–—å’Œé‡‘èç±»åº”ç”¨ã€éœ€è¦å¯¹æ—¥å¿—è¿›è¡Œè„±æ•å¤„ç†çš„å®¢æœæ™ºèƒ½ä½“ï¼Œä»¥åŠæ‰€æœ‰æ¶‰åŠæ•æ„Ÿç”¨æˆ·æ•°æ®å¤„ç†çš„åº”ç”¨ã€‚
PIIä¸­é—´ä»¶æ”¯æŒå¤šç§ç­–ç•¥æ¥å¤„ç†æ£€æµ‹åˆ°çš„ä¸ªäººèº«ä»½ä¿¡æ¯ï¼Œå…·ä½“åŒ…æ‹¬ï¼š</p>






























<table><thead><tr><th align="center">ç­–ç•¥ï¼ˆStrategyï¼‰</th><th align="center">è¯´æ˜ï¼ˆDescriptionï¼‰</th><th align="center">ç¤ºä¾‹ï¼ˆExampleï¼‰</th></tr></thead><tbody><tr><td align="center">è„±æ•ï¼ˆredactï¼‰</td><td align="center">æ›¿æ¢ä¸º [REDACTED_TYPE] æ ¼å¼</td><td align="center">[REDACTED_EMAIL]ï¼ˆç”µå­é‚®ä»¶è„±æ•ï¼‰</td></tr><tr><td align="center">æ©ç ï¼ˆmaskï¼‰</td><td align="center">éƒ¨åˆ†éšè—ï¼ˆå¦‚åªæ˜¾ç¤ºæœ€å 4 ä½ï¼‰</td><td align="center">--****-1234ï¼ˆä¿¡ç”¨å¡å·æ©ç ï¼‰</td></tr><tr><td align="center">å“ˆå¸Œï¼ˆhashï¼‰</td><td align="center">æ›¿æ¢ä¸ºç¡®å®šæ€§å“ˆå¸Œå€¼</td><td align="center">a8f5f167...ï¼ˆå“ˆå¸Œåçš„å€¼ï¼‰</td></tr><tr><td align="center">æ‹¦æˆªï¼ˆblockï¼‰</td><td align="center">æ£€æµ‹åˆ°ä¿¡æ¯æ—¶æŠ›å‡ºå¼‚å¸¸</td><td align="center">è§¦å‘é”™è¯¯ï¼ˆError thrownï¼‰</td></tr></tbody></table>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> create_agent
<span class="hljs-keyword">from</span> langchain.chat_models <span class="hljs-keyword">import</span> init_chat_model
<span class="hljs-keyword">from</span> langchain.tools <span class="hljs-keyword">import</span> tool
<span class="hljs-keyword">from</span> langchain.agents.middleware <span class="hljs-keyword">import</span> PIIMiddleware
<span class="hljs-keyword">from</span> config <span class="hljs-keyword">import</span> api_key, api_base


<span class="hljs-keyword">def</span> <span class="hljs-title function_">init_model</span>():
    model = init_chat_model(
        api_key = api_key,
        base_url = api_base,
        model = <span class="hljs-string">"Qwen/Qwen3-8B"</span>,
        model_provider = <span class="hljs-string">"openai"</span>,
        temperature = <span class="hljs-number">0.7</span>,
    )
    <span class="hljs-keyword">return</span> model

<span class="hljs-meta">@tool</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_user_order_progress</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""Get user order progress for a given name."""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{name}</span>, your order progress is 50% at present."</span>

agent = create_agent(
    model=init_model(),
    tools=[get_user_order_progress], 
    middleware=[<span class="hljs-comment"># Redact emails in user input before sending to model</span>
        PIIMiddleware(<span class="hljs-string">"email"</span>,strategy=<span class="hljs-string">"redact"</span>,apply_to_input=<span class="hljs-literal">True</span>),
        <span class="hljs-comment"># Mask credit cards in user input</span>
        PIIMiddleware(<span class="hljs-string">"credit_card"</span>,detector=<span class="hljs-string">r"\d{4}-\d{4}-\d{4}-\d{4}"</span>,strategy=<span class="hljs-string">"mask"</span>,apply_to_input=<span class="hljs-literal">True</span>),
        <span class="hljs-comment"># Block API keys - raise error if detected</span>
        PIIMiddleware(<span class="hljs-string">"api_key"</span>,detector=<span class="hljs-string">r"sk-[a-zA-Z0-9]{32}"</span>,strategy=<span class="hljs-string">"block"</span>,apply_to_input=<span class="hljs-literal">True</span>),
        ],
)

<span class="hljs-comment"># When user provides PII, it will be handled according to the strategy</span>
<span class="hljs-built_in">input</span> = {<span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"My name is Bob. My email is john.doe@example.com and card is 4532-1234-5678-9010. I wangt to know my order progress."</span>}]}

<span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> agent.stream(<span class="hljs-built_in">input</span>, stream_mode=<span class="hljs-string">"values"</span>):
    chunk[<span class="hljs-string">'messages'</span>][-<span class="hljs-number">1</span>].pretty_print()
</code></pre>
<p>å†…ç½®PIIç±»å‹ï¼š</p>
<ul>
<li>email - ç”µå­é‚®ä»¶åœ°å€</li>
<li>credit_card - ä¿¡ç”¨å¡å·ï¼ˆç»å¢æ©ç®—æ³•éªŒè¯ï¼ŒLuhn validatedï¼‰</li>
<li>ip - IP åœ°å€</li>
<li>mac_address - MAC åœ°å€</li>
<li>url - ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼ˆURLï¼‰</li>
</ul>
<p>é…ç½®é€‰é¡¹ï¼š</p>








































<table><thead><tr><th>å‚æ•°ï¼ˆParameterï¼‰</th><th>è¯´æ˜ï¼ˆDescriptionï¼‰</th><th>é»˜è®¤å€¼ï¼ˆDefaultï¼‰</th></tr></thead><tbody><tr><td>pii_type</td><td>å¾…æ£€æµ‹çš„ PII ç±»å‹ï¼ˆå†…ç½®ç±»å‹æˆ–è‡ªå®šä¹‰ç±»å‹ï¼‰</td><td>å¿…é€‰ï¼ˆRequiredï¼‰</td></tr><tr><td>strategy</td><td>æ£€æµ‹åˆ° PII åçš„å¤„ç†æ–¹å¼ï¼ˆ"block" æ‹¦æˆªã€"redact" è„±æ•ã€"mask" æ©ç ã€"hash" å“ˆå¸Œï¼‰</td><td>"redact"ï¼ˆè„±æ•ï¼‰</td></tr><tr><td>detector</td><td>è‡ªå®šä¹‰æ£€æµ‹å‡½æ•°æˆ–æ­£åˆ™è¡¨è¾¾å¼ï¼ˆregexï¼‰æ¨¡å¼</td><td>Noneï¼ˆä½¿ç”¨å†…ç½®æ£€æµ‹é€»è¾‘ï¼‰</td></tr><tr><td>apply_to_input</td><td>åœ¨è°ƒç”¨æ¨¡å‹å‰æ£€æŸ¥ç”¨æˆ·æ¶ˆæ¯</td><td>Trueï¼ˆå¯ç”¨ï¼‰</td></tr><tr><td>apply_to_output</td><td>åœ¨è°ƒç”¨æ¨¡å‹åæ£€æŸ¥ AI æ¶ˆæ¯</td><td>Falseï¼ˆç¦ç”¨ï¼‰</td></tr><tr><td>apply_to_tool_results</td><td>åœ¨å·¥å…·æ‰§è¡Œåæ£€æŸ¥å·¥å…·è¿”å›çš„ç»“æœæ¶ˆæ¯</td><td>Falseï¼ˆç¦ç”¨ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-4">3.2 äººæœºååŒï¼ˆHuman-in-the-loopï¼‰</h3>
<p>LangChainæä¾›å†…ç½®çš„äººæœºååŒä¸­é—´ä»¶HumanInTheLoopMiddlewareï¼Œå¯åœ¨æ‰§è¡Œæ•æ„Ÿæ“ä½œå‰è¦æ±‚è·å¾—äººå·¥å®¡æ‰¹ã€‚å¯¹äºé«˜é£é™©å†³ç­–åœºæ™¯ï¼Œè¿™æ˜¯æœ€æœ‰æ•ˆçš„å®‰å…¨é˜²æŠ¤æœºåˆ¶ä¹‹ä¸€ã€‚
åœ¨ä»¥ä¸‹åœºæ™¯ä¸­ï¼ŒäººæœºååŒä¸­é—´ä»¶èƒ½å‘æŒ¥é‡è¦ä½œç”¨ï¼šé‡‘èäº¤æ˜“ä¸è½¬è´¦ã€åˆ é™¤æˆ–ä¿®æ”¹ç”Ÿäº§æ•°æ®ã€å‘å¤–éƒ¨äººå‘˜å‘é€ä¿¡æ¯ï¼Œä»¥åŠæ‰€æœ‰ä¼šå¯¹ä¸šåŠ¡äº§ç”Ÿé‡å¤§å½±å“çš„æ“ä½œã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> create_agent
<span class="hljs-keyword">from</span> langchain.chat_models <span class="hljs-keyword">import</span> init_chat_model
<span class="hljs-keyword">from</span> langchain.tools <span class="hljs-keyword">import</span> tool
<span class="hljs-keyword">from</span> langchain.agents.middleware <span class="hljs-keyword">import</span> HumanInTheLoopMiddleware
<span class="hljs-keyword">from</span> langgraph.checkpoint.memory <span class="hljs-keyword">import</span> InMemorySaver
<span class="hljs-keyword">from</span> langgraph.types <span class="hljs-keyword">import</span> Command
<span class="hljs-keyword">from</span> config <span class="hljs-keyword">import</span> api_key, api_base


<span class="hljs-keyword">def</span> <span class="hljs-title function_">init_model</span>():
    model = init_chat_model(
        api_key = api_key,
        base_url = api_base,
        model = <span class="hljs-string">"Qwen/Qwen3-8B"</span>,
        model_provider = <span class="hljs-string">"openai"</span>,
        temperature = <span class="hljs-number">0.7</span>,
    )
    <span class="hljs-keyword">return</span> model

<span class="hljs-meta">@tool</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">send_email</span>(<span class="hljs-params">recipient: <span class="hljs-built_in">str</span>, content: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""Send an email to the specified recipient."""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"Email sent to <span class="hljs-subst">{recipient}</span> with content: <span class="hljs-subst">{content}</span>"</span>

agent = create_agent(
            model=init_model(),
            tools=[send_email], 
            middleware=[HumanInTheLoopMiddleware(
                interrupt_on={
                    <span class="hljs-comment"># Require approval for sensitive operations</span>
                    <span class="hljs-string">"send_email"</span>: <span class="hljs-literal">True</span>,
                    <span class="hljs-string">"delete_database"</span>: <span class="hljs-literal">True</span>,
                    <span class="hljs-comment"># Auto-approve safe operations</span>
                    <span class="hljs-string">"search"</span>: <span class="hljs-literal">False</span>,
                })
                ],
            <span class="hljs-comment"># Persist the state across interrupts</span>
            checkpointer=InMemorySaver(),
)

<span class="hljs-comment"># Human-in-the-loop requires a thread ID for persistence</span>
config = {<span class="hljs-string">"configurable"</span>: {<span class="hljs-string">"thread_id"</span>: <span class="hljs-string">"001"</span>}}

<span class="hljs-comment"># Agent will pause and wait for approval before executing sensitive tools</span>
result = agent.invoke(
    {<span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"Send an email to the team, tell them we will be back in 2 hours"</span>}]},
    config=config
)
state = agent.get_state(config)
mark=<span class="hljs-built_in">len</span>(state.values[<span class="hljs-string">"messages"</span>])
<span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> state.values[<span class="hljs-string">"messages"</span>]:
    item.pretty_print()
<span class="hljs-built_in">print</span>(<span class="hljs-string">"*"</span> * <span class="hljs-number">30</span> + <span class="hljs-string">"äººå·¥å®¡æ‰¹"</span> + <span class="hljs-string">"*"</span> * <span class="hljs-number">40</span> )
result = agent.invoke(
    Command(resume={<span class="hljs-string">"decisions"</span>: [{<span class="hljs-string">"type"</span>: <span class="hljs-string">"approve"</span>}]}),
    config=config  <span class="hljs-comment"># Same thread ID to resume the paused conversation</span>
)
state = agent.get_state(config)
<span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> state.values[<span class="hljs-string">"messages"</span>][mark:]:
    item.pretty_print()
</code></pre>
<h2 data-id="heading-5">4ã€è‡ªå®šä¹‰å®‰å…¨é˜²æŠ¤</h2>
<p>å¯¹äºæ›´å¤æ‚çš„å®‰å…¨é˜²æŠ¤æœºåˆ¶ï¼ˆGuardrailsï¼‰ï¼Œä½ å¯ä»¥åˆ›å»ºåœ¨æ™ºèƒ½ä½“æ‰§è¡Œå‰æˆ–æ‰§è¡Œåè¿è¡Œçš„è‡ªå®šä¹‰ä¸­é—´ä»¶ã€‚è¿™èƒ½è®©ä½ å®Œå…¨æŒæ§éªŒè¯é€»è¾‘ã€å†…å®¹è¿‡æ»¤å’Œå®‰å…¨æ£€æŸ¥çš„å…¨è¿‡ç¨‹ã€‚</p>
<h3 data-id="heading-6">4.1 æ™ºèƒ½ä½“æ‰§è¡Œå‰çš„å®‰å…¨é˜²æŠ¤æœºåˆ¶</h3>
<p>ä½¿ç”¨ â€œæ™ºèƒ½ä½“æ‰§è¡Œå‰â€ï¼ˆbefore_agentï¼‰é’©å­ï¼Œåœ¨æ¯æ¬¡è°ƒç”¨å¯åŠ¨æ—¶å¯¹è¯·æ±‚è¿›è¡Œä¸€æ¬¡æ€§éªŒè¯ã€‚è¿™é€‚ç”¨äºä¼šè¯çº§åˆ«çš„æ£€æŸ¥ï¼Œä¾‹å¦‚èº«ä»½éªŒè¯ã€é€Ÿç‡é™åˆ¶ï¼Œæˆ–åœ¨ä»»ä½•å¤„ç†å¼€å§‹å‰æ‹¦æˆªä¸å½“è¯·æ±‚ã€‚
å†…å®¹è¿‡æ»¤ä¸­é—´ä»¶,ä¸€ä¸ªç¡®å®šæ€§å®‰å…¨é˜²æŠ¤æœºåˆ¶ï¼ˆDeterministic Guardrailï¼‰çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Any</span>
<span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> create_agent
<span class="hljs-keyword">from</span> langchain.chat_models <span class="hljs-keyword">import</span> init_chat_model
<span class="hljs-keyword">from</span> langchain.tools <span class="hljs-keyword">import</span> tool
<span class="hljs-keyword">from</span> langchain.agents.middleware <span class="hljs-keyword">import</span> AgentMiddleware, AgentState, hook_config
<span class="hljs-keyword">from</span> langgraph.checkpoint.memory <span class="hljs-keyword">import</span> InMemorySaver
<span class="hljs-keyword">from</span> langgraph.runtime <span class="hljs-keyword">import</span> Runtime
<span class="hljs-keyword">from</span> config <span class="hljs-keyword">import</span> api_key, api_base


<span class="hljs-keyword">def</span> <span class="hljs-title function_">init_model</span>():
    model = init_chat_model(
        api_key = api_key,
        base_url = api_base,
        model = <span class="hljs-string">"Qwen/Qwen3-8B"</span>,
        model_provider = <span class="hljs-string">"openai"</span>,
        temperature = <span class="hljs-number">0.7</span>,
    )
    <span class="hljs-keyword">return</span> model

<span class="hljs-meta">@tool</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">search_tool</span>(<span class="hljs-params">query: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""Search for information on the internet."""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"Search results for <span class="hljs-subst">{query}</span>: 1. Result1; 2. Result2; 3. Result3."</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ContentFilterMiddleware</span>(<span class="hljs-title class_ inherited__">AgentMiddleware</span>):
    <span class="hljs-string">"""Deterministic guardrail: Block requests containing banned keywords."""</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, banned_keywords: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>]</span>):
        <span class="hljs-built_in">super</span>().__init__()
        self.banned_keywords = [kw.lower() <span class="hljs-keyword">for</span> kw <span class="hljs-keyword">in</span> banned_keywords]

<span class="hljs-meta">    @hook_config(<span class="hljs-params">can_jump_to=[<span class="hljs-string">"end"</span>]</span>)</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">before_agent</span>(<span class="hljs-params">self, state: AgentState, runtime: Runtime</span>) -&gt; <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>] | <span class="hljs-literal">None</span>:
        <span class="hljs-comment"># Get the first user message</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> state[<span class="hljs-string">"messages"</span>]:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

        latest_message = state[<span class="hljs-string">"messages"</span>][-<span class="hljs-number">1</span>]
        <span class="hljs-keyword">if</span> latest_message.<span class="hljs-built_in">type</span> != <span class="hljs-string">"human"</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

        content = latest_message.content.lower()

        <span class="hljs-comment"># Check for banned keywords</span>
        <span class="hljs-keyword">for</span> keyword <span class="hljs-keyword">in</span> self.banned_keywords:
            <span class="hljs-keyword">if</span> keyword <span class="hljs-keyword">in</span> content:
                <span class="hljs-comment"># Block execution before any processing</span>
                <span class="hljs-keyword">return</span> {
                    <span class="hljs-string">"messages"</span>: [{
                        <span class="hljs-string">"role"</span>: <span class="hljs-string">"assistant"</span>,
                        <span class="hljs-string">"content"</span>: <span class="hljs-string">"I cannot process requests containing inappropriate content. Please rephrase your request."</span>
                    }],
                    <span class="hljs-string">"jump_to"</span>: <span class="hljs-string">"end"</span>
                }

        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

agent = create_agent(
    model=init_model(),
    tools=[search_tool], 
    system_prompt=<span class="hljs-string">"You are a IT expert. Your task is to answer user's IT questions."</span>,
    middleware=[ContentFilterMiddleware(banned_keywords=[<span class="hljs-string">"hack"</span>, <span class="hljs-string">"exploit"</span>, <span class="hljs-string">"malware"</span>])],
    checkpointer=InMemorySaver(),
)

config = {<span class="hljs-string">"configurable"</span>: {<span class="hljs-string">"thread_id"</span>: <span class="hljs-string">"001"</span>}}
<span class="hljs-comment"># When user provides PII, it will be handled according to the strategy</span>
<span class="hljs-built_in">input</span> = {<span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"How do I hack into a database?"</span>}]}
<span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> agent.stream(<span class="hljs-built_in">input</span>, config, stream_mode=<span class="hljs-string">"values"</span>):
    chunk[<span class="hljs-string">'messages'</span>][-<span class="hljs-number">1</span>].pretty_print()

input2 = {<span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"Explain the concept of AI agent in 100 words."</span>}]}
<span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> agent.stream(input2, config, stream_mode=<span class="hljs-string">"values"</span>):
    chunk[<span class="hljs-string">'messages'</span>][-<span class="hljs-number">1</span>].pretty_print()

inpu3 = {<span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"Make a malware which can login a private database."</span>}]}
<span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> agent.stream(inpu3, config, stream_mode=<span class="hljs-string">"values"</span>):
    chunk[<span class="hljs-string">'messages'</span>][-<span class="hljs-number">1</span>].pretty_print()
</code></pre>
<h3 data-id="heading-7">4.2 æ™ºèƒ½ä½“æ‰§è¡Œåçš„å®‰å…¨é˜²æŠ¤æœºåˆ¶</h3>
<p>ä½¿ç”¨ â€œæ™ºèƒ½ä½“æ‰§è¡Œåâ€ï¼ˆafter_agentï¼‰é’©å­ï¼Œåœ¨è¿”å›ç»™ç”¨æˆ·ä¹‹å‰å¯¹æœ€ç»ˆè¾“å‡ºè¿›è¡Œä¸€æ¬¡æ€§éªŒè¯ã€‚è¿™é€‚ç”¨äºåŸºäºæ¨¡å‹çš„å®‰å…¨æ£€æŸ¥ã€è´¨é‡éªŒè¯ï¼Œæˆ–å¯¹æ™ºèƒ½ä½“çš„å®Œæ•´å“åº”è¿›è¡Œæœ€ç»ˆåˆè§„æ€§æ‰«æã€‚
å®‰å…¨è¯„ä¼°ä¸­é—´ä»¶ï¼Œä¸€ä¸ªåŸºäºæ¨¡å‹çš„å®‰å…¨é˜²æŠ¤æœºåˆ¶ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain.agents.middleware <span class="hljs-keyword">import</span> AgentMiddleware, AgentState, hook_config
<span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> create_agent
<span class="hljs-keyword">from</span> langchain_core.messages <span class="hljs-keyword">import</span> AIMessage
<span class="hljs-keyword">from</span> langchain.chat_models <span class="hljs-keyword">import</span> init_chat_model
<span class="hljs-keyword">from</span> langchain.tools <span class="hljs-keyword">import</span> tool
<span class="hljs-keyword">from</span> langgraph.runtime <span class="hljs-keyword">import</span> Runtime
<span class="hljs-keyword">from</span> langgraph.checkpoint.memory <span class="hljs-keyword">import</span> InMemorySaver
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Any</span>
<span class="hljs-keyword">from</span> config <span class="hljs-keyword">import</span> api_key, api_base

<span class="hljs-keyword">def</span> <span class="hljs-title function_">init_model</span>():
    model = init_chat_model(
        api_key = api_key,
        base_url = api_base,
        model = <span class="hljs-string">"Qwen/Qwen3-8B"</span>,
        model_provider = <span class="hljs-string">"openai"</span>,
        temperature = <span class="hljs-number">0.7</span>,
    )
    <span class="hljs-keyword">return</span> model
model = init_model()

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SafetyGuardrailMiddleware</span>(<span class="hljs-title class_ inherited__">AgentMiddleware</span>):
    <span class="hljs-string">"""Model-based guardrail: Use an LLM to evaluate response safety."""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">super</span>().__init__()
        self.safety_model = model

<span class="hljs-meta">    @hook_config(<span class="hljs-params">can_jump_to=[<span class="hljs-string">"end"</span>]</span>)</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">after_agent</span>(<span class="hljs-params">self, state: AgentState, runtime: Runtime</span>) -&gt; <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>] | <span class="hljs-literal">None</span>:
        <span class="hljs-comment"># Get the final AI response</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> state[<span class="hljs-string">"messages"</span>]:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

        last_message = state[<span class="hljs-string">"messages"</span>][-<span class="hljs-number">1</span>]
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(last_message, AIMessage):
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

        <span class="hljs-comment"># Use a model to evaluate safety</span>
        safety_prompt = <span class="hljs-string">f"""Evaluate if this response is safe and appropriate.
        Respond with only 'SAFE' or 'UNSAFE'.

        Response: <span class="hljs-subst">{last_message.content}</span>"""</span>

        result = self.safety_model.invoke([{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: safety_prompt}])

        <span class="hljs-keyword">if</span> <span class="hljs-string">"UNSAFE"</span> <span class="hljs-keyword">in</span> result.content:
            <span class="hljs-keyword">return</span> {
                <span class="hljs-string">"messages"</span>: [{
                    <span class="hljs-string">"role"</span>: <span class="hljs-string">"assistant"</span>,
                    <span class="hljs-string">"content"</span>: <span class="hljs-string">"I cannot provide that response. Please rephrase your request."</span>
                }],
                <span class="hljs-string">"jump_to"</span>: <span class="hljs-string">"end"</span>
            }

        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

<span class="hljs-meta">@tool</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">search_tool</span>(<span class="hljs-params">query: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""Search for information on the internet."""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"Search results for <span class="hljs-subst">{query}</span>: 1. Result1; 2. Result2; 3. Result3."</span>

agent = create_agent(
    model=init_model(),
    tools=[search_tool], 
    system_prompt=<span class="hljs-string">"You are a knowledgeable consultant. Your task is to answer user's questions professionally."</span>,
    middleware=[SafetyGuardrailMiddleware()],
    checkpointer=InMemorySaver(),
)

config = {<span class="hljs-string">"configurable"</span>: {<span class="hljs-string">"thread_id"</span>: <span class="hljs-string">"001"</span>}}
<span class="hljs-comment"># When user provides PII, it will be handled according to the strategy</span>
<span class="hljs-built_in">input</span> = {<span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"How do I make explosives?"</span>}]}
<span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> agent.stream(<span class="hljs-built_in">input</span>, config, stream_mode=<span class="hljs-string">"values"</span>):
    chunk[<span class="hljs-string">'messages'</span>][-<span class="hljs-number">1</span>].pretty_print()

input2 = {<span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"What's the best way to learn machine learning?"</span>}]}
<span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> agent.stream(input2, config, stream_mode=<span class="hljs-string">"values"</span>):
    chunk[<span class="hljs-string">'messages'</span>][-<span class="hljs-number">1</span>].pretty_print()
</code></pre>
<h2 data-id="heading-8">5ã€å¤šå±‚å®‰å…¨é˜²æŠ¤</h2>
<p>ä½ å¯ä»¥é€šè¿‡å°†å¤šä¸ªå®‰å…¨é˜²æŠ¤æœºåˆ¶æ·»åŠ åˆ°ä¸­é—´ä»¶æ•°ç»„ä¸­æ¥å®ç°å †å ä½¿ç”¨ã€‚å®ƒä»¬ä¼šæŒ‰é¡ºåºæ‰§è¡Œï¼Œä½¿ä½ èƒ½å¤Ÿæ„å»ºåˆ†å±‚é˜²æŠ¤ã€‚
ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> create_agent
<span class="hljs-keyword">from</span> langchain.agents.middleware <span class="hljs-keyword">import</span> PIIMiddleware, HumanInTheLoopMiddleware

agent = create_agent(
    model=<span class="hljs-string">"gpt-4o"</span>,
    tools=[search_tool, send_email_tool],
    middleware=[
        <span class="hljs-comment"># Layer 1: Deterministic input filter (before agent)</span>
        ContentFilterMiddleware(banned_keywords=[<span class="hljs-string">"hack"</span>, <span class="hljs-string">"exploit"</span>]),

        <span class="hljs-comment"># Layer 2: PII protection (before and after model)</span>
        PIIMiddleware(<span class="hljs-string">"email"</span>, strategy=<span class="hljs-string">"redact"</span>, apply_to_input=<span class="hljs-literal">True</span>),
        PIIMiddleware(<span class="hljs-string">"email"</span>, strategy=<span class="hljs-string">"redact"</span>, apply_to_output=<span class="hljs-literal">True</span>),

        <span class="hljs-comment"># Layer 3: Human approval for sensitive tools</span>
        HumanInTheLoopMiddleware(interrupt_on={<span class="hljs-string">"send_email"</span>: <span class="hljs-literal">True</span>}),

        <span class="hljs-comment"># Layer 4: Model-based safety check (after agent)</span>
        SafetyGuardrailMiddleware(),
    ],
)
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChain1.0æ™ºèƒ½ä½“å¼€å‘ï¼šè¿è¡Œæ—¶ï¼ˆRuntimeï¼‰]]></title>    <link>https://juejin.cn/post/7570268773334335515</link>    <guid>https://juejin.cn/post/7570268773334335515</guid>    <pubDate>2025-11-10T03:21:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570268773334335515" data-draft-id="7570394530316599296" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangChain1.0æ™ºèƒ½ä½“å¼€å‘ï¼šè¿è¡Œæ—¶ï¼ˆRuntimeï¼‰"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,Agent,LangChain"/> <meta itemprop="datePublished" content="2025-11-10T03:21:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="FreeCode"/> <meta itemprop="url" content="https://juejin.cn/user/1282499717900794"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangChain1.0æ™ºèƒ½ä½“å¼€å‘ï¼šè¿è¡Œæ—¶ï¼ˆRuntimeï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1282499717900794/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    FreeCode
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T03:21:24.000Z" title="Mon Nov 10 2025 03:21:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="" data-highlight-key="agate">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#333;color:#fff}.hljs-name,.hljs-strong{font-weight:700}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-selector-class,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#ade5fc}.hljs-bullet,.hljs-string{color:#a2fca2}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-title,.hljs-type{color:#ffa}.hljs-bullet,.hljs-number,.hljs-symbol{color:#d36363}.hljs-keyword,.hljs-literal,.hljs-selector-tag{color:#fcc28c}.hljs-code,.hljs-comment,.hljs-deletion{color:#888}.hljs-link,.hljs-regexp{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}</style><blockquote>
<p>åŸºäºLangChain1.0åˆ›å»ºçš„æ™ºèƒ½ä½“æ˜¯è¿è¡Œåœ¨LangGraphçš„è¿è¡Œæ—¶ï¼ˆRuntimeï¼‰ä¹‹ä¸Šã€‚LangChainå¯ä»¥é€šè¿‡LangGraphå¯¹å¤–æš´éœ²çš„è¿è¡Œæ—¶å¯¹è±¡è®¿é—®ä¸Šä¸‹æ–‡ã€å­˜å‚¨ä»¥åŠæµå†™å…¥å™¨ã€‚</p>
</blockquote>
<h2 data-id="heading-0">1ã€è¿è¡Œæ—¶æ¦‚è¿°</h2>
<p>LangChainçš„create_agentæœ¬è´¨ä¸Šè¿è¡Œåœ¨LangGraphçš„è¿è¡Œæ—¶ï¼ˆRuntimeï¼‰ä¹‹ä¸Šã€‚LangGraphä¼šæš´éœ²ä¸€ä¸ªåŒ…å«ä»¥ä¸‹ä¿¡æ¯çš„è¿è¡Œæ—¶å¯¹è±¡ï¼ˆRuntime objectï¼‰ï¼š</p>
<ul>
<li>ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰ï¼šé™æ€ä¿¡æ¯ï¼Œä¾‹å¦‚ç”¨æˆ·IDã€æ•°æ®åº“è¿æ¥æˆ–æ™ºèƒ½ä½“è°ƒç”¨æ‰€éœ€çš„å…¶ä»–ä¾èµ–é¡¹ã€‚</li>
<li>å­˜å‚¨ï¼ˆStoreï¼‰ï¼šä¸€ä¸ªç”¨äºé•¿æœŸè®°å¿†çš„BaseStoreå®ä¾‹ã€‚</li>
<li>æµå†™å…¥å™¨ï¼ˆStream writerï¼‰ï¼šä¸€ä¸ªç”¨äºé€šè¿‡è‡ªå®šä¹‰æµæ¨¡å¼ä¼ è¾“ä¿¡æ¯çš„å¯¹è±¡ã€‚</li>
</ul>
<p>ä½ å¯ä»¥åœ¨å·¥å…·å’Œä¸­é—´ä»¶å†…éƒ¨è®¿é—®è¿è¡Œæ—¶ä¿¡æ¯ã€‚</p>
<h2 data-id="heading-1">2ã€é…ç½®è¿è¡Œæ—¶ä¸Šä¸‹æ–‡</h2>
<p>è¿è¡Œæ—¶ä¸Šä¸‹æ–‡ï¼ˆRuntime Contextï¼‰ä¸ºå·¥å…·ï¼ˆtoolsï¼‰å’Œä¸­é—´ä»¶ï¼ˆmiddlewareï¼‰æä¾›ä¾èµ–æ³¨å…¥åŠŸèƒ½ã€‚æ— éœ€ç¡¬ç¼–ç å€¼æˆ–ä½¿ç”¨å…¨å±€çŠ¶æ€ï¼Œä½ å¯ä»¥åœ¨è°ƒç”¨æ™ºèƒ½ä½“æ—¶æ³¨å…¥è¿è¡Œæ—¶ä¾èµ–é¡¹ï¼ˆå¦‚æ•°æ®åº“è¿æ¥ã€ç”¨æˆ·IDæˆ–é…ç½®ï¼‰ã€‚è¿™ä½¿å¾—ä½ çš„å·¥å…·æ›´æ˜“äºæµ‹è¯•ã€æ›´å…·å¯å¤ç”¨æ€§ä¸”çµæ´»æ€§æ›´é«˜ã€‚
ä½¿ç”¨create_agentåˆ›å»ºæ™ºèƒ½ä½“æ—¶ï¼Œä½ å¯ä»¥æŒ‡å®šä¸€ä¸ªcontext_schemaï¼ˆä¸Šä¸‹æ–‡æ¨¡å¼ï¼‰ï¼Œç”¨äºå®šä¹‰å­˜å‚¨åœ¨æ™ºèƒ½ä½“è¿è¡Œæ—¶ï¼ˆRuntimeï¼‰ä¸­çš„ä¸Šä¸‹æ–‡ç»“æ„ã€‚è°ƒç”¨æ™ºèƒ½ä½“æ—¶ï¼Œéœ€ä¼ å…¥contextå‚æ•°ï¼Œå¹¶åœ¨è¯¥å‚æ•°ä¸­åŒ…å«æœ¬æ¬¡è¿è¡Œæ‰€éœ€çš„ç›¸å…³é…ç½®ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> dataclasses <span class="hljs-keyword">import</span> dataclass
<span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> create_agent


<span class="hljs-meta">@dataclass</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Context</span>:
    user_name: <span class="hljs-built_in">str</span>

agent = create_agent(
    model=<span class="hljs-string">"gpt-5-nano"</span>,
    tools=[...],
    context_schema=Context  
)

agent.invoke(
    {<span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"What's my name?"</span>}]},
    context=Context(user_name=<span class="hljs-string">"John Smith"</span>)  
)
</code></pre>
<h2 data-id="heading-2">3ã€é€šè¿‡å·¥å…·è®¿é—®è¿è¡Œæ—¶ä¿¡æ¯</h2>
<p>ä½ å¯ä»¥åœ¨å·¥å…·å†…éƒ¨è®¿é—®è¿è¡Œæ—¶ä¿¡æ¯ï¼Œä»¥å®ç°ä»¥ä¸‹æ“ä½œï¼š</p>
<ul>
<li>è®¿é—®ä¸Šä¸‹æ–‡ï¼šé€šè¿‡runtime.contextè®¿é—®ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</li>
<li>è¯»å–æˆ–å†™å…¥é•¿æœŸè®°å¿†ï¼šé€šè¿‡runtime.storeè®¿é—®é•¿æœŸè®°å¿†ã€‚</li>
<li>å†™å…¥è‡ªå®šä¹‰æµï¼ˆä¾‹å¦‚ï¼Œå·¥å…·è¿›åº¦ / æ›´æ–°ï¼‰ï¼šé€šè¿‡get_stream_writer()è·å–æµå†™å…¥å™¨ï¼Œç„¶åä½¿ç”¨æµå†™å…¥å™¨å†™å…¥è‡ªå®šä¹‰æµã€‚
å¯ä½¿ç”¨ToolRuntimeå‚æ•°åœ¨å·¥å…·å†…éƒ¨è®¿é—®è¿è¡Œæ—¶ï¼ˆRuntimeï¼‰å¯¹è±¡ã€‚</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> dataclasses <span class="hljs-keyword">import</span> dataclass
<span class="hljs-keyword">from</span> langchain.tools <span class="hljs-keyword">import</span> tool, ToolRuntime  

<span class="hljs-meta">@dataclass</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Context</span>:
    user_id: <span class="hljs-built_in">str</span>

<span class="hljs-meta">@tool</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch_user_email_preferences</span>(<span class="hljs-params">runtime: ToolRuntime[Context]</span>) -&gt; <span class="hljs-built_in">str</span>:  
    <span class="hljs-string">"""Fetch the user's email preferences from the store."""</span>
    user_id = runtime.context.user_id  

    preferences: <span class="hljs-built_in">str</span> = <span class="hljs-string">"The user prefers you to write a brief and polite email."</span>
    <span class="hljs-keyword">if</span> runtime.store:  
        <span class="hljs-keyword">if</span> memory := runtime.store.get((<span class="hljs-string">"users"</span>,), user_id):  
            preferences = memory.value[<span class="hljs-string">"preferences"</span>]

    <span class="hljs-keyword">return</span> preferences
</code></pre>
<h2 data-id="heading-3">4ã€é€šè¿‡ä¸­é—´ä»¶è®¿é—®è¿è¡Œæ—¶ä¿¡æ¯</h2>
<p>ä½ å¯ä»¥åœ¨ä¸­é—´ä»¶ä¸­è®¿é—®è¿è¡Œæ—¶ä¿¡æ¯ï¼Œä»è€Œæ ¹æ®ç”¨æˆ·ä¸Šä¸‹æ–‡åˆ›å»ºåŠ¨æ€æç¤ºè¯ã€ä¿®æ”¹æ¶ˆæ¯æˆ–æ§åˆ¶æ™ºèƒ½ä½“è¡Œä¸ºã€‚</p>
<ul>
<li>å¯¹äºå°è£…å¼ä¸­é—´ä»¶ï¼Œå¯é€šè¿‡request.runtimeè®¿é—®è¿è¡Œæ—¶ï¼ˆRuntimeï¼‰å¯¹è±¡ã€‚requestè¿è¡Œæ—¶å¯¹è±¡åŒ…å«åœ¨ä¼ é€’ç»™ä¸­é—´ä»¶å‡½æ•°çš„ModelRequestå‚æ•°ä¸­ã€‚</li>
<li>å¯¹äºèŠ‚ç‚¹å¼ä¸­é—´ä»¶ï¼Œå¯é€šè¿‡runtimeå‚æ•°è®¿é—®è¿è¡Œæ—¶ï¼ˆRuntimeï¼‰å¯¹è±¡ã€‚</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> dataclasses <span class="hljs-keyword">import</span> dataclass
<span class="hljs-keyword">from</span> langchain.messages <span class="hljs-keyword">import</span> AnyMessage
<span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> create_agent, AgentState
<span class="hljs-keyword">from</span> langchain.agents.middleware <span class="hljs-keyword">import</span> dynamic_prompt, ModelRequest, before_model, after_model
<span class="hljs-keyword">from</span> langgraph.runtime <span class="hljs-keyword">import</span> Runtime


<span class="hljs-meta">@dataclass</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Context</span>:
    user_name: <span class="hljs-built_in">str</span>

<span class="hljs-comment"># Dynamic prompts</span>
<span class="hljs-meta">@dynamic_prompt</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">dynamic_system_prompt</span>(<span class="hljs-params">request: ModelRequest</span>) -&gt; <span class="hljs-built_in">str</span>:
    user_name = request.runtime.context.user_name  
    system_prompt = <span class="hljs-string">f"You are a helpful assistant. Address the user as <span class="hljs-subst">{user_name}</span>."</span>
    <span class="hljs-keyword">return</span> system_prompt

<span class="hljs-comment"># Before model hook</span>
<span class="hljs-meta">@before_model</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">log_before_model</span>(<span class="hljs-params">state: AgentState, runtime: Runtime[Context]</span>) -&gt; <span class="hljs-built_in">dict</span> | <span class="hljs-literal">None</span>:  
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Processing request for user: <span class="hljs-subst">{runtime.context.user_name}</span>"</span>)  
    <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

<span class="hljs-comment"># After model hook</span>
<span class="hljs-meta">@after_model</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">log_after_model</span>(<span class="hljs-params">state: AgentState, runtime: Runtime[Context]</span>) -&gt; <span class="hljs-built_in">dict</span> | <span class="hljs-literal">None</span>:  
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Completed request for user: <span class="hljs-subst">{runtime.context.user_name}</span>"</span>)  
    <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

agent = create_agent(
    model=<span class="hljs-string">"gpt-5-nano"</span>,
    tools=[...],
    middleware=[dynamic_system_prompt, log_before_model, log_after_model],  
    context_schema=Context
)

agent.invoke(
    {<span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"What's my name?"</span>}]},
    context=Context(user_name=<span class="hljs-string">"John Smith"</span>)
)
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»0ä½¿ç”¨Kuiklyæ¡†æ¶å†™ä¸€ä¸ªå°çº¢ä¹¦Demo-Day7]]></title>    <link>https://juejin.cn/post/7570533058840920099</link>    <guid>https://juejin.cn/post/7570533058840920099</guid>    <pubDate>2025-11-10T03:36:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570533058840920099" data-draft-id="7570341520551804943" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»0ä½¿ç”¨Kuiklyæ¡†æ¶å†™ä¸€ä¸ªå°çº¢ä¹¦Demo-Day7"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2025-11-10T03:36:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘æœ‰ä¸ä¸ç—‡"/> <meta itemprop="url" content="https://juejin.cn/user/4466629837071787"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»0ä½¿ç”¨Kuiklyæ¡†æ¶å†™ä¸€ä¸ªå°çº¢ä¹¦Demo-Day7
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4466629837071787/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘æœ‰ä¸ä¸ç—‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T03:36:17.000Z" title="Mon Nov 10 2025 03:36:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é€šè¿‡Kuiklyçš„æ‹“å±•èƒ½åŠ›åœ¨ioså¹³å°å®ç°è‡ªå®šä¹‰çš„å›¾ç‰‡åŠ è½½å’Œç¼“å­˜</h2>
<p>æˆ‘ä»¬ä»¥iOSå¹³å°ä¸ºä¾‹ï¼Œä½“éªŒKuiklyæ¡†æ¶å¼ºå¤§çš„æ‹“å±•èƒ½åŠ›
Â </p>
<p>é¦–å…ˆçœ‹çœ‹Kuikly demoæ˜¯æ€ä¹ˆåœ¨iOSåŸç”Ÿå±‚é¢å®ç°å›¾ç‰‡åŠ è½½ä¸ç¼“å­˜çš„ï¼š</p>
<p>æ‰“å¼€ç›®å½•ï¼šiosAPP -&gt; KuiklyRenderExpand -&gt; Handlers -&gt; KuiklyRenderComponentExpandHandler.mæ–‡ä»¶</p>
<pre><code class="hljs language-ObjectiveC" lang="ObjectiveC"><span class="hljs-meta">#import <span class="hljs-string">"KuiklyRenderComponentExpandHandler.h"</span></span>
<span class="hljs-meta">#import <span class="hljs-string">&lt;SDWebImage/UIImageView+WebCache.h&gt;</span></span>
Â 
<span class="hljs-class"><span class="hljs-keyword">@implementation</span> <span class="hljs-title">KuiklyRenderComponentExpandHandler</span></span>
Â 
+ (<span class="hljs-type">void</span>)load {
    <span class="hljs-comment">// æ³¨å†Œè‡ªå®šä¹‰å®ç°</span>
    [KuiklyRenderBridge registerComponentExpandHandler:[<span class="hljs-keyword">self</span> new]];
}
Â 
<span class="hljs-comment">/*
 * è‡ªå®šä¹‰å®ç°è®¾ç½®é¢œå€¼
 * @param value è®¾ç½®çš„é¢œè‰²å€¼
 * @return å®Œæˆè‡ªå®šä¹‰å¤„ç†çš„é¢œè‰²å¯¹è±¡
 */</span>
- (<span class="hljs-built_in">UIColor</span> *)hr_colorWithValue:(<span class="hljs-built_in">NSString</span> *)value {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>;
}
Â 
<span class="hljs-comment">/*
 * è‡ªå®šä¹‰å®ç°è®¾ç½®å›¾ç‰‡
 * @param url è®¾ç½®çš„å›¾ç‰‡urlï¼Œå¦‚æœurlä¸ºnilï¼Œåˆ™æ˜¯å–æ¶ˆå›¾ç‰‡è®¾ç½®ï¼Œéœ€è¦view.image = nil
 * @return æ˜¯å¦å¤„ç†è¯¥å›¾ç‰‡è®¾ç½®ï¼Œè¿”å›å€¼ä¸ºYESï¼Œåˆ™äº¤ç»™è¯¥ä»£ç†å®ç°ï¼Œå¦åˆ™sdkå†…éƒ¨è‡ªå·±å¤„ç†
 */</span>
- (<span class="hljs-type">BOOL</span>)hr_setImageWithUrl:(<span class="hljs-built_in">NSString</span> *)url forImageView:(<span class="hljs-built_in">UIImageView</span> *)imageView {
    [imageView sd_setImageWithURL:[<span class="hljs-built_in">NSURL</span> URLWithString:url]
                        completed:^(<span class="hljs-built_in">UIImage</span> * _Nullable image, <span class="hljs-built_in">NSError</span> * _Nullable error, SDImageCacheType cacheType, <span class="hljs-built_in">NSURL</span> * _Nullable imageURL) {
        
    }];
    <span class="hljs-keyword">return</span> <span class="hljs-literal">YES</span>;
}
Â 
<span class="hljs-comment">/*
 * è‡ªå®šä¹‰å®ç°è®¾ç½®å›¾ç‰‡ï¼ˆå¸¦å®Œæˆå›è°ƒï¼Œä¼˜å…ˆè°ƒç”¨è¯¥æ–¹æ³•ï¼‰
 * @param url è®¾ç½®çš„å›¾ç‰‡urlï¼Œå¦‚æœurlä¸ºnilï¼Œåˆ™æ˜¯å–æ¶ˆå›¾ç‰‡è®¾ç½®ï¼Œéœ€è¦view.image = nil
 * @param completeBlock å›¾ç‰‡åŠ è½½å®Œæˆçš„å›è°ƒï¼Œå¦‚æœ‰errorï¼Œä¼šè§¦å‘loadFailureäº‹ä»¶
 * @return æ˜¯å¦å¤„ç†è¯¥å›¾ç‰‡è®¾ç½®ï¼Œè¿”å›å€¼ä¸ºYESï¼Œåˆ™äº¤ç»™è¯¥ä»£ç†å®ç°ï¼Œå¦åˆ™sdkå†…éƒ¨è‡ªå·±å¤„ç†
 */</span>
- (<span class="hljs-type">BOOL</span>)hr_setImageWithUrl:(<span class="hljs-built_in">NSString</span> *)url forImageView:(<span class="hljs-built_in">UIImageView</span> *)imageView complete:(ImageCompletionBlock)completeBlock {
    [imageView sd_setImageWithURL:[<span class="hljs-built_in">NSURL</span> URLWithString:url]
                        completed:^(<span class="hljs-built_in">UIImage</span> * _Nullable image, <span class="hljs-built_in">NSError</span> * _Nullable error, SDImageCacheType cacheType, <span class="hljs-built_in">NSURL</span> * _Nullable imageURL) {
        <span class="hljs-keyword">if</span> (completeBlock) {
            completeBlock(image, error, imageURL);
        }
    }];
    <span class="hljs-keyword">return</span> <span class="hljs-literal">YES</span>;
}
Â 
<span class="hljs-keyword">@end</span>
Â 
</code></pre>
<p>å¯ä»¥çœ‹åˆ°demoä¸­æ˜¯é€šè¿‡è°ƒç”¨ç¬¬ä¸‰åº“SDWebImageæ¥å®ç°å›¾ç‰‡çš„ä¸‹è½½ä¸ç¼“å­˜çš„</p>
<p>Â </p>
<p>æˆ‘ä»¬å¯ä»¥å°è¯•ä¸ä½¿ç”¨SDWebImageï¼Œè‡ªè¡Œå®ç°å›¾ç‰‡çš„ä¸‹è½½å’Œç¼“å­˜ï¼Œä½“éªŒKuiklyåœ¨ä¸åŒå¹³å°çš„å®šåˆ¶åŒ–èƒ½åŠ›</p>
<p>Â </p>
<h3 data-id="heading-1">7.1 æ‰©å±•æœºåˆ¶å®ç°åŸç†</h3>
<p>Kuiklyæ¡†æ¶åœ¨è®¾è®¡å¹³å°æ‰©å±•æœºåˆ¶æ—¶ï¼Œé‡‡ç”¨äº†ä¸€ç§æå…¶å·§å¦™çš„æ’ä»¶åŒ–æ¶æ„æ€æƒ³ã€‚è¿™ç§è®¾è®¡çš„æ ¸å¿ƒç†å¿µæ˜¯å°†æ¡†æ¶çš„æ ¸å¿ƒåŠŸèƒ½ä¸å…·ä½“çš„å®ç°ç»†èŠ‚å®Œå…¨è§£è€¦ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿåœ¨çµæ´»åœ°å®šåˆ¶ä¸åŒå¹³å°çš„ç‰¹å®šè¡Œä¸ºã€‚è¿™ç§è®¾è®¡å“²å­¦ä½“ç°äº†ç°ä»£è½¯ä»¶æ¶æ„ä¸­çš„å‡ ä¸ªé‡è¦åŸåˆ™ï¼šå¼€é—­åŸåˆ™ï¼ˆå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­ï¼‰ã€ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆé«˜å±‚æ¨¡å—ä¸ä¾èµ–ä½å±‚æ¨¡å—ï¼Œéƒ½ä¾èµ–äºæŠ½è±¡ï¼‰ä»¥åŠå•ä¸€èŒè´£åŸåˆ™ï¼ˆæ¯ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªç‰¹å®šçš„åŠŸèƒ½ï¼‰ã€‚</p>
<p>Â </p>
<p>Kuiklyæ¡†æ¶çš„æ‰©å±•æœºåˆ¶é‡‡ç”¨äº†åè®®é©±åŠ¨çš„æ’ä»¶åŒ–æ¶æ„ï¼Œé€šè¿‡å®šä¹‰æ ‡å‡†çš„æ‰©å±•åè®®æ¥å£ï¼Œå…è®¸å¼€å‘è€…å®ç°è‡ªå®šä¹‰çš„ç»„ä»¶å¤„ç†é€»è¾‘ã€‚</p>
<p>å…·ä½“å®ç°ä¸Šï¼Œæ‰©å±•å¤„ç†å™¨ç±»åœ¨+loadæ–¹æ³•ä¸­è‡ªåŠ¨å‘KuiklyRenderBridgeæ¡¥æ¥ç®¡ç†å™¨æ³¨å†Œè‡ªå·±ï¼Œæ¡†æ¶åœ¨è¿è¡Œæ—¶é€šè¿‡å•ä¾‹æ¨¡å¼ç®¡ç†è¿™äº›æ‰©å±•å¤„ç†å™¨ã€‚è¿™ç§è®¾è®¡å®ç°äº†é›¶é…ç½®çš„è‡ªåŠ¨æ³¨å†Œã€å®Œå…¨çš„å®ç°è§£è€¦ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥åœ¨ä¸ä¿®æ”¹æ¡†æ¶æ ¸å¿ƒä»£ç çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡å®ç°åè®®æ–¹æ³•æ¥å®šåˆ¶å›¾ç‰‡åŠ è½½ã€é¢œè‰²å¤„ç†ç­‰åŠŸèƒ½ï¼ŒåŒæ—¶ä¿æŒäº†è‰¯å¥½çš„å‘åå…¼å®¹æ€§å’Œæ‰©å±•æ€§ã€‚</p>
<p>Â </p>
<p>Kuiklyæ¡†æ¶å®šä¹‰äº†KuiklyRenderComponentExpandProtocolåè®®ï¼Œå…è®¸å¼€å‘è€…è‡ªå®šä¹‰ç»„ä»¶è¡Œä¸ºï¼š</p>
<pre><code class="hljs language-ObjectiveC" lang="ObjectiveC"><span class="hljs-class"><span class="hljs-keyword">@protocol</span> <span class="hljs-title">KuiklyRenderComponentExpandProtocol</span> &lt;<span class="hljs-title">NSObject</span>&gt;</span>
Â 
<span class="hljs-comment">// å¿…é¡»å®ç°çš„åŸºç¡€å›¾ç‰‡åŠ è½½æ–¹æ³•</span>
- (<span class="hljs-type">BOOL</span>)hr_setImageWithUrl:(<span class="hljs-built_in">NSString</span> *)url forImageView:(<span class="hljs-built_in">UIImageView</span> *)imageView;
Â 
<span class="hljs-keyword">@optional</span>
<span class="hljs-comment">// å¯é€‰çš„å¸¦å›è°ƒå›¾ç‰‡åŠ è½½æ–¹æ³•ï¼ˆä¼˜å…ˆè°ƒç”¨ï¼‰</span>
- (<span class="hljs-type">BOOL</span>)hr_setImageWithUrl:(<span class="hljs-built_in">NSString</span> *)url 
              forImageView:(<span class="hljs-built_in">UIImageView</span> *)imageView 
                  complete:(ImageCompletionBlock)completeBlock;
Â 
<span class="hljs-comment">// è‡ªå®šä¹‰é¢œè‰²å¤„ç†</span>
- (<span class="hljs-built_in">UIColor</span> *)hr_colorWithValue:(<span class="hljs-built_in">NSString</span> *)value;
Â 
<span class="hljs-comment">// æ–‡æœ¬åå¤„ç†æ‰©å±•</span>
- (<span class="hljs-built_in">NSString</span> *)kr_customTextWithText:(<span class="hljs-built_in">NSString</span> *)text 
                  textPostProcessor:(<span class="hljs-built_in">NSString</span> *)textPostProcessor;
Â 
<span class="hljs-keyword">@end</span>
Â 
</code></pre>
<p>æ‰©å±•å¤„ç†å™¨é€šè¿‡ +load() æ–¹æ³•å®ç°è‡ªåŠ¨æ³¨å†Œï¼Œ</p>
<pre><code class="hljs language-ObjectiveC" lang="ObjectiveC"><span class="hljs-class"><span class="hljs-keyword">@implementation</span> <span class="hljs-title">KuiklyRenderComponentExpandHandler</span></span>
Â 
+ (<span class="hljs-type">void</span>)load {
    <span class="hljs-comment">// ç±»åŠ è½½æ—¶è‡ªåŠ¨æ³¨å†Œï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨</span>
    [KuiklyRenderBridge registerComponentExpandHandler:[<span class="hljs-keyword">self</span> new]];
}
Â 
<span class="hljs-keyword">@end</span>
</code></pre>
<p>KuiklyRenderBridgeä½œä¸ºä¸­å¤®ç®¡ç†å™¨ï¼Œè´Ÿè´£æ‰©å±•å¤„ç†å™¨çš„æ³¨å†Œå’Œè·å–ï¼š</p>
<pre><code class="hljs language-ObjectiveC" lang="ObjectiveC"><span class="hljs-comment">// å…¨å±€é™æ€å˜é‡å­˜å‚¨æ‰©å±•å¤„ç†å™¨å®ä¾‹</span>
<span class="hljs-keyword">static</span> <span class="hljs-type">id</span>&lt;KuiklyRenderComponentExpandProtocol&gt; gComponentExpandHandler;
Â 
<span class="hljs-class"><span class="hljs-keyword">@implementation</span> <span class="hljs-title">KuiklyRenderBridge</span></span>
Â 
+ (<span class="hljs-type">void</span>)registerComponentExpandHandler:(<span class="hljs-type">id</span>&lt;KuiklyRenderComponentExpandProtocol&gt;)componentExpandHandler {
    gComponentExpandHandler = componentExpandHandler;
}
Â 
+ (<span class="hljs-type">id</span>&lt;KuiklyRenderComponentExpandProtocol&gt;)componentExpandHandler {
    <span class="hljs-keyword">if</span> (!gComponentExpandHandler) {
        <span class="hljs-comment">// æ”¯æŒåŠ¨æ€åˆ›å»ºï¼Œé€šè¿‡ç±»ååå°„</span>
        gComponentExpandHandler = [[<span class="hljs-built_in">NSClassFromString</span>(<span class="hljs-string">@"KuiklyRenderComponentExpandHandler"</span>) alloc] init];
    }
    <span class="hljs-keyword">return</span> gComponentExpandHandler;
}
Â 
<span class="hljs-keyword">@end</span>
</code></pre>
<p>å½“æˆ‘ä»¬è°ƒç”¨ä½¿ç”¨åœ¨Kuiklyæ¡†æ¶ä¸­ä½¿ç”¨Imageç»„ä»¶çš„srcæ–¹æ³•çš„æ—¶å€™ï¼Œå®é™…ä¸Šä¼šè°ƒç”¨ï¼š</p>
<pre><code class="hljs language-ObjectiveC" lang="ObjectiveC">- (<span class="hljs-type">BOOL</span>)p_setImageWithUrl:(<span class="hljs-built_in">NSString</span> *)url {
    <span class="hljs-type">BOOL</span> handled = <span class="hljs-literal">NO</span>;
    
    <span class="hljs-comment">// 1. ä¼˜å…ˆè°ƒç”¨å¸¦å›è°ƒçš„æ‰©å±•æ–¹æ³•</span>
    <span class="hljs-keyword">if</span> ([[KuiklyRenderBridge componentExpandHandler] 
         respondsToSelector:<span class="hljs-keyword">@selector</span>(hr_setImageWithUrl:forImageView:complete:)]) {
        
        handled = [[KuiklyRenderBridge componentExpandHandler] 
                   hr_setImageWithUrl:url 
                         forImageView:<span class="hljs-keyword">self</span> 
                             complete:^(<span class="hljs-built_in">UIImage</span> *image, <span class="hljs-built_in">NSError</span> *error, <span class="hljs-built_in">NSURL</span> *imageURL) {
            <span class="hljs-comment">// å¤„ç†åŠ è½½ç»“æœï¼Œè§¦å‘ç›¸åº”äº‹ä»¶</span>
            <span class="hljs-keyword">if</span> (error) {
                <span class="hljs-keyword">self</span>.pendingLoadFailure = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">self</span>.errorCode = error.code;
            }
        }];
        
    <span class="hljs-comment">// 2. é™çº§åˆ°åŸºç¡€æ‰©å±•æ–¹æ³•</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ([[KuiklyRenderBridge componentExpandHandler] 
               respondsToSelector:<span class="hljs-keyword">@selector</span>(hr_setImageWithUrl:forImageView:)]) {
        
        handled = [[KuiklyRenderBridge componentExpandHandler] 
                   hr_setImageWithUrl:url forImageView:<span class="hljs-keyword">self</span>];
        
    <span class="hljs-comment">// 3. å¦‚æœæ²¡æœ‰æ‰©å±•å¤„ç†å™¨ï¼ŒæŠ›å‡ºæ–­è¨€é”™è¯¯</span>
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">NSAssert</span>(<span class="hljs-number">0</span>, <span class="hljs-string">@"should expand hr_setImageWithUrl:forImageView:"</span>);
    }
    
    <span class="hljs-keyword">return</span> handled;
}
</code></pre>
<h3 data-id="heading-2">7.2 åœ¨iOSå±‚è‡ªå®šä¹‰å›¾ç‰‡åŠ è½½</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58543c0e0cc14efda713caa71e391a6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5pyJ5LiO5LiO55eH:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350577&amp;x-signature=%2FTcP3Q5IVNbFuHcsv43F17dgnzw%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<p>KRImageLoaderï¼šç»Ÿä¸€åŠ è½½æ¥å£å±‚ï¼Œç”¨äºå¯¹å¤–æä¾›apiæ¥å£</p>
<p>KRImageCacheï¼šç¼“å­˜ç®¡ç†å±‚ å†…å­˜ç¼“å­˜+ç£ç›˜ç¼“å­˜ LRUæ·˜æ±°ç®—æ³•</p>
<p>KRImageDownloaderï¼šç½‘ç»œä¸‹è½½å±‚ å¹¶å‘æ§åˆ¶</p>
<p>Â </p>
<p>æ‹“å±•å¤„ç†å™¨å®ç°ï¼Œç”¨äºå¯¹æ¥Kuikleæ¡†æ¶è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-ObjectiveC" lang="ObjectiveC"><span class="hljs-class"><span class="hljs-keyword">@implementation</span> <span class="hljs-title">KuiklyRenderComponentExpandHandler</span></span>
Â 
- (<span class="hljs-type">BOOL</span>)hr_setImageWithUrl:(<span class="hljs-built_in">NSString</span> *)url 
              forImageView:(<span class="hljs-built_in">UIImageView</span> *)imageView 
                  complete:(ImageCompletionBlock)completeBlock {
    
    <span class="hljs-keyword">if</span> (!url) {
        <span class="hljs-comment">// å¤„ç†URLä¸ºç©ºçš„æƒ…å†µ</span>
        imageView.image = <span class="hljs-literal">nil</span>;
        [[KRImageLoader sharedLoader] cancelLoadingForImageView:imageView];
        <span class="hljs-keyword">if</span> (completeBlock) {
            completeBlock(<span class="hljs-literal">nil</span>, <span class="hljs-literal">nil</span>, <span class="hljs-literal">nil</span>);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">YES</span>;
    }
    
    <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰å›¾ç‰‡åŠ è½½å™¨</span>
    [[KRImageLoader sharedLoader] loadImageForImageView:imageView
                                                withURL:[<span class="hljs-built_in">NSURL</span> URLWithString:url]
                                            placeholder:<span class="hljs-literal">nil</span>
                                               progress:<span class="hljs-literal">nil</span>
                                              completed:^(<span class="hljs-built_in">UIImage</span> *image, <span class="hljs-built_in">NSError</span> *error, <span class="hljs-built_in">NSURL</span> *imageURL) {
        <span class="hljs-comment">// å°†ç»“æœå›è°ƒç»™Kuiklyæ¡†æ¶</span>
        <span class="hljs-keyword">if</span> (completeBlock) {
            completeBlock(image, error, imageURL);
        }
    }];
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">YES</span>; <span class="hljs-comment">// è¡¨ç¤ºå·²å¤„ç†</span>
}
Â 
<span class="hljs-keyword">@end</span>
</code></pre>
<h4 data-id="heading-3">7.2.1 ç¼“å­˜ç³»ç»Ÿè®¾è®¡ï¼ˆåŒé‡ç¼“å­˜ç­–ç•¥ï¼‰</h4>
<p>1ã€Â  å†…å­˜ç¼“å­˜</p>
<p>é€šè¿‡NSCacheè‡ªåŠ¨ç®¡ç†å†…å­˜</p>
<p>Â </p>
<p>2ã€Â  ç£ç›˜ç¼“å­˜</p>
<p>æ‰‹åŠ¨å®ç°äº†LRUç¼“å­˜ç­–ç•¥ï¼Œå¹¶ä½¿ç”¨å¼‚æ­¥çš„IOæ“ä½œï¼Œé¿å…é˜»å¡æ¥å£</p>
<p>Â </p>
<p>æ¥å£å®šä¹‰ï¼Œå…·ä½“å®ç°å¯ä»¥æŸ¥çœ‹ä»“åº“</p>
<pre><code class="hljs language-ObjectiveC" lang="ObjectiveC"><span class="hljs-comment">/**
 * KRImageCache - å›¾ç‰‡ç¼“å­˜ç®¡ç†å™¨
 * 
 * åŠŸèƒ½ç‰¹æ€§ï¼š
 * - åŒé‡ç¼“å­˜ç­–ç•¥ï¼šå†…å­˜ç¼“å­˜(NSCache) + ç£ç›˜ç¼“å­˜(æ–‡ä»¶ç³»ç»Ÿ)
 * - è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼šå“åº”å†…å­˜è­¦å‘Šè‡ªåŠ¨æ¸…ç†
 * - åå°æ¸…ç†ï¼šåº”ç”¨è¿›å…¥åå°æ—¶æ¸…ç†è¿‡æœŸç¼“å­˜
 * - çº¿ç¨‹å®‰å…¨ï¼šä½¿ç”¨ä¸²è¡Œé˜Ÿåˆ—ä¿è¯ç£ç›˜æ“ä½œå®‰å…¨
 */</span>
<span class="hljs-class"><span class="hljs-keyword">@interface</span> <span class="hljs-title">KRImageCache</span> : <span class="hljs-title">NSObject</span></span>
Â 
<span class="hljs-comment">/**
 * è·å–ç¼“å­˜ç®¡ç†å™¨çš„å•ä¾‹å®ä¾‹
 * @return ç¼“å­˜ç®¡ç†å™¨å•ä¾‹
 */</span>
+ (<span class="hljs-keyword">instancetype</span>)sharedCache;
Â 
<span class="hljs-comment">/**
 * åŒæ­¥è·å–ç¼“å­˜å›¾ç‰‡ï¼ˆä»…ä»å†…å­˜ç¼“å­˜è·å–ï¼‰
 * @param key ç¼“å­˜é”®å€¼
 * @return ç¼“å­˜çš„å›¾ç‰‡å¯¹è±¡ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›nil
 */</span>
- (<span class="hljs-built_in">UIImage</span> * _Nullable)imageForKey:(<span class="hljs-built_in">NSString</span> *)key;
Â 
<span class="hljs-comment">/**
 * å¼‚æ­¥è·å–ç¼“å­˜å›¾ç‰‡ï¼ˆå…ˆæ£€æŸ¥å†…å­˜ç¼“å­˜ï¼Œå†æ£€æŸ¥ç£ç›˜ç¼“å­˜ï¼‰
 * @param key ç¼“å­˜é”®å€¼
 * @param completion å®Œæˆå›è°ƒï¼Œåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œ
 */</span>
- (<span class="hljs-type">void</span>)imageForKey:(<span class="hljs-built_in">NSString</span> *)key completion:(<span class="hljs-type">void</span>(^)(<span class="hljs-built_in">UIImage</span> * _Nullable image))completion;
Â 
<span class="hljs-comment">/**
 * åŒæ­¥å­˜å‚¨å›¾ç‰‡åˆ°ç¼“å­˜ï¼ˆå†…å­˜+ç£ç›˜ï¼‰
 * @param image è¦ç¼“å­˜çš„å›¾ç‰‡
 * @param key ç¼“å­˜é”®å€¼
 */</span>
- (<span class="hljs-type">void</span>)storeImage:(<span class="hljs-built_in">UIImage</span> *)image forKey:(<span class="hljs-built_in">NSString</span> *)key;
Â 
<span class="hljs-comment">/**
 * å¼‚æ­¥å­˜å‚¨å›¾ç‰‡åˆ°ç¼“å­˜ï¼ˆå†…å­˜+ç£ç›˜ï¼‰
 * @param image è¦ç¼“å­˜çš„å›¾ç‰‡
 * @param key ç¼“å­˜é”®å€¼
 * @param completion å­˜å‚¨å®Œæˆå›è°ƒï¼Œåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œ
 */</span>
- (<span class="hljs-type">void</span>)storeImage:(<span class="hljs-built_in">UIImage</span> *)image forKey:(<span class="hljs-built_in">NSString</span> *)key completion:(<span class="hljs-type">void</span>(^ _Nullable)(<span class="hljs-type">void</span>))completion;
Â 
<span class="hljs-comment">/**
 * æ¸…ç†å†…å­˜ç¼“å­˜
 */</span>
- (<span class="hljs-type">void</span>)clearMemoryCache;
Â 
<span class="hljs-comment">/**
 * æ¸…ç†ç£ç›˜ç¼“å­˜
 */</span>
- (<span class="hljs-type">void</span>)clearDiskCache;
Â 
<span class="hljs-comment">/**
 * æ¸…ç†æ‰€æœ‰ç¼“å­˜ï¼ˆå†…å­˜+ç£ç›˜ï¼‰
 */</span>
- (<span class="hljs-type">void</span>)clearAllCache;
Â 
Â 
<span class="hljs-comment">/**
 * å¼‚æ­¥è·å–ç£ç›˜ç¼“å­˜å¤§å°
 * @param completion å®Œæˆå›è°ƒï¼Œåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œå‚æ•°ä¸ºç£ç›˜ç¼“å­˜å ç”¨çš„å­—èŠ‚æ•°
 */</span>
- (<span class="hljs-type">void</span>)diskCacheSizeWithCompletion:(<span class="hljs-type">void</span>(^)(<span class="hljs-built_in">NSUInteger</span> size))completion;
Â 
<span class="hljs-comment">/**
 * å½“ç¼“å­˜è¶…è¿‡é™åˆ¶æ—¶ï¼ŒæŒ‰LRUç­–ç•¥åˆ é™¤æœ€æ—§çš„æ–‡ä»¶
 */</span>
- (<span class="hljs-type">void</span>)cleanDiskCacheWithSizeLimit;
Â 
<span class="hljs-comment">/**
 * æ ¹æ®URLç”Ÿæˆç¼“å­˜é”®å€¼
 * @param url å›¾ç‰‡URL
 * @return ç”Ÿæˆçš„ç¼“å­˜é”®å€¼ï¼ˆSHA256å“ˆå¸Œï¼‰
 */</span>
+ (<span class="hljs-built_in">NSString</span> *)cacheKeyForURL:(<span class="hljs-built_in">NSURL</span> *)url;
Â 
<span class="hljs-keyword">@property</span> (<span class="hljs-keyword">nonatomic</span>, <span class="hljs-keyword">strong</span>) <span class="hljs-built_in">NSCache</span> *memoryCache;        <span class="hljs-comment">// å†…å­˜ç¼“å­˜ï¼Œè‡ªåŠ¨ç®¡ç†å†…å­˜ä½¿ç”¨</span>
<span class="hljs-keyword">@property</span> (<span class="hljs-keyword">nonatomic</span>, <span class="hljs-keyword">strong</span>) <span class="hljs-built_in">dispatch_queue_t</span> ioQueue;    <span class="hljs-comment">// ä¸²è¡ŒIOé˜Ÿåˆ—ï¼Œä¿è¯ç£ç›˜æ“ä½œçº¿ç¨‹å®‰å…¨</span>
<span class="hljs-keyword">@property</span> (<span class="hljs-keyword">nonatomic</span>, <span class="hljs-keyword">copy</span>) <span class="hljs-built_in">NSString</span> *diskCachePath;       <span class="hljs-comment">// ç£ç›˜ç¼“å­˜ç›®å½•è·¯å¾„</span>
<span class="hljs-keyword">@property</span> (<span class="hljs-keyword">nonatomic</span>, <span class="hljs-keyword">assign</span>) <span class="hljs-type">BOOL</span> isCleaningDiskCache;    <span class="hljs-comment">// æ˜¯å¦æ­£åœ¨æ¸…ç†ç£ç›˜ç¼“å­˜ï¼Œé¿å…é‡å¤æ¸…ç†</span>
<span class="hljs-keyword">@property</span> (<span class="hljs-keyword">nonatomic</span>, <span class="hljs-keyword">strong</span>) <span class="hljs-built_in">NSDate</span> *lastCleanupTime;     <span class="hljs-comment">// ä¸Šæ¬¡æ¸…ç†æ—¶é—´ï¼Œé¿å…é¢‘ç¹æ¸…ç†</span>
Â 
<span class="hljs-keyword">@end</span>
</code></pre>
<h4 data-id="heading-4">7.2.2 ä¸‹è½½å™¨è®¾è®¡</h4>
<p>é‡‡ç”¨å•ä¾‹æ¨¡å¼ç®¡ç†NSURLSessionï¼Œé€šè¿‡ä»»åŠ¡åˆå¹¶æœºåˆ¶é¿å…é‡å¤ä¸‹è½½ç›¸åŒURLçš„å›¾ç‰‡ï¼Œæ”¯æŒæœ€å¤§6ä¸ªå¹¶å‘ä¸‹è½½ã€15ç§’è¶…æ—¶æ§åˆ¶ã€ç²¾ç¡®çš„ImageViewå…³è”å–æ¶ˆæœºåˆ¶ï¼Œå¹¶ä½¿ç”¨barrieré˜Ÿåˆ—ç¡®ä¿çº¿ç¨‹å®‰å…¨çš„ä»»åŠ¡ç®¡ç†ï¼Œä¸ºå›¾ç‰‡åŠ è½½æ¡†æ¶æä¾›äº†å¯é çš„ç½‘ç»œä¸‹è½½èƒ½åŠ›ã€‚</p>
<p>Â </p>
<p>æ¥å£å®šä¹‰ï¼Œå…·ä½“å®ç°å¯ä»¥æŸ¥çœ‹ä»“åº“</p>
<pre><code class="hljs language-ObjectiveC" lang="ObjectiveC"><span class="hljs-comment">/**
 * KRImageDownloader - å›¾ç‰‡ä¸‹è½½å™¨
 *
 */</span>
<span class="hljs-class"><span class="hljs-keyword">@interface</span> <span class="hljs-title">KRImageDownloader</span> : <span class="hljs-title">NSObject</span></span>
Â 
<span class="hljs-comment">/**
 * è·å–ä¸‹è½½å™¨çš„å•ä¾‹å®ä¾‹
 * @return ä¸‹è½½å™¨å•ä¾‹
 */</span>
+ (<span class="hljs-keyword">instancetype</span>)sharedDownloader;
Â 
<span class="hljs-comment">/**
 * ä¸‹è½½å›¾ç‰‡
 * @param url å›¾ç‰‡URL
 * @param progressBlock ä¸‹è½½è¿›åº¦å›è°ƒï¼ˆå¯é€‰ï¼‰
 * @param completedBlock ä¸‹è½½å®Œæˆå›è°ƒï¼ˆå¯é€‰ï¼‰
 * @return ä¸‹è½½ä»»åŠ¡å¯¹è±¡ï¼Œå¯ç”¨äºå–æ¶ˆä¸‹è½½
 */</span>
- (<span class="hljs-built_in">NSURLSessionDataTask</span> * _Nullable)downloadImageWithURL:(<span class="hljs-built_in">NSURL</span> *)url
                                                progress:(KRDownloadProgressBlock _Nullable)progressBlock
                                               completed:(KRDownloadCompletionBlock _Nullable)completedBlock;
Â 
<span class="hljs-comment">/**
 * ä¸ºç‰¹å®šImageViewä¸‹è½½å›¾ç‰‡
 * @param url å›¾ç‰‡URL
 * @param imageView å…³è”çš„ImageViewï¼Œç”¨äºç²¾ç¡®å–æ¶ˆ
 * @param progressBlock ä¸‹è½½è¿›åº¦å›è°ƒï¼ˆå¯é€‰ï¼‰
 * @param completedBlock ä¸‹è½½å®Œæˆå›è°ƒï¼ˆå¯é€‰ï¼‰
 * @return ä¸‹è½½ä»»åŠ¡å¯¹è±¡ï¼Œå¯ç”¨äºå–æ¶ˆä¸‹è½½
 */</span>
- (<span class="hljs-built_in">NSURLSessionDataTask</span> * _Nullable)downloadImageWithURL:(<span class="hljs-built_in">NSURL</span> *)url
                                               imageView:(<span class="hljs-built_in">UIImageView</span> *)imageView
                                                progress:(KRDownloadProgressBlock _Nullable)progressBlock
                                               completed:(KRDownloadCompletionBlock _Nullable)completedBlock;
Â 
<span class="hljs-comment">/**
 * å–æ¶ˆæŒ‡å®šURLçš„ä¸‹è½½ä»»åŠ¡
 * @param url è¦å–æ¶ˆçš„å›¾ç‰‡URL
 */</span>
- (<span class="hljs-type">void</span>)cancelDownloadForURL:(<span class="hljs-built_in">NSURL</span> *)url;
Â 
<span class="hljs-comment">/**
 * ä¸ºç‰¹å®šImageViewå–æ¶ˆä¸‹è½½ä»»åŠ¡
 * åªç§»é™¤è¯¥ImageViewå¯¹åº”çš„å›è°ƒï¼Œä¸å½±å“å…¶ä»–ImageView
 * @param url å›¾ç‰‡URL
 * @param imageView è¦å–æ¶ˆçš„ImageView
 */</span>
- (<span class="hljs-type">void</span>)cancelDownloadForURL:(<span class="hljs-built_in">NSURL</span> *)url imageView:(<span class="hljs-built_in">UIImageView</span> *)imageView;
Â 
<span class="hljs-comment">/**
 * å–æ¶ˆæ‰€æœ‰ä¸‹è½½ä»»åŠ¡
 */</span>
- (<span class="hljs-type">void</span>)cancelAllDownloads;
Â 
<span class="hljs-comment">/**
 * è®¾ç½®æœ€å¤§å¹¶å‘ä¸‹è½½æ•°é‡
 * @param maxConcurrentDownloads æœ€å¤§å¹¶å‘æ•°
 */</span>
- (<span class="hljs-type">void</span>)setMaxConcurrentDownloads:(<span class="hljs-built_in">NSInteger</span>)maxConcurrentDownloads;
Â 
<span class="hljs-comment">/**
 * è®¾ç½®ä¸‹è½½è¶…æ—¶æ—¶é—´
 * @param timeout è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
 */</span>
- (<span class="hljs-type">void</span>)setDownloadTimeout:(<span class="hljs-built_in">NSTimeInterval</span>)timeout;
Â 
<span class="hljs-keyword">@end</span>
</code></pre>
<h3 data-id="heading-5">7.3 å°ç»“</h3>
<p>é€šè¿‡è‡ªå®šä¹‰å›¾ç‰‡çš„åŠ è½½å’Œç¼“å­˜ï¼Œå¯ä»¥ä½“éªŒåˆ°Kuiklyæ¡†æ¶æå¼ºçš„æ‹“å±•èƒ½åŠ›ï¼Œå°¤å…¶åœ¨å¹³å°å®šåˆ¶åŒ–ã€‚ä»¥iOSå¹³å°è‡ªå®šä¹‰å›¾ç‰‡åŠ è½½ä¸ç¼“å­˜ä¸ºä¾‹ï¼Œæ— è®ºæ˜¯é›†æˆç¬¬ä¸‰æ–¹åº“å¦‚SDWebImageï¼Œè¿˜æ˜¯ä½¿ç”¨è‡ªç ”æ–¹æ¡ˆï¼Œå¼€å‘è€…éƒ½å¯ä»¥é€šè¿‡Kuiklyçš„æ’ä»¶åŒ–æ¶æ„å’Œåè®®é©±åŠ¨æœºåˆ¶ï¼Œå®ç°ä¸æ ¸å¿ƒé€»è¾‘å®Œå…¨è§£è€¦çš„åŠŸèƒ½æ‰©å±•ã€‚å„ç±»è‡ªå®šä¹‰ç»„ä»¶åªéœ€éµå¾ªæ ‡å‡†åè®®ï¼Œé€šè¿‡é›¶é…ç½®è‡ªåŠ¨æ³¨å†Œæœºåˆ¶å³å¯æ— ç¼é›†æˆåˆ°ç³»ç»Ÿã€‚è¿™ç§è®¾è®¡ä¸ä»…ä¿éšœäº†åº”ç”¨çš„çµæ´»æ€§å’Œå‘åå…¼å®¹æ€§ï¼Œè¿˜è®©æ¯ä¸ªå¹³å°éƒ½èƒ½æ ¹æ®è‡ªèº«éœ€æ±‚ç²¾å‡†å®šåˆ¶ï¼Œå……åˆ†ä½“ç°äº†Kuiklyæ¡†æ¶å¼€æ”¾ã€é«˜æ•ˆå’Œå¯æŒç»­çš„æ‰©å±•èƒ½åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨qtæ§åˆ¶å°æŠ“å–tcpæ•°æ®åŒ…]]></title>    <link>https://juejin.cn/post/7570299986529861659</link>    <guid>https://juejin.cn/post/7570299986529861659</guid>    <pubDate>2025-11-09T16:17:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570299986529861659" data-draft-id="7570299986529845275" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨qtæ§åˆ¶å°æŠ“å–tcpæ•°æ®åŒ…"/> <meta itemprop="keywords" content="C++"/> <meta itemprop="datePublished" content="2025-11-09T16:17:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="user5033926650859"/> <meta itemprop="url" content="https://juejin.cn/user/4125813603073550"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨qtæ§åˆ¶å°æŠ“å–tcpæ•°æ®åŒ…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4125813603073550/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    user5033926650859
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-09T16:17:43.000Z" title="Sun Nov 09 2025 16:17:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä½¿ç”¨qtæ§åˆ¶å°æŠ“å–tcpæ•°æ®åŒ…</h2>
<h3 data-id="heading-1">å‰ææ¡ä»¶</h3>
<ul>
<li>å®‰è£…<code>npcap</code>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fnpcap.com%2F%23download" target="_blank" title="https://npcap.com/#download" ref="nofollow noopener noreferrer">é“¾æ¥</a></li>
</ul>
<h3 data-id="heading-2">é¡¹ç›®å‡†å¤‡</h3>
<ul>
<li>
<p>åˆ›å»ºæ§åˆ¶å°ç¨‹åº</p>
</li>
<li>
<p>åœ¨é¡¹ç›®æ–‡ä»¶ä¸­æ·»åŠ åŒ…å«ç›®å½•ã€é™„åŠ åº“ç›®å½•ã€é™„åŠ åº“</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-variable constant_">INCLUDEPATH</span> += <span class="hljs-symbol">D:</span>/softwares/<span class="hljs-title class_">Libs</span>/<span class="hljs-title class_">Npcap</span>SDK/<span class="hljs-title class_">Include</span>
<span class="hljs-variable constant_">LIBS</span> += -<span class="hljs-variable constant_">LD</span><span class="hljs-symbol">:/softwares/Libs/NpcapSDK/Lib/x64</span>
<span class="hljs-variable constant_">LIBS</span> += -lwpcap
<span class="hljs-variable constant_">LIBS</span> += -lole32
<span class="hljs-variable constant_">LIBS</span> += -lPacket
<span class="hljs-variable constant_">LIBS</span> += -lIphlpapi
</code></pre>
</li>
</ul>
<h3 data-id="heading-3">æ£€æŸ¥æ˜¯å¦å·²ç»å®‰è£…npcap</h3>
<pre><code class="hljs language-c++" lang="c++"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">checkNpcapExist</span><span class="hljs-params">()</span>
</span>{
    WCHAR path[<span class="hljs-number">512</span>];
    uint len = <span class="hljs-built_in">GetSystemDirectory</span>(path, <span class="hljs-number">480</span>);
    QString systemPath = QString::<span class="hljs-built_in">fromWCharArray</span>(path, len);

    QString npcapFolder = <span class="hljs-built_in">QDir</span>(systemPath).<span class="hljs-built_in">filePath</span>(<span class="hljs-string">"Npcap"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">QDir</span>(npcapFolder).<span class="hljs-built_in">exists</span>();
}
</code></pre>
<ul>
<li>ä¹Ÿå°±æ˜¯åˆ¤æ–­ç›®å½•: <code>C:\Windows\System32\Npcap</code> å­˜ä¸å­˜åœ¨</li>
</ul>
<h3 data-id="heading-4">è·å–ç½‘ç»œé€‚é…å™¨åˆ—è¡¨</h3>
<ul>
<li>æˆ‘ä»¬éœ€è¦é€‰æ‹©ä¸€ä¸ªç½‘ç»œé€‚é…å™¨å»æŠ“å–tcpæ•°æ®åŒ…ï¼Œæ‰€ä»¥éœ€è¦è·å–æœ¬åœ°æœºå™¨çš„æ‰€æœ‰ç½‘ç»œé€‚é…å™¨ï¼Œå½“ç„¶ <code>npcap</code> æä¾›äº† <code>pcap_findalldevs</code> apiï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬è¦æƒ³è·å–å®ƒçš„å¯è¯»åŒ–çš„ <code>FriendName</code>ï¼Œéœ€è¦ç»è¿‡ä¸€äº›æ“ä½œ</li>
</ul>
<pre><code class="hljs language-c++" lang="c++"><span class="hljs-function">QString <span class="hljs-title">getDeviceFriendName</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *devName)</span>
</span>{
    <span class="hljs-function">QString <span class="hljs-title">friendName</span><span class="hljs-params">(devName)</span></span>;

    <span class="hljs-comment">// extract guid string by regex</span>
    <span class="hljs-function">QRegularExpression <span class="hljs-title">regex</span><span class="hljs-params">(<span class="hljs-string">R"(({[A-F0-9\-]+}))"</span>)</span></span>;
    <span class="hljs-keyword">auto</span> match = regex.<span class="hljs-built_in">match</span>(friendName);

    <span class="hljs-keyword">if</span> (!match.<span class="hljs-built_in">hasMatch</span>()) <span class="hljs-keyword">return</span> friendName;

    <span class="hljs-comment">// translate guid string to GUID</span>
    GUID guid;

    HRESULT hr = <span class="hljs-built_in">CLSIDFromString</span>(match.<span class="hljs-built_in">captured</span>(<span class="hljs-number">1</span>).<span class="hljs-built_in">toStdWString</span>().<span class="hljs-built_in">c_str</span>(), &amp;guid);

    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">SUCCEEDED</span>(hr)) <span class="hljs-keyword">return</span> friendName;

    <span class="hljs-comment">// GUID =&gt; LUID =&gt; Alias(FriendName)</span>
    NET_LUID luid;
    <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == <span class="hljs-built_in">ConvertInterfaceGuidToLuid</span>(&amp;guid, &amp;luid))
    {
        WCHAR buffer[<span class="hljs-number">256</span>] = {<span class="hljs-number">0</span>};
        <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == <span class="hljs-built_in">ConvertInterfaceLuidToAlias</span>(&amp;luid, buffer, <span class="hljs-number">256</span>))
        {
            friendName = QString::<span class="hljs-built_in">fromWCharArray</span>(buffer);
        }
    }

    <span class="hljs-keyword">return</span> friendName;
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-type">char</span> errbuf[PCAP_ERRBUF_SIZE];
    <span class="hljs-type">pcap_if_t</span> *alldevs;
    <span class="hljs-comment">// pcap_t *handle;</span>

    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">pcap_findalldevs</span>(&amp;alldevs, errbuf) == <span class="hljs-number">-1</span>) {
        <span class="hljs-built_in">qCritical</span>() &lt;&lt; <span class="hljs-string">"Error in pcap_findalldevs:"</span> &lt;&lt; errbuf;
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    }

    QStringList devNames;
    <span class="hljs-type">pcap_if_t</span> *dev = alldevs;
    <span class="hljs-type">char</span>* lastName = <span class="hljs-literal">nullptr</span>;
    <span class="hljs-keyword">while</span> (dev)
    {
        QString devName = <span class="hljs-built_in">getDeviceFriendName</span>(dev-&gt;name);
        devNames.<span class="hljs-built_in">append</span>(devName);
        lastName = dev-&gt;name;
        dev = dev-&gt;next;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h4 data-id="heading-5">æ‰“å¼€ç½‘ç»œé€‚é…å™¨å¹¶è®¾ç½®ç­›é€‰æ¡ä»¶</h4>
<ul>
<li>ä¸€ä¸ªç½‘ç»œé€‚é…å™¨æŠ“åˆ°çš„tcpæ•°æ®åŒ…æœ‰å¾ˆå¤šï¼Œä½†æ˜¯æˆ‘ä»¬åªæƒ³å…³æ³¨æˆ‘ä»¬æƒ³è¦çš„tcpæ•°æ®åŒ…ï¼Œæ‰€ä»¥éœ€è¦è®¾ç½®ç­›é€‰æ¡ä»¶</li>
</ul>
<pre><code class="hljs language-c++" lang="c++"><span class="hljs-comment">// open the adapter</span>
<span class="hljs-type">pcap_t</span>* adapter = <span class="hljs-built_in">pcap_open_live</span>(lastName, <span class="hljs-number">65536</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1000</span>, errbuf);
<span class="hljs-keyword">if</span> (adapter == <span class="hljs-literal">nullptr</span>)
{
    <span class="hljs-built_in">pcap_freealldevs</span>(alldevs);
    <span class="hljs-built_in">qDebug</span>() &lt;&lt; <span class="hljs-string">"fail to open the net adapter: "</span> &lt;&lt; lastName;
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
}

<span class="hljs-built_in">pcap_freealldevs</span>(alldevs);

<span class="hljs-comment">// set filter</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">bpf_program</span> fcode;
<span class="hljs-type">int</span> res = <span class="hljs-number">0</span>;
<span class="hljs-keyword">if</span> ((res = <span class="hljs-built_in">pcap_compile</span>(adapter, &amp;fcode, <span class="hljs-string">"tcp port 3000"</span>, <span class="hljs-number">1</span>, PCAP_NETMASK_UNKNOWN)) &lt; <span class="hljs-number">0</span>)
{
    <span class="hljs-built_in">qDebug</span>() &lt;&lt; <span class="hljs-string">"fail to compile:"</span> &lt;&lt; <span class="hljs-built_in">pcap_statustostr</span>(res);
    <span class="hljs-built_in">pcap_close</span>(adapter);
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
}
<span class="hljs-keyword">if</span> ((res = <span class="hljs-built_in">pcap_setfilter</span>(adapter, &amp;fcode) &lt; <span class="hljs-number">0</span>))
{
    <span class="hljs-built_in">qDebug</span>() &lt;&lt; <span class="hljs-string">"fail to set filter:"</span> &lt;&lt; <span class="hljs-built_in">pcap_statustostr</span>(res);
    <span class="hljs-built_in">pcap_close</span>(adapter);
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
}
</code></pre>
<ul>
<li>è¿™é‡Œæˆ‘ä»¬è®¾ç½®çš„æ¡ä»¶æ˜¯åªç­›é€‰ ç«¯å£å·<code>3000</code>çš„tcpæ•°æ®åŒ…ï¼Œç­›é€‰å­—ç¬¦ä¸²ä¸º: <code>tcp port 3000</code></li>
</ul>
<h4 data-id="heading-6">å¼€å§‹æŠ“åŒ…ï¼Œè®¾ç½®å¤„ç†å‡½æ•°</h4>
<pre><code class="hljs language-c++" lang="c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// start capture loop</span>
    <span class="hljs-built_in">pcap_loop</span>(adapter, <span class="hljs-number">0</span>, packet_handler, <span class="hljs-literal">nullptr</span>);

    <span class="hljs-built_in">pcap_close</span>(adapter);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">packet_handler</span><span class="hljs-params">(u_char* param, <span class="hljs-type">const</span> <span class="hljs-keyword">struct</span> pcap_pkthdr* header, <span class="hljs-type">const</span> u_char* pkt_data)</span>
</span>{
    <span class="hljs-built_in">Q_UNUSED</span>(param);
    <span class="hljs-built_in">Q_UNUSED</span>(pkt_data);

    uint len = header-&gt;len;
    QString str = QString::<span class="hljs-built_in">asprintf</span>(<span class="hljs-string">"%ld:%ld (%ld)"</span>, header-&gt;ts.tv_sec, header-&gt;ts.tv_usec, len);
    <span class="hljs-built_in">qDebug</span>() &lt;&lt; str;
}
</code></pre>
<h3 data-id="heading-7">è¿è¡Œæ•ˆæœ</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e02c2a300a714066a5bcf314c1e338c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdXNlcjUwMzM5MjY2NTA4NTk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763309863&amp;x-signature=nlY7%2Bx6FzH7xCreZ6rzLa0Aby9c%3D" alt="image-20231104224314263.png" loading="lazy"/></p>
<h3 data-id="heading-8">å®Œæ•´ä»£ç </h3>
<pre><code class="hljs language-c++" lang="c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QCoreApplication&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;winsock2.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QDebug&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;windows.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QDir&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;pcap.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QRegularExpression&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;objbase.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;netioapi.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">checkNpcapExist</span><span class="hljs-params">()</span>
</span>{
    WCHAR path[<span class="hljs-number">512</span>];
    uint len = <span class="hljs-built_in">GetSystemDirectory</span>(path, <span class="hljs-number">480</span>);
    QString systemPath = QString::<span class="hljs-built_in">fromWCharArray</span>(path, len);

    QString npcapFolder = <span class="hljs-built_in">QDir</span>(systemPath).<span class="hljs-built_in">filePath</span>(<span class="hljs-string">"Npcap"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">QDir</span>(npcapFolder).<span class="hljs-built_in">exists</span>();
}

<span class="hljs-function">QString <span class="hljs-title">getDeviceFriendName</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *devName)</span>
</span>{
    <span class="hljs-function">QString <span class="hljs-title">friendName</span><span class="hljs-params">(devName)</span></span>;

    <span class="hljs-comment">// extract guid string by regex</span>
    <span class="hljs-function">QRegularExpression <span class="hljs-title">regex</span><span class="hljs-params">(<span class="hljs-string">R"(({[A-F0-9\-]+}))"</span>)</span></span>;
    <span class="hljs-keyword">auto</span> match = regex.<span class="hljs-built_in">match</span>(friendName);

    <span class="hljs-keyword">if</span> (!match.<span class="hljs-built_in">hasMatch</span>()) <span class="hljs-keyword">return</span> friendName;

    <span class="hljs-comment">// translate guid string to GUID</span>
    GUID guid;

    HRESULT hr = <span class="hljs-built_in">CLSIDFromString</span>(match.<span class="hljs-built_in">captured</span>(<span class="hljs-number">1</span>).<span class="hljs-built_in">toStdWString</span>().<span class="hljs-built_in">c_str</span>(), &amp;guid);

    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">SUCCEEDED</span>(hr)) <span class="hljs-keyword">return</span> friendName;

    <span class="hljs-comment">// GUID =&gt; LUID =&gt; Alias(FriendName)</span>
    NET_LUID luid;
    <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == <span class="hljs-built_in">ConvertInterfaceGuidToLuid</span>(&amp;guid, &amp;luid))
    {
        WCHAR buffer[<span class="hljs-number">256</span>] = {<span class="hljs-number">0</span>};
        <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == <span class="hljs-built_in">ConvertInterfaceLuidToAlias</span>(&amp;luid, buffer, <span class="hljs-number">256</span>))
        {
            friendName = QString::<span class="hljs-built_in">fromWCharArray</span>(buffer);
        }
    }

    <span class="hljs-keyword">return</span> friendName;
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">packet_handler</span><span class="hljs-params">(u_char* param, <span class="hljs-type">const</span> <span class="hljs-keyword">struct</span> pcap_pkthdr* header, <span class="hljs-type">const</span> u_char* pkt_data)</span>
</span>{
    <span class="hljs-built_in">Q_UNUSED</span>(param);
    <span class="hljs-built_in">Q_UNUSED</span>(pkt_data);

    <span class="hljs-comment">// struct tm* ltime;</span>
    <span class="hljs-comment">// char timestr[16];</span>
    <span class="hljs-comment">// time_t local_tv_sec;</span>

    uint len = header-&gt;len;
    QString str = QString::<span class="hljs-built_in">asprintf</span>(<span class="hljs-string">"%ld:%ld (%ld)"</span>, header-&gt;ts.tv_sec, header-&gt;ts.tv_usec, len);
    <span class="hljs-built_in">qDebug</span>() &lt;&lt; str;
}


<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span>
</span>{
    <span class="hljs-function">QCoreApplication <span class="hljs-title">a</span><span class="hljs-params">(argc, argv)</span></span>;

    <span class="hljs-comment">// åˆ¤æ–­npcapæ˜¯å¦å­˜åœ¨</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">checkNpcapExist</span>())
    {
        <span class="hljs-built_in">qDebug</span>() &lt;&lt; <span class="hljs-string">"Npcap not exists"</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    }

    <span class="hljs-comment">// æ£€ç´¢ç½‘å¡åˆ—è¡¨</span>
    <span class="hljs-type">char</span> errbuf[PCAP_ERRBUF_SIZE];
    <span class="hljs-type">pcap_if_t</span> *alldevs;
    <span class="hljs-comment">// pcap_t *handle;</span>

    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">pcap_findalldevs</span>(&amp;alldevs, errbuf) == <span class="hljs-number">-1</span>) {
        <span class="hljs-built_in">qCritical</span>() &lt;&lt; <span class="hljs-string">"Error in pcap_findalldevs:"</span> &lt;&lt; errbuf;
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    }

    QStringList devNames;
    <span class="hljs-type">pcap_if_t</span> *dev = alldevs;
    <span class="hljs-type">char</span>* lastName = <span class="hljs-literal">nullptr</span>;
    <span class="hljs-keyword">while</span> (dev)
    {
        QString devName = <span class="hljs-built_in">getDeviceFriendName</span>(dev-&gt;name);
        devNames.<span class="hljs-built_in">append</span>(devName);
        lastName = dev-&gt;name;
        dev = dev-&gt;next;
    }

    <span class="hljs-comment">// open the adapter</span>
    <span class="hljs-type">pcap_t</span>* adapter = <span class="hljs-built_in">pcap_open_live</span>(lastName, <span class="hljs-number">65536</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1000</span>, errbuf);
    <span class="hljs-keyword">if</span> (adapter == <span class="hljs-literal">nullptr</span>)
    {
        <span class="hljs-built_in">pcap_freealldevs</span>(alldevs);
        <span class="hljs-built_in">qDebug</span>() &lt;&lt; <span class="hljs-string">"fail to open the net adapter: "</span> &lt;&lt; lastName;
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    }

    <span class="hljs-built_in">pcap_freealldevs</span>(alldevs);

    <span class="hljs-comment">// set filter</span>
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">bpf_program</span> fcode;
    <span class="hljs-type">int</span> res = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">if</span> ((res = <span class="hljs-built_in">pcap_compile</span>(adapter, &amp;fcode, <span class="hljs-string">"tcp port 3000"</span>, <span class="hljs-number">1</span>, PCAP_NETMASK_UNKNOWN)) &lt; <span class="hljs-number">0</span>)
    {
        <span class="hljs-built_in">qDebug</span>() &lt;&lt; <span class="hljs-string">"fail to compile:"</span> &lt;&lt; <span class="hljs-built_in">pcap_statustostr</span>(res);
        <span class="hljs-built_in">pcap_close</span>(adapter);
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    }
    <span class="hljs-keyword">if</span> ((res = <span class="hljs-built_in">pcap_setfilter</span>(adapter, &amp;fcode) &lt; <span class="hljs-number">0</span>))
    {
        <span class="hljs-built_in">qDebug</span>() &lt;&lt; <span class="hljs-string">"fail to set filter:"</span> &lt;&lt; <span class="hljs-built_in">pcap_statustostr</span>(res);
        <span class="hljs-built_in">pcap_close</span>(adapter);
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    }

    <span class="hljs-comment">// start capture loop</span>
    <span class="hljs-built_in">pcap_loop</span>(adapter, <span class="hljs-number">0</span>, packet_handler, <span class="hljs-literal">nullptr</span>);

    <span class="hljs-built_in">pcap_close</span>(adapter);

    <span class="hljs-built_in">qDebug</span>() &lt;&lt; <span class="hljs-string">"hello"</span>;

    <span class="hljs-keyword">return</span> a.<span class="hljs-built_in">exec</span>();
}

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[wmiè·å–ç¦ç”¨ç½‘å¡çš„macåœ°å€]]></title>    <link>https://juejin.cn/post/7570243451725004827</link>    <guid>https://juejin.cn/post/7570243451725004827</guid>    <pubDate>2025-11-09T16:22:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570243451725004827" data-draft-id="7570243451724988443" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="wmiè·å–ç¦ç”¨ç½‘å¡çš„macåœ°å€"/> <meta itemprop="keywords" content="Windows"/> <meta itemprop="datePublished" content="2025-11-09T16:22:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="morn_venus"/> <meta itemprop="url" content="https://juejin.cn/user/4125813603073550"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            wmiè·å–ç¦ç”¨ç½‘å¡çš„macåœ°å€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4125813603073550/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    morn_venus
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-09T16:22:48.000Z" title="Sun Nov 09 2025 16:22:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">wmiè·å–ç¦ç”¨ç½‘å¡çš„macåœ°å€</h2>
<ul>
<li>æœ€è¿‘é‡åˆ°ä¸€ä¸ªæ€§èƒ½é—®é¢˜ï¼Œæˆ‘ä»¬çš„è½¯ä»¶å¯åŠ¨éœ€è¦éªŒè¯<code>License</code>ï¼ŒéªŒè¯Licenseéœ€è¦è·å–ç½‘å¡çš„macåœ°å€ï¼ˆæ— è®ºæ˜¯ç¦ç”¨çš„è¿˜æ˜¯å¯ç”¨çš„ï¼‰ã€‚ä¹‹å‰çš„åšæ³•æ˜¯è¿è¡Œä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œ <code>chcp 437&amp;&amp;powershell  Get-NetAdapter</code>
<ul>
<li>è¿™ç›¸å½“äºå…ˆå¼€å¯ä¸€ä¸ª<code>cmd</code> æ‰§è¡Œ <code>chcp 437</code> ï¼Œç„¶ååœ¨<code>cmd</code>å†å¯åŠ¨ <code>powershell</code> æ‰§è¡Œ <code>Get-NetAdapter</code></li>
<li>æ­¤æ“ä½œç›¸å½“è€—æ—¶ï¼ŒåŸºæœ¬ä¸Šè¦è€—æ—¶2ç§’ä»¥ä¸Šï¼Œè¿™å¯¹äºè½¯ä»¶å¯åŠ¨æ¥è¯´æ˜¯ä¸å¯æ¥å—çš„</li>
<li>æ‰€ä»¥å°±ç ”ç©¶äº† powershellæ‰§è¡Œçš„ <code>Get-NetAdapter</code> åº•å±‚æ˜¯å¦‚ä½•å®ç°çš„ï¼Œæ˜¯å¦å¯ä»¥åœ¨ <code>C#</code> ä¸­ç›´æ¥å¤åˆ»å®ç°ä»¥è¾¾åˆ°å‡å°‘è€—æ—¶çš„ç›®çš„ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆé‡‡ç”¨å¯åŠ¨powershellçš„æ–¹å¼å»è·å–ç½‘å¡çš„macåœ°å€</h3>
<ul>
<li>
<p>å¸¸ç”¨çš„è·å–ç½‘å¡åœ°å€çš„æ–¹å¼</p>
<ol>
<li>
<p><code>NetworkInterface.GetAllNetworkInterfaces</code>ï¼š<strong>è·å–ä¸åˆ°ç¦ç”¨çš„ç½‘å¡ä¿¡æ¯</strong></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">var</span> list = NetworkInterface.GetAllNetworkInterfaces();
<span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> item <span class="hljs-keyword">in</span> list)
{
    <span class="hljs-keyword">var</span> name = item.Name;
    <span class="hljs-keyword">var</span> address = item.GetPhysicalAddress();
    Debug.WriteLine(<span class="hljs-string">$"name: <span class="hljs-subst">{name}</span>, mac: <span class="hljs-subst">{address}</span>"</span>);
}
</code></pre>
</li>
<li>
<p>ä½¿ç”¨wmiæ–¹å¼è·å– <code>Win32_NetworkAdapter</code>ï¼š<strong>è·å–ä¸åˆ°ç¦ç”¨ç½‘å¡çš„Macåœ°å€</strong></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> (<span class="hljs-keyword">var</span> search = <span class="hljs-keyword">new</span> ManagementObjectSearcher(<span class="hljs-string">"select * from Win32_NetworkAdapter where PhysicalAdapter = TRUE"</span>))
{
    <span class="hljs-keyword">foreach</span>(ManagementObject item <span class="hljs-keyword">in</span> search.Get())
    {
        <span class="hljs-built_in">string</span> name = item[<span class="hljs-string">"Name"</span>]?.ToString();
        <span class="hljs-built_in">string</span> address = item[<span class="hljs-string">"MACAddress"</span>]?.ToString();
        Debug.WriteLine(<span class="hljs-string">$"name: <span class="hljs-subst">{name}</span>, mac: <span class="hljs-subst">{address}</span>"</span>);
    }
}
</code></pre>
</li>
</ol>
</li>
<li>
<p>åŸºäºä»¥ä¸Šä¸¤ç§å¸¸ç”¨çš„æ–¹å¼éƒ½æ— æ³•è·å–åˆ°ç¦ç”¨ç½‘å¡çš„ä¿¡æ¯ï¼Œæ•…æœ€åé‡‡ç”¨ç»•è¿œè·¯çš„æ–¹æ³•ï¼šå¯åŠ¨powershellæ‰§è¡Œ <code>get-netadapter</code></p>
</li>
</ul>
<h3 data-id="heading-2">powershellçš„ <code>get-netadapter</code>åº•å±‚åšäº†äº›ä»€ä¹ˆï¼Ÿ</h3>
<ul>
<li>ç»è¿‡æŸ¥é˜…èµ„æ–™ï¼Œ<code>get-netadapter</code> å…¶å®æ˜¯è°ƒç”¨äº† <code>Get-CimInstance -Namespace root/StandardCimv2 -ClassName MSFT_NetAdapter</code></li>
<li>äºæ˜¯å…´å†²å†²çš„æ‰“å¼€ <code>powershell</code> æ‰§è¡Œäº†ä»¥ä¸Šå‘½ä»¤ï¼Œç»“æœè¾“å‡ºçš„å†…å®¹å¾ˆå¤šï¼Œä¸ <code>get-netadapter</code> è¾“å‡ºçš„å†…å®¹å¤§ç›¸å¾„åº­ã€‚</li>
<li>ä½†æ˜¯åœ¨æ‰§è¡Œå®Œä¸€é<code>get-netadapter</code>ä¹‹åï¼Œå†æ¬¡è¿è¡Œ <code>Get-CimInstance</code> å‘½ä»¤ï¼Œå‘ç°è¾“å‡ºå†…å®¹ç¡®å®ä¸€è‡´
<ul>
<li>è¿™é‡Œé—®äº†chatgptï¼Œè¯´æ˜¯<code>get-adapter</code> ä¼šåšä¸€äº›åˆå§‹åŒ–çš„æ“ä½œï¼Œå¦‚æœå…ˆæ‰§è¡Œ <code>get-ciminstance</code> ï¼ˆåœ¨æ²¡æœ‰åˆå§‹åŒ–çš„å‰æä¸‹ï¼‰ï¼Œä¼šè¾“å‡ºä¸€äº›ä¸æ­£ç¡®çš„å†…å®¹ã€‚</li>
</ul>
</li>
<li><code>get-ciminstance</code> å‘½ä»¤å…¶å®å°±æ˜¯è°ƒç”¨çš„ <code>wmi</code></li>
</ul>
<h3 data-id="heading-3">ä»€ä¹ˆæ˜¯wmi</h3>
<ul>
<li>
<p>wmi: <code>windows management instruments</code> windowsç®¡ç†è§„èŒƒï¼Œæä¾›äº†ç³»ç»Ÿä¿¡æ¯è®¿é—®çš„api</p>
</li>
<li>
<p>ä¸€å¥è¯æ€»ç»“ï¼š<strong>wmi=windowsçš„ç³»ç»Ÿçº§æ•°æ®åº“ï¼Œä½ å¯ä»¥é€šè¿‡wqlè¯­å¥æŸ¥çœ‹å’Œæ§åˆ¶ç³»ç»Ÿ</strong></p>
</li>
<li>
<p>é‚£cimåˆæ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Ÿ</p>
<ul>
<li>wmiæ˜¯åŸºäº <code>cim</code> å®ç°çš„ï¼Œcommon infomation model, æ„æ€å°±æ˜¯å°†ç³»ç»Ÿèµ„æºæŠ½è±¡æˆç±»</li>
<li>æˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥è¯¢è¯­å¥å»è®¿é—®è¿™äº›èµ„æºç±»å¯¹è±¡çš„ä¿¡æ¯</li>
</ul>
</li>
<li>
<p>å¾®è½¯å°†ç³»ç»Ÿèµ„æºæŠ½è±¡æˆç±»ï¼ŒæŠŠè¿™äº›ç±»æ”¾åœ¨ä¸åŒçš„å‘½åç©ºé—´ä¸‹ï¼ˆé»˜è®¤çš„å‘½åç©ºé—´ä¸º<code>root\CIMV2</code>ï¼‰ï¼Œå¹¶ä¸”å°†ç±»çš„åç§°æ·»åŠ äº†å‰ç¼€ï¼Œå…·ä½“åˆ’åˆ†è§„åˆ™å¦‚ä¸‹</p>



































<table><thead><tr><th>ç±»åå‰ç¼€</th><th>æ¥æº</th><th>å…¸å‹å‘½åç©ºé—´</th><th>ä¸¾ä¾‹</th></tr></thead><tbody><tr><td><strong>Win32_</strong></td><td>ä¼ ç»Ÿ WMI ç±»ï¼ˆæ—©æœŸï¼Œå…¼å®¹æ—§ç³»ç»Ÿï¼‰</td><td><code>root\CIMV2</code></td><td><code>Win32_Process</code>, <code>Win32_NetworkAdapter</code></td></tr><tr><td><strong>MSFT_</strong></td><td>æ–°ä¸€ä»£ CIM ç±»ï¼ˆåŸºäº PowerShell å’Œ DMTF æ ‡å‡†ï¼‰</td><td><code>root\StandardCimv2</code></td><td><code>MSFT_NetAdapter</code>, <code>MSFT_Disk</code>, <code>MSFT_NetIPAddress</code></td></tr><tr><td><strong>CIM_</strong></td><td>æ ‡å‡† DMTFï¼ˆè·¨å¹³å°ï¼‰ç±»</td><td><code>root\CIMV2</code></td><td><code>CIM_LogicalDisk</code>, <code>CIM_ComputerSystem</code></td></tr><tr><td>è‡ªå®šä¹‰ï¼ˆå‚å•†åï¼‰</td><td>ç¬¬ä¸‰æ–¹ / OEM é©±åŠ¨æä¾›</td><td><code>root\WMI</code>ã€<code>root\&lt;vendor&gt;</code></td><td><code>Intel_SMBIOSData</code>, <code>Dell_BIOSProvider</code> ç­‰</td></tr></tbody></table>
</li>
<li>
<p>windowsç•Œé¢çš„è®¾å¤‡ç®¡ç†å™¨æœ‰ä¸€éƒ¨åˆ†çš„å®ç°å°±æ˜¯åŸºäº <code>wmi</code></p>
</li>
<li>

























<table><thead><tr><th>ç±»å</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>Win32_Process</code></td><td>è¡¨ç¤ºç³»ç»Ÿä¸­çš„ä¸€ä¸ªè¿›ç¨‹</td></tr><tr><td><code>Win32_Service</code></td><td>è¡¨ç¤ºä¸€ä¸ª Windows æœåŠ¡</td></tr><tr><td><code>MSFT_NetAdapter</code></td><td>è¡¨ç¤ºä¸€ä¸ªç½‘ç»œé€‚é…å™¨</td></tr><tr><td><code>Win32_LogicalDisk</code></td><td>è¡¨ç¤ºä¸€ä¸ªé€»è¾‘ç£ç›˜ï¼ˆCç›˜ã€Dç›˜ç­‰ï¼‰</td></tr></tbody></table>
</li>
</ul>
<h4 data-id="heading-4">å¦‚ä½•ä½¿ç”¨wmiå‘¢?</h4>
<ul>
<li>powershell
<ul>
<li>è®¿é—® <code>Win32_NetworkAdapter</code>ç±»å¯¹è±¡: <code>get-ciminstance -classname win32_networkadapter</code></li>
</ul>
</li>
<li>C#: ä¸Šé¢å·²ç»è®²è¿‡</li>
</ul>
<h3 data-id="heading-5">è§£å†³æ–¹æ¡ˆ</h3>
<ul>
<li>æ—¢ç„¶å·²ç»çŸ¥é“powershellçš„å‘½ä»¤<code>get-netadapter</code> åº•å±‚æ˜¯ <code>Get-CimInstance -Namespace root/StandardCimv2 -ClassName MSFT_NetAdapter</code>ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åº”ç”¨åˆ°c#ä¸Š</li>
</ul>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> (<span class="hljs-keyword">var</span> search = <span class="hljs-keyword">new</span> ManagementObjectSearcher(<span class="hljs-string">"root/standardcimv2"</span>, <span class="hljs-string">"select * from msft_netadapter"</span>))
{
    <span class="hljs-keyword">foreach</span> (ManagementObject item <span class="hljs-keyword">in</span> search.Get())
    {
        <span class="hljs-built_in">string</span> name = item[<span class="hljs-string">"Name"</span>]?.ToString();
        <span class="hljs-built_in">string</span> address = item[<span class="hljs-string">"MacAddress"</span>]?.ToString();
        Debug.WriteLine(<span class="hljs-string">$"name: <span class="hljs-subst">{name}</span>, mac: <span class="hljs-subst">{address}</span>"</span>);
    }
}
</code></pre>
<ul>
<li>ä½†æ˜¯ï¼ï¼ï¼<strong>è¿è¡ŒæŠ¥é”™äº†</strong>ï¼Œæç¤ºæ²¡æœ‰ <code>MacAddress</code>è¿™ä¸ªå­—æ®µï¼Œåˆæ˜¯ç»è¿‡äº†ä¸€ç•ªå°è¯•ï¼Œå‘ç°åŸæ¥è¿™é‡Œæ˜¯ <code>PermanentAddress</code>ï¼Œå¯èƒ½æ˜¯<code>powershell</code> ä¸ºäº†æ˜¾ç¤ºçš„æ›´å‡†ç¡®ï¼Œè‡ªè¡Œæ”¹äº†å­—æ®µçš„åç§°</li>
</ul>
<h3 data-id="heading-6">æ‰©å±•</h3>
<h4 data-id="heading-7">èµ°çš„æ­ªè·¯ï¼šä½¿ç”¨c++è°ƒç”¨wmiè·å–ç³»ç»Ÿä¿¡æ¯</h4>
<ul>
<li>ä¹‹å‰åšäº†å¾ˆå¤šå°è¯•ä¾æ—§ä¸å¾—å…¥é—¨ï¼Œæ— æ³•åœ¨C#ä¸­è·å–åˆ°ç¦ç”¨ç½‘å¡çš„macåœ°å€ï¼Œäºæ˜¯è½¬è€Œè®©chatgptç»™ä¸ªc++çš„æ–¹æ¡ˆï¼Œè™½ç„¶ç»™çš„ä»£ç å¾ˆå¤šç¼–è¯‘æŠ¥é”™ï¼Œè¿è¡ŒæŠ¥é”™ï¼Œæœ€åç»ˆäºè¿è¡Œèµ·æ¥ä¸€æ¬¡ï¼ˆè¿ç»­è¿è¡Œç¬¬äºŒæ¬¡å°±å´©æºƒï¼‰ï¼Œå¥½æ­¹æˆåŠŸè·å–åˆ°äº†ï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œå‘ç°è¯»å–çš„æ˜¯ <code>PermanentAddress</code> å­—æ®µï¼Œè€Œä¸æ˜¯ <code>MacAddress</code>ï¼Œæœ€ç»ˆæ‰¾åˆ°äº†åœ¨C#ä¸­çš„æ­£ç¡®æ–¹æ¡ˆã€‚
<ul>
<li>åœ¨å¾—åˆ°æ­£ç¡®æ–¹æ¡ˆåï¼Œä¹Ÿå°±æ²¡æœ‰å†ç ”ç©¶c++æ–¹æ¡ˆä¸ºä»€ä¹ˆè¿è¡Œç¬¬äºŒæ¬¡å°±ä¼šå´©æºƒçš„é—®é¢˜ï¼Œç©ºä¸‹æ¥å†è¯´ï¼ˆè‡ªæˆ‘å®‰æ…°ï¼ŒåŸºæœ¬ä¸Šæ˜¯ä¸ä¼šå†å»çœ‹é‚£æ®µä»£ç äº†ï¼‰</li>
</ul>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ŠCSS æ ¸å¿ƒæœºåˆ¶ä¸é€‰æ‹©å™¨å®æˆ˜ç²¾è¦ã€‹]]></title>    <link>https://juejin.cn/post/7570162686579916842</link>    <guid>https://juejin.cn/post/7570162686579916842</guid>    <pubDate>2025-11-09T16:27:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570162686579916842" data-draft-id="7570162686579818538" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ŠCSS æ ¸å¿ƒæœºåˆ¶ä¸é€‰æ‹©å™¨å®æˆ˜ç²¾è¦ã€‹"/> <meta itemprop="keywords" content="CSS"/> <meta itemprop="datePublished" content="2025-11-09T16:27:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é±¼é±¼å—"/> <meta itemprop="url" content="https://juejin.cn/user/4302802432307224"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ŠCSS æ ¸å¿ƒæœºåˆ¶ä¸é€‰æ‹©å™¨å®æˆ˜ç²¾è¦ã€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4302802432307224/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é±¼é±¼å—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-09T16:27:58.000Z" title="Sun Nov 09 2025 16:27:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">CSS æ ¸å¿ƒæ¦‚å¿µä¸é€‰æ‹©å™¨</h2>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼ŒCSSï¼ˆå±‚å æ ·å¼è¡¨ï¼‰æ˜¯æ§åˆ¶ç½‘é¡µå¤–è§‚å’Œå¸ƒå±€çš„æ ¸å¿ƒæŠ€æœ¯ã€‚ä»¥ä¸‹æ˜¯æˆ‘æ•´ç†çš„çº¦ 2000 å­—çš„å­¦ä¹ ç¬”è®°ï¼Œæ¶µç›–æ ¸å¿ƒçŸ¥è¯†ç‚¹ä¸å®è·µä½“ä¼šã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€CSS åŸºç¡€ç»“æ„ï¼šå£°æ˜ä¸é€‰æ‹©å™¨</h3>
<p>CSS çš„æœ¬è´¨æ˜¯ä¸€ç»„<strong>å£°æ˜ï¼ˆdeclarationï¼‰</strong> ï¼Œæ¯ä¸ªå£°æ˜ç”±<strong>å±æ€§ï¼ˆpropertyï¼‰<strong>å’Œ</strong>å€¼ï¼ˆvalueï¼‰<strong>ç»„æˆï¼Œä¾‹å¦‚ <code>color: red;</code>ã€‚å¤šä¸ªå£°æ˜è¢«åŒ…è£¹åœ¨èŠ±æ‹¬å· <code>{}</code> ä¸­ï¼Œå½¢æˆä¸€ä¸ª</strong>å£°æ˜å—ï¼ˆdeclaration blockï¼‰</strong> ã€‚ä¸ºäº†è®©è¿™äº›æ ·å¼ä½œç”¨äºç‰¹å®šçš„ HTML å…ƒç´ ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨**é€‰æ‹©å™¨ï¼ˆselectorï¼‰**æ¥â€œé€‰ä¸­â€ç›®æ ‡å…ƒç´ ã€‚</p>
<p>ä¾‹å¦‚ï¼Œè‹¥æƒ³å°† <code>&lt;h1&gt;</code> æ ‡é¢˜è®¾ä¸ºè“è‰²ï¼Œå¯å†™ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">h1</span> { <span class="hljs-attribute">color</span>: blue; }
</code></pre>
<p>è¿™é‡Œ <code>h1</code> æ˜¯å…ƒç´ é€‰æ‹©å™¨ï¼Œ<code>{ color: blue; }</code> æ˜¯å£°æ˜å—ã€‚</p>
<hr/>
<h3 data-id="heading-2">äºŒã€é€‰æ‹©å™¨ä¼˜å…ˆçº§ï¼šä»ä½åˆ°é«˜</h3>
<p>CSS é€‰æ‹©å™¨å­˜åœ¨æ˜ç¡®çš„ä¼˜å…ˆçº§è§„åˆ™ï¼Œå†³å®šäº†å½“å¤šä¸ªè§„åˆ™ä½œç”¨äºåŒä¸€å…ƒç´ æ—¶ï¼Œè°æœ€ç»ˆç”Ÿæ•ˆã€‚ä¼˜å…ˆçº§æŒ‰â€œä¸ªåç™¾åƒâ€è®¡ç®—ï¼š</p>
<ul>
<li><strong>å…ƒç´ é€‰æ‹©å™¨ï¼ˆelementï¼‰</strong> ï¼šæƒé‡ 1ï¼ˆå¦‚ <code>p</code>ï¼‰</li>
<li><strong>ç±»é€‰æ‹©å™¨ï¼ˆclassï¼‰</strong> ï¼šæƒé‡ 10ï¼ˆå¦‚ <code>.highlight</code>ï¼‰</li>
<li><strong>ID é€‰æ‹©å™¨ï¼ˆidï¼‰</strong> ï¼šæƒé‡ 100ï¼ˆå¦‚ <code>#main</code>ï¼‰</li>
<li><strong>å†…è”æ ·å¼ï¼ˆinline styleï¼‰</strong> ï¼šæƒé‡ 1000ï¼ˆå¦‚ <code>&lt;div style="color:red"&gt;</code>ï¼‰</li>
<li><strong><code>!important</code></strong>ï¼šæœ€é«˜ä¼˜å…ˆçº§ï¼Œå¯è¦†ç›–ä¸€åˆ‡ï¼ˆä½†åº”æ…ç”¨ï¼‰</li>
</ul>
<p>ä¾‹å¦‚ï¼Œè‹¥åŒæ—¶å­˜åœ¨ï¼š</p>
<pre><code class="hljs language-css" lang="css"> <span class="hljs-selector-tag">p</span> {
      <span class="hljs-attribute">color</span>: blue;
  }  <span class="hljs-comment">/* æƒé‡ 1 */</span>
<span class="hljs-selector-class">.book</span> { 
<span class="hljs-attribute">color</span>: green; 
}       <span class="hljs-comment">/* æƒé‡ 10 */</span>
<span class="hljs-selector-id">#novel</span> {
<span class="hljs-attribute">color</span>: purple;
}     <span class="hljs-comment">/* æƒé‡ 100 */</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b509f55de194475baca3ad4b0d061c33~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bG86bG85Z2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763310477&amp;x-signature=Ojy6Yh8FsFvpDyALtuDDtfXGkos%3D" alt="image.png" loading="lazy"/>
åˆ™ ID é€‰æ‹©å™¨èƒœå‡ºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51830e7888a448faa948ac727bcb7fa7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bG86bG85Z2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763310477&amp;x-signature=Grzh5j8Nk9PvySKGVbXv8iO%2Bn74%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-3">ä¸‰ã€ä¼ªç±»ä¸ä¼ªå…ƒç´ ï¼šåŠ¨æ€ä¸è£…é¥°æ€§æ ·å¼</h3>
<h4 data-id="heading-4">ä¼ªç±»ï¼ˆPseudo-classesï¼‰</h4>
<p>ç”¨äºå®šä¹‰å…ƒç´ çš„<strong>ç‰¹æ®ŠçŠ¶æ€</strong>ï¼Œå¦‚ <code>:hover</code>ã€<code>:focus</code>ã€<code>:nth-child()</code> ç­‰ã€‚</p>
<ul>
<li><code>a:hover</code>ï¼šé¼ æ ‡æ‚¬åœé“¾æ¥æ—¶å˜è‰²</li>
<li><code>li:nth-child(odd)</code>ï¼šé€‰ä¸­å¥‡æ•°åˆ—è¡¨é¡¹</li>
<li><code>button:active</code>ï¼šæŒ‰é’®ç‚¹å‡»æ—¶æ ·å¼å˜åŒ–</li>
</ul>
<h4 data-id="heading-5">ä¼ªå…ƒç´ ï¼ˆPseudo-elementsï¼‰</h4>
<p>ç”¨äºåˆ›å»º<strong>ä¸å­˜åœ¨äº DOM ä¸­çš„å†…å®¹</strong>ï¼Œå¦‚ <code>::before</code>ã€<code>::after</code>ã€<code>::first-line</code>ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">p</span><span class="hljs-selector-pseudo">::first-line</span> { <span class="hljs-attribute">font-weight</span>: bold; }
<span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">::after</span> { <span class="hljs-attribute">content</span>: <span class="hljs-string">" â¡"</span>; }
</code></pre>
<p>æ³¨æ„ï¼šä¼ªå…ƒç´ ä½¿ç”¨åŒå†’å· <code>::</code>ï¼ˆCSS3 è§„èŒƒï¼‰ï¼Œä½†å•å†’å· <code>:</code> åœ¨æ—§æµè§ˆå™¨ä¸­ä»å…¼å®¹ã€‚</p>
<hr/>
<h3 data-id="heading-6">å››ã€<code>nth-child</code> ä¸ <code>nth-of-type</code> çš„åŒºåˆ«</h3>
<p>è¿™æ˜¯åˆå­¦è€…æ˜“æ··æ·†çš„ä¸€å¯¹é€‰æ‹©å™¨</p>
<ul>
<li><code>:nth-child(n)</code>ï¼šé€‰ä¸­<strong>çˆ¶å…ƒç´ ä¸‹ç¬¬ n ä¸ªå­å…ƒç´ </strong>ï¼Œæ— è®ºç±»å‹ã€‚</li>
<li><code>:nth-of-type(n)</code>ï¼šé€‰ä¸­<strong>çˆ¶å…ƒç´ ä¸‹ç¬¬ n ä¸ªåŒç±»å‹å…ƒç´ </strong>ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-css" lang="css">  <span class="hljs-comment">/* å­å…ƒç´ æœ‰ç‚¹ä¹±çš„æ—¶å€™ï¼Œnth-child æœ‰é—®é¢˜ */</span>
        <span class="hljs-selector-class">.container</span> <span class="hljs-selector-tag">p</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">1</span>){
            <span class="hljs-attribute">background-color</span>: yellow;
            <span class="hljs-attribute">color</span>: black;
        }
        <span class="hljs-comment">/* pæ ‡ç­¾åŒç±»å‹*/</span>
         <span class="hljs-selector-class">.container</span> <span class="hljs-selector-tag">p</span><span class="hljs-selector-pseudo">:nth-of-type</span>(<span class="hljs-number">3</span>){
            <span class="hljs-attribute">background-color</span>: yellow;
            <span class="hljs-attribute">color</span>: black;
        }
        
    &lt;/style&gt;
&lt;/head&gt;
&lt;<span class="hljs-selector-tag">body</span>&gt;
    &lt;<span class="hljs-selector-tag">div</span> class="container"&gt;
        &lt;<span class="hljs-selector-tag">h1</span>&gt;nth-child vs nth-of-type ç¤ºä¾‹&lt;/<span class="hljs-selector-tag">h1</span>&gt;
        &lt;<span class="hljs-selector-tag">p</span>&gt;è¿™æ˜¯ä¸€ä¸ªæ®µè½ã€‚&lt;/<span class="hljs-selector-tag">p</span>&gt;
    &lt;<span class="hljs-selector-tag">div</span>&gt;è¿™æ˜¯ä¸€ä¸ª<span class="hljs-selector-tag">div</span>ã€‚&lt;/<span class="hljs-selector-tag">div</span>&gt;
    &lt;<span class="hljs-selector-tag">p</span>&gt;è¿™æ˜¯ç¬¬äºŒä¸ªæ®µè½ã€‚&lt;/<span class="hljs-selector-tag">p</span>&gt;
    &lt;<span class="hljs-selector-tag">p</span>&gt;è¿™æ˜¯ç¬¬ä¸‰ä¸ªæ®µè½ã€‚&lt;/<span class="hljs-selector-tag">p</span>&gt;
    &lt;<span class="hljs-selector-tag">div</span>&gt;è¿™æ˜¯ç¬¬äºŒä¸ª<span class="hljs-selector-tag">div</span>ã€‚&lt;/<span class="hljs-selector-tag">div</span>&gt;
    &lt;/<span class="hljs-selector-tag">div</span>&gt;
</code></pre>
<ul>
<li><code>p:nth-child(1)</code>ï¼šä¸åŒ¹é…ï¼ˆç¬¬1ä¸ªå­å…ƒç´ æ˜¯h1ï¼Œä¸æ˜¯ pï¼‰</li>
<li><code>p:nth-of-type(3)</code>ï¼šåŒ¹é…â€œæ˜¯ç¬¬ä¸‰ä¸ªæ®µè½.â€ï¼ˆå®ƒæ˜¯ç¬¬3ä¸ª p å…ƒç´ ï¼‰</li>
</ul>
<p>ç†è§£è¿™ä¸€ç‚¹å¯¹ç²¾ç¡®æ§åˆ¶åˆ—è¡¨ã€è¡¨æ ¼ç­‰ç»“æ„è‡³å…³é‡è¦ã€‚</p>
<hr/>
<h3 data-id="heading-7">äº”ã€ç›’æ¨¡å‹ä¸ margin é‡å </h3>
<p>CSS ç›’æ¨¡å‹ç”± contentã€paddingã€borderã€margin ç»„æˆã€‚å…¶ä¸­ <strong>margin é‡å ï¼ˆmargin collapseï¼‰</strong> æ˜¯ä¸€ä¸ªç»å…¸é—®é¢˜ï¼š</p>
<ul>
<li><strong>å‚ç›´æ–¹å‘ä¸Šç›¸é‚»å—çº§å…ƒç´ çš„ margin ä¼šåˆå¹¶</strong>ï¼Œå–è¾ƒå¤§å€¼è€Œéç›¸åŠ ã€‚</li>
<li>ä¾‹å¦‚ä¸¤ä¸ªç›¸é‚» <code>&lt;p&gt;</code> å…ƒç´ ï¼Œä¸Š margin ä¸º 20pxï¼Œä¸‹ margin ä¸º 30pxï¼Œåˆ™å®é™…é—´è·ä¸º 30pxï¼Œè€Œé 50pxã€‚</li>
</ul>
<p>è§£å†³æ–¹æ³•åŒ…æ‹¬ï¼š</p>
<ul>
<li>ä½¿ç”¨ padding ä»£æ›¿éƒ¨åˆ† margin</li>
<li>åˆ›å»º BFCï¼ˆå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼‰ï¼Œå¦‚è®¾ç½® <code>overflow: hidden</code></li>
</ul>
<hr/>
<h3 data-id="heading-8">å…­ã€å•ä½ä¸åƒç´ å¤„ç†</h3>
<p>CSS æ”¯æŒå¤šç§é•¿åº¦å•ä½ï¼Œå…¶ä¸­ <strong>pxï¼ˆåƒç´ ï¼‰æ˜¯æœ€å¸¸ç”¨çš„ç»å¯¹å•ä½</strong>ã€‚ç°ä»£æµè§ˆå™¨å¯¹å°æ•° pxï¼ˆå¦‚ <code>10.5px</code>ï¼‰é€šå¸¸ä¼šå››èˆäº”å…¥æˆ–äºšåƒç´ æ¸²æŸ“ï¼Œä½†ä¸åŒè®¾å¤‡è¡¨ç°å¯èƒ½ä¸åŒã€‚å“åº”å¼è®¾è®¡ä¸­æ›´æ¨èä½¿ç”¨ç›¸å¯¹å•ä½ï¼ˆå¦‚ <code>em</code>ã€<code>rem</code>ã€<code>%</code>ã€<code>vw/vh</code>ï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-9">ä¸ƒã€å®šä½ä¸ display çš„äº¤äº’</h3>
<p><code>position: absolute</code> ä¼šä½¿å…ƒç´ è„±ç¦»æ–‡æ¡£æµï¼Œå¹¶ç›¸å¯¹äºæœ€è¿‘çš„<strong>é static å®šä½ç¥–å…ˆå…ƒç´ </strong>å®šä½ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š</p>
<ul>
<li><strong><code>inline</code> å…ƒç´ é»˜è®¤ä¸æ”¯æŒ <code>transform</code> å’ŒæŸäº›å®šä½å±æ€§</strong>ã€‚</li>
<li>è‹¥éœ€å¯¹è¡Œå†…å…ƒç´ åº”ç”¨ <code>transform</code> æˆ– <code>position: absolute</code>ï¼Œé€šå¸¸éœ€å…ˆå°†å…¶ <code>display</code> æ”¹ä¸º <code>inline-block</code> æˆ– <code>block</code>ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼Œè‹¥æœ‰ä¸€ä¸ª <code>&lt;span&gt;</code> éœ€è¦æ—‹è½¬ï¼Œå¿…é¡»ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">span</span> {
  <span class="hljs-attribute">display</span>: inline-block;
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">10deg</span>);
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d7f04ff95434b8abf836449cfebaa83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bG86bG85Z2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763310477&amp;x-signature=GawblfI0avcc3XB3MbPhZk5hsPo%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c858b2ed45bd49f79515e48367dfbbd0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bG86bG85Z2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763310477&amp;x-signature=er7w7AoawZBkqJuYuAx%2BBP4lEJs%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-10">å…«ã€å±‚å ï¼ˆCascadingï¼‰ä¸æ ·å¼æ¥æº</h3>
<p>CSS çš„â€œCâ€å³ Cascadingï¼ˆå±‚å ï¼‰ï¼ŒæŒ‡æ ·å¼å¦‚ä½•ä»å¤šä¸ªæ¥æºï¼ˆç”¨æˆ·ä»£ç†ã€ç”¨æˆ·ã€ä½œè€…ï¼‰åˆå¹¶ã€‚è§„åˆ™åŒ…æ‹¬ï¼š</p>
<ol>
<li>é‡è¦æ€§ï¼ˆ<code>!important</code>ï¼‰</li>
<li>æ¥æºï¼ˆä½œè€… &gt; ç”¨æˆ· &gt; æµè§ˆå™¨é»˜è®¤ï¼‰</li>
<li>ä¼˜å…ˆçº§ï¼ˆID &gt; class &gt; elementï¼‰</li>
<li>æºç é¡ºåºï¼ˆåå†™çš„è¦†ç›–å…ˆå†™çš„ï¼‰</li>
</ol>
<p>å› æ­¤ï¼Œè‰¯å¥½çš„ CSS æ¶æ„åº”é¿å…æ»¥ç”¨ <code>!important</code>ï¼Œè€Œé€šè¿‡åˆç†çš„é€‰æ‹©å™¨å±‚çº§å’Œæ¨¡å—åŒ–æ¥ç®¡ç†æ ·å¼ã€‚</p>
<hr/>
<h3 data-id="heading-11">ä¹ã€å®è·µå»ºè®®</h3>
<p>æˆ‘æ€»ç»“ä»¥ä¸‹æœ€ä½³å®è·µï¼š</p>
<ol>
<li><strong>è¯­ä¹‰åŒ– HTML + ç±»é€‰æ‹©å™¨</strong>ï¼šé¿å…è¿‡åº¦ä¾èµ– ID æˆ–æ ‡ç­¾é€‰æ‹©å™¨ã€‚</li>
<li><strong>æ…ç”¨ <code>!important</code></strong>ï¼šå®ƒä¼šç ´åå±‚å é€»è¾‘ï¼Œå¢åŠ ç»´æŠ¤æˆæœ¬ã€‚</li>
<li><strong>ç†è§£ç›’æ¨¡å‹</strong>ï¼šä½¿ç”¨ <code>box-sizing: border-box</code> å¯ç®€åŒ–å°ºå¯¸è®¡ç®—ã€‚</li>
<li><strong>æµ‹è¯•è·¨æµè§ˆå™¨è¡Œä¸º</strong>ï¼šå°¤å…¶æ¶‰åŠä¼ªå…ƒç´ ã€flex/grid å¸ƒå±€æ—¶ã€‚</li>
<li><strong>åˆ©ç”¨å¼€å‘è€…å·¥å…·</strong>ï¼šChrome DevTools å¯ç›´è§‚æŸ¥çœ‹é€‰æ‹©å™¨åŒ¹é…ä¸æ ·å¼è¦†ç›–æƒ…å†µã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-12">ç»“è¯­</h3>
<p>CSS è™½çœ‹ä¼¼ç®€å•ï¼Œä½†å…¶èƒŒåçš„å±‚å ã€ç»§æ‰¿ã€ç›’æ¨¡å‹ã€å®šä½æœºåˆ¶æ„æˆäº†å¤æ‚è€Œç²¾å¯†çš„ç³»ç»Ÿã€‚æŒæ¡é€‰æ‹©å™¨ä¼˜å…ˆçº§ã€ç†è§£ margin é‡å ã€åŒºåˆ†ä¼ªç±»ä¸ä¼ªå…ƒç´ ï¼Œæ˜¯å†™å‡ºå¥å£®ã€å¯ç»´æŠ¤æ ·å¼çš„åŸºçŸ³ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åº“å­˜é¢„æ‰£å‡ä¹‹åï¼Œç”¨æˆ·è®¢å•è¶…æ—¶ä¹‹åè¡¥å¿åº“å­˜çš„æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7570394530316795904</link>    <guid>https://juejin.cn/post/7570394530316795904</guid>    <pubDate>2025-11-10T03:38:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570394530316795904" data-draft-id="7570630923709890612" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åº“å­˜é¢„æ‰£å‡ä¹‹åï¼Œç”¨æˆ·è®¢å•è¶…æ—¶ä¹‹åè¡¥å¿åº“å­˜çš„æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-10T03:38:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ— åä¹‹è¾ˆJ"/> <meta itemprop="url" content="https://juejin.cn/user/3672818779437239"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åº“å­˜é¢„æ‰£å‡ä¹‹åï¼Œç”¨æˆ·è®¢å•è¶…æ—¶ä¹‹åè¡¥å¿åº“å­˜çš„æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3672818779437239/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ— åä¹‹è¾ˆJ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T03:38:13.000Z" title="Mon Nov 10 2025 03:38:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ–¹æ¡ˆä¸€ï¼šRedisçš„è¿‡æœŸç›‘å¬</h2>
<p>åœ¨redisé‡Œé¢ä¸­ï¼Œkeyå¯ä»¥è®¾è¿‡æœŸæ—¶é—´ï¼Œè¿™å°±ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæ€è·¯ï¼šæˆ‘ä»¬å¯ä»¥ç»™é¢„æ‰£å‡çš„åº“å­˜é”®è®¾ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œä½¿ç”¨redisçš„å‘å¸ƒè®¢é˜…æœºåˆ¶æ¥ç›‘å¬é”®è¿‡æœŸäº‹ä»¶ï¼Œä»è€Œè‡ªåŠ¨è§¦å‘å›å¢åº“å­˜çš„é€»è¾‘</p>
<p>åŠŸèƒ½ç›®æ ‡ï¼š</p>
<ul>
<li>ç›‘å¬ Redis ä¸­æ‰€æœ‰ä»¥Â <code>product:</code>Â å¼€å¤´çš„å•†å“ key çš„è¿‡æœŸäº‹ä»¶ã€‚</li>
<li>ä¸€æ—¦æŸä¸ªå•†å“ key è¿‡æœŸï¼ˆæ¯”å¦‚ç”¨æˆ·è¶…æ—¶æœªæ”¯ä»˜ï¼‰ï¼Œè‡ªåŠ¨æ‰§è¡Œåº“å­˜å›è¡¥ï¼ˆ<code>INCR</code>ï¼‰æ“ä½œã€‚</li>
</ul>

<pre><code class="hljs language-csharp" lang="csharp">js
 ä½“éªŒAIä»£ç åŠ©æ‰‹
 ä»£ç è§£è¯»
å¤åˆ¶ä»£ç 
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">RedissonStockExpiredListener</span> {

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> {
        
        <span class="hljs-comment">// æ¨¡æ‹Ÿé¢„æ‰£å‡åº“å­˜</span>
        String productKey = <span class="hljs-string">"product:1001:stock"</span>;
        RBatch batch = redisson.getBatch();
        batch.<span class="hljs-keyword">get</span>(productKey).setAsync(<span class="hljs-number">100L</span>);           <span class="hljs-comment">// åˆå§‹åŒ–åº“å­˜</span>
        batch.<span class="hljs-keyword">get</span>(productKey).decrementAsync();         <span class="hljs-comment">// é¢„æ‰£å‡</span>
        batch.<span class="hljs-keyword">get</span>(productKey).expireAsync(<span class="hljs-number">5</span>, TimeUnit.SECONDS); <span class="hljs-comment">// è®¾ç½®5ç§’è¿‡æœŸ</span>
        batch.execute();

        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"å·²é¢„æ‰£å‡åº“å­˜ï¼Œå¹¶è®¾ç½®5ç§’åè¿‡æœŸ"</span>);

        <span class="hljs-comment">// è®¢é˜… Redis çš„ key è¿‡æœŸäº‹ä»¶</span>
        RTopic topic = redisson.getTopic(<span class="hljs-string">"__keyevent@*:expired"</span>);
        topic.addListener(String.<span class="hljs-keyword">class</span>, <span class="hljs-keyword">new</span> MessageListener&lt;String&gt;() {
            @Override
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onMessage</span>(<span class="hljs-params">CharSequence channel, String key</span>)</span> {
                System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"ç›‘å¬åˆ° key è¿‡æœŸï¼š"</span> + key);

                <span class="hljs-keyword">if</span> (key != <span class="hljs-literal">null</span> &amp;&amp; key.startsWith(<span class="hljs-string">"product:"</span>)) {
                    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"å¤„ç†å•†å“ key è¿‡æœŸï¼Œå‡†å¤‡è¡¥å¿åº“å­˜..."</span>);

                    <span class="hljs-comment">// è¡¥å¿åº“å­˜ï¼šINCR</span>
                    RAtomicLong stock = redisson.getAtomicLong(key);
                    <span class="hljs-built_in">long</span> newStock = stock.incrementAndGet(); <span class="hljs-comment">// INCR</span>
                    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"åº“å­˜å·²è¡¥å¿ï¼Œå½“å‰åº“å­˜ï¼š"</span> + newStock);
                } <span class="hljs-keyword">else</span> {
                    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"å¿½ç•¥éå•†å“ keyï¼š"</span> + key);
                }
            }
        });

        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"æ­£åœ¨ç›‘å¬ Redis key è¿‡æœŸäº‹ä»¶..."</span>);
    }
}
</code></pre>
<p>ä¼˜ç‚¹æ˜¯å®æ—¶æ€§å¼ºï¼Œå¯¹è¦æ±‚å®æ—¶æ€§é«˜çš„ä¸šåŠ¡æ¯”è¾ƒå‹å¥½ï¼Œå¦‚æŠ¢ç¥¨ç­‰ã€‚ç¼ºç‚¹æ˜¯è¿‡äºä¾é Redisï¼Œé£é™©ä¸èƒ½åˆ†æ‘Šã€‚ä¸”å®¹æ˜“é€ æˆå¤§é‡è¿‡æœŸKeyé—®é¢˜ï¼Œå½±å“æ€§èƒ½ã€‚</p>
<h2 data-id="heading-1">æ–¹æ¡ˆäºŒï¼šRedisçš„å»¶æ—¶é˜Ÿåˆ—</h2>
<p>æˆ‘ä»¬å¯ä»¥åŸºäºRedisçš„Sorted Setæ•°æ®ç±»å‹æ¥åšä¸€ä¸ªå»¶æ—¶é˜Ÿåˆ—ï¼Œé€šè¿‡scoreæ¥è¿›è¡Œæ’åºï¼Œæˆ‘ä»¬æœåŠ¡ç«¯ä¸‹å•æ—¶åœ¨å½“å‰æ—¶é—´åŠ ä¸Šè¶…æ—¶æ—¶é—´ï¼Œå°†è®¢å•IDæ”¾å…¥è¿›å»ï¼Œé€šè¿‡å®šæ—¶ä»»åŠ¡æ¥å®šé‡æ‹¿å–è¶…æ—¶è®¢å•è¿›è¡Œå–æ¶ˆè®¢å•+è¡¥å¿åº“å­˜ã€‚</p>
<p><strong>æ·»åŠ è®¢å•åˆ°å»¶æ—¶é˜Ÿåˆ—</strong></p>
<ul>
<li>å½“ç”¨æˆ·ä¸‹å•ä½†æœªæ”¯ä»˜æ—¶ï¼Œè®¡ç®—å‡ºè®¢å•çš„è¶…æ—¶æ—¶é—´ï¼ˆä¾‹å¦‚ï¼šå½“å‰æ—¶é—´ + 30 åˆ†é’Ÿï¼‰ï¼Œç„¶åå°†è®¢å• ID ä»¥è¿™ä¸ªæ—¶é—´ä¸º score æ·»åŠ åˆ° Redis Sorted Set ä¸­ã€‚</li>
</ul>

<pre><code class="hljs language-ini" lang="ini">js
 ä½“éªŒAIä»£ç åŠ©æ‰‹
 ä»£ç è§£è¯»
å¤åˆ¶ä»£ç 
RScoredSortedSet&lt;String&gt; <span class="hljs-attr">delayedQueue</span> = redisson.getScoredSortedSet(<span class="hljs-string">"delayed:order:queue"</span>)<span class="hljs-comment">;</span>
long <span class="hljs-attr">timeoutTime</span> = System.currentTimeMillis() + TimeUnit.MINUTES.toMillis(<span class="hljs-number">30</span>)<span class="hljs-comment">; // 30åˆ†é’Ÿåè¶…æ—¶</span>
delayedQueue.add(timeoutTime, orderId)<span class="hljs-comment">;</span>
</code></pre>
<p><strong>å®šæ—¶ä»»åŠ¡æ£€æŸ¥å¹¶å¤„ç†è¶…æ—¶è®¢å•</strong></p>
<ul>
<li>å®šæœŸè¿è¡Œä¸€ä¸ªåå°ä»»åŠ¡ï¼Œä½¿ç”¨Â <code>ZRANGEBYSCORE</code>Â è·å–æ‰€æœ‰å·²ç»åˆ°æœŸçš„è®¢å•ï¼ˆå³ score å°äºç­‰äºå½“å‰æ—¶é—´æˆ³çš„æ‰€æœ‰è®¢å•ï¼‰ã€‚</li>
<li>å¯¹äºæ¯ä¸ªæ‰¾åˆ°çš„è®¢å•ï¼Œæ‰§è¡Œå–æ¶ˆè®¢å•å’Œè¡¥å¿åº“å­˜çš„æ“ä½œï¼Œå¹¶ä» Sorted Set ä¸­ç§»é™¤è¿™äº›è®¢å•ã€‚</li>
</ul>

<pre><code class="hljs language-scss" lang="scss">js
 ä½“éªŒAIä»£ç åŠ©æ‰‹
 ä»£ç è§£è¯»
å¤åˆ¶ä»£ç 
long currentTime = System<span class="hljs-selector-class">.currentTimeMillis</span>();
Collection&lt;String&gt; expiredOrders = delayedQueue<span class="hljs-selector-class">.valueRange</span>(<span class="hljs-number">0</span>, true, currentTime, false);
for (String orderId : expiredOrders) {
    try {
        <span class="hljs-comment">// æ‰§è¡Œå–æ¶ˆè®¢å•é€»è¾‘</span>
        <span class="hljs-built_in">cancelOrder</span>(orderId);

        <span class="hljs-comment">// è¡¥å¿åº“å­˜é€»è¾‘</span>
        <span class="hljs-built_in">restoreStock</span>(orderId);
        
        <span class="hljs-comment">// ä»å»¶è¿Ÿé˜Ÿåˆ—ä¸­åˆ é™¤è¯¥è®¢å•</span>
        delayedQueue<span class="hljs-selector-class">.remove</span>(orderId);
    } catch (Exception e) {
        <span class="hljs-comment">// å¼‚å¸¸å¤„ç†</span>
        logger<span class="hljs-selector-class">.error</span>("å¤„ç†è¶…æ—¶è®¢å•å¤±è´¥: {}", orderId, e);
    }
}
</code></pre>
<p>æ–¹æ¡ˆä¼˜ç‚¹å’Œæ–¹æ¡ˆä¸€å·®ä¸å¤šï¼Œå®æ—¶æ€§å¥½å»¶è¿Ÿå°ï¼Œä½†æ˜¯å°±æ˜¯è¿‡äºä¾é Redisï¼Œæœ‰æ•°æ®ä¸¢å¤±çš„é£é™©ã€‚è€Œä¸”Redisæ˜¯åŸºäºå†…å­˜çš„ï¼Œå¦‚æœè¶…æ—¶è®¢å•è¿‡å¤šå¯¹Rediså‹åŠ›è¿‡å¤§ï¼Œå®¹æ˜“æŒ‚æœºã€‚</p>
<h2 data-id="heading-2">æ–¹æ¡ˆä¸‰ï¼šMQçš„å»¶æ—¶æ¶ˆæ¯</h2>
<p>ç”¨æˆ·ä¸‹å•ä¹‹åï¼Œç”Ÿäº§è€…å°†è®¾ç½®å¥½æ—¶é—´çš„æ¶ˆæ¯å‘é€ç»™brokerï¼Œç­‰åˆ°è§„å®šçš„æ¶ˆæ¯ä¹‹åï¼Œè¯¥æ¶ˆæ¯æ‰å¯¹æ¶ˆè´¹è€…å¯è§ï¼Œbrokerå‘é€ç›¸åº”æ¶ˆæ¯ç»™æ¶ˆè´¹è€…ï¼Œæ¶ˆè´¹è€…æ‰§è¡Œè®¢å•å–æ¶ˆ+åº“å­˜è¡¥å¿é€»è¾‘å³å¯ï¼ˆæ¶ˆæ¯é‡è¯•æœºåˆ¶ä¿è¯æ¶ˆè´¹è€…ä¸€å®šå¯ä»¥æ¶ˆè´¹ï¼‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f20b82d53182420583bd9a1ade5a2e37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg5ZCN5LmL6L6ISg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350693&amp;x-signature=LBpBoW9awcOW2Fy3aSbfHnPj0qg%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ç”Ÿäº§è€…ï¼šç”¨æˆ·ä¸‹å•åå‘é€å»¶æ—¶æ¶ˆæ¯</strong></p>
<pre><code class="hljs language-java" lang="java">js
 ä½“éªŒAIä»£ç åŠ©æ‰‹
 ä»£ç è§£è¯»
å¤åˆ¶ä»£ç 
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RocketMQTemplate rocketMQTemplate;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">OrderService</span><span class="hljs-params">(RocketMQTemplate rocketMQTemplate)</span> {
        <span class="hljs-built_in">this</span>.rocketMQTemplate = rocketMQTemplate;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">(String orderId, String productKey)</span> {
        <span class="hljs-comment">// 1. åˆ›å»ºè®¢å•ï¼ˆä¼ªä»£ç ï¼‰</span>
        System.out.println(<span class="hljs-string">"åˆ›å»ºè®¢å•ï¼š"</span> + orderId);

        <span class="hljs-comment">// 2. é¢„æ‰£å‡åº“å­˜ï¼ˆå‡è®¾ç”¨ Redissonï¼‰</span>
        <span class="hljs-comment">// RAtomicLong stock = redisson.getAtomicLong(productKey);</span>
        <span class="hljs-comment">// stock.decrementAndGet();</span>

        <span class="hljs-comment">// 3. å‘é€å»¶è¿Ÿæ¶ˆæ¯ï¼Œlevel=15 å¯¹åº” 30åˆ†é’Ÿ</span>
        <span class="hljs-type">OrderTimeoutMessage</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderTimeoutMessage</span>(orderId, productKey);
        rocketMQTemplate.convertAndSend(<span class="hljs-string">"ORDER_TIMEOUT_TOPIC"</span>, message, <span class="hljs-literal">null</span>, <span class="hljs-number">15</span>); <span class="hljs-comment">// level=15</span>
        System.out.println(<span class="hljs-string">"å·²å‘é€å»¶è¿Ÿæ¶ˆæ¯ï¼Œ30åˆ†é’Ÿåå¤„ç†è®¢å•ï¼š"</span> + orderId);
    }
}
</code></pre>
<p><strong>æ¶ˆè´¹è€…ï¼šç›‘å¬å¹¶å¤„ç†è¶…æ—¶è®¢å•</strong></p>
<pre><code class="hljs language-typescript" lang="typescript">js
 ä½“éªŒ<span class="hljs-variable constant_">AI</span>ä»£ç åŠ©æ‰‹
 ä»£ç è§£è¯»
å¤åˆ¶ä»£ç 
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@RocketMQMessageListener</span>(topic = <span class="hljs-string">"ORDER_TIMEOUT_TOPIC"</span>, consumerGroup = <span class="hljs-string">"order-timeout-group"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderTimeoutConsumer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">RocketMQListener</span>&lt;<span class="hljs-title class_">OrderTimeoutMessage</span>&gt; {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">onMessage</span>(<span class="hljs-params">OrderTimeoutMessage message</span>) {
        <span class="hljs-title class_">String</span> orderId = message.<span class="hljs-property">orderId</span>;
        <span class="hljs-title class_">String</span> productKey = message.<span class="hljs-property">productKey</span>;
        long expectedExpireTime = message.<span class="hljs-property">timestamp</span> + <span class="hljs-title class_">TimeUnit</span>.<span class="hljs-property">MINUTES</span>.<span class="hljs-title function_">toMillis</span>(<span class="hljs-number">30</span>);

        <span class="hljs-comment">// 1. åˆ¤æ–­æ˜¯å¦å·²ç»è¿‡æœŸï¼ˆé˜²æ­¢é‡å¤æ¶ˆè´¹æˆ–æå‰æ¶ˆè´¹ï¼‰</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">System</span>.<span class="hljs-title function_">currentTimeMillis</span>() &lt; expectedExpireTime) {
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"æ¶ˆæ¯å°šæœªåˆ°æœŸï¼Œè·³è¿‡å¤„ç†ï¼š"</span> + orderId);
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-comment">// 2. æŸ¥è¯¢è®¢å•çŠ¶æ€ï¼ˆä¼ªä»£ç ï¼‰</span>
        <span class="hljs-built_in">boolean</span> paid = <span class="hljs-title function_">checkIfOrderPaid</span>(orderId);
        <span class="hljs-keyword">if</span> (paid) {
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"è®¢å•å·²æ”¯ä»˜ï¼Œæ— éœ€å¤„ç†ï¼š"</span> + orderId);
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-comment">// 3. æœªæ”¯ä»˜ â†’ å–æ¶ˆè®¢å• + è¡¥å¿åº“å­˜</span>
        <span class="hljs-title function_">cancelOrder</span>(orderId);
        <span class="hljs-title function_">restoreStock</span>(productKey);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">checkIfOrderPaid</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> orderId</span>) {
        <span class="hljs-comment">// æŸ¥è¯¢æ•°æ®åº“åˆ¤æ–­æ˜¯å¦å·²æ”¯ä»˜ï¼ˆä¼ªé€»è¾‘ï¼‰</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// å‡è®¾æœªæ”¯ä»˜</span>
    }

    <span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">cancelOrder</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> orderId</span>) {
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å–æ¶ˆè®¢å•ï¼š"</span> + orderId);
        <span class="hljs-comment">// å®é™…æ“ä½œï¼šæ›´æ–°è®¢å•çŠ¶æ€ä¸ºå·²å–æ¶ˆ</span>
    }

    <span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">restoreStock</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> productKey</span>) {
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"è¡¥å¿åº“å­˜ï¼š"</span> + productKey);
        <span class="hljs-comment">// å®é™…æ“ä½œï¼šINCR productKey</span>
        <span class="hljs-comment">// RAtomicLong stock = redisson.getAtomicLong(productKey);</span>
        <span class="hljs-comment">// stock.incrementAndGet();</span>
    }
}
</code></pre>
<p>RocketMQæ˜¯5.xçš„ç‰ˆæœ¬å°±å¯ä»¥æ”¯æŒä»»æ„æ—¶åˆ»çš„å»¶æ—¶æ¶ˆæ¯äº†ï¼Œå¦åˆ™å°±æ˜¯å¯¹åº”çº§åˆ«çš„å»¶æ—¶æ¶ˆæ¯ã€‚</p>
<p>ä¼˜ç‚¹æ˜¯é«˜å¹¶å‘æ€§èƒ½å¥½ï¼Œè€Œä¸”å¤„ç†æ¶ˆæ¯ä¸¢å¤±ç­‰æ–¹æ¡ˆæˆç†Ÿã€‚ç¼ºç‚¹å°±æ˜¯ç³»ç»Ÿæ¶æ„æ›´åŠ å¤æ‚äº†ï¼Œéœ€è¦å¤„ç†MQçš„å…¶ä»–é—®é¢˜ï¼Œç»´æŠ¤æˆæœ¬å˜é«˜äº†ã€‚</p>
<h2 data-id="heading-3">æ–¹æ¡ˆå››ï¼šåˆ†å¸ƒå¼å®šæ—¶ä»»åŠ¡è°ƒåº¦æ¡†æ¶</h2>
<p>ä½¿ç”¨åˆ†å¸ƒå¼å®šæ—¶ä»»åŠ¡è°ƒåº¦æ¡†æ¶ï¼Œæ¯”å¦‚<strong>xxl-job æˆ– Quartz</strong>æ˜¯ä¼ä¸šé‡Œé¢éå¸¸å¸¸è§çš„æ–¹æ¡ˆã€‚ç”¨æˆ·ä¸‹å•ä¹‹åï¼Œæˆ‘ä»¬åœ¨æ•°æ®åº“é‡Œé¢è®°å½•è®¢å•çŠ¶æ€ä¸ºâ€œå¾…æ”¯ä»˜â€ï¼Œç„¶åé€šè¿‡xxl-jobå®šæœŸæ‰«æè¿‡æœŸçš„è®¢å•ï¼Œç­›é€‰å‡ºè¶…æ—¶æœªæ”¯ä»˜çš„è®¢å•ï¼Œè¿›è¡Œå–æ¶ˆè®¢å•+è¡¥å¿åº“å­˜ã€‚</p>
<pre><code class="hljs language-java" lang="java">js
 ä½“éªŒAIä»£ç åŠ©æ‰‹
 ä»£ç è§£è¯»
å¤åˆ¶ä»£ç 
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderTimeoutJobHandler</span> {

    <span class="hljs-meta">@XxlJob("orderTimeoutJob")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">orderTimeoutJob</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        XxlJobLogger.log(<span class="hljs-string">"å¼€å§‹æ‰§è¡Œè¶…æ—¶è®¢å•æ£€æµ‹ä»»åŠ¡..."</span>);

        <span class="hljs-comment">// 1. è·å–å½“å‰æ—¶é—´</span>
        <span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">now</span> <span class="hljs-operator">=</span> LocalDateTime.now();

        <span class="hljs-comment">// 2. æŸ¥è¯¢æ‰€æœ‰ timeout_time &lt;= now ä¸” status = 0 çš„è®¢å•</span>
        List&lt;Order&gt; expiredOrders = orderMapper.findExpiredOrders(now);

        <span class="hljs-keyword">for</span> (Order order : expiredOrders) {
            <span class="hljs-comment">// 3. åŠ é”é˜²æ­¢å¹¶å‘å¤„ç†åŒä¸€è®¢å•ï¼ˆå¯é€‰ Redis åˆ†å¸ƒå¼é”ï¼‰</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">locked</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().setIfAbsent(
                <span class="hljs-string">"lock:order:"</span> + order.getId(), <span class="hljs-string">"locked"</span>, <span class="hljs-number">5</span>, TimeUnit.MINUTES);

            <span class="hljs-keyword">if</span> (!locked) {
                <span class="hljs-keyword">continue</span>; <span class="hljs-comment">// å·²è¢«å…¶ä»–èŠ‚ç‚¹å¤„ç†</span>
            }

            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// 4. å†æ¬¡ç¡®è®¤æ˜¯å¦å·²æ”¯ä»˜ï¼ˆé˜²æ­¢å¹¶å‘é—®é¢˜ï¼‰</span>
                <span class="hljs-type">Order</span> <span class="hljs-variable">updatedOrder</span> <span class="hljs-operator">=</span> orderMapper.selectById(order.getId());
                <span class="hljs-keyword">if</span> (updatedOrder.getStatus() != <span class="hljs-number">0</span>) {
                    <span class="hljs-keyword">continue</span>;
                }

                <span class="hljs-comment">// 5. æ›´æ–°è®¢å•çŠ¶æ€ä¸ºâ€œå·²å–æ¶ˆâ€</span>
                orderMapper.updateStatus(order.getId(), <span class="hljs-number">2</span>);

                <span class="hljs-comment">// 6. è¡¥å¿åº“å­˜ï¼ˆå¦‚ä½¿ç”¨ Redissonï¼‰</span>
                <span class="hljs-type">RAtomicLong</span> <span class="hljs-variable">stock</span> <span class="hljs-operator">=</span> redisson.getAtomicLong(order.getProductKey());
                stock.incrementAndGet();

                XxlJobLogger.log(<span class="hljs-string">"å·²å–æ¶ˆè®¢å•ï¼š"</span> + order.getId() + <span class="hljs-string">"ï¼Œè¡¥å¿åº“å­˜ï¼š"</span> + order.getProductKey());

            } <span class="hljs-keyword">finally</span> {
                <span class="hljs-comment">// 7. é‡Šæ”¾é”</span>
                redisTemplate.delete(<span class="hljs-string">"lock:order:"</span> + order.getId());
            }
        }
    }
}
</code></pre>
<h2 data-id="heading-4">é‡å¤è¡¥å¿åº“å­˜é—®é¢˜</h2>
<p>ç”±äºç½‘ç»œå»¶è¿Ÿæˆ–è€…ç½‘ç»œåˆ†åŒºï¼Œåˆæˆ–è€…æ˜¯RedisæœåŠ¡å™¨é—®é¢˜ï¼Œè¿˜æœ‰å¹¶å‘é—®é¢˜ç­‰ï¼Œæœ‰å¯èƒ½ä¼šå¯¼è‡´é‡å¤è¡¥å¿åº“å­˜çš„æƒ…å†µï¼Œé‚£ä¹ˆè¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ</p>
<p><strong>1.ä½¿ç”¨åˆ†å¸ƒå¼é”</strong></p>
<ul>
<li>åœ¨æ‰§è¡Œåº“å­˜è¡¥å¿ä¹‹å‰ï¼Œå°è¯•è·å–ä¸€ä¸ªé’ˆå¯¹ç‰¹å®šå•†å“ ID çš„åˆ†å¸ƒå¼é”ã€‚åªæœ‰æˆåŠŸè·å–é”çš„è¿›ç¨‹æ‰èƒ½æ‰§è¡Œè¡¥å¿æ“ä½œã€‚è¿™æ ·å¯ä»¥é˜²æ­¢å¤šä¸ªå®ä¾‹åŒæ—¶å¤„ç†åŒä¸€ä¸ªè¿‡æœŸäº‹ä»¶ã€‚</li>
<li>ç¤ºä¾‹ä»£ç ç‰‡æ®µï¼š</li>
</ul>

<pre><code class="hljs language-csharp" lang="csharp">js
 ä½“éªŒAIä»£ç åŠ©æ‰‹
 ä»£ç è§£è¯»
å¤åˆ¶ä»£ç 
RLock <span class="hljs-keyword">lock</span> = redisson.getLock(<span class="hljs-string">"lock:product:"</span> + productId);
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">lock</span>.tryLock()) {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// æ‰§è¡Œåº“å­˜è¡¥å¿é€»è¾‘</span>
    } <span class="hljs-keyword">finally</span> {
        <span class="hljs-keyword">lock</span>.unlock();
    }
}
</code></pre>
<p><strong>2.çŠ¶æ€æ ‡è®°</strong></p>
<ul>
<li>åœ¨è¡¥å¿åº“å­˜åï¼Œç»™å¯¹åº”çš„ key æ·»åŠ ä¸€ä¸ªç‰¹æ®Šçš„æ ‡è¯†ï¼ˆå¦‚Â <code>compensated</code>Â æ ‡è®°ï¼‰ã€‚ä¸‹æ¬¡å†é‡åˆ°è¯¥ key è¿‡æœŸæ—¶ï¼Œå…ˆæ£€æŸ¥æ˜¯å¦å­˜åœ¨è¿™ä¸ªæ ‡è®°ã€‚å¦‚æœå­˜åœ¨ï¼Œåˆ™è·³è¿‡è¡¥å¿æ­¥éª¤ã€‚</li>
<li>ç¤ºä¾‹ä»£ç ç‰‡æ®µï¼š</li>
</ul>

<pre><code class="hljs language-arduino" lang="arduino">js
 ä½“éªŒAIä»£ç åŠ©æ‰‹
 ä»£ç è§£è¯»
å¤åˆ¶ä»£ç 
<span class="hljs-keyword">if</span> (!redissonMap.<span class="hljs-built_in">containsKey</span>(productId + <span class="hljs-string">":compensated"</span>)) {
    <span class="hljs-comment">// æ‰§è¡Œåº“å­˜è¡¥å¿é€»è¾‘</span>
    redissonMap.<span class="hljs-built_in">put</span>(productId + <span class="hljs-string">":compensated"</span>, <span class="hljs-literal">true</span>);
}
</code></pre>
<p><strong>3.å»¶è¿Ÿé˜Ÿåˆ—ç»“åˆå®šæ—¶ä»»åŠ¡</strong></p>
<p>åˆšæ‰æ–¹æ¡ˆäºŒå°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°†éœ€è¦è¡¥å¿çš„è®¢å•ä¿¡æ¯æ”¾å…¥å»¶è¿Ÿé˜Ÿåˆ—ä¸­ï¼Œå¹¶è®¾ç½®é€‚å½“çš„å»¶è¿Ÿæ—¶é—´ã€‚é€šè¿‡åå°å®šæ—¶ä»»åŠ¡ç»Ÿä¸€å¤„ç†è¿™äº›è®¢å•ï¼Œç¡®ä¿æ¯ä¸ªè®¢å•åªè¢«å¤„ç†ä¸€æ¬¡ã€‚</p>
<p><strong>4.æ•°æ®åº“å”¯ä¸€çº¦æŸ</strong></p>
<p>é€šè¿‡å»ºç«‹è¡¥å¿åº“å­˜è¡¨ï¼Œä¸šåŠ¡å’Œè®¢å•idä½œä¸ºå”¯ä¸€ç´¢å¼•ï¼Œæ¯æ¬¡è¡¥å¿ä¹‹å‰å°è¯•æ˜¯å¦å¯ä»¥æ’å…¥è¯¥è¡¨ï¼Œå¯ä»¥åˆ™è¡¥å¿ï¼Œåä¹‹åˆ™è·³è¿‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘åœ¨ Mac ç”¨ä¸€è¡Œè„šæœ¬å¾æœäº† 5TB NTFSï¼šæ‹’ç»ä»˜è´¹ï¼Œå½»åº•æå®šå…è´¹æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7570394530316025856</link>    <guid>https://juejin.cn/post/7570394530316025856</guid>    <pubDate>2025-11-10T01:42:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570394530316025856" data-draft-id="7570162891141824527" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘åœ¨ Mac ç”¨ä¸€è¡Œè„šæœ¬å¾æœäº† 5TB NTFSï¼šæ‹’ç»ä»˜è´¹ï¼Œå½»åº•æå®šå…è´¹æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="macOS,Mac"/> <meta itemprop="datePublished" content="2025-11-10T01:42:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åš´å¯’"/> <meta itemprop="url" content="https://juejin.cn/user/3597257779474941"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘åœ¨ Mac ç”¨ä¸€è¡Œè„šæœ¬å¾æœäº† 5TB NTFSï¼šæ‹’ç»ä»˜è´¹ï¼Œå½»åº•æå®šå…è´¹æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3597257779474941/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åš´å¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T01:42:29.000Z" title="Mon Nov 10 2025 01:42:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    12
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:18px;overflow-x:hidden;color:#333}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:40px;margin-bottom:20px;color:#007fff;display:flex;align-items:center}.markdown-body h1:hover:before,.markdown-body h2:hover:before,.markdown-body h3:hover:before,.markdown-body h4:hover:before,.markdown-body h5:hover:before,.markdown-body h6:hover:before{transition:All .4s ease-in-out;transform:rotate(1turn)}.markdown-body h1{font-size:30px;background:linear-gradient(#fff 60%,#c6e3ff 0)}.markdown-body h1:before{content:"";display:inline-block;width:32px;height:32px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h2{font-size:24px;background:linear-gradient(#fff 60%,#cce3fb 0)}.markdown-body h2:before{content:"";display:inline-block;width:24px;height:24px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h3{font-size:20px}.markdown-body h3:before{content:"";display:inline-block;width:18px;height:18px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h4{font-size:18px}.markdown-body h4:before{content:"";display:inline-block;width:16px;height:16px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h5{font-size:16px}.markdown-body h5:before{content:"";display:inline-block;width:15px;height:15px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h6{font-size:14px}.markdown-body h6:before{content:"";display:inline-block;width:12px;height:12px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{border-bottom:2px solid #007fff;color:#007fff;padding-right:10px}.markdown-body p{letter-spacing:1px;line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:10px auto}.markdown-body hr{border:none;border-top:1px dashed #92c8ff}.markdown-body hr:before{content:"âœ‚";display:inline-block;position:relative;top:-12px;left:40px;padding:0 3px;color:#007fff;font-size:18px}.markdown-body hr:after{content:"æŒ‰è™šçº¿å‰ªå¼€";position:relative;top:-15px;left:84%;padding:0 3px;color:#007fff;font-size:12px}.markdown-body del{color:#f44}.markdown-body em{color:#007fff;margin:0 2px}.markdown-body strong{color:#007fff;font-weight:bolder}.markdown-body code{word-break:break-word;border-radius:4px;overflow-x:auto;background-color:#e6f3ff;color:#007fff;font-weight:600;font-size:16px;padding:.065em .4em;border:1px solid #007fff}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:5px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:18px;font-weight:400;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8;border:none}.markdown-body a{text-decoration:none;color:#007fff;border-bottom:1px solid #007fff}.markdown-body a:before{content:"Â¶";margin-right:5px;font-size:22px}.markdown-body a:after{content:"â†·";margin-left:2px;font-size:22px;display:none}.markdown-body a:active,.markdown-body a:hover{color:#275b8c;border-bottom:1px solid #275b8c}.markdown-body a:active:after,.markdown-body a:hover:after{display:inline-block}.markdown-body table{display:inline-block!important;font-size:16px;width:auto;max-width:100%;overflow:auto;border:1px solid #a5d3ff}.markdown-body thead{background:#c6e3ff;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#eef7ff}.markdown-body tbody&gt;tr:nth-child(odd){background-color:#f8fcff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #007fff;background-color:#eef7ff}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#007fff}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="srcery">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1c1b19;color:#fce8c3}.hljs-emphasis,.hljs-strong{color:#918175}.hljs-bullet,.hljs-link,.hljs-literal,.hljs-number,.hljs-quote,.hljs-regexp{color:#ff5c8f}.hljs-code,.hljs-selector-class{color:#68a8e4}.hljs-emphasis{font-style:italic}.hljs-attribute,.hljs-keyword,.hljs-section,.hljs-selector-tag,.hljs-variable{color:#ef2f27}.hljs-name,.hljs-title{color:#fbb829}.hljs-params,.hljs-type{color:#0aaeb3}.hljs-string{color:#98bc37}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-selector-attr,.hljs-selector-id,.hljs-selector-pseudo,.hljs-subst,.hljs-symbol,.hljs-template-tag,.hljs-template-variable{color:#c07abe}.hljs-comment,.hljs-deletion,.hljs-meta{color:#918175}</style><h2 data-id="heading-0">ğŸ§© å‰è¨€ï¼šä»â€œåªè¯»â€åˆ°â€œå¾æœâ€</h2>
<p>é‚£å¤©ä¸‹åˆï¼Œæˆ‘æ’ä¸Šé‚£å— 5TB çš„ç§»åŠ¨ç¡¬ç›˜ï¼ŒFinder ä¸€è„¸å†·æ¼ ã€‚æ–‡ä»¶æ˜¯ç°è‰²çš„ï¼Œå³é”®èœå•ä¹Ÿæ²¡â€œåˆ é™¤â€é€‰é¡¹â€”â€”æˆ‘åªèƒ½â€œçœ‹â€ï¼Œä¸èƒ½â€œåŠ¨â€ã€‚</p>
<p>é‚£ä¸€åˆ»ï¼Œæˆ‘ç¬¬ä¸€æ¬¡è®¤çœŸåœ°ç†è§£äº†ï¼š<strong>macOS å¯¹ NTFS æ˜¯åªè¯»çš„ã€‚</strong></p>
<p>æˆ‘ä¸Šç½‘ä¸€æœï¼Œâ€œNTFS for Macâ€ çš„ç»“æœé“ºå¤©ç›–åœ°ï¼Œå‡ ä¹æ¸…ä¸€è‰²éƒ½æ˜¯æ”¶è´¹è½¯ä»¶ï¼šParagonã€Tuxeraã€iBoySoftâ€¦â€¦</p>
<p><strong>ï¿¥199ã€ï¿¥299ã€ï¿¥399ã€‚</strong></p>
<p>æˆ‘å¿ƒæƒ³ï¼šåªæ˜¯å†™ä¸ªæ–‡ä»¶ï¼Œè¿˜å¾—ä»˜é’±ï¼Ÿ</p>
<p>äºæ˜¯æˆ‘å†³å®šè‡ªå·±åŠ¨æ‰‹ã€‚è¿™ä¸€ä¸‹åˆï¼Œæˆ‘ç”¨ä¸€è¡Œè„šæœ¬ï¼Œæå®šäº† Mac å¯¹ NTFS çš„å…¨é¢è¯»å†™ã€‚</p>
<hr/>
<h2 data-id="heading-1">âš™ï¸ ç¬¬ä¸€æ¬¡å°è¯•ï¼šbrew install ntfs-3g</h2>
<p>æˆ‘æ‰“å¼€ç»ˆç«¯ï¼Œä¿¡å¿ƒæ»¡æ»¡åœ°æ•²ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">brew install ntfs-3g
</code></pre>
<p>ç»“æœç»ˆç«¯ç”©æˆ‘ä¸€å¥ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">Linux <span class="hljs-keyword">is</span> required <span class="hljs-keyword">for</span> <span class="hljs-keyword">this</span> software.
</code></pre>
<p>ï¼Ÿï¼Ÿï¼Ÿè¿™å•¥æ„æ€ï¼Ÿæˆ‘åˆä¸æ˜¯åœ¨ç”¨ Linuxã€‚</p>
<p>æŸ¥äº†èµ„æ–™æ‰çŸ¥é“ï¼šä» macOS Big Sur å¼€å§‹ï¼ŒApple æ”¹äº†æ–‡ä»¶ç³»ç»Ÿæ¥å£ï¼ŒåŸç‰ˆ <code>ntfs-3g</code> ä¸å†ç›´æ¥æ”¯æŒï¼Œéœ€è¦å€ŸåŠ©ä¸€ä¸ªæ–°çš„é©±åŠ¨æ¡¥â€”â€”<strong>macFUSE</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-2">ğŸ”Œ ç¬¬äºŒæ­¥ï¼šmacFUSE + ntfs-3g-mac</h2>
<p>äºæ˜¯æˆ‘ç»§ç»­å®‰è£…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">brew install --cask macfuse
brew tap gromgit/homebrew-fuse
brew install ntfs-3g-mac
</code></pre>
<p>å®‰è£…å€’æ˜¯é¡ºåˆ©ï¼Œä½†ç³»ç»Ÿå¼¹å‡ºä¸€ä¸ªè®©æˆ‘æœ‰ç‚¹ç´§å¼ çš„æç¤ºï¼š</p>
<blockquote>
<p>ç³»ç»Ÿæ‰©å±•è¢«é˜»æ­¢ï¼šBenjamin Fleischerã€‚</p>
</blockquote>
<p>åŸæ¥ macFUSE å±äºç¬¬ä¸‰æ–¹å†…æ ¸æ‰©å±•ï¼Œéœ€è¦è¿›å…¥æ¢å¤æ¨¡å¼é™ä½å®‰å…¨ç­–ç•¥ã€‚</p>
<p>æˆ‘ç…§ç€æ–‡æ¡£é‡å¯ã€é•¿æŒ‰ç”µæºé”®ï¼Œè¿›å…¥ Options â†’ Security Policyï¼Œ</p>
<p>å‹¾é€‰äº† <strong>â€œAllow user management of kernel extensionsâ€</strong>ï¼Œä¿å­˜åå†é‡å¯ã€‚</p>
<p>å›åˆ°ç³»ç»Ÿåï¼Œåœ¨ <strong>ç³»ç»Ÿè®¾ç½® â†’ éšç§ä¸å®‰å…¨æ€§</strong> é‡Œç‚¹å‡» <strong>Allow macFUSE å¼€å‘è€…</strong>ã€‚</p>
<p>é‡å¯å®Œæ¯•ï¼Œç»ˆäºçœ‹åˆ°ç†Ÿæ‚‰çš„æˆåŠŸæç¤ºã€‚</p>
<hr/>
<h2 data-id="heading-3">ğŸ§  å†™ä¸€ä¸ªè„šæœ¬ï¼Œè®©ä¸€åˆ‡è‡ªåŠ¨åŒ–</h2>
<p>æˆ‘ä¸æƒ³æ¯æ¬¡éƒ½æ‰‹åŠ¨æ‰§è¡Œ <code>diskutil</code>ã€<code>umount</code>ã€<code>ntfs-3g</code>ã€‚äºæ˜¯æˆ‘å†™äº†ä¸ªæ™ºèƒ½è„šæœ¬ï¼Œå«ï¼š<code>ntfs-smart.sh</code>ã€‚</p>
<p>å®ƒèƒ½è‡ªåŠ¨ï¼š</p>
<ol>
<li>æ£€æµ‹ macOS æ˜¯å¦å·²åªè¯»æŒ‚è½½ (fskit)ã€‚</li>
<li>è‡ªåŠ¨å¸è½½åç”¨ ntfs-3g é‡æ–°æŒ‚è½½ä¸ºè¯»å†™ã€‚</li>
<li>å¸è½½æ—¶è‡ªåŠ¨æ‰§è¡Œ <code>diskutil eject</code> ç¡®ä¿ç‰©ç†æ–­ç”µã€‚</li>
<li>æ¸…ç† Spotlightã€QuickLook å ç”¨è¿›ç¨‹ã€‚</li>
</ol>
<p>ä¿å­˜åˆ°æ¡Œé¢ï¼Œèµ‹äºˆæ‰§è¡Œæƒé™ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">chmod</span> +x ~/Desktop/ntfs-smart.sh
</code></pre>
<p>è¿è¡Œåï¼Œç»ˆç«¯è¾“å‡ºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">âš™ï¸ æ£€æµ‹åˆ° macOS è‡ªåŠ¨åªè¯»æŒ‚è½½ (fskit): <span class="hljs-regexp">/dev/</span>disk4s1
â¡ï¸  æ­£åœ¨å¸è½½ä»¥é‡æ–°æŒ‚è½½ä¸ºå¯å†™...
âœ… æ‰¾åˆ°åˆ†åŒº: <span class="hljs-regexp">/dev/</span>disk4s1
ğŸ“Œ æ­£åœ¨æŒ‚è½½åˆ° /<span class="hljs-title class_">Volumes</span>/<span class="hljs-title class_">MyPassport</span> (è¯»å†™)...
ğŸ‰ æŒ‚è½½æˆåŠŸ: <span class="hljs-regexp">/Volumes/</span><span class="hljs-title class_">MyPassport</span>
</code></pre>
<p>Finder é‡Œï¼Œé‚£äº›ç°æ‰çš„æ–‡ä»¶ç»ˆäºå˜äº®äº†ã€‚</p>
<p>æˆ‘å¯ä»¥ç›´æ¥å¤åˆ¶ã€åˆ é™¤ã€åˆ›å»ºæ–‡ä»¶å¤¹ã€‚</p>
<p>é‚£ä¸€åˆ»ï¼Œæˆ‘ç¬‘äº†â€”â€”<strong>å®ƒç»ˆäºå¬è¯äº†ã€‚</strong></p>
<hr/>
<h2 data-id="heading-4">ğŸ’¡ æ„å¤–å‘ç°ï¼š$RECYCLE.BINï¼ŸSystem Volume Informationï¼Ÿ</h2>
<p>åˆšå¼€å§‹æˆ‘ä»¥ä¸ºæŒ‚è½½å‡ºé”™ï¼Œå› ä¸º Finder çªç„¶å¤šäº†ä¸¤ä¸ªé™Œç”Ÿçš„ç›®å½•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-variable">$RECYCLE</span>.BIN
System Volume Information
</code></pre>
<p>åæ¥æˆ‘æ‰çŸ¥é“ï¼Œå®ƒä»¬æ˜¯ Windows è‡ªå¸¦çš„ç³»ç»Ÿç›®å½•ã€‚</p>
<ul>
<li><code>$RECYCLE.BIN</code>ï¼šå›æ”¶ç«™æ–‡ä»¶å¤¹ã€‚</li>
<li><code>System Volume Information</code>ï¼šç³»ç»Ÿè¿˜åŸç‚¹ä¸ç´¢å¼•æ•°æ®åº“ã€‚</li>
</ul>
<p>macOS é»˜è®¤éšè—å®ƒä»¬ï¼Œä½† FUSE æŒ‚è½½åå…¨éƒ¨æš´éœ²å‡ºæ¥ã€‚</p>
<p>æˆ‘é¡ºæ‰‹åŠ äº†ä¸ªéšè—é…ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$RECYCLE</span>.BIN"</span> &gt;&gt; /Volumes/MyPassport/.hidden
<span class="hljs-built_in">echo</span> <span class="hljs-string">"System Volume Information"</span> &gt;&gt; /Volumes/MyPassport/.hidden
</code></pre>
<p>Finder åˆ·æ–°åï¼Œå®ƒä»¬å°±æ¶ˆå¤±äº†ã€‚ä¸–ç•Œå¹²å‡€äº†ã€‚</p>
<hr/>
<h2 data-id="heading-5">ğŸ”„ å¸è½½ä¹Ÿè¦ä¼˜é›…</h2>
<p>ä»¥å‰æˆ‘éƒ½æ˜¯ç›´æ¥åœ¨ Finder ç‚¹â€œæ¨å‡ºâ€ï¼Œç»“æœç»å¸¸æç¤ºï¼š</p>
<blockquote>
<p>â€œç£ç›˜æ­£åœ¨ä½¿ç”¨ä¸­ï¼Œæ— æ³•å¼¹å‡ºã€‚â€</p>
</blockquote>
<p>æ‰€ä»¥æˆ‘ç»™è„šæœ¬åŠ äº†è‡ªåŠ¨å¸è½½é€»è¾‘ï¼š</p>
<ol>
<li>
<p>æ£€æµ‹å½“å‰æŒ‚è½½ç‚¹ã€‚</p>
</li>
<li>
<p>å¸è½½å·ã€‚</p>
</li>
<li>
<p>è‡ªåŠ¨æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo diskutil eject /dev/disk4
</code></pre>
</li>
<li>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs">âœ… è®¾å¤‡å·²æ–­å¼€ï¼Œå¯å®‰å…¨æ‹”å‡ºã€‚
</code></pre>
</li>
</ol>
<p>ç°åœ¨ï¼Œæˆ‘çš„æ‹”ç›˜è¿‡ç¨‹ä¼˜é›…å¾—åƒåŠ¨ç”»ç‰‡ï¼š
ç¡¬ç›˜ç¯é—ªä¸¤ä¸‹ï¼Œåœä½ï¼Œå®‰é™æ¶ˆå¤±ã€‚</p>
<hr/>
<h2 data-id="heading-6">âš™ï¸ æœ€ç»ˆæ–¹æ¡ˆæ€»ç»“</h2>





























<table><thead><tr><th>åŠŸèƒ½</th><th>çŠ¶æ€</th></tr></thead><tbody><tr><td>å…è´¹æ–¹æ¡ˆ</td><td>âœ…</td></tr><tr><td>å…¼å®¹ Apple Silicon</td><td>âœ…</td></tr><tr><td>æ”¯æŒè¯»å†™</td><td>âœ…</td></tr><tr><td>è‡ªåŠ¨æŒ‚è½½/å¸è½½</td><td>âœ…</td></tr><tr><td>å®‰å…¨å¼¹å‡º</td><td>âœ…</td></tr></tbody></table>
<p>æ‰€æœ‰æ­¥éª¤åªéœ€è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">~/Desktop/ntfs-smart.sh
</code></pre>
<p>ä¸€è¡Œå‘½ä»¤ï¼Œå…¨è‡ªåŠ¨å®Œæˆã€‚</p>
<hr/>
<h2 data-id="heading-7">ğŸš€ å°¾å£°ï¼šä¸€è¡Œè„šæœ¬çš„è‡ªç”±</h2>
<p>å›è¿‡å¤´çœ‹ï¼ŒmacOS çš„å°é—­å¹¶ä¸æ˜¯åäº‹ï¼Œå®ƒä¿æŠ¤äº†æ™®é€šç”¨æˆ·ä¸å»ä¹±åŠ¨ç³»ç»Ÿã€‚å¯å¯¹å¼€å‘è€…æ¥è¯´ï¼Œèƒ½å®Œå…¨æŒæ§è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿï¼Œæ˜¯ä¸€ç§è‡ªç”±ã€‚</p>
<p>æˆ‘æ²¡æœ‰å®‰è£…ä»»ä½•æ”¶è´¹è½¯ä»¶ï¼Œä¹Ÿæ²¡ä¿®æ”¹ç³»ç»Ÿåº•å±‚ï¼Œåªæ˜¯ç”¨å‡ ä¸ªå¼€æºå·¥å…·ï¼Œè®© Mac å’Œ Windows é‡æ–°æ¡äº†ä¸ªæ‰‹ã€‚</p>
<p>ç°åœ¨ï¼Œæ¯æ¬¡æˆ‘æ’ä¸Šç¡¬ç›˜ï¼Œåªéœ€æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">~/Desktop/ntfs-smart.sh
</code></pre>
<p>çœ‹ç€é‚£ä¸€è¡Œè¡Œ âœ… è¾“å‡ºï¼Œæˆ‘éƒ½è§‰å¾—ï¼Œè¿™ä¸ªä¸‹åˆï¼ŒæŠ˜è…¾å¾—å€¼ã€‚</p>
<blockquote>
<p>â€œæ‡‚åŸç†çš„äººï¼Œæ‰æ˜¯çœŸæ­£çš„ç®¡ç†å‘˜ã€‚â€</p>
</blockquote>
<hr/>
<p>ä»“åº“åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FYangsonHung%2Fmacos-ntfs-smart-mount" target="_blank" title="https://github.com/YangsonHung/macos-ntfs-smart-mount" ref="nofollow noopener noreferrer">macos-ntfs-smart-mount</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.yangsonhung.top%2Farchives%2Fwo-zai-mac-yong-yi-xing-jiao-ben-zheng-fu-liao-5tb-ntfs-ju-jue-fu-fei-che-di-gao-ding-mian-fei-fang-an" target="_blank" title="https://www.yangsonhung.top/archives/wo-zai-mac-yong-yi-xing-jiao-ben-zheng-fu-liao-5tb-ntfs-ju-jue-fu-fei-che-di-gao-ding-mian-fei-fang-an" ref="nofollow noopener noreferrer">åŸæ–‡ç§»æ­¥ä¸ªäººåšå®¢</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é€è¡Œç¼–ç åˆ°ã€Œæ°›å›´ç¼–ç¨‹ã€ï¼šTrae å¸¦ä½ è¿›å…¥ AI ç¼–ç¨‹æ–°çºªå…ƒ]]></title>    <link>https://juejin.cn/post/7570197010886508590</link>    <guid>https://juejin.cn/post/7570197010886508590</guid>    <pubDate>2025-11-10T02:53:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570197010886508590" data-draft-id="7570271574348070921" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é€è¡Œç¼–ç åˆ°ã€Œæ°›å›´ç¼–ç¨‹ã€ï¼šTrae å¸¦ä½ è¿›å…¥ AI ç¼–ç¨‹æ–°çºªå…ƒ"/> <meta itemprop="keywords" content="Trae,AIç¼–ç¨‹,VibeCoding"/> <meta itemprop="datePublished" content="2025-11-10T02:53:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”Ÿæ¤°ä¸ç»’æ‹¿é“"/> <meta itemprop="url" content="https://juejin.cn/user/4185180725584116"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é€è¡Œç¼–ç åˆ°ã€Œæ°›å›´ç¼–ç¨‹ã€ï¼šTrae å¸¦ä½ è¿›å…¥ AI ç¼–ç¨‹æ–°çºªå…ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4185180725584116/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”Ÿæ¤°ä¸ç»’æ‹¿é“
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T02:53:12.000Z" title="Mon Nov 10 2025 02:53:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œä¸ºå¼€å‘è€…ï¼Œä½ æ˜¯å¦è¿˜åœ¨ä¸ºé€è¡Œæ•²ä»£ç è€Œæ„Ÿåˆ°æ¯ç‡¥ï¼Ÿæ˜¯å¦åœ¨é¢å¯¹è®¾è®¡éœ€æ±‚æ—¶ï¼Œè¿˜è¦åœ¨ä»£ç å’Œè®¾è®¡å·¥å…·é—´æ¥å›åˆ‡æ¢ï¼Ÿä»Šå¤©ï¼Œæˆ‘ä»¬æ¥èŠèŠä¸€ç§å…¨æ–°çš„ç¼–ç¨‹æ–¹å¼ â€”â€”<strong>Vibe Codingï¼ˆæ°›å›´ç¼–ç¨‹ï¼‰</strong> ï¼Œä»¥åŠå®ƒçš„ã€Œæœ€ä½³æ‹æ¡£ã€â€”â€”Trae AI ç¼–è¾‘å™¨å¦‚ä½•é‡å¡‘æˆ‘ä»¬çš„å¼€å‘æµç¨‹ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯ã€Œæ°›å›´ç¼–ç¨‹ã€ï¼Ÿæ‰“ç ´ä¼ ç»Ÿç¼–ç çš„è¾¹ç•Œ</h2>
<p>ä¼ ç»Ÿç¼–ç¨‹æ˜¯ã€ŒæŒ‡ä»¤å¼ã€çš„ï¼šä½ å¿…é¡»ç²¾ç¡®åœ°å‘Šè¯‰è®¡ç®—æœºæ¯ä¸€æ­¥åšä»€ä¹ˆï¼Œä»å˜é‡å£°æ˜åˆ°å‡½æ•°é€»è¾‘ï¼Œé€è¡Œç¼–å†™ã€‚è€ŒÂ <strong>ã€Œæ°›å›´ç¼–ç¨‹ã€</strong>Â åˆ™æ˜¯ã€Œæ„å›¾å¼ã€çš„ â€”â€” ä½ åªéœ€è¦æè¿°ä½ æƒ³è¦çš„ã€Œæ„Ÿè§‰ã€ã€Œæ•ˆæœã€æˆ–è€…ã€ŒåŠŸèƒ½æ°›å›´ã€ï¼ŒAI å°±èƒ½ç†è§£ä½ çš„æ¨¡ç³Šæ„å›¾ï¼Œå¹¶è½¬åŒ–ä¸ºå…·ä½“çš„ä»£ç å®ç°ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<ul>
<li>ä½ ä¸ç”¨å†çº ç»“ CSS åŠ¨ç”»çš„å…·ä½“å‚æ•°ï¼Œåªéœ€è¯´ã€Œå¸®æˆ‘æŠŠæŒ‰é’®çš„äº¤äº’åšå¾—æœ‰ç§‘æŠ€æ„Ÿï¼Œhover æ—¶å¸¦ç‚¹æµå…‰æ•ˆæœã€ï¼›</li>
<li>é‡åˆ°ä»£ç  Bug æ—¶ï¼Œä¸ç”¨é€è¡Œ Debugï¼Œç›´æ¥æŠŠæœ‰é—®é¢˜çš„ä»£ç ä¸¢ç»™ AIï¼Œè¯´ã€Œä¿®å¤è¿™æ®µä»£ç é‡Œçš„é€»è¾‘æ¼æ´ï¼Œè®©å®ƒèƒ½æ­£ç¡®å¤„ç†æ•°ç»„æ·±æ‹·è´ã€ã€‚</li>
</ul>
<h2 data-id="heading-1">äºŒã€Traeï¼šAI ç¼–ç¨‹çš„ã€Œæ²‰æµ¸å¼åº§èˆ±ã€</h2>
<p>Trae ä½œä¸ºä¸€æ¬¾ AI ç¼–è¾‘å™¨ï¼Œå°±æ˜¯ã€Œæ°›å›´ç¼–ç¨‹ã€çš„æœ€ä½³è½½ä½“ã€‚å®ƒä¸æ­¢æ˜¯ä¸€ä¸ªä»£ç ç¼–è¾‘å™¨ï¼Œæ›´æ˜¯ä¸€ä¸ª<strong>å…¨æ ˆå¼€å‘ + è®¾è®¡çš„ AI åä½œä¼™ä¼´</strong>ã€‚</p>
<h3 data-id="heading-2">1. ä»éœ€æ±‚åˆ°å®ç°ï¼ŒTrae å¸®ä½ ã€Œä¸€æ­¥åˆ°ä½ã€</h3>
<p>æ¯”å¦‚æˆ‘æƒ³åšä¸€ä¸ªã€ŒHello Traeã€çš„æ¬¢è¿é¡µé¢ï¼Œåªéœ€è¦æè¿°æˆ‘çš„éœ€æ±‚ï¼š</p>
<blockquote>
<p>ã€Œåˆ›å»ºä¸€ä¸ªå…·æœ‰ç°ä»£åŒ–è®¾è®¡é£æ ¼çš„ HTML é¡µé¢ï¼Œè¦æœ‰ç®€æ´çš„ UIã€å“åº”å¼å¸ƒå±€ï¼Œæ ‡é¢˜æ˜¯ã€Hello Trae!ã€ï¼Œæ•´ä½“é£æ ¼æ¸…æ–°ä¸”ä¸“ä¸šã€‚ã€</p>
</blockquote>
<p>Trae å°±èƒ½ç›´æ¥ç”Ÿæˆå®Œæ•´çš„ä»£ç ï¼ŒåŒ…æ‹¬ HTMLã€CSS å’Œå“åº”å¼è®¾è®¡ï¼š</p>
<p>html</p>
<p>é¢„è§ˆ</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Hello Trae<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-tag">body</span> {
            <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Arial'</span>, sans-serif;
            <span class="hljs-attribute">display</span>: flex;
            <span class="hljs-attribute">justify-content</span>: center;
            <span class="hljs-attribute">align-items</span>: center;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
        }
        <span class="hljs-selector-class">.container</span> {
            <span class="hljs-attribute">text-align</span>: center;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">40px</span>;
            <span class="hljs-attribute">background-color</span>: white;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
            <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">10px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
        }
        <span class="hljs-selector-tag">h1</span> {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#4a6fa5</span>;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
        }
        <span class="hljs-selector-tag">p</span> {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello Trae!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ¬¢è¿ä½¿ç”¨Trae AIç¼–ç åŠ©æ‰‹<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>è¿™æ®µä»£ç ä¸ä»…ç»“æ„æ¸…æ™°ï¼Œè¿˜è‡ªå¸¦å“åº”å¼å¸ƒå±€å’Œç¾è§‚çš„è§†è§‰è®¾è®¡ï¼Œå®Œå…¨ç¬¦åˆã€Œç®€æ´ç°ä»£ã€äº¤äº’å‹å¥½ã€çš„éœ€æ±‚ã€‚</p>
<h3 data-id="heading-3">2. å†…ç½®è§„åˆ™ï¼šè®© AI ç†è§£ã€Œé¡¹ç›®çº§ã€çº¦å®š</h3>
<p>Trae é€šè¿‡Â <code>.trae/rules/project_rules.md</code>Â æ¥å®šä¹‰é¡¹ç›®è§„èŒƒï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>æŠ€æœ¯æ ˆä¼˜å…ˆé€‰æ‹©çº¯ HTMLã€CSSã€JavaScriptï¼Œä¿è¯é¡¹ç›®ç‹¬ç«‹æ€§ï¼›</li>
<li>å¿…é¡»é‡‡ç”¨å“åº”å¼è®¾è®¡ï¼Œé€‚é…æ‰‹æœºã€å¹³æ¿ã€æ¡Œé¢ç«¯ï¼›</li>
<li>ä»£ç ç»“æ„è¦æ¸…æ™°ï¼Œå…¼é¡¾ç¾è§‚æ€§å’Œå®ç”¨æ€§ã€‚</li>
</ul>
<p>æœ‰äº†è¿™äº›è§„åˆ™ï¼ŒTrae ç”Ÿæˆçš„ä»£ç ä»ä¸æ˜¯ã€Œä¸€æ¬¡æ€§ç©å…·ã€ï¼Œè€Œæ˜¯èƒ½ç›´æ¥ç”¨äºç”Ÿäº§ç¯å¢ƒçš„ã€Œå·¥ç¨‹åŒ–ä»£ç ã€ã€‚</p>
<h3 data-id="heading-4">3. æœ¬åœ°é¢„è§ˆ + çƒ­æ›´æ–°ï¼šå¼€å‘ä½“éªŒæ‹‰æ»¡</h3>
<p>ç”Ÿæˆ HTML åï¼ŒTrae è¿˜èƒ½è‡ªåŠ¨å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨ï¼ˆç”¨Â <code>npx live-server</code>ï¼‰ï¼Œå¹¶æ”¯æŒ<strong>çƒ­æ›´æ–°</strong>â€”â€” ä½ ä¿®æ”¹ä»£ç åï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨åˆ·æ–°ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œã€‚</p>
<p>å¯åŠ¨å‘½ä»¤ä¹Ÿå¾ˆç®€å•ï¼š</p>
<p>bash</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-css" lang="css">npx <span class="hljs-attr">--yes</span> live-server <span class="hljs-attr">--port</span>=<span class="hljs-number">3000</span> <span class="hljs-attr">--host</span>=localhost <span class="hljs-attr">--no-browser</span> æ–‡ä»¶å<span class="hljs-selector-class">.html</span>
</code></pre>
<h2 data-id="heading-5">ä¸‰ã€ç¼–ç¨‹æ¦‚å¿µé€šä¿—è®²ï¼šæ·±æ‹·è´ã€æ ˆä¸å †</h2>
<p>å¾ˆå¤šå¼€å‘è€…å¯¹ã€Œæ·±æ‹·è´ã€ã€Œæ ˆå†…å­˜ã€ã€Œå †å†…å­˜ã€è¿™äº›æ¦‚å¿µæ„Ÿåˆ°å›°æƒ‘ï¼Œæˆ‘ä»¬ç»“åˆä»£ç æ¥é€šä¿—ç†è§£ä¸€ä¸‹ï¼š</p>
<h3 data-id="heading-6">1. æ ˆå†…å­˜ï¼šç®€å•é«˜æ•ˆçš„ã€Œä¸´æ—¶è´§æ¶ã€</h3>
<p>æ ˆå†…å­˜å°±åƒè¶…å¸‚çš„ã€Œä¸´æ—¶è´§æ¶ã€ï¼Œç”¨æ¥å­˜å‚¨ç®€å•å˜é‡ï¼ˆæ¯”å¦‚Â <code>let a = 1</code>ã€<code>let b = 'hello'</code>ï¼‰ã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯<strong>è¿ç»­å­˜å‚¨ã€è¯»å†™å¿«</strong>ï¼Œå˜é‡ç”¨å®Œå°±ä¼šè¢«è‡ªåŠ¨å›æ”¶ã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<p>js</p>
<pre><code class="hljs language-ini" lang="ini">let <span class="hljs-attr">a</span> = <span class="hljs-number">1</span><span class="hljs-comment">;</span>
let <span class="hljs-attr">d</span> = a<span class="hljs-comment">; // è¿™é‡Œæ˜¯ã€Œå€¼æ‹·è´ã€ï¼Œç›¸å½“äºæŠŠaçš„å€¼ã€Œå¤å°ã€äº†ä¸€ä»½ç»™dï¼Œä¸¤è€…äº’ä¸å½±å“</span>
</code></pre>
<h3 data-id="heading-7">2. å †å†…å­˜ï¼šå¼¹æ€§çµæ´»çš„ã€Œå‚¨ç‰©ä»“åº“ã€</h3>
<p>å †å†…å­˜å°±åƒã€Œå‚¨ç‰©ä»“åº“ã€ï¼Œç”¨æ¥å­˜å‚¨å¤æ‚æ•°æ®ï¼ˆæ¯”å¦‚å¯¹è±¡ã€æ•°ç»„ï¼‰ã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯<strong>ç©ºé—´å¼¹æ€§å¤§ï¼Œä½†è®¿é—®é€Ÿåº¦ä¸å¦‚æ ˆ</strong>ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªç”¨æˆ·æ•°ç»„ï¼š</p>
<p>js</p>
<pre><code class="hljs language-bash" lang="bash">const <span class="hljs-built_in">users</span> = [
  { <span class="hljs-built_in">id</span>: 1, name: <span class="hljs-string">"é™ˆä¿Šç’‹"</span>, hometown: <span class="hljs-string">"å—æ˜Œ"</span> },
  { <span class="hljs-built_in">id</span>: 2, name: <span class="hljs-string">"èˆ’ä¿Š"</span>, hometown: <span class="hljs-string">"å—æ˜Œ"</span> }
];
</code></pre>
<p><code>users</code>Â å˜é‡åœ¨<strong>æ ˆå†…å­˜</strong>ä¸­å­˜å‚¨çš„æ˜¯ã€ŒæŒ‡å‘å †å†…å­˜ä¸­æ•°ç»„çš„åœ°å€ã€ï¼Œè€ŒçœŸæ­£çš„æ•°ç»„æ•°æ®å­˜åœ¨<strong>å †å†…å­˜</strong>é‡Œã€‚</p>
<h3 data-id="heading-8">3. æ·±æ‹·è´ï¼šçœŸæ­£çš„ã€Œç‹¬ç«‹å‰¯æœ¬ã€</h3>
<p>å¦‚æœç›´æ¥èµ‹å€¼ï¼ˆ<code>const data = users</code>ï¼‰ï¼Œåªæ˜¯æŠŠã€Œåœ°å€ã€æ‹·è´äº†ä¸€ä»½ï¼ˆ<strong>å¼•ç”¨å¼æ‹·è´</strong>ï¼‰ï¼Œæ­¤æ—¶Â <code>data</code>Â å’ŒÂ <code>users</code>Â æŒ‡å‘å †å†…å­˜ä¸­åŒä¸€ä¸ªæ•°ç»„ï¼Œä¿®æ”¹Â <code>data</code>Â ä¼šå½±å“Â <code>users</code>ã€‚</p>
<p>è¦å®ç°ã€Œæ·±æ‹·è´ã€ï¼Œå¯ä»¥ç”¨Â <code>JSON.stringify</code>Â +Â <code>JSON.parse</code>ï¼š</p>
<p>js</p>
<pre><code class="hljs language-ini" lang="ini">// å…ˆæŠŠusersè½¬æˆJSONå­—ç¬¦ä¸²ï¼ˆåºåˆ—åŒ–ï¼‰ï¼Œå†è§£ææˆæ–°å¯¹è±¡ï¼ˆååºåˆ—åŒ–ï¼‰
const <span class="hljs-attr">data</span> = JSON.parse(JSON.stringify(users))<span class="hljs-comment">;</span>
data<span class="hljs-section">[0]</span>.<span class="hljs-attr">hobbies</span> = [<span class="hljs-string">"ç¯®çƒ"</span>, <span class="hljs-string">"çœ‹çƒŸèŠ±"</span>]<span class="hljs-comment">; </span>
// æ­¤æ—¶ä¿®æ”¹dataä¸ä¼šå½±å“usersï¼Œå› ä¸ºå®ƒä»¬åœ¨å †å†…å­˜ä¸­æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„å¯¹è±¡äº†
</code></pre>
<h2 data-id="heading-9">å››ã€Node.js æ­ä¸ª HTTP æœåŠ¡å™¨ï¼šä»æœ¬åœ°åˆ°ç½‘ç»œ</h2>
<p>å¾ˆå¤šæ–°æ‰‹è§‰å¾—ã€Œæ­å»ºæœåŠ¡å™¨ã€å¾ˆå¤æ‚ï¼Œå…¶å®ç”¨ Node.js å†…ç½®çš„Â <code>http</code>Â æ¨¡å—åªéœ€å‡ è¡Œä»£ç ï¼š</p>
<p>js</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> http <span class="hljs-keyword">from</span> <span class="hljs-string">'http'</span>;

<span class="hljs-comment">// åˆ›å»ºæœåŠ¡å™¨ï¼Œå¤„ç†è¯·æ±‚å’Œå“åº”</span>
http.<span class="hljs-title function_">createServer</span>(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  res.<span class="hljs-title function_">end</span>(<span class="hljs-string">"hello world"</span>); <span class="hljs-comment">// å‘æµè§ˆå™¨è¿”å›ã€Œhello worldã€</span>
}).<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>); <span class="hljs-comment">// ç›‘å¬3000ç«¯å£</span>
</code></pre>
<p>è¿™æ®µä»£ç è¿è¡Œåï¼Œä½ åœ¨æµè§ˆå™¨è®¿é—®Â <code>http://localhost:3000</code>ï¼Œå°±èƒ½çœ‹åˆ°ã€Œhello worldã€â€”â€” è¿™å°±æ˜¯æœ€åŸºç¡€çš„Â <strong>B/S æ¶æ„</strong>ï¼ˆæµè§ˆå™¨ - æœåŠ¡å™¨ï¼‰äº¤äº’ã€‚</p>
<h2 data-id="heading-10">äº”ã€å†™åœ¨æœ€åï¼šå¼€å‘è€…çš„ã€Œæ•ˆç‡é©å‘½ã€</h2>
<p>Trae ä»£è¡¨çš„ã€Œæ°›å›´ç¼–ç¨‹ã€ï¼Œä¸æ˜¯è¦å–ä»£å¼€å‘è€…ï¼Œè€Œæ˜¯è®©å¼€å‘è€…ä»ã€Œä»£ç å·¥äººã€å‡çº§ä¸ºã€Œåˆ›æ„æŒ‡æŒ¥å®˜ã€â€”â€” ä½ è´Ÿè´£æå‡ºæƒ³æ³•ã€æŠŠæ¡æ–¹å‘ï¼ŒAI è´Ÿè´£æŠŠæƒ³æ³•è½åœ°æˆä»£ç å’Œè®¾è®¡ã€‚</p>
<p>è¿™ç§æ¨¡å¼ä¸ä»…é™ä½äº†ç¼–ç¨‹çš„é—¨æ§›ï¼Œæ›´è®©å¼€å‘è€…èƒ½æŠŠç²¾åŠ›æ”¾åœ¨<strong>ä¸šåŠ¡é€»è¾‘ã€ç”¨æˆ·ä½“éªŒã€åˆ›æ–°åŠŸèƒ½</strong>ä¸Šã€‚å¦‚æœä½ ä¹Ÿæƒ³æ‘†è„±é‡å¤ç¼–ç çš„æ¯ç‡¥ï¼Œä¸å¦¨è¯•è¯•ã€Œæ°›å›´ç¼–ç¨‹ã€ï¼Œè®© Trae æˆä¸ºä½ å¼€å‘è·¯ä¸Šçš„ã€Œè¶…çº§åŠ©æ‰‹ã€ã€‚</p>
<p>ç°åœ¨ï¼Œæ‰“å¼€ Traeï¼Œæè¿°ä¸€ä¸ªä½ æœ€æƒ³å®ç°çš„åŠŸèƒ½ï¼Œçœ‹çœ‹ AI èƒ½ç»™ä½ å¸¦æ¥ä»€ä¹ˆæƒŠå–œå§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ASP.NET Core Blazorè¿›é˜¶1ï¼šé«˜çº§ç»„ä»¶å¼€å‘]]></title>    <link>https://juejin.cn/post/7570630923709906996</link>    <guid>https://juejin.cn/post/7570630923709906996</guid>    <pubDate>2025-11-10T03:42:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570630923709906996" data-draft-id="7570533058840985635" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ASP.NET Core Blazorè¿›é˜¶1ï¼šé«˜çº§ç»„ä»¶å¼€å‘"/> <meta itemprop="keywords" content="å‰ç«¯,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2025-11-10T03:42:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç å†œåˆšå­"/> <meta itemprop="url" content="https://juejin.cn/user/2693136629379932"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ASP.NET Core Blazorè¿›é˜¶1ï¼šé«˜çº§ç»„ä»¶å¼€å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2693136629379932/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç å†œåˆšå­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T03:42:40.000Z" title="Mon Nov 10 2025 03:42:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å—¨~ å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç å†œåˆšå­ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨Blazorä¸­çš„é«˜çº§ç»„ä»¶å¼€å‘æŠ€æœ¯ï¼ŒåŒ…æ‹¬æ¸²æŸ“ç‰‡æ®µã€åŠ¨æ€ç»„ä»¶ã€é”™è¯¯è¾¹ç•Œå’Œè™šæ‹ŸåŒ–ç»„ä»¶ï¼Œå¸®åŠ©æ‚¨æ„å»ºæ›´å¼ºå¤§ã€æ›´çµæ´»çš„Blazoråº”ç”¨ã€‚</p>
<h2 data-id="heading-0">1. æ¸²æŸ“ç‰‡æ®µï¼ˆRenderFragmentï¼‰</h2>
<h3 data-id="heading-1">1.1 åŸºæœ¬æ¦‚å¿µ</h3>
<p>RenderFragmentæ˜¯Blazorä¸­ç”¨äºåŠ¨æ€æ¸²æŸ“UIå†…å®¹çš„æ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒå…è®¸ç»„ä»¶æ¥æ”¶å¹¶æ¸²æŸ“æ¥è‡ªçˆ¶ç»„ä»¶çš„æ ‡è®°å†…å®¹ã€‚</p>
<h3 data-id="heading-2">1.2 åŸºç¡€ç”¨æ³•</h3>
<pre><code class="hljs language-csharp" lang="csharp">&lt;!-- ChildComponent.razor --&gt;
&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"card"</span>&gt;
    &lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"card-header"</span>&gt;
        @Title
    &lt;/div&gt;
    &lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"card-body"</span>&gt;
        @ChildContent
    &lt;/div&gt;
    &lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"card-footer"</span>&gt;
        @FooterContent
    &lt;/div&gt;
&lt;/div&gt;
@code {
    [<span class="hljs-meta">Parameter</span>]
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Title { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-string">"Default Title"</span>;

    [<span class="hljs-meta">Parameter</span>]
    <span class="hljs-keyword">public</span> RenderFragment? ChildContent { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

    [<span class="hljs-meta">Parameter</span>]
    <span class="hljs-keyword">public</span> RenderFragment? FooterContent { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
}
</code></pre>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ParentComponent.razor --&gt;</span>
@page "/advanced/component"
<span class="hljs-tag">&lt;<span class="hljs-name">ChildComponent</span> <span class="hljs-attr">Title</span>=<span class="hljs-string">"é«˜çº§ç»„ä»¶ç¤ºä¾‹"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ChildContent</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™æ˜¯ä¸»ä½“å†…å®¹åŒºåŸŸ<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-primary"</span>&gt;</span>ç‚¹å‡»æˆ‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ChildContent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">FooterContent</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">small</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-muted"</span>&gt;</span>è¿™æ˜¯åº•éƒ¨å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">small</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">FooterContent</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ChildComponent</span>&gt;</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea0fdfaae5da4e50ad8d7a0c7369142f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5Yac5Yia5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350960&amp;x-signature=J3a2BiscXEPyQAWy5tIanFxKXOo%3D" alt="ASP.NET Core Blazorè¿›é˜¶1ï¼šé«˜çº§ç»„ä»¶å¼€å‘" loading="lazy"/></p>
<h3 data-id="heading-3">1.3 å¸¦å‚æ•°çš„RenderFragment</h3>
<pre><code class="hljs language-kotlin" lang="kotlin">&lt;!-- DataListComponent.razor --&gt;
&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"data-list"</span>&gt;
    &lt;h3&gt;<span class="hljs-meta">@Title</span>&lt;/h3&gt;
    <span class="hljs-meta">@foreach</span> (<span class="hljs-keyword">var</span> item <span class="hljs-keyword">in</span> Items)
    {
        <span class="hljs-meta">@ItemTemplate(item)</span>
    }
&lt;/div&gt;
<span class="hljs-meta">@code</span> {
    [Parameter]
    <span class="hljs-keyword">public</span> string Title { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-string">"æ•°æ®åˆ—è¡¨"</span>;

    [Parameter]
    <span class="hljs-keyword">public</span> IEnumerable&lt;<span class="hljs-keyword">object</span>&gt;? Items { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

    [Parameter]
    <span class="hljs-keyword">public</span> RenderFragment&lt;<span class="hljs-keyword">object</span>&gt;? ItemTemplate { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
}
</code></pre>

<pre><code class="hljs language-csharp" lang="csharp">&lt;!-- Usage.razor --&gt;
@page <span class="hljs-string">"/advanced/component/datalist"</span>
@using System.ComponentModel.DataAnnotations

&lt;DataListComponent Title=<span class="hljs-string">"ç”¨æˆ·åˆ—è¡¨"</span>
                   Items=<span class="hljs-string">"users"</span>&gt;
    &lt;ItemTemplate&gt;
        &lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"user-item"</span>&gt;
            &lt;span&gt;@((context <span class="hljs-keyword">as</span> User)?.Id)&lt;/span&gt;
            &lt;strong&gt;@((context <span class="hljs-keyword">as</span> User)?.Name)&lt;/strong&gt;
            &lt;span&gt;@((context <span class="hljs-keyword">as</span> User)?.Email)&lt;/span&gt;
        &lt;/div&gt;
    &lt;/ItemTemplate&gt;
&lt;/DataListComponent&gt;
@code {
    <span class="hljs-keyword">private</span> List&lt;User&gt; users = <span class="hljs-keyword">new</span>();

    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnInitialized</span>()</span>
    {
        users = <span class="hljs-keyword">new</span> List&lt;User&gt;
        {
            <span class="hljs-keyword">new</span> User { Id = <span class="hljs-number">1</span>, Name = <span class="hljs-string">"å¼ ä¸‰"</span>, Email = <span class="hljs-string">"zhangsan@email.com"</span> },
            <span class="hljs-keyword">new</span> User { Id = <span class="hljs-number">2</span>, Name = <span class="hljs-string">"æå››"</span>, Email = <span class="hljs-string">"lisi@email.com"</span> },
            <span class="hljs-keyword">new</span> User { Id = <span class="hljs-number">3</span>, Name = <span class="hljs-string">"ç‹äº”"</span>, Email = <span class="hljs-string">"wangwu@email.com"</span> }
        };
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
    {
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Id { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

        [<span class="hljs-meta">Required</span>]
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Name { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-built_in">string</span>.Empty;

        [<span class="hljs-meta">EmailAddress</span>]
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Email { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-built_in">string</span>.Empty;
    }
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b4fb142f51f46e0a97729d9d4f8c863~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5Yac5Yia5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350960&amp;x-signature=i8QGQQ%2F%2BgTZ9lXExtQseRnP%2BEM0%3D" alt="ASP.NET Core Blazorè¿›é˜¶1ï¼šé«˜çº§ç»„ä»¶å¼€å‘" loading="lazy"/></p>
<h2 data-id="heading-4">2. åŠ¨æ€ç»„ä»¶</h2>
<h3 data-id="heading-5">2.1 ä½¿ç”¨RenderTreeBuilderåŠ¨æ€æ„å»ºç»„ä»¶</h3>
<pre><code class="hljs language-csharp" lang="csharp">&lt;!-- DynamicRenderer.razor --&gt;
@using Microsoft.AspNetCore.Components.Rendering

&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"dynamic-container"</span>&gt;
    @foreach (<span class="hljs-keyword">var</span> componentType <span class="hljs-keyword">in</span> ComponentTypes)
    {
        &lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"dynamic-component"</span>&gt;
            @{
                <span class="hljs-keyword">var</span> index = ComponentTypes.IndexOf(componentType);
                BuildComponent(index);
            }
        &lt;/div&gt;
    }
&lt;/div&gt;
@code {
    [<span class="hljs-meta">Parameter</span>]
    <span class="hljs-keyword">public</span> List&lt;Type&gt; ComponentTypes { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-keyword">new</span>();

    [<span class="hljs-meta">Parameter</span>]
    <span class="hljs-keyword">public</span> Dictionary&lt;Type, Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">object</span>&gt;&gt; ComponentParameters { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-keyword">new</span>();

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">BuildComponent</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> sequence</span>)</span>
    {
        <span class="hljs-keyword">var</span> componentType = ComponentTypes[sequence];
        <span class="hljs-keyword">var</span> parameters = ComponentParameters.ContainsKey(componentType) 
            ? ComponentParameters[componentType] 
            : <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">object</span>&gt;();
    }

    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">BuildRenderTree</span>(<span class="hljs-params">RenderTreeBuilder builder</span>)</span>
    {
        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; ComponentTypes.Count; i++)
        {
            builder.OpenElement(i * <span class="hljs-number">2</span>, <span class="hljs-string">"div"</span>);
            builder.AddAttribute(i * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, <span class="hljs-string">"class"</span>, <span class="hljs-string">"dynamic-component"</span>);
            
            builder.OpenComponent(i * <span class="hljs-number">2</span> + <span class="hljs-number">2</span>, ComponentTypes[i]);
            
            <span class="hljs-keyword">if</span> (ComponentParameters.ContainsKey(ComponentTypes[i]))
            {
                <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> param <span class="hljs-keyword">in</span> ComponentParameters[ComponentTypes[i]])
                {
                    builder.AddAttribute(i * <span class="hljs-number">2</span> + <span class="hljs-number">3</span>, param.Key, param.Value);
                }
            }
            
            builder.CloseComponent();
            builder.CloseElement();
        }
    }
}
</code></pre>
<h3 data-id="heading-6">2.2 åŠ¨æ€ç»„ä»¶å®¹å™¨</h3>
<pre><code class="hljs language-ini" lang="ini">&lt;!-- DynamicComponentContainer.razor --&gt;
@using Microsoft.AspNetCore.Components

&lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"dynamic-container"</span>&gt;
    @if (CurrentComponentType != null)
    {
        &lt;DynamicComponent <span class="hljs-attr">Type</span>=<span class="hljs-string">"CurrentComponentType"</span> Parameters=<span class="hljs-string">"CurrentParameters"</span> /&gt;
    }
    else
    {
        &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"placeholder"</span>&gt;
            &lt;p&gt;è¯·é€‰æ‹©è¦æ˜¾ç¤ºçš„ç»„ä»¶&lt;/p&gt;
        &lt;/div&gt;
    }
&lt;/div&gt;
&lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"component-selector"</span>&gt;
    &lt;button <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-outline-primary"</span> @<span class="hljs-literal">on</span>click=<span class="hljs-string">"() =&gt; ShowComponent(typeof(Counter))"</span>&gt;
        æ˜¾ç¤ºè®¡æ•°å™¨
    &lt;/button&gt;
    &lt;button <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-outline-primary"</span> @<span class="hljs-literal">on</span>click=<span class="hljs-string">"() =&gt; ShowComponent(typeof(FetchData))"</span>&gt;
        æ˜¾ç¤ºæ•°æ®è·å–
    &lt;/button&gt;
    &lt;button <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-outline-primary"</span> @<span class="hljs-literal">on</span>click=<span class="hljs-string">"() =&gt; ShowComponent(typeof(TodoList))"</span>&gt;
        æ˜¾ç¤ºå¾…åŠäº‹é¡¹
    &lt;/button&gt;
&lt;/div&gt;
@code {
    private Type? CurrentComponentType { get<span class="hljs-comment">; set; }</span>
    private Dictionary&lt;string, object&gt; CurrentParameters { get<span class="hljs-comment">; set; } = new();</span>

    private void ShowComponent(Type componentType)
    {
        <span class="hljs-attr">CurrentComponentType</span> = componentType<span class="hljs-comment">;</span>
        <span class="hljs-attr">CurrentParameters</span> = GetParametersForComponent(componentType)<span class="hljs-comment">;</span>
        StateHasChanged()<span class="hljs-comment">;</span>
    }

    private Dictionary&lt;string, object&gt; GetParametersForComponent(Type componentType)
    {
        var <span class="hljs-attr">parameters</span> = new Dictionary&lt;string, object&gt;()<span class="hljs-comment">;</span>

        if (<span class="hljs-attr">componentType</span> == typeof(Counter))
        {
            parameters<span class="hljs-section">["IncrementAmount"]</span> = 5<span class="hljs-comment">;</span>
        }
        else if (<span class="hljs-attr">componentType</span> == typeof(TodoList))
        {
            parameters<span class="hljs-section">["Title"]</span> = "åŠ¨æ€å¾…åŠäº‹é¡¹"<span class="hljs-comment">;</span>
        }

        return parameters<span class="hljs-comment">;</span>
    }
}
</code></pre>
<h3 data-id="heading-7">2.3 è‡ªå®šä¹‰åŠ¨æ€ç»„ä»¶é€‰æ‹©å™¨</h3>
<pre><code class="hljs language-csharp" lang="csharp">&lt;!-- SmartComponentRenderer.razor --&gt;
@using Microsoft.AspNetCore.Components

&lt;DynamicComponent 
    Type=<span class="hljs-string">"ResolveComponentType()"</span> 
    Parameters=<span class="hljs-string">"ResolveParameters()"</span> /&gt;

@code {
    [<span class="hljs-meta">Parameter</span>]
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> ComponentName { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-built_in">string</span>.Empty;

    [<span class="hljs-meta">Parameter</span>]
    <span class="hljs-keyword">public</span> Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">object</span>&gt;? InputParameters { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

    [<span class="hljs-meta">Parameter</span>]
    <span class="hljs-keyword">public</span> EventCallback&lt;Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">object</span>&gt;&gt; OnParametersResolved { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

    <span class="hljs-function"><span class="hljs-keyword">private</span> Type <span class="hljs-title">ResolveComponentType</span>()</span>
    {
        <span class="hljs-keyword">return</span> ComponentName <span class="hljs-keyword">switch</span>
        {
            <span class="hljs-string">"Counter"</span> =&gt; <span class="hljs-keyword">typeof</span>(Counter),
            <span class="hljs-string">"TodoList"</span> =&gt; <span class="hljs-keyword">typeof</span>(TodoList),
            <span class="hljs-string">"FetchData"</span> =&gt; <span class="hljs-keyword">typeof</span>(FetchData),
            <span class="hljs-string">"Weather"</span> =&gt; <span class="hljs-keyword">typeof</span>(FetchData), <span class="hljs-comment">// åˆ«å</span>
            _ =&gt; <span class="hljs-keyword">typeof</span>(NotFoundComponent)
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">object</span>&gt; <span class="hljs-title">ResolveParameters</span>()</span>
    {
        <span class="hljs-keyword">var</span> parameters = InputParameters ?? <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">object</span>&gt;();

        <span class="hljs-comment">// æ·»åŠ é»˜è®¤å‚æ•°</span>
        <span class="hljs-keyword">if</span> (ComponentName == <span class="hljs-string">"Counter"</span> &amp;&amp; !parameters.ContainsKey(<span class="hljs-string">"IncrementAmount"</span>))
        {
            parameters[<span class="hljs-string">"IncrementAmount"</span>] = <span class="hljs-number">1</span>;
        }

        <span class="hljs-comment">// é€šçŸ¥å‚æ•°è§£æå®Œæˆ</span>
        OnParametersResolved.InvokeAsync(parameters);

        <span class="hljs-keyword">return</span> parameters;
    }
}
</code></pre>
<h2 data-id="heading-8">3. é”™è¯¯è¾¹ç•Œ</h2>
<h3 data-id="heading-9">3.1 åŸºç¡€é”™è¯¯è¾¹ç•Œç»„ä»¶</h3>
<pre><code class="hljs language-ini" lang="ini">&lt;!-- ErrorBoundary.razor --&gt;
@using Microsoft.AspNetCore.Components

&lt;CascadingValue <span class="hljs-attr">Value</span>=<span class="hljs-string">"this"</span>&gt;
    @if (!hasError)
    {
        @ChildContent
    }
    else if (ErrorContent != null)
    {
        @ErrorContent
    }
    else
    {
        &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"alert alert-danger"</span> role=<span class="hljs-string">"alert"</span>&gt;
            &lt;h4&gt;å‡ºç°äº†é”™è¯¯&lt;/h4&gt;
            &lt;p&gt;@currentException?.Message&lt;/p&gt;
            &lt;button <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-outline-danger btn-sm"</span> @<span class="hljs-literal">on</span>click=<span class="hljs-string">"Recover"</span>&gt;
                é‡è¯•
            &lt;/button&gt;
        &lt;/div&gt;
    }
&lt;/CascadingValue&gt;
@code {
    <span class="hljs-section">[Parameter]</span>
    public RenderFragment? ChildContent { get<span class="hljs-comment">; set; }</span>

    <span class="hljs-section">[Parameter]</span>
    public RenderFragment&lt;Exception&gt;? ErrorContent { get<span class="hljs-comment">; set; }</span>

    <span class="hljs-section">[Parameter]</span>
    public bool RecoverOnRender { get<span class="hljs-comment">; set; } = true;</span>

    private bool hasError<span class="hljs-comment">;</span>
    private Exception? currentException<span class="hljs-comment">;</span>

    public void Recover()
    {
        <span class="hljs-attr">hasError</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
        <span class="hljs-attr">currentException</span> = null<span class="hljs-comment">;</span>
        StateHasChanged()<span class="hljs-comment">;</span>
    }

    protected override void OnParametersSet()
    {
        if (RecoverOnRender)
        {
            <span class="hljs-attr">hasError</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
            <span class="hljs-attr">currentException</span> = null<span class="hljs-comment">;</span>
        }
    }

    public async Task CatchAsync(Func&lt;Task&gt; action)
    {
        try
        {
            await action()<span class="hljs-comment">;</span>
            <span class="hljs-attr">hasError</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
            <span class="hljs-attr">currentException</span> = null<span class="hljs-comment">;</span>
        }
        catch (Exception ex)
        {
            <span class="hljs-attr">hasError</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
            <span class="hljs-attr">currentException</span> = ex<span class="hljs-comment">;</span>
            StateHasChanged()<span class="hljs-comment">;</span>
        }
    }
}
</code></pre>
<h3 data-id="heading-10">3.2 å¢å¼ºå‹é”™è¯¯è¾¹ç•Œ</h3>
<pre><code class="hljs language-ini" lang="ini">&lt;!-- EnhancedErrorBoundary.razor --&gt;
@using Microsoft.AspNetCore.Components
@inject ILogger&lt;EnhancedErrorBoundary&gt; Logger

&lt;CascadingValue <span class="hljs-attr">Value</span>=<span class="hljs-string">"this"</span>&gt;
    @if (<span class="hljs-attr">currentState</span> == ErrorState.Normal)
    {
        @ChildContent
    }
    else
    {
        &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"@GetErrorContainerClass()"</span>&gt;
            &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"error-header"</span>&gt;
                &lt;i <span class="hljs-attr">class</span>=<span class="hljs-string">"@GetErrorIcon()"</span>&gt;&lt;/i&gt;
                &lt;h4&gt;@GetErrorMessage()&lt;/h4&gt;
            &lt;/div&gt;
            
            @if (ShowExceptionDetails)
            {
                &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"error-details"</span>&gt;
                    &lt;p&gt;&lt;strong&gt;é”™è¯¯ç±»å‹:&lt;/strong&gt; @currentException?.GetType().Name&lt;/p&gt;
                    &lt;p&gt;&lt;strong&gt;é”™è¯¯ä¿¡æ¯:&lt;/strong&gt; @currentException?.Message&lt;/p&gt;
                    
                    @if (ShowStackTrace)
                    {
                        &lt;details&gt;
                            &lt;summary&gt;å †æ ˆè·Ÿè¸ª&lt;/summary&gt;
                            &lt;pre&gt;@currentException?.StackTrace&lt;/pre&gt;
                        &lt;/details&gt;
                    }
                &lt;/div&gt;
            }
            
            &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"error-actions"</span>&gt;
                &lt;button <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-primary"</span> @<span class="hljs-literal">on</span>click=<span class="hljs-string">"Recover"</span>&gt;
                    &lt;i <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-redo"</span>&gt;&lt;/i&gt; é‡è¯•
                &lt;/button&gt;
                
                @if (ShowReportButton)
                {
                    &lt;button <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-outline-secondary"</span> @<span class="hljs-literal">on</span>click=<span class="hljs-string">"ReportError"</span>&gt;
                        &lt;i <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-bug"</span>&gt;&lt;/i&gt; æŠ¥å‘Šé”™è¯¯
                    &lt;/button&gt;
                }
                
                &lt;button <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-outline-info"</span> @<span class="hljs-literal">on</span>click=<span class="hljs-string">"ToggleDetails"</span>&gt;
                    &lt;i <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-info-circle"</span>&gt;&lt;/i&gt; 
                    @(ShowExceptionDetails ? "éšè—" : "æ˜¾ç¤º")è¯¦æƒ…
                &lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    }
&lt;/CascadingValue&gt;
@code {
    <span class="hljs-section">[Parameter]</span>
    public RenderFragment? ChildContent { get<span class="hljs-comment">; set; }</span>

    <span class="hljs-section">[Parameter]</span>
    public bool ShowExceptionDetails { get<span class="hljs-comment">; set; } = false;</span>

    <span class="hljs-section">[Parameter]</span>
    public bool ShowStackTrace { get<span class="hljs-comment">; set; } = false;</span>

    <span class="hljs-section">[Parameter]</span>
    public bool ShowReportButton { get<span class="hljs-comment">; set; } = true;</span>

    <span class="hljs-section">[Parameter]</span>
    public EventCallback&lt;Exception&gt; OnError { get<span class="hljs-comment">; set; }</span>

    private ErrorState <span class="hljs-attr">currentState</span> = ErrorState.Normal<span class="hljs-comment">;</span>
    private Exception? currentException<span class="hljs-comment">;</span>
    private bool <span class="hljs-attr">ShowExceptionDetailsLocal</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>

    protected override async Task OnErrorAsync(Exception exception)
    {
        <span class="hljs-attr">currentState</span> = ErrorState.Error<span class="hljs-comment">;</span>
        <span class="hljs-attr">currentException</span> = exception<span class="hljs-comment">;</span>
        
        Logger.LogError(exception, "ç»„ä»¶æ¸²æŸ“æ—¶å‘ç”Ÿé”™è¯¯")<span class="hljs-comment">;</span>
        
        await OnError.InvokeAsync(exception)<span class="hljs-comment">;</span>
        await base.OnErrorAsync(exception)<span class="hljs-comment">;</span>
    }

    private void Recover()
    {
        <span class="hljs-attr">currentState</span> = ErrorState.Normal<span class="hljs-comment">;</span>
        <span class="hljs-attr">currentException</span> = null<span class="hljs-comment">;</span>
        <span class="hljs-attr">ShowExceptionDetailsLocal</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
        StateHasChanged()<span class="hljs-comment">;</span>
    }

    private void ReportError()
    {
        // è¿™é‡Œå¯ä»¥å®ç°é”™è¯¯æŠ¥å‘Šé€»è¾‘
        Logger.LogError("ç”¨æˆ·æŠ¥å‘Šé”™è¯¯: {Exception}", currentException)<span class="hljs-comment">;</span>
        // å¯ä»¥å‘é€åˆ°é”™è¯¯ç›‘æ§æœåŠ¡
    }

    private void ToggleDetails()
    {
        <span class="hljs-attr">ShowExceptionDetailsLocal</span> = !ShowExceptionDetailsLocal<span class="hljs-comment">;</span>
    }

    private string GetErrorContainerClass() =&gt; currentState switch
    {
        <span class="hljs-attr">ErrorState.Error</span> =&gt; <span class="hljs-string">"error-container alert alert-danger"</span>,
        <span class="hljs-attr">ErrorState.Warning</span> =&gt; <span class="hljs-string">"error-container alert alert-warning"</span>,
        <span class="hljs-attr">_</span> =&gt; <span class="hljs-string">"error-container"</span>
    }<span class="hljs-comment">;</span>

    private string GetErrorIcon() =&gt; currentState switch
    {
        <span class="hljs-attr">ErrorState.Error</span> =&gt; <span class="hljs-string">"fas fa-exclamation-triangle"</span>,
        <span class="hljs-attr">ErrorState.Warning</span> =&gt; <span class="hljs-string">"fas fa-exclamation-circle"</span>,
        <span class="hljs-attr">_</span> =&gt; <span class="hljs-string">"fas fa-info-circle"</span>
    }<span class="hljs-comment">;</span>

    private string GetErrorMessage() =&gt; currentState switch
    {
        <span class="hljs-attr">ErrorState.Error</span> =&gt; <span class="hljs-string">"å‘ç”Ÿäº†æ„å¤–é”™è¯¯"</span>,
        <span class="hljs-attr">ErrorState.Warning</span> =&gt; <span class="hljs-string">"æ“ä½œæœªå®Œå…¨æˆåŠŸ"</span>,
        <span class="hljs-attr">_</span> =&gt; <span class="hljs-string">"æœªçŸ¥çŠ¶æ€"</span>
    }<span class="hljs-comment">;</span>

    private enum ErrorState
    {
        Normal,
        Warning,
        Error
    }
}
</code></pre>
<h3 data-id="heading-11">3.3 é”™è¯¯è¾¹ç•Œä½¿ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ErrorBoundaryUsage.razor --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container mt-4"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>é”™è¯¯è¾¹ç•Œä½¿ç”¨ç¤ºä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">EnhancedErrorBoundary</span> 
        <span class="hljs-attr">ShowExceptionDetails</span>=<span class="hljs-string">"true"</span>
        <span class="hljs-attr">OnError</span>=<span class="hljs-string">"OnErrorOccurred"</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"component-section"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å®‰å…¨ç»„ä»¶åŒºåŸŸ<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
            
            <span class="hljs-tag">&lt;<span class="hljs-name">UnstableComponent</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">AnotherUnstableComponent</span> /&gt;</span>
            
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"safe-zone"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™ä¸ªåŒºåŸŸå—åˆ°é”™è¯¯è¾¹ç•Œä¿æŠ¤<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-success"</span> @<span class="hljs-attr">onclick</span>=<span class="hljs-string">"SafeOperation"</span>&gt;</span>
                    å®‰å…¨æ“ä½œ
                <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        
    <span class="hljs-tag">&lt;/<span class="hljs-name">EnhancedErrorBoundary</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"external-content"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å¤–éƒ¨å†…å®¹ï¼ˆä¸å—é”™è¯¯è¾¹ç•Œä¿æŠ¤ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™ä¸ªåŒºåŸŸçš„å†…å®¹ä¸ä¼šå—åˆ°å†…éƒ¨ç»„ä»¶é”™è¯¯çš„å½±å“<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
@code {
    private void OnErrorOccurred(Exception ex)
    {
        // å¤„ç†é”™è¯¯ï¼Œå¯ä»¥å‘é€åˆ°ç›‘æ§ç³»ç»Ÿ
        Console.WriteLine($"æ•è·åˆ°é”™è¯¯: {ex.Message}");
    }
    
    private void SafeOperation()
    {
        // å®‰å…¨æ“ä½œä¸ä¼šæŠ›å‡ºå¼‚å¸¸
    }
}
</code></pre>
<h2 data-id="heading-12">4. è™šæ‹ŸåŒ–ç»„ä»¶</h2>
<h3 data-id="heading-13">4.1 åŸºç¡€è™šæ‹ŸåŒ–åˆ—è¡¨</h3>
<pre><code class="hljs language-csharp" lang="csharp">&lt;!-- VirtualizedList.razor --&gt;
@using Microsoft.AspNetCore.Components.Web.Virtualization

&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"virtualized-list"</span> style=<span class="hljs-string">"height: 400px; overflow: auto;"</span>&gt;
    &lt;Virtualize Items=<span class="hljs-string">"Items"</span> Context=<span class="hljs-string">"item"</span> OverscanCount=<span class="hljs-string">"10"</span>&gt;
        &lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"list-item"</span>&gt;
            &lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"item-content"</span>&gt;
                &lt;h5&gt;@item.Name&lt;/h5&gt;
                &lt;p&gt;@item.Description&lt;/p&gt;
                &lt;small <span class="hljs-keyword">class</span>=<span class="hljs-string">"text-muted"</span>&gt;ID: @item.Id&lt;/small&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/Virtualize&gt;
&lt;/div&gt;
@code {
    [<span class="hljs-meta">Parameter</span>]
    <span class="hljs-keyword">public</span> List&lt;DataItem&gt; Items { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-keyword">new</span>();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DataItem</span>
    {
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Id { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Name { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-built_in">string</span>.Empty;
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Description { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-built_in">string</span>.Empty;
        <span class="hljs-keyword">public</span> DateTime CreatedAt { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    }
}
</code></pre>
<h3 data-id="heading-14">4.2 å¼‚æ­¥æ•°æ®è™šæ‹ŸåŒ–</h3>
<pre><code class="hljs language-typescript" lang="typescript">&lt;!-- <span class="hljs-title class_">AsyncVirtualizedList</span>.<span class="hljs-property">razor</span> --&gt;
<span class="hljs-meta">@using</span> <span class="hljs-title class_">Microsoft</span>.<span class="hljs-property">AspNetCore</span>.<span class="hljs-property">Components</span>.<span class="hljs-property">Web</span>.<span class="hljs-property">Virtualization</span>

&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"virtualized-container"</span>&gt;
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"virtualized-header"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>@Title<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stats"</span>&gt;</span>
            æ˜¾ç¤º <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>@visibleItemCount<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> ä¸ªé¡¹ç›®
            (æ€»å…± <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>@totalSize<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> ä¸ª)
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"virtualized-list"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height: 500px;"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Virtualize</span> <span class="hljs-attr">ItemsProvider</span>=<span class="hljs-string">"LoadItems"</span> <span class="hljs-attr">Context</span>=<span class="hljs-string">"item"</span> 
                   <span class="hljs-attr">OverscanCount</span>=<span class="hljs-string">"5"</span> @<span class="hljs-attr">ref</span>=<span class="hljs-string">"virtualizeRef"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"virtual-item @(item.IsSpecial ? "</span><span class="hljs-attr">special</span>" <span class="hljs-attr">:</span> "")"&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item-index"</span>&gt;</span>#@item.Index<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item-content"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h6</span>&gt;</span>@item.Name<span class="hljs-tag">&lt;/<span class="hljs-name">h6</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>@item.Description<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item-meta"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"badge bg-secondary"</span>&gt;</span>@item.Category<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">small</span>&gt;</span>@item.CreatedAt.ToString("yyyy-MM-dd HH:mm")<span class="hljs-tag">&lt;/<span class="hljs-name">small</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item-actions"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-sm btn-outline-primary"</span> 
                            @<span class="hljs-attr">onclick</span>=<span class="hljs-string">"() =&gt; OnItemClick(item)"</span>&gt;</span>
                        æŸ¥çœ‹
                    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            
            <span class="hljs-tag">&lt;<span class="hljs-name">Placeholder</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"virtual-item loading"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item-content"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"skeleton-line"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"skeleton-line short"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">Placeholder</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Virtualize</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"virtualized-footer"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-outline-secondary"</span> @<span class="hljs-attr">onclick</span>=<span class="hljs-string">"RefreshData"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-sync"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> åˆ·æ–°
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"loading-indicator"</span>&gt;</span>
            @if (isLoading)
            {
                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-spinner fa-spin"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            }
        <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/div&gt;
<span class="hljs-meta">@code</span> {
    [<span class="hljs-title class_">Parameter</span>]
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> <span class="hljs-title class_">Title</span> { get; set; } = <span class="hljs-string">"è™šæ‹ŸåŒ–åˆ—è¡¨"</span>;

    [<span class="hljs-title class_">Parameter</span>]
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">EventCallback</span>&lt;<span class="hljs-title class_">VirtualItem</span>&gt; <span class="hljs-title class_">OnItemClick</span> { get; set; }

    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Virtualize</span>&lt;<span class="hljs-title class_">VirtualItem</span>&gt;? virtualizeRef;
    <span class="hljs-keyword">private</span> int totalSize = <span class="hljs-number">1000</span>;
    <span class="hljs-keyword">private</span> int visibleItemCount;
    <span class="hljs-keyword">private</span> bool isLoading;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title class_">ValueTask</span>&lt;<span class="hljs-title class_">ItemsProviderResult</span>&lt;<span class="hljs-title class_">VirtualItem</span>&gt;&gt; <span class="hljs-title class_">LoadItems</span>(
        <span class="hljs-title class_">ItemsProviderRequest</span> request)
    {
        isLoading = <span class="hljs-literal">true</span>;
        <span class="hljs-title class_">StateHasChanged</span>();

        <span class="hljs-keyword">try</span>
        {
            <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ</span>
            <span class="hljs-keyword">await</span> <span class="hljs-title class_">Task</span>.<span class="hljs-title class_">Delay</span>(<span class="hljs-number">100</span>);

            <span class="hljs-keyword">var</span> totalItems = <span class="hljs-keyword">await</span> <span class="hljs-title class_">GetTotalItemCountAsync</span>();
            <span class="hljs-keyword">var</span> items = <span class="hljs-keyword">await</span> <span class="hljs-title class_">GetItemsAsync</span>(request.<span class="hljs-property">StartIndex</span>, request.<span class="hljs-property">Count</span>);

            visibleItemCount = items.<span class="hljs-property">Count</span>;

            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ItemsProviderResult</span>&lt;<span class="hljs-title class_">VirtualItem</span>&gt;(items, totalItems);
        }
        <span class="hljs-keyword">finally</span>
        {
            isLoading = <span class="hljs-literal">false</span>;
            <span class="hljs-title class_">StateHasChanged</span>();
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title class_">Task</span>&lt;int&gt; <span class="hljs-title class_">GetTotalItemCountAsync</span>()
    {
        <span class="hljs-comment">// æ¨¡æ‹Ÿä»APIè·å–æ€»æ•°</span>
        <span class="hljs-keyword">await</span> <span class="hljs-title class_">Task</span>.<span class="hljs-title class_">Delay</span>(<span class="hljs-number">50</span>);
        <span class="hljs-keyword">return</span> totalSize;
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title class_">Task</span>&lt;<span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">VirtualItem</span>&gt;&gt; <span class="hljs-title class_">GetItemsAsync</span>(int startIndex, int count)
    {
        <span class="hljs-comment">// æ¨¡æ‹Ÿä»APIè·å–æ•°æ®</span>
        <span class="hljs-keyword">await</span> <span class="hljs-title class_">Task</span>.<span class="hljs-title class_">Delay</span>(<span class="hljs-number">100</span>);

        <span class="hljs-keyword">var</span> items = <span class="hljs-keyword">new</span> <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">VirtualItem</span>&gt;();
        <span class="hljs-keyword">for</span> (int i = <span class="hljs-number">0</span>; i &lt; count &amp;&amp; startIndex + i &lt; totalSize; i++)
        {
            <span class="hljs-keyword">var</span> index = startIndex + i;
            items.<span class="hljs-title class_">Add</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">VirtualItem</span>
            {
                <span class="hljs-title class_">Index</span> = index,
                <span class="hljs-title class_">Id</span> = <span class="hljs-title class_">Guid</span>.<span class="hljs-title class_">NewGuid</span>(),
                <span class="hljs-title class_">Name</span> = $<span class="hljs-string">"é¡¹ç›® {index + 1}"</span>,
                <span class="hljs-title class_">Description</span> = $<span class="hljs-string">"è¿™æ˜¯ç¬¬ {index + 1} ä¸ªé¡¹ç›®çš„æè¿°ä¿¡æ¯"</span>,
                <span class="hljs-title class_">Category</span> = <span class="hljs-title class_">GetCategory</span>(index),
                <span class="hljs-title class_">CreatedAt</span> = <span class="hljs-title class_">DateTime</span>.<span class="hljs-property">Now</span>.<span class="hljs-title class_">AddMinutes</span>(-index),
                <span class="hljs-title class_">IsSpecial</span> = index % <span class="hljs-number">7</span> == <span class="hljs-number">0</span>
            });
        }

        <span class="hljs-keyword">return</span> items;
    }

    <span class="hljs-keyword">private</span> <span class="hljs-built_in">string</span> <span class="hljs-title class_">GetCategory</span>(int index)
    {
        <span class="hljs-keyword">var</span> categories = <span class="hljs-keyword">new</span>[] { <span class="hljs-string">"æŠ€æœ¯"</span>, <span class="hljs-string">"å•†ä¸š"</span>, <span class="hljs-string">"è‰ºæœ¯"</span>, <span class="hljs-string">"ç§‘å­¦"</span>, <span class="hljs-string">"ä½“è‚²"</span> };
        <span class="hljs-keyword">return</span> categories[index % categories.<span class="hljs-property">Length</span>];
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-built_in">void</span> <span class="hljs-title class_">RefreshData</span>()
    {
        <span class="hljs-comment">// åˆ·æ–°è™šæ‹ŸåŒ–ç»„ä»¶</span>
        <span class="hljs-keyword">if</span> (virtualizeRef != <span class="hljs-literal">null</span>)
        {
            <span class="hljs-keyword">await</span> virtualizeRef.<span class="hljs-title class_">RefreshDataAsync</span>();
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VirtualItem</span>
    {
        <span class="hljs-keyword">public</span> int <span class="hljs-title class_">Index</span> { get; set; }
        <span class="hljs-keyword">public</span> <span class="hljs-title class_">Guid</span> <span class="hljs-title class_">Id</span> { get; set; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> <span class="hljs-title class_">Name</span> { get; set; } = <span class="hljs-built_in">string</span>.<span class="hljs-property">Empty</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> <span class="hljs-title class_">Description</span> { get; set; } = <span class="hljs-built_in">string</span>.<span class="hljs-property">Empty</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> <span class="hljs-title class_">Category</span> { get; set; } = <span class="hljs-built_in">string</span>.<span class="hljs-property">Empty</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-title class_">DateTime</span> <span class="hljs-title class_">CreatedAt</span> { get; set; }
        <span class="hljs-keyword">public</span> bool <span class="hljs-title class_">IsSpecial</span> { get; set; }
    }
}
</code></pre>
<h3 data-id="heading-15">4.3 è‡ªå®šä¹‰è™šæ‹ŸåŒ–ç½‘æ ¼</h3>
<pre><code class="hljs language-typescript" lang="typescript">&lt;!-- <span class="hljs-title class_">VirtualizedGrid</span>.<span class="hljs-property">razor</span> --&gt;
<span class="hljs-meta">@using</span> <span class="hljs-title class_">Microsoft</span>.<span class="hljs-property">AspNetCore</span>.<span class="hljs-property">Components</span>.<span class="hljs-property">Web</span>.<span class="hljs-property">Virtualization</span>

&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"virtualized-grid-container"</span>&gt;
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"grid-header"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>@Title<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"grid-controls"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
                åˆ—æ•°:
                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span> @<span class="hljs-attr">bind</span>=<span class="hljs-string">"columns"</span> @<span class="hljs-attr">bind:event</span>=<span class="hljs-string">"oninput"</span> 
                       <span class="hljs-attr">min</span>=<span class="hljs-string">"1"</span> <span class="hljs-attr">max</span>=<span class="hljs-string">"6"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-control form-control-sm"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
                é¡¹ç›®é«˜åº¦:
                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span> @<span class="hljs-attr">bind</span>=<span class="hljs-string">"itemHeight"</span> @<span class="hljs-attr">bind:event</span>=<span class="hljs-string">"oninput"</span> 
                       <span class="hljs-attr">min</span>=<span class="hljs-string">"50"</span> <span class="hljs-attr">max</span>=<span class="hljs-string">"300"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-control form-control-sm"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"virtualized-grid"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height: 600px;"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Virtualize</span> <span class="hljs-attr">ItemsProvider</span>=<span class="hljs-string">"LoadGridItems"</span> <span class="hljs-attr">Context</span>=<span class="hljs-string">"item"</span> 
                   <span class="hljs-attr">OverscanCount</span>=<span class="hljs-string">"8"</span> @<span class="hljs-attr">ref</span>=<span class="hljs-string">"virtualizeRef"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"grid-item"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height: @(itemHeight)px;"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"grid-item-content @(item.IsFeatured ? "</span><span class="hljs-attr">featured</span>" <span class="hljs-attr">:</span> "")"&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item-header"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item-badge"</span>&gt;</span>#@item.Index<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item-category"</span>&gt;</span>@item.Category<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h6</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item-title"</span>&gt;</span>@item.Title<span class="hljs-tag">&lt;/<span class="hljs-name">h6</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item-description"</span>&gt;</span>@item.Description<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item-stats"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-eye"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> @item.Views
                        <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stat"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-heart"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> @item.Likes
                        <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item-footer"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">small</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-muted"</span>&gt;</span>
                            @item.CreatedAt.ToString("MM/dd/yyyy")
                        <span class="hljs-tag">&lt;/<span class="hljs-name">small</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-sm btn-outline-primary"</span> 
                                @<span class="hljs-attr">onclick</span>=<span class="hljs-string">"() =&gt; OnItemAction(item)"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-ellipsis-h"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Virtualize</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/div&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-class">.virtualized-grid-container</span> {
        <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    }

    <span class="hljs-selector-class">.grid-header</span> {
        <span class="hljs-attribute">display</span>: flex;
        <span class="hljs-attribute">justify-content</span>: space-between;
        <span class="hljs-attribute">align-items</span>: center;
        <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">1rem</span>;
    }

    <span class="hljs-selector-class">.grid-controls</span> {
        <span class="hljs-attribute">display</span>: flex;
        <span class="hljs-attribute">gap</span>: <span class="hljs-number">1rem</span>;
        <span class="hljs-attribute">align-items</span>: center;
    }

    <span class="hljs-selector-class">.grid-controls</span> <span class="hljs-selector-tag">label</span> {
        <span class="hljs-attribute">display</span>: flex;
        <span class="hljs-attribute">align-items</span>: center;
        <span class="hljs-attribute">gap</span>: <span class="hljs-number">0.5rem</span>;
        <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
    }

    <span class="hljs-selector-class">.virtualized-grid</span> {
        <span class="hljs-attribute">display</span>: grid;
        <span class="hljs-attribute">gap</span>: <span class="hljs-number">1rem</span>;
        <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.5rem</span>;
    }

    <span class="hljs-selector-class">.grid-item</span> {
        <span class="hljs-attribute">break-inside</span>: avoid;
    }

    <span class="hljs-selector-class">.grid-item-content</span> {
        <span class="hljs-attribute">background</span>: white;
        <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#dee2e6</span>;
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">0.375rem</span>;
        <span class="hljs-attribute">padding</span>: <span class="hljs-number">1rem</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
        <span class="hljs-attribute">display</span>: flex;
        <span class="hljs-attribute">flex-direction</span>: column;
        <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.2s</span> ease;
    }

    <span class="hljs-selector-class">.grid-item-content</span><span class="hljs-selector-pseudo">:hover</span> {
        <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0.5rem</span> <span class="hljs-number">1rem</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.15</span>);
        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">2px</span>);
    }

    <span class="hljs-selector-class">.grid-item-content</span><span class="hljs-selector-class">.featured</span> {
        <span class="hljs-attribute">border-left</span>: <span class="hljs-number">4px</span> solid <span class="hljs-number">#007bff</span>;
        <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">135deg</span>, <span class="hljs-number">#f8f9fa</span> <span class="hljs-number">0%</span>, <span class="hljs-number">#e9ecef</span> <span class="hljs-number">100%</span>);
    }

    <span class="hljs-selector-class">.item-header</span> {
        <span class="hljs-attribute">display</span>: flex;
        <span class="hljs-attribute">justify-content</span>: space-between;
        <span class="hljs-attribute">align-items</span>: center;
        <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0.5rem</span>;
    }

    <span class="hljs-selector-class">.item-badge</span> {
        <span class="hljs-attribute">background</span>: <span class="hljs-number">#6c757d</span>;
        <span class="hljs-attribute">color</span>: white;
        <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.25rem</span> <span class="hljs-number">0.5rem</span>;
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">0.25rem</span>;
        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.75rem</span>;
        <span class="hljs-attribute">font-weight</span>: bold;
    }

    <span class="hljs-selector-class">.item-category</span> {
        <span class="hljs-attribute">background</span>: <span class="hljs-number">#e9ecef</span>;
        <span class="hljs-attribute">color</span>: <span class="hljs-number">#495057</span>;
        <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.25rem</span> <span class="hljs-number">0.5rem</span>;
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">0.25rem</span>;
        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.75rem</span>;
    }

    <span class="hljs-selector-class">.item-title</span> {
        <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;
        <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0.5rem</span>;
        <span class="hljs-attribute">flex-grow</span>: <span class="hljs-number">1</span>;
    }

    <span class="hljs-selector-class">.item-description</span> {
        <span class="hljs-attribute">color</span>: <span class="hljs-number">#6c757d</span>;
        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.875rem</span>;
        <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">1rem</span>;
        <span class="hljs-attribute">flex-grow</span>: <span class="hljs-number">2</span>;
        <span class="hljs-attribute">overflow</span>: hidden;
        <span class="hljs-attribute">display</span>: -webkit-box;
        -webkit-line-clamp: <span class="hljs-number">3</span>;
        -webkit-box-orient: vertical;
    }

    <span class="hljs-selector-class">.item-stats</span> {
        <span class="hljs-attribute">display</span>: flex;
        <span class="hljs-attribute">gap</span>: <span class="hljs-number">1rem</span>;
        <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">1rem</span>;
    }

    <span class="hljs-selector-class">.stat</span> {
        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.875rem</span>;
        <span class="hljs-attribute">color</span>: <span class="hljs-number">#6c757d</span>;
    }

    <span class="hljs-selector-class">.item-footer</span> {
        <span class="hljs-attribute">display</span>: flex;
        <span class="hljs-attribute">justify-content</span>: space-between;
        <span class="hljs-attribute">align-items</span>: center;
        <span class="hljs-attribute">margin-top</span>: auto;
    }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
<span class="hljs-meta">@code</span> {
    [<span class="hljs-title class_">Parameter</span>]
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> <span class="hljs-title class_">Title</span> { get; set; } = <span class="hljs-string">"è™šæ‹ŸåŒ–ç½‘æ ¼"</span>;

    [<span class="hljs-title class_">Parameter</span>]
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">EventCallback</span>&lt;<span class="hljs-title class_">GridItem</span>&gt; <span class="hljs-title class_">OnItemAction</span> { get; set; }

    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Virtualize</span>&lt;<span class="hljs-title class_">GridItem</span>&gt;? virtualizeRef;
    <span class="hljs-keyword">private</span> int totalSize = <span class="hljs-number">500</span>;
    <span class="hljs-keyword">private</span> int columns = <span class="hljs-number">3</span>;
    <span class="hljs-keyword">private</span> int itemHeight = <span class="hljs-number">150</span>;

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-built_in">void</span> <span class="hljs-title class_">OnParametersSet</span>()
    {
        <span class="hljs-comment">// å½“åˆ—æ•°æ”¹å˜æ—¶æ›´æ–°ç½‘æ ¼å¸ƒå±€</span>
        <span class="hljs-title class_">UpdateGridLayout</span>();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-title class_">UpdateGridLayout</span>()
    {
        <span class="hljs-comment">// åŠ¨æ€æ›´æ–°CSSç½‘æ ¼æ¨¡æ¿</span>
        <span class="hljs-keyword">var</span> style = $@<span class="hljs-string">"
            .virtualized-grid {{
                grid-template-columns: repeat({columns}, 1fr);
            }}
        "</span>;
        <span class="hljs-comment">// åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ‚¨å¯èƒ½éœ€è¦ä½¿ç”¨JavaScriptäº’æ“ä½œæ¥åŠ¨æ€æ›´æ–°æ ·å¼</span>
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title class_">ValueTask</span>&lt;<span class="hljs-title class_">ItemsProviderResult</span>&lt;<span class="hljs-title class_">GridItem</span>&gt;&gt; <span class="hljs-title class_">LoadGridItems</span>(
        <span class="hljs-title class_">ItemsProviderRequest</span> request)
    {
        <span class="hljs-comment">// æ¨¡æ‹Ÿå¼‚æ­¥æ•°æ®åŠ è½½</span>
        <span class="hljs-keyword">await</span> <span class="hljs-title class_">Task</span>.<span class="hljs-title class_">Delay</span>(<span class="hljs-number">150</span>);

        <span class="hljs-keyword">var</span> totalItems = <span class="hljs-keyword">await</span> <span class="hljs-title class_">GetTotalGridItemCountAsync</span>();
        <span class="hljs-keyword">var</span> items = <span class="hljs-keyword">await</span> <span class="hljs-title class_">GetGridItemsAsync</span>(request.<span class="hljs-property">StartIndex</span>, request.<span class="hljs-property">Count</span>);

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ItemsProviderResult</span>&lt;<span class="hljs-title class_">GridItem</span>&gt;(items, totalItems);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title class_">Task</span>&lt;int&gt; <span class="hljs-title class_">GetTotalGridItemCountAsync</span>()
    {
        <span class="hljs-keyword">await</span> <span class="hljs-title class_">Task</span>.<span class="hljs-title class_">Delay</span>(<span class="hljs-number">50</span>);
        <span class="hljs-keyword">return</span> totalSize;
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title class_">Task</span>&lt;<span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">GridItem</span>&gt;&gt; <span class="hljs-title class_">GetGridItemsAsync</span>(int startIndex, int count)
    {
        <span class="hljs-keyword">await</span> <span class="hljs-title class_">Task</span>.<span class="hljs-title class_">Delay</span>(<span class="hljs-number">100</span>);

        <span class="hljs-keyword">var</span> items = <span class="hljs-keyword">new</span> <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">GridItem</span>&gt;();
        <span class="hljs-keyword">var</span> categories = <span class="hljs-keyword">new</span>[] { <span class="hljs-string">"è®¾è®¡"</span>, <span class="hljs-string">"å¼€å‘"</span>, <span class="hljs-string">"è¥é”€"</span>, <span class="hljs-string">"å†…å®¹"</span>, <span class="hljs-string">"æ”¯æŒ"</span> };

        <span class="hljs-keyword">for</span> (int i = <span class="hljs-number">0</span>; i &lt; count &amp;&amp; startIndex + i &lt; totalSize; i++)
        {
            <span class="hljs-keyword">var</span> index = startIndex + i;
            <span class="hljs-keyword">var</span> random = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Random</span>(index);

            items.<span class="hljs-title class_">Add</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">GridItem</span>
            {
                <span class="hljs-title class_">Index</span> = index,
                <span class="hljs-title class_">Id</span> = <span class="hljs-title class_">Guid</span>.<span class="hljs-title class_">NewGuid</span>(),
                <span class="hljs-title class_">Title</span> = $<span class="hljs-string">"ç½‘æ ¼é¡¹ç›® {index + 1}"</span>,
                <span class="hljs-title class_">Description</span> = <span class="hljs-title class_">GenerateDescription</span>(index),
                <span class="hljs-title class_">Category</span> = categories[random.<span class="hljs-title class_">Next</span>(categories.<span class="hljs-property">Length</span>)],
                <span class="hljs-title class_">Views</span> = random.<span class="hljs-title class_">Next</span>(<span class="hljs-number">1000</span>, <span class="hljs-number">10000</span>),
                <span class="hljs-title class_">Likes</span> = random.<span class="hljs-title class_">Next</span>(<span class="hljs-number">10</span>, <span class="hljs-number">500</span>),
                <span class="hljs-title class_">CreatedAt</span> = <span class="hljs-title class_">DateTime</span>.<span class="hljs-property">Now</span>.<span class="hljs-title class_">AddDays</span>(-random.<span class="hljs-title class_">Next</span>(<span class="hljs-number">365</span>)),
                <span class="hljs-title class_">IsFeatured</span> = index % <span class="hljs-number">11</span> == <span class="hljs-number">0</span>
            });
        }

        <span class="hljs-keyword">return</span> items;
    }

    <span class="hljs-keyword">private</span> <span class="hljs-built_in">string</span> <span class="hljs-title class_">GenerateDescription</span>(int index)
    {
        <span class="hljs-keyword">var</span> descriptions = <span class="hljs-keyword">new</span>[]
        {
            <span class="hljs-string">"è¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰è¶£çš„é¡¹ç›®ï¼Œå±•ç¤ºäº†æœ€æ–°çš„æŠ€æœ¯è¶‹åŠ¿ã€‚"</span>,
            <span class="hljs-string">"åˆ›æ–°æ€§çš„è§£å†³æ–¹æ¡ˆï¼Œè§£å†³äº†é•¿æœŸå­˜åœ¨çš„é—®é¢˜ã€‚"</span>,
            <span class="hljs-string">"ç”¨æˆ·å‹å¥½çš„è®¾è®¡ï¼Œæä¾›äº†å‡ºè‰²çš„ç”¨æˆ·ä½“éªŒã€‚"</span>,
            <span class="hljs-string">"é«˜æ€§èƒ½å®ç°ï¼Œä¼˜åŒ–äº†èµ„æºä½¿ç”¨å’Œå“åº”æ—¶é—´ã€‚"</span>,
            <span class="hljs-string">"è·¨å¹³å°å…¼å®¹ï¼Œæ”¯æŒå¤šç§è®¾å¤‡å’Œæµè§ˆå™¨ã€‚"</span>
        };
        <span class="hljs-keyword">return</span> descriptions[index % descriptions.<span class="hljs-property">Length</span>];
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GridItem</span>
    {
        <span class="hljs-keyword">public</span> int <span class="hljs-title class_">Index</span> { get; set; }
        <span class="hljs-keyword">public</span> <span class="hljs-title class_">Guid</span> <span class="hljs-title class_">Id</span> { get; set; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> <span class="hljs-title class_">Title</span> { get; set; } = <span class="hljs-built_in">string</span>.<span class="hljs-property">Empty</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> <span class="hljs-title class_">Description</span> { get; set; } = <span class="hljs-built_in">string</span>.<span class="hljs-property">Empty</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> <span class="hljs-title class_">Category</span> { get; set; } = <span class="hljs-built_in">string</span>.<span class="hljs-property">Empty</span>;
        <span class="hljs-keyword">public</span> int <span class="hljs-title class_">Views</span> { get; set; }
        <span class="hljs-keyword">public</span> int <span class="hljs-title class_">Likes</span> { get; set; }
        <span class="hljs-keyword">public</span> <span class="hljs-title class_">DateTime</span> <span class="hljs-title class_">CreatedAt</span> { get; set; }
        <span class="hljs-keyword">public</span> bool <span class="hljs-title class_">IsFeatured</span> { get; set; }
    }
}
</code></pre>
<h2 data-id="heading-16">æ€»ç»“</h2>
<p>æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†Blazorä¸­çš„å››ä¸ªé«˜çº§ç»„ä»¶å¼€å‘ç‰¹æ€§ï¼š</p>
<ol>
<li><strong>æ¸²æŸ“ç‰‡æ®µï¼ˆRenderFragmentï¼‰</strong> ï¼šæä¾›äº†çµæ´»çš„ç»„ä»¶å†…å®¹æ³¨å…¥æœºåˆ¶</li>
<li><strong>åŠ¨æ€ç»„ä»¶</strong>ï¼šæ”¯æŒè¿è¡Œæ—¶ç»„ä»¶ç±»å‹è§£æå’Œæ¸²æŸ“</li>
<li><strong>é”™è¯¯è¾¹ç•Œ</strong>ï¼šä¼˜é›…åœ°å¤„ç†ç»„ä»¶æ ‘ä¸­çš„å¼‚å¸¸</li>
<li><strong>è™šæ‹ŸåŒ–ç»„ä»¶</strong>ï¼šä¼˜åŒ–å¤§æ•°æ®é›†çš„æ€§èƒ½è¡¨ç°</li>
</ol>
<p>è¿™äº›é«˜çº§ç‰¹æ€§èƒ½å¤Ÿå¸®åŠ©æ‚¨æ„å»ºæ›´åŠ å¥å£®ã€çµæ´»å’Œé«˜æ€§èƒ½çš„Blazoråº”ç”¨ç¨‹åºã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œå»ºè®®æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ¨¡å¼ï¼Œå¹¶æ³¨æ„æ€§èƒ½ä¼˜åŒ–å’Œé”™è¯¯å¤„ç†ã€‚</p>
<p>ä»¥ä¸Šå°±æ˜¯ã€ŠASP.NET Core Blazorè¿›é˜¶1ï¼šé«˜çº§ç»„ä»¶å¼€å‘ã€‹çš„å…¨éƒ¨å†…å®¹ï¼Œå¸Œæœ›ä½ æœ‰æ‰€æ”¶è·ã€‚<strong>å…³æ³¨ã€ç‚¹èµï¼ŒæŒç»­åˆ†äº«</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å‘¨åˆŠç¬¬439æœŸï¼ˆ2025å¹´11æœˆ3æ—¥â€“11æœˆ9æ—¥ï¼‰]]></title>    <link>https://juejin.cn/post/7570491473033789449</link>    <guid>https://juejin.cn/post/7570491473033789449</guid>    <pubDate>2025-11-10T03:50:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570491473033789449" data-draft-id="7570564840428257307" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å‘¨åˆŠç¬¬439æœŸï¼ˆ2025å¹´11æœˆ3æ—¥â€“11æœˆ9æ—¥ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-11-10T03:50:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘å®‰ä¸œå°¼"/> <meta itemprop="url" content="https://juejin.cn/user/1521379823340792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å‘¨åˆŠç¬¬439æœŸï¼ˆ2025å¹´11æœˆ3æ—¥â€“11æœˆ9æ—¥ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379823340792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘å®‰ä¸œå°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T03:50:44.000Z" title="Mon Nov 10 2025 03:50:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ğŸ“¢å®£è¨€ï¼šæˆ‘å·²ç»è®¡åˆ’å¹¶å¼€å§‹å®è·µï¼šæ¯å‘¨é€æœŸç¿»è¯‘ã€Šå‰ç«¯å‘¨åˆŠã€‹å†…çš„æ¯ç¯‡æ–‡ç« ï¼Œå¹¶å°†å…¶æ•´ç†å‘å¸ƒåˆ° GitHub ä»“åº“ä¸­ï¼ŒæŒç»­æ›´æ·±åº¦çš„åˆ†äº«ã€‚ æ¬¢è¿å¤§å®¶è®¿é—®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN%2Ffrontend-weekly-digest-cn" target="_blank" title="https://github.com/TUARAN/frontend-weekly-digest-cn" ref="nofollow noopener noreferrer">github.com/TUARAN/fronâ€¦</a> é¡ºæ‰‹ç‚¹ä¸ª â­ star æ”¯æŒï¼Œæ˜¯æˆ‘æŒç»­è¾“å‡ºçš„ç»­èˆªç”µæ± ğŸ”‹âœ¨ï¼</p>
<p><strong>æ¯å‘¨æ›´æ–°å›½å¤–è®ºå›çš„å‰ç«¯çƒ­é—¨æ–‡ç« ï¼Œæ¨èå¤§å®¶é˜…è¯»/ç¿»è¯‘ï¼Œç´§è·Ÿæ—¶äº‹ï¼ŒæŒæ¡å‰ç«¯æŠ€æœ¯åŠ¨æ€ï¼Œä¹Ÿä¸ºå†™ä½œæˆ–çªç ´æ–°é¢†åŸŸæä¾›çµæ„Ÿ~</strong></p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c47d25a815c405485c9fab2dd7ed104~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763351443&amp;x-signature=u7mCxs8Vm0YE7Z6dwnTAto2oKxE%3D" alt="å¾®ä¿¡å›¾ç‰‡_20251110114720_328.png" loading="lazy"/></p>
<p>ä¸Šå‘¨ï¼ŒTypeScript ä¹‹çˆ¶ Anders Hejlsberg è°ˆ AI æ—¶ä»£çš„ç±»å‹å®‰å…¨ï¼Œ Chrome DevTools æ–°å¢å•è¯·æ±‚é™é€Ÿï¼Œå†åˆ° CSS æ»šåŠ¨é©±åŠ¨åŠ¨ç”»ä¸ View Transition çš„é«˜é˜¶ç©æ³•ï¼Œæ•´ä¸ªå‰ç«¯ç”Ÿæ€æ­£å˜å¾—è¶Šæ¥è¶Šæ™ºèƒ½ä¸æµç•…ã€‚React 19 çš„æ–°ç»„ä»¶ã€Remix çš„å» React åŒ–æ”¹é©ï¼Œä¹Ÿè®©æˆ‘ä»¬å†æ¬¡æ„è¯†åˆ°ï¼šæ¡†æ¶çš„ç¨³å®šä¸æ¼”åŒ–ï¼Œæ˜¯ä¸€åœºâ€œæ— å£°çš„æ€§èƒ½æˆ˜äº‰â€ã€‚</p>
<h2 data-id="heading-0">ğŸ—‚ æœ¬æœŸç²¾é€‰ç›®å½•</h2>
<h2 data-id="heading-1">Web å¼€å‘</h2>
<p>ğŸ”¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fmswjs.io%2Fblog%2Fserver-sent-events-are-here" target="_blank" title="https://mswjs.io/blog/server-sent-events-are-here" ref="nofollow noopener noreferrer">Server-Sent Events Are Here!</a>ï¼šMSW æ¨å‡ºåŸç”Ÿ SSE æ”¯æŒï¼Œè®©æµè§ˆå™¨å®æ—¶æ¨é€æ›´ç®€å•ã€å¯æ§ã€‚</p>
<p>ğŸ”¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.blog%2Fdeveloper-skills%2Fprogramming-languages-and-frameworks%2Ftypescripts-rise-in-the-ai-era-insights-from-lead-architect-anders-hejlsberg%2F" target="_blank" title="https://github.blog/developer-skills/programming-languages-and-frameworks/typescripts-rise-in-the-ai-era-insights-from-lead-architect-anders-hejlsberg/" ref="nofollow noopener noreferrer">TypeScriptâ€™s rise in the AI era: Insights from Lead Architect, Anders Hejlsberg</a>ï¼šTypeScript ä¹‹çˆ¶è°ˆ AI æ—¶ä»£ï¼šç±»å‹å®‰å…¨ä¸ºä½•æ¯”ä»¥å¾€æ›´é‡è¦ã€‚</p>
<p>ğŸ”¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.debugbear.com%2Fblog%2Fchrome-devtools-throttle-individual-request" target="_blank" title="https://www.debugbear.com/blog/chrome-devtools-throttle-individual-request" ref="nofollow noopener noreferrer">How To Throttle Specific Requests In Chrome DevTools</a>ï¼šChrome DevTools æ–°åŠŸèƒ½ï¼šå•ç‹¬æ§åˆ¶ç‰¹å®šè¯·æ±‚çš„é€Ÿç‡ï¼ŒçœŸå®è¿˜åŸæ…¢ç½‘ç¯å¢ƒã€‚</p>
<p>ğŸ”¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fcss-tricks.com%2Fexplaining-the-accessible-benefits-of-using-semantic-html-elements%2F" target="_blank" title="https://css-tricks.com/explaining-the-accessible-benefits-of-using-semantic-html-elements/" ref="nofollow noopener noreferrer">Explaining the Accessible Benefits of Using Semantic HTML Elements</a>ï¼šç”¨è¯­ä¹‰åŒ–æ ‡ç­¾æå‡æ— éšœç¢ä½“éªŒï¼ŒHTML çš„äººæ–‡ä»·å€¼è¢«é‡æ–°å¼ºè°ƒã€‚</p>
<p>ğŸ”¹<a href="https://link.juejin.cn?target=https%3A%2F%2Ftympanus.net%2Fcodrops%2F2025%2F11%2F04%2Fcreating-3d-scroll-driven-text-animations-with-css-and-gsap%2F" target="_blank" title="https://tympanus.net/codrops/2025/11/04/creating-3d-scroll-driven-text-animations-with-css-and-gsap/" ref="nofollow noopener noreferrer">Creating 3D Scroll-Driven Text Animations with CSS and GSAP</a>ï¼šç»“åˆ CSS ä¸ GSAP æ‰“é€ æ»šåŠ¨é©±åŠ¨çš„ 3D æ–‡æœ¬åŠ¨ç”»ï¼Œæ²‰æµ¸æ„Ÿæ‹‰æ»¡ã€‚</p>
<p>ğŸ”¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fthenewstack.io%2Fwhy-frontend-developers-should-ditch-dark-patterns%2F" target="_blank" title="https://thenewstack.io/why-frontend-developers-should-ditch-dark-patterns/" ref="nofollow noopener noreferrer">Why Frontend Developers Should Ditch Dark Patterns</a>ï¼šåˆ«å†ç”¨â€œé»‘æš—æ¨¡å¼â€æ“æ§ç”¨æˆ·è¡Œä¸ºï¼Œè®¾è®¡ä¼¦ç†æ­£åœ¨æˆä¸ºå¼€å‘è®®é¢˜ã€‚</p>
<h2 data-id="heading-2">CSS</h2>
<p>ğŸ”¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fcssence.com%2F2025%2Fscroll-margin-scroll-padding%2F" target="_blank" title="https://cssence.com/2025/scroll-margin-scroll-padding/" ref="nofollow noopener noreferrer">Instant snapport: Tidbits about scroll-margin and scroll-padding</a>ï¼šæ·±å…¥è§£æ <code>scroll-margin</code> ä¸ <code>scroll-padding</code> çš„æ»šåŠ¨æ•æ‰æœºåˆ¶ã€‚</p>
<p>ğŸ”¹<a href="https://link.juejin.cn?target=https%3A%2F%2Ffrontendmasters.com%2Fblog%2Fstaggered-animation-with-css-sibling-functions%2F" target="_blank" title="https://frontendmasters.com/blog/staggered-animation-with-css-sibling-functions/" ref="nofollow noopener noreferrer">Staggered Animation with CSS sibling-* Functions</a>ï¼šåˆ©ç”¨ sibling-* å‡½æ•°å®ç°å»¶è¿ŸåŠ¨ç”»åºåˆ—ï¼Œæ— éœ€ JS å³å¯åˆ†æ­¥æ’­æ”¾ã€‚</p>
<p>ğŸ”¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fcss-tip.com%2Funiversal-focus%2F" target="_blank" title="https://css-tip.com/universal-focus/" ref="nofollow noopener noreferrer">The Universal Focus Ring</a>ï¼šç»Ÿä¸€çš„ç„¦ç‚¹ç¯æ ·å¼æ–¹æ¡ˆï¼Œå…¼é¡¾æ— éšœç¢ä¸è§†è§‰ä¸€è‡´æ€§ã€‚</p>
<p>ğŸ”¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fpiccalil.li%2Fblog%2Fsome-practical-examples-of-view-transitions-to-elevate-your-ui%2F" target="_blank" title="https://piccalil.li/blog/some-practical-examples-of-view-transitions-to-elevate-your-ui/" ref="nofollow noopener noreferrer">Some practical examples of view transitions to elevate your UI</a>ï¼šç”¨ View Transitions API ä¼˜åŒ–é¡µé¢åˆ‡æ¢ï¼ŒåŠ¨ç”»ä½“éªŒæ›´ä¸æ»‘ã€‚</p>
<p>ğŸ”¹<a href="https://link.juejin.cn?target=https%3A%2F%2Ffrontendmasters.com%2Fblog%2Fthe-weird-parts-of-position-sticky%2F" target="_blank" title="https://frontendmasters.com/blog/the-weird-parts-of-position-sticky/" ref="nofollow noopener noreferrer">The Weird Parts of position: sticky;</a>ï¼šé‚£äº›è®©äººè¿·æƒ‘çš„ <code>position: sticky</code> ç»†èŠ‚ï¼Œç»ˆäºæœ‰äººè®²æ¸…æ¥šäº†ã€‚</p>
<p>ğŸ”¹<a href="https://link.juejin.cn?target=https%3A%2F%2Ffrontendmasters.com%2Fblog%2Fperfectly-pointed-tooltips-all-four-sides%2F" target="_blank" title="https://frontendmasters.com/blog/perfectly-pointed-tooltips-all-four-sides/" ref="nofollow noopener noreferrer">Perfectly Pointed Tooltips: All Four Sides</a>ï¼šå®Œç¾å®ç°å››å‘æç¤ºæ°”æ³¡ï¼Œè§†è§‰ä¸äº¤äº’çš„å¹³è¡¡ä¹‹é“ã€‚</p>
<p>ğŸ”¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fcss-tricks.com%2Fthe-most-hated-css-feature-tan%2F" target="_blank" title="https://css-tricks.com/the-most-hated-css-feature-tan/" ref="nofollow noopener noreferrer">The â€œMost Hatedâ€ CSS Feature: tan()</a>ï¼štan() è¢«ç§°ä¸ºâ€œæœ€è®©äººè®¨åŒçš„ CSS ç‰¹æ€§â€ï¼Œä½†å…¶å®å¾ˆæœ‰ç”¨ã€‚</p>
<p>ğŸ”¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bram.us%2F2025%2F11%2F06%2Fcombining-scroll-driven-animations-with-starting-style%2F" target="_blank" title="https://www.bram.us/2025/11/06/combining-scroll-driven-animations-with-starting-style/" ref="nofollow noopener noreferrer">Combining Scroll-Driven Animations with @starting-style</a>ï¼šç»“åˆæ»šåŠ¨åŠ¨ç”»ä¸ <code>@starting-style</code>ï¼Œå®ç°æµç•…çš„å…¥åœºä¸è¿‡æ¸¡ã€‚</p>
<p>ğŸ”¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2Fcss-text-wrap-balance-vs-text-wrap-pretty%2F" target="_blank" title="https://blog.logrocket.com/css-text-wrap-balance-vs-text-wrap-pretty/" ref="nofollow noopener noreferrer">When to use CSS text-wrap: balance vs. text-wrap: pretty</a>ï¼š<code>text-wrap</code> çš„ä¸¤ç§æ¨¡å¼è¯¦è§£ï¼šå¹³è¡¡ vs ç¾è§‚ï¼Œä½•æ—¶è¯¥ç”¨å“ªç§ï¼Ÿ</p>
<p>ğŸ”¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fgarden.bradwoods.io%2Fnotes%2Fjavascript%2Fweb-api%2Fview-transition" target="_blank" title="https://garden.bradwoods.io/notes/javascript/web-api/view-transition" ref="nofollow noopener noreferrer">View Transition API</a>ï¼šView Transition API åŸç†è§£æï¼šæµè§ˆå™¨å¦‚ä½•å¹³æ»‘é‡ç»˜ã€‚</p>
<p>ğŸ”¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fsalehmubashar.com%2Fblog%2Fhtml-selects-are-actually-styleable-now" target="_blank" title="https://salehmubashar.com/blog/html-selects-are-actually-styleable-now" ref="nofollow noopener noreferrer">HTML Selects Are Actually Styleable Now</a>ï¼šHTML <code>&lt;select&gt;</code> ç»ˆäºå¯å®šåˆ¶æ ·å¼äº†ï¼CSS é©å‘½çš„åˆä¸€èƒœåˆ©ã€‚</p>
<h2 data-id="heading-3">JavaScript</h2>
<h3 data-id="heading-4">ç†è®ºç¯‡</h3>
<p>ğŸ”¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.polarsignals.com%2Fblog%2Fposts%2F2025%2F11%2F04%2Fjavascript-source-maps-internals" target="_blank" title="https://www.polarsignals.com/blog/posts/2025/11/04/javascript-source-maps-internals" ref="nofollow noopener noreferrer">The Inner Workings of JavaScript Source Maps</a>ï¼šå½»åº•ç†è§£ Source Map çš„åŸç†ä¸è°ƒè¯•æµç¨‹ã€‚</p>
<p>ğŸ”¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fjsdev.space%2Funderrated-js-features%2F" target="_blank" title="https://jsdev.space/underrated-js-features/" ref="nofollow noopener noreferrer">Mastering URLPattern for Cross-Platform Routing</a>ï¼šæŒæ¡ URLPatternï¼Œè®©å¤šå¹³å°è·¯ç”±æ›´æ™ºèƒ½ã€æ›´ç»Ÿä¸€ã€‚</p>
<p>ğŸ”¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.freecodecamp.org%2Fnews%2Fglobal-execution-context-and-temporal-dead-zone-explained%2F" target="_blank" title="https://www.freecodecamp.org/news/global-execution-context-and-temporal-dead-zone-explained/" ref="nofollow noopener noreferrer">How Do Global Execution Context and Temporal Dead Zone Work in JavaScript?</a>ï¼šå½»åº•ç†è§£å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸æš‚æ—¶æ€§æ­»åŒºï¼Œå‘Šåˆ« JS ä½œç”¨åŸŸå›°æƒ‘ã€‚</p>
<h3 data-id="heading-5">React ä¸“åŒº</h3>
<p>ğŸ”¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2Fremix-3-ditched-react%2F" target="_blank" title="https://blog.logrocket.com/remix-3-ditched-react/" ref="nofollow noopener noreferrer">Remix 3 ditched React: Should you stick with it?</a>ï¼šRemix 3 å®£å¸ƒå» React åŒ–ï¼Œæ˜¯å¦è¿˜å€¼å¾—ç»§ç»­ä½¿ç”¨ï¼Ÿ</p>
<p>ğŸ”¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fthenewstack.io%2Fwhy-reacts-boring-maturity-is-actually-its-main-strength%2F" target="_blank" title="https://thenewstack.io/why-reacts-boring-maturity-is-actually-its-main-strength/" ref="nofollow noopener noreferrer">Why Reactâ€™s â€˜Boringâ€™ Maturity Is Actually Its Main Strength</a>ï¼šReact çš„â€œæ— èŠæˆç†Ÿâ€åè€Œæ˜¯å…¶æœ€å¤§ä¼˜åŠ¿ï¼Œç¨³å®šæ‰æ˜¯ç”Ÿäº§åŠ›ã€‚</p>
<p>ğŸ”¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fjavascript.plainenglish.io%2Ftried-react-19s-activity-component-here-s-what-i-learned-b0f714003a65" target="_blank" title="https://javascript.plainenglish.io/tried-react-19s-activity-component-here-s-what-i-learned-b0f714003a65" ref="nofollow noopener noreferrer">Tried React 19â€™s Activity Component â€” Hereâ€™s What I Learned (With Code Examples)</a>ï¼šå®æµ‹ React 19 çš„ Activity ç»„ä»¶ï¼Œç”¨ä¾‹ä¸å±€é™å¹¶å­˜ã€‚</p>
<p>ğŸ”¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.wix.engineering%2Fpost%2F40-faster-interaction-how-wix-solved-react-s-hydration-problem-with-selective-hydration-and-suspen" target="_blank" title="https://www.wix.engineering/post/40-faster-interaction-how-wix-solved-react-s-hydration-problem-with-selective-hydration-and-suspen" ref="nofollow noopener noreferrer">40% Faster Interaction: How Wix Solved Reactâ€™s Hydration Problem with Selective Hydration and Suspense</a>ï¼šWix é€šè¿‡â€œé€‰æ‹©æ€§ Hydration + Suspenseâ€å®ç°äº¤äº’åŠ é€Ÿ 40%ï¼Œä¸º React æ€§èƒ½ä¼˜åŒ–æä¾›æ–°æ–¹å‘ã€‚</p>
<h3 data-id="heading-6">Angular</h3>
<p>ğŸ”¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.to%2Fthis-is-angular%2Fangular-authentication-with-cookies-in-10-minutes-41m8" target="_blank" title="https://dev.to/this-is-angular/angular-authentication-with-cookies-in-10-minutes-41m8" ref="nofollow noopener noreferrer">Angular Authentication with Cookies in 10 minutes</a>ï¼šç”¨ Cookie å®ç° Angular ç™»å½•è®¤è¯ï¼Œä»…éœ€ 10 åˆ†é’Ÿã€‚</p>
<hr/>
<h2 data-id="heading-7">ğŸ“Œ å°ç»“</h2>
<p>ä» SSEã€AI ä¸ TypeScript çš„èåˆï¼Œåˆ° View Transitions ä¸ Scroll åŠ¨ç”»çš„å…¨é¢çˆ†å‘ï¼Œè¿™ä¸€å‘¨çš„å‰ç«¯è¶‹åŠ¿éå¸¸æ˜ç¡®ï¼š <strong>Web æ­£åœ¨æˆä¸ºæ™ºèƒ½äº¤äº’ç³»ç»Ÿï¼Œè€Œä¸åªæ˜¯æ¸²æŸ“å¹³å°ã€‚</strong> å¼€å‘è€…ä¸å†åªæ˜¯â€œå†™é¡µé¢â€ï¼Œè€Œæ˜¯åœ¨å®šä¹‰ä¸€ç§æ–°çš„åº”ç”¨è¿è¡Œæ–¹å¼ã€‚</p>
<hr/>
<p>âœ… OKï¼Œä»¥ä¸Šå°±æ˜¯æœ¬æ¬¡åˆ†äº«ï¼Œæ¬¢è¿åŠ æˆ‘å¨ atar24ï¼Œå¤‡æ³¨ã€Œå‰ç«¯å‘¨åˆŠã€ï¼Œæˆ‘ä¼šé‚€è¯·ä½ è¿›äº¤æµç¾¤ğŸ‘‡</p>
<p>ğŸš€ æ¯å‘¨åˆ†äº«æŠ€æœ¯å¹²è´§</p>
<p>ğŸ ä¸å®šæœŸæŠ½å¥–ç¦åˆ©</p>
<p>ğŸ’¬ æœ‰é—®å¿…ç­”ï¼Œç¾¤å‹äº’åŠ©</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>