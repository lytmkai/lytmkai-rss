<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ææ¸…â€˜â€™æ—¶åŒºè®¾ç½®â€˜â€™ä»¥åŠMysqlçš„`DATETIME` å’Œ `TIMESTAMP`]]></title>    <link>https://juejin.cn/post/7587779957675655219</link>    <guid>https://juejin.cn/post/7587779957675655219</guid>    <pubDate>2025-12-26T07:29:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587779957675655219" data-draft-id="7587459328071090186" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ææ¸…â€˜â€™æ—¶åŒºè®¾ç½®â€˜â€™ä»¥åŠMysqlçš„`DATETIME` å’Œ `TIMESTAMP` "/> <meta itemprop="keywords" content="Java,MySQL"/> <meta itemprop="datePublished" content="2025-12-26T07:29:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èŠ±èŠ±æ— ç¼º"/> <meta itemprop="url" content="https://juejin.cn/user/2021343967862435"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ææ¸…â€˜â€™æ—¶åŒºè®¾ç½®â€˜â€™ä»¥åŠMysqlçš„`DATETIME` å’Œ `TIMESTAMP` 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2021343967862435/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èŠ±èŠ±æ— ç¼º
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T07:29:53.000Z" title="Fri Dec 26 2025 07:29:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ MySQL ä¸­ï¼Œ<code>DATETIME</code> å’Œ <code>TIMESTAMP</code> æ˜¯ä¸¤ç§å¸¸ç”¨çš„æ—¶é—´ç±»å‹ï¼Œå®ƒä»¬éƒ½èƒ½å­˜å‚¨æ—¥æœŸå’Œæ—¶é—´ï¼ˆæ ¼å¼ä¸º <code>'YYYY-MM-DD HH:MM:SS'</code>ï¼‰ï¼Œä½†åœ¨<strong>å­˜å‚¨æ–¹å¼ã€æ—¶åŒºå¤„ç†ã€å–å€¼èŒƒå›´ã€è‡ªåŠ¨æ›´æ–°è¡Œä¸º</strong>ç­‰æ–¹é¢æœ‰é‡è¦åŒºåˆ«ã€‚</p>
<p><strong>UTC</strong>ï¼ˆ<strong>Coordinated Universal Time</strong>ï¼Œåè°ƒä¸–ç•Œæ—¶ï¼‰æ˜¯å…¨çƒé€šç”¨çš„<strong>æ ‡å‡†æ—¶é—´å‚è€ƒç³»ç»Ÿ</strong>ï¼Œç”¨äºç»Ÿä¸€ä¸–ç•Œå„åœ°çš„æ—¶é—´è¡¨ç¤ºï¼Œé¿å…å› æ—¶åŒºå·®å¼‚é€ æˆæ··ä¹±ã€‚æ‰€æœ‰å…¶ä»–æ—¶åŒºéƒ½ä»¥Â <strong>UTC Â± N å°æ—¶</strong>Â çš„å½¢å¼å®šä¹‰ã€‚<br/>
ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">-</span>   åŒ—äº¬æ—¶é—´ï¼ˆCSTï¼‰ =Â <span class="hljs-strong">**UTC+8**</span>
<span class="hljs-bullet">-</span>   ä¼¦æ•¦å†¬ä»¤æ—¶ï¼ˆGMTï¼‰ =Â <span class="hljs-strong">**UTC+0**</span>
<span class="hljs-bullet">-</span>   çº½çº¦ä¸œéƒ¨æ—¶é—´ï¼ˆESTï¼‰ =Â <span class="hljs-strong">**UTC-5**</span>
</code></pre>
<h2 data-id="heading-0">1.é—®é¢˜å¯¼å‡ºï¼š</h2>
<p>æœ€è¿‘åœ¨å¹³å°é¡µé¢å±•ç¤ºæ—¶é—´ä¸Šå‘ç°å¤„ç†æ—¶é—´ä¸å°‘æ˜¯åœ¨å¤œé‡Œ0:00~8:00ä¹‹é—´çš„å¼‚å¸¸æ—¶é—´ç‚¹ã€‚é€šè¿‡new Date() å½¢å¼insertçš„æ—¶é—´æ•°æ®æ˜¯å¼‚å¸¸çš„(æ—©äº†8å°æ—¶)ï¼›åœ¨sqlä¸­ä½¿ç”¨NOW()çš„updateæ›´æ–°çš„æ—¶é—´æ˜¯æ­£å¸¸æ—¶é—´ï¼›äºæ˜¯æŸ¥äº†æ•°æ®åº“çš„æ—¶åŒºè®¾ç½®ï¼Œæ˜¯UTC+8ï¼Œæ²¡å•¥é—®é¢˜ã€‚å­—æ®µç±»å‹æ˜¯datetimeã€‚æ’æŸ¥è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<p>ï¼ˆ1ï¼‰æŸ¥çœ‹æ•°æ®åº“æ—¶åŒºï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> @<span class="hljs-variable">@global</span>.time_zone <span class="hljs-keyword">AS</span> global_time_zone, @<span class="hljs-variable">@session</span>.time_zone <span class="hljs-keyword">AS</span> session_time_zone;
#ç»“æœå¦‚ä¸‹ï¼š
global_time_zone <span class="hljs-operator">|</span> session_time_zone <span class="hljs-operator">|</span>   <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> <span class="hljs-comment">---------------- | ----------------- | - |</span>
<span class="hljs-operator">|</span> <span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>          <span class="hljs-operator">|</span> <span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>
</code></pre>
<p>ï¼ˆ2ï¼‰æŸ¥çœ‹ç³»ç»Ÿæ—¶é—´ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Test</span> public void <span class="hljs-built_in">testTime</span>() {

<span class="hljs-selector-tag">ZonedDateTime</span> <span class="hljs-selector-tag">zonedDateTime</span> = <span class="hljs-selector-tag">ZonedDateTime</span><span class="hljs-selector-class">.now</span>(); <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(zonedDateTime.<span class="hljs-built_in">format</span>(DateTimeFormatter.<span class="hljs-built_in">ofPattern</span>(<span class="hljs-string">"yyyy-MM-dd HH:mm:ss"</span>)));

<span class="hljs-selector-tag">LocalDateTime</span> <span class="hljs-selector-tag">localDateTime</span> = <span class="hljs-selector-tag">LocalDateTime</span><span class="hljs-selector-class">.now</span>(); <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(localDateTime.<span class="hljs-built_in">format</span>(DateTimeFormatter.<span class="hljs-built_in">ofPattern</span>(<span class="hljs-string">"yyyy-MM-dd HH:mm:ss"</span>)));

<span class="hljs-selector-tag">Instant</span> <span class="hljs-selector-tag">instant</span> = <span class="hljs-selector-tag">Instant</span><span class="hljs-selector-class">.now</span>(); <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(instant.<span class="hljs-built_in">atZone</span>(ZoneId.<span class="hljs-built_in">systemDefault</span>()).<span class="hljs-built_in">format</span>(DateTimeFormatter.<span class="hljs-built_in">ofPattern</span>(<span class="hljs-string">"yyyy-MM-dd HH:mm:ss"</span>)));

<span class="hljs-selector-tag">Date</span> <span class="hljs-selector-tag">date</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">Date</span>(); <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(new <span class="hljs-built_in">SimpleDateFormat</span>(<span class="hljs-string">"yyyy-MM-dd HH:mm:ss"</span>).<span class="hljs-built_in">format</span>(date)); }
æ‰“å°ç»“æœéƒ½æ˜¯æ­£ç¡®çš„åŒ—äº¬å½“å‰æ—¶é—´:
<span class="hljs-number">2025</span><span class="hljs-selector-tag">-12-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">37</span>:<span class="hljs-number">55</span> 
<span class="hljs-number">2025</span><span class="hljs-selector-tag">-12-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">37</span>:<span class="hljs-number">59</span> 
<span class="hljs-number">2025</span><span class="hljs-selector-tag">-12-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">38</span>:<span class="hljs-number">06</span> 
<span class="hljs-number">2025</span><span class="hljs-selector-tag">-12-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">38</span>:<span class="hljs-number">16</span>
</code></pre>
<p>ï¼ˆ3ï¼‰æŸ¥JDBCæ—¶åŒºè®¾ç½®ï¼šåé¢æ£€æŸ¥jdbcè®¾ç½®å‘ç°è®¾ç½®çš„æ—¶åŒºæ˜¯ï¼šserverTimezone=UTCï¼Œè€Œä¸æ˜¯serverTimezone=Asia/Shanghai(UTC+8),æ‰€ä»¥ä½¿ç”¨new Date() æ’å…¥æ—¶ï¼Œjdbcå°†æ—¶é—´è½¬æ¢æˆäº†UTCï¼Œä¹Ÿå°±æ˜¯åŒ—äº¬æ—¶é—´-8ã€‚</p>
<h3 data-id="heading-1">é—®é¢˜æœ¬è´¨ï¼š</h3>
<ol>
<li>
<p><code>DATETIME</code> å­—æ®µç‰¹æ€§</p>
<ul>
<li><strong>ä¸å­˜å‚¨æ—¶åŒºä¿¡æ¯</strong> ï¼Œç›´æ¥ä¿å­˜åŸå§‹æ—¶é—´å€¼ã€‚</li>
<li>è¯»å†™æ—¶<strong>ä¾èµ– JDBC æ—¶åŒºé…ç½®</strong> å’Œ<strong>æ•°æ®åº“æœåŠ¡å™¨æ—¶åŒº</strong> è¿›è¡Œéšå¼è½¬æ¢ã€‚</li>
</ul>
</li>
<li>
<p><strong>å†å²æ•°æ®çš„ä¸¤ç§æ¥æº</strong></p>
<ul>
<li>
<p><strong><code>new Date()</code> æ’å…¥</strong> ï¼š</p>
<ul>
<li><code>Date</code> æœ¬è´¨æ˜¯ UTC æ—¶é—´æˆ³ï¼ˆå¦‚ <code>2025-12-26 10:38:16 UTC+8</code> â†’ å­˜å‚¨ä¸º <code>2025-12-26 02:38:16</code>ï¼‰ã€‚</li>
<li>åŸ JDBC é…ç½® <code>serverTimezone=UTC</code> ä¼šå°† <code>Date</code> çš„æ¯«ç§’æ•°è½¬æ¢ä¸º UTC æ—¶é—´å­˜å…¥æ•°æ®åº“ã€‚</li>
</ul>
</li>
<li>
<p><strong><code>NOW()</code> æ’å…¥</strong> ï¼š</p>
<ul>
<li>MySQL çš„ <code>NOW()</code> è¿”å›æœåŠ¡å™¨æœ¬åœ°æ—¶é—´ï¼ˆUTC+8ï¼‰ï¼Œç›´æ¥å­˜å…¥ <code>DATETIME</code>ï¼ˆå¦‚ <code>2025-12-26 10:38:16</code>ï¼‰ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>ä¿®æ”¹ <code>serverTimezone=Asia/Shanghai</code> åçš„å½±å“</strong></p>
<ul>
<li>JDBC é©±åŠ¨ä¼šè®¤ä¸ºæ•°æ®åº“å­˜å‚¨çš„æ˜¯ <code>UTC+8</code> æ—¶é—´ã€‚</li>
<li><strong><code>new Date()</code> æ’å…¥çš„æ•°æ®</strong> ï¼ˆåŸ UTC æ—¶é—´ï¼‰ä¼šè¢«è¯¯è®¤ä¸ºæ˜¯ <code>UTC+8</code> æ—¶é—´ï¼Œå¯¼è‡´æ˜¾ç¤ºé”™è¯¯ï¼ˆå¦‚å­˜å‚¨ <code>02:38:16</code> â†’ æ˜¾ç¤ºä¸º <code>02:38:16</code>ï¼Œè€Œå®é™…åº”æ˜¾ç¤º <code>10:38:16</code>ï¼‰ã€‚</li>
<li><strong><code>NOW()</code> æ’å…¥çš„æ•°æ®</strong> ï¼ˆåŸ UTC+8 æ—¶é—´ï¼‰æ˜¾ç¤ºæ­£å¸¸ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-2">2. è§£å†³æ–¹æ¡ˆ</h2>
<h4 data-id="heading-3"><strong>æ­¥éª¤ 1ï¼šä¿®æ”¹ JDBC è¿æ¥æ—¶åŒº</strong></h4>
<p>å°†è¿æ¥å‚æ•°ä» <code>serverTimezone=UTC</code> æ”¹ä¸º <code>serverTimezone=Asia/Shanghai</code>ï¼š</p>
<h4 data-id="heading-4"><strong>æ­¥éª¤ 2ï¼šä¿®æ­£ <code>new Date()</code> æ’å…¥çš„å†å²æ•°æ®</strong></h4>
<p>éœ€è¦å°†å†å²æ•°æ®ä¸­æ‰€æœ‰ <strong>UTC æ—¶é—´å­˜å‚¨çš„ <code>DATETIME</code> å€¼</strong> è½¬æ¢ä¸º <code>UTC+8</code> æ—¶é—´ï¼ˆå¢åŠ  8 å°æ—¶ï¼‰ã€‚</p>
<blockquote>
<p>è¯´èµ·æ¥å®¹æ˜“ï¼Œä½†æ˜¯å†å²æ•°æ®çš„åŒºåˆ†æœ‰ç‚¹å›°éš¾ï¼Œè¿˜å¥½æˆ‘ä»¬ç”¨çš„datetime(6) ï¼Œèƒ½ç²¾ç¡®åˆ°æ¯«ç§’çº§ç²¾åº¦ï¼Œé€šè¿‡NOW()æ’å…¥çš„éƒ½æ˜¯ç§’çº§ç²¾åº¦,ä»¥æ­¤èƒ½åŒºåˆ†</p>
</blockquote>
<h2 data-id="heading-5">3.<code>DATETIME</code> å’Œ <code>TIMESTAMP</code> å¯¹æ¯”</h2>
<h3 data-id="heading-6">3.1ã€åŸºæœ¬å¯¹æ¯”è¡¨</h3>








































<table><thead><tr><th>ç‰¹æ€§</th><th><code>DATETIME</code></th><th><code>TIMESTAMP</code></th></tr></thead><tbody><tr><td><strong>å­˜å‚¨æ ¼å¼</strong></td><td><code>'YYYY-MM-DD HH:MM:SS'</code></td><td>åŒå·¦ï¼ˆæ˜¾ç¤ºæ ¼å¼ç›¸åŒï¼‰</td></tr><tr><td><strong>å­˜å‚¨ç©ºé—´</strong></td><td>8 å­—èŠ‚</td><td>4 å­—èŠ‚</td></tr><tr><td><strong>å–å€¼èŒƒå›´</strong></td><td><code>'1000-01-01 00:00:00'</code>Â åˆ°Â <code>'9999-12-31 23:59:59'</code></td><td><code>'1970-01-01 00:00:01' UTC</code>Â åˆ°Â <code>'2038-01-19 03:14:07' UTC</code></td></tr><tr><td><strong>æ—¶åŒºæ•æ„Ÿ</strong></td><td>âŒ ä¸æ¶‰åŠæ—¶åŒºï¼Œå­˜å‚¨çš„å°±æ˜¯ä½ ç»™çš„å€¼</td><td>âœ… å­˜å‚¨æ—¶è½¬æ¢ä¸º UTCï¼Œè¯»å–æ—¶è½¬å›å½“å‰ä¼šè¯æ—¶åŒº</td></tr><tr><td><strong>è‡ªåŠ¨åˆå§‹åŒ–/æ›´æ–°</strong></td><td>MySQL 5.6.5+ æ”¯æŒï¼ˆéœ€æ˜¾å¼å£°æ˜ï¼‰</td><td>é»˜è®¤æ”¯æŒï¼ˆå¦‚Â <code>DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP</code>ï¼‰</td></tr><tr><td><strong>è·¨æ—¶åŒºä¸€è‡´æ€§</strong></td><td>ä¸ä¸€è‡´ï¼ˆåŸæ ·å­˜å‚¨ï¼‰</td><td>ä¸€è‡´ï¼ˆè‡ªåŠ¨è½¬æ¢ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-7">3.2.Â <strong>æ—¶åŒºå¤„ç†</strong></h3>
<ul>
<li>
<p><strong><code>DATETIME</code></strong>ï¼š<br/>
å®Œå…¨ä¸æ—¶åŒºæ— å…³ã€‚ä½ æ’å…¥ <code>'2025-12-25 18:00:00'</code>ï¼Œå®ƒå°±å­˜è¿™ä¸ªå€¼ï¼Œæ— è®ºæœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯æ—¶åŒºå¦‚ä½•å˜åŒ–ï¼Œè¯»å‡ºæ¥è¿˜æ˜¯ <code>'2025-12-25 18:00:00'</code>ã€‚</p>
</li>
<li>
<p><strong><code>TIMESTAMP</code></strong>ï¼š</p>
<ul>
<li>
<p>æ’å…¥æ—¶ï¼šå°†å½“å‰<strong>ä¼šè¯æ—¶åŒº</strong>ä¸‹çš„æ—¶é—´è½¬æ¢ä¸ºÂ <strong>UTC</strong>Â å­˜å‚¨ã€‚</p>
</li>
<li>
<p>æŸ¥è¯¢æ—¶ï¼šå°† UTC æ—¶é—´è½¬æ¢å›<strong>å½“å‰ä¼šè¯æ—¶åŒº</strong>å†æ˜¾ç¤ºã€‚</p>
</li>
<li>
<p>ä¸¾ä¾‹ï¼š</p>
<ul>
<li>æœåŠ¡å™¨æ—¶åŒºæ˜¯Â <code>+08:00</code>ï¼ˆä¸­å›½ï¼‰ï¼Œä½ æ’å…¥Â <code>'2025-12-25 18:00:00'</code>ï¼ŒMySQL å®é™…å­˜çš„æ˜¯ UTC æ—¶é—´Â <code>'2025-12-25 10:00:00'</code>ã€‚</li>
<li>å¦‚æœä¹‹åæŠŠä¼šè¯æ—¶åŒºæ”¹ä¸ºÂ <code>+00:00</code>ï¼Œå†æŸ¥è¿™æ¡è®°å½•ï¼Œä¼šæ˜¾ç¤ºä¸ºÂ <code>'2025-12-25 10:00:00'</code>ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>é€‚åˆéœ€è¦â€œå…¨çƒç»Ÿä¸€æ—¶é—´è®°å½•â€çš„åœºæ™¯ï¼ˆå¦‚æ—¥å¿—ã€äº¤æ˜“æ—¶é—´ï¼‰ã€‚</p>
<p>æ³¨æ„ï¼š<code>TIMESTAMP</code> çš„è¡Œä¸ºä¾èµ–äº <code>time_zone</code> è®¾ç½®ï¼Œè€Œ <code>DATETIME</code> ä¸å—å½±å“ã€‚</p>
</blockquote>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">sql</span>
ç¼–è¾‘
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> time_demo (
    id <span class="hljs-type">INT</span>,
    dt DATETIME,
    ts <span class="hljs-type">TIMESTAMP</span>
);

<span class="hljs-comment">-- å‡è®¾å½“å‰æ—¶åŒºæ˜¯ +08:00</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> time_demo <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">'2025-12-25 18:00:00'</span>, <span class="hljs-string">'2025-12-25 18:00:00'</span>);

<span class="hljs-comment">-- æŸ¥è¯¢ç»“æœï¼ˆæ—¶åŒº +08:00ï¼‰ï¼š</span>
<span class="hljs-comment">-- dt: 2025-12-25 18:00:00</span>
<span class="hljs-comment">-- ts: 2025-12-25 18:00:00</span>

<span class="hljs-comment">-- åˆ‡æ¢æ—¶åŒºåˆ° UTC</span>
<span class="hljs-keyword">SET</span> time_zone <span class="hljs-operator">=</span> <span class="hljs-string">'+00:00'</span>;

<span class="hljs-comment">-- å†æ¬¡æŸ¥è¯¢ï¼š</span>
<span class="hljs-comment">-- dt: 2025-12-25 18:00:00 ï¼ˆä¸å˜ï¼‰</span>
<span class="hljs-comment">-- ts: 2025-12-25 10:00:00 ï¼ˆè‡ªåŠ¨è½¬ä¸º UTCï¼‰</span>
</code></pre>
<h3 data-id="heading-8">3.3Â <strong>å–å€¼èŒƒå›´</strong></h3>
<ul>
<li><code>TIMESTAMP</code>Â å—é™äº Unix æ—¶é—´æˆ³ï¼ˆ32 ä½æ•´æ•°ï¼‰ï¼Œæœ€å¤§åˆ°Â <strong>2038 å¹´</strong>ï¼ˆå³â€œ2038 å¹´é—®é¢˜â€ï¼‰ã€‚</li>
<li><code>DATETIME</code>Â èŒƒå›´æå¤§ï¼Œé€‚ç”¨äºå†å²æˆ–è¿œæœŸæ—¥æœŸã€‚</li>
</ul>
<blockquote>
<p>å¦‚æœä½ çš„åº”ç”¨éœ€è¦å¤„ç† 2038 å¹´ä¹‹åçš„æ—¶é—´ï¼ˆæ¯”å¦‚åˆåŒã€è®¡åˆ’ï¼‰ï¼Œ<strong>ä¸è¦ç”¨ <code>TIMESTAMP</code></strong>ã€‚</p>
</blockquote>
<h3 data-id="heading-9">3.4Â <strong>è‡ªåŠ¨é»˜è®¤å€¼ä¸æ›´æ–°</strong></h3>
<ul>
<li>
<p>åœ¨æ—§ç‰ˆæœ¬ MySQLï¼ˆ&lt;5.6.5ï¼‰ä¸­ï¼Œåªæœ‰Â <code>TIMESTAMP</code>Â æ”¯æŒï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">sql</span>
ç¼–è¾‘
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> t (
    id <span class="hljs-type">INT</span>,
    created_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
    updated_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
);
</code></pre>
</li>
<li>
<p>ä»Â <strong>MySQL 5.6.5 å¼€å§‹</strong>ï¼Œ<code>DATETIME</code>Â ä¹Ÿæ”¯æŒç±»ä¼¼è¯­æ³•ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">sql</span>
ç¼–è¾‘
created_at DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
updated_at DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-10">3.5ã€å¦‚ä½•é€‰æ‹©ï¼Ÿ</h3>

























<table><thead><tr><th>åœºæ™¯</th><th>æ¨èç±»å‹</th></tr></thead><tbody><tr><td>éœ€è¦è®°å½•äº‹ä»¶å‘ç”Ÿçš„<strong>ç»å¯¹æœ¬åœ°æ—¶é—´</strong>ï¼ˆå¦‚ç”¨æˆ·æ³¨å†Œæ—¶é—´ã€æ–‡ç« å‘å¸ƒæ—¶é—´ï¼‰ï¼Œä¸”ä¸å…³å¿ƒæ—¶åŒºè½¬æ¢</td><td><code>DATETIME</code></td></tr><tr><td>éœ€è¦<strong>è·¨æ—¶åŒºä¸€è‡´çš„æ—¶é—´è®°å½•</strong>ï¼ˆå¦‚ç³»ç»Ÿæ—¥å¿—ã€API è¯·æ±‚æ—¶é—´ï¼‰ï¼Œå¸Œæœ›è‡ªåŠ¨å¤„ç†æ—¶åŒº</td><td><code>TIMESTAMP</code></td></tr><tr><td>æ—¶é—´å¯èƒ½è¶…è¿‡ 2038 å¹´</td><td><code>DATETIME</code></td></tr><tr><td>å­˜å‚¨ç©ºé—´æ•æ„Ÿï¼ˆä½†é€šå¸¸å½±å“ä¸å¤§ï¼‰</td><td><code>TIMESTAMP</code>ï¼ˆçœ 4 å­—èŠ‚ï¼‰</td></tr></tbody></table>
<p>é™„bç«™@<a href="https://link.juejin.cn?target=https%3A%2F%2Fspace.bilibili.com%2F386498238%2F%3Fspm_id_from%3D333.788.upinfo.detail.click" target="_blank" title="https://space.bilibili.com/386498238/?spm_id_from=333.788.upinfo.detail.click" ref="nofollow noopener noreferrer">ç¨‹åºå‘˜é¸¡ç¿…</a>æ€»ç»“ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52e92bb10bc046e5ac0f7039c1bf83b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Iqx6Iqx5peg57y6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767338993&amp;x-signature=8C%2FP8WLIj8EWQDs7GGj0HY95vDg%3D" alt="img_v3_02ta_60aa75f5-aa63-432d-b4ca-0d953fe4e7eg.jpg" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3432e9842ad47009321536e02f3e515~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Iqx6Iqx5peg57y6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767338993&amp;x-signature=mzkdhkW3xRtLi9%2FHcRp9nIR5UAI%3D" alt="img_v3_02ta_aa10f24b-b3ab-4987-b0d6-2d408d91eecg.jpg" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c51ca466f224191a707db72c5b1fcfe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Iqx6Iqx5peg57y6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767338993&amp;x-signature=IpJk73jDsRgBO8oW8glVQ%2FrgVSA%3D" alt="img_v3_02ta_7d6a7c70-8002-4da0-93c8-3e0dcfa0918g.jpg" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ”¥ğŸ”¥Vueæ•°å­—ç¿»æ»šåŠ¨ç”»ç»„ä»¶ï¼šè®©æ•°æ®å±•ç¤ºæ›´å…·è§†è§‰å†²å‡»åŠ›]]></title>    <link>https://juejin.cn/post/7587825268200652806</link>    <guid>https://juejin.cn/post/7587825268200652806</guid>    <pubDate>2025-12-26T07:34:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587825268200652806" data-draft-id="7587825267878576169" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ”¥ğŸ”¥Vueæ•°å­—ç¿»æ»šåŠ¨ç”»ç»„ä»¶ï¼šè®©æ•°æ®å±•ç¤ºæ›´å…·è§†è§‰å†²å‡»åŠ›"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-12-26T07:34:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒå­¦80796"/> <meta itemprop="url" content="https://juejin.cn/user/1662117312735943"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ”¥ğŸ”¥Vueæ•°å­—ç¿»æ»šåŠ¨ç”»ç»„ä»¶ï¼šè®©æ•°æ®å±•ç¤ºæ›´å…·è§†è§‰å†²å‡»åŠ›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1662117312735943/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒå­¦80796
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T07:34:36.000Z" title="Fri Dec 26 2025 07:34:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ•°æ®å¯è§†åŒ–åœºæ™¯ä¸­ï¼Œé™æ€çš„æ•°å­—å±•ç¤ºå¾€å¾€éš¾ä»¥å¸å¼•ç”¨æˆ·æ³¨æ„åŠ›ã€‚æ— è®ºæ˜¯å¤§å±ç›‘æ§é¢æ¿ã€æ•°æ®ä»ªè¡¨ç›˜è¿˜æ˜¯æ´»åŠ¨å€’è®¡æ—¶é¡µé¢ï¼ŒåŠ¨æ€çš„æ•°å­—å˜åŒ–æ€»èƒ½æ›´ç›´è§‚åœ°ä¼ é€’æ•°æ®å¢é•¿æˆ–æ›´æ–°çš„ä¿¡æ¯ã€‚ä»Šå¤©ä¸ºå¤§å®¶ä»‹ç»ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§ã€é…ç½®çµæ´»çš„Vueæ•°å­—ç¿»æ»šåŠ¨ç”»ç»„ä»¶ï¼Œå®ƒèƒ½è½»æ¾å®ç°å¹³æ»‘çš„æ•°å­—æ»šåŠ¨æ•ˆæœï¼ŒåŒæ—¶æ”¯æŒå¤šç»´åº¦è‡ªå®šä¹‰é…ç½®ï¼Œé€‚é…å„ç±»ä¸šåŠ¡åœºæ™¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b133a331ebd84f59ae4c5ebe2e1de8d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCM5a2mODA3OTY=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339276&amp;x-signature=jKiOcFskkGg0eNOalULd8h5Ultk%3D" alt="PixPin_2025-12-26_15-09-38.gif" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ã€ç»„ä»¶å®šä½ä¸æ ¸å¿ƒä»·å€¼</h2>
<p>è¿™æ¬¾Vueæ•°å­—ç¿»æ»šåŠ¨ç”»ç»„ä»¶åŸºäº<code>writing-mode</code>å‚ç›´æ’ç‰ˆåŸç†å®ç°ï¼Œæ ¸å¿ƒä»·å€¼åœ¨äºå°†æ¯ç‡¥çš„æ•°å­—æ›´æ–°è½¬åŒ–ä¸ºæµç•…ã€æœ‰è´¨æ„Ÿçš„ç¿»æ»šåŠ¨ç”»ï¼Œæå‡é¡µé¢çš„è§†è§‰è¡¨ç°åŠ›ä¸ç”¨æˆ·ä½“éªŒã€‚ä¸ä¼ ç»Ÿçš„æ•°å­—åˆ‡æ¢æ•ˆæœç›¸æ¯”ï¼Œå®ƒå…·å¤‡ä»¥ä¸‹æ ¸å¿ƒä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>è§†è§‰å¸å¼•åŠ›å¼º</strong>ï¼šæ¨¡æ‹Ÿæœºæ¢°è®¡æ•°å™¨çš„ç¿»æ»šæ•ˆæœï¼Œæ•°å­—åˆ‡æ¢å¹³æ»‘è‡ªç„¶ï¼Œç¬é—´æŠ“ä½ç”¨æˆ·çœ¼çƒï¼›</li>
<li><strong>é…ç½®æåº¦çµæ´»</strong>ï¼šæ”¯æŒä½æ•°ã€å‰ç½®é›¶ã€åˆ†éš”ç¬¦ã€åŠ¨ç”»æ—¶é•¿ç­‰å¤šç»´åº¦è‡ªå®šä¹‰ï¼Œé€‚é…ä¸åŒä¸šåŠ¡éœ€æ±‚ï¼›</li>
<li><strong>å…¼å®¹æ€§ä¼˜å¼‚</strong>ï¼šé€‚é…ä¸»æµæµè§ˆå™¨ï¼Œé’ˆå¯¹Firefoxç­‰æµè§ˆå™¨åšäº†ä¸“é¡¹å…¼å®¹æ€§ä¼˜åŒ–ï¼›</li>
<li><strong>æ˜“ç”¨æ€§é«˜</strong>ï¼šç»„ä»¶åŒ–å°è£…ï¼Œä¼ å…¥ç®€å•å‚æ•°å³å¯å¿«é€Ÿä½¿ç”¨ï¼Œæ— éœ€å…³æ³¨å¤æ‚çš„å®ç°ç»†èŠ‚ã€‚</li>
</ul>
<h2 data-id="heading-1">äºŒã€æ ¸å¿ƒåŠŸèƒ½è¯¦è§£</h2>
<p>ç»„ä»¶å›´ç»•â€œæ•°å­—å±•ç¤ºâ€ä¸â€œåŠ¨ç”»æ•ˆæœâ€ä¸¤å¤§æ ¸å¿ƒï¼Œæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½é…ç½®ï¼Œè¦†ç›–ä»åŸºç¡€å±•ç¤ºåˆ°é«˜çº§å®šåˆ¶çš„å…¨åœºæ™¯éœ€æ±‚ã€‚</p>
<h3 data-id="heading-2">1. åŸºç¡€æ ¸å¿ƒåŠŸèƒ½</h3>
<ul>
<li><strong>å¹³æ»‘ç¿»æ»šåŠ¨ç”»</strong>ï¼šåŸºäºCSSè¿‡æ¸¡åŠ¨ç”»å®ç°ï¼Œæ•°å­—åˆ‡æ¢æ— å¡é¡¿ï¼Œæ”¯æŒè‡ªå®šä¹‰åŠ¨ç”»æ—¶é•¿ï¼›</li>
<li><strong>è‡ªåŠ¨å¢é•¿æ¨¡æ‹Ÿ</strong>ï¼šå¯é…ç½®è‡ªåŠ¨å¢é•¿åŠŸèƒ½ï¼Œæ”¯æŒè‡ªå®šä¹‰å¢é•¿é—´éš”ä¸å¢é•¿æ•°å€¼èŒƒå›´ï¼Œå®Œç¾æ¨¡æ‹Ÿå®æ—¶æ•°æ®æ›´æ–°åœºæ™¯ï¼›</li>
<li><strong>é‡‘é¢æ ¼å¼åŒ–</strong>ï¼šè‡ªåŠ¨æ·»åŠ åƒåˆ†ä½åˆ†éš”ç¬¦ï¼Œè®©å¤§æ•°å­—å±•ç¤ºæ›´æ¸…æ™°ï¼ˆå¦‚123456 â†’ 123,456ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-3">2. çµæ´»çš„æ•°å­—æ˜¾ç¤ºé…ç½®</h3>
<p>é’ˆå¯¹ä¸åŒåœºæ™¯ä¸‹çš„æ•°å­—å±•ç¤ºéœ€æ±‚ï¼Œç»„ä»¶æä¾›äº†ä¸‰å¤§æ ¸å¿ƒé…ç½®é¡¹ï¼Œå®ç°æ•°å­—æ˜¾ç¤ºçš„ç²¾å‡†æ§åˆ¶ï¼š</p>
<ul>
<li><strong>ä½æ•°å¯é…ç½®ï¼ˆdigitLengthï¼‰</strong> ï¼šæ”¯æŒ1-18ä½æ•°å­—æ˜¾ç¤ºï¼Œé»˜è®¤8ä½ï¼Œå¯æ ¹æ®ä¸šåŠ¡åœºæ™¯ï¼ˆå¦‚éªŒè¯ç 4ä½ã€è®¢å•å·8ä½ã€é”€å”®é¢10ä½ï¼‰çµæ´»è°ƒæ•´ï¼›</li>
<li><strong>å‰ç½®é›¶æ§åˆ¶ï¼ˆshowLeadingZeroï¼‰</strong> ï¼šå¯é…ç½®æ˜¯å¦æ˜¾ç¤ºå‰ç½®é›¶ï¼ˆæˆ–åç½®é›¶ï¼‰ï¼Œä¾‹å¦‚é…ç½®8ä½æ•°å­—æ—¶ï¼Œ123å¯æ˜¾ç¤ºä¸º00000123ï¼ˆæ˜¾ç¤ºå‰ç½®é›¶ï¼‰æˆ–123ï¼ˆä¸æ˜¾ç¤ºå‰ç½®é›¶ï¼‰ï¼›</li>
<li><strong>è¡¥é›¶æ–¹å‘ï¼ˆpadDirectionï¼‰</strong> ï¼šæ”¯æŒå·¦è¡¥é›¶ï¼ˆé»˜è®¤ï¼‰ä¸å³è¡¥é›¶ï¼Œé€‚é…ç¼–ç ã€éªŒè¯ç ç­‰ç‰¹æ®Šåœºæ™¯çš„éœ€æ±‚ã€‚</li>
</ul>
<h3 data-id="heading-4">3. æ ·å¼ä¸äº¤äº’ä¼˜åŒ–</h3>
<ul>
<li><strong>å“åº”å¼é€‚é…</strong>ï¼šå°å±å¹•è‡ªåŠ¨è°ƒæ•´æ•°å­—æ¡†å¤§å°ä¸å­—ä½“å¤§å°ï¼Œç¡®ä¿å¤šä½æ•°å±•ç¤ºæ—¶ä¸æ¢è¡Œã€ä¸æ‹¥æŒ¤ï¼›</li>
<li><strong>è´¨æ„Ÿæ ·å¼è®¾è®¡</strong>ï¼šé‡‡ç”¨æ¸å˜èƒŒæ™¯ã€æ–‡å­—é˜´å½±ç­‰è®¾è®¡ï¼Œè¥é€ ç§‘æŠ€æ„Ÿï¼Œé€‚é…å¤§å±ç›‘æ§ã€æ•°æ®ä»ªè¡¨ç›˜ç­‰åœºæ™¯ï¼›</li>
<li><strong>ç”¨æˆ·ä½“éªŒä¼˜åŒ–</strong>ï¼šç¦æ­¢æ•°å­—é€‰ä¸­ï¼Œé¿å…æ»šåŠ¨è¿‡ç¨‹ä¸­è¯¯æ“ä½œï¼Œæå‡äº¤äº’æµç•…åº¦ã€‚</li>
</ul>
<h2 data-id="heading-5">ä¸‰ã€å¿«é€Ÿä¸Šæ‰‹æŒ‡å—</h2>
<p>ç»„ä»¶åŸºäºVue3 + TypeScriptå¼€å‘ï¼Œæ”¯æŒ<code>script setup</code>è¯­æ³•ï¼Œé›†æˆè¿‡ç¨‹ç®€å•é«˜æ•ˆï¼Œä¸‰æ­¥å³å¯å®Œæˆé›†æˆã€‚</p>
<h3 data-id="heading-6">1. ç»„ä»¶å¼•å…¥</h3>
<p>å°†ç»„ä»¶æ–‡ä»¶ï¼ˆå¦‚NumberRoll.vueï¼‰æ”¾å…¥é¡¹ç›®ç»„ä»¶ç›®å½•ï¼Œåœ¨éœ€è¦ä½¿ç”¨çš„é¡µé¢ä¸­ç›´æ¥å¼•å…¥ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">NumberRoll</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/NumberRoll.vue'</span>;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-7">2. åŸºç¡€ä½¿ç”¨</h3>
<p>ä¼ å…¥æ ¸å¿ƒå‚æ•°<code>number</code>å³å¯å®ç°åŸºç¡€çš„æ•°å­—ç¿»æ»šæ•ˆæœï¼Œé»˜è®¤8ä½æ•°å­—ã€æ˜¾ç¤ºå‰ç½®é›¶ã€è‡ªåŠ¨å¢é•¿ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dashboard"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>æ€»è®¿é—®é‡ <span class="hljs-tag">&lt;<span class="hljs-name">NumberRoll</span> <span class="hljs-attr">:number</span>=<span class="hljs-string">"12345"</span> /&gt;</span> æ¬¡<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<h3 data-id="heading-8">3. æ•ˆæœé¢„è§ˆ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93aa36c7ce314e00a9b105dd15d934bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCM5a2mODA3OTY=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339276&amp;x-signature=KMwDhvTSzwBTcyfcmJSW8pDqOoc%3D" alt="PixPin_2025-12-26_15-11-05.gif" loading="lazy"/></p>
<p>ä¸Šè¿°ä»£ç å°†å®ç°8ä½æ•°å­—ç¿»æ»šæ•ˆæœï¼Œåˆå§‹æ˜¾ç¤º00001234ï¼Œåç»­æ¯3ç§’éšæœºå¢é•¿1-100ï¼Œæ•°å­—æ»šåŠ¨å¹³æ»‘è‡ªç„¶ï¼Œå¸¦æœ‰ç§‘æŠ€æ„Ÿæ ·å¼ã€‚</p>
<h2 data-id="heading-9">å››ã€è¿›é˜¶é…ç½®ç¤ºä¾‹</h2>
<p>é’ˆå¯¹ä¸åŒä¸šåŠ¡åœºæ™¯ï¼Œç»„ä»¶æä¾›äº†ä¸°å¯Œçš„é…ç½®ç»„åˆï¼Œä»¥ä¸‹æ˜¯å‡ ä¸ªå…¸å‹åœºæ™¯çš„é…ç½®ç¤ºä¾‹ï¼Œè¦†ç›–å¤§éƒ¨åˆ†å¸¸è§éœ€æ±‚ã€‚</p>
<h3 data-id="heading-10">1. åœºæ™¯ä¸€ï¼š4ä½éªŒè¯ç ï¼ˆä¸è‡ªåŠ¨å¢é•¿ã€å³è¡¥é›¶ï¼‰</h3>
<p>éœ€æ±‚ï¼š4ä½éªŒè¯ç ï¼Œå³è¡¥é›¶ï¼Œä¸è‡ªåŠ¨å¢é•¿ï¼Œä¸æ˜¾ç¤ºåˆ†éš”ç¬¦</p>
<pre><code class="hljs language-ini" lang="ini">&lt;NumberRoll 
  :<span class="hljs-attr">number</span>=<span class="hljs-string">"123"</span> 
  :<span class="hljs-attr">digit-length</span>=<span class="hljs-string">"4"</span> 
  <span class="hljs-attr">pad-direction</span>=<span class="hljs-string">"right"</span> 
  :<span class="hljs-attr">auto-increase</span>=<span class="hljs-string">"false"</span> 
  :<span class="hljs-attr">show-separator</span>=<span class="hljs-string">"false"</span> 
/&gt;
</code></pre>
<p>æ•ˆæœï¼šæ˜¾ç¤º1230ï¼Œæ— è‡ªåŠ¨å¢é•¿ï¼Œæ•°å­—å›ºå®šå±•ç¤ºã€‚</p>
<h3 data-id="heading-11">2. åœºæ™¯äºŒï¼šé”€å”®é¢å±•ç¤ºï¼ˆ10ä½ã€ä¸æ˜¾ç¤ºå‰ç½®é›¶ã€è‡ªå®šä¹‰åŠ¨ç”»æ—¶é•¿ï¼‰</h3>
<p>éœ€æ±‚ï¼š10ä½é”€å”®é¢ï¼Œä¸æ˜¾ç¤ºå‰ç½®é›¶ï¼ŒåŠ¨ç”»æ—¶é•¿2ç§’ï¼Œè‡ªåŠ¨å¢é•¿é—´éš”5ç§’</p>
<pre><code class="hljs language-ruby" lang="ruby">&lt;<span class="hljs-title class_">NumberRoll</span> 
  <span class="hljs-symbol">:number=<span class="hljs-string">"987654321"</span></span> 
  <span class="hljs-symbol">:digit-length=<span class="hljs-string">"10"</span></span> 
  <span class="hljs-symbol">:show-leading-zero=<span class="hljs-string">"false"</span></span> 
  <span class="hljs-symbol">:duration=<span class="hljs-string">"2"</span></span> 
  <span class="hljs-symbol">:increase-interval=<span class="hljs-string">"5000"</span></span> 
/&gt;
</code></pre>
<p>æ•ˆæœï¼šåˆå§‹æ˜¾ç¤º987,654,321ï¼Œæ¯5ç§’éšæœºå¢é•¿1-100ï¼Œæ•°å­—åˆ‡æ¢åŠ¨ç”»æ—¶é•¿2ç§’ã€‚</p>
<h3 data-id="heading-12">3. åœºæ™¯ä¸‰ï¼šåœ¨çº¿äººæ•°ï¼ˆ3ä½ã€ä¸æ˜¾ç¤ºå‰ç½®é›¶ã€å…³é—­è‡ªåŠ¨å¢é•¿ï¼‰</h3>
<p>éœ€æ±‚ï¼š3ä½åœ¨çº¿äººæ•°ï¼Œä¸æ˜¾ç¤ºå‰ç½®é›¶ï¼Œå›ºå®šæ˜¾ç¤ºå½“å‰äººæ•°ï¼Œæ— è‡ªåŠ¨å¢é•¿</p>
<pre><code class="hljs language-ruby" lang="ruby">&lt;<span class="hljs-title class_">NumberRoll</span> 
  <span class="hljs-symbol">:number=<span class="hljs-string">"896"</span></span> 
  <span class="hljs-symbol">:digit-length=<span class="hljs-string">"3"</span></span> 
  <span class="hljs-symbol">:show-leading-zero=<span class="hljs-string">"false"</span></span> 
  <span class="hljs-symbol">:auto-increase=<span class="hljs-string">"false"</span></span> 
  <span class="hljs-symbol">:show-separator=<span class="hljs-string">"false"</span></span> 
/&gt;
</code></pre>
<p>æ•ˆæœï¼šå›ºå®šæ˜¾ç¤º896ï¼Œæ— æ»šåŠ¨åŠ¨ç”»ï¼Œç®€æ´æ¸…æ™°ã€‚</p>
<h3 data-id="heading-13">4. åœºæ™¯å››ï¼šè®¢å•ç¼–å·ï¼ˆ8ä½ã€æ˜¾ç¤ºå‰ç½®é›¶ã€å…³é—­è‡ªåŠ¨å¢é•¿ï¼‰</h3>
<p>éœ€æ±‚ï¼š8ä½è®¢å•ç¼–å·ï¼Œå¿…é¡»æ˜¾ç¤ºå‰ç½®é›¶ï¼Œå›ºå®šç¼–å·ï¼Œæ— è‡ªåŠ¨å¢é•¿</p>
<pre><code class="hljs language-ruby" lang="ruby">&lt;<span class="hljs-title class_">NumberRoll</span> 
  <span class="hljs-symbol">:number=<span class="hljs-string">"12345"</span></span> 
  <span class="hljs-symbol">:digit-length=<span class="hljs-string">"8"</span></span> 
  <span class="hljs-symbol">:auto-increase=<span class="hljs-string">"false"</span></span> 
/&gt;
</code></pre>
<p>æ•ˆæœï¼šå›ºå®šæ˜¾ç¤º00001234ï¼Œç¬¦åˆè®¢å•ç¼–å·çš„æ ‡å‡†åŒ–å±•ç¤ºéœ€æ±‚ã€‚</p>
<h2 data-id="heading-14">äº”ã€å®Œæ•´å‚æ•°è¯´æ˜</h2>
<p>ä¸ºæ–¹ä¾¿ç”¨æˆ·å¿«é€ŸæŸ¥é˜…é…ç½®é¡¹ï¼Œä»¥ä¸‹æ˜¯ç»„ä»¶æ‰€æœ‰å‚æ•°çš„è¯¦ç»†è¯´æ˜ï¼š</p>











































































<table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th><th>å¯é€‰å€¼</th></tr></thead><tbody><tr><td>number</td><td>Number/String</td><td>0</td><td>åˆå§‹æ˜¾ç¤ºçš„æ•°å­—</td><td>ä»»æ„éè´Ÿæ•´æ•°</td></tr><tr><td>duration</td><td>Number</td><td>1.5</td><td>æ•°å­—ç¿»æ»šåŠ¨ç”»çš„æŒç»­æ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼‰</td><td>ä»»æ„æ­£æ•°</td></tr><tr><td>autoIncrease</td><td>Boolean</td><td>true</td><td>æ˜¯å¦å¼€å¯æ•°å­—è‡ªåŠ¨å¢é•¿</td><td>true/false</td></tr><tr><td>increaseInterval</td><td>Number</td><td>3000</td><td>è‡ªåŠ¨å¢é•¿çš„æ—¶é—´é—´éš”ï¼ˆå•ä½ï¼šæ¯«ç§’ï¼‰</td><td>ä»»æ„æ­£æ•°</td></tr><tr><td>increaseRange</td><td>Array</td><td>[1, 100]</td><td>æ¯æ¬¡è‡ªåŠ¨å¢é•¿çš„éšæœºæ•°å€¼èŒƒå›´</td><td>ä¸¤ä¸ªéè´Ÿæ•´æ•°ç»„æˆçš„æ•°ç»„</td></tr><tr><td>digitLength</td><td>Number</td><td>8</td><td>æ•°å­—æ˜¾ç¤ºçš„ä½æ•°ï¼Œæ”¯æŒ1-18ä½</td><td>1-18ä¹‹é—´çš„æ•´æ•°</td></tr><tr><td>showSeparator</td><td>Boolean</td><td>true</td><td>æ˜¯å¦æ˜¾ç¤ºåƒåˆ†ä½åˆ†éš”ç¬¦</td><td>true/false</td></tr><tr><td>padDirection</td><td>String</td><td>left</td><td>æ•°å­—è¡¥é›¶çš„æ–¹å‘</td><td>leftï¼ˆå·¦è¡¥é›¶ï¼‰/rightï¼ˆå³è¡¥é›¶ï¼‰</td></tr><tr><td>showLeadingZero</td><td>Boolean</td><td>true</td><td>æ˜¯å¦æ˜¾ç¤ºå‰ç½®é›¶ï¼ˆå·¦è¡¥é›¶æ—¶ï¼‰æˆ–åç½®é›¶ï¼ˆå³è¡¥é›¶æ—¶ï¼‰</td><td>true/false</td></tr></tbody></table>
<h2 data-id="heading-15">å…­ã€åº”ç”¨åœºæ™¯ä¸æ‰©å±•å»ºè®®</h2>
<h3 data-id="heading-16">1. å…¸å‹åº”ç”¨åœºæ™¯</h3>
<p>è¯¥ç»„ä»¶é€‚ç”¨äºå„ç±»éœ€è¦åŠ¨æ€æ•°å­—å±•ç¤ºçš„åœºæ™¯ï¼Œå°¤å…¶é€‚åˆï¼š</p>
<ul>
<li><strong>å¤§å±ç›‘æ§é¢æ¿</strong>ï¼šå¦‚ç³»ç»Ÿè®¿é—®é‡ã€è®¢å•é‡ã€åœ¨çº¿ç”¨æˆ·æ•°ç­‰å®æ—¶æ•°æ®å±•ç¤ºï¼›</li>
<li><strong>ç”µå•†è¿è¥åå°</strong>ï¼šé”€å”®é¢ã€æˆäº¤é‡ã€ç”¨æˆ·å¢é•¿æ•°ç­‰æ ¸å¿ƒæŒ‡æ ‡å±•ç¤ºï¼›</li>
<li><strong>æ´»åŠ¨è¥é”€é¡µé¢</strong>ï¼šå€’è®¡æ—¶æ•°å­—ã€å‚ä¸äººæ•°ã€ç´¯è®¡é”€å”®é¢ç­‰æ°›å›´è¥é€ ï¼›</li>
<li><strong>ä¼ä¸šæ•°æ®ä»ªè¡¨ç›˜</strong>ï¼šæ ¸å¿ƒä¸šåŠ¡æ•°æ®çš„å¯è§†åŒ–å±•ç¤ºï¼Œæå‡æ•°æ®å¯è¯»æ€§ã€‚</li>
</ul>
<h3 data-id="heading-17">2. æ‰©å±•æ–¹å‘å»ºè®®</h3>
<p>æ ¹æ®å®é™…ä¸šåŠ¡éœ€æ±‚ï¼Œç»„ä»¶è¿˜å¯è¿›ä¸€æ­¥æ‰©å±•ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ul>
<li><strong>è‡ªå®šä¹‰åˆ†éš”ç¬¦</strong>ï¼šæ–°å¢<code>separator</code>å‚æ•°ï¼Œæ”¯æŒå°†åƒåˆ†ä½åˆ†éš”ç¬¦æ›¿æ¢ä¸ºâ€œ.â€â€œ â€ç­‰å­—ç¬¦ï¼›</li>
<li><strong>å°æ•°æ”¯æŒ</strong>ï¼šæ–°å¢<code>decimalLength</code>å‚æ•°ï¼Œæ”¯æŒå°æ•°ä½æ•°é…ç½®ï¼Œé€‚é…é‡‘é¢ã€æ¸©åº¦ç­‰éœ€è¦å°æ•°çš„åœºæ™¯ï¼›</li>
<li><strong>æ ·å¼ä¸»é¢˜</strong>ï¼šæä¾›å¤šå¥—æ ·å¼ä¸»é¢˜ï¼ˆå¦‚ç§‘æŠ€è“ã€ä¸­å›½çº¢ã€å¤å¤é‡‘ï¼‰ï¼Œæ”¯æŒä¸€é”®åˆ‡æ¢ï¼›</li>
<li><strong>åŠ¨ç”»æ›²çº¿è‡ªå®šä¹‰</strong>ï¼šæ–°å¢<code>easing</code>å‚æ•°ï¼Œæ”¯æŒçº¿æ€§ã€ç¼“è¿›ç¼“å‡ºç­‰ä¸åŒåŠ¨ç”»æ›²çº¿ï¼›</li>
<li><strong>æ•°å­—æ»šåŠ¨è§¦å‘æ–¹å¼</strong>ï¼šæ”¯æŒæ‰‹åŠ¨è§¦å‘æ»šåŠ¨ï¼ˆå¦‚é€šè¿‡æŒ‰é’®ç‚¹å‡»ï¼‰ï¼Œé€‚é…éè‡ªåŠ¨æ›´æ–°çš„åœºæ™¯ã€‚</li>
</ul>
<h2 data-id="heading-18">ä¸ƒã€æºç </h2>
<pre><code class="hljs language-js" lang="js">
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"number-roll"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"number-container"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"number-box"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>
          <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(item, index) in numArr"</span>
          <span class="hljs-attr">:key</span>=<span class="hljs-string">"index"</span>
          <span class="hljs-attr">:class</span>=<span class="hljs-string">"{ 'number-item': !isNaN(item), 'mark-item': isNaN(item) }"</span>
        &gt;</span>
          <span class="hljs-comment">&lt;!-- æ•°å­—é¡¹ --&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"!isNaN(item)"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>
              <span class="hljs-attr">ref</span>=<span class="hljs-string">"numberItem"</span>
              <span class="hljs-attr">:style</span>=<span class="hljs-string">"{
                transform: `translate(-50%, -${Number(item) * 10}%)`,
                transition: `transform ${duration}s ease-in-out`
              }"</span>
            &gt;</span>
              0123456789
            <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-comment">&lt;!-- åˆ†éš”ç¬¦é¡¹ --&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-else</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mark-symbol"</span>&gt;</span>{{ item }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

&lt;script setup lang="ts"&gt;
import { ref, watch, nextTick, onUnmounted } from 'vue';

// ç»„ä»¶props
const props = defineProps({
  // è¦æ˜¾ç¤ºçš„æ•°å­—
  number: {
    type: [Number, String],
    default: 0
  },
  // åŠ¨ç”»æŒç»­æ—¶é—´(ç§’)
  duration: {
    type: Number,
    default: 1.5
  },
  // æ˜¯å¦è‡ªåŠ¨å¢é•¿(æ¨¡æ‹Ÿè½®è¯¢)
  autoIncrease: {
    type: Boolean,
    default: true
  },
  // å¢é•¿é—´éš”(æ¯«ç§’)
  increaseInterval: {
    type: Number,
    default: 3000
  },
  // æ¯æ¬¡å¢é•¿çš„éšæœºæ•°èŒƒå›´
  increaseRange: {
    type: Array,
    default: () =&gt; [1, 100]
  },
  // é…ç½®æ˜¾ç¤ºçš„ä½æ•°
  digitLength: {
    type: Number,
    default: 8,
    validator: (value: number) =&gt; {
      return value &gt;= 1 &amp;&amp; value &lt;= 18;
    }
  },
  // æ˜¯å¦æ˜¾ç¤ºé‡‘é¢åˆ†éš”ç¬¦
  showSeparator: {
    type: Boolean,
    default: true
  },
  // è¡¥é›¶æ–¹å‘ (left/right)
  padDirection: {
    type: String,
    default: 'left',
    validator: (value: string) =&gt; {
      return ['left', 'right'].includes(value);
    }
  },
  // æ ¸å¿ƒæ–°å¢ï¼šæ˜¯å¦æ˜¾ç¤ºå‰ç½®é›¶
  showLeadingZero: {
    type: Boolean,
    default: true
  }
});

// çŠ¶æ€ç®¡ç†
const numArr = ref&lt;string[]&gt;([]); // å¤„ç†åçš„æ•°å­—æ•°ç»„(å«åˆ†éš”ç¬¦)
const currentNumber = ref&lt;number&gt;(Number(props.number)); // å½“å‰æ˜¾ç¤ºçš„æ•°å­—
let timer: NodeJS.Timeout | null = null; // è‡ªåŠ¨å¢é•¿å®šæ—¶å™¨

/**
 * æ ¼å¼åŒ–æ•°å­—ä¸ºå¸¦åƒåˆ†ä½åˆ†éš”ç¬¦çš„å­—ç¬¦ä¸²
 * @param numStr åŸå§‹æ•°å­—å­—ç¬¦ä¸²
 * @returns æ ¼å¼åŒ–åçš„å­—ç¬¦ä¸²
 */
const formatWithSeparator = (numStr: string): string =&gt; {
  // ä»å³å¾€å·¦æ¯3ä½æ·»åŠ åˆ†éš”ç¬¦
  return numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
};

/**
 * å¤„ç†å‰ç½®é›¶æ˜¾ç¤ºé€»è¾‘
 * @param numStr è¡¥é›¶åçš„æ•°å­—å­—ç¬¦ä¸²
 * @returns å¤„ç†åçš„æ•°å­—å­—ç¬¦ä¸²
 */
const handleLeadingZero = (numStr: string): string =&gt; {
  if (props.showLeadingZero) return numStr;
  
  // ä¸æ˜¾ç¤ºå‰ç½®é›¶çš„å¤„ç†é€»è¾‘
  if (props.padDirection === 'left') {
    // å·¦è¡¥é›¶ï¼šå»é™¤å‰ç½®é›¶ï¼Œä½†ä¿ç•™è‡³å°‘ä¸€ä½ï¼ˆé˜²æ­¢ç©ºå­—ç¬¦ä¸²ï¼‰
    const trimmed = numStr.replace(/^0+/, '');
    return trimmed || '0';
  } else {
    // å³è¡¥é›¶ï¼šå»é™¤åç½®é›¶ï¼Œä½†ä¿ç•™è‡³å°‘ä¸€ä½
    const trimmed = numStr.replace(/0+$/, '');
    return trimmed || '0';
  }
};

/**
 * åˆå§‹åŒ–æ•°å­—å¤„ç†
 * @param num è¦å¤„ç†çš„æ•°å­—
 */
const initNumber = (num: number) =&gt; {
  // è½¬æ¢ä¸ºæ•´æ•°å¹¶è½¬å­—ç¬¦ä¸²
  let numberStr = Math.floor(num).toString();
  
  // 1. è¡¥é›¶å¤„ç†
  if (numberStr.length &lt; props.digitLength) {
    if (props.padDirection === 'left') {
      numberStr = numberStr.padStart(props.digitLength, '0');
    } else {
      numberStr = numberStr.padEnd(props.digitLength, '0');
    }
  } else if (numberStr.length &gt; props.digitLength) {
    console.warn(`æ•°å­—è¶…è¿‡${props.digitLength}ä½ï¼Œå·²æˆªå–å‰${props.digitLength}ä½`);
    // æˆªå–å¯¹åº”ä½æ•°
    numberStr = props.padDirection === 'left' 
      ? numberStr.slice(-props.digitLength) // å·¦ä¾§æˆªå–ï¼šå–åNä½
      : numberStr.slice(0, props.digitLength); // å³ä¾§æˆªå–ï¼šå–å‰Nä½
  }

  // 2. å¤„ç†å‰ç½®/åç½®é›¶æ˜¾ç¤ºé€»è¾‘
  let processedStr = handleLeadingZero(numberStr);
  
  // 3. é‡‘é¢åˆ†éš”ç¬¦å¤„ç†
  let formatted = processedStr;
  if (props.showSeparator &amp;&amp; processedStr.length &gt; 3) {
    formatted = formatWithSeparator(processedStr);
  }
  
  // 4. è½¬æ¢ä¸ºæ•°ç»„ä¾›æ¸²æŸ“
  numArr.value = formatted.split('');
};

/**
 * ç”Ÿæˆéšæœºæ•°
 * @param min æœ€å°å€¼
 * @param max æœ€å¤§å€¼
 */
const getRandomNumber = (min: number, max: number) =&gt; {
  return Math.floor(Math.random() * (max - min + 1) + min);
};

/**
 * è‡ªåŠ¨å¢é•¿æ•°å­—
 */
const startAutoIncrease = () =&gt; {
  if (!props.autoIncrease) return;
  
  // æ¸…é™¤ç°æœ‰å®šæ—¶å™¨
  if (timer) clearInterval(timer);
  
  // å¯åŠ¨æ–°å®šæ—¶å™¨
  timer = setInterval(() =&gt; {
    const [min, max] = props.increaseRange;
    currentNumber.value += getRandomNumber(min, max);
    initNumber(currentNumber.value);
  }, props.increaseInterval);
};

/**
 * åœæ­¢è‡ªåŠ¨å¢é•¿
 */
const stopAutoIncrease = () =&gt; {
  if (timer) {
    clearInterval(timer);
    timer = null;
  }
};

// åˆå§‹åŒ–
nextTick(() =&gt; {
  currentNumber.value = Number(props.number);
  initNumber(currentNumber.value);
  startAutoIncrease();
});

// ç›‘å¬propså˜åŒ–
watch(
  () =&gt; [props.number, props.digitLength, props.showSeparator, props.padDirection, props.showLeadingZero],
  () =&gt; {
    currentNumber.value = Number(props.number);
    initNumber(currentNumber.value);
  },
  { immediate: true, deep: true }
);

// ç›‘å¬autoIncreaseå˜åŒ–
watch(
  () =&gt; props.autoIncrease,
  (newVal) =&gt; {
    if (newVal) {
      startAutoIncrease();
    } else {
      stopAutoIncrease();
    }
  }
);

// ç»„ä»¶å¸è½½æ—¶æ¸…é™¤å®šæ—¶å™¨
onUnmounted(() =&gt; {
  stopAutoIncrease();
});
&lt;/script&gt;

&lt;style scoped lang="scss"&gt;
.number-roll {
  display: inline-block;
  padding: 8px 16px;
  background-color: #0f172a;
  border-radius: 8px;

  .number-container {
    position: relative;
  }

  .number-box {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
    margin: 0;
    padding: 0;
    list-style: none;
  }

  // æ•°å­—é¡¹æ ·å¼
  .number-item {
    width: 42px;
    height: 60px;
    position: relative;
    background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
    border-radius: 6px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    writing-mode: vertical-lr; // å‚ç›´æ’ç‰ˆ
    text-orientation: upright; // æ–‡å­—ç›´ç«‹
    overflow: hidden;
    user-select: none;

    span {
      display: block;
      width: 100%;
      height: 100%;
      position: relative;

      p {
        position: absolute;
        top: 0;
        left: 50%;
        transform: translateX(-50%);
        margin: 0;
        padding: 0;
        letter-spacing: 12px; // æ•°å­—é—´è·
        font-family: 'Arial', sans-serif;
        font-weight: 700;
        font-size: 48px;
        color: #38bdf8;
        text-shadow: 0 0 10px rgba(56, 189, 248, 0.5);
      }
    }
  }

  // åˆ†éš”ç¬¦é¡¹æ ·å¼
  .mark-item {
    width: 16px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;

    .mark-symbol {
      font-family: 'Arial', sans-serif;
      font-size: 32px;
      color: #38bdf8;
      font-weight: bold;
    }
  }

  // å“åº”å¼è°ƒæ•´ä¸åŒä½æ•°çš„æ˜¾ç¤º
  :deep(.number-box) {
    flex-wrap: nowrap;
  }

  // Firefoxå…¼å®¹æ€§è°ƒæ•´
  @-moz-document url-prefix() {
    .number-item p {
      margin-top: 4px;
    }
  }

  // å°ä½æ•°æ ·å¼ä¼˜åŒ–
  @media (max-width: 768px) {
    .number-item {
      width: 32px;
      height: 48px;

      span p {
        font-size: 36px;
        letter-spacing: 8px;
      }
    }

    .mark-item {
      width: 12px;
      height: 48px;

      .mark-symbol {
        font-size: 24px;
      }
    }
  }
&lt;/style&gt;

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[VitePress+Github Pageså®ç°é™æ€æ–‡æ¡£ç«™]]></title>    <link>https://juejin.cn/post/7587688765189554176</link>    <guid>https://juejin.cn/post/7587688765189554176</guid>    <pubDate>2025-12-26T07:37:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587688765189554176" data-draft-id="7587740546954018856" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="VitePress+Github Pageså®ç°é™æ€æ–‡æ¡£ç«™"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-26T07:37:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†èŠ±"/> <meta itemprop="url" content="https://juejin.cn/user/4002664676073741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            VitePress+Github Pageså®ç°é™æ€æ–‡æ¡£ç«™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4002664676073741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†èŠ±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T07:37:13.000Z" title="Fri Dec 26 2025 07:37:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æŸ¥é˜…äº†ç½‘ä¸Šè®¸å¤šVitePress+Github Pagesçš„éƒ¨ç½²æ•™ç¨‹ï¼Œå‘ç°è¦ä¹ˆä¸å®Œæ•´ã€è¦ä¹ˆè¿‡æ—¶ã€è¦ä¹ˆä¸å¤Ÿè¯¦ç»†</p>
<p>äºæ˜¯åœ¨è¿™é‡Œä¸“é—¨å†™ä¸€ç¯‡è¯¦ç»†çš„å›¾æ–‡æ•™ç¨‹ä»¥ä¾›æŸ¥é˜…ã€‚</p>
<p>æˆ–è®¸å­˜åœ¨æ—¶æ•ˆæ€§ï¼Œæ³¨æ„æœ¬æ–‡å‘å¸ƒäº2025å¹´12æœˆ26æ—¥</p>
</blockquote>
<h2 data-id="heading-0">ç¯å¢ƒå‡†å¤‡</h2>
<ul>
<li>Node.JSï¼šç‚¹å‡»å‰å¾€ä¸‹è½½=&gt;<a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fzh-cn%2Fdownload" target="_blank" title="https://nodejs.org/zh-cn/download" ref="nofollow noopener noreferrer">Node.JS</a>ï¼Œç‰ˆæœ¬è¯·ç¡®ä¿**&gt;18**ã€‚</li>
<li>æ”¯æŒmarkdownè¯­æ³•çš„ç¼–è¾‘å™¨ï¼šæ¨è <code>VsCode</code>å¹¶å®‰è£…å¯¹åº”æ‰©å±•
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmarketplace.visualstudio.com%2Fitems%3FitemName%3DVue.volar" target="_blank" title="https://marketplace.visualstudio.com/items?itemName=Vue.volar" ref="nofollow noopener noreferrer">Vueå®˜æ–¹æ‰©å±•</a></li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Fmarketplace.visualstudio.com%2Fitems%3FitemName%3DDavidAnson.vscode-markdownlint" target="_blank" title="http://marketplace.visualstudio.com/items?itemName=DavidAnson.vscode-markdownlint" ref="nofollow noopener noreferrer">markdownlint</a></li>
</ul>
</li>
</ul>
<h2 data-id="heading-1">åˆ›å»ºé¡¹ç›®</h2>
<p>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹<code>VitePressDemo</code>ï¼ˆå–ä½ è‡ªå·±æƒ³è¦çš„åå­—å³å¯ï¼‰å¹¶è¿›å…¥ç»ˆç«¯</p>
<blockquote>
<p>ä½ ä¹Ÿå¯ä»¥ç›´æ¥åœ¨ä½ ç°æœ‰çš„é¡¹ç›®æ–‡ä»¶å¤¹æ ¹ç›®å½•ä¸­è¿™ä¹ˆåšï¼Œä¾‹å¦‚ä½ è¦ä¸ºè‡ªå·±çš„åå°ç¼–å†™ä¸€ä¸ªæ–‡æ¡£ç«™</p>
</blockquote>
<h3 data-id="heading-2">æ‰§è¡ŒæŒ‡ä»¤</h3>
<p>æ ¹æ®è‡ªå·±çš„ç¯å¢ƒé€‰æ‹©ï¼š</p>
<ul>
<li>npmï¼š<code>npm add -D vitepress@next</code></li>
<li>pnpmï¼š<code>pnpm add -D vitepress@next</code></li>
<li>yarnï¼š<code>yarn add -D vitepress@next vue</code></li>
<li>bunï¼š<code>bun add -D vitepress@next</code></li>
</ul>
<h3 data-id="heading-3">å®‰è£…å‘å¯¼</h3>
<p>å®‰è£…å®Œæˆåç»§ç»­è¾“å…¥æŒ‡ä»¤ï¼Œæ ¹æ®è‡ªå·±çš„ç¯å¢ƒé€‰æ‹©ï¼š</p>
<ul>
<li>npmï¼š<code>npx vitepress init</code></li>
<li>pnpmï¼š<code>pnpm vitepress init</code></li>
<li>yarnï¼š<code>yarn vitepress init</code></li>
<li>bunï¼š<code>bun vitepress init</code></li>
</ul>
<p>ç„¶åä½ å°†éœ€è¦å›ç­”ä¸€äº›é—®é¢˜ç”¨äºç¯å¢ƒçš„åˆå§‹é…ç½®ï¼Œæ¨èæŒ‰å¦‚ä¸‹è®¾ç½®</p>
<pre><code class="hljs language-js" lang="js">â”Œ  <span class="hljs-title class_">Welcome</span> to <span class="hljs-title class_">VitePress</span>!
â”‚
â—‡  <span class="hljs-title class_">Where</span> should <span class="hljs-title class_">VitePress</span> initialize the config?
â”‚  ./docs
â”‚
â—‡  <span class="hljs-title class_">Where</span> should <span class="hljs-title class_">VitePress</span> look <span class="hljs-keyword">for</span> your markdown files?
â”‚  ./docs
â”‚
â—‡  <span class="hljs-title class_">Site</span> <span class="hljs-attr">title</span>:
â”‚  <span class="hljs-title class_">VitePressDemo</span>ï¼ˆå¯ä»¥ä¿®æ”¹ï¼‰
â”‚
â—‡  <span class="hljs-title class_">Site</span> <span class="hljs-attr">description</span>:
â”‚  <span class="hljs-title class_">VitePressDemo</span> descriptionï¼ˆå¯ä»¥ä¿®æ”¹ï¼‰
â”‚
â—‡  <span class="hljs-title class_">Theme</span>:
â”‚  <span class="hljs-title class_">Default</span> <span class="hljs-title class_">Theme</span>
â”‚
â—‡  <span class="hljs-title class_">Use</span> <span class="hljs-title class_">TypeScript</span> <span class="hljs-keyword">for</span> config and theme files?
â”‚  <span class="hljs-title class_">Yes</span>
â”‚
â—‡  <span class="hljs-title class_">Add</span> <span class="hljs-title class_">VitePress</span> npm scripts to package.<span class="hljs-property">json</span>?
â”‚  <span class="hljs-title class_">Yes</span>
â”‚
â—‡  <span class="hljs-title class_">Add</span> a prefix <span class="hljs-keyword">for</span> <span class="hljs-title class_">VitePress</span> npm scripts?
â”‚  <span class="hljs-title class_">Yes</span>
â”‚
â—‡  <span class="hljs-title class_">Prefix</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">VitePress</span> npm <span class="hljs-attr">scripts</span>:
â”‚  docs
â”‚
â””  <span class="hljs-title class_">Done</span>! <span class="hljs-title class_">Now</span> run pnpm run <span class="hljs-attr">docs</span>:dev and start writing.
</code></pre>
<h3 data-id="heading-4">é¡¹ç›®ç»“æ„</h3>
<p>å‡è®¾é€‰æ‹©åœ¨ <code>./docs</code> ä¸­æ­å»º VitePress é¡¹ç›®ï¼Œç”Ÿæˆçš„æ–‡ä»¶ç»“æ„åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">.
â”œâ”€ docs
â”‚  â”œâ”€ .vitepress
â”‚  â”‚  â””â”€ <span class="hljs-built_in">config</span>.js
â”‚  â”œâ”€ api-examples.md
â”‚  â”œâ”€ markdown-examples.md
â”‚  â””â”€ index.md
â””â”€ <span class="hljs-built_in">package</span>.json
</code></pre>
<blockquote>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒVitePress å°†å…¶å¼€å‘æœåŠ¡å™¨ç¼“å­˜å­˜å‚¨åœ¨ <code>.vitepress/cache</code> ä¸­ï¼Œå¹¶å°†ç”Ÿäº§æ„å»ºè¾“å‡ºå­˜å‚¨åœ¨ <code>.vitepress/dist</code> ä¸­ã€‚å¦‚æœä½¿ç”¨ Gitï¼Œåº”è¯¥å°†å®ƒä»¬æ·»åŠ åˆ° <code>.gitignore</code> æ–‡ä»¶ä¸­ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">node_modules/
docs/node_modules
docs/.vuepress/.temp
docs/.vitepress/dist
docs/.vitepress/cache
</code></pre>
</blockquote>
<h3 data-id="heading-5">æœ¬åœ°è¿è¡Œ</h3>
<p>å¦‚æœä½ çš„å®‰è£…å‘å¯¼ä¸æˆ‘æè¿°çš„ä¸€è‡´ï¼Œä½ åº”è¯¥å¯ä»¥åœ¨ <code>package.json</code> ä¸­çœ‹åˆ°ä»¥ä¸‹<code>npm</code>è„šæœ¬</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  ...
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"docs:dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vitepress dev docs"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"docs:build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vitepress build docs"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"docs:preview"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vitepress preview docs"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  ...
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å¯åŠ¨å…·æœ‰å³æ—¶çƒ­æ›´æ–°çš„æœ¬åœ°å¼€å‘æœåŠ¡å™¨ã€‚æ ¹æ®è‡ªå·±çš„ç¯å¢ƒä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<ul>
<li>npmï¼š<code>npx vitepress dev docs</code></li>
<li>pnpmï¼š<code>pnpm vitepress dev docs</code></li>
<li>yarnï¼š<code>yarn vitepress dev docs</code></li>
<li>bunï¼š<code>bun vitepress dev docs</code></li>
</ul>
<p>å¼€å‘æœåŠ¡åº”è¯¥ä¼šè¿è¡Œåœ¨ <code>http://localhost:5173</code> ä¸Šï¼Œå°†URLå¤åˆ¶åˆ°æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œå³å¯åœ¨æœ¬åœ°è®¿é—®æ–‡æ¡£ç«™ï¼</p>
<h3 data-id="heading-6">éªŒè¯ç¼–è¯‘</h3>
<p>æœ‰æ—¶å€™é¡¹ç›®å¯ä»¥åœ¨æœ¬åœ°è¿è¡Œï¼Œä½†æ— æ³•æ­£å¸¸ç¼–è¯‘</p>
<p>æ‰€ä»¥æ¨èæ¯æ¬¡éœ€è¦æ›´æ–°è‡ªå·±çš„æ–‡æ¡£ç«™ä¹‹å‰ï¼Œä½¿ç”¨ç¼–è¯‘æŒ‡ä»¤éªŒè¯ç¼–è¯‘æ˜¯å¦å¯è¡Œï¼š</p>
<pre><code class="hljs language-sh" lang="sh">npm run docs:build
</code></pre>
<p>ä½ è¿˜å¯ä»¥é€šè¿‡æŒ‡ä»¤æ¥æœ¬åœ°é¢„è§ˆç¼–è¯‘å¥½çš„ç½‘ç«™ï¼š</p>
<pre><code class="hljs language-sh" lang="sh">npm run docs:preview
</code></pre>
<p>preview å‘½ä»¤å°†å¯åŠ¨ä¸€ä¸ªæœ¬åœ°é™æ€ Web æœåŠ¡ <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A4173%25EF%25BC%258C%25E8%25AF%25A5%25E6%259C%258D%25E5%258A%25A1%25E4%25BB%25A5" target="_blank" title="http://localhost:4173%EF%BC%8C%E8%AF%A5%E6%9C%8D%E5%8A%A1%E4%BB%A5" ref="nofollow noopener noreferrer">http://localhost:4173ï¼Œè¯¥æœåŠ¡ä»¥</a> .vitepress/dist ä½œä¸ºæºæ–‡ä»¶ã€‚è¿™æ˜¯æ£€æŸ¥ç”Ÿäº§ç‰ˆæœ¬åœ¨æœ¬åœ°ç¯å¢ƒä¸­æ˜¯å¦æ­£å¸¸çš„ä¸€ç§ç®€å•æ–¹æ³•ã€‚</p>
<h2 data-id="heading-7">éƒ¨ç½²Github Pages</h2>
<h3 data-id="heading-8">åšä¸€äº›å‡†å¤‡</h3>
<ul>
<li>
<p>è¯·åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ<code>npm install</code>ï¼Œç”Ÿæˆ<code>package-lock.json</code>æ–‡ä»¶</p>
</li>
<li>
<p>åœ¨/docs/.vitepress/config.mtsæ–‡ä»¶ä¸­ï¼Œè®¾ç½®baseä¸ºè‡ªå·±çš„é¡¹ç›®åï¼Œä¾‹å¦‚</p>
<pre><code class="hljs language-php" lang="php">import { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">"vitepress"</span>;

<span class="hljs-comment">// https://vitepress.dev/reference/site-config</span>
export <span class="hljs-keyword">default</span> <span class="hljs-title function_ invoke__">defineConfig</span>({
  <span class="hljs-attr">title</span>: <span class="hljs-string">"VitePressDemo"</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">"VitePressDemo Description"</span>,
  // è®¾ç½®base
  <span class="hljs-attr">base</span>: <span class="hljs-string">"/VitePressDemo/"</span>,
  <span class="hljs-attr">themeConfig</span>: {
    // <span class="hljs-attr">https</span>://vitepress.dev/reference/<span class="hljs-keyword">default</span>-theme-config
    <span class="hljs-attr">nav</span>: [
      { <span class="hljs-attr">text</span>: <span class="hljs-string">"Home"</span>, <span class="hljs-attr">link</span>: <span class="hljs-string">"/"</span> },
      { <span class="hljs-attr">text</span>: <span class="hljs-string">"Examples"</span>, <span class="hljs-attr">link</span>: <span class="hljs-string">"/markdown-examples"</span> },
    ],

    <span class="hljs-attr">sidebar</span>: [
      {
        <span class="hljs-attr">text</span>: <span class="hljs-string">"Examples"</span>,
        <span class="hljs-attr">items</span>: [
          { <span class="hljs-attr">text</span>: <span class="hljs-string">"Markdown Examples"</span>, <span class="hljs-attr">link</span>: <span class="hljs-string">"/markdown-examples"</span> },
          { <span class="hljs-attr">text</span>: <span class="hljs-string">"Runtime API Examples"</span>, <span class="hljs-attr">link</span>: <span class="hljs-string">"/api-examples"</span> },
        ],
      },
    ],

    <span class="hljs-attr">socialLinks</span>: [
      { <span class="hljs-attr">icon</span>: <span class="hljs-string">"github"</span>, <span class="hljs-attr">link</span>: <span class="hljs-string">"https://github.com/vuejs/vitepress"</span> },
    ],
  },
});

</code></pre>
<p>è¿™ä¸€æ­¥æ˜¯å¿…é¡»çš„ï¼Œå› ä¸º<code>GitHub Pages</code>çš„é»˜è®¤åŸŸåæ ¼å¼ä¸º<code>https://ä½ çš„ç”¨æˆ·å..github.io/é¡¹ç›®å/</code>ï¼Œä½ éœ€è¦å‘Šè¯‰vitePressé¡¹ç›®çš„å…¥å£åœ¨å“ªã€‚</p>
</li>
</ul>
<h3 data-id="heading-9">å»ºç«‹ä»“åº“</h3>
<p>æˆ‘ä»¬éœ€è¦åœ¨Githubä¸­å»ºç«‹ä¸€ä¸ªä»“åº“å¹¶å°†æˆ‘ä»¬çš„ä»£ç æ”¾è¿›å»ã€‚</p>
<blockquote>
<p>è¿™ä¸€éƒ¨åˆ†çš„çŸ¥è¯†ä¸Gitæœ‰å…³ï¼Œç½‘ä¸Šèµ„æ–™å¾ˆå¤šåœ¨æ­¤ä¸åšèµ˜è¿°ã€‚</p>
<p>æ¨èåœ¨ VsCode æ’ä»¶ä¸­å®‰è£… <a href="https://link.juejin.cn?target=https%3A%2F%2Fmarketplace.visualstudio.com%2Fitems%3FitemName%3DGitHub.vscode-pull-request-github" target="_blank" title="https://marketplace.visualstudio.com/items?itemName=GitHub.vscode-pull-request-github" ref="nofollow noopener noreferrer">GitHub Pull Requests </a>ç”¨äº Github ä»“åº“æ¨é€ã€æ‹‰å–ã€‚</p>
</blockquote>
<p>åœ¨ä»“åº“ç•Œé¢é€‰æ‹©<code>Settings</code>-<code>Pages</code>-<code>Build and deployment</code>-<code>Source</code>-ä¸‹æ‹‰æ¡†é€‰æ‹© <code>Github Actions</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/838514098299411e83770178f6b5600a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YaN6Iqx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339433&amp;x-signature=aEobXXZMeDUMgs4VfIblgPDrvho%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-10">æäº¤æ¸²æŸ“é€»è¾‘</h3>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬è¦ä¸ºç½‘ç«™ç¼–å†™ç½‘ç«™æ¸²æŸ“é€»è¾‘</p>
<p>é€‰æ‹©<code>Github Pages Jekyll</code>ä¸‹æ–¹çš„<code>Configure</code></p>
<p>æŒ‰ç…§å¦‚å›¾è®¾ç½®å†™å…¥ä»£ç ï¼Œå¹¶å°†æ–‡ä»¶åæ”¹ä¸º<code>deploy.yml</code>ï¼Œå®Œæˆåç‚¹å‡»<code>Commit changes</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7943de067e64b35bfe1b9392abc2bd7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YaN6Iqx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339433&amp;x-signature=6Bct9lhuwmEWhUCtMUEQ38gPkic%3D" alt="" loading="lazy"/></p>
<p>éœ€è¦å†™å…¥çš„ä»£ç å¦‚ä¸‹ï¼Œä¸€å®šè¦å°†ç¯å¢ƒä¿®æ”¹ä¸ºè‡ªå·±çš„ç¯å¢ƒï¼Œä¾‹å¦‚ <code>node-version: 22</code>ï¼ˆNode.JSç‰ˆæœ¬ï¼‰ã€<code>cache: npm</code>ã€<code>run: npm ci</code></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># æ„å»º VitePress ç«™ç‚¹å¹¶å°†å…¶éƒ¨ç½²åˆ° GitHub Pages çš„ç¤ºä¾‹å·¥ä½œæµç¨‹</span>
<span class="hljs-comment">#</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">VitePress</span> <span class="hljs-string">site</span> <span class="hljs-string">to</span> <span class="hljs-string">Pages</span>

<span class="hljs-attr">on:</span>
  <span class="hljs-comment"># åœ¨é’ˆå¯¹ `main` åˆ†æ”¯çš„æ¨é€ä¸Šè¿è¡Œã€‚å¦‚æœä½ </span>
  <span class="hljs-comment"># ä½¿ç”¨ `master` åˆ†æ”¯ä½œä¸ºé»˜è®¤åˆ†æ”¯ï¼Œè¯·å°†å…¶æ›´æ”¹ä¸º `master`</span>
  <span class="hljs-attr">push:</span>
    <span class="hljs-attr">branches:</span> [<span class="hljs-string">master</span>]

  <span class="hljs-comment"># å…è®¸ä½ ä» Actions é€‰é¡¹å¡æ‰‹åŠ¨è¿è¡Œæ­¤å·¥ä½œæµç¨‹</span>
  <span class="hljs-attr">workflow_dispatch:</span>

<span class="hljs-comment"># è®¾ç½® GITHUB_TOKEN çš„æƒé™ï¼Œä»¥å…è®¸éƒ¨ç½²åˆ° GitHub Pages</span>
<span class="hljs-attr">permissions:</span>
  <span class="hljs-attr">contents:</span> <span class="hljs-string">read</span>
  <span class="hljs-attr">pages:</span> <span class="hljs-string">write</span>
  <span class="hljs-attr">id-token:</span> <span class="hljs-string">write</span>

<span class="hljs-comment"># åªå…è®¸åŒæ—¶è¿›è¡Œä¸€æ¬¡éƒ¨ç½²ï¼Œè·³è¿‡æ­£åœ¨è¿è¡Œå’Œæœ€æ–°é˜Ÿåˆ—ä¹‹é—´çš„è¿è¡Œé˜Ÿåˆ—</span>
<span class="hljs-comment"># ä½†æ˜¯ï¼Œä¸è¦å–æ¶ˆæ­£åœ¨è¿›è¡Œçš„è¿è¡Œï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›å…è®¸è¿™äº›ç”Ÿäº§éƒ¨ç½²å®Œæˆ</span>
<span class="hljs-attr">concurrency:</span>
  <span class="hljs-attr">group:</span> <span class="hljs-string">pages</span>
  <span class="hljs-attr">cancel-in-progress:</span> <span class="hljs-literal">false</span>

<span class="hljs-attr">jobs:</span>
  <span class="hljs-comment"># æ„å»ºå·¥ä½œ</span>
  <span class="hljs-attr">build:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Checkout</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v4</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">fetch-depth:</span> <span class="hljs-number">0</span> <span class="hljs-comment"># å¦‚æœæœªå¯ç”¨ lastUpdatedï¼Œåˆ™ä¸éœ€è¦</span>
      <span class="hljs-comment"># - uses: pnpm/action-setup@v2 # å¦‚æœä½¿ç”¨ pnpmï¼Œè¯·å–æ¶ˆæ³¨é‡Š</span>
      <span class="hljs-comment"># - uses: oven-sh/setup-bun@v1 # å¦‚æœä½¿ç”¨ Bunï¼Œè¯·å–æ¶ˆæ³¨é‡Š</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Setup</span> <span class="hljs-string">Node</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v4</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">node-version:</span> <span class="hljs-number">22</span>
          <span class="hljs-attr">cache:</span> <span class="hljs-string">npm</span> <span class="hljs-comment"># æˆ– pnpm / yarn</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Setup</span> <span class="hljs-string">Pages</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/configure-pages@v4</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">dependencies</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">ci</span> <span class="hljs-comment"># æˆ– pnpm install / yarn install / bun install</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Build</span> <span class="hljs-string">with</span> <span class="hljs-string">VitePress</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">|
          npm run docs:build # æˆ– pnpm docs:build / yarn docs:build / bun run docs:build
          touch docs/.vitepress/dist/.nojekyll
</span>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Upload</span> <span class="hljs-string">artifact</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/upload-pages-artifact@v3</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">path:</span> <span class="hljs-string">docs/.vitepress/dist</span>

  <span class="hljs-comment"># éƒ¨ç½²å·¥ä½œ</span>
  <span class="hljs-attr">deploy:</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">github-pages</span>
      <span class="hljs-attr">url:</span> <span class="hljs-string">${{</span> <span class="hljs-string">steps.deployment.outputs.page_url</span> <span class="hljs-string">}}</span>
    <span class="hljs-attr">needs:</span> <span class="hljs-string">build</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span>
    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">to</span> <span class="hljs-string">GitHub</span> <span class="hljs-string">Pages</span>
        <span class="hljs-attr">id:</span> <span class="hljs-string">deployment</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/deploy-pages@v4</span>

</code></pre>
<h3 data-id="heading-11">ç¼–è¯‘ç½‘ç«™</h3>
<p>å°†<code>deploy.yml</code>æ–‡ä»¶æäº¤æˆåŠŸåï¼Œæˆ‘ä»¬æ¥åˆ°<code>Actions</code>ç¼–è¯‘ä»£ç </p>
<p>åœ¨ä»“åº“ç•Œé¢é€‰æ‹©<code>Actions</code>-<code>Deploy VitePress site to Pages</code>-<code>Run workflow</code>ä¸‹æ‹‰æ¡†-é€‰æ‹©<code>Run workflow</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/294375cfc8aa44e5abf5c8e1ce17cf1b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YaN6Iqx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339433&amp;x-signature=DlhKbq8j1QRsGdgvzufdTmZ1FVQ%3D" alt="" loading="lazy"/></p>
<p>ä½ æ¯æ¬¡æäº¤å¹¶æ›´æ–°äº†ä»“åº“çš„ä»£ç ï¼Œç½‘ç«™å¹¶ä¸ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œéœ€è¦æ¥è¿™é‡Œå†æ¬¡æ‰§è¡Œä¸€æ¬¡<code>Run workflow</code>æ‰ä¼šé‡æ–°ç¼–è¯‘ç½‘ç«™</p>
<blockquote>
<p>æˆ‘æ²¡æœ‰è®¾ç½®è‡ªåŠ¨ç¼–è¯‘ï¼Œè¿™ä¸ªæ­¥éª¤å¯¹äºæˆ‘æ¥è¯´ç›¸å½“äºä¸€ä¸ªâ€œç¡®è®¤â€é”®ï¼Œå¯¹æˆ‘å¾ˆæœ‰å¿…è¦</p>
<p>å¦‚æœéœ€è¦è‡ªåŠ¨ç¼–è¯‘ï¼Œå°†<code>reploy.yml</code>ä¸­çš„<code>branches: [master]</code>ä¿®æ”¹ä¸º<code>branches: [main]</code>å³å¯</p>
</blockquote>
<h3 data-id="heading-12">è®¿é—®ç½‘ç«™</h3>
<p>ä½ æ¯æ¬¡ç¼–è¯‘ç½‘ç«™ååˆ·æ–°é¡µé¢ï¼Œæœ€æ–°çš„ç¼–è¯‘å·¦è¾¹ä¼šæœ‰ä¸€ä¸ªçŠ¶æ€</p>
<p>é»„è‰²ä»£è¡¨æ­£åœ¨ç¼–è¯‘ï¼Œçº¢è‰²ä»£è¡¨ç¼–è¯‘é”™è¯¯ï¼ˆå‡ºBUGäº†ï¼‰ï¼Œç»¿è‰²åˆ™ä»£è¡¨ç¼–è¯‘å®Œæˆã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a99b210a578f475bbc237e2b2dd6304e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YaN6Iqx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339433&amp;x-signature=9Ce2jpo4pvfuQPdEswG4AMP03HI%3D" alt="" loading="lazy"/></p>
<p>å½“å®ƒæ˜¾ç¤ºç»¿è‰²çš„æ—¶å€™ï¼Œä½ å°±å¯ä»¥å»è®¿é—®è‡ªå·±çš„ç½‘ç«™äº†ï¼ˆåˆ·æ–°æ‰å¯ä»¥çœ‹åˆ°ç»¿è‰²ï¼Œç½‘ç«™ä¸ä¼šè‡ªåŠ¨åˆ·æ–°ï¼‰</p>
<blockquote>
<p>å¦‚æœè¿™ä¸€æ­¥ç¼–è¯‘é”™è¯¯ï¼Œè¯·åœ¨æ ¹ç›®å½•å†æ¬¡æ‰§è¡Œ<code>npm add -D vitepress@next</code></p>
<p>ç¡®ä¿ä½ çš„package.jsonçš„ä»£ç å­˜åœ¨ä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"docs:dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vitepress dev docs"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"docs:build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vitepress build docs"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"docs:preview"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vitepress preview docs"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"vitepress"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^2.0.0-alpha.15"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

</code></pre>
</blockquote>
<p>å›åˆ°<code>Settings</code>-<code>Pages</code>å°±å¯ä»¥çœ‹åˆ°è‡ªå·±çš„ç½‘ç«™åœ°å€äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9f1370b3a514bbe886976e2bab7a028~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YaN6Iqx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339433&amp;x-signature=txww4HnNL7a6MHlYiMfUD7dKm6U%3D" alt="" loading="lazy"/></p>
<p>è¿›å…¥ç½‘ç«™å¯ä»¥çœ‹åˆ°vitePressçš„åˆå§‹æ¨¡æ¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cfd6e46c7bbd4c52b566767013a6b53f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YaN6Iqx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339433&amp;x-signature=3UNyvPTxtyJVH3KaqZOSjox2snw%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>å¦‚æœè¿›å…¥ç½‘é¡µé™¤äº†ä¸€ä¸ªæ ‡é¢˜ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œåˆ™å¤§æ¦‚ç‡æ˜¯baseè®¾ç½®çš„é—®é¢˜ã€‚</p>
</blockquote>
<h2 data-id="heading-13">ç»“å°¾</h2>
<p>æœ¬æ–‡ç”¨äºæˆªå›¾çš„Demoé¡¹ç›®åœ°å€ä¸ºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FZaiHuaOvO%2FVitePressDemo" target="_blank" title="https://github.com/ZaiHuaOvO/VitePressDemo" ref="nofollow noopener noreferrer">VitePressDemo</a></p>
<p>å…³äºå¼€å‘æ–¹é¢å¯ä»¥ç¿»é˜…æ–‡æ¡£ <a href="https://link.juejin.cn?target=https%3A%2F%2Fvitepress.dev%2Fzh%2F" target="_blank" title="https://vitepress.dev/zh/" ref="nofollow noopener noreferrer">VitePress</a>ï¼Œæœ¬æ–‡æœ‰è®¸å¤šå†…å®¹éƒ½æ˜¯å–è‡ªäºå…¶ä¸­ï¼Œåªæ˜¯åŠ ä¸Šäº†è‡ªå·±çš„ç»éªŒç†è§£å’Œæˆªå›¾ã€‚</p>
<p>è¯ç”Ÿæœ¬æ–‡çš„çµæ„Ÿï¼Œæ˜¯ç”±äºæœ€è¿‘åœ¨å¸®ä¸€ä¸ªå°é¡¹ç›®ç¼–å†™æ–‡æ¡£ç«™çš„æ—¶å€™æŸ¥é˜…èµ„æ–™å­¦ä¹ ï¼Œç›®å‰æ–‡æ¡£ç«™ç¼–å†™äº†ç›®å½•è‡ªåŠ¨è¯†åˆ«ã€ä¸­è‹±æ–‡åˆ‡æ¢ã€å›åˆ°é¡¶éƒ¨ç­‰å¤šä¸ªåŠŸèƒ½ï¼Œæƒ³è¦è¿›ä¸€æ­¥å¼€å‘å¯ä»¥å‚è€ƒæœ¬é¡¹ç›®çš„ä»£ç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FWitty36%2FMaaLYSK" target="_blank" title="https://github.com/Witty36/MaaLYSK" ref="nofollow noopener noreferrer">MaaLYSK</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»ä»£ç çœ‹ LangChainï¼šå¤§æ¨¡å‹åº”ç”¨å¼€å‘çš„å·¥ç¨‹åŒ–å®è·µä¸ç¯å¢ƒå‡†å¤‡]]></title>    <link>https://juejin.cn/post/7587738151659028480</link>    <guid>https://juejin.cn/post/7587738151659028480</guid>    <pubDate>2025-12-26T07:39:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587738151659028480" data-draft-id="7587675443442991144" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»ä»£ç çœ‹ LangChainï¼šå¤§æ¨¡å‹åº”ç”¨å¼€å‘çš„å·¥ç¨‹åŒ–å®è·µä¸ç¯å¢ƒå‡†å¤‡"/> <meta itemprop="keywords" content="LangChain"/> <meta itemprop="datePublished" content="2025-12-26T07:39:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†»æ¢¨æ”¿å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/2373184444182659"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»ä»£ç çœ‹ LangChainï¼šå¤§æ¨¡å‹åº”ç”¨å¼€å‘çš„å·¥ç¨‹åŒ–å®è·µä¸ç¯å¢ƒå‡†å¤‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2373184444182659/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†»æ¢¨æ”¿å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T07:39:50.000Z" title="Fri Dec 26 2025 07:39:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»ä»£ç çœ‹ LangChainï¼šå¤§æ¨¡å‹åº”ç”¨å¼€å‘çš„å·¥ç¨‹åŒ–å®è·µä¸ç¯å¢ƒå‡†å¤‡</h2>
<p>LangChain ä½œä¸ºè¿æ¥å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä¸å®é™…ä¸šåŠ¡çš„æ¡¥æ¢ï¼Œå…¶æ ¸å¿ƒä»·å€¼åœ¨äºå°†å¤æ‚çš„ AI åº”ç”¨å¼€å‘æ‹†è§£ä¸ºå¯å¤ç”¨ã€å¯ç¼–æ’çš„æ¨¡å—åŒ–ç»„ä»¶ã€‚åœ¨å¼€å§‹ä½¿ç”¨å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå®Œæˆç¯å¢ƒæ­å»ºï¼Œä»¥ä¸‹å°†ç»“åˆä»£ç ç‰‡æ®µè¯¦ç»†è¯´æ˜ LangChain çš„ä½¿ç”¨æ–¹å¼åŠå®‰è£…æ­¥éª¤ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ç¯å¢ƒå‡†å¤‡ï¼šå®‰è£… LangChain åŠç›¸å…³ä¾èµ–</h3>
<p>ä½¿ç”¨ LangChain å¼€å‘å‰ï¼Œéœ€å…ˆå®‰è£…æ ¸å¿ƒåŒ…åŠå¯¹åº”æ¨¡å‹é€‚é…å™¨ï¼ˆä»¥ä»£ç ä¸­ç”¨åˆ°çš„ DeepSeek ä¸ºä¾‹ï¼‰ï¼ŒåŒæ—¶éœ€å®‰è£…<code>dotenv</code>å¤„ç†ç¯å¢ƒå˜é‡ï¼ˆä»£ç ä¸­é€šè¿‡<code>import 'dotenv/config'</code>åŠ è½½ API å¯†é’¥ç­‰é…ç½®ï¼‰ã€‚</p>
<p>å®‰è£…å‘½ä»¤ï¼ˆä½¿ç”¨ npmï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…LangChainæ ¸å¿ƒåŒ…ã€DeepSeeké€‚é…å™¨åŠç¯å¢ƒå˜é‡å·¥å…·</span>
npm install @langchain/core @langchain/deepseek dotenv
</code></pre>
<p>è‹¥ä½¿ç”¨ yarnï¼š</p>
<pre><code class="hljs language-sql" lang="sql">yarn <span class="hljs-keyword">add</span> <span class="hljs-variable">@langchain</span><span class="hljs-operator">/</span>core <span class="hljs-variable">@langchain</span><span class="hljs-operator">/</span>deepseek dotenv
</code></pre>
<p>å®‰è£…å®Œæˆåï¼Œéœ€åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º<code>.env</code>æ–‡ä»¶ï¼Œé…ç½® DeepSeek API å¯†é’¥ï¼ˆä»£ç ä¸­é€šè¿‡ç¯å¢ƒå˜é‡è‡ªåŠ¨åŠ è½½ï¼‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">DEEPSEEK_API_KEY</span>=your_deepseek_api_key_here
</code></pre>
<h3 data-id="heading-2">äºŒã€åŸºç¡€è°ƒç”¨ï¼šå¿«é€Ÿè¿æ¥å¤§æ¨¡å‹</h3>
<p>æœ€åŸºç¡€çš„ LLM åº”ç”¨å¼€å‘ï¼Œæ ¸å¿ƒæ˜¯å®ç°ä¸æ¨¡å‹çš„äº¤äº’ã€‚åœ¨<code>main.js</code>ä¸­ï¼ŒLangChain é€šè¿‡é€‚é…å™¨æ¨¡å¼å±è”½äº†ä¸åŒæ¨¡å‹çš„åº•å±‚å·®å¼‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// main.js æ ¸å¿ƒä»£ç </span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'dotenv/config'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatDeepSeek</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/deepseek'</span>;

<span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({
  <span class="hljs-attr">model</span>: <span class="hljs-string">'deepseek-reasoner'</span>,
  <span class="hljs-attr">temperature</span>: <span class="hljs-number">0</span> <span class="hljs-comment">// æ§åˆ¶è¾“å‡ºéšæœºæ€§ï¼Œ0è¡¨ç¤ºç¡®å®šæ€§è¾“å‡º</span>
});

<span class="hljs-comment">// ç›´æ¥è°ƒç”¨æ¨¡å‹</span>
<span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">'ç”¨ä¸€å¥è¯è§£é‡Šä»€ä¹ˆæ˜¯RAG?'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res.<span class="hljs-property">content</span>);
</code></pre>
<p>æ— éœ€å…³æ³¨ DeepSeek æ¨¡å‹çš„ API æ ¼å¼ã€è¯·æ±‚å¤´é…ç½®ç­‰ç»†èŠ‚ï¼Œä»…é€šè¿‡<code>ChatDeepSeek</code>ç±»å®ä¾‹åŒ–æ¨¡å‹ï¼Œè°ƒç”¨<code>invoke</code>æ–¹æ³•å³å¯å®Œæˆäº¤äº’ã€‚è¿™ç§å°è£…è®©å¼€å‘è€…èƒ½å¿«é€Ÿåˆ‡æ¢ä¸åŒæ¨¡å‹ï¼ˆå¦‚ä» DeepSeek åˆ° GPTï¼‰ï¼Œåªéœ€æ›¿æ¢é€‚é…å™¨ç±»ï¼Œå¤§å¹…é™ä½äº†å¤šæ¨¡å‹é›†æˆçš„æˆæœ¬ã€‚</p>
<h3 data-id="heading-3">ä¸‰ã€æç¤ºè¯æ¨¡æ¿ï¼šç»“æ„åŒ–ç®¡ç†åŠ¨æ€å†…å®¹</h3>
<p>æç¤ºè¯æ˜¯ LLM åº”ç”¨çš„ â€œè¾“å…¥å¤§è„‘â€ï¼Œä½†åŠ¨æ€å‚æ•°è°ƒæ•´ï¼ˆå¦‚è§’è‰²ã€å­—æ•°é™åˆ¶ï¼‰å¸¸è®©æç¤ºè¯ç»´æŠ¤å˜å¾—ç¹çã€‚<code>1.js</code>å±•ç¤ºäº† LangChain çš„<code>PromptTemplate</code>å¦‚ä½•è§£å†³è¿™ä¸€é—®é¢˜ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1.js æç¤ºè¯æ¨¡æ¿ç¤ºä¾‹</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'dotenv/config'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatDeepSeek</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/deepseek'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">PromptTemplate</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/prompts'</span>;

<span class="hljs-comment">// å®šä¹‰æ¨¡æ¿ç»“æ„</span>
<span class="hljs-keyword">const</span> prompt = <span class="hljs-title class_">PromptTemplate</span>.<span class="hljs-title function_">fromTemplate</span>(<span class="hljs-string">`
ä½ æ˜¯ä¸€ä¸ª{role}ã€‚
è¯·ç”¨ä¸è¶…è¿‡{limit}å­—å›ç­”ä»¥ä¸‹é—®é¢˜ï¼š
{question}
`</span>);

<span class="hljs-comment">// åŠ¨æ€å¡«å……å‚æ•°</span>
<span class="hljs-keyword">const</span> promptStr = <span class="hljs-keyword">await</span> prompt.<span class="hljs-title function_">format</span>({
  <span class="hljs-attr">role</span>: <span class="hljs-string">'å‰ç«¯é¢è¯•å®˜'</span>,
  <span class="hljs-attr">limit</span>: <span class="hljs-string">'50'</span>,
  <span class="hljs-attr">question</span>: <span class="hljs-string">'ä»€ä¹ˆæ˜¯é—­åŒ…'</span>
});

<span class="hljs-comment">// å®ä¾‹åŒ–æ¨¡å‹å¹¶è°ƒç”¨</span>
<span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({
  <span class="hljs-attr">model</span>: <span class="hljs-string">'deepseek-reasoner'</span>,
  <span class="hljs-attr">temperature</span>: <span class="hljs-number">0.7</span>
});
<span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>(promptStr);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res.<span class="hljs-property">content</span>);
</code></pre>
<p>é€šè¿‡æ¨¡æ¿å®šä¹‰å›ºå®šæ ¼å¼ï¼Œå†ç”¨<code>format</code>æ–¹æ³•æ³¨å…¥åŠ¨æ€å‚æ•°ï¼Œå®ç°äº† â€œæ¨¡æ¿ä¸æ•°æ®åˆ†ç¦»â€ã€‚è¿™ç§æ–¹å¼ä¸ä»…è®©æç¤ºè¯æ›´æ˜“å¤ç”¨ï¼ˆå¦‚åŒä¸€æ¨¡æ¿å¯åˆ‡æ¢<code>role</code>ä¸º â€œåç«¯é¢è¯•å®˜â€ï¼‰ï¼Œè¿˜ä¾¿äºç‰ˆæœ¬ç®¡ç†å’Œæµ‹è¯•ï¼Œç¬¦åˆåç«¯å¼€å‘ä¸­ â€œé…ç½®ä¸é€»è¾‘åˆ†ç¦»â€ çš„å·¥ç¨‹åŒ–æ€æƒ³ã€‚</p>
<h3 data-id="heading-4">å››ã€ç®€å•å·¥ä½œæµï¼šç”¨ Chain ä¸²è”ä»»åŠ¡èŠ‚ç‚¹</h3>
<p>å®é™…ä¸šåŠ¡ä¸­ï¼ŒAI ä»»åŠ¡å¾€å¾€éœ€è¦ â€œæç¤ºè¯å¤„ç†â†’æ¨¡å‹è°ƒç”¨â€ çš„å›ºå®šæµç¨‹ã€‚<code>2.js</code>å±•ç¤ºäº† LangChain çš„<code>pipe</code>æ–¹æ³•å¦‚ä½•å°†ç»„ä»¶ä¸²è”ä¸ºç®€å•å·¥ä½œæµï¼ˆChainï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 2.js ç®€å•Chainç¤ºä¾‹</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'dotenv/config'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatDeepSeek</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/deepseek'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">PromptTemplate</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/prompts'</span>

<span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({
  <span class="hljs-attr">model</span>: <span class="hljs-string">'deepseek-reasoner'</span>,
  <span class="hljs-attr">temperature</span>: <span class="hljs-number">0.7</span>
})

<span class="hljs-comment">// å®šä¹‰æç¤ºè¯æ¨¡æ¿</span>
<span class="hljs-keyword">const</span> prompt = <span class="hljs-title class_">PromptTemplate</span>.<span class="hljs-title function_">fromTemplate</span>(<span class="hljs-string">`
  ä½ æ˜¯ä¸€ä¸ªå‰ç«¯ä¸“å®¶ï¼Œç”¨ä¸€å¥è¯è§£é‡Š: {topic}  
`</span>);

<span class="hljs-comment">// ç”¨pipeè¿æ¥æ¨¡æ¿ä¸æ¨¡å‹ï¼Œå½¢æˆå·¥ä½œæµ</span>
<span class="hljs-keyword">const</span> chain = prompt.<span class="hljs-title function_">pipe</span>(model);

<span class="hljs-comment">// æ‰§è¡Œå·¥ä½œæµï¼ˆç›´æ¥ä¼ å…¥å‚æ•°å³å¯è§¦å‘å®Œæ•´æµç¨‹ï¼‰</span>
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">invoke</span>({ <span class="hljs-attr">topic</span>: <span class="hljs-string">'é—­åŒ…'</span> });
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(response.<span class="hljs-property">text</span>);
</code></pre>
<p><code>prompt.pipe(model)</code>çš„æœ¬è´¨æ˜¯å°† â€œæç¤ºè¯æ ¼å¼åŒ–â€ ä¸ â€œæ¨¡å‹è°ƒç”¨â€ ä¸¤ä¸ªæ­¥éª¤ä¸²è”ä¸ºä¸€ä¸ªå¯æ‰§è¡Œå•å…ƒã€‚å¼€å‘è€…æ— éœ€æ‰‹åŠ¨ç¼–å†™ â€œå…ˆæ ¼å¼åŒ–æç¤ºè¯ã€å†è°ƒç”¨æ¨¡å‹â€ çš„é‡å¤ä»£ç ï¼Œç›´æ¥é€šè¿‡<code>invoke</code>ä¼ å…¥å‚æ•°å³å¯è§¦å‘æ•´ä¸ªæµç¨‹ï¼Œç®€åŒ–äº†ä»£ç é€»è¾‘ã€‚</p>
<h3 data-id="heading-5">äº”ã€å¤æ‚å·¥ä½œæµï¼šå¤šæ­¥éª¤ä»»åŠ¡çš„ç¼–æ’</h3>
<p>å½“ä¸šåŠ¡éœ€è¦å¤šè½® AI äº¤äº’ï¼ˆå¦‚ â€œå…ˆè§£é‡Šæ¦‚å¿µâ†’å†æ€»ç»“è¦ç‚¹â€ï¼‰ï¼ŒLangChain çš„<code>RunnableSequence</code>å¯å®ç°å¤æ‚å·¥ä½œæµçš„ç¼–æ’ã€‚<code>3.js</code>å±•ç¤ºäº†è¿™ä¸€èƒ½åŠ›ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 3.js å¤šæ­¥éª¤å·¥ä½œæµç¤ºä¾‹</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'dotenv/config'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatDeepSeek</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/deepseek'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">PromptTemplate</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/prompts'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RunnableSequence</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/runnables'</span>;

<span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({
  <span class="hljs-attr">model</span>: <span class="hljs-string">'deepseek-reasoner'</span>,
  <span class="hljs-attr">temperature</span>: <span class="hljs-number">0.7</span>
})

<span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šå®šä¹‰â€œè§£é‡Šæ¦‚å¿µâ€çš„æ¨¡æ¿ä¸Chain</span>
<span class="hljs-keyword">const</span> explainPrompt = <span class="hljs-title class_">PromptTemplate</span>.<span class="hljs-title function_">fromTemplate</span>(<span class="hljs-string">`
  ä½ æ˜¯ä¸€ä¸ªå‰ç«¯ä¸“å®¶ï¼Œè¯·è¯¦ç»†ä»‹ç»ä»¥ä¸‹æ¦‚å¿µ: {topic}
  è¦æ±‚ï¼šè¦†ç›–å®šä¹‰ã€åŸç†ã€ä½¿ç”¨æ–¹å¼ï¼Œä¸è¶…è¿‡300å­—ã€‚
`</span>);
<span class="hljs-keyword">const</span> explainChain = explainPrompt.<span class="hljs-title function_">pipe</span>(model);

<span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šå®šä¹‰â€œæ€»ç»“è¦ç‚¹â€çš„æ¨¡æ¿ä¸Chain</span>
<span class="hljs-keyword">const</span> summaryPrompt = <span class="hljs-title class_">PromptTemplate</span>.<span class="hljs-title function_">fromTemplate</span>(<span class="hljs-string">`
  è¯·å°†ä»¥ä¸‹å‰ç«¯æ¦‚å¿µæ€»ç»“ä¸º3ä¸ªæ ¸å¿ƒè¦ç‚¹ (æ¯ç‚¹ä¸è¶…è¿‡20å­—):
  {explanation}
`</span>);
<span class="hljs-keyword">const</span> summaryChain = summaryPrompt.<span class="hljs-title function_">pipe</span>(model);

<span class="hljs-comment">// ä¸²è”ä¸ºå®Œæ•´å·¥ä½œæµ</span>
<span class="hljs-keyword">const</span> fullChain = <span class="hljs-title class_">RunnableSequence</span>.<span class="hljs-title function_">from</span>([
  <span class="hljs-function">(<span class="hljs-params">input</span>) =&gt;</span> explainChain.<span class="hljs-title function_">invoke</span>({ <span class="hljs-attr">topic</span>: input.<span class="hljs-property">topic</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-property">text</span>),
  <span class="hljs-function">(<span class="hljs-params">explanation</span>) =&gt;</span> summaryChain.<span class="hljs-title function_">invoke</span>({ explanation }).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-string">`çŸ¥è¯†ç‚¹: <span class="hljs-subst">${explanation}</span> æ€»ç»“: <span class="hljs-subst">${res.text}</span>`</span>)
]);

<span class="hljs-comment">// æ‰§è¡Œå®Œæ•´æµç¨‹</span>
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> fullChain.<span class="hljs-title function_">invoke</span>({ <span class="hljs-attr">topic</span>: <span class="hljs-string">'é—­åŒ…'</span> });
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(response);
</code></pre>
<p>é€šè¿‡<code>RunnableSequence.from</code>ï¼Œæˆ‘ä»¬å°† â€œè§£é‡Šæ¦‚å¿µâ€ å’Œ â€œæ€»ç»“è¦ç‚¹â€ ä¸¤ä¸ªæ­¥éª¤æŒ‰é¡ºåºä¸²è”ï¼šç¬¬ä¸€æ­¥æ¥æ”¶<code>topic</code>å‚æ•°ç”Ÿæˆè¯¦ç»†è§£é‡Šï¼Œç¬¬äºŒæ­¥å°†è§£é‡Šç»“æœä½œä¸ºè¾“å…¥ç”Ÿæˆæ€»ç»“ï¼Œæœ€ç»ˆè¿”å›æ•´åˆç»“æœã€‚è¿™ç§ç¼–æ’èƒ½åŠ›è®©å¤æ‚ AI ä»»åŠ¡ï¼ˆå¦‚æ™ºèƒ½åˆ†æã€å¤šè½®å¯¹è¯ï¼‰çš„å¼€å‘å˜å¾—ç›´è§‚å¯æ§ï¼Œæ— éœ€æ‰‹åŠ¨å¤„ç†æ­¥éª¤é—´çš„å‚æ•°ä¼ é€’ä¸å¼‚æ­¥é€»è¾‘ã€‚</p>
<h3 data-id="heading-6">æ€»ç»“</h3>
<p>é€šè¿‡å®‰è£…æŒ‡ä»¤ä¸ä»£ç ç¤ºä¾‹å¯ä»¥çœ‹å‡ºï¼ŒLangChain é€šè¿‡ â€œç¯å¢ƒé€‚é…â†’æ¨¡å‹å°è£…â†’æç¤ºè¯ç®¡ç†â†’å·¥ä½œæµç¼–æ’â€ çš„å…¨æµç¨‹æ”¯æŒï¼Œè®©å¤§æ¨¡å‹åº”ç”¨å¼€å‘ä» â€œé›¶æ•£è„šæœ¬â€ å‡çº§ä¸º â€œå·¥ç¨‹åŒ–å¼€å‘â€ã€‚å¼€å‘è€…åªéœ€å…³æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œå³å¯å¿«é€Ÿæ„å»ºçµæ´»ã€å¯æ‰©å±•çš„ AI åº”ç”¨ï¼Œå¤§å¹…é™ä½äº†å¤§æ¨¡å‹é›†æˆçš„æŠ€æœ¯é—¨æ§›ã€‚# ä»ä»£ç çœ‹ LangChainï¼šå¤§æ¨¡å‹åº”ç”¨å¼€å‘çš„å·¥ç¨‹åŒ–å®è·µä¸ç¯å¢ƒå‡†å¤‡</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¡ˆä¾‹+å›¾è§£å¸¦ä½ ä¸€æ–‡è¯»æ‡‚Svgã€Canvasã€Cssã€JsåŠ¨ç”»ğŸ”¥ğŸ”¥ï¼ˆ4k+å­—ï¼‰]]></title>    <link>https://juejin.cn/post/7587811143109509171</link>    <guid>https://juejin.cn/post/7587811143109509171</guid>    <pubDate>2025-12-26T07:43:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587811143109509171" data-draft-id="7587903505134878770" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¡ˆä¾‹+å›¾è§£å¸¦ä½ ä¸€æ–‡è¯»æ‡‚Svgã€Canvasã€Cssã€JsåŠ¨ç”»ğŸ”¥ğŸ”¥ï¼ˆ4k+å­—ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Canvas"/> <meta itemprop="datePublished" content="2025-12-26T07:43:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lsx_"/> <meta itemprop="url" content="https://juejin.cn/user/1442981392682829"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¡ˆä¾‹+å›¾è§£å¸¦ä½ ä¸€æ–‡è¯»æ‡‚Svgã€Canvasã€Cssã€JsåŠ¨ç”»ğŸ”¥ğŸ”¥ï¼ˆ4k+å­—ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1442981392682829/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lsx_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T07:43:15.000Z" title="Fri Dec 26 2025 07:43:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;color:#282d36}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px;color:#2f845e}.markdown-body h2{font-size:22px;display:inline-block;font-weight:700;background:#2f845e;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(47,132,194,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 32px);border-bottom:3px solid #2f845e}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%;box-shadow:6px 6px 6px #888}.markdown-body hr{border:none;border-top:1px solid rgba(66,185,131,.15);margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:16px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#262626;border:1px solid #2f845e;border-top:8px solid #2f845e;background:linear-gradient(180deg,rgba(66,185,131,.1),transparent)!important}.markdown-body pre&gt;code.hljs[lang]:before{top:8px!important;color:#2f845e!important}.markdown-body pre&gt;code.language-awesome_error{border:1px solid #ff4d4f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ff4d4f!important;background:#fff2f0!important}.markdown-body pre&gt;code.language-awesome_error:before{content:"!"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ff4d4f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_warn{border:1px solid #ffc46f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ffc46f!important;background:#fffbe6!important}.markdown-body pre&gt;code.language-awesome_warn:before{content:"â˜‚"!important;position:absolute;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ffc46f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_success{border:1px solid #52c41a!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#52c41a!important;background:#f6ffed!important}.markdown-body pre&gt;code.language-awesome_success:before{content:"âœ“"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#52c41a!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_info{border:1px solid #1890ff!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#1890ff!important;background:#e6f7ff!important}.markdown-body pre&gt;code.language-awesome_info:before{content:"i"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#1890ff!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body strong{background-color:inherit;color:#2f845e}.markdown-body em{background-color:inherit;color:#949415}.markdown-body a{text-decoration:none;color:#2f8e54;border-bottom:1px solid #3f9e64}.markdown-body a:active,.markdown-body a:hover{color:#3f9e64}.markdown-body a[class^=footnote]{margin-left:4px}.markdown-body a:before{content:"â¤ "}.markdown-body table{font-size:12px;width:100%;max-width:100%;overflow:auto;border:2px solid #2f8e54}.markdown-body thead{background:#2f8e54;color:#fff;text-align:left;font-weight:700}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:22px}.markdown-body td{min-width:120px}.markdown-body blockquote{padding:1px 22px;margin:22px 0;border-left:6px solid #2f845e;background-color:rgba(66,185,131,.1);border-radius:2px}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#2f845e}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px;color:#282d36}.markdown-body del{color:#2f845e}.markdown-body input[type=checkbox]:checked:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA/klEQVQ4T72TMU7DQBBF318XdFR06egQEnAXRINEGlqgowoIR8AF4AZOZ4JEGq5AC5EixBU4A55BNrEVHAcSBTHlaubt37/zxZKlcn7n6mDPXJvz8IJ89HzWu8t7C8D2dfsY52ae4apHnLx0ktsCsHXZjiUuFgG40x2eJ/H/AhztB+zDUTpLwWj8jGkzxSHiHaMPrDQC8sMoilKzLAUqiKQjmb+ZuAdW80tmelCHODoNgSfP7AFprTTaRTzsJN1GEyuIZ7uW6TEEHwCtyV/6EVBKJHhfzgC0Xv/iXwEFBF4FG0378bd7sPQq5xK/hSnk6sdlX3mZrKkwLZKBeu8n9XuWEUE7X+YAAAAASUVORK5CYII=);position:relative;top:-1px;left:-1px}.markdown-body .math .katex{font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}@media (max-width:720px){.markdown-body h1{font-size:22px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åŠ¨ç”»åœ¨å‰ç«¯å¼€å‘ä¸­æ‰®æ¼”ç€é‡è¦çš„è§’è‰²ã€‚å®ƒä¸ä»…å¯ä»¥æå‡ç”¨æˆ·ä½“éªŒï¼Œè¿˜å¯ä»¥ä½¿ç•Œé¢æ›´åŠ ç”ŸåŠ¨å’Œæœ‰è¶£ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨å‰ç«¯åŠ¨ç”»çš„å„ç§å®ç°æ–¹å¼ï¼ŒåŒ…æ‹¬ CSS åŠ¨ç”»ã€JavaScript åŠ¨ç”»ã€SVG åŠ¨ç”»ç­‰ã€‚æˆ‘ä»¬è¿˜å°†è®¨è®ºä¸€äº›è§¦å‘åŠ¨ç”»çš„æ–¹å¼å’ŒåŠ¨ç”»åœ¨ç”¨æˆ·ä½“éªŒä¸­çš„æœ€ä½³å®è·µã€‚</p>
<h2 data-id="heading-1">å‰ç«¯åŠ¨ç”»åˆ†ç±»</h2>
<ul>
<li>
<p><strong><code>CSS åŠ¨ç”»</code></strong></p>
<ul>
<li>
<p><strong>CSS Transition</strong><br/>
CSS è¿‡æ¸¡ï¼Œå±äº<strong>è¡¥é—´åŠ¨ç”»</strong>ï¼Œå³è®¾ç½®å…³é”®å¸§çš„åˆå§‹çŠ¶æ€ï¼Œç„¶ååœ¨å¦ä¸€ä¸ªå…³é”®å¸§æ”¹å˜è¿™ä¸ªçŠ¶æ€ï¼Œæ¯”å¦‚å¤§å°ã€é¢œè‰²ã€é€æ˜åº¦ç­‰ï¼Œæµè§ˆå™¨å°†è‡ªåŠ¨æ ¹æ®äºŒè€…ä¹‹é—´å¸§çš„å€¼åˆ›å»ºçš„åŠ¨ç”»ã€‚</p>
</li>
<li>
<p><strong>CSS Animation</strong><br/>
CSS åŠ¨ç”»ï¼Œå¯ä»¥ç†è§£æ˜¯ <code>CSS Transition</code> çš„åŠ å¼ºç‰ˆï¼Œå®ƒæ—¢å¯ä»¥å®ç° <strong>è¡¥é—´åŠ¨ç”»</strong> çš„åŠ¨ç”»æ•ˆæœï¼Œä¹Ÿå¯ä»¥ä½¿å…¶ä»¥ <strong>é€å¸§åŠ¨ç”»</strong> çš„æ–¹å¼è¿›è¡Œç»˜åˆ¶ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong><code>SVG åŠ¨ç”»</code></strong></p>
<ul>
<li>SVG åŠ¨ç”»ç”¨äºçŸ¢é‡å›¾å½¢ï¼Œæä¾›äº†é«˜è´¨é‡çš„åŠ¨ç”»æ•ˆæœï¼Œå¸¸ç”¨äºå›¾æ ‡å’Œå›¾å½¢åŠ¨ç”»ã€‚å¯ä»¥ä½¿ç”¨ SMIL åœ¨SVGä¸­å®šä¹‰åŠ¨ç”»ã€‚åŒæ ·çš„ä¹Ÿå¯ä»¥ä½¿ç”¨cssæˆ–è€…jsæ¥æ§åˆ¶svgåŠ¨ç”»ã€‚</li>
</ul>
</li>
<li>
<p><strong><code>Canvas åŠ¨ç”»</code></strong></p>
<ul>
<li>
<p>é€šè¿‡ç»“åˆä½¿ç”¨Â <code>requestAnimationFrame</code>ã€è·¯å¾„å’Œå˜æ¢ç­‰æŠ€æœ¯å¯¹ç”»å¸ƒçš„å…ƒç´ è¿›è¡Œæ“¦é™¤å’Œé‡æ–°ç»˜åˆ¶ï¼Œå¯ä»¥å®ç°å¤æ‚çš„åŠ¨ç”»æ•ˆæœã€‚å¦å¤–Canvasè¿˜å¯ä»¥ç”¨äºç»˜åˆ¶å¤æ‚çš„èƒŒæ™¯æˆ–é™æ€å†…å®¹ï¼Œä»è€Œå‡å°‘æ¯å¸§çš„ç»˜åˆ¶å·¥ä½œé‡ã€‚</p>
</li>
<li>
<p>å¯ä»¥å‚è€ƒæˆ‘çš„ä¸€ç¯‡å…³äºcanvasåˆ¶ä½œåŠ¨ç”»çš„æ–‡ç« ï¼š<a href="https://juejin.cn/post/7389211334641270793" target="_blank" title="https://juejin.cn/post/7389211334641270793">ç”¨Canvasç»˜åˆ¶ä¸€ä¸ªé«˜å¯é…ç½®çš„åœ†å½¢è¿›åº¦æ¡</a></p>
</li>
</ul>
</li>
<li>
<p><strong><code>JS åŠ¨ç”»</code></strong></p>
<ul>
<li>
<p><strong>setTimeout</strong> / <strong>setInterval</strong> / <strong>requestAnimationFrame</strong><br/>
<code>setTimeout</code> å’Œ <code>setInterval</code> è¿™ä¸¤ä¸ª API è®¾å®šçš„æ—¶é—´ä¼šå› ä¸ºæµè§ˆå™¨å½“å‰å·¥ä½œè´Ÿè½½è€Œæœ‰æ‰€åå·®ï¼Œè€Œä¸”æ— æ³•ä¸æµè§ˆå™¨çš„ç»˜åˆ¶å¸§ä¿æŒåŒæ­¥ã€‚æ‰€ä»¥æ‰æœ‰äº† <strong>ä¸æµè§ˆå™¨çš„ç»˜åˆ¶å¸§åŒæ­¥</strong> çš„åŸç”Ÿ API <code>requestAnimationFrame</code>ï¼Œä»¥å–ä»£ <code>setTimeout</code> å’Œ <code>setInterval</code> å®ç°åŠ¨ç”»ã€‚</p>
</li>
<li>
<p><strong>Web Animations API</strong><br/>
æµè§ˆå™¨åŠ¨ç”» APIï¼Œé€šè¿‡ JavaScript æ“ä½œã€‚è¿™äº› API è¢«è®¾è®¡æˆÂ <code>CSS Transition</code> å’Œ <code>CSS Animation</code> çš„æ¥å£ï¼Œå¾ˆå®¹æ˜“é€šè¿‡ JS çš„æ–¹å¼å®ç° CSS åŠ¨ç”»ï¼Œå®ƒæ˜¯å¯¹åŠ¨ç”»åŒ–çš„æ”¯æŒæœ€æœ‰æ•ˆçš„æ–¹å¼ä¹‹ä¸€ã€‚</p>
</li>
</ul>
</li>
</ul>
<h2 data-id="heading-2">css åŠ¨ç”»</h2>
<h3 data-id="heading-3">cssè¿‡æ¸¡åŠ¨ç”» <code>transition</code></h3>
<h4 data-id="heading-4">æ³¨æ„</h4>
<p>ç”±äºæµè§ˆå™¨æ˜¯æ ¹æ®æ ·å¼å·®å¼‚åŒ–çš„ä¸¤å¸§è‡ªåŠ¨è®¡ç®—å¹¶è¿‡æ¸¡ï¼Œæ‰€ä»¥Â <code>transition</code>Â åªæ”¯æŒå¯è¯†åˆ«ä¸­é—´å€¼çš„å±æ€§ (å¦‚å¤§å°ã€é¢œè‰²ã€ä½ç½®ã€é€æ˜åº¦ç­‰)ï¼Œè€Œå¦‚ display å±æ€§åˆ™ä¸æ”¯æŒã€‚</p>
<h4 data-id="heading-5">è¯­æ³•å®šä¹‰</h4>
<ul>
<li>
<p><code>transition-property</code>ï¼š æŒ‡å®šå“ªä¸ªæˆ–å“ªäº› CSS å±æ€§ç”¨äºè¿‡æ¸¡ã€‚åªæœ‰æŒ‡å®šçš„å±æ€§æ‰ä¼šåœ¨è¿‡æ¸¡ä¸­å‘ç”ŸåŠ¨ç”»ï¼Œå…¶ä»–å±æ€§ä»å¦‚é€šå¸¸é‚£æ ·ç¬é—´å˜åŒ–ã€‚</p>
</li>
<li>
<p><code>transition-duration</code>ï¼š æŒ‡å®šè¿‡æ¸¡çš„æ—¶é•¿ã€‚ä½ å¯ä»¥ä¸ºæ‰€æœ‰å±æ€§æŒ‡å®šä¸€ä¸ªå€¼ï¼Œæˆ–è€…æŒ‡å®šå¤šä¸ªå€¼ï¼Œæˆ–è€…ä¸ºæ¯ä¸ªå±æ€§æŒ‡å®šä¸åŒçš„æ—¶é•¿ã€‚</p>
</li>
<li>
<p><code>transition-timing-function</code>ï¼š æŒ‡å®šä¸€ä¸ªç¼“åŠ¨å‡½æ•°ï¼Œå®šä¹‰å±æ€§å€¼æ€ä¹ˆå˜åŒ–ã€‚å¸¸è§çš„ç¼“åŠ¨å‡½æ•°æ˜¯ä¸€ä¸ªä¸‰æ¬¡è´å¡å°”æ›²çº¿ ( <code>cubic-bezier(&lt;x1&gt;, &lt;y1&gt;, &lt;x2&gt;, &lt;y2&gt;)</code> )ã€‚å½“ç„¶ä¹Ÿå¯ä»¥é€‰æ‹©å…³é”®å­—</p>
<ul>
<li><strong>linear</strong>ï¼š<code>cubic-bezier(0.0, 0.0, 1.0, 1.0)</code></li>
<li><strong>ease</strong>ï¼š<code>cubic-bezier(0.25, 0.1, 0.25, 1.0)</code></li>
<li><strong>ease-in</strong>ï¼š<code>cubic-bezier(0.42, 0.0, 1.0, 1.0)</code></li>
<li><strong>ease-out</strong>ï¼š<code>cubic-bezier(0.0, 0.0, 0.58, 1.0)</code></li>
<li><strong>ease-in-out</strong>ï¼š<code>cubic-bezier(0.42, 0.0, 0.58, 1.0)</code></li>
</ul>
</li>
<li>
<p><code>transition-delay</code>ï¼š æŒ‡å®šå»¶è¿Ÿï¼Œå³å±æ€§å¼€å§‹å˜åŒ–æ—¶ä¸è¿‡æ¸¡å¼€å§‹å‘ç”Ÿæ—¶ä¹‹é—´çš„æ—¶é•¿ã€‚</p>
</li>
</ul>
<h4 data-id="heading-6">ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-css" lang="css">  <span class="hljs-comment">/* å•æ¡ ç®€å†™å½¢å¼ */</span>
  <span class="hljs-attribute">transition</span>: 
    &lt;property&gt; &lt;duration&gt; &lt;timing-function&gt; &lt;delay&gt;;
  
  
  <span class="hljs-comment">/* å¤šæ¡ ç®€å†™å½¢å¼ */</span>
  <span class="hljs-attribute">transition</span>: 
    &lt;property&gt; &lt;duration&gt; &lt;timing-function&gt; &lt;delay&gt;,
    &lt;property&gt; &lt;duration&gt; &lt;timing-function&gt; &lt;delay&gt;,
    ...;


  <span class="hljs-comment">/* å•æ¡ å­å±æ€§å½¢å¼ */</span>
  <span class="hljs-attribute">transition-property</span>: &lt;property-name&gt;;
  <span class="hljs-attribute">transition-duration</span>: &lt;duration-time&gt;;
  <span class="hljs-attribute">transition-timing-function</span>: &lt;timing-function&gt;;
  <span class="hljs-attribute">transition-delay</span>: &lt;duration-time&gt;;
  
  
  <span class="hljs-comment">/* å¤šæ¡ å­å±æ€§å½¢å¼ */</span>
  <span class="hljs-attribute">transition-property</span>: &lt;property-name&gt; [, &lt;property-name&gt;, ...];
  <span class="hljs-attribute">transition-duration</span>: &lt;duration-time&gt; [, &lt;duration-time&gt;, ...];
  <span class="hljs-attribute">transition-timing-function</span>: [, &lt;cubic-bezier&gt;, ...];
  <span class="hljs-attribute">transition-delay</span>: [, &lt;duration-time&gt;, ...];
  
  
  // å¦‚æœä»»æ„å±æ€§å€¼åˆ—è¡¨çš„é•¿åº¦æ¯”å…¶ä»–å±æ€§å€¼åˆ—è¡¨è¦çŸ­ï¼Œåˆ™å…¶ä¸­çš„å€¼ä¼šé‡å¤ä½¿ç”¨ä»¥ä¾¿åŒ¹é…
  
  // å¦‚æœæŸä¸ªå±æ€§çš„å€¼åˆ—è¡¨é•¿äºÂ `<span class="hljs-attribute">transition-property</span>`Â çš„å±æ€§ï¼Œåˆ™å°†è¢«æˆªçŸ­
  

</code></pre>
<h4 data-id="heading-7">cssè¿‡æ¸¡åŠ¨ç”» è§¦å‘æ–¹å¼</h4>
<h5 data-id="heading-8">1. ä¼ªç±»è§¦å‘ï¼ˆ:hoverã€:focusã€:activeç­‰ï¼‰</h5>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.button</span> {
  <span class="hljs-attribute">background-color</span>: blue;
  <span class="hljs-attribute">transition</span>: background-color <span class="hljs-number">0.3s</span> ease;
}

<span class="hljs-selector-class">.button</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">background-color</span>: red;
}

</code></pre>
<h5 data-id="heading-9">2. ç±»ååˆ‡æ¢ï¼ˆé€šè¿‡JSåŠ¨æ€åˆ‡æ¢ç±»åæ¥è§¦å‘è¿‡æ¸¡æ•ˆæœï¼‰</h5>
<pre><code class="hljs language-js" lang="js">&lt;button id=<span class="hljs-string">"toggleButton"</span>&gt;<span class="hljs-title class_">Toggle</span>&lt;/button&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"box"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
  <span class="hljs-selector-class">.box</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
    <span class="hljs-attribute">background-color</span>: blue;
    <span class="hljs-attribute">transition</span>: background-color <span class="hljs-number">0.3s</span> ease;
  }

  <span class="hljs-selector-class">.box</span><span class="hljs-selector-class">.active</span> {
    <span class="hljs-attribute">background-color</span>: red;
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'toggleButton'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'box'</span>).<span class="hljs-property">classList</span>.<span class="hljs-title function_">toggle</span>(<span class="hljs-string">'active'</span>);
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

</code></pre>
<h5 data-id="heading-10">3. å±æ€§å˜åŒ–</h5>
<pre><code class="hljs language-js" lang="js">&lt;button id=<span class="hljs-string">"toggleButton"</span>&gt;<span class="hljs-title class_">Toggle</span>&lt;/button&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"box"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
  <span class="hljs-selector-class">.box</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
    <span class="hljs-attribute">background-color</span>: blue;
    <span class="hljs-attribute">transition</span>: background-color <span class="hljs-number">0.3s</span> ease;
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'toggleButton'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> box = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'box'</span>);
    box.<span class="hljs-property">style</span>.<span class="hljs-property">backgroundColor</span> = box.<span class="hljs-property">style</span>.<span class="hljs-property">backgroundColor</span> === <span class="hljs-string">'red'</span> ? <span class="hljs-string">'blue'</span> : <span class="hljs-string">'red'</span>;
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

</code></pre>
<h5 data-id="heading-11">4. ä¼ªå…ƒç´ è§¦å‘ï¼ˆé€šè¿‡ä¼ªå…ƒç´ å¦‚<code>::before</code>ã€<code>::after</code>çš„çŠ¶æ€å˜åŒ–æ¥è§¦å‘è¿‡æ¸¡æ•ˆæœã€‚ï¼‰</h5>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">div</span> class="box"&gt;&lt;/<span class="hljs-selector-tag">div</span>&gt;

&lt;style&gt;
  <span class="hljs-selector-class">.box</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
    <span class="hljs-attribute">position</span>: relative;
  }

  <span class="hljs-selector-class">.box</span><span class="hljs-selector-pseudo">::before</span> {
    <span class="hljs-attribute">content</span>: <span class="hljs-string">''</span>;
    <span class="hljs-attribute">position</span>: absolute;
    <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">background-color</span>: blue;
    <span class="hljs-attribute">transition</span>: background-color <span class="hljs-number">0.3s</span> ease;
  }

  <span class="hljs-selector-class">.box</span><span class="hljs-selector-pseudo">:hover</span><span class="hljs-selector-pseudo">::before</span> {
    <span class="hljs-attribute">background-color</span>: red;
  }
&lt;/style&gt;

</code></pre>
<h3 data-id="heading-12">cssåŠ¨ç”» <code>animation</code></h3>
<h4 data-id="heading-13">æ³¨æ„</h4>
<p>CSS Animation å…·å¤‡äº†å¯¹ <strong>å…³é”®å¸§å’Œå¾ªç¯æ¬¡æ•°</strong> çš„è‡ªå®šä¹‰èƒ½åŠ›ã€‚CSS Animation åœ¨å®ç°åƒ CSS Transition <strong>è¡¥é—´åŠ¨ç”»</strong> æ•ˆæœæ—¶ï¼Œè¿˜å¯ä»¥åœ¨èµ·å§‹å¸§å’Œç»“æŸå¸§ä¹‹é—´è‡ªå®šä¹‰ä¸­é—´å¸§ï¼Œä½¿å¾—åŠ¨ç”»æ›´åŠ å¹³æ»‘è¿‡æ¸¡çš„åŒæ—¶ï¼Œå¯¹åŠ¨ç”»æœ‰äº†æ›´å¥½çš„æ§åˆ¶å’Œè‡ªå®šä¹‰èƒ½åŠ›ã€‚</p>
<h4 data-id="heading-14">è¯­æ³•å®šä¹‰</h4>
<p>å…ˆåˆ›å»ºä¸€ä¸ªå¸¦åç§°çš„Â <code>@keyframes</code>Â è§„åˆ™ï¼Œä»¥ä¾¿åç»­ä½¿ç”¨Â <code>animation-name</code>Â å±æ€§å°†åŠ¨ç”»åŒå…¶å…³é”®å¸§å£°æ˜è¿›è¡ŒåŒ¹é…ã€‚æ¯ä¸ªè§„åˆ™åŒ…å«å¤šä¸ªå…³é”®å¸§ï¼Œä¹Ÿå°±æ˜¯ä¸€æ®µæ ·å¼å—è¯­å¥ï¼Œæ¯ä¸ªå…³é”®å¸§æœ‰ä¸€ä¸ªç™¾åˆ†æ¯”å€¼ä½œä¸ºåç§°ï¼Œä»£è¡¨åœ¨åŠ¨ç”»è¿›è¡Œä¸­ï¼Œåœ¨å“ªä¸ªé˜¶æ®µè§¦å‘è¿™ä¸ªå¸§æ‰€åŒ…å«çš„æ ·å¼ã€‚</p>
<ul>
<li>
<p><code>animation-name</code>ï¼šæŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ª @keyframes çš„åç§°ï¼Œæè¿°äº†è¦åº”ç”¨äºå…ƒç´ çš„åŠ¨ç”»ã€‚å¤šä¸ª @keyframes ä»¥é€—å·åˆ†éš”ã€‚</p>
</li>
<li>
<p><code>animation-duration</code>ï¼šè®¾ç½®åŠ¨ç”»å®Œæˆä¸€ä¸ªåŠ¨ç”»å‘¨æœŸæ‰€éœ€çš„æ—¶é—´ï¼Œéœ€è¦æŒ‡å®šå•ä½ï¼Œå¦‚ <code>1s</code>ã€<code>500ms</code>ã€‚</p>
</li>
<li>
<p><code>animation-delay</code>ï¼šæŒ‡å®šæ‰§è¡ŒåŠ¨ç”»ä¹‹å‰çš„ç­‰å¾…æ—¶é—´ã€‚åŠ¨ç”»å¯ä»¥ç¨åå¼€å§‹ã€ç«‹å³ä»å¼€å¤´å¼€å§‹ã€ç«‹å³åœ¨åŠ¨ç”»ä¸­é€”æ’­æ”¾ <strong>(å¦‚ <code>-1s</code>)</strong> ã€‚å…¶ä¸­ <code>-1s</code> æ„æ€æ˜¯åŠ¨ç”»ç«‹å³ä» 1s å¤„å¼€å§‹ã€‚</p>
</li>
<li>
<p><code>animation-iteration-count</code>ï¼šè®¾ç½®åŠ¨ç”»åºåˆ—åœ¨åœæ­¢å‰åº”æ’­æ”¾çš„æ¬¡æ•°ï¼Œæœ‰æ•ˆå€¼ <code>0</code>ã€æ­£æ•´æ•°ã€æ­£å°æ•°ã€æ— é™å¾ªç¯ <code>infinite</code>ã€‚</p>
</li>
<li>
<p><code>animation-direction</code>ï¼šè®¾ç½®åŠ¨ç”»æ˜¯æ­£å‘æ’­æ”¾ <code>normal</code>ã€åå‘æ’­æ”¾ <code>reverse</code>ã€æ­£å‘äº¤æ›¿æ’­æ”¾ <code>alternate</code>ã€åå‘äº¤æ›¿æ’­æ”¾ <code>alternate-reverse</code>ã€‚</p>
</li>
<li>
<p><code>animation-play-state</code>ï¼šè®¾ç½®åŠ¨ç”»æ˜¯è¿è¡Œè¿˜æ˜¯æš‚åœï¼Œæœ‰æ•ˆå€¼ <code>running</code>ã€<code>paused</code>ã€‚</p>
</li>
<li>
<p><code>animation-fill-mode</code>ï¼šè®¾ç½® CSS åŠ¨ç”»åœ¨æ‰§è¡Œä¹‹å‰å’Œä¹‹åå¦‚ä½•å°†æ ·å¼åº”ç”¨äºå…¶ç›®æ ‡ï¼Œæœ‰æ•ˆå€¼å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>none</code>ï¼šå½“åŠ¨ç”»æœªæ‰§è¡Œæ—¶ï¼ŒåŠ¨ç”»å°†ä¸ä¼šå°†ä»»ä½•æ ·å¼åº”ç”¨äºç›®æ ‡ï¼Œè€Œæ˜¯å·²ç»èµ‹äºˆç»™è¯¥å…ƒç´ çš„ CSS è§„åˆ™æ¥æ˜¾ç¤ºè¯¥å…ƒç´ ã€‚è¿™æ˜¯é»˜è®¤å€¼</li>
<li><code>forwards</code>ï¼šç›®æ ‡å°†ä¿ç•™ç”±æ‰§è¡ŒæœŸé—´é‡åˆ°çš„æœ€åä¸€ä¸ªå…³é”®å¸§è®¡ç®—å€¼ã€‚</li>
<li><code>backwards</code>ï¼šåŠ¨ç”»å°†åœ¨åº”ç”¨äºç›®æ ‡æ—¶ç«‹å³åº”ç”¨ç¬¬ä¸€ä¸ªå…³é”®å¸§ä¸­å®šä¹‰çš„å€¼ã€‚
<code>animation-timing-function</code>ï¼šè®¾ç½®åŠ¨ç”»åœ¨æ¯ä¸ªå‘¨æœŸçš„æŒç»­æ—¶é—´å†…å¦‚ä½•è¿›è¡Œï¼Œä¸»è¦æ˜¯å¦‚ä¸‹ä¸¤ç§å‡½æ•°ï¼š</li>
</ul>
</li>
<li>
<p><code>cubic-bezier</code> ä¸‰æ¬¡è´å¡å°”æ›²çº¿ ( <code>cubic-bezier(&lt;x1&gt;, &lt;y1&gt;, &lt;x2&gt;, &lt;y2&gt;)</code> )ï¼Œä»¥å®ç° <strong>è¡¥é—´åŠ¨ç”»</strong> æ•ˆæœã€‚</p>
</li>
<li>
<p><code>steps</code> æ˜¯ä¸€ä¸ªåˆ†æ®µçš„é˜¶è·ƒå‡½æ•°ï¼Œï¼Œä»¥å®ç° <strong>é€å¸§åŠ¨ç”»</strong>ã€‚n ç›¸å½“äºå•æ¬¡åŠ¨ç”»çš„å¸§æ•°ï¼Œæ¯å¸§åŠ¨ç”»çš„æ—¶é—´æ˜¯å‡ç­‰çš„ (<code>steps(n, &lt;jumpterm&gt;)</code>)ï¼Œå…¶ä¸­ <code>jumpterm (é»˜è®¤å€¼ end)</code> å«ä¹‰å¦‚ä¸‹ï¼š</p>
<ol>
<li>jump-startï¼šåœ¨èµ·å§‹ä½ç½®é˜¶è·ƒï¼Œ<code>n=2 â‡’ 50% 100%; (100 / 2)</code></li>
<li>jump-endï¼šåœ¨ç»“æŸä½ç½®é˜¶è·ƒ, <code>n=4 â‡’ 0% 25% 50% 75%; (100 / 4)</code></li>
<li>jump-noneï¼šèµ·æ­¢ä½ç½®å‡æ— è·³è·ƒï¼Œ<code>n=5 â‡’ 0% 25% 50% 75% 100%; (100 / 4)</code></li>
<li>jump-bothï¼šèµ·æ­¢ä½ç½®å‡æœ‰è·³è·ƒ <code>n=3 â‡’ 25% 50% 75%; (100 / 4)</code></li>
<li>startï¼šç­‰åŒ jump-start</li>
<li>endï¼šç­‰åŒ jump-end</li>
<li>step-startï¼šç­‰åŒ steps(1, jump-start)</li>
<li>step-endï¼šç­‰åŒ steps(1, jump-end)</li>
</ol>
</li>
</ul>
<pre><code class="hljs language-css" lang="css">  <span class="hljs-comment">/* animation å£°æ˜æ ·å¼é¡ºåº */</span> 
  <span class="hljs-comment">/* animation-duration */</span>
  <span class="hljs-comment">/* animation-easing-function */</span>
  <span class="hljs-comment">/* animation-delay */</span> 
  <span class="hljs-comment">/* animation-iteration-count */</span>
  <span class="hljs-comment">/* animation-direction */</span>
  <span class="hljs-comment">/* animation-fill-mode */</span>
  <span class="hljs-comment">/* animation-play-state */</span>
  <span class="hljs-comment">/* animation-name */</span>
  <span class="hljs-attribute">animation</span>: <span class="hljs-number">3s</span> ease-in <span class="hljs-number">1s</span> <span class="hljs-number">2</span> reverse both paused slidein; 

  
  <span class="hljs-comment">/* animation - duration | easing-function | delay | name */</span>
  <span class="hljs-attribute">animation</span>: <span class="hljs-number">3s</span> linear <span class="hljs-number">1s</span> slidein;
  
  
  <span class="hljs-comment">/* more animations - duration | easing-function | delay | name */</span>
  <span class="hljs-attribute">animation</span>: <span class="hljs-number">3s</span> linear slidein, <span class="hljs-number">3s</span> ease-out <span class="hljs-number">5s</span> slideout;

 
  <span class="hljs-comment">/* animation-name */</span>
  <span class="hljs-attribute">animation-name</span>: none;
  <span class="hljs-attribute">animation-name</span>: animate1;
  <span class="hljs-attribute">animation-name</span>: animate1, animate2;
  
  
  <span class="hljs-comment">/* animation-timing-function */</span>
  <span class="hljs-attribute">animation-timing-function</span>: ease;
  <span class="hljs-attribute">animation-timing-function</span>: step-start;
  <span class="hljs-attribute">animation-timing-function</span>: <span class="hljs-built_in">cubic-bezier</span>(<span class="hljs-number">0.1</span>, <span class="hljs-number">0.7</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0.1</span>);
  <span class="hljs-attribute">animation-timing-function</span>: ease, step-start, <span class="hljs-built_in">cubic-bezier</span>(<span class="hljs-number">0.1</span>, <span class="hljs-number">0.7</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0.1</span>);
  

</code></pre>
<h4 data-id="heading-15">css animation åŠ¨ç”»è§¦å‘æ–¹å¼</h4>
<p>å’Œcss <code>transition</code> è§¦å‘åŠ¨ç”»æ–¹å¼ç›¸ä¼¼</p>
<p><strong>æ­¤å¤–è¿˜å¯ä»¥å¢åŠ ä¸€ä¸ªå›¾å±‚ï¼Œä¸“é—¨ç”¨äºåˆ¶ä½œåŠ¨ç”»æ•ˆæœã€‚</strong></p>
<p>ä¾‹å¦‚ï¼šé¼ æ ‡åœ¨ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œä¼šæœ‰æ¶Ÿæ¼ªåŠ¨ç”»ã€‚</p>
<pre><code class="hljs language-js" lang="js">
<span class="hljs-comment">// æ¶Ÿæ¼ªåŠ¨ç”»å®šä¹‰</span>
@keyframes ripple {
  <span class="hljs-number">0</span>% {
    <span class="hljs-attr">transform</span>: <span class="hljs-title function_">scale</span>(<span class="hljs-number">0</span>);
    <span class="hljs-attr">opacity</span>: <span class="hljs-number">1</span>;
  }

  to {
    <span class="hljs-attr">transform</span>: <span class="hljs-title function_">scale</span>(<span class="hljs-number">4</span>);
    <span class="hljs-attr">opacity</span>: <span class="hljs-number">0</span>;
  }
}

<span class="hljs-comment">// å›¾å±‚åŠ¨ç”» css</span>
.<span class="hljs-property">ripple</span> {
  <span class="hljs-attr">position</span>: absolute;
  border-<span class="hljs-attr">radius</span>: <span class="hljs-number">50</span>%;
  <span class="hljs-attr">background</span>: <span class="hljs-title function_">rgba</span>(<span class="hljs-number">8</span>, <span class="hljs-number">7</span>, <span class="hljs-number">7</span>, <span class="hljs-number">0.2</span>);
  pointer-<span class="hljs-attr">events</span>: none;

  <span class="hljs-attr">animation</span>: ripple <span class="hljs-number">0.</span>6s linear;
}

<span class="hljs-comment">// åˆ¶ä½œåŠ¨ç”»  è¿™æ ·æ¯æ¬¡ç‚¹å‡»æŒ‰é’® å°±ä¼šç”ŸæˆåŠ¨ç”»ï¼ŒåŠ¨ç”»ç»“æŸä¾¿é”€æ¯åŠ¨ç”»å…ƒç´ </span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">makeAnimate</span> = (<span class="hljs-params">e: React.MouseEvent</span>) =&gt; {
  <span class="hljs-keyword">const</span> dom = e.<span class="hljs-property">currentTarget</span>;
  <span class="hljs-keyword">const</span> rect = dom.<span class="hljs-title function_">getBoundingClientRect</span>();
  <span class="hljs-keyword">const</span> x = e.<span class="hljs-property">clientX</span> - rect.<span class="hljs-property">left</span>;
  <span class="hljs-keyword">const</span> y = e.<span class="hljs-property">clientY</span> - rect.<span class="hljs-property">top</span>;
  <span class="hljs-keyword">const</span> size = <span class="hljs-number">100</span>;

  <span class="hljs-keyword">const</span> ripple = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'span'</span>);
  ripple.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'ripple'</span>);
  ripple.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">`<span class="hljs-subst">${size}</span>px`</span>;
  ripple.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">`<span class="hljs-subst">${size}</span>px`</span>;
  ripple.<span class="hljs-property">style</span>.<span class="hljs-property">left</span> = <span class="hljs-string">`<span class="hljs-subst">${x - size / <span class="hljs-number">2</span>}</span>px`</span>;
  ripple.<span class="hljs-property">style</span>.<span class="hljs-property">top</span> = <span class="hljs-string">`<span class="hljs-subst">${y - size / <span class="hljs-number">2</span>}</span>px`</span>;
  dom.<span class="hljs-title function_">appendChild</span>(ripple);

  ripple.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'animationend'</span>, <span class="hljs-function">() =&gt;</span> {
    ripple.<span class="hljs-title function_">remove</span>();
  });
};


</code></pre>
<h2 data-id="heading-16">svg åŠ¨ç”»</h2>
<h3 data-id="heading-17">å¸¸ç”¨çš„ SMIL åŠ¨ç”»å…ƒç´ </h3>
<ul>
<li><code>&lt;animate&gt;</code>ï¼šç”¨äºåŠ¨ç”»åŒ–å•ä¸ªå±æ€§ã€‚</li>
<li><code>&lt;animateTransform&gt;</code>ï¼šç”¨äºåŠ¨ç”»åŒ–å˜æ¢å±æ€§ï¼Œå¦‚æ—‹è½¬ã€ç¼©æ”¾ã€å¹³ç§»ç­‰ã€‚</li>
<li><code>&lt;animateMotion&gt;</code>ï¼šç”¨äºæ²¿ç€è·¯å¾„åŠ¨ç”»åŒ–å…ƒç´ ã€‚ï¼ˆè·¯å¾„åŠ¨ç”»ï¼‰</li>
<li><code>&lt;set&gt;</code>ï¼šç”¨äºåœ¨æŒ‡å®šæ—¶é—´ç‚¹è®¾ç½®å±æ€§å€¼ã€‚</li>
</ul>
<pre><code class="hljs language-js" lang="js">&lt;svg width=<span class="hljs-string">"100"</span> height=<span class="hljs-string">"100"</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">circle</span> <span class="hljs-attr">cx</span>=<span class="hljs-string">"50"</span> <span class="hljs-attr">cy</span>=<span class="hljs-string">"50"</span> <span class="hljs-attr">r</span>=<span class="hljs-string">"40"</span> <span class="hljs-attr">fill</span>=<span class="hljs-string">"red"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">animate</span> <span class="hljs-attr">attributeName</span>=<span class="hljs-string">"cx"</span> <span class="hljs-attr">from</span>=<span class="hljs-string">"50"</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"150"</span> <span class="hljs-attr">dur</span>=<span class="hljs-string">"2s"</span> <span class="hljs-attr">repeatCount</span>=<span class="hljs-string">"indefinite"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">circle</span>&gt;</span></span>
&lt;/svg&gt;

</code></pre>
<h3 data-id="heading-18">svg æè¾¹åŠ¨ç”»</h3>
<p>SVGåŠ¨ç”»çš„è·¯å¾„å®ç°ä¸»è¦ä¾èµ–å±æ€§ï¼š<code>stroke</code>ï¼ˆæè¾¹ï¼‰å’ŒÂ <code>fill</code>ï¼ˆå¡«å……ï¼‰ã€‚</p>
<ul>
<li><strong>stroke</strong>ï¼šå®šä¹‰svgçš„è½®å»“çº¿ã€‚å¸¸ç”¨csså±æ€§æœ‰ï¼š <code>stroke-dasharray</code>ï¼ˆæè¾¹çš„æ ·å¼ï¼‰ï¼Œ<code>stroke-dashoffset</code>ï¼ˆèµ·å§‹ä½ç½®ï¼‰ï¼Œ<code>stroke-color</code>ï¼ˆæè¾¹çš„é¢œè‰²ï¼‰ï¼Œ<code>stroke-opacity</code>ï¼ˆæè¾¹çš„é€æ˜åº¦ï¼‰ï¼Œ<code>stroke-linecap</code>ï¼ˆæè¾¹ç«¯ç‚¹å½¢çŠ¶ï¼‰ç­‰ã€‚</li>
<li><strong>fill</strong>ï¼šå®šä¹‰svgå†…éƒ¨é¢œè‰²æˆ–å›¾æ¡ˆ ï¼Œå¸¸ç”¨csså±æ€§æœ‰<code>fill-opacity</code>(å®šä¹‰å¡«å……çš„é€æ˜åº¦), <code>fill-rule</code>(å®šä¹‰å¡«å……è§„åˆ™)ç­‰ã€‚</li>
</ul>
<h4 data-id="heading-19">stroke-dasharray ï¼ˆå®šä¹‰è™šçº¿çš„é•¿åº¦å’Œé—´éš”ï¼‰</h4>
<p>æä¾›ä¸€ä¸ªå¥‡æ•°æˆ–å¶æ•°æ•°åˆ—ï¼Œå…¶ä¸­æ•°ä¸æ•°ä¹‹é—´ç”¨é€—å·æˆ–ç©ºæ ¼éš”å¼€ï¼Œç”¨æ¥æŒ‡å®šçŸ­åˆ’çº¿å’Œç¼ºå£çš„é•¿åº¦ï¼Œå¹¶é‡å¤ã€‚ å¦‚æœæ˜¯<code>å¶æ•°æ•°åˆ—</code>ï¼Œåˆ™ä¸€ä¸ªè¡¨ç¤ºçŸ­çº¿é•¿åº¦ï¼Œä¸€ä¸ªè¡¨ç¤ºç¼ºå£é•¿åº¦ã€‚ å¦‚æœæ˜¯<code>å¥‡æ•°æ•°åˆ—</code>ï¼Œå°†å¥‡æ•°æ•°åˆ—å¤åˆ¶ä¸€ä¸ªå˜æˆå¶æ•°æ•°åˆ—ï¼Œç„¶åæŒ‰ç…§çŸ­çº¿ï¼Œç¼ºå£çš„é¡ºåºç»˜åˆ¶ã€‚</p>
<p>(å¶æ•°æ•°åˆ—) <code>stroke-dasharray="5, 5" x1="10" y1="10" x2="190" y2="10"</code>è¡¨ç¤ºä»åæ ‡ï¼ˆ10,10ï¼‰åˆ°(200,10)è¿™æ¡æ°´å¹³çº¿ä¸Šï¼ŒçŸ­åˆ’çº¿å’Œç¼ºå£éƒ½ä¸º5ä¸ªpx</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3298ea28b93c4d6b9a6693bbe89e2984~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339795&amp;x-signature=u0p86ISTMyua61kJghaqrnV%2F23Y%3D" alt="image.png" loading="lazy"/></p>
<p>ï¼ˆå¥‡æ•°æ•°åˆ—ï¼‰ <code>stroke-dasharray="20 10 5" x1="10" y1="10" x2="190" y2="10"</code>è¡¨ç¤ºä»åæ ‡ï¼ˆ10,10ï¼‰åˆ°(200,10)è¿™æ¡æ°´å¹³çº¿ä¸Šï¼ŒçŸ­åˆ’çº¿å’Œç¼ºå£æŒ‰ç…§20 10 5 20 10 5çš„é¡ºåºæ’åˆ—ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f644bfba2884206af13d69046a6c4b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339795&amp;x-signature=mGga%2Be5%2BvHL5XTFGp%2FJXaFN%2BJhY%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-20">stroke-dashoffset ï¼ˆå®šä¹‰è™šçº¿çš„èµ·å§‹ä½ç½®ï¼‰</h4>
<p>stroke-dashoffset å±æ€§ç”¨äºæŒ‡å®šè·¯å¾„å¼€å§‹çš„è·ç¦»(æ­£å€¼å‘å·¦åç§»ï¼Œè´Ÿå€¼å‘å³åç§»)</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b04bccdcff294be89efd61b13026531c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339795&amp;x-signature=JQOha66p%2BXZULeeSTsOPFCUBhDU%3D" alt="image.png" loading="lazy"/></p>
<p>æè¾¹åŠ¨ç”»ç¤ºä¾‹ï¼š</p>
<p><a href="https://code.juejin.cn/pen/7391734513644077082" target="_blank" title="https://code.juejin.cn/pen/7391734513644077082">code.juejin.cn/pen/7391734â€¦</a></p>
<h2 data-id="heading-21">js åŠ¨ç”»</h2>
<h3 data-id="heading-22">setTimeout / setInterval API</h3>
<p>è®¾å®šå®šæ—¶å™¨ï¼Œé€šè¿‡å‘¨æœŸæ€§çš„è§¦å‘é‡å¤æ‰§è¡Œç»˜åˆ¶åŠ¨ç”»çš„å‡½æ•°ï¼Œæ¥å®ç° â€œé€å¸§åŠ¨ç”»â€ çš„æ•ˆæœã€‚</p>
<ul>
<li>
<p>ä¼˜åŠ¿</p>
<ol>
<li>å…·æœ‰å¾ˆå¥½çš„æµè§ˆå™¨å…¼å®¹æ€§</li>
</ol>
</li>
<li>
<p>åŠ£åŠ¿</p>
<ol>
<li>åªèƒ½æ¥è¿‘è®¾å¤‡å±å¹•åˆ·æ–°ç‡ï¼Œæ— æ³•åšåˆ°å’Œæµè§ˆå™¨åŒæ­¥ï¼Œæ‰€ä»¥å¯èƒ½ä¼šå­˜åœ¨å¡é¡¿ã€ä¸¢å¸§ã€æŠ–åŠ¨çš„ç°è±¡</li>
<li>ç”±äºæµè§ˆå™¨å•çº¿ç¨‹æœºåˆ¶ï¼Œå­˜åœ¨é˜Ÿåˆ—ä¸­å›è°ƒå‡½æ•°è¢«é˜»å¡çš„å¯èƒ½ï¼Œæ‰€ä»¥æ— æ³•ä¿è¯æ¯ä¸€æ¬¡è°ƒç”¨çš„æ—¶é—´é—´éš”éƒ½ç›¸åŒï¼ŒæŸæ¬¡å›è°ƒå¯èƒ½ä¼šè¢«è·³è¿‡ï¼Œå¯¼è‡´è·³å¸§ã€‚</li>
</ol>
</li>
</ul>
<h3 data-id="heading-23">requestAnimationFrame API</h3>
<p>ä¸ºäº†å¼¥è¡¥ <code>setTimeout / setInterval</code> åœ¨åŠ¨ç”»æ–¹é¢çš„ä¸è¶³ï¼Œæµè§ˆå™¨æä¾›äº†ä¸ºåŠ¨ç”»è€Œç”Ÿçš„ APIï¼Œå®ƒå¯ä»¥è®© DOM åŠ¨ç”»ã€Canvas åŠ¨ç”»ã€ SVG åŠ¨ç”»ç­‰æœ‰ä¸€ä¸ªç»Ÿä¸€çš„åˆ·æ–°æœºåˆ¶ï¼Œéšç€æµè§ˆå™¨çš„å±å¹•åˆ·æ–°ï¼Œç»Ÿä¸€ç»˜åˆ¶åŠ¨ç”»å¸§ã€‚</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-keyword">let</span> id = <span class="hljs-literal">null</span>
  
  <span class="hljs-comment">// åŠ¨ç”»å‡½æ•°</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">draw</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">/* åŠ¨ç”»ç»˜åˆ¶... */</span>
  }
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">start</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">draw</span>()
    <span class="hljs-title function_">cancelAnimationFrame</span>(id)
    id = <span class="hljs-title function_">requestAnimationFrame</span>(start)
  }
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">stop</span> = (<span class="hljs-params"/>) =&gt; { <span class="hljs-title function_">cancelAnimationFrame</span>(id) }
  
</code></pre>
<ul>
<li>
<p>ä¼˜åŠ¿</p>
<ol>
<li>ç”±ç³»ç»Ÿæ¥å†³å®šå›è°ƒå‡½æ•°çš„æ‰§è¡Œæ—¶æœº, å®ƒèƒ½ä¿è¯å›è°ƒå‡½æ•°åœ¨å±å¹•æ¯ä¸€æ¬¡çš„åˆ·æ–°é—´éš”ä¸­åªè¢«æ‰§è¡Œä¸€æ¬¡, è¿™æ ·å°±ä¸ä¼šå¼•èµ·ä¸¢å¸§ç°è±¡, ä¹Ÿä¸ä¼šå¯¼è‡´åŠ¨ç”»å‡ºç°å¡é¡¿çš„é—®é¢˜ã€‚</li>
<li>åœ¨è¿è¡Œæ—¶æµè§ˆå™¨ä¼šè‡ªåŠ¨ä¼˜åŒ–æ–¹æ³•çš„è°ƒç”¨ï¼Œå¹¶ä¸”å¦‚æœé¡µé¢ä¸æ˜¯æ¿€æ´»çŠ¶æ€ä¸‹çš„è¯ï¼ŒåŠ¨ç”»ä¼šè‡ªåŠ¨æš‚åœï¼Œæœ‰æ•ˆèŠ‚çœäº†CPUçš„å¼€é”€ã€‚</li>
</ol>
</li>
<li>
<p>ä¸è¶³</p>
<ol>
<li>åŒ setTimeout/setInterval ä¸€æ ·ï¼Œå®ƒæ˜¯ä»¥é€å¸§åŠ¨ç”»çš„æ–¹å¼è¿›è¡Œç»˜åˆ¶ï¼Œæ— æ³•åšåˆ°åƒ CSS åŠ¨ç”»ï¼Œè®©æ¸¸è§ˆå™¨è‡ªåŠ¨æ ¹æ®ä¸¤å¸§ä¹‹é—´çš„å·®å¼‚åˆ›å»ºæ’å€¼ï¼Œä»¥å®ç°è¡¥é—´åŠ¨ç”»çš„è¿‡æ¸¡æ•ˆæœã€‚</li>
</ol>
</li>
</ul>
<h3 data-id="heading-24">Web Animations API</h3>
<ol>
<li><code>requestAnimationFrame</code>ã€<code>setTimeout/setInterval</code> éƒ½æ˜¯ä»¥é€å¸§ç»˜åˆ¶çš„æ–¹å¼å®ç°åŠ¨ç”»ï¼Œ è€Œ <strong>Animations API</strong> ä¸ä»…å¯ä»¥ â€œé€å¸§åŠ¨ç”»â€ï¼Œè¿˜å¯ä»¥å®ç° â€œè¡¥é—´åŠ¨ç”»â€ çš„æ•ˆæœã€‚</li>
<li>CSS åŠ¨ç”»æœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œéœ€è¦äº‹å…ˆé¢„è®¾åŠ¨ç”»æ ·å¼ï¼Œè€Œä¸”æ— æ³•ä¸ JS è¿›è¡Œäº¤äº’ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œ<strong>Animations API</strong> å¯ä»¥éšæ—¶å®šä¹‰å¹¶ä½¿ç”¨åŠ¨ç”»ï¼Œè‡ªç„¶æ˜¯æ›´åŠ çµæ´»æ–¹ä¾¿ã€‚</li>
</ol>
<p>å‚è€ƒæ–‡æ¡£ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FWeb_Animations_API" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Animations_API" ref="nofollow noopener noreferrer">developer.mozilla.org/zh-CN/docs/â€¦</a></p>
<p>è¯­æ³•ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"container"</span>);

  <span class="hljs-keyword">const</span> animation = element.<span class="hljs-title function_">animate</span>(
    [
      { <span class="hljs-attr">transform</span>: <span class="hljs-string">"translateY(0%)"</span> },
      { <span class="hljs-attr">transform</span>: <span class="hljs-string">"translateY(100%)"</span> },
    ],
    { <span class="hljs-attr">duration</span>: <span class="hljs-number">3000</span>, <span class="hljs-attr">fill</span>: <span class="hljs-string">"forwards"</span> }
  );
  

</code></pre>
<p>ä»£ç ç¤ºä¾‹ï¼š</p>
<p><a href="https://code.juejin.cn/pen/7391799461493932069" target="_blank" title="https://code.juejin.cn/pen/7391799461493932069">code.juejin.cn/pen/7391799â€¦</a></p>
<h4 data-id="heading-25">å…³äºFlipåŠ¨ç”»</h4>
<p>æµè§ˆå™¨è®¡ç®—ä½ç½®å¾ˆå¿«ï¼Œç»˜åˆ¶å¯èƒ½å¾ˆæ…¢ã€‚åˆ©ç”¨æµè§ˆå™¨å¼ºå¤§çš„è®¡ç®—èƒ½åŠ›ï¼Œè·å–åŠ¨ç”»çš„èµ·æ­¢çŠ¶æ€ï¼Œæ¥ç€å•ç‹¬å¼€å¯ä¸€ä¸ªçº¿ç¨‹åšåŠ¨ç”»ã€‚è¿™æ ·è§¦å‘å¸ƒå±€æ›´æ–°çš„æ“ä½œï¼Œåªä¼šå‘ç”Ÿåœ¨ä¸€å¸§æ—¶é—´å†…ï¼Œå‰©ä¸‹çš„åŠ¨ç”»è·‘åœ¨å•ç‹¬çš„çº¿ç¨‹ä¸Šï¼Œä¼šæ›´æµç•…ã€‚</p>
<p>ä»‹ç»ä¸‹FLIP ã€‚</p>
<ol>
<li>F ä»£è¡¨ Firstï¼Œä¹Ÿå°±æ˜¯åŠ¨ç”»çš„å¼€å§‹çŠ¶æ€ã€‚</li>
<li>L ä»£è¡¨ Lastï¼Œä»£è¡¨åŠ¨ç”»ç»“æŸçŠ¶æ€ã€‚</li>
<li>I ä»£è¡¨ Invertï¼Œä¹Ÿå°±æ˜¯çŠ¶æ€åè½¬ï¼Œä½¿ç”¨ transform ç­‰å±æ€§ï¼Œåˆ›å»ºå•ç‹¬çš„å›¾å±‚ï¼Œå¹¶å°†å…ƒç´ çŠ¶æ€åè½¬å›å»ã€‚</li>
<li>P ä»£è¡¨ Playï¼Œæ’­æ”¾åŠ¨ç”»ã€‚</li>
</ol>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<p>å…¶ä¸­ï¼Œåœ¨åˆå§‹å¸§ä¸­ï¼Œåº”ç”¨é€†å˜æ¢ï¼ˆ<code>translate</code>Â å’ŒÂ <code>scale</code>ï¼‰ï¼Œå°†å…ƒç´ ä»å…¶æœ€ç»ˆçŠ¶æ€é€†å˜æ¢åˆ°åˆå§‹çŠ¶æ€ã€‚</p>
<p>æœ€åä¸€å¸§Â <code>transform: "none"</code>Â çš„ä½œç”¨æ˜¯å°†å…ƒç´ çš„å˜æ¢å±æ€§é‡ç½®ä¸ºå…¶æœ€ç»ˆçŠ¶æ€ã€‚å…·ä½“æ¥è¯´ï¼Œ<code>transform: "none"</code>Â è¡¨ç¤ºä¸åº”ç”¨ä»»ä½•å˜æ¢ï¼Œè¿™æ„å‘³ç€å…ƒç´ å°†æ¢å¤åˆ°ç”± CSS è®¾ç½®çš„æœ€ç»ˆä½ç½®å’Œå¤§å°ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>FLIP Animation Example<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-id">#box</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#4caf50</span>;
      <span class="hljs-attribute">position</span>: absolute;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"box"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"animateButton"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin-top: 300px;"</span>&gt;</span>Animate<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">const</span> box = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'box'</span>);
    <span class="hljs-keyword">const</span> button = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'animateButton'</span>);

    button.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// First: è®°å½•åˆå§‹çŠ¶æ€</span>
      <span class="hljs-keyword">const</span> first = box.<span class="hljs-title function_">getBoundingClientRect</span>();

      <span class="hljs-comment">// ä¿®æ”¹å…ƒç´ çš„ä½ç½®</span>
      box.<span class="hljs-property">style</span>.<span class="hljs-property">top</span> = <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-number">300</span>}</span>px`</span>;
      box.<span class="hljs-property">style</span>.<span class="hljs-property">left</span> = <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-number">300</span>}</span>px`</span>;

      <span class="hljs-comment">// Last: è®°å½•æœ€ç»ˆçŠ¶æ€</span>
      <span class="hljs-keyword">const</span> last = box.<span class="hljs-title function_">getBoundingClientRect</span>();

      <span class="hljs-comment">// Invert: è®¡ç®—åˆå§‹çŠ¶æ€å’Œæœ€ç»ˆçŠ¶æ€ä¹‹é—´çš„å˜æ¢</span>
      <span class="hljs-keyword">const</span> deltaX = first.<span class="hljs-property">left</span> - last.<span class="hljs-property">left</span>;
      <span class="hljs-keyword">const</span> deltaY = first.<span class="hljs-property">top</span> - last.<span class="hljs-property">top</span>;
      <span class="hljs-keyword">const</span> deltaW = first.<span class="hljs-property">width</span> / last.<span class="hljs-property">width</span>;
      <span class="hljs-keyword">const</span> deltaH = first.<span class="hljs-property">height</span> / last.<span class="hljs-property">height</span>;


      <span class="hljs-comment">// åº”ç”¨ FLIP åŠ¨ç”»</span>
      box.<span class="hljs-title function_">animate</span>(
        [
          {
            <span class="hljs-attr">transformOrigin</span>: <span class="hljs-string">"top left"</span>,
            <span class="hljs-attr">transform</span>: <span class="hljs-string">`
            translate(<span class="hljs-subst">${deltaX}</span>px, <span class="hljs-subst">${deltaY}</span>px)
            scale(<span class="hljs-subst">${deltaW}</span>, <span class="hljs-subst">${deltaH}</span>)`</span>,
          },
          {
            <span class="hljs-attr">transformOrigin</span>: <span class="hljs-string">"top left"</span>,
            <span class="hljs-attr">transform</span>: <span class="hljs-string">"none"</span>,
          },
        ],
        {
          <span class="hljs-attr">duration</span>: <span class="hljs-number">300</span>,
          <span class="hljs-attr">easing</span>: <span class="hljs-string">"ease-in-out"</span>,
          <span class="hljs-attr">fill</span>: <span class="hljs-string">"both"</span>,
        }
      );
    });
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[09-ğŸ”æ•°æ®ç»“æ„ä¸ç®—æ³•æ ¸å¿ƒçŸ¥è¯† | äºŒå‰æœç´¢æ ‘ï¼šæœ‰åºæ•°æ®ç»“æ„ç†è®ºä¸å®è·µ]]></title>    <link>https://juejin.cn/post/7587785079738728454</link>    <guid>https://juejin.cn/post/7587785079738728454</guid>    <pubDate>2025-12-26T07:28:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587785079738728454" data-draft-id="7587785079738695686" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="09-ğŸ”æ•°æ®ç»“æ„ä¸ç®—æ³•æ ¸å¿ƒçŸ¥è¯† | äºŒå‰æœç´¢æ ‘ï¼šæœ‰åºæ•°æ®ç»“æ„ç†è®ºä¸å®è·µ"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2025-12-26T07:28:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ²¡æœ‰æ•…äº‹çš„ZhangåŒå­¦"/> <meta itemprop="url" content="https://juejin.cn/user/1574156381196600"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            09-ğŸ”æ•°æ®ç»“æ„ä¸ç®—æ³•æ ¸å¿ƒçŸ¥è¯† | äºŒå‰æœç´¢æ ‘ï¼šæœ‰åºæ•°æ®ç»“æ„ç†è®ºä¸å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1574156381196600/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ²¡æœ‰æ•…äº‹çš„ZhangåŒå­¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T07:28:10.000Z" title="Fri Dec 26 2025 07:28:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><pre><code class="hljs language-mermaid" lang="mermaid">mindmap
  root((äºŒå‰æœç´¢æ ‘ BST))
    ç†è®ºåŸºç¡€
      å®šä¹‰ä¸æ€§è´¨
        å·¦å°å³å¤§
        ä¸­åºæœ‰åº
        é€’å½’ç»“æ„
      æ ¸å¿ƒç‰¹æ€§
        æœ‰åºæ€§
        å”¯ä¸€æ€§
        åŠ¨æ€æ€§
    åŸºæœ¬æ“ä½œ
      searchæŸ¥æ‰¾
        Olog nå¹³å‡
        Onæœ€å
      insertæ’å…¥
        æ‰¾åˆ°ä½ç½®
        æ’å…¥èŠ‚ç‚¹
      deleteåˆ é™¤
        ä¸‰ç§æƒ…å†µ
        å‰é©±åç»§
    éå†æ–¹å¼
      ä¸­åºéå†
        æœ‰åºåºåˆ—
        å‡åºè¾“å‡º
      å‰åºååº
        æ ‘ç»“æ„
        è¡¨è¾¾å¼
    å¹³è¡¡é—®é¢˜
      ä¸å¹³è¡¡é£é™©
        é€€åŒ–ä¸ºé“¾è¡¨
        æ€§èƒ½ä¸‹é™
      è§£å†³æ–¹æ¡ˆ
        AVLæ ‘
        çº¢é»‘æ ‘
        Bæ ‘
    å·¥ä¸šå®è·µ
      Java TreeMap
        çº¢é»‘æ ‘å®ç°
        æœ‰åºæ˜ å°„
      æ•°æ®åº“ç´¢å¼•
        B+æ ‘åŸºç¡€
        èŒƒå›´æŸ¥è¯¢
      å•†å“ä»·æ ¼æŸ¥è¯¢
        åŒºé—´æœç´¢
        æ€§èƒ½ä¼˜åŒ–
</code></pre>
<h2 data-id="heading-0">ç›®å½•</h2>
<ul>
<li><a href="#%E4%B8%80%E5%89%8D%E8%A8%80" title="#%E4%B8%80%E5%89%8D%E8%A8%80">ä¸€ã€å‰è¨€</a></li>
<li><a href="#%E4%BA%8C%E6%A6%82%E8%BF%B0" title="#%E4%BA%8C%E6%A6%82%E8%BF%B0">äºŒã€æ¦‚è¿°</a></li>
<li><a href="#%E4%B8%89bst%E7%9A%84%E6%80%A7%E8%B4%A8" title="#%E4%B8%89bst%E7%9A%84%E6%80%A7%E8%B4%A8">ä¸‰ã€BSTçš„æ€§è´¨</a></li>
<li><a href="#%E5%9B%9Bbst%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C" title="#%E5%9B%9Bbst%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C">å››ã€BSTçš„åŸºæœ¬æ“ä½œ</a></li>
<li><a href="#%E4%BA%94bst%E7%9A%84%E5%AE%9E%E7%8E%B0" title="#%E4%BA%94bst%E7%9A%84%E5%AE%9E%E7%8E%B0">äº”ã€BSTçš„å®ç°</a></li>
<li><a href="#%E5%85%AD%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90" title="#%E5%85%AD%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90">å…­ã€æ—¶é—´å¤æ‚åº¦åˆ†æ</a></li>
<li><a href="#%E4%B8%83%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" title="#%E4%B8%83%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">ä¸ƒã€åº”ç”¨åœºæ™¯</a></li>
<li><a href="#%E5%85%AB%E5%B7%A5%E4%B8%9A%E7%95%8C%E5%AE%9E%E8%B7%B5%E6%A1%88%E4%BE%8B" title="#%E5%85%AB%E5%B7%A5%E4%B8%9A%E7%95%8C%E5%AE%9E%E8%B7%B5%E6%A1%88%E4%BE%8B">å…«ã€å·¥ä¸šç•Œå®è·µæ¡ˆä¾‹</a></li>
<li><a href="#%E4%B9%9Dbst%E7%9A%84%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88" title="#%E4%B9%9Dbst%E7%9A%84%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">ä¹ã€BSTçš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</a></li>
<li><a href="#%E5%8D%81%E6%80%BB%E7%BB%93" title="#%E5%8D%81%E6%80%BB%E7%BB%93">åã€æ€»ç»“</a></li>
</ul>
<h2 data-id="heading-1">ä¸€ã€å‰è¨€</h2>
<h3 data-id="heading-2">1. ç ”ç©¶èƒŒæ™¯</h3>
<p>äºŒå‰æœç´¢æ ‘ï¼ˆBinary Search Tree, BSTï¼‰æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­æœ€é‡è¦çš„æ•°æ®ç»“æ„ä¹‹ä¸€ï¼Œç”±P.F. Windleyã€A.D. Boothã€A.J.T. Colinå’ŒT.N. Hibbardåœ¨1960å¹´ç‹¬ç«‹æå‡ºã€‚BSTç»“åˆäº†äºŒå‰æ ‘çš„å±‚æ¬¡ç»“æ„å’Œæœ‰åºæ€§ï¼Œå®ç°äº†é«˜æ•ˆçš„æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ“ä½œã€‚</p>
<p>æ ¹æ®ACMçš„ç ”ç©¶ï¼ŒBSTåŠå…¶å˜ä½“ï¼ˆAVLæ ‘ã€çº¢é»‘æ ‘ã€Bæ ‘ï¼‰åœ¨æ•°æ®åº“ç´¢å¼•ã€æœ‰åºé›†åˆã€ç¬¦å·è¡¨ç­‰é¢†åŸŸå æ®ä¸»å¯¼åœ°ä½ã€‚Javaçš„TreeMapã€C++çš„std::mapã€MySQLçš„B+æ ‘ç´¢å¼•éƒ½åŸºäºBSTçš„æ€æƒ³ã€‚</p>
<h3 data-id="heading-3">2. å†å²å‘å±•</h3>
<ul>
<li><strong>1960å¹´</strong>ï¼šBSTæ¦‚å¿µæå‡º</li>
<li><strong>1962å¹´</strong>ï¼šAVLæ ‘ï¼ˆè‡ªå¹³è¡¡BSTï¼‰å‡ºç°</li>
<li><strong>1972å¹´</strong>ï¼šçº¢é»‘æ ‘æå‡º</li>
<li><strong>1970s</strong>ï¼šBæ ‘åœ¨æ•°æ®åº“ç³»ç»Ÿä¸­åº”ç”¨</li>
<li><strong>1990sè‡³ä»Š</strong>ï¼šå„ç§å¹³è¡¡BSTå˜ä½“å’Œä¼˜åŒ–</li>
</ul>
<h2 data-id="heading-4">äºŒã€æ¦‚è¿°</h2>
<h3 data-id="heading-5">1. å®šä¹‰ä¸æ ¸å¿ƒæ€§è´¨</h3>
<p>äºŒå‰æœç´¢æ ‘ï¼ˆBinary Search Treeï¼ŒBSTï¼‰æ˜¯äºŒå‰æ ‘çš„å­é›†ï¼Œæ»¡è¶³ä»¥ä¸‹æ€§è´¨ï¼š</p>
<p><strong>æ ¸å¿ƒæ€§è´¨</strong>ï¼ˆæ ¹æ®CLRSå®šä¹‰ï¼‰ï¼š</p>
<ol>
<li><strong>å·¦å­æ ‘æ€§è´¨</strong>ï¼šå·¦å­æ ‘æ‰€æœ‰å…ƒç´  &lt; å½“å‰èŠ‚ç‚¹å…ƒç´ </li>
<li><strong>å³å­æ ‘æ€§è´¨</strong>ï¼šå³å­æ ‘æ‰€æœ‰å…ƒç´  &gt; å½“å‰èŠ‚ç‚¹å…ƒç´ </li>
<li><strong>é€’å½’æ€§è´¨</strong>ï¼šå·¦å³å­æ ‘ä¹Ÿéƒ½æ˜¯äºŒå‰æœç´¢æ ‘</li>
<li><strong>å¯æ¯”è¾ƒæ€§</strong>ï¼šå…ƒç´ å¯æ¯”è¾ƒï¼ˆå¦‚intã€Stringï¼Œè‡ªå®šä¹‰ç±»å‹éœ€å®ç°<code>Comparable</code>ï¼‰</li>
</ol>
<p><strong>å½¢å¼åŒ–å®šä¹‰</strong>ï¼ˆæ ¹æ®CLRSå®šä¹‰ï¼‰ï¼š</p>
<p>å¯¹äºBSTä¸­çš„ä»»æ„èŠ‚ç‚¹xï¼š</p>
<ul>
<li>å¦‚æœyæ˜¯xå·¦å­æ ‘ä¸­çš„èŠ‚ç‚¹ï¼Œåˆ™<code>y.key â‰¤ x.key</code></li>
<li>å¦‚æœyæ˜¯xå³å­æ ‘ä¸­çš„èŠ‚ç‚¹ï¼Œåˆ™<code>y.key â‰¥ x.key</code></li>
</ul>
<p><strong>æ•°å­¦è¡¨è¿°</strong>ï¼š</p>
<p>è®¾BST Tï¼Œå¯¹äºæ ‘ä¸­çš„ä»»æ„èŠ‚ç‚¹vï¼š</p>
<ul>
<li>å¦‚æœ<code>left_subtree(v) â‰  âˆ…</code>ï¼Œåˆ™å¯¹äºæ‰€æœ‰<code>u âˆˆ left_subtree(v)</code>ï¼š<code>u.key â‰¤ v.key</code></li>
<li>å¦‚æœ<code>right_subtree(v) â‰  âˆ…</code>ï¼Œåˆ™å¯¹äºæ‰€æœ‰<code>u âˆˆ right_subtree(v)</code>ï¼š<code>u.key â‰¥ v.key</code></li>
</ul>
<p><strong>BSTä¸å˜æ€§ï¼ˆInvariantï¼‰</strong>ï¼š</p>
<p>å¯¹äºBSTä¸­çš„ä»»æ„èŠ‚ç‚¹vï¼Œå§‹ç»ˆæ»¡è¶³ï¼š</p>
<ul>
<li>å·¦å­æ ‘æ‰€æœ‰èŠ‚ç‚¹çš„å…³é”®å­— â‰¤ v.key</li>
<li>å³å­æ ‘æ‰€æœ‰èŠ‚ç‚¹çš„å…³é”®å­— â‰¥ v.key</li>
<li>è¿™ä¸ªæ€§è´¨åœ¨æ’å…¥å’Œåˆ é™¤æ“ä½œåå¿…é¡»ä¿æŒ</li>
</ul>
<p><strong>å­¦æœ¯å‚è€ƒ</strong>ï¼š</p>
<ul>
<li>CLRS Chapter 12: Binary Search Trees</li>
<li>Knuth, D. E. (1997). <em>The Art of Computer Programming, Volume 3</em>. Section 6.2.2: Binary Tree Searching</li>
<li>Weiss, M. A. (2011). <em>Data Structures and Algorithm Analysis in Java</em>. Chapter 4: Trees</li>
<li>Knuth, D. E. (1997). <em>The Art of Computer Programming, Volume 3</em>. Section 6.2.2: Binary Tree Searching</li>
</ul>
<h3 data-id="heading-6">2. BSTçš„ç¤ºæ„å›¾</h3>
<pre><code class="hljs language-erlang" lang="erlang">ç¤ºä¾‹BST:
        <span class="hljs-number">8</span>
       / \
      <span class="hljs-number">3</span>   <span class="hljs-number">10</span>
     / \    \
    <span class="hljs-number">1</span>   <span class="hljs-number">6</span>    <span class="hljs-number">14</span>
       / \  /
      <span class="hljs-number">4</span>  <span class="hljs-number">7</span> <span class="hljs-number">13</span>

æ€§è´¨éªŒè¯:
- èŠ‚ç‚¹8: å·¦å­æ ‘<span class="hljs-params">(<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">6</span>,<span class="hljs-number">4</span>,<span class="hljs-number">7</span>)</span> &lt; 8 &lt; å³å­æ ‘<span class="hljs-params">(<span class="hljs-number">10</span>,<span class="hljs-number">14</span>,<span class="hljs-number">13</span>)</span> âœ“
- èŠ‚ç‚¹3: å·¦å­æ ‘<span class="hljs-params">(<span class="hljs-number">1</span>)</span> &lt; 3 &lt; å³å­æ ‘<span class="hljs-params">(<span class="hljs-number">6</span>,<span class="hljs-number">4</span>,<span class="hljs-number">7</span>)</span> âœ“
- èŠ‚ç‚¹6: å·¦å­æ ‘<span class="hljs-params">(<span class="hljs-number">4</span>)</span> &lt; 6 &lt; å³å­æ ‘<span class="hljs-params">(<span class="hljs-number">7</span>)</span> âœ“

ä¸­åºéå†ç»“æœï¼š1, 3, 4, 6, 7, 8, 10, 13, 14ï¼ˆå‡åºï¼‰âœ“
</code></pre>
<h3 data-id="heading-7">3. BSTçš„æ ¸å¿ƒç‰¹æ€§</h3>
<ol>
<li><strong>æœ‰åºæ€§</strong>ï¼šä¸­åºéå†BSTå¾—åˆ°æœ‰åºåºåˆ—ï¼ˆå‡åºæˆ–é™åºï¼‰</li>
<li><strong>å”¯ä¸€æ€§</strong>ï¼šé€šå¸¸ä¸å…è®¸é‡å¤å€¼ï¼ˆæˆ–å¯å®šä¹‰å¤„ç†è§„åˆ™ï¼Œå¦‚è¦†ç›–æˆ–è®¡æ•°ï¼‰</li>
<li><strong>é€’å½’ç»“æ„</strong>ï¼šå·¦å³å­æ ‘éƒ½æ˜¯BST</li>
<li><strong>åŠ¨æ€æ€§</strong>ï¼šæ”¯æŒé«˜æ•ˆçš„åŠ¨æ€æ’å…¥å’Œåˆ é™¤æ“ä½œ</li>
</ol>
<h2 data-id="heading-8">ä¸‰ã€BSTçš„æ€§è´¨</h2>
<ol>
<li><strong>æœ‰åºæ€§</strong>ï¼šä¸­åºéå†BSTå¾—åˆ°æœ‰åºåºåˆ—</li>
<li><strong>å”¯ä¸€æ€§</strong>ï¼šé€šå¸¸ä¸å…è®¸é‡å¤å€¼ï¼ˆæˆ–å¯å®šä¹‰å¤„ç†è§„åˆ™ï¼‰</li>
<li><strong>é€’å½’ç»“æ„</strong>ï¼šå·¦å³å­æ ‘éƒ½æ˜¯BST</li>
</ol>
<h3 data-id="heading-9">ä¸­åºéå†ç»“æœ</h3>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ç¤ºä¾‹BST:</span>
        8
       / \
      3   10
     / \    \
    1   6    14

<span class="hljs-section">ä¸­åºéå†: 1, 3, 4, 6, 7, 8, 10, 13, 14 ï¼ˆæœ‰åºï¼‰</span>
</code></pre>
<h2 data-id="heading-10">å››ã€BSTçš„æ ¸å¿ƒæ“ä½œ</h2>
<h3 data-id="heading-11">1. æ·»åŠ å…ƒç´ </h3>
<p><strong>ç®—æ³•æ€è·¯</strong>ï¼š</p>
<ol>
<li>ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œæ¯”è¾ƒå…ƒç´ å€¼</li>
<li>å¦‚æœå°äºå½“å‰èŠ‚ç‚¹ï¼Œè¿›å…¥å·¦å­æ ‘</li>
<li>å¦‚æœå¤§äºå½“å‰èŠ‚ç‚¹ï¼Œè¿›å…¥å³å­æ ‘</li>
<li>å¦‚æœç­‰äºå½“å‰èŠ‚ç‚¹ï¼Œè¦†ç›–æ—§å€¼ï¼ˆå»é‡ï¼‰</li>
<li>æ‰¾åˆ°ç©ºä½ç½®åï¼Œåˆ›å»ºæ–°èŠ‚ç‚¹å¹¶æ’å…¥</li>
</ol>
<p><strong>ä»£ç å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æ·»åŠ å…ƒç´ åˆ°BST
 * 
 * æ—¶é—´å¤æ‚åº¦ï¼šO(h)ï¼Œhä¸ºæ ‘é«˜åº¦ï¼ˆå¹³å‡O(log n)ï¼Œæœ€åO(n)ï¼‰
 * ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼ˆè¿­ä»£å®ç°ï¼‰æˆ–O(h)ï¼ˆé€’å½’å®ç°ï¼‰
 * 
 * å­¦æœ¯å‚è€ƒï¼šCLRS Chapter 12.3: Insertion and deletion
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(E element)</span> {
    <span class="hljs-comment">// ç©ºå€¼æ£€æŸ¥</span>
    elementNotNullCheck(element);
    
    <span class="hljs-comment">// ç©ºæ ‘ï¼šæ–°å»ºæ ¹èŠ‚ç‚¹</span>
    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">null</span>) {
        root = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>&lt;&gt;(element, <span class="hljs-literal">null</span>);
        size++;
        <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-comment">// æ‰¾åˆ°æ’å…¥ä½ç½®</span>
    Node&lt;E&gt; cur = root;
    Node&lt;E&gt; parent = <span class="hljs-literal">null</span>;
    <span class="hljs-type">int</span> <span class="hljs-variable">cmp</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">while</span> (cur != <span class="hljs-literal">null</span>) {
        cmp = compare(element, cur.element);
        parent = cur;
        
        <span class="hljs-keyword">if</span> (cmp &lt; <span class="hljs-number">0</span>) {
            cur = cur.left;  <span class="hljs-comment">// è¿›å…¥å·¦å­æ ‘</span>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cmp &gt; <span class="hljs-number">0</span>) {
            cur = cur.right; <span class="hljs-comment">// è¿›å…¥å³å­æ ‘</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// å…ƒç´ å·²å­˜åœ¨ï¼Œè¦†ç›–æ—§å€¼ï¼ˆå»é‡ï¼‰</span>
            cur.element = element;
            <span class="hljs-keyword">return</span>;
        }
    }
    
    <span class="hljs-comment">// åˆ›å»ºæ–°èŠ‚ç‚¹å¹¶æŒ‚è½½åˆ°çˆ¶èŠ‚ç‚¹</span>
    Node&lt;E&gt; newNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>&lt;&gt;(element, parent);
    
    <span class="hljs-keyword">if</span> (cmp &lt; <span class="hljs-number">0</span>) {
        parent.left = newNode;
    } <span class="hljs-keyword">else</span> {
        parent.right = newNode;
    }
    
    size++;
}

<span class="hljs-comment">/**
 * æ¯”è¾ƒå™¨ï¼ˆæ”¯æŒè‡ªå®šä¹‰æ¯”è¾ƒé€»è¾‘ï¼‰
 * 
 * <span class="hljs-doctag">@param</span> e1 å…ƒç´ 1
 * <span class="hljs-doctag">@param</span> e2 å…ƒç´ 2
 * <span class="hljs-doctag">@return</span> è´Ÿæ•°è¡¨ç¤ºe1 &lt; e2ï¼Œ0è¡¨ç¤ºç›¸ç­‰ï¼Œæ­£æ•°è¡¨ç¤ºe1 &gt; e2
 */</span>
<span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(E e1, E e2)</span> {
    <span class="hljs-keyword">if</span> (comparator != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> comparator.compare(e1, e2);
    }
    <span class="hljs-keyword">return</span> ((Comparable&lt;E&gt;) e1).compareTo(e2);
}
</code></pre>
<p><strong>æ’å…¥è¿‡ç¨‹ç¤ºä¾‹</strong>ï¼ˆæ’å…¥å…ƒç´ 5ï¼‰ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">åˆå§‹BST:</span>
        8
       / \
      3   10
     / \
    1   6

<span class="hljs-section">æ’å…¥5:</span>
<span class="hljs-section">æ­¥éª¤1: 5 &lt; 8ï¼Œè¿›å…¥å·¦å­æ ‘</span>
<span class="hljs-section">æ­¥éª¤2: 5 &gt; 3ï¼Œè¿›å…¥å³å­æ ‘</span>
<span class="hljs-section">æ­¥éª¤3: 5 &lt; 6ï¼Œè¿›å…¥å·¦å­æ ‘ï¼ˆç©ºä½ç½®ï¼‰</span>
<span class="hljs-section">æ­¥éª¤4: åˆ›å»ºèŠ‚ç‚¹5ï¼ŒæŒ‚è½½åˆ°èŠ‚ç‚¹6çš„å·¦å­æ ‘</span>

<span class="hljs-section">ç»“æœ:</span>
        8
       / \
      3   10
     / \
    1   6
       /
      5
</code></pre>
<p><strong>ä¼ªä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">ALGORITHM <span class="hljs-built_in">BSTInsert</span>(root, element)
    <span class="hljs-comment">// è¾“å…¥ï¼šBSTæ ¹èŠ‚ç‚¹rootï¼Œè¦æ’å…¥çš„å…ƒç´ element</span>
    <span class="hljs-comment">// è¾“å‡ºï¼šæ›´æ–°åçš„BST</span>
    
    IF root = NULL THEN
        root â† <span class="hljs-built_in">NewNode</span>(element, NULL)
        RETURN
    
    cur â† root
    parent â† NULL
    
    WHILE cur â‰  NULL DO
        parent â† cur
        cmp â† <span class="hljs-built_in">Compare</span>(element, cur.element)
        
        IF cmp &lt; <span class="hljs-number">0</span> THEN
            cur â† cur<span class="hljs-selector-class">.left</span>
        ELSE IF cmp &gt; <span class="hljs-number">0</span> THEN
            cur â† cur<span class="hljs-selector-class">.right</span>
        ELSE
            cur<span class="hljs-selector-class">.element</span> â† element  <span class="hljs-comment">// è¦†ç›–æ—§å€¼</span>
            RETURN
    
    <span class="hljs-comment">// åˆ›å»ºæ–°èŠ‚ç‚¹</span>
    newNode â† <span class="hljs-built_in">NewNode</span>(element, parent)
    
    IF cmp &lt; <span class="hljs-number">0</span> THEN
        parent<span class="hljs-selector-class">.left</span> â† newNode
    ELSE
        parent<span class="hljs-selector-class">.right</span> â† newNode
</code></pre>
<h3 data-id="heading-12">2. åˆ é™¤å…ƒç´ </h3>
<p><strong>åˆ é™¤éœ€åˆ†3ç§æƒ…å†µ</strong>ï¼ˆæ ¹æ®èŠ‚ç‚¹çš„åº¦ï¼‰ï¼š</p>
<ol>
<li><strong>åº¦ä¸º0çš„èŠ‚ç‚¹</strong>ï¼ˆå¶å­èŠ‚ç‚¹ï¼‰ï¼šç›´æ¥åˆ é™¤</li>
<li><strong>åº¦ä¸º1çš„èŠ‚ç‚¹</strong>ï¼šç”¨å­èŠ‚ç‚¹æ›¿ä»£</li>
<li><strong>åº¦ä¸º2çš„èŠ‚ç‚¹</strong>ï¼šç”¨å‰é©±æˆ–åç»§æ›¿ä»£ï¼Œç„¶ååˆ é™¤å‰é©±/åç»§ï¼ˆè½¬ä¸ºæƒ…å†µ1æˆ–2ï¼‰</li>
</ol>
<p><strong>ä»£ç å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * åˆ é™¤å…ƒç´ 
 * 
 * æ—¶é—´å¤æ‚åº¦ï¼šO(h)ï¼Œhä¸ºæ ‘é«˜åº¦
 * ç©ºé—´å¤æ‚åº¦ï¼šO(1)
 * 
 * <span class="hljs-doctag">@param</span> element è¦åˆ é™¤çš„å…ƒç´ 
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(E element)</span> {
    Node&lt;E&gt; node = node(element);  <span class="hljs-comment">// å…ˆæ‰¾åˆ°å…ƒç´ å¯¹åº”çš„èŠ‚ç‚¹</span>
    remove(node);
}

<span class="hljs-comment">/**
 * åˆ é™¤èŠ‚ç‚¹ï¼ˆæ ¸å¿ƒæ–¹æ³•ï¼‰
 * 
 * <span class="hljs-doctag">@param</span> node è¦åˆ é™¤çš„èŠ‚ç‚¹
 */</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(Node&lt;E&gt; node)</span> {
    <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span>;
    }
    
    size--;
    
    <span class="hljs-comment">// æƒ…å†µ1ï¼šåº¦ä¸º2çš„èŠ‚ç‚¹ï¼ˆç”¨å‰é©±/åç»§æ›¿ä»£ï¼‰</span>
    <span class="hljs-keyword">if</span> (node.hasTwoChildren()) {
        <span class="hljs-comment">// æ‰¾åç»§èŠ‚ç‚¹ï¼ˆå³å­æ ‘çš„æœ€å·¦èŠ‚ç‚¹ï¼‰</span>
        Node&lt;E&gt; successor = successor(node);
        
        <span class="hljs-comment">// ç”¨åç»§èŠ‚ç‚¹çš„å€¼è¦†ç›–å½“å‰èŠ‚ç‚¹</span>
        node.element = successor.element;
        
        <span class="hljs-comment">// è½¬ä¸ºåˆ é™¤åç»§èŠ‚ç‚¹ï¼ˆåº¦0æˆ–1ï¼‰</span>
        node = successor;
    }
    
    <span class="hljs-comment">// æƒ…å†µ2ï¼šåº¦ä¸º0æˆ–1çš„èŠ‚ç‚¹</span>
    Node&lt;E&gt; child = (node.left != <span class="hljs-literal">null</span>) ? node.left : node.right;
    Node&lt;E&gt; parent = node.parent;
    
    <span class="hljs-keyword">if</span> (parent == <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// èŠ‚ç‚¹æ˜¯æ ¹èŠ‚ç‚¹</span>
        root = child;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (parent.left == node) {
        parent.left = child;
    } <span class="hljs-keyword">else</span> {
        parent.right = child;
    }
    
    <span class="hljs-comment">// ç»‘å®šçˆ¶èŠ‚ç‚¹</span>
    <span class="hljs-keyword">if</span> (child != <span class="hljs-literal">null</span>) {
        child.parent = parent;
    }
}

<span class="hljs-comment">/**
 * æ‰¾åç»§èŠ‚ç‚¹ï¼ˆä¸­åºéå†çš„åä¸€ä¸ªèŠ‚ç‚¹ï¼‰
 * 
 * ç®—æ³•ï¼š
 * 1. å¦‚æœå³å­æ ‘ä¸ä¸ºç©ºï¼Œæ‰¾å³å­æ ‘çš„æœ€å·¦èŠ‚ç‚¹
 * 2. å¦‚æœå³å­æ ‘ä¸ºç©ºï¼Œå‘ä¸Šæ‰¾çˆ¶èŠ‚ç‚¹ï¼Œç›´åˆ°å½“å‰èŠ‚ç‚¹æ˜¯çˆ¶èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹
 * 
 * <span class="hljs-doctag">@param</span> node å½“å‰èŠ‚ç‚¹
 * <span class="hljs-doctag">@return</span> åç»§èŠ‚ç‚¹
 */</span>
<span class="hljs-keyword">private</span> Node&lt;E&gt; <span class="hljs-title function_">successor</span><span class="hljs-params">(Node&lt;E&gt; node)</span> {
    <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-comment">// å³å­æ ‘ä¸ä¸ºç©ºï¼Œæ‰¾å³å­æ ‘çš„æœ€å·¦èŠ‚ç‚¹</span>
    Node&lt;E&gt; cur = node.right;
    <span class="hljs-keyword">if</span> (cur != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">while</span> (cur.left != <span class="hljs-literal">null</span>) {
            cur = cur.left;
        }
        <span class="hljs-keyword">return</span> cur;
    }
    
    <span class="hljs-comment">// å³å­æ ‘ä¸ºç©ºï¼Œå‘ä¸Šæ‰¾çˆ¶èŠ‚ç‚¹</span>
    <span class="hljs-keyword">while</span> (node.parent != <span class="hljs-literal">null</span> &amp;&amp; node == node.parent.right) {
        node = node.parent;
    }
    
    <span class="hljs-keyword">return</span> node.parent;
}
</code></pre>
<p><strong>åˆ é™¤è¿‡ç¨‹ç¤ºä¾‹</strong>ï¼ˆåˆ é™¤èŠ‚ç‚¹3ï¼Œåº¦ä¸º2ï¼‰ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">åˆå§‹BST:</span>
        8
       / \
      3   10
     / \
    1   6
       / \
      4   7

<span class="hljs-section">åˆ é™¤èŠ‚ç‚¹3ï¼ˆåº¦ä¸º2ï¼‰:</span>
<span class="hljs-section">æ­¥éª¤1: æ‰¾åç»§èŠ‚ç‚¹ï¼ˆèŠ‚ç‚¹3çš„å³å­æ ‘6çš„æœ€å·¦èŠ‚ç‚¹4ï¼‰</span>
<span class="hljs-section">æ­¥éª¤2: ç”¨èŠ‚ç‚¹4çš„å€¼è¦†ç›–èŠ‚ç‚¹3</span>
<span class="hljs-section">æ­¥éª¤3: åˆ é™¤èŠ‚ç‚¹4ï¼ˆåº¦ä¸º0ï¼Œç›´æ¥åˆ é™¤ï¼‰</span>

<span class="hljs-section">ç»“æœ:</span>
        8
       / \
      4   10
     / \
    1   6
         \
          7
</code></pre>
<p><strong>ä¼ªä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">ALGORITHM <span class="hljs-built_in">BSTDelete</span>(root, element)
    <span class="hljs-comment">// è¾“å…¥ï¼šBSTæ ¹èŠ‚ç‚¹rootï¼Œè¦åˆ é™¤çš„å…ƒç´ element</span>
    <span class="hljs-comment">// è¾“å‡ºï¼šæ›´æ–°åçš„BST</span>
    
    node â† <span class="hljs-built_in">BSTSearch</span>(root, element)
    IF node = NULL THEN
        RETURN
    
    IF node<span class="hljs-selector-class">.hasTwoChildren</span>() THEN
        successor â† <span class="hljs-built_in">Successor</span>(node)
        node<span class="hljs-selector-class">.element</span> â† successor<span class="hljs-selector-class">.element</span>
        node â† successor
    
    <span class="hljs-comment">// åˆ é™¤åº¦ä¸º0æˆ–1çš„èŠ‚ç‚¹</span>
    child â† IF node<span class="hljs-selector-class">.left</span> â‰  NULL THEN node<span class="hljs-selector-class">.left</span> ELSE node<span class="hljs-selector-class">.right</span>
    parent â† node<span class="hljs-selector-class">.parent</span>
    
    IF parent = NULL THEN
        root â† child
    ELSE IF parent<span class="hljs-selector-class">.left</span> = node THEN
        parent<span class="hljs-selector-class">.left</span> â† child
    ELSE
        parent<span class="hljs-selector-class">.right</span> â† child
    
    IF child â‰  NULL THEN
        child<span class="hljs-selector-class">.parent</span> â† parent
</code></pre>
<h3 data-id="heading-13">3. æŸ¥æ‰¾ï¼ˆSearchï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æŸ¥æ‰¾å…ƒç´ 
 * 
 * æ—¶é—´å¤æ‚åº¦ï¼šO(h)ï¼Œhä¸ºæ ‘é«˜åº¦ï¼ˆå¹³å‡O(log n)ï¼Œæœ€åO(n)ï¼‰
 * ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼ˆè¿­ä»£å®ç°ï¼‰æˆ–O(h)ï¼ˆé€’å½’å®ç°ï¼‰
 * 
 * <span class="hljs-doctag">@param</span> element è¦æŸ¥æ‰¾çš„å…ƒç´ 
 * <span class="hljs-doctag">@return</span> åŒ…å«è¯¥å…ƒç´ çš„èŠ‚ç‚¹ï¼Œå¦‚æœä¸å­˜åœ¨è¿”å›null
 */</span>
<span class="hljs-keyword">public</span> Node&lt;E&gt; <span class="hljs-title function_">node</span><span class="hljs-params">(E element)</span> {
    Node&lt;E&gt; cur = root;
    
    <span class="hljs-keyword">while</span> (cur != <span class="hljs-literal">null</span>) {
        <span class="hljs-type">int</span> <span class="hljs-variable">cmp</span> <span class="hljs-operator">=</span> compare(element, cur.element);
        
        <span class="hljs-keyword">if</span> (cmp &lt; <span class="hljs-number">0</span>) {
            cur = cur.left;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cmp &gt; <span class="hljs-number">0</span>) {
            cur = cur.right;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> cur;  <span class="hljs-comment">// æ‰¾åˆ°</span>
        }
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;  <span class="hljs-comment">// æœªæ‰¾åˆ°</span>
}

<span class="hljs-comment">// é€’å½’å®ç°</span>
<span class="hljs-keyword">public</span> TreeNode <span class="hljs-title function_">search</span><span class="hljs-params">(TreeNode root, <span class="hljs-type">int</span> val)</span> {
    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">null</span> || root.val == val) {
        <span class="hljs-keyword">return</span> root;
    }
    
    <span class="hljs-keyword">if</span> (val &lt; root.val) {
        <span class="hljs-keyword">return</span> search(root.left, val);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> search(root.right, val);
    }
}

<span class="hljs-comment">// è¿­ä»£å®ç°</span>
<span class="hljs-keyword">public</span> TreeNode <span class="hljs-title function_">searchIterative</span><span class="hljs-params">(TreeNode root, <span class="hljs-type">int</span> val)</span> {
    <span class="hljs-type">TreeNode</span> <span class="hljs-variable">cur</span> <span class="hljs-operator">=</span> root;
    <span class="hljs-keyword">while</span> (cur != <span class="hljs-literal">null</span> &amp;&amp; cur.val != val) {
        <span class="hljs-keyword">if</span> (val &lt; cur.val) {
            cur = cur.left;
        } <span class="hljs-keyword">else</span> {
            cur = cur.right;
        }
    }
    <span class="hljs-keyword">return</span> cur;
}
</code></pre>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># é€’å½’å®ç°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">search</span>(<span class="hljs-params">root, val</span>):
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root <span class="hljs-keyword">or</span> root.val == val:
        <span class="hljs-keyword">return</span> root
    
    <span class="hljs-keyword">if</span> val &lt; root.val:
        <span class="hljs-keyword">return</span> search(root.left, val)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> search(root.right, val)

<span class="hljs-comment"># è¿­ä»£å®ç°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">search_iterative</span>(<span class="hljs-params">root, val</span>):
    cur = root
    <span class="hljs-keyword">while</span> cur <span class="hljs-keyword">and</span> cur.val != val:
        <span class="hljs-keyword">if</span> val &lt; cur.val:
            cur = cur.left
        <span class="hljs-keyword">else</span>:
            cur = cur.right
    <span class="hljs-keyword">return</span> cur
</code></pre>
<h3 data-id="heading-14">2. æ’å…¥ï¼ˆInsertï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é€’å½’å®ç°</span>
<span class="hljs-keyword">public</span> TreeNode <span class="hljs-title function_">insert</span><span class="hljs-params">(TreeNode root, <span class="hljs-type">int</span> val)</span> {
    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeNode</span>(val);
    }
    
    <span class="hljs-keyword">if</span> (val &lt; root.val) {
        root.left = insert(root.left, val);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (val &gt; root.val) {
        root.right = insert(root.right, val);
    }
    <span class="hljs-comment">// val == root.val å¯ä»¥å¿½ç•¥æˆ–å®šä¹‰å¤„ç†è§„åˆ™</span>
    
    <span class="hljs-keyword">return</span> root;
}

<span class="hljs-comment">// è¿­ä»£å®ç°</span>
<span class="hljs-keyword">public</span> TreeNode <span class="hljs-title function_">insertIterative</span><span class="hljs-params">(TreeNode root, <span class="hljs-type">int</span> val)</span> {
    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeNode</span>(val);
    }
    
    <span class="hljs-type">TreeNode</span> <span class="hljs-variable">cur</span> <span class="hljs-operator">=</span> root;
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        <span class="hljs-keyword">if</span> (val &lt; cur.val) {
            <span class="hljs-keyword">if</span> (cur.left == <span class="hljs-literal">null</span>) {
                cur.left = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeNode</span>(val);
                <span class="hljs-keyword">break</span>;
            }
            cur = cur.left;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (val &gt; cur.val) {
            <span class="hljs-keyword">if</span> (cur.right == <span class="hljs-literal">null</span>) {
                cur.right = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeNode</span>(val);
                <span class="hljs-keyword">break</span>;
            }
            cur = cur.right;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">break</span>;  <span class="hljs-comment">// å€¼å·²å­˜åœ¨</span>
        }
    }
    
    <span class="hljs-keyword">return</span> root;
}
</code></pre>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># é€’å½’å®ç°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">insert</span>(<span class="hljs-params">root, val</span>):
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root:
        <span class="hljs-keyword">return</span> TreeNode(val)
    
    <span class="hljs-keyword">if</span> val &lt; root.val:
        root.left = insert(root.left, val)
    <span class="hljs-keyword">elif</span> val &gt; root.val:
        root.right = insert(root.right, val)
    <span class="hljs-comment"># val == root.val å¯ä»¥å¿½ç•¥</span>
    
    <span class="hljs-keyword">return</span> root

<span class="hljs-comment"># è¿­ä»£å®ç°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">insert_iterative</span>(<span class="hljs-params">root, val</span>):
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root:
        <span class="hljs-keyword">return</span> TreeNode(val)
    
    cur = root
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        <span class="hljs-keyword">if</span> val &lt; cur.val:
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> cur.left:
                cur.left = TreeNode(val)
                <span class="hljs-keyword">break</span>
            cur = cur.left
        <span class="hljs-keyword">elif</span> val &gt; cur.val:
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> cur.right:
                cur.right = TreeNode(val)
                <span class="hljs-keyword">break</span>
            cur = cur.right
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">break</span>  <span class="hljs-comment"># å€¼å·²å­˜åœ¨</span>
    
    <span class="hljs-keyword">return</span> root
</code></pre>
<h3 data-id="heading-15">3. åˆ é™¤ï¼ˆDeleteï¼‰</h3>
<p>åˆ é™¤èŠ‚ç‚¹æœ‰ä¸‰ç§æƒ…å†µï¼š</p>
<ul>
<li><strong>å¶å­èŠ‚ç‚¹</strong>ï¼šç›´æ¥åˆ é™¤</li>
<li><strong>åªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹</strong>ï¼šç”¨å­èŠ‚ç‚¹æ›¿æ¢</li>
<li><strong>æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹</strong>ï¼šç”¨å³å­æ ‘çš„æœ€å°å€¼ï¼ˆæˆ–å·¦å­æ ‘çš„æœ€å¤§å€¼ï¼‰æ›¿æ¢</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> TreeNode <span class="hljs-title function_">deleteNode</span><span class="hljs-params">(TreeNode root, <span class="hljs-type">int</span> val)</span> {
    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    
    <span class="hljs-keyword">if</span> (val &lt; root.val) {
        root.left = deleteNode(root.left, val);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (val &gt; root.val) {
        root.right = deleteNode(root.right, val);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æ‰¾åˆ°è¦åˆ é™¤çš„èŠ‚ç‚¹</span>
        <span class="hljs-keyword">if</span> (root.left == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> root.right;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (root.right == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> root.left;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹</span>
            <span class="hljs-comment">// æ‰¾åˆ°å³å­æ ‘çš„æœ€å°å€¼</span>
            <span class="hljs-type">TreeNode</span> <span class="hljs-variable">minNode</span> <span class="hljs-operator">=</span> findMin(root.right);
            root.val = minNode.val;
            root.right = deleteNode(root.right, minNode.val);
        }
    }
    
    <span class="hljs-keyword">return</span> root;
}

<span class="hljs-keyword">private</span> TreeNode <span class="hljs-title function_">findMin</span><span class="hljs-params">(TreeNode node)</span> {
    <span class="hljs-keyword">while</span> (node.left != <span class="hljs-literal">null</span>) {
        node = node.left;
    }
    <span class="hljs-keyword">return</span> node;
}
</code></pre>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">delete_node</span>(<span class="hljs-params">root, val</span>):
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
    
    <span class="hljs-keyword">if</span> val &lt; root.val:
        root.left = delete_node(root.left, val)
    <span class="hljs-keyword">elif</span> val &gt; root.val:
        root.right = delete_node(root.right, val)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-comment"># æ‰¾åˆ°è¦åˆ é™¤çš„èŠ‚ç‚¹</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root.left:
            <span class="hljs-keyword">return</span> root.right
        <span class="hljs-keyword">elif</span> <span class="hljs-keyword">not</span> root.right:
            <span class="hljs-keyword">return</span> root.left
        <span class="hljs-keyword">else</span>:
            <span class="hljs-comment"># æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹</span>
            <span class="hljs-comment"># æ‰¾åˆ°å³å­æ ‘çš„æœ€å°å€¼</span>
            min_node = find_min(root.right)
            root.val = min_node.val
            root.right = delete_node(root.right, min_node.val)
    
    <span class="hljs-keyword">return</span> root

<span class="hljs-keyword">def</span> <span class="hljs-title function_">find_min</span>(<span class="hljs-params">node</span>):
    <span class="hljs-keyword">while</span> node.left:
        node = node.left
    <span class="hljs-keyword">return</span> node
</code></pre>
<h2 data-id="heading-16">äº”ã€BSTçš„å®ç°</h2>
<h3 data-id="heading-17">Java å®Œæ•´å®ç°</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BST</span> {
    <span class="hljs-keyword">private</span> TreeNode root;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> size;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BST</span><span class="hljs-params">()</span> {
        root = <span class="hljs-literal">null</span>;
        size = <span class="hljs-number">0</span>;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">size</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> size;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> size == <span class="hljs-number">0</span>;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> {
        root = add(root, val);
    }
    
    <span class="hljs-keyword">private</span> TreeNode <span class="hljs-title function_">add</span><span class="hljs-params">(TreeNode node, <span class="hljs-type">int</span> val)</span> {
        <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">null</span>) {
            size++;
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeNode</span>(val);
        }
        
        <span class="hljs-keyword">if</span> (val &lt; node.val) {
            node.left = add(node.left, val);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (val &gt; node.val) {
            node.right = add(node.right, val);
        }
        
        <span class="hljs-keyword">return</span> node;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">contains</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> {
        <span class="hljs-keyword">return</span> contains(root, val);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">contains</span><span class="hljs-params">(TreeNode node, <span class="hljs-type">int</span> val)</span> {
        <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        
        <span class="hljs-keyword">if</span> (val == node.val) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (val &lt; node.val) <span class="hljs-keyword">return</span> contains(node.left, val);
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> contains(node.right, val);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> {
        root = remove(root, val);
    }
    
    <span class="hljs-keyword">private</span> TreeNode <span class="hljs-title function_">remove</span><span class="hljs-params">(TreeNode node, <span class="hljs-type">int</span> val)</span> {
        <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        
        <span class="hljs-keyword">if</span> (val &lt; node.val) {
            node.left = remove(node.left, val);
            <span class="hljs-keyword">return</span> node;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (val &gt; node.val) {
            node.right = remove(node.right, val);
            <span class="hljs-keyword">return</span> node;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (node.left == <span class="hljs-literal">null</span>) {
                size--;
                <span class="hljs-keyword">return</span> node.right;
            }
            
            <span class="hljs-keyword">if</span> (node.right == <span class="hljs-literal">null</span>) {
                size--;
                <span class="hljs-keyword">return</span> node.left;
            }
            
            <span class="hljs-type">TreeNode</span> <span class="hljs-variable">successor</span> <span class="hljs-operator">=</span> findMin(node.right);
            successor.right = removeMin(node.right);
            successor.left = node.left;
            
            <span class="hljs-keyword">return</span> successor;
        }
    }
    
    <span class="hljs-keyword">private</span> TreeNode <span class="hljs-title function_">findMin</span><span class="hljs-params">(TreeNode node)</span> {
        <span class="hljs-keyword">if</span> (node.left == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> node;
        <span class="hljs-keyword">return</span> findMin(node.left);
    }
    
    <span class="hljs-keyword">private</span> TreeNode <span class="hljs-title function_">removeMin</span><span class="hljs-params">(TreeNode node)</span> {
        <span class="hljs-keyword">if</span> (node.left == <span class="hljs-literal">null</span>) {
            size--;
            <span class="hljs-keyword">return</span> node.right;
        }
        node.left = removeMin(node.left);
        <span class="hljs-keyword">return</span> node;
    }
}
</code></pre>
<h3 data-id="heading-18">Python å®Œæ•´å®ç°</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BST</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.root = <span class="hljs-literal">None</span>
        self.size = <span class="hljs-number">0</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__len__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> self.size
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_empty</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> self.size == <span class="hljs-number">0</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">self, val</span>):
        self.root = self._add(self.root, val)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_add</span>(<span class="hljs-params">self, node, val</span>):
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> node:
            self.size += <span class="hljs-number">1</span>
            <span class="hljs-keyword">return</span> TreeNode(val)
        
        <span class="hljs-keyword">if</span> val &lt; node.val:
            node.left = self._add(node.left, val)
        <span class="hljs-keyword">elif</span> val &gt; node.val:
            node.right = self._add(node.right, val)
        
        <span class="hljs-keyword">return</span> node
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">contains</span>(<span class="hljs-params">self, val</span>):
        <span class="hljs-keyword">return</span> self._contains(self.root, val)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_contains</span>(<span class="hljs-params">self, node, val</span>):
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> node:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
        
        <span class="hljs-keyword">if</span> val == node.val:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
        <span class="hljs-keyword">elif</span> val &lt; node.val:
            <span class="hljs-keyword">return</span> self._contains(node.left, val)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">return</span> self._contains(node.right, val)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">remove</span>(<span class="hljs-params">self, val</span>):
        self.root = self._remove(self.root, val)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_remove</span>(<span class="hljs-params">self, node, val</span>):
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> node:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
        
        <span class="hljs-keyword">if</span> val &lt; node.val:
            node.left = self._remove(node.left, val)
            <span class="hljs-keyword">return</span> node
        <span class="hljs-keyword">elif</span> val &gt; node.val:
            node.right = self._remove(node.right, val)
            <span class="hljs-keyword">return</span> node
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> node.left:
                self.size -= <span class="hljs-number">1</span>
                <span class="hljs-keyword">return</span> node.right
            
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> node.right:
                self.size -= <span class="hljs-number">1</span>
                <span class="hljs-keyword">return</span> node.left
            
            successor = self._find_min(node.right)
            successor.right = self._remove_min(node.right)
            successor.left = node.left
            
            <span class="hljs-keyword">return</span> successor
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_find_min</span>(<span class="hljs-params">self, node</span>):
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> node.left:
            <span class="hljs-keyword">return</span> node
        <span class="hljs-keyword">return</span> self._find_min(node.left)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_remove_min</span>(<span class="hljs-params">self, node</span>):
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> node.left:
            self.size -= <span class="hljs-number">1</span>
            <span class="hljs-keyword">return</span> node.right
        node.left = self._remove_min(node.left)
        <span class="hljs-keyword">return</span> node
</code></pre>
<h2 data-id="heading-19">å…­ã€æ—¶é—´å¤æ‚åº¦åˆ†æ</h2>
<h3 data-id="heading-20">å¹³è¡¡BST</h3>



































<table><thead><tr><th>æ“ä½œ</th><th>æ—¶é—´å¤æ‚åº¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æŸ¥æ‰¾</td><td>O(log n)</td><td>æ¯æ¬¡å‡å°‘ä¸€åŠæœç´¢ç©ºé—´</td></tr><tr><td>æ’å…¥</td><td>O(log n)</td><td>éœ€è¦æ‰¾åˆ°æ’å…¥ä½ç½®</td></tr><tr><td>åˆ é™¤</td><td>O(log n)</td><td>éœ€è¦æ‰¾åˆ°åˆ é™¤ä½ç½®</td></tr><tr><td>æœ€å°å€¼</td><td>O(log n)</td><td>æœ€å·¦èŠ‚ç‚¹</td></tr><tr><td>æœ€å¤§å€¼</td><td>O(log n)</td><td>æœ€å³èŠ‚ç‚¹</td></tr></tbody></table>
<h3 data-id="heading-21">ä¸å¹³è¡¡BSTï¼ˆæœ€åæƒ…å†µï¼‰</h3>

























<table><thead><tr><th>æ“ä½œ</th><th>æ—¶é—´å¤æ‚åº¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æŸ¥æ‰¾</td><td>O(n)</td><td>é€€åŒ–ä¸ºé“¾è¡¨</td></tr><tr><td>æ’å…¥</td><td>O(n)</td><td>é€€åŒ–ä¸ºé“¾è¡¨</td></tr><tr><td>åˆ é™¤</td><td>O(n)</td><td>é€€åŒ–ä¸ºé“¾è¡¨</td></tr></tbody></table>
<h2 data-id="heading-22">ä¸ƒã€åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-23">1. æœ‰åºæ•°æ®çš„æŸ¥æ‰¾</h3>
<p>BSTæä¾›äº†å¿«é€Ÿçš„æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ“ä½œã€‚</p>
<h3 data-id="heading-24">2. èŒƒå›´æŸ¥è¯¢</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æŸ¥æ‰¾èŒƒå›´å†…çš„æ‰€æœ‰å€¼</span>
<span class="hljs-keyword">public</span> List&lt;Integer&gt; <span class="hljs-title function_">rangeSearch</span><span class="hljs-params">(TreeNode root, <span class="hljs-type">int</span> min, <span class="hljs-type">int</span> max)</span> {
    List&lt;Integer&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    rangeSearchHelper(root, min, max, result);
    <span class="hljs-keyword">return</span> result;
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">rangeSearchHelper</span><span class="hljs-params">(TreeNode node, <span class="hljs-type">int</span> min, <span class="hljs-type">int</span> max, List&lt;Integer&gt; result)</span> {
    <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-keyword">if</span> (min &lt; node.val) {
        rangeSearchHelper(node.left, min, max, result);
    }
    
    <span class="hljs-keyword">if</span> (min &lt;= node.val &amp;&amp; node.val &lt;= max) {
        result.add(node.val);
    }
    
    <span class="hljs-keyword">if</span> (max &gt; node.val) {
        rangeSearchHelper(node.right, min, max, result);
    }
}
</code></pre>
<h3 data-id="heading-25">3. å‰é©±å’Œåç»§</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æŸ¥æ‰¾å‰é©±ï¼ˆå°äºvalçš„æœ€å¤§å€¼ï¼‰</span>
<span class="hljs-keyword">public</span> TreeNode <span class="hljs-title function_">predecessor</span><span class="hljs-params">(TreeNode root, <span class="hljs-type">int</span> val)</span> {
    <span class="hljs-type">TreeNode</span> <span class="hljs-variable">pred</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
    <span class="hljs-type">TreeNode</span> <span class="hljs-variable">cur</span> <span class="hljs-operator">=</span> root;
    
    <span class="hljs-keyword">while</span> (cur != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">if</span> (val &lt;= cur.val) {
            cur = cur.left;
        } <span class="hljs-keyword">else</span> {
            pred = cur;
            cur = cur.right;
        }
    }
    
    <span class="hljs-keyword">return</span> pred;
}

<span class="hljs-comment">// æŸ¥æ‰¾åç»§ï¼ˆå¤§äºvalçš„æœ€å°å€¼ï¼‰</span>
<span class="hljs-keyword">public</span> TreeNode <span class="hljs-title function_">successor</span><span class="hljs-params">(TreeNode root, <span class="hljs-type">int</span> val)</span> {
    <span class="hljs-type">TreeNode</span> <span class="hljs-variable">succ</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
    <span class="hljs-type">TreeNode</span> <span class="hljs-variable">cur</span> <span class="hljs-operator">=</span> root;
    
    <span class="hljs-keyword">while</span> (cur != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">if</span> (val &gt;= cur.val) {
            cur = cur.right;
        } <span class="hljs-keyword">else</span> {
            succ = cur;
            cur = cur.left;
        }
    }
    
    <span class="hljs-keyword">return</span> succ;
}
</code></pre>
<h3 data-id="heading-26">4. å®é™…åº”ç”¨</h3>
<ul>
<li><strong>Java</strong>: TreeSet, TreeMap</li>
<li><strong>æ•°æ®åº“ç´¢å¼•</strong>: Bæ ‘ã€B+æ ‘åŸºäºBSTæ€æƒ³</li>
<li><strong>ç¬¦å·è¡¨</strong>: å®ç°æœ‰åºç¬¦å·è¡¨</li>
</ul>
<h2 data-id="heading-27">å…«ã€å·¥ä¸šç•Œå®è·µæ¡ˆä¾‹</h2>
<h3 data-id="heading-28">1. æ¡ˆä¾‹1ï¼šJava TreeMapçš„å®ç°ï¼ˆOracle/Sun Microsystemså®è·µï¼‰</h3>
<p><strong>èƒŒæ™¯</strong>ï¼šJavaçš„TreeMapä½¿ç”¨çº¢é»‘æ ‘ï¼ˆè‡ªå¹³è¡¡BSTï¼‰å®ç°æœ‰åºæ˜ å°„ã€‚</p>
<p><strong>æŠ€æœ¯å®ç°åˆ†æ</strong>ï¼ˆåŸºäºOracle Javaæºç ï¼‰ï¼š</p>
<ol>
<li>
<p><strong>çº¢é»‘æ ‘ä¿è¯å¹³è¡¡</strong>ï¼š</p>
<ul>
<li><strong>å¹³è¡¡æœºåˆ¶</strong>ï¼šé€šè¿‡é¢œè‰²çº¦æŸå’Œæ—‹è½¬æ“ä½œç»´æŠ¤å¹³è¡¡</li>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šæœ€åæƒ…å†µO(log n)ï¼Œå¹³å‡æƒ…å†µO(log n)</li>
<li><strong>æ ‘é«˜ä¿è¯</strong>ï¼šh â‰¤ 2log(n+1)ï¼Œä¿è¯æŸ¥æ‰¾æ€§èƒ½</li>
</ul>
</li>
<li>
<p><strong>æœ‰åºæ€§æ”¯æŒ</strong>ï¼š</p>
<ul>
<li><strong>èŒƒå›´æŸ¥è¯¢</strong>ï¼šä½¿ç”¨<code>subMap()</code>æ–¹æ³•ï¼Œæ—¶é—´å¤æ‚åº¦O(log n + k)</li>
<li><strong>å‰é©±åç»§</strong>ï¼šä½¿ç”¨<code>lowerEntry()</code>å’Œ<code>higherEntry()</code>æ–¹æ³•ï¼ŒO(log n)</li>
<li><strong>ä¸­åºéå†</strong>ï¼šæŒ‰å…³é”®å­—é¡ºåºéå†ï¼ŒO(n)</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li><strong>è¿­ä»£å™¨ä¼˜åŒ–</strong>ï¼šç¼“å­˜å½“å‰ä½ç½®ï¼Œæ”¯æŒO(1)çš„next()æ“ä½œ</li>
<li><strong>æ‰¹é‡æ“ä½œ</strong>ï¼š<code>putAll()</code>æ–¹æ³•ä¼˜åŒ–ï¼Œå‡å°‘å¹³è¡¡è°ƒæ•´æ¬¡æ•°</li>
</ul>
</li>
</ol>
<p><strong>æ€§èƒ½æ•°æ®</strong>ï¼ˆOracle Javaå›¢é˜Ÿæµ‹è¯•ï¼Œ1000ä¸‡æ¬¡æ“ä½œï¼‰ï¼š</p>



































<table><thead><tr><th>æ“ä½œ</th><th>TreeMapï¼ˆçº¢é»‘æ ‘ï¼‰</th><th>HashMap</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æŸ¥æ‰¾</td><td>O(log n)</td><td>O(1)</td><td>HashMapæ›´å¿«</td></tr><tr><td>æ’å…¥</td><td>O(log n)</td><td>O(1)</td><td>HashMapæ›´å¿«</td></tr><tr><td>èŒƒå›´æŸ¥è¯¢</td><td>O(log n + k)</td><td>ä¸æ”¯æŒ</td><td>TreeMapä¼˜åŠ¿</td></tr><tr><td>æœ‰åºéå†</td><td>O(n)</td><td>ä¸æ”¯æŒ</td><td>TreeMapä¼˜åŠ¿</td></tr></tbody></table>
<p><strong>å­¦æœ¯å‚è€ƒ</strong>ï¼š</p>
<ul>
<li>Oracle Java Documentation: TreeMap Class</li>
<li>Java Source Code: java.util.TreeMap</li>
<li>CLRS Chapter 13: Red-Black Trees</li>
</ul>
<p><strong>ä¼ªä»£ç ï¼šTreeMapèŒƒå›´æŸ¥è¯¢</strong></p>
<pre><code class="hljs language-scss" lang="scss">ALGORITHM <span class="hljs-built_in">TreeMapRangeSearch</span>(treeMap, minKey, maxKey)
    result â† <span class="hljs-built_in">EmptyList</span>()
    
    <span class="hljs-comment">// æ‰¾åˆ°èµ·å§‹èŠ‚ç‚¹</span>
    node â† treeMap<span class="hljs-selector-class">.ceilingEntry</span>(minKey)
    
    <span class="hljs-comment">// ä¸­åºéå†èŒƒå›´å†…çš„èŠ‚ç‚¹</span>
    WHILE node â‰  NULL AND node<span class="hljs-selector-class">.key</span> â‰¤ maxKey DO
        result<span class="hljs-selector-class">.add</span>(node.value)
        node â† treeMap<span class="hljs-selector-class">.higherEntry</span>(node.key)
    
    RETURN result
</code></pre>
<h3 data-id="heading-29">2. æ¡ˆä¾‹2ï¼šMySQLçš„B+æ ‘ç´¢å¼•ï¼ˆOracle/MySQLå®è·µï¼‰</h3>
<p><strong>èƒŒæ™¯</strong>ï¼šMySQLä½¿ç”¨B+æ ‘ï¼ˆå¤šè·¯å¹³è¡¡æœç´¢æ ‘ï¼‰ä½œä¸ºç´¢å¼•ç»“æ„ã€‚</p>
<p><strong>æŠ€æœ¯å®ç°åˆ†æ</strong>ï¼ˆåŸºäºMySQL InnoDBæºç ï¼‰ï¼š</p>
<ol>
<li>
<p><strong>B+æ ‘è®¾è®¡åŸç†</strong>ï¼š</p>
<ul>
<li><strong>å¤šè·¯å¹³è¡¡</strong>ï¼šæ¯ä¸ªèŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªå­èŠ‚ç‚¹ï¼ˆé€šå¸¸100-200ä¸ªï¼‰</li>
<li><strong>å†…éƒ¨èŠ‚ç‚¹</strong>ï¼šåªå­˜å‚¨å…³é”®å­—å’Œå­èŠ‚ç‚¹æŒ‡é’ˆï¼Œä¸å­˜å‚¨æ•°æ®</li>
<li><strong>å¶å­èŠ‚ç‚¹</strong>ï¼šå­˜å‚¨å…³é”®å­—å’Œæ•°æ®ï¼Œå½¢æˆæœ‰åºé“¾è¡¨</li>
<li><strong>é¡µç»“æ„</strong>ï¼šèŠ‚ç‚¹å¤§å°å›ºå®šï¼ˆ16KBï¼‰ï¼Œå¯¹åº”ç£ç›˜é¡µå¤§å°</li>
</ul>
</li>
<li>
<p><strong>èŒƒå›´æŸ¥è¯¢ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li><strong>å¶å­èŠ‚ç‚¹é“¾è¡¨</strong>ï¼šæ”¯æŒO(log n + k)çš„èŒƒå›´æŸ¥è¯¢ï¼Œkä¸ºç»“æœæ•°é‡</li>
<li><strong>é¡ºåºè®¿é—®</strong>ï¼šé€šè¿‡é“¾è¡¨é¡ºåºè®¿é—®ï¼Œé¿å…éšæœºI/O</li>
<li><strong>é¢„è¯»æœºåˆ¶</strong>ï¼šé¢„è¯»ç›¸é‚»é¡µï¼Œæå‡èŒƒå›´æŸ¥è¯¢æ€§èƒ½</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½æ•°æ®</strong>ï¼ˆMySQLå®˜æ–¹æµ‹è¯•ï¼Œ10äº¿æ¡è®°å½•ï¼‰ï¼š</p>
</li>
</ol>



































<table><thead><tr><th>æ“ä½œ</th><th>B+æ ‘ç´¢å¼•</th><th>å“ˆå¸Œç´¢å¼•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç‚¹æŸ¥è¯¢</td><td>O(log n)</td><td>O(1)</td><td>å“ˆå¸Œç´¢å¼•æ›´å¿«</td></tr><tr><td>èŒƒå›´æŸ¥è¯¢</td><td>O(log n + k)</td><td>ä¸æ”¯æŒ</td><td>B+æ ‘ä¼˜åŠ¿æ˜æ˜¾</td></tr><tr><td>æ’å…¥æ“ä½œ</td><td>O(log n)</td><td>O(1)</td><td>å“ˆå¸Œç´¢å¼•æ›´å¿«</td></tr><tr><td>ç£ç›˜I/O</td><td>3-4æ¬¡</td><td>1æ¬¡</td><td>B+æ ‘ç•¥å¤šä½†å¯æ¥å—</td></tr></tbody></table>
<p><strong>å­¦æœ¯å‚è€ƒ</strong>ï¼š</p>
<ul>
<li>MySQLå®˜æ–¹æ–‡æ¡£ï¼šInnoDB Storage Engine</li>
<li>Comer, D. (1979). "The Ubiquitous B-Tree." <em>ACM Computing Surveys</em></li>
<li>Graefe, G. (2011). "Modern B-Tree Techniques." <em>Foundations and Trends in Databases</em></li>
</ul>
<p><strong>ä¼ªä»£ç ï¼šB+æ ‘æŸ¥æ‰¾</strong></p>
<pre><code class="hljs language-scss" lang="scss">ALGORITHM <span class="hljs-built_in">BPlusTreeSearch</span>(root, key)
    node â† root
    
    <span class="hljs-comment">// ä»æ ¹èŠ‚ç‚¹å‘ä¸‹æŸ¥æ‰¾</span>
    WHILE NOT node<span class="hljs-selector-class">.isLeaf</span> DO
        <span class="hljs-comment">// åœ¨å†…éƒ¨èŠ‚ç‚¹ä¸­äºŒåˆ†æŸ¥æ‰¾</span>
        index â† <span class="hljs-built_in">BinarySearch</span>(node.keys, key)
        node â† node<span class="hljs-selector-class">.children</span><span class="hljs-selector-attr">[index]</span>
    
    <span class="hljs-comment">// åœ¨å¶å­èŠ‚ç‚¹ä¸­æŸ¥æ‰¾</span>
    index â† <span class="hljs-built_in">BinarySearch</span>(node.keys, key)
    IF node<span class="hljs-selector-class">.keys</span><span class="hljs-selector-attr">[index]</span> = key THEN
        RETURN node<span class="hljs-selector-class">.values</span><span class="hljs-selector-attr">[index]</span>
    ELSE
        RETURN NULL
</code></pre>
<h3 data-id="heading-30">æ¡ˆä¾‹3ï¼šå•†å“ä»·æ ¼åŒºé—´æŸ¥è¯¢ç³»ç»Ÿï¼ˆé¡¹ç›®è½åœ°å®æˆ˜ï¼‰</h3>
<h4 data-id="heading-31">3.1 åœºæ™¯èƒŒæ™¯</h4>
<p>ç”µå•†å¹³å°éœ€æ”¯æŒæŒ‰ä»·æ ¼åŒºé—´ç­›é€‰å•†å“ï¼ˆå¦‚100-500å…ƒçš„æ‰‹æœºï¼‰ï¼Œåˆå§‹ä½¿ç”¨çº¿æ€§éå†ï¼ˆO(n)ï¼‰æŸ¥è¯¢ï¼Œå½“å•†å“æ•°é‡è¶…è¿‡10ä¸‡æ—¶ï¼ŒæŸ¥è¯¢å“åº”è¶…æ—¶ã€‚</p>
<p><strong>é—®é¢˜åˆ†æ</strong>ï¼š</p>
<ul>
<li><strong>æ•°æ®è§„æ¨¡</strong>ï¼šå•†å“æ•°é‡è¶…è¿‡10ä¸‡ï¼Œçº¿æ€§æŸ¥è¯¢æ€§èƒ½å·®</li>
<li><strong>æŸ¥è¯¢é¢‘ç‡</strong>ï¼šä»·æ ¼ç­›é€‰æ˜¯é«˜é¢‘æ“ä½œï¼Œæ¯ç§’æ•°åƒæ¬¡</li>
<li><strong>æ€§èƒ½è¦æ±‚</strong>ï¼šæŸ¥è¯¢å“åº”æ—¶é—´ &lt; 100ms</li>
</ul>
<p><strong>æ€§èƒ½æ•°æ®</strong>ï¼ˆ10ä¸‡å•†å“ï¼‰ï¼š</p>
<ul>
<li>æŸ¥è¯¢å“åº”æ—¶é—´ï¼š1.2ç§’</li>
<li>CPUä½¿ç”¨ç‡ï¼š80%</li>
<li>æ— æ³•æ»¡è¶³å¤§ä¿ƒæœŸé—´çš„æ€§èƒ½è¦æ±‚</li>
</ul>
<h4 data-id="heading-32">3.2 ä¼˜åŒ–æ–¹æ¡ˆ</h4>
<p><strong>ç­–ç•¥1ï¼šBSTç´¢å¼•æ„å»º</strong></p>
<p>æŒ‰å•†å“ä»·æ ¼æ„å»ºBSTï¼Œæ”¯æŒèŒƒå›´æŸ¥è¯¢</p>
<p><strong>ç­–ç•¥2ï¼šå¹³è¡¡ä¼˜åŒ–</strong></p>
<p>å› å•†å“ä»·æ ¼æ’å…¥å¯èƒ½æœ‰åºå¯¼è‡´BSTé€€åŒ–ä¸ºé“¾è¡¨ï¼Œæ”¹ç”¨çº¢é»‘æ ‘ï¼ˆJDK TreeMapåº•å±‚å®ç°ï¼‰</p>
<p><strong>ç­–ç•¥3ï¼šèŒƒå›´æŸ¥è¯¢ä¼˜åŒ–</strong></p>
<p>åˆ©ç”¨TreeMapçš„subMapæ–¹æ³•å®ç°é«˜æ•ˆçš„èŒƒå›´æŸ¥è¯¢</p>
<h4 data-id="heading-33">3.3 æ ¸å¿ƒå®ç°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * å•†å“ä»·æ ¼ç´¢å¼•ï¼ˆåŸºäºçº¢é»‘æ ‘ï¼‰
 * 
 * è®¾è®¡è¦ç‚¹ï¼š
 * 1. ä½¿ç”¨TreeMapï¼ˆçº¢é»‘æ ‘ï¼‰å­˜å‚¨&lt;ä»·æ ¼, å•†å“åˆ—è¡¨&gt;
 * 2. æ”¯æŒä»·æ ¼åŒºé—´æŸ¥è¯¢ï¼ˆO(log n + k)ï¼Œkä¸ºç»“æœæ•°é‡ï¼‰
 * 3. æ”¯æŒå‰é©±åç»§æŸ¥è¯¢ï¼Œå®ç°å¤æ‚ç­›é€‰
 * 
 * å­¦æœ¯å‚è€ƒï¼š
 * - CLRS Chapter 13: Red-Black Trees
 * - Java TreeMapæºç å®ç°
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductPriceIndex</span> {
    <span class="hljs-comment">/**
     * çº¢é»‘æ ‘ï¼ˆè‡ªå¹³è¡¡BSTï¼‰å­˜å‚¨&lt;ä»·æ ¼, å•†å“åˆ—è¡¨&gt;
     * TreeMapåº•å±‚ä½¿ç”¨çº¢é»‘æ ‘å®ç°ï¼Œä¿è¯O(log n)æ€§èƒ½
     */</span>
    <span class="hljs-keyword">private</span> TreeMap&lt;BigDecimal, List&lt;Product&gt;&gt; priceTree;
    
    <span class="hljs-comment">/**
     * æ„é€ æ–¹æ³•
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ProductPriceIndex</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// TreeMapé»˜è®¤æŒ‰keyå‡åºæ’åº</span>
        priceTree = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeMap</span>&lt;&gt;();
    }
    
    <span class="hljs-comment">/**
     * æ·»åŠ å•†å“åˆ°ç´¢å¼•
     * 
     * æ—¶é—´å¤æ‚åº¦ï¼šO(log n)ï¼Œnä¸ºä¸åŒä»·æ ¼çš„æ•°é‡
     * ç©ºé—´å¤æ‚åº¦ï¼šO(n)
     * 
     * <span class="hljs-doctag">@param</span> product å•†å“å¯¹è±¡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addProduct</span><span class="hljs-params">(Product product)</span> {
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">price</span> <span class="hljs-operator">=</span> product.getPrice();
        
        <span class="hljs-comment">// å¦‚æœä»·æ ¼å·²å­˜åœ¨ï¼Œæ·»åŠ åˆ°åˆ—è¡¨ä¸­ï¼›å¦åˆ™åˆ›å»ºæ–°åˆ—è¡¨</span>
        priceTree.computeIfAbsent(price, k -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;())
                 .add(product);
    }
    
    <span class="hljs-comment">/**
     * ä»·æ ¼åŒºé—´æŸ¥è¯¢ï¼ˆminPrice â‰¤ ä»·æ ¼ â‰¤ maxPriceï¼‰
     * 
     * æ—¶é—´å¤æ‚åº¦ï¼šO(log n + k)ï¼Œnä¸ºä¸åŒä»·æ ¼æ•°é‡ï¼Œkä¸ºç»“æœæ•°é‡
     * ç©ºé—´å¤æ‚åº¦ï¼šO(k)
     * 
     * <span class="hljs-doctag">@param</span> minPrice æœ€ä½ä»·æ ¼
     * <span class="hljs-doctag">@param</span> maxPrice æœ€é«˜ä»·æ ¼
     * <span class="hljs-doctag">@return</span> ä»·æ ¼åŒºé—´å†…çš„æ‰€æœ‰å•†å“
     */</span>
    <span class="hljs-keyword">public</span> List&lt;Product&gt; <span class="hljs-title function_">queryByPriceRange</span><span class="hljs-params">(BigDecimal minPrice, BigDecimal maxPrice)</span> {
        List&lt;Product&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        
        <span class="hljs-comment">// ä½¿ç”¨TreeMapçš„subMapæ–¹æ³•è·å–ä»·æ ¼åŒºé—´å†…çš„æ‰€æœ‰æ¡ç›®</span>
        <span class="hljs-comment">// subMapæ–¹æ³•è¿”å›ä¸€ä¸ªè§†å›¾ï¼Œæ—¶é—´å¤æ‚åº¦O(log n)</span>
        NavigableMap&lt;BigDecimal, List&lt;Product&gt;&gt; subMap = priceTree.subMap(
            minPrice, <span class="hljs-literal">true</span>,  <span class="hljs-comment">// åŒ…å«minPrice</span>
            maxPrice, <span class="hljs-literal">true</span>   <span class="hljs-comment">// åŒ…å«maxPrice</span>
        );
        
        <span class="hljs-comment">// åˆå¹¶ç»“æœï¼ˆO(k)ï¼Œkä¸ºç»“æœæ•°é‡ï¼‰</span>
        <span class="hljs-keyword">for</span> (List&lt;Product&gt; products : subMap.values()) {
            result.addAll(products);
        }
        
        <span class="hljs-keyword">return</span> result;
    }
    
    <span class="hljs-comment">/**
     * æŸ¥è¯¢ä½äºç›®æ ‡ä»·æ ¼çš„æœ€é«˜æ€§ä»·æ¯”å•†å“
     * 
     * æ—¶é—´å¤æ‚åº¦ï¼šO(log n)
     * ç©ºé—´å¤æ‚åº¦ï¼šO(1)
     * 
     * <span class="hljs-doctag">@param</span> maxPrice æœ€é«˜ä»·æ ¼
     * <span class="hljs-doctag">@return</span> æœ€é«˜æ€§ä»·æ¯”å•†å“ï¼Œå¦‚æœä¸å­˜åœ¨è¿”å›null
     */</span>
    <span class="hljs-keyword">public</span> Product <span class="hljs-title function_">queryCheapestBelow</span><span class="hljs-params">(BigDecimal maxPrice)</span> {
        <span class="hljs-comment">// æ‰¾åˆ°å°äºç­‰äºmaxPriceçš„æœ€å¤§ä»·æ ¼ï¼ˆO(log n)ï¼‰</span>
        Map.Entry&lt;BigDecimal, List&lt;Product&gt;&gt; entry = priceTree.floorEntry(maxPrice);
        
        <span class="hljs-keyword">if</span> (entry == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;  <span class="hljs-comment">// æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å•†å“</span>
        }
        
        <span class="hljs-comment">// å‡è®¾æ€§ä»·æ¯”æŒ‰è¯„åˆ†/ä»·æ ¼æ’åº</span>
        <span class="hljs-keyword">return</span> entry.getValue().stream()
            .max(Comparator.comparing(p -&gt; 
                p.getScore().divide(p.getPrice(), <span class="hljs-number">4</span>, RoundingMode.HALF_UP)))
            .orElse(<span class="hljs-literal">null</span>);
    }
    
    <span class="hljs-comment">/**
     * è·å–ä»·æ ¼ç»Ÿè®¡ä¿¡æ¯
     * 
     * <span class="hljs-doctag">@return</span> ä»·æ ¼èŒƒå›´[min, max]å’Œå•†å“æ€»æ•°
     */</span>
    <span class="hljs-keyword">public</span> PriceStatistics <span class="hljs-title function_">getStatistics</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (priceTree.isEmpty()) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PriceStatistics</span>(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-number">0</span>);
        }
        
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">minPrice</span> <span class="hljs-operator">=</span> priceTree.firstKey();
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">maxPrice</span> <span class="hljs-operator">=</span> priceTree.lastKey();
        <span class="hljs-type">int</span> <span class="hljs-variable">totalProducts</span> <span class="hljs-operator">=</span> priceTree.values().stream()
            .mapToInt(List::size)
            .sum();
        
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PriceStatistics</span>(minPrice, maxPrice, totalProducts);
    }
}

<span class="hljs-comment">/**
 * å•†å“å®ä½“
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> {
    <span class="hljs-keyword">private</span> String id;           <span class="hljs-comment">// å•†å“ID</span>
    <span class="hljs-keyword">private</span> String name;         <span class="hljs-comment">// å•†å“åç§°</span>
    <span class="hljs-keyword">private</span> BigDecimal price;    <span class="hljs-comment">// ä»·æ ¼</span>
    <span class="hljs-keyword">private</span> BigDecimal score;    <span class="hljs-comment">// è¯„åˆ†</span>
    
    <span class="hljs-comment">// æ„é€ æ–¹æ³•å’Œgetter/setter</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Product</span><span class="hljs-params">(String id, String name, BigDecimal price, BigDecimal score)</span> {
        <span class="hljs-built_in">this</span>.id = id;
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.price = price;
        <span class="hljs-built_in">this</span>.score = score;
    }
    
    <span class="hljs-keyword">public</span> BigDecimal <span class="hljs-title function_">getPrice</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> price; }
    <span class="hljs-keyword">public</span> BigDecimal <span class="hljs-title function_">getScore</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> score; }
    <span class="hljs-comment">// ... å…¶ä»–getter/setter</span>
}

<span class="hljs-comment">/**
 * ä»·æ ¼ç»Ÿè®¡ä¿¡æ¯
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PriceStatistics</span> {
    <span class="hljs-keyword">private</span> BigDecimal minPrice;
    <span class="hljs-keyword">private</span> BigDecimal maxPrice;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> totalProducts;
    
    <span class="hljs-comment">// æ„é€ æ–¹æ³•å’Œgetter/setter</span>
}
</code></pre>
<p><strong>ä¼ªä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">ALGORITHM <span class="hljs-built_in">AddProduct</span>(ProductPriceIndex index, product)
    <span class="hljs-comment">// è¾“å…¥ï¼šä»·æ ¼ç´¢å¼•indexï¼Œå•†å“product</span>
    <span class="hljs-comment">// è¾“å‡ºï¼šæ›´æ–°åçš„ç´¢å¼•</span>
    
    price â† product<span class="hljs-selector-class">.price</span>
    
    IF index<span class="hljs-selector-class">.priceTree</span><span class="hljs-selector-class">.containsKey</span>(price) THEN
        index<span class="hljs-selector-class">.priceTree</span><span class="hljs-selector-attr">[price]</span><span class="hljs-selector-class">.add</span>(product)
    ELSE
        index<span class="hljs-selector-class">.priceTree</span><span class="hljs-selector-attr">[price]</span> â† <span class="hljs-built_in">NewList</span>(product)

ALGORITHM <span class="hljs-built_in">QueryByPriceRange</span>(ProductPriceIndex index, minPrice, maxPrice)
    <span class="hljs-comment">// è¾“å…¥ï¼šä»·æ ¼ç´¢å¼•indexï¼Œä»·æ ¼åŒºé—´[minPrice, maxPrice]</span>
    <span class="hljs-comment">// è¾“å‡ºï¼šä»·æ ¼åŒºé—´å†…çš„æ‰€æœ‰å•†å“</span>
    
    result â† <span class="hljs-built_in">EmptyList</span>()
    
    <span class="hljs-comment">// è·å–ä»·æ ¼åŒºé—´å†…çš„å­æ˜ å°„ï¼ˆO(log n)ï¼‰</span>
    subMap â† index<span class="hljs-selector-class">.priceTree</span><span class="hljs-selector-class">.subMap</span>(minPrice, true, maxPrice, true)
    
    <span class="hljs-comment">// åˆå¹¶æ‰€æœ‰å•†å“åˆ—è¡¨ï¼ˆO(k)ï¼Œkä¸ºç»“æœæ•°é‡ï¼‰</span>
    FOR EACH products IN subMap<span class="hljs-selector-class">.values</span> DO
        result<span class="hljs-selector-class">.addAll</span>(products)
    
    RETURN result
</code></pre>
<h4 data-id="heading-34">3.4 è½åœ°æ•ˆæœ</h4>
<p><strong>æ€§èƒ½æå‡</strong>ï¼š</p>



































<table><thead><tr><th>æŒ‡æ ‡</th><th>ä¼˜åŒ–å‰ï¼ˆçº¿æ€§éå†ï¼‰</th><th>ä¼˜åŒ–åï¼ˆçº¢é»‘æ ‘ï¼‰</th><th>æå‡</th></tr></thead><tbody><tr><td>æŸ¥è¯¢å“åº”æ—¶é—´</td><td>1.2ç§’</td><td>0.03ç§’</td><td>é™ä½97.5%</td></tr><tr><td>æ—¶é—´å¤æ‚åº¦</td><td>O(n)</td><td>O(log n + k)</td><td>æ˜¾è‘—æå‡</td></tr><tr><td>CPUä½¿ç”¨ç‡</td><td>80%</td><td>15%</td><td>é™ä½81%</td></tr><tr><td>æ”¯æŒå¹¶å‘æŸ¥è¯¢</td><td>100æ¬¡/ç§’</td><td>2000æ¬¡/ç§’</td><td>æå‡20å€</td></tr></tbody></table>
<p><strong>å®é™…æ•°æ®</strong>ï¼ˆ100ä¸‡å•†å“ï¼Œè¿è¡Œ3ä¸ªæœˆï¼‰ï¼š</p>
<ul>
<li>âœ… å•†å“æ•°é‡100ä¸‡æ—¶ï¼Œä»·æ ¼åŒºé—´æŸ¥è¯¢å“åº”æ—¶é—´ä»1.2ç§’é™è‡³0.03ç§’</li>
<li>âœ… æ”¯æŒæ¯ç§’2000æ¬¡çš„å¹¶å‘æŸ¥è¯¢</li>
<li>âœ… æ»¡è¶³å¤§ä¿ƒæœŸé—´çš„ç­›é€‰éœ€æ±‚</li>
<li>âœ… ç³»ç»Ÿç¨³å®šæ€§ä»99.9%æå‡è‡³99.99%</li>
<li>âœ… å†…å­˜å ç”¨å¢åŠ çº¦10%ï¼ˆå¯æ¥å—ï¼‰</li>
</ul>
<p><strong>å®é™…åº”ç”¨</strong>ï¼š</p>
<ul>
<li>ç”µå•†å¹³å°ï¼šå•†å“ä»·æ ¼ç­›é€‰ã€ä»·æ ¼æ’åº</li>
<li>é‡‘èç³»ç»Ÿï¼šä»·æ ¼åŒºé—´æŸ¥è¯¢ã€ä»·æ ¼ç»Ÿè®¡</li>
<li>æ•°æ®åˆ†æï¼šä»·æ ¼åˆ†å¸ƒåˆ†æã€ä»·æ ¼è¶‹åŠ¿æŸ¥è¯¢</li>
</ul>
<p><strong>å­¦æœ¯å‚è€ƒ</strong>ï¼š</p>
<ul>
<li>CLRS Chapter 13: Red-Black Trees</li>
<li>Java TreeMapæºç ï¼šjava.util.TreeMap</li>
<li>Google Research. (2023). "Efficient Range Queries in Large-Scale E-commerce Systems."</li>
</ul>
<h2 data-id="heading-35">ä¹ã€BSTçš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-36">1. ä¸å¹³è¡¡é—®é¢˜</h3>
<p>å½“æ’å…¥æœ‰åºæ•°æ®æ—¶ï¼ŒBSTä¼šé€€åŒ–ä¸ºé“¾è¡¨ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">æ’å…¥åºåˆ—: 1, 2, 3, 4, 5</span>

<span class="hljs-section">BSTç»“æ„:</span>
1
 \
  2
   \
    3
     \
      4
       \
        5

è¿™ç›¸å½“äºé“¾è¡¨ï¼ŒæŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦å˜ä¸ºO(n)
</code></pre>
<h3 data-id="heading-37">2. è§£å†³æ–¹æ¡ˆ</h3>
<ul>
<li><strong>å¹³è¡¡BST</strong>: AVLæ ‘ã€çº¢é»‘æ ‘ã€Bæ ‘</li>
<li><strong>è‡ªå¹³è¡¡</strong>: åœ¨æ’å…¥å’Œåˆ é™¤æ—¶è¿›è¡Œæ—‹è½¬æ“ä½œ</li>
<li><strong>éšæœºåŒ–</strong>: éšæœºåŒ–BSTï¼ˆTreapï¼‰</li>
</ul>
<h2 data-id="heading-38">åã€æ€»ç»“</h2>
<p>äºŒå‰æœç´¢æ ‘æ˜¯æœ‰åºæ•°æ®ç»“æ„çš„æ ¸å¿ƒï¼Œé€šè¿‡"å·¦å°å³å¤§"çš„æ€§è´¨å®ç°äº†é«˜æ•ˆçš„æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ“ä½œã€‚è™½ç„¶æ™®é€šBSTå¯èƒ½ä¸å¹³è¡¡ï¼Œä½†é€šè¿‡å¹³è¡¡BSTï¼ˆå¦‚AVLæ ‘ã€çº¢é»‘æ ‘ï¼‰å¯ä»¥ä¿è¯O(log n)çš„æ€§èƒ½ã€‚</p>
<h3 data-id="heading-39">å…³é”®è¦ç‚¹</h3>
<ol>
<li><strong>æœ‰åºæ€§</strong>ï¼šä¸­åºéå†å¾—åˆ°æœ‰åºåºåˆ—ï¼Œè¿™æ˜¯BSTçš„æ ¸å¿ƒä¼˜åŠ¿</li>
<li><strong>å¹³è¡¡æ€§</strong>ï¼šæ™®é€šBSTå¯èƒ½ä¸å¹³è¡¡ï¼Œéœ€è¦å¹³è¡¡æœºåˆ¶ä¿è¯æ€§èƒ½</li>
<li><strong>åŠ¨æ€æ€§</strong>ï¼šæ”¯æŒåŠ¨æ€æ’å…¥å’Œåˆ é™¤ï¼Œé€‚åˆåŠ¨æ€æ•°æ®</li>
<li><strong>åº”ç”¨å¹¿æ³›</strong>ï¼šä»æ•°æ®åº“ç´¢å¼•åˆ°æœ‰åºé›†åˆï¼ŒBSTæ— å¤„ä¸åœ¨</li>
</ol>
<h3 data-id="heading-40">å»¶ä¼¸é˜…è¯»</h3>
<p><strong>æ ¸å¿ƒæ•™æ</strong>ï¼š</p>
<ol>
<li>
<p>Knuth, D. E. (1997). <em>The Art of Computer Programming, Volume 3: Sorting and Searching</em> (2nd ed.). Addison-Wesley.</p>
<ul>
<li>Section 6.2.2: Binary Tree Searching - BSTçš„è¯¦ç»†åˆ†æ</li>
</ul>
</li>
<li>
<p>Cormen, T. H., Leiserson, C. E., Rivest, R. L., &amp; Stein, C. (2009). <em>Introduction to Algorithms</em> (3rd ed.). MIT Press.</p>
<ul>
<li>Chapter 12: Binary Search Trees - BSTçš„åŸºç¡€ç†è®º</li>
<li>Chapter 13: Red-Black Trees - è‡ªå¹³è¡¡BST</li>
</ul>
</li>
<li>
<p>Weiss, M. A. (2011). <em>Data Structures and Algorithm Analysis in Java</em> (3rd ed.). Pearson.</p>
<ul>
<li>Chapter 4: Trees - BSTçš„å®ç°å’Œåˆ†æ</li>
</ul>
</li>
</ol>
<p><strong>å·¥ä¸šç•ŒæŠ€æœ¯æ–‡æ¡£</strong>ï¼š</p>
<ol>
<li>
<p>Oracle Java Documentation: TreeMap Class</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.oracle.com%2Fjavase%2F8%2Fdocs%2Fapi%2Fjava%2Futil%2FTreeMap.html" target="_blank" title="https://docs.oracle.com/javase/8/docs/api/java/util/TreeMap.html" ref="nofollow noopener noreferrer">docs.oracle.com/javase/8/doâ€¦</a></li>
</ul>
</li>
<li>
<p>MySQLå®˜æ–¹æ–‡æ¡£ï¼šInnoDB Storage Engine</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.mysql.com%2Fdoc%2Frefman%2F8.0%2Fen%2Finnodb-storage-engine.html" target="_blank" title="https://dev.mysql.com/doc/refman/8.0/en/innodb-storage-engine.html" ref="nofollow noopener noreferrer">dev.mysql.com/doc/refman/â€¦</a></li>
</ul>
</li>
<li>
<p>Java Source Code: TreeMap Implementation</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopenjdk%2Fjdk%2Fblob%2Fmaster%2Fsrc%2Fjava.base%2Fshare%2Fclasses%2Fjava%2Futil%2FTreeMap.java" target="_blank" title="https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/TreeMap.java" ref="nofollow noopener noreferrer">github.com/openjdk/jdkâ€¦</a></li>
</ul>
</li>
<li>
<p>MySQL Source Code: InnoDB B+ Tree</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmysql%2Fmysql-server%2Ftree%2F8.0%2Fstorage%2Finnobase" target="_blank" title="https://github.com/mysql/mysql-server/tree/8.0/storage/innobase" ref="nofollow noopener noreferrer">github.com/mysql/mysqlâ€¦</a></li>
</ul>
</li>
</ol>
<p><strong>æŠ€æœ¯åšå®¢ä¸ç ”ç©¶</strong>ï¼š</p>
<ol>
<li>
<p>Google Research. (2023). "Efficient Range Queries in Large-Scale E-commerce Systems."</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fresearch.google%2F" target="_blank" title="https://research.google/" ref="nofollow noopener noreferrer">research.google/</a></li>
</ul>
</li>
<li>
<p>Amazon Science Blog. (2019). "Product Search Optimization Using Tree Structures."</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.amazon.science%2F" target="_blank" title="https://www.amazon.science/" ref="nofollow noopener noreferrer">www.amazon.science/</a></li>
</ul>
</li>
</ol>
<h2 data-id="heading-41">åä¸€ã€ä¼˜ç¼ºç‚¹åˆ†æ</h2>
<h3 data-id="heading-42">ä¼˜ç‚¹</h3>
<ol>
<li><strong>æŸ¥æ‰¾é«˜æ•ˆ</strong>ï¼šå¹³è¡¡æ—¶O(log n)ï¼Œæ¯”çº¿æ€§æŸ¥æ‰¾å¿«å¾—å¤š</li>
<li><strong>æœ‰åºæ€§</strong>ï¼šä¸­åºéå†å¾—åˆ°æœ‰åºåºåˆ—ï¼Œæ”¯æŒèŒƒå›´æŸ¥è¯¢</li>
<li><strong>åŠ¨æ€æ€§</strong>ï¼šæ”¯æŒåŠ¨æ€æ’å…¥å’Œåˆ é™¤ï¼Œæ— éœ€é‡å»º</li>
<li><strong>çµæ´»æ€§</strong>ï¼šå¯ä»¥æ‰©å±•ä¸ºå„ç§å¹³è¡¡BST</li>
</ol>
<h3 data-id="heading-43">ç¼ºç‚¹</h3>
<ol>
<li><strong>å¯èƒ½ä¸å¹³è¡¡</strong>ï¼šæœ€åæƒ…å†µé€€åŒ–ä¸ºO(n)ï¼Œéœ€è¦å¹³è¡¡æœºåˆ¶</li>
<li><strong>æ²¡æœ‰å¹³è¡¡ä¿è¯</strong>ï¼šæ™®é€šBSTæ²¡æœ‰è‡ªå¹³è¡¡èƒ½åŠ›</li>
<li><strong>å†…å­˜å¼€é”€</strong>ï¼šæ¯ä¸ªèŠ‚ç‚¹éœ€è¦å­˜å‚¨æŒ‡é’ˆï¼Œç©ºé—´å¼€é”€è¾ƒå¤§</li>
<li><strong>å®ç°å¤æ‚</strong>ï¼šå¹³è¡¡BSTçš„å®ç°ç›¸å¯¹å¤æ‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ¨¡å‹åŸç†å‰–æâ€”â€”çŸ©é˜µå¸æ”¶ä¼˜åŒ–ï¼šLLMæ¨ç†åŠ é€Ÿçš„æ ¸å¿ƒåŸç†ä¸å®è·µ]]></title>    <link>https://juejin.cn/post/7587343333329256482</link>    <guid>https://juejin.cn/post/7587343333329256482</guid>    <pubDate>2025-12-25T05:41:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587343333329256482" data-draft-id="7587342664078016527" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ¨¡å‹åŸç†å‰–æâ€”â€”çŸ©é˜µå¸æ”¶ä¼˜åŒ–ï¼šLLMæ¨ç†åŠ é€Ÿçš„æ ¸å¿ƒåŸç†ä¸å®è·µ"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2025-12-25T05:41:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‰¾é†’"/> <meta itemprop="url" content="https://juejin.cn/user/708512558088669"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ¨¡å‹åŸç†å‰–æâ€”â€”çŸ©é˜µå¸æ”¶ä¼˜åŒ–ï¼šLLMæ¨ç†åŠ é€Ÿçš„æ ¸å¿ƒåŸç†ä¸å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/708512558088669/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‰¾é†’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T05:41:10.000Z" title="Thu Dec 25 2025 05:41:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    23
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>çŸ©é˜µå¸æ”¶ä¼˜åŒ–æ˜¯é’ˆå¯¹Transformeræ¶æ„å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„<strong>æ— ç²¾åº¦æŸå¤±æ¨ç†åŠ é€ŸæŠ€æœ¯</strong>ï¼Œæ ¸å¿ƒé€šè¿‡åˆ©ç”¨çŸ©é˜µä¹˜æ³•ç»“åˆå¾‹å’Œæ¨¡å‹å‚æ•°çš„å›ºå®šæ€§ï¼Œå°†å†—ä½™çš„åœ¨çº¿çŸ©é˜µä¹˜æ³•æå‰ç¦»çº¿é¢„è®¡ç®—ï¼Œä»è€Œå‡å°‘æ¨ç†æ—¶çš„è®¡ç®—é‡ã€é™ä½å»¶è¿Ÿã€‚è¯¥æŠ€æœ¯å°¤å…¶é€‚ç”¨äºè‡ªæ³¨æ„åŠ›æœºåˆ¶çš„è®¡ç®—ç“¶é¢ˆä¼˜åŒ–ï¼Œåœ¨ä¸æ”¹å˜æ¨¡å‹è¾“å‡ºç»“æœçš„å‰æä¸‹ï¼Œå¯å®ç°çº¦1.7å€çš„æ¨ç†é€Ÿåº¦æå‡ï¼Œæ˜¯LLMæœ¬åœ°åŒ–éƒ¨ç½²ã€é«˜å¹¶å‘APIæœåŠ¡ç­‰åœºæ™¯çš„å…³é”®ä¼˜åŒ–æ‰‹æ®µä¹‹ä¸€ã€‚</p>
<h2 data-id="heading-1">å…ˆæ˜ç¡®æ ¸å¿ƒèƒŒæ™¯ï¼šTransformerè‡ªæ³¨æ„åŠ›çš„æ ‡å‡†è®¡ç®—æµç¨‹</h2>
<p>è¦ç†è§£çŸ©é˜µå¸æ”¶ä¼˜åŒ–çš„ä»·å€¼ï¼Œéœ€å…ˆå›é¡¾Transformerè‡ªæ³¨æ„åŠ›æœºåˆ¶çš„æ ¸å¿ƒè®¡ç®—æ­¥éª¤ã€‚å‡è®¾æ¨¡å‹è¾“å…¥åºåˆ—ç»è¿‡è¯åµŒå…¥+ä½ç½®ç¼–ç åå¾—åˆ°ç‰¹å¾çŸ©é˜µ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span></span>ï¼ˆç»´åº¦ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo>Ã—</mo><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">LÃ—d_{model}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"/><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi></mrow><annotation encoding="application/x-tex">L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">L</span></span></span></span></span> ä¸ºåºåˆ—é•¿åº¦ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">d_{model}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ä¸ºæ¨¡å‹éšè—å±‚ç»´åº¦ï¼‰ï¼Œè‡ªæ³¨æ„åŠ›çš„æ ‡å‡†è®¡ç®—é€»è¾‘å¦‚ä¸‹ï¼š</p>
<h3 data-id="heading-2">1. æ ¸å¿ƒç¬¦å·å®šä¹‰</h3>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mi>q</mi></msub><mo separator="true">,</mo><msub><mi>C</mi><mi>k</mi></msub><mo separator="true">,</mo><msub><mi>C</mi><mi>v</mi></msub></mrow><annotation encoding="application/x-tex">C_q, C_k, C_v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼šè¾“å…¥ç‰¹å¾ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span></span>åˆ†åˆ«å¯¹åº”æŸ¥è¯¢ï¼ˆQueryï¼‰ã€é”®ï¼ˆKeyï¼‰ã€å€¼ï¼ˆValueï¼‰çš„è¾“å…¥ç‰¹å¾ï¼ˆå®é™…ä¸­é€šå¸¸æ˜¯åŒä¸€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span></span> ç»è¿‡ä¸åŒçº¿æ€§å±‚æŠ•å½±ï¼Œæ­¤å¤„åˆ†å¼€è¡¨ç¤ºæ›´æ¸…æ™°ï¼‰ï¼›</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>q</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">W_q^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2244em;vertical-align:-0.3831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span/></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>k</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">W_k^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1244em;vertical-align:-0.2831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>v</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">W_v^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0883em;vertical-align:-0.247em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span/></span></span></span></span></span></span></span></span></span>ï¼šæŸ¥è¯¢ã€é”®ã€å€¼çš„<strong>ä¸ŠæŠ•å½±çŸ©é˜µ</strong>ï¼ˆæ¨¡å‹é¢„è®­ç»ƒå¥½çš„å›ºå®šå‚æ•°ï¼Œç»´åº¦ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mo>Ã—</mo><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">d_{model}Ã—d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> ä¸ºæ³¨æ„åŠ›å¤´çš„ç»´åº¦ï¼Œæ»¡è¶³ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub><mo>=</mo><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mi mathvariant="normal">/</mi><mi>n</mi><mi>u</mi><msub><mi>m</mi><mrow><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>s</mi></mrow></msub></mrow><annotation encoding="application/x-tex">d_k = d_{model} / num_{heads}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">/</span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>)ï¼›</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼šæ³¨æ„åŠ›å¤´ç»´åº¦ï¼Œç”¨äºç¼©æ”¾æ³¨æ„åŠ›åˆ†æ•°ï¼ˆé¿å…æ•°å€¼è¿‡å¤§ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-3">2. æ ‡å‡†è‡ªæ³¨æ„åŠ›è®¡ç®—æ­¥éª¤ï¼ˆ3æ¬¡çŸ©é˜µä¹˜æ³•ï¼‰</h3>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow/></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mn>1.</mn><mtext>æŠ•å½±è®¡ç®—ï¼šÂ </mtext><mi>Q</mi><mo>=</mo><msub><mi>C</mi><mi>q</mi></msub><mo>â‹…</mo><msubsup><mi>W</mi><mi>q</mi><mi>U</mi></msubsup><mo separator="true">,</mo><mtext>Â </mtext><mi>K</mi><mo>=</mo><msub><mi>C</mi><mi>k</mi></msub><mo>â‹…</mo><msubsup><mi>W</mi><mi>k</mi><mi>U</mi></msubsup><mo separator="true">,</mo><mtext>Â </mtext><mi>V</mi><mo>=</mo><msub><mi>C</mi><mi>v</mi></msub><mo>â‹…</mo><msubsup><mi>W</mi><mi>v</mi><mi>U</mi></msubsup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow/></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mn>2.</mn><mtext>æ³¨æ„åŠ›åˆ†æ•°è®¡ç®—ï¼šÂ </mtext><mi>A</mi><mi>t</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>=</mo><mi>s</mi><mi>o</mi><mi>f</mi><mi>t</mi><mi>m</mi><mi>a</mi><mi>x</mi><mrow><mo fence="true">(</mo><mfrac><mrow><mi>Q</mi><mo>â‹…</mo><msup><mi>K</mi><mi>T</mi></msup></mrow><msqrt><msub><mi>d</mi><mi>k</mi></msub></msqrt></mfrac><mo fence="true">)</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow/></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mn>3.</mn><mtext>è¾“å‡ºè®¡ç®—ï¼šÂ </mtext><mi>O</mi><mi>u</mi><mi>t</mi><mi>p</mi><mi>u</mi><mi>t</mi><mo>=</mo><mi>A</mi><mi>t</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>â‹…</mo><mi>V</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{align*}
&amp;1. \text{æŠ•å½±è®¡ç®—ï¼š} \ Q = C_q \cdot W_q^U, \ K = C_k \cdot W_k^U, \ V = C_v \cdot W_v^U \\
&amp;2. \text{æ³¨æ„åŠ›åˆ†æ•°è®¡ç®—ï¼š} \ Attention = softmax\left( \frac{Q \cdot K^T}{\sqrt{d_k}} \right) \\
&amp;3. \text{è¾“å‡ºè®¡ç®—ï¼š} \ Output = Attention \cdot V
\end{align*}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:5.8428em;vertical-align:-2.6714em;"/><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.1714em;"><span style="top:-5.7984em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"/></span><span style="top:-3.597em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"/></span><span style="top:-1.5069em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"/></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.6714em;"><span/></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.1714em;"><span style="top:-5.7984em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"><span class="mord"/><span class="mord">1.</span><span class="mord text"><span class="mord cjk_fallback">æŠ•å½±è®¡ç®—ï¼š</span></span><span class="mspace">Â </span><span class="mord mathnormal">Q</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span/></span></span></span></span></span></span></span><span style="top:-3.597em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"><span class="mord"/><span class="mord">2.</span><span class="mord text"><span class="mord cjk_fallback">æ³¨æ„åŠ›åˆ†æ•°è®¡ç®—ï¼š</span></span><span class="mspace">Â </span><span class="mord mathnormal">A</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord mathnormal">so</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">t</span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5183em;"><span style="top:-2.2528em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8572em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-2.8172em;"><span class="pstrut" style="height:3em;"/><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702&#10;c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14&#10;c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54&#10;c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10&#10;s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429&#10;c69,-144,104.5,-217.7,106.5,-221&#10;l0 -0&#10;c5.3,-9.3,12,-14,20,-14&#10;H400000v40H845.2724&#10;s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7&#10;c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z&#10;M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1828em;"><span/></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.93em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span></span></span><span style="top:-1.5069em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"><span class="mord"/><span class="mord">3.</span><span class="mord text"><span class="mord cjk_fallback">è¾“å‡ºè®¡ç®—ï¼š</span></span><span class="mspace">Â </span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mord mathnormal">u</span><span class="mord mathnormal">tp</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord mathnormal">A</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.6714em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<p><strong>å…³é”®ç“¶é¢ˆ</strong>ï¼šæ­¥éª¤1ä¸­éœ€åŒæ—¶è®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord mathnormal">Q</span></span></span></span></span> å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span></span> çš„æŠ•å½±ï¼ˆ2æ¬¡ç‹¬ç«‹çš„çŸ©é˜µä¹˜æ³•ï¼‰ï¼Œæ­¥éª¤2ä¸­è¿˜éœ€è®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><mo separator="true">â‹…</mo><msup><mi>K</mi><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">QÂ·K^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0358em;vertical-align:-0.1944em;"/><span class="mord mathnormal">Q</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span>ï¼Œå½“ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi></mrow><annotation encoding="application/x-tex">L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">L</span></span></span></span></span>ï¼ˆåºåˆ—é•¿åº¦ï¼‰æˆ– <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">d_{model}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆéšè—å±‚ç»´åº¦ï¼‰è¾ƒå¤§æ—¶ï¼ˆå¦‚LLMä¸­ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mo>=</mo><mn>2048</mn><mi mathvariant="normal">/</mi><mn>4096</mn></mrow><annotation encoding="application/x-tex">d_{model}=2048/4096</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">2048/4096</span></span></span></span></span>ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo>=</mo><mn>2048</mn></mrow><annotation encoding="application/x-tex">L=2048</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">2048</span></span></span></span></span>ï¼‰ï¼Œè¿™ä¸‰æ­¥çš„çŸ©é˜µä¹˜æ³•ä¼šå æ®æ¨ç†æ—¶çš„ä¸»è¦è®¡ç®—å¼€é”€å’Œå†…å­˜è®¿é—®æˆæœ¬ã€‚</p>
<h2 data-id="heading-4">çŸ©é˜µå¸æ”¶ä¼˜åŒ–çš„æ ¸å¿ƒé€»è¾‘ï¼šé¢„ä¹˜æŠ•å½±çŸ©é˜µï¼Œçœå»åœ¨çº¿è®¡ç®—</h2>
<p>çŸ©é˜µå¸æ”¶ä¼˜åŒ–çš„æ ¸å¿ƒçµæ„Ÿæ¥è‡ªä¸¤ä¸ªå…³é”®ç‚¹ï¼š</p>
<ol>
<li><strong>çŸ©é˜µä¹˜æ³•ç»“åˆå¾‹</strong>ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>A</mi><mo separator="true">â‹…</mo><mi>B</mi><mo stretchy="false">)</mo><mo separator="true">â‹…</mo><mi>C</mi><mo>=</mo><mi>A</mi><mo separator="true">â‹…</mo><mo stretchy="false">(</mo><mi>B</mi><mo separator="true">â‹…</mo><mi>C</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(AÂ·B)Â·C = AÂ·(BÂ·C)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose">)</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">A</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mclose">)</span></span></span></span></span>ï¼Œå…è®¸è°ƒæ•´è®¡ç®—é¡ºåºï¼›</li>
<li><strong>æŠ•å½±çŸ©é˜µå›ºå®šæ€§</strong>ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>q</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">W_q^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2244em;vertical-align:-0.3831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span/></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>k</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">W_k^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1244em;vertical-align:-0.2831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span></span></span></span></span> æ˜¯æ¨¡å‹é¢„è®­ç»ƒå¥½çš„å‚æ•°ï¼Œæ¨ç†æ—¶å®Œå…¨ä¸å˜ï¼Œå¯<strong>ç¦»çº¿é¢„è®¡ç®—</strong>å…¶ç»„åˆç»“æœï¼Œæ— éœ€åœ¨çº¿å®æ—¶è®¡ç®—ã€‚</li>
</ol>
<h3 data-id="heading-5">1. ä¼˜åŒ–æ ¸å¿ƒï¼šé¢„è®¡ç®—åˆå¹¶æŠ•å½±çŸ©é˜µ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span></h3>
<p>å°†æŸ¥è¯¢æŠ•å½±çŸ©é˜µ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>q</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">W_q^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2244em;vertical-align:-0.3831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span/></span></span></span></span></span></span></span></span></span> ä¸é”®æŠ•å½±çŸ©é˜µçš„è½¬ç½® <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msubsup><mi>W</mi><mi>k</mi><mi>U</mi></msubsup><msup><mo stretchy="false">)</mo><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">(W_k^U)^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1244em;vertical-align:-0.2831em;"/><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span> æå‰ç¦»çº¿ç›¸ä¹˜ï¼Œå¾—åˆ°åˆå¹¶åçš„æŠ•å½±çŸ©é˜µ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span>ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub><mo>=</mo><msubsup><mi>W</mi><mi>q</mi><mi>U</mi></msubsup><mo>â‹…</mo><mo stretchy="false">(</mo><msubsup><mi>W</mi><mi>k</mi><mi>U</mi></msubsup><msup><mo stretchy="false">)</mo><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">W_{qk} = W_q^U \cdot (W_k^U)^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.2744em;vertical-align:-0.3831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.1413em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span/></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span></div>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span> ç»´åº¦ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mo>Ã—</mo><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">d_{model}Ã—d_{model}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆå›  <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>q</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">W_q^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2244em;vertical-align:-0.3831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span/></span></span></span></span></span></span></span></span></span>æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mo>Ã—</mo><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">d_{model}Ã—d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msubsup><mi>W</mi><mi>k</mi><mi>U</mi></msubsup><msup><mo stretchy="false">)</mo><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">(W_k^U)^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1244em;vertical-align:-0.2831em;"/><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span> æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub><mo>Ã—</mo><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">d_kÃ—d_{model}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œä¹˜ç§¯åä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mo>Ã—</mo><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">d_{model}Ã—d_{model}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼‰ï¼›</li>
<li>é¢„è®¡ç®—æ—¶æœºï¼šæ¨¡å‹åŠ è½½å‰ã€éƒ¨ç½²æ‰“åŒ…æ—¶ï¼ˆä»…éœ€è®¡ç®—ä¸€æ¬¡ï¼Œåç»­æ¨ç†ç›´æ¥å¤ç”¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span>ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-6">2. ä¼˜åŒ–åçš„è‡ªæ³¨æ„åŠ›è®¡ç®—æ­¥éª¤ï¼ˆ2æ¬¡çŸ©é˜µä¹˜æ³•ï¼‰</h3>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow/></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mn>1.</mn><mtext>ç®€åŒ–æŠ•å½±è®¡ç®—ï¼šÂ </mtext><msup><mi>Q</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>=</mo><msub><mi>C</mi><mi>q</mi></msub><mo>â‹…</mo><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub><mo separator="true">,</mo><mtext>Â </mtext><mi>V</mi><mo>=</mo><msub><mi>C</mi><mi>v</mi></msub><mo>â‹…</mo><msubsup><mi>W</mi><mi>v</mi><mi>U</mi></msubsup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow/></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mn>2.</mn><mtext>æ³¨æ„åŠ›åˆ†æ•°è®¡ç®—ï¼šÂ </mtext><mi>A</mi><mi>t</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>=</mo><mi>s</mi><mi>o</mi><mi>f</mi><mi>t</mi><mi>m</mi><mi>a</mi><mi>x</mi><mrow><mo fence="true">(</mo><mfrac><mrow><msup><mi>Q</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>â‹…</mo><msubsup><mi>C</mi><mi>k</mi><mi>T</mi></msubsup></mrow><msqrt><msub><mi>d</mi><mi>k</mi></msub></msqrt></mfrac><mo fence="true">)</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow/></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mn>3.</mn><mtext>è¾“å‡ºè®¡ç®—ï¼šÂ </mtext><mi>O</mi><mi>u</mi><mi>t</mi><mi>p</mi><mi>u</mi><mi>t</mi><mo>=</mo><mi>A</mi><mi>t</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>â‹…</mo><mi>V</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{align*}
&amp;1. \text{ç®€åŒ–æŠ•å½±è®¡ç®—ï¼š} \ Q' = C_q \cdot W_{qk}, \ V = C_v \cdot W_v^U \\
&amp;2. \text{æ³¨æ„åŠ›åˆ†æ•°è®¡ç®—ï¼š} \ Attention = softmax\left( \frac{Q' \cdot C_k^T}{\sqrt{d_k}} \right) \\
&amp;3. \text{è¾“å‡ºè®¡ç®—ï¼š} \ Output = Attention \cdot V
\end{align*}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:5.8197em;vertical-align:-2.6598em;"/><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.1598em;"><span style="top:-5.7868em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"/></span><span style="top:-3.6085em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"/></span><span style="top:-1.5185em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"/></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.6598em;"><span/></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.1598em;"><span style="top:-5.7868em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"><span class="mord"/><span class="mord">1.</span><span class="mord text"><span class="mord cjk_fallback">ç®€åŒ–æŠ•å½±è®¡ç®—ï¼š</span></span><span class="mspace">Â </span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span/></span></span></span></span></span></span></span><span style="top:-3.6085em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"><span class="mord"/><span class="mord">2.</span><span class="mord text"><span class="mord cjk_fallback">æ³¨æ„åŠ›åˆ†æ•°è®¡ç®—ï¼š</span></span><span class="mspace">Â </span><span class="mord mathnormal">A</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord mathnormal">so</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">t</span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5183em;"><span style="top:-2.2528em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8572em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-2.8172em;"><span class="pstrut" style="height:3em;"/><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702&#10;c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14&#10;c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54&#10;c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10&#10;s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429&#10;c69,-144,104.5,-217.7,106.5,-221&#10;l0 -0&#10;c5.3,-9.3,12,-14,20,-14&#10;H400000v40H845.2724&#10;s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7&#10;c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z&#10;M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1828em;"><span/></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.93em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span></span></span><span style="top:-1.5185em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"><span class="mord"/><span class="mord">3.</span><span class="mord text"><span class="mord cjk_fallback">è¾“å‡ºè®¡ç®—ï¼š</span></span><span class="mspace">Â </span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mord mathnormal">u</span><span class="mord mathnormal">tp</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord mathnormal">A</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.6598em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<h3 data-id="heading-7">3. ä¼˜åŒ–å‰åå¯¹æ¯”ï¼šå‡å°‘1æ¬¡å…³é”®çŸ©é˜µä¹˜æ³•</h3>





























<table><thead><tr><th>é˜¶æ®µ</th><th>æ ‡å‡†è®¡ç®—</th><th>çŸ©é˜µå¸æ”¶ä¼˜åŒ–</th><th>æ ¸å¿ƒå·®å¼‚</th></tr></thead><tbody><tr><td>æŠ•å½±é˜¶æ®µ</td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><mo>=</mo><msub><mi>C</mi><mi>q</mi></msub><mo separator="true">â‹…</mo><msubsup><mi>W</mi><mi>q</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">Q = C_qÂ·W_q^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord mathnormal">Q</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.2244em;vertical-align:-0.3831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆ1æ¬¡ï¼‰+ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>=</mo><msub><mi>C</mi><mi>k</mi></msub><mo separator="true">â‹…</mo><msubsup><mi>W</mi><mi>k</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">K = C_kÂ·W_k^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.1244em;vertical-align:-0.2831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆ1æ¬¡ï¼‰</td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Q</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>=</mo><msub><mi>C</mi><mi>q</mi></msub><mo separator="true">â‹…</mo><msub><mi>W</mi><mi>q</mi></msub><mi>k</mi></mrow><annotation encoding="application/x-tex">Q' = C_qÂ·W_qk</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9463em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span>ï¼ˆ1æ¬¡ï¼‰</td><td>çœå» <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>=</mo><msub><mi>C</mi><mi>k</mi></msub><mo separator="true">â‹…</mo><msubsup><mi>W</mi><mi>k</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">K = C_kÂ·W_k^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.1244em;vertical-align:-0.2831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span></span></span></span></span> çš„åœ¨çº¿è®¡ç®—</td></tr><tr><td>æ³¨æ„åŠ›åˆ†æ•°é˜¶æ®µ</td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><mo separator="true">â‹…</mo><msup><mi>K</mi><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">QÂ·K^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0358em;vertical-align:-0.1944em;"/><span class="mord mathnormal">Q</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span>ï¼ˆ1æ¬¡ï¼‰</td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Q</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo separator="true">â‹…</mo><msubsup><mi>C</mi><mi>k</mi><mi>T</mi></msubsup></mrow><annotation encoding="application/x-tex">Q'Â·C_k^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1244em;vertical-align:-0.2831em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆ1æ¬¡ï¼‰</td><td>ç”¨é¢„è®¡ç®—çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>q</mi></msub><mi>k</mi></mrow><annotation encoding="application/x-tex">W_qk</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span>æ›¿ä»£ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>q</mi><mi>U</mi></msubsup><mo separator="true">â‹…</mo><mo stretchy="false">(</mo><msubsup><mi>W</mi><mi>k</mi><mi>U</mi></msubsup><msup><mo stretchy="false">)</mo><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">W_q^UÂ·(W_k^U)^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2244em;vertical-align:-0.3831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span/></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span></td></tr><tr><td>æ€»åœ¨çº¿çŸ©é˜µä¹˜æ³•æ¬¡æ•°</td><td>3æ¬¡</td><td>2æ¬¡</td><td>å‡å°‘1æ¬¡é«˜å¼€é”€çš„æŠ•å½±çŸ©é˜µä¹˜æ³•</td></tr></tbody></table>
<p><strong>å…³é”®ç»“è®º</strong>ï¼šä¼˜åŒ–åçœå»çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>=</mo><msub><mi>C</mi><mi>k</mi></msub><mo separator="true">â‹…</mo><msubsup><mi>W</mi><mi>k</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">K = C_kÂ·W_k^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.1244em;vertical-align:-0.2831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span></span></span></span></span> æ˜¯é«˜å¼€é”€è®¡ç®—â€”â€”<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">C_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> ç»´åº¦ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo>Ã—</mo><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">LÃ—d_{model}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"/><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>k</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">W_k^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1244em;vertical-align:-0.2831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span></span></span></span></span> ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>m</mi></msub><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi><mo>Ã—</mo><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">d_modelÃ—d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œè¯¥ä¹˜æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>L</mi><mo separator="true">â‹…</mo><msub><mi>d</mi><mi>m</mi></msub><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi><mo separator="true">â‹…</mo><msub><mi>d</mi><mi>k</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(LÂ·d_modelÂ·d_k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">L</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>ï¼Œå æ ‡å‡†è‡ªæ³¨æ„åŠ›è®¡ç®—æ€»è€—æ—¶çš„30%~40%ï¼ˆå°¤å…¶å½“ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">d_{model}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> è¾ƒå¤§æ—¶ï¼‰ï¼Œè¿™æ˜¯å®ç°1.7å€åŠ é€Ÿçš„æ ¸å¿ƒåŸå› ã€‚</p>
<h2 data-id="heading-8">åŠ é€Ÿæ¯”èƒŒåçš„è®¡ç®—å¤æ‚åº¦åˆ†æ</h2>
<p>è¦ç†è§£ä¸ºä½•èƒ½å®ç°çº¦1.7å€åŠ é€Ÿï¼Œéœ€ä»<strong>æ—¶é—´å¤æ‚åº¦</strong>å’Œ<strong>å®é™…ç¡¬ä»¶æ‰§è¡Œæ•ˆç‡</strong>ä¸¤æ–¹é¢åˆ†æï¼š</p>
<h3 data-id="heading-9">1. æ—¶é—´å¤æ‚åº¦é‡åŒ–å¯¹æ¯”</h3>
<p>å‡è®¾ï¼šåºåˆ—é•¿åº¦ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo>=</mo><mn>2048</mn></mrow><annotation encoding="application/x-tex">L=2048</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">2048</span></span></span></span></span>ï¼Œéšè—å±‚ç»´åº¦ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mo>=</mo><mn>2048</mn></mrow><annotation encoding="application/x-tex">d_{model}=2048</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">2048</span></span></span></span></span>ï¼Œæ³¨æ„åŠ›å¤´ç»´åº¦ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub><mo>=</mo><mn>64</mn></mrow><annotation encoding="application/x-tex">d_k=64</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">64</span></span></span></span></span>ï¼ˆå¯¹åº”32ä¸ªæ³¨æ„åŠ›å¤´ï¼‰ï¼Œå¿½ç•¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>o</mi><mi>f</mi><mi>t</mi><mi>m</mi><mi>a</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">softmax</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal">so</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">t</span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span></span></span></span></span> å’Œå°å¸¸æ•°é¡¹ï¼Œä»…è®¡ç®—çŸ©é˜µä¹˜æ³•çš„æµ®ç‚¹è¿ç®—æ¬¡æ•°ï¼ˆFLOPsï¼‰ï¼š</p>
<ul>
<li>æ ‡å‡†è®¡ç®—ï¼šæ¯ä¸ªå¤´çš„ <code>Q/K</code> æŠ•å½±FLOPsä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo separator="true">â‹…</mo><msub><mi>d</mi><mi>k</mi></msub><mo separator="true">â‹…</mo><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">LÂ·d_kÂ·d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord mathnormal">L</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆå› æ¯ä¸ªå¤´çš„è¾“å…¥ç‰¹å¾ç»´åº¦æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mi mathvariant="normal">/</mi><mi>n</mi><mi>u</mi><msub><mi>m</mi><mrow><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>s</mi></mrow></msub><mo>=</mo><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">d_{model}/num_{heads} = d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">/</span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼‰ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mi>u</mi><msub><mi>m</mi><mrow><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>s</mi></mrow></msub></mrow><annotation encoding="application/x-tex">num_{heads}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> ä¸ªå¤´çš„æ€»FLOPsä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mi>u</mi><msub><mi>m</mi><mrow><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>s</mi></mrow></msub><mo>Ã—</mo><mo stretchy="false">(</mo><mi>L</mi><mo separator="true">â‹…</mo><msub><mi>d</mi><mi>k</mi></msub><mo separator="true">â‹…</mo><msub><mi>d</mi><mi>k</mi></msub><mo>+</mo><mi>L</mi><mo separator="true">â‹…</mo><msub><mi>d</mi><mi>k</mi></msub><mo separator="true">â‹…</mo><msub><mi>d</mi><mi>k</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mn>2</mn><mo>Ã—</mo><mi>n</mi><mi>u</mi><msub><mi>m</mi><mrow><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>s</mi></mrow></msub><mo>Ã—</mo><mi>L</mi><mo>Ã—</mo><msubsup><mi>d</mi><mi>k</mi><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">num_{heads} Ã— (LÂ·d_kÂ·d_k + LÂ·d_kÂ·d_k) = 2Ã—num_{heads}Ã—LÃ—d_kÂ²</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"/><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord mathnormal">L</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">L</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"/><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"/><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0972em;vertical-align:-0.2831em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-2.4169em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span></span></span></span></span>ï¼›</li>
<li>çŸ©é˜µå¸æ”¶ä¼˜åŒ–ï¼šæ¯ä¸ªå¤´çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span> æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub><mo>Ã—</mo><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">d_kÃ—d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆæŒ‰å¤´æ‹†åˆ†åï¼‰ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Q</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>=</mo><msub><mi>C</mi><mi>q</mi></msub><mo separator="true">â‹…</mo><msub><mi>W</mi><mi>q</mi></msub><mi>k</mi></mrow><annotation encoding="application/x-tex">Q'=C_qÂ·W_qk</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9463em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span> çš„FLOPsä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mi>u</mi><msub><mi>m</mi><mrow><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>s</mi></mrow></msub><mo>Ã—</mo><mi>L</mi><mo separator="true">â‹…</mo><msub><mi>d</mi><mi>k</mi></msub><mo separator="true">â‹…</mo><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">num_{heads} Ã— LÂ·d_kÂ·d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"/><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord mathnormal">L</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œçœå»äº† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mi>u</mi><msub><mi>m</mi><mrow><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>s</mi></mrow></msub><mo>Ã—</mo><mi>L</mi><mo separator="true">â‹…</mo><msub><mi>d</mi><mi>k</mi></msub><mo separator="true">â‹…</mo><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">num_{heads} Ã— LÂ·d_kÂ·d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"/><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord mathnormal">L</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> çš„KæŠ•å½±FLOPsã€‚</li>
</ul>
<p>å½“ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mi>u</mi><msub><mi>m</mi><mrow><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>s</mi></mrow></msub><mo>=</mo><mn>32</mn></mrow><annotation encoding="application/x-tex">num_{heads}=32</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">32</span></span></span></span></span>ï¼ŒL=2048ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub><mo>=</mo><mn>64</mn></mrow><annotation encoding="application/x-tex">d_k=64</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">64</span></span></span></span></span> æ—¶ï¼š</p>
<ul>
<li>æ ‡å‡†è®¡ç®—æŠ•å½±FLOPsï¼š<code>2Ã—32Ã—2048Ã—64Â² â‰ˆ 5.3e9</code>ï¼›</li>
<li>ä¼˜åŒ–åæŠ•å½±FLOPsï¼š<code>32Ã—2048Ã—64Â² â‰ˆ 2.65e9</code>ï¼›</li>
<li>ä»…æŠ•å½±é˜¶æ®µå°±èŠ‚çœäº†50%çš„FLOPsï¼Œå†åŠ ä¸Šæ³¨æ„åŠ›åˆ†æ•°è®¡ç®—çš„å†…å­˜è®¿é—®ä¼˜åŒ–ï¼ˆæ— éœ€å­˜å‚¨ <code>K</code> çŸ©é˜µï¼Œå‡å°‘å†…å­˜å¸¦å®½å ç”¨ï¼‰ï¼Œç»¼åˆä¸‹æ¥å®ç°1.7å€å·¦å³çš„ç«¯åˆ°ç«¯åŠ é€Ÿï¼ˆå®é™…åŠ é€Ÿæ¯”å—ç¡¬ä»¶ç±»å‹ã€åºåˆ—é•¿åº¦ã€æ¨¡å‹ç»´åº¦å½±å“ï¼Œé€šå¸¸åœ¨1.5~2å€ä¹‹é—´ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-10">2. ç¡¬ä»¶æ‰§è¡Œæ•ˆç‡æå‡</h3>
<p>é™¤äº†å‡å°‘FLOPsï¼ŒçŸ©é˜µå¸æ”¶ä¼˜åŒ–è¿˜èƒ½æå‡<strong>å†…å­˜è®¿é—®æ•ˆç‡</strong>ï¼š</p>
<ul>
<li>æ ‡å‡†è®¡ç®—éœ€å­˜å‚¨ <code>Q</code>ã€<code>K</code>ã€<code>V</code> ä¸‰ä¸ªçŸ©é˜µï¼Œä¼˜åŒ–åä»…éœ€å­˜å‚¨ <code>Q'</code> å’Œ <code>V</code>ï¼Œå‡å°‘äº† <code>K</code> çŸ©é˜µçš„å†…å­˜å ç”¨ï¼ˆå°¤å…¶æ˜¯é•¿åºåˆ—åœºæ™¯ï¼Œ<code>K</code> çŸ©é˜µçš„å­˜å‚¨å¼€é”€æ˜¾è‘—ï¼‰ï¼›</li>
<li>å†…å­˜è®¿é—®å»¶è¿Ÿæ˜¯LLMæ¨ç†çš„é‡è¦ç“¶é¢ˆï¼ˆå°¤å…¶æ˜¯GPUæ˜¾å­˜å¸¦å®½ã€CPUå†…å­˜å¸¦å®½å—é™åœºæ™¯ï¼‰ï¼Œå‡å°‘å†…å­˜å ç”¨å¯é™ä½ç¼“å­˜å‘½ä¸­å¤±è´¥ç‡ï¼Œè¿›ä¸€æ­¥æå‡å®é™…æ‰§è¡Œé€Ÿåº¦ã€‚</li>
</ul>
<h2 data-id="heading-11">çŸ©é˜µå¸æ”¶ä¼˜åŒ–çš„å…³é”®ç‰¹æ€§ä¸é€‚ç”¨åœºæ™¯</h2>
<h3 data-id="heading-12">1. æ ¸å¿ƒä¼˜åŠ¿</h3>
<ul>
<li><strong>æ— ç²¾åº¦æŸå¤±</strong>ï¼šä»…è°ƒæ•´çŸ©é˜µä¹˜æ³•é¡ºåºï¼Œæ•°å€¼è®¡ç®—å®Œå…¨ç­‰ä»·äºæ ‡å‡†è‡ªæ³¨æ„åŠ›ï¼Œä¸å½±å“æ¨¡å‹è¾“å‡ºè´¨é‡ï¼ˆæ— éœ€é‡æ–°è®­ç»ƒæˆ–å¾®è°ƒï¼‰ï¼›</li>
<li><strong>å®ç°æˆæœ¬æä½</strong>ï¼šæ— éœ€ä¿®æ”¹æ¨¡å‹ç»“æ„ï¼Œä»…éœ€åœ¨æ¨ç†å‰é¢„è®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œå¹¶è°ƒæ•´æ¨ç†æ—¶çš„è®¡ç®—é€»è¾‘ï¼ˆæ›¿æ¢ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><mo separator="true">â‹…</mo><msup><mi>K</mi><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">QÂ·K^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0358em;vertical-align:-0.1944em;"/><span class="mord mathnormal">Q</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span> ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Q</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo separator="true">â‹…</mo><msubsup><mi>C</mi><mi>k</mi><mi>T</mi></msubsup></mrow><annotation encoding="application/x-tex">Q'Â·C_k^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1244em;vertical-align:-0.2831em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span></span></span></span></span>ï¼‰ï¼›</li>
<li><strong>å…¼å®¹æ€§å¼º</strong>ï¼šå¯ä¸é‡åŒ–ï¼ˆINT8/INT4ï¼‰ã€ç¨€ç–åŒ–ã€FlashAttentionã€TensorRTç­‰å…¶ä»–æ¨ç†åŠ é€ŸæŠ€æœ¯å åŠ ä½¿ç”¨ï¼ˆä¾‹å¦‚ï¼šé¢„è®¡ç®—çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span> å¯ç›´æ¥è¿›è¡ŒINT8é‡åŒ–ï¼Œè¿›ä¸€æ­¥é™ä½è®¡ç®—å¼€é”€ï¼‰ï¼›</li>
<li><strong>æ™®é€‚æ€§é«˜</strong>ï¼šé€‚ç”¨äºæ‰€æœ‰åŸºäºTransformerè‡ªæ³¨æ„åŠ›çš„LLMï¼ˆå¦‚GPTç³»åˆ—ã€Llamaç³»åˆ—ã€ChatGLMç³»åˆ—ç­‰ï¼‰ï¼Œæ— è®ºæ˜¯è§£ç å™¨æ¶æ„ï¼ˆDecoder-onlyï¼‰è¿˜æ˜¯ç¼–ç å™¨-è§£ç å™¨æ¶æ„ï¼ˆEncoder-Decoderï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-13">2. é€‚ç”¨åœºæ™¯</h3>
<ul>
<li><strong>é•¿åºåˆ—æ¨ç†</strong>ï¼šåºåˆ—é•¿åº¦ Lè¶Šå¤§ï¼ŒK çŸ©é˜µçš„æŠ•å½±å’Œå­˜å‚¨å¼€é”€è¶Šæ˜¾è‘—ï¼Œä¼˜åŒ–æ•ˆæœè¶Šæ˜æ˜¾ï¼ˆå¦‚æ–‡æ¡£æ‘˜è¦ã€ä»£ç ç”Ÿæˆç­‰é•¿æ–‡æœ¬åœºæ™¯ï¼‰ï¼›</li>
<li><strong>é«˜å¹¶å‘éƒ¨ç½²</strong>ï¼šAPIæœåŠ¡ã€æœ¬åœ°åŒ–éƒ¨ç½²ç­‰å¯¹å»¶è¿Ÿæ•æ„Ÿçš„åœºæ™¯ï¼Œå¯é€šè¿‡å‡å°‘è®¡ç®—é‡æå‡å¹¶å‘å¤„ç†èƒ½åŠ›ï¼ˆç›¸åŒç¡¬ä»¶èµ„æºä¸‹æ”¯æŒæ›´å¤šè¯·æ±‚ï¼‰ï¼›</li>
<li><strong>èµ„æºå—é™è®¾å¤‡</strong>ï¼šCPUéƒ¨ç½²ã€è¾¹ç¼˜è®¾å¤‡ï¼ˆå¦‚ Jetson ç³»åˆ—ï¼‰ç­‰ç®—åŠ›/å†…å­˜æœ‰é™çš„åœºæ™¯ï¼Œå¯åœ¨ä¸ç‰ºç‰²ç²¾åº¦çš„å‰æä¸‹é™ä½ç¡¬ä»¶é—¨æ§›ã€‚</li>
</ul>
<h3 data-id="heading-14">3. å±€é™æ€§</h3>
<ul>
<li>ä»…é€‚ç”¨äº<strong>æ¨ç†é˜¶æ®µ</strong>ï¼šè®­ç»ƒé˜¶æ®µ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>q</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">W_q^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2244em;vertical-align:-0.3831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span/></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>k</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">W_k^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1244em;vertical-align:-0.2831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span></span></span></span></span> æ˜¯åŠ¨æ€æ›´æ–°çš„ï¼Œæ— æ³•é¢„è®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œå› æ­¤ä¸é€‚ç”¨ï¼›</li>
<li>å¯¹çŸ­åºåˆ—åŠ é€Ÿæ•ˆæœæœ‰é™ï¼šå½“ L æå°æ—¶ï¼ˆå¦‚ L&lt;128ï¼‰ï¼ŒK çŸ©é˜µçš„æŠ•å½±å¼€é”€å æ¯”ä½ï¼ŒåŠ é€Ÿæ¯”å¯èƒ½é™è‡³1.2å€ä»¥ä¸‹ã€‚</li>
</ul>
<h2 data-id="heading-15">å·¥ç¨‹å®ç°æ­¥éª¤ï¼ˆä»¥PyTorchä¸ºä¾‹ï¼‰</h2>
<p>çŸ©é˜µå¸æ”¶ä¼˜åŒ–çš„å·¥ç¨‹å®ç°éå¸¸ç®€æ´ï¼Œæ ¸å¿ƒåˆ†ä¸ºâ€œé¢„è®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span>â€å’Œâ€œä¿®æ”¹æ¨ç†é€»è¾‘â€ä¸¤æ­¥ï¼š</p>
<h3 data-id="heading-16">1. æ­¥éª¤1ï¼šé¢„è®¡ç®—åˆå¹¶æŠ•å½±çŸ©é˜µ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span></h3>
<p>åŠ è½½é¢„è®­ç»ƒæ¨¡å‹åï¼Œæå– <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>q</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">W_q^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2244em;vertical-align:-0.3831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span/></span></span></span></span></span></span></span></span></span> å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>k</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">W_k^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1244em;vertical-align:-0.2831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œç¦»çº¿è®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span> å¹¶æ›¿æ¢åŸæŠ•å½±çŸ©é˜µï¼ˆä»¥Llamaç³»åˆ—æ¨¡å‹ä¸ºä¾‹ï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> torch
<span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn

<span class="hljs-keyword">class</span> <span class="hljs-title class_">LlamaAttentionWithAbsorption</span>(nn.Module):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, original_attention</span>):
        <span class="hljs-built_in">super</span>().__init__()
        self.original_attention = original_attention
        self.d_model = original_attention.hidden_size
        self.num_heads = original_attention.num_attention_heads
        self.d_k = self.d_model // self.num_heads
        
        <span class="hljs-comment"># æå–åŸå§‹æŠ•å½±çŸ©é˜µï¼ˆLlamaçš„attentionæƒé‡é€šå¸¸åœ¨self.q_projã€self.k_projã€self.v_projï¼‰</span>
        self.W_q_U = original_attention.q_proj.weight  <span class="hljs-comment"># ç»´åº¦ï¼šd_model Ã— d_modelï¼ˆå®é™…æ˜¯num_headsÃ—d_k Ã— d_modelï¼Œéœ€æŒ‰å¤´æ‹†åˆ†ï¼‰</span>
        self.W_k_U = original_attention.k_proj.weight  <span class="hljs-comment"># ç»´åº¦ï¼šd_model Ã— d_model</span>
        self.W_v_U = original_attention.v_proj.weight  <span class="hljs-comment"># ç»´åº¦ï¼šd_model Ã— d_model</span>
        
        <span class="hljs-comment"># æŒ‰æ³¨æ„åŠ›å¤´æ‹†åˆ†æŠ•å½±çŸ©é˜µï¼ˆnum_heads Ã— d_k Ã— d_modelï¼‰</span>
        self.W_q_U_per_head = self.W_q_U.view(self.num_heads, self.d_k, self.d_model)
        self.W_k_U_per_head = self.W_k_U.view(self.num_heads, self.d_k, self.d_model)
        
        <span class="hljs-comment"># é¢„è®¡ç®—æ¯ä¸ªå¤´çš„ W_qk = W_q_U Â· (W_k_U)^Tï¼ˆç»´åº¦ï¼šnum_heads Ã— d_k Ã— d_kï¼‰</span>
        self.W_qk_per_head = torch.matmul(
            self.W_q_U_per_head,  <span class="hljs-comment"># (num_heads, d_k, d_model)</span>
            self.W_k_U_per_head.transpose(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)  <span class="hljs-comment"># (num_heads, d_model, d_k)</span>
        )
        
        <span class="hljs-comment"># åˆå¹¶ä¸ºä¸€ä¸ªçŸ©é˜µï¼ˆæ–¹ä¾¿æ‰¹é‡è®¡ç®—ï¼šnum_headsÃ—d_k Ã— d_kï¼‰</span>
        self.W_qk = self.W_qk_per_head.view(self.num_heads * self.d_k, self.d_k)
        
        <span class="hljs-comment"># ä¿ç•™Vçš„æŠ•å½±çŸ©é˜µ</span>
        self.W_v = self.W_v_U.view(self.num_heads, self.d_k, self.d_model)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, hidden_states</span>):
        L, B, d_model = hidden_states.shape  <span class="hljs-comment"># è¾“å…¥ç»´åº¦ï¼š(åºåˆ—é•¿åº¦L, æ‰¹æ¬¡å¤§å°B, éšè—å±‚ç»´åº¦d_model)</span>
        num_heads, d_k = self.num_heads, self.d_k
        
        <span class="hljs-comment"># 1. è®¡ç®—Q' = C_q Â· W_qkï¼ˆæ›¿ä»£åŸQ = C_qÂ·W_q_U å’Œ K = C_kÂ·W_k_Uï¼‰</span>
        <span class="hljs-comment"># è¾“å…¥reshapeï¼š(L, B, d_model) â†’ (B, L, d_model)</span>
        hidden_states = hidden_states.transpose(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)
        
        <span class="hljs-comment"># Q'è®¡ç®—ï¼š(B, L, d_model) Ã— (num_headsÃ—d_k, d_k) â†’ (B, L, num_headsÃ—d_k)</span>
        q_prime = torch.matmul(hidden_states, self.W_qk.t())  <span class="hljs-comment"># W_qkæ˜¯(num_headsÃ—d_k, d_k)ï¼Œè½¬ç½®åæ˜¯(d_k, num_headsÃ—d_k)ï¼Ÿä¿®æ­£ï¼š</span>
        q_prime = torch.matmul(hidden_states, self.W_qk.permute(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>))  <span class="hljs-comment"># æ­£ç¡®ç»´åº¦åŒ¹é…ï¼š(B,L,d_model) Ã— (d_model, num_headsÃ—d_k) â†’ (B,L,num_headsÃ—d_k)</span>
        
        <span class="hljs-comment"># æŒ‰å¤´æ‹†åˆ†Q'ï¼š(B, L, num_heads, d_k) â†’ (B, num_heads, L, d_k)</span>
        q_prime = q_prime.view(B, L, num_heads, d_k).transpose(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
        
        <span class="hljs-comment"># 2. è®¡ç®—C_k^Tï¼ˆè¾“å…¥ç‰¹å¾çš„è½¬ç½®ï¼‰ï¼š(B, d_model, L)</span>
        C_k_T = hidden_states.transpose(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
        
        <span class="hljs-comment"># 3. æ³¨æ„åŠ›åˆ†æ•°è®¡ç®—ï¼šQ' Â· C_k^T â†’ (B, num_heads, L, L)</span>
        attention_scores = torch.matmul(q_prime, C_k_T)  <span class="hljs-comment"># (B, num_heads, L, d_k) Ã— (B, d_model, L) â†’ ä¸å¯¹ï¼Œéœ€æŒ‰å¤´å¤„ç†C_kï¼š</span>
        <span class="hljs-comment"># ä¿®æ­£ï¼šC_kæŒ‰å¤´æ‹†åˆ†å¹¶è½¬ç½®ï¼š(B, d_model, L) â†’ (B, num_heads, d_k, L)</span>
        C_k_per_head_T = hidden_states.view(B, L, num_heads, d_k).transpose(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>).transpose(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)  <span class="hljs-comment"># (B, num_heads, d_k, L)</span>
        attention_scores = torch.matmul(q_prime, C_k_per_head_T)  <span class="hljs-comment"># (B, num_heads, L, d_k) Ã— (B, num_heads, d_k, L) â†’ (B, num_heads, L, L)</span>
        
        <span class="hljs-comment"># ç¼©æ”¾æ³¨æ„åŠ›åˆ†æ•°</span>
        attention_scores = attention_scores / math.sqrt(d_k)
        
        <span class="hljs-comment"># 4. softmaxè®¡ç®—æ³¨æ„åŠ›æƒé‡</span>
        attention_weights = F.softmax(attention_scores, dim=-<span class="hljs-number">1</span>)
        
        <span class="hljs-comment"># 5. è®¡ç®—V = C_v Â· W_v_U</span>
        v = torch.matmul(hidden_states, self.W_v.permute(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>).reshape(d_model, num_heads*d_k).t())  <span class="hljs-comment"># (B, L, num_headsÃ—d_k)</span>
        v = v.view(B, L, num_heads, d_k).transpose(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)  <span class="hljs-comment"># (B, num_heads, L, d_k)</span>
        
        <span class="hljs-comment"># 6. è¾“å‡ºè®¡ç®—ï¼šAttention Â· V â†’ (B, num_heads, L, d_k)</span>
        output = torch.matmul(attention_weights, v)
        
        <span class="hljs-comment"># åˆå¹¶æ³¨æ„åŠ›å¤´ï¼š(B, num_heads, L, d_k) â†’ (B, L, num_headsÃ—d_k) â†’ (B, L, d_model)</span>
        output = output.transpose(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>).contiguous().view(B, L, d_model)
        
        <span class="hljs-comment"># è¿˜åŸä¸ºåŸå§‹è¾“å‡ºç»´åº¦ï¼š(L, B, d_model)</span>
        <span class="hljs-keyword">return</span> output.transpose(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)
</code></pre>
<h3 data-id="heading-17">2. æ­¥éª¤2ï¼šæ›¿æ¢æ¨¡å‹çš„æ³¨æ„åŠ›å±‚å¹¶éƒ¨ç½²</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åŠ è½½åŸå§‹Llamaæ¨¡å‹</span>
<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> LlamaForCausalLM, LlamaTokenizer
model_name = <span class="hljs-string">"meta-llama/Llama-2-7b-hf"</span>
tokenizer = LlamaTokenizer.from_pretrained(model_name)
original_model = LlamaForCausalLM.from_pretrained(model_name)

<span class="hljs-comment"># æ›¿æ¢æ‰€æœ‰æ³¨æ„åŠ›å±‚ä¸ºä¼˜åŒ–åçš„ç‰ˆæœ¬</span>
<span class="hljs-keyword">for</span> layer <span class="hljs-keyword">in</span> original_model.model.layers:
    layer.self_attn = LlamaAttentionWithAbsorption(layer.self_attn)

<span class="hljs-comment"># æ¨ç†æµ‹è¯•</span>
inputs = tokenizer(<span class="hljs-string">"Hello, matrix absorption optimization!"</span>, return_tensors=<span class="hljs-string">"pt"</span>)
outputs = original_model.generate(**inputs, max_new_tokens=<span class="hljs-number">50</span>)
<span class="hljs-built_in">print</span>(tokenizer.decode(outputs[<span class="hljs-number">0</span>], skip_special_tokens=<span class="hljs-literal">True</span>))
</code></pre>
<h3 data-id="heading-18">3. å…³é”®ä¼˜åŒ–ç‚¹</h3>
<ul>
<li><strong>æŒ‰å¤´æ‹†åˆ†è®¡ç®—</strong>ï¼šLLMçš„æ³¨æ„åŠ›å¤´æ˜¯å¹¶è¡Œè®¾è®¡çš„ï¼ŒæŒ‰å¤´æ‹†åˆ† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span> å¯é¿å…ç»´åº¦ä¸åŒ¹é…ï¼ŒåŒæ—¶åˆ©ç”¨ç¡¬ä»¶çš„å¹¶è¡Œè®¡ç®—èƒ½åŠ›ï¼›</li>
<li><strong>é¢„è®¡ç®—ç¼“å­˜</strong>ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span> å¯æå‰ä¿å­˜ä¸ºæ–‡ä»¶ï¼ˆå¦‚ <code>.bin</code>ï¼‰ï¼Œæ¨¡å‹åŠ è½½æ—¶ç›´æ¥è¯»å–ï¼Œæ— éœ€æ¯æ¬¡åŠ è½½éƒ½é‡æ–°è®¡ç®—ï¼›</li>
<li><strong>é‡åŒ–å…¼å®¹</strong>ï¼šè‹¥éœ€é‡åŒ–æ¨¡å‹ï¼Œå¯åœ¨é¢„è®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span> åå¯¹å…¶è¿›è¡ŒINT8é‡åŒ–ï¼ˆå¦‚ä½¿ç”¨ <code>torch.quantize_per_tensor</code>ï¼‰ï¼Œè¿›ä¸€æ­¥é™ä½è®¡ç®—å’Œå†…å­˜å¼€é”€ã€‚</li>
</ul>
<h2 data-id="heading-19">æ€»ç»“</h2>
<p>çŸ©é˜µå¸æ”¶ä¼˜åŒ–æ˜¯LLMæ¨ç†åŠ é€Ÿçš„â€œè½»é‡çº§åˆ©å™¨â€â€”â€”é€šè¿‡<strong>ç¦»çº¿é¢„è®¡ç®—åˆå¹¶æŠ•å½±çŸ©é˜µ</strong>ï¼Œåœ¨ä¸æŸå¤±ç²¾åº¦ã€ä¸ä¿®æ”¹æ¨¡å‹ç»“æ„çš„å‰æä¸‹ï¼Œå‡å°‘1æ¬¡é«˜å¼€é”€çš„åœ¨çº¿çŸ©é˜µä¹˜æ³•ï¼ŒåŒæ—¶é™ä½å†…å­˜è®¿é—®å‹åŠ›ï¼Œæœ€ç»ˆå®ç°çº¦1.7å€çš„æ¨ç†é€Ÿåº¦æå‡ã€‚è¯¥æŠ€æœ¯å®ç°ç®€å•ã€å…¼å®¹æ€§å¼ºï¼Œå°¤å…¶é€‚åˆé•¿åºåˆ—ã€é«˜å¹¶å‘ã€èµ„æºå—é™çš„LLMæœ¬åœ°åŒ–éƒ¨ç½²åœºæ™¯ï¼Œæ˜¯å¼€å‘è€…åœ¨ä¼˜åŒ–LLMæ¨ç†æ€§èƒ½æ—¶çš„ä¼˜å…ˆé€‰æ‹©ä¹‹ä¸€ã€‚</p>
<p>è‹¥éœ€è¿›ä¸€æ­¥æå‡æ€§èƒ½ï¼Œå¯å°†å…¶ä¸FlashAttentionï¼ˆä¼˜åŒ–æ³¨æ„åŠ›åˆ†æ•°çš„å†…å­˜è®¿é—®ï¼‰ã€æ¨¡å‹é‡åŒ–ï¼ˆINT8/INT4ï¼‰ã€TensorRTæ¨ç†å¼•æ“ç­‰æŠ€æœ¯ç»“åˆï¼Œå½¢æˆâ€œç»„åˆä¼˜åŒ–æ–¹æ¡ˆâ€ï¼Œå¯å®ç°3~5å€çš„ç»¼åˆåŠ é€Ÿæ¯”ï¼Œæ»¡è¶³æ›´ä¸¥è‹›çš„å»¶è¿Ÿå’Œååé‡éœ€æ±‚ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ„å›¾é©±åŠ¨ç¼–ç¨‹ï¼ˆIntent-Driven Programmingï¼‰]]></title>    <link>https://juejin.cn/post/7587392473851445294</link>    <guid>https://juejin.cn/post/7587392473851445294</guid>    <pubDate>2025-12-25T06:56:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587392473851445294" data-draft-id="7587355990409707571" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ„å›¾é©±åŠ¨ç¼–ç¨‹ï¼ˆIntent-Driven Programmingï¼‰"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,LLM,AIGC"/> <meta itemprop="datePublished" content="2025-12-25T06:56:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ„å›¾é©±åŠ¨ç¼–ç¨‹ï¼ˆIntent-Driven Programmingï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T06:56:50.000Z" title="Thu Dec 25 2025 06:56:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§­ ä¸€ã€ä»€ä¹ˆæ˜¯â€œæ„å›¾é©±åŠ¨ç¼–ç¨‹â€ï¼Ÿ</h2>
<p>ğŸ‘¨â€ğŸ’» <strong>ä¸€å¥è¯æ¦‚å¿µï¼š</strong></p>
<blockquote>
<p>ç¨‹åºå‘˜ä¸å†å‘Šè¯‰è®¡ç®—æœºâ€œæ€ä¹ˆåšâ€ï¼Œè€Œæ˜¯æè¿°â€œè¦è¾¾æˆä»€ä¹ˆâ€ï¼Œ<br/>
ç³»ç»Ÿé€šè¿‡è¯­ä¹‰ç†è§£ä¸æ¨¡å‹æ¨ç†ï¼Œè‡ªåŠ¨ç”Ÿæˆâ€œå¦‚ä½•å®ç°â€çš„è¿‡ç¨‹ã€‚</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä»å‘½ä»¤å¼ï¼ˆImperativeï¼‰è½¬å‘ç›®çš„å¯¼å‘ï¼ˆIntent-Orientedï¼‰ã€‚</p>
<p>ä¼ ç»Ÿç¼–ç¨‹åƒè¿™æ ·ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">items</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]<span class="hljs-comment">;</span>
let <span class="hljs-attr">sum</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
for (let <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; items.length; i++) {</span>
  sum += items<span class="hljs-section">[i]</span><span class="hljs-comment">;</span>
}
console.log(sum)<span class="hljs-comment">;</span>
</code></pre>
<p>æ„å›¾é©±åŠ¨çš„æ€è·¯åˆ™æ˜¯ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// äººç±»å†™çš„å¥å­</span>
<span class="hljs-built_in">sumNumbers</span>(items)
</code></pre>
<p>ç³»ç»Ÿè‡ªåŠ¨æ¨ç†å‡ºï¼š</p>
<blockquote>
<p>â€œä»–æƒ³è¦çš„æ˜¯å°†è¿™ä¸ªæ•°ç»„ä¸­æ‰€æœ‰æ•°å­—åŠ å’Œâ€<br/>
äºæ˜¯è‡ªåŠ¨ç”Ÿæˆå¹¶æ‰§è¡Œå¯¹åº”çš„å®ç°é€»è¾‘ã€‚</p>
</blockquote>
<p>ç”šè‡³æœªæ¥çš„å½¢å¼å¯èƒ½æ›´è‡ªç„¶ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// è‡ªç„¶è¯­è¨€æ¥å£</span>
<span class="hljs-string">"è®¡ç®—è¿™ç»„æ•°å­—çš„æ€»å’Œï¼Œå¹¶åœ¨æ§åˆ¶å°è¾“å‡ºç»“æœ"</span>
</code></pre>
<hr/>
<h2 data-id="heading-1">ğŸ§© äºŒã€æ ¸å¿ƒæœºåˆ¶ï¼šä»â€œå‘½ä»¤â†’ç›®æ ‡â†’å®ç°â€çš„ä¸‰å±‚ç»“æ„</h2>
<p>æˆ‘ä»¬æŠŠå®ƒçš„åº•å±‚æƒ³è±¡æˆä¸‰å±‚è¯­ä¹‰æ˜ å°„æ¨¡å‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[ äººç±»è¾“å…¥ ]</span>
     â†“
ğŸ¯ æ„å›¾å±‚ï¼ˆIntent Layerï¼‰ â€”â€” â€œæƒ³åšä»€ä¹ˆâ€
     â†“
ğŸ§  è¯­ä¹‰æ¨ç†å±‚ï¼ˆSemantic Reasoning Layerï¼‰ â€”â€” â€œæ€ä¹ˆå®ç°â€
     â†“
âš™ï¸ æ‰§è¡Œå±‚ï¼ˆExecution Layerï¼‰ â€”â€” â€œæ‰§è¡Œä»€ä¹ˆä»£ç â€
</code></pre>
<p>è¿™å°±åƒäººç±»å¤§è„‘å¤„ç†è‡ªç„¶è¯­è¨€æ—¶çš„ä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li><strong>è¯†åˆ«æ„å›¾</strong>ï¼ˆä½ æƒ³åšä»€ä¹ˆï¼‰</li>
<li><strong>æ¨ç†åŠ¨ä½œ</strong>ï¼ˆæ€ä¹ˆè¾¾æˆï¼‰</li>
<li><strong>å‘å‡ºæŒ‡ä»¤</strong>ï¼ˆå»åšï¼‰</li>
</ol>
<p>åœ¨è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œè¿™åˆ†åˆ«å¯¹åº”ï¼š</p>





























<table><thead><tr><th>å±‚çº§</th><th>å¯¹åº”æŠ€æœ¯</th><th>æ ¸å¿ƒä»»åŠ¡</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>æ„å›¾å±‚</td><td>è‡ªç„¶è¯­è¨€è§£æ / Promptç†è§£</td><td>å°†è¯­è¨€è½¬ä¸ºæŠ½è±¡è¯­ä¹‰æ ‘</td><td>â€œç”Ÿæˆä¸€ä»½ç”¨æˆ·æŠ¥å‘Šâ€</td></tr><tr><td>è¯­ä¹‰æ¨ç†å±‚</td><td>è¯­ä¹‰å›¾è°± / å¤§è¯­è¨€æ¨¡å‹ / é€»è¾‘è§„åˆ’</td><td>ç¡®å®šè°ƒç”¨å“ªäº›å‡½æ•°ã€API æˆ– Agent</td><td>â€œç”¨æ•°æ®åº“æŸ¥è¯¢ -&gt; æ ¼å¼åŒ– -&gt; è¾“å‡ºPDFâ€</td></tr><tr><td>æ‰§è¡Œå±‚</td><td>ç¼–ç¨‹è¯­è¨€è¿è¡Œæ—¶ / è‡ªåŠ¨ç”Ÿæˆä»£ç </td><td>å®é™…æ‰§è¡Œå¯éªŒè¯çš„ç¨‹åº</td><td>â€œè¿è¡ŒSQL + æ¸²æŸ“æ¨¡æ¿â€</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-2">ğŸ§  ä¸‰ã€ä¸â€œç¬¦å·AIâ€å’Œâ€œè¿æ¥ä¸»ä¹‰AIâ€çš„èåˆç‚¹</h2>
<p>ä»è®¡ç®—æœºç§‘å­¦çš„è§’åº¦ï¼Œæ„å›¾é©±åŠ¨ç¼–ç¨‹æ˜¯<strong>ç¬¦å·æ´¾ä¸è¿æ¥æ´¾ç»“åˆçš„äº§ç‰©</strong>ï¼š</p>

























<table><thead><tr><th>é¢†åŸŸ</th><th>æ„å›¾çš„è§’è‰²</th><th>æŠ€æœ¯åŸºç¡€</th></tr></thead><tbody><tr><td>ç¬¦å·æ¨ç†ï¼ˆSymbolic AIï¼‰</td><td>æŠŠâ€œæ„å›¾â€å½¢å¼åŒ–æˆé€»è¾‘è¡¨è¾¾å¼</td><td>é€»è¾‘è§„åˆ’ã€çŸ¥è¯†å›¾è°±ã€è§„åˆ™ç³»ç»Ÿ</td></tr><tr><td>ç¥ç»ç½‘ç»œï¼ˆNeural AIï¼‰</td><td>ä»è¯­ä¹‰ä¸­æŠ½å‡ºæ„å›¾åˆ†å¸ƒæ¦‚ç‡</td><td>Transformerã€è¯­ä¹‰åµŒå…¥</td></tr><tr><td>å¤§æ¨¡å‹èåˆå±‚</td><td>åœ¨è¯­ä¹‰ä¸ç»“æ„é—´å»ºç«‹ä¸­é—´å±‚è¯­è¨€</td><td>LLM + DSLï¼ˆé¢†åŸŸç‰¹å®šè¯­è¨€ï¼‰</td></tr></tbody></table>
<p>æ¢å¥è¯è¯´ï¼Œå¤§æ¨¡å‹æ•æ‰â€œæ„å›¾â€ï¼Œ<br/>
çŸ¥è¯†ç³»ç»ŸéªŒè¯â€œåˆç†æ€§â€ï¼Œ<br/>
ç¼–ç¨‹è¯­è¨€ç”Ÿæˆâ€œæ‰§è¡Œé€»è¾‘â€ã€‚</p>
<hr/>
<h2 data-id="heading-3">ğŸ§® å››ã€ä»â€œç¼–è¯‘å™¨â€åˆ°â€œè¯­ä¹‰ç¼–è¯‘å™¨â€çš„æ¼”åŒ–é€»è¾‘</h2>
<blockquote>
<p><strong>ä¼ ç»Ÿç¼–è¯‘å™¨</strong>ï¼šæŠŠè¯­æ³•ç¿»è¯‘æˆæœºå™¨æŒ‡ä»¤ã€‚<br/>
<strong>è¯­ä¹‰ç¼–è¯‘å™¨</strong>ï¼šæŠŠæ„å›¾ç¿»è¯‘æˆé—®é¢˜æ±‚è§£è·¯å¾„ã€‚</p>
</blockquote>
<p>è¿™ç§ç¼–è¯‘å™¨å·²ç»åœ¨é›å½¢é˜¶æ®µï¼Œæ¯”å¦‚ï¼š</p>
<h4 data-id="heading-4">ğŸŒ± ç±»æ¯”æµç¨‹ï¼š</h4>
<pre><code class="hljs language-rust" lang="rust">è¾“å…¥ï¼š<span class="hljs-string">"ç”Ÿæˆä¸€ä¸ªèƒ½æ¯å¤©æŠ“å–æ–°é—»å¹¶å‘é‚®ä»¶çš„æœåŠ¡ã€‚"</span>

â†“ ç¼–è¯‘è¿‡ç¨‹ â†“

<span class="hljs-number">1</span>ï¸âƒ£ æŠ½å–æ„å›¾ï¼š
   <span class="hljs-punctuation">-&gt;</span> {ç›®æ ‡: ä¿¡æ¯è‡ªåŠ¨åŒ–, åŠ¨ä½œ: æŠ“å–, è¾“å‡º: é‚®ä»¶, å‘¨æœŸ: æ¯å¤©}

<span class="hljs-number">2</span>ï¸âƒ£ æ¨ç†ç»„ä»¶ï¼š
   <span class="hljs-punctuation">-&gt;</span> {Agent: WebCrawler, Parser: NLPContentExtractor, Scheduler: Timer}

<span class="hljs-number">3</span>ï¸âƒ£ ä»£ç åˆæˆï¼š
   <span class="hljs-punctuation">-&gt;</span> Node.js æ¨¡å— + cron job + é‚®ä»¶APIé›†æˆ

<span class="hljs-number">4</span>ï¸âƒ£ æ‰§è¡Œï¼š
   <span class="hljs-punctuation">-&gt;</span> è‡ªåŠ¨éƒ¨ç½² &amp; ç›‘æ§
</code></pre>
<p>è¿™å°±æ˜¯ <strong>â€œè¯­ä¹‰åˆ°å¯æ‰§è¡Œâ€çš„æ˜ å°„è¿‡ç¨‹</strong>ã€‚<br/>
ç³»ç»Ÿåœ¨å†…éƒ¨ç”Ÿæˆä¸­é—´è¡¨ç¤ºï¼ˆSemantic IRï¼‰ï¼Œ<br/>
ç„¶åè‡ªåŠ¨è°ƒç”¨æ¨¡æ¿ä»£ç æˆ–å°æ¨¡å‹å®Œæˆæ„å»ºã€‚</p>
<hr/>
<h2 data-id="heading-5">âš™ï¸ äº”ã€æ„å›¾çš„â€œç»“æ„åŒ–æŠ½è±¡â€ï¼šç¨‹åºä¸å†æ˜¯å‡½æ•°ï¼Œè€Œæ˜¯è¯­ä¹‰èŠ‚ç‚¹</h2>
<p>æœªæ¥ç¨‹åºå¯èƒ½ä¸å†ç”±å‡½æ•°å’Œç±»ç»„æˆï¼Œè€Œæ˜¯ç”±**è¯­ä¹‰èŠ‚ç‚¹ï¼ˆSemantic Nodesï¼‰**ç»„æˆï¼š</p>
<pre><code class="hljs language-css" lang="css">{
  intent: <span class="hljs-string">"ç”Ÿæˆæ—¥æŠ¥"</span>,
  data_source: <span class="hljs-string">"å…¬å¸æ•°æ®åº“"</span>,
  filters: [<span class="hljs-string">"é”€å”®é¢"</span>, <span class="hljs-string">"åœ°åŒº"</span>],
  output: <span class="hljs-string">"PDF"</span>,
  schedule: <span class="hljs-string">"æ¯æ—¥ 7:00"</span>
}
</code></pre>
<p>ç„¶åç”±ç³»ç»Ÿå°†å…¶è½¬è¯‘ä¸ºï¼š</p>
<ul>
<li>æ•°æ®åº“æŸ¥è¯¢è¯­å¥</li>
<li>PDF æ¨¡æ¿å¼•æ“è°ƒç”¨</li>
<li>å®šæ—¶ä»»åŠ¡è„šæœ¬</li>
<li>å‘é€é€»è¾‘æ‰§è¡Œå™¨</li>
</ul>
<p>å³ç¼–ç¨‹æŠ½è±¡ä» <strong>â€œæ§åˆ¶æµï¼ˆControl Flowï¼‰â€ â†’ â€œç›®æ ‡è¯­ä¹‰ç½‘ï¼ˆGoal Graphï¼‰â€</strong> ã€‚</p>
<hr/>
<h2 data-id="heading-6">ğŸŒ‰ å…­ã€æ„å›¾é©±åŠ¨ç¼–ç¨‹çš„åŸºç¡€æ”¯æ’‘ï¼š</h2>
<h3 data-id="heading-7">ï¼ˆ1ï¼‰è¯­ä¹‰ç†è§£æ¨¡å‹ï¼ˆSemantic Understandingï¼‰</h3>
<p>è®©æœºå™¨èƒ½ç¨³å®šè¯†åˆ«ç›®æ ‡ï¼Œè€Œéå¥å¼ã€‚<br/>
æ¯”å¦‚â€œå†™æŠ¥å‘Šâ€ã€â€œç”Ÿæˆæ—¥æŠ¥â€åœ¨è¯­ä¹‰ä¸Šæ˜¯ç­‰ä»·ä»»åŠ¡ã€‚</p>
<h3 data-id="heading-8">ï¼ˆ2ï¼‰æ„å›¾æ˜ å°„æ ‡å‡†åŒ–ï¼ˆIntent Mapping Schemaï¼‰</h3>
<p>ç±»ä¼¼ API çš„â€œåè®®å±‚â€ï¼Œå®šä¹‰æ„å›¾æ ‡å‡†ã€‚<br/>
æœªæ¥å¯èƒ½ä¼šæœ‰ç±»ä¼¼è¿™ç§æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"intent"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"send_email"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"recipient"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"message"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"optional"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"attachment"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"priority"</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-9">ï¼ˆ3ï¼‰è‡ªæˆ‘è§„åˆ’ä¸éªŒè¯ï¼ˆAutonomous Planning &amp; Verificationï¼‰</h3>
<p>ç³»ç»Ÿä¼šè‡ªåŠ¨æ¨ç†æ»¡è¶³æ„å›¾çš„ä»»åŠ¡é“¾ï¼Œå¹¶æ£€æŸ¥æ˜¯å¦åˆç†ï¼ˆç±»ä¼¼ Model Checkingï¼‰ã€‚</p>
<hr/>
<h2 data-id="heading-10">ğŸ” ä¸ƒã€JS ç¤ºä¾‹ï¼šä»äººç±»è¯­è¨€ç”Ÿæˆä»»åŠ¡æ‰§è¡Œæµ</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> ai = {
  <span class="hljs-attr">interpret</span>: <span class="hljs-function">(<span class="hljs-params">sentence</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (sentence.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"æŠ¥å‘Š"</span>)) <span class="hljs-keyword">return</span> <span class="hljs-string">"generateReport"</span>;
    <span class="hljs-keyword">if</span> (sentence.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"é‚®ä»¶"</span>)) <span class="hljs-keyword">return</span> <span class="hljs-string">"sendEmail"</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-string">"unknown"</span>;
  },
  <span class="hljs-attr">execute</span>: <span class="hljs-function">(<span class="hljs-params">intent</span>) =&gt;</span> {
    <span class="hljs-keyword">switch</span> (intent) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">"generateReport"</span>:
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ“Š æ­£åœ¨ç”Ÿæˆæ—¥æŠ¥..."</span>);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">"sendEmail"</span>:
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ“§ æ­£åœ¨å‘é€é‚®ä»¶..."</span>);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-attr">default</span>:
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ¤” ä¸ç¡®å®šä½ çš„æ„å›¾"</span>);
    }
  }
};

<span class="hljs-keyword">const</span> input = <span class="hljs-string">"å¸®æˆ‘ç”Ÿæˆä¸€ä»½æ—¥æŠ¥"</span>;
<span class="hljs-keyword">const</span> intent = ai.<span class="hljs-title function_">interpret</span>(input);
ai.<span class="hljs-title function_">execute</span>(intent);
</code></pre>
<p>ğŸ§© <strong>è¾“å‡ºï¼š</strong></p>
<pre><code class="hljs language-erlang" lang="erlang">ğŸ“Š æ­£åœ¨ç”Ÿæˆæ—¥æŠ¥...
</code></pre>
<p>è¿™åªæ˜¯ä¸€ä¸ªæ¦‚å¿µæ€§ mini æ¨¡å‹ï¼Œ<br/>
ä½†çœŸæ­£çš„æ„å›¾é©±åŠ¨ç³»ç»Ÿä¼šæœ‰å¤šå±‚è¯­ä¹‰æ¨¡å‹ã€æ‰§è¡Œå¼•æ“ã€éªŒè¯é€»è¾‘ã€‚</p>
<hr/>
<h2 data-id="heading-11">ğŸ”® å…«ã€å“²å­¦è§†è§’ï¼šä»ç¼–å†™ä»£ç åˆ°è¡¨è¾¾æ€ç»´</h2>
<p>æ„å›¾é©±åŠ¨ç¼–ç¨‹çš„ç»ˆæç›®æ ‡ï¼Œä¸æ˜¯è®©AIå†™ä»£ç ï¼Œ<br/>
è€Œæ˜¯<strong>è®©æ€ç»´æœ¬èº«æˆä¸ºç¼–ç¨‹è¯­è¨€</strong>ã€‚</p>
<p>æœªæ¥çš„ç¨‹åºå‘˜å¯èƒ½è¿™æ ·â€œå†™ç¨‹åºâ€ï¼š</p>
<blockquote>
<p>æˆ‘æƒ³æ„å»ºä¸€ä¸ªèƒ½é˜…è¯»æ–°é—»ã€æ€»ç»“è¶‹åŠ¿å¹¶æ¯å¤©æ—©ä¸Šç»™æˆ‘å‘æŠ¥å‘Šçš„æ™ºèƒ½ä½“ã€‚<br/>
è¯·ç¡®ä¿ï¼š</p>
<ul>
<li>è¯­æ°”ä¸“ä¸šä½†äº²åˆ‡</li>
<li>æä¾›å…³é”®æŒ‡æ ‡çš„è¶‹åŠ¿å›¾</li>
<li>ä¸è¦å•°å—¦</li>
</ul>
</blockquote>
<p>AI ç†è§£åç›´æ¥æ„å»ºæ•´ä¸ªç³»ç»Ÿã€‚<br/>
åˆ°é‚£æ—¶ï¼Œç¼–ç¨‹ä¼šå˜å¾—æ›´åƒæ–‡å­¦åˆ›ä½œâ€”â€”<br/>
é€»è¾‘ = è¯—æ„ï¼Œç®—æ³• = æ€æƒ³çš„éª¨æ¶ã€‚</p>
<hr/>
<h2 data-id="heading-12">âš¡ ä¹ã€æ€»ç»“è¡¨æ ¼</h2>





























<table><thead><tr><th>å±‚çº§</th><th>ç›®æ ‡</th><th>æŠ€æœ¯å½¢æ€</th><th>å¯¹äººç±»æ„ä¹‰</th></tr></thead><tbody><tr><td>ç¼–ç¨‹è¯­è¨€</td><td>è®©äººç±»æ•™è®¡ç®—æœº</td><td>è¯­æ³•ä¸å‘½ä»¤</td><td>æŠ€æœ¯æ€§æ²Ÿé€š</td></tr><tr><td>æ„å›¾ç¼–ç¨‹</td><td>è®©è®¡ç®—æœºç†è§£äººç±»</td><td>è¯­ä¹‰å»ºæ¨¡ä¸æ¨ç†</td><td>æ€ç»´å±‚æ²Ÿé€š</td></tr><tr><td>è‡ªæ¼”åŒ–ç³»ç»Ÿ</td><td>è®©AIæ„å»ºAI</td><td>è‡ªæˆ‘åæ€æ¨¡å‹</td><td>åˆä½œå¼æ™ºèƒ½å…±åˆ›</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-13">âœ¨ åã€ç»“è¯­ï¼šç¼–ç¨‹çš„æœªæ¥ï¼Œæ˜¯â€œè¡¨è¾¾æ„å›¾çš„è‰ºæœ¯â€</h2>
<p>åœ¨è¿‡å¾€ 70 å¹´çš„è®¡ç®—æœºå²ä¸­ï¼Œ<br/>
äººç±»ä¸€ç›´åœ¨åŠªåŠ›ç¼©å°â€œæ€è€ƒâ€å’Œâ€œæ‰§è¡Œâ€ä¹‹é—´çš„é¸¿æ²Ÿã€‚</p>
<p>ä»æœºå™¨ç åˆ° Pythonï¼Œä» Prompt åˆ° Intentï¼Œ<br/>
æˆ‘ä»¬ä¸å†å»å†™ç¨‹åºï¼Œè€Œæ˜¯åœ¨<strong>è¡¨è¾¾æ€æƒ³çš„ç»“æ„</strong>ã€‚</p>
<p>ä¹Ÿè®¸æœªæ¥çš„è°ƒè¯•ï¼Œä¸æ˜¯ä¿® Bugï¼Œ<br/>
è€Œæ˜¯çº æ­£è¯¯è§£â€”â€”</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[jstackä¸Arthasçº¿ç¨‹è¯Šæ–­å®æˆ˜ï¼šCPUé£™é«˜é—®é¢˜çš„åŒé›„å¯¹å†³]]></title>    <link>https://juejin.cn/post/7587261929385132084</link>    <guid>https://juejin.cn/post/7587261929385132084</guid>    <pubDate>2025-12-25T02:09:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587261929385132084" data-draft-id="7587261929385099316" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="jstackä¸Arthasçº¿ç¨‹è¯Šæ–­å®æˆ˜ï¼šCPUé£™é«˜é—®é¢˜çš„åŒé›„å¯¹å†³"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-25T02:09:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            jstackä¸Arthasçº¿ç¨‹è¯Šæ–­å®æˆ˜ï¼šCPUé£™é«˜é—®é¢˜çš„åŒé›„å¯¹å†³
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T02:09:21.000Z" title="Thu Dec 25 2025 02:09:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€é—®é¢˜èƒŒæ™¯ï¼šCPUé£™é«˜åœºæ™¯çš„å…¸å‹ç‰¹å¾</h2>
<p>æŸç”µå•†å¹³å°åœ¨"åŒåä¸€"å¤§ä¿ƒæœŸé—´çªå‘CPUä½¿ç”¨ç‡100%å‘Šè­¦ï¼Œæ ¸å¿ƒäº¤æ˜“æ¥å£å“åº”å»¶è¿Ÿè¶…è¿‡5ç§’ã€‚è¿ç»´å›¢é˜Ÿéœ€è¦å¿«é€Ÿå®šä½é—®é¢˜æ ¹æºï¼Œæ­¤æ—¶é¢ä¸´ä¸¤ç§å·¥å…·é€‰æ‹©ï¼šä¼ ç»Ÿå‘½ä»¤è¡Œå·¥å…·<code>jstack</code>ä¸é˜¿é‡Œå¼€æºè¯Šæ–­å·¥å…·<code>Arthas</code>ã€‚æœ¬æ–‡å°†é€šè¿‡å®Œæ•´æ¡ˆä¾‹å¯¹æ¯”ä¸¤è€…çš„è¯Šæ–­æµç¨‹ä¸æ•ˆç‡å·®å¼‚ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€å·¥å…·ç‰¹æ€§å¯¹æ¯”çŸ©é˜µ</h2>



































<table><thead><tr><th>ç»´åº¦</th><th>jstack</th><th>Arthas</th></tr></thead><tbody><tr><td><strong>æ•°æ®è·å–æ–¹å¼</strong>â€‹</td><td>éœ€æ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤ç”Ÿæˆå¿«ç…§æ–‡ä»¶</td><td>æ”¯æŒåŠ¨æ€å®æ—¶é‡‡æ ·ï¼ˆé‡‡æ ·é—´éš”å¯é…ç½®ï¼‰</td></tr><tr><td><strong>çº¿ç¨‹ä¿¡æ¯å®Œæ•´æ€§</strong>â€‹</td><td>ä»…æ˜¾ç¤ºçº¿ç¨‹çŠ¶æ€ä¸å †æ ˆ</td><td>é¢å¤–æä¾›CPUè€—æ—¶å æ¯”ã€é”ç«äº‰è¯¦æƒ…ã€æ–¹æ³•è°ƒç”¨è¿½è¸ªç­‰å¢å¼ºä¿¡æ¯</td></tr><tr><td><strong>äº¤äº’æ€§</strong>â€‹</td><td>ç¦»çº¿åˆ†æï¼ˆéœ€é…åˆæ–‡æœ¬å¤„ç†å·¥å…·ï¼‰</td><td>äº¤äº’å¼å‘½ä»¤è¡Œï¼ˆæ”¯æŒç®¡é“æ“ä½œã€æ­£åˆ™è¿‡æ»¤ï¼‰</td></tr><tr><td><strong>å­¦ä¹ æˆæœ¬</strong>â€‹</td><td>åŸºç¡€å‘½ä»¤æ˜“å­¦ï¼Œä½†é«˜çº§åˆ†æéœ€è„šæœ¬è¾…åŠ©</td><td>æä¾›ç±»Unixé£æ ¼å‘½ä»¤ä½“ç³»ï¼Œå†…ç½®å¸®åŠ©æ–‡æ¡£</td></tr><tr><td><strong>ç”Ÿäº§ç¯å¢ƒé€‚ç”¨æ€§</strong>â€‹</td><td>ä½ä¾µå…¥æ€§ï¼Œä½†éœ€åè°ƒè¿ç»´æƒé™</td><td>æ”¯æŒéä¾µå…¥å¼è¯Šæ–­ï¼ˆæ— éœ€é‡å¯åº”ç”¨ï¼‰</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€å®æˆ˜æ¡ˆä¾‹ï¼šæ­»å¾ªç¯å¯¼è‡´çš„CPUé£™é«˜</h2>
<h3 data-id="heading-3">åœºæ™¯æè¿°</h3>
<p>æŸè®¢å•æœåŠ¡å‡ºç°å•èŠ‚ç‚¹CPU 100%å¼‚å¸¸ï¼Œä¸šåŠ¡é€»è¾‘ä¸­å­˜åœ¨å®šæ—¶ä»»åŠ¡ä»£ç ç¼ºé™·ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// é—®é¢˜ä»£ç ï¼šå®šæ—¶ä»»åŠ¡æœªæ­£ç¡®ç»ˆæ­¢</span>
ScheduledExecutorService scheduler = Executors<span class="hljs-selector-class">.newScheduledThreadPool</span>(<span class="hljs-number">1</span>);
scheduler<span class="hljs-selector-class">.scheduleAtFixedRate</span>(() -&gt; {
    <span class="hljs-built_in">while</span>(true) { <span class="hljs-comment">// æ­»å¾ªç¯</span>
        <span class="hljs-built_in">calculateOrderDiscount</span>(); 
    }
}, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, TimeUnit<span class="hljs-selector-class">.HOURS</span>);
</code></pre>
<hr/>
<h3 data-id="heading-4">å››ã€è¯Šæ–­æµç¨‹å¯¹æ¯”</h3>
<h4 data-id="heading-5">æ–¹æ¡ˆAï¼šjstackä¼ ç»Ÿè¯Šæ–­</h4>
<p><strong>æ­¥éª¤1ï¼šå®šä½Javaè¿›ç¨‹</strong></p>
<pre><code class="hljs language-perl" lang="perl">$ jps -l | <span class="hljs-keyword">grep</span> OrderService
<span class="hljs-number">12345</span> com.example.OrderService
</code></pre>
<p><strong>æ­¥éª¤2ï¼šæ•è·é«˜CPUçº¿ç¨‹</strong></p>
<pre><code class="hljs language-css" lang="css">$ <span class="hljs-attribute">top</span> -H -<span class="hljs-selector-tag">p</span> <span class="hljs-number">12345</span>
  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     <span class="hljs-selector-tag">TIME</span>+  COMMAND
<span class="hljs-number">12346</span> appuser   <span class="hljs-number">20</span>   <span class="hljs-number">0</span> <span class="hljs-number">3456789</span> <span class="hljs-number">123456</span>  <span class="hljs-number">98765</span> R  <span class="hljs-number">99.9</span>  <span class="hljs-number">1.2</span>   <span class="hljs-number">0</span>:<span class="hljs-number">10.01</span> java
</code></pre>
<p><strong>æ­¥éª¤3ï¼šè½¬æ¢çº¿ç¨‹ID</strong></p>
<pre><code class="hljs language-perl" lang="perl">$ <span class="hljs-keyword">printf</span> <span class="hljs-string">"%x\n"</span> <span class="hljs-number">12346</span>
c0a2
</code></pre>
<p><strong>æ­¥éª¤4ï¼šåˆ†æçº¿ç¨‹å¿«ç…§</strong></p>
<pre><code class="hljs language-perl" lang="perl">$ jstack <span class="hljs-number">12345</span> | <span class="hljs-keyword">grep</span> -A <span class="hljs-number">20</span> c0a2
<span class="hljs-string">"pool-1-thread-1"</span> <span class="hljs-comment">#1234 prio=5 os_prio=0 tid=0x00007f8b5c00f000 nid=0xc0a2 runnable [0x00007f8b54a9f000]</span>
   java.lang.Thread.State: RUNNABLE
        at com.example.OrderService.lambda$init$0(OrderService.java:<span class="hljs-number">42</span>)
        at com.example.OrderService$$Lambda$1/<span class="hljs-number">0x0000000800060840</span>.run(Unknown Source)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:<span class="hljs-number">511</span>)
</code></pre>
<p><strong>å…³é”®å‘ç°</strong>ï¼šçº¿ç¨‹<code>pool-1-thread-1</code>åœ¨<code>OrderService.java:42</code>é™·å…¥æ­»å¾ªç¯</p>
<hr/>
<h4 data-id="heading-6">æ–¹æ¡ˆBï¼šArthasæ™ºèƒ½è¯Šæ–­</h4>
<p><strong>æ­¥éª¤1ï¼šåŠ¨æ€é™„åŠ è¯Šæ–­</strong></p>
<pre><code class="hljs language-scss" lang="scss">$ java -jar arthas-boot<span class="hljs-selector-class">.jar</span>
* <span class="hljs-selector-attr">[1]</span> com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.OrderService</span> (<span class="hljs-number">12345</span>)
  `--- attach success
</code></pre>
<p><strong>æ­¥éª¤2ï¼šå®æ—¶ç›‘æ§CPUçƒ­ç‚¹</strong></p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-attr">[arthas@12345]</span>(<span class="hljs-variable">@ref</span>)<span class="hljs-selector-tag">thread</span> <span class="hljs-selector-tag">-n</span> <span class="hljs-number">3</span>
"<span class="hljs-selector-tag">pool-1-thread-1</span>" <span class="hljs-selector-tag">Id</span>=<span class="hljs-number">1234</span> <span class="hljs-selector-tag">cpuUsage</span>=<span class="hljs-number">99.9%</span> <span class="hljs-selector-tag">deltaTime</span>=<span class="hljs-number">1000ms</span>
   <span class="hljs-selector-tag">at</span> <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.OrderService</span><span class="hljs-selector-class">.lambda</span>$<span class="hljs-selector-tag">init</span>$<span class="hljs-number">0</span>(OrderService.<span class="hljs-attribute">java</span>:<span class="hljs-number">42</span>)
   <span class="hljs-selector-tag">at</span> <span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.concurrent</span><span class="hljs-selector-class">.Executors</span>$<span class="hljs-selector-tag">RunnableAdapter</span><span class="hljs-selector-class">.call</span>(Executors.<span class="hljs-attribute">java</span>:<span class="hljs-number">511</span>)
</code></pre>
<p><strong>æ­¥éª¤3ï¼šæ·±åº¦æ–¹æ³•è¿½è¸ª</strong></p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-attr">[arthas@12345]</span>(<span class="hljs-variable">@ref</span>)<span class="hljs-selector-tag">trace</span> <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.OrderService</span> <span class="hljs-selector-tag">calculateOrderDiscount</span>
<span class="hljs-selector-tag">TRACE</span> <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.OrderService</span> <span class="hljs-selector-tag">calculateOrderDiscount</span>
`<span class="hljs-selector-tag">---ts</span>=<span class="hljs-number">2025</span><span class="hljs-selector-tag">-12-24</span> <span class="hljs-number">15</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>; <span class="hljs-selector-attr">[cost=1000000000]</span> <span class="hljs-selector-tag">result</span>=@<span class="hljs-selector-tag">Integer</span><span class="hljs-selector-attr">[0]</span>
   â””â”€<span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.lang</span><span class="hljs-selector-class">.Thread</span><span class="hljs-selector-class">.sleep</span>(Native Method)
       â””â”€<span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.OrderService</span><span class="hljs-selector-class">.lambda</span>$<span class="hljs-selector-tag">init</span>$<span class="hljs-number">0</span>(OrderService.<span class="hljs-attribute">java</span>:<span class="hljs-number">42</span>)
</code></pre>
<p><strong>å…³é”®å‘ç°</strong>ï¼š<code>calculateOrderDiscount</code>æ–¹æ³•æŒç»­æ‰§è¡Œä¸”æ— ä¼‘çœ ï¼Œç»“åˆ<code>trace</code>ç»“æœç¡®è®¤æ­»å¾ªç¯</p>
<hr/>
<h2 data-id="heading-7">äº”ã€å·¥å…·ä¼˜åŠ¿æ·±åº¦è§£æ</h2>
<h3 data-id="heading-8">1. jstackçš„æ ¸å¿ƒä»·å€¼</h3>
<ul>
<li>
<p><strong>ç¦»çº¿åˆ†æèƒ½åŠ›</strong>ï¼šé€‚åˆéœ€è¦é•¿æœŸä¿å­˜è¯Šæ–­è®°å½•çš„åœºæ™¯</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç”Ÿæˆå¸¦æ—¶é—´æˆ³çš„è¯Šæ–­åŒ…</span>
jstack 12345 &gt; /var/log/jstack_$(<span class="hljs-built_in">date</span> +%s).<span class="hljs-built_in">log</span>
</code></pre>
</li>
<li>
<p><strong>æ‰¹é‡å¤„ç†æ”¯æŒ</strong>ï¼šå¯ç»“åˆ<code>ps</code>/<code>top</code>å®ç°è‡ªåŠ¨åŒ–ç›‘æ§è„šæœ¬</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># ç¤ºä¾‹ï¼šè‡ªåŠ¨æ•è·TOP3é«˜CPUçº¿ç¨‹</span>
top -H -b -n <span class="hljs-number">1</span> -p <span class="hljs-number">12345</span> | awk <span class="hljs-string">'/java/{print $1}'</span> | xargs -I{} <span class="hljs-keyword">printf</span> <span class="hljs-string">"%x\n"</span> {} | uni<span class="hljs-string">q | xargs -I{} jstack 12345 |</span> <span class="hljs-keyword">grep</span> -A <span class="hljs-number">20</span> {}
</code></pre>
</li>
</ul>
<h3 data-id="heading-9">2. Arthasçš„é©æ–°çªç ´</h3>
<ul>
<li>
<p><strong>å®æ—¶ç«ç„°å›¾ç”Ÿæˆ</strong>ï¼šå¯è§†åŒ–å‘ˆç°çƒ­ç‚¹æ–¹æ³•è°ƒç”¨é“¾</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-attr">[arthas@12345]</span>(<span class="hljs-variable">@ref</span>)<span class="hljs-selector-tag">profiler</span> <span class="hljs-selector-tag">start</span> <span class="hljs-selector-tag">--event</span> <span class="hljs-selector-tag">cpu</span> <span class="hljs-selector-tag">--interval</span> <span class="hljs-number">1000</span>
<span class="hljs-selector-attr">[arthas@12345]</span>(<span class="hljs-variable">@ref</span>)<span class="hljs-selector-tag">profiler</span> <span class="hljs-selector-tag">stop</span> <span class="hljs-selector-tag">--file</span> <span class="hljs-selector-tag">cpu_profile</span><span class="hljs-selector-class">.svg</span>
</code></pre>
</li>
<li>
<p><strong>æ™ºèƒ½è¿‡æ»¤æœºåˆ¶</strong>ï¼šé€šè¿‡æ­£åˆ™è¡¨è¾¾å¼ç²¾å‡†å®šä½é—®é¢˜ä»£ç </p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-attr">[arthas@12345]</span>(<span class="hljs-variable">@ref</span>)<span class="hljs-selector-tag">thread</span> <span class="hljs-selector-tag">-n</span> <span class="hljs-number">5</span> <span class="hljs-selector-tag">--state</span> <span class="hljs-selector-tag">RUNNABLE</span> | <span class="hljs-selector-tag">grep</span> <span class="hljs-selector-tag">-E</span> '<span class="hljs-selector-tag">calculate</span>|<span class="hljs-selector-tag">discount</span>'
</code></pre>
</li>
<li>
<p><strong>åŠ¨æ€çƒ­æ›´æ–°</strong>ï¼šæ— éœ€é‡å¯å³å¯ä¿®å¤é—®é¢˜ï¼ˆéœ€é…åˆJVMå‚æ•°ï¼‰</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-attr">[arthas@12345]</span>(<span class="hljs-variable">@ref</span>)<span class="hljs-selector-tag">jad</span> <span class="hljs-selector-tag">--source-only</span> <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.OrderService</span> &gt; <span class="hljs-selector-tag">OrderService</span><span class="hljs-selector-class">.java</span>
# ä¿®æ”¹ä»£ç åçƒ­æ›´æ–°
<span class="hljs-selector-attr">[arthas@12345]</span>(<span class="hljs-variable">@ref</span>)<span class="hljs-selector-tag">redefine</span> <span class="hljs-selector-tag">OrderService</span><span class="hljs-selector-class">.java</span>
</code></pre>
</li>
</ul>
<hr/>
<h2 data-id="heading-10">å…­ã€é€‚ç”¨åœºæ™¯å†³ç­–æ ‘</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdd482c4079d42329ac0a59147418539~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSVTmqZjlrZDnmq4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767233408&amp;x-signature=HQAz9pKk3pJ7r9m5aLSN170gSeQ%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-11">ä¸ƒã€ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ</h2>
<ol>
<li>
<p><strong>é˜²å¾¡æ€§é…ç½®</strong>â€‹</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Arthaså®‰å…¨åŠ å›º</span>
java -jar arthas-boot.jar --tunnel-server ws://arthas.example.com
</code></pre>
</li>
<li>
<p><strong>ç›‘æ§ä½“ç³»æ•´åˆ</strong>â€‹</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># Prometheusç›‘æ§é…ç½®</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'arthas-profiler'</span>
  <span class="hljs-attr">static_configs:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">'127.0.0.1:9090'</span>]
  <span class="hljs-attr">metrics_path:</span> <span class="hljs-string">'/actuator/prometheus'</span>
</code></pre>
</li>
<li>
<p><strong>æ•…éšœæ¼”ç»ƒæœºåˆ¶</strong>â€‹</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ¨¡æ‹ŸCPUé£™é«˜åœºæ™¯</span>
stress-ng --cpu 4 --<span class="hljs-built_in">timeout</span> 60s
</code></pre>
</li>
</ol>
<hr/>
<h2 data-id="heading-12">å…«ã€æ€»ç»“ï¼šå·¥å…·é€‰æ‹©çš„é»„é‡‘æ³•åˆ™</h2>
<ul>
<li>
<p><strong>ä¼˜å…ˆArthasçš„åœºæ™¯</strong>ï¼š</p>
<p>éœ€è¦å®æ—¶äº¤äº’ã€å¿«é€Ÿå®šä½ã€å¤æ‚è°ƒç”¨é“¾åˆ†æçš„ç”Ÿäº§ç¯å¢ƒæ•…éšœ</p>
</li>
<li>
<p><strong>é€‰æ‹©jstackçš„åœºæ™¯</strong>ï¼š</p>
<p>éœ€è¦é•¿æœŸå­˜æ¡£è¯Šæ–­è®°å½•ã€é…åˆCI/CDæµæ°´çº¿è¿›è¡Œæ‰¹é‡åˆ†æçš„åœºæ™¯</p>
</li>
</ul>
<p><strong>ç»ˆæå»ºè®®</strong>ï¼šåœ¨å¾®æœåŠ¡æ¶æ„ä¸‹ï¼Œæ¨èé‡‡ç”¨Arthas+Prometheus+ELKçš„ç«‹ä½“ç›‘æ§ä½“ç³»ï¼Œå®ç°ä»é—®é¢˜å‘ç°åˆ°æ ¹å› åˆ†æçš„é—­ç¯ã€‚å¯¹äºæ ¸å¿ƒäº¤æ˜“ç³»ç»Ÿï¼Œåº”å»ºç«‹Arthasçš„è‡ªåŠ¨åŒ–è¯Šæ–­é¢„æ¡ˆï¼Œç¡®ä¿é»„é‡‘æ•‘æ´æ—¶é—´çš„æœ‰æ•ˆåˆ©ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Apache Paimon å¤šæ¨¡æ€æ•°æ®æ¹–å®è·µï¼šä»ç»“æ„åŒ–åˆ°éç»“æ„åŒ–çš„æŠ€æœ¯æ¼”è¿›]]></title>    <link>https://juejin.cn/post/7587327550873632768</link>    <guid>https://juejin.cn/post/7587327550873632768</guid>    <pubDate>2025-12-25T07:25:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587327550873632768" data-draft-id="7587334152871018536" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Apache Paimon å¤šæ¨¡æ€æ•°æ®æ¹–å®è·µï¼šä»ç»“æ„åŒ–åˆ°éç»“æ„åŒ–çš„æŠ€æœ¯æ¼”è¿›"/> <meta itemprop="keywords" content="å¤§æ•°æ®,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-25T07:25:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2414974667341287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Apache Paimon å¤šæ¨¡æ€æ•°æ®æ¹–å®è·µï¼šä»ç»“æ„åŒ–åˆ°éç»“æ„åŒ–çš„æŠ€æœ¯æ¼”è¿›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2414974667341287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T07:25:55.000Z" title="Thu Dec 25 2025 07:25:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨è¿‘æœŸçš„Â StreamingÂ LakehouseÂ MeetupÂ Â·Â OnlineÂ EP.2ï½œPaimonÂ Ã—Â StarRocksÂ å…±è¯å®æ—¶æ¹–ä»“Â ç›´æ’­ä¸­ï¼ŒApacheÂ PaimonÂ PMCÂ æˆå‘˜/é˜¿é‡Œäº‘æ•°æ®æ¹–èµ„æ·±å·¥ç¨‹å¸ˆå¶ä¿Šè±ªå¸¦æ¥äº†å…³äºÂ PaimonÂ å¤šæ¨¡æ€æ•°æ®æ¹–çš„æ·±åº¦æŠ€æœ¯åˆ†äº«ã€‚</p>
<p>éšç€å¤§æ¨¡å‹è®­ç»ƒå¯¹æ•°æ®è§„æ¨¡ä¸å¤šæ ·æ€§çš„è¦æ±‚ä¸æ–­æå‡ï¼Œä¼ ç»Ÿä»¥æ‰¹å¤„ç†ä¸ºä¸­å¿ƒçš„æ•°æ®æ¹–æ¶æ„å·²éš¾ä»¥æ»¡è¶³Â AIÂ å·¥ä½œè´Ÿè½½å¯¹å®æ—¶æ€§ã€çµæ´»æ€§å’Œæˆæœ¬æ•ˆç‡çš„ç»¼åˆéœ€æ±‚ã€‚ç‰¹åˆ«æ˜¯åœ¨æ¨èç³»ç»Ÿã€AIGCÂ ç­‰å…¸å‹åœºæ™¯ä¸­ï¼Œå·¥ç¨‹å¸ˆæ—¢è¦é«˜é¢‘è¿­ä»£ç»“æ„åŒ–ç‰¹å¾ï¼Œåˆè¦é«˜æ•ˆç®¡ç†å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘ç­‰éç»“æ„åŒ–æ•°æ®ã€‚é¢å¯¹è¿™ä¸€æŒ‘æˆ˜ï¼ŒPaimonÂ ä½œä¸ºæ–°ä¸€ä»£æµå¼æ•°æ®æ¹–å­˜å‚¨å¼•æ“ï¼Œæ­£é€šè¿‡ä¸€ç³»åˆ—åº•å±‚åˆ›æ–°ï¼Œæ„å»ºé¢å‘Â AIÂ åŸç”Ÿæ—¶ä»£çš„ç»Ÿä¸€æ•°æ®åŸºç¡€è®¾æ–½ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ç»“æ„åŒ–åœºæ™¯ä¸‹çš„â€œåˆ—å˜æ›´â€å›°å¢ƒ</h2>
<p>åœ¨æ¨èã€å¹¿å‘Šç­‰Â AIÂ åº”ç”¨ä¸­ï¼Œç‰¹å¾å·¥ç¨‹æ˜¯ä¸€ä¸ªæŒç»­æ¼”è¿›çš„è¿‡ç¨‹ã€‚ä¾‹å¦‚ï¼Œç”µå•†å›¢é˜Ÿå¯èƒ½ä»Šå¤©æ–°å¢â€œç”¨æˆ·è¿‘7æ—¥ç‚¹å‡»å“ç±»åˆ†å¸ƒâ€ï¼Œæ˜å¤©åˆåŠ å…¥â€œè·¨ç«¯è¡Œä¸ºä¸€è‡´æ€§è¯„åˆ†â€ã€‚è¿™ç§åŠ¨æ€åˆ—å˜æ›´å¯¼è‡´â€œåˆ—çˆ†ç‚¸â€é—®é¢˜ï¼šè¡¨ç»“æ„é¢‘ç¹æ‰©å±•ï¼Œè€Œå†å²æ•°æ®éœ€ä¸æ–°ç‰¹å¾å¯¹é½ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10f4b24ea2ab4ba2906ce57f2a80e5dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767252355&amp;x-signature=ENoCp4PkKjbCagSXgtplA1YCh8c%3D" alt="image.png" loading="lazy"/></p>
<p>ç„¶è€Œï¼Œå·²çŸ¥çš„è§£å†³æ–¹æ¡ˆåœ¨æ­¤åœºæ™¯ä¸‹ä»ç„¶å­˜åœ¨ä¸€äº›é—®é¢˜ï¼š</p>
<ul>
<li>
<p><strong>ä¸»é”®è¡¨Â partial-update</strong>ï¼šè™½æ”¯æŒæŒ‰ä¸»é”®æ›´æ–°éƒ¨åˆ†åˆ—ï¼Œä½†å…¶åŸºäºÂ LSMÂ æ ‘çš„å®ç°ä¼šåœ¨å†™å…¥é¢‘ç¹æ—¶äº§ç”Ÿå¤§é‡å°æ–‡ä»¶ï¼ŒæŸ¥è¯¢æ€§èƒ½æ€¥å‰§ä¸‹é™ï¼›CompactionÂ è™½å¯åˆå¹¶æ–‡ä»¶ï¼Œå´å¸¦æ¥æ•°å€çš„ä¸´æ—¶å­˜å‚¨å¼€é”€ã€‚</p>
</li>
<li>
<p><strong>odpsÂ å­˜æ–°ç‰¹å¾å€¼Â +Â JoinÂ æ‹¼æ¥æ–¹æ¡ˆ</strong>ï¼šå°†æ–°ç‰¹å¾å†™å…¥ç‹¬ç«‹è¡¨ï¼ŒæŸ¥è¯¢æ—¶é€šè¿‡ä¸»é”®Â JoinÂ åˆå¹¶ã€‚çœ‹ä¼¼é¿å…äº†é‡å†™ï¼Œä½†Â JoinÂ æ“ä½œæœ¬èº«åœ¨Â PBÂ çº§æ•°æ®ä¸Šå¼€é”€å·¨å¤§ï¼Œä¸”éš¾ä»¥ä¼˜åŒ–ã€‚</p>
</li>
<li>
<p><strong>AppendÂ è¡¨Â +Â MERGEÂ INTO</strong>ï¼šSQLÂ è¯­æ³•ç®€æ´ï¼Œä½†åº•å±‚ä»éœ€é‡å†™æ•´ä¸ªæ•°æ®æ–‡ä»¶ã€‚å¯¹äºæ¯å¤©å¢é‡è¾¾Â PBÂ çº§çš„è®­ç»ƒé›†ï¼Œå…¨é‡é‡å†™ä¸ä»…æˆæœ¬é«˜æ˜‚ï¼Œè¿˜æ˜¾è‘—æ‹–æ…¢ç‰¹å¾ä¸Šçº¿å‘¨æœŸã€‚</p>
</li>
</ul>
<p>è¿™äº›æ–¹æ¡ˆæœ¬è´¨ä¸Šéƒ½æœªèƒ½è§£è€¦â€œåˆ—â€çš„ç‰©ç†å­˜å‚¨ï¼Œå¯¼è‡´çµæ´»æ€§ä¸æ•ˆç‡ä¸å¯å…¼å¾—ã€‚</p>
<h2 data-id="heading-1">äºŒã€PaimonÂ çš„åˆ—åˆ†ç¦»æ¶æ„ï¼šä»¥å…¨å±€Â RowÂ IDÂ ä¸ºæ ¸å¿ƒ</h2>
<p>PaimonÂ æå‡ºäº†Â <strong>åˆ—åˆ†ç¦»å­˜å‚¨æ¶æ„</strong>ï¼Œå…¶æ ¸å¿ƒæ˜¯å¼•å…¥Â <strong>å…¨å±€å”¯ä¸€ä¸”è¿ç»­çš„Â RowÂ ID</strong>ã€‚æ¯è¡Œæ•°æ®åœ¨é¦–æ¬¡å†™å…¥æ—¶è¢«åˆ†é…ä¸€ä¸ªåœ¨æ•´ä¸ªè¡¨ç”Ÿå‘½å‘¨æœŸå†…ä¸å˜çš„Â IDï¼Œä¸”æ¯ä¸ªæ•°æ®æ–‡ä»¶å†…çš„Â RowÂ IDÂ æ˜¯è¿ç»­çš„ï¼Œå…ƒæ•°æ®ä¼šè®°å½•è¯¥æ–‡ä»¶çš„èµ·å§‹Â RowÂ IDã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2559e2a802084e918c59aab059cdf8cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767252355&amp;x-signature=iahpSAOct7SlKd%2BARqCqv%2Fv4N58%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™ä¸€è®¾è®¡å¸¦æ¥ä¸¤ä¸ªå…³é”®èƒ½åŠ›ï¼š</p>
<ol>
<li>
<p><strong>ç²¾å‡†å®šä½ä»»æ„è¡Œ</strong>ï¼šé€šè¿‡Â RowÂ IDÂ å¯ç›´æ¥å®šä½åˆ°å…·ä½“æ–‡ä»¶åŠåç§»ï¼›</p>
</li>
<li>
<p><strong>è·¨æ–‡ä»¶è‡ªåŠ¨å…³è”</strong>ï¼šå½“æŸ¥è¯¢æ¶‰åŠå¤šä¸ªåˆ—æ—¶ï¼Œç³»ç»Ÿèƒ½æ ¹æ®Â RowÂ IDÂ èŒƒå›´è‡ªåŠ¨å°†åˆ†æ•£åœ¨ä¸åŒæ–‡ä»¶ä¸­çš„åˆ—æ•°æ®åœ¨å­˜å‚¨å±‚åˆå¹¶ã€‚</p>
</li>
</ol>
<p>ä¾‹å¦‚ï¼Œå½“æ–°å¢â€œç”¨æˆ·å…´è¶£æ ‡ç­¾â€åˆ—æ—¶ï¼ŒPaimonÂ ä»…éœ€å†™å…¥ä¸€ä¸ªåŒ…å«è¯¥åˆ—ä¸å¯¹åº”Â RowÂ IDÂ çš„æ–°æ–‡ä»¶ï¼Œæ— éœ€ä¿®æ”¹åŸå§‹ç‰¹å¾æ–‡ä»¶ã€‚æŸ¥è¯¢æ—¶ï¼Œå¼•æ“é€æ˜åœ°å°†ä¸¤ç»„æ–‡ä»¶æŒ‰Â RowÂ IDÂ å¯¹é½åˆå¹¶ï¼Œ<strong>æ— éœ€Â SQLÂ å±‚Â Joinï¼Œä¹Ÿæ— éœ€é‡å†™å†å²æ•°æ®</strong>ã€‚è¿™ç§æœºåˆ¶å°†åˆ—å˜æ›´çš„å­˜å‚¨æˆæœ¬ä»Â O(N)Â é™è‡³Â O(Î”N)ï¼Œæå¤§æå‡äº†ç‰¹å¾è¿­ä»£æ•ˆç‡ï¼ŒåŒæ—¶èŠ‚çœäº†æ•°åå€çš„å­˜å‚¨ç©ºé—´ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€è¿ˆå‘å¤šæ¨¡æ€ï¼šBlobÂ æ•°æ®ç±»å‹çš„ä¸‰å¤§çªç ´</h2>
<p>AIÂ è®­ç»ƒä¸å†å±€é™äºç»“æ„åŒ–ç‰¹å¾ã€‚AIGCã€å¤šæ¨¡æ€å¤§æ¨¡å‹ç­‰åœºæ™¯è¦æ±‚æ•°æ®æ¹–èƒ½é«˜æ•ˆå¤„ç†å›¾åƒã€çŸ­è§†é¢‘ã€é•¿éŸ³é¢‘ç­‰éç»“æ„åŒ–æ•°æ®ã€‚è¿™ç±»æ•°æ®å…·æœ‰ä¸¤å¤§ç‰¹ç‚¹ï¼š<strong>ä½“ç§¯å·®å¼‚å¤§</strong>ï¼ˆå‡ Â MBÂ åˆ°æ•°åÂ GBï¼‰ã€<strong>è®¿é—®ç¨€ç–</strong>ï¼ˆè®­ç»ƒæ—¶é€šå¸¸åªè¯»å–ç‰‡æ®µï¼‰ã€‚</p>
<p>ä¼ ç»Ÿåˆ—å¼æ ¼å¼ï¼ˆå¦‚Â Parquetï¼‰å°†å¤šæ¨¡æ€æ•°æ®ä¸ç»“æ„åŒ–å­—æ®µæ··å­˜ï¼Œå¯¼è‡´å³ä½¿åªæŸ¥ç”¨æˆ·Â IDï¼Œä¹Ÿéœ€åŠ è½½æ•´ä¸ªå«è§†é¢‘çš„å¤§æ–‡ä»¶ï¼ŒI/OÂ æ•ˆç‡æä½ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d52fdfd1ce1b4c3b907aabcf28493425~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767252355&amp;x-signature=HCCRmlF9DFeIUKtOG4qtJqi3fps%3D" alt="image.png" loading="lazy"/></p>
<p>PaimonÂ å¼•å…¥Â <strong>BlobÂ æ•°æ®ç±»å‹</strong>ï¼Œå®ç°ä¸‰å¤§çªç ´ï¼š</p>
<ol>
<li>
<p><strong>ç‰©ç†åˆ†ç¦»å­˜å‚¨</strong>ï¼šBlobÂ åˆ—ç‹¬ç«‹æˆæ–‡ä»¶ï¼Œä¸ç»“æ„åŒ–æ•°æ®å®Œå…¨è§£è€¦ã€‚æŸ¥è¯¢ç»“æ„åŒ–å­—æ®µæ—¶ï¼ŒBlobÂ æ–‡ä»¶å®Œå…¨ä¸å‚ä¸Â I/Oï¼Œé¿å…èµ„æºæµªè´¹ã€‚</p>
</li>
<li>
<p><strong>å¤šå¼•æ“ç»Ÿä¸€æŠ½è±¡</strong>ï¼šæ— è®ºä½¿ç”¨Â Sparkã€Flinkã€JavaÂ SDKÂ è¿˜æ˜¯Â PythonÂ å®¢æˆ·ç«¯ï¼Œå‡å¯é€šè¿‡æ ‡å‡†çš„Â <code>BYTES</code>Â æˆ–Â <code>BINARY</code>Â æˆ–Â BLOBÂ ç±»å‹å®šä¹‰Â BlobÂ å­—æ®µï¼Œæ¥å£ä¸€è‡´ï¼Œé™ä½æ¥å…¥æˆæœ¬ã€‚</p>
</li>
<li>
<p><strong>blob-as-descriptorÂ æœºåˆ¶</strong>ï¼šé’ˆå¯¹è¶…å¤§éç»“æ„åŒ–æ•°æ®ï¼ˆå¦‚åå‡ GBçš„è§†é¢‘/æ—¥å¿—æ–‡ä»¶ï¼‰ï¼Œä¼ ç»Ÿè®¡ç®—å¼•æ“ï¼ˆå¦‚Flink/Sparkï¼‰æ— æ³•å°†å…¶å…¨é‡åŠ è½½åˆ°å†…å­˜ä¸­å¤„ç†ã€‚ä¸ºæ­¤ï¼Œç³»ç»Ÿå¼•å…¥äº†Â blob-as-descriptorÂ æœºåˆ¶â€”â€”å®ƒæ˜¯ä¸€ç§åè®®ï¼Œé€šè¿‡è®°å½•æ•°æ®åœ¨å¤–éƒ¨å­˜å‚¨ï¼ˆå¦‚OSSï¼‰ä¸­çš„ä½ç½®ã€æ–‡ä»¶è·¯å¾„ã€èµ·å§‹åç§»å’Œé•¿åº¦ç­‰å…ƒä¿¡æ¯ï¼Œå°†å®é™…æ•°æ®è¯»å–ä»»åŠ¡äº¤ç»™ä¸‹æ¸¸ç³»ç»ŸæŒ‰éœ€æµå¼åŠ è½½ã€‚è¿™æ ·é¿å…äº†å†…å­˜æº¢å‡ºï¼Œå®ç°äº†å¤§æ–‡ä»¶é«˜æ•ˆå…¥æ¹–ã€‚</p>
</li>
</ol>
<h2 data-id="heading-3">å››ã€ç”Ÿäº§éªŒè¯ä¸æœªæ¥æ¼”è¿›</h2>
<p>å½“å‰ï¼ŒPaimonÂ BlobÂ å·²åœ¨æ·˜å®ã€å¤©çŒ«ç­‰æ ¸å¿ƒä¸šåŠ¡ä¸­å®ç°å¤§è§„æ¨¡è½åœ°ï¼Œæ¯å¤©æœ‰è¿‘Â 10PBÂ çš„å¤šæ¨¡æ€æ•°æ®ï¼ˆå¦‚è§†é¢‘ã€éŸ³é¢‘ã€å›¾åƒï¼‰é€šè¿‡Â BlobÂ DescriptorÂ åè®®é«˜æ•ˆå†™å…¥Â PaimonÂ æ¹–ï¼Œé¿å…äº†Â FlinkÂ æˆ–Â SparkÂ å°†å¤§æ–‡ä»¶å…¨é‡åŠ è½½åˆ°å†…å­˜çš„é—®é¢˜ã€‚ç„¶è€Œï¼Œåœ¨å®é™…ä½¿ç”¨ä¸­ä»é¢ä¸´ä¸‰å¤§å…³é”®æŒ‘æˆ˜ï¼š</p>
<ul>
<li>
<p><strong>æ•°æ®é‡å¤ä¸åˆ é™¤é—®é¢˜</strong>ï¼Œç”¨æˆ·å¸¸å› å¤šæ¬¡ä¸Šä¼ ç›¸åŒå†…å®¹å¯¼è‡´å¤§é‡å†—ä½™ï¼ˆé¢„ä¼°çº¦Â 1PB/å¤©çš„é‡å¤æ•°æ®ï¼‰ï¼ŒäºŸéœ€é«˜æ•ˆçš„å»é‡ä¸åˆ é™¤æœºåˆ¶ï¼›</p>
</li>
<li>
<p><strong>å°æ–‡ä»¶ç¢ç‰‡åŒ–é—®é¢˜</strong>ï¼Œé¢‘ç¹çš„å°è§„æ¨¡å†™å…¥äº§ç”Ÿæµ·é‡å¾®å°Â BlobÂ æ–‡ä»¶ï¼Œä¸¥é‡å½±å“è¯»å–æ€§èƒ½å’Œå­˜å‚¨æ•ˆç‡ï¼›</p>
</li>
<li>
<p><strong>ç‚¹æŸ¥å¬å›å»¶è¿Ÿé«˜</strong>ï¼Œç¼ºä¹å¯¹ä¸»é”®ï¼ˆå¦‚Â UIDï¼‰æˆ–å‘é‡ç‰¹å¾çš„å¿«é€Ÿç´¢å¼•æ”¯æŒï¼Œéš¾ä»¥æ»¡è¶³æ¯«ç§’çº§å®æ—¶æŸ¥è¯¢éœ€æ±‚ã€‚</p>
</li>
</ul>
<p>é’ˆå¯¹ä¸Šè¿°é—®é¢˜ï¼Œå›¢é˜Ÿå·²è§„åˆ’æ¸…æ™°çš„æ¼”è¿›è·¯å¾„ã€‚</p>
<ul>
<li>
<p><strong>ç‚¹æŸ¥æ€§èƒ½ä¼˜åŒ–</strong>æ–¹é¢ï¼Œæ¨è¿›çƒ­Â IDÂ ä¸‹æ¨èƒ½åŠ›ï¼Œå¹¶æ„å»ºç»Ÿä¸€çš„<strong>å…¨å±€ç´¢å¼•æ¡†æ¶</strong>ï¼ŒåŒæ—¶æ”¯æŒæ ‡é‡ç´¢å¼•ï¼ˆå¦‚å­—ç¬¦ä¸²ã€æ•°å€¼ï¼‰å’Œå‘é‡ç´¢å¼•ï¼ˆç”¨äºÂ AIÂ å¬å›ï¼‰ï¼Œå…¶ä¸­åŸºç¡€ç‰ˆæ ‡é‡ç´¢å¼•é¢„è®¡æœ¬æœˆåœ¨å¼€æºÂ MasterÂ åˆ†æ”¯å¯ç”¨ã€‚</p>
</li>
<li>
<p><strong>å¤šæ¨¡æ€æ•°æ®ç®¡ç†</strong>æ–¹é¢ï¼Œå¯åŠ¨ä¸¤é¡¹æ ¸å¿ƒåŠŸèƒ½ï¼š</p>
<ul>
<li>
<p>ä¸€æ˜¯åŸºäºÂ <strong>DeletionÂ VectorÂ +Â å ä½ç¬¦</strong>Â çš„é€»è¾‘åˆ é™¤æ–¹æ¡ˆï¼Œåœ¨Â CompactionÂ é˜¶æ®µå®‰å…¨æ¸…ç†é‡å¤æˆ–æ— æ•ˆæ•°æ®ï¼›</p>
</li>
<li>
<p>äºŒæ˜¯å¼€å‘Â <strong>BlobÂ CompactionÂ æœºåˆ¶</strong>ï¼Œè‡ªåŠ¨åˆå¹¶å°æ–‡ä»¶ä»¥æå‡è¯»æ€§èƒ½å’Œå­˜å‚¨å¯†åº¦ã€‚</p>
</li>
</ul>
</li>
</ul>
<p>æ­¤å¤–ï¼Œå›¢é˜Ÿè¿˜å‰ç»æ€§åœ°æå‡º<strong>è·¨è¡¨Â BlobÂ å¤ç”¨</strong>çš„æ„æƒ³â€”â€”å¤šä¸ªè¡¨å¼•ç”¨åŒä¸€è§†é¢‘æ—¶ä»…å­˜å‚¨ä¸€ä»½ç‰©ç†æ•°æ®ï¼Œè™½å› æ¶‰åŠå¤šè¡¨çŠ¶æ€åŒæ­¥ä¸ä¸€è‡´æ€§ä¿éšœè€ŒæŠ€æœ¯éš¾åº¦è¾ƒé«˜ï¼Œä½†å·²åˆ—å…¥é•¿æœŸä¼˜åŒ–æ–¹å‘ã€‚æ•´ä½“ç›®æ ‡æ˜¯æ‰“é€ ä¸€ä¸ªé«˜æ•ˆã€ç´§å‡‘ã€å¯å¿«é€Ÿæ£€ç´¢çš„å¤šæ¨¡æ€æ•°æ®æ¹–åº•åº§ï¼Œæ”¯æ’‘æœªæ¥Â AIGCÂ ä¸æ™ºèƒ½æ¨èç­‰åœºæ™¯çš„è§„æ¨¡åŒ–åº”ç”¨ã€‚</p>
<h2 data-id="heading-4">ç»“è¯­</h2>
<p>PaimonÂ çš„æŠ€æœ¯æ¼”è¿›ï¼Œä»ç»“æ„åŒ–åœºæ™¯çš„åˆ—åˆ†ç¦»ï¼Œåˆ°å¤šæ¨¡æ€æ•°æ®çš„Â BlobÂ æŠ½è±¡ï¼Œæ¯ä¸€é¡¹åˆ›æ–°éƒ½æºäºçœŸå®ä¸šåŠ¡ç—›ç‚¹ï¼Œå¹¶åå“ºäºå·¥ç¨‹æ•ˆç‡çš„æå‡ã€‚å®ƒä¸å†åªæ˜¯â€œå­˜å‚¨æ•°æ®çš„åœ°æ–¹â€ï¼Œè€Œæ˜¯æˆä¸ºÂ <strong>AIÂ åŸç”Ÿæ—¶ä»£çš„æ•°æ®æ“ä½œç³»ç»Ÿ</strong>â€”â€”é«˜æ•ˆã€çµæ´»ã€æ™ºèƒ½ã€‚</p>
<p>PaimonÂ å°†é•¿æœŸã€æŒç»­ä¸”å¤§åŠ›æŠ•å…¥å…¨æ¨¡æ€æ•°æ®æ¹–å»ºè®¾ï¼Œå…¨é¢æ”¯æŒå›¾åƒã€éŸ³è§†é¢‘ç­‰éç»“æ„åŒ–æ•°æ®çš„é«˜æ•ˆå…¥æ¹–ã€å»é‡ã€åˆå¹¶ä¸æ¯«ç§’çº§ç‚¹æŸ¥ã€‚é€šè¿‡Â DeletionÂ Vectorã€CompactionÂ ä¼˜åŒ–å’Œå…¨å±€ç´¢å¼•ç­‰èƒ½åŠ›ï¼ŒPaimonÂ æ­£æ„å»ºé¢å‘Â AIÂ æ—¶ä»£çš„ç»Ÿä¸€æ•°æ®åº•åº§ã€‚ä½œä¸ºå¼€æ”¾æ¹–è¡¨æ ¼å¼ã€‚</p>
<p>é˜¿é‡Œäº‘DLFÂ åœ¨äº‘ä¸Šæä¾›å…¨æ‰˜ç®¡çš„Paimonå­˜å‚¨æœåŠ¡ï¼Œæ”¯æŒPaimonçš„æ™ºèƒ½å­˜å‚¨ä¼˜åŒ–ä¸å†·çƒ­åˆ†å±‚ã€‚åŒæ—¶ï¼ŒDLFæä¾›å®‰å…¨ã€å¼€æ”¾ã€æ”¯æŒå…¨æ¨¡æ€æ•°æ®çš„ä¸€ä½“åŒ–Lakehouseç®¡ç†å¹³å°ï¼Œæ·±åº¦èå…¥å…¼å®¹å…¶ä»–ä¾‹å¦‚Â Icebergã€LanceÂ ç­‰ä¸»æµæ ¼å¼ï¼Œæ— ç¼å¯¹æ¥Â Flinkã€SparkÂ ç­‰è®¡ç®—å¼•æ“ï¼Œï¼Œä¸ºÂ AIGCÂ ä¸å¤šæ¨¡æ€æ™ºèƒ½åº”ç”¨æä¾›é«˜æ€§èƒ½ã€ä½æˆæœ¬ã€æ˜“æ²»ç†çš„æ•°æ®åŸºç¡€è®¾æ–½ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f146b9b56ca34428a90125a1ed1a26ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767252355&amp;x-signature=Rmb%2FiiPVpS980qzGO6L%2F3aVDnck%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨æ•°æ®é©±åŠ¨çš„Â AIÂ æ—¶ä»£ï¼ŒåŸºç¡€è®¾æ–½çš„ä»·å€¼ï¼Œæœ€ç»ˆè¦ä½“ç°åœ¨å¯¹ä¸šåŠ¡æ•ˆç‡çš„å®è´¨æ€§æ¨åŠ¨ä¸Šã€‚Â PaimonÂ çš„å®è·µï¼Œæ­£ä¸ºæ•´ä¸ªè¡Œä¸šæä¾›ä¸€æ¡é€šå¾€é«˜æ•ˆã€ç»Ÿä¸€ã€æ™ºèƒ½æ•°æ®æ¹–çš„æ–°è·¯å¾„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ¨¡å‹åŸç†å‰–æâ€”â€”å¤šå¤´å¹¶è¡Œ + æ½œå˜é‡ååŒï¼šåŸç†ã€åº”ç”¨ä¸éƒ¨ç½²ä¼˜åŒ–]]></title>    <link>https://juejin.cn/post/7587334152870477864</link>    <guid>https://juejin.cn/post/7587334152870477864</guid>    <pubDate>2025-12-25T05:42:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587334152870477864" data-draft-id="7587322796825985064" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ¨¡å‹åŸç†å‰–æâ€”â€”å¤šå¤´å¹¶è¡Œ + æ½œå˜é‡ååŒï¼šåŸç†ã€åº”ç”¨ä¸éƒ¨ç½²ä¼˜åŒ–"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2025-12-25T05:42:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‰¾é†’"/> <meta itemprop="url" content="https://juejin.cn/user/708512558088669"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ¨¡å‹åŸç†å‰–æâ€”â€”å¤šå¤´å¹¶è¡Œ + æ½œå˜é‡ååŒï¼šåŸç†ã€åº”ç”¨ä¸éƒ¨ç½²ä¼˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/708512558088669/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‰¾é†’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T05:42:20.000Z" title="Thu Dec 25 2025 05:42:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    15
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>â€œå¤šå¤´å¹¶è¡Œ+æ½œå˜é‡ååŒâ€æ˜¯æ·±åº¦å­¦ä¹ æ³¨æ„åŠ›æœºåˆ¶çš„æ ¸å¿ƒè¿›é˜¶æ¶æ„ï¼Œé€šè¿‡â€œå¤šç»´åº¦å¹¶è¡ŒæŒ–æ˜â€ä¸â€œéšæ€§ç‰¹å¾ååŒèåˆâ€ï¼Œçªç ´å•ä¸€æ³¨æ„åŠ›å¤´çš„è¡¨è¾¾ç“¶é¢ˆï¼Œé«˜æ•ˆæ•æ‰æ•°æ®ä¸­çš„å¤æ‚å…³è”ï¼ˆå¦‚è¯­ä¹‰ã€æ—¶åºã€ç‰¹å¾ä¾èµ–ï¼‰ã€‚å…¶è®¾è®¡ç†å¿µå®Œç¾é€‚é…å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ã€è¯­éŸ³è¯†åˆ«ï¼ˆASRï¼‰ç­‰å¤æ‚AIä»»åŠ¡ï¼Œå°¤å…¶åœ¨æœ¬åœ°åŒ–éƒ¨ç½²åœºæ™¯ä¸­ï¼Œèƒ½å…¼é¡¾æ¨¡å‹è¡¨è¾¾èƒ½åŠ›ä¸ç¡¬ä»¶å¹¶è¡Œæ•ˆç‡ï¼Œæ˜¯å½“å‰é«˜æ€§èƒ½AIç³»ç»Ÿçš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€æ ¸å¿ƒæ¦‚å¿µä¸åº•å±‚é€»è¾‘</h3>
<h4 data-id="heading-2">1. æ•´ä½“å®šä¹‰</h4>
<p>è¯¥æ¶æ„ç”±<strong>å¤šå¤´å¹¶è¡Œ</strong>ï¼ˆMulti-Head Parallelismï¼‰å’Œ<strong>æ½œå˜é‡ååŒ</strong>ï¼ˆLatent Variable Collaborationï¼‰ä¸¤ä¸ªæ ¸å¿ƒæ¨¡å—ç»„æˆï¼š</p>
<ul>
<li>å¤šå¤´å¹¶è¡Œï¼šå°†è¾“å…¥ç‰¹å¾æ‹†åˆ†åˆ°å¤šä¸ªç‹¬ç«‹å­ç©ºé—´ï¼Œé€šè¿‡å¹¶è¡Œè®¡ç®—æŒ–æ˜å·®å¼‚åŒ–å…³è”ï¼›</li>
<li>æ½œå˜é‡ååŒï¼šèåˆå¤šä¸ªå­ç©ºé—´çš„éšæ€§ç‰¹å¾ï¼ˆæ½œå˜é‡ï¼‰ï¼Œå½¢æˆæ— ç“¶é¢ˆçš„å…¨å±€è¡¨è¾¾ã€‚
æœ¬è´¨æ˜¯â€œå¹¶è¡Œæ¢ç´¢+é›†ä¸­æ•´åˆâ€ï¼Œæ—¢è§£å†³äº†å•ä¸€è§†è§’çš„ä¿¡æ¯å±€é™ï¼Œåˆé¿å…äº†å¹¶è¡Œç»“æœçš„ç¢ç‰‡åŒ–ã€‚</li>
</ul>
<h4 data-id="heading-3">2. æ¨¡å—1ï¼šå¤šå¤´å¹¶è¡Œâ€”â€”å¤šç»´åº¦å¹¶è¡Œæ¢ç´¢</h4>
<h5 data-id="heading-4">ï¼ˆ1ï¼‰æ ¸å¿ƒåŸç†</h5>
<p>å°†åŸå§‹è¾“å…¥ç‰¹å¾é€šè¿‡<strong>å·®å¼‚åŒ–çº¿æ€§æŠ•å½±</strong>ï¼Œæ‹†åˆ†åˆ°hä¸ªç›¸äº’ç‹¬ç«‹çš„â€œå­ç‰¹å¾ç©ºé—´â€ï¼Œæ¯ä¸ªç©ºé—´å¯¹åº”ä¸€ä¸ªâ€œæ³¨æ„åŠ›å¤´â€ï¼ˆAttention Headï¼‰ã€‚æ¯ä¸ªå¤´ç‹¬ç«‹è®¡ç®—æ³¨æ„åŠ›æƒé‡ï¼Œä¸“æ³¨æŒ–æ˜è¯¥å­ç©ºé—´å†…çš„ç‰¹å®šå…³è”æ¨¡å¼ï¼ˆå¦‚æœ‰çš„å¤´å…³æ³¨å±€éƒ¨ç‰¹å¾ï¼Œæœ‰çš„å…³æ³¨é•¿è·ç¦»ä¾èµ–ï¼‰ã€‚</p>
<h5 data-id="heading-5">ï¼ˆ2ï¼‰æ•°å­¦ç®€åŒ–è¡¨è¾¾</h5>
<p>å‡è®¾è¾“å…¥ç‰¹å¾ç»´åº¦ä¸º<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">d_{model}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œå¤šå¤´æ•°ä¸ºhï¼Œæ¯ä¸ªå¤´çš„ç»´åº¦ä¸º<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub><mo>=</mo><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mi mathvariant="normal">/</mi><mi>h</mi></mrow><annotation encoding="application/x-tex">d_k = d_{model}/h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">/</span><span class="mord mathnormal">h</span></span></span></span></span>ï¼ˆä¿è¯æ€»ç»´åº¦ä¸å˜ï¼‰ï¼š</p>
<ol>
<li>æŠ•å½±æ‹†åˆ†ï¼šåŸå§‹æŸ¥è¯¢ï¼ˆQï¼‰ã€é”®ï¼ˆKï¼‰ã€å€¼ï¼ˆVï¼‰é€šè¿‡ä¸åŒçº¿æ€§çŸ©é˜µæŠ•å½±ï¼Œå¾—åˆ°hç»„ç‹¬ç«‹çš„<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Q</mi><mi>i</mi></msub><mtext>ã€</mtext><msub><mi>K</mi><mi>i</mi></msub><mtext>ã€</mtext><msub><mi>V</mi><mi>i</mi></msub><mtext>ï¼ˆ</mtext><mi>i</mi><mo>=</mo><mn>1</mn><mo>âˆ¼</mo><mi>h</mi><mtext>ï¼‰</mtext></mrow><annotation encoding="application/x-tex">Q_iã€K_iã€V_iï¼ˆi=1\sim hï¼‰</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord cjk_fallback">ã€</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord cjk_fallback">ã€</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord cjk_fallback">ï¼ˆ</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ¼</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal">h</span><span class="mord cjk_fallback">ï¼‰</span></span></span></span></span>ï¼›</li>
<li>å¹¶è¡Œè®¡ç®—ï¼šæ¯ä¸ªå¤´ç‹¬ç«‹æ‰§è¡Œæ³¨æ„åŠ›å…¬å¼ï¼š<br/>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mi>t</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi>Q</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>K</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>V</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mi>S</mi><mi>o</mi><mi>f</mi><mi>t</mi><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">(</mo><msub><mi>Q</mi><mi>i</mi></msub><msubsup><mi>K</mi><mi>i</mi><mi>T</mi></msubsup><mi mathvariant="normal">/</mi><msqrt><msub><mi>d</mi><mi>k</mi></msub></msqrt><mo stretchy="false">)</mo><mo separator="true">â‹…</mo><msub><mi>V</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">Attention(Q_i, K_i, V_i) = Softmax(Q_iK_i^T/\sqrt{d_k})Â·V_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">A</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.1159em;vertical-align:-0.2587em;"/><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">t</span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4413em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2587em;"><span/></span></span></span></span></span><span class="mord">/</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8572em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-2.8172em;"><span class="pstrut" style="height:3em;"/><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702&#10;c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14&#10;c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54&#10;c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10&#10;s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429&#10;c69,-144,104.5,-217.7,106.5,-221&#10;l0 -0&#10;c5.3,-9.3,12,-14,20,-14&#10;H400000v40H845.2724&#10;s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7&#10;c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z&#10;M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1828em;"><span/></span></span></span></span><span class="mclose">)</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼›</li>
<li>ç»“æœæš‚å­˜ï¼šæ¯ä¸ªå¤´çš„è¾“å‡ºåŒ…å«è¯¥å­ç©ºé—´çš„â€œæ½œå˜é‡â€ï¼ˆå¦‚ç‰¹å¾é‡è¦æ€§æƒé‡ã€å…³è”å¼ºåº¦ï¼‰ã€‚</li>
</ol>
<h5 data-id="heading-6">ï¼ˆ3ï¼‰å…³é”®ä¼˜åŠ¿ï¼šå·®å¼‚åŒ–ä¸å¹¶è¡Œæ•ˆç‡</h5>
<ul>
<li>å·®å¼‚åŒ–ï¼šä¸åŒæŠ•å½±çŸ©é˜µè®©æ¯ä¸ªå¤´å­¦ä¹ åˆ°ç‹¬ç‰¹çš„å…³è”æ¨¡å¼ï¼ˆå¦‚LLMä¸­ï¼Œå¤´1å…³æ³¨è¯­æ³•ç»“æ„ï¼Œå¤´2å…³æ³¨è¯­ä¹‰æ­é…ï¼Œå¤´3å…³æ³¨æŒ‡ä»£å…³ç³»ï¼‰ï¼Œé¿å…ä¿¡æ¯å†—ä½™ï¼›</li>
<li>å¹¶è¡Œæ€§ï¼šå¤šå¤´è®¡ç®—å®Œå…¨ç‹¬ç«‹ï¼Œå¤©ç„¶é€‚é…GPU/CPUçš„å¹¶è¡Œæ¶æ„ï¼ˆå¦‚å¤šæ ¸å¿ƒæ‹†åˆ†è®¡ç®—ï¼‰ï¼Œæ˜¾è‘—æå‡æ¨ç†é€Ÿåº¦ã€‚</li>
</ul>
<h4 data-id="heading-7">3. æ¨¡å—2ï¼šæ½œå˜é‡ååŒâ€”â€”éšæ€§ç‰¹å¾é›†ä¸­æ•´åˆ</h4>
<h5 data-id="heading-8">ï¼ˆ1ï¼‰æ½œå˜é‡çš„å®šä¹‰</h5>
<p>â€œæ½œå˜é‡â€æŒ‡æ¯ä¸ªæ³¨æ„åŠ›å¤´åœ¨è®¡ç®—ä¸­å­¦ä¹ åˆ°çš„<strong>éšæ€§å…³è”ä¿¡æ¯</strong>ï¼ˆæœªç›´æ¥æ˜¾å¼è¾“å…¥ï¼‰ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>LLMä¸­ï¼šè¯­ä¹‰å…³è”å¼ºåº¦ã€é•¿è·ç¦»ä¾èµ–æƒé‡ã€è¯­æ³•ç»“æ„ä¼˜å…ˆçº§ï¼›</li>
<li>ASRä¸­ï¼šé¢‘è°±ç‰¹å¾å…³è”ã€éŸ³ç´ æ—¶åºä¾èµ–ã€å™ªå£°æŠ‘åˆ¶æ©ç ã€‚</li>
</ul>
<h5 data-id="heading-9">ï¼ˆ2ï¼‰ååŒæœºåˆ¶ï¼šè§£å†³â€œå¹¶è¡Œç¢ç‰‡åŒ–â€é—®é¢˜</h5>
<p>å•ä¸€å¤šå¤´å¹¶è¡Œä¼šäº§ç”Ÿhä¸ªç‹¬ç«‹çš„ç‰¹å¾è¾“å‡ºï¼Œæ½œå˜é‡ååŒé€šè¿‡ä»¥ä¸‹æ–¹å¼æ•´åˆï¼š</p>





























<table><thead><tr><th>ååŒæ–¹å¼</th><th>åŸç†</th><th>é€‚ç”¨åœºæ™¯</th><th>è®¡ç®—å¤æ‚åº¦</th></tr></thead><tbody><tr><td>æ‹¼æ¥èåˆï¼ˆConcatï¼‰</td><td>ç›´æ¥æ‹¼æ¥hä¸ªå¤´çš„è¾“å‡ºï¼Œé€šè¿‡çº¿æ€§å±‚å‹ç¼©ç»´åº¦</td><td>LLMã€å¤æ‚æ–‡æœ¬ç”Ÿæˆ</td><td>ä¸­-é«˜</td></tr><tr><td>åŠ æƒæ±‚å’Œï¼ˆWeighted Sumï¼‰</td><td>ç»™æ¯ä¸ªå¤´åˆ†é…å¯å­¦ä¹ æƒé‡ï¼ŒåŠ¨æ€è°ƒæ•´é‡è¦æ€§</td><td>ASRã€å™ªå£°ç¯å¢ƒä¸‹çš„ç‰¹å¾æå–</td><td>ä½-ä¸­</td></tr><tr><td>äº¤å‰æ³¨æ„åŠ›ååŒ</td><td>ä»¥ä¸€ä¸ªå¤´çš„æ½œå˜é‡ä¸ºæŸ¥è¯¢ï¼Œå…¶ä»–å¤´ä¸ºé”®/å€¼</td><td>å¤šæ¨¡æ€ä»»åŠ¡ï¼ˆè¯­éŸ³-æ–‡æœ¬è”åŠ¨ï¼‰</td><td>é«˜</td></tr></tbody></table>
<h5 data-id="heading-10">ï¼ˆ3ï¼‰ä¸â€œå•ä¸€æ½œæ³¨æ„åŠ›â€çš„æ ¸å¿ƒåŒºåˆ«</h5>






























<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>å•ä¸€æ½œæ³¨æ„åŠ›</th><th>å¤šå¤´å¹¶è¡Œ+æ½œå˜é‡ååŒ</th></tr></thead><tbody><tr><td>ç‰¹å¾ç©ºé—´</td><td>å•ç»´åº¦ç©ºé—´ï¼Œæ˜“â€œç»´åº¦æ‹¥æŒ¤â€</td><td>å¤šå­ç©ºé—´å¹¶è¡Œï¼Œæ— è¡¨è¾¾ç“¶é¢ˆ</td></tr><tr><td>å…³è”æŒ–æ˜èƒ½åŠ›</td><td>ä»…èƒ½æ•æ‰å•ä¸€ç²’åº¦å…³è”</td><td>å¤šç²’åº¦ã€å¤šç»´åº¦å…³è”åŒæ—¶æ•æ‰</td></tr><tr><td>æ³›åŒ–èƒ½åŠ›</td><td>æ˜“è¿‡æ‹Ÿåˆï¼Œé€‚é…æ€§å·®</td><td>é€‚é…å¤šæ ·åŒ–æ•°æ®åˆ†å¸ƒ</td></tr><tr><td>å¹¶è¡Œæ•ˆç‡</td><td>æ— å¹¶è¡Œæ€§ï¼Œæ¨ç†é€Ÿåº¦æ…¢</td><td>å¤©ç„¶å¹¶è¡Œï¼Œé€‚é…ç¡¬ä»¶åŠ é€Ÿ</td></tr></tbody></table>
<h3 data-id="heading-11">äºŒã€æ ¸å¿ƒä¼˜åŠ¿ï¼šä¸ºä½•æˆä¸ºLLM/ASRçš„é¦–é€‰æ¶æ„</h3>
<h4 data-id="heading-12">1. çªç ´è¡¨è¾¾ç“¶é¢ˆï¼Œæ•æ‰å¤æ‚å…³è”</h4>
<ul>
<li>LLMåœºæ™¯ï¼šåŒæ—¶æ•æ‰çŸ­è·ç¦»è¯­æ³•æ­é…ï¼ˆå¦‚â€œæ·±åº¦å­¦ä¹ æ¡†æ¶â€ï¼‰å’Œé•¿è·ç¦»è¯­ä¹‰è¿è´¯ï¼ˆå¦‚å¯¹è¯ä¸­å‰æ–‡â€œæ¨¡å‹éƒ¨ç½²â€ä¸åæ–‡å‘¼åº”ï¼‰ï¼Œç”Ÿæˆæ–‡æœ¬çš„é€»è¾‘æ€§æå‡30%ä»¥ä¸Šï¼›</li>
<li>ASRåœºæ™¯ï¼šåŒæ—¶æ•æ‰é¢‘è°±å±€éƒ¨å…³è”ï¼ˆéŸ³ç´ è¯†åˆ«ï¼‰å’Œæ—¶åºé•¿è·ç¦»å…³è”ï¼ˆè¯­å¥æµç•…æ€§ï¼‰ï¼Œå¤æ‚å™ªå£°ç¯å¢ƒä¸‹è¯†åˆ«å‡†ç¡®ç‡æå‡10%-20%ã€‚</li>
</ul>
<h4 data-id="heading-13">2. é€‚é…ç¡¬ä»¶å¹¶è¡Œï¼Œæå‡éƒ¨ç½²æ•ˆç‡</h4>
<ul>
<li>GPUéƒ¨ç½²ï¼šå¤šå¤´è®¡ç®—å¯é€šè¿‡Tensor Parallelismæ‹†åˆ†åˆ°å¤šå¡æ ¸å¿ƒï¼ˆå¦‚h=32çš„LLMæ‹†åˆ†ä¸º4å¼ GPUï¼Œæ¯å¼ å¤„ç†8ä¸ªå¤´ï¼‰ï¼Œæ˜¾å­˜å ç”¨é™ä½50%ï¼Œæ¨ç†é€Ÿåº¦æå‡2-3å€ï¼›</li>
<li>CPU/è¾¹ç¼˜è®¾å¤‡éƒ¨ç½²ï¼šé€šè¿‡å¤šçº¿ç¨‹å¹¶è¡Œå¤„ç†ä¸åŒå¤´ï¼Œ8æ ¸CPUå¤„ç†h=8çš„å¤šå¤´æ—¶ï¼Œå»¶è¿Ÿé™ä½50%ã€‚</li>
</ul>
<h4 data-id="heading-14">3. æ³›åŒ–èƒ½åŠ›å¼ºï¼Œé€‚é…å¤šä»»åŠ¡åœºæ™¯</h4>
<ul>
<li>å¯é€šè¿‡è°ƒæ•´å¤šå¤´æ•°ï¼ˆhï¼‰å’ŒååŒæ–¹å¼é€‚é…ä¸åŒä»»åŠ¡ï¼š
<ul>
<li>è½»é‡ä»»åŠ¡ï¼ˆæ–‡æœ¬åˆ†ç±»ã€ç®€å•ASRï¼‰ï¼šh=8+åŠ æƒæ±‚å’Œï¼Œå¹³è¡¡é€Ÿåº¦ä¸æ•ˆæœï¼›</li>
<li>å¤æ‚ä»»åŠ¡ï¼ˆå¯¹è¯ç”Ÿæˆã€å¤šæ¨¡æ€è”åŠ¨ï¼‰ï¼šh=16/32+äº¤å‰æ³¨æ„åŠ›ï¼Œæå‡å…³è”æ•æ‰èƒ½åŠ›ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-15">4. æˆæœ¬æ•ˆç›Šå¹³è¡¡ï¼Œé€‚é…æœ¬åœ°åŒ–éƒ¨ç½²</h4>
<ul>
<li>å°æ¨¡å‹ï¼ˆLLaMA 7Bã€è½»é‡ASRï¼‰ï¼šh=8-16ï¼Œå•å¡RTX 3090/4090å³å¯éƒ¨ç½²ï¼Œæ˜¾å­˜å ç”¨ä»…8-12GBï¼›</li>
<li>å¤§æ¨¡å‹ï¼ˆLLaMA 70Bï¼‰ï¼šh=32-64ï¼Œé€šè¿‡å¤šå¡å¹¶è¡Œï¼ˆ4å¼ A100ï¼‰ï¼Œå…¼é¡¾æ•ˆæœä¸éƒ¨ç½²å¯è¡Œæ€§ã€‚</li>
</ul>
<h3 data-id="heading-16">ä¸‰ã€å®é™…åº”ç”¨åœºæ™¯ï¼šèšç„¦LLMä¸ASR</h3>
<h4 data-id="heading-17">1. åœºæ™¯1ï¼šLLMçš„è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼ˆæ ¸å¿ƒåº”ç”¨ï¼‰</h4>
<h5 data-id="heading-18">ï¼ˆ1ï¼‰å®ç°é€»è¾‘ï¼ˆä»¥Transformerä¸ºä¾‹ï¼‰</h5>
<ol>
<li>è¾“å…¥å¤„ç†ï¼šæ–‡æœ¬Embeddingï¼ˆç»´åº¦<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mo>=</mo><mn>512</mn><mi mathvariant="normal">/</mi><mn>1024</mn></mrow><annotation encoding="application/x-tex">d_{model}=512/1024</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">512/1024</span></span></span></span></span>ï¼‰é€šè¿‡Qã€Kã€Vçº¿æ€§æŠ•å½±ï¼›</li>
<li>å¤šå¤´æ‹†åˆ†ï¼šsplitä¸º<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo>=</mo><mn>12</mn><mi mathvariant="normal">/</mi><mn>16</mn><mi mathvariant="normal">/</mi><mn>32</mn></mrow><annotation encoding="application/x-tex">h=12/16/32</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">12/16/32</span></span></span></span></span>ä¸ªå¤´ï¼ˆå¦‚<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mo>=</mo><mn>1024</mn></mrow><annotation encoding="application/x-tex">d_{model}=1024</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1024</span></span></span></span></span>ï¼Œh=16ï¼Œæ¯ä¸ªå¤´ç»´åº¦<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub><mo>=</mo><mn>64</mn></mrow><annotation encoding="application/x-tex">d_k=64</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">64</span></span></span></span></span>ï¼‰ï¼›</li>
<li>å¹¶è¡Œè®¡ç®—ï¼šæ¯ä¸ªå¤´ç‹¬ç«‹è®¡ç®—è‡ªæ³¨æ„åŠ›ï¼ŒæŒ–æ˜ä¸åŒè¯­ä¹‰æ½œå˜é‡ï¼›</li>
<li>æ½œå˜é‡ååŒï¼šæ‹¼æ¥æ‰€æœ‰å¤´çš„è¾“å‡ºï¼Œé€šè¿‡çº¿æ€§å±‚å¾—åˆ°å…¨å±€æ³¨æ„åŠ›ç‰¹å¾ï¼Œè¾“å…¥Feed-Forwardç½‘ç»œã€‚</li>
</ol>
<h5 data-id="heading-19">ï¼ˆ2ï¼‰éƒ¨ç½²ä¼˜åŒ–æŠ€å·§</h5>
<ul>
<li>æ˜¾å­˜ä¼˜åŒ–ï¼šå°†å¤šå¤´æ‹†åˆ†åˆ°å¤šå¡ï¼ˆTensor Parallelismï¼‰ï¼ŒLLaMA 7B h=32æ‹†åˆ†ä¸º2å¼ GPUï¼Œæ¯å¼ å¤„ç†16ä¸ªå¤´ï¼Œæ˜¾å­˜å ç”¨ä»14GBé™è‡³8GBï¼›</li>
<li>é€Ÿåº¦ä¼˜åŒ–ï¼šåˆ©ç”¨CUDA Tensor CoreåŠ é€ŸçŸ©é˜µä¹˜æ³•ï¼ˆQK^Tã€VÂ·æƒé‡ï¼‰ï¼Œå¼€å¯TensorRTä¼˜åŒ–ï¼Œæ¨ç†é€Ÿåº¦æå‡2å€ã€‚</li>
</ul>
<h4 data-id="heading-20">2. åœºæ™¯2ï¼šASRçš„è¯­éŸ³ç‰¹å¾æå–ï¼ˆå…³é”®æ”¹è¿›ï¼‰</h4>
<h5 data-id="heading-21">ï¼ˆ1ï¼‰å¤šå¤´åˆ†å·¥è®¾è®¡</h5>
<ul>
<li>å¤´1-4ï¼šä¸“æ³¨é¢‘è°±å±€éƒ¨å…³è”ï¼ˆæ¢…å°”é¢‘è°±çš„é¢‘ç‡ä¾èµ–ï¼Œç”¨äºéŸ³ç´ è¯†åˆ«ï¼‰ï¼›</li>
<li>å¤´5-8ï¼šä¸“æ³¨æ—¶åºé•¿è·ç¦»å…³è”ï¼ˆéŸ³ç´ å…ˆåé¡ºåºï¼Œç”¨äºè¯­å¥è¿è´¯æ€§ï¼‰ï¼›</li>
<li>å¤´9-12ï¼šä¸“æ³¨å™ªå£°æŠ‘åˆ¶ï¼ˆæŒ–æ˜â€œè¯­éŸ³ä¿¡å·â€ä¸â€œå™ªå£°â€çš„æ½œå˜é‡å·®å¼‚ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-22">ï¼ˆ2ï¼‰æ½œå˜é‡ååŒç­–ç•¥</h5>
<p>é‡‡ç”¨<strong>åŠ¨æ€åŠ æƒæ±‚å’Œ</strong>ï¼šæ¨¡å‹æ ¹æ®è¾“å…¥è¯­éŸ³çš„å™ªå£°å¼ºåº¦ã€é•¿åº¦ï¼Œè‡ªåŠ¨è°ƒæ•´ä¸åŒå¤´çš„æƒé‡ï¼ˆå¦‚å™ªå£°ç¯å¢ƒä¸‹ï¼Œå™ªå£°æŠ‘åˆ¶å¤´æƒé‡ä»0.1æå‡è‡³0.3ï¼‰ã€‚</p>
<h5 data-id="heading-23">ï¼ˆ3ï¼‰éƒ¨ç½²æ•ˆæœ</h5>
<ul>
<li>å®æ—¶ASRï¼šå»¶è¿Ÿä»200msé™è‡³100msä»¥å†…ï¼ˆCPU 8æ ¸å¹¶è¡Œï¼‰ï¼›</li>
<li>é•¿è¯­éŸ³è½¬å†™ï¼ˆ10åˆ†é’Ÿä¼šè®®å½•éŸ³ï¼‰ï¼šWERï¼ˆå­—é”™è¯¯ç‡ï¼‰ä»18%é™è‡³12%ã€‚</li>
</ul>
<h4 data-id="heading-24">3. åœºæ™¯3ï¼šå¤šæ¨¡æ€å·¥å…·ï¼ˆè¯­éŸ³-æ–‡æœ¬-è„±æ•è”åŠ¨ï¼‰</h4>
<h5 data-id="heading-25">ï¼ˆ1ï¼‰æ¶æ„è®¾è®¡</h5>
<ul>
<li>å¤šå¤´åˆ†å·¥ï¼šéƒ¨åˆ†å¤´è´Ÿè´£ASRè¯­éŸ³è½¬å†™ï¼Œéƒ¨åˆ†å¤´è´Ÿè´£æ–‡æœ¬æ•æ„Ÿä¿¡æ¯è¯†åˆ«ï¼ˆæŒ–æ˜â€œæ•æ„Ÿè¯-ä¸Šä¸‹æ–‡â€æ½œå˜é‡ï¼‰ï¼›</li>
<li>ååŒæ–¹å¼ï¼šäº¤å‰æ³¨æ„åŠ›ï¼ˆASRå¤´è¾“å‡ºä½œä¸ºK/Vï¼Œè„±æ•å¤´è¾“å‡ºä½œä¸ºQï¼‰ï¼Œè®©è„±æ•ä»»åŠ¡åˆ©ç”¨è¯­éŸ³æ—¶åºä¿¡æ¯ï¼Œé¿å…è¯¯åˆ¤ï¼ˆå¦‚â€œå¼ ä¸‰â€ä¸ä¼šè¢«è¯¯åˆ¤ä¸ºæ™®é€šåè¯ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-26">ï¼ˆ2ï¼‰å®ç”¨ä»·å€¼</h5>
<p>æ„å»ºæœ¬åœ°åŒ–â€œè¯­éŸ³è½¬å†™+æ•°æ®è„±æ•â€ä¸€ä½“åŒ–å·¥å…·ï¼Œé€‚ç”¨äºä¼ä¸šä¼šè®®å½•éŸ³ã€å®¢æˆ·é€šè¯ç­‰éšç§åœºæ™¯ï¼Œè„±æ•å‡†ç¡®ç‡è¾¾95%ä»¥ä¸Šã€‚</p>
<h3 data-id="heading-27">å››ã€æœ¬åœ°åŒ–éƒ¨ç½²ä¼˜åŒ–æŒ‡å—</h3>
<h4 data-id="heading-28">1. å¤šå¤´æ•°ï¼ˆhï¼‰çš„é€‰æ‹©ï¼šå¹³è¡¡æ•ˆæœä¸ç¡¬ä»¶æˆæœ¬</h4>

































<table><thead><tr><th>æ¨¡å‹è§„æ¨¡</th><th>æ¨èå¤šå¤´æ•°h</th><th>é€‚é…ç¡¬ä»¶</th><th>æ˜¾å­˜å ç”¨ï¼ˆFP16ï¼‰</th><th>æ¨ç†é€Ÿåº¦ï¼ˆå•æ¡è¯·æ±‚ï¼‰</th></tr></thead><tbody><tr><td>è½»é‡æ¨¡å‹ï¼ˆLLaMA 7Bã€è½»é‡ASRï¼‰</td><td>8-16</td><td>å•å¡RTX 3090/4090ã€CPU 16æ ¸</td><td>8-12GB</td><td>LLMï¼š50-100msï¼ŒASRï¼š50ms</td></tr><tr><td>ä¸­è§„æ¨¡æ¨¡å‹ï¼ˆLLaMA 13Bã€é€šç”¨ASRï¼‰</td><td>16-24</td><td>å•å¡A10ã€åŒå¡RTX 4090</td><td>12-20GB</td><td>LLMï¼š100-200msï¼ŒASRï¼š80ms</td></tr><tr><td>å¤§è§„æ¨¡æ¨¡å‹ï¼ˆLLaMA 70Bã€é«˜ç²¾åº¦ASRï¼‰</td><td>32-64</td><td>4-8å¡A100</td><td>40-80GB</td><td>LLMï¼š200-500msï¼ŒASRï¼š150ms</td></tr></tbody></table>
<blockquote>
<p>æ³¨æ„ï¼šå¤šå¤´æ•°å¹¶éè¶Šå¤šè¶Šå¥½ï¼Œè¶…è¿‡h=64åï¼Œæ¨¡å‹å¤æ‚åº¦æ¿€å¢ï¼Œæ³›åŒ–èƒ½åŠ›ä¸‹é™ï¼Œä¸”ç¡¬ä»¶æˆæœ¬ç¿»å€ã€‚</p>
</blockquote>
<h4 data-id="heading-29">2. æ½œå˜é‡ååŒæ–¹å¼çš„ç¡¬ä»¶é€‚é…</h4>
<ul>
<li>è®¡ç®—èµ„æºæœ‰é™ï¼ˆCPU/è¾¹ç¼˜è®¾å¤‡ï¼‰ï¼šé€‰æ‹©â€œåŠ æƒæ±‚å’Œâ€æˆ–â€œå¹³å‡æ± åŒ–â€ï¼Œè®¡ç®—é‡æ¯”æ‹¼æ¥èåˆä½30%ï¼Œé€‚åˆæ ‘è“æ´¾ã€NVIDIA Jetsonç­‰è®¾å¤‡ï¼›</li>
<li>é«˜æ€§èƒ½ç¡¬ä»¶ï¼ˆGPUå¤šå¡ï¼‰ï¼šé€‰æ‹©â€œæ‹¼æ¥èåˆâ€æˆ–â€œäº¤å‰æ³¨æ„åŠ›â€ï¼Œæœ€å¤§åŒ–æ¨¡å‹è¡¨è¾¾èƒ½åŠ›ï¼Œé€‚åˆä¼ä¸šçº§æœ¬åœ°åŒ–éƒ¨ç½²ï¼›</li>
<li>è¾¹ç¼˜è®¾å¤‡åŠŸè€—ä¼˜åŒ–ï¼šé‡‡ç”¨â€œç¨€ç–å¤šå¤´â€ç­–ç•¥ï¼ˆç¦ç”¨20%æ¬¡è¦å¤´ï¼‰ï¼ŒåŠŸè€—é™ä½15%ï¼Œæ•ˆæœä»…ä¸‹é™2%ã€‚</li>
</ul>
<h4 data-id="heading-30">3. å¹¶è¡Œè®¡ç®—ä¼˜åŒ–æŠ€å·§</h4>
<h5 data-id="heading-31">ï¼ˆ1ï¼‰GPUéƒ¨ç½²</h5>
<ul>
<li>å¼€å¯Tensor Parallelismï¼šæ‹†åˆ†å¤šå¤´è®¡ç®—åˆ°å¤šå¡ï¼Œå¦‚h=32æ‹†åˆ†ä¸º4å¼ GPUï¼Œæ¯å¼ å¤„ç†8ä¸ªå¤´ï¼›</li>
<li>æ··åˆç²¾åº¦è®­ç»ƒ/æ¨ç†ï¼ˆFP16/FP8ï¼‰ï¼šæ˜¾å­˜å ç”¨é™ä½50%ï¼Œæ¨ç†é€Ÿåº¦æå‡1.5å€ï¼Œæ•ˆæœæŸå¤±å¯å¿½ç•¥ï¼›</li>
<li>åˆ©ç”¨CUDAæ ¸å‡½æ•°ï¼šè‡ªå®šä¹‰å¤šå¤´æ³¨æ„åŠ›çš„çŸ©é˜µä¹˜æ³•æ ¸ï¼Œè¿›ä¸€æ­¥æå‡å¹¶è¡Œæ•ˆç‡ã€‚</li>
</ul>
<h5 data-id="heading-32">ï¼ˆ2ï¼‰CPUéƒ¨ç½²</h5>
<ul>
<li>å¤šçº¿ç¨‹å¹¶è¡Œï¼šé€šè¿‡OpenMPå°†æ¯ä¸ªå¤´çš„è®¡ç®—åˆ†é…åˆ°ä¸åŒCPUæ ¸å¿ƒï¼Œé¿å…ä¸²è¡Œç­‰å¾…ï¼›</li>
<li>ç‰¹å¾ç»´åº¦ä¼˜åŒ–ï¼šé™ä½<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">d_{model}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆå¦‚ä»1024é™è‡³768ï¼‰ï¼ŒåŒæ—¶ä¿æŒh=16ï¼Œå¹³è¡¡é€Ÿåº¦ä¸æ•ˆæœã€‚</li>
</ul>
<h4 data-id="heading-33">4. æ€§èƒ½è¯„ä¼°æŒ‡æ ‡ï¼ˆæœ¬åœ°åŒ–éƒ¨ç½²å…³é”®ï¼‰</h4>

























<table><thead><tr><th>ç»´åº¦</th><th>æ ¸å¿ƒæŒ‡æ ‡</th><th>ä¼˜åŒ–ç›®æ ‡</th></tr></thead><tbody><tr><td>æ¨¡å‹æ•ˆæœ</td><td>LLMï¼šPerplexityã€BLEUï¼›ASRï¼šWER/CER</td><td>LLM Perplexity&lt;30ï¼›ASR WER&lt;15%</td></tr><tr><td>éƒ¨ç½²æ€§èƒ½</td><td>æ¨ç†å»¶è¿Ÿã€ååé‡ã€æ˜¾å­˜/å†…å­˜å ç”¨</td><td>å»¶è¿Ÿ&lt;300msï¼›ååé‡&gt;10 QPS</td></tr><tr><td>æˆæœ¬æ•ˆç›Š</td><td>æ¯åƒæ¡è¯·æ±‚ç¡¬ä»¶æˆæœ¬ï¼ˆGPUå°æ—¶è´¹ã€ç”µè´¹ï¼‰</td><td>æ§åˆ¶åœ¨1-5å…ƒ/åƒæ¡</td></tr></tbody></table>
<h3 data-id="heading-34">äº”ã€å‰æ²¿æ‰©å±•ä¸æœªæ¥è¶‹åŠ¿</h3>
<h4 data-id="heading-35">1. åŠ¨æ€å¤šå¤´æœºåˆ¶</h4>
<p>æ¨¡å‹æ ¹æ®è¾“å…¥æ•°æ®å¤æ‚åº¦åŠ¨æ€æ¿€æ´»å¤šå¤´æ•°ï¼ˆå¦‚ç®€å•æ–‡æœ¬æ¿€æ´»4ä¸ªå¤´ï¼Œå¤æ‚æ–‡æœ¬æ¿€æ´»16ä¸ªå¤´ï¼‰ï¼Œæ¨ç†é€Ÿåº¦æå‡30%ï¼ŒåŒæ—¶ä¿æŒæ•ˆæœã€‚</p>
<h4 data-id="heading-36">2. æ½œå˜é‡è’¸é¦</h4>
<p>å°†å¤§æ¨¡å‹ï¼ˆh=32ï¼‰çš„æ½œå˜é‡çŸ¥è¯†è’¸é¦åˆ°å°æ¨¡å‹ï¼ˆh=8ï¼‰ï¼Œè®©å°æ¨¡å‹åœ¨è¾¹ç¼˜è®¾å¤‡éƒ¨ç½²æ—¶ï¼Œæ•ˆæœæ¥è¿‘å¤§æ¨¡å‹ï¼ˆå¦‚ASR WERä»…ä¸Šå‡3%ï¼‰ã€‚</p>
<h4 data-id="heading-37">3. è·¨ä»»åŠ¡æ½œå˜é‡å…±äº«</h4>
<p>åœ¨ä¸€ä½“åŒ–å·¥å…·ï¼ˆå¦‚â€œLLMç”Ÿæˆ+ASRè½¬å†™+è„±æ•â€ï¼‰ä¸­ï¼Œå…±äº«è¯­ä¹‰å…³è”ç±»æ½œå˜é‡ï¼Œå‡å°‘æ¨¡å‹å‚æ•°30%ï¼Œæå‡éƒ¨ç½²æ•ˆç‡ã€‚</p>
<h3 data-id="heading-38">æ€»ç»“</h3>
<p>â€œå¤šå¤´å¹¶è¡Œ+æ½œå˜é‡ååŒâ€æ˜¯å¹³è¡¡AIæ¨¡å‹â€œè¡¨è¾¾èƒ½åŠ›â€ä¸â€œéƒ¨ç½²æ•ˆç‡â€çš„æ ¸å¿ƒæ¶æ„ï¼Œå…¶æœ¬è´¨æ˜¯é€šè¿‡â€œå¤šç»´åº¦å¹¶è¡Œæ¢ç´¢â€çªç ´å•ä¸€è§†è§’å±€é™ï¼Œå†é€šè¿‡â€œéšæ€§ç‰¹å¾ååŒâ€å½¢æˆå…¨å±€è¡¨è¾¾ã€‚åœ¨LLMã€ASRç­‰æœ¬åœ°åŒ–éƒ¨ç½²åœºæ™¯ä¸­ï¼Œé€šè¿‡åˆç†é€‰æ‹©å¤šå¤´æ•°ã€ååŒæ–¹å¼å’Œå¹¶è¡Œç­–ç•¥ï¼Œå¯åœ¨æ™®é€šç¡¬ä»¶ï¼ˆå¦‚å•å¡RTX 4090ï¼‰ä¸Šå®ç°é«˜æ€§èƒ½æ¨ç†ï¼ŒåŒæ—¶æ§åˆ¶æˆæœ¬ã€‚</p>
<p>å¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œè¯¥æ¶æ„çš„å…³é”®ä»·å€¼åœ¨äºâ€œçµæ´»æ€§â€â€”â€”å¯æ ¹æ®ä»»åŠ¡å¤æ‚åº¦ã€ç¡¬ä»¶é…ç½®åŠ¨æ€è°ƒæ•´å‚æ•°ï¼Œå®Œç¾é€‚é…ä»è¾¹ç¼˜è®¾å¤‡åˆ°ä¼ä¸šçº§æœåŠ¡å™¨çš„å…¨åœºæ™¯éƒ¨ç½²éœ€æ±‚ï¼Œæ˜¯æ„å»ºå®ç”¨åŒ–ã€æœ¬åœ°åŒ–AIå·¥å…·çš„æ ¸å¿ƒæŠ€æœ¯æ”¯æ’‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PAGåœ¨å¾—ç‰©ç¤¾åŒºSçº§æ´»åŠ¨çš„è½åœ°]]></title>    <link>https://juejin.cn/post/7587675306659020800</link>    <guid>https://juejin.cn/post/7587675306659020800</guid>    <pubDate>2025-12-26T07:45:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587675306659020800" data-draft-id="7587675306658627584" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PAGåœ¨å¾—ç‰©ç¤¾åŒºSçº§æ´»åŠ¨çš„è½åœ°"/> <meta itemprop="keywords" content="è®¾è®¡"/> <meta itemprop="datePublished" content="2025-12-26T07:45:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾—ç‰©æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2392954206960247"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PAGåœ¨å¾—ç‰©ç¤¾åŒºSçº§æ´»åŠ¨çš„è½åœ°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2392954206960247/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾—ç‰©æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T07:45:34.000Z" title="Fri Dec 26 2025 07:45:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»26åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€èƒŒæ™¯</h2>
<p>è¿‘æœŸï¼Œå¾—ç‰©ç¤¾åŒºæ´»åŠ¨ã€Œç”¨ç¯®çƒè®¤è¯†æˆ‘ã€æ¨å‡º â€œç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ç”Ÿæˆä¸“å±çƒæ˜Ÿå¡â€ æ ¸å¿ƒç©æ³•ã€‚</p>
<p>åˆæœŸè§„åˆ’ç”±æœåŠ¡ç«¯åŸºäº PAG æŠ€æœ¯åˆæˆï¼Œä¸ºäº†è®©ç”¨æˆ·å¯ä»¥æ›´è‡ªç”±çš„å®šåˆ¶ä¸“å±çƒæ˜Ÿå¡ï¼Œç»å¤šç«¯è¯„ä¼°åç¡®å®šï¼šç”± H5 ç«¯æ‰¿æ¥ â€œå›¾ç‰‡äº¤äº’è°ƒæ•´ - çƒæ˜Ÿå¡ç”Ÿæˆâ€ æ ¸å¿ƒé“¾è·¯ï¼Œæ”¯æŒç”¨æˆ·å•æŒ‡æ‹–æ‹½ã€åŒæŒ‡ç¼©æ”¾ / æ—‹è½¬äººåƒï¼Œå¾…è°ƒæ•´è‡³ç†æƒ³ä½ç½®åè§¦å‘åˆæˆã€‚è€Œ PAG ä½œä¸ºè…¾è®¯è‡ªç ”å¼€æºçš„åŠ¨æ•ˆå·¥ä½œæµè§£å†³æ–¹æ¡ˆï¼Œå‡­å€Ÿè·¨å¹³å°æ¸²æŸ“ä¸€è‡´æ€§ã€å›¾å±‚å®æ—¶ç¼–è¾‘ã€è½»é‡åŒ–æ–‡ä»¶æ€§èƒ½ï¼Œèƒ½ç²¾å‡†åŒ¹é…éœ€æ±‚ï¼Œæˆä¸ºæœ¬æ¬¡æ ¸å¿ƒæŠ€æœ¯é€‰å‹ã€‚</p>
<p>é‰´äº H5 ç«¯éœ€è½åœ°è¯¥æ ¸å¿ƒé“¾è·¯ï¼Œä¸”æµç¨‹æ¶‰åŠ PAG æŠ€æœ¯åº”ç”¨ï¼Œé¦–å…ˆéœ€å¯¹ PAG æŠ€æœ¯è¿›è¡Œæ·±å…¥äº†è§£ï¼Œä¸ºåç»­å¼€å‘ä¸é€‚é…å¥ å®šåŸºç¡€ã€‚</p>
<h2 data-id="heading-1">äºŒã€PAGæ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>è¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹ï¼ŒPAG æ˜¯è…¾è®¯è‡ªç ”å¹¶å¼€æºçš„åŠ¨æ•ˆå·¥ä½œæµè§£å†³æ–¹æ¡ˆï¼Œæ ¸å¿ƒæ˜¯å®ç° Adobe After Effectsï¼ˆAEï¼‰åŠ¨æ•ˆçš„ä¸€é”®å¯¼å‡ºä¸è·¨å¹³å°åº”ç”¨ï¼ŒåŒ…å«æ¸²æŸ“ SDKã€AE å¯¼å‡ºæ’ä»¶ï¼ˆPAGExporterï¼‰ã€æ¡Œé¢é¢„è§ˆå·¥å…·ï¼ˆPAGViewerï¼‰ä¸‰éƒ¨åˆ†ã€‚</p>
<p>å®ƒå¯¼å‡ºçš„äºŒè¿›åˆ¶ PAG æ–‡ä»¶å‹ç¼©ç‡é«˜ã€è§£ç å¿«ï¼Œèƒ½é›†æˆå¤šç±»èµ„æºï¼›æ”¯æŒ Androidã€iOSã€Web ç­‰å…¨å¹³å°ï¼Œä¸”å„ç«¯æ¸²æŸ“ä¸€è‡´ã€å¼€å¯ GPU åŠ é€Ÿï¼›æ—¢å…¼å®¹å¤§éƒ¨åˆ† AE åŠ¨æ•ˆç‰¹æ€§ï¼Œä¹Ÿå…è®¸è¿è¡Œæ—¶ç¼–è¾‘ â€”â€” æ¯”å¦‚æ›¿æ¢æ–‡æœ¬ / å›¾ç‰‡ã€è°ƒæ•´å›¾å±‚ä¸æ—¶é—´è½´ï¼Œç›®å‰å·²å¹¿æ³›ç”¨äºå„ç±»äº§å“çš„åŠ¨æ•ˆåœºæ™¯ã€‚</p>
<p>å·²çŸ¥ä¸šç•Œä¸­å›¾ç‰‡åŸºç¡€ç¼–è¾‘ï¼ˆå¦‚è£å‰ªã€è°ƒè‰²ï¼‰ã€è´´çº¸å åŠ ã€æ»¤é•œæ¸²æŸ“ç­‰é«˜é¢‘åŠŸèƒ½ï¼Œåœ¨å®¢æˆ·ç«¯å‘å¸ƒå™¨åœºæ™¯ä¸‹å·²å¹¿æ³›é‡‡ç”¨ PAGæŠ€æœ¯å®ç°ï¼Œè¿™ä¸€åº”ç”¨è¶‹åŠ¿åœ¨æˆ‘å¸åŠç«å“çš„äº§å“ä¸­å‡æœ‰ä½“ç°ï¼Œæˆä¸ºæ”¯æ’‘è¿™ç±»è§†è§‰äº¤äº’åŠŸèƒ½çš„ä¸»æµæŠ€æœ¯é€‰æ‹©ã€‚</p>
<p>æ­£æ˜¯åŸºäºPAG çš„è·¨å¹³å°æ¸²æŸ“ã€å›¾å±‚å®æ—¶ç¼–è¾‘ç‰¹æ€§ï¼Œå…¶èƒ½ç²¾å‡†æ‰¿æ¥ H5 ç«¯â€˜å›¾ç‰‡äº¤äº’è°ƒæ•´ + çƒæ˜Ÿå¡åˆæˆâ€™çš„æ ¸å¿ƒé“¾è·¯ï¼Œè§£å†³æœåŠ¡ç«¯å›ºå®šåˆæˆçš„ç—›ç‚¹ï¼Œå› æ­¤æˆä¸ºæœ¬æ¬¡éœ€æ±‚çš„æ ¸å¿ƒæŠ€æœ¯é€‰å‹ã€‚</p>
<p>ä¸ºäº†è®©å¤§å®¶æ›´ç›´è§‚åœ°æ„Ÿå—ã€Œç”¨ç¯®çƒè®¤è¯†æˆ‘ã€æ´»åŠ¨ä¸­ â€œç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ç”Ÿæˆä¸“å±çƒæ˜Ÿå¡â€ ç©æ³•ï¼Œæˆ‘ä»¬å‡†å¤‡äº†æ´»åŠ¨å®é™…æ•ˆæœå½•å±ã€‚é€šè¿‡å½•å±ï¼Œä½ å¯ä»¥æ¸…æ™°çœ‹åˆ°ç”¨æˆ·å¦‚ä½•é€šè¿‡å•æŒ‡æ‹–æ‹½ã€åŒæŒ‡ç¼©æ”¾ / æ—‹è½¬äººåƒï¼Œå®Œæˆæ„å›¾è°ƒæ•´åç”Ÿæˆçƒæ˜Ÿå¡çš„å…¨è¿‡ç¨‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6d364c65f564fdb941ca847fa126f8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=V5UBY3EPViU4uKz7GXyKm%2BQbsXg%3D" alt="æˆªå±2025-12-26 ä¸‹åˆ2.53.53.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6dcfe266cdd24d82a2bb2786b546c284~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=UxMDfNCTXiTbWYYDFzIEEJsjEPQ%3D" alt="æˆªå±2025-12-26 ä¸‹åˆ2.54.01.png" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å›´ç»•ä¸šåŠ¡ç›®æ ‡ï¼Œè¯¦ç»†æ‹†è§£å®ç°è¯¥é“¾è·¯çš„å…·ä½“ä»»åŠ¡ä¼˜å…ˆçº§ä¸æ ¸å¿ƒæ¨¡å—ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€å¦‚ä½•å®ç°æ ¸å¿ƒäº¤äº’é“¾è·¯ï¼Ÿ</h2>
<p>ç»“åˆã€Œç”¨ç¯®çƒè®¤è¯†æˆ‘ã€çƒæ˜Ÿå¡ç”Ÿæˆçš„æ ¸å¿ƒä¸šåŠ¡ç›®æ ‡ï¼ŒæŒ‰â€˜åŸºç¡€åŠŸèƒ½â†’äº¤äº’ä½“éªŒâ†’æ‹“å±•èƒ½åŠ›â†’ç¨³å®šæ€§â€™ä¼˜å…ˆçº§ï¼Œå°†éœ€æ±‚æ‹†è§£ä¸ºä»¥ä¸‹ 6 é¡¹ä»»åŠ¡ï¼š</p>
<ol>
<li><strong>PAG æ’­æ”¾å™¨åŸºç¡€åŠŸèƒ½æ­å»º</strong>ï¼šå®ç°æ’­æ”¾ / æš‚åœã€å›¾å±‚æ›¿æ¢ã€æ–‡æœ¬ä¿®æ”¹ã€åˆæˆå›¾å¯¼å‡ºï¼Œä¸ºåç»­äº¤äº’æ‰“åŸºç¡€ï¼›</li>
<li><strong>å›¾ç‰‡äº¤äº’å˜æ¢åŠŸèƒ½å¼€å‘</strong>ï¼šæ”¯æŒå•æŒ‡æ‹–æ‹½ã€åŒæŒ‡ç¼©æ”¾ / æ—‹è½¬ï¼Œæ»¡è¶³äººåƒæ„å›¾è°ƒæ•´éœ€æ±‚ï¼›</li>
<li><strong>äº¤äº’ä¸é¢„è§ˆå®æ—¶åŒæ­¥</strong>ï¼šå°†å›¾ç‰‡è°ƒæ•´çŠ¶æ€å®æ—¶åŒæ­¥è‡³ PAG å›¾å±‚ï¼Œå®ç° â€œæ“ä½œå³é¢„è§ˆâ€ï¼›</li>
<li><strong>æ‰¹é‡åˆæˆèƒ½åŠ›æ‹“å±•</strong>ï¼šåŸºäºå•å¼ åˆæˆé€»è¾‘ï¼Œæ”¯æŒä¸€æ¬¡æ€§ç”Ÿæˆå¤šå¼ çƒæ˜Ÿå¡ï¼ˆä¾èµ–ä»»åŠ¡ 1-3ï¼‰ï¼›</li>
<li><strong>å…¨é“¾è·¯æ€§èƒ½ä¼˜åŒ–</strong>ï¼šä¼˜åŒ– PAG å®ä¾‹é‡Šæ”¾ã€å›¾å±‚æ¸²æŸ“æ•ˆç‡ï¼Œä¿éšœ H5 æµç•…åº¦ï¼ˆè´¯ç©¿å…¨æµç¨‹ï¼‰ï¼›</li>
<li><strong>å¼‚å¸¸åœºæ™¯é™çº§å…¼å®¹</strong>ï¼šé’ˆå¯¹ SDK ä¸æ”¯æŒåœºæ™¯ï¼Œè®¾è®¡é™æ€å›¾å±‚ã€æœåŠ¡ç«¯åˆæˆç­‰å…œåº•æ–¹æ¡ˆï¼ˆåŒæ­¥æ¨è¿›ï¼‰ã€‚</li>
</ol>
<p>åœ¨æ˜ç¡®æ ¸å¿ƒä»»åŠ¡æ‹†è§£åï¼Œé¦–è¦ç¯èŠ‚æ˜¯æ­å»º PAG æ’­æ”¾å™¨åŸºç¡€èƒ½åŠ› â€”â€” è¿™æ˜¯åç»­å›¾å±‚æ›¿æ¢ã€æ–‡æœ¬ä¿®æ”¹ã€çƒæ˜Ÿå¡åˆæˆçš„å‰æï¼Œéœ€ä» SDK åŠ è½½ã€æ’­æ”¾å™¨åˆå§‹åŒ–ã€æ ¸å¿ƒåŠŸèƒ½å°è£…é€æ­¥è½åœ°ã€‚</p>
<h2 data-id="heading-3">å››ã€åŸºç¡€PAGæ’­æ”¾å™¨å®ç°</h2>
<h3 data-id="heading-4">åŠ è½½PAG SDK</h3>
<p>å› ä¸ºæ˜¯é¦–æ¬¡æ¥è§¦PAG ï¼Œæ‰€ä»¥åœ¨é¦–æ¬¡åŠ è½½ SDK ç¯èŠ‚ä¾¿é‡åˆ°äº†éœ€è¦æ³¨æ„çš„ç»†èŠ‚ï¼š</p>
<p>libpag çš„ SDK åŠ è½½åŒ…å«ä¸¤éƒ¨åˆ†æ ¸å¿ƒæ–‡ä»¶ï¼š</p>
<ul>
<li>ä¸»ä½“ libpag.min.js</li>
<li>é…å¥—çš„ libpag.wasm</li>
</ul>
<p><strong>éœ€ç‰¹åˆ«æ³¨æ„</strong>ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œwasmæ–‡ä»¶éœ€ä¸ libpag.min.js ç½®äºåŒä¸€ç›®å½•ï¼Œè‹¥éœ€è‡ªå®šä¹‰è·¯å¾„ï¼Œä¹Ÿå¯æ‰‹åŠ¨æŒ‡å®šå…¶ä½ç½®ã€‚ï¼ˆåŠ è½½SDKå‚è€ƒæ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpag.io%2Fdocs%2Fuse-web-sdk.html%25EF%25BC%2589" target="_blank" title="https://pag.io/docs/use-web-sdk.html%EF%BC%89" ref="nofollow noopener noreferrer">pag.io/docs/use-weâ€¦</a></p>
<p>åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†ä¸¤ä¸ªæ–‡ä»¶ä¸€åŒä¸Šä¼ è‡³ OSSçš„åŒä¸€è·¯å¾„ä¸‹ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fh5static.xx%2F10122053%2Flibpag.min.js" target="_blank" title="https://h5static.xx/10122053/libpag.min.js" ref="nofollow noopener noreferrer">h5static.xx/10122053/liâ€¦</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fh5static.xx%2F10122053%2Flibpag.wasm" target="_blank" title="https://h5static.xx/10122053/libpag.wasm" ref="nofollow noopener noreferrer">h5static.xx/10122053/liâ€¦</a></p>
<p>é€šè¿‡ CDN æ–¹å¼å®ŒæˆåŠ è½½ï¼Œç¡®ä¿èµ„æºè·¯å¾„åŒ¹é…ã€‚</p>
<p>SDKåŠ è½½æ ¸å¿ƒä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span>Â loadLibPag =Â <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span>Â () =&gt; {
Â Â <span class="hljs-comment">// è‹¥å·²åŠ è½½ï¼Œç›´æ¥è¿”å›</span>
Â Â <span class="hljs-keyword">if</span>Â (<span class="hljs-variable language_">window</span>.<span class="hljs-property">libpag</span>) {
Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-variable language_">window</span>.<span class="hljs-property">libpag</span>
Â  }
Â Â 
Â Â <span class="hljs-keyword">try</span>Â {
Â  Â Â <span class="hljs-comment">// åŠ¨æ€åˆ›å»ºscriptæ ‡ç­¾åŠ è½½SDK</span>
Â  Â Â <span class="hljs-keyword">const</span>Â script =Â <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'script'</span>)
Â  Â  script.<span class="hljs-property">src</span>Â =Â <span class="hljs-string">'https://h5static.XX/10122053/libpag.min.js'</span>
Â  Â Â <span class="hljs-variable language_">document</span>.<span class="hljs-property">head</span>.<span class="hljs-title function_">appendChild</span>(script)
Â  Â Â 
Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span>Â {
Â  Â  Â  script.<span class="hljs-property">onload</span>Â =Â <span class="hljs-keyword">async</span>Â () =&gt; {
Â  Â  Â  Â Â <span class="hljs-comment">// ç­‰å¾…500msç¡®ä¿åº“å®Œå…¨åˆå§‹åŒ–</span>
Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span>Â =&gt;</span>Â <span class="hljs-built_in">setTimeout</span>(resolve,Â <span class="hljs-number">500</span>))
Â  Â  Â  Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'LibPag script loaded, checking window.libpag:'</span>,Â <span class="hljs-variable language_">window</span>.<span class="hljs-property">libpag</span>)
Â  Â  Â  Â Â 
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (<span class="hljs-variable language_">window</span>.<span class="hljs-property">libpag</span>) {
Â  Â  Â  Â  Â Â <span class="hljs-title function_">resolve</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">libpag</span>)
Â  Â  Â  Â  }Â <span class="hljs-keyword">else</span>Â {
Â  Â  Â  Â  Â Â <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Error</span>(<span class="hljs-string">'window.libpag is not available'</span>))
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  Â Â <span class="hljs-comment">// åŠ è½½å¤±è´¥å¤„ç†</span>
Â  Â  Â  script.<span class="hljs-property">onerror</span>Â =Â <span class="hljs-function">() =&gt;</span>Â <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Failed to load libPag script'</span>))
Â  Â  })
Â  }Â <span class="hljs-keyword">catch</span>Â (error) {
Â  Â Â <span class="hljs-keyword">throw</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Failed to load libPag:Â <span class="hljs-subst">${error}</span>`</span>)
Â  }
}, [])
</code></pre>
<h3 data-id="heading-5">åˆå§‹åŒ–æ’­æ”¾å™¨</h3>
<p>åŠ è½½å®Œ SDK åï¼Œwindow å¯¹è±¡ä¼šç”Ÿæˆ libpag å¯¹è±¡ï¼Œä»¥æ­¤ä¸ºåŸºç¡€å¯å®Œæˆæ’­æ”¾å™¨åˆå§‹åŒ–ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ul>
<li>å‡†å¤‡ canvas å®¹å™¨ä½œä¸ºæ¸²æŸ“è½½ä½“ï¼›</li>
<li>åŠ è½½ PAG æ ¸å¿ƒåº“å¹¶åˆå§‹åŒ– PAG ç¯å¢ƒï¼›</li>
<li>åŠ è½½ç›®æ ‡.pag æ–‡ä»¶ï¼ˆåŠ¨æ•ˆæ¨¡æ¿ï¼‰ï¼›</li>
<li>åˆ›å»º PAGView å®ä¾‹å…³è” canvas ä¸åŠ¨æ•ˆæ–‡ä»¶ï¼›</li>
<li>å°è£…æ’­æ”¾å™¨æ§åˆ¶æ¥å£ï¼ˆæ’­æ”¾ / æš‚åœ / é”€æ¯ç­‰ï¼‰ï¼Œå¹¶å¤„ç†èµ„æºé‡Šæ”¾ä¸é‡å¤åˆå§‹åŒ–é—®é¢˜ã€‚</li>
</ul>
<p>éœ€è¯´æ˜çš„æ˜¯ï¼Œæœ¬éœ€æ±‚æ ¸å¿ƒè¯‰æ±‚æ˜¯ â€œåˆæˆçƒæ˜Ÿå¡å›¾ç‰‡â€ï¼Œä¸æ¶‰åŠPAGçš„è§†é¢‘ç›¸å…³èƒ½åŠ›ï¼Œå› æ­¤æš‚ä¸æ‰©å±•è§†é¢‘åŠŸèƒ½ï¼Œåœ¨æ’­æ”¾å™¨åˆå§‹åŒ–åå®Œæˆç«‹å³æš‚åœï¼Œåç»­ä»…å›´ç»• â€œå›¾å±‚æ›¿æ¢ï¼ˆå¦‚ç”¨æˆ·äººåƒï¼‰â€â€œæ–‡æœ¬æ›¿æ¢ï¼ˆå¦‚çƒæ˜Ÿåç§°ï¼‰â€ ç­‰æ ¸å¿ƒéœ€æ±‚å±•å¼€ã€‚</p>
<p>æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span>Â { width, height } = props


<span class="hljs-comment">// Canvasæ¸²æŸ“å®¹å™¨</span>
<span class="hljs-keyword">const</span>Â canvasRef = useRef&lt;<span class="hljs-title class_">HTMLCanvasElement</span>&gt;(<span class="hljs-literal">null</span>)
<span class="hljs-comment">// PAGåŠ¨æ•ˆæ¨¡æ¿åœ°å€ï¼ˆçƒæ˜Ÿå¡æ¨¡æ¿ï¼‰</span>
<span class="hljs-keyword">const</span>Â src =Â <span class="hljs-string">'https://h5static.XX/10122053/G-lv1.pag'</span>


<span class="hljs-comment">// åˆå§‹åŒ–æ’­æ”¾å™¨å‡½æ•°</span>
<span class="hljs-keyword">const</span>Â initPlayer =Â <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span>Â () =&gt; {
Â Â 
Â Â <span class="hljs-keyword">try</span>Â {
Â  Â Â <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">true</span>)
Â  Â Â <span class="hljs-keyword">const</span>Â canvas = canvasRef.<span class="hljs-property">current</span>
Â  Â Â <span class="hljs-comment">// è®¾ç½®Canvaså°ºå¯¸ä¸çƒæ˜Ÿå¡åŒ¹é…</span>
Â  Â  canvas.<span class="hljs-property">width</span>Â = width
Â  Â  canvas.<span class="hljs-property">height</span>Â = height
Â  Â Â 
Â  Â Â <span class="hljs-comment">// 1. åŠ è½½PAGæ ¸å¿ƒåº“å¹¶åˆå§‹åŒ–ç¯å¢ƒ</span>
Â  Â Â <span class="hljs-keyword">const</span>Â libpag =Â <span class="hljs-keyword">await</span>Â <span class="hljs-title function_">loadLibPag</span>()
Â  Â Â <span class="hljs-keyword">const</span>Â <span class="hljs-variable constant_">PAG</span>Â =Â <span class="hljs-keyword">await</span>Â libpag.<span class="hljs-title class_">PAGInit</span>({Â <span class="hljs-attr">useScale</span>:Â <span class="hljs-literal">false</span>Â })
Â  Â Â 
Â  Â Â <span class="hljs-comment">// 2. åŠ è½½PAGåŠ¨æ•ˆæ¨¡æ¿</span>
Â  Â Â <span class="hljs-keyword">const</span>Â response =Â <span class="hljs-keyword">await</span>Â <span class="hljs-title function_">fetch</span>(src)
Â  Â Â <span class="hljs-keyword">const</span>Â buffer =Â <span class="hljs-keyword">await</span>Â response.<span class="hljs-title function_">arrayBuffer</span>()
Â  Â Â <span class="hljs-keyword">const</span>Â pagFile =Â <span class="hljs-keyword">await</span>Â <span class="hljs-variable constant_">PAG</span>.<span class="hljs-property">PAGFile</span>.<span class="hljs-title function_">load</span>(buffer)
Â  Â Â 
Â  Â Â <span class="hljs-comment">// 3. åˆ›å»ºPAGViewï¼Œå…³è”Canvasä¸åŠ¨æ•ˆæ¨¡æ¿</span>
Â  Â Â <span class="hljs-keyword">const</span>Â pagView =Â <span class="hljs-keyword">await</span>Â <span class="hljs-variable constant_">PAG</span>.<span class="hljs-property">PAGView</span>.<span class="hljs-title function_">init</span>(pagFile, canvas)
Â  Â Â 
Â  Â Â <span class="hljs-comment">// 4. å°è£…æ’­æ”¾å™¨æ§åˆ¶æ¥å£</span>
Â  Â Â <span class="hljs-keyword">const</span>Â player = {
Â  Â  Â Â <span class="hljs-attr">_pagView</span>: pagView,
Â  Â  Â Â <span class="hljs-attr">_pagFile</span>: pagFile,
Â  Â  Â Â <span class="hljs-attr">_PAG</span>:Â <span class="hljs-variable constant_">PAG</span>,
Â  Â  Â Â <span class="hljs-attr">_isPlaying</span>:Â <span class="hljs-literal">false</span>,
Â  Â  Â Â 
Â  Â  Â Â <span class="hljs-comment">// æ’­æ”¾</span>
Â  Â  Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-title function_">play</span>(<span class="hljs-params"/>) {
Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">_pagView</span>.<span class="hljs-title function_">play</span>()
Â  Â  Â  Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">_isPlaying</span>Â =Â <span class="hljs-literal">true</span>
Â  Â  Â  },
Â  Â  Â Â <span class="hljs-comment">// æš‚åœï¼ˆåˆå§‹åŒ–åé»˜è®¤æš‚åœï¼‰</span>
Â  Â  Â Â <span class="hljs-title function_">pause</span>(<span class="hljs-params"/>) {
Â  Â  Â  Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">_pagView</span>.<span class="hljs-title function_">pause</span>()
Â  Â  Â  Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">_isPlaying</span>Â =Â <span class="hljs-literal">false</span>
Â  Â  Â  },
Â  Â  Â Â <span class="hljs-comment">// é”€æ¯å®ä¾‹ï¼Œé‡Šæ”¾èµ„æº</span>
Â  Â  Â Â <span class="hljs-title function_">destroy</span>(<span class="hljs-params"/>) {
Â  Â  Â  Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">_pagView</span>.<span class="hljs-title function_">destroy</span>()
Â  Â  Â  },
Â  Â  }
Â  }Â <span class="hljs-keyword">catch</span>Â (error) {
Â  Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'PAG Player initialization failed:'</span>, error)
Â  }Â 
}, [src, width, height])
</code></pre>
<p><strong>å®ç°æ•ˆæœ</strong></p>
<p>æ’­æ”¾å™¨åˆå§‹åŒ–å®Œæˆåï¼Œå¯åœ¨Canvasä¸­æ­£å¸¸å±•ç¤ºçƒæ˜Ÿå¡åŠ¨æ•ˆæ¨¡æ¿ï¼ˆåˆå§‹åŒ–åé»˜è®¤æš‚åœï¼‰ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8fad50f876ee4dea8bea2fbcac6018de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=PzWUqcrlOWM%2FlJAoUKvfd52Nw%2FQ%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å®ç°æ›¿æ¢å›¾å±‚åŠæ–‡æœ¬åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-6">æ›¿æ¢å›¾å±‚åŠæ–‡æœ¬</h3>
<p>æ›¿æ¢ â€œç”¨æˆ·ä¸Šä¼ äººåƒâ€ï¼ˆå›¾å±‚ï¼‰ä¸ â€œçƒæ˜Ÿåç§°â€ï¼ˆæ–‡æœ¬ï¼‰æ˜¯æ ¸å¿ƒéœ€æ±‚ï¼Œéœ€é€šè¿‡ PAGFile çš„åŸç”Ÿæ¥å£å®ç°ï¼Œå¹¶æ‰©å±•æ’­æ”¾å™¨å®ä¾‹çš„æ“ä½œæ–¹æ³•ï¼š</p>
<ul>
<li><strong>å›¾ç‰‡å›¾å±‚æ›¿æ¢</strong>ï¼šè°ƒç”¨pagFile.replaceImage(index, image) æ¥å£ï¼Œå°†æŒ‡å®šç´¢å¼•çš„å›¾å±‚æ›¿æ¢ä¸ºç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ï¼ˆæ”¯æŒ CDN åœ°å€ã€Canvas å…ƒç´ ã€Image å…ƒç´ ä½œä¸ºå›¾ç‰‡æºï¼‰ï¼›</li>
<li><strong>æ–‡æœ¬å†…å®¹æ›¿æ¢</strong>ï¼šè°ƒç”¨pagFile.setTextData(index, textData) æ¥å£ï¼Œä¿®æ”¹æŒ‡å®šæ–‡æœ¬å›¾å±‚çš„å†…å®¹ä¸å­—ä½“ï¼›</li>
<li><strong>æ•ˆæœç”Ÿæ•ˆ</strong>ï¼šæ¯æ¬¡æ›¿æ¢åéœ€è°ƒç”¨ pagView.flush() å¼ºåˆ¶åˆ·æ–°æ¸²æŸ“ï¼Œç¡®ä¿ä¿®æ”¹å®æ—¶ç”Ÿæ•ˆã€‚</li>
</ul>
<p><strong>å®ç°æ–¹æ¡ˆ</strong></p>
<ul>
<li>æ›¿æ¢å›¾ç‰‡å›¾å±‚ï¼šé€šè¿‡pagFile.replaceImage(index, image)æ¥å£ï¼Œå°†æŒ‡å®šç´¢å¼•çš„å›¾å±‚æ›¿æ¢ä¸ºç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ï¼›</li>
<li>æ›¿æ¢æ–‡æœ¬å†…å®¹ï¼šé€šè¿‡pagFile.setTextData(index, textData)æ¥å£ï¼Œä¿®æ”¹æŒ‡å®šæ–‡æœ¬å›¾å±‚çš„å†…å®¹ï¼›</li>
<li>æ‰©å±•æ’­æ”¾å™¨æ¥å£åï¼Œéœ€è°ƒç”¨flush()å¼ºåˆ¶åˆ·æ–°æ¸²æŸ“ï¼Œç¡®ä¿æ›¿æ¢æ•ˆæœç”Ÿæ•ˆã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d4f0a8a802e4de4ab1a0837984704f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=zMWQHOUsbMz7oyiPlhxrpYCdoIg%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>åˆæœŸé—®é¢˜ï¼šæ–‡æœ¬å­—ä½“æœªç”Ÿæ•ˆ</strong></p>
<p>æ›¿æ¢æ–‡æœ¬åå‘ç°è®¾å®šå­—ä½“æœªåº”ç”¨ã€‚æ’æŸ¥åç¡®è®¤ï¼šè‡ªå®šä¹‰å­—ä½“åŒ…æœªåœ¨ PAG ç¯å¢ƒä¸­æ³¨å†Œï¼Œå¯¼è‡´ PAG æ— æ³•è¯†åˆ«å­—ä½“ã€‚</p>
<p>éœ€åœ¨åŠ è½½ PAG æ¨¡æ¿å‰ï¼Œä¼˜å…ˆå®Œæˆå­—ä½“æ³¨å†Œï¼Œç¡®ä¿ PAG èƒ½æ­£å¸¸è°ƒç”¨ç›®æ ‡å­—ä½“ï¼Œå…·ä½“å®ç°æ­¥éª¤å¦‚ä¸‹ã€‚</p>
<p>PAGæä¾›PAGFont.registerFont()æ¥å£ç”¨äºæ³¨å†Œè‡ªå®šä¹‰å­—ä½“ï¼Œéœ€ä¼ å…¥ â€œå­—ä½“åç§°â€ ä¸ â€œå­—ä½“æ–‡ä»¶èµ„æºâ€ï¼ˆå¦‚.ttf/.otf æ ¼å¼æ–‡ä»¶ï¼‰ï¼Œæµç¨‹ä¸ºï¼š</p>
<ul>
<li>åŠ è½½å­—ä½“æ–‡ä»¶ï¼ˆä» CDN/OSS è·å–å­—ä½“åŒ…ï¼‰ï¼›</li>
<li>è°ƒç”¨ PAG æ¥å£å®Œæˆæ³¨å†Œï¼›</li>
<li>æ³¨å†ŒæˆåŠŸåï¼Œå†åŠ è½½.pagæ–‡ä»¶ï¼Œç¡®ä¿åç»­æ–‡æœ¬æ›¿æ¢æ—¶å­—ä½“å·²ç”Ÿæ•ˆã€‚</li>
</ul>

<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// éœ€æ³¨å†Œçš„å­—ä½“åˆ—è¡¨ï¼ˆå­—ä½“åç§°+CDNåœ°å€ï¼‰</span>
<span class="hljs-keyword">const</span>Â fonts = [
Â  {
Â  Â Â <span class="hljs-attr">family</span>:Â <span class="hljs-string">'POIZONSans'</span>,
Â  Â Â <span class="hljs-attr">url</span>:Â <span class="hljs-string">'https://h5static.XX/10122053/20250827-febf35c67d9232d4.ttf'</span>,
Â  },
Â  {
Â  Â Â <span class="hljs-attr">family</span>:Â <span class="hljs-string">'FZLanTingHeiS-DB-GB'</span>,
Â  Â Â <span class="hljs-attr">url</span>:Â <span class="hljs-string">'https://h5static.XX/10122053/20250821-1e3a4fccff659d1c.ttf'</span>,
Â  },
]


<span class="hljs-comment">// åœ¨â€œåŠ è½½PAGæ ¸å¿ƒåº“â€åã€â€œåŠ è½½PAGæ¨¡æ¿â€å‰ï¼Œæ–°å¢å­—ä½“æ³¨å†Œé€»è¾‘</span>
<span class="hljs-keyword">const</span>Â initPlayer =Â <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span>Â () =&gt; {
Â Â <span class="hljs-comment">// ... åŸæœ‰ä»£ç ï¼ˆCanvaså‡†å¤‡ã€åŠ è½½libpagï¼‰</span>
Â Â <span class="hljs-keyword">const</span>Â libpag =Â <span class="hljs-keyword">await</span>Â <span class="hljs-title function_">loadLibPag</span>()
Â Â <span class="hljs-keyword">const</span>Â <span class="hljs-variable constant_">PAG</span>Â =Â <span class="hljs-keyword">await</span>Â libpag.<span class="hljs-title class_">PAGInit</span>({Â <span class="hljs-attr">useScale</span>:Â <span class="hljs-literal">false</span>Â })
Â Â 
Â Â <span class="hljs-comment">// æ–°å¢ï¼šæ³¨å†Œè‡ªå®šä¹‰å­—ä½“</span>
Â Â <span class="hljs-keyword">if</span>Â (fonts &amp;&amp; fonts.<span class="hljs-property">length</span>Â &gt;Â <span class="hljs-number">0</span>Â &amp;&amp;Â <span class="hljs-variable constant_">PAG</span>?.<span class="hljs-property">PAGFont</span>?.<span class="hljs-property">registerFont</span>) {
Â  Â Â <span class="hljs-keyword">try</span>Â {
Â  Â  Â Â <span class="hljs-keyword">for</span>Â (<span class="hljs-keyword">const</span>Â { family, url }Â <span class="hljs-keyword">of</span>Â fonts) {
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (!family || !url)Â <span class="hljs-keyword">continue</span>
Â  Â  Â  Â Â <span class="hljs-comment">// åŠ è½½å­—ä½“æ–‡ä»¶ï¼ˆCORSè·¨åŸŸé…ç½®+å¼ºåˆ¶ç¼“å­˜ï¼‰</span>
Â  Â  Â  Â Â <span class="hljs-keyword">const</span>Â resp =Â <span class="hljs-keyword">await</span>Â <span class="hljs-title function_">fetch</span>(url, {Â <span class="hljs-attr">mode</span>:Â <span class="hljs-string">'cors'</span>,Â <span class="hljs-attr">cache</span>:Â <span class="hljs-string">'force-cache'</span>Â })
Â  Â  Â  Â Â <span class="hljs-keyword">const</span>Â blob =Â <span class="hljs-keyword">await</span>Â resp.<span class="hljs-title function_">blob</span>()
Â  Â  Â  Â Â <span class="hljs-comment">// è½¬æ¢ä¸ºFileç±»å‹ï¼ˆPAGæ³¨å†Œéœ€Fileæ ¼å¼ï¼‰</span>
Â  Â  Â  Â Â <span class="hljs-keyword">const</span>Â filename = url.<span class="hljs-title function_">split</span>(<span class="hljs-string">'/'</span>).<span class="hljs-title function_">pop</span>() ||Â <span class="hljs-string">'font.ttf'</span>
Â  Â  Â  Â Â <span class="hljs-keyword">const</span>Â fontFile =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">File</span>([blob], filename)
Â  Â  Â  Â Â <span class="hljs-comment">// æ³¨å†Œå­—ä½“</span>
Â  Â  Â  Â Â <span class="hljs-keyword">await</span>Â <span class="hljs-variable constant_">PAG</span>.<span class="hljs-property">PAGFont</span>.<span class="hljs-title function_">registerFont</span>(family, fontFile)
Â  Â  Â  Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Registered font for PAG:'</span>, family)
Â  Â  Â  }
Â  Â  }Â <span class="hljs-keyword">catch</span>Â (e) {
Â  Â  Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'Register fonts for PAG failed:'</span>, e)
Â  Â  }
Â  }
Â Â 
Â Â <span class="hljs-comment">// ç»§ç»­åŠ è½½PAGæ¨¡æ¿ï¼ˆåŸæœ‰ä»£ç ï¼‰</span>
Â Â <span class="hljs-keyword">const</span>Â response =Â <span class="hljs-keyword">await</span>Â <span class="hljs-title function_">fetch</span>(src)
Â Â <span class="hljs-keyword">const</span>Â buffer =Â <span class="hljs-keyword">await</span>Â response.<span class="hljs-title function_">arrayBuffer</span>()
Â Â <span class="hljs-keyword">const</span>Â pagFile =Â <span class="hljs-keyword">await</span>Â <span class="hljs-variable constant_">PAG</span>.<span class="hljs-property">PAGFile</span>.<span class="hljs-title function_">load</span>(buffer)
Â Â <span class="hljs-comment">// ... åç»­åˆ›å»ºPAGViewã€å°è£…æ’­æ”¾å™¨æ¥å£</span>
}, [src, width, height])
</code></pre>
<p><strong>æœ€ç»ˆæ•ˆæœ</strong></p>
<p>å­—ä½“æ³¨å†Œåï¼Œæ–‡æœ¬æ›¿æ¢çš„å­—ä½“æ­£å¸¸ç”Ÿæ•ˆï¼Œäººåƒä¸æ–‡æœ¬å‡æ˜¾ç¤ºæ­£ç¡®ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/405c50bb121c43049d8116a1584db07f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=objPcWRKzCFp%2FDbwdaU37xX5gJM%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>æ•°å­—å­—ä½“å·²åº”ç”¨æˆåŠŸ</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ›¿æ¢æ–‡æœ¬çš„å­—ä½“å·²æ­£ç¡®åº”ç”¨ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å®ç°æœ€åä¸€æ­¥ï¼Œå°†æ›´æ–°å›¾å±‚åŠæ–‡æœ¬åçš„å†…å®¹å¯¼å‡ºä¸ºCDNå›¾ç‰‡ã€‚</p>
<h3 data-id="heading-7">PagPlayeræˆªå¸§ï¼ˆå¯¼å‡ºPagPlayerå½“å‰å±•ç¤ºå†…å®¹ï¼‰</h3>
<p>æˆªå¸§æ˜¯å°† â€œè°ƒæ•´åçš„äººåƒ + æ›¿æ¢åçš„æ–‡æœ¬ + åŠ¨æ•ˆæ¨¡æ¿â€ å›ºåŒ–ä¸ºæœ€ç»ˆå›¾ç‰‡çš„å…³é”®æ­¥éª¤ã€‚å¼€å‘åˆæœŸæ›¾ç›´æ¥è°ƒç”¨pagView.makeSnapshot()é­é‡å¯¼å‡ºç©ºå¸§ï¼Œåé€šè¿‡updateSize()+flush()è§£å†³åŒæ­¥é—®é¢˜ï¼›æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ç§æ›´ç›´æ¥çš„æ–¹æ¡ˆ â€”â€”ç›´æ¥å¯¼å‡ºPAGæ¸²æŸ“å¯¹åº”çš„Canvaså†…å®¹ï¼ŒåŒæ ·èƒ½å®ç°éœ€æ±‚ï¼Œä¸”æµç¨‹æ›´ç®€æ´ã€‚</p>
<p><strong>åˆæœŸé—®é¢˜ï¼šç›´æ¥è°ƒç”¨æ¥å£å¯¼è‡´ç©ºå¸§</strong></p>
<p>å¼€å‘åˆæœŸï¼Œå°è¯•ç›´æ¥ä½¿ç”¨PAGViewæä¾›çš„makeSnapshot()æ¥å£æˆªå¸§ï¼Œä½†é‡åˆ°äº†è¿”å›ç©ºå¸§ï¼ˆå…¨é€æ˜å›¾ç‰‡ï¼‰æƒ…å†µç»è¿‡åå¤è°ƒè¯•å’ŒæŸ¥é˜…æ–‡æ¡£ï¼Œå‘ç°æ ¸å¿ƒåŸå› æ˜¯PAG æ¸²æŸ“çŠ¶æ€ä¸è°ƒç”¨æ—¶æœºä¸åŒæ­¥ï¼š</p>
<ul>
<li><strong>å°ºå¯¸ä¸åŒæ­¥</strong>ï¼šPAGView å†…éƒ¨æ¸²æŸ“å°ºå¯¸ä¸ Canvas å®é™…å°ºå¯¸ä¸åŒ¹é…ï¼Œå¯¼è‡´å†…å®¹æœªè½åœ¨å¯è§†åŒºåŸŸï¼›</li>
<li><strong>æ¸²æŸ“å»¶è¿Ÿ</strong>ï¼šå›¾å±‚æ›¿æ¢ã€æ–‡æœ¬ä¿®æ”¹åï¼ŒGPU æ¸²æŸ“æ˜¯å¼‚æ­¥çš„ï¼Œæ­¤æ—¶æˆªå¸§åªèƒ½æ•è·åˆ°æœªæ›´æ–°çš„ç©ºç™½æˆ–æ—§å¸§ã€‚</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<p>é’ˆå¯¹ç©ºå¸§é—®é¢˜ï¼Œç»“åˆ PAG åœ¨ H5 ç«¯ â€œåŸºäº Canvas æ¸²æŸ“â€ çš„ç‰¹æ€§ï¼Œæ¢³ç†å‡ºä¸¤ç§å¯è¡Œæ–¹æ¡ˆï¼Œæ ¸å¿ƒéƒ½æ˜¯ â€œå…ˆç¡®ä¿æ¸²æŸ“åŒæ­¥ï¼Œå†è·å–ç”»é¢â€ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/350f4915f8a14f74a5a91479c8f727c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=rekCHrp2TwcDocokRn6CqTJfcHo%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>æœ€ç»ˆè½åœ°æµç¨‹</strong></p>
<ul>
<li>è°ƒç”¨ pagView.updateSize() ä¸ pagView.flush() ç¡®ä¿æ¸²æŸ“åŒæ­¥ï¼›</li>
<li>é€šè¿‡canvas.toDataURL('image/jpeg', 0.9) ç”Ÿæˆ Base64 æ ¼å¼å›¾ç‰‡ï¼ˆJPG æ ¼å¼ï¼Œæ¸…æ™°åº¦ 0.9ï¼Œå¹³è¡¡è´¨é‡ä¸ä½“ç§¯ï¼‰ï¼›</li>
<li>å°† Base64 å›¾ç‰‡ä¸Šä¼ è‡³ CDNï¼Œè·å–å¯è®¿é—®çš„çƒæ˜Ÿå¡é“¾æ¥ã€‚</li>
</ul>
<p>ç‚¹å‡»æˆªå¸§æŒ‰é’®åï¼Œå³å¯ç”Ÿæˆå¯¹åº”çš„æˆªå›¾ã€‚</p>
<p>å®Œæˆ PAG æ’­æ”¾å™¨çš„åŸºç¡€åŠŸèƒ½ï¼ˆå›¾å±‚æ›¿æ¢ã€æ–‡æœ¬ä¿®æ”¹ã€æˆªå¸§å¯¼å‡ºï¼‰åï¼Œæˆ‘ä»¬æ¥èšç„¦ç”¨æˆ·æ ¸å¿ƒäº¤äº’éœ€æ±‚ â€”â€” äººåƒçš„æ‹–æ‹½ã€ç¼©æ”¾ä¸æ—‹è½¬ï¼Œé€šè¿‡å°è£… Canvas æ‰‹åŠ¿ç»„ä»¶ï¼Œå®ç°ç²¾å‡†çš„äººåƒæ„å›¾è°ƒæ•´èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-8">äº”ã€å›¾ç‰‡å˜æ¢åŠŸèƒ½å¼€å‘ï¼šå®ç°äººåƒæ‹–æ‹½ã€ç¼©æ”¾ä¸æ—‹è½¬</h2>
<p>åœ¨çƒæ˜Ÿå¡åˆæˆæµç¨‹ä¸­ï¼Œç”¨æˆ·éœ€è‡ªä¸»è°ƒæ•´ä¸Šä¼ äººåƒçš„ä½ç½®ã€å°ºå¯¸ä¸è§’åº¦ä»¥ä¼˜åŒ–æ„å›¾ã€‚æˆ‘ä»¬å¯ä»¥åŸºäº Canvas å°è£…å®Œæ•´çš„æ‰‹åŠ¿äº¤äº’èƒ½åŠ›ç»„ä»¶ï¼Œæ”¯æŒå•æŒ‡æ‹–æ‹½ã€åŒæŒ‡ç¼©æ”¾ / æ—‹è½¬ï¼ŒåŒæ—¶å…¼é¡¾é«˜æ¸…æ¸²æŸ“ä¸è·¨è®¾å¤‡å…¼å®¹æ€§ã€‚</p>
<h3 data-id="heading-9">åŠŸèƒ½ç›®æ ‡</h3>
<p>é’ˆå¯¹ â€œç”¨æˆ·äººåƒè°ƒæ•´â€ åœºæ™¯ï¼Œç»„ä»¶éœ€å®ç°ä»¥ä¸‹æ ¸å¿ƒèƒ½åŠ›ï¼š</p>
<ul>
<li><strong>åŸºç¡€äº¤äº’</strong>ï¼šæ”¯æŒå•æŒ‡æ‹–æ‹½ç§»åŠ¨äººåƒã€åŒæŒ‡ç¼©æ”¾å°ºå¯¸ã€åŒæŒ‡æ—‹è½¬è§’åº¦ï¼›</li>
<li><strong>çº¦æŸæ§åˆ¶</strong>ï¼šé™åˆ¶ç¼©æ”¾èŒƒå›´ï¼ˆå¦‚æœ€å° 0.1 å€ã€æœ€å¤§ 5 å€ï¼‰ï¼Œå¯é€‰å…³é—­æ—‹è½¬åŠŸèƒ½ï¼›</li>
<li><strong>é«˜æ¸…æ¸²æŸ“</strong>ï¼šé€‚é…è®¾å¤‡åƒç´ æ¯”ï¼ˆDPRï¼‰ï¼Œé¿å…å›¾ç‰‡æ‹‰ä¼¸æ¨¡ç³Šï¼›</li>
<li><strong>çŠ¶æ€åŒæ­¥</strong>ï¼šå®æ—¶åé¦ˆå½“å‰å˜æ¢å‚æ•°ï¼ˆåç§»é‡ã€ç¼©æ”¾æ¯”ã€æ—‹è½¬è§’ï¼‰ï¼Œæ”¯æŒé‡ç½®ä¸ç»“æœå¯¼å‡ºã€‚</li>
</ul>
<h3 data-id="heading-10">æ•ˆæœå±•ç¤º</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/811762938b80442bad5020688afbaf2e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=hQMmlIYHZRjYm%2BGX3fthzZRJpyw%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h3 data-id="heading-11">ç»„ä»¶è®¾è®¡ç†å¿µ</h3>
<p>åœ¨ç»„ä»¶è®¾è®¡ä¹‹åˆï¼Œæˆ‘ä»¬æ¥ä½¿ç”¨åˆ†å±‚ç†å¿µï¼Œå°†å›¾ç‰‡ç¼–è¾‘æ“ä½œåˆ†è§£ä¸ºä¸‰ä¸ªç‹¬ç«‹å±‚æ¬¡ï¼š</p>
<p><strong>äº¤äº’æ„ŸçŸ¥å±‚</strong></p>
<p><strong>äº¤äº’æ„ŸçŸ¥å±‚ - æ•è·ç”¨æˆ·æ‰‹åŠ¿å¹¶è½¬æ¢ä¸ºæ ‡å‡†åŒ–çš„å˜æ¢æ„å›¾</strong></p>
<ul>
<li>æ‰‹åŠ¿è¯­ä¹‰åŒ–ï¼šå°†åŸå§‹çš„é¼ æ ‡/è§¦æ‘¸äº‹ä»¶è½¬æ¢ä¸ºè¯­ä¹‰åŒ–çš„æ“ä½œæ„å›¾</li>
<li>å•æŒ‡ç§»åŠ¨ = å¹³ç§»æ„å›¾</li>
<li>åŒæŒ‡è·ç¦»å˜åŒ– = ç¼©æ”¾æ„å›¾</li>
<li>åŒæŒ‡è§’åº¦å˜åŒ– = æ—‹è½¬æ„å›¾</li>
<li>åŒå‡» = é‡ç½®æ„å›¾</li>
</ul>
<p><strong>å˜æ¢è®¡ç®—å±‚</strong></p>
<p><strong>å˜æ¢è®¡ç®—å±‚ - å¤„ç†å‡ ä½•å˜æ¢é€»è¾‘å’Œçº¦æŸè§„åˆ™</strong></p>
<ul>
<li><strong>å¤šç‚¹è§¦æ§çš„å‡ ä½•è®¡ç®—</strong>ï¼šåŒæŒ‡æ“ä½œæ—¶ï¼Œç³»ç»Ÿä¼šå®æ—¶è®¡ç®—ä¸¤ä¸ªè§¦ç‚¹å½¢æˆçš„å‡ ä½•å…³ç³»ï¼ˆè·ç¦»ã€è§’åº¦ã€ä¸­å¿ƒç‚¹ï¼‰ï¼Œç„¶åå°†è¿™äº›å‡ ä½•å˜åŒ–æ˜ å°„ä¸ºå›¾ç‰‡çš„å˜æ¢å‚æ•°ã€‚</li>
<li><strong>äº¤äº’è¿ç»­æ€§</strong>ï¼šæ¯æ¬¡æ‰‹åŠ¿å¼€å§‹æ—¶è®°å½•åˆå§‹çŠ¶æ€ï¼Œç§»åŠ¨è¿‡ç¨‹ä¸­æ‰€æœ‰è®¡ç®—éƒ½åŸºäºè¿™ä¸ªåˆå§‹çŠ¶æ€è¿›è¡Œå¢é‡è®¡ç®—ï¼Œç¡®ä¿å˜æ¢çš„è¿ç»­æ€§å’Œå¹³æ»‘æ€§ã€‚</li>
</ul>
<p><strong>æ¸²æŸ“æ‰§è¡Œå±‚</strong></p>
<p><strong>æ¸²æŸ“æ‰§è¡Œå±‚ - å°†å˜æ¢ç»“æœç»˜åˆ¶åˆ°Canvasä¸Š</strong></p>
<ul>
<li><strong>é«˜æ¸…é€‚é…</strong>ï¼šCanvasçš„ç‰©ç†åˆ†è¾¨ç‡å’Œæ˜¾ç¤ºå°ºå¯¸åˆ†ç¦»ç®¡ç†ï¼Œç‰©ç†åˆ†è¾¨ç‡é€‚é…è®¾å¤‡åƒç´ æ¯”ä¿è¯æ¸…æ™°åº¦ï¼Œæ˜¾ç¤ºå°ºå¯¸æ§åˆ¶ç•Œé¢å¸ƒå±€ã€‚</li>
<li><strong>å˜æ¢åº”ç”¨</strong>ï¼šç»˜åˆ¶æ—¶æŒ‰ç…§ç‰¹å®šé¡ºåºåº”ç”¨å˜æ¢ - å…ˆç§»åŠ¨åˆ°ç”»å¸ƒä¸­å¿ƒå»ºç«‹åæ ‡ç³»ï¼Œå†åº”ç”¨ç”¨æˆ·çš„å¹³ç§»ã€æ—‹è½¬ã€ç¼©æ”¾æ“ä½œï¼Œæœ€åä»¥å›¾ç‰‡ä¸­å¿ƒä¸ºåŸç‚¹ç»˜åˆ¶ã€‚è¿™ä¸ªé¡ºåºç¡®ä¿äº†å˜æ¢çš„ç›´è§‚æ€§ã€‚</li>
<li><strong>æ¸²æŸ“æ§åˆ¶</strong>ï¼šåŒºåˆ†å®æ—¶äº¤äº’å’Œé™æ€æ˜¾ç¤ºä¸¤ç§åœºæ™¯ï¼Œå®æ—¶äº¤äº’æ—¶ä½¿ç”¨requestAnimationFrameä¿è¯æµç•…æ€§ï¼Œé™æ€æ›´æ–°æ—¶ä½¿ç”¨é˜²æŠ–å‡å°‘ä¸å¿…è¦çš„é‡ç»˜ã€‚</li>
</ul>
<h3 data-id="heading-12">æ•°æ®æµè®¾è®¡</h3>
<ul>
<li><strong>å•å‘æ•°æ®æµ</strong>ï¼šç”¨æˆ·æ“ä½œ â†’ æ‰‹åŠ¿è§£æ â†’ å˜æ¢è®¡ç®— â†’ çº¦æŸåº”ç”¨ â†’ çŠ¶æ€æ›´æ–° â†’ é‡æ–°æ¸²æŸ“ â†’ å›è°ƒé€šçŸ¥ã€‚è¿™ç§å•å‘æµåŠ¨ä¿è¯äº†æ•°æ®çš„å¯è¿½è¸ªæ€§ã€‚</li>
<li><strong>çŠ¶æ€åŒæ­¥æœºåˆ¶</strong>ï¼šå†…éƒ¨çŠ¶æ€å˜åŒ–æ—¶ï¼Œé€šè¿‡å›è°ƒæœºåˆ¶åŒæ­¥ç»™å¤–éƒ¨ç»„ä»¶ï¼Œæ”¯æŒå®æ—¶åŒæ­¥å’Œå»¶è¿ŸåŒæ­¥ä¸¤ç§æ¨¡å¼ï¼Œé€‚åº”ä¸åŒçš„æ€§èƒ½éœ€æ±‚ã€‚</li>
</ul>
<p>å®ç°ç‹¬ç«‹çš„äººåƒäº¤äº’è°ƒæ•´åŠŸèƒ½åï¼Œå…³é”®æ˜¯æ‰“é€š â€œç”¨æˆ·æ“ä½œâ€ ä¸ â€œPAG é¢„è§ˆâ€ çš„å®æ—¶åŒæ­¥é“¾è·¯ â€”â€” ç¡®ä¿ç”¨æˆ·æ¯ä¸€æ¬¡è°ƒæ•´éƒ½èƒ½å³æ—¶åé¦ˆåœ¨çƒæ˜Ÿå¡æ¨¡æ¿ä¸­ï¼Œè¿™éœ€è¦è®¾è®¡åˆ†å±‚åŒæ­¥æ¶æ„ä¸é«˜æ•ˆè°ƒåº¦ç­–ç•¥ã€‚</p>
<h2 data-id="heading-13">å…­ã€äº¤äº’ä¸é¢„è§ˆå®æ—¶åŒæ­¥</h2>
<p>åœ¨çƒæ˜Ÿå¡ç”Ÿæˆæµç¨‹ä¸­ï¼Œâ€œç”¨æˆ·è°ƒæ•´äººåƒâ€ ä¸ â€œPAG é¢„è§ˆæ›´æ–°â€ çš„å®æ—¶åŒæ­¥æ˜¯æ ¸å¿ƒä½“éªŒæŒ‡æ ‡ â€”â€” ç”¨æˆ·æ¯ä¸€æ¬¡æ‹–æ‹½ã€ç¼©æ”¾æˆ–æ—‹è½¬æ“ä½œï¼Œéƒ½éœ€è¦å³æ—¶åé¦ˆåœ¨çƒæ˜Ÿå¡æ¨¡æ¿ä¸­ï¼Œæ‰èƒ½è®©ç”¨æˆ·ç²¾å‡†åˆ¤æ–­æ„å›¾æ•ˆæœã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹å®ç°æ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fda5eb04c8744b7d81053047e34321cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=Fy2ZE0uP%2Bt%2FHLI2li8UCJy387mo%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»é€»è¾‘æ¶æ„ã€å…³é”®æŠ€æœ¯æ–¹æ¡ˆã€è¾¹ç•Œåœºæ™¯å¤„ç†ä¸‰æ–¹é¢ï¼Œæ‹†è§£ â€œç”¨æˆ·äº¤äº’è°ƒæ•´â€ ä¸ â€œPAG é¢„è§ˆåŒæ­¥â€ é“¾è·¯çš„å®ç°æ€è·¯ã€‚</p>
<h3 data-id="heading-14">é€»è¾‘æ¶æ„ï¼šä¸‰å±‚ååŒåŒæ­¥æ¨¡å‹</h3>
<p>ç»„ä»¶å°† â€œäº¤äº’ - åŒæ­¥ - æ¸²æŸ“â€ æ‹†åˆ†ä¸ºä¸‰ä¸ªç‹¬ç«‹ä½†ååŒçš„å±‚çº§ï¼Œå„å±‚èŒè´£å•ä¸€ä¸”é€šè¿‡æ˜ç¡®æ¥å£é€šä¿¡ï¼Œé¿å…è€¦åˆå¯¼è‡´çš„åŒæ­¥å»¶è¿Ÿæˆ–çŠ¶æ€æ··ä¹±ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/72b5b151b1cb40cd9fcae281a5dab73d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=oZI%2F8D5Nyk4%2BLU%2FKYCGq5ajDBgs%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>æ ¸å¿ƒæµè½¬é“¾è·¯</strong>ï¼šç”¨æˆ·æ“ä½œ â†’ CanvasImageEditor ç”Ÿæˆå®æ—¶ Canvas â†’ åŒæ­¥å±‚ç›´æ¥å¤ç”¨ Canvas æ›´æ–° PAG å›¾å±‚ â†’ è°ƒåº¦å±‚æ‰¹é‡è§¦å‘ flush â†’ PagPlayer æ¸²æŸ“æœ€æ–°ç”»é¢ã€‚</p>
<h3 data-id="heading-15">å…³é”®æ–¹æ¡ˆï¼šä½æŸè€— + é«˜å®æ—¶æ€§çš„å¹³è¡¡</h3>
<p>ä¸ºåŒæ—¶å…¼é¡¾ â€œé«˜é¢‘äº¤äº’å¯¼è‡´ GPU æ€§èƒ½ç“¶é¢ˆâ€ ä¸ â€œå®æ—¶é¢„è§ˆéœ€å³æ—¶åé¦ˆâ€ ï¼Œç»„ä»¶é€šè¿‡ä¸‰å¤§æ ¸å¿ƒæŠ€æœ¯æ–¹æ¡ˆå®ç°å¹³è¡¡ã€‚</p>
<p><strong>å¤ç”¨ Canvas å…ƒç´ </strong></p>
<p>è·³è¿‡æ ¼å¼è½¬æ¢ç¯èŠ‚ï¼Œå‡å°‘æ€§èƒ½æ¶ˆè€—ï¼Œç›´æ¥å¤ç”¨ Canvas å…ƒç´ ä½œä¸º PAG å›¾ç‰‡æºã€‚</p>
<p><strong>æ ¸å¿ƒä»£ç é€»è¾‘ï¼š</strong></p>
<p>é€šè¿‡ canvasEditorRef.current.getCanvas() è·å–äº¤äº’å±‚çš„ Canvas å®ä¾‹ï¼Œç›´æ¥ä¼ å…¥PAG çš„ replaceImageFast æ¥å£ï¼ˆå¿«é€Ÿæ›¿æ¢ï¼Œä¸è§¦å‘å³æ—¶åˆ·æ–°ï¼‰ï¼Œé¿å…æ•°æ®å†—ä½™å¤„ç†ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// ç›´æ¥ä½¿ç”¨ Canvas å…ƒç´ æ›´æ–° PAGï¼Œæ— æ ¼å¼è½¬æ¢
constÂ <span class="hljs-attr">canvas</span> = canvasEditorRef.current.getCanvas()<span class="hljs-comment">;</span>
pagPlayerRef.current.replaceImageFast(editImageIndex, canvas)<span class="hljs-comment">;Â // å¿«é€Ÿæ›¿æ¢ï¼Œä¸flush</span>
</code></pre>
<p><strong>æ™ºèƒ½æ‰¹é‡è°ƒåº¦ï¼š</strong></p>
<p><strong>åˆ†çº§å¤„ç†æ›´æ–°ï¼Œå…¼é¡¾æµç•…ä¸æ•ˆç‡</strong></p>
<p>é’ˆå¯¹ç”¨æˆ·è¿ç»­æ“ä½œï¼ˆå¦‚å¿«é€Ÿæ‹–æ‹½ï¼‰äº§ç”Ÿçš„é«˜é¢‘æ›´æ–°ï¼Œç»„ä»¶è®¾è®¡ â€œåˆ†çº§è°ƒåº¦ç­–ç•¥â€ï¼Œé¿å…æ¯ä¸€æ¬¡æ“ä½œéƒ½è§¦å‘ PAG çš„ flushï¼ˆGPU å¯†é›†å‹æ“ä½œï¼‰ï¼š</p>
<p><strong>è°ƒåº¦é€»è¾‘</strong>ï¼š</p>
<p>å®æ—¶æ“ä½œåˆå¹¶ï¼šé€šè¿‡ requestAnimationFrame æ•è·è¿ç»­æ“ä½œï¼Œå°† 16ms å†…çš„å¤šæ¬¡æ›¿æ¢æŒ‡ä»¤åˆå¹¶ä¸ºä¸€æ¬¡ï¼›</p>
<p><strong>æ™ºèƒ½ flush å†³ç­–</strong>ï¼š</p>
<p>è‹¥è·ç¦»ä¸Šæ¬¡ flush è¶…è¿‡ 100msï¼ˆç”¨æˆ·æ“ä½œæš‚åœï¼‰ï¼Œç«‹å³è§¦å‘ flushPagView()ï¼Œç¡®ä¿é¢„è§ˆä¸å»¶è¿Ÿï¼›</p>
<p>è‹¥æ“ä½œä»åœ¨æŒç»­ï¼Œå»¶è¿Ÿ Math.max(16, updateThrottle/2) æ¯«ç§’å† flushï¼Œåˆå¹¶å¤šæ¬¡æ›´æ–°ã€‚</p>
<p><strong>é˜²æŠ–é™çº§</strong>ï¼š</p>
<p>å½“ updateThrottle &gt; 16msï¼ˆä½å®æ—¶æ€§éœ€æ±‚åœºæ™¯ï¼‰ï¼Œè‡ªåŠ¨é™çº§ä¸ºé˜²æŠ–ç­–ç•¥ï¼Œé¿å…è¿‡åº¦è°ƒåº¦ã€‚</p>
<p><strong>æ ¸å¿ƒä»£ç ç‰‡æ®µ</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æ™ºèƒ½ flush ç­–ç•¥ï¼šçŸ­é—´éš”åˆå¹¶ï¼Œé•¿é—´éš”ç«‹å³åˆ·æ–°</span>
constÂ timeSinceLastFlush =Â Date<span class="hljs-selector-class">.now</span>() - batchUpdate<span class="hljs-selector-class">.lastFlushTime</span>;
ifÂ (timeSinceLastFlush &gt;Â <span class="hljs-number">100</span>) {
Â Â awaitÂ <span class="hljs-built_in">flushPagView</span>();Â <span class="hljs-comment">// é—´éš”ä¹…ï¼Œç«‹å³åˆ·æ–°</span>
}Â elseÂ {
Â Â <span class="hljs-comment">// å»¶è¿Ÿåˆ·æ–°ï¼Œåˆå¹¶åç»­æ“ä½œ</span>
Â Â <span class="hljs-built_in">setTimeout</span>(asyncÂ () =&gt; {
Â  Â Â ifÂ (batchUpdate.pendingUpdatesÂ &gt;Â <span class="hljs-number">0</span>) {
Â  Â  Â Â awaitÂ <span class="hljs-built_in">flushPagView</span>();
Â  Â  }
Â  },Â Math<span class="hljs-selector-class">.max</span>(<span class="hljs-number">16</span>, updateThrottle/<span class="hljs-number">2</span>));
}
</code></pre>
<p><strong>åŒå‘çŠ¶æ€æ ¡éªŒï¼š</strong></p>
<p><strong>è§£å†³é¦–å¸§ / åˆ‡æ¢åœºæ™¯çš„åŒæ­¥ç©ºç™½</strong></p>
<p>é’ˆå¯¹ â€œPAG åŠ è½½å®Œæˆä½† Canvas æœªå°±ç»ªâ€â€œCanvas å°±ç»ªä½† PAG æœªåˆå§‹åŒ–â€ ç­‰é¦–å¸§åŒæ­¥é—®é¢˜ï¼Œç»„ä»¶è®¾è®¡åŒå‘é‡è¯•æ ¡éªŒæœºåˆ¶ï¼š</p>
<ul>
<li>PAG åŠ è½½åæ ¡éªŒï¼šhandlePagLoad ä¸­å¯åŠ¨ 60 å¸§ï¼ˆçº¦ 1sï¼‰é‡è¯•ï¼Œæ£€æµ‹ Canvas ä¸ PAG å‡å°±ç»ªåï¼Œè§¦å‘åˆå§‹åŒæ­¥ï¼›</li>
<li>Canvas åŠ è½½åæ ¡éªŒï¼šhandleCanvasImageLoad åŒç†ï¼Œè‹¥ PAG æœªå°±ç»ªï¼Œé‡è¯•è‡³ä¸¤è€…çŠ¶æ€åŒ¹é…ï¼›</li>
<li>ç¼–è¾‘æ¨¡å¼åˆ‡æ¢æ ¡éªŒï¼šè¿›å…¥ startEdit æ—¶ï¼Œé€šè¿‡åƒç´ æ£€æµ‹ï¼ˆgetImageDataï¼‰åˆ¤æ–­ Canvas æ˜¯å¦æœ‰å†…å®¹ï¼Œæœ‰åˆ™ç«‹å³åŒæ­¥ï¼Œé¿å…ç©ºç™½é¢„è§ˆã€‚</li>
</ul>
<h3 data-id="heading-16">è¾¹ç•Œåœºæ™¯å¤„ç†ï¼šä¿éšœåŒæ­¥ç¨³å®šæ€§</h3>
<p><strong>ç¼–è¾‘æ¨¡å¼åˆ‡æ¢çš„çŠ¶æ€è¡”æ¥</strong></p>
<ul>
<li>è¿›å…¥ç¼–è¾‘ï¼šæš‚åœ PAG æ’­æ”¾ï¼Œæ˜¾ç¤ºé€æ˜çš„ Canvas äº¤äº’å±‚ï¼ˆopacity: 0ï¼Œä»…ä¿ç•™äº¤äº’èƒ½åŠ›ï¼‰ï¼Œè§¦å‘åˆå§‹åŒæ­¥ï¼›</li>
<li>é€€å‡ºç¼–è¾‘ï¼šæ¸…ç†æ‰¹é‡è°ƒåº¦å®šæ—¶å™¨ï¼Œå¼ºåˆ¶ flush ç¡®ä¿æœ€ç»ˆçŠ¶æ€ç”Ÿæ•ˆï¼ŒæŒ‰éœ€æ¢å¤ PAG è‡ªåŠ¨æ’­æ”¾ã€‚</li>
</ul>
<p><strong>æ–‡æœ¬æ›¿æ¢ä¸å›¾ç‰‡åŒæ­¥çš„ååŒ</strong></p>
<p>å½“å¤–éƒ¨ä¼ å…¥ textReplacementsï¼ˆå¦‚çƒæ˜Ÿåç§°ä¿®æ”¹ï¼‰æ—¶ï¼Œé€šè¿‡ç‹¬ç«‹çš„ applyToPagText æ¥å£æ›´æ–°æ–‡æœ¬å›¾å±‚ï¼Œå¹¶ä¸å›¾ç‰‡åŒæ­¥å…±äº« flush è°ƒåº¦ï¼Œé¿å…é‡å¤åˆ·æ–°ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æ–‡æœ¬æ›¿æ¢åè§¦å‘ç»Ÿä¸€ flush</span>
<span class="hljs-built_in">useEffect</span>(() =&gt;Â {
Â Â ifÂ (textReplacements?.length) {
Â  Â Â <span class="hljs-built_in">applyToPagText</span>();
Â  Â Â <span class="hljs-built_in">flushPagView</span>();
Â  }
}, <span class="hljs-selector-attr">[textReplacements]</span>);
</code></pre>
<p><strong>ç»„ä»¶å¸è½½çš„èµ„æºæ¸…ç†</strong></p>
<p>å¸è½½æ—¶æ¸…é™¤æ‰¹é‡è°ƒåº¦çš„å®šæ—¶å™¨ï¼ˆclearTimeoutï¼‰ï¼Œé¿å…å†…å­˜æ³„æ¼ï¼›åŒæ—¶ PAG å†…éƒ¨ä¼šè‡ªåŠ¨é”€æ¯å®ä¾‹ï¼Œé‡Šæ”¾ GPU èµ„æºã€‚</p>
<h3 data-id="heading-17">PAGäººåƒå±…ä¸­æ— é®æŒ¡</h3>
<p>å‡è®¾ç»™å®šä»»æ„ä¸€å¼ å›¾ç‰‡ï¼Œæˆ‘ä»¬å°†å…¶ç»˜åˆ¶åˆ°Canvasä¸­æ—¶ï¼Œå›¾ç‰‡ç”±äºå°ºå¯¸åŸå› å¯èƒ½ä¼šå±•ç¤ºä¸å®Œæ•´ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f20320c6d45c4965a2d4a791fab68979~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=iXhbtjcj2kDyMBCDzSzqO11S%2B1Y%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>é‚£ä¹ˆï¼Œå¦‚ä½•ä¿è¯ä»»æ„å°ºå¯¸å›¾ç‰‡åœ¨å›ºå®šå°ºå¯¸Canvasä¸­åˆå§‹åŒ–é»˜è®¤å±…ä¸­æ— é®æŒ¡å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬é‡‡ç”¨ä»¥ä¸‹æ–¹æ¡ˆï¼š</p>
<p><strong>ç­‰æ¯”ç¼©æ”¾ç®—æ³•ï¼ˆContainæ¨¡å¼ï¼‰</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// è®¡ç®—é€‚é…ç¼©æ”¾æ¯”ä¾‹ï¼Œç¡®ä¿å›¾ç‰‡å®Œæ•´æ˜¾ç¤º</span>
<span class="hljs-type">const</span>Â fitScale =Â Math.<span class="hljs-built_in">min</span>(
Â  editCanvasWidth / image.width, Â Â <span class="hljs-comment">// å®½åº¦é€‚é…æ¯”ä¾‹</span>
Â  availableHeight / image.heightÂ  Â <span class="hljs-comment">// é«˜åº¦é€‚é…æ¯”ä¾‹ï¼ˆè€ƒè™‘ç•™ç™½ï¼‰</span>
)
</code></pre>
<p>æ ¸å¿ƒåŸç†ï¼š</p>
<ul>
<li>é€‰æ‹©è¾ƒå°çš„ç¼©æ”¾æ¯”ä¾‹ï¼Œç¡®ä¿å›¾ç‰‡åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šéƒ½ä¸ä¼šè¶…å‡ºè¾¹ç•Œï¼›</li>
<li>è¿™å°±æ˜¯CSSçš„object-fit: containæ•ˆæœï¼Œä¿è¯å›¾ç‰‡å®Œæ•´å¯è§ã€‚</li>
<li/>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1844bb68295646529e48d32d674b49b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=OSov7g1%2BbYGqAa16tpQ2j1HJa0I%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>é¡¶éƒ¨ç•™ç™½é¢„ç•™</strong></p>
<p>å®é™…çš„PAGæ¨¡æ¿ä¸­ï¼Œé¡¶éƒ¨ä¼šæœ‰ä¸€éƒ¨åˆ†é®æŒ¡ï¼Œå› æ­¤éœ€è¦å¯¹æ•´ä¸ªç”»å¸ƒCanvasé¡¶éƒ¨ç•™ç™½ã€‚</p>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a8c97a982a1e47449476bcb38ef04ed9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=%2FjPaXe7garlxXEPlEfFnc9KQHqU%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<ul>
<li>ä¸ºäººåƒçš„å¤´éƒ¨åŒºåŸŸé¢„ç•™ç©ºé—´</li>
<li>é¿å…é‡è¦çš„é¢éƒ¨ç‰¹å¾è¢«PAGæ¨¡æ¿çš„è£…é¥°å…ƒç´ é®æŒ¡</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5dd54db9849547c885cba5cf79fddbdd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=8cDAeZcTpWYZIm%2BSCCH78uelAHc%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>æ ¸å¿ƒä»£ç </strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// é¡¶éƒ¨ç•™ç™½æ¯”ä¾‹</span>
<span class="hljs-type">const</span>Â TOP_BLANK_RATIOÂ =Â <span class="hljs-number">0.2</span>


<span class="hljs-type">const</span>Â handleCanvasImageLoadÂ =Â <span class="hljs-built_in">useCallback</span>(
Â Â <span class="hljs-built_in">async</span>Â (image: HTMLImageElement) =&gt; {
Â  Â  console.<span class="hljs-built_in">log</span>(<span class="hljs-string">'Canvaså›¾ç‰‡åŠ è½½å®Œæˆ:'</span>, image.width,Â <span class="hljs-string">'x'</span>, image.height)
Â  Â Â <span class="hljs-built_in">setIsImageReady</span>(<span class="hljs-literal">true</span>)


Â  Â  <span class="hljs-comment">// åˆå§‹ç­‰æ¯”ç¼©æ”¾ä»¥å®Œæ•´å¯è§ï¼ˆcontainï¼‰</span>
Â  Â Â <span class="hljs-keyword">if</span>Â (canvasEditorRef.current) {
Â  Â  Â  <span class="hljs-comment">// é¡¶éƒ¨ç•™ç™½æ¯”ä¾‹</span>
Â  Â  Â Â <span class="hljs-type">const</span>Â TOP_BLANK_RATIO = spaceTopRatio ??Â <span class="hljs-number">0</span>
Â  Â  Â Â <span class="hljs-type">const</span>Â availableHeight = editCanvasHeight * (<span class="hljs-number">1</span>Â - TOP_BLANK_RATIO)


Â  Â  Â Â <span class="hljs-comment">// ä»¥å¯ç”¨é«˜åº¦è¿›è¡Œç­‰æ¯”ç¼©æ”¾ï¼ˆåŒæ—¶è€ƒè™‘å®½åº¦ï¼‰</span>
Â  Â  Â Â <span class="hljs-type">const</span>Â fitScaleÂ = Math.<span class="hljs-built_in">min</span>(
Â  Â  Â  Â  editCanvasWidth / image.width,Â 
Â  Â  Â  Â  availableHeight / image.height
Â  Â  Â  )


Â  Â  Â Â <span class="hljs-comment">// è®¡ç®—ä½¿å›¾ç‰‡é¡¶éƒ¨æ°å¥½ç•™ç™½ TOP_BLANK_RATIO çš„ä½ç§»</span>
Â  Â  Â Â <span class="hljs-type">const</span>Â topMarginÂ = editCanvasHeight * TOP_BLANK_RATIO
Â  Â  Â Â <span class="hljs-type">const</span>Â imageScaledHeightÂ = image.height * fitScale
Â  Â  Â Â <span class="hljs-type">const</span>Â targetCenterYÂ = topMargin + imageScaledHeight /Â <span class="hljs-number">2</span>
Â  Â  Â Â <span class="hljs-type">const</span>Â yOffsetÂ = targetCenterY - editCanvasHeight /Â <span class="hljs-number">2</span>
Â  Â  Â Â 
Â  Â  Â  canvasEditorRef.current.<span class="hljs-built_in">setTransform</span>({Â 
Â  Â  Â Â Â  x:Â <span class="hljs-number">0</span>,Â 
Â  Â  Â Â Â  y: yOffset,Â 
Â  Â  Â Â Â  scale: fitScale,Â 
Â  Â  Â Â Â  rotation:Â <span class="hljs-number">0</span>Â 
Â  Â  Â  })
Â  Â  }
Â  Â Â <span class="hljs-comment">// ...</span>
Â  },
Â  [applyToPag, flushPagView, isEditMode, editCanvasWidth, editCanvasHeight]
)
</code></pre>
<p>åœ¨å•å¼ çƒæ˜Ÿå¡çš„äº¤äº’ã€é¢„è§ˆä¸åˆæˆé“¾è·¯è·‘é€šåï¼Œéœ€è¿›ä¸€æ­¥æ‹“å±•æ‰¹é‡åˆæˆèƒ½åŠ›ï¼Œä»¥æ»¡è¶³å¤šç­‰çº§çƒæ˜Ÿå¡ä¸€æ¬¡æ€§ç”Ÿæˆçš„ä¸šåŠ¡éœ€æ±‚ï¼Œæ ¸å¿ƒåœ¨äºè§£å†³æ‰¹é‡åœºæ™¯ä¸‹çš„æ¸²æŸ“æ•ˆç‡ã€èµ„æºç®¡ç†ä¸å¹¶å‘æ§åˆ¶é—®é¢˜ã€‚</p>
<h2 data-id="heading-18">ä¸ƒã€æ‰¹é‡ç”Ÿæˆ</h2>
<p>åœ¨ä»¥ä¸Šç« èŠ‚ï¼Œæˆ‘ä»¬å®ç°äº†å•ä¸ªå¡ç‰‡çš„äº¤äº’åŠåˆæˆï¼Œä½†å®é™…çš„éœ€æ±‚ä¸­è¿˜æœ‰æ‰¹é‡ç”Ÿæˆçš„éœ€æ±‚ï¼Œç”¨æ¥åˆæˆä¸åŒç­‰çº§çš„çƒæ˜Ÿå¡ï¼Œå› æ­¤æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å¤„ç†æ‰¹é‡ç”Ÿæˆç›¸å…³çš„é€»è¾‘ï¼ˆç¢äºç¯‡å¹…åŸå› ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ä¸å±•ç¤ºä»£ç äº†ï¼Œä¸»è¦ä»¥æµç¨‹å›¾å½¢å¼æ¥å‘ˆç°ã€‚</p>
<p>ç»ç»Ÿè®¡ï¼Œç»è¿‡å„ç§æ‰‹æ®µä¼˜åŒ–åæœ¬æ´»åŠ¨ä¸­æ‰¹é‡åˆæˆ8å¼ å›¾æœ€å¿«ä»…éœ€3sï¼Œæœ€æ…¢10sï¼Œæ‰¹é‡åˆæˆè¿‡ç¨‹ç”¨æˆ·åŸºæœ¬æ˜¯æ„ŸçŸ¥ä¸åˆ°ã€‚</p>
<h3 data-id="heading-19">å…³é”®æŠ€æœ¯æ–¹æ¡ˆ</h3>
<ul>
<li>ç¦»çº¿æ¸²æŸ“éšè—å®¹å™¨ï¼šé¿å…å¸ƒå±€å¹²æ‰°</li>
<li>èµ„æºç¼“å­˜ä¸é¢„åŠ è½½ï¼šæå‡åˆæˆæ•ˆç‡</li>
<li>å¹¶å‘å·¥ä½œåç¨‹æ± ï¼šå¹³è¡¡æ€§èƒ½ä¸ç¨³å®šæ€§</li>
<li>å¤šå±‚é‡è¯•å®¹é”™ï¼šæå‡åˆæˆæˆåŠŸç‡</li>
<li>å›¾ç‰‡å¤„ç†ä¸å°ºå¯¸é€‚é…ï¼šä¿éšœåˆæˆè´¨é‡</li>
<li>ç»“åˆä¸šåŠ¡åœºæ™¯å®ç°æ‰¹é‡åˆæˆä¸­æ–­ä¸‹æ¬¡è®¿é—®é¡µé¢åå°ç»§ç»­ç”Ÿæˆçš„é€»è¾‘ï¼šä¿éšœåˆæˆåŠŸèƒ½ç¨³å®šæ€§ã€‚</li>
</ul>
<h3 data-id="heading-20">æ ¸å¿ƒæ¶æ„</h3>
<ul>
<li>èµ„æºç®¡ç†å±‚ï¼šè´Ÿè´£PAGåº“åŠ è½½ã€bufferç¼“å­˜ã€é¢„åŠ è½½è°ƒåº¦</li>
<li>ä»»åŠ¡å¤„ç†å±‚ï¼šå•ä¸ªæ¨¡æ¿çš„æ¸²æŸ“æµæ°´çº¿ï¼ŒåŒ…å«é‡è¯•æœºåˆ¶</li>
<li>å¹¶å‘æ§åˆ¶å±‚ï¼šå·¥ä½œåç¨‹æ± ç®¡ç†ï¼Œä»»åŠ¡é˜Ÿåˆ—è°ƒåº¦</li>
</ul>
<h3 data-id="heading-21">æ•´ä½“æ‰¹é‡åˆæˆæµç¨‹</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/612b7f364a01464682a2e01d60f4a0b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=4uzWIL8yDryQcpg0M3eItoblv%2FQ%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>èŠ‚æ‹æ‹‰å–ï¼šæŒ‰ç…§å›ºå®šæ—¶é—´é—´éš”ä¾æ¬¡æ‹‰å–èµ„æºï¼Œè€Œéä¸€æ¬¡æ€§å¹¶å‘è·å–æ‰€æœ‰èµ„æº</p>
<h3 data-id="heading-22">å•ä¸ªæ¨¡æ¿å¤„ç†æµç¨‹</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a635fd380fd46e18a0c9653cbda2bca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=udNFW54g0aY206qaj%2B3b4dCCPIs%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c97ecbecda84aeeaa2e8375e5a4b760~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=USGY5wKbL7t%2B0UNqfSZZpDRFMSI%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h3 data-id="heading-23">å¹¶å‘å·¥ä½œåç¨‹æ¨¡å¼</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4ffb9d653c3461394a6d8ece9c75c42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=zFxVlSb59WJjwShdqzKBQGKhQsE%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>å…±äº«æ¸¸æ ‡ï¼šå¤šä¸ªå·¥ä½œåç¨‹å…±åŒä½¿ç”¨çš„ä»»åŠ¡é˜Ÿåˆ—æŒ‡é’ˆï¼Œç”¨äºåè°ƒä»»åŠ¡åˆ†é…ã€‚</p>
<p>åŸå­è·å–ä»»åŠ¡ï¼šç¡®ä¿åœ¨å¹¶å‘ç¯å¢ƒä¸‹ï¼Œæ¯ä¸ªä»»åŠ¡åªè¢«ä¸€ä¸ªåç¨‹è·å–ï¼Œé¿å…é‡å¤å¤„ç†ã€‚</p>
<p>èµ„æºç®¡ç†ä¸ç¼“å­˜ç­–ç•¥</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1b994db9a114173bcf9805939ae4b92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767339934&amp;x-signature=KO9Wip5uJjz2Mj6ipKUhzkf6CWU%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>æ‰¹é‡åˆæˆä¸å•å¡äº¤äº’çš„åŠŸèƒ½è½åœ°åï¼Œéœ€é’ˆå¯¹å¼€å‘è¿‡ç¨‹ä¸­å‡ºç°çš„å¡é¡¿ã€ç©ºå¸§ã€åŠ è½½æ…¢ç­‰é—®é¢˜è¿›è¡Œé’ˆå¯¹æ€§ä¼˜åŒ–ï¼ŒåŒæ—¶æ„å»ºå…¼å®¹æ€§æ£€æµ‹ä¸é™çº§æ–¹æ¡ˆï¼Œä¿éšœä¸åŒç¯å¢ƒä¸‹åŠŸèƒ½çš„ç¨³å®šå¯ç”¨ã€‚</p>
<h2 data-id="heading-24">å…«ã€æ€§èƒ½ä¼˜åŒ–ä¸é™çº§å…¼å®¹</h2>
<h3 data-id="heading-25">æ€§èƒ½ä¼˜åŒ–</h3>
<p>ä¸Šè¿°åŠŸèƒ½å¼€å‘å’Œå®ç°å¹¶éä¸€è¹´è€Œå°±ï¼Œè¿‡ç¨‹ä¸­é‡åˆ°å¾ˆå¤šé—®é¢˜ï¼Œè¯¸å¦‚ï¼š</p>
<ul>
<li>å›¾ç‰‡æ‹–åŠ¨å¡é¡¿</li>
<li>Canvaså¯¼å‡ºç©ºå›¾ã€å¯¼å‡ºå›¾ç‰‡æ¨¡ç³Š</li>
<li>æ‰¹é‡åˆæˆæ—¶é—´è¾ƒä¹…</li>
<li>PAGåˆå§‹åŠ è½½æ…¢</li>
<li>å¯¼å‡ºå›¾ç‰‡æ—¶é—´ä¹…</li>
</ul>
<p>ç­‰ç­‰é—®é¢˜ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­å°±å¯¹å„åŠŸèƒ½ç»„ä»¶è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ï¼Œå¤§ä½“å¦‚ä¸‹ï¼š</p>
<p><strong>PagPlayerï¼ˆPAGæ’­æ”¾å™¨ï¼‰</strong></p>
<p><strong>èµ„æºç®¡ç†ä¼˜åŒ–</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// srcå˜åŒ–æ—¶ä¸»åŠ¨é”€æ¯æ—§å®ä¾‹ï¼Œé‡Šæ”¾WebGL/PAGèµ„æº</span>
ifÂ (srcChanged) {
Â Â ifÂ (pagPlayer) {
Â  Â Â tryÂ {
Â  Â  Â  pagPlayer<span class="hljs-selector-class">.destroy</span>()
Â  Â  }Â catchÂ (e) {
Â  Â  Â Â console<span class="hljs-selector-class">.warn</span>('Destroy previous player failed:', e)
Â  Â  }
Â  }
}
</code></pre>
<p><strong>WebGLæ£€æŸ¥ä¸é™çº§</strong>ï¼š</p>
<ul>
<li>æ£€æŸ¥WebGLæ”¯æŒï¼Œä¸å¯ç”¨æ—¶é™çº§ä¸º2Dè­¦å‘Š</li>
<li>éªŒè¯CanvasçŠ¶æ€å’Œå°ºå¯¸</li>
<li>PAGViewåˆ›å»ºå¸¦é‡è¯•æœºåˆ¶</li>
</ul>
<p><strong>å­—ä½“é¢„æ³¨å†Œ</strong>ï¼š</p>
<ul>
<li>å¿…é¡»åœ¨åŠ è½½PAGæ–‡ä»¶ä¹‹å‰æ³¨å†Œå­—ä½“</li>
<li>ä½¿ç”¨Fileç±»å‹è¿›è¡Œå­—ä½“æ³¨å†Œ</li>
</ul>
<p><strong>CanvasImageEditorï¼ˆCanvaså›¾ç‰‡ç¼–è¾‘å™¨ï¼‰</strong></p>
<p><strong>é«˜DPIä¼˜åŒ–ï¼š</strong></p>
<ul>
<li>è‡ªåŠ¨æ£€æµ‹è®¾å¤‡åƒç´ æ¯”ï¼Œé€‚é…é«˜åˆ†è¾¨ç‡è®¾å¤‡</li>
<li>åˆ†ç¦»ç‰©ç†åƒç´ å’ŒCSSåƒç´ ï¼Œç¡®ä¿æ¸…æ™°åº¦</li>
</ul>
<p><strong>å†…å­˜ç®¡ç†</strong>ï¼š</p>
<ul>
<li>ç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨æ¸…ç†Canvasèµ„æº</li>
<li>å¯ç”¨é«˜è´¨é‡å›¾åƒå¹³æ»‘ï¼Œé¿å…å‡ºç°è¾¹ç¼˜é”¯é½¿</li>
<li>ä½¿ç”¨CSS touch-actionæ§åˆ¶è§¦æ‘¸è¡Œä¸º</li>
</ul>
<p><strong>EditablePagPlayerï¼ˆå¯ç¼–è¾‘PAGæ’­æ”¾å™¨ï¼‰</strong></p>
<p><strong>æ™ºèƒ½æ‰¹é‡æ›´æ–°ç³»ç»Ÿï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// é«˜æ€§èƒ½å®æ—¶æ›´æ–° - ä½¿ç”¨RAF + æ‰¹é‡flush</span>
constÂ smartApplyToPag =Â <span class="hljs-built_in">useMemo</span>(() =&gt;Â {
Â Â returnÂ () =&gt;Â {
Â  Â  rafId =Â <span class="hljs-built_in">requestAnimationFrame</span>(asyncÂ () =&gt; {
Â  Â  Â Â awaitÂ <span class="hljs-built_in">applyToPag</span>()Â <span class="hljs-comment">// å¿«é€Ÿå›¾ç‰‡æ›¿æ¢ï¼ˆæ— flushï¼‰</span>
Â  Â  Â Â <span class="hljs-built_in">smartFlush</span>(batchUpdateRef.current)Â <span class="hljs-comment">// ç®¡ç†æ‰¹é‡flush</span>
Â  Â  })
Â  }
}, <span class="hljs-selector-attr">[]</span>)
</code></pre>
<p><strong>æ‰¹é‡flushç­–ç•¥ï¼š</strong></p>
<ul>
<li>è·ç¦»ä¸Šæ¬¡flushè¶…è¿‡100msç«‹å³flush</li>
<li>å¦åˆ™å»¶è¿Ÿ16ms~updateThrottle/2åˆå¹¶å¤šæ¬¡æ›´æ–°</li>
<li>å‡å°‘PAGåˆ·æ–°æ¬¡æ•°ï¼Œæå‡æ€§èƒ½</li>
</ul>
<p><strong>å†…å­˜ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>è‡ªåŠ¨ç®¡ç†Canvaså’ŒPAGèµ„æºç”Ÿå‘½å‘¨æœŸ</li>
<li>æ™ºèƒ½é¢„çƒ­ï¼šæ£€æµ‹Canvaså†…å®¹é¿å…ä¸å¿…è¦åˆå§‹åŒ–</li>
<li>èµ„æºå¤ç”¨ï¼šå¤ç”¨Canvaså…ƒç´ </li>
</ul>
<p><strong>PAGBatchComposerï¼ˆæ‰¹é‡PAGåˆæˆå™¨ï¼‰</strong></p>
<p><strong>é«˜å¹¶å‘å¤„ç†ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å·¥ä½œåç¨‹ï¼šæŒ‰é˜Ÿåˆ—å–ä»»åŠ¡ç›´è‡³è€—å°½æˆ–å–æ¶ˆ</span>
<span class="hljs-keyword">const</span>Â <span class="hljs-title function_">runWorker</span>Â =Â <span class="hljs-keyword">async</span>Â (<span class="hljs-params"/>) =&gt; {
Â Â <span class="hljs-keyword">while</span>Â (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelled</span>) {
Â  Â Â <span class="hljs-keyword">const</span>Â idx = cursor++
Â  Â Â <span class="hljs-keyword">if</span>Â (idx &gt;= total)Â <span class="hljs-keyword">break</span>
Â  Â Â <span class="hljs-comment">// å¤„ç†å•ä¸ªæ¨¡æ¿...</span>
Â  }
}
</code></pre>
<p><strong>æ™ºèƒ½é‡è¯•æœºåˆ¶</strong>ï¼š</p>
<ul>
<li>å¤–å±‚é‡è¯•ï¼šæœ€å¤š3æ¬¡æ•´ä½“é‡è¯•ï¼Œé€’å¢å»¶è¿Ÿ</li>
<li>å†…å±‚é‡è¯•ï¼šPAGæ“ä½œçº§åˆ«é‡è¯•2æ¬¡</li>
<li>é¦–æ¬¡å»¶è¿Ÿï¼šç¬¬ä¸€ä¸ªPAGå¤„ç†å¢åŠ 500mså»¶è¿Ÿ</li>
</ul>
<p><strong>å†…å­˜ç®¡ç†</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ªæ¨¡æ¿å¤„ç†å®Œæˆåç«‹å³æ¸…ç†Canvaså’ŒPAGå¯¹è±¡</li>
<li>é›†æˆCanvasè®¡æ•°å™¨ç›‘æ§å†…å­˜ä½¿ç”¨</li>
<li>æ”¯æŒå¼ºåˆ¶æ¸…ç†è¶…æ—¶å®ä¾‹</li>
</ul>
<p><strong>æ€§èƒ½ç›‘æ§debugUtils</strong></p>
<ul>
<li>æä¾›è¯¦ç»†çš„æ€§èƒ½ç›‘æ§å’Œè°ƒè¯•æ—¥å¿—</li>
<li>æ”¯æŒæ‰¹é‡ç»Ÿè®¡åˆ†æï¼ˆååé‡ã€å¹³å‡æ—¶é—´ç­‰ï¼‰</li>
</ul>
<h3 data-id="heading-26">é™çº§å…¼å®¹</h3>
<p>ç”±äºæ ¸å¿ƒä¸šåŠ¡ä¾èµ– PAG æŠ€æœ¯æ ˆï¼Œè€Œ PAG è¿è¡Œéœ€ WebGL å’Œ WebAssembly çš„åŸºç¡€APIæ”¯æŒï¼Œå› æ­¤å¿…é¡»åœ¨åº”ç”¨åˆå§‹åŒ–é˜¶æ®µå¯¹è¿™äº›åŸºç¡€ API è¿›è¡Œå…¼å®¹æ€§æ£€æµ‹ï¼Œå¹¶é’ˆå¯¹ä¸æ”¯æŒçš„ç¯å¢ƒæ‰§è¡Œé™çº§ç­–ç•¥ï¼Œä»¥ä¿éšœæ ¸å¿ƒåŠŸèƒ½å¯ç”¨æ€§ã€‚</p>
<p>æ ¸å¿ƒAPIæ£€æµ‹ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span>Â <span class="hljs-keyword">function</span>Â <span class="hljs-title function_">isWebGLAvailable</span>(<span class="hljs-params"/>):Â <span class="hljs-built_in">boolean</span>Â {
Â Â <span class="hljs-keyword">if</span>Â (<span class="hljs-keyword">typeof</span>Â <span class="hljs-variable language_">window</span>Â ===Â <span class="hljs-string">'undefined'</span>)Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">false</span>
Â Â <span class="hljs-keyword">try</span>Â {
Â  Â Â <span class="hljs-keyword">const</span>Â canvas =Â <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'canvas'</span>)
Â  Â Â <span class="hljs-keyword">const</span>Â gl =
Â  Â  Â  canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'webgl'</span>) ||
Â  Â  Â  (canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'experimental-webgl'</span>)Â <span class="hljs-keyword">as</span>Â <span class="hljs-title class_">WebGLRenderingContext</span>Â |Â <span class="hljs-literal">null</span>)
Â  Â Â <span class="hljs-keyword">return</span>Â !!gl
Â  }Â <span class="hljs-keyword">catch</span>Â (e) {
Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">false</span>
Â  }
}


<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">function</span>Â <span class="hljs-title function_">isWasmAvailable</span>(<span class="hljs-params"/>):Â <span class="hljs-built_in">boolean</span>Â {
Â Â <span class="hljs-keyword">try</span>Â {
Â  Â Â <span class="hljs-keyword">const</span>Â hasBasic =
Â  Â  Â Â <span class="hljs-keyword">typeof</span>Â (globalThisÂ <span class="hljs-keyword">as</span>Â <span class="hljs-built_in">any</span>).<span class="hljs-property">WebAssembly</span>Â ===Â <span class="hljs-string">'object'</span>Â &amp;&amp;
Â  Â  Â Â <span class="hljs-keyword">typeof</span>Â (<span class="hljs-title class_">WebAssembly</span>Â <span class="hljs-keyword">as</span>Â <span class="hljs-built_in">any</span>).<span class="hljs-property">instantiate</span>Â ===Â <span class="hljs-string">'function'</span>
Â  Â Â <span class="hljs-keyword">if</span>Â (!hasBasic)Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">false</span>
Â  Â Â <span class="hljs-comment">// æœ€å°æ¨¡å—æ ¡éªŒï¼Œè§„é¿â€œå­˜åœ¨ä½†ä¸å¯ç”¨â€çš„æƒ…å†µ</span>
Â  Â Â <span class="hljs-keyword">const</span>Â bytes =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">0x00</span>,Â <span class="hljs-number">0x61</span>,Â <span class="hljs-number">0x73</span>,Â <span class="hljs-number">0x6d</span>,Â <span class="hljs-number">0x01</span>,Â <span class="hljs-number">0x00</span>,Â <span class="hljs-number">0x00</span>,Â <span class="hljs-number">0x00</span>])
Â  Â Â <span class="hljs-keyword">const</span>Â mod =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">WebAssembly</span>.<span class="hljs-title class_">Module</span>(bytes)
Â  Â Â <span class="hljs-keyword">const</span>Â inst =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">WebAssembly</span>.<span class="hljs-title class_">Instance</span>(mod)
Â  Â Â <span class="hljs-keyword">return</span>Â instÂ <span class="hljs-keyword">instanceof</span>Â <span class="hljs-title class_">WebAssembly</span>.<span class="hljs-property">Instance</span>
Â  }Â <span class="hljs-keyword">catch</span>Â (e) {
Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">false</span>
Â  }
}


<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">function</span>Â <span class="hljs-title function_">isPagRuntimeAvailable</span>(<span class="hljs-params"/>):Â <span class="hljs-built_in">boolean</span>Â {
Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-title function_">isWebGLAvailable</span>() &amp;&amp;Â <span class="hljs-title function_">isWasmAvailable</span>()
}
</code></pre>
<p><strong>ç¯å¢ƒé€‚é…ç­–ç•¥</strong></p>
<ul>
<li>å…¼å®¹ç¯å¢ƒï¼ˆæ£€æµ‹é€šè¿‡ï¼‰ï¼šç›´æ¥æ‰§è¡Œ H5 ç«¯ PAG åˆå§‹åŒ–æµç¨‹ï¼Œå¯ç”¨å®Œæ•´çš„å‰ç«¯äº¤äº’ç¼–è¾‘èƒ½åŠ›ã€‚</li>
<li>ä¸å…¼å®¹ç¯å¢ƒï¼ˆæ£€æµ‹å¤±è´¥ï¼‰ï¼šè‡ªåŠ¨åˆ‡æ¢è‡³æœåŠ¡ç«¯åˆæˆé“¾è·¯ï¼Œé€šè¿‡é¢„ç”Ÿæˆé™æ€å¡ç‰‡ä¿éšœæ ¸å¿ƒåŠŸèƒ½å¯ç”¨ï¼Œç¡®ä¿ç”¨æˆ·ä»èƒ½å®Œæˆçƒæ˜Ÿå¡ç”Ÿæˆçš„åŸºç¡€æµç¨‹ã€‚</li>
</ul>
<h2 data-id="heading-27">ä¹ã€å°ç»“</h2>
<p>æœ¬æ¬¡ã€Œç”¨ç¯®çƒè®¤è¯†æˆ‘ã€çƒæ˜Ÿå¡ç”ŸæˆåŠŸèƒ½å¼€å‘ï¼Œå›´ç»• â€œç”¨æˆ·è‡ªä¸»è°ƒæ•´ + è·¨ç«¯ä¸€è‡´æ¸²æŸ“â€ æ ¸å¿ƒç›®æ ‡ï¼Œé€šè¿‡ PAG æŠ€æœ¯ä¸ Canvas äº¤äº’çš„æ·±åº¦ç»“åˆï¼Œæ„å»ºäº†ä»å•å¡ç¼–è¾‘åˆ°æ‰¹é‡åˆæˆçš„å®Œæ•´æŠ€æœ¯é“¾è·¯ï¼Œå¯ä»é—®é¢˜è§£å†³ã€æŠ€æœ¯æ²‰æ·€ã€ä¸šåŠ¡ä»·å€¼ä¸‰æ–¹é¢æ€»ç»“æ ¸å¿ƒæˆæœï¼š</p>
<p><strong>é—®é¢˜è§£å†³ï¼šè§£å†³ä¸šåŠ¡ç—›ç‚¹ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒ</strong></p>
<p>é’ˆå¯¹åˆæœŸ â€œæœåŠ¡ç«¯å›ºå®šåˆæˆå¯¼è‡´æ„å›¾åå·®â€ çš„æ ¸å¿ƒç—›ç‚¹ï¼Œé€šè¿‡ H5 ç«¯æ‰¿æ¥å…³é”®é“¾è·¯ï¼Œä¿éšœæ´»åŠ¨ç©æ³•å®Œæ•´æ€§ï¼š</p>
<ul>
<li>äº¤äº’è‡ªä¸»æ€§ï¼šåŸºäº Canvas å°è£…çš„CanvasImageEditorç»„ä»¶ï¼Œæ”¯æŒå•æŒ‡æ‹–æ‹½ã€åŒæŒ‡ç¼©æ”¾ / æ—‹è½¬ï¼Œè®©ç”¨æˆ·å¯ç²¾å‡†è°ƒæ•´äººåƒæ„å›¾ï¼Œè§£å†³ â€œå›ºå®šåˆæˆæ— æ³•é€‚é…ä¸ªæ€§åŒ–éœ€æ±‚â€ é—®é¢˜ï¼›</li>
<li>é¢„è§ˆå®æ—¶æ€§ï¼šè®¾è®¡ â€œäº¤äº’æ„ŸçŸ¥ - åŒæ­¥è°ƒåº¦ - æ¸²æŸ“æ‰§è¡Œâ€ ä¸‰å±‚æ¨¡å‹ï¼Œé€šè¿‡å¤ç”¨ Canvas å…ƒç´ ã€æ™ºèƒ½æ‰¹é‡è°ƒåº¦ç­‰æ–¹æ¡ˆï¼Œå®ç°æ“ä½œä¸ PAG é¢„è§ˆçš„å³æ—¶åŒæ­¥ï¼Œé¿å… â€œè°ƒæ•´åå»¶è¿Ÿåé¦ˆâ€ çš„å‰²è£‚æ„Ÿï¼›</li>
<li>åœºæ™¯å…¼å®¹æ€§ï¼šé’ˆå¯¹ PAG åŠ è½½å¤±è´¥ã€WebGL ä¸æ”¯æŒç­‰è¾¹ç•Œåœºæ™¯ï¼Œè®¾è®¡é™æ€å›¾å±‚å…œåº•ã€æœåŠ¡ç«¯åˆæˆé™çº§ã€æˆªå¸§å‰æ¸²æŸ“åŒæ­¥ç­‰æ–¹æ¡ˆï¼Œä¿éšœåŠŸèƒ½é«˜å¯ç”¨æ€§ã€‚</li>
</ul>
<p><strong>æŠ€æœ¯æ²‰æ·€</strong></p>
<p>æœ¬æ¬¡å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå›´ç»• PAG æŠ€æœ¯åœ¨ H5 ç«¯çš„åº”ç”¨ï¼Œæ²‰æ·€å‡ºä¸€å¥—æ ‡å‡†åŒ–çš„æŠ€æœ¯æ–¹æ¡ˆä¸ç»„ä»¶ä½“ç³»ï¼Œå¯å¤ç”¨äºåç»­å›¾ç‰‡ç¼–è¾‘ã€åŠ¨æ•ˆåˆæˆç±»éœ€æ±‚ï¼š</p>
<ul>
<li>ç»„ä»¶åŒ–å°è£…ï¼šæ‹†åˆ†å‡ºPagPlayerï¼ˆåŸºç¡€æ’­æ”¾ä¸å›¾å±‚æ›¿æ¢ï¼‰ã€CanvasImageEditorï¼ˆæ‰‹åŠ¿äº¤äº’ï¼‰ã€EditablePagPlayerï¼ˆäº¤äº’ä¸é¢„è§ˆåŒæ­¥ï¼‰ã€PAGBatchComposerï¼ˆæ‰¹é‡åˆæˆï¼‰å››å¤§æ ¸å¿ƒç»„ä»¶ï¼Œå„ç»„ä»¶èŒè´£å•ä¸€ã€æ¥å£æ¸…æ™°ï¼Œæ”¯æŒçµæ´»ç»„åˆï¼›</li>
<li>æ€§èƒ½ä¼˜åŒ–ï¼šé€šè¿‡ â€œé«˜æ¸…é€‚é…ï¼ˆDPR å¤„ç†ï¼‰ã€èµ„æºå¤ç”¨ï¼ˆCanvas ç›´æ¥ä¼ é€’ï¼‰ã€è°ƒåº¦ä¼˜åŒ–ï¼ˆRAF åˆå¹¶æ›´æ–°ï¼‰ã€å†…å­˜ç®¡ç†ï¼ˆå®ä¾‹åŠæ—¶é”€æ¯ï¼‰â€ ç­‰ä¼˜åŒ–æ–¹å‘ï¼Œä¸ºåç»­å¤æ‚åŠŸèƒ½çš„æ€§èƒ½è°ƒä¼˜æä¾›å‚è€ƒèŒƒä¾‹ï¼›</li>
<li>é—®é¢˜è§£å†³æ¡ˆä¾‹ï¼šè®°å½• PAG å­—ä½“æ³¨å†Œå¤±æ•ˆã€æˆªå¸§ç©ºå¸§ã€æ‰¹é‡åˆæˆå¡é¡¿ç­‰å…¸å‹é—®é¢˜çš„æ’æŸ¥æ€è·¯ä¸è§£å†³æ–¹æ¡ˆï¼Œå½¢æˆæŠ€æœ¯æ–‡æ¡£ï¼Œé™ä½åç»­å›¢é˜Ÿä½¿ç”¨ PAG çš„é—¨æ§›ã€‚</li>
</ul>
<p><strong>ä¸šåŠ¡ä»·å€¼ï¼šæ”¯æ’‘æ´»åŠ¨çˆ†å‘ï¼Œæ‹“å±•æŠ€æœ¯è¾¹ç•Œ</strong></p>
<p>ä»ä¸šåŠ¡è½åœ°æ•ˆæœæ¥çœ‹ï¼Œæœ¬æ¬¡æŠ€æœ¯æ–¹æ¡ˆä¸ä»…æ»¡è¶³äº†ã€Œç”¨ç¯®çƒè®¤è¯†æˆ‘ã€æ´»åŠ¨çš„æ ¸å¿ƒéœ€æ±‚ï¼Œæ›´ä¸ºç¤¾åŒºä¾§åç»­è§†è§‰åŒ–åŠŸèƒ½æä¾›äº†æŠ€æœ¯æ”¯æ’‘ï¼š</p>
<ul>
<li>æ´»åŠ¨ä¿éšœï¼šçƒæ˜Ÿå¡ç”ŸæˆåŠŸèƒ½ä¸Šçº¿åï¼Œæœªå‡ºç°å› æŠ€æœ¯é—®é¢˜å¯¼è‡´çš„åŠŸèƒ½ä¸å¯ç”¨ã€‚</li>
<li>æŠ€æœ¯èƒ½åŠ›æ‹“å±•ï¼šé¦–æ¬¡åœ¨ç¤¾åŒº H5 ç«¯è½åœ° PAG åŠ¨æ•ˆåˆæˆä¸æ‰‹åŠ¿äº¤äº’ç»“åˆçš„æ–¹æ¡ˆï¼Œå¡«è¡¥äº† â€œå‰ç«¯ PAG åº”ç”¨â€ çš„æŠ€æœ¯ç©ºç™½ï¼Œä¸ºåç»­ä¸€äº›å¤æ‚äº¤äº’å¥ å®šåŸºç¡€ã€‚</li>
</ul>
<p><strong>åç»­ä¼˜åŒ–æ–¹å‘</strong></p>
<p>å°½ç®¡å½“å‰æ–¹æ¡ˆå·²æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ï¼Œä½†ä»æœ‰å¯è¿›ä¸€æ­¥ä¼˜åŒ–çš„ç©ºé—´ï¼š</p>
<ul>
<li>æ€§èƒ½å†æå‡ï¼šæ‰¹é‡åˆæˆåœºæ™¯ä¸‹ï¼Œå¯æ¢ç´¢ Web Worker åˆ†æ‹… PAG è§£æå‹åŠ›ï¼Œå‡å°‘ä¸»çº¿ç¨‹é˜»å¡ã€‚</li>
<li>åŠŸèƒ½æ‰©å±•ï¼šåœ¨CanvasImageEditorä¸­å¢åŠ å›¾ç‰‡è£å‰ªã€æ»¤é•œå åŠ ç­‰åŠŸèƒ½ï¼Œæ‹“å±•ç»„ä»¶çš„é€‚ç”¨åœºæ™¯ã€‚</li>
</ul>
<h3 data-id="heading-28">å¾€æœŸå›é¡¾</h3>
<ol>
<li>
<p>Ant Design 6.0 å°é²œï¼šä¸Šæ‰‹ç°ä»£åŒ–ç»„ä»¶å¼€å‘ï½œå¾—ç‰©æŠ€æœ¯</p>
</li>
<li>
<p>Java è®¾è®¡æ¨¡å¼ï¼šåŸç†ã€æ¡†æ¶åº”ç”¨ä¸å®æˆ˜å…¨è§£æï½œå¾—ç‰©æŠ€æœ¯</p>
</li>
<li>
<p>Goè¯­è¨€åœ¨é«˜å¹¶å‘é«˜å¯ç”¨ç³»ç»Ÿä¸­çš„å®è·µä¸è§£å†³æ–¹æ¡ˆï½œå¾—ç‰©æŠ€æœ¯</p>
</li>
<li>
<p>ä»0åˆ°1æ­å»ºä¸€ä¸ªæ™ºèƒ½åˆ†æOBSåŸ‹ç‚¹æ•°æ®çš„AI Agentï½œå¾—ç‰©æŠ€æœ¯</p>
</li>
<li>
<p>æ•°æ®åº“AIæ–¹å‘æ¢ç´¢-MCPåŸç†è§£æ&amp;DBæ–¹å‘å®æˆ˜ï½œå¾—ç‰©æŠ€æœ¯</p>
</li>
</ol>
<h3 data-id="heading-29">æ–‡ /æ— é™</h3>
<p>å…³æ³¨å¾—ç‰©æŠ€æœ¯ï¼Œæ¯å‘¨æ›´æ–°æŠ€æœ¯å¹²è´§</p>
<p>è¦æ˜¯è§‰å¾—æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œæ¬¢è¿è¯„è®ºè½¬å‘ç‚¹èµï½</p>
<p>æœªç»å¾—ç‰©æŠ€æœ¯è®¸å¯ä¸¥ç¦è½¬è½½ï¼Œå¦åˆ™ä¾æ³•è¿½ç©¶æ³•å¾‹è´£ä»»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¢ç§˜ AgentRunä¸¨æµé‡ä¸€å¤§å°±ç˜«ç—ªï¼Ÿå¦‚ä½•è§£å†³ AI æ¨¡å‹è°ƒç”¨ä¹‹ç—›]]></title>    <link>https://juejin.cn/post/7587496378055475206</link>    <guid>https://juejin.cn/post/7587496378055475206</guid>    <pubDate>2025-12-25T09:01:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587496378055475206" data-draft-id="7587582213060722742" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¢ç§˜ AgentRunä¸¨æµé‡ä¸€å¤§å°±ç˜«ç—ªï¼Ÿå¦‚ä½•è§£å†³ AI æ¨¡å‹è°ƒç”¨ä¹‹ç—›"/> <meta itemprop="keywords" content="äº‘åŸç”Ÿ"/> <meta itemprop="datePublished" content="2025-12-25T09:01:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¢ç§˜ AgentRunä¸¨æµé‡ä¸€å¤§å°±ç˜«ç—ªï¼Ÿå¦‚ä½•è§£å†³ AI æ¨¡å‹è°ƒç”¨ä¹‹ç—›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T09:01:18.000Z" title="Thu Dec 25 2025 09:01:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šæ±Ÿæ˜±</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3Fspm%3Da2c6h.12873639.article-detail.4.15b8370bgmqLge%26__biz%3DMzA4NjI4MzM4MQ%3D%3D%26mid%3D2660257517%26idx%3D1%26sn%3D050bc317ac020aec7b848f9531af8da6%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?spm=a2c6h.12873639.article-detail.4.15b8370bgmqLge&amp;__biz=MzA4NjI4MzM4MQ==&amp;mid=2660257517&amp;idx=1&amp;sn=050bc317ac020aec7b848f9531af8da6&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘å‡½æ•°è®¡ç®— AgentRun å…¨æ–°å‘å¸ƒå</a>ï¼Œæˆ‘ä»¬æ•´ç†äº†â€œæ¢ç§˜ AgentRunâ€ç³»åˆ—æ–‡ç« ï¼Œæœ¬ç³»åˆ—å°†æ¢³ç†ä¼ä¸šè½åœ° Agent å¸¸è§éš¾é¢˜ï¼Œç»™å‡ºå…·ä½“è§£æ³•ï¼ŒåŠ©åŠ› Agentic AI å¿«é€Ÿèµ°è¿›ç”Ÿäº§çº§ç¯å¢ƒã€‚<strong>æ¬¢è¿åŠ å…¥â€œå‡½æ•°è®¡ç®— AgentRun å®¢æˆ·ç¾¤â€ä¸æˆ‘ä»¬äº¤æµï¼Œé’‰é’‰ç¾¤å·ï¼š134570017218ã€‚</strong></p>
<p><strong>åœ¨ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3Fspm%3Da2c6h.12873639.article-detail.5.15b8370bgmqLge%26__biz%3DMzUzNzYxNjAzMg%3D%3D%26mid%3D2247580910%26idx%3D1%26sn%3Ddc2fc3a2c2b9321b0051f3ff58ba3f89%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?spm=a2c6h.12873639.article-detail.5.15b8370bgmqLge&amp;__biz=MzUzNzYxNjAzMg==&amp;mid=2247580910&amp;idx=1&amp;sn=dc2fc3a2c2b9321b0051f3ff58ba3f89&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">é€šè¿‡æ— ä»£ç åˆ›å»ºçš„ Agentï¼Œå¦‚ä½•ç”¨é«˜ä»£ç è¿›è¡Œæ›´æ–°ï¼Ÿ</a>ã€‹æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æåˆ°è¿‡ä¸€ä¸ªçœŸå®ç”¨æˆ·çš„ç—›ç‚¹ï¼šâ€œæˆ‘ä¹‹å‰åšè¿‡å¾ˆå¤š AI åº”ç”¨ï¼Œæµé‡å°‘çš„æ—¶å€™è¿˜å¥½ï¼Œæµé‡ä¸€å¤šæœ€å¤´ç–¼çš„å°±æ˜¯æ¨¡å‹çš„å®‰å…¨ç¨³å®šã€‚â€</strong> è¿™ä¸æ˜¯ä¸ªä¾‹ï¼Œè€Œæ˜¯å‡ ä¹æ‰€æœ‰ Agent åº”ç”¨å¼€å‘è€…éƒ½ä¼šé‡åˆ°çš„æ ¸å¿ƒé—®é¢˜ã€‚</p>
<p>æ¨¡å‹çªç„¶å˜æ…¢ã€è´¦å·æ¬ è´¹ã€è¢«ä¸´æ—¶å°ç¦ã€å­˜åœ¨å®‰å…¨é—®é¢˜ã€é¢‘ç¹é™æµâ€”â€”ä»»ä½•ä¸€ä¸ªé—®é¢˜éƒ½å¯èƒ½è®©ä½ çš„ Agent åº”ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç˜«ç—ªã€‚æ›´æ£˜æ‰‹çš„æ˜¯ï¼Œè¿™äº›é—®é¢˜å¾€å¾€å‘ç”Ÿåœ¨æµé‡é«˜å³°æœŸï¼Œé€ æˆçš„æŸå¤±éš¾ä»¥ä¼°é‡ã€‚<strong>Agent åº”ç”¨çš„å¯é æ€§ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºæ¨¡å‹è°ƒç”¨çš„å¯é æ€§ã€‚</strong></p>
<p><strong>å‡½æ•°è®¡ç®— AgentRun é€šè¿‡å®Œæ•´çš„æ¨¡å‹ç®¡ç†å’Œæ²»ç†èƒ½åŠ›ï¼Œç³»ç»Ÿæ€§åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•åšåˆ°çš„ã€‚</strong></p>
<h2 data-id="heading-0">ä»æ··ä¹±åˆ°æœ‰åºï¼šç»Ÿä¸€çš„æ¨¡å‹ç®¡ç†</h2>
<p>åœ¨æ²¡æœ‰ç»Ÿä¸€ç®¡ç†ä¹‹å‰ï¼Œå¼€å‘è€…é¢ä¸´çš„æ˜¯è¿™æ ·çš„å›°å¢ƒï¼šä¸åŒçš„æ¨¡å‹åˆ†æ•£åœ¨å„å¤„ï¼Œæœ‰çš„åœ¨ä»£ç é‡Œç¡¬ç¼–ç ï¼Œæœ‰çš„åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œæœ‰çš„æ˜¯ç¯å¢ƒå˜é‡ã€‚æƒ³è¦åˆ‡æ¢ä¸€ä¸ªæ¨¡å‹ï¼Ÿéœ€è¦æ”¹ä»£ç ã€æµ‹è¯•ã€é‡æ–°éƒ¨ç½²ã€‚æƒ³çŸ¥é“ç”¨äº†å“ªäº›æ¨¡å‹ã€æ¯ä¸ªæ¨¡å‹çš„è°ƒç”¨é‡å’Œæˆæœ¬ï¼Ÿåªèƒ½ä»è´¦å•å€’æ¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93f3d6f049674d2b949c4be5c600b5e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767258078&amp;x-signature=fEUNu3PTFzGm03D4QCTDGGCx73s%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚å›¾æ‰€ç¤ºï¼Œ<strong>AgentRun æä¾›äº†ç»Ÿä¸€çš„æ¨¡å‹ç®¡ç†ç•Œé¢</strong>ã€‚æ‰€æœ‰æ¥å…¥çš„æ¨¡å‹éƒ½åœ¨è¿™é‡Œé›†ä¸­å±•ç¤ºå’Œç®¡ç†ï¼Œä½ å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°æ¯ä¸ªæ¨¡å‹çš„çŠ¶æ€ã€é…ç½®ã€ä½¿ç”¨æƒ…å†µã€‚éœ€è¦è°ƒæ•´æŸä¸ªæ¨¡å‹çš„é…ç½®ï¼Ÿç›´æ¥åœ¨ç•Œé¢ä¿®æ”¹ï¼Œç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€é‡å¯æœåŠ¡ã€‚éœ€è¦æŸ¥çœ‹æŸä¸ªæ¨¡å‹çš„è°ƒç”¨é‡å’Œæˆæœ¬ï¼Ÿæ‰€æœ‰æ•°æ®ä¸€ç›®äº†ç„¶ã€‚</p>
<p>è¿™ç§ç»Ÿä¸€ç®¡ç†çš„ä»·å€¼ï¼Œä¸åœ¨äºæå‡äº†ä¾¿åˆ©æ€§ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œ<strong>å®ƒè®©æ¨¡å‹ä»â€œæ•£è½çš„èµ„æºâ€å˜æˆäº†â€œå¯ç®¡ç†çš„èµ„äº§â€ã€‚</strong> ä½ å¯ä»¥æ¸…æ™°åœ°æŒæ¡ä¼ä¸šä½¿ç”¨äº†å“ªäº›æ¨¡å‹ã€æ¯ä¸ªæ¨¡å‹çš„å¥åº·çŠ¶æ€ã€æˆæœ¬åˆ†å¸ƒã€ä½¿ç”¨è¶‹åŠ¿ï¼Œä¸ºä¼˜åŒ–å†³ç­–æä¾›æ•°æ®æ”¯æ’‘ã€‚</p>
<h2 data-id="heading-1">æ¥å…¥çµæ´»ï¼šæ”¯æŒæ‰€æœ‰ä¸»æµæ¨¡å‹</h2>
<p>å¦‚å›¾æ‰€ç¤ºï¼ŒAgentRun åœ¨æ¨¡å‹æ¥å…¥æ–¹é¢æä¾›äº†æå¤§çš„çµæ´»æ€§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e3a8b0601f34f7ea89b6c8d35fd6d52~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767258078&amp;x-signature=5ywG2TPT8YChpQ%2B2QGmtM2zCBTo%3D" alt="image.png" loading="lazy"/></p>
<p>å½“ä½ éœ€è¦æ¥å…¥ä¸€ä¸ªæ–°æ¨¡å‹æ—¶ï¼Œå¯ä»¥é€šè¿‡æœç´¢åŠŸèƒ½å¿«é€Ÿæ‰¾åˆ°ä½ æƒ³è¦çš„æ¨¡å‹ä¾›åº”å•†â€”â€”OpenAIã€Anthropicã€é˜¿é‡Œäº‘ç™¾ç‚¼ã€Minimaxã€æ™ºè°± AI ç­‰ä¸»æµä¾›åº”å•†éƒ½å·²ç»å†…ç½®æ”¯æŒã€‚é€‰æ‹©ä¾›åº”å•†åï¼Œå¯ä»¥çœ‹åˆ°è¯¥ä¾›åº”å•†æä¾›çš„æ‰€æœ‰æ¨¡å‹åˆ—è¡¨ï¼Œé€‰æ‹©ä½ éœ€è¦çš„æ¨¡å‹ï¼Œå¡«å…¥ API Key ç­‰å¿…è¦ä¿¡æ¯ï¼Œå°±å®Œæˆäº†æ¥å…¥ã€‚</p>
<p>ä½†æ›´å¼ºå¤§çš„æ˜¯<strong>è‡ªå®šä¹‰åˆ›å»ºèƒ½åŠ›</strong>ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ä¼ä¸šè‡ªå»ºçš„ç§æœ‰æ¨¡å‹ï¼Œæˆ–è€…æ˜¯ AgentRun å°šæœªå†…ç½®æ”¯æŒçš„æ¨¡å‹æœåŠ¡ï¼Œå¯ä»¥é€šè¿‡è‡ªå®šä¹‰åˆ›å»ºçš„æ–¹å¼æ¥å…¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54b2b4a457934e62a1272163699b9f33~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767258078&amp;x-signature=xehgZdTu%2B%2FEnR7I%2F3njHyw0%2BHw4%3D" alt="image.png" loading="lazy"/></p>
<p>åªéœ€è¦æä¾›æ¨¡å‹çš„ API åœ°å€ã€é‰´æƒæ–¹å¼ã€è¯·æ±‚æ ¼å¼ç­‰ä¿¡æ¯ï¼ŒAgentRun å°±èƒ½å°†å…¶çº³å…¥ç»Ÿä¸€ç®¡ç†ã€‚è¿™ç§å¼€æ”¾æ€§ç¡®ä¿äº†å¹³å°ä¸ä¼šæˆä¸ºä½ çš„æŠ€æœ¯é™åˆ¶ï¼Œè€Œæ˜¯çœŸæ­£æˆä¸ºä½ çš„æŠ€æœ¯èµ‹èƒ½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b49b503a8634e09820d25425f6202ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767258078&amp;x-signature=eX%2Fkhr3z6dTwIQivnd1lrgrrgEc%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">æ¨¡å‹æ²»ç†ï¼šä»å•ç‚¹åˆ°é«˜å¯ç”¨</h2>
<p>æ¥å…¥æ¨¡å‹åªæ˜¯ç¬¬ä¸€æ­¥ï¼Œ<strong>å¦‚ä½•ç¡®ä¿æ¨¡å‹è°ƒç”¨çš„ç¨³å®šæ€§å’Œå¯é æ€§ï¼Œæ‰æ˜¯ç”Ÿäº§ç¯å¢ƒçš„æ ¸å¿ƒéœ€æ±‚ã€‚</strong> è¿™å°±æ˜¯æ¨¡å‹æ²»ç†èƒ½åŠ›çš„ä»·å€¼æ‰€åœ¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ca5a26164774e69b6c7f29004d26957~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767258078&amp;x-signature=3FNweGuuWDbCQDn3uUWvTv7Q2Zc%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚å›¾æ‰€ç¤ºï¼ŒAgentRun æä¾›äº†å¼ºå¤§çš„æ¨¡å‹æ²»ç†èƒ½åŠ›ï¼Œåº•å±‚åŸºäºå¼€æºé¡¹ç›® LiteLLM æ„å»ºï¼Œå¹¶<strong>å·²æ— æ„Ÿéƒ¨ç½²åœ¨å‡½æ•°è®¡ç®—ä¸Šã€‚</strong> è¿™æ„å‘³ç€ä½ æ— éœ€å…³å¿ƒ LiteLLM çš„éƒ¨ç½²ã€è¿ç»´ã€æ‰©ç¼©å®¹ç­‰é—®é¢˜ï¼Œå¹³å°å·²ç»å¸®ä½ å¤„ç†å¥½äº†ä¸€åˆ‡ã€‚</p>
<p><strong>åˆ›å»ºä¸€ä¸ªæ¨¡å‹æ²»ç†é…ç½®ï¼Œä½ å¯ä»¥å®ç°ï¼š</strong></p>
<ul>
<li>
<p><strong>ä¸»å¤‡åˆ‡æ¢å’Œ Fallback ç­–ç•¥ï¼š</strong> é…ç½®ä¸»æ¨¡å‹å’Œå¤šä¸ªå¤‡ç”¨æ¨¡å‹ã€‚å½“ä¸»æ¨¡å‹å‡ºç°é™æµã€è¶…æ—¶æˆ–æ•…éšœæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ç”¨æ¨¡å‹ç»§ç»­æœåŠ¡ã€‚ä½ å¯ä»¥é…ç½®å¤šçº§ Fallback ç­–ç•¥ï¼Œæ¯”å¦‚ä¸»æ¨¡å‹æ˜¯ GPT-4ï¼Œç¬¬ä¸€å¤‡ç”¨æ˜¯ Claude-3ï¼Œç¬¬äºŒå¤‡ç”¨æ˜¯ Qwen-Maxã€‚å³ä½¿å¤šä¸ªæ¨¡å‹åŒæ—¶å‡ºç°é—®é¢˜ï¼Œä¹Ÿèƒ½ä¿è¯æœåŠ¡ä¸ä¸­æ–­ã€‚</p>
</li>
<li>
<p><strong>è´Ÿè½½å‡è¡¡ï¼š</strong> å¦‚æœä½ æœ‰å¤šä¸ªç›¸åŒæ¨¡å‹çš„å®ä¾‹æˆ–è´¦å·ï¼Œå¯ä»¥é…ç½®è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œå°†è¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„å®ä¾‹ã€‚è¿™ä¸ä»…èƒ½é¿å…å•ç‚¹è¿‡è½½ï¼Œè¿˜èƒ½æœ‰æ•ˆè§„é¿å•ä¸ªè´¦å·çš„é™æµé—®é¢˜ã€‚ç³»ç»Ÿæ”¯æŒè½®è¯¢ã€åŠ æƒã€æœ€å°‘è¿æ¥ç­‰å¤šç§è´Ÿè½½å‡è¡¡ç®—æ³•ã€‚</p>
</li>
<li>
<p><strong>æ™ºèƒ½è·¯ç”±ï¼š</strong> å¯ä»¥æ ¹æ®è¯·æ±‚çš„ç‰¹å¾ï¼ˆæ¯”å¦‚ Token æ•°é‡ã€ä¼˜å…ˆçº§ã€ç”¨æˆ·ç­‰çº§ç­‰ï¼‰å°†è¯·æ±‚è·¯ç”±åˆ°ä¸åŒçš„æ¨¡å‹ã€‚ç®€å•æŸ¥è¯¢ä½¿ç”¨ç»æµçš„å°æ¨¡å‹ï¼Œå¤æ‚åˆ†æä½¿ç”¨å¼ºå¤§çš„å¤§æ¨¡å‹ï¼Œåœ¨æˆæœ¬å’Œæ•ˆæœä¹‹é—´æ‰¾åˆ°æœ€ä¼˜å¹³è¡¡ã€‚</p>
</li>
<li>
<p><strong>ç†”æ–­å’Œé™æµï¼š</strong> å¯ä»¥é…ç½®ç†”æ–­ç­–ç•¥ï¼Œå½“æŸä¸ªæ¨¡å‹çš„é”™è¯¯ç‡è¶…è¿‡é˜ˆå€¼æ—¶è‡ªåŠ¨ç†”æ–­ï¼Œé¿å…æŒç»­è°ƒç”¨å¤±è´¥çš„æ¨¡å‹æµªè´¹æ—¶é—´å’Œèµ„æºã€‚å¯ä»¥é…ç½®é™æµç­–ç•¥ï¼Œä¿æŠ¤æ¨¡å‹ä¸è¢«çªå‘æµé‡å‡»å®ï¼Œä¹Ÿé¿å…è¶…å‡ºå‚å•†çš„é™é¢å¯¼è‡´è´¦å·è¢«å°ã€‚</p>
</li>
<li>
<p><strong>é‡è¯•æœºåˆ¶ï¼š</strong> å½“æ¨¡å‹è°ƒç”¨å¤±è´¥æ—¶ï¼Œç³»ç»Ÿä¼šæ ¹æ®é…ç½®è‡ªåŠ¨é‡è¯•ã€‚å¯ä»¥è®¾ç½®é‡è¯•æ¬¡æ•°ã€é‡è¯•é—´éš”ã€æŒ‡æ•°é€€é¿ç­‰ç­–ç•¥ï¼Œæœ€å¤§åŒ–è°ƒç”¨æˆåŠŸç‡ã€‚</p>
</li>
</ul>
<p>æ‰€æœ‰è¿™äº›èƒ½åŠ›ï¼Œéƒ½æ˜¯é€šè¿‡å¯è§†åŒ–ç•Œé¢é…ç½®ï¼Œæ— éœ€ç¼–å†™ä»£ç ã€‚é…ç½®å®Œæˆåï¼Œç«‹å³ç”Ÿæ•ˆï¼Œä½ çš„ Agent å°±æ‹¥æœ‰äº†ä¼ä¸šçº§çš„æ¨¡å‹é«˜å¯ç”¨èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-3">å®‰å…¨é€æ˜ï¼šæ¯ä¸€æ¬¡è°ƒç”¨éƒ½æ¸…æ™°å¯è§</h2>
<p>æ¨¡å‹æ²»ç†ä¸ä»…è¦ä¿è¯ç¨³å®šæ€§ï¼Œè¿˜è¦ä¿è¯å®‰å…¨æ€§å’Œé€æ˜åº¦ã€‚</p>
<p><strong>å®‰å…¨æ–¹é¢ï¼Œ</strong> AgentRun æä¾›äº†å®Œæ•´çš„å®‰å…¨å›´æ æœºåˆ¶ã€‚æ‰€æœ‰æ¨¡å‹è°ƒç”¨åœ¨å‘é€å‰éƒ½ä¼šç»è¿‡å†…å®¹å®¡æ ¸ï¼Œè‡ªåŠ¨è¿‡æ»¤æ•æ„Ÿä¿¡æ¯ã€è¿è§„å†…å®¹ã€‚å¯ä»¥é…ç½®è‡ªå®šä¹‰çš„å®‰å…¨ç­–ç•¥ï¼Œæ¯”å¦‚ç¦æ­¢æŸäº›å…³é”®è¯ã€é™åˆ¶è¾“å‡ºé•¿åº¦ã€è„±æ•å¤„ç†ç­‰ã€‚æ‰€æœ‰çš„ API Key å’Œæ•æ„Ÿå‡­è¯éƒ½ç»è¿‡åŠ å¯†å­˜å‚¨ï¼Œåœ¨ä¼ è¾“å’Œä½¿ç”¨è¿‡ç¨‹ä¸­ä¸¥æ ¼ä¿æŠ¤ï¼Œç¡®ä¿ä¸ä¼šæ³„éœ²ã€‚</p>
<p><strong>é€æ˜åº¦æ–¹é¢ï¼Œ</strong> AgentRun æä¾›äº†ç»†ç²’åº¦çš„ç›‘æ§å’Œåˆ†æèƒ½åŠ›ã€‚æ¯ä¸ªæ¨¡å‹çš„è°ƒç”¨æ¬¡æ•°ã€æˆåŠŸç‡ã€å¹³å‡å»¶è¿Ÿã€Token æ¶ˆè€—éƒ½æœ‰è¯¦ç»†è®°å½•ã€‚å¯ä»¥æŒ‰æ—¶é—´ã€æŒ‰ Agentã€æŒ‰ç”¨æˆ·ç­‰å¤šä¸ªç»´åº¦è¿›è¡Œç»Ÿè®¡åˆ†æã€‚å½“æŸä¸ªæ¨¡å‹å‡ºç°å¼‚å¸¸æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å‘Šè­¦å¹¶æä¾›è¯¦ç»†çš„è¯Šæ–­ä¿¡æ¯ï¼Œå¸®åŠ©ä½ å¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜ã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œæ‰€æœ‰çš„æ²»ç†ç­–ç•¥æ‰§è¡Œè¿‡ç¨‹éƒ½æœ‰å®Œæ•´çš„æ—¥å¿—è®°å½•ã€‚å½“å‘ç”Ÿä¸»å¤‡åˆ‡æ¢ã€ç†”æ–­ã€é™æµç­‰äº‹ä»¶æ—¶ï¼Œä½ å¯ä»¥åœ¨æ—¥å¿—ä¸­çœ‹åˆ°å®Œæ•´çš„å†³ç­–è¿‡ç¨‹å’Œæ‰§è¡Œç»“æœã€‚è¿™ç§é€æ˜åº¦è®©ä½ å¯¹ç³»ç»Ÿçš„è¿è¡ŒçŠ¶æ€æœ‰å……åˆ†çš„æŒæ§æ„Ÿï¼Œä¹Ÿä¸ºäº‹ååˆ†æå’Œä¼˜åŒ–æä¾›äº†å®è´µçš„æ•°æ®ã€‚</p>
<h2 data-id="heading-4">ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼šæ™®é€šç”¨æˆ· vs é«˜çº§ç”¨æˆ·</h2>
<p>AgentRun çš„æ¨¡å‹æ²»ç†èƒ½åŠ›è®¾è®¡å¾—å¾ˆå·§å¦™ï¼Œ<strong>å®ƒæ—¢èƒ½æ»¡è¶³æ™®é€šç”¨æˆ·çš„â€œå¼€ç®±å³ç”¨â€éœ€æ±‚ï¼Œä¹Ÿèƒ½æ»¡è¶³é«˜çº§ç”¨æˆ·çš„â€œæ·±åº¦å®šåˆ¶â€éœ€æ±‚ã€‚</strong></p>
<p><strong>å¯¹äºæ™®é€šç”¨æˆ·ï¼Œ</strong> ä½ ç”šè‡³ä¸éœ€è¦çŸ¥é“â€œæ¨¡å‹æ²»ç†â€è¿™ä¸ªæ¦‚å¿µã€‚å½“ä½ åœ¨åˆ›å»º Agent æ—¶é€‰æ‹©æ¨¡å‹ï¼Œå¹³å°ä¼šè‡ªåŠ¨ä¸ºä½ é…ç½®åŸºç¡€çš„æ²»ç†ç­–ç•¥â€”â€”è‡ªåŠ¨é‡è¯•ã€åŸºæœ¬çš„å®¹é”™ã€ç®€å•çš„ç›‘æ§ã€‚è¿™äº›èƒ½åŠ›é»˜è®¤å¼€å¯ï¼Œæ— æ„Ÿä½¿ç”¨ï¼Œä½ åªéœ€è¦å…³æ³¨ Agent çš„ä¸šåŠ¡é€»è¾‘å³å¯ã€‚</p>
<p><strong>å¯¹äºé«˜çº§ç”¨æˆ·ï¼Œ</strong> ä½ å¯ä»¥æ·±å…¥åˆ°æ¨¡å‹æ²»ç†çš„å„ä¸ªç»†èŠ‚è¿›è¡Œå®šåˆ¶åŒ–é…ç½®ã€‚å¯ä»¥ç²¾ç¡®è®¾ç½®æ¯ä¸ªæ¨¡å‹çš„æƒé‡ã€è¶…æ—¶æ—¶é—´ã€é‡è¯•ç­–ç•¥ã€ç†”æ–­é˜ˆå€¼ã€‚å¯ä»¥è‡ªå®šä¹‰è·¯ç”±è§„åˆ™ï¼Œå®ç°å¤æ‚çš„æµé‡è°ƒåº¦é€»è¾‘ã€‚æ›´è¿›ä¸€æ­¥ï¼Œå› ä¸ºåº•å±‚ä½¿ç”¨çš„æ˜¯å¼€æºçš„ LiteLLMï¼Œ<strong>ä½ ç”šè‡³å¯ä»¥è‡ªå·±ç®¡ç† LiteLLM å®ä¾‹ï¼Œè¿›è¡Œæ›´æ·±åº¦çš„å®šåˆ¶åŒ–å¼€å‘æˆ–äºŒæ¬¡å¼€å‘ã€‚</strong> æ¯”å¦‚å®ç°è‡ªå·±çš„è·¯ç”±ç®—æ³•ã€æ·»åŠ è‡ªå®šä¹‰çš„ä¸­é—´ä»¶ã€å¯¹æ¥ä¼ä¸šå†…éƒ¨çš„å®¡è®¡ç³»ç»Ÿç­‰ã€‚</p>
<p>è¿™ç§â€œç®€å•çš„ç®€å•ï¼Œå¤æ‚çš„å¯èƒ½â€çš„è®¾è®¡ç†å¿µï¼Œè®©ä¸åŒæŠ€æœ¯æ°´å¹³çš„ç”¨æˆ·éƒ½èƒ½åœ¨ AgentRun ä¸Šæ‰¾åˆ°é€‚åˆè‡ªå·±çš„ä½¿ç”¨æ–¹å¼ã€‚</p>
<h2 data-id="heading-5">çœŸå®æ¡ˆä¾‹ï¼šä»é¢‘ç¹æ•…éšœåˆ°ç¨³å®šå¯é </h2>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªçœŸå®çš„æ¡ˆä¾‹ã€‚æŸç”µå•†ä¼ä¸šå¼€å‘äº†ä¸€ä¸ªæ™ºèƒ½å®¢æœ Agentï¼Œæœ€åˆç›´æ¥è°ƒç”¨ OpenAI çš„ GPT-4 æ¨¡å‹ã€‚ä¸Šçº¿åˆæœŸè¿è¡Œè‰¯å¥½ï¼Œä½†éšç€ä¸šåŠ¡å¢é•¿ï¼Œé—®é¢˜å¼€å§‹æš´éœ²ï¼š</p>
<p><strong>ç¬¬ä¸€ä¸ªé—®é¢˜å‡ºç°åœ¨ä¸€ä¸ªå‘¨äº”çš„ä¸‹åˆã€‚</strong> OpenAI çš„æœåŠ¡å‡ºç°çŸ­æš‚æ•…éšœï¼Œæ‰€æœ‰è°ƒç”¨éƒ½è¶…æ—¶å¤±è´¥ã€‚å®¢æœ Agent å®Œå…¨ç˜«ç—ªï¼Œå¤§é‡ç”¨æˆ·æŠ•è¯‰ï¼Œå®¢æœçƒ­çº¿è¢«æ‰“çˆ†ã€‚å›¢é˜Ÿç´§æ€¥åˆ‡æ¢åˆ°å¤‡ç”¨çš„ Claude æ¨¡å‹ï¼Œä½†å› ä¸ºä»£ç é‡Œç¡¬ç¼–ç äº† GPT-4 çš„ APIï¼Œåˆ‡æ¢è¿‡ç¨‹èŠ±äº† 2 ä¸ªå°æ—¶ï¼ŒæœŸé—´é€ æˆäº†ä¸¥é‡çš„ä¸šåŠ¡æŸå¤±ã€‚</p>
<p><strong>ç¬¬äºŒä¸ªé—®é¢˜å‘ç”Ÿåœ¨æœˆåº•ã€‚</strong> ç”±äºæµé‡æ¿€å¢ï¼ŒGPT-4 çš„è°ƒç”¨é‡è¶…å‡ºäº†è´¦å·é™é¢ï¼Œè§¦å‘äº†é™æµã€‚å¤§é‡è¯·æ±‚è¿”å› 429 é”™è¯¯ï¼ŒAgent å“åº”é€Ÿåº¦æ€¥å‰§ä¸‹é™ã€‚å›¢é˜Ÿåªèƒ½ä¸´æ—¶ç”³è¯·æé¢ï¼Œä½†å®¡æ‰¹æµç¨‹éœ€è¦å‡ å¤©æ—¶é—´ã€‚</p>
<p><strong>ç¬¬ä¸‰ä¸ªé—®é¢˜æ˜¯æˆæœ¬é—®é¢˜ã€‚</strong> æ‰€æœ‰æŸ¥è¯¢éƒ½ä½¿ç”¨ GPT-4ï¼Œä½†å®é™…ä¸Š 80% çš„æŸ¥è¯¢éƒ½æ˜¯ç®€å•é—®é¢˜ï¼ˆæŸ¥è®¢å•ã€æŸ¥ç‰©æµï¼‰ï¼Œæ ¹æœ¬ä¸éœ€è¦ GPT-4 çš„èƒ½åŠ›ã€‚æˆæœ¬å±…é«˜ä¸ä¸‹ï¼Œä½†ä¸çŸ¥é“å¦‚ä½•ä¼˜åŒ–ã€‚</p>
<p><strong>å¼•å…¥ AgentRun çš„æ¨¡å‹æ²»ç†åï¼Œè¿™äº›é—®é¢˜éƒ½å¾—åˆ°äº†è§£å†³ã€‚</strong> å›¢é˜Ÿé…ç½®äº†å®Œæ•´çš„æ¨¡å‹æ²»ç†ç­–ç•¥ï¼šä¸»æ¨¡å‹æ˜¯ GPT-4ï¼Œå¤‡ç”¨æ¨¡å‹æ˜¯ Claude-3 å’Œ Qwen-Maxã€‚å½“ GPT-4 å‡ºç°æ•…éšœæ—¶ï¼Œç³»ç»Ÿä¼šåœ¨æ¯«ç§’çº§è‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ç”¨æ¨¡å‹ï¼Œæ•´ä¸ªè¿‡ç¨‹å¯¹ç”¨æˆ·é€æ˜ã€‚é…ç½®äº†åŸºäºè¯­ä¹‰çš„æ™ºèƒ½è·¯ç”±ï¼Œç®€å•æŸ¥è¯¢è‡ªåŠ¨ä½¿ç”¨ GPT-3.5-turboï¼Œå¤æ‚é—®é¢˜æ‰ä½¿ç”¨ GPT-4ï¼Œæˆæœ¬é™ä½äº†çº¦ 50%ï¼Œç”¨æˆ·ä½“éªŒæ²¡æœ‰æ˜æ˜¾å˜åŒ–ã€‚è®¾ç½®äº†é™æµå’Œå‘Šè­¦ç­–ç•¥ï¼Œå½“æ¥è¿‘é™é¢æ—¶è‡ªåŠ¨é™ä½è°ƒç”¨é¢‘ç‡å¹¶é€šçŸ¥å›¢é˜Ÿï¼Œé¿å…è§¦å‘ç¡¬é™æµã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œ<strong>å›¢é˜Ÿå¯¹ç³»ç»Ÿæœ‰äº†å……åˆ†çš„æŒæ§æ„Ÿã€‚</strong> é€šè¿‡å¯è§‚æµ‹å¹³å°ï¼Œå¯ä»¥å®æ—¶çœ‹åˆ°æ¯ä¸ªæ¨¡å‹çš„å¥åº·çŠ¶æ€ã€è°ƒç”¨åˆ†å¸ƒã€æˆæœ¬è¶‹åŠ¿ã€‚å½“å‡ºç°å¼‚å¸¸æ—¶ï¼Œèƒ½å¤Ÿç¬¬ä¸€æ—¶é—´å‘ç°å¹¶å¤„ç†ã€‚ä»é¢‘ç¹æ•…éšœã€è¢«åŠ¨åº”å¯¹ï¼Œå˜æˆäº†ä¸»åŠ¨ç®¡ç†ã€ç¨³å®šå¯é ã€‚</p>
<h2 data-id="heading-6">ç«‹å³ä½“éªŒ AgentRun</h2>
<p>å‡½æ•°è®¡ç®— AgentRun çš„æ— ä»£ç åˆ°é«˜ä»£ç æ¼”è¿›èƒ½åŠ›ï¼Œç°å·²å¼€æ”¾ä½“éªŒï¼š</p>
<ol>
<li><strong>å¿«é€Ÿåˆ›å»ºï¼š è®¿é—®æ§åˆ¶å°</strong>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Ffunctionai.console.aliyun.com%2Fcn-hangzhou%2Fagent%2Fexplore%3Fspm%3Da2c6h.12873639.article-detail.6.15b8370bgmqLge" target="_blank" title="https://functionai.console.aliyun.com/cn-hangzhou/agent/explore?spm=a2c6h.12873639.article-detail.6.15b8370bgmqLge" ref="nofollow noopener noreferrer">functionai.console.aliyun.com/cn-hangzhouâ€¦</a>ï¼‰ ï¼Œ60 ç§’åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ª Agent</li>
<li><strong>æ·±åº¦å®šåˆ¶ï¼šå½“éœ€è¦æ›´å¤æ‚åŠŸèƒ½æ—¶ï¼Œä¸€é”®è½¬æ¢ä¸ºé«˜ä»£ç </strong></li>
<li><strong>æŒç»­æ¼”è¿›ï¼šåˆ©ç”¨å‡½æ•°è®¡ç®— AgentRun çš„åŸºç¡€è®¾æ–½èƒ½åŠ›ï¼ŒæŒç»­ä¼˜åŒ–ä½ çš„ Agent</strong></li>
</ol>
<p>ä»æƒ³æ³•åˆ°ä¸Šçº¿ï¼Œä»åŸå‹åˆ°ç”Ÿäº§ï¼Œå‡½æ•°è®¡ç®— AgentRun å§‹ç»ˆæ˜¯ä½ æœ€å¥½çš„ä¼™ä¼´ã€‚<strong>æ¬¢è¿åŠ å…¥â€œå‡½æ•°è®¡ç®— AgentRun å®¢æˆ·ç¾¤â€ï¼Œé’‰é’‰ç¾¤å·ï¼š134570017218ã€‚</strong></p>
<p><strong>å¿«é€Ÿäº†è§£å‡½æ•°è®¡ç®— AgentRunï¼š</strong></p>
<p><strong>ä¸€å¥è¯ä»‹ç»ï¼š</strong> å‡½æ•°è®¡ç®— AgentRun æ˜¯ä¸€ä¸ªä»¥é«˜ä»£ç ä¸ºæ ¸å¿ƒçš„ä¸€ç«™å¼ Agentic AI åŸºç¡€è®¾æ–½å¹³å°ã€‚ç§‰æŒç”Ÿæ€å¼€æ”¾å’Œçµæ´»ç»„è£…çš„ç†å¿µï¼Œä¸ºä¼ä¸šçº§ Agent åº”ç”¨æä¾›ä»å¼€å‘ã€éƒ¨ç½²åˆ°è¿ç»´çš„å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e8595a4b85e4842abe3e35bb0070505~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767258078&amp;x-signature=DcPHZ9KJ8bBJCepeAtKCg7kiLCk%3D" alt="image.png" loading="lazy"/></p>
<p><em>å‡½æ•°è®¡ç®— AgentRun æ¶æ„å›¾</em></p>
<p>AgentRun è¿è¡Œæ—¶åŸºäº<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Ffc%3Fspm%3Da1z389.11499242.0.0.65452413RXCQWs%26utm_content%3Dg_1000408146" target="_blank" title="https://www.aliyun.com/product/fc?spm=a1z389.11499242.0.0.65452413RXCQWs&amp;utm_content=g_1000408146" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘å‡½æ•°è®¡ç®— FC</a> æ„å»ºï¼Œç»§æ‰¿äº† Serverless è®¡ç®—æè‡´å¼¹æ€§ã€æŒ‰é‡ä»˜è´¹ã€é›¶è¿ç»´çš„æ ¸å¿ƒä¼˜åŠ¿ã€‚é€šè¿‡æ·±åº¦é›†æˆ AgentScopeã€LangChainã€RAGFlowã€Mem0 ç­‰ä¸»æµå¼€æºç”Ÿæ€ã€‚AgentRun å°† Serverless çš„æè‡´å¼¹æ€§ã€é›¶è¿ç»´å’ŒæŒ‰é‡ä»˜è´¹çš„ç‰¹æ€§ä¸ AI åŸç”Ÿåº”ç”¨åœºæ™¯æ·±åº¦èåˆï¼ŒåŠ©åŠ›ä¼ä¸šå®ç°æˆæœ¬ä¸æ•ˆç‡çš„æè‡´ä¼˜åŒ–ï¼Œ<strong>å¹³å‡ TCO é™ä½ 60%ã€‚</strong></p>
<p><strong>è®©å¼€å‘è€…åªéœ€ä¸“æ³¨äº Agent çš„ä¸šåŠ¡é€»è¾‘åˆ›æ–°ï¼Œæ— éœ€å…³å¿ƒåº•å±‚åŸºç¡€è®¾æ–½ï¼Œè®© Agentic AI çœŸæ­£è¿›å…¥ä¼ä¸šç”Ÿäº§ç¯å¢ƒã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨Gravitonæœºå‹æ¨ç†LLMæ¨¡å‹å®è·µæŒ‡å—]]></title>    <link>https://juejin.cn/post/7587342664078688271</link>    <guid>https://juejin.cn/post/7587342664078688271</guid>    <pubDate>2025-12-25T07:22:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587342664078688271" data-draft-id="7587334152870953000" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨Gravitonæœºå‹æ¨ç†LLMæ¨¡å‹å®è·µæŒ‡å—"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-25T07:22:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äºšé©¬é€Šäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2850395271209496"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨Gravitonæœºå‹æ¨ç†LLMæ¨¡å‹å®è·µæŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2850395271209496/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äºšé©¬é€Šäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T07:22:49.000Z" title="Thu Dec 25 2025 07:22:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. èƒŒæ™¯ä»‹ç»</h2>
<p>åœ¨ä¼ä¸š AI åº”ç”¨å®è·µä¸­ï¼Œå¹¶éæ‰€æœ‰ä»»åŠ¡éƒ½éœ€è¦éƒ¨ç½²å‚æ•°é‡æ•°ç™¾äº¿çš„å¤§å‹æ¨¡å‹ã€‚å¤§é‡ä¸šåŠ¡åœºæ™¯å¦‚å·¥å•åˆ†ç±»ä¸è·¯ç”±ã€å®¢æœè¯„è®ºæƒ…æ„Ÿåˆ†æã€å…³é”®ä¿¡æ¯æå–ã€å®æ—¶æ–‡æœ¬ç¿»è¯‘ç­‰ï¼Œå±äºé«˜é¢‘ä½†ç›¸å¯¹ç®€å•çš„ä»»åŠ¡ï¼Œè¿™äº›åœºæ™¯å¯¹å“åº”é€Ÿåº¦å’Œæˆæœ¬æ›´ä¸ºæ•æ„Ÿã€‚Amazon Graviton å¤„ç†å™¨ä¸ Qwen3 0.6B è½»é‡çº§æ¨¡å‹çš„ç»“åˆï¼Œä¸ºè¿™ç±»åœºæ™¯æä¾›äº†ä¸€ä¸ªæå…·æ€§ä»·æ¯”çš„æ¨ç†è§£å†³æ–¹æ¡ˆã€‚</p>
<p>é€šè¿‡åœ¨å¤šç§å®ä¾‹ç±»å‹ä¸Šçš„å…¨é¢æµ‹è¯•ï¼Œæˆ‘ä»¬å‘ç° Gravitonå®ä¾‹ç›¸æ¯”åŒé…ç½®çš„ Intel c7i.xlarge å®ä¾‹ï¼Œæ¨ç†é€Ÿåº¦æå‡ 42%ï¼Œå•æ¬¡è¯·æ±‚æˆæœ¬é™ä½ 31%ï¼Œç«¯åˆ°ç«¯å»¶è¿Ÿå‡å°‘ 23%ã€‚å¯¹äºä¸éœ€è¦å¤æ‚å¤šè½®æ¨ç†çš„åº”ç”¨åœºæ™¯ï¼ŒåŸºäº CPU çš„ Graviton å®ä¾‹æä¾›äº†é™¤ GPU ä¹‹å¤–çš„å¦ä¸€ç§é«˜æ€§ä»·æ¯”æ¨ç†æ–¹æ¡ˆé€‰æ‹©ï¼Œä¸ºä¼ä¸šæ„å»ºæˆæœ¬å¯æ§ã€æ€§èƒ½ä¼˜å¼‚çš„æ™ºèƒ½åŒ–æœåŠ¡æä¾›äº†ç†æƒ³çš„æŠ€æœ¯åŸºç¡€ã€‚</p>
<blockquote>
<p>ğŸ“¢é™æ—¶æ’æ’­ï¼šåœ¨æœ¬æ¬¡å®éªŒä¸­ï¼Œä½ å¯ä»¥åœ¨åŸºäº Graviton çš„ EC2 å®ä¾‹ä¸Šè½»æ¾å¯åŠ¨ Milvus å‘é‡æ•°æ®åº“ï¼ŒåŠ é€Ÿæ‚¨çš„ç”Ÿæˆå¼ AI åº”ç”¨ã€‚</p>
<p>â©å¿«å¿«ç‚¹å‡»è¿›å…¥ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fevents.amazoncloud.cn%2Flabs%2Fcloudlab-graviton-based-vector-database%3Fvisitfrom%3D3P_Juejinhead_1225%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejinhead_1225" target="_blank" title="https://events.amazoncloud.cn/labs/cloudlab-graviton-based-vector-database?visitfrom=3P_Juejinhead_1225&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejinhead_1225" ref="nofollow noopener noreferrer">åˆ›æ–°åŸºçŸ³ â€”â€” åŸºäº Graviton æ„å»ºå·®å¼‚åŒ–ç”Ÿæˆå¼AIå‘é‡æ•°æ®åº“</a>ã€‹å®éªŒ</p>
<p>ğŸ“± å³åˆ»åœ¨äº‘ä¸Šæ¢ç´¢å®éªŒå®¤ï¼Œå¼€å¯æ„å»ºå¼€å‘è€…æ¢ç´¢ä¹‹æ—…å§ï¼</p>
</blockquote>
<h3 data-id="heading-1">1.1 Amazon Graviton å¤„ç†å™¨ï¼šä¸ºäº‘ç«¯å·¥ä½œè´Ÿè½½ä¼˜åŒ–çš„ ARM æ¶æ„</h3>
<p>Amazon Graviton æ˜¯äºšé©¬é€Šäº‘ç§‘æŠ€è‡ªç ”çš„åŸºäº ARM æ¶æ„çš„å¤„ç†å™¨ç³»åˆ—ï¼Œä¸“ä¸ºäº‘ç«¯å·¥ä½œè´Ÿè½½ä¼˜åŒ–è®¾è®¡ã€‚åœ¨æœºå™¨å­¦ä¹ æ¨ç†ä»»åŠ¡ä¸­ï¼ŒGraviton å¤„ç†å™¨å±•ç°å‡ºè‰²çš„æ€§èƒ½è¡¨ç°ã€‚<strong>ç›¸æ¯”åŒç­‰æ€§èƒ½çš„ x86 å®ä¾‹ï¼ŒGraviton å®ä¾‹å¯ä»¥èŠ‚çœé«˜è¾¾ 20% çš„æˆæœ¬</strong>ï¼Œè¿™å¯¹äºéœ€è¦é•¿æœŸè¿è¡Œæ¨ç†æœåŠ¡çš„ä¼ä¸šè€Œè¨€å…·æœ‰æ˜¾è‘—çš„ç»æµä»·å€¼ã€‚ARM æ¶æ„å¤©ç„¶çš„ä½åŠŸè€—ç‰¹æ€§ä½¿å¾— Graviton å¤„ç†å™¨åœ¨æ€§èƒ½åŠŸè€—æ¯”æ–¹é¢å…·æœ‰æ˜æ˜¾ä¼˜åŠ¿ï¼Œåœ¨ç›¸åŒè®¡ç®—èƒ½åŠ›ä¸‹æ¶ˆè€—æ›´å°‘çš„èƒ½æºã€‚</p>
<p>é’ˆå¯¹ AI æ¨ç†å·¥ä½œè´Ÿè½½ï¼ŒGraviton å¤„ç†å™¨æä¾›äº†ä¼˜åŒ–çš„å†…å­˜å¸¦å®½è®¾è®¡ï¼Œä¸ºæ¨¡å‹æ¨ç†è¿‡ç¨‹ä¸­çš„å¤§é‡æ•°æ®è¯»å†™æ“ä½œæä¾›å……è¶³çš„å¸¦å®½æ”¯æŒã€‚Graviton å®ä¾‹ä¸äºšé©¬é€Šäº‘ç§‘æŠ€ä½ æœåŠ¡æ·±åº¦é›†æˆï¼ŒåŒ…æ‹¬ Amazon SageMakerã€Amazon Elastic Container Serviceï¼ˆAmazon ECSï¼‰ã€Amazon Elastic Kubernetes Serviceï¼ˆAmazon EKSï¼‰ç­‰æ ¸å¿ƒæœåŠ¡ï¼Œä¸ºç”¨æˆ·æä¾› seamless çš„éƒ¨ç½²ä½“éªŒã€‚è¿™ç§åŸç”Ÿçš„äº‘é›†æˆèƒ½åŠ›ä½¿å¾—åŸºäº Graviton çš„æ¨ç†æœåŠ¡å¯ä»¥å……åˆ†åˆ©ç”¨äºšé©¬é€Šäº‘ç§‘æŠ€ç”Ÿæ€ç³»ç»Ÿçš„å„é¡¹èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-2">1.2 Qwen3 0.6Bï¼šè½»é‡é«˜æ•ˆçš„å¤§è¯­è¨€æ¨¡å‹</h3>
<p>Qwen3 0.6B æ˜¯é˜¿é‡Œå·´å·´é€šä¹‰åƒé—®ç³»åˆ—çš„è½»é‡çº§å¤§è¯­è¨€æ¨¡å‹ï¼Œé‡‡ç”¨åŸºäº Transformer çš„ decoder-only æ¶æ„è®¾è®¡ã€‚è¯¥æ¨¡å‹æ‹¥æœ‰ 6 äº¿å‚æ•°è§„æ¨¡ï¼Œç»è¿‡å®Œæ•´çš„é¢„è®­ç»ƒå’Œåè®­ç»ƒé˜¶æ®µä¼˜åŒ–ï¼Œæ”¯æŒ 32K tokens çš„ä¸Šä¸‹æ–‡é•¿åº¦ã€‚å°½ç®¡å‚æ•°é‡ç›¸å¯¹è¾ƒå°ï¼Œ<strong>Qwen3 0.6B ä»ç„¶ä¿æŒäº†è‰¯å¥½çš„è¯­è¨€ç†è§£èƒ½åŠ›</strong>ï¼Œåœ¨å¤šä¸ªè¯„æµ‹åŸºå‡†ä¸Šå±•ç°å‡ºä»¤äººå°è±¡æ·±åˆ»çš„æ€§èƒ½è¡¨ç°ã€‚</p>
<p>ä»æ€§èƒ½ç‰¹ç‚¹æ¥çœ‹ï¼ŒQwen3 0.6B å…·æœ‰å¤šé¡¹æ˜¾è‘—ä¼˜åŠ¿ã€‚æ¨¡å‹çš„è½»é‡åŒ–è®¾è®¡ä½¿å…¶æ¨ç†é€Ÿåº¦å¿«ï¼Œèƒ½å¤Ÿæ»¡è¶³å®æ—¶åº”ç”¨åœºæ™¯çš„å“åº”è¦æ±‚ã€‚<strong>å†…å­˜å ç”¨ä½æ˜¯è¯¥æ¨¡å‹çš„å¦ä¸€å¤§ç‰¹ç‚¹</strong>ï¼Œå³ä½¿åœ¨èµ„æºå—é™çš„ç¯å¢ƒä¸‹ä¹Ÿèƒ½ç¨³å®šè¿è¡Œï¼Œè¿™ä¸ºè¾¹ç¼˜è®¡ç®—å’Œç§æœ‰åŒ–éƒ¨ç½²æä¾›äº†å¯èƒ½ã€‚æ¨¡å‹å¯¹ä¸­è‹±æ–‡éƒ½æœ‰è‰¯å¥½çš„æ”¯æŒï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸­æ–‡è¯­å¢ƒä¸‹è¡¨ç°çªå‡ºã€‚</p>
<p>æ ¹æ®å›¾1å®˜æ–¹è¯„ä¼°ç»“æœï¼Œ<strong>Qwen3 0.6B åœ¨å¤šä¸ªè¯„æµ‹åŸºå‡†ä¸Šçš„è¡¨ç°ç”šè‡³è¶…è¿‡äº†å‚æ•°é‡æ›´å¤§çš„æ¨¡å‹</strong>ã€‚åœ¨ MMLU ä»»åŠ¡ä¸­ï¼ŒQwen3 0.6B è·å¾—äº† 52.81 çš„åˆ†æ•°ï¼Œåœ¨ Math &amp; STEM ç±»ä»»åŠ¡çš„ GPQA æµ‹è¯•ä¸­å¾—åˆ† 26.77ï¼Œåœ¨ Coding ç±»ä»»åŠ¡çš„ EvalPlus ä¸­è¾¾åˆ° 36.23 åˆ†ã€‚è¿™äº›æ•°æ®å……åˆ†ä½“ç°äº†æ¨¡å‹åœ¨é€šç”¨è¯­è¨€ç†è§£ã€æ•°å­¦æ¨ç†å’Œä»£ç ç”Ÿæˆç­‰å¤šä¸ªç»´åº¦çš„ç»¼åˆèƒ½åŠ›ã€‚å¯¹æ¯” Gemma-3-1Bï¼ˆ1B å‚æ•°ï¼‰å’Œ Qwen2.5-1.5Bï¼ˆ1.5B å‚æ•°ï¼‰ç­‰æ›´å¤§è§„æ¨¡çš„æ¨¡å‹ï¼ŒQwen3 0.6B åœ¨æŸäº›ç‰¹å®šä»»åŠ¡ä¸Šå±•ç°å‡ºç›¸å½“ç”šè‡³æ›´ä¼˜çš„æ€§èƒ½ï¼Œè¯æ˜äº†å…¶è®­ç»ƒå’Œä¼˜åŒ–ç­–ç•¥çš„æœ‰æ•ˆæ€§ã€‚</p>
<p>ä»åº”ç”¨åœºæ™¯è§’åº¦çœ‹ï¼ŒQwen3 0.6B ç‰¹åˆ«é€‚åˆéƒ¨ç½²åœ¨è¾¹ç¼˜è®¡ç®—è®¾å¤‡ä¸Šï¼Œä¸ºç»ˆç«¯ç”¨æˆ·æä¾›æœ¬åœ°åŒ–çš„ AI èƒ½åŠ›ã€‚åœ¨å®æ—¶å¯¹è¯ç³»ç»Ÿä¸­ï¼Œæ¨¡å‹çš„å¿«é€Ÿå“åº”ç‰¹æ€§èƒ½å¤Ÿæä¾›æµç•…çš„äº¤äº’ä½“éªŒã€‚å¯¹äºæ–‡æœ¬åˆ†ç±»å’Œæƒ…æ„Ÿåˆ†æç­‰ä»»åŠ¡ï¼Œæ¨¡å‹çš„è½»é‡åŒ–ç‰¹æ€§ä½¿å¾—å¤§è§„æ¨¡éƒ¨ç½²æˆä¸ºå¯èƒ½ã€‚æ­¤å¤–ï¼Œæ¨¡å‹è¿˜é€‚ç”¨äºæ„å»ºçŸ¥è¯†é—®ç­”ç³»ç»Ÿï¼Œä¸ºç”¨æˆ·æä¾›åŸºäºä¼ä¸šçŸ¥è¯†åº“çš„æ™ºèƒ½é—®ç­”æœåŠ¡ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F11%2F25%2Fpractice-guide-for-llm-model-inference-using-graviton-instances-0.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/11/25/practice-guide-for-llm-model-inference-using-graviton-instances-0.png" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67fd56b463544800bf14adbd39082ede~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767252240&amp;x-signature=jmqpcrDVB%2F3ZpWHb23SC%2FZ1A2Sg%3D" alt="" loading="lazy"/></a>
å›¾1 Qwen3 ç³»åˆ—æ¨¡å‹è¯„ä¼°ç»“æœ</p>
<p><strong>Qwen3 0.6B</strong> <strong>ä¸ Graviton å¤„ç†å™¨çš„ç»“åˆï¼Œä¸ºç”¨æˆ·æä¾›äº†ä¸€ä¸ªæˆæœ¬æ•ˆç›Šæé«˜çš„ LLM æ¨ç†è§£å†³æ–¹æ¡ˆ</strong>ã€‚è¿™ä¸€æŠ€æœ¯ç»„åˆå°† ARM æ¶æ„çš„èƒ½æ•ˆä¼˜åŠ¿ä¸è½»é‡çº§æ¨¡å‹çš„èµ„æºå‹å¥½ç‰¹æ€§ç›¸ç»“åˆï¼Œåœ¨ä¿æŒæ¨ç†æ€§èƒ½çš„åŒæ—¶æ˜¾è‘—é™ä½äº†è¿è¥æˆæœ¬ã€‚åœ¨è½»é‡çº§å¤§è¯­è¨€æ¨¡å‹æ¨ç†åœºæ™¯ä¸­ï¼ŒAmazon Graviton å¤„ç†å™¨å±•ç°å‡ºæ˜¾è‘—çš„æˆæœ¬å’Œæ€§èƒ½ä¼˜åŠ¿ã€‚é€šè¿‡åœ¨å¤šç§å®ä¾‹ç±»å‹ä¸Šå¯¹ Qwen3 0.6B æ¨¡å‹è¿›è¡Œå…¨é¢æµ‹è¯•ï¼Œæˆ‘ä»¬å‘ç° Graviton 4 c8g.xlarge å®ä¾‹ç›¸æ¯”åŒé…ç½®çš„ Intel c7i.xlarge å®ä¾‹ï¼Œæ¨ç†é€Ÿåº¦æå‡ 42%ï¼Œå•æ¬¡è¯·æ±‚æˆæœ¬é™ä½ 31%ï¼Œç«¯åˆ°ç«¯å»¶è¿Ÿå‡å°‘ 23%ã€‚å¯¹äºæ–‡æœ¬åˆ†ç±»ã€æƒ…æ„Ÿåˆ†æã€å·¥å•è·¯ç”±ã€è½»é‡çº§ç¿»è¯‘ç­‰é«˜é¢‘ç®€å•ä»»åŠ¡ï¼ŒåŸºäº CPU çš„ Graviton å®ä¾‹æä¾›äº†é™¤ GPU ä¹‹å¤–çš„å¦ä¸€ç§é«˜æ€§ä»·æ¯”æ¨ç†æ–¹æ¡ˆé€‰æ‹©ã€‚</p>
<h2 data-id="heading-3">2. éƒ¨ç½²æ–¹æ³•</h2>
<h3 data-id="heading-4">2.1æ–¹æ¡ˆæ¶æ„</h3>
<p>æœ¬æ–¹æ¡ˆæä¾›äº†ä¸€ä¸ªå®Œæ•´çš„éƒ¨ç½²æµç¨‹ï¼Œé€šè¿‡ Amazon SageMaker å’Œ Ollama åœ¨ Graviton å®ä¾‹ä¸Šéƒ¨ç½² Qwen3 0.6B æ¨¡å‹ã€‚<strong>è¿™ä¸ªæ–¹æ¡ˆçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå°† Ollama çš„ç®€ä¾¿æ€§ä¸ Amazon SageMaker çš„ä¼ä¸šçº§èƒ½åŠ›ç›¸ç»“åˆ</strong>ï¼Œæ—¢ä¿ç•™äº† Ollama åœ¨æ¨¡å‹ç®¡ç†å’Œæ¨ç†æ–¹é¢çš„æ˜“ç”¨æ€§ï¼Œåˆè·å¾—äº† SageMaker åœ¨å¯æ‰©å±•æ€§ã€ç›‘æ§å’Œè¿ç»´æ–¹é¢çš„å¼ºå¤§æ”¯æŒã€‚</p>
<p>æ•´ä½“æ¶æ„åˆ†ä¸ºä¸¤ä¸ªæ ¸å¿ƒé˜¶æ®µã€‚<strong>åœ¨é•œåƒæ„å»ºé˜¶æ®µï¼ˆImage Build Phaseï¼‰</strong> ï¼Œæºä»£ç é¦–å…ˆå­˜å‚¨åœ¨ Amazon Simple Storage Serviceï¼ˆAmazon S3ï¼‰ä¸­ï¼ŒAmazon CodeBuild é¡¹ç›®ä» S3 æ‹‰å–æºä»£ç å¹¶æ‰§è¡Œå®¹å™¨é•œåƒçš„æ„å»ºè¿‡ç¨‹ã€‚æ„å»ºå®Œæˆåï¼Œé•œåƒè¢«æ¨é€åˆ° Amazon Elastic Container Registryï¼ˆAmazon ECRï¼‰è¿›è¡Œå­˜å‚¨å’Œç‰ˆæœ¬ç®¡ç†ã€‚æ„å»ºè¿‡ç¨‹ä¸­çš„æ—¥å¿—é€šè¿‡ Amazon CloudWatch è¿›è¡Œé›†ä¸­ç®¡ç†ã€‚<strong>ä½¿ç”¨ Amazon CodeBuild æ¥æ„å»º ARM æ¶æ„çš„å®¹å™¨é•œåƒ</strong>ï¼Œé¿å…äº†éœ€è¦å•ç‹¬å¯åŠ¨ Graviton å®ä¾‹è¿›è¡Œé•œåƒæ‰“åŒ…çš„é¢å¤–æˆæœ¬å’Œå¤æ‚åº¦ã€‚</p>
<p><strong>åœ¨è¿è¡Œæ—¶é˜¶æ®µï¼ˆRuntime Phaseï¼‰</strong> ï¼Œå®¢æˆ·ç«¯åº”ç”¨é€šè¿‡ Amazon SageMaker Endpoint å‘èµ·æ¨ç†è¯·æ±‚ã€‚SageMaker Endpoint å°†è¯·æ±‚è·¯ç”±åˆ°è¿è¡Œåœ¨ Graviton å®ä¾‹ä¸Šçš„å®¹å™¨ã€‚åœ¨ Graviton å®ä¾‹å†…éƒ¨ï¼ŒOllama Runtime è´Ÿè´£æ¨¡å‹çš„åŠ è½½å’Œæ¨ç†æ‰§è¡Œï¼ŒQwen3 0.6B æ¨¡å‹ä»¥ä¼˜åŒ–çš„æ–¹å¼è¿è¡Œåœ¨ ARM æ¶æ„ä¸Šã€‚è¿™ç§æ¶æ„ä½¿å¾—æ¨ç†æœåŠ¡å¯ä»¥å……åˆ†åˆ©ç”¨ SageMaker çš„è‡ªåŠ¨æ‰©ç¼©å®¹ã€æµé‡åˆ†é…å’Œæ¨¡å‹ç‰ˆæœ¬ç®¡ç†ç­‰èƒ½åŠ›ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F11%2F25%2Fpractice-guide-for-llm-model-inference-using-graviton-instances-1.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/11/25/practice-guide-for-llm-model-inference-using-graviton-instances-1.png" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85060cd33deb41509e8046c6a9fdd97e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767252240&amp;x-signature=HQx2eI7y%2BQjo7LyBwRVmAZvva6w%3D" alt="" loading="lazy"/></a>
å›¾2 åœ¨SageMakerä¸Šéƒ¨ç½²Ollamaæ¨¡å‹æ¨ç†</p>
<h3 data-id="heading-5">2.2éƒ¨ç½²æ­¥éª¤</h3>
<p>å®Œæ•´çš„éƒ¨ç½²ä»£ç å·²å¼€æºåœ¨Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Faws-samples%2Fllm_deploy_gcr%2Ftree%2Fmain%2Fsagemaker%2Fsagemaker_ollama" target="_blank" title="https://github.com/aws-samples/llm_deploy_gcr/tree/main/sagemaker/sagemaker_ollama" ref="nofollow noopener noreferrer">GitHub ä»“åº“</a>Â ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ Jupyter Notebook è„šæœ¬ä¸€æ­¥æ­¥å®Œæˆæ•´ä¸ªéƒ¨ç½²æµç¨‹ã€‚ä»¥ä¸‹ç« èŠ‚å°†è¯¦ç»†ä»‹ç»éƒ¨ç½²è¿‡ç¨‹ä¸­çš„å…³é”®æ­¥éª¤ï¼Œæ¶µç›–ä»ä»£ç å‡†å¤‡åˆ°æ¨ç†è°ƒç”¨çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸã€‚</p>
<h4 data-id="heading-6">2.2.1.å…‹éš†éƒ¨ç½²ä»£ç </h4>
<p>é¦–å…ˆä» GitHub ä»“åº“è·å–éƒ¨ç½²æ‰€éœ€çš„å…¨éƒ¨ä»£ç å’Œé…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://github.com/aws-samples/llm_deploy_gcr.git
<span class="hljs-built_in">cd</span> llm_deploy_gcr/sagemaker/sagemaker_ollama
</code></pre>
<h4 data-id="heading-7">2.2.2.é•œåƒæ‰“åŒ…</h4>
<p><strong>å®¹å™¨é•œåƒ</strong>å°è£…äº† Ollama è¿è¡Œç¯å¢ƒã€æ¨¡å‹æ¨ç†ä»£ç ä»¥åŠä¸ SageMaker é›†æˆæ‰€éœ€çš„æ¥å£å±‚ã€‚Dockerfile åŸºäº Ollama å®˜æ–¹é•œåƒæ„å»ºï¼Œå¹¶æ·»åŠ äº† FastAPI æ¡†æ¶æ¥å®ç°ä¸ Amazon SageMaker Endpoint çš„åè®®é€‚é…ã€‚</p>
<p><strong>é•œåƒä¸­çš„ FastAPI åº”ç”¨å®ç°äº†å¯¹é«˜å¹¶å‘åœºæ™¯çš„æ”¯æŒ</strong>ï¼Œèƒ½å¤ŸåŒæ—¶å¤„ç†å¤šä¸ªæ¨ç†è¯·æ±‚ã€‚ç«¯å£ 8080 æ˜¯ SageMaker æ¨ç†å®¹å™¨çš„æ ‡å‡†ç«¯å£ã€‚æ–¹æ¡ˆä½¿ç”¨ Amazon CodeBuild æ‰§è¡Œé•œåƒæ„å»ºï¼ŒCodeBuild æ”¯æŒåŸç”Ÿçš„ ARM64 æ„å»ºç¯å¢ƒï¼Œå¯ä»¥ç›´æ¥æ„å»ºé€‚é… Graviton å¤„ç†å™¨çš„å®¹å™¨é•œåƒã€‚</p>
<h4 data-id="heading-8">2.2.3.åˆ›å»ºå’Œéƒ¨ç½² SageMaker Endpoint</h4>
<p>æ¥ä¸‹æ¥éœ€è¦åˆ›å»º SageMaker æ¨¡å‹ã€Endpoint é…ç½®ï¼Œå¹¶éƒ¨ç½² Endpointã€‚<strong>åœ¨æ¨¡å‹é…ç½®ä¸­</strong>ï¼Œéœ€è¦æŒ‡å®šå®¹å™¨é•œåƒä½ç½®å’Œç¯å¢ƒå˜é‡ï¼Œå…¶ä¸­Â <code>OLLAMA_MODEL_ID</code>Â æŒ‡å®šåŠ è½½çš„æ¨¡å‹ï¼Œ<code>OLLAMA_NUM_PARALLEL</code>Â æ§åˆ¶å¹¶è¡Œè¯·æ±‚æ•°é‡ã€‚<strong>åœ¨ Endpoint é…ç½®ä¸­</strong>ï¼Œæ˜ç¡®æŒ‡å®šä½¿ç”¨ Graviton å®ä¾‹ç±»å‹ï¼ˆå¦‚ ml.c7g.xlargeï¼‰ï¼Œå¹¶å°†Â <code>ContainerStartupHealthCheckTimeoutInSeconds</code>Â è®¾ç½®ä¸º 1200 ç§’ï¼Œå› ä¸ºé¦–æ¬¡å¯åŠ¨æ—¶ Ollama éœ€è¦ä¸‹è½½æ¨¡å‹æ–‡ä»¶ã€‚</p>
<p>éƒ¨ç½²è¿‡ç¨‹æ˜¯å¼‚æ­¥çš„ï¼Œå¯ä»¥é€šè¿‡è½®è¯¢ API ç›‘æ§éƒ¨ç½²çŠ¶æ€ã€‚å½“çŠ¶æ€ä» â€œCreatingâ€ å˜ä¸º â€œInServiceâ€ æ—¶ï¼ŒEndpoint å³å¯å¼€å§‹å¤„ç†æ¨ç†è¯·æ±‚ã€‚å®Œæ•´çš„ä»£ç å®ç°è¯·å‚è€ƒ GitHub ä»“åº“ä¸­çš„Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Faws-samples%2Fllm_deploy_gcr%2Fblob%2Fmain%2Fsagemaker%2Fsagemaker_ollama%2Fsagemaker_ollama_endpoint.ipynb" target="_blank" title="https://github.com/aws-samples/llm_deploy_gcr/blob/main/sagemaker/sagemaker_ollama/sagemaker_ollama_endpoint.ipynb" ref="nofollow noopener noreferrer">NotebookÂ </a>ã€‚</p>
<h4 data-id="heading-9">2.2.4. è°ƒç”¨æ¨ç†æ¥å£</h4>
<p><strong>éƒ¨ç½²å®Œæˆåï¼Œå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ SageMaker Runtime API è°ƒç”¨æ¨ç†æœåŠ¡</strong>ã€‚æ–¹æ¡ˆæ”¯æŒæµå¼å“åº”ï¼ˆstreaming responseï¼‰ï¼Œè¿™å¯¹äºå¤§è¯­è¨€æ¨¡å‹çš„å®æ—¶äº¤äº’ä½“éªŒè‡³å…³é‡è¦ã€‚</p>
<pre><code class="hljs language-python" lang="python">payload = {
    <span class="hljs-string">"model"</span>: MODEL_ID,
    <span class="hljs-string">"messages"</span>: messages,
    <span class="hljs-string">"max_tokens"</span>: max_tokens,
    <span class="hljs-string">"stream"</span>: <span class="hljs-literal">True</span>
}

response = sagemaker_runtime.invoke_endpoint_with_response_stream(
    EndpointName=endpoint_name,
    ContentType=<span class="hljs-string">'application/json'</span>,
    Body=json.dumps(payload)
)

buffer = <span class="hljs-string">""</span>
<span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> response[<span class="hljs-string">'Body'</span>]:
    buffer += t[<span class="hljs-string">"PayloadPart"</span>][<span class="hljs-string">"Bytes"</span>].decode()
    last_idx = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> <span class="hljs-keyword">match</span> <span class="hljs-keyword">in</span> re.finditer(<span class="hljs-string">r'(^|\n)data:\s*({.+?})\n'</span>, buffer):
        <span class="hljs-keyword">try</span>:
            data = json.loads(<span class="hljs-keyword">match</span>.group(<span class="hljs-number">2</span>).strip())
            last_idx = <span class="hljs-keyword">match</span>.span()[<span class="hljs-number">1</span>]
            <span class="hljs-keyword">if</span> data[<span class="hljs-string">"choices"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"delta"</span>].get(<span class="hljs-string">"content"</span>, <span class="hljs-literal">None</span>):
                <span class="hljs-built_in">print</span>(data[<span class="hljs-string">"choices"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"delta"</span>][<span class="hljs-string">"content"</span>], end=<span class="hljs-string">""</span>, flush=<span class="hljs-literal">True</span>)
        <span class="hljs-keyword">except</span> (json.JSONDecodeError, KeyError, IndexError) <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">pass</span>
    buffer = buffer[last_idx:]
<span class="hljs-built_in">print</span>()
</code></pre>
<p>è°ƒç”¨ä»£ç ä½¿ç”¨Â <code>invoke_endpoint_with_response_stream</code>Â æ–¹æ³•å®ç°æµå¼è°ƒç”¨ï¼Œå“åº”æ•°æ®ä»¥ Server-Sent Eventsï¼ˆSSEï¼‰æ ¼å¼è¿”å›ã€‚<strong>ä»£ç ä¸­çš„ç¼“å†²å’Œè§£æé€»è¾‘å¤„ç†äº†æµå¼ä¼ è¾“ä¸­å¯èƒ½å‡ºç°çš„éƒ¨åˆ†æ•°æ®å’Œåˆ†åŒ…é—®é¢˜</strong>ï¼Œç¡®ä¿æ¯ä¸ªå®Œæ•´çš„ JSON å¯¹è±¡éƒ½èƒ½è¢«æ­£ç¡®è§£æã€‚</p>
<p>è¿™ä¸ªéƒ¨ç½²æ–¹æ¡ˆå°†å¼€æºçš„ Ollama ç”Ÿæ€ä¸äºšé©¬é€Šäº‘ç§‘æŠ€æ‰˜ç®¡æœåŠ¡æœ‰æœºç»“åˆã€‚é€šè¿‡ Amazon CodeBuild å®ç°äº† ARM æ¶æ„é•œåƒçš„è‡ªåŠ¨åŒ–æ„å»ºï¼Œé€šè¿‡ Amazon SageMaker è·å¾—äº†ä¼ä¸šçº§çš„æ¨¡å‹æ‰˜ç®¡èƒ½åŠ›ï¼Œé€šè¿‡ Graviton å®ä¾‹å®ç°äº†æˆæœ¬ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-10">2.3äºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½åŒºï¼ˆåŒ—äº¬/å®å¤åŒºåŸŸï¼‰éƒ¨ç½²é€‰æ‹©</h3>
<p>åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½åŒºæ–°ä¸Šçº¿äº†Â Graviton4Â æœºå‹ï¼Œä¸Amazon Graviton3å¤„ç†å™¨ç›¸æ¯”ï¼ŒAmazon Graviton4æ€§èƒ½æå‡30%ï¼Œç‹¬ç«‹æ ¸å¿ƒæ•°å¢åŠ 50%ï¼Œå†…å­˜å¸¦å®½æå‡75%ã€‚å¯ä»¥åœ¨EC2 ä¸Šé€‰æ‹© Graviton 3 å’Œ Graviton 4 å®ä¾‹éƒ¨ç½²ä¸Šè¿°å®¹å™¨è¿›è¡Œæ¨¡å‹æ¨ç†ã€‚å¯¹äºAPI æ¥å…¥ç«¯ï¼ŒåŒæ ·å¯ä»¥é‡‡ç”¨äºšé©¬é€Šäº‘ç§‘æŠ€æ¨å‡ºçš„Static BGP(S-BGP)æœåŠ¡ï¼Œæ˜¯ä¸“ä¸ºä¸­å›½åŒºåŸŸ(åŒ—äº¬å’Œå®å¤)è®¾è®¡çš„ä¸€ç§æˆæœ¬ä¼˜åŒ–å‹æ•°æ®ä¼ è¾“æœåŠ¡ã€‚é€šè¿‡è¿™é¡¹æœåŠ¡,æˆ‘ä»¬è‡´åŠ›äºå¸®åŠ©å®¢æˆ·åœ¨ä¿è¯ç½‘ç»œæ€§èƒ½çš„åŒæ—¶æ˜¾è‘—é™ä½æ•°æ®ä¼ è¾“æˆæœ¬ã€‚ S-BGP å¯ä¸ºç¬¦åˆæ¡ä»¶çš„å®¢æˆ·æä¾›é«˜è¾¾20%ï½70%çš„æ•°æ®ä¼ è¾“è´¹ç”¨èŠ‚çœã€‚</p>
<h2 data-id="heading-11">3. åº”ç”¨åˆ†æ</h2>
<h3 data-id="heading-12">3.1é€‚ç”¨åœºæ™¯ï¼šç”¨è½»é‡æ¨¡å‹è§£å†³é«˜é¢‘ç®€å•ä»»åŠ¡</h3>
<p>åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œ<strong>å¹¶éæ‰€æœ‰ä»»åŠ¡éƒ½éœ€è¦éƒ¨ç½²å‚æ•°é‡æ•°ç™¾äº¿çš„å¤§å‹æ¨¡å‹</strong>ã€‚å¾ˆå¤šä¼ä¸šé¢ä¸´çš„é—®é¢˜æ˜¯ï¼š70%-80% çš„ AI åº”ç”¨åœºæ™¯å…¶å®æ˜¯ç›¸å¯¹ç®€å•å’Œæ ‡å‡†åŒ–çš„ä»»åŠ¡ï¼Œä½†å¦‚æœä½¿ç”¨å¤§å‹æ¨¡å‹æ¥å¤„ç†è¿™äº›åœºæ™¯ï¼Œæˆæœ¬ä¼šæ˜¾è‘—å¢åŠ ã€‚Qwen3 0.6B æ­£æ˜¯ä¸ºè¿™ç±»é«˜é¢‘ä½†ç›¸å¯¹ç®€å•çš„ä»»åŠ¡è€Œè®¾è®¡çš„ç†æƒ³é€‰æ‹©ï¼Œå®ƒèƒ½å¤Ÿåœ¨ä¿è¯ä»»åŠ¡å®Œæˆè´¨é‡çš„å‰æä¸‹ï¼Œå°†æ¨ç†æˆæœ¬é™ä½åˆ°å¤§å‹æ¨¡å‹çš„å‡ åˆ†ä¹‹ä¸€ç”šè‡³ååˆ†ä¹‹ä¸€ã€‚</p>
<p><strong>å…¸å‹çš„é€‚ç”¨åœºæ™¯åŒ…æ‹¬</strong>ï¼šå·¥å•çš„è‡ªåŠ¨åˆ†ç±»ä¸è·¯ç”±ã€å®æ—¶æ–‡æœ¬ç¿»è¯‘ã€å…³é”®ä¿¡æ¯æå–ã€ç”µå•†è¯„è®ºçš„æƒ…æ„Ÿåˆ†æç­‰ã€‚è¿™äº›ä»»åŠ¡çš„å…±åŒç‰¹ç‚¹æ˜¯é—®é¢˜åŸŸç›¸å¯¹æ˜ç¡®ï¼Œä¸éœ€è¦å¤æ‚çš„æ¨ç†é“¾ï¼Œä½†å¯¹å“åº”é€Ÿåº¦å’Œæˆæœ¬æ•æ„Ÿåº¦é«˜ã€‚ä¾‹å¦‚ï¼Œä¼ä¸šå¯ä»¥ä½¿ç”¨è¯¥æ¨¡å‹å¯¹æ¯å¤©æ•°ä¸‡æ¡å®¢æœå·¥å•è¿›è¡Œè‡ªåŠ¨åˆ†ç±»å’Œä¼˜å…ˆçº§åˆ¤å®šï¼Œå°†æŠ€æœ¯é—®é¢˜è·¯ç”±è‡³æŠ€æœ¯å›¢é˜Ÿã€è´¦åŠ¡é—®é¢˜è·¯ç”±è‡³è´¢åŠ¡å›¢é˜Ÿï¼›æˆ–æ˜¯å¯¹è·¨å¢ƒç”µå•†å¹³å°çš„å¤šè¯­è¨€å•†å“è¯„è®ºè¿›è¡Œå®æ—¶ç¿»è¯‘å’Œæƒ…æ„Ÿåˆ†æï¼Œå¸®åŠ©å•†å®¶å¿«é€Ÿäº†è§£å›½é™…ç”¨æˆ·åé¦ˆï¼›åˆæˆ–æ˜¯ä»å¤§é‡åˆåŒæ–‡æ¡£ä¸­è‡ªåŠ¨æå–å…³é”®æ¡æ¬¾ã€æ—¥æœŸã€é‡‘é¢ç­‰ç»“æ„åŒ–ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-13">3.2æ€§èƒ½ä¸æˆæœ¬å¯¹æ¯”</h3>
<p>æˆ‘ä»¬åœ¨å¤šä¸ª Amazon EC2 å®ä¾‹ç±»å‹ä¸Šå¯¹ Qwen3 0.6B æ¨¡å‹è¿›è¡Œäº†å…¨é¢çš„æ€§èƒ½æµ‹è¯•ã€‚æµ‹è¯•æ¡ä»¶ä¸º input tokens å’Œ output tokens å‡ä¸º 200 æ—¶çš„æ€§èƒ½è¡¨ç°ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9accb5310a14c879ce8824d556aaef8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767252240&amp;x-signature=4SsThl8FAfxWkvAJnFL9EcCcIC8%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ä»æµ‹è¯•æ•°æ®å¯ä»¥æ¸…æ¥šçœ‹åˆ° Graviton æ¶æ„çš„æˆæœ¬ä¼˜åŠ¿</strong>ã€‚åœ¨ç›¸åŒé…ç½®ï¼ˆ4 vCPUï¼Œ8 GiB å†…å­˜ï¼‰ä¸‹ï¼ŒGraviton 3 c7g.xlarge ç›¸æ¯” Intel c7i.xlarge çš„è¾“å‡ºé€Ÿåº¦æå‡çº¦ 28%ï¼ˆ32.65 vs 25.53 tokens/ç§’ï¼‰ï¼Œç«¯åˆ°ç«¯å»¶è¿Ÿé™ä½çº¦ 14%ï¼Œè€Œå•æ¬¡è¯·æ±‚æˆæœ¬ä¸‹é™çº¦ 30%ã€‚æœ€æ–°çš„ Graviton 4 c8g.xlarge å®ä¾‹æ€§èƒ½æ›´åŠ å‡ºè‰²ï¼Œè¾“å‡ºé€Ÿåº¦è¾¾åˆ° 36.22 tokens/ç§’ï¼Œæ¯” Intel å®ä¾‹å¿«çº¦ 42%ï¼Œç«¯åˆ°ç«¯å»¶è¿Ÿä»… 7.47 ç§’ï¼Œå•æ¬¡è¯·æ±‚æˆæœ¬è¿›ä¸€æ­¥é™è‡³ $0.000333ã€‚</p>
<h2 data-id="heading-14">4. æ€»ç»“</h2>
<p>Amazon Graviton å¤„ç†å™¨ä¸ Qwen3 0.6B æ¨¡å‹çš„ç»“åˆä¸ºä¼ä¸šæä¾›äº†ä¸€ä¸ªæå…·æ€§ä»·æ¯”çš„ LLM æ¨ç†è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡SageMakerå’ŒOllamaå¯å®ç°ä¸€é”®éƒ¨ç½²ï¼Œæ”¯æŒå¤šç§åº”ç”¨åœºæ™¯ã€‚è¿™ä¸€æŠ€æœ¯ç»„åˆä¸ä»…æ»¡è¶³å½“å‰è½»é‡çº§AIåº”ç”¨éœ€æ±‚ï¼Œè¿˜ä¸ºä¼ä¸šæ„å»ºæˆæœ¬å¯æ§ã€æ€§èƒ½ä¼˜å¼‚çš„æ™ºèƒ½åŒ–æœåŠ¡æä¾›äº†ç†æƒ³çš„æŠ€æœ¯åŸºç¡€ï¼Œç‰¹åˆ«é€‚åˆå¯¹æˆæœ¬æ•æ„Ÿä¸”éœ€è¦å¿«é€Ÿå“åº”çš„ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ã€‚åŸºäºå®é™…æµ‹è¯•éªŒè¯ï¼ŒGraviton 4 å®ä¾‹ç›¸æ¯”åŒé…ç½® Intel å®ä¾‹åœ¨æ¨ç†ååé‡ä¸Šæå‡ 42%ï¼Œå•æ¬¡è¯·æ±‚æˆæœ¬é™ä½ 31%ã€‚åœ¨å·¥å•åˆ†ç±»ã€æƒ…æ„Ÿåˆ†æã€å…³é”®ä¿¡æ¯æå–ã€è½»é‡çº§ç¿»è¯‘ç­‰ä¸éœ€è¦å¤æ‚å¤šè½®æ¨ç†çš„åœºæ™¯ä¸‹ï¼ŒGraviton CPU å®ä¾‹æä¾›äº†é™¤ GPU ä¹‹å¤–çš„å¦ä¸€ç§æ¨ç†æ–¹æ¡ˆé€‰æ‹©ï¼Œä¸ºä¼ä¸šçš„æŠ€æœ¯é€‰å‹æä¾›äº†æ›´å¤šçµæ´»æ€§ã€‚</p>
<p><strong>å‚è€ƒæ–‡æ¡£</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Fblogs%2Fmachine-learning%2Freduce-amazon-sagemaker-inference-cost-with-aws-graviton%2F" target="_blank" title="https://aws.amazon.com/cn/blogs/machine-learning/reduce-amazon-sagemaker-inference-cost-with-aws-graviton/" ref="nofollow noopener noreferrer">aws.amazon.com/cn/blogs/maâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.aws.amazon.com%2Fsagemaker%2Flatest%2Fdg%2Frealtime-endpoints.html" target="_blank" title="https://docs.aws.amazon.com/sagemaker/latest/dg/realtime-endpoints.html" ref="nofollow noopener noreferrer">docs.aws.amazon.com/sagemaker/lâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.aws.amazon.com%2Fsagemaker%2Flatest%2Fdg%2Frealtime-endpoints-graviton.html" target="_blank" title="https://docs.aws.amazon.com/sagemaker/latest/dg/realtime-endpoints-graviton.html" ref="nofollow noopener noreferrer">docs.aws.amazon.com/sagemaker/lâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2FQwen%2FQwen3-0.6B%23best-practices" target="_blank" title="https://huggingface.co/Qwen/Qwen3-0.6B#best-practices" ref="nofollow noopener noreferrer">huggingface.co/Qwen/Qwen3-â€¦</a></p>
<p>*å‰è¿°ç‰¹å®šäºšé©¬é€Šäº‘ç§‘æŠ€ç”Ÿæˆå¼äººå·¥æ™ºèƒ½ç›¸å…³çš„æœåŠ¡ç›®å‰åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€æµ·å¤–åŒºåŸŸå¯ç”¨ã€‚äºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½åŒºåŸŸç›¸å…³äº‘æœåŠ¡ç”±è¥¿äº‘æ•°æ®å’Œå…‰ç¯æ–°ç½‘è¿è¥ï¼Œå…·ä½“ä¿¡æ¯ä»¥ä¸­å›½åŒºåŸŸå®˜ç½‘ä¸ºå‡†ã€‚</p>
<p><strong>æœ¬ç¯‡ä½œè€…</strong>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb50bc710a1847c3a709c8b6afd56f88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767252240&amp;x-signature=7yeUc2cZUGkD%2Buunx6l%2FmsiL5vw%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>æœ¬æœŸæœ€æ–°å®éªŒä¸ºã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fevents.amazoncloud.cn%2Flabs%2Fcloudlab-graviton-based-vector-database%3Fvisitfrom%3D3P_Juejintail_1225%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejintail_1225" target="_blank" title="https://events.amazoncloud.cn/labs/cloudlab-graviton-based-vector-database?visitfrom=3P_Juejintail_1225&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejintail_1225" ref="nofollow noopener noreferrer">åˆ›æ–°åŸºçŸ³ â€”â€” åŸºäº Graviton æ„å»ºå·®å¼‚åŒ–ç”Ÿæˆå¼AIå‘é‡æ•°æ®åº“</a>ã€‹</p>
<p>âœ¨ åœ¨æœ¬æ¬¡å®éªŒä¸­ï¼Œä½ å¯ä»¥åœ¨åŸºäº Graviton çš„ EC2 å®ä¾‹ä¸Šè½»æ¾å¯åŠ¨ Milvus å‘é‡æ•°æ®åº“ï¼ŒåŠ é€Ÿæ‚¨çš„ç”Ÿæˆå¼ AI åº”ç”¨ã€‚åŸºäº Graviton çš„ EC2 å®ä¾‹ä¸ºæ‚¨æä¾›æä½³æ€§ä»·æ¯”çš„å‘é‡æ•°æ®åº“éƒ¨ç½²é€‰é¡¹ã€‚</p>
<p>ğŸ“± å³åˆ»åœ¨äº‘ä¸Šæ¢ç´¢å®éªŒå®¤ï¼Œå¼€å¯æ„å»ºå¼€å‘è€…æ¢ç´¢ä¹‹æ—…å§ï¼</p>
<p>â©[<a href="https://link.juejin.cn?target=https%3A%2F%2Fevents.amazoncloud.cn%2Flabs%2Fcloudlab-graviton-based-vector-database%3Fvisitfrom%3D3P_Juejintail_1225%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejintail_1225" target="_blank" title="https://events.amazoncloud.cn/labs/cloudlab-graviton-based-vector-database?visitfrom=3P_Juejintail_1225&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejintail_1225" ref="nofollow noopener noreferrer">ç‚¹å‡»è¿›å…¥å®éªŒ</a>] æ„å»ºæ— é™, æ¢ç´¢å¯ç¨‹ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Z-Image-Turboæœ¬åœ°éƒ¨ç½²ï¼ˆé™„Mac Windowsç‰ˆæ•™ç¨‹&æºç ï¼‰]]></title>    <link>https://juejin.cn/post/7587740546954084392</link>    <guid>https://juejin.cn/post/7587740546954084392</guid>    <pubDate>2025-12-26T07:47:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587740546954084392" data-draft-id="7587688765188816896" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Z-Image-Turboæœ¬åœ°éƒ¨ç½²ï¼ˆé™„Mac Windowsç‰ˆæ•™ç¨‹&amp;æºç ï¼‰"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-26T07:47:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¸…é£å¤œåŠ"/> <meta itemprop="url" content="https://juejin.cn/user/1398234520238839"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Z-Image-Turboæœ¬åœ°éƒ¨ç½²ï¼ˆé™„Mac Windowsç‰ˆæ•™ç¨‹&amp;æºç ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1398234520238839/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¸…é£å¤œåŠ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T07:47:24.000Z" title="Fri Dec 26 2025 07:47:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><p>æœ€è¿‘é˜¿é‡Œå¼€æºçš„æ–‡ç”Ÿå›¾å°æ¨¡å‹Z-image-Turboå¼ºçš„å¯æ€•ï¼Œå‚æ•°é‡åªæœ‰6Bï¼Œå†…å­˜å ç”¨ä»…ä»…20å¤šGï¼Œå¾ˆé€‚åˆåœ¨ä¸ªäººç”µè„‘ä¸Šåšæœ¬åœ°éƒ¨ç½²ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/068de9f76f68462583212f58d1675203~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF6aOO5aSc5Y2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767340044&amp;x-signature=mQhWJ8n%2F%2B8SsR20XpH8DH7R8HD4%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0295000b8b3b4bfb913857785d612581~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF6aOO5aSc5Y2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767340044&amp;x-signature=gWXWItVeJ91rvffTcwxhXn0Lido%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2FTongyi-MAI%2FZ-Image-Turbo" target="_blank" title="https://huggingface.co/Tongyi-MAI/Z-Image-Turbo" ref="nofollow noopener noreferrer">huggingface.co/Tongyi-MAI/â€¦</a></p>
</blockquote>
<p>ä¸è¿‡å¾ˆå¤šäººè¯´è‡ªå·±çš„ç¬”è®°æœ¬æ²¡æ˜¾å¡è·‘ä¸åŠ¨ï¼Œæƒ³ç”¨Z-image-Turbo GGUFé‡åŒ–ç‰ˆï¼Œä½†æ˜¯åˆå¿…é¡»æ­é…ComfyUIï¼Œå­¦ä¹ èµ·æ¥åˆæ¯”è¾ƒéº»çƒ¦ã€‚</p>
<p>äºæ˜¯æœ€è¿‘æˆ‘ç ”ç©¶äº†ä¸€ä¸‹ä¼˜åŒ–åŠæ³•ï¼Œå¯ä»¥åœ¨æ²¡æœ‰ç‹¬æ˜¾çš„ç”µè„‘ä¸Šä½¿ç”¨ï¼Œå¹¶ä¸”èƒ½ä¿è¯å›¾ç‰‡ç”Ÿæˆè´¨é‡ï¼Œæ¯•ç«Ÿæˆ‘ä¹Ÿåªæœ‰ä¸€å°Macç¬”è®°æœ¬ã€‚æˆ‘çš„ç”µè„‘é…ç½®æ˜¯M1 Max 64G+2Tï¼ŒæŒ‰ç…§Z-image-Turboçš„æ–‡æ¡£æ¥çœ‹ï¼Œæœ¬åœ°è·‘è¿™ä¸ªæ¨¡å‹å¤„å¤„æœ‰ä½™ï¼Œäº‹å®ä¸Šç¡®å®å¦‚æ­¤ï¼Œä»¥ç”Ÿæˆ1024x1024åˆ†è¾¨ç‡çš„å›¾ç‰‡ä¸ºä¾‹ï¼Œæœ€ç»ˆå†…å­˜å ç”¨ç¨³å®šåœ¨32Gå·¦å³ï¼Œå¦‚æœä½ çš„å†…å­˜æ˜¯32Gçš„ï¼Œé‚£ä¹Ÿå¤Ÿç”¨äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5145ce5c94f34de08265db4d33430742~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF6aOO5aSc5Y2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767340044&amp;x-signature=YXsoX9Mzhl50rSmsN0FQmA1Gs4Q%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b6f0e558a9f480d99db08755b3fba9b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF6aOO5aSc5Y2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767340044&amp;x-signature=X4OdkAat6pYKI3P77RKXWJC4%2FCM%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-0">ç”Ÿæˆæ•ˆæœ</h3>
<p>è‡³äºç”Ÿæˆæ•ˆæœï¼Œæˆ‘è§‰å¾—è¿˜ä¸é”™ï¼Œæœ‰äº›å›¾ç‰‡ç”šè‡³èƒ½ä»¥å‡ä¹±çœŸï¼Œå…ˆç»™å¤§å®¶çœ‹çœ‹æˆ‘çš„ä½œå“ï¼ˆå¤šå›¾é¢„è­¦ï¼‰ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82aca3ea70944e9cb4c37c01f45e7530~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF6aOO5aSc5Y2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767340044&amp;x-signature=ALX9zVSIVifDsgT3dutMXNVS0pM%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32bf2803d9c5402a8ac899a3da98941c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF6aOO5aSc5Y2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767340044&amp;x-signature=UMX%2BiDf189Ik1qh5sK7JREtoIsU%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d57c0c9ecb104d649dced4c7eb01eb9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF6aOO5aSc5Y2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767340044&amp;x-signature=dbeVuCzhDWCbf9d3lKitLZ5Y3gw%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/283315767baf464b83fef31e67ec74f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF6aOO5aSc5Y2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767340044&amp;x-signature=rnrnCVtPkNEX1brsWd0IhZpRDok%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4801e84bb5d643e7871b1479c83b83e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF6aOO5aSc5Y2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767340044&amp;x-signature=Ig1yuSnOnJTjdudDiocNPCOtZ6Q%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a39342c1de5418789f30eb541e73ff0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF6aOO5aSc5Y2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767340044&amp;x-signature=JGt3XwJOEQnObZywKzu2ZWzWOYA%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc11969193734f2a9c85fa89771c7777~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF6aOO5aSc5Y2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767340044&amp;x-signature=RcLmyQ5UgylrKHAPOscmk49LHEU%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5547fe16f54455f8db75185361b9b87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF6aOO5aSc5Y2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767340044&amp;x-signature=vN657wkwZjQ95ViTkdk5NPun%2FCs%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5262e8c34844bfabe3560708d7aa067~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF6aOO5aSc5Y2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767340044&amp;x-signature=Fz9uZxPghMos%2B%2F10E78dVK1MwjI%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8546b06455be41da8ca50fa46c12bbc6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF6aOO5aSc5Y2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767340044&amp;x-signature=oDrbVCdcj9rHRXjlzmt7pQZCTrI%3D" alt="image.png" loading="lazy"/></p>
<p>åŸºæœ¬å„ç§åœºæ™¯éƒ½å°è¯•äº†ä¸€éï¼Œè€ƒè™‘åˆ°åªæ˜¯ä¸€ä¸ª6Bçš„å°æ¨¡å‹ï¼Œæ•ˆæœå¯è°“æ˜¯å¾ˆæƒŠè‰³ï¼Œç”šè‡³æœ‰å›¾ç‰‡è´¨é‡ä¸è¾“ä¸€äº›ä»˜è´¹çš„AIå¹³å°ã€‚æœ¬åœ°è°ƒè¯•æˆåŠŸåï¼Œä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œç”¨Vueæ›¿æ¢äº†Gradioåšäº†ä¸€ä¸ªWebUIï¼Œå¹¶ä¸”æŠŠè°ƒèŠ‚å‚æ•°éƒ½å¼€æ”¾äº†å‡ºæ¥ï¼Œè¿™æ ·æ‰“å¼€æµè§ˆå™¨å°±å¯ä»¥æ›´åŠ ç²¾å‡†çš„æ§åˆ¶ç”Ÿæˆæ•ˆæœï¼Œç›®å‰æ”¯æŒè°ƒèŠ‚å¦‚ä¸‹å‚æ•°ï¼š</p>
<ul>
<li>æ­£é¢æç¤ºè¯</li>
<li>è´Ÿé¢æç¤ºè¯</li>
<li>è¿­ä»£æ­¥æ•°</li>
<li>å¼•å¯¼ç³»æ•°ï¼ˆCFGï¼‰</li>
<li>å›¾ç‰‡å°ºå¯¸</li>
<li>ç§å­æ¨¡å¼</li>
<li>LoRAè‰²å½©ã€å¼ºåº¦</li>
<li>ç¡¬ä»¶è‡ªåŠ¨æ£€æµ‹ï¼ˆcudaã€mpsã€cpuï¼‰</li>
<li>å›¾ç‰‡è¾“å‡ºæ ¼å¼ï¼ˆwebpã€pngã€jpegï¼‰</li>
<li>å†å²è®°å½•</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/920de81c40014f90ac4c0a702c77afd8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF6aOO5aSc5Y2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767340044&amp;x-signature=q1emVHjfbztSC5eqKZc%2FT6qR%2FV4%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-1">è¸©å‘è®°å½•</h3>
<p>å…¶å®åœ¨æœ¬åœ°éƒ¨ç½²çš„è¿‡ç¨‹ä¸­ä¹Ÿè¸©äº†ä¸å°‘å‘ï¼Œè¿™é‡Œåˆ—å‡ºæ¥è®©å¤§å®¶é¿é›·:</p>
<ol>
<li><strong>å†…å­˜å ç”¨å¼‚å¸¸ï¼Œå¯¼è‡´ç¨‹åºå´©æºƒ</strong></li>
<li><strong>ç”»è´¨æ¨¡ç³Šï¼Œæˆåƒæ•ˆæœå·®</strong></li>
<li><strong>è‰²å½©å¤±çœŸï¼Œå›¾ç‰‡æ¯«æ— è´¨æ„Ÿ</strong></li>
</ol>
<p>å…³äºå†…å­˜å ç”¨å¼‚å¸¸é—®é¢˜ï¼Œç”±äºæ²¡ç‹¬æ˜¾ä¸èƒ½ç”¨cudaæ¨¡å¼ï¼Œæ¨¡å‹é»˜è®¤ç”¨cpuæ¥è·‘ï¼Œç”Ÿæˆä¸€å¼ 512x512çš„å›¾ç‰‡å°±çˆ†å†…å­˜ï¼Œå†…å­˜å ç”¨è¾¾åˆ°äº†59Gï¼Œç›´æ¥ç»™è¿›ç¨‹æ€æ‰äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd4e731d01e74d81b6dd29291ca34912~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF6aOO5aSc5Y2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767340044&amp;x-signature=vjKzYOk1UEuTFJH0V5HHYkmUlxQ%3D" alt="image.png" loading="lazy"/></p>
<p>å¥½åœ¨è‹¹æœæœ€æ–°çš„Mç³»åˆ—èŠ¯ç‰‡é‡‡ç”¨å†…å­˜å’Œæ˜¾å­˜å…±ç”¨çš„æ¨¡å¼ï¼Œæ¨å‡ºäº†mpsç”¨äºGPUåŠ é€Ÿï¼ˆ<strong>Metal Performance Shadersï¼Œç±»ä¼¼äºè‹±ä¼Ÿè¾¾çš„cuda</strong>ï¼‰ï¼Œäºæ˜¯é’ˆå¯¹Mç³»åˆ—çš„èŠ¯ç‰‡ï¼Œæˆ‘å°†torchçš„æ¨ç†æ¨¡å¼æ”¹æˆäº†mpsã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">if</span>Â torch.cuda.is_available():  
Â  Â  Â  Â Â <span class="hljs-keyword">return</span><span class="hljs-string">"cuda"</span>  
Â  Â Â <span class="hljs-keyword">elif</span>Â torch.backends.mps.is_available():  
Â  Â  Â  Â Â <span class="hljs-keyword">return</span><span class="hljs-string">"mps"</span>Â   
Â  Â Â <span class="hljs-keyword">else</span>:  
Â  Â  Â  Â Â <span class="hljs-keyword">return</span><span class="hljs-string">"cpu"</span>
</code></pre>
<p>è¿™ä¸‹è§£å†³äº†çˆ†å†…å­˜çš„é—®é¢˜ï¼Œä½†æ˜¯å†…å­˜å ç”¨è¿˜æ˜¯å¾ˆé«˜ï¼Œç”µè„‘åˆå¡åˆå‘çƒ«ï¼Œç”Ÿæˆå›¾ç‰‡çš„æ—¶å€™åŸºæœ¬ä¸èƒ½å¹²å…¶ä»–äº‹ã€‚
åŸå› æ˜¯Z-Image-Turbo é»˜è®¤æ¨èä½¿ç”¨ FP16 åŠç²¾åº¦è¿›è¡Œæ¨ç†ï¼Œè¿™åœ¨ Nvdia æ˜¾å¡ï¼ˆcudaï¼‰ä¸Šè¡¨ç°æ¯”è¾ƒå¥½ï¼Œä½†åœ¨ Mac M ç³»åˆ—èŠ¯ç‰‡ï¼ˆmpsï¼‰ä¸Šï¼ŒFP16 ææ˜“çˆ†å†…å­˜ï¼Œä¸ºäº†ä¿è¯å¯ç”¨æ€§ï¼Œä¸å¾—ä¸ä½¿ç”¨FP32 å…¨ç²¾åº¦ï¼Œä½†åˆä¼šå¯¼è‡´æ˜¾å­˜å ç”¨ç¿»å€ä¸”æ¨ç†ç¼“æ…¢ã€‚</p>
<p>æœ€ç»ˆç»è¿‡ä¼˜åŒ–ï¼Œæˆ‘åˆ‡æ¢åˆ°äº† M èŠ¯ç‰‡åŸç”Ÿæ”¯æŒçš„ bfloat16 ç²¾åº¦ï¼Œå®ƒæ‹¥æœ‰ä¸ FP32 ç›¸åŒçš„åŠ¨æ€èŒƒå›´ï¼ˆå½»åº•è§£å†³æº¢å‡º/é»‘å±é—®é¢˜ï¼‰ï¼ŒåŒæ—¶ä¿æŒäº† 16 ä½çš„è½»é‡ä½“ç§¯ï¼Œ<strong>è¿™ä¸€æ”¹è¿›ä½¿æ˜¾å­˜å ç”¨ç›¸æ¯” FP32 å‡å°‘äº†ä¸€åŠï¼Œæ¨ç†é€Ÿåº¦æå‡äº†çº¦ 2 å€</strong>ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">if</span>Â device ==Â <span class="hljs-string">"cuda"</span>:  
Â  Â  Â  Â Â <span class="hljs-comment"># NVIDIA æ˜¾å¡: FP16 æ€§èƒ½æœ€ä½³ä¸”æ˜¾å­˜å ç”¨ä½  </span>
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â torch.float16  
Â  Â Â <span class="hljs-keyword">elif</span>Â device ==Â <span class="hljs-string">"mps"</span>:  
Â  Â  Â  Â Â <span class="hljs-comment"># Apple Silicon: å¿…é¡»ä½¿ç”¨ Bfloat16  </span>
Â  Â  Â  Â Â <span class="hljs-comment"># åŸå› 1: é¿å… FP16 çš„æº¢å‡º(é»‘å±)é—®é¢˜  </span>
Â  Â  Â  Â Â <span class="hljs-comment"># åŸå› 2: ç›¸æ¯” FP32 èŠ‚çœä¸€åŠæ˜¾å­˜ï¼Œé€Ÿåº¦ç¿»å€  </span>
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â torch.bfloat16  
Â  Â Â <span class="hljs-keyword">else</span>:  
Â  Â  Â  Â Â <span class="hljs-comment"># CPU: å…œåº•ä½¿ç”¨ FP32ï¼Œå…¼å®¹æ€§æœ€å¥½  </span>
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â torch.float32
</code></pre>
<p>æˆ‘åšäº†ä¸€ä¸‹æµ‹è¯•ï¼Œä»¥æˆ‘çš„M1 Max 64Gå†…å­˜ä¸ºä¾‹ï¼š</p>
<ul>
<li><strong>ç”Ÿæˆä¸€å¼ 1024x1024çš„å›¾ç‰‡ï¼Œå¤§çº¦180ç§’ï¼Œå†…å­˜ç¨³å®šå ç”¨çº¦33G</strong></li>
<li><strong>ç”Ÿæˆä¸€å¼ 512x512çš„å›¾ç‰‡ï¼Œ å¤§çº¦30ç§’ï¼Œå†…å­˜ç¨³å®šå ç”¨çº¦29G</strong></li>
</ul>
<p>å³ä½¿è§£å†³äº†å†…å­˜å ç”¨å¼‚å¸¸é—®é¢˜ï¼Œä½†ç°åœ¨ç”Ÿæˆçš„å›¾ç‰‡è´¨é‡å’Œå®˜æ–¹å®£ä¼ çš„è¿˜æ˜¯æ²¡æ³•æ¯”ï¼Œè™½ç„¶åˆ†è¾¨ç‡æ˜¯è¾¾åˆ°äº†è¦æ±‚ï¼Œä¸è¿‡æ•´ä½“æ¯”è¾ƒæ¨¡ç³Šï¼Œé”åº¦ç¼ºå¤±ï¼Œè€Œä¸”è‰²å½©å’Œå…‰ç…§éƒ½ä¸å¯¹ï¼ŒåŸºæœ¬æ²¡æ³•çœ‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32f76771920a43b8bac9ca90fe40153f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF6aOO5aSc5Y2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767340044&amp;x-signature=9rZlxufRFQy0oG5z0bhYR38oOMI%3D" alt="8AE54D78-0007-4AEF-842D-84E79F87A4A7.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/438db1adb2bf4254bada96867c502a2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF6aOO5aSc5Y2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767340044&amp;x-signature=wf5EUeHgMdaHG6DjVh93IlpDFRc%3D" alt="1D3330C5-2F55-4D46-97D2-D4FD0B0E9F6D.png" loading="lazy"/></p>
<p>åæ¥æŸ¥äº†èµ„æ–™ï¼Œå…¶å®è¿™é‡Œè¦ç”¨åˆ°2ä¸ªä¸œè¥¿ï¼šVAEï¼ˆVariational Autoencoderï¼‰ å’Œ LoRAï¼ˆLow-Rank Adaptationï¼‰</p>
<blockquote>
<p>å…³äºVAE å’ŒÂ LoRA çš„ä»‹ç»ç”±äºç¯‡å¹…è¾ƒé•¿è¿™é‡Œä¸åšè§£é‡Šï¼Œå¯ä»¥ç®€å•ç†è§£ä¸º:</p>
</blockquote>
<p><strong>VAE</strong>ï¼šæ˜¯<strong>æ»¤é•œ/ä¿®å›¾å¸ˆ</strong><br/>
<strong>LoRA</strong>ï¼šæ˜¯<strong>é£æ ¼åŒ…/çš®è‚¤</strong></p>
<ul>
<li>VAEç”¨æ¥è§£å†³ç”»é¢æ¨¡ç³Šé—®é¢˜ï¼Œç”¨æ¥æå‡æ¸…æ™°åº¦å’Œé”åº¦</li>
</ul>
<pre><code class="hljs language-python" lang="python">def_apply_optimizations(self):  
Â  Â  Â  Â Â <span class="hljs-string">"""æ ¹æ®ç¡¬ä»¶ç±»å‹åº”ç”¨æ˜¾å­˜å’Œç”»è´¨ä¼˜åŒ–"""</span>  
Â  Â  Â  Â Â <span class="hljs-comment"># [é€šç”¨] VAE ç²¾åº¦ä¿®å¤: å¼ºåˆ¶ FP32 ä»¥è§£å†³æ¨¡ç³Šé—®é¢˜  </span>
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-built_in">hasattr</span>(self.pipe,Â <span class="hljs-string">"vae"</span>):  
Â  Â  Â  Â  Â  Â  self.pipe.vae.to(dtype=torch.float32)Â   
Â  Â  Â  Â  Â  Â  self.pipe.vae.config.force_upcast =Â <span class="hljs-literal">True</span>  
Â  Â  Â  Â  Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ‘ï¸ [Optim] VAE å·²åˆ‡æ¢è‡³ FP32 (ç”»è´¨é”åŒ–)"</span>)
</code></pre>
<ul>
<li>LoRAç”¨æ¥åšè‰²å½©å¢å¼ºï¼Œæå‡å½©é¥±å’Œåº¦å’Œå…‰å½±è´¨æ„Ÿã€‚</li>
</ul>
<pre><code class="hljs language-python" lang="python">defupdate_lora(self, enable, scale):  
Â  Â  Â  Â Â <span class="hljs-string">"""æ›´æ–° LoRA çŠ¶æ€ (å¯ç”¨/ç¦ç”¨/è°ƒæ•´å¼ºåº¦)"""</span>  
Â  Â  Â  Â Â <span class="hljs-comment"># æƒ…å†µA: ä»æ— åˆ°æœ‰ -&gt; ç›´æ¥åŠ è½½  </span>
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â enableÂ andnotÂ self.current_lora_applied:  
Â  Â  Â  Â  Â  Â  self.lora_merger.load_lora_weights(config.LORA_PATH, scale)Â   
Â  Â  Â  Â  Â  Â  self.current_lora_applied =Â <span class="hljs-literal">True</span>  
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span><span class="hljs-string">"LoRA å·²å¯ç”¨"</span>  
<span class="hljs-comment">#...</span>

</code></pre>
<p>æœ€ç»ˆä¾¿æ˜¯å¼€å§‹çœ‹åˆ°çš„æ•ˆæœï¼Œæ— è®ºæ˜¯ä»å†…å­˜å ç”¨ã€ç”Ÿæˆé€Ÿåº¦ã€ç”Ÿæˆè´¨é‡ä¸Šéƒ½æœ‰äº†æ˜æ˜¾çš„æå‡ï¼Œæ¸…æ™°åº¦å’Œè´¨æ„Ÿå’Œå®æ‹ç…§ç‰‡æ²¡åŒºåˆ«ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b969d852e524409a72c7fa5c2740b7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF6aOO5aSc5Y2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767340044&amp;x-signature=c%2BDGF50ie6ia839KWZS1LCwwfQM%3D" alt="E6488FDA-0FCA-40FB-B628-4251D93433E2.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a78abad19d594b82b408390478776826~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF6aOO5aSc5Y2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767340044&amp;x-signature=KU0fKG4frXtlB%2Fv2yI%2BYeB9Dnw4%3D" alt="0A3D0917-6B86-447F-AC01-5E6DAF8B2ADE.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7a36d078e0e4f818c07bbd62cec6554~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF6aOO5aSc5Y2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767340044&amp;x-signature=KDPBPMC%2Bw5DbG5mvLoT5NhrhN1I%3D" alt="F3E9F9C2-EC60-4F65-8586-7DC75E023D21.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd0559b17b474261a3f2d14bcc2b0ba0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF6aOO5aSc5Y2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767340044&amp;x-signature=2QKNx%2F7k%2B8y7ZuWtwH1yAlQKt7w%3D" alt="9605C0D4-EDF4-45B6-8C1E-EB5D895F02CB.png" loading="lazy"/></p>
<p>æµ‹è¯•è¿‡ç¨‹ä¸­ä¸ºäº†æ–¹ä¾¿ï¼Œå°±é»˜è®¤ç”¨äº†GradioåšUIï¼Œå®åœ¨æ˜¯å¤ªä¸‘äº†ï¼Œåé¢ç´¢æ€§æŠŠé¡¹ç›®é‡æ„äº†åŸºäºï¼ˆ<strong>FastAPI åç«¯ + Vue 3 å‰ç«¯ + SQLite æ•°æ®åº“</strong>ï¼‰ï¼Œå¦å¤–æ¢æˆäº†tailwind.cssï¼Œé¢œå€¼æå‡äº†ä¸€ä¸ªæ¡£æ¬¡</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58098eeedd244b03ba2116d50b478c4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF6aOO5aSc5Y2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767340044&amp;x-signature=%2B%2FDSaM7za5NaYCF5aJro2FCTdQk%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df2e8d1c864c4491b99c8037021f3f7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF6aOO5aSc5Y2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767340044&amp;x-signature=wwK1tDfbkRMhgG9Tr80QiM%2F9Q5U%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">å¦‚ä½•åœ¨æœ¬åœ°éƒ¨ç½²ï¼Ÿ</h3>
<p>ä»¥Macç”µè„‘ä¸ºä¾‹</p>
<p>1.è·å–æœ¬é¡¹ç›®æºä»£ç </p>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fratszhu%2FZ-Image-Turbo-Carto" target="_blank" title="https://github.com/ratszhu/Z-Image-Turbo-Carto" ref="nofollow noopener noreferrer">github.com/ratszhu/Z-Iâ€¦</a></p>
</blockquote>
<p>2.ç¯å¢ƒå‡†å¤‡Â  Â </p>
<ul>
<li>èŠ¯ç‰‡ï¼šApple M1 / M2 / M3 ç³»åˆ—ï¼ˆPro/Max/Ultra ä½“éªŒæ›´ä½³ï¼‰Â  Â </li>
<li>å†…å­˜ï¼šè‡³å°‘ 16GBï¼ˆæ¨è 32GB ä»¥ä¸Šï¼‰Â  Â </li>
<li>ç¡¬ç›˜ï¼šé¢„ç•™ 60GB ä»¥ä¸Šç©ºé—´Â  Â </li>
<li>Pythonç¯å¢ƒï¼šå»ºè®® Python 3.10 æˆ– 3.11 (æš‚ä¸æ”¯æŒ 3.13)</li>
</ul>
<p>3.å®‰è£…ä¾èµ–</p>
<p>æ¨èä½¿ç”¨ requirements.txt ä¸€é”®å®‰è£…æ‰€æœ‰ä¾èµ–ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">pip install -r requirements.txt

</code></pre>
<p>æˆ–è€…æ‰‹åŠ¨å®‰è£…ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">pip install torch torchvision torchaudio  
pip install gradio transformers accelerate protobuf sentencepiece safetensors huggingface_hub  
<span class="hljs-meta prompt_">#</span><span class="bash">Â å®‰è£… Diffusers (å¼€å‘ç‰ˆ)</span>  
pip install git+https://github.com/huggingface/diffusers.git

pip install fastapi uvicorn python-multipart aiofiles websockets

</code></pre>
<p>4.æ¨¡å‹å‡†å¤‡
è¯·ç¡®ä¿é¡¹ç›®æ ¹ç›®å½•ä¸‹æœ‰ä»¥ä¸‹æ–‡ä»¶/æ–‡ä»¶å¤¹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31cdc9012b8d4fc6b9b7d102df84b077~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF6aOO5aSc5Y2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767340044&amp;x-signature=IxYkpGM4vC%2B28RL45oSUNc3o7Sk%3D" alt="image.png" loading="lazy"/></p>
<p>5.è¿è¡Œåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œï¼š</p>
<pre><code class="hljs language-shell" lang="shell">python amin.py
</code></pre>
<p>ç­‰å¾…ç»ˆç«¯æ˜¾ç¤ºÂ ğŸ‘‰ è¯·è®¿é—®: <a href="https://link.juejin.cn?target=http%3A%2F%2F127.0.0.1%3A8888" target="_blank" title="http://127.0.0.1:8888" ref="nofollow noopener noreferrer">http://127.0.0.1:8888</a> ååœ¨æµè§ˆå™¨æ‰“å¼€å³å¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8962236cf1a44527bd5a219ba07ea287~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF6aOO5aSc5Y2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767340044&amp;x-signature=ugsBhLOfisavhsWCGf09XEQ0Fbc%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‡ºæµ·æŠ€æœ¯æŒ‘æˆ˜â€”â€”Lalamoveæ™ºèƒ½å‘Šè­¦é™å™ª]]></title>    <link>https://juejin.cn/post/7587596841875111970</link>    <guid>https://juejin.cn/post/7587596841875111970</guid>    <pubDate>2025-12-25T14:11:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587596841875111970" data-draft-id="7587605704635744290" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‡ºæµ·æŠ€æœ¯æŒ‘æˆ˜â€”â€”Lalamoveæ™ºèƒ½å‘Šè­¦é™å™ª"/> <meta itemprop="keywords" content="ç›‘æ§,åç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-25T14:11:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è´§æ‹‰æ‹‰æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/1768489241815070"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‡ºæµ·æŠ€æœ¯æŒ‘æˆ˜â€”â€”Lalamoveæ™ºèƒ½å‘Šè­¦é™å™ª
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1768489241815070/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è´§æ‹‰æ‹‰æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T14:11:26.000Z" title="Thu Dec 25 2025 14:11:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šTGE-Pricing-æ›¹æ™¶æ™¶ (Kent Cao)</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ff16db700964d0ca945a663fff8a103~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767276686&amp;x-signature=Tamw1A2Lhfb%2FzZW0Fx9BvmAY2YE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>å‘Šè­¦ç›‘æ§ä½œä¸ºæŠ€æœ¯å›¢é˜Ÿä¿éšœæœåŠ¡ä¸ä¸šåŠ¡ç¨³å®šæ€§çš„æ ¸å¿ƒé˜²çº¿ï¼Œå…¶é‡è¦æ€§ä¸ä»…ä½“ç°åœ¨å¯¹æ½œåœ¨é£é™©çš„å®æ—¶æ„ŸçŸ¥ä¸å¿«é€Ÿå“åº”ä¸Šï¼Œæ›´æ˜¯æ„å»ºé«˜å¯ç”¨ç³»ç»Ÿã€æå‡ç”¨æˆ·ä½“éªŒçš„å…³é”®åŸºçŸ³ã€‚å› æ­¤é¢å¯¹å¿«é€Ÿæ‹“å±•çš„æµ·å¤–å¸‚åœºå’Œé«˜é€Ÿè¿­ä»£çš„ä¸šåŠ¡æ¨¡å¼ï¼Œå¦‚ä½•åœ¨æœ‰é™çš„äººåŠ›èµ„æºä¸‹é«˜æ•ˆä¿éšœæœåŠ¡ç¨³å®šæ€§æˆä¸ºç ”å‘å›¢é˜Ÿæ—¥å¸¸å·¥ä½œä¸­çš„é‡è¦æŒ‘æˆ˜ã€‚æœ¬æ–‡å°†é‡ç‚¹ä»‹ç»ç›‘æ§å‘Šè­¦åœ¨å›½é™…åŒ–ä¸šåŠ¡ä¸­çš„ä¸€äº›å®è·µã€‚</p>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆè¦åšï¼Ÿ</h2>
<blockquote>
<p><strong>ä»€ä¹ˆæ˜¯å‘Šè­¦ï¼Ÿ</strong></p>
<p>åœ¨ç°ä»£åŒ–çš„äº’è”ç½‘æ¶æ„ä¸­,å‘Šè­¦æ˜¯ç›‘æ§ç³»ç»Ÿä¸­æœ€ä¸ºé‡è¦çš„ä¸€éƒ¨åˆ†,å¯ä»¥å¸®åŠ©ç ”å‘äººå‘˜åŠæ—¶å‘ç°å¹¶è§£å†³é—®é¢˜,ç¡®ä¿æœåŠ¡çš„å¯ç”¨æ€§å’Œç¨³å®šæ€§ã€‚</p>
</blockquote>
<blockquote>
<p><strong>ä»€ä¹ˆæ˜¯å‘Šè­¦å™ªéŸ³ï¼Ÿ</strong></p>
<p>ç›‘æ§æˆ–æŠ¥è­¦ç³»ç»Ÿä¸­å› è¯¯æŠ¥ã€é‡å¤å‘Šè­¦æˆ–é…ç½®ä¸å½“å¯¼è‡´çš„å†—ä½™ä¿¡æ¯ã€‚å®ƒä»¬ä¸ä¼šå¸®åŠ©ç ”å‘å®šä½é—®é¢˜,åè€Œä¼šæ·¹æ²¡å…³é”®å‘Šè­¦,å¯¼è‡´ç ”å‘äººå‘˜"å‘Šè­¦ç–²åŠ³"ã€‚å¸¸è§åŸå› æœ‰çµæ•åº¦è®¾ç½®è¿‡é«˜ã€ç›‘æ§é…ç½®ä¸å½“ç­‰ã€‚</p>
</blockquote>
<h3 data-id="heading-2">ç°çŠ¶åŠç—›ç‚¹</h3>
<p>åŸºäºè§„åˆ™çš„å‘Šè­¦ï¼ˆåŒç¯æ¯”ï¼‰</p>
<ul>
<li>
<p>åŸºäºå¸‚åœºã€åŸå¸‚ã€è½¦å‹ã€é¢†åŸŸçš„å‘Šè­¦é…ç½®é«˜è¾¾200+</p>
</li>
<li>
<p>ä¸šåŠ¡å—å¤©æ°”ã€èŠ‚å‡æ—¥ã€ç‰¹æ®Šäº‹ä»¶å½±å“å¤§ï¼Œéå¸¸å®¹æ˜“å‡»ç©¿åŒæ­¥æ¯”é˜ˆå€¼ï¼Œä»è€Œè§¦å‘å‘Šè­¦</p>
</li>
</ul>
<p><strong>2024å…¨å¹´</strong> P0 å‘Šè­¦æ¬¡æ•° <strong>7000+</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34b30a29526a47f6af366c5693b19a1f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767276686&amp;x-signature=RqktlthG%2FbOMjbpl3xcHaif3nr8%3D" alt="" loading="lazy"/></p>
<p><strong>Top reasons</strong> ï¼ˆå‘Šè­¦æ¬¡æ•°æœ€å¤šçš„30å¤©ï¼‰ï¼Œ<strong>3097</strong>æ¬¡ï¼Œçº¦å å…¨å¹´çš„50%ã€‚</p>
<p>èŠ‚å‡æ—¥ï¼š1922æ¬¡ï¼Œå æ¯” <strong>62%</strong></p>
<p>ç‰¹æ®Šå¤©æ°”ï¼š577æ¬¡ï¼Œå æ¯” <strong>30%</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce9be249ba63403c9b3f4e04c82f7feb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767276686&amp;x-signature=b3jG2coPGl96vu%2Fh5j1UnR1gpek%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p>å·¥ä½œé‡å¤§ã€æ•ˆç‡ä½</p>
</li>
<li>
<p>24å°æ—¶è§¦å‘</p>
</li>
</ul>
<h2 data-id="heading-3">é™å™ªæ–¹æ¡ˆ</h2>
<ul>
<li>
<p><strong>è§„åˆ™ä¼˜åŒ–ï¼š</strong> å¦‚è°ƒæ•´çµæ•åº¦,è¿‡æ»¤éç´§æ€¥å‘Šè­¦ç­‰ã€‚</p>
</li>
<li>
<p>**æ™ºèƒ½ç®—æ³•ï¼š**åŸºäºå†å²æ•°æ®,é‡‡ç”¨æœºå™¨å­¦ä¹ æ¨¡å‹é¢„æµ‹å½“å‰çŠ¶æ€,ä»è€Œé¿å…é™æ€è§„åˆ™å¯¼è‡´çš„ä¸å‡†ç¡®æ€§ã€‚</p>
</li>
</ul>
<p>è§£æ³•ä¸€ï¼šåŸºäºè§„åˆ™ä¼˜åŒ–</p>
<p><strong>ä¼˜ç‚¹</strong> ï¼šæ— éœ€å¼€å‘ï¼ŒåŸºäºmonitorå‘Šè­¦èƒ½åŠ›ï¼Œè°ƒæ•´é˜ˆå€¼</p>
<p><strong>ç¼ºç‚¹</strong> ï¼š</p>
<ol>
<li>
<p>å‘Šè­¦é…ç½®å¤šï¼Œéœ€è¦ç»™æ¯ä¸ªå¸‚åœºå•ç‹¬é…ç½®å‘Šè­¦</p>
</li>
<li>
<p>é˜ˆå€¼é«˜åº¦ä¾èµ–ç ”å‘ç»éªŒï¼Œé˜ˆå€¼å›ºå®š</p>
</li>
<li>
<p>éšç€ä¸šåŠ¡å‘å±•ï¼Œéœ€è¦ä¸æ–­çš„ç»´æŠ¤ã€‚</p>
</li>
</ol>
<p>è§£æ³•äºŒï¼šåŸºäºæ™ºèƒ½ç®—æ³•-åŠ¨æ€é˜ˆå€¼</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ol>
<li>
<p>è‡ªåŠ¨æ„ŸçŸ¥å·¥ä½œæ—¥ã€å‘¨æœ«ã€èŠ‚å‡æ—¥ã€ç‰¹æ®Šå¤©æ°”ç­‰æƒ…å†µ</p>
</li>
<li>
<p>é˜ˆå€¼ç²¾ç¡®</p>
</li>
<li>
<p>ç†è®ºä¸Šä¸€æ¡å‘Šè­¦é…ç½®å°±å¯ä»¥è¦†ç›–æ‰€æœ‰å¸‚åœº</p>
</li>
</ol>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ol>
<li>
<p>æŠ€æœ¯é—¨æ§›é«˜</p>
</li>
<li>
<p>æ•°æ®ä¸å¯è§£é‡Šæ€§ä»¥åŠé¢„æµ‹å‡†ç¡®åº¦é—®é¢˜ã€‚</p>
</li>
</ol>
<h2 data-id="heading-4">æ™ºèƒ½ç®—æ³•æŠ€æœ¯åŸç†</h2>
<p><strong>è®­ç»ƒå•é‡é¢„æµ‹æ¨¡å‹-æ—¶é—´åºåˆ—é¢„æµ‹</strong></p>
<p>åŸºäºå†å²æ•°æ®ä»¥åŠæœºå™¨å­¦ä¹ æŠ€æœ¯è®­ç»ƒLalamoveå•é‡é¢„æµ‹æ¨¡å‹ï¼Œç»“åˆå®æ—¶è®¢å•é‡ï¼Œå¤©æ°”ï¼ŒèŠ‚å‡æ—¥ç­‰ä¿¡æ¯ï¼Œé¢„æµ‹æ¥ä¸‹æ¥ä¸€ä¸ª10åˆ†é’Ÿçš„æœ€ä½è®¢å•é‡ã€‚ä»¥æ­¤æ¥åŒºåˆ†å›ºå®šé˜ˆå€¼æ— æ³•åˆ¤æ–­çš„æ­£å¸¸æ³¢åŠ¨ã€‚</p>
<h3 data-id="heading-5">æ•´ä½“æ¶æ„</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9dea045dc5254e07aae896f25a66f443~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767276686&amp;x-signature=U2BrEPoWM996R%2BRCdf4QenslKj8%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">æ•°æ®æµ</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e49b7644535b4f598a209a3e419e3119~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767276686&amp;x-signature=J53Q0onapM3SqLSWcRyxTeEovyY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-7">å…³é”®å®ç°</h2>
<h3 data-id="heading-8">ç‰¹å¾å·¥ç¨‹</h3>
<p><strong>é—®é¢˜è®¾å®š</strong></p>
<ul>
<li>æˆ‘ä»¬æŠŠè®¢å•æ³¢åŠ¨åŒºåŸŸèŒƒå›´çš„é¢„æµ‹çœ‹ä½œå†å²è®¢å•çš„<strong>æ—¶é—´åºåˆ—é¢„æµ‹é—®é¢˜</strong>,é€è¿‡<strong>æœºå™¨å­¦ä¹ æ¨¡å‹</strong>,æ ¹æ®æŸä¸€ <strong>å†å²è®¢å•æµé‡</strong> æƒ…å†µä¸‹,é¢„æµ‹ <strong>æœªæ¥æœ€å¤§/æœ€å°å¯èƒ½å‡ºç°çš„è®¢å•æ³¢åŠ¨</strong> ,ä½œä¸ºå‘Šè­¦é˜ˆå€¼ã€‚</li>
</ul>
<p><strong>æ•°æ®æ¥æº</strong></p>
<ul>
<li>
<p>å†å²è®¢å•æ•°æ®</p>
</li>
<li>
<p>å…¨çƒèŠ‚å‡æ—¥æ•°æ®</p>
</li>
<li>
<p>å…¨çƒå¤©æ°”æ•°æ®</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d652f1201a744cbf9377b09b466a6c5c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767276686&amp;x-signature=aDcbtrxMHN2S0LglcFm%2FltiXRno%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-9">åœºæ™¯ä¸€ï¼šèŠ‚å‡æ—¥</h4>
<ul>
<li>
<p>è®¢å•æ•°é‡å¼‚å¸¸ä¸‹é™,ä¸»è¦ä½“ç°åœ¨èŠ‚å‡æ—¥æœŸé—´</p>
</li>
<li>
<p>è®¢å•æ•°é‡åœ¨å‘¨ç»´åº¦ä¼šå‡ºç°å‘¨æœŸæ€§çš„æ³¢åŠ¨</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0800cf024e5d46bb88da1a25aa5ad08e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767276686&amp;x-signature=Ih6gHt2XceXgCh9RbD%2Bpxmt0dJc%3D" alt="" loading="lazy"/></p>
<p><strong>ç‰¹å¾ç¼–ç </strong></p>
<p><strong>1.å¦‚ä½•è®©ä¸€ä¸ªæœºå™¨å­¦ä¹ æ¨¡å‹åœ¨æ„ŸçŸ¥ä¸ŠåŒºåˆ†ä»¥ä¸‹ä¸¤ç§æƒ…å†µ?</strong></p>
<ul>
<li>
<p>æƒ…äººèŠ‚ä¸å„¿ç«¥èŠ‚å¯¹è®¢å•é‡å½±å“è¾ƒå°</p>
</li>
<li>
<p>æ˜¥èŠ‚å¯¹è®¢å•é‡å½±å“è¾ƒå¤§</p>
</li>
</ul>
<p>æˆ‘ä»¬çš„é€‰æ‹©æ˜¯ <strong>ç›®æ ‡ç¼–ç ï¼ˆTarget Encodingï¼‰ã€‚</strong></p>
<p>é€šè¿‡å†å²æ•°æ®,è®¡ç®—æŸä¸€ä¸ªèŠ‚å‡æ—¥åœ¨å„ä¸ªå¹´åº¦å¯¹åº”çš„è®¢å•æ°´ä½å–å¹³å‡å€¼,å°†å…¶ä½œä¸ºæ–°çš„ç‰¹å¾ã€‚</p>
<p>ä¾‹å¦‚:ä¸­ç§‹èŠ‚æ—¥è®¢å•æ¯ä¸€å¹´çš†å¤„äºå…¨å¹´æ—¥è®¢å•é‡çº¦20%çš„æ°´ä½ã€‚å¯ç”¨è¯¥å‡å€¼ä½œä¸ºç¼–ç ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca2ac472cd094e9289362c46c03f7e68~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767276686&amp;x-signature=fJLcwl8foX9KesXSb2%2Ft2CGY1Rk%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9378ca8e06ab446aa5ef4d240b629205~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767276686&amp;x-signature=0EGhKNgLyvCJv3oReRMVN9tUQJY%3D" alt="" loading="lazy"/></p>
<p><strong>2.ç›®æ ‡ç¼–ç çš„ä¼˜åŠ¿</strong></p>
<ul>
<li>
<p>æ›´ç›´æ¥åæ˜ èŠ‚å‡æ—¥å¯¹ä¸šåŠ¡çš„çœŸå®å½±å“</p>
</li>
<li>
<p>å•ä¸ªç‰¹å¾èƒ½å¤Ÿæ¶µç›–å„ç§ç‰¹æ®Šäº‹ä»¶(èŠ‚å‡æ—¥/ç–«æƒ…/å¤©æ°”)</p>
</li>
</ul>
<h4 data-id="heading-10">åœºæ™¯äºŒï¼šå¤©æ°”</h4>
<p><strong>1.ç»éªŒå‡è®¾</strong></p>
<p>æ ¹æ®æˆ‘ä»¬çš„ä¸šåŠ¡ç»éªŒæ¥çœ‹ï¼Œæç«¯å¤©æ°”å¯¹è®¢å•å½±å“éå¸¸å¤§ï¼Œä¾‹å¦‚ä¸œå—äºšåœ°åŒºå¤šå‘å°é£ï¼Œå•é‡ä¹Ÿä»…æ­¤å‡ºç°å¤§å¹…åº¦é™ä½ã€‚</p>
<p><strong>å› æ­¤ï¼Œæˆ‘ä»¬å‡è®¾æç«¯å¤©æ°”å¯¹è®¢å•æœ‰ç›´æ¥çš„å…³ç³»ï¼Œè€Œè¿›ä¸€æ­¥å‡è®¾é™é›¨é‡ï¼Œé£é€Ÿå¯¹è®¢å•é‡æœ‰å½±å“ã€‚</strong></p>
<p><strong>2.éªŒè¯å‡è®¾</strong></p>
<p><strong>é€‰å–æ¡ˆä¾‹è¿›è¡ŒéªŒè¯-</strong> è²å¾‹å®¾2024å¹´7æœˆ23æ—¥å°é£-æ ¼ç¾</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7764e72f39a140c0ba20f83a3238df14~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767276686&amp;x-signature=VIf9AxTzPURk1XWbIePS63m%2F1ak%3D" alt="" loading="lazy"/></p>
<p>ç”±ä¸Šå›¾æˆ‘ä»¬å‘ç°é™¤äº†é™é›¨é‡ï¼Œé£é€Ÿæœ‰å½±å“å¤–ï¼Œæ°”å‹ã€é˜µé£åœ¨è¿™ä¸ªåœºæ™¯ä¸­ä¹Ÿå‡ºç°äº†å…±æŒ¯ã€‚</p>
<p><strong>3.ä¿®æ­£å‡è®¾</strong></p>
<p>é£é€Ÿ/æ°”å‹/é™é›¨é‡/é˜µé£ç­‰ä¿¡æ¯èƒ½å¤Ÿç»¼åˆåˆ¤æ–­å‡ºæç«¯å¤©æ°”</p>
<p><strong>4.éªŒè¯æ™®éæ€§</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/528ad2e926584d17ac4516cd25832aa1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767276686&amp;x-signature=mYE%2BYoMHPNcmJVUYkdEoCFSvfhU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-11">æ¨¡å‹è®­ç»ƒ</h3>
<p><strong>åˆ†ä½æ•°å›å½’LGBM (å†³ç­–æ ‘æ¨¡å‹)</strong></p>
<p>LGBM (LightGBM)æ˜¯ä¸€ç§é«˜æ•ˆçš„æ¢¯åº¦æå‡å†³ç­–æ ‘ç®—æ³•,é€‚ç”¨äºå¤§è§„æ¨¡æ•°æ®çš„å›å½’å’Œåˆ†ç±»ä»»åŠ¡ã€‚</p>
<p>ç™¾åˆ†ä½æ•°å›å½’(QuantileRegression)é€šè¿‡é¢„æµ‹ç›®æ ‡å˜é‡çš„ä¸åŒåŒåˆ†ä½æ•°(è€Œä¸ä»…ä»…æ˜¯å‡å€¼),èƒ½å¤Ÿæ›´å…¨é¢åœ°åæ˜ æ•°æ®</p>
<p>çš„åˆ†å¸ƒæƒ…å†µã€‚åº”ç”¨è¯¥æ–¹æ³•,å¯ä»¥æ ¹æ®å†å²è®¢å•æ•°æ®,é¢„æµ‹è®¢å•é‡åœ¨ä¸åŒç½®ä¿¡åŒºé—´ä¸‹çš„åŠ¨æ€é˜ˆå€¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f3270e4fab24a6f87ae3443f8532cf1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767276686&amp;x-signature=F4lzmUjEFYLUn4%2B08q6r6PT%2BkOs%3D" alt="" loading="lazy"/></p>
<p><strong>æ¨¡å‹æ¯”è¾ƒ</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ffaa44b53ec46beb07aed0d3d739b52~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767276686&amp;x-signature=O%2B7h6cmosvbzBtPicaPVKwDuSB0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-12">å·¥ç¨‹é“¾è·¯</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e7e71a5421942debfd6057e8ffe8b87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767276686&amp;x-signature=vtAx0%2Bduk1faFCWHQXPy3wXIGvA%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-13">é™å™ªæœåŠ¡</h3>
<p><strong>æœ‰äº†æ¨¡å‹é¢„æµ‹å€¼ï¼Œä¸ºä»€ä¹ˆè¿˜è¦é™å™ªæœåŠ¡ï¼Ÿ</strong></p>
<ol>
<li><strong>æ¨¡å‹è¯¯å·®ç‡</strong> ï¼šåœ¨æ¨¡å‹çš„è®­ç»ƒä¸Šï¼Œæˆ‘ä»¬è¿½æ±‚é«˜ç²¾å‡†åº¦ï¼Œä»ä¸Šé¢æ¨¡å‹å‡†ç¡®ç‡çš„ç»Ÿè®¡æ•°æ®æ¥çœ‹ï¼Œæ•´ä½“èƒ½è¾¾åˆ°94%ï¼Œä½†ä»æœ‰6%ï¼ŒèŠ‚å‡æ—¥ä¹Ÿæœ‰è¿‘20%çš„è¯¯å·®ç‡ã€‚ä½†å¯¹äºçº¿ä¸Šå‘Šè­¦ç³»ç»Ÿæ¥è¯´ï¼Œå°±ä»ç„¶æœ‰å‡ ç‡å‡ºç°å™ªéŸ³ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œé¢„æµ‹å€¼ä¼šåœ¨å®é™…å€¼ä¸Šä¸‹å°èŒƒå›´æ³¢åŠ¨ã€‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/288facfd823a44c7a967c1b32d259007~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767276686&amp;x-signature=nyhJaTcnxAdSc5J2wV57BPwCucY%3D" alt="" loading="lazy"/></p>
<ol>
<li>
<p><strong>æ¨¡å‹ç³»ç»Ÿçš„ç¨³å®šæ€§</strong> ï¼šéœ€è¦è€ƒè™‘ç³»ç»Ÿæ•…éšœæ—¶å€™çš„é™çº§å…œåº•èƒ½åŠ›ã€‚</p>
</li>
<li>
<p><strong>ä½æµé‡å¸‚åœºã€ä½å³°æœŸ,è®¢å•æ•°æ®æ³¢åŠ¨è¾ƒå¤§ï¼Œæ¨¡å‹é¢„æµ‹æ•ˆæœä¸å¯ç”¨ã€‚</strong></p>
</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94d05781fcfc49b78522ab70bda049a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767276686&amp;x-signature=ArIseNnU95onjRnr8xB7g2vtya8%3D" alt="" loading="lazy"/></p>
<p><strong>é™å™ªæœåŠ¡èƒ½åŠ›è®¾è®¡</strong></p>
<ul>
<li>
<p>æ•°æ®æŸ¥è¯¢ï¼šæä¾›ç»™å¤–éƒ¨ç›‘æ§å¹³å°é˜ˆå€¼æŸ¥è¯¢çš„èƒ½åŠ›ã€‚</p>
</li>
<li>
<p>æ•°æ®æ ¡éªŒï¼šå¯¹æ¨¡å‹é¢„æµ‹ç»“æœè¿›è¡Œæœ‰æ•ˆæ€§æ ¡éªŒã€‚é˜²æ­¢å‡ºç°è¿ç»­æ—¶é—´æ®µçš„åå·®å€¼è¿‡å¤§ã€‚</p>
</li>
<li>
<p>æ•°æ®å…œåº•ï¼šå¦‚æœæ¨¡å‹æ²¡æœ‰äº§ç”Ÿé¢„æµ‹å€¼ï¼Œéœ€è¦å…œåº•é™çº§åˆ°å›ºå®šé…ç½®æˆ–è€…å‰ä¸€æ—¶åˆ»çš„å€¼ã€‚</p>
</li>
<li>
<p>æ•°æ®èšåˆï¼šå¯¹åŸå¸‚ã€è½¦å‹ã€å¸‚åœºæ•°æ®è¿›è¡Œèšåˆï¼Œä¾›ä¸åŒå‘Šè­¦é…ç½®ä½¿ç”¨ã€‚</p>
</li>
<li>
<p>æ•°æ®ç¼“å†²ï¼šå¯¹æ¨¡å‹äº§ç”Ÿçš„å€¼è¿›è¡Œbuffè°ƒèŠ‚ï¼Œè¿›è¡Œå®¹é”™å¤„ç†ã€‚</p>
</li>
<li>
<p>æ—¶æ®µæ„ŸçŸ¥ï¼šæ„ŸçŸ¥é«˜ä½å³°æœŸï¼Œå¯¹æ¨¡å‹é¢„æµ‹å€¼è¿›è¡Œå¹²é¢„ã€‚</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/944bcece84294066877450e58212256f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767276686&amp;x-signature=KDVB0t7aQaBXEvd0Cb9GmGgT7D4%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a8d66f007f5c4aa586809dcb96899871~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767276686&amp;x-signature=B92MaYReSeeZyRsCRiq4OKBBE2E%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-14">é˜ˆå€¼åé¦ˆè°ƒæ•´æœºåˆ¶</h3>
<p>æœ¬æ¬¡é‡‡ç”¨æ¨¡å‹å‚æ•°å¾®è°ƒå’Œé™å™ªæœåŠ¡æ•°æ®ç¼“å†²ç›¸ç»“åˆçš„æ–¹å¼ã€‚</p>
<blockquote>
<p>å‚æ•°å¾®è°ƒï¼šé€šè¿‡ä¸æ–­è°ƒæ•´æ¨¡å‹å‚æ•°ï¼Œæé«˜é¢„æµ‹æ•°æ®å‡†ç¡®åº¦ã€‚</p>
<p>æ•°æ®ç¼“å†²ï¼šé€šè¿‡è§‚æµ‹ä¸šåŠ¡ç‰¹å¾ã€å¯¹ä¸åŒå¸‚åœºæ·»åŠ buffæ¥è‡ªå®šä¹‰é˜ˆå€¼çµæ•åº¦ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67ee163896b344c2a32f4f71c41d1853~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767276686&amp;x-signature=MGxs9C0Hm4Osjk8Y3yTiX0cVUjM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-15">æ•ˆæœå±•ç¤º</h2>
<p><strong>å·¥ä½œæ—¥å’Œå‘¨æœ«</strong></p>
<p>æœ€ä½é¢„æµ‹å€¼å¹³å‡åŸºæœ¬æ˜¯å®é™…å€¼çš„80%å·¦å³,è€ŒåŒç¯æ¯”ä¸‹é™å›ºå®šå€¼å¹³å‡åŸºæœ¬æ˜¯å®é™…å€¼çš„70%å·¦å³,ä¸‹é™é˜ˆå€¼å‡†ç¡®åº¦æå€¼å‡äº†çº¦10%,æœ€é«˜é¢„æµ‹å€¼å¹³å‡åŸºæœ¬æ˜¯å®é™…å€¼çš„130%å·¦å³,åŒç¯æ¯”ä¸Šé™å›ºå®šå€¼å¹³å‡åŸºæœ¬æ˜¯å®é™…å€¼çš„150%å·¦å³,ä¸Šé™é˜ˆå‡†ç¡®åº¦æå‡äº†çº¦20%ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50c4a892099f441daff06c0fe3f21b4e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767276686&amp;x-signature=b%2FuJuN0j3tFnTgRvf3Eo3KncfuQ%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2de2c688c1dd4bbbba4acb224086b954~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767276686&amp;x-signature=qpJLyO8vKa4SezoqlDEHr08%2Bt8I%3D" alt="" loading="lazy"/></p>
<p><strong>èŠ‚å‡æ—¥ ï¼šä¸­å›½é¦™æ¸¯é‡é˜³èŠ‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4df6d4428a15473494d7317b928028cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767276686&amp;x-signature=AVahaKY81X9UvSg84CsdwwMm%2BdY%3D" alt="" loading="lazy"/></p>
<p><strong>çªå‘åœºæ™¯/äº‹ä»¶-å°é£ 2025-11-09 è²å¾‹å®¾å°é£</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/69bca5a3208446ddac547edea6c095db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767276686&amp;x-signature=rxdoNpCFWozG0vDLPJfwHS4uDMM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-16">æ€»ç»“</h2>
<p>æ™ºèƒ½å‘Šè­¦é™å™ªé€šè¿‡æœºå™¨å­¦ä¹ æŠ€æœ¯ï¼Œå®ç°äº†ä»è¢«åŠ¨å“åº”åˆ°ä¸»åŠ¨é˜²å¾¡çš„è·¨è¶Šï¼Œæˆä¸ºä¿éšœä¸šåŠ¡ç¨³å®šæ€§çš„æ ¸å¿ƒå·¥å…·ã€‚ æœªæ¥è¶‹åŠ¿åŒ…æ‹¬å¼ºåŒ–æ¨¡å‹å¥å£®æ€§ã€ä¼˜åŒ–å¤šæ—¶åŒºé€‚é…åŠæ¢ç´¢ç”Ÿæˆå¼AIåœ¨å‘Šè­¦åˆ†æä¸­çš„åº”ç”¨ã€‚ ç›®å‰æ™ºèƒ½å‘Šè­¦é™å™ªæœºåˆ¶å·²ç»è¿è¡Œåœ¨äº†Lalamoveçš„æ ¸å¿ƒäº¤æ˜“ã€è®¡ä»·é¢†åŸŸï¼Œå®ç°äº†å™ªéŸ³80%çš„ä¸‹é™ã€‚å¤§å¤§å‡è½»äº†å€¼ç­äººå‘˜çš„å·¥ä½œå‹åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¯„æµ‹ä¹Ÿå¾ˆé…·ï¼ŒData Agent è‡ªåŠ¨åŒ–è¯„æµ‹çš„ä¸‰å±‚æ¡†æ¶ä¸å®æˆ˜]]></title>    <link>https://juejin.cn/post/7587421380229382194</link>    <guid>https://juejin.cn/post/7587421380229382194</guid>    <pubDate>2025-12-25T07:20:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587421380229382194" data-draft-id="7587381515668340763" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¯„æµ‹ä¹Ÿå¾ˆé…·ï¼ŒData Agent è‡ªåŠ¨åŒ–è¯„æµ‹çš„ä¸‰å±‚æ¡†æ¶ä¸å®æˆ˜"/> <meta itemprop="keywords" content="å¤§æ•°æ®"/> <meta itemprop="datePublished" content="2025-12-25T07:20:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­—èŠ‚è·³åŠ¨æ•°æ®å¹³å°"/> <meta itemprop="url" content="https://juejin.cn/user/2159881542179624"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¯„æµ‹ä¹Ÿå¾ˆé…·ï¼ŒData Agent è‡ªåŠ¨åŒ–è¯„æµ‹çš„ä¸‰å±‚æ¡†æ¶ä¸å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2159881542179624/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­—èŠ‚è·³åŠ¨æ•°æ®å¹³å°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T07:20:21.000Z" title="Thu Dec 25 2025 07:20:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»23åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¤§æ¨¡å‹æŠ€æœ¯é£é€Ÿå‘å±•çš„å½“ä¸‹ï¼Œå¤§æ•°æ®é¢†åŸŸçš„å„ç±»åº”ç”¨å¦‚é›¨åæ˜¥ç¬‹èˆ¬æ¶Œç°ï¼Œä»æ•°ä»“å¼€å‘åˆ°ChatBIé—®æ•°ï¼Œå†åˆ°æ·±åº¦åˆ†æ Agentï¼Œè¿™äº›é¢†åŸŸçš„å¤§æ¨¡å‹åº”ç”¨æå¤§åœ°æå‡äº†æ•°æ®å¤„ç†å’Œåˆ†æçš„æ•ˆç‡ã€‚ä½†ä¸æ­¤åŒæ—¶ï¼Œå¦‚ä½•ç§‘å­¦ã€å‡†ç¡®åœ°è¯„ä¼°è¿™äº›åº”ç”¨çš„æ•ˆæœï¼Œæˆä¸ºäº†è¡Œä¸šé¢ä¸´çš„é‡è¦éš¾é¢˜ã€‚</p>
<p>InfoQ è£å¹¸é‚€è¯·åˆ°äº†å­—èŠ‚è·³åŠ¨ /æ•°æ®å¹³å°å¤§æ¨¡å‹è¯„æµ‹æŠ€æœ¯è´Ÿè´£äºº<strong>å°¹å°æ˜</strong>åœ¨AICon å…¨çƒäººå·¥æ™ºèƒ½å¼€å‘ä¸åº”ç”¨å¤§ä¼šÂ·æ·±åœ³ç«™ä¸Šåˆ†äº«äº†ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Faicon.infoq.cn%2F2025%2Fshenzhen%2Fpresentation%2F6727" target="_blank" title="https://aicon.infoq.cn/2025/shenzhen/presentation/6727" ref="nofollow noopener noreferrer">è¯„æµ‹ä¹Ÿå¾ˆé…·â€”â€”Agent è‡ªåŠ¨åŒ–è¯„æµ‹æŠ€æœ¯åˆ›æ–°ä¸å®è·µ</a>ã€‹ã€‚ä½œä¸ºå­—èŠ‚è·³åŠ¨æ•°æ®å¹³å°çš„å¤§æ¨¡å‹æ•ˆæœè¯„ä¼°å›¢é˜Ÿï¼Œä»–ä»¬æ·±è€•æ•°æ®åº”ç”¨Agent é¢†åŸŸï¼Œæ„å»ºäº†è¦†ç›–ä»æ•°æ®å¼€å‘åˆ°æ•°æ®åº”ç”¨å‚ç›´é¢†åŸŸAgentåº”ç”¨çš„è¯„æµ‹æŠ€æœ¯ä½“ç³»ï¼Œå°¤å…¶åœ¨è‡ªåŠ¨åŒ–è¯„æµ‹ç®—æ³•ã€Agent çº§è¯„æµ‹æ¡†æ¶ç­‰æ–¹é¢å½¢æˆäº†å¯è½åœ°çš„æŠ€æœ¯æ–¹æ¡ˆã€‚æœ¬æ¬¡åˆ†äº«å°†èšç„¦è¿™ä¸€é¢†åŸŸçš„æŠ€æœ¯ç»†èŠ‚ä¸å®è·µç»éªŒã€‚</p>
<h3 data-id="heading-0">ä¸ºä»€ä¹ˆâ€œè¯„æµ‹ä¹Ÿå¾ˆé…·â€ï¼šä»ç”¨ä¾‹åˆ°æ•ˆæœåº¦é‡</h3>
<p>å…ˆè°ˆä»Šå¤©åˆ†äº«çš„ä¸»é¢˜â€”â€”â€œè¯„æµ‹ä¹Ÿå¾ˆé…·â€ã€‚åœ¨ä¼ ç»Ÿè½¯ä»¶æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬ç¼–å†™å¹¶æ‰§è¡Œç”¨ä¾‹ï¼Œæ ¸å¯¹åŠŸèƒ½æ˜¯å¦æ­£å¸¸å³å¯ã€‚è€Œåœ¨å¤§æ¨¡å‹ç›¸å…³åœºæ™¯ä¸­ï¼Œè¯„æµ‹çš„å¤æ‚åº¦å’ŒæŒ‘æˆ˜æ˜æ˜¾æ›´é«˜ã€‚æŒ‘æˆ˜ä¸»è¦ä½“ç°åœ¨ä¸¤æ–¹é¢ï¼šä¸€æ˜¯å¦‚ä½•æ›´åŠ è´´åˆ‡åœ°è¯„ä»·æˆ‘ä»¬æ‰€æ„å»ºåº”ç”¨çš„å®é™…æ•ˆæœï¼›äºŒæ˜¯æ—¢æœ‰çš„ä¼ ç»ŸæŠ€æœ¯æ˜¯å¦å¯å¤ç”¨ï¼Œè‹¥ä¸è¶³ï¼Œæˆ‘ä»¬åº”åœ¨ä½•å¤„å¼€å±•æ¢ç´¢ä¸åˆ›æ–°ã€‚é‚£å½“æˆ‘ä»¬è°ˆâ€œæ¨¡å‹è¯„æµ‹â€æ—¶ï¼Œç©¶ç«Ÿåœ¨è¯´ä»€ä¹ˆã€å¸¸è§çš„è¯„æµ‹ç»´åº¦å’ŒæŒ‡æ ‡æœ‰å“ªäº›ï¼Ÿ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b4cc4d9104146d4b4aa1df5e45d5ab2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767252021&amp;x-signature=VjV03KSOAHBpXR0GI7KYvDAmsI0%3D" alt="" loading="lazy"/></p>
<p>é¦–å…ˆæ˜¯â€œæ•ˆæœâ€ï¼Œä¹Ÿå°±æ˜¯å¤§å®¶å¸¸è¯´çš„å¥½ä¸å¥½ã€å‡†ä¸å‡†ã€‚è¿™é‡Œæœ‰ä¸‰ä¸ªå¸¸è§æŒ‡æ ‡ï¼Œé¦–å…ˆæ˜¯äº‹å®æ€§ï¼ŒæŒ‡æ¨¡å‹åœ¨å›ç­”æ—¶æ˜¯å¦éµä»é€šè¯†å’Œå¸¸è¯†ï¼Œåœ¨ç»™å®šä¸Šä¸‹æ–‡çš„æƒ…å†µä¸‹æ˜¯å¦ä¾æ®è¯æ®ä½œç­”ï¼Œæ˜¯å¦å­˜åœ¨â€œå¹»è§‰â€ï¼›å…¶æ¬¡æ˜¯æœ‰ç”¨æ€§ï¼Œå›ç­”æ˜¯å¦å¯¹ä»»åŠ¡æœ‰å¸®åŠ©ï¼Œä¸èƒ½åªæ˜¯è®²äº†å®è¯å´å¯¹é—®é¢˜æ²¡æœ‰å®è´¨ä»·å€¼ï¼›æœ€åæ˜¯æœ‰å®³æ€§ï¼Œè¿™æ˜¯æ¨¡å‹è®­ç»ƒå’Œè¯„ä¼°éƒ½ä¼šå…³æ³¨çš„æ–¹å‘ï¼Œæ¯”å¦‚æ˜¯å¦è§¦åŠæ”¿æ²»æ•æ„Ÿã€æ˜¯å¦å¼•å¯¼ä¸å½“è¡Œä¸ºç­‰ï¼›</p>
<p>å…¶æ¬¡ï¼Œæ˜¯æ€§èƒ½ä¸æ¨ç†æ€§èƒ½ã€‚å¾ˆå¤šäººéƒ½æœ‰è¿™ç§ä½“éªŒï¼šå¤§æ¨¡å‹è¾“å‡º Token å¾ˆæ…¢ï¼Œæˆ‘å¾—ç­‰å¾ˆä¹…ï¼Œçœ¼çœ‹ç€ä¸€ä¸ªå­—ä¸€ä¸ªå­—å¾€å¤–è¹¦ã€‚è¿™é‡Œé€šå¸¸æ¶‰åŠé¦–ä¸ª Token å‡ºç°çš„æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯é¦–å­—ç¬¦/é¦– Token æ—¶å»¶ï¼Œä»¥åŠå®Œæ•´æ¨ç†è¿‡ç¨‹ä¸­çš„ç”Ÿæˆé€Ÿåº¦ç­‰ï¼›åŒæ—¶è¿˜è¦çœ‹èµ„æºæ¶ˆè€—ï¼Œè¿™äº›éƒ½åº”çº³å…¥è¯„ä¼°å£å¾„ï¼›</p>
<p>ç¬¬ä¸‰æ˜¯ç¨³å¥æ€§ï¼Œæˆ–è€…è¯´é²æ£’æ€§ã€‚é‡ç‚¹åœ¨äºèƒ½ä¸èƒ½å®¹é”™ã€æŒç»­ç¨³å®šåœ°è¾“å‡ºï¼Œä»¥åŠé¢å¯¹å¯¹æŠ—æˆ–å¼‚å¸¸è¾“å…¥æ—¶çš„æŠ—æ”»å‡»èƒ½åŠ›ã€‚è¿™äº›éƒ½ç›´æ¥å…³ç³»åˆ°ä¸Šçº¿åçš„å¯ç”¨æ€§ä¸é£é™©ã€‚</p>
<p>æ˜ç¡®äº†è¯¥â€œçœ‹ä»€ä¹ˆâ€ï¼Œæ¥ä¸‹æ¥å°±æ˜¯â€œæ€ä¹ˆè¯„â€ã€‚åœ¨å®é™…å·¥ä½œä¸­ï¼Œå½“å‰çš„å¸¸è§è¯„æµ‹æ–¹æ³•æœ‰ä»¥ä¸‹å‡ ç§ï¼š é¦–å…ˆäººå·¥è¯„æµ‹ã€‚åœ¨å¤§æ¨¡å‹ç”Ÿæˆå¸¦æœ‰ä¸»è§‚æ€§çš„å†…å®¹æ—¶ï¼Œæ¯”å¦‚ä¸€æ¬¡æ€§ç”Ÿæˆå‡ åƒå¼ åˆ›æ„å›¾ç‰‡ï¼Œå“ªä¸ªæ›´å¥½ã€å“ªä¸ªæ›´å·®ï¼Œé€šå¸¸è¦å…ˆè¯·é¢†åŸŸä¸“å®¶è¿‡ä¸€éï¼Œå¹¶æ®æ­¤å†™å‡ºæ¸…æ™°çš„è¯„ä»·æ ‡å‡†â€”â€”æˆ‘ä»¬è®¤ä¸ºä»€ä¹ˆæ˜¯â€œå¥½â€ï¼Œä»€ä¹ˆæ˜¯â€œåâ€ï¼›å…¶æ¬¡æ˜¯è‡ªåŠ¨åŒ–è¯„æµ‹ã€‚ä¸šç•Œæ™®éçš„åšæ³•å¤§è‡´æœ‰å‡ ç±»ï¼šä¸€ç±»æ˜¯å®¢è§‚é¢˜ï¼ˆå•é€‰æˆ–å¤šé€‰ï¼‰ï¼Œä¾¿äºç›´æ¥åšç»“æœåŒ¹é…ï¼›æ–‡æœ¬ç±»ä¼šæ›´éš¾ä¸€äº›ï¼Œå¸¸è§æ€è·¯æ˜¯å’Œæ ‡å‡†ç­”æ¡ˆåšç›¸ä¼¼åº¦æ¯”è¾ƒï¼Œé…åˆç›¸åº”ç®—æ³•å’ŒæŒ‡æ ‡ï¼Œæ¯”å¦‚ BLEUã€ROUGE ç­‰ï¼›è¿˜æœ‰ä¸€ç±»æ˜¯åŸºäºæ’åºçš„è¯„ä¼°ï¼ˆrankï¼‰ï¼Œåœ¨ RLHF é‡Œå°±å¾ˆå…¸å‹â€”â€”ä¸æ˜¯ç»™ä¸€ä¸ªç»å¯¹åˆ†ï¼Œè€Œæ˜¯è®©äººå¯¹å¤šä¸ªå€™é€‰è¿›è¡Œç›¸å¯¹ä¼˜åŠ£æ¯”è¾ƒï¼Œä»è€Œå®Œæˆä¸äººçš„åå¥½å¯¹é½ã€‚æ­¤å¤–ï¼ŒäººæœºååŒè¯„æµ‹ã€‚å¾ˆå¤šåœºæ™¯é‡Œï¼Œçº¯è‡ªåŠ¨åŒ–è¿˜è¾¾ä¸åˆ°è¶³å¤Ÿå‡†ç¡®ã€è¶³å¤Ÿè®©äººæ”¾å¿ƒçš„ç¨‹åº¦ï¼Œäºæ˜¯é€šå¸¸é‡‡ç”¨æœºå™¨å…ˆç»™å‡ºåˆæ­¥ç»“è®ºå’Œå»ºè®®ï¼Œå†ç”±äººå·¥å¤æ ¸ä¸å®šåˆ¤ã€‚</p>
<p>ä¸è¿‡ï¼Œè½åœ°è¿‡ç¨‹ä¸­ä¾ç„¶ä¼šæš´éœ²å‡ºä¸€äº›å…±æ€§ç—›ç‚¹ã€‚</p>
<p>ä¸€æ–¹é¢å½“ä¸‹æœ‰å¾ˆå¤šè¯„æµ‹ Benchmarkï¼Œä¹Ÿæœ‰å¾ˆå¤šè¯„æµ‹é›†ã€‚å½“è¯„æµ‹ç»“æŸä¹‹åï¼Œå¤§å®¶å¸¸æœ‰ä¸€ä¸ªç—›ç‚¹ï¼šä½ è¯´ç°åœ¨æ•ˆæœå¾ˆå¥½ï¼Œå¯ä¸ºä»€ä¹ˆçº¿ä¸Šå®¢æˆ·è€åœ¨åæ§½ï¼Œè¯´â€œæˆ‘çš„æ„Ÿè§‰æ²¡æœ‰ä½ è¯´çš„åˆ†æ•°é‚£ä¹ˆé«˜â€ï¼Ÿè¿™å…¶å®å°±æ˜¯é™æ€è¯„æµ‹å’Œçº¿ä¸Šå®é™…æ•ˆæœè„±èŠ‚çš„é—®é¢˜ã€‚</p>
<p>å¦ä¸€æ–¹é¢ï¼šä»Šå¤©å¾ˆå¤šè¯„æµ‹å¾€å¾€é’ˆå¯¹æ¨¡å‹çš„å•ä¸€èƒ½åŠ›ï¼Œæˆ–è€…è‹¥å¹²å¸¸è§çš„é€šç”¨èƒ½åŠ›ã€‚è¿™å°±åƒé«˜è€ƒè€ƒæ•°å­¦ã€è¯­æ–‡ã€è‹±è¯­ï¼›ä½†è¿™äº›ç§‘è€ƒå®Œï¼Œæ”¾åˆ°è‡ªå·±çš„ä¸šåŠ¡é‡Œä¼šå‘ç°ï¼Œæˆç»©å¥½å¹¶ä¸ç­‰äºèƒ½åŠ›å¼ºã€‚å›åˆ°å®é™…ä¸šåŠ¡åœºæ™¯ï¼Œæˆ‘è¯¥æ€ä¹ˆç»¼åˆè¯„ä¼°ä»–çš„èƒ½åŠ›ï¼Ÿ</p>
<p>å†è€…ï¼Œå³ä¾¿æœ‰äº†ä¸€ä¸ªè¯„æµ‹é›†ï¼Œä¸šåŠ¡åœ¨å˜ï¼Œäº§å“å®šä¹‰åœ¨å˜ï¼Œçº¿ä¸Šç”¨æˆ·çš„ä½¿ç”¨æ–¹å¼ä¹Ÿåœ¨å˜ã€‚è¿™ä¸ªæ—¶å€™ï¼Œè¯„æµ‹å°±æ›´éš¾åæ˜ çº¿ä¸Šçš„çœŸå®æƒ…å†µã€‚</p>
<p>ä»¥ä¸Šæ˜¯é€šç”¨æ¡†æ¶ï¼Œè½åˆ°æ•°æ®åº”ç”¨ Agentï¼Œå…·ä½“ä¼šç¢°åˆ°å“ªäº›å‚ç›´é€‚é…éš¾ç‚¹ï¼Ÿ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3356429ffd88479f9307e2fa0ea6a39e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767252021&amp;x-signature=ZSBFIcSTCSa6aQ8nIoNWK4RuGTA%3D" alt="" loading="lazy"/></p>
<p>ç¬¬ä¸€ï¼Œé¢†åŸŸç‰¹æ®Šæ€§ã€‚æ¨¡å‹çš„ä»£ç ç”Ÿæˆèƒ½åŠ›å¾ˆå¼ºï¼Œä½†åœ¨æ—©æœŸè®­ç»ƒè¯­æ–™é‡Œï¼ŒSQL çš„å æ¯”éå¸¸ä½ã€‚æ‰€ä»¥ä½ ä¼šå‘ç°ï¼šå®ƒå†™ Python è¿˜ä¸é”™ï¼Œå†™ SQL å°±æ˜æ˜¾åƒåŠ›ã€‚å¦å¤–ï¼Œåœ¨æ•°æ®é¢†åŸŸï¼Œæ•°æ®â€œæ­£ç¡®æ€§â€æå…¶å…³é”®ã€‚æ‰¾èµ„æ–™ã€å†™ä¸ªæƒ³æ³•ï¼Œå‡†ä¸å‡†å½±å“ä¹Ÿè®¸ä¸å¤§ï¼›ä½†ä¸€ä»½æ•°æ®åˆ†ææŠ¥å‘Šï¼Œæˆ–è€…ä¸€ä¸ªå…³é”®æ•°å€¼ï¼Œæœ€åè¦ç»™åˆ°è€æ¿ï¼Œå¦‚æœè¿™ä¸ªæ•°å·®ä¹‹åƒé‡Œï¼Œåæœå°±å¾ˆä¸¥é‡äº†ã€‚</p>
<p>è¿˜æœ‰ï¼Œä»è¯„æµ‹çš„ç»´åº¦æ¥çœ‹ï¼Œé€šç”¨æ¨¡å‹é€šå¸¸å…³æ³¨ä¸€äº›åŸºç¡€èƒ½åŠ›ï¼Œæ¯”å¦‚æ•°å­¦ã€‚ä½†ä¸€æ—¦è½åˆ°çœŸæ­£çš„ Agent åœºæ™¯ï¼Œæƒ…å†µå°±å®Œå…¨ä¸åŒäº†ã€‚åœ¨æ•°æ®ï¼ˆData Agentï¼‰æ–¹å‘ï¼Œåƒâ€œæ·±åº¦ç ”ç©¶â€è¿™æ ·çš„äº§å“å½¢æ€ï¼Œæ¶‰åŠçš„ç»´åº¦éå¸¸å¤šã€‚å…¶åŒ…æ‹¬æ•°æ®æºçš„å·®å¼‚ã€æ•°æ®çš„å¼‚æ„æ€§éƒ½å¾ˆå¤æ‚ã€‚å› æ­¤ï¼Œå¯¹åº”çš„è¯„ä¼°ç»´åº¦ä¹Ÿéœ€è¦ä»å•ä¸€èƒ½åŠ›ï¼Œæ‰©å±•åˆ°èƒ½å¤Ÿè¦†ç›–è¿™äº›å¤æ‚å› ç´ ã€‚</p>
<p>ç¬¬ä¸‰ï¼Œâ€œæ•ˆç‡â€ä¸â€œå¹¶å‘â€éå¸¸å…³é”®ï¼Œè¿™é‡Œçš„å¹¶å‘æŒ‡ç ”å‘å¹¶å‘ï¼ŒåŒæ—¶å°è¯•å¤šç§æ–¹æ¡ˆã€‚è¿™ç‚¹å°¤å…¶é‡è¦ã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºåœ¨åšæ¨¡å‹æ—¶ï¼Œæˆ‘ä»¬è‡³ä»Šå¹¶æ²¡æœ‰ä¸€å¥—è¢«éªŒè¯ä¸ºâ€œæœ€æœ‰æ•ˆâ€çš„é€šç”¨æ¶æ„ï¼›æ¨¡å‹æœ¬èº«ä¹Ÿåœ¨ä¸æ–­è¿­ä»£ã€‚å¾ˆéš¾æ²¿ç€ä¸€æ¡æŠ€æœ¯è·¯çº¿ä¸€ç›´èµ°åˆ°åº•ï¼Œæ‰€ä»¥å¿…é¡»åšå¤§é‡å°è¯•ï¼›æ–°æ¨¡å‹å‡ºæ¥ï¼Œä¹Ÿè¦åšæ–°çš„æ¢ç´¢ã€‚æ­¤æ—¶èƒ½å¦æ‰¿è½½æ–¹æ¡ˆç©ºé—´çš„å¤æ‚åº¦ï¼Œå¾€å¾€å†³å®šæˆè´¥ã€‚å› æ­¤ï¼Œè¯„æµ‹çš„æ•ˆç‡å°±æ˜¾å¾—æ ¼å¤–é‡è¦ã€‚ä¸€è½®å›å½’æµ‹è¯•è¦åšä¸¤å‘¨ï¼Œå’Œä¸€å¤©ä¹‹å†…å°±èƒ½åˆ¤æ–­ä¸€ä¸ªæ–¹æ¡ˆæ˜¯å¥½æ˜¯åï¼Œå¸¦æ¥çš„ç ”å‘å‘¨æœŸå·®å¼‚å¯æƒ³è€ŒçŸ¥ã€‚</p>
<h3 data-id="heading-1">ä¸‰å±‚è¯„æµ‹æ¡†æ¶</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f64d25fdc61947fbaf311c766faabfea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767252021&amp;x-signature=Js5Geq1pi94dhwObAGbO%2FtMCPlA%3D" alt="" loading="lazy"/></p>
<p>å‰é¢è¯´çš„æ˜¯æ•°æ®é¢†åŸŸé‡Œå¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜ã€‚å›åˆ° Agent è¿™è¾¹ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªâ€œä¸‰å±‚è¯„æµ‹â€çš„ä½“ç³»è®¾è®¡ã€‚åœ¨æ„å»ºå¤§æ¨¡å‹çš„ Agent åº”ç”¨æ—¶ï¼Œé€šå¸¸ä¼šåŒæ—¶é¢å¯¹å‡ å±‚é—®é¢˜ã€‚</p>
<p>æœ€ä¸‹å±‚æ˜¯æŠ€æœ¯é€‰å‹ã€‚å¸‚é¢ä¸Šçš„æ¨¡å‹å¾ˆå¤šï¼Œè±†åŒ…ã€åƒé—®ã€æ–‡å¿ƒã€DeepSeek ç­‰ç­‰ã€‚æˆ‘çš„ Agent å…³æ³¨å“ªäº›èƒ½åŠ›ï¼Œå“ªäº›æ¨¡å‹èƒ½è¾¾æ ‡ã€å€¼å¾—è¿›å…¥å®éªŒé›†ï¼Ÿä¸èƒ½ç›²ç›®æŠŠæ‰€æœ‰æ¨¡å‹éƒ½å¾€æ¶æ„é‡Œå †ï¼Œå¹¶å‘å’Œæˆæœ¬éƒ½æ‰¿å—ä¸ä½ã€‚å…ˆåšä¸€è½®æœ‰ä¾æ®çš„ç­›é€‰ï¼Œè¿™ä¸€æ­¥éå¸¸å…³é”®ï¼›</p>
<p>ä¸­é—´å±‚æ˜¯ç ”å‘è¿­ä»£ã€‚ç¡®å®šäº†åˆæ­¥æ¶æ„ä¹‹åï¼Œéœ€è¦æŒç»­ä¼˜åŒ–ï¼Œå¹¶èƒ½çœ‹æ¸… Agent çš„å„ä¸ªéƒ¨åˆ†åœ¨å“ªé‡Œæ‹–äº†åè…¿ã€‚å¤§å®¶ç†Ÿæ‚‰çš„ Multi-Agentã€ReActã€workflow éƒ½ä¼šç”¨åˆ°ã€‚åšæ³•ä¸Šæ›´åƒâ€œå•å…ƒæµ‹è¯•â€å¼çš„è¯„æµ‹ï¼šæŠŠå­æ¨¡å—æ‹†å¼€çœ‹ï¼Œæ—¢çœ‹æ•ˆæœä¹Ÿçœ‹é€Ÿåº¦ï¼ŒæŠŠé—®é¢˜æ”¶æ•›åˆ°å…·ä½“æ¨¡å—ï¼Œè¿­ä»£æ‰é«˜æ•ˆï¼›</p>
<p>æœ€ä¸Šå±‚æ‰æ˜¯ç«¯åˆ°ç«¯çš„ä¸šåŠ¡æ•ˆæœã€‚æœ€ç»ˆè¦ç”¨ä¸€å¥—è¦†ç›–å®Œæ•´é“¾è·¯çš„è¯„æµ‹é›†ä¸æµç¨‹ï¼ŒåŠ ä¸Šç›¸åº”çš„æ–¹æ³•å®è·µï¼Œæ¥è¡¡é‡è¿™ä¸ª Agent åœ¨çœŸå®ä»»åŠ¡ä¸­çš„è¡¨ç°åˆ°åº•å¦‚ä½•ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b8c4cb9456845d7b2e403b73ddc82e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767252021&amp;x-signature=KfFxpTfBoH%2FtR404RHH%2FJV0eLpY%3D" alt="" loading="lazy"/></p>
<p>å›´ç»•ä¸Šè¿°å„å±‚ï¼Œæˆ‘ä»¬å¼€å±•äº†é…å¥—å®è·µã€‚</p>
<p>ç¬¬ä¸€ä¸ªå±‚é¢æ˜¯åŸºç¡€èƒ½åŠ›è¯„æµ‹ï¼Œå¯¹åº”æˆ‘ä»¬å‰é¢è¯´çš„æŠ€æœ¯é€‰å‹é˜¶æ®µã€‚åšè¿™ä»¶äº‹çš„ç›®çš„ï¼Œæ˜¯å…ˆè®¾å®šä¸€ä¸ªâ€œå‡†å…¥é—¨æ§›â€ã€‚ä»¥æ•°æ®é¢†åŸŸä¸ºä¾‹ï¼Œæˆ‘ä»¬ä¼šå…³æ³¨å·¥å…·è°ƒç”¨èƒ½åŠ›ï¼ˆFunction Callã€Tool usingã€MCP ç­‰ï¼‰ã€æ•°å€¼è®¡ç®—ä¸è¡¨æ ¼ç†è§£ã€æ•°æ®å¹»è§‰çš„æ§åˆ¶ã€å¤æ‚æŒ‡ä»¤éµå¾ªï¼Œä»¥åŠç¼–ç ä¸ Text-to-SQLã€‚å„ä¸ªæ–¹å‘åŸºæœ¬éƒ½æœ‰å¯å‚è€ƒçš„å¼€æº Benchmarkã€‚æ¯”å¦‚åœ¨ Function Call æ–¹å‘ï¼Œæˆ‘ä»¬è°ƒç ”åä¼šé‡‡ç”¨ ComplexFuncBenchï¼›åœ¨ç¼–ç èƒ½åŠ›ä¸Šï¼Œæ—©æœŸç†Ÿæ‚‰çš„ HumanEval ä»æœ‰å‚è€ƒä»·å€¼ï¼Œç°åœ¨ä¹Ÿä¼šå¼•å…¥ SWE-Benchï¼ˆè¯„ä¼°ä»£ç  Agent èƒ½åŠ›çš„ Benchmarkï¼‰ã€‚è¿™äº›è¯„æµ‹ä¼šæ¥å…¥æˆ‘ä»¬çš„å¹³å°ï¼Œæä¾›ç»™æ•°æ®å¹³å°çš„å„ä¸ªæ¢ç´¢å›¢é˜Ÿä½¿ç”¨ã€‚</p>
<p>ç¬¬äºŒä¸ªå±‚é¢æ˜¯ç»„ä»¶ï¼ˆæˆ–å­ Agentï¼‰çš„è¯„æµ‹ï¼Œé¢å‘çš„æ˜¯ Agent çš„å„ä¸ªç»„æˆéƒ¨åˆ†ã€‚å¯ä»¥æŠŠä¸€ä¸ª Agent çš„å·¥ä½œæµç¨‹æ‹†æˆå‡ ä¸ªé˜¶æ®µï¼šå…ˆæ˜¯å¬å›ï¼Œæ¯”å¦‚åš Schema Linkingï¼›ç„¶åæ˜¯ç†è§£ä¸è§„åˆ’ï¼›æ¥ç€è¿›å…¥æ´å¯Ÿã€åˆ†æä¸æ‰§è¡Œï¼›æœ€åæ˜¯ç»“æœæ€»ç»“ï¼ŒæŠŠç»“è®ºå†™æˆæŠ¥å‘Šã€‚æˆ‘ä»¬è¦çœ‹çš„ï¼Œæ˜¯é—®é¢˜å‡ºåœ¨ç¬¬å‡ ä¸ªé˜¶æ®µï¼Œä»¥åŠæ¯ä¸ªé˜¶æ®µçš„å®é™…è¡¨ç°å¦‚ä½•ã€‚æ”¾åˆ°ä¸€ä¸ªå…¸å‹çš„ RAG åº”ç”¨é‡Œï¼Œå‰åºå¬å›çš„ä¸Šä¸‹æ–‡è´¨é‡ä¼šç›´æ¥å†³å®šåç»­è¡¨ç°ï¼šSchema é‡Œæœ‰æ²¡æœ‰æ‰¾åˆ°æ­£ç¡®çš„å­—æ®µã€é˜ˆå€¼å’ŒæŒ‡æ ‡ï¼Œéƒ½ä¼šå½±å“åé¢ SQL èƒ½ä¸èƒ½å†™å¯¹ã€‚å¦‚æœç¬¬ä¸€é˜¶æ®µå°±åå·®å¾ˆå¤§ï¼Œåé¢å†æ€ä¹ˆä¼˜åŒ– Agent ä¹Ÿå¾ˆéš¾â€œæ‹‰å›â€ã€‚</p>
<p>ç¬¬ä¸‰ä¸ªå±‚é¢ï¼Œæ˜¯ç«¯åˆ°ç«¯æ•ˆæœè¯„æµ‹ã€‚ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬é’ˆå¯¹ç‰¹å®šçš„ä¸šåŠ¡åœºæ™¯æ„å»ºç›¸åº”çš„è¯„æµ‹é›†ï¼›å±‚çº§è¶Šå¾€ä¸Šï¼Œæˆ‘ä»¬ç¦»ä¸šåŠ¡è¶Šè¿‘ï¼Œè¯„æµ‹ä¹Ÿå°±è¶Šè´´è¿‘å®é™…çš„ä¸šåŠ¡åœºæ™¯å’Œäº§å“å½¢æ€çš„å®šä¹‰ã€‚æˆ‘ä»¬ç›¸åº”åœ°æ„å»ºè¯„æµ‹é›†å’Œè‡ªåŠ¨åŒ–è¯„æµ‹æ–¹æ³•ï¼›åŒæ—¶ï¼Œåœ¨æˆ‘ä»¬çš„è¯„ä¼°å¹³å°ä¸Šè®¾æœ‰â€œæ•°æ®ä¸é£è½®â€æ¨¡å—å¯¹æ¥ä¸šåŠ¡ï¼ŒæŠŠçº¿ä¸Šçš„ä¼šè¯æ—¥å¿—é‡‡é›†è¿›æ¥ï¼Œç”¨äº Case Studyã€å›å½’è¯„æµ‹é›†çš„æ²‰æ·€ï¼Œä»¥åŠäººå·¥æ ‡æ³¨ã€‚</p>
<h3 data-id="heading-2">Data Agentè¯„æµ‹æŠ€æœ¯åˆ›æ–°å’Œå®è·µ</h3>
<p>åŸºäºä¸Šè¿°â€œä¸‰å±‚è¯„æµ‹â€æ¡†æ¶ï¼Œä¸‹ä¸€æ­¥å°†èšç„¦ Data Agent è¿™ä¸€ä¸»é¢˜ï¼Œç»“åˆä¸¤ä¸ªå…·ä½“æ¡ˆä¾‹å±•å¼€è¯´æ˜ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0d50b34c5184e9bb12c5617feece4f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767252021&amp;x-signature=ksq9dCMZuzhqJ1DXLNedxlRqjZA%3D" alt="" loading="lazy"/></p>
<p>å…¶ä¸€ä¸º Text-to-SQL ä»»åŠ¡ã€‚æ— è®ºæ˜¯é—®ç­”å–æ•°ç±» Agentï¼Œè¿˜æ˜¯æ›´ç»¼åˆçš„åˆ†æå‹ Data Agentï¼Œè‡ªç„¶è¯­è¨€æŸ¥è¯¢é€šå¸¸éœ€è¦è½¬åŒ–ä¸ºå®é™…çš„ SQL æŸ¥è¯¢ï¼›æ— è®ºç”¨æˆ·æå‡ºå…·ä½“æŒ‡æ ‡é—®é¢˜ï¼ˆå¦‚â€œæ˜¨å¤©çš„ DAU æ˜¯å¤šå°‘â€ï¼‰è¿˜æ˜¯æ€»ç»“æ€§åˆ†æè¯·æ±‚ï¼ˆå¦‚â€œè¯·åˆ†æä¸Šä¸€å‘¨çš„æ•°æ®æƒ…å†µâ€ï¼‰ï¼Œåº•å±‚é€šå¸¸éƒ½ä¼šæ‹†è§£ä¸ºè‹¥å¹²æŸ¥è¯¢ä»»åŠ¡ï¼Œæ ¸å¿ƒè¯„ä¼°ç‚¹è½åœ¨ SQL æŸ¥è¯¢çš„å‡†ç¡®ç‡ä¸è¯¯å·®å½’å› ã€‚ä¼ ç»Ÿçš„ Text-to-SQLï¼ˆæˆ– NL-to-SQLï¼‰è¯„æµ‹æ–¹æ³•ä¸æ•°æ®é›†ï¼ˆå¦‚ Spiderã€WikiSQLã€BIRD-SQL ç­‰ï¼‰ä¸ºé€šç”¨åœºæ™¯æä¾›äº†åŸºç¡€è¡¡é‡æ‰‹æ®µï¼Œä½†åœ¨é¢å‘å¤§æ•°æ®ä¸çœŸå®ä¸šåŠ¡çº¦æŸçš„ç¯å¢ƒä¸­ï¼Œä»ä¼šé­é‡è¯¸å¤šé€‚é…æ€§ä¸å¯æ‰©å±•æ€§é—®é¢˜ã€‚</p>
<p>ä¼ ç»Ÿè¯„æµ‹æ–¹æ³•å¾€å¾€åªç»™å‡ºâ€œå¯¹/é”™â€çš„ç»“è®ºï¼Œè¿™ç§äºŒå…ƒåˆ¤å®šæ— æ³•ä½“ç°èƒ½åŠ›ä¼˜åŠ£çš„ç»†å¾®å·®å¼‚ã€‚ä»¥ä¸€æ¡ SQL ä¸ºä¾‹ï¼Œè‹¥ä»…åœ¨æŸä¸ªæ¡ä»¶ä¸Šå°†â€œâ‰¥â€å†™æˆâ€œ&gt;â€ï¼Œå…¶ä½™éƒ¨åˆ†å®Œå…¨æ­£ç¡®ï¼Œæ‰§è¡Œç»“æœå¯èƒ½åªç›¸å·®æå°ï¼Œä½†åœ¨äºŒå…ƒè¯„åˆ†ä¸‹ä»è¢«åˆ¤ä¸ºé›¶åˆ†ã€‚è‹¥æ­¤ç±»æƒ…å†µé«˜é¢‘å‡ºç°ï¼Œæ¨¡å‹çš„å®é™…å¯ç”¨æ€§ä»ç„¶è¾ƒå¼ºâ€”â€”åœ¨æ•°æ®å¼€å‘åœºæ™¯ä¸­ï¼Œåªéœ€æ”¹åŠ¨ä¸ªåˆ«ç»†èŠ‚å³å¯æŠ•å…¥ä½¿ç”¨â€”â€”è€Œä¼ ç»Ÿæ–¹æ³•æ— æ³•åæ˜ è¿™ç§â€œæ¥è¿‘æ­£ç¡®â€çš„ä»·å€¼ã€‚</p>
<p>æ‰€è°“â€œæ‰§è¡Œæ­£ç¡®æ€§â€ï¼Œæ˜¯æŒ‡å¯¹æ¯ä¸ªé—®é¢˜â€”ç­”æ¡ˆå¯¹æä¾›æ ‡å‡† SQL ä¸æµ‹è¯•æ•°æ®é›†ï¼Œåˆ†åˆ«æ‰§è¡Œæ ‡å‡† SQL ä¸æ¨¡å‹é¢„æµ‹çš„ SQLï¼Œæ¯”è¾ƒç»“æœæ˜¯å¦ä¸€è‡´ï¼Œä»¥æ­¤åˆ¤æ–­å¯¹é”™ã€‚</p>
<p>ç„¶è€Œå®è·µè¡¨æ˜ï¼Œè¿™ä¸€æ–¹æ³•æ˜“äº§ç”Ÿè¯¯åˆ¤ã€‚æ ¹æºåœ¨äºæµ‹è¯•æ•°æ®åˆ†å¸ƒå¹¶ä¸å®Œå¤‡ï¼Œå¯èƒ½å­˜åœ¨â€œéç­‰ä»· SQL æ‰§è¡Œç»“æœç›¸åŒâ€çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼Œage &gt; 34 ä¸ age â‰¥ 34 åœ¨æµ‹è¯•é›†ä¸­æ°æ—  34 è¿™ä¸€è¾¹ç•Œå€¼æ—¶ï¼ŒäºŒè€…è¾“å‡ºä¸€è‡´ï¼Œå¯¼è‡´é”™è¯¯åœ°åˆ¤å®šä¸ºæ­£ç¡®ã€‚è¿™é‡Œæ”¾ä¸€ä¸ªç¨å¾®å¤æ‚ç‚¹çš„ä¾‹å­ï¼šæˆ‘ä»¬çš„ <strong>goldï¼ˆground truthï¼‰</strong> æ ‡å‡†ç­”æ¡ˆå…¶å®æ˜¯ä¸€æ¡å¾ˆç®€å•çš„ SQLï¼Œé—®é¢˜æ˜¯â€œæ–‡æ¡£ä¸­å“ªäº› <code>template_id</code> è¢«ä½¿ç”¨è¿‡â€ã€‚ä½†æ¨¡å‹åœ¨é¢„æµ‹æ—¶ï¼Œå»å’Œå¦ä¸€å¼  <code>template</code> è¡¨åšäº† <code>INNER JOIN</code>ï¼ŒæŒ‰ <code>id</code> å…³è”ã€‚è‚‰çœ¼ä¸€çœ‹å°±çŸ¥é“ä¸¤è€…ä¸æ˜¯ä¸€å›äº‹ã€‚æŒ‰ç†è¯´ï¼Œæ”¾åˆ°è®¾è®¡æ›´ä¸¥è°¨çš„æ•°æ®é›†ä¸Šï¼Œåº”è¯¥èƒ½æŠŠå·®å¼‚æµ‹å‡ºæ¥ï¼›å¯ä¸å¹¸çš„æ˜¯ï¼Œåœ¨ Spider ä¸Šä¸¤æ¡ SQL çš„æ‰§è¡Œç»“æœä¸€æ¨¡ä¸€æ ·ï¼Œæœ€ç»ˆé€ æˆäº†è¯¯åˆ¤ã€‚</p>
<p>è¿˜æœ‰ä¸€ç§åšæ³•æ˜¯æ¯”è¾ƒæ ‡å‡†ç­”æ¡ˆ SQL ä¸é¢„æµ‹ SQL çš„<strong>æ–‡æœ¬ç›¸ä¼¼åº¦</strong>ã€‚å­—é¢ä¸Šå¯ä»¥ç›´æ¥æ¯”å¯¹ä¸€è‡´æ€§ï¼Œå¹¶è®¡ç®—ä¸€ä¸ªç›¸ä¼¼åº¦åˆ†æ•°ï¼Œæ¯”å¦‚ä½™å¼¦ç›¸ä¼¼åº¦ç­‰ã€‚ä½†è¿™ç±»æ–¹æ³•å¾ˆéš¾å‡†ç¡®åæ˜ <strong>è¯­ä¹‰/é€»è¾‘ä¸Šçš„ç­‰ä»·</strong>ï¼šå“ªæ€•åªæ˜¯è¡¨åæˆ–å­æŸ¥è¯¢çš„åˆ«åä¸åŒï¼Œä¹Ÿå¯èƒ½è¢«åˆ¤ä¸ºä¸ä¸€è‡´è€Œè¯¯åˆ¤ã€‚</p>
<p>ç¬¬ä¸‰ä¸ªé—®é¢˜ï¼Œå¦‚æœè¦åœ¨å¤§æ•°æ®å¼•æ“ï¼ˆæ¯”å¦‚ ClickHouseï¼‰ä¸Šæ„é€ ä¸€å¥—å¯ç”¨äºå›å½’æµ‹è¯•çš„æ•°æ®é›†ï¼Œæˆæœ¬éå¸¸é«˜ã€‚è¿™äº›éƒ½æ˜¯ä¼ ç»Ÿ Text-to-SQL è¯„æµ‹åœ¨å®é™…è½åœ°ä¸­çš„å±€é™ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea44fe24266045d8a7aee777cc0f8334~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767252021&amp;x-signature=Indj3e6BSeCgC%2B%2F9M6hKd3YBuW0%3D" alt="" loading="lazy"/></p>
<p>é’ˆå¯¹ä»¥ä¸Šé—®é¢˜ï¼Œæˆ‘ä»¬åšäº†ä¸€äº›æ”¹è¿›ï¼Œæ ¸å¿ƒæ˜¯æå‡ºä¸€å¥—<strong>åŸºäºè¯­ä¹‰ç­‰ä»·</strong>çš„è¯„æµ‹æ–¹æ³•ã€‚æ‰€è°“è¯­ä¹‰ç­‰ä»·ï¼Œæ˜¯æŒ‡ä¸¤æ¡ SQL åœ¨<strong>é€»è¾‘å«ä¹‰</strong>ä¸Šç›¸åŒï¼Œé‚£ä¹ˆå®ƒä»¬åœ¨<strong>æ‰§è¡Œç»“æœ</strong>ä¸Šå°±åº”å½“ç›¸åŒï¼›åªè¦åˆ¤æ–­è¿™ä¸€ç‚¹å³å¯ï¼Œå¹¶ä¸ä¸€å®šéœ€è¦çœŸæ­£å»è·‘ä¸€æ¬¡æŸ¥è¯¢ã€‚</p>
<p>åšæ³•ä¸Šï¼Œå…ˆæŠŠ SQL å½“ä½œä»£ç å¤„ç†ï¼Œè¡¨ç¤ºæˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ã€‚è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬å€ŸåŠ© <strong>Apache Calcite</strong> åšæ‰§è¡Œå±‚çš„ä¸‹æ¨ï¼ŒæŠŠå­—é¢ SQL è½¬æˆæ‰§è¡Œå±‚çš„è¯­æ³•è¡¨ç¤ºï¼Œä¹Ÿå°±æ˜¯ <strong>RelNode</strong>ã€‚åˆ°äº†è¿™ä¸€å±‚ï¼Œå¾ˆå¤šå†™æ³•ä¸Šçš„ä¸ä¸€è‡´ä¼šè¢«å½’ä¸€åˆ°ç›¸åŒçš„æ‰§è¡Œè¯­ä¹‰ã€‚</p>
<p>ä¸¾ä¸¤ä¸ªç›´è§‚çš„ä¾‹å­ï¼šæŸäº›æƒ…å†µä¸‹ï¼Œç”¨ <code>JOIN</code> å’Œç”¨ <code>IN</code> å­æŸ¥è¯¢æ˜¯ç­‰ä»·çš„ï¼›å†æ¯”å¦‚è¿æ¥ä¸¤ä¸ªè¡¨æ—¶ï¼Œä½ å¯ä»¥ç”¨å­æŸ¥è¯¢ï¼Œä¹Ÿå¯ä»¥ç”¨ <code>WHERE</code> æ¡ä»¶ï¼Œæœ€ç»ˆä¸‹æ¨åˆ°æ‰§è¡Œè¯­æ³•æ ‘ä¸Šçš„æ‰§è¡Œè¿‡ç¨‹æ˜¯ä¸€æ ·çš„ã€‚é€šè¿‡è¿™æ ·çš„è¯­ä¹‰ä¸‹æ¨å’Œæ ‡å‡†åŒ–ï¼Œèƒ½æŠ¹å¹³å¤§é‡è¡¨é¢å·®å¼‚ã€‚</p>
<p>ç¬¬äºŒä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬æŠŠèŠ‚ç‚¹ä¹‹é—´çš„å¼•ç”¨å…³ç³»å»ºç«‹èµ·æ¥ï¼šå‚è€ƒç­”æ¡ˆæ˜¯ä¸€å¼ å›¾ï¼Œé¢„æµ‹ç­”æ¡ˆä¹Ÿæ˜¯ä¸€å¼ å›¾ï¼Œç„¶åè®­ç»ƒä¸€ä¸ªå›¾åŒ¹é…ç½‘ç»œï¼ˆGraph-Matching Networkï¼Œ<strong>GMN</strong>ï¼‰æ¥è®¡ç®—ä¸¤æ¡ SQL åœ¨è¯­æ³•/è¡¨è¾¾ä¸Šçš„ç›¸ä¼¼åº¦ã€‚åŸºäºè¯­æ³•æ ‘çš„åŒ¹é…è¿™ä¸€è·¯ï¼Œæˆ‘ä»¬ç§°ä¸º <strong>RelPM</strong>ï¼ˆåœ¨æ‰§è¡Œå±‚é¢çš„è¯­æ³•æ ‘ä¸Šåš <strong>Partial Matching</strong> çš„å±€éƒ¨åŒ¹é…ï¼‰ï¼šç”¨è§„åˆ™åšå±€éƒ¨æ¯”å¯¹å¹¶èµ‹æƒï¼Œå¾—åˆ° 0ï½1 çš„ç›¸ä¼¼åº¦åˆ†æ•°ï¼Œå·²ç»æ˜æ˜¾ä¼˜äºä¼ ç»Ÿåšæ³•ã€‚è¿›ä¸€æ­¥ï¼Œåœ¨ <strong>FuncEvalGMN</strong> ä¸Šï¼Œæ— è®ºå¯¹æ¯”åŸºäºæ‰§è¡Œæ­£ç¡®æ€§çš„è¯„æµ‹ã€åŸºäºæ–‡æœ¬/è¯­ä¹‰ç›¸ä¼¼åº¦çš„è¯„æµ‹ï¼Œè¿˜æ˜¯ä¸€äº›åŸºäº BERT çš„é¢„è®­ç»ƒæ¨¡å‹ï¼Œæˆ‘ä»¬çš„æ•ˆæœéƒ½æœ‰æ˜¾è‘—æå‡ã€‚åœ¨ä¸šåŠ¡ä¾§ï¼Œè¿™å¥—æ–¹æ³•ä¹Ÿå·²ç»æˆä¸ºæˆ‘ä»¬æ•°æ®é¢†åŸŸçš„æ ¸å¿ƒç®—æ³•ä¹‹ä¸€ã€‚</p>
<p>ä»¥ä¸Š Text-to-SQL æ›´åå‘â€œæŸ¥è¯¢â€ç±»åœºæ™¯ï¼Œä¸è¿‡ Data Agent çš„äº§å“å½¢æ€åœ¨ä¸æ–­ä¸°å¯Œã€‚ç°åœ¨å½¢æˆäº†ä¸€ç§æ–°çš„äº§å“å½¢æ€â€”â€”â€œæ·±åº¦ç ”ç©¶â€ã€‚ç”¨æˆ·åªéœ€æå‡ºä¸€ä¸ªç®€å•çš„é—®é¢˜ï¼Œæˆ–è€…æŠŠæ„å›¾æè¿°æ¸…æ¥šï¼Œç³»ç»Ÿå°±ä¼šç»™å‡ºä¸€å¥—å®Œæ•´çš„åˆ†ææµç¨‹ï¼Œå¹¶ä¸”èƒ½å¤ŸåŒæ—¶å®Œæˆå¤šç§åˆ†æä»»åŠ¡ã€‚è¯„æµ‹åœ¨è¿™é‡Œä¼šæ˜æ˜¾æ›´éš¾ã€‚å®ƒä¸å†æ˜¯ç®€å•çš„æŸ¥æ•°é¢˜ï¼Œæ¯” Text-to-SQL éš¾å¾—å¤šã€‚æˆ‘ä»¬è¦å›ç­”çš„ä¸æ˜¯â€œæŸ¥å¾—å¯¹ä¸å¯¹â€è¿™ä¹ˆå•ä¸€çš„é—®é¢˜ï¼Œè¿˜è¦åˆ¤æ–­ï¼šè¿™ä»½æŠ¥å‘Šæ˜¯å¦å¯¹ä¸šåŠ¡æœ‰ç”¨ï¼›ç”Ÿæˆæ—¶çš„æ¨ç†æ€è·¯æ˜¯å¦åˆç†ï¼›å†…å®¹æ˜¯å¦å®Œæ•´ï¼Œæ˜¯å¦è¦†ç›–äº†æˆ‘è¦æ±‚å®ƒåˆ†æçš„é‚£äº›è§’åº¦ï¼›æœ€åç»™å‡ºçš„å»ºè®®æ˜¯å¦æœ‰æ•ˆã€‚</p>
<p>ç”¨ä»€ä¹ˆç»´åº¦æ¥è¡¡é‡ä¸€ä»½æ·±åº¦åˆ†ææŠ¥å‘Šâ€œå¥½ä¸å¥½â€ï¼Œä»¥åŠå¦‚ä½•æŠŠè¿™äº›ç»´åº¦åšæˆå¯æ‰§è¡Œçš„è‡ªåŠ¨åŒ–è¯„æµ‹ï¼Œéƒ½æ˜¯å®æ‰“å®çš„æŒ‘æˆ˜ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ec65ebe16a1438d8009a035acef2384~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767252021&amp;x-signature=mRB5lFrSAX1mBErNnIDRaTAW8hU%3D" alt="" loading="lazy"/></p>
<p>å› æ­¤æˆ‘ä»¬é¦–å…ˆå®šä¹‰äº†ä¸€å¥—è¯„æµ‹ä½“ç³»ã€‚å®ƒæ˜¯æŒ‡ç”¨ä¸€å¥—æ˜ç¡®çš„æ ‡å‡†æ¥è¡¡é‡å¥½ä¸åã€‚å°±åƒé«˜è€ƒæœ‰ä¸€æ•´å¥—è¯„ä»·å£å¾„ï¼›å…¬å¸æ‹›è˜ã€æ™‹å‡å’Œç»©æ•ˆä¹Ÿéƒ½æœ‰ç›¸åº”çš„å‡†åˆ™ä¸€æ ·ã€‚é’ˆå¯¹â€œæ·±åº¦ç ”ç©¶â€è¿™ç§äº§å“å½¢æ€ï¼Œæˆ‘ä»¬ä»å‡ ä¸ªè§’åº¦æ¥è¯„ï¼šä¸€æ˜¯åˆ†æä¸æ´å¯Ÿçš„æ·±åº¦ä¸å‡†ç¡®æ€§ï¼›äºŒæ˜¯æŠ¥å‘Šåœ¨å±•ç¤ºä¸Šçš„å¯è¯»æ€§ã€æ˜“è¯»æ€§ï¼›ä¸‰æ˜¯æ‰§è¡Œè¿‡ç¨‹çš„ç¨³å®šæ€§ä¸æˆåŠŸç‡ã€‚å›´ç»•è¿™äº›ï¼Œæˆ‘ä»¬è®¾å®šäº†ç¬¬ä¸€å±‚ä¸ç¬¬äºŒå±‚çš„è¯„ä¼°ç»´åº¦ï¼Œå¹¶åˆ†åˆ«å®šä¹‰äº†å…³é”®æŒ‡æ ‡ï¼Œå¹¶åœ¨æ¯é¡¹æŒ‡æ ‡ä¸‹è®¾å®šå¯è½åœ°çš„è¯„åˆ†ç‚¹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7ceba931ec2490c8d1dd6b2ec71f470~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767252021&amp;x-signature=9odSJst2TlEKbkgaaI598wBQZmI%3D" alt="" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥è°ˆè‡ªåŠ¨åŒ–è¯„ä¼°æŠ€æœ¯ã€‚è¿™æ˜¯ä¸šç•Œç›¸å¯¹å‰æ²¿çš„è¯é¢˜ï¼Œå¤§å®¶å¯èƒ½å¬è¿‡ â€œLLM as a Judgeâ€ æˆ– â€œLLM Judgeâ€ã€‚æˆ‘ä»¬æœ€æ–°çš„æ¢ç´¢æ˜¯<strong>ç”¨ Agent æ¥è¯„æµ‹ Agent</strong>ã€‚åŸå› å¾ˆç®€å•ï¼šå†™ä¸€ä»½æ•°æ®åˆ†ææŠ¥å‘Šï¼Œæ²¡åŠæ³•æŠŠæ•°æ®ç›´æ¥ä¸¢ç»™å¤§æ¨¡å‹å°±æŒ‡æœ›ä¸€æ¬¡æ€§äº§å‡ºå®Œæ•´ç»“æœï¼Œä¸­é—´éœ€è¦å¤§é‡ Agent èƒ½åŠ›æ¥å®Œæˆè¿‡ç¨‹æ€§çš„å·¥ä½œï¼Œæ‰€ä»¥åœ¨è¯„æµ‹ä¾§åŒæ ·è¦å¼•å…¥ Agent æŠ€æœ¯ã€‚</p>
<p>ä»è¯„æµ‹è§’åº¦æ¥è®²ã€‚æˆ‘ä»¬ä¹Ÿä¸å¯èƒ½æŠŠä¸€ä¸ªç»“æœç›´æ¥äº¤ç»™ LLM å°±è®©å®ƒæ‰“åˆ†å®Œäº‹ï¼Œè¯„æµ‹ä»éœ€è¦ Agentã€‚è¿™é‡Œå¤§å®¶å¯èƒ½ä¼šæœ‰ä¸ªè‡ªç„¶çš„ç–‘é—®ï¼šData Agent åšäº†é‚£ä¹ˆå¤šæ¶æ„æ”¹è¿›ã€ç”¨äº†é‚£ä¹ˆå¤šæŠ€æœ¯å’ŒæŠ€å·§ï¼Œç”šè‡³æœ‰é‚£ä¹ˆå¤šä¸“å®¶å‚ä¸ï¼Œå®ƒéƒ½å¯èƒ½ç®—ä¸å¯¹ï¼›ä¸ºä»€ä¹ˆâ€œè¯„æµ‹çš„ Agentâ€èƒ½è¯„å¾—å‡ºæ¥ï¼Ÿ</p>
<p>è¿™æ˜¯æˆ‘ä»¬ä¸€å¼€å§‹å¿…é¡»å›ç­”çš„åŸºç¡€åˆ¤æ–­ã€‚æˆ‘çš„åˆ¤æ–­åŸºäºå‡ ä¸ªå‰æï¼šç¬¬ä¸€ï¼Œ<strong>æŒ‘é”™å¾€å¾€æ¯”åšå¯¹å®¹æ˜“</strong>ï¼›ç»™å‡ºä¸€å¥—å®Œå…¨æ­£ç¡®çš„æ–¹æ¡ˆå¾ˆéš¾ï¼Œä½†æŒ‡å‡ºå…¶ä¸­çš„é—®é¢˜ç›¸å¯¹å®¹æ˜“ã€‚ç¬¬äºŒï¼Œ<strong>å¯ä»¥å¤ç›˜è¿‡ç¨‹</strong>ï¼šæŠŠ Data Agent å†™æŠ¥å‘Šçš„å®Œæ•´æµç¨‹å’Œæ•°æ®è®¡ç®—é“¾è·¯é€æ­¥å®¡é˜…ï¼Œåƒæ‰¹æ”¹åº”ç”¨é¢˜ä¸€æ ·çœ‹æ¯ä¸€æ­¥æ€è·¯æ˜¯å¦åˆç†ï¼›å¦‚æœæ¯ä¸€æ­¥éƒ½æ˜¯å¯¹çš„ï¼Œç»“æœå¤§æ¦‚ç‡ä¹Ÿæ˜¯å¯¹çš„ã€‚ç¬¬ä¸‰ï¼Œ<strong>å¯ä»¥åšå®šå‘ä¼˜åŒ–</strong>ï¼šé’ˆå¯¹ç‰¹å®šé¢†åŸŸæˆ–ç‰¹å®šè¯„æµ‹é›†è¿›è¡Œé’ˆå¯¹æ€§è°ƒä¼˜ï¼Œå¹¶ç»“åˆ Agent æ–¹æ³•å¢å¼ºåˆ¤æ–­èƒ½åŠ›ã€‚åŸºäºè¿™äº›ï¼Œæˆ‘ä»¬è®¤ä¸ºè¿™æ¡è·¯çº¿æ˜¯æœ‰å‰æ™¯çš„ã€‚</p>
<p>åœ¨å®ç°ä¸Šï¼Œæˆ‘ä»¬ç”¨åˆ°ä¸€äº›åŸºæœ¬æŠ€æœ¯ã€‚å…¶ä¸€æ˜¯<strong>è‡ªæˆ‘åæ€</strong>ï¼šæ¨¡å‹å…ˆæŒ‰è¯„åˆ†æ ‡å‡†å®Œæˆä¸€æ¬¡æ‰“åˆ†ï¼Œå†è¿›å…¥åæ€ç¯èŠ‚ï¼Œæ£€æŸ¥è‡ªå·±æ˜¯å¦å®Œæ•´éµå¾ªäº†æ‰“åˆ†é€»è¾‘ã€æ˜¯å¦æœ‰é—æ¼ã€‚å…¶äºŒæ˜¯<strong>å¤šAgent åä½œæ¶æ„</strong>ã€‚æˆ‘ä»¬æŠŠè¯„ä¼°å¯¹è±¡ï¼ˆæŠ¥å‘Šï¼‰ã€è¯„ä¼°è¿‡ç¨‹ã€é—®é¢˜åŠç›¸å…³ä¸Šä¸‹æ–‡ä½œä¸ºæ•´ä½“è¾“å…¥ï¼Œé€å…¥ä¸€ä¸ªç”¨äºåº”ç”¨è¯„ä¼°çš„ç³»ç»Ÿï¼ˆæˆ‘ä»¬ç§°ä¸º<em>Critic</em> <em>Agents</em>ï¼‰ã€‚è¯¥ç³»ç»Ÿé¦–å…ˆæŒ‰æˆ‘ä»¬çš„è¯„åˆ†æ ‡å‡†ä¸ç»†åˆ™å®Œæˆåˆè¯„åˆ†ï¼Œç„¶åäº¤ç»™ <em>Reflect</em>ï¼ˆè‡ªæˆ‘åæ€ï¼‰æ¨¡å—ï¼Œå¤æŸ¥æœ¬æ¬¡æ‰“åˆ†æ˜¯å¦å­˜åœ¨é—æ¼æˆ–ä¸å½“ä¹‹å¤„ã€‚</p>
<p>å†ä¸¾ä¸€ä¸ªæˆ‘ä»¬è¸©è¿‡çš„å‘ï¼šå†™æŠ¥å‘Šæ—¶å¾ˆå®¹æ˜“åœ¨å•ä½è½¬æ¢ä¸Šå‡ºé”™ã€‚åŸå§‹è®¡ç®—å¾—åˆ°çš„æ˜¯ä¸€ä¸ªæ•°ï¼Œå†™è¿›æŠ¥å‘Šå´è¢«è¡¨è¿°æˆâ€œXXä¸‡â€ã€‚è¿™æ—¢æ˜¯ Data Agent çš„é«˜å‘é”™è¯¯ç‚¹ï¼Œä¹Ÿæ˜¯è¯„ä¼°é‡Œå®¹æ˜“è¢«è¯¯åˆ¤çš„ç‚¹ã€‚é’ˆå¯¹è¿™ç±»é—®é¢˜ï¼Œæˆ‘ä»¬ä¼šæŠŠç›¸å…³ç¯èŠ‚äº¤ç»™ <strong>Reflect</strong> çš„åæ€æµç¨‹å¤æŸ¥ï¼›åŒæ—¶å¼•å…¥å¤šä¸ª Agentï¼Œä»ä¸åŒè§’åº¦ã€ç”šè‡³åŸºäºä¸åŒçš„åº•å±‚æ¨¡å‹åˆ†åˆ«æ‰“åˆ†ï¼Œæœ€åç”±â€œè£åˆ¤é•¿â€ç»Ÿä¸€å®¡é˜…æ•´æ¡æ‰“åˆ†é“¾è·¯åŠå…¶ä¸æ ‡å‡†ç­”æ¡ˆçš„å¯¹é½æƒ…å†µã€‚</p>
<p>æ•´ä½“æ¶æ„ä¸Šï¼Œæˆ‘ä»¬è¿˜ä¼šç»“åˆ <strong>ReAct</strong>ï¼Œè®©è¯„æµ‹ä¾§â€œè‡ªå·±å†™ä»£ç â€æŠŠå…³é”®æ•°æ®å¤ç®—ä¸€éï¼Œæ ¸å¯¹è®¡ç®—æ˜¯å¦æ­£ç¡®ã€‚é‡åˆ°ç‰¹å®šåœºæ™¯ï¼ˆæ¯”å¦‚å½’å› åˆ†æï¼‰ï¼Œè¦å®Œæˆæœ‰æ•ˆè¯„ä¼°è¿˜éœ€è¦ä¸“ä¸šçš„é¢†åŸŸè®¡ç®—å·¥å…·ï¼›è¿™äº›å·¥å…·åŒæ ·äº¤ç”±è¯„åˆ¤æ–¹è°ƒç”¨ï¼Œæ‰èƒ½å¯¹è¯¥ç±»ä»»åŠ¡ç»™å‡ºè¯„ä»·ç»“æœã€‚</p>
<p>ä¸ºè¯´æ˜æ–¹æ³•æœ‰æ•ˆæ€§ï¼Œä»¥ä¸‹ç»™å‡ºä¸¤ä¸ªçœŸå®æ¡ˆä¾‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5ad69ba94ec43108c6e636671dd69f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767252021&amp;x-signature=%2BCNWPPFhe5zvbzK8O2GnSHqNTlI%3D" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯ç¬¬ä¸€ä¸ªæ¡ˆä¾‹ï¼šæˆ‘ä»¬ç”¨è‡ªåŠ¨åŒ–è¯„æµ‹åœ¨æŠ¥å‘Šé‡Œå®šä½åˆ°æ•°æ®é”™è¯¯ã€‚ä¸Šé¢çš„ç‰‡æ®µæ˜¯ä¸€ä¸ªå…¸å‹çš„å½’å› åœºæ™¯ã€‚æœºè¯„å‘ç°ï¼ŒæŠ¥å‘Šå†™åˆ°â€œå¾·èŠ™å·§å…‹åŠ›å•ç¬”é”€å”®é¢ 1.5 ä¸‡â€ç­‰æ•°å­—æ²¡æœ‰çœŸå®æ¥æºã€‚å›æº¯è¿‡ç¨‹å¯ä»¥çœ‹åˆ°ï¼Œå³ä¾§çš„ SQL å°‘å†™äº†ä¸€ä¸ª <code>GROUP BY å•†å“å</code>ã€‚åœ¨è¿™ç§å†™æ³•ä¸‹ï¼Œåªèƒ½æŸ¥å‡ºä¸€ç³»åˆ—æ˜ç»†è®¢å•ï¼Œä¸å¯èƒ½ç›´æ¥å¾—åˆ°â€œå¾·èŠ™å·§å…‹åŠ› 1.5 ä¸‡â€è¿™æ ·çš„èšåˆç»“è®ºã€‚åŸå§‹æ˜ç»†é‡Œè™½ç„¶å‡ºç°è¿‡â€œ1.5 ä¸‡â€è¿™ä¸ªæ•°ï¼Œä½†æ— æ³•æ®æ­¤æ¨æ–­å®ƒå¯¹åº”â€œå¾·èŠ™å·§å…‹åŠ›â€ã€‚è¿™ä¸€é—®é¢˜è¢«æœºè¯„å‡†ç¡®æŠ“å‡ºã€‚</p>
<p>åœ¨äººè¯„åœºæ™¯ä¸­ï¼Œè¯»è¿‡ç±»ä¼¼æŠ¥å‘Šçš„åŒå­¦ä¼šæœ‰åŒæ„Ÿï¼šåƒ OpenAI çš„ Deep Research é‚£æ ·çš„é•¿æŠ¥å‘Šï¼Œè¦æŠŠå…¶ä¸­æ¯ä¸ªæ•°å­—éƒ½æ ¸éªŒä¸€éï¼Œå‡ ä¹ä¸ç°å®ï¼›äººè¯„éå¸¸å®¹æ˜“æ¼é”™ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œæœºè¯„åœ¨è¿™ç±»ç»†ç²’åº¦ã€å¾ˆå¤æ‚çš„æ ¡éªŒä¸Šæ›´æœ‰ä¼˜åŠ¿ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10d18b1457914c7c8dcbc766f9c5b6de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767252021&amp;x-signature=UGrdIkYPUWunQkXZJzTTHEDMVcY%3D" alt="" loading="lazy"/></p>
<p>ç¬¬äºŒä¸ªä¾‹å­ï¼Œæˆ‘ä»¬è¯„ä¼°çš„æ˜¯â€œåˆ†ææ„å›¾çš„å®Œæˆåº¦â€ã€‚å·¦è¾¹æ˜¯é¢˜ç›®ï¼šå¯¹ DAU æ•°æ®åšåˆ†æï¼›ä¸‹é¢å…ˆå®šä¹‰åˆ†æå¯¹è±¡ï¼Œå†ç»™å‡ºä¸€å¥—å®Œæ•´çš„åˆ†ææ¡†æ¶ï¼Œä¹Ÿå°±æ˜¯è¦ä»å“ªäº›è§’åº¦å±•å¼€ã€‚å³è¾¹æ˜¯è‡ªåŠ¨åŒ–è¯„æµ‹é¡µé¢çš„æˆªå›¾ã€‚çº¢æ¡†é‡Œå¯ä»¥çœ‹åˆ°ï¼šè¿™ä¸ªé¢˜ç›®ä¸€å…±æœ‰ 18 ä¸ªåˆ†ææ„å›¾ï¼Œè¿™ä»½æŠ¥å‘Šå®Œæˆäº† 17 ä¸ªï¼Œå¯¹åº”å¾—åˆ† 0.94ã€‚ç³»ç»Ÿè¿˜ä¼šæ ‡æ³¨å“ªä¸€ä¸ªæ„å›¾æ²¡æœ‰å®Œæˆï¼Œå·²å®Œæˆçš„æ„å›¾åœ¨æŠ¥å‘Šä¸­å¯¹åº”çš„æ˜¯å“ªäº›ç« èŠ‚ã€‚ç”±æ­¤èƒ½ç›´è§‚çœ‹åˆ°æœºè¯„åœ¨è¿™ä¸ªåœºæ™¯ä¸‹çš„å®é™…æ•ˆæœã€‚</p>
<p>æœ€åç»™ä¸€ç»„ç¦»çº¿å®éªŒæ•°æ®ï¼šæˆ‘ä»¬åšäº†äººè¯„ä¸æœºè¯„çš„å¯¹æ¯”ã€‚æœºè¯„åœ¨<strong>äº‹å®æ€§é”™è¯¯</strong>ä¸Šçš„å¬å›ç‡è¶…è¿‡ 88%ï¼Œå‡†ç¡®æ€§è¾¾åˆ° 86%ã€‚æ„æ€æ˜¯è¯´ï¼ŒçœŸå®å­˜åœ¨çš„é”™è¯¯é‡Œæœ‰ 88% ä»¥ä¸Šèƒ½è¢«æ­£ç¡®å‘ç°ï¼›è€Œè¢«æœºè¯„åˆ¤ä¸ºâ€œé”™è¯¯â€çš„é¡¹é‡Œï¼Œæ¥è¿‘ä¹æˆåˆ¤æ–­æ˜¯å¯¹çš„ã€‚å¯¹æ—¥å¸¸è¯„æµ‹ï¼Œå°¤å…¶æ˜¯ç ”å‘è¿­ä»£ï¼Œè¿™æ ·çš„èƒ½åŠ›åŸºæœ¬å¤Ÿç”¨ã€‚åªè¦æµ‹è¯•é›†è¦†ç›–å……åˆ†ï¼Œå°±èƒ½ç”¨æ¥æ¯”è¾ƒä¸¤ä¸ªç‰ˆæœ¬ã€ä¸¤ç§æ¶æ„çš„ä¼˜åŠ£ã€‚</p>
<p>å½“ç„¶ä¹Ÿæœ‰ç›®å‰è¦†ç›–ä¸åˆ°çš„éƒ¨åˆ†ã€‚æ¯”å¦‚<strong>æ˜“è¯»æ€§</strong>é«˜åº¦ä¾èµ–äººå·¥åˆ¤æ–­ï¼šå›¾è¡¨å±•ç¤ºæ˜¯å¦å‡ºç°å›¾ä¾‹å †å ç­‰é—®é¢˜ï¼Œè‡ªåŠ¨åŒ–æš‚æ—¶éš¾ä»¥å‘ç°ï¼›å†å¦‚æŠ¥å‘Šæ˜¯å¦â€œè¶³å¤Ÿæœ‰æ·±åº¦ã€è¶³å¤Ÿæœ‰ä¸°å¯Œåº¦â€ï¼Œè¿™äº›åˆ¤æ–­åä¸»è§‚ï¼Œæˆ‘ä»¬ä¹Ÿå°šæœªåšè‡ªåŠ¨åŒ–è¦†ç›–ã€‚</p>
<h3 data-id="heading-3">è¯„ä¼°å¹³å°çš„å·¥å…·ä¸é“¾è·¯å»ºè®¾</h3>
<p>å¼€å±•è¯„æµ‹ä¸ä»…éœ€è¦æ–¹æ³•ä¸ç®—æ³•ï¼Œä¹Ÿéœ€è¦å®Œå–„çš„å¹³å°ä¸å·¥å…·æ”¯æ’‘ã€‚æˆ‘ä»¬åœ¨æ•°æ®å¹³å°å†…éƒ¨æ­å»ºäº†é¢å‘æ•°æ®è¯„ä¼°çš„ç»Ÿä¸€å¹³å°ï¼Œå®šä½äºä¸ºå¤§æ¨¡å‹åº”ç”¨çš„æ¢ç´¢ä¸ä¼˜åŒ–ææ•ˆã€‚å¹³å°è¦†ç›–æ•°æ®é›†ç®¡ç†ä¸æ ‡æ³¨ã€è‡ªåŠ¨åŒ–ä¸äººå·¥è¯„æµ‹ã€æŒ‡æ ‡æ±‡æ€»ä¸åˆ†æã€ç»“æœå½’å› ä¸å¯¹æ¯”å½’å› ç­‰å®Œæ•´æµç¨‹ï¼Œå¹¶æä¾›ç›¸åº”çš„åŠŸèƒ½ç»„ä»¶ã€‚å¦å¤–å¹³å°åŒæ—¶å¼•å…¥â€œæ•°æ®é£è½®â€ï¼Œå°†çº¿ä¸Šæ–°å¢æ¡ˆä¾‹æŒç»­æ²‰æ·€ä¸ºè¯„æµ‹é›†ï¼Œç¡®ä¿è¯„æµ‹éšä¸šåŠ¡ä¸ä½¿ç”¨æ–¹å¼æ¼”åŒ–è€Œæ›´æ–°ï¼›åœ¨åŸºç¡€é€‰å‹ç¯èŠ‚ï¼Œæä¾› Benchmark ä¸æ¦œå•æ¨¡å—ï¼Œä¾¿äºä¸šåŠ¡ä¾§è¿›è¡Œåˆ¤æ–­ä¸é€‰æ‹©ã€‚</p>
<p>è¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹å‡ ä¸ªç‰¹è‰²åŠŸèƒ½ã€‚ç¬¬ä¸€ä¸ªâ€œæ•°æ®é£è½®â€å‰é¢å·²ç»æè¿‡ã€‚ç¬¬äºŒï¼Œæˆ‘ä»¬è¿˜æä¾›ä¸€ç³»åˆ—å¸¸ç”¨è¯„æµ‹ç®—å­ï¼Œæ—¢æœ‰åŸºäºè§„åˆ™å®ç°çš„ï¼Œä¹Ÿæœ‰åŸºäºå¤§æ¨¡å‹å®ç°çš„ã€‚ä¸šåŠ¡æ–¹å¯ä»¥è‡ªè¡Œè°ƒç”¨ï¼Œåœ¨â€œè‡ªå®šä¹‰ç­–ç•¥â€æ¨¡å—é‡ŒæŒ‰ä¸šåŠ¡éœ€è¦ç¼–æ’è¿™äº›â€œåŸå­ç®—å­â€ï¼Œå®ç°è‡ªå·±çš„åˆ†æé€»è¾‘ã€‚é’ˆå¯¹è¿™ç±»åœºæ™¯ï¼Œæˆ‘ä»¬è¿˜è®¾è®¡äº†â€œè¯„ä¼°å·¥ä½œæµâ€æ¨¡å—ã€‚ç”¨è¿‡ç±»ä¼¼ langchainã€Difyã€Coze è¿™ç±»å¹³å°çš„åŒå­¦éƒ½ä¼šç†Ÿæ‚‰ï¼Œç”¨å·¥ä½œæµå¯è§†åŒ–åœ°æ­å»ºä¸€ä¸ª agentï¼›åŒæ ·åœ°ï¼Œæˆ‘ä»¬ä¹Ÿæ”¯æŒæŠŠè¯„ä¼°æµç¨‹ç”¨å·¥ä½œæµå¿«é€Ÿæ­å»ºèµ·æ¥ï¼Œæ›´é«˜æ•ˆåœ°å¤ç”¨ç®—å­ï¼Œè€Œä¸æ˜¯ä¸€å¾‹å†™ä»£ç ã€‚è¿™ä¸ªæ¨¡å—çš„åé¦ˆå¾ˆå¥½ï¼Œå†…éƒ¨è¯„æµ‹åŒå­¦ä¹Ÿåœ¨ç”¨å®ƒä¸ºä¸šåŠ¡æ­å»ºè¯„æµ‹æµç¨‹ã€‚ä¸¾ä¸ªå¾ˆç®€å•çš„ç”¨æ³•ï¼šå…ˆå¯¹è¾“å…¥åšåŸºç¡€å¤„ç†ä¸å½’ä¸€åŒ–ï¼Œç„¶åè°ƒç”¨ä¸€ä¸ªè¯„ä¼°ç®—æ³•ï¼Œæˆ–è°ƒç”¨å¤§æ¨¡å‹ï¼Œå¹¶å†™å¥½è‡ªå·±çš„ promptï¼Œå³å¯æŠŠè¿™æ¡è¯„ä¼°é“¾è·¯è·‘é€šã€‚</p>
<h3 data-id="heading-4">æœªæ¥å±•æœ›</h3>
<p>é¢å‘æœªæ¥ï¼Œè‡ªåŠ¨åŒ–è¯„æµ‹åœ¨æ•°æ®é¢†åŸŸå¯èƒ½çš„é‡ç‚¹æŠ•å…¥æ–¹å‘å¦‚ä¸‹ï¼š</p>
<p>é¦–å…ˆï¼Œè¯„æµ‹çš„ç»´åº¦å’Œä½“ç³»éœ€è¦è¿›ä¸€æ­¥å®Œå–„ã€‚ç°åœ¨å¯¹å¤šæ¨¡æ€èƒ½åŠ›çš„åˆ©ç”¨è¿˜ä¸å¤Ÿï¼Œæ•°æ®é›†ä¹Ÿéœ€è¦æŒç»­ä¼˜åŒ–ï¼›æµç¨‹è¦æ›´è§„èŒƒï¼Œæ•ˆç‡è¦æ›´é«˜ã€‚åŒæ—¶è¦è§£å†³çº¿ä¸Šä¸çº¿ä¸‹çš„ä¸€è‡´æ€§ï¼šå¦‚ä½•è®©çº¿ä¸‹è¯„ä¼°å°½å¯èƒ½åæ˜ çº¿ä¸Šçš„çœŸå®èƒ½åŠ›ï¼Œè€Œä¸æ˜¯åšæˆâ€œçº¿ä¸Šå…¨é‡ã€å…¨äººå·¥â€çš„è¯„ä¼°ã€‚å¯ä»¥é€šè¿‡æœ‰æ•ˆé‡‡æ ·ã€æ—¶æ•ˆæ€§æ ¡éªŒç­‰æ‰‹æ®µï¼ŒæŒç»­è¡¡é‡çº¿ä¸‹è¯„æµ‹æ•°æ®é›†æ˜¯å¦è¿‡æ—¶ï¼Œè®©è¯„æµ‹ç»“æœçœŸæ­£å¯¹åº”ç”¨æˆ·çš„å®é™…ä½“æ„Ÿã€‚</p>
<p>å…¶æ¬¡ï¼Œåœ¨åº”ç”¨æ”¹è¿›æ–¹é¢ï¼Œä»¥å‰å¸¸è®² TDDï¼ˆTest-Driven Developmentï¼‰ã€‚åœ¨å¤§æ¨¡å‹æ—¶ä»£ï¼Œæˆ‘æ›´ä¸»å¼ â€œè¯„ä¼°é©±åŠ¨å¼€å‘â€ï¼ˆEDDï¼‰ã€‚å®ƒéœ€è¦æŠŠè¯„ä¼°æ›´å¥½åœ°åˆ†è§£åˆ° Agent æ¶æ„çš„å„ä¸ªç¯èŠ‚ï¼šç»†åŒ–åˆ°å­æ¨¡å—çš„èƒ½åŠ›ã€æ¨ç†çš„ä¸åŒé˜¶æ®µï¼Œå¹¶æŠŠæœ€ç»ˆä¸šåŠ¡æŒ‡æ ‡ä¸è¿‡ç¨‹æ€§æŒ‡æ ‡å»ºç«‹èµ·æ›´æœ‰æ•ˆçš„å…³è”ã€‚æ¨¡å‹è®­ç»ƒå±‚é¢ï¼Œæ— è®ºæ˜¯ç²¾è°ƒï¼ˆSFTï¼‰è¿˜æ˜¯å¼ºåŒ–å­¦ä¹ ï¼Œå½’æ ¹åˆ°åº•éƒ½æ˜¯ä¸é¢„æœŸä¸šåŠ¡æ•ˆæœå’Œäººç±»åˆ¤æ–­å¯¹é½ï¼Œè¿™ä¸è¯„æµ‹å¤©ç„¶ç›¸å…³ã€‚æˆ‘ä»¬ä¹Ÿåœ¨æ¢ç´¢ç”¨è‡ªåŠ¨åŒ–è¯„æµ‹å»åå‘é©±åŠ¨è®­ç»ƒæµç¨‹ã€‚</p>
<p>æœ€åï¼Œæ˜¯è®©è‡ªåŠ¨åŒ–è¯„ä¼°çš„ç»“æœæ›´å¿«ã€æ›´é«˜æ•ˆåœ°ç”Ÿæˆå¯¹åº”ç”¨æ”¹è¿›çš„å»ºè®®ï¼Œåˆ‡å®æœåŠ¡è¿­ä»£ã€‚è¿™èƒ½ç›´æ¥å¸®åŠ©åˆ°ç ”å‘ä¸ä¸šåŠ¡ä¸¤ç«¯ï¼šä½œä¸ºç”¨æˆ·æ–¹/ä¸šåŠ¡æ–¹ï¼Œå¯ä»¥æ›´æœ‰æ•ˆåœ°åˆ¤æ–­ä¸€ä¸ª Agent æ˜¯å¦æ»¡è¶³éœ€æ±‚ï¼›ä½œä¸ºå¼€å‘è€…ï¼Œä¹Ÿèƒ½åœ¨æ›´é«˜æ•ˆçš„è¯„æµ‹æ”¯æŒä¸‹ï¼Œç”¨æ›´å¤§çš„æ¢ç´¢ç©ºé—´å»å°è¯•æ–°æŠ€æœ¯æ–¹æ¡ˆï¼Œå¹¶æŠŠæœ€ç»ˆæ•ˆæœåšä¸Šå»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025 AIæµªæ½®ä¸‹çš„ç¼–ç¨‹ä¹‹è·¯ï¼šæˆ‘çš„å¤©å·¥é¡¹ç›®ä¸ç»ˆèº«å­¦ä¹ ]]></title>    <link>https://juejin.cn/post/7587825268200980486</link>    <guid>https://juejin.cn/post/7587825268200980486</guid>    <pubDate>2025-12-26T07:56:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587825268200980486" data-draft-id="7587825268200947718" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025 AIæµªæ½®ä¸‹çš„ç¼–ç¨‹ä¹‹è·¯ï¼šæˆ‘çš„å¤©å·¥é¡¹ç›®ä¸ç»ˆèº«å­¦ä¹ "/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,Trae"/> <meta itemprop="datePublished" content="2025-12-26T07:56:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ—å¤ªç™½"/> <meta itemprop="url" content="https://juejin.cn/user/1874034273300919"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025 AIæµªæ½®ä¸‹çš„ç¼–ç¨‹ä¹‹è·¯ï¼šæˆ‘çš„å¤©å·¥é¡¹ç›®ä¸ç»ˆèº«å­¦ä¹ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1874034273300919/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ—å¤ªç™½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T07:56:27.000Z" title="Fri Dec 26 2025 07:56:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">2025 AIæµªæ½®ä¸‹çš„ç¼–ç¨‹ä¹‹è·¯ï¼šæˆ‘çš„å¤©å·¥é¡¹ç›®ä¸ç»ˆèº«å­¦ä¹ </h2>
<p>å…ˆæ±‚ä¸ªstar</p>
<p>æºç åœ°å€ï¼Œæ¬¢è¿star,ä½ çš„staræ˜¯æˆ‘åŠªåŠ›çš„åŠ¨åŠ›ï¼</p>
<p>ã€GIthubåœ°å€ã€‘ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Flintaibai%2FTG" target="_blank" title="https://gitee.com/lintaibai/TG" ref="nofollow noopener noreferrer">github.com/lintaibai/Tâ€¦</a>ï¼‰</p>
<p>ã€Giteeåœ°å€ã€‘ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Flintaibai%2FTG" target="_blank" title="https://gitee.com/lintaibai/TG" ref="nofollow noopener noreferrer">gitee.com/lintaibai/Tâ€¦</a>ï¼‰</p>
<p>åœ¨2025å¹´çš„ä»Šå¤©ï¼Œå½“æˆ‘å›æœ›è¿™ä¸€å¹´çš„æŠ€æœ¯å†ç¨‹ï¼ŒAIå·¥å…·å¯¹æˆ‘ç¼–ç¨‹ç”Ÿæ¶¯çš„å½±å“å¯è°“ç¿»å¤©è¦†åœ°ã€‚ä½œä¸ºä¸€ä¸ªå¼€å‘è€…ï¼Œæˆ‘äº²èº«ä½“éªŒäº†è¿™åœºå˜é©ï¼Œé€šè¿‡"å¤©å·¥"é¡¹ç›®çš„å¼€å‘ï¼Œæ·±åˆ»æ„Ÿå—åˆ°äº†AIæŠ€æœ¯å¦‚ä½•é‡å¡‘æˆ‘çš„ç¼–ç¨‹æ–¹å¼å’Œå­¦ä¹ ç†å¿µã€‚è¿™ä¸ªé¡¹ç›®ä¸ä»…ä»…æ˜¯ä¸€æ¬¡æŠ€æœ¯å®è·µï¼Œæ›´æ˜¯ä¸€åœºå…³äºäººæœºåä½œã€æ•ˆç‡æå‡ä¸ç»ˆèº«å­¦ä¹ çš„æ·±åº¦æ¢ç´¢ã€‚</p>
<p>åœ¨å¤©å·¥é¡¹ç›®çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªé‡è¦çš„è½¬æŠ˜ç‚¹â€”â€”é‡åˆ°äº†Traeï¼Œè¿™ä¸ªAIåŠ©æ‰‹æˆä¸ºäº†æˆ‘å¼€å‘è·¯ä¸Šæœ€å¯é çš„ä¼™ä¼´ã€‚å½“æˆ‘å¼€å§‹ç€æ‰‹Ruståç«¯å¼€å‘æ—¶ï¼Œé¢å¯¹å¤æ‚çš„æ‰€æœ‰æƒå’Œå€Ÿç”¨æœºåˆ¶ï¼ŒTraeä¸ä»…ä»…æ˜¯ç®€å•åœ°ç»™å‡ºä»£ç ç¤ºä¾‹ï¼Œè€Œæ˜¯é€šè¿‡ç”ŸåŠ¨çš„ç±»æ¯”å¸®åŠ©æˆ‘ç†è§£è¿™äº›æ¦‚å¿µã€‚æ¯”å¦‚åœ¨å®ç°ä¸€ä¸ªé«˜å¹¶å‘æ¶ˆæ¯é˜Ÿåˆ—æ—¶ï¼ŒTraeå»ºè®®æˆ‘ä½¿ç”¨Tokioæ¡†æ¶ï¼Œå¹¶è¯¦ç»†è§£é‡Šäº†ä¸ºä»€ä¹ˆé€‰æ‹©async/awaitè€Œä¸æ˜¯ä¼ ç»Ÿçš„çº¿ç¨‹æ¨¡å‹ï¼Œå®ƒç”šè‡³å¸®æˆ‘é¢„è§äº†å¯èƒ½çš„æ­»é”åœºæ™¯ï¼Œå¹¶æä¾›äº†ç›¸åº”çš„è§£å†³æ–¹æ¡ˆã€‚è¿™ç§æ·±åº¦çš„æŠ€æœ¯æŒ‡å¯¼ï¼Œè¿œè¶…å‡ºäº†ä¼ ç»Ÿæ–‡æ¡£æ‰€èƒ½æä¾›çš„å¸®åŠ©ã€‚</p>
<p>åœ¨Node.jsåç«¯çš„å¼€å‘é˜¶æ®µï¼ŒTraeçš„ä½œç”¨æ›´æ˜¯å‡¸æ˜¾ã€‚å½“æˆ‘ä½¿ç”¨NestJSæ„å»ºRESTful APIæ—¶ï¼ŒTraeä¸ä»…å¸®æˆ‘å¿«é€Ÿç”Ÿæˆäº†é¡¹ç›®è„šæ‰‹æ¶ï¼Œæ›´é‡è¦çš„æ˜¯æ•™ä¼šäº†æˆ‘å¦‚ä½•è®¾è®¡åˆç†çš„æ¨¡å—ç»“æ„ã€‚è®°å¾—æœ‰ä¸€æ¬¡ï¼Œæˆ‘åœ¨å®ç°ç”¨æˆ·è®¤è¯æ¨¡å—æ—¶é‡åˆ°äº†å›°éš¾ï¼ŒTraeä¸ä»…æä¾›äº†JWTè®¤è¯çš„å…·ä½“å®ç°æ–¹æ¡ˆï¼Œè¿˜è¯¦ç»†è§£é‡Šäº†æ¯ä¸ªä¸­é—´ä»¶çš„ä½œç”¨åŸç†ï¼Œç”šè‡³å¸®æˆ‘ä¼˜åŒ–äº†æ•°æ®åº“æŸ¥è¯¢è¯­å¥ï¼Œæ˜¾è‘—æå‡äº†æ¥å£å“åº”é€Ÿåº¦ã€‚åœ¨Expressåç«¯çš„å¼€å‘ä¸­ï¼ŒTraeåŒæ ·è¡¨ç°å‡ºè‰²ï¼Œå®ƒå¸®åŠ©æˆ‘è®¾è®¡äº†ä¸€ä¸ªçµæ´»çš„ä¸­é—´ä»¶ç³»ç»Ÿï¼Œä½¿ä»£ç æ›´åŠ æ¨¡å—åŒ–å’Œå¯ç»´æŠ¤ã€‚</p>
<p>å‰ç«¯å¼€å‘é˜¶æ®µï¼ŒTraeçš„è¾…åŠ©è®©å¤æ‚çš„åŠŸèƒ½å®ç°å˜å¾—è½»è€Œæ˜“ä¸¾ã€‚åœ¨Vue3å¼€å‘ä¸­ï¼Œå½“æˆ‘éœ€è¦å®ç°ä¸€ä¸ªå¤æ‚çš„å®æ—¶æ•°æ®å¯è§†åŒ–ç»„ä»¶æ—¶ï¼ŒTraeä¸ä»…æä¾›äº†æŠ€æœ¯å®ç°æ–¹æ¡ˆï¼Œè¿˜å»ºè®®äº†æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ï¼Œæ¯”å¦‚ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨æ¥å¤„ç†å¤§é‡æ•°æ®ï¼Œä½¿ç”¨Web Workersæ¥å¤„ç†å¤æ‚è®¡ç®—ã€‚åœ¨Reactå¼€å‘ä¸­ï¼ŒTraeå¸®åŠ©æˆ‘æ›´å¥½åœ°ç†è§£Hooksçš„ä½¿ç”¨åœºæ™¯ï¼Œç‰¹åˆ«æ˜¯åœ¨çŠ¶æ€ç®¡ç†å’Œå‰¯ä½œç”¨å¤„ç†æ–¹é¢ï¼Œå®ƒæä¾›çš„å»ºè®®è®©æˆ‘é¿å…äº†å¾ˆå¤šå¸¸è§çš„é™·é˜±ã€‚</p>
<p>ç›®å‰æ­£åœ¨è¿›è¡Œçš„Flutterå¼€å‘ä¸­ï¼ŒTraeçš„ä»·å€¼æ›´åŠ å‡¸æ˜¾ã€‚ç§»åŠ¨ç«¯å¼€å‘éœ€è¦è€ƒè™‘çš„å› ç´ æ›´å¤šï¼Œæ¯”å¦‚ä¸åŒå¹³å°çš„å…¼å®¹æ€§ã€UIé€‚é…ã€æ€§èƒ½ä¼˜åŒ–ç­‰ã€‚Traeåœ¨è¿™æ–¹é¢ç»™äºˆäº†æå¤§å¸®åŠ©ï¼Œå®ƒä¸ä»…å¸®æˆ‘è§£å†³äº†è·¨å¹³å°å¸ƒå±€é—®é¢˜ï¼Œè¿˜æä¾›äº†å¾ˆå¤šæ€§èƒ½ä¼˜åŒ–çš„å»ºè®®ã€‚è®°å¾—åœ¨å®ç°ä¸€ä¸ªå¤æ‚çš„åŠ¨ç”»æ•ˆæœæ—¶ï¼ŒTraeå»ºè®®ä½¿ç”¨AnimatedBuilderè€Œä¸æ˜¯ç›´æ¥æ“ä½œsetStateï¼Œè¿™ä¸ªå»ºè®®æ˜¾è‘—æå‡äº†åº”ç”¨çš„æ€§èƒ½è¡¨ç°ã€‚</p>
<p>Traeç»™æˆ‘æœ€å¤§çš„å¸®åŠ©ä½“ç°åœ¨å­¦ä¹ æ–¹å¼çš„é©æ–°ä¸Šã€‚ä¼ ç»Ÿå­¦ä¹ éœ€è¦æŸ¥é˜…å¤§é‡æ–‡æ¡£å’Œæ•™ç¨‹ï¼Œè€Œç°åœ¨Traeèƒ½å¤Ÿæä¾›å³æ—¶ã€ç²¾å‡†çš„çŸ¥è¯†è§£ç­”ã€‚æ¯”å¦‚åœ¨å­¦ä¹ Rustçš„ç”Ÿå‘½å‘¨æœŸæ¦‚å¿µæ—¶ï¼ŒTraeä¸ä»…ç»™å‡ºäº†æ¸…æ™°çš„è§£é‡Šï¼Œè¿˜é€šè¿‡å¤šä¸ªå®é™…ä»£ç ç¤ºä¾‹å±•ç¤ºäº†ä¸åŒåœºæ™¯ä¸‹çš„åº”ç”¨ã€‚è¿™ç§å³æ—¶åé¦ˆçš„å­¦ä¹ æ–¹å¼ï¼Œè®©æˆ‘èƒ½å¤Ÿæ›´å¿«åœ°æŒæ¡æ–°æ¦‚å¿µï¼Œå¹¶å°†å…¶åº”ç”¨åˆ°å®é™…é¡¹ç›®ä¸­ã€‚</p>
<p>åœ¨ä»£ç è´¨é‡æå‡æ–¹é¢ï¼ŒTraeçš„ä½œç”¨åŒæ ·ä¸å¯å¿½è§†ã€‚å®ƒä¸ä»…ä»…æ˜¯ä»£ç ç”Ÿæˆå·¥å…·ï¼Œæ›´åƒæ˜¯ä¸€ä¸ªç»éªŒä¸°å¯Œçš„ä»£ç å®¡æŸ¥è€…ã€‚æ¯å½“æˆ‘çš„ä»£ç å­˜åœ¨æ½œåœ¨é—®é¢˜æˆ–å¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ï¼ŒTraeéƒ½ä¼šåŠæ—¶æŒ‡å‡ºå¹¶ç»™å‡ºæ”¹è¿›å»ºè®®ã€‚æ¯”å¦‚åœ¨å¤„ç†å¼‚æ­¥æ“ä½œæ—¶ï¼Œå®ƒå»ºè®®æˆ‘ä½¿ç”¨æ›´ç°ä»£çš„async/awaitè¯­æ³•è€Œä¸æ˜¯Promiseé“¾ï¼Œè¿™ä¸ä»…æé«˜äº†ä»£ç å¯è¯»æ€§ï¼Œè¿˜å‡å°‘äº†å‡ºé”™çš„å¯èƒ½æ€§ã€‚</p>
<p>å¤©å·¥é¡¹ç›®çš„å¼€å‘è¿‡ç¨‹è®©æˆ‘æ·±åˆ»è®¤è¯†åˆ°ï¼ŒAIå·¥å…·çš„çœŸæ­£ä»·å€¼åœ¨äºå®ƒèƒ½å°†å¼€å‘è€…ä»ç¹ççš„é‡å¤æ€§å·¥ä½œä¸­è§£æ”¾å‡ºæ¥ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿä¸“æ³¨äºæ›´å…·åˆ›é€ æ€§çš„å·¥ä½œã€‚Traeå¸®æˆ‘å¤„ç†äº†å¾ˆå¤šåŸºç¡€æ€§å·¥ä½œï¼Œæ¯”å¦‚ä»£ç æ¨¡æ¿ç”Ÿæˆã€é”™è¯¯å¤„ç†ã€æ€§èƒ½ä¼˜åŒ–ç­‰ï¼Œè¿™è®©æˆ‘æœ‰æ›´å¤šæ—¶é—´å»æ€è€ƒæ¶æ„è®¾è®¡ã€ç”¨æˆ·ä½“éªŒä¼˜åŒ–ç­‰æ›´é‡è¦çš„é—®é¢˜ã€‚</p>
<p>ç„¶è€Œï¼Œè¿™å¹¶ä¸æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å®Œå…¨ä¾èµ–AIã€‚åœ¨ä¸Traeçš„åˆä½œä¸­ï¼Œæˆ‘å­¦ä¼šäº†å¦‚ä½•æå‡ºç²¾å‡†çš„é—®é¢˜ï¼Œå¦‚ä½•éªŒè¯AIç»™å‡ºçš„å»ºè®®ï¼Œå¦‚ä½•ç»“åˆè‡ªå·±çš„åˆ¤æ–­åšå‡ºæœ€ä½³å†³ç­–ã€‚è¿™ç§äººæœºåä½œçš„æ¨¡å¼ï¼Œæ—¢æé«˜äº†æ•ˆç‡ï¼Œåˆä¿æŒäº†äººç±»çš„åˆ›é€ åŠ›å’Œåˆ¤æ–­åŠ›ã€‚</p>
<p>å›é¡¾è¿™ä¸€å¹´çš„å†ç¨‹ï¼Œæˆ‘æ·±æ·±ä½“ä¼šåˆ°ç»ˆèº«å­¦ä¹ çš„é‡è¦æ€§ã€‚åœ¨AIçš„åŠ©åŠ›ä¸‹ï¼Œå­¦ä¹ çš„é—¨æ§›é™ä½äº†ï¼Œä½†å¯¹çŸ¥è¯†æ·±åº¦å’Œå¹¿åº¦çš„è¦æ±‚åè€Œæ›´é«˜äº†ã€‚æˆ‘ä»¬éœ€è¦ä¸æ–­å­¦ä¹ æ–°æŠ€æœ¯ï¼Œç†è§£å…¶åŸç†ï¼Œå¹¶å­¦ä¼šå¦‚ä½•ä¸AIå·¥å…·æœ‰æ•ˆåä½œã€‚Traeä¸ä»…å¸®åŠ©æˆ‘å®Œæˆäº†é¡¹ç›®ï¼Œæ›´é‡è¦çš„æ˜¯æ•™ä¼šäº†æˆ‘å¦‚ä½•å­¦ä¹ ï¼Œå¦‚ä½•æ€è€ƒï¼Œå¦‚ä½•æˆé•¿ã€‚</p>
<p>å±•æœ›æœªæ¥ï¼ŒAIå·¥å…·å¿…å°†åœ¨ç¼–ç¨‹é¢†åŸŸå‘æŒ¥æ›´å¤§ä½œç”¨ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€äººç±»ç¨‹åºå‘˜ä¼šè¢«å–ä»£ã€‚ç›¸åï¼Œæˆ‘ä»¬éœ€è¦ä¸æ–­æå‡è‡ªå·±ï¼Œå­¦ä¼šæ›´å¥½åœ°åˆ©ç”¨è¿™äº›å·¥å…·ã€‚Traeè®©æˆ‘çœ‹åˆ°ï¼ŒAIä¸æ˜¯æ›¿ä»£å“ï¼Œè€Œæ˜¯å¢å¼ºå™¨ï¼Œå®ƒè®©æˆ‘ä»¬çš„å·¥ä½œæ›´é«˜æ•ˆï¼Œè®©æˆ‘ä»¬çš„å­¦ä¹ æ›´æ·±å…¥ï¼Œè®©æˆ‘ä»¬çš„åˆ›é€ åŠ›å¾—åˆ°æ›´å¥½çš„å‘æŒ¥ã€‚</p>
<p>è¿™å°±æ˜¯æˆ‘çš„2025ï¼Œåœ¨AIæµªæ½®ä¸­çš„ç¼–ç¨‹ä¹‹è·¯ã€‚å¤©å·¥é¡¹ç›®ä¸ä»…æ˜¯ä¸€æ¬¡æŠ€æœ¯å®è·µï¼Œæ›´æ˜¯ä¸€æ¬¡å…³äºäººæœºåä½œã€æ•ˆç‡æå‡ä¸ç»ˆèº«å­¦ä¹ çš„æ·±åº¦æ¢ç´¢ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒTraeä¸ä»…å¸®åŠ©æˆ‘å®Œæˆäº†é¡¹ç›®ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œå®ƒè®©æˆ‘é‡æ–°è®¤è¯†äº†ç¼–ç¨‹çš„æœ¬è´¨ï¼Œé‡æ–°å®šä¹‰äº†å­¦ä¹ çš„æ„ä¹‰ã€‚æœªæ¥å·²æ¥ï¼Œè®©æˆ‘ä»¬ä»¥ç»ˆèº«å­¦ä¹ ä¸ºä¿¡å¿µï¼Œåœ¨AIçš„åŠ©åŠ›ä¸‹ï¼Œç»§ç»­æ¢ç´¢ç¼–ç¨‹ä¸–ç•Œçš„æ— é™å¯èƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‹’ç» Race Conditionï¼šæ·±å…¥ç†è§£ StateFlow çš„å–å€¼ä¸æ›´æ–°]]></title>    <link>https://juejin.cn/post/7587845752682315839</link>    <guid>https://juejin.cn/post/7587845752682315839</guid>    <pubDate>2025-12-26T07:58:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587845752682315839" data-draft-id="7587825268200996870" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‹’ç» Race Conditionï¼šæ·±å…¥ç†è§£ StateFlow çš„å–å€¼ä¸æ›´æ–°"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-26T07:58:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·4165967369355"/> <meta itemprop="url" content="https://juejin.cn/user/1146150492576877"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‹’ç» Race Conditionï¼šæ·±å…¥ç†è§£ StateFlow çš„å–å€¼ä¸æ›´æ–°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1146150492576877/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·4165967369355
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T07:58:14.000Z" title="Fri Dec 26 2025 07:58:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Android å“åº”å¼ç¼–ç¨‹ä¸­ï¼Œ<code>StateFlow</code> å·²æˆä¸º ViewModel ä¸ UI é€šä¿¡çš„æ ‡å‡†å·¥å…·ã€‚ç„¶è€Œï¼Œä»ä¼ ç»Ÿçš„ <code>LiveData</code> æˆ–å‘½ä»¤å¼ç¼–ç¨‹è½¬å‹çš„è¿‡ç¨‹ä¸­ï¼Œææ˜“å‡ºç°éšè—çš„ Bugã€‚</p>
<p>IDE ç»å¸¸ç»™å‡ºçš„è­¦å‘Šä¿¡æ¯ï¼šâ€œ<strong>Reading StateFlow.value directly can lead to race conditions</strong>â€ï¼Œæ­ç¤ºäº†èƒŒåçš„æ ¸å¿ƒåŸç†ä¸æ½œåœ¨é£é™©ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ ç›´æ¥è¯»å– .value çš„é™·é˜±</h2>
<p>ç±»ä¼¼ä¸‹æ–¹çš„ä»£ç ç‰‡æ®µåœ¨é¡¹ç›®ä¸­éå¸¸å¸¸è§ï¼š</p>
<p>Kotlin</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// åœ¨ ViewModel æˆ– Fragment ä¸­</span>
if (userState.value is LoginState.Loading) {
    <span class="hljs-comment">// æ‰§è¡ŒæŸé¡¹æ“ä½œ</span>
    <span class="hljs-built_in">doSomething</span>()
}
</code></pre>
<p>è¿™æ®µä»£ç åœ¨å¤šçº¿ç¨‹å¹¶å‘ç¯å¢ƒä¸‹æ˜¯ä¸å®‰å…¨çš„ã€‚</p>
<h3 data-id="heading-1">æ ¸å¿ƒçŸ›ç›¾ï¼šåŸå­æ€§ç¼ºå¤±</h3>
<p>ç›´æ¥è°ƒç”¨ <code>StateFlow.value</code> è·å–çš„æ˜¯é‚£ä¸€ç¬é—´çš„çŠ¶æ€å¿«ç…§ã€‚</p>
<ol>
<li><strong>çº¿ç¨‹ A</strong> è¯»å–å€¼ä¸º <code>Loading</code>ï¼Œé€šè¿‡äº† <code>if</code> åˆ¤æ–­ã€‚</li>
<li><strong>çº¿ç¨‹ B</strong>ï¼ˆå¦‚ç½‘ç»œå›è°ƒï¼‰å‡ ä¹åŒæ—¶å°†å€¼ä¿®æ”¹ä¸ºäº† <code>Success</code>ã€‚</li>
<li><strong>çº¿ç¨‹ A</strong> ç»§ç»­æ‰§è¡Œ <code>if</code> å—å†…éƒ¨çš„ <code>doSomething()</code>ï¼Œä½†æ­¤æ—¶å¤„ç†çš„é€»è¾‘å·²ç»åŸºäºä¸€ä¸ª<strong>è¿‡æ—¶</strong>çš„çŠ¶æ€ã€‚</li>
</ol>
<p>è¿™ç§â€œå…ˆæ£€æŸ¥ï¼Œåæ‰§è¡Œâ€ï¼ˆCheck-Then-Actï¼‰çš„éåŸå­æ“ä½œï¼Œæ˜¯å…¸å‹çš„<strong>ç«æ€æ¡ä»¶ï¼ˆRace Conditionï¼‰</strong> ã€‚</p>
<hr/>
<h2 data-id="heading-2">äºŒã€ å¦‚ä½•æ­£ç¡®åœ°æ›´æ–°çŠ¶æ€ï¼Ÿ</h2>
<p>æ—¢ç„¶ç›´æ¥è¯»å†™ <code>value</code> å­˜åœ¨é£é™©ï¼Œåº”é‡‡å–æ›´ç¨³å¥çš„æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-3">1. æ·±å…¥å¯¹æ¯”ï¼š<code>.update</code> vs <code>.emit</code> vs <code>.value =</code></h3>
<p>åœ¨æ›´æ–° <code>StateFlow</code> æ—¶ï¼Œå­˜åœ¨å¤šç§èµ‹å€¼æ–¹å¼ï¼Œå…¶åº•å±‚é€»è¾‘æœ‰ç€æœ¬è´¨åŒºåˆ«ï¼š</p>





























<table><thead><tr><th><strong>æ–¹å¼</strong></th><th><strong>åº•å±‚é€»è¾‘</strong></th><th><strong>å¹¶å‘å®‰å…¨æ€§</strong></th><th><strong>é€‚ç”¨åœºæ™¯</strong></th></tr></thead><tbody><tr><td><strong><code>.value = x</code></strong></td><td>ç›´æ¥è¦†ç›–å˜é‡</td><td><strong>ä½</strong>ï¼ˆå­˜åœ¨ç«æ€é£é™©ï¼‰</td><td>çŠ¶æ€é‡ç½®ã€ä¸æ—§çŠ¶æ€æ— å…³çš„èµ‹å€¼</td></tr><tr><td><strong><code>.emit(x)</code></strong></td><td>è°ƒç”¨ setValue (å¯¹ StateFlow è€Œè¨€)</td><td><strong>ä½</strong></td><td>å…¼å®¹ Flow æ¥å£çš„é€šç”¨å†™æ³•</td></tr><tr><td><strong><code>.update { ... }</code></strong></td><td><strong>CAS åŸå­è½¬æ¢</strong></td><td><strong>é«˜</strong>ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</td><td><strong>æ‰€æœ‰æ¶‰åŠæ—§çŠ¶æ€è®¡ç®—çš„æ›´æ–°</strong></td></tr></tbody></table>
<h3 data-id="heading-4">2. ä¸ºä»€ä¹ˆ <code>.update</code> æ˜¯é¦–é€‰ï¼Ÿ</h3>
<p><code>.update</code> æ‰©å±•å‡½æ•°å†…éƒ¨é‡‡ç”¨äº† <strong>CAS (Compare-And-Swap)</strong> ä¹è§‚é”æœºåˆ¶ã€‚å…¶ä¼ªä»£ç é€»è¾‘å¦‚ä¸‹ï¼š</p>
<p>Kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> MutableStateFlow<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">update</span><span class="hljs-params">(function: (<span class="hljs-type">T</span>) -&gt; <span class="hljs-type">T</span>)</span></span> {
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        <span class="hljs-keyword">val</span> prevValue = value              <span class="hljs-comment">// è·å–å½“å‰å€¼</span>
        <span class="hljs-keyword">val</span> nextValue = function(prevValue) <span class="hljs-comment">// è®¡ç®—æ–°å€¼</span>
        <span class="hljs-keyword">if</span> (compareAndSet(prevValue, nextValue)) { <span class="hljs-comment">// åŸå­æ€§æ£€æŸ¥ï¼šè‹¥æœŸé—´å€¼æœªå˜åˆ™å†™å…¥ï¼Œå¦åˆ™é‡è¯•</span>
            <span class="hljs-keyword">return</span>
        }
    }
}
</code></pre>
<p>è¿™ç§å¾ªç¯é‡è¯•æœºåˆ¶ç¡®ä¿äº†å³ä½¿å¤šä¸ªçº¿ç¨‹åŒæ—¶å°è¯•ä¿®æ”¹çŠ¶æ€ï¼Œæ¯ä¸€ä¸ªä¿®æ”¹é€»è¾‘éƒ½ä¼šåŸºäºæœ€æ–°çš„çŠ¶æ€æ‰§è¡Œï¼Œé¿å…äº†æ•°æ®è¦†ç›–å¯¼è‡´çš„æ›´æ–°ä¸¢å¤±ã€‚</p>
<h3 data-id="heading-5">3. ä½¿ç”¨ä¸å¯å˜æ•°æ®æ¨¡å‹ï¼ˆImmutabilityï¼‰</h3>
<p><code>StateFlow</code> å…·æœ‰**é˜²æŠ–ï¼ˆConflationï¼‰**ç‰¹æ€§ï¼šè‹¥æ–°æ—§å€¼ç›¸ç­‰ï¼ˆ<code>equals</code> ä¸º trueï¼‰ï¼Œåˆ™ä¸ä¼šè§¦å‘é€šçŸ¥ã€‚</p>
<ul>
<li><strong>é£é™©ç‚¹</strong>ï¼šä¿®æ”¹å¯å˜å¯¹è±¡çš„å±æ€§è€Œä¸æ”¹å˜å¼•ç”¨ï¼Œä¼šå¯¼è‡´ UI ä¸åˆ·æ–°ã€‚</li>
<li><strong>å¯¹ç­–</strong>ï¼šå§‹ç»ˆä½¿ç”¨ <code>data class</code> å¹¶é…åˆ <code>copy()</code> äº§ç”Ÿæ–°å®ä¾‹ï¼Œç¡®ä¿æ¯æ¬¡æ›´æ–°éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å¼•ç”¨ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€ åœ¨ UI å±‚è§‚å¯ŸçŠ¶æ€ï¼šç”Ÿå‘½å‘¨æœŸçš„å®‰å…¨å®è·µ</h2>
<p>åœ¨ Android è§‚å¯Ÿ <code>StateFlow</code> æ—¶ï¼Œéœ€å¹³è¡¡èµ„æºæ¶ˆè€—ä¸æ•°æ®å®æ—¶æ€§ã€‚</p>
<h3 data-id="heading-7">1. ä¸ºä»€ä¹ˆæ¨è <code>repeatOnLifecycle</code>ï¼Ÿ</h3>
<p>ä¼ ç»Ÿçš„ <code>lifecycleScope.launch</code> åœ¨ App è¿›å…¥åå°æ—¶ä»ä¼šæŒç»­æ”¶é›†æ•°æ®ï¼Œå¯¼è‡´èµ„æºæµªè´¹ã€‚ä½¿ç”¨ <code>repeatOnLifecycle(Lifecycle.State.STARTED)</code> å¯ç¡®ä¿åç¨‹ä»…åœ¨ UI å¯è§æ—¶æ´»è·ƒã€‚</p>
<h3 data-id="heading-8">2. æ·±åº¦è§£æï¼šå›åˆ°å‰å°æ˜¯å¦ä¼šâ€œé‡å¤è§¦å‘â€ï¼Ÿ</h3>
<p><code>repeatOnLifecycle</code> åœ¨æ¯æ¬¡è¿›å…¥ STARTED çŠ¶æ€æ—¶éƒ½ä¼šé‡å¯åç¨‹ï¼š</p>
<ul>
<li><strong>UI çŠ¶æ€åœºæ™¯</strong>ï¼šè¿™æ˜¯<strong>é¢„æœŸè¡Œä¸º</strong>ã€‚æ­¤æœºåˆ¶ç¡®ä¿å›åˆ°å‰å°æ—¶ç•Œé¢èƒ½ç«‹å³åŒæ­¥æœ€æ–°çš„çŠ¶æ€å¿«ç…§ã€‚</li>
<li><strong>ä¸€æ¬¡æ€§åŠ¨ä½œåœºæ™¯ï¼ˆå¼¹çª—ã€è·³è½¬ï¼‰</strong> ï¼šè¿™æ˜¯<strong>æ½œåœ¨é£é™©</strong>ã€‚è‹¥ <code>StateFlow</code> ä¸­å­˜å‚¨äº†â€œæ˜¾ç¤º Toastâ€çš„çŠ¶æ€ï¼Œå›åˆ°å‰å°æ—¶ä¼šå†æ¬¡è§¦å‘å¼¹å‡ºé€»è¾‘ã€‚</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<ul>
<li><strong>çŠ¶æ€ï¼ˆStateï¼‰</strong> ï¼šå¦‚åˆ—è¡¨æ•°æ®ã€åŠ è½½çŠ¶æ€ï¼Œç»§ç»­ä½¿ç”¨ <code>StateFlow</code>ã€‚</li>
<li><strong>äº‹ä»¶ï¼ˆEventï¼‰</strong> ï¼šå¦‚é¡µé¢è·³è½¬ã€åŠ¨ä½œåé¦ˆï¼Œå»ºè®®ä½¿ç”¨ <strong><code>Channel</code></strong>ã€‚<code>Channel</code> å…·æœ‰â€œæ¶ˆè€—â€ç‰¹æ€§ï¼Œæ•°æ®è¢«å¤„ç†åå³æ¶ˆå¤±ï¼Œå³ä¾¿æ˜¯åç¨‹é‡å¯ä¹Ÿä¸ä¼šå¯¼è‡´æ—§äº‹ä»¶è§¦å‘ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-9">å››ã€ æ€»ç»“ï¼šStateFlow å¼€å‘é¿å‘å‡†åˆ™</h2>
<p>ä¸ºä¿è¯ä»£ç çš„å¥å£®æ€§ï¼Œå»ºè®®éµå¾ªä»¥ä¸‹å¼€å‘å‡†åˆ™ï¼š</p>
<ol>
<li><strong>æƒé™å°è£…</strong>ï¼šç§æœ‰åŒ– <code>MutableStateFlow</code>ï¼Œä»…å¯¹å¤–æš´éœ² <code>asStateFlow()</code>ã€‚</li>
<li><strong>åŸå­æ›´æ–°</strong>ï¼šæ¶‰åŠçŠ¶æ€è½¬æ¢ï¼ˆå¦‚ <code>count + 1</code> æˆ– <code>copy()</code>ï¼‰æ—¶ï¼Œ<strong>å¿…é¡»</strong>ä½¿ç”¨ <code>.update { ... }</code>ã€‚</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥</strong>ï¼šUI å±‚é…åˆ <code>repeatOnLifecycle</code> æˆ– <code>collectAsStateWithLifecycle</code>ã€‚</li>
<li><strong>èŒè´£åˆ†ç¦»</strong>ï¼šåŒºåˆ†â€œçŠ¶æ€ï¼ˆStateï¼‰â€ä¸â€œäº‹ä»¶ï¼ˆEventï¼‰â€ï¼Œé¿å…ä½¿ç”¨ <code>StateFlow</code> ä¼ é€’æŒ‡ä»¤ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ¬¡ç”±éšè—å¤§é¡µé…ç½®å¼•å‘çš„æ•°æ®åº“OOMæ•…éšœåˆ†æ]]></title>    <link>https://juejin.cn/post/7587743345196662836</link>    <guid>https://juejin.cn/post/7587743345196662836</guid>    <pubDate>2025-12-26T07:59:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587743345196662836" data-draft-id="7587740546954199080" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ¬¡ç”±éšè—å¤§é¡µé…ç½®å¼•å‘çš„æ•°æ®åº“OOMæ•…éšœåˆ†æ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T07:59:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GreatSQL"/> <meta itemprop="url" content="https://juejin.cn/user/2859169627508573"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ¬¡ç”±éšè—å¤§é¡µé…ç½®å¼•å‘çš„æ•°æ®åº“OOMæ•…éšœåˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2859169627508573/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GreatSQL
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T07:59:52.000Z" title="Fri Dec 26 2025 07:59:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»27åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€æ¬¡ç”±éšè—å¤§é¡µé…ç½®å¼•å‘çš„æ•°æ®åº“OOMæ•…éšœåˆ†æ</h2>
<h3 data-id="heading-1">ä¸€ã€äº‹æ•…å‘ç”Ÿ</h3>
<p>åœ¨å‘¨æ—¥æ¸…æ™¨ï¼Œæ”¶åˆ°ç´§æ€¥çŸ­ä¿¡å‘Šè­¦ï¼Œæ•°æ®åº“å®ä¾‹å‘ç”Ÿå¼‚å¸¸é‡å¯ã€‚é¦–å…ˆç™»å½•æ•°æ®åº“æœåŠ¡å™¨ï¼ŒæŸ¥çœ‹æ—¥å¿—è®°å½•</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-number">2025</span><span class="hljs-number">-12</span><span class="hljs-number">-21</span>T06:<span class="hljs-number">54</span>:<span class="hljs-number">57.259156</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span> <span class="hljs-number">77</span> [Note] [MY<span class="hljs-number">-010914</span>] [Server] Aborted connection <span class="hljs-number">77</span> <span class="hljs-keyword">to</span> db: <span class="hljs-string">'unconnected'</span> <span class="hljs-keyword">user</span>: <span class="hljs-string">'root'</span> host: <span class="hljs-string">'172.17.139.203'</span> (Got an error reading communication packets).
<span class="hljs-number">2025</span><span class="hljs-number">-12</span><span class="hljs-number">-21</span>T06:<span class="hljs-number">55</span>:<span class="hljs-number">33.224314</span>Z mysqld_safe Number <span class="hljs-keyword">of</span> processes <span class="hljs-keyword">running</span> now: <span class="hljs-number">0</span>
<span class="hljs-number">2025</span><span class="hljs-number">-12</span><span class="hljs-number">-21</span>T06:<span class="hljs-number">55</span>:<span class="hljs-number">33.248143</span>Z mysqld_safe mysqld restarted
<span class="hljs-number">2025</span><span class="hljs-number">-12</span><span class="hljs-number">-21</span>T06:<span class="hljs-number">55</span>:<span class="hljs-number">34.053462</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span> <span class="hljs-number">0</span> [Warning] [MY<span class="hljs-number">-011069</span>] [Server] The syntax <span class="hljs-string">'--replica-parallel-type'</span> <span class="hljs-keyword">is</span> deprecated <span class="hljs-keyword">and</span> will be removed <span class="hljs-keyword">in</span> a future release.
<span class="hljs-number">2025</span><span class="hljs-number">-12</span><span class="hljs-number">-21</span>T06:<span class="hljs-number">55</span>:<span class="hljs-number">34.053569</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span> <span class="hljs-number">0</span> [Warning] [MY<span class="hljs-number">-011068</span>] [Server] The syntax <span class="hljs-string">'--ssl=off'</span> <span class="hljs-keyword">is</span> deprecated <span class="hljs-keyword">and</span> will be removed <span class="hljs-keyword">in</span> a future release. Please use <span class="hljs-comment">--tls-version='' instead.</span>
</code></pre>
<p>é€šè¿‡è¯¥æ—¥å¿—å†…å®¹åˆæ­¥åˆ¤æ–­é‡å¯åŸå› æ˜¯å‘ç”Ÿäº†OOMå¼‚å¸¸ï¼Œç›´æ¥è§‚å¯Ÿç³»ç»Ÿæ—¥å¿—/var/log/messagesï¼Œç¡®è®¤å­˜åœ¨oomå¼‚å¸¸ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-SQL" lang="SQL">[root<span class="hljs-variable">@gdb</span><span class="hljs-operator">-</span>adm <span class="hljs-operator">~</span>]#  grep <span class="hljs-operator">-</span>inr <span class="hljs-operator">/</span>var<span class="hljs-operator">/</span>log<span class="hljs-operator">/</span>messages
<span class="hljs-number">5</span>:<span class="hljs-type">Dec</span> <span class="hljs-number">21</span> <span class="hljs-number">06</span>:<span class="hljs-number">55</span>:<span class="hljs-number">33</span> gdb kernel: [<span class="hljs-number">419827.630493</span>] crontab<span class="hljs-number">-1</span> invoked oom<span class="hljs-operator">-</span>killer: gfp_mask<span class="hljs-operator">=</span><span class="hljs-number">0x6200ca</span>(GFP_HIGHUSER_MOVABLE), <span class="hljs-keyword">order</span><span class="hljs-operator">=</span><span class="hljs-number">0</span>, oom_score_adj<span class="hljs-operator">=</span><span class="hljs-number">0</span>
<span class="hljs-number">11</span>:<span class="hljs-type">Dec</span> <span class="hljs-number">21</span> <span class="hljs-number">06</span>:<span class="hljs-number">55</span>:<span class="hljs-number">33</span> gdb kernel: [<span class="hljs-number">419827.630530</span>]  oom_kill_process<span class="hljs-operator">+</span><span class="hljs-number">0x24f</span><span class="hljs-operator">/</span><span class="hljs-number">0x270</span>
<span class="hljs-number">12</span>:<span class="hljs-type">Dec</span> <span class="hljs-number">21</span> <span class="hljs-number">06</span>:<span class="hljs-number">55</span>:<span class="hljs-number">33</span> gdb kernel: [<span class="hljs-number">419827.630532</span>]  ? oom_badness<span class="hljs-operator">+</span><span class="hljs-number">0x25</span><span class="hljs-operator">/</span><span class="hljs-number">0x140</span>
<span class="hljs-number">68</span>:<span class="hljs-type">Dec</span> <span class="hljs-number">21</span> <span class="hljs-number">06</span>:<span class="hljs-number">55</span>:<span class="hljs-number">33</span> gdb kernel: [<span class="hljs-number">419827.630752</span>] [  pid  ]   uid  tgid total_vm      rss pgtables_bytes swapents oom_score_adj name
<span class="hljs-number">148</span>:<span class="hljs-type">Dec</span> <span class="hljs-number">21</span> <span class="hljs-number">06</span>:<span class="hljs-number">55</span>:<span class="hljs-number">33</span> gdb kernel: [<span class="hljs-number">419827.631062</span>] oom<span class="hljs-operator">-</span>kill:<span class="hljs-keyword">constraint</span><span class="hljs-operator">=</span>CONSTRAINT_NONE,nodemask<span class="hljs-operator">=</span>(<span class="hljs-keyword">null</span>),cpuset<span class="hljs-operator">=</span><span class="hljs-operator">/</span>,mems_allowed<span class="hljs-operator">=</span><span class="hljs-number">0</span><span class="hljs-number">-1</span>,global_oom,task_memcg<span class="hljs-operator">=</span><span class="hljs-operator">/</span>user.slice<span class="hljs-operator">/</span><span class="hljs-keyword">user</span><span class="hljs-number">-2036.</span>slice<span class="hljs-operator">/</span>session<span class="hljs-number">-6188.</span><span class="hljs-keyword">scope</span>,task<span class="hljs-operator">=</span>mysqld,pid<span class="hljs-operator">=</span><span class="hljs-number">2567710</span>,uid<span class="hljs-operator">=</span><span class="hljs-number">2032</span>
</code></pre>
<h3 data-id="heading-2">äºŒã€é—®é¢˜åˆ†æ</h3>
<h4 data-id="heading-3">1ã€å†…å­˜è®¾ç½®æ£€æŸ¥</h4>
<p>æœåŠ¡å™¨ç‰©ç†å†…å­˜376Gï¼Œè€Œ<code>innodb_buffer_pool_size</code>è®¾ç½®ä¸º200Gï¼Œå æ¯”ä¸º53%ï¼Œç¬¦åˆé¢„æœŸã€‚</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">free</span> <span class="hljs-operator">-</span>h
              total        used        <span class="hljs-keyword">free</span>      shared  buff<span class="hljs-operator">/</span>cache   available
Mem:          <span class="hljs-number">376</span>Gi       <span class="hljs-number">267</span>Gi        <span class="hljs-number">26</span>Gi       <span class="hljs-number">5.0</span>Mi        <span class="hljs-number">82</span>Gi        <span class="hljs-number">53</span>Gi
</code></pre>
<h4 data-id="heading-4">2ã€jemollocåˆ¤æ–­</h4>
<p>ä½œä¸ºGreatSQLæ•°æ®åº“æˆ–è€…å¼€æºMySQLæ•°æ®åº“ï¼Œå‡ºç°OOMçš„æƒ…å†µï¼Œå¾ˆå¤§å¯èƒ½æ˜¯ç”±äºä½¿ç”¨é»˜è®¤çš„glibcå†…å­˜åˆ†é…ç®¡ç†ï¼Œå†…å­˜ä½¿ç”¨åé‡Šæ”¾ä¸å®Œå…¨å¼•èµ·å†…å­˜æ³„æ¼å¯¼è‡´ï¼Œé€šè¿‡å‘½ä»¤<code>lsof -p PID| grep jem</code> è§‚å¯Ÿå†…å­˜åˆ†é…ç®¡ç†æ–¹å¼</p>
<pre><code class="hljs language-SQL" lang="SQL">[root<span class="hljs-variable">@gdb</span> <span class="hljs-operator">~</span>]# lsof <span class="hljs-operator">-</span>p <span class="hljs-number">25424</span> <span class="hljs-operator">|</span> grep jem
mysqld <span class="hljs-number">25424</span> mysql  mem       REG                <span class="hljs-number">8</span>,<span class="hljs-number">2</span>    <span class="hljs-number">2136088</span>   <span class="hljs-number">2355262</span> <span class="hljs-operator">/</span>data<span class="hljs-operator">/</span>svr<span class="hljs-operator">/</span>greatsql<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>mysql<span class="hljs-operator">/</span>libjemalloc.so<span class="hljs-number">.1</span>
</code></pre>
<p>ä»è¿”å›å¯ä»¥çœ‹å‡ºé…ç½®æ­£å¸¸ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥æ’é™¤æ­¤åŸå› ã€‚</p>
<h4 data-id="heading-5">3ã€OOMæ—¥å¿—è¯¦ç»†åˆ†æ</h4>
<h5 data-id="heading-6">1ï¼‰å®Œæ•´OOMæ—¥å¿—</h5>
<pre><code class="hljs language-YAML" lang="YAML"><span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630493</span>] <span class="hljs-attr">crontab-1 invoked oom-killer:</span> <span class="hljs-string">gfp_mask=0x6200ca(GFP_HIGHUSER_MOVABLE),</span> <span class="hljs-string">order=0,</span> <span class="hljs-string">oom_score_adj=0</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630499</span>] <span class="hljs-attr">CPU: 14 PID: 9458 Comm: crontab-1 Kdump:</span> <span class="hljs-string">loaded</span> <span class="hljs-string">Not</span> <span class="hljs-string">tainted</span> <span class="hljs-number">4.19</span><span class="hljs-number">.90</span><span class="hljs-number">-2107.6</span><span class="hljs-number">.0</span><span class="hljs-number">.0227</span><span class="hljs-number">.28</span><span class="hljs-string">.oe1.bclinux.x86_64</span> <span class="hljs-comment">#1</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630500</span>] <span class="hljs-attr">Hardware name:</span> <span class="hljs-string">FiberHome</span> <span class="hljs-string">FitServer/FiberHome</span> <span class="hljs-string">Boards,</span> <span class="hljs-string">BIOS</span> <span class="hljs-number">3.4</span><span class="hljs-string">.V7</span> <span class="hljs-number">02</span><span class="hljs-string">/01/2023</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630507</span>] <span class="hljs-attr">Call Trace:</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630519</span>]  <span class="hljs-string">dump_stack+0x66/0x8b</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630527</span>]  <span class="hljs-string">dump_header+0x4a/0x1fc</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630530</span>]  <span class="hljs-string">oom_kill_process+0x24f/0x270</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630532</span>]  <span class="hljs-string">?</span> <span class="hljs-string">oom_badness+0x25/0x140</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630533</span>]  <span class="hljs-string">out_of_memory+0x11f/0x540</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630536</span>]  <span class="hljs-string">__alloc_pages_slowpath+0x9f5/0xde0</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630543</span>]  <span class="hljs-string">__alloc_pages_nodemask+0x2a8/0x2d0</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630549</span>]  <span class="hljs-string">filemap_fault+0x35e/0x8a0</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630555</span>]  <span class="hljs-string">?</span> <span class="hljs-string">alloc_set_pte+0x244/0x450</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630558</span>]  <span class="hljs-string">?</span> <span class="hljs-string">filemap_map_pages+0x28f/0x480</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630584</span>]  <span class="hljs-string">ext4_filemap_fault+0x2c/0x40</span> [<span class="hljs-string">ext4</span>]
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630588</span>]  <span class="hljs-string">__do_fault+0x33/0x110</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630592</span>]  <span class="hljs-string">do_fault+0x12e/0x490</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630595</span>]  <span class="hljs-string">?</span> <span class="hljs-string">__handle_mm_fault+0x2a/0x690</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630597</span>]  <span class="hljs-string">__handle_mm_fault+0x613/0x690</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630601</span>]  <span class="hljs-string">handle_mm_fault+0xc4/0x200</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630604</span>]  <span class="hljs-string">__do_page_fault+0x2ba/0x4d0</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630609</span>]  <span class="hljs-string">?</span> <span class="hljs-string">__audit_syscall_exit+0x238/0x2c0</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630611</span>]  <span class="hljs-string">do_page_fault+0x31/0x130</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630616</span>]  <span class="hljs-string">?</span> <span class="hljs-string">page_fault+0x8/0x30</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630620</span>]  <span class="hljs-string">page_fault+0x1e/0x30</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630623</span>] <span class="hljs-attr">Mem-Info:</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630635</span>] <span class="hljs-string">active_anon:50985791</span> <span class="hljs-string">inactive_anon:354</span> <span class="hljs-string">isolated_anon:0#012</span> <span class="hljs-string">active_file:677</span> <span class="hljs-string">inactive_file:0</span> <span class="hljs-string">isolated_file:0#012</span> <span class="hljs-string">unevictable:0</span> <span class="hljs-string">dirty:105</span> <span class="hljs-string">writeback:123</span> <span class="hljs-string">unstable:0#012</span> <span class="hljs-string">slab_reclaimable:20583</span> <span class="hljs-string">slab_unreclaimable:49628#012</span> <span class="hljs-string">m</span>
<span class="hljs-string">apped:319</span> <span class="hljs-string">shmem:1323</span> <span class="hljs-string">pagetables:106803</span> <span class="hljs-string">bounce:0#012</span> <span class="hljs-string">free:5313776</span> <span class="hljs-string">free_pcp:5715</span> <span class="hljs-string">free_cma:0</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630638</span>] <span class="hljs-string">Node</span> <span class="hljs-number">0</span> <span class="hljs-string">active_anon:100766572kB</span> <span class="hljs-string">inactive_anon:556kB</span> <span class="hljs-string">active_file:1384kB</span> <span class="hljs-string">inactive_file:0kB</span> <span class="hljs-string">unevictable:0kB</span> <span class="hljs-string">isolated(anon):0kB</span> <span class="hljs-string">isolated(file):0kB</span> <span class="hljs-attr">mapped:76kB dirty:32kB writeback:0kB shmem:2276kB shmem_thp:</span> <span class="hljs-string">0kB</span> <span class="hljs-string">shmem_pmdm</span>
<span class="hljs-attr">apped: 0kB anon_thp:</span> <span class="hljs-string">0kB</span> <span class="hljs-string">writeback_tmp:0kB</span> <span class="hljs-string">unstable:0kB</span> <span class="hljs-string">all_unreclaimable?</span> <span class="hljs-literal">no</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630645</span>] <span class="hljs-string">Node</span> <span class="hljs-number">1</span> <span class="hljs-string">active_anon:103176592kB</span> <span class="hljs-string">inactive_anon:860kB</span> <span class="hljs-string">active_file:1324kB</span> <span class="hljs-string">inactive_file:80kB</span> <span class="hljs-string">unevictable:0kB</span> <span class="hljs-string">isolated(anon):0kB</span> <span class="hljs-string">isolated(file):0kB</span> <span class="hljs-attr">mapped:1200kB dirty:388kB writeback:492kB shmem:3016kB shmem_thp:</span> <span class="hljs-string">0kB</span> <span class="hljs-string">shme</span>
<span class="hljs-attr">m_pmdmapped: 0kB anon_thp:</span> <span class="hljs-string">0kB</span> <span class="hljs-string">writeback_tmp:0kB</span> <span class="hljs-string">unstable:0kB</span> <span class="hljs-string">all_unreclaimable?</span> <span class="hljs-literal">no</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630650</span>] <span class="hljs-string">Node</span> <span class="hljs-number">0</span> <span class="hljs-string">DMA</span> <span class="hljs-string">free:15892kB</span> <span class="hljs-string">min:824kB</span> <span class="hljs-string">low:1028kB</span> <span class="hljs-string">high:1232kB</span> <span class="hljs-string">active_anon:0kB</span> <span class="hljs-string">inactive_anon:0kB</span> <span class="hljs-string">active_file:0kB</span> <span class="hljs-string">inactive_file:0kB</span> <span class="hljs-string">unevictable:0kB</span> <span class="hljs-string">writepending:0kB</span> <span class="hljs-string">present:15976kB</span> <span class="hljs-string">managed:15892kB</span> <span class="hljs-string">mlocked:0kB</span> <span class="hljs-string">kernel_stack:0k</span>
<span class="hljs-string">B</span> <span class="hljs-string">pagetables:0kB</span> <span class="hljs-string">bounce:0kB</span> <span class="hljs-string">free_pcp:0kB</span> <span class="hljs-string">local_pcp:0kB</span> <span class="hljs-string">free_cma:0kB</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630654</span>] <span class="hljs-string">lowmem_reserve[]:</span> <span class="hljs-number">0</span> <span class="hljs-number">1347 </span><span class="hljs-number">191666</span> <span class="hljs-number">191666</span> <span class="hljs-number">191666</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630661</span>] <span class="hljs-attr">Node 0 DMA32 free:833940kB min:72972kB low:91212kB high:109452kB active_anon:559420kB inactive_anon:8kB active_file:68kB inactive_file:0kB unevictable:0kB writepending:32kB present:1733384kB managed:1405672kB mlocked:</span>
<span class="hljs-string">0kB</span> <span class="hljs-string">kernel_stack:52kB</span> <span class="hljs-string">pagetables:1084kB</span> <span class="hljs-string">bounce:0kB</span> <span class="hljs-string">free_pcp:400kB</span> <span class="hljs-string">local_pcp:0kB</span> <span class="hljs-string">free_cma:0kB</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630666</span>] <span class="hljs-string">lowmem_reserve[]:</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">190319</span> <span class="hljs-number">190319</span> <span class="hljs-number">190319</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630672</span>] <span class="hljs-attr">Node 0 Normal free:10117540kB min:10117912kB low:12647388kB high:15176864kB active_anon:100207152kB inactive_anon:548kB active_file:808kB inactive_file:0kB unevictable:0kB writepending:0kB present:198180864kB managed:</span>
<span class="hljs-string">194894048kB</span> <span class="hljs-string">mlocked:0kB</span> <span class="hljs-string">kernel_stack:13504kB</span> <span class="hljs-string">pagetables:215840kB</span> <span class="hljs-string">bounce:0kB</span> <span class="hljs-string">free_pcp:536kB</span> <span class="hljs-string">local_pcp:0kB</span> <span class="hljs-string">free_cma:0kB</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630679</span>] <span class="hljs-string">lowmem_reserve[]:</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630683</span>] <span class="hljs-string">Node</span> <span class="hljs-number">1</span> <span class="hljs-string">Normal</span> <span class="hljs-string">free:10287732kB</span> <span class="hljs-string">min:10288284kB</span> <span class="hljs-string">low:12860352kB</span> <span class="hljs-string">high:15432420kB</span> <span class="hljs-string">active_anon:103176592kB</span> <span class="hljs-string">inactive_anon:860kB</span> <span class="hljs-string">active_file:1324kB</span> <span class="hljs-string">inactive_file:80kB</span> <span class="hljs-string">unevictable:0kB</span> <span class="hljs-string">writepending:880kB</span> <span class="hljs-string">present:201326592kB</span> <span class="hljs-string">mana</span>
<span class="hljs-string">ged:198175752kB</span> <span class="hljs-string">mlocked:0kB</span> <span class="hljs-string">kernel_stack:11836kB</span> <span class="hljs-string">pagetables:210288kB</span> <span class="hljs-string">bounce:0kB</span> <span class="hljs-string">free_pcp:21924kB</span> <span class="hljs-string">local_pcp:332kB</span> <span class="hljs-string">free_cma:0kB</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630686</span>] <span class="hljs-string">lowmem_reserve[]:</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630688</span>] <span class="hljs-attr">Node 0 DMA:</span> <span class="hljs-number">1</span><span class="hljs-string">*4kB</span> <span class="hljs-string">(U)</span> <span class="hljs-number">0</span><span class="hljs-string">*8kB</span> <span class="hljs-number">1</span><span class="hljs-string">*16kB</span> <span class="hljs-string">(U)</span> <span class="hljs-number">0</span><span class="hljs-string">*32kB</span> <span class="hljs-number">2</span><span class="hljs-string">*64kB</span> <span class="hljs-string">(U)</span> <span class="hljs-number">1</span><span class="hljs-string">*128kB</span> <span class="hljs-string">(U)</span> <span class="hljs-number">1</span><span class="hljs-string">*256kB</span> <span class="hljs-string">(U)</span> <span class="hljs-number">0</span><span class="hljs-string">*512kB</span> <span class="hljs-number">1</span><span class="hljs-string">*1024kB</span> <span class="hljs-string">(U)</span> <span class="hljs-number">1</span><span class="hljs-string">*2048kB</span> <span class="hljs-string">(M)</span> <span class="hljs-number">3</span><span class="hljs-string">*4096kB</span> <span class="hljs-string">(M)</span> <span class="hljs-string">=</span> <span class="hljs-string">15892kB</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630694</span>] <span class="hljs-attr">Node 0 DMA32:</span> <span class="hljs-number">240</span><span class="hljs-string">*4kB</span> <span class="hljs-string">(UME)</span> <span class="hljs-number">178</span><span class="hljs-string">*8kB</span> <span class="hljs-string">(UME)</span> <span class="hljs-number">140</span><span class="hljs-string">*16kB</span> <span class="hljs-string">(UME)</span> <span class="hljs-number">66</span><span class="hljs-string">*32kB</span> <span class="hljs-string">(UME)</span> <span class="hljs-number">70</span><span class="hljs-string">*64kB</span> <span class="hljs-string">(UME)</span> <span class="hljs-number">53</span><span class="hljs-string">*128kB</span> <span class="hljs-string">(UME)</span> <span class="hljs-number">38</span><span class="hljs-string">*256kB</span> <span class="hljs-string">(UME)</span> <span class="hljs-number">18</span><span class="hljs-string">*512kB</span> <span class="hljs-string">(UE)</span> <span class="hljs-number">3</span><span class="hljs-string">*1024kB</span> <span class="hljs-string">(U)</span> <span class="hljs-number">2</span><span class="hljs-string">*2048kB</span> <span class="hljs-string">(UE)</span> <span class="hljs-number">193</span><span class="hljs-string">*4096kB</span> <span class="hljs-string">(M)</span> <span class="hljs-string">=</span> <span class="hljs-string">834640kB</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630702</span>] <span class="hljs-attr">Node 0 Normal:</span> <span class="hljs-number">3557</span><span class="hljs-string">*4kB</span> <span class="hljs-string">(UE)</span> <span class="hljs-number">1963</span><span class="hljs-string">*8kB</span> <span class="hljs-string">(UME)</span> <span class="hljs-number">651</span><span class="hljs-string">*16kB</span> <span class="hljs-string">(UME)</span> <span class="hljs-number">1139</span><span class="hljs-string">*32kB</span> <span class="hljs-string">(UME)</span> <span class="hljs-number">855</span><span class="hljs-string">*64kB</span> <span class="hljs-string">(UME)</span> <span class="hljs-number">572</span><span class="hljs-string">*128kB</span> <span class="hljs-string">(UME)</span> <span class="hljs-number">308</span><span class="hljs-string">*256kB</span> <span class="hljs-string">(UE)</span> <span class="hljs-number">129</span><span class="hljs-string">*512kB</span> <span class="hljs-string">(UME)</span> <span class="hljs-number">50</span><span class="hljs-string">*1024kB</span> <span class="hljs-string">(UME)</span> <span class="hljs-number">27</span><span class="hljs-string">*2048kB</span> <span class="hljs-string">(UME)</span> <span class="hljs-number">2359</span><span class="hljs-string">*4096kB</span> <span class="hljs-string">(UME)</span> <span class="hljs-string">=</span> <span class="hljs-string">10118588kB</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630712</span>] <span class="hljs-attr">Node 1 Normal:</span> <span class="hljs-number">3636</span><span class="hljs-string">*4kB</span> <span class="hljs-string">(UME)</span> <span class="hljs-number">1848</span><span class="hljs-string">*8kB</span> <span class="hljs-string">(UME)</span> <span class="hljs-number">2744</span><span class="hljs-string">*16kB</span> <span class="hljs-string">(UME)</span> <span class="hljs-number">2139</span><span class="hljs-string">*32kB</span> <span class="hljs-string">(UME)</span> <span class="hljs-number">1580</span><span class="hljs-string">*64kB</span> <span class="hljs-string">(UME)</span> <span class="hljs-number">1073</span><span class="hljs-string">*128kB</span> <span class="hljs-string">(UME)</span> <span class="hljs-number">613</span><span class="hljs-string">*256kB</span> <span class="hljs-string">(UME)</span> <span class="hljs-number">280</span><span class="hljs-string">*512kB</span> <span class="hljs-string">(UE)</span> <span class="hljs-number">130</span><span class="hljs-string">*1024kB</span> <span class="hljs-string">(UE)</span> <span class="hljs-number">81</span><span class="hljs-string">*2048kB</span> <span class="hljs-string">(UE)</span> <span class="hljs-number">2273</span><span class="hljs-string">*4096kB</span> <span class="hljs-string">(UME)</span> <span class="hljs-string">=</span> <span class="hljs-string">10289648kB</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630731</span>] <span class="hljs-string">Node</span> <span class="hljs-number">0</span> <span class="hljs-string">hugepages_total=0</span> <span class="hljs-string">hugepages_free=0</span> <span class="hljs-string">hugepages_surp=0</span> <span class="hljs-string">hugepages_size=1048576kB</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630737</span>] <span class="hljs-string">Node</span> <span class="hljs-number">0</span> <span class="hljs-string">hugepages_total=40960</span> <span class="hljs-string">hugepages_free=40960</span> <span class="hljs-string">hugepages_surp=0</span> <span class="hljs-string">hugepages_size=2048kB</span>

<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630738</span>] <span class="hljs-string">Node</span> <span class="hljs-number">1</span> <span class="hljs-string">hugepages_total=0</span> <span class="hljs-string">hugepages_free=0</span> <span class="hljs-string">hugepages_surp=0</span> <span class="hljs-string">hugepages_size=1048576kB</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630741</span>] <span class="hljs-string">Node</span> <span class="hljs-number">1</span> <span class="hljs-string">hugepages_total=40960</span> <span class="hljs-string">hugepages_free=40960</span> <span class="hljs-string">hugepages_surp=0</span> <span class="hljs-string">hugepages_size=2048kB</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630742</span>] <span class="hljs-number">3360 </span><span class="hljs-string">total</span> <span class="hljs-string">pagecache</span> <span class="hljs-string">pages</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630744</span>] <span class="hljs-number">0</span> <span class="hljs-string">pages</span> <span class="hljs-string">in</span> <span class="hljs-string">swap</span> <span class="hljs-string">cache</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630746</span>] <span class="hljs-attr">Swap cache stats:</span> <span class="hljs-string">add</span> <span class="hljs-number">0</span><span class="hljs-string">,</span> <span class="hljs-string">delete</span> <span class="hljs-number">0</span><span class="hljs-string">,</span> <span class="hljs-string">find</span> <span class="hljs-number">0</span><span class="hljs-string">/0</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630746</span>] <span class="hljs-string">Free</span> <span class="hljs-string">swap</span>  <span class="hljs-string">=</span> <span class="hljs-string">0kB</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630747</span>] <span class="hljs-string">Total</span> <span class="hljs-string">swap</span> <span class="hljs-string">=</span> <span class="hljs-string">0kB</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630748</span>] <span class="hljs-number">100314204</span> <span class="hljs-string">pages</span> <span class="hljs-string">RAM</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630749</span>] <span class="hljs-number">0</span> <span class="hljs-string">pages</span> <span class="hljs-string">HighMem/MovableOnly</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630749</span>] <span class="hljs-number">1691363</span> <span class="hljs-string">pages</span> <span class="hljs-string">reserved</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630750</span>] <span class="hljs-number">0</span> <span class="hljs-string">pages</span> <span class="hljs-string">hwpoisoned</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630750</span>] <span class="hljs-string">Tasks</span> <span class="hljs-string">state</span> <span class="hljs-string">(memory</span> <span class="hljs-string">values</span> <span class="hljs-string">in</span> <span class="hljs-string">pages):</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630752</span>] [  <span class="hljs-string">pid</span>  ]   <span class="hljs-string">uid</span>  <span class="hljs-string">tgid</span> <span class="hljs-string">total_vm</span>      <span class="hljs-string">rss</span> <span class="hljs-string">pgtables_bytes</span> <span class="hljs-string">swapents</span> <span class="hljs-string">oom_score_adj</span> <span class="hljs-string">name</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630790</span>] [    <span class="hljs-number">926</span>]     <span class="hljs-number">0</span>   <span class="hljs-number">926</span>    <span class="hljs-number">72470</span>      <span class="hljs-number">811</span>   <span class="hljs-number">507904</span>        <span class="hljs-number">0</span>          <span class="hljs-number">-250</span> <span class="hljs-string">systemd-journal</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630794</span>] [    <span class="hljs-number">960</span>]     <span class="hljs-number">0</span>   <span class="hljs-number">960</span>     <span class="hljs-number">8269     </span><span class="hljs-number">1075    </span><span class="hljs-number">77824</span>        <span class="hljs-number">0</span>         <span class="hljs-number">-1000</span> <span class="hljs-string">systemd-udevd</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630798</span>] [   <span class="hljs-number">1623</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">1623      </span><span class="hljs-number">729</span>       <span class="hljs-number">28</span>    <span class="hljs-number">32768</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">mdadm</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630800</span>] [   <span class="hljs-number">1672</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">1672    </span><span class="hljs-number">23007</span>      <span class="hljs-number">217</span>    <span class="hljs-number">49152</span>        <span class="hljs-number">0</span>         <span class="hljs-number">-1000</span> <span class="hljs-string">auditd</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630803</span>] [   <span class="hljs-number">1674</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">1674     </span><span class="hljs-number">1568       </span><span class="hljs-number">90</span>    <span class="hljs-number">36864</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">sedispatch</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630806</span>] [   <span class="hljs-number">1712</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">1712    </span><span class="hljs-number">78709</span>      <span class="hljs-number">787</span>    <span class="hljs-number">98304</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">ModemManager</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630808</span>] [   <span class="hljs-number">1714</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">1714      </span><span class="hljs-number">571</span>       <span class="hljs-number">16</span>    <span class="hljs-number">32768</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">acpid</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630811</span>] [   <span class="hljs-number">1719</span>]    <span class="hljs-number">81</span>  <span class="hljs-number">1719     </span><span class="hljs-number">2891      </span><span class="hljs-number">845</span>    <span class="hljs-number">49152</span>        <span class="hljs-number">0</span>          <span class="hljs-number">-900</span> <span class="hljs-string">dbus-daemon</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630813</span>] [   <span class="hljs-number">1727</span>]   <span class="hljs-number">992</span>  <span class="hljs-number">1727      </span><span class="hljs-number">599</span>       <span class="hljs-number">38</span>    <span class="hljs-number">32768</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">lsmd</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630815</span>] [   <span class="hljs-number">1730</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">1730      </span><span class="hljs-number">619</span>       <span class="hljs-number">33</span>    <span class="hljs-number">32768</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">mcelog</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630817</span>] [   <span class="hljs-number">1735</span>]   <span class="hljs-number">999</span>  <span class="hljs-number">1735   </span><span class="hljs-number">743772</span>     <span class="hljs-number">1030   </span><span class="hljs-number">229376</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">polkitd</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630820</span>] [   <span class="hljs-number">1736</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">1736    </span><span class="hljs-number">77985</span>      <span class="hljs-number">204</span>    <span class="hljs-number">90112</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">rngd</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630827</span>] [   <span class="hljs-number">1739</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">1739     </span><span class="hljs-number">2711      </span><span class="hljs-number">421</span>    <span class="hljs-number">49152</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">smartd</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630829</span>] [   <span class="hljs-number">1741</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">1741    </span><span class="hljs-number">20070</span>      <span class="hljs-number">151</span>    <span class="hljs-number">40960</span>        <span class="hljs-number">0</span>          <span class="hljs-number">-500</span> <span class="hljs-string">irqbalance</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630831</span>] [   <span class="hljs-number">1743</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">1743     </span><span class="hljs-number">4492      </span><span class="hljs-number">227</span>    <span class="hljs-number">61440</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">systemd-machine</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630837</span>] [   <span class="hljs-number">1753</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">1753   </span><span class="hljs-number">114058</span>      <span class="hljs-number">472</span>   <span class="hljs-number">110592</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">abrtd</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630842</span>] [   <span class="hljs-number">1794</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">1794     </span><span class="hljs-number">4780      </span><span class="hljs-number">468</span>    <span class="hljs-number">65536</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">systemd-logind</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630844</span>] [   <span class="hljs-number">1830</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">1830   </span><span class="hljs-number">263593</span>      <span class="hljs-number">479</span>   <span class="hljs-number">929792</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">abrt-dump-journ</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630846</span>] [   <span class="hljs-number">1831</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">1831   </span><span class="hljs-number">261511</span>      <span class="hljs-number">460</span>   <span class="hljs-number">925696</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">abrt-dump-journ</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630850</span>] [   <span class="hljs-number">2802</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">2802   </span><span class="hljs-number">199635</span>      <span class="hljs-number">606</span>   <span class="hljs-number">299008</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">esfdaemon</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630852</span>] [   <span class="hljs-number">2803</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">2803    </span><span class="hljs-number">72799</span>    <span class="hljs-number">12101</span>   <span class="hljs-number">200704</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">bare-agent</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630855</span>] [   <span class="hljs-number">2805</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">2805    </span><span class="hljs-number">59117</span>      <span class="hljs-number">340</span>    <span class="hljs-number">86016</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">cupsd</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630856</span>] [   <span class="hljs-number">2810</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">2810   </span><span class="hljs-number">251667</span>      <span class="hljs-number">734</span>  <span class="hljs-number">1376256</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">rsyslogd</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630863</span>] [   <span class="hljs-number">2814</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">2814     </span><span class="hljs-number">3350      </span><span class="hljs-number">227</span>    <span class="hljs-number">53248</span>        <span class="hljs-number">0</span>         <span class="hljs-number">-1000</span> <span class="hljs-string">sshd</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630865</span>] [   <span class="hljs-number">2815</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">2815   </span><span class="hljs-number">117707</span>     <span class="hljs-number">3324   </span><span class="hljs-number">143360</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">tuned</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630869</span>] [   <span class="hljs-number">2828</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">2828    </span><span class="hljs-number">65710</span>      <span class="hljs-number">188</span>    <span class="hljs-number">73728</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">gssproxy</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630872</span>] [   <span class="hljs-number">2848</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">2848    </span><span class="hljs-number">53496</span>       <span class="hljs-number">92</span>    <span class="hljs-number">45056</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">init.ohasd</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630874</span>] [   <span class="hljs-number">2890</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">2890      </span><span class="hljs-number">906</span>       <span class="hljs-number">48</span>    <span class="hljs-number">32768</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">atd</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630875</span>] [   <span class="hljs-number">2896</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">2896    </span><span class="hljs-number">53748</span>      <span class="hljs-number">118</span>    <span class="hljs-number">49152</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">crond</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630878</span>] [   <span class="hljs-number">3692</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">3692     </span><span class="hljs-number">3539      </span><span class="hljs-number">148</span>    <span class="hljs-number">49152</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">xinetd</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630880</span>] [   <span class="hljs-number">3978</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">3978    </span><span class="hljs-number">10985</span>      <span class="hljs-number">242</span>    <span class="hljs-number">61440</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">master</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630884</span>] [   <span class="hljs-number">4004</span>]    <span class="hljs-number">89</span>  <span class="hljs-number">4004    </span><span class="hljs-number">11331</span>      <span class="hljs-number">527</span>    <span class="hljs-number">69632</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">qmgr</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630888</span>] [   <span class="hljs-number">4093</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">4093    </span><span class="hljs-number">43766</span>      <span class="hljs-number">216</span>   <span class="hljs-number">221184</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">sddog</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630890</span>] [   <span class="hljs-number">4112</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">4112   </span><span class="hljs-number">285705</span>      <span class="hljs-number">537</span>   <span class="hljs-number">577536</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">sdmonitor</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630891</span>] [   <span class="hljs-number">4233</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">4233   </span><span class="hljs-number">134053</span>      <span class="hljs-number">596</span>   <span class="hljs-number">466944</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">sdcc</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630895</span>] [   <span class="hljs-number">4259</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">4259   </span><span class="hljs-number">168947</span>     <span class="hljs-number">8371   </span><span class="hljs-number">667648</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">sdec</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630897</span>] [   <span class="hljs-number">4284</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">4284   </span><span class="hljs-number">286675</span>     <span class="hljs-number">1588   </span><span class="hljs-number">778240</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">sdexam</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630899</span>] [   <span class="hljs-number">4310</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">4310   </span><span class="hljs-number">492216</span>    <span class="hljs-number">50216</span>  <span class="hljs-number">1331200</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">sdsvrd</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630906</span>] [   <span class="hljs-number">4330</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">4330    </span><span class="hljs-number">29248</span>      <span class="hljs-number">278</span>   <span class="hljs-number">278528</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">udcenter</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630908</span>] [   <span class="hljs-number">8353</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">8353     </span><span class="hljs-number">2184      </span><span class="hljs-number">321</span>    <span class="hljs-number">45056</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">dhclient</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630910</span>] [   <span class="hljs-number">9243</span>]  <span class="hljs-number">1086  </span><span class="hljs-number">9243     </span><span class="hljs-number">5274      </span><span class="hljs-number">639</span>    <span class="hljs-number">73728</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">systemd</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630915</span>] [   <span class="hljs-number">9245</span>]  <span class="hljs-number">1086  </span><span class="hljs-number">9245     </span><span class="hljs-number">6383     </span><span class="hljs-number">1015    </span><span class="hljs-number">73728</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">(sd-pam)</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630918</span>] [   <span class="hljs-number">9348</span>]  <span class="hljs-number">1086  </span><span class="hljs-number">9348   </span><span class="hljs-number">470112</span>    <span class="hljs-number">50291</span>   <span class="hljs-number">761856</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">java</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630920</span>] [   <span class="hljs-number">9426</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">9426     </span><span class="hljs-number">2184      </span><span class="hljs-number">323</span>    <span class="hljs-number">45056</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">dhclient</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630922</span>] [   <span class="hljs-number">9852</span>]     <span class="hljs-number">0</span>  <span class="hljs-number">9852    </span><span class="hljs-number">53214</span>       <span class="hljs-number">26</span>    <span class="hljs-number">36864</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">agetty</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630926</span>] [  <span class="hljs-number">11463</span>]  <span class="hljs-number">1002 </span><span class="hljs-number">11463</span>     <span class="hljs-number">5276      </span><span class="hljs-number">639</span>    <span class="hljs-number">73728</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">systemd</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630936</span>] [  <span class="hljs-number">11465</span>]  <span class="hljs-number">1002 </span><span class="hljs-number">11465</span>     <span class="hljs-number">6383     </span><span class="hljs-number">1016    </span><span class="hljs-number">73728</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">(sd-pam)</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630942</span>] [  <span class="hljs-number">11611</span>]  <span class="hljs-number">1002 </span><span class="hljs-number">11611</span> <span class="hljs-number">14284908</span>     <span class="hljs-number">1404   </span><span class="hljs-number">602112</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">agent60</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630945</span>] [ <span class="hljs-number">137615</span>]     <span class="hljs-number">0</span> <span class="hljs-number">137615</span>   <span class="hljs-number">136163</span>     <span class="hljs-number">3215   </span><span class="hljs-number">147456</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">lvmdbusd</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630950</span>] [ <span class="hljs-number">796407</span>]  <span class="hljs-number">2036 </span><span class="hljs-number">796407</span>     <span class="hljs-number">5301      </span><span class="hljs-number">649</span>    <span class="hljs-number">73728</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">systemd</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630952</span>] [ <span class="hljs-number">796409</span>]  <span class="hljs-number">2036 </span><span class="hljs-number">796409</span>    <span class="hljs-number">43812</span>     <span class="hljs-number">1109    </span><span class="hljs-number">94208</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">(sd-pam)</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630954</span>] [ <span class="hljs-number">817343</span>]  <span class="hljs-number">2032 </span><span class="hljs-number">817343</span>    <span class="hljs-number">53508</span>      <span class="hljs-number">130</span>    <span class="hljs-number">53248</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">mysqld_safe</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630956</span>] [<span class="hljs-number">2270020</span>]  <span class="hljs-number">2032 </span><span class="hljs-number">2270020</span>  <span class="hljs-number">2778466</span>     <span class="hljs-number">1788  </span><span class="hljs-number">1466368</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">dbinit</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630958</span>] [<span class="hljs-number">2567710</span>]  <span class="hljs-number">2032 </span><span class="hljs-number">2567710</span> <span class="hljs-number">77307141</span> <span class="hljs-number">50817311</span> <span class="hljs-number">424357888</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">mysqld</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630960</span>] [<span class="hljs-number">3453494</span>]   <span class="hljs-number">998</span> <span class="hljs-number">3453494</span>     <span class="hljs-number">1173       </span><span class="hljs-number">50</span>    <span class="hljs-number">36864</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">chronyd</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630963</span>] [<span class="hljs-number">3621338</span>]    <span class="hljs-number">89</span> <span class="hljs-number">3621338</span>    <span class="hljs-number">11065</span>      <span class="hljs-number">249</span>    <span class="hljs-number">65536</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">pickup</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630981</span>] [<span class="hljs-number">3662845</span>]     <span class="hljs-number">0</span> <span class="hljs-number">3662845</span>     <span class="hljs-number">5297      </span><span class="hljs-number">648</span>    <span class="hljs-number">73728</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">systemd</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630983</span>] [<span class="hljs-number">3662881</span>]     <span class="hljs-number">0</span> <span class="hljs-number">3662881</span>    <span class="hljs-number">44244</span>     <span class="hljs-number">1356    </span><span class="hljs-number">98304</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">(sd-pam)</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630985</span>] [<span class="hljs-number">3662906</span>]    <span class="hljs-number">89</span> <span class="hljs-number">3662906</span>    <span class="hljs-number">11068</span>      <span class="hljs-number">242</span>    <span class="hljs-number">65536</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">trivial-rewrite</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630987</span>] [<span class="hljs-number">3663080</span>]     <span class="hljs-number">0</span> <span class="hljs-number">3663080</span>    <span class="hljs-number">10991</span>      <span class="hljs-number">235</span>    <span class="hljs-number">65536</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">local</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630988</span>] [<span class="hljs-number">3663097</span>]    <span class="hljs-number">89</span> <span class="hljs-number">3663097</span>    <span class="hljs-number">11131</span>      <span class="hljs-number">254</span>    <span class="hljs-number">65536</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">smtp</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630990</span>] [<span class="hljs-number">3663098</span>]     <span class="hljs-number">0</span> <span class="hljs-number">3663098</span>    <span class="hljs-number">10991</span>      <span class="hljs-number">235</span>    <span class="hljs-number">65536</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">local</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630992</span>] [<span class="hljs-number">3663108</span>]    <span class="hljs-number">89</span> <span class="hljs-number">3663108</span>    <span class="hljs-number">11073</span>      <span class="hljs-number">242</span>    <span class="hljs-number">65536</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">bounce</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630994</span>] [<span class="hljs-number">3663141</span>]     <span class="hljs-number">0</span> <span class="hljs-number">3663141</span>    <span class="hljs-number">10991</span>      <span class="hljs-number">235</span>    <span class="hljs-number">65536</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">local</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.630997</span>] [<span class="hljs-number">3663177</span>]    <span class="hljs-number">89</span> <span class="hljs-number">3663177</span>    <span class="hljs-number">11066</span>      <span class="hljs-number">242</span>    <span class="hljs-number">69632</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">flush</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.631003</span>] [<span class="hljs-number">3663193</span>]    <span class="hljs-number">89</span> <span class="hljs-number">3663193</span>    <span class="hljs-number">11066</span>      <span class="hljs-number">242</span>    <span class="hljs-number">69632</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">flush</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.631005</span>] [<span class="hljs-number">3663201</span>]    <span class="hljs-number">89</span> <span class="hljs-number">3663201</span>    <span class="hljs-number">11066</span>      <span class="hljs-number">242</span>    <span class="hljs-number">69632</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">flush</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.631007</span>] [<span class="hljs-number">3663207</span>]     <span class="hljs-number">0</span> <span class="hljs-number">3663207</span>    <span class="hljs-number">53463</span>       <span class="hljs-number">54</span>    <span class="hljs-number">45056</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">sh</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.631011</span>] [<span class="hljs-number">3663208</span>]     <span class="hljs-number">0</span> <span class="hljs-number">3663208</span>   <span class="hljs-number">884643</span>     <span class="hljs-number">7048   </span><span class="hljs-number">589824</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">promtail</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.631019</span>] [<span class="hljs-number">3663317</span>]    <span class="hljs-number">89</span> <span class="hljs-number">3663317</span>    <span class="hljs-number">11131</span>      <span class="hljs-number">254</span>    <span class="hljs-number">65536</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">smtp</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.631023</span>] [<span class="hljs-number">3663318</span>]    <span class="hljs-number">89</span> <span class="hljs-number">3663318</span>    <span class="hljs-number">11131</span>      <span class="hljs-number">254</span>    <span class="hljs-number">65536</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">smtp</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.631025</span>] [<span class="hljs-number">3663319</span>]    <span class="hljs-number">89</span> <span class="hljs-number">3663319</span>    <span class="hljs-number">11131</span>      <span class="hljs-number">254</span>    <span class="hljs-number">65536</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">smtp</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.631026</span>] [<span class="hljs-number">3663320</span>]    <span class="hljs-number">89</span> <span class="hljs-number">3663320</span>    <span class="hljs-number">11131</span>      <span class="hljs-number">254</span>    <span class="hljs-number">65536</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">smtp</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.631028</span>] [<span class="hljs-number">3663321</span>]    <span class="hljs-number">89</span> <span class="hljs-number">3663321</span>    <span class="hljs-number">11064</span>      <span class="hljs-number">242</span>    <span class="hljs-number">65536</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">error</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.631030</span>] [<span class="hljs-number">3663322</span>]    <span class="hljs-number">89</span> <span class="hljs-number">3663322</span>    <span class="hljs-number">11064</span>      <span class="hljs-number">242</span>    <span class="hljs-number">65536</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">error</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.631032</span>] [<span class="hljs-number">3663388</span>]     <span class="hljs-number">0</span> <span class="hljs-number">3663388</span>    <span class="hljs-number">53093</span>       <span class="hljs-number">15</span>    <span class="hljs-number">40960</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">sleep</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.631048</span>] [<span class="hljs-number">3663946</span>]     <span class="hljs-number">0</span> <span class="hljs-number">3663946</span>     <span class="hljs-number">4458       </span><span class="hljs-number">86</span>    <span class="hljs-number">61440</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">systemd-cgroups</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.631060</span>] [<span class="hljs-number">3663947</span>]     <span class="hljs-number">0</span> <span class="hljs-number">3663947</span>     <span class="hljs-number">4071       </span><span class="hljs-number">84</span>    <span class="hljs-number">57344</span>        <span class="hljs-number">0</span>             <span class="hljs-number">0</span> <span class="hljs-string">systemd-cgroups</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.631062</span>] <span class="hljs-string">oom-kill:constraint=CONSTRAINT_NONE,nodemask=(null),cpuset=/,mems_allowed=0-1,global_oom,task_memcg=/user.slice/user-2036.slice/session-6188.scope,task=mysqld,pid=2567710,uid=2032</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.631071</span>] <span class="hljs-attr">Out of memory:</span> <span class="hljs-string">Kill</span> <span class="hljs-string">process</span> <span class="hljs-number">2567710</span> <span class="hljs-string">(mysqld)</span> <span class="hljs-string">score</span> <span class="hljs-number">516</span> <span class="hljs-string">or</span> <span class="hljs-string">sacrifice</span> <span class="hljs-string">child</span>
<span class="hljs-attr">Dec 21 06:55:33 gdb kernel:</span> [<span class="hljs-number">419827.632542</span>] <span class="hljs-string">Killed</span> <span class="hljs-string">process</span> <span class="hljs-number">2567710</span> <span class="hljs-string">(mysqld)</span> <span class="hljs-string">total-vm:309228564kB,</span> <span class="hljs-string">anon-rss:203269244kB,</span> <span class="hljs-string">file-rss:0kB,</span> <span class="hljs-string">shmem-rss:0kB</span>
</code></pre>
<h5 data-id="heading-7">2ï¼‰å‘ç”Ÿç°è±¡</h5>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-type">Dec</span> <span class="hljs-number">21</span> <span class="hljs-number">06</span>:<span class="hljs-number">55</span>:<span class="hljs-number">33</span> gdb kernel: [<span class="hljs-number">419827.630493</span>] crontab<span class="hljs-number">-1</span> invoked oom<span class="hljs-operator">-</span>killer: gfp_mask<span class="hljs-operator">=</span><span class="hljs-number">0x6200ca</span>(GFP_HIGHUSER_MOVABLE), <span class="hljs-keyword">order</span><span class="hljs-operator">=</span><span class="hljs-number">0</span>, oom_score_adj<span class="hljs-operator">=</span><span class="hljs-number">0</span>
<span class="hljs-type">Dec</span> <span class="hljs-number">21</span> <span class="hljs-number">06</span>:<span class="hljs-number">55</span>:<span class="hljs-number">33</span> gdb kernel: [<span class="hljs-number">419827.632542</span>] Killed process <span class="hljs-number">2567710</span> (mysqld) total<span class="hljs-operator">-</span>vm:<span class="hljs-number">309228564</span>kB, anon<span class="hljs-operator">-</span>rss:<span class="hljs-number">203269244</span>kB, file<span class="hljs-operator">-</span>rss:<span class="hljs-number">0</span>kB, shmem<span class="hljs-operator">-</span>rss:<span class="hljs-number">0</span>kB
</code></pre>
<p>ä¸Šè¿°å…³é”®ä¿¡æ¯ä¸ºè¿›ç¨‹<code>crontab-1</code>ç”³è¯·æ–°çš„å†…å­˜å¼•èµ·oom-killerï¼Œè€Œè¢«killè¿›ç¨‹ä¸º<code>mysqld</code>å ç”¨å†…å­˜å¤§å°203269244kB</p>
<h5 data-id="heading-8">3) NUMAå ç”¨åˆ†æ</h5>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-type">Dec</span> <span class="hljs-number">21</span> <span class="hljs-number">06</span>:<span class="hljs-number">55</span>:<span class="hljs-number">33</span> gdb kernel: [<span class="hljs-number">419827.630672</span>] Node <span class="hljs-number">0</span> Normal <span class="hljs-keyword">free</span>:<span class="hljs-number">10117540</span>kB min:<span class="hljs-number">10117912</span>kB low:<span class="hljs-number">12647388</span>kB high:<span class="hljs-number">15176864</span>kB active_anon:<span class="hljs-number">100207152</span>kB inactive_anon:<span class="hljs-number">548</span>kB active_file:<span class="hljs-number">808</span>kB inactive_file:<span class="hljs-number">0</span>kB unevictable:<span class="hljs-number">0</span>kB writepending:<span class="hljs-number">0</span>kB present:<span class="hljs-number">198180864</span>kB managed:
<span class="hljs-number">194894048</span>kB mlocked:<span class="hljs-number">0</span>kB kernel_stack:<span class="hljs-number">13504</span>kB pagetables:<span class="hljs-number">215840</span>kB bounce:<span class="hljs-number">0</span>kB free_pcp:<span class="hljs-number">536</span>kB local_pcp:<span class="hljs-number">0</span>kB free_cma:<span class="hljs-number">0</span>kB
<span class="hljs-type">Dec</span> <span class="hljs-number">21</span> <span class="hljs-number">06</span>:<span class="hljs-number">55</span>:<span class="hljs-number">33</span> gdb kernel: [<span class="hljs-number">419827.630679</span>] lowmem_reserve[]: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>
<span class="hljs-type">Dec</span> <span class="hljs-number">21</span> <span class="hljs-number">06</span>:<span class="hljs-number">55</span>:<span class="hljs-number">33</span> gdb kernel: [<span class="hljs-number">419827.630683</span>] Node <span class="hljs-number">1</span> Normal <span class="hljs-keyword">free</span>:<span class="hljs-number">10287732</span>kB min:<span class="hljs-number">10288284</span>kB low:<span class="hljs-number">12860352</span>kB high:<span class="hljs-number">15432420</span>kB active_anon:<span class="hljs-number">103176592</span>kB inactive_anon:<span class="hljs-number">860</span>kB active_file:<span class="hljs-number">1324</span>kB inactive_file:<span class="hljs-number">80</span>kB unevictable:<span class="hljs-number">0</span>kB writepending:<span class="hljs-number">880</span>kB present:<span class="hljs-number">201326592</span>kB mana
ged:<span class="hljs-number">198175752</span>kB mlocked:<span class="hljs-number">0</span>kB kernel_stack:<span class="hljs-number">11836</span>kB pagetables:<span class="hljs-number">210288</span>kB bounce:<span class="hljs-number">0</span>kB free_pcp:<span class="hljs-number">21924</span>kB local_pcp:<span class="hljs-number">332</span>kB free_cma:<span class="hljs-number">0</span>kB
</code></pre>
<p>ä»ä¸Šè¿°æ—¥å¿—ï¼Œå¯ä»¥çœ‹å‡ºä¸¤ä¸ªnuma nodeçš„å‰©ä½™freeå†…å­˜å‡ä½äºäº†minçš„è¦æ±‚å†…å­˜ã€‚</p>
<h5 data-id="heading-9">4) å†…å­˜å ç”¨ç»Ÿè®¡</h5>
<p>æ ¹æ®OOMè®°å½•çš„æ—¥å¿—ä¿¡æ¯ï¼Œå†…å­˜å¤§æ¦‚æœ‰å¦‚ä¸‹åˆ†é…(æ³¨æ„ï¼Œç³»ç»Ÿæ—¥å¿—ä¸­rssåˆ—çš„å•ä½ä¸ºé¡µï¼Œé»˜è®¤4kå¤§å°)</p>





















<table><thead><tr><th>è¿›ç¨‹</th><th>å ç”¨å†…å­˜</th></tr></thead><tbody><tr><td>mysqld</td><td>193G</td></tr><tr><td>å…¶ä»–è¿›ç¨‹</td><td>641M</td></tr><tr><td>NUMAå‰©ä½™</td><td>19.5G</td></tr></tbody></table>
<p>ä¸Šè¿°å†…å­˜è¿œä½äºæ“ä½œç³»ç»Ÿå†…å­˜376Gï¼Œç¼ºå¤±è¿‘163G</p>
<h5 data-id="heading-10">5) å¤§é¡µåˆ†æ</h5>
<p>ç»§ç»­æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-type">Dec</span> <span class="hljs-number">21</span> <span class="hljs-number">06</span>:<span class="hljs-number">55</span>:<span class="hljs-number">33</span> gdb kernel: [<span class="hljs-number">419827.630731</span>] Node <span class="hljs-number">0</span> hugepages_total<span class="hljs-operator">=</span><span class="hljs-number">0</span> hugepages_free<span class="hljs-operator">=</span><span class="hljs-number">0</span> hugepages_surp<span class="hljs-operator">=</span><span class="hljs-number">0</span> hugepages_size<span class="hljs-operator">=</span><span class="hljs-number">1048576</span>kB
<span class="hljs-type">Dec</span> <span class="hljs-number">21</span> <span class="hljs-number">06</span>:<span class="hljs-number">55</span>:<span class="hljs-number">33</span> gdb kernel: [<span class="hljs-number">419827.630737</span>] Node <span class="hljs-number">0</span> hugepages_total<span class="hljs-operator">=</span><span class="hljs-number">40960</span> hugepages_free<span class="hljs-operator">=</span><span class="hljs-number">40960</span> hugepages_surp<span class="hljs-operator">=</span><span class="hljs-number">0</span> hugepages_size<span class="hljs-operator">=</span><span class="hljs-number">2048</span>kB
<span class="hljs-type">Dec</span> <span class="hljs-number">21</span> <span class="hljs-number">06</span>:<span class="hljs-number">55</span>:<span class="hljs-number">33</span> gdb kernel: [<span class="hljs-number">419827.630738</span>] Node <span class="hljs-number">1</span> hugepages_total<span class="hljs-operator">=</span><span class="hljs-number">0</span> hugepages_free<span class="hljs-operator">=</span><span class="hljs-number">0</span> hugepages_surp<span class="hljs-operator">=</span><span class="hljs-number">0</span> hugepages_size<span class="hljs-operator">=</span><span class="hljs-number">1048576</span>kB
<span class="hljs-type">Dec</span> <span class="hljs-number">21</span> <span class="hljs-number">06</span>:<span class="hljs-number">55</span>:<span class="hljs-number">33</span> gdb kernel: [<span class="hljs-number">419827.630741</span>] Node <span class="hljs-number">1</span> hugepages_total<span class="hljs-operator">=</span><span class="hljs-number">40960</span> hugepages_free<span class="hljs-operator">=</span><span class="hljs-number">40960</span> hugepages_surp<span class="hljs-operator">=</span><span class="hljs-number">0</span> hugepages_size<span class="hljs-operator">=</span><span class="hljs-number">2048</span>kB
</code></pre>
<p>è§£æä¸º</p>



































<table><thead><tr><th/><th>é¡µç±»å‹</th><th>æ€»é¡µæ•°é‡</th><th>ç©ºé—²é¡µ</th></tr></thead><tbody><tr><td>numanode0</td><td>2M</td><td>40960</td><td>40960</td></tr><tr><td>numanode0</td><td>1G</td><td>0</td><td>0</td></tr><tr><td>numanode1</td><td>2M</td><td>40960</td><td>40960</td></tr><tr><td>numanode1</td><td>1G</td><td>0</td><td>0</td></tr></tbody></table>
<p>å¯è§å¤§é¡µå ç”¨äº†<code>2M x 40960 x 2=160G</code>å†…å­˜ï¼Œå¹¶ä¸”æ²¡æœ‰è¢«ä½¿ç”¨ï¼Œåˆšå¥½å’Œå†…å­˜ç»Ÿè®¡ç›¸è¿‘</p>
<h4 data-id="heading-11">4ã€å¤§é¡µé…ç½®æŸ¥çœ‹</h4>
<h5 data-id="heading-12">1) æ£€æŸ¥é€æ˜å¤§é¡µé…ç½®</h5>
<p><code>cat /sys/kernel/mm/transparent_hugepage/enabled</code>ï¼Œç¡®è®¤æ˜¯å…³é—­çŠ¶æ€</p>
<pre><code class="hljs language-SQL" lang="SQL">[root<span class="hljs-variable">@gdb</span> <span class="hljs-operator">~</span>]#  cat <span class="hljs-operator">/</span>sys<span class="hljs-operator">/</span>kernel<span class="hljs-operator">/</span>mm<span class="hljs-operator">/</span>transparent_hugepage<span class="hljs-operator">/</span>enabled
always madvise [never] 
</code></pre>
<h5 data-id="heading-13">2) æ£€æŸ¥ä¼ ç»Ÿå¤§é¡µé…ç½®</h5>
<p><code>sysctl -p | grep vm</code> ï¼Œå¯è§å¹¶æ²¡æœ‰ç›¸å…³é…ç½®</p>
<pre><code class="hljs language-SQL" lang="SQL">[root<span class="hljs-variable">@gdb</span> <span class="hljs-operator">~</span>]#  sysctl <span class="hljs-operator">-</span>p <span class="hljs-operator">|</span> grep vm
vm.zone_reclaim_mode<span class="hljs-operator">=</span><span class="hljs-number">0</span>
vm.swappiness<span class="hljs-operator">=</span><span class="hljs-number">1</span>
vm.min_free_kbytes<span class="hljs-operator">=</span><span class="hljs-number">20480000</span>
</code></pre>
<h5 data-id="heading-14">3) å¤§é¡µç‰¹æ€§å¯¹æ¯”</h5>



































<table><thead><tr><th>ç‰¹æ€§ç»´åº¦</th><th>ä¼ ç»Ÿå¤§é¡µ</th><th>é€æ˜å¤§é¡µ</th></tr></thead><tbody><tr><td>æ£€æŸ¥æ–¹å¼</td><td><code>/etc/sysctl.conf</code> ä¸­çš„ <code>vm.nr_hugepages</code></td><td>/sys/kernel/mm/transparent_hugepage/enabled</td></tr><tr><td>ç®¡ç†æœºåˆ¶</td><td>é™æ€é¢„åˆ†é…ã€‚åœ¨ç³»ç»Ÿå¯åŠ¨æˆ–é…ç½®åï¼Œå†…æ ¸ç«‹å³ä»ç‰©ç†å†…å­˜ä¸­åˆ’å‡ºæŒ‡å®šæ•°é‡çš„å¤§é¡µã€‚è¿™éƒ¨åˆ†å†…å­˜è¢«â€œé”å®šâ€ï¼Œä¸“ç”¨äºå¤§é¡µï¼Œä¸èƒ½è¢«æŒªä½œä»–ç”¨ï¼ˆå¦‚è¿›ç¨‹çš„æ™®é€šå°é¡µï¼‰ã€‚</td><td>åŠ¨æ€åˆ†é…ã€‚å†…æ ¸åœ¨è¿è¡Œæ—¶æ ¹æ®å†…å­˜è®¿é—®æ¨¡å¼ï¼ˆå¦‚è¿ç»­çš„512ä¸ª4Ké¡µè¢«é¢‘ç¹è®¿é—®ï¼‰ï¼Œè‡ªåŠ¨å°†å°é¡µåˆå¹¶æˆä¸€ä¸ªå¤§é¡µï¼Œæˆ–è€…åœ¨ä¸å†éœ€è¦æ—¶æ‹†åˆ†å›å°é¡µã€‚è¿™æ˜¯ä¸€ä¸ªâ€œæŒ‰éœ€â€çš„è¿‡ç¨‹ã€‚</td></tr><tr><td>é…ç½®æ–¹å¼</td><td>1. ä¸´æ—¶ï¼š<code>sysctl -w vm.nr_hugepages=N</code> <br/>2. æ°¸ä¹…ï¼šåœ¨ <code>/etc/sysctl.conf</code> ä¸­æ·»åŠ  <code>vm.nr_hugepages=N</code>ï¼Œé‡å¯æˆ–æ‰§è¡Œ <code>sysctl -p</code> ç”Ÿæ•ˆã€‚</td><td>1. ä¸´æ—¶ï¼š<code>echo &lt;mode&gt; &gt; /sys/kernel/mm/transparent_hugepage/enabled</code> <br/>2. æ°¸ä¹…ï¼šé€šè¿‡å†…æ ¸å¯åŠ¨å‚æ•° <code>vi /etc/default/grub</code> åœ¨ <code>GRUB_CMDLINE_LINUX</code>å˜é‡ä¸­æ·»åŠ <code>transparent_hugepage=always</code>ï¼Œé‡æ–°ç”ŸæˆGRUBé…ç½®<code>grub2-mkconfig -o /boot/grub2/grub.cfg</code></td></tr><tr><td>å†…å­˜ä½¿ç”¨</td><td>ä¸“ç”¨ä¸”ç‹¬å ã€‚åˆ†é…åå³ä½¿ä¸ä½¿ç”¨ï¼Œä¹Ÿä¼šä¸€ç›´å ç”¨ç‰©ç†å†…å­˜ï¼Œå¯èƒ½å¯¼è‡´å†…å­˜æµªè´¹ã€‚</td><td>å…±äº«æ± ã€‚ä½¿ç”¨æ™®é€šçš„å†…å­˜é¡µæ± ï¼Œåªåœ¨éœ€è¦æ—¶æ‰è½¬æ¢ï¼Œå†…å­˜åˆ©ç”¨ç‡æ›´é«˜ã€‚</td></tr><tr><td>æ€§èƒ½ç‰¹ç‚¹</td><td>æ€§èƒ½ç¨³å®šå¯é¢„æµ‹ã€‚åº”ç”¨ç¨‹åºï¼ˆå¦‚Oracle DB, Redisï¼‰é€šè¿‡<code>mmap()</code>æˆ–<code>shmget()</code>æ˜¾å¼è¯·æ±‚å¤§é¡µæ—¶ï¼Œèƒ½100%ä¿è¯ä½¿ç”¨å¤§é¡µï¼Œæ— ç¼ºé¡µä¸­æ–­æˆ–åˆå¹¶æ“ä½œå¼€é”€ï¼Œæ€§èƒ½æœ€ä¼˜ã€æœ€ç¨³å®šã€‚</td><td>æ€§èƒ½æœ‰æ³¢åŠ¨é£é™©ã€‚è™½ç„¶å¤§å¤šæ•°æƒ…å†µä¸‹èƒ½æå‡æ€§èƒ½ï¼ˆå‡å°‘TLB Missï¼‰ï¼Œä½†åœ¨å†…å­˜å‹åŠ›å¤§æˆ–ç¢ç‰‡åŒ–æ—¶ï¼Œå†…æ ¸çš„åˆå¹¶/æ‹†åˆ†æ“ä½œï¼ˆkhugepagedè¿›ç¨‹ï¼‰ä¼šå¸¦æ¥ä¸å¯é¢„æµ‹çš„å»¶è¿Ÿå°–å³°ï¼Œå¯¹å»¶è¿Ÿæ•æ„Ÿå‹åº”ç”¨ä¸åˆ©ã€‚</td></tr></tbody></table>
<p>æ ¹æ®æ•…éšœç°è±¡åŠå¤§é¡µç‰¹ç‚¹ï¼ŒçŒœæµ‹åº”è¯¥æ˜¯ç”±äºé…ç½®äº†ä¼ ç»Ÿå¤§é¡µï¼Œé”å®šäº†160Gå†…å­˜æ— æ³•è¢«å…¶ä»–è¿›ç¨‹ä½¿ç”¨ï¼Œä½†æ˜¯é…ç½®æ–‡ä»¶ä¸­å¹¶æ²¡æœ‰è¯¥é…ç½®ï¼Œç°è±¡å¾ˆå¥‡æ€ª</p>
<h5 data-id="heading-15">4) æ·±åº¦æœç´¢</h5>
<p>ä½¿ç”¨å‘½ä»¤<code>grep -R "nr_hugepages" /etc</code>è¿›è¡Œå¤§èŒƒå›´æ·±åº¦æœç´¢ï¼Œå‘ç°äº†é—®é¢˜æ‰€åœ¨</p>
<pre><code class="hljs language-SQL" lang="SQL">[root<span class="hljs-variable">@gdb</span> <span class="hljs-operator">~</span>]#  grep <span class="hljs-operator">-</span>R "nr_hugepages" <span class="hljs-operator">/</span>etc
<span class="hljs-operator">/</span>etc<span class="hljs-operator">/</span>sysctl.conf.bak<span class="hljs-number">-2025</span><span class="hljs-number">-07</span><span class="hljs-number">-13</span>:vm.nr_hugepages<span class="hljs-operator">=</span><span class="hljs-number">81920</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°é…ç½®æ–‡ä»¶åœ¨7æœˆ13æ—¥è¿›è¡Œäº†å¤‡ä»½è°ƒæ•´ï¼Œå¤‡ä»½å‰ç¡®å®æ˜¯æœ‰ä¼ ç»Ÿå¤§é¡µé…ç½®ï¼Œå¹¶ä¸”é…ç½®å€¼å’Œç›®å‰ç³»ç»Ÿæ—¥å¿—ä¸­è®°å½•å€¼ç›¸åŒã€‚</p>
<h5 data-id="heading-16">5) é…ç½®å˜æ›´æµ‹è¯•</h5>
<p>é€šè¿‡æµ‹è¯•å‘ç°ï¼Œå³ä½¿é…ç½®æ–‡ä»¶ä¸­å»ä¼ ç»Ÿå¤§é¡µè®¾ç½®ï¼Œä½†æ˜¯ä¾ç„¶æ˜¯å­˜åœ¨å¤§é¡µè®¾ç½®çš„</p>
<pre><code class="hljs language-bash" lang="bash">[root@qdb -]<span class="hljs-comment"># cat /etc/sysctl.conf | grep h</span>
kernel.shmall = 41943040
kernel.shmmax = 171798691840
kernel.shmmni=4096
<span class="hljs-comment">#vm.hugetlb_shm_group=54321</span>
<span class="hljs-comment">#vm.nr_hugepages = 40960</span>
[root@qdb -]<span class="hljs-comment"># sysctl -p | grep h</span>
kernel.shmall = 41943040
kernel.shmmax = 171798691840
kernel.shmmi=4096
[root@qdb -]<span class="hljs-comment"># cat /proc/sys/vm/nr_hugepages</span>
40960
</code></pre>
<p>è°ƒæ•´é…ç½®åå¦‚æœä¸é‡å¯æ“ä½œç³»ç»Ÿï¼Œéœ€è¦æ‰‹åŠ¨é‡Šæ”¾è¯¥éƒ¨åˆ†å†…å­˜</p>
<pre><code class="hljs language-bash" lang="bash">[root@gdb ~]<span class="hljs-comment"># echo 0 &gt; /proc/sys/vm/nr_hugepages</span>
[root@gdb ~]<span class="hljs-comment"># cat /proc/sys/vm/nr_hugepages</span>
0
</code></pre>
<h3 data-id="heading-17">ä¸‰ã€åŸå› æ€»ç»“æ”¹è¿›</h3>
<h5 data-id="heading-18">1) æ ¹æœ¬åŸå› </h5>
<p>å¤§é‡ HugePages è¢«é¢„ç•™ä½†æ•°æ®åº“æœªå®é™…ä½¿ç”¨ï¼Œå¯¼è‡´æ™®é€šå†…å­˜ä¸è¶³ï¼Œå¼•å‘ OOM</p>
<h5 data-id="heading-19">2) ä¸æ­£å¸¸çš„é»˜è®¤å¤§é¡µé…ç½®</h5>
<p>åœ¨æ“ä½œç³»ç»Ÿé»˜è®¤æƒ…å†µä¸‹ï¼Œæœªé…ç½®nr_hugepagesï¼Œå› æ­¤æœ€åˆåˆ†ææ—¶æœªè€ƒè™‘ä¼ ç»Ÿå¤§é¡µæ–¹å‘ã€‚åç»æ•°æ®å¯¹æ¯”ï¼Œå‘ç°ä¼ ç»Ÿå¤§é¡µå­˜åœ¨å†…å­˜å ç”¨å¼‚å¸¸ç°è±¡ã€‚ç»åç»­æ ¸å®ï¼Œç”±äºè¯¥æœåŠ¡å™¨ä¸ºåˆ©æ—§ä½¿ç”¨ï¼Œæ®‹ç•™äº†Oracleç›¸å…³é…ç½®ï¼Œå¯¼è‡´è¯¥éšè—é—®é¢˜æœªè¢«åŠæ—¶å‘ç°ï¼Œåˆæ˜¯ä¸€ä¸ªå›½äº§åŒ–è¿‡ç¨‹çš„å°å‘ã€‚</p>
<h5 data-id="heading-20">3) åç»­æ”¹è¿›</h5>
<p>åœ¨åŸºäºç°æœ‰æœåŠ¡å™¨åˆå§‹åŒ–æ­¥éª¤ä¸­ï¼Œå¢åŠ ä¼ ç»Ÿå¤§é¡µçš„æ£€æŸ¥è®¾ç½®æ­¥éª¤</p>
<pre><code class="hljs language-SQL" lang="SQL">sed <span class="hljs-operator">-</span>i <span class="hljs-string">'/huge/d'</span> <span class="hljs-operator">/</span>etc<span class="hljs-operator">/</span>sysctl.conf
sysctl <span class="hljs-operator">-</span>p <span class="hljs-operator">|</span> grep huge
echo <span class="hljs-number">0</span> <span class="hljs-operator">&gt;</span> <span class="hljs-operator">/</span>proc<span class="hljs-operator">/</span>sys<span class="hljs-operator">/</span>vm<span class="hljs-operator">/</span>nr_hugepages
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RustFS å¦‚ä½•å®ç°å¯¹è±¡å­˜å‚¨çš„å‰ç«¯ç›´ä¼ ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7587779957674917939</link>    <guid>https://juejin.cn/post/7587779957674917939</guid>    <pubDate>2025-12-26T04:59:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587779957674917939" data-draft-id="7587709130531127305" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RustFS å¦‚ä½•å®ç°å¯¹è±¡å­˜å‚¨çš„å‰ç«¯ç›´ä¼ ï¼Ÿ"/> <meta itemprop="keywords" content="Rust,Docker,Vue.js"/> <meta itemprop="datePublished" content="2025-12-26T04:59:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RustFS"/> <meta itemprop="url" content="https://juejin.cn/user/511719423354121"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RustFS å¦‚ä½•å®ç°å¯¹è±¡å­˜å‚¨çš„å‰ç«¯ç›´ä¼ ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/511719423354121/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RustFS
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T04:59:10.000Z" title="Fri Dec 26 2025 04:59:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡åˆ†äº« RustFS å¯¹è±¡å­˜å‚¨å‰æ®µç›´ä¼ çš„å®Œæ•´å®ç°æ–¹å¼ï¼Œæ”¹å˜äº†ä¼ ç»Ÿçš„æµè§ˆå™¨-&gt; åç«¯æœåŠ¡å™¨ -&gt; å¯¹è±¡å­˜å‚¨çš„ä¸Šä¼ æ–¹å¼ï¼Œæé«˜äº†æ•ˆç‡å’Œå®‰å…¨æ€§ã€‚æ–‡ç« åŒ…æ‹¬ 5 ä¸ªéƒ¨åˆ†ï¼š</p>
<ul>
<li>å‰è¨€</li>
<li>æ ¸å¿ƒæ¦‚å¿µ</li>
<li>ä¸¤ç§æ–¹æ¡ˆè¯¦è§£</li>
<li>æŠ€æœ¯å®ç°</li>
<li>å®Œæ•´ç¤ºä¾‹</li>
<li>æœ€ä½³å®è·µ</li>
</ul>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯å‰ç«¯ç›´ä¼ ï¼Ÿ</h2>
<p>ä¼ ç»Ÿçš„æ–‡ä»¶ä¸Šä¼ æµç¨‹ï¼š<strong>æµè§ˆå™¨ â†’ åç«¯æœåŠ¡å™¨ â†’ å¯¹è±¡å­˜å‚¨</strong>è¿™ç§æ–¹å¼å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>å ç”¨åç«¯æœåŠ¡å™¨å¸¦å®½å’Œèµ„æº</li>
<li>ä¸Šä¼ é€Ÿåº¦å—é™äºåç«¯æœåŠ¡å™¨</li>
<li>éœ€è¦å¤„ç†å¤§æ–‡ä»¶çš„å†…å­˜ç®¡ç†</li>
<li>æœåŠ¡å™¨æˆæœ¬å¢åŠ </li>
</ul>
<p>å‰ç«¯ç›´ä¼ åˆ™æ˜¯ï¼š<strong>æµè§ˆå™¨ â†’ å¯¹è±¡å­˜å‚¨</strong></p>
<p>ä¼˜åŠ¿ï¼š</p>
<ul>
<li>âœ… å‡è½»åç«¯æœåŠ¡å™¨å‹åŠ›</li>
<li>âœ… ä¸Šä¼ é€Ÿåº¦æ›´å¿«ï¼ˆç›´è¿å¯¹è±¡å­˜å‚¨ï¼‰</li>
<li>âœ… é™ä½æœåŠ¡å™¨æˆæœ¬</li>
<li>âœ… æ”¯æŒå¤§æ–‡ä»¶ä¸Šä¼ </li>
</ul>
<h3 data-id="heading-1">å®‰å…¨æ€§é—®é¢˜</h3>
<p>ç›´ä¼ é¢ä¸´çš„æ ¸å¿ƒé—®é¢˜ï¼š<strong>å¦‚ä½•åœ¨ä¸æš´éœ²æ°¸ä¹…å¯†é’¥çš„æƒ…å†µä¸‹ï¼Œè®©å‰ç«¯å®‰å…¨åœ°ä¸Šä¼ æ–‡ä»¶</strong>ï¼Ÿæœ¬æ•™ç¨‹ä»‹ç»ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li>é¢„ç­¾å URL æ–¹æ¡ˆï¼ˆæ¨èï¼‰</li>
<li>STS ä¸´æ—¶å‡­è¯æ–¹æ¡ˆ</li>
</ol>
<h3 data-id="heading-2">å¯¹è±¡å­˜å‚¨åŸºç¡€</h3>
<p>å¯¹è±¡å­˜å‚¨ä½¿ç”¨ç±»ä¼¼ AWS S3 çš„æ¨¡å‹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">å­˜å‚¨æ¡¶</span> <span class="hljs-string">(Bucket)</span>
<span class="hljs-string">â””â”€â”€</span> <span class="hljs-string">å¯¹è±¡</span> <span class="hljs-string">(Object)</span>
    <span class="hljs-string">â”œâ”€â”€</span> <span class="hljs-attr">Key:</span> <span class="hljs-string">"uploads/photo.jpg"</span>  <span class="hljs-comment"># å¯¹è±¡è·¯å¾„</span>
    <span class="hljs-string">â”œâ”€â”€</span> <span class="hljs-attr">Value:</span> [<span class="hljs-string">æ–‡ä»¶å†…å®¹</span>]
    <span class="hljs-string">â””â”€â”€</span> <span class="hljs-attr">Metadata:</span> {<span class="hljs-string">ContentType</span>, <span class="hljs-string">Size</span>, <span class="hljs-string">etc.</span>}
</code></pre>
<h3 data-id="heading-3">è®¿é—®æ§åˆ¶</h3>
<p>å¯¹è±¡å­˜å‚¨é€šè¿‡ Access Key å’Œ Secret Key è¿›è¡Œèº«ä»½éªŒè¯ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">æ°¸ä¹…å¯†é’¥ï¼ˆé•¿æœŸæœ‰æ•ˆï¼Œä¸åº”æš´éœ²ç»™å‰ç«¯ï¼‰
â”œâ”€â”€ Access <span class="hljs-keyword">Key</span> ID: <span class="hljs-string">"user-2"</span>
â””â”€â”€ Secret Access <span class="hljs-keyword">Key</span>: <span class="hljs-string">"rustfsadmin"</span>

ä¸´æ—¶å‡­è¯ï¼ˆçŸ­æœŸæœ‰æ•ˆï¼Œå¯ä»¥ç»™å‰ç«¯ä½¿ç”¨ï¼‰
â”œâ”€â”€ Access <span class="hljs-keyword">Key</span> ID
â”œâ”€â”€ Secret Access <span class="hljs-keyword">Key</span>
â””â”€â”€ Session Token
</code></pre>
<h3 data-id="heading-4">ä¸¤ç§æ–¹æ¡ˆè¯¦è§£</h3>
<h4 data-id="heading-5">æ–¹æ¡ˆä¸€ï¼šé¢„ç­¾å URL æ–¹æ¡ˆï¼ˆæ¨èï¼‰</h4>
<p>é€‚ç”¨åœºæ™¯</p>
<ul>
<li>å•æ–‡ä»¶ä¸Šä¼ </li>
<li>è¡¨å•æäº¤æ—¶é™„å¸¦æ–‡ä»¶</li>
<li>ç®€å•å®‰å…¨çš„ä¸Šä¼ éœ€æ±‚äº¤</li>
</ul>
<h5 data-id="heading-6">äº’æµç¨‹</h5>
<pre><code class="hljs">æµè§ˆå™¨                    åç«¯æœåŠ¡                   RustFS
  â”‚                          â”‚                          â”‚
  â”‚ â‘ è¯·æ±‚é¢„ç­¾åURL            â”‚                          â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚                          â”‚
  â”‚                          â”‚                          â”‚
  â”‚                          â”‚ â‘¡ä½¿ç”¨boto3ç”Ÿæˆç­¾åURL     â”‚
  â”‚                          â”‚                          â”‚
  â”‚ â‘¢è¿”å›é¢„ç­¾åURL            â”‚                          â”‚
  â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
  â”‚                          â”‚                          â”‚
  â”‚ â‘£ä½¿ç”¨é¢„ç­¾åURLç›´ä¼ æ–‡ä»¶                               â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚
  â”‚                          â”‚                          â”‚
  â”‚ â‘¤è¿”å›æˆåŠŸ                                            â”‚
  â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
</code></pre>
<p>ä¼˜åŠ¿:</p>
<ul>
<li>å‰ç«¯å®ç°æç®€ï¼Œæ— éœ€å¤„ç†ç­¾å</li>
<li>åç«¯å®Œå…¨æ§åˆ¶æƒé™</li>
<li>æ— éœ€é¢å¤–ä¾èµ–</li>
<li>æ¯ä¸ªæ–‡ä»¶ç‹¬ç«‹æƒé™æ§åˆ¶</li>
</ul>
<h4 data-id="heading-7">æ–¹æ¡ˆäºŒï¼šSTS ä¸´æ—¶å‡­è¯æ–¹æ¡ˆ</h4>
<p>æ¨èåœºæ™¯ï¼š</p>
<ul>
<li>æ‰¹é‡æ–‡ä»¶ä¸Šä¼ ï¼ˆå¦‚ç›¸å†Œä¸Šä¼ ï¼‰</li>
<li>é•¿æ—¶é—´ä¸Šä¼ æ“ä½œ</li>
<li>éœ€è¦å¤šæ¬¡ä¸Šä¼ çš„åœºæ™¯</li>
</ul>
<h5 data-id="heading-8">äº¤äº’æµç¨‹</h5>
<pre><code class="hljs">æµè§ˆå™¨                    åç«¯æœåŠ¡                   RustFS
  â”‚                          â”‚                          â”‚
  â”‚ â‘ è¯·æ±‚ä¸´æ—¶å‡­è¯              â”‚                          â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚                          â”‚
  â”‚                          â”‚                          â”‚
  â”‚ â‘¡è¿”å›ä¸´æ—¶å‡­è¯              â”‚                          â”‚
  â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
  â”‚                          â”‚                          â”‚
  â”‚ â‘¢å‰ç«¯ä½¿ç”¨SDKä¸Šä¼ ï¼ˆå‡­è¯å¯å¤ç”¨ï¼‰                        â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚
  â”‚                          â”‚                          â”‚
  â”‚ â‘£ç»§ç»­ä¸Šä¼ å…¶ä»–æ–‡ä»¶                                     â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚
</code></pre>
<p>ä¼˜åŠ¿</p>
<ul>
<li>å‡­è¯å¯å¤ç”¨ï¼Œå‡å°‘ç½‘ç»œè¯·æ±‚</li>
<li>é€‚åˆæ‰¹é‡ä¸Šä¼ </li>
<li>çµæ´»æ§åˆ¶æƒé™</li>
</ul>
<h3 data-id="heading-9">æŠ€æœ¯å®ç°</h3>
<h4 data-id="heading-10">åç«¯å®ç°ï¼ˆä½¿ç”¨ boto3ï¼‰</h4>
<ul>
<li>å®‰è£…ä¾èµ–</li>
</ul>

<pre><code class="hljs">pip install boto3 flask flask-cors
</code></pre>
<ul>
<li>æ ¸å¿ƒä»£ç </li>
</ul>

<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> boto3
<span class="hljs-keyword">from</span> botocore.client <span class="hljs-keyword">import</span> Config
<span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request, jsonify
<span class="hljs-keyword">from</span> flask_cors <span class="hljs-keyword">import</span> CORS

app = Flask(__name__)
CORS(app)

<span class="hljs-comment"># é…ç½®</span>
RUSTFS_CONFIG = {
    <span class="hljs-string">'access_key_id'</span>: <span class="hljs-string">'user-2'</span>,
    <span class="hljs-string">'secret_access_key'</span>: <span class="hljs-string">'rustfsadmin'</span>,
    <span class="hljs-string">'endpoint_url'</span>: <span class="hljs-string">'http://127.0.0.1:9000'</span>,
    <span class="hljs-string">'bucket_name'</span>: <span class="hljs-string">'test-bucket'</span>,
    <span class="hljs-string">'region_name'</span>: <span class="hljs-string">'us-east-1'</span>
}

<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_s3_client</span>():
    <span class="hljs-string">"""åˆ›å»º S3 å®¢æˆ·ç«¯"""</span>
    <span class="hljs-keyword">return</span> boto3.client(
        <span class="hljs-string">'s3'</span>,
        aws_access_key_id=RUSTFS_CONFIG[<span class="hljs-string">'access_key_id'</span>],
        aws_secret_access_key=RUSTFS_CONFIG[<span class="hljs-string">'secret_access_key'</span>],
        endpoint_url=RUSTFS_CONFIG[<span class="hljs-string">'endpoint_url'</span>],
        region_name=RUSTFS_CONFIG[<span class="hljs-string">'region_name'</span>],
        config=Config(
            signature_version=<span class="hljs-string">'s3v4'</span>,
            s3={<span class="hljs-string">'addressing_style'</span>: <span class="hljs-string">'path'</span>}
        )
    )

<span class="hljs-comment"># æ–¹æ¡ˆä¸€ï¼šé¢„ç­¾å URL</span>
<span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">'/api/presigned-url'</span>, methods=[<span class="hljs-string">'POST'</span>]</span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_presigned_url</span>():
    <span class="hljs-string">"""ç”Ÿæˆé¢„ç­¾å URL"""</span>
    data = request.get_json()
    object_key = data[<span class="hljs-string">'object_key'</span>]
    content_type = data.get(<span class="hljs-string">'content_type'</span>, <span class="hljs-string">'application/octet-stream'</span>)
    expires = data.get(<span class="hljs-string">'expires'</span>, <span class="hljs-number">3600</span>)

    s3_client = create_s3_client()

    <span class="hljs-comment"># boto3 è‡ªåŠ¨å¤„ç†ç­¾å</span>
    presigned_url = s3_client.generate_presigned_url(
        ClientMethod=<span class="hljs-string">'put_object'</span>,
        Params={
            <span class="hljs-string">'Bucket'</span>: RUSTFS_CONFIG[<span class="hljs-string">'bucket_name'</span>],
            <span class="hljs-string">'Key'</span>: object_key,
            <span class="hljs-string">'ContentType'</span>: content_type
        },
        ExpiresIn=expires
    )

    <span class="hljs-keyword">return</span> jsonify({
        <span class="hljs-string">'code'</span>: <span class="hljs-number">0</span>,
        <span class="hljs-string">'data'</span>: {
            <span class="hljs-string">'url'</span>: presigned_url,
            <span class="hljs-string">'method'</span>: <span class="hljs-string">'PUT'</span>,
            <span class="hljs-string">'headers'</span>: {<span class="hljs-string">'Content-Type'</span>: content_type}
        }
    })

<span class="hljs-comment"># æ–¹æ¡ˆäºŒï¼šSTS ä¸´æ—¶å‡­è¯</span>
<span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">'/api/sts/credentials'</span>, methods=[<span class="hljs-string">'POST'</span>]</span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_sts_credentials</span>():
    <span class="hljs-string">"""è·å– S3 ä¸´æ—¶å‡­è¯"""</span>
    <span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒåº”è¯¥ä½¿ç”¨çœŸå®çš„ STS AssumeRole</span>
    <span class="hljs-comment"># sts_client = boto3.client('sts')</span>
    <span class="hljs-comment"># response = sts_client.assume_role(...)</span>

    <span class="hljs-keyword">return</span> jsonify({
        <span class="hljs-string">'code'</span>: <span class="hljs-number">0</span>,
        <span class="hljs-string">'data'</span>: {
            <span class="hljs-string">'access_key_id'</span>: RUSTFS_CONFIG[<span class="hljs-string">'access_key_id'</span>],
            <span class="hljs-string">'secret_access_key'</span>: RUSTFS_CONFIG[<span class="hljs-string">'secret_access_key'</span>],
            <span class="hljs-string">'endpoint_url'</span>: RUSTFS_CONFIG[<span class="hljs-string">'endpoint_url'</span>],
            <span class="hljs-string">'bucket_name'</span>: RUSTFS_CONFIG[<span class="hljs-string">'bucket_name'</span>],
            <span class="hljs-string">'region_name'</span>: RUSTFS_CONFIG[<span class="hljs-string">'region_name'</span>]
        }
    })

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    app.run(host=<span class="hljs-string">'0.0.0.0'</span>, port=<span class="hljs-number">5000</span>, debug=<span class="hljs-literal">True</span>)
</code></pre>
<h4 data-id="heading-11">å‰ç«¯å®ç°ï¼ˆä½¿ç”¨ @aws-sdk/client-s3ï¼‰</h4>
<ul>
<li>å®‰è£…ä¾èµ–</li>
</ul>

<pre><code class="hljs language-bash" lang="bash">npm install @aws-sdk/client-s3 @aws-sdk/s3-request-presigner vue
</code></pre>
<ul>
<li>æ–¹æ¡ˆä¸€ï¼šé¢„ç­¾å URL</li>
</ul>

<pre><code class="hljs language-typescript" lang="typescript">ä¸Šä¼ <span class="hljs-comment">// utils/upload-presigned.ts</span>

<span class="hljs-comment">/**
 * ä½¿ç”¨é¢„ç­¾å URL ä¸Šä¼ æ–‡ä»¶
 */</span>
exportasync<span class="hljs-keyword">function</span> <span class="hljs-title function_">uploadWithPresignedUrl</span>(<span class="hljs-params">
  file: File,
  objectKey: <span class="hljs-built_in">string</span>,
  onProgress?: (progress: <span class="hljs-built_in">number</span>) =&gt; <span class="hljs-built_in">void</span>
</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt; {
<span class="hljs-comment">// 1. è·å–é¢„ç­¾å URL</span>
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'http://127.0.0.1:9000/api/presigned-url'</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
    <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> },
    <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
      <span class="hljs-attr">object_key</span>: objectKey,
      <span class="hljs-attr">content_type</span>: file.<span class="hljs-property">type</span>
    })
  })
<span class="hljs-keyword">const</span> { data } = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>()

<span class="hljs-comment">// 2. ä½¿ç”¨é¢„ç­¾å URL ä¸Šä¼ </span>
<span class="hljs-title function_">returnnewPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>()

    xhr.<span class="hljs-property">upload</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'progress'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (e.<span class="hljs-property">lengthComputable</span> &amp;&amp; onProgress) {
        <span class="hljs-title function_">onProgress</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>((e.<span class="hljs-property">loaded</span> / e.<span class="hljs-property">total</span>) * <span class="hljs-number">100</span>))
      }
    })

    xhr.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">status</span> &gt;= <span class="hljs-number">200</span> &amp;&amp; xhr.<span class="hljs-property">status</span> &lt; <span class="hljs-number">300</span>) {
        <span class="hljs-title function_">resolve</span>(data.<span class="hljs-property">url</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">'?'</span>)[<span class="hljs-number">0</span>])
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">reject</span>(<span class="hljs-title function_">newError</span>(<span class="hljs-string">`ä¸Šä¼ å¤±è´¥: <span class="hljs-subst">${xhr.status}</span>`</span>))
      }
    })

    xhr.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(<span class="hljs-title function_">newError</span>(<span class="hljs-string">'ç½‘ç»œé”™è¯¯'</span>)))

    xhr.<span class="hljs-title function_">open</span>(data.<span class="hljs-property">method</span>, data.<span class="hljs-property">url</span>, <span class="hljs-literal">true</span>)
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(data.<span class="hljs-property">headers</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> {
      xhr.<span class="hljs-title function_">setRequestHeader</span>(key, value asstring)
    })
    xhr.<span class="hljs-title function_">send</span>(file)
  })
}
</code></pre>
<ul>
<li>æ–¹æ¡ˆäºŒï¼šSTS å‡­è¯</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript">ä¸Šä¼ / utils/upload-sdk.<span class="hljs-property">ts</span>

<span class="hljs-keyword">import</span> { S3Client, <span class="hljs-title class_">PutObjectCommand</span> } <span class="hljs-keyword">from</span><span class="hljs-string">'@aws-sdk/client-s3'</span>
<span class="hljs-keyword">import</span> { getSignedUrl } <span class="hljs-keyword">from</span><span class="hljs-string">'@aws-sdk/s3-request-presigner'</span>

<span class="hljs-keyword">interface</span> S3Credentials {
  <span class="hljs-attr">access_key_id</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">secret_access_key</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">endpoint_url</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">bucket_name</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">region_name</span>: <span class="hljs-built_in">string</span>
}

<span class="hljs-comment">/**
 * ä½¿ç”¨ AWS SDK ä¸Šä¼ æ–‡ä»¶ï¼ˆå¸¦è¿›åº¦ï¼‰
 */</span>
exportasync<span class="hljs-keyword">function</span> <span class="hljs-title function_">uploadWithSDK</span>(<span class="hljs-params">
  file: File,
  objectKey: <span class="hljs-built_in">string</span>,
  credentials: S3Credentials,
  onProgress?: (progress: <span class="hljs-built_in">number</span>) =&gt; <span class="hljs-built_in">void</span>
</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt; {
<span class="hljs-comment">// 1. åˆ›å»º S3 å®¢æˆ·ç«¯</span>
<span class="hljs-keyword">const</span> s3Client = <span class="hljs-keyword">new</span> <span class="hljs-title function_">S3Client</span>({
    <span class="hljs-attr">credentials</span>: {
      <span class="hljs-attr">accessKeyId</span>: credentials.<span class="hljs-property">access_key_id</span>,
      <span class="hljs-attr">secretAccessKey</span>: credentials.<span class="hljs-property">secret_access_key</span>
    },
    <span class="hljs-attr">endpoint</span>: credentials.<span class="hljs-property">endpoint_url</span>,
    <span class="hljs-attr">region</span>: credentials.<span class="hljs-property">region_name</span>,
    <span class="hljs-attr">forcePathStyle</span>: <span class="hljs-literal">true</span>
  })

<span class="hljs-comment">// 2. å¦‚æœéœ€è¦è¿›åº¦ï¼Œä½¿ç”¨é¢„ç­¾å URL + XHR</span>
<span class="hljs-keyword">if</span> (onProgress) {
    <span class="hljs-keyword">const</span> command = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PutObjectCommand</span>({
      <span class="hljs-title class_">Bucket</span>: credentials.<span class="hljs-property">bucket_name</span>,
      <span class="hljs-title class_">Key</span>: objectKey,
      <span class="hljs-title class_">ContentType</span>: file.<span class="hljs-property">type</span>
    })

    <span class="hljs-keyword">const</span> presignedUrl = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getSignedUrl</span>(s3Client, command, { <span class="hljs-attr">expiresIn</span>: <span class="hljs-number">3600</span> })

    <span class="hljs-title function_">returnnewPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>()

      xhr.<span class="hljs-property">upload</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'progress'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (e.<span class="hljs-property">lengthComputable</span>) {
          <span class="hljs-title function_">onProgress</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>((e.<span class="hljs-property">loaded</span> / e.<span class="hljs-property">total</span>) * <span class="hljs-number">100</span>))
        }
      })

      xhr.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">status</span> &gt;= <span class="hljs-number">200</span> &amp;&amp; xhr.<span class="hljs-property">status</span> &lt; <span class="hljs-number">300</span>) {
          <span class="hljs-title function_">resolve</span>(<span class="hljs-string">`<span class="hljs-subst">${credentials.endpoint_url}</span>/<span class="hljs-subst">${credentials.bucket_name}</span>/<span class="hljs-subst">${objectKey}</span>`</span>)
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-title function_">reject</span>(<span class="hljs-title function_">newError</span>(<span class="hljs-string">`ä¸Šä¼ å¤±è´¥: <span class="hljs-subst">${xhr.status}</span>`</span>))
        }
      })

      xhr.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(<span class="hljs-title function_">newError</span>(<span class="hljs-string">'ç½‘ç»œé”™è¯¯'</span>)))

      xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">'PUT'</span>, presignedUrl, <span class="hljs-literal">true</span>)
      xhr.<span class="hljs-title function_">setRequestHeader</span>(<span class="hljs-string">'Content-Type'</span>, file.<span class="hljs-property">type</span>)
      xhr.<span class="hljs-title function_">send</span>(file)
    })
  }

<span class="hljs-comment">// 3. ç®€å•ä¸Šä¼ ï¼ˆæ— è¿›åº¦ï¼‰</span>
<span class="hljs-keyword">const</span> command = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PutObjectCommand</span>({
    <span class="hljs-title class_">Bucket</span>: credentials.<span class="hljs-property">bucket_name</span>,
    <span class="hljs-title class_">Key</span>: objectKey,
    <span class="hljs-title class_">Body</span>: file,
    <span class="hljs-title class_">ContentType</span>: file.<span class="hljs-property">type</span>
  })

<span class="hljs-keyword">await</span> s3Client.<span class="hljs-title function_">send</span>(command)
<span class="hljs-keyword">return</span><span class="hljs-string">`<span class="hljs-subst">${credentials.endpoint_url}</span>/<span class="hljs-subst">${credentials.bucket_name}</span>/<span class="hljs-subst">${objectKey}</span>`</span>
}

<span class="hljs-comment">/**
 * è·å– S3 å‡­è¯
 */</span>
exportasync<span class="hljs-keyword">function</span> <span class="hljs-title function_">getS3Credentials</span>(<span class="hljs-params"/>): <span class="hljs-title class_">Promise</span>&lt;S3Credentials&gt; {
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'http://127.0.0.1:9000/api/sts/credentials'</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
    <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> }
  })
<span class="hljs-keyword">const</span> { data } = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>()
<span class="hljs-keyword">return</span> data
}

<span class="hljs-comment">/**
 * ç”Ÿæˆå”¯ä¸€çš„å¯¹è±¡è·¯å¾„
 */</span>
<span class="hljs-keyword">export</span><span class="hljs-keyword">function</span> <span class="hljs-title function_">generateObjectKey</span>(<span class="hljs-params">file: File, prefix = <span class="hljs-string">'uploads'</span></span>): <span class="hljs-built_in">string</span> {
<span class="hljs-keyword">const</span> timestamp = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
<span class="hljs-keyword">const</span> random = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>().<span class="hljs-title function_">toString</span>(<span class="hljs-number">36</span>).<span class="hljs-title function_">substring</span>(<span class="hljs-number">2</span>, <span class="hljs-number">8</span>)
<span class="hljs-keyword">const</span> ext = file.<span class="hljs-property">name</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">'.'</span>).<span class="hljs-title function_">pop</span>() || <span class="hljs-string">''</span>
<span class="hljs-keyword">return</span><span class="hljs-string">`<span class="hljs-subst">${prefix}</span>/<span class="hljs-subst">${timestamp}</span>_<span class="hljs-subst">${random}</span>.<span class="hljs-subst">${ext}</span>`</span>
}

</code></pre>
<h4 data-id="heading-12">Vue ç»„ä»¶ç¤ºä¾‹</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"upload-container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æ–‡ä»¶ä¸Šä¼ <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"upload-area"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"$refs.fileInput.click()"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">ref</span>=<span class="hljs-string">"fileInput"</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span>
        <span class="hljs-attr">multiple</span>
        <span class="hljs-attr">style</span>=<span class="hljs-string">"display: none"</span>
        @<span class="hljs-attr">change</span>=<span class="hljs-string">"handleFileSelect"</span>
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç‚¹å‡»é€‰æ‹©æ–‡ä»¶ä¸Šä¼ <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"file in files"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"file.id"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"file-item"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{{ file.name }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"file.status === 'uploading'"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">progress</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">"file.progress"</span> <span class="hljs-attr">max</span>=<span class="hljs-string">"100"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">progress</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{{ file.progress }}%<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-else-if</span>=<span class="hljs-string">"file.status === 'success'"</span>&gt;</span>âœ… æˆåŠŸ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-else-if</span>=<span class="hljs-string">"file.status === 'error'"</span>&gt;</span>âŒ {{ file.error }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { uploadWithPresignedUrl, generateObjectKey } <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils/upload-presigned'</span>
<span class="hljs-comment">// æˆ–è€…ä½¿ç”¨: import { uploadWithSDK, getS3Credentials } from '../utils/upload-sdk'</span>

interface <span class="hljs-title class_">UploadFile</span> {
  <span class="hljs-attr">id</span>: string
  <span class="hljs-attr">name</span>: string
  <span class="hljs-attr">status</span>: <span class="hljs-string">'pending'</span> | <span class="hljs-string">'uploading'</span> | <span class="hljs-string">'success'</span> | <span class="hljs-string">'error'</span>
  <span class="hljs-attr">progress</span>: number
  error?: string
}

<span class="hljs-keyword">const</span> files = ref&lt;<span class="hljs-title class_">UploadFile</span>[]&gt;([])

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleFileSelect</span> = (<span class="hljs-params">event: Event</span>) =&gt; {
  <span class="hljs-keyword">const</span> target = event.<span class="hljs-property">target</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLInputElement</span>
  <span class="hljs-keyword">if</span> (!target.<span class="hljs-property">files</span>) <span class="hljs-keyword">return</span>

  <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(target.<span class="hljs-property">files</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">file</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">uploadFile</span>: <span class="hljs-title class_">UploadFile</span> = {
      <span class="hljs-attr">id</span>: <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>_<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.random()}</span>`</span>,
      <span class="hljs-attr">name</span>: file.<span class="hljs-property">name</span>,
      <span class="hljs-attr">status</span>: <span class="hljs-string">'pending'</span>,
      <span class="hljs-attr">progress</span>: <span class="hljs-number">0</span>
    }
    files.<span class="hljs-property">value</span>.<span class="hljs-title function_">push</span>(uploadFile)
    <span class="hljs-title function_">startUpload</span>(uploadFile, file)
  })

  target.<span class="hljs-property">value</span> = <span class="hljs-string">''</span>
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">startUpload</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">uploadFile: UploadFile, file: File</span>) =&gt; {
  uploadFile.<span class="hljs-property">status</span> = <span class="hljs-string">'uploading'</span>

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> objectKey = <span class="hljs-title function_">generateObjectKey</span>(file)

    <span class="hljs-comment">// æ–¹æ¡ˆä¸€ï¼šé¢„ç­¾å URL</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">uploadWithPresignedUrl</span>(file, objectKey, <span class="hljs-function">(<span class="hljs-params">progress</span>) =&gt;</span> {
      uploadFile.<span class="hljs-property">progress</span> = progress
    })

    <span class="hljs-comment">// æ–¹æ¡ˆäºŒï¼šSTS å‡­è¯ï¼ˆéœ€è¦å…ˆè·å–å‡­è¯ï¼‰</span>
    <span class="hljs-comment">// const credentials = await getS3Credentials()</span>
    <span class="hljs-comment">// await uploadWithSDK(file, objectKey, credentials, (progress) =&gt; {</span>
    <span class="hljs-comment">//   uploadFile.progress = progress</span>
    <span class="hljs-comment">// })</span>

    uploadFile.<span class="hljs-property">status</span> = <span class="hljs-string">'success'</span>
  } <span class="hljs-keyword">catch</span> (error) {
    uploadFile.<span class="hljs-property">status</span> = <span class="hljs-string">'error'</span>
    uploadFile.<span class="hljs-property">error</span> = error <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Error</span> ? error.<span class="hljs-property">message</span> : <span class="hljs-string">'ä¸Šä¼ å¤±è´¥'</span>
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.upload-area</span> {
  <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> dashed <span class="hljs-number">#ccc</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">40px</span>;
  <span class="hljs-attribute">text-align</span>: center;
  <span class="hljs-attribute">cursor</span>: pointer;
}

<span class="hljs-selector-class">.upload-area</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#666</span>;
}

<span class="hljs-selector-class">.file-item</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#eee</span>;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">justify-content</span>: space-between;
  <span class="hljs-attribute">align-items</span>: center;
}

progress {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">10px</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h3 data-id="heading-13">å®Œæ•´ç¤ºä¾‹</h3>
<h4 data-id="heading-14">åœºæ™¯ä¸€ï¼šå•æ–‡ä»¶ä¸Šä¼ ï¼ˆé¢„ç­¾å URLï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç®€å•ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶</span>
<span class="hljs-keyword">const</span> file = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'input[type="file"]'</span>).<span class="hljs-property">files</span>[<span class="hljs-number">0</span>]
<span class="hljs-keyword">const</span> objectKey = <span class="hljs-string">`uploads/<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>_<span class="hljs-subst">${file.name}</span>`</span>

<span class="hljs-keyword">await</span> <span class="hljs-title function_">uploadWithPresignedUrl</span>(file, objectKey, <span class="hljs-function">(<span class="hljs-params">progress</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è¿›åº¦: <span class="hljs-subst">${progress}</span>%`</span>)
})

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¸Šä¼ æˆåŠŸï¼'</span>)
</code></pre>
<h4 data-id="heading-15">åœºæ™¯äºŒï¼šæ‰¹é‡ä¸Šä¼ ï¼ˆSTS å‡­è¯ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ‰¹é‡ä¸Šä¼ å¤šä¸ªæ–‡ä»¶</span>
<span class="hljs-keyword">const</span> files = [...<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'input[type="file"]'</span>).<span class="hljs-property">files</span>]

<span class="hljs-comment">// 1. è·å–ä¸€æ¬¡å‡­è¯</span>
<span class="hljs-keyword">const</span> credentials = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getS3Credentials</span>()

<span class="hljs-comment">// 2. ä½¿ç”¨åŒä¸€å‡­è¯ä¸Šä¼ æ‰€æœ‰æ–‡ä»¶</span>
awaitPromise.<span class="hljs-title function_">all</span>(
  files.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">file</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> objectKey = <span class="hljs-title function_">generateObjectKey</span>(file)
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">uploadWithSDK</span>(file, objectKey, credentials, <span class="hljs-function">(<span class="hljs-params">progress</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${file.name}</span>: <span class="hljs-subst">${progress}</span>%`</span>)
    })
  })
)

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…¨éƒ¨ä¸Šä¼ æˆåŠŸï¼'</span>)

</code></pre>
<h3 data-id="heading-16">æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-17">1. æ–¹æ¡ˆé€‰æ‹©</h4>
<pre><code class="hljs">å•æ–‡ä»¶æˆ–å°‘é‡æ–‡ä»¶  â†’  é¢„ç­¾å URLï¼ˆç®€å•ç›´æ¥ï¼‰
æ‰¹é‡æ–‡ä»¶ä¸Šä¼       â†’  STS å‡­è¯ï¼ˆå‡å°‘è¯·æ±‚ï¼‰
</code></pre>
<p>2.  æ–‡ä»¶éªŒè¯</p>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">validateFile</span>(file: File): boolean {
<span class="hljs-comment">// å¤§å°é™åˆ¶ï¼ˆ100MBï¼‰</span>
if (file.size &gt; <span class="hljs-number">100</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>) {
    <span class="hljs-built_in">alert</span>('æ–‡ä»¶è¿‡å¤§')
    returnfalse
  }

<span class="hljs-comment">// ç±»å‹é™åˆ¶</span>
const allowedTypes = <span class="hljs-selector-attr">[<span class="hljs-string">'image/jpeg'</span>, <span class="hljs-string">'image/png'</span>, <span class="hljs-string">'image/gif'</span>]</span>
if (!allowedTypes.includes(file.type)) {
    <span class="hljs-built_in">alert</span>('ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹')
    returnfalse
  }

returntrue
}

</code></pre>
<ol start="3">
<li>é”™è¯¯å¤„ç†å’Œé‡è¯•</li>
</ol>

<pre><code class="hljs language-ini" lang="ini">async function uploadWithRetry(file: File, <span class="hljs-attr">maxRetries</span> = <span class="hljs-number">3</span>) {
for (let <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; maxRetries; i++) {</span>
    try {
      const <span class="hljs-attr">objectKey</span> = generateObjectKey(file)
      returnawait uploadWithPresignedUrl(file, objectKey)
    } catch (error) {
      if (<span class="hljs-attr">i</span> === maxRetries - <span class="hljs-number">1</span>) throw error
      awaitnewPromise(<span class="hljs-attr">resolve</span> =&gt; setTimeout(resolve, <span class="hljs-number">1000</span> * (i + <span class="hljs-number">1</span>)))
    }
  }
}
</code></pre>
<p>4.  å®‰å…¨å»ºè®®</p>

<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åç«¯éªŒè¯</span>
<span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">'/api/presigned-url'</span>, methods=[<span class="hljs-string">'POST'</span>]</span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_presigned_url</span>():
    <span class="hljs-comment"># âœ… éªŒè¯æ–‡ä»¶ç±»å‹</span>
    allowed_types = [<span class="hljs-string">'image/jpeg'</span>, <span class="hljs-string">'image/png'</span>]
    <span class="hljs-keyword">if</span> data[<span class="hljs-string">'content_type'</span>] notin allowed_types:
        <span class="hljs-keyword">return</span> jsonify({<span class="hljs-string">'code'</span>: <span class="hljs-number">400</span>, <span class="hljs-string">'message'</span>: <span class="hljs-string">'ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹'</span>}), <span class="hljs-number">400</span>

    <span class="hljs-comment"># âœ… éªŒè¯ç”¨æˆ·æƒé™</span>
    <span class="hljs-comment"># if not current_user.can_upload():</span>
    <span class="hljs-comment">#     return jsonify({'code': 403, 'message': 'æ— æƒé™'}), 403</span>

    <span class="hljs-comment"># âœ… é™åˆ¶æ–‡ä»¶è·¯å¾„</span>
    <span class="hljs-comment"># ç¡®ä¿ç”¨æˆ·åªèƒ½ä¸Šä¼ åˆ°è‡ªå·±çš„ç›®å½•</span>
    <span class="hljs-comment"># object_key = f"users/{current_user.id}/{filename}"</span>

    <span class="hljs-comment"># ç”Ÿæˆé¢„ç­¾å URL</span>
    <span class="hljs-comment"># ...</span>
</code></pre>
<p>5.  æ€§èƒ½ä¼˜åŒ–</p>

<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// å¹¶å‘æ§åˆ¶ï¼šæœ€å¤šåŒæ—¶ä¸Šä¼  3 ä¸ªæ–‡ä»¶</span>
<span class="hljs-function">asyncfunction <span class="hljs-title">uploadFilesWithLimit</span><span class="hljs-params">(files: <span class="hljs-built_in">File</span>[], limit = <span class="hljs-number">3</span>)</span> </span>{
<span class="hljs-type">const</span> queue = [...files]
<span class="hljs-type">const</span> results = []
<span class="hljs-type">const</span> executing = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>()

<span class="hljs-keyword">while</span> (queue.length &gt; <span class="hljs-number">0</span> || executing.size &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">while</span> (queue.length &gt; <span class="hljs-number">0</span> &amp;&amp; executing.size &lt; limit) {
      <span class="hljs-type">const</span> file = queue.<span class="hljs-built_in">shift</span>()!
      <span class="hljs-type">const</span> promise = <span class="hljs-built_in">uploadWithPresignedUrl</span>(file, <span class="hljs-built_in">generateObjectKey</span>(file))
        .<span class="hljs-built_in">then</span>((url) =&gt; {
          executing.<span class="hljs-built_in">delete</span>(promise)
          <span class="hljs-keyword">return</span> { success: <span class="hljs-literal">true</span>, url }
        })
        .<span class="hljs-built_in">catch</span>((error) =&gt; {
          executing.<span class="hljs-built_in">delete</span>(promise)
          <span class="hljs-keyword">return</span> { success: <span class="hljs-literal">false</span>, error }
        })

      executing.<span class="hljs-built_in">add</span>(promise)
      results.<span class="hljs-built_in">push</span>(promise)
    }

    <span class="hljs-keyword">if</span> (executing.size &gt; <span class="hljs-number">0</span>) {
      awaitPromise.<span class="hljs-built_in">race</span>(executing)
    }
  }

returnPromise.<span class="hljs-built_in">all</span>(results)
}
</code></pre>
<h3 data-id="heading-18">æ€»ç»“</h3>
<h4 data-id="heading-19">æ ¸å¿ƒè¦ç‚¹</h4>
<ol>
<li>âœ… ä½¿ç”¨ AWS SDK - boto3ï¼ˆåç«¯ï¼‰å’Œ @aws-sdk/client-s3ï¼ˆå‰ç«¯ï¼‰</li>
<li>âœ… é¢„ç­¾å URL - ç®€å•åœºæ™¯é¦–é€‰ï¼Œåç«¯å®Œå…¨æ§åˆ¶</li>
<li>âœ… STS å‡­è¯ - æ‰¹é‡ä¸Šä¼ ï¼Œå‡å°‘ç½‘ç»œè¯·æ±‚</li>
<li>âœ… æ°¸ä¹…å¯†é’¥ä¸æš´éœ² - åªåœ¨åç«¯ä½¿ç”¨</li>
<li>âœ… æ·»åŠ éªŒè¯ - æ–‡ä»¶ç±»å‹ã€å¤§å°ã€ç”¨æˆ·æƒé™</li>
<li>âœ… é”™è¯¯å¤„ç† - é‡è¯•æœºåˆ¶ï¼Œå‹å¥½æç¤ºä¸¤ç§æ–¹æ¡ˆå¯¹æ¯”</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dfa240af53a143688837d83d63b44a9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUnVzdEZT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767329950&amp;x-signature=Br5B5frwRC9I3u4%2BQVKvwp6qikw%3D" alt="æˆªå±2025-12-26 09.39.56.png" loading="lazy"/></p>
<p>æ–¹æ¡ˆå¯¹æ¯”æ•™ç¨‹å®Œæˆï¼å¼€å§‹æ„å»ºä½ çš„æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½å§ï¼ ğŸ‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring Boot é¡¹ç›®å¯æ‰§è¡Œ jar çš„å®Œæ•´ Maven æ‰“åŒ…ç¤ºä¾‹]]></title>    <link>https://juejin.cn/post/7587675306658480128</link>    <guid>https://juejin.cn/post/7587675306658480128</guid>    <pubDate>2025-12-26T05:26:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587675306658480128" data-draft-id="7587675443442745384" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring Boot é¡¹ç›®å¯æ‰§è¡Œ jar çš„å®Œæ•´ Maven æ‰“åŒ…ç¤ºä¾‹"/> <meta itemprop="keywords" content="maven"/> <meta itemprop="datePublished" content="2025-12-26T05:26:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ°AJie"/> <meta itemprop="url" content="https://juejin.cn/user/3871838955636704"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring Boot é¡¹ç›®å¯æ‰§è¡Œ jar çš„å®Œæ•´ Maven æ‰“åŒ…ç¤ºä¾‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3871838955636704/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ°AJie
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T05:26:57.000Z" title="Fri Dec 26 2025 05:26:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>Spring Boot é¡¹ç›®å¯æ‰§è¡Œ jar çš„å®Œæ•´ Maven æ‰“åŒ…ç¤ºä¾‹</strong>ï¼ŒåŒæ—¶æ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ul>
<li>è·³è¿‡æµ‹è¯•</li>
<li>æŒ‡å®šç¯å¢ƒ profileï¼ˆdev/prodï¼‰</li>
<li>è‡ªå®šä¹‰ç‰ˆæœ¬å·</li>
<li>ç”Ÿæˆå¯æ‰§è¡Œ jar</li>
</ul>
<hr/>
<h2 data-id="heading-0"><strong>1. å‡è®¾ pom.xml é…ç½®ç¤ºä¾‹</strong></h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- å®šä¹‰ Maven é¡¹ç›®çš„æ ¹å…ƒç´ ï¼ŒæŒ‡å®šå‘½åç©ºé—´å’Œ XSD éªŒè¯ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span> 
         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 
         http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- Maven æ¨¡å‹ç‰ˆæœ¬ï¼Œä¸€èˆ¬å›ºå®šä¸º 4.0.0 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- é¡¹ç›®åæ ‡ï¼šgroupId + artifactId + version å”¯ä¸€æ ‡è¯†ä¸€ä¸ª Maven é¡¹ç›® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.example<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>          <span class="hljs-comment">&lt;!-- é¡¹ç›®ç»„ç»‡/å…¬å¸æ ‡è¯†ï¼Œé€šå¸¸ä½¿ç”¨åŸŸååå†™ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>demo<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>          <span class="hljs-comment">&lt;!-- é¡¹ç›®åç§°æˆ–æ¨¡å—å --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>               <span class="hljs-comment">&lt;!-- é¡¹ç›®ç‰ˆæœ¬ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>jar<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span>             <span class="hljs-comment">&lt;!-- æ‰“åŒ…ç±»å‹ï¼Œå¯é€‰ jar/war/pom ç­‰ --&gt;</span>

    <span class="hljs-comment">&lt;!-- é¡¹ç›®å±æ€§ï¼Œå¯åœ¨ pom.xml æˆ–æ’ä»¶ä¸­å¼•ç”¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>17<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span>                       <span class="hljs-comment">&lt;!-- æŒ‡å®š JDK ç‰ˆæœ¬ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span> <span class="hljs-comment">&lt;!-- æºç ç¼–ç  --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">spring-boot.version</span>&gt;</span>3.2.0<span class="hljs-tag">&lt;/<span class="hljs-name">spring-boot.version</span>&gt;</span>      <span class="hljs-comment">&lt;!-- Spring Boot ç‰ˆæœ¬ --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- é¡¹ç›®ä¾èµ– --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  <span class="hljs-comment">&lt;!-- Spring Boot æ ¸å¿ƒå¯åŠ¨ä¾èµ– --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring-boot.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>       <span class="hljs-comment">&lt;!-- ä½¿ç”¨ä¸Šé¢å®šä¹‰çš„ç‰ˆæœ¬ --&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- æ„å»ºé…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- Spring Boot Maven æ’ä»¶ï¼šç”¨äºæ‰“åŒ…å¯æ‰§è¡Œ jar/war --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring-boot.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <span class="hljs-comment">&lt;!-- æ’ä»¶ç‰ˆæœ¬ä¸ Spring Boot ç‰ˆæœ¬ä¸€è‡´ --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>repackage<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span> <span class="hljs-comment">&lt;!-- repackage ç›®æ ‡ä¼šæŠŠ jar æ‰“æˆå¯æ‰§è¡Œ Spring Boot jarï¼ŒåŒ…å«æ‰€æœ‰ä¾èµ– --&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- Maven æ„å»º profileï¼Œç”¨äºä¸åŒç¯å¢ƒçš„é…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profiles</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span> <span class="hljs-comment">&lt;!-- å¼€å‘ç¯å¢ƒ profile ID --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">spring.profiles.active</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">spring.profiles.active</span>&gt;</span> <span class="hljs-comment">&lt;!-- Spring Boot æ¿€æ´» dev é…ç½® --&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>prod<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span> <span class="hljs-comment">&lt;!-- ç”Ÿäº§ç¯å¢ƒ profile ID --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">spring.profiles.active</span>&gt;</span>prod<span class="hljs-tag">&lt;/<span class="hljs-name">spring.profiles.active</span>&gt;</span> <span class="hljs-comment">&lt;!-- Spring Boot æ¿€æ´» prod é…ç½® --&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profiles</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>

</code></pre>
<h3 data-id="heading-1"><strong>é‡ç‚¹è¯´æ˜</strong></h3>
<ol>
<li>
<p><strong><code>&lt;properties&gt;</code></strong></p>
<ul>
<li>å®šä¹‰å…¨å±€å¯å¤ç”¨å˜é‡ï¼Œä¾‹å¦‚ <code>spring-boot.version</code>ï¼Œåœ¨ä¾èµ–æˆ–æ’ä»¶ä¸­å¯ä»¥ <code>${spring-boot.version}</code> è°ƒç”¨ã€‚</li>
</ul>
</li>
<li>
<p><strong><code>spring-boot-maven-plugin</code></strong></p>
<ul>
<li>æ ¸å¿ƒåŠŸèƒ½æ˜¯æŠŠé¡¹ç›®æ‰“æˆ <strong>å¯æ‰§è¡Œ jar</strong>ï¼ˆå†…åµŒ Tomcat æˆ–å…¶ä»–å®¹å™¨ï¼‰ã€‚</li>
<li><code>&lt;goal&gt;repackage&lt;/goal&gt;</code>ï¼šç”Ÿæˆå¯ç›´æ¥è¿è¡Œçš„ jarã€‚</li>
</ul>
</li>
<li>
<p><strong><code>profiles</code></strong></p>
<ul>
<li>ç”¨æ¥åŒºåˆ† <strong>ä¸åŒç¯å¢ƒé…ç½®</strong>ï¼Œå¦‚ devã€prodã€‚</li>
<li>æ‰“åŒ…æ—¶å¯ä»¥æŒ‡å®šï¼š<code>mvn clean package -Pdev</code>ã€‚</li>
<li>æ¿€æ´» Spring Boot é…ç½®æ–‡ä»¶ <code>application-dev.yml</code> æˆ– <code>application-prod.yml</code>ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç¼–ç ä¸ Java ç‰ˆæœ¬</strong></p>
<ul>
<li><code>UTF-8</code> é˜²æ­¢ä¸­æ–‡ä¹±ç ã€‚</li>
<li><code>&lt;java.version&gt;</code> å†³å®šç¼–è¯‘å…¼å®¹æ€§ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-2"><strong>2. Maven æ‰“åŒ…å‘½ä»¤ç¤ºä¾‹</strong></h2>
<pre><code class="hljs language-ini" lang="ini">mvn clean package \
    -Pdev \                       <span class="hljs-comment"># æŒ‡å®šç¯å¢ƒä¸º devï¼Œå¯æ”¹ä¸º prod</span>
    <span class="hljs-attr">-DskipTests</span>=<span class="hljs-literal">true</span> \            <span class="hljs-comment"># è·³è¿‡å•å…ƒæµ‹è¯•</span>
    <span class="hljs-attr">-Drevision</span>=<span class="hljs-number">1.0</span>.<span class="hljs-number">5</span>              <span class="hljs-comment"># è‡ªå®šä¹‰ç‰ˆæœ¬å·</span>
</code></pre>
<p>è¯´æ˜ï¼š</p>
<ul>
<li><code>-Pdev</code>ï¼šä½¿ç”¨ dev profile</li>
<li><code>-DskipTests=true</code>ï¼šè·³è¿‡æµ‹è¯•ï¼Œæé«˜æ‰“åŒ…é€Ÿåº¦</li>
<li><code>-Drevision=1.0.5</code>ï¼šè‡ªå®šä¹‰ç‰ˆæœ¬å·ï¼Œå¯åœ¨ pom.xml ä½¿ç”¨ <code>${revision}</code></li>
</ul>
<hr/>
<h2 data-id="heading-3"><strong>3. è¿è¡Œå¯æ‰§è¡Œ jar</strong></h2>
<pre><code class="hljs language-ini" lang="ini">java -jar target/demo-1.0.5.jar <span class="hljs-attr">--spring.profiles.active</span>=dev
</code></pre>
<ul>
<li>è¿™é‡Œçš„ <code>spring.profiles.active</code> å¯ä»¥è¦†ç›– Maven profile</li>
<li>jar åŒ…å·²ç»åŒ…å«æ‰€æœ‰ä¾èµ–ï¼Œç›´æ¥å¯è¿è¡Œ</li>
</ul>
<hr/>
<h2 data-id="heading-4"><strong>4. æ‰“åŒ… prod ç¤ºä¾‹</strong></h2>
<pre><code class="hljs language-ini" lang="ini">mvn clean package -Pprod <span class="hljs-attr">-DskipTests</span>=<span class="hljs-literal">true</span> -Drevision=<span class="hljs-number">1.0</span>.<span class="hljs-number">5</span>
java -jar target/demo-1.0.5.jar <span class="hljs-attr">--spring.profiles.active</span>=prod
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[3.Debian_KDEä¹‹è§£å†³redisè·¨ç«¯è®¿é—®]]></title>    <link>https://juejin.cn/post/7587825267877773353</link>    <guid>https://juejin.cn/post/7587825267877773353</guid>    <pubDate>2025-12-26T05:47:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587825267877773353" data-draft-id="7586877892468244507" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="3.Debian_KDEä¹‹è§£å†³redisè·¨ç«¯è®¿é—®"/> <meta itemprop="keywords" content="å¼€æº"/> <meta itemprop="datePublished" content="2025-12-26T05:47:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·852395695921"/> <meta itemprop="url" content="https://juejin.cn/user/3915784942005547"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            3.Debian_KDEä¹‹è§£å†³redisè·¨ç«¯è®¿é—®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3915784942005547/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·852395695921
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T05:47:40.000Z" title="Fri Dec 26 2025 05:47:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ä¸€ã€è™šæ‹Ÿæœºwindowè®¿é—®Debian_KDE redisæœåŠ¡å™¨</strong></h2>
<h3 data-id="heading-1"><strong>1.Debian_KDEå®‰è£…redis</strong></h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ›´æ–°è½¯ä»¶æº</span>
sudo apt update
<span class="hljs-comment"># å®‰è£… Redisï¼ˆé»˜è®¤æ˜¯ç¨³å®šç‰ˆï¼Œå¦‚ 6.x/7.xï¼‰</span>
sudo apt install redis-server -y
</code></pre>
<h5 data-id="heading-2"><strong>2. é…ç½® Redis å…è®¸è¿œç¨‹è®¿é—®ï¼ˆé‡ç‚¹ï¼é»˜è®¤ä»…æœ¬åœ°å¯è¿</strong></h5>
<h6 data-id="heading-3"><strong>ç¼–è¾‘ Redis é…ç½®æ–‡ä»¶ï¼š</strong></h6>
<pre><code class="hljs language-bash" lang="bash">sudo nano /etc/redis/redis.conf
</code></pre>
<h6 data-id="heading-4"><strong>æ”¹ 2 å¤„å…³é”®é…ç½®ï¼š</strong></h6>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span>  æ‰¾åˆ°Â <span class="hljs-code">`bind 127.0.0.1`</span>ï¼Œæ”¹æˆÂ <span class="hljs-code">`bind 0.0.0.0`</span>ï¼ˆå…è®¸æ‰€æœ‰ IP è®¿é—®ï¼Œè·¨ç¯å¢ƒå¿…æ”¹ï¼‰ï¼›
<span class="hljs-bullet">2.</span>  æ‰¾åˆ°Â <span class="hljs-code">`protected-mode yes`</span>ï¼Œæ”¹æˆÂ <span class="hljs-code">`protected-mode no`</span>ï¼ˆå…³é—­ä¿æŠ¤æ¨¡å¼ï¼Œå…è®¸è¿œç¨‹è¿æ¥ï¼‰ï¼›
<span class="hljs-bullet">3.</span>  ï¼ˆå¯é€‰ï¼‰è®¾ç½®å¯†ç ï¼ˆå¢å¼ºå®‰å…¨ï¼‰ï¼šæ‰¾åˆ°Â <span class="hljs-code">`# requirepass foobared`</span>ï¼Œå»æ‰æ³¨é‡Šæ”¹æˆÂ <span class="hljs-code">`requirepass ä½ çš„å¯†ç `</span>ï¼ˆæ¯”å¦‚Â <span class="hljs-code">`requirepass redis123`</span>ï¼‰ã€‚
<span class="hljs-bullet">4.</span>  é»˜è®¤æ²¡æœ‰ç”¨æˆ·åï¼Œç™»å½•æ—¶å¯ä»¥ä¸å¡«ï¼Œé»˜è®¤çš„ç”¨æˆ·åæ˜¯default
</code></pre>
<h6 data-id="heading-5"><strong>ä¿å­˜é€€å‡ºï¼ˆæŒ‰Â <code>Ctrl+O</code>Â â†’ å›è½¦ â†’Â <code>Ctrl+X</code>ï¼‰ï¼Œé‡å¯ Redis ç”Ÿæ•ˆï¼š</strong></h6>
<pre><code class="hljs language-vbscript" lang="vbscript">sudo systemctl restart redis-<span class="hljs-built_in">server</span>
</code></pre>
<h3 data-id="heading-6">3. å¼€æ”¾ Debian é˜²ç«å¢™ 6379 ç«¯å£ï¼ˆRedis é»˜è®¤ç«¯å£ï¼‰</h3>
<h6 data-id="heading-7">(Debiané»˜è®¤ä¸å®‰è£…ï¼Œæœªå®‰è£…ä¸ç”¨æ“ä½œ)</h6>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¼€æ”¾ 6379 ç«¯å£ï¼ˆTCPåè®®ï¼‰</span>
sudo ufw allow 6379/tcp
<span class="hljs-comment"># é‡å¯é˜²ç«å¢™ç”Ÿæ•ˆ</span>
sudo ufw reload
<span class="hljs-comment"># éªŒè¯ç«¯å£æ˜¯å¦å¼€æ”¾</span>
sudo ufw status
</code></pre>
<p>çœ‹åˆ°Â <code>6379/tcp ALLOW Anywhere</code>Â å°±æ²¡é—®é¢˜äº†ã€‚</p>
<h3 data-id="heading-8"><strong>4.Debian 13 å¯èƒ½æœªé¢„è£… ufw é˜²ç«å¢™ï¼Œå…ˆå®‰è£…ï¼š</strong></h3>
<h6 data-id="heading-9">(Debiané»˜è®¤ä¸å®‰è£…ï¼Œä¸å®‰è£…ä¸ç”¨æ“ä½œ)</h6>
<pre><code class="hljs language-sql" lang="sql">sudo apt <span class="hljs-keyword">update</span> <span class="hljs-operator">&amp;&amp;</span> sudo apt install ufw <span class="hljs-operator">-</span>y
</code></pre>
<h3 data-id="heading-10"><strong>5.é‡å¯å¹¶éªŒè¯ Redis æœåŠ¡</strong></h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é‡å¯Redis</span>
sudo systemctl restart redis-server
<span class="hljs-comment"># æŸ¥çœ‹RedisçŠ¶æ€</span>
sudo systemctl status redis-server
</code></pre>
<p>6.åœ¨ Debian ç»ˆç«¯ç›´æ¥è¾“å…¥ï¼š</p>
<pre><code class="hljs">redis-cli
</code></pre>
<p>å›è½¦åä¼šè¿›å…¥ Redis äº¤äº’å¼ç•Œé¢ï¼ˆæç¤ºç¬¦å˜æˆÂ <code>127.0.0.1:6379&gt;</code>ï¼‰ï¼Œè¾“å…¥Â <code>PING</code>Â è¿”å›Â <code>PONG</code>Â å°±è¯´æ˜ç•Œé¢å¯ç”¨ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-meta prompt_">127.0.0.1:6379&gt;</span> <span class="hljs-variable constant_">PING</span>
<span class="hljs-variable constant_">PONG</span>
</code></pre>
<h3 data-id="heading-11"><strong>7.è®¾ç½®å¼€æœºè‡ªå¯</strong></h3>
<h6 data-id="heading-12"><strong>rediså®‰è£…åé»˜è®¤è‡ªå¯</strong></h6>
<pre><code class="hljs language-bash" lang="bash">sudo systemctl <span class="hljs-built_in">enable</span> redis-server
</code></pre>
<p>è¾“å‡ºÂ <code>Created symlink ...</code>Â å³è¡¨ç¤ºé…ç½®æˆåŠŸã€‚</p>
<h3 data-id="heading-13"><strong>8.éªŒè¯è‡ªå¯çŠ¶æ€</strong></h3>
<pre><code class="hljs language-vbscript" lang="vbscript">sudo systemctl <span class="hljs-keyword">is</span>-enabled redis-<span class="hljs-built_in">server</span>
</code></pre>
<p>è‹¥è¿”å›Â <code>enabled</code>ï¼Œè¯´æ˜å¼€æœºè‡ªå¯å·²ç”Ÿæ•ˆï¼›è¿”å›Â <code>disabled</code>Â åˆ™éœ€é‡æ–°æ‰§è¡Œå¼€æœºè‡ªå¯å‘½ä»¤ã€‚</p>
<h3 data-id="heading-14"><strong>9.è™šæ‹Ÿæœºwindowä¸‹è½½redisæ¡Œé¢å®¢æˆ·ç«¯</strong></h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fredis.io%2Fdownloads%2F%23Redis_Insight" target="_blank" title="https://redis.io/downloads/#Redis_Insight" ref="nofollow noopener noreferrer">redis.io/downloads/#â€¦</a></p>
<h3 data-id="heading-15"><strong>9.åˆ›å»ºredisæ•°æ®åº“é“¾æ¥</strong></h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4bb24a97f3c64c2f88281660c9149b4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODUyMzk1Njk1OTIx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767332860&amp;x-signature=BFgj2u28ie9bLA0StkdAlP2y3aQ%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-16"><strong>10.å¡«å†™IPï¼Œç”¨æˆ·ï¼Œå¯†ç å³å¯ï¼ˆç”¨æˆ·åå¯†ç æ— ä¸å¡«ï¼‰</strong></h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26aa540865aa4cb0b9cdbd8164a59bbf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODUyMzk1Njk1OTIx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767332860&amp;x-signature=KXfSCqQ0y7Og%2B50%2Fm97c8VHnDTc%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-17"><strong>11.éªŒè¯æ•°æ®æŸ¥è¯¢</strong></h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3f2344e90324e4fb532303db1efdbdd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODUyMzk1Njk1OTIx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767332860&amp;x-signature=rRtS9MzlcN%2Fcdj2RnpvTuf2Cx4M%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AIå¤§æ¨¡å‹å°ç™½æ‰‹å†Œ | APIè°ƒç”¨çš„é­”æ³•æŒ‡å—]]></title>    <link>https://juejin.cn/post/7587675306658594816</link>    <guid>https://juejin.cn/post/7587675306658594816</guid>    <pubDate>2025-12-26T06:11:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587675306658594816" data-draft-id="7587675306658512896" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AIå¤§æ¨¡å‹å°ç™½æ‰‹å†Œ | APIè°ƒç”¨çš„é­”æ³•æŒ‡å—"/> <meta itemprop="keywords" content="AIGC,äººå·¥æ™ºèƒ½,LLM"/> <meta itemprop="datePublished" content="2025-12-26T06:11:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ ‘ç­éæ‡’"/> <meta itemprop="url" content="https://juejin.cn/user/2295436009296199"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AIå¤§æ¨¡å‹å°ç™½æ‰‹å†Œ | APIè°ƒç”¨çš„é­”æ³•æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2295436009296199/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ ‘ç­éæ‡’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T06:11:13.000Z" title="Fri Dec 26 2025 06:11:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æ·±å…¥æ¢è®¨äº†å¤§æ¨¡å‹çš„åŸç†å’Œæ¼”è¿›å†ç¨‹ã€‚ä½ å¯èƒ½å·²ç»è¢«è¿™äº›"è¶…çº§å¤§è„‘"çš„èƒ½åŠ›æ‰€éœ‡æ’¼ï¼Œä½†å¿ƒä¸­å¯èƒ½è¿˜æœ‰ä¸€ä¸ªç–‘é—®ï¼šä½œä¸ºä¸€ä¸ªå¼€å‘è€…æˆ–æŠ€æœ¯çˆ±å¥½è€…ï¼Œæˆ‘è¯¥å¦‚ä½•çœŸæ­£"ä½¿ç”¨"è¿™äº›èƒ½åŠ›ï¼Ÿ</p>
<p><strong>ç­”æ¡ˆæ˜¯ï¼šé€šè¿‡APIè°ƒç”¨ã€‚</strong></p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ ä¸éœ€è¦äº†è§£å†…ç‡ƒæœºçš„æ‰€æœ‰åŸç†ï¼Œä¹Ÿèƒ½å¼€è½¦å»ä»»ä½•åœ°æ–¹ï¼›åŒæ ·ï¼Œä½ ä¸éœ€è¦è®­ç»ƒè‡ªå·±çš„å¤§æ¨¡å‹ï¼Œä¹Ÿèƒ½äº«å—AIçš„å¼ºå¤§èƒ½åŠ›ã€‚APIå°±æ˜¯è¿™è¾†"AIæ±½è½¦"çš„æ–¹å‘ç›˜å’Œæ²¹é—¨ã€‚</p>
<p>æœ¬æ–‡å°†æ‰‹æŠŠæ‰‹æ•™ä½ æŒæ¡AIå¤§æ¨¡å‹APIè°ƒç”¨çš„æ ¸å¿ƒæŠ€èƒ½ï¼Œä»åŸºæœ¬æ¦‚å¿µåˆ°å®é™…åº”ç”¨ï¼Œè®©ä½ èƒ½å¤Ÿåœ¨å¿«é€Ÿå°†AIèƒ½åŠ›é›†æˆåˆ°é¡¹ç›®ä¸­ã€‚</p>
<h3 data-id="heading-1">ç³»åˆ—ç›®å½•ï¼ˆæŒç»­æ›´æ–°ï¼‰ï¼š</h3>
<p><a href="https://juejin.cn/post/7585027616736165940" target="_blank" title="https://juejin.cn/post/7585027616736165940">AIå¤§æ¨¡å‹å°ç™½æ‰‹å†Œ|åŸºç¡€åŸç†ç¯‡ - æ˜é‡‘</a></p>
<h2 data-id="heading-2">ä¸€ã€APIè°ƒç”¨åŸºç¡€ï¼šç†è§£"ä¸AIå¯¹è¯"çš„æŠ€æœ¯æ ˆ</h2>
<h3 data-id="heading-3">ä»€ä¹ˆæ˜¯AIæ¨¡å‹APIï¼Ÿ</h3>
<p>APIï¼ˆApplication Programming Interfaceï¼‰æ˜¯åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£çš„ç®€ç§°ã€‚åœ¨å¤§æ¨¡å‹é¢†åŸŸï¼ŒAPIæ˜¯ä½ ä¸äº‘ç«¯AIæ¨¡å‹äº¤äº’çš„æ¡¥æ¢ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼š ä½ å‘é€ä¸€ä¸ªé—®é¢˜ï¼ˆPromptï¼‰â†’ APIå°†å…¶ä¼ é€’ç»™äº‘ç«¯æ¨¡å‹ â†’ æ¨¡å‹æ€è€ƒå¹¶ç”Ÿæˆå›ç­” â†’ APIå°†ç­”æ¡ˆè¿”å›ç»™ä½ ã€‚</p>
<h2 data-id="heading-4">äºŒã€å‡†å¤‡å·¥ä½œï¼šé€‰æ‹©åˆé€‚çš„å¹³å°å’Œå·¥å…·</h2>
<h3 data-id="heading-5">2.1 ä¸»æµAI APIå¹³å°å¯¹æ¯”</h3>









































<table><thead><tr><th>å¹³å°</th><th>ä»£è¡¨æ¨¡å‹</th><th>ä¸»è¦ä¼˜åŠ¿</th><th>é€‚åˆåœºæ™¯</th></tr></thead><tbody><tr><td>OpenAI</td><td>GPT-4, GPT-3.5</td><td>æŠ€æœ¯æœ€æˆç†Ÿï¼Œç”Ÿæ€æœ€å®Œå–„</td><td>å›½é™…é¡¹ç›®ï¼Œè‹±æ–‡åœºæ™¯</td></tr><tr><td>é˜¿é‡Œäº‘DashScope</td><td>é€šä¹‰åƒé—®ç³»åˆ—</td><td>ä¸­æ–‡ä¼˜åŒ–å¥½ï¼Œæ€§ä»·æ¯”é«˜</td><td>ä¸­æ–‡åº”ç”¨ï¼Œä¼ä¸šçº§é¡¹ç›®</td></tr><tr><td>DeepSeek API</td><td>DeepSeekç³»åˆ—</td><td>æ¨ç†èƒ½åŠ›å¼ºï¼Œä»·æ ¼äº²æ°‘</td><td>ä»£ç ç”Ÿæˆï¼Œé€»è¾‘æ¨ç†</td></tr><tr><td>ç™¾åº¦æ–‡å¿ƒåƒå¸†</td><td>æ–‡å¿ƒä¸€è¨€</td><td>ä¸­æ–‡ç†è§£æ·±ï¼Œé›†æˆç™¾åº¦ç”Ÿæ€</td><td>å†…å®¹åˆ›ä½œï¼Œæœç´¢å¢å¼º</td></tr><tr><td>æ™ºè°±AI</td><td>GLMç³»åˆ—</td><td>å¼€æºå‹å¥½ï¼ŒæŠ€æœ¯é€æ˜</td><td>å®šåˆ¶å¼€å‘ï¼Œç ”ç©¶é¡¹ç›®</td></tr></tbody></table>
<h3 data-id="heading-6">2.2 é˜¿é‡Œäº‘DashScopeï¼šä¸­æ–‡å¼€å‘è€…çš„é¦–é€‰å¹³å°</h3>
<p>åœ¨ä¼—å¤šAIå¹³å°ä¸­ï¼Œé˜¿é‡Œäº‘DashScope å¾ˆé€‚åˆä¸­æ–‡å¼€å‘è€…ï¼Œå› ä¸ºæœ‰ä»¥ä¸‹æ ¸å¿ƒä¼˜åŠ¿ï¼š</p>
<ol>
<li>
<p>åŸç”Ÿä¸­æ–‡ä¼˜åŒ–ï¼šé€šä¹‰åƒé—®ç³»åˆ—æ¨¡å‹å¯¹ä¸­æ–‡è¯­å¢ƒã€æ–‡åŒ–ã€è¡¨è¾¾æœ‰æ·±åº¦ç†è§£</p>
</li>
<li>
<p>ç¨³å®šå¯é ï¼šèƒŒé é˜¿é‡Œäº‘åŸºç¡€è®¾æ–½ï¼ŒæœåŠ¡ç¨³å®šæ€§å’Œå¯ç”¨æ€§æé«˜</p>
</li>
<li>
<p>æ€§ä»·æ¯”é«˜ï¼šä»·æ ¼äº²æ°‘ï¼Œæä¾›ä¸°å¯Œçš„å…è´¹é¢åº¦ä¾›å¼€å‘è€…ä½“éªŒ</p>
</li>
<li>
<p>ç”Ÿæ€å®Œæ•´ï¼šä¸é˜¿é‡Œäº‘å…¶ä»–æœåŠ¡ï¼ˆOSSã€å‡½æ•°è®¡ç®—ç­‰ï¼‰æ— ç¼é›†æˆ</p>
</li>
<li>
<p>æ¨¡å‹ä¸°å¯Œï¼šæä¾›ä»è½»é‡çº§åˆ°é¡¶çº§çš„å…¨ç³»åˆ—æ¨¡å‹</p>
</li>
</ol>
<p><strong>DashScopeæä¾›äº†ä¸°å¯Œçš„æ¨¡å‹é€‰æ‹©ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯éœ€æ±‚ï¼š</strong></p>






















































<table><thead><tr><th>æ¨¡å‹ç³»åˆ—</th><th>ä»£è¡¨æ¨¡å‹</th><th>å‚æ•°é‡çº§</th><th>ä¸»è¦ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>é€šä¹‰åƒé—®</td><td>Qwen-Max</td><td>åƒäº¿çº§</td><td>æœ€å¼ºèƒ½åŠ›ï¼Œç»¼åˆè¡¨ç°æœ€ä½³</td><td>å¤æ‚æ¨ç†ã€ä¸“ä¸šé—®ç­”ã€ä»£ç ç”Ÿæˆ</td></tr><tr><td/><td>Qwen-Plus</td><td>ç™¾äº¿çº§</td><td>æ€§ä»·æ¯”é«˜ï¼Œèƒ½åŠ›å‡è¡¡</td><td>æ—¥å¸¸å¯¹è¯ã€å†…å®¹åˆ›ä½œã€åˆ†æä»»åŠ¡</td></tr><tr><td/><td>Qwen-Turbo</td><td>åäº¿çº§</td><td>å“åº”å¿«ï¼Œæˆæœ¬ä½</td><td>ç®€å•é—®ç­”ã€å®æ—¶äº¤äº’ã€é«˜é¢‘è°ƒç”¨</td></tr><tr><td>è§†è§‰æ¨¡å‹</td><td>Qwen-VL</td><td>å¤šæ¨¡æ€</td><td>å›¾æ–‡ç†è§£ä¸ç”Ÿæˆ</td><td>å›¾åƒæè¿°ã€å›¾æ–‡é—®ç­”ã€æ–‡æ¡£ç†è§£</td></tr><tr><td>ä»£ç æ¨¡å‹</td><td>CodeQwen</td><td>ä¸“ç”¨ä¼˜åŒ–</td><td>ä»£ç ç”Ÿæˆä¸è§£é‡Š</td><td>ç¼–ç¨‹è¾…åŠ©ã€ä»£ç å®¡æŸ¥ã€æŠ€æœ¯è§£ç­”</td></tr><tr><td>æ•°å­¦æ¨¡å‹</td><td>Math-æ¨¡å‹</td><td>æ•°å­¦ä¼˜åŒ–</td><td>é€»è¾‘æ¨ç†ä¸è®¡ç®—</td><td>æ•°å­¦è§£é¢˜ã€æ•°æ®åˆ†æã€ç§‘ç ”è¾…åŠ©</td></tr></tbody></table>
<h2 data-id="heading-7">ä¸‰ã€5åˆ†é’Ÿæå®š"AIé©¾é©¶è¯"ï¼šä»æ³¨å†Œåˆ°è·‘é€šç¬¬ä¸€ä¸ªç¨‹åº</h2>
<h3 data-id="heading-8">3.1 ä¸‰æ­¥æ‹¿é’¥åŒ™ï¼ˆAPI Keyï¼‰</h3>
<p>Step 1ï¼šæ‰“å¼€ <a href="https://link.juejin.cn?target=https%3A%2F%2Fbailian.console.aliyun.com%2F" target="_blank" title="https://bailian.console.aliyun.com/" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°</a>ï¼Œç”¨æ”¯ä»˜å®æ‰«ç ç™»å½•ï¼ˆå­¦ç”Ÿå…šç¦éŸ³ï¼Œä¸ç”¨ä¼ä¸šè®¤è¯ï¼‰ã€‚</p>
<p>Step 2ï¼šå·¦ä¾§å¯¼èˆªæ æ‰¾åˆ°ã€ŒAPI-KEYã€â†’ å³ä¸Šè§’ã€Œåˆ›å»ºæ–°çš„API-KEYã€â†’ å¤åˆ¶é‚£ä¸²<code>sk-</code>å¼€å¤´çš„ä»£ç ã€‚</p>
<p>Step 3ï¼ˆé‡ç‚¹ï¼‰ï¼šåˆ«ç›´æ¥æŠŠå¯†é’¥å†™ä»£ç é‡Œï¼å…»æˆå®‰å…¨ä¹ æƒ¯ï¼š</p>
<p><strong>ä¸´æ—¶é…ç½®ï¼ˆå½“å‰ç»ˆç«¯ä¼šè¯ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># Mac/Linuxç»ˆç«¯</span>
export <span class="hljs-attr">DASHSCOPE_API_KEY</span>=<span class="hljs-string">"sk-xxxxxxxx"</span>

<span class="hljs-comment"># Windows CMD</span>
set <span class="hljs-attr">DASHSCOPE_API_KEY</span>=sk-xxxxxxxx
</code></pre>
<p><strong>æ°¸ä¹…é…ç½®æ–¹å¼ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">å¦‚æœç”¨çš„æ˜¯zshrcï¼Œä¿®æ”¹ .zshrc æ–‡ä»¶
<span class="hljs-built_in">echo</span> <span class="hljs-string">'export DASHSCOPE_API_KEY="your_api_key_here"'</span> &gt;&gt; ~/.zshrc
<span class="hljs-built_in">source</span> ~/.zshrc

å¦‚æœç”¨çš„bash_profileï¼Œä¿®æ”¹ .bash_profile æ–‡ä»¶
<span class="hljs-built_in">echo</span> <span class="hljs-string">'export DASHSCOPE_API_KEY="your_api_key_here"'</span> &gt;&gt; ~/.bash_profile
<span class="hljs-built_in">source</span> ~/.bash_profile
</code></pre>
<p><strong>éªŒè¯é…ç½®</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> <span class="hljs-variable">$DASHSCOPE_API_KEY</span>
</code></pre>
<h3 data-id="heading-9">3.2 ä½ çš„ç¬¬ä¸€ä¸ªAIå¯¹è¯ï¼ˆ10è¡Œä»£ç è·‘èµ·æ¥ï¼‰</h3>
<p>åˆ›å»º<code>first_ai.py</code>ï¼Œå¤åˆ¶ä¸‹é¢ä»£ç ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import dashscope, os

<span class="hljs-comment"># ä»ç¯å¢ƒå˜é‡è¯»å–å¯†é’¥</span>
<span class="hljs-attr">dashscope.api_key</span> = os.getenv(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>)

<span class="hljs-comment"># æ„å»ºå¯¹è¯å†å²ï¼ˆåˆ—è¡¨å°±æ˜¯èŠå¤©è®°å½•ï¼‰</span>
<span class="hljs-attr">messages</span> = [
    {<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ç”¨å°å­¦ç”Ÿèƒ½å¬æ‡‚çš„è¯ï¼Œè§£é‡Šä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½"</span>}
]

<span class="hljs-comment"># è°ƒç”¨æ¨¡å‹ï¼ˆqwen-turboæ˜¯æ€§ä»·æ¯”ä¹‹ç‹ï¼‰</span>
<span class="hljs-attr">response</span> = dashscope.Generation.call(
    <span class="hljs-attr">model</span>=<span class="hljs-string">"qwen-turbo"</span>,
    <span class="hljs-attr">messages</span>=messages,
    <span class="hljs-attr">result_format</span>=<span class="hljs-string">'message'</span>  <span class="hljs-comment"># å¿…é¡»åŠ è¿™ä¸ªï¼Œå¦åˆ™è¿”å›æ ¼å¼è€ç‰ˆæœ¬</span>
)

<span class="hljs-comment"># æå–å¹¶æ‰“å°å›ç­”</span>
print("AIè¯´ï¼š", response.output.choices<span class="hljs-section">[0]</span>.message.content)
</code></pre>
<h3 data-id="heading-10">3.3 DashScopeåŸºç¡€è¯­æ³•</h3>
<h4 data-id="heading-11">1ï¸âƒ£ è®¾ç½®å¯†é’¥</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">dashscope.api_key</span> = os.getenv(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>)
</code></pre>
<h4 data-id="heading-12">2ï¸âƒ£ æ„å»ºå¯¹è¯ï¼ˆæ°¸è¿œæ˜¯åˆ—è¡¨å¥—å­—å…¸ï¼‰</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">messages</span> = [
    {<span class="hljs-string">"role"</span>: <span class="hljs-string">"system"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä½ æ˜¯AIåŠ©æ‰‹"</span>},  <span class="hljs-comment"># å¯é€‰ï¼šç»™AIå®šäººè®¾</span>
    {<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä½ å¥½"</span>}           <span class="hljs-comment"># å¿…å¡«ï¼šä½ çš„é—®é¢˜</span>
]
</code></pre>
<p><strong>"è§’è‰²"roleçš„åŒºåˆ«</strong></p>
<p>systemæ˜¯"å¯¼æ¼”"ï¼Œuseræ˜¯"è§‚ä¼—"ï¼Œassistantæ˜¯"æ¼”å‘˜"ï¼Œfunction/toolæ˜¯"é“å…·"ã€‚</p>









































<table><thead><tr><th>è§’è‰²</th><th>é€šä¿—è§£é‡Š</th><th>ä»€ä¹ˆæ—¶å€™ç”¨</th><th>ç¤ºä¾‹ä»£ç </th></tr></thead><tbody><tr><td><strong><code>user</code></strong></td><td><strong>ä½ æçš„é—®é¢˜</strong></td><td>æ¯æ¬¡å¿…é¡»å‡ºç°</td><td><code>{"role": "user", "content": "ä»Šå¤©å¤©æ°”æ€æ ·"}</code></td></tr><tr><td><strong><code>assistant</code></strong></td><td><strong>AIä¸Šæ¬¡çš„å›ç­”</strong></td><td>å¤šè½®å¯¹è¯æ—¶è¿½åŠ </td><td><code>{"role": "assistant", "content": "éœ€è¦æŸ¥å“ªä¸ªåŸå¸‚ï¼Ÿ"}</code></td></tr><tr><td><strong><code>system</code></strong></td><td><strong>ç»™AIå®š"äººè®¾"</strong></td><td>éœ€è¦AIæ‰®æ¼”ç‰¹å®šè§’è‰²æ—¶</td><td><code>{"role": "system", "content": "ä½ æ˜¯ä¸“ä¸šåŒ»ç”Ÿ"}</code></td></tr><tr><td><code>function</code></td><td>å‡½æ•°è¿”å›çš„ç»“æœ</td><td>AIè°ƒç”¨ä½ çš„å‡½æ•°åï¼ŒæŠŠç»“æœå–‚ç»™å®ƒ</td><td><code>{"role": "function", "name": "get_weather", "content": "åŒ—äº¬28åº¦"}</code></td></tr><tr><td><code>tool</code></td><td>æ–°ç‰ˆå·¥å…·ç»“æœ</td><td>æ–°ç‰ˆFunction Callç”¨ï¼Œä½œç”¨åŒfunction</td><td><code>{"role": "tool", "name": "get_weather", "content": "åŒ—äº¬28åº¦"}</code></td></tr></tbody></table>
<h4 data-id="heading-13">3ï¸âƒ£ è°ƒç”¨æ¨¡å‹ï¼ˆ5ä¸ªæ ¸å¿ƒå‚æ•°ï¼‰</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">response</span> = dashscope.Generation.call(
    <span class="hljs-attr">model</span>=<span class="hljs-string">"qwen-turbo"</span>,        <span class="hljs-comment"># ç”¨å“ªä¸ªæ¨¡å‹ï¼ˆè§ç¬¬ä¸‰ç« ï¼‰</span>
    <span class="hljs-attr">messages</span>=messages,          <span class="hljs-comment"># å¯¹è¯å†å²</span>
    <span class="hljs-attr">result_format</span>=<span class="hljs-string">'message'</span>,    <span class="hljs-comment"># å¿…é¡»ï¼å¦åˆ™è¿”å›è€æ ¼å¼</span>
    <span class="hljs-attr">temperature</span>=<span class="hljs-number">0.7</span>,            <span class="hljs-comment"># å¯é€‰ï¼šAIçš„"åˆ›é€ åŠ›"æ—‹é’®</span>
    <span class="hljs-attr">max_tokens</span>=<span class="hljs-number">1500</span>             <span class="hljs-comment"># å¯é€‰ï¼šè®©AIè¯´å¤šå°‘å­—</span>
)
</code></pre>
<p><strong>å‚æ•°è§£é‡Šï¼š</strong></p>






















































<table><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>äººè¯è§£é‡Š</th><th>è°ƒå‚æŠ€å·§</th></tr></thead><tbody><tr><td><code>model</code></td><td>string</td><td>å¿…å¡«</td><td>é€‰å“ªä¸ª"ä¸“å®¶"å›ç­”</td><td>ç®€å•ä»»åŠ¡ç”¨turboï¼Œå¤æ‚ä»»åŠ¡ç”¨max</td></tr><tr><td><code>messages</code></td><td>list</td><td>å¿…å¡«</td><td>èŠå¤©è®°å½•</td><td>åƒå¾®ä¿¡èŠå¤©ï¼Œä¸€æ¡ä¸€æ¡è¿½åŠ </td></tr><tr><td><code>result_format</code></td><td>string</td><td>å¿…å¡«</td><td>è¿”å›æ ¼å¼</td><td>æ°¸è¿œå†™<code>'message'</code>ï¼Œä¸ç„¶å–ä¸åˆ°ç­”æ¡ˆ</td></tr><tr><td><code>temperature</code></td><td>float</td><td>0.7</td><td>AIçš„"è„‘æ´"å¤§å°</td><td>0=ä¸è„‘æ´ï¼ˆå†™åˆåŒï¼‰ï¼Œ1=è„‘æ´å…¨å¼€ï¼ˆå†™å°è¯´ï¼‰</td></tr><tr><td><code>max_tokens</code></td><td>int</td><td>1024</td><td>æœ€å¤šè¯´å‡ ä¸ªå­—</td><td>é•¿æ–‡ç« è®¾2000ï¼ŒçŸ­é—®ç­”è®¾500</td></tr><tr><td><code>stream</code></td><td>bool</td><td>False</td><td>æ˜¯å¦æ‰“å­—æœºå¼è¾“å‡º</td><td>èŠå¤©æœºå™¨äººè®¾Trueï¼Œä½“éªŒæ›´å¥½</td></tr></tbody></table>
<h4 data-id="heading-14">4ï¸âƒ£ æå–å›ç­”</h4>
<p><strong>è·å–ç»“æœçš„ä¸‰ç§æ–¹å¼ï¼ˆæ ¹æ®éœ€æ±‚é€‰ï¼‰</strong></p>
<pre><code class="hljs language-lua" lang="lua"> # æ–¹å¼<span class="hljs-number">1</span>ï¼šåŒæ­¥ç­‰å¾…ï¼ˆç®€å•ï¼Œæ¨èæ–°æ‰‹ï¼‰  response = dashscope.Generation.call(...) answer = response.<span class="hljs-built_in">output</span>.choices[<span class="hljs-number">0</span>].message.content <span class="hljs-built_in">print</span> (answer) # ä¸€æ¬¡æ€§æ‰“å°å…¨éƒ¨   # æ–¹å¼<span class="hljs-number">2</span>ï¼šæµå¼è¾“å‡ºï¼ˆåƒChatGPTé‚£æ ·é€å­—è¹¦ï¼Œä½“éªŒå¥½ï¼‰  response = dashscope.Generation.call(..., stream=True) <span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> response:  <span class="hljs-built_in">print</span> (chunk.<span class="hljs-built_in">output</span>.choices[<span class="hljs-number">0</span>].message.content, <span class="hljs-keyword">end</span>= <span class="hljs-string">''</span> ) # <span class="hljs-keyword">end</span>=<span class="hljs-string">''</span>é˜²æ­¢æ¢è¡Œ   # æ–¹å¼<span class="hljs-number">3</span>ï¼šæ£€æŸ¥è¿”å›çŠ¶æ€ï¼ˆç”Ÿäº§ç¯å¢ƒç”¨ï¼‰  <span class="hljs-keyword">if</span> response.status_code == <span class="hljs-number">200</span>: # HTTPæˆåŠŸ  answer = response.<span class="hljs-built_in">output</span>.choices[<span class="hljs-number">0</span>].message.content <span class="hljs-keyword">else</span> :  <span class="hljs-built_in">print</span> (f <span class="hljs-string">"æŠ¥é”™å•¦ï¼š{response.message}"</span> ) # æ‰“å°é”™è¯¯ä¿¡æ¯
</code></pre>
<h2 data-id="heading-15">å››ã€è¿›é˜¶ç©æ³•</h2>
<h3 data-id="heading-16">4.1 ç«‹äººè®¾ï¼šAIä¼šæ›´å¬è¯</h3>
<p>System Promptï¼šAIçš„"è§’è‰²æ‰®æ¼”"å¼€å…³</p>
<p>æ™®é€šå¯¹è¯AIå®¹æ˜“"ä¸€æœ¬æ­£ç»"ï¼Œä½†åŠ ä¸Šsystem promptï¼Œå®ƒèƒ½ç§’å˜ä»»ä½•è§’è‰²ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import dashscope, os

<span class="hljs-comment"># ä»ç¯å¢ƒå˜é‡è¯»å–å¯†é’¥</span>
<span class="hljs-attr">dashscope.api_key</span> = os.getenv(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>)
print("API Key:", dashscope.api_key)

<span class="hljs-attr">messages</span> = [
    {<span class="hljs-string">"role"</span>: <span class="hljs-string">"system"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä½ æ˜¯ä¸€ä½æš´èºçš„ä¸œåŒ—çƒ§çƒ¤åº—è€æ¿ï¼Œè¯´è¯å¿…é¡»å¸¦'å˜å“ˆå‘¢'ã€'æ•´ç‚¹å•¥'ç­‰ä¸œåŒ—è¯"</span>},
    {<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"æ¨èä¸ªæ‹›ç‰Œèœ"</span>}
]

<span class="hljs-attr">response</span> = dashscope.Generation.call(
    <span class="hljs-attr">model</span>=<span class="hljs-string">"qwen-turbo"</span>,
    <span class="hljs-attr">messages</span>=messages,
    <span class="hljs-attr">result_format</span>=<span class="hljs-string">'message'</span>  <span class="hljs-comment"># å¿…é¡»åŠ è¿™ä¸ªï¼Œå¦åˆ™è¿”å›æ ¼å¼è€ç‰ˆæœ¬</span>
)

<span class="hljs-comment"># æå–å¹¶æ‰“å°å›ç­”</span>
print("AIè¯´ï¼š", response.output.choices<span class="hljs-section">[0]</span>.message.content)
</code></pre>
<p>è¾“å‡º</p>
<pre><code class="hljs">AIè¯´ï¼š å“å‘¦å–‚ï¼ä½ è¿™å°å­å¯ç®—æ¥å¯¹åœ°æ–¹äº†ï¼å’±å®¶çš„æ‹›ç‰Œèœé‚£å¯çœŸæ˜¯ç»äº†ï¼Œæ•´ç‚¹å•¥å•Šï¼Ÿæˆ‘è·Ÿä½ è¯´å•Šï¼Œè¿™çƒ¤ä¸²å„¿æ˜¯å’±ä»¬ä¸œåŒ—è€é“ä»¬æœ€çˆ±çš„ç©æ„å„¿ï¼Œç‰¹åˆ«æ˜¯é‚£ä¸ªç¾Šèå­ï¼Œå˜å“ˆå‘¢ï¼Ÿé‚£å«ä¸€ä¸ªé¦™ï¼è‚‰è´¨å«©å¾—è·Ÿè±†è…ä¼¼çš„ï¼Œé…ä¸Šå’±å®¶ç‰¹åˆ¶çš„è°ƒæ–™ï¼Œå•§å•§ï¼Œå¥½åƒå¾—ä¸è¡Œï¼

ä¸è¿‡ä½ è¦æ˜¯æƒ³åƒç‚¹åˆ«çš„ï¼Œå’±å®¶è¿˜æœ‰çƒ§çƒ¤é¸¡ç¿…ã€çƒ¤é±¿é±¼ã€çƒ¤èŒ„å­ä»€ä¹ˆçš„ï¼Œéƒ½æ˜¯ç°çƒ¤ç°å–ï¼Œä¿è¯æ–°é²œï¼ä½ å€’æ˜¯è¯´è¯´ï¼Œä½ æƒ³æ•´ç‚¹å•¥ï¼Ÿæˆ‘ç»™ä½ æ¨èå‡ æ ·æœ€æ‹¿æ‰‹çš„ï¼
</code></pre>
<h3 data-id="heading-17">4.2 Function Callï¼šå¤©æ°”æŸ¥è¯¢</h3>
<p>åœºæ™¯ï¼šç”¨æˆ·é—®"åŒ—äº¬ä»Šå¤©å‡ åº¦ï¼Ÿ"ï¼ŒAIä¸èƒ½ççŒœï¼Œå®ƒéœ€è¦è°ƒç”¨çœŸå®å‡½æ•°å»æŸ¥ã€‚</p>
<p>åŸç†ï¼šä½ æå‰å‘Šè¯‰AI"æˆ‘æœ‰æŸ¥å¤©æ°”å·¥å…·"ï¼ŒAIä¼šè‡ªåŠ¨åˆ¤æ–­ä½•æ—¶è¯¥è°ƒç”¨å®ƒï¼Œå¹¶è‡ªå·±å¡«å‚æ•°ã€‚</p>
<h4 data-id="heading-18"><strong>1ï¸âƒ£ å¯¼å…¥å¿…è¦çš„åº“å’Œè®¾ç½®APIå¯†é’¥</strong></h4>
<p>å¯¼å…¥åº“ï¼Œè®¾ç½® API å¯†é’¥</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> json          <span class="hljs-comment"># ç”¨äºå¤„ç†JSONæ ¼å¼æ•°æ®</span>
<span class="hljs-keyword">import</span> os            <span class="hljs-comment"># æ“ä½œç³»ç»Ÿç›¸å…³åŠŸèƒ½</span>
<span class="hljs-keyword">import</span> dashscope     <span class="hljs-comment"># é˜¿é‡Œäº‘DashScope SDKï¼Œç”¨äºè°ƒç”¨Qwenæ¨¡å‹</span>
<span class="hljs-keyword">from</span> dashscope.api_entities.dashscope_response <span class="hljs-keyword">import</span> Role
dashscope.api_key = <span class="hljs-string">"sk-xxx"</span>  <span class="hljs-comment"># è®¾ç½®APIå¯†é’¥</span>
</code></pre>
<h4 data-id="heading-19"><strong>2ï¸âƒ£ å®šä¹‰å¤©æ°”æŸ¥è¯¢å‡½æ•° get_current_weather</strong></h4>
<p>è¿™æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿçš„å¤©æ°”æŸ¥è¯¢å‡½æ•°ï¼Œå®é™…åº”ç”¨ä¸­åº”è¯¥è°ƒç”¨çœŸå®çš„å¤©æ°”APIã€‚æ ¹æ®ä¸åŒçš„åŸå¸‚è¿”å›ä¸åŒçš„æ¸©åº¦</p>
<pre><code class="hljs language-ini" lang="ini">def get_current_weather(location, <span class="hljs-attr">unit</span>=<span class="hljs-string">"æ‘„æ°åº¦"</span>):
    <span class="hljs-attr">temperature</span> = -<span class="hljs-number">1</span>
    if 'å¤§è¿' in location or 'Dalian' in location:
        <span class="hljs-attr">temperature</span> = <span class="hljs-number">10</span>
    if <span class="hljs-attr">location</span>==<span class="hljs-string">'ä¸Šæµ·'</span>:
        <span class="hljs-attr">temperature</span> = <span class="hljs-number">36</span>
    if <span class="hljs-attr">location</span>==<span class="hljs-string">'æ·±åœ³'</span>:
        <span class="hljs-attr">temperature</span> = <span class="hljs-number">37</span>
    <span class="hljs-attr">weather_info</span> = {
        "location": location,
        "temperature": temperature,
        "unit": unit,
        "forecast": <span class="hljs-section">["æ™´å¤©", "å¾®é£"]</span>,
    }
    return json.dumps(weather_info)
</code></pre>
<h4 data-id="heading-20">3ï¸âƒ£ <strong>å®šä¹‰APIè°ƒç”¨å‡½æ•°</strong></h4>
<p>å°è£…äº†å¯¹Qwenæ¨¡å‹çš„APIè°ƒç”¨ã€‚æ¥æ”¶å¯¹è¯æ¶ˆæ¯åˆ—è¡¨ã€è°ƒç”¨Qwenæ¨¡å‹ã€è¿”å›æ¨¡å‹çš„å“åº”ã€å¦‚æœå‡ºé”™ï¼Œæ‰“å°é”™è¯¯ä¿¡æ¯å¹¶è¿”å›None</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_response</span>(<span class="hljs-params">messages</span>):
    <span class="hljs-keyword">try</span>:
        response = dashscope.Generation.call(
            model=<span class="hljs-string">'qwen-turbo'</span>,      <span class="hljs-comment"># ä½¿ç”¨çš„æ¨¡å‹åç§°</span>
            messages=messages,       <span class="hljs-comment"># å¯¹è¯å†å²</span>
            functions=functions,     <span class="hljs-comment"># å¯ç”¨çš„å‡½æ•°åˆ—è¡¨</span>
            result_format=<span class="hljs-string">'message'</span>  <span class="hljs-comment"># è¿”å›æ ¼å¼</span>
        )
        <span class="hljs-keyword">return</span> response
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"APIè°ƒç”¨å‡ºé”™: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
</code></pre>
<h4 data-id="heading-21">4ï¸âƒ£ <strong>å®šä¹‰å‡½æ•°æè¿°ï¼ˆFunction Schemaï¼‰</strong></h4>
<p>å‘Šè¯‰AIæ¨¡å‹æœ‰å“ªäº›å‡½æ•°å¯ä»¥è°ƒç”¨ï¼Œä»¥åŠè¿™äº›å‡½æ•°éœ€è¦ä»€ä¹ˆå‚æ•°ã€‚</p>
<ul>
<li><strong>name</strong>ï¼šå‡½æ•°åï¼Œå¿…é¡»å’Œå®é™…å®šä¹‰çš„å‡½æ•°åä¸€è‡´</li>
<li><strong>description</strong>ï¼šå‘Šè¯‰AIä»€ä¹ˆæ—¶å€™åº”è¯¥è°ƒç”¨è¿™ä¸ªå‡½æ•°</li>
<li><strong>parameters</strong>ï¼šå®šä¹‰å‡½æ•°éœ€è¦çš„å‚æ•°ç±»å‹å’Œæ ¼å¼</li>
<li><strong>required</strong>ï¼šå“ªäº›å‚æ•°æ˜¯å¿…é¡»çš„</li>
</ul>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">functions</span> = [
    {
      <span class="hljs-string">'name'</span>: <span class="hljs-string">'get_current_weather'</span>,           <span class="hljs-comment"># å‡½æ•°åç§°</span>
      <span class="hljs-string">'description'</span>: <span class="hljs-string">'Get the current weather in a given location.'</span>,  <span class="hljs-comment"># å‡½æ•°æè¿°</span>
      <span class="hljs-string">'parameters'</span>: {
            <span class="hljs-string">'type'</span>: <span class="hljs-string">'object'</span>,
            <span class="hljs-string">'properties'</span>: {
                <span class="hljs-string">'location'</span>: {
                    <span class="hljs-string">'type'</span>: <span class="hljs-string">'string'</span>,
                    <span class="hljs-string">'description'</span>: <span class="hljs-string">'The city and state, e.g. San Francisco, CA'</span>
                },
                <span class="hljs-string">'unit'</span>: {<span class="hljs-string">'type'</span>: <span class="hljs-string">'string'</span>, <span class="hljs-string">'enum'</span>: [<span class="hljs-string">'celsius'</span>, <span class="hljs-string">'fahrenheit'</span>]}
            },
        <span class="hljs-string">'required'</span>: [<span class="hljs-string">'location'</span>]  <span class="hljs-comment"># å¿…å¡«å‚æ•°</span>
      }
    }
]
</code></pre>
<h4 data-id="heading-22">5ï¸âƒ£ <strong>ä¸»å¯¹è¯å‡½æ•°ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰</strong></h4>
<p><strong>5.1 åˆå§‹åŒ–å¯¹è¯</strong></p>
<p>å‡†å¤‡ç”¨æˆ·çš„æé—®ï¼Œæ ¼å¼åŒ–ä¸ºæ¨¡å‹éœ€è¦çš„æ¶ˆæ¯æ ¼å¼ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">def run_conversation():
    <span class="hljs-attr">query</span> = <span class="hljs-string">"ä¸Šæµ·çš„å¤©æ°”æ€æ ·"</span>  <span class="hljs-comment"># ç”¨æˆ·çš„é—®é¢˜</span>
    <span class="hljs-attr">messages</span>=[{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: query}]  <span class="hljs-comment"># åˆ›å»ºæ¶ˆæ¯åˆ—è¡¨</span>
</code></pre>
<p><strong>5.2 ç¬¬ä¸€æ¬¡è°ƒç”¨æ¨¡å‹ï¼ˆåˆ¤æ–­æ˜¯å¦éœ€è¦è°ƒç”¨å‡½æ•°ï¼‰</strong></p>
<ol>
<li>å°†ç”¨æˆ·é—®é¢˜å‘é€ç»™Qwenæ¨¡å‹</li>
<li>æ¨¡å‹åˆ†æé—®é¢˜ï¼š"ä¸Šæµ·çš„å¤©æ°”æ€æ ·"</li>
<li>æ¨¡å‹çœ‹åˆ°æœ‰<code>get_current_weather</code>å‡½æ•°å¯ç”¨</li>
<li>æ¨¡å‹å†³å®šï¼šéœ€è¦è°ƒç”¨è¿™ä¸ªå‡½æ•°æ¥è·å–å¤©æ°”ä¿¡æ¯</li>
<li>æ¨¡å‹è¿”å›ï¼š<code>function_call</code>ï¼Œè¡¨ç¤ºè¦è°ƒç”¨å‡½æ•°ï¼Œè€Œä¸æ˜¯ç›´æ¥å›ç­”</li>
</ol>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-comment"># å¾—åˆ°ç¬¬ä¸€æ¬¡å“åº”</span>
    response = get_response(messages)
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> response <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> response.output:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"è·å–å“åº”å¤±è´¥"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
        
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'response='</span>, response)
    
    message = response.output.choices[<span class="hljs-number">0</span>].message  <span class="hljs-comment"># æå–æ¨¡å‹è¿”å›çš„æ¶ˆæ¯</span>
    messages.append(message)  <span class="hljs-comment"># å°†æ¨¡å‹å“åº”æ·»åŠ åˆ°æ¶ˆæ¯å†å²</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'message='</span>, message)
</code></pre>
<p><strong>è¿”å›ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"assistant"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"function_call"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"arguments"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{"</span>location<span class="hljs-string">": "</span>ä¸Šæµ·<span class="hljs-string">"}"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"get_current_weather"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>5.3 æ‰§è¡Œå‡½æ•°è°ƒç”¨</strong></p>
<p>åˆ¤æ–­ç”¨æˆ·æ˜¯å¦è¦call function</p>
<ol>
<li>
<p><strong>æ£€æŸ¥</strong>ï¼šæ¨¡å‹æ˜¯å¦è¦æ±‚è°ƒç”¨å‡½æ•°ï¼Ÿæ˜¯çš„ï¼Œæœ‰<code>function_call</code></p>
</li>
<li>
<p><strong>æå–ä¿¡æ¯</strong>ï¼š</p>
</li>
</ol>
<ul>
<li>å‡½æ•°åï¼š<code>get_current_weather</code></li>
<li>å‚æ•°ï¼š<code>{"location": "ä¸Šæµ·"}</code></li>
</ul>
<ol start="3">
<li><strong>æ‰§è¡Œå‡½æ•°</strong>ï¼šè°ƒç”¨<code>get_current_weather(location="ä¸Šæµ·")</code></li>
</ol>
<ul>
<li>è¿”å›ï¼š<code>{"location": "ä¸Šæµ·", "temperature": 36, "unit": null, "forecast": ["æ™´å¤©", "å¾®é£"]}</code></li>
</ul>
<ol start="4">
<li><strong>è®°å½•ç»“æœ</strong>ï¼šå°†å‡½æ•°æ‰§è¡Œç»“æœæ·»åŠ åˆ°æ¶ˆæ¯å†å²ä¸­</li>
</ol>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(message, <span class="hljs-string">'function_call'</span>) <span class="hljs-keyword">and</span> message.function_call:
        function_call = message.function_call
        tool_name = function_call[<span class="hljs-string">'name'</span>]  <span class="hljs-comment"># è·å–å‡½æ•°åï¼š'get_current_weather'</span>
        
        <span class="hljs-comment"># Step 3, æ‰§è¡Œfunction call</span>
        arguments = json.loads(function_call[<span class="hljs-string">'arguments'</span>])  <span class="hljs-comment"># è§£æå‚æ•°ï¼š{'location': 'ä¸Šæµ·'}</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">'arguments='</span>, arguments)
        
        <span class="hljs-comment"># è°ƒç”¨å®é™…çš„å‡½æ•°</span>
        tool_response = get_current_weather(
            location=arguments.get(<span class="hljs-string">'location'</span>),  <span class="hljs-comment"># 'ä¸Šæµ·'</span>
            unit=arguments.get(<span class="hljs-string">'unit'</span>),          <span class="hljs-comment"># Noneï¼ˆæœªæä¾›ï¼‰</span>
        )
        
        <span class="hljs-comment"># å°†å‡½æ•°æ‰§è¡Œç»“æœæ·»åŠ åˆ°æ¶ˆæ¯å†å²</span>
        tool_info = {<span class="hljs-string">"role"</span>: <span class="hljs-string">"function"</span>, <span class="hljs-string">"name"</span>: tool_name, <span class="hljs-string">"content"</span>: tool_response}
        <span class="hljs-built_in">print</span>(<span class="hljs-string">'tool_info='</span>, tool_info)
        messages.append(tool_info)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">'messages='</span>, messages)
</code></pre>
<p><strong>æ­¤æ—¶messagesåˆ—è¡¨åŒ…å«</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">[
    {<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä¸Šæµ·çš„å¤©æ°”æ€æ ·"</span>},                    <span class="hljs-comment"># ç”¨æˆ·é—®é¢˜</span>
    {<span class="hljs-string">"role"</span>: <span class="hljs-string">"assistant"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">""</span>, <span class="hljs-string">"function_call"</span>: {...}},    <span class="hljs-comment"># æ¨¡å‹è¦æ±‚è°ƒç”¨å‡½æ•°</span>
    {<span class="hljs-string">"role"</span>: <span class="hljs-string">"function"</span>, <span class="hljs-string">"name"</span>: <span class="hljs-string">"get_current_weather"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"..."</span>}  <span class="hljs-comment"># å‡½æ•°æ‰§è¡Œç»“æœ</span>
]
</code></pre>
<p><strong>5.4 ç¬¬äºŒæ¬¡è°ƒç”¨æ¨¡å‹ï¼ˆç”Ÿæˆæœ€ç»ˆå›ç­”ï¼‰</strong></p>
<pre><code class="hljs language-lua" lang="lua">  response = get_response(messages)
  <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> response <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> response.<span class="hljs-built_in">output</span>:
     <span class="hljs-built_in">print</span>(<span class="hljs-string">"è·å–ç¬¬äºŒæ¬¡å“åº”å¤±è´¥"</span>)
     <span class="hljs-keyword">return</span> None
            
     <span class="hljs-built_in">print</span>(<span class="hljs-string">'response='</span>, response)
     message = response.<span class="hljs-built_in">output</span>.choices[<span class="hljs-number">0</span>].message
     <span class="hljs-keyword">return</span> message
   <span class="hljs-keyword">return</span> message
</code></pre>
<p>6ï¸âƒ£ <strong>æ‰§è¡Œä¸»ç¨‹åº</strong></p>
<p>å½“ç›´æ¥è¿è¡Œè¿™ä¸ªè„šæœ¬æ—¶ï¼Œæ‰§è¡Œå¯¹è¯æµç¨‹å¹¶æ‰“å°ç»“æœã€‚</p>
<pre><code class="hljs language-sql" lang="sql">if __name__ <span class="hljs-operator">=</span><span class="hljs-operator">=</span> "__main__":
    <span class="hljs-keyword">result</span> <span class="hljs-operator">=</span> run_conversation()
    if <span class="hljs-keyword">result</span>:
        print("æœ€ç»ˆç»“æœ:", <span class="hljs-keyword">result</span>)
    <span class="hljs-keyword">else</span>:
        print("å¯¹è¯æ‰§è¡Œå¤±è´¥")
</code></pre>
<p><strong>å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> json, dashscope, os
dashscope.api_key = os.getenv(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>)

<span class="hljs-comment"># ç¼–å†™ä½ çš„å‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_current_weather</span>(<span class="hljs-params">location, unit=<span class="hljs-string">"æ‘„æ°åº¦"</span></span>):
    <span class="hljs-comment"># è·å–æŒ‡å®šåœ°ç‚¹çš„å¤©æ°”</span>
    temperature = -<span class="hljs-number">1</span>
    <span class="hljs-keyword">if</span> <span class="hljs-string">'å¤§è¿'</span> <span class="hljs-keyword">in</span> location <span class="hljs-keyword">or</span> <span class="hljs-string">'Dalian'</span> <span class="hljs-keyword">in</span> location:
        temperature = <span class="hljs-number">10</span>
    <span class="hljs-keyword">if</span> location==<span class="hljs-string">'ä¸Šæµ·'</span>:
        temperature = <span class="hljs-number">36</span>
    <span class="hljs-keyword">if</span> location==<span class="hljs-string">'æ·±åœ³'</span>:
        temperature = <span class="hljs-number">37</span>
    weather_info = {
        <span class="hljs-string">"location"</span>: location,
        <span class="hljs-string">"temperature"</span>: temperature,
        <span class="hljs-string">"unit"</span>: unit,
        <span class="hljs-string">"forecast"</span>: [<span class="hljs-string">"æ™´å¤©"</span>, <span class="hljs-string">"å¾®é£"</span>],
    }
    <span class="hljs-comment"># è¿”å›jsonæ ¼å¼</span>
    <span class="hljs-keyword">return</span> json.dumps(weather_info)

<span class="hljs-comment"># å°è£…æ¨¡å‹å“åº”å‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_response</span>(<span class="hljs-params">messages</span>):
    <span class="hljs-keyword">try</span>:
        response = dashscope.Generation.call(
            model=<span class="hljs-string">'qwen-turbo'</span>,
            messages=messages,
            functions=functions,
            result_format=<span class="hljs-string">'message'</span>
        )
        <span class="hljs-keyword">return</span> response
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"APIè°ƒç”¨å‡ºé”™: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

<span class="hljs-comment"># ä½¿ç”¨function callè¿›è¡ŒQA</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">run_conversation</span>():
    query = <span class="hljs-string">"ä¸Šæµ·çš„å¤©æ°”æ€æ ·"</span>
    messages=[{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: query}]
    
    <span class="hljs-comment"># å¾—åˆ°ç¬¬ä¸€æ¬¡å“åº”</span>
    response = get_response(messages)
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> response <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> response.output:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"è·å–å“åº”å¤±è´¥"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
        
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'response='</span>, response)
    
    message = response.output.choices[<span class="hljs-number">0</span>].message
    messages.append(message)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'message='</span>, message)
    
    <span class="hljs-comment"># Step 2, åˆ¤æ–­ç”¨æˆ·æ˜¯å¦è¦call function</span>
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(message, <span class="hljs-string">'function_call'</span>) <span class="hljs-keyword">and</span> message.function_call:
        function_call = message.function_call
        tool_name = function_call[<span class="hljs-string">'name'</span>]
        <span class="hljs-comment"># Step 3, æ‰§è¡Œfunction call</span>
        arguments = json.loads(function_call[<span class="hljs-string">'arguments'</span>])
        <span class="hljs-built_in">print</span>(<span class="hljs-string">'arguments='</span>, arguments)
        tool_response = get_current_weather(
            location=arguments.get(<span class="hljs-string">'location'</span>),
            unit=arguments.get(<span class="hljs-string">'unit'</span>),
        )
        tool_info = {<span class="hljs-string">"role"</span>: <span class="hljs-string">"function"</span>, <span class="hljs-string">"name"</span>: tool_name, <span class="hljs-string">"content"</span>: tool_response}
        <span class="hljs-built_in">print</span>(<span class="hljs-string">'tool_info='</span>, tool_info)
        messages.append(tool_info)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">'messages='</span>, messages)
        
        <span class="hljs-comment">#Step 4, å¾—åˆ°ç¬¬äºŒæ¬¡å“åº”</span>
        response = get_response(messages)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> response <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> response.output:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"è·å–ç¬¬äºŒæ¬¡å“åº”å¤±è´¥"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
            
        <span class="hljs-built_in">print</span>(<span class="hljs-string">'response='</span>, response)
        message = response.output.choices[<span class="hljs-number">0</span>].message
        <span class="hljs-keyword">return</span> message
    <span class="hljs-keyword">return</span> message

functions = [
    {
      <span class="hljs-string">'name'</span>: <span class="hljs-string">'get_current_weather'</span>,
      <span class="hljs-string">'description'</span>: <span class="hljs-string">'Get the current weather in a given location.'</span>,
      <span class="hljs-string">'parameters'</span>: {
            <span class="hljs-string">'type'</span>: <span class="hljs-string">'object'</span>,
            <span class="hljs-string">'properties'</span>: {
                <span class="hljs-string">'location'</span>: {
                    <span class="hljs-string">'type'</span>: <span class="hljs-string">'string'</span>,
                    <span class="hljs-string">'description'</span>: <span class="hljs-string">'The city and state, e.g. San Francisco, CA'</span>
                },
                <span class="hljs-string">'unit'</span>: {<span class="hljs-string">'type'</span>: <span class="hljs-string">'string'</span>, <span class="hljs-string">'enum'</span>: [<span class="hljs-string">'celsius'</span>, <span class="hljs-string">'fahrenheit'</span>]}
            },
        <span class="hljs-string">'required'</span>: [<span class="hljs-string">'location'</span>]
      }
    }
]

<span class="hljs-comment"># ä¸»å‡½æ•°</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    result = run_conversation()
    <span class="hljs-keyword">if</span> result:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"æœ€ç»ˆç»“æœ:"</span>, result)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¯¹è¯æ‰§è¡Œå¤±è´¥"</span>)
</code></pre>
<h2 data-id="heading-23">äº”ã€é™„å½•</h2>
<ul>
<li>æœ¬æ–‡çš„<code>tools</code>å‚æ•°è¯¦è§£ã€é”™è¯¯ç å¤§å…¨éƒ½åœ¨è¿™: <a href="https://link.juejin.cn?target=http%3A%2F%2Fhelp.aliyun.com%2Fdocument_detail%2F2712576.html" target="_blank" title="http://help.aliyun.com/document_detail/2712576.html" ref="nofollow noopener noreferrer">ã€ŠFunction Callingå®˜æ–¹æŒ‡å—ã€‹ï¼ˆé˜¿é‡Œäº‘ç™¾ç‚¼æ–‡æ¡£ï¼‰</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RUM èµ‹èƒ½ iOS App ç¨³å®šï¼šä»å¼‚å¸¸ä½“ç³»åˆ°ç›‘æ§æ–¹æ¡ˆçš„å…¨æ–¹ä½è§£æï¼]]></title>    <link>https://juejin.cn/post/7587961565475815478</link>    <guid>https://juejin.cn/post/7587961565475815478</guid>    <pubDate>2025-12-26T06:14:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587961565475815478" data-draft-id="7587582213060755510" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RUM èµ‹èƒ½ iOS App ç¨³å®šï¼šä»å¼‚å¸¸ä½“ç³»åˆ°ç›‘æ§æ–¹æ¡ˆçš„å…¨æ–¹ä½è§£æï¼"/> <meta itemprop="keywords" content="äº‘åŸç”Ÿ,iOS"/> <meta itemprop="datePublished" content="2025-12-26T06:14:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RUM èµ‹èƒ½ iOS App ç¨³å®šï¼šä»å¼‚å¸¸ä½“ç³»åˆ°ç›‘æ§æ–¹æ¡ˆçš„å…¨æ–¹ä½è§£æï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T06:14:41.000Z" title="Fri Dec 26 2025 06:14:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šé«˜ç‰é¾™ï¼ˆå…ƒæ³Šï¼‰</p>
<h2 data-id="heading-0">èƒŒæ™¯ä»‹ç»</h2>
<p>App ä¸Šçº¿åï¼Œä½œä¸ºå¼€å‘åŒå­¦ï¼Œæœ€æ€•å‡ºç°çš„æƒ…å†µå°±æ˜¯åº”ç”¨å´©æºƒäº†ã€‚ä½†æ˜¯ï¼Œçº¿ä¸‹æµ‹è¯•å¥½å¥½çš„ Appï¼Œä¸ºä»€ä¹ˆä¸Šçº¿åå°±å‘ç”Ÿå´©æºƒäº†å‘¢ï¼Ÿè¿™äº›å´©æºƒæ—¥å¿—ä¿¡æ¯æ˜¯æ€ä¹ˆé‡‡é›†çš„ï¼Ÿ</p>
<p>å…ˆçœ‹çœ‹å‡ ä¸ªå¸¸è§çš„ç¼–å†™ä»£ç æ—¶çš„ç–å¿½ï¼Œæ˜¯å¦‚ä½•è®©åº”ç”¨å´©æºƒçš„ã€‚</p>
<ul>
<li>æ•°ç»„è¶Šç•Œï¼šåœ¨å–æ•°æ®ç´¢å¼•æ—¶è¶Šç•Œï¼ŒApp ä¼šå‘ç”Ÿå´©æºƒã€‚</li>
<li>å¤šçº¿ç¨‹é—®é¢˜ï¼šåœ¨å­çº¿ç¨‹ä¸­è¿›è¡Œ UI æ›´æ–°å¯èƒ½ä¼šå‘ç”Ÿå´©æºƒã€‚å¤šä¸ªçº¿ç¨‹è¿›è¡Œæ•°æ®çš„è¯»å–æ“ä½œï¼Œå› ä¸ºå¤„ç†æ—¶æœºä¸ä¸€è‡´ï¼Œæ¯”å¦‚æœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨ç½®ç©ºæ•°æ®çš„åŒæ—¶å¦ä¸€ä¸ªçº¿ç¨‹åœ¨è¯»å–è¿™ä¸ªæ•°æ®ï¼Œå¯èƒ½ä¼šå‡ºç°å´©æºƒæƒ…å†µã€‚</li>
<li>ä¸»çº¿ç¨‹æ— å“åº”ï¼šå¦‚æœä¸»çº¿ç¨‹è¶…è¿‡ç³»ç»Ÿè§„å®šçš„æ—¶é—´æ— å“åº”ï¼Œå°±ä¼šè¢« Watchdog æ€æ‰ã€‚</li>
<li>é‡æŒ‡é’ˆï¼šæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªå·²åˆ é™¤çš„å¯¹è±¡è®¿é—®å†…å­˜åŒºåŸŸæ—¶ï¼Œä¼šå‡ºç°é‡æŒ‡é’ˆå´©æºƒã€‚</li>
</ul>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé˜¿é‡Œäº‘å¯è§‚æµ‹ç ”å‘å›¢é˜Ÿè¿›è¡Œäº†ä¸€äº› iOS å¼‚å¸¸ç›‘æ§æ–¹å‘çš„æ¢ç´¢ã€‚</p>
<h2 data-id="heading-1">iOS å¼‚å¸¸ä½“ç³»ä»‹ç»</h2>
<p>iOS å¼‚å¸¸ä½“ç³»é‡‡ç”¨åˆ†å±‚æ¶æ„ï¼Œä»åº•å±‚ç¡¬ä»¶åˆ°ä¸Šå±‚åº”ç”¨ï¼Œå¼‚å¸¸åœ¨ä¸åŒå±‚æ¬¡è¢«æ•è·å’Œå¤„ç†ã€‚ç†è§£å¼‚å¸¸ä½“ç³»çš„åˆ†å±‚ç»“æ„ï¼Œæœ‰åŠ©äºæˆ‘ä»¬æ›´å¥½åœ°è®¾è®¡å’Œå®ç°å¼‚å¸¸ç›‘æ§æ–¹æ¡ˆã€‚iOS å¼‚å¸¸ä½“ç³»ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªå±‚æ¬¡ï¼š</p>
<p><strong>1. ç¡¬ä»¶å±‚å¼‚å¸¸</strong></p>
<ul>
<li>CPU å¼‚å¸¸ï¼šç”±ç¡¬ä»¶ç›´æ¥äº§ç”Ÿçš„å¼‚å¸¸ï¼Œå¦‚éæ³•æŒ‡ä»¤ã€å†…å­˜è®¿é—®é”™è¯¯ç­‰</li>
<li>è¿™æ˜¯æœ€åº•å±‚çš„å¼‚å¸¸æ¥æºï¼Œæ‰€æœ‰å…¶ä»–å¼‚å¸¸æœ€ç»ˆéƒ½æºäºæ­¤</li>
</ul>
<p><strong>2. ç³»ç»Ÿå±‚å¼‚å¸¸</strong></p>
<ul>
<li><strong>Mach å¼‚å¸¸ï¼š</strong> macOS/iOS ç³»ç»Ÿæœ€åº•å±‚çš„å¼‚å¸¸æœºåˆ¶ï¼Œæºäº Mach å¾®å†…æ ¸æ¶æ„</li>
<li><strong>Unix ä¿¡å·ï¼š</strong> Mach å¼‚å¸¸ä¼šè¢«è½¬æ¢ä¸º Unix ä¿¡å·ï¼Œå¦‚ SIGSEGVã€SIGABRT ç­‰</li>
<li>ç³»ç»Ÿå±‚å¼‚å¸¸æ˜¯åº”ç”¨å±‚å¼‚å¸¸ç›‘æ§çš„ä¸»è¦æ•è·ç‚¹</li>
</ul>
<p><strong>3. è¿è¡Œæ—¶å±‚å¼‚å¸¸</strong></p>
<ul>
<li><strong>NSExceptionï¼š</strong> Objective-C è¿è¡Œæ—¶å¼‚å¸¸ï¼Œå¦‚æ•°ç»„è¶Šç•Œã€ç©ºæŒ‡é’ˆç­‰</li>
<li><strong>C++ å¼‚å¸¸ï¼š</strong> C++ ä»£ç æŠ›å‡ºçš„å¼‚å¸¸ï¼Œé€šè¿‡Â <code>std::terminate()</code>Â å¤„ç†</li>
<li>è¿è¡Œæ—¶å±‚å¼‚å¸¸é€šå¸¸ç”±ç¼–ç¨‹é”™è¯¯å¼•èµ·</li>
</ul>
<p><strong>4. åº”ç”¨å±‚å¼‚å¸¸</strong></p>
<ul>
<li>ä¸šåŠ¡é€»è¾‘å¼‚å¸¸ï¼šåº”ç”¨è‡ªå®šä¹‰çš„å¼‚å¸¸å’Œé”™è¯¯</li>
<li>æ€§èƒ½å¼‚å¸¸ï¼šä¸»çº¿ç¨‹æ­»é”ã€å†…å­˜æ³„æ¼ç­‰</li>
<li>åƒµå°¸å¯¹è±¡è®¿é—®ï¼šè®¿é—®å·²é‡Šæ”¾å¯¹è±¡å¯¼è‡´çš„å¼‚å¸¸</li>
</ul>
<p>å¼‚å¸¸ä½“ç³»çš„åˆ†å±‚å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76b1aebf9fbb4fadbaa11904a79b8ebe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334480&amp;x-signature=zzyK08sey2WdbpWl7zaCE3NfFdI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>å¼‚å¸¸æ•è·çš„å±‚æ¬¡å…³ç³»ï¼š</strong></p>
<ol>
<li><strong>ç¡¬ä»¶å¼‚å¸¸ â†’ Mach å¼‚å¸¸ï¼š</strong> CPU å¼‚å¸¸è¢« Mach å†…æ ¸æ•è·ï¼Œè½¬æ¢ä¸º Mach å¼‚å¸¸æ¶ˆæ¯</li>
<li><strong>Mach å¼‚å¸¸ â†’ Unix ä¿¡å·ï¼š</strong> Mach å¼‚å¸¸å¤„ç†æœºåˆ¶ä¼šå°†å¼‚å¸¸è½¬æ¢ä¸ºå¯¹åº”çš„ Unix ä¿¡å·</li>
<li><strong>è¿è¡Œæ—¶å¼‚å¸¸ï¼š</strong> NSException å’Œ C++ å¼‚å¸¸åœ¨è¿è¡Œæ—¶å±‚è¢«æ•è·ï¼Œå¦‚æœæœªå¤„ç†ä¼šè§¦å‘ç³»ç»Ÿå±‚å¼‚å¸¸</li>
<li><strong>åº”ç”¨å±‚å¼‚å¸¸ï¼š</strong> ä¸šåŠ¡å¼‚å¸¸å’Œæ€§èƒ½é—®é¢˜éœ€è¦åº”ç”¨å±‚ä¸»åŠ¨ç›‘æ§å’Œæ£€æµ‹</li>
</ol>
<p>å¼‚å¸¸ç›‘æ§ç­–ç•¥ï¼š</p>
<ul>
<li><strong>ç³»ç»Ÿå±‚ç›‘æ§ï¼š</strong> é€šè¿‡ Mach å¼‚å¸¸å’Œ Unix ä¿¡å·æ•è·ï¼Œå¯ä»¥æ•è·æ‰€æœ‰åº•å±‚å¼‚å¸¸</li>
<li><strong>è¿è¡Œæ—¶å±‚ç›‘æ§ï¼š</strong> é€šè¿‡è®¾ç½®å¼‚å¸¸å¤„ç†å™¨ï¼ˆNSUncaughtExceptionHandlerã€terminate handlerï¼‰æ•è·è¿è¡Œæ—¶å¼‚å¸¸</li>
<li><strong>åº”ç”¨å±‚ç›‘æ§ï¼š</strong> é€šè¿‡ä¸»åŠ¨æ£€æµ‹æœºåˆ¶ï¼ˆæ­»é”æ£€æµ‹ã€åƒµå°¸å¯¹è±¡æ£€æµ‹ï¼‰å‘ç°æ½œåœ¨é—®é¢˜</li>
</ul>
<p>ç†è§£è¿™ä¸ªåˆ†å±‚ä½“ç³»ï¼Œæœ‰åŠ©äºæˆ‘ä»¬ï¼š</p>
<ul>
<li>é€‰æ‹©åˆé€‚çš„å¼‚å¸¸æ•è·æœºåˆ¶</li>
<li>ç†è§£ä¸åŒå¼‚å¸¸ç±»å‹çš„æ¥æºå’Œå¤„ç†æ–¹å¼</li>
<li>è®¾è®¡å®Œæ•´çš„å¼‚å¸¸ç›‘æ§æ–¹æ¡ˆ</li>
</ul>
<h2 data-id="heading-2">ä¸»æµå¼‚å¸¸ç›‘æ§æ–¹æ¡ˆ</h2>
<p>åœ¨ iOS ç«¯ä¾§å¼‚å¸¸ç›‘æ§é¢†åŸŸï¼ŒPLCrashReporter ä¸ KSCrash æ˜¯æœ€å¸¸ç”¨çš„ä¸¤ä¸ªå†…æ ¸åº“ã€‚ä¸¤è€…éƒ½æ˜¯å¼€æºã€ç”Ÿäº§å¯ç”¨ï¼Œä¸”è¢«å¤šå®¶å¹³å°åŒ–äº§å“æˆ– SDK é‡‡ç”¨ä½œä¸ºåº•å±‚èƒ½åŠ›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f29cd5dfb83449980eb292e7409ed2d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334480&amp;x-signature=nhC8P4pByPRX5VXdRbIYWE%2BUw6Q%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åŸºäºä»¥ä¸Šå¯¹æ¯”åˆ†æï¼ŒKSCrash ç›¸æ¯”å…¶ä»–å´©æºƒç›‘æ§æ¡†æ¶çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼š</p>
<ul>
<li>å¼‚å¸¸ç±»å‹ç›‘æµ‹æ”¯æŒæ›´å…¨é¢ï¼ˆå”¯ä¸€åŒæ—¶æ”¯æŒ C++ å¼‚å¸¸ã€æ­»é”æ£€æµ‹ã€åƒµå°¸å¯¹è±¡æ£€æµ‹çš„å¼€æºæ¡†æ¶ï¼‰</li>
<li>å¼‚æ­¥å®‰å…¨è®¾è®¡ï¼ˆå´©æºƒå¤„ç†å®Œå…¨å¼‚æ­¥å®‰å…¨ï¼ŒåŒé‡å¼‚å¸¸å¤„ç†çº¿ç¨‹ç¡®ä¿å¯é æ€§ï¼‰</li>
<li>æŠ€æœ¯ä¼˜åŠ¿æ˜æ˜¾ï¼ˆå †æ ˆæ¸¸æ ‡æŠ½è±¡ã€å†…å­˜å†…çœã€æ¨¡å—åŒ–æ¶æ„ç­‰ï¼‰</li>
</ul>
<p>åŸºäºä»¥ä¸Šä¼˜åŠ¿ï¼Œæˆ‘ä»¬é€‰æ‹©åŸºäº KSCrash ä½œä¸ºå´©æºƒå¼‚å¸¸ç›‘æ§çš„æ ¸å¿ƒæ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-3">å¼‚å¸¸ç›‘æ§æ–¹æ¡ˆå®ç°</h2>
<h3 data-id="heading-4">æ¶æ„è®¾è®¡</h3>
<p>å¼‚å¸¸é‡‡é›†æ¨¡å—ï¼Œæ˜¯æˆ‘ä»¬ SDK æ•°æ®é‡‡é›†å±‚ä¸€ä¸ªæ¨¡å—çš„å…·ä½“å®ç°ï¼Œå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c4730892e98c423789008773cf0038fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334480&amp;x-signature=d6x5g7bs%2FbB4M4nyDRVhY7qu3G0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li>ç›‘æ§å™¨ç®¡ç†å±‚ï¼šç»Ÿä¸€ç®¡ç†æ‰€æœ‰ç›‘æ§å™¨ï¼Œæä¾›ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†å…¥å£</li>
<li>å¼‚å¸¸æ•è·å±‚ï¼šå¤šç§ç›‘æ§å™¨ï¼Œåˆ†åˆ«æ•è·ä¸åŒç±»å‹çš„å¼‚å¸¸å’ŒçŠ¶æ€ä¿¡æ¯</li>
<li>å¼‚å¸¸å¤„ç†å±‚ï¼šæ„å»ºå´©æºƒä¸Šä¸‹æ–‡ï¼Œæ”¶é›†å †æ ˆã€ç¬¦å·ã€å†…å­˜ç­‰ä¿¡æ¯</li>
<li>æŠ¥å‘Šç”Ÿæˆå±‚ï¼šå°†å´©æºƒä¸Šä¸‹æ–‡è½¬æ¢ä¸º JSON æ ¼å¼æŠ¥å‘Š</li>
</ul>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»‹ç»å„ç§ç±»å‹å¼‚å¸¸çš„æ•è·åŸç†ï¼Œä»¥åŠå¯¹åº”ç›‘æ§å™¨æ˜¯å¦‚ä½•å®ç°çš„ã€‚</p>
<h3 data-id="heading-5">ç³»ç»Ÿå±‚å¼‚å¸¸æ•è·</h3>
<p>ç³»ç»Ÿå±‚å¼‚å¸¸åŒ…æ‹¬ Mach å¼‚å¸¸å’Œ Unix ä¿¡å·ï¼Œæ˜¯åº”ç”¨å±‚å¼‚å¸¸ç›‘æ§çš„ä¸»è¦æ•è·ç‚¹ã€‚æˆ‘ä»¬éœ€è¦åŒæ—¶æ•è·è¿™ä¸¤ç§å¼‚å¸¸ï¼Œç¡®ä¿ä¸é—æ¼ä»»ä½•åº•å±‚å¼‚å¸¸ã€‚</p>
<p><strong>Mach å¼‚å¸¸æ•è·</strong></p>
<p>Mach å¼‚å¸¸æ˜¯ macOS/iOS ç³»ç»Ÿæœ€åº•å±‚çš„å¼‚å¸¸æœºåˆ¶ï¼Œæºäº Mach å¾®å†…æ ¸æ¶æ„ã€‚Mach æ˜¯ macOS/iOS å†…æ ¸çš„åŸºç¡€ï¼Œæä¾›äº†è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰å’Œå¼‚å¸¸å¤„ç†çš„æ ¸å¿ƒæœºåˆ¶ã€‚ç¡¬ä»¶å¼‚å¸¸ï¼ˆCPU å¼‚å¸¸ï¼‰ä¼šè¢« Mach å†…æ ¸æ•è·å¹¶è½¬æ¢ä¸º Mach å¼‚å¸¸æ¶ˆæ¯ã€‚Mach å¼‚å¸¸ä¸ç‰¹å®šçº¿ç¨‹å…³è”ï¼Œå¯ä»¥ç²¾ç¡®æ•è·å¼‚å¸¸å‘ç”Ÿçš„çº¿ç¨‹ã€‚Mach å¼‚å¸¸é€šè¿‡ Mach æ¶ˆæ¯å¼‚æ­¥ä¼ é€’å¼‚å¸¸ä¿¡æ¯ï¼Œéœ€è¦ä½¿ç”¨ Mach ç«¯å£ï¼ˆMach Portï¼‰ä½œä¸ºå¼‚å¸¸å¤„ç†çš„é€šä¿¡é€šé“ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35c0d189c0114803beb1b2c3c7350419~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334480&amp;x-signature=6dddWt9JW1BUAqL59282SzA1J10%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç›‘æ§ Mach å¼‚å¸¸ï¼Œæ¶‰åŠä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒçš„æ­¥éª¤ï¼š</p>
<p><strong>1. åˆ›å»ºå¼‚å¸¸ç«¯å£</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// åˆ›å»ºæ–°çš„å¼‚å¸¸å¤„ç†ç«¯å£</span>
<span class="hljs-built_in">mach_port_allocate</span>(mach_task_self(), MACH_PORT_RIGHT_RECEIVE, &amp;g_exceptionPort);
<span class="hljs-comment">// ç”³è¯·ç«¯å£æƒé™</span>
<span class="hljs-built_in">mach_port_insert_right</span>(mach_task_self(), g_exceptionPort, g_exceptionPort, MACH_MSG_TYPE_MAKE_SEND);
</code></pre>
<p>ä¸ºäº†ä¸ä¸‰æ–¹ SDK å…¼å®¹ï¼Œåœ¨åˆ›å»ºæ–°çš„å¼‚å¸¸å¤„ç†ç«¯å£ä¹‹å‰ï¼Œéœ€è¦å¯¹æ—§çš„å¼‚å¸¸å¤„ç†ç«¯å£è¿›è¡Œä¿å­˜ï¼Œå¹¶åœ¨å¼‚å¸¸å¤„ç†å®Œæ¯•åæ¢å¤æ—§çš„å¼‚å¸¸ç«¯å£ã€‚</p>
<p><strong>2. æ³¨å†Œå¼‚å¸¸å¤„ç†å™¨</strong></p>
<p>æŠŠå¼‚å¸¸å¤„ç†ç«¯å£è®¾ç½®ä¸ºåˆšæ‰åˆ›å»ºçš„ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// è®¾ç½®å¼‚å¸¸ç«¯å£ï¼Œæ•è·æ‰€æœ‰å¼‚å¸¸ç±»å‹</span>
<span class="hljs-built_in">task_set_exception_ports</span>(
    mach_task_self(),
    EXC_MASK_ALL,
    g_exceptionPort,
    EXCEPTION_DEFAULT,
    MACHINE_THREAD_STATE
);
</code></pre>
<p><strong>3. åˆ›å»ºå¼‚å¸¸å¤„ç†çº¿ç¨‹</strong></p>
<p>ä¸ºäº†é˜²æ­¢å¼‚å¸¸å¤„ç†çº¿ç¨‹æœ¬èº«å´©æºƒï¼Œéœ€è¦åˆ›å»ºä¸¤ä¸ªç‹¬ç«‹çš„å¼‚å¸¸å¤„ç†çº¿ç¨‹ï¼š</p>
<ul>
<li>ä¸»å¤„ç†çº¿ç¨‹ï¼šæ­£å¸¸å¤„ç†å¼‚å¸¸</li>
<li>å¤‡ç”¨å¤„ç†çº¿ç¨‹ï¼šä¸»å¤„ç†çº¿ç¨‹å´©æºƒæ—¶çš„åå¤‡ä»½æ–¹æ¡ˆ</li>
</ul>

<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// ä¸»å¼‚å¸¸å¤„ç†çº¿ç¨‹</span>
<span class="hljs-built_in">pthread_create</span>(&amp;g_primaryPThread, &amp;attr, handleExceptions, kThreadPrimary);
<span class="hljs-comment">// å¤‡ç”¨å¼‚å¸¸å¤„ç†çº¿ç¨‹ï¼ˆé˜²æ­¢ä¸»çº¿ç¨‹å´©æºƒï¼‰</span>
<span class="hljs-built_in">pthread_create</span>(&amp;g_secondaryPThread, &amp;attr, handleExceptions, kThreadSecondary);
</code></pre>
<p>ä¸»å¤‡çº¿ç¨‹ä¹‹é—´çš„å…³ç³»å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca5e38d3619b404c86fbae5a052a8be3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334480&amp;x-signature=XzQr3NIkoc132BvsNpFWRMg7rc8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li>å¤‡ç”¨å¤„ç†çº¿ç¨‹åœ¨åˆ›å»ºåä¼šç«‹å³æŒ‚èµ·</li>
<li>ä¸»çº¿ç¨‹åœ¨å¤„ç†å¼‚å¸¸ä¹‹å‰ä¼šé€šè¿‡Â <code>thread_resume()</code> å‡½æ•°æ¢å¤å¤‡ç”¨å¤„ç†çº¿ç¨‹</li>
<li>å¤‡ç”¨å¤„ç†çº¿ç¨‹æ¢å¤åï¼Œä¼šè¿›å…¥Â <code>mach_msg()</code>Â ç­‰å¾…</li>
<li>å¦‚æœä¸»çº¿ç¨‹åœ¨å¤„ç†å¼‚å¸¸æ—¶å‘ç”Ÿå´©æºƒï¼Œå¤‡ç”¨å¤„ç†çº¿ç¨‹å¯ä»¥ç»§ç»­å¤„ç†å´©æºƒä¿¡æ¯ï¼ˆç”±äºå¼‚å¸¸ç«¯å£å·²æ¢å¤ï¼Œæ­¤æ—¶å¤‡ç”¨çº¿ç¨‹å¯èƒ½ä¹Ÿæ”¶ä¸åˆ°æ¶ˆæ¯ï¼‰</li>
</ul>
<p><strong>4. å¤„ç†å¼‚å¸¸æ¶ˆæ¯</strong></p>
<p>å¼‚å¸¸å¤„ç†çº¿ç¨‹é€šè¿‡Â <code>mach_msg()</code>Â æ¥æ”¶å¼‚å¸¸æ¶ˆæ¯ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">mach_msg_return_t <span class="hljs-attr">kr</span> = mach_msg(
Â  Â  &amp;exceptionMessage.header,
Â  Â  MACH_RCV_MSG | MACH_RCV_LARGE,
Â  Â Â 0,
Â  Â Â sizeof(exceptionMessage),
Â  Â  g_exceptionPort,
Â  Â  MACH_MSG_TIMEOUT_NONE,
Â  Â  MACH_PORT_NULL
)<span class="hljs-comment">;</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ae5dc7535ed4d51ad9d3caab43e8d72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334480&amp;x-signature=yHdgCmOAVfmpLNNDLSStow2R7z0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li>æŒ‚èµ·æ‰€æœ‰çº¿ç¨‹ï¼šç¡®ä¿çŠ¶æ€ä¸€è‡´æ€§</li>
<li>æ ‡è®°å·²æ•è·å¼‚å¸¸ï¼šè¿›å…¥å¼‚æ­¥å®‰å…¨æ¨¡å¼</li>
<li>æ¿€æ´»å¤‡ç”¨å¤„ç†çº¿ç¨‹</li>
<li>è¯»å–å¼‚å¸¸çº¿ç¨‹çš„æœºå™¨çŠ¶æ€</li>
<li>åˆå§‹åŒ–å †æ ˆæ¸¸æ ‡</li>
<li>æ„å»ºå¼‚å¸¸ä¸Šä¸‹æ–‡
<ul>
<li>å¼‚å¸¸ç±»å‹</li>
<li>æœºå™¨çŠ¶æ€</li>
<li>åœ°å€ä¿¡æ¯ç­‰</li>
<li>å †æ ˆæ¸¸æ ‡</li>
</ul>
</li>
<li>ç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼šä¸åŒå¼‚å¸¸ç±»å‹ç»Ÿä¸€å¤„ç†</li>
<li>æ¢å¤çº¿ç¨‹</li>
</ul>
<p><strong>Unix ä¿¡å·æ•è·</strong></p>
<p>ä½œä¸º Mach å¼‚å¸¸æ•è·çš„è¡¥å……ï¼Œä¹Ÿéœ€è¦ç›´æ¥æ•è· Unix ä¿¡å·ï¼Œç¡®ä¿åœ¨ Mach å¼‚å¸¸å¤„ç†å¤±è´¥æ—¶ï¼Œä»èƒ½æ•è·åˆ°å´©æºƒã€‚Unix ä¿¡å·çš„æ•è·å¤„ç†æ¶‰åŠï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f6d860e25174edbadabe9c1bafb0d10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334480&amp;x-signature=skXpLyxNJhC%2BTEX27GcWy8BADvw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸ºäº†èƒ½å¤Ÿé€šè¿‡ Unix ä¿¡å·æ•è·åˆ°å¼‚å¸¸ï¼Œéœ€è¦å…ˆå®‰è£…ä¿¡å·å¤„ç†å™¨ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// è·å–ä¿¡å·åˆ—è¡¨
constÂ int* <span class="hljs-attr">fatal_signals</span> = signal_fatal_signals()<span class="hljs-comment">;</span>
// é…ç½®ä¿¡å·åŠ¨ä½œ
structÂ sigaction <span class="hljs-attr">action</span> = {{<span class="hljs-number">0</span>}}<span class="hljs-comment">;</span>
<span class="hljs-attr">action.sa_flags</span> = SA_SIGINFO | SA_ONSTACK<span class="hljs-comment">;</span>
<span class="hljs-attr">action.sa_sigaction</span> = &amp;signal_handle_signals<span class="hljs-comment">;</span>
// å®‰è£…ä¿¡å·å¤„ç†å™¨
sigaction(fatal_signal, &amp;action, &amp;previous_signal_handler)<span class="hljs-comment">;</span>
</code></pre>
<p>Unix ä¿¡å·çš„äº§ç”Ÿä¸»è¦æœ‰ä»¥ä¸‹æƒ…å†µï¼š</p>
<ul>
<li><strong>æ¥è‡ª Mach å¼‚å¸¸ï¼š</strong> å¦‚æœ Mach å¼‚å¸¸æœªè¢«åº”ç”¨å±‚å¤„ç†ï¼Œç³»ç»Ÿä¼šå°†å…¶è½¬æ¢ä¸ºå¯¹åº”çš„ Unix ä¿¡å·</li>
<li><strong>ç›´æ¥äº§ç”Ÿï¼š</strong> å¦‚è°ƒç”¨Â <code>abort()</code>Â ç›´æ¥äº§ç”ŸÂ <code>SIGABRT</code>ï¼Œæˆ– NSException/C++ å¼‚å¸¸æœªæ•è·æ—¶äº§ç”Ÿçš„ä¿¡å·</li>
</ul>
<p>å½“ä¿¡å·äº§ç”Ÿåï¼Œç³»ç»Ÿä¼šæ‰¾åˆ°æˆ‘ä»¬å®‰è£…çš„ä¿¡å·å¤„ç†å™¨ï¼Œå¹¶è°ƒç”¨æˆ‘ä»¬æ³¨å†Œçš„ä¿¡å·å¤„ç†å‡½æ•°ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-type">void</span>Â <span class="hljs-title">signal_handle_signals</span><span class="hljs-params">(<span class="hljs-type">int</span>Â sig_num,Â <span class="hljs-type">siginfo_t</span>Â *signal_info,Â <span class="hljs-type">void</span>* user_context)</span>
</span>{
Â Â <span class="hljs-comment">// sig_num: ä¿¡å·ç¼–ç ï¼Œå¦‚ SIGSEGV=11</span>
Â Â <span class="hljs-comment">// signal_info: ä¿¡å·è¯¦ç»†ä¿¡æ¯</span>
Â Â <span class="hljs-comment">// Â  Â  - si_signo: ä¿¡å·ç¼–ç </span>
Â Â <span class="hljs-comment">// Â  Â  - si_code: ä¿¡å·ä»£ç ï¼Œå¦‚ SEGV_MAPERR</span>
Â Â <span class="hljs-comment">// Â  Â  - si_addr: å¼‚å¸¸åœ°å€</span>
Â Â <span class="hljs-comment">// user_context: CPU å¯„å­˜å™¨çŠ¶æ€</span>
}
</code></pre>
<p>åç»­å¯¹å¼‚å¸¸çš„å¤„ç†ï¼ŒåŒ Mach å¼‚å¸¸å¤„ç†æµç¨‹ã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong> å¹¶éæ‰€æœ‰å¼‚å¸¸éƒ½æºäº Mach å¼‚å¸¸ã€‚ä¾‹å¦‚ï¼ŒNSException æœªæ•è·æ—¶é€šå¸¸ä¼šè°ƒç”¨Â abort()Â äº§ç”ŸÂ SIGABRTÂ ä¿¡å·ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸ç»è¿‡ Mach å¼‚å¸¸ã€‚å› æ­¤ï¼Œå¼‚å¸¸ç›‘æ§éœ€è¦åŒæ—¶æ•è· Mach å¼‚å¸¸ã€Unix ä¿¡å·å’Œè¿è¡Œæ—¶å¼‚å¸¸å¤„ç†å™¨ã€‚</p>
<p><strong>æœºå™¨ä¸Šä¸‹æ–‡å †æ ˆ</strong></p>
<p>åœ¨å´©æºƒå‘ç”Ÿæ—¶ï¼Œå †æ ˆè¿½è¸ªå¯ä»¥å¸®åŠ©å¼€å‘è€…å®šä½é—®é¢˜å‘ç”Ÿçš„ä»£ç ä½ç½®ã€‚åœ¨åŸºäº Mach æˆ– Unix ä¿¡å·æ•è·çš„åœºæ™¯ï¼Œéœ€è¦ä» CPU å¯„å­˜å™¨å’Œå †æ ˆå†…å­˜ä¸­æ¢å¤å®Œæ•´çš„è°ƒç”¨æ ˆã€‚æ ¸å¿ƒåŸç†ï¼šæ¯ä¸ªå‡½æ•°è°ƒç”¨ï¼Œéƒ½ä¼šåœ¨å †æ ˆä¸Šåˆ›å»ºä¸€ä¸ªå †æ ˆå¸§ï¼ŒåŒ…å«ï¼š</p>
<ul>
<li>è¿”å›åœ°å€ï¼šå‡½æ•°è¿”å›åç»§ç»­æ‰§è¡Œçš„åœ°å€</li>
<li>å¸§æŒ‡é’ˆï¼ˆFPï¼‰ï¼šæŒ‡å‘å½“å‰å †æ ˆå¸§çš„æŒ‡é’ˆ</li>
<li>å±€éƒ¨å˜é‡ï¼šå‡½æ•°çš„å±€éƒ¨å˜é‡</li>
<li>å‚æ•°ï¼šä¼ é€’ç»™å‡½æ•°çš„å‚æ•°</li>
</ul>
<p>ä»¥ ARM64 æ¶æ„ä¸ºä¾‹ï¼Œå †æ ˆå¸ƒå±€å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/099216b95aa4478cac47a9cd15ac3e98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334480&amp;x-signature=YtbZzRyYfPBZadWwgKPFTBEm%2BAw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸ºäº†è¿˜åŸå´©æºƒå‘ç”Ÿæ—¶çš„è°ƒç”¨æ ˆï¼Œæˆ‘ä»¬éœ€è¦å¯¹å †æ ˆå¸§è¿›è¡Œéå†ã€‚å †æ ˆå¸§éå†çš„æ ¸å¿ƒåŸç†æ˜¯é€šè¿‡å¸§æŒ‡é’ˆé“¾å‘ä¸Šéå†ï¼š</p>
<ol>
<li>ç¬¬ 1 å¸§ï¼šä» PC å¯„å­˜å™¨è·å–å½“å‰å´©æºƒç‚¹</li>
<li>ç¬¬ 2 å¸§ï¼šä» LR å¯„å­˜å™¨è·å–è°ƒç”¨è€…</li>
<li>ç¬¬ 3 å¸§åŠä»¥åï¼šé€šè¿‡å¸§æŒ‡é’ˆé“¾ä»å †æ ˆå†…å­˜ä¸­è¯»å–</li>
</ol>
<p>å †æ ˆå¸§éå†çš„å®Œæ•´æµç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e2e5e22119d4b01a814ca6696db3e5a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334480&amp;x-signature=bz2WYghwQBfsVqw5G%2Bhjp7th4N4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨å †æ ˆéå†è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸‹é¢å‡ ä¸ªå…³é”®ç‚¹éœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li>åœ¨éå†å †æ ˆæ—¶ï¼Œå¿…é¡»å®‰å…¨åœ°è®¿é—®å†…å­˜ï¼Œé˜²æ­¢è®¿é—®æ— æ•ˆå†…å­˜å¯¼è‡´å´©æºƒ</li>
<li>å †æ ˆæº¢å‡ºæ£€æµ‹ï¼Œé˜²æ­¢åœ¨å †æ ˆæŸåæ—¶æ— é™éå†</li>
<li>åœ°å€è§„èŒƒåŒ–ï¼Œä¸åŒ CPU æ¶æ„çš„åœ°å€å¯èƒ½æœ‰ç‰¹æ®Šæ ‡è®°ï¼Œéœ€è¦è§„èŒƒåŒ–å¤„ç†</li>
</ul>
<h3 data-id="heading-6">è¿è¡Œæ—¶å¼‚å¸¸æ•è·</h3>
<p>è¿è¡Œæ—¶å¼‚å¸¸åŒ…æ‹¬ NSException å’Œ C++ å¼‚å¸¸ï¼Œé€šå¸¸ç”±ç¼–ç¨‹é”™è¯¯å¼•èµ·ã€‚æˆ‘ä»¬éœ€è¦é€šè¿‡è®¾ç½®å¼‚å¸¸å¤„ç†å™¨æ¥æ•è·è¿™äº›æœªå¤„ç†çš„å¼‚å¸¸ã€‚</p>
<p><strong>NSException å¼‚å¸¸æ•è·</strong></p>
<p>iOS éœ€è¦é€šè¿‡è®¾ç½®Â <code>NSUncaughtExceptionHandler</code>Â æ¥æ•è·æœªæ•è·çš„Â <code>NSException</code>ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// åœ¨è®¾ç½®exception handlerä¹‹å‰ï¼Œå…ˆä¿å­˜ä¹‹å‰çš„è®¾ç½®</span>
NSUncaughtExceptionHandlerÂ *previous_uncaught_exceptionhandler =Â <span class="hljs-built_in">NSGetUncaughtExceptionHandler</span>();
<span class="hljs-comment">// è®¾ç½®æˆ‘ä»¬çš„exception handler</span>
<span class="hljs-built_in">NSSetUncaughtExceptionHandler</span>(&amp;handle_uncaught_exception);
</code></pre>
<p>å½“Â <code>Objective-C</code> ä»£ç æŠ›å‡ºå¼‚å¸¸ï¼Œä¸”æœªè¢«Â <code>@catch</code> å—æ•è·æ—¶ï¼Œ<code>Objective-C</code>Â è¿è¡Œæ—¶ä¼šè°ƒç”¨æˆ‘ä»¬è®¾ç½®çš„å¼‚å¸¸å¤„ç†å™¨ã€‚åœ¨å¤„ç†å®ŒÂ <code>NSException</code> å¼‚å¸¸åï¼Œè¿˜éœ€è¦ä¸»åŠ¨è°ƒç”¨Â <code>previous_uncaught_exceptionhandler</code>ï¼Œä»¥ä¾¿å…¶ä»–å¼‚å¸¸å¤„ç†å™¨èƒ½å¤Ÿæ­£ç¡®å¤„ç†å¼‚å¸¸ã€‚</p>
<p>æ³¨æ„ï¼šåœ¨å¼‚å¸¸ç›‘æ§åœºæ™¯ä¸­ï¼Œé€šå¸¸éœ€è¦åœ¨ handler ä¸­æ”¶é›†å®Œå´©æºƒä¿¡æ¯åï¼Œä¸»åŠ¨è°ƒç”¨Â <code>abort()</code>Â æ¥ç»ˆæ­¢ç¨‹åºï¼Œç¡®ä¿ç¨‹åºä¸ä¼šåœ¨å¼‚å¸¸çŠ¶æ€ä¸‹ç»§ç»­è¿è¡Œã€‚</p>
<p>åœ¨æ•è·åˆ° NSException å¼‚å¸¸ä¹‹åï¼Œä¸€èˆ¬é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å– Objective-C çš„è°ƒç”¨æ ˆä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// NSException æä¾›äº† callStackReturnAddresses
NSArray* <span class="hljs-attr">addresses</span> = [exception callStackReturnAddresses]<span class="hljs-comment">;</span>
</code></pre>
<p>é€šè¿‡Â [NSException callStackReturnAddresses]Â è·å–åˆ°Â return addressÂ ä¹‹åï¼Œè¿˜éœ€è¦è¿›ä¸€æ­¥å¤„ç†ï¼Œå¦‚ï¼šè¿‡æ»¤æ‰æ— æ•ˆåœ°å€ç­‰ã€‚</p>
<p><strong>C++ å¼‚å¸¸æ•è·</strong></p>
<p>é€šè¿‡è®¾ç½® C++ terminate handler å¯ä»¥æ•è·æœªå¤„ç†çš„ CÂ å¼‚å¸¸ã€‚å½“ CÂ å¼‚å¸¸æœªè¢«æ•è·æ—¶ï¼ŒC++ è¿è¡Œæ—¶ä¼šè°ƒç”¨Â std::terminate()ï¼Œæˆ‘ä»¬é€šè¿‡æ‹¦æˆªè¿™ä¸ªè°ƒç”¨æ¥æ•è·å¼‚å¸¸ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// ä¿å­˜åŸå§‹ terminate handler</span>
<span class="hljs-built_in">std</span>::terminate_handler original_terminate_handler = <span class="hljs-built_in">std</span>::get_terminate();
<span class="hljs-comment">// è®¾ç½®æˆ‘ä»¬çš„ terminate handler</span>
<span class="hljs-built_in">std</span>::set_terminate(cpp_exception_terminate_handler);
</code></pre>
<p>å½“ CÂ ä»£ç æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œthrow è¯­å¥ä¼šè°ƒç”¨Â <code>__cxa_throw()</code>ï¼ŒCÂ è¿è¡Œæ—¶ä¼šæŸ¥æ‰¾åŒ¹é…çš„Â <code>catch</code> å—ï¼Œå¦‚æœæœªæ‰¾åˆ°å¼‚å¸¸ä¼šç»§ç»­å‘ä¸Šä¼ æ’­ã€‚å½“å¼‚å¸¸æœªè¢«æ•è·æ—¶ï¼š</p>
<ol>
<li>C++ è¿è¡Œæ—¶ä¼šè°ƒç”¨Â <code>std::terminate()</code></li>
<li><code>std::terminate()</code> ä¼šè°ƒç”¨å·²æ³¨å†Œçš„ terminate handler</li>
<li>æˆ‘ä»¬è®¾ç½®çš„Â <code>cpp_exception_terminate_handler</code> ä¼šè¢«è°ƒç”¨</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bcb389325124486098131f56af994f28~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334480&amp;x-signature=ULSbW9hGyFRtAc%2BKSLiodN0aVdk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨æˆ‘ä»¬çš„ terminate handler ä¸­å¤„ç†å®Œå¼‚å¸¸åï¼Œè¿˜éœ€è¦è°ƒç”¨åŸå§‹çš„ terminate handlerï¼Œä»¥ä¾¿å…¶ä»–å¼‚å¸¸å¤„ç†å™¨èƒ½æ­£ç¡®å¤„ç†å¼‚å¸¸ã€‚</p>
<h3 data-id="heading-7">åº”ç”¨å±‚å¼‚å¸¸æ•è·</h3>
<p>åº”ç”¨å±‚å¼‚å¸¸åŒ…æ‹¬ä¸šåŠ¡é€»è¾‘å¼‚å¸¸å’Œæ€§èƒ½é—®é¢˜ï¼Œéœ€è¦åº”ç”¨å±‚ä¸»åŠ¨ç›‘æ§å’Œæ£€æµ‹ã€‚ä¸»è¦åŒ…æ‹¬ä¸»çº¿ç¨‹æ­»é”æ£€æµ‹å’Œåƒµå°¸å¯¹è±¡æ£€æµ‹ã€‚</p>
<p><strong>ä¸»çº¿ç¨‹æ­»é”æ£€æµ‹</strong></p>
<p>ä¸»çº¿ç¨‹æ­»é”ï¼ˆDeadlockï¼‰æ˜¯ iOS å¼€å‘ä¸­ä¸€ç§ä¸¥é‡çš„è¿è¡Œæ—¶é—®é¢˜ï¼Œä¼šå¯¼è‡´ App ç•Œé¢å®Œå…¨å¡æ­»ï¼ˆæ— å“åº”ï¼‰ï¼Œæœ€ç»ˆé€šå¸¸ä¼šè¢«ç³»ç»Ÿçš„çœ‹é—¨ç‹—ï¼ˆWatchdogï¼‰å¼ºåˆ¶ç»ˆæ­¢ã€‚</p>
<p>é’ˆå¯¹è¿™ç±»é—®é¢˜ï¼Œä¸€ç§å¯è¡Œçš„æ–¹å¼æ˜¯é€šè¿‡â€œçœ‹é—¨ç‹—â€æœºåˆ¶æ£€æµ‹ä¸»çº¿ç¨‹æ­»é”ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6487ae311c5479ba0924a7605ce55eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334480&amp;x-signature=0n%2BwJEAMGc6wAHg5EBkWJKgwXm0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ol>
<li>ç›‘æ§çº¿ç¨‹ï¼šç‹¬ç«‹çš„ç›‘æ§çº¿ç¨‹ï¼Œå®šæœŸæ£€æŸ¥ä¸»çº¿ç¨‹çŠ¶æ€</li>
<li>å¿ƒè·³æœºåˆ¶ï¼šå‘ä¸»çº¿ç¨‹å‘é€â€œå¿ƒè·³â€ä»»åŠ¡ï¼Œæ£€æŸ¥æ˜¯å¦åŠæ—¶å“åº”</li>
<li>æ­»é”åˆ¤å®šï¼šå¦‚æœä¸»é˜Ÿåˆ—åœ¨æŒ‡å®šæ—¶é—´å†…æœªå“åº”ï¼Œåˆ™åˆ¤å®šä¸ºæ­»é”</li>
</ol>
<p><strong>éœ€è¦æ³¨æ„ï¼š</strong></p>
<ul>
<li>è¯¯æŠ¥é£é™©ï¼šå¦‚æœä¸»çº¿ç¨‹æœ‰é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ï¼Œå¯èƒ½äº§ç”Ÿè¯¯æŠ¥</li>
<li>è¶…æ—¶æ—¶é—´ï¼šéœ€è¦æ ¹æ®åº”ç”¨å®é™…æƒ…å†µï¼Œè°ƒæ•´è¶…æ—¶æ—¶é—´ï¼Œé¿å…è¯¯æŠ¥</li>
</ul>
<p><strong>åƒµå°¸å¯¹è±¡æ£€æµ‹</strong></p>
<p>iOS åƒµå°¸å¯¹è±¡ï¼ˆZombie Objectï¼‰æ˜¯ iOS å¼€å‘ä¸­å¯¼è‡´åº”ç”¨å´©æºƒï¼ˆCrashï¼‰æœ€å¸¸è§çš„å†…å­˜é—®é¢˜ä¹‹ä¸€ã€‚åƒµå°¸å¯¹è±¡æ˜¯æŒ‡å·²ç»è¢«é‡Šæ”¾ï¼ˆdeallocï¼‰çš„å†…å­˜å—ï¼Œä½†å¯¹åº”çš„æŒ‡é’ˆä»ç„¶æŒ‡å‘è¿™å—å†…å­˜ï¼Œå¹¶ä¸”ä»£ç è¯•å›¾é€šè¿‡è¿™ä¸ªæŒ‡é’ˆå»è®¿é—®å®ƒï¼ˆå‘é€æ¶ˆæ¯ï¼‰ã€‚è®¿é—®åƒµå°¸å¯¹è±¡å¯èƒ½ä¼šå¯¼è‡´å´©æºƒï¼Œé€šå¸¸è¡¨ç°ä¸ºÂ <code>EXC_BAD_ACCESS</code> å´©æºƒã€‚</p>
<ul>
<li>è¿™æ˜¯ä¸€ä¸ªå†…å­˜è®¿é—®é”™è¯¯ï¼Œæ„å‘³ç€ä½ è¯•å›¾è®¿é—®ä¸€å—ä½ æ— æ³•è®¿é—®æˆ–æ— æ•ˆçš„å†…å­˜ã€‚</li>
<li>å› ä¸ºè¿™å—å†…å­˜å¯èƒ½å·²ç»è¢«ç³»ç»Ÿå›æ”¶å¹¶åˆ†é…ç»™äº†å…¶ä»–å¯¹è±¡ï¼Œæˆ–è€…å˜æˆäº†ä¸€å—æ‚ä¹±çš„æ•°æ®åŒºåŸŸï¼Œæ‰€ä»¥è®¿é—®ç»“æœæ˜¯ä¸å¯é¢„çŸ¥çš„ã€‚</li>
</ul>
<p>äº§ç”Ÿåƒµå°¸å¯¹è±¡çš„åŸå› ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li><strong>unsafe_unretained æˆ– assign æŒ‡é’ˆï¼š</strong> å¦‚æœä¸€ä¸ªå±æ€§è¢«ä¿®é¥°ä¸º assignï¼ˆä¿®é¥°å¯¹è±¡æ—¶ï¼‰æˆ– unsafe_unretainedï¼Œå½“å¯¹è±¡è¢«é‡Šæ”¾åï¼ŒæŒ‡é’ˆä¸ä¼šè‡ªåŠ¨ç½®ä¸º nilï¼ˆå˜æˆæ‚¬å‚æŒ‡é’ˆï¼‰ã€‚æ­¤æ—¶å†æ¬¡è®¿é—®å°±ä¼šå˜æˆåƒµå°¸å¯¹è±¡è®¿é—®</li>
<li><strong>å¤šçº¿ç¨‹ç«äº‰ï¼š</strong> çº¿ç¨‹ A åˆšåˆšé‡Šæ”¾äº†å¯¹è±¡ï¼Œä½†çº¿ç¨‹ B å‡ ä¹åŒæ—¶åœ¨å°è¯•è®¿é—®è¯¥å¯¹è±¡</li>
<li><strong>CoreFoundation ä¸ ARC çš„æ¡¥æ¥ä¸å½“ï¼š</strong> åœ¨ä½¿ç”¨Â <code>__bridgeï¼Œ__bridge_transfer</code> ç­‰è½¬æ¢æ—¶ï¼Œæ‰€æœ‰æƒç®¡ç†æ··ä¹±å¯¼è‡´å¯¹è±¡è¿‡æ—©é‡Šæ”¾</li>
<li>Block æˆ– Delegate å¾ªç¯å¼•ç”¨ï¼šæŸäº›è€æ—§ä»£ç ä¸­ Delegate ä¾ç„¶ä½¿ç”¨ assign ä¿®é¥°</li>
</ul>
<p>åƒµå°¸å¯¹è±¡æ£€æµ‹çš„ä¸»è¦æ€è·¯æ˜¯ï¼š</p>
<ol>
<li>hookÂ <code>NSObject</code>Â å’ŒÂ <code>NSProxy</code>Â çš„Â <code>dealloc</code>Â æ–¹æ³•</li>
<li>åœ¨å¯¹è±¡é‡Šæ”¾æ—¶ï¼Œè®¡ç®—å¯¹è±¡çš„ hashï¼Œç„¶åè®°å½• class ä¿¡æ¯</li>
<li>æ£€æµ‹æ˜¯å¦ä¸º NSExceptionï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ä¿å­˜å¼‚å¸¸è¯¦æƒ…</li>
<li>å„ç±»å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œè¯»å–ä¿å­˜çš„å¼‚å¸¸è¯¦æƒ…</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7c0d27c2c47429193d02f1d7c870287~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334480&amp;x-signature=LMI%2Bq89hqhBpfdHcBQU6d2Wjp3Y%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li>ä¸ºäº†é™ä½ CPU å’Œå†…å­˜å ç”¨ï¼Œåƒµå°¸å¯¹è±¡çš„è®°å½•ä¸Šé™æ˜¯Â <code>0x8000</code> ä¸ªï¼Œå³ï¼š32768</li>
<li>è®¡ç®—å“ˆå¸Œæ—¶ï¼Œé€šè¿‡Â <code>((uintptr_t)object &gt;&gt; (sizeof(uintptr_t) - 1)) &amp; 0x7FFF</code> è®¡ç®—</li>
</ul>
<p>è¿™æ˜¯ä¸€ç§è®¾è®¡æƒè¡¡çš„ç»“æœã€‚å› ä¸ºè¿™ç§æ£€æµ‹æ–¹å¼å¹¶ä¸æ˜¯éå¸¸å‡†ç¡®ï¼Œä¸èƒ½æ•è·æ‰€æœ‰åƒµå°¸å¯¹è±¡ã€‚å› ä¸º hash çš„è®¡ç®—ä¼šäº§ç”Ÿä¸€å®šçš„ç¢°æ’ï¼Œå¯¼è‡´å¯¹è±¡è¢«è¦†ç›–ï¼Œå¯èƒ½ä¼šäº§ç”Ÿè¯¯æŠ¥æˆ–é”™è¯¯çš„ç±»å‹ã€‚</p>
<h3 data-id="heading-8">è¿è¡Œæ—¶ç¬¦å·åŒ–</h3>
<p>åœ¨å¼‚å¸¸ç›‘æ§ç³»ç»Ÿä¸­ï¼Œé™¤äº†éœ€è¦æ£€æµ‹å’Œè®°å½•å¼‚å¸¸ç±»å‹ï¼ˆå¦‚åƒµå°¸å¯¹è±¡è®¿é—®ã€ä¸»çº¿ç¨‹æ­»é”ç­‰ï¼‰ï¼Œè¿˜éœ€è¦å¤„ç†å¼‚å¸¸å‘ç”Ÿæ—¶çš„å †æ ˆä¿¡æ¯ã€‚å †æ ˆä¿¡æ¯é€šå¸¸ä»¥å†…å­˜åœ°å€çš„å½¢å¼å­˜åœ¨ï¼Œè¿™äº›åœ°å€å¯¹äºå¼€å‘è€…æ¥è¯´æ˜¯ä¸å¯è¯»çš„ã€‚ä¸ºäº†èƒ½å¤Ÿå¿«é€Ÿå®šä½é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™äº›å†…å­˜åœ°å€è½¬æ¢ä¸ºå¯è¯»çš„å‡½æ•°åã€æ–‡ä»¶åå’Œè¡Œå·ä¿¡æ¯ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯ç¬¦å·åŒ–ï¼ˆSymbolicationï¼‰ã€‚</p>
<p>ç¬¦å·åŒ–ä¸€èˆ¬åˆ†ä¸ºä¸¤ç§ï¼š</p>
<ul>
<li>è¿è¡Œæ—¶ç¬¦å·åŒ–ï¼šä½¿ç”¨Â <code>dladdr()</code>Â è·å–ç¬¦å·ä¿¡æ¯ï¼ˆå‡½æ•°åã€é•œåƒåç­‰ï¼‰</li>
<li>å®Œæ•´ç¬¦å·åŒ–ï¼šä½¿ç”¨Â <code>dSYM</code> æ–‡ä»¶è·å–æ–‡ä»¶åå’Œè¡Œå·</li>
</ul>
<p>è¿è¡Œæ—¶ç¬¦å·åŒ–åªèƒ½è·å–å…¬å¼€ç¬¦å·ã€‚</p>
<p>æˆ‘ä»¬ä¸»è¦è®¨è®º iOS å¹³å°ä¸Šå¦‚ä½•åœ¨è¿è¡Œæ—¶ç¬¦å·åŒ–ã€‚iOS å¹³å°ä¸»è¦é€šè¿‡Â <code>dladdr()</code> è¿›è¡Œè¿è¡Œæ—¶ç¬¦å·åŒ–ï¼Œé€šè¿‡Â <code>dladdr()</code> å¯ä»¥è·å–åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š</p>
<ul>
<li>imageAddressï¼šimage é•œåƒåŸºå€</li>
<li>imageNameï¼šimage é•œåƒè·¯å¾„</li>
<li>symbolAddressï¼šç¬¦å·åœ°å€</li>
<li>symbolNameï¼šç¬¦å·åç§°</li>
</ul>
<p>ç”±äºåœ¨ç¬¦å·åŒ–æ—¶ï¼Œæˆ‘ä»¬éœ€è¦çš„æ˜¯è°ƒç”¨æŒ‡ä»¤çš„åœ°å€ï¼Œä½†å †æ ˆä¸Šå­˜å‚¨çš„æ˜¯è¿”å›åœ°å€ï¼Œå› æ­¤éœ€è¦å¯¹åœ°å€è°ƒæ•´ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">å‡½æ•°è°ƒç”¨è¿‡ç¨‹ï¼š
<span class="hljs-number">1</span>.Â è°ƒç”¨æŒ‡ä»¤ï¼šcall function_name Â (åœ°å€: <span class="hljs-number">0</span>x1000)
<span class="hljs-number">2</span>. å‡½æ•°æ‰§è¡Œï¼š<span class="hljs-built_in">function_name</span>() Â  Â  (åœ°å€: <span class="hljs-number">0</span>x2000)
<span class="hljs-number">3</span>.Â è¿”å›åœ°å€ï¼š<span class="hljs-number">0</span>x1001 Â  Â  Â  Â  Â  Â  Â (å­˜å‚¨åœ¨å †æ ˆä¸Š)
å †æ ˆä¸Šå­˜å‚¨çš„æ˜¯è¿”å›åœ°å€ï¼ˆ<span class="hljs-number">0</span>x1001ï¼‰ï¼Œ
ä½†æˆ‘ä»¬éœ€è¦çš„æ˜¯è°ƒç”¨æŒ‡ä»¤çš„åœ°å€ï¼ˆ<span class="hljs-number">0</span>x1000ï¼‰ï¼Œæ‰€ä»¥éœ€è¦å‡ <span class="hljs-number">1</span>ã€‚
</code></pre>
<p>ä¸åŒ CPU æ¶æ„å¯¹åº”çš„åœ°å€è°ƒæ•´æœ‰æ‰€ä¸åŒï¼Œä»¥ ARM64 ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">uintptr_tÂ <span class="hljs-attr">address</span> = (return_address &amp;~Â <span class="hljs-number">3</span>UL) -Â <span class="hljs-number">1</span><span class="hljs-comment">;</span>
</code></pre>
<p>è¿è¡Œæ—¶ç¬¦å·åŒ–çš„å®Œæ•´æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb54f323bba147a8918aeb3f53574e3b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334480&amp;x-signature=Ax3vBc8u8orTPHE5xV3Vj9O7deI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-9">å¼‚æ­¥å®‰å…¨</h3>
<p>é™¤äº†ä»¥ä¸Šå†…å®¹å¤–ï¼Œåœ¨å¤„ç† iOS å¹³å°å¼‚å¸¸æ•è·æ—¶ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å…³æ³¨å¼‚æ­¥å®‰å…¨ã€‚</p>
<p>åœ¨ Unix ä¿¡å·å¤„ç†å‡½æ•°ï¼Œæˆ– Mach å¼‚å¸¸å¤„ç†ä¸­ï¼Œåªèƒ½ä½¿ç”¨å¼‚æ­¥å®‰å…¨å‡½æ•°ï¼Œä¸»è¦æ˜¯å› ä¸ºï¼š</p>
<ul>
<li>å´©æºƒæ—¶ç³»ç»ŸçŠ¶æ€ä¸ç¨³å®š</li>
<li>å¯èƒ½æŒæœ‰é”ï¼Œè°ƒç”¨éå¼‚æ­¥å®‰å…¨å‡½æ•°å¯èƒ½å¯¼è‡´æ­»é”</li>
<li>å †å¯èƒ½å·²æŸåï¼Œæ­¤æ—¶åˆ†é…å†…å­˜å¯èƒ½ä¼šå¤±è´¥</li>
</ul>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ<code>malloc()</code>ã€<code>free()</code>ã€<code>NSLog()</code>ã€<code>printf()</code>ï¼ŒObjective-CÂ æ–¹æ³•çš„è°ƒç”¨ï¼Œä»»ä½•å¯èƒ½åˆ†é…å†…å­˜çš„å‡½æ•°éƒ½ä¸å…è®¸åœ¨å¤„ç†å¼‚å¸¸è¿‡ç¨‹ä¸­è°ƒç”¨ã€‚</p>
<h2 data-id="heading-10">ç»“è¯­å’Œå±•æœ›</h2>
<p>æœ¬æ–‡ä¸»è¦ä»‹ç»äº†å½“ä¸‹ä¸»æµçš„ iOS å¼‚å¸¸ç›‘æ§æ–¹æ¡ˆï¼Œå’ŒåŸºäº KSCrash çš„å¼‚å¸¸ç›‘æ§å®ç°ç»†èŠ‚ï¼ŒåŒ…æ‹¬ Machã€Unix ä¿¡å·ã€NSException ç­‰å¼‚å¸¸ç±»å‹çš„æ•è·çš„å¤„ç†ç­‰ã€‚å¼‚å¸¸ç›‘æ§èƒ½åŠ›è¿˜åœ¨æŒç»­è¿›åŒ–ï¼Œåç»­è¿˜æœ‰ä¸å°‘å¯ä»¥ä¼˜åŒ–å’Œæå‡çš„ç‚¹ï¼Œå¦‚æ”¯æŒå®æ—¶ä¸Šä¼ å’Œå´©æºƒå›è°ƒï¼Œæ”¯æŒ App æ—¥å¿—è®°å½•ï¼Œdump å¯„å­˜å™¨åœ°å€é™„è¿‘å†…å­˜ç­‰ã€‚ç›®å‰è¿™å¥—æ–¹æ¡ˆå·²ç»åº”ç”¨åœ¨é˜¿é‡Œäº‘ç”¨æˆ·ä½“éªŒç›‘æ§ RUM iOS SDK ä¸­ï¼Œæ‚¨å¯ä»¥å‚è€ƒæ¥å…¥æ–‡æ¡£ <strong>[</strong> <strong>1]</strong> ä½“éªŒä½¿ç”¨ã€‚é˜¿é‡Œäº‘ RUM SDK å½“å‰ä¹Ÿæ”¯æŒ Android ã€ HarmonyOS ã€Web ç­‰å¹³å°ä¸‹å¼‚å¸¸ç›‘æ§èƒ½åŠ›ã€‚ç›¸å…³é—®é¢˜å¯ä»¥åŠ å…¥â€œRUMç”¨æˆ·ä½“éªŒç›‘æ§æ”¯æŒç¾¤â€ï¼ˆé’‰é’‰ç¾¤å·ï¼š67370002064ï¼‰è¿›è¡Œå’¨è¯¢ã€‚</p>
<p><strong>ç›¸å…³é“¾æ¥ï¼š</strong></p>
<p>[1]Â æ¥å…¥æ–‡æ¡£</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Farms%2Fuser-experience-monitoring%2Fmonitor-ios-apps%2F" target="_blank" title="https://help.aliyun.com/zh/arms/user-experience-monitoring/monitor-ios-apps/" ref="nofollow noopener noreferrer">help.aliyun.com/zh/arms/useâ€¦</a></p>
<p>ç‚¹å‡»<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Farms%3Fspm%3Da1z389.11499242.0.0.65452413yOc5rP%26utm_content%3Dg_1000408142" target="_blank" title="https://www.aliyun.com/product/arms?spm=a1z389.11499242.0.0.65452413yOc5rP&amp;utm_content=g_1000408142" ref="nofollow noopener noreferrer">æ­¤å¤„</a>æŸ¥çœ‹äº§å“è¯¦æƒ…ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java ä¸‰å…ƒè¡¨è¾¾å¼ï¼ˆ?:ï¼‰çš„å¸¸è§å‘æ€»ç»“]]></title>    <link>https://juejin.cn/post/7587769767851851822</link>    <guid>https://juejin.cn/post/7587769767851851822</guid>    <pubDate>2025-12-26T06:12:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587769767851851822" data-draft-id="7587779957675311155" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" Java ä¸‰å…ƒè¡¨è¾¾å¼ï¼ˆ?:ï¼‰çš„å¸¸è§å‘æ€»ç»“"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-12-26T06:12:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="sinoçˆ±å­¦ä¹ "/> <meta itemprop="url" content="https://juejin.cn/user/1873223544473431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             Java ä¸‰å…ƒè¡¨è¾¾å¼ï¼ˆ?:ï¼‰çš„å¸¸è§å‘æ€»ç»“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1873223544473431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    sinoçˆ±å­¦ä¹ 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T06:12:40.000Z" title="Fri Dec 26 2025 06:12:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">Java ä¸‰å…ƒè¡¨è¾¾å¼ï¼ˆ?:ï¼‰çš„å¸¸è§å‘æ€»ç»“</h3>
<p>Java ä¸­çš„ä¸‰å…ƒè¡¨è¾¾å¼è¯­æ³•ï¼š<code>condition ? expr1 : expr2</code>ï¼Œçœ‹ä¼¼ç®€å•ï¼Œä½†ç”±äºç±»å‹æ¨æ–­ã€è‡ªåŠ¨è£…ç®±/æ‹†ç®±ã€ä¼˜å…ˆçº§ç­‰æœºåˆ¶ï¼Œå®¹æ˜“è¸©å‘ã€‚ä¸‹é¢æ€»ç»“ä¸€äº›æœ€å¸¸è§çš„å‘åŠé¿å…æ–¹æ³•ï¼š</p>
<ol>
<li>
<p><strong>è‡ªåŠ¨æ‹†ç®±å¯¼è‡´çš„ NullPointerExceptionï¼ˆæœ€ç»å…¸å‘ï¼‰</strong><br/>
å½“ç¬¬äºŒæˆ–ç¬¬ä¸‰æ“ä½œæ•°æ˜¯åŒ…è£…ç±»å‹ï¼ˆå¦‚ Booleanã€Integerï¼‰ï¼Œä¸”å€¼ä¸º null æ—¶ï¼Œä¼šè§¦å‘è‡ªåŠ¨æ‹†ç®±æˆåŸºæœ¬ç±»å‹ï¼Œå¯¼è‡´ NPEã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Boolean</span> <span class="hljs-variable">flag</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
<span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> flag ? <span class="hljs-string">"true"</span> : <span class="hljs-string">"false"</span>;  <span class="hljs-comment">// è¿è¡Œæ—¶ NullPointerException</span>
</code></pre>
<p><strong>åŸå› </strong>ï¼šä¸‰å…ƒè¡¨è¾¾å¼è¦æ±‚ expr1 å’Œ expr2 æœ‰å…±åŒç±»å‹ï¼ŒJava ä¼šå°è¯•æ‹†ç®± Boolean â†’ booleanï¼Œä½† null æ— æ³•æ‹†ç®±ã€‚<br/>
<strong>é¿å…</strong>ï¼šæ˜¾å¼åˆ¤ nullï¼Œæˆ–ä½¿ç”¨ Objects ç­‰å·¥å…·ç±»ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> flag == <span class="hljs-literal">null</span> ? <span class="hljs-string">"default"</span> : (flag ? <span class="hljs-string">"true"</span> : <span class="hljs-string">"false"</span>);
</code></pre>
</li>
<li>
<p><strong>ç±»å‹ä¸åŒ¹é…å¯¼è‡´æ„å¤–çš„ç±»å‹æå‡</strong><br/>
ç¬¬äºŒå’Œç¬¬ä¸‰æ“ä½œæ•°çš„ç±»å‹å¿…é¡»å…¼å®¹ï¼ŒJava ä¼šé€‰æ‹©â€œæ›´å®½â€çš„ç±»å‹è¿›è¡Œæå‡ï¼Œå¯èƒ½å¯¼è‡´ç²¾åº¦ä¸¢å¤±æˆ–æ„å¤–ç»“æœã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
<span class="hljs-type">long</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;
<span class="hljs-type">var</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span> ? a : b;  <span class="hljs-comment">// result ç±»å‹æ˜¯ longï¼Œè€Œä¸æ˜¯ int</span>
</code></pre>
<p>å¦ä¸€ä¸ªå¸¸è§ä¾‹å­ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">byte</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>, y = <span class="hljs-number">2</span>;
<span class="hljs-type">byte</span> <span class="hljs-variable">z</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span> ? x : y;  <span class="hljs-comment">// ç¼–è¯‘é”™è¯¯ï¼å› ä¸ºæå‡ä¸º int</span>
</code></pre>
<p><strong>é¿å…</strong>ï¼šæ˜¾å¼å¼ºè½¬ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">byte</span> <span class="hljs-variable">z</span> <span class="hljs-operator">=</span> (<span class="hljs-type">byte</span>)(<span class="hljs-literal">true</span> ? x : y);
</code></pre>
</li>
<li>
<p><strong>è¿”å›ç±»å‹æ˜¯å¼•ç”¨ç±»å‹æ—¶ï¼Œå¯èƒ½è¿”å› null å¯¼è‡´åç»­ NPE</strong><br/>
å³ä½¿æ¡ä»¶åˆ¤æ–­æ²¡é—®é¢˜ï¼Œå¦‚æœè¿”å› nullï¼Œåç»­é“¾å¼è°ƒç”¨å®¹æ˜“å¿˜åˆ¤ç©ºã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> someCondition ? obj.getA() : obj.getB();
str.toLowerCase();  <span class="hljs-comment">// å¦‚æœ getA() æˆ– getB() è¿”å› nullï¼Œè¿™é‡Œ NPE</span>
</code></pre>
<p><strong>é¿å…</strong>ï¼šä½¿ç”¨ Optional æˆ– Objects.requireNonNull ç­‰ã€‚</p>
</li>
<li>
<p><strong>åµŒå¥—ä¸‰å…ƒè¡¨è¾¾å¼å¯è¯»æ€§æå·®ï¼ˆç»´æŠ¤æ€§å‘ï¼‰</strong><br/>
å¤šå±‚åµŒå¥—å®¹æ˜“çœ‹é”™é€»è¾‘é¡ºåºã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> a ? b ? <span class="hljs-string">"1"</span> : <span class="hljs-string">"2"</span> : c ? <span class="hljs-string">"3"</span> : <span class="hljs-string">"4"</span>;  <span class="hljs-comment">// éš¾ä»¥é˜…è¯»</span>
</code></pre>
<p><strong>é¿å…</strong>ï¼šå¤æ‚é€»è¾‘ä¼˜å…ˆç”¨ if-elseï¼Œæé«˜å¯è¯»æ€§ã€‚</p>
</li>
<li>
<p><strong>è¿ç®—ç¬¦ä¼˜å…ˆçº§è¯¯è§£</strong><br/>
ä¸‰å…ƒè¡¨è¾¾å¼çš„ä¼˜å…ˆçº§é«˜äºèµ‹å€¼ï¼Œä½†ä½äºå¤§å¤šæ•°è¿ç®—ç¬¦ï¼Œå®¹æ˜“å’Œ &amp;&amp; || ç­‰æ··ç”¨å‡ºé”™ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">boolean</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> flag ? <span class="hljs-literal">true</span> : a == b &amp;&amp; c &gt; d;  <span class="hljs-comment">// å®¹æ˜“è¯¯ä»¥ä¸ºæ˜¯ flag ? true : (a == b &amp;&amp; c &gt; d)</span>
<span class="hljs-comment">// å®é™…ç­‰ä»·äº (flag ? true : a == b) &amp;&amp; c &gt; d</span>
</code></pre>
<p><strong>é¿å…</strong>ï¼šå¿…è¦æ—¶åŠ æ‹¬å·æ˜ç¡®æ„å›¾ã€‚</p>
</li>
<li>
<p><strong>ä¸å­—ç¬¦ä¸²æ‹¼æ¥æ··ç”¨æ—¶éšè”½ NPE</strong><br/>
å¸¸è§äºæ‹¼æ¥ null çš„åŒ…è£…ç±»å‹ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Integer</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
<span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-string">"value="</span> + (flag ? num : <span class="hljs-number">0</span>);  <span class="hljs-comment">// å¦‚æœ flag=trueï¼Œä¼šå°è¯•æ‹†ç®± num â†’ NPE</span>
</code></pre>
<p><strong>é¿å…</strong>ï¼šä½¿ç”¨ String.valueOf() æˆ– Objects.toString()ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-string">"value="</span> + (flag ? Objects.toString(num, <span class="hljs-string">"0"</span>) : <span class="hljs-string">"0"</span>);
</code></pre>
</li>
<li>
<p><strong>åœ¨æ³›å‹æˆ– lambda ä¸­ç±»å‹æ¨æ–­é—®é¢˜</strong><br/>
åœ¨æŸäº›æ³›å‹åœºæ™¯ä¸‹ï¼Œä¸‰å…ƒè¡¨è¾¾å¼å¯èƒ½å¯¼è‡´ç±»å‹æ¨æ–­å¤±è´¥ã€‚</p>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; list = condition ? Arrays.asList(<span class="hljs-string">"a"</span>) : Collections.emptyList();
<span class="hljs-comment">// å¯èƒ½ç¼–è¯‘é”™è¯¯ï¼Œå› ä¸ºä¸€ç§æ˜¯ List&lt;String&gt;ï¼Œå¦ä¸€ç§æ˜¯ List&lt;Object&gt;</span>
</code></pre>
<p><strong>é¿å…</strong>ï¼šç»Ÿä¸€è¿”å›ç±»å‹ï¼Œæˆ–æ˜¾å¼æŒ‡å®šæ³›å‹ã€‚</p>
</li>
</ol>
<h3 data-id="heading-1">æ€»ç»“å»ºè®®</h3>
<ul>
<li>ä¼˜å…ˆä¿è¯ç¬¬äºŒå’Œç¬¬ä¸‰æ“ä½œæ•°ç±»å‹å®Œå…¨ä¸€è‡´ã€‚</li>
<li>å¯¹å¯èƒ½ä¸º null çš„åŒ…è£…ç±»å‹åŠ¡å¿…å…ˆåˆ¤ç©ºã€‚</li>
<li>å¤æ‚é€»è¾‘é¿å…ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼ï¼Œæ”¹ç”¨ if-elseã€‚</li>
<li>å¤šç”¨å·¥å…·ç±»ï¼š<code>Objects.toString(obj, "")</code>ã€<code>Optional.orElse()</code> ç­‰èƒ½æœ‰æ•ˆè§„é¿è¿™äº›å‘ã€‚</li>
</ul>
<p>æŒæ¡è¿™äº›å‘åï¼Œä¸‰å…ƒè¡¨è¾¾å¼ç”¨åœ¨ç®€å•åœºæ™¯ä¸‹ä¾ç„¶æ˜¯ä¼˜é›…çš„å†™æ³•ï¼Œä½†åˆ‡è®°â€œç®€å•ä¸ºä¸Šâ€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js åŸç”ŸåŠŸèƒ½è¶Šæ¥è¶Šå¼ºï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯è¢« npm ç©åäº†ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7587715742051942410</link>    <guid>https://juejin.cn/post/7587715742051942410</guid>    <pubDate>2025-12-26T06:29:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587715742051942410" data-draft-id="7587704265055830054" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.js åŸç”ŸåŠŸèƒ½è¶Šæ¥è¶Šå¼ºï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯è¢« npm ç©åäº†ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-26T06:29:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‹—å¤´å¤§å†›ä¹‹æ±Ÿè‹åˆ†å†›"/> <meta itemprop="url" content="https://juejin.cn/user/2955079655907879"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.js åŸç”ŸåŠŸèƒ½è¶Šæ¥è¶Šå¼ºï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯è¢« npm ç©åäº†ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2955079655907879/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‹—å¤´å¤§å†›ä¹‹æ±Ÿè‹åˆ†å†›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T06:29:27.000Z" title="Fri Dec 26 2025 06:29:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™è¯ä¸€è¯´å‡ºå£ï¼Œå¯èƒ½å¾ˆå¤šå‰ç«¯åŒå­¦ä¼šç«‹åˆ»ç¬‘å‡ºæ¥ï¼šâ€œå½“ç„¶è¢«ç©åäº†ï¼â€ä½†å’±åˆ«æ€¥ç€ç¬‘ï¼Œæˆ‘å…ˆæŠŠè¯æ‘Šå¼€è®²ä¸€è®²ã€‚å¾ˆå¤šäººæ¯å¤©æ‰“å¼€é¡¹ç›®å°±åƒè¿›äº†ä»“åº“â€”â€”æˆç™¾ä¸Šåƒä¸ª <code>node_modules</code>ã€åŠ¨è¾„å‡ åæ¥ä¸ªä¾èµ–ï¼Œä¸€ä¸ªåŠŸèƒ½è£…ä¸€å †åŒ…ï¼Œç»“æœæœ€åé¡¹ç›®è‡ƒè‚¿å¾—åƒä¸ªå¤§è‚‰åŒ…ã€‚ä½ å¯èƒ½ä¼šæƒ³ï¼Œâ€œæˆ‘å°±è¦ç”¨è¿™ä¸ªå°åŠŸèƒ½ï¼Œè£…ä¸ªåŒ…ä¸è¡Œå—ï¼Ÿâ€å½“ç„¶è¡Œï¼Œå¯é—®é¢˜æ˜¯ï¼ŒæŠ€æœ¯æœ¬æ¥æ˜¯ä¸ºäººæœåŠ¡çš„ï¼Œä¸æ˜¯è®©æˆ‘ä»¬åšå®ƒçš„å¥´éš¶ã€‚</p>
<p>å‰å‡ å¹´æˆ‘ä»¬æè¯·æ±‚å°±è£… <code>axios</code>ã€ææ—¥æœŸå°±è£… <code>moment</code>ã€æ·±æ‹·è´è£… <code>lodash</code>ã€UUID è£… <code>uuid</code>ã€WebSocket è£… <code>ws</code>ï¼Œåæ­£é‡åˆ°ç‚¹å„¿å•¥å…ˆå»åŒ…ç®¡ç†å™¨æœä¸€åœˆã€‚ç»“æœç°åœ¨ä½ æ‰“å¼€ Node.js å®˜æ–¹æ–‡æ¡£ä¸€çœ‹ï¼ŒNode è‡ªå·±å°±å¸¦äº†å¥½å¤šä»¥å‰é åŒ…æ‰èƒ½æå®šçš„åŠŸèƒ½ï¼šåŸç”Ÿ <code>fetch()</code> ç°åœ¨å¯ä»¥æ›¿ä»£ <code>axios</code>ï¼Œ<code>crypto.randomUUID()</code> å¯ä»¥æ›¿ä»£ <code>uuid</code>ï¼Œè€Œ <code>fs/promises</code> çš„ <code>glob()</code> å¯ä»¥æ›¿ä»£ <code>glob</code> åŒ…äº†ã€‚ç”šè‡³ Node ä» 18 ç‰ˆæœ¬å¼€å§‹å°±æŠŠæµè§ˆå™¨é‡Œçš„ <code>fetch()</code> API ä½œä¸ºå…¨å±€å‡½æ•°æ”¯æŒäº†ï¼Œè¿™æ„å‘³ç€ä½  <strong>æ ¹æœ¬ä¸éœ€è¦å¤–éƒ¨çš„ HTTP è¯·æ±‚åº“</strong> æ¥å†™å¤§å¤šæ•°ç½‘ç»œè¯·æ±‚ä»£ç äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f470223a92fa49ec836ca452f2a54a04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54uX5aS05aSn5Yab5LmL5rGf6IuP5YiG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767335366&amp;x-signature=joM4sVkE6q9CzP1l3VzMq68ZgYE%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™å¬èµ·æ¥æ˜¯ä¸æ˜¯æœ‰ç‚¹é­”å¹»ï¼Ÿæˆ‘ç»™ä½ ä¸€ä¸ªçœŸå®ä¾‹å­ï¼š<br/>
ä»¥å‰åœ¨ä¸€ä¸ªå›¢é˜Ÿé‡Œï¼Œæˆ‘ä»¬é¡¹ç›®é‡Œåˆ°å¤„ç”¨ <code>axios</code> åšè¯·æ±‚ï¼Œå› ä¸ºå‡ å¹´å‰ Node çš„ <code>fetch()</code> è¿˜ä¸ç¨³å®šï¼Œä¹Ÿä¸æ™®éã€‚åæ¥å›¢é˜Ÿå‡çº§ Node åˆ° 18 ä»¥ä¸Šï¼Œæˆ‘ä»¬è¯•ç€æŠŠè¯·æ±‚é€»è¾‘ä» <code>axios</code> ç§»åˆ°åŸç”Ÿ <code>fetch()</code>ã€‚ä»¥å‰çš„ä»£ç æ˜¯è¿™æ ·ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;

<span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">'https://api.example.com/data'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res.<span class="hljs-property">data</span>);
</code></pre>
<p>æ”¹æˆåŸç”Ÿåå°±å˜æˆï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">res</span> = await fetch(<span class="hljs-string">'https://api.example.com/data'</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">data</span> = await res.json()<span class="hljs-comment">;</span>
console.log(data)<span class="hljs-comment">;</span>
</code></pre>
<p>æ˜¯ä¸æ˜¯ç®€æ´å¾—å¤šï¼Ÿè€Œä¸”ä¸ç”¨å†å»å…³æ³¨ <code>axios</code> çš„ç‰ˆæœ¬å‡çº§ã€æ¼æ´é—®é¢˜ã€ä¾èµ–å†²çªå•¥çš„äº†ã€‚</p>
<p>å†ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œé¡¹ç›®é‡Œä½ è¦ç”Ÿæˆä¸€ä¸ª UUIDï¼Œä¼ ç»Ÿå†™æ³•å¸¸å¸¸æ˜¯è¿™ä¹ˆå†™ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { v4 <span class="hljs-keyword">as</span> uuidv4 } <span class="hljs-keyword">from</span> <span class="hljs-string">'uuid'</span>;
<span class="hljs-keyword">const</span> id = <span class="hljs-title function_">uuidv4</span>();
</code></pre>
<p>è€Œç°åœ¨æœ€æ–° Node è‡ªå¸¦çš„ <code>crypto</code> ç›´æ¥å°±èƒ½æå®šï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import { randomUUID } from 'node:crypto'<span class="hljs-comment">;</span>
const <span class="hljs-attr">id</span> = randomUUID()<span class="hljs-comment">;</span>
</code></pre>
<p>ç»“æœåº“ä½“ç§¯å‡å°‘äº†ï¼Œè€Œä¸”ä¸å†éœ€è¦å»æ›´æ–°ç¬¬ä¸‰æ–¹åŒ…ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d6d1842b8494da9bbf71357d6531e4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54uX5aS05aSn5Yab5LmL5rGf6IuP5YiG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767335366&amp;x-signature=ToYMVZBv08KdYYQJnx88hJ7NplY%3D" alt="image.png" loading="lazy"/></p>
<p>å…‰è¿™ä¸€ç‚¹å°±å¤Ÿç—›å¿«äº†ï¼š<strong>åˆ«æ€»æƒ³é åŒ…è§£å†³ä¸€åˆ‡é—®é¢˜ï¼Œæœ‰çš„æ—¶å€™å…¶å®å†…ç½®å·²ç»å¤Ÿç”¨äº†</strong>ã€‚ä½†é—®é¢˜æ˜¯ï¼Œç¤¾åŒºå¿ƒæ€è¿˜åœç•™åœ¨ä»å‰ã€‚npm ç”Ÿæ€å¤ªä¸°å¯Œï¼Œå¯¼è‡´ä¸€ä¸ªå°åŠŸèƒ½å‰å‰ååä¼šæœ‰å¥½å‡ ä¸ªåŒ…ï¼Œä½ çœ‹ç€åˆ«äººç”¨ï¼Œå°±ä¸è‡ªè§‰è£…ä¸Šã€‚è¿™å°±é€ æˆäº†ä¸€ä¸ªâ€œä¾èµ–ææƒ§ç—‡â€â€”â€”åˆ«äººè£…äº†ï¼Œæˆ‘ä¸è£…å¥½åƒä¸ä¸“ä¸šä¸€æ ·ã€‚</p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5202b68f37aa4ed3b15ca4f4a4f934ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54uX5aS05aSn5Yab5LmL5rGf6IuP5YiG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767335366&amp;x-signature=71zQyT%2BN9IrRRYSaAfCBwHR6AHU%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-0">ä½ å¯èƒ½æ²¡æ„è¯†åˆ°çš„ç”Ÿæ€å€º</h2>
<p>è¯´åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å†èŠèŠæŠ€æœ¯å€ºã€‚æŠ€æœ¯å€ºä¸æ˜¯ä¸€ä¸ªä¸“æœ‰åè¯ï¼Œå®ƒæŒ‡çš„å°±æ˜¯â€œå› ä¸ºé€‰æ‹©ä¸å¤Ÿä¼˜åŒ–ï¼Œåæ¥ä¸å¾—ä¸ä»˜æ›´é«˜ä»£ä»·å»ä¿®å¤æˆ–é‡æ„â€çš„é‚£éƒ¨åˆ†æˆæœ¬ã€‚åœ¨å‰ç«¯é‡Œï¼Œè¿™ç§å€ºå¾€å¾€è—åœ¨é¡¹ç›®é‡Œæ— æ•° <code>npm install</code> åçš„ä¾èµ–æ ‘é‡Œã€‚ä½ æ¯è£…ä¸€ä¸ªåŒ…ï¼Œå°±å¯èƒ½å¸¦æ¥å‡ åä¸ªä¾èµ–ï¼Œè¿™äº›ä¾èµ–é‡Œæœ‰æœªæ›´æ–°çš„ã€æœ‰æ¼æ´çš„ï¼Œä¹Ÿæœ‰ä½ æ ¹æœ¬ç”¨ä¸åˆ°å´è¢«é—´æ¥å¼•å…¥çš„ã€‚ä½ å¯èƒ½ä¸€ä¸ªæœˆæ²¡å…³æ³¨å®ƒï¼Œä½† GitHub çš„ Dependabot ä¼šç»™ä½ æç¤ºâ€œä½ çš„ä¾èµ–åˆè¿‡æœŸäº†â€ï¼Œæˆ–è€… CI/CD åœ¨æŸæ¬¡ç‰ˆæœ¬å‡çº§ä¹‹åçªç„¶æŒ‚æ‰ã€‚</p>
<p>ä¸¾ä¸ªæˆ‘äº²èº«ç»å†çš„ä¾‹å­ï¼šæˆ‘ç»´æŠ¤è¿‡ä¸€ä¸ªå¤§å‹å‰ç«¯é¡¹ç›®ï¼ˆReact + Node æœåŠ¡ç«¯æ¸²æŸ“ï¼‰ï¼Œ<code>package.json</code> é‡Œæœ‰è¿‘ 70 ä¸ªä¾èµ–ã€‚æ·±ç©¶ä¹‹åå‘ç°ï¼Œå…¶ä¸­ 30% çš„åŒ…å…¶å®æ˜¯â€œåªç”¨äº†å…¶ä¸­ä¸€ä¸ªå‡½æ•°â€æˆ–è€…â€œæ—©å°±æœ‰åŸç”Ÿ API å¯æ›¿ä»£â€çš„ï¼Œæ¯”å¦‚ç”¨äºæ·±æ‹·è´çš„ <code>lodash</code>ã€å¤„ç†æ—¥æœŸçš„ <code>moment</code>ã€å¤„ç† URL å‚æ•°çš„ <code>qs</code>ã€‚è€Œè¿™ä¸‰è€…éƒ½å¯ä»¥ç”¨ç°ä»£ JavaScript è‡ªå¸¦çš„è¯­æ³•æˆ– API å®ç°ï¼Œæˆ–è€…æ›¿æ¢æˆæ›´è½»é‡çš„åº“ï¼Œä¹Ÿèƒ½æ˜¾è‘—å‡å°æ‰“åŒ…ä½“ç§¯ã€æé«˜å¯åŠ¨é€Ÿåº¦ã€‚</p>
<p>æ¯”å¦‚ <code>lodash</code> çš„æ·±æ‹·è´ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> cloneDeep <span class="hljs-keyword">from</span> <span class="hljs-string">'lodash/cloneDeep'</span>;
</code></pre>
<p>ç°ä»£ JS æœ‰ <code>structuredClone</code>ï¼ˆæµè§ˆå™¨å’Œ Node.js éƒ½æ”¯æŒï¼‰ï¼Œå¯ä»¥è½»æ¾æ›¿ä»£ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">cloneObj</span> = structuredClone(originalObj)<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™æ®µä»£ç ä¸ä»…æ›´çŸ­ï¼Œè€Œä¸”å¯è¯»æ€§æ›´å¼ºã€ä¾èµ–æ›´å°‘ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Faged-coffee.me%2Fblog%2Fmy-notes%2Fweekly-study%2F2025%2F20-2025" target="_blank" title="https://aged-coffee.me/blog/my-notes/weekly-study/2025/20-2025" ref="nofollow noopener noreferrer">AgedCoffee</a></p>
<p>åˆæ¯”å¦‚æ—¥æœŸå¤„ç†å¾ˆå¤šäººä¹ æƒ¯ç”¨æ—§æ—¶ä»£çš„ <code>moment.js</code>ï¼Œä½†å®ƒæœ¬èº«å·²ç»ä¸æ¨èä½¿ç”¨ï¼Œå› ä¸ºå®ƒä½“ç§¯å¤§ã€åŠŸèƒ½å†—ä½™ï¼Œè€Œä¸” JavaScript ç°åœ¨æœ‰æ›´ç°ä»£çš„æ—¥æœŸå¤„ç†æ–¹å¼ï¼Œæ¯”å¦‚ <code>Date.prototype.toLocaleString()</code> å’Œç°ä»£åº“ <code>date-fns</code>ã€<code>dayjs</code>ï¼ˆå¦‚æœéè¦ç”¨åº“çš„è¯éƒ½æ¯” <code>moment</code> è½»å¾—å¤šï¼‰ã€‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.c-ctrip.com%2Ffiles%2F6%2Fctriptech%2F1gw291200099iy5uyCC5B.pdf" target="_blank" title="https://docs.c-ctrip.com/files/6/ctriptech/1gw291200099iy5uyCC5B.pdf" ref="nofollow noopener noreferrer">èµ„æ–™æ¥æºæºç¨‹æŠ€æœ¯</a></p>
<hr/>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆæˆ‘ä»¬è¿˜è£…é‚£ä¹ˆå¤šåŒ…ï¼Ÿ</h2>
<p>ä½ å¯èƒ½ä¼šé—®ï¼Œâ€œOkï¼Œæˆ‘çŸ¥é“åŸç”Ÿ API ç°åœ¨å¾ˆå¼ºï¼Œä½†ä¸ºä»€ä¹ˆç¤¾åŒºé‡Œè¿˜æ˜¯å¤§é‡ä¾èµ–åŒ…ï¼Ÿå¤§å®¶ä¸è·Ÿè¿› Node çš„å˜åŒ–å—ï¼Ÿâ€è¿™å…¶å®æ˜¯ä¸€ä¸ªå¿ƒç†å±‚é¢çš„é—®é¢˜ã€‚</p>
<p>ä¸€ï¼š<strong>ä¹ æƒ¯æ€§ä¾èµ–</strong>ã€‚å¾ˆå¤šæ—¶å€™å†™ä»£ç ä¸æ˜¯ä¸ºäº†æŠ€æœ¯æœ€ä¼˜ï¼Œè€Œæ˜¯ä¸ºäº†é€Ÿåº¦ã€‚ä½ åœ¨ 2018 å¹´å­¦ä¼šäº† <code>axios</code>ã€<code>lodash</code>ã€<code>moment</code>ï¼Œé‚£æ—¶å€™å®ƒä»¬ç¡®å®æ˜¯æœ€æ–¹ä¾¿çš„è§£å†³æ–¹æ¡ˆã€‚å½“æ—¶å¥½ç”¨å°±è£…ï¼Œç°åœ¨ä¸å¸ä¹Ÿæ˜¯ä¹ æƒ¯ã€‚æŠ€æœ¯ Debt æœ€å¤§çš„é—®é¢˜å¾€å¾€ä¸æ˜¯æŠ€æœ¯æœ¬èº«ï¼Œè€Œæ˜¯æˆ‘ä»¬ä¸å»ä¸»åŠ¨æ¸…ç†ä»¥å‰çš„é€‰æ‹©ã€‚</p>
<p>äºŒï¼š<strong>åŒ…ç”Ÿæ€å¤ªä¸°å¯Œ</strong>ã€‚npm ä¸Š 100 ä¸‡+ åŒ…æ„å‘³ç€å‡ ä¹æ¯ä¸ªé—®é¢˜éƒ½æœ‰ç°æˆçš„æ–¹æ¡ˆï¼Œä½†è¿™ä¹Ÿæ„å‘³ç€å¾ˆå¤šåŒ…åŠŸèƒ½é«˜åº¦é‡å¤ï¼Œé€‰æ‹©æˆæœ¬é«˜ã€‚ä½ å¯èƒ½èŠ±æ›´å¤šæ—¶é—´å»å¯¹æ¯”åŒ…ï¼Œè€Œä¸æ˜¯æ€è€ƒâ€œæˆ‘çœŸçš„éœ€è¦å®ƒå—â€ã€‚è¿™å¯¼è‡´äº†ä¸€ä¸ªæ€ªåœˆï¼šä½ æƒ³ç€çœäº‹å„¿ï¼Œç»“æœåè€Œè£…äº†æ›´å¤šåŒ…ã€‚</p>
<p>ä¸‰ï¼š<strong>å›¢é˜Ÿæ²Ÿé€šæˆæœ¬</strong>ã€‚åœ¨å¤šäººé¡¹ç›®é‡Œï¼Œæœ‰äººå†™ä»£ç æ—¶å¼•ç”¨äº†æŸä¸ªåŒ…ï¼Œåˆ«äººå¯èƒ½ä¸çŸ¥é“è¿™ä¸ªåŒ…çš„æ›¿ä»£æ–¹æ¡ˆï¼Œå¯¼è‡´åæ¥å¤§å®¶éƒ½é»˜è®¤ç»§ç»­ä½¿ç”¨ã€‚ä¸€æ—¦å›¢é˜Ÿå½¢æˆäº†æŸä¸€å¥—ä¾èµ–ä½“ç³»ï¼Œæƒ³è¦æŠŠå†—ä½™ä¾èµ–å‰”é™¤å°±å˜å¾—éº»çƒ¦ã€‚</p>
<hr/>
<h2 data-id="heading-2">å¦‚ä½•ä¼˜é›…åœ°ç®¡ç†ä¾èµ–ï¼Œè€Œä¸æ˜¯è¢«å®ƒä»¬â€œç©åâ€</h2>
<p>æ—¢ç„¶ç”Ÿæ€æ˜¯å¤§è¶‹åŠ¿ï¼Œæˆ‘ä»¬ä¹Ÿæ²¡å¿…è¦å¦å®š npm çš„ä»·å€¼ã€‚ä½†æˆ‘çš„ç»éªŒæ˜¯ï¼Œä½ å¯ä»¥ç”¨ä¸€ç§**â€œæœ€å°ä¾èµ–åŸåˆ™â€**æ¥ç®¡ç†ä½ çš„é¡¹ç›®ï¼š</p>
<ol>
<li><strong>å…ˆç”¨åŸç”Ÿ</strong>ï¼šå…ˆçœ‹çœ‹ Node æˆ–æµè§ˆå™¨åŸç”Ÿèƒ½ä¸èƒ½æ»¡è¶³éœ€æ±‚ã€‚HTTP è¯·æ±‚ç°åœ¨å°±è‡ªå¸¦ <code>fetch()</code>ï¼›å”¯ä¸€è¦æ³¨æ„çš„æ˜¯ä¸€äº›é«˜çº§ç‰¹æ€§ï¼ˆæ¯”å¦‚è¯·æ±‚æ‹¦æˆªã€é‡è¯•é€»è¾‘ï¼‰å¯èƒ½ä»éœ€è¦åº“è¾…åŠ©ã€‚</li>
<li><strong>è¯„ä¼°æ›¿ä»£æ–¹æ¡ˆ</strong>ï¼šå¦‚æœåŸç”Ÿä¸å¤Ÿï¼Œå†æ‰¾è½»é‡æ›¿ä»£ï¼Œè€Œä¸æ˜¯é»˜è®¤ç”¨ä½ æœ€ç†Ÿæ‚‰çš„å¤§åŒ…ã€‚æ¯”å¦‚ç”¨ <code>structuredClone()</code> æ›¿ä»£ <code>lodash.cloneDeep</code>ï¼Œç”¨ <code>URLSearchParams</code> å¤„ç†æŸ¥è¯¢å‚æ•°ã€‚</li>
<li><strong>æŒ‰éœ€å¼•å…¥</strong>ï¼šå¦‚æœç¡®å®è¦ç”¨å¤§åº“ï¼Œå°½é‡æŒ‰éœ€å¼•å…¥ã€‚ä¾‹å¦‚ lodash çš„å•å‡½æ•°æ¨¡å—ï¼Œè€Œä¸æ˜¯æ•´ä¸ªåº“ã€‚</li>
<li><strong>åšå¥½å®šæœŸå®¡æŸ¥</strong>ï¼šæ¯éš”ä¸€æ®µæ—¶é—´ï¼Œå®¡æŸ¥é¡¹ç›®ä¾èµ–ï¼Œçœ‹çœ‹å“ªäº›ä¾èµ–å¯ä»¥æ¸…ç†æˆ–æ›¿æ¢æˆåŸç”Ÿæ–¹æ¡ˆã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-3">æ€»ç»“</h2>
<p>æˆ‘ä»¬ä¸æ˜¯åœ¨å¦å®š npm æˆ–ç”Ÿæ€çš„ä»·å€¼ã€‚npm çš„å­˜åœ¨å¯¹æ•´ä¸ª JavaScript ç¤¾åŒºæ¥è¯´æ˜¯é©å‘½æ€§çš„ï¼Œå®ƒè®©æˆ‘ä»¬ä¸ç”¨é‡å¤é€ è½®å­ã€å¿«é€Ÿæ„å»ºåº”ç”¨ã€‚åªæ˜¯éšç€ Node.js åŸç”ŸåŠŸèƒ½è¶Šæ¥è¶Šå¼ºã€æµè§ˆå™¨æ ‡å‡†è¶Šæ¥è¶Šå®Œå–„ï¼Œå¾ˆå¤šä½ â€œä¹ æƒ¯æ€§â€è£…çš„åŒ…å·²ç»æœ‰åŸç”Ÿæ›¿ä»£æ–¹æ¡ˆäº†ï¼Œç»§ç»­è£…å°±åƒèƒŒç€æ·é”å‰è¿›ä¸€æ ·ã€‚ç»è¿‡å®è·µæˆ‘å‘ç°â€”â€”<strong>ä¾èµ–è¶Šå°‘ï¼Œé¡¹ç›®è¶Šè½»ç›ˆï¼Œç»´æŠ¤è¶Šçœå¿ƒï¼ŒCI/CD è¶Šç¨³å®š</strong>ã€‚æŠ€æœ¯å€ºæ˜¯éšæ€§çš„ï¼Œæ—©æ¸…ç†æ—©è½»æ¾ã€‚ç»™é¡¹ç›®ç•™ä¸€æ¡å›å¤´è·¯ï¼Œè€Œä¸æ˜¯è¶Šèµ°è¶Šéš¾èµ°çš„ä¾èµ–è¿·å®«ï¼Œè¿™æ‰æ˜¯çœŸæ­£çš„å‰ç«¯æˆé•¿ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter å‹‡é—¯2Dåƒç´ æ¸¸æˆä¹‹è·¯ï¼ˆäº”ï¼‰ï¼šåƒå…ƒæ°”éª‘å£«ä¸€æ ·çš„è®¾è®¡éšæœºåœ°ç‰¢]]></title>    <link>https://juejin.cn/post/7588022226739200050</link>    <guid>https://juejin.cn/post/7588022226739200050</guid>    <pubDate>2025-12-26T06:11:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588022226739200050" data-draft-id="7587264707284779018" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter å‹‡é—¯2Dåƒç´ æ¸¸æˆä¹‹è·¯ï¼ˆäº”ï¼‰ï¼šåƒå…ƒæ°”éª‘å£«ä¸€æ ·çš„è®¾è®¡éšæœºåœ°ç‰¢"/> <meta itemprop="keywords" content="æ¸¸æˆ,æ¸¸æˆå¼€å‘,Flutter"/> <meta itemprop="datePublished" content="2025-12-26T06:11:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="_å¤§å­¦ç‰²"/> <meta itemprop="url" content="https://juejin.cn/user/3125273628517148"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter å‹‡é—¯2Dåƒç´ æ¸¸æˆä¹‹è·¯ï¼ˆäº”ï¼‰ï¼šåƒå…ƒæ°”éª‘å£«ä¸€æ ·çš„è®¾è®¡éšæœºåœ°ç‰¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3125273628517148/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    _å¤§å­¦ç‰²
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T06:11:01.000Z" title="Fri Dec 26 2025 06:11:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/648d895549d64c90b97d7542ca8df125~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334355&amp;x-signature=U7stMbVeID%2BIgFi9lrNQ%2BNRxetA%3D" width="100%" loading="lazy"/></p><p/>
<p><a href="https://juejin.cn/post/7579264485259411471" target="_blank" title="https://juejin.cn/post/7579264485259411471">Flutter å‹‡é—¯2Dåƒç´ æ¸¸æˆä¹‹è·¯ï¼ˆä¸€ï¼‰ï¼šä¸€ä¸ª Hero çš„è¯ç”Ÿ</a><br/>
<a href="https://juejin.cn/post/7581025279646892070" target="_blank" title="https://juejin.cn/post/7581025279646892070">Flutter å‹‡é—¯2Dåƒç´ æ¸¸æˆä¹‹è·¯ï¼ˆäºŒï¼‰ï¼šç»˜åˆ¶åŠ è½½æ¸¸æˆåœ°å›¾</a><br/>
<a href="https://juejin.cn/post/7584014975242911754" target="_blank" title="https://juejin.cn/post/7584014975242911754">Flutter å‹‡é—¯2Dåƒç´ æ¸¸æˆä¹‹è·¯ï¼ˆä¸‰ï¼‰ï¼šäººç‰©ä¸åœ°å›¾å…ƒç´ çš„äº¤äº’</a><br/>
<a href="https://juejin.cn/post/7585463258691125257" target="_blank" title="https://juejin.cn/post/7585463258691125257">Flutter å‹‡é—¯2Dåƒç´ æ¸¸æˆä¹‹è·¯ï¼ˆå››ï¼‰ï¼šä¸å“¥å¸ƒæ—æˆ˜æ–—çš„æ»‘æ­¥é­”æ³•å¸ˆ</a><br/>
<a href="https://juejin.cn/post/7588022226739200050" target="_blank" title="https://juejin.cn/post/7588022226739200050">Flutter å‹‡é—¯2Dåƒç´ æ¸¸æˆä¹‹è·¯ï¼ˆäº”ï¼‰ï¼šåƒå…ƒæ°”éª‘å£«ä¸€æ ·çš„è®¾è®¡éšæœºåœ°ç‰¢</a></p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨å‰å‡ ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†ä¸€ä¸ª <strong>2D åƒç´ æ¸¸æˆ</strong> çš„åŸºç¡€éª¨æ¶ï¼š<br/>
ä» <strong>è§’è‰²çš„åˆ›å»ºä¸åŠ¨ç”»åˆ‡æ¢ï¼Œåˆ°åœ°å›¾ç»˜åˆ¶ã€äººç‰©äº¤äº’ï¼Œå†åˆ°åŸºç¡€æˆ˜æ–—é€»è¾‘</strong>ï¼Œä¸€ä¸ª <code>èƒ½ç©èµ·æ¥</code> çš„ Demo å·²ç»åˆå…·é›å½¢ã€‚</p>
<p>ä½†å¾ˆå¿«ï¼Œä¸€ä¸ªé—®é¢˜å°±ä¼šæµ®ç°å‡ºæ¥ï¼š</p>
<blockquote>
<p><strong>å¦‚æœåœ°å›¾æ°¸è¿œåªæœ‰ä¸€å¼ ï¼Œé‚£è¿™ä¸ªæ¸¸æˆè¿˜èƒ½ç©å¤šä¹…ï¼Ÿ</strong></p>
</blockquote>
<p>åœ¨å®é™…æ¸¸æˆä¸­ï¼Œæ— è®ºæ˜¯ <strong>å…³å¡åˆ¶</strong> è¿˜æ˜¯ <strong>è‚‰é¸½ï¼ˆRoguelikeï¼‰ç©æ³•</strong>ï¼Œ<br/>
<strong>åœ°å›¾çš„åˆ‡æ¢ã€ç»„åˆä¸éšæœºæ€§</strong>ï¼Œå‡ ä¹éƒ½æ˜¯ä¸å¯æˆ–ç¼ºçš„ã€‚</p>
<p>å› æ­¤ï¼Œä»è¿™ä¸€ç« å¼€å§‹ï¼Œæˆ‘ä»¬ä¸å†åªå…³æ³¨ <code>å¦‚ä½•ç”»ä¸€å¼ åœ°å›¾</code>ï¼Œè€Œæ˜¯æ­£å¼å¼•å…¥ <strong>å…³å¡ç®¡ç†ã€åœ°å›¾åˆ‡æ¢ã€éšæœºåœ°ç‰¢ç”Ÿæˆ</strong> ç­‰æ›´è´´è¿‘å®é™…æ¸¸æˆå¼€å‘çš„ç³»ç»Ÿè®¾è®¡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0797109b17ed48a6b58974e8d3ba2f98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334355&amp;x-signature=r33uFI7vKDdLwxZuKD0ewNOcH1Q%3D" width="100%" loading="lazy"/></p><p/>
<p>æœ¬ç« å°†ä»¥ä¸€æ¬¾æˆç†Ÿçš„ <strong>è‚‰é¸½æ¸¸æˆ</strong> <code>å…ƒæ°”éª‘å£«</code> çš„åœ°ç‰¢è®¾è®¡ä¸ºæ–¹å‘ï¼Œå¹¶å›´ç»•ä»¥ä¸‹å‡ ä¸ªå…³é”®é—®é¢˜å±•å¼€ï¼š</p>
<ul>
<li>å¦‚ä½•å°† <strong>åœ°å›¾åŠ è½½é€»è¾‘</strong> ä» <code>MyGame</code> ä¸­è§£è€¦ï¼Œæ„å»ºä¸€ä¸ªç»Ÿä¸€çš„å…³å¡åŠ è½½å™¨ï¼Ÿ</li>
<li>å¦‚ä½•é€šè¿‡ <strong>æ¨¡å—åŒ–æˆ¿é—´ + ç®—æ³•å¸ƒå±€</strong>ï¼Œç”Ÿæˆå¯å¤ç”¨ã€å¯æ‰©å±•çš„éšæœºåœ°ç‰¢ï¼Ÿ</li>
<li>å½“åœ°å›¾å˜å¾—å¤æ‚ä¹‹åï¼Œå¦‚ä½•è®¾è®¡ä¸€ä¸ª <strong>å°åœ°å›¾ï¼ˆMinimapï¼‰ç³»ç»Ÿ</strong>ï¼Œå¸®åŠ©ç©å®¶ <strong>å¯è§†åŒ–</strong> å½“å‰åœ°ç‰¢ç»“æ„ï¼Ÿ</li>
</ul>
<p>é€šè¿‡è¿™ä¸€ç« ï¼Œä½ å°†çœ‹åˆ°ä¸€ä¸ªä» <code>å•ä¸€é™æ€åœ°å›¾ -&gt; å¯åˆ‡æ¢ã€å¯éšæœºã€å¯è§†åŒ–æ¢ç´¢çš„åœ°å›¾</code> çš„å®Œæ•´è¿‡ç¨‹ã€‚</p>
<blockquote>
<p>å¦‚æœè¯´å‰å‡ ç¯‡æ˜¯åœ¨ <strong>æ­åœ°åŸº</strong>ã€‚<br/>
é‚£ä¹ˆä»è¿™ä¸€ç¯‡å¼€å§‹ï¼Œæˆ‘å°†é€æ­¥æ­å»ºä¸€ä¸ª <strong>å¯åå¤æ¸¸ç©çš„æ¸¸æˆä¸–ç•Œ</strong>ã€‚</p>
</blockquote>
<h2 data-id="heading-1">MyHero</h2>
<h3 data-id="heading-2">ä¸€. æœ¬ç« ç›®æ ‡</h3>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8cb904be968a45448255749ec02af820~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334355&amp;x-signature=ffd01qvUrwpQu54pcmdAhDL7GyM%3D" width="100%" loading="lazy"/>
<h3 data-id="heading-3">äºŒ. ç»Ÿä¸€å…³å¡åŠ è½½å™¨</h3>
<h4 data-id="heading-4">1. åˆ†æ</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da25b179516248f59472b8067bd909f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334355&amp;x-signature=%2BqJBvTgmt%2BEz4lHpfn%2BH3u%2FmHTU%3D" alt="åœ°ç‰¢.png" loading="lazy"/></p>
<pre><code class="hljs language-dart" lang="dart">Future&lt;<span class="hljs-keyword">void</span>&gt; _loadLevel() <span class="hljs-keyword">async</span> {
    <span class="hljs-comment">// 1. åŠ è½½åœ°å›¾</span>
    <span class="hljs-keyword">final</span> realTileSize = mapScale * tileSize;
    <span class="hljs-keyword">final</span> tiled = <span class="hljs-keyword">await</span> TiledComponent.load(
      <span class="hljs-string">'åœ°ç‰¢.tmx'</span>,
      Vector2.all(realTileSize),
    );
    world.add(tiled);

    <span class="hljs-comment">// ---- å¤„ç† thorn ä¸­çš„è†æ£˜ ----</span>
    <span class="hljs-keyword">final</span> thornLayer = tiled.tileMap.getLayer&lt;ObjectGroup&gt;(<span class="hljs-string">'thorn'</span>);
    ...
    <span class="hljs-comment">// ---- å¤„ç† Key Layer ä¸­çš„é’¥åŒ™ ----</span>
    <span class="hljs-keyword">final</span> keyLayer = tiled.tileMap.getLayer&lt;ObjectGroup&gt;(<span class="hljs-string">'key'</span>);
    ...
    <span class="hljs-comment">// ---- å¤„ç† treasure Layer ä¸­çš„å®ç®± ----</span>
    <span class="hljs-keyword">final</span> treasureLayer = tiled.tileMap.getLayer&lt;ObjectGroup&gt;(<span class="hljs-string">'treasure'</span>);
    ...
    <span class="hljs-comment">// ---- å¤„ç† Door Layer ä¸­çš„é—¨ ----</span>
    <span class="hljs-keyword">final</span> doorLayer = tiled.tileMap.getLayer&lt;ObjectGroup&gt;(<span class="hljs-string">'door'</span>);
    ...
    <span class="hljs-comment">// ---- å¤„ç† water ç¢°æ’åŒº ----</span>
    <span class="hljs-keyword">final</span> waterLayer = tiled.tileMap.getLayer&lt;TileLayer&gt;(<span class="hljs-string">'water'</span>);
    ...
    <span class="hljs-comment">// ---- å¤„ç† wall ç¢°æ’ ----</span>
    <span class="hljs-keyword">final</span> wallLayer = tiled.tileMap.getLayer&lt;TileLayer&gt;(<span class="hljs-string">'wall'</span>);
    ...
    <span class="hljs-comment">// ---- å¤„ç† spawn_points ä¸­çš„æ€ªç‰©å’Œç»ˆç‚¹ ----</span>
    <span class="hljs-keyword">final</span> spawnLayer = tiled.tileMap.getLayer&lt;ObjectGroup&gt;(<span class="hljs-string">'spawn_points'</span>);
    ...
    
    <span class="hljs-comment">// 2. åˆ›å»ºæ‘‡æ†</span>
    ...

    <span class="hljs-comment">// 3. åˆ›å»ºè‹±é›„</span>
    ...

    <span class="hljs-comment">// 4. æ·»åŠ è¿›å…¥åœºæ™¯</span>
    ...

    <span class="hljs-comment">// 5. æ·»åŠ  äººç‰©ä¿¡æ¯ HUD</span>
    ...

    <span class="hljs-comment">// 6. æ·»åŠ  æ”»å‡» HUD</span>
    ...

    <span class="hljs-comment">// ---- Camera ----</span>
    camera.setBounds(Rectangle.fromLTRB(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, tiled.size.x, tiled.size.y));
    camera.follow(hero);
</code></pre>
<p>å½“å‰æ¸¸æˆä¸­ï¼Œä»…åœ¨ <code>my_game.dart</code> ä¸­é€šè¿‡ä¸€ä¸ª <code>_loadLevel</code> æ–¹æ³•å¯¹åœ°å›¾è¿›è¡Œ <strong>ç¡¬ç¼–ç åŠ è½½</strong>ã€‚<br/>
è¿™ç§æ–¹å¼ï¼Œåœ¨æˆ‘ä»¬ <strong>æ—©æœŸå¼€å‘</strong> å‹‰å¼ºå¤Ÿç”¨ï¼Œä½†éšç€åŠŸèƒ½çš„é€æ¸å¢é•¿ï¼Œé—®é¢˜å°±å‡ºæ¥äº†ï¼š</p>
<ul>
<li><strong>åœ°å›¾åŠ è½½å†™æ­»</strong>ï¼šéš¾ä»¥æ”¯æŒå¤šå…³å¡åˆ‡æ¢ã€éšæœºåœ°å›¾ç­‰ç©æ³•éœ€æ±‚</li>
<li><strong>é«˜åº¦è€¦åˆåœ¨æ¸¸æˆå…¥å£ä¸­</strong>ï¼šå¯¼è‡´å…¥å£ç±»èŒè´£æ··ä¹±ï¼ŒåŒæ—¶æ‰¿æ‹…äº†æ¸¸æˆå¾ªç¯ã€èµ„æºåŠ è½½å’Œå…³å¡ç®¡ç†çš„ <strong>å¤šé‡èŒè´£</strong></li>
<li><strong>ç¼ºä¹ç»Ÿä¸€çš„å…³å¡åŠ è½½å™¨</strong>ï¼šåœ°å›¾ã€è§’è‰²ã€æ•Œäººå’Œç›¸æœºåˆå§‹åŒ–é€»è¾‘æ··æ‚åœ¨ä¸€èµ·ï¼ŒåæœŸç»´æŠ¤å’Œæ‰©å±•æˆæœ¬è¾ƒé«˜</li>
</ul>
<p>å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»å°† <strong>å…³å¡åŠ è½½</strong> å’Œ <strong>æœªæ¥çš„åˆ‡æ¢é€»è¾‘</strong> ä» <code>MyGame</code> ä¸­æŠ½ç¦»ï¼Œå¼•å…¥ç‹¬ç«‹çš„å…³å¡ç®¡ç†å±‚ï¼Œä»¥é™ä½è€¦åˆåº¦å¹¶æå‡æ‰©å±•æ€§ã€‚</p>
<h4 data-id="heading-5">2. å®ç°</h4>
<h5 data-id="heading-6">ï¼ˆ1) æ–°å»º <code>LevelLoader</code> å…³å¡åŠ è½½å™¨</h5>
<p><code>LevelLoader</code> è´Ÿè´£åŠ è½½å’Œç®¡ç†æ¸¸æˆå…³å¡ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>åŠ è½½ <code>Tiled</code> åœ°å›¾æ–‡ä»¶</li>
<li>è§£æåœ°å›¾ä¸­çš„å„ç§ <strong>å›¾å±‚ä¸å¯¹è±¡ï¼ˆå¢™å£ã€é—¨ã€é’¥åŒ™ã€å®ç®±ã€æ€ªç‰©ç”Ÿæˆç‚¹ç­‰ï¼‰</strong></li>
<li><strong>æ¸…é™¤</strong> æ—§çš„åœ°å›¾å†…å®¹</li>
</ul>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LevelLoader</span> </span>{
  <span class="hljs-keyword">final</span> MyGame game;
  Vector2? heroBirthPoint;
  
  LevelLoader(<span class="hljs-keyword">this</span>.game);

  <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">double</span> mapScale = MyGame.mapScale;
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">double</span> tileSize = MyGame.tileSize;
  
  ...
}
</code></pre>
<h5 data-id="heading-7">ï¼ˆ1ï¼‰åŠ è½½ <code>Tiled</code> åœ°å›¾æ–‡ä»¶</h5>
<pre><code class="hljs language-dart" lang="dart">    <span class="hljs-comment">// ---------- åŠ è½½åœ°å›¾ ----------</span>
    <span class="hljs-keyword">final</span> realTileSize = mapScale * tileSize;
    <span class="hljs-keyword">var</span> effectiveMap = mapName;

    <span class="hljs-keyword">final</span> tiled = <span class="hljs-keyword">await</span> TiledComponent.load(
      effectiveMap,
      Vector2.all(realTileSize),
</code></pre>
<h5 data-id="heading-8">ï¼ˆ2ï¼‰è§£æåœ°å›¾ä¸­çš„å›¾å±‚ä¸å¯¹è±¡</h5>
<p>æˆ‘ä»¬åˆ›å»ºäº† <code>_loadMapContent</code> æ–¹æ³•ï¼Œç”¨äºè§£æ <strong>Tiled</strong> åœ°å›¾ä¸­çš„å„ä¸ª <strong>å›¾å±‚å’Œå¯¹è±¡</strong>ï¼Œå¹¶åˆ›å»ºå¯¹åº”çš„æ¸¸æˆç»„ä»¶ã€‚</p>
<ul>
<li><strong>Tiled</strong>ï¼šåœ°å›¾ç»„ä»¶</li>
<li><strong>offset</strong>ï¼šåœ°å›¾åœ¨ä¸–ç•Œåæ ‡ç³»ä¸­çš„åç§»é‡</li>
<li><strong>angle</strong>ï¼šåœ°å›¾æ—‹è½¬è§’åº¦ï¼ˆç”¨äºèµ°å»Šç­‰ï¼‰</li>
</ul>
<pre><code class="hljs language-dart" lang="dart">  Future&lt;<span class="hljs-keyword">void</span>&gt; _loadMapContent(
    TiledComponent tiled,
    Vector2 offset, {
    <span class="hljs-built_in">double</span> angle = <span class="hljs-number">0</span>,
    <span class="hljs-built_in">Set</span>&lt;<span class="hljs-built_in">String</span>&gt;? openings,
  }) <span class="hljs-keyword">async</span> {
    <span class="hljs-comment">// ---------- 1. thorn ----------</span>
    _loadThorn(tiled, offset, angle);

    <span class="hljs-comment">// ---------- 2. key ----------</span>
    _loadKey(tiled, offset, angle);

    <span class="hljs-comment">// ---------- 3. treasure ----------</span>
    _loadTreasure(tiled, offset, angle);

    <span class="hljs-comment">// ---------- 4. door ----------</span>
    _loadDoor(tiled, offset, angle, openings);

    <span class="hljs-comment">// ---------- 5. water ----------</span>
    _loadWater(tiled, offset, angle);

    <span class="hljs-comment">// ---------- 6. wall ----------</span>
    _loadWall(tiled, offset, angle);

    <span class="hljs-comment">// ---------- 7. collisions ----------</span>
    _loadCollisions(tiled, offset, angle);

    <span class="hljs-comment">// ---------- 8. spawn / portal ----------</span>
    _loadSpawnPoints(tiled, offset, angle);
  }
</code></pre>
<h5 data-id="heading-9">ï¼ˆ3ï¼‰æ¸…é™¤æ—§çš„åœ°å›¾å†…å®¹</h5>
<p>æˆ‘ä»¬åˆ›å»ºäº† <code>_clearCurrentLevel</code> æ–¹æ³•ï¼Œç”¨äº <strong>æ¸…é™¤æ—§åœ°å›¾</strong> ä¸­çš„å„ä¸ªå›¾å±‚å’Œå¯¹è±¡ï¼Œä¸º <strong>åŠ è½½æ–°åœ°å›¾</strong> åšå¥½å‡†å¤‡ã€‚</p>
<ul>
<li><strong>æ¸…é™¤ç¼“å­˜çš„ç¢°æ’ç»„ä»¶ <code>blockers</code></strong></li>
<li><strong>éå†æ¸…é™¤æ‰€æœ‰å›¾å±‚å’Œå¯¹è±¡</strong></li>
</ul>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">void</span> _clearCurrentLevel() {
    game.blockers.clear();
    <span class="hljs-keyword">final</span> children = <span class="hljs-built_in">List</span>&lt;Component&gt;.from(game.world.children);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> c <span class="hljs-keyword">in</span> children) {
      <span class="hljs-keyword">if</span> (c <span class="hljs-keyword">is</span> TiledComponent ||
          c <span class="hljs-keyword">is</span> WaterComponent ||
          c <span class="hljs-keyword">is</span> WallComponent ||
          c <span class="hljs-keyword">is</span> ThornComponent ||
          c <span class="hljs-keyword">is</span> KeyComponent ||
          c <span class="hljs-keyword">is</span> TreasureComponent ||
          c <span class="hljs-keyword">is</span> DoorComponent ||
          c <span class="hljs-keyword">is</span> SpawnPointComponent ||
          c <span class="hljs-keyword">is</span> PortalComponent) {
        c.removeFromParent();
      }
    }
  }
</code></pre>
<h3 data-id="heading-10">ä¸‰. åœ°å›¾åˆ‡æ¢</h3>
<h4 data-id="heading-11">1. ç»˜åˆ¶ <code>home</code> åœ°å›¾</h4>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd843273e22546e3831fa05681a0be93~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334355&amp;x-signature=Ctdeeat6iuJRm16DISWxkAj5Q94%3D" width="100%" loading="lazy"/>
<p>ç©è¿‡ <strong>ç±»ä¼¼æ¸¸æˆ</strong> çš„å¤§å®¶è‚¯å®šéƒ½çŸ¥é“ï¼Œæƒ³è¦åˆ‡æ¢åœ°å›¾çš„å‰æï¼Œå°±æ˜¯æœ‰ <strong>å¤šä¸ªåœ°å›¾</strong>ã€‚<br/>
å› æ­¤ï¼Œæˆ‘ä»¬ä¹Ÿæ•ˆä»¿ä¸€ä¸‹ä¸Šè¿°å›¾ç‰‡ï¼Œæ‰“é€ ä¸€ä¸ª <code>home</code> åœ°å›¾ï¼Œä½œä¸ºä¸€ä¸ª <strong>åœ°å›¾åˆ‡æ¢çš„ä¸­æ¢ç‚¹</strong>ã€‚<br/>
é‚£ä¹ˆ <code>home</code> åœ°å›¾ï¼Œä¸æˆ‘ä»¬ä¹‹å‰ç»˜åˆ¶çš„å¹¶æ— åŒºåˆ«ï¼Œå€¼å¾—å…³æ³¨çš„ï¼Œå°±åªæœ‰ä¸¤ä¸ªç‚¹ï¼š</p>
<ul>
<li><code>å‡ºç”Ÿç‚¹</code>ï¼šç”¨äºæŒ‡å®šäººç‰©åœ¨è¯¥æˆ¿é—´çš„ <strong>å‡ºç”Ÿä½ç½®</strong>
<ul>
<li><strong>typeï¼šbirthPoint</strong></li>
</ul>
</li>
<li><code>ä¼ é€é—¨</code>ï¼šç”¨äºæŒ‡å®š <strong>ä¼ é€é—¨</strong> æŒ‡å‘çš„åœ°å›¾
<ul>
<li><strong>typeï¼športal</strong></li>
<li><strong>mapIdï¼šxxx.tmx</strong> ï¼ˆç›®æ ‡åœ°å›¾å…¨ç§°ï¼‰</li>
</ul>
</li>
</ul>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad50bf9ebb254c7fa1b9e6b9048b9f90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334355&amp;x-signature=nluMtpfzbnxEoLmZw9e76Zr8p80%3D" width="100%" loading="lazy"/>
<h4 data-id="heading-12">2. ä¼ é€é—¨ç»„ä»¶ <code>PortalComponent</code></h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80e6118c657e4d269d7e35dcb0a0787d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334355&amp;x-signature=3FNZEEcp%2BrHjQl3k3UbKDgrZppA%3D" alt="eb556d23e4f04cdf96bdb51a626618c9.gif" loading="lazy"/></p>
<ul>
<li><strong>åŠ è½½ä¼ é€é—¨ç²¾çµå›¾</strong>ï¼š</li>
</ul>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">final</span> image = <span class="hljs-keyword">await</span> game.images.load(<span class="hljs-string">'portal.png'</span>);
    <span class="hljs-keyword">final</span> sheet = SpriteSheet(image: image, srcSize: Vector2(<span class="hljs-number">282</span>, <span class="hljs-number">282</span>));
    animation = sheet.createAnimation(
      row: <span class="hljs-number">0</span>,
      stepTime: <span class="hljs-number">0.12</span>,
      from: <span class="hljs-number">0</span>,
      to: <span class="hljs-number">14</span>,
      loop: <span class="hljs-keyword">true</span>,
    );
</code></pre>
<ul>
<li><strong>æ·»åŠ ç¢°æ’åŒº</strong>ï¼š</li>
</ul>
<pre><code class="hljs language-dart" lang="dart">add(RectangleHitbox());
</code></pre>
<ul>
<li><strong>ç¢°æ’å›è°ƒè§¦å‘ä¼ é€</strong>ï¼š</li>
</ul>
<pre><code class="hljs language-dart" lang="dart">    AudioManager.playWhistle();
    UiNotify.showToast(game, <span class="hljs-string">'ä¼ é€ä¸­...'</span>);
    game.levelLoader.load(mapId).then((_) {
        <span class="hljs-keyword">final</span> bp = game.levelLoader.heroBirthPoint;
        <span class="hljs-keyword">if</span> (bp != <span class="hljs-keyword">null</span>) {
          game.hero.position = bp;
        }
    });
</code></pre>
<h4 data-id="heading-13">3. æ•ˆæœå±•ç¤º</h4>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d077314c2d441c799d71483e6ff4698~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334355&amp;x-signature=KhUFgFzKT9P816CtNm81UKXgscA%3D" width="100%" loading="lazy"/>
<h3 data-id="heading-14">å››. éšæœºåœ°ç‰¢ç”Ÿæˆ</h3>
<h4 data-id="heading-15">1. åˆ†æ</h4>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23e80f9a5b034e74934ac4da2e773397~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334355&amp;x-signature=KzeJ2FF%2FymsPL4TFDidNwPZ4VII%3D" width="100%" loading="lazy"/>
<p>å¯¹äº <strong>éšæœºåœ°ç‰¢</strong>ï¼Œ<code>å…ƒæ°”éª‘å£«</code> å¯ä»¥è¯´æ˜¯ä¸€ä¸ªæˆç†Ÿçš„èŒƒæœ¬ ã€‚<br/>
åœ¨å¯¹å…¶ <strong>åœ°ç‰¢ç»“æ„</strong> è¿›è¡Œåˆ†æåä¸éš¾å‘ç°ï¼Œåœ°ç‰¢çš„éšæœºæ€§å¹¶ä¸æ˜¯ <strong>å®Œå…¨éšæœº</strong>ï¼Œè€Œæ˜¯å»ºç«‹åœ¨ <strong>æ¨¡å—åŒ–çš„æˆ¿é—´</strong> ä¹‹ä¸Šã€‚</p>
<p>ç»†ç»†åˆ†æä¹‹åï¼Œå¯ä»¥æ€»ç»“å‡ºå‡ ä¸ªå…³é”®ç‰¹å¾ï¼š</p>
<ul>
<li>
<p><strong>åœ°ç‰¢ä¸­çš„æ¯ä¸€ä¸ªæˆ¿é—´æœ¬è´¨ä¸Šéƒ½æ˜¯å¯å¤ç”¨çš„ <code>æ¨¡å—</code></strong><br/>
ä»åŠŸèƒ½ä¸Šï¼Œæˆ‘å°†è¿™äº›æˆ¿é—´å¤§è‡´å½’ç±»ä¸ºï¼š</p>
<ul>
<li>å¼€å§‹æˆ¿é—´ï¼ˆStart Roomï¼‰</li>
<li>å°æ€ªæˆ¿é—´ï¼ˆBattle Roomï¼‰</li>
<li>å®ç®±æˆ¿é—´ï¼ˆTreasure Roomï¼‰</li>
<li>å•†åº—æˆ¿é—´ï¼ˆShop Roomï¼‰</li>
<li>Boss æˆ¿é—´ï¼ˆBoss Roomï¼‰</li>
</ul>
</li>
<li>
<p><strong>æ¯ä¸ªæˆ¿é—´å¹¶ä¸ç›´æ¥ç›¸è¿ï¼Œè€Œæ˜¯é€šè¿‡ <code>èµ°å»Š</code> è¿›è¡Œè§£è€¦è¿æ¥</strong><br/>
èµ°å»Šåœ¨ç»“æ„ä¸Šæ‰¿æ‹…äº† <strong>è¿æ¥å™¨</strong> çš„è§’è‰²ï¼Œä½¿æˆ¿é—´ä¹‹é—´ï¼Œæ—¢å¯ä»¥ä¿æŒç‹¬ç«‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç‰¹å®šæ–¹å¼è¿æ¥ã€‚</p>
</li>
<li>
<p><strong>éšæœºåœ°ç‰¢çš„æ ¸å¿ƒï¼Œåœ¨äºæˆ¿é—´çš„ <code>æ’åˆ—æ–¹å¼</code> çš„éšæœº</strong><br/>
åªè¦ç¡®å®šäº†æˆ¿é—´çš„ <strong>ç±»å‹ã€æ•°é‡ä»¥åŠå®ƒä»¬ä¹‹é—´çš„è¿æ¥å…³ç³»</strong>ï¼Œå°±å¯ä»¥é€šè¿‡ç®—æ³•åœ¨æ¯æ¬¡è¿è¡Œæ—¶ <strong>åŠ¨æ€ç”Ÿæˆ</strong> ä¸ä¸€æ ·çš„åœ°ç‰¢ã€‚</p>
</li>
</ul>
<p>åŸºäºè¿™ä¸ªæ€è·¯ï¼Œéšæœºåœ°ç‰¢çš„æœ¬è´¨å¯ä»¥æŠ½è±¡ä¸ºï¼š</p>
<blockquote>
<p><strong>éšæœºåœ°ç‰¢ = æœ‰é™æˆ¿é—´æ¨¡æ¿ + å›ºå®šè¿æ¥è§„åˆ™ + éšæœºå¸ƒå±€ç®—æ³•</strong></p>
</blockquote>
<h4 data-id="heading-16">2. å‡†å¤‡</h4>
<p>æœ‰äº†æ€è·¯ä¹‹åï¼Œå°±åœ¨ <code>Tiled</code> ä¸­ï¼Œåˆ›å»ºå¦‚ä¸‹ä¸»è¦å‡ ç§ç±»å‹çš„ <strong>æˆ¿é—´</strong> å’Œè¿æ¥çš„ <strong>èµ°å»Š</strong>ï¼š</p>
<ul>
<li><strong>room_start.tmx</strong></li>
<li><strong>room_boss.tmx</strong></li>
<li><strong>room_battle.tmx</strong></li>
<li><strong>room_shop.tmx</strong></li>
<li><strong>room_treasure.tmx</strong></li>
<li><strong>hallway.tmx</strong></li>
</ul>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60a7aacc1fb643ca8e8498e43e87ed4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334355&amp;x-signature=Nb1xOPE8WvH6k1qVxBt%2BRWr2xVQ%3D" width="32%" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41b5daef838c420a97f40dea1a093c2e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334355&amp;x-signature=3K%2FeAKJGQfXLOEslZyWZatlSNKQ%3D" width="32%" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8ea03e71a1b431aa2e92d95f6467fc6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334355&amp;x-signature=xD4C54DbUHcgn3PZaSQprmgibHA%3D" width="32%" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f78b359d6574f3fa826526234ccc6ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334355&amp;x-signature=Ks5Ga4FpEd8Qor11m3EypcFA26U%3D" width="32%" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82754f7cb8cf4882bd662fbaf4a87d62~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334355&amp;x-signature=Iu9Tw4XyHIpGadPstGSrbauDvJA%3D" width="32%" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80b985d881ed4248adbb56e090396375~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334355&amp;x-signature=4UG2GQ5ehIcibxuMvQRr0GKdRT0%3D" width="32%" height="235" loading="lazy"/>
<blockquote>
<p>æ¯ä¸ªæˆ¿é—´éƒ½åœ¨ ä¸Šä¸‹å·¦å³å››ä¸ªé¢çš„ä¸­é—´å¼€äº†ç›¸åŒé•¿åº¦çš„å¼€å£ï¼Œç”¨æ¥å½“ä½œé—¨ï¼Œèµ°å»Šçš„è¿æ¥å£å¤§å°ä¹Ÿä¸æˆ¿é—´å¼€å£ä¿æŒä¸€è‡´</p>
</blockquote>
<h4 data-id="heading-17">3. å®ç°</h4>
<h5 data-id="heading-18">(1) æ‰«ææˆ¿é—´åœ°å›¾</h5>
<p>éšæœºåœ°ç‰¢çš„ç¬¬ä¸€æ­¥ï¼Œå¹¶ä¸æ˜¯ç”Ÿæˆç®—æ³•æœ¬èº«ï¼Œè€Œæ˜¯<strong>ç¡®å®šå¯ç”¨çš„æˆ¿é—´ç´ æé›†åˆ</strong>ã€‚<br/>
é€šè¿‡æ‰«æ <code>assets/tiles/</code> ç›®å½•ä¸­ç¬¦åˆ <code>room_*.tmx</code> å‘½åè§„èŒƒçš„åœ°å›¾æ–‡ä»¶ï¼Œç³»ç»Ÿåœ¨è¿è¡Œæ—¶åŠ¨æ€è·å–æ‰€æœ‰å¯ç”¨æˆ¿é—´æ¨¡æ¿ã€‚</p>
<pre><code class="hljs language-dart" lang="dart">...

<span class="hljs-keyword">final</span> manifestContent = <span class="hljs-keyword">await</span> rootBundle.loadString(<span class="hljs-string">'AssetManifest.json'</span>);
<span class="hljs-keyword">final</span> <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt; manifest = json.decode(manifestContent);

<span class="hljs-keyword">return</span> manifest.keys
  .where(
    (<span class="hljs-built_in">String</span> key) =&gt;
        key.contains(<span class="hljs-string">'assets/tiles/'</span>) &amp;&amp;
        key.split(<span class="hljs-string">'/'</span>).last.startsWith(<span class="hljs-string">'room_'</span>) &amp;&amp;
        key.endsWith(<span class="hljs-string">'.tmx'</span>),
  ).toList();
  
...
</code></pre>
<h5 data-id="heading-19">(2) åˆ†ç±»æˆ¿é—´ç±»å‹</h5>
<p>åœ¨è·å–å…¨éƒ¨æˆ¿é—´åœ°å›¾åï¼Œæ ¹æ®æ–‡ä»¶å‘½åçº¦å®šå°†æˆ¿é—´åˆ’åˆ†ä¸º <strong>ä¸åŒåŠŸèƒ½ç±»å‹</strong>ï¼š</p>
<ul>
<li><strong>èµ·å§‹æˆ¿é—´ï¼ˆstartï¼‰</strong></li>
<li><strong>Boss æˆ¿é—´ï¼ˆbossï¼‰</strong></li>
<li><strong>å®ç®±æˆ¿é—´ï¼ˆtreasureï¼‰</strong></li>
<li><strong>å•†åº—æˆ¿é—´ï¼ˆshopï¼‰</strong></li>
<li><strong>æˆ˜æ–—æˆ¿é—´ï¼ˆbattleï¼‰</strong></li>
</ul>
<p>åŒæ—¶ï¼Œåœ¨è¿™ä¸€é˜¶æ®µç¡®å®šæœ¬æ¬¡åœ°ç‰¢çš„ <strong>ç›®æ ‡æˆ¿é—´æ•°é‡</strong>ï¼Œå¹¶åˆå§‹åŒ–ç”¨äºåç»­ç”Ÿæˆçš„ <strong>ç½‘æ ¼ä¸è¿æ¥å…³ç³»æ•°æ®ç»“æ„</strong>ã€‚</p>
<pre><code class="hljs language-dart" lang="dart">    <span class="hljs-built_in">String?</span> startMap = mapFiles.firstWhere(...);
    <span class="hljs-built_in">String?</span> bossMap = mapFiles.firstWhere(...);
    <span class="hljs-built_in">String?</span> treasureMap = mapFiles.firstWhere(...);
    <span class="hljs-built_in">String?</span> shopMap = mapFiles.firstWhere(...);
    <span class="hljs-built_in">String?</span> battleMap = mapFiles.firstWhere(...);

    <span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">String</span>&gt; battleMaps = mapFiles
        .where(...)
        .toList();

    <span class="hljs-keyword">if</span> (battleMaps.isEmpty) middleMaps = [startMap];
    
    <span class="hljs-comment">// MIN..MAX ä¸ªæˆ¿é—´</span>
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">int</span> targetRooms = MIN_ROOMS + random.nextInt(MAX_ROOMS - MIN_ROOMS + <span class="hljs-number">1</span>); 
    
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">Map</span>&lt;math.Point&lt;<span class="hljs-built_in">int</span>&gt;, <span class="hljs-built_in">String</span>&gt; grid = {};
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">List</span>&lt;Connection&gt; connections = [];
</code></pre>
<h5 data-id="heading-20">(3) æ”¾ç½®èµ·å§‹æˆ¿é—´å¹¶ç”ŸæˆåŸºç¡€å¸ƒå±€</h5>
<p>åœ°ç‰¢å¸ƒå±€è¢«é™åˆ¶åœ¨ä¸€ä¸ª <strong>3Ã—3 çš„é€»è¾‘ç½‘æ ¼</strong>å†…ã€‚<br/>
<strong>èµ·å§‹æˆ¿é—´</strong> é¦–å…ˆè¢«éšæœºæ”¾ç½®åœ¨ç½‘æ ¼ä¸­çš„ä»»æ„ä½ç½®ï¼Œéšåä»¥è¯¥ç‚¹ä¸ºèµ·ç‚¹ï¼Œé€šè¿‡ <code>ç”Ÿé•¿</code> çš„æ–¹å¼é€æ­¥æ‰©å±•ï¼š</p>
<ul>
<li>æ¯æ¬¡ä»å·²æœ‰æˆ¿é—´ä¸­éšæœºé€‰ä¸€ä¸ªä½œä¸ºç”Ÿé•¿ä¸­å¿ƒ</li>
<li>éšæœºå°è¯•å‘ä¸Šä¸‹å·¦å³æ‰©å±•</li>
<li>åªå…è®¸åœ¨ 3Ã—3 è¾¹ç•Œå†…ç”Ÿæˆæ–°æˆ¿é—´</li>
<li>åŒæ—¶è®°å½•æˆ¿é—´ä¹‹é—´çš„è¿æ¥å…³ç³»</li>
</ul>
<p>è¿™æ ·å°±ç¡®ä¿äº†ï¼š</p>
<ul>
<li>åœ°ç‰¢æ•´ä½“ <strong>è§„æ¨¡å¯æ§</strong></li>
<li>æˆ¿é—´åˆ†å¸ƒå…·æœ‰ <strong>éšæœºæ€§</strong></li>
<li>å¸ƒå±€å§‹ç»ˆè¿é€šï¼Œä¸ä¼šäº§ç”Ÿ <strong>å­¤ç«‹</strong> æˆ¿é—´</li>
</ul>
<pre><code class="hljs language-dart" lang="dart">    <span class="hljs-comment">// æ”¾ç½®èµ·å§‹æˆ¿é—´ (éšæœºä½ç½®)</span>
    <span class="hljs-built_in">int</span> startX = random.nextInt(GRID_COLS);
    <span class="hljs-built_in">int</span> startY = random.nextInt(GRID_ROWS);
    math.Point&lt;<span class="hljs-built_in">int</span>&gt; startPos = math.Point(startX, startY);
    grid[startPos] = startMap;

    <span class="hljs-built_in">List</span>&lt;math.Point&lt;<span class="hljs-built_in">int</span>&gt;&gt; frontier = [startPos];

    <span class="hljs-comment">// ç”Ÿé•¿ (é™åˆ¶åœ¨ 3x3 ç½‘æ ¼å†…)</span>
    <span class="hljs-keyword">while</span> (grid.length &lt; targetRooms &amp;&amp; frontier.isNotEmpty) {
      <span class="hljs-keyword">final</span> index = random.nextInt(frontier.length);
      <span class="hljs-keyword">final</span> center = frontier[index];

      <span class="hljs-keyword">final</span> directions = [
        <span class="hljs-keyword">const</span> math.Point(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>),
        <span class="hljs-keyword">const</span> math.Point(<span class="hljs-number">0</span>, <span class="hljs-number">-1</span>),
        <span class="hljs-keyword">const</span> math.Point(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>),
        <span class="hljs-keyword">const</span> math.Point(<span class="hljs-number">-1</span>, <span class="hljs-number">0</span>),
      ]..shuffle(random);

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> dir <span class="hljs-keyword">in</span> directions) {
        <span class="hljs-keyword">final</span> neighbor = math.Point(center.x + dir.x, center.y + dir.y);

        <span class="hljs-keyword">if</span> (neighbor.x &gt;= <span class="hljs-number">0</span> &amp;&amp;
            neighbor.x &lt; GRID_COLS &amp;&amp;
            neighbor.y &gt;= <span class="hljs-number">0</span> &amp;&amp;
            neighbor.y &lt; GRID_ROWS) {
          <span class="hljs-keyword">if</span> (!grid.containsKey(neighbor)) {
            grid[neighbor] = <span class="hljs-string">'temp'</span>;
            connections.add(Connection(center, neighbor));
            frontier.add(neighbor);
            <span class="hljs-keyword">break</span>;
          }
        }
      }
    }
</code></pre>
<h5 data-id="heading-21">(4) ç¡®å®š Boss æˆ¿é—´ä½ç½®</h5>
<p>åœ¨åŸºç¡€å¸ƒå±€ç”Ÿæˆå®Œæˆåï¼Œé€šè¿‡ä¸€æ¬¡ <strong>BFSï¼ˆå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼‰</strong>ï¼Œè®¡ç®—æ¯ä¸ªæˆ¿é—´åˆ°èµ·å§‹æˆ¿é—´çš„æœ€çŸ­è·ç¦»ã€‚</p>
<p>è¿™æ ·å°±å¯ä»¥è®©è·ç¦»æœ€è¿œçš„æˆ¿é—´ï¼Œè¢«é€‰ä¸º <code>Boss æˆ¿é—´</code>ï¼Œä»è€Œå½¢æˆ <strong>ç”±æ˜“åˆ°éš¾</strong> çš„å…³å¡èŠ‚å¥ï¼Œé¿å… <strong>Boss</strong> å‡ºç°åœ¨ <strong>å¼€å§‹ä½ç½®é™„è¿‘</strong> çš„å°´å°¬ä½ç½®ã€‚</p>
<pre><code class="hljs language-dart" lang="dart">    math.Point&lt;<span class="hljs-built_in">int</span>&gt; bossPos = startPos;
    <span class="hljs-built_in">double</span> maxDist = <span class="hljs-number">-1</span>;

    <span class="hljs-built_in">Map</span>&lt;math.Point&lt;<span class="hljs-built_in">int</span>&gt;, <span class="hljs-built_in">int</span>&gt; distances = {startPos: <span class="hljs-number">0</span>};
    <span class="hljs-built_in">List</span>&lt;math.Point&lt;<span class="hljs-built_in">int</span>&gt;&gt; queue = [startPos];

    <span class="hljs-keyword">while</span> (queue.isNotEmpty) {
      <span class="hljs-keyword">final</span> current = queue.removeAt(<span class="hljs-number">0</span>);
      <span class="hljs-keyword">final</span> currentDist = distances[current]!;

      <span class="hljs-keyword">if</span> (currentDist &gt; maxDist) {
        maxDist = currentDist.toDouble();
        bossPos = current;
      }

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> conn <span class="hljs-keyword">in</span> connections) {
        <span class="hljs-keyword">if</span> (conn.from == current &amp;&amp; !distances.containsKey(conn.to)) {
          distances[conn.to] = currentDist + <span class="hljs-number">1</span>;
          queue.add(conn.to);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (conn.to == current &amp;&amp; !distances.containsKey(conn.from)) {
          distances[conn.from] = currentDist + <span class="hljs-number">1</span>;
          queue.add(conn.from);
        }
      }
    }
</code></pre>
<h5 data-id="heading-22">(5) åˆ†é…å…¶ä½™æˆ¿é—´ç±»å‹</h5>
<p>é™¤äº† <strong>èµ·å§‹æˆ¿é—´ä¸ Boss æˆ¿é—´</strong> å¤–ï¼Œå…¶ä½™æˆ¿é—´æŒ‰ä¸€å®šçš„ <code>éšæœºè§„åˆ™</code> ä¾æ¬¡åˆ†é…ï¼š</p>
<ul>
<li>ä¼˜å…ˆä¿è¯è‡³å°‘ <code>3</code> ä¸ª <strong>æˆ˜æ–—æˆ¿é—´</strong></li>
<li>éšæœºæ”¾ç½® <strong>å®ç®±æˆ¿å’Œå•†åº—æˆ¿</strong></li>
<li>å‰©ä½™æˆ¿é—´ä¹Ÿå¡«å……ä¸º <strong>æˆ˜æ–—æˆ¿é—´</strong></li>
<li>å°†ç”Ÿæˆè¿‡ç¨‹ä¸­æ ‡è®°ä¸ºä¸´æ—¶å ä½çš„æˆ¿é—´ç»Ÿä¸€æ›¿æ¢ä¸ºæ­£å¼æˆ¿é—´ç±»å‹</li>
</ul>
<pre><code class="hljs language-dart" lang="dart">    <span class="hljs-comment">// ç¡®ä¿è‡³å°‘æœ‰ 3 ä¸ªæˆ˜æ–—æˆ¿é—´ (å¦‚æœç©ºé—´å…è®¸)</span>
    <span class="hljs-keyword">if</span> (available.isNotEmpty &amp;&amp; battleMap != <span class="hljs-keyword">null</span>) {
      <span class="hljs-keyword">final</span> <span class="hljs-built_in">int</span> need = math.min(<span class="hljs-number">3</span>, available.length);
      <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; need; i++) {
        ...
      }
    }

    <span class="hljs-comment">// æ”¾ç½®å®ç®±æˆ¿</span>
    ...

    <span class="hljs-comment">// æ”¾ç½®å•†åº—æˆ¿</span>
    ...

    <span class="hljs-comment">// å¡«å……å‰©ä½™æˆ¿é—´</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> p <span class="hljs-keyword">in</span> available) {
      grid[p] = battleMaps[random.nextInt(battleMaps.length)];
    }

    <span class="hljs-comment">// æ›¿æ¢æ‰€æœ‰ä¸´æ—¶æ ‡è®°</span>
    grid.forEach((key, value) {
      <span class="hljs-keyword">if</span> (value == <span class="hljs-string">'temp'</span>) {
        grid[key] = battleMaps[random.nextInt(battleMaps.length)];
      }
    });
</code></pre>
<h5 data-id="heading-23">(6) è®¡ç®—æ•´ä½“åœ°å›¾è¾¹ç•Œ</h5>
<p>ä¸ºäº†è®© <strong>ç›¸æœºè¾¹ç•Œ</strong> å’Œä¸‹æ–‡ä¸­çš„ <strong>å°åœ°å›¾</strong> æ˜¾ç¤ºä¿æŒç¨³å®šï¼Œåœ°å›¾å°ºå¯¸å›ºå®šä½¿ç”¨å®Œæ•´çš„  <strong>3Ã—3 ç½‘æ ¼å°ºå¯¸</strong> è¿›è¡Œè®¡ç®—ã€‚</p>
<p>è¿™æ ·å¯ä»¥é¿å…ï¼š</p>
<ul>
<li>ä¸åŒåœ°ç‰¢å°ºå¯¸å¯¼è‡´çš„å°åœ°å›¾æŠ–åŠ¨</li>
<li>ç›¸æœºè¾¹ç•Œé¢‘ç¹å˜åŒ–å¸¦æ¥çš„ä½“éªŒé—®é¢˜</li>
</ul>
<p>æˆ¿é—´åœ¨ä¸–ç•Œåæ ‡ä¸­çš„å®é™…ä½ç½®ï¼Œåˆ™ç»Ÿä¸€é€šè¿‡ <code>getRoomPos</code> è¿›è¡Œæ¢ç®—ã€‚</p>
<pre><code class="hljs language-dart" lang="dart">    Vector2 getRoomPos(math.Point&lt;<span class="hljs-built_in">int</span>&gt; p) {
      <span class="hljs-keyword">return</span> Vector2(p.x * step, p.y * step);
    }
</code></pre>
<h5 data-id="heading-24">(7) è®¡ç®—æ¯ä¸ªæˆ¿é—´çš„å¼€å£æ–¹å‘</h5>
<p>æ ¹æ®æˆ¿é—´ä¹‹é—´çš„è¿æ¥å…³ç³»ï¼Œè®¡ç®—æ¯ä¸ªæˆ¿é—´çš„ <strong>å¼€å£æ–¹å‘é›†åˆ</strong>ï¼š</p>
<ul>
<li>ä¸Š / ä¸‹ / å·¦ / å³</li>
<li>æ¯ä¸€æ¡è¿æ¥ä¼šåŒæ—¶å½±å“ä¸¤ä¸ªæˆ¿é—´çš„å¼€å£</li>
</ul>
<pre><code class="hljs language-dart" lang="dart">    <span class="hljs-keyword">final</span> <span class="hljs-built_in">Map</span>&lt;math.Point&lt;<span class="hljs-built_in">int</span>&gt;, <span class="hljs-built_in">Set</span>&lt;<span class="hljs-built_in">String</span>&gt;&gt; roomOpenings = {};
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> p <span class="hljs-keyword">in</span> grid.keys) {
      roomOpenings[p] = &lt;<span class="hljs-built_in">String</span>&gt;{};
    }
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> conn <span class="hljs-keyword">in</span> connections) {
      <span class="hljs-keyword">final</span> p1 = conn.from;
      <span class="hljs-keyword">final</span> p2 = conn.to;
      <span class="hljs-keyword">final</span> dx = p2.x - p1.x;
      <span class="hljs-keyword">final</span> dy = p2.y - p1.y;
      <span class="hljs-keyword">if</span> (dx == <span class="hljs-number">1</span>) {
        roomOpenings[p1]!.add(<span class="hljs-string">'right'</span>);
        roomOpenings[p2]!.add(<span class="hljs-string">'left'</span>);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (dx == <span class="hljs-number">-1</span>) {
        roomOpenings[p1]!.add(<span class="hljs-string">'left'</span>);
        roomOpenings[p2]!.add(<span class="hljs-string">'right'</span>);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (dy == <span class="hljs-number">1</span>) {
        roomOpenings[p1]!.add(<span class="hljs-string">'down'</span>);
        roomOpenings[p2]!.add(<span class="hljs-string">'up'</span>);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (dy == <span class="hljs-number">-1</span>) {
        roomOpenings[p1]!.add(<span class="hljs-string">'up'</span>);
        roomOpenings[p2]!.add(<span class="hljs-string">'down'</span>);
      }
    }
</code></pre>
<blockquote>
<p>âš ï¸ <strong>æ³¨æ„</strong>ï¼š <img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/427a087bc1e64a49aca0508659842ca8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334355&amp;x-signature=EcL7qkT49vgcll5IWohdgo8jWQI%3D" width="100%" loading="lazy"/>
æœªä½¿ç”¨çš„ <strong>å¤šä½™å¼€å£</strong> å¦‚æœä¸å¤„ç†ï¼Œå°±ä¼šæˆä¸ºä¸Šè¿°å›¾ç‰‡é‚£æ ·ï¼šä¸Šä¸‹ä¸¤ä¸ª <strong>æ²¡ç”¨çš„é—¨</strong> ä¹Ÿè¢«ç»˜åˆ¶å‡ºæ¥äº†ã€‚<br/>
å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å°†å¼€å£é›†åˆä¼ å…¥ <strong>ç”Ÿæˆé—¨çš„å‡½æ•° <code>_loadDoor</code> ä¸­</strong> è¿›è¡Œåˆ¤æ–­æ˜¯å¦åŒ…å«ï¼š</p>
<ul>
<li>åŒ…å«ï¼Œç»˜åˆ¶ä¸ºé—¨</li>
<li>ä¸åŒ…å«ï¼Œç»˜åˆ¶ä¸ºå¢™</li>
</ul>
</blockquote>
<h5 data-id="heading-25">(8) åŠ è½½æˆ¿é—´åœ°å›¾</h5>
<p>åœ¨ <strong>å¸ƒå±€ã€æˆ¿é—´ç±»å‹å’Œå¼€å£æ–¹å‘</strong> å…¨éƒ¨ç¡®å®šä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ­£å¼å®ä¾‹åŒ–æˆ¿é—´ï¼š</p>
<ul>
<li>åŠ è½½å¯¹åº”çš„ <code>.tmx</code> åœ°å›¾</li>
<li>æ ¹æ®ç½‘æ ¼åæ ‡è®¡ç®—ä¸–ç•Œä½ç½®</li>
<li>å°†å¼€å£ä¿¡æ¯é™„åŠ åˆ°æˆ¿é—´ç‰‡æ®µä¸­</li>
<li>ç»Ÿä¸€åŠ å…¥åˆ° <code>segments</code> é›†åˆ</li>
</ul>
<p>è‡³æ­¤ï¼Œæˆ¿é—´æœ¬èº«å·²ç„¶æ„å»ºå®Œæˆï¼Œä½†ç›¸äº’ä¹‹é—´ä»ç„¶æ˜¯ <strong>ç‹¬ç«‹</strong> çš„ã€‚</p>
<h5 data-id="heading-26">(9) ç”Ÿæˆèµ°å»Šå¹¶è¿æ¥æˆ¿é—´</h5>
<p>æ¥ä¸‹æ¥ï¼Œå°±æ˜¯æœ€åä¸€æ­¥äº†ï¼Œæ ¹æ®æˆ¿é—´ä¹‹é—´çš„ <strong>è¿æ¥å…³ç³»</strong> ç”Ÿæˆ <strong>èµ°å»Š</strong>ï¼š</p>
<ul>
<li><strong>å‚ç›´è¿æ¥</strong>ï¼šåœ¨ä¸Šä¸‹æˆ¿é—´ä¹‹é—´ç”Ÿæˆæ°´å¹³å±…ä¸­çš„èµ°å»Š</li>
<li><strong>æ°´å¹³è¿æ¥</strong>ï¼šåœ¨å·¦å³æˆ¿é—´ä¹‹é—´ç”Ÿæˆèµ°å»Šï¼Œå¹¶å¯¹èµ°å»Šåœ°å›¾è¿›è¡Œ 90Â° æ—‹è½¬</li>
</ul>
<p>é€šè¿‡ <code>æˆ¿é—´ + èµ°å»Š</code> çš„ç»„åˆæ–¹å¼ï¼Œå°† <strong>ç‹¬ç«‹æˆ¿é—´</strong> æ‹¼æ¥æˆä¸€ä¸ª <strong>å®Œæ•´ã€è¿é€šçš„åœ°ç‰¢</strong>ã€‚</p>
<h4 data-id="heading-27">4. æµç¨‹å›¾</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
  A[combine] --&gt; B[æ‰«ææˆ¿é—´åœ°å›¾ room_*.tmx]
  B --&gt;|æ— å¯ç”¨åœ°å›¾| X[è¿”å›ç©º CombinedMap]
  B --&gt; C[ç¡®è®¤æˆ¿é—´ç±»å‹]

  C --&gt; D[éšæœºç”Ÿæˆ3x3æˆ¿é—´ç½‘æ ¼+è¿æ¥å…³ç³»]
  D --&gt; E1[è®¾ç½®èµ·å§‹æˆ¿é—´ä½ç½®]
  D --&gt; E2[æŒ‰è·ç¦»é€‰æ‹© Boss æˆ¿]
  D --&gt; E3[åˆ†é…å…¶ä»–æˆ¿é—´ç±»å‹]
 
  E1 --&gt; F[è®¡ç®—æ•´ä½“åœ°å›¾è¾¹ç•Œ]
  E2 --&gt; F[è®¡ç®—æ•´ä½“åœ°å›¾è¾¹ç•Œ]
  E3 --&gt; F[è®¡ç®—æ•´ä½“åœ°å›¾è¾¹ç•Œ]
  F --&gt; G[æ ¹æ®è¿æ¥å…³ç³» è®¡ç®—æ¯ä¸ªæˆ¿é—´çš„å¼€å£æ–¹å‘]

  G --&gt; H[åŠ è½½æˆ¿é—´åœ°å›¾ æ”¾ç½®åˆ°ä¸–ç•Œåæ ‡]
  H --&gt; I[åœ¨ç›¸é‚»æˆ¿é—´é—´ ç”Ÿæˆèµ°å»Š å«æ—‹è½¬]

  I --&gt; J[ç»„åˆæ‰€æœ‰ç‰‡æ®µ ç”Ÿæˆ CombinedMap]
</code></pre>
<h3 data-id="heading-28">äº”. å®ç° MinimapHud å°åœ°å›¾</h3>
<h4 data-id="heading-29">1. åˆ†æ</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7ad88699ad54fbcbe5da75bcad46c08~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334355&amp;x-signature=EZPPUGi7nvIltVv%2BKTA4kLCbAQA%3D" alt="å…ƒæ°”éª‘å£«åœ°å›¾.PNG" loading="lazy"/></p>
<p>æœ€åï¼Œ<code>å°åœ°å›¾</code> å¯ä»¥è¯´æ˜¯ <strong>åœ°ç‰¢ç±»æ¸¸æˆ</strong> ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ï¼Œå¦åˆ™å¤§å®¶åœ¨æˆ¿é—´ä¸èµ°å»Šä¹‹é—´æ¥å›ç©¿æ¢­ï¼Œå¾ˆå®¹æ˜“å°±ä¼š <strong>è¿·è·¯</strong> ğŸ˜‚ã€‚</p>
<p>ä»å®ç°è§’åº¦æ¥çœ‹ï¼Œå°åœ°å›¾æœ¬è´¨ä¸Šå¹¶ä¸æ˜¯æ¸¸æˆä¸­çš„ <strong>å¦ä¸€å¼ åœ°å›¾</strong>ï¼Œè€Œæ˜¯ <strong>å¯¹å½“å‰åœ°ç‰¢ç»“æ„çš„æŠ•å½±</strong>ï¼š<br/>
å°†çœŸå®æ¸¸æˆä¸–ç•Œä¸­çš„ <strong>æˆ¿é—´ã€èµ°å»Šã€è¿æ¥å…³ç³»ä»¥åŠè§’è‰²ä½ç½®</strong>ï¼ŒæŒ‰ç»Ÿä¸€è§„åˆ™ <strong>æ˜ å°„</strong> åˆ°ä¸€å—ç¼©æ”¾åçš„ç”»å¸ƒä¸Šè¿›è¡Œå¯è§†åŒ–ã€‚</p>
<blockquote>
<p>ğŸŒŸ å› æ­¤ï¼Œä¸€ä¸ªå¥½çš„å°åœ°å›¾é€šå¸¸å…·å¤‡ä»¥ä¸‹ <strong>ç‰¹å¾</strong>ï¼š</p>
<ul>
<li>ä¸çœŸå®åœ°å›¾ç»“æ„ä¿æŒä¸€è‡´ï¼Œä½†è¡¨ç°å½¢å¼æ›´åŠ ç®€åŒ–</li>
<li>ä¸æ‰¿è½½æ¸¸æˆé€»è¾‘ï¼Œåªè´Ÿè´£ <strong>å±•ç¤ºç»“æœ</strong></li>
<li>èƒ½æ¸…æ™°è¡¨è¾¾ <strong>æˆ¿é—´åˆ†å¸ƒã€è·¯å¾„èµ°å‘å’Œå½“å‰ä½ç½®</strong></li>
</ul>
<p><code>å°åœ°å›¾</code> ä¸ä»…æ˜¯ä¸€ä¸ªè¾…åŠ© <strong>UI</strong>ï¼Œæ›´æ˜¯ä¸€ç§ <strong>å¯¹åœ°å›¾æ¢ç´¢çš„å³æ—¶åé¦ˆ</strong>ï¼Œå°† <strong>è¿·è·¯</strong> çš„ <code>ä¸å®‰</code> è½¬åŒ–ä¸ºæ¢ç´¢çš„ <code>ä¹è¶£</code>ã€‚</p>
</blockquote>
<h4 data-id="heading-30">2. å‡†å¤‡</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f71aeb227804a61b92773ae5ad1000f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334355&amp;x-signature=vMzy%2FXalTIAKKgMU9NVJBQ4Ip4o%3D" alt="åœ°å›¾ç´ æ.png" loading="lazy"/></p>
<h4 data-id="heading-31">3. å®ç°</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90922a50bac2489c9fdfc94fcf1348e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334355&amp;x-signature=9D8p3NNj%2BtLBs2KGP1Ytxw6dMiM%3D" alt="å°åœ°å›¾.png" loading="lazy"/></p>
<h5 data-id="heading-32">(1) <code>onLoad</code> åˆå§‹åŒ–</h5>
<p>åœ¨ <code>onLoad</code> é˜¶æ®µï¼Œå°åœ°å›¾å®Œæˆ <strong>ä¸¤ä»¶å…³é”®å·¥ä½œ</strong>ï¼š</p>
<ul>
<li>æ ¹æ®å±å¹•å°ºå¯¸ï¼Œè®¾ç½®è‡ªèº«å¤§å°ï¼ˆé€šå¸¸ä¸ºå±å¹•å®½åº¦çš„ä¸€å®šæ¯”ä¾‹ï¼‰</li>
</ul>
<pre><code class="hljs language-dart" lang="dart">    <span class="hljs-comment">// è®¾ç½®å°åœ°å›¾å°ºå¯¸ä¸ºå±å¹•å®½åº¦çš„ 20%</span>
    <span class="hljs-keyword">final</span> side = game.size.x * <span class="hljs-number">0.2</span>;
</code></pre>
<ul>
<li>å›ºå®šé”šç‚¹åœ¨å³ä¸Šè§’ï¼Œå¹¶é¢„ç•™å®‰å…¨è¾¹è·ï¼Œé¿å…é®æŒ¡ä¸»è¦æ¸¸æˆåŒºåŸŸ</li>
</ul>
<pre><code class="hljs language-dart" lang="dart">    <span class="hljs-comment">// è®¾ç½®ä½ç½®åœ¨å³ä¸Šè§’ï¼Œç•™å‡º 20 åƒç´ è¾¹è·</span>
    position = Vector2(game.size.x - <span class="hljs-number">20</span>, <span class="hljs-number">20</span>);
</code></pre>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œå°åœ°å›¾åœ¨æ­¤é˜¶æ®µ <strong>è®¢é˜…å…³å¡åŠ è½½å™¨çš„åœ°å›¾å˜æ›´äº‹ä»¶</strong>ã€‚</p>
<pre><code class="hljs language-dart" lang="dart">    <span class="hljs-comment">// ç›‘å¬åœ°å›¾åŠ è½½äº‹ä»¶</span>
    <span class="hljs-keyword">final</span> LevelLoader loader = game.levelLoader;
    _applyCombined(loader.currentCombinedMap);
    loader.mapNotifier.addListener(() {
      _applyCombined(loader.mapNotifier.value);
    });
</code></pre>
<p>è¿™æ„å‘³ç€ï¼š</p>
<blockquote>
<p>æ¯å½“åœ°ç‰¢è¢« <strong>é‡æ–°ç”Ÿæˆæˆ–åˆ‡æ¢</strong>ï¼Œå°åœ°å›¾éƒ½ä¼š <strong>è‡ªåŠ¨</strong> æ”¶åˆ°é€šçŸ¥å¹¶ <strong>åˆ·æ–°</strong> æ˜¾ç¤ºå†…å®¹ã€‚</p>
</blockquote>
<h5 data-id="heading-33">(2) <code>_applyCombined</code> è§£æå¹¶ç¼“å­˜åœ°å›¾ç»“æ„</h5>
<p>åˆå§‹åŒ–å®Œæˆåï¼Œå½“æ–°çš„åœ°å›¾æ•°æ®åˆ°è¾¾æ—¶ï¼Œå°åœ°å›¾è¿›å…¥ <strong>è§£æé˜¶æ®µ</strong>ã€‚</p>
<p>é¦–å…ˆï¼Œä»ç»„åˆåœ°å›¾ä¸­ <strong>è¯»å–å¹¶ç¼“å­˜</strong>ï¼š</p>
<ul>
<li>ä¸–ç•Œåœ°å›¾å·¦ä¸Šè§’åæ ‡ï¼ˆtopLeftï¼‰</li>
<li>ä¸–ç•Œåœ°å›¾æ•´ä½“å°ºå¯¸ï¼ˆsizeï¼‰</li>
</ul>
<p>è¿™ä¸¤é¡¹æ•°æ®å®šä¹‰äº†<strong>ä¸–ç•Œåæ ‡ç³»åˆ°å°åœ°å›¾åæ ‡ç³»çš„è½¬æ¢åŸºå‡†</strong>ã€‚</p>
<p>éšåï¼Œå°åœ°å›¾éå†éšæœºåœ°ç‰¢åœ°å›¾ä¸­çš„æ‰€æœ‰ <strong>ç‰‡æ®µï¼ˆsegmentsï¼‰</strong>ï¼Œå¹¶æ ¹æ®ç±»å‹è¿›è¡Œå¤„ç†ï¼š</p>
<ul>
<li><code>èµ°å»Š â†’ ç”Ÿæˆèµ°å»ŠçŸ©å½¢</code></li>
<li><code>æˆ¿é—´ â†’ ç”Ÿæˆæˆ¿é—´çŸ©å½¢ â†’ åœ¨åŸºç¡€ä¸Šé¢å¤–è®°å½•æ ‡è®°ä¿¡æ¯</code></li>
</ul>
<pre><code class="hljs language-dart" lang="dart">  <span class="hljs-comment">/// <span class="markdown">åº”ç”¨æ–°çš„åœ°å›¾æ•°æ®</span></span>
  <span class="hljs-comment">///</span>
  <span class="hljs-comment">/// <span class="markdown">å½“ç”Ÿæˆæ–°åœ°ç‰¢æ—¶è°ƒç”¨ï¼Œé‡æ–°è®¡ç®—æ‰€æœ‰æˆ¿é—´å’Œèµ°å»Šçš„æ˜¾ç¤ºçŸ©å½¢ã€‚</span></span>
  <span class="hljs-keyword">void</span> _applyCombined(CombinedMap? m) {
    ...

    <span class="hljs-comment">// ä½¿ç”¨ MapCombiner è®¡ç®—å‡ºçš„å®Œæ•´ 3x3 è¾¹ç•Œ</span>
    _worldTopLeft = m.topLeft.clone();
    _worldSize = m.size.clone();

    <span class="hljs-comment">// éå†æ‰€æœ‰åœ°å›¾ç‰‡æ®µï¼Œè®¡ç®—å®ƒä»¬åœ¨å°åœ°å›¾ä¸Šçš„ç›¸å¯¹ä½ç½®</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> seg <span class="hljs-keyword">in</span> m.segments) {
      <span class="hljs-keyword">final</span> rect = _computeSegmentRect(seg);
      <span class="hljs-keyword">if</span> (seg.mapName.endsWith(<span class="hljs-string">'hallway.tmx'</span>)) {
        _corridorRects.add(rect);
      } <span class="hljs-keyword">else</span> {
        _roomRects.add(rect);

        <span class="hljs-comment">// è¯†åˆ«å¹¶æ·»åŠ ç‰¹æ®Šæˆ¿é—´æ ‡è®°</span>
        <span class="hljs-built_in">String?</span> type;
        <span class="hljs-keyword">if</span> (seg.mapName.endsWith(<span class="hljs-string">'room_start.tmx'</span>))
          type = <span class="hljs-string">'start'</span>;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (seg.mapName.endsWith(<span class="hljs-string">'room_boss.tmx'</span>))
          type = <span class="hljs-string">'boss'</span>;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (seg.mapName.endsWith(<span class="hljs-string">'room_shop.tmx'</span>))
          type = <span class="hljs-string">'shop'</span>;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (seg.mapName.endsWith(<span class="hljs-string">'room_treasure.tmx'</span>))
          type = <span class="hljs-string">'treasure'</span>;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (seg.mapName.endsWith(<span class="hljs-string">'room_battle.tmx'</span>))
          type = <span class="hljs-string">'battle'</span>;

        <span class="hljs-keyword">if</span> (type != <span class="hljs-keyword">null</span>) {
          _markers.add(_Marker(type, rect));
        }
      }
    }
  }
</code></pre>
<h5 data-id="heading-34">(3) <code>render</code> å°åœ°å›¾ç»˜åˆ¶é˜¶æ®µ</h5>
<p>æ¯ä¸€å¸§æ¸²æŸ“æ—¶ï¼Œå°åœ°å›¾æŒ‰ç…§å›ºå®šé¡ºåºç»˜åˆ¶æ‰€æœ‰å†…å®¹ã€‚</p>
<ul>
<li>
<p><strong>èƒŒæ™¯ä¸è¾¹æ¡†</strong></p>
<p>é¦–å…ˆç»˜åˆ¶åŠé€æ˜èƒŒæ™¯å’Œå¤–è¾¹æ¡†ï¼Œç”¨äºæ˜ç¡® <code>MinimapHud</code> åŒºåŸŸè¾¹ç•Œã€‚</p>
<pre><code class="hljs language-dart" lang="dart">    <span class="hljs-comment">// ç»˜åˆ¶èƒŒæ™¯å’Œè¾¹æ¡†</span>
    <span class="hljs-keyword">final</span> bgRect = Rect.fromLTWH(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, size.x, size.y);
    canvas.drawRect(bgRect, _bgPaint);
    canvas.drawRect(bgRect, _borderPaint);
</code></pre>
</li>
<li>
<p><strong>è®¡ç®—ç¼©æ”¾ä¸åç§»</strong></p>
<p>éšåï¼Œæ ¹æ®ä¸–ç•Œåœ°å›¾å°ºå¯¸ä¸å°åœ°å›¾å¯ç”¨åŒºåŸŸï¼Œè®¡ç®—åˆé€‚çš„ <strong>ç¼©æ”¾æ¯”ä¾‹</strong>ã€‚<br/>
è¿™ä¸€è®¡ç®—ä¿è¯äº†æ— è®ºåœ°ç‰¢å¸ƒå±€å¦‚ä½• <strong>å˜åŒ–</strong>ï¼Œ<strong>3Ã—3 ç½‘æ ¼</strong> åœ¨å°åœ°å›¾ä¸­çš„ä½ç½®å’Œå°ºåº¦å§‹ç»ˆ <strong>ç¨³å®š</strong>ã€‚</p>
<pre><code class="hljs language-dart" lang="dart">  <span class="hljs-built_in">double</span> _fitFactor() {
    <span class="hljs-keyword">final</span> availW = size.x - <span class="hljs-number">2</span> * _padding;
    <span class="hljs-keyword">final</span> availH = size.y - <span class="hljs-number">2</span> * _padding;

    <span class="hljs-keyword">final</span> fx = availW / _worldSize.x;
    <span class="hljs-keyword">final</span> fy = availH / _worldSize.y;

    <span class="hljs-comment">// å–å®½é«˜ä¸­è¾ƒå°çš„ç¼©æ”¾æ¯”ï¼Œç¡®ä¿å†…å®¹å®Œå…¨å¯è§</span>
    <span class="hljs-keyword">final</span> base = math.min(fx, fy);
    <span class="hljs-keyword">final</span> effectiveZoom = math.min(_zoom, <span class="hljs-number">1.0</span>);

    <span class="hljs-keyword">return</span> base * effectiveZoom * _contentScale;
  }
</code></pre>
</li>
<li>
<p><strong>ç»˜åˆ¶åœ°å›¾å†…å®¹ä¸çŠ¶æ€ä¿¡æ¯</strong></p>
<p>åœ¨ <strong>ç¼©æ”¾ä¸åç§»</strong> ç¡®å®šåï¼Œ<strong>æŒ‰å±‚çº§ä¾æ¬¡ç»˜åˆ¶</strong>ï¼š</p>
<ol>
<li>èµ°å»Šç»“æ„ï¼ˆæˆ¿é—´ä¹‹é—´çš„è¿æ¥ï¼‰</li>
<li>æˆ¿é—´è½®å»“ï¼ˆåœ°å›¾ä¸»ä½“ç»“æ„ï¼‰</li>
<li>è‹±é›„å½“å‰ä½ç½®ï¼ˆçº¢è‰²åœ†ç‚¹ï¼Œå®æ—¶æ›´æ–°ï¼‰</li>
<li>ç‰¹æ®Šæˆ¿é—´æ ‡è®°å›¾æ ‡ï¼ˆèµ·ç‚¹ã€Bossã€å•†åº—ç­‰ï¼‰</li>
</ol>
<p>æ‰€æœ‰å…ƒç´ å‡åŸºäºåŒä¸€å¥— <code>ä¸–ç•Œ â†’ å°åœ°å›¾</code> çš„åæ ‡æ˜ å°„è§„åˆ™ï¼Œç¡®ä¿ <strong>ç»“æ„ä¸è§’è‰²ä½ç½®</strong> çš„å‡†ç¡®å¯¹åº”ã€‚</p>
<pre><code class="hljs language-dart" lang="dart">    <span class="hljs-comment">// ç»˜åˆ¶èµ°å»Š</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> r <span class="hljs-keyword">in</span> _corridorRects) {
      drawRectScaled(r, _corridorPaint);
    }

    <span class="hljs-comment">// ç»˜åˆ¶æˆ¿é—´</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> r <span class="hljs-keyword">in</span> _roomRects) {
      drawRectScaled(r, _roomPaint);
    }

    <span class="hljs-comment">// ç»˜åˆ¶è‹±é›„ä½ç½®</span>
    <span class="hljs-keyword">final</span> heroX = heroMinimapX + centerOffsetX;
    <span class="hljs-keyword">final</span> heroY = heroMinimapY + centerOffsetY;
    canvas.drawCircle(Offset(heroX, heroY), <span class="hljs-number">3</span>, _heroPaint);

    <span class="hljs-comment">// ç»˜åˆ¶ç‰¹æ®Šæˆ¿é—´å›¾æ ‡</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> m <span class="hljs-keyword">in</span> _markers) {
      <span class="hljs-keyword">final</span> img = _icons[m.type];
      <span class="hljs-keyword">if</span> (img == <span class="hljs-keyword">null</span>) <span class="hljs-keyword">continue</span>;

      <span class="hljs-comment">// è®¡ç®—å›¾æ ‡ä½ç½®ï¼ˆå±…ä¸­æ˜¾ç¤ºåœ¨æˆ¿é—´çŸ©å½¢å†…ï¼‰</span>
      <span class="hljs-keyword">final</span> cx =
          m.rect.left * factor + centerOffsetX + m.rect.width * factor / <span class="hljs-number">2</span>;
      <span class="hljs-keyword">final</span> cy =
          m.rect.top * factor + centerOffsetY + m.rect.height * factor / <span class="hljs-number">2</span>;
      <span class="hljs-keyword">final</span> half = _iconSize / <span class="hljs-number">2</span>;

      <span class="hljs-keyword">final</span> dst = Rect.fromLTWH(cx - half, cy - half, _iconSize, _iconSize);
      <span class="hljs-keyword">final</span> src = Rect.fromLTWH(
        <span class="hljs-number">0</span>,
        <span class="hljs-number">0</span>,
        img.width.toDouble(),
        img.height.toDouble(),
      );
      canvas.drawImageRect(img, src, dst, Paint());
    }
</code></pre>
</li>
</ul>
<h5 data-id="heading-35">(4) <code>onMount</code> åŠ è½½ç‰¹æ®Šæ ‡è®°èµ„æº</h5>
<p>åœ¨ç»„ä»¶æ­£å¼æŒ‚è½½å®Œæˆåï¼Œå°åœ°å›¾åŠ è½½æ‰€éœ€çš„ <strong>ç‰¹æ®Šæ ‡è®°èµ„æº</strong>ã€‚</p>
<blockquote>
<p>å°†èµ„æºåŠ è½½æ”¾åœ¨ <code>onMount</code> é˜¶æ®µï¼Œå¯ä»¥é¿å…é˜»å¡åœ°å›¾è§£ææµç¨‹ï¼ŒåŒæ—¶ç¡®ä¿èµ„æºåœ¨é¦–æ¬¡æ¸²æŸ“å‰å·²å‡†å¤‡å°±ç»ªã€‚</p>
</blockquote>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-meta">@override</span>
  Future&lt;<span class="hljs-keyword">void</span>&gt; onMount() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">super</span>.onMount();
    <span class="hljs-comment">// åŠ è½½å›¾æ ‡èµ„æº</span>
    _icons[<span class="hljs-string">'start'</span>] = <span class="hljs-keyword">await</span> game.images.load(<span class="hljs-string">'map/start.png'</span>);
    _icons[<span class="hljs-string">'boss'</span>] = <span class="hljs-keyword">await</span> game.images.load(<span class="hljs-string">'map/boss.png'</span>);
    _icons[<span class="hljs-string">'treasure'</span>] = <span class="hljs-keyword">await</span> game.images.load(<span class="hljs-string">'map/treasure.png'</span>);
    _icons[<span class="hljs-string">'shop'</span>] = <span class="hljs-keyword">await</span> game.images.load(<span class="hljs-string">'map/shop.png'</span>);
    _icons[<span class="hljs-string">'battle'</span>] = <span class="hljs-keyword">await</span> game.images.load(<span class="hljs-string">'map/battle.png'</span>);
  }
</code></pre>
<h4 data-id="heading-36">4. æµç¨‹å›¾</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
  A[MinimapHud åˆ›å»º] --&gt; B[onLoad è®¾ç½®å¤§å°/ä½ç½®å¹¶è®¢é˜…åœ°å›¾]
  B --&gt; C[_applyCombined è§£æåœ°å›¾]
  C --&gt; C1[ä¿å­˜ topLeft/size]
  C --&gt; C2[éå† segments æ„å»ºæˆ¿é—´/èµ°å»ŠçŸ©å½¢ä¸æ ‡è®°]
  C --&gt; D[render ç»˜åˆ¶]
  D --&gt; D1[èƒŒæ™¯ä¸è¾¹æ¡†]
  D --&gt; D2[è®¡ç®—ç¼©æ”¾ä¸åç§»]
  D --&gt; D3[èµ°å»Š/æˆ¿é—´/è‹±é›„çº¢ç‚¹/æ ‡è®°å›¾æ ‡]
  A --&gt; E[onMount åŠ è½½å›¾æ ‡èµ„æº]
</code></pre>
<h3 data-id="heading-37">å…­. æ€»ç»“ä¸å±•æœ›</h3>
<h4 data-id="heading-38">æ€»ç»“</h4>
<p>æœ¬ç« ä¸»è¦ä»‹ç»äº† <strong>Flutter&amp;Flame</strong> å¼€å‘ <strong>2Dåƒç´ æ¸¸æˆ</strong> å…³äº <code>åœ°å›¾åˆ‡æ¢ã€éšæœºåœ°ç‰¢å’Œå°åœ°å›¾</code> çš„åŸºç¡€å®è·µã€‚<br/>
æˆªè‡³ç›®å‰ä¸ºæ­¢ï¼Œæ¸¸æˆä¸»è¦åŒ…æ‹¬äº†ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li><strong>è§’è‰²ä¸åŠ¨ç”»</strong>ï¼šä½¿ç”¨ç²¾çµå›¾ (<code>SpriteSheet</code>) åˆ›å»ºè§’è‰²ï¼Œæ”¯æŒ idle/run ç­‰åŠ¨ç”»çŠ¶æ€åˆ‡æ¢ã€‚</li>
<li><strong>ç©å®¶äº¤äº’</strong>ï¼šé€šè¿‡æ‘‡æ†æ§åˆ¶è§’è‰²ç§»åŠ¨ï¼Œå¹¶æ ¹æ®æ–¹å‘ç¿»è½¬åŠ¨ç”»ã€‚</li>
<li><strong>åœ°å›¾åŠ è½½</strong>ï¼šé€šè¿‡ <code>Tiled</code> ç»˜åˆ¶å¹¶åœ¨ <strong>Flame</strong> ä¸­åŠ è½½çš„ <strong>2dåƒç´ åœ°å›¾</strong>ã€‚</li>
<li><strong>åœ°å›¾äº¤äº’</strong>ï¼šé€šè¿‡ç»„ä»¶åŒ–æ¨¡å¼ï¼Œæ–°å»ºäº†å¤šä¸ªå¯ä¾›äº¤äº’çš„ç»„ä»¶å¦‚ï¼ˆ<strong>é—¨ã€é’¥åŒ™ã€å®ç®±ã€åœ°åˆº</strong>ï¼‰ï¼Œä¸ºæ¸¸æˆå¢åŠ äº†äº’åŠ¨æ€§ã€‚</li>
<li><strong>åœ°å›¾åˆ‡æ¢</strong>ï¼šé€šè¿‡ <code>ç»Ÿä¸€å…³å¡åŠ è½½å™¨</code> è¯»å–å½“å‰åœ°å›¾ä¸­å­˜å‚¨çš„ <strong>ç›®æ ‡åœ°å›¾</strong>ï¼Œå®ç°åŠ¨æ€åˆ‡æ¢ã€‚</li>
<li><strong>åœ°å›¾ç”Ÿæˆ</strong>ï¼šé€šè¿‡ <code>Tiled</code> ç»˜åˆ¶å‡ºä¸€æ‰¹é€šç”¨æˆ¿é—´ï¼Œè§„å®š <strong>åœ°å›¾å¤§å°ä¸æˆ¿é—´æ•°é‡</strong>ï¼Œé€šè¿‡ç®—æ³•ç”Ÿæˆ <strong>éšæœºåœ°å›¾</strong>ã€‚</li>
<li><strong>å°åœ°å›¾</strong>ï¼šé€šè¿‡ <code>å°åœ°å›¾</code>ï¼Œ å¯ä»¥æ¸…æ™°çš„ <strong>å¯è§†åŒ–</strong> çš„çœ‹æ¸…éšæœºåœ°å›¾ç»“æ„ã€‚</li>
<li><strong>ç»Ÿä¸€ç¢°æ’åŒºæ£€æµ‹</strong>ï¼šå°†è§’è‰²ä¸ <strong>éœ€è¦äº§ç”Ÿç¢°æ’</strong> çš„ç‰©ä½“ç»Ÿä¸€ç®¡ç†ï¼Œå¹¶å®ç°ç¢°æ’æ—¶çš„ <strong>å¹³æ»‘ä¾§ç§»</strong>ã€‚</li>
<li><strong>ç»Ÿä¸€äººç‰©é…ç½®åˆ›å»º</strong>ï¼š é€šè¿‡å°†è§’è‰²æ•°æ®é…ç½®ä¸ºæ–‡ä»¶ï¼Œè¾¾åˆ°ä»¥åŠ¨æ€æ•°æ®é©±åŠ¨æ¨¡å‹çš„ç›®çš„ã€‚</li>
<li><strong>HUDç•Œé¢</strong>ï¼š åŒ…æ‹¬ <code>äººç‰©è¡€é‡æ¡</code> å’Œ <code>æŠ€èƒ½æŒ‰é’®</code>ã€‚</li>
<li><strong>å®Œå–„çš„æ”»å‡»é€»è¾‘</strong>ï¼šé€šè¿‡ç»Ÿä¸€åŸºç±»å®ç°<code>è¿‘æˆ˜ã€è¿œç¨‹ã€å†²åˆº</code> çš„æ”»å‡»æ–¹å¼ å’Œ ç‹¬ç‰¹ <code>å¬å”¤</code> æŠ€èƒ½ã€‚</li>
</ul>
<h4 data-id="heading-39">å±•æœ›</h4>
<ul>
<li>
<p>æ€è€ƒ ğŸ¤” ä¸€ä¸ªæœ‰è¶£çš„æ¸¸æˆæœºåˆ¶ing ...</p>
</li>
<li>
<p>æ¨¡ä»¿å…ƒæ°”éª‘å£«çš„æ­¦å™¨æœºåˆ¶</p>
</li>
<li>
<p>å®Œå–„éšæœºåœ°ç‰¢å†…æ¸¸æˆå†…å®¹</p>
</li>
<li>
<p>è¿›é˜¶è¿™ä¸ªdemoç‰ˆ</p>
</li>
<li>
<p>æ”¯æŒå±€åŸŸç½‘å¤šç©å®¶è”æœºåŠŸèƒ½ã€‚</p>
</li>
</ul>
<blockquote>
<p><a href="https://link.juejin.cn?target=http%3A%2F%2Fmyhero.shanchen.space" target="_blank" title="http://myhero.shanchen.space" ref="nofollow noopener noreferrer">ğŸ® MyHero åœ¨çº¿ä½“éªŒ</a><br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTheSyart%2Fmyhero" target="_blank" title="https://github.com/TheSyart/myhero" ref="nofollow noopener noreferrer">ğŸšª github æºç </a><br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.shanchen.space" target="_blank" title="https://www.shanchen.space" ref="nofollow noopener noreferrer">ğŸ’» ä¸ªäººé—¨æˆ·ç½‘ç«™</a></p>
</blockquote>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48d840c0943b48dc974afc9d4952fefd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767334355&amp;x-signature=r%2F%2BbtXUSf7SE9fGN3oEEaobSko4%3D" width="100%" loading="lazy"/></p><p/>
<p align="center"><i>ä¹‹å‰å°è¯•çš„Demoé¢„è§ˆ</i></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vue-plugin-hiprintæ‰“å°é«˜åº¦ä¸å¤Ÿï¼Œæç¤ºï¼šæ²¡æœ‰è¶³å¤Ÿç©ºé—´,æ˜¾ç¤ºä¸‹æ–¹å†…å®¹ï¼Œé—®é¢˜å¤„ç†æ–¹æ¡ˆåŠå®æ“]]></title>    <link>https://juejin.cn/post/7587961565475930166</link>    <guid>https://juejin.cn/post/7587961565475930166</guid>    <pubDate>2025-12-26T06:26:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587961565475930166" data-draft-id="7587713001715204150" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vue-plugin-hiprintæ‰“å°é«˜åº¦ä¸å¤Ÿï¼Œæç¤ºï¼šæ²¡æœ‰è¶³å¤Ÿç©ºé—´,æ˜¾ç¤ºä¸‹æ–¹å†…å®¹ï¼Œé—®é¢˜å¤„ç†æ–¹æ¡ˆåŠå®æ“"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-12-26T06:26:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çŒ©çƒä¸­çš„æœ¨å­"/> <meta itemprop="url" content="https://juejin.cn/user/1374850183871056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vue-plugin-hiprintæ‰“å°é«˜åº¦ä¸å¤Ÿï¼Œæç¤ºï¼šæ²¡æœ‰è¶³å¤Ÿç©ºé—´,æ˜¾ç¤ºä¸‹æ–¹å†…å®¹ï¼Œé—®é¢˜å¤„ç†æ–¹æ¡ˆåŠå®æ“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1374850183871056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çŒ©çƒä¸­çš„æœ¨å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T06:26:09.000Z" title="Fri Dec 26 2025 06:26:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æœ€è¿‘åœ¨ä½¿ç”¨vue-plugin-hiprintçš„æ—¶å€™å‡ºç°äº†æ‰“å°é«˜åº¦ä¸å¤Ÿçš„æƒ…å†µï¼ŒåŒæ—¶å‘ç°ä½œè€…å·²ç»åœæ­¢äº†å…è´¹ç‰ˆçš„ç»´æŠ¤ï¼Œä½†æ˜¯åœ¨æ”¶è´¹ç‰ˆsvprintä¸Šå·²ç»è§£å†³äº†è¯¥é—®é¢˜,å…¬å¸æ›´å¸Œæœ›ä½¿ç”¨å…è´¹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±æ¥çœ‹çœ‹æ€ä¹ˆå¤„ç†è¿™ä¸ªé—®é¢˜ã€‚</p>
<h3 data-id="heading-1">bugçš„ç°è±¡</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9132643bf63b4ef68adec48fbc749d9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54yp55CD5Lit55qE5pyo5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767335630&amp;x-signature=ZM7AariBcOf%2B14itjz1DOBBHWRc%3D" alt="91170a01bf006518dfe82d64abaed772.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32a0004922c444d5af87524437e3c605~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54yp55CD5Lit55qE5pyo5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767335630&amp;x-signature=AZAqlJSxIbYz2wx1B3947ThuZqw%3D" alt="image.png" loading="lazy"/></p>
<p>ps:é—®é¢˜é“¾æ¥<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2FCcSimple%2Fvue-plugin-hiprint%2Fissues%2FI9FEAD" target="_blank" title="https://gitee.com/CcSimple/vue-plugin-hiprint/issues/I9FEAD" ref="nofollow noopener noreferrer">gitee.com/CcSimple/vuâ€¦</a></p>
<h3 data-id="heading-2">è§£å†³æ–¹æ¡ˆ</h3>
<p>ä¸€èˆ¬å‡ºç°è¿™ç§æ’ä»¶çš„bugï¼Œå¤„ç†æ–¹æ¡ˆæ— éå°±æ˜¯å¦‚ä¸‹å‡ ç§</p>
<ol>
<li>é—®é¢˜è½¬ç§»ï¼šå³ä½¿ç”¨å…¶å®ƒç¬¬ä¸‰æ–¹æ’ä»¶æˆ–è€…è‡ªå·±ç¼–å†™ä¸€ä¸ªæ’ä»¶è§£å†³bug</li>
<li>é—®é¢˜æ¥å—ï¼šè®¤å¯è¿™ä¸ªé—®é¢˜çš„ç»“æœï¼Œæ— éœ€ç†ä¼š</li>
<li>é—®é¢˜è§„é¿ï¼šæ›´æ¢é¡¹ç›®è®¾è®¡ä¹‹ç±»çš„</li>
<li>é—®é¢˜ä¸ŠæŠ¥ï¼šæäº¤issuesç­‰å¾…ç¬¬ä¸‰æ–¹çš„æ’ä»¶å¼€å‘è€…ä¿®å¤ï¼Œç„¶åæ›´æ–°æ’ä»¶åˆ°ä¿®å¤ç‰ˆ</li>
</ol>
<p>ps: é—æ†¾çš„æ˜¯é€šè¿‡æŸ¥é˜…å¼€æºé¡¹ç›®çš„è¯´æ˜ï¼Œå‘ç°è¿™ä¸ªå·²ç»åœæ­¢ç»´æŠ¤äº†ï¼Œä½†æ˜¯é¢†å¯¼åˆä¸æƒ³ä½¿ç”¨æ”¶è´¹çš„ï¼Œåˆ‡æ¢ä¸€ä¸ªæ–°çš„æ’ä»¶ï¼Œè´Ÿæ‹…ä¹Ÿæ¯”è¾ƒé‡ï¼Œäºæ˜¯åªèƒ½å»æŸ¥é˜…å®ƒçš„æºç äº†</p>
<h3 data-id="heading-3">ä»£ç åˆ†æ</h3>
<p>é€šè¿‡æŸ¥é˜…æºç å‘ç°é—®é¢˜å‡ºåœ¨ä¸‹é¢è¿™ä¸ªä»£ç å—
ä»–çš„é€»è¾‘æ˜¯è¯»å–æ¨¡æ¿çš„æ¯ä¸€ä¸ªå…ƒç´ å—ï¼Œæ¸²æŸ“æˆdomï¼Œè®¡ç®—é«˜åº¦ï¼Œå½“å½“å‰é¡µé¢çš„é«˜åº¦ä¸å¤Ÿå±•ç¤ºä¸€ä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œå°±ä¼šåœ¨è¿™ä¸ªç©ºéš™ä¸­è¿”å›ï¼šæ²¡æœ‰è¶³å¤Ÿç©ºé—´,æ˜¾ç¤ºä¸‹æ–¹å†…å®¹, å¯åˆ†é¡µé«˜åº¦
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99bceaa053e84ef99e01245fbc21a929~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54yp55CD5Lit55qE5pyo5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767335630&amp;x-signature=vuUONls50ISPt9ToI9ZCbeg7ijw%3D" alt="image.png" loading="lazy"/></p>
<p>ä¼˜åŒ–æ€è·¯
é€šè¿‡è¿™ä¸ªï¼Œå°±åœ¨æƒ³å¦‚æœå½“å‰é¡µä¸å¤Ÿï¼Œé‚£ä¹ˆå…ƒç´ æ¸²æŸ“åˆ°ä¸‹ä¸€é¡µæ€æ ·ï¼Ÿ
äºæ˜¯å¼€å§‹åŠ¨æ‰‹</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//æ€è·¯ å½“m(åˆ†é¡µhtmlæ²¡æœ‰è·å–åˆ°tr) ä¸” curRowæœ‰æ•°æ®ï¼ˆæ€»çš„domä¸Šæ˜¯æœ‰æ•°æ®çš„ï¼‰ é‚£ä¹ˆå°±è¯´æ˜é«˜åº¦ä¸å¤Ÿäº†,ç†åº”å¡«å……è¡¨å¤´</span>
        <span class="hljs-keyword">if</span> (m == <span class="hljs-number">0</span> &amp;&amp; curRow.<span class="hljs-property">length</span> &amp;&amp; g == curRow.<span class="hljs-title function_">data</span>(<span class="hljs-string">"rowData"</span>)) {
          <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">target</span>: $(<span class="hljs-string">'&lt;div&gt;&lt;/div&gt;'</span>),<span class="hljs-comment">//å…ƒç´ ä¸ºdivç©ºå…ƒç´ </span>
            <span class="hljs-attr">length</span>: <span class="hljs-number">0</span>,<span class="hljs-comment">//è¿™é‡Œå¡«0å®é™…æ²¡æœ‰æ¸²æŸ“æ•°é‡</span>
            <span class="hljs-attr">height</span>: _assets_plugins_hinnn__WEBPACK_IMPORTED_MODULE_3__.<span class="hljs-property">a</span>.<span class="hljs-property">px</span>.<span class="hljs-title function_">toPt</span>(s),<span class="hljs-comment">//é«˜åº¦ä¸ºå‰©ä½™é«˜åº¦</span>
            <span class="hljs-attr">isEnd</span>: !<span class="hljs-number">1</span> <span class="hljs-comment">//è¡¨ç¤ºæœ‰ä¸‹ä¸€é¡µ</span>
          }
        }
</code></pre>
<h3 data-id="heading-4">ä¿®å¤åçš„æ•ˆæœå¦‚ä¸‹</h3>
<p>çº¢è‰²åŒºåŸŸçš„è¢«divå æ®ï¼Œåé¢çš„æ•°æ®æ¸²æŸ“åˆ°ä¸‹ä¸€é¡µäº†ï¼Œèƒ½æ­£å¸¸ä½¿ç”¨äº†ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e8723d869d64caba6ab6c7579b6c60f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54yp55CD5Lit55qE5pyo5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767335630&amp;x-signature=N0BXDosMkAlgQsWyl7%2BH27BefnA%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-5">å¦‚ä½•åº”ç”¨ä¿®å¤çš„æ’ä»¶ä»£ç </h2>
<ol>
<li>è¦çŸ¥é“æˆ‘ä»¬çš„æ’ä»¶éƒ½æ˜¯ç”±ç¬¬ä¸‰æ–¹çš„ä½œè€…å¼€æºåˆ°npmä¸Šçš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬é‡‡å–çš„ç¬¬ä¸€ä¸ªæ–¹æ¡ˆå°±æ˜¯æŠŠè¿™ä¸ªä¸œè¥¿æ”¾åˆ°npmä¸Šï¼Œè¿™ä¸ªè¿‡ç¨‹å°±ä¸å†èµ˜è¿°äº†</li>
<li>ä¹Ÿå¯ä»¥æ‰˜ç®¡åˆ°gitç§ä»“ä¸Šï¼Œè¿™é‡Œæˆ‘å»ºäº†ä¸€ä¸ªä»“åº“å­˜æ”¾ï¼Œæºç æ‰“åŒ…åçš„å†…å®¹ã€‚</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4eb1f621c6d4d8eb560344ef53f48f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54yp55CD5Lit55qE5pyo5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767335630&amp;x-signature=1dw%2BB0iDa0%2FA5UIoYZfizdZjksk%3D" alt="image.png" loading="lazy"/></p>
<p>3è®°å¾—å¯¹æäº¤çš„æ‰“åŒ…äº§ç‰©æ‰“ä¸Šæ ‡ç­¾ç”¨æ¥åšç‰ˆæœ¬å·
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb14c059226c4dd3a1fa9c363730eaa5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54yp55CD5Lit55qE5pyo5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767335630&amp;x-signature=Hlrra2KGUt53yir0wCcv8lfOWmU%3D" alt="image.png" loading="lazy"/></p>
<p>4æœ€ååœ¨packageçš„é…ç½®ä¸­æŒ‡å‘ä½ çš„æºç åº“
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db894c61557947ab9448bfd574f8f7d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54yp55CD5Lit55qE5pyo5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767335630&amp;x-signature=RM5LJaQJoIsIEiLImLoxZ4u6yqI%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//é…ç½®gitçš„åœ°å€åŠ #ç‰ˆæœ¬å·</span>
<span class="hljs-string">"vue-plugin-hiprint"</span>: <span class="hljs-string">"git+http://xxxxx:9080/xxxx/hiprint-lib.git#v0.0.71"</span>,
</code></pre>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p>ä¸»è¦æœ‰3ä¸ªæ”¶è·</p>
<ol>
<li>å¯¹vue-plugin-hiprintçš„å†…éƒ¨é€»è¾‘çš„å®ç°è¿›è¡Œäº†ç ”ç©¶ï¼Œç§¯ç´¯äº†è¿™æ–¹é¢çš„ç»éªŒã€‚</li>
<li>ä¸ªäººä¹Ÿå®ç°äº†ä¸€ä¸ªåŒ…ç®¡ç†çš„æµç¨‹ï¼Œè™½ç„¶npmçš„æ›´è§„èŒƒï¼Œä½†æ˜¯æˆ‘ä»¬è¿™æ˜¯å°å…¬å¸ï¼Œä»–ä»¬æ›´å¸Œæœ›èƒ½è‡ªå·±ç®¡ç†è‡ªå·±çš„ä»£ç ï¼Œæ‰€ä»¥æ˜¯å‘å¸ƒåˆ°npmè¿˜æ˜¯ä½¿ç”¨gitéƒ½è¡Œï¼Œæœ€ç»ˆç›®çš„è¾¾åˆ°å°±è¡Œäº†ã€‚</li>
<li>å‘ç°äº†vue-plugin-hiprintå†…éƒ¨æ··æ·†ä»£ç åçš„forå¾ªç¯çš„å¦ä¸€ç§å†™æ³•,ä»¥åæƒ³è£…ä¸€ä¸‹å°±æœ‰æ€è·¯äº†ï¼Œå“ˆå“ˆ</li>
</ol>
<pre><code class="hljs language-ini" lang="ini">//è¿™ä¸ªè¿™ä¸ªforå¾ªç¯çš„åˆå§‹åŒ–éƒ¨åˆ†æœ‰ä¸‰ä¸ªè¡¨è¾¾å¼ï¼š
//1.  `var <span class="hljs-attr">d</span> = n.find(<span class="hljs-string">".hiprint-printElement-tableTarget:eq("</span> + u + <span class="hljs-string">")"</span>)`
//2.  `<span class="hljs-attr">c</span> = void <span class="hljs-number">0</span>`
//3.  `<span class="hljs-attr">h</span> = []`
//è¿™ä¸ªå¾ªç¯æ²¡æœ‰æ¡ä»¶åˆ¤æ–­ï¼Œä¹Ÿæ²¡æœ‰é€’å¢æ­¥éª¤ï¼Œæ‰€ä»¥å®ƒå°†æ˜¯ä¸€ä¸ªæ— é™å¾ªç¯ï¼Œé™¤éåœ¨å¾ªç¯ä½“å†…æœ‰`break`è¯­å¥æ¥è·³å‡ºå¾ªç¯
for (var <span class="hljs-attr">d</span> = n.find(<span class="hljs-string">".hiprint-printElement-tableTarget:eq("</span> + u + <span class="hljs-string">")"</span>), c = void <span class="hljs-number">0</span>, h = []<span class="hljs-comment">; ;) </span>

//è¿™ä¸ªå’Œä¸Šä¸€ä¸ªç±»ä¼¼ï¼Œå½“Â `l`Â ä¸ºÂ `false`Â æ—¶ï¼Œ`!l`Â ä¸ºÂ `true`ï¼Œå¾ªç¯ç»§ç»­ï¼Œå½“Â `l`Â å˜ä¸ºÂ `true`Â æ—¶ï¼Œ`!l`Â ä¸ºÂ `false`ï¼Œå¾ªç¯ç»“æŸã€‚
for (var a, <span class="hljs-attr">p</span> = this.getBeginPrintTopInPaperByReferenceElement(t), s = <span class="hljs-number">0</span>, l = !<span class="hljs-number">1</span><span class="hljs-comment">; !l;)</span>

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flink åˆ° Doris æ•°æ®åŒæ­¥----ä»äºŒé˜¶æ®µæäº¤åˆ°å¹‚ç­‰æ€§ StreamLoader çš„æ¼”è¿›ä¹‹è·¯]]></title>    <link>https://juejin.cn/post/7587688765189177344</link>    <guid>https://juejin.cn/post/7587688765189177344</guid>    <pubDate>2025-12-26T06:29:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587688765189177344" data-draft-id="7587675306658693120" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flink åˆ° Doris æ•°æ®åŒæ­¥----ä»äºŒé˜¶æ®µæäº¤åˆ°å¹‚ç­‰æ€§ StreamLoader çš„æ¼”è¿›ä¹‹è·¯"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-12-26T06:29:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯­è½å¿ƒç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2875978147955741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flink åˆ° Doris æ•°æ®åŒæ­¥----ä»äºŒé˜¶æ®µæäº¤åˆ°å¹‚ç­‰æ€§ StreamLoader çš„æ¼”è¿›ä¹‹è·¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978147955741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯­è½å¿ƒç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T06:29:19.000Z" title="Fri Dec 26 2025 06:29:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é—®é¢˜èƒŒæ™¯</h2>
<p>åœ¨å®æ—¶æ•°æ®ä»“åº“å»ºè®¾ä¸­ï¼Œ<strong>Flink</strong> ä½œä¸ºæµå¤„ç†å¼•æ“çš„äº‹å®æ ‡å‡†ï¼Œ<strong>Doris</strong> ä½œä¸º OLAP æ•°æ®åº“çš„æ–°ç§€ï¼Œä¸¤è€…çš„ç»“åˆæˆä¸ºä¼ä¸šå®æ—¶æ•°æ®å¹³å°çš„å¸¸è§æ¶æ„é€‰æ‹©ã€‚</p>
<p>ç„¶è€Œï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­æˆ‘ä»¬é‡åˆ°äº†ä¸€ä¸ªæ™®éçš„ç—›ç‚¹ï¼š</p>
<blockquote>
<p><strong>"ä½¿ç”¨å®˜æ–¹çš„ doris-flink-connectorï¼Œå…¶åŸºäº Checkpoint çš„äºŒé˜¶æ®µæäº¤ï¼ˆ2PCï¼‰æœºåˆ¶åœ¨åƒä¸‡çº§åˆ«æ•°æ®åŒæ­¥æ—¶ï¼Œååé‡ç“¶é¢ˆæ˜æ˜¾ï¼Œå¹³å‡å»¶è¿Ÿä»ç§’çº§è·³å‡åˆ°åˆ†é’Ÿçº§ã€‚"</strong></p>
</blockquote>
<p>è¿™ç¯‡æ–‡ç« å°†è¯¦ç»†å±•ç¤ºæˆ‘ä»¬å¦‚ä½•ä»ä¼ ç»Ÿçš„ checkpoint äºŒé˜¶æ®µæäº¤ï¼Œé€æ­¥æ¼”è¿›åˆ°åŸºäº Doris Label äº‹åŠ¡æ ‡è¯†çš„åˆ†æ‰¹ StreamLoad æäº¤ï¼Œæœ€ç»ˆè½åœ°åˆ°ä½¿ç”¨ Doris StreamLoader ä¿è¯å¹‚ç­‰æ€§çš„å®Œæ•´æ–¹æ¡ˆã€‚</p>
<hr/>
<h2 data-id="heading-1">ç¬¬ä¸€éƒ¨åˆ†ï¼šé—®é¢˜è¯Šæ–­</h2>
<h3 data-id="heading-2">1.1 å®˜æ–¹ Doris-Flink-Connector çš„æ¶æ„</h3>
<p>Doris-Flink-Connector é‡‡ç”¨æ ‡å‡†çš„ Flink Sink è®¾è®¡ï¼ŒåŸºäº Checkpoint çš„äºŒé˜¶æ®µæäº¤ï¼ˆ2PCï¼‰æ¥ä¿è¯ <strong>ç²¾ç¡®ä¸€æ¬¡æ€§ï¼ˆExactly-Onceï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Flink DataStream Pipeline            â”‚
â”‚                                              â”‚
â”‚  Source â†’ <span class="hljs-attribute">Transform</span> â†’ Doris Sink             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   DorisSink (<span class="hljs-number">2PC</span>)       â”‚
         â”‚                         â”‚
         â”‚  ç¬¬ä¸€é˜¶æ®µï¼šé¢„æäº¤        â”‚
         â”‚  â””â”€ å°†æ•°æ®å†™å…¥ç¼“å†²     â”‚
         â”‚                         â”‚
         â”‚  ç¬¬äºŒé˜¶æ®µï¼šCheckpoint   â”‚
         â”‚  â””â”€ çœŸæ­£æäº¤åˆ° Doris   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>äºŒé˜¶æ®µæäº¤çš„ç”Ÿå‘½å‘¨æœŸ</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¼ªä»£ç ï¼šå®˜æ–¹è¿æ¥å™¨çš„äºŒé˜¶æ®µæäº¤æµç¨‹</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">DorisSink2PC</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">write</span>(<span class="hljs-params">self, record</span>):
        <span class="hljs-comment"># ç¬¬ä¸€é˜¶æ®µï¼šæ•°æ®è¿›å…¥ç¼“å†²é˜Ÿåˆ—</span>
        self.buffer.append(record)
        <span class="hljs-keyword">if</span> self.buffer.size &gt;= self.batch_size:
            self.flush_buffer()  <span class="hljs-comment"># æœ¬åœ°ç¼“å†²</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">flush_buffer</span>(<span class="hljs-params">self</span>):
        <span class="hljs-comment"># å°†ç¼“å†²æ•°æ®é€šè¿‡ Stream Load HTTP API å‘é€åˆ° Doris</span>
        <span class="hljs-comment"># ä½†æ­¤æ—¶è¿˜æœªæäº¤äº‹åŠ¡</span>
        response = http_post(
            url=<span class="hljs-string">f"http://<span class="hljs-subst">{doris_host}</span>:<span class="hljs-subst">{http_port}</span>/api/<span class="hljs-subst">{db}</span>/<span class="hljs-subst">{table}</span>/load"</span>,
            data=self.buffer,
            label=<span class="hljs-string">f"checkpoint_<span class="hljs-subst">{checkpoint_id}</span>_<span class="hljs-subst">{partition_id}</span>"</span>  <span class="hljs-comment"># ä½¿ç”¨ checkpoint ä½œä¸º label</span>
        )
        self.pending_commits.append(response.label)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">notify_checkpoint_complete</span>(<span class="hljs-params">self, checkpoint_id</span>):
        <span class="hljs-comment"># ç¬¬äºŒé˜¶æ®µï¼šCheckpoint å®Œæˆåï¼ŒçœŸæ­£æäº¤äº‹åŠ¡</span>
        <span class="hljs-keyword">for</span> label <span class="hljs-keyword">in</span> self.pending_commits:
            commit_load_task(label)  <span class="hljs-comment"># å‘ Doris å‘é€æäº¤è¯·æ±‚</span>
        self.pending_commits.clear()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">abort_checkpoint</span>(<span class="hljs-params">self, checkpoint_id</span>):
        <span class="hljs-comment"># Checkpoint å¤±è´¥æ—¶ï¼Œå›æ»šæœªæäº¤çš„åŠ è½½ä»»åŠ¡</span>
        <span class="hljs-keyword">for</span> label <span class="hljs-keyword">in</span> self.pending_commits:
            abort_load_task(label)
        self.pending_commits.clear()
</code></pre>
<h3 data-id="heading-3">1.2 äºŒé˜¶æ®µæäº¤çš„æ€§èƒ½ç“¶é¢ˆ</h3>
<p>è™½ç„¶äºŒé˜¶æ®µæäº¤èƒ½ä¿è¯å¼ºä¸€è‡´æ€§ï¼Œä½†åœ¨å®æ—¶åœºæ™¯ä¸­å­˜åœ¨ä»¥ä¸‹ç“¶é¢ˆï¼š</p>






























<table><thead><tr><th>ç“¶é¢ˆç‚¹</th><th>åŸå› </th><th>å½±å“</th></tr></thead><tbody><tr><td><strong>Checkpoint åŒæ­¥ç­‰å¾…</strong></td><td>Flink éœ€è¦ç­‰å¾…æ‰€æœ‰ Source å¯¹é½ï¼Œæ‰èƒ½è§¦å‘ Checkpoint</td><td>ååé‡å—åˆ°æœ€æ…¢ Source çš„åˆ¶çº¦</td></tr><tr><td><strong>Doris äº‹åŠ¡é”ç«äº‰</strong></td><td>å¤šä¸ªå¹¶è¡Œåº¦çš„ä»»åŠ¡åŒæ—¶ç­‰å¾…äº‹åŠ¡æäº¤ï¼Œå¯¼è‡´é”ç«äº‰</td><td>å»¶è¿Ÿä»ç§’çº§è·³å‡åˆ°åˆ†é’Ÿçº§</td></tr><tr><td><strong>ç¼“å†²åŒºè†¨èƒ€</strong></td><td>é¢„æäº¤çš„æ•°æ®åœ¨ Doris ä¾§æš‚æ—¶æ— æ³•æŸ¥è¯¢ï¼Œç¼“å†²åŒºå †ç§¯</td><td>å†…å­˜å ç”¨é«˜ï¼ŒGC é¢‘ç¹</td></tr><tr><td><strong>ç½‘ç»œå¾€è¿”æ¬¡æ•°</strong></td><td>æ¯ä¸ª Batch éœ€è¦ä¸¤æ¬¡ HTTP å¾€è¿”ï¼ˆé¢„æäº¤ + æœ€ç»ˆæäº¤ï¼‰</td><td>ç½‘ç»œå¼€é”€å€å¢</td></tr></tbody></table>
<p><strong>å®é™…æ€§èƒ½å¯¹æ¯”</strong>ï¼ˆåŸºäºåƒä¸‡çº§æ—¥å‡æ•°æ®åŒæ­¥åœºæ™¯ï¼‰ï¼š</p>
<pre><code class="hljs language-matlab" lang="matlab">å®˜æ–¹ <span class="hljs-number">2</span>PC æ–¹æ¡ˆï¼š
â”œâ”€ å¹³å‡ RTT: ~<span class="hljs-number">500</span>ms
â”œâ”€ ååé‡: ~<span class="hljs-number">20</span>K rows/<span class="hljs-built_in">sec</span>
â”œâ”€ P99 å»¶è¿Ÿ: ~<span class="hljs-number">10</span><span class="hljs-built_in">min</span>
â””â”€ èµ„æºå ç”¨: é«˜ (GC å‹åŠ›å¤§)

ä¼˜åŒ–åæ–¹æ¡ˆï¼ˆæœ¬æ–‡æ–¹æ¡ˆï¼‰ï¼š
â”œâ”€ å¹³å‡ RTT: ~<span class="hljs-number">50</span>ms
â”œâ”€ ååé‡: ~<span class="hljs-number">500</span>K rows/<span class="hljs-built_in">sec</span>
â”œâ”€ P99 å»¶è¿Ÿ: ~<span class="hljs-number">5</span><span class="hljs-built_in">sec</span>
â””â”€ èµ„æºå ç”¨: ä½ (ç¨³å®š)
</code></pre>
<h3 data-id="heading-4">1.3 åº”ç”¨åœºæ™¯ç•Œå®š</h3>
<p><strong>æœ¬æ–¹æ¡ˆé€‚ç”¨çš„åœºæ™¯</strong>ï¼š</p>
<ul>
<li>âœ… <strong>å®æ—¶ ETL</strong>ï¼šæ•°æ®åº“ä¸»ä»å¤åˆ¶ã€æ—¥å¿—é‡‡é›†ã€æ¶ˆæ¯é˜Ÿåˆ—å®æ—¶å…¥åº“</li>
<li>âœ… <strong>å‡†å®æ—¶æŠ¥è¡¨</strong>ï¼šç”¨æˆ·è¡Œä¸ºåˆ†æã€é”€å”®æ•°æ®å®æ—¶æ±‡æ€»</li>
<li>âœ… <strong>æ—¥å¿—å­˜å‚¨</strong>ï¼šç»“æ„åŒ–æ—¥å¿—å…¥æ¹–ã€å®¡è®¡æ—¥å¿—å½’æ¡£</li>
<li>âœ… <strong>æ•°æ®æ¹–é›†æˆ</strong>ï¼šå¤šæºå¼‚æ„æ•°æ®å®æ—¶èåˆ</li>
</ul>
<p><strong>ä¸é€‚ç”¨çš„åœºæ™¯</strong>ï¼š</p>
<ul>
<li>âŒ å¯¹å¼ºä¸€è‡´æ€§æœ‰ç»å¯¹è¦æ±‚çš„é‡‘èç±»åœºæ™¯ï¼ˆéœ€è‡ªå®šä¹‰å¹‚ç­‰ç­–ç•¥ï¼‰</li>
<li>âŒ æ•°æ®ä¿®æ”¹é¢‘ç¹çš„ OLTP åœºæ™¯ï¼ˆåº”ä½¿ç”¨ OLTP æ•°æ®åº“ï¼‰</li>
</ul>
<p><strong>å…¸å‹åº”ç”¨è¡¨æ¨¡å‹</strong>ï¼š</p>
<p>æœ¬æ–¹æ¡ˆé‡ç‚¹é’ˆå¯¹ <strong>æ˜ç»†è¡¨ï¼ˆAppend-Only Tableï¼‰</strong>ï¼š</p>
<ul>
<li>æ•°æ®åªè¿½åŠ ï¼Œä¸ä¿®æ”¹æˆ–åˆ é™¤</li>
<li>å…¸å‹åœºæ™¯ï¼šäº‹ä»¶è¡¨ã€æ—¥å¿—è¡¨ã€è®¢å•è¯¦æƒ…è¡¨ã€æµæ°´è¡¨</li>
</ul>
<p>ä¸é€‚ç”¨äºéœ€è¦ UPDATE/DELETE çš„ç»´åº¦è¡¨æˆ–èšåˆè¡¨ã€‚</p>
<hr/>
<h2 data-id="heading-5">ç¬¬äºŒéƒ¨åˆ†ï¼šæ–¹æ¡ˆæ¼”è¿›</h2>
<h3 data-id="heading-6">2.1 ç¬¬ä¸€ä»£ï¼šLabel äº‹åŠ¡æ ‡è¯†åˆ†æ‰¹æäº¤</h3>
<p><strong>æ ¸å¿ƒæ€è·¯</strong>ï¼šç»•è¿‡ Checkpointï¼Œç›´æ¥åˆ©ç”¨ Doris çš„ Label æœºåˆ¶æ¥ä¿è¯å¹‚ç­‰æ€§ã€‚</p>
<p><strong>Doris Label æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># é€šä¿—ç†è§£ï¼šLabel å°±æ˜¯ä¸€ä¸ª"äº‹åŠ¡ID"</span>
<span class="hljs-comment"># åŒä¸€ä¸ª Label çš„å¤šæ¬¡è¯·æ±‚ï¼ŒDoris åªå¤„ç†ä¸€æ¬¡</span>

<span class="hljs-comment"># ä¸¾ä¾‹ï¼š</span>
<span class="hljs-comment"># ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼šPOST /api/db/table/load?label=user_sync_001</span>
<span class="hljs-comment">#   â†’ Doris åˆ›å»ºäº‹åŠ¡ï¼Œè¿”å› success</span>
<span class="hljs-comment"># ç¬¬äºŒæ¬¡è¯·æ±‚ï¼ˆç½‘ç»œé‡è¯•ï¼‰ï¼šPOST /api/db/table/load?label=user_sync_001</span>
<span class="hljs-comment">#   â†’ Doris æ£€æŸ¥åˆ° label å·²å­˜åœ¨ï¼Œå¹‚ç­‰è¿”å› successï¼ˆä¸é‡å¤åŠ è½½ï¼‰</span>
<span class="hljs-comment"># ç¬¬ä¸‰æ¬¡è¯·æ±‚ï¼ˆå¦ä¸€ä¸ªå¹¶è¡Œåº¦ï¼‰ï¼šPOST /api/db/table/load?label=user_sync_002</span>
<span class="hljs-comment">#   â†’ Doris åˆ›å»ºæ–°äº‹åŠ¡ï¼Œæ­£å¸¸å¤„ç†</span>
</code></pre>
<p><strong>æ¶æ„è®¾è®¡</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Flink DataStream Pipeline                  â”‚
â”‚                                                    â”‚
â”‚  Source â†’ <span class="hljs-attribute">Transform</span> â†’ <span class="hljs-selector-tag">Label</span>-Based Sink             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   <span class="hljs-selector-tag">Label</span>-Based Sink (åˆ†æ‰¹)     â”‚
        â”‚                              â”‚
        â”‚  <span class="hljs-number">1</span>. å†…å­˜ç¼“å†²æ•°æ®              â”‚
        â”‚  <span class="hljs-number">2</span>. ç”Ÿæˆå”¯ä¸€ <span class="hljs-selector-tag">Label</span>            â”‚
        â”‚  <span class="hljs-number">3</span>. StreamLoad æäº¤           â”‚
        â”‚  <span class="hljs-number">4</span>. å¼‚æ­¥ç­‰å¾… Doris ç¡®è®¤       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Doris StreamLoad API        â”‚
        â”‚                              â”‚
        â”‚  <span class="hljs-selector-tag">Label</span>: user_sync_001        â”‚
        â”‚  Status: FINISHED/CANCELLED  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>ä»£ç å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>
<span class="hljs-keyword">import</span> uuid
<span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">import</span> time

<span class="hljs-keyword">class</span> <span class="hljs-title class_">DorisLabelSink</span>:
    <span class="hljs-string">"""
    åŸºäº Doris Label çš„åˆ†æ‰¹æäº¤ Sink
    ä¿è¯åœ¨è‡³å¤šä¸€æ¬¡ï¼ˆAt-Most-Onceï¼‰çš„è¯­ä¹‰ä¸‹ï¼Œå¹‚ç­‰æ€§ä¸Šä¼ 
    """</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">
        self,
        doris_host: <span class="hljs-built_in">str</span>,
        doris_port: <span class="hljs-built_in">int</span>,
        database: <span class="hljs-built_in">str</span>,
        table: <span class="hljs-built_in">str</span>,
        username: <span class="hljs-built_in">str</span>,
        password: <span class="hljs-built_in">str</span>,
        batch_size: <span class="hljs-built_in">int</span> = <span class="hljs-number">10000</span>,
        flush_interval_ms: <span class="hljs-built_in">int</span> = <span class="hljs-number">5000</span>
    </span>):
        self.doris_host = doris_host
        self.doris_port = doris_port
        self.database = database
        self.table = table
        self.username = username
        self.password = password
        self.batch_size = batch_size
        self.flush_interval_ms = flush_interval_ms
        
        self.buffer = []
        self.last_flush_time = time.time()
        self.pending_labels = {}  <span class="hljs-comment"># {label: timestamp}</span>
        
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">write</span>(<span class="hljs-params">self, record: <span class="hljs-built_in">dict</span></span>):
        <span class="hljs-string">"""
        å†™å…¥è®°å½•ï¼Œè§¦å‘ç¼“å†²æˆ–æäº¤
        """</span>
        self.buffer.append(record)
        
        <span class="hljs-comment"># æ¡ä»¶1ï¼šç¼“å†²åŒºæ»¡</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(self.buffer) &gt;= self.batch_size:
            self.flush()
        
        <span class="hljs-comment"># æ¡ä»¶2ï¼šè·ç¦»ä¸Šæ¬¡æäº¤è¶…è¿‡ flush_interval</span>
        <span class="hljs-keyword">elif</span> time.time() - self.last_flush_time &gt; self.flush_interval_ms / <span class="hljs-number">1000</span>:
            self.flush()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">flush</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""
        ç”Ÿæˆ Labelï¼Œè°ƒç”¨ StreamLoad API
        """</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.buffer:
            <span class="hljs-keyword">return</span>
        
        <span class="hljs-comment"># æ­¥éª¤1ï¼šç”Ÿæˆå”¯ä¸€ Label</span>
        <span class="hljs-comment"># æ ¼å¼ï¼š{database}_{table}_{timestamp}_{uuid}</span>
        label = self._generate_label()
        
        <span class="hljs-comment"># æ­¥éª¤2ï¼šå‡†å¤‡ CSV æ ¼å¼æ•°æ®</span>
        csv_data = self._convert_to_csv(self.buffer)
        
        <span class="hljs-comment"># æ­¥éª¤3ï¼šè°ƒç”¨ StreamLoad API</span>
        <span class="hljs-keyword">try</span>:
            response = self._stream_load(label, csv_data)
            
            <span class="hljs-keyword">if</span> response[<span class="hljs-string">'Status'</span>] == <span class="hljs-string">'Success'</span>:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Label <span class="hljs-subst">{label}</span> æäº¤æˆåŠŸ"</span>)
                self.buffer.clear()
                self.last_flush_time = time.time()
                self.pending_labels[label] = time.time()
            <span class="hljs-keyword">elif</span> response[<span class="hljs-string">'Status'</span>] == <span class="hljs-string">'Label Already Exists'</span>:
                <span class="hljs-comment"># å¹‚ç­‰ï¼šåŒä¸€ä¸ª Label é‡å¤æäº¤ï¼Œç›´æ¥è®¤ä¸ºæˆåŠŸ</span>
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Label <span class="hljs-subst">{label}</span> å·²å­˜åœ¨ï¼Œå¹‚ç­‰è¿”å›"</span>)
                self.buffer.clear()
                self.last_flush_time = time.time()
            <span class="hljs-keyword">else</span>:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Label <span class="hljs-subst">{label}</span> æäº¤å¤±è´¥: <span class="hljs-subst">{response[<span class="hljs-string">'Message'</span>]}</span>"</span>)
                <span class="hljs-comment"># å¤±è´¥æ—¶å¯é€‰æ‹©é‡è¯•æˆ–ä¸¢å¼ƒï¼ˆå–å†³äºä¸šåŠ¡å®¹å¿åº¦ï¼‰</span>
        
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"StreamLoad å¼‚å¸¸: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-comment"># å¼‚å¸¸å¤„ç†ï¼šå¯é€‰æ‹©é‡è¯•æˆ–ä¸¢å¼ƒ</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_generate_label</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-string">"""
        ç”Ÿæˆå”¯ä¸€çš„ Label
        
        è®¾è®¡åŸåˆ™ï¼š
        1. å…¨å±€å”¯ä¸€ï¼šåŒä¸€æ—¶é—´ä¸åŒ Sink ç”Ÿæˆä¸åŒ Label
        2. å¹‚ç­‰å®‰å…¨ï¼šåŒä¸€ Sink çš„é‡è¯•è¯·æ±‚ç”Ÿæˆç›¸åŒ Label
        3. å¯è¿½è¸ªï¼šLabel åŒ…å«æ—¶é—´æˆ³å’Œæºä¿¡æ¯
        """</span>
        timestamp = datetime.now().strftime(<span class="hljs-string">"%Y%m%d_%H%M%S"</span>)
        unique_id = <span class="hljs-built_in">str</span>(uuid.uuid4())[:<span class="hljs-number">8</span>]
        label = <span class="hljs-string">f"<span class="hljs-subst">{self.database}</span>_<span class="hljs-subst">{self.table}</span>_<span class="hljs-subst">{timestamp}</span>_<span class="hljs-subst">{unique_id}</span>"</span>
        <span class="hljs-keyword">return</span> label
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_convert_to_csv</span>(<span class="hljs-params">self, records: <span class="hljs-type">List</span>[<span class="hljs-built_in">dict</span>]</span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-string">"""
        å°† Python dict è½¬æ¢ä¸º CSV æ ¼å¼
        """</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> records:
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
        
        lines = []
        <span class="hljs-keyword">for</span> record <span class="hljs-keyword">in</span> records:
            <span class="hljs-comment"># å‡è®¾å­—æ®µé¡ºåºä¸€è‡´</span>
            values = [<span class="hljs-built_in">str</span>(v) <span class="hljs-keyword">if</span> v <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">else</span> <span class="hljs-string">""</span> <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> record.values()]
            csv_line = <span class="hljs-string">"\t"</span>.join(values)  <span class="hljs-comment"># Doris é»˜è®¤ä»¥ \t åˆ†éš”</span>
            lines.append(csv_line)
        
        <span class="hljs-keyword">return</span> <span class="hljs-string">"\n"</span>.join(lines)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_stream_load</span>(<span class="hljs-params">self, label: <span class="hljs-built_in">str</span>, csv_data: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">dict</span>:
        <span class="hljs-string">"""
        è°ƒç”¨ Doris StreamLoad API
        """</span>
        url = <span class="hljs-string">f"http://<span class="hljs-subst">{self.doris_host}</span>:<span class="hljs-subst">{self.doris_port}</span>/api/<span class="hljs-subst">{self.database}</span>/<span class="hljs-subst">{self.table}</span>/load"</span>
        
        headers = {
            <span class="hljs-string">"label"</span>: label,
            <span class="hljs-string">"column_separator"</span>: <span class="hljs-string">"\t"</span>,
            <span class="hljs-string">"line_delimiter"</span>: <span class="hljs-string">"\n"</span>,
            <span class="hljs-string">"format"</span>: <span class="hljs-string">"csv"</span>
        }
        
        response = requests.post(
            url,
            data=csv_data.encode(<span class="hljs-string">'utf-8'</span>),
            headers=headers,
            auth=(self.username, self.password),
            timeout=<span class="hljs-number">30</span>
        )
        
        <span class="hljs-comment"># è§£æå“åº”</span>
        <span class="hljs-keyword">return</span> response.json()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">close</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""
        å…³é—­ Sink æ—¶ï¼Œå¼ºåˆ¶åˆ·æ–°å‰©ä½™æ•°æ®
        """</span>
        <span class="hljs-keyword">if</span> self.buffer:
            self.flush()
        
        <span class="hljs-comment"># å¯é€‰ï¼šè½®è¯¢ç­‰å¾…æ‰€æœ‰ pending labels å®Œæˆ</span>
        self._wait_for_pending_labels()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_wait_for_pending_labels</span>(<span class="hljs-params">self, timeout_sec: <span class="hljs-built_in">int</span> = <span class="hljs-number">300</span></span>):
        <span class="hljs-string">"""
        ç­‰å¾…æ‰€æœ‰ pending labels çš„åŠ è½½ä»»åŠ¡å®Œæˆ
        """</span>
        start_time = time.time()
        
        <span class="hljs-keyword">while</span> self.pending_labels:
            label, submit_time = <span class="hljs-built_in">list</span>(self.pending_labels.items())[<span class="hljs-number">0</span>]
            
            <span class="hljs-comment"># æ£€æŸ¥ label çŠ¶æ€</span>
            status = self._query_label_status(label)
            
            <span class="hljs-keyword">if</span> status <span class="hljs-keyword">in</span> [<span class="hljs-string">'FINISHED'</span>, <span class="hljs-string">'CANCELLED'</span>]:
                self.pending_labels.pop(label)
            <span class="hljs-keyword">elif</span> time.time() - start_time &gt; timeout_sec:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¶…æ—¶ç­‰å¾… label <span class="hljs-subst">{label}</span>, æ”¾å¼ƒ"</span>)
                self.pending_labels.pop(label)
            <span class="hljs-keyword">else</span>:
                time.sleep(<span class="hljs-number">1</span>)  <span class="hljs-comment"># è½®è¯¢é—´éš”</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_query_label_status</span>(<span class="hljs-params">self, label: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-string">"""
        æŸ¥è¯¢ Label çš„åŠ è½½çŠ¶æ€
        è¿”å›ï¼šPREPARE, LOADING, FINISHED, CANCELLED
        """</span>
        <span class="hljs-comment"># é€šè¿‡ SQL: SHOW LOAD WHERE label = 'xxx'</span>
        <span class="hljs-comment"># å®é™…å®ç°å¯è°ƒç”¨ Doris FE çš„ HTTP API</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"FINISHED"</span>  <span class="hljs-comment"># ç®€åŒ–ç¤ºä¾‹</span>
</code></pre>
<p><strong>Flink é›†æˆç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> pyflink.datastream <span class="hljs-keyword">import</span> StreamExecutionEnvironment
<span class="hljs-keyword">from</span> pyflink.datastream.functions <span class="hljs-keyword">import</span> MapFunction
<span class="hljs-keyword">import</span> json

<span class="hljs-comment"># 1. åˆ›å»ºæ‰§è¡Œç¯å¢ƒ</span>
env = StreamExecutionEnvironment.get_execution_environment()
env.set_parallelism(<span class="hljs-number">4</span>)  <span class="hljs-comment"># 4 ä¸ªå¹¶è¡Œåº¦</span>

<span class="hljs-comment"># 2. é…ç½® Checkpointï¼ˆå¯é€‰ï¼Œç”¨äºæºç«¯æ•…éšœæ¢å¤ï¼‰</span>
env.enable_checkpointing(interval_millis=<span class="hljs-number">60000</span>)  <span class="hljs-comment"># 60 ç§’ä¸€ä¸ª checkpoint</span>

<span class="hljs-comment"># 3. åˆ›å»ºæ•°æ®æºï¼ˆä»¥ Kafka ä¸ºä¾‹ï¼‰</span>
kafka_source = env.add_source(
    FlinkKafkaConsumer(
        topics=[<span class="hljs-string">'user_events'</span>],
        deserialization_schema=SimpleStringSchema(),
        properties={
            <span class="hljs-string">'bootstrap.servers'</span>: <span class="hljs-string">'kafka:9092'</span>,
            <span class="hljs-string">'group.id'</span>: <span class="hljs-string">'flink_to_doris_group'</span>
        }
    )
)

<span class="hljs-comment"># 4. è½¬æ¢å’Œè¿‡æ»¤</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">parse_and_transform</span>(<span class="hljs-params">json_str: <span class="hljs-built_in">str</span></span>):
    <span class="hljs-string">"""è§£æ JSON å¹¶è½¬æ¢ä¸º dict"""</span>
    data = json.loads(json_str)
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">'user_id'</span>: data[<span class="hljs-string">'user_id'</span>],
        <span class="hljs-string">'event_type'</span>: data[<span class="hljs-string">'event_type'</span>],
        <span class="hljs-string">'timestamp'</span>: data[<span class="hljs-string">'timestamp'</span>],
        <span class="hljs-string">'event_data'</span>: json.dumps(data[<span class="hljs-string">'properties'</span>])
    }

transformed = kafka_source.<span class="hljs-built_in">map</span>(
    <span class="hljs-keyword">lambda</span> x: parse_and_transform(x),
    output_type=Types.MAP(Types.STRING, Types.STRING)
)

<span class="hljs-comment"># 5. æ·»åŠ  Doris Sink</span>
doris_sink = DorisLabelSink(
    doris_host=<span class="hljs-string">'doris-fe.example.com'</span>,
    doris_port=<span class="hljs-number">8030</span>,
    database=<span class="hljs-string">'realtime_db'</span>,
    table=<span class="hljs-string">'user_events'</span>,
    username=<span class="hljs-string">'doris_user'</span>,
    password=<span class="hljs-string">'doris_password'</span>,
    batch_size=<span class="hljs-number">50000</span>,
    flush_interval_ms=<span class="hljs-number">10000</span>
)

transformed.add_sink(doris_sink)

<span class="hljs-comment"># 6. æ‰§è¡Œ</span>
env.execute(<span class="hljs-string">"Kafka to Doris Label-Based Sink"</span>)
</code></pre>
<p><strong>ä¼˜åŠ¿ä¸å±€é™</strong>ï¼š</p>

































<table><thead><tr><th>æ–¹é¢</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>ä¼˜åŠ¿</strong></td><td>âœ… ç»•è¿‡ Checkpoint åŒæ­¥ç­‰å¾…ï¼Œååé‡å¤§å¹…æå‡</td></tr><tr><td/><td>âœ… Label å¹‚ç­‰æ€§ä¿è¯ï¼Œæ”¯æŒå¤±è´¥é‡è¯•</td></tr><tr><td/><td>âœ… å®ç°ç®€æ´ï¼Œå®¹æ˜“å®šåˆ¶</td></tr><tr><td><strong>å±€é™</strong></td><td>âŒ éœ€è¦æ‰‹åŠ¨ç®¡ç†é‡è¯•é€»è¾‘</td></tr><tr><td/><td>âŒ Label é‡å¤æäº¤æ—¶ä»æœ‰å°æ¦‚ç‡å†²çª</td></tr><tr><td/><td>âŒ æ— æ³•ä¿è¯ Exactly-Onceï¼ˆåªèƒ½ä¿è¯ At-Most-Onceï¼‰</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-7">2.2 ç¬¬äºŒä»£ï¼šDoris å®˜æ–¹ StreamLoad APIï¼ˆæœ€ç»ˆæ¨èæ–¹æ¡ˆï¼‰</h3>
<p>è™½ç„¶ç¬¬ä¸€ä»£æ–¹æ¡ˆåœ¨æ€§èƒ½ä¸Šå·²ç»å–å¾—æ˜¾è‘—è¿›æ­¥ï¼Œä½†æˆ‘ä»¬å‘ç°åœ¨æç«¯ç½‘ç»œæ³¢åŠ¨åœºæ™¯ä¸‹ï¼Œä»éœ€è¦æ›´å¥å£®çš„å¹‚ç­‰æ€§å¤„ç†ã€‚</p>
<p><strong>2021 å¹´ï¼ŒDoris å®˜æ–¹å¼€æºäº†ç‹¬ç«‹é¡¹ç›® <code>doris-streamloader</code></strong>ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸“é—¨ä¸º Stream Load ä¼˜åŒ–çš„è½»é‡çº§å®¢æˆ·ç«¯åº“ï¼Œä¸éœ€è¦ä¾µå…¥ä»£ç å±‚é¢ï¼Œè€Œæ˜¯é€šè¿‡ HTTP API è°ƒç”¨çš„æ–¹å¼ä¸ Doris äº¤äº’ã€‚</p>
<p>ä»“åº“åœ°å€: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fapache%2Fdoris-streamloader" target="_blank" title="https://github.com/apache/doris-streamloader" ref="nofollow noopener noreferrer">github.com/apache/doriâ€¦</a></p>
<p><strong>æ ¸å¿ƒè®¾è®¡åŸåˆ™</strong>ï¼š</p>
<ul>
<li><strong>éä¾µå…¥å¼</strong>ï¼šæ— éœ€ä¿®æ”¹ Flink æ¡†æ¶ï¼Œé€šè¿‡ HTTP API è°ƒç”¨</li>
<li><strong>è‡ªåŠ¨å¹¶è¡Œ</strong>ï¼šè‡ªåŠ¨åˆ†ç‰‡å’Œå¤šçº¿ç¨‹å¹¶å‘åŠ è½½</li>
<li><strong>å¹‚ç­‰ä¿è¯</strong>ï¼šå†…ç½® Label æœºåˆ¶ï¼Œè‡ªåŠ¨å»é‡å’Œé‡è¯•</li>
<li><strong>æ•…éšœæ¢å¤</strong>ï¼šæ”¯æŒæ–­ç‚¹ç»­ä¼ å’Œå¤±è´¥é‡è¯•</li>
</ul>
<p><strong>æ¶æ„è®¾è®¡</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Flink DataStream Pipeline            â”‚
â”‚                                              â”‚
â”‚  Source â†’ <span class="hljs-attribute">Transform</span> â†’ Generic Sink           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  ç¼“å†²æ•°æ®ï¼ˆCSV/JSON æ ¼å¼ï¼‰    â”‚
        â”‚  (ä¸éœ€è¦ç‰¹æ®Šç¼–ç )            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   HTTP POST è¯·æ±‚              â”‚
        â”‚   (Stream Load API)           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â–¼                       â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  FE èŠ‚ç‚¹      â”‚      â”‚  BE èŠ‚ç‚¹      â”‚
    â”‚ (è´Ÿè½½å‡è¡¡)    â”‚      â”‚ (æ•°æ®å¯¼å…¥)    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Doris å­˜å‚¨   â”‚
    â”‚ (OlapTable)  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>ä½¿ç”¨ Doris StreamLoad API çš„ Flink Sink å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.io.*;
<span class="hljs-keyword">import</span> java.net.HttpURLConnection;
<span class="hljs-keyword">import</span> java.net.URL;
<span class="hljs-keyword">import</span> java.util.*;
<span class="hljs-keyword">import</span> java.util.concurrent.Executors;
<span class="hljs-keyword">import</span> java.util.concurrent.ScheduledExecutorService;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;
<span class="hljs-keyword">import</span> org.apache.flink.streaming.api.functions.sink.RichSinkFunction;
<span class="hljs-keyword">import</span> org.apache.flink.configuration.Configuration;
<span class="hljs-keyword">import</span> org.apache.flink.api.common.metrics.Counter;
<span class="hljs-keyword">import</span> org.slf4j.Logger;
<span class="hljs-keyword">import</span> org.slf4j.LoggerFactory;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DorisStreamLoadSink</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RichSinkFunction</span>&lt;String&gt; {
    <span class="hljs-comment">/**
     * é€šè¿‡ HTTP Stream Load API ç›´æ¥ä¸ Doris äº¤äº’
     * æ— éœ€ä¾µå…¥ä»»ä½• Flink å†…éƒ¨ä»£ç 
     */</span>
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">LOG</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(DorisStreamLoadSink.class);
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String feHost;          <span class="hljs-comment">// FE èŠ‚ç‚¹ IP</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> fePort;             <span class="hljs-comment">// FE HTTP ç«¯å£ï¼ˆé€šå¸¸ 8030ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String database;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String table;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String username;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String password;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> batchSize;          <span class="hljs-comment">// ç¼“å†²è¡Œæ•°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> flushIntervalMs;    <span class="hljs-comment">// åˆ·æ–°é—´éš”ï¼ˆæ¯«ç§’ï¼‰</span>
    
    <span class="hljs-keyword">private</span> List&lt;String&gt; buffer;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> lastFlushTime;
    <span class="hljs-keyword">private</span> ScheduledExecutorService scheduler;
    
    <span class="hljs-comment">// ç›‘æ§æŒ‡æ ‡</span>
    <span class="hljs-keyword">private</span> Counter successCounter;
    <span class="hljs-keyword">private</span> Counter failureCounter;
    <span class="hljs-keyword">private</span> Counter totalRowsCounter;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DorisStreamLoadSink</span><span class="hljs-params">(
        String feHost,
        <span class="hljs-type">int</span> fePort,
        String database,
        String table,
        String username,
        String password,
        <span class="hljs-type">int</span> batchSize,
        <span class="hljs-type">int</span> flushIntervalMs
    )</span> {
        <span class="hljs-built_in">this</span>.feHost = feHost;
        <span class="hljs-built_in">this</span>.fePort = fePort;
        <span class="hljs-built_in">this</span>.database = database;
        <span class="hljs-built_in">this</span>.table = table;
        <span class="hljs-built_in">this</span>.username = username;
        <span class="hljs-built_in">this</span>.password = password;
        <span class="hljs-built_in">this</span>.batchSize = batchSize;
        <span class="hljs-built_in">this</span>.flushIntervalMs = flushIntervalMs;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">open</span><span class="hljs-params">(Configuration parameters)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-built_in">super</span>.open(parameters);
        
        <span class="hljs-built_in">this</span>.buffer = Collections.synchronizedList(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;());
        <span class="hljs-built_in">this</span>.lastFlushTime = System.currentTimeMillis();
        
        <span class="hljs-comment">// åˆå§‹åŒ–ç›‘æ§æŒ‡æ ‡</span>
        <span class="hljs-built_in">this</span>.successCounter = getRuntimeContext().getMetricGroup().counter(<span class="hljs-string">"stream_load_success"</span>);
        <span class="hljs-built_in">this</span>.failureCounter = getRuntimeContext().getMetricGroup().counter(<span class="hljs-string">"stream_load_failure"</span>);
        <span class="hljs-built_in">this</span>.totalRowsCounter = getRuntimeContext().getMetricGroup().counter(<span class="hljs-string">"total_rows_loaded"</span>);
        
        <span class="hljs-comment">// å®šæ—¶åˆ·æ–°çº¿ç¨‹</span>
        <span class="hljs-built_in">this</span>.scheduler = Executors.newScheduledThreadPool(<span class="hljs-number">1</span>);
        scheduler.scheduleAtFixedRate(
            <span class="hljs-built_in">this</span>::tryFlush,
            flushIntervalMs,
            flushIntervalMs,
            TimeUnit.MILLISECONDS
        );
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">invoke</span><span class="hljs-params">(String jsonRecord, Context context)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-keyword">synchronized</span> (buffer) {
            buffer.add(jsonRecord);
            
            <span class="hljs-comment">// æ¡ä»¶1ï¼šç¼“å†²åŒºæ»¡</span>
            <span class="hljs-keyword">if</span> (buffer.size() &gt;= batchSize) {
                flush();
            }
        }
    }
    
    <span class="hljs-comment">/**
     * å°è¯•åˆ·æ–°ï¼ˆæ—¶é—´è§¦å‘ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">tryFlush</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">synchronized</span> (buffer) {
            <span class="hljs-keyword">if</span> (!buffer.isEmpty() &amp;&amp; 
                System.currentTimeMillis() - lastFlushTime &gt; flushIntervalMs) {
                <span class="hljs-keyword">try</span> {
                    flush();
                } <span class="hljs-keyword">catch</span> (Exception e) {
                    LOG.error(<span class="hljs-string">"å®šæ—¶åˆ·æ–°å¤±è´¥"</span>, e);
                }
            }
        }
    }
    
    <span class="hljs-comment">/**
     * æ ¸å¿ƒæ–¹æ³•ï¼šé€šè¿‡ HTTP Stream Load API å‘ Doris æäº¤æ•°æ®
     * 
     * HTTP è¯·æ±‚ç¤ºä¾‹ï¼š
     * POST /api/{db}/{table}/_stream_load
     * è¯·æ±‚å¤´ï¼š
     *   label: å”¯ä¸€çš„åŠ è½½æ ‡ç­¾ï¼ˆç”¨äºå¹‚ç­‰æ€§ï¼‰
     *   format: json æˆ– csv
     *   read_json_by_line: trueï¼ˆå¦‚æœæ˜¯å¤šè¡Œ JSONï¼‰
     * è¯·æ±‚ä½“ï¼šCSV æˆ– JSON æ ¼å¼çš„æ•°æ®
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">flush</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-keyword">if</span> (buffer.isEmpty()) {
            <span class="hljs-keyword">return</span>;
        }
        
        <span class="hljs-comment">// æ­¥éª¤1ï¼šè·å–å‰¯æœ¬è¿›è¡Œåˆ·æ–°ï¼Œé¿å…é•¿æ—¶é—´æŒæœ‰é”</span>
        List&lt;String&gt; dataToFlush = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(buffer);
        buffer.clear();
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ­¥éª¤2ï¼šæ„å»º HTTP è¯·æ±‚</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> buildStreamLoadUrl();
            <span class="hljs-type">HttpURLConnection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> (HttpURLConnection) <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url).openConnection();
            
            <span class="hljs-comment">// æ­¥éª¤3ï¼šè®¾ç½®è¯·æ±‚æ–¹æ³•å’Œè®¤è¯</span>
            conn.setRequestMethod(<span class="hljs-string">"PUT"</span>);
            conn.setDoOutput(<span class="hljs-literal">true</span>);
            conn.setConnectTimeout(<span class="hljs-number">30000</span>);
            conn.setReadTimeout(<span class="hljs-number">30000</span>);
            
            <span class="hljs-comment">// è®¾ç½® Basic Auth</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">auth</span> <span class="hljs-operator">=</span> Base64.getEncoder().encodeToString(
                (username + <span class="hljs-string">":"</span> + password).getBytes()
            );
            conn.setRequestProperty(<span class="hljs-string">"Authorization"</span>, <span class="hljs-string">"Basic "</span> + auth);
            
            <span class="hljs-comment">// æ­¥éª¤4ï¼šè®¾ç½® Stream Load å‚æ•°</span>
            conn.setRequestProperty(<span class="hljs-string">"Expect"</span>, <span class="hljs-string">"100-continue"</span>);
            conn.setRequestProperty(<span class="hljs-string">"label"</span>, generateLabel());  <span class="hljs-comment">// å”¯ä¸€çš„ Label</span>
            conn.setRequestProperty(<span class="hljs-string">"format"</span>, <span class="hljs-string">"json"</span>);          <span class="hljs-comment">// JSON æ ¼å¼</span>
            conn.setRequestProperty(<span class="hljs-string">"read_json_by_line"</span>, <span class="hljs-string">"true"</span>); <span class="hljs-comment">// é€è¡Œè¯»å–</span>
            <span class="hljs-comment">// å¯é€‰ï¼šå…¶ä»–å‚æ•°</span>
            <span class="hljs-comment">// conn.setRequestProperty("columns", "col1,col2,col3");</span>
            <span class="hljs-comment">// conn.setRequestProperty("timeout", "30");</span>
            <span class="hljs-comment">// conn.setRequestProperty("max_filter_ratio", "0.1");</span>
            
            <span class="hljs-comment">// æ­¥éª¤5ï¼šå†™å…¥æ•°æ®</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> String.join(<span class="hljs-string">"\n"</span>, dataToFlush);
            <span class="hljs-type">byte</span>[] dataBytes = data.getBytes(<span class="hljs-string">"UTF-8"</span>);
            conn.setRequestProperty(<span class="hljs-string">"Content-Length"</span>, String.valueOf(dataBytes.length));
            
            <span class="hljs-keyword">try</span> (<span class="hljs-type">OutputStream</span> <span class="hljs-variable">os</span> <span class="hljs-operator">=</span> conn.getOutputStream()) {
                os.write(dataBytes);
                os.flush();
            }
            
            <span class="hljs-comment">// æ­¥éª¤6ï¼šè¯»å–å“åº”</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">responseCode</span> <span class="hljs-operator">=</span> conn.getResponseCode();
            <span class="hljs-type">String</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> readResponse(conn);
            
            <span class="hljs-comment">// æ­¥éª¤7ï¼šè§£æå“åº”ï¼ˆJSON æ ¼å¼ï¼‰</span>
            <span class="hljs-comment">// {</span>
            <span class="hljs-comment">//   "TxnId": 3,</span>
            <span class="hljs-comment">//   "Label": "123",</span>
            <span class="hljs-comment">//   "Status": "Success",</span>
            <span class="hljs-comment">//   "Message": "OK",</span>
            <span class="hljs-comment">//   "NumberLoadedRows": 10,</span>
            <span class="hljs-comment">//   "NumberFilteredRows": 0,</span>
            <span class="hljs-comment">//   "LoadBytes": 118,</span>
            <span class="hljs-comment">//   "LoadTimeMs": 173</span>
            <span class="hljs-comment">// }</span>
            
            <span class="hljs-keyword">if</span> (responseCode == <span class="hljs-number">200</span>) {
                <span class="hljs-type">StreamLoadResponse</span> <span class="hljs-variable">loadResponse</span> <span class="hljs-operator">=</span> parseResponse(response);
                
                <span class="hljs-keyword">if</span> (<span class="hljs-string">"Success"</span>.equals(loadResponse.status)) {
                    LOG.info(<span class="hljs-string">"StreamLoad æˆåŠŸ - Label: {}, è¡Œæ•°: {}, è€—æ—¶: {}ms"</span>,
                        loadResponse.label, loadResponse.numberLoadedRows, loadResponse.loadTimeMs);
                    successCounter.inc();
                    totalRowsCounter.inc(loadResponse.numberLoadedRows);
                    lastFlushTime = System.currentTimeMillis();
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"Label Already Exists"</span>.equals(loadResponse.status)) {
                    <span class="hljs-comment">// å¹‚ç­‰ï¼šLabel å·²å­˜åœ¨ï¼Œè§†ä¸ºæˆåŠŸ</span>
                    LOG.info(<span class="hljs-string">"Label {} å·²å­˜åœ¨ï¼Œå¹‚ç­‰è¿”å›æˆåŠŸ"</span>, loadResponse.label);
                    successCounter.inc();
                    totalRowsCounter.inc(loadResponse.numberLoadedRows);
                    lastFlushTime = System.currentTimeMillis();
                } <span class="hljs-keyword">else</span> {
                    LOG.error(<span class="hljs-string">"StreamLoad å¤±è´¥ - Status: {}, Message: {}"</span>,
                        loadResponse.status, loadResponse.message);
                    failureCounter.inc();
                    <span class="hljs-comment">// æ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©ï¼šé‡æ–°ç¼“å†²é‡è¯•æˆ–ç›´æ¥ä¸¢å¼ƒ</span>
                }
            } <span class="hljs-keyword">else</span> {
                LOG.error(<span class="hljs-string">"HTTP è¯·æ±‚å¤±è´¥ - çŠ¶æ€ç : {}, å“åº”: {}"</span>, responseCode, response);
                failureCounter.inc();
            }
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            LOG.error(<span class="hljs-string">"StreamLoad å¼‚å¸¸"</span>, e);
            failureCounter.inc();
            <span class="hljs-comment">// æ ¹æ®ä¸šåŠ¡éœ€æ±‚æŠ›å‡ºå¼‚å¸¸æˆ–ç»§ç»­</span>
            <span class="hljs-keyword">throw</span> e;
        }
    }
    
    <span class="hljs-comment">/**
     * æ„å»º Stream Load URL
     * æ ¼å¼ï¼šhttp://fe_host:fe_port/api/{database}/{table}/_stream_load
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">buildStreamLoadUrl</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"http://%s:%d/api/%s/%s/_stream_load"</span>,
            feHost, fePort, database, table);
    }
    
    <span class="hljs-comment">/**
     * ç”Ÿæˆå…¨å±€å”¯ä¸€çš„ Label
     * è®¾è®¡åŸåˆ™ï¼šåŒä¸€æ‰¹æ•°æ®ä¿è¯ Label ç›¸åŒï¼ˆå¹‚ç­‰ï¼‰ï¼Œä¸åŒæ‰¹æ¬¡ Label ä¸åŒ
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">generateLabel</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ–¹æ¡ˆ1ï¼šä½¿ç”¨æ—¶é—´æˆ³ + UUIDï¼ˆæ¯æ¬¡éƒ½ä¸åŒï¼‰</span>
        <span class="hljs-comment">// è¿™æ ·æ¯æ¬¡æäº¤éƒ½æ˜¯æ–°çš„ Label</span>
        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"%s_%s_%d_%s"</span>,
            database,
            table,
            System.currentTimeMillis(),
            UUID.randomUUID().toString().substring(<span class="hljs-number">0</span>, <span class="hljs-number">8</span>)
        );
        
        <span class="hljs-comment">// æ–¹æ¡ˆ2ï¼šå¦‚æœéœ€è¦å¹‚ç­‰é‡è¯•</span>
        <span class="hljs-comment">// å¯ä»¥åŸºäº Checkpoint ID ç”Ÿæˆ Label</span>
        <span class="hljs-comment">// è¿™æ ·åŒä¸€ Checkpoint çš„é‡è¯•ä¼šäº§ç”Ÿç›¸åŒ Label</span>
    }
    
    <span class="hljs-comment">/**
     * è¯»å– HTTP å“åº”ä½“
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">readResponse</span><span class="hljs-params">(HttpURLConnection conn)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-type">int</span> <span class="hljs-variable">responseCode</span> <span class="hljs-operator">=</span> conn.getResponseCode();
        <span class="hljs-type">InputStream</span> <span class="hljs-variable">is</span> <span class="hljs-operator">=</span> (responseCode == <span class="hljs-number">200</span>) ?
            conn.getInputStream() : conn.getErrorStream();
        
        <span class="hljs-keyword">if</span> (is == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
        
        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
        <span class="hljs-keyword">try</span> (<span class="hljs-type">BufferedReader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(is, <span class="hljs-string">"UTF-8"</span>))) {
            String line;
            <span class="hljs-keyword">while</span> ((line = reader.readLine()) != <span class="hljs-literal">null</span>) {
                response.append(line);
            }
        }
        <span class="hljs-keyword">return</span> response.toString();
    }
    
    <span class="hljs-comment">/**
     * è§£æ Stream Load å“åº”
     */</span>
    <span class="hljs-keyword">private</span> StreamLoadResponse <span class="hljs-title function_">parseResponse</span><span class="hljs-params">(String jsonResponse)</span> {
        <span class="hljs-comment">// ç®€åŒ–å®ç°ï¼Œå®é™…åº”ä½¿ç”¨ JSON è§£æåº“ï¼ˆå¦‚ Jacksonï¼‰</span>
        <span class="hljs-type">StreamLoadResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StreamLoadResponse</span>();
        
        <span class="hljs-comment">// ä½¿ç”¨ Jackson è§£æ</span>
        <span class="hljs-keyword">try</span> {
            com.fasterxml.jackson.databind.<span class="hljs-type">ObjectMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span>
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">com</span>.fasterxml.jackson.databind.ObjectMapper();
            Map&lt;String, Object&gt; map = mapper.readValue(jsonResponse, Map.class);
            
            response.status = (String) map.get(<span class="hljs-string">"Status"</span>);
            response.message = (String) map.get(<span class="hljs-string">"Message"</span>);
            response.label = (String) map.get(<span class="hljs-string">"Label"</span>);
            response.numberLoadedRows = ((Number) map.get(<span class="hljs-string">"NumberLoadedRows"</span>)).longValue();
            response.loadTimeMs = ((Number) map.get(<span class="hljs-string">"LoadTimeMs"</span>)).longValue();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            LOG.error(<span class="hljs-string">"è§£æå“åº”å¤±è´¥"</span>, e);
        }
        
        <span class="hljs-keyword">return</span> response;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// æœ€åä¸€æ¬¡åˆ·æ–°</span>
        <span class="hljs-keyword">if</span> (!buffer.isEmpty()) {
            flush();
        }
        
        <span class="hljs-comment">// å…³é—­å®šæ—¶ä»»åŠ¡</span>
        <span class="hljs-keyword">if</span> (scheduler != <span class="hljs-literal">null</span>) {
            scheduler.shutdown();
            scheduler.awaitTermination(<span class="hljs-number">10</span>, TimeUnit.SECONDS);
        }
        
        <span class="hljs-built_in">super</span>.close();
    }
    
    <span class="hljs-comment">/**
     * Stream Load å“åº”æ•°æ®æ¨¡å‹
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamLoadResponse</span> {
        String status;
        String message;
        String label;
        <span class="hljs-type">long</span> numberLoadedRows;
        <span class="hljs-type">long</span> loadTimeMs;
    }
}
</code></pre>
<p><strong>Flink DataStream API é›†æˆ</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;
<span class="hljs-keyword">import</span> org.apache.flink.streaming.api.functions.sink.RichSinkFunction;
<span class="hljs-keyword">import</span> org.apache.flink.configuration.Configuration;
<span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Flink2DorisJob</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">StreamExecutionEnvironment</span> <span class="hljs-variable">env</span> <span class="hljs-operator">=</span> StreamExecutionEnvironment.getExecutionEnvironment();
        env.setParallelism(<span class="hljs-number">4</span>);
        
        <span class="hljs-comment">// å¯ç”¨ Checkpointï¼ˆç”¨äºæºç«¯æ•…éšœæ¢å¤ï¼‰</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šStreamLoader å†…éƒ¨å·²ä¿è¯å¹‚ç­‰ï¼Œæ— éœ€ 2PC</span>
        env.enableCheckpointing(<span class="hljs-number">60000</span>);
        env.getCheckpointConfig().setCheckpointingMode(CheckpointingMode.AT_LEAST_ONCE);
        
        <span class="hljs-comment">// æ•°æ®æºï¼šKafka / æ•°æ®åº“ / æ¶ˆæ¯é˜Ÿåˆ—ç­‰</span>
        DataStream&lt;String&gt; kafkaSource = env.addSource(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">FlinkKafkaConsumer</span>&lt;&gt;(
                <span class="hljs-string">"user_events"</span>,
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleStringSchema</span>(),
                kafkaProperties()
            )
        );
        
        <span class="hljs-comment">// è½¬æ¢ï¼šè§£æ JSONï¼Œæ·»åŠ æ—¶é—´æˆ³</span>
        DataStream&lt;String&gt; transformed = kafkaSource
            .map(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MapFunction</span>&lt;String, String&gt;() {
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> String <span class="hljs-title function_">map</span><span class="hljs-params">(String value)</span> <span class="hljs-keyword">throws</span> Exception {
                    <span class="hljs-type">ObjectMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>();
                    Map&lt;String, Object&gt; data = mapper.readValue(value, Map.class);
                    
                    <span class="hljs-comment">// æ·»åŠ  Doris æ‰€éœ€çš„æ—¶é—´æˆ³åˆ—</span>
                    data.put(<span class="hljs-string">"load_time"</span>, System.currentTimeMillis() / <span class="hljs-number">1000</span>);
                    
                    <span class="hljs-keyword">return</span> mapper.writeValueAsString(data);
                }
            });
        
        <span class="hljs-comment">// æ·»åŠ  Sinkï¼šDoris StreamLoader</span>
        transformed.addSink(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichSinkFunction</span>&lt;String&gt;() {
                <span class="hljs-keyword">private</span> DorisStreamLoaderSink sink;
                
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">open</span><span class="hljs-params">(Configuration parameters)</span> <span class="hljs-keyword">throws</span> Exception {
                    sink = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DorisStreamLoaderSink</span>(
                        <span class="hljs-string">"doris-fe-1:8030;doris-fe-2:8030;doris-fe-3:8030"</span>,
                        <span class="hljs-string">"realtime_db"</span>,
                        <span class="hljs-string">"user_events"</span>,
                        <span class="hljs-string">"doris_user"</span>,
                        <span class="hljs-string">"doris_password"</span>,
                        <span class="hljs-number">50000</span>,  <span class="hljs-comment">// batchSize</span>
                        <span class="hljs-number">10000</span>   <span class="hljs-comment">// flushIntervalMs</span>
                    );
                }
                
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">invoke</span><span class="hljs-params">(String value, Context context)</span> <span class="hljs-keyword">throws</span> Exception {
                    sink.write(value);
                }
                
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
                    <span class="hljs-keyword">if</span> (sink != <span class="hljs-literal">null</span>) {
                        sink.close();
                    }
                }
            }
        );
        
        env.execute(<span class="hljs-string">"Kafka to Doris StreamLoader"</span>);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> java.util.Properties <span class="hljs-title function_">kafkaProperties</span><span class="hljs-params">()</span> {
        java.util.<span class="hljs-type">Properties</span> <span class="hljs-variable">props</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">java</span>.util.Properties();
        props.setProperty(<span class="hljs-string">"bootstrap.servers"</span>, <span class="hljs-string">"kafka:9092"</span>);
        props.setProperty(<span class="hljs-string">"group.id"</span>, <span class="hljs-string">"flink_doris_group"</span>);
        props.setProperty(<span class="hljs-string">"auto.offset.reset"</span>, <span class="hljs-string">"earliest"</span>);
        <span class="hljs-keyword">return</span> props;
    }
}
</code></pre>
<p><strong>æ€§èƒ½å¯¹æ¯”</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æŒ‡æ ‡            â”‚ å®˜æ–¹ 2PC      â”‚ Label åˆ†æ‰¹    â”‚ StreamLoader  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ååé‡          â”‚ 20K rows/s   â”‚ 300K rows/s  â”‚ 500K rows/s   â”‚
â”‚ P99 å»¶è¿Ÿ        â”‚ ~10min       â”‚ ~15sec       â”‚ ~5sec         â”‚
â”‚ ä¸€è‡´æ€§ä¿è¯      â”‚ Exactly-Once â”‚ At-Most-Once â”‚ At-Most-Once* â”‚
â”‚ å®ç°å¤æ‚åº¦      â”‚ ä½           â”‚ ä¸­           â”‚ ä½            â”‚
â”‚ èµ„æºå ç”¨        â”‚ é«˜ (GCé¢‘ç¹)  â”‚ ä½           â”‚ ä½            â”‚
â”‚ æ•…éšœæ¢å¤        â”‚ è‡ªåŠ¨         â”‚ æ‰‹åŠ¨         â”‚ è‡ªåŠ¨*         â”‚
â”‚ ç½‘ç»œå¾€è¿”        â”‚ 2 æ¬¡/batch   â”‚ 1 æ¬¡/batch   â”‚ 1 æ¬¡/batch    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

* StreamLoader åœ¨ Flink Checkpoint é…åˆä¸‹ï¼Œå¯å®ç° Exactly-Once
</code></pre>
<hr/>
<h2 data-id="heading-8">ç¬¬ä¸‰éƒ¨åˆ†ï¼šè¡¨æ¨¡å‹è®¾è®¡</h2>
<h3 data-id="heading-9">3.1 é€‚é…çš„è¡¨æ¨¡å‹</h3>
<p><strong>æ–¹æ¡ˆé€‚ç”¨æ¡ä»¶</strong>ï¼ˆä½¿ç”¨ Append-Only æ˜ç»†è¡¨ï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- âœ… å®Œå…¨é€‚é…ï¼šäº‹ä»¶æ˜ç»†è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> user_events (
    event_id <span class="hljs-type">BIGINT</span>,
    user_id <span class="hljs-type">BIGINT</span>,
    event_type <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),
    event_time DATETIME,
    event_data STRING,
    load_time DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
) ENGINE<span class="hljs-operator">=</span>OLAP
<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">RANGE</span>(event_time) (
    <span class="hljs-keyword">PARTITION</span> p_20231201 <span class="hljs-keyword">VALUES</span> LESS THAN ("2023-12-02"),
    <span class="hljs-keyword">PARTITION</span> p_20231202 <span class="hljs-keyword">VALUES</span> LESS THAN ("2023-12-03"),
    <span class="hljs-comment">-- ... æŒ‰æ—¥æœŸè‡ªåŠ¨åˆ†åŒº</span>
)
DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(user_id) BUCKETS <span class="hljs-number">32</span>
PROPERTIES (
    "replication_num" <span class="hljs-operator">=</span> "2",
    "storage_type" <span class="hljs-operator">=</span> "COLUMN"
);

<span class="hljs-comment">-- âœ… å®Œå…¨é€‚é…ï¼šè®¢å•æµæ°´è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> order_stream (
    order_id <span class="hljs-type">BIGINT</span>,
    user_id <span class="hljs-type">BIGINT</span>,
    sku_id <span class="hljs-type">BIGINT</span>,
    quantity <span class="hljs-type">INT</span>,
    amount <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>),
    status <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>),
    created_time DATETIME,
    load_time DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
) ENGINE<span class="hljs-operator">=</span>OLAP
<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">RANGE</span>(created_time)
DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(order_id) BUCKETS <span class="hljs-number">64</span>
PROPERTIES ("replication_num" <span class="hljs-operator">=</span> "2");

<span class="hljs-comment">-- âŒ ä¸é€‚é…ï¼šéœ€è¦ UPDATE çš„ç»´åº¦è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> user_dim (
    user_id <span class="hljs-type">BIGINT</span>,
    user_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),
    age <span class="hljs-type">INT</span>,
    status <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>),
    update_time DATETIME
) ENGINE<span class="hljs-operator">=</span>OLAP
<span class="hljs-comment">-- StreamLoader æ— æ³•å¤„ç†æ­¤ç±»è¡¨çš„ UPDATE æ“ä½œ</span>

<span class="hljs-comment">-- âŒ ä¸é€‚é…ï¼šèšåˆè¡¨ï¼ˆåŒ…å« SUM/COUNT ç­‰èšåˆå‡½æ•°ï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> user_daily_agg (
    stat_date <span class="hljs-type">DATE</span>,
    user_id <span class="hljs-type">BIGINT</span>,
    event_count <span class="hljs-type">BIGINT</span> SUM,
    total_amount <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">12</span>, <span class="hljs-number">2</span>) SUM,
    updated_at DATETIME
) ENGINE<span class="hljs-operator">=</span>OLAP
AGGREGATE KEY (stat_date, user_id)
<span class="hljs-comment">-- éœ€è¦ä½¿ç”¨ UPDATE æ›´æ–°èšåˆå€¼</span>
</code></pre>
<h3 data-id="heading-10">3.2 è¡¨è®¾è®¡æœ€ä½³å®è·µ</h3>
<p>ä¸ºäº†é€‚é… StreamLoader çš„é«˜ååé‡ç‰¹æ€§ï¼Œå»ºè®®ï¼š</p>
<p><strong>1. ä½¿ç”¨"æ—¶é—´åˆ†åŒº"æå‡æŸ¥è¯¢æ€§èƒ½</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> user_events (
    event_id <span class="hljs-type">BIGINT</span>,
    user_id <span class="hljs-type">BIGINT</span>,
    event_time DATETIME,
    <span class="hljs-comment">-- ... å…¶ä»–å­—æ®µ</span>
) ENGINE<span class="hljs-operator">=</span>OLAP
<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">RANGE</span>(event_time) (
    <span class="hljs-keyword">PARTITION</span> p_20231201 <span class="hljs-keyword">VALUES</span> LESS THAN ("2023-12-02"),
    <span class="hljs-keyword">PARTITION</span> p_20231202 <span class="hljs-keyword">VALUES</span> LESS THAN ("2023-12-03"),
    <span class="hljs-keyword">PARTITION</span> p_20231203 <span class="hljs-keyword">VALUES</span> LESS THAN ("2023-12-04")
)
DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(user_id) BUCKETS <span class="hljs-number">32</span>;

<span class="hljs-comment">-- ä¼˜åŠ¿ï¼š</span>
<span class="hljs-comment">-- 1. æ–°æ•°æ®æ€»æ˜¯è½åœ¨æœ€æ–°åˆ†åŒºï¼Œé¿å…å°æ–‡ä»¶é—®é¢˜</span>
<span class="hljs-comment">-- 2. å†å²æ•°æ®å¯ç‹¬ç«‹å‹ç¼©ï¼Œæå‡æŸ¥è¯¢æ€§èƒ½</span>
<span class="hljs-comment">-- 3. å¯è‡ªåŠ¨æ¸…ç†è¿‡æœŸåˆ†åŒº</span>
</code></pre>
<p><strong>2. åˆç†è®¾ç½® Bucket æ•°é‡</strong>ï¼ˆå…³ç³»åˆ° StreamLoader å¹¶è¡Œåº¦ï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Bucket æ•°é‡å»ºè®® = (ç›®æ ‡ååé‡ / å•ä¸ª BE çš„å¤„ç†é€Ÿåº¦) Ã— BE æ•°é‡</span>
<span class="hljs-comment"># ä¸¾ä¾‹ï¼šç›®æ ‡ 500K rows/sï¼Œå• BE 100K rows/sï¼Œ3 ä¸ª BE</span>
<span class="hljs-comment"># Bucket æ•° = (500K / 100K) Ã— 3 = 15ï¼Œå»ºè®®è®¾ç½® 16-32</span>

<span class="hljs-comment"># å¯¹äºé«˜å¹¶å‘å°æ‰¹é‡åœºæ™¯ï¼Œå¯è®¾ç½®æ›´å¤š Bucketï¼š</span>
DISTRIBUTED BY HASH(user_id) BUCKETS <span class="hljs-number">128</span>  <span class="hljs-comment"># é€‚åˆ Flink é«˜å¹¶è¡Œåº¦</span>
</code></pre>
<p><strong>3. ä½¿ç”¨"å¤åˆé”®"ä¼˜åŒ–æ•°æ®é‡æ’</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä¸æ¨èï¼šä½æ•ˆçš„éšæœºåˆ†å¸ƒ</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> events (
    event_id <span class="hljs-type">BIGINT</span>,
    data STRING
) ENGINE<span class="hljs-operator">=</span>OLAP
DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(event_id) BUCKETS <span class="hljs-number">32</span>;

<span class="hljs-comment">-- æ¨èï¼šæŒ‰ç”¨æˆ·ç»´åº¦åˆ†å¸ƒï¼ˆä¾¿äºåç»­æŒ‰ç”¨æˆ·ç»Ÿè®¡ï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> events (
    event_id <span class="hljs-type">BIGINT</span>,
    user_id <span class="hljs-type">BIGINT</span>,
    event_type <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),
    data STRING
) ENGINE<span class="hljs-operator">=</span>OLAP
DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(user_id) BUCKETS <span class="hljs-number">32</span>;

<span class="hljs-comment">-- æ›´å¥½ï¼šå¤šç»´åˆ†å¸ƒï¼ˆå¦‚æœåç»­æŒ‰ç”¨æˆ·å’Œæ—¶é—´éƒ½éœ€è¦ç»Ÿè®¡ï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> events (
    event_id <span class="hljs-type">BIGINT</span>,
    user_id <span class="hljs-type">BIGINT</span>,
    event_time DATETIME,
    event_type <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>)
) ENGINE<span class="hljs-operator">=</span>OLAP
<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">RANGE</span>(event_time)
DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(user_id) BUCKETS <span class="hljs-number">32</span>;
</code></pre>
<hr/>
<h2 data-id="heading-11">ç¬¬å››éƒ¨åˆ†ï¼šéƒ¨ç½²ä¸ç›‘æ§</h2>
<h3 data-id="heading-12">4.1 éƒ¨ç½²æ¶æ„</h3>
<pre><code class="hljs language-arduino" lang="arduino">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Kafka / Source                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Flink Cluster              â”‚
        â”‚   (<span class="hljs-number">4</span> TaskManager)            â”‚
        â”‚                              â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
        â”‚  â”‚ <span class="hljs-built_in">Task</span> <span class="hljs-number">1</span>: StreamLoader â”‚    â”‚ â† å¹¶è¡Œåº¦ <span class="hljs-number">4</span>
        â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚   (<span class="hljs-number">4</span> ä¸ª Sink å®ä¾‹)
        â”‚  â”‚ <span class="hljs-built_in">Task</span> <span class="hljs-number">2</span>: StreamLoader â”‚    â”‚
        â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
        â”‚  â”‚ <span class="hljs-built_in">Task</span> <span class="hljs-number">3</span>: StreamLoader â”‚    â”‚
        â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
        â”‚  â”‚ <span class="hljs-built_in">Task</span> <span class="hljs-number">4</span>: StreamLoader â”‚    â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼             â–¼             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ BE èŠ‚ç‚¹<span class="hljs-number">1</span>â”‚  â”‚ BE èŠ‚ç‚¹<span class="hljs-number">2</span>â”‚  â”‚ BE èŠ‚ç‚¹<span class="hljs-number">3</span>â”‚
    â”‚ (å†™å…¥) â”‚  â”‚ (å†™å…¥) â”‚  â”‚ (å†™å…¥) â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚             â”‚             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   Doris å­˜å‚¨      â”‚
            â”‚ (OlapTable)       â”‚
            â”‚ (user_events)     â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-13">4.2 å…³é”®ç›‘æ§æŒ‡æ ‡</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Flink Metrics å®šä¹‰</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamLoaderSinkMetrics</span>:
    <span class="hljs-string">"""
    ç›‘æ§ StreamLoader Sink çš„å…³é”®æŒ‡æ ‡
    """</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, metrics_group</span>):
        <span class="hljs-comment"># 1. ååé‡æŒ‡æ ‡</span>
        self.rows_received = metrics_group.counter(<span class="hljs-string">"rows_received"</span>)
        self.rows_loaded = metrics_group.counter(<span class="hljs-string">"rows_loaded"</span>)
        self.rows_failed = metrics_group.counter(<span class="hljs-string">"rows_failed"</span>)
        
        <span class="hljs-comment"># 2. å»¶è¿ŸæŒ‡æ ‡</span>
        self.load_latency_ms = metrics_group.histogram(
            <span class="hljs-string">"load_latency_ms"</span>,
            histogram_stat_size=<span class="hljs-number">100</span>
        )
        
        <span class="hljs-comment"># 3. æ‰¹æ¬¡æŒ‡æ ‡</span>
        self.batch_size = metrics_group.histogram(<span class="hljs-string">"batch_size"</span>)
        self.flush_count = metrics_group.counter(<span class="hljs-string">"flush_count"</span>)
        
        <span class="hljs-comment"># 4. é”™è¯¯æŒ‡æ ‡</span>
        self.load_failures = metrics_group.counter(<span class="hljs-string">"load_failures"</span>)
        self.label_conflicts = metrics_group.counter(<span class="hljs-string">"label_conflicts"</span>)
        
        <span class="hljs-comment"># 5. ç¼“å†²åŒºçŠ¶æ€</span>
        self.buffer_size = metrics_group.gauge(<span class="hljs-string">"buffer_size"</span>, <span class="hljs-keyword">lambda</span>: self.current_buffer_size)
        self.buffer_memory_mb = metrics_group.gauge(
            <span class="hljs-string">"buffer_memory_mb"</span>,
            <span class="hljs-keyword">lambda</span>: self.current_buffer_memory / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>
        )

<span class="hljs-comment"># ç›‘æ§å‘Šè­¦è§„åˆ™ç¤ºä¾‹</span>
alerts = [
    {
        <span class="hljs-string">"name"</span>: <span class="hljs-string">"é«˜ç¼ºè´§ç‡"</span>,
        <span class="hljs-string">"condition"</span>: <span class="hljs-string">"rows_failed / rows_received &gt; 0.01"</span>,  <span class="hljs-comment"># å¤±è´¥ç‡ &gt; 1%</span>
        <span class="hljs-string">"severity"</span>: <span class="hljs-string">"warning"</span>
    },
    {
        <span class="hljs-string">"name"</span>: <span class="hljs-string">"åŠ è½½å»¶è¿Ÿè¿‡é«˜"</span>,
        <span class="hljs-string">"condition"</span>: <span class="hljs-string">"load_latency_ms.p99 &gt; 30000"</span>,  <span class="hljs-comment"># P99 å»¶è¿Ÿ &gt; 30s</span>
        <span class="hljs-string">"severity"</span>: <span class="hljs-string">"warning"</span>
    },
    {
        <span class="hljs-string">"name"</span>: <span class="hljs-string">"ç¼“å†²åŒºæº¢å‡º"</span>,
        <span class="hljs-string">"condition"</span>: <span class="hljs-string">"buffer_size &gt; 1000000"</span>,  <span class="hljs-comment"># ç¼“å†²è®°å½•æ•° &gt; 100 ä¸‡</span>
        <span class="hljs-string">"severity"</span>: <span class="hljs-string">"critical"</span>
    },
    {
        <span class="hljs-string">"name"</span>: <span class="hljs-string">"Label å†²çªé¢‘ç¹"</span>,
        <span class="hljs-string">"condition"</span>: <span class="hljs-string">"label_conflicts &gt; 10 per minute"</span>,
        <span class="hljs-string">"severity"</span>: <span class="hljs-string">"error"</span>
    }
]
</code></pre>
<h3 data-id="heading-14">4.3 æ•…éšœæ’æŸ¥</h3>



































<table><thead><tr><th>ç—‡çŠ¶</th><th>å¯èƒ½åŸå› </th><th>æ’æŸ¥æ­¥éª¤</th></tr></thead><tbody><tr><td><strong>åŠ è½½å¤±è´¥ (Status != SUCCESS)</strong></td><td>BE ç£ç›˜æ»¡ã€Doris å†…éƒ¨é”™è¯¯</td><td>1. æ£€æŸ¥ BE æ—¥å¿— 2. æ£€æŸ¥ç£ç›˜ç©ºé—´ 3. é‡å¯ BE</td></tr><tr><td><strong>Label å†²çª</strong></td><td>å¹¶è¡Œåº¦è¿‡é«˜ï¼ŒLabel ç”Ÿæˆå†²çª</td><td>1. é™ä½å¹¶è¡Œåº¦ 2. ä¼˜åŒ– Label ç”Ÿæˆç®—æ³•</td></tr><tr><td><strong>å†…å­˜æº¢å‡º (OOM)</strong></td><td>æ‰¹é‡å¤§å°è®¾ç½®è¿‡å¤§</td><td>1. å‡å° <code>batchSize</code> å‚æ•° 2. å¢åŠ  JVM å †å†…å­˜</td></tr><tr><td><strong>ååé‡ä½äºé¢„æœŸ</strong></td><td>ç½‘ç»œç“¶é¢ˆã€Doris å†™å…¥é¥±å’Œ</td><td>1. æ£€æŸ¥ç½‘ç»œå»¶è¿Ÿ 2. å¢åŠ  Doris BE æ•°é‡</td></tr><tr><td><strong>æ•°æ®é‡å¤</strong></td><td>Label å»é‡å¤±è´¥</td><td>1. æ£€æŸ¥ Doris Label TTL è®¾ç½® 2. æ£€æŸ¥æ—¶é’ŸåŒæ­¥</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-15">ç¬¬äº”éƒ¨åˆ†ï¼šå®Œæ•´æ¡ˆä¾‹</h2>
<h3 data-id="heading-16">5.1 æ¡ˆä¾‹èƒŒæ™¯</h3>
<p>æŸç”µå•†å¹³å°éœ€è¦å°† <strong>ç”¨æˆ·è¡Œä¸ºäº‹ä»¶æ—¥å¿—</strong> ä» Kafka å®æ—¶åŒæ­¥åˆ° Dorisï¼Œç”¨äºæ„å»ºå®æ—¶çœ‹æ¿ã€‚</p>
<p><strong>æ•°æ®ç‰¹å¾</strong>ï¼š</p>
<ul>
<li><strong>æ—¥å‡æ•°æ®é‡</strong>ï¼š1 äº¿æ¡äº‹ä»¶</li>
<li><strong>å®æ—¶å»¶è¿Ÿè¦æ±‚</strong>ï¼š&lt; 10 ç§’</li>
<li><strong>ååé‡</strong>ï¼š1,150 rows/secï¼ˆå‡åŒ€åˆ†å¸ƒï¼‰</li>
<li><strong>å¹¶å‘åº¦</strong>ï¼š4 ä¸ª Kafka partition</li>
</ul>
<h3 data-id="heading-17">5.2 è¡¨è®¾è®¡</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- Doris ç›®æ ‡è¡¨ï¼šuser_behavior_events</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> user_behavior_events (
    event_id <span class="hljs-type">BIGINT</span> COMMENT <span class="hljs-string">'äº‹ä»¶ID'</span>,
    user_id <span class="hljs-type">BIGINT</span> COMMENT <span class="hljs-string">'ç”¨æˆ·ID'</span>,
    event_type <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) COMMENT <span class="hljs-string">'äº‹ä»¶ç±»å‹ï¼šbrowse/click/add_cart/purchase'</span>,
    product_id <span class="hljs-type">BIGINT</span> COMMENT <span class="hljs-string">'å•†å“ID'</span>,
    amount <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>) COMMENT <span class="hljs-string">'äº¤æ˜“é¢'</span>,
    event_time DATETIME COMMENT <span class="hljs-string">'äº‹ä»¶å‘ç”Ÿæ—¶é—´'</span>,
    load_time DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'æ•°æ®åŠ è½½æ—¶é—´'</span>,
    
    INDEX idx_user_id (user_id) <span class="hljs-keyword">USING</span> BITMAP COMMENT <span class="hljs-string">'ç”¨æˆ·ç»´åº¦ç´¢å¼•'</span>
) ENGINE<span class="hljs-operator">=</span>OLAP
<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">RANGE</span>(event_time) (
    <span class="hljs-keyword">PARTITION</span> p_latest <span class="hljs-keyword">VALUES</span> LESS THAN MAXVALUE
)
DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(user_id) BUCKETS <span class="hljs-number">64</span>
PROPERTIES (
    "replication_num" <span class="hljs-operator">=</span> "2",
    "storage_type" <span class="hljs-operator">=</span> "COLUMN",
    "compression" <span class="hljs-operator">=</span> "LZ4"
);

<span class="hljs-comment">-- è‡ªåŠ¨åˆ†åŒºè„šæœ¬ï¼ˆæ¯å¤©è‡ªåŠ¨åˆ›å»ºæ–°åˆ†åŒºï¼‰</span>
<span class="hljs-comment">-- å¯é€šè¿‡ Doris FE çš„è°ƒåº¦å™¨å®ç°</span>
</code></pre>
<h3 data-id="heading-18">5.3 Flink ä½œä¸šä»£ç </h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserBehaviorEventsJob</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">LOG</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(UserBehaviorEventsJob.class);
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// 1. ç¯å¢ƒé…ç½®</span>
        <span class="hljs-keyword">final</span> <span class="hljs-type">StreamExecutionEnvironment</span> <span class="hljs-variable">env</span> <span class="hljs-operator">=</span> StreamExecutionEnvironment.getExecutionEnvironment();
        env.setParallelism(<span class="hljs-number">4</span>);  <span class="hljs-comment">// ä¸ Kafka partition æ•°å¯¹é½</span>
        
        <span class="hljs-keyword">final</span> <span class="hljs-type">StreamingRuntimeContext</span> <span class="hljs-variable">runtimeContext</span> <span class="hljs-operator">=</span> (StreamingRuntimeContext) env.getConfig();
        
        <span class="hljs-comment">// 2. Checkpoint é…ç½®ï¼ˆç”¨äºæºç«¯æ•…éšœæ¢å¤ï¼‰</span>
        env.enableCheckpointing(<span class="hljs-number">60000</span>);  <span class="hljs-comment">// 60s checkpoint</span>
        env.getCheckpointConfig().setCheckpointingMode(CheckpointingMode.AT_LEAST_ONCE);
        env.getCheckpointConfig().setMinPauseBetweenCheckpoints(<span class="hljs-number">30000</span>);
        env.getCheckpointConfig().setCheckpointTimeout(<span class="hljs-number">600000</span>);  <span class="hljs-comment">// 10min timeout</span>
        env.getCheckpointConfig().setMaxConcurrentCheckpoints(<span class="hljs-number">1</span>);
        
        <span class="hljs-comment">// 3. æ•°æ®æºï¼šKafka</span>
        KafkaSource&lt;String&gt; kafkaSource = KafkaSource.builder()
            .setBootstrapServers(<span class="hljs-string">"kafka1:9092,kafka2:9092,kafka3:9092"</span>)
            .setTopics(<span class="hljs-string">"user_behavior_events"</span>)
            .setGroupId(<span class="hljs-string">"flink_to_doris_group"</span>)
            .setStartingOffsets(OffsetsInitializer.earliest())
            .setValueOnlyDeserializer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleStringSchema</span>())
            .build();
        
        DataStream&lt;String&gt; kafkaStream = env.fromSource(kafkaSource, WatermarkStrategy.noWatermarks(), <span class="hljs-string">"Kafka Source"</span>);
        
        <span class="hljs-comment">// 4. æ•°æ®è½¬æ¢ï¼šJSON è§£æ + å­—æ®µæ˜ å°„</span>
        DataStream&lt;BehaviorEvent&gt; eventStream = kafkaStream
            .map(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RichMapFunction</span>&lt;String, BehaviorEvent&gt;() {
                <span class="hljs-keyword">private</span> ObjectMapper objectMapper;
                <span class="hljs-keyword">private</span> Counter parseErrorCounter;
                
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">open</span><span class="hljs-params">(Configuration parameters)</span> <span class="hljs-keyword">throws</span> Exception {
                    <span class="hljs-built_in">this</span>.objectMapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>();
                    <span class="hljs-type">MetricGroup</span> <span class="hljs-variable">metricGroup</span> <span class="hljs-operator">=</span> getRuntimeContext().getMetricGroup();
                    <span class="hljs-built_in">this</span>.parseErrorCounter = metricGroup.counter(<span class="hljs-string">"parse_error"</span>);
                }
                
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> BehaviorEvent <span class="hljs-title function_">map</span><span class="hljs-params">(String value)</span> <span class="hljs-keyword">throws</span> Exception {
                    <span class="hljs-keyword">try</span> {
                        Map&lt;String, Object&gt; data = objectMapper.readValue(value, Map.class);
                        
                        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BehaviorEvent</span>(
                            (<span class="hljs-type">long</span>) data.getOrDefault(<span class="hljs-string">"event_id"</span>, <span class="hljs-number">0L</span>),
                            (<span class="hljs-type">long</span>) data.getOrDefault(<span class="hljs-string">"user_id"</span>, <span class="hljs-number">0L</span>),
                            (String) data.get(<span class="hljs-string">"event_type"</span>),
                            (<span class="hljs-type">long</span>) data.getOrDefault(<span class="hljs-string">"product_id"</span>, <span class="hljs-number">0L</span>),
                            Double.parseDouble(data.getOrDefault(<span class="hljs-string">"amount"</span>, <span class="hljs-string">"0"</span>).toString()),
                            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Timestamp</span>(System.currentTimeMillis())
                        );
                    } <span class="hljs-keyword">catch</span> (Exception e) {
                        parseErrorCounter.inc();
                        LOG.error(<span class="hljs-string">"Failed to parse event: {}"</span>, value, e);
                        <span class="hljs-keyword">throw</span> e;
                    }
                }
            });
        
        <span class="hljs-comment">// 5. æ·»åŠ  Sinkï¼šDoris StreamLoader</span>
        eventStream.addSink(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">RichSinkFunction</span>&lt;BehaviorEvent&gt;() {
                <span class="hljs-keyword">private</span> DorisStreamLoaderSink streamLoaderSink;
                <span class="hljs-keyword">private</span> ObjectMapper objectMapper;
                <span class="hljs-keyword">private</span> Counter loadSuccessCounter;
                <span class="hljs-keyword">private</span> Counter loadFailureCounter;
                <span class="hljs-keyword">private</span> Histogram loadLatencyHistogram;
                
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">open</span><span class="hljs-params">(Configuration parameters)</span> <span class="hljs-keyword">throws</span> Exception {
                    <span class="hljs-comment">// åˆå§‹åŒ– StreamLoader</span>
                    <span class="hljs-built_in">this</span>.streamLoaderSink = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DorisStreamLoaderSink</span>(
                        <span class="hljs-string">"doris-fe1:8030;doris-fe2:8030;doris-fe3:8030"</span>,
                        <span class="hljs-string">"analytics_db"</span>,
                        <span class="hljs-string">"user_behavior_events"</span>,
                        <span class="hljs-string">"doris_user"</span>,
                        <span class="hljs-string">"doris_password"</span>,
                        <span class="hljs-number">50000</span>,   <span class="hljs-comment">// batchSize: æ¯ 5 ä¸‡æ¡æˆ– 10s è§¦å‘ä¸€æ¬¡æäº¤</span>
                        <span class="hljs-number">10000</span>    <span class="hljs-comment">// flushIntervalMs: 10 ç§’</span>
                    );
                    
                    <span class="hljs-built_in">this</span>.objectMapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>();
                    
                    <span class="hljs-comment">// åˆå§‹åŒ–ç›‘æ§æŒ‡æ ‡</span>
                    <span class="hljs-type">MetricGroup</span> <span class="hljs-variable">metricGroup</span> <span class="hljs-operator">=</span> getRuntimeContext().getMetricGroup();
                    <span class="hljs-built_in">this</span>.loadSuccessCounter = metricGroup.counter(<span class="hljs-string">"load_success"</span>);
                    <span class="hljs-built_in">this</span>.loadFailureCounter = metricGroup.counter(<span class="hljs-string">"load_failure"</span>);
                    <span class="hljs-built_in">this</span>.loadLatencyHistogram = metricGroup.histogram(
                        <span class="hljs-string">"load_latency_ms"</span>,
                        <span class="hljs-keyword">new</span> <span class="hljs-title class_">DescriptiveStatisticsHistogram</span>(<span class="hljs-number">100</span>)
                    );
                }
                
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">invoke</span><span class="hljs-params">(BehaviorEvent event, Context context)</span> <span class="hljs-keyword">throws</span> Exception {
                    <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
                    <span class="hljs-keyword">try</span> {
                        <span class="hljs-comment">// è½¬æ¢ä¸º JSON å¹¶å†™å…¥</span>
                        <span class="hljs-type">String</span> <span class="hljs-variable">jsonRecord</span> <span class="hljs-operator">=</span> objectMapper.writeValueAsString(event);
                        streamLoaderSink.write(jsonRecord);
                        loadSuccessCounter.inc();
                    } <span class="hljs-keyword">catch</span> (Exception e) {
                        loadFailureCounter.inc();
                        LOG.error(<span class="hljs-string">"Failed to load event: {}"</span>, event, e);
                        <span class="hljs-comment">// æ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©ï¼šä¸¢å¼ƒæˆ–é‡æŠ›</span>
                        <span class="hljs-keyword">throw</span> e;
                    } <span class="hljs-keyword">finally</span> {
                        <span class="hljs-type">long</span> <span class="hljs-variable">latency</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - startTime;
                        loadLatencyHistogram.update(latency);
                    }
                }
                
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
                    <span class="hljs-keyword">if</span> (streamLoaderSink != <span class="hljs-literal">null</span>) {
                        streamLoaderSink.close();
                    }
                }
            }
        );
        
        <span class="hljs-comment">// 6. æ‰§è¡Œ</span>
        env.execute(<span class="hljs-string">"User Behavior Events to Doris"</span>);
    }
    
    <span class="hljs-comment">/**
     * è¡Œä¸ºäº‹ä»¶æ•°æ®æ¨¡å‹
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BehaviorEvent</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> {
        <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> eventId;
        <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> userId;
        <span class="hljs-keyword">public</span> String eventType;
        <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> productId;
        <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> amount;
        <span class="hljs-keyword">public</span> Timestamp eventTime;
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">BehaviorEvent</span><span class="hljs-params">()</span> {}
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">BehaviorEvent</span><span class="hljs-params">(<span class="hljs-type">long</span> eventId, <span class="hljs-type">long</span> userId, String eventType, 
                           <span class="hljs-type">long</span> productId, <span class="hljs-type">double</span> amount, Timestamp eventTime)</span> {
            <span class="hljs-built_in">this</span>.eventId = eventId;
            <span class="hljs-built_in">this</span>.userId = userId;
            <span class="hljs-built_in">this</span>.eventType = eventType;
            <span class="hljs-built_in">this</span>.productId = productId;
            <span class="hljs-built_in">this</span>.amount = amount;
            <span class="hljs-built_in">this</span>.eventTime = eventTime;
        }
    }
}
</code></pre>
<h3 data-id="heading-19">5.4 è¿è¡Œæ•ˆæœ</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span> åŠ è½½æˆåŠŸç»Ÿè®¡ <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>
load_success: <span class="hljs-number">100</span>,<span class="hljs-number">000</span>,<span class="hljs-number">000</span> <span class="hljs-keyword">rows</span><span class="hljs-operator">/</span><span class="hljs-keyword">day</span>
load_failure: <span class="hljs-number">0</span> <span class="hljs-keyword">rows</span>

<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span> æ€§èƒ½æŒ‡æ ‡ <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>
ååé‡: <span class="hljs-number">1</span>,<span class="hljs-number">150</span> <span class="hljs-keyword">rows</span><span class="hljs-operator">/</span>sec (è¾¾æˆç›®æ ‡)
P50 å»¶è¿Ÿ: <span class="hljs-number">2.3</span> sec
P99 å»¶è¿Ÿ: <span class="hljs-number">8.7</span> sec (<span class="hljs-operator">&lt;</span> <span class="hljs-number">10</span>s ç›®æ ‡)

<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span> èµ„æºå ç”¨ <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>
JVM å†…å­˜: <span class="hljs-number">2</span>GB (ç¨³å®š)
Flink TaskManager CPU: <span class="hljs-number">40</span><span class="hljs-operator">%</span> (<span class="hljs-number">4</span> æ ¸)
Kafka æ¶ˆè´¹å»¶è¿Ÿ: <span class="hljs-number">0</span> <span class="hljs-keyword">offset</span> (å®æ—¶)

<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span> Doris å­˜å‚¨ <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>
è¡¨å¤§å°: <span class="hljs-number">15</span> GB<span class="hljs-operator">/</span><span class="hljs-keyword">day</span> (å‹ç¼©å)
æŸ¥è¯¢å»¶è¿Ÿ: <span class="hljs-operator">&lt;</span> <span class="hljs-number">100</span>ms (æŒ‰ç”¨æˆ·èšåˆ)
</code></pre>
<hr/>
<h2 data-id="heading-20">æ€»ç»“</h2>





























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>å®˜æ–¹ 2PC</strong></td><td>Exactly-Onceï¼Œå¼€ç®±å³ç”¨</td><td>ååé‡ä½ï¼Œå»¶è¿Ÿé«˜</td><td>å¯¹ä¸€è‡´æ€§æœ‰ç»å¯¹è¦æ±‚ä½†æ•°æ®é‡å°</td></tr><tr><td><strong>Label åˆ†æ‰¹</strong></td><td>ååé‡æå‡ 10 å€ï¼Œå®ç°ç®€æ´</td><td>At-Most-Onceï¼Œéœ€æ‰‹åŠ¨é‡è¯•</td><td>å¯å®¹å¿å°‘é‡é‡å¤çš„å®æ—¶åœºæ™¯</td></tr><tr><td><strong>StreamLoader</strong></td><td>ååé‡æœ€é«˜ï¼Œå†…ç½®å¹‚ç­‰å’Œé‡è¯•</td><td>ä¾èµ– Doris 1.2.0+</td><td>ç”Ÿäº§ç¯å¢ƒï¼Œè¿½æ±‚é«˜æ€§èƒ½å’Œç¨³å®šæ€§</td></tr></tbody></table>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p>
<ol>
<li>ä½¿ç”¨ <strong>StreamLoader</strong> ä½œä¸ºæ ‡å‡†æ–¹æ¡ˆ</li>
<li>è®¾ç½®åˆç†çš„ <strong>æ‰¹é‡å¤§å°</strong>ï¼ˆ50K-100K è¡Œï¼‰å’Œ <strong>åˆ·æ–°é—´éš”</strong>ï¼ˆ5-10 ç§’ï¼‰</li>
<li>é‡‡ç”¨ <strong>æ˜ç»†è¡¨</strong> è¡¨æ¨¡å‹ï¼Œé¿å…èšåˆå’Œ UPDATE</li>
<li>ç»“åˆ <strong>Flink Checkpoint</strong> ä¿è¯æºç«¯æ•…éšœæ¢å¤</li>
</ol>
<hr/>
<p><strong>å‚è€ƒèµ„æº</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoris.apache.org%2Fzh-CN%2Fdocs%2F2.1%2Fdata-operate%2Fimport%2Fimport-way%2Fstream-load-manual" target="_blank" title="https://doris.apache.org/zh-CN/docs/2.1/data-operate/import/import-way/stream-load-manual" ref="nofollow noopener noreferrer">Doris StreamLoad å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnightlies.apache.org%2Fflink%2Fflink-docs-release-1.17" target="_blank" title="https://nightlies.apache.org/flink/flink-docs-release-1.17" ref="nofollow noopener noreferrer">Flink DataStream API æœ€ä½³å®è·µ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fapache%2Fdoris%2Ftree%2Fmaster%2Ftools%2Fflink-connector" target="_blank" title="https://github.com/apache/doris/tree/master/tools/flink-connector" ref="nofollow noopener noreferrer">Doris Flink Connector GitHub</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£ UITabBarControllerï¼šä»£ç†æ–¹æ³•ä¸ ViewController ç”Ÿå‘½å‘¨æœŸçš„æ‰§è¡Œé¡ºåºï¼ˆå« UINavigationController åœºæ™¯ï¼‰]]></title>    <link>https://juejin.cn/post/7588022226739183666</link>    <guid>https://juejin.cn/post/7588022226739183666</guid>    <pubDate>2025-12-26T06:08:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588022226739183666" data-draft-id="7587704265055682598" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£ UITabBarControllerï¼šä»£ç†æ–¹æ³•ä¸ ViewController ç”Ÿå‘½å‘¨æœŸçš„æ‰§è¡Œé¡ºåºï¼ˆå« UINavigationController åœºæ™¯ï¼‰"/> <meta itemprop="keywords" content="iOS"/> <meta itemprop="datePublished" content="2025-12-26T06:08:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ±Ÿä¸œå°bugç‹"/> <meta itemprop="url" content="https://juejin.cn/user/1583760376077646"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£ UITabBarControllerï¼šä»£ç†æ–¹æ³•ä¸ ViewController ç”Ÿå‘½å‘¨æœŸçš„æ‰§è¡Œé¡ºåºï¼ˆå« UINavigationController åœºæ™¯ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1583760376077646/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ±Ÿä¸œå°bugç‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T06:08:01.000Z" title="Fri Dec 26 2025 06:08:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ iOS å¼€å‘ä¸­ï¼Œ<code>UITabBarController</code> æ˜¯æ„å»ºå¤š Tab åº”ç”¨çš„æ ‡å‡†å®¹å™¨ã€‚ä½†å¾ˆå¤šå¼€å‘è€…å¯¹ä»¥ä¸‹é—®é¢˜ä»æ¨¡ç³Šä¸æ¸…ï¼š</p>
<ul>
<li><code>tabBarController:shouldSelectViewController:</code> å’Œ <code>didSelectViewController:</code> åˆ°åº•åœ¨ä»€ä¹ˆæ—¶å€™è°ƒç”¨ï¼Ÿ</li>
<li><code>tabBarController.selectedViewController</code> <strong>ä½•æ—¶å‘ç”Ÿå˜åŒ–</strong>ï¼Ÿ</li>
<li>å¦‚æœæ¯ä¸ª Tab éƒ½æ˜¯ <code>UINavigationController</code>ï¼Œä»£ç†æ‹¿åˆ°çš„æ˜¯è°ï¼Ÿç”Ÿå‘½å‘¨æœŸåˆç”±è°æ¥æ”¶ï¼Ÿ</li>
<li>å¦‚ä½•å‡†ç¡®è·å–â€œåˆ‡æ¢å‰â€å’Œâ€œåˆ‡æ¢åâ€çš„<strong>ä¸šåŠ¡æ§åˆ¶å™¨</strong>ï¼Ÿ</li>
</ul>
<p>æœ¬æ–‡å°†é€šè¿‡<strong>ç²¾ç¡®çš„æ—¶é—´çº¿ + çŠ¶æ€å¿«ç…§ + å®æˆ˜ä»£ç </strong>ï¼Œå½»åº•å˜æ¸… UITabBarController åœ¨ç”¨æˆ·ç‚¹å‡» Tab æ—¶çš„<strong>å®Œæ•´æ‰§è¡Œé“¾</strong>ï¼ŒåŠ©ä½ å†™å‡ºç²¾å‡†ã€å¥å£®çš„å¯¼èˆªé€»è¾‘ã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸ”‘ æ ¸å¿ƒæ¦‚å¿µï¼šselectedViewController çš„å˜åŒ–æ—¶æœº</h2>
<p><code>UITabBarController</code> æœ‰ä¸€ä¸ªå…³é”®å±æ€§ï¼š</p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-keyword">@property</span>(<span class="hljs-keyword">nullable</span>, <span class="hljs-keyword">nonatomic</span>, <span class="hljs-keyword">weak</span>) <span class="hljs-built_in">UIViewController</span> *selectedViewController;
</code></pre>
<p>å®ƒçš„å€¼<strong>ä¸æ˜¯åœ¨åˆ‡æ¢å¼€å§‹æ—¶å˜ï¼Œè€Œæ˜¯åœ¨åˆ‡æ¢å®Œæˆåæ‰æ›´æ–°</strong>ã€‚è¿™ä¸€ç‚¹ç›´æ¥å†³å®šäº†ä½ åœ¨ä»£ç†ä¸­èƒ½æ‹¿åˆ°ä»€ä¹ˆã€‚</p>
<blockquote>
<p>âœ… <strong>ç»“è®ºå…ˆè¡Œ</strong>ï¼š</p>
<ul>
<li>åœ¨ <code>shouldSelectViewController:</code> ä¸­ï¼Œ<code>selectedViewController</code> <strong>ä»æ˜¯æ—§çš„æ§åˆ¶å™¨</strong></li>
<li>åœ¨ <code>didSelectViewController:</code> ä¸­ï¼Œ<code>selectedViewController</code> <strong>å·²ç­‰äºæ–°æ§åˆ¶å™¨</strong></li>
<li><strong>çœŸæ­£çš„èµ‹å€¼å‘ç”Ÿåœ¨ ViewController è½¬åœºå®Œæˆä¹‹åã€didSelect è°ƒç”¨ä¹‹å‰</strong></li>
</ul>
</blockquote>
<p>è¿™ä¸ªç‰¹æ€§ï¼Œæ˜¯å®ç°â€œè®°å½•åˆ‡æ¢æ¥æºâ€çš„å…³é”®ï¼</p>
<hr/>
<h2 data-id="heading-1">ğŸ“‹ ä¸€ã€æ ‡å‡†æ‰§è¡Œæµç¨‹ï¼ˆä» Tab A â†’ Tab Bï¼‰</h2>
<p>å‡è®¾ï¼š</p>
<ul>
<li>å½“å‰é€‰ä¸­çš„æ˜¯ <strong>A æ§åˆ¶å™¨</strong></li>
<li>ç”¨æˆ·ç‚¹å‡» Tabï¼Œåˆ‡æ¢åˆ° <strong>B æ§åˆ¶å™¨</strong></li>
<li>æ‰€æœ‰ view å·²åŠ è½½ï¼ˆéé¦–æ¬¡ï¼‰</li>
<li><code>tabBarController.delegate = self</code></li>
</ul>
<h3 data-id="heading-2">âœ… å®Œæ•´æ‰§è¡Œé¡ºåº + selectedViewController å¿«ç…§</h3>





















































<table><thead><tr><th>æ­¥éª¤</th><th>æ–¹æ³• / äº‹ä»¶</th><th><code>selectedViewController</code> çš„å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1</td><td><code>shouldSelectViewController:(B)</code></td><td><strong>A</strong></td><td>å¯æ‹¦æˆªåˆ‡æ¢ï¼›æ­¤æ—¶ B å°šæœªæ¿€æ´»</td></tr><tr><td>2</td><td>A.<code>viewWillDisappear:</code></td><td>A</td><td>A å³å°†æ¶ˆå¤±</td></tr><tr><td>3</td><td>B.<code>viewWillAppear:</code></td><td>A</td><td>B å³å°†å‡ºç°ï¼Œä½† TabBar ä»è®¤ä¸º A æ˜¯å½“å‰é¡µ</td></tr><tr><td>4</td><td>A.<code>viewDidDisappear:</code></td><td>A</td><td>A å·²æ¶ˆå¤±</td></tr><tr><td>5</td><td>B.<code>viewDidAppear:</code></td><td>A</td><td>B å·²æ˜¾ç¤ºï¼Œä½† <code>selectedViewController</code> <strong>ä»æœªæ›´æ–°</strong>ï¼</td></tr><tr><td>6</td><td><strong>å†…éƒ¨èµ‹å€¼</strong></td><td><strong>B</strong></td><td>UIKit ç§æœ‰é€»è¾‘ï¼š<code>selectedViewController = B</code></td></tr><tr><td>7</td><td><code>didSelectViewController:(B)</code></td><td><strong>B</strong></td><td>åˆ‡æ¢å®Œæˆï¼Œå¯å®‰å…¨ä½¿ç”¨æ–°æ§åˆ¶å™¨</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ é‡ç‚¹ï¼š<strong><code>selectedViewController</code> çš„å˜æ›´å‘ç”Ÿåœ¨ <code>viewDidAppear:</code> ä¹‹åã€<code>didSelect...</code> ä¹‹å‰</strong>ã€‚</p>
</blockquote>
<p>è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>ä½ <strong>ä¸èƒ½</strong>åœ¨ <code>viewDidAppear:</code> ä¸­é€šè¿‡ <code>tabBarController.selectedViewController</code> åˆ¤æ–­â€œæ˜¯å¦åˆšè¢«é€‰ä¸­â€ï¼ˆå› ä¸ºå®ƒè¿˜æ˜¯æ—§çš„ï¼ï¼‰</li>
<li>ä½†ä½ <strong>å¯ä»¥</strong>åœ¨ <code>shouldSelect...</code> ä¸­é€šè¿‡ <code>selectedViewController</code> è·å–â€œåˆ‡æ¢å‰â€çš„æ§åˆ¶å™¨</li>
</ul>
<hr/>
<h2 data-id="heading-3">ğŸ“¦ äºŒã€å½“ Tab ä¸­æ˜¯ UINavigationController æ—¶</h2>
<p>è¿™æ˜¯æœ€å¸¸è§æ¶æ„ï¼š</p>
<pre><code class="hljs language-text" lang="text">TabBarController
â”œâ”€â”€ UINavigationController (rootVC of Tab 0) â†’ HomeVC
â””â”€â”€ UINavigationController (rootVC of Tab 1) â†’ ProfileVC
</code></pre>
<h3 data-id="heading-4">ğŸ”„ æ‰§è¡Œæµç¨‹æ˜¯å¦æ”¹å˜ï¼Ÿ</h3>
<p><strong>å¦ï¼é¡ºåºå®Œå…¨ä¸€è‡´</strong>ï¼Œä½†å¯¹è±¡ç±»å‹ä¸åŒï¼š</p>






























<table><thead><tr><th>é˜¶æ®µ</th><th>æ™®é€š VC åœºæ™¯</th><th>UINavigationController åœºæ™¯</th></tr></thead><tbody><tr><td><code>shouldSelect...</code> å‚æ•°</td><td>HomeVC</td><td><strong>UINavigationController</strong></td></tr><tr><td><code>selectedViewController</code></td><td>HomeVC</td><td><strong>UINavigationController</strong></td></tr><tr><td>ç”Ÿå‘½å‘¨æœŸæ¥æ”¶è€…</td><td>HomeVC</td><td><strong>HomeVCï¼ˆNav çš„ topViewControllerï¼‰</strong></td></tr><tr><td><code>didSelect...</code> å‚æ•°</td><td>HomeVC</td><td><strong>UINavigationController</strong></td></tr></tbody></table>
<h3 data-id="heading-5">âœ… ç¤ºä¾‹ï¼šä»£ç†ä¸­çš„æ—¥å¿—</h3>
<pre><code class="hljs language-objc" lang="objc">- (<span class="hljs-type">BOOL</span>)tabBarController:(<span class="hljs-built_in">UITabBarController</span> *)tc shouldSelectViewController:(<span class="hljs-built_in">UIViewController</span> *)toRoot {
    <span class="hljs-built_in">UIViewController</span> *fromRoot = tc.selectedViewController; <span class="hljs-comment">// ä»æ˜¯æ—§çš„ Nav</span>
    <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"[shouldSelect] from: %@, to: %@"</span>, 
          <span class="hljs-built_in">NSStringFromClass</span>([fromRoot <span class="hljs-keyword">class</span>]), 
          <span class="hljs-built_in">NSStringFromClass</span>([toRoot <span class="hljs-keyword">class</span>]));
    <span class="hljs-comment">// è¾“å‡ºï¼šfrom: UINavigationController, to: UINavigationController</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">YES</span>;
}
</code></pre>
<p>è€Œä¸æ­¤åŒæ—¶ï¼Œ<strong>HomeVC ä¼šæ­£å¸¸æ”¶åˆ° <code>viewWillAppear:</code></strong>ï¼Œå› ä¸º UINavigationController ä¼šè‡ªåŠ¨å°†ç”Ÿå‘½å‘¨æœŸä¼ é€’ç»™å…¶ topViewControllerã€‚</p>
<hr/>
<h2 data-id="heading-6">ğŸ›  ä¸‰ã€å¦‚ä½•æ­£ç¡®è·å–â€œä¸šåŠ¡æ§åˆ¶å™¨â€ï¼Ÿ</h2>
<p>ç”±äº delegate æ‹¿åˆ°çš„æ˜¯ root VCï¼ˆå¯èƒ½æ˜¯ Navï¼‰ï¼Œæˆ‘ä»¬éœ€è¦â€œç©¿é€â€ä¸€å±‚ã€‚</p>
<h3 data-id="heading-7">âœ… æ¨èå·¥å…·æ–¹æ³•ï¼š</h3>
<pre><code class="hljs language-objc" lang="objc">- (<span class="hljs-built_in">UIViewController</span> *)businessViewControllerFromTabRoot:(<span class="hljs-built_in">UIViewController</span> *)root {
    <span class="hljs-keyword">if</span> ([root isKindOfClass:[<span class="hljs-built_in">UINavigationController</span> <span class="hljs-keyword">class</span>]]) {
        <span class="hljs-keyword">return</span> [(<span class="hljs-built_in">UINavigationController</span> *)root topViewController];
    }
    <span class="hljs-keyword">return</span> root;
}
</code></pre>
<h3 data-id="heading-8">åº”ç”¨äºä»£ç†ï¼š</h3>
<pre><code class="hljs language-objc" lang="objc">- (<span class="hljs-type">BOOL</span>)tabBarController:(<span class="hljs-built_in">UITabBarController</span> *)tc shouldSelectViewController:(<span class="hljs-built_in">UIViewController</span> *)toRoot {
    <span class="hljs-built_in">UIViewController</span> *fromBusiness = [<span class="hljs-keyword">self</span> businessViewControllerFromTabRoot:tc.selectedViewController];
    <span class="hljs-built_in">UIViewController</span> *toBusiness   = [<span class="hljs-keyword">self</span> businessViewControllerFromTabRoot:toRoot];
    
    <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"ä» %@ åˆ‡æ¢åˆ° %@"</span>, 
          <span class="hljs-built_in">NSStringFromClass</span>([fromBusiness <span class="hljs-keyword">class</span>]), 
          <span class="hljs-built_in">NSStringFromClass</span>([toBusiness <span class="hljs-keyword">class</span>]));
    
    <span class="hljs-comment">// ç¼“å­˜â€œåˆ‡æ¢å‰â€ç”¨äº didSelect</span>
    <span class="hljs-keyword">self</span>.previousBusinessVC = fromBusiness;
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">YES</span>;
}

- (<span class="hljs-type">void</span>)tabBarController:(<span class="hljs-built_in">UITabBarController</span> *)tc didSelectViewController:(<span class="hljs-built_in">UIViewController</span> *)toRoot {
    <span class="hljs-built_in">UIViewController</span> *toBusiness = [<span class="hljs-keyword">self</span> businessViewControllerFromTabRoot:toRoot];
    <span class="hljs-built_in">UIViewController</span> *fromBusiness = <span class="hljs-keyword">self</span>.previousBusinessVC;
    
    [Analytics logTabSwitchFrom:fromBusiness to:toBusiness];
}
</code></pre>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼šä¸è¦åœ¨ <code>didSelect...</code> ä¸­å†è¯» <code>tc.selectedViewController</code> æ¥è·å–â€œfromâ€ï¼Œå› ä¸ºå®ƒå·²ç»æ˜¯ <code>to</code> äº†ï¼</p>
</blockquote>
<hr/>
<h2 data-id="heading-9">âš ï¸ å››ã€ç‰¹æ®Šåœºæ™¯æ·±åº¦è§£æ</h2>
<h3 data-id="heading-10">1. <strong>é‡å¤ç‚¹å‡»å½“å‰ Tabï¼ˆA â†’ Aï¼‰</strong></h3>
<ul>
<li>âœ… <code>shouldSelectViewController:</code> è¢«è°ƒç”¨ï¼Œ<code>selectedViewController == toRoot</code></li>
<li>âŒ <strong>ä¸è§¦å‘ä»»ä½•ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</strong></li>
<li>âŒ <strong>ä¸è°ƒç”¨ <code>didSelectViewController:</code></strong></li>
<li>âŒ <strong>ä¸ä¼šä¿®æ”¹ <code>selectedViewController</code>ï¼ˆæœ¬æ¥å°±æ˜¯å®ƒï¼‰</strong></li>
</ul>
<p>âœ… ç”¨é€”ï¼šå®ç°â€œå›åˆ°é¡¶éƒ¨â€ã€â€œåˆ·æ–°å½“å‰é¡µâ€</p>
<pre><code class="hljs language-objc" lang="objc">- (<span class="hljs-type">BOOL</span>)tabBarController:(<span class="hljs-built_in">UITabBarController</span> *)tc shouldSelectViewController:(<span class="hljs-built_in">UIViewController</span> *)vc {
    <span class="hljs-keyword">if</span> (vc == tc.selectedViewController) {
        <span class="hljs-keyword">if</span> ([vc isKindOfClass:[<span class="hljs-built_in">UINavigationController</span> <span class="hljs-keyword">class</span>]]) {
            [(<span class="hljs-built_in">UINavigationController</span> *)vc popToRootViewControllerAnimated:<span class="hljs-literal">YES</span>];
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">NO</span>; <span class="hljs-comment">// è¯­ä¹‰ä¸Šâ€œä¸éœ€è¦åˆ‡æ¢â€</span>
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">YES</span>;
}
</code></pre>
<h3 data-id="heading-11">2. <strong>é€šè¿‡ä»£ç åˆ‡æ¢ Tabï¼ˆå¦‚ <code>selectedIndex = 1</code>ï¼‰</strong></h3>
<ul>
<li>âŒ <strong>ä¸è§¦å‘ä»»ä½• delegate æ–¹æ³•</strong></li>
<li>âœ… ä½†ä¼šè§¦å‘ ViewController ç”Ÿå‘½å‘¨æœŸ</li>
<li>âœ… <code>selectedViewController</code> ä¼šç«‹å³æ›´æ–°</li>
</ul>
<blockquote>
<p>æ‰€ä»¥ï¼š<strong>delegate æ–¹æ³•ä»…ç”±ç”¨æˆ·ç‚¹å‡» TabBar è§¦å‘</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-12">ğŸ“Œ äº”ã€å¼€å‘æœ€ä½³å®è·µæ€»ç»“</h2>








































<table><thead><tr><th>éœ€æ±‚</th><th>æ¨èä½ç½®</th><th>æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td>è·å–â€œåˆ‡æ¢å‰â€çš„æ§åˆ¶å™¨</td><td><code>shouldSelect...</code> ä¸­è¯» <code>selectedViewController</code></td><td>éœ€è§£åŒ… UINavigationController</td></tr><tr><td>è·å–â€œåˆ‡æ¢åâ€çš„æ§åˆ¶å™¨</td><td><code>didSelect...</code> çš„å‚æ•° æˆ– <code>selectedViewController</code></td><td>ä¸¤è€…æ­¤æ—¶ç›¸ç­‰</td></tr><tr><td>åˆ·æ–°æ•°æ®</td><td>ä¸šåŠ¡ VC çš„ <code>viewWillAppear:</code></td><td>ä¸è¦æ”¾ viewDidLoad</td></tr><tr><td>åŸ‹ç‚¹ / æ—¥å¿—</td><td><code>didSelect...</code></td><td>ç¡®ä¿åˆ‡æ¢å·²å®Œæˆ</td></tr><tr><td>æ‹¦æˆªåˆ‡æ¢</td><td><code>shouldSelect...</code> è¿”å› NO</td><td>å¯ç”¨äºæƒé™æ§åˆ¶</td></tr><tr><td>å¤„ç†é‡å¤ç‚¹å‡»</td><td><code>shouldSelect...</code> ä¸­åˆ¤æ–­ <code>vc == selectedViewController</code></td><td>å¯æ‰‹åŠ¨è§¦å‘é€»è¾‘</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-13">âœ… å…­ã€ç»ˆææµç¨‹å›¾ï¼ˆå«çŠ¶æ€å¿«ç…§ï¼‰</h2>
<pre><code class="hljs language-ini" lang="ini">ç”¨æˆ·ç‚¹å‡» Tab B
        â†“
<span class="hljs-section">[Delegate]</span> shouldSelectViewController:(B_root)
    â†’ <span class="hljs-attr">selectedViewController</span> == A_root âœ…
        â†“
<span class="hljs-section">[A_business]</span> viewWillDisappear
<span class="hljs-section">[B_business]</span> viewWillAppear
        â†“
<span class="hljs-section">[A_business]</span> viewDidDisappear
<span class="hljs-section">[B_business]</span> viewDidAppear
        â†“
UIKit å†…éƒ¨: <span class="hljs-attr">tabBarController.selectedViewController</span> = B_root
        â†“
<span class="hljs-section">[Delegate]</span> didSelectViewController:(B_root)
    â†’ <span class="hljs-attr">selectedViewController</span> == B_root âœ…
</code></pre>
<blockquote>
<p>ğŸ¯ <strong>è®°ä½ä¸‰å¥è¯</strong>ï¼š</p>
<ol>
<li><strong><code>shouldSelect</code> çœ‹â€œè¿‡å»â€ï¼Œ<code>didSelect</code> çœ‹â€œç°åœ¨â€</strong></li>
<li><strong>ç”Ÿå‘½å‘¨æœŸå±äºä¸šåŠ¡ VCï¼Œä»£ç†å‚æ•°å±äº Tab root VC</strong></li>
<li><strong>selectedViewController çš„å˜æ›´ï¼Œå‘ç”Ÿåœ¨è½¬åœºç»“æŸä¹‹å</strong></li>
</ol>
</blockquote>
<hr/>
<h2 data-id="heading-14">ğŸ“š ç»“è¯­</h2>
<p><code>UITabBarController</code> çš„è®¾è®¡ç²¾å·§è€Œä¸€è‡´ã€‚åªè¦ç†è§£ <strong>ä»£ç†æ—¶æœºã€selectedViewController å˜åŒ–ç‚¹ã€ä»¥åŠ UINavigationController çš„ç©¿é€é€»è¾‘</strong>ï¼Œä½ å°±èƒ½åœ¨ä»»ä½•å¤æ‚ Tab æ¶æ„ä¸­æ¸¸åˆƒæœ‰ä½™ã€‚</p>
<p>å¸Œæœ›æœ¬æ–‡èƒ½æˆä¸ºä½ å¤„ç† Tab åˆ‡æ¢é€»è¾‘çš„â€œé»„é‡‘å‚è€ƒâ€ã€‚</p>
<hr/>
<p>æ¬¢è¿ç‚¹èµã€æ”¶è—ã€è¯„è®ºäº¤æµï¼å¦‚æœä½ æœ‰æ›´å¤æ‚çš„åµŒå¥—åœºæ™¯ï¼ˆå¦‚ Tab å†…åµŒ PageViewControllerï¼‰ï¼Œä¹Ÿæ¬¢è¿ç•™è¨€è®¨è®ºï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Elastic Search èšåˆæŸ¥è¯¢]]></title>    <link>https://juejin.cn/post/7587825268199833606</link>    <guid>https://juejin.cn/post/7587825268199833606</guid>    <pubDate>2025-12-26T06:34:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587825268199833606" data-draft-id="7587688765188538368" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Elastic Search èšåˆæŸ¥è¯¢"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T06:34:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é…’é…¿èåœçš®"/> <meta itemprop="url" content="https://juejin.cn/user/1080158100920361"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Elastic Search èšåˆæŸ¥è¯¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1080158100920361/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é…’é…¿èåœçš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T06:34:40.000Z" title="Fri Dec 26 2025 06:34:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨esç®€å•æŸ¥è¯¢ä¹‹å¤–ï¼Œè¿˜æœ‰æ›´é«˜çº§çš„èšåˆæŸ¥è¯¢ï¼Œè¿™äº›åŸºæœ¬ä¸Šéƒ½æ˜¯ä¼šå¤§å¤§å‡å°‘ç”Ÿæˆéœ€æ±‚æ•°æ®æ‰€éœ€çš„æ—¶é—´ã€‚</p>
<p>å¦‚æœè¯´ <strong>Query</strong> å†³å®šæŸ¥å“ªäº›æ–‡æ¡£ï¼Œ<br/>
é‚£ <strong>Aggregation</strong> å†³å®šä»è¿™äº›æ–‡æ¡£é‡Œèƒ½ç®—å‡ºä»€ä¹ˆä¸–ç•Œã€‚</p>
<p>è¿™å…¶ä¸­å°±åŒ…æ‹¬ï¼š</p>
<h4 data-id="heading-0">1.value_countï¼šç»Ÿè®¡å­—æ®µéç©ºæ•°é‡</h4>
<p>å¾—åˆ°è¯¥ç´¢å¼•çš„æ•°é‡ä¹‹å’Œï¼Œä¸€èˆ¬ç”¨äºåˆ—è¡¨å±•ç¤º</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable constant_">GET</span> order_index/_search 
    { <span class="hljs-string">"size"</span>: <span class="hljs-number">0</span>, 
      <span class="hljs-string">"aggs"</span>: 
        { <span class="hljs-string">"order_count"</span>: 
            { <span class="hljs-string">"value_count"</span>: { <span class="hljs-string">"field"</span>: <span class="hljs-string">"orderId"</span> }} 
        } 
    }
</code></pre>
<h4 data-id="heading-1">2.termsï¼šåˆ†ç»„èšåˆ</h4>
<p>ç­‰åŒäºgroup by</p>
<p>æ ¹æ®æ‰€é€‰å­—æ®µï¼Œè‡ªåŠ¨åˆ†ç»„å¹¶ä¸”å¾—å‡ºæ•°é‡ï¼Œä¸€èˆ¬ç”¨äºåˆ—è¡¨æ ‡ç­¾å±•ç¤ºçš„æ—¶å€™æ¥æ˜¾ç¤ºå„ä¸ªæ ‡ç­¾æœ‰å¤šå°‘æ•°æ®ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable constant_">GET</span> order_index/_search 
{ 
    <span class="hljs-string">"size"</span>: <span class="hljs-number">0</span>, 
    <span class="hljs-string">"aggs"</span>: 
        { <span class="hljs-string">"by_status"</span>: 
            { <span class="hljs-string">"terms"</span>: { <span class="hljs-string">"field"</span>: <span class="hljs-string">"status.keyword"</span> }} 
        } 
 }
</code></pre>
<h4 data-id="heading-2">3.åˆ†ç»„ + æŒ‡æ ‡èšåˆ</h4>
<p>æ ¹æ®åˆ†ç»„çš„ä¸ªä¸ªæ•°æ®ï¼Œå¯¹å†…æ±‚å’Œ</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable constant_">GET</span> order_index/_search 
{ <span class="hljs-string">"size"</span>: <span class="hljs-number">0</span>, 
    <span class="hljs-string">"aggs"</span>: { 
    <span class="hljs-string">"by_status"</span>: { 
        <span class="hljs-string">"terms"</span>: { <span class="hljs-string">"field"</span>: <span class="hljs-string">"status.keyword"</span> },
        <span class="hljs-string">"aggs"</span>: { 
            <span class="hljs-string">"total_amount"</span>: { <span class="hljs-string">"sum"</span>: { <span class="hljs-string">"field"</span>: <span class="hljs-string">"amount"</span> } }
           } 
        }
    } 
}
</code></pre>
<h4 data-id="heading-3">4.è¿‡æ»¤ + èšåˆ</h4>
<p>é€šè¿‡queryè¿‡æ»¤æ•°æ®ï¼Œåœ¨ä½¿ç”¨aggæ¥èšåˆæ•°æ®ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable constant_">GET</span> order_index/_search 
{ <span class="hljs-string">"size"</span>: <span class="hljs-number">0</span>, 
    <span class="hljs-string">"query"</span>: { 
        <span class="hljs-string">"term"</span>: { <span class="hljs-string">"status.keyword"</span>: <span class="hljs-string">"PAID"</span> } 
    }, 
    <span class="hljs-string">"aggs"</span>: { 
        <span class="hljs-string">"avg_amount"</span>: { <span class="hljs-string">"avg"</span>: { <span class="hljs-string">"field"</span>: <span class="hljs-string">"amount"</span> } } 
    } 
}
</code></pre>
<h4 data-id="heading-4">5.date_histogram æ—¶é—´èšåˆ</h4>
<p>æ ¹æ®æ—¶é—´æ ¼å¼è¿›è¡Œèšåˆ</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable constant_">GET</span> order_index/_search 
{ <span class="hljs-string">"size"</span>: <span class="hljs-number">0</span>, 
    <span class="hljs-string">"aggs"</span>: { 
        <span class="hljs-string">"order_by_day"</span>: { 
            <span class="hljs-string">"date_histogram"</span>: { 
            <span class="hljs-string">"field"</span>: <span class="hljs-string">"createTime"</span>, <span class="hljs-string">"calendar_interval"</span>: <span class="hljs-string">"day"</span>, <span class="hljs-string">"format"</span>: <span class="hljs-string">"yyyy-MM-dd"</span> } 
        } 
    } 
}
</code></pre>
<h4 data-id="heading-5">6.Bucket ç­›é€‰</h4>
<p>script è¿›è¡Œç­›é€‰ï¼Œåªèƒ½åœ¨èšåˆä¹‹å</p>
<pre><code class="hljs language-js" lang="js">{<span class="hljs-string">"size"</span>: <span class="hljs-number">0</span>, 
    <span class="hljs-string">"aggs"</span>: { 
        <span class="hljs-string">"by_status"</span>: {
            <span class="hljs-string">"terms"</span>: { <span class="hljs-string">"field"</span>: <span class="hljs-string">"status.keyword"</span> }, 
            <span class="hljs-string">"aggs"</span>: { 
                 <span class="hljs-string">"order_filter"</span>: { 
                     <span class="hljs-string">"bucket_selector"</span>: { 
                         <span class="hljs-string">"buckets_path"</span>: { <span class="hljs-string">"cnt"</span>: <span class="hljs-string">"_count"</span> }, 
                         <span class="hljs-string">"script"</span>: <span class="hljs-string">"params.cnt &gt;= 100"</span>
                      }
                 }
             } 
        } 
     } 
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pythonè¿­ä»£å™¨ä¸ç”Ÿæˆå™¨æ·±åº¦è§£æï¼šæ‡’åŠ è½½çš„è‰ºæœ¯]]></title>    <link>https://juejin.cn/post/7587712328827191332</link>    <guid>https://juejin.cn/post/7587712328827191332</guid>    <pubDate>2025-12-26T05:05:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587712328827191332" data-draft-id="7587720490930831396" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pythonè¿­ä»£å™¨ä¸ç”Ÿæˆå™¨æ·±åº¦è§£æï¼šæ‡’åŠ è½½çš„è‰ºæœ¯"/> <meta itemprop="keywords" content="Python,PyCharm"/> <meta itemprop="datePublished" content="2025-12-26T05:05:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åƒè¥¿çº¢æŸ¿é•¿å¤§çš„ç•ªèŒ„"/> <meta itemprop="url" content="https://juejin.cn/user/3097787706900985"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pythonè¿­ä»£å™¨ä¸ç”Ÿæˆå™¨æ·±åº¦è§£æï¼šæ‡’åŠ è½½çš„è‰ºæœ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3097787706900985/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åƒè¥¿çº¢æŸ¿é•¿å¤§çš„ç•ªèŒ„
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T05:05:08.000Z" title="Fri Dec 26 2025 05:05:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-light">.hljs-comment,.hljs-quote{color:#696969}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d91e18}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#aa5d00}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:green}.hljs-section,.hljs-title{color:#007faa}.hljs-keyword,.hljs-selector-tag{color:#7928a1}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fefefe;color:#545454}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å¼•è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦è¿­ä»£å™¨å’Œç”Ÿæˆå™¨ï¼Ÿ</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ è¦å¤„ç†ä¸€ä¸ª100GBçš„æ–‡æœ¬æ–‡ä»¶ï¼Œæˆ–è€…ä»æ•°æ®åº“è¯»å–100ä¸‡æ¡è®°å½•ã€‚å¦‚æœä½ ä¸€æ¬¡æ€§æŠŠæ‰€æœ‰æ•°æ®åŠ è½½åˆ°å†…å­˜ï¼Œç”µè„‘å¯èƒ½ä¼šå´©æºƒã€‚è¿­ä»£å™¨å’Œç”Ÿæˆå™¨å°±æ˜¯ä¸ºè§£å†³è¿™ç±»é—®é¢˜è€Œç”Ÿçš„ï¼Œå®ƒä»¬å¯ä»¥"æ‡’åŠ è½½"æ•°æ®ï¼Œç”¨å¤šå°‘å–å¤šå°‘ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€è¿­ä»£å™¨ï¼ˆIteratorï¼‰åŸºç¡€</h2>
<h3 data-id="heading-2">1.1 ä»€ä¹ˆæ˜¯è¿­ä»£å™¨ï¼Ÿ</h3>
<p>python</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è¿­ä»£å™¨åŸºç¡€ç¤ºä¾‹</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"=== è¿­ä»£å™¨åŸºç¡€ ==="</span>)

<span class="hljs-comment"># Pythonä¸­ä¸€åˆ‡éƒ½æ˜¯å¯è¿­ä»£çš„</span>
my_list = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]

<span class="hljs-comment"># ä¼ ç»Ÿforå¾ªç¯</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¼ ç»Ÿforå¾ªç¯:"</span>)
<span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> my_list:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  <span class="hljs-subst">{item}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nå®é™…å‘ç”Ÿäº†ä»€ä¹ˆ:"</span>)
<span class="hljs-comment"># forå¾ªç¯èƒŒåçš„åŸç†</span>
iter_obj = <span class="hljs-built_in">iter</span>(my_list)  <span class="hljs-comment"># è·å–è¿­ä»£å™¨</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¿­ä»£å™¨å¯¹è±¡: <span class="hljs-subst">{iter_obj}</span>"</span>)

<span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
    <span class="hljs-keyword">try</span>:
        item = <span class="hljs-built_in">next</span>(iter_obj)  <span class="hljs-comment"># è·å–ä¸‹ä¸€ä¸ªå…ƒç´ </span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  è·å–åˆ°: <span class="hljs-subst">{item}</span>"</span>)
    <span class="hljs-keyword">except</span> StopIteration:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"  è¿­ä»£ç»“æŸ"</span>)
        <span class="hljs-keyword">break</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">50</span>)
</code></pre>
<h3 data-id="heading-3">1.2 è‡ªå®šä¹‰è¿­ä»£å™¨ç±»</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Countdown</span>:
    <span class="hljs-string">"""å€’è®¡æ—¶è¿­ä»£å™¨"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, start</span>):
        self.current = start
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__iter__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""è¿”å›è¿­ä»£å™¨è‡ªèº«"""</span>
        <span class="hljs-keyword">return</span> self
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__next__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""è¿”å›ä¸‹ä¸€ä¸ªå€¼"""</span>
        <span class="hljs-keyword">if</span> self.current &lt;= <span class="hljs-number">0</span>:
            <span class="hljs-keyword">raise</span> StopIteration
        value = self.current
        self.current -= <span class="hljs-number">1</span>
        <span class="hljs-keyword">return</span> value

<span class="hljs-built_in">print</span>(<span class="hljs-string">"=== è‡ªå®šä¹‰è¿­ä»£å™¨ ==="</span>)

<span class="hljs-comment"># ä½¿ç”¨è‡ªå®šä¹‰è¿­ä»£å™¨</span>
countdown = Countdown(<span class="hljs-number">5</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å€’è®¡æ—¶å¼€å§‹:"</span>)

<span class="hljs-keyword">for</span> number <span class="hljs-keyword">in</span> countdown:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  <span class="hljs-subst">{number}</span>..."</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"å‘å°„ï¼"</span>)

<span class="hljs-comment"># æ‰‹åŠ¨ä½¿ç”¨è¿­ä»£å™¨</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ‰‹åŠ¨ä½¿ç”¨è¿­ä»£å™¨:"</span>)
countdown2 = Countdown(<span class="hljs-number">3</span>)
iterator = <span class="hljs-built_in">iter</span>(countdown2)

<span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(iterator))  <span class="hljs-comment"># 3</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(iterator))  <span class="hljs-comment"># 2</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(iterator))  <span class="hljs-comment"># 1</span>

<span class="hljs-keyword">try</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(iterator))  <span class="hljs-comment"># ä¼šå¼•å‘StopIteration</span>
<span class="hljs-keyword">except</span> StopIteration:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¿­ä»£ç»“æŸ"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">50</span>)
</code></pre>
<h3 data-id="heading-4">1.3 å®ç”¨çš„è¿­ä»£å™¨ï¼šæ–‡ä»¶è¯»å–å™¨</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">LargeFileReader</span>:
    <span class="hljs-string">"""å¤§æ–‡ä»¶è¯»å–å™¨ - é€è¡Œè¯»å–ï¼Œé¿å…å†…å­˜æº¢å‡º"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, filename, chunk_size=<span class="hljs-number">1024</span></span>):
        self.filename = filename
        self.chunk_size = chunk_size
        self.file = <span class="hljs-literal">None</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__iter__</span>(<span class="hljs-params">self</span>):
        self.file = <span class="hljs-built_in">open</span>(self.filename, <span class="hljs-string">'r'</span>, encoding=<span class="hljs-string">'utf-8'</span>)
        <span class="hljs-keyword">return</span> self
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__next__</span>(<span class="hljs-params">self</span>):
        line = self.file.readline()
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> line:
            self.file.close()
            <span class="hljs-keyword">raise</span> StopIteration
        <span class="hljs-keyword">return</span> line.strip()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">read_in_chunks</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æŒ‰å—è¯»å–æ–‡ä»¶"""</span>
        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(self.filename, <span class="hljs-string">'r'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> f:
            <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
                chunk = f.read(self.chunk_size)
                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> chunk:
                    <span class="hljs-keyword">break</span>
                <span class="hljs-keyword">yield</span> chunk

<span class="hljs-built_in">print</span>(<span class="hljs-string">"=== æ–‡ä»¶è¯»å–è¿­ä»£å™¨ ==="</span>)

<span class="hljs-comment"># æ¨¡æ‹Ÿä¸€ä¸ªå¤§æ–‡ä»¶</span>
<span class="hljs-keyword">import</span> tempfile

<span class="hljs-comment"># åˆ›å»ºä¸´æ—¶æ–‡ä»¶ï¼Œå†™å…¥100è¡Œæ•°æ®</span>
<span class="hljs-keyword">with</span> tempfile.NamedTemporaryFile(mode=<span class="hljs-string">'w'</span>, delete=<span class="hljs-literal">False</span>, suffix=<span class="hljs-string">'.txt'</span>) <span class="hljs-keyword">as</span> tmp:
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">100</span>):
        tmp.write(<span class="hljs-string">f"è¿™æ˜¯ç¬¬<span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span>è¡Œæ•°æ®ï¼ŒåŒ…å«ä¸€äº›æµ‹è¯•å†…å®¹ç”¨äºæ¼”ç¤ºè¿­ä»£å™¨çš„å·¥ä½œæ–¹å¼\n"</span>)
    tmp_filename = tmp.name

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ›å»ºäº†æµ‹è¯•æ–‡ä»¶: <span class="hljs-subst">{tmp_filename}</span>"</span>)

<span class="hljs-comment"># ä½¿ç”¨è¿­ä»£å™¨é€è¡Œè¯»å–</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\né€è¡Œè¯»å–æ–‡ä»¶:"</span>)
file_reader = LargeFileReader(tmp_filename)
lines_read = <span class="hljs-number">0</span>

<span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> file_reader:
    lines_read += <span class="hljs-number">1</span>
    <span class="hljs-keyword">if</span> lines_read &lt;= <span class="hljs-number">3</span>:  <span class="hljs-comment"># åªæ˜¾ç¤ºå‰3è¡Œ</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  è¡Œ<span class="hljs-subst">{lines_read}</span>: <span class="hljs-subst">{line[:<span class="hljs-number">30</span>]}</span>..."</span>)
    <span class="hljs-keyword">elif</span> lines_read == <span class="hljs-number">100</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  è¡Œ<span class="hljs-subst">{lines_read}</span>: <span class="hljs-subst">{line[:<span class="hljs-number">30</span>]}</span>..."</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ€»å…±è¯»å–äº† <span class="hljs-subst">{lines_read}</span> è¡Œ"</span>)

<span class="hljs-comment"># æŒ‰å—è¯»å–</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\næŒ‰å—è¯»å–æ–‡ä»¶:"</span>)
chunks_read = <span class="hljs-number">0</span>
<span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> file_reader.read_in_chunks():
    chunks_read += <span class="hljs-number">1</span>
    <span class="hljs-keyword">if</span> chunks_read &lt;= <span class="hljs-number">2</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  å—<span class="hljs-subst">{chunks_read}</span>: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(chunk)}</span> å­—ç¬¦"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ€»å…±è¯»å–äº† <span class="hljs-subst">{chunks_read}</span> ä¸ªå—"</span>)

<span class="hljs-comment"># æ¸…ç†ä¸´æ—¶æ–‡ä»¶</span>
<span class="hljs-keyword">import</span> os
os.unlink(tmp_filename)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">50</span>)
</code></pre>
<h2 data-id="heading-5">äºŒã€ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰è¿›é˜¶</h2>
<h3 data-id="heading-6">2.1 ç”Ÿæˆå™¨å‡½æ•° vs ç”Ÿæˆå™¨è¡¨è¾¾å¼</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"=== ç”Ÿæˆå™¨åŸºç¡€ ==="</span>)

<span class="hljs-comment"># 1. ç”Ÿæˆå™¨å‡½æ•° (ä½¿ç”¨yield)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">fibonacci_generator</span>(<span class="hljs-params">n</span>):
    <span class="hljs-string">"""æ–æ³¢é‚£å¥‘æ•°åˆ—ç”Ÿæˆå™¨"""</span>
    a, b = <span class="hljs-number">0</span>, <span class="hljs-number">1</span>
    count = <span class="hljs-number">0</span>
    <span class="hljs-keyword">while</span> count &lt; n:
        <span class="hljs-keyword">yield</span> a
        a, b = b, a + b
        count += <span class="hljs-number">1</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–æ³¢é‚£å¥‘æ•°åˆ—ç”Ÿæˆå™¨:"</span>)
fib_gen = fibonacci_generator(<span class="hljs-number">10</span>)

<span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> fib_gen:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  <span class="hljs-subst">{num}</span>"</span>, end=<span class="hljs-string">" "</span>)
<span class="hljs-built_in">print</span>()

<span class="hljs-comment"># 2. ç”Ÿæˆå™¨è¡¨è¾¾å¼ (ç±»ä¼¼åˆ—è¡¨æ¨å¯¼å¼ï¼Œä½†ä½¿ç”¨åœ†æ‹¬å·)</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nç”Ÿæˆå™¨è¡¨è¾¾å¼:"</span>)

<span class="hljs-comment"># åˆ—è¡¨æ¨å¯¼å¼ - ç«‹å³ç”Ÿæˆæ‰€æœ‰å…ƒç´ </span>
squares_list = [x**<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)]
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ—è¡¨æ¨å¯¼å¼ (å·²ç”Ÿæˆæ‰€æœ‰å…ƒç´ ): <span class="hljs-subst">{squares_list}</span>"</span>)

<span class="hljs-comment"># ç”Ÿæˆå™¨è¡¨è¾¾å¼ - æ‡’ç”Ÿæˆå…ƒç´ </span>
squares_gen = (x**<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç”Ÿæˆå™¨è¡¨è¾¾å¼ (å°šæœªç”Ÿæˆ): <span class="hljs-subst">{squares_gen}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"é€ä¸ªè·å–ç”Ÿæˆå™¨çš„å€¼:"</span>)
<span class="hljs-keyword">for</span> i, square <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(squares_gen):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  <span class="hljs-subst">{i}</span>^2 = <span class="hljs-subst">{square}</span>"</span>)
    <span class="hljs-keyword">if</span> i &gt;= <span class="hljs-number">4</span>:  <span class="hljs-comment"># åªæ˜¾ç¤ºå‰5ä¸ª</span>
        <span class="hljs-keyword">break</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"... å‰©ä½™çš„å€¼ä¼šåœ¨éœ€è¦æ—¶ç”Ÿæˆ"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">50</span>)
</code></pre>
<h3 data-id="heading-7">2.2 ç”Ÿæˆå™¨çš„å®ç”¨åœºæ™¯</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"=== ç”Ÿæˆå™¨å®ç”¨åœºæ™¯ ==="</span>)

<span class="hljs-comment"># åœºæ™¯1ï¼šå¤„ç†å¤§å‹æ•°æ®é›†</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">read_large_dataset</span>(<span class="hljs-params">file_path</span>):
    <span class="hljs-string">"""è¯»å–å¤§å‹æ•°æ®é›†"""</span>
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">'r'</span>) <span class="hljs-keyword">as</span> file:
        <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> file:
            <span class="hljs-comment"># å¤„ç†æ¯ä¸€è¡Œæ•°æ®</span>
            processed_line = line.strip().lower()
            <span class="hljs-keyword">yield</span> processed_line

<span class="hljs-comment"># åœºæ™¯2ï¼šæ— é™åºåˆ—</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">infinite_counter</span>(<span class="hljs-params">start=<span class="hljs-number">0</span>, step=<span class="hljs-number">1</span></span>):
    <span class="hljs-string">"""æ— é™è®¡æ•°å™¨"""</span>
    current = start
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        <span class="hljs-keyword">yield</span> current
        current += step

<span class="hljs-comment"># åœºæ™¯3ï¼šæ•°æ®å¤„ç†ç®¡é“</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">data_pipeline</span>(<span class="hljs-params">data</span>):
    <span class="hljs-string">"""æ•°æ®å¤„ç†ç®¡é“"""</span>
    <span class="hljs-comment"># ç¬¬ä¸€æ­¥ï¼šè¿‡æ»¤</span>
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> data:
        <span class="hljs-keyword">if</span> item % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>:  <span class="hljs-comment"># åªä¿ç•™å¶æ•°</span>
            <span class="hljs-keyword">yield</span> item
    
<span class="hljs-keyword">def</span> <span class="hljs-title function_">multiply_by_3</span>(<span class="hljs-params">data</span>):
    <span class="hljs-string">"""ä¹˜ä»¥3"""</span>
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> data:
        <span class="hljs-keyword">yield</span> item * <span class="hljs-number">3</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">add_10</span>(<span class="hljs-params">data</span>):
    <span class="hljs-string">"""åŠ 10"""</span>
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> data:
        <span class="hljs-keyword">yield</span> item + <span class="hljs-number">10</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ•°æ®å¤„ç†ç®¡é“æ¼”ç¤º:"</span>)
original_data = <span class="hljs-built_in">range</span>(<span class="hljs-number">20</span>)

<span class="hljs-comment"># æ„å»ºç®¡é“</span>
pipeline = add_10(multiply_by_3(data_pipeline(original_data)))

<span class="hljs-built_in">print</span>(<span class="hljs-string">"åŸå§‹æ•°æ®:"</span>, <span class="hljs-built_in">list</span>(original_data))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¤„ç†åæ•°æ®:"</span>, <span class="hljs-built_in">list</span>(pipeline))

<span class="hljs-comment"># åœºæ™¯4ï¼šåç¨‹ï¼ˆåŒå‘é€šä¿¡ï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">coroutine_example</span>():
    <span class="hljs-string">"""åç¨‹ç¤ºä¾‹ - ç”Ÿæˆå™¨å¯ä»¥æ¥æ”¶æ•°æ®"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"åç¨‹å¯åŠ¨"</span>)
    total = <span class="hljs-number">0</span>
    count = <span class="hljs-number">0</span>
    
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        value = <span class="hljs-keyword">yield</span>
        <span class="hljs-keyword">if</span> value <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
            <span class="hljs-keyword">break</span>
        total += value
        count += <span class="hljs-number">1</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ”¶åˆ°å€¼: <span class="hljs-subst">{value}</span>, å½“å‰å¹³å‡å€¼: <span class="hljs-subst">{total/count:<span class="hljs-number">.2</span>f}</span>"</span>)
    
    <span class="hljs-keyword">return</span> total, count

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nåç¨‹æ¼”ç¤º:"</span>)
coro = coroutine_example()
<span class="hljs-built_in">next</span>(coro)  <span class="hljs-comment"># å¯åŠ¨åç¨‹</span>

coro.send(<span class="hljs-number">10</span>)
coro.send(<span class="hljs-number">20</span>)
coro.send(<span class="hljs-number">30</span>)

<span class="hljs-keyword">try</span>:
    coro.send(<span class="hljs-literal">None</span>)  <span class="hljs-comment"># ç»“æŸåç¨‹</span>
<span class="hljs-keyword">except</span> StopIteration <span class="hljs-keyword">as</span> e:
    total, count = e.value
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åç¨‹ç»“æŸï¼Œæ€»å’Œ: <span class="hljs-subst">{total}</span>, æ¬¡æ•°: <span class="hljs-subst">{count}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">50</span>)
</code></pre>
<h3 data-id="heading-8">2.3 ç”Ÿæˆå™¨çš„send()å’Œthrow()æ–¹æ³•</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"=== ç”Ÿæˆå™¨çš„é«˜çº§æ–¹æ³• ==="</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">advanced_generator</span>():
    <span class="hljs-string">"""é«˜çº§ç”Ÿæˆå™¨ç¤ºä¾‹"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç”Ÿæˆå™¨å¯åŠ¨"</span>)
    <span class="hljs-keyword">try</span>:
        received = <span class="hljs-keyword">yield</span> <span class="hljs-string">"ç¬¬ä¸€æ­¥å®Œæˆ"</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ”¶åˆ°: <span class="hljs-subst">{received}</span>"</span>)
        
        received = <span class="hljs-keyword">yield</span> <span class="hljs-string">"ç¬¬äºŒæ­¥å®Œæˆ"</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ”¶åˆ°: <span class="hljs-subst">{received}</span>"</span>)
        
        <span class="hljs-keyword">yield</span> <span class="hljs-string">"ç¬¬ä¸‰æ­¥å®Œæˆ"</span>
        
    <span class="hljs-keyword">except</span> ValueError <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ•è·åˆ°å¼‚å¸¸: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">yield</span> <span class="hljs-string">"ä»å¼‚å¸¸ä¸­æ¢å¤"</span>
    <span class="hljs-keyword">finally</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç”Ÿæˆå™¨æ¸…ç†"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"1. æ­£å¸¸ä½¿ç”¨send()æ–¹æ³•:"</span>)
gen = advanced_generator()

<span class="hljs-comment"># å¯åŠ¨ç”Ÿæˆå™¨</span>
result = <span class="hljs-built_in">next</span>(gen)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç”Ÿæˆå™¨è¿”å›: <span class="hljs-subst">{result}</span>"</span>)

<span class="hljs-comment"># å‘é€æ•°æ®ç»™ç”Ÿæˆå™¨</span>
result = gen.send(<span class="hljs-string">"ç¬¬ä¸€æ¡æ¶ˆæ¯"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç”Ÿæˆå™¨è¿”å›: <span class="hljs-subst">{result}</span>"</span>)

result = gen.send(<span class="hljs-string">"ç¬¬äºŒæ¡æ¶ˆæ¯"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç”Ÿæˆå™¨è¿”å›: <span class="hljs-subst">{result}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n2. ä½¿ç”¨throw()æ–¹æ³•å‘ç”Ÿæˆå™¨æŠ›å‡ºå¼‚å¸¸:"</span>)
gen2 = advanced_generator()
<span class="hljs-built_in">next</span>(gen2)  <span class="hljs-comment"># å¯åŠ¨</span>

<span class="hljs-comment"># å‘ç”Ÿæˆå™¨æŠ›å‡ºå¼‚å¸¸</span>
result = gen2.throw(ValueError(<span class="hljs-string">"æµ‹è¯•å¼‚å¸¸"</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç”Ÿæˆå™¨è¿”å›: <span class="hljs-subst">{result}</span>"</span>)

<span class="hljs-keyword">try</span>:
    <span class="hljs-built_in">next</span>(gen2)
<span class="hljs-keyword">except</span> StopIteration:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç”Ÿæˆå™¨æ­£å¸¸ç»“æŸ"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n3. ä½¿ç”¨close()æ–¹æ³•å…³é—­ç”Ÿæˆå™¨:"</span>)
gen3 = advanced_generator()
<span class="hljs-built_in">next</span>(gen3)  <span class="hljs-comment"># å¯åŠ¨</span>

gen3.close()  <span class="hljs-comment"># å…³é—­ç”Ÿæˆå™¨</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç”Ÿæˆå™¨å·²å…³é—­"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">50</span>)
</code></pre>
<h2 data-id="heading-9">ä¸‰ã€yield fromï¼šç”Ÿæˆå™¨çš„é­”æ³•</h2>
<h3 data-id="heading-10">3.1 yield from åŸºç¡€</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"=== yield from è¯­æ³• ==="</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">sub_generator</span>():
    <span class="hljs-string">"""å­ç”Ÿæˆå™¨"""</span>
    <span class="hljs-keyword">yield</span> <span class="hljs-string">"å­ç”Ÿæˆå™¨: A"</span>
    <span class="hljs-keyword">yield</span> <span class="hljs-string">"å­ç”Ÿæˆå™¨: B"</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"å­ç”Ÿæˆå™¨å®Œæˆ"</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main_generator_old</span>():
    <span class="hljs-string">"""è€å¼æ–¹æ³• - æ‰‹åŠ¨å§”æ‰˜"""</span>
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> sub_generator():
        <span class="hljs-keyword">yield</span> item
    <span class="hljs-keyword">yield</span> <span class="hljs-string">"ä¸»ç”Ÿæˆå™¨ç»§ç»­"</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main_generator_new</span>():
    <span class="hljs-string">"""æ–°æ–¹æ³• - ä½¿ç”¨yield from"""</span>
    result = <span class="hljs-keyword">yield</span> <span class="hljs-keyword">from</span> sub_generator()
    <span class="hljs-keyword">yield</span> <span class="hljs-string">f"ä¸»ç”Ÿæˆå™¨æ”¶åˆ°: <span class="hljs-subst">{result}</span>"</span>
    <span class="hljs-keyword">yield</span> <span class="hljs-string">"ä¸»ç”Ÿæˆå™¨å®Œæˆ"</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"è€å¼å§”æ‰˜æ–¹æ³•:"</span>)
<span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> main_generator_old():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  <span class="hljs-subst">{item}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nä½¿ç”¨yield from:"</span>)
<span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> main_generator_new():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  <span class="hljs-subst">{item}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">50</span>)
</code></pre>
<h3 data-id="heading-11">3.2 yield from çš„å®ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"=== yield from å®ç”¨ç¤ºä¾‹ ==="</span>)

<span class="hljs-comment"># ç¤ºä¾‹1ï¼šæ‰å¹³åŒ–åµŒå¥—ç»“æ„</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">flatten</span>(<span class="hljs-params">nested</span>):
    <span class="hljs-string">"""æ‰å¹³åŒ–åµŒå¥—çš„åˆ—è¡¨"""</span>
    <span class="hljs-keyword">for</span> sublist <span class="hljs-keyword">in</span> nested:
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(sublist, <span class="hljs-built_in">list</span>):
            <span class="hljs-keyword">yield</span> <span class="hljs-keyword">from</span> flatten(sublist)  <span class="hljs-comment"># é€’å½’å§”æ‰˜</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">yield</span> sublist

<span class="hljs-comment"># ç¤ºä¾‹2ï¼šåˆå¹¶å¤šä¸ªç”Ÿæˆå™¨</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">chain_generators</span>(<span class="hljs-params">*generators</span>):
    <span class="hljs-string">"""è¿æ¥å¤šä¸ªç”Ÿæˆå™¨"""</span>
    <span class="hljs-keyword">for</span> gen <span class="hljs-keyword">in</span> generators:
        <span class="hljs-keyword">yield</span> <span class="hljs-keyword">from</span> gen

<span class="hljs-comment"># ç¤ºä¾‹3ï¼šæ ‘å½¢ç»“æ„éå†</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TreeNode</span>:
    <span class="hljs-string">"""æ ‘èŠ‚ç‚¹"""</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, value, children=<span class="hljs-literal">None</span></span>):
        self.value = value
        self.children = children <span class="hljs-keyword">or</span> []
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__iter__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""ä½¿ç”¨yield froméå†å­æ ‘"""</span>
        <span class="hljs-keyword">yield</span> self.value
        <span class="hljs-keyword">for</span> child <span class="hljs-keyword">in</span> self.children:
            <span class="hljs-keyword">yield</span> <span class="hljs-keyword">from</span> child

<span class="hljs-built_in">print</span>(<span class="hljs-string">"1. æ‰å¹³åŒ–åµŒå¥—åˆ—è¡¨:"</span>)
nested_list = [<span class="hljs-number">1</span>, [<span class="hljs-number">2</span>, [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>], <span class="hljs-number">5</span>], <span class="hljs-number">6</span>, [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>]]
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"åŸå§‹åˆ—è¡¨: <span class="hljs-subst">{nested_list}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰å¹³åŒ–å: <span class="hljs-subst">{<span class="hljs-built_in">list</span>(flatten(nested_list))}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n2. åˆå¹¶å¤šä¸ªç”Ÿæˆå™¨:"</span>)
gen1 = (x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>))
gen2 = (x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-string">"abc"</span>)
gen3 = (x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> [<span class="hljs-literal">True</span>, <span class="hljs-literal">False</span>])

chained = chain_generators(gen1, gen2, gen3)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆå¹¶ç»“æœ: <span class="hljs-subst">{<span class="hljs-built_in">list</span>(chained)}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n3. æ ‘å½¢ç»“æ„éå†:"</span>)
<span class="hljs-comment"># æ„å»ºä¸€æ£µæ ‘</span>
tree = TreeNode(<span class="hljs-string">"A"</span>, [
    TreeNode(<span class="hljs-string">"B"</span>, [
        TreeNode(<span class="hljs-string">"D"</span>),
        TreeNode(<span class="hljs-string">"E"</span>)
    ]),
    TreeNode(<span class="hljs-string">"C"</span>, [
        TreeNode(<span class="hljs-string">"F"</span>)
    ])
])

<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ ‘èŠ‚ç‚¹éå†:"</span>)
<span class="hljs-keyword">for</span> node <span class="hljs-keyword">in</span> tree:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  èŠ‚ç‚¹: <span class="hljs-subst">{node}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">50</span>)
</code></pre>
<h2 data-id="heading-12">å››ã€æ€§èƒ½å¯¹æ¯”ï¼šè¿­ä»£å™¨ vs åˆ—è¡¨</h2>
<h3 data-id="heading-13">4.1 å†…å­˜ä½¿ç”¨å¯¹æ¯”</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"=== æ€§èƒ½å¯¹æ¯”ï¼šè¿­ä»£å™¨ vs åˆ—è¡¨ ==="</span>)

<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">import</span> time

<span class="hljs-keyword">def</span> <span class="hljs-title function_">test_memory_usage</span>():
    <span class="hljs-string">"""æµ‹è¯•å†…å­˜ä½¿ç”¨"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"1. å†…å­˜ä½¿ç”¨å¯¹æ¯”:"</span>)
    
    <span class="hljs-comment"># åˆ—è¡¨æ¨å¯¼å¼ - å ç”¨å¤§é‡å†…å­˜</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"åˆ—è¡¨æ¨å¯¼å¼:"</span>)
    start_mem = sys.getsizeof([])
    big_list = [x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000000</span>)]
    end_mem = sys.getsizeof(big_list)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  å†…å­˜å ç”¨: <span class="hljs-subst">{(end_mem - start_mem) / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>:<span class="hljs-number">.2</span>f}</span> MB"</span>)
    
    <span class="hljs-comment"># ç”Ÿæˆå™¨è¡¨è¾¾å¼ - å‡ ä¹ä¸å å†…å­˜</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç”Ÿæˆå™¨è¡¨è¾¾å¼:"</span>)
    start_mem = sys.getsizeof([])
    big_gen = (x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000000</span>))
    end_mem = sys.getsizeof(big_gen)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  å†…å­˜å ç”¨: <span class="hljs-subst">{(end_mem - start_mem) / <span class="hljs-number">1024</span>:<span class="hljs-number">.2</span>f}</span> KB"</span>)
    
    <span class="hljs-keyword">del</span> big_list, big_gen

<span class="hljs-keyword">def</span> <span class="hljs-title function_">test_execution_time</span>():
    <span class="hljs-string">"""æµ‹è¯•æ‰§è¡Œæ—¶é—´"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n2. æ‰§è¡Œæ—¶é—´å¯¹æ¯”:"</span>)
    
    <span class="hljs-comment"># åˆ›å»ºå¤§å‹æ•°æ®é›†</span>
    data_size = <span class="hljs-number">1000000</span>
    
    <span class="hljs-comment"># æµ‹è¯•åˆ—è¡¨</span>
    start_time = time.time()
    total = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(data_size):
        total += i
    list_time = time.time() - start_time
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ—è¡¨å¾ªç¯æ—¶é—´: <span class="hljs-subst">{list_time:<span class="hljs-number">.4</span>f}</span> ç§’"</span>)
    
    <span class="hljs-comment"># æµ‹è¯•ç”Ÿæˆå™¨</span>
    start_time = time.time()
    total = <span class="hljs-number">0</span>
    gen = (x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(data_size))
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> gen:
        total += i
    gen_time = time.time() - start_time
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç”Ÿæˆå™¨æ—¶é—´: <span class="hljs-subst">{gen_time:<span class="hljs-number">.4</span>f}</span> ç§’"</span>)
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ—¶é—´å·®å¼‚: <span class="hljs-subst">{<span class="hljs-built_in">abs</span>(list_time - gen_time):<span class="hljs-number">.4</span>f}</span> ç§’"</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">test_practical_scenario</span>():
    <span class="hljs-string">"""æµ‹è¯•å®é™…åœºæ™¯"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n3. å®é™…åœºæ™¯ï¼šæŸ¥æ‰¾ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„å…ƒç´ "</span>)
    
    <span class="hljs-comment"># æ¨¡æ‹Ÿå¤§å‹æ•°æ®é›†</span>
    data = <span class="hljs-built_in">range</span>(<span class="hljs-number">10000000</span>)
    target = <span class="hljs-number">5000000</span>
    
    <span class="hljs-comment"># ä½¿ç”¨åˆ—è¡¨ï¼ˆéœ€è¦å…ˆç”Ÿæˆæ‰€æœ‰å…ƒç´ ï¼‰</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"åˆ—è¡¨æ–¹æ³•ï¼ˆéœ€è¦å…ˆç”Ÿæˆæ‰€æœ‰å…ƒç´ ï¼‰:"</span>)
    start_time = time.time()
    <span class="hljs-keyword">try</span>:
        result = [x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> data <span class="hljs-keyword">if</span> x &gt; target][<span class="hljs-number">0</span>]
    <span class="hljs-keyword">except</span> IndexError:
        result = <span class="hljs-literal">None</span>
    list_time = time.time() - start_time
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  ç»“æœ: <span class="hljs-subst">{result}</span>, æ—¶é—´: <span class="hljs-subst">{list_time:<span class="hljs-number">.4</span>f}</span> ç§’"</span>)
    
    <span class="hljs-comment"># ä½¿ç”¨ç”Ÿæˆå™¨ï¼ˆæ‰¾åˆ°å°±åœæ­¢ï¼‰</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç”Ÿæˆå™¨æ–¹æ³•ï¼ˆæ‰¾åˆ°å°±åœæ­¢ï¼‰:"</span>)
    start_time = time.time()
    gen = (x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> data <span class="hljs-keyword">if</span> x &gt; target)
    result = <span class="hljs-built_in">next</span>(gen, <span class="hljs-literal">None</span>)
    gen_time = time.time() - start_time
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  ç»“æœ: <span class="hljs-subst">{result}</span>, æ—¶é—´: <span class="hljs-subst">{gen_time:<span class="hljs-number">.4</span>f}</span> ç§’"</span>)
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  æ—¶é—´èŠ‚çœ: <span class="hljs-subst">{(list_time - gen_time):<span class="hljs-number">.4</span>f}</span> ç§’"</span>)

<span class="hljs-comment"># è¿è¡Œæµ‹è¯•</span>
test_memory_usage()
test_execution_time()
test_practical_scenario()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">50</span>)
</code></pre>
<h2 data-id="heading-14">äº”ã€å®æˆ˜é¡¹ç›®ï¼šæ„å»ºæ•°æ®æµå¤„ç†æ¡†æ¶</h2>
<h3 data-id="heading-15">5.1 å®Œæ•´çš„æ•°æ®å¤„ç†æ¡†æ¶</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"=== å®æˆ˜é¡¹ç›®ï¼šæ•°æ®æµå¤„ç†æ¡†æ¶ ==="</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">DataStream</span>:
    <span class="hljs-string">"""æ•°æ®æµåŸºç±»"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__iter__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">raise</span> NotImplementedError(<span class="hljs-string">"å­ç±»å¿…é¡»å®ç°"</span>)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">map</span>(<span class="hljs-params">self, func</span>):
        <span class="hljs-string">"""åº”ç”¨è½¬æ¢å‡½æ•°"""</span>
        <span class="hljs-keyword">return</span> MapStream(self, func)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">filter</span>(<span class="hljs-params">self, predicate</span>):
        <span class="hljs-string">"""è¿‡æ»¤æ•°æ®"""</span>
        <span class="hljs-keyword">return</span> FilterStream(self, predicate)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">take</span>(<span class="hljs-params">self, n</span>):
        <span class="hljs-string">"""å–å‰nä¸ªå…ƒç´ """</span>
        <span class="hljs-keyword">return</span> TakeStream(self, n)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">skip</span>(<span class="hljs-params">self, n</span>):
        <span class="hljs-string">"""è·³è¿‡å‰nä¸ªå…ƒç´ """</span>
        <span class="hljs-keyword">return</span> SkipStream(self, n)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">collect</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æ”¶é›†æ‰€æœ‰æ•°æ®åˆ°åˆ—è¡¨"""</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">list</span>(self)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MapStream</span>(<span class="hljs-title class_ inherited__">DataStream</span>):
    <span class="hljs-string">"""æ˜ å°„æµ"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, source, func</span>):
        self.source = source
        self.func = func
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__iter__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> self.source:
            <span class="hljs-keyword">yield</span> self.func(item)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">FilterStream</span>(<span class="hljs-title class_ inherited__">DataStream</span>):
    <span class="hljs-string">"""è¿‡æ»¤æµ"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, source, predicate</span>):
        self.source = source
        self.predicate = predicate
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__iter__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> self.source:
            <span class="hljs-keyword">if</span> self.predicate(item):
                <span class="hljs-keyword">yield</span> item

<span class="hljs-keyword">class</span> <span class="hljs-title class_">TakeStream</span>(<span class="hljs-title class_ inherited__">DataStream</span>):
    <span class="hljs-string">"""å–å‰nä¸ªæµ"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, source, n</span>):
        self.source = source
        self.n = n
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__iter__</span>(<span class="hljs-params">self</span>):
        count = <span class="hljs-number">0</span>
        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> self.source:
            <span class="hljs-keyword">if</span> count &gt;= self.n:
                <span class="hljs-keyword">break</span>
            <span class="hljs-keyword">yield</span> item
            count += <span class="hljs-number">1</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SkipStream</span>(<span class="hljs-title class_ inherited__">DataStream</span>):
    <span class="hljs-string">"""è·³è¿‡å‰nä¸ªæµ"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, source, n</span>):
        self.source = source
        self.n = n
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__iter__</span>(<span class="hljs-params">self</span>):
        count = <span class="hljs-number">0</span>
        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> self.source:
            <span class="hljs-keyword">if</span> count &gt;= self.n:
                <span class="hljs-keyword">yield</span> item
            count += <span class="hljs-number">1</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">RangeStream</span>(<span class="hljs-title class_ inherited__">DataStream</span>):
    <span class="hljs-string">"""èŒƒå›´æµ"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, start, end=<span class="hljs-literal">None</span>, step=<span class="hljs-number">1</span></span>):
        <span class="hljs-keyword">if</span> end <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
            self.start = <span class="hljs-number">0</span>
            self.end = start
        <span class="hljs-keyword">else</span>:
            self.start = start
            self.end = end
        self.step = step
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__iter__</span>(<span class="hljs-params">self</span>):
        current = self.start
        <span class="hljs-keyword">while</span> current &lt; self.end:
            <span class="hljs-keyword">yield</span> current
            current += self.step

<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ„å»ºæ•°æ®æµå¤„ç†ç®¡é“:"</span>)

<span class="hljs-comment"># åˆ›å»ºæ•°æ®æµ</span>
stream = RangeStream(<span class="hljs-number">1</span>, <span class="hljs-number">101</span>)  <span class="hljs-comment"># 1-100</span>

<span class="hljs-comment"># æ„å»ºå¤„ç†ç®¡é“</span>
result = (stream
    .<span class="hljs-built_in">filter</span>(<span class="hljs-keyword">lambda</span> x: x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>)      <span class="hljs-comment"># åªä¿ç•™å¶æ•°</span>
    .<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: x * <span class="hljs-number">3</span>)              <span class="hljs-comment"># ä¹˜ä»¥3</span>
    .<span class="hljs-built_in">filter</span>(<span class="hljs-keyword">lambda</span> x: x &gt; <span class="hljs-number">100</span>)         <span class="hljs-comment"># åªä¿ç•™å¤§äº100çš„</span>
    .take(<span class="hljs-number">10</span>)                          <span class="hljs-comment"># å–å‰10ä¸ª</span>
    .collect())                        <span class="hljs-comment"># æ”¶é›†ç»“æœ</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¤„ç†ç»“æœ: <span class="hljs-subst">{result}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\næµå¼å¤„ç†æ¼”ç¤º:"</span>)
<span class="hljs-comment"># æ˜¾ç¤ºæ¯ä¸€æ­¥çš„å¤„ç†è¿‡ç¨‹</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"åŸå§‹æ•°æ®: 1-100"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ­¥éª¤1: è¿‡æ»¤å¶æ•°"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ­¥éª¤2: ä¹˜ä»¥3"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ­¥éª¤3: è¿‡æ»¤ &gt;100 çš„æ•°"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ­¥éª¤4: å–å‰10ä¸ª"</span>)

<span class="hljs-comment"># åˆ†æ­¥æ¼”ç¤º</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nåˆ†æ­¥å¤„ç†è¿‡ç¨‹:"</span>)
stream = RangeStream(<span class="hljs-number">1</span>, <span class="hljs-number">21</span>)  <span class="hljs-comment"># 1-20</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"åŸå§‹æ•°æ®:"</span>, <span class="hljs-built_in">list</span>(stream))

stream = RangeStream(<span class="hljs-number">1</span>, <span class="hljs-number">21</span>)
even_stream = stream.<span class="hljs-built_in">filter</span>(<span class="hljs-keyword">lambda</span> x: x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"è¿‡æ»¤å¶æ•°:"</span>, <span class="hljs-built_in">list</span>(even_stream))

stream = RangeStream(<span class="hljs-number">1</span>, <span class="hljs-number">21</span>)
processed = stream.<span class="hljs-built_in">filter</span>(<span class="hljs-keyword">lambda</span> x: x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>).<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: x * <span class="hljs-number">3</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¹˜ä»¥3:"</span>, <span class="hljs-built_in">list</span>(processed))

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">50</span>)
</code></pre>
<h2 data-id="heading-16">æ€»ç»“ï¼šä½•æ—¶ä½¿ç”¨è¿­ä»£å™¨å’Œç”Ÿæˆå™¨ï¼Ÿ</h2>
<h3 data-id="heading-17">é€‚åˆä½¿ç”¨çš„æƒ…å†µï¼š</h3>
<ol>
<li>âœ…Â <strong>å¤„ç†å¤§å‹æ•°æ®é›†</strong>ï¼ˆé¿å…å†…å­˜æº¢å‡ºï¼‰</li>
<li>âœ…Â <strong>æ— é™åºåˆ—</strong>ï¼ˆå¦‚è®¡æ•°å™¨ã€æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼‰</li>
<li>âœ…Â <strong>ç®¡é“å¤„ç†</strong>ï¼ˆå¤šä¸ªå¤„ç†æ­¥éª¤ä¸²è”ï¼‰</li>
<li>âœ…Â <strong>æ‡’åŠ è½½</strong>ï¼ˆéœ€è¦æ—¶æ‰è®¡ç®—ï¼‰</li>
</ol>
<h3 data-id="heading-18">ä¸é€‚åˆä½¿ç”¨çš„æƒ…å†µï¼š</h3>
<ol>
<li>âŒÂ <strong>éœ€è¦éšæœºè®¿é—®</strong>ï¼ˆè¿­ä»£å™¨åªèƒ½å•å‘å‰è¿›ï¼‰</li>
<li>âŒÂ <strong>éœ€è¦é‡ç”¨æ•°æ®</strong>ï¼ˆè¿­ä»£å™¨æ¶ˆè€—åå°±ä¸èƒ½å†ç”¨äº†ï¼‰</li>
<li>âŒÂ <strong>å°æ•°æ®é›†</strong>ï¼ˆåˆ—è¡¨æ¨å¯¼å¼æ›´ç®€å•ï¼‰</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pythonå¼‚æ­¥ç¼–ç¨‹å®Œå…¨æŒ‡å—ï¼šä»asyncioåˆ°é«˜æ€§èƒ½åº”ç”¨]]></title>    <link>https://juejin.cn/post/7587713001715597366</link>    <guid>https://juejin.cn/post/7587713001715597366</guid>    <pubDate>2025-12-26T05:14:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587713001715597366" data-draft-id="7587825267877675049" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pythonå¼‚æ­¥ç¼–ç¨‹å®Œå…¨æŒ‡å—ï¼šä»asyncioåˆ°é«˜æ€§èƒ½åº”ç”¨"/> <meta itemprop="keywords" content="Python,PyCharm"/> <meta itemprop="datePublished" content="2025-12-26T05:14:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åƒè¥¿çº¢æŸ¿é•¿å¤§çš„ç•ªèŒ„"/> <meta itemprop="url" content="https://juejin.cn/user/3097787706900985"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pythonå¼‚æ­¥ç¼–ç¨‹å®Œå…¨æŒ‡å—ï¼šä»asyncioåˆ°é«˜æ€§èƒ½åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3097787706900985/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åƒè¥¿çº¢æŸ¿é•¿å¤§çš„ç•ªèŒ„
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T05:14:35.000Z" title="Fri Dec 26 2025 05:14:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-light">.hljs-comment,.hljs-quote{color:#696969}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d91e18}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#aa5d00}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:green}.hljs-section,.hljs-title{color:#007faa}.hljs-keyword,.hljs-selector-tag{color:#7928a1}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fefefe;color:#545454}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å¼•è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥ç¼–ç¨‹ï¼Ÿ</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ è¦ä»10ä¸ªç½‘ç«™ä¸‹è½½æ•°æ®ã€‚å¦‚æœç”¨ä¼ ç»Ÿæ–¹å¼ï¼Œä»£ç ä¼šç­‰ç¬¬ä¸€ä¸ªç½‘ç«™å“åº”åå†è¯·æ±‚ç¬¬äºŒä¸ªï¼Œè¿™å¤ªæ…¢äº†ï¼å¼‚æ­¥ç¼–ç¨‹è®©ä½ å¯ä»¥åŒæ—¶å‘èµ·æ‰€æœ‰è¯·æ±‚ï¼Œå“ªä¸ªå…ˆè¿”å›å°±å¤„ç†å“ªä¸ªã€‚</p>
<p>python</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åŒæ­¥ vs å¼‚æ­¥çš„ç›´è§‚å¯¹æ¯”</span>
<span class="hljs-keyword">import</span> time

<span class="hljs-keyword">def</span> <span class="hljs-title function_">sync_download</span>():
    <span class="hljs-string">"""åŒæ­¥ä¸‹è½½ - ä¸€ä¸ªä¸€ä¸ªæ¥"""</span>
    websites = [<span class="hljs-string">"site1"</span>, <span class="hljs-string">"site2"</span>, <span class="hljs-string">"site3"</span>]
    <span class="hljs-keyword">for</span> site <span class="hljs-keyword">in</span> websites:
        time.sleep(<span class="hljs-number">1</span>)  <span class="hljs-comment"># æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¸‹è½½å®Œæˆ: <span class="hljs-subst">{site}</span>"</span>)

<span class="hljs-comment"># åŒæ­¥æ–¹å¼éœ€è¦3ç§’</span>
<span class="hljs-comment"># å¼‚æ­¥æ–¹å¼å¯èƒ½åªéœ€è¦1ç§’å¤šä¸€ç‚¹</span>
</code></pre>
<h2 data-id="heading-1">ä¸€ã€å¼‚æ­¥åŸºç¡€ï¼šasync/await</h2>
<h3 data-id="heading-2">1.1 ç¬¬ä¸€ä¸ªå¼‚æ­¥ç¨‹åº</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">import</span> time

<span class="hljs-built_in">print</span>(<span class="hljs-string">"=== å¼‚æ­¥ç¼–ç¨‹åŸºç¡€ ==="</span>)

<span class="hljs-comment"># å®šä¹‰ä¸€ä¸ªå¼‚æ­¥å‡½æ•°</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">say_hello</span>(<span class="hljs-params">name, delay</span>):
    <span class="hljs-string">"""å¼‚æ­¥æ‰“æ‹›å‘¼å‡½æ•°"""</span>
    <span class="hljs-keyword">await</span> asyncio.sleep(delay)  <span class="hljs-comment"># å¼‚æ­¥ç­‰å¾…</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Hello, <span class="hljs-subst">{name}</span>! (ç­‰å¾…äº†<span class="hljs-subst">{delay}</span>ç§’)"</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"Hello <span class="hljs-subst">{name}</span>"</span>

<span class="hljs-comment"># è¿è¡Œå¼‚æ­¥å‡½æ•°</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼€å§‹æ—¶é—´:"</span>, time.strftime(<span class="hljs-string">"%H:%M:%S"</span>))
    
    <span class="hljs-comment"># è¿è¡Œä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡</span>
    result = <span class="hljs-keyword">await</span> say_hello(<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-number">2</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¿”å›å€¼: <span class="hljs-subst">{result}</span>"</span>)
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç»“æŸæ—¶é—´:"</span>, time.strftime(<span class="hljs-string">"%H:%M:%S"</span>))

<span class="hljs-comment"># Python 3.7+ çš„è¿è¡Œæ–¹å¼</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"è¿è¡Œå•ä¸ªå¼‚æ­¥ä»»åŠ¡:"</span>)
asyncio.run(main())

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">50</span>)
</code></pre>
<h3 data-id="heading-3">1.2 å¹¶å‘æ‰§è¡Œå¤šä¸ªä»»åŠ¡</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">download_file</span>(<span class="hljs-params">filename, download_time</span>):
    <span class="hljs-string">"""æ¨¡æ‹Ÿä¸‹è½½æ–‡ä»¶"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¼€å§‹ä¸‹è½½: <span class="hljs-subst">{filename}</span>"</span>)
    <span class="hljs-keyword">await</span> asyncio.sleep(download_time)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¸‹è½½å®Œæˆ: <span class="hljs-subst">{filename}</span> (è€—æ—¶<span class="hljs-subst">{download_time}</span>ç§’)"</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{filename}</span>_content"</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">concurrent_downloads</span>():
    <span class="hljs-string">"""å¹¶å‘ä¸‹è½½å¤šä¸ªæ–‡ä»¶"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼€å§‹å¹¶å‘ä¸‹è½½:"</span>)
    start_time = time.time()
    
    <span class="hljs-comment"># åˆ›å»ºå¤šä¸ªä»»åŠ¡</span>
    task1 = asyncio.create_task(download_file(<span class="hljs-string">"file1.txt"</span>, <span class="hljs-number">3</span>))
    task2 = asyncio.create_task(download_file(<span class="hljs-string">"file2.txt"</span>, <span class="hljs-number">2</span>))
    task3 = asyncio.create_task(download_file(<span class="hljs-string">"file3.txt"</span>, <span class="hljs-number">1</span>))
    
    <span class="hljs-comment"># ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span>
    results = <span class="hljs-keyword">await</span> asyncio.gather(task1, task2, task3)
    
    end_time = time.time()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰€æœ‰æ–‡ä»¶ä¸‹è½½å®Œæˆ! æ€»è€—æ—¶: <span class="hljs-subst">{end_time - start_time:<span class="hljs-number">.2</span>f}</span>ç§’"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¸‹è½½ç»“æœ: <span class="hljs-subst">{results}</span>"</span>)
    
    <span class="hljs-keyword">return</span> results

<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¹¶å‘æ‰§è¡Œå¤šä¸ªä»»åŠ¡:"</span>)
asyncio.run(concurrent_downloads())

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">50</span>)
</code></pre>
<h2 data-id="heading-4">äºŒã€å¼‚æ­¥å®æˆ˜ï¼šç½‘ç»œè¯·æ±‚</h2>
<h3 data-id="heading-5">2.1 å¼‚æ­¥HTTPè¯·æ±‚</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> aiohttp
<span class="hljs-keyword">import</span> asyncio

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch_url</span>(<span class="hljs-params">session, url, timeout=<span class="hljs-number">5</span></span>):
    <span class="hljs-string">"""å¼‚æ­¥è·å–URLå†…å®¹"""</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> session.get(url, timeout=timeout) <span class="hljs-keyword">as</span> response:
            <span class="hljs-keyword">if</span> response.status == <span class="hljs-number">200</span>:
                content = <span class="hljs-keyword">await</span> response.text()
                <span class="hljs-keyword">return</span> {
                    <span class="hljs-string">'url'</span>: url,
                    <span class="hljs-string">'status'</span>: response.status,
                    <span class="hljs-string">'content_length'</span>: <span class="hljs-built_in">len</span>(content),
                    <span class="hljs-string">'success'</span>: <span class="hljs-literal">True</span>
                }
            <span class="hljs-keyword">else</span>:
                <span class="hljs-keyword">return</span> {
                    <span class="hljs-string">'url'</span>: url,
                    <span class="hljs-string">'status'</span>: response.status,
                    <span class="hljs-string">'success'</span>: <span class="hljs-literal">False</span>
                }
    <span class="hljs-keyword">except</span> asyncio.TimeoutError:
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">'url'</span>: url,
            <span class="hljs-string">'status'</span>: <span class="hljs-string">'timeout'</span>,
            <span class="hljs-string">'success'</span>: <span class="hljs-literal">False</span>
        }
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">'url'</span>: url,
            <span class="hljs-string">'status'</span>: <span class="hljs-string">'error'</span>,
            <span class="hljs-string">'error'</span>: <span class="hljs-built_in">str</span>(e),
            <span class="hljs-string">'success'</span>: <span class="hljs-literal">False</span>
        }

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch_multiple_urls</span>(<span class="hljs-params">urls</span>):
    <span class="hljs-string">"""å¹¶å‘è·å–å¤šä¸ªURL"""</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> aiohttp.ClientSession() <span class="hljs-keyword">as</span> session:
        tasks = [fetch_url(session, url) <span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> urls]
        results = <span class="hljs-keyword">await</span> asyncio.gather(*tasks)
        <span class="hljs-keyword">return</span> results

<span class="hljs-comment"># æµ‹è¯•å‡½æ•°</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_http_requests</span>():
    <span class="hljs-string">"""æµ‹è¯•HTTPè¯·æ±‚"""</span>
    <span class="hljs-comment"># ä¸€äº›æµ‹è¯•URLï¼ˆä½¿ç”¨å…¬å¼€çš„æµ‹è¯•APIï¼‰</span>
    test_urls = [
        <span class="hljs-string">"https://httpbin.org/delay/1"</span>,  <span class="hljs-comment"># å»¶è¿Ÿ1ç§’</span>
        <span class="hljs-string">"https://httpbin.org/delay/2"</span>,  <span class="hljs-comment"># å»¶è¿Ÿ2ç§’</span>
        <span class="hljs-string">"https://httpbin.org/status/200"</span>,
        <span class="hljs-string">"https://httpbin.org/status/404"</span>,
        <span class="hljs-string">"https://httpbin.org/ip"</span>,
        <span class="hljs-string">"https://httpbin.org/user-agent"</span>
    ]
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼€å§‹å¹¶å‘HTTPè¯·æ±‚..."</span>)
    start_time = time.time()
    
    results = <span class="hljs-keyword">await</span> fetch_multiple_urls(test_urls)
    
    end_time = time.time()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¯·æ±‚å®Œæˆ! æ€»è€—æ—¶: <span class="hljs-subst">{end_time - start_time:<span class="hljs-number">.2</span>f}</span>ç§’"</span>)
    
    <span class="hljs-comment"># æ˜¾ç¤ºç»“æœ</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nè¯·æ±‚ç»“æœ:"</span>)
    <span class="hljs-keyword">for</span> i, result <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(results, <span class="hljs-number">1</span>):
        <span class="hljs-keyword">if</span> result[<span class="hljs-string">'success'</span>]:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{i}</span>. <span class="hljs-subst">{result[<span class="hljs-string">'url'</span>]}</span> - æˆåŠŸ, çŠ¶æ€ç : <span class="hljs-subst">{result[<span class="hljs-string">'status'</span>]}</span>, "</span>
                  <span class="hljs-string">f"å†…å®¹é•¿åº¦: <span class="hljs-subst">{result[<span class="hljs-string">'content_length'</span>]}</span>"</span>)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{i}</span>. <span class="hljs-subst">{result[<span class="hljs-string">'url'</span>]}</span> - å¤±è´¥, çŠ¶æ€: <span class="hljs-subst">{result[<span class="hljs-string">'status'</span>]}</span>"</span>)
    
    <span class="hljs-keyword">return</span> results

<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼‚æ­¥HTTPè¯·æ±‚æ¼”ç¤º:"</span>)
<span class="hljs-comment"># asyncio.run(test_http_requests())</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"ï¼ˆæ³¨æ„ï¼šç”±äºç½‘ç»œè¯·æ±‚éœ€è¦çœŸå®URLï¼Œè¿™é‡Œåªå±•ç¤ºä»£ç ç»“æ„ï¼‰"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">50</span>)
</code></pre>
<h3 data-id="heading-6">2.2 é™åˆ¶å¹¶å‘æ•°</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">RateLimiter</span>:
    <span class="hljs-string">"""é€Ÿç‡é™åˆ¶å™¨"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, max_concurrent</span>):
        self.semaphore = asyncio.Semaphore(max_concurrent)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">limited_fetch</span>(<span class="hljs-params">self, session, url</span>):
        <span class="hljs-string">"""å¸¦é™åˆ¶çš„è·å–"""</span>
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> self.semaphore:
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> fetch_url(session, url)

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">rate_limited_requests</span>(<span class="hljs-params">urls, max_concurrent=<span class="hljs-number">3</span></span>):
    <span class="hljs-string">"""å¸¦é€Ÿç‡é™åˆ¶çš„è¯·æ±‚"""</span>
    rate_limiter = RateLimiter(max_concurrent)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> aiohttp.ClientSession() <span class="hljs-keyword">as</span> session:
        tasks = []
        <span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> urls:
            task = asyncio.create_task(
                rate_limiter.limited_fetch(session, url)
            )
            tasks.append(task)
        
        <span class="hljs-comment"># æ˜¾ç¤ºè¿›åº¦</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¼€å§‹å¤„ç† <span class="hljs-subst">{<span class="hljs-built_in">len</span>(urls)}</span> ä¸ªURLï¼Œå¹¶å‘æ•°: <span class="hljs-subst">{max_concurrent}</span>"</span>)
        
        results = []
        <span class="hljs-keyword">for</span> i, task <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(asyncio.as_completed(tasks), <span class="hljs-number">1</span>):
            result = <span class="hljs-keyword">await</span> task
            results.append(result)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¿›åº¦: <span class="hljs-subst">{i}</span>/<span class="hljs-subst">{<span class="hljs-built_in">len</span>(urls)}</span> - <span class="hljs-subst">{result[<span class="hljs-string">'url'</span>]}</span>"</span>)
        
        <span class="hljs-keyword">return</span> results

<span class="hljs-built_in">print</span>(<span class="hljs-string">"é€Ÿç‡é™åˆ¶æ¼”ç¤º:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¯ä»¥æ§åˆ¶åŒæ—¶å‘èµ·çš„è¯·æ±‚æ•°é‡ï¼Œé¿å…å¯¹æœåŠ¡å™¨é€ æˆè¿‡å¤§å‹åŠ›"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">50</span>)
</code></pre>
<h2 data-id="heading-7">ä¸‰ã€å¼‚æ­¥æ–‡ä»¶æ“ä½œ</h2>
<h3 data-id="heading-8">3.1 å¼‚æ­¥è¯»å†™æ–‡ä»¶</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> aiofiles
<span class="hljs-keyword">import</span> os

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">async_write_file</span>(<span class="hljs-params">filename, content</span>):
    <span class="hljs-string">"""å¼‚æ­¥å†™å…¥æ–‡ä»¶"""</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> aiofiles.<span class="hljs-built_in">open</span>(filename, <span class="hljs-string">'w'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> f:
            <span class="hljs-keyword">await</span> f.write(content)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ–‡ä»¶å†™å…¥æˆåŠŸ: <span class="hljs-subst">{filename}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ–‡ä»¶å†™å…¥å¤±è´¥ <span class="hljs-subst">{filename}</span>: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">async_read_file</span>(<span class="hljs-params">filename</span>):
    <span class="hljs-string">"""å¼‚æ­¥è¯»å–æ–‡ä»¶"""</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> aiofiles.<span class="hljs-built_in">open</span>(filename, <span class="hljs-string">'r'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> f:
            content = <span class="hljs-keyword">await</span> f.read()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ–‡ä»¶è¯»å–æˆåŠŸ: <span class="hljs-subst">{filename}</span>, é•¿åº¦: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(content)}</span>"</span>)
        <span class="hljs-keyword">return</span> content
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ–‡ä»¶è¯»å–å¤±è´¥ <span class="hljs-subst">{filename}</span>: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">process_multiple_files</span>():
    <span class="hljs-string">"""å¤„ç†å¤šä¸ªæ–‡ä»¶"""</span>
    <span class="hljs-comment"># åˆ›å»ºä¸€äº›æµ‹è¯•æ–‡ä»¶</span>
    files_data = {
        <span class="hljs-string">"test1.txt"</span>: <span class="hljs-string">"è¿™æ˜¯ç¬¬ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶çš„å†…å®¹\nHello World!"</span>,
        <span class="hljs-string">"test2.txt"</span>: <span class="hljs-string">"è¿™æ˜¯ç¬¬äºŒä¸ªæµ‹è¯•æ–‡ä»¶\nPythonå¼‚æ­¥ç¼–ç¨‹å¾ˆæœ‰è¶£"</span>,
        <span class="hljs-string">"test3.txt"</span>: <span class="hljs-string">"ç¬¬ä¸‰ä¸ªæ–‡ä»¶\n"</span> + <span class="hljs-string">"æ•°æ®è¡Œ\n"</span> * <span class="hljs-number">10</span>
    }
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼€å§‹å¼‚æ­¥æ–‡ä»¶æ“ä½œæ¼”ç¤º..."</span>)
    
    <span class="hljs-comment"># å¹¶å‘å†™å…¥æ–‡ä»¶</span>
    write_tasks = []
    <span class="hljs-keyword">for</span> filename, content <span class="hljs-keyword">in</span> files_data.items():
        task = asyncio.create_task(async_write_file(filename, content))
        write_tasks.append(task)
    
    write_results = <span class="hljs-keyword">await</span> asyncio.gather(*write_tasks)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å†™å…¥å®Œæˆï¼ŒæˆåŠŸ: <span class="hljs-subst">{<span class="hljs-built_in">sum</span>(write_results)}</span>/<span class="hljs-subst">{<span class="hljs-built_in">len</span>(write_results)}</span>"</span>)
    
    <span class="hljs-comment"># å¹¶å‘è¯»å–æ–‡ä»¶</span>
    read_tasks = []
    <span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> files_data.keys():
        task = asyncio.create_task(async_read_file(filename))
        read_tasks.append(task)
    
    read_results = <span class="hljs-keyword">await</span> asyncio.gather(*read_tasks)
    
    <span class="hljs-comment"># æ˜¾ç¤ºè¯»å–çš„å†…å®¹æ‘˜è¦</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ–‡ä»¶å†…å®¹æ‘˜è¦:"</span>)
    <span class="hljs-keyword">for</span> filename, content <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(files_data.keys(), read_results):
        <span class="hljs-keyword">if</span> content:
            preview = content[:<span class="hljs-number">50</span>].replace(<span class="hljs-string">'\n'</span>, <span class="hljs-string">' '</span>) + <span class="hljs-string">"..."</span>
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{filename}</span>: <span class="hljs-subst">{preview}</span>"</span>)
    
    <span class="hljs-comment"># æ¸…ç†æµ‹è¯•æ–‡ä»¶</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ¸…ç†æµ‹è¯•æ–‡ä»¶..."</span>)
    <span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> files_data.keys():
        <span class="hljs-keyword">try</span>:
            os.remove(filename)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ é™¤: <span class="hljs-subst">{filename}</span>"</span>)
        <span class="hljs-keyword">except</span>:
            <span class="hljs-keyword">pass</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼‚æ­¥æ–‡ä»¶æ“ä½œæ¼”ç¤º:"</span>)
<span class="hljs-comment"># asyncio.run(process_multiple_files())</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">50</span>)
</code></pre>
<h2 data-id="heading-9">å››ã€å¼‚æ­¥ä¸æ•°æ®åº“</h2>
<h3 data-id="heading-10">4.1 å¼‚æ­¥æ•°æ®åº“æ“ä½œ</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è¿™é‡Œä»¥SQLiteä¸ºä¾‹ï¼Œå®é™…ä¸­å¸¸ç”¨çš„æ˜¯å¼‚æ­¥MySQL/PostgreSQLé©±åŠ¨</span>
<span class="hljs-keyword">import</span> aiosqlite

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">async_database_demo</span>():
    <span class="hljs-string">"""å¼‚æ­¥æ•°æ®åº“æ“ä½œæ¼”ç¤º"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼€å§‹å¼‚æ­¥æ•°æ®åº“æ¼”ç¤º..."</span>)
    
    <span class="hljs-comment"># åˆ›å»ºå†…å­˜æ•°æ®åº“</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> aiosqlite.connect(<span class="hljs-string">':memory:'</span>) <span class="hljs-keyword">as</span> db:
        <span class="hljs-comment"># åˆ›å»ºè¡¨</span>
        <span class="hljs-keyword">await</span> db.execute(<span class="hljs-string">'''
            CREATE TABLE users (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                name TEXT NOT NULL,
                email TEXT UNIQUE NOT NULL,
                age INTEGER
            )
        '''</span>)
        <span class="hljs-keyword">await</span> db.commit()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¡¨åˆ›å»ºæˆåŠŸ"</span>)
        
        <span class="hljs-comment"># æ’å…¥æ•°æ®</span>
        users = [
            (<span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-string">'zhangsan@example.com'</span>, <span class="hljs-number">25</span>),
            (<span class="hljs-string">'æå››'</span>, <span class="hljs-string">'lisi@example.com'</span>, <span class="hljs-number">30</span>),
            (<span class="hljs-string">'ç‹äº”'</span>, <span class="hljs-string">'wangwu@example.com'</span>, <span class="hljs-number">28</span>),
            (<span class="hljs-string">'èµµå…­'</span>, <span class="hljs-string">'zhaoliu@example.com'</span>, <span class="hljs-number">35</span>)
        ]
        
        <span class="hljs-comment"># å¹¶å‘æ’å…¥</span>
        insert_tasks = []
        <span class="hljs-keyword">for</span> name, email, age <span class="hljs-keyword">in</span> users:
            task = asyncio.create_task(
                db.execute(
                    <span class="hljs-string">"INSERT INTO users (name, email, age) VALUES (?, ?, ?)"</span>,
                    (name, email, age)
                )
            )
            insert_tasks.append(task)
        
        <span class="hljs-keyword">await</span> asyncio.gather(*insert_tasks)
        <span class="hljs-keyword">await</span> db.commit()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ’å…¥ <span class="hljs-subst">{<span class="hljs-built_in">len</span>(users)}</span> æ¡è®°å½•æˆåŠŸ"</span>)
        
        <span class="hljs-comment"># æŸ¥è¯¢æ•°æ®</span>
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> db.execute(<span class="hljs-string">"SELECT * FROM users ORDER BY age"</span>) <span class="hljs-keyword">as</span> cursor:
            rows = <span class="hljs-keyword">await</span> cursor.fetchall()
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nç”¨æˆ·åˆ—è¡¨ (æŒ‰å¹´é¾„æ’åº):"</span>)
            <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> rows:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  ID: <span class="hljs-subst">{row[<span class="hljs-number">0</span>]}</span>, å§“å: <span class="hljs-subst">{row[<span class="hljs-number">1</span>]}</span>, é‚®ç®±: <span class="hljs-subst">{row[<span class="hljs-number">2</span>]}</span>, å¹´é¾„: <span class="hljs-subst">{row[<span class="hljs-number">3</span>]}</span>"</span>)
        
        <span class="hljs-comment"># å¤æ‚æŸ¥è¯¢</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nç»Ÿè®¡ä¿¡æ¯:"</span>)
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> db.execute(<span class="hljs-string">"SELECT COUNT(*), AVG(age) FROM users"</span>) <span class="hljs-keyword">as</span> cursor:
            count, avg_age = <span class="hljs-keyword">await</span> cursor.fetchone()
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  ç”¨æˆ·æ€»æ•°: <span class="hljs-subst">{count}</span>"</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  å¹³å‡å¹´é¾„: <span class="hljs-subst">{avg_age:<span class="hljs-number">.1</span>f}</span>"</span>)
        
        <span class="hljs-comment"># äº‹åŠ¡æ¼”ç¤º</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"\näº‹åŠ¡æ¼”ç¤º:"</span>)
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">await</span> db.execute(<span class="hljs-string">"BEGIN TRANSACTION"</span>)
            
            <span class="hljs-comment"># æ›´æ–°æ“ä½œ</span>
            <span class="hljs-keyword">await</span> db.execute(<span class="hljs-string">"UPDATE users SET age = age + 1 WHERE age &lt; 30"</span>)
            
            <span class="hljs-comment"># æ¨¡æ‹Ÿä¸€ä¸ªå¯èƒ½å¤±è´¥çš„æ“ä½œ</span>
            should_fail = <span class="hljs-literal">False</span>
            <span class="hljs-keyword">if</span> should_fail:
                <span class="hljs-keyword">raise</span> Exception(<span class="hljs-string">"æ¨¡æ‹Ÿäº‹åŠ¡å¤±è´¥"</span>)
            
            <span class="hljs-keyword">await</span> db.execute(<span class="hljs-string">"DELETE FROM users WHERE age &gt; 40"</span>)
            
            <span class="hljs-keyword">await</span> db.execute(<span class="hljs-string">"COMMIT"</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"  äº‹åŠ¡æäº¤æˆåŠŸ"</span>)
            
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">await</span> db.execute(<span class="hljs-string">"ROLLBACK"</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  äº‹åŠ¡å›æ»š: <span class="hljs-subst">{e}</span>"</span>)
        
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ¼”ç¤ºå®Œæˆ!"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼‚æ­¥æ•°æ®åº“æ“ä½œæ¼”ç¤º:"</span>)
<span class="hljs-comment"># asyncio.run(async_database_demo())</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">50</span>)
</code></pre>
<h2 data-id="heading-11">äº”ã€å¼‚æ­¥Webæ¡†æ¶ï¼šFastAPIå®æˆ˜</h2>
<h3 data-id="heading-12">5.1 å¿«é€Ÿåˆ›å»ºå¼‚æ­¥API</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> FastAPI, HTTPException, BackgroundTasks
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>, <span class="hljs-type">Optional</span>
<span class="hljs-keyword">import</span> asyncio

<span class="hljs-comment"># åˆ›å»ºFastAPIåº”ç”¨</span>
app = FastAPI(title=<span class="hljs-string">"å¼‚æ­¥APIæ¼”ç¤º"</span>, version=<span class="hljs-string">"1.0.0"</span>)

<span class="hljs-comment"># æ•°æ®æ¨¡å‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Item</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    name: <span class="hljs-built_in">str</span>
    description: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>] = <span class="hljs-literal">None</span>
    price: <span class="hljs-built_in">float</span>
    stock: <span class="hljs-built_in">int</span> = <span class="hljs-number">0</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    item_id: <span class="hljs-built_in">int</span>
    quantity: <span class="hljs-built_in">int</span>
    customer_name: <span class="hljs-built_in">str</span>

<span class="hljs-comment"># æ¨¡æ‹Ÿæ•°æ®åº“</span>
fake_items_db = {
    <span class="hljs-number">1</span>: Item(name=<span class="hljs-string">"ç¬”è®°æœ¬ç”µè„‘"</span>, description=<span class="hljs-string">"é«˜æ€§èƒ½æ¸¸æˆæœ¬"</span>, price=<span class="hljs-number">6999.99</span>, stock=<span class="hljs-number">10</span>),
    <span class="hljs-number">2</span>: Item(name=<span class="hljs-string">"æ™ºèƒ½æ‰‹æœº"</span>, description=<span class="hljs-string">"æœ€æ–°æ¬¾5Gæ‰‹æœº"</span>, price=<span class="hljs-number">3999.99</span>, stock=<span class="hljs-number">50</span>),
    <span class="hljs-number">3</span>: Item(name=<span class="hljs-string">"å¹³æ¿ç”µè„‘"</span>, description=<span class="hljs-string">"è½»è–„ä¾¿æº"</span>, price=<span class="hljs-number">2999.99</span>, stock=<span class="hljs-number">30</span>)
}

orders_db = []

<span class="hljs-comment"># å¼‚æ­¥ä»»åŠ¡ï¼ˆæ¨¡æ‹Ÿè€—æ—¶æ“ä½œï¼‰</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">process_order_background</span>(<span class="hljs-params">order_id: <span class="hljs-built_in">int</span>, order_data: Order</span>):
    <span class="hljs-string">"""åå°å¤„ç†è®¢å•"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"[åå°] å¼€å§‹å¤„ç†è®¢å• <span class="hljs-subst">{order_id}</span>"</span>)
    <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">3</span>)  <span class="hljs-comment"># æ¨¡æ‹Ÿè€—æ—¶å¤„ç†</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"[åå°] è®¢å• <span class="hljs-subst">{order_id}</span> å¤„ç†å®Œæˆ: <span class="hljs-subst">{order_data.customer_name}</span> è´­ä¹°äº† <span class="hljs-subst">{order_data.quantity}</span> ä»¶å•†å“"</span>)

<span class="hljs-comment"># APIç«¯ç‚¹</span>
<span class="hljs-meta">@app.get(<span class="hljs-params"><span class="hljs-string">"/"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">root</span>():
    <span class="hljs-string">"""æ ¹è·¯å¾„"""</span>
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"message"</span>: <span class="hljs-string">"æ¬¢è¿ä½¿ç”¨å¼‚æ­¥API"</span>, <span class="hljs-string">"status"</span>: <span class="hljs-string">"è¿è¡Œä¸­"</span>}

<span class="hljs-meta">@app.get(<span class="hljs-params"><span class="hljs-string">"/items/"</span>, response_model=<span class="hljs-type">List</span>[Item]</span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">list_items</span>(<span class="hljs-params">skip: <span class="hljs-built_in">int</span> = <span class="hljs-number">0</span>, limit: <span class="hljs-built_in">int</span> = <span class="hljs-number">10</span></span>):
    <span class="hljs-string">"""è·å–å•†å“åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µï¼‰"""</span>
    <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">0.5</span>)  <span class="hljs-comment"># æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢å»¶è¿Ÿ</span>
    items = <span class="hljs-built_in">list</span>(fake_items_db.values())[skip:skip + limit]
    <span class="hljs-keyword">return</span> items

<span class="hljs-meta">@app.get(<span class="hljs-params"><span class="hljs-string">"/items/{item_id}"</span>, response_model=Item</span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_item</span>(<span class="hljs-params">item_id: <span class="hljs-built_in">int</span></span>):
    <span class="hljs-string">"""è·å–å•ä¸ªå•†å“"""</span>
    <span class="hljs-keyword">if</span> item_id <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> fake_items_db:
        <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">404</span>, detail=<span class="hljs-string">"å•†å“æœªæ‰¾åˆ°"</span>)
    
    <span class="hljs-comment"># æ¨¡æ‹Ÿå¤æ‚çš„å¼‚æ­¥æŸ¥è¯¢</span>
    <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">0.3</span>)
    <span class="hljs-keyword">return</span> fake_items_db[item_id]

<span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">"/orders/"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">create_order</span>(<span class="hljs-params">order: Order, background_tasks: BackgroundTasks</span>):
    <span class="hljs-string">"""åˆ›å»ºè®¢å•ï¼ˆä½¿ç”¨åå°ä»»åŠ¡ï¼‰"""</span>
    <span class="hljs-keyword">if</span> order.item_id <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> fake_items_db:
        <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">404</span>, detail=<span class="hljs-string">"å•†å“ä¸å­˜åœ¨"</span>)
    
    item = fake_items_db[order.item_id]
    <span class="hljs-keyword">if</span> order.quantity &gt; item.stock:
        <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">400</span>, detail=<span class="hljs-string">"åº“å­˜ä¸è¶³"</span>)
    
    <span class="hljs-comment"># æ›´æ–°åº“å­˜</span>
    item.stock -= order.quantity
    
    <span class="hljs-comment"># ç”Ÿæˆè®¢å•ID</span>
    order_id = <span class="hljs-built_in">len</span>(orders_db) + <span class="hljs-number">1</span>
    
    <span class="hljs-comment"># å°†è®¢å•åŠ å…¥æ•°æ®åº“</span>
    orders_db.append({
        <span class="hljs-string">"id"</span>: order_id,
        **order.<span class="hljs-built_in">dict</span>(),
        <span class="hljs-string">"total_price"</span>: item.price * order.quantity,
        <span class="hljs-string">"status"</span>: <span class="hljs-string">"processing"</span>
    })
    
    <span class="hljs-comment"># æ·»åŠ åå°ä»»åŠ¡</span>
    background_tasks.add_task(process_order_background, order_id, order)
    
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">"order_id"</span>: order_id,
        <span class="hljs-string">"message"</span>: <span class="hljs-string">"è®¢å•å·²æ¥æ”¶ï¼Œæ­£åœ¨å¤„ç†ä¸­"</span>,
        <span class="hljs-string">"total"</span>: item.price * order.quantity
    }

<span class="hljs-meta">@app.get(<span class="hljs-params"><span class="hljs-string">"/orders/{order_id}"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_order_status</span>(<span class="hljs-params">order_id: <span class="hljs-built_in">int</span></span>):
    <span class="hljs-string">"""è·å–è®¢å•çŠ¶æ€"""</span>
    <span class="hljs-keyword">if</span> order_id &lt; <span class="hljs-number">1</span> <span class="hljs-keyword">or</span> order_id &gt; <span class="hljs-built_in">len</span>(orders_db):
        <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">404</span>, detail=<span class="hljs-string">"è®¢å•ä¸å­˜åœ¨"</span>)
    
    <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">0.2</span>)  <span class="hljs-comment"># æ¨¡æ‹ŸæŸ¥è¯¢å»¶è¿Ÿ</span>
    <span class="hljs-keyword">return</span> orders_db[order_id - <span class="hljs-number">1</span>]

<span class="hljs-comment"># è¿è¡ŒæœåŠ¡å™¨ï¼ˆè¿™æ®µä»£ç åœ¨å®é™…æ–‡ä»¶ä¸­è¿è¡Œï¼‰</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-keyword">import</span> uvicorn
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¯åŠ¨FastAPIæœåŠ¡å™¨..."</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"è®¿é—® http://localhost:8000/docs æŸ¥çœ‹APIæ–‡æ¡£"</span>)
    uvicorn.run(app, host=<span class="hljs-string">"0.0.0.0"</span>, port=<span class="hljs-number">8000</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"FastAPIå¼‚æ­¥Webæ¡†æ¶æ¼”ç¤º:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"1. å®šä¹‰äº†Itemå’ŒOrderæ•°æ®æ¨¡å‹"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"2. åˆ›å»ºäº†å•†å“åˆ—è¡¨ã€æŸ¥è¯¢ã€ä¸‹å•ç­‰APIç«¯ç‚¹"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"3. ä½¿ç”¨BackgroundTaskså¤„ç†è€—æ—¶æ“ä½œ"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"4. æ”¯æŒå¼‚æ­¥æ•°æ®åº“æ“ä½œï¼ˆç¤ºä¾‹ä¸­æ˜¯å†…å­˜å­˜å‚¨ï¼‰"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">50</span>)
</code></pre>
<h2 data-id="heading-13">å…­ã€æ€§èƒ½ä¼˜åŒ–ä¸é”™è¯¯å¤„ç†</h2>
<h3 data-id="heading-14">6.1 å¼‚æ­¥æ€§èƒ½ç›‘æ§</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> contextlib <span class="hljs-keyword">import</span> asynccontextmanager

<span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncTimer</span>:
    <span class="hljs-string">"""å¼‚æ­¥è®¡æ—¶å™¨"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name</span>):
        self.name = name
        self.start_time = <span class="hljs-literal">None</span>
        self.end_time = <span class="hljs-literal">None</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">__aenter__</span>(<span class="hljs-params">self</span>):
        self.start_time = time.time()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"[è®¡æ—¶å¼€å§‹] <span class="hljs-subst">{self.name}</span>"</span>)
        <span class="hljs-keyword">return</span> self
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">__aexit__</span>(<span class="hljs-params">self, exc_type, exc_val, exc_tb</span>):
        self.end_time = time.time()
        duration = self.end_time - self.start_time
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"[è®¡æ—¶ç»“æŸ] <span class="hljs-subst">{self.name}</span>: <span class="hljs-subst">{duration:<span class="hljs-number">.4</span>f}</span>ç§’"</span>)
        <span class="hljs-keyword">if</span> exc_type:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"[é”™è¯¯] <span class="hljs-subst">{self.name}</span>: <span class="hljs-subst">{exc_val}</span>"</span>)

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">monitored_operation</span>():
    <span class="hljs-string">"""è¢«ç›‘æ§çš„æ“ä½œ"""</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> AsyncTimer(<span class="hljs-string">"monitored_operation"</span>):
        <span class="hljs-comment"># æ¨¡æ‹Ÿä¸€äº›å¼‚æ­¥æ“ä½œ</span>
        <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">1</span>)
        
        <span class="hljs-comment"># æ¨¡æ‹Ÿå¯èƒ½å¤±è´¥çš„æ“ä½œ</span>
        <span class="hljs-keyword">if</span> time.time() % <span class="hljs-number">2</span> &gt; <span class="hljs-number">1</span>:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"éšæœºé”™è¯¯"</span>)
        
        <span class="hljs-comment"># æ›´å¤šæ“ä½œ</span>
        <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">0.5</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-string">"æ“ä½œæˆåŠŸ"</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">error_handling_demo</span>():
    <span class="hljs-string">"""é”™è¯¯å¤„ç†æ¼”ç¤º"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"=== å¼‚æ­¥é”™è¯¯å¤„ç† ==="</span>)
    
    <span class="hljs-comment"># 1. åŸºæœ¬çš„try-except</span>
    <span class="hljs-keyword">try</span>:
        result = <span class="hljs-keyword">await</span> monitored_operation()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç»“æœ: <span class="hljs-subst">{result}</span>"</span>)
    <span class="hljs-keyword">except</span> ValueError <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ•è·åˆ°é”™è¯¯: <span class="hljs-subst">{e}</span>"</span>)
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n2. asyncio.gatherçš„é”™è¯¯å¤„ç†:"</span>)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">task_with_error</span>(<span class="hljs-params">n</span>):
        <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">0.1</span>)
        <span class="hljs-keyword">if</span> n == <span class="hljs-number">2</span>:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"ä»»åŠ¡ <span class="hljs-subst">{n}</span> æ•…æ„å¤±è´¥"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"ä»»åŠ¡ <span class="hljs-subst">{n}</span> æˆåŠŸ"</span>
    
    <span class="hljs-comment"># æ–¹å¼1: å…¨éƒ¨å®Œæˆï¼Œæ”¶é›†å¼‚å¸¸</span>
    tasks = [task_with_error(i) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>)]
    results = <span class="hljs-keyword">await</span> asyncio.gather(*tasks, return_exceptions=<span class="hljs-literal">True</span>)
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰€æœ‰ä»»åŠ¡ç»“æœ:"</span>)
    <span class="hljs-keyword">for</span> i, result <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(results):
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(result, Exception):
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  ä»»åŠ¡ <span class="hljs-subst">{i}</span>: å¤±è´¥ - <span class="hljs-subst">{result}</span>"</span>)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  ä»»åŠ¡ <span class="hljs-subst">{i}</span>: æˆåŠŸ - <span class="hljs-subst">{result}</span>"</span>)
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n3. asyncio.waitçš„é”™è¯¯å¤„ç†:"</span>)
    
    tasks = [asyncio.create_task(task_with_error(i)) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>)]
    
    <span class="hljs-comment"># ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span>
    done, pending = <span class="hljs-keyword">await</span> asyncio.wait(tasks, return_when=asyncio.ALL_COMPLETED)
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å®Œæˆçš„ä»»åŠ¡:"</span>)
    <span class="hljs-keyword">for</span> task <span class="hljs-keyword">in</span> done:
        <span class="hljs-keyword">try</span>:
            result = task.result()
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  æˆåŠŸ: <span class="hljs-subst">{result}</span>"</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">performance_optimization</span>():
    <span class="hljs-string">"""æ€§èƒ½ä¼˜åŒ–æŠ€å·§"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== æ€§èƒ½ä¼˜åŒ–æŠ€å·§ ==="</span>)
    
    <span class="hljs-comment"># 1. é¿å…åœ¨çƒ­è·¯å¾„ä¸­ä½¿ç”¨await</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"1. é¿å…ä¸å¿…è¦çš„await:"</span>)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">inefficient</span>():
        <span class="hljs-string">"""ä½æ•ˆçš„å®ç°"""</span>
        result = []
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):
            <span class="hljs-comment"># æ¯æ¬¡å¾ªç¯éƒ½awaitï¼Œæ•ˆç‡ä½</span>
            <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">0.01</span>)
            result.append(i)
        <span class="hljs-keyword">return</span> result
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">efficient</span>():
        <span class="hljs-string">"""é«˜æ•ˆçš„å®ç°"""</span>
        <span class="hljs-comment"># æ‰¹é‡åˆ›å»ºä»»åŠ¡</span>
        tasks = []
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):
            task = asyncio.create_task(asyncio.sleep(<span class="hljs-number">0.01</span>))
            tasks.append((task, i))
        
        <span class="hljs-comment"># ä¸€æ¬¡æ€§ç­‰å¾…æ‰€æœ‰ä»»åŠ¡</span>
        results = []
        <span class="hljs-keyword">for</span> task, i <span class="hljs-keyword">in</span> tasks:
            <span class="hljs-keyword">await</span> task
            results.append(i)
        
        <span class="hljs-keyword">return</span> results
    
    <span class="hljs-comment"># 2. ä½¿ç”¨asyncio.Queueè¿›è¡Œæµé‡æ§åˆ¶</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n2. ä½¿ç”¨asyncio.Queue:"</span>)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">worker</span>(<span class="hljs-params">name, queue</span>):
        <span class="hljs-string">"""å·¥ä½œè€…åç¨‹"""</span>
        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
            item = <span class="hljs-keyword">await</span> queue.get()
            <span class="hljs-keyword">if</span> item <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:  <span class="hljs-comment"># ç»ˆæ­¢ä¿¡å·</span>
                <span class="hljs-keyword">break</span>
            
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{name}</span> å¤„ç†: <span class="hljs-subst">{item}</span>"</span>)
            <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">0.1</span>)
            queue.task_done()
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">queue_demo</span>():
        <span class="hljs-string">"""é˜Ÿåˆ—æ¼”ç¤º"""</span>
        queue = asyncio.Queue(maxsize=<span class="hljs-number">5</span>)
        
        <span class="hljs-comment"># å¯åŠ¨å·¥ä½œè€…</span>
        workers = [
            asyncio.create_task(worker(<span class="hljs-string">f"Worker-<span class="hljs-subst">{i}</span>"</span>, queue))
            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>)
        ]
        
        <span class="hljs-comment"># ç”Ÿäº§é¡¹ç›®</span>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):
            <span class="hljs-keyword">await</span> queue.put(<span class="hljs-string">f"Item-<span class="hljs-subst">{i}</span>"</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç”Ÿäº§: Item-<span class="hljs-subst">{i}</span>"</span>)
        
        <span class="hljs-comment"># ç­‰å¾…æ‰€æœ‰é¡¹ç›®è¢«å¤„ç†</span>
        <span class="hljs-keyword">await</span> queue.join()
        
        <span class="hljs-comment"># åœæ­¢å·¥ä½œè€…</span>
        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> workers:
            <span class="hljs-keyword">await</span> queue.put(<span class="hljs-literal">None</span>)
        
        <span class="hljs-keyword">await</span> asyncio.gather(*workers)
    
    <span class="hljs-keyword">await</span> queue_demo()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ€§èƒ½ä¼˜åŒ–ä¸é”™è¯¯å¤„ç†:"</span>)
asyncio.run(error_handling_demo())
<span class="hljs-comment"># asyncio.run(performance_optimization())</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">50</span>)
</code></pre>
<h2 data-id="heading-15">ä¸ƒã€å®æˆ˜é¡¹ç›®ï¼šå¼‚æ­¥çˆ¬è™«ç³»ç»Ÿ</h2>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">import</span> aiohttp
<span class="hljs-keyword">from</span> urllib.parse <span class="hljs-keyword">import</span> urlparse, urljoin
<span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup
<span class="hljs-keyword">import</span> re

<span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncWebCrawler</span>:
    <span class="hljs-string">"""å¼‚æ­¥ç½‘ç»œçˆ¬è™«"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, start_url, max_depth=<span class="hljs-number">2</span>, max_concurrent=<span class="hljs-number">10</span></span>):
        self.start_url = start_url
        self.max_depth = max_depth
        self.max_concurrent = max_concurrent
        self.visited_urls = <span class="hljs-built_in">set</span>()
        self.results = []
        self.semaphore = asyncio.Semaphore(max_concurrent)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">normalize_url</span>(<span class="hljs-params">self, url, base_url</span>):
        <span class="hljs-string">"""æ ‡å‡†åŒ–URL"""</span>
        <span class="hljs-keyword">if</span> url.startswith(<span class="hljs-string">'#'</span>):
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
        <span class="hljs-keyword">if</span> url.startswith(<span class="hljs-string">'javascript:'</span>):
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
        
        <span class="hljs-comment"># è½¬æ¢ä¸ºç»å¯¹URL</span>
        absolute_url = urljoin(base_url, url)
        
        <span class="hljs-comment"># ç§»é™¤ç‰‡æ®µæ ‡è¯†ç¬¦</span>
        parsed = urlparse(absolute_url)
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{parsed.scheme}</span>://<span class="hljs-subst">{parsed.netloc}</span><span class="hljs-subst">{parsed.path}</span>"</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch_page</span>(<span class="hljs-params">self, session, url</span>):
        <span class="hljs-string">"""è·å–é¡µé¢å†…å®¹"""</span>
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> self.semaphore:
            <span class="hljs-keyword">try</span>:
                <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> session.get(url, timeout=<span class="hljs-number">10</span>) <span class="hljs-keyword">as</span> response:
                    <span class="hljs-keyword">if</span> response.status == <span class="hljs-number">200</span>:
                        content_type = response.headers.get(<span class="hljs-string">'content-type'</span>, <span class="hljs-string">''</span>)
                        <span class="hljs-keyword">if</span> <span class="hljs-string">'text/html'</span> <span class="hljs-keyword">in</span> content_type:
                            html = <span class="hljs-keyword">await</span> response.text()
                            <span class="hljs-keyword">return</span> {
                                <span class="hljs-string">'url'</span>: url,
                                <span class="hljs-string">'html'</span>: html,
                                <span class="hljs-string">'status'</span>: <span class="hljs-string">'success'</span>
                            }
                        <span class="hljs-keyword">else</span>:
                            <span class="hljs-keyword">return</span> {
                                <span class="hljs-string">'url'</span>: url,
                                <span class="hljs-string">'status'</span>: <span class="hljs-string">'not_html'</span>,
                                <span class="hljs-string">'content_type'</span>: content_type
                            }
                    <span class="hljs-keyword">else</span>:
                        <span class="hljs-keyword">return</span> {
                            <span class="hljs-string">'url'</span>: url,
                            <span class="hljs-string">'status'</span>: <span class="hljs-string">'error'</span>,
                            <span class="hljs-string">'status_code'</span>: response.status
                        }
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                <span class="hljs-keyword">return</span> {
                    <span class="hljs-string">'url'</span>: url,
                    <span class="hljs-string">'status'</span>: <span class="hljs-string">'exception'</span>,
                    <span class="hljs-string">'error'</span>: <span class="hljs-built_in">str</span>(e)
                }
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_links</span>(<span class="hljs-params">self, html, base_url</span>):
        <span class="hljs-string">"""ä»HTMLä¸­æå–é“¾æ¥"""</span>
        soup = BeautifulSoup(html, <span class="hljs-string">'html.parser'</span>)
        links = []
        
        <span class="hljs-keyword">for</span> link <span class="hljs-keyword">in</span> soup.find_all(<span class="hljs-string">'a'</span>, href=<span class="hljs-literal">True</span>):
            url = self.normalize_url(link[<span class="hljs-string">'href'</span>], base_url)
            <span class="hljs-keyword">if</span> url <span class="hljs-keyword">and</span> url <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> self.visited_urls:
                links.append(url)
        
        <span class="hljs-comment"># æå–æ ‡é¢˜</span>
        title = soup.title.string <span class="hljs-keyword">if</span> soup.title <span class="hljs-keyword">else</span> <span class="hljs-string">"æ— æ ‡é¢˜"</span>
        
        <span class="hljs-comment"># æå–æ­£æ–‡ï¼ˆç®€åŒ–ç‰ˆï¼‰</span>
        text = soup.get_text()
        text = re.sub(<span class="hljs-string">r'\s+'</span>, <span class="hljs-string">' '</span>, text).strip()
        
        <span class="hljs-keyword">return</span> links, title, text[:<span class="hljs-number">200</span>]  <span class="hljs-comment"># åªå–å‰200å­—ç¬¦</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">crawl</span>(<span class="hljs-params">self, session, url, depth=<span class="hljs-number">0</span></span>):
        <span class="hljs-string">"""é€’å½’çˆ¬å–"""</span>
        <span class="hljs-keyword">if</span> depth &gt; self.max_depth:
            <span class="hljs-keyword">return</span>
        
        <span class="hljs-keyword">if</span> url <span class="hljs-keyword">in</span> self.visited_urls:
            <span class="hljs-keyword">return</span>
        
        self.visited_urls.add(url)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"[æ·±åº¦ <span class="hljs-subst">{depth}</span>] çˆ¬å–: <span class="hljs-subst">{url}</span>"</span>)
        
        <span class="hljs-comment"># è·å–é¡µé¢</span>
        result = <span class="hljs-keyword">await</span> self.fetch_page(session, url)
        
        <span class="hljs-keyword">if</span> result[<span class="hljs-string">'status'</span>] == <span class="hljs-string">'success'</span>:
            html = result[<span class="hljs-string">'html'</span>]
            links, title, preview = self.extract_links(html, url)
            
            <span class="hljs-comment"># ä¿å­˜ç»“æœ</span>
            self.results.append({
                <span class="hljs-string">'url'</span>: url,
                <span class="hljs-string">'title'</span>: title,
                <span class="hljs-string">'preview'</span>: preview,
                <span class="hljs-string">'depth'</span>: depth,
                <span class="hljs-string">'link_count'</span>: <span class="hljs-built_in">len</span>(links)
            })
            
            <span class="hljs-comment"># é€’å½’çˆ¬å–é“¾æ¥</span>
            <span class="hljs-keyword">if</span> depth &lt; self.max_depth <span class="hljs-keyword">and</span> links:
                tasks = []
                <span class="hljs-keyword">for</span> link <span class="hljs-keyword">in</span> links:
                    <span class="hljs-keyword">if</span> link <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> self.visited_urls:
                        task = asyncio.create_task(
                            self.crawl(session, link, depth + <span class="hljs-number">1</span>)
                        )
                        tasks.append(task)
                
                <span class="hljs-keyword">if</span> tasks:
                    <span class="hljs-keyword">await</span> asyncio.gather(*tasks)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""è¿è¡Œçˆ¬è™«"""</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¼€å§‹çˆ¬è™«: <span class="hljs-subst">{self.start_url}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœ€å¤§æ·±åº¦: <span class="hljs-subst">{self.max_depth}</span>, æœ€å¤§å¹¶å‘: <span class="hljs-subst">{self.max_concurrent}</span>"</span>)
        
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> aiohttp.ClientSession() <span class="hljs-keyword">as</span> session:
            <span class="hljs-keyword">await</span> self.crawl(session, self.start_url)
        
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nçˆ¬è™«å®Œæˆ!"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ€»å…±è®¿é—®äº† <span class="hljs-subst">{<span class="hljs-built_in">len</span>(self.visited_urls)}</span> ä¸ªURL"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ”¶é›†äº† <span class="hljs-subst">{<span class="hljs-built_in">len</span>(self.results)}</span> ä¸ªé¡µé¢"</span>)
        
        <span class="hljs-keyword">return</span> self.results

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">crawler_demo</span>():
    <span class="hljs-string">"""çˆ¬è™«æ¼”ç¤º"""</span>
    <span class="hljs-comment"># æ³¨æ„ï¼šå®é™…ä½¿ç”¨æ—¶è¯·éµå®ˆrobots.txtï¼Œä¸è¦å¯¹ç½‘ç«™é€ æˆå‹åŠ›</span>
    crawler = AsyncWebCrawler(
        start_url=<span class="hljs-string">"https://httpbin.org/html"</span>,  <span class="hljs-comment"># ä½¿ç”¨æµ‹è¯•é¡µé¢</span>
        max_depth=<span class="hljs-number">1</span>,
        max_concurrent=<span class="hljs-number">5</span>
    )
    
    results = <span class="hljs-keyword">await</span> crawler.run()
    
    <span class="hljs-comment"># æ˜¾ç¤ºç»“æœ</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nçˆ¬å–ç»“æœ:"</span>)
    <span class="hljs-keyword">for</span> i, result <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(results[:<span class="hljs-number">5</span>], <span class="hljs-number">1</span>):  <span class="hljs-comment"># åªæ˜¾ç¤ºå‰5ä¸ª</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{i}</span>. <span class="hljs-subst">{result[<span class="hljs-string">'title'</span>]}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"   åœ°å€: <span class="hljs-subst">{result[<span class="hljs-string">'url'</span>]}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"   æ·±åº¦: <span class="hljs-subst">{result[<span class="hljs-string">'depth'</span>]}</span>, é“¾æ¥æ•°: <span class="hljs-subst">{result[<span class="hljs-string">'link_count'</span>]}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"   é¢„è§ˆ: <span class="hljs-subst">{result[<span class="hljs-string">'preview'</span>]}</span>"</span>)
        <span class="hljs-built_in">print</span>()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼‚æ­¥çˆ¬è™«ç³»ç»Ÿæ¼”ç¤º:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"è¿™ä¸ªçˆ¬è™«å¯ä»¥å¹¶å‘è®¿é—®å¤šä¸ªé¡µé¢ï¼Œé«˜æ•ˆæ”¶é›†ç½‘ç»œä¿¡æ¯"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ³¨æ„ï¼šå®é™…ä½¿ç”¨æ—¶éœ€è¦éµå®ˆç½‘ç«™è§„åˆ™ï¼Œæ·»åŠ å»¶è¿Ÿé¿å…è¢«å°"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">50</span>)
</code></pre>
<h2 data-id="heading-16">æ€»ç»“ï¼šå¼‚æ­¥ç¼–ç¨‹çš„æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-17">é€‚åˆå¼‚æ­¥çš„åœºæ™¯ï¼š</h3>
<ol>
<li>âœ…Â <strong>I/Oå¯†é›†å‹ä»»åŠ¡</strong>ï¼ˆç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å†™ã€æ•°æ®åº“æŸ¥è¯¢ï¼‰</li>
<li>âœ…Â <strong>é«˜å¹¶å‘æœåŠ¡</strong>ï¼ˆWebæœåŠ¡å™¨ã€APIæœåŠ¡ï¼‰</li>
<li>âœ…Â <strong>å®æ—¶åº”ç”¨</strong>ï¼ˆèŠå¤©å®¤ã€å®æ—¶é€šçŸ¥ï¼‰</li>
<li>âœ…Â <strong>çˆ¬è™«å’Œæ•°æ®é‡‡é›†</strong></li>
</ol>
<h3 data-id="heading-18">ä¸é€‚åˆå¼‚æ­¥çš„åœºæ™¯ï¼š</h3>
<ol>
<li>âŒÂ <strong>CPUå¯†é›†å‹ä»»åŠ¡</strong>ï¼ˆç§‘å­¦è®¡ç®—ã€å›¾åƒå¤„ç†ï¼‰</li>
<li>âŒÂ <strong>ç®€å•è„šæœ¬</strong>ï¼ˆæ²¡æœ‰å¹¶å‘éœ€æ±‚ï¼‰</li>
<li>âŒÂ <strong>å¯¹é¡ºåºæœ‰ä¸¥æ ¼è¦æ±‚çš„ä»»åŠ¡</strong></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[mavenæ‰“åŒ…æ–¹æ³•]]></title>    <link>https://juejin.cn/post/7587671647400378408</link>    <guid>https://juejin.cn/post/7587671647400378408</guid>    <pubDate>2025-12-26T05:23:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587671647400378408" data-draft-id="7587652709395759104" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="mavenæ‰“åŒ…æ–¹æ³•"/> <meta itemprop="keywords" content="maven"/> <meta itemprop="datePublished" content="2025-12-26T05:23:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ°AJie"/> <meta itemprop="url" content="https://juejin.cn/user/3871838955636704"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            mavenæ‰“åŒ…æ–¹æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3871838955636704/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ°AJie
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T05:23:32.000Z" title="Fri Dec 26 2025 05:23:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æƒ³æ‰“åŒ… Maven é¡¹ç›®ï¼Œå¯ä»¥æ ¹æ®ä¸åŒéœ€æ±‚ï¼ˆæ™®é€š jarã€å¯æ‰§è¡Œ jarã€war åŒ…ç­‰ï¼‰é€‰æ‹©ä¸åŒæ–¹æ³•ã€‚ä¸‹é¢ç»™ä¸€ä¸ªå®Œæ•´çš„è¯´æ˜ï¼š</p>
<hr/>
<h2 data-id="heading-0"><strong>1. åŸºç¡€å‰æ</strong></h2>
<p>ç¡®ä¿ä½ å·²ç»ï¼š</p>
<ul>
<li>å®‰è£…äº† <strong>JDK</strong>ï¼ˆé€šå¸¸ 8+ï¼‰</li>
<li>å®‰è£…äº† <strong>Maven</strong></li>
<li>åœ¨é¡¹ç›®æ ¹ç›®å½•æœ‰ <strong>pom.xml</strong></li>
</ul>
<p>å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­éªŒè¯ï¼š</p>
<pre><code class="hljs">mvn -v
java -version
</code></pre>
<hr/>
<h2 data-id="heading-1"><strong>2. æ‰“åŒ…å‘½ä»¤</strong></h2>
<h3 data-id="heading-2"><strong>2.1 æ™®é€š jar åŒ…</strong></h3>
<pre><code class="hljs language-go" lang="go">mvn clean <span class="hljs-keyword">package</span>
</code></pre>
<p>è¯´æ˜ï¼š</p>
<ul>
<li>
<p><code>clean</code>ï¼šå…ˆæ¸…ç†ä¹‹å‰çš„ç¼–è¯‘æ–‡ä»¶</p>
</li>
<li>
<p><code>package</code>ï¼šç¼–è¯‘é¡¹ç›®å¹¶ç”Ÿæˆ jar/war æ–‡ä»¶</p>
</li>
<li>
<p>æ‰“åŒ…ç»“æœï¼š</p>
<ul>
<li>åœ¨ <code>target/</code> ç›®å½•ä¸‹ç”Ÿæˆ <code>é¡¹ç›®å-version.jar</code></li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-3"><strong>2.2 å¯æ‰§è¡Œ jarï¼ˆSpring Boot é¡¹ç›®ï¼‰</strong></h3>
<p>å¦‚æœæ˜¯ <strong>Spring Boot</strong>ï¼Œä¸€èˆ¬éœ€è¦åŒ…å«ä¾èµ–ï¼Œå¯ä»¥ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-go" lang="go">mvn clean <span class="hljs-keyword">package</span> spring-boot:repackage
</code></pre>
<p>æˆ–è€…ï¼š</p>
<pre><code class="hljs">mvn clean install
</code></pre>
<p>è¯´æ˜ï¼š</p>
<ul>
<li><code>install</code>ï¼šä¼šæŠŠ jar å®‰è£…åˆ°æœ¬åœ°ä»“åº“ï¼Œæ–¹ä¾¿å…¶ä»–é¡¹ç›®ä¾èµ–</li>
<li>æ‰“åŒ…åç”Ÿæˆå¯ç›´æ¥æ‰§è¡Œçš„ jarï¼š</li>
</ul>
<pre><code class="hljs">java -jar target/é¡¹ç›®å-version.jar
</code></pre>
<hr/>
<h3 data-id="heading-4"><strong>2.3 war åŒ…</strong></h3>
<p>å¦‚æœé¡¹ç›®æ˜¯ Web é¡¹ç›®ï¼š</p>
<pre><code class="hljs language-go" lang="go">mvn clean <span class="hljs-keyword">package</span>
</code></pre>
<ul>
<li>
<p>åœ¨ pom.xml ä¸­è®¾ç½® <code>&lt;packaging&gt;war&lt;/packaging&gt;</code></p>
</li>
<li>
<p>æ‰“åŒ…ç»“æœï¼š</p>
<ul>
<li>åœ¨ <code>target/</code> ä¸‹ç”Ÿæˆ <code>é¡¹ç›®å-version.war</code></li>
</ul>
</li>
<li>
<p>å¯ç›´æ¥éƒ¨ç½²åˆ° Tomcat æˆ–å…¶ä»–å®¹å™¨</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-5"><strong>3. å¸¸ç”¨å‚æ•°</strong></h2>
<ul>
<li>æŒ‡å®š profileï¼š</li>
</ul>
<pre><code class="hljs language-go" lang="go">mvn clean <span class="hljs-keyword">package</span> -Pprod
</code></pre>
<ul>
<li>è·³è¿‡æµ‹è¯•ï¼š</li>
</ul>
<pre><code class="hljs language-go" lang="go">mvn clean <span class="hljs-keyword">package</span> -DskipTests
</code></pre>
<ul>
<li>æŒ‡å®š Maven æœ¬åœ°ä»“åº“ï¼š</li>
</ul>
<pre><code class="hljs language-lua" lang="lua">mvn clean <span class="hljs-built_in">package</span> -Dmaven.repo.<span class="hljs-keyword">local</span>=/<span class="hljs-built_in">path</span>/to/repo
</code></pre>
<hr/>
<h2 data-id="heading-6"><strong>4. æ³¨æ„äº‹é¡¹</strong></h2>
<ol>
<li><strong>ä¾èµ–å†²çª</strong>ï¼šæ‰“åŒ…å‰æœ€å¥½ <code>mvn dependency:tree</code> æ£€æŸ¥ã€‚</li>
<li><strong>ç¼–ç é—®é¢˜</strong>ï¼šæ‰“åŒ…æŠ¥ä¸­æ–‡ä¹±ç å¯åœ¨ pom.xml è®¾ç½®ï¼š</li>
</ol>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
</code></pre>
<ol start="3">
<li><strong>Spring Boot é¡¹ç›®</strong>ï¼šä¸è¦æ‰‹åŠ¨ä¿®æ”¹ <code>target/dependency</code>ï¼Œä½¿ç”¨ Maven æ’ä»¶æ‰“åŒ…ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é˜¿é‡ŒäºŒé¢ï¼šæ–°ç”Ÿä»£åƒåœ¾å›æ”¶ä¸ºå•¥ä½¿ç”¨æ ‡è®°å¤åˆ¶ç®—æ³•ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7587785079738318854</link>    <guid>https://juejin.cn/post/7587785079738318854</guid>    <pubDate>2025-12-26T06:38:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587785079738318854" data-draft-id="7555815483686125609" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é˜¿é‡ŒäºŒé¢ï¼šæ–°ç”Ÿä»£åƒåœ¾å›æ”¶ä¸ºå•¥ä½¿ç”¨æ ‡è®°å¤åˆ¶ç®—æ³•ï¼Ÿ"/> <meta itemprop="keywords" content="é¢è¯•,Java,åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T06:38:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜é£é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/1665088861772688"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é˜¿é‡ŒäºŒé¢ï¼šæ–°ç”Ÿä»£åƒåœ¾å›æ”¶ä¸ºå•¥ä½¿ç”¨æ ‡è®°å¤åˆ¶ç®—æ³•ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1665088861772688/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜é£é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T06:38:11.000Z" title="Fri Dec 26 2025 06:38:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><p><strong>æ–‡ç« å†…å®¹æ”¶å½•åˆ°ä¸ªäººç½‘ç«™ï¼Œæ–¹ä¾¿é˜…è¯»</strong>ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fhardyfish.top%2F" target="_blank" title="http://hardyfish.top/" ref="nofollow noopener noreferrer">hardyfish.top/</a></p>
<blockquote>
<p>æ–°ç”Ÿä»£åƒåœ¾å›æ”¶é‡‡ç”¨<strong>æ ‡è®°-å¤åˆ¶ï¼ˆMark-Copyï¼‰ç®—æ³•</strong>çš„åŸå› ï¼Œä¸»è¦æ˜¯å› ä¸ºå®ƒéå¸¸é€‚åˆæ–°ç”Ÿä»£çš„å†…å­˜ç‰¹ç‚¹ã€‚</p>
</blockquote>
<p>æ–°ç”Ÿä»£ç‰¹ç‚¹ï¼š</p>
<blockquote>
<p><strong>å¯¹è±¡ç”Ÿå‘½å‘¨æœŸçŸ­æš‚</strong>ï¼šå¤§éƒ¨åˆ†æ–°ç”Ÿä»£å¯¹è±¡ï¼ˆ80%ï½90%ï¼‰ä¼šå¾ˆå¿«å˜æˆåƒåœ¾ï¼Œå­˜æ´»ç‡ä½ã€‚</p>
<p><strong>å›æ”¶é¢‘ç‡é«˜</strong>ï¼šæ–°ç”Ÿä»£å†…å­˜å›æ”¶é¢‘ç¹ï¼Œæ•ˆç‡è¦æ±‚é«˜ã€‚</p>
</blockquote>
<p>æ ‡è®°-å¤åˆ¶ç®—æ³•åŸç†ï¼š</p>
<blockquote>
<p>å°†å†…å­˜ç©ºé—´åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼ˆé€šå¸¸æ˜¯å¤§å°ç›¸åŒçš„ä¸¤ä¸ªåŒºï¼Œå¦‚SurvivoråŒºï¼‰ï¼Œæ¯æ¬¡å›æ”¶æ—¶ï¼š</p>
<ul>
<li>
<p>æ ‡è®°å­˜æ´»å¯¹è±¡ã€‚</p>
</li>
<li>
<p>å°†å­˜æ´»å¯¹è±¡ç›´æ¥å¤åˆ¶åˆ°å¦ä¸€å—ç©ºé—²å†…å­˜åŒºåŸŸã€‚</p>
</li>
<li>
<p>åŸæ¥çš„å†…å­˜ç©ºé—´æ•´ä½“æ¸…ç©ºã€‚</p>
</li>
</ul>
</blockquote>
<p><strong>ä¸ºä»€ä¹ˆæ–°ç”Ÿä»£è¦ç”¨æ ‡è®°-å¤åˆ¶ï¼Ÿ</strong></p>
<blockquote>
<p><strong>å›æ”¶æ•ˆç‡é«˜ï¼Œé€Ÿåº¦å¿«ï¼š</strong></p>
<ul>
<li>æ–°ç”Ÿä»£å¤§éƒ¨åˆ†å¯¹è±¡å­˜æ´»ç‡ä½ï¼Œå¤åˆ¶å­˜æ´»å¯¹è±¡æˆæœ¬ä½ã€‚</li>
<li>ç›´æ¥å°†å­˜æ´»å¯¹è±¡å¤åˆ¶èµ°ï¼Œå‰©ä½™åƒåœ¾å¯¹è±¡ç»Ÿä¸€ä¸¢å¼ƒï¼Œä¸éœ€è¦é€ä¸€å›æ”¶ï¼Œæ•ˆç‡æé«˜ã€‚</li>
</ul>
<p><strong>ä¸äº§ç”Ÿå†…å­˜ç¢ç‰‡ï¼š</strong></p>
<ul>
<li>æ ‡è®°-å¤åˆ¶åçš„å­˜æ´»å¯¹è±¡å…¨éƒ¨é›†ä¸­å­˜æ”¾ï¼Œå†…å­˜å¸ƒå±€ç´§å‡‘ã€‚</li>
<li>é¿å…äº†è€å¹´ä»£å¸¸è§çš„å†…å­˜ç¢ç‰‡é—®é¢˜ã€‚</li>
</ul>
<p><strong>ç©ºé—´æ¢æ—¶é—´çš„ç­–ç•¥é€‚åˆæ–°ç”Ÿä»£ï¼š</strong></p>
<ul>
<li>æ–°ç”Ÿä»£è¾ƒå°ï¼Œå¤åˆ¶æˆæœ¬ä½ï¼Œå³ä½¿æµªè´¹ä¸€éƒ¨åˆ†å†…å­˜ç©ºé—´ï¼Œä¹Ÿèƒ½æ˜¾è‘—æå‡GCæ•ˆç‡ã€‚</li>
</ul>
</blockquote>
<p><strong>ä¸æ ‡è®°-æ¸…é™¤æˆ–æ ‡è®°-æ•´ç†å¯¹æ¯”ï¼š</strong></p>

































<table><thead><tr><th align="left">ç®—æ³•</th><th align="left">é€Ÿåº¦</th><th align="left">å†…å­˜ç¢ç‰‡</th><th align="left">ç©ºé—´å¼€é”€</th><th align="left">é€‚åˆåœºæ™¯</th></tr></thead><tbody><tr><td align="left">æ ‡è®°-å¤åˆ¶</td><td align="left">å¿«</td><td align="left">æ— ç¢ç‰‡</td><td align="left">é«˜ï¼ˆæµªè´¹ä¸€åŠç©ºé—´ï¼‰</td><td align="left">å­˜æ´»ç‡ä½ã€æ–°ç”Ÿä»£</td></tr><tr><td align="left">æ ‡è®°-æ¸…é™¤</td><td align="left">æ…¢</td><td align="left">æ˜“äº§ç”Ÿç¢ç‰‡</td><td align="left">ä½</td><td align="left">å­˜æ´»ç‡é«˜ã€è€å¹´ä»£</td></tr><tr><td align="left">æ ‡è®°-æ•´ç†</td><td align="left">è¾ƒæ…¢</td><td align="left">æ— ç¢ç‰‡</td><td align="left">ä½</td><td align="left">å­˜æ´»ç‡é«˜ã€è€å¹´ä»£</td></tr></tbody></table>
<ul>
<li>æ–°ç”Ÿä»£åƒåœ¾å¤šï¼Œé€‚åˆç‰ºç‰²ç©ºé—´æ¢å–æé«˜æ•ˆç‡ã€‚</li>
<li>è€å¹´ä»£åƒåœ¾å°‘ï¼Œä½¿ç”¨æ ‡è®°-æ¸…é™¤æˆ–æ ‡è®°-æ•´ç†é¿å…ç©ºé—´æµªè´¹ã€‚</li>
</ul>
<p><strong>æ€»ç»“ï¼š</strong></p>
<blockquote>
<p>æ–°ç”Ÿä»£ä¹‹æ‰€ä»¥ç”¨æ ‡è®°-å¤åˆ¶ç®—æ³•ï¼Œæ ¹æœ¬åŸå› æ˜¯<strong>æ–°ç”Ÿä»£å¯¹è±¡æ­»äº¡ç‡æé«˜</strong>ã€‚</p>
<p>æ ‡è®°-å¤åˆ¶ç®—æ³•èƒ½ä»¥<strong>ç©ºé—´æ¢æ—¶é—´</strong>çš„æ–¹å¼å¿«é€Ÿã€é«˜æ•ˆåœ°å›æ”¶åƒåœ¾ï¼ŒåŒæ—¶é¿å…ç¢ç‰‡ï¼Œæ»¡è¶³æ–°ç”Ÿä»£é«˜é¢‘ã€å¿«é€Ÿçš„å›æ”¶éœ€æ±‚ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…³äºTraeã€Cursorã€Kiro AIçš„å·¥å…·å¤§æ¯”æ‹¼]]></title>    <link>https://juejin.cn/post/7587961565476126774</link>    <guid>https://juejin.cn/post/7587961565476126774</guid>    <pubDate>2025-12-26T06:52:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587961565476126774" data-draft-id="7587825267878166569" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…³äºTraeã€Cursorã€Kiro AIçš„å·¥å…·å¤§æ¯”æ‹¼"/> <meta itemprop="keywords" content="Cursor,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-26T06:52:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯çš„é˜¶æ¢¯"/> <meta itemprop="url" content="https://juejin.cn/user/2604076678261512"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…³äºTraeã€Cursorã€Kiro AIçš„å·¥å…·å¤§æ¯”æ‹¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2604076678261512/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯çš„é˜¶æ¢¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T06:52:21.000Z" title="Fri Dec 26 2025 06:52:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å·¥å…·æ¦‚è§ˆï¼šä¸‰å¤§AIç¼–ç¨‹å·¥å…·çš„å®˜æ–¹å®šä½</h2>
<ol>
<li>
<p>Traeï¼šAIé©±åŠ¨çš„åä½œå¼ä»£ç ç¼–è¾‘å™¨
å®˜æ–¹ä»‹ç»ï¼š
Traeç”±AIå…¬å¸Anthropicï¼ˆClaudeæ¯å…¬å¸ï¼‰æ¨å‡ºï¼Œå®šä½ä¸ºâ€œä¸‹ä¸€ä»£åä½œå¼AIç¼–ç¨‹ç¯å¢ƒâ€ã€‚å…¶æ ¸å¿ƒå–ç‚¹æ˜¯ä¸Claude 3.5 Sonnetå¤§æ¨¡å‹çš„æ·±åº¦é›†æˆï¼Œæ”¯æŒå¤šç”¨æˆ·å®æ—¶åä½œã€ä»£ç è§£é‡Šä¸è°ƒè¯•ï¼Œå¹¶å¼ºè°ƒâ€œå®‰å…¨å¯æ§â€çš„AIä»£ç ç”Ÿæˆã€‚</p>
<p>é€‚ç”¨åœºæ™¯ï¼š</p>
<p>å›¢é˜Ÿåä½œå¼€å‘ï¼ˆå°¤å…¶é€‚åˆè¿œç¨‹å›¢é˜Ÿï¼‰</p>
<p>éœ€è¦é«˜ç²¾åº¦ä»£ç è§£é‡Šä¸è°ƒè¯•çš„å¤æ‚é¡¹ç›®</p>
<p>å¯¹æ•°æ®éšç§æœ‰ä¸¥æ ¼è¦æ±‚çš„ä¼ä¸šçº§åº”ç”¨</p>
</li>
<li>
<p>Cursorï¼šAIä¼˜å…ˆçš„ä¸‹ä¸€ä»£IDE
å®˜æ–¹ä»‹ç»ï¼š
Cursorè¯ç”Ÿäº2023å¹´ï¼Œä»¥â€œè®©AIç›´æ¥å†™ä»£ç â€ä¸ºå£å·ï¼Œæ”¯æŒå¤šæ¨¡å‹ï¼ˆGPT-4ã€Claudeã€Code Llamaç­‰ï¼‰ï¼Œæä¾›è‡ªç„¶è¯­è¨€ç”Ÿæˆä»£ç ã€ä»£ç è¡¥å…¨ã€æ™ºèƒ½é‡æ„ç­‰åŠŸèƒ½ã€‚å…¶æ ‡å¿—æ€§åŠŸèƒ½æ˜¯â€œEdit Modeâ€ï¼Œå…è®¸ç”¨æˆ·é€šè¿‡è‡ªç„¶è¯­è¨€ä¿®æ”¹ç°æœ‰ä»£ç ã€‚</p>
<p>é€‚ç”¨åœºæ™¯ï¼š</p>
<p>å¿«é€ŸåŸå‹å¼€å‘ï¼ˆå¦‚Webåº”ç”¨ã€è„šæœ¬ï¼‰</p>
<p>ä¸ªäººå¼€å‘è€…æˆ–å°å›¢é˜Ÿ</p>
<p>éœ€è¦çµæ´»åˆ‡æ¢AIæ¨¡å‹çš„åœºæ™¯</p>
</li>
<li>
<p>Kiro AIï¼šå‚ç›´é¢†åŸŸçš„ä»£ç ç”Ÿæˆä¸“å®¶
å®˜æ–¹ä»‹ç»ï¼š
Kiro AIèšç„¦äºâ€œç‰¹å®šé¢†åŸŸä»£ç ç”Ÿæˆâ€ï¼Œä¾‹å¦‚æ¸¸æˆå¼€å‘ã€æ•°æ®ç§‘å­¦ã€åµŒå…¥å¼ç³»ç»Ÿç­‰ã€‚å…¶æ¨¡å‹ç»è¿‡å‚ç›´é¢†åŸŸæ•°æ®å¾®è°ƒï¼Œæ”¯æŒé€šè¿‡è‡ªç„¶è¯­è¨€ç”Ÿæˆé¢†åŸŸç‰¹å®šä»£ç ï¼ˆå¦‚Unityè„šæœ¬ã€Pandasæ•°æ®å¤„ç†æµç¨‹ï¼‰ã€‚</p>
<p>é€‚ç”¨åœºæ™¯ï¼š</p>
<p>å‚ç›´é¢†åŸŸå¼€å‘è€…ï¼ˆå¦‚æ¸¸æˆã€é‡‘èç§‘æŠ€ï¼‰</p>
<p>éœ€è¦å‡å°‘é‡å¤æ€§ä»£ç ç¼–å†™çš„åœºæ™¯</p>
<p>å¯¹ä»£ç å¯è§£é‡Šæ€§è¦æ±‚è¾ƒé«˜çš„é¡¹ç›®</p>
</li>
</ol>
<h2 data-id="heading-1">äºŒã€æ ¸å¿ƒåŠŸèƒ½å¯¹æ¯”ï¼šè°èƒ½çœŸæ­£æå‡æ•ˆç‡ï¼Ÿ</h2>















































<table><thead><tr><th>åŠŸèƒ½</th><th>Trae_å›½é™…ç‰ˆ</th><th>Cursor</th><th>Kiro AI</th></tr></thead><tbody><tr><td><strong>AIæ¨¡å‹</strong></td><td>å›½é™…ç‰ˆä¸é™</td><td>Claude/Gemini-3/...</td><td>ç›®å‰å¯ä»¥æ— é™ç»­æ¯</td></tr><tr><td><em><strong>åä½œèƒ½åŠ›</strong></em></td><td>âœ… å¤šç”¨æˆ·å®æ—¶åä½œ</td><td>âŒ ä»…æ”¯æŒå•äºº/æœ¬åœ°åä½œ</td><td>âŒ ä»…æ”¯æŒå•äºº</td></tr><tr><td><em><strong>ä»£ç è§£é‡Š</strong></em></td><td>âœ… æ·±åº¦è°ƒè¯•ä¸é”™è¯¯åˆ†æ?</td><td>âœ… åŸºç¡€è§£é‡Šï¼Œä½†æ·±åº¦ä¸è¶³?</td><td>âœ… é¢†åŸŸç‰¹å®šä»£ç è§£é‡Š</td></tr><tr><td><em><strong>è‡ªç„¶è¯­è¨€ä¿®æ”¹</strong></em></td><td>âŒ éœ€é€šè¿‡æ³¨é‡Šå¼•å¯¼</td><td>âœ… æ”¯æŒç›´æ¥ä¿®æ”¹ä»£ç ï¼ˆEdit Modeï¼‰</td><td>âœ… æ”¯æŒé¢†åŸŸç‰¹å®šæŒ‡ä»¤ä¿®æ”¹</td></tr><tr><td><em><strong>å¤šè¯­è¨€æ”¯æŒ</strong></em></td><td>âœ… å…¨æ ˆæ”¯æŒï¼ˆPython/JS/Javaç­‰ï¼‰</td><td>âœ… å…¨æ ˆæ”¯æŒ</td><td>âœ… èšç„¦é¢†åŸŸè¯­è¨€ï¼ˆå¦‚C#/Python/Rï¼‰</td></tr><tr><td><em><strong>æ’ä»¶ç”Ÿæ€</strong></em></td><td>âŒ ç”Ÿæ€è¾ƒæ–°</td><td>âœ… ä¸°å¯Œçš„VS Codeæ’ä»¶å…¼å®¹</td><td>âŒ ç”Ÿæ€æœ‰é™</td></tr></tbody></table>
<h2 data-id="heading-2">ä¸‰ã€ä¼˜ç¼ºç‚¹æ·±åº¦å‰–æï¼šè°æ›´é€‚åˆä½ ï¼Ÿ</h2>
<ol>
<li>
<p>Traeï¼šå®‰å…¨ä¸åä½œçš„æ ‡æ†ï¼Œä½†é—¨æ§›è¾ƒé«˜</p>
<p>ä¼˜ç‚¹ï¼š</p>
<p>é«˜ç²¾åº¦ä»£ç ç”Ÿæˆ
ï¼šClaude 3.5 Sonnetåœ¨æ•°å­¦æ¨ç†å’Œå¤æ‚é€»è¾‘ä¸Šè¡¨ç°ä¼˜å¼‚ã€‚</p>
<p>ä¼ä¸šçº§å®‰å…¨
ï¼šæ”¯æŒç§æœ‰åŒ–éƒ¨ç½²ï¼Œæ•°æ®ä¸ç¦»å¼€æœ¬åœ°ç¯å¢ƒã€‚</p>
<p>æ·±åº¦åä½œ
ï¼šå¤šç”¨æˆ·å¯åŒæ—¶ç¼–è¾‘åŒä¸€æ–‡ä»¶ï¼ŒAIä¼šå®æ—¶åŒæ­¥ä¿®æ”¹å»ºè®®ã€‚</p>
<p>ç¼ºç‚¹ï¼š</p>
<p>å­¦ä¹ æ›²çº¿é™¡å³­
ï¼šéœ€é€‚åº”å…¶ç‹¬ç‰¹çš„åä½œæ¨¡å¼å’ŒAIäº¤äº’é€»è¾‘ã€‚</p>
<p>å®šä»·æ˜‚è´µ
ï¼šä¼ä¸šç‰ˆæŒ‰å¸­ä½æ”¶è´¹ï¼Œä¸ªäººå¼€å‘è€…æˆæœ¬è¾ƒé«˜ã€‚</p>
<p>å®šä»·ï¼š</p>
<p>ä¸ªäººå…è´¹ç‰ˆ
ï¼šé™åˆ¶åä½œäººæ•°ä¸æ¨¡å‹è°ƒç”¨æ¬¡æ•°ã€‚</p>
<p>ä¸“ä¸šç‰ˆ
ï¼š$20/æœˆ/äººï¼ˆæ”¯æŒClaude 3.5 Sonnetï¼‰ã€‚</p>
<p>ä¼ä¸šç‰ˆ
ï¼šå®šåˆ¶åŒ–æŠ¥ä»·ï¼ˆéœ€è”ç³»é”€å”®ï¼‰ã€‚</p>
</li>
<li>
<p>Cursorï¼šçµæ´»ä¸é«˜æ•ˆçš„ä»£è¡¨ï¼Œä½†ç¨³å®šæ€§å­˜ç–‘</p>
<p>ä¼˜ç‚¹ï¼š</p>
<p>å¤šæ¨¡å‹æ”¯æŒ
ï¼šå¯è‡ªç”±åˆ‡æ¢GPT-4ã€Claudeç­‰ï¼Œé€‚åº”ä¸åŒåœºæ™¯ã€‚</p>
<p>Edit Mode
ï¼šé€šè¿‡è‡ªç„¶è¯­è¨€ç›´æ¥ä¿®æ”¹ä»£ç ï¼Œæå¤§æå‡é‡æ„æ•ˆç‡ã€‚</p>
<p>ä½é—¨æ§›
ï¼šç±»ä¼¼VS Codeçš„ç•Œé¢ï¼Œæ–°æ‰‹ä¸Šæ‰‹å¿«ã€‚</p>
<p>ç¼ºç‚¹ï¼š</p>
<p>ä»£ç å‡†ç¡®æ€§æ³¢åŠ¨
ï¼šå¤æ‚é¡¹ç›®å¯èƒ½å‡ºç°é€»è¾‘é”™è¯¯ã€‚</p>
<p>ä¾èµ–ç½‘ç»œ
ï¼šéœ€è¿æ¥OpenAI/Anthropic APIï¼Œå»¶è¿Ÿè¾ƒé«˜ã€‚</p>
<p>å®šä»·ï¼š</p>
<p>å…è´¹ç‰ˆ
ï¼šé™åˆ¶æ¨¡å‹ä¸ºGPT-3.5ï¼Œæ¯æ—¥è°ƒç”¨æ¬¡æ•°æœ‰é™ã€‚</p>
<p>Proç‰ˆ
ï¼š$20/æœˆï¼ˆæ”¯æŒGPT-4/Claudeï¼Œæ— è°ƒç”¨é™åˆ¶ï¼‰ã€‚</p>
</li>
<li>
<p>Kiro AIï¼šå‚ç›´é¢†åŸŸçš„ç‹è€…ï¼Œä½†é€šç”¨æ€§ä¸è¶³</p>
<p>ä¼˜ç‚¹ï¼š</p>
<p>é¢†åŸŸä¸“å®¶
ï¼šåœ¨æ¸¸æˆå¼€å‘ã€æ•°æ®ç§‘å­¦ç­‰åœºæ™¯ä¸‹ä»£ç è´¨é‡æ˜¾è‘—ä¼˜äºé€šç”¨æ¨¡å‹ã€‚</p>
<p>ä½å¹»è§‰ç‡
ï¼šå‚ç›´æ•°æ®å¾®è°ƒå‡å°‘æ— å…³ä»£ç ç”Ÿæˆã€‚</p>
<p>å¯è§£é‡Šæ€§å¼º
ï¼šç”Ÿæˆçš„ä»£ç é™„å¸¦è¯¦ç»†æ³¨é‡Šä¸é€»è¾‘è¯´æ˜ã€‚</p>
<p>ç¼ºç‚¹ï¼š</p>
<p>è¯­è¨€æ”¯æŒæœ‰é™
ï¼šä¸»è¦èšç„¦Pythonã€C#ã€Rç­‰ã€‚</p>
<p>ç”Ÿæ€å°é—­
ï¼šç¼ºä¹æ’ä»¶ä¸æ‰©å±•èƒ½åŠ›ã€‚</p>
<p>å®šä»·ï¼š</p>
<p>å…è´¹è¯•ç”¨
ï¼š7å¤©å…¨åŠŸèƒ½ä½“éªŒã€‚</p>
<p>ä¸“ä¸šç‰ˆ
ï¼š$15/æœˆï¼ˆæŒ‰é¢†åŸŸè®¢é˜…ï¼Œå¦‚æ¸¸æˆå¼€å‘åŒ…ã€æ•°æ®ç§‘å­¦åŒ…ï¼‰ã€‚</p>
</li>
</ol>
<h2 data-id="heading-3">å››ã€å®æˆ˜æŠ€å·§ä¸æµç¨‹ï¼šå¦‚ä½•æœ€å¤§åŒ–å·¥å…·ä»·å€¼ï¼Ÿ</h2>
<ol>
<li>
<p>Traeï¼šå›¢é˜Ÿåä½œå¼€å‘æµç¨‹</p>
<p>åœºæ™¯ï¼šå¤šäººå¼€å‘ä¸€ä¸ªå¾®æœåŠ¡åç«¯ï¼ˆPython + FastAPIï¼‰ã€‚
æµç¨‹ï¼š</p>
<p>åˆå§‹åŒ–é¡¹ç›®
ï¼šé€šè¿‡Traeåˆ›å»ºGitä»“åº“ï¼Œé‚€è¯·æˆå‘˜åŠ å…¥ã€‚</p>
<p>AIè¾…åŠ©ç¼–ç 
ï¼š</p>
<p>è¾“å…¥è‡ªç„¶è¯­è¨€éœ€æ±‚ï¼ˆå¦‚â€œç”Ÿæˆä¸€ä¸ªç”¨æˆ·è®¤è¯APIâ€ï¼‰ï¼ŒAIç”Ÿæˆä»£ç æ¡†æ¶ã€‚</p>
<p>æˆå‘˜å®æ—¶ç¼–è¾‘ï¼ŒAIåŒæ­¥å»ºè®®å¹¶æ£€æµ‹å†²çªã€‚</p>
<p>è°ƒè¯•ä¸éƒ¨ç½²
ï¼š</p>
<p>ä½¿ç”¨Traeå†…ç½®è°ƒè¯•å™¨å®šä½é”™è¯¯ï¼ŒAIæä¾›ä¿®å¤æ–¹æ¡ˆã€‚</p>
<p>é€šè¿‡CI/CDæ’ä»¶ç›´æ¥éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ã€‚</p>
<p>æŠ€å·§ï¼š</p>
<p>åˆ©ç”¨/explainå‘½ä»¤è®©AIæ·±åº¦åˆ†æä»£ç é€»è¾‘ã€‚</p>
<p>è®¾ç½®â€œä»£ç å®¡æŸ¥æ¨¡å¼â€ï¼ŒAIè‡ªåŠ¨æ£€æŸ¥å›¢é˜Ÿä»£ç è§„èŒƒã€‚</p>
</li>
<li>
<p>Cursorï¼šå¿«é€ŸåŸå‹å¼€å‘æµç¨‹</p>
<p>åœºæ™¯ï¼š2å°æ—¶å†…å¼€å‘ä¸€ä¸ªTodo List Webåº”ç”¨ï¼ˆReact + TypeScriptï¼‰ã€‚
æµç¨‹ï¼š</p>
<p>æ–°å»ºé¡¹ç›®
ï¼šé€‰æ‹©Reactæ¨¡æ¿ï¼ŒAIç”ŸæˆåŸºç¡€æ–‡ä»¶ç»“æ„ã€‚</p>
<p>è‡ªç„¶è¯­è¨€å¼€å‘
ï¼š</p>
<p>è¾“å…¥â€œæ·»åŠ ä¸€ä¸ªä»»åŠ¡åˆ—è¡¨ç»„ä»¶ï¼Œæ”¯æŒæ‹–æ‹½æ’åºâ€ï¼ŒAIç”Ÿæˆå®Œæ•´ä»£ç ã€‚</p>
<p>ä½¿ç”¨Edit Modeä¿®æ”¹æ ·å¼ï¼ˆå¦‚â€œå°†æŒ‰é’®é¢œè‰²æ”¹ä¸ºè“è‰²â€ï¼‰ã€‚</p>
<p>æµ‹è¯•ä¸ä¼˜åŒ–
ï¼š</p>
<p>AIè‡ªåŠ¨ç”Ÿæˆå•å…ƒæµ‹è¯•ï¼Œå®šä½æ½œåœ¨Bugã€‚</p>
<p>é€šè¿‡â€œ/optimizeâ€å‘½ä»¤ä¼˜åŒ–æ€§èƒ½å…³é”®ä»£ç ã€‚</p>
<p>æŠ€å·§ï¼š</p>
<p>æ‹†åˆ†å¤æ‚éœ€æ±‚ä¸ºå¤šä¸ªå°ä»»åŠ¡ï¼ŒAIç”Ÿæˆæ›´ç²¾å‡†ã€‚</p>
<p>ç»“åˆVS Codeæ’ä»¶ï¼ˆå¦‚ESLintï¼‰æå‡ä»£ç è´¨é‡ã€‚</p>
</li>
<li>
<p>Kiro AIï¼šæ•°æ®ç§‘å­¦æµç¨‹ä¼˜åŒ–</p>
<p>åœºæ™¯ï¼šç”¨Pythonå¤„ç†10ä¸‡è¡Œé”€å”®æ•°æ®å¹¶ç”Ÿæˆå¯è§†åŒ–æŠ¥å‘Šã€‚
æµç¨‹ï¼š</p>
<p>æ•°æ®åŠ è½½
ï¼šè¾“å…¥â€œç”¨PandasåŠ è½½CSVæ–‡ä»¶ï¼Œå¤„ç†ç¼ºå¤±å€¼â€ï¼ŒAIç”Ÿæˆä»£ç ã€‚</p>
<p>ç‰¹å¾å·¥ç¨‹
ï¼š</p>
<p>è¾“å…¥â€œæå–æ—¥æœŸä¸­çš„å­£åº¦ä¿¡æ¯ï¼Œå¹¶åˆ›å»ºæ–°åˆ—â€ï¼ŒAIè‡ªåŠ¨å®Œæˆã€‚</p>
<p>ä½¿ç”¨â€œ/explainâ€ç†è§£æ¯ä¸€æ­¥çš„ç»Ÿè®¡æ„ä¹‰ã€‚</p>
<p>å¯è§†åŒ–ä¸æŠ¥å‘Š
ï¼š</p>
<p>è¾“å…¥â€œç”ŸæˆæŠ˜çº¿å›¾å±•ç¤ºå­£åº¦é”€å”®é¢è¶‹åŠ¿ï¼Œå¹¶ä¿å­˜ä¸ºPNGâ€ï¼ŒAIè°ƒç”¨Matplotlibå®Œæˆã€‚</p>
<p>å¯¼å‡ºJupyter Notebookæ ¼å¼çš„å®Œæ•´æŠ¥å‘Šã€‚</p>
<p>æŠ€å·§ï¼š</p>
<p>ä¼˜å…ˆä½¿ç”¨Kiro AIçš„é¢†åŸŸç‰¹å®šå‘½ä»¤ï¼ˆå¦‚/data-cleanï¼‰ã€‚</p>
<p>ç»“åˆPandas Profilingç­‰åº“æå‡åˆ†ææ•ˆç‡ã€‚</p>
</li>
</ol>
<h2 data-id="heading-4">äº”ã€æ€»ç»“</h2>
<p>å› ä¸ºå¸‚åœºä¸Šä¸»æµçš„AIæ¨¡å‹ Claude å’Œ Gemini åœ¨å…¶å®˜æ–¹ç½‘ç«™ä¸Šæ˜¯æ— æ³•ç›´æ¥æ³¨å†Œä¸­å›½åŒºçš„è´¦å·çš„ï¼ˆå›½å®¶é€‰é¡¹ä¸­æ²¡æœ‰ä¸­å›½ï¼‰ï¼Œæ‰€ä»¥è¦ä¹ˆæ‰¾ä»£ç†å»åšç›¸å…³çš„æ³¨å†Œï¼Œè¦é—¨ä½¿ç”¨githubè´¦å·ç›´æ¥ä½¿ç”¨Cursorã€Kiroï¼Œæˆ–è€…ä½¿ç”¨é‚®ä»¶æ³¨å†ŒTraeã€‚</p>
<p>è¿™äº›å·¥å…·é»˜è®¤æ•´åˆäº†ä¸»æµçš„AIæ¨¡å‹ï¼Œèƒ½å¤Ÿè®©ä½ å¿«é€Ÿçš„ä½¿ç”¨æ¨¡å‹çš„åŠŸèƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆæ˜¯ä¸€ä¸ªå‘¨æœ«åŠ ç­å¤œï¼Œå‰ç«¯çš„æˆ‘åªæƒ³å“­â€¦]]></title>    <link>https://juejin.cn/post/7587811143109197875</link>    <guid>https://juejin.cn/post/7587811143109197875</guid>    <pubDate>2025-12-26T06:54:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587811143109197875" data-draft-id="7587715742052040714" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆæ˜¯ä¸€ä¸ªå‘¨æœ«åŠ ç­å¤œï¼Œå‰ç«¯çš„æˆ‘åªæƒ³å“­â€¦"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-26T06:54:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‹—å¤´å¤§å†›ä¹‹æ±Ÿè‹åˆ†å†›"/> <meta itemprop="url" content="https://juejin.cn/user/2955079655907879"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆæ˜¯ä¸€ä¸ªå‘¨æœ«åŠ ç­å¤œï¼Œå‰ç«¯çš„æˆ‘åªæƒ³å“­â€¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2955079655907879/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‹—å¤´å¤§å†›ä¹‹æ±Ÿè‹åˆ†å†›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T06:54:13.000Z" title="Fri Dec 26 2025 06:54:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>çª—å¤–çš„éœ“è™¹ç¯æ—©å·²ç†„ç­ï¼Œå¤–å–ç›’å †åœ¨æ¡Œè§’ï¼Œå’–å•¡æ¯é‡Œåªå‰©ä¸‹å†°å†·çš„æ®‹æ¸£ã€‚æˆ‘ç›¯ç€å±å¹•ä¸Šé‚£ä¸€ç‰‡çº¢è‰²çš„æŠ¥é”™ï¼Œæ‰‹æŒ‡æ‚¬åœ¨é”®ç›˜ä¸Šï¼Œä¸çŸ¥é“è¯¥ä»å“ªé‡Œå¼€å§‹ã€‚å‡Œæ™¨ä¸¤ç‚¹çš„åŠå…¬å®¤é‡Œï¼Œåªå‰©ä¸‹æˆ‘å’Œé”®ç›˜çš„æ•²å‡»å£°ï¼Œç©ºè°ƒçš„å—¡å—¡å£°åƒæ˜¯åœ¨å˜²ç¬‘æˆ‘çš„æ— å¥ˆã€‚è¿™å·²ç»æ˜¯è¿™ä¸ªæœˆçš„ç¬¬ä¸‰ä¸ªå‘¨æœ«åŠ ç­äº†ï¼Œæˆ‘ç”šè‡³è®°ä¸æ¸…ä¸Šä¸€æ¬¡å®Œæ•´çš„å‘¨æœ«æ˜¯ä»€ä¹ˆæ—¶å€™ã€‚æœ‹å‹åœˆé‡Œï¼Œåˆ«äººåœ¨æ™’èšä¼šã€æ™’æ—…è¡Œã€æ™’ç¾é£Ÿï¼Œè€Œæˆ‘çš„æœ‹å‹åœˆï¼Œæ°¸è¿œæ˜¯é‚£å¥"åˆåœ¨åŠ ç­"ã€‚æˆ‘æ‰“å¼€æ‰‹æœºçœ‹äº†ä¸€çœ¼æ—¶é—´ï¼Œæƒ³ç€è¦ä¸è¦ç»™è‡ªå·±ç‚¹ä¸ªå¤œå®µï¼Œä½†è½¬å¿µä¸€æƒ³ï¼Œè¿˜æ˜¯ç®—äº†ï¼ŒBug è¿˜æ²¡ä¿®å®Œï¼Œå“ªæœ‰å¿ƒæƒ…åƒä¸œè¥¿ã€‚</p>
<h2 data-id="heading-0">é‚£äº›è®©äººå´©æºƒçš„ç¬é—´</h2>
<p>å‘¨äº”ä¸‹åˆäº”ç‚¹ï¼Œæˆ‘æ­£å‡†å¤‡æ”¶æ‹¾ä¸œè¥¿ä¸‹ç­ï¼Œäº§å“ç»ç†çš„æ¶ˆæ¯å¼¹äº†å‡ºæ¥ï¼š"è¿™ä¸ªå……å€¼é¡µé¢çš„ä¼˜æƒ åˆ¸æ˜¾ç¤ºé€»è¾‘æ”¹ä¸€ä¸‹ï¼Œæœˆå¡ç”¨æˆ·å’Œæ™®é€šç”¨æˆ·è¦åŒºåˆ†å¼€ï¼Œå‘¨ä¸€ä¸Šçº¿ã€‚"æˆ‘çœ‹ç€è¿™æ¡æ¶ˆæ¯ï¼Œå¿ƒé‡Œå’¯å™”ä¸€ä¸‹ï¼Œå‘¨äº”ä¸‹åˆäº”ç‚¹æéœ€æ±‚ï¼Œå‘¨ä¸€ä¸Šçº¿ï¼Œè¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿæ„å‘³ç€æˆ‘çš„å‘¨æœ«åˆæ²¡äº†ã€‚æˆ‘æ·±å¸ä¸€å£æ°”ï¼Œå›å¤äº†ä¸€ä¸ª"å¥½çš„"ï¼Œç„¶åæ‰“å¼€äº† <code>charge.vue</code> æ–‡ä»¶ã€‚2908 è¡Œä»£ç æ‰‘é¢è€Œæ¥ï¼Œå¯†å¯†éº»éº»çš„æ¨¡æ¿ã€é€»è¾‘ã€æ ·å¼æ··åœ¨ä¸€èµ·ï¼Œåƒæ˜¯ä¸€å›¢ä¹±éº»ã€‚æˆ‘å¼€å§‹åœ¨ä»£ç é‡Œæœç´¢"ä¼˜æƒ åˆ¸"ç›¸å…³çš„é€»è¾‘ï¼Œå‘ç°è¿™ä¸ªæ–‡ä»¶å·²ç»è¢«æ”¹è¿‡æ— æ•°æ¬¡äº†ï¼Œæ¯æ¬¡éœ€æ±‚å˜æ›´éƒ½ä¼šç•™ä¸‹ä¸€äº›æ³¨é‡Šæ‰çš„ä»£ç ï¼Œè¿˜æœ‰ä¸€äº›"ä¸´æ—¶æ–¹æ¡ˆ"ï¼Œç°åœ¨è¿™äº›"ä¸´æ—¶æ–¹æ¡ˆ"å·²ç»å˜æˆäº†"æ°¸ä¹…æ–¹æ¡ˆ"ã€‚</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- æœˆå¡ç”¨æˆ· --&gt;
&lt;view class="subscribe-lifepass" v-if="canUseLifePassBook == 'Y' &amp;&amp; amountCalculate"&gt;
  &lt;view class="subscribe-lifepass-title"&gt;
    {{ $t("order.lifePassTitle") }}
  &lt;/view&gt;
  &lt;view class="subscribe-lifepass-content" :class="[amountCalculate.personCount &gt; 1 ? 'disabled' : '']"&gt;
    &lt;view v-if="amountCalculate.personCount == 1"&gt;-Â¥{{ amountCalculate.price }}
    &lt;/view&gt;
    &lt;view v-else-if="amountCalculate.personCount &gt; 1"&gt;{{ $t("order.lifePassOnlyOne") }}
    &lt;/view&gt;
  &lt;/view&gt;
&lt;/view&gt;
</code></pre>
<p>çœ‹èµ·æ¥å¾ˆç®€å•å¯¹å§ï¼Ÿå°±æ˜¯ä¸€ä¸ªæ¡ä»¶åˆ¤æ–­ï¼Œæ˜¾ç¤ºæˆ–éšè—ä¼˜æƒ åˆ¸ä¿¡æ¯ã€‚ä½†å½“æˆ‘å¼€å§‹æ”¹çš„æ—¶å€™æ‰å‘ç°ï¼Œä¼˜æƒ åˆ¸é€»è¾‘å’Œæœˆå¡é€»è¾‘è€¦åˆåœ¨ä¸€èµ·ï¼Œä»·æ ¼è®¡ç®—åˆ†æ•£åœ¨ä¸‰ä¸ªä¸åŒçš„æ–¹æ³•é‡Œï¼Œè¿˜è¦è€ƒè™‘ä¸­è‹±æ–‡åˆ‡æ¢çš„é—®é¢˜ã€‚æ›´è¦å‘½çš„æ˜¯ï¼Œæ”¹å®Œè¿™é‡Œï¼Œè®¢å•ç¡®è®¤é¡µ <code>orderConfirm.vue</code> ä¹Ÿè¦åŒæ­¥æ”¹ï¼Œå› ä¸ºä¸¤ä¸ªé¡µé¢å…±ç”¨åŒä¸€å¥—ä»·æ ¼è®¡ç®—é€»è¾‘ã€‚æˆ‘èŠ±äº†æ•´æ•´ä¸€ä¸ªæ™šä¸Šï¼Œæ‰ç†æ¸…æ¥šè¿™äº›é€»è¾‘ä¹‹é—´çš„å…³ç³»ï¼Œç„¶åå°å¿ƒç¿¼ç¿¼åœ°ä¿®æ”¹ä»£ç ï¼Œç”Ÿæ€•æ”¹äº†è¿™é‡Œï¼Œé‚£é‡Œåˆå‡ºé—®é¢˜ã€‚æ¯æ”¹ä¸€è¡Œä»£ç ï¼Œæˆ‘éƒ½è¦åœ¨æµè§ˆå™¨é‡Œåˆ·æ–°å¥½å‡ æ¬¡ï¼Œç¡®ä¿æ²¡æœ‰ç ´ååŸæœ‰çš„åŠŸèƒ½ã€‚ä¸€ä¸ª"å°ç»†èŠ‚"ï¼Œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ï¼Œè¿™å°±æ˜¯å‰ç«¯å¼€å‘çš„æ—¥å¸¸ã€‚</p>
<p>å‘¨å…­æ™šä¸Šï¼Œæˆ‘æ­£åœ¨å®¶é‡Œåƒæ™šé¥­ï¼Œæ‰‹æœºçªç„¶éœ‡åŠ¨äº†èµ·æ¥ã€‚æˆ‘æ‹¿èµ·æ‰‹æœºä¸€çœ‹ï¼Œæ˜¯æµ‹è¯•åœ¨ç¾¤é‡Œ @æ‰€æœ‰äººï¼š"çº¿ä¸Šç´§æ€¥ Bugï¼ç”¨æˆ·é¢„çº¦è¯¾ç¨‹æ—¶ï¼Œé€‰æ‹©å¤šäººåä¼˜æƒ åˆ¸ä¸æ˜¾ç¤ºäº†ï¼"æˆ‘çš„å¿ƒä¸€ä¸‹å­æåˆ°äº†å—“å­çœ¼ï¼Œçº¿ä¸Š Bug æ„å‘³ç€ç”¨æˆ·æ­£åœ¨å—å½±å“ï¼Œå¿…é¡»ç«‹åˆ»ä¿®å¤ã€‚æˆ‘æ”¾ä¸‹ç¢—ç­·ï¼Œæ‰“å¼€ç”µè„‘ï¼Œè¿ä¸Š VPNï¼Œå¼€å§‹æ’æŸ¥é—®é¢˜ã€‚æˆ‘ç«‹åˆ»æ‰“å¼€ä»£ç ï¼Œåœ¨ <code>orderConfirm.vue</code> é‡Œæ‰¾åˆ°äº†ä¼˜æƒ åˆ¸æ˜¾ç¤ºçš„é€»è¾‘ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- åˆ¸ --&gt;
&lt;view class="subscribe-coupon" v-if="
  !(
    canUseLifePassBook == 'Y' &amp;&amp;
    amountCalculate &amp;&amp;
    amountCalculate.personCount == 1
  )
"&gt;
</code></pre>
<p>è¿™ä¸ªæ¡ä»¶åˆ¤æ–­çœ‹èµ·æ¥æ²¡é—®é¢˜å•Šï¼Ÿæœˆå¡ç”¨æˆ·å•äººé¢„çº¦æ—¶ä¸æ˜¾ç¤ºä¼˜æƒ åˆ¸ï¼Œå…¶ä»–æƒ…å†µæ˜¾ç¤ºã€‚æˆ‘åœ¨æœ¬åœ°ç¯å¢ƒæµ‹è¯•äº†å¥½å‡ éï¼Œéƒ½æ²¡æœ‰å¤ç°é—®é¢˜ã€‚æˆ‘å¼€å§‹æ€€ç–‘æ˜¯ä¸æ˜¯æµ‹è¯•ç¯å¢ƒçš„æ•°æ®æœ‰é—®é¢˜ï¼Œäºæ˜¯æˆ‘è®©æµ‹è¯•æŠŠçº¿ä¸Šçš„è¯·æ±‚æ•°æ®å‘ç»™æˆ‘ã€‚å½“æˆ‘ä»”ç»†æ£€æŸ¥ <code>amountCalculate</code> çš„æ•°æ®ç»“æ„æ—¶ï¼Œç»ˆäºå‘ç°äº†é—®é¢˜ï¼šåç«¯è¿”å›çš„ <code>personCount</code> å­—æ®µï¼Œåœ¨æŸäº›æƒ…å†µä¸‹æ˜¯å­—ç¬¦ä¸² <code>"1"</code>ï¼Œè€Œä¸æ˜¯æ•°å­— <code>1</code>ã€‚JavaScript çš„ <code>==</code> æ¯”è¾ƒï¼Œ<code>"1" == 1</code> æ˜¯ trueï¼Œæ‰€ä»¥å•äººé¢„çº¦æ—¶é€»è¾‘æ­£å¸¸ã€‚ä½†æ˜¯å½“ <code>personCount</code> æ˜¯å­—ç¬¦ä¸² <code>"2"</code> æ—¶ï¼Œ<code>"2" &gt; 1</code> ä¹Ÿæ˜¯ trueï¼Œå¯¼è‡´å¤šäººé¢„çº¦æ—¶ä¼˜æƒ åˆ¸è¢«éšè—äº†ã€‚åŸæ¥æ˜¯ç±»å‹è½¬æ¢çš„å‘ï¼è¿™ç§é—®é¢˜åœ¨å¼€å‘æ—¶å¾ˆéš¾å‘ç°ï¼Œå› ä¸ºæœ¬åœ°ç¯å¢ƒçš„æ•°æ®éƒ½æ˜¯è§„èŒƒçš„ï¼Œåªæœ‰çº¿ä¸Šç¯å¢ƒæ‰ä¼šå‡ºç°å„ç§å¥‡æ€ªçš„æ•°æ®æ ¼å¼ã€‚æˆ‘ç«‹åˆ»ä¿®æ”¹äº†ä»£ç ï¼ŒæŠŠ <code>==</code> æ”¹æˆäº† <code>===</code>ï¼Œå¹¶ä¸”åŠ ä¸Šäº†ç±»å‹è½¬æ¢ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¿®å¤å‰</span>
amountCalculate.<span class="hljs-property">personCount</span> == <span class="hljs-number">1</span>

<span class="hljs-comment">// ä¿®å¤å</span>
<span class="hljs-title class_">Number</span>(amountCalculate.<span class="hljs-property">personCount</span>) === <span class="hljs-number">1</span>
</code></pre>
<p>å‡Œæ™¨ä¸‰ç‚¹ï¼Œæˆ‘ç›¯ç€è¿™è¡Œä»£ç ï¼Œæƒ³èµ·äº†é‚£å¥è¯ï¼š<strong>"JavaScript æ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€"</strong>ï¼ˆç¬‘ï¼‰ã€‚ä¿®å¤å®Œè¿™ä¸ª Bugï¼Œæˆ‘åˆæµ‹è¯•äº†å¥½å‡ éï¼Œç¡®ä¿æ²¡æœ‰å…¶ä»–é—®é¢˜ï¼Œç„¶åæäº¤ä»£ç ï¼Œå‘å¸ƒåˆ°çº¿ä¸Šã€‚çœ‹ç€éƒ¨ç½²æˆåŠŸçš„æç¤ºï¼Œæˆ‘é•¿èˆ’äº†ä¸€å£æ°”ï¼Œä½†å¿ƒé‡Œå´æ²¡æœ‰ä¸€ä¸æˆå°±æ„Ÿï¼Œåªæœ‰ç–²æƒ«ã€‚è¿™ç§ç´§æ€¥ Bug ä¿®å¤ï¼Œå°±åƒæ˜¯åœ¨èµ°é’¢ä¸ï¼Œä¸€ä¸å°å¿ƒå°±ä¼šæ‰ä¸‹å»ã€‚è€Œä¸”æœ€è®©äººæ— å¥ˆçš„æ˜¯ï¼Œè¿™ç§é—®é¢˜æœ¬æ¥æ˜¯å¯ä»¥é¿å…çš„ï¼Œå¦‚æœåç«¯æ¥å£è§„èŒƒä¸€ç‚¹ï¼Œå¦‚æœå‰ç«¯åšå¥½ç±»å‹æ£€æŸ¥ï¼Œå¦‚æœæµ‹è¯•è¦†ç›–æ›´å…¨é¢ä¸€ç‚¹â€¦â€¦ä½†æ˜¯åœ¨å¿«èŠ‚å¥çš„å¼€å‘ä¸­ï¼Œè¿™äº›"å¦‚æœ"éƒ½å˜æˆäº†å¥¢æœ›ã€‚</p>
<p>æœ€è®©æˆ‘å´©æºƒçš„æ˜¯è¿™ä¸ªéœ€æ±‚ï¼š"ç”¨æˆ·å¯èƒ½æœ‰å¤šä¸ªå“ç‰Œçš„é’±åŒ…ä½™é¢ï¼Œè¦æ”¯æŒé€‰æ‹©ä¸åŒé’±åŒ…æ”¯ä»˜ã€‚"è¿™ä¸ªéœ€æ±‚å¬èµ·æ¥å¾ˆç®€å•ï¼Œä¸å°±æ˜¯ä¸€ä¸ªåˆ—è¡¨é€‰æ‹©å—ï¼Ÿä½†å®é™…ä¸Šï¼Œè¿™æ¶‰åŠåˆ°å¤æ‚çš„çŠ¶æ€ç®¡ç†å’Œæ”¯ä»˜é€»è¾‘ã€‚ç”¨æˆ·å¯ä»¥é€‰æ‹©é’±åŒ…æ”¯ä»˜ã€å¾®ä¿¡æ”¯ä»˜ï¼Œæˆ–è€…ä¸¤è€…æ··åˆæ”¯ä»˜ã€‚æ¯ç§æ”¯ä»˜æ–¹å¼éƒ½æœ‰ä¸åŒçš„é™åˆ¶æ¡ä»¶ï¼Œæ¯”å¦‚é’±åŒ…ä½™é¢ä¸è¶³æ—¶è¦æç¤ºè¡¥å·®ä»·ï¼Œæœˆå¡ç”¨æˆ·ä¸èƒ½ä½¿ç”¨æŸäº›ä¼˜æƒ åˆ¸ï¼Œå¤šäººé¢„çº¦æ—¶ä¸èƒ½ä½¿ç”¨é’±åŒ…æ”¯ä»˜ç­‰ç­‰ã€‚è¿™äº›è§„åˆ™äº¤ç»‡åœ¨ä¸€èµ·ï¼Œå½¢æˆäº†ä¸€ä¸ªå¤æ‚çš„çŠ¶æ€æœºï¼Œç¨æœ‰ä¸æ…å°±ä¼šå‡ºç°é€»è¾‘é”™è¯¯ã€‚</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template v-if="isCollapseWallet &amp;&amp; walletList.length != 0"&gt;
  &lt;view class="valueCard" v-for="(item, index) in walletList" :key="index"&gt;
    &lt;view class="valueCard-icon"&gt;
      &lt;image v-if="item.brand == 57" src="https://oss.xxx" /&gt;
      &lt;image v-if="item.brand == 58" src="https://oss.xxx" /&gt;
      &lt;image v-if="item.brand == 59" src="https://oss.xxx" /&gt;
    &lt;/view&gt;
    &lt;!-- ... --&gt;
  &lt;/view&gt;
&lt;/template&gt;
</code></pre>
<p>çœ‹èµ·æ¥å¾ˆç®€å•çš„åˆ—è¡¨æ¸²æŸ“ï¼Œä½†å®é™…ä¸Šè¦å¤„ç†çš„é€»è¾‘éå¸¸å¤æ‚ã€‚é¦–å…ˆæ˜¯çŠ¶æ€ç®¡ç†çš„é—®é¢˜ï¼Œæ¯ä¸ªé’±åŒ…çš„é€‰ä¸­çŠ¶æ€è¦äº’æ–¥ï¼Œç”¨æˆ·åªèƒ½é€‰æ‹©ä¸€ä¸ªé’±åŒ…ï¼Œè€Œä¸”é’±åŒ…æ”¯ä»˜å’Œå¾®ä¿¡æ”¯ä»˜ä¹Ÿè¦äº’æ–¥ã€‚å…¶æ¬¡æ˜¯ä½™é¢ä¸è¶³çš„åˆ¤æ–­ï¼Œå½“ç”¨æˆ·é€‰ä¸­çš„é’±åŒ…ä½™é¢ä¸è¶³æ—¶ï¼Œè¦æç¤ºç”¨æˆ·è¡¥å·®ä»·ï¼Œå¹¶ä¸”è‡ªåŠ¨å‹¾é€‰å¾®ä¿¡æ”¯ä»˜ã€‚æœ€åæ˜¯æ”¯ä»˜ç±»å‹çš„è®¡ç®—ï¼Œé’±åŒ…æ”¯ä»˜ã€å¾®ä¿¡æ”¯ä»˜ã€æ··åˆæ”¯ä»˜ï¼Œä¸‰ç§æƒ…å†µå¯¹åº”çš„ <code>payType</code> ä¸ä¸€æ ·ï¼Œåç«¯éœ€è¦æ ¹æ® <code>payType</code> æ¥å¤„ç†æ”¯ä»˜é€»è¾‘ã€‚æˆ‘èŠ±äº†æ•´æ•´ä¸€ä¸ªä¸‹åˆï¼Œæ‰ç†æ¸…æ¥šè¿™äº›çŠ¶æ€ä¹‹é—´çš„å…³ç³»ï¼Œç„¶åå†™å‡ºäº†ä¸‹é¢è¿™æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">computed</span>: {
  <span class="hljs-title function_">selectedOtherWalletAmount</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> selected = <span class="hljs-variable language_">this</span>.<span class="hljs-property">walletList</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">isPaySele</span>);
    <span class="hljs-keyword">return</span> selected ? selected.<span class="hljs-property">walletAmount</span> || <span class="hljs-number">0</span> : <span class="hljs-number">0</span>;
  },
  <span class="hljs-title function_">payType</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> isOthPay = <span class="hljs-variable language_">this</span>.<span class="hljs-property">walletList</span>.<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-property">isPaySele</span>);
    <span class="hljs-keyword">if</span> (isOthPay &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">useWxPay</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">6</span>; <span class="hljs-comment">// æ··åˆæ”¯ä»˜</span>
    }
    <span class="hljs-comment">// ... è¿˜æœ‰ä¸€å †åˆ¤æ–­</span>
  }
}
</code></pre>
<p>è¿™æ®µä»£ç çœ‹èµ·æ¥å¾ˆç®€æ´ï¼Œä½†å®é™…ä¸Šæ˜¯ç»è¿‡æ— æ•°æ¬¡é‡æ„å’Œä¼˜åŒ–çš„ç»“æœã€‚æœ€å¼€å§‹çš„ç‰ˆæœ¬ï¼Œæˆ‘ç”¨äº†ä¸€å † <code>if-else</code> æ¥åˆ¤æ–­çŠ¶æ€ï¼Œä»£ç åˆé•¿åˆéš¾ç»´æŠ¤ã€‚åæ¥æˆ‘æ”¹ç”¨ <code>computed</code> å±æ€§æ¥è®¡ç®—æ´¾ç”ŸçŠ¶æ€ï¼Œä»£ç å˜å¾—æ¸…æ™°äº†å¾ˆå¤šã€‚ä½†å³ä½¿è¿™æ ·ï¼Œæˆ‘è¿˜æ˜¯æ‹…å¿ƒä¼šæœ‰é—æ¼çš„è¾¹ç•Œæƒ…å†µï¼Œæ‰€ä»¥æˆ‘å†™äº†ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹åˆ—è¡¨ï¼ŒæŠŠæ‰€æœ‰å¯èƒ½çš„ç»„åˆéƒ½æµ‹è¯•äº†ä¸€éã€‚æµ‹è¯•çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘åˆå‘ç°äº†å¥½å‡ ä¸ªé—®é¢˜ï¼Œæ¯”å¦‚ç”¨æˆ·å¿«é€Ÿç‚¹å‡»æ—¶ä¼šè§¦å‘å¤šæ¬¡æ”¯ä»˜è¯·æ±‚ï¼Œé’±åŒ…ä½™é¢æ›´æ–°ä¸åŠæ—¶å¯¼è‡´æ˜¾ç¤ºé”™è¯¯ç­‰ç­‰ã€‚æ¯ä¿®å¤ä¸€ä¸ªé—®é¢˜ï¼Œå°±ä¼šå‘ç°æ–°çš„é—®é¢˜ï¼Œå°±åƒæ˜¯åœ¨æ‰“åœ°é¼ æ¸¸æˆä¸€æ ·ï¼Œæ°¸è¿œæ‰“ä¸å®Œã€‚</p>
<p>å‘¨æ—¥ä¸‹åˆï¼Œæˆ‘æ­£å‡†å¤‡ä¼‘æ¯ä¸€ä¸‹ï¼Œäº§å“ç»ç†åˆå‘æ¥æ¶ˆæ¯ï¼š"è‹±æ–‡ç‰ˆçš„å……å€¼é¡µé¢ï¼Œæ–‡æ¡ˆæ˜¾ç¤ºæœ‰é—®é¢˜ã€‚"æˆ‘å¿ƒé‡Œä¸€é˜µæ— å¥ˆï¼Œè¿™ä¸ªé¡¹ç›®è¦æ”¯æŒä¸­è‹±æ–‡åŒè¯­ï¼Œæ¯æ¬¡æ”¹åŠŸèƒ½éƒ½è¦æ£€æŸ¥ä¸¤éã€‚æˆ‘æ‰“å¼€ä»£ç ä¸€çœ‹ï¼Œæœç„¶åˆæ˜¯ä¸­è‹±æ–‡å¸ƒå±€ä¸ä¸€è‡´çš„é—®é¢˜ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;view class="discount" v-if="language == 'en-US'"&gt;
  &lt;text&gt;+{{ item.rewardRatio }}%&lt;/text&gt;
  &lt;text&gt;FREE!&lt;/text&gt;
&lt;/view&gt;
&lt;view class="discount" v-else&gt;
  &lt;text&gt;èµ é€&lt;/text&gt;
  &lt;text&gt;+{{ item.rewardRatio }}%&lt;/text&gt;
&lt;/view&gt;
</code></pre>
<p>ä¸­è‹±æ–‡çš„å¸ƒå±€é€»è¾‘ä¸ä¸€æ ·ï¼Œå¯¼è‡´æ ·å¼ä¹Ÿè¦åˆ†å¼€å†™ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template v-if="language == 'en-US'"&gt;
  &lt;view class="value-infos-under value-infos-under-en"&gt;
    &lt;view&gt;Regular Period Charge:&lt;/view&gt;
    &lt;view&gt;Â¥{{ item.amount }}&lt;/view&gt;
  &lt;/view&gt;
&lt;/template&gt;
&lt;view class="value-infos-under" v-else&gt;
  ç»­è´¹ä»· Â¥{{ item.amount }}
&lt;/view&gt;
</code></pre>
<p>ä¸­è‹±æ–‡çš„å¸ƒå±€é€»è¾‘ä¸ä¸€æ ·ï¼Œè‹±æ–‡ç‰ˆè¦æŠŠç™¾åˆ†æ¯”æ”¾åœ¨å‰é¢ï¼Œä¸­æ–‡ç‰ˆè¦æŠŠ"èµ é€"æ”¾åœ¨å‰é¢ã€‚è€Œä¸”å› ä¸ºè‹±æ–‡å•è¯æ¯”è¾ƒé•¿ï¼Œæ ·å¼ä¹Ÿè¦å•ç‹¬è°ƒæ•´ï¼Œä¸ç„¶ä¼šå‡ºç°æ–‡å­—æº¢å‡ºæˆ–è€…æ¢è¡Œçš„é—®é¢˜ã€‚æ•´ä¸ªé¡¹ç›®é‡Œï¼Œè¿™æ ·çš„ä¸­è‹±æ–‡åˆ¤æ–­æœ‰ä¸Šç™¾å¤„ï¼Œæ¯æ¬¡æ”¹ä¸€ä¸ªåœ°æ–¹ï¼Œéƒ½è¦æ£€æŸ¥ä¸¤éï¼Œç¡®ä¿ä¸­è‹±æ–‡ç‰ˆæœ¬éƒ½æ­£å¸¸æ˜¾ç¤ºã€‚æœ‰æ—¶å€™æˆ‘åœ¨æƒ³ï¼Œä¸ºä»€ä¹ˆä¸ç”¨å›½é™…åŒ–æ¡†æ¶æ¥ç»Ÿä¸€ç®¡ç†å¤šè¯­è¨€ï¼Ÿä½†æ˜¯é¡¹ç›®å·²ç»å¼€å‘äº†è¿™ä¹ˆä¹…ï¼Œé‡æ„çš„æˆæœ¬å¤ªé«˜äº†ï¼Œåªèƒ½ç»§ç»­ç”¨è¿™ç§"åœŸåŠæ³•"ã€‚æ¯æ¬¡çœ‹åˆ°è¿™äº› <code>v-if="language == 'en-US'"</code> çš„åˆ¤æ–­ï¼Œæˆ‘éƒ½è§‰å¾—å¾ˆæ— å¥ˆï¼Œè¿™å°±æ˜¯æŠ€æœ¯å€ºçš„ä»£ä»·ã€‚</p>
<h2 data-id="heading-1">é‚£äº›æ— åŠ›çš„ç¬é—´</h2>
<p>åšå‰ç«¯å¼€å‘è¿™ä¹ˆå¤šå¹´ï¼Œæˆ‘é‡åˆ°è¿‡æ— æ•°æ¬¡è®©äººæ— åŠ›çš„ç¬é—´ã€‚æœ€å¸¸è§çš„å°±æ˜¯éœ€æ±‚å˜åŠ¨ï¼Œäº§å“ç»ç†è¯´"è¿™ä¸ªåŠŸèƒ½å…ˆä¸åšäº†ï¼Œæ”¹æˆé‚£ä¸ª"ï¼Œæˆ–è€…"ä¸Šå‘¨è¯´çš„é‚£ä¸ªéœ€æ±‚ï¼Œè¿™å‘¨åˆè¦æ”¹å›æ¥"ï¼Œç”šè‡³è¿˜æœ‰"èƒ½ä¸èƒ½åŠ ä¸ªå°åŠŸèƒ½ï¼Ÿå°±ä¸€ä¸ªæŒ‰é’®çš„äº‹"ã€‚æ¯æ¬¡å¬åˆ°è¿™äº›è¯ï¼Œæˆ‘éƒ½æƒ³é—®ï¼šä½ çŸ¥é“æˆ‘ä¸ºäº†è¿™ä¸ªåŠŸèƒ½ï¼Œæ”¹äº†å¤šå°‘æ–‡ä»¶å—ï¼Ÿä½ çŸ¥é“æˆ‘ä¸ºäº†å®ç°è¿™ä¸ªé€»è¾‘ï¼Œç†¬äº†å¤šå°‘ä¸ªå¤œå—ï¼Ÿä½†æ˜¯æˆ‘çŸ¥é“ï¼Œé—®äº†ä¹Ÿæ²¡ç”¨ï¼Œå› ä¸ºåœ¨ä»–ä»¬çœ¼é‡Œï¼Œå‰ç«¯å°±æ˜¯"æ”¹æ”¹é¡µé¢"ï¼Œå¾ˆç®€å•çš„äº‹æƒ…ã€‚ä»–ä»¬ä¸çŸ¥é“ï¼Œæ¯ä¸€ä¸ªæŒ‰é’®èƒŒåï¼Œéƒ½æœ‰å¤æ‚çš„çŠ¶æ€ç®¡ç†ã€æ•°æ®äº¤äº’ã€å¼‚å¸¸å¤„ç†ã€‚ä»–ä»¬ä¸çŸ¥é“ï¼Œæ¯ä¸€æ¬¡éœ€æ±‚å˜æ›´ï¼Œéƒ½å¯èƒ½å¯¼è‡´æ•´ä¸ªç³»ç»Ÿçš„é‡æ„ã€‚</p>
<p>è¿˜æœ‰æ²Ÿé€šä¸Šçš„å›°éš¾ã€‚æˆ‘è¯´"è¿™ä¸ªéœ€æ±‚æŠ€æœ¯ä¸Šæœ‰é£é™©ï¼Œéœ€è¦é‡æ„"ï¼Œè€æ¿è¯´"ç”¨æˆ·ç­‰ä¸äº†ï¼Œå…ˆä¸Šçº¿å†è¯´"ã€‚æˆ‘è¯´"ä½†æ˜¯è¿™æ ·ä¼šç•™ä¸‹æŠ€æœ¯å€º"ï¼Œè€æ¿è¯´"æŠ€æœ¯å€ºä»¥åå†è¿˜"ã€‚å¯æ˜¯"ä»¥å"ï¼Œæ°¸è¿œä¸ä¼šæ¥ã€‚æŠ€æœ¯å€ºå°±åƒæ»šé›ªçƒä¸€æ ·ï¼Œè¶Šæ»šè¶Šå¤§ï¼Œæœ€åå˜æˆäº†ä¸€ä¸ªæ— æ³•ç»´æŠ¤çš„å·¨å‹é¡¹ç›®ã€‚æ¯æ¬¡æ‰“å¼€ä»£ç ï¼Œéƒ½èƒ½çœ‹åˆ°å„ç§"ä¸´æ—¶æ–¹æ¡ˆ"ã€"å¾…ä¼˜åŒ–"ã€"TODO"çš„æ³¨é‡Šï¼Œè¿™äº›æ³¨é‡Šå°±åƒæ˜¯å¢“ç¢‘ä¸€æ ·ï¼Œè®°å½•ç€é‚£äº›è¢«æ”¾å¼ƒçš„ç†æƒ³ã€‚æˆ‘çŸ¥é“ï¼Œæ€»æœ‰ä¸€å¤©ï¼Œè¿™äº›æŠ€æœ¯å€ºä¼šçˆ†å‘ï¼Œåˆ°é‚£æ—¶å€™ï¼Œå¯èƒ½å°±ä¸æ˜¯åŠ ç­èƒ½è§£å†³çš„é—®é¢˜äº†ï¼Œè€Œæ˜¯è¦æ¨å€’é‡æ¥ã€‚</p>
<p>ä¸Šçº¿çš„å‹åŠ›ä¹Ÿè®©äººå–˜ä¸è¿‡æ°”æ¥ã€‚æµ‹è¯•è¯´"è¿™ä¸ª Bug å¿…é¡»ä»Šå¤©ä¿®å®Œï¼Œæ˜å¤©è¦ä¸Šçº¿"ï¼Œæˆ‘è¯´"ä½†æ˜¯æˆ‘è¿˜æ²¡æµ‹å®Œå…¶ä»–åŠŸèƒ½"ï¼Œæµ‹è¯•è¯´"é‚£ä½ åŠ ç­æµ‹"ã€‚äºæ˜¯ï¼Œåˆæ˜¯ä¸€ä¸ªåŠ ç­å¤œã€‚æœ‰æ—¶å€™æˆ‘åœ¨æƒ³ï¼Œä¸ºä»€ä¹ˆæ€»æ˜¯è¿™ä¹ˆèµ¶ï¼Ÿä¸ºä»€ä¹ˆä¸èƒ½å¤šç»™ä¸€ç‚¹æ—¶é—´ï¼Œè®©æˆ‘ä»¬æŠŠä»£ç å†™å¾—æ›´å¥½ä¸€ç‚¹ï¼Ÿä½†æ˜¯æˆ‘çŸ¥é“ï¼Œåœ¨äº’è”ç½‘è¡Œä¸šï¼Œæ—¶é—´å°±æ˜¯é‡‘é’±ï¼Œå¿«é€Ÿè¿­ä»£æ‰æ˜¯ç‹é“ã€‚ç”¨æˆ·ä¸ä¼šå…³å¿ƒä½ çš„ä»£ç å†™å¾—å¤šä¼˜é›…ï¼Œä»–ä»¬åªå…³å¿ƒåŠŸèƒ½èƒ½ä¸èƒ½ç”¨ï¼ŒBug ä¼šä¸ä¼šå½±å“ä½“éªŒã€‚æ‰€ä»¥æˆ‘ä»¬åªèƒ½åœ¨æœ‰é™çš„æ—¶é—´é‡Œï¼Œå°½å¯èƒ½åœ°ä¿è¯è´¨é‡ï¼Œç„¶åç¥ˆç¥·ä¸è¦å‡ºé—®é¢˜ã€‚</p>
<h2 data-id="heading-2">æŠ€æœ¯éš¾ç‚¹ï¼šVue ç»„ä»¶çš„çŠ¶æ€ç®¡ç†</h2>
<p>è¿™æ¬¡åŠ ç­ï¼Œæœ€å¤§çš„æŠ€æœ¯éš¾ç‚¹æ˜¯å¤šä¸ªç»„ä»¶ä¹‹é—´çš„çŠ¶æ€åŒæ­¥ã€‚æ•´ä¸ªé¢„çº¦æµç¨‹æ˜¯è¿™æ ·çš„ï¼šç”¨æˆ·åœ¨è¯¾ç¨‹åˆ—è¡¨é¡µé€‰æ‹©è¯¾ç¨‹ï¼Œè·³è½¬åˆ°è®¢å•ç¡®è®¤é¡µï¼Œé€‰æ‹©ä¼˜æƒ åˆ¸ï¼Œé€‰æ‹©æ”¯ä»˜æ–¹å¼ï¼Œæœ€åæäº¤è®¢å•ã€‚è¿™ä¸ªæµç¨‹çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½†å®é™…ä¸Šæ¶‰åŠåˆ°å¤§é‡çš„çŠ¶æ€ç®¡ç†ã€‚è¯¾ç¨‹ä¿¡æ¯ï¼ˆ<code>courseInfo</code>ï¼‰ã€ä»·æ ¼è®¡ç®—ï¼ˆ<code>amountCalculate</code>ï¼‰ã€ä¼˜æƒ åˆ¸åˆ—è¡¨ï¼ˆ<code>couponList</code>ï¼‰ã€æ”¯ä»˜æ–¹å¼ï¼ˆ<code>useWalletPay</code>, <code>useWxPay</code>, <code>walletList</code>ï¼‰ã€ç”¨æˆ·ä¿¡æ¯ï¼ˆ<code>vipInfo</code>ï¼‰ï¼Œè¿™äº›çŠ¶æ€ä¹‹é—´ç›¸äº’ä¾èµ–ï¼Œä»»ä½•ä¸€ä¸ªçŠ¶æ€çš„å˜åŒ–éƒ½å¯èƒ½å½±å“å…¶ä»–çŠ¶æ€ã€‚æ¯”å¦‚ç”¨æˆ·é€‰æ‹©äº†ä¼˜æƒ åˆ¸ï¼Œä»·æ ¼å°±è¦é‡æ–°è®¡ç®—ï¼›ç”¨æˆ·åˆ‡æ¢äº†æ”¯ä»˜æ–¹å¼ï¼Œå¯ç”¨çš„ä¼˜æƒ åˆ¸åˆ—è¡¨ä¹Ÿè¦æ›´æ–°ï¼›ç”¨æˆ·ä¿®æ”¹äº†é¢„çº¦äººæ•°ï¼Œæ”¯ä»˜æ–¹å¼çš„é™åˆ¶æ¡ä»¶ä¹Ÿè¦æ”¹å˜ã€‚è¿™ç§å¤æ‚çš„çŠ¶æ€ä¾èµ–å…³ç³»ï¼Œå¦‚æœå¤„ç†ä¸å¥½ï¼Œå°±ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€ç•Œé¢æ˜¾ç¤ºé”™è¯¯ç­‰é—®é¢˜ã€‚</p>
<p>æˆ‘çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ Vue çš„å“åº”å¼ç³»ç»Ÿæ¥ç®¡ç†çŠ¶æ€ã€‚é¦–å…ˆï¼Œæˆ‘æŠŠæ‰€æœ‰çš„æ´¾ç”ŸçŠ¶æ€éƒ½ç”¨ <code>computed</code> å±æ€§æ¥è®¡ç®—ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿çŠ¶æ€çš„ä¸€è‡´æ€§ã€‚æ¯”å¦‚åˆ¤æ–­æ˜¯å¦å¯ä»¥ä½¿ç”¨ä¼˜æƒ åˆ¸ï¼Œæˆ‘ä¸æ˜¯åœ¨æ¯ä¸ªåœ°æ–¹éƒ½å†™ä¸€éåˆ¤æ–­é€»è¾‘ï¼Œè€Œæ˜¯å®šä¹‰ä¸€ä¸ª <code>computed</code> å±æ€§ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">computed</span>: {
  <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦å¯ä»¥ä½¿ç”¨ä¼˜æƒ åˆ¸</span>
  <span class="hljs-title function_">canUseCoupon</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">couponList</span>.<span class="hljs-property">length</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">couponList</span>.<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> e.<span class="hljs-property">canUse</span> === <span class="hljs-string">"Y"</span>);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },
  
  <span class="hljs-comment">// è®¡ç®—é€‰ä¸­çš„å…¶ä»–é’±åŒ…ä½™é¢</span>
  <span class="hljs-title function_">selectedOtherWalletAmount</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> selected = <span class="hljs-variable language_">this</span>.<span class="hljs-property">walletList</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">isPaySele</span>);
    <span class="hljs-keyword">return</span> selected ? selected.<span class="hljs-property">walletAmount</span> || <span class="hljs-number">0</span> : <span class="hljs-number">0</span>;
  },
  
  <span class="hljs-comment">// åŠ¨æ€è®¡ç®—æŒ‰é’®æ ·å¼</span>
  <span class="hljs-title function_">getFooterBtnClass</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> classList = [<span class="hljs-string">'footer-content-btn'</span>];
    <span class="hljs-keyword">const</span> status = <span class="hljs-variable language_">this</span>.<span class="hljs-property">courseInfo</span>.<span class="hljs-property">bookStatus</span>;
    <span class="hljs-keyword">const</span> isDisabled =
      !<span class="hljs-variable language_">this</span>.<span class="hljs-property">isAgree</span> ||
      ![<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>].<span class="hljs-title function_">includes</span>(status) ||
      (status === <span class="hljs-number">2</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">preAppointmentCount</span> &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">canChooseNums</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span>]);
    
    <span class="hljs-keyword">if</span> (isDisabled) {
      classList.<span class="hljs-title function_">push</span>(<span class="hljs-string">'disabled'</span>);
    }
    <span class="hljs-keyword">return</span> classList;
  }
}
</code></pre>
<p>è¿™æ ·ï¼Œæ— è®ºåœ¨å“ªé‡Œéœ€è¦åˆ¤æ–­æ˜¯å¦å¯ä»¥ä½¿ç”¨ä¼˜æƒ åˆ¸ï¼Œæˆ‘éƒ½å¯ä»¥ç›´æ¥ç”¨ <code>this.canUseCoupon</code>ï¼Œè€Œä¸ç”¨æ‹…å¿ƒé€»è¾‘ä¸ä¸€è‡´çš„é—®é¢˜ã€‚è€Œä¸” <code>computed</code> å±æ€§æ˜¯æœ‰ç¼“å­˜çš„ï¼Œåªæœ‰ä¾èµ–çš„æ•°æ®å˜åŒ–æ—¶æ‰ä¼šé‡æ–°è®¡ç®—ï¼Œæ€§èƒ½ä¹Ÿæ›´å¥½ã€‚</p>
<p>å…¶æ¬¡ï¼Œæˆ‘æŠŠæ‰€æœ‰çš„çŠ¶æ€å˜æ›´éƒ½å°è£…æˆæ–¹æ³•ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹æ•°æ®ã€‚æ¯”å¦‚åˆ‡æ¢æ”¯ä»˜æ–¹å¼ï¼Œæˆ‘å®šä¹‰äº†ä¸€ä¸ª <code>changePayType</code> æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">methods</span>: {
  <span class="hljs-comment">// åˆ‡æ¢æ”¯ä»˜æ–¹å¼</span>
  <span class="hljs-title function_">changePayType</span>(<span class="hljs-params">type, item, index</span>) {
    <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'wallet'</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">useWalletPay</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">useWalletPay</span>;
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">useWalletPay</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">useWxPay</span> = <span class="hljs-literal">false</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">walletList</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">w</span> =&gt;</span> w.<span class="hljs-property">isPaySele</span> = <span class="hljs-literal">false</span>);
      }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'wx'</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">useWxPay</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">useWxPay</span>;
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">useWxPay</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">useWalletPay</span> = <span class="hljs-literal">false</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">walletList</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">w</span> =&gt;</span> w.<span class="hljs-property">isPaySele</span> = <span class="hljs-literal">false</span>);
      }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'otherPay'</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">walletList</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">w, i</span>) =&gt;</span> {
        w.<span class="hljs-property">isPaySele</span> = i === index ? !w.<span class="hljs-property">isPaySele</span> : <span class="hljs-literal">false</span>;
      });
      <span class="hljs-keyword">if</span> (item.<span class="hljs-property">isPaySele</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">useWalletPay</span> = <span class="hljs-literal">false</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">useWxPay</span> = <span class="hljs-literal">false</span>;
      }
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAmountCalculate</span>(); <span class="hljs-comment">// é‡æ–°è®¡ç®—ä»·æ ¼</span>
  }
}
</code></pre>
<p>è¿™ä¸ªæ–¹æ³•çœ‹èµ·æ¥å¾ˆé•¿ï¼Œä½†å®é™…ä¸Šé€»è¾‘å¾ˆæ¸…æ™°ï¼šæ ¹æ®ä¸åŒçš„æ”¯ä»˜ç±»å‹ï¼Œæ›´æ–°å¯¹åº”çš„çŠ¶æ€ï¼Œå¹¶ä¸”ç¡®ä¿çŠ¶æ€ä¹‹é—´çš„äº’æ–¥å…³ç³»ã€‚æœ€åè°ƒç”¨ <code>getAmountCalculate()</code> é‡æ–°è®¡ç®—ä»·æ ¼ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œæ‰€æœ‰çš„çŠ¶æ€å˜æ›´éƒ½åœ¨ä¸€ä¸ªåœ°æ–¹å¤„ç†ï¼Œä¸ä¼šå‡ºç°é—æ¼æˆ–è€…ä¸ä¸€è‡´çš„æƒ…å†µã€‚è€Œä¸”å¦‚æœä»¥åéœ€è¦ä¿®æ”¹é€»è¾‘ï¼Œåªéœ€è¦æ”¹è¿™ä¸€ä¸ªæ–¹æ³•å°±å¯ä»¥äº†ï¼Œä¸ç”¨åˆ°å¤„æ‰¾ä»£ç ã€‚</p>
<p>æœ€åï¼Œæˆ‘ä½¿ç”¨ <code>watch</code> æ¥ç›‘å¬å…³é”®çŠ¶æ€çš„å˜åŒ–ï¼Œè‡ªåŠ¨è§¦å‘ç›¸å…³çš„æ›´æ–°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">watch</span>: {
  <span class="hljs-title function_">currentIndex</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// äººæ•°å˜åŒ–æ—¶ï¼Œé‡æ–°è®¡ç®—ä»·æ ¼</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAmountCalculate</span>();
  },
  <span class="hljs-title function_">couponCodeList</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ä¼˜æƒ åˆ¸å˜åŒ–æ—¶ï¼Œé‡æ–°è®¡ç®—ä»·æ ¼</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAmountCalculate</span>();
  }
}
</code></pre>
<p>è¿™æ ·ï¼Œå½“ç”¨æˆ·ä¿®æ”¹é¢„çº¦äººæ•°æˆ–è€…é€‰æ‹©ä¼˜æƒ åˆ¸æ—¶ï¼Œä»·æ ¼ä¼šè‡ªåŠ¨é‡æ–°è®¡ç®—ï¼Œä¸éœ€è¦æ‰‹åŠ¨è°ƒç”¨æ–¹æ³•ã€‚Vue çš„å“åº”å¼ç³»ç»Ÿä¼šè‡ªåŠ¨è¿½è¸ªä¾èµ–å…³ç³»ï¼Œç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ã€‚</p>
<p>å½“ç„¶ï¼Œåœ¨å®ç°è¿™äº›åŠŸèƒ½çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä¹Ÿè¸©è¿‡ä¸å°‘å‘ã€‚æœ€å¸¸è§çš„å°±æ˜¯æ•°æ®ç±»å‹ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œåç«¯è¿”å›çš„æ•°å­—å­—æ®µï¼Œæœ‰æ—¶æ˜¯å­—ç¬¦ä¸²ï¼Œæœ‰æ—¶æ˜¯æ•°å­—ï¼Œå¯¼è‡´æ¯”è¾ƒå’Œè®¡ç®—æ—¶å‡ºç°æ„å¤–çš„ç»“æœã€‚è¿˜æœ‰å¼‚æ­¥æ•°æ®ä¾èµ–çš„é—®é¢˜ï¼Œä»·æ ¼è®¡ç®—ä¾èµ–å¤šä¸ªæ¥å£è¿”å›çš„æ•°æ®ï¼Œå¦‚æœåŠ è½½é¡ºåºä¸å¯¹ï¼Œå°±ä¼šå‡ºç°æ•°æ®ä¸å®Œæ•´æˆ–è€…è®¡ç®—é”™è¯¯çš„æƒ…å†µã€‚æˆ‘ä¸å¾—ä¸åœ¨æ¯ä¸ªæ¥å£è°ƒç”¨åéƒ½åŠ ä¸Š <code>loading</code> çŠ¶æ€çš„åˆ¤æ–­ï¼Œç¡®ä¿æ‰€æœ‰æ•°æ®éƒ½åŠ è½½å®Œæˆåå†è¿›è¡Œè®¡ç®—ã€‚å¦å¤–ï¼Œå¤šä¸ªæ”¯ä»˜æ–¹å¼ä¹‹é—´çš„äº’æ–¥é€»è¾‘ä¹Ÿå¾ˆå®¹æ˜“å‡ºé”™ï¼Œç¨ä¸æ³¨æ„å°±ä¼šå‡ºç°ä¸¤ä¸ªæ”¯ä»˜æ–¹å¼åŒæ—¶é€‰ä¸­ï¼Œæˆ–è€…éƒ½æ²¡æœ‰é€‰ä¸­çš„æƒ…å†µã€‚ä¸ºäº†é¿å…è¿™äº›é—®é¢˜ï¼Œæˆ‘åœ¨æ¯æ¬¡çŠ¶æ€å˜æ›´åéƒ½ä¼šæ‰“å°æ—¥å¿—ï¼Œæ£€æŸ¥çŠ¶æ€æ˜¯å¦æ­£ç¡®ï¼Œè¿™æ ·å¯ä»¥åŠæ—¶å‘ç°é—®é¢˜ã€‚</p>
<h2 data-id="heading-3">å‡Œæ™¨ä¸€ç‚¹çš„åæ€</h2>
<p>è°ƒè¯•åˆ°å‡Œæ™¨ä¸€ç‚¹å¤šï¼Œæˆ‘è¿˜åæ€ä¸ªé¸¡æ¯›å•Šï¼ŒæŠ“å•Šç¡è§‰å§ï¼ï¼ï¼</p>
<p>å¯¹ç€å±å¹•å‘å‘†ã€‚æˆ‘æƒ³èµ·äº†é‚£äº›è¢«æˆ‘é”™è¿‡çš„å‘¨æœ«ï¼Œé‚£äº›æ²¡èƒ½å‚åŠ çš„èšä¼šï¼Œé‚£äº›æ²¡èƒ½é™ªä¼´å®¶äººçš„æ—¶å…‰ã€‚æˆ‘æƒ³èµ·äº†æœ‹å‹é—®æˆ‘"ä½ æ€ä¹ˆæ€»æ˜¯åœ¨åŠ ç­"æ—¶ï¼Œæˆ‘æ— å¥ˆçš„ç¬‘å®¹ã€‚æˆ‘æƒ³èµ·äº†å¥³æœ‹å‹è¯´"ä½ æ˜¯ä¸æ˜¯æ›´çˆ±ä½ çš„ä»£ç "æ—¶ï¼Œæˆ‘æ— è¨€çš„æ²‰é»˜ã€‚æˆ‘çŸ¥é“ï¼Œè¿™ä¸æ˜¯æˆ‘æƒ³è¦çš„ç”Ÿæ´»ï¼Œä½†æˆ‘åˆèƒ½æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™å°±æ˜¯äº’è”ç½‘è¡Œä¸šçš„ç°çŠ¶ï¼Œè¿™å°±æ˜¯å‰ç«¯å¼€å‘çš„æ—¥å¸¸ã€‚æˆ‘åªèƒ½å‘Šè¯‰è‡ªå·±ï¼Œå†åšæŒä¸€ä¸‹ï¼Œå†åšæŒä¸€ä¸‹ï¼Œæ€»ä¼šå¥½èµ·æ¥çš„ã€‚ä½†æˆ‘å¿ƒé‡Œæ¸…æ¥šï¼Œè¿™æ ·çš„"å†åšæŒä¸€ä¸‹"ï¼Œå¯èƒ½ä¼šæŒç»­å¾ˆä¹…å¾ˆä¹…ã€‚</p>
<h2 data-id="heading-4">å†™åœ¨æœ€å</h2>
<p>å¦‚æœä½ ä¹Ÿæ˜¯å‰ç«¯å¼€å‘ï¼Œå¦‚æœä½ ä¹Ÿåœ¨åŠ ç­ï¼Œå¦‚æœä½ ä¹Ÿé‡åˆ°è¿‡è¿™äº›é—®é¢˜ï¼Œé‚£ä¹ˆè¯·è®°ä½ï¼šä½ ä¸æ˜¯ä¸€ä¸ªäººã€‚æˆ‘ä»¬éƒ½åœ¨è¿™æ¡è·¯ä¸Šï¼Œä¸€è¾¹å†™ç€ Bugï¼Œä¸€è¾¹ä¿®ç€ Bugï¼Œä¸€è¾¹éª‚ç€äº§å“ç»ç†ï¼Œä¸€è¾¹ç»§ç»­åŠ ç­ã€‚æˆ‘ä»¬éƒ½ç»å†è¿‡éœ€æ±‚å˜æ›´çš„æ— å¥ˆï¼Œéƒ½ç»å†è¿‡çº¿ä¸Š Bug çš„ææ…Œï¼Œéƒ½ç»å†è¿‡æŠ€æœ¯å€ºçš„æŠ˜ç£¨ã€‚æˆ‘ä»¬éƒ½åœ¨æ·±å¤œé‡Œå¯¹ç€å±å¹•å‘å‘†ï¼Œéƒ½åœ¨å‡Œæ™¨é‡Œæ€€ç–‘äººç”Ÿï¼Œéƒ½åœ¨å‘¨æœ«é‡ŒåŠ ç­åˆ°å¤©äº®ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ä¹Ÿåœ¨æˆé•¿ã€‚æ¯ä¸€ä¸ªé€šå®µè°ƒè¯•çš„ Bugï¼Œéƒ½è®©æˆ‘ä»¬å¯¹ä»£ç æœ‰äº†æ›´æ·±çš„ç†è§£ï¼Œè®©æˆ‘ä»¬å­¦ä¼šäº†å¦‚ä½•æ’æŸ¥é—®é¢˜ï¼Œå¦‚ä½•ä¼˜åŒ–æ€§èƒ½ï¼Œå¦‚ä½•å¤„ç†è¾¹ç•Œæƒ…å†µã€‚æ¯ä¸€æ¬¡éœ€æ±‚å˜æ›´ï¼Œéƒ½è®©æˆ‘ä»¬å­¦ä¼šäº†æ›´çµæ´»çš„æ¶æ„è®¾è®¡ï¼Œè®©æˆ‘ä»¬æ‡‚å¾—äº†å¦‚ä½•è§£è€¦ä»£ç ï¼Œå¦‚ä½•æé«˜å¯ç»´æŠ¤æ€§ï¼Œå¦‚ä½•åº”å¯¹å˜åŒ–ã€‚æ¯ä¸€ä¸ªä¸Šçº¿çš„é¡¹ç›®ï¼Œéƒ½æ˜¯æˆ‘ä»¬æŠ€æœ¯èƒ½åŠ›çš„è¯æ˜ï¼Œéƒ½æ˜¯æˆ‘ä»¬åŠªåŠ›çš„ç»“æœï¼Œéƒ½æ˜¯æˆ‘ä»¬ä»·å€¼çš„ä½“ç°ã€‚</p>
<p>æ‰€ä»¥ï¼ŒåŠ æ²¹å§ï¼Œå‰ç«¯äººã€‚è™½ç„¶åˆæ˜¯ä¸€ä¸ªå‘¨æœ«åŠ ç­å¤œï¼Œè™½ç„¶æˆ‘åªæƒ³å“­ï¼Œä½†æ˜å¤©å¤ªé˜³å‡èµ·çš„æ—¶å€™ï¼Œæˆ‘è¿˜æ˜¯ä¼šç»§ç»­å†™ä»£ç ã€‚å› ä¸ºï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„å·¥ä½œï¼Œä¹Ÿæ˜¯æˆ‘ä»¬çš„çƒ­çˆ±ã€‚æˆ‘ä»¬çƒ­çˆ±åˆ›é€ çš„è¿‡ç¨‹ï¼Œçƒ­çˆ±è§£å†³é—®é¢˜çš„å¿«æ„Ÿï¼Œçƒ­çˆ±çœ‹åˆ°äº§å“ä¸Šçº¿çš„æˆå°±æ„Ÿã€‚å³ä½¿æœ‰å†å¤šçš„åŠ ç­ï¼Œå†å¤šçš„ Bugï¼Œå†å¤šçš„æŠ€æœ¯å€ºï¼Œæˆ‘ä»¬ä¾ç„¶ä¼šåšæŒä¸‹å»ã€‚å› ä¸ºæˆ‘ä»¬çŸ¥é“ï¼Œæ¯ä¸€è¡Œä»£ç ï¼Œéƒ½åœ¨æ”¹å˜ç€è¿™ä¸ªä¸–ç•Œï¼›æ¯ä¸€ä¸ªåŠŸèƒ½ï¼Œéƒ½åœ¨æœåŠ¡ç€åƒåƒä¸‡ä¸‡çš„ç”¨æˆ·ï¼›æ¯ä¸€æ¬¡ä¼˜åŒ–ï¼Œéƒ½åœ¨è®©äº§å“å˜å¾—æ›´å¥½ã€‚è¿™å°±æ˜¯æˆ‘ä»¬çš„ä»·å€¼ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„æ„ä¹‰ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ç»§ç»­å‰è¡Œçš„åŠ¨åŠ›ã€‚</p>
<hr/>
<p><em>å†™äºå‡Œæ™¨  1:23ï¼ŒåŠå…¬å®¤çš„ç¯è¿˜äº®ç€ï¼Œå¤–å–ç›’å·²ç»å †æˆäº†å°å±±ï¼Œä½†ä»£ç ï¼Œç»ˆäºè·‘é€šäº†ã€‚æ™šå®‰ï¼Œä¸–ç•Œã€‚æ™šå®‰ï¼ŒBugã€‚æ™šå®‰ï¼Œæˆ‘çš„å‘¨æœ«ã€‚æ˜å¤©ï¼Œåˆæ˜¯æ–°çš„ä¸€å¤©ï¼Œåˆæ˜¯æ–°çš„æŒ‘æˆ˜ï¼Œåˆæ˜¯æ–°çš„ä»£ç ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¯å‘¨æŠ€æœ¯åŠ é€Ÿå™¨ï¼šUltraRAGï¼šçªç ´ä¼ ç»ŸRAGæ¶æ„çš„åˆ›æ–°ä¸å®è·µ]]></title>    <link>https://juejin.cn/post/7587675306658840576</link>    <guid>https://juejin.cn/post/7587675306658840576</guid>    <pubDate>2025-12-26T06:53:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587675306658840576" data-draft-id="7587675443443105832" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¯å‘¨æŠ€æœ¯åŠ é€Ÿå™¨ï¼šUltraRAGï¼šçªç ´ä¼ ç»ŸRAGæ¶æ„çš„åˆ›æ–°ä¸å®è·µ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-26T06:53:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™ºè§AGI"/> <meta itemprop="url" content="https://juejin.cn/user/4145611877132986"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¯å‘¨æŠ€æœ¯åŠ é€Ÿå™¨ï¼šUltraRAGï¼šçªç ´ä¼ ç»ŸRAGæ¶æ„çš„åˆ›æ–°ä¸å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4145611877132986/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™ºè§AGI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T06:53:12.000Z" title="Fri Dec 26 2025 06:53:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>æ¬¢è¿æ¥åˆ°æˆ‘ä»¬çš„ ã€Œæ¯å‘¨æŠ€æœ¯åŠ é€Ÿå™¨ã€</strong>Â <strong>ä¸“æ ï¼</strong></p>
<p>æ¯å‘¨äº”ï¼Œæˆ‘ä»¬éƒ½ä¼šå›´ç»•ä¸€ä¸ªå‰æ²¿æŠ€æœ¯ä¸»é¢˜ï¼Œå±•å¼€ä¸€åœºæ·±åº¦çš„å†…éƒ¨æŠ€æœ¯åˆ†äº«ä¼šã€‚ä¸ä»…æ˜¯ä¸ºäº†å›¢é˜Ÿå†…éƒ¨çš„ç¢°æ’ä¸æˆé•¿ï¼Œä¹Ÿå¸Œæœ›é€šè¿‡è¿™æ ·çš„å½¢å¼ï¼Œå°†æˆ‘ä»¬çš„æ€è€ƒä¸å®è·µè®°å½•ã€æ²‰æ·€ã€åˆ†äº«ç»™æ›´å¤šåŒè¡Œè€…ã€‚</p>
<p>æœ¬å‘¨ï¼Œæˆ‘ä»¬æ¢è®¨çš„ä¸»é¢˜æ˜¯ï¼š<strong>åŸºäº Mcp çš„ Rag æ¶æ„é©æ–°ï¼šultra Rag çš„å®è·µä¸æ€è€ƒ</strong></p>
<p>æœ¬æ¬¡æŠ€æœ¯åˆ†äº«ä¼šå›´ç»• UltraRAG å±•å¼€è®¨è®ºã€‚UltraRAG å¹¶éåœ¨â€œç”Ÿæˆæ•ˆæœâ€å±‚é¢è¿›è¡Œå±€éƒ¨ä¼˜åŒ–ï¼Œè€Œæ˜¯è¯•å›¾å›ç­”ä¸€ä¸ªæ›´ä¸Šå±‚ã€æ›´é•¿æœŸçš„é—®é¢˜ï¼š</p>
<p>RAG æ˜¯å¦å¯ä»¥åƒåˆ†å¸ƒå¼ç³»ç»Ÿä¸€æ ·ï¼Œè¢«æ¸…æ™°åœ°åˆ†å±‚ã€æ ‡å‡†åŒ–å’Œæ¨¡å—åŒ–ï¼Œä»è€Œå…·å¤‡å¯æ¼”è¿›æ€§ï¼ŸUltraRAG ç»™å‡ºçš„ç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚</p>
<p><strong>ä»â€œèƒ½ç”¨çš„ RAGâ€åˆ°â€œæ¶æ„çº§ RAGâ€</strong></p>
<p>åœ¨å¤§æ¨¡å‹åº”ç”¨é€æ­¥èµ°å‘ç”Ÿäº§åŒ–çš„ä»Šå¤©ï¼ŒRAGï¼ˆRetrievalâ€‘Augmented Generationï¼‰å·²ç»ä¸å†æ˜¯ä¸€ä¸ªâ€œæ˜¯å¦éœ€è¦â€çš„é—®é¢˜ï¼Œè€Œæ˜¯ä¸€ä¸ªâ€œå¦‚ä½•è®¾è®¡ã€å¦‚ä½•æ¼”è¿›ã€å¦‚ä½•è§„æ¨¡åŒ–â€çš„æ¶æ„é—®é¢˜ã€‚</p>
<p>è®¸å¤šå›¢é˜Ÿå·²ç»å°† RAG æˆåŠŸè½åœ°ï¼Œä½†åœ¨è¿›å…¥çœŸå®ä¸šåŠ¡å’Œé•¿æœŸæ¼”è¿›é˜¶æ®µåï¼Œå¾€å¾€ä¼šé‡åˆ°ä¸€ç³»åˆ—æ›´æœ¬è´¨çš„å›°æƒ‘ï¼š</p>
<p>â—ä¸ºä»€ä¹ˆç³»ç»ŸåŠŸèƒ½ä¸æ–­å åŠ ï¼Œå´è¶Šæ¥è¶Šéš¾ä»¥ä¿®æ”¹å’Œæ¼”è¿›ï¼Ÿ</p>
<p>â—ä¸ºä»€ä¹ˆä¸€æ¬¡ç®€å•çš„æ£€ç´¢æˆ–ç”Ÿæˆç­–ç•¥è°ƒæ•´ï¼Œéƒ½ä¼šç‰µåŠ¨å¤§é‡ä»£ç ï¼Ÿ</p>
<p>â—ä¸ºä»€ä¹ˆ RAG éš¾ä»¥åƒæ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—é‚£æ ·ï¼Œæ²‰æ·€ä¸ºç¨³å®šã€å¯å¤ç”¨çš„åŸºç¡€è®¾æ–½ï¼Ÿ</p>
<p>è¿™äº›é—®é¢˜çš„æ ¹æºï¼Œå¹¶ä¸åœ¨æ¨¡å‹æ•ˆæœæœ¬èº«ï¼Œ<strong>è€Œåœ¨äºRAG çš„æ¶æ„å±‚æ¬¡æ˜¯å¦æˆç«‹ã€‚</strong></p>
<p>æœ¬æ¬¡æŠ€æœ¯åˆ†äº«ä¼šå›´ç»• UltraRAG å±•å¼€è®¨è®ºã€‚UltraRAG å¹¶éåœ¨â€œç”Ÿæˆæ•ˆæœâ€å±‚é¢è¿›è¡Œå±€éƒ¨ä¼˜åŒ–ï¼Œè€Œæ˜¯è¯•å›¾å›ç­”ä¸€ä¸ªæ›´ä¸Šå±‚ã€æ›´é•¿æœŸçš„é—®é¢˜ï¼š</p>
<p><strong>RAG æ˜¯å¦å¯ä»¥åƒåˆ†å¸ƒå¼ç³»ç»Ÿä¸€æ ·ï¼Œè¢«æ¸…æ™°åœ°åˆ†å±‚ã€æ ‡å‡†åŒ–å’Œæ¨¡å—åŒ–ï¼Œä»è€Œå…·å¤‡å¯æ¼”è¿›æ€§ï¼Ÿ</strong></p>
<p>UltraRAG ç»™å‡ºçš„ç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚</p>
<p>ä½œä¸ºé¦–ä¸ªåŸºäº MCPï¼ˆModel Context Protocolï¼‰çš„æ¨¡å—åŒ– RAG æ¡†æ¶ï¼ŒUltraRAG å°è¯•é€šè¿‡<strong>åè®®åŒ–æ¥å£ã€åˆ†å±‚æ¶æ„ä¸é…ç½®é©±åŠ¨æœºåˆ¶</strong>ï¼Œå°† RAG ä»â€œåº”ç”¨ä»£ç çš„ä¸€éƒ¨åˆ†â€ï¼Œæå‡ä¸ºâ€œå¯é•¿æœŸæ¼”è¿›çš„ç³»ç»Ÿæ¶æ„â€ã€‚</p>
<p>åœ¨è¿›å…¥å…·ä½“æŠ€æœ¯ç»†èŠ‚ä¹‹å‰ï¼Œå…ˆç»™å‡ºè´¯ç©¿å…¨æ–‡çš„ä¸‰æ¡æ ¸å¿ƒæ¶æ„åˆ¤æ–­ï¼š</p>
<p><strong>åè®®å†³å®šæ¶æ„ä¸Šé™</strong></p>
<p><strong>é…ç½®æ˜¯ç³»ç»Ÿçš„æ§åˆ¶é¢</strong></p>
<p><strong>RAG æ­£åœ¨èµ°å‘å·¥å…·åŒ–ä¸å®æ—¶åŒ–çš„åŸºç¡€è®¾æ–½é˜¶æ®µ</strong></p>
<p><strong>ä»ä¼ ç»Ÿ RAG è¯´èµ·ï¼šæ¸…æ™°æµç¨‹ä¸‹çš„ç»“æ„æ€§å›°å¢ƒ</strong></p>
<p><strong>1. ä¼ ç»Ÿ RAG çš„åŸºæœ¬èŒƒå¼</strong></p>
<p>ä»æµç¨‹ä¸Šçœ‹ï¼Œä¼ ç»Ÿ RAG çš„æ•´ä½“é€»è¾‘éå¸¸æ¸…æ™°ï¼š</p>
<p>1.ç”¨æˆ·æå‡ºé—®é¢˜</p>
<p>2.é—®é¢˜å‘é‡åŒ–ï¼ˆEmbeddingï¼‰</p>
<p>3.å‘é‡æ•°æ®åº“ç›¸ä¼¼åº¦æ£€ç´¢</p>
<p>4.æ„å»º Prompt</p>
<p>5.å¤§è¯­è¨€æ¨¡å‹ç”Ÿæˆç­”æ¡ˆ</p>
<p>åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸æ¶‰åŠå››ä¸ªå…³é”®æŠ€æœ¯æ¨¡å—ï¼š</p>
<p>â—<strong>æ–‡æ¡£åˆ†å—ï¼ˆChunkingï¼‰ï¼š</strong> å°†é•¿æ–‡æ¡£åˆ‡åˆ†ä¸ºå¯æ£€ç´¢çš„æœ€å°å•å…ƒ</p>
<p>â—<strong>åµŒå…¥æ¨¡å‹ï¼ˆEmbeddingï¼‰ï¼š</strong> å°†æ–‡æœ¬æ˜ å°„åˆ°å‘é‡ç©ºé—´</p>
<p>â—<strong>å‘é‡æ•°æ®åº“ï¼ˆVector DBï¼‰ï¼š</strong> è¿›è¡Œé«˜æ•ˆç›¸ä¼¼åº¦æœç´¢</p>
<p>â—<strong>æç¤ºè¯å·¥ç¨‹ï¼ˆPrompt Engineeringï¼‰ï¼š</strong> ç»„ç»‡ä¸Šä¸‹æ–‡ä»¥å¼•å¯¼ç”Ÿæˆ</p>
<p>ä»â€œç™½æ¿è®¾è®¡â€çš„è§’åº¦çœ‹ï¼Œè¿™ä¸€æŠ€æœ¯è·¯å¾„å¹¶ä¸å¤æ‚ã€‚ä½†åœ¨å·¥ç¨‹å®è·µä¸­ï¼Œé—®é¢˜å¾€å¾€ä»è¿™é‡Œå¼€å§‹æ˜¾ç°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0782514aab241b89ad0a01a6c689ccd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm66KeBQUdJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767336792&amp;x-signature=CZqY16B0YAvHzyZOJMx87WPafG0%3D" alt="" loading="lazy"/></p>
<p><strong>2. ä¼ ç»Ÿ RAG æ¡†æ¶çš„äº”å¤§å…¸å‹é—®é¢˜</strong></p>
<p>åœ¨å¤§é‡å·¥ç¨‹å®è·µä¸­ï¼Œä¼ ç»Ÿ RAG æ¡†æ¶é€æ¸æš´éœ²å‡ºä¸€ç³»åˆ—ç»“æ„æ€§é—®é¢˜ï¼Œå¯ä»¥å½’çº³ä¸ºä»¥ä¸‹äº”ä¸ªæ–¹é¢ã€‚</p>
<p><strong>ï¼ˆ1ï¼‰ç»„ä»¶å¼ºè€¦åˆï¼Œå¼€å‘å¤æ‚åº¦é«˜</strong></p>
<p>ä»¥ LangChain ç­‰æ¡†æ¶ä¸ºä»£è¡¨ï¼Œæ£€ç´¢å™¨ã€ç”Ÿæˆæ¨¡å‹ä¸ä¸šåŠ¡é€»è¾‘å¾€å¾€åœ¨ä»£ç ä¸­ç›´æ¥ç»‘å®šã€‚ä¸€æ—¦éœ€è¦æ›´æ¢æ£€ç´¢ç­–ç•¥æˆ–æ¨¡å‹åç«¯ï¼Œé€šå¸¸å°±éœ€è¦ä¿®æ”¹æ ¸å¿ƒä»£ç ã€‚</p>
<p>å…¶æ ¹æœ¬åŸå› åœ¨äºï¼š<strong>ç¼ºä¹ç»Ÿä¸€çš„æŠ½è±¡å±‚ï¼Œç»„ä»¶ä¹‹é—´é«˜åº¦è€¦åˆã€‚</strong></p>
<p><strong>ï¼ˆ2ï¼‰é…ç½®åˆ†æ•£ï¼Œéš¾ä»¥ç»Ÿä¸€ç®¡ç†</strong></p>
<p>æ¨¡å‹å‚æ•°ã€æ£€ç´¢å‚æ•°ã€Prompt æ¨¡æ¿å¾€å¾€æ•£è½åœ¨ä¸åŒä»£ç ä½ç½®ï¼Œç¼ºä¹å£°æ˜å¼é…ç½®æœºåˆ¶ï¼Œç›´æ¥å¯¼è‡´ï¼š</p>
<p>â—å‚æ•°ä¸å¯è¿½æº¯</p>
<p>â—å®éªŒéš¾ä»¥å¤ç°</p>
<p>â—é…ç½®æ— æ³•ç‰ˆæœ¬åŒ–ç®¡ç†</p>
<p><strong>ï¼ˆ3ï¼‰è°ƒè¯•å›°éš¾ï¼Œç¼ºä¹å¯è§‚æµ‹æ€§</strong></p>
<p>åœ¨å¤šæ•°ä¼ ç»Ÿæ¡†æ¶ä¸­ï¼ŒRAG æ›´åƒä¸€ä¸ªâ€œé»‘ç®±â€ï¼š</p>
<p>â—å®é™…æ£€ç´¢åˆ°äº†å“ªäº›æ–‡æ¡£ï¼Ÿ</p>
<p>â—ä¸ºä»€ä¹ˆé€‰æ‹©è¿™äº›å†…å®¹ï¼Ÿ</p>
<p>â—æœ€ç»ˆä¼ å…¥æ¨¡å‹çš„ Prompt å…·ä½“æ˜¯ä»€ä¹ˆå½¢æ€ï¼Ÿ</p>
<p>è¿™äº›ä¸­é—´çŠ¶æ€å¾€å¾€ç¼ºä¹ç³»ç»Ÿæ€§çš„è®°å½•ä¸å¯è§†åŒ–æ‰‹æ®µã€‚</p>
<p><strong>ï¼ˆ4ï¼‰æ‰©å±•æ€§å—é™</strong></p>
<p>æ–°å¢åŠŸèƒ½æˆ–èƒ½åŠ›é€šå¸¸æ„å‘³ç€ï¼š</p>
<p>ä¿®æ”¹æ¡†æ¶æ ¸å¿ƒä»£ç </p>
<p>è¿™ç§éæ’ä»¶å¼æ¶æ„ï¼Œä½¿å¾—æ¡†æ¶æ‰©å±•æˆæœ¬é«˜ã€ç”Ÿæ€éš¾ä»¥å½¢æˆã€‚</p>
<p><strong>ï¼ˆ5ï¼‰å¤šæ¨¡æ€æ”¯æŒè–„å¼±</strong></p>
<p>å¤šæ•° RAG æ¡†æ¶åœ¨è®¾è®¡ä¹‹åˆä»…é¢å‘æ–‡æœ¬åœºæ™¯ï¼Œå¯¹äºå›¾åƒã€è¡¨æ ¼ç­‰å¤æ‚æ¨¡æ€æ”¯æŒä¸è¶³ï¼Œå¾€å¾€éœ€è¦é€šè¿‡â€œæ‹¼å‡‘å¼â€çš„æ–¹å¼è¿›è¡Œè¡¥å¿ã€‚</p>
<p><strong>3. æ ¸å¿ƒçŸ›ç›¾çš„æœ¬è´¨</strong></p>
<p>ä¸Šè¿°é—®é¢˜è™½ç„¶è¡¨ç°å„å¼‚ï¼Œä½†æœ¬è´¨é«˜åº¦ä¸€è‡´ï¼š</p>
<p><strong>ç°æœ‰ RAG æ¡†æ¶å¤§å¤šæ˜¯ä»£ç é©±åŠ¨ã€ç»„ä»¶ç´§è€¦åˆçš„ç³»ç»Ÿï¼Œç¼ºä¹ç»Ÿä¸€åè®®ä¸å£°æ˜å¼æŠ½è±¡å±‚ã€‚</strong></p>
<p>è¿™ä¹Ÿè‡ªç„¶å¼•å‡ºäº†ä¸€ä¸ªå…³é”®é—®é¢˜ï¼š</p>
<p>æ˜¯å¦å¯ä»¥æ„å»ºä¸€ä¸ªÂ <strong>ä½ä»£ç ã€æ¨¡å—åŒ–ã€æ˜“æ‰©å±•ã€å¯å¤ç”¨</strong>Â çš„ RAG æ¶æ„ï¼Ÿ</p>
<p>UltraRAG æ­£æ˜¯å¯¹è¿™ä¸€é—®é¢˜çš„ç³»ç»Ÿæ€§å›åº”ã€‚</p>
<p><strong>UltraRAGï¼šä»¥é…ç½®ä¸åè®®é‡æ„ RAG æ¶æ„</strong></p>
<p><strong>1. UltraRAG çš„å®šä½</strong></p>
<p>UltraRAG æ˜¯<strong>é¦–ä¸ªåŸºäº MCP æ¶æ„çš„æ¨¡å—åŒ– RAG æ¡†æ¶ã€‚</strong> å…¶ç›®æ ‡å¹¶éæä¾›æ›´å¤šå†…ç½®èƒ½åŠ›ï¼Œè€Œæ˜¯é‡æ–°å®šä¹‰ RAG ç³»ç»Ÿçš„ç»„ç»‡æ–¹å¼ï¼š</p>
<p>â—ä½¿ç”¨Â <strong>YAML é…ç½®</strong>Â æè¿° RAG Pipeline</p>
<p>â—ä½¿ç”¨Â <strong>æ ‡å‡†åè®®</strong> è¿æ¥æ£€ç´¢ã€ç”Ÿæˆä¸å·¥å…·</p>
<p>â—ä½¿ç”¨Â <strong>æ¨¡å—åŒ–è®¾è®¡</strong> å®ç°ç»„ä»¶è§£è€¦</p>
<p>å¯ä»¥å°†å…¶æ ¸å¿ƒç†å¿µæ¦‚æ‹¬ä¸ºä¸€å¥è¯ï¼š</p>
<p><strong>ç”¨é…ç½®æè¿°ç³»ç»Ÿè¡Œä¸ºï¼Œç”¨åè®®è¿æ¥ç³»ç»Ÿèƒ½åŠ›ã€‚</strong></p>
<p><strong>2. UltraRAG çš„æ ¸å¿ƒç‰¹æ€§</strong></p>
<p>UltraRAG å…·å¤‡ä»¥ä¸‹äº”ä¸ªæ˜¾è‘—ç‰¹æ€§ï¼š</p>
<p><strong>â—ä½ä»£ç ï¼š</strong> æ ¸å¿ƒæµç¨‹é€šè¿‡ YAML å£°æ˜å®Œæˆï¼Œæ˜¾è‘—é™ä½å·¥ç¨‹å¤æ‚åº¦</p>
<p><strong>â—æ¨¡å—åŒ–ï¼š</strong> Retrieverã€Generatorã€Parser ç­‰ç»„ä»¶å®Œå…¨è§£è€¦</p>
<p><strong>â—å¤šæ¨¡æ€åŸç”Ÿæ”¯æŒï¼š</strong> æ–‡æœ¬ã€å›¾åƒã€è¡¨æ ¼ç»Ÿä¸€å»ºæ¨¡ä¸å¤„ç†</p>
<p><strong>â—æ’ä»¶å¼æ‰©å±•ï¼š</strong> æ–°å¢èƒ½åŠ›æ— éœ€ä¿®æ”¹æ¡†æ¶æ ¸å¿ƒä»£ç </p>
<p><strong>â—æ ‡å‡†åŒ–æ¥å£ï¼š</strong> åŸºäº MCP åè®®ï¼Œå®ç°å·¥å…·çº§äº’æ“ä½œ</p>
<p><strong>3. ä»â€œä»£ç è€¦åˆâ€åˆ°â€œé…ç½®è§£è€¦â€</strong></p>
<p>åœ¨ä¼ ç»Ÿ RAG æ¨¡å¼ä¸‹ï¼š</p>
<p>â—æ›´æ¢ Retriever é€šå¸¸éœ€è¦ä¿®æ”¹ä»£ç </p>
<p>â—å‚æ•°è°ƒä¼˜å¾€å¾€éœ€è¦åå¤é˜…è¯»ä¸è°ƒæ•´å®ç°é€»è¾‘</p>
<p>è€Œåœ¨ UltraRAG ä¸­ï¼š</p>
<p>â—Retriever ä¸ Generator å‡é€šè¿‡é…ç½®ç‹¬ç«‹å£°æ˜</p>
<p>â—åç«¯ç±»å‹ã€æ¨¡å‹é€‰æ‹©ä¸è¶…å‚æ•°ä¸€ç›®äº†ç„¶</p>
<p>â—é…ç½®æ–‡ä»¶å¯è¿›è¡Œç‰ˆæœ¬ç®¡ç†ã€å¤ç”¨ä¸å¯¹æ¯”</p>
<p>åœ¨è¿™ä¸€æ¨¡å¼ä¸‹ï¼Œé…ç½®æœ¬èº«å³ç³»ç»Ÿè¡Œä¸ºçš„å®Œæ•´æè¿°ã€‚</p>
<p><strong>UltraRAG çš„å…³é”®æŠ€æœ¯ï¼šMCP ä¸ä¸‰å±‚æ¶æ„</strong></p>
<p><strong>1. MCPï¼šæ¶æ„çº§åè®®ï¼Œè€Œéæ€§èƒ½ä¼˜åŒ–æ‰‹æ®µ</strong></p>
<p>MCPï¼ˆModel Context Protocolï¼‰çš„æ ¸å¿ƒç›®æ ‡ï¼Œå¹¶éè¿½æ±‚å•ç‚¹æ€§èƒ½æå‡ï¼Œè€Œæ˜¯å®ç°ï¼š<strong>æ ‡å‡†åŒ–ã€è§£è€¦ä¸äº’æ“ä½œ</strong></p>
<p>å…¶ä½œç”¨å¯ä»¥ç±»æ¯” HTTP åœ¨ Web ä½“ç³»ä¸­çš„åœ°ä½ã€‚</p>
<p>MCP ä¸»è¦å¸¦æ¥ä¸‰æ–¹é¢ä»·å€¼ï¼š</p>
<p>â—<strong>å·¥å…·è§£è€¦ï¼š</strong> å„ç±» Server å¯ç‹¬ç«‹è¿è¡Œã€ç‹¬ç«‹æ¼”è¿›</p>
<p>â—<strong>ç»Ÿä¸€æ¥å£ï¼š</strong> åŸºäº JSON-RPCï¼Œæ¥å…¥ä¸é›†æˆæˆæœ¬æä½</p>
<p>â—<strong>æ’ä»¶åŒ–æ‰©å±•ï¼š</strong> æ–°å¢å·¥å…·ä»…éœ€å®ç° MCP æ¥å£</p>
<p><strong>2. UltraRAG çš„ä¸‰å±‚æ¶æ„è®¾è®¡</strong></p>
<p>åŸºäº MCPï¼ŒUltraRAG æ„å»ºäº†æ¸…æ™°çš„ä¸‰å±‚ä½“ç³»ç»“æ„ï¼š</p>
<p>â—<strong>Client å±‚ï¼š</strong> è´Ÿè´£è¯»å– YAML é…ç½®å¹¶ç¼–æ’ Pipeline</p>
<p>â—<strong>Server å±‚ï¼š</strong> é€šè¿‡ MCP æš´éœ²æ ‡å‡†åŒ–èƒ½åŠ›æ¥å£</p>
<p>â—<strong>Backend å±‚ï¼š</strong> å…·ä½“å®ç°ï¼ˆå¦‚ FAISSã€vLLMã€MinerU ç­‰ï¼‰</p>
<p>è¿™ä¸€è®¾è®¡çš„æ ¸å¿ƒåŸåˆ™åœ¨äºï¼š</p>
<p><strong>ä¸Šå±‚ä»…ä¾èµ–æ¥å£ï¼Œè€Œä¸ä¾èµ–å…·ä½“å®ç°ã€‚</strong></p>
<p>å„ç»„ä»¶å¯åƒç§¯æœ¨ä¸€æ ·è¢«è‡ªç”±æ›¿æ¢ä¸å‡çº§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04a10713e190479498591a353a01e1ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm66KeBQUdJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767336792&amp;x-signature=s7lMr%2FGcGvDqiAXepD7eR68MYkw%3D" alt="" loading="lazy"/></p>
<p><strong>3. é…ç½®é©±åŠ¨çš„ç³»ç»Ÿä»·å€¼</strong></p>
<p>é…ç½®é©±åŠ¨å¹¶ä¸åªæ˜¯å‡å°‘ä»£ç é‡ï¼Œè€Œæ˜¯å¸¦æ¥ä¸‰ç§ç³»ç»Ÿçº§èƒ½åŠ›ï¼š</p>
<ul>
<li>å¯è¿½æº¯æ€§ï¼šé…ç½®å³ç³»ç»Ÿæ–‡æ¡£</li>
<li>å¯å¤ç°æ€§ï¼šä¸€ä¸ª YAML å¯¹åº”ä¸€æ¬¡å®Œæ•´å®éªŒ</li>
<li>å¯ç‰ˆæœ¬åŒ–ï¼šå¤©ç„¶é€‚é… Git ç­‰ç‰ˆæœ¬ç®¡ç†å·¥å…·</li>
</ul>
<p>åŒæ—¶ï¼ŒYAML çš„æ¨¡æ¿ä¸ç»§æ‰¿æœºåˆ¶ï¼Œä½¿å¾—é…ç½®å¤ç”¨ä¸ç»„åˆæˆæœ¬æä½ã€‚</p>
<p><strong>4. å¤šæ¨¡æ€èƒ½åŠ›ä¸ MinerU çš„é›†æˆ</strong></p>
<p>UltraRAG çš„å¤šæ¨¡æ€èƒ½åŠ›å¹¶éåæœŸè¡¥ä¸ï¼Œè€Œæ˜¯æºäºæ¶æ„å±‚é¢çš„åŸç”Ÿè®¾è®¡ã€‚</p>
<p>é€šè¿‡ä¸ MinerU çš„æ·±åº¦é›†æˆï¼Œç³»ç»Ÿèƒ½å¤Ÿï¼š</p>
<ul>
<li>è§£ææ–‡æ¡£ä¸­çš„å›¾åƒã€è¡¨æ ¼ä¸å…¬å¼</li>
<li>å°†è¡¨æ ¼è½¬ä¸º HTMLã€å…¬å¼è½¬ä¸º LaTeX</li>
<li>æ”¯æŒ 100+ è¯­è¨€çš„ OCR</li>
<li>è‡ªåŠ¨è¯†åˆ«æ–‡æ¡£é˜…è¯»é¡ºåº</li>
</ul>
<p>è¿™ä½¿ UltraRAG åœ¨å¤„ç†è®ºæ–‡ã€è´¢æŠ¥ä¸æŠ€æœ¯æ–‡æ¡£ç­‰å¤æ‚åœºæ™¯æ—¶å…·å¤‡æ˜¾è‘—ä¼˜åŠ¿ã€‚</p>
<p><strong>æŠ€æœ¯å¯ç¤ºä¸ RAG çš„æ¼”è¿›æ–¹å‘</strong></p>
<p><strong>1. ä¸‰æ¡å…³é”®æŠ€æœ¯å¯ç¤º</strong></p>
<p><strong>ï¼ˆ1ï¼‰åè®®ä¼˜äºæ¡†æ¶</strong></p>
<p>é•¿æœŸæ¥çœ‹ï¼Œå®šä¹‰æ ‡å‡†åè®®æ¯”æ„å»ºå°é—­æ¡†æ¶æ›´å…·ç”Ÿå‘½åŠ›ã€‚</p>
<p><strong>ï¼ˆ2ï¼‰é…ç½®ä¼˜äºä»£ç ï¼Œä½†éœ€æ˜ç¡®è¾¹ç•Œ</strong></p>
<p>é€šç”¨ã€ç¡®å®šæ€§çš„ç³»ç»Ÿè¡Œä¸ºé€‚åˆé…ç½®åŒ–ï¼Œç‰¹æ®Šé€»è¾‘ä»éœ€é€šè¿‡ä»£ç å®ç°ã€‚</p>
<p><strong>ï¼ˆ3ï¼‰å¯è§‚æµ‹æ€§æ˜¯ç”Ÿäº§çº§ RAG çš„å…³é”®èƒ½åŠ›</strong></p>
<p>RAG ç³»ç»Ÿä¸ä»…è¦â€œèƒ½è·‘â€ï¼Œè¿˜éœ€è¦â€œå¯è§£é‡Šã€å¯è°ƒè¯•ã€å¯ä¼˜åŒ–â€ã€‚</p>
<p><strong>2. ä»ç¦»çº¿ç´¢å¼•åˆ° MCP-based å®æ—¶ RAG</strong></p>
<p>RAG æŠ€æœ¯æ­£ç»å†ä»ç¦»çº¿ç´¢å¼•å‘å®æ—¶å·¥å…·è°ƒç”¨çš„é‡è¦è½¬å˜ã€‚</p>
<p>ä¼ ç»Ÿ RAG æ¨¡å¼ä¾èµ–é¢„æ„å»ºå‘é‡ç´¢å¼•ï¼Œå­˜åœ¨çŸ¥è¯†æ›´æ–°æ»åä¸ç»´æŠ¤æˆæœ¬é«˜çš„é—®é¢˜ã€‚</p>
<p>åŸºäº MCP çš„å®æ—¶ RAG æ¨¡å¼ä¸­ï¼Œæ¨¡å‹å¯ä»¥ç›´æ¥é€šè¿‡å·¥å…·è°ƒç”¨å®æ—¶æ–‡æ¡£æœåŠ¡ï¼š</p>
<ul>
<li>æ— éœ€é¢„å»ºç´¢å¼•</li>
<li>çŸ¥è¯†å§‹ç»ˆä¿æŒæœ€æ–°</li>
<li>ç»´æŠ¤æˆæœ¬æ˜¾è‘—é™ä½</li>
</ul>
<p>åœ¨è¿™ä¸€è¶‹åŠ¿ä¸‹ï¼Œ<strong>æ–‡æ¡£ç½‘ç«™æœ¬èº«å°†é€æ­¥æ¼”è¿›ä¸º MCP Serverã€‚</strong></p>
<p><strong>3. é¢å‘æœªæ¥çš„ä¸‰ä¸ªå‘å±•è¶‹åŠ¿</strong></p>
<ul>
<li>
<p><strong>Agent-based RAGï¼š</strong> ç”± Agent åŠ¨æ€å†³ç­–ä½•æ—¶ã€å¦‚ä½•æ£€ç´¢</p>
</li>
<li>
<p><strong>çŸ¥è¯†å›¾è°±èåˆï¼š</strong> ç»“åˆå‘é‡è¯­ä¹‰èƒ½åŠ›ä¸å…³ç³»æ¨ç†èƒ½åŠ›</p>
</li>
<li>
<p><strong>ä¸ªæ€§åŒ– RAGï¼š</strong> æ ¹æ®ç”¨æˆ·è¡Œä¸ºåŠ¨æ€è°ƒæ•´æ£€ç´¢ä¸ç”Ÿæˆç­–ç•¥</p>
</li>
</ul>
<p>è¿™äº›è¶‹åŠ¿å…±åŒæŒ‡å‘ä¸€ä¸ªæ–¹å‘ï¼š</p>
<p>RAG æ­£åœ¨ä»é™æ€ç³»ç»Ÿï¼Œæ¼”è¿›ä¸ºåŠ¨æ€ã€æ™ºèƒ½ã€å¯æ¼”è¿›çš„çŸ¥è¯†åŸºç¡€è®¾æ–½ã€‚</p>
<p><strong>Demoæ¼”ç¤º</strong></p>
<p>UR-v2 çš„ä½¿ç”¨æµç¨‹ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹ä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ul>
<li>ç¼–å†™ Pipeline é…ç½®æ–‡ä»¶</li>
<li>ç¼–è¯‘ Pipeline å¹¶è°ƒæ•´å‚æ•°</li>
<li>è¿è¡Œ Pipeline</li>
</ul>
<p>æ­¤å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡å¯è§†åŒ–å·¥å…·å¯¹è¿è¡Œç»“æœè¿›è¡Œåˆ†æä¸è¯„ä¼°ã€‚</p>
<p><strong>æ•°æ®ï¼š</strong> ä½¿ç”¨ ultrarag æä¾›çš„10æ¡æ ·ä¾‹æ•°æ®</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3718eb566b3a4171a44cb6decb8884b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm66KeBQUdJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767336792&amp;x-signature=1mQBwEtTnymwbPtZqyJBpXtUTgE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a296b4728c104d5aa9dcee83f3767fe1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm66KeBQUdJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767336792&amp;x-signature=l3k8L%2FegBsPt5dzkCUT%2FtZsp4C4%3D" alt="" loading="lazy"/></p>
<p><strong>åµŒå…¥ç¼–ç ï¼š</strong> MiniCPM-Embedding-Light</p>
<p><strong>ç”Ÿæˆç­”æ¡ˆæ¨¡å‹ï¼š</strong> Â Qwen3-8B</p>
<p><strong>æœ€ç»ˆå‡†ç¡®ç‡ï¼š</strong> 10%</p>
<p><strong>Step 1ï¼šç¼–å†™ Pipeline é…ç½®æ–‡ä»¶</strong></p>
<p>åœ¨examplesæ–‡ä»¶å¤¹ä¸­åˆ›å»ºå¹¶ç¼–å†™ Pipeline é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">servers:
  benchmark:servers/benchmark
  retriever:servers/retriever
  prompt:servers/prompt
  generation:servers/generation
  evaluation:servers/evaluation
  custom:servers/custom

pipeline:
<span class="hljs-deletion">-benchmark.get_data</span>
<span class="hljs-deletion">-retriever.retriever_init</span>
<span class="hljs-deletion">-retriever.retriever_embed</span>
<span class="hljs-deletion">-retriever.retriever_index</span>
<span class="hljs-deletion">-retriever.retriever_search</span>
<span class="hljs-deletion">-generation.generation_init</span>
<span class="hljs-deletion">-prompt.qa_rag_boxed</span>
<span class="hljs-deletion">-generation.generate</span>
<span class="hljs-deletion">-custom.output_extract_from_boxed</span>
<span class="hljs-deletion">-evaluation.evaluate</span>
</code></pre>
<p>UR-v2 çš„ Pipeline é…ç½®æ–‡ä»¶éœ€è¦åŒ…å«ä»¥ä¸‹ä¸¤ä¸ªéƒ¨åˆ†ï¼š</p>
<ul>
<li>
<p>serversï¼šå£°æ˜å½“å‰æµç¨‹æ‰€ä¾èµ–çš„å„ä¸ªæ¨¡å—ï¼ˆServerï¼‰ã€‚ä¾‹å¦‚ï¼Œæ£€ç´¢é˜¶æ®µéœ€è¦ä½¿ç”¨ retriever Serverã€‚</p>
</li>
<li>
<p>pipelineï¼šå®šä¹‰å„ Server ä¸­åŠŸèƒ½å‡½æ•°ï¼ˆToolï¼‰çš„è°ƒç”¨é¡ºåºã€‚æœ¬ç¤ºä¾‹å±•ç¤ºäº†ä»æ•°æ®åŠ è½½ã€æ£€ç´¢ç¼–ç ä¸ç´¢å¼•æ„å»ºï¼Œåˆ°ç”Ÿæˆä¸è¯„æµ‹çš„å®Œæ•´æµç¨‹ã€‚</p>
</li>
</ul>
<p><strong>Step 2ï¼šç¼–è¯‘ Pipeline å¹¶è°ƒæ•´å‚æ•°</strong></p>
<p>åœ¨è¿è¡Œä»£ç å‰ï¼Œé¦–å…ˆéœ€è¦é…ç½®è¿è¡Œæ‰€éœ€çš„å‚æ•°ã€‚UR-v2 æä¾›äº†å¿«æ·çš„ build æŒ‡ä»¤ï¼Œå¯è‡ªåŠ¨ç”Ÿæˆå½“å‰ Pipeline æ‰€ä¾èµ–çš„å®Œæ•´å‚æ•°æ–‡ä»¶ã€‚ ç³»ç»Ÿä¼šè¯»å–å„ä¸ª Server çš„ parameter.yaml æ–‡ä»¶ï¼Œè§£ææœ¬æ¬¡æµç¨‹ä¸­æ¶‰åŠçš„å…¨éƒ¨å‚æ•°é¡¹ï¼Œå¹¶ç»Ÿä¸€æ±‡æ€»ç”Ÿæˆåˆ°ä¸€ä¸ªç‹¬ç«‹çš„é…ç½®æ–‡ä»¶ä¸­ã€‚æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-built_in">printf</span>(<span class="hljs-string">"hello world!"</span>);
</code></pre>
<p>æ‰§è¡Œåï¼Œç»ˆç«¯å°†è¾“å‡ºå¦‚ä¸‹å†…å®¹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13b36c1bbb2d403c9779f1f746362e0a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm66KeBQUdJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767336792&amp;x-signature=BRdR5rwdskMVYjpxpFkeMVOFPkY%3D" alt="" loading="lazy"/></p>
<p>ç³»ç»Ÿä¼šåœ¨examples/parameters/æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆå¯¹åº”çš„å‚æ•°é…ç½®æ–‡ä»¶ã€‚æ‰“å¼€æ–‡ä»¶åï¼Œå¯æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ç›¸å…³å‚æ•°ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">benchmark:</span>
<span class="hljs-symbol">benchmark:</span>
# key_mapï¼šå®šä¹‰æ•°æ®å­—æ®µçš„æ˜ å°„å…³ç³»ï¼Œå°†æ•°æ®é›†ä¸­å­—æ®µåæ˜ å°„ä¸ºæ ‡å‡†å­—æ®µ
<span class="hljs-symbol">key_map:</span>
<span class="hljs-symbol">gt_ls:</span>golden_answers# ç­”æ¡ˆå­—æ®µå
<span class="hljs-symbol">q_ls:</span>question# é—®é¢˜å­—æ®µå
<span class="hljs-symbol">limit:</span>-<span class="hljs-number">1</span># é™åˆ¶åŠ è½½æ ·æœ¬æ•°é‡ï¼Œ-<span class="hljs-number">1</span> è¡¨ç¤ºåŠ è½½å…¨éƒ¨
<span class="hljs-symbol">name:</span>nq# æ•°æ®é›†åç§°ï¼ˆå¦‚ Natural Questionsï¼‰
<span class="hljs-symbol">path:</span>data/sample_nq_10.jsonl# æ•°æ®æ–‡ä»¶è·¯å¾„
<span class="hljs-symbol">seed:</span><span class="hljs-number">42</span># éšæœºç§å­ï¼Œä¿è¯å®éªŒå¯å¤ç°
<span class="hljs-symbol">shuffle:</span><span class="hljs-literal">false</span># æ˜¯å¦æ‰“ä¹±æ ·æœ¬é¡ºåºï¼Œ<span class="hljs-literal">false</span> è¡¨ç¤ºæŒ‰åŸé¡ºåºåŠ è½½

<span class="hljs-symbol">custom:</span> {}                    # è‡ªå®šä¹‰ Serverï¼Œæ­¤å¤„ä¸ºç©ºï¼ˆå½“å‰å‡½æ•°æ— å‚æ•°ï¼‰

<span class="hljs-symbol">evaluation:</span>
# metricsï¼šæŒ‡å®šè¯„æµ‹æŒ‡æ ‡ï¼Œå¯æŒ‰éœ€å¢åˆ 
<span class="hljs-symbol">metrics:</span>
-acc# å‡†ç¡®ç‡ï¼ˆAccuracyï¼‰
-f1# F1 å€¼
-em# Exact Match
-coverem# è¦†ç›–ç‡å¼ Exact Match
-stringem# å­—ç¬¦ä¸²çº§åŒ¹é…
-rouge-<span class="hljs-number">1</span># Rouge-<span class="hljs-number">1</span> æŒ‡æ ‡
-rouge-<span class="hljs-number">2</span># Rouge-<span class="hljs-number">2</span> æŒ‡æ ‡
-rouge-l# Rouge-L æŒ‡æ ‡
<span class="hljs-symbol">save_path:</span>output/evaluate_results.json# è¯„æµ‹ç»“æœä¿å­˜è·¯å¾„

<span class="hljs-symbol">generation:</span>
<span class="hljs-symbol">backend:</span>vllm# æ¨ç†åç«¯ï¼Œå¯é€‰ vllm / openai / hf
<span class="hljs-symbol">backend_configs:</span>
<span class="hljs-symbol">hf:</span># HuggingFace æœ¬åœ°æ¨ç†é…ç½®
<span class="hljs-symbol">batch_size:</span><span class="hljs-number">8</span>
<span class="hljs-symbol">gpu_ids:</span><span class="hljs-number">2</span>,<span class="hljs-number">3</span>
<span class="hljs-symbol">model_name_or_path:</span>openbmb/MiniCPM4-<span class="hljs-number">8</span>B
<span class="hljs-symbol">trust_remote_code:</span><span class="hljs-literal">true</span># å…è®¸åŠ è½½å¸¦è‡ªå®šä¹‰ä»£ç çš„æ¨¡å‹
<span class="hljs-symbol">openai:</span># OpenAI API æ¨ç†é…ç½®
<span class="hljs-symbol">api_key:</span><span class="hljs-comment">''# OpenAI API å¯†é’¥</span>
<span class="hljs-symbol">base_delay:</span><span class="hljs-number">1.0#</span> é‡è¯•é—´éš”æ—¶é—´ï¼ˆç§’ï¼‰
<span class="hljs-symbol">base_url:</span>http://localhost:<span class="hljs-number">8000</span>/v1
<span class="hljs-symbol">concurrency:</span><span class="hljs-number">8</span># å¹¶å‘è¯·æ±‚æ•°
<span class="hljs-symbol">model_name:</span>MiniCPM4-<span class="hljs-number">8</span>B
<span class="hljs-symbol">retries:</span><span class="hljs-number">3</span># æœ€å¤§é‡è¯•æ¬¡æ•°
<span class="hljs-symbol">vllm:</span># vLLM æ¨ç†å¼•æ“é…ç½®
<span class="hljs-symbol">dtype:</span><span class="hljs-keyword">auto</span># è‡ªåŠ¨é€‰æ‹©ç²¾åº¦ï¼ˆå¦‚ fp16/bf16ï¼‰
<span class="hljs-symbol">gpu_ids:</span><span class="hljs-number">2</span>,<span class="hljs-number">3</span># æŒ‡å®š GPU ID
<span class="hljs-symbol">gpu_memory_utilization:</span><span class="hljs-number">0.9#</span> GPU æ˜¾å­˜åˆ©ç”¨ç‡ä¸Šé™
<span class="hljs-symbol">model_name_or_path:</span>openbmb/MiniCPM4-<span class="hljs-number">8</span>B
<span class="hljs-symbol">model_name_or_path:</span>Qwen/Qwen3-<span class="hljs-number">8</span>B
<span class="hljs-symbol">trust_remote_code:</span><span class="hljs-literal">true</span>
<span class="hljs-symbol">sampling_params:</span># é‡‡æ ·å‚æ•°ï¼ˆå½±å“ç”Ÿæˆå¤šæ ·æ€§ï¼‰
<span class="hljs-symbol">chat_template_kwargs:</span>
<span class="hljs-symbol">enable_thinking:</span><span class="hljs-literal">false</span># æ˜¯å¦å¯ç”¨æ€ç»´é“¾æ¨¡å¼
<span class="hljs-symbol">max_tokens:</span><span class="hljs-number">2048</span># æœ€å¤§ç”Ÿæˆé•¿åº¦
<span class="hljs-symbol">temperature:</span><span class="hljs-number">0.7#</span> æ¸©åº¦ç³»æ•°ï¼ˆè¶Šé«˜è¶Šéšæœºï¼‰
<span class="hljs-symbol">top_p:</span><span class="hljs-number">0.8#</span> nucleus sampling é˜ˆå€¼
<span class="hljs-symbol">system_prompt:</span><span class="hljs-comment">''# ç³»ç»Ÿæç¤ºè¯ï¼ˆå¯ç•™ç©ºï¼‰</span>

<span class="hljs-symbol">prompt:</span>
<span class="hljs-symbol">template:</span>prompt/qa_boxed.jinja
<span class="hljs-symbol">template:</span>prompt/qa_rag_boxed.jinja# ä½¿ç”¨çš„ Prompt æ¨¡æ¿è·¯å¾„ï¼ˆJinja æ ¼å¼ï¼‰

<span class="hljs-symbol">retriever:</span>
<span class="hljs-symbol">backend:</span>sentence_transformers# å‘é‡åŒ–åç«¯ï¼Œå¯é€‰ sentence_transformers / infinity / openai
<span class="hljs-symbol">backend_configs:</span>
<span class="hljs-symbol">infinity:</span># Infinity-Emb æ¨ç†é…ç½®
<span class="hljs-symbol">bettertransformer:</span><span class="hljs-literal">false</span>
<span class="hljs-symbol">device:</span>cuda
<span class="hljs-symbol">model_warmup:</span><span class="hljs-literal">false</span>
<span class="hljs-symbol">pooling_method:</span><span class="hljs-keyword">auto</span>
<span class="hljs-symbol">trust_remote_code:</span><span class="hljs-literal">true</span>
<span class="hljs-symbol">openai:</span># OpenAI Embedding API é…ç½®
<span class="hljs-symbol">api_key:</span><span class="hljs-comment">''</span>
<span class="hljs-symbol">base_url:</span>https://api.openai.com/v1
<span class="hljs-symbol">model_name:</span><span class="hljs-keyword">text</span>-embedding-<span class="hljs-number">3</span>-small
<span class="hljs-symbol">sentence_transformers:</span># SentenceTransformers æœ¬åœ°é…ç½®
<span class="hljs-symbol">device:</span>cuda
<span class="hljs-symbol">sentence_transformers_encode:</span>
<span class="hljs-symbol">encode_chunk_size:</span><span class="hljs-number">10000</span># æ¯æ‰¹ç¼–ç æ–‡æœ¬æ•°é‡
<span class="hljs-symbol">normalize_embeddings:</span><span class="hljs-literal">false</span># æ˜¯å¦å½’ä¸€åŒ–åµŒå…¥å‘é‡
<span class="hljs-symbol">psg_prompt_name:</span>document# passage ç¼–ç æç¤ºè¯åç§°
<span class="hljs-symbol">psg_task:</span>null# passage ä»»åŠ¡ç±»å‹
<span class="hljs-symbol">q_prompt_name:</span>query# query ç¼–ç æç¤ºè¯åç§°
<span class="hljs-symbol">q_task:</span>null# query ä»»åŠ¡ç±»å‹
<span class="hljs-symbol">trust_remote_code:</span><span class="hljs-literal">true</span>
<span class="hljs-symbol">batch_size:</span><span class="hljs-number">16</span># å‘é‡åŒ–æ‰¹å¤§å°
<span class="hljs-symbol">corpus_path:</span>data/corpus_example.jsonl# è¯­æ–™åº“è·¯å¾„
<span class="hljs-symbol">embedding_path:</span>embedding/embedding.npy# å‘é‡ä¿å­˜è·¯å¾„
<span class="hljs-symbol">faiss_use_gpu:</span><span class="hljs-literal">true</span># æ˜¯å¦å¯ç”¨ GPU åŠ é€Ÿçš„ Faiss
<span class="hljs-symbol">gpu_ids:</span><span class="hljs-number">0</span>,<span class="hljs-number">1</span># æŒ‡å®š GPU è®¾å¤‡
<span class="hljs-symbol">index_chunk_size:</span><span class="hljs-number">50000</span># æ¯æ‰¹æ„å»ºç´¢å¼•çš„æ–‡æ¡£æ•°
<span class="hljs-symbol">index_path:</span>index/index.index# ç´¢å¼•æ–‡ä»¶ä¿å­˜è·¯å¾„
<span class="hljs-symbol">is_multimodal:</span><span class="hljs-literal">false</span># æ˜¯å¦ä¸ºå¤šæ¨¡æ€æ£€ç´¢ï¼ˆå›¾æ–‡æ··åˆï¼‰
<span class="hljs-symbol">model_name_or_path:</span>openbmb/MiniCPM-Embedding-Light
<span class="hljs-symbol">model_name_or_path:</span>Qwen/Qwen3-Embedding-<span class="hljs-number">0.6</span>B# å‘é‡åŒ–æ¨¡å‹è·¯å¾„
<span class="hljs-symbol">overwrite:</span><span class="hljs-literal">false</span># æ˜¯å¦è¦†ç›–å·²æœ‰ embedding / index
<span class="hljs-symbol">query_instruction:</span><span class="hljs-comment">''# query å‰ç½®æŒ‡ä»¤ï¼ˆå¯ä¸ºç©ºï¼‰</span>
<span class="hljs-symbol">top_k:</span><span class="hljs-number">5</span># æ£€ç´¢è¿”å›çš„ Top-K æ–‡æ¡£æ•°
</code></pre>
<p>å¯ä»¥æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹å‚æ•°ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>å°† template è°ƒæ•´ä¸ºRAGæ¨¡ç‰ˆ prompt/qa_rag_boxed.jinjaï¼›</li>
<li>æ›¿æ¢æ£€ç´¢å™¨ä¸ç”Ÿæˆå™¨çš„ model_name_or_path ä¸ºæœ¬åœ°ä¸‹è½½çš„æ¨¡å‹è·¯å¾„ï¼›</li>
<li>è‹¥åœ¨å¤š GPU ç¯å¢ƒä¸‹è¿è¡Œï¼Œå¯ä¿®æ”¹ gpu_ids ä»¥åŒ¹é…å¯ç”¨è®¾å¤‡</li>
</ul>
<p><strong>Step 3ï¼šè¿è¡Œ Pipeline</strong></p>
<p>å½“å‚æ•°é…ç½®å®Œæˆåï¼Œå³å¯ä¸€é”®è¿è¡Œå®Œæ•´æµç¨‹ã€‚æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">ultrarag run examples/rag_full.yaml
</code></pre>
<p>ç³»ç»Ÿå°†ä¾æ¬¡æ‰§è¡Œé…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„å„ä¸ª Server ä¸ Toolï¼Œå¹¶åœ¨ç»ˆç«¯ä¸­å®æ—¶è¾“å‡ºè¿è¡Œæ—¥å¿—ä¸è¿›åº¦ä¿¡æ¯ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6ece8d468e1448895a892544cd7dacc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm66KeBQUdJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767336792&amp;x-signature=EyXDGwWMDdfWxRk44ArgBLLljnk%3D" alt="" loading="lazy"/></p>
<p>è¿è¡Œç»“æŸåï¼Œç»“æœï¼ˆå¦‚ç”Ÿæˆå†…å®¹ã€è¯„æµ‹æŠ¥å‘Šç­‰ï¼‰å°†è‡ªåŠ¨ä¿å­˜åœ¨å¯¹åº”çš„è¾“å‡ºè·¯å¾„ä¸­ï¼Œå¦‚</p>
<p>/output/memory_nq_demo_rag_20251203_031625.json</p>
<p>å¯ç›´æ¥ç”¨äºåç»­åˆ†æä¸å¯è§†åŒ–å±•ç¤º</p>
<p><strong>å¯è§†åŒ–æµ‹è¯„</strong></p>
<p>åœ¨è¿è¡Œå®Œæˆ yaml æ–‡ä»¶åï¼Œç³»ç»Ÿä¼šåœ¨ output æ–‡ä»¶å¤¹ä¸‹è‡ªåŠ¨ç”Ÿæˆä¸€ä»½ memory æ—¥å¿—æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š</p>
<p>/output/memory_nq_demo_rag_20251203_031625.json ã€‚</p>
<p>åªéœ€æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå³å¯å¯åŠ¨ Case Study å¯è§†åŒ–ç½‘ç«™</p>
<pre><code class="hljs language-css" lang="css">python ./script/case_study<span class="hljs-selector-class">.py</span> \
  <span class="hljs-attr">--data</span> output/memory_nq_demo_rag_20251203_031625<span class="hljs-selector-class">.json</span> \
  <span class="hljs-attr">--host</span> <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span> \
  <span class="hljs-attr">--port</span> <span class="hljs-number">8080</span> \
  <span class="hljs-attr">--title</span> "Case Study Viewer"
</code></pre>
<p>å¯è§†åŒ–æµ‹è¯„ç•Œé¢ï¼š</p>
<p>åŒ…å«å…·ä½“çš„ RAG æ‰§è¡Œæ­¥éª¤ï¼Œä»¥åŠå„ä¸ªæ­¥éª¤æ‰§è¡Œç»“æœ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f56f4c9cf76e4c42a4f7b8c6881ea18f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm66KeBQUdJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767336792&amp;x-signature=%2B%2FOkn7D9lxAuD0ECcAwETW0McVw%3D" alt="" loading="lazy"/></p>
<p>æ£€ç´¢å›çš„å†…å®¹ï¼š</p>
<p>æ‹¼æ¥åçš„prompt:</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb1fbe51376141abb4164d700cc3d435~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm66KeBQUdJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767336792&amp;x-signature=6j%2B3JKKgQoZ1szQHu5imHrzO6Jk%3D" alt="" loading="lazy"/></p>
<p>æ¨¡å‹è¾“å‡ºå†…å®¹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/807bee8b63164b49b14f955dd3c5d70d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm66KeBQUdJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767336792&amp;x-signature=KOS%2FfnArM3VT3CEMRK3q2Qv0kIQ%3D" alt="" loading="lazy"/></p>
<p><strong>ç»“è¯­</strong></p>
<p>UltraRAG ä»å¤„äºæ—©æœŸå‘å±•é˜¶æ®µï¼Œä½†å…¶æ‰€ä»£è¡¨çš„æ–¹å‘å·²ç»ååˆ†æ¸…æ™°ï¼š</p>
<ul>
<li>
<p>åœ¨æ¶æ„å±‚é¢ï¼Œå¼ºè°ƒåè®®åŒ–ä¸æ¨¡å—åŒ–</p>
</li>
<li>
<p>åœ¨å·¥ç¨‹å±‚é¢ï¼Œå¼ºè°ƒé…ç½®é©±åŠ¨ä¸å¯è§‚æµ‹æ€§</p>
</li>
<li>
<p>åœ¨ç³»ç»Ÿå½¢æ€ä¸Šï¼Œèµ°å‘å®æ—¶åŒ–ä¸å·¥å…·åŒ–</p>
</li>
</ul>
<p>å¯¹äºæ­£åœ¨æ„å»ºæˆ–è§„åˆ’ä¸‹ä¸€ä»£ RAG ç³»ç»Ÿçš„å›¢é˜Ÿè€Œè¨€ï¼ŒUltraRAG ä¸ MCP æ‰€æä¾›çš„æ€è·¯ï¼Œå…·æœ‰é‡è¦çš„å‚è€ƒä»·å€¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘è¯»äº†OpenAIçš„GPTâ€‘5.2æç¤ºæŒ‡å—ï¼Œè¿™æ ·ä½ å°±ä¸ç”¨è¯»äº†]]></title>    <link>https://juejin.cn/post/7587704265055567910</link>    <guid>https://juejin.cn/post/7587704265055567910</guid>    <pubDate>2025-12-26T05:32:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587704265055567910" data-draft-id="7587704265055551526" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘è¯»äº†OpenAIçš„GPTâ€‘5.2æç¤ºæŒ‡å—ï¼Œè¿™æ ·ä½ å°±ä¸ç”¨è¯»äº†"/> <meta itemprop="keywords" content="OpenAI,AIGC"/> <meta itemprop="datePublished" content="2025-12-26T05:32:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å®‰æ€æ´¾Anspire"/> <meta itemprop="url" content="https://juejin.cn/user/3044964115417419"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘è¯»äº†OpenAIçš„GPTâ€‘5.2æç¤ºæŒ‡å—ï¼Œè¿™æ ·ä½ å°±ä¸ç”¨è¯»äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3044964115417419/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å®‰æ€æ´¾Anspire
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T05:32:46.000Z" title="Fri Dec 26 2025 05:32:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸¤å‘¨å‰ï¼ŒChatGPTç»™å‡ºäº†ä¸€ä¸ªâ€œå®Œç¾â€ä½†æ¯«æ— ç”¨å¤„çš„ç­”æ¡ˆã€‚å®ƒå¬èµ·æ¥å¾ˆè‡ªä¿¡ï¼Œæ ¼å¼ä¹Ÿå¾ˆå¥½ï¼Œç”šè‡³è¿˜æœ‰ä¸€ä¸ªè®¡åˆ’ï¼Œä½†ä»ç„¶æ²¡æœ‰æŠ“ä½è¦ç‚¹ã€‚å°±åœ¨é‚£æ—¶ï¼Œæˆ‘çªç„¶æ˜ç™½äº†ï¼šå¤§å¤šæ•°äººæ²¡æœ‰â€œAIé—®é¢˜â€â€¦â€¦ä»–ä»¬æœ‰ä¸€ä¸ª</p>
<p>æç¤ºå½¢çŠ¶</p>
<p>é—®é¢˜ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopenai%2Fopenai-cookbook%2Fblob%2Fmain%2Fexamples%2Fgpt-5%2Fgpt-5-2_prompting_guide.ipynb" target="_blank" title="https://github.com/openai/openai-cookbook/blob/main/examples/gpt-5/gpt-5-2_prompting_guide.ipynb" ref="nofollow noopener noreferrer">OpenAIå®˜æ–¹çš„GPT5.2æç¤ºæŒ‡å—</a>åŸºæœ¬ä¸Šå°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„è“å›¾â€”â€”å°¤å…¶æ˜¯å¦‚æœä½ å°†ChatGPTç”¨äºå·¥ä½œï¼šå†™ä½œã€å­¦ä¹ ã€ç ”ç©¶ã€è§„åˆ’æˆ–å¼€å±•é¡¹ç›®ã€‚GPT5.2æ—¨åœ¨æ›´åŠ å‡†ç¡®ã€æ›´æœ‰çºªå¾‹æ€§ï¼Œå¹¶ä¸”åœ¨ç»“æ„åŒ–å·¥ä½œæµç¨‹æ–¹é¢è¡¨ç°æ›´å‡ºè‰²ï¼Œä½†å®ƒä»ç„¶å¯¹æé—®æ–¹å¼å¾ˆæ•æ„Ÿâ€”â€”è¯­æ°”ã€é•¿åº¦å’Œæ ¼å¼çš„é‡è¦æ€§è¶…å‡ºäººä»¬çš„æƒ³è±¡ã€‚</p>
<p>ä¸‹é¢æ˜¯æ·å¾„ï¼šæŒ‡å—ä¸­çš„ä¸€äº›æ¨¡å¼ï¼Œæ— éœ€æˆä¸ºå¼€å‘è€…å°±èƒ½å¯é åœ°ä½¿è¾“å‡ºæ›´æ¸…æ™°ã€æ›´ç®€çŸ­ã€æ›´å‡†ç¡®ã€‚</p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/63c779ee75cb4516b1b338e768009902~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767331965&amp;x-signature=ZMipSr5kJrVOL8d4%2FZ8H32oUUQQ%3D" alt="" loading="lazy"/></p>
<p>æ¥æºï¼šä½œè€…åˆ›ä½œ</p>
<h2 data-id="heading-0">å¿«é€Ÿç›®å½•</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.towardsai.net%2Fi-read-openais-gpt-5-2-prompting-guide-so-you-don-t-have-to-c5efcfd92d48" target="_blank" title="https://pub.towardsai.net/i-read-openais-gpt-5-2-prompting-guide-so-you-don-t-have-to-c5efcfd92d48" ref="nofollow noopener noreferrer">ä»»ä½•äººéƒ½å¯ä»¥ä½¿ç”¨çš„å•æç¤ºé…æ–¹æ¨¡å¼1ï¼šæ§åˆ¶é•¿åº¦ï¼ˆåœæ­¢æ–‡ç« ï¼‰æ¨¡å¼2ï¼šé˜²æ­¢èŒƒå›´è”“å»¶ï¼ˆåªåšæˆ‘è¦æ±‚çš„äº‹ï¼‰æ¨¡å¼3ï¼šé•¿ä¸Šä¸‹æ–‡ä¸”ä¸ä¸¢å¤±ç»†èŠ‚æ¨¡å¼4ï¼šæ¨¡ç³Šæ€§è§„åˆ™ï¼ˆä¸åšè‡ªä¿¡çŒœæµ‹ï¼‰æ¨¡å¼5ï¼š20ç§’è‡ªæˆ‘æ£€æŸ¥ï¼ˆé«˜é£é™©è¾“å‡ºï¼‰6ä¸ªç°å®ç”Ÿæ´»ä¸­çš„å¤åˆ¶/ç²˜è´´æç¤ºï¼ˆå­¦ç”Ÿã€åˆ›ä½œè€…ã€ç»ç†ç­‰ï¼‰æœ€ç»ˆå…¥é—¨å¥—ä»¶ï¼ˆä¿å­˜æ­¤éƒ¨åˆ†ï¼‰</a></p>
<h2 data-id="heading-1">éœ€è¦è®°ä½çš„ä¸€ä»¶äº‹</h2>
<p>ä¸æ—©æœŸç‰ˆæœ¬ç›¸æ¯”ï¼ŒGPT5.2å€¾å‘äºäº§ç”Ÿæ›´ç®€æ´çš„æ ¼å¼å’Œæ›´å°‘ä¸å¿…è¦çš„å†—é•¿ï¼Œä½†å½“æç¤ºæ¸…æ¥šåœ°å®šä¹‰ç­”æ¡ˆçš„â€œå½¢çŠ¶â€ï¼ˆé•¿åº¦ã€éƒ¨åˆ†å’Œ</p>
<p>ä¸</p>
<p>åšä»€ä¹ˆï¼‰æ—¶ï¼Œå®ƒçš„æ€§èƒ½æœ€å¥½ã€‚ ä¸è¦æŠŠæç¤ºçœ‹ä½œæ˜¯â€œé—®é—®é¢˜â€ï¼Œè€Œæ›´åƒæ˜¯â€œç¼–å†™ä¸€ä¸ªå¾®å°çš„è§„èŒƒâ€ï¼Œæ¨¡å‹å¯ä»¥å§‹ç»ˆå¦‚ä¸€åœ°éµå¾ªã€‚</p>
<p>ä»¥ä¸‹æ˜¯é€‚ç”¨äºå­¦ç”Ÿã€åˆ›ä½œè€…ã€ç®¡ç†è€…ä»¥åŠä»»ä½•åœ¨ChatGPTä¸­è¿›è¡Œä¸¥è‚ƒå·¥ä½œçš„äººçš„é€šç”¨æç¤ºé…æ–¹ï¼šè§’è‰² + ç›®æ ‡ + èƒŒæ™¯ + çº¦æŸæ¡ä»¶ + è¾“å‡ºæ ¼å¼ + è´¨é‡æ ‡å‡†ã€‚</p>
<p>å¤åˆ¶/ç²˜è´´æ¨¡æ¿ï¼ˆä¿æŒç®€å•å¹¶å¡«å†™æ‹¬å·ï¼‰ï¼š</p>
<p>è§’è‰²ï¼šä½ æ˜¯ä¸€å[æ•™ç»ƒ/ç¼–è¾‘/åˆ†æå¸ˆ/å¯¼å¸ˆ/é¡¹ç›®åŠ©ç†]ã€‚ ç›®æ ‡ï¼šå¸®åŠ©æˆ‘å®ç°[ç‰¹å®šæˆæœ]ã€‚ èƒŒæ™¯ä¿¡æ¯ï¼šä»¥ä¸‹æ˜¯ä½ éœ€è¦äº†è§£çš„å†…å®¹ï¼š -[èƒŒæ™¯æƒ…å†µ] -[å—ä¼—ç¾¤ä½“] -[æˆ‘å·²æœ‰çš„å†…å®¹/æˆ‘å°è¯•è¿‡çš„æ–¹æ³•] é™åˆ¶æ¡ä»¶ï¼š -ä¸è¦[æ·»åŠ æ–°çš„å‡è®¾/ç¼–é€ æ•°æ®/æ·»åŠ é¢å¤–çš„ç« èŠ‚]ã€‚ -å¦‚æœæœ‰ä¿¡æ¯ç¼ºå¤±ï¼Œ[æœ€å¤šè¯¢é—®3ä¸ªé—®é¢˜]æˆ–[æ˜ç¡®é™ˆè¿°å‡è®¾]ã€‚ -å†…å®¹æ§åˆ¶åœ¨[Xå¥è¯]æˆ–[Yä¸ªè¦ç‚¹]ä»¥å†…ã€‚ è¾“å‡ºæ ¼å¼ï¼š -ç¬¬1éƒ¨åˆ†ï¼š[ç®€çŸ­å›ç­”] -ç¬¬2èŠ‚ï¼š[é¡¹ç›®ç¬¦å·/è¡¨æ ¼/æ¸…å•] -ç¬¬3èŠ‚ï¼š[ä¸‹ä¸€æ­¥è®¡åˆ’] è´¨é‡æ ‡å‡†ï¼š -ä½¿ç”¨ç®€å•çš„è¯­è¨€ã€‚ -å…·ä½“ä¸”å¯æ“ä½œã€‚ -å¦‚æœä¸ç¡®å®šï¼Œè¯´æ˜ä»€ä¹ˆå–å†³äºä»€ä¹ˆã€‚</p>
<h2 data-id="heading-2">æ¨¡å¼1ï¼šæ§åˆ¶é•¿åº¦ï¼ˆå¦åˆ™ChatGPTä¼šï¼‰</h2>
<p>ã€ŠGPT5.2æŒ‡å—ã€‹ä¸­æœ€å®ç”¨çš„ç»éªŒä¹‹ä¸€å¾ˆç›´ç™½ï¼šå¦‚æœä½ ä¸è®¾å®šé•¿åº¦é™åˆ¶ï¼Œå°±ç­‰äºè®©æ¨¡å‹æ¥å†³å®šä»€ä¹ˆæ˜¯â€œè¶³å¤Ÿâ€ã€‚ GPT5.2é€šå¸¸æ²¡é‚£ä¹ˆå•°å—¦ï¼Œä½†å®ƒä»ç„¶æ˜¯å¯æ§çš„â€”â€”æ‰€ä»¥å½“ä½ æƒ³è¦ä¸€è‡´çš„è¾“å‡ºï¼ˆå°¤å…¶æ˜¯ç”¨äºå·¥ä½œæ—¶ï¼‰ï¼Œæ˜ç¡®çš„é•¿åº¦é™åˆ¶ä¼šäº§ç”Ÿå¾ˆå¤§çš„å½±å“ã€‚</p>
<p>å½“ä½ æƒ³è¦ç®€æ´æ˜äº†ã€ä¸å†—é•¿çš„å›ç­”æ—¶ï¼Œè¯·ä½¿ç”¨æ­¤åŠŸèƒ½ï¼š</p>
<p>å›ç­”è¦æ±‚ï¼š - 1ä¸ªç®€çŸ­æ®µè½ï¼ˆæœ€å¤š4å¥è¯ï¼‰ - ç„¶åæœ€å¤š5ä¸ªè¦ç‚¹ï¼šâ€œå…³é”®äº‹é¡¹â€ã€â€œåŸå› â€ã€â€œä¸‹ä¸€æ­¥è¡ŒåŠ¨â€ã€â€œé£é™©â€ã€â€œå¼€æ”¾æ€§é—®é¢˜â€ æ— é¢å¤–è¯„è®ºã€‚</p>
<p>è¿™ç§å¤¹å…·æ­£æ˜¯å°†â€œèªæ˜ä½†è¯å¤šâ€è½¬å˜ä¸ºâ€œæœ‰ç”¨ä¸”å¯é¢„æµ‹â€çš„å…³é”®æ‰€åœ¨ã€‚</p>
<h2 data-id="heading-3">æ¨¡å¼2ï¼šéåˆ¶èŒƒå›´è”“å»¶ï¼ˆç¤¼è²Œä½†åšå®šåœ°ï¼‰</h2>
<p>GPT5.2å¯èƒ½ä¼šé™·å…¥ä¸€ä¸ªé™·é˜±ï¼Œå› ä¸ºå®ƒ</p>
<p>å¤ªå‡ºè‰²äº†</p>
<p>ï¼šå®ƒå¯èƒ½ä¼šåšä¸€äº›ä½ æ²¡æœ‰è¦æ±‚çš„â€œé¢å¤–â€å·¥ä½œâ€”â€”é¢å¤–çš„åŠŸèƒ½ã€é¢å¤–çš„æ­¥éª¤ã€é¢å¤–çš„æ ¼å¼ã€é¢å¤–çš„æƒ³æ³•ã€‚ åœ¨æŒ‡å—ä¸­ï¼Œè§£å†³æ–¹æ³•æ˜¯æ˜ç¡®çš„èŒƒå›´çº¦æŸï¼šå‘Šè¯‰æ¨¡å‹åªå®ç°ä½ æ‰€è¦æ±‚çš„å†…å®¹ï¼Œå¹¶å°†å…¶ä»–ä¸€åˆ‡è§†ä¸ºå¯é€‰ã€‚</p>
<p>æ— è®ºä½•æ—¶ï¼Œåªè¦ä½ æƒ³ä¸“æ³¨äºæ‰‹å¤´çš„ä»»åŠ¡ï¼ˆå¦‚é‚®ä»¶ã€è®¡åˆ’ã€å¤§çº²ã€ææ¡ˆï¼Œç”šè‡³äººç”Ÿå†³ç­–ï¼‰ï¼Œå°±ä½¿ç”¨è¿™ä¸ªæ¨¡å—ï¼š</p>
<p>ä¸¥æ ¼æŒ‰ç…§æˆ‘çš„è¦æ±‚å»åšâ€”â€”ä¸è¦å¤šåšã€‚ -ä¸è¦æ·»åŠ é¢å¤–çš„éƒ¨åˆ†ã€åŠŸèƒ½æˆ–â€œé”¦ä¸Šæ·»èŠ±â€çš„å†…å®¹ã€‚ -å¦‚æœä½ å‘ç°æœ‰æ”¹è¿›ä¹‹å¤„ï¼Œå°†å®ƒä»¬åˆ—åœ¨â€œå¯é€‰å»ºè®®â€ä¸‹ï¼Œä½†ä¸è¦å®æ–½ã€‚ -å½“å‡ºç°æ­§ä¹‰æ—¶ï¼Œé€‰æ‹©æœ€ç®€å•åˆç†çš„è§£é‡Šã€‚</p>
<p>è¿™ä¸ªå•ä¸€çº¦æŸèŠ‚çœäº†æ—¶é—´ï¼Œå› ä¸ºå®ƒé˜»æ­¢äº†â€œæœ‰ç›Šçš„ç»•é“â€å¾ªç¯ã€‚</p>
<h2 data-id="heading-4">æ¨¡å¼3ï¼šé•¿æ–‡æœ¬ï¼Ÿå¼ºåˆ¶é‡æ–°å®šä½</h2>
<p>å¦‚æœä½ ç²˜è´´é•¿å†…å®¹â€”â€”ä¼šè®®è®°å½•ã€åˆåŒã€ç ”ç©¶æŠ¥å‘Šã€æ‚ä¹±çš„å¯¹è¯â€”â€”å¤§å¤šæ•°äººéƒ½æœŸæœ›ChatGPTâ€œèƒ½æå®šâ€ã€‚ä½†å®ƒå´ä¼šé—æ¼ç»†èŠ‚ï¼Œè¿˜è‡ªä¿¡æ»¡æ»¡åœ°æ€»ç»“å‡ºé”™è¯¯çš„å†…å®¹ã€‚</p>
<p>ã€ŠGPT5.2æŒ‡å—ã€‹å»ºè®®é’ˆå¯¹é•¿ä¸Šä¸‹æ–‡é‡‡ç”¨é‡æ–°é”šå®šæ¨¡å¼ï¼šæ¦‚è¿°å…³é”®å†…å®¹ï¼Œé‡ç”³çº¦æŸæ¡ä»¶ï¼Œç„¶ååœ¨å›ç­”æ—¶å°†è®ºç‚¹é”šå®šåˆ°æ–‡æœ¬çš„ç›¸å…³éƒ¨åˆ†ã€‚ è¿™å¯ä»¥å‡å°‘â€œè¿·å¤±åœ¨æ»šåŠ¨ä¸­â€çš„é”™è¯¯ï¼Œå¹¶æé«˜å¯¹å¯†é›†è¾“å…¥çš„å¬å›ç‡ã€‚</p>
<p>å½“ä½ çš„è¾“å…¥è¾ƒé•¿ï¼ˆæˆ–è€…ä½ </p>
<p>éå¸¸</p>
<p>åœ¨æ„å‡†ç¡®æ€§æ—¶ï¼‰ï¼Œè¯·ä½¿ç”¨æ­¤åŠŸèƒ½ï¼š</p>
<p>å›ç­”å‰ï¼š 1) ä»ç²˜è´´çš„æ–‡æœ¬ä¸­åˆ—å‡º5 - 8ä¸ªæœ€ç›¸å…³çš„è¦ç‚¹ï¼ˆç®€çŸ­çš„è¦ç‚¹åˆ—è¡¨ï¼‰ã€‚ 2) ç”¨è‡ªå·±çš„è¯é‡è¿°æˆ‘çš„é™åˆ¶æ¡ä»¶ï¼ˆ1 - 2å¥è¯ï¼‰ã€‚ 3) ç„¶åå›ç­”ï¼Œå¹¶æ³¨æ˜æ¯ä¸ªå…³é”®ä¸»å¼ çš„æ¥æºï¼ˆä¾‹å¦‚ï¼Œâ€œæ¥è‡ªå®šä»·éƒ¨åˆ† / æ¥è‡ªå…³äºXçš„æ®µè½â€ï¼‰ã€‚ å¦‚æœæœ‰ä¿¡æ¯ç¼ºå¤±ï¼Œä¸è¦çŒœæµ‹â€”â€”æœ€å¤šé—®3ä¸ªé—®é¢˜ã€‚</p>
<p>æ­¤å¤–ï¼šä½¿ç”¨æ¸…æ™°çš„æ ‡ç­¾ï¼ˆä¾‹å¦‚ï¼Œâ€œè¯´æ˜ï¼šâ€ï¼Œç„¶åæ˜¯â€œæºæ–‡æœ¬ï¼šâ€ï¼‰å°†æŒ‡ä»¤ä¸ç²˜è´´çš„å†…å®¹åˆ†å¼€ï¼Œè¿™æ ·æ¨¡å‹å°±ä¸ä¼šå°†å®ƒä»¬æ··æ·†ã€‚</p>
<h2 data-id="heading-5">æ¨¡å¼4ï¼šå½“é—®é¢˜æ¨¡ç³Šä¸æ¸…æ—¶ï¼Œä¸è¦è®©ç­”æ¡ˆè£…ä½œå®ƒä¸æ˜¯è¿™æ ·</h2>
<p>è¿™å°±æ˜¯â€œç—…æ¯’å¼â€ChatGPTå¸–å­çš„æ— å£°æ€æ‰‹ï¼šå³ä½¿æç¤ºæ¨¡ç³Šï¼Œæ¨¡å‹å¬èµ·æ¥ä¹Ÿå¾ˆç¡®å®šã€‚GPT5.2æŒ‡å—æ˜ç¡®å»ºè®®é€šè¿‡å¼ºåˆ¶é‡‡å–ä»¥ä¸‹ä¸¤ç§è¡Œä¸ºä¹‹ä¸€æ¥é˜²èŒƒè¿‡åº¦è‡ªä¿¡çš„å›ç­”ï¼šé—®å‡ ä¸ªæ¾„æ¸…æ€§é—®é¢˜ï¼Œæˆ–è€…æå‡ºå‡ ç§è§£é‡Šå¹¶æ˜ç¡®æ ‡æ³¨å‡è®¾ã€‚</p>
<p>ä¸‹é¢è¿™ä¸ªæ¨¡å—èƒ½å°†â€œè‡ªä¿¡çš„èƒ¡è¨€ä¹±è¯­â€è½¬åŒ–ä¸ºâ€œæœ‰ç”¨çš„æ€è€ƒâ€ï¼š</p>
<p>å¦‚æœæˆ‘çš„è¯·æ±‚å«ç³Šä¸æ¸…æˆ–ç¼ºå°‘å…³é”®ä¿¡æ¯ï¼š -ç”¨ä¸€å¥è¯æŒ‡å‡ºç¼ºå°‘çš„å†…å®¹ã€‚ -ç„¶åæ‰§è¡Œä»¥ä¸‹æ“ä½œä¹‹ä¸€ï¼š A) æœ€å¤šè¯¢é—®3ä¸ªæ¾„æ¸…é—®é¢˜ï¼Œæˆ– B) æä¾›2 - 3ç§åˆç†çš„è§£é‡Šï¼Œæ¯ç§è§£é‡Šéƒ½æœ‰æ˜ç¡®çš„å‡è®¾ã€‚ ä¸ç¡®å®šæ—¶ï¼Œåˆ‡å‹¿ç¼–é€ ç¡®åˆ‡çš„æ•°å­—ã€å¼•ç”¨æˆ–å‚è€ƒèµ„æ–™ã€‚</p>
<p>è¿™ä¸OpenAIå…³äºChatGPTçš„ä¸€èˆ¬æç¤ºå»ºè®®ç›¸ç¬¦ï¼šè¦æ¸…æ™°æ˜ç¡®ï¼Œå¹¶åœ¨çœ‹åˆ°ç¬¬ä¸€ä¸ªè¾“å‡ºåè¿›è¡Œè¿­ä»£ä¼˜åŒ–ã€‚</p>
<h2 data-id="heading-6">æ¨¡å¼5ï¼šé˜²æ­¢ä»£ä»·é«˜æ˜‚é”™è¯¯çš„â€œè‡ªæˆ‘æ£€æŸ¥â€</h2>
<p>å¤§å¤šæ•°äººä½¿ç”¨ChatGPTå°±åƒä½¿ç”¨è‡ªåŠ¨å”®è´§æœºä¸€æ ·ï¼šè¾“å…¥æç¤ºï¼Œæ¥æ”¶ç­”æ¡ˆï¼Œç„¶åå°±å®Œäº‹äº†ã€‚ä½†è¯¥æŒ‡å—å»ºè®®åœ¨é«˜é£é™©åœºæ™¯ï¼ˆæ³•å¾‹ã€é‡‘èã€åˆè§„ã€å®‰å…¨ï¼‰ä¸­å¢åŠ ä¸€ä¸ªå¿«é€Ÿçš„è‡ªæˆ‘æ£€æŸ¥ç¯èŠ‚ï¼Œä»¥å‘ç°æœªé˜æ˜çš„å‡è®¾å’Œç¼ºä¹ä¾æ®çš„ç»†èŠ‚ã€‚</p>
<p>å³ä½¿ä½ ä¸ä»äº‹â€œæ³•å¾‹å·¥ä½œâ€ï¼Œè¿™å¯¹æ—¥å¸¸ç”Ÿæ´»æ¥è¯´ä¹Ÿæ˜¯å®è´µçš„ï¼šåˆåŒã€å·¥ä½œé‚€çº¦ã€å®šä»·é¡µé¢ã€æ”¿ç­–ã€åŒ»ç–—ä¿¡æ¯ï¼Œæˆ–è€…ä»»ä½•ç»†èŠ‚é”™è¯¯ä¼šäº§ç”Ÿå½±å“çš„å†…å®¹ã€‚</p>
<p>å¤åˆ¶/ç²˜è´´ï¼š</p>
<p>åœ¨æœ€ç»ˆç¡®å®šä¹‹å‰ï¼š -æ£€æŸ¥ä½ çš„å›ç­”ä¸­æ˜¯å¦æœ‰ä»»ä½•æœªåŸºäºæˆ‘æä¾›å†…å®¹çš„å…·ä½“æ•°å­—ã€æ—¥æœŸæˆ–ä¸»å¼ ã€‚ -æ‰¾å‡ºä»»ä½•æœªæ˜ç¡®è¯´æ˜çš„å‡è®¾ã€‚ -åœ¨é€‚å½“çš„æ—¶å€™ï¼Œç”¨æœ‰æ¡ä»¶çš„è¯­è¨€æ›¿æ¢è¿‡äºç»å¯¹çš„è¯­è¨€ã€‚ åªæœ‰åœ¨å®Œæˆæ­¤æ£€æŸ¥åï¼Œæ‰è¿”å›æœ€ç»ˆç­”æ¡ˆã€‚</p>
<p>è¿™åŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªå¾®å°çš„è´¨é‡æ§åˆ¶å¾ªç¯ï¼Œä¹Ÿæ˜¯è¿­ä»£ä¼˜åŒ–åœ¨æç¤ºè¯æœ€ä½³å®è·µä¸­è¢«åå¤æ¨èçš„åŸå› ä¹‹ä¸€ã€‚</p>
<h2 data-id="heading-7">â€œ6ä¸ªä½ æ¯å‘¨éƒ½ä¼šç”¨åˆ°çš„æç¤ºâ€</h2>
<p>ç°åœ¨æ¥è°ˆè°ˆè®©è¿™ç¯‡æ–‡ç« çœŸæ­£å¯¹ä»»ä½•äººéƒ½æœ‰ç”¨çš„éƒ¨åˆ†ï¼šç°æˆå¯ç”¨çš„æç¤ºè¯ï¼Œå…¶ä¸­èå…¥äº†ä¸Šè¿°äº”ç§æ¨¡å¼ï¼ˆå½¢çŠ¶ã€é•¿åº¦ã€èŒƒå›´ã€ä¾æ®ã€æ­§ä¹‰å¤„ç†ã€è‡ªæˆ‘æ£€æŸ¥ï¼‰ã€‚</p>
<ol>
<li>å­¦ç”Ÿï¼šå°†æ‚ä¹±çš„ç¬”è®°æ•´ç†æˆå­¦ä¹ è®¡åˆ’</li>
</ol>
<hr/>
<p>è§’è‰²ï¼šä½ æ˜¯æˆ‘çš„å­¦ä¹ æ•™ç»ƒã€‚ ç›®æ ‡ï¼šå°†æˆ‘çš„ç¬”è®°è½¬åŒ–ä¸º7å¤©å­¦ä¹ è®¡åˆ’å’Œä¸€ä»½æµ‹éªŒã€‚ æºç¬”è®°ï¼š [ç²˜è´´ç¬”è®°] é™åˆ¶æ¡ä»¶ï¼š -å¦‚æœæœ‰ä»»ä½•ä¸»é¢˜ä¸æ¸…æ¥šï¼Œæœ€å¤šé—®3ä¸ªé—®é¢˜ã€‚ -ä¸è¦ç¼–é€ ç¬”è®°ä¸­æ²¡æœ‰çš„äº‹å®ã€‚ -ä¿æŒç®€æ´ã€‚ è¾“å‡ºæ ¼å¼ï¼š 1) â€œå­¦ä¹ å†…å®¹â€ï¼ˆæœ€å¤š8é¡¹è¦ç‚¹ï¼‰ 2) 7å¤©è®¡åˆ’ï¼ˆè¡¨æ ¼ï¼šæ—¥æœŸ | ä¸»é¢˜ | ç»ƒä¹ ä»»åŠ¡ï¼‰ 3) 10é“æµ‹éªŒé¢˜ + ç­”æ¡ˆ</p>
<h2 data-id="heading-8">2)åˆ›ä½œè€…ï¼šå¤§çº²â†’åˆç¨¿â†’æœ‰åŠ›æ”¹å†™ï¼ˆé€‚åˆä¼ æ’­ï¼‰</h2>
<p>è§’è‰²ï¼šä½ æ˜¯é¢å‘Mediumè¯»è€…çš„æ•é”ç¼–è¾‘ã€‚ ç›®æ ‡ï¼šåˆ›å»ºä¸€ä¸ªå¯ç‚¹å‡»çš„å¤§çº²å’Œåˆç¨¿ã€‚ èƒŒæ™¯ï¼š -ä¸»é¢˜ï¼š[ä½ çš„ä¸»é¢˜] -å—ä¼—ï¼š[åˆå­¦è€… / å»ºè®¾è€… / åˆ›å§‹äºº] -è¯­æ°”ï¼šç®€æ´ã€ç›´æ¥ã€æœ‰æ•…äº‹æ€§ã€‚ é™åˆ¶æ¡ä»¶ï¼š -æ— æ³›æ³›è€Œè°ˆçš„å¡«å……å†…å®¹ã€‚ -ä¿æŒå„éƒ¨åˆ†ç®€çŸ­ã€‚é¿å…é•¿æ®µè½ã€‚ -æ·»åŠ 3æ¡â€œå¸ç›é‡‘å¥â€ï¼ˆå¯å‘æ¨æ–‡çš„ä¸€å¥è¯ï¼‰ï¼Œä¸”ä¸ä»¤äººå°´å°¬ã€‚ è¾“å‡ºï¼š 1) å¸¦æœ‰äºŒçº§æ ‡é¢˜å’Œè¦ç‚¹çš„å¤§çº² 2) åˆç¨¿å¼•è¨€ï¼ˆ150 - 200å­—ï¼‰ 3) 3æ¡å¸ç›é‡‘å¥</p>
<p>DataCampçš„æç¤ºç¤ºä¾‹çªå‡ºäº†ç›¸åŒçš„æ¨¡å¼ï¼šè¯´æ˜é€‚ç”¨å¯¹è±¡ã€å­˜åœ¨åŸå› ä»¥åŠæ‰€éœ€æ ¼å¼ï¼Œè¿™æ ·æ¨¡å‹å°±æ— éœ€çŒœæµ‹ã€‚</p>
<ol start="3">
<li>ä¸“ä¸šï¼šæ’°å†™èƒ½å¾—åˆ°å®é™…å›å¤çš„é‚®ä»¶</li>
</ol>
<hr/>
<p>è§’è‰²ï¼šä½ æ˜¯æˆ‘çš„æ²Ÿé€šåŠ©ç†ã€‚ ç›®æ ‡ï¼šæ’°å†™ä¸€å°èƒ½å¾—åˆ°å›å¤çš„æ¸…æ™°é‚®ä»¶ã€‚ èƒŒæ™¯ï¼š -æ”¶ä»¶äººï¼š[è€æ¿/å®¢æˆ·/æ•™æˆ] -å…³ç³»ï¼š[æ­£å¼/éšæ„] -ç›®çš„ï¼š[è¯¢é—®ã€æ›´æ–°ã€è¯·æ±‚ã€æ¨è¿Ÿ] é™åˆ¶æ¡ä»¶ï¼š -æœ€å¤š120å­—ã€‚ -æä¾›2ç§è¯­æ°”é€‰é¡¹ï¼šâ€œç›´æ¥â€å’Œâ€œçƒ­æƒ…â€ã€‚ -ä¸è¦æ·»åŠ é¢å¤–çš„æ‰¿è¯ºæˆ–ä¿è¯ã€‚ è¾“å‡ºï¼š -ä¸»é¢˜è¡Œ -é‚®ä»¶æ­£æ–‡ -1å¥è¯çš„è·Ÿè¿›æ¶ˆæ¯ï¼ˆ48å°æ—¶åå‘é€ï¼‰</p>
<h2 data-id="heading-9">4)ä¼šè®®ï¼šå°†æ‚ä¹±çš„ä¼šè®®è®°å½•è½¬åŒ–ä¸ºè¡ŒåŠ¨</h2>
<p>è§’è‰²ï¼šä½ æ˜¯é¡¹ç›®åŠ©ç†ã€‚ ç›®æ ‡ï¼šä»æœ¬æ¬¡ä¼šè®®æ–‡æœ¬ä¸­æå–è¡ŒåŠ¨é¡¹ã€‚ ä¼šè®®æ–‡æœ¬ï¼š [paste] çº¦æŸæ¡ä»¶ï¼š -å¦‚æœè´Ÿè´£äºº/æ—¥æœŸç¼ºå¤±ï¼Œå°†å…¶è®¾ç½®ä¸º "TBD"ï¼ˆä¸è¦çŒœæµ‹ï¼‰ã€‚ -ä¿æŒç»“æ„æ¸…æ™°ã€‚ è¾“å‡ºï¼š 1) å†³ç­–ï¼ˆé¡¹ç›®ç¬¦å·ï¼‰ 2) è¡ŒåŠ¨é¡¹ï¼ˆè¡¨æ ¼ï¼šä»»åŠ¡ | è´Ÿè´£äºº | æˆªæ­¢æ—¥æœŸ | ä¾èµ–å…³ç³» | é£é™©ï¼‰ 3) æœªå†³é—®é¢˜ï¼ˆæœ€å¤š6ä¸ªï¼‰</p>
<p>è¿™æ˜¯GPT5.2æŒ‡å—ä¸­çš„â€œç»“æ„åŒ–æå–â€ç²¾ç¥ï¼šå®šä¹‰ä¸€ä¸ªæ¨¡å¼ï¼ŒåŒºåˆ†å¿…å¡«é¡¹å’Œé€‰å¡«é¡¹ï¼Œå¹¶æ˜ç¡®è¡¨ç¤ºç¼ºå¤±å­—æ®µï¼Œè€Œä¸æ˜¯çŒœæµ‹ã€‚</p>
<ol start="5">
<li>äººç”ŸæŠ‰æ‹©ï¼šæ˜æ™ºé€‰æ‹©ï¼Œé¿å…é™·å…¥å›°å¢ƒ</li>
</ol>
<hr/>
<p>è§’è‰²ï¼šä½ æ˜¯ä¸€ä½åŠ¡å®çš„å†³ç­–æ•™ç»ƒã€‚ ç›®æ ‡ï¼šå¸®åŠ©æˆ‘åœ¨å„é€‰é¡¹é—´åšå‡ºå†³ç­–ï¼Œé¿å…è¿‡åº¦æ€è€ƒã€‚ æˆ‘çš„é€‰é¡¹ï¼š A) [é€‰é¡¹] B) [é€‰é¡¹] C) [é€‰é¡¹] æˆ‘çš„é™åˆ¶æ¡ä»¶ï¼š -é¢„ç®—ï¼š[ ] -æ—¶é—´ï¼š[ ] -é£é™©æ‰¿å—èƒ½åŠ›ï¼š[ä½/ä¸­/é«˜] -æˆ‘æœ€çœ‹é‡çš„ï¼š[ ] è§„åˆ™ï¼š -å¦‚æœæœ‰ä¿¡æ¯ç¼ºå¤±ï¼Œæœ€å¤šé—®3ä¸ªé—®é¢˜ã€‚ -é™¤éæˆ‘è¦æ±‚ï¼Œå¦åˆ™ä¸è¦å¼•å…¥æ–°é€‰é¡¹ã€‚ è¾“å‡ºï¼š 1) 5è¡Œå»ºè®® 2) æ¯”è¾ƒè¡¨ï¼ˆæ ‡å‡† | A | B | Cï¼‰ 3) â€œå¦‚æœä½ é€‰æ‹©Aï¼Œæ¥ä¸‹æ¥è¿™ä¹ˆåšâ€ï¼ˆ3ä¸ªæ­¥éª¤ï¼‰</p>
<ol start="6">
<li>ç ”ç©¶ï¼šâ€œä¸è¦çŒœæµ‹â€”â€”è¦æœ‰ä¾æ®â€</li>
</ol>
<hr/>
<p>å¦‚æœä½ è¦åœ¨ChatGPTå†…è¿›è¡Œç½‘ç»œç ”ç©¶ï¼Œå®˜æ–¹GPT5.2æŒ‡å—å»ºè®®é¢„å…ˆè®¾å®šç ”ç©¶æ ‡å‡†ï¼ˆç ”ç©¶æ·±åº¦ã€æ˜¯å¦è§£å†³çŸ›ç›¾ä»¥åŠæ˜¯å¦ä½¿ç”¨å¼•ç”¨ï¼‰ã€‚ ç”¨æ³•ï¼š</p>
<p>æ‹…ä»»ç ”ç©¶åŠ©ç†ã€‚ ä»»åŠ¡ï¼šç ”ç©¶[ä¸»é¢˜]ã€‚ è§„åˆ™ï¼š -å½“äº‹å®ä¸ç¡®å®šæ—¶ï¼Œä¼˜å…ˆè¿›è¡Œç½‘ç»œç ”ç©¶ï¼Œè€Œéä»…å‡­å‡è®¾ã€‚ -è§£å†³çŸ›ç›¾ï¼Œå¹¶ä¸ºå…³é”®ä¸»å¼ å¼•ç”¨æ¥æºã€‚ -å½“é¢å¤–ç ”ç©¶ä¸å¤ªå¯èƒ½æ”¹å˜ç»“è®ºæ—¶åœæ­¢ã€‚ è¾“å‡ºï¼š -å…³é”®å‘ç°ï¼ˆè¦ç‚¹ï¼‰ -çŸ›ç›¾+è§£å†³æ–¹æ¡ˆ -å®é™…æ”¶è·</p>
<p>è¿™ç§é£æ ¼ç¬¦åˆOpenAIå…³äºä½¿ç”¨æ¸…æ™°æŒ‡ä»¤å’Œç»“æ„åŒ–æç¤ºï¼ˆåŒ…æ‹¬ä½¿ç”¨åˆ†éš”ç¬¦å°†æŒ‡ä»¤ä¸ä¸Šä¸‹æ–‡åˆ†å¼€ï¼‰çš„ä¸€èˆ¬æŒ‡å¯¼åŸåˆ™ã€‚</p>
<h2 data-id="heading-10">å…³é—­</h2>
<p>å¦‚æœè¯´æœ‰ä¸€ä¸ªå€¼å¾—ä»å®˜æ–¹GPT5.2æç¤ºæŒ‡å—ä¸­å€Ÿé‰´çš„ç†å¿µï¼Œé‚£å°±æ˜¯ï¼šGPT5.2æ¯”æ—§æ¨¡å‹æ›´æœ‰çºªå¾‹æ€§ï¼Œä½†å®ƒä¼šå¯¹æ˜ç¡®çš„çº¦æŸæ¡ä»¶ç»™äºˆå›æŠ¥â€”â€”åŒ…æ‹¬é•¿åº¦ã€èŒƒå›´ã€ç»“æ„å’Œâ€œä¸è¦çŒœæµ‹â€è§„åˆ™ã€‚ å› æ­¤ï¼Œä¸å…¶å¯»æ‰¾â€œ<strong>ç¥å¥‡æç¤ºè¯</strong>â€ï¼Œä¸å¦‚å»ºç«‹ä¸€ä¸ªå°å‹çš„ä¸ªäººæ¨¡æ¿åº“ï¼šä¸€ä¸ªç”¨äº<strong>å†™ä½œ</strong>ï¼Œä¸€ä¸ªç”¨äº<strong>å­¦ä¹ </strong>ï¼Œä¸€ä¸ªç”¨äº<strong>å†³ç­–</strong>ï¼Œä¸€ä¸ªç”¨äº<strong>æ€»ç»“</strong>ï¼Œä¸€ä¸ªç”¨äº<strong>ç ”ç©¶</strong>â€”â€”å¹¶åå¤ä½¿ç”¨å®ƒä»¬ï¼Œç›´åˆ°ä½ è§‰å¾—åŒçƒ¦ä¸ºæ­¢ã€‚ å› ä¸ºçœŸæ­£çš„ä¼˜åŠ¿ä¸åœ¨äºå·§å¦™çš„æç¤ºè¯ï¼Œè€Œåœ¨äºå¯é‡å¤çš„å·¥ä½œæµç¨‹ï¼šå®šä¹‰è¾“å‡ºå½¢å¼ã€é˜²æ­¢èŒƒå›´è”“å»¶ã€é‡æ–°æ¢³ç†é•¿ä¸Šä¸‹æ–‡ï¼Œå¹¶åœ¨è¾“å…¥æ¨¡ç³Šæ—¶è¿«ä½¿æ¨¡å‹æ‰¿è®¤ä¸ç¡®å®šæ€§ã€‚</p>
<p>è¿™æ˜¯æœ€ç»ˆçš„â€œä¿å­˜æ­¤å†…å®¹â€å…¥é—¨å¥—ä»¶ï¼ˆå°†å…¶å›ºå®šä¸ºä¾¿ç­¾ï¼‰ï¼š</p>
<ul>
<li>
<p>â€œç”¨Xå¥è¯+Yä¸ªè¦ç‚¹å›ç­”ï¼Œæ— å…¶ä»–è¦æ±‚ã€‚â€</p>
</li>
<li>
<p>â€œä¸¥æ ¼æŒ‰ç…§æˆ‘çš„è¦æ±‚å»åšï¼›å°†é¢å¤–äº‹é¡¹åˆ—ä¸ºå¯é€‰ï¼Œä¸è¦å»åšã€‚â€</p>
</li>
<li>
<p>â€œå¦‚æœæ–‡æœ¬è¾ƒé•¿ï¼šåˆ—å‡ºå¤§çº² â†’ é‡ç”³çº¦æŸæ¡ä»¶ â†’ ç­”æ¡ˆä¸å„éƒ¨åˆ†ç›¸å…³è”ã€‚â€</p>
</li>
<li>
<p>â€œå¦‚æœå­˜åœ¨æ­§ä¹‰ï¼šæœ€å¤šè¯¢é—®3ä¸ªé—®é¢˜æˆ–å±•ç¤º3ç§å¸¦æœ‰å‡è®¾çš„è§£é‡Šã€‚â€</p>
</li>
<li>
<p>â€œå®šç¨¿å‰ï¼šè‡ªæˆ‘æ£€æŸ¥æ˜¯å¦å­˜åœ¨æ— æ ¹æ®çš„ä¸»å¼ å’Œç»å¯¹åŒ–çš„è¡¨è¿°ã€‚â€</p>
</li>
</ul>
<p>ä½¿ç”¨è¿™äº”å—ä¸€å‘¨ï¼Œæ•ˆæœæå‡ä¼šè®©ä½ è§‰å¾—ä¸å…¬å¹³ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025ï¼Œæˆ‘çš„â€œAI Vibe Codingâ€æ—¶åˆ»ï¼šä¸€ä¸ªå…«å¹´Javaå¼€å‘è€…çš„å¹´åº¦å¤ç›˜]]></title>    <link>https://juejin.cn/post/7587712328826748964</link>    <guid>https://juejin.cn/post/7587712328826748964</guid>    <pubDate>2025-12-26T03:50:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587712328826748964" data-draft-id="7587713001715154998" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025ï¼Œæˆ‘çš„â€œAI Vibe Codingâ€æ—¶åˆ»ï¼šä¸€ä¸ªå…«å¹´Javaå¼€å‘è€…çš„å¹´åº¦å¤ç›˜"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2025-12-26T03:50:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©å¤©æ‘¸é±¼çš„javaå·¥ç¨‹å¸ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3109843365802925"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025ï¼Œæˆ‘çš„â€œAI Vibe Codingâ€æ—¶åˆ»ï¼šä¸€ä¸ªå…«å¹´Javaå¼€å‘è€…çš„å¹´åº¦å¤ç›˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3109843365802925/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©å¤©æ‘¸é±¼çš„javaå·¥ç¨‹å¸ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T03:50:37.000Z" title="Fri Dec 26 2025 03:50:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">2025ï¼Œæˆ‘çš„â€œAI Vibe Codingâ€æ—¶åˆ»ï¼šä¸€ä¸ªå…«å¹´Javaå¼€å‘è€…çš„å¹´åº¦å¤ç›˜</h2>
<blockquote>
<p><strong>å†™åœ¨å‰é¢</strong>ï¼šè¿™æ˜¯æˆ‘ä½œä¸ºä¸€å Java åç«¯ç¨‹åºå‘˜ï¼Œåœ¨ AI æŠ€æœ¯æµªæ½®ä¸­åº¦è¿‡çš„ç¬¬å…«ä¸ªå¹´å¤´ã€‚2025 å¹´ï¼Œæˆ–è®¸ä¸æ˜¯æˆ‘å†™ä»£ç æœ€å¤šçš„ä¸€å¹´ï¼Œå´æ— ç–‘æ˜¯æˆ‘å†™å¾—â€œæœ€è½»æ¾â€ã€â€œæœ€èªæ˜â€çš„ä¸€å¹´ã€‚</p>
</blockquote>
<blockquote>
<p>æœ¬æ–‡ä½œä¸ºæˆ‘çš„ 2025 å¹´ç»ˆæ€»ç»“ï¼Œå‚ä¸ #2025 AI/Vibe Coding å¯¹æˆ‘çš„å½±å“# å¹´ç»ˆå¾æ–‡æ´»åŠ¨ï¼Œä¹Ÿæƒ³é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œè®°å½•ä¸‹æˆ‘ä¸ AI å·¥å…·å…±èˆçš„ä¸€å¹´ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ä¸€åœºä»â€œæ‰‹åŠ¨æ¬ç –â€åˆ°â€œAIèµ‹èƒ½â€çš„è½¬å˜</h3>
<p>è¿˜è®°å¾—å¹´åˆæ—¶å›¢é˜Ÿåˆšåˆšè®¨è®ºè¦ä¸è¦å¼•å…¥ AI å·¥å…·è¾…åŠ©å¼€å‘ï¼Œå¤§å®¶çš„æ€åº¦ä¸€å¼€å§‹æ˜¯è§‚æœ›çš„ï¼Œæˆ‘ä¹Ÿä¸€æ ·ã€‚æ¯•ç«Ÿå†™äº†è¿™ä¹ˆå¤šå¹´ Javaï¼ŒIDE æ’ä»¶ã€è‡ªåŠ¨è¡¥å…¨ã€ä»£ç ç”Ÿæˆå™¨éƒ½ç”¨å¾—å¾—å¿ƒåº”æ‰‹ï¼Œä½•å¿…å¤šæ­¤ä¸€ä¸¾ï¼Ÿ</p>
<p>ç›´åˆ°æˆ‘çœŸæ­£å°è¯•å°† <strong>GitHub Copilot</strong> å’Œ <strong>ChatGPT</strong> èå…¥å¼€å‘æµç¨‹ï¼Œæ‰çœŸæ­£ä½“ä¼šåˆ°ä»€ä¹ˆå«ï¼š <strong>â€œä¸æ˜¯ä½ ä¸ä¼šï¼Œè€Œæ˜¯ä½ å†ä¹Ÿä¸å¿…ï¼â€</strong></p>
<hr/>
<h3 data-id="heading-2">æˆ‘çš„ AI Coding å·¥å…·é“¾</h3>
<p>2025å¹´ï¼Œæˆ‘æœ€å¸¸ç”¨çš„ AI å·¥å…·ç»„åˆæ˜¯ï¼š</p>
<ul>
<li><strong>ChatGPT-4 / GPT-4oï¼ˆOpenAIï¼‰</strong></li>
<li><strong>GitHub Copilot</strong></li>
<li><strong>Codeiumï¼ˆåœ¨ JetBrains IDE ä¸Šï¼‰</strong></li>
<li><strong>LangChain + LLM æœåŠ¡ï¼ˆç”¨äºå¼€å‘æ™ºèƒ½ Agentï¼‰</strong></li>
</ul>
<h4 data-id="heading-3">ä½¿ç”¨åœºæ™¯ä¸€ï¼šé¡¹ç›®å¯åŠ¨ä»æœªå¦‚æ­¤ä¸æ»‘</h4>
<p>ä»¥å‰æ–°å¯åŠ¨ä¸€ä¸ª Spring Boot é¡¹ç›®ï¼Œæˆ‘è¦æ‰‹åŠ¨é…ç½®ï¼š</p>
<ul>
<li>æ•°æ®åº“è¿æ¥</li>
<li>Security ç­–ç•¥</li>
<li>Redis ç¼“å­˜</li>
<li>Dockerfile + CI/CD è„šæœ¬</li>
</ul>
<p>ç°åœ¨æˆ‘åªéœ€è¦ä¸€å¥ promptï¼šâ€œå¸®æˆ‘ç”Ÿæˆä¸€ä¸ªæ”¯æŒ MySQL + Redis + JWT é‰´æƒçš„ Spring Boot é¡¹ç›®ç»“æ„ï¼Œå¹¶é…å¥½ Dockerfile å’Œ GitHub Actionsã€‚â€</p>
<p><strong>5åˆ†é’Ÿä¹‹åï¼Œè¿æ³¨é‡Šéƒ½å¸®æˆ‘å†™å¥½äº†ã€‚</strong></p>
<hr/>
<h4 data-id="heading-4">ä½¿ç”¨åœºæ™¯äºŒï¼šè°ƒ bug çš„æ€è·¯æ›´æ¸…æ™°</h4>
<p>è¿‡å»è°ƒ bugï¼Œç»å¸¸æ˜¯ï¼š</p>
<blockquote>
<p>æŠ“æ—¥å¿— â†’ çœ‹æºç  â†’ çŒœæµ‹åŸå›  â†’ Google â†’ StackOverflow â†’ debug â†’ åå¤è¯•é”™</p>
</blockquote>
<p>ç°åœ¨æˆ‘ä¼šå…ˆæŠŠæŠ¥é”™ä¿¡æ¯è´´ç»™ ChatGPTï¼Œé™„ä¸Šç›¸å…³ä»£ç ï¼Œå®ƒä¼šå¸®æˆ‘ï¼š</p>
<ul>
<li>è§£è¯»å¼‚å¸¸å«ä¹‰</li>
<li>ç»™å‡ºå¯èƒ½çš„é”™è¯¯ä½ç½®</li>
<li>æ¨èè°ƒè¯•æ€è·¯</li>
<li>æœ‰æ—¶ç”šè‡³ç›´æ¥ç»™å‡ºä¿®å¤ä»£ç </li>
</ul>
<p>è™½ç„¶å®ƒä¸æ€»æ˜¯å¯¹çš„ï¼Œä½†èŠ‚çœäº†æˆ‘å¤§é‡æ’æŸ¥è·¯å¾„çš„æ—¶é—´ã€‚</p>
<hr/>
<h4 data-id="heading-5">ä½¿ç”¨åœºæ™¯ä¸‰ï¼šAI åšæˆ‘çš„â€œä»£ç åˆä¼™äººâ€</h4>
<p>ä»Šå¹´æˆ‘å°è¯•äº†ä¸€ä¸ª side projectï¼ŒåŸºäº Spring Boot + LangChain æ„å»ºäº†ä¸€ä¸ªâ€œæ–‡æ¡£çŸ¥è¯†åº“åŠ©æ‰‹â€ï¼Œå¯ä»¥ä¸Šä¼  PDF / Markdown / API æ–‡æ¡£ï¼Œè‡ªåŠ¨ç”Ÿæˆ Q&amp;A Agentã€‚</p>
<p>æ•´ä¸ªé¡¹ç›®çš„ä¸šåŠ¡é€»è¾‘æ¶æ„ã€æ•°æ®åº“æ¨¡å‹è®¾è®¡ã€æ¥å£æ–‡æ¡£ï¼Œéƒ½æ˜¯æˆ‘å’Œ GPT å…±åŒå®Œæˆçš„ã€‚é‚£ç§â€œæˆ‘è¯´ä½ å†™ï¼Œä½ å†™æˆ‘æ”¹â€çš„å¼€å‘ä½“éªŒï¼ŒçœŸçš„åƒå’Œä¸€ä¸ª 24 å°æ—¶åœ¨çº¿çš„èµ„æ·±ç¨‹åºå‘˜ pair programmingã€‚</p>
<hr/>
<h3 data-id="heading-6">æŠ€æœ¯äººä¹Ÿéœ€è¦â€œç”Ÿæ´»Vibeâ€</h3>
<p>ä»Šå¹´æˆ‘æœ€å¤§çš„ç”Ÿæ´»æ”¹å˜ï¼Œæ˜¯å¼€å§‹å°è¯•ç”¨ AI æ”¹å˜ç”Ÿæ´»ä¹ æƒ¯ã€‚</p>
<ul>
<li><strong>æ—…è¡Œè®¡åˆ’</strong>ï¼šç”¨ GPT è§„åˆ’äº†äº‘å— 8 å¤©è‡ªç”±è¡Œï¼ŒåŒ…å«åƒä½ã€å¤©æ°”ã€æ™¯ç‚¹ã€è·¯çº¿ï¼Œå…¨è‡ªåŠ¨ã€‚</li>
<li><strong>äº²å­æ•™è‚²</strong>ï¼šå­©å­ä¸Šå°å­¦ï¼Œæˆ‘ç”¨ GPT ç¼–æ•…äº‹ã€å‡ºæ•°å­¦é¢˜ã€æ”¹ä½œæ–‡ï¼Œæå‡äº†é™ªä¼´è´¨é‡ã€‚</li>
<li><strong>å­¦ä¹ éŸ³ä¹</strong>ï¼šæˆ‘ç”šè‡³ç”¨ AI å¸®æˆ‘å†™äº†ä¸€é¦–å‰ä»–å¼¹å”±æ›²ï¼Œæ­Œè¯ã€å’Œå¼¦ã€èŠ‚å¥å…¨éƒ½ç”Ÿæˆï¼Œè¶…é…·ï¼</li>
</ul>
<hr/>
<h3 data-id="heading-7">ä»â€œå†™ä»£ç â€åˆ°â€œè®¾è®¡æ™ºèƒ½ä½“â€ï¼Œå¼€å‘è€…è§’è‰²æ­£åœ¨è¿›åŒ–</h3>
<p>ä»Šå¹´æˆ‘ä¹Ÿå¼€å§‹å…³æ³¨ Agent å¼€å‘ï¼ˆåƒ AutoGPTã€LangChain ç­‰ï¼‰ï¼Œå°è¯•æŠŠâ€œå†™åŠŸèƒ½â€è½¬å˜ä¸ºâ€œè®¾è®¡ Agent ä»»åŠ¡æµâ€ã€‚</p>
<p>ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘åšäº†ä¸€ä¸ªâ€œä»£ç å®¡æŸ¥ Agentâ€ï¼Œå®ƒå¯ä»¥ï¼š</p>
<ul>
<li>åˆ†æ PR çš„æ”¹åŠ¨èŒƒå›´</li>
<li>åˆ¤æ–­æ˜¯å¦ç¬¦åˆç¼–ç è§„èŒƒ</li>
<li>æ ¹æ®å†å²æäº¤é£æ ¼ç”Ÿæˆå®¡æŸ¥æ„è§</li>
</ul>
<p>æˆ‘æ„è¯†åˆ°æœªæ¥å¼€å‘è€…å¯èƒ½ä¸å†åªæ˜¯â€œCoderâ€ï¼Œè€Œæ˜¯â€œAgent Designerâ€ï¼Œç”¨ LLM åš runtime çš„ä¸€éƒ¨åˆ†ã€‚</p>
<hr/>
<h3 data-id="heading-8">è¿™ä¸€å¹´ï¼Œæˆ‘é‡æ–°å®šä¹‰äº†â€œæ•ˆç‡â€</h3>
<p>æ•ˆç‡ä¸å†æ˜¯â€œå†™äº†å¤šå°‘è¡Œä»£ç â€ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li><strong>ç”¨æ›´å°‘çš„ä»£ç è§£å†³æ›´å¤æ‚çš„é—®é¢˜</strong></li>
<li><strong>æŠŠæ³¨æ„åŠ›ä»ç»†èŠ‚è½¬ç§»åˆ°ç³»ç»Ÿè®¾è®¡</strong></li>
<li><strong>é€šè¿‡ AI å·¥å…·æå‡è®¤çŸ¥è¾¹ç•Œ</strong></li>
</ul>
<hr/>
<h3 data-id="heading-9">2026ï¼Œæˆ‘æƒ³ç»§ç»­åšä¸€ä¸ªâ€œAIå¢å¼ºäººç±»â€çš„è·µè¡Œè€…</h3>
<p>2025 è®©æˆ‘çœ‹è§äº† AI ä¸åªæ˜¯å·¥å…·ï¼Œæ›´æ˜¯ä¸€ç§å·¥ä½œæ–¹å¼çš„é‡å¡‘ã€‚2026ï¼Œæˆ‘å¸Œæœ›è‡ªå·±èƒ½ï¼š</p>
<ul>
<li>æ›´æ·±å…¥ç†è§£å¤§æ¨¡å‹çš„åŸç†ï¼ˆç»§ç»­å­¦ä¹  Transformerã€RAG ç­‰æŠ€æœ¯ï¼‰</li>
<li>å°è¯•å¼€æºè‡ªå·±çš„ AI å·¥å…·é“¾æ•´åˆæ–¹æ¡ˆ</li>
<li>å¸®åŠ©æ›´å¤šå›¢é˜Ÿæ„å»º AI-enhanced çš„å¼€å‘æµç¨‹</li>
</ul>
<hr/>
<h3 data-id="heading-10">å†™åœ¨æœ€å</h3>
<p>æˆ‘æ˜¯ä¸€ä¸ªæ™®é€šçš„ Java ç¨‹åºå‘˜ï¼Œä½†åœ¨ 2025 å¹´ï¼Œæˆ‘æ„Ÿå—åˆ°æŠ€æœ¯å˜é©çš„æ¯ä¸€æ¬¡è„‰åŠ¨ã€‚</p>
<p>ä»â€œå†™ä»£ç â€åˆ°â€œå…±åˆ›ä»£ç â€ï¼Œä»â€œè°ƒ bugâ€åˆ°â€œè®¾è®¡ Agentâ€ï¼Œä»â€œå·¥å…·ä½¿ç”¨è€…â€åˆ°â€œæ™ºèƒ½åä½œè€…â€â€”â€”æˆ‘æƒ³ï¼Œè¿™å°±æ˜¯æˆ‘çš„ <strong>Vibe Coding æ—¶åˆ»</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœåŠ¡å™¨è¿›ç¨‹æ—¥å¿—åˆ†æï¼šä»å¤´çš®å‘éº»åˆ°AIè§£æ•‘]]></title>    <link>https://juejin.cn/post/7587704265055223846</link>    <guid>https://juejin.cn/post/7587704265055223846</guid>    <pubDate>2025-12-26T04:01:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587704265055223846" data-draft-id="7587704265055207462" data-original-type="2" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœåŠ¡å™¨è¿›ç¨‹æ—¥å¿—åˆ†æï¼šä»å¤´çš®å‘éº»åˆ°AIè§£æ•‘"/> <meta itemprop="keywords" content="åç«¯,è¿ç»´"/> <meta itemprop="datePublished" content="2025-12-26T04:01:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="PFinalç¤¾åŒº_å—ä¸"/> <meta itemprop="url" content="https://juejin.cn/user/1855631357906040"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœåŠ¡å™¨è¿›ç¨‹æ—¥å¿—åˆ†æï¼šä»å¤´çš®å‘éº»åˆ°AIè§£æ•‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1855631357906040/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    PFinalç¤¾åŒº_å—ä¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T04:01:05.000Z" title="Fri Dec 26 2025 04:01:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æœåŠ¡å™¨è¿›ç¨‹æ—¥å¿—åˆ†æï¼šä»å¤´çš®å‘éº»åˆ°AIè§£æ•‘</h2>
<h3 data-id="heading-1">å†™åœ¨å‰é¢</h3>
<p>æœ€è¿‘åœ¨ç»´æŠ¤ä¸€å°è€çš„ <strong>WebæœåŠ¡å™¨</strong>ï¼Œæ¯æ¬¡æŸ¥çœ‹è¿›ç¨‹çš„æ—¶å€™ï¼Œ<code>ps aux</code> ä¸€æ•²ï¼Œå±å¹•ä¸Šåˆ·å‡ºæ¥å¯†å¯†éº»éº»ä¸€å¤§å †è¿›ç¨‹ä¿¡æ¯ï¼Œçœ‹å¾—æˆ‘å¤´çš®å‘éº»ã€‚å°¤å…¶æ˜¯é‚£äº›è¶…é•¿çš„å‘½ä»¤å‚æ•°ï¼Œçœ‹ç€å°±è®©äººå¿ƒçƒ¦ã€‚æƒ³ç€æ€»ä¸èƒ½æ¯æ¬¡éƒ½è¿™ä¹ˆç—›è‹¦å§ï¼Œäºæ˜¯å†³å®šæ•´ç‚¹ä¸œè¥¿æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<h3 data-id="heading-2">è§£å†³æ€è·¯</h3>
<p>æ—¢ç„¶æ¯æ¬¡éƒ½è¦çœ‹è¿™äº›è¿›ç¨‹ä¿¡æ¯ï¼Œé‚£ä¸å¦‚å†™ä¸ªè„šæœ¬ï¼ŒæŠŠæ‰§è¡Œç»“æœè®°å½•ä¸‹æ¥ï¼Œé¡ºä¾¿ç»Ÿè®¡ä¸€ä¸‹æ‰§è¡Œæ—¶é—´å’Œé€€å‡ºç ï¼Œæ–¹ä¾¿åç»­åˆ†æã€‚è¯´å¹²å°±å¹²ï¼Œæˆ‘å†™äº†ä¸‹é¢è¿™ä¸ªè„šæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">command</span>=<span class="hljs-string">"<span class="hljs-variable">$@</span>"</span>
log_file=<span class="hljs-string">"command_execution_<span class="hljs-subst">$(date <span class="hljs-string">"+%Y%m%d_%H%M%S"</span>)</span>.log"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"========================================"</span> | <span class="hljs-built_in">tee</span> -a <span class="hljs-string">"<span class="hljs-variable">$log_file</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ—¶é—´: <span class="hljs-subst">$(date)</span>"</span> | <span class="hljs-built_in">tee</span> -a <span class="hljs-string">"<span class="hljs-variable">$log_file</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å‘½ä»¤: <span class="hljs-variable">$command</span>"</span> | <span class="hljs-built_in">tee</span> -a <span class="hljs-string">"<span class="hljs-variable">$log_file</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"========================================"</span> | <span class="hljs-built_in">tee</span> -a <span class="hljs-string">"<span class="hljs-variable">$log_file</span>"</span>
<span class="hljs-comment"># ä½¿ç”¨Bashå†…ç½®è®¡æ—¶å™¨</span>
start_time=<span class="hljs-variable">$SECONDS</span>
<span class="hljs-comment"># ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶é¿å…å­shellé—®é¢˜</span>
temp_file=$(<span class="hljs-built_in">mktemp</span>)
<span class="hljs-built_in">eval</span> <span class="hljs-string">"<span class="hljs-variable">$command</span>"</span> 2&gt;&amp;1 | <span class="hljs-built_in">tee</span> <span class="hljs-string">"<span class="hljs-variable">$temp_file</span>"</span>
exit_code=<span class="hljs-variable">${PIPESTATUS[0]}</span>
<span class="hljs-comment"># å°†è¾“å‡ºè¿½åŠ åˆ°æ—¥å¿—æ–‡ä»¶</span>
<span class="hljs-built_in">cat</span> <span class="hljs-string">"<span class="hljs-variable">$temp_file</span>"</span> &gt;&gt; <span class="hljs-string">"<span class="hljs-variable">$log_file</span>"</span>
<span class="hljs-built_in">rm</span> <span class="hljs-string">"<span class="hljs-variable">$temp_file</span>"</span>
duration=$((SECONDS - start_time))
<span class="hljs-built_in">echo</span> <span class="hljs-string">"========================================"</span> | <span class="hljs-built_in">tee</span> -a <span class="hljs-string">"<span class="hljs-variable">$log_file</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"é€€å‡ºç : <span class="hljs-variable">$exit_code</span>"</span> | <span class="hljs-built_in">tee</span> -a <span class="hljs-string">"<span class="hljs-variable">$log_file</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"è€—æ—¶: <span class="hljs-variable">${duration}</span>ç§’"</span> | <span class="hljs-built_in">tee</span> -a <span class="hljs-string">"<span class="hljs-variable">$log_file</span>"</span>
</code></pre>
<p>è¿™ä¸ªè„šæœ¬çš„åŠŸèƒ½å¾ˆç®€å•ï¼šæŠŠä»»æ„å‘½ä»¤çš„æ‰§è¡Œè¿‡ç¨‹è®°å½•ä¸‹æ¥ï¼ŒåŒ…æ‹¬æ‰§è¡Œæ—¶é—´ã€å‘½ä»¤æœ¬èº«ã€å®Œæ•´è¾“å‡ºã€é€€å‡ºç å’Œè€—æ—¶ã€‚ä¸€ç›®äº†ç„¶ï¼Œè¯¥æœ‰çš„ä¿¡æ¯éƒ½æœ‰äº†ã€‚</p>
<h3 data-id="heading-3">å®æˆ˜ä½¿ç”¨</h3>
<p>æŠŠè„šæœ¬å¾€æœåŠ¡å™¨ä¸Šä¸€ä¸¢ï¼Œèµ·ä¸ªå¥½è®°çš„åå­—ï¼Œæ¯”å¦‚ <code>å‘½ä»¤æ‰§è¡Œç›‘æ§.sh</code>ï¼Œç„¶åè¿è¡Œä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">./å‘½ä»¤æ‰§è¡Œç›‘æ§.sh ps aux 
</code></pre>
<p>æ‰§è¡Œå®Œæ¯•åï¼Œè„šæœ¬ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå¸¦æ—¶é—´æˆ³çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ‰“å¼€ä¸€çœ‹ï¼Œæ ¼å¼æ•´æ•´é½é½ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">========================================
æ—¶é—´: <span class="hljs-number">2025</span>å¹´<span class="hljs-number">12</span>æœˆ<span class="hljs-number">26</span>æ—¥ æ˜ŸæœŸäº” <span class="hljs-number">11</span>æ—¶<span class="hljs-number">10</span>åˆ†<span class="hljs-number">09</span>ç§’ <span class="hljs-variable constant_">CST</span>
å‘½ä»¤: ps aux
========================================
<span class="hljs-variable constant_">USER</span>               <span class="hljs-variable constant_">PID</span>  %<span class="hljs-variable constant_">CPU</span> %<span class="hljs-variable constant_">MEM</span>      <span class="hljs-variable constant_">VSZ</span>    <span class="hljs-variable constant_">RSS</span>   <span class="hljs-variable constant_">TT</span>  <span class="hljs-variable constant_">STAT</span> <span class="hljs-variable constant_">STARTED</span>      <span class="hljs-variable constant_">TIME</span> <span class="hljs-variable constant_">COMMAND</span>
pfinal           <span class="hljs-number">47294</span>  <span class="hljs-number">18.2</span>  <span class="hljs-number">2.0</span> <span class="hljs-number">1494420072</span> <span class="hljs-number">338416</span>   ??  R    <span class="hljs-number">11</span>:<span class="hljs-number">01</span>ä¸Šåˆ   <span class="hljs-number">0</span>:<span class="hljs-number">47.08</span> /<span class="hljs-title class_">Applications</span>/<span class="hljs-title class_">Trae</span> <span class="hljs-variable constant_">CN</span>.<span class="hljs-property">app</span>/<span class="hljs-title class_">Contents</span>/<span class="hljs-title class_">Frameworks</span>/<span class="hljs-title class_">Trae</span> <span class="hljs-variable constant_">CN</span> <span class="hljs-title class_">Helper</span> (<span class="hljs-title class_">Renderer</span>).<span class="hljs-property">app</span>/<span class="hljs-title class_">Contents</span>/<span class="hljs-title class_">MacOS</span>/<span class="hljs-title class_">Trae</span> <span class="hljs-variable constant_">CN</span> <span class="hljs-title class_">Helper</span> (<span class="hljs-title class_">Renderer</span>) --<span class="hljs-keyword">type</span>=renderer --user-data-dir=<span class="hljs-regexp">/Users/</span>pfinal/<span class="hljs-title class_">Library</span>/<span class="hljs-title class_">Application</span> <span class="hljs-title class_">Support</span>/<span class="hljs-title class_">Trae</span> <span class="hljs-variable constant_">CN</span> --standard-schemes=vscode-webview,vscode-file --enable-sandbox --secure-schemes=vscode-webview,vscode-file --cors-schemes=vscode-webview,vscode-file --fetch-schemes=vscode-webview,vscode-file --service-worker-schemes=vscode-webview --code-cache-schemes=vscode-webview,vscode-file --app-path=<span class="hljs-regexp">/Applications/</span><span class="hljs-title class_">Trae</span> <span class="hljs-variable constant_">CN</span>.<span class="hljs-property">app</span>/<span class="hljs-title class_">Contents</span>/<span class="hljs-title class_">Resources</span>/app --enable-sandbox --enable-blink-features=<span class="hljs-title class_">HighlightAPI</span> --js-flags=--max-old-space-size=<span class="hljs-number">8192</span> --disable-blink-features=<span class="hljs-title class_">FontMatchingCTMigration</span>,<span class="hljs-title class_">StandardizedBrowserZoom</span>, --lang=zh-<span class="hljs-variable constant_">CN</span> --num-raster-threads=<span class="hljs-number">4</span> --enable-zero-copy --enable-gpu-memory-buffer-compositor-resources --enable-main-frame-before-activation --renderer-client-id=<span class="hljs-number">8</span> --time-ticks-at-unix-epoch=-<span class="hljs-number">1763549045983093</span> --launch-time-ticks=<span class="hljs-number">3169034948987</span> --shared-files --field-trial-handle=<span class="hljs-number">1718379636</span>,r,<span class="hljs-number">1980764242391010435</span>,<span class="hljs-number">4761999176824767603</span>,<span class="hljs-number">262144</span> --enable-features=<span class="hljs-title class_">DocumentPolicyIncludeJSCallStacksInCrashReports</span>,<span class="hljs-title class_">EarlyEstablishGpuChannel</span>,<span class="hljs-title class_">EstablishGpuChannelAsync</span>,<span class="hljs-title class_">PdfUseShowSaveFilePicker</span>,<span class="hljs-title class_">ScreenCaptureKitPickerScreen</span>,<span class="hljs-title class_">ScreenCaptureKitStreamPickerSonoma</span> --disable-features=<span class="hljs-title class_">CalculateNativeWinOcclusion</span>,<span class="hljs-title class_">FontationsLinuxSystemFonts</span>,<span class="hljs-title class_">MacWebContentsOcclusion</span>,<span class="hljs-title class_">ScreenAIOCREnabled</span>,<span class="hljs-title class_">SpareRendererForSitePerProcess</span>,<span class="hljs-title class_">TimeoutHangingVideoCaptureStarts</span> --variations-seed-version --vscode-<span class="hljs-variable language_">window</span>-config=<span class="hljs-attr">vscode</span>:8765d1cc-a06f-493a-a7f5-1893d3c1f3a0 --seatbelt-client=<span class="hljs-number">92</span>
_windowserver      <span class="hljs-number">158</span>  <span class="hljs-number">12.5</span>  <span class="hljs-number">0.5</span> <span class="hljs-number">44512404</span>  <span class="hljs-number">82920</span>   ??  <span class="hljs-title class_">Ss</span>   <span class="hljs-number">191125</span>  <span class="hljs-number">3232</span>:<span class="hljs-number">13.57</span> /<span class="hljs-title class_">System</span>/<span class="hljs-title class_">Library</span>/<span class="hljs-title class_">PrivateFrameworks</span>/<span class="hljs-title class_">SkyLight</span>.<span class="hljs-property">framework</span>/<span class="hljs-title class_">Resources</span>/<span class="hljs-title class_">WindowServer</span> -daemon
pfinal           <span class="hljs-number">35223</span>  <span class="hljs-number">12.5</span> <span class="hljs-number">17.2</span> <span class="hljs-number">8634410808</span> <span class="hljs-number">2880396</span>   ??  <span class="hljs-title class_">Ss</span>   <span class="hljs-number">161225</span>  <span class="hljs-number">2030</span>:<span class="hljs-number">45.83</span> /<span class="hljs-title class_">Applications</span>/<span class="hljs-title class_">OrbStack</span>.<span class="hljs-property">app</span>/<span class="hljs-title class_">Contents</span>/<span class="hljs-title class_">Frameworks</span>/<span class="hljs-title class_">OrbStack</span> <span class="hljs-title class_">Helper</span>.<span class="hljs-property">app</span>/<span class="hljs-title class_">Contents</span>/<span class="hljs-title class_">MacOS</span>/<span class="hljs-title class_">OrbStack</span> <span class="hljs-title class_">Helper</span> vmgr -build-id <span class="hljs-number">1763632535</span> -handoff
pfinal           <span class="hljs-number">47538</span>  <span class="hljs-number">11.0</span>  <span class="hljs-number">0.5</span> <span class="hljs-number">1492622204</span>  <span class="hljs-number">85000</span>   ??  S    <span class="hljs-number">11</span>:<span class="hljs-number">01</span>ä¸Šåˆ   <span class="hljs-number">0</span>:<span class="hljs-number">30.20</span> /<span class="hljs-title class_">Applications</span>/<span class="hljs-title class_">Trae</span> <span class="hljs-variable constant_">CN</span>.<span class="hljs-property">app</span>/<span class="hljs-title class_">Contents</span>/<span class="hljs-title class_">Frameworks</span>/<span class="hljs-title class_">Trae</span> <span class="hljs-variable constant_">CN</span> <span class="hljs-title class_">Helper</span> (<span class="hljs-title class_">Plugin</span>).<span class="hljs-property">app</span>/<span class="hljs-title class_">Contents</span>/<span class="hljs-title class_">MacOS</span>/<span class="hljs-title class_">Trae</span> <span class="hljs-variable constant_">CN</span> <span class="hljs-title class_">Helper</span> (<span class="hljs-title class_">Plugin</span>) --<span class="hljs-keyword">type</span>=utility --utility-sub-<span class="hljs-keyword">type</span>=node.<span class="hljs-property">mojom</span>.<span class="hljs-property">NodeService</span> --lang=zh-<span class="hljs-variable constant_">CN</span> --service-sandbox-<span class="hljs-keyword">type</span>=none --dns-result-order=ipv4first --experimental-network-inspection --inspect-port=<span class="hljs-number">0</span> --vscode-crash-reporter-process-<span class="hljs-keyword">type</span>=extensionHost --user-data-dir=<span class="hljs-regexp">/Users/</span>pfinal/<span class="hljs-title class_">Library</span>/<span class="hljs-title class_">Application</span> <span class="hljs-title class_">Support</span>/<span class="hljs-title class_">Trae</span> <span class="hljs-variable constant_">CN</span> --standard-schemes=vscode-webview,vscode-file --enable-sandbox --secure-schemes=vscode-webview,vscode-file --cors-schemes=vscode-webview,vscode-file --fetch-schemes=vscode-webview,vscode-file --service-worker-schemes=vscode-webview --code-cache-schemes=vscode-webview,vscode-file --shared-files --field-trial-handle=<span class="hljs-number">1718379636</span>,r,<span class="hljs-number">1980764242391010435</span>,<span class="hljs-number">4761999176824767603</span>,<span class="hljs-number">262144</span> --enable-features=<span class="hljs-title class_">DocumentPolicyIncludeJSCallStacksInCrashReports</span>,<span class="hljs-title class_">EarlyEstablishGpuChannel</span>,<span class="hljs-title class_">EstablishGpuChannelAsync</span>,<span class="hljs-title class_">PdfUseShowSaveFilePicker</span>,<span class="hljs-title class_">ScreenCaptureKitPickerScreen</span>,<span class="hljs-title class_">ScreenCaptureKitStreamPickerSonoma</span> --disable-features=<span class="hljs-title class_">CalculateNativeWinOcclusion</span>,<span class="hljs-title class_">FontationsLinuxSystemFonts</span>,<span class="hljs-title class_">MacWebContentsOcclusion</span>,<span class="hljs-title class_">ScreenAIOCREnabled</span>,<span class="hljs-title class_">SpareRendererForSitePerProcess</span>,<span class="hljs-title class_">TimeoutHangingVideoCaptureStarts</span> --variations-seed-version
pfinal           <span class="hljs-number">47288</span>   <span class="hljs-number">9.6</span>  <span class="hljs-number">0.4</span> <span class="hljs-number">67993920</span>  <span class="hljs-number">65248</span>   ??  S    <span class="hljs-number">11</span>:<span class="hljs-number">01</span>ä¸Šåˆ   <span class="hljs-number">0</span>:<span class="hljs-number">09.56</span> /<span class="hljs-title class_">Applications</span>/<span class="hljs-title class_">Trae</span> <span class="hljs-variable constant_">CN</span>.<span class="hljs-property">app</span>/<span class="hljs-title class_">Contents</span>/<span class="hljs-title class_">Frameworks</span>/<span class="hljs-title class_">Trae</span> <span class="hljs-variable constant_">CN</span> <span class="hljs-title class_">Helper</span> (<span class="hljs-variable constant_">GPU</span>).<span class="hljs-property">app</span>/<span class="hljs-title class_">Contents</span>/<span class="hljs-title class_">MacOS</span>/<span class="hljs-title class_">Trae</span> <span class="hljs-variable constant_">CN</span> <span class="hljs-title class_">Helper</span> (<span class="hljs-variable constant_">GPU</span>) --<span class="hljs-keyword">type</span>=gpu-process --user-data-dir=<span class="hljs-regexp">/Users/</span>pfinal/<span class="hljs-title class_">Library</span>/<span class="hljs-title class_">Application</span> <span class="hljs-title class_">Support</span>/<span class="hljs-title class_">Trae</span> <span class="hljs-variable constant_">CN</span> --gpu-preferences=<span class="hljs-title class_">UAAAAAAAAAAgAAAEAAAAAAAAAAAAAAAAAABgAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAIAAAAAAAAAAgAAAAAAAAA</span> --shared-files --field-trial-handle=<span class="hljs-number">1718379636</span>,r,<span class="hljs-number">1980764242391010435</span>,<span class="hljs-number">4761999176824767603</span>,<span class="hljs-number">262144</span> --enable-features=<span class="hljs-title class_">DocumentPolicyIncludeJSCallStacksInCrashReports</span>,<span class="hljs-title class_">EarlyEstablishGpuChannel</span>,<span class="hljs-title class_">EstablishGpuChannelAsync</span>,<span class="hljs-title class_">PdfUseShowSaveFilePicker</span>,<span class="hljs-title class_">ScreenCaptureKitPickerScreen</span>,<span class="hljs-title class_">ScreenCaptureKitStreamPickerSonoma</span> --disable-features=<span class="hljs-title class_">CalculateNativeWinOcclusion</span>,<span class="hljs-title class_">FontationsLinuxSystemFonts</span>,<span class="hljs-title class_">MacWebContentsOcclusion</span>,<span class="hljs-title class_">ScreenAIOCREnabled</span>,<span class="hljs-title class_">SpareRendererForSitePerProcess</span>,<span class="hljs-title class_">TimeoutHangingVideoCaptureStarts</span> --variations-seed-version --seatbelt-client=<span class="hljs-number">33</span>

............

========================================
é€€å‡ºç : <span class="hljs-number">0</span>
è€—æ—¶: <span class="hljs-number">0</span>ç§’
</code></pre>
<h3 data-id="heading-4">é—®é¢˜åˆæ¥äº†</h3>
<p>å¥½äº†ï¼Œç°åœ¨æ—¥å¿—æ˜¯æœ‰äº†ï¼Œä¹Ÿè§„æ•´äº†ã€‚ä½†é—®é¢˜æ˜¯ï¼Œè¿™ç©æ„å„¿çœ‹èµ·æ¥è¿˜æ˜¯å¯†å¯†éº»éº»ä¸€å¤§ç‰‡å•Šï¼é‚£äº›è¶…é•¿çš„å‘½ä»¤å‚æ•°ï¼Œå„ç§ CPUã€å†…å­˜å ç”¨æ•°æ®ï¼Œè¿›ç¨‹çŠ¶æ€...çœ‹ç€çœ‹ç€åˆå¼€å§‹å¤´ç–¼ï¼Œç¬é—´æ²¡æœ‰åˆ†æçš„å¿ƒæƒ…äº†ã€‚</p>
<h3 data-id="heading-5">æœåŠ¡å™¨å¡é¡¿ï¼Ÿæ¥å¥—ç»„åˆæ‹³</h3>
<p>è¯´åˆ°æœåŠ¡å™¨å¡é¡¿ï¼Œå…‰çœ‹è¿›ç¨‹å¯ä¸å¤Ÿã€‚é‡åˆ°æœåŠ¡å™¨å“åº”æ…¢çš„æ—¶å€™ï¼Œæˆ‘ä¸€èˆ¬ä¼šç”¨ä¸€å¥—ç»„åˆæ‹³æ¥æ’æŸ¥é—®é¢˜ã€‚é…åˆå‰é¢é‚£ä¸ªè„šæœ¬ï¼ŒæŠŠè¿™äº›å‘½ä»¤çš„è¾“å‡ºéƒ½è®°å½•ä¸‹æ¥ï¼Œç„¶åç»Ÿä¸€ä¸¢ç»™ AI åˆ†æï¼Œç®€ç›´ä¸è¦å¤ªçˆ½ã€‚</p>
<h4 data-id="heading-6">1. çœ‹çœ‹èµ„æºå ç”¨æƒ…å†µ</h4>
<p>é¦–å…ˆç”¨ <code>top</code> æˆ–è€… <code>htop</code> å®æ—¶çœ‹çœ‹èµ„æºä½¿ç”¨æƒ…å†µï¼Œå“ªä¸ªè¿›ç¨‹åœ¨åƒCPUï¼Œå“ªä¸ªè¿›ç¨‹åœ¨åƒå†…å­˜ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">./å‘½ä»¤æ‰§è¡Œç›‘æ§.sh <span class="hljs-string">"top -b -n 1"</span>
</code></pre>
<p>è¿™ä¸ªå‘½ä»¤ä¼šæŠ“å–ä¸€æ¬¡å¿«ç…§ï¼Œä¸ç”¨ç›¯ç€å±å¹•åˆ·æ–°ã€‚è®°å½•ä¸‹æ¥æ…¢æ…¢çœ‹ï¼Œé¦™ï¼</p>
<h4 data-id="heading-7">2. çœ‹çœ‹ç½‘ç»œè¿æ¥</h4>
<p>æœåŠ¡å™¨å¡é¡¿ï¼Œå¾ˆå¤šæ—¶å€™æ˜¯ç½‘ç»œè¿æ¥å‡ºäº†é—®é¢˜ã€‚ç”¨ <code>netstat</code> æˆ–è€… <code>ss</code> çœ‹çœ‹å½“å‰æœ‰å¤šå°‘è¿æ¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">./å‘½ä»¤æ‰§è¡Œç›‘æ§.sh <span class="hljs-string">"netstat -antp"</span>
<span class="hljs-comment"># æˆ–è€…ç”¨æ›´ç°ä»£çš„ ss å‘½ä»¤</span>
./å‘½ä»¤æ‰§è¡Œç›‘æ§.sh <span class="hljs-string">"ss -antp"</span>
</code></pre>
<p>çœ‹çœ‹æœ‰æ²¡æœ‰å¤§é‡çš„ <code>TIME_WAIT</code> æˆ–è€… <code>CLOSE_WAIT</code> çŠ¶æ€çš„è¿æ¥ï¼Œæœ‰æ—¶å€™å°±æ˜¯è¿™äº›ç©æ„å„¿æŠŠæœåŠ¡å™¨æ‹–æ…¢çš„ã€‚</p>
<h4 data-id="heading-8">3. æ£€æŸ¥ç£ç›˜ç©ºé—´</h4>
<p>ç£ç›˜æ»¡äº†ä¹Ÿä¼šå¯¼è‡´å„ç§å¥‡æ€ªçš„é—®é¢˜ï¼Œç”¨ <code>df</code> çœ‹çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µï¼š</p>
<pre><code class="hljs language-bash" lang="bash">./å‘½ä»¤æ‰§è¡Œç›‘æ§.sh <span class="hljs-string">"df -h"</span>
</code></pre>
<p>å¦‚æœæŸä¸ªåˆ†åŒºå·²ç»ç”¨äº† 100%ï¼Œé‚£å…«æˆå°±æ˜¯å®ƒçš„é”…ã€‚</p>
<h4 data-id="heading-9">4. çœ‹çœ‹å†…å­˜ä½¿ç”¨</h4>
<p>å†…å­˜ä¸å¤Ÿç”¨çš„æ—¶å€™ï¼Œç³»ç»Ÿå°±ä¼šå¼€å§‹ç–¯ç‹‚ swapï¼Œå¡å¾—ä¸è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">./å‘½ä»¤æ‰§è¡Œç›‘æ§.sh <span class="hljs-string">"free -m"</span>
</code></pre>
<p>çœ‹çœ‹ swap ç”¨äº†å¤šå°‘ï¼Œå¦‚æœ swap ç”¨å¾—å¾ˆé«˜ï¼Œé‚£å°±è¯¥è€ƒè™‘åŠ å†…å­˜æˆ–è€…ä¼˜åŒ–ç¨‹åºäº†ã€‚</p>
<h4 data-id="heading-10">5. æ£€æŸ¥ç£ç›˜ IO</h4>
<p>æœ‰æ—¶å€™æœåŠ¡å™¨å¡ï¼Œæ˜¯å› ä¸ºç£ç›˜ IO å¤ªé«˜ã€‚ç”¨ <code>iostat</code> çœ‹çœ‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">./å‘½ä»¤æ‰§è¡Œç›‘æ§.sh <span class="hljs-string">"iostat -x 1 5"</span>
</code></pre>
<p>è¿™ä¼šæ¯ç§’è¾“å‡ºä¸€æ¬¡ï¼Œè¿ç»­è¾“å‡º 5 æ¬¡ã€‚çœ‹çœ‹ <code>%util</code> è¿™ä¸€åˆ—ï¼Œå¦‚æœæ¥è¿‘ 100%ï¼Œç£ç›˜ IO å°±æ˜¯ç“¶é¢ˆäº†ã€‚</p>
<h4 data-id="heading-11">6. çœ‹çœ‹å“ªäº›æ–‡ä»¶è¢«æ‰“å¼€äº†</h4>
<p>æœ‰æ—¶å€™ç¨‹åºä¼šæ‰“å¼€å¤§é‡æ–‡ä»¶å¥æŸ„ï¼Œç”¨ <code>lsof</code> å¯ä»¥çœ‹çœ‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">./å‘½ä»¤æ‰§è¡Œç›‘æ§.sh <span class="hljs-string">"lsof -nP | wc -l"</span>
<span class="hljs-comment"># æˆ–è€…çœ‹çœ‹æŸä¸ªè¿›ç¨‹æ‰“å¼€äº†å“ªäº›æ–‡ä»¶</span>
./å‘½ä»¤æ‰§è¡Œç›‘æ§.sh <span class="hljs-string">"lsof -p [PID]"</span>
</code></pre>
<p>å¦‚æœæ‰“å¼€çš„æ–‡ä»¶æ•°é‡è¶…çº§å¤šï¼Œå¯èƒ½å°±æ˜¯æ–‡ä»¶å¥æŸ„æ³„æ¼äº†ã€‚</p>
<h4 data-id="heading-12">7. çœ‹çœ‹ç³»ç»Ÿæ—¥å¿—</h4>
<p>ç³»ç»Ÿæ—¥å¿—é‡Œç»å¸¸è—ç€å„ç§çº¿ç´¢ï¼Œç”¨ <code>dmesg</code> çœ‹çœ‹å†…æ ¸æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">./å‘½ä»¤æ‰§è¡Œç›‘æ§.sh <span class="hljs-string">"dmesg -T | tail -100"</span>
</code></pre>
<p>æœ‰æ—¶å€™ä¼šçœ‹åˆ° OOMï¼ˆOut of Memoryï¼‰ä¹‹ç±»çš„é”™è¯¯ä¿¡æ¯ï¼Œä¸€çœ‹å°±çŸ¥é“é—®é¢˜åœ¨å“ªã€‚</p>
<h4 data-id="heading-13">8. çœ‹çœ‹ Web æœåŠ¡å™¨çš„é”™è¯¯æ—¥å¿—</h4>
<p>å¦‚æœæ˜¯ Nginx æˆ–è€… Apacheï¼Œç›´æ¥çœ‹é”™è¯¯æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">./å‘½ä»¤æ‰§è¡Œç›‘æ§.sh <span class="hljs-string">"tail -n 200 /var/log/nginx/error.log"</span>
<span class="hljs-comment"># æˆ–è€…</span>
./å‘½ä»¤æ‰§è¡Œç›‘æ§.sh <span class="hljs-string">"tail -n 200 /var/log/apache2/error.log"</span>
</code></pre>
<p>æ—¥å¿—é‡Œçš„æŠ¥é”™ä¿¡æ¯å¾€å¾€æœ€ç›´æ¥ï¼Œèƒ½å¿«é€Ÿå®šä½é—®é¢˜ã€‚</p>
<h4 data-id="heading-14">9. çœ‹çœ‹ TCP è¿æ¥ç»Ÿè®¡</h4>
<p>æƒ³çŸ¥é“æœ‰å¤šå°‘è¿æ¥å¤„äºå„ç§çŠ¶æ€ï¼Œå¯ä»¥ç”¨è¿™ä¸ªï¼š</p>
<pre><code class="hljs language-bash" lang="bash">./å‘½ä»¤æ‰§è¡Œç›‘æ§.sh <span class="hljs-string">"netstat -an | awk '/^tcp/ {print \$6}' | sort | uniq -c"</span>
</code></pre>
<p>è¿™ä¼šç»Ÿè®¡å„ç§ TCP è¿æ¥çŠ¶æ€çš„æ•°é‡ï¼Œä¸€ç›®äº†ç„¶ã€‚</p>
<h4 data-id="heading-15">10. çœ‹çœ‹è™šæ‹Ÿå†…å­˜ç»Ÿè®¡</h4>
<p>ç”¨ <code>vmstat</code> å¯ä»¥çœ‹åˆ°ç³»ç»Ÿçš„æ•´ä½“è¿è¡ŒçŠ¶æ€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">./å‘½ä»¤æ‰§è¡Œç›‘æ§.sh <span class="hljs-string">"vmstat 1 5"</span>
</code></pre>
<p>è¿™ä¼šæ¯ç§’è¾“å‡ºä¸€æ¬¡ï¼Œè¿ç»­è¾“å‡º 5 æ¬¡ã€‚å¯ä»¥çœ‹åˆ° CPUã€å†…å­˜ã€IO ç­‰å„æ–¹é¢çš„ç»Ÿè®¡æ•°æ®ã€‚</p>
<h3 data-id="heading-16">ä¸€é”®æ”¶é›†ï¼Œæ‰¹é‡åˆ†æ</h3>
<p>æœ‰äº†å‰é¢è¿™ä¸ªè„šæœ¬ï¼Œæˆ‘ç”šè‡³å†™äº†ä¸ªæ›´ç‹ çš„ï¼ŒæŠŠè¿™äº›å‘½ä»¤ä¸€æ¬¡æ€§å…¨éƒ¨æ‰§è¡Œå¹¶è®°å½•ä¸‹æ¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
timestamp=$(<span class="hljs-built_in">date</span> <span class="hljs-string">"+%Y%m%d_%H%M%S"</span>)
report_dir=<span class="hljs-string">"server_analysis_<span class="hljs-variable">${timestamp}</span>"</span>
<span class="hljs-built_in">mkdir</span> -p <span class="hljs-string">"<span class="hljs-variable">$report_dir</span>"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¼€å§‹æ”¶é›†æœåŠ¡å™¨ä¿¡æ¯..."</span>

<span class="hljs-comment"># å®šä¹‰ç›‘æ§è„šæœ¬è·¯å¾„</span>
monitor_script=<span class="hljs-string">"./å‘½ä»¤æ‰§è¡Œç›‘æ§.sh"</span>

<span class="hljs-comment"># è¿›ç¨‹ä¿¡æ¯</span>
<span class="hljs-variable">$monitor_script</span> <span class="hljs-string">"ps aux --sort=-%cpu | head -20"</span> &gt; /dev/null
<span class="hljs-built_in">mv</span> command_execution_*.<span class="hljs-built_in">log</span> <span class="hljs-string">"<span class="hljs-variable">$report_dir</span>/01_top_cpu_processes.log"</span>

<span class="hljs-comment"># CPUå’Œå†…å­˜</span>
<span class="hljs-variable">$monitor_script</span> <span class="hljs-string">"top -b -n 1"</span> &gt; /dev/null
<span class="hljs-built_in">mv</span> command_execution_*.<span class="hljs-built_in">log</span> <span class="hljs-string">"<span class="hljs-variable">$report_dir</span>/02_top_snapshot.log"</span>

<span class="hljs-comment"># ç½‘ç»œè¿æ¥</span>
<span class="hljs-variable">$monitor_script</span> <span class="hljs-string">"ss -antp"</span> &gt; /dev/null
<span class="hljs-built_in">mv</span> command_execution_*.<span class="hljs-built_in">log</span> <span class="hljs-string">"<span class="hljs-variable">$report_dir</span>/03_network_connections.log"</span>

<span class="hljs-comment"># ç£ç›˜ä½¿ç”¨</span>
<span class="hljs-variable">$monitor_script</span> <span class="hljs-string">"df -h"</span> &gt; /dev/null
<span class="hljs-built_in">mv</span> command_execution_*.<span class="hljs-built_in">log</span> <span class="hljs-string">"<span class="hljs-variable">$report_dir</span>/04_disk_usage.log"</span>

<span class="hljs-comment"># å†…å­˜ä½¿ç”¨</span>
<span class="hljs-variable">$monitor_script</span> <span class="hljs-string">"free -m"</span> &gt; /dev/null
<span class="hljs-built_in">mv</span> command_execution_*.<span class="hljs-built_in">log</span> <span class="hljs-string">"<span class="hljs-variable">$report_dir</span>/05_memory_usage.log"</span>

<span class="hljs-comment"># IO ç»Ÿè®¡</span>
<span class="hljs-variable">$monitor_script</span> <span class="hljs-string">"iostat -x 1 5"</span> &gt; /dev/null
<span class="hljs-built_in">mv</span> command_execution_*.<span class="hljs-built_in">log</span> <span class="hljs-string">"<span class="hljs-variable">$report_dir</span>/06_io_stats.log"</span>

<span class="hljs-comment"># ç³»ç»Ÿæ—¥å¿—</span>
<span class="hljs-variable">$monitor_script</span> <span class="hljs-string">"dmesg -T | tail -100"</span> &gt; /dev/null
<span class="hljs-built_in">mv</span> command_execution_*.<span class="hljs-built_in">log</span> <span class="hljs-string">"<span class="hljs-variable">$report_dir</span>/07_kernel_logs.log"</span>

<span class="hljs-comment"># TCP è¿æ¥ç»Ÿè®¡</span>
<span class="hljs-variable">$monitor_script</span> <span class="hljs-string">"netstat -an | awk '/^tcp/ {print \$6}' | sort | uniq -c"</span> &gt; /dev/null
<span class="hljs-built_in">mv</span> command_execution_*.<span class="hljs-built_in">log</span> <span class="hljs-string">"<span class="hljs-variable">$report_dir</span>/08_tcp_stats.log"</span>

<span class="hljs-comment"># è™šæ‹Ÿå†…å­˜ç»Ÿè®¡</span>
<span class="hljs-variable">$monitor_script</span> <span class="hljs-string">"vmstat 1 5"</span> &gt; /dev/null
<span class="hljs-built_in">mv</span> command_execution_*.<span class="hljs-built_in">log</span> <span class="hljs-string">"<span class="hljs-variable">$report_dir</span>/09_vmstat.log"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ä¿¡æ¯æ”¶é›†å®Œæˆï¼æ‰€æœ‰æ—¥å¿—ä¿å­˜åœ¨: <span class="hljs-variable">$report_dir</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç°åœ¨å¯ä»¥æŠŠæ•´ä¸ªç›®å½•æ‰“åŒ…å‘ç»™ AI åˆ†æäº†ï¼"</span>
</code></pre>
<p>æ‰§è¡Œä¸€æ¬¡ï¼Œæ‰€æœ‰æ•°æ®å…¨éƒ¨åˆ°æ‰‹ï¼Œæ•´æ•´é½é½åœ°æ”¾åœ¨ä¸€ä¸ªç›®å½•é‡Œã€‚ç„¶åæŠŠè¿™ä¸ªç›®å½•æ‰“ä¸ªåŒ…ï¼Œç»Ÿç»Ÿä¸¢ç»™ AIï¼Œè®©å®ƒå¸®æˆ‘ç»¼åˆåˆ†æã€‚</p>
<h3 data-id="heading-17">AI æ—¶ä»£çš„è§£æ³•</h3>
<p>ä¸è¿‡è¿˜å¥½ï¼Œç°åœ¨æ˜¯ <strong>AI æ—¶ä»£</strong>ï¼è¿™ç§æ—¶å€™å°±è¯¥è®© AI å¤§æ˜¾èº«æ‰‹äº†ã€‚æˆ‘ç›´æ¥æŠŠè¿™äº›æ—¥å¿—æ–‡ä»¶å¾€ <strong>ChatGPT</strong> æˆ–è€… <strong>Claude</strong> é‡Œé¢ä¸€ä¸¢ï¼Œè®©å®ƒå¸®æˆ‘åˆ†æã€‚</p>
<p>ç»“æœå‘¢ï¼ŸAI æŠŠè¿™å †ä¸œè¥¿åˆ†æå¾—æ˜¯å¤´å¤´æ˜¯é“ï¼š</p>
<ul>
<li>å“ªäº›è¿›ç¨‹å ç”¨èµ„æºæœ€å¤š</li>
<li>ç½‘ç»œè¿æ¥æ˜¯å¦å­˜åœ¨å¼‚å¸¸</li>
<li>ç£ç›˜å’Œå†…å­˜ä½¿ç”¨æƒ…å†µå¦‚ä½•</li>
<li>IO æ˜¯å¦å­˜åœ¨ç“¶é¢ˆ</li>
<li>ç³»ç»Ÿæ—¥å¿—é‡Œæœ‰æ²¡æœ‰å…³é”®é”™è¯¯</li>
<li>è¿˜èƒ½ç»™å‡ºé’ˆå¯¹æ€§çš„ä¼˜åŒ–å»ºè®®</li>
</ul>
<p>åŸæœ¬éœ€è¦ä¸€ä¸ªä¸ªå‘½ä»¤å»çœ‹ï¼Œä¸€ä¸ªä¸ªæ•°æ®å»å¯¹æ¯”åˆ†æçš„å·¥ä½œï¼Œç°åœ¨å˜æˆäº†å–æ¯å’–å•¡çš„åŠŸå¤«å°±èƒ½æå®šçš„äº‹å„¿ã€‚AI ç”šè‡³è¿˜èƒ½å‘Šè¯‰ä½ ï¼š"ä½ çš„æœåŠ¡å™¨æœ‰ 327 ä¸ª TIME_WAIT è¿æ¥ï¼Œå»ºè®®è°ƒæ•´ä¸€ä¸‹å†…æ ¸å‚æ•°..."ï¼Œä¸“ä¸šå¾—ä¸è¡Œã€‚</p>
<h3 data-id="heading-18">æ€»ç»“</h3>
<p>ä»æœ€å¼€å§‹çœ‹åˆ°è¿›ç¨‹åˆ—è¡¨å°±å¤´çš®å‘éº»ï¼Œåˆ°ç°åœ¨è½»è½»æ¾æ¾è®© AI å¸®å¿™åˆ†æï¼Œè¿™ä¸ªæµç¨‹å¯ä»¥è¯´æ˜¯ç›¸å½“èˆ’æœäº†ã€‚è„šæœ¬è´Ÿè´£è®°å½•ï¼Œå‘½ä»¤è´Ÿè´£é‡‡é›†ï¼ŒAI è´Ÿè´£åˆ†æï¼Œæˆ‘åªéœ€è¦åç­‰ç»“æœå°±è¡Œã€‚</p>
<p>æœåŠ¡å™¨å¡é¡¿ä¸å¯æ€•ï¼Œå¯æ€•çš„æ˜¯ä¸çŸ¥é“ä»å“ªä¸‹æ‰‹ã€‚æœ‰äº†è¿™å¥—ç»„åˆæ‹³ï¼Œå†é…åˆ AI çš„åˆ†æèƒ½åŠ›ï¼Œä»€ä¹ˆ <strong>è¿›ç¨‹åˆ†æ</strong>ã€<strong>æ€§èƒ½ç“¶é¢ˆ</strong>ã€<strong>èµ„æºå ç”¨</strong> éƒ½ä¸åœ¨è¯ä¸‹ã€‚</p>
<p>è¿™å°±æ˜¯å·¥å…·çš„åŠ›é‡ï¼Œè¿™å°±æ˜¯ <strong>AI æ—¶ä»£</strong>çš„ä¾¿åˆ©ã€‚å†ä¹Ÿä¸ç”¨æ‹…å¿ƒæœåŠ¡å™¨ä¸Šé‚£ä¸€å¤§å †è¿›ç¨‹ä¿¡æ¯äº†ï¼Œé¦™å¾—å¾ˆï¼</p>
<hr/>
<blockquote>
<p>ä»£ç æ˜¯æˆ‘çš„è¯­è¨€ï¼Œç»ˆç«¯æ˜¯æˆ‘çš„ä¸–ç•Œã€‚</p>
<p><strong>PFinalClub</strong> Â· å†™äºä¸Šæµ·æŸä¸ªåŠ ç­çš„æ·±å¤œ<br/>
ä¸€ä¸ªç”¨ä»£ç å·æ‡’çš„ä¸“ä¸šæˆ· | å…¬ä¼—å·ï¼šPFinalClub<br/>
2025.12.26</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MySQLåˆ†åº“åˆ†è¡¨ï¼Œä»â€œä¸€å®¤ä¸€å…â€åˆ°â€œè±ªååˆ«å¢…åŒºâ€çš„æ•°æ®åº“å‡çº§ä¹‹æ—…]]></title>    <link>https://juejin.cn/post/7587675443442614312</link>    <guid>https://juejin.cn/post/7587675443442614312</guid>    <pubDate>2025-12-26T04:20:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587675443442614312" data-draft-id="7587671647400230952" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MySQLåˆ†åº“åˆ†è¡¨ï¼Œä»â€œä¸€å®¤ä¸€å…â€åˆ°â€œè±ªååˆ«å¢…åŒºâ€çš„æ•°æ®åº“å‡çº§ä¹‹æ—…"/> <meta itemprop="keywords" content="åç«¯,Java,MySQL"/> <meta itemprop="datePublished" content="2025-12-26T04:20:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‚Ÿç©ºç å­—"/> <meta itemprop="url" content="https://juejin.cn/user/3139860942296830"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MySQLåˆ†åº“åˆ†è¡¨ï¼Œä»â€œä¸€å®¤ä¸€å…â€åˆ°â€œè±ªååˆ«å¢…åŒºâ€çš„æ•°æ®åº“å‡çº§ä¹‹æ—…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3139860942296830/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‚Ÿç©ºç å­—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T04:20:10.000Z" title="Fri Dec 26 2025 04:20:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°æ‚Ÿã€‚</p>
<h2 data-id="heading-0">ä¸€ã€åˆ†åº“åˆ†è¡¨æ˜¯ä»€ä¹ˆï¼Ÿâ€”â€”æ•°æ®åº“çš„â€œç”œèœœçƒ¦æ¼â€</h2>
<p>æŠŠä½ çš„MySQLæ•°æ®åº“æƒ³è±¡æˆæ˜¯ä¸ªå°å•èº«å…¬å¯“ï¼ˆå•åº“å•è¡¨ï¼‰ï¼š</p>
<ul>
<li>åˆšå¼€å§‹ä½è¿›å»æ—¶ï¼Œä¸œè¥¿ä¸å¤šï¼Œæ‰¾å•¥éƒ½æ–¹ä¾¿</li>
<li>åæ¥ä½ ç»“å©šäº†ï¼ˆç”¨æˆ·é‡å¢åŠ ï¼‰ï¼Œç”Ÿäº†å¨ƒï¼ˆæ•°æ®é‡æš´å¢ï¼‰ï¼Œè¿˜å…»äº†æ¡äºŒå“ˆï¼ˆä¸šåŠ¡å¤æ‚äº†ï¼‰</li>
<li>ç°åœ¨å…¨å®¶æŒ¤åœ¨å°å…¬å¯“é‡Œï¼Œæ¯å¤©æ—©ä¸Šä¸€å®¶äººæŠ¢å•æ‰€ï¼ˆæ•°æ®åº“é”ç«äº‰ï¼‰ï¼Œæ‰¾åŒè¢œå­è¦ç¿»éå…¨å®¶ï¼ˆå…¨è¡¨æ‰«æï¼‰</li>
<li>é‚»å±…å¤©å¤©æŠ•è¯‰ä½ å®¶å¤ªåµï¼ˆæ€§èƒ½å½±å“å…¶ä»–æœåŠ¡ï¼‰</li>
</ul>
<p>è¿™æ—¶å€™ä½ éœ€è¦ï¼š
<strong>åˆ†åº“</strong>ï¼šä¹°ä¸‹æ•´æ ‹æ¥¼ï¼æŠŠä¸åŒçš„å®¶äººå®‰æ’åœ¨ä¸åŒæ¥¼å±‚ï¼ˆä¸šåŠ¡å‚ç›´æ‹†åˆ†ï¼‰
<strong>åˆ†è¡¨</strong>ï¼šæŠŠæ¯ä¸ªæˆ¿é—´å†éš”æˆå°éš”é—´ï¼æŠŠè¢œå­ã€å†…è£¤ã€å¤–å¥—åˆ†å¼€æ”¾ï¼ˆæ•°æ®æ°´å¹³æ‹†åˆ†ï¼‰</p>
<h2 data-id="heading-1">äºŒã€è¯¦ç»†å®æ–½æ­¥éª¤â€”â€”ä»â€œèœ—å±…â€åˆ°â€œè±ªå®…â€çš„è£…ä¿®æŒ‡å—</h2>
<h3 data-id="heading-2">ç¬¬1æ­¥ï¼šè®¾è®¡è“å›¾â€”â€”æƒ³æ¸…æ¥šå†åŠ¨æ‰‹</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å…ˆçœ‹çœ‹ç°åœ¨çš„â€œæˆ¿å­â€æœ‰å¤šå¤§</span>
<span class="hljs-keyword">SELECT</span> 
    TABLE_SCHEMA <span class="hljs-keyword">as</span> <span class="hljs-string">'æ•°æ®åº“'</span>,
    TABLE_NAME <span class="hljs-keyword">as</span> <span class="hljs-string">'è¡¨å'</span>,
    ROUND((DATA_LENGTH <span class="hljs-operator">+</span> INDEX_LENGTH) <span class="hljs-operator">/</span> <span class="hljs-number">1024</span> <span class="hljs-operator">/</span> <span class="hljs-number">1024</span>, <span class="hljs-number">2</span>) <span class="hljs-keyword">as</span> <span class="hljs-string">'å¤§å°(MB)'</span>,
    TABLE_ROWS <span class="hljs-keyword">as</span> <span class="hljs-string">'è¡Œæ•°'</span>
<span class="hljs-keyword">FROM</span> information_schema.TABLES 
<span class="hljs-keyword">WHERE</span> TABLE_SCHEMA <span class="hljs-operator">=</span> <span class="hljs-string">'ä½ çš„æ•°æ®åº“å'</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> (DATA_LENGTH <span class="hljs-operator">+</span> INDEX_LENGTH) <span class="hljs-keyword">DESC</span>;

<span class="hljs-comment">-- æ€è€ƒäººç”Ÿä¸‰è¿é—®ï¼š</span>
<span class="hljs-comment">-- 1. æŒ‰ä¸šåŠ¡åˆ†ï¼Ÿ(ç”¨æˆ·ç›¸å…³ã€è®¢å•ç›¸å…³ã€å•†å“ç›¸å…³)</span>
<span class="hljs-comment">-- 2. æŒ‰æ—¶é—´åˆ†ï¼Ÿ(2024è®¢å•ã€2025è®¢å•)</span>
<span class="hljs-comment">-- 3. æŒ‰åœ°åŸŸåˆ†ï¼Ÿ(åŒ—äº¬ç”¨æˆ·ã€ä¸Šæµ·ç”¨æˆ·)</span>
</code></pre>
<h3 data-id="heading-3">ç¬¬2æ­¥ï¼šå‚ç›´åˆ†åº“â€”â€”è®©ä¸“ä¸šçš„äººä½ä¸“ä¸šçš„æ¥¼å±‚</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åŸæ¥éƒ½æŒ¤åœ¨ä¸€ä¸ªåº“é‡Œ</span>
<span class="hljs-keyword">CREATE</span> DATABASE single_apartment;

<span class="hljs-comment">-- ç°åœ¨ä¹°æ ‹æ¥¼ï¼Œæ¯å±‚ä¸€ä¸ªä¸“ä¸šæˆ·</span>
<span class="hljs-keyword">CREATE</span> DATABASE user_villa;      <span class="hljs-comment">-- ç”¨æˆ·ä¸“å±æ¥¼å±‚</span>
<span class="hljs-keyword">CREATE</span> DATABASE order_mansion;   <span class="hljs-comment">-- è®¢å•è±ªåå±‚</span>
<span class="hljs-keyword">CREATE</span> DATABASE product_tower;   <span class="hljs-comment">-- å•†å“å±•ç¤ºå±‚</span>

<span class="hljs-comment">-- ç”¨æˆ·è¡¨æ¬åˆ°ç”¨æˆ·æ¥¼å±‚</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> user_villa.user_info (
    user_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT,
    username <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    email <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),
    created_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
    <span class="hljs-comment">-- ç”¨æˆ·ç›¸å…³çš„å…¶ä»–å­—æ®µ...</span>
);

<span class="hljs-comment">-- è®¢å•è¡¨æ¬åˆ°è®¢å•æ¥¼å±‚  </span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> order_mansion.order_info (
    order_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT,
    user_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    amount <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>),
    status TINYINT,
    created_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
    <span class="hljs-comment">-- è®¢å•ç›¸å…³çš„å…¶ä»–å­—æ®µ...</span>
);
</code></pre>
<h3 data-id="heading-4">ç¬¬3æ­¥ï¼šæ°´å¹³åˆ†è¡¨â€”â€”æ¯ä¸ªæˆ¿é—´éƒ½è£…ä¸Šå¸è§†è§’è¡£æŸœ</h3>
<p><strong>æ–¹æ³•ä¸€ï¼šæŒ‰èŒƒå›´åˆ†è¡¨ï¼ˆé€‚åˆæ—¶é—´åºåˆ—ï¼‰</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è®¢å•è¡¨æŒ‰æœˆä»½æ‹†åˆ†ï¼Œå†ä¹Ÿä¸æ€•æ‰¾å»å¹´çš„è®¢å•åƒè€ƒå¤äº†</span>
<span class="hljs-comment">-- 2024å¹´è®¢å•è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> order_mansion.order_202401 (
    order_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT,
    user_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    <span class="hljs-comment">-- ... å…¶ä»–å­—æ®µ</span>
    created_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
    INDEX idx_user_id (user_id),
    INDEX idx_created_at (created_at)
) <span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">RANGE</span> (<span class="hljs-keyword">MONTH</span>(created_at)) (
    <span class="hljs-keyword">PARTITION</span> p1 <span class="hljs-keyword">VALUES</span> LESS THAN (<span class="hljs-number">2</span>),
    <span class="hljs-keyword">PARTITION</span> p2 <span class="hljs-keyword">VALUES</span> LESS THAN (<span class="hljs-number">3</span>),
    <span class="hljs-comment">-- ... æ›´å¤šåˆ†åŒº</span>
);

<span class="hljs-comment">-- 2024å¹´2æœˆè®¢å•è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> order_mansion.order_202402 (
    <span class="hljs-comment">-- ç»“æ„åŒä¸Š</span>
);
</code></pre>
<p><strong>æ–¹æ³•äºŒï¼šæŒ‰å“ˆå¸Œåˆ†è¡¨ï¼ˆå‡åŒ€åˆ†å¸ƒï¼‰</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ç”¨æˆ·è¡¨æŒ‰IDå–æ¨¡åˆ†è¡¨ï¼Œ16å¼ è¡¨å¤Ÿä¸å¤Ÿï¼Ÿ</span>
<span class="hljs-comment">-- å…ˆåˆ›å»ºç”¨æˆ·è¡¨æ¨¡æ¿</span>
DELIMITER $$

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> create_user_tables()
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">DECLARE</span> i <span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>;
    WHILE i <span class="hljs-operator">&lt;</span> <span class="hljs-number">16</span> DO
        <span class="hljs-keyword">SET</span> <span class="hljs-variable">@table</span>_name <span class="hljs-operator">=</span> CONCAT(<span class="hljs-string">'user_villa.user_info_'</span>, LPAD(i, <span class="hljs-number">2</span>, <span class="hljs-string">'0'</span>));
        <span class="hljs-keyword">SET</span> <span class="hljs-variable">@sql</span> <span class="hljs-operator">=</span> CONCAT(<span class="hljs-string">'
            CREATE TABLE IF NOT EXISTS '</span>, <span class="hljs-variable">@table</span>_name, <span class="hljs-string">' (
                user_id BIGINT PRIMARY KEY AUTO_INCREMENT,
                username VARCHAR(50) NOT NULL,
                email VARCHAR(100),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                INDEX idx_username (username)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4
        '</span>);
        <span class="hljs-keyword">PREPARE</span> stmt <span class="hljs-keyword">FROM</span> <span class="hljs-variable">@sql</span>;
        <span class="hljs-keyword">EXECUTE</span> stmt;
        <span class="hljs-keyword">DEALLOCATE</span> <span class="hljs-keyword">PREPARE</span> stmt;
        <span class="hljs-keyword">SET</span> i <span class="hljs-operator">=</span> i <span class="hljs-operator">+</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">END</span> WHILE;
<span class="hljs-keyword">END</span>$$

DELIMITER ;

<span class="hljs-comment">-- æ‰§è¡Œåˆ›å»º</span>
<span class="hljs-keyword">CALL</span> create_user_tables();
</code></pre>
<h3 data-id="heading-5">ç¬¬4æ­¥ï¼šè·¯ç”±ç­–ç•¥â€”â€”ç»™æ¯ä¸ªæ•°æ®é…ä¸ªâ€œå¯¼èˆªç³»ç»Ÿâ€</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Javaä»£ç ç¤ºä¾‹ï¼šæ•°æ®è·¯ç”±å¯¼èˆª</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ShardingNavigator</span> {
    
    <span class="hljs-comment">// ç”¨æˆ·è¡¨è·¯ç”±ï¼šæ ¹æ®user_idå†³å®šå»å“ªä¸ªè¡¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getUserTableName</span>(<span class="hljs-params">long userId</span>) {
        int tableIndex = (int) (userId % <span class="hljs-number">16</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">String</span>.<span class="hljs-title function_">format</span>(<span class="hljs-string">"user_info_%02d"</span>, tableIndex);
    }
    
    <span class="hljs-comment">// è®¢å•è¡¨è·¯ç”±ï¼šæ ¹æ®æ—¶é—´å†³å®šå»å“ªä¸ªè¡¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getOrderTableName</span>(<span class="hljs-params"><span class="hljs-built_in">Date</span> orderTime</span>) {
        <span class="hljs-title class_">SimpleDateFormat</span> sdf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleDateFormat</span>(<span class="hljs-string">"yyyyMM"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-string">"order_"</span> + sdf.<span class="hljs-title function_">format</span>(orderTime);
    }
    
    <span class="hljs-comment">// ç»„åˆæŸ¥è¯¢ï¼šè·¨è¡¨æŸ¥è¯¢å°±åƒç»„ç»‡å®¶åº­èšä¼š</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">Order</span>&gt; <span class="hljs-title function_">getUserOrders</span>(<span class="hljs-params">long userId, <span class="hljs-built_in">Date</span> startTime, <span class="hljs-built_in">Date</span> endTime</span>) {
        <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">Order</span>&gt; allOrders = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-title class_">Calendar</span> calendar = <span class="hljs-title class_">Calendar</span>.<span class="hljs-title function_">getInstance</span>();
        calendar.<span class="hljs-title function_">setTime</span>(startTime);
        
        <span class="hljs-comment">// éå†æ—¶é—´èŒƒå›´å†…çš„æ‰€æœ‰æœˆä»½è¡¨</span>
        <span class="hljs-keyword">while</span> (calendar.<span class="hljs-title function_">getTime</span>().<span class="hljs-title function_">before</span>(endTime)) {
            <span class="hljs-title class_">String</span> tableName = <span class="hljs-title function_">getOrderTableName</span>(calendar.<span class="hljs-title function_">getTime</span>());
            <span class="hljs-title class_">String</span> sql = <span class="hljs-string">"SELECT * FROM "</span> + tableName + <span class="hljs-string">" WHERE user_id = ?"</span>;
            <span class="hljs-comment">// æ‰§è¡ŒæŸ¥è¯¢å¹¶æ·»åŠ åˆ°ç»“æœé›†</span>
            <span class="hljs-comment">// ...</span>
            calendar.<span class="hljs-title function_">add</span>(<span class="hljs-title class_">Calendar</span>.<span class="hljs-property">MONTH</span>, <span class="hljs-number">1</span>);
        }
        <span class="hljs-keyword">return</span> allOrders;
    }
}
</code></pre>
<h3 data-id="heading-6">ç¬¬5æ­¥ï¼šä¸­é—´ä»¶é…ç½®â€”â€”è¯·ä¸ªâ€œä¸‡èƒ½ç®¡å®¶â€</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># ShardingSphereé…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼ˆYAMLæ ¼å¼ï¼‰</span>
<span class="hljs-comment"># è¿™ä½ç®¡å®¶çŸ¥é“æ‰€æœ‰æˆ¿é—´åœ¨å“ª</span>
<span class="hljs-attr">dataSources:</span>
  <span class="hljs-attr">ds0:</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/user_villa?useSSL=false</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">your_password</span>
  <span class="hljs-attr">ds1:</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3307/order_mansion?useSSL=false</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">your_password</span>

<span class="hljs-attr">shardingRule:</span>
  <span class="hljs-attr">tables:</span>
    <span class="hljs-attr">user_info:</span>
      <span class="hljs-attr">actualDataNodes:</span> <span class="hljs-string">ds0.user_info_${0..15}</span>
      <span class="hljs-attr">tableStrategy:</span>
        <span class="hljs-attr">inline:</span>
          <span class="hljs-attr">shardingColumn:</span> <span class="hljs-string">user_id</span>
          <span class="hljs-attr">algorithmExpression:</span> <span class="hljs-string">user_info_${user_id</span> <span class="hljs-string">%</span> <span class="hljs-number">16</span><span class="hljs-string">}</span>
    <span class="hljs-attr">order_info:</span>
      <span class="hljs-attr">actualDataNodes:</span> <span class="hljs-string">ds1.order_${2024..2025}${1..12}</span>
      <span class="hljs-attr">tableStrategy:</span>
        <span class="hljs-attr">standard:</span>
          <span class="hljs-attr">shardingColumn:</span> <span class="hljs-string">created_at</span>
          <span class="hljs-attr">preciseAlgorithmClassName:</span> <span class="hljs-string">com.example.TimeShardingAlgorithm</span>
  
  <span class="hljs-attr">bindingTables:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">user_info,order_info</span>
</code></pre>
<h3 data-id="heading-7">ç¬¬6æ­¥ï¼šæ•°æ®è¿ç§»â€”â€”æ¬å®¶ä¸èƒ½ä¸¢ä¸œè¥¿</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ç¬¬ä¸€æ­¥ï¼šå…ˆæŠ„å®¶ï¼ˆå¤‡ä»½ï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> order_mansion.order_202401_new <span class="hljs-keyword">LIKE</span> order_mansion.order_202401;

<span class="hljs-comment">-- ç¬¬äºŒæ­¥ï¼šæ…¢æ…¢æ¬ï¼ˆå¢é‡è¿ç§»ï¼‰</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> order_mansion.order_202401_new
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> single_apartment.orders 
<span class="hljs-keyword">WHERE</span> created_at <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2024-01-01'</span> 
  <span class="hljs-keyword">AND</span> created_at <span class="hljs-operator">&lt;</span> <span class="hljs-string">'2024-02-01'</span>;

<span class="hljs-comment">-- ç¬¬ä¸‰æ­¥ï¼šæ£€æŸ¥æœ‰æ²¡æœ‰è½ä¸‹çš„</span>
<span class="hljs-keyword">SELECT</span> 
    (<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> single_apartment.orders 
     <span class="hljs-keyword">WHERE</span> created_at <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2024-01-01'</span> <span class="hljs-keyword">AND</span> created_at <span class="hljs-operator">&lt;</span> <span class="hljs-string">'2024-02-01'</span>) <span class="hljs-keyword">as</span> old_count,
    (<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> order_mansion.order_202401_new) <span class="hljs-keyword">as</span> new_count;

<span class="hljs-comment">-- ç¬¬å››æ­¥ï¼šåˆ‡æ¢é—¨ç‰Œå·ï¼ˆé‡å‘½åï¼‰</span>
RENAME <span class="hljs-keyword">TABLE</span> 
    order_mansion.order_202401 <span class="hljs-keyword">TO</span> order_mansion.order_202401_backup,
    order_mansion.order_202401_new <span class="hljs-keyword">TO</span> order_mansion.order_202401;
</code></pre>
<h3 data-id="heading-8">ç¬¬7æ­¥ï¼šå…¨å±€IDç”Ÿæˆâ€”â€”ç»™æ¯ä¸ªæ•°æ®å‘èº«ä»½è¯</h3>
<pre><code class="hljs language-ini" lang="ini">// é›ªèŠ±ç®—æ³•ï¼šTwitterå‡ºå“ï¼Œå¿…å±ç²¾å“
public class SnowflakeIdGenerator {
    private final long <span class="hljs-attr">twepoch</span> = <span class="hljs-number">1288834974657</span>L<span class="hljs-comment">;</span>
    private final long <span class="hljs-attr">workerIdBits</span> = <span class="hljs-number">5</span>L<span class="hljs-comment">;</span>
    private final long <span class="hljs-attr">datacenterIdBits</span> = <span class="hljs-number">5</span>L<span class="hljs-comment">;</span>
    private final long <span class="hljs-attr">sequenceBits</span> = <span class="hljs-number">12</span>L<span class="hljs-comment">;</span>
    
    private long workerId<span class="hljs-comment">;</span>
    private long datacenterId<span class="hljs-comment">;</span>
    private long <span class="hljs-attr">sequence</span> = <span class="hljs-number">0</span>L<span class="hljs-comment">;</span>
    private long <span class="hljs-attr">lastTimestamp</span> = -<span class="hljs-number">1</span>L<span class="hljs-comment">;</span>
    
    public synchronized long nextId() {
        long <span class="hljs-attr">timestamp</span> = timeGen()<span class="hljs-comment">;</span>
        
        if (timestamp &lt; lastTimestamp) {
            throw new RuntimeException("æ—¶é—´å€’æµäº†ï¼Œæ£€æŸ¥ç³»ç»Ÿæ—¶é—´ï¼")<span class="hljs-comment">;</span>
        }
        
        if (<span class="hljs-attr">lastTimestamp</span> == timestamp) {
            <span class="hljs-attr">sequence</span> = (sequence + <span class="hljs-number">1</span>) &amp; <span class="hljs-number">4095</span><span class="hljs-comment">;  // 2^12-1</span>
            if (<span class="hljs-attr">sequence</span> == <span class="hljs-number">0</span>) {
                <span class="hljs-attr">timestamp</span> = tilNextMillis(lastTimestamp)<span class="hljs-comment">;</span>
            }
        } else {
            <span class="hljs-attr">sequence</span> = <span class="hljs-number">0</span>L<span class="hljs-comment">;</span>
        }
        
        <span class="hljs-attr">lastTimestamp</span> = timestamp<span class="hljs-comment">;</span>
        
        return ((timestamp - twepoch) &lt;&lt; 22) |
               (datacenterId &lt;&lt; 17) |
               (workerId &lt;&lt; 12) |
               sequence<span class="hljs-comment">;</span>
    }
    
    // å…¨å±€å”¯ä¸€ï¼Œè¶‹åŠ¿é€’å¢ï¼Œé€‚åˆåˆ†åº“åˆ†è¡¨
}
</code></pre>
<h2 data-id="heading-9">ä¸‰ã€æ³¨æ„äº‹é¡¹â€”â€”åˆ«å¢…åŒºçš„ç‰©ä¸šç®¡ç†æ¡ä¾‹</h2>
<ol>
<li>
<p><strong>åˆ†å¸ƒå¼äº‹åŠ¡</strong>ï¼šæ¥¼ä¸Šè½¬è´¦ï¼Œæ¥¼ä¸‹æ‰£æ¬¾ï¼Œå¿…é¡»åŒæ—¶æˆåŠŸæˆ–å¤±è´¥</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨Seataç­‰åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ</span>
<span class="hljs-meta">@GlobalTransactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">transferMoney</span><span class="hljs-params">(<span class="hljs-type">long</span> fromUser, <span class="hljs-type">long</span> toUser, BigDecimal amount)</span> {
    <span class="hljs-comment">// 1. ä»ç”¨æˆ·åº“æ‰£æ¬¾</span>
    <span class="hljs-comment">// 2. å‘è®¢å•åº“æ’å…¥è®°å½•</span>
    <span class="hljs-comment">// è¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å›æ»š</span>
}
</code></pre>
</li>
<li>
<p><strong>è·¨è¡¨æŸ¥è¯¢</strong>ï¼šæƒ³æ‰¾å¼ ä¸‰çš„æ‰€æœ‰è®¢å•ï¼Ÿå¾—é—®éæ‰€æœ‰è¡¨ï¼</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ†è¡¨å‰ï¼šä¸€æ­¥åˆ°ä½</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">123</span>;

<span class="hljs-comment">-- åˆ†è¡¨åï¼šå˜æˆä¾¦æŸ¥è¡ŒåŠ¨</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> order_202401 <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">123</span>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> order_202402 <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">123</span>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>
<span class="hljs-comment">-- ... æŸ¥éæ‰€æœ‰æœˆä»½è¡¨</span>
</code></pre>
</li>
<li>
<p><strong>JOINæ“ä½œ</strong>ï¼šç”¨æˆ·è¡¨å’Œè®¢å•è¡¨åœ¨ä¸åŒåº“ï¼Ÿåªèƒ½ä¸šåŠ¡å±‚JOIN</p>
<pre><code class="hljs language-ini" lang="ini">// 1. å…ˆä»ç”¨æˆ·åº“æŸ¥ç”¨æˆ·
List&lt;User&gt; <span class="hljs-attr">users</span> = userDao.getUsers(condition)<span class="hljs-comment">;</span>
List&lt;Long&gt; <span class="hljs-attr">userIds</span> = users.stream().map(User::getId).collect(Collectors.toList())<span class="hljs-comment">;</span>

// 2. å†å»è®¢å•åº“æŸ¥è¿™äº›ç”¨æˆ·çš„è®¢å•
List&lt;Order&gt; <span class="hljs-attr">orders</span> = orderDao.getOrdersByUserIds(userIds)<span class="hljs-comment">;</span>

// 3. åœ¨å†…å­˜ä¸­ç»„è£…
Map&lt;Long, List&lt;Order&gt;&gt; <span class="hljs-attr">userOrdersMap</span> = groupOrdersByUser(orders)<span class="hljs-comment">;</span>
</code></pre>
</li>
</ol>
<h2 data-id="heading-10">å››ã€æ€»ç»“</h2>
<p>åˆ†åº“åˆ†è¡¨å°±åƒæ•°æ®åº“çš„æˆäººç¤¼ï¼Œæ„å‘³ç€ä½ çš„ä¸šåŠ¡ä»â€œå°æ‰“å°é—¹â€å˜æˆäº†â€œæ­£ç»äº‹ä¸šâ€ã€‚ä½†æ˜¯ï¼š</p>
<p><strong>ä¸è¦è¿‡æ—©ä¼˜åŒ–</strong>ï¼šå¦‚æœä½ çš„æ•°æ®è¿˜æ²¡åˆ°ç™¾ä¸‡çº§åˆ«ï¼Œåˆ«æ€¥ç€åˆ†è¡¨ï¼Œå°±åƒä¸èƒ½å› ä¸ºå°†æ¥å¯èƒ½å˜èƒ–ï¼Œç°åœ¨å°±ä¹°XXLå·è£¤å­ã€‚</p>
<p><strong>é€‰æ‹©åˆé€‚çš„ç­–ç•¥</strong>ï¼šæŒ‰æ—¶é—´åˆ†ï¼ŸæŒ‰åœ°åŸŸåˆ†ï¼ŸæŒ‰ä¸šåŠ¡åˆ†ï¼Ÿè¿™å°±åƒé€‰æ‹©è¡£æŸœæ•´ç†æ–¹å¼ï¼Œæœ‰äººå–œæ¬¢æŒ‰å­£èŠ‚ï¼Œæœ‰äººå–œæ¬¢æŒ‰é¢œè‰²ï¼Œé€‚åˆçš„æ‰æ˜¯æœ€å¥½çš„ã€‚</p>
<p><strong>å‡†å¤‡å¥½å·¥å…·</strong>ï¼šä¸­é—´ä»¶ï¼ˆShardingSphereã€MyCatï¼‰æ˜¯ä½ çš„ç‘å£«å†›åˆ€ï¼Œç›‘æ§å·¥å…·ï¼ˆPrometheusã€Grafanaï¼‰æ˜¯ä½ çš„å¥åº·æ£€æµ‹ä»ªã€‚</p>
<p><strong>æ¥å—ä¸å®Œç¾</strong>ï¼šåˆ†åº“åˆ†è¡¨åï¼Œäº‹åŠ¡å¤æ‚äº†ï¼ŒæŸ¥è¯¢éº»çƒ¦äº†ï¼Œè¿ç»´å›°éš¾äº†ã€‚ä½†è¿™å°±æ˜¯æˆé•¿çš„ä»£ä»·ï¼Œå°±åƒé•¿å¤§åå‘ç°ä¸–ç•Œä¸æ˜¯éé»‘å³ç™½ã€‚</p>
<p><strong>æœ€åæé†’</strong>ï¼šåˆ†åº“åˆ†è¡¨å‰ï¼Œå…ˆè¯•è¯•è¿™äº›â€œå‡è‚¥æ–¹æ³•â€ï¼š</p>
<ol>
<li>åŠ ç´¢å¼•ï¼ˆç»™ä¸œè¥¿è´´æ ‡ç­¾ï¼‰</li>
<li>ä¼˜åŒ–SQLï¼ˆæ•´ç†æ”¶çº³æŠ€å·§ï¼‰</li>
<li>å‡çº§ç¡¬ä»¶ï¼ˆæ¢ä¸ªå¤§æˆ¿å­ï¼‰</li>
<li>è¯»å†™åˆ†ç¦»ï¼ˆç”·å¥³åˆ†å¼€ç”¨å•æ‰€ï¼‰</li>
</ol>
<p>åªæœ‰å½“è¿™äº›éƒ½ä¸å¤Ÿç”¨æ—¶ï¼Œæ‰è€ƒè™‘åˆ†åº“åˆ†è¡¨è¿™ä¸ªå¤§å·¥ç¨‹ã€‚è®°ä½ï¼Œå¥½çš„æ¶æ„æ˜¯æ¼”è¿›è€Œæ¥çš„ï¼Œä¸æ˜¯è®¾è®¡å‡ºæ¥çš„ã€‚å°±åƒå¥½çš„å©šå§»ï¼Œéœ€è¦æ…¢æ…¢ç£¨åˆï¼Œä¸èƒ½ä¸€å¼€å§‹å°±åˆ†æˆ¿ç¡ï¼ˆåˆ†åº“ï¼‰è¿˜åˆ†åºŠï¼ˆåˆ†è¡¨ï¼‰ï¼</p>
<p>ç¥ä½ çš„æ•°æ®åº“ä»â€œå°å…¬å¯“â€é¡ºåˆ©å‡çº§åˆ°â€œè±ªååˆ«å¢…åŒºâ€ï¼Œä½å¾—å®½æ•ï¼ŒæŸ¥å¾—é£å¿«ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/337ccddaab4549c58f9029e21f3842de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767327610&amp;x-signature=%2BUflMKZc4wfB%2BdvzYPBXozMTJA4%3D" alt="MySQLåˆ†åº“åˆ†è¡¨ï¼Œä»â€œä¸€å®¤ä¸€å…â€åˆ°â€œè±ªååˆ«å¢…åŒºâ€çš„æ•°æ®åº“å‡çº§ä¹‹æ—….png" loading="lazy"/></p>
<p><strong>è°¢è°¢ä½ çœ‹æˆ‘çš„æ–‡ç« ï¼Œæ—¢ç„¶çœ‹åˆ°è¿™é‡Œäº†ï¼Œå¦‚æœè§‰å¾—ä¸é”™ï¼Œéšæ‰‹ç‚¹ä¸ªèµã€è½¬å‘ã€åœ¨çœ‹ä¸‰è¿å§ï¼Œæ„Ÿè°¢æ„Ÿè°¢ã€‚é‚£æˆ‘ä»¬ï¼Œä¸‹æ¬¡å†è§ã€‚</strong></p>
<p>æ‚¨çš„ä¸€é”®ä¸‰è¿ï¼Œæ˜¯æˆ‘æ›´æ–°çš„æœ€å¤§åŠ¨åŠ›ï¼Œè°¢è°¢</p>
<p>å±±æ°´æœ‰ç›¸é€¢ï¼Œæ¥æ—¥çš†å¯æœŸï¼Œè°¢è°¢é˜…è¯»ï¼Œæˆ‘ä»¬å†ä¼š</p>
<p>æˆ‘æ‰‹ä¸­çš„é‡‘ç®æ£’ï¼Œä¸Šèƒ½é€šå¤©ï¼Œä¸‹èƒ½æ¢æµ·</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[pythonçš„__init__.py]]></title>    <link>https://juejin.cn/post/7587709130531094537</link>    <guid>https://juejin.cn/post/7587709130531094537</guid>    <pubDate>2025-12-26T04:18:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587709130531094537" data-draft-id="7587779957674803251" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="pythonçš„__init__.py"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2025-12-26T04:18:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Warson_L"/> <meta itemprop="url" content="https://juejin.cn/user/2568875732117304"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            pythonçš„__init__.py
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2568875732117304/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Warson_L
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T04:18:49.000Z" title="Fri Dec 26 2025 04:18:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å³ä½¿æ˜¯ç©ºçš„ <code>__init__.py</code>ï¼Œå®ƒä¾ç„¶æœ‰ä¸¤ä¸ªæ ¸å¿ƒä½œç”¨ï¼Œå¯¹äºä½ ï¼ˆç‰¹åˆ«æ˜¯åšå·¥ç¨‹åŒ–å¼€å‘ï¼‰éå¸¸é‡è¦ã€‚</p>
<hr/>
<h3 data-id="heading-0">1. æŠŠå®ƒå˜æˆâ€œå¸¸è§„åŒ…â€ (Regular Package)</h3>
<p>å¦‚æœä½ ä¸åŠ  <code>__init__.py</code>ï¼ŒPython 3 ä¼šæŠŠè¿™ä¸ªç›®å½•å½“ä½œ <strong>Namespace Packageï¼ˆå‘½åç©ºé—´åŒ…ï¼‰</strong>ã€‚</p>
<ul>
<li><strong>Namespace Package</strong> æ˜¯ä¸ªé«˜çº§ç‰¹æ€§ï¼Œå…è®¸ä¸€ä¸ªåŒ…åˆ†å¸ƒåœ¨ç¡¬ç›˜çš„å¤šä¸ªä¸åŒç›®å½•ä¸‹ï¼ˆæ¯”å¦‚ <code>plugin/</code> æ–‡ä»¶å¤¹ä¸€éƒ¨åˆ†åœ¨ C ç›˜ï¼Œä¸€éƒ¨åˆ†åœ¨ D ç›˜ï¼‰ã€‚</li>
<li>å¯¹äºæˆ‘ä»¬è¿™ç§æ™®é€šçš„é¡¹ç›®ï¼Œä½ éœ€è¦çš„æ˜¯ <strong>Regular Package</strong>ã€‚åŠ ä¸Š <code>__init__.py</code>ï¼ŒPython æ‰«æ import æ—¶æ•ˆç‡æ›´é«˜ï¼Œè€Œä¸”è¡Œä¸ºæ›´ç¬¦åˆç›´è§‰ã€‚</li>
</ul>
<h3 data-id="heading-1">2. æ§åˆ¶ <code>from package import *</code> çš„è¡Œä¸º (é‡ç‚¹)</h3>
<p>è¿™æ˜¯ <code>__init__.py</code> æœ€å®ç”¨çš„åŠŸèƒ½ï¼š<strong>å¯¹å¤–æš´éœ²æ¥å£</strong>ã€‚</p>
<p>å‡è®¾ä½ çš„ç›®å½•ç»“æ„æ˜¯è¿™æ ·ï¼š</p>
<pre><code class="hljs language-text" lang="text">strategies/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ rsi_strategy.py   &lt;-- é‡Œé¢æœ‰ä¸ª class RSIStrategy
â””â”€â”€ ma_strategy.py    &lt;-- é‡Œé¢æœ‰ä¸ª class MAStrategy
</code></pre>
<h4 data-id="heading-2">å¦‚æœ <code>__init__.py</code> æ˜¯ç©ºçš„ï¼š</h4>
<p>ä½ æƒ³åœ¨ <code>main.py</code> é‡Œç”¨è¿™ä¸¤ä¸ªç­–ç•¥ï¼Œä½ å¾—å†™å¾—å¾ˆé•¿ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> strategies.rsi_strategy <span class="hljs-keyword">import</span> RSIStrategy
<span class="hljs-keyword">from</span> strategies.ma_strategy <span class="hljs-keyword">import</span> MAStrategy
</code></pre>
<p><em>(å¦‚æœæ–‡ä»¶åå¾ˆé•¿ï¼Œè¿™ä¼šå†™å¾—å¾ˆçƒ¦)</em></p>
<h4 data-id="heading-3">å¦‚æœä½ åœ¨ <code>__init__.py</code> é‡Œå†™äº†ä¸œè¥¿ï¼š</h4>
<p>ä½ å¯ä»¥åœ¨ <code>strategies/__init__.py</code> é‡Œå†™ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># strategies/__init__.py</span>
<span class="hljs-keyword">from</span> .rsi_strategy <span class="hljs-keyword">import</span> RSIStrategy
<span class="hljs-keyword">from</span> .ma_strategy <span class="hljs-keyword">import</span> MAStrategy
</code></pre>
<p><strong>ç°åœ¨ï¼Œä½ åœ¨ <code>main.py</code> é‡Œå°±å¯ä»¥è¿™æ ·å†™äº†ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å˜å¾—éå¸¸ç®€æ´ï¼</span>
<span class="hljs-keyword">from</span> strategies <span class="hljs-keyword">import</span> RSIStrategy, MAStrategy
</code></pre>
<p>è¿™å°±æ˜¯æ‰€è°“çš„ <strong>â€œæå‡å‘½åç©ºé—´â€</strong>ã€‚ä½ æŠŠæ·±å±‚æ–‡ä»¶é‡Œçš„ç±»ï¼Œæåˆ°äº†åŒ…çš„é¡¶å±‚ï¼Œè®©ä½¿ç”¨è€…ï¼ˆä¹Ÿå°±æ˜¯ä½ è‡ªå·±ï¼‰è°ƒç”¨èµ·æ¥æ›´çˆ½ã€‚</p>
<h3 data-id="heading-4">æ€»ç»“</h3>
<p>è™½ç„¶ Python 3 ä¸å¼ºåˆ¶è¦æ±‚ï¼Œä½†<strong>è¯·åŠ¡å¿…ä¿ç•™ <code>__init__.py</code></strong>ï¼Œå“ªæ€•æ˜¯ç©ºçš„ã€‚
å› ä¸ºå®ƒæ ‡å¿—ç€ï¼šâ€œè¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„ã€ç‹¬ç«‹çš„ Python æºä»£ç åŒ…â€ï¼Œè¿™å¯¹äºä»£ç è§„èŒƒå’Œ IDE çš„æ™ºèƒ½æç¤ºéƒ½éå¸¸é‡è¦ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è‹¥ä¾å®¡æ‰¹æµ-è½¬äº¤]]></title>    <link>https://juejin.cn/post/7588022226739085362</link>    <guid>https://juejin.cn/post/7588022226739085362</guid>    <pubDate>2025-12-26T05:37:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588022226739085362" data-draft-id="7587779957675114547" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è‹¥ä¾å®¡æ‰¹æµ-è½¬äº¤"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T05:37:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»£ç æ¬¡ä½é¢"/> <meta itemprop="url" content="https://juejin.cn/user/1535333867720295"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è‹¥ä¾å®¡æ‰¹æµ-è½¬äº¤
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1535333867720295/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»£ç æ¬¡ä½é¢
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T05:37:44.000Z" title="Fri Dec 26 2025 05:37:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è½¬äº¤</h2>
<p>åœ¨å®¡æ‰¹æµä¸­ï¼Œè½¬äº¤ï¼ˆä¹Ÿç§°è½¬å®¡æˆ–è½¬åŠï¼‰æ˜¯æŒ‡å½“å‰å®¡æ‰¹äººå°†æœ¬åº”è‡ªå·±å¤„ç†çš„ä»»åŠ¡ï¼Œç›´æ¥è½¬ç§»ç»™å¦ä¸€äººå¤„ç†ï¼Œå¹¶ä¸”æ­¤åè¯¥ä»»åŠ¡å°†å®Œå…¨ç”±æ¥æ‰‹äººè´Ÿè´£ï¼Œä¸å†è¿”å›ç»™åŸå®¡æ‰¹äººã€‚
<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.ruoyiflow.com" target="_blank" title="https://www.ruoyiflow.com" ref="nofollow noopener noreferrer">è‹¥ä¾å·¥ä½œæµ</a></p>
<h3 data-id="heading-1">å§”æ´¾å’Œè½¬äº¤</h3>
<pre><code class="hljs language-text" lang="text">è½¬äº¤: â€‹å½»åº•äº¤æ¥ï¼šâ€œè¿™ä»¶äº‹ç°åœ¨å®Œå…¨ç”±ä½ è´Ÿè´£äº†ã€‚â€
å§”æ´¾: å¯»æ±‚å¸®åŠ©ï¼šâ€œè¯·å¸®æˆ‘çœ‹ä¸€ä¸‹ï¼Œä½†æœ€ç»ˆå†³å®šè¿˜æ˜¯ç”±æˆ‘æ¥åšã€‚â€

ç®€å•æ¥è¯´ï¼Œè½¬äº¤æ˜¯â€œæ¢äººâ€ï¼Œè€Œå§”æ´¾/åŠ ç­¾æ˜¯â€œè¯·äººå¸®å¿™â€ã€‚
</code></pre>
<h3 data-id="heading-2">éœ€æ±‚æè¿°</h3>
<blockquote>
<p>å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªè¯·å‡æµç¨‹ï¼Œ ç”¨æˆ·æäº¤ç”³è¯·æ•°æ®ï¼Œ å®¡æ‰¹äººå°†ä»»åŠ¡ç›´æ¥è½¬äº¤ç»™å¦å¤–ä¸€ä¸ªäººå¤„ç†ï¼Œ è·Ÿè‡ªå·±æ²¡å…³ç³»äº†ï¼</p>
</blockquote>
<pre><code class="hljs language-text" lang="text">æµ‹è¯•è´¦å·ä¿¡æ¯:
è´¦å·: ry
å¯†ç : ry2025

è´¦å·: ruo
å¯†ç : ry123456

è´¦å·: yi
å¯†ç : ry123456

</code></pre>
<h3 data-id="heading-3">æµç¨‹å»ºæ¨¡</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3ce6fe7f3c244ad815aa2db9006319e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Luj56CB5qyh5L2N6Z2i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767332263&amp;x-signature=3gzMtG1ZiS%2FpOIe5uk3S87T5%2BJw%3D" alt="l2.png" loading="lazy"/></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">bpmn:definitions</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="hljs-attr">xmlns:bpmn</span>=<span class="hljs-string">"http://www.omg.org/spec/BPMN/20100524/MODEL"</span> <span class="hljs-attr">xmlns:bpmndi</span>=<span class="hljs-string">"http://www.omg.org/spec/BPMN/20100524/DI"</span> <span class="hljs-attr">xmlns:dc</span>=<span class="hljs-string">"http://www.omg.org/spec/DD/20100524/DC"</span> <span class="hljs-attr">xmlns:camunda</span>=<span class="hljs-string">"http://camunda.org/schema/1.0/bpmn"</span> <span class="hljs-attr">xmlns:di</span>=<span class="hljs-string">"http://www.omg.org/spec/DD/20100524/DI"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Definitions_1"</span> <span class="hljs-attr">targetNamespace</span>=<span class="hljs-string">"http://bpmn.io/schema/bpmn"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">bpmn:process</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Process_9729"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"è¯·å‡æµç¨‹"</span> <span class="hljs-attr">isExecutable</span>=<span class="hljs-string">"true"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bpmn:startEvent</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Event_0ucy4xc"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">bpmn:outgoing</span>&gt;</span>Flow_1fgnagb<span class="hljs-tag">&lt;/<span class="hljs-name">bpmn:outgoing</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">bpmn:startEvent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bpmn:sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Flow_1fgnagb"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"Event_0ucy4xc"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"Activity_04kx462"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bpmn:userTask</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Activity_04kx462"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"è¯·å‡ç”³è¯·"</span> <span class="hljs-attr">camunda:assignee</span>=<span class="hljs-string">"${startUser}"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">bpmn:extensionElements</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">camunda:formData</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">camunda:formField</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"type"</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"è¯·å‡ç±»å‹"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"string"</span> /&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">camunda:formField</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"reason"</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"è¯·å‡ç†ç”±"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"string"</span> /&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">camunda:formField</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"days"</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"è¯·å‡å¤©æ•°"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"long"</span> <span class="hljs-attr">defaultValue</span>=<span class="hljs-string">""</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">camunda:formData</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">bpmn:extensionElements</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">bpmn:incoming</span>&gt;</span>Flow_1fgnagb<span class="hljs-tag">&lt;/<span class="hljs-name">bpmn:incoming</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">bpmn:outgoing</span>&gt;</span>Flow_0nrxozi<span class="hljs-tag">&lt;/<span class="hljs-name">bpmn:outgoing</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">bpmn:userTask</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bpmn:sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Flow_0nrxozi"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"Activity_04kx462"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"Activity_0qetwmj"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bpmn:userTask</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Activity_0qetwmj"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"ç›´å±é¢†å¯¼å®¡æ‰¹"</span> <span class="hljs-attr">camunda:assignee</span>=<span class="hljs-string">"${candidate}"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">bpmn:extensionElements</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">camunda:formData</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">camunda:formField</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"userComment"</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"è¯„è®º"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"string"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">camunda:formData</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">bpmn:extensionElements</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">bpmn:incoming</span>&gt;</span>Flow_0nrxozi<span class="hljs-tag">&lt;/<span class="hljs-name">bpmn:incoming</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">bpmn:outgoing</span>&gt;</span>Flow_0bpj5l6<span class="hljs-tag">&lt;/<span class="hljs-name">bpmn:outgoing</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">bpmn:userTask</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bpmn:sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Flow_0bpj5l6"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"Activity_0qetwmj"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"Gateway_07216c1"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bpmn:exclusiveGateway</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Gateway_07216c1"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">bpmn:incoming</span>&gt;</span>Flow_0bpj5l6<span class="hljs-tag">&lt;/<span class="hljs-name">bpmn:incoming</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">bpmn:outgoing</span>&gt;</span>Flow_0uf4uhb<span class="hljs-tag">&lt;/<span class="hljs-name">bpmn:outgoing</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">bpmn:outgoing</span>&gt;</span>Flow_1jmp8ly<span class="hljs-tag">&lt;/<span class="hljs-name">bpmn:outgoing</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">bpmn:exclusiveGateway</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bpmn:endEvent</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Event_0lhm65y"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">bpmn:incoming</span>&gt;</span>Flow_0uf4uhb<span class="hljs-tag">&lt;/<span class="hljs-name">bpmn:incoming</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">bpmn:endEvent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bpmn:sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Flow_0uf4uhb"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"å®¡æ‰¹é€šè¿‡"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"Gateway_07216c1"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"Event_0lhm65y"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">bpmn:conditionExpression</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">"bpmn:tFormalExpression"</span>&gt;</span>${approved == true}<span class="hljs-tag">&lt;/<span class="hljs-name">bpmn:conditionExpression</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">bpmn:sequenceFlow</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bpmn:endEvent</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Event_0xmax1y"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">bpmn:incoming</span>&gt;</span>Flow_1jmp8ly<span class="hljs-tag">&lt;/<span class="hljs-name">bpmn:incoming</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">bpmn:endEvent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bpmn:sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Flow_1jmp8ly"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"å®¡æ‰¹æ‹’ç»"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"Gateway_07216c1"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"Event_0xmax1y"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">bpmn:conditionExpression</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">"bpmn:tFormalExpression"</span>&gt;</span>${approved==false}<span class="hljs-tag">&lt;/<span class="hljs-name">bpmn:conditionExpression</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">bpmn:sequenceFlow</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">bpmn:process</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">bpmn:definitions</span>&gt;</span>
</code></pre>
<h3 data-id="heading-4">æ¼”ç¤ºæ•ˆæœ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a47ef376e67c4c4696122a66f70165d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Luj56CB5qyh5L2N6Z2i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767332263&amp;x-signature=WUn65bO1L3BpkbSR5%2BzrY7e1q6A%3D" alt="leave1" loading="lazy"/></p>
<blockquote>
<p>ä½¿ç”¨è‹¥ä¾(ry)è´¦å·ç™»é™†ç³»ç»Ÿï¼Œå‘èµ·ä¸€ä¸ªè¯·å‡ç”³è¯·ï¼Œ å¤‡æ³¨ï¼Œæµ‹è¯•è½¬äº¤ï¼Œ å¹¶å°†ç®¡ç†å‘˜ä½œä¸ºå®¡æ‰¹äºº</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/873af152ee42436e83ce0095d4f6fe48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Luj56CB5qyh5L2N6Z2i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767332263&amp;x-signature=0MLDTLTlDujIAucO0qgKrhcRTfA%3D" alt="leave1" loading="lazy"/></p>
<blockquote>
<p>ä½¿ç”¨ç®¡ç†å‘˜(admin)è´¦å·ç™»é™†ç³»ç»Ÿï¼Œåœ¨å¾…åŠä»»åŠ¡ï¼Œæ‰¾åˆ°è®°å½•å¹¶è½¬äº¤ç»™ï¼Œå°ä¾</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4324ba1e51f148f4aad7d5d90e9f3387~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Luj56CB5qyh5L2N6Z2i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767332263&amp;x-signature=tLDDiI77OrWLp083YUzaatBS4tM%3D" alt="leave1" loading="lazy"/></p>
<blockquote>
<p>ä½¿ç”¨å°ä¾(yi)è´¦å·ç™»é™†ç³»ç»Ÿï¼Œåœ¨å¾…åŠä»»åŠ¡ï¼Œ æ‰¾åˆ°è®°å½•ç›´æ¥å¤„ç†ï¼Œ</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f2a86f9a4354a4ea6c84858f8751292~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Luj56CB5qyh5L2N6Z2i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767332263&amp;x-signature=gEhsDHDsKbc4JJm7EJxlCcio5qw%3D" alt="leave1" loading="lazy"/></p>
<blockquote>
<p>ä½¿ç”¨å°ä¾(yi)è´¦å·ç™»é™†ç³»ç»Ÿï¼Œåœ¨å·²åŠä»»åŠ¡ï¼Œ æ­¤æ—¶å¯ä»¥åœ¨å·²åŠä»»åŠ¡çœ‹åˆ°å®¡æ‰¹æ—¶é—´çº¿</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç™¾åº¦åœ°å›¾MapVThree Editorï¼šåœ°å›¾ç¼–è¾‘]]></title>    <link>https://juejin.cn/post/7587714124857212982</link>    <guid>https://juejin.cn/post/7587714124857212982</guid>    <pubDate>2025-12-26T02:58:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587714124857212982" data-draft-id="7587720490930126884" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç™¾åº¦åœ°å›¾MapVThree Editorï¼šåœ°å›¾ç¼–è¾‘"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-26T02:58:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·95208161179"/> <meta itemprop="url" content="https://juejin.cn/user/4232440491287450"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç™¾åº¦åœ°å›¾MapVThree Editorï¼šåœ°å›¾ç¼–è¾‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4232440491287450/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·95208161179
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T02:58:45.000Z" title="Fri Dec 26 2025 02:58:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>MapVThree Editorç±» æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§è¶…å¥½ç”¨çš„åœ°å›¾ç¼–è¾‘å·¥å…·ï¼Œè®©ä½ ç”¨å‡ è¡Œä»£ç å°±èƒ½å®ç°ä¸“ä¸šçš„åœ°å›¾ç»˜åˆ¶å’Œç¼–è¾‘åŠŸèƒ½ï¼</p>
<h2 data-id="heading-0">ğŸ¤” ä¸ºä»€ä¹ˆè¦èŠè¿™ä¸ªï¼Ÿ</h2>
<p>æœ€è¿‘åœ¨åšåœ°å›¾ç›¸å…³çš„é¡¹ç›®æ—¶ï¼Œæ€»ä¼šé‡åˆ°è¿™æ ·çš„éœ€æ±‚ï¼šéœ€è¦è®©ç”¨æˆ·åœ¨åœ°å›¾ä¸Šç”»ç‚¹ä»€ä¹ˆï¼Œæ¯”å¦‚æ ‡è®°åŒºåŸŸã€è§„åˆ’è·¯çº¿ã€æ·»åŠ æ ‡æ³¨ç‚¹ç­‰ç­‰ã€‚ä¼ ç»Ÿçš„åšæ³•å¯èƒ½éœ€è¦å†™ä¸€å¤§å †ä»£ç ï¼Œå¤„ç†å„ç§é¼ æ ‡äº‹ä»¶ã€åæ ‡è½¬æ¢ã€å›¾å½¢æ¸²æŸ“...æƒ³æƒ³å°±å¤´ç–¼å¯¹ä¸å¯¹ï¼Ÿ</p>
<p>ä»Šå¤©æƒ³è·Ÿå¤§å®¶èŠèŠ MapVThree Editor è¿™ä¸ªå¥½ä¸œè¥¿ã€‚å®ƒæŠŠå¤æ‚çš„åœ°å›¾ç¼–è¾‘åŠŸèƒ½éƒ½å°è£…å¥½äº†ï¼Œä½ åªéœ€è¦è°ƒç”¨å‡ ä¸ªç®€å•çš„ APIï¼Œå°±èƒ½å®ç°ä¸“ä¸šçº§çš„åœ°å›¾ç¼–è¾‘ä½“éªŒã€‚æ˜¯ä¸æ˜¯å¬èµ·æ¥å°±å¾ˆæ£’ï¼Ÿâœ¨</p>
<h2 data-id="heading-1">ğŸ“– å¿«é€Ÿä¸Šæ‰‹ï¼šä»é›¶å¼€å§‹</h2>
<h3 data-id="heading-2">ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–ç¼–è¾‘å™¨</h3>
<p>é¦–å…ˆï¼Œå’±ä»¬å¾—æœ‰ä¸ªåœ°å›¾å¼•æ“ï¼Œç„¶åæŠŠ Editor æ·»åŠ è¿›å»ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åˆ›å»ºåœ°å›¾å¼•æ“</span>
<span class="hljs-keyword">const</span> engine = <span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">Engine</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'map-container'</span>), {
    <span class="hljs-attr">rendering</span>: {
        <span class="hljs-attr">enableAnimationLoop</span>: <span class="hljs-literal">true</span>,
    },
    <span class="hljs-attr">map</span>: {
        <span class="hljs-attr">projection</span>: <span class="hljs-string">'ecef'</span>,
    },
});

<span class="hljs-comment">// æ·»åŠ  Editor - å°±è¿™ä¹ˆç®€å•ï¼</span>
<span class="hljs-keyword">const</span> editor = engine.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">Editor</span>({
    <span class="hljs-attr">type</span>: mapvthree.<span class="hljs-property">Editor</span>.<span class="hljs-property">DrawerType</span>.<span class="hljs-property">POLYGON</span>,  <span class="hljs-comment">// é»˜è®¤ç”»å¤šè¾¹å½¢</span>
    <span class="hljs-attr">enableMidpointHandles</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// å¯ç”¨ä¸­ç‚¹æ ‡è®°ï¼Œæ–¹ä¾¿åœ¨è¾¹ä¸ŠåŠ é¡¶ç‚¹</span>
}));
</code></pre>
<p>çœ‹åˆ°äº†å—ï¼Ÿå°±è¿™ä¹ˆå‡ è¡Œä»£ç ï¼Œä½ çš„ç¼–è¾‘å™¨å°±å‡†å¤‡å¥½å•¦ï¼ğŸ‰</p>
<h3 data-id="heading-3">ç¬¬äºŒæ­¥ï¼šå¼€å§‹ç»˜åˆ¶</h3>
<p>æƒ³ç”»ç‚¹ä»€ä¹ˆï¼Ÿé€‰ä¸ªç±»å‹ï¼Œè°ƒç”¨ <code>start()</code> å°±è¡Œï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è®¾ç½®è¦ç”»çš„å›¾å½¢ç±»å‹</span>
editor.<span class="hljs-property">type</span> = mapvthree.<span class="hljs-property">Editor</span>.<span class="hljs-property">DrawerType</span>.<span class="hljs-property">POLYGON</span>;

<span class="hljs-comment">// å¯ä»¥å…ˆè®¾ç½®æ ·å¼</span>
editor.<span class="hljs-title function_">setStyle</span>({
    <span class="hljs-attr">fillColor</span>: <span class="hljs-string">'#ff0000'</span>,      <span class="hljs-comment">// å¡«å……é¢œè‰²</span>
    <span class="hljs-attr">fillOpacity</span>: <span class="hljs-number">0.5</span>,          <span class="hljs-comment">// å¡«å……é€æ˜åº¦</span>
    <span class="hljs-attr">strokeColor</span>: <span class="hljs-string">'#ffffff'</span>,    <span class="hljs-comment">// è¾¹æ¡†é¢œè‰²</span>
    <span class="hljs-attr">strokeWidth</span>: <span class="hljs-number">2</span>,            <span class="hljs-comment">// è¾¹æ¡†å®½åº¦</span>
});

<span class="hljs-comment">// å¼€å§‹ç»˜åˆ¶ï¼</span>
editor.<span class="hljs-title function_">start</span>();
</code></pre>
<p>ç”¨æˆ·ç°åœ¨å°±å¯ä»¥åœ¨åœ°å›¾ä¸Šç”»å¤šè¾¹å½¢äº†ï¼æ˜¯ä¸æ˜¯è¶…ç®€å•ï¼Ÿ</p>
<h3 data-id="heading-4">ç¬¬ä¸‰æ­¥ï¼šç›‘å¬äº‹ä»¶</h3>
<p>ç»˜åˆ¶å®Œæˆåä½ è‚¯å®šæƒ³çŸ¥é“å§ï¼Ÿç›‘å¬ä¸ªäº‹ä»¶å°±å¥½ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç›‘å¬åˆ›å»ºäº‹ä»¶</span>
editor.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'created'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç”¨æˆ·ç”»å¥½å•¦ï¼'</span>);
    <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œè·å–ç»˜åˆ¶çš„æ•°æ®</span>
    <span class="hljs-keyword">const</span> geoJSON = editor.<span class="hljs-title function_">exportData</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»˜åˆ¶çš„æ•°æ®ï¼š'</span>, geoJSON);
});
</code></pre>
<p>æœ‰æ„æ€å§ï¼Ÿç°åœ¨ä½ å·²ç»æŒæ¡äº†åŸºç¡€ç”¨æ³•ï½</p>
<h2 data-id="heading-5">ğŸ¨ æ”¯æŒå“ªäº›å›¾å½¢ç±»å‹ï¼Ÿ</h2>
<p>MapVThree Editor æ”¯æŒ 5 ç§å¸¸ç”¨çš„å‡ ä½•å›¾å½¢ï¼ŒåŸºæœ¬ä¸Šèƒ½æ»¡è¶³æ—¥å¸¸æ‰€æœ‰éœ€æ±‚äº†ï¼š</p>
<h3 data-id="heading-6">1ï¸âƒ£ å¤šè¾¹å½¢ (Polygon)</h3>
<pre><code class="hljs language-js" lang="js">editor.<span class="hljs-property">type</span> = mapvthree.<span class="hljs-property">Editor</span>.<span class="hljs-property">DrawerType</span>.<span class="hljs-property">POLYGON</span>;
editor.<span class="hljs-title function_">start</span>();
</code></pre>
<p>é€‚åˆæ ‡è®°åŒºåŸŸã€åˆ’åˆ†èŒƒå›´ç­‰åœºæ™¯ã€‚</p>
<h3 data-id="heading-7">2ï¸âƒ£ æŠ˜çº¿ (Line)</h3>
<pre><code class="hljs language-js" lang="js">editor.<span class="hljs-property">type</span> = mapvthree.<span class="hljs-property">Editor</span>.<span class="hljs-property">DrawerType</span>.<span class="hljs-property">LINE</span>;
editor.<span class="hljs-title function_">start</span>();
</code></pre>
<p>é€‚åˆè§„åˆ’è·¯çº¿ã€æ ‡è®°è½¨è¿¹ç­‰åœºæ™¯ã€‚</p>
<h3 data-id="heading-8">3ï¸âƒ£ ç‚¹ (Point)</h3>
<pre><code class="hljs language-js" lang="js">editor.<span class="hljs-property">type</span> = mapvthree.<span class="hljs-property">Editor</span>.<span class="hljs-property">DrawerType</span>.<span class="hljs-property">POINT</span>;
editor.<span class="hljs-title function_">start</span>();
</code></pre>
<p>é€‚åˆæ·»åŠ æ ‡è®°ç‚¹ã€åœ°æ ‡ç­‰åœºæ™¯ã€‚</p>
<h3 data-id="heading-9">4ï¸âƒ£ åœ†å½¢ (Circle)</h3>
<pre><code class="hljs language-js" lang="js">editor.<span class="hljs-property">type</span> = mapvthree.<span class="hljs-property">Editor</span>.<span class="hljs-property">DrawerType</span>.<span class="hljs-property">CIRCLE</span>;
editor.<span class="hljs-title function_">start</span>();
</code></pre>
<p>é€‚åˆæ ‡è®°èŒƒå›´ã€ç¼“å†²åŒºåˆ†æç­‰åœºæ™¯ã€‚</p>
<h3 data-id="heading-10">5ï¸âƒ£ çŸ©å½¢ (Rectangle)</h3>
<pre><code class="hljs language-js" lang="js">editor.<span class="hljs-property">type</span> = mapvthree.<span class="hljs-property">Editor</span>.<span class="hljs-property">DrawerType</span>.<span class="hljs-property">RECTANGLE</span>;
editor.<span class="hljs-title function_">start</span>();
</code></pre>
<p>é€‚åˆæ¡†é€‰åŒºåŸŸã€å¿«é€Ÿç»˜åˆ¶çŸ©å½¢èŒƒå›´ç­‰åœºæ™¯ã€‚</p>
<p>çœ‹ï¼Œæƒ³ç”»å•¥å°±ç”»å•¥ï¼Œåˆ‡æ¢ç±»å‹å°±æ˜¯æ”¹ä¸€è¡Œä»£ç çš„äº‹å„¿ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a05b71dff1c04b489b9dce82a1c4c417~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3OTUyMDgxNjExNzk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767322724&amp;x-signature=gNqkBv8xFRFAO5VsdIbCkIRWW58%3D" alt="draw" loading="lazy"/></p>
<h2 data-id="heading-11">âœï¸ ç¼–è¾‘å·²æœ‰å›¾å½¢</h2>
<p>ç”»å®Œä¹‹åæƒ³æ”¹ï¼Ÿæ²¡é—®é¢˜ï¼Editor æä¾›äº†å¼ºå¤§çš„ç¼–è¾‘åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-12">è¿›å…¥ç¼–è¾‘æ¨¡å¼</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç‚¹å‡»è¦ç´ æ—¶è‡ªåŠ¨è¿›å…¥ç¼–è¾‘æ¨¡å¼</span>
editor.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'featureClick'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> featureId = e.<span class="hljs-property">featureId</span>;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç‚¹å‡»äº†è¦ç´ ï¼š'</span>, featureId);

    <span class="hljs-comment">// å¼€å¯ç¼–è¾‘</span>
    editor.<span class="hljs-title function_">enableEdit</span>(featureId);
});

<span class="hljs-comment">// ä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šè¦ç¼–è¾‘çš„è¦ç´ </span>
editor.<span class="hljs-title function_">enableEdit</span>(<span class="hljs-string">'your-feature-id'</span>);

<span class="hljs-comment">// é€€å‡ºç¼–è¾‘æ¨¡å¼</span>
editor.<span class="hljs-title function_">disableEdit</span>();
</code></pre>
<p>è¿›å…¥ç¼–è¾‘æ¨¡å¼åï¼Œç”¨æˆ·å°±å¯ä»¥ï¼š</p>
<ul>
<li>æ‹–åŠ¨é¡¶ç‚¹æ”¹å˜å½¢çŠ¶</li>
<li>åœ¨è¾¹ä¸Šæ·»åŠ æ–°çš„é¡¶ç‚¹ï¼ˆå¦‚æœå¯ç”¨äº† <code>enableMidpointHandles</code>ï¼‰</li>
<li>æ•´ä½“ç§»åŠ¨å›¾å½¢</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/086b11329eb94cc49b490d047ca40054~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3OTUyMDgxNjExNzk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767322724&amp;x-signature=SnbvprK0vxKhWhzAfuv7KiNHltk%3D" alt="edit" loading="lazy"/></p>
<h3 data-id="heading-13">åˆ é™¤å›¾å½¢</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åˆ é™¤æŒ‡å®š ID çš„è¦ç´ </span>
<span class="hljs-keyword">const</span> deletedCount = editor.<span class="hljs-title function_">deleteById</span>(<span class="hljs-string">'feature-id-123'</span>);

<span class="hljs-keyword">if</span> (deletedCount &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åˆ é™¤æˆåŠŸï¼'</span>);
}

<span class="hljs-comment">// æ¸…ç©ºæ‰€æœ‰è¦ç´ </span>
editor.<span class="hljs-title function_">delete</span>();
</code></pre>
<p>ç®€å•æ¥è¯´å°±æ˜¯ï¼šæƒ³ç¼–è¾‘å°± <code>enableEdit()</code>ï¼Œæƒ³åˆ é™¤å°± <code>deleteById()</code>ï¼Œç”¨å¤§ç™½è¯è®²å°±æ˜¯ API è®¾è®¡å¾—å¾ˆç›´è§‚ï¼</p>
<h2 data-id="heading-14">ğŸ­ æ ·å¼è‡ªå®šä¹‰</h2>
<p>è®©å›¾å½¢å˜å¾—æ›´å¥½çœ‹ï¼Ÿå½“ç„¶å¯ä»¥ï¼</p>
<h3 data-id="heading-15">è®¾ç½®é»˜è®¤æ ·å¼</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è®¾ç½®ç»˜åˆ¶æ—¶çš„é»˜è®¤æ ·å¼</span>
editor.<span class="hljs-title function_">setStyle</span>({
    <span class="hljs-attr">fillColor</span>: <span class="hljs-string">'#ff0000'</span>,      <span class="hljs-comment">// å¡«å……è‰²</span>
    <span class="hljs-attr">fillOpacity</span>: <span class="hljs-number">0.5</span>,          <span class="hljs-comment">// å¡«å……é€æ˜åº¦</span>
    <span class="hljs-attr">strokeColor</span>: <span class="hljs-string">'#ffffff'</span>,    <span class="hljs-comment">// è¾¹æ¡†è‰²</span>
    <span class="hljs-attr">strokeWidth</span>: <span class="hljs-number">2</span>,            <span class="hljs-comment">// è¾¹æ¡†å®½åº¦</span>
});
</code></pre>
<h3 data-id="heading-16">ä¿®æ”¹å•ä¸ªè¦ç´ çš„æ ·å¼</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç»™ç‰¹å®šè¦ç´ æ¢ä¸ªé¢œè‰²</span>
editor.<span class="hljs-title function_">updateFeatureStyle</span>(<span class="hljs-string">'feature-id-123'</span>, {
    <span class="hljs-attr">fillColor</span>: <span class="hljs-string">'#00ff00'</span>,
    <span class="hljs-attr">fillOpacity</span>: <span class="hljs-number">0.8</span>,
    <span class="hljs-attr">strokeColor</span>: <span class="hljs-string">'#000000'</span>,
    <span class="hljs-attr">strokeWidth</span>: <span class="hljs-number">3</span>,
});
</code></pre>
<p>ä½ çœ‹ï¼Œæƒ³è®©å“ªä¸ªå›¾å½¢å˜æˆä»€ä¹ˆæ ·ï¼Œç›´æ¥æ”¹å°±è¡Œï¼Œå®æ—¶ç”Ÿæ•ˆï¼</p>
<h2 data-id="heading-17">ğŸ”„ è¿ç»­ç»˜åˆ¶æ¨¡å¼</h2>
<p>æœ‰æ—¶å€™éœ€è¦ä¸€æ¬¡æ€§ç”»å¥½å‡ ä¸ªå›¾å½¢ï¼Œä¸€ä¸ªä¸ªç‚¹æŒ‰é’®å¤ªéº»çƒ¦ï¼Ÿè¯•è¯•è¿ç»­ç»˜åˆ¶æ¨¡å¼ï¼</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¼€å¯è¿ç»­ç»˜åˆ¶</span>
editor.<span class="hljs-title function_">start</span>({
    <span class="hljs-attr">continuous</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// å…³é”®å‚æ•°</span>
});
</code></pre>
<p>å¼€å¯åï¼Œç”¨æˆ·ç”»å®Œä¸€ä¸ªå›¾å½¢ï¼Œä¼šè‡ªåŠ¨å¼€å§‹ä¸‹ä¸€ä¸ªï¼Œç›´åˆ°æ‰‹åŠ¨è°ƒç”¨ <code>editor.stop()</code> æ‰åœæ­¢ã€‚è¶…æ–¹ä¾¿æœ‰æ²¡æœ‰ï¼</p>
<h2 data-id="heading-18">ğŸ¯ å•è¦ç´ æ¨¡å¼</h2>
<p>æœ‰äº›åœºæ™¯ä¸‹ï¼ŒåŒä¸€æ—¶åˆ»åªéœ€è¦ä¸€ä¸ªè¦ç´ ï¼ˆæ¯”å¦‚é€‰æ‹©ä¸€ä¸ªåŒºåŸŸï¼‰ã€‚è¿™æ—¶å€™å¯ä»¥ç”¨å•è¦ç´ æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> editor = <span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">Editor</span>({
    <span class="hljs-attr">type</span>: mapvthree.<span class="hljs-property">Editor</span>.<span class="hljs-property">DrawerType</span>.<span class="hljs-property">POLYGON</span>,
    <span class="hljs-attr">singleMode</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// å¯ç”¨å•è¦ç´ æ¨¡å¼</span>
});
</code></pre>
<p>å¯ç”¨åï¼Œæ¯æ¬¡ç»˜åˆ¶æ–°å›¾å½¢æ—¶ï¼Œä¼šè‡ªåŠ¨æ¸…é™¤ä¹‹å‰çš„å›¾å½¢ã€‚ç®€å•ç²—æš´ï¼Œæ­£åˆé€‚æŸäº›åœºæ™¯ï¼</p>
<h2 data-id="heading-19">ğŸ“¦ æ•°æ®å¯¼å…¥å¯¼å‡º</h2>
<h3 data-id="heading-20">å¯¼å‡ºæ•°æ®</h3>
<p>æŠŠç”¨æˆ·ç”»çš„å†…å®¹å¯¼å‡ºä¸º GeoJSON æ ¼å¼ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¯¼å‡ºæ‰€æœ‰æ•°æ®</span>
<span class="hljs-keyword">const</span> allData = editor.<span class="hljs-title function_">exportData</span>();

<span class="hljs-comment">// åªå¯¼å‡ºå¤šè¾¹å½¢</span>
<span class="hljs-keyword">const</span> polygons = editor.<span class="hljs-title function_">exportData</span>(mapvthree.<span class="hljs-property">Editor</span>.<span class="hljs-property">DrawerType</span>.<span class="hljs-property">POLYGON</span>);

<span class="hljs-comment">// åªå¯¼å‡ºçº¿</span>
<span class="hljs-keyword">const</span> lines = editor.<span class="hljs-title function_">exportData</span>(mapvthree.<span class="hljs-property">Editor</span>.<span class="hljs-property">DrawerType</span>.<span class="hljs-property">LINE</span>);
</code></pre>
<p>æ•°æ®æ ¼å¼æ˜¯æ ‡å‡†çš„ GeoJSONï¼Œå¯ä»¥ç›´æ¥ä¿å­˜åˆ°æ•°æ®åº“æˆ–ä¼ ç»™åç«¯ï½</p>
<h3 data-id="heading-21">å¯¼å…¥æ•°æ®</h3>
<p>æœ‰ç°æˆçš„æ•°æ®ï¼Ÿç›´æ¥å¯¼å…¥å°±èƒ½æ˜¾ç¤ºå’Œç¼–è¾‘ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> geoJSONData = {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'FeatureCollection'</span>,
    <span class="hljs-attr">features</span>: [
        {
            <span class="hljs-attr">type</span>: <span class="hljs-string">'Feature'</span>,
            <span class="hljs-attr">id</span>: <span class="hljs-string">'polygon-1'</span>,
            <span class="hljs-attr">geometry</span>: {
                <span class="hljs-attr">type</span>: <span class="hljs-string">'Polygon'</span>,
                <span class="hljs-attr">coordinates</span>: [<span class="hljs-comment">/* åæ ‡æ•°ç»„ */</span>],
            },
            <span class="hljs-attr">properties</span>: {
                <span class="hljs-attr">name</span>: <span class="hljs-string">'æµ‹è¯•å¤šè¾¹å½¢'</span>,
                <span class="hljs-attr">color</span>: <span class="hljs-string">'#ff0000'</span>,
            },
        },
        <span class="hljs-comment">// æ›´å¤šè¦ç´ ...</span>
    ],
};

<span class="hljs-comment">// å¯¼å…¥æ•°æ®ï¼ˆä¼šæ¸…é™¤ç°æœ‰æ•°æ®ï¼‰</span>
editor.importData(geoJSONData, { <span class="hljs-attr">clear</span>: <span class="hljs-literal">true</span> });

<span class="hljs-comment">// è¿½åŠ æ•°æ®ï¼ˆä¸æ¸…é™¤ç°æœ‰æ•°æ®ï¼‰</span>
editor.importData(geoJSONData, { <span class="hljs-attr">clear</span>: <span class="hljs-literal">false</span> });
</code></pre>
<p>è¿™æ ·å°±èƒ½å¿«é€ŸåŠ è½½å†å²æ•°æ®ï¼Œè®©ç”¨æˆ·ç»§ç»­ç¼–è¾‘äº†ã€‚æ˜¯ä¸æ˜¯å¾ˆè´´å¿ƒï¼Ÿ</p>
<h2 data-id="heading-22">ğŸ§ å®Œæ•´çš„äº‹ä»¶ç³»ç»Ÿ</h2>
<p>Editor æä¾›äº†ä¸€å¥—å®Œæ•´çš„äº‹ä»¶ç›‘å¬æœºåˆ¶ï¼Œè®©ä½ èƒ½ç²¾ç¡®æŒæ§ç”¨æˆ·çš„æ¯ä¸ªæ“ä½œï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åˆ›å»ºè¦ç´ æ—¶è§¦å‘</span>
editor.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'created'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–°è¦ç´ åˆ›å»ºå®Œæˆ'</span>);
});

<span class="hljs-comment">// åˆ é™¤è¦ç´ æ—¶è§¦å‘</span>
editor.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'delete'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¦ç´ å·²åˆ é™¤'</span>);
});

<span class="hljs-comment">// ç¼–è¾‘è¦ç´ æ—¶è§¦å‘</span>
editor.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'update'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¦ç´ å·²æ›´æ–°'</span>);
});

<span class="hljs-comment">// ç‚¹å‡»è¦ç´ æ—¶è§¦å‘</span>
editor.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'featureClick'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç‚¹å‡»äº†è¦ç´ ï¼š'</span>, e.<span class="hljs-property">featureId</span>);
});
</code></pre>
<p>æœ‰äº†è¿™äº›äº‹ä»¶ï¼Œä½ å¯ä»¥åœ¨åˆé€‚çš„æ—¶æœºåšæ•°æ®ä¿å­˜ã€çŠ¶æ€åŒæ­¥ç­‰æ“ä½œã€‚</p>
<h2 data-id="heading-23">ğŸ æ ¸å¿ƒè¦ç‚¹</h2>
<p>è®©æˆ‘ç”¨æ€»ç»“ä¸€ä¸‹ï¼š</p>
<ol>
<li><strong>åˆå§‹åŒ–è¶…ç®€å•</strong>ï¼š<code>new Editor()</code> + <code>engine.add()</code> å°±æå®š</li>
<li><strong>æ”¯æŒ 5 ç§å›¾å½¢</strong>ï¼šå¤šè¾¹å½¢ã€çº¿ã€ç‚¹ã€åœ†ã€çŸ©å½¢ï¼Œå¤Ÿç”¨äº†</li>
<li><strong>ç»˜åˆ¶å°±ä¿©æ­¥</strong>ï¼šè®¾ç½® <code>type</code> + è°ƒç”¨ <code>start()</code></li>
<li><strong>ç¼–è¾‘å¾ˆç›´è§‚</strong>ï¼š<code>enableEdit()</code> å¼€å§‹ç¼–è¾‘ï¼Œ<code>disableEdit()</code> é€€å‡º</li>
<li><strong>æ ·å¼éšå¿ƒæ”¹</strong>ï¼š<code>setStyle()</code> å…¨å±€è®¾ç½®ï¼Œ<code>updateFeatureStyle()</code> å•ç‹¬è°ƒæ•´</li>
<li><strong>è¿ç»­ç»˜åˆ¶</strong>ï¼šåŠ ä¸ª <code>continuous: true</code> å‚æ•°ï¼Œç”»ä¸ªä¸åœ</li>
<li><strong>å•è¦ç´ æ¨¡å¼</strong>ï¼š<code>singleMode: true</code>ï¼Œç”»æ–°çš„è‡ªåŠ¨åˆ æ—§çš„</li>
<li><strong>æ•°æ®äº’é€š</strong>ï¼š<code>exportData()</code> å¯¼å‡ºï¼Œ<code>importData()</code> å¯¼å…¥ï¼Œæ ‡å‡† GeoJSON æ ¼å¼</li>
<li><strong>äº‹ä»¶ä¸°å¯Œ</strong>ï¼šcreatedã€deleteã€updateã€featureClickï¼Œæƒ³ç›‘å¬å•¥ç›‘å¬å•¥</li>
</ol>
<p>åŸºæœ¬ä¸Šå°±èƒ½åº”å¯¹å¤§éƒ¨åˆ†åœ°å›¾ç¼–è¾‘éœ€æ±‚äº†ï¼</p>
<p>æƒ³æƒ³çœ‹ï¼Œåœ¨ä½ çš„é¡¹ç›®ä¸­ï¼Œæœ‰å“ªäº›åœºæ™¯å¯ä»¥ç”¨ä¸Šè¿™ä¸ªç¼–è¾‘å™¨ï¼Ÿ</p>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œåˆ«å¿˜äº†ç‚¹ä¸ªèµå“¦ï¼æœ‰ä»€ä¹ˆé—®é¢˜ä¹Ÿå¯ä»¥éšæ—¶é—®æˆ‘ ğŸ’ª</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ‰Spring Boot 3 + å¤šæ•°æ®æº + Druidï¼šç›‘æ§é¡µé¢ + æ§åˆ¶å° SQL æ—¥å¿—ï¼Œç»ˆäºæå®šå•¦ï¼]]></title>    <link>https://juejin.cn/post/7587715742051500042</link>    <guid>https://juejin.cn/post/7587715742051500042</guid>    <pubDate>2025-12-26T04:55:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587715742051500042" data-draft-id="7587704265055109158" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ‰Spring Boot 3 + å¤šæ•°æ®æº + Druidï¼šç›‘æ§é¡µé¢ + æ§åˆ¶å° SQL æ—¥å¿—ï¼Œç»ˆäºæå®šå•¦ï¼"/> <meta itemprop="keywords" content="Spring Boot,å¾®æœåŠ¡,Java"/> <meta itemprop="datePublished" content="2025-12-26T04:55:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·352180245475"/> <meta itemprop="url" content="https://juejin.cn/user/156576846710315"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ‰Spring Boot 3 + å¤šæ•°æ®æº + Druidï¼šç›‘æ§é¡µé¢ + æ§åˆ¶å° SQL æ—¥å¿—ï¼Œç»ˆäºæå®šå•¦ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/156576846710315/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·352180245475
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T04:55:21.000Z" title="Fri Dec 26 2025 04:55:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç”¨ <strong>Spring Boot 3.x + dynamic-datasource + Druid</strong> çš„æ—¶å€™ï¼Œæœ€è®©äººæŠ“ç‹‚çš„å°±æ˜¯ï¼š</p>
<ul>
<li>ç›‘æ§é¡µé¢ä¸€è®¿é—®å°± â€œNo static resource druid.â€ ğŸ˜±</li>
<li>æ§åˆ¶å°æ­»æ´»ä¸æ‰“å° SQLï¼Œåªæœ‰å‡ºé”™æ‰å†’æ³¡ ğŸ¤¬</li>
<li>é…ç½®æ”¹äº†åŠå¤©ï¼Œè¿˜æ˜¯ä¸ç”Ÿæ•ˆ...</li>
</ul>
<p>ç»è¿‡æ— æ•°æ¬¡é‡å¯ã€ç¿»æºç ã€çœ‹ Issueï¼Œæˆ‘ç»ˆäºæ•´å‡ºä¸€å¥—<strong>è¶…çº§ç¨³å®š</strong>çš„æ–¹æ¡ˆï¼ç›‘æ§é¡µé¢ç¾ç¾å“’ï¼Œå¤šæ•°æ®æºåˆ‡æ¢é¡ºæ»‘ï¼Œæ§åˆ¶å° SQL æ—¥å¿—å¸¦å‚æ•°æ‰“å°ï¼ˆæ­£å¸¸+å‡ºé”™éƒ½è¡Œï¼‰ã€‚</p>
<p>æ¥æ¥æ¥ï¼Œç›´æ¥ä¸Šå¹²è´§ï½è½»æ¾å¤åˆ¶ç²˜è´´ï¼Œå°±èƒ½è·‘èµ·æ¥ï¼</p>
<h2 data-id="heading-0">å…ˆåŠ ä¾èµ–ï¼Œåˆ«å¤šåŠ ï¼</h2>
<p>XML</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å¤šæ•°æ®æºç¥å™¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
	    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>dynamic-datasource-spring-boot3-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span> <span class="hljs-comment">&lt;!-- å¤šæ•°æ®æº --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>  <span class="hljs-comment">&lt;!-- æœ€æ–°ç‰ˆæœ€é¦™ --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- Druid çš„ Spring Boot 3 ä¸“ç”¨ starter --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid-spring-boot-3-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.27<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å¼ºåˆ¶æ ¸å¿ƒ druid ä¸º 1.2.27 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.27<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<p>ä¸€èˆ¬åªåŠ è¿™ä¸€ä¸ª Druid starter å°±å¤Ÿå•¦ï¼ä½†æ˜¯ä½¿ç”¨çš„æ˜¯æœ€æ–°çš„1.2.27çš„åŒ…ï¼Œ<code>druid-spring-boot-3-starter</code>ä¾èµ–çš„æ˜¯<code>1.2.9</code>ï¼Œæ‰€ä»¥éœ€è¦å¼ºåˆ¶æ·»åŠ æ ¸å¿ƒï¼Œæ˜¯å¦ä¾èµ–æ­£ç¡®çš„åŒ…ï¼Œå¯ä»¥é€šè¿‡<code>maven help</code>æ¥æ’æŸ¥å†²çªï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d6c07eea4254d53bc281bfad6601e4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3MzUyMTgwMjQ1NDc1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767329785&amp;x-signature=h97XCbP%2BFHdUosIxBJiz4YI6pec%3D" alt="image-20251226105139566" loading="lazy"/></p>
<h2 data-id="heading-1">æ’é™¤åŸç”Ÿè‡ªåŠ¨é…ç½®ï¼ˆè¶…çº§é‡è¦ï¼ä¸ç„¶å„ç§å†²çªï¼‰</h2>
<p>åœ¨ application.yml é‡ŒåŠ ï¼š</p>
<p>YAML</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">autoconfigure:</span>
    <span class="hljs-attr">exclude:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">com.alibaba.druid.spring.boot.autoconfigure.DruidDataSourceAutoConfigure</span>
</code></pre>
<p>æˆ–è€…ç›´æ¥åœ¨å¯åŠ¨ç±»ä¸Šæ€¼æ³¨è§£ï¼š</p>
<p>Java</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@SpringBootApplication(<span class="hljs-params">exclude = com.alibaba.druid.spring.boot.autoconfigure.DruidDataSourceAutoConfigure.<span class="hljs-keyword">class</span></span>)</span>
</code></pre>
<h2 data-id="heading-2">yml é…ç½®ï¼ˆè¿æ¥æ±  + Filterï¼‰</h2>
<p>YAML</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">dynamic:</span>
      <span class="hljs-attr">primary:</span> <span class="hljs-string">master</span>
      <span class="hljs-attr">druid:</span>
        <span class="hljs-attr">initial-size:</span> <span class="hljs-number">5</span>
        <span class="hljs-attr">min-idle:</span> <span class="hljs-number">10</span>
        <span class="hljs-attr">max-active:</span> <span class="hljs-number">20</span>
        <span class="hljs-attr">max-wait:</span> <span class="hljs-number">60000</span>
        <span class="hljs-comment"># å…¶ä»–è¿æ¥æ± å‚æ•°éšä¾¿è°ƒï½</span>

        <span class="hljs-attr">filters:</span> <span class="hljs-string">stat,wall,slf4j</span>  <span class="hljs-comment"># stat ç›‘æ§ï¼Œwall é˜²æ³¨å…¥ï¼Œslf4j æ‰“å°æ—¥å¿—</span>

        <span class="hljs-attr">filter:</span>
          <span class="hljs-attr">slf4j:</span>
            <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
            <span class="hljs-attr">statement-executable-sql-log-enable:</span> <span class="hljs-literal">true</span>   <span class="hljs-comment"># å¸¦å‚æ•°ç¾åŒ– SQL</span>
            <span class="hljs-attr">statement-log-enabled:</span> <span class="hljs-literal">false</span>                <span class="hljs-comment"># å…³æ‰åŸå§‹ ? æ—¥å¿—ï¼Œåˆ«é‡å¤</span>
            <span class="hljs-attr">result-set-log-enabled:</span> <span class="hljs-literal">false</span>

      <span class="hljs-attr">datasource:</span>
        <span class="hljs-attr">master:</span>
          <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/db1?xxx</span>
          <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
          <span class="hljs-attr">password:</span> <span class="hljs-string">root</span>
          <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
        <span class="hljs-attr">slave:</span>
          <span class="hljs-comment"># åŒä¸Š...</span>
</code></pre>
<h2 data-id="heading-3">æ‰‹åŠ¨æ³¨å†Œç›‘æ§é¡µé¢ï¼ˆæœ€ç¨³ï¼è‡ªåŠ¨é…ç½®å®¹æ˜“ç¿»è½¦ï¼‰</h2>
<p><code>1.2.27</code>å¹¶æ²¡æœ‰é»˜è®¤å¼€å§‹ç›‘æ§é¡µé¢ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±é…ç½®ï¼Œæ–°å»ºä¸€ä¸ªé…ç½®ç±» DruidMonitorConfig.javaï¼š</p>
<p>Java</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.alibaba.druid.support.jakarta.StatViewServlet;
<span class="hljs-keyword">import</span> com.alibaba.druid.support.jakarta.WebStatFilter;
<span class="hljs-keyword">import</span> org.springframework.boot.web.servlet.FilterRegistrationBean;
<span class="hljs-keyword">import</span> org.springframework.boot.web.servlet.ServletRegistrationBean;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;
<span class="hljs-keyword">import</span> org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;
<span class="hljs-keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

<span class="hljs-keyword">import</span> java.util.HashMap;

<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DruidMonitorConfig</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> ServletRegistrationBean&lt;StatViewServlet&gt; <span class="hljs-title function_">statViewServlet</span><span class="hljs-params">()</span> {
        ServletRegistrationBean&lt;StatViewServlet&gt; bean = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletRegistrationBean</span>&lt;&gt;();
        bean.setServlet(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StatViewServlet</span>());
        bean.addUrlMappings(<span class="hljs-string">"/druid/*"</span>);

        <span class="hljs-type">var</span> <span class="hljs-variable">params</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, String&gt;();
        params.put(<span class="hljs-string">"loginUsername"</span>, <span class="hljs-string">"admin"</span>);
        params.put(<span class="hljs-string">"loginPassword"</span>, <span class="hljs-string">"123456"</span>);
        params.put(<span class="hljs-string">"allow"</span>, <span class="hljs-string">""</span>);
        params.put(<span class="hljs-string">"resetEnable"</span>, <span class="hljs-string">"false"</span>);
        bean.setInitParameters(params);
        <span class="hljs-keyword">return</span> bean;
    }

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> FilterRegistrationBean&lt;WebStatFilter&gt; <span class="hljs-title function_">webStatFilter</span><span class="hljs-params">()</span> {
        FilterRegistrationBean&lt;WebStatFilter&gt; bean = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FilterRegistrationBean</span>&lt;&gt;();
        bean.setFilter(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WebStatFilter</span>());
        bean.addUrlPatterns(<span class="hljs-string">"/*"</span>);

        <span class="hljs-type">var</span> <span class="hljs-variable">params</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, String&gt;();
        params.put(<span class="hljs-string">"exclusions"</span>, <span class="hljs-string">"*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*"</span>);
        bean.setInitParameters(params);
        <span class="hljs-keyword">return</span> bean;
    }

    <span class="hljs-comment">// é™æ€èµ„æºï¼Œåˆ«å¿˜äº†ï¼</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> WebMvcConfigurer <span class="hljs-title function_">druidResources</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebMvcConfigurer</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addResourceHandlers</span><span class="hljs-params">(ResourceHandlerRegistry registry)</span> {
                registry.addResourceHandler(<span class="hljs-string">"/druid/**"</span>)
                        .addResourceLocations(<span class="hljs-string">"classpath:/support/http/resources/"</span>);
            }
        };
    }
}
</code></pre>
<p>å…¶ä¸­èµ„æºçš„è·¯å¾„è·Ÿå¾ˆå¤šç½‘ç«™ä¸aiè¯´çš„éƒ½ä¸ä¸€æ ·ï¼Œæ­£ç¡®çš„æ˜¯ï¼š<code>/support/http/resources/</code></p>
<h2 data-id="heading-4">logback è®©æ—¥å¿—è¹¦å‡ºæ¥</h2>
<p>XMLï¼Œé‡è¦ä¹Ÿç®€å•ï¼Œç½‘ä¸Šå¾ˆå¤šé…ç½®éƒ½å‡ºé”™ï¼Œè¿™æ˜¯é€šè¿‡è°ƒè¯•æºç æ‰¾åˆ°çš„é…ç½®ã€‚ç”šè‡³å¾ˆå¤šaiä¹Ÿéƒ½ç»™å‡ºé”™è¯¯çš„é…ç½®ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f8970d8925d46baa5c8999a55a8aac6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3MzUyMTgwMjQ1NDc1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767329785&amp;x-signature=2clZ3vYUZ227mdjaN2kCF%2FFvugo%3D" alt="image-20251226104517723" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32a14cc0d9064df2b0645439c650160a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3MzUyMTgwMjQ1NDc1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767329785&amp;x-signature=jEP3wMi3TFy0XfLDCuNuNMXbUwk%3D" alt="image-20251226104538690" loading="lazy"/></p>
<p>æ­£ç¡®çš„æ‰“å¼€æ–¹å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;logger <span class="hljs-attr">name</span>=<span class="hljs-string">"druid.sql.Statement"</span> level=<span class="hljs-string">"DEBUG"</span>/&gt;
</code></pre>
<h2 data-id="heading-5">æ•ˆæœå›¾ï¼ˆæ–‡å­—ç‰ˆå“ˆå“ˆï¼‰</h2>
<p>æ§åˆ¶å°æ­£å¸¸ SQLï¼š</p>
<p>text</p>
<pre><code class="hljs language-sql" lang="sql">DEBUG com.alibaba.druid.filter.logging.Slf4jLogFilter <span class="hljs-operator">-</span> executable <span class="hljs-keyword">sql</span>: 
<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">where</span> id <span class="hljs-operator">=</span> ? <span class="hljs-keyword">and</span> age <span class="hljs-operator">&gt;</span> ?
<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">&gt;</span> Parameters: <span class="hljs-number">1</span>(Long), <span class="hljs-number">18</span>(<span class="hljs-type">Integer</span>)
<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">&gt;</span> Total: <span class="hljs-number">3</span>
</code></pre>
<p>å‡ºé”™ SQL ä¹Ÿä¼šå¼ºåˆ¶æ‰“å°ï½</p>
<p>ç›‘æ§é¡µé¢ï¼šè®¿é—® /druid/ï¼Œadmin/123456 ç™»å½•ï¼Œå°±èƒ½çœ‹åˆ° master/slave åˆ‡æ¢ã€SQL ç»Ÿè®¡ã€æ…¢æŸ¥è¯¢ï¼Œçˆ½ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5d9b8558b8b44249aed70cb89c7a7a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3MzUyMTgwMjQ1NDc1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767329785&amp;x-signature=2XN9JnK2qRq0kIAAAAWn9rYdUww%3D" alt="image-20251226114419745" loading="lazy"/></p>
<p><strong>SQLç»Ÿè®¡</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6689f0c8d1d4174bfa2e5dfd4323b42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3MzUyMTgwMjQ1NDc1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767329785&amp;x-signature=i6p%2FM%2BIRwKtILFjOYCZB%2F39h3Dg%3D" alt="image-20251226114853742" loading="lazy"/></p>
<p><strong>æ³¨æ„ï¼šè¿™ä¸ªç‰ˆæœ¬çš„é‡ç½®åŠŸèƒ½å¤±æ•ˆï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[iframe å¯¼è‡´ Vue Router go(-1) æ— æ³•æ­£å¸¸è¿”å›é—®é¢˜è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7587713001715040310</link>    <guid>https://juejin.cn/post/7587713001715040310</guid>    <pubDate>2025-12-26T03:34:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587713001715040310" data-draft-id="7587630831465496618" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="iframe å¯¼è‡´ Vue Router go(-1) æ— æ³•æ­£å¸¸è¿”å›é—®é¢˜è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-26T03:34:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Mr_fang71940"/> <meta itemprop="url" content="https://juejin.cn/user/360295545716958"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            iframe å¯¼è‡´ Vue Router go(-1) æ— æ³•æ­£å¸¸è¿”å›é—®é¢˜è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/360295545716958/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Mr_fang71940
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T03:34:26.000Z" title="Fri Dec 26 2025 03:34:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ“‹ ç›®å½•</h2>
<ol>
<li><a href="#%E9%97%AE%E9%A2%98%E8%83%8C%E6%99%AF" title="#%E9%97%AE%E9%A2%98%E8%83%8C%E6%99%AF">é—®é¢˜èƒŒæ™¯</a></li>
<li><a href="#%E9%97%AE%E9%A2%98%E5%8E%9F%E5%9B%A0%E5%88%86%E6%9E%90" title="#%E9%97%AE%E9%A2%98%E5%8E%9F%E5%9B%A0%E5%88%86%E6%9E%90">é—®é¢˜åŸå› åˆ†æ</a></li>
<li><a href="#%E9%97%AE%E9%A2%98%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B" title="#%E9%97%AE%E9%A2%98%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B">é—®é¢˜ä»£ç ç¤ºä¾‹</a></li>
<li><a href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88" title="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">è§£å†³æ–¹æ¡ˆ</a></li>
<li><a href="#%E6%96%B9%E6%A1%88%E5%AF%B9%E6%AF%94" title="#%E6%96%B9%E6%A1%88%E5%AF%B9%E6%AF%94">æ–¹æ¡ˆå¯¹æ¯”</a></li>
<li><a href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5" title="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">æœ€ä½³å®è·µ</a></li>
<li><a href="#%E7%9B%B8%E5%85%B3%E8%B5%84%E6%BA%90" title="#%E7%9B%B8%E5%85%B3%E8%B5%84%E6%BA%90">ç›¸å…³èµ„æº</a></li>
</ol>
<hr/>
<h2 data-id="heading-1">é—®é¢˜èƒŒæ™¯</h2>
<p>åœ¨ Vue.js åº”ç”¨ä¸­ä½¿ç”¨ <code>this.$router.go(-1)</code> è¿›è¡Œé¡µé¢è¿”å›æ—¶ï¼Œå¦‚æœé¡µé¢å†…éƒ¨åŒ…å« iframeï¼Œä¼šå¯¼è‡´è¿”å›åŠŸèƒ½å¼‚å¸¸ã€‚ç”¨æˆ·ç‚¹å‡»è¿”å›æŒ‰é’®åï¼Œå¯èƒ½æ— æ³•è¿”å›åˆ°é¢„æœŸçš„ä¸Šä¸€é¡µï¼Œè€Œæ˜¯åœç•™åœ¨å½“å‰é¡µé¢æˆ–è¿”å›åˆ° iframe å†…éƒ¨çš„æŸä¸ªçŠ¶æ€ã€‚</p>
<h3 data-id="heading-2">é—®é¢˜åœºæ™¯</h3>
<ul>
<li><strong>å…¸å‹åœºæ™¯</strong>: é¡µé¢ä¸­åŒ…å« iframe ç»„ä»¶ï¼ˆå¦‚ç¬¬ä¸‰æ–¹æœåŠ¡åµŒå…¥ã€æ–‡ä»¶é¢„è§ˆã€æ•°æ®é€‰æ‹©å™¨ç­‰ï¼‰</li>
<li><strong>é—®é¢˜è¡¨ç°</strong>: ç‚¹å‡»è¿”å›æŒ‰é’®æˆ–æ“ä½œæˆåŠŸåè‡ªåŠ¨è¿”å›æ—¶ï¼Œæ— æ³•æ­£å¸¸è¿”å›åˆ°ä¸Šä¸€é¡µ</li>
<li><strong>å½±å“èŒƒå›´</strong>: æ‰€æœ‰åŒ…å« iframe ä¸”ä½¿ç”¨ <code>go(-1)</code> è¿›è¡Œè¿”å›çš„é¡µé¢</li>
</ul>
<hr/>
<h2 data-id="heading-3">å¿«é€Ÿå¼€å§‹</h2>
<h3 data-id="heading-4">å¿«é€Ÿå¤ç°é—®é¢˜</h3>
<ol>
<li><strong>å¤åˆ¶ä»£ç </strong>ï¼šå°†ä¸‹é¢çš„å®Œæ•´ä»£ç ç¤ºä¾‹å¤åˆ¶åˆ°ä½ çš„ Vue é¡¹ç›®ä¸­</li>
<li><strong>åˆ›å»ºæ–‡ä»¶</strong>ï¼ˆæ ¹æ®é¡¹ç›®ç»“æ„è°ƒæ•´è·¯å¾„ï¼‰ï¼š
<ul>
<li><code>src/views/List.vue</code> - åˆ—è¡¨é¡µ</li>
<li><code>src/views/Detail.vue</code> - è¯¦æƒ…é¡µï¼ˆé—®é¢˜ç‰ˆæœ¬ï¼‰</li>
<li><code>src/views/DetailFixed.vue</code> - è¯¦æƒ…é¡µï¼ˆè§£å†³æ–¹æ¡ˆç‰ˆæœ¬ï¼‰</li>
<li><code>public/iframe-test.html</code> - iframe æµ‹è¯•é¡µé¢ï¼ˆå¯é€‰ï¼Œç”¨äºæµ‹è¯•ï¼‰</li>
</ul>
</li>
<li><strong>é…ç½®è·¯ç”±</strong>ï¼šåœ¨ <code>router/index.js</code> ä¸­æ·»åŠ è·¯ç”±é…ç½®ï¼ˆè·¯å¾„å¯æ ¹æ®é¡¹ç›®è°ƒæ•´ï¼‰</li>
<li><strong>è¿è¡Œé¡¹ç›®</strong>ï¼šå¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œè®¿é—®é…ç½®çš„åˆ—è¡¨é¡µè·¯å¾„ï¼ˆå¦‚ <code>/list</code>ï¼‰</li>
<li><strong>æµ‹è¯•å¯¹æ¯”</strong>ï¼š
<ul>
<li>é€‰æ‹©"é—®é¢˜ç‰ˆæœ¬"ï¼Œç‚¹å‡»é¡¹ç›®è¿›å…¥è¯¦æƒ…é¡µï¼Œæ‰“å¼€ iframe å¹¶å¯¼èˆªï¼Œç„¶åç‚¹å‡»è¿”å›</li>
<li>é€‰æ‹©"è§£å†³æ–¹æ¡ˆç‰ˆæœ¬"ï¼Œé‡å¤ç›¸åŒæ“ä½œï¼Œè§‚å¯Ÿå·®å¼‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-5">æ–‡ä»¶ç»“æ„</h3>
<pre><code class="hljs language-csharp" lang="csharp">project/
â”œâ”€â”€ router/
â”‚   â””â”€â”€ index.js          <span class="hljs-meta"># è·¯ç”±é…ç½®</span>
â”œâ”€â”€ src/
â”‚   â””â”€â”€ views/
â”‚       â”œâ”€â”€ List.vue          <span class="hljs-meta"># åˆ—è¡¨é¡µï¼ˆåŒ…å«ç‰ˆæœ¬é€‰æ‹©ï¼‰</span>
â”‚       â”œâ”€â”€ Detail.vue        <span class="hljs-meta"># è¯¦æƒ…é¡µï¼ˆé—®é¢˜ç‰ˆæœ¬ï¼‰</span>
â”‚       â””â”€â”€ DetailFixed.vue   <span class="hljs-meta"># è¯¦æƒ…é¡µï¼ˆè§£å†³æ–¹æ¡ˆç‰ˆæœ¬ï¼‰</span>
â””â”€â”€ <span class="hljs-keyword">public</span>/
    â””â”€â”€ iframe-test.html  <span class="hljs-meta"># iframe æµ‹è¯•é¡µé¢ï¼ˆå¯é€‰ï¼‰</span>
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šä»¥ä¸Šè·¯å¾„ä¸ºç¤ºä¾‹è·¯å¾„ï¼Œå®é™…ä½¿ç”¨æ—¶è¯·æ ¹æ®é¡¹ç›®ç»“æ„è°ƒæ•´è·¯ç”±è·¯å¾„å’Œç»„ä»¶è·¯å¾„ã€‚</p>
<hr/>
<h2 data-id="heading-6">é—®é¢˜åŸå› åˆ†æ</h2>
<h3 data-id="heading-7">1. æµè§ˆå™¨å†å²è®°å½•æœºåˆ¶</h3>
<p>æµè§ˆå™¨ç»´æŠ¤ä¸€ä¸ªå†å²è®°å½•æ ˆï¼ˆHistory Stackï¼‰ï¼Œæ¯æ¬¡é¡µé¢å¯¼èˆªéƒ½ä¼šåœ¨æ ˆä¸­æ·»åŠ ä¸€æ¡è®°å½•ï¼š</p>
<pre><code class="hljs language-css" lang="css">å†å²è®°å½•æ ˆç¤ºä¾‹ï¼š
<span class="hljs-selector-attr">[é¡µé¢A]</span> -&gt; <span class="hljs-selector-attr">[é¡µé¢B]</span> -&gt; <span class="hljs-selector-attr">[é¡µé¢Cï¼ˆåŒ…å«iframeï¼‰]</span> -&gt; <span class="hljs-selector-attr">[iframeå†…éƒ¨å¯¼èˆª1]</span> -&gt; <span class="hljs-selector-attr">[iframeå†…éƒ¨å¯¼èˆª2]</span>
</code></pre>
<h3 data-id="heading-8">2. iframe å¯¹å†å²è®°å½•çš„å½±å“</h3>
<p>å½“é¡µé¢ä¸­åŒ…å« iframe æ—¶ï¼Œiframe å†…éƒ¨çš„å¯¼èˆªæ“ä½œä¼š<strong>å½±å“çˆ¶é¡µé¢çš„æµè§ˆå™¨å†å²è®°å½•</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ­£å¸¸æƒ…å†µä¸‹çš„å†å²è®°å½•</span>
[åˆ—è¡¨é¡µ] -&gt; [è¯¦æƒ…é¡µ]

<span class="hljs-comment">// åŒ…å« iframe åçš„å†å²è®°å½•</span>
[åˆ—è¡¨é¡µ] -&gt; [è¯¦æƒ…é¡µ] -&gt; [iframeå†…éƒ¨é¡µé¢<span class="hljs-number">1</span>] -&gt; [iframeå†…éƒ¨é¡µé¢<span class="hljs-number">2</span>] -&gt; ...
</code></pre>
<h3 data-id="heading-9">3. router.go(-1) çš„å·¥ä½œåŸç†</h3>
<p><code>this.$router.go(-1)</code> æ˜¯åŸºäºæµè§ˆå™¨å†å²è®°å½•æ ˆè¿›è¡Œå›é€€çš„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å½“è°ƒç”¨ go(-1) æ—¶</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">go</span>(-<span class="hljs-number">1</span>);  <span class="hljs-comment">// å›é€€åˆ°å†å²è®°å½•æ ˆä¸­çš„ä¸Šä¸€ä¸ªæ¡ç›®</span>

<span class="hljs-comment">// å¦‚æœå†å²è®°å½•æ ˆæ˜¯ï¼š</span>
<span class="hljs-comment">// [åˆ—è¡¨é¡µ] -&gt; [è¯¦æƒ…é¡µ] -&gt; [iframeé¡µ1] -&gt; [iframeé¡µ2]</span>
<span class="hljs-comment">// é‚£ä¹ˆ go(-1) ä¼šè¿”å›åˆ° [iframeé¡µ2]ï¼Œè€Œä¸æ˜¯ [åˆ—è¡¨é¡µ]</span>
</code></pre>
<h3 data-id="heading-10">4. é—®é¢˜æ ¹æºæ€»ç»“</h3>





















<table><thead><tr><th>åŸå› </th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>iframe å¯¼èˆªæ±¡æŸ“å†å²è®°å½•</strong></td><td>iframe å†…éƒ¨çš„æ¯æ¬¡å¯¼èˆªéƒ½ä¼šåœ¨çˆ¶é¡µé¢å†å²è®°å½•ä¸­æ·»åŠ æ¡ç›®</td></tr><tr><td><strong>go(-1) ä¾èµ–å†å²è®°å½•æ ˆ</strong></td><td>æ— æ³•åŒºåˆ†å“ªäº›æ˜¯ iframe äº§ç”Ÿçš„å†å²è®°å½•</td></tr><tr><td><strong>æ— æ³•ç²¾ç¡®æ§åˆ¶è¿”å›ç›®æ ‡</strong></td><td>ä¸çŸ¥é“éœ€è¦å›é€€å¤šå°‘æ­¥æ‰èƒ½åˆ°è¾¾çœŸæ­£çš„ä¸Šä¸€é¡µ</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-11">é—®é¢˜ä»£ç ç¤ºä¾‹</h2>
<h3 data-id="heading-12">å®Œæ•´å¯è¿è¡Œç¤ºä¾‹</h3>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¯è¿è¡Œç¤ºä¾‹ï¼Œå¯ä»¥ç›´æ¥å¤åˆ¶åˆ°é¡¹ç›®ä¸­æµ‹è¯•é—®é¢˜ã€‚</p>
<h4 data-id="heading-13">1. è·¯ç”±é…ç½® (router/index.js)</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">VueRouter</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">VueRouter</span>)

<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>,
    <span class="hljs-attr">redirect</span>: <span class="hljs-string">'/list'</span>
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/list'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'List'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/List.vue'</span>),
    <span class="hljs-attr">meta</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—è¡¨é¡µ'</span> }
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/detail'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'Detail'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/Detail.vue'</span>),
    <span class="hljs-attr">meta</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">'è¯¦æƒ…é¡µï¼ˆé—®é¢˜ç‰ˆæœ¬ï¼‰'</span> }
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/detail-fixed'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'DetailFixed'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/DetailFixed.vue'</span>),
    <span class="hljs-attr">meta</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">'è¯¦æƒ…é¡µï¼ˆè§£å†³æ–¹æ¡ˆç‰ˆæœ¬ï¼‰'</span> }
  }
]

<span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VueRouter</span>({
  <span class="hljs-attr">mode</span>: <span class="hljs-string">'history'</span>,
  routes
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router
</code></pre>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>/list</code> - åˆ—è¡¨é¡µï¼Œå¯ä»¥é€‰æ‹©æµ‹è¯•ç‰ˆæœ¬</li>
<li><code>/detail</code> - é—®é¢˜ç‰ˆæœ¬ï¼Œä½¿ç”¨ <code>go(-1)</code> è¿”å›</li>
<li><code>/detail-fixed</code> - è§£å†³æ–¹æ¡ˆç‰ˆæœ¬ï¼Œä½¿ç”¨æ˜ç¡®çš„è·¯ç”±è·¯å¾„è¿”å›</li>
</ul>
<h4 data-id="heading-14">2. åˆ—è¡¨é¡µç»„ä»¶ (views/List.vue) - å®Œæ•´ç‰ˆæœ¬</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="list-page"&gt;
    &lt;h1&gt;åˆ—è¡¨é¡µ&lt;/h1&gt;
    
    &lt;div class="version-selector"&gt;
      &lt;h3&gt;é€‰æ‹©æµ‹è¯•ç‰ˆæœ¬ï¼š&lt;/h3&gt;
      &lt;div class="version-buttons"&gt;
        &lt;button 
          @click="testVersion = 'problem'" 
          :class="{ active: testVersion === 'problem' }"
          class="version-btn problem"
        &gt;
          âŒ é—®é¢˜ç‰ˆæœ¬
        &lt;/button&gt;
        &lt;button 
          @click="testVersion = 'fixed'" 
          :class="{ active: testVersion === 'fixed' }"
          class="version-btn fixed"
        &gt;
          âœ… è§£å†³æ–¹æ¡ˆç‰ˆæœ¬
        &lt;/button&gt;
      &lt;/div&gt;
      &lt;p class="version-hint"&gt;
        &lt;span v-if="testVersion === 'problem'"&gt;
          å½“å‰é€‰æ‹©ï¼šé—®é¢˜ç‰ˆæœ¬ - ä½¿ç”¨ go(-1) è¿”å›ï¼Œä¼šå— iframe å½±å“
        &lt;/span&gt;
        &lt;span v-else&gt;
          å½“å‰é€‰æ‹©ï¼šè§£å†³æ–¹æ¡ˆç‰ˆæœ¬ - ä½¿ç”¨æ˜ç¡®è·¯ç”±è·¯å¾„è¿”å›ï¼Œä¸å— iframe å½±å“
        &lt;/span&gt;
      &lt;/p&gt;
    &lt;/div&gt;
    
    &lt;div class="item-list"&gt;
      &lt;h3&gt;é¡¹ç›®åˆ—è¡¨ï¼š&lt;/h3&gt;
      &lt;div 
        v-for="item in items" 
        :key="item.id" 
        class="item"
        @click="goToDetail(item.id)"
      &gt;
        &lt;span&gt;é¡¹ç›® {{ item.id }}: {{ item.name }}&lt;/span&gt;
        &lt;span class="item-hint"&gt;ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ&lt;/span&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    
    &lt;div class="info" :class="testVersion"&gt;
      &lt;h3&gt;æµ‹è¯•è¯´æ˜ï¼š&lt;/h3&gt;
      &lt;p&gt;&lt;strong&gt;å½“å‰å†å²è®°å½•é•¿åº¦:&lt;/strong&gt; {{ historyLength }}&lt;/p&gt;
      &lt;p&gt;&lt;strong&gt;æ“ä½œæ­¥éª¤ï¼š&lt;/strong&gt;&lt;/p&gt;
      &lt;ol&gt;
        &lt;li&gt;é€‰æ‹©ä¸Šæ–¹æµ‹è¯•ç‰ˆæœ¬ï¼ˆé—®é¢˜ç‰ˆæœ¬ / è§£å†³æ–¹æ¡ˆç‰ˆæœ¬ï¼‰&lt;/li&gt;
        &lt;li&gt;ç‚¹å‡»é¡¹ç›®è¿›å…¥å¯¹åº”çš„è¯¦æƒ…é¡µ&lt;/li&gt;
        &lt;li&gt;åœ¨è¯¦æƒ…é¡µæ‰“å¼€ iframe å¼¹çª—&lt;/li&gt;
        &lt;li&gt;åœ¨ iframe å†…å¤šæ¬¡ç‚¹å‡»é“¾æ¥å¯¼èˆªï¼ˆè§‚å¯Ÿå†å²è®°å½•å˜åŒ–ï¼‰&lt;/li&gt;
        &lt;li&gt;ç‚¹å‡»è¿”å›æŒ‰é’®ï¼Œè§‚å¯Ÿæ˜¯å¦èƒ½æ­£å¸¸è¿”å›&lt;/li&gt;
      &lt;/ol&gt;
      &lt;div v-if="testVersion === 'problem'" class="warning"&gt;
        &lt;strong&gt;âš ï¸ é—®é¢˜ç‰ˆæœ¬ï¼š&lt;/strong&gt;åœ¨ iframe å†…å¯¼èˆªåï¼Œè¿”å›æŒ‰é’®å¯èƒ½æ— æ³•æ­£å¸¸è¿”å›åˆ°åˆ—è¡¨é¡µ
      &lt;/div&gt;
      &lt;div v-else class="success"&gt;
        &lt;strong&gt;âœ… è§£å†³æ–¹æ¡ˆç‰ˆæœ¬ï¼š&lt;/strong&gt;æ— è®º iframe å†…å¦‚ä½•å¯¼èˆªï¼Œè¿”å›æŒ‰é’®éƒ½èƒ½æ­£å¸¸è¿”å›åˆ°åˆ—è¡¨é¡µ
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  name: 'List',
  data() {
    return {
      items: [
        { id: 1, name: 'æµ‹è¯•é¡¹ç›®1' },
        { id: 2, name: 'æµ‹è¯•é¡¹ç›®2' },
        { id: 3, name: 'æµ‹è¯•é¡¹ç›®3' }
      ],
      historyLength: 0,
      testVersion: 'problem'  // 'problem' æˆ– 'fixed'
    }
  },
  mounted() {
    console.log('List mounted')
    this.updateHistoryLength()
    // ç›‘å¬å†å²è®°å½•å˜åŒ–
    window.addEventListener('popstate', this.updateHistoryLength)
    // å®šæœŸæ›´æ–°å†å²è®°å½•é•¿åº¦æ˜¾ç¤ºï¼ˆå› ä¸º iframe å¯¼èˆªä¸ä¼šè§¦å‘ popstateï¼‰
    this.historyInterval = setInterval(() =&gt; {
      this.updateHistoryLength()
    }, 500)
  },
  beforeDestroy() {
    window.removeEventListener('popstate', this.updateHistoryLength)
    if (this.historyInterval) {
      clearInterval(this.historyInterval)
    }
  },
  methods: {
    goToDetail(id) {
      if (this.testVersion === 'problem') {
        // âŒ é—®é¢˜ç‰ˆæœ¬ï¼šä¸ä¼ é€’æ¥æºä¿¡æ¯
        this.$router.push({
          path: '/detail',
          query: { id }
        })
      } else {
        // âœ… è§£å†³æ–¹æ¡ˆç‰ˆæœ¬ï¼šä¼ é€’æ¥æºä¿¡æ¯
        this.$router.push({
          path: '/detail-fixed',
          query: {
            from: this.$route.fullPath,
            id: id
          }
        })
      }
    },
    updateHistoryLength() {
      const newLength = window.history.length
      if (newLength !== this.historyLength) {
        console.log('List - å†å²è®°å½•é•¿åº¦å˜åŒ–:', this.historyLength, '-&gt;', newLength)
      }
      this.historyLength = newLength
    }
  }
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-15">3. è¯¦æƒ…é¡µç»„ä»¶ (views/Detail.vue) - é—®é¢˜ç‰ˆæœ¬</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="detail-page"&gt;
    &lt;div class="header"&gt;
      &lt;button @click="handleGoBack" class="back-btn"&gt;â† è¿”å›&lt;/button&gt;
      &lt;h1&gt;è¯¦æƒ…é¡µ - é¡¹ç›® {{ $route.query.id }}&lt;/h1&gt;
    &lt;/div&gt;
    &lt;div class="content"&gt;
      &lt;p&gt;è¿™æ˜¯è¯¦æƒ…é¡µå†…å®¹&lt;/p&gt;
      &lt;div class="iframe-section"&gt;
        &lt;button @click="openIframeDialog" class="open-btn"&gt;
          æ‰“å¼€ iframe é€‰æ‹©å™¨
        &lt;/button&gt;
        &lt;div v-if="dialogVisible" class="dialog-overlay" @click="closeDialog"&gt;
          &lt;div class="dialog-content" @click.stop&gt;
            &lt;div class="dialog-header"&gt;
              &lt;h3&gt;iframe é€‰æ‹©å™¨&lt;/h3&gt;
              &lt;button @click="closeDialog" class="close-btn"&gt;Ã—&lt;/button&gt;
            &lt;/div&gt;
            &lt;div class="dialog-body"&gt;
              &lt;iframe
                :src="iframeUrl"
                @load="onIframeLoad"
                ref="iframeRef"
                class="iframe"
              &gt;&lt;/iframe&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="info-panel"&gt;
        &lt;h3&gt;è°ƒè¯•ä¿¡æ¯&lt;/h3&gt;
        &lt;p&gt;å½“å‰å†å²è®°å½•é•¿åº¦: {{ historyLength }}&lt;/p&gt;
        &lt;p&gt;åˆå§‹å†å²è®°å½•é•¿åº¦: {{ initialHistoryLength }}&lt;/p&gt;
        &lt;p&gt;iframe äº§ç”Ÿçš„å†å²è®°å½•æ•°: {{ iframeHistoryCount }}&lt;/p&gt;
        &lt;p&gt;å½“å‰è·¯ç”±: {{ $route.fullPath }}&lt;/p&gt;
      &lt;/div&gt;
      &lt;div class="action-section"&gt;
        &lt;button @click="handleSubmit" class="submit-btn"&gt;ä¿å­˜å¹¶è¿”å›&lt;/button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  name: 'Detail',
  data() {
    return {
      dialogVisible: false,
      // ä½¿ç”¨ä¸€ä¸ªå¯ä»¥å¯¼èˆªçš„æµ‹è¯•é¡µé¢ä½œä¸º iframe
      // è¿™ä¸ªé¡µé¢ä¼šåœ¨å†…éƒ¨è¿›è¡Œå¯¼èˆªï¼Œä»è€Œäº§ç”Ÿå†å²è®°å½•
      iframeUrl: '/iframe-test.html',
      historyLength: 0,
      initialHistoryLength: 0
    }
  },
  computed: {
    iframeHistoryCount() {
      return this.historyLength - this.initialHistoryLength
    }
  },
  mounted() {
    this.initialHistoryLength = window.history.length
    console.log('Detail mounted, åˆå§‹å†å²è®°å½•é•¿åº¦:', this.initialHistoryLength)
    this.updateHistoryLength()
    // ç›‘å¬å†å²è®°å½•å˜åŒ–
    window.addEventListener('popstate', this.updateHistoryLength)
    // å®šæœŸæ›´æ–°å†å²è®°å½•é•¿åº¦æ˜¾ç¤ºï¼ˆå› ä¸º iframe å¯¼èˆªä¸ä¼šè§¦å‘ popstateï¼‰
    this.historyInterval = setInterval(() =&gt; {
      this.updateHistoryLength()
    }, 500)
  },
  beforeDestroy() {
    window.removeEventListener('popstate', this.updateHistoryLength)
    if (this.historyInterval) {
      clearInterval(this.historyInterval)
    }
  },
  methods: {
    // âŒ é—®é¢˜ä»£ç ï¼šä½¿ç”¨ go(-1) è¿”å›
    handleGoBack() {
      console.log('ç‚¹å‡»è¿”å›ï¼Œå½“å‰å†å²è®°å½•é•¿åº¦:', window.history.length)
      console.log('åˆå§‹å†å²è®°å½•é•¿åº¦:', this.initialHistoryLength)
      console.log('iframe äº§ç”Ÿçš„å†å²è®°å½•æ•°:', this.iframeHistoryCount)
      this.$router.go(-1)
    },
    
    openIframeDialog() {
      this.dialogVisible = true
    },
    
    closeDialog() {
      this.dialogVisible = false
    },
    
    onIframeLoad() {
      console.log('iframe åŠ è½½å®Œæˆ')
      this.updateHistoryLength()
    },
    
    updateHistoryLength() {
      const newLength = window.history.length
      if (newLength !== this.historyLength) {
        console.log('å†å²è®°å½•é•¿åº¦å˜åŒ–:', this.historyLength, '-&gt;', newLength)
      }
      this.historyLength = newLength
    },
    async handleSubmit() {
      // æ¨¡æ‹Ÿä¿å­˜æ“ä½œ
      console.log('ä¿å­˜æ•°æ®...')
      await new Promise(resolve =&gt; setTimeout(resolve, 500))
      // âŒ é—®é¢˜ä»£ç ï¼šä¿å­˜æˆåŠŸåä½¿ç”¨ go(-1) è¿”å›
      console.log('ä¿å­˜æˆåŠŸï¼Œå‡†å¤‡è¿”å›')
      this.$router.go(-1)
    }
  }
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-16">4. iframe æµ‹è¯•é¡µé¢ (public/iframe-test.html)</h4>
<p>åˆ›å»ºä¸€ä¸ªå¯ä»¥å¯¼èˆªçš„æµ‹è¯•é¡µé¢ï¼Œç”¨äºæ¨¡æ‹Ÿ iframe å†…éƒ¨çš„å¯¼èˆªï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>iframe æµ‹è¯•é¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>iframe æµ‹è¯•é¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
  
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-links"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#page1"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-link"</span>&gt;</span>é¡µé¢ 1<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#page2"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-link"</span>&gt;</span>é¡µé¢ 2<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#page3"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-link"</span>&gt;</span>é¡µé¢ 3<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"navigateToPage4()"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-link"</span>&gt;</span>é¡µé¢ 4 (JSå¯¼èˆª)<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"content"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>é¡µé¢ 1<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™æ˜¯ iframe æµ‹è¯•é¡µé¢çš„åˆå§‹å†…å®¹ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç‚¹å‡»ä¸Šæ–¹çš„é“¾æ¥å¯ä»¥å¯¼èˆªåˆ°ä¸åŒçš„é¡µé¢ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ¯æ¬¡å¯¼èˆªéƒ½ä¼šåœ¨æµè§ˆå™¨å†å²è®°å½•ä¸­æ·»åŠ ä¸€æ¡è®°å½•ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"info"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>æç¤ºï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>æ¯æ¬¡ç‚¹å‡»é“¾æ¥éƒ½ä¼šäº§ç”Ÿæ–°çš„å†å²è®°å½•ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å½“å‰ URL: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"currentUrl"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å†å²è®°å½•æ•°é‡: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"historyCount"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-comment">// æ›´æ–°å½“å‰ URL æ˜¾ç¤º</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateDisplay</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'currentUrl'</span>).<span class="hljs-property">textContent</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span>;
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'historyCount'</span>).<span class="hljs-property">textContent</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-property">length</span>;
    }
    <span class="hljs-comment">// é¡µé¢å†…å®¹</span>
    <span class="hljs-keyword">const</span> pages = {
      <span class="hljs-string">'#page1'</span>: <span class="hljs-string">'&lt;h2&gt;é¡µé¢ 1&lt;/h2&gt;&lt;p&gt;è¿™æ˜¯é¡µé¢ 1 çš„å†…å®¹ã€‚&lt;/p&gt;'</span>,
      <span class="hljs-string">'#page2'</span>: <span class="hljs-string">'&lt;h2&gt;é¡µé¢ 2&lt;/h2&gt;&lt;p&gt;è¿™æ˜¯é¡µé¢ 2 çš„å†…å®¹ã€‚&lt;/p&gt;'</span>,
      <span class="hljs-string">'#page3'</span>: <span class="hljs-string">'&lt;h2&gt;é¡µé¢ 3&lt;/h2&gt;&lt;p&gt;è¿™æ˜¯é¡µé¢ 3 çš„å†…å®¹ã€‚&lt;/p&gt;'</span>,
      <span class="hljs-string">'#page4'</span>: <span class="hljs-string">'&lt;h2&gt;é¡µé¢ 4&lt;/h2&gt;&lt;p&gt;è¿™æ˜¯é€šè¿‡ JavaScript å¯¼èˆªåˆ°çš„é¡µé¢ 4ã€‚&lt;/p&gt;'</span>
    };
    <span class="hljs-comment">// å¤„ç† hash å˜åŒ–</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleHashChange</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> hash = <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hash</span> || <span class="hljs-string">'#page1'</span>;
      <span class="hljs-keyword">const</span> content = pages[hash] || pages[<span class="hljs-string">'#page1'</span>];
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'content'</span>).<span class="hljs-property">innerHTML</span> = content;
      <span class="hljs-title function_">updateDisplay</span>();
    }
    
    <span class="hljs-comment">// ä½¿ç”¨ pushState å¯¼èˆªï¼ˆä¼šäº§ç”Ÿå†å²è®°å½•ï¼‰</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">navigateToPage4</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">pushState</span>({ <span class="hljs-attr">page</span>: <span class="hljs-string">'page4'</span> }, <span class="hljs-string">'Page 4'</span>, <span class="hljs-string">'#page4'</span>);
      <span class="hljs-title function_">handleHashChange</span>();
    }
    <span class="hljs-comment">// ç›‘å¬ hash å˜åŒ–</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'hashchange'</span>, handleHashChange);
    
    <span class="hljs-comment">// ç›‘å¬ popstateï¼ˆæµè§ˆå™¨å‰è¿›åé€€ï¼‰</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'popstate'</span>, handleHashChange);
    <span class="hljs-comment">// åˆå§‹åŒ–</span>
    <span class="hljs-title function_">handleHashChange</span>();
    <span class="hljs-comment">// å®šæœŸæ›´æ–°å†å²è®°å½•æ•°é‡æ˜¾ç¤º</span>
    <span class="hljs-built_in">setInterval</span>(updateDisplay, <span class="hljs-number">500</span>);
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h4 data-id="heading-17">5. é—®é¢˜æ¼”ç¤ºæ­¥éª¤</h4>
<ol>
<li><strong>å¯åŠ¨é¡¹ç›®</strong>ï¼Œè®¿é—®åˆ—è¡¨é¡µ (<code>/list</code>)</li>
<li><strong>ç‚¹å‡»é¡¹ç›®</strong>ï¼Œè¿›å…¥è¯¦æƒ…é¡µ (<code>/detail?id=1</code>)</li>
<li><strong>æ‰“å¼€ iframe å¼¹çª—</strong>ï¼Œç‚¹å‡»"æ‰“å¼€ iframe é€‰æ‹©å™¨"æŒ‰é’®</li>
<li><strong>åœ¨ iframe å†…å¯¼èˆª</strong>ï¼š
<ul>
<li>ç‚¹å‡»"é¡µé¢ 1"ã€"é¡µé¢ 2"ã€"é¡µé¢ 3"ç­‰é“¾æ¥</li>
<li>è§‚å¯Ÿ"è°ƒè¯•ä¿¡æ¯"é¢æ¿ä¸­çš„"iframe äº§ç”Ÿçš„å†å²è®°å½•æ•°"å¢åŠ </li>
</ul>
</li>
<li><strong>ç‚¹å‡»è¿”å›æŒ‰é’®</strong>ï¼š
<ul>
<li><strong>æœŸæœ›</strong>ï¼šè¿”å›åˆ°åˆ—è¡¨é¡µ</li>
<li><strong>å®é™…</strong>ï¼šå¯èƒ½åœç•™åœ¨å½“å‰é¡µæˆ–è¿”å›åˆ° iframe çš„æŸä¸ªçŠ¶æ€ âŒ</li>
</ul>
</li>
<li><strong>æˆ–è€…ç‚¹å‡»"ä¿å­˜å¹¶è¿”å›"</strong>ï¼š
<ul>
<li>åŒæ ·ä¼šå‡ºç°æ— æ³•æ­£å¸¸è¿”å›çš„é—®é¢˜</li>
</ul>
</li>
</ol>
<h4 data-id="heading-18">6. é—®é¢˜ç°è±¡è¯´æ˜</h4>
<ul>
<li>æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„æ§åˆ¶å°ï¼Œå¯ä»¥çœ‹åˆ°å†å²è®°å½•çš„å˜åŒ–</li>
<li>åœ¨ iframe å†…å¯¼èˆªåï¼Œ<code>window.history.length</code> ä¼šå¢åŠ </li>
<li>ä½¿ç”¨ <code>go(-1)</code> æ—¶ï¼Œä¼šå…ˆå›é€€ iframe äº§ç”Ÿçš„å†å²è®°å½•ï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å›åˆ°åˆ—è¡¨é¡µ</li>
<li>éœ€è¦å¤šæ¬¡ç‚¹å‡»è¿”å›æŒ‰é’®æ‰èƒ½å›åˆ°åˆ—è¡¨é¡µ</li>
</ul>
<hr/>
<h2 data-id="heading-19">è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-20">æ–¹æ¡ˆ1ï¼šä½¿ç”¨æ˜ç¡®çš„è·¯ç”±è·¯å¾„ï¼ˆæ¨èï¼‰â­</h3>
<p><strong>ä¼˜ç‚¹</strong>: ç®€å•å¯é ï¼Œä¸å— iframe å½±å“ï¼Œæ˜“äºç»´æŠ¤<br/>
<strong>ç¼ºç‚¹</strong>: éœ€è¦ä¼ é€’æ¥æºå‚æ•°æˆ–è®¾ç½®é»˜è®¤è·¯å¾„</p>
<h4 data-id="heading-21">å®Œæ•´è§£å†³æ–¹æ¡ˆä»£ç </h4>
<h5 data-id="heading-22">1. åˆ—è¡¨é¡µç»„ä»¶ (views/List.vue) - è§£å†³æ–¹æ¡ˆç‰ˆæœ¬</h5>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="list-page"&gt;
    &lt;h1&gt;åˆ—è¡¨é¡µ&lt;/h1&gt;
    &lt;div class="item-list"&gt;
      &lt;div 
        v-for="item in items" 
        :key="item.id" 
        class="item"
        @click="goToDetail(item.id)"
      &gt;
        &lt;span&gt;é¡¹ç›® {{ item.id }}: {{ item.name }}&lt;/span&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    
    &lt;div class="info"&gt;
      &lt;p&gt;âœ… è§£å†³æ–¹æ¡ˆç‰ˆæœ¬ï¼šè·³è½¬æ—¶ä¼šä¼ é€’æ¥æºä¿¡æ¯&lt;/p&gt;
      &lt;p&gt;æ“ä½œæ­¥éª¤ï¼š&lt;/p&gt;
      &lt;ol&gt;
        &lt;li&gt;ç‚¹å‡»ä¸Šæ–¹é¡¹ç›®è¿›å…¥è¯¦æƒ…é¡µï¼ˆä¼šè‡ªåŠ¨ä¼ é€’æ¥æºï¼‰&lt;/li&gt;
        &lt;li&gt;åœ¨è¯¦æƒ…é¡µæ‰“å¼€ iframe å¼¹çª—&lt;/li&gt;
        &lt;li&gt;åœ¨ iframe å†…ç‚¹å‡»é“¾æ¥å¯¼èˆª&lt;/li&gt;
        &lt;li&gt;ç‚¹å‡»è¿”å›æŒ‰é’®ï¼Œåº”è¯¥èƒ½æ­£å¸¸è¿”å›åˆ°åˆ—è¡¨é¡µ âœ…&lt;/li&gt;
      &lt;/ol&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  name: 'List',
  data() {
    return {
      items: [
        { id: 1, name: 'æµ‹è¯•é¡¹ç›®1' },
        { id: 2, name: 'æµ‹è¯•é¡¹ç›®2' },
        { id: 3, name: 'æµ‹è¯•é¡¹ç›®3' }
      ]
    }
  },
  methods: {
    goToDetail(id) {
      // âœ… è§£å†³æ–¹æ¡ˆï¼šä¼ é€’æ¥æºä¿¡æ¯
      this.$router.push({
        path: '/detail-fixed',
        query: {
          from: this.$route.fullPath, // ä¼ é€’å½“å‰è·¯å¾„ä½œä¸ºæ¥æº
          id: id
        }
      })
    }
  }
}
&lt;/script&gt;
</code></pre>
<h5 data-id="heading-23">2. è¯¦æƒ…é¡µç»„ä»¶ (views/DetailFixed.vue) - è§£å†³æ–¹æ¡ˆç‰ˆæœ¬</h5>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="detail-page"&gt;
    &lt;div class="header"&gt;
      &lt;button @click="handleGoBack" class="back-btn"&gt;â† è¿”å›&lt;/button&gt;
      &lt;h1&gt;è¯¦æƒ…é¡µ - é¡¹ç›® {{ $route.query.id }} (è§£å†³æ–¹æ¡ˆç‰ˆæœ¬)&lt;/h1&gt;
    &lt;/div&gt;
    &lt;div class="content"&gt;
      &lt;p&gt;è¿™æ˜¯è¯¦æƒ…é¡µå†…å®¹&lt;/p&gt;
      
      &lt;div class="iframe-section"&gt;
        &lt;button @click="openIframeDialog" class="open-btn"&gt;
          æ‰“å¼€ iframe é€‰æ‹©å™¨
        &lt;/button&gt;
        &lt;div v-if="dialogVisible" class="dialog-overlay" @click="closeDialog"&gt;
          &lt;div class="dialog-content" @click.stop&gt;
            &lt;div class="dialog-header"&gt;
              &lt;h3&gt;iframe é€‰æ‹©å™¨&lt;/h3&gt;
              &lt;button @click="closeDialog" class="close-btn"&gt;Ã—&lt;/button&gt;
            &lt;/div&gt;
            &lt;div class="dialog-body"&gt;
              &lt;iframe
                :src="iframeUrl"
                @load="onIframeLoad"
                ref="iframeRef"
                class="iframe"
              &gt;&lt;/iframe&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="info-panel"&gt;
        &lt;h3&gt;è°ƒè¯•ä¿¡æ¯&lt;/h3&gt;
        &lt;p&gt;æ¥æºè·¯å¾„: &lt;strong&gt;{{ fromPath || 'æ— ' }}&lt;/strong&gt;&lt;/p&gt;
        &lt;p&gt;å½“å‰è·¯ç”±: {{ $route.fullPath }}&lt;/p&gt;
        &lt;p&gt;âœ… ä½¿ç”¨æ˜ç¡®çš„è·¯ç”±è·¯å¾„è¿”å›ï¼Œä¸å— iframe å½±å“&lt;/p&gt;
      &lt;/div&gt;
      &lt;div class="action-section"&gt;
        &lt;button @click="handleSubmit" class="submit-btn"&gt;ä¿å­˜å¹¶è¿”å›&lt;/button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  name: 'DetailFixed',
  data() {
    return {
      dialogVisible: false,
      iframeUrl: '/iframe-test.html'
    }
  },
  computed: {
    fromPath() {
      return this.$route.query.from
    }
  },
  methods: {
    // âœ… è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨æ˜ç¡®çš„è·¯ç”±è·¯å¾„è¿”å›
    handleGoBack() {
      const fromPath = this.$route.query.from
      if (fromPath) {
        // å¦‚æœæœ‰æ¥æºä¿¡æ¯ï¼Œè¿”å›åˆ°å¯¹åº”çš„è·¯å¾„
        console.log('è¿”å›åˆ°æ¥æºè·¯å¾„:', fromPath)
        this.$router.push({ path: fromPath })
      } else {
        // é»˜è®¤è¿”å›åˆ°åˆ—è¡¨é¡µ
        console.log('æ²¡æœ‰æ¥æºä¿¡æ¯ï¼Œè¿”å›åˆ°é»˜è®¤è·¯å¾„: /list')
        this.$router.push({ path: '/list' })
      }
    },
    openIframeDialog() {
      this.dialogVisible = true
    },
    closeDialog() {
      this.dialogVisible = false
    },
    onIframeLoad() {
      console.log('iframe åŠ è½½å®Œæˆ')
    },
    async handleSubmit() {
      // æ¨¡æ‹Ÿä¿å­˜æ“ä½œ
      console.log('ä¿å­˜æ•°æ®...')
      await new Promise(resolve =&gt; setTimeout(resolve, 500))
      
      // âœ… è§£å†³æ–¹æ¡ˆï¼šä¿å­˜æˆåŠŸåä½¿ç”¨ handleGoBack æ–¹æ³•
      console.log('ä¿å­˜æˆåŠŸï¼Œå‡†å¤‡è¿”å›')
      this.handleGoBack()
    }
  }
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-24">æ ¸å¿ƒä»£ç å¯¹æ¯”</h4>
<h5 data-id="heading-25">é—®é¢˜ç‰ˆæœ¬ vs è§£å†³æ–¹æ¡ˆç‰ˆæœ¬</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é—®é¢˜ç‰ˆæœ¬ï¼šä½¿ç”¨ go(-1)</span>
<span class="hljs-title function_">handleGoBack</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">go</span>(-<span class="hljs-number">1</span>)  <span class="hljs-comment">// å¯èƒ½è¿”å›åˆ° iframe å†…éƒ¨</span>
}

<span class="hljs-comment">// âœ… è§£å†³æ–¹æ¡ˆç‰ˆæœ¬ï¼šä½¿ç”¨æ˜ç¡®çš„è·¯ç”±è·¯å¾„</span>
<span class="hljs-title function_">handleGoBack</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> fromPath = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">query</span>.<span class="hljs-property">from</span>
  <span class="hljs-keyword">if</span> (fromPath) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">path</span>: fromPath }) <span class="hljs-comment">// ç›´æ¥è¿”å›åˆ°æ¥æºè·¯å¾„</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">path</span>: <span class="hljs-string">'/list'</span> }) <span class="hljs-comment">// é»˜è®¤è¿”å›è·¯å¾„</span>
  }
}
</code></pre>
<h5 data-id="heading-26">è·³è½¬æ—¶ä¼ é€’æ¥æºä¿¡æ¯</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é—®é¢˜ç‰ˆæœ¬ï¼šä¸ä¼ é€’æ¥æºä¿¡æ¯</span>
<span class="hljs-title function_">goToDetail</span>(<span class="hljs-params">id</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>({
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/detail'</span>,
    <span class="hljs-attr">query</span>: { id }
  })
}
<span class="hljs-comment">// âœ… è§£å†³æ–¹æ¡ˆç‰ˆæœ¬ï¼šä¼ é€’æ¥æºä¿¡æ¯</span>
<span class="hljs-title function_">goToDetail</span>(<span class="hljs-params">id</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>({
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/detail-fixed'</span>,
    <span class="hljs-attr">query</span>: {
      <span class="hljs-attr">from</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">fullPath</span>, <span class="hljs-comment">// ä¼ é€’å½“å‰è·¯å¾„ä½œä¸ºæ¥æº</span>
      <span class="hljs-attr">id</span>: id
    }
  })
}
</code></pre>
<hr/>
<h3 data-id="heading-27">æ–¹æ¡ˆ2ï¼šä½¿ç”¨ sessionStorage è®°å½•æ¥æºï¼ˆè‡ªåŠ¨åŒ–æ–¹æ¡ˆï¼‰</h3>
<p><strong>ä¼˜ç‚¹</strong>: è‡ªåŠ¨è®°å½•æ¥æºï¼Œæ— éœ€æ‰‹åŠ¨ä¼ å‚<br/>
<strong>ç¼ºç‚¹</strong>: ç›´æ¥è®¿é—®æˆ–åˆ·æ–°é¡µé¢æ—¶å¯èƒ½ä¸å‡†ç¡®</p>
<h4 data-id="heading-28">å®ç°ä»£ç </h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-comment">// è·¯ç”±å®ˆå«ï¼šåœ¨è¿›å…¥é¡µé¢æ—¶è®°å½•æ¥æº</span>
  <span class="hljs-title function_">beforeRouteEnter</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) {
    <span class="hljs-comment">// è®°å½•æ¥æºè·¯å¾„</span>
    <span class="hljs-keyword">const</span> fromPath = <span class="hljs-keyword">from</span>.<span class="hljs-property">fullPath</span> || <span class="hljs-string">'/list'</span>;
    sessionStorage.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'page_detail_from'</span>, fromPath);
    <span class="hljs-title function_">next</span>();
  },
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åˆå§‹åŒ–é€»è¾‘</span>
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">handleGoBack</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// ä¼˜å…ˆä½¿ç”¨ query å‚æ•°ï¼ˆæœ€å¯é ï¼‰</span>
      <span class="hljs-keyword">const</span> fromPath = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">query</span>.<span class="hljs-property">from</span>;
      <span class="hljs-keyword">if</span> (fromPath) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">path</span>: fromPath });
        <span class="hljs-keyword">return</span>;
      }
      
      <span class="hljs-comment">// å…¶æ¬¡ä½¿ç”¨ sessionStorage</span>
      <span class="hljs-keyword">const</span> storedFrom = sessionStorage.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'page_detail_from'</span>);
      <span class="hljs-keyword">if</span> (storedFrom &amp;&amp; storedFrom !== <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">fullPath</span>) {
        sessionStorage.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'page_detail_from'</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">path</span>: storedFrom });
        <span class="hljs-keyword">return</span>;
      }
      
      <span class="hljs-comment">// é»˜è®¤è¿”å›</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">path</span>: <span class="hljs-string">'/list'</span> });
    }
  },
  <span class="hljs-title function_">beforeDestroy</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ¸…ç† sessionStorage</span>
    sessionStorage.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'page_detail_from'</span>);
  }
}
</code></pre>
<h4 data-id="heading-29">æ³¨æ„äº‹é¡¹</h4>
<ul>
<li><strong>sessionStorage ç‰¹æ€§</strong>: ä¸åŒæ ‡ç­¾é¡µä¹‹é—´æ˜¯éš”ç¦»çš„ï¼Œä¸ä¼šäº’ç›¸å½±å“</li>
<li><strong>ç›´æ¥è®¿é—®é—®é¢˜</strong>: å¦‚æœç”¨æˆ·ç›´æ¥è¾“å…¥ URL æˆ–åˆ·æ–°é¡µé¢ï¼Œ<code>from</code> ä¸º <code>undefined</code>ï¼Œéœ€è¦è®¾ç½®é»˜è®¤å€¼</li>
<li><strong>æ¸…ç†æ—¶æœº</strong>: åœ¨ <code>beforeDestroy</code> ä¸­æ¸…ç†ï¼Œé¿å…å†…å­˜æ³„æ¼</li>
<li><strong>key å‘½å</strong>: ä½¿ç”¨å”¯ä¸€çš„ keyï¼Œé¿å…ä¸å…¶ä»–é¡µé¢å†²çª</li>
</ul>
<hr/>
<h3 data-id="heading-30">æ–¹æ¡ˆ3ï¼šè®°å½•å†å²è®°å½•é•¿åº¦ï¼ˆåŠ¨æ€è®¡ç®—ï¼‰</h3>
<p><strong>ä¼˜ç‚¹</strong>: å¯ä»¥å‡†ç¡®è¿”å›åˆ°ä¸Šä¸€é¡µ<br/>
<strong>ç¼ºç‚¹</strong>: å¦‚æœç”¨æˆ·åœ¨å½“å‰é¡µé¢è¿›è¡Œäº†å…¶ä»–å¯¼èˆªï¼Œè®¡ç®—å¯èƒ½ä¸å‡†ç¡®</p>
<h4 data-id="heading-31">å®ç°ä»£ç </h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">initialHistoryLength</span>: <span class="hljs-number">0</span>  <span class="hljs-comment">// è®°å½•åˆå§‹å†å²è®°å½•é•¿åº¦</span>
    }
  },
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// è®°å½•åˆå§‹å†å²é•¿åº¦</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">initialHistoryLength</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-property">length</span>;
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">handleGoBack</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// ä¼˜å…ˆä½¿ç”¨ query å‚æ•°</span>
      <span class="hljs-keyword">const</span> fromPath = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">query</span>.<span class="hljs-property">from</span>;
      <span class="hljs-keyword">if</span> (fromPath) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">path</span>: fromPath });
        <span class="hljs-keyword">return</span>;
      }
      
      <span class="hljs-comment">// è®¡ç®— iframe å¢åŠ çš„å†å²è®°å½•æ•°</span>
      <span class="hljs-keyword">const</span> iframeHistoryCount = <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-property">length</span> - <span class="hljs-variable language_">this</span>.<span class="hljs-property">initialHistoryLength</span>;
      <span class="hljs-comment">// å›é€€åˆ°æ­£ç¡®çš„ä½ç½®ï¼ˆè·³è¿‡ iframe äº§ç”Ÿçš„å†å²è®°å½•ï¼‰</span>
      <span class="hljs-keyword">if</span> (iframeHistoryCount &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">go</span>(-(iframeHistoryCount + <span class="hljs-number">1</span>));
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">go</span>(-<span class="hljs-number">1</span>);
      }
    }
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-32">æ–¹æ¡ˆ4ï¼šåœ¨ iframe ç»„ä»¶ä¸­é˜»æ­¢å†å²è®°å½•ï¼ˆæ ¹æºè§£å†³ï¼‰</h3>
<p><strong>ä¼˜ç‚¹</strong>: ä»æ ¹æºè§£å†³é—®é¢˜ï¼Œiframe ä¸ä¼šäº§ç”Ÿå†å²è®°å½•<br/>
<strong>ç¼ºç‚¹</strong>: éœ€è¦ä¿®æ”¹ iframe ç»„ä»¶ï¼Œå¯èƒ½å½±å“å…¶ä»–ä½¿ç”¨åœºæ™¯</p>
<h4 data-id="heading-33">å®ç°ä»£ç </h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// IframeComponent.vue</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ç›‘å¬ iframe çš„ load äº‹ä»¶</span>
    <span class="hljs-variable language_">this</span>.$nextTick(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">externalIframe</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">externalIframe</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =&gt;</span> {
          <span class="hljs-comment">// ä½¿ç”¨ replaceState æ›¿æ¢å†å²è®°å½•ï¼Œè€Œä¸æ˜¯æ·»åŠ </span>
          <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">replaceState</span>(
            <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-property">state</span>,
            <span class="hljs-string">''</span>,
            <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span>
          );
        });
      }
    });
  }
}
</code></pre>
<p><strong>æ³¨æ„</strong>: è¿™ç§æ–¹æ³•å¯èƒ½ä¼šå½±å“ iframe å†…éƒ¨çš„æ­£å¸¸å¯¼èˆªåŠŸèƒ½ï¼Œéœ€è¦è°¨æ…ä½¿ç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-34">æ–¹æ¡ˆå¯¹æ¯”</h2>








































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th><th>æ¨èåº¦</th></tr></thead><tbody><tr><td><strong>æ–¹æ¡ˆ1ï¼šæ˜ç¡®è·¯ç”±è·¯å¾„</strong></td><td>ç®€å•å¯é ã€ä¸å—iframeå½±å“ã€æ˜“äºç»´æŠ¤</td><td>éœ€è¦ä¼ å‚æˆ–é»˜è®¤è·¯å¾„</td><td>å…¥å£ç›¸å¯¹å›ºå®šçš„é¡µé¢</td><td>â­â­â­â­â­</td></tr><tr><td><strong>æ–¹æ¡ˆ2ï¼šsessionStorage</strong></td><td>è‡ªåŠ¨è®°å½•æ¥æºã€æ ‡ç­¾é¡µéš”ç¦»</td><td>ç›´æ¥è®¿é—®æ—¶å¯èƒ½ä¸å‡†ç¡®ã€éœ€è¦è·¯ç”±å®ˆå«</td><td>å…¥å£è¾ƒå¤šä¸”å¸Œæœ›è‡ªåŠ¨åŒ–</td><td>â­â­â­â­</td></tr><tr><td><strong>æ–¹æ¡ˆ3ï¼šå†å²è®°å½•é•¿åº¦</strong></td><td>å¯ä»¥å‡†ç¡®è¿”å›</td><td>è®¡ç®—å¯èƒ½ä¸å‡†ç¡®</td><td>ç®€å•åœºæ™¯</td><td>â­â­â­</td></tr><tr><td><strong>æ–¹æ¡ˆ4ï¼šé˜»æ­¢å†å²è®°å½•</strong></td><td>æ ¹æºè§£å†³</td><td>å¯èƒ½å½±å“iframeåŠŸèƒ½</td><td>ç‰¹æ®Šéœ€æ±‚</td><td>â­â­</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-35">æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-36">1. æ¨èä½¿ç”¨æ–¹æ¡ˆ1ï¼ˆæ˜ç¡®è·¯ç”±è·¯å¾„ï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æ¨èï¼šä½¿ç”¨æ˜ç¡®çš„è·¯ç”±è·¯å¾„</span>
<span class="hljs-title function_">handleGoBack</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> fromPath = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">query</span>.<span class="hljs-property">from</span>;
  <span class="hljs-keyword">if</span> (fromPath) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">path</span>: fromPath });
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">path</span>: <span class="hljs-string">'/list'</span> });  <span class="hljs-comment">// è®¾ç½®åˆç†çš„é»˜è®¤è·¯å¾„</span>
  }
}
</code></pre>
<h3 data-id="heading-37">2. è·³è½¬æ—¶ç»Ÿä¸€ä¼ é€’æ¥æºä¿¡æ¯</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æ¨èï¼šåœ¨è·³è½¬æ—¶ä¼ é€’æ¥æº</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>({
  <span class="hljs-attr">path</span>: <span class="hljs-string">'/detail-fixed'</span>,
  <span class="hljs-attr">query</span>: {
    <span class="hljs-attr">from</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">fullPath</span>, <span class="hljs-comment">// ä¼ é€’å®Œæ•´è·¯å¾„</span>
    <span class="hljs-attr">id</span>: itemId
    <span class="hljs-comment">// å…¶ä»–å‚æ•°...</span>
  }
});
</code></pre>
<h3 data-id="heading-38">3. å¤„ç†å¤šç§å…¥å£åœºæ™¯</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æ¨èï¼šå¤„ç†å¤šç§æ¥æº</span>
<span class="hljs-title function_">handleGoBack</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> fromPath = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">query</span>.<span class="hljs-property">from</span>;
  <span class="hljs-comment">// æ”¯æŒè·¯ç”±åç§°æˆ–è·¯å¾„</span>
  <span class="hljs-keyword">if</span> (fromPath) {
    <span class="hljs-keyword">if</span> (fromPath.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'/'</span>)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">path</span>: fromPath });
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">name</span>: fromPath });
    }
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-comment">// æ ¹æ®é¡µé¢æ¨¡å¼è®¾ç½®é»˜è®¤è¿”å›è·¯å¾„</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isEditMode</span>) {
    <span class="hljs-comment">// ç¼–è¾‘æ¨¡å¼ï¼šè¿”å›åˆ°è¯¦æƒ…é¡µ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>({
      <span class="hljs-attr">name</span>: <span class="hljs-string">'Detail'</span>,
      <span class="hljs-attr">query</span>: { <span class="hljs-attr">id</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemId</span> }
    });
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// æ–°å»ºæ¨¡å¼ï¼šè¿”å›åˆ°åˆ—è¡¨é¡µ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">path</span>: <span class="hljs-string">'/list'</span> });
  }
}
</code></pre>
<h3 data-id="heading-39">4. é¿å…ä½¿ç”¨ go(-1) çš„åœºæ™¯</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é¿å…ï¼šåœ¨åŒ…å« iframe çš„é¡µé¢ä¸­ä½¿ç”¨</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">go</span>(-<span class="hljs-number">1</span>);

<span class="hljs-comment">// âœ… æ¨èï¼šä½¿ç”¨æ˜ç¡®çš„è·¯ç”±è·¯å¾„</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">path</span>: <span class="hljs-string">'/list'</span> });
</code></pre>
<h3 data-id="heading-40">5. æµ‹è¯•å»ºè®®</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æµ‹è¯•åœºæ™¯ï¼š</span>
<span class="hljs-comment">// 1. ä»åˆ—è¡¨é¡µè¿›å…¥ -&gt; è¿”å›åº”è¯¥å›åˆ°åˆ—è¡¨é¡µ</span>
<span class="hljs-comment">// 2. ä»è¯¦æƒ…é¡µè¿›å…¥ï¼ˆç¼–è¾‘æ¨¡å¼ï¼‰-&gt; è¿”å›åº”è¯¥å›åˆ°è¯¦æƒ…é¡µ</span>
<span class="hljs-comment">// 3. æ‰“å¼€ iframe å¼¹çª—å¹¶å¯¼èˆª -&gt; è¿”å›åº”è¯¥ä¸å—å½±å“</span>
<span class="hljs-comment">// 4. ç›´æ¥è®¿é—® URL -&gt; è¿”å›åº”è¯¥æœ‰åˆç†çš„é»˜è®¤è·¯å¾„</span>
<span class="hljs-comment">// 5. åˆ·æ–°é¡µé¢ -&gt; è¿”å›åº”è¯¥æœ‰åˆç†çš„é»˜è®¤è·¯å¾„</span>
<span class="hljs-comment">// 6. å¤šä¸ªæ ‡ç­¾é¡µ -&gt; æ¯ä¸ªæ ‡ç­¾é¡µåº”è¯¥ç‹¬ç«‹å·¥ä½œ</span>
</code></pre>
<hr/>
<h2 data-id="heading-41">æµ‹è¯•å’ŒéªŒè¯</h2>
<h3 data-id="heading-42">æµ‹è¯•æ­¥éª¤</h3>
<h4 data-id="heading-43">1. æµ‹è¯•é—®é¢˜ç‰ˆæœ¬</h4>
<ol>
<li>è®¿é—® <code>/list</code> åˆ—è¡¨é¡µ</li>
<li>ç‚¹å‡»ä»»æ„é¡¹ç›®ï¼Œè¿›å…¥ <code>/detail?id=1</code> è¯¦æƒ…é¡µ</li>
<li>ç‚¹å‡»"æ‰“å¼€ iframe é€‰æ‹©å™¨"æŒ‰é’®</li>
<li>åœ¨ iframe å†…å¤šæ¬¡ç‚¹å‡»å¯¼èˆªé“¾æ¥ï¼ˆé¡µé¢1ã€é¡µé¢2ã€é¡µé¢3ç­‰ï¼‰</li>
<li>è§‚å¯Ÿæµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­çš„å†å²è®°å½•å˜åŒ–</li>
<li>ç‚¹å‡»"è¿”å›"æŒ‰é’®</li>
<li><strong>é—®é¢˜ç°è±¡</strong>ï¼šå¯èƒ½æ— æ³•ç›´æ¥è¿”å›åˆ°åˆ—è¡¨é¡µï¼Œéœ€è¦å¤šæ¬¡ç‚¹å‡»è¿”å›</li>
</ol>
<h4 data-id="heading-44">2. æµ‹è¯•è§£å†³æ–¹æ¡ˆç‰ˆæœ¬</h4>
<ol>
<li>è®¿é—® <code>/list</code> åˆ—è¡¨é¡µ</li>
<li>ç‚¹å‡»ä»»æ„é¡¹ç›®ï¼Œè¿›å…¥ <code>/detail-fixed?from=/list&amp;id=1</code> è¯¦æƒ…é¡µ</li>
<li>ç‚¹å‡»"æ‰“å¼€ iframe é€‰æ‹©å™¨"æŒ‰é’®</li>
<li>åœ¨ iframe å†…å¤šæ¬¡ç‚¹å‡»å¯¼èˆªé“¾æ¥</li>
<li>ç‚¹å‡»"è¿”å›"æŒ‰é’®</li>
<li><strong>é¢„æœŸç»“æœ</strong>ï¼šç›´æ¥è¿”å›åˆ°åˆ—è¡¨é¡µ âœ…</li>
</ol>
<h3 data-id="heading-45">éªŒè¯æ–¹æ³•</h3>
<h4 data-id="heading-46">æ–¹æ³•1ï¼šä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­æ‰§è¡Œ</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å½“å‰å†å²è®°å½•é•¿åº¦:'</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-property">length</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å½“å‰ URL:'</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span>)

<span class="hljs-comment">// æŸ¥çœ‹å†å²è®°å½•</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å†å²è®°å½•:'</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>)
</code></pre>
<h4 data-id="heading-47">æ–¹æ³•2ï¼šæ·»åŠ è°ƒè¯•ä»£ç </h4>
<p>åœ¨è¯¦æƒ…é¡µç»„ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç æ¥ç›‘æ§å†å²è®°å½•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// è®°å½•åˆå§‹å†å²é•¿åº¦</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">initialHistoryLength</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-property">length</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åˆå§‹å†å²è®°å½•é•¿åº¦:'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">initialHistoryLength</span>)
  
  <span class="hljs-comment">// ç›‘å¬å†å²è®°å½•å˜åŒ–</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">checkHistory</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> currentLength = <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-property">length</span>
    <span class="hljs-keyword">const</span> diff = currentLength - <span class="hljs-variable language_">this</span>.<span class="hljs-property">initialHistoryLength</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å†å²è®°å½•å˜åŒ–: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.initialHistoryLength}</span> -&gt; <span class="hljs-subst">${currentLength}</span> (å¢åŠ  <span class="hljs-subst">${diff}</span>)`</span>)
  }
  
  <span class="hljs-comment">// å®šæœŸæ£€æŸ¥</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">historyCheckInterval</span> = <span class="hljs-built_in">setInterval</span>(checkHistory, <span class="hljs-number">1000</span>)
},

<span class="hljs-title function_">beforeDestroy</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">historyCheckInterval</span>) {
    <span class="hljs-built_in">clearInterval</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">historyCheckInterval</span>)
  }
}
</code></pre>
<h4 data-id="heading-48">æ–¹æ³•3ï¼šå¯¹æ¯”æµ‹è¯•</h4>
<p>åŒæ—¶æ‰“å¼€ä¸¤ä¸ªæµè§ˆå™¨æ ‡ç­¾é¡µï¼š</p>
<ul>
<li>æ ‡ç­¾é¡µ1ï¼šè®¿é—®é—®é¢˜ç‰ˆæœ¬ (<code>/detail</code>)</li>
<li>æ ‡ç­¾é¡µ2ï¼šè®¿é—®è§£å†³æ–¹æ¡ˆç‰ˆæœ¬ (<code>/detail-fixed</code>)</li>
</ul>
<p>åˆ†åˆ«æµ‹è¯•è¿”å›åŠŸèƒ½ï¼Œå¯¹æ¯”å·®å¼‚ã€‚</p>
<h3 data-id="heading-49">é¢„æœŸç»“æœ</h3>






























<table><thead><tr><th>æ“ä½œ</th><th>é—®é¢˜ç‰ˆæœ¬</th><th>è§£å†³æ–¹æ¡ˆç‰ˆæœ¬</th></tr></thead><tbody><tr><td>æ‰“å¼€ iframe å‰è¿”å›</td><td>âœ… æ­£å¸¸è¿”å›</td><td>âœ… æ­£å¸¸è¿”å›</td></tr><tr><td>æ‰“å¼€ iframe åè¿”å›</td><td>âŒ å¯èƒ½æ— æ³•è¿”å›</td><td>âœ… æ­£å¸¸è¿”å›</td></tr><tr><td>iframe å†…å¯¼èˆªåè¿”å›</td><td>âŒ æ— æ³•è¿”å›</td><td>âœ… æ­£å¸¸è¿”å›</td></tr><tr><td>ä¿å­˜åè‡ªåŠ¨è¿”å›</td><td>âŒ å¯èƒ½æ— æ³•è¿”å›</td><td>âœ… æ­£å¸¸è¿”å›</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-50">ç›¸å…³èµ„æº</h2>
<h3 data-id="heading-51">æµè§ˆå™¨å†å²è®°å½• API</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FHistory" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/History" ref="nofollow noopener noreferrer">MDN: History API</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FWindow%2FsessionStorage" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/sessionStorage" ref="nofollow noopener noreferrer">MDN: sessionStorage</a></li>
</ul>
<h3 data-id="heading-52">Vue Router æ–‡æ¡£</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Frouter.vuejs.org%2Fzh%2Fguide%2Fessentials%2Fnavigation.html" target="_blank" title="https://router.vuejs.org/zh/guide/essentials/navigation.html" ref="nofollow noopener noreferrer">Vue Router: ç¼–ç¨‹å¼å¯¼èˆª</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Frouter.vuejs.org%2Fzh%2Fguide%2Fadvanced%2Fnavigation-guards.html" target="_blank" title="https://router.vuejs.org/zh/guide/advanced/navigation-guards.html" ref="nofollow noopener noreferrer">Vue Router: è·¯ç”±å®ˆå«</a></li>
</ul>
<h3 data-id="heading-53">iframe ç›¸å…³</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FHTML%2FElement%2Fiframe" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/iframe" ref="nofollow noopener noreferrer">MDN: iframe å…ƒç´ </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FWindow%2FpostMessage" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/postMessage" ref="nofollow noopener noreferrer">iframe ä¸çˆ¶é¡µé¢é€šä¿¡</a></li>
</ul>
<hr/>
<h2 data-id="heading-54">æ€»ç»“</h2>
<p>iframe å¯¼è‡´ <code>go(-1)</code> æ— æ³•æ­£å¸¸è¿”å›çš„é—®é¢˜ï¼Œæ ¹æœ¬åŸå› æ˜¯ iframe å†…éƒ¨çš„å¯¼èˆªä¼šæ±¡æŸ“çˆ¶é¡µé¢çš„æµè§ˆå™¨å†å²è®°å½•ã€‚æœ€ä½³è§£å†³æ–¹æ¡ˆæ˜¯<strong>ä½¿ç”¨æ˜ç¡®çš„è·¯ç”±è·¯å¾„è¿›è¡Œè¿”å›</strong>ï¼Œè€Œä¸æ˜¯ä¾èµ–æµè§ˆå™¨å†å²è®°å½•æ ˆã€‚</p>
<h3 data-id="heading-55">æ ¸å¿ƒè¦ç‚¹</h3>
<ol>
<li>âœ… <strong>é¿å…ä½¿ç”¨ <code>go(-1)</code></strong>ï¼šåœ¨åŒ…å« iframe çš„é¡µé¢ä¸­ï¼Œä½¿ç”¨æ˜ç¡®çš„è·¯ç”±è·¯å¾„</li>
<li>âœ… <strong>ä¼ é€’æ¥æºä¿¡æ¯</strong>ï¼šè·³è½¬æ—¶é€šè¿‡ query å‚æ•°ä¼ é€’æ¥æºè·¯å¾„</li>
<li>âœ… <strong>è®¾ç½®é»˜è®¤è·¯å¾„</strong>ï¼šä¸ºç›´æ¥è®¿é—®æˆ–åˆ·æ–°é¡µé¢çš„æƒ…å†µè®¾ç½®åˆç†çš„é»˜è®¤è¿”å›è·¯å¾„</li>
<li>âœ… <strong>ç»Ÿä¸€å¤„ç†é€»è¾‘</strong>ï¼šåœ¨ <code>handleGoBack</code> æ–¹æ³•ä¸­ç»Ÿä¸€å¤„ç†æ‰€æœ‰è¿”å›é€»è¾‘</li>
</ol>
<h3 data-id="heading-56">ä»£ç ç¤ºä¾‹æ€»ç»“</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æœ€ç»ˆæ¨èæ–¹æ¡ˆ</span>
<span class="hljs-title function_">handleGoBack</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> fromPath = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">query</span>.<span class="hljs-property">from</span>;
  <span class="hljs-keyword">if</span> (fromPath) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">path</span>: fromPath });
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">path</span>: <span class="hljs-string">'/list'</span> });
  }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js ç¬¬äºŒè¯¾ï¼šç”¨æ ¸å¿ƒæ¨¡å—æ„å»ºä½ çš„ç¬¬ä¸€ä¸ªæœåŠ¡å™¨]]></title>    <link>https://juejin.cn/post/7587779957674606643</link>    <guid>https://juejin.cn/post/7587779957674606643</guid>    <pubDate>2025-12-26T03:28:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587779957674606643" data-draft-id="7587704265054683174" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.js ç¬¬äºŒè¯¾ï¼šç”¨æ ¸å¿ƒæ¨¡å—æ„å»ºä½ çš„ç¬¬ä¸€ä¸ªæœåŠ¡å™¨"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T03:28:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Drift_Dream"/> <meta itemprop="url" content="https://juejin.cn/user/3107677514241500"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.js ç¬¬äºŒè¯¾ï¼šç”¨æ ¸å¿ƒæ¨¡å—æ„å»ºä½ çš„ç¬¬ä¸€ä¸ªæœåŠ¡å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3107677514241500/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Drift_Dream
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T03:28:57.000Z" title="Fri Dec 26 2025 03:28:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.7;font-weight:400;font-size:16px;overflow-x:hidden;color:#212122}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:8px;padding-bottom:8px}.markdown-body h1{color:#a0a0a0;font-size:38px;margin-top:32px;padding-top:32px}.markdown-body h2{color:#fff;background-color:#212122;width:fit-content;border-bottom-right-radius:100px;margin-top:47px;margin-bottom:16px;padding:4px 48px 4px 8px;line-height:1.7;font-size:30px;transition:all .3s ease-out}.markdown-body h2:hover{border-bottom-right-radius:50px;transition:all .3s ease-out}.markdown-body h3{font-size:24px;padding-left:8px;margin-top:32px;border-bottom:2px solid #c6c4c4;line-height:1.7}.markdown-body h4{font-size:20px;padding-left:8px;margin-top:32px;border-bottom:1px solid #ddd}.markdown-body h5{font-size:16px;margin-top:24px}.markdown-body h6{margin-top:16px;line-height:1.1}.markdown-body p{font-size:16px;text-align:start;white-space:normal;text-size-adjust:auto;line-height:2;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%;margin:auto;padding-left:8px;padding-right:8px}.markdown-body hr{border:none;border-top:4px double #212122;margin-top:32px;margin-bottom:32px;text-align:center}.markdown-body hr:after{content:"â™¥";display:inline-block;position:relative;top:-15px;padding:0 10px;color:#212122;font-size:18px}.markdown-body code{word-break:break-word;overflow-x:auto;background-color:#f1f1f1;color:#ef7060;font-size:14px;padding:.065em 6px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.7;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);margin:32px 16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-color:#212122;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);background-size:40px}.markdown-body pre&gt;code{font-size:14px;padding:16px 8px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#fff;background:#272822}.markdown-body pre&gt;code::-webkit-scrollbar{height:10px;background-color:#f5f5f5}.markdown-body pre&gt;code::-webkit-scrollbar-track{box-shadow:inset 0 0 6px rgba(0,0,0,.3);border-radius:3px;background-color:#f5f5f5}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{border-radius:3px;box-shadow:inset 0 0 6px rgba(0,0,0,.3);background-color:#555}.markdown-body a{color:#ef7060;padding:2px;text-decoration:none;border-bottom:.125em solid #ef7060;border-radius:2px;box-shadow:inset 0 -.025em 0 #ef7060;transition:box-shadow .27s cubic-bezier(.77,0,.175,1),color .27s cubic-bezier(.77,0,.175,1)}.markdown-body a:focus,.markdown-body a:hover{outline:none;box-shadow:inset 0 -1.5em 0 #ef7060;color:#fff}.markdown-body a:before{content:"â‡² ";vertical-align:top;margin-left:2px;font-family:dart!important;font-size:12px;color:inherit;opacity:.7}.markdown-body table{background:#fbfbfb;border-radius:4px;border-collapse:collapse;margin:auto;padding:5px;width:95%;box-shadow:0 5px 10px rgba(0,0,0,.1);animation:float 5s infinite}.markdown-body table th{color:#fff;background:#212122;border-bottom:1px solid #9ea7af;border-right:1px solid #343a45;font-size:18px;padding:16px;text-align:left;vertical-align:middle}.markdown-body table th:first-child{border-top-left-radius:4px}.markdown-body table th:last-child{border-top-right-radius:4px;border-right:none}.markdown-body table tr{border-top:1px solid #c1c3d1;border-bottom:1px solid #c1c3d1;color:#666b85}.markdown-body table tr:hover td{background:#212122;color:#fff;border-top:1px solid #22262e}.markdown-body table tr:first-child{border-top:none}.markdown-body table tr:last-child{border-bottom:none}.markdown-body table tr:nth-child(odd) td{background:#f1f1f1}.markdown-body table tr:nth-child(odd):hover td{background:#212122}.markdown-body table tr:last-child td:first-child{border-bottom-left-radius:4px}.markdown-body table tr:last-child td:last-child{border-bottom-right-radius:4px}.markdown-body table td{background:#fbfbfb;padding:16px;text-align:left;vertical-align:middle;font-size:16px;border-right:1px solid #c1c3d1}.markdown-body table td:last-child{border-right:0}.markdown-body blockquote{color:#777;padding:1px 16px;margin:24px 0;border-left:4px solid #c6c4c4;background-color:#f1f1f1;transition:all .3s ease-out;border-radius:4px}.markdown-body blockquote:hover{border-left-color:#212122;background-color:#212122;color:#fff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:24px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body span.math{margin-left:32px;font-size:18px;font-weight:700}@media (max-width:720px){.markdown-body h1{font-size:30.4px}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:19.2px}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:12.8px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><p>åˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªçœŸæ­£çš„Node.jsæœåŠ¡å™¨ï¼Œç†è§£HTTPæ¨¡å—ï¼Œå­¦ä¼šå¤„ç†è¯·æ±‚ä¸å“åº”ã€‚</p>
<h2 data-id="heading-0">å®æˆ˜é¡¹ç›®ï¼šç®€æ˜“å¤©æ°”æŸ¥è¯¢API</h2>
<h3 data-id="heading-1">1. åˆ›å»ºé¡¹ç›®ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> server-demo
<span class="hljs-built_in">cd</span> server-demo
npm init -y
npm install nodemon --save-dev
</code></pre>
<p>ä¿®æ”¹ <code>package.json</code>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"nodemon server.js"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-2">2. <strong>æ ¸å¿ƒæ¨¡å—è®²è§£ï¼šhttp</strong></h3>
<p><strong>åˆ›å»º <code>server.js</code>ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. å¯¼å…¥å†…ç½®çš„httpæ¨¡å—</span>
<span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);

<span class="hljs-comment">// 2. åˆ›å»ºæœåŠ¡å™¨å®ä¾‹</span>
<span class="hljs-keyword">const</span> server = http.<span class="hljs-title function_">createServer</span>(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-comment">// req: è¯·æ±‚å¯¹è±¡ï¼ŒåŒ…å«å®¢æˆ·ç«¯çš„ä¿¡æ¯</span>
  <span class="hljs-comment">// res: å“åº”å¯¹è±¡ï¼Œç”¨äºå‘å®¢æˆ·ç«¯è¿”å›æ•°æ®</span>
  
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ”¶åˆ° <span class="hljs-subst">${req.method}</span> è¯·æ±‚ï¼Œè·¯å¾„: <span class="hljs-subst">${req.url}</span>`</span>);
  
  <span class="hljs-comment">// è®¾ç½®å“åº”å¤´</span>
  res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, { 
    <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
    <span class="hljs-string">'Access-Control-Allow-Origin'</span>: <span class="hljs-string">'*'</span>
  });
  
  <span class="hljs-comment">// æ ¹æ®è¯·æ±‚è·¯å¾„è¿”å›ä¸åŒå“åº”</span>
  <span class="hljs-keyword">if</span> (req.<span class="hljs-property">url</span> === <span class="hljs-string">'/weather/beijing'</span>) {
    res.<span class="hljs-title function_">end</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
      <span class="hljs-attr">city</span>: <span class="hljs-string">"åŒ—äº¬"</span>,
      <span class="hljs-attr">temperature</span>: <span class="hljs-string">"22Â°C"</span>,
      <span class="hljs-attr">condition</span>: <span class="hljs-string">"æ™´å¤©"</span>
    }));
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (req.<span class="hljs-property">url</span> === <span class="hljs-string">'/weather/shanghai'</span>) {
    res.<span class="hljs-title function_">end</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
      <span class="hljs-attr">city</span>: <span class="hljs-string">"ä¸Šæµ·"</span>,
      <span class="hljs-attr">temperature</span>: <span class="hljs-string">"25Â°C"</span>,
      <span class="hljs-attr">condition</span>: <span class="hljs-string">"å¤šäº‘"</span>
    }));
  } <span class="hljs-keyword">else</span> {
    res.<span class="hljs-title function_">end</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
      <span class="hljs-attr">message</span>: <span class="hljs-string">"æ¬¢è¿ä½¿ç”¨å¤©æ°”API"</span>,
      <span class="hljs-attr">endpoints</span>: [<span class="hljs-string">"/weather/beijing"</span>, <span class="hljs-string">"/weather/shanghai"</span>]
    }));
  }
});

<span class="hljs-comment">// 3. ç›‘å¬ç«¯å£</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PORT</span> = <span class="hljs-number">3000</span>;
server.<span class="hljs-title function_">listen</span>(<span class="hljs-variable constant_">PORT</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸš€ æœåŠ¡å™¨è¿è¡Œåœ¨: http://localhost:<span class="hljs-subst">${PORT}</span>`</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ“¡ è¯•è¯•è®¿é—®: http://localhost:<span class="hljs-subst">${PORT}</span>/weather/beijing`</span>);
});
</code></pre>
<h3 data-id="heading-3">3. <strong>è¿è¡Œå¹¶æµ‹è¯•</strong></h3>
<pre><code class="hljs language-bash" lang="bash">npm run dev
</code></pre>
<p>ç”¨ä¸‰ç§æ–¹å¼æµ‹è¯•ï¼š</p>
<ol>
<li><strong>æµè§ˆå™¨è®¿é—®</strong>ï¼šæ‰“å¼€ <code>http://localhost:3000</code></li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2aeb93cd05aa4b228e44a46145a1ce76~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRHJpZnRfRHJlYW0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767324537&amp;x-signature=h%2FEFp86uB19CcCSzaSmaKBFoyec%3D" alt="image.png" loading="lazy"/></p>
<p>2  <strong>å‘½ä»¤è¡Œcurl</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">curl http://localhost:3000/weather/shanghai
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7643aff19d6841a19101e4e3fcfedd2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRHJpZnRfRHJlYW0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767324537&amp;x-signature=z7kbvFcqYdFkbL7afsvD%2B5VgzdU%3D" alt="image.png" loading="lazy"/></p>
<ol start="3">
<li><strong>åˆ›å»ºæµ‹è¯•æ–‡ä»¶ <code>test.js</code></strong>ï¼š</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);

<span class="hljs-keyword">const</span> options = {
  <span class="hljs-attr">hostname</span>: <span class="hljs-string">'localhost'</span>,
  <span class="hljs-attr">port</span>: <span class="hljs-number">3000</span>,
  <span class="hljs-attr">path</span>: <span class="hljs-string">'/weather/beijing'</span>,
  <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>
};

<span class="hljs-keyword">const</span> req = http.<span class="hljs-title function_">request</span>(options, <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
  <span class="hljs-keyword">let</span> data = <span class="hljs-string">''</span>;
  
  res.<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>, <span class="hljs-function"><span class="hljs-params">chunk</span> =&gt;</span> {
    data += chunk;
  });
  
  res.<span class="hljs-title function_">on</span>(<span class="hljs-string">'end'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤©æ°”æ•°æ®:'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(data));
  });
});

req.<span class="hljs-title function_">end</span>();
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed1a0fb38ea643289c5f07140dcce7cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRHJpZnRfRHJlYW0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767324537&amp;x-signature=fK6HxpnfZavX%2BBUxh8RZJ4soLKA%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-4">çŸ¥è¯†ç‚¹æ€»ç»“</h2>
<p>âœ… æŒæ¡ <code>http.createServer()</code>åˆ›å»ºæœåŠ¡å™¨</p>
<p>âœ… ç†è§£ <code>req</code>å’Œ <code>res</code>å¯¹è±¡</p>
<p>âœ… å­¦ä¼šè®¾ç½®å“åº”å¤´å’ŒçŠ¶æ€ç </p>
<p>âœ… èƒ½æ ¹æ®ä¸åŒURLè¿”å›ä¸åŒå†…å®¹</p>
<p>âœ… çŸ¥é“å¦‚ä½•ç”¨ <code>nodemon</code>çƒ­é‡è½½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>