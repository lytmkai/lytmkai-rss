<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[å‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¹‹CSSç¯‡]]></title>    <link>https://juejin.cn/post/7575655132755591187</link>    <guid>https://juejin.cn/post/7575655132755591187</guid>    <pubDate>2025-11-23T13:03:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575655132755591187" data-draft-id="7575442779039350826" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¹‹CSSç¯‡"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2025-11-23T13:03:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å°å¯’"/> <meta itemprop="url" content="https://juejin.cn/user/694547078987287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¹‹CSSç¯‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547078987287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å°å¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T13:03:58.000Z" title="Sun Nov 23 2025 13:03:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1ã€å‰è¨€</h2>
<p>å½“æ¶‰åŠåˆ°ç½‘ç«™çš„æ€§èƒ½ä¼˜åŒ–æ—¶ï¼ŒCSS çš„ä¼˜åŒ–æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ–¹é¢ã€‚å¦‚æœä½ çš„ CSS å¤ªå¤æ‚ï¼Œé‚£ä¹ˆä½ çš„ç½‘ç«™å¯èƒ½ä¼šåƒä¸€ä¸ª<strong>æ…¢ååçš„ä¹Œé¾Ÿ</strong>ä¸€æ ·ç¼“æ…¢åœ°åŠ è½½å’Œæ¸²æŸ“ï¼Œå½±å“<strong>ç”¨æˆ·çš„ç•™å­˜</strong>ã€<strong>ç½‘ç«™çš„è½¬åŒ–ç‡</strong>ä»¥åŠ<strong>ç½‘ç«™çš„ä½“éªŒå’Œä¼ æ’­</strong>ç­‰ï¼Œæ‰€ä»¥å¯¹äº CSS ä¼˜åŒ–è¿˜æ˜¯éå¸¸éœ€è¦çš„ï¼Œæœ¬æ–‡å°†ä»‹ç»ä¸€äº› CSS æ€§èƒ½ä¼˜åŒ–çš„æŠ€å·§ï¼Œå¸®åŠ©ä½ åœ¨ç¼–å†™ CSS ä»£ç æ—¶æé«˜æ€§èƒ½ã€‚</p>
<h2 data-id="heading-1">2ã€å‰ç½®çŸ¥è¯†</h2>
<h3 data-id="heading-2">2.1 CSS è§£æè§„åˆ™</h3>
<p>æˆ‘ä»¬ä¸€èˆ¬ä¹¦å†™ CSS é€‰æ‹©å™¨éƒ½æ˜¯ä»å·¦å¾€å³ä¹¦å†™çš„ï¼Œæ‰€ä»¥è‡ªç„¶å°±ä¼šä»¥ä¸º CSS é€‰æ‹©å™¨æ˜¯ä»å·¦å¾€å³å»åŒ¹é…æ¸²æŸ“çš„ï¼Œä½†å…¶å®ä¸æ˜¯è¿™æ ·çš„ï¼Œ<strong>CSS é€‰æ‹©å™¨æ˜¯ä»å³å¾€å·¦å»åŒ¹é…çš„</strong>ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.header</span> <span class="hljs-selector-tag">div</span> <span class="hljs-selector-tag">span</span> { 
  <span class="hljs-attribute">color</span>: red;
}
</code></pre>
<p>æ¯”å¦‚ä¸Šé¢çš„ CSS æ ·å¼åŒ¹é…æŸ¥æ‰¾è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>å…ˆæ‰¾åˆ°æ‰€æœ‰çš„ <code>span</code> å…ƒç´ ã€‚</li>
<li>ä»ç¬¬ä¸€ä¸ª <code>span</code> å…ƒç´ å¼€å§‹ï¼Œæ²¿ç€ <code>span</code> å…ƒç´ çš„çˆ¶çº§å…ƒç´ æŸ¥åˆ° <code>div</code>ï¼Œæœ€åæ²¿ç€ <code>div</code> çš„çˆ¶çº§å…ƒç´ æ‰¾åˆ°æ‰€æœ‰çš„ <code>.header</code>ï¼Œæ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„èŠ‚ç‚¹å°±åŠ å…¥åˆ°ç»“æœé›†ä¸­ã€‚</li>
</ol>
<h3 data-id="heading-3">2.2 CSS çš„åŠ è½½è¿‡ç¨‹</h3>
<p><strong>ç®€è¿°æµè§ˆå™¨çš„æ¸²æŸ“è¿‡ç¨‹</strong>ï¼šåœ¨æ‹¿åˆ° html æ–‡ä»¶åï¼Œæµè§ˆå™¨ä¼šè°ƒç”¨ html è§£æå™¨è§£æ html æ–‡ä»¶ï¼Œæ„å»º DOM æ ‘å’Œ CSSOM æ ‘ï¼Œç„¶å DOM æ ‘å’Œ CSSOM æ ‘åˆå¹¶æˆæ¸²æŸ“æ ‘ï¼Œæœ€åæµè§ˆå™¨ä¼šæ ¹æ®æ¸²æŸ“æ ‘è¿›è¡Œå¸ƒå±€å’Œç»˜åˆ¶ï¼Œæœ€ç»ˆå°†é¡µé¢å‘ˆç°ç»™ç”¨æˆ·ã€‚</p>
<p><strong>CSSOM çš„æ„å»º</strong>ï¼šå½“æµè§ˆå™¨è§£æ html æ–‡æ¡£æ—¶ï¼Œå¦‚æœé‡åˆ° <code>&lt;link&gt;</code> æˆ– <code>&lt;style&gt;</code> æ ‡ç­¾ï¼Œä¼šå¼€å§‹ä¸‹è½½å’Œè§£æ CSS æ–‡ä»¶ï¼Œæ„å»º CSSOMã€‚åœ¨ CSSOM æ„å»ºå®Œæˆä¹‹å‰ï¼Œæµè§ˆå™¨ä¸ä¼šæ¸²æŸ“ä»»ä½•å·²å¤„ç†çš„å†…å®¹ï¼Œå³ä½¿DOMå·²ç»è§£æå®Œæ¯•ã€‚</p>
<ul>
<li>CSS ä¸ä¼šé˜»å¡ <code>DOM</code> çš„è§£æï¼Œä½†ä¼šé˜»å¡ <code>DOM</code> çš„æ¸²æŸ“ã€‚</li>
<li>CSS ä¸ä¼šé˜»å¡ <code>Javascript</code> çš„ä¸‹è½½ï¼Œä½†ä¼šé˜»å¡ <code>JavaScript</code> çš„æ‰§è¡Œï¼Œå› ä¸º <code>JavaScript</code> å¯ä»¥æ“ä½œæ ·å¼ï¼Œæ‰€ä»¥éœ€è¦ç­‰ <code>CSSOM</code> æ„å»ºå®Œæˆä¹‹åï¼Œæ‰èƒ½æ‰§è¡Œ <code>JavaScript</code>ã€‚</li>
</ul>
<p>æ‰€ä»¥ä»è¿™é‡Œå°±å¯ä»¥å¾—åˆ°ä»¥ä¸‹ä¼˜åŒ–æ€è·¯ï¼šã€‚</p>
<ul>
<li>å°†ä¸€äº›<strong>ä½“ç§¯å°çš„é¦–å±å…³é”® CSS</strong> å†…è”åˆ° <code>html</code> æ–‡ä»¶ä¸­ï¼ŒåŠ å¿«é¦–å±æ¸²æŸ“é€Ÿåº¦ã€‚</li>
<li>å°† CSS æ”¾åœ¨ <code>&lt;head&gt;</code> ä¸­ï¼Œç¡®ä¿å°½æ—©åŠ è½½ã€‚</li>
<li>ä½¿ç”¨åª’ä½“æŸ¥è¯¢ï¼ˆå¦‚ <code>media="print"</code>ï¼‰ä½¿ CSS éé˜»å¡æ¸²æŸ“ã€‚</li>
<li>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè€ƒè™‘ä½¿ç”¨ preloadï¼ˆå¦‚ <code>&lt;link rel="preload" as="style"&gt;</code>ï¼‰åœ¨ä¸é˜»å¡æ¸²æŸ“çš„æƒ…å†µä¸‹åŠ è½½éé¦–å±çš„ CSS èµ„æºã€‚</li>
</ul>
<h3 data-id="heading-4">2.3 CSS æƒé‡ä¼˜å…ˆçº§</h3>
<p>CSS é€‰æ‹©å™¨ç±»å‹çš„ä¼˜å…ˆçº§ä»ä½å¾€é«˜ä¾æ¬¡æ˜¯ï¼š</p>
<ol>
<li><strong>ç±»å‹é€‰æ‹©å™¨</strong>ï¼ˆæ¯”å¦‚ <code>h1</code>ï¼‰å’Œ<strong>ä¼ªå…ƒç´ é€‰æ‹©å™¨</strong>ï¼ˆæ¯”å¦‚ <code>::before</code>ï¼‰ã€‚</li>
<li><strong>ç±»é€‰æ‹©å™¨</strong>ï¼ˆæ¯”å¦‚ <code>.header</code>ï¼‰ã€<strong>å±æ€§é€‰æ‹©å™¨</strong>ï¼ˆæ¯”å¦‚ <code>[type="checkbox"]</code>ï¼‰å’Œ<strong>ä¼ªç±»é€‰æ‹©å™¨</strong>ï¼ˆæ¯”å¦‚ <code>:hover</code>ï¼‰ã€‚</li>
<li><strong>ID é€‰æ‹©å™¨</strong>ï¼ˆæ¯”å¦‚ <code>#box</code>ï¼‰ã€‚</li>
<li><strong>!important</strong>ï¼šä¼˜å…ˆçº§æœ€é«˜ã€‚</li>
</ol>
<h2 data-id="heading-5">2ã€CSS åŠ è½½æ€§èƒ½ä¼˜åŒ–</h2>
<h3 data-id="heading-6">2.1. æå–å…¬å…±çš„ CSS æ–‡ä»¶</h3>
<p>å¦‚æœä½¿ç”¨<code>webpack</code>è¿›è¡Œé¡¹ç›®æ‰“åŒ…ï¼Œåœ¨æ‰“åŒ…é˜¶æ®µå¯ä»¥ä½¿ç”¨<code>mini-css-extract-plugin</code>æå–å…¬å…± CSS æ–‡ä»¶ï¼Œä¾¿äºç¼“å­˜ä»¥åŠå‡å°‘ CSS è¯·æ±‚æ¬¡æ•°ã€‚</p>
<h3 data-id="heading-7">2.2 é¿å…ä½¿ç”¨ @import</h3>
<ul>
<li>ä½¿ç”¨ <code>@import</code> ä¼šé˜»å¡æµè§ˆå™¨çš„å¹¶è¡Œä¸‹è½½ï¼Œå¯¼è‡´åŠ è½½é€Ÿåº¦å˜æ…¢ã€‚</li>
<li>å¤šä¸ª <code>@import</code> ä¼šå¯¼è‡´ä¸‹è½½é¡ºåºç´Šä¹±ã€‚</li>
</ul>
<h3 data-id="heading-8">2.3 å‹ç¼© CSS æ–‡ä»¶</h3>
<p>å‹ç¼© CSS æ–‡ä»¶å¯ä»¥å‡å°æ–‡ä»¶å¤§å°ï¼Œä»è€ŒåŠ å¿«åŠ è½½é€Ÿåº¦ã€‚æ¯”å¦‚å¯ä»¥ç”¨<code>optimize-css-assets-webpack-plugin</code>é…åˆ<code>mini-css-extract-plugin</code>ä½¿ç”¨æ¥ä¼˜åŒ–å’Œå‹ç¼© CSS æ–‡ä»¶ã€‚</p>
<h3 data-id="heading-9">2.4 ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜</h3>
<p>å¯ä»¥ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜æ¥ç¼“å­˜ CSS æ–‡ä»¶ï¼Œä»è€Œåœ¨é¡µé¢åŠ è½½æ—¶åŠ å¿«é€Ÿåº¦ã€‚å¯ä»¥è®¾ç½®é€‚å½“çš„ç¼“å­˜æ—¶é—´æ¥ç¡®ä¿æ–‡ä»¶åœ¨å¿…è¦æ—¶èƒ½å¤Ÿæ›´æ–°ã€‚</p>
<h3 data-id="heading-10">2.5 ä½¿ç”¨ CDN åŠ é€Ÿ</h3>
<ul>
<li>ä½¿ç”¨ <strong>CDNï¼ˆå†…å®¹åˆ†å‘ç½‘ç»œï¼‰</strong> å¯ä»¥å°† CSS æ–‡ä»¶åˆ†å‘åˆ°å…¨å›½å„ä¸ª <code>CDN</code> èŠ‚ç‚¹çš„æœåŠ¡å™¨ä¸Šï¼Œç”¨æˆ·å¯ä»¥å°±è¿‘ä¸‹è½½ï¼Œä»è€ŒåŠ å¿«åŠ è½½é€Ÿåº¦ï¼Œä¹Ÿå¯ä»¥å‡å°‘è‡ªå·±æœåŠ¡å™¨çš„è´Ÿè½½ã€‚</li>
<li>å¦‚æœé™æ€èµ„æºå¾ˆå¤šï¼Œå¯ä»¥å‡†å¤‡å¤šä¸ªé™æ€æœåŠ¡å™¨åŸŸåï¼Œæ¯”å¦‚åŸŸåæ˜¯ <code>static.xx.com</code>ï¼Œåšæˆæ”¯æŒ <code>static0-5</code> çš„ 6 ä¸ªåŸŸå, ä¹Ÿå°±æ˜¯ <code>static0.xx.comã€static1.xx.comã€static2.xx.com...</code>ï¼Œæ¯æ¬¡è¯·æ±‚æ—¶éšæœºé€‰ä¸€ä¸ªåŸŸååœ°å€è¿›è¡Œè¯·æ±‚ï¼Œè¿™æ ·å¯ä»¥ç»•è¿‡æµè§ˆå™¨åŒåŸŸåçš„è¿æ¥æ•°é™åˆ¶ï¼ˆä¸€èˆ¬æ˜¯é™åˆ¶ 6 ä¸ªï¼‰ï¼Œ6 ä¸ªåŸŸåå°±å¯ä»¥åŒæ—¶å‘é€ 36 ä¸ªè¿æ¥è¯·æ±‚ã€‚å½“ç„¶ï¼Œè¿™ä¸ªåŸŸåä¸ªæ•°ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œå¤ªåˆ†æ•£çš„è¯åˆä¼šæ¶‰åŠåˆ°å¤šåŸŸåæ— æ³•ç¼“å­˜é™æ€èµ„æºçš„é—®é¢˜ã€‚</li>
</ul>
<h3 data-id="heading-11">2.6 ä½¿ç”¨ CSS Sprite</h3>
<p><strong>CSS Sprite</strong> æŠ€æœ¯å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„<strong>é›ªç¢§å›¾</strong>ï¼Œé€šè¿‡å°†å¤šå¼ å°å›¾æ ‡æ‹¼æ¥æˆä¸€å¼ å¤§å›¾ï¼Œèƒ½æœ‰æ•ˆçš„<strong>å‡å°‘HTTPè¯·æ±‚æ•°é‡</strong>ä»¥è¾¾åˆ°åŠ é€Ÿæ˜¾ç¤ºå†…å®¹çš„æŠ€æœ¯ã€‚</p>
<h3 data-id="heading-12">2.7 CSS æ ·å¼æŠ½ç¦»å’Œå»é™¤æ— ç”¨ CSS</h3>
<ul>
<li>å¹³æ—¶å¼€å‘è¿‡ç¨‹ä¸­å¯ä»¥å°†ä¸€äº›<strong>å¯å¤ç”¨</strong>çš„ CSS æŠ½ç¦»åˆ°ä¸€ä¸ªå•ç‹¬æ–‡ä»¶ä¸­ï¼Œå‡å°‘ CSS ä»£ç å†—ä½™ã€‚</li>
<li>åœ¨æ‰“åŒ…æ„å»ºæ—¶å¯ä»¥åˆ©ç”¨ä¸€äº›æ’ä»¶å»é™¤æ²¡æœ‰ç”¨åˆ°çš„ CSSï¼Œç›¸å½“äºå¯¹ CSS è¿›è¡Œ <code>Tree shaking</code>ï¼Œå‡å°‘æ‰“åŒ…åä½“ç§¯ã€‚</li>
</ul>
<h3 data-id="heading-13">2.8 åˆç†ä½¿ç”¨å†…åµŒ CSS</h3>
<p><code>å†…åµŒCSS</code> ä¹Ÿå°±æ˜¯é€šè¿‡å…ƒç´ çš„ <code>style</code> æ¥ä¹¦å†™è¡Œå†…æ ·å¼ï¼Œæ¯”å¦‚ <code>&lt;div style="color: red"&gt;&lt;/div&gt;</code>ï¼Œå®ƒçš„ä¼˜ç¼ºç‚¹å¦‚ä¸‹ï¼š</p>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>ä¸ä½¿ç”¨ <code>link</code> æ ‡ç­¾ç›¸æ¯”ï¼Œå¯ä»¥å‡å°‘ CSS çš„ <code>http</code> è¯·æ±‚é‡ã€‚</li>
</ul>
<p><strong>ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>å¢åŠ  <code>html</code> æ–‡ä»¶çš„ä½“ç§¯ã€‚</li>
<li>ä½¿ç”¨ <code>link</code> æ ‡ç­¾èƒ½å¾ˆå¥½çš„åˆ©ç”¨æµè§ˆå™¨çš„ç¼“å­˜ï¼Œè€Œå†…è”æ ·å¼æ”¾åœ¨ <code>html</code> é‡Œé¢ï¼Œèƒ½å¦ä½¿ç”¨ç¼“å­˜éœ€è¦çœ‹ <code>html</code> æ–‡ä»¶çš„ç¼“å­˜ç­–ç•¥ã€‚</li>
</ul>
<p>ç»¼åˆå®ƒçš„ä¼˜ç¼ºç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©å°†ä¸€äº›<strong>ä½“ç§¯å°çš„é¦–å±å…³é”® CSS</strong> å†…è”åˆ° <code>html</code> æ–‡ä»¶ä¸­ï¼ŒåŠ å¿«é¦–å±æ¸²æŸ“é€Ÿåº¦ã€‚</p>
<h2 data-id="heading-14">3ã€CSS é€‰æ‹©å™¨æ€§èƒ½ä¼˜åŒ–</h2>
<h3 data-id="heading-15">3.1 é¿å…ä½¿ç”¨é€šé…ç¬¦é€‰æ‹©å™¨</h3>
<p>é€šé…ç¬¦é€‰æ‹©å™¨<code>*</code>ç¬¦å·å¯ä»¥åŒ¹é…ä»»ä½•å…ƒç´ ï¼Œä½†æ˜¯è¿™ä¼šå¯¼è‡´æµè§ˆå™¨éœ€è¦éå†æ•´ä¸ªæ–‡æ¡£æ ‘æ¥æŸ¥æ‰¾åŒ¹é…çš„å…ƒç´ ï¼Œä»è€Œé™ä½æ€§èƒ½ã€‚</p>
<h3 data-id="heading-16">3.2 ä½¿ç”¨å­é€‰æ‹©å™¨ä»£æ›¿åä»£é€‰æ‹©å™¨</h3>
<p>åä»£é€‰æ‹©å™¨ï¼ˆå¦‚ <code>.parent .child</code>ï¼‰ä¼šæ£€æŸ¥æ‰€æœ‰åä»£å…ƒç´ ï¼Œè€Œå­é€‰æ‹©å™¨ï¼ˆå¦‚ <code>.parent &gt; .child</code>ï¼‰åªæ£€æŸ¥ç›´æ¥å­å…ƒç´ ï¼ŒåŒ¹é…èŒƒå›´æ›´å°ï¼Œæ€§èƒ½æ›´å¥½ã€‚</p>
<h3 data-id="heading-17">3.3 ä¼˜å…ˆä½¿ç”¨ç±»ï¼ˆClassï¼‰å’Œ ID é€‰æ‹©å™¨</h3>
<p>ç±»é€‰æ‹©å™¨ï¼ˆå¦‚ <code>.box</code>ï¼‰å’Œ ID é€‰æ‹©å™¨ï¼ˆå¦‚ <code>#box</code>ï¼‰åŒ¹é…é€Ÿåº¦æ›´å¿«ï¼Œå› ä¸ºå®ƒä»¬ç›´æ¥æŒ‡å‘ç‰¹å®šå…ƒç´ ã€‚é¿å…æ ‡ç­¾é€‰æ‹©å™¨ï¼ˆå¦‚ <code>div</code>ï¼‰æˆ–å±æ€§é€‰æ‹©å™¨ï¼ˆå¦‚ [type="text"]ï¼‰ï¼Œåè€…åŒ¹é…æ›´åŠ å®½æ³›ï¼Œæ•ˆç‡è¾ƒä½ï¼Œå°¤å…¶åœ¨å¤§å‹ DOM ä¸­ã€‚</p>
<h3 data-id="heading-18">3.4 é¿å…æ·±å±‚åµŒå¥—çš„é€‰æ‹©å™¨</h3>
<p>å‰é¢ä¹Ÿè¯´è¿‡ï¼ŒCSS é€‰æ‹©å™¨éœ€è¦ä»å³å¾€å·¦å»åŒ¹é…çš„ï¼ŒåµŒå¥—çš„é€‰æ‹©å™¨å¦‚ <code>.header div ul li a</code>ï¼Œå› ä¸ºæµè§ˆå™¨éœ€è¦éå†æ›´å¤š DOM èŠ‚ç‚¹ã€‚å»ºè®®é™åˆ¶é€‰æ‹©å™¨æ·±åº¦åœ¨ 3 å±‚ä»¥å†…ï¼Œä½¿ç”¨æ›´ç›´æ¥çš„ç±»æˆ– ID é€‰æ‹©å™¨ï¼Œå¦‚ <code>.box</code>ã€‚è¿™èƒ½å‡å°‘åŒ¹é…æ—¶é—´ã€‚æˆ–è€…ä½¿ç”¨ <code>BEM</code> å‘½åè§„èŒƒï¼Œæ¯”å¦‚ <code>.block__element--modifier</code>ï¼Œæé«˜åŒ¹é…æ•ˆç‡ã€‚</p>
<p>å¦å¤–åœ¨ä½¿ç”¨ ID é€‰æ‹©å™¨çš„æ—¶å€™ï¼Œå‰é¢å°±éœ€è¦åŠ ä¸Šçˆ¶çº§çš„é€‰æ‹©å™¨ï¼Œæ¯”å¦‚ä¸æ¨èç”¨ <code>.box #content</code>ï¼Œæ¨èç”¨ <code>#content</code>ã€‚</p>
<h2 data-id="heading-19">4ã€CSS å±æ€§æ€§èƒ½ä¼˜åŒ–</h2>
<h3 data-id="heading-20">4.1 é¿å…ä½¿ç”¨è¿‡äºå¤æ‚çš„å±æ€§</h3>
<p>è¿‡äºå¤æ‚çš„å±æ€§ä¼šå¢åŠ æµè§ˆå™¨çš„æ¸²æŸ“è´Ÿæ‹…ï¼Œä»è€Œé™ä½æ€§èƒ½ã€‚åº”è¯¥å°½é‡ä½¿ç”¨ç®€å•çš„å±æ€§æ¥å®ç°éœ€è¦çš„æ ·å¼æ•ˆæœï¼Œæ¯”å¦‚ä¸‹é¢è¿™äº›å±æ€§ï¼š</p>
<ul>
<li><strong>box-shadow</strong>ï¼šbox-shadow å±æ€§å¯ä»¥å®ç°ç›’å­çš„é˜´å½±æ•ˆæœï¼Œä½†æ˜¯å®ƒä¼šå¢åŠ æµè§ˆå™¨çš„è®¡ç®—å’Œæ¸²æŸ“æˆæœ¬ã€‚å¦‚æœè¦å®ç°ä¸€ä¸ªç®€å•çš„è¾¹æ¡†æ•ˆæœï¼Œå¯ä»¥ä½¿ç”¨ <code>border</code> å±æ€§æ¥æ›¿ä»£ã€‚</li>
</ul>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ä¸æ¨èä½¿ç”¨ */</span>
<span class="hljs-selector-class">.box</span> {
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">2px</span> <span class="hljs-number">2px</span> <span class="hljs-number">2px</span> <span class="hljs-number">#888</span>;
}

<span class="hljs-comment">/* æ¨èä½¿ç”¨ */</span>
<span class="hljs-selector-class">.box</span> {
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#888</span>;
}
</code></pre>
<ul>
<li><strong>filter</strong>ï¼šfilter å±æ€§å¯ä»¥å®ç°å›¾åƒçš„æ»¤é•œæ•ˆæœï¼Œä½†æ˜¯å®ƒä¼šå¢åŠ æµè§ˆå™¨çš„è®¡ç®—å’Œæ¸²æŸ“æˆæœ¬ã€‚å¦‚æœè¦å®ç°ä¸€ä¸ªç®€å•çš„é¢œè‰²å˜æ¢æ•ˆæœï¼Œå¯ä»¥ä½¿ç”¨ <code>background-color</code> å±æ€§æ¥æ›¿ä»£ã€‚</li>
</ul>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ä¸æ¨èä½¿ç”¨ */</span>
<span class="hljs-selector-class">.box</span> {
  <span class="hljs-attribute">filter</span>: <span class="hljs-built_in">grayscale</span>(<span class="hljs-number">50%</span>);
}

<span class="hljs-comment">/* æ¨èä½¿ç”¨ */</span>
<span class="hljs-selector-class">.box</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ccc</span>;
}
</code></pre>
<p>ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›æ›¿ä»£æ–¹æ¡ˆå¯èƒ½ä¼šæœ‰ä¸€äº›<strong>å±€é™æ€§</strong>ï¼Œæ— æ³•å®Œå…¨å–ä»£åŸæ¥çš„å±æ€§ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨è¿™äº›æ›¿ä»£æ–¹æ¡ˆæ—¶ï¼Œéœ€è¦æ ¹æ®å…·ä½“çš„éœ€æ±‚å’Œæƒ…å†µè¿›è¡Œé€‰æ‹©ã€‚</p>
<h3 data-id="heading-21">4.2 é¿å…ä½¿ç”¨ä¸å¿…è¦çš„å±æ€§</h3>
<p>ä¸å¿…è¦çš„å±æ€§ä¼šå¢åŠ  <code>CSS</code> æ–‡ä»¶çš„å¤§å°ï¼Œä»è€Œé™ä½åŠ è½½é€Ÿåº¦ã€‚åº”è¯¥å°½é‡é¿å…ä½¿ç”¨ä¸å¿…è¦çš„å±æ€§ã€‚</p>
<h3 data-id="heading-22">4.3 é¿å…ä½¿ç”¨ !important</h3>
<p><code>!important</code> ä¼šè¦†ç›–å…¶ä»–æ ·å¼ï¼Œä»è€Œå¢åŠ æ¸²æŸ“æ—¶é—´ã€‚è€Œä¸”å®ƒä¸å®¹æ˜“è¢«æ›¿æ¢æˆ–è¦†ç›–ï¼ŒåæœŸå¯ç»´æŠ¤æ€§ä¹Ÿæ¯”è¾ƒå·®ï¼Œæ›´å¥½çš„æ–¹å¼ä½¿ç”¨æ›´å…·ä½“ã€æ›´å‡†ç¡®çš„é€‰æ‹©å™¨æ¥å®šä¹‰æ ·å¼ã€‚</p>
<h2 data-id="heading-23">5ã€CSS åŠ¨ç”»æ€§èƒ½ä¼˜åŒ–</h2>
<h3 data-id="heading-24">5.1 ä½¿ç”¨ transform å’Œ opacity å±æ€§æ¥è¿›è¡ŒåŠ¨ç”»</h3>
<p>ä½¿ç”¨ <code>transform</code> å’Œ <code>opacity</code> å±æ€§å¯ä»¥å‡å°‘æµè§ˆå™¨çš„æ¸²æŸ“è´Ÿæ‹…ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚</p>
<h3 data-id="heading-25">5.2 é¿å…ä½¿ç”¨è¿‡äºå¤æ‚çš„åŠ¨ç”»æ•ˆæœ</h3>
<p>è¿‡äºå¤æ‚çš„åŠ¨ç”»æ•ˆæœä¼šå¢åŠ æµè§ˆå™¨çš„æ¸²æŸ“è´Ÿæ‹…ï¼Œä»è€Œé™ä½æ€§èƒ½ã€‚åº”è¯¥å°½é‡ä½¿ç”¨ç®€å•çš„åŠ¨ç”»æ•ˆæœã€‚</p>
<h3 data-id="heading-26">5.3 åœ¨åŠ¨ç”»ä¸­ä½¿ç”¨ will-change å±æ€§</h3>
<p><code>will-change</code> å±æ€§å¯ä»¥å‘Šè¯‰æµè§ˆå™¨å“ªäº›å±æ€§å°†è¦è¢«æ”¹å˜ï¼Œä»è€Œæå‰è¿›è¡Œä¼˜åŒ–ï¼Œå‡å°‘æ¸²æŸ“è´Ÿæ‹…ã€‚</p>
<h3 data-id="heading-27">5.4 ä½¿ç”¨ requestAnimationFrame() å‡½æ•°æ¥ä¼˜åŒ–åŠ¨ç”»</h3>
<p><code>requestAnimationFrame()</code> å‡½æ•°å¯ä»¥åœ¨æµè§ˆå™¨ä¸‹ä¸€æ¬¡æ¸²æŸ“ä¹‹å‰æ‰§è¡Œä»£ç ï¼Œä»è€Œå‡å°‘æ¸²æŸ“è´Ÿæ‹…ï¼Œæé«˜æ€§èƒ½ã€‚</p>
<h2 data-id="heading-28">6ã€CSS æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–</h2>
<h3 data-id="heading-29">6.1 ä½¿ç”¨ class åˆå¹¶ DOM çš„ä¿®æ”¹</h3>
<p>æ¯”å¦‚æˆ‘ä»¬éœ€è¦æ ¹æ®ä¸åŒæƒ…å†µç»™ä¸€ä¸ªå…ƒç´ æ·»åŠ ä¸åŒçš„æ ·å¼ï¼Œå¯èƒ½ä¼šå†™å‡ºå¦‚ä¸‹çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> el = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.box'</span>);
<span class="hljs-keyword">if</span> (isHover) {
  el.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = <span class="hljs-string">'red'</span>;
  el.<span class="hljs-property">style</span>.<span class="hljs-property">background</span> = <span class="hljs-string">'blue'</span>;
} <span class="hljs-keyword">else</span> {
  el.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = <span class="hljs-string">'blue'</span>;
  el.<span class="hljs-property">style</span>.<span class="hljs-property">background</span> = <span class="hljs-string">'red'</span>;
}
</code></pre>
<p>è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸¤ä¸ª <code>class</code> ç±»ï¼Œç„¶åç›´æ¥åˆ‡æ¢ç±»åå³å¯ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> el = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.box'</span>);
<span class="hljs-keyword">if</span> (isHover) {
  el.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'normal'</span>);
  el.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'hover'</span>);
} <span class="hljs-keyword">else</span> {
  el.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'hover'</span>);
  el.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'normal'</span>);
}
</code></pre>
<h3 data-id="heading-30">6.2 è®© DOM å…ƒç´ è„±ç¦»æ–‡æ¡£æµ</h3>
<p>ä½¿ç”¨ <code>absoulte</code> æˆ–è€… <code>fixed</code> å®šä½è®© DOM å…ƒç´ è„±ç¦»æ–‡æ¡£æµï¼Œè¿™æ ·åœ¨ä¿®æ”¹ DOM å…ƒç´ çš„æ—¶å€™ä¸ä¼šå½±å“åˆ°å…¶ä»– DOM å…ƒç´ çš„å¸ƒå±€ï¼Œä»è€Œæé«˜æ¸²æŸ“æ€§èƒ½ã€‚</p>
<h2 data-id="heading-31">7ã€æ€»ç»“</h2>
<p>æœ¬æ–‡ä¸»è¦é€šè¿‡<strong>CSS åŠ è½½æ€§èƒ½ä¼˜åŒ–</strong>ã€<strong>CSS é€‰æ‹©å™¨æ€§èƒ½ä¼˜åŒ–</strong>ã€<strong>CSS å±æ€§æ€§èƒ½ä¼˜åŒ–</strong>ã€<strong>CSS åŠ¨ç”»æ€§èƒ½ä¼˜åŒ–</strong>å’Œ<strong>CSS æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–</strong>è¿™äº›æ–¹å‘ä»‹ç»äº† CSS çš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§ã€‚é€šè¿‡ä¼˜åŒ– CSS æ€§èƒ½ï¼Œå¯ä»¥æé«˜ç½‘ç«™çš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚</p>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯æ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯å’Œéœ€è¦å»è¿›è¡Œä¼˜åŒ–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[devstackä¸­çš„systemdç®¡ç†ä»‹ç»]]></title>    <link>https://juejin.cn/post/7575182522411679782</link>    <guid>https://juejin.cn/post/7575182522411679782</guid>    <pubDate>2025-11-23T13:07:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575182522411679782" data-draft-id="7575456858426916910" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="devstackä¸­çš„systemdç®¡ç†ä»‹ç»"/> <meta itemprop="keywords" content="OpenStack"/> <meta itemprop="datePublished" content="2025-11-23T13:07:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆé‡Œè°¢é¡¿"/> <meta itemprop="url" content="https://juejin.cn/user/3678304397695056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            devstackä¸­çš„systemdç®¡ç†ä»‹ç»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3678304397695056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆé‡Œè°¢é¡¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T13:07:22.000Z" title="Sun Nov 23 2025 13:07:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç†è§£ <strong>systemd</strong> ä»¥åŠå®ƒåœ¨ <strong>DevStack</strong> ä¸­çš„ä½œç”¨ï¼Œå¯¹äºæŒæ¡ç°ä»£ Linux ç³»ç»Ÿå’Œ OpenStack å¼€å‘ç¯å¢ƒè‡³å…³é‡è¦ã€‚ä¸‹é¢æˆ‘ä»¬å°†ä»åŸºç¡€åˆ°æ·±å…¥ï¼Œç³»ç»Ÿæ€§åœ°è®²è§£ï¼š</p>
<hr/>
<h2 data-id="heading-0">ğŸ§± ä¸€ã€systemd æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p><strong>systemd</strong> æ˜¯ Linux æ“ä½œç³»ç»Ÿä¸­ä¸€ä¸ª<strong>ç°ä»£åŒ–çš„åˆå§‹åŒ–ç³»ç»Ÿï¼ˆinit systemï¼‰å’ŒæœåŠ¡ç®¡ç†å™¨</strong>ï¼Œç”¨äºï¼š</p>
<ul>
<li>å¯åŠ¨æ“ä½œç³»ç»Ÿï¼ˆæ›¿ä»£ä¼ ç»Ÿçš„ SysV init æˆ– Upstartï¼‰</li>
<li>ç®¡ç†ç³»ç»ŸæœåŠ¡ï¼ˆå¯åŠ¨ã€åœæ­¢ã€é‡å¯ã€ç›‘æ§ï¼‰</li>
<li>å¤„ç†è®¾å¤‡æŒ‚è½½ã€æ—¥å¿—ã€å®šæ—¶ä»»åŠ¡ã€ç½‘ç»œé…ç½®ç­‰</li>
</ul>
<blockquote>
<p>ğŸ’¡ ç®€å•è¯´ï¼š<strong>systemd æ˜¯ Linux ç³»ç»Ÿçš„â€œæ€»ç®¡å®¶â€</strong>ï¼Œè´Ÿè´£ä»å¼€æœºåˆ°å…³æœºçš„æ‰€æœ‰æ ¸å¿ƒè¿›ç¨‹ç®¡ç†ã€‚</p>
</blockquote>
<h3 data-id="heading-1">âœ… ä¸»è¦ç‰¹æ€§</h3>

































<table><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>å¹¶è¡Œå¯åŠ¨</strong></td><td>æœåŠ¡å¯å¹¶è¡ŒåŠ è½½ï¼ŒåŠ å¿«å¼€æœºé€Ÿåº¦</td></tr><tr><td><strong>æŒ‰éœ€å¯åŠ¨ï¼ˆsocket activationï¼‰</strong></td><td>æœåŠ¡åœ¨è¢«è®¿é—®æ—¶æ‰å¯åŠ¨ï¼ˆå¦‚ SSHï¼‰</td></tr><tr><td><strong>ä¾èµ–ç®¡ç†</strong></td><td>è‡ªåŠ¨å¤„ç†æœåŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»</td></tr><tr><td><strong>ç»Ÿä¸€æ—¥å¿—ï¼ˆjournaldï¼‰</strong></td><td>æ‰€æœ‰æœåŠ¡æ—¥å¿—é›†ä¸­ç®¡ç†ï¼ˆ<code>journalctl</code>ï¼‰</td></tr><tr><td><strong>èµ„æºæ§åˆ¶ï¼ˆcgroupsï¼‰</strong></td><td>é™åˆ¶ CPUã€å†…å­˜ã€IO ä½¿ç”¨</td></tr><tr><td><strong>æœåŠ¡çŠ¶æ€ç›‘æ§</strong></td><td>è‡ªåŠ¨é‡å¯å´©æºƒçš„æœåŠ¡</td></tr></tbody></table>
<blockquote>
<p>ğŸ“Œ å‡ ä¹æ‰€æœ‰ä¸»æµ Linux å‘è¡Œç‰ˆï¼ˆUbuntu â‰¥16.04, CentOS â‰¥7, Debian â‰¥8ï¼‰é»˜è®¤ä½¿ç”¨ systemdã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-2">ğŸ”§ äºŒã€DevStack æ—©æœŸ vs ç°ä»£ï¼šä¸ºä»€ä¹ˆå¼•å…¥ systemdï¼Ÿ</h2>
<h3 data-id="heading-3">ğŸ•°ï¸ æ—©æœŸ DevStackï¼ˆ2015â€“2021ï¼‰ï¼šä½¿ç”¨ <code>screen</code>/<code>tmux</code></h3>
<ul>
<li>æ‰€æœ‰ OpenStack æœåŠ¡ï¼ˆnova-apiã€keystoneã€neutron-server ç­‰ï¼‰ä»¥<strong>ç‹¬ç«‹è¿›ç¨‹</strong>æ–¹å¼è¿è¡Œ</li>
<li>è¿›ç¨‹ç”± <code>stack.sh</code> è„šæœ¬ç›´æ¥ fork å¯åŠ¨</li>
<li>æ—¥å¿—è¾“å‡ºåˆ° <code>/opt/stack/logs/*.log</code></li>
<li>ä½¿ç”¨ <code>screen -r stack</code> æŸ¥çœ‹å„æœåŠ¡çª—å£</li>
</ul>
<h4 data-id="heading-4">âŒ ç¼ºç‚¹ï¼š</h4>
<ol>
<li><strong>è¿›ç¨‹ç®¡ç†æ··ä¹±</strong>ï¼šæ²¡æœ‰ç»Ÿä¸€çš„å¯åœæœºåˆ¶</li>
<li><strong>å´©æºƒä¸è‡ªåŠ¨æ¢å¤</strong>ï¼šæœåŠ¡æŒ‚äº†ä¸ä¼šè‡ªåŠ¨é‡å¯</li>
<li><strong>æ—¥å¿—åˆ†æ•£</strong>ï¼šéœ€è¦æ‰‹åŠ¨ tail å¤šä¸ªæ–‡ä»¶</li>
<li><strong>æƒé™/ç¯å¢ƒéš”ç¦»å·®</strong>ï¼šæ‰€æœ‰æœåŠ¡ä»¥ <code>stack</code> ç”¨æˆ·è¿è¡Œï¼Œæ—  cgroups éš”ç¦»</li>
<li><strong>ä¸ç¬¦åˆç”Ÿäº§å®è·µ</strong>ï¼šçœŸå®ç”Ÿäº§ç¯å¢ƒéƒ½ç”¨ systemd ç®¡ç†æœåŠ¡</li>
</ol>
<hr/>
<h3 data-id="heading-5">âœ… ç°ä»£ DevStackï¼ˆYoga ç‰ˆæœ¬èµ·ï¼Œé»˜è®¤å¯ç”¨ systemdï¼‰</h3>
<p>ä» <strong>OpenStack Yogaï¼ˆ2022.1ï¼‰</strong> å¼€å§‹ï¼ŒDevStack é»˜è®¤å¯ç”¨ <code>USE_SYSTEMD=True</code>ï¼Œå°†æ¯ä¸ª OpenStack æœåŠ¡æ³¨å†Œä¸º <strong>systemd unit</strong>ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li><code>devstack@keystone.service</code></li>
<li><code>devstack@nova-api.service</code></li>
<li><code>devstack@neutron-server.service</code></li>
</ul>
<h4 data-id="heading-6">âœ… ä¼˜åŠ¿ï¼š</h4>

































<table><thead><tr><th>ä¼˜åŠ¿</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>æ ‡å‡†åŒ–</strong></td><td>ä¸ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ–¹å¼ä¸€è‡´ï¼ˆå¦‚ Kollaã€Charmed OpenStack ä¹Ÿç”¨ systemdï¼‰</td></tr><tr><td><strong>å¥å£®æ€§</strong></td><td>systemd å¯è‡ªåŠ¨é‡å¯å´©æºƒçš„æœåŠ¡ï¼ˆé€šè¿‡ <code>Restart=always</code>ï¼‰</td></tr><tr><td><strong>æ—¥å¿—é›†ä¸­</strong></td><td>ä½¿ç”¨ <code>journalctl</code> ç»Ÿä¸€æŸ¥çœ‹ã€è¿‡æ»¤ã€å¯¼å‡ºæ—¥å¿—</td></tr><tr><td><strong>èµ„æºéš”ç¦»</strong></td><td>å¯é€šè¿‡ systemd é…ç½®é™åˆ¶å†…å­˜/CPUï¼ˆæœªæ¥æ‰©å±•ï¼‰</td></tr><tr><td><strong>ä¾èµ–æ¸…æ™°</strong></td><td>æœåŠ¡å¯åŠ¨é¡ºåºç”± <code>After=</code>ã€<code>Wants=</code> æ˜¾å¼å®šä¹‰</td></tr><tr><td><strong>å¯åœæ–¹ä¾¿</strong></td><td><code>systemctl start/stop devstack@keystone</code></td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ è¿™è®© DevStack ä»â€œå¼€å‘ç©å…·â€å‘â€œè´´è¿‘ç”Ÿäº§â€çš„å¼€å‘ç¯å¢ƒæ¼”è¿›ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-7">ğŸ—ï¸ ä¸‰ã€DevStack å¦‚ä½•ä½¿ç”¨ systemdï¼Ÿ</h2>
<h3 data-id="heading-8">1. <strong>æœåŠ¡å•å…ƒæ–‡ä»¶ç”Ÿæˆ</strong></h3>
<p>å½“ä½ è¿è¡Œ <code>./stack.sh</code> æ—¶ï¼ŒDevStack ä¼šä¸ºæ¯ä¸ªæœåŠ¡åŠ¨æ€ç”Ÿæˆ systemd unit æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># /etc/systemd/system/devstack@keystone.service</span>
<span class="hljs-section">[Unit]</span>
<span class="hljs-attr">Description</span>=Devstack keystone
<span class="hljs-attr">After</span>=network.target mariadb.service rabbitmq-server.service

<span class="hljs-section">[Service]</span>
<span class="hljs-attr">Type</span>=simple
<span class="hljs-attr">User</span>=stack
<span class="hljs-attr">WorkingDirectory</span>=/opt/stack/keystone
<span class="hljs-attr">ExecStart</span>=/opt/stack/keystone/bin/keystone-wsgi-public --port <span class="hljs-number">5000</span>
<span class="hljs-attr">Restart</span>=always
<span class="hljs-attr">RestartSec</span>=<span class="hljs-number">5</span>

<span class="hljs-section">[Install]</span>
<span class="hljs-attr">WantedBy</span>=multi-user.target
</code></pre>
<h3 data-id="heading-9">2. <strong>æœåŠ¡å¯åœæµç¨‹</strong></h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨ Keystone</span>
sudo systemctl start devstack@keystone

<span class="hljs-comment"># åœæ­¢</span>
sudo systemctl stop devstack@keystone

<span class="hljs-comment"># æŸ¥çœ‹çŠ¶æ€</span>
sudo systemctl status devstack@keystone

<span class="hljs-comment"># è®¾ç½®å¼€æœºè‡ªå¯ï¼ˆDevStack ä¸éœ€è¦ï¼Œä½†æœºåˆ¶å­˜åœ¨ï¼‰</span>
sudo systemctl <span class="hljs-built_in">enable</span> devstack@keystone
</code></pre>
<blockquote>
<p>ğŸ” æ³¨æ„ï¼š<code>@</code> ç¬¦å·è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª <strong>æ¨¡æ¿åŒ–æœåŠ¡ï¼ˆinstantiated serviceï¼‰</strong>ï¼Œ<code>keystone</code> æ˜¯å®ä¾‹åã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-10">ğŸ“Š å››ã€systemd vs ä¼ ç»Ÿæ—¥å¿—å¯¹æ¯”ï¼ˆDevStack åœºæ™¯ï¼‰</h2>



































<table><thead><tr><th>åŠŸèƒ½</th><th>ä¼ ç»Ÿæ¨¡å¼ï¼ˆé systemdï¼‰</th><th>systemd æ¨¡å¼</th></tr></thead><tbody><tr><td><strong>æ—¥å¿—ä½ç½®</strong></td><td><code>/opt/stack/logs/keystone.log</code></td><td><code>journalctl -u devstack@keystone</code></td></tr><tr><td><strong>å®æ—¶è·Ÿè¸ª</strong></td><td><code>tail -f keystone.log</code></td><td><code>journalctl -u devstack@keystone -f</code></td></tr><tr><td><strong>æŒ‰æ—¶é—´æŸ¥è¯¢</strong></td><td>éœ€é…åˆ <code>grep</code> + æ—¶é—´æˆ³</td><td><code>--since "1 hour ago"</code></td></tr><tr><td><strong>å¯¼å‡ºæ—¥å¿—</strong></td><td>ç›´æ¥å¤åˆ¶æ–‡ä»¶</td><td><code>journalctl -u ... &gt; keystone.log</code></td></tr><tr><td><strong>å¤šæœåŠ¡å¯¹æ¯”</strong></td><td>éœ€å¼€å¤šä¸ªç»ˆç«¯</td><td><code>journalctl -u devstack@nova-api -u devstack@keystone</code></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-11">âš™ï¸ äº”ã€å¦‚ä½•æ§åˆ¶ DevStack çš„ systemd è¡Œä¸ºï¼Ÿ</h2>
<h3 data-id="heading-12">1. <strong>ç¦ç”¨ systemdï¼ˆå›åˆ°ä¼ ç»Ÿæ¨¡å¼ï¼‰</strong></h3>
<p>ç¼–è¾‘ <code>~/devstack/local.conf</code>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[[local|localrc]]</span>
<span class="hljs-attr">USE_SYSTEMD</span>=<span class="hljs-literal">False</span>
</code></pre>
<p>ç„¶åé‡æ–°éƒ¨ç½²ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">./unstack.sh
./clean.sh
./stack.sh
</code></pre>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼šæ–°ç‰ˆæœ¬ DevStack å¯èƒ½é€æ¸å¼ƒç”¨é systemd æ¨¡å¼ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-13">2. <strong>è°ƒè¯• systemd æœåŠ¡</strong></h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹æœåŠ¡è¯¦ç»†çŠ¶æ€ï¼ˆå«æœ€è¿‘æ—¥å¿—ï¼‰</span>
systemctl status devstack@keystone

<span class="hljs-comment"># æŸ¥çœ‹æœåŠ¡çš„ unit æ–‡ä»¶å†…å®¹</span>
systemctl <span class="hljs-built_in">cat</span> devstack@keystone

<span class="hljs-comment"># é‡æ–°åŠ è½½ systemd é…ç½®ï¼ˆä¿®æ”¹ unit åéœ€è¦ï¼‰</span>
sudo systemctl daemon-reload
</code></pre>
<hr/>
<h3 data-id="heading-14">3. <strong>ä¸´æ—¶è¦†ç›–é…ç½®ï¼ˆæ— éœ€æ”¹ DevStack æºç ï¼‰</strong></h3>
<p>åˆ›å»º override ç›®å½•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo systemctl edit devstack@keystone
</code></pre>
<p>è¾“å…¥è‡ªå®šä¹‰é…ç½®ï¼ˆä¾‹å¦‚å¢åŠ ç¯å¢ƒå˜é‡ï¼‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[Service]</span>
<span class="hljs-attr">Environment</span>=KEYSTONE_DEBUG=<span class="hljs-literal">True</span>
</code></pre>
<p>ä¿å­˜åè‡ªåŠ¨ç”Ÿæ•ˆï¼ˆç›¸å½“äºåˆ›å»ºäº† <code>/etc/systemd/system/devstack@keystone.service.d/override.conf</code>ï¼‰ã€‚</p>
<hr/>
<h2 data-id="heading-15">ğŸŒ å…­ã€ä¸ºä»€ä¹ˆè¿™å¯¹ OpenStack å¼€å‘è€…é‡è¦ï¼Ÿ</h2>
<ol>
<li>
<p><strong>è´´è¿‘çœŸå®ç¯å¢ƒ</strong><br/>
ç”Ÿäº§ OpenStack éƒ¨ç½²ï¼ˆå¦‚ RDOã€Mirantisï¼‰å‡ ä¹éƒ½ç”¨ systemd ç®¡ç†æœåŠ¡ï¼ŒDevStack ä¿æŒä¸€è‡´å¯å‡å°‘â€œåœ¨æˆ‘æœºå™¨ä¸Šèƒ½è·‘â€çš„é—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>æ›´å¥½çš„è°ƒè¯•ä½“éªŒ</strong><br/>
<code>journalctl</code> æ”¯æŒç»“æ„åŒ–æ—¥å¿—ã€æ—¶é—´èŒƒå›´è¿‡æ»¤ã€ä¼˜å…ˆçº§ç­›é€‰ï¼Œæ¯” <code>grep</code> æ—¥å¿—æ–‡ä»¶é«˜æ•ˆå¾—å¤šã€‚</p>
</li>
<li>
<p><strong>æœåŠ¡ç”Ÿå‘½å‘¨æœŸç®¡ç†æ ‡å‡†åŒ–</strong><br/>
ä½ å¯ä»¥ç”¨ç†Ÿæ‚‰çš„ <code>systemctl</code> å‘½ä»¤æ§åˆ¶ä»»ä½• OpenStack æœåŠ¡ï¼Œæ— éœ€è®°å¿† DevStack ç‰¹æœ‰è„šæœ¬ã€‚</p>
</li>
<li>
<p><strong>ä¸ºå®¹å™¨åŒ–è¿‡æ¸¡æ‰“åŸºç¡€</strong><br/>
systemd çš„ cgroups å’Œèµ„æºæ§åˆ¶èƒ½åŠ›ï¼Œæ˜¯æœªæ¥å‘ systemd-nspawn æˆ– Podman è¿ç§»çš„åŸºç¡€ã€‚</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-16">ğŸ“š ä¸ƒã€å¸¸è§å‘½ä»¤é€ŸæŸ¥è¡¨</h2>

































<table><thead><tr><th>åœºæ™¯</th><th>å‘½ä»¤</th></tr></thead><tbody><tr><td>æŸ¥çœ‹æ‰€æœ‰ DevStack æœåŠ¡</td><td><code>systemctl list-units | grep devstack</code></td></tr><tr><td>å®æ—¶è·Ÿè¸ª Keystone æ—¥å¿—</td><td><code>sudo journalctl -u devstack@keystone -f</code></td></tr><tr><td>æŸ¥çœ‹æœ€è¿‘ 50 è¡Œæ—¥å¿—</td><td><code>sudo journalctl -u devstack@keystone -n 50</code></td></tr><tr><td>æŒ‰æ—¶é—´æŸ¥æ—¥å¿—</td><td><code>sudo journalctl -u devstack@keystone --since "2025-11-23 10:00"</code></td></tr><tr><td>é‡å¯ Nova API</td><td><code>sudo systemctl restart devstack@nova-api</code></td></tr><tr><td>æ£€æŸ¥æœåŠ¡æ˜¯å¦å¼€æœºè‡ªå¯</td><td><code>systemctl is-enabled devstack@keystone</code></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-17">âœ… æ€»ç»“</h2>
<blockquote>
<p><strong>systemd æ˜¯ç°ä»£ Linux çš„åŸºçŸ³ï¼ŒDevStack é‡‡ç”¨å®ƒæ˜¯ä¸ºäº†ï¼š</strong></p>
<ul>
<li>âœ… <strong>æ ‡å‡†åŒ–</strong>ï¼šä¸ç”Ÿäº§ç¯å¢ƒå¯¹é½</li>
<li>âœ… <strong>å¥å£®æ€§</strong>ï¼šè‡ªåŠ¨é‡å¯ã€ä¾èµ–ç®¡ç†</li>
<li>âœ… <strong>å¯è§‚æµ‹æ€§</strong>ï¼šé›†ä¸­æ—¥å¿—ï¼ˆjournalctlï¼‰</li>
<li>âœ… <strong>å¯ç»´æŠ¤æ€§</strong>ï¼šç»Ÿä¸€çš„æœåŠ¡æ§åˆ¶æ¥å£</li>
</ul>
</blockquote>
<p>è™½ç„¶åˆæœŸå¯èƒ½éœ€è¦é€‚åº” <code>journalctl</code> è€Œä¸æ˜¯ <code>.log</code> æ–‡ä»¶ï¼Œä½†ä»é•¿è¿œçœ‹ï¼Œè¿™å¤§å¤§æå‡äº†å¼€å‘å’Œè°ƒè¯•æ•ˆç‡ã€‚</p>
<blockquote>
<p>ğŸ’¡ <strong>å»ºè®®</strong>ï¼šæ‹¥æŠ± systemdï¼å­¦ä¹  <code>journalctl</code> çš„é«˜çº§ç”¨æ³•ï¼ˆå¦‚ <code>-o json</code>ã€<code>_PID=</code>ã€<code>PRIORITY=</code>ï¼‰ï¼Œä½ ä¼šçˆ±ä¸Šå®ƒã€‚</p>
</blockquote>
<p>å¦‚æœä½ æ­£åœ¨å¼€å‘ OpenStack æ’ä»¶æˆ–è°ƒè¯•æœåŠ¡å´©æºƒé—®é¢˜ï¼Œsystemd + journald ç»„åˆå°†æ˜¯ä½ æœ€å¼ºå¤§çš„åŠ©æ‰‹ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æç¤ºè¯å·¥ç¨‹æ²¡æ­»ï¼Œåªæ˜¯è—å¾—æ›´æ·±äº†]]></title>    <link>https://juejin.cn/post/7575425466905247807</link>    <guid>https://juejin.cn/post/7575425466905247807</guid>    <pubDate>2025-11-23T13:12:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575425466905247807" data-draft-id="7575458028254838827" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æç¤ºè¯å·¥ç¨‹æ²¡æ­»ï¼Œåªæ˜¯è—å¾—æ›´æ·±äº†"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-23T13:12:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£å“¥æ•°æ™ºè°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3825956195409223"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æç¤ºè¯å·¥ç¨‹æ²¡æ­»ï¼Œåªæ˜¯è—å¾—æ›´æ·±äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3825956195409223/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£å“¥æ•°æ™ºè°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T13:12:26.000Z" title="Sun Nov 23 2025 13:12:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»Šå¤©ç»™å¤§å®¶åˆ†äº«ä¸€ä¸ª AI èµ·åä»â€œå¹³åº¸â€åˆ°â€œæƒŠè‰³â€çš„è¿‡ç¨‹ï¼Œå¹¶èŠèŠ<strong>å°‘æ ·æœ¬æç¤º</strong>çš„ä½¿ç”¨æ„Ÿæ‚Ÿã€‚</p>
<p>äº‹æƒ…æ˜¯è¿™æ ·çš„ï¼Œä¸‹åˆï¼Œæˆ‘åœ¨å®¶é¼“æ£ä¸€ä¸ªå¯ä»¥å¸®æˆ‘æ›´å¥½åœ°ä½¿ç”¨ AI åŠ©æ‰‹çš„å°å·¥å…·ã€‚</p>
<p>å¿½ç„¶å‘ç°è™½ç„¶å·²ç»å¼€å‘æŒºä¹…äº†ï¼Œä½†å´ä¸€ç›´æ²¡æœ‰è®¾è®¡åå­—ï¼Œå°±å«åšâ€œAIåŠ©æ‰‹â€ï¼Œæ²¡æœ‰è¾¨è¯†åº¦ï¼Œä¹Ÿä½“ç°ä¸äº†ç‹¬ç‰¹æ€§ã€‚</p>
<p>ä»Šå¤©æœ‰ç©ºï¼Œå°±å’Œ AI èŠèŠï¼Œè®©å®ƒå¸®æˆ‘èµ·ä¸ªå¥½åå­—ã€‚</p>
<p>ä¸­æ–‡è¯­è¨€ç›¸å…³çš„é—®é¢˜ï¼Œæˆ‘è¿˜æ˜¯æ›´å–œæ¬¢é€šä¹‰çš„è„¾æ€§ï¼Œä»¥ä¸‹å†…å®¹éƒ½æ˜¯ä½¿ç”¨é€šä¹‰å®˜ç½‘å®Œæˆçš„ã€‚</p>
<h2 data-id="heading-0">ç¬¬ä¸€è½®çš„å¯¹è¯</h2>
<p><strong>æŒ‡ä»¤</strong></p>
<pre><code class="hljs">æˆ‘æƒ³è¦å®ç°ä¸€ä¸ªåº”ç”¨ï¼Œè¾…åŠ©å„ç§AIagentçš„ä½¿ç”¨ï¼Œè¯·å¸®æˆ‘è®¾è®¡åº”ç”¨åç§°ï¼Œæƒ³è¦çªå‡ºaiåŠ©æ‰‹çš„åŠ©æ‰‹è¿™ä¸ªç‚¹
</code></pre>
<p><strong>ç»“æœ</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82e742e05fed4442a2bd56dfa1a8ffbd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764508345&amp;x-signature=egIoyjTOXldk3Gdn3RYHZT1fVtU%3D" alt="" loading="lazy"/></p>
<p><strong>å°ç»“</strong></p>
<p>å…ˆä¸è¯´ç»™æˆ‘æä¾›äº†è¿™ä¹ˆå¤šçš„è‹±æ–‡åç§°ï¼Œå°±æœ€åçš„å‡ ä¸ªä¸­æ–‡åç§°ï¼Œæˆ‘æ„Ÿè§‰ä¹Ÿåªèƒ½ç®—æ˜¯æ²¡æœ‰è¯­æ³•é”™è¯¯ã€‚</p>
<h2 data-id="heading-1">æœ‰æ„Ÿæ‚Ÿçš„ç¬¬äºŒè½®å¯¹è¯</h2>
<p>æ¥ä¸‹æ¥å°±æ˜¯æ¯”è¾ƒé‡è¦çš„ç¬¬äºŒè½®å¯¹è¯ã€‚</p>
<p><strong>æŒ‡ä»¤</strong></p>
<pre><code class="hljs">ä¸Šæ¬¡æˆ‘è¦åšçš„ç¢ç‰‡çŸ¥è¯†ç®¡ç†å·¥å…·ï¼Œç»™å‡ºçš„â€œé›†è¤â€ï¼Œå°±éå¸¸æƒŠè‰³ï¼Œè¿™äº›æœ‰äº›æ™®é€š
</code></pre>
<p><strong>ç»“æœ</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22ac81d41df7431b97f783f0c8a74996~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764508345&amp;x-signature=gf6Xud7qh%2Bfpo00cgV1cjcHAXhM%3D" alt="" loading="lazy"/></p>
<p><strong>å°ç»“</strong></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œç»™å‡ºçš„ç»“æœå·²ç»å¼€å§‹ç¬¦åˆæˆ‘çš„é¢„æœŸäº†ï¼Œä½†æ˜¯è¿˜éœ€è¦å†ç¨å¾®è°ƒæ•´ä¸‹ã€‚</p>
<h2 data-id="heading-2">å¾®è°ƒçš„ç¬¬ä¸‰è½®å¯¹è¯</h2>
<p>è¿™ä¸€è½®å¯¹è¯æ²¡æœ‰ç‰¹åˆ«éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œä»…ä»…æ˜¯ä¸ºäº†ä¿æŒè¿‡ç¨‹çš„å®Œæ•´æ€§ï¼Œå¤§å®¶å¯ä»¥ç›´æ¥è·³åˆ°åé¢çš„æ„Ÿæ‚Ÿéƒ¨åˆ†ã€‚</p>
<p><strong>æŒ‡ä»¤</strong></p>
<pre><code class="hljs">è¾…è¾°è¿™æ€è·¯æŒºå¥½ï¼Œä½è°ƒå’Œé«˜è°ƒç»“åˆï¼Œä½†æ˜¯è¾°å’ŒAIç›¸å…³åº¦ä¸æ˜¯ç‰¹åˆ«å¤§ï¼Œ èƒ½å¦å†ä¼˜åŒ–ä¸‹
</code></pre>
<p><strong>ç»“æœ</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35c4830eeaa647d99ae9ff378fa3d510~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764508345&amp;x-signature=1A2Jpf7HMGMMjUyBGQzIEjNf%2BjE%3D" alt="" loading="lazy"/></p>
<p><strong>å°ç»“</strong></p>
<p>æœ€åï¼Œæˆ‘é€‰æ‹©äº†â€œ<strong>è¾…æ›œ</strong>â€ã€‚</p>
<p><strong>æ¯ä¸ª AI éƒ½åœ¨å‘å…‰ï¼Œè€Œæˆ‘å¸®ä½ æ²æµ´å…‰è¾‰</strong>ã€‚</p>
<p>ä¿æŒâ€œè¯—æ„éšå–» + åŠŸèƒ½å†…æ ¸â€çš„é£æ ¼ã€‚</p>
<p>å‘½åå–œå¥½ï¼Œä»è€…è§ä»ï¼Œä½†æœ€åç»“æœæŒºç¬¦åˆæˆ‘å¿ƒæ„çš„ã€‚</p>
<h2 data-id="heading-3">æ„Ÿæ‚Ÿ</h2>
<p>å¤§å®¶å¯ä»¥å¯¹æ¯”ä¸‹ç¬¬äºŒè½®å’Œç¬¬ä¸€è½®çš„å¯¹è¯ï¼Œæ ¸å¿ƒå°±æ˜¯æˆ‘æ‰¾äº†ä¸€ä¸ªå–œæ¬¢çš„<strong>ç¤ºä¾‹</strong>ï¼ˆé›†è¤ï¼‰ï¼ŒåŒæ—¶æŠŠç¤ºä¾‹çš„<strong>èƒŒæ™¯</strong>ï¼ˆç¢ç‰‡çŸ¥è¯†ç®¡ç†å·¥å…·ï¼‰äº¤ä»£æ¸…æ¥šã€‚</p>
<p>è¿™æ ·ï¼ŒAI å°±ä¼šè‡ªåŠ¨åˆ†æ<strong>èƒŒæ™¯çŸ¥è¯†å’Œå–åç»“æœä¹‹é—´çš„æ¨å¯¼æ€è·¯</strong>ï¼Œè¿›è€Œç”Ÿæˆç¬¦åˆæˆ‘é¢„æœŸçš„åç§°ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹å¾ˆåƒæˆ‘ä»¬å°æ—¶å€™ä»ä¸€å †æ•°é‡Œé¢æ‰¾è§„å¾‹ï¼Œç„¶åæ¨å¯¼ä¸‹ä¸€ä¸ªæ•°ï¼Œç°åœ¨çš„ AI å·²ç»å¯ä»¥ä»éå¸¸å¤æ‚ã€é«˜ç»´çš„è§’åº¦æ¨å¯¼å‡ºè§„å¾‹æ¥äº†ã€‚</p>
<p>æˆ‘å€’æ˜¯çŸ¥é“ï¼Œ<strong>ç°åœ¨ AI çš„åº•å±‚æ˜¯ç»Ÿè®¡ã€æ˜¯æ¦‚ç‡ï¼Œä½†è°åˆèƒ½è¯´åªæœ‰äººç±»çš„æ€ç»´æ–¹å¼æ‰æ˜¯â€œæ™ºèƒ½â€å‘¢</strong>ï¼Ÿ</p>
<p>å¦ä¸€ä¸ªæ„Ÿæ‚Ÿçš„ç‚¹æ˜¯å…³äºæç¤ºè¯çš„ã€‚å»å¹´ï¼Œâ€œæç¤ºè¯å·¥ç¨‹â€å¤§ç«ï¼Œä»Šå¹´æ¨¡å‹èƒ½åŠ›å¤§å¹…æå‡åï¼Œå¾ˆå¤šäººè®¤ä¸ºæç¤ºè¯å·¥ç¨‹ä¸é‡è¦äº†ï¼ŒåŒ…æ‹¬æˆ‘ä¹‹å‰ä¹Ÿæ˜¯è¿™æ ·è®¤ä¸ºçš„ã€‚</p>
<p>ä½†ä»Šå¤©ä¸ AI çš„æ²Ÿé€šï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯åº”ç”¨äº†â€œæç¤ºè¯å·¥ç¨‹â€ï¼ˆ<strong>å°‘æ ·æœ¬æç¤º</strong>ï¼‰ï¼Œåªæ˜¯ç”±äºæ¨¡å‹èƒ½åŠ›çš„æå‡ï¼Œå¯ä»¥ä¸åƒå»å¹´é‚£ä¹ˆæ³¨é‡æ ¼å¼ä¸Šçš„è¦æ±‚äº†ã€‚</p>
<h2 data-id="heading-4">ç»“è¯­</h2>
<p>è¿™ä¸¤å¹´ä½¿ç”¨ AI çš„è¿‡ç¨‹ä¸­ï¼Œç§¯ç´¯äº†ä¸å°‘è¿™ç§ä¸èµ·çœ¼ï¼Œä½†å´å¾ˆæœ‰æ•ˆæœçš„å°æŠ€å·§ï¼Œå°±åƒå¾ˆå¤šè¯´ä¸æ¸…åŸç†çš„â€œ<strong>åœŸæ³•å­</strong>â€ä¸€æ ·ï¼Œæˆ‘ä¹Ÿåªæ˜¯ä»è¡¨é¢ç°è±¡ä¸Šè¯•å›¾è§£é‡Šä¸‹ã€‚</p>
<p>ç½‘ä¸Šè¿™ç±»èµ„æ–™ä¸æ˜¯å¾ˆå¤šï¼Œè¿™å‡ å¤©æˆ‘åœ¨æƒ³è¦ä¸è¦æŠŠè¿™ç±»å‹åˆ†äº«å¥½å¥½æ•´ç†ä¸‹ï¼Œå½¢æˆä¸€ä¸ªä½“ç³»åŒ–çš„åˆé›†ã€‚å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢ç•™è¨€å‘Šè¯‰æˆ‘å“ˆ~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥Androidç³»ç»Ÿï¼ˆåä¸‰ï¼‰Androidçš„çª—å£ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7575106644499578914</link>    <guid>https://juejin.cn/post/7575106644499578914</guid>    <pubDate>2025-11-23T13:16:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575106644499578914" data-draft-id="7575363120798466048" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥Androidç³»ç»Ÿï¼ˆåä¸‰ï¼‰Androidçš„çª—å£ç³»ç»Ÿ"/> <meta itemprop="keywords" content="Android,æºç ,è®¾è®¡æ¨¡å¼"/> <meta itemprop="datePublished" content="2025-11-23T13:16:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="apigfly"/> <meta itemprop="url" content="https://juejin.cn/user/2488950054453613"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥Androidç³»ç»Ÿï¼ˆåä¸‰ï¼‰Androidçš„çª—å£ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2488950054453613/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    apigfly
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T13:16:04.000Z" title="Sun Nov 23 2025 13:16:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>Android</code>çš„çª—å£ç³»ç»Ÿç”±<code>WindowManagerService</code>ç®¡ç†ï¼ŒåŒ…æ‹¬å¢åŠ å’Œåˆ é™¤çª—å£ï¼Œç¡®å®šçª—å£çš„å¤§å°å’Œä½ç½®ï¼Œä»¥åŠå®ç°çª—å£åˆ‡æ¢ã€çª—å£åŠ¨ç”»ç­‰åŠŸèƒ½ã€‚<code>WindowManagerService</code>åå­—è¾ƒé•¿ï¼Œåé¢ç®€ç§°<code>WMS</code></p>
<h2 data-id="heading-0">å‰è¨€</h2>
<blockquote>
<p>ä¸€ä¸ªå°é—®é¢˜</p>
</blockquote>
<p>åœ¨ Android ä¸­<code>Activity</code>å¯ä»¥ç†è§£æˆ Android ä¸­çš„ä¸€ä¸ªé¡µé¢ï¼Œå‰é¢çš„ç« èŠ‚æˆ‘ä»¬è¯´ <code>SurfaceFlinger</code> æœ€åä¼šæŠŠ <code>Surface</code> å¯¹åº”çš„ <code>Layer</code> åˆæˆåˆ°å±å¹•ä¸Šã€‚é‚£ä¹ˆ<strong>Activity å’Œ Surface çš„å…³ç³»åˆæ˜¯æ€ä¹ˆå…³è”çš„å‘¢ï¼Ÿ</strong></p>
<p>è®©æˆ‘ä»¬ä¸€èµ·æ’æŸ¥ä¸‹ï½ï½ï½</p>
<h2 data-id="heading-1">åº”ç”¨è¿›ç¨‹å’Œ<code>WMS</code>çš„è”ç³»</h2>
<p>åœ¨å­¦ä¹ <code>WMS</code>ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸‹åº”ç”¨å’Œ<code>WMS</code>ä¹‹é—´çš„è”ç³»ã€‚å¯¹äºåº”ç”¨æ¥è¯´ï¼š</p>
<ul>
<li>
<p><code>Activity</code></p>
<ul>
<li><code>Activity</code>å¹¶ä¸è´Ÿè´£è§†å›¾æ§åˆ¶ï¼Œå®ƒåªæ˜¯æ§åˆ¶ç”Ÿå‘½å‘¨æœŸå’Œå¤„ç†äº‹ä»¶</li>
<li>çœŸæ­£æ§åˆ¶è§†å›¾çš„æ˜¯<code>Window</code>ã€‚ä¸€ä¸ª<code>Activity</code>åŒ…å«äº†ä¸€ä¸ª<code>Window</code>ï¼Œ<code>Window</code>æ‰æ˜¯çœŸæ­£ä»£è¡¨ä¸€ä¸ªçª—å£</li>
<li><code>Activity</code>å°±åƒä¸€ä¸ªæ§åˆ¶å™¨ï¼Œç»Ÿç­¹è§†å›¾çš„æ·»åŠ ä¸æ˜¾ç¤ºï¼Œä»¥åŠé€šè¿‡å…¶ä»–å›è°ƒæ–¹æ³•ï¼Œæ¥ä¸<code>Window</code>ã€ä»¥åŠ<code>View</code>è¿›è¡Œäº¤äº’</li>
</ul>
</li>
<li>
<p><code>Window</code></p>
<ul>
<li><code>Window</code>æ˜¯è§†å›¾çš„æ‰¿è½½å™¨ï¼Œå†…éƒ¨æŒæœ‰ä¸€ä¸ª<code>DecorView</code>ï¼Œè€Œè¿™ä¸ª<code>DecorView</code>æ‰æ˜¯<code>view</code>çš„æ ¹å¸ƒå±€</li>
<li><code>Window</code>æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®é™…åœ¨<code>Activity</code>ä¸­æŒæœ‰çš„æ˜¯å…¶å­ç±»<code>PhoneWindow</code></li>
<li><code>PhoneWindow</code>ä¸­æœ‰ä¸ªå†…éƒ¨ç±»<code>DecorView</code>ï¼Œé€šè¿‡åˆ›å»º<code>DecorView</code>æ¥åŠ è½½<code>Activity</code>ä¸­``ä¼ é€’çš„å¸ƒå±€</li>
<li><code>Window</code>é€šè¿‡<code>WindowManager</code>å°†<code>DecorView</code>åŠ è½½å…¶ä¸­ï¼Œå¹¶å°†<code>DecorView</code>äº¤ç»™<code>ViewRoot</code>ï¼Œè¿›è¡Œè§†å›¾ç»˜åˆ¶ä»¥åŠå…¶ä»–äº¤äº’</li>
</ul>
</li>
<li>
<p><code>ViewRoot</code></p>
<ul>
<li>æ‰€æœ‰<code>View</code>çš„ç»˜åˆ¶ä»¥åŠäº‹ä»¶åˆ†å‘ç­‰äº¤äº’éƒ½æ˜¯é€šè¿‡å®ƒæ¥æ‰§è¡Œæˆ–ä¼ é€’çš„</li>
<li><code>ViewRoot</code>å¯¹åº”çš„å®ç°ç±»æ˜¯<code>ViewRootImpl</code>ç±»ï¼Œå®ƒæ˜¯è¿æ¥<code>WindowManagerService</code>å’Œ<code>DecorView</code>çš„çº½å¸¦</li>
<li><code>View</code>çš„ä¸‰å¤§æµç¨‹ï¼šæµ‹é‡(measure)ã€å¸ƒå±€(layout)ã€ç»˜åˆ¶ (draw))å‡é€šè¿‡<code>ViewRoot</code>æ¥å®Œæˆ</li>
</ul>
</li>
</ul>
<p>é™¤äº†ä¸Šé¢è¿™ä¸‰éƒ¨åˆ†ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯åœ¨<code>Android</code>åº”ç”¨ä¸­å­˜åœ¨çš„ä¸€ä¸ªå”¯ä¸€çš„<code>WindowManagerGlobal</code>å¯¹è±¡ï¼Œå®ƒä»¬çš„ç±»å›¾å…³ç³»å¦‚ä¸‹ï¼š<br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3f91ffc402e497986337eba12df2b94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYXBpZ2ZseQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764508564&amp;x-signature=vkLls2NZ4xOy1Jgqwi5BfD6K2Os%3D" alt="image" loading="lazy"/></p>
<h3 data-id="heading-2">åº”ç”¨ä¸­çš„Windowå¯¹è±¡</h3>
<p>åº”ç”¨ä¸­çš„æ¯ä¸ª<code>Activity</code>å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªç±»å‹ä¸º<code>Window</code>çš„æˆå‘˜å˜é‡<code>mWindow</code>ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Activity</span> {
    ...
    <span class="hljs-keyword">private</span> Window mWindow;
    ...
}
</code></pre>
<p><code>Window</code>å¯¹è±¡åœ¨åº”ç”¨è¿›ç¨‹ä»£è¡¨äº†ä¸€ä¸ªçª—å£ï¼Œè¿™æ˜¯ä¸€å—çŸ©å½¢çš„å›¾åƒç»˜åˆ¶åŒºåŸŸã€‚</p>
<p>ä»<code>WMS</code>çš„è§’åº¦æ¥è¯´ï¼Œå®ƒå¹¶ä¸å…³ç³»åº”ç”¨ä¸­çš„å„ç§<code>View</code>ï¼Œä»–ç®¡ç†å’Œè°ƒåº¦çš„å¯¹è±¡æ˜¯<code>Window</code>ã€‚<code>Activity</code>ä¸­çš„<code>View</code>æ ‘ä¸ç®¡å¤šå¤æ‚ï¼Œæœ€åè¾“å‡ºçš„ä¹Ÿä»…ä»…æ˜¯ä¸€å¼ å„ä¸ª<code>View</code>åˆæˆçš„å›¾åƒè€Œå·²ã€‚</p>
<p><code>Window</code>æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œåœ¨<code>Activity</code>ç±»çš„<code>attach()</code>æ–¹æ³•ä¸­ä¼šå¯¹æˆå‘˜å˜é‡<code>mWindow</code>è¿›è¡Œåˆå§‹åŒ–ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">attach</span><span class="hljs-params">(...)</span> {
        ...
        mWindow = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PhoneWindow</span>(<span class="hljs-built_in">this</span>, window, activityConfigCallback);
        ...
    }
</code></pre>
<p><code>attach()</code>æ–¹æ³•ä¸­<code>mWindow</code>å®ä¾‹åŒ–æˆäº†ä¸€ä¸ª<code>PhoneWindow</code>å¯¹è±¡ã€‚</p>
<p>è€Œå¯¹äº<code>PhoneWindow</code>å¯¹è±¡ï¼Œéœ€è¦æˆ‘ä»¬å…³æ³¨çš„éƒ¨åˆ†æ˜¯å¦‚ä¸‹ä¸¤ä¸ªæˆå‘˜å˜é‡ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PhoneWindow</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Window</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MenuBuilder</span>.Callback {
    <span class="hljs-comment">// This is the top-level view of the window, containing the window decor.</span>
    <span class="hljs-keyword">private</span> DecorView mDecor;
    <span class="hljs-comment">// This is the view in which the window contents are placed. It is either</span>
    <span class="hljs-comment">// mDecor itself, or a child of mDecor where the contents go.</span>
    ViewGroup mContentParent;
    ...
}
</code></pre>
<ul>
<li>
<p><code>mDecor</code>çš„ç±»å‹æ˜¯<code>DecorView</code>ï¼Œå®ƒæ˜¯<code>FrameLayout</code>çš„å­ç±»ï¼Œå®ƒå¯ä»¥è¢«è®¤ä¸ºæ˜¯<code>Android</code>è§†å›¾æ ‘çš„æ ¹èŠ‚ç‚¹è§†å›¾ã€‚</p>
<ul>
<li><code>DecorView</code>ä½œä¸ºé¡¶çº§<code>View</code>ï¼Œå®ƒåŠ è½½çš„èµ„æºæ–‡ä»¶å†…éƒ¨ä¼šåŒ…å«ä¸€ä¸ª<code>android:id="@android:id/content"</code>çš„<code>ViewGroup</code></li>
<li>è¿™ä¸ª<code>ViewGroup</code>ä¾¿æ˜¯åé¢ç”¨æ¥æ·»åŠ <code>setContentView()</code>æ–¹æ³•ä¼ å…¥çš„<code>layout</code>å¸ƒå±€æ–‡ä»¶</li>
<li><code>DecorView</code>å…·ä½“åŠ è½½å“ªç§å¸ƒå±€æ–‡ä»¶å’Œä¸»é¢˜æœ‰å…³ï¼Œè¿™éƒ¨åˆ†åœ¨<code>PhoneWindow</code>çš„<code>generateLayout()</code>æ–¹æ³•ä¸­ä½“ç°</li>
</ul>
</li>
<li>
<p><code>mContentParent</code>çš„ç±»å‹æ˜¯<code>ViewGroup</code>ï¼Œå®ƒå…¶å®å°±æ˜¯<code>android:id="@android:id/content"</code>å¯¹åº”çš„ç»„ä»¶</p>
<ul>
<li>è·Ÿè¸ª<code>generateLayout()</code>æ–¹æ³•å°±ä¼šå‘ç°å¦‚ä¸‹ä»£ç ï¼š</li>
</ul>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-type">ViewGroup</span> <span class="hljs-variable">contentParent</span> <span class="hljs-operator">=</span> (ViewGroup)findViewById(ID_ANDROID_CONTENT);
</code></pre>
<ul>
<li><code>contentParent</code>åˆ›å»ºå®Œæˆåä¾¿ä¼šèµ‹å€¼ç»™<code>mContentParent</code>ï¼Œè€Œæ­¤å¤„çš„<code>ID_ANDROID_CONTENT</code>çš„å®šä¹‰æ˜¯åœ¨<code>Window.java</code>ä¸­</li>
</ul>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">ID_ANDROID_CONTENT</span> <span class="hljs-operator">=</span> com.android.internal.R.id.content;
</code></pre>
</li>
</ul>
<h3 data-id="heading-3">åº”ç”¨ä¸­çš„WindowManagerå¯¹è±¡</h3>
<p>åº”ç”¨ä¸­çš„æ¯ä¸ª<code>Activity</code>å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªç±»å‹ä¸º<code>WindowManager</code>çš„æˆå‘˜å˜é‡<code>mWindowManager</code>ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Activity</span> {
    ...
    <span class="hljs-keyword">private</span> WindowManager mWindowManager;
    ...
}
</code></pre>
<p><code>mWindowManager</code>ç”¨äºå’Œ<code>WMS</code>é€šä¿¡ï¼Œä¸è¿‡<code>WindowManager</code>æ˜¯ä¸€ä¸ªæ¥å£ç±»ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">WindowManager</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ViewManager</span> {...}
</code></pre>
<p><code>mWindowManager</code>ä¹Ÿæ˜¯åœ¨<code>attach()</code>æ–¹æ³•ä¸­è¿›è¡Œçš„åˆå§‹åŒ–ï¼Œç›¸å…³ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">attach</span><span class="hljs-params">(...)</span> {
        ...
        mWindow = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PhoneWindow</span>(<span class="hljs-built_in">this</span>, window, activityConfigCallback);
        ...
        mWindow.setWindowManager(
                (WindowManager)context.getSystemService(Context.WINDOW_SERVICE),
                mToken, mComponent.flattenToString(),
                (info.flags &amp; ActivityInfo.FLAG_HARDWARE_ACCELERATED) != <span class="hljs-number">0</span>);
        ...
        mWindowManager = mWindow.getWindowManager();
        ...
    }
</code></pre>
<p>åœ¨<code>attach()</code>æ–¹æ³•ä¸­ï¼Œå¯¹<code>mWindowManager</code>å˜é‡çš„èµ‹å€¼æ˜¯è°ƒç”¨<code>mWindow</code>çš„<code>getWindowManager()</code>æ–¹æ³•å®Œæˆçš„ã€‚</p>
<p>ä½†æ˜¯åœ¨è¿™ä¹‹å‰ï¼Œ<code>attach()</code>æ–¹æ³•ä¸­è¿˜è°ƒç”¨äº†<code>mWindow</code>å¯¹è±¡çš„<code>setWindowManager()</code>æ–¹æ³•ã€‚å‰é¢æˆ‘ä»¬å·²ç»çŸ¥é“<code>mWindow</code>å¯¹è±¡çš„ç±»å‹æ˜¯<code>PhoneWindow</code>ï¼Œä¸è¿‡è¿™ä¸ª<code>setWindowManager()</code>æ–¹æ³•æ˜¯åœ¨åŸºç±»<code>Window</code>ä¸­å®ç°çš„ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setWindowManager</span><span class="hljs-params">(WindowManager wm, IBinder appToken, String appName,
            <span class="hljs-type">boolean</span> hardwareAccelerated)</span> {
        mAppToken = appToken;
        mAppName = appName;
        mHardwareAccelerated = hardwareAccelerated
                || SystemProperties.getBoolean(PROPERTY_HARDWARE_UI, <span class="hljs-literal">false</span>);
        <span class="hljs-keyword">if</span> (wm == <span class="hljs-literal">null</span>) {
            wm = (WindowManager)mContext.getSystemService(Context.WINDOW_SERVICE);
        }
        mWindowManager = ((WindowManagerImpl)wm).createLocalWindowManager(<span class="hljs-built_in">this</span>);
    }
    <span class="hljs-keyword">public</span> WindowManager <span class="hljs-title function_">getWindowManager</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> mWindowManager;
    }
</code></pre>
<p>åœ¨<code>setWindowManager()</code>æ–¹æ³•ä¸­ï¼Œè°ƒç”¨äº†<code>WindowManagerImpl</code>ç±»çš„<code>createLocalWindowManager()</code>æ–¹æ³•åˆ›å»ºäº†<code>mWindowManager</code>å¯¹è±¡ï¼Œè¿™ä¸ªæ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼š</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> WindowManagerImpl <span class="hljs-title function_">createLocalWindowManager</span><span class="hljs-params">(Window parentWindow)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WindowManagerImpl</span>(mContext, parentWindow);
    }
</code></pre>
<p><code>createLocalWindowManager()</code>æ–¹æ³•ä¸­æ–°åˆ›å»ºäº†ä¸€ä¸ª<code>WindowManagerImpl</code>å¯¹è±¡ï¼Œå› æ­¤ï¼Œæ¯ä¸ª<code>Activity</code>ä¸­çš„<code>mWindowManager</code>å¯¹è±¡å®é™…ä¸Šæ˜¯ä¸€ä¸ª<code>WindowManagerImpl</code>å¯¹è±¡ï¼Œæˆ‘ä»¬å†çœ‹ä¸‹è¿™ä¸ªç±»çš„å®šä¹‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WindowManagerImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">WindowManager</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">WindowManagerGlobal</span> <span class="hljs-variable">mGlobal</span> <span class="hljs-operator">=</span> WindowManagerGlobal.getInstance();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Context mContext;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Window mParentWindow;
    ...
}
</code></pre>
<p>åœ¨<code>WindowManagerImpl</code>ä¸­å®šä¹‰äº†ä¸€ä¸ª<code>mGlobal</code>å˜é‡ï¼Œå®ƒçš„å€¼æ˜¯é€šè¿‡<code>WindowManagerGlobal.getInstance()</code>å¾—åˆ°çš„ï¼Œçœ‹æ ·å­æ˜¯ä¸ªå•ä¾‹æ¨¡å¼ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> WindowManagerGlobal <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">synchronized</span> (WindowManagerGlobal.class) {
            <span class="hljs-keyword">if</span> (sDefaultWindowManager == <span class="hljs-literal">null</span>) {
                sDefaultWindowManager = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WindowManagerGlobal</span>();
            }
            <span class="hljs-keyword">return</span> sDefaultWindowManager;
        }
    }
</code></pre>
<p><code>getInstance()</code>æ–¹æ³•ä¸­åˆ›å»ºäº†ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„<code>WindowManagerGlobal</code>å¯¹è±¡å¹¶ä¿å­˜åˆ°é™æ€å˜é‡<code>sDefaultWindowManager</code>ä¸­</p>
<p>è€Œ<code>WindowManagerImpl</code>ä¸­å„ç§æ–¹æ³•çš„å®ç°åªæ˜¯åœ¨è½¬è°ƒ<code>WindowManagerGlobal</code>ç±»ä¸­çš„æ–¹æ³•ï¼Œç”±æ­¤å¯è§ï¼Œ<strong>ä¸€ä¸ªåº”ç”¨ä¸­æ‰€æœ‰<code>Activity</code>éƒ½æ˜¯é€šè¿‡è¿™ä¸ªè¿›ç¨‹å†…å”¯ä¸€çš„<code>WindowManagerGlobal</code>å¯¹è±¡å’Œ<code>WMS</code>é€šä¿¡</strong></p>
<p><code>WindowManagerGlobal</code>ç±»ä¸­è¿˜æœ‰3ä¸ªé‡è¦çš„æˆå‘˜å˜é‡ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WindowManagerGlobal</span> {
    ...
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ArrayList&lt;View&gt; mViews = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;View&gt;();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ArrayList&lt;ViewRootImpl&gt; mRoots = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;ViewRootImpl&gt;();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ArrayList&lt;WindowManager.LayoutParams&gt; mParams =
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;WindowManager.LayoutParams&gt;();
    ...
}
</code></pre>
<ul>
<li><code>mViews</code>ï¼šä¿å­˜äº†åº”ç”¨ä¸­æ‰€æœ‰é¡¶å±‚<code>View</code>å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯<code>DecorView</code>(ç¨åç»†è®²)</li>
<li><code>mRoots</code>ï¼šä¿å­˜çš„æ˜¯å’Œé¡¶å±‚<code>View</code>å¯¹è±¡å…³è”çš„<code>ViewRootImpl</code>å¯¹è±¡</li>
<li><code>mParams</code>ï¼šä¿å­˜çš„æ˜¯åˆ›å»ºé¡¶å±‚<code>View</code>çš„<code>layout</code>å‚æ•°</li>
</ul>
<h3 data-id="heading-4">å»ºç«‹åº”ç”¨å’ŒWMSçš„è”ç³»</h3>
<p>æˆ‘ä»¬çŸ¥é“åœ¨<code>ActivityThread</code>ä¸­çš„<code>handleResumeActivity()</code>ä¸­ä¼šåˆ›å»º<code>ViewRootImpl</code>å¯¹è±¡å¹¶è¿›è¡Œæ˜¾ç¤ºï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹<code>ViewRootImpl</code>ä¸­å…³é”®çš„å‡ ä¸ªå˜é‡ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewRootImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ViewParent</span>,
        View.AttachInfo.Callbacks, ThreadedRenderer.DrawCallbacks {
    ...
    <span class="hljs-keyword">final</span> IWindowSession mWindowSession;
    ...
    <span class="hljs-keyword">final</span> W mWindow;
    ...
}
</code></pre>
<p>å˜é‡çš„åˆå§‹åŒ–æ˜¯åœ¨æ„é€ æ–¹æ³•ä¸­ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ViewRootImpl</span><span class="hljs-params">(Context context, Display display)</span> {
        mContext = context;
        mWindowSession = WindowManagerGlobal.getWindowSession();
        ...
        mWindow = <span class="hljs-keyword">new</span> <span class="hljs-title class_">W</span>(<span class="hljs-built_in">this</span>);
        ...
    }
</code></pre>
<p>é‡ç‚¹æ˜¯è¿›è¡Œäº†<code>mWindowSession</code>å’Œ<code>mWindow</code>çš„åˆ›å»ºï¼Œæˆ‘ä»¬é€ä¸€çœ‹ä¸‹</p>
<h4 data-id="heading-5">IWindowSessionå¯¹è±¡çš„åˆ›å»º</h4>
<p><code>mWindowSession</code>å˜é‡çš„ç±»å‹æ˜¯<code>IWindowSession</code>ï¼Œå®ƒæ˜¯<code>WMS</code>ä¸­æŸä¸ª<code>Binder</code>å¯¹è±¡çš„å¼•ç”¨å¯¹è±¡ï¼Œ<code>mWindowSession</code>çš„å€¼æ˜¯é€šè¿‡<code>WindowManagerGlobal</code>çš„<code>getWindowSession()</code>æ–¹æ³•è·å¾—çš„ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> IWindowSession <span class="hljs-title function_">getWindowSession</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">synchronized</span> (WindowManagerGlobal.class) {
            <span class="hljs-keyword">if</span> (
            `sWindowSession`== <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-type">InputMethodManager</span> <span class="hljs-variable">imm</span> <span class="hljs-operator">=</span> InputMethodManager.getInstance();
                    <span class="hljs-type">IWindowManager</span> <span class="hljs-variable">windowManager</span> <span class="hljs-operator">=</span> getWindowManagerService();
                    sWindowSession = windowManager.openSession(
                            <span class="hljs-keyword">new</span> <span class="hljs-title class_">IWindowSessionCallback</span>.Stub() {
                                <span class="hljs-meta">@Override</span>
                                <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onAnimatorScaleChanged</span><span class="hljs-params">(<span class="hljs-type">float</span> scale)</span> {
                                    ValueAnimator.setDurationScale(scale);
                                }
                            },
                            imm.getClient(), imm.getInputContext());
                } <span class="hljs-keyword">catch</span> (RemoteException e) {
                    <span class="hljs-keyword">throw</span> e.rethrowFromSystemServer();
                }
            }
            <span class="hljs-keyword">return</span> sWindowSession;
        }
    }
</code></pre>
<p>å¦‚æœ<code>sWindowSession</code>ä¸ºç©ºï¼Œå…ˆè·å–<code>InputMethodManager</code>å¯¹è±¡ï¼Œç„¶åè°ƒç”¨<code>WMS</code>çš„<code>openSession()</code>æ¥å£æ¥è¿›è¡Œåˆ›å»ºï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> IWindowSession <span class="hljs-title function_">openSession</span><span class="hljs-params">(IWindowSessionCallback callback, IInputMethodClient client,
            IInputContext inputContext)</span> {
        <span class="hljs-keyword">if</span> (client == <span class="hljs-literal">null</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"null client"</span>);
        <span class="hljs-keyword">if</span> (inputContext == <span class="hljs-literal">null</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"null inputContext"</span>);
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Session</span>(<span class="hljs-built_in">this</span>, callback, client, inputContext);
        <span class="hljs-keyword">return</span> session;
    }
</code></pre>
<p><code>openSession()</code>ç›´æ¥åˆ›å»ºäº†ä¸€ä¸ª<code>Session</code>å¯¹è±¡ï¼Œè¿™ä¸ª<code>Session</code>ç±»æˆ‘ä»¬<a href="https://juejin.cn/post/6944960866404007944#heading-5" target="_blank" title="https://juejin.cn/post/6944960866404007944#heading-5">å›¾åƒæ˜¾ç¤ºéƒ¨åˆ†</a>ç®€å•ä»‹ç»è¿‡ï¼Œå®ƒæ˜¯ä¸€ä¸ª<code>Binder</code>æœåŠ¡ç±»ï¼Œç®€è¦å®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Session</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IWindowSession</span>.Stub <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IBinder</span>.DeathRecipient {...}
</code></pre>
<p>å¯¹äºç”¨æˆ·è¿›ç¨‹è€Œè¨€ï¼Œè·å–åˆ°çš„ä¾¿æ˜¯è¿™ä¸ª<code>Session</code>å¯¹è±¡çš„<code>Binder</code>å¼•ç”¨å¯¹è±¡ï¼Œå¹¶ä¿å­˜åœ¨äº†<code>WindowManagerGlobal</code>çš„é™æ€å˜é‡<code>sWindowSession</code>ä¸­ã€‚</p>
<p>å› ä¸º<code>WindowManagerGlobal</code>åœ¨è¿›ç¨‹ä¸­å±äºå•ä¾‹çš„å­˜åœ¨ï¼Œå› æ­¤ï¼Œæ‰€æœ‰è°ƒç”¨<code>getWindowSession()</code>æ–¹æ³•è¿”å›çš„éƒ½æ˜¯è¿™ä¸ª<code>sWindowSession</code>å¯¹è±¡</p>
<p>å› æ­¤ï¼Œ<strong>ä¸€ä¸ªç”¨æˆ·è¿›ç¨‹ä¸­çš„æ‰€æœ‰<code>ViewRootImpl</code>å¯¹è±¡ä¸­çš„<code>mWindowSession</code>éƒ½å¼•ç”¨çš„æ˜¯ç›¸åŒçš„å¯¹è±¡</strong>ã€‚è€Œè¿™ä¸ª<code>mWindowSession</code>å¯¹è±¡çš„ä½œç”¨ä¾¿æ˜¯å‘<code>WMS</code>å‘èµ·<code>Window</code>ç›¸å…³çš„<code>Binder</code>è°ƒç”¨</p>
<blockquote>
<p>åº”ç”¨è¿›ç¨‹é€šè¿‡<code>sWindowSession</code>å¯¹è±¡å¯ä»¥è°ƒç”¨åˆ°<code>WMS</code>çš„åŠŸèƒ½æ–¹æ³•äº†ï¼Œé‚£ä¹ˆ<code>WMS</code>æ˜¯å¦‚ä½•é€šçŸ¥æˆ–è€…æ§åˆ¶åº”ç”¨è¿›ç¨‹çš„å‘¢ï¼Ÿ</p>
</blockquote>
<h4 data-id="heading-6">W</h4>
<p>åœ¨<a href="https://juejin.cn/post/6944960866404007944#heading-5" target="_blank" title="https://juejin.cn/post/6944960866404007944#heading-5">å›¾åƒæ˜¾ç¤ºéƒ¨åˆ†</a>å·²ç»ä»‹ç»è¿‡<code>ActivityThread</code>çš„<code>handleResumeActivity()</code>æ–¹æ³•äº†ï¼Œæœ€åä¼šè°ƒç”¨åˆ°<code>WindowManagerGlobal</code>å¯¹è±¡çš„<code>addView()</code>æ–¹æ³•ï¼Œæ–¹æ³•å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addView</span><span class="hljs-params">(View view, ViewGroup.LayoutParams params,
            Display display, Window parentWindow)</span> {
        ...
        ViewRootImpl root;
        <span class="hljs-type">View</span> <span class="hljs-variable">panelParentView</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">synchronized</span> (mLock) {
            ...
            root = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ViewRootImpl</span>(view.getContext(), display);
            view.setLayoutParams(wparams);

            mViews.add(view);
            mRoots.add(root);
            mParams.add(wparams);

            <span class="hljs-keyword">try</span> {
                root.setView(view, wparams, panelParentView);
            }
            ...
        }
    }
</code></pre>
<p><code>addView()</code>æ–¹æ³•ä¸­æœ€é‡è¦çš„æ˜¯åˆ›å»ºäº†<code>ViewRootImpl</code>å¯¹è±¡ï¼Œå¹¶é€šè¿‡<code>setView()</code>æŠŠå®ƒå’Œé¡¶å±‚çš„<code>View</code>å¯¹è±¡å…³è”åœ¨äº†ä¸€èµ·ã€‚<code>setView()</code>æ–¹æ³•ç®€è¦å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setView</span><span class="hljs-params">(View view, WindowManager.LayoutParams attrs, View panelParentView)</span> {
    <span class="hljs-keyword">synchronized</span> (<span class="hljs-built_in">this</span>) {
        <span class="hljs-keyword">if</span> (mView == <span class="hljs-literal">null</span>) {
            mView = view;
            ...
            requestLayout();
            ...
            <span class="hljs-keyword">try</span> {
                mOrigWindowType = mWindowAttributes.type;
                mAttachInfo.mRecomputeGlobalAttributes = <span class="hljs-literal">true</span>;
                collectViewAttributes();
                res = mWindowSession.addToDisplay(mWindow, ...);
            }
            ...
        }
    }
}
</code></pre>
<p><code>setView()</code>æ–¹æ³•æ¯”è¾ƒé•¿ï¼Œæˆ‘ä»¬éœ€è¦å…³æ³¨çš„æ˜¯ï¼š</p>
<ul>
<li>æ–¹æ³•ä¸­å¯¹<code>ViewRootImpl</code>å¯¹è±¡å’Œé¡¶å±‚<code>View</code>ä¹‹é—´çš„å…³è”åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœ<code>mView</code>ä¸ä¸ºç©ºï¼Œä¸ä¼šå†æ¬¡èµ‹å€¼</li>
<li>æ–¹æ³•ä¸­è°ƒç”¨äº†<code>Session</code>çš„<code>addToDisplay()</code>æ–¹æ³•ï¼Œæ›´ä¸ºé‡è¦çš„æ˜¯å‚æ•°<code>mWindow</code></li>
</ul>
<p><code>mWindow</code>çš„ç±»å‹æ˜¯<code>W</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ª<code>ViewRootImpl</code>çš„é™æ€å†…éƒ¨ç±»ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">W</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IWindow</span>.Stub {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> WeakReference&lt;ViewRootImpl&gt; mViewAncestor;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> IWindowSession mWindowSession;
        ...
    }
</code></pre>
<p>å¯ä»¥çœ‹å‡º<code>W</code>æ˜¯ä¸€ä¸ªå®ç°äº†<code>IWindow</code>æ¥å£çš„<code>Binder</code>æœåŠ¡ç±»ï¼Œå¹¶ä¸”åœ¨<code>ViewRootImpl</code>ä¸­é€šè¿‡<code>Session.addToDisplay()</code>æ–¹æ³•å°†<code>W</code>çš„<code>Binder</code>å¼•ç”¨å¯¹è±¡ä¼ é€’ç»™äº†<code>WMS</code></p>
<p>æˆ‘ä»¬çœ‹ä¸‹æºç ä¸­å¯¹<code>IWindow</code>æ¥å£çš„æè¿°ï¼š</p>
<blockquote>
<p>API back to a client window that the Window Manager uses to inform it of interesting things happening.</p>
</blockquote>
<p>å¯ä»¥çœ‹å‡º<code>WMS</code>é€šè¿‡<code>IWindow</code>æ¥å£æ¥é€šçŸ¥åº”ç”¨ï¼Œæ¥ä¸‹æ¥çœ‹ä¸‹<code>WMS</code>ä¸­æ˜¯å¦‚ä½•å¤„ç†è¿™ä¸ªå¯¹è±¡çš„</p>
<p><em><strong>ç§‹åœ°éº»è¢‹ï½ï¼Œè¿˜è®°å¾—æˆ‘ä»¬å‰è¨€ä¸­çš„é—®é¢˜å—ï¼Œå¿«çœ‹<code>setView</code>ä¸­çš„<code>requestLayout</code>æ–¹æ³•</strong></em></p>
<blockquote>
<p>æ˜¯ä¸æ˜¯å‹¾èµ·äº†ä½œä¸ºåº”ç”¨å¼€å‘è€…çš„å›å¿†</p>
</blockquote>
<h4 data-id="heading-7">Surface å’Œ Activity çš„è”ç³»</h4>
<p><code>ViewRootImpl.setView()</code> ä¼šè§¦å‘ <code>requestLayout()</code>ï¼Œæœ€ç»ˆæ‰§è¡Œåˆ°æ ¸å¿ƒæ–¹æ³• <code>performTraversals()</code>ï¼ˆè¿™æ˜¯ View ç»˜åˆ¶ä¸‰å¤§æµç¨‹ Measure/Layout/Draw çš„å…¥å£ï¼‰</p>
<p><code>performTraversals()</code> 800 å¤šè¡Œã€‚ã€‚ã€‚ç®€è¦ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼ªä»£ç é€»è¾‘ ViewRootImpl.java</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">performTraversals</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// ...</span>
    <span class="hljs-comment">// 1. é€šè¿‡ IPC è¯·æ±‚ WindowManagerService (WMS) å¯¹çª—å£è¿›è¡Œå¸ƒå±€</span>
    <span class="hljs-comment">// mSurface æ˜¯ ViewRootImpl çš„æˆå‘˜å˜é‡</span>
    relayoutResult = mWindowSession.relayout(..., mSurface, ...);

    <span class="hljs-comment">// 2. WMS åœ¨åº•å±‚åˆ›å»º SurfaceControlï¼Œå¹¶å°† Native å±‚çš„ Surface ä¿¡æ¯</span>
    <span class="hljs-comment">// å›å†™ï¼ˆCopyï¼‰åˆ° ViewRootImpl çš„ mSurface ä¸­ã€‚</span>
    <span class="hljs-comment">// åé¢ä¼šç»†è®²</span>
    
    <span class="hljs-keyword">if</span> (mSurface.isValid()) {
        <span class="hljs-comment">// Surface æ­¤æ—¶å·²ç»å‡†å¤‡å¥½ï¼Œå¯ä»¥åˆæˆäº†</span>
    }
    <span class="hljs-comment">// ...</span>
    performMeasure(...);
    performLayout(...);
    performDraw(...);
}
</code></pre>
<p>åœ¨ <code>relayout</code> è¿‡ç¨‹ä¸­ï¼Œ<code>WMS</code> ä¼šä¸ <code>SurfaceFlinger</code> é€šä¿¡ï¼Œåˆ†é… <code>Layer</code>ï¼ˆå›¾å±‚ï¼‰ã€‚<code>WMS</code> å°†ç”Ÿæˆçš„ <code>Surface</code> ä¿¡æ¯å¡«å……åˆ° <code>ViewRootImpl</code> ä¼ å…¥çš„ <code>mSurface</code> å‚æ•°ä¸­ã€‚</p>
<blockquote>
<p>è¿™æ ·ï¼Œä¸€ä¸ª Activity å°±å’Œ SurfaceFlinger ä¸­çš„ Surface äº§ç”Ÿäº†å…³è”å•¦ã€‚</p>
</blockquote>
<p><span id="user-content-WMS2APP"/></p>
<h3 data-id="heading-8">WMSä¸­å»ºç«‹å’Œåº”ç”¨çš„å…³ç³»</h3>
<p>å‰é¢æåˆ°<code>ViewRootImpl</code>å¯¹è±¡ä¼šé€šè¿‡<code>addToDisplay()</code>æ–¹æ³•å°†<code>IWindow</code>çš„<code>Binder</code>å¼•ç”¨å¯¹è±¡ä¼ é€’åˆ°<code>WMS</code>ä¸­ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸‹<code>addToDisplay()</code>æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-comment">// æ–¹æ³•å®šä¹‰åœ¨ com.android.server.wm.Session ä¸­</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">addToDisplay</span><span class="hljs-params">(IWindow window, ...)</span> {
        <span class="hljs-comment">// mService çš„ç±»å‹ä¾¿æ˜¯ WindowManagerService</span>
        <span class="hljs-keyword">return</span> mService.addWindow(<span class="hljs-built_in">this</span>, window, ...);
    }
</code></pre>
<p>è°ƒç”¨äº†<code>WMS</code>çš„<code>addWindow()</code>æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">addWindow</span><span class="hljs-params">(Session session, IWindow client, ...)</span> {
    ...
    <span class="hljs-keyword">synchronized</span>(mWindowMap) {
        ...
        <span class="hljs-keyword">if</span> (mWindowMap.containsKey(client.asBinder())) {
            Slog.w(TAG_WM, <span class="hljs-string">"Window "</span> + client + <span class="hljs-string">" is already added"</span>);
            <span class="hljs-keyword">return</span> WindowManagerGlobal.ADD_DUPLICATE_ADD;
        }
        ...
        <span class="hljs-keyword">final</span> <span class="hljs-type">WindowState</span> <span class="hljs-variable">win</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WindowState</span>(<span class="hljs-built_in">this</span>, session, client, token, parentWindow,
                appOp[<span class="hljs-number">0</span>], seq, attrs, viewVisibility, session.mUid,
                session.mCanAddInternalSystemWindow);
        ...
        win.attach();
        mWindowMap.put(client.asBinder(), win);
        win.initAppOpsState();
        ...
    }
    ...
    <span class="hljs-keyword">return</span> res;
}
</code></pre>
<p><code>addWindow()</code>æ–¹æ³•ä»£ç åœ¨200å¤šè¡Œï¼Œæ­¤å¤„æˆ‘ä»¬éœ€è¦å…³æ³¨çš„éƒ¨åˆ†æ˜¯ï¼š</p>
<ul>
<li>åˆ›å»ºäº†<code>WindowState</code>å¯¹è±¡å¹¶æ·»åŠ åˆ°<code>mWindowMap</code>é›†åˆä¸­</li>
<li>è°ƒç”¨<code>WindowState</code>å¯¹è±¡çš„<code>attach()</code>æ–¹æ³•</li>
</ul>
<p><code>WindowState</code>åé¢ä¼šè¯¦ç»†ä»‹ç»ï¼Œæ­¤å¤„çš„å…³é”®å®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/** A window in the window manager. */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">WindowState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">WindowContainer</span>&lt;WindowState&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">WindowManagerPolicy</span>.WindowState {
    ...
    <span class="hljs-keyword">final</span> Context mContext;
    <span class="hljs-keyword">final</span> Session mSession;
    <span class="hljs-keyword">final</span> IWindow mClient;
    ...
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">attach</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (localLOGV) Slog.v(TAG, <span class="hljs-string">"Attaching "</span> + <span class="hljs-built_in">this</span> + <span class="hljs-string">" token="</span> + mToken);
        mSession.windowAddedLocked(mAttrs.packageName);
    }
}
</code></pre>
<ul>
<li><code>mClient</code>æ˜¯åº”ç”¨è¿›ç¨‹ä¸­<code>Binder</code>æœåŠ¡å¯¹è±¡<code>W</code>çš„å¼•ç”¨å¯¹è±¡</li>
<li><code>mSession</code>ä¾¿æ˜¯<code>WMS</code>å¯¹å¤–å°è£…çš„å¯¹è±¡ä¹‹ä¸€ã€‚ä»¥å‰é¢çš„<code>addToDisplay()</code>ä¸ºä¾‹ï¼Œå®é™…ä¸Šåªæ˜¯è½¬è°ƒäº†<code>WMS</code>çš„<code>addWindow()</code>æ–¹æ³•</li>
<li><code>attach()</code>æ–¹æ³•ä¹Ÿåªæ˜¯è°ƒç”¨äº†<code>mSession</code>å¯¹è±¡çš„<code>windowAddedLocked()</code>æ–¹æ³•</li>
</ul>
<p>ç»§ç»­çœ‹ä¸‹<code>windowAddedLocked()</code>æ–¹æ³•:</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">void</span> <span class="hljs-title function_">windowAddedLocked</span><span class="hljs-params">(String packageName)</span> {
        mPackageName = packageName;
        mRelayoutTag = <span class="hljs-string">"relayoutWindow: "</span> + mPackageName;
        <span class="hljs-keyword">if</span> (mSurfaceSession == <span class="hljs-literal">null</span>) {
            mSurfaceSession = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SurfaceSession</span>();
            mService.mSessions.add(<span class="hljs-built_in">this</span>);
            <span class="hljs-keyword">if</span> (mLastReportedAnimatorScale != mService.getCurrentAnimatorScale()) {
                mService.dispatchNewAnimatorScaleLocked(<span class="hljs-built_in">this</span>);
            }
        }
        mNumWindow++;
    }
</code></pre>
<p><code>windowAddedLocked()</code>æ–¹æ³•</p>
<ul>
<li>é¦–å…ˆæ£€æŸ¥äº†<code>mSurfaceSession</code>çš„å€¼ï¼Œå½“ä¸ºç©ºæ—¶æ‰ä¼šåˆ›å»º<code>SurfaceSession</code>å¯¹è±¡
<ul>
<li>å‰é¢<a href="https://juejin.cn/post/6944960866404007944#heading-7" target="_blank" title="https://juejin.cn/post/6944960866404007944#heading-7">å›¾åƒæ˜¾ç¤º</a>éƒ¨åˆ†ä»‹ç»è¿‡ï¼Œ<code>SurfaceSession</code>å¯¹è±¡æ˜¯ç”¨æ¥åˆ›å»º<code>Surface</code>çš„</li>
</ul>
</li>
<li>ç„¶åå°†<code>Session</code>å¯¹è±¡æœ¬èº«æ·»åŠ åˆ°<code>WMS</code>çš„<code>mSessions</code>åˆ—è¡¨ä¸­</li>
</ul>
<p>åˆ°è¿™é‡Œï¼Œåº”ç”¨è¿›ç¨‹å°±å’Œ<code>WMS</code>å„è‡ªæŒæœ‰äº†å¯¹æ–¹çš„<code>Binder</code>å¼•ç”¨å¯¹è±¡ï¼Œå½¢æˆäº†ä¸€ä¸ªåŒå‘<code>Binder</code>é€šé“ï¼Œç¤ºæ„å›¾å¦‚ä¸‹ï¼š<br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c770d89efe34906bf922df504d858aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYXBpZ2ZseQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764508564&amp;x-signature=NaEwJ3G6o3LRkFsTlJKCfHjPwjA%3D" alt="image" loading="lazy"/></p>
<h3 data-id="heading-9">DecorView</h3>
<p>å…³äº<code>DecorView</code>ï¼Œè¿˜æ˜¯è¦ä»æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„åœ°æ–¹è¯´èµ·ã€‚</p>
<p>åœ¨<code>Activity</code>çš„<code>onCreate()</code>ä¸­è°ƒç”¨<code>setContentView()</code>æ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬çœ‹ä¸‹å‘ç”Ÿäº†ä»€ä¹ˆï¼š</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setContentView</span><span class="hljs-params">(<span class="hljs-meta">@LayoutRes</span> <span class="hljs-type">int</span> layoutResID)</span> {
        getWindow().setContentView(layoutResID);
        initWindowDecorActionBar();
    }
</code></pre>
<p><code>Activity</code>çš„<code>onCreate()</code>è°ƒç”¨çš„æ˜¯<code>Window</code>ç±»çš„<code>setContentView()</code>ï¼Œè¿™æ˜¯ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå…·ä½“çš„å®ç°åœ¨<code>PhoneWindow.java</code>ä¸­ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setContentView</span><span class="hljs-params">(View view, ViewGroup.LayoutParams params)</span> {
        <span class="hljs-keyword">if</span> (mContentParent == <span class="hljs-literal">null</span>) {
            installDecor();
        }
        ...
    }
</code></pre>
<p>å¦‚æœ<code>mContentParent</code>å¯¹è±¡è¿˜æ²¡æœ‰åˆ›å»ºå‡ºæ¥ï¼Œåˆ™ä¼šè°ƒç”¨<code>installDecor()</code>æ–¹æ³•ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">installDecor</span><span class="hljs-params">()</span> {
        mForceDecorInstall = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (mDecor == <span class="hljs-literal">null</span>) {
            mDecor = generateDecor(-<span class="hljs-number">1</span>); <span class="hljs-comment">// åˆ›å»º DecorView</span>
            mDecor.setDescendantFocusability(ViewGroup.FOCUS_AFTER_DESCENDANTS);
            mDecor.setIsRootNamespace(<span class="hljs-literal">true</span>);
            <span class="hljs-keyword">if</span> (!mInvalidatePanelMenuPosted &amp;&amp; mInvalidatePanelMenuFeatures != <span class="hljs-number">0</span>) {
                mDecor.postOnAnimation(mInvalidatePanelMenuRunnable);
            }
        } <span class="hljs-keyword">else</span> {
            mDecor.setWindow(<span class="hljs-built_in">this</span>);
        }
        <span class="hljs-keyword">if</span> (mContentParent == <span class="hljs-literal">null</span>) {
            mContentParent = generateLayout(mDecor); <span class="hljs-comment">// ä¸ºDecorViewè®¾ç½®å¸ƒå±€æ ¼å¼ï¼Œå¹¶è¿”å› mContentParent</span>
        }
    }
</code></pre>
<p><code>installDecor()</code>æ–¹æ³•</p>
<ul>
<li>
<p>å…ˆæ ¹æ®æˆå‘˜å˜é‡<code>mDecor</code>æ˜¯å¦ä¸ºç©ºæ¥å†³å®šæ˜¯å¦è¿›è¡Œ<code>DecorView</code>çš„åˆ›å»º</p>
<ul>
<li>å¯¹è±¡çš„åˆ›å»ºæ–¹æ³•ä¸º<code>generateDecor()</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">protected</span> DecorView <span class="hljs-title function_">generateDecor</span><span class="hljs-params">(<span class="hljs-type">int</span> featureId)</span> {
    Context context;
    ... <span class="hljs-comment">// çœç•¥ context çš„åˆ›å»ºè¿‡ç¨‹</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DecorView</span>(context, featureId, <span class="hljs-built_in">this</span>, getAttributes());
}
</code></pre>
</li>
<li>
<p>ç„¶åé€šè¿‡<code>generateLayout()</code>æ–¹æ³•ä¸ºåˆ›å»ºå¥½çš„<code>DecorView</code>è®¾ç½®å¸ƒå±€æ ¼å¼ï¼Œå¹¶è¿”å›<code>mContentParent</code>å¯¹è±¡</p>
</li>
</ul>
<p>æˆ‘ä»¬å†çœ‹ä¸‹<code>DecorView</code>çš„å®šä¹‰</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/** <span class="hljs-doctag">@hide</span> */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DecorView</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">FrameLayout</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">RootViewSurfaceTaker</span>, WindowCallbacks {
    ...
}
</code></pre>
<p>å…¶å®å°±æ˜¯ä¸ªè‡ªå®šä¹‰çš„<code>ViewGroup</code>ï¼Œåªæ˜¯è¿™ä¸ª<code>DecorView</code>åœ¨<code>Android</code>ä¸­ä½œä¸ºé¡¶çº§<code>View</code>å»ä½¿ç”¨</p>
<h2 data-id="heading-10"><code>WindowManagerService</code>æœåŠ¡</h2>
<p><code>WMS</code>æœåŠ¡çš„å¯åŠ¨ï¼Œè¦ä»<code>SystemServer</code>ä¸­çš„<code>startOtherServices()</code>æ–¹æ³•è¯´èµ·ï¼Œå…³é”®ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">startOtherServices</span><span class="hljs-params">()</span> {
    ...
    wm = WindowManagerService.main(..., <span class="hljs-keyword">new</span> <span class="hljs-title class_">PhoneWindowManager</span>());
    ServiceManager.addService(Context.WINDOW_SERVICE, wm, <span class="hljs-comment">/* allowIsolated= */</span> <span class="hljs-literal">false</span>,
            DUMP_FLAG_PRIORITY_CRITICAL | DUMP_FLAG_PROTO);
    ...
}
</code></pre>
<p>çœ‹ä¸‹<code>main()</code>æ–¹æ³•çš„å®šä¹‰ï¼š</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> WindowManagerService <span class="hljs-title function_">main</span><span class="hljs-params">(..., WindowManagerPolicy policy)</span> {
        DisplayThread.getHandler().runWithScissors(() -&gt;
                sInstance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WindowManagerService</span>(context, im, haveInputMethods, showBootMsgs,
                        onlyCore, policy), <span class="hljs-number">0</span>);
        <span class="hljs-keyword">return</span> sInstance;
    }
</code></pre>
<p><code>main()</code>æ–¹æ³•ä¸»è¦æ˜¯åˆå§‹åŒ–äº†<code>WindowManagerService</code>å¯¹è±¡ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯å®ƒçš„æœ€åçš„å‚æ•°<code>WindowManagerPolicy policy</code>ï¼Œå®ƒçš„å…·ä½“çš„å®ç°ç±»æ˜¯<code>PhoneWindowManager</code></p>
<p>å†çœ‹ä¸‹<code>WindowManagerService</code>çš„å…³é”®å®šä¹‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WindowManagerService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IWindowManager</span>.Stub
        <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Watchdog</span>.Monitor, WindowManagerPolicy.WindowManagerFuncs {
    ...
    <span class="hljs-keyword">final</span> ArraySet&lt;Session&gt; mSessions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArraySet</span>&lt;&gt;();
    <span class="hljs-keyword">final</span> <span class="hljs-type">WindowHashMap</span> <span class="hljs-variable">mWindowMap</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WindowHashMap</span>();
    <span class="hljs-keyword">final</span> WindowManagerPolicy mPolicy;
    ...
    <span class="hljs-keyword">private</span> <span class="hljs-title function_">WindowManagerService</span><span class="hljs-params">(..., WindowManagerPolicy policy)</span> {
        ...
        mPolicy = policy;
        ...
    }
}
</code></pre>
<p>å…¶ä¸­çš„å…³é”®æˆå‘˜å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p><code>mSessions</code>ä¸­å‚¨å­˜çš„æ˜¯<code>Session</code>æœåŠ¡ç±»çš„å¯¹è±¡ï¼Œæ¯ä¸ªåº”ç”¨åœ¨<code>WMS</code>ä¸­éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„<code>Session</code>å¯¹è±¡ï¼Œå®ƒä»¬éƒ½ä¿å­˜åœ¨<code>mSessions</code>ä¸­</p>
</li>
<li>
<p><code>mWindowMap</code>ä¸­ç±»å‹æ˜¯<code>WindowHashMap</code>ï¼Œä¿å­˜çš„æ˜¯æ‰€æœ‰çª—å£çš„<code>WindowState</code>å¯¹è±¡ã€‚<code>WindowHashMap</code>å®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">WindowHashMap</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HashMap</span>&lt;IBinder, WindowState&gt; {
}
</code></pre>
<ul>
<li>æ­¤å¤„å¹¶æœªåšä»»ä½•åˆ å‡å“ˆï¼Œæºç ä¸­å°±æ˜¯ç®€å•åœ°ç»§æ‰¿äº†<code>HashMap&lt;IBinder, WindowState&gt;</code></li>
<li><code>WindowState</code>è¡¨ç¤ºä¸€ä¸ªçª—å£çš„æ‰€æœ‰å±æ€§ï¼Œå®ƒä¾¿æ˜¯æ˜¯<code>WMS</code>ä¸­çš„çª—å£ã€‚ç­‰ä¸‹ç»†è®²</li>
</ul>
</li>
<li>
<p><code>mPolicy</code>æ˜¯<code>WMS</code>ä¸­æ‰§è¡Œçª—å£ç®¡ç†ç­–ç•¥çš„å¯¹è±¡ï¼Œç±»å‹æ˜¯<code>WindowManagerPolicy</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¥å£ç±»</p>
<ul>
<li>ä»<code>SystemServer</code>çš„<code>startOtherServices()</code>ä¸­å¯ä»¥çœ‹å‡ºå…·ä½“çš„å®ç°ç±»æ˜¯<code>PhoneWindowManager</code></li>
<li>åœ¨<code>Android</code>ä¸­<code>WMS</code>åªæ˜¯è´Ÿè´£çª—å£ç®¡ç†çš„æ¡†æ¶éƒ¨åˆ†ï¼Œé€šè¿‡<code>ç­–ç•¥æ¨¡å¼</code>å°†æ¡†æ¶å’Œçª—å£å®ç°ç»†èŠ‚è¿›è¡Œäº†åˆ†ç¦»</li>
</ul>
</li>
</ul>
<p>å¯¹æ¯”<code>9.0</code>å’Œ<code>5.0</code>æºç ï¼Œ<code>WMS</code>å…³äºçª—å£éƒ¨åˆ†è®¾è®¡å˜åŒ–å¾ˆå¤§ï¼Œåœ¨äº†è§£<code>Android</code>å¦‚ä½•æ·»åŠ ä¸€ä¸ªçª—å£å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸‹<code>Android</code>ä¸­çª—å£ç±»å‹çš„å®šä¹‰</p>
<h3 data-id="heading-11">çª—å£ç±»å‹</h3>
<p>åœ¨<code>WMS</code>ä¸­å®šä¹‰äº†3ä¸­çª—å£ï¼š<code>åº”ç”¨çª—å£</code>ã€<code>å­çª—å£</code>å’Œ<code>ç³»ç»Ÿçª—å£</code>ï¼Œç›¸å…³çš„å®šä¹‰éƒ½æ˜¯åœ¨<code>frameworks/base/core/java/android/view/WindowManager.java</code>ä¸­ï¼Œç¡®åˆ‡çš„è¯´åº”è¯¥æ˜¯åœ¨<code>WindowManager.LayoutParams</code>ç±»ä¸­å®šä¹‰</p>
<h4 data-id="heading-12">åº”ç”¨çª—å£(<code>application window</code>)</h4>
<p>åº”ç”¨çª—å£æ˜¯<code>Activity</code>ä½¿ç”¨çš„å…¨å±çª—å£ï¼Œ<code>Android</code>å®šä¹‰äº†4ç§ä¸åŒç±»å‹çš„åº”ç”¨çª—å£</p>
<ul>
<li><code>TYPE_BASE_APPLICATION</code>ï¼šåŸºç¡€åº”ç”¨çª—å£ï¼Œåº”ç”¨ä¸­æ‰€æœ‰çª—å£éƒ½ä½äºå®ƒçš„ä¸Šå±‚ã€‚åªèƒ½ç”±ç³»ç»Ÿåˆ›å»º</li>
<li><code>TYPE_APPLICATION</code>ï¼š<code>Activity</code>çš„é¡¶å±‚çª—å£ï¼Œåº”ç”¨ä¸­æœ€å¸¸è§çš„ä¸€ç§</li>
<li><code>TYPE_APPLICATION_STARTING</code>ï¼šåº”ç”¨å¯åŠ¨æ—¶ç”±ç³»ç»Ÿåˆ›å»ºçš„çª—å£ï¼Œæ˜¾ç¤ºä¸€äº›ä¿¡æ¯ï¼Œç›´åˆ°åº”ç”¨åˆ›å»ºçš„çª—å£æ˜¾ç¤ºå‡ºæ¥</li>
<li><code>TYPE_DRAWN_APPLICATION</code>ï¼šç±»ä¼¼äºæ™®é€šçš„<code>TYPE_APPLICATION</code>ï¼Œ<code>WMS</code>é’ˆå¯¹ç±»å‹é¢å¤–å¢åŠ äº†ç­‰å¾…æœºåˆ¶</li>
</ul>
<h4 data-id="heading-13">å­çª—å£(<code>sub-window</code>)</h4>
<p>å­çª—å£æ˜¯æŒ‡ä¾é™„äºåº”ç”¨çª—å£æˆ–ç³»ç»Ÿçª—å£çš„çª—å£ç±»å‹ï¼Œå®ƒä»¬ä¸€èˆ¬éšæ‰€ä¾é™„çš„çª—å£ä¸€èµ·å‡ºç°æˆ–åˆ‡æ¢åˆ°åå°ã€‚<code>Android</code>ä¸­å®šä¹‰äº†6ç§å­çª—å£ç±»å‹</p>
<ul>
<li><code>TYPE_APPLICATION_PANEL</code>ï¼šåº”ç”¨Panelçª—å£ï¼Œæ˜¾ç¤ºåœ¨ä¾é™„çª—å£çš„ä¸Šå±‚</li>
<li><code>TYPE_APPLICATION_MEDIA</code>ï¼šåº”ç”¨Mediaçª—å£ï¼Œé€šå¸¸åŒ…å«ç‹¬ç«‹çš„Surfaceï¼Œæ˜¾ç¤ºåœ¨ä¾é™„çª—å£çš„ä¸‹å±‚</li>
<li><code>TYPE_APPLICATION_SUB_PANEL</code>ï¼šåº”ç”¨å­Panelçª—å£ï¼Œæ˜¾ç¤ºåœ¨ä¾é™„çª—å£å’Œ<code>TYPE_APPLICATION_PANEL</code>çš„ä¸Šå±‚</li>
<li><code>TYPE_APPLICATION_ATTACHED_DIALOG</code>ï¼šå’Œ<code>TYPE_APPLICATION_PANEL</code>ç±»ä¼¼ï¼Œä½†æ˜¯çª—å£çš„å¸ƒå±€æ–¹å¼å’Œ<code>Activity</code>çš„é¡¶å±‚çª—å£ç›¸åŒ</li>
<li><code>TYPE_APPLICATION_MEDIA_OVERLAY</code>ï¼šä¸€ç§æ˜¾ç¤ºåœ¨<code>TYPE_APPLICATION_MEDIA</code>å’Œæ‰€ä¾é™„çª—å£ä¹‹é—´çš„åŠé€æ˜çª—å£ã€‚ä¸€èˆ¬ç”¨æ¥æ˜¾ç¤º<code>Video</code>çš„å­—å¹•æˆ–è€…ç›¸æœºçš„æ“ä½œæç¤ºç•Œé¢</li>
<li><code>TYPE_APPLICATION_ABOVE_SUB_PANEL</code>ï¼šä¸€ç§æ˜¾ç¤ºåœ¨<code>TYPE_APPLICATION_SUB_PANEL</code>ä¹‹ä¸Šçš„çª—å£</li>
</ul>
<h4 data-id="heading-14">ç³»ç»Ÿçª—å£(<code>system window</code>)</h4>
<p>ç³»ç»Ÿçª—å£å¤§éƒ½ç”¨äºç³»ç»Ÿç”Ÿæˆçš„UIä¸­ï¼Œä¸€èˆ¬æ¯”è¾ƒç‹¬ç«‹ï¼Œç§ç±»éå¸¸å¤šï¼Œæˆ‘ä»¬æŒ‘å‡ ä¸ªå¸¸è§çš„çœ‹ä¸‹</p>
<ul>
<li><code>TYPE_STATUS_BAR</code>ï¼šçŠ¶æ€æ çª—å£ï¼Œç³»ç»Ÿä¸­åªèƒ½æœ‰ä¸€ä¸ªï¼Œåœ¨å±å¹•çš„æœ€ä¸Šæ–¹</li>
<li><code>TYPE_SEARCH_BAR</code>ï¼šæœç´¢æ çª—å£ï¼Œç³»ç»Ÿä¸­åªèƒ½æœ‰ä¸€ä¸ªï¼Œåœ¨å±å¹•çš„æœ€ä¸Šæ–¹</li>
<li><code>TYPE_PHONE</code>ï¼šç”µè¯çª—å£ï¼Œæä¾›ç”¨æˆ·ä¸ç”µè¯çš„äº¤äº’ç•Œé¢ï¼Œé€šå¸¸ä½äºæ‰€ç”¨åº”ç”¨çª—å£çš„ä¸Šæ–¹ï¼Œä½†æ˜¯åœ¨çŠ¶æ€æ çš„åé¢</li>
<li><code>TYPE_SYSTEM_ALERT</code>ï¼šç³»ç»Ÿè­¦å‘Šçª—å£ï¼Œä½äºæ‰€ç”¨åº”ç”¨çª—å£çš„ä¸Šæ–¹</li>
<li><code>TYPE_TOAST</code>ï¼šä¸´æ—¶é€šçŸ¥çª—å£ï¼Œæ˜¾ç¤ºä¸€äº›æç¤ºä¿¡æ¯</li>
</ul>
<p>è¿˜æœ‰å¾ˆå¤šå°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ï¼Œ<code>Android</code>å¯¹<code>ç³»ç»Ÿçª—å£</code>çš„å®šä¹‰æœ‰39ç§ä¹‹å¤šï¼Œæºç ä¸­æœ‰ç€è¯¦ç»†çš„æ³¨é‡Šï¼Œå¤§å®¶å¯ä»¥åœ¨<code>WindowManager.java</code>ä¸­æ‰¾åˆ°(<a href="https://link.juejin.cn?target=http%3A%2F%2Fandroidxref.com%2F9.0.0_r3%2Fxref%2Fframeworks%2Fbase%2Fcore%2Fjava%2Fandroid%2Fview%2FWindowManager.java%23697" target="_blank" title="http://androidxref.com/9.0.0_r3/xref/frameworks/base/core/java/android/view/WindowManager.java#697" ref="nofollow noopener noreferrer">ä¼ é€é—¨</a>)</p>
<p><strong>é‚£ä¹ˆ<code>WMS</code>ä¸­æ˜¯æ€ä¹ˆå®šä¹‰çª—å£çš„å‘¢ï¼Ÿ</strong></p>
<h3 data-id="heading-15"><code>WMS</code>ä¸­çª—å£çš„è®¾è®¡</h3>
<blockquote>
<p>å‰é¢è®²è¿‡ï¼ˆ<code>WMS</code>çš„<code>addWindow()</code>æ–¹æ³•ï¼‰ï¼Œå½“å‘<code>WMS</code>æ·»åŠ ä¸€ä¸ªçª—å£æ—¶ï¼Œ<code>WMS</code>ä¼šä¸ºå…¶åˆ›å»ºä¸€ä¸ª<code>WindowState</code>ã€‚å¯¹äº<code>WindowState</code>æ¥è¯´ï¼Œå®ƒåŒ…å«äº†ä¸€ä¸ªçª—å£çš„æ‰€æœ‰å±æ€§ï¼Œæ‰€ä»¥å®ƒæ˜¯<code>WMS</code>ä¸­çœŸæ­£æ„ä¹‰ä¸Šçš„çª—å£</p>
</blockquote>
<p>å…ˆçœ‹ä¸‹<code>WindowState</code>çš„å…³é”®å®šä¹‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/** A window in the window manager. */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">WindowState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">WindowContainer</span>&lt;WindowState&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">WindowManagerPolicy</span>.WindowState {
    ...
    WindowToken mToken;
    AppWindowToken mAppToken;
    ...
    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> mBaseLayer;
    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> mSubLayer;
}
</code></pre>
<p><code>WindowState</code>ç»§æ‰¿äº†<code>WindowContainer</code>ï¼Œåˆæ˜¯å’Œä¹¦ä¸­ä¸ä¸€æ ·çš„åœ°æ–¹</p>
<blockquote>
<p>å¯¹æ¯”5.0æºç ï¼Œå¾ˆæ˜æ˜¾åœ¨<code>Window</code>è¿™éƒ¨åˆ†<code>Android</code>åšäº†é‡æ„ï¼ˆè®¾è®¡æ¨¡å¼çœ‹ä¸Šå»åƒæ˜¯<code>ç»„åˆæ¨¡å¼</code>ï¼‰ï¼Œä¼˜åŒ–äº†ç±»ç»“æ„ï¼ŒæŠ½è±¡å‡ºäº†<code>WindowContainer</code>ç”¨æ¥æ”¯æ’‘èµ·æ•´ä¸ªçª—å£ä½“ç³»</p>
</blockquote>
<p>åŸºäº<code>Android 9.0</code>æºç ï¼Œçª—å£ä½“ç³»çš„å…³ç³»æ¢³ç†å¦‚ä¸‹ï¼š<br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2dcd21f21c44ce48b16279606ba5d73~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYXBpZ2ZseQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764508564&amp;x-signature=ESLkSCnWfFCwab6KKqZzZ5yiLvY%3D" alt="image" loading="lazy"/></p>
<p>ç±»å›¾ä¸­æ¶‰åŠåˆ°çš„ç±»çš„ä¿¡æ¯ä¸‹ï¼š</p>
<ul>
<li>
<p><code>WindowContainer</code></p>
<ul>
<li>æˆå‘˜å˜é‡<code>mChildren</code>çš„ç±»å‹æ˜¯<code>WindowList</code>ï¼Œçœ‹å®ç°å…¶å®å°±æ˜¯<code>ArrayList&lt;WindowState&gt;</code>ã€‚åˆå› ä¸º<code>WindowToken</code>ç»§æ‰¿äº†<code>WindowContainer</code>ï¼Œæ‰€ä»¥è¯¥æˆå‘˜å˜é‡å­ç±»éƒ½ä¼šç»§æ‰¿è¿‡æ¥</li>
<li>æ‰€æœ‰æ‹¥æœ‰ç›¸åŒ<code>Token</code>çš„çª—å£(<code>WindowState</code>)éƒ½ä¼šå­˜æ”¾åœ¨<code>mChildren</code>ä¸­ï¼Œ</li>
</ul>
</li>
<li>
<p><code>WindowToken</code></p>
<ul>
<li>æˆå‘˜å˜é‡<code>token</code>æ˜¯<code>IBinder</code>å¯¹è±¡ï¼Œå…·æœ‰ç³»ç»Ÿå”¯ä¸€æ€§ï¼Œå‘<code>WMS</code>çš„<code>mWindowMap</code>ä¸­æ·»åŠ å¯¹è±¡æ—¶éƒ½æ˜¯ä½¿ç”¨è¿™ä¸ª<code>token</code>å€¼</li>
<li>å®šä¹‰äº†<code>AppWindowToken asAppWindowToken()</code>ï¼Œé»˜è®¤è¿”å›<code>null</code></li>
</ul>
</li>
<li>
<p><code>AppWindowToken</code></p>
<ul>
<li>ç»§æ‰¿è‡ª<code>WindowToken</code>å¹¶é‡å†™äº†<code>AppWindowToken asAppWindowToken()</code>æ–¹æ³•ï¼Œè¿”å›<code>this</code></li>
<li>è¿™æ ·ä¾¿å¯ä»¥é€šè¿‡<code>asAppWindowToken()</code>çš„è¿”å›å€¼åˆ¤æ–­æ˜¯é‚£ç§<code>Token</code></li>
</ul>
</li>
<li>
<p><code>DisplayContent</code></p>
<ul>
<li>ç»§æ‰¿è‡ª<code>WindowContainer</code>ï¼ŒçœŸæ­£æ„ä¹‰ä¸Šçš„å±å¹•ï¼Œ<code>WMS</code>ä¸­ä¸€ä¸ª<code>DisplayContent</code>å®ä¾‹è¡¨ç¤ºä¸€ä¸ªå±å¹•ã€‚å¤šå±å¹•ä¼šå¯¹åº”å¤šä¸ªå®ä¾‹</li>
<li>å†…éƒ¨å®šä¹‰äº†4ç§å­˜æ”¾<code>Window</code>çš„å®¹å™¨ï¼Œéƒ½æ˜¯ç›´æ¥æˆ–é—´æ¥ç»§æ‰¿è‡ª<code>WindowContainer</code>ï¼š
<ul>
<li><code>mTaskStackContainers</code>ï¼šç”¨æ¥ä¿å­˜æ‰€æœ‰çš„åº”ç”¨çª—å£</li>
<li><code>mAboveAppWindowsContainers</code>ï¼šç”¨æ¥ä¿å­˜æ˜¾ç¤ºåœ¨åº”ç”¨çª—å£çš„ä¸Šé¢çš„éåº”ç”¨çª—å£</li>
<li><code>mBelowAppWindowsContainers</code>ï¼šç”¨æ¥ä¿å­˜æ˜¾ç¤ºåœ¨åº”ç”¨çª—å£çš„ä¸‹é¢çš„éåº”ç”¨çª—å£</li>
<li><code>mImeWindowsContainers</code>ï¼šç”¨æ¥ä¿å­˜ IME Window</li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>RootWindowContainer</code></p>
<ul>
<li>ä»£è¡¨<code>WMS</code>ä¸­çª—å£çš„æ ¹å®¹å™¨ï¼Œæ‰€æœ‰<code>DisplayContent</code>çš„å®ä¾‹éƒ½ä¼šæ·»åŠ åˆ°å…¶ä¸­</li>
<li><code>RootWindowContainer</code>åœ¨<code>WMS</code>çš„æ„é€ æ–¹æ³•ä¸­åˆå§‹åŒ–ä¸º<code>mRoot</code>å¯¹è±¡</li>
</ul>
</li>
</ul>
<p>è¿˜æ˜¯å›åˆ°<code>WindowState</code>ï¼Œç±»ä¸­å®šä¹‰äº†ä¸¤ä¸ªå¸¸é‡<code>mBaseLayer</code>å’Œ<code>mSubLayer</code>ï¼Œé€šè¿‡è¿™ä¸¤ä¸ªå¸¸é‡ä¾¿å¯ä»¥ç¡®å®šä¸€ä¸ª<code>Window</code>æ‰€åœ¨çš„å±‚çº§ã€‚è¿™éƒ¨åˆ†å°±ä¸ç»†è®²äº†å“ˆï¼Œæ¶‰åŠç‚¹æœ‰ç‚¹å¤šï¼Œåé¢ç”¨åˆ°å†æ¥è¡¥å……å§ï¼Œå˜»å˜»</p>
<p>æˆ‘ä»¬é‡ç‚¹çœ‹ä¸‹é¢ä¸¤ä¸ªçŸ¥è¯†ç‚¹ï¼š<code>WMS</code>çš„<code>addWindow</code>å’Œ<code>relayoutWindow</code>çš„è®¾è®¡</p>
<h4 data-id="heading-16">addWindowæ–¹æ³•</h4>
<p><code>addWindow()</code>åœ¨<a href="#WMS2APP" title="#WMS2APP">WMSä¸­å»ºç«‹å’Œåº”ç”¨çš„å…³ç³»</a>å·²ç»ä»‹ç»ï¼Œä¸å†èµ˜è¿°</p>
<h4 data-id="heading-17">relayoutWindowæ–¹æ³•</h4>
<p>å‰é¢ä»‹ç»è¿‡ï¼Œåœ¨<code>Activity</code>çš„<code>onResume</code>é˜¶æ®µï¼Œé€šè¿‡<code>ViewRootImpl</code>çš„<code>setView</code>æ–¹æ³•å¼€å§‹æ¸²æŸ“<code>View</code>çš„æµç¨‹ã€‚</p>
<p><code>setView</code>æ–¹æ³•ä¸­ä¼šé€šè¿‡<code>requestLayout()</code>å¼€å§‹æµ‹é‡æ¸²æŸ“ï¼Œè¿™ä¸ªæ–¹æ³•ä¸­æœ‰ä¸€ä¸ªæ ¸å¿ƒçš„é€»è¾‘å°±æ˜¯è°ƒç”¨<code>WMS</code>çš„<code>relayoutWindow()</code>ï¼Œé‡æ–°æµ‹é‡<code>Window</code>ï¼Œç®€è¦æµç¨‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//ViewRootImpl.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">requestLayout</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">if</span> (!mHandlingLayoutInLayoutRequest) {
        ...
        scheduleTraversals();
    }
}
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">performTraversals</span><span class="hljs-params">()</span> {
    ...
    relayoutResult = relayoutWindow(params, viewVisibility, insetsPending);
    ...
}
<span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">relayoutWindow</span><span class="hljs-params">(WindowManager.LayoutParams params, <span class="hljs-type">int</span> viewVisibility,
        <span class="hljs-type">boolean</span> insetsPending)</span> <span class="hljs-keyword">throws</span> RemoteException {
    ...
    <span class="hljs-type">int</span> <span class="hljs-variable">relayoutResult</span> <span class="hljs-operator">=</span> mWindowSession.relayout(mWindow, mSeq, params,
            (<span class="hljs-type">int</span>) (mView.getMeasuredWidth() * appScale + <span class="hljs-number">0.5f</span>),
            (<span class="hljs-type">int</span>) (mView.getMeasuredHeight() * appScale + <span class="hljs-number">0.5f</span>), viewVisibility,
            insetsPending ? WindowManagerGlobal.RELAYOUT_INSETS_PENDING : <span class="hljs-number">0</span>, frameNumber,
            mWinFrame, mPendingOverscanInsets, mPendingContentInsets, mPendingVisibleInsets,
            mPendingStableInsets, mPendingOutsets, mPendingBackDropFrame, mPendingDisplayCutout,
            mPendingMergedConfiguration, mSurface);
    ...
    <span class="hljs-keyword">return</span> relayoutResult;
}
</code></pre>
<p><code>relayoutWindow()</code>é€šè¿‡<code>Session</code>çš„<code>relayout()</code>æ–¹æ³•è°ƒç”¨åˆ°<code>WMS</code>çš„<code>relayoutWindow()</code>æ–¹æ³•</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">relayout</span><span class="hljs-params">(IWindow window, <span class="hljs-type">int</span> seq, ...)</span> {
        ...
        <span class="hljs-type">int</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> mService.relayoutWindow(<span class="hljs-built_in">this</span>, window, seq, attrs,
                requestedWidth, requestedHeight, viewFlags, flags, frameNumber,
                outFrame, outOverscanInsets, outContentInsets, outVisibleInsets,
                outStableInsets, outsets, outBackdropFrame, cutout,
                mergedConfiguration, outSurface);
        ...
        <span class="hljs-keyword">return</span> res;
    }
</code></pre>
<p><code>WMS</code>ä¸­çš„<code>relayoutWindow()</code>ä»£ç æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬ç®€å•çœ‹ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">relayoutWindow</span><span class="hljs-params">(...)</span> {
        ...
        <span class="hljs-keyword">synchronized</span>(mWindowMap) {
            <span class="hljs-comment">// ä» mWindowMap å–å‡ºå¯¹åº”çš„ WindowState å¯¹è±¡</span>
            <span class="hljs-type">WindowState</span> <span class="hljs-variable">win</span> <span class="hljs-operator">=</span> windowForClientLocked(session, client, <span class="hljs-literal">false</span>);
            <span class="hljs-keyword">if</span> (win == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
            }
            displayId = win.getDisplayId();
            ...
            <span class="hljs-comment">// è°ƒç”¨ WindowSurfacePlacer çš„ performSurfacePlacement æ–¹æ³•</span>
            <span class="hljs-comment">// è¿™ä¸ªæ–¹æ³•å…¶å®å°±æ˜¯æ£€æŸ¥æ¸…ç†æ— ç”¨çš„ Surface å¯¹è±¡ï¼Œä¸ºåé¢åˆ›å»º Surface åšå‡†å¤‡</span>
            <span class="hljs-comment">// è¯¦ç»†çš„æ–¹æ³•å°±ä¸è´´å‡ºæ¥äº†ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œé˜…è¯»</span>
            mWindowPlacerLocked.performSurfacePlacement(<span class="hljs-literal">true</span> <span class="hljs-comment">/* force */</span>);
            <span class="hljs-keyword">if</span> (shouldRelayout) {
                result = win.relayoutVisibleWindow(result, attrChanges, oldVisibility);
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-comment">// åˆ›å»º Surface ï¼Œç¡®åˆ‡çš„è¯´åº”è¯¥æ˜¯åˆ›å»º WindowSurfaceController å¯¹è±¡</span>
                    <span class="hljs-comment">// WindowSurfaceController å…¶å®å°±æ˜¯å¯¹ Surface å’Œ SurfaceControl çš„å°è£…</span>
                    <span class="hljs-comment">// Surface å’Œ SurfaceControl çš„å…³ç³»åœ¨åäºŒç« å·²ç»ä»‹ç»å•¦</span>
                    result = createSurfaceControl(outSurface, result, win, winAnimator);
                } 
                ...
            } <span class="hljs-keyword">else</span> {
                ...
            }
            <span class="hljs-keyword">if</span> (focusMayChange) {
                <span class="hljs-comment">// å¦‚æœçª—å£å‘ç”Ÿäº†å˜åŒ–ï¼Œè°ƒç”¨ updateFocusedWindowLocked æ–¹æ³•é‡æ–°æµ‹é‡çª—å£å¤§å°</span>
                <span class="hljs-comment">// è¿™ä¸ªæ–¹æ³•æ‰æ˜¯çœŸæ­£çš„æ ¸å¿ƒæµ‹é‡çª—å£å¤§å°é€»è¾‘</span>
                <span class="hljs-comment">// æ–¹æ³•ä¸­ä¼šè°ƒç”¨ DisplayContent.performLayout æ–¹æ³•å¼€å§‹çœŸæ­£çš„æµ‹é‡</span>
                <span class="hljs-keyword">if</span> (updateFocusedWindowLocked(UPDATE_FOCUS_WILL_PLACE_SURFACES,
                        <span class="hljs-literal">false</span> <span class="hljs-comment">/*updateInputWindows*/</span>)) {
                    imMayMove = <span class="hljs-literal">false</span>;
                }
            }
            ...
            win.mInRelayout = <span class="hljs-literal">false</span>;
        }
        ...
    }
</code></pre>
<p>åœ¨ <code>WMS</code> çš„ <code>relayoutWindow()</code> æ–¹æ³•ä¸­ï¼Œæ ¸å¿ƒé€»è¾‘åœ¨äº <code>createSurfaceControl</code> çš„è°ƒç”¨ã€‚</p>
<pre><code class="hljs language-java" lang="java">result = createSurfaceControl(outSurface, result, win, winAnimator);
</code></pre>
<p>è¿™é‡Œçš„å‚æ•° outSurface è‡³å…³é‡è¦ã€‚å›çœ‹ ViewRootImpl è°ƒç”¨ relayout çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ViewRootImpl.java</span>
mWindowSession.relayout(..., mSurface);
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥æ˜ç¡®çœ‹åˆ°ï¼Œ<code>ViewRootImpl</code> å°†è‡ªå·±çš„æˆå‘˜å˜é‡ mSurface ä¼ é€’ç»™äº† <code>WMS</code>ã€‚ åœ¨ <code>WMS</code> å†…éƒ¨ï¼Œ<code>createSurfaceControl</code> ä¼šè¯·æ±‚ <code>SurfaceFlinger</code> åˆ›å»ºå›¾å±‚ï¼ˆ<code>Layer</code>ï¼‰ï¼Œå¹¶å°†ç”Ÿæˆçš„ <code>Native</code> å±‚ <code>Surface</code> ä¿¡æ¯å›å†™ï¼ˆ<code>Copy</code>ï¼‰åˆ°ä¼ å…¥çš„ <code>outSurface</code> å‚æ•°ä¸­ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼š å½“ <code>relayoutWindow</code> è°ƒç”¨è¿”å›æ—¶ï¼Œåº”ç”¨è¿›ç¨‹ <code>ViewRootImpl</code> ä¸­çš„ <code>mSurface</code> å¯¹è±¡å°±å·²ç»æŒæœ‰äº†çœŸæ­£çš„å›¾å½¢ç¼“å†²åŒºå¼•ç”¨ï¼Œéšååº”ç”¨ä¾¿å¯ä»¥åˆ©ç”¨è¿™ä¸ª <code>Surface</code> è¿›è¡Œç»˜å›¾ã€‚</p>
<blockquote>
<p>æ€ä¹ˆè¯´ï½æ€ä¹ˆè¯´ï½ã€‚å‰è¨€çš„é—®é¢˜æ˜¯ä¸æ˜¯æ˜äº†å•¦</p>
</blockquote>
<h2 data-id="heading-18">æ€»ç»“</h2>
<p>Android çš„çª—å£ç³»ç»Ÿæ˜¯ä¸€ä¸ªå…¸å‹çš„ <code>C/S</code> æ¶æ„ï¼Œç”±åº”ç”¨è¿›ç¨‹ï¼ˆClientï¼‰å’Œ <code>WindowManagerService</code>ï¼ˆServerï¼‰å…±åŒæ„æˆï¼š</p>
<p><strong>åº”ç”¨ç«¯ (Client)</strong></p>
<ul>
<li>
<p><code>Activity</code> è´Ÿè´£ç”Ÿå‘½å‘¨æœŸï¼ŒæŒæœ‰ä¸€ä¸ª <code>PhoneWindow</code> å¯¹è±¡æ¥ç®¡ç†è§†å›¾ç­–ç•¥ã€‚</p>
</li>
<li>
<p><code>DecorView</code> æ˜¯è§†å›¾æ ‘çš„æ ¹èŠ‚ç‚¹ã€‚</p>
</li>
<li>
<p><code>ViewRootImpl</code> æ˜¯æ ¸å¿ƒç®¡ç†è€…ï¼Œå®ƒè¿æ¥äº† DecorView å’Œ <code>WMS</code>ï¼Œå¹¶æŒæœ‰ <code>Surface</code> å¯¹è±¡ï¼Œè´Ÿè´£å‘èµ·ç»˜åˆ¶æµç¨‹ï¼ˆMeasure/Layout/Drawï¼‰ã€‚</p>
</li>
<li>
<p><code>WindowManagerGlobal</code> æ˜¯è¿›ç¨‹å•ä¾‹ï¼Œè´Ÿè´£ç®¡ç†å½“å‰è¿›ç¨‹æ‰€æœ‰çš„ <code>ViewRootImpl</code> å’Œ <code>View</code>ã€‚</p>
</li>
</ul>
<p><strong>é€šä¿¡å±‚ (IPC)</strong></p>
<ul>
<li>
<p><code>IWindowSession</code>ï¼šåº”ç”¨å‘ <code>WMS</code> å‘é€è¯·æ±‚çš„é€šé“ï¼ˆå¦‚ <code>addToDisplay</code>, <code>relayout</code>ï¼‰ã€‚</p>
</li>
<li>
<p><code>IWindow</code> (<code>W</code>ç±»)ï¼š<code>WMS</code> å›è°ƒåº”ç”¨çš„é€šé“ï¼ˆå¦‚çª—å£ç„¦ç‚¹å˜åŒ–ã€é…ç½®æ”¹å˜ï¼‰ã€‚</p>
</li>
</ul>
<p><strong>æœåŠ¡ç«¯ (WMS)</strong></p>
<ul>
<li>
<p><code>WindowState</code>ï¼š<code>WMS</code> ä¸­ä»£è¡¨ä¸€ä¸ªçª—å£çš„å®ä½“ï¼Œä¿å­˜çª—å£çš„æ‰€æœ‰å±æ€§ã€‚</p>
</li>
<li>
<p><code>WindowContainer</code>ï¼šæ„å»ºäº†å±‚çº§åŒ–çš„çª—å£å®¹å™¨ç»“æ„ï¼ˆ<code>DisplayContent</code> -&gt; <code>TaskStack</code> -&gt; <code>WindowState</code>ï¼‰ã€‚</p>
</li>
<li>
<p><code>Surface</code> ç®¡ç†ï¼š<code>WMS</code> åœ¨ <code>relayoutWindow</code> è¿‡ç¨‹ä¸­è®¡ç®—çª—å£å¤§å°ä¸ä½ç½®ï¼Œå¹¶ä¸ <code>SurfaceFlinger</code> é€šä¿¡åˆ›å»º <code>SurfaceControl</code>ï¼Œæœ€ç»ˆå°†å¯ç”¨çš„ <code>Surface</code> è¿”å›ç»™åº”ç”¨ç«¯ã€‚</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[difyæ¡ˆä¾‹åˆ†äº«-å›½å†…é¦–å‘ï¼æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨Difyè°ƒç”¨Nano Banana2AIç”»å›¾]]></title>    <link>https://juejin.cn/post/7575363120798482432</link>    <guid>https://juejin.cn/post/7575363120798482432</guid>    <pubDate>2025-11-23T13:26:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575363120798482432" data-draft-id="7575162322240520192" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="difyæ¡ˆä¾‹åˆ†äº«-å›½å†…é¦–å‘ï¼æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨Difyè°ƒç”¨Nano Banana2AIç”»å›¾"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-23T13:26:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wwwzhouhui"/> <meta itemprop="url" content="https://juejin.cn/user/3428746411400537"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            difyæ¡ˆä¾‹åˆ†äº«-å›½å†…é¦–å‘ï¼æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨Difyè°ƒç”¨Nano Banana2AIç”»å›¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3428746411400537/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wwwzhouhui
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T13:26:22.000Z" title="Sun Nov 23 2025 13:26:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1.å‰è¨€</h2>
<p>åœ¨AIå›¾åƒç”Ÿæˆé¢†åŸŸå¿«é€Ÿå‘å±•çš„ä»Šå¤©,Googleæœ€æ–°æ¨å‡ºçš„Nano Banana Pro(æ­£å¼åç§°:Gemini 3 Pro Image)ä»¥1501çš„Eloåˆ†æ•°ç™»é¡¶LMArenaæ’è¡Œæ¦œç¬¬ä¸€,å®Œç¾æ”¯æŒä¸­æ–‡æ–‡å­—æ¸²æŸ“ã€å¤šå›¾ä¸€è‡´æ€§ã€ç²¾å‡†æ§åˆ¶ç­‰åŠŸèƒ½,æˆä¸ºäº†å›¾åƒç”Ÿæˆé¢†åŸŸçš„ç‹è€…çº§æ¨¡å‹ã€‚ç„¶è€Œå¯¹äºå›½å†…å¼€å‘è€…æ¥è¯´,ç›´æ¥è®¿é—®Gemini APIå­˜åœ¨è¯¸å¤šä¸ä¾¿,è€Œä¸”éœ€è¦ç§‘å­¦ä¸Šç½‘æ‰èƒ½ä½¿ç”¨,è¿™è®©å¾ˆå¤šå°ä¼™ä¼´æœ›è€Œå´æ­¥ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™äº›ç—›ç‚¹,æˆ‘ä»¬å¼€å‘äº†nano_banana2è¿™ä¸ªå¼€æºDifyæ’ä»¶,å®ƒåŸºäºGemini 3 Pro Image Previewæ¨¡å‹,æ”¯æŒåŒAPIæä¾›å•†(Juxin APIå’ŒGemaiå…¬å…±API),ä¸ä»…æä¾›äº†å…è´¹è°ƒç”¨é€‰é¡¹,è¿˜èƒ½é€šè¿‡å›½å†…ç½‘ç»œç›´æ¥è®¿é—®ã€‚é€šè¿‡Difyå¹³å°çš„å¯è§†åŒ–å·¥ä½œæµ,å°ä¼™ä¼´ä»¬åªéœ€ç®€å•ä¸‰ä¸ªèŠ‚ç‚¹,æ— éœ€ç¼–å†™ä»£ç ,å°±èƒ½å¿«é€Ÿæ­å»ºå±äºè‡ªå·±çš„AIå›¾åƒç”ŸæˆæœåŠ¡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/952d95c181da421c9ddb66c2ecde9f03~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764509182&amp;x-signature=rolV1a1h0%2Fug2XnJEoI9oLF11DE%3D" alt="image-20251123175637746" loading="lazy"/></p>
<p>è¿™2å¤©Nano Banana Proéå¸¸ç«çˆ†,ä»Šå¤©æˆ‘ä»¬å°±åœ¨Difyå¹³å°æ‰‹æŠŠæ‰‹æ•™å¤§å®¶éƒ¨ç½²è¿™ä¸ªnano_banana2æ’ä»¶,é€šè¿‡ç®€å•ä¸‰æ­¥é…ç½®,ä½“éªŒå’Œæ„Ÿå—ä¸€ä¸‹è¿™ä¸ªç‹è€…çº§æ¨¡å‹çš„å¼ºå¤§èƒ½åŠ›ã€‚</p>
<hr/>
<h2 data-id="heading-1">2.é¡¹ç›®ä»‹ç»</h2>
<h3 data-id="heading-2">âœ¨ æ ¸å¿ƒç‰¹æ€§</h3>
<p>nano_banana2æ˜¯ä¸€ä¸ªä¸“ä¸ºDifyå¹³å°è®¾è®¡çš„AIå›¾åƒç”Ÿæˆæ’ä»¶,å…·å¤‡ä»¥ä¸‹å¼ºå¤§åŠŸèƒ½:</p>
<ul>
<li><strong>ğŸ¨ å¤šé£æ ¼æ”¯æŒ</strong>: æ”¯æŒçœŸå®ã€åŠ¨æ¼«ã€æ²¹ç”»ã€æ°´å½©ã€ç´ æäº”ç§è‰ºæœ¯é£æ ¼</li>
<li><strong>ğŸ“ å¤šæ¯”ä¾‹ç”Ÿæˆ</strong>: æä¾›1:1ã€16:9ã€9:16ã€4:3ã€3:4ç­‰å¤šç§ç”»å¹…æ¯”ä¾‹</li>
<li><strong>ğŸ”„ æ‰¹é‡ç”Ÿæˆ</strong>: å•æ¬¡è¯·æ±‚å¯ç”Ÿæˆ1-4å¼ å›¾ç‰‡,æå‡åˆ›ä½œæ•ˆç‡</li>
<li><strong>ğŸš« è´Ÿé¢æç¤ºè¯</strong>: æ”¯æŒæ’é™¤ä¸æƒ³è¦çš„å…ƒç´ ,ç²¾å‡†æ§åˆ¶ç”»é¢å†…å®¹</li>
<li><strong>ğŸŒ åŒAPIæ”¯æŒ</strong>: åŒæ—¶æ”¯æŒJuxin API(ä»˜è´¹)å’ŒGemaiå…¬å…±API(å…è´¹)</li>
<li><strong>âš¡ æç®€å·¥ä½œæµ</strong>: ä»…éœ€ä¸‰ä¸ªèŠ‚ç‚¹å³å¯å®Œæˆéƒ¨ç½²,æ–°æ‰‹å‹å¥½</li>
<li><strong>ğŸ“Š å®æ—¶è¿›åº¦åé¦ˆ</strong>: å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œè¿›åº¦æç¤º</li>
<li><strong>ğŸ†“ å¼€æºå…è´¹</strong>: å®Œå…¨å¼€æº,æ”¯æŒæœ¬åœ°éƒ¨ç½²å’ŒäºŒæ¬¡å¼€å‘</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31f85172a6ac442998c102f09eaaff13~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764509182&amp;x-signature=uEU8jt6PNtEQorhdZB%2BN%2BiRneKQ%3D" alt="å·¥ä½œæµæ¼”ç¤º" loading="lazy"/></p>
<h3 data-id="heading-3">ğŸ› ï¸ æŠ€æœ¯æ ˆ</h3>
<h4 data-id="heading-4">Difyæ’ä»¶ç«¯</h4>
<ul>
<li><strong>æ’ä»¶æ¡†æ¶</strong>: Dify Plugin SDK</li>
<li><strong>APIå¯¹æ¥</strong>: Juxin API / Gemai Public API</li>
<li><strong>æ¨¡å‹</strong>: Gemini 3 Pro Image Preview</li>
<li><strong>è¶…æ—¶è®¾ç½®</strong>: 120ç§’è¯·æ±‚è¶…æ—¶</li>
<li><strong>è¾“å‡ºæ ¼å¼</strong>: PNGé«˜æ¸…å›¾ç‰‡</li>
</ul>
<h4 data-id="heading-5">å·¥ä½œæµç«¯</h4>
<ul>
<li><strong>èŠ‚ç‚¹æ•°é‡</strong>: 3ä¸ª(å¼€å§‹ â†’ æ’ä»¶ â†’ å›å¤)</li>
<li><strong>é…ç½®æ–¹å¼</strong>: å¯è§†åŒ–æ‹–æ‹½,é›¶ä»£ç </li>
<li><strong>å‚æ•°é…ç½®</strong>: æ”¯æŒé£æ ¼ã€æ¯”ä¾‹ã€æ•°é‡ç­‰è‡ªå®šä¹‰</li>
</ul>
<h3 data-id="heading-6">ğŸ¯ åº”ç”¨åœºæ™¯</h3>
<p>åŸºäºNano Banana Proçš„28ç§ç»å…¸ç©æ³•,è¯¥æ’ä»¶å¯å¹¿æ³›åº”ç”¨äº:</p>
<ul>
<li><strong>ç”µå•†åœºæ™¯</strong>: èƒŒæ™¯æ›¿æ¢ã€å•†å“å±•ç¤ºã€äº§å“æµ·æŠ¥è®¾è®¡</li>
<li><strong>å¹¿å‘Šåˆ›æ„</strong>: å¤šé¢æ¿è’™å¤ªå¥‡ã€å“ç‰Œlogoæ¤å…¥ã€å®£ä¼ ç‰©æ–™åˆ¶ä½œ</li>
<li><strong>ç¤¾åª’å†…å®¹</strong>: ä¹å®«æ ¼å›¾ã€YouTubeç¼©ç•¥å›¾ã€æœ‹å‹åœˆé…å›¾</li>
<li><strong>åŠ¨æ¼«åˆ›ä½œ</strong>: è¿ç»­æ¼«ç”»ã€è§’è‰²è®¾å®šã€è¡¨æƒ…åŒ…åˆ¶ä½œ</li>
<li><strong>æ•™è‚²ç§‘æ™®</strong>: ä¿¡æ¯å›¾è¡¨ã€æ•™å­¦æ’ç”»ã€çŸ¥è¯†å¯è§†åŒ–</li>
<li><strong>å®ç”¨å˜ç°</strong>: è€ç…§ç‰‡ä¿®å¤ã€ä¸“ä¸šç²¾ä¿®ã€3Dæ¨¡å‹å•†å“åŒ–</li>
</ul>
<h3 data-id="heading-7">ğŸ“Š æˆæœ¬å¯¹æ¯”</h3>

































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>è®¿é—®æ–¹å¼</th><th>æˆæœ¬</th><th>éƒ¨ç½²éš¾åº¦</th><th>å·¥ä½œæµå¤æ‚åº¦</th></tr></thead><tbody><tr><td>å®˜æ–¹Gemini</td><td>éœ€ç§‘å­¦ä¸Šç½‘</td><td>$0.12/å¼ (2K)</td><td>ä¸­ç­‰</td><td>éœ€APIå¼€å‘</td></tr><tr><td>AI Studio</td><td>ä»˜è´¹API</td><td>$0.12/å¼ (2K)</td><td>è¾ƒéš¾</td><td>éœ€APIå¼€å‘</td></tr><tr><td>nano_banana2æ’ä»¶</td><td>å›½å†…ç›´è¿</td><td>å…è´¹(Gemai)æˆ–ä½æˆæœ¬</td><td>ç®€å•</td><td>3èŠ‚ç‚¹å³å¯</td></tr></tbody></table>
<p>é€šè¿‡nano_banana2æ’ä»¶,æˆ‘ä»¬ä¸ä»…è§£å†³äº†å›½å†…è®¿é—®é—®é¢˜,è¿˜é€šè¿‡æç®€å·¥ä½œæµé™ä½äº†éƒ¨ç½²é—¨æ§›,è®©æ™®é€šç”¨æˆ·ä¹Ÿèƒ½è½»æ¾ç”Ÿæˆä¸“ä¸šçº§å›¾åƒã€‚</p>
<hr/>
<h2 data-id="heading-8">3.éƒ¨ç½²å®æˆ˜</h2>
<p>è¯ä¸å¤šè¯´,ä¸‹é¢å¸¦å¤§å®¶ä¸€æ­¥ä¸€æ­¥å®Œæˆæ•´ä¸ªå·¥ä½œæµçš„æ­å»ºã€‚å‘µå‘µä½ ä¼šå‘ç°çœŸçš„è¶…çº§ç®€å•!</p>
<h3 data-id="heading-9">3.1 æ’ä»¶å®‰è£…</h3>
<p>æˆ‘ä»¬é¦–å…ˆéœ€è¦åœ¨Difyå¹³å°å®‰è£…nano_banana2æ’ä»¶ã€‚</p>
<h4 data-id="heading-10">æ–¹æ³•ä¸€: åœ¨çº¿å®‰è£…(æ¨è)</h4>
<p>æ‰“å¼€ä½ çš„Difyå¹³å°,è¿›å…¥"æ’ä»¶ç®¡ç†"é¡µé¢ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1201934d076490495225c3763e736b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764509182&amp;x-signature=%2BpJqjsdr34X15MJzJo8irsLrR0E%3D" alt="æ’ä»¶ç®¡ç†å…¥å£" loading="lazy"/></p>
<p>åœ¨æ’ä»¶å¸‚åœºæœç´¢"Nano Banana2",ç‚¹å‡»å®‰è£…å³å¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b857c66e2154c03af7eeaabbcd24f12~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764509182&amp;x-signature=HKdYh6%2B5uXwYF%2F%2FosEPBJpKerqw%3D" alt="image-20251123203500412" loading="lazy"/></p>
<h4 data-id="heading-11">æ–¹æ³•äºŒ: ç¦»çº¿å®‰è£…</h4>
<p>å¦‚æœæ’ä»¶è¿˜åœ¨å®¡æ ¸ä¸­,å¯ä»¥ä»GitHubä¸‹è½½.difypkgå®‰è£…åŒ…è¿›è¡Œç¦»çº¿å®‰è£…ã€‚</p>
<p>åœ¨æ’ä»¶ç®¡ç†é¡µé¢é€‰æ‹©"æœ¬åœ°æ’ä»¶":</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b4ea72d323940f1b3272474a5d0ddfd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764509182&amp;x-signature=iElhp6uhY0h%2BEuXL1CqjAET3zMU%3D" alt="æœ¬åœ°æ’ä»¶é€‰é¡¹" loading="lazy"/></p>
<p>é€‰æ‹©ä¸‹è½½å¥½çš„nano_banana2v0.0.1.difypkgæ–‡ä»¶ä¸Šä¼ :</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd9d53d4050c4c48929b066816038499~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764509182&amp;x-signature=RA%2FpQ76mxEIzIwZeMbcfW5uLn%2F8%3D" alt="ä¸Šä¼ æ’ä»¶åŒ…" loading="lazy"/></p>
<p>ç‚¹å‡»å®‰è£…åç­‰å¾…å‡ ç§’é’Ÿ,çœ‹åˆ°å®‰è£…æˆåŠŸæç¤º:</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17c9c1cb011742f9b06d69a60b92c303~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764509182&amp;x-signature=2zkc7lcPD8%2FsL4OSNkYsrMZtFqI%3D" alt="å®‰è£…æˆåŠŸ" loading="lazy"/></p>
<p>å¥½å®¶ä¼™,æ’ä»¶å®‰è£…å°±è¿™ä¹ˆç®€å•!</p>
<h3 data-id="heading-12">3.2 æˆæƒé…ç½®</h3>
<p>å®‰è£…æˆåŠŸå,æˆ‘ä»¬éœ€è¦å¯¹æ’ä»¶è¿›è¡Œæˆæƒé…ç½®ã€‚nano_banana2æ”¯æŒä¸¤ç§APIæä¾›å•†:</p>
<h4 data-id="heading-13">Juxin API(ä»˜è´¹,ç¨³å®š)</h4>
<p>è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fapi.juxin.ai" target="_blank" title="https://api.juxin.ai" ref="nofollow noopener noreferrer">api.juxin.ai</a> æ³¨å†Œè´¦å·å¹¶å……å€¼,è·å–API Keyã€‚</p>
<p><strong>ä¼˜åŠ¿</strong>:</p>
<ul>
<li>ç¨³å®šæ€§é«˜,å“åº”é€Ÿåº¦å¿«</li>
<li>æ— é™é¢é™åˆ¶,é€‚åˆæ‰¹é‡ç”Ÿæˆ</li>
<li>æ”¯æŒæ›´é«˜åˆ†è¾¨ç‡</li>
</ul>
<h4 data-id="heading-14">Gemai Public API(å…è´¹,æœ‰é™é¢)</h4>
<p>è®¿é—®ç›¸åº”å¹³å°è·å–å…è´¹API Keyã€‚</p>
<p><strong>ä¼˜åŠ¿</strong>:</p>
<ul>
<li>å®Œå…¨å…è´¹,é€‚åˆæµ‹è¯•å’Œä¸ªäººä½¿ç”¨</li>
<li>æ¯æ—¥æœ‰ä¸€å®šå…è´¹é¢åº¦</li>
<li>å¿«é€Ÿä½“éªŒNano Banana ProåŠŸèƒ½</li>
</ul>
<p>åœ¨æ’ä»¶è®¾ç½®é¡µé¢å¡«å…¥è‡³å°‘ä¸€ä¸ªAPIå¯†é’¥:</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f301de672e6040b08e316533095300d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764509182&amp;x-signature=n94bFAlydl3ASEAoRnJVxqPkEwE%3D" alt="æˆæƒé…ç½®" loading="lazy"/></p>
<p><strong>æ³¨æ„</strong>: ä¸¤ä¸ªAPIå¯ä»¥åŒæ—¶é…ç½®,æ’ä»¶ä¼šæ ¹æ®ä½ åœ¨å·¥ä½œæµä¸­çš„é€‰æ‹©æ¥è°ƒç”¨å¯¹åº”çš„æ¥å£ã€‚å»ºè®®å…ˆé…ç½®å…è´¹çš„Gemai APIè¿›è¡Œæµ‹è¯•,æ»¡æ„åå†ä½¿ç”¨ä»˜è´¹çš„Juxin APIè¿›è¡Œæ‰¹é‡ç”Ÿæˆã€‚</p>
<h3 data-id="heading-15">3.3 å·¥ä½œæµæ­å»º(ä¸‰æ­¥æå®š!)</h3>
<h4 data-id="heading-16">3.3.1 åˆ›å»ºå·¥ä½œæµ</h4>
<p>åœ¨Difyå¹³å°åˆ›å»ºä¸€ä¸ªæ–°çš„"èŠå¤©åŠ©æ‰‹"å·¥ä½œæµã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f4f9a0435874c7ca7c5b55b6370a564~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764509182&amp;x-signature=Zby%2BTpBqHAfx4w6rkHtywntxwbU%3D" alt="image-20251123203228715" loading="lazy"/></p>
<h4 data-id="heading-17">3.3.2 ç¬¬ä¸€æ­¥: å¼€å§‹èŠ‚ç‚¹(é»˜è®¤å³å¯)</h4>
<p>å¼€å§‹èŠ‚ç‚¹ä¼šè‡ªåŠ¨åˆ›å»º,å®ƒä¼šæ¥æ”¶ç”¨æˆ·çš„è¾“å…¥æ–‡æœ¬ä½œä¸ºæç¤ºè¯ã€‚</p>
<p><strong>é»˜è®¤é…ç½®</strong>:</p>
<ul>
<li>è¾“å…¥å˜é‡: <code>{{#sys.query#}}</code> (ç³»ç»Ÿè‡ªåŠ¨æ•è·ç”¨æˆ·è¾“å…¥)</li>
<li>æ— éœ€æ‰‹åŠ¨é…ç½®ä»»ä½•å‚æ•°</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d99d424a73174aeaafebe3ef140ede6c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764509182&amp;x-signature=BcYpPYle38ZcrnO7bOPpwvk4kf0%3D" alt="image-20251123202939998" loading="lazy"/></p>
<h4 data-id="heading-18">3.3.3 ç¬¬äºŒæ­¥: æ·»åŠ Nano Banana2æ’ä»¶</h4>
<p>ä»æ’ä»¶åˆ—è¡¨ä¸­æ‰¾åˆ°åˆšæ‰å®‰è£…çš„"Nano Banana2 æ–‡ç”Ÿå›¾"æ’ä»¶,æ‹–å…¥å·¥ä½œæµç”»å¸ƒ:</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80ab41169cda4c559bbc79674fab296a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764509182&amp;x-signature=MCEzimxipl1zwkI2JHj0YPZ5T7U%3D" alt="æ·»åŠ æ’ä»¶" loading="lazy"/></p>
<p><strong>é…ç½®æ’ä»¶å‚æ•°</strong>:</p>
<h5 data-id="heading-19">å¿…å¡«å‚æ•°</h5>
<p><strong>1) å›¾åƒæç¤ºè¯ (prompt)</strong></p>
<ul>
<li>å¡«å…¥: <code>{{#sys.query#}}</code> (ä½¿ç”¨ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬)</li>
<li>è¯´æ˜: è¿™æ˜¯ç”Ÿæˆå›¾åƒçš„æ ¸å¿ƒæè¿°,æ”¯æŒä¸­è‹±æ–‡</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6ff3b4d5056495b909142c225466c41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764509182&amp;x-signature=IVf%2Br999IrKTqSXsU7WTP2fSBPU%3D" alt="image-20251123202911778" loading="lazy"/></p>
<h5 data-id="heading-20">å¯é€‰å‚æ•°(æ ¹æ®éœ€æ±‚é…ç½®)</h5>
<p><strong>2) è´Ÿå‘æç¤ºè¯ (negative_prompt)</strong> - å¯é€‰</p>
<ul>
<li>ç¤ºä¾‹: <code>blurry, low quality, distorted, ugly</code></li>
<li>è¯´æ˜: æè¿°ä¸æƒ³åœ¨å›¾åƒä¸­å‡ºç°çš„å†…å®¹</li>
</ul>
<p><strong>3) å›¾åƒæ•°é‡ (num_images)</strong> - é»˜è®¤1</p>
<ul>
<li>èŒƒå›´: 1-4å¼ </li>
<li>è¯´æ˜: æ‰¹é‡ç”Ÿæˆå¤šå¼ å›¾ç‰‡ä¾›é€‰æ‹©</li>
</ul>
<p><strong>4) åˆ›é€ åŠ›å‚æ•° (temperature)</strong> - é»˜è®¤0.7</p>
<ul>
<li>èŒƒå›´: 0.0-1.0</li>
<li>è¯´æ˜: æ•°å€¼è¶Šé«˜ç»“æœè¶Šæœ‰åˆ›æ„,è¶Šä½è¶Šç¬¦åˆæç¤ºè¯</li>
</ul>
<p><strong>5) å®½é«˜æ¯” (aspect_ratio)</strong> - å¯é€‰</p>
<ul>
<li>é€‰é¡¹: 1:1(æ­£æ–¹å½¢)ã€16:9(æ¨ªå±)ã€9:16(ç«–å±)ã€4:3(æ ‡å‡†)ã€3:4(çºµå‘æ ‡å‡†)</li>
<li>è¯´æ˜: æ ¹æ®ä½¿ç”¨åœºæ™¯é€‰æ‹©åˆé€‚çš„æ¯”ä¾‹</li>
</ul>
<p><strong>6) é£æ ¼ (style)</strong> - å¯é€‰</p>
<ul>
<li>é€‰é¡¹: realistic(å†™å®)ã€anime(åŠ¨æ¼«)ã€oil-painting(æ²¹ç”»)ã€watercolor(æ°´å½©)ã€sketch(ç´ æ)</li>
<li>è¯´æ˜: ä¸åŒé£æ ¼äº§ç”Ÿä¸åŒè‰ºæœ¯æ•ˆæœ</li>
</ul>
<p><strong>7) APIæä¾›å•† (api_provider)</strong> - å¿…é€‰</p>
<ul>
<li>é€‰é¡¹: <code>gemai</code>(å…è´¹) æˆ– <code>juxin</code>(ä»˜è´¹)</li>
<li>è¯´æ˜: é€‰æ‹©ä½ å·²æˆæƒçš„APIæœåŠ¡å•†</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba01d3b6394d48a2ba7a9625897873df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764509182&amp;x-signature=wu9Dpx%2FHu6c%2Bf5HfGe%2FsvBShcfo%3D" alt="image-20251123202853602" loading="lazy"/></p>
<p><strong>æ¨èé…ç½®ç¤ºä¾‹</strong>:</p>
<p><strong>åŠ¨æ¼«é£æ ¼é…ç½®</strong>:</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">prompt:</span> {{<span class="hljs-comment">#sys.query#}}</span>
<span class="hljs-attr">api_provider:</span> <span class="hljs-string">gemai</span>
<span class="hljs-attr">aspect_ratio:</span> <span class="hljs-number">16</span><span class="hljs-string">:9</span>
<span class="hljs-attr">style:</span> <span class="hljs-string">anime</span>
<span class="hljs-attr">num_images:</span> <span class="hljs-number">1</span>
<span class="hljs-attr">temperature:</span> <span class="hljs-number">0.7</span>
</code></pre>
<p><strong>å†™å®æ‘„å½±é…ç½®</strong>:</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">prompt:</span> {{<span class="hljs-comment">#sys.query#}}</span>
<span class="hljs-attr">api_provider:</span> <span class="hljs-string">gemai</span>
<span class="hljs-attr">aspect_ratio:</span> <span class="hljs-number">4</span><span class="hljs-string">:3</span>
<span class="hljs-attr">style:</span> <span class="hljs-string">realistic</span>
<span class="hljs-attr">num_images:</span> <span class="hljs-number">1</span>
<span class="hljs-attr">temperature:</span> <span class="hljs-number">0.5</span>
<span class="hljs-attr">negative_prompt:</span> <span class="hljs-string">blurry</span>, <span class="hljs-string">low</span> <span class="hljs-string">quality</span>, <span class="hljs-string">cartoon</span>
</code></pre>
<h4 data-id="heading-21">3.3.4 ç¬¬ä¸‰æ­¥: æ·»åŠ ç›´æ¥å›å¤èŠ‚ç‚¹</h4>
<p>æ·»åŠ "ç›´æ¥å›å¤"èŠ‚ç‚¹,å°†æ’ä»¶ç”Ÿæˆçš„å›¾ç‰‡è¾“å‡ºç»™ç”¨æˆ·:</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e81940bddc7042af9273355c206dd437~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764509182&amp;x-signature=VmqvWKnjkCsBRx5gVb1XRwIFbo0%3D" alt="ç›´æ¥å›å¤èŠ‚ç‚¹" loading="lazy"/></p>
<p><strong>é…ç½®è¾“å‡ºå†…å®¹</strong>:</p>
<p>åœ¨å›å¤å†…å®¹ä¸­å¡«å…¥:</p>
<pre><code class="hljs language-bash" lang="bash">{{<span class="hljs-comment">#1763885273656.text#}}</span>

{{<span class="hljs-comment">#1763885273656.files#}}</span>
</code></pre>
<p><strong>è¯´æ˜</strong>:</p>
<ul>
<li><code>text</code>: æ’ä»¶è¿”å›çš„æ–‡æœ¬ä¿¡æ¯(åŒ…å«ç”ŸæˆçŠ¶æ€ã€æç¤ºè¯ç­‰)</li>
<li><code>files</code>: æ’ä»¶è¿”å›çš„å›¾ç‰‡æ–‡ä»¶</li>
</ul>
<p><strong>æ³¨æ„</strong>: èŠ‚ç‚¹ID(å¦‚1763885273656)ä¼šæ ¹æ®ä½ çš„å®é™…å·¥ä½œæµè‡ªåŠ¨ç”Ÿæˆ,è¯·ä»å˜é‡åˆ—è¡¨ä¸­é€‰æ‹©å¯¹åº”çš„è¾“å‡ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6aaf513ef19a44e1bfe2ab0cc1ce98ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764509182&amp;x-signature=qZwCY03ZVTlciVOAWm7h2AsJQxQ%3D" alt="image-20251123202817913" loading="lazy"/></p>
<h4 data-id="heading-22">3.3.5 è¿æ¥èŠ‚ç‚¹</h4>
<p>å°†ä¸‰ä¸ªèŠ‚ç‚¹æŒ‰é¡ºåºè¿æ¥:</p>
<pre><code class="hljs">å¼€å§‹èŠ‚ç‚¹ â†’ Nano Banana2æ’ä»¶ â†’ ç›´æ¥å›å¤
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78ed40ba4a9d42cca416f0735b6fba7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764509182&amp;x-signature=oOZsdH5OC%2FFiF4nBfBktJjZ9fOE%3D" alt="å®Œæ•´å·¥ä½œæµ" loading="lazy"/></p>
<p>è‡³æ­¤,å®Œæ•´çš„å·¥ä½œæµå°±æ­å»ºå®Œæˆäº†!æ˜¯ä¸æ˜¯è¶…çº§ç®€å•?åªéœ€è¦ä¸‰ä¸ªèŠ‚ç‚¹,æ‹–æ‹–æ‹½æ‹½å°±æå®šäº†,å®Œå…¨ä¸éœ€è¦å†™ä»£ç !</p>
<h3 data-id="heading-23">3.4 æµ‹è¯•éªŒè¯</h3>
<h4 data-id="heading-24">æµ‹è¯•ç”¨ä¾‹1: å­¦ç”Ÿè¯å˜æ‰‹åŠ</h4>
<p>æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªä¸“ä¸šçš„è‹±æ–‡æç¤ºè¯ç›´æ¥ç”Ÿæˆæ‰‹åŠæ•ˆæœ:</p>
<p><strong>æç¤ºè¯</strong>:</p>
<pre><code class="hljs language-vbnet" lang="vbnet">Turn this photo <span class="hljs-keyword">into</span> a character figure. Behind it, place a box <span class="hljs-keyword">with</span> the
character<span class="hljs-comment">'s image printed on it, and a computer showing the Blender modeling</span>
process <span class="hljs-keyword">on</span> its screen. <span class="hljs-keyword">In</span> front <span class="hljs-keyword">of</span> the box, add a round plastic base <span class="hljs-keyword">with</span>
the character figure standing <span class="hljs-keyword">on</span> it. <span class="hljs-keyword">Set</span> the scene indoors <span class="hljs-keyword">if</span> possible
</code></pre>
<p>ç‚¹å‡»"è¿è¡Œ"æŒ‰é’®,ç­‰å¾…å‡ ç§’é’Ÿ:</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40b828e1dd394706adba9e12443e1c5f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764509182&amp;x-signature=MIp30cqBkXS4Bp3GvK67OoOapxk%3D" alt="æµ‹è¯•ç»“æœ1" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d14b096f217c4381a3734e41c6921b2a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764509182&amp;x-signature=TDjEdkbIiDS7OtamEo3qFijOgRw%3D" alt="æ‰‹åŠæ•ˆæœ" loading="lazy"/></p>
<p>å‘µå‘µ,æ•ˆæœéå¸¸æ£’!å­¦ç”Ÿè¯å˜æˆäº†ç²¾ç¾çš„æ‰‹åŠ,è¿˜æœ‰åŒ…è£…ç›’å’Œå»ºæ¨¡ç•Œé¢,ç»†èŠ‚æ»¡æ»¡!</p>
<h4 data-id="heading-25">æµ‹è¯•ç”¨ä¾‹2: æ•™è‚²ä¿¡æ¯å›¾</h4>
<p><strong>æç¤ºè¯</strong>:</p>
<pre><code class="hljs language-makefile" lang="makefile">åˆ›å»ºä¸€ä¸ªè§£é‡Š[å…‰åˆä½œç”¨]çš„æ•™è‚²ä¿¡æ¯å›¾ã€‚
<span class="hljs-section">è§†è§‰å…ƒç´ :å±•ç¤ºå…³é”®ç»„æˆéƒ¨åˆ†:å¤ªé˜³ã€ä¸€æ ªç»¿è‰²æ¤ç‰©ã€æ°´(H2O)è¿›å…¥æ ¹éƒ¨ã€</span>
äºŒæ°§åŒ–ç¢³(CO2)è¿›å…¥å¶ç‰‡,ä»¥åŠæ°§æ°”(O2)è¢«é‡Šæ”¾ã€‚
<span class="hljs-section">é£æ ¼:ç®€æ´ã€æ‰å¹³åŒ–çš„çŸ¢é‡æ’å›¾,é€‚åˆé«˜ä¸­ç§‘å­¦æ•™ç§‘ä¹¦ã€‚</span>
ä½¿ç”¨ç®­å¤´è¡¨ç¤ºèƒ½é‡å’Œç‰©è´¨çš„æµåŠ¨ã€‚
<span class="hljs-section">æ ‡ç­¾:ç”¨ç®€ä½“ä¸­æ–‡æ¸…æ™°åœ°æ ‡æ³¨æ¯ä¸ªå…ƒç´ ã€‚</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/307df626431f439782d4e6a10dfdd15b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764509182&amp;x-signature=CHA05tEK66rfd9kWqt0CTv4aXGY%3D" alt="å…‰åˆä½œç”¨ä¿¡æ¯å›¾" loading="lazy"/></p>
<p>ä¸­æ–‡æ ‡æ³¨æ¸…æ™°,æµç¨‹å±•ç¤ºä¸“ä¸š,å®Œå…¨å¯ä»¥ç”¨äºæ•™å­¦!è¿™å°±æ˜¯Nano Banana Proå¼ºå¤§çš„ä¸­æ–‡æ–‡å­—æ¸²æŸ“èƒ½åŠ›ã€‚</p>
<h4 data-id="heading-26">æµ‹è¯•ç”¨ä¾‹3: è§’è‰²è®¾å®šå›¾</h4>
<p><strong>æç¤ºè¯</strong>:</p>
<pre><code class="hljs language-css" lang="css">æ¨ªå›¾,åˆ›ä½œå¦‚å›¾äººç‰©çš„<span class="hljs-selector-tag">A</span>-poseè®¾è®¡å›¾,ç±³ç™½è‰²åº•ã€‚
æœ‰ç§åˆæœŸè®¾è®¡çš„æ„Ÿè§‰ã€‚
æœ‰å„ä¸ªéƒ¨ä½æ‹†åˆ†ã€è¡¨æƒ…å·®åˆ†ã€å¤šè§’åº¦è¡¨æƒ…ã€ç‰©å“æ‹†åˆ†ã€ç»†èŠ‚ç‰¹å†™ã€‚
å¹¶ä¸”ä½¿ç”¨æ‰‹å†™ä½“æ–‡å­—è¿›è¡Œæ ‡æ³¨è¯´æ˜,æœ€å¥½ä½¿ç”¨ä¸­æ–‡ã€‚
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2da8e70ba1134958b2c4dcdcaf0506f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764509182&amp;x-signature=Js8kRJYRJZeCc9u1%2BlhRnf%2Fj5S4%3D" alt="è§’è‰²è®¾å®š" loading="lazy"/></p>
<p>ä¸‰è§†å›¾ã€è¡¨æƒ…è®¾å®šã€æœè£…æ‹†è§£ã€ç»†èŠ‚ç‰¹å†™,å…¨éƒ½è‡ªåŠ¨ç”Ÿæˆäº†,è¿™å¯¹æ¼«ç”»åˆ›ä½œè€…æ¥è¯´ç®€ç›´æ˜¯ç¦éŸ³!</p>
<h4 data-id="heading-27">æµ‹è¯•ç”¨ä¾‹4: è¶£å‘³åˆ›æ„</h4>
<p><strong>æç¤ºè¯</strong>:</p>
<pre><code class="hljs language-arduino" lang="arduino">ä¸€å¼ åƒé©¾ç…§ä¸€æ ·çš„è¯ä»¶å¡ç‰‡ç‰¹å†™,è¯ä»¶ç…§æ˜¯ä¸€åªç¡ç€çš„è€ƒæ‹‰ã€‚
è¯ä»¶åç§°å†™ç€:<span class="hljs-string">"å›½å®¶ä¸€çº§æ‘†çƒ‚è®¸å¯è¯"</span>ã€‚æœ‰æ•ˆæœŸå†™ç€:<span class="hljs-string">"æ°¸ä¹…æœ‰æ•ˆ"</span>ã€‚
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a89d03ea93e443eabac440940f655c6c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764509182&amp;x-signature=OCFFDhE1lpOW8K95PA8NXvKzKSs%3D" alt="æ‘†çƒ‚è®¸å¯è¯" loading="lazy"/></p>
<p>ä¸­æ–‡æ–‡å­—æ¸²æŸ“å®Œç¾,å­—ä½“æ¸…æ™°,å®Œå…¨æ²¡æœ‰ä¹±ç !è¿™å°±æ˜¯Nano Banana Proçš„å¼ºå¤§ä¹‹å¤„ã€‚</p>
<h4 data-id="heading-28">æµ‹è¯•ç”¨ä¾‹5: è¶£å‘³åœºæ™¯</h4>
<p><strong>æç¤ºè¯</strong>:</p>
<pre><code class="hljs language-arduino" lang="arduino">å¤´å‘è“¬ä¹±çš„çˆ±å› æ–¯å¦å›°æƒ‘åœ°ç›¯ç€æ™ºèƒ½æ‰‹æœº,è¯•å›¾è‡ªæ‹ã€‚
åŸƒéš†Â·é©¬æ–¯å…‹ç«™åœ¨ä»–æ—è¾¹,è€å¿ƒåœ°æŒ‡ç€å±å¹•æ•™ä»–ã€‚
æ‰‹æœºå±å¹•ä¸Šçš„å­—:<span class="hljs-string">"æ€ä¹ˆæ‹ç…§?"</span>ã€‚
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54e9b6376b1a4686b213cf6b6bca01d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764509182&amp;x-signature=DOxKoDXONd6RorLVDL4g8IKxYQE%3D" alt="çˆ±å› æ–¯å¦å­¦è‡ªæ‹" loading="lazy"/></p>
<p>å¥½å®¶ä¼™!äººç‰©è¡¨æƒ…ç”ŸåŠ¨,åœºæ™¯å¹½é»˜æœ‰è¶£,æ‰‹æœºå±å¹•ä¸Šçš„ä¸­æ–‡ä¹Ÿæ¸…æ™°å¯è§!</p>
<p>é€šè¿‡ä»¥ä¸Šæµ‹è¯•æ¥çœ‹,æ•ˆæœéå¸¸æ£’,å®Œå…¨è¾¾åˆ°äº†é¢„æœŸã€‚æ˜¯ä¸æ˜¯éå¸¸ç®€å•?åªéœ€è¦ä¸‰ä¸ªèŠ‚ç‚¹,å‡ åˆ†é’Ÿå°±æ­å»ºå®Œæˆäº†!</p>
<h2 data-id="heading-29">4.é¡¹ç›®èµ„æº</h2>
<h3 data-id="heading-30">GitHubå¼€æºåœ°å€</h3>
<p><strong>æ’ä»¶é¡¹ç›®</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwwwzhouhui%2Fnano_banana2" target="_blank" title="https://github.com/wwwzhouhui/nano_banana2" ref="nofollow noopener noreferrer">github.com/wwwzhouhui/â€¦</a></p>
<p><strong>å·¥ä½œæµDSL</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwwwzhouhui%2Fdify-for-dsl" target="_blank" title="https://github.com/wwwzhouhui/dify-for-dsl" ref="nofollow noopener noreferrer">github.com/wwwzhouhui/â€¦</a></p>
<p>è§‰å¾—é¡¹ç›®ä¸é”™å¯ä»¥ç‚¹ä¸ªèµâ­</p>
<h3 data-id="heading-31">åœ¨çº¿ä½“éªŒåœ°å€</h3>
<p><strong>Difyå·¥ä½œæµä½“éªŒ</strong>:</p>
<ul>
<li>ä¸»åœ°å€: <a href="https://link.juejin.cn?target=https%3A%2F%2Fdify.duckcloud.fun%2Fchat%2FDjmzXPkOkUhnldwz" target="_blank" title="https://dify.duckcloud.fun/chat/DjmzXPkOkUhnldwz" ref="nofollow noopener noreferrer">dify.duckcloud.fun/chat/DjmzXPâ€¦</a></li>
<li>å¤‡ç”¨åœ°å€: <a href="https://link.juejin.cn?target=http%3A%2F%2F14.103.204.132%2Fchat%2FDjmzXPkOkUhnldwz" target="_blank" title="http://14.103.204.132/chat/DjmzXPkOkUhnldwz" ref="nofollow noopener noreferrer">http://14.103.204.132/chat/DjmzXPkOkUhnldwz</a></li>
</ul>
<p>å¯ä»¥ç›´æ¥åœ¨çº¿ä½“éªŒ,æ— éœ€å®‰è£…!</p>
<h3 data-id="heading-32">æ’ä»¶ä¸‹è½½</h3>
<p><strong>ç¦»çº¿å®‰è£…åŒ…</strong>: nano_banana2v0.0.1.difypkg</p>
<p>ä¸‹è½½åœ°å€: é€šè¿‡ç½‘ç›˜åˆ†äº«çš„æ–‡ä»¶ï¼šnano_banana2_0.0.1.difypkg
é“¾æ¥: <a href="https://link.juejin.cn?target=https%3A%2F%2Fpan.baidu.com%2Fs%2F1Q7B5opr_ce11ZEVRMgP5tw" target="_blank" title="https://pan.baidu.com/s/1Q7B5opr_ce11ZEVRMgP5tw" ref="nofollow noopener noreferrer">pan.baidu.com/s/1Q7B5opr_â€¦</a> æå–ç : xm6f</p>
<h3 data-id="heading-33">ç›¸å…³æ•™ç¨‹</h3>
<p><strong>å‚è€ƒæ–‡ç« </strong>:</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FrCSIeZj86kbms7K8Lt2f_w" target="_blank" title="https://mp.weixin.qq.com/s/rCSIeZj86kbms7K8Lt2f_w" ref="nofollow noopener noreferrer">Google Nano Banana Proï¼šå›¾åƒç”Ÿæˆç‹è€…å½’æ¥ï¼Œä¸­æ–‡æ”¯æŒç‚¸è£‚ï¼</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FqKA3ha0n6AHVsc3VBH7t6g" target="_blank" title="https://mp.weixin.qq.com/s/qKA3ha0n6AHVsc3VBH7t6g" ref="nofollow noopener noreferrer">difyæ¡ˆä¾‹åˆ†äº«-å›½å†…é¦–å‘ï¼æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨Difyè°ƒç”¨Nano BananaAIç”»å›¾</a></li>
</ul>
<hr/>
<h2 data-id="heading-34">5.æ€»ç»“</h2>
<p>ä»Šå¤©ä¸»è¦å¸¦å¤§å®¶äº†è§£å¹¶å®ç°äº†åŸºäºDifyå·¥ä½œæµæ„å»ºNano Banana Pro(Gemini 3 Pro Image)AIå›¾åƒç”Ÿæˆç³»ç»Ÿçš„å®Œæ•´æµç¨‹,è¯¥è§£å†³æ–¹æ¡ˆä»¥"å¼€æºnano_banana2æ’ä»¶ + æç®€ä¸‰èŠ‚ç‚¹å·¥ä½œæµ"ä¸ºæ ¸å¿ƒä¼˜åŠ¿,ç»“åˆç”µå•†è®¾è®¡ã€å¹¿å‘Šåˆ›æ„ã€åŠ¨æ¼«åˆ›ä½œã€æ•™è‚²ç§‘æ™®ç­‰å¤šç§åº”ç”¨åœºæ™¯éœ€æ±‚,é€šè¿‡Difyå¹³å°çš„å¯è§†åŒ–å·¥ä½œæµç¼–æ’ä¸åŒAPIæä¾›å•†æ”¯æŒ(å…è´¹Gemai API + ç¨³å®šä»˜è´¹Juxin API),å½¢æˆäº†ä¸€å¥—ä»æ–‡æœ¬æç¤ºè¯åˆ°é«˜æ¸…å›¾åƒè¾“å‡ºçš„å…¨é“¾è·¯AIåˆ›ä½œè§£å†³æ–¹æ¡ˆã€‚</p>
<p>é€šè¿‡è¿™å¥—å®è·µæ–¹æ¡ˆ,è®¾è®¡å¸ˆã€è¿è¥äººå‘˜ã€å†…å®¹åˆ›ä½œè€…èƒ½å¤Ÿé«˜æ•ˆçªç ´ä¼ ç»Ÿå›¾åƒç”Ÿæˆçš„è®¿é—®ç“¶é¢ˆâ€”â€”å€ŸåŠ©å®Œç¾çš„ä¸­æ–‡æ–‡å­—æ¸²æŸ“(æ”¯æŒç¹ä½“ã€æ—¥éŸ©æ–‡ç­‰å¤šè¯­è¨€,å‡†ç¡®ç‡è¾¾97%+)ã€æç®€çš„å·¥ä½œæµé…ç½®(ä»…éœ€å¼€å§‹èŠ‚ç‚¹â†’æ’ä»¶èŠ‚ç‚¹â†’å›å¤èŠ‚ç‚¹ä¸‰æ­¥)ã€åŒAPIçµæ´»é€‰æ‹©(æ ¹æ®é¢„ç®—å’Œéœ€æ±‚è‡ªç”±åˆ‡æ¢),æ— éœ€ç§‘å­¦ä¸Šç½‘å’Œå¤æ‚çš„APIå¼€å‘æŠ€èƒ½,å°±èƒ½å¿«é€Ÿå®ç°å•†ä¸šçº§å›¾åƒåˆ›ä½œ(å¦‚æœ¬æ¬¡æ¼”ç¤ºçš„"å­¦ç”Ÿè¯å˜æ‰‹åŠ"ã€"å…‰åˆä½œç”¨æ•™è‚²å›¾"ã€"è§’è‰²è®¾å®šå›¾"ã€"è¶£å‘³è¯ä»¶å¡"ã€"çˆ±å› æ–¯å¦å­¦è‡ªæ‹"ç­‰å¤šä¸ªå®æˆ˜æ¡ˆä¾‹)ã€‚æ— è®ºæ˜¯äº§å“æµ·æŠ¥è®¾è®¡ã€ç¤¾äº¤åª’ä½“é…å›¾ã€æ¼«ç”»è§’è‰²åˆ›ä½œã€æ•™å­¦ä¿¡æ¯å›¾è¡¨,è¿˜æ˜¯è€ç…§ç‰‡ä¿®å¤ã€3Dæ‰‹åŠåˆ¶ä½œã€å“ç‰Œç‰©æ–™ç”Ÿæˆ,éƒ½èƒ½é€šè¿‡ç®€å•çš„ä¸‰èŠ‚ç‚¹å·¥ä½œæµé…ç½®å®Œæˆ,æå¤§æå‡åˆ›ä½œæ•ˆç‡å’Œé™ä½æŠ€æœ¯é—¨æ§›ã€‚</p>
<p>æ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥æŒ‰ç…§æ–‡ä¸­æä¾›çš„å®Œæ•´æ­¥éª¤è¿›è¡Œå®è·µ,æ ¹æ®å®é™…åˆ›ä½œéœ€æ±‚è°ƒæ•´é£æ ¼å‚æ•°ã€ç”»å¹…æ¯”ä¾‹ã€åˆ›é€ åŠ›æ•°å€¼ç­‰é…ç½®é¡¹ã€‚ä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œç»“æŸäº†,æˆ‘ä»¬ä¸‹ä¸€ç¯‡æ–‡ç« è§ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ˜¯ä»€ä¹ˆè®©Claude Codeå¦‚æ­¤å‡ºè‰²ï¼ˆä»¥åŠå¦‚ä½•åœ¨ä½ çš„ agent ä¸­é‡ç°è¿™ç§é­”åŠ›ï¼‰]]></title>    <link>https://juejin.cn/post/7575162322240552960</link>    <guid>https://juejin.cn/post/7575162322240552960</guid>    <pubDate>2025-11-23T13:47:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575162322240552960" data-draft-id="7575062687627198464" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ˜¯ä»€ä¹ˆè®©Claude Codeå¦‚æ­¤å‡ºè‰²ï¼ˆä»¥åŠå¦‚ä½•åœ¨ä½ çš„ agent ä¸­é‡ç°è¿™ç§é­”åŠ›ï¼‰"/> <meta itemprop="keywords" content="Claude"/> <meta itemprop="datePublished" content="2025-11-23T13:47:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯é­”ä¸¸å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/3217622495411292"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ˜¯ä»€ä¹ˆè®©Claude Codeå¦‚æ­¤å‡ºè‰²ï¼ˆä»¥åŠå¦‚ä½•åœ¨ä½ çš„ agent ä¸­é‡ç°è¿™ç§é­”åŠ›ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3217622495411292/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯é­”ä¸¸å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T13:47:12.000Z" title="Sun Nov 23 2025 13:47:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fblog%2Fdecoding-claude-code%2F" target="_blank" title="https://minusx.ai/blog/decoding-claude-code/" ref="nofollow noopener noreferrer">è½¬è½½</a></p>
<h2 data-id="heading-0">What makes Claude Code so damn good (and how to recreate that magic in your agent)!?</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28ecfe62f2144d0184a83456a7cfa809~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510432&amp;x-signature=EFqh48QlOAGCjH6e4MXnXN0Usqg%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ä½œè€…</strong>: vivek</p>
<p><strong>å‘å¸ƒæ—¥æœŸ</strong>: 2025-08-21</p>
<p>Claude Code æ˜¯æˆ‘ç›®å‰ä½¿ç”¨è¿‡çš„æœ€ä»¤äººæ„‰æ‚¦çš„ AI ä»£ç†/å·¥ä½œæµã€‚å®ƒä¸ä»…è®©å®šå‘ç¼–è¾‘æˆ–æ°›å›´ç¼–ç çš„ä¸´æ—¶å·¥å…·ä¸å†é‚£ä¹ˆçƒ¦äººï¼Œä½¿ç”¨ Claude Code æœ¬èº«ä¹Ÿè®©æˆ‘æ„Ÿåˆ°å¿«ä¹ã€‚å®ƒæœ‰è¶³å¤Ÿçš„è‡ªä¸»æ€§æ¥åšæœ‰è¶£çš„äº‹æƒ…ï¼ŒåŒæ—¶åˆä¸ä¼šåƒå…¶ä»–å·¥å…·é‚£æ ·å¸¦æ¥çªå…€çš„å¤±æ§æ„Ÿã€‚å½“ç„¶ï¼Œå¤§éƒ¨åˆ†ç¹é‡çš„å·¥ä½œéƒ½æ˜¯ç”±æ–°çš„ Claude 4 æ¨¡å‹å®Œæˆçš„ï¼ˆç‰¹åˆ«æ˜¯äº¤é”™æ€ç»´ï¼‰ã€‚ä½†æˆ‘å‘ç°ï¼Œå³ä½¿åœ¨ç›¸åŒçš„åº•å±‚æ¨¡å‹ä¸‹ï¼ŒClaude Code åœ¨å®¢è§‚ä¸Šä¹Ÿæ¯” Cursor æˆ– Github Copilot agents æ›´ä¸çƒ¦äººï¼æ˜¯ä»€ä¹ˆè®©å®ƒå¦‚æ­¤å‡ºè‰²ï¼Ÿå¦‚æœä½ æ­£åœ¨é˜…è¯»è¿™æ®µè¯å¹¶ç‚¹å¤´è®¤åŒï¼Œæˆ‘å°†å°è¯•æä¾›ä¸€äº›ç­”æ¡ˆã€‚</p>
<p><strong>æ³¨æ„</strong>ï¼šè¿™ä¸æ˜¯ä¸€ç¯‡æ³„éœ² Claude Code æ¶æ„çš„åšå®¢æ–‡ç« ï¼ˆå·²ç»æœ‰ä¸€äº›ä¸é”™çš„æ–‡ç« äº†ï¼‰ã€‚è¿™ç¯‡åšå®¢æ—¨åœ¨ä½œä¸ºæ„å»ºä»¤äººæ„‰æ‚¦çš„ LLM ä»£ç†çš„æŒ‡å—ï¼ŒåŸºäºæˆ‘è¿‡å»å‡ ä¸ªæœˆä½¿ç”¨å’Œè°ƒè¯• Claude Code çš„ç»éªŒï¼ˆä»¥åŠæˆ‘ä»¬æ‹¦æˆªå’Œåˆ†æçš„æ‰€æœ‰æ—¥å¿—ï¼‰ã€‚ä½ å¯ä»¥åœ¨é™„å½•éƒ¨åˆ†æ‰¾åˆ° <a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fblog%2Fdecoding-claude-code%2F%23appendix" target="_blank" title="https://minusx.ai/blog/decoding-claude-code/#appendix" ref="nofollow noopener noreferrer">prompts</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fblog%2Fdecoding-claude-code%2F%23appendix" target="_blank" title="https://minusx.ai/blog/decoding-claude-code/#appendix" ref="nofollow noopener noreferrer">tools</a>ã€‚è¿™ç¯‡å¸–å­çº¦ 2000 å­—ï¼Œæ‰€ä»¥è¯·åšå¥½å‡†å¤‡ï¼å¦‚æœä½ æƒ³è¦ä¸€äº›å¿«é€Ÿè¦ç‚¹ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fblog%2Fdecoding-claude-code%2F%23how-to-build-a-claude-code-like-agent-tldr" target="_blank" title="https://minusx.ai/blog/decoding-claude-code/#how-to-build-a-claude-code-like-agent-tldr" ref="nofollow noopener noreferrer">TL;DR</a> éƒ¨åˆ†æ˜¯ä¸ªä¸é”™çš„èµ·ç‚¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a7a1d53567d4eef9d1f0eaa804e7a54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510432&amp;x-signature=%2Fgm9nSTo7J5tJ43ZT5wPnq08l9Y%3D" alt="ä½ å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ä¸åŒçš„ Claude Code æ›´æ–°" loading="lazy"/></p>
<p>ä½ å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ä¸åŒçš„ Claude Code æ›´æ–°ã€‚</p>
<p>Claude Code (CC) æ„Ÿè§‰å¾ˆå¥½ç”¨ï¼Œå› ä¸ºå®ƒå°±æ˜¯èƒ½æ­£å¸¸å·¥ä½œã€‚CC æ˜¯åŸºäºå¯¹ LLM æ“…é•¿ä»€ä¹ˆå’Œä¸æ“…é•¿ä»€ä¹ˆçš„æ·±åˆ»ç†è§£è€Œç²¾å¿ƒæ‰“é€ çš„ã€‚å®ƒçš„ prompts å’Œå·¥å…·å¼¥è¡¥äº†æ¨¡å‹çš„æ„šè ¢ï¼Œå¸®åŠ©å®ƒåœ¨è‡ªå·±çš„å¼ºé¡¹é¢†åŸŸå‘å…‰å‘çƒ­ã€‚æ§åˆ¶å¾ªç¯æå…¶ç®€å•æ˜“æ‡‚ï¼Œè°ƒè¯•èµ·æ¥ä¹Ÿå¾ˆç®€å•ã€‚</p>
<p>æˆ‘ä»¬åœ¨ CC å‘å¸ƒåç«‹å³åœ¨ MinusX å¼€å§‹ä½¿ç”¨å®ƒã€‚ä¸ºäº†æ·±å…¥äº†è§£ï¼ŒSreejith ç¼–å†™äº†ä¸€ä¸ªè®°å½•å™¨ï¼Œå¯ä»¥æ‹¦æˆªå’Œè®°å½•æ¯ä¸ªç½‘ç»œè¯·æ±‚ã€‚ä»¥ä¸‹åˆ†æåŸºäºæˆ‘è¿‡å»å‡ ä¸ªæœˆçš„å¹¿æ³›ä½¿ç”¨ã€‚æœ¬æ–‡è¯•å›¾å›ç­”è¿™ä¸ªé—®é¢˜â€”â€”"æ˜¯ä»€ä¹ˆè®© Claude Code å¦‚æ­¤å‡ºè‰²ï¼Œä»¥åŠä½ å¦‚ä½•åœ¨è‡ªå·±çš„åŸºäºèŠå¤©å¼ LLM çš„ä»£ç†ä¸­æä¾›ç±»ä¼¼ CC çš„ä½“éªŒï¼Ÿ" æˆ‘ä»¬å·²ç»å°†å¤§éƒ¨åˆ†è¿™äº›å†…å®¹æ•´åˆåˆ° MinusX ä¸­ï¼Œæˆ‘å¾ˆå…´å¥‹çœ‹åˆ°ä½ ä¹Ÿèƒ½åšåˆ°ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/734318fbbf91465ba8f3f2a954000d91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510432&amp;x-signature=UURAL2nqcC6YUeOUYwGjW%2BWz04U%3D" alt="Edit æ˜¯æœ€å¸¸ç”¨çš„å·¥å…·ï¼Œå…¶æ¬¡æ˜¯ Read å’Œ ToDoWrite" loading="lazy"/></p>
<p>Edit æ˜¯æœ€å¸¸ç”¨çš„å·¥å…·ï¼Œå…¶æ¬¡æ˜¯ Read å’Œ ToDoWrite</p>
<h3 data-id="heading-1">å¦‚ä½•æ„å»ºç±»ä¼¼ Claude Code çš„ä»£ç†ï¼šTL;DR</h3>
<p>å¦‚æœåªèƒ½ä»ä¸­å­¦åˆ°ä¸€ç‚¹ï¼Œé‚£å°±æ˜¯â€”â€”<strong>ä¿æŒç®€å•ï¼Œå‚»ç“œ</strong>ã€‚LLM å·²ç»è¶³å¤Ÿéš¾ä»¥è°ƒè¯•å’Œè¯„ä¼°ã€‚ä½ å¼•å…¥çš„ä»»ä½•é¢å¤–å¤æ‚æ€§ï¼ˆå¤šä»£ç†ã€ä»£ç†äº¤æ¥æˆ–å¤æ‚çš„ RAG æœç´¢ç®—æ³•ï¼‰åªä¼šè®©è°ƒè¯•éš¾åº¦å¢åŠ  10 å€ã€‚å¦‚æœè¿™æ ·ä¸€ä¸ªè„†å¼±çš„ç³»ç»ŸçœŸçš„èƒ½å·¥ä½œï¼Œä½ ä¹Ÿä¼šå®³æ€•ä»¥åå¯¹å®ƒåšå¤§çš„æ”¹åŠ¨ã€‚æ‰€ä»¥ï¼ŒæŠŠæ‰€æœ‰å†…å®¹ä¿æŒåœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œé¿å…è¿‡åº¦çš„æ ·æ¿ä»£ç è„šæ‰‹æ¶ï¼Œå¹¶è‡³å°‘å®Œå…¨é‡å†™å‡ æ¬¡ :)</p>
<p>ä»¥ä¸‹æ˜¯ Claude Code çš„ä¸»è¦è¦ç‚¹ï¼Œå¯ä»¥ç”¨äºåœ¨ä½ è‡ªå·±çš„ç³»ç»Ÿä¸­å®ç°ã€‚</p>
<h4 data-id="heading-2">1. æ§åˆ¶å¾ªç¯</h4>
<h5 data-id="heading-3">1.1 ä¿æŒä¸€ä¸ªä¸»å¾ªç¯ï¼ˆæœ€å¤šä¸€ä¸ªåˆ†æ”¯ï¼‰å’Œä¸€ä¸ªæ¶ˆæ¯å†å²</h5>
<h5 data-id="heading-4">1.2 ä¸ºæ‰€æœ‰äº‹æƒ…ä½¿ç”¨æ›´å°çš„æ¨¡å‹ã€‚æ‰€æœ‰ã€‚è¯¥æ­»çš„ã€‚æ—¶é—´ã€‚</h5>
<h4 data-id="heading-5">2. Prompts</h4>
<h5 data-id="heading-6">2.1 ä½¿ç”¨ claude.md æ¨¡å¼æ¥åä½œå’Œè®°ä½ç”¨æˆ·åå¥½</h5>
<h5 data-id="heading-7">2.2 ä½¿ç”¨ç‰¹æ®Šçš„ XML æ ‡ç­¾ã€Markdown å’Œå¤§é‡ç¤ºä¾‹</h5>
<h4 data-id="heading-8">3. å·¥å…·</h4>
<h5 data-id="heading-9">3.1 LLM æœç´¢ &gt;&gt;&gt; åŸºäº RAG çš„æœç´¢</h5>
<h5 data-id="heading-10">3.2 å¦‚ä½•è®¾è®¡å¥½çš„å·¥å…·ï¼Ÿï¼ˆé«˜çº§ vs ä½çº§å·¥å…·ï¼‰</h5>
<h5 data-id="heading-11">3.3 è®©ä½ çš„ä»£ç†ç®¡ç†è‡ªå·±çš„å¾…åŠäº‹é¡¹åˆ—è¡¨</h5>
<h4 data-id="heading-12">4. å¯æ§æ€§</h4>
<h5 data-id="heading-13">4.1 è¯­æ°”å’Œé£æ ¼</h5>
<h5 data-id="heading-14">4.2 "è¯·è®°ä½è¿™å¾ˆé‡è¦" ä¸å¹¸åœ°ä»ç„¶æ˜¯æœ€å…ˆè¿›çš„æŠ€æœ¯</h5>
<h5 data-id="heading-15">4.3 ç¼–å†™ç®—æ³•ï¼ŒåŒ…å«å¯å‘å¼æ–¹æ³•å’Œç¤ºä¾‹</h5>
<p>Claude Code åœ¨æ¯ä¸ªèŠ‚ç‚¹éƒ½é€‰æ‹©äº†æ¶æ„ç®€å•æ€§â€”â€”ä¸€ä¸ªä¸»å¾ªç¯ã€ç®€å•çš„æœç´¢ã€ç®€å•çš„å¾…åŠåˆ—è¡¨ç­‰ã€‚æŠµåˆ¶è¿‡åº¦å·¥ç¨‹çš„å†²åŠ¨ï¼Œä¸ºæ¨¡å‹æ„å»ºå¥½çš„æŒ½å…·ï¼Œè®©å®ƒå‘æŒ¥ï¼è¿™åˆæ˜¯ç«¯åˆ°ç«¯è‡ªåŠ¨é©¾é©¶çš„é‡æ¼”å—ï¼Ÿç—›è‹¦çš„æ•™è®­åˆæ¥äº†ï¼Ÿ</p>
<h3 data-id="heading-16">1. æ§åˆ¶å¾ªç¯è®¾è®¡</h3>
<h4 data-id="heading-17">1.1 ä¿æŒä¸€ä¸ªä¸»å¾ªç¯</h4>
<p>å¯è°ƒè¯•æ€§ &gt;&gt;&gt; å¤æ‚çš„æ‰‹å·¥è°ƒä¼˜çš„å¤šä»£ç† lang-chain-graph-node å¤§æ‚çƒ©ã€‚</p>
<p>å°½ç®¡å¤šä»£ç†ç³»ç»Ÿæ­£é£é¡ä¸€æ—¶ï¼ŒClaude Code åªæœ‰ä¸€ä¸ªä¸»çº¿ç¨‹ã€‚å®ƒå®šæœŸä½¿ç”¨å‡ ç§ä¸åŒç±»å‹çš„ prompts æ¥æ€»ç»“ git å†å²ï¼Œå°†æ¶ˆæ¯å†å²å‹ç¼©æˆä¸€æ¡æ¶ˆæ¯ï¼Œæˆ–è€…æå‡ºä¸€äº›æœ‰è¶£çš„ UX å…ƒç´ ã€‚ä½†é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒç»´æŠ¤ç€ä¸€ä¸ªæ‰å¹³çš„æ¶ˆæ¯åˆ—è¡¨ã€‚å®ƒå¤„ç†åˆ†å±‚ä»»åŠ¡çš„ä¸€ä¸ªæœ‰è¶£æ–¹å¼æ˜¯å°†è‡ªå·±ä½œä¸ºå­ä»£ç†ç”Ÿæˆï¼Œä½†æ²¡æœ‰èƒ½åŠ›ç”Ÿæˆæ›´å¤šå­ä»£ç†ã€‚æœ€å¤šæœ‰ä¸€ä¸ªåˆ†æ”¯ï¼Œå…¶ç»“æœä½œä¸º"å·¥å…·å“åº”"æ·»åŠ åˆ°ä¸»æ¶ˆæ¯å†å²ä¸­ã€‚</p>
<p>å¦‚æœé—®é¢˜è¶³å¤Ÿç®€å•ï¼Œä¸»å¾ªç¯å°±é€šè¿‡è¿­ä»£å·¥å…·è°ƒç”¨æ¥å¤„ç†ã€‚ä½†å¦‚æœæœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå¤æ‚ä»»åŠ¡ï¼Œä¸»ä»£ç†ä¼šåˆ›å»ºè‡ªèº«çš„å…‹éš†ã€‚æœ€å¤š 1 ä¸ªåˆ†æ”¯å’Œå¾…åŠäº‹é¡¹åˆ—è¡¨çš„ç»„åˆç¡®ä¿äº†ä»£ç†èƒ½å¤Ÿå°†é—®é¢˜åˆ†è§£ä¸ºå­é—®é¢˜ï¼ŒåŒæ—¶è¿˜èƒ½å…³æ³¨æœ€ç»ˆæœŸæœ›çš„ç»“æœã€‚</p>
<p>æˆ‘éå¸¸æ€€ç–‘ä½ çš„åº”ç”¨éœ€è¦ä¸€ä¸ªå¤šä»£ç†ç³»ç»Ÿã€‚æ¯ä¸€å±‚æŠ½è±¡éƒ½ä¼šè®©ä½ çš„ç³»ç»Ÿæ›´éš¾è°ƒè¯•ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œä½ ä¼šåç¦»é€šç”¨æ¨¡å‹çš„æ”¹è¿›è½¨è¿¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2b340e1dfea4bfca6b9740fe2806aea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510432&amp;x-signature=zJtxpCbMgRoOg0g%2FSFpVZelawyo%3D" alt="æ§åˆ¶å¾ªç¯" loading="lazy"/></p>
<h4 data-id="heading-18">1.2 ä¸ºä¸€åˆ‡ä½¿ç”¨æ›´å°çš„æ¨¡å‹</h4>
<p>CC äº§ç”Ÿçš„æ‰€æœ‰é‡è¦ LLM è°ƒç”¨ä¸­è¶…è¿‡ 50% éƒ½æ˜¯è°ƒç”¨ claude-3-5-haikuã€‚å®ƒç”¨äºè¯»å–å¤§æ–‡ä»¶ã€è§£æç½‘é¡µã€å¤„ç† git å†å²å’Œæ€»ç»“é•¿å¯¹è¯ã€‚å®ƒè¿˜ç”¨äºæå‡ºå•å­—å¤„ç†æ ‡ç­¾â€”â€”å­—é¢ä¸Šæ˜¯ä¸ºäº†æ¯æ¬¡å‡»é”®ï¼è¾ƒå°çš„æ¨¡å‹æ¯”æ ‡å‡†æ¨¡å‹ï¼ˆSonnet 4ã€GPT-4.1ï¼‰ä¾¿å®œ 70-80%ã€‚éšä¾¿ä½¿ç”¨å®ƒä»¬ï¼</p>
<h3 data-id="heading-19">2. Prompts</h3>
<p>Claude Code æœ‰æå…¶ç²¾å¿ƒè®¾è®¡çš„ promptsï¼Œå……æ»¡äº†å¯å‘å¼æ–¹æ³•ã€ç¤ºä¾‹å’Œé‡è¦ï¼ˆæé†’ï¼‰çš„æé†’ã€‚ç³»ç»Ÿ prompt é•¿çº¦ 2800 ä¸ª tokenï¼Œå·¥å…·å ç”¨æƒŠäººçš„ 9400 ä¸ª tokenã€‚ç”¨æˆ· prompt æ€»æ˜¯åŒ…å« claude.md æ–‡ä»¶ï¼Œé€šå¸¸è¿˜æœ‰å¦å¤– 1000-2000 ä¸ª tokenã€‚ç³»ç»Ÿ prompt åŒ…å«å…³äºè¯­æ°”ã€é£æ ¼ã€ä¸»åŠ¨æ€§ã€ä»»åŠ¡ç®¡ç†ã€å·¥å…·ä½¿ç”¨ç­–ç•¥å’Œæ‰§è¡Œä»»åŠ¡çš„ç« èŠ‚ã€‚å®ƒè¿˜åŒ…å«æ—¥æœŸã€å½“å‰å·¥ä½œç›®å½•ã€å¹³å°å’Œæ“ä½œç³»ç»Ÿä¿¡æ¯ä»¥åŠæœ€è¿‘çš„æäº¤ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fblog%2Fdecoding-claude-code%2F%23appendix" target="_blank" title="https://minusx.ai/blog/decoding-claude-code/#appendix" ref="nofollow noopener noreferrer">å»è¯»å®Œæ•´çš„ prompt</a>ï¼</p>
<h4 data-id="heading-20">2.1 ä½¿ç”¨ claude.md æ¥åä½œç”¨æˆ·ä¸Šä¸‹æ–‡å’Œåå¥½</h4>
<p>å¤§å¤šæ•°ç¼–ç ä»£ç†åˆ›ä½œè€…å·²ç»ç¡®å®šçš„ä¸»è¦æ¨¡å¼ä¹‹ä¸€æ˜¯ä¸Šä¸‹æ–‡æ–‡ä»¶ï¼ˆaka Cursor Rules / claude.md / agent.mdï¼‰ã€‚Claude Code åœ¨æœ‰æ—  claude.md çš„æƒ…å†µä¸‹çš„è¡¨ç°ç®€ç›´æ˜¯å¤©å£¤ä¹‹åˆ«ã€‚è¿™æ˜¯å¼€å‘è€…æä¾›æ— æ³•ä»ä»£ç åº“æ¨æ–­çš„ä¸Šä¸‹æ–‡å’Œç¼–ç æ‰€æœ‰ä¸¥æ ¼åå¥½çš„å¥½æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥å¼ºåˆ¶ LLM è·³è¿‡æŸäº›æ–‡ä»¶å¤¹ï¼Œæˆ–ä½¿ç”¨ç‰¹å®šçš„åº“ã€‚CC åœ¨æ¯æ¬¡ç”¨æˆ·è¯·æ±‚æ—¶éƒ½å‘é€ claude.md çš„å…¨éƒ¨å†…å®¹</p>
<p>æˆ‘ä»¬æœ€è¿‘åœ¨ MinusX ä¸­å¼•å…¥äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fblog%2Fmemory%2F" target="_blank" title="https://minusx.ai/blog/memory/" ref="nofollow noopener noreferrer">minusx.md</a>ï¼Œå®ƒæ­£å¿«é€Ÿæˆä¸ºæˆ‘ä»¬ä»£ç†ç¼–ç ç”¨æˆ·å’Œå›¢é˜Ÿåå¥½çš„äº‹å®ä¸Šä¸‹æ–‡æ–‡ä»¶ã€‚</p>
<h4 data-id="heading-21">2.2 ç‰¹æ®Šçš„ XML æ ‡ç­¾ã€Markdown å’Œå¤§é‡ç¤ºä¾‹</h4>
<p>XML æ ‡ç­¾å’Œ Markdown æ˜¯æ„å»º prompt çš„ä¸¤ç§æ–¹å¼ï¼Œè¿™ä¸€ç‚¹å·²ç»ç›¸å½“ç¡®å®šã€‚CC å¤§é‡ä½¿ç”¨ä¸¤è€…ã€‚ä»¥ä¸‹æ˜¯ Claude Code ä¸­ä¸€äº›å€¼å¾—æ³¨æ„çš„ XML æ ‡ç­¾ï¼š</p>
<p><code>&lt;system-reminder&gt;</code>ï¼šè¿™åœ¨è®¸å¤š prompt ç« èŠ‚çš„æœ«å°¾ä½¿ç”¨ï¼Œä»¥æé†’ LLM é‚£äº›å®ƒå¦åˆ™å¯èƒ½ä¼šå¿˜è®°çš„äº‹æƒ…ã€‚ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">&lt;<span class="hljs-keyword">system</span>-reminder&gt;æé†’ä½ ï¼Œå¾…åŠäº‹é¡¹åˆ—è¡¨å½“å‰ä¸ºç©ºã€‚ä¸è¦æ˜ç¡®å‘ç”¨æˆ·æåŠæ­¤äº‹ï¼Œå› ä¸ºä»–ä»¬å·²ç»çŸ¥æ™“ã€‚å¦‚æœä½ æ­£åœ¨å¤„ç†å¯ä»¥ä»å¾…åŠäº‹é¡¹åˆ—è¡¨ä¸­å—ç›Šçš„ä»»åŠ¡ï¼Œè¯·ä½¿ç”¨ TodoWrite å·¥å…·åˆ›å»ºä¸€ä¸ªã€‚å¦‚æœæ²¡æœ‰ï¼Œè¯·éšæ—¶å¿½ç•¥ã€‚å†æ¬¡ä¸è¦å‘ç”¨æˆ·æåŠæ­¤æ¶ˆæ¯ã€‚&lt;/<span class="hljs-keyword">system</span>-reminder&gt;
</code></pre>
<p><code>&lt;good-example&gt;</code>ã€<code>&lt;bad-example&gt;</code>ï¼šè¿™äº›ç”¨äºç¼–ç å¯å‘å¼æ–¹æ³•ã€‚å½“æœ‰å¤šæ¡çœ‹ä¼¼åˆç†çš„è·¯å¾„/tool_calls å¯ä¾›æ¨¡å‹é€‰æ‹©æ—¶ï¼Œå®ƒä»¬ç‰¹åˆ«æœ‰ç”¨ã€‚ç¤ºä¾‹å¯ä»¥ç”¨æ¥å¯¹æ¯”æ¡ˆä¾‹ï¼Œéå¸¸æ¸…æ¥šåœ°è¯´æ˜å“ªæ¡è·¯å¾„æ›´å¯å–ã€‚ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">å°è¯•åœ¨æ•´ä¸ªä¼šè¯è¿‡ç¨‹ä¸­ä¿æŒå½“å‰å·¥ä½œç›®å½•ï¼Œä½¿ç”¨ç»å¯¹è·¯å¾„é¿å…ä½¿ç”¨ `<span class="hljs-built_in">cd</span>`ã€‚å¦‚æœç”¨æˆ·æ˜ç¡®è¦æ±‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ `<span class="hljs-built_in">cd</span>`ã€‚
&lt;good-example&gt;
pytest /foo/bar/tests
&lt;/good-example&gt;
&lt;bad-example&gt;
<span class="hljs-built_in">cd</span> /foo/bar &amp;&amp; pytest tests
&lt;/bad-example&gt;
</code></pre>
<p>CC è¿˜ä½¿ç”¨ markdown åœ¨ç³»ç»Ÿ prompt ä¸­åˆ’åˆ†æ¸…æ™°çš„ç« èŠ‚ã€‚ç¤ºä¾‹ markdown æ ‡é¢˜åŒ…æ‹¬ï¼š</p>
<ul>
<li>è¯­æ°”å’Œé£æ ¼</li>
<li>ä¸»åŠ¨æ€§</li>
<li>éµå¾ªçº¦å®š</li>
<li>ä»£ç é£æ ¼</li>
<li>ä»»åŠ¡ç®¡ç†</li>
<li>å·¥å…·ä½¿ç”¨ç­–ç•¥</li>
<li>æ‰§è¡Œä»»åŠ¡</li>
<li>å·¥å…·</li>
</ul>
<h3 data-id="heading-22">3. å·¥å…·</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fblog%2Fdecoding-claude-code%2F%23appendix" target="_blank" title="https://minusx.ai/blog/decoding-claude-code/#appendix" ref="nofollow noopener noreferrer">å»è¯»å®Œæ•´çš„å·¥å…· prompt</a> - å®ƒé•¿è¾¾æƒŠäººçš„ 9400 ä¸ª tokenï¼</p>
<h4 data-id="heading-23">3.1 LLM æœç´¢ &gt;&gt;&gt; åŸºäº RAG çš„æœç´¢</h4>
<p>CC ä¸å…¶ä»–æµè¡Œç¼–ç ä»£ç†çš„ä¸€ä¸ªæ˜¾è‘—ä¸åŒä¹‹å¤„åœ¨äºå®ƒæ‹’ç» RAGã€‚Claude Code æœç´¢ä½ çš„ä»£ç åº“å°±åƒä½ ä¸€æ ·ï¼Œä½¿ç”¨éå¸¸å¤æ‚çš„ <code>ripgrep</code>ã€<code>jq</code> å’Œ <code>find</code> å‘½ä»¤ã€‚ç”±äº LLM éå¸¸ç†è§£ä»£ç ï¼Œå®ƒå¯ä»¥ä½¿ç”¨å¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼æ‰¾åˆ°å®ƒè®¤ä¸ºç›¸å…³çš„ä»»ä½•ä»£ç å—ã€‚æœ‰æ—¶å®ƒæœ€ç»ˆä¼šç”¨æ›´å°çš„æ¨¡å‹è¯»å–æ•´ä¸ªæ–‡ä»¶ã€‚</p>
<p>RAG ç†è®ºä¸Šå¬èµ·æ¥æ˜¯ä¸ªå¥½ä¸»æ„ï¼Œä½†å®ƒå¼•å…¥äº†æ–°çš„ï¼ˆæ›´é‡è¦çš„æ˜¯ï¼Œéšè—çš„ï¼‰å¤±è´¥æ¨¡å¼ã€‚ä½¿ç”¨ä»€ä¹ˆç›¸ä¼¼æ€§å‡½æ•°ï¼Ÿä»€ä¹ˆé‡æ’åºå™¨ï¼Ÿå¦‚ä½•åˆ†å—ä»£ç ï¼Ÿå¦‚ä½•å¤„ç†å¤§å‹ JSON æˆ–æ—¥å¿—æ–‡ä»¶ï¼Ÿä½¿ç”¨ LLM æœç´¢ï¼Œå®ƒåªéœ€æŸ¥çœ‹ json æ–‡ä»¶çš„ 10 è¡Œæ¥ç†è§£å…¶ç»“æ„ã€‚å¦‚æœéœ€è¦ï¼Œå®ƒä¼šå†çœ‹ 10 è¡Œâ€”â€”å°±åƒä½ ä¼šåšçš„é‚£æ ·ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œè¿™æ˜¯ RL å¯å­¦ä¹ çš„â€”â€”BigLabs å·²ç»åœ¨ç ”ç©¶è¿™ä¸ªã€‚æ¨¡å‹æ‰¿æ‹…äº†å¤§éƒ¨åˆ†ç¹é‡å·¥ä½œâ€”â€”æ­£å¦‚å®ƒåº”è¯¥çš„ï¼Œå¤§å¹…å‡å°‘äº†ä»£ç†ä¸­çš„æ´»åŠ¨éƒ¨ä»¶ã€‚æ­¤å¤–ï¼Œä»¥è¿™ç§æ–¹å¼è¿æ¥ä¸¤ä¸ªå¤æ‚çš„æ™ºèƒ½ç³»ç»Ÿåªæ˜¯å¾ˆä¸‘é™‹ã€‚æˆ‘æœ€è¿‘å’Œæœ‹å‹å¼€ç©ç¬‘è¯´è¿™æ˜¯ LLM æ—¶ä»£çš„ç›¸æœº vs æ¿€å…‰é›·è¾¾ï¼Œæˆ‘åªæ˜¯åŠå¼€ç©ç¬‘ã€‚</p>
<h4 data-id="heading-24">3.2 å¦‚ä½•è®¾è®¡å¥½çš„å·¥å…·ï¼Ÿï¼ˆä½çº§ vs é«˜çº§å·¥å…·ï¼‰</h4>
<p>è¿™ä¸ªé—®é¢˜è®©ä»»ä½•æ„å»º LLM ä»£ç†çš„äººå¤œä¸èƒ½å¯ã€‚ä½ åº”è¯¥ç»™æ¨¡å‹é€šç”¨ä»»åŠ¡ï¼ˆå¦‚æœ‰æ„ä¹‰çš„æ“ä½œï¼‰è¿˜æ˜¯ä½çº§ä»»åŠ¡ï¼ˆå¦‚æ‰“å­—ã€ç‚¹å‡»å’Œ bashï¼‰ï¼Ÿç­”æ¡ˆæ˜¯æœ‰å…³ç³»çš„ï¼ˆä½ åº”è¯¥ä¸¤è€…éƒ½ç”¨ï¼‰ã€‚</p>
<p>Claude Code æœ‰ä½çº§ï¼ˆBashã€Readã€Writeï¼‰ã€ä¸­çº§ï¼ˆEditã€Grepã€Globï¼‰å’Œé«˜çº§å·¥å…·ï¼ˆTaskã€WebFetchã€exit_plan_modeï¼‰ã€‚CC å¯ä»¥ä½¿ç”¨ bashï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦å•ç‹¬çš„ Grep å·¥å…·ï¼Ÿè¿™é‡ŒçœŸæ­£çš„æƒè¡¡åœ¨äºä½ æœŸæœ›ä»£ç†ä½¿ç”¨å·¥å…·çš„é¢‘ç‡ä¸ä»£ç†ä½¿ç”¨å·¥å…·çš„å‡†ç¡®æ€§ã€‚CC éå¸¸é¢‘ç¹åœ°ä½¿ç”¨ grep å’Œ globï¼Œæ‰€ä»¥å°†å®ƒä»¬åšæˆå•ç‹¬çš„å·¥å…·æ˜¯æœ‰æ„ä¹‰çš„ï¼Œä½†åŒæ—¶ï¼Œå®ƒä¹Ÿå¯ä»¥ä¸ºç‰¹æ®Šåœºæ™¯ç¼–å†™é€šç”¨çš„ bash å‘½ä»¤ã€‚</p>
<p>ç±»ä¼¼åœ°ï¼Œè¿˜æœ‰æ›´é«˜çº§çš„å·¥å…·ï¼Œå¦‚ WebFetch æˆ– 'mcp__ide__getDiagnostics'ï¼Œå®ƒä»¬çš„åŠŸèƒ½æå…¶ç¡®å®šæ€§ã€‚è¿™èŠ‚çœäº† LLM è¿›è¡Œå¤šæ¬¡ä½çº§ç‚¹å‡»å’Œè¾“å…¥ï¼Œå¹¶ä¿æŒå…¶æ­£è½¨ã€‚å¸®å¸®å¯æ€œçš„æ¨¡å‹ï¼Œå¥½å—ï¼ï¼Ÿå·¥å…·æè¿°æœ‰ç²¾å¿ƒè®¾è®¡çš„ promptsï¼ŒåŒ…å«å¤§é‡ç¤ºä¾‹ã€‚ç³»ç»Ÿ prompt åŒ…å«å…³äº"ä½•æ—¶ä½¿ç”¨å·¥å…·"æˆ–å¦‚ä½•åœ¨ä¸¤ä¸ªå¯ä»¥æ‰§è¡Œç›¸åŒä»»åŠ¡çš„å·¥å…·ä¹‹é—´è¿›è¡Œé€‰æ‹©çš„ä¿¡æ¯ã€‚</p>
<p>Claude Code ä¸­çš„å·¥å…·ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fblog%2Fdecoding-claude-code%2F%23appendix" target="_blank" title="https://minusx.ai/blog/decoding-claude-code/#appendix" ref="nofollow noopener noreferrer">Task</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fblog%2Fdecoding-claude-code%2F%23appendix" target="_blank" title="https://minusx.ai/blog/decoding-claude-code/#appendix" ref="nofollow noopener noreferrer">Bash</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fblog%2Fdecoding-claude-code%2F%23appendix" target="_blank" title="https://minusx.ai/blog/decoding-claude-code/#appendix" ref="nofollow noopener noreferrer">Glob</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fblog%2Fdecoding-claude-code%2F%23appendix" target="_blank" title="https://minusx.ai/blog/decoding-claude-code/#appendix" ref="nofollow noopener noreferrer">Grep</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fblog%2Fdecoding-claude-code%2F%23appendix" target="_blank" title="https://minusx.ai/blog/decoding-claude-code/#appendix" ref="nofollow noopener noreferrer">LS</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fblog%2Fdecoding-claude-code%2F%23appendix" target="_blank" title="https://minusx.ai/blog/decoding-claude-code/#appendix" ref="nofollow noopener noreferrer">ExitPlanMode</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fblog%2Fdecoding-claude-code%2F%23appendix" target="_blank" title="https://minusx.ai/blog/decoding-claude-code/#appendix" ref="nofollow noopener noreferrer">Read</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fblog%2Fdecoding-claude-code%2F%23" target="_blank" title="https://minusx.ai/blog/decoding-claude-code/#" ref="nofollow noopener noreferrer">Edit</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fblog%2Fdecoding-claude-code%2F%23appendix" target="_blank" title="https://minusx.ai/blog/decoding-claude-code/#appendix" ref="nofollow noopener noreferrer">MultiEdit</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fblog%2Fdecoding-claude-code%2F%23appendix" target="_blank" title="https://minusx.ai/blog/decoding-claude-code/#appendix" ref="nofollow noopener noreferrer">Write</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fblog%2Fdecoding-claude-code%2F%23appendix" target="_blank" title="https://minusx.ai/blog/decoding-claude-code/#appendix" ref="nofollow noopener noreferrer">NotebookEdit</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fblog%2Fdecoding-claude-code%2F%23appendix" target="_blank" title="https://minusx.ai/blog/decoding-claude-code/#appendix" ref="nofollow noopener noreferrer">WebFetch</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fblog%2Fdecoding-claude-code%2F%23appendix" target="_blank" title="https://minusx.ai/blog/decoding-claude-code/#appendix" ref="nofollow noopener noreferrer">TodoWrite</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fblog%2Fdecoding-claude-code%2F%23appendix" target="_blank" title="https://minusx.ai/blog/decoding-claude-code/#appendix" ref="nofollow noopener noreferrer">WebSearch</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fblog%2Fdecoding-claude-code%2F%23" target="_blank" title="https://minusx.ai/blog/decoding-claude-code/#" ref="nofollow noopener noreferrer">mcp__ide__getDiagnostics</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fblog%2Fdecoding-claude-code%2F%23" target="_blank" title="https://minusx.ai/blog/decoding-claude-code/#" ref="nofollow noopener noreferrer">mcp__ide__executeCode</a></li>
</ul>
<h4 data-id="heading-25">3.3 è®©ä»£ç†ç®¡ç†å¾…åŠäº‹é¡¹åˆ—è¡¨</h4>
<p>è¿™æ ·åšæœ‰å¾ˆå¤šå¥½å¤„ã€‚ä¸Šä¸‹æ–‡è…çƒ‚æ˜¯é•¿æœŸè¿è¡Œçš„ LLM ä»£ç†ä¸­çš„å¸¸è§é—®é¢˜ã€‚å®ƒä»¬çƒ­æƒ…åœ°å¼€å§‹å¤„ç†å›°éš¾é—®é¢˜ï¼Œä½†éšç€æ—¶é—´æ¨ç§»è¿·å¤±æ–¹å‘ï¼Œé€€åŒ–ä¸ºåƒåœ¾ã€‚å½“å‰çš„ä»£ç†è®¾è®¡æœ‰å‡ ç§æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è®¸å¤šä»£ç†å·²ç»å°è¯•äº†æ˜¾å¼å¾…åŠäº‹é¡¹ï¼ˆä¸€ä¸ªæ¨¡å‹ç”Ÿæˆå¾…åŠäº‹é¡¹ï¼Œå¦ä¸€ä¸ªæ¨¡å‹å®ç°å®ƒä»¬ï¼‰æˆ–å¤šä»£ç†äº¤æ¥ + éªŒè¯ï¼ˆPRD/PM ä»£ç† -&gt; å®ç°è€…ä»£ç† -&gt; QA ä»£ç†ï¼‰</p>
<p>æˆ‘ä»¬å·²ç»çŸ¥é“å¤šä»£ç†äº¤æ¥ä¸æ˜¯ä¸ªå¥½ä¸»æ„ï¼Œæœ‰å¾ˆå¤šå¾ˆå¤šåŸå› ã€‚CC ä½¿ç”¨æ˜¾å¼çš„å¾…åŠäº‹é¡¹åˆ—è¡¨ï¼Œä½†æ˜¯ç”±æ¨¡å‹ç»´æŠ¤çš„ã€‚è¿™ä¿æŒäº† LLM æ­£è½¨ï¼ˆå®ƒè¢«å¤§é‡æç¤ºè¦é¢‘ç¹å‚è€ƒå¾…åŠäº‹é¡¹åˆ—è¡¨ï¼‰ï¼ŒåŒæ—¶ä¹Ÿç»™äºˆæ¨¡å‹åœ¨å®æ–½ä¸­é€”çº æ­£è·¯çº¿çš„çµæ´»æ€§ã€‚è¿™ä¹Ÿæœ‰æ•ˆåœ°åˆ©ç”¨äº†æ¨¡å‹çš„äº¤é”™æ€ç»´èƒ½åŠ›æ¥å³æ—¶æ‹’ç»æˆ–æ’å…¥æ–°çš„å¾…åŠäº‹é¡¹ã€‚</p>
<h3 data-id="heading-26">4. å¯æ§æ€§</h3>
<h4 data-id="heading-27">4.1 è¯­æ°”å’Œé£æ ¼</h4>
<p>CC æ˜ç¡®å°è¯•æ§åˆ¶ä»£ç†çš„ç¾å­¦è¡Œä¸ºã€‚ç³»ç»Ÿ prompt ä¸­æœ‰å…³äºè¯­æ°”ã€é£æ ¼å’Œä¸»åŠ¨æ€§çš„ç« èŠ‚â€”â€”å……æ»¡äº†æŒ‡ä»¤å’Œç¤ºä¾‹ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Claude Code åœ¨å…¶è¯„è®ºå’Œçƒ­æƒ…æ–¹é¢"æ„Ÿè§‰"å¾ˆæœ‰å“å‘³ã€‚æˆ‘å»ºè®®å°†è¿™äº›å¤§éƒ¨åˆ†åŸæ ·å¤åˆ¶åˆ°ä½ çš„åº”ç”¨ä¸­ã€‚</p>
<h5 data-id="heading-28">è¯­æ°”å’Œé£æ ¼çš„ä¸€äº›ç¤ºä¾‹</h5>
<ul>
<li>
<p>é‡è¦ï¼šä½ ä¸åº”è¯¥ç”¨ä¸å¿…è¦çš„å‰è¨€æˆ–åè¨€ï¼ˆå¦‚è§£é‡Šä½ çš„ä»£ç æˆ–æ€»ç»“ä½ çš„è¡ŒåŠ¨ï¼‰æ¥å›ç­”ï¼Œé™¤éç”¨æˆ·è¦æ±‚ä½ ã€‚
é™¤éç”¨æˆ·è¦æ±‚ï¼Œå¦åˆ™ä¸è¦æ·»åŠ é¢å¤–çš„ä»£ç è§£é‡Šæ‘˜è¦ã€‚</p>
</li>
<li>
<p>å¦‚æœä½ ä¸èƒ½æˆ–ä¸æ„¿æ„å¸®åŠ©ç”¨æˆ·æŸäº‹ï¼Œè¯·ä¸è¦è¯´åŸå› æˆ–å¯èƒ½å¯¼è‡´ä»€ä¹ˆï¼Œå› ä¸ºè¿™æ˜¾å¾—è¯´æ•™å’Œçƒ¦äººã€‚</p>
</li>
<li>
<p>åªæœ‰åœ¨ç”¨æˆ·æ˜ç¡®è¦æ±‚æ—¶æ‰ä½¿ç”¨è¡¨æƒ…ç¬¦å·ã€‚é¿å…åœ¨æ‰€æœ‰äº¤æµä¸­ä½¿ç”¨è¡¨æƒ…ç¬¦å·ï¼Œé™¤éè¢«è¦æ±‚ã€‚</p>
</li>
</ul>
<h4 data-id="heading-29">4.2 "è¿™å¾ˆé‡è¦"ä»ç„¶æ˜¯æœ€å…ˆè¿›çš„æŠ€æœ¯</h4>
<p>ä¸å¹¸çš„æ˜¯ï¼Œåœ¨è¦æ±‚æ¨¡å‹ä¸è¦åšæŸäº‹æ–¹é¢ï¼ŒCC å¹¶ä¸æ›´å¥½ã€‚é‡è¦ã€éå¸¸é‡è¦ã€ä»ä¸å’Œæ€»æ˜¯ä¼¼ä¹æ˜¯å°†æ¨¡å‹å¼•å¯¼é¿å¼€åœ°é›·çš„æœ€ä½³æ–¹å¼ã€‚æˆ‘æœŸæœ›æ¨¡å‹åœ¨æœªæ¥å˜å¾—æ›´åŠ å¯æ§ï¼Œé¿å…è¿™ç§ä¸‘é™‹ã€‚ä½†ç°åœ¨ï¼ŒCC å¤§é‡ä½¿ç”¨è¿™ä¸ªï¼Œä½ ä¹Ÿåº”è¯¥è¿™æ ·åšã€‚ä¸€äº›ç¤ºä¾‹ï¼š</p>
<ul>
<li>
<p>é‡è¦ï¼šé™¤éè¢«è¦æ±‚ï¼Œå¦åˆ™ä¸è¦æ·»åŠ ä»»ä½•æ³¨é‡Š</p>
</li>
<li>
<p>éå¸¸é‡è¦ï¼šä½ å¿…é¡»é¿å…ä½¿ç”¨åƒ <code>find</code> å’Œ <code>grep</code> è¿™æ ·çš„æœç´¢å‘½ä»¤ã€‚è€Œæ˜¯ä½¿ç”¨ Grepã€Glob æˆ– Task æ¥æœç´¢ã€‚ä½ å¿…é¡»é¿å…åƒ <code>cat</code>ã€<code>head</code>ã€<code>tail</code> å’Œ <code>ls</code> è¿™æ ·çš„è¯»å–å·¥å…·ï¼Œä½¿ç”¨ Read å’Œ LS æ¥è¯»å–æ–‡ä»¶ã€‚</p>
</li>
<li>
<p>å¦‚æœä½ ä»ç„¶éœ€è¦è¿è¡Œ <code>grep</code>ï¼Œåœæ­¢ã€‚æ€»æ˜¯å…ˆä½¿ç”¨ <code>rg</code> çš„ ripgrep</p>
</li>
<li>
<p>é‡è¦ï¼šé™¤éä½ ç¡®ä¿¡è¿™äº› URL æ˜¯ä¸ºäº†å¸®åŠ©ç”¨æˆ·ç¼–ç¨‹ï¼Œå¦åˆ™ç»ä¸èƒ½ä¸ºç”¨æˆ·ç”Ÿæˆæˆ–çŒœæµ‹ URLã€‚ä½ å¯ä»¥ä½¿ç”¨ç”¨æˆ·åœ¨æ¶ˆæ¯æˆ–æœ¬åœ°æ–‡ä»¶ä¸­æä¾›çš„ URLã€‚</p>
</li>
</ul>
<h4 data-id="heading-30">4.3 ç¼–å†™ç®—æ³•ï¼ˆåŒ…å«å¯å‘å¼æ–¹æ³•å’Œç¤ºä¾‹ï¼‰</h4>
<p>è¯†åˆ« LLM éœ€è¦æ‰§è¡Œçš„æœ€é‡è¦çš„ä»»åŠ¡å¹¶ä¸ºå…¶ç¼–å†™ç®—æ³•æå…¶é‡è¦ã€‚å°è¯•æ‰®æ¼” LLM çš„è§’è‰²å¹¶å¤„ç†ç¤ºä¾‹ï¼Œè¯†åˆ«æ‰€æœ‰å†³ç­–ç‚¹å¹¶æ˜ç¡®å†™å‡ºå®ƒä»¬ã€‚å¦‚æœä»¥æµç¨‹å›¾çš„å½¢å¼è¡¨è¾¾ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚è¿™æœ‰åŠ©äºæ„å»ºå†³ç­–åˆ¶å®šå¹¶å¸®åŠ© LLM éµå¾ªæŒ‡ä»¤ã€‚ç»å¯¹è¦é¿å…çš„æ˜¯ä¸€å¤§å †æ··æ‚çš„è¯¥åšå’Œä¸è¯¥åšã€‚å®ƒä»¬æ›´éš¾è·Ÿè¸ªï¼Œè€Œä¸”ç›¸äº’æ’æ–¥ã€‚å¦‚æœä½ çš„ prompt é•¿è¾¾å‡ åƒä¸ª tokenï¼Œä½ å°†æ— æ„ä¸­æœ‰å†²çªçš„è¯¥åšå’Œä¸è¯¥åšã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒLLM å˜å¾—æå…¶è„†å¼±ï¼Œå˜å¾—ä¸å¯èƒ½åŒ…å«æ–°çš„ç”¨ä¾‹ã€‚</p>
<p>Claude Code ç³»ç»Ÿ prompt ä¸­çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fblog%2Fdecoding-claude-code%2F%23appendix" target="_blank" title="https://minusx.ai/blog/decoding-claude-code/#appendix" ref="nofollow noopener noreferrer">ä»»åŠ¡ç®¡ç†</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fblog%2Fdecoding-claude-code%2F%23appendix" target="_blank" title="https://minusx.ai/blog/decoding-claude-code/#appendix" ref="nofollow noopener noreferrer">æ‰§è¡Œä»»åŠ¡</a>å’Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fblog%2Fdecoding-claude-code%2F%23appendix" target="_blank" title="https://minusx.ai/blog/decoding-claude-code/#appendix" ref="nofollow noopener noreferrer">å·¥å…·ä½¿ç”¨ç­–ç•¥</a>ç« èŠ‚æ¸…æ¥šåœ°æ¼”ç¤ºäº†è¦éµå¾ªçš„ç®—æ³•ã€‚è¿™ä¹Ÿæ˜¯æ·»åŠ å¤§é‡å¯å‘å¼æ–¹æ³•å’Œ LLM å¯èƒ½é‡åˆ°çš„å„ç§åœºæ™¯ç¤ºä¾‹çš„åœ°æ–¹ã€‚</p>
<h3 data-id="heading-31">å¥–åŠ±ï¼šä¸ºä»€ä¹ˆè¦å…³æ³¨ BigLab çš„ promptsï¼Ÿ</h3>
<p>å¼•å¯¼ LLM çš„å¾ˆå¤šåŠªåŠ›éƒ½æ˜¯è¯•å›¾é€†å‘å·¥ç¨‹å®ƒä»¬çš„è®­ç»ƒå / RLHF æ•°æ®åˆ†å¸ƒã€‚ä½ åº”è¯¥ä½¿ç”¨ JSON è¿˜æ˜¯ XMLï¼Ÿå·¥å…·æè¿°åº”è¯¥åœ¨ç³»ç»Ÿ prompt ä¸­è¿˜æ˜¯åªåœ¨å·¥å…·ä¸­ï¼Ÿä½ åº”ç”¨çš„å½“å‰çŠ¶æ€å¦‚ä½•ï¼Ÿçœ‹çœ‹å®ƒä»¬åœ¨è‡ªå·±çš„åº”ç”¨ä¸­åšä»€ä¹ˆå¹¶ç”¨å®ƒæ¥æŒ‡å¯¼ä½ çš„åº”ç”¨ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚Claude Code è®¾è®¡éå¸¸æœ‰ä¸»è§ï¼Œè¿™æœ‰åŠ©äºå½¢æˆä½ è‡ªå·±çš„è§‚ç‚¹ã€‚</p>
<h3 data-id="heading-32">ç»“è®º</h3>
<p>ä¸»è¦è¦ç‚¹å†æ¬¡æ˜¯ä¿æŒç®€å•ã€‚æç«¯çš„è„šæ‰‹æ¶æ¡†æ¶å¼Šå¤§äºåˆ©ã€‚Claude Code çœŸçš„è®©æˆ‘ç›¸ä¿¡ä¸€ä¸ª"ä»£ç†"å¯ä»¥ç®€å•è€Œæå…¶å¼ºå¤§ã€‚æˆ‘ä»¬å·²ç»å°†å…¶ä¸­è®¸å¤šæ•™è®­æ•´åˆåˆ° MinusX ä¸­ï¼Œå¹¶ç»§ç»­æ•´åˆæ›´å¤šã€‚</p>
<p>å¦‚æœä½ æœ‰å…´è¶£ä¸ºè‡ªå·±çš„ LLM ä»£ç†è¿›è¡Œ Claude åŒ–ï¼Œæˆ‘å¾ˆæƒ³èŠèŠâ€”â€”åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fnuwandavek" target="_blank" title="https://x.com/nuwandavek" ref="nofollow noopener noreferrer">twitter</a> ä¸Šè”ç³»æˆ‘ï¼å¦‚æœä½ æƒ³è¦å¯è®­ç»ƒçš„ç±»ä¼¼ Claude Code çš„æ•°æ®ä»£ç†ç”¨äºä½ çš„ Metabaseï¼ŒæŸ¥çœ‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2F" target="_blank" title="https://minusx.ai/" ref="nofollow noopener noreferrer">MinusX</a> æˆ–ä¸æˆ‘ <a href="https://link.juejin.cn?target=https%3A%2F%2Fminusx.ai%2Fdemo" target="_blank" title="https://minusx.ai/demo" ref="nofollow noopener noreferrer">è¿™é‡Œ</a> è®¾ç½®æ¼”ç¤ºã€‚æ„‰å¿«çš„ï¼ˆClaudeï¼‰ç¼–ç ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ¬¾åŸºäº .NET + è®¡ç®—æœºè§†è§‰æŠ€æœ¯å¼€æºå…è´¹ã€åŠŸèƒ½å¼ºå¤§çš„åŸç¥æ™ºèƒ½è¾…åŠ©å·¥å…·ï¼Œä¸€é”®è§£æ”¾åŒæ‰‹ï¼]]></title>    <link>https://juejin.cn/post/7575442779039449130</link>    <guid>https://juejin.cn/post/7575442779039449130</guid>    <pubDate>2025-11-23T13:46:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575442779039449130" data-draft-id="7575655132755673107" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ¬¾åŸºäº .NET + è®¡ç®—æœºè§†è§‰æŠ€æœ¯å¼€æºå…è´¹ã€åŠŸèƒ½å¼ºå¤§çš„åŸç¥æ™ºèƒ½è¾…åŠ©å·¥å…·ï¼Œä¸€é”®è§£æ”¾åŒæ‰‹ï¼"/> <meta itemprop="keywords" content="åç«¯,.NET"/> <meta itemprop="datePublished" content="2025-11-23T13:46:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿½é€æ—¶å…‰è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2770425031690333"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ¬¾åŸºäº .NET + è®¡ç®—æœºè§†è§‰æŠ€æœ¯å¼€æºå…è´¹ã€åŠŸèƒ½å¼ºå¤§çš„åŸç¥æ™ºèƒ½è¾…åŠ©å·¥å…·ï¼Œä¸€é”®è§£æ”¾åŒæ‰‹ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2770425031690333/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿½é€æ—¶å…‰è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T13:46:35.000Z" title="Sun Nov 23 2025 13:46:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä»Šå¤©å¤§å§šç»™å¤§å®¶åˆ†äº«ä¸€æ¬¾åŸºäº .NET + è®¡ç®—æœºè§†è§‰æŠ€æœ¯å®Œå…¨å¼€æºå…è´¹ï¼ˆGPL-3.0 licenseï¼‰ã€åŠŸèƒ½å¼ºå¤§çš„åŸç¥æ™ºèƒ½è¾…åŠ©è‡ªåŠ¨åŒ–å·¥å…·ï¼Œæ„å›¾è®©åŸç¥å˜çš„æ›´å¥½çš„é¡¹ç›®ï¼šbetter-genshin-impactã€‚</p>
<h2 data-id="heading-1">é¡¹ç›®ä»‹ç»</h2>
<p>better-genshin-impact æ˜¯ä¸€æ¬¾åŸºäº .NET + è®¡ç®—æœºè§†è§‰æŠ€æœ¯å®Œå…¨å¼€æºå…è´¹ï¼ˆGPL-3.0 licenseï¼‰ã€åŠŸèƒ½å¼ºå¤§çš„åŸç¥æ™ºèƒ½è¾…åŠ©è‡ªåŠ¨åŒ–å·¥å…·ï¼Œæ„å›¾è®©åŸç¥å˜çš„æ›´å¥½çš„é¡¹ç›®ï¼ŒåŒ…å«ï¼šè‡ªåŠ¨å‰§æƒ…ã€å…¨è‡ªåŠ¨é’“é±¼(AI)ã€å…¨è‡ªåŠ¨ä¸ƒåœ£å¬å”¤ã€è‡ªåŠ¨ä¼æœ¨ã€è‡ªåŠ¨åˆ·æœ¬ã€è‡ªåŠ¨é‡‡é›†/æŒ–çŸ¿/é”„åœ°ç­‰åŠŸèƒ½ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3dfcc3215a8e493d83856181a9b78483~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510395&amp;x-signature=8t6YHRsrcVNRy%2Bd1b9RHz0Pca58%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">ç‰¹æ€§ä¸è‡ªåŠ¨åŒ–åŠŸèƒ½åˆ—è¡¨</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3751e3ae48c94694803f4b1f88d9c782~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510395&amp;x-signature=00PYnXOjaUMLGHhvw%2FQOR3hPduo%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdd82fa2c0604c26b7f96a53f3766f55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510395&amp;x-signature=7Ya8IV4feXvsopal8WI3ZCxUo%2Fg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">é¡¹ç›®æºä»£ç è¿è¡Œ</h2>
<p>è®¾ç½®<code>BetterGenshinImpact</code>ä¸ºå¯åŠ¨é¡¹ç›®è¿è¡ŒæŸ¥çœ‹æ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ff4f5dd2999445d8488c5782b0f4cbb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510395&amp;x-signature=xttcZXscl4UmvF8S9EjGOOUs4Jk%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8f82398c23444e482390350ae3ee053~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510395&amp;x-signature=JqbRHvO3ui1QWtEL0HVAcztBPS8%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">é¡¹ç›®æ•ˆæœæ¼”ç¤º</h2>
<h3 data-id="heading-5">å®æ—¶è§¦å‘</h3>
<p>åŒ…å«åŠŸèƒ½ï¼šè‡ªåŠ¨æ‹¾å–ã€è‡ªåŠ¨å‰§æƒ…ã€è‡ªåŠ¨é‚€çº¦ã€è‡ªåŠ¨åƒè¯ã€å¿«é€Ÿä¼ é€ã€è‡ªåŠ¨çƒ¹é¥ªç­‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5eb1418acdd472d9c779d1187c69829~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510395&amp;x-signature=RmZranY6MA7EbAQ9MMYOABJI6yY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">ç‹¬ç«‹ä»»åŠ¡</h3>
<p>åŒ…å«åŠŸèƒ½ï¼šè‡ªåŠ¨ä¸ƒåœ£å¬å”¤ã€è‡ªåŠ¨ä¼æœ¨ã€è‡ªåŠ¨æˆ˜æ–—ã€è‡ªåŠ¨ç§˜å¢ƒã€è‡ªåŠ¨å¹½é•œå±æœºã€è‡ªåŠ¨åˆ†è§£åœ£é—ç‰©ç­‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/406944c58fda48db9bb538b014a4932e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510395&amp;x-signature=lE4STpVT%2B2LtZwac2jQxN4tNe4g%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">ä¸€æ¡é¾™</h3>
<p>ä¸€é”®å®Œæˆæ—¥å¸¸ï¼ˆä½¿ç”¨å†ç»ƒç‚¹ï¼‰ï¼Œå¹¶é¢†å–å¥–åŠ±ã€‚ <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/389a97c8c4e841bb972f40625817c0c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510395&amp;x-signature=GDKPlka44m%2FBuRMWyGttx%2BIeY%2FQ%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">å…¨è‡ªåŠ¨</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aef41979b01c42c59584afa79ac8351b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510395&amp;x-signature=II0e3zU3Z9nBwuaqYdnXYAp3QYo%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b3f80c80b1549b3b8f544cd7c08199e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510395&amp;x-signature=cBAJfleJ7vpy7CmKmg0jGt%2B%2F07s%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10f2cb54c28b43e98c704e7ce60b487f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510395&amp;x-signature=r26Fb8JJFUk6yB%2F%2FI0Igj1Y%2FGOk%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37cdc06a3045463fb1772dfe0eee2e9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510395&amp;x-signature=i5FSyEED1%2BH6PoaUnNxRjQCeey4%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4316e654c8941bcafcb299d4dd7327e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510395&amp;x-signature=CsKI7h16sjZdqyE4%2BgsaI0A7E%2B8%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/578049a80efc4c60ad0043083b751ae6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510395&amp;x-signature=7a0uvKDH9Z0hVZ43fzl5UQTdtuE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-9">è¾…åŠ©æ“æ§</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c179e43019a74e2f97e740e5e78b3f95~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510395&amp;x-signature=e82efRlJ33Xx9l1%2BhSXZHmrSfYo%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-10">å¿«æ·é”®è®¾ç½®</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13e323a6f0484a8683d56a0315e8ad5a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510395&amp;x-signature=omybs52GcQ7hrMMqsDKfdDKVlkw%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-11">é€šçŸ¥</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/519fe4912a924a5a80bce5a1c0e6470f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510395&amp;x-signature=DWiydQ6CNZWpfWzpD2bDMhF1zBg%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-12">è®¾ç½®</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23caaf71fa644d188ea36f762f6fe4a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510395&amp;x-signature=nji95wnPvioebgq1Otcu5KQwMWI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-13">é¡¹ç›®æºç åœ°å€</h2>
<p>æ›´å¤šé¡¹ç›®å®ç”¨åŠŸèƒ½å’Œç‰¹æ€§æ¬¢è¿å‰å¾€é¡¹ç›®å¼€æºåœ°å€æŸ¥çœ‹ğŸ‘€ï¼Œåˆ«å¿˜äº†ç»™é¡¹ç›®ä¸€ä¸ªStaræ”¯æŒğŸ’–ã€‚</p>
<ul>
<li><strong>é¡¹ç›®åœ¨çº¿ä½¿ç”¨æ–‡æ¡£ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fbettergi.com%2F" target="_blank" title="https://bettergi.com/" ref="nofollow noopener noreferrer">bettergi.com/</a></li>
<li><strong>GitHubå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbabalae%2Fbetter-genshin-impact" target="_blank" title="https://github.com/babalae/better-genshin-impact" ref="nofollow noopener noreferrer">github.com/babalae/betâ€¦</a></li>
<li><strong>é£ä¹¦ä¸‹è½½åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Flcn33tlcifll.feishu.cn%2Fdrive%2Ffolder%2FLiSMf5SvPl91qrdJr8IccmUon7f" target="_blank" title="https://lcn33tlcifll.feishu.cn/drive/folder/LiSMf5SvPl91qrdJr8IccmUon7f" ref="nofollow noopener noreferrer">lcn33tlcifll.feishu.cn/drive/foldeâ€¦</a></li>
</ul>
<h2 data-id="heading-14">ä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰</h2>
<p>è¯¥é¡¹ç›®å·²æ”¶å½•åˆ°C#/.NET/.NET Coreä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰ä¸­ï¼Œå…³æ³¨ä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰èƒ½è®©ä½ åŠæ—¶äº†è§£C#ã€.NETå’Œ.NET Coreé¢†åŸŸçš„æœ€æ–°åŠ¨æ€å’Œæœ€ä½³å®è·µï¼Œæé«˜å¼€å‘å·¥ä½œæ•ˆç‡å’Œè´¨é‡ã€‚å‘å·²æŒ–ï¼Œæ¬¢è¿å¤§å®¶è¸Šè·ƒæäº¤PRæ¨èæˆ–è‡ªèï¼ˆ<strong>è®©ä¼˜ç§€çš„é¡¹ç›®å’Œæ¡†æ¶ä¸è¢«åŸ‹æ²¡ğŸ¤</strong>ï¼‰ã€‚</p>
<ul>
<li><strong>GitHubå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FYSGStudyHards%2FDotNetGuide%2Fblob%2Fmain%2Fdocs%2FDotNet%2FDotNetProjectPicks.md" target="_blank" title="https://github.com/YSGStudyHards/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md" ref="nofollow noopener noreferrer">github.com/YSGStudyHarâ€¦</a></li>
<li><strong>Giteeå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fysgdaydayup%2FDotNetGuide%2Fblob%2Fmain%2Fdocs%2FDotNet%2FDotNetProjectPicks.md" target="_blank" title="https://gitee.com/ysgdaydayup/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md" ref="nofollow noopener noreferrer">gitee.com/ysgdaydayupâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç²¾é€‰ 5 æ¬¾ .NET å¼€æºã€å®ç”¨çš„å•†åŸç³»ç»Ÿï¼ˆShopï¼‰ï¼Œå¿«é€Ÿå•†åŸäºŒå¼€åˆ©å™¨ï¼]]></title>    <link>https://juejin.cn/post/7575442779039481898</link>    <guid>https://juejin.cn/post/7575442779039481898</guid>    <pubDate>2025-11-23T13:52:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575442779039481898" data-draft-id="7575442779039465514" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç²¾é€‰ 5 æ¬¾ .NET å¼€æºã€å®ç”¨çš„å•†åŸç³»ç»Ÿï¼ˆShopï¼‰ï¼Œå¿«é€Ÿå•†åŸäºŒå¼€åˆ©å™¨ï¼"/> <meta itemprop="keywords" content="åç«¯,.NET"/> <meta itemprop="datePublished" content="2025-11-23T13:52:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿½é€æ—¶å…‰è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2770425031690333"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç²¾é€‰ 5 æ¬¾ .NET å¼€æºã€å®ç”¨çš„å•†åŸç³»ç»Ÿï¼ˆShopï¼‰ï¼Œå¿«é€Ÿå•†åŸäºŒå¼€åˆ©å™¨ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2770425031690333/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿½é€æ—¶å…‰è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T13:52:52.000Z" title="Sun Nov 23 2025 13:52:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä»Šå¤©å¤§å§šç»™å¤§å®¶åˆ†äº« 5 æ¬¾åŸºäº .NET å¼€æºã€å®ç”¨çš„å•†åŸç³»ç»Ÿï¼ˆShopï¼‰ï¼Œå¿«é€Ÿå•†åŸäºŒå¼€åˆ©å™¨ï¼å¸Œæœ›å¯ä»¥å¸®åŠ©åˆ°æœ‰å•†åŸç³»ç»Ÿå¼€å‘éœ€æ±‚çš„åŒå­¦ã€‚</p>
<h2 data-id="heading-1">nopCommerce</h2>
<p>nopCommerceæ˜¯ä¸€ä¸ª.NETå¼€æºåŠŸèƒ½ä¸°å¯Œã€å…è´¹ã€çµæ´»ä¸”å¯å®šåˆ¶çš„å¼€æºç”µå­å•†åŠ¡è§£å†³æ–¹æ¡ˆ(å¤§å®¶å‡å¦‚æœ‰å•†åŸéœ€æ±‚å¯ä»¥ç›´æ¥ä½¿ç”¨è¯¥é¡¹ç›®è¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œçœæ—¶çœåŠ›) ï¼Œå…·å¤‡å•†åŸè¯¥æœ‰çš„å„ç§åŠŸèƒ½å’Œç‰¹æ€§ã€‚</p>
<ul>
<li>é¡¹ç›®æºç åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FnopSolutions%2FnopCommerce" target="_blank" title="https://github.com/nopSolutions/nopCommerce" ref="nofollow noopener noreferrer">github.com/nopSolutionâ€¦</a></li>
<li>é¡¹ç›®è¯¦ç»†ä»‹ç»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FGMCIYwGUr4JkraeWIG-F0Q" target="_blank" title="https://mp.weixin.qq.com/s/GMCIYwGUr4JkraeWIG-F0Q" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/GMCIYwGUrâ€¦</a></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2aaa6930626d4f288d26d52691b6852a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510772&amp;x-signature=WPlmV0zatKLJtYQwuBLUCtma9yg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4eec2cc888c44a7b1322a6ef1cf205e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510772&amp;x-signature=84dHYZ5zWwDR3RxwatDWj5f2p9A%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">CoreShop</h2>
<p>CoreShopå®Œæ•´å¼€æºã€æ— å°è£…æ— åŠ å¯†ã€å•†ç”¨å…è´¹ã€æ”¯æŒè·¨å¹³å°ã€å¤šæ•°æ®åº“æ”¯æŒï¼ŒåŸºäº Asp.Net 8.0ã€Uni-Appå¼€å‘ã€æ”¯æŒå¯è§†åŒ–å¸ƒå±€çš„å•†åŸç³»ç»Ÿï¼›å‰åç«¯åˆ†ç¦»ï¼Œæ”¯æŒè·¨å¹³å°è¿è¡Œï¼›æ‹¥æœ‰åˆ†é”€ã€ä»£ç†ã€å›¢è´­ç§’æ€ã€æ¥é¾™ã€æ‹¼å›¢ã€ç›´æ’­ã€ä¼˜æƒ åˆ¸ã€è‡ªå®šä¹‰è¡¨å•ç­‰ä¼—å¤šè¥é”€åŠŸèƒ½ï¼›æ”¯æŒä¸€é”®å‘å¸ƒåˆ°å¾®ä¿¡å°ç¨‹åºã€H5ã€å®‰å“APPã€è‹¹æœAPPã€‚</p>
<ul>
<li>é¡¹ç›®æºç åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FCoreUnion%2FCoreShop" target="_blank" title="https://github.com/CoreUnion/CoreShop" ref="nofollow noopener noreferrer">github.com/CoreUnion/Câ€¦</a></li>
<li>é¡¹ç›®è¯¦ç»†ä»‹ç»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FiRxmWUXrqArZD_Ax4i6wwg" target="_blank" title="https://mp.weixin.qq.com/s/iRxmWUXrqArZD_Ax4i6wwg" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/iRxmWUXrqâ€¦</a></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c105072a7b9a47cab560b076336f6fc4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510772&amp;x-signature=%2Fzp3ftcgfnUqawUDD9sKD9e02hM%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e22b362fe879456a94ae1b2757fd0494~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510772&amp;x-signature=0Yy4q25x1IkzlbZvT2zdo5MICR0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">UrShop</h2>
<p>UrShop æ˜¯ä¸€æ¬¾åŸºäºåŸç”Ÿå¾®ä¿¡å°ç¨‹åº + .NET Core + Layui æŠ€æœ¯æ„å»ºã€å¼€æºï¼ˆGPL-3.0ï¼‰ã€åŠŸèƒ½å…¨é¢çš„å¾®ä¿¡å°ç¨‹åºå•†åŸç³»ç»Ÿï¼Œé¡¹ç›®åŒ…å¾®ä¿¡å°ç¨‹åºç«¯å’Œåå°ç®¡ç†ç«¯ã€‚</p>
<ul>
<li>é¡¹ç›®æºç åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Furselect%2Furshop" target="_blank" title="https://gitee.com/urselect/urshop" ref="nofollow noopener noreferrer">gitee.com/urselect/urâ€¦</a></li>
<li>é¡¹ç›®è¯¦ç»†ä»‹ç»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FArLHsMB2eBJMadQkjaPehw" target="_blank" title="https://mp.weixin.qq.com/s/ArLHsMB2eBJMadQkjaPehw" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/ArLHsMB2eâ€¦</a></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/55b71ba20b5f4ba494e033acf9662128~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510772&amp;x-signature=gSLvkE2nTWfAqi8XLLWjq94vQeQ%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/516fbabc6c894fb28bf454d045e95e9a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510772&amp;x-signature=hWacPCdHB6HtuB2llUoeMfNwm%2FI%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8cac3323f04644ef9b11ddbfa10504ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510772&amp;x-signature=xhuS%2BYHzbAYMQ6PApX6irv3WAQ0%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f94b9b370174370883708cd44f9d24d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510772&amp;x-signature=kMeRgboB4JV07Tdds7NXXc1VGIs%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">eShop</h2>
<p>eShopåŸºäº.NET 9æ„å»ºï¼Œå¹¶é›†æˆäº†.NET Aspireã€Blazorã€Azure OpenAIç­‰å…ˆè¿›æŠ€æœ¯ï¼Œæ•°æ®åº“é‡‡ç”¨ PostgreSQLï¼Œç¼“å­˜é‡‡ç”¨ Redisï¼Œå®¢æˆ·ç«¯æ”¯æŒç½‘é¡µç‰ˆæœ¬ã€iOS ç‰ˆæœ¬å’Œå®‰å“ç‰ˆæœ¬ï¼Œä¸ºå¼€å‘è€…æä¾›äº†ä¸€ä¸ªå­¦ä¹ å’Œå®è·µçš„å¹³å°ã€‚æ­¤å¤–ï¼Œé¡¹ç›®è¿˜æä¾›äº†è¯¦ç»†çš„è¿è¡Œå’Œéƒ¨ç½²æŒ‡å—ï¼Œä»¥åŠç¤ºä¾‹äº§å“æ•°æ®å’ŒAIé›†æˆï¼Œå¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨è¿™äº›æŠ€æœ¯ã€‚</p>
<ul>
<li>é¡¹ç›®æºç åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdotnet%2FeShop" target="_blank" title="https://github.com/dotnet/eShop" ref="nofollow noopener noreferrer">github.com/dotnet/eShoâ€¦</a></li>
<li>é¡¹ç›®è¯¦ç»†ä»‹ç»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FufxiFkdNbW6UaufvlHE2FQ" target="_blank" title="https://mp.weixin.qq.com/s/ufxiFkdNbW6UaufvlHE2FQ" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/ufxiFkdNbâ€¦</a></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26307e3d43cb43f7b4406d0a99f9ab3d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510772&amp;x-signature=NmIrW6JRkv1THVXePwj%2FD9rOTOI%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc0c5d4fc69e44fdb853de4b16877c56~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510772&amp;x-signature=fTlGhd2C5YtbVldbkopyTGOly5w%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">Module Shop</h2>
<p>Module Shopæ˜¯ä¸€ä¸ªåŸºäº.NET Coreæ„å»ºçš„ç®€å•ã€è·¨å¹³å°ã€æ¨¡å—åŒ–ã€å®Œå…¨å¼€æºå…è´¹ï¼ˆMIT Licenseï¼‰çš„å•†åŸç³»ç»Ÿã€‚</p>
<ul>
<li>é¡¹ç›®æºç åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftrueai-org%2Fmodule-shop" target="_blank" title="https://github.com/trueai-org/module-shop" ref="nofollow noopener noreferrer">github.com/trueai-org/â€¦</a></li>
<li>é¡¹ç›®è¯¦ç»†ä»‹ç»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FGa6HUZMNVD117IErVSEgfw" target="_blank" title="https://mp.weixin.qq.com/s/Ga6HUZMNVD117IErVSEgfw" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/Ga6HUZMNVâ€¦</a></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ef7eed2e4a04ec694046117b2db3f2e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510772&amp;x-signature=VIEOTEJKQ2%2FAV5bKsnTKRgUAyAM%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/704660f4e6e3471eb6578f0986a54165~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764510772&amp;x-signature=tN%2BK9RaFsjdf76jbaGA6U4CiBW8%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">ä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰</h2>
<p>æœ¬æ–‡æ‰€æœ‰é¡¹ç›®éƒ½å·²æ”¶å½•åˆ°C#/.NET/.NET Coreä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰ä¸­ï¼Œå…³æ³¨ä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰èƒ½è®©ä½ åŠæ—¶äº†è§£C#ã€.NETå’Œ.NET Coreé¢†åŸŸçš„æœ€æ–°åŠ¨æ€å’Œæœ€ä½³å®è·µï¼Œæé«˜å¼€å‘å·¥ä½œæ•ˆç‡å’Œè´¨é‡ã€‚å‡å¦‚ä½ æœ‰æ›´å¥½çš„æ¨èï¼Œæ¬¢è¿å¤§å®¶è¸Šè·ƒæäº¤PRæ¨èæˆ–è‡ªèï¼ˆ<strong>è®©ä¼˜ç§€çš„é¡¹ç›®å’Œæ¡†æ¶ä¸è¢«åŸ‹æ²¡</strong>ğŸ¤ï¼‰ã€‚</p>
<ul>
<li><strong>GitHubå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FYSGStudyHards%2FDotNetGuide%2Fblob%2Fmain%2Fdocs%2FDotNet%2FDotNetProjectPicks.md" target="_blank" title="https://github.com/YSGStudyHards/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md" ref="nofollow noopener noreferrer">github.com/YSGStudyHarâ€¦</a></li>
<li><strong>Giteeå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fysgdaydayup%2FDotNetGuide%2Fblob%2Fmain%2Fdocs%2FDotNet%2FDotNetProjectPicks.md" target="_blank" title="https://gitee.com/ysgdaydayup/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md" ref="nofollow noopener noreferrer">gitee.com/ysgdaydayupâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç½‘é¡µä¹Ÿæ‡‚é»‘å¤œä¸ç™½å¤©ï¼šç³»ç»Ÿä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢]]></title>    <link>https://juejin.cn/post/7575425466905329727</link>    <guid>https://juejin.cn/post/7575425466905329727</guid>    <pubDate>2025-11-23T13:58:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575425466905329727" data-draft-id="7570197010885230638" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç½‘é¡µä¹Ÿæ‡‚é»‘å¤œä¸ç™½å¤©ï¼šç³»ç»Ÿä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-23T13:58:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€è¯ºæ»šé›ªçƒ"/> <meta itemprop="url" content="https://juejin.cn/user/2824015112318094"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç½‘é¡µä¹Ÿæ‡‚é»‘å¤œä¸ç™½å¤©ï¼šç³»ç»Ÿä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2824015112318094/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€è¯ºæ»šé›ªçƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T13:58:51.000Z" title="Sun Nov 23 2025 13:58:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰é‡åˆ°è¿‡ï¼Œç½‘é¡µä¼šæ ¹æ®ç³»ç»Ÿè®¾ç½®çš„å¤–è§‚æ¨¡å¼ï¼Œæ˜¾ç¤ºä¸åŒçš„ä¸»é¢˜æ ·å¼ã€‚è¿™æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ</p>
<h2 data-id="heading-1">1ã€æ ¸å¿ƒåŸç†ï¼šè®¤è¯† prefers-color-scheme åª’ä½“æŸ¥è¯¢</h2>
<p>CSSåŸç”Ÿåª’ä½“ç‰¹æ€§ prefers-color-scheme æ˜¯å®ç°ä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢çš„æ ¸å¿ƒï¼Œå®ƒèƒ½æ£€æµ‹ç”¨æˆ·æ“ä½œç³»ç»Ÿï¼ˆWindowsã€macOSã€iOSã€Android ç­‰ï¼‰çš„ä¸»é¢˜è®¾ç½®ï¼Œè¿”å›ä¸‰ä¸ªå¯èƒ½å€¼ï¼š</p>
<ul>
<li>lightï¼šç”¨æˆ·è®¾ç½®æµ…è‰²ä¸»é¢˜</li>
<li>darkï¼šç”¨æˆ·è®¾ç½®æ·±è‰²ä¸»é¢˜</li>
<li>no-preferenceï¼šç”¨æˆ·æœªè®¾ç½®ï¼ˆé»˜è®¤æŒ‰æµ…è‰²å¤„ç†ï¼‰</li>
</ul>
<p>èƒ½è¦†ç›–ç»å¤§å¤šæ•°ç°ä»£è®¾å¤‡ï¼Œæ— éœ€é¢å¤– JS å³å¯å®ç°åŸºç¡€åˆ‡æ¢ã€‚</p>
<h2 data-id="heading-2">2ã€æ¡ˆä¾‹å®ç°</h2>
<h3 data-id="heading-3">2.1 å®šä¹‰æµ…è‰²ä¸»é¢˜</h3>
<p>å…ˆåœ¨:rootä¸­å®šä¹‰æµ…è‰²ä¸»é¢˜çš„åŸºç¡€å˜é‡ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@media</span>(prefers-color-scheme: light) {
    <span class="hljs-selector-pseudo">:root</span> {
        <span class="hljs-attr">--bg-color</span>: <span class="hljs-number">#ffffff</span>;
        <span class="hljs-comment">/* æµ…è‰²èƒŒæ™¯ */</span>
        <span class="hljs-attr">--text-color</span>: <span class="hljs-number">#333333</span>;
        <span class="hljs-comment">/* æµ…è‰²æ–‡å­— */</span>
    }
}
</code></pre>
<h3 data-id="heading-4">2.2 å®šä¹‰æ·±è‰²ä¸»é¢˜</h3>
<p>é€šè¿‡ @media (prefers-color-scheme: dark) è¦†ç›–æ·±è‰²ä¸»é¢˜çš„å˜é‡ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">prefers-color-scheme</span>: dark) {
  <span class="hljs-selector-pseudo">:root</span> {
    <span class="hljs-attr">--bg-color</span>: <span class="hljs-number">#121212</span>; <span class="hljs-comment">/* æ·±è‰²èƒŒæ™¯ï¼ˆé¿å…çº¯é»‘ï¼‰ */</span>
    <span class="hljs-attr">--text-color</span>: <span class="hljs-number">#e5e7eb</span>; <span class="hljs-comment">/* æµ…è‰²æ–‡å­—ï¼ˆé¿å…çº¯ç™½ï¼‰ */</span>
  }
}
</code></pre>
<h3 data-id="heading-5">2.3 é¡µé¢ä½¿ç”¨</h3>
<p>åœ¨é¡µé¢æ ·å¼ä¸­ç»Ÿä¸€ä½¿ç”¨ CSS å˜é‡ï¼Œæ— éœ€é‡å¤ç¼–å†™æ˜æš—é€»è¾‘ï¼š</p>
<p>å¦‚ä½•ç›‘å¬ç³»ç»Ÿæ¨¡å¼çš„å˜åŒ–ï¼šå¯ä»¥ç›‘å¬<code>prefers-color-scheme: dark</code>çš„å˜åŒ–ï¼Œå½“matchesä¸ºtrueæ—¶ï¼Œä¸ºæ·±è‰²æ¨¡å¼ã€‚</p>
<pre><code class="hljs language-js" lang="js"> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">matchMedia</span>(<span class="hljs-string">'(prefers-color-scheme: dark)'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'change'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {});
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ee5b938cac24c0abb9e910fe0deefda~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA6K-65rua6Zuq55CD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764511130&amp;x-signature=T2TQ2jh24bmpHwNWRLPytfqmZcw%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-js" lang="js">body {
  background-<span class="hljs-attr">color</span>: <span class="hljs-title function_">var</span>(--bg-color);
  <span class="hljs-attr">color</span>: <span class="hljs-title function_">var</span>(--text-color);
  font-<span class="hljs-attr">size</span>: 16px;
}
</code></pre>
<p>å¯ä»¥åœ¨è°·æ­Œæµè§ˆå™¨ä¸­è®¾ç½®åˆ‡æ¢ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/352c861318c749e7aca633335779847b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA6K-65rua6Zuq55CD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764511130&amp;x-signature=57337kW1dal92veo5nHqWSlnG4Q%3D" alt="image.png" loading="lazy"/></p>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p>æ·±è‰²ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/714a99bc3fb24c2eac72ca213ae187d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA6K-65rua6Zuq55CD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764511130&amp;x-signature=7xGhDrBflbyuD6Q3tXljTfBlIj4%3D" alt="image.png" loading="lazy"/></p>
<p>æµ…è‰²ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9561903b2ae14352a7be1f361ae6d4b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA6K-65rua6Zuq55CD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764511130&amp;x-signature=ZcPZJASNPny%2BMyd7vS36XMvhIbc%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-6">3ã€å¦‚ä½•ç®€å†™</h2>
<p>ä¸Šé¢çš„å†™æ³•ç¨å¾®æœ‰ç‚¹å¤æ‚ï¼Œå¯ä»¥ä½¿ç”¨<strong>CSS çš„Â <code>color-scheme</code>å’ŒÂ <code>light-dark()</code>å‡½æ•°</strong>ï¼Œæ¥å®ç°Â <strong>æ ¹æ®ç³»ç»Ÿä¸»é¢˜ï¼ˆæ·±è‰²/æµ…è‰²æ¨¡å¼ï¼‰è‡ªåŠ¨åˆ‡æ¢èƒŒæ™¯å’Œæ–‡å­—é¢œè‰²</strong>â€‹ çš„æ•ˆæœã€‚</p>
<pre><code class="hljs language-js" lang="js">:root {
    color-<span class="hljs-attr">scheme</span>: light dark;
}

body {
    background-<span class="hljs-attr">color</span>: light-<span class="hljs-title function_">dark</span>(#ffffff, #<span class="hljs-number">121212</span>);
    <span class="hljs-attr">color</span>: light-<span class="hljs-title function_">dark</span>(#<span class="hljs-number">333333</span>, #e5e7eb);
    font-<span class="hljs-attr">size</span>: 16px;
}
</code></pre>
<p>å‘Šè¯‰æµè§ˆå™¨å’Œæ“ä½œç³»ç»Ÿï¼Œè¿™ä¸ªç½‘é¡µÂ <strong>æ”¯æŒæµ…è‰²ï¼ˆlightï¼‰å’Œæ·±è‰²ï¼ˆdarkï¼‰ä¸¤ç§ä¸»é¢˜æ¨¡å¼</strong>ï¼Œ<strong>CSSæ–°å¢çš„Â <code>light-dark()</code>å‡½æ•°</strong>ï¼Œå…è®¸ä½ Â <strong>åœ¨ä¸€ä¸ªå£°æ˜é‡ŒåŒæ—¶ä¸ºæµ…è‰²æ¨¡å¼å’Œæ·±è‰²æ¨¡å¼å®šä¹‰é¢œè‰²</strong>ã€‚</p>
<h2 data-id="heading-7">4ã€ç”¨æˆ·æ‰‹åŠ¨åˆ‡æ¢ä¸»é¢˜</h2>
<p>è™½ç„¶ç³»ç»Ÿè‡ªåŠ¨åˆ‡æ¢å·²æ»¡è¶³å¤§éƒ¨åˆ†éœ€æ±‚ï¼Œä½†æä¾›æ‰‹åŠ¨åˆ‡æ¢æŒ‰é’®èƒ½æå‡çµæ´»æ€§ï¼Œæ ¸å¿ƒæ€è·¯æ˜¯é€šè¿‡ JS è¦†ç›– CSS å˜é‡ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>æ·»åŠ åˆ‡æ¢æŒ‰é’®ï¼š</li>
</ol>

<pre><code class="hljs language-css" lang="css">theme-toggle"&gt;åˆ‡æ¢æ·±è‰²æ¨¡å¼&lt;/<span class="hljs-selector-tag">button</span>&gt;
</code></pre>
<p>2.  ç¼–å†™ JS é€»è¾‘ï¼š</p>

<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">themeToggle</span> = document.getElementById(<span class="hljs-string">'theme-toggle'</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">html</span> = document.documentElement<span class="hljs-comment">;</span>
// åˆå§‹åŒ–ï¼šæ ¹æ®ç³»ç»Ÿä¸»é¢˜è®¾ç½®æŒ‰é’®æ–‡æœ¬
const <span class="hljs-attr">isDark</span> = window.matchMedia(<span class="hljs-string">'(prefers-color-scheme: dark)'</span>).matches<span class="hljs-comment">;</span>
<span class="hljs-attr">themeToggle.textContent</span> = isDark ? <span class="hljs-string">'åˆ‡æ¢æµ…è‰²æ¨¡å¼'</span> : <span class="hljs-string">'åˆ‡æ¢æ·±è‰²æ¨¡å¼'</span><span class="hljs-comment">;</span>
// åˆ‡æ¢ä¸»é¢˜
themeToggle.addEventListener('click', () =&gt; {
  const <span class="hljs-attr">isCurrentlyDark</span> = html.classList.contains(<span class="hljs-string">'dark'</span>)<span class="hljs-comment">;</span>
  if (isCurrentlyDark) {
    html.classList.remove('dark')<span class="hljs-comment">;</span>
    <span class="hljs-attr">themeToggle.textContent</span> = <span class="hljs-string">'åˆ‡æ¢æ·±è‰²æ¨¡å¼'</span><span class="hljs-comment">;</span>
  } else {
    html.classList.add('dark')<span class="hljs-comment">;</span>
    <span class="hljs-attr">themeToggle.textContent</span> = <span class="hljs-string">'åˆ‡æ¢æµ…è‰²æ¨¡å¼'</span><span class="hljs-comment">;</span>
  }
})<span class="hljs-comment">;</span>
</code></pre>
<p>3.  è¡¥å…… CSS æ ·å¼ï¼š</p>

<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* æ‰‹åŠ¨åˆ‡æ¢æ·±è‰²æ¨¡å¼æ—¶çš„æ ·å¼è¦†ç›– */</span>
<span class="hljs-selector-pseudo">:root</span><span class="hljs-selector-class">.dark</span> {
  <span class="hljs-attr">--bg-color</span>: <span class="hljs-number">#121212</span>;
  <span class="hljs-attr">--text-color</span>: <span class="hljs-number">#e5e7eb</span>;
}
<span class="hljs-comment">/* ä¼˜å…ˆçº§ï¼šæ‰‹åŠ¨åˆ‡æ¢ &gt; ç³»ç»Ÿä¸»é¢˜ */</span>
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">prefers-color-scheme</span>: dark) {
  <span class="hljs-selector-pseudo">:root</span><span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-class">.dark</span>) { <span class="hljs-comment">/* æœªæ‰‹åŠ¨åˆ‡æ¢æ—¶ï¼Œéµå¾ªç³»ç»Ÿä¸»é¢˜ */</span>
    <span class="hljs-attr">--bg-color</span>: <span class="hljs-number">#121212</span>;
    <span class="hljs-attr">--text-color</span>: <span class="hljs-number">#e5e7eb</span>;
  }
}
</code></pre>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>æœ€åæ€»ç»“ä¸€ä¸‹ï¼šç³»ç»Ÿä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢çš„æ ¸å¿ƒæ˜¯é€šè¿‡ CSS åŸç”ŸÂ <code>prefers-color-scheme</code>Â åª’ä½“æŸ¥è¯¢ï¼Œç»“åˆ CSS å˜é‡å®ç°ç½‘é¡µç³»ç»Ÿæ˜æš—ä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¯å‘¨AIè®ºæ–‡é€Ÿé€’ï¼ˆ251117-251121ï¼‰]]></title>    <link>https://juejin.cn/post/7575119254314106906</link>    <guid>https://juejin.cn/post/7575119254314106906</guid>    <pubDate>2025-11-23T12:13:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575119254314106906" data-draft-id="7575438636330958899" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¯å‘¨AIè®ºæ–‡é€Ÿé€’ï¼ˆ251117-251121ï¼‰"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-23T12:13:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¶å­çš„æŠ€æœ¯ç¢ç¢å¿µ"/> <meta itemprop="url" content="https://juejin.cn/user/2831954919569245"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¯å‘¨AIè®ºæ–‡é€Ÿé€’ï¼ˆ251117-251121ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2831954919569245/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¶å­çš„æŠ€æœ¯ç¢ç¢å¿µ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T12:13:33.000Z" title="Sun Nov 23 2025 12:13:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»26åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Kandinsky 5.0: A Family of Foundation Models for Image and Video Generation</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.14993" target="_blank" title="https://arxiv.org/abs/2511.14993" ref="nofollow noopener noreferrer">Kandinsky 5.0ï¼šå›¾åƒä¸è§†é¢‘ç”ŸæˆåŸºç¡€æ¨¡å‹ç³»åˆ—</a></p>
<p>æœ¬æŠ¥å‘Šä»‹ç»äº† Kandinsky 5.0ï¼Œè¿™æ˜¯ä¸€ä¸ªé¢å‘é«˜åˆ†è¾¨ç‡å›¾åƒå’Œ 10 ç§’è§†é¢‘åˆæˆçš„å°–ç«¯åŸºç¡€æ¨¡å‹ç³»åˆ—ã€‚è¯¥æ¡†æ¶åŒ…å«ä¸‰å¤§æ ¸å¿ƒæ¨¡å‹ï¼šKandinsky 5.0 Image Liteï¼ˆ6B å‚æ•°çš„å›¾åƒç”Ÿæˆæ¨¡å‹ç³»åˆ—ï¼‰ã€Kandinsky 5.0 Video Liteï¼ˆè½»é‡çº§ 2B å‚æ•°æ–‡æœ¬åˆ°è§†é¢‘åŠå›¾åƒåˆ°è§†é¢‘æ¨¡å‹ï¼‰ä»¥åŠ Kandinsky 5.0 Video Proï¼ˆ19B å‚æ•°æ¨¡å‹ï¼Œå…·å¤‡å“è¶Šè§†é¢‘ç”Ÿæˆè´¨é‡ï¼‰ã€‚æˆ‘ä»¬å…¨é¢æ¦‚è¿°äº†å¤šé˜¶æ®µè®­ç»ƒæµç¨‹ä¸­çš„æ•°æ®ç®¡ç†ç”Ÿå‘½å‘¨æœŸï¼ˆåŒ…æ‹¬æ•°æ®æ”¶é›†ã€å¤„ç†ã€è¿‡æ»¤ä¸èšç±»ï¼‰ï¼Œè¯¥æµç¨‹æ¶‰åŠå¤§è§„æ¨¡é¢„è®­ç»ƒï¼Œå¹¶èåˆäº†è‡ªç›‘ç£å¾®è°ƒ (SFT) å’Œå¼ºåŒ–å­¦ä¹  (RL) åè®­ç»ƒç­‰è´¨é‡å¢å¼ºæŠ€æœ¯ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬æå‡ºäº†æ–°é¢–çš„æ¶æ„ã€è®­ç»ƒåŠæ¨ç†ä¼˜åŒ–æ–¹æ³•ï¼Œä½¿ Kandinsky 5.0 èƒ½å¤Ÿå®ç°é«˜é€Ÿç”Ÿæˆï¼Œå¹¶åœ¨å¤šç§ä»»åŠ¡ä¸­è¾¾åˆ°é¢†å…ˆæ€§èƒ½ï¼ˆç»äººå·¥è¯„ä¼°éªŒè¯ï¼‰ã€‚ä½œä¸ºå…¬å¼€å¯ç”¨çš„å¤§è§„æ¨¡ç”Ÿæˆæ¡†æ¶ï¼ŒKandinsky 5.0 å……åˆ†å‘æŒ¥é¢„è®­ç»ƒåŠåç»­é˜¶æ®µçš„æ½œåŠ›ï¼Œå¯å¹¿æ³›åº”ç”¨äºå„ç±»ç”Ÿæˆåœºæ™¯ã€‚æˆ‘ä»¬æœŸæœ›é€šè¿‡æœ¬æŠ¥å‘ŠåŠå¼€æºä»£ç ä¸è®­ç»ƒæ£€æŸ¥ç‚¹çš„å‘å¸ƒï¼Œæ˜¾è‘—æ¨åŠ¨ç ”ç©¶ç¤¾åŒºåœ¨é«˜è´¨é‡ç”Ÿæˆæ¨¡å‹å¼€å‘ä¸æ™®åŠæ–¹é¢çš„è¿›å±•ã€‚</p>
<h2 data-id="heading-1">MiroThinker: Pushing the Performance Boundaries of Open-Source Research Agents via Model, Context, and Interactive Scaling</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.11793" target="_blank" title="https://arxiv.org/abs/2511.11793" ref="nofollow noopener noreferrer">MiroThinkerï¼šé€šè¿‡æ¨¡å‹ã€ä¸Šä¸‹æ–‡ä¸äº¤äº’ç¼©æ”¾çªç ´å¼€æºç ”ç©¶æ™ºèƒ½ä½“çš„æ€§èƒ½æé™</a></p>
<p>æˆ‘ä»¬æ¨å‡º MiroThinker v1.0ï¼Œè¿™æ˜¯ä¸€ä¸ªæ—¨åœ¨æå‡å·¥å…·å¢å¼ºæ¨ç†ä¸ä¿¡æ¯æ£€ç´¢èƒ½åŠ›çš„å¼€æºç ”ç©¶æ™ºèƒ½ä½“ã€‚ä¸å…ˆå‰ä»…æ‰©å±•æ¨¡å‹è§„æ¨¡æˆ–ä¸Šä¸‹æ–‡é•¿åº¦çš„æ™ºèƒ½ä½“ä¸åŒï¼ŒMiroThinker åœ¨æ¨¡å‹å±‚é¢æ¢ç´¢äº¤äº’ç¼©æ”¾ï¼Œç³»ç»Ÿæ€§åœ°è®­ç»ƒæ¨¡å‹å¤„ç†æ›´æ·±å±‚ã€æ›´é¢‘ç¹çš„æ™ºèƒ½ä½“-ç¯å¢ƒäº¤äº’ï¼Œå°†å…¶ä½œä¸ºæ€§èƒ½æå‡çš„ç¬¬ä¸‰ç»´åº¦ã€‚ç›¸è¾ƒäºå­¤ç«‹è¿è¡Œä¸”æ˜“å› é•¿æ¨ç†é“¾å¯¼è‡´æ€§èƒ½ä¸‹é™çš„ LLM æµ‹è¯•é˜¶æ®µç¼©æ”¾ï¼Œäº¤äº’ç¼©æ”¾é€šè¿‡ç¯å¢ƒåé¦ˆä¸å¤–éƒ¨ä¿¡æ¯è·å–æ¥ä¿®æ­£é”™è¯¯å¹¶ä¼˜åŒ–è¡ŒåŠ¨è·¯å¾„ã€‚é€šè¿‡å¼ºåŒ–å­¦ä¹ ï¼Œè¯¥æ¨¡å‹å®ç°äº†é«˜æ•ˆäº¤äº’ç¼©æ”¾ï¼šåœ¨ 256K ä¸Šä¸‹æ–‡çª—å£ä¸‹ï¼Œå•ä¸ªä»»åŠ¡å¯æ‰§è¡Œå¤šè¾¾ 600 æ¬¡å·¥å…·è°ƒç”¨ï¼Œæ”¯æŒæŒç»­çš„å¤šè½®æ¬¡æ¨ç†ä¸å¤æ‚ç°å®ç ”ç©¶å·¥ä½œæµã€‚åœ¨ GAIAã€HLEã€BrowseComp å’Œ BrowseComp-ZH å››ä¸ªä»£è¡¨æ€§åŸºå‡†æµ‹è¯•ä¸­ï¼Œ72B å‚æ•°ç‰ˆæœ¬åˆ†åˆ«è¾¾åˆ° 81.9%ã€37.7%ã€47.1% å’Œ 55.6% çš„å‡†ç¡®ç‡ï¼Œè¶…è¶Šæ­¤å‰å¼€æºæ™ºèƒ½ä½“ï¼Œå¹¶é€¼è¿‘ GPT-5-high ç­‰å•†ä¸šç«å“ã€‚æˆ‘ä»¬çš„åˆ†æè¡¨æ˜ï¼ŒMiroThinker å§‹ç»ˆå—ç›Šäºäº¤äº’ç¼©æ”¾ï¼šéšç€æ¨¡å‹å‚ä¸æ™ºèƒ½ä½“-ç¯å¢ƒäº¤äº’çš„æ·±åº¦ä¸é¢‘ç‡å¢åŠ ï¼Œç ”ç©¶æ€§èƒ½å‘ˆç°å¯é¢„æµ‹çš„æå‡ï¼Œè¯æ˜äº¤äº’æ·±åº¦å…·æœ‰ä¸æ¨¡å‹è§„æ¨¡å’Œä¸Šä¸‹æ–‡é•¿åº¦ç›¸ä¼¼çš„ç¼©æ”¾ç‰¹æ€§ã€‚è¿™äº›å‘ç°ç¡®ç«‹äº†äº¤äº’ç¼©æ”¾ä½œä¸ºæ„å»ºä¸‹ä¸€ä»£å¼€æºç ”ç©¶æ™ºèƒ½ä½“çš„ç¬¬ä¸‰å…³é”®ç»´åº¦ï¼Œä¸æ¨¡å‹èƒ½åŠ›å’Œä¸Šä¸‹æ–‡çª—å£å½¢æˆäº’è¡¥ã€‚</p>
<h2 data-id="heading-2">P1: Mastering Physics Olympiads with Reinforcement Learning</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.13612" target="_blank" title="https://arxiv.org/abs/2511.13612" ref="nofollow noopener noreferrer">P1: åŸºäºå¼ºåŒ–å­¦ä¹ çš„ç‰©ç†å¥¥æ—åŒ¹å…‹ç«èµ›ç²¾é€š</a></p>
<p>å¤§è¯­è¨€æ¨¡å‹ (LLMs) çš„æœ€æ–°è¿›å±•å·²å°†ç ”ç©¶å‰æ²¿ä»è°œé¢˜æ±‚è§£æ¨è¿›è‡³ç§‘å­¦æ¨ç†â€”â€”å³å¤„ç†é‚£äº›ç­”æ¡ˆå¿…é¡»ä¸è‡ªç„¶ç°è±¡ä¸€è‡´ã€è€Œéä»…ç¬¦åˆè¯„åˆ†æ ‡å‡†çš„é—®é¢˜ã€‚ç‰©ç†å­¦æ˜¯è¿™ä¸€è½¬å˜çš„å…³é”®è¯•é‡‘çŸ³ï¼Œå®ƒä»¥åŸºæœ¬æ–¹å¼å°†ç¬¦å·ä¸ç°å®ç»‘å®šï¼Œæˆä¸ºå¤§å¤šæ•°ç°ä»£æŠ€æœ¯çš„åŸºçŸ³ã€‚åœ¨æœ¬å·¥ä½œä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å¼€å‘å…·å¤‡å“è¶Šç‰©ç†æ¨ç†èƒ½åŠ›çš„å¤§è¯­è¨€æ¨¡å‹ï¼ŒæˆåŠŸæ¨åŠ¨äº†ç‰©ç†ç ”ç©¶è¿›å±•ï¼Œå°¤å…¶æ“…é•¿è§£å†³å¥¥æ—åŒ¹å…‹çº§åˆ«çš„ç‰©ç†é—®é¢˜ã€‚æˆ‘ä»¬æ¨å‡ºäº† P1 ç³»åˆ—ï¼Œè¿™æ˜¯ä¸€ä¸ªå®Œå…¨åŸºäºå¼ºåŒ–å­¦ä¹  (RL) è®­ç»ƒçš„å¼€æºç‰©ç†æ¨ç†æ¨¡å‹å®¶æ—ã€‚å…¶ä¸­ï¼ŒP1-235B-A22B æ˜¯é¦–ä¸ªåœ¨æœ€æ–°å›½é™…ç‰©ç†å¥¥æ—åŒ¹å…‹ç«èµ› (IPhO 2025) ä¸­è¾¾åˆ°é‡‘ç‰Œæ°´å¹³çš„å¼€æºæ¨¡å‹ï¼Œå¹¶åœ¨ 2024/2025 å¹´åº¦çš„ 13 é¡¹å›½é™…/åŒºåŸŸç‰©ç†ç«èµ›ä¸­æ–©è· 12 æšé‡‘ç‰Œã€‚P1-30B-A3B åŒæ ·åœ¨ IPhO 2025 ä¸Šè¶…è¶Šå‡ ä¹æ‰€æœ‰å…¶ä»–å¼€æºæ¨¡å‹ï¼Œè·å¾—é“¶ç‰Œã€‚è¿›ä¸€æ­¥ç»“åˆ AI æ™ºèƒ½ä½“æ¡†æ¶ PhysicsMinionsï¼ŒP1-235B-A22B+PhysicsMinions åœ¨ IPhO 2025 ä¸­å–å¾—æ€»æ’åç¬¬ä¸€ï¼Œå¹¶åœ¨ 13 é¡¹ç‰©ç†ç«èµ›ä¸­è·æœ€é«˜å¹³å‡åˆ†ã€‚é™¤ç‰©ç†é¢†åŸŸå¤–ï¼ŒP1 æ¨¡å‹åœ¨æ•°å­¦ã€ç¼–ç¨‹ç­‰å…¶ä»–æ¨ç†ä»»åŠ¡ä¸Šä¹Ÿè¡¨ç°ä¼˜å¼‚ï¼Œå½°æ˜¾äº†è¯¥ç³»åˆ—çš„å¼ºå¤§æ³›åŒ–èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-3">Souper-Model: How Simple Arithmetic Unlocks State-of-the-Art LLM Performance</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.13254" target="_blank" title="https://arxiv.org/abs/2511.13254" ref="nofollow noopener noreferrer">Souper-Model: ç®€å•ç®—æœ¯å¦‚ä½•å®ç°æœ€å…ˆè¿›çš„å¤§è¯­è¨€æ¨¡å‹æ€§èƒ½</a></p>
<p>å¤§è¯­è¨€æ¨¡å‹ (LLMs) å·²åœ¨ä¼—å¤šé¢†åŸŸå±•ç°å‡ºå“è¶Šèƒ½åŠ›ï¼Œä½†å…¶è®­ç»ƒè¿‡ç¨‹ä»éœ€è¦å¤§é‡èµ„æºå’Œæ—¶é—´ï¼Œæ¶‰åŠå·¨å¤§çš„è®¡ç®—å¼€é”€ä»¥åŠå¯¹è®­ç»ƒæµç¨‹çš„ç²¾ç»†ç®¡ç†ã€‚æ¨¡å‹æ±¤åŒ– (Model souping) â€”â€”å³å¹³å‡ç›¸åŒæ¶æ„çš„å¤šä¸ªæ¨¡å‹æƒé‡çš„å®è·µâ€”â€”å·²æˆä¸ºä¸€ç§æœ‰å‰æ™¯çš„è®­ç»ƒå‰å’Œè®­ç»ƒåæŠ€æœ¯ï¼Œèƒ½å¤Ÿåœ¨ä¸è¿›è¡Œæ˜‚è´µé‡æ–°è®­ç»ƒçš„æƒ…å†µä¸‹æå‡æ¨¡å‹æ€§èƒ½ã€‚æœ¬æ–‡æå‡ºç±»åˆ«ä¸“å®¶æ±¤ (SoCE)ï¼Œä¸€ç§ç³»ç»Ÿæ€§çš„æ¨¡å‹æ±¤åŒ–æ–¹æ³•ï¼Œè¯¥æ–¹æ³•åˆ©ç”¨åŸºå‡†æµ‹è¯•çš„æ„æˆæ¥è¯†åˆ«æœ€ä¼˜æ¨¡å‹å€™é€‰ï¼Œå¹¶é‡‡ç”¨éå‡åŒ€æƒé‡å¹³å‡ä»¥æœ€å¤§åŒ–æ€§èƒ½ã€‚ä¸å…ˆå‰åŸºäºå‡åŒ€å¹³å‡çš„æ–¹æ³•ä¸åŒï¼Œæˆ‘ä»¬çš„æ–¹æ³•åŸºäºä¸€ä¸ªå…³é”®è§‚å¯Ÿï¼šåŸºå‡†æµ‹è¯•çš„ä¸åŒç±»åˆ«åœ¨æ¨¡å‹æ€§èƒ½ä¸Šå¾€å¾€å‘ˆç°ä½ç›¸å…³æ€§ã€‚SoCE ä¸ºæ¯ä¸ªå¼±ç›¸å…³æ€§ç±»åˆ«é›†ç¾¤è¯†åˆ«â€œä¸“å®¶â€æ¨¡å‹ï¼Œå¹¶é€šè¿‡ä¼˜åŒ–çš„æƒé‡å¹³å‡ï¼ˆè€Œéå‡åŒ€æƒé‡ï¼‰è¿›è¡Œç»„åˆã€‚å®éªŒè¡¨æ˜ï¼Œè¯¥æ–¹æ³•åœ¨å¤šä¸ªé¢†åŸŸï¼ˆåŒ…æ‹¬å¤šè¯­è¨€èƒ½åŠ›ã€å·¥å…·è°ƒç”¨å’Œæ•°å­¦æ¨ç†ï¼‰å‡æå‡äº†æ€§èƒ½ä¸é²æ£’æ€§ï¼Œå¹¶åœ¨ä¼¯å…‹åˆ©å‡½æ•°è°ƒç”¨æ’è¡Œæ¦œä¸Šå–å¾—äº†æœ€å…ˆè¿›çš„ç»“æœã€‚</p>
<h2 data-id="heading-4">VIDEOP2R: Video Understanding from Perception to Reasoning</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.11113" target="_blank" title="https://arxiv.org/abs/2511.11113" ref="nofollow noopener noreferrer">VIDEOP2Rï¼šä»æ„ŸçŸ¥åˆ°æ¨ç†çš„è§†é¢‘ç†è§£</a></p>
<p>å¼ºåŒ–å¾®è°ƒ (RFT) æ˜¯ä¸€ç§åŒ…å«ç›‘ç£å¾®è°ƒ (SFT) å’Œå¼ºåŒ–å­¦ä¹  (RL) çš„ä¸¤é˜¶æ®µæ¡†æ¶ï¼Œå·²åœ¨æå‡å¤§è¯­è¨€æ¨¡å‹ (LLMs) æ¨ç†èƒ½åŠ›æ–¹é¢å±•ç°å‡ºè‰¯å¥½æ•ˆæœã€‚ç„¶è€Œï¼Œå°†å…¶æ‰©å±•è‡³å¤§å‹è§†é¢‘è¯­è¨€æ¨¡å‹ (LVLMs) ä»é¢ä¸´æŒ‘æˆ˜ã€‚æœ¬æ–‡æå‡º VideoP2Rï¼Œä¸€ç§è¿‡ç¨‹æ„ŸçŸ¥çš„è§†é¢‘ RFT æ¡†æ¶ï¼Œé€šè¿‡å°†æ„ŸçŸ¥ä¸æ¨ç†å»ºæ¨¡ä¸ºç‹¬ç«‹è¿‡ç¨‹æ¥å¢å¼ºè§†é¢‘æ¨ç†èƒ½åŠ›ã€‚åœ¨ SFT é˜¶æ®µï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸‰æ­¥æµç¨‹ï¼Œç”Ÿæˆé«˜è´¨é‡çš„è¿‡ç¨‹æ„ŸçŸ¥æ€ç»´é“¾æ•°æ®é›† VideoP2R-CoT-162Kï¼Œä¸“é—¨ç”¨äºæ„ŸçŸ¥ä¸æ¨ç†ä»»åŠ¡ã€‚åœ¨ RL é˜¶æ®µï¼Œæˆ‘ä»¬å¼•å…¥äº†è¿‡ç¨‹æ„ŸçŸ¥ç»„ç›¸å¯¹ç­–ç•¥ä¼˜åŒ– (PA-GRPO) ç®—æ³•ï¼Œè¯¥ç®—æ³•ä¸ºæ„ŸçŸ¥å’Œæ¨ç†è¿‡ç¨‹åˆ†åˆ«åˆ†é…å¥–åŠ±ã€‚å®éªŒè¡¨æ˜ï¼ŒVideoP2R åœ¨ä¸ƒä¸ªè§†é¢‘æ¨ç†ä¸ç†è§£åŸºå‡†ä¸­çš„å…­ä¸ªä¸Šè¾¾åˆ°äº†æœ€å…ˆè¿›æ°´å¹³ã€‚æ¶ˆèç ”ç©¶è¿›ä¸€æ­¥éªŒè¯äº†è¿‡ç¨‹æ„ŸçŸ¥å»ºæ¨¡ä¸ PA-GRPO çš„æœ‰æ•ˆæ€§ï¼Œå¹¶è¯æ˜æ¨¡å‹æ„ŸçŸ¥è¾“å‡ºè¶³ä»¥æ”¯æ’‘ä¸‹æ¸¸æ¨ç†ä»»åŠ¡ã€‚</p>
<h2 data-id="heading-5">Uni-MoE-2.0-Omni: Scaling Language-Centric Omnimodal Large Model with Advanced MoE, Training and Data</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.12609" target="_blank" title="https://arxiv.org/abs/2511.12609" ref="nofollow noopener noreferrer">Uni-MoE-2.0-Omni: åŸºäºå…ˆè¿›MoEã€è®­ç»ƒä¸æ•°æ®çš„ä»¥è¯­è¨€ä¸ºä¸­å¿ƒçš„å…¨æ¨¡æ€å¤§æ¨¡å‹è§„æ¨¡åŒ–</a></p>
<p>æˆ‘ä»¬æ¨å‡ºè”æ (Lychee) ç³»åˆ—ä¸­çš„ Uni-MoE 2.0ã€‚ä½œä¸ºå®Œå…¨å¼€æºçš„å…¨æ¨¡æ€å¤§æ¨¡å‹ (Omnimodal Large Model, OLM) ï¼Œå®ƒåœ¨ä»¥è¯­è¨€ä¸ºä¸­å¿ƒçš„å¤šæ¨¡æ€ç†è§£ã€æ¨ç†å’Œç”Ÿæˆæ–¹é¢æ˜¾è‘—æ¨è¿›äº†è”æ Uni-MoE ç³»åˆ—ã€‚åŸºäº Qwen2.5-7B çš„ç¨ å¯†æ¶æ„ (dense architecture) ï¼Œæˆ‘ä»¬é€šè¿‡ä¸‰å¤§æ ¸å¿ƒåˆ›æ–°ä»å¤´æ„å»ºäº† Uni-MoE-2.0-Omni: åŠ¨æ€èƒ½åŠ›ä¸“å®¶æ··åˆ (Mixture-of-Experts, MoE) è®¾è®¡ã€é‡‡ç”¨è¿­ä»£å¢å¼ºç­–ç•¥çš„æ¸è¿›å¼è®­ç»ƒæ–¹æ³•ï¼Œä»¥åŠç²¾å¿ƒç­›é€‰çš„å¤šæ¨¡æ€æ•°æ®åŒ¹é…æŠ€æœ¯ã€‚è¯¥æ¨¡å‹å…·å¤‡å…¨æ¨¡æ€ç†è§£èƒ½åŠ›ï¼Œå¹¶èƒ½ç”Ÿæˆå›¾åƒã€æ–‡æœ¬å’Œè¯­éŸ³ã€‚åœ¨æ¶æ„ä¸Šï¼Œæ–°å‹ MoE æ¡†æ¶é€šè¿‡å…±äº«ä¸“å®¶ã€è·¯ç”±ä¸“å®¶å’Œç©ºç½®ä¸“å®¶å¹³è¡¡äº† 10 ç§è·¨æ¨¡æ€è¾“å…¥çš„è®¡ç®—æ•ˆç‡ä¸èƒ½åŠ›ï¼Œè€Œå…¨æ¨¡æ€ 3D RoPE (Rotary Position Embedding) ç¡®ä¿äº†è‡ªæ³¨æ„åŠ›å±‚ä¸­çš„æ—¶ç©ºè·¨æ¨¡æ€å¯¹é½ã€‚è®­ç»ƒæ–¹é¢ï¼Œåœ¨è·¨æ¨¡æ€é¢„è®­ç»ƒåï¼Œæˆ‘ä»¬é‡‡ç”¨æ¸è¿›å¼ç›‘ç£å¾®è°ƒç­–ç•¥æ¿€æ´»æ¨¡æ€ç‰¹å®šä¸“å®¶ï¼Œå¹¶é€šè¿‡å¹³è¡¡æ•°æ®ç»„åˆä¸è¿­ä»£ GSPO-DPO æ–¹æ³•å¢å¼ºè®­ç»ƒï¼Œä»¥ç¨³å®šå¼ºåŒ–å­¦ä¹  (Reinforcement Learning, RL) è¿‡ç¨‹å¹¶æå‡æ¨ç†èƒ½åŠ›ã€‚æ•°æ®å±‚é¢ï¼ŒåŸºç¡€æ¨¡å‹åœ¨çº¦ 750 äº¿ token çš„å¼€æºå¤šæ¨¡æ€æ•°æ®ä¸Šè®­ç»ƒï¼Œé…å¤‡ä¸“ç”¨è¯­éŸ³å’Œå›¾åƒç”Ÿæˆ tokenï¼Œä½¿å…¶èƒ½å¤ŸåŸºäºè¯­è¨€çº¿ç´¢æ¡ä»¶åŒ–è¾“å‡ºæ¥å­¦ä¹ ç”Ÿæˆä»»åŠ¡ã€‚åœ¨ 85 ä¸ªåŸºå‡†æµ‹è¯•ä¸Šçš„å¹¿æ³›è¯„ä¼°è¡¨æ˜ï¼Œæœ¬æ¨¡å‹åœ¨é¢†å…ˆå…¨æ¨¡æ€å¤§æ¨¡å‹ä¸­è¾¾åˆ°æœ€å…ˆè¿›æ°´å¹³ (State-of-the-Art, SOTA) æˆ–æå…·ç«äº‰åŠ›æ€§èƒ½ï¼Œåœ¨ 76 ä¸ªåŸºå‡†ä¸­çš„è¶… 50 é¡¹ä¸Šè¶…è¶Šä½¿ç”¨ 1.2 ä¸‡äº¿ token è®­ç»ƒçš„ Qwen2.5-Omniã€‚æ ¸å¿ƒä¼˜åŠ¿åŒ…æ‹¬è§†é¢‘ç†è§£ (8 é¡¹åŸºå‡†å¹³å‡æå‡ 7%) ã€å…¨æ¨¡æ€ç†è§£ (4 é¡¹åŸºå‡†å¹³å‡æå‡ 7%) å’Œè§†å¬æ¨ç† (å¹³å‡æå‡ 4%) ã€‚åŒæ—¶ï¼Œå®ƒåœ¨é•¿è¯­éŸ³å¤„ç†ä¸Šå–å¾—è¿›å±• (è¯é”™è¯¯ç‡, Word Error Rate, WER é™ä½ 4.2%) ï¼Œå¹¶åœ¨åº•å±‚å›¾åƒå¤„ç†ä¸å¯æ§ç”Ÿæˆçš„ 5 é¡¹æŒ‡æ ‡ä¸­é¢†å…ˆã€‚</p>
<h2 data-id="heading-6">Think-at-Hard: Selective Latent Iterations to Improve Reasoning Language Models</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.08577" target="_blank" title="https://arxiv.org/abs/2511.08577" ref="nofollow noopener noreferrer">Think-at-Hardï¼šé€šè¿‡é€‰æ‹©æ€§éšå¼è¿­ä»£æå‡æ¨ç†è¯­è¨€æ¨¡å‹æ€§èƒ½</a></p>
<p>æå‡å¤§è¯­è¨€æ¨¡å‹ (LLMs) çš„æ¨ç†èƒ½åŠ›ï¼Œç‰¹åˆ«æ˜¯åœ¨å‚æ•°çº¦æŸæ¡ä»¶ä¸‹ï¼Œå¯¹å®é™…åº”ç”¨è‡³å…³é‡è¦ã€‚ç°æœ‰ç ”ç©¶æå‡ºäº†å¾ªç¯ Transformer æ¶æ„ï¼Œä¸ºæ¯ä¸ª Token åˆ†é…å›ºå®šæ¬¡æ•°çš„é¢å¤–è¿­ä»£ä»¥æå‡ç”Ÿæˆè´¨é‡ã€‚åœ¨å®Œæˆé¦–æ¬¡æ ‡å‡†å‰å‘ä¼ æ’­åï¼Œè¯¥æ–¹æ³•å¹¶éç›´æ¥è¾“å‡ºæ–‡æœ¬ï¼Œè€Œæ˜¯å°†æœ€åä¸€å±‚éšè—çŠ¶æ€åé¦ˆè‡³è¾“å…¥å±‚è¿›è¡Œé¢å¤–è¿­ä»£ï¼Œä»¥ä¼˜åŒ– Token é¢„æµ‹ç»“æœã€‚ç„¶è€Œæˆ‘ä»¬å‘ç°å­˜åœ¨éšå¼è¿‡åº¦æ¨ç†ç°è±¡ï¼šé¦–æ¬¡ä¼ æ’­åå·²é¢„æµ‹æ­£ç¡®çš„ç®€å• Tokenï¼Œæœ‰æ—¶ä¼šåœ¨åç»­è¿­ä»£ä¸­è¢«é”™è¯¯ä¿®æ­£ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬æå‡º Think-at-Hard (TaH) æ–¹æ³•ï¼Œé€šè¿‡åŠ¨æ€éšå¼è¿­ä»£æœºåˆ¶ï¼Œä»…å¯¹å›°éš¾ Token è¿›è¡Œæ·±åº¦è¿­ä»£ã€‚è¯¥æ–¹æ³•é‡‡ç”¨è½»é‡çº§ç¥ç»å†³ç­–æ¨¡å—ï¼Œä»…åœ¨æ ‡å‡†å‰å‘ä¼ æ’­åå¯èƒ½é¢„æµ‹é”™è¯¯çš„ Token å¤„è§¦å‘éšå¼è¿­ä»£ã€‚åœ¨éšå¼è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œä½ç§©é€‚åº” (LoRA) æ¨¡å—å°† LLM çš„ç›®æ ‡ä»é€šç”¨ä¸‹ä¸€ Token é¢„æµ‹è½¬å‘ä¸“æ³¨äºå›°éš¾ Token çš„ä¼˜åŒ–ã€‚æˆ‘ä»¬è¿˜å¼•å…¥äº†åŒé‡å› æœæ³¨æ„åŠ›æœºåˆ¶ï¼Œå°†æ³¨æ„åŠ›èŒƒå›´ä» Token åºåˆ—ç»´åº¦æ‰©å±•è‡³è¿­ä»£æ·±åº¦ç»´åº¦ã€‚è¯¥è®¾è®¡åœ¨ä¿æŒå®Œå…¨åºåˆ—å¹¶è¡Œæ€§çš„åŒæ—¶ï¼Œå®ç°äº†è·¨è¿­ä»£çš„ä¿¡æ¯æµåŠ¨ã€‚å®éªŒè¡¨æ˜ï¼ŒTaH åœ¨äº”ä¸ªé«˜éš¾åº¦åŸºå‡†æµ‹è¯•ä¸­æ˜¾è‘—æå‡ LLM æ¨ç†æ€§èƒ½ï¼Œä¸”ä¿æŒå‚æ•°é‡ä¸å˜ã€‚ä¸å¯¹æ‰€æœ‰è¾“å‡º Token è¿›è¡Œä¸¤æ¬¡è¿­ä»£çš„åŸºçº¿æ–¹æ³•ç›¸æ¯”ï¼ŒTaH åœ¨å…é™¤ 94% Token äºŒæ¬¡è¿­ä»£çš„åŒæ—¶ï¼Œå‡†ç¡®ç‡æå‡è¾¾ 8.1-11.3%ã€‚ç›¸è¾ƒäºä½¿ç”¨ç›¸åŒæ•°æ®å¾®è°ƒçš„å¼ºåŸºçº¿ Qwen3 å•æ¬¡è¿­ä»£æ¨¡å‹ï¼Œå‡†ç¡®ç‡æå‡è¾¾ 4.0-5.0%ã€‚å½“ä»…å¼•å…¥ LoRA å’Œè¿­ä»£å†³ç­–æ¨¡å—å¸¦æ¥çš„ä¸è¶³ 3% é¢å¤–å‚æ•°æ—¶ï¼Œå‡†ç¡®ç‡å¢ç›Šåˆ†åˆ«è¿›ä¸€æ­¥æå‡è‡³ 8.5-12.6% å’Œ 5.3-5.4%ã€‚ä»£ç å·²å¼€æºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fthu-nics%2FTaH%25E3%2580%2582" target="_blank" title="https://github.com/thu-nics/TaH%E3%80%82" ref="nofollow noopener noreferrer">github.com/thu-nics/Taâ€¦</a></p>
<h2 data-id="heading-7">DoPE: Denoising Rotary Position Embedding</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.09146" target="_blank" title="https://arxiv.org/abs/2511.09146" ref="nofollow noopener noreferrer">DoPEï¼šæ—‹è½¬ä½ç½®åµŒå…¥å»å™ªæ–¹æ³•</a></p>
<p>Transformer æ¨¡å‹ä¸­çš„æ—‹è½¬ä½ç½®åµŒå…¥ (RoPE) å­˜åœ¨å›ºæœ‰å±€é™æ€§ï¼Œä¼šå‰Šå¼±é•¿åº¦å¤–æ¨æ€§èƒ½ã€‚æˆ‘ä»¬å°†å«ä½ç½®ç¼–ç çš„æ³¨æ„åŠ›å›¾é‡æ–°è¯ é‡Šä¸ºå¸¦å™ªå£°çš„ç‰¹å¾å›¾ï¼Œå¹¶æå‡ºå»å™ªä½ç½®ç¼–ç  (DoPE)ï¼Œè¿™æ˜¯ä¸€ç§åŸºäºæˆªæ–­çŸ©é˜µç†µçš„æ— è®­ç»ƒæ–¹æ³•ï¼Œç”¨äºè¯†åˆ«ç‰¹å¾å›¾ä¸­çš„å¼‚å¸¸é¢‘å¸¦ã€‚åˆ©ç”¨ç‰¹å¾å›¾çš„å™ªå£°ç‰¹æ€§ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥é‡‡ç”¨æ— å‚æ•°é«˜æ–¯åˆ†å¸ƒå¯¹å…¶è¿›è¡Œé‡å‚æ•°åŒ–ï¼Œä»¥å®ç°é²æ£’çš„å¤–æ¨ã€‚æœ¬æ–¹æ³•ä»ç†è®ºä¸Šæ­ç¤ºäº†æ³¨æ„åŠ›ä¸‹æ²‰ç°è±¡çš„æˆå› åŠå…¶ä¸æˆªæ–­çŸ©é˜µç†µçš„å…³è”ã€‚åœ¨â€œå¤§æµ·æé’ˆâ€å’Œå¤šæ ·æœ¬ä¸Šä¸‹æ–‡å­¦ä¹ ä»»åŠ¡ä¸Šçš„å®éªŒè¡¨æ˜ï¼ŒDoPE åœ¨é•¿ä¸Šä¸‹æ–‡ï¼ˆæœ€é«˜ 64K tokenï¼‰ä¸­æ˜¾è‘—æå‡äº†æ£€ç´¢ç²¾åº¦ä¸æ¨ç†ç¨³å®šæ€§ã€‚ç»“æœè¡¨æ˜ï¼Œä½ç½®åµŒå…¥çš„å»å™ªç­–ç•¥æœ‰æ•ˆæŠ‘åˆ¶äº†æ³¨æ„åŠ›ä¸‹æ²‰ç°è±¡ï¼Œæ¢å¤äº†å‡è¡¡çš„æ³¨æ„åŠ›åˆ†å¸ƒï¼Œä¸ºæ”¹è¿›é•¿åº¦æ³›åŒ–æä¾›äº†ä¸€ç§ç®€æ´è€Œé«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚é¡¹ç›®é¡µé¢è¯¦è§ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2FThe-physical-picture-of-LLMs.github.io" target="_blank" title="https://The-physical-picture-of-LLMs.github.io" ref="nofollow noopener noreferrer">The-physical-picture-of-LLMs.github.io</a></p>
<h2 data-id="heading-8">Reasoning via Video: The First Evaluation of Video Models' Reasoning Abilities through Maze-Solving Tasks</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.15065" target="_blank" title="https://arxiv.org/abs/2511.15065" ref="nofollow noopener noreferrer">è§†é¢‘æ¨ç†ï¼šé€šè¿‡è¿·å®«æ±‚è§£ä»»åŠ¡é¦–æ¬¡è¯„ä¼°è§†é¢‘æ¨¡å‹çš„æ¨ç†èƒ½åŠ›</a></p>
<p>è§†é¢‘æ¨¡å‹åœ¨ç”Ÿæˆå…·æœ‰è¿è´¯è¿åŠ¨åŠ¨æ€çš„é«˜ä¿çœŸè§†é¢‘æ–¹é¢å–å¾—äº†æ˜¾è‘—æˆåŠŸã€‚ç±»ä¼¼äºè¯­è¨€å»ºæ¨¡ä»æ–‡æœ¬ç”Ÿæˆå‘å±•åˆ°åŸºäºæ–‡æœ¬çš„æ¨ç†ï¼Œè§†é¢‘æ¨¡å‹çš„è¿›æ­¥ä¿ƒä½¿æˆ‘ä»¬æ€è€ƒï¼šè§†é¢‘æ¨¡å‹èƒ½å¦é€šè¿‡è§†é¢‘ç”Ÿæˆè¿›è¡Œæ¨ç†ï¼Ÿä¸ç¦»æ•£çš„æ–‡æœ¬è¯­æ–™ç›¸æ¯”ï¼Œè§†é¢‘ä»¥æ˜ç¡®çš„ç©ºé—´å¸ƒå±€å’Œæ—¶é—´è¿ç»­æ€§ä¸ºåŸºç¡€ï¼Œä¸ºç©ºé—´æ¨ç†æä¾›äº†ç†æƒ³è½½ä½“ã€‚åœ¨æœ¬å·¥ä½œä¸­ï¼Œæˆ‘ä»¬æ¢ç´¢äº†è§†é¢‘æ¨ç†èŒƒå¼ï¼Œå¹¶æ¨å‡ºVR-Benchâ€”â€”ä¸€ä¸ªç³»ç»Ÿè¯„ä¼°è§†é¢‘æ¨¡å‹æ¨ç†èƒ½åŠ›çš„ç»¼åˆåŸºå‡†ã€‚è¯¥åŸºå‡†åŸºäºéœ€è¦ç©ºé—´è§„åˆ’ä¸å¤šæ­¥æ¨ç†çš„è¿·å®«æ±‚è§£ä»»åŠ¡ï¼ŒåŒ…å«7,920ä¸ªè¿‡ç¨‹ç”Ÿæˆè§†é¢‘ï¼Œæ¶µç›–äº”ç§è¿·å®«ç±»å‹åŠå¤šæ ·è§†è§‰é£æ ¼ã€‚å®è¯åˆ†æè¡¨æ˜ï¼Œç›‘ç£å¾®è°ƒ (SFT) èƒ½æœ‰æ•ˆæ¿€å‘è§†é¢‘æ¨¡å‹çš„æ¨ç†èƒ½åŠ›ã€‚è§†é¢‘æ¨¡å‹åœ¨æ¨ç†è¿‡ç¨‹ä¸­å±•ç°å‡ºæ›´å¼ºçš„ç©ºé—´æ„ŸçŸ¥èƒ½åŠ›ï¼Œå…¶è¡¨ç°ä¼˜äºä¸»æµè§†è§‰è¯­è¨€æ¨¡å‹ (VLM) ï¼Œä¸”èƒ½é€‚åº”ä¸åŒåœºæ™¯ã€ä»»åŠ¡åŠå¤æ‚åº¦çº§åˆ«ã€‚æˆ‘ä»¬è¿˜å‘ç°äº†æµ‹è¯•æ—¶æ‰©å±•æ•ˆåº”ï¼šæ¨ç†é˜¶æ®µé‡‡ç”¨å¤šæ ·åŒ–é‡‡æ ·å¯ä½¿æ¨ç†å¯é æ€§æå‡10â€“20%ã€‚è¿™äº›å‘ç°å‡¸æ˜¾äº†è§†é¢‘æ¨ç†åœ¨ç©ºé—´æ¨ç†ä»»åŠ¡ä¸­çš„ç‹¬ç‰¹æ½œåŠ›ä¸å¯æ‰©å±•æ€§ã€‚</p>
<h2 data-id="heading-9">AraLingBench A Human-Annotated Benchmark for Evaluating Arabic Linguistic Capabilities of Large Language Models</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.14295" target="_blank" title="https://arxiv.org/abs/2511.14295" ref="nofollow noopener noreferrer">AraLingBenchï¼šè¯„ä¼°å¤§è¯­è¨€æ¨¡å‹é˜¿æ‹‰ä¼¯è¯­è¯­è¨€èƒ½åŠ›çš„äººå·¥æ ‡æ³¨åŸºå‡†</a></p>
<p>æˆ‘ä»¬æå‡º AraLingBenchï¼šä¸€ä¸ªå®Œå…¨äººå·¥æ ‡æ³¨çš„åŸºå‡†ï¼Œç”¨äºè¯„ä¼°å¤§è¯­è¨€æ¨¡å‹ (LLMs) çš„é˜¿æ‹‰ä¼¯è¯­è¯­è¨€èƒ½åŠ›ã€‚è¯¥åŸºå‡†æ¶µç›–äº”ä¸ªæ ¸å¿ƒç±»åˆ«ï¼šè¯­æ³•ã€è¯æ³•ã€æ‹¼å†™ã€é˜…è¯»ç†è§£å’Œå¥æ³•ï¼Œé€šè¿‡ 150 é“ä¸“å®¶è®¾è®¡çš„å¤šé¡¹é€‰æ‹©é¢˜ç›´æ¥è¯„ä¼°ç»“æ„æ€§è¯­è¨€ç†è§£ã€‚å¯¹ 35 ä¸ªé˜¿æ‹‰ä¼¯è¯­å’ŒåŒè¯­å¤§è¯­è¨€æ¨¡å‹çš„è¯„ä¼°è¡¨æ˜ï¼Œå½“å‰æ¨¡å‹è™½ç„¶è¡¨ç°å‡ºè¾ƒå¼ºçš„è¡¨é¢ç†Ÿç»ƒåº¦ï¼Œä½†åœ¨æ·±å±‚è¯­æ³•å’Œå¥æ³•æ¨ç†æ–¹é¢ä»å­˜åœ¨å›°éš¾ã€‚AraLingBench æ­ç¤ºäº†åŸºäºçŸ¥è¯†çš„åŸºå‡†æµ‹è¯•é«˜åˆ†ä¸çœŸæ­£è¯­è¨€æŒæ¡èƒ½åŠ›ä¹‹é—´çš„æŒä¹…å·®è·ï¼Œè¯æ˜è®¸å¤šæ¨¡å‹çš„æˆåŠŸä¾èµ–äºè®°å¿†æˆ–æ¨¡å¼è¯†åˆ«è€ŒéçœŸæ­£çš„ç†è§£èƒ½åŠ›ã€‚é€šè¿‡åˆ†ç¦»å’Œæµ‹é‡åŸºç¡€è¯­è¨€æŠ€èƒ½ï¼ŒAraLingBench ä¸ºå¼€å‘é˜¿æ‹‰ä¼¯è¯­å¤§è¯­è¨€æ¨¡å‹æä¾›äº†è¯Šæ–­æ¡†æ¶ã€‚å®Œæ•´è¯„ä¼°ä»£ç å·²åœ¨ GitHub å¹³å°å¼€æºå‘å¸ƒã€‚</p>
<h2 data-id="heading-10">Part-X-MLLM: Part-aware 3D Multimodal Large Language Model</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.13647" target="_blank" title="https://arxiv.org/abs/2511.13647" ref="nofollow noopener noreferrer">Part-X-MLLMï¼šéƒ¨ä»¶æ„ŸçŸ¥çš„3Då¤šæ¨¡æ€å¤§è¯­è¨€æ¨¡å‹</a></p>
<p>æˆ‘ä»¬æå‡ºäº†Part-X-MLLMï¼Œä¸€ç§åŸç”Ÿ3Då¤šæ¨¡æ€å¤§è¯­è¨€æ¨¡å‹ï¼Œé€šè¿‡å°†å¤šæ ·åŒ–çš„3Dä»»åŠ¡å½¢å¼åŒ–ä¸ºç»“æ„åŒ–ã€å¯æ‰§è¡Œè¯­æ³•ä¸­çš„ç¨‹åºï¼Œå®ç°äº†ç»Ÿä¸€å¤„ç†ã€‚ç»™å®šRGBç‚¹äº‘å’Œè‡ªç„¶è¯­è¨€æç¤ºï¼Œæ¨¡å‹ä»¥è‡ªå›å½’æ–¹å¼ç”Ÿæˆå•ä¸€ã€è¿è´¯çš„Tokenåºåˆ—ï¼Œå…¶ä¸­åŒ…å«éƒ¨ä»¶çº§è¾¹ç•Œæ¡†ã€è¯­ä¹‰æè¿°å’Œç¼–è¾‘å‘½ä»¤ã€‚è¿™ä¸€ç»“æ„åŒ–è¾“å‡ºä½œä¸ºé€šç”¨æ¥å£ï¼Œå¯é©±åŠ¨ä¸‹æ¸¸å‡ ä½•æ„ŸçŸ¥æ¨¡å—æ‰§è¡Œéƒ¨ä»¶çº§ç”Ÿæˆå’Œç¼–è¾‘ã€‚é€šè¿‡å°†ç¬¦å·è§„åˆ’ä¸å‡ ä½•ç”Ÿæˆè§£è€¦ï¼Œæœ¬æ–¹æ³•æ”¯æŒé€šè¿‡å•ä¸€è¯­è¨€åŸç”Ÿå‰ç«¯æ§åˆ¶ä»»ä½•å…¼å®¹çš„å‡ ä½•å¼•æ“ã€‚æˆ‘ä»¬é¢„è®­ç»ƒäº†åŒç¼–ç å™¨æ¶æ„æ¥åˆ†ç¦»ç»“æ„ä¸è¯­ä¹‰ï¼Œå¹¶åœ¨å¤§è§„æ¨¡éƒ¨ä»¶ä¸­å¿ƒæ•°æ®é›†ä¸Šå¯¹æ¨¡å‹è¿›è¡ŒæŒ‡ä»¤è°ƒä¼˜ã€‚å®éªŒè¡¨æ˜ï¼Œè¯¥æ¨¡å‹èƒ½é«˜æ•ˆç”Ÿæˆé«˜è´¨é‡ç»“æ„åŒ–è§„åˆ’ï¼Œé€šè¿‡ç»Ÿä¸€æ¥å£åœ¨æ¥åœ°é—®ç­”ã€ç»„åˆç”Ÿæˆå’Œå±€éƒ¨ç¼–è¾‘ä»»åŠ¡ä¸­å®ç°äº†æœ€å…ˆè¿›çš„æ€§èƒ½ã€‚é¡¹ç›®é¡µé¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fchunshi.wang%2FPart-X-MLLM%2F" target="_blank" title="https://chunshi.wang/Part-X-MLLM/" ref="nofollow noopener noreferrer">chunshi.wang/Part-X-MLLMâ€¦</a></p>
<h2 data-id="heading-11">Agent0: Unleashing Self-Evolving Agents from Zero Data via Tool-Integrated Reasoning</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.16043" target="_blank" title="https://arxiv.org/abs/2511.16043" ref="nofollow noopener noreferrer">Agent0ï¼šé€šè¿‡å·¥å…·é›†æˆæ¨ç†å®ç°é›¶æ•°æ®ä¸‹çš„è‡ªæˆ‘è¿›åŒ–æ™ºèƒ½ä½“</a></p>
<p>åŸºäºå¤§å‹è¯­è¨€æ¨¡å‹ (LLM) çš„æ™ºèƒ½ä½“é€šå¸¸é‡‡ç”¨å¼ºåŒ–å­¦ä¹  (RL) è¿›è¡Œè®­ç»ƒï¼Œä½†å…¶å‘å±•å—é™äºå¯¹äººå·¥æ ‡æ³¨æ•°æ®çš„ä¾èµ–ï¼Œè¿™ä¸ä»…åˆ¶çº¦äº†å¯æ‰©å±•æ€§ï¼Œè¿˜å°†äººå·¥æ™ºèƒ½çš„èƒ½åŠ›å±€é™äºäººç±»çŸ¥è¯†èŒƒç•´ã€‚ç°æœ‰è‡ªæˆ‘è¿›åŒ–æ¡†æ¶è™½æä¾›äº†æ›¿ä»£è·¯å¾„ï¼Œå´å¸¸å—é™äºæ¨¡å‹å›ºæœ‰èƒ½åŠ›ä¸å•è½®äº¤äº’æœºåˆ¶ï¼Œéš¾ä»¥å‘å±•åŒ…å«å·¥å…·ä½¿ç”¨æˆ–åŠ¨æ€æ¨ç†çš„å¤æ‚è®­ç»ƒè¯¾ç¨‹ã€‚æœ¬æ–‡æå‡º Agent0â€”â€”ä¸€ä¸ªå®Œå…¨è‡ªä¸»çš„æ¡†æ¶ï¼Œé€šè¿‡å¤šæ­¥ååŒè¿›åŒ–ä¸æ— ç¼å·¥å…·é›†æˆï¼Œæ— éœ€å¤–éƒ¨æ•°æ®å³å¯åŸ¹è‚²é«˜æ€§èƒ½æ™ºèƒ½ä½“ã€‚Agent0 åœ¨æºè‡ªåŒä¸€åŸºç¡€ LLM çš„ä¸¤ä¸ªæ™ºèƒ½ä½“é—´å»ºç«‹å…±ç”Ÿç«äº‰æœºåˆ¶ï¼šè¯¾ç¨‹æ™ºèƒ½ä½“è´Ÿè´£è®¾è®¡éš¾åº¦é€’å¢çš„å‰æ²¿ä»»åŠ¡ï¼Œæ‰§è¡Œæ™ºèƒ½ä½“åˆ™å­¦ä¹ è§£å†³è¿™äº›ä»»åŠ¡ã€‚é€šè¿‡é›†æˆå¤–éƒ¨å·¥å…·å¢å¼ºæ‰§è¡Œæ™ºèƒ½ä½“çš„è§£é¢˜èƒ½åŠ›ï¼Œè¿™ç§èƒ½åŠ›æå‡åè¿‡æ¥é©±åŠ¨è¯¾ç¨‹æ™ºèƒ½ä½“æ„å»ºæ›´å…·å¤æ‚æ€§ä¸”å…·å¤‡å·¥å…·æ„ŸçŸ¥çš„æ–°ä»»åŠ¡ã€‚åœ¨æ­¤è¿­ä»£è¿‡ç¨‹ä¸­ï¼ŒAgent0 å½¢æˆè‡ªæˆ‘å¼ºåŒ–çš„é—­ç¯ï¼ŒæŒç»­ç”Ÿæˆé«˜è´¨é‡è®­ç»ƒè¯¾ç¨‹ã€‚å®éªŒç»“æœè¡¨æ˜ï¼ŒAgent0 æ˜¾è‘—æå‡äº†æ¨ç†èƒ½åŠ›ï¼Œä½¿ Qwen3-8B-Base æ¨¡å‹åœ¨æ•°å­¦æ¨ç†åŸºå‡†ä¸Šçš„æ€§èƒ½æå‡ 18%ï¼Œåœ¨é€šç”¨æ¨ç†åŸºå‡†ä¸Šæå‡ 24%ã€‚ä»£ç å‘å¸ƒäº <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Faiming-lab%2FAgent0%25E3%2580%2582" target="_blank" title="https://github.com/aiming-lab/Agent0%E3%80%82" ref="nofollow noopener noreferrer">github.com/aiming-lab/â€¦</a></p>
<h2 data-id="heading-12">MMaDA-Parallel: Multimodal Large Diffusion Language Models for Thinking-Aware Editing and Generation</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.09611" target="_blank" title="https://arxiv.org/abs/2511.09611" ref="nofollow noopener noreferrer">MMaDA-å¹¶è¡Œï¼šç”¨äºæ€ç»´æ„ŸçŸ¥ç¼–è¾‘ä¸ç”Ÿæˆçš„å¤šæ¨¡æ€å¤§æ‰©æ•£è¯­è¨€æ¨¡å‹</a></p>
<p>å°½ç®¡æ€ç»´æ„ŸçŸ¥ç”Ÿæˆ (thinking-aware generation) æ—¨åœ¨æå‡å¤æ‚ä»»åŠ¡æ€§èƒ½ï¼Œä½†æˆ‘ä»¬è¯†åˆ«å‡ºä¸€ä¸ªå…³é”®å¤±æ•ˆæ¨¡å¼ï¼šç°æœ‰é¡ºåºè‡ªå›å½’æ–¹æ³•ä¼šå› é”™è¯¯ä¼ æ’­è€Œåè€Œå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚ä¸ºç³»ç»Ÿæ€§åœ°åˆ†æè¯¥é—®é¢˜ï¼Œæˆ‘ä»¬æå‡ºäº† ParaBenchï¼Œè¿™æ˜¯ä¸€ä¸ªæ–°åŸºå‡†ï¼Œç”¨äºè¯„ä¼°æ–‡æœ¬å’Œå›¾åƒè¾“å‡ºæ¨¡æ€ã€‚åŸºäº ParaBench çš„åˆ†æè¡¨æ˜ï¼Œæ€§èƒ½ä¸‹é™ä¸ç”Ÿæˆæ¨ç†å’Œæœ€ç»ˆå›¾åƒä¹‹é—´çš„å¯¹é½ä¸ä½³é«˜åº¦ç›¸å…³ã€‚ä¸ºè§£å†³æ­¤é—®é¢˜ï¼Œæˆ‘ä»¬æå‡ºå¹¶è¡Œå¤šæ¨¡æ€æ‰©æ•£æ¡†æ¶ MMaDA-å¹¶è¡Œï¼Œè¯¥æ¡†æ¶èƒ½åœ¨æ•´ä¸ªå»å™ªè½¨è¿¹ä¸­å®ç°æ–‡æœ¬ä¸å›¾åƒé—´çš„è¿ç»­åŒå‘äº¤äº’ã€‚MMaDA-å¹¶è¡Œé‡‡ç”¨ç›‘ç£å¾®è°ƒè¿›è¡Œè®­ç»ƒï¼Œå¹¶é€šè¿‡å¹¶è¡Œå¼ºåŒ–å­¦ä¹  (ParaRL) è¿›ä¸€æ­¥ä¼˜åŒ–ï¼›ParaRL æ˜¯ä¸€ç§æ–°ç­–ç•¥ï¼Œåœ¨è½¨è¿¹ä¸Šæ–½åŠ è¯­ä¹‰å¥–åŠ±ä»¥å¼ºåŒ–è·¨æ¨¡æ€ä¸€è‡´æ€§ã€‚å®éªŒéªŒè¯è¡¨æ˜ï¼Œæˆ‘ä»¬çš„æ¨¡å‹æ˜¾è‘—æ”¹å–„äº†è·¨æ¨¡æ€å¯¹é½å’Œè¯­ä¹‰ä¸€è‡´æ€§ï¼Œåœ¨ ParaBench ä¸Šç›¸æ¯”æœ€å…ˆè¿›æ¨¡å‹ Bagel å®ç°äº†è¾“å‡ºå¯¹é½ (Output Alignment) 6.9% çš„æå‡ï¼Œä»è€Œä¸ºæ€ç»´æ„ŸçŸ¥å›¾åƒåˆæˆå»ºç«‹äº†æ›´é²æ£’çš„èŒƒå¼ã€‚ä»£ç å·²å¼€æºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftyfeld%2FMMaDA-Parallel%25E3%2580%2582" target="_blank" title="https://github.com/tyfeld/MMaDA-Parallel%E3%80%82" ref="nofollow noopener noreferrer">github.com/tyfeld/MMaDâ€¦</a></p>
<h2 data-id="heading-13">SAM 3D: 3Dfy Anything in Images</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.16624" target="_blank" title="https://arxiv.org/abs/2511.16624" ref="nofollow noopener noreferrer">SAM 3Dï¼šå›¾åƒä¸­ä»»æ„ç‰©ä½“çš„ä¸‰ç»´é‡å»º</a></p>
<p>æˆ‘ä»¬æå‡ºSAM 3Dâ€”â€”ä¸€ä¸ªåŸºäºè§†è§‰çš„ä¸‰ç»´ç‰©ä½“é‡å»ºç”Ÿæˆæ¨¡å‹ï¼Œèƒ½å¤Ÿä»å•å¼ å›¾åƒé¢„æµ‹å‡ ä½•ç»“æ„ã€çº¹ç†è´´å›¾å’Œç©ºé—´å¸ƒå±€ã€‚è¯¥æ¨¡å‹åœ¨è‡ªç„¶å›¾åƒä¸­è¡¨ç°å“è¶Šï¼Œå°¤å…¶é€‚ç”¨äºå­˜åœ¨é®æŒ¡å’Œåœºæ™¯æ‚ä¹±çš„åœºæ™¯ï¼Œå…¶ä¸­ä¸Šä¸‹æ–‡æä¾›çš„è§†è§‰è¯†åˆ«çº¿ç´¢å‘æŒ¥ç€æ›´é‡è¦çš„ä½œç”¨ã€‚æˆ‘ä»¬é€šè¿‡äººæœºååŒæ ‡æ³¨æµç¨‹å®ç°è¿™ä¸€ç›®æ ‡ï¼Œè¯¥æµç¨‹å¯æ ‡æ³¨ç‰©ä½“å½¢çŠ¶ã€çº¹ç†å’Œä½å§¿ï¼Œä»¥å‰æ‰€æœªæœ‰çš„è§„æ¨¡æä¾›åŸºäºè§†è§‰çš„ä¸‰ç»´é‡å»ºæ•°æ®ã€‚æˆ‘ä»¬é‡‡ç”¨ç°ä»£åŒ–çš„å¤šé˜¶æ®µè®­ç»ƒæ¡†æ¶ï¼Œç»“åˆåˆæˆé¢„è®­ç»ƒä¸çœŸå®ä¸–ç•Œå¯¹é½ï¼Œçªç ´äº†ä¸‰ç»´æ•°æ®çš„"æ•°æ®å£å’"ã€‚ä¸è¿‘æœŸå·¥ä½œç›¸æ¯”ï¼Œæˆ‘ä»¬å–å¾—äº†æ˜¾è‘—æå‡ï¼Œåœ¨çœŸå®ç‰©ä½“å’Œåœºæ™¯çš„äººç±»åå¥½æµ‹è¯•ä¸­èƒœç‡è‡³å°‘è¾¾5:1ã€‚æˆ‘ä»¬å°†å…¬å¼€ä»£ç ä¸æ¨¡å‹æƒé‡ã€åœ¨çº¿æ¼”ç¤ºå¹³å°ï¼Œä»¥åŠä¸€ä¸ªå…¨æ–°çš„çœŸå®åœºæ™¯ä¸‰ç»´ç‰©ä½“é‡å»ºåŸºå‡†æµ‹è¯•é›†ã€‚</p>
<h2 data-id="heading-14">A Style is Worth One Code: Unlocking Code-to-Style Image Generation with Discrete Style Space</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.10555" target="_blank" title="https://arxiv.org/abs/2511.10555" ref="nofollow noopener noreferrer">ä¸€ç§é£æ ¼å¯¹åº”ä¸€ä¸ªä»£ç ï¼šåˆ©ç”¨ç¦»æ•£é£æ ¼ç©ºé—´å®ç°ä»£ç åˆ°é£æ ¼çš„å›¾åƒç”Ÿæˆ</a></p>
<p>åˆ›æ–°çš„è§†è§‰é£æ ¼åŒ–æ˜¯è‰ºæœ¯åˆ›ä½œçš„æ ¸å¿ƒè¦ç´ ï¼Œä½†ç”Ÿæˆæ–°é¢–ä¸”ä¸€è‡´çš„è§†è§‰é£æ ¼ä»é¢ä¸´é‡å¤§æŒ‘æˆ˜ã€‚ç°æœ‰ç”Ÿæˆæ–¹æ³•é€šå¸¸ä¾èµ–å†—é•¿çš„æ–‡æœ¬æç¤ºã€å‚è€ƒå›¾åƒæˆ–å‚æ•°é«˜æ•ˆå¾®è°ƒæ¥å¼•å¯¼é£æ ¼æ„ŸçŸ¥çš„å›¾åƒç”Ÿæˆï¼Œä½†å¾€å¾€éš¾ä»¥ä¿è¯é£æ ¼ä¸€è‡´æ€§ã€åˆ›é€ åŠ›æœ‰é™ä¸”é£æ ¼è¡¨ç¤ºå¤æ‚ã€‚æœ¬æ–‡é€šè¿‡å¼•å…¥ä»£ç åˆ°é£æ ¼å›¾åƒç”Ÿæˆè¿™ä¸€æ–°ä»»åŠ¡ï¼Œä¸»å¼ ä¸€ç§é£æ ¼å¯ç”±ä¸€ä¸ªæ•°å€¼ä»£ç è¡¨å¾ï¼Œè¯¥ä»»åŠ¡ä»…å‡­ä¸€ä¸ªæ•°å€¼é£æ ¼ä»£ç å³å¯ç”Ÿæˆå…·æœ‰æ–°é¢–ã€ä¸€è‡´è§†è§‰é£æ ¼çš„å›¾åƒã€‚ç›®å‰ï¼Œè¯¥é¢†åŸŸä¸»è¦ç”±è¡Œä¸šï¼ˆå¦‚ Midjourneyï¼‰ä¸»å¯¼æ¢ç´¢ï¼Œå­¦æœ¯ç•Œå°šæ— å¼€æºç ”ç©¶ã€‚ä¸ºå¡«è¡¥è¿™ä¸€ç©ºç™½ï¼Œæˆ‘ä»¬æå‡ºäº†é¦–ä¸ªå¼€æºæ–¹æ³• CoTyleã€‚å…·ä½“è€Œè¨€ï¼Œæˆ‘ä»¬é¦–å…ˆä»å›¾åƒé›†åˆä¸­è®­ç»ƒä¸€ä¸ªç¦»æ•£é£æ ¼ä»£ç æœ¬ï¼Œä»¥æå–é£æ ¼åµŒå…¥ã€‚è¿™äº›åµŒå…¥ä½œä¸ºæ–‡æœ¬åˆ°å›¾åƒæ‰©æ•£æ¨¡å‹ (T2I-DM) çš„æ¡ä»¶ï¼Œç”¨äºç”Ÿæˆé£æ ¼å›¾åƒã€‚éšåï¼Œæˆ‘ä»¬åœ¨ç¦»æ•£é£æ ¼åµŒå…¥ä¸Šè®­ç»ƒè‡ªå›å½’é£æ ¼ç”Ÿæˆå™¨ï¼Œå»ºæ¨¡å…¶åˆ†å¸ƒï¼Œä»è€Œèƒ½å¤Ÿåˆæˆæ–°é¢–çš„é£æ ¼åµŒå…¥ã€‚åœ¨æ¨ç†é˜¶æ®µï¼Œæ•°å€¼é£æ ¼ä»£ç é€šè¿‡é£æ ¼ç”Ÿæˆå™¨æ˜ å°„ä¸ºå”¯ä¸€é£æ ¼åµŒå…¥ï¼Œè¯¥åµŒå…¥å¼•å¯¼ T2I-DM ç”Ÿæˆå¯¹åº”é£æ ¼çš„å›¾åƒã€‚ä¸ç°æœ‰æ–¹æ³•ç›¸æ¯”ï¼Œæˆ‘ä»¬çš„æ–¹æ³•å…·å¤‡æ— ä¸ä¼¦æ¯”çš„ç®€æ´æ€§å’Œå¤šæ ·æ€§ï¼Œä»…éœ€æå°‘è¾“å…¥å³å¯è§£é”å¹¿é˜”çš„å¯å¤ç°é£æ ¼ç©ºé—´ã€‚å¤§é‡å®éªŒéªŒè¯ï¼ŒCoTyle èƒ½æœ‰æ•ˆå°†æ•°å€¼ä»£ç è½¬åŒ–ä¸ºé£æ ¼æ§åˆ¶å™¨ï¼Œè¯å®äº†ä¸€ç§é£æ ¼ç¡®å®å¯¹åº”ä¸€ä¸ªä»£ç ã€‚</p>
<h2 data-id="heading-15">GroupRank: A Groupwise Reranking Paradigm Driven by Reinforcement Learning</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.11653" target="_blank" title="https://arxiv.org/abs/2511.11653" ref="nofollow noopener noreferrer">GroupRankï¼šä¸€ç§ç”±å¼ºåŒ–å­¦ä¹ é©±åŠ¨çš„åˆ†ç»„é‡æ’åºèŒƒå¼</a></p>
<p>å¤§è¯­è¨€æ¨¡å‹ (LLM) å·²å±•ç°å‡ºä½œä¸ºé‡æ’åºå™¨çš„å¼ºå¤§æ½œåŠ›ï¼Œèƒ½å¤Ÿæå‡ RAG (Retrieval-Augmented Generation) ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½ã€‚ç„¶è€Œï¼Œç°æœ‰é‡æ’åºèŒƒå¼é¢ä¸´ä¸€ä¸ªæ ¸å¿ƒç†è®ºä¸å®è·µå›°å¢ƒï¼šé€ç‚¹ (Pointwise) æ–¹æ³•è™½ç„¶ç®€å•çµæ´»ï¼Œä½†ç‹¬ç«‹è¯„ä¼°æ–‡æ¡£ï¼Œå®¹æ˜“é™·å…¥æ’åè¿‘è§†é™·é˜±ï¼Œå¿½ç•¥æ–‡æ¡£é—´ç›¸å¯¹é‡è¦æ€§ï¼›è€Œåˆ—è¡¨ (Listwise) æ–¹æ³•èƒ½æ„ŸçŸ¥å…¨å±€æ’åä¸Šä¸‹æ–‡ï¼Œå´å­˜åœ¨å›ºæœ‰çš„åˆ—è¡¨åˆšæ€§ç¼ºé™·ï¼Œå¯¼è‡´å¤„ç†å¤§è§„æ¨¡å€™é€‰é›†æ—¶å‡ºç°ä¸¥é‡çš„å¯æ‰©å±•æ€§ä¸çµæ´»æ€§é—®é¢˜ã€‚ä¸ºè§£å†³è¿™äº›æŒ‘æˆ˜ï¼Œæˆ‘ä»¬æå‡ºåˆ†ç»„ (Groupwise) æ–¹æ³•ï¼Œä¸€ç§æ–°é¢–çš„é‡æ’åºèŒƒå¼ã€‚è¯¥æ–¹æ³•å°†æŸ¥è¯¢ä¸ä¸€ç»„å€™é€‰æ–‡æ¡£å…±åŒè¾“å…¥æ¨¡å‹ï¼Œé€šè¿‡ç»„å†…æ¯”è¾ƒä¸ºæ¯ä¸ªæ–‡æ¡£åˆ†é…ä¸ªä½“ç›¸å…³æ€§åˆ†æ•°ã€‚è¿™ä¸€è®¾è®¡æ—¢ä¿ç•™äº†é€ç‚¹æ–¹æ³•çš„çµæ´»æ€§ï¼Œåˆå®ç°äº†åˆ—è¡¨æ–¹æ³•çš„æ¯”è¾ƒèƒ½åŠ›ã€‚æˆ‘ä»¬è¿›ä¸€æ­¥é‡‡ç”¨ GRPO (Groupwise Reinforcement Learning with Policy Optimization) è¿›è¡Œæ¨¡å‹è®­ç»ƒï¼Œå¹¶é…å¤‡å¼‚æ„å¥–åŠ±å‡½æ•°ï¼Œè¯¥å‡½æ•°æ•´åˆäº†æ’åæŒ‡æ ‡ä¸æ—¨åœ¨å¯¹é½è·¨ç»„åˆ†æ•°åˆ†å¸ƒçš„åˆ†å¸ƒå¥–åŠ±ã€‚ä¸ºå…‹æœé«˜è´¨é‡æ ‡æ³¨æ•°æ®ç¨€ç¼ºçš„ç“¶é¢ˆï¼Œæˆ‘ä»¬æå‡ºä¸€ç§åˆ›æ–°æµç¨‹ï¼Œç”¨äºåˆæˆé«˜è´¨é‡æ£€ç´¢ä¸æ’åæ•°æ®ã€‚ç”Ÿæˆçš„æ•°æ®ä¸ä»…å¯ç”¨äºè®­ç»ƒé‡æ’åºå™¨ï¼Œè¿˜èƒ½ç”¨äºè®­ç»ƒæ£€ç´¢å™¨ã€‚å¤§é‡å®éªŒéªŒè¯äº†æœ¬æ–¹æ³•çš„æœ‰æ•ˆæ€§ã€‚åœ¨ä¸¤ä¸ªæ¨ç†å¯†é›†å‹æ£€ç´¢åŸºå‡† BRIGHT å’Œ R2MED ä¸Šçš„æµ‹è¯•ç»“æœè¡¨æ˜äº†å…¶ä¼˜è¶Šæ€§èƒ½ã€‚</p>
<h2 data-id="heading-16">V-ReasonBench: Toward Unified Reasoning Benchmark Suite for Video Generation Models</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.16668" target="_blank" title="https://arxiv.org/abs/2511.16668" ref="nofollow noopener noreferrer">V-ReasonBenchï¼šé¢å‘è§†é¢‘ç”Ÿæˆæ¨¡å‹çš„ç»Ÿä¸€æ¨ç†åŸºå‡†å¥—ä»¶</a></p>
<p>ç”Ÿæˆå¼è§†é¢‘æ¨¡å‹ï¼ˆå¦‚Veo-3ï¼‰çš„æœ€æ–°è¿›å±•å±•ç°äº†æƒŠäººçš„é›¶æ ·æœ¬æ¨ç†èƒ½åŠ›ï¼Œè¿™å‚¬ç”Ÿäº†å¯¹ç³»ç»ŸåŒ–ã€å¯é è¯„ä¼°æ–¹æ³•æ—¥ç›Šå¢é•¿çš„éœ€æ±‚ã€‚æˆ‘ä»¬æ¨å‡ºV-ReasonBenchï¼Œè¿™æ˜¯ä¸€ä¸ªæ—¨åœ¨ä»å››ä¸ªå…³é”®ç»´åº¦è¯„ä¼°è§†é¢‘æ¨ç†èƒ½åŠ›çš„åŸºå‡†ï¼šç»“æ„åŒ–é—®é¢˜è§£å†³ã€ç©ºé—´è®¤çŸ¥ã€åŸºäºæ¨¡å¼çš„æ¨ç†å’Œç‰©ç†åŠ¨åŠ›å­¦ã€‚è¯¥åŸºå‡†åŸºäºåˆæˆä¸çœŸå®ä¸–ç•Œå›¾åƒåºåˆ—æ„å»ºï¼Œæä¾›äº†ä¸€ç³»åˆ—å¤šæ ·åŒ–ã€ç­”æ¡ˆå¯éªŒè¯çš„ä»»åŠ¡ï¼Œè¿™äº›ä»»åŠ¡å…·æœ‰å¯é‡ç°æ€§ã€å¯æ‰©å±•æ€§ä¸”æ— æ­§ä¹‰ã€‚å¯¹å…­ä¸ªå‰æ²¿è§†é¢‘æ¨¡å‹çš„è¯„ä¼°æ˜¾ç¤ºå‡ºæ˜æ˜¾çš„ç»´åº¦é—´å·®å¼‚ï¼Œåœ¨ç»“æ„åŒ–ã€ç©ºé—´ã€åŸºäºæ¨¡å¼å’Œç‰©ç†æ¨ç†æ–¹é¢å­˜åœ¨æ˜¾è‘—æ€§èƒ½æ³¢åŠ¨ã€‚æˆ‘ä»¬è¿›ä¸€æ­¥å°†è§†é¢‘æ¨¡å‹ä¸å¼ºå›¾åƒæ¨¡å‹è¿›è¡Œå¯¹æ¯”ï¼Œåˆ†æå¸¸è§çš„å¹»è§‰ï¼ˆhallucinationï¼‰ç°è±¡ï¼Œå¹¶æ¢ç©¶è§†é¢‘æŒç»­æ—¶é—´å¦‚ä½•å½±å“å¸§é“¾ï¼ˆChain-of-Framesï¼‰æ¨ç†ã€‚æ€»ä½“è€Œè¨€ï¼ŒV-ReasonBenchæä¾›äº†ä¸€ä¸ªç»Ÿä¸€ã€å¯é‡ç°çš„æ¡†æ¶æ¥è¡¡é‡è§†é¢‘æ¨ç†èƒ½åŠ›ï¼Œæ—¨åœ¨æ”¯æŒå¼€å‘å…·å¤‡æ›´å¯é ã€ç¬¦åˆäººç±»è®¤çŸ¥çš„æ¨ç†æŠ€èƒ½çš„æ¨¡å‹ã€‚</p>
<h2 data-id="heading-17">What Does It Take to Be a Good AI Research Agent? Studying the Role of Ideation Diversity</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.15593" target="_blank" title="https://arxiv.org/abs/2511.15593" ref="nofollow noopener noreferrer">ä¼˜ç§€ AI ç ”ç©¶æ™ºèƒ½ä½“çš„å…³é”®è¦ç´ ï¼Ÿæ¢è®¨æ„æ€å¤šæ ·æ€§çš„ä½œç”¨</a></p>
<p>AI ç ”ç©¶æ™ºèƒ½ä½“æœ‰æœ›é€šè¿‡è‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ æ¨¡å‹çš„è®¾è®¡ã€å®ç°ä¸è®­ç»ƒæ¥åŠ é€Ÿç§‘å­¦è¿›å±•ã€‚ç„¶è€Œè¯¥é¢†åŸŸå°šå¤„å‘å±•åˆæœŸï¼Œå†³å®šæ™ºèƒ½ä½“è¡Œä¸ºè·¯å¾„æˆè´¥çš„å…³é”®å› ç´ ä»æœªæ˜æ™°ã€‚æœ¬æ–‡æ¢ç©¶äº†æ„æ€å¤šæ ·æ€§å¯¹æ™ºèƒ½ä½“æ€§èƒ½çš„å½±å“æœºåˆ¶ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨ MLE-benchï¼ˆè¯„ä¼° AI ç ”ç©¶æ™ºèƒ½ä½“çš„çŸ¥ååŸºå‡†æµ‹è¯•ï¼‰ä¸Šåˆ†æä¸åŒæ¨¡å‹ä¸æ™ºèƒ½ä½“æ¡†æ¶çš„è¡Œä¸ºè½¨è¿¹ï¼Œå‘ç°ä¸åŒé…ç½®ä¼šäº§ç”Ÿä¸åŒç¨‹åº¦çš„æ„æ€å¤šæ ·æ€§ï¼Œä¸”æ€§èƒ½æ›´ä¼˜çš„æ™ºèƒ½ä½“é€šå¸¸è¡¨ç°å‡ºæ›´é«˜çš„æ„æ€å¤šæ ·æ€§ã€‚è¿›ä¸€æ­¥é€šè¿‡å—æ§å®éªŒè°ƒæ•´æ„æ€å¤šæ ·æ€§æ°´å¹³ï¼Œè¯å®æå‡å¤šæ ·æ€§å¯æ˜¾è‘—å¢å¼ºæ™ºèƒ½ä½“æ€§èƒ½ã€‚æœ€åï¼Œæˆ‘ä»¬è¶…è¶Š MLE-bench åŸºäºå¥–ç‰Œè¯„åˆ†çš„æ ‡å‡†æŒ‡æ ‡ï¼Œé€šè¿‡å¤šç»´åº¦è¯„ä¼°éªŒè¯äº†ç ”ç©¶ç»“è®ºåœ¨ä¸åŒæ€§èƒ½åº¦é‡ä¸‹çš„æ™®é€‚æ€§ã€‚</p>
<h2 data-id="heading-18">First Frame Is the Place to Go for Video Content Customization</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.15700" target="_blank" title="https://arxiv.org/abs/2511.15700" ref="nofollow noopener noreferrer">ç¬¬ä¸€å¸§ï¼šè§†é¢‘å†…å®¹å®šåˆ¶çš„å…³é”®å…¥å£</a></p>
<p>ç¬¬ä¸€å¸§åœ¨è§†é¢‘ç”Ÿæˆæ¨¡å‹ä¸­æ‰®æ¼”ç€ä»€ä¹ˆè§’è‰²ï¼Ÿä¼ ç»Ÿè§‚ç‚¹è®¤ä¸ºï¼Œå®ƒä»…æ˜¯è§†é¢‘æ—¶ç©ºåºåˆ—çš„èµ·å§‹ç‚¹ï¼Œä½œä¸ºåç»­åŠ¨ç”»ç”Ÿæˆçš„åŸºç¡€ã€‚åœ¨æœ¬ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªæ ¹æœ¬æ€§çš„æ–°è§†è§’ï¼šè§†é¢‘æ¨¡å‹éšå¼åœ°å°†ç¬¬ä¸€å¸§ä½œä¸ºæ¦‚å¿µè®°å¿†ç¼“å†²åŒºï¼Œç”¨äºå­˜å‚¨è§†è§‰å®ä½“å¹¶åœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­é‡å¤åˆ©ç”¨ã€‚åŸºäºè¿™ä¸€å‘ç°ï¼Œæˆ‘ä»¬è¯æ˜ä»…éœ€20-50ä¸ªè®­ç»ƒæ ·æœ¬ï¼Œæ— éœ€ä¿®æ”¹æ¨¡å‹æ¶æ„æˆ–è¿›è¡Œå¤§è§„æ¨¡å¾®è°ƒï¼Œå³å¯åœ¨å¤šç§åœºæ™¯ä¸‹å®ç°é²æ£’ä¸”å…·å¤‡å¼ºæ³›åŒ–èƒ½åŠ›çš„è§†é¢‘å†…å®¹å®šåˆ¶ã€‚è¿™æ­ç¤ºäº†è§†é¢‘ç”Ÿæˆæ¨¡å‹åœ¨åŸºäºå‚è€ƒè§†é¢‘çš„å®šåˆ¶ä»»åŠ¡ä¸­ä¸€é¡¹å¼ºå¤§è€Œé•¿æœŸè¢«å¿½è§†çš„æ½œåŠ›ã€‚</p>
<h2 data-id="heading-19">PhysX-Anything: Simulation-Ready Physical 3D Assets from Single Image</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.13648" target="_blank" title="https://arxiv.org/abs/2511.13648" ref="nofollow noopener noreferrer">PhysX-Anythingï¼šä»å•å¼ å›¾åƒç”Ÿæˆå¯ç›´æ¥ä»¿çœŸçš„ç‰©ç†å±æ€§3Dèµ„äº§</a></p>
<p>3Då»ºæ¨¡æ­£ä»é™æ€è§†è§‰è¡¨ç¤ºè½¬å‘å…·å¤‡ç‰©ç†å±æ€§çš„å¯å…³èŠ‚åŒ–èµ„äº§ï¼Œè¿™ç±»èµ„äº§å¯ç›´æ¥ç”¨äºä»¿çœŸä¸äº¤äº’ã€‚ç„¶è€Œï¼Œç°æœ‰å¤§å¤šæ•°3Dç”Ÿæˆæ–¹æ³•å¿½ç•¥äº†å…³é”®çš„ç‰©ç†å±æ€§ä¸å…³èŠ‚ç»“æ„ï¼Œé™åˆ¶äº†å…¶åœ¨å…·èº«AIä¸­çš„åº”ç”¨ã€‚ä¸ºå¼¥è¡¥è¿™ä¸€ä¸è¶³ï¼Œæˆ‘ä»¬æå‡ºPhysX-Anythingâ€”â€”é¦–ä¸ªå¯ç›´æ¥ä»¿çœŸçš„ç‰©ç†3Dç”Ÿæˆæ¡†æ¶ï¼Œä»…éœ€è¾“å…¥å•å¼ çœŸå®åœºæ™¯å›¾åƒï¼Œå³å¯ç”Ÿæˆå…·æœ‰æ˜¾å¼å‡ ä½•ç»“æ„ã€å…³èŠ‚ç³»ç»Ÿå’Œç‰©ç†å±æ€§çš„é«˜è´¨é‡å¯ä»¿çœŸ3Dèµ„äº§ã€‚å…·ä½“è€Œè¨€ï¼Œæˆ‘ä»¬å¼€å‘äº†é¦–ä¸ªåŸºäºè§†è§‰è¯­è¨€æ¨¡å‹ (VLM) çš„ç‰©ç†3Dç”Ÿæˆæ¨¡å‹ï¼Œå¹¶æå‡ºæ–°å‹3Dè¡¨å¾æ–¹æ³•ï¼Œå¯é«˜æ•ˆå¯¹å‡ ä½•ç»“æ„è¿›è¡Œæ ‡è®°åŒ–å¤„ç†ã€‚è¯¥æ–¹æ³•å°†æ ‡è®°æ•°é‡å‹ç¼©è‡³åŸæ•°é‡çš„1/193ï¼Œä½¿å¾—åœ¨æ ‡å‡†VLMæ ‡è®°å®¹é‡å†…å³å¯å®ç°æ˜¾å¼å‡ ä½•å­¦ä¹ ï¼Œæ— éœ€åœ¨å¾®è°ƒé˜¶æ®µå¼•å…¥ç‰¹æ®Šæ ‡è®°ï¼Œæ˜¾è‘—æå‡äº†ç”Ÿæˆè´¨é‡ã€‚æ­¤å¤–ï¼Œé’ˆå¯¹ç°æœ‰ç‰©ç†3Dæ•°æ®é›†å¤šæ ·æ€§ä¸è¶³çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ„å»ºäº†PhysX-Mobilityæ•°æ®é›†ï¼Œå°†åŸæœ‰ç‰©ç†3Dæ•°æ®é›†çš„ç‰©ä½“ç±»åˆ«æ‰©å±•2å€ä»¥ä¸Šï¼ŒåŒ…å«2000ä½™ä¸ªå¸¸è§çœŸå®ç‰©ä½“å¹¶é™„æœ‰è¯¦å°½çš„ç‰©ç†å±æ€§æ ‡æ³¨ã€‚åœ¨PhysX-Mobilityä¸çœŸå®åœºæ™¯å›¾åƒä¸Šçš„å¤§é‡å®éªŒè¡¨æ˜ï¼ŒPhysX-Anythingå…·æœ‰å“è¶Šçš„ç”Ÿæˆæ€§èƒ½ä¸å¼ºæ³›åŒ–èƒ½åŠ›ã€‚åœ¨MuJoCoé£æ ¼ç¯å¢ƒä¸­å¼€å±•çš„ä»¿çœŸå®éªŒè¿›ä¸€æ­¥éªŒè¯ï¼Œæœ¬æ–¹æ³•ç”Ÿæˆçš„èµ„äº§å¯ç›´æ¥ç”¨äºé«˜æ¥è§¦é¢‘ç‡çš„æœºå™¨äººç­–ç•¥å­¦ä¹ ã€‚æˆ‘ä»¬ç›¸ä¿¡PhysX-Anythingå°†æœ‰åŠ›æ¨åŠ¨ä¸‹æ¸¸åº”ç”¨å‘å±•ï¼Œå°¤å…¶åœ¨å…·èº«AIä¸ç‰©ç†ä»¿çœŸé¢†åŸŸã€‚</p>
<h2 data-id="heading-20">Step-Audio-R1 Technical Report</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.15848" target="_blank" title="https://arxiv.org/abs/2511.15848" ref="nofollow noopener noreferrer">Step-Audio-R1 æŠ€æœ¯æŠ¥å‘Š</a></p>
<p>è¿‘æœŸæ¨ç†æ¨¡å‹é€šè¿‡æ‰©å±•çš„æ€ç»´é“¾æ¨ç†è¿‡ç¨‹ï¼Œåœ¨æ–‡æœ¬å’Œè§†è§‰é¢†åŸŸå–å¾—äº†æ˜¾è‘—æˆåŠŸã€‚ç„¶è€Œï¼ŒéŸ³é¢‘è¯­è¨€æ¨¡å‹ä¸­å§‹ç»ˆå­˜åœ¨ä¸€ä¸ªä»¤äººå›°æƒ‘çš„ç°è±¡ï¼šå®ƒä»¬åœ¨æå°‘æˆ–æ— éœ€æ¨ç†çš„æƒ…å†µä¸‹è¡¨ç°æ›´ä¼˜ï¼Œè¿™å¼•å‘äº†ä¸€ä¸ªæ ¹æœ¬æ€§é—®é¢˜â€”â€”éŸ³é¢‘æ™ºèƒ½æ˜¯å¦çœŸèƒ½ä»æ·±æ€ç†Ÿè™‘çš„æ¨ç†ä¸­å—ç›Šï¼Ÿæˆ‘ä»¬æ¨å‡º Step-Audio-R1ï¼Œè¿™æ˜¯é¦–ä¸ªæˆåŠŸåœ¨éŸ³é¢‘é¢†åŸŸå®ç°æ¨ç†èƒ½åŠ›çš„éŸ³é¢‘æ¨ç†æ¨¡å‹ã€‚é€šè¿‡æˆ‘ä»¬æå‡ºçš„åŸºäºæ¨¡æ€çš„æ¨ç†è’¸é¦ (MGRD) æ¡†æ¶ï¼ŒStep-Audio-R1 èƒ½å¤Ÿç”Ÿæˆä¸éŸ³é¢‘ç›¸å…³çš„æ¨ç†é“¾ï¼Œè¿™äº›æ¨ç†é“¾çœŸæ­£æ‰æ ¹äºå£°å­¦ç‰¹å¾ï¼Œè€Œéäº§ç”Ÿè„±èŠ‚çš„è™šå‡æ¨ç†ã€‚æˆ‘ä»¬çš„æ¨¡å‹å±•ç°å‡ºå¼ºå¤§çš„éŸ³é¢‘æ¨ç†èƒ½åŠ›ï¼Œåœ¨æ¶µç›–è¯­éŸ³ã€ç¯å¢ƒå£°éŸ³å’ŒéŸ³ä¹çš„ç»¼åˆéŸ³é¢‘ç†è§£ä¸æ¨ç†åŸºå‡†æµ‹è¯•ä¸­ï¼Œè¶…è¶Šäº† Gemini 2.5 Proï¼Œå¹¶ä¸æœ€å…ˆè¿›çš„ Gemini 3 Pro æ€§èƒ½ç›¸å½“ã€‚è¿™äº›ç»“æœè¡¨æ˜ï¼Œå½“å¾—åˆ°é€‚å½“é”šå®šæ—¶ï¼Œæ¨ç†æ˜¯ä¸€ç§å¯è·¨æ¨¡æ€è¿ç§»çš„èƒ½åŠ›ï¼Œä»è€Œå°†æ‰©å±•æ¨ç†ä»åŠ£åŠ¿è½¬åŒ–ä¸ºéŸ³é¢‘æ™ºèƒ½çš„å¼ºå¤§ä¼˜åŠ¿ã€‚é€šè¿‡æˆåŠŸæ„å»ºé¦–ä¸ªéŸ³é¢‘æ¨ç†æ¨¡å‹ï¼ŒStep-Audio-R1 ä¸ºå¼€å‘çœŸæ­£è·¨æ‰€æœ‰æ„Ÿå®˜æ¨¡æ€è¿›è¡Œæ·±åº¦æ€è€ƒçš„å¤šæ¨¡æ€æ¨ç†ç³»ç»Ÿå¼€è¾Ÿäº†æ–°è·¯å¾„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨Androidä¸­ï¼Œkotlin çš„ä¸€äº›å¼€å‘æŠ€å·§ï¼ˆäºŒï¼‰]]></title>    <link>https://juejin.cn/post/7575456858426900526</link>    <guid>https://juejin.cn/post/7575456858426900526</guid>    <pubDate>2025-11-23T12:51:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575456858426900526" data-draft-id="7575159361904148521" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨Androidä¸­ï¼Œkotlin çš„ä¸€äº›å¼€å‘æŠ€å·§ï¼ˆäºŒï¼‰"/> <meta itemprop="keywords" content="Android,Kotlin"/> <meta itemprop="datePublished" content="2025-11-23T12:51:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å¢™ç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/1468603264407022"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨Androidä¸­ï¼Œkotlin çš„ä¸€äº›å¼€å‘æŠ€å·§ï¼ˆäºŒï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1468603264407022/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å¢™ç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T12:51:17.000Z" title="Sun Nov 23 2025 12:51:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><p>ä¹‹å‰åœ¨ <a href="https://juejin.cn/post/7385747507954843686" target="_blank" title="https://juejin.cn/post/7385747507954843686">Androidä¸­ï¼Œkotlin çš„ä¸€äº›å¼€å‘æŠ€å·§</a> ä¸­ä»‹ç»äº†ä¸ƒç§ Kotlin æŠ€å·§ï¼Œç»è¿‡ä¸€å¹´å¤š kotlin çš„ä½¿ç”¨ï¼Œè¿™é‡Œå†ä»‹ç»æ–°çš„å¼€å‘æŠ€å·§ã€‚</p>
<h2 data-id="heading-0">ä¸­ç¼€è¡¨è¾¾å¼</h2>
<p>å¸¦æœ‰ <code>infix</code> å…³é”®å­—çš„æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨ä¸­ç¼€è¡¨ç¤ºæ³•è°ƒç”¨ã€‚ä¸­ç¼€è¡¨ç¤ºæ³•æ˜¯<strong>æŒ‡å¿½ç•¥è¯¥è°ƒç”¨çš„ç‚¹ä¸åœ†æ‹¬å·</strong>ã€‚ä½¿ç”¨ä¸­ç¼€è¡¨è¾¾å¼å¯ä»¥å®ç°å¾ˆå¤šæ•ˆæœï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å®šä¹‰æ”¯æŒ å¯null çš„ &gt; æ“ä½œ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">infix</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Int</span>?.<span class="hljs-title">bigger</span><span class="hljs-params">(other: <span class="hljs-type">Int</span>?)</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> {
        <span class="hljs-keyword">this</span> != <span class="hljs-literal">null</span> &amp;&amp; other != <span class="hljs-literal">null</span> -&gt; <span class="hljs-keyword">this</span> - other &gt; <span class="hljs-number">0</span>
        <span class="hljs-keyword">else</span> -&gt; <span class="hljs-literal">false</span>
    }
}
<span class="hljs-comment">// å¦‚ä¸‹æ‰€ç¤ºï¼Œç»“æœä¸º false</span>
<span class="hljs-keyword">val</span> result = <span class="hljs-number">5</span> bigger <span class="hljs-literal">null</span>
</code></pre>
<h2 data-id="heading-1">observable å§”æ‰˜</h2>
<p>å•ä¾‹å¯¹è±¡ <code>kotlin.properties.Delegates</code> æœ‰ä¸€ä¸ª <code>observable()</code> ä¾¿åˆ©å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ª <code>ReadWriteProperty</code> å§”æ‰˜ï¼Œè¯¥å§”æ‰˜å°†å¯¹ä¸å…¶å…³è”çš„å˜é‡æˆ–å±æ€§çš„ä»»ä½•ä¿®æ”¹è¿›è¡Œæ‹¦æˆªã€‚å½“å‘ç”Ÿä¿®æ”¹æ—¶ï¼Œå§”æ‰˜å°†è°ƒç”¨ä½ ç”¨ <code>observable()</code> å‡½æ•°æ³¨å†Œçš„äº‹ä»¶å¤„ç†ç¨‹åºã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ¯æ¬¡èµ‹å€¼æ—¶ï¼Œè‡ªåŠ¨cancelä¸Šä¸€ä¸ªæ—§job</span>
<span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;<span class="hljs-keyword">reified</span> T : Job?&gt;</span> <span class="hljs-title">cannelJob</span><span class="hljs-params">()</span></span> = Delegates.observable&lt;T?&gt;(initialValue = <span class="hljs-literal">null</span>) { property, oldValue, newValue -&gt; 
    oldValue?.cancel() 
}
<span class="hljs-comment">// ç¤ºä¾‹å¦‚ä¸‹ï¼š</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> myJob: Job? <span class="hljs-keyword">by</span> cannelJob()
<span class="hljs-comment">// ä¼šè‡ªåŠ¨è°ƒç”¨ myJob?.cancel()</span>
myJob = scope.launch {
    ...
}
</code></pre>
<h2 data-id="heading-2">vetoable å§”æ‰˜</h2>
<p>ä¸ä½¿ç”¨ <code>observable</code> æ³¨å†Œçš„å¤„ç†ç¨‹åºä¸åŒï¼Œå…¶è¿”å›ç±»å‹ä¸ºUnitï¼Œä½¿ç”¨ <code>vetoable</code> æ³¨å†Œçš„å¤„ç†ç¨‹åºè¿”å›å¸ƒå°”ç»“æœã€‚è¿”å›å€¼ä¸ºtrueè¡¨ç¤ºåŒæ„æ¥å—ä¿®æ”¹ï¼Œfalse è¡¨ç¤ºæ‹’ç»ã€‚å¦‚æœæ‹’ç»ï¼Œä¿®æ”¹å°†è¢«ä¸¢å¼ƒã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªPersonç±»ï¼Œä½¿ç”¨vetoableå§”æ‰˜é™åˆ¶å¹´é¾„èŒƒå›´</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
        <span class="hljs-keyword">var</span> age: <span class="hljs-built_in">Int</span> <span class="hljs-keyword">by</span> Delegates.vetoable(initialValue = <span class="hljs-number">0</span>) { property, oldValue, newValue -&gt;
            <span class="hljs-comment">// æ ¡éªŒé€»è¾‘ï¼šå¹´é¾„å¿…é¡»åœ¨0-150ä¹‹é—´æ‰å…è®¸ä¿®æ”¹</span>
            newValue <span class="hljs-keyword">in</span> <span class="hljs-number">0.</span><span class="hljs-number">.150</span>
        }
    }

    <span class="hljs-keyword">val</span> person = Person()

    <span class="hljs-comment">// 1. åˆæ³•ä¿®æ”¹ï¼šå¹´é¾„è®¾ä¸º20ï¼Œç¬¦åˆèŒƒå›´</span>
    person.age = <span class="hljs-number">20</span>
    println(<span class="hljs-string">"ä¿®æ”¹åçš„å¹´é¾„ï¼š<span class="hljs-subst">${person.age}</span>"</span>) <span class="hljs-comment">// è¾“å‡ºï¼šä¿®æ”¹åçš„å¹´é¾„ï¼š20</span>

    <span class="hljs-comment">// 2. éæ³•ä¿®æ”¹ï¼šå¹´é¾„è®¾ä¸º200ï¼Œè¶…å‡ºèŒƒå›´ï¼Œè¢«å¦å†³</span>
    person.age = <span class="hljs-number">200</span>
    println(<span class="hljs-string">"ä¿®æ”¹åçš„å¹´é¾„ï¼š<span class="hljs-subst">${person.age}</span>"</span>) <span class="hljs-comment">// è¾“å‡ºï¼šä¿®æ”¹åçš„å¹´é¾„ï¼š20ï¼ˆä¿ç•™æ—§å€¼ï¼‰</span>

    <span class="hljs-comment">// 3. éæ³•ä¿®æ”¹ï¼šå¹´é¾„è®¾ä¸º-5ï¼ŒåŒæ ·è¢«å¦å†³</span>
    person.age = -<span class="hljs-number">5</span>
    println(<span class="hljs-string">"ä¿®æ”¹åçš„å¹´é¾„ï¼š<span class="hljs-subst">${person.age}</span>"</span>) <span class="hljs-comment">// è¾“å‡ºï¼šä¿®æ”¹åçš„å¹´é¾„ï¼š20ï¼ˆä¿ç•™æ—§å€¼ï¼‰</span>
}
</code></pre>
<h2 data-id="heading-3">NonCancellable</h2>
<p><code>withContext (NonCancellable)</code> ä¼šè®©ä»£ç  â€œæ— è§†â€ åç¨‹å–æ¶ˆï¼Œåº”<strong>ä»…ç”¨äºå¿…é¡»æ‰§è¡Œçš„æ”¶å°¾æ“ä½œ</strong>ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">val job = scope<span class="hljs-selector-class">.launch</span> {
        try {
            <span class="hljs-comment">// æ¨¡æ‹Ÿå»ºç«‹ç½‘ç»œè¿æ¥</span>
            socket = <span class="hljs-built_in">Socket</span>("localhost", <span class="hljs-number">8080</span>)
            <span class="hljs-built_in">println</span>("ç½‘ç»œè¿æ¥å·²å»ºç«‹ï¼Œæ‰§è¡Œæ•°æ®ä¼ è¾“...")
            <span class="hljs-built_in">delay</span>(<span class="hljs-number">10000</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®ä¼ è¾“ï¼ˆå¯å–æ¶ˆï¼‰</span>
        } finally {
            <span class="hljs-built_in">println</span>("è¿›å…¥ finally å—ï¼Œå‡†å¤‡å…³é—­è¿æ¥...")
            <span class="hljs-comment">// å¿…é¡»ç”¨ NonCancellableï¼Œ</span>
            <span class="hljs-comment">// å¦åˆ™ socket.close() è‹¥åŒ…å«æŒ‚èµ·é€»è¾‘ä¼šè¢«å–æ¶ˆ</span>
            <span class="hljs-built_in">withContext</span>(NonCancellable) {
                socket?<span class="hljs-selector-class">.close</span>()
                <span class="hljs-built_in">println</span>("ç½‘ç»œè¿æ¥å·²å…³é—­")
                <span class="hljs-comment">// æ¨¡æ‹ŸæŒ‚èµ·çš„æ”¶å°¾æ“ä½œï¼ˆå¦‚å†™å…¥æ—¥å¿—ï¼‰</span>
                <span class="hljs-built_in">delay</span>(<span class="hljs-number">1000</span>)
                <span class="hljs-built_in">println</span>("æ”¶å°¾æ—¥å¿—å·²å†™å…¥")
            }
        }
    }

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Next.jsç¬¬åç« (Proxy)]]></title>    <link>https://juejin.cn/post/7575458028254822443</link>    <guid>https://juejin.cn/post/7575458028254822443</guid>    <pubDate>2025-11-23T13:00:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575458028254822443" data-draft-id="7575442779039334442" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Next.jsç¬¬åç« (Proxy)"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-23T13:00:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ»¡zs"/> <meta itemprop="url" content="https://juejin.cn/user/2463384809252397"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Next.jsç¬¬åç« (Proxy)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2463384809252397/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ»¡zs
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T13:00:39.000Z" title="Sun Nov 23 2025 13:00:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Proxyä»£ç†</h2>
<blockquote>
<p>ä» Next.js 16 å¼€å§‹ï¼Œä¸­é—´ä»¶<code>Middleware</code>æ›´åä¸ºä»£ç†<code>ï¼ˆProxyï¼‰</code>ï¼Œä»¥æ›´å¥½åœ°ä½“ç°å…¶ç”¨é€”ã€‚å…¶åŠŸèƒ½ä¿æŒä¸å˜</p>
</blockquote>
<p>å¦‚æœä½ æƒ³å‡çº§ä¸º16.xç‰ˆæœ¬ï¼ŒNext.jsæä¾›äº†å‘½ä»¤è¡Œå·¥å…·æ¥å¸®åŠ©ä½ å‡çº§ï¼Œåªéœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npx @next/codemod@canary middleware-to-proxy .
</code></pre>
<p>ä»£ç è½¬æ¢ä¼šå°†æ–‡ä»¶å’Œå‡½æ•°åä»middlewareé‡å‘½åä¸ºproxyã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// middleware.ts -&gt; proxy.ts</span>
 
- <span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">middleware</span>(<span class="hljs-params"/>) {
+ <span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">proxy</span>(<span class="hljs-params"/>) {
</code></pre>
<h3 data-id="heading-1">åŸºæœ¬ä½¿ç”¨</h3>
<p>åº”ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>å¤„ç†è·¨åŸŸè¯·æ±‚</li>
<li>æ¥å£è½¬å‘ä¾‹å¦‚/api/user -&gt; (å¯èƒ½æ˜¯å…¶ä»–æœåŠ¡å™¨java/go/pythonç­‰) -&gt; /api/user</li>
<li>é™æµä¾‹å¦‚é…åˆç¬¬ä¸‰æ–¹æœåŠ¡åšé™æµ</li>
<li>é‰´æƒ/åˆ¤æ–­æ˜¯å¦ç™»å½•</li>
</ul>
<p>Prxoyä»£ç†å…¶å®è·Ÿæ‹¦æˆªå™¨ç±»ä¼¼ï¼Œå®ƒå¯ä»¥åœ¨è¯·æ±‚å®Œæˆä¹‹å‰è¿›è¡Œæ‹¦æˆªï¼Œç„¶åè¿›è¡Œä¸€äº›å¤„ç†ï¼Œä¾‹å¦‚ï¼šä¿®æ”¹è¯·æ±‚å¤´ã€ä¿®æ”¹è¯·æ±‚ä½“ã€ä¿®æ”¹å“åº”ä½“ç­‰ã€‚</p>
<p>src/proxy.ts</p>
<p>å®šä¹‰proxyå‡½æ•°å¯¼å‡ºå³å¯ï¼ŒNext.jsä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextRequest</span>, <span class="hljs-title class_">NextResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/server"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">proxy</span>(<span class="hljs-params">request: NextRequest</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(request.<span class="hljs-property">url</span>,<span class="hljs-string">'url'</span>);
}
</code></pre>
<p>ä½†æ˜¯ä½ ä¼šå‘ç°ï¼Œä»–ä¼šæ‹¦æˆªé¡¹ç›®ä¸­æ‰€æœ‰çš„è¯·æ±‚ï¼ŒåŒ…æ‹¬é™æ€èµ„æºã€APIè¯·æ±‚ã€é¡µé¢è¯·æ±‚ç­‰ã€‚</p>
<pre><code class="hljs language-txt" lang="txt">http://localhost:3000/.well-known/appspecific/com.chrome.devtools.json url
http://localhost:3000/_next/static/chunks/src_app_globals_91e4631d.css url
http://localhost:3000/_next/static/chunks/%5Bturbopack%5D_browser_dev_hmr-client_hmr-client_ts_cedd0592._.js url
http://localhost:3000/_next/static/chunks/node_modules_next_dist_compiled_react-dom_1e674e59._.js url
http://localhost:3000/_next/static/chunks/node_modules_next_dist_compiled_react-server-dom-turbopack_9212ccad._.js url
http://localhost:3000/_next/static/chunks/node_modules_next_dist_compiled_next-devtools_index_1dd7fb59.js url
http://localhost:3000/_next/static/chunks/node_modules_next_dist_compiled_a0e4c7b4._.js url
http://localhost:3000/_next/static/chunks/node_modules_next_dist_client_a38d7d69._.js url
http://localhost:3000/_next/static/chunks/node_modules_next_dist_4b2403f5._.js url
http://localhost:3000/_next/static/chunks/src_app_globals_91e4631d.css.map url
http://localhost:3000/_next/static/chunks/node_modules_%40swc_helpers_cjs_d80fb378._.js url
http://localhost:3000/_next/static/chunks/_a0ff3932._.js url
http://localhost:3000/api/login url
</code></pre>
<h4 data-id="heading-2">é…ç½®(config)</h4>
<p>ä¾‹å¦‚æˆ‘ä»¬åªæƒ³åŒ¹é…<code>'/api'</code>ä¸‹é¢çš„è·¯å¾„å»åšä¸€äº›äº‹æƒ…ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>config</code>é…ç½®æ¥å®ç°ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextRequest</span>, <span class="hljs-title class_">NextResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/server"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">proxy</span>(<span class="hljs-params">request: NextRequest</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(request.<span class="hljs-property">url</span>,<span class="hljs-string">'url'</span>);
}
<span class="hljs-comment">//é…ç½®åŒ¹é…è·¯å¾„</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> config = {
    <span class="hljs-attr">matcher</span>: <span class="hljs-string">'/api/:path*'</span>,
    <span class="hljs-comment">//matcher: ['/api/:path*','/api/user/:path*'], æ”¯æŒå•ä¸ªä»¥åŠå¤šä¸ªè·¯å¾„åŒ¹é…</span>
    <span class="hljs-comment">//matcher: ['/((?!api|_next/static|_next/image|.*\\.png$).*)'], åŒæ ·æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</span>
}
</code></pre>
<p>ç»“åˆä¹‹å‰çš„æ¡ˆä¾‹,åœ¨cookieé‚£ä¸€é›†ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å•ç‹¬å®šä¹‰checkæ¥å£æ£€æŸ¥cookieï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨proxyä¸­å®ç°ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextRequest</span>, <span class="hljs-title class_">NextResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/server"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">proxy</span>(<span class="hljs-params">request: NextRequest</span>) {
    <span class="hljs-keyword">const</span> cookie = request.<span class="hljs-property">cookies</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'token'</span>);
    <span class="hljs-keyword">if</span> (request.<span class="hljs-property">nextUrl</span>.<span class="hljs-property">pathname</span>.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'/home'</span>) &amp;&amp; !cookie) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'redirect to login'</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">redirect</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'/'</span>, request.<span class="hljs-property">url</span>));
    }
    <span class="hljs-keyword">if</span> (cookie &amp;&amp; cookie.<span class="hljs-property">value</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">next</span>();
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">redirect</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'/'</span>, request.<span class="hljs-property">url</span>));
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> config = {
    <span class="hljs-attr">matcher</span>: [<span class="hljs-string">'/api/:path*'</span>, <span class="hljs-string">'/home/:path*'</span>],
}
</code></pre>
<h4 data-id="heading-3">å¤æ‚åŒ¹é…</h4>
<ul>
<li>source: è¡¨ç¤ºåŒ¹é…è·¯å¾„</li>
<li>has: è¡¨ç¤ºåŒ¹é…è·¯å¾„ä¸­å¿…é¡»(åŒ…å«)æŸäº›æ¡ä»¶</li>
<li>missing: è¡¨ç¤ºåŒ¹é…è·¯å¾„ä¸­(å¿…é¡»ä¸åŒ…å«)æŸäº›æ¡ä»¶</li>
</ul>
<p><strong>type</strong> åªèƒ½åŒ¹é…: header, query, cookie</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextRequest</span>, <span class="hljs-title class_">NextResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/server"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ProxyConfig</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/server"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">proxy</span>(<span class="hljs-params">request: NextRequest</span>) {
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'start proxy'</span>)
   <span class="hljs-keyword">return</span> <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">next</span>();
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">config</span>: <span class="hljs-title class_">ProxyConfig</span> = {
    <span class="hljs-attr">matcher</span>: [
        {
            <span class="hljs-attr">source</span>: <span class="hljs-string">'/home/:path*'</span>,
            <span class="hljs-comment">//è¡¨ç¤ºåŒ¹é…è·¯å¾„ä¸­å¿…é¡»(åŒ…å«)Authorizationå¤´å’ŒuserIdæŸ¥è¯¢å‚æ•°</span>
            <span class="hljs-attr">has</span>: [
                { <span class="hljs-attr">type</span>: <span class="hljs-string">'header'</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">'Authorization'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'Bearer 123456'</span> },
                { <span class="hljs-attr">type</span>: <span class="hljs-string">'query'</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">'userId'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'123'</span> }
            ],
            <span class="hljs-comment">//è¡¨ç¤ºåŒ¹é…è·¯å¾„ä¸­(å¿…é¡»ä¸åŒ…å«)cookieå’ŒuserIdæŸ¥è¯¢å‚æ•°</span>
            <span class="hljs-attr">missing</span>: [
                { <span class="hljs-attr">type</span>: <span class="hljs-string">'cookie'</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">'token'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'123456'</span> },
                { <span class="hljs-attr">type</span>: <span class="hljs-string">'query'</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">'userId'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'456'</span> },
            ]
        },
    ]
}
</code></pre>
<p>è®¿é—®urlä¸ºï¼š<code>http://localhost:3000/home?userId=123</code></p>
<h4 data-id="heading-4">æ¡ˆä¾‹å®æˆ˜(å¤„ç†è·¨åŸŸ)</h4>
<p>åªè¦æ˜¯/apiä¸‹é¢çš„æ¥å£éƒ½å¯ä»¥è¢«ä»»æ„è®¿é—®</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextRequest</span>, <span class="hljs-title class_">NextResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/server"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ProxyConfig</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/server"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">proxy</span>(<span class="hljs-params">request: NextRequest</span>) {
    <span class="hljs-keyword">const</span> response = <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">next</span>();
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(corsHeaders).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> {
        response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">set</span>(key, value);
    })
    <span class="hljs-keyword">return</span> response;
}

<span class="hljs-keyword">const</span> corsHeaders = {
    <span class="hljs-string">'Access-Control-Allow-Origin'</span>: <span class="hljs-string">'*'</span>,
    <span class="hljs-string">'Access-Control-Allow-Methods'</span>: <span class="hljs-string">'GET, POST, PUT, DELETE, OPTIONS'</span>,
    <span class="hljs-string">'Access-Control-Allow-Headers'</span>: <span class="hljs-string">'Content-Type, Authorization'</span>,
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">config</span>: <span class="hljs-title class_">ProxyConfig</span> = {
   <span class="hljs-attr">matcher</span>:<span class="hljs-string">'/api/:path*'</span>,
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb6ec749269e4c428d9ed3e7d8cf9a8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5ruhenM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764507639&amp;x-signature=sOLI4%2BJZEG05m3caC%2F6GzrkV9SA%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸æ‡‚æ±‡ç¼–çš„åç«¯ä¸æ˜¯ä¸€ä¸ªå¥½çš„å¼€å‘]]></title>    <link>https://juejin.cn/post/7575162322240274432</link>    <guid>https://juejin.cn/post/7575162322240274432</guid>    <pubDate>2025-11-23T11:10:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575162322240274432" data-draft-id="7575112613778161698" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸æ‡‚æ±‡ç¼–çš„åç«¯ä¸æ˜¯ä¸€ä¸ªå¥½çš„å¼€å‘"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-23T11:10:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸æ‡‚æ±‡ç¼–çš„åç«¯ä¸æ˜¯ä¸€ä¸ªå¥½çš„å¼€å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T11:10:30.000Z" title="Sun Nov 23 2025 11:10:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨é«˜çº§è¯­è¨€ç”šè‡³AIç”Ÿæˆä»£ç æ¨ªè¡Œçš„æ—¶ä»£ï¼Œä¸ºä½•è¿˜è¦å…³æ³¨æœ€åº•å±‚çš„æ±‡ç¼–ï¼Ÿ</p>
</blockquote>
<p>ä½œä¸ºä¸€ååç«¯å¼€å‘è€…ï¼Œæˆ‘åšå®šåœ°è®¤ä¸ºï¼š<strong>ä¸æ‡‚æ±‡ç¼–çš„ä¼˜åŒ–å°±æ˜¯çå­æ‘¸çŸ³å¤´è¿‡æ²³ï¼Œä¸ç†è§£ç³»ç»Ÿåº•å±‚æœºåˆ¶çš„å¼€å‘è€…åœ¨é¢å¯¹å¤æ‚é—®é¢˜æ—¶ï¼Œå°±åƒåœ¨è¿·é›¾ä¸­æ‘¸ç´¢å‰è¡Œçš„ç›²äºº</strong>ã€‚</p>
<p>è¿™ä¸ªè§‚ç‚¹æˆ–è®¸å¬èµ·æ¥æœ‰äº›æç«¯ï¼Œä½†è¯·å…è®¸æˆ‘ç”¨æ¥ä¸‹æ¥çš„å†…å®¹è¯´æœä½ ã€‚</p>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆæˆ‘åšæŒæ±‡ç¼–çš„é‡è¦æ€§ï¼Ÿ</h2>
<p>åœ¨æˆ‘å¤šå¹´çš„åç«¯å¼€å‘ç»å†ä¸­ï¼Œå‘ç°ä¸€ä¸ªä»¤äººæ·±æ€çš„ç°è±¡ï¼šé‚£äº›èƒ½å¤Ÿæ·±å…¥ç†è§£ç³»ç»Ÿåº•å±‚æœºåˆ¶çš„å¼€å‘è€…ï¼Œåœ¨é—®é¢˜å®šä½ã€æ€§èƒ½ä¼˜åŒ–å’Œç³»ç»Ÿè®¾è®¡æ–¹é¢å¾€å¾€æœ‰ç€<strong>é™ç»´æ‰“å‡»</strong>çš„ä¼˜åŠ¿ã€‚ä»–ä»¬ä¸ä»…çŸ¥é“é—®é¢˜æ˜¯ä»€ä¹ˆï¼Œæ›´ç†è§£<strong>ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™æ ·çš„é—®é¢˜</strong>ã€‚</p>
<p>æ±‡ç¼–è¯­è¨€ä½œä¸ºæœ€æ¥è¿‘æœºå™¨åº•å±‚çš„ç¼–ç¨‹è¯­è¨€ï¼Œä¸ºæˆ‘ä»¬æ‰“å¼€äº†ä¸€æ‰‡ç†è§£è®¡ç®—æœºæœ¬è´¨çš„çª—å£ã€‚å½“ä½ çœŸæ­£ç†è§£æ±‡ç¼–ï¼Œä½ å°±ä¼šå‘ç°ï¼š</p>
<ul>
<li><strong>é«˜çº§è¯­è¨€çš„æ‰€æœ‰é­”æ³•éƒ½æ¶ˆå¤±äº†</strong>ï¼Œå‰©ä¸‹çš„åªæœ‰å†°å†·çš„æœºå™¨æŒ‡ä»¤</li>
<li><strong>æ¯ä¸ªæŠ½è±¡èƒŒåéƒ½æœ‰å…¶ä»£ä»·</strong>ï¼Œç†è§£è¿™äº›ä»£ä»·æ‰èƒ½åšå‡ºæ˜æ™ºçš„æƒè¡¡</li>
<li><strong>æ€§èƒ½é—®é¢˜çš„æ ¹æºå¾€å¾€è—åœ¨ä½ çœ‹ä¸åˆ°çš„åº•å±‚</strong></li>
</ul>
<h2 data-id="heading-1">æ±‡ç¼–ï¼šç†è§£è®¡ç®—æœºç³»ç»Ÿçš„ç½—å¡å¡”çŸ³ç¢‘</h2>
<h3 data-id="heading-2">ä»æŠ½è±¡åˆ°ç°å®ï¼šæ­å¼€é«˜çº§è¯­è¨€çš„é¢çº±</h3>
<p>ç°ä»£åç«¯å¼€å‘å……æ–¥ç€å„ç§é«˜çº§æŠ½è±¡ï¼šJavaçš„è™šæ‹Ÿæœºã€Goçš„goroutineã€Pythonçš„è§£é‡Šå™¨ã€‚è¿™äº›æŠ½è±¡æé«˜äº†å¼€å‘æ•ˆç‡ï¼Œä½†ä¹Ÿéšè—äº†åº•å±‚çœŸç›¸ã€‚</p>
<p><strong>ä¸ç†è§£æ±‡ç¼–çš„å¼€å‘è€…</strong>çœ‹åˆ°çš„æ˜¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åªæ˜¯ä¸€è¡Œç®€å•çš„åŠ æ³•</span>
<span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> {
    <span class="hljs-keyword">return</span> a + b;
}
</code></pre>
<p><strong>æ‡‚æ±‡ç¼–çš„å¼€å‘è€…</strong>çœ‹åˆ°çš„æ˜¯ï¼š</p>
<pre><code class="hljs language-assembly" lang="assembly">; å®é™…çš„CPUå·¥ä½œ
mov    eax, edi     ; å°†å‚æ•°aæ”¾å…¥eaxå¯„å­˜å™¨
add    eax, esi     ; å°†å‚æ•°båŠ åˆ°eax
ret                 ; è¿”å›ç»“æœ
</code></pre>
<p>è¿™ç§åº•å±‚ç†è§£è®©ä½ èƒ½å¤Ÿ<strong>é¢„æµ‹æ€§èƒ½ç‰¹å¾</strong>ã€<strong>è¯Šæ–­è¯¡å¼‚bug</strong>ã€<strong>åšå‡ºæ›´ä¼˜çš„è®¾è®¡å†³ç­–</strong>ã€‚</p>
<h2 data-id="heading-3">å®æˆ˜æ¡ˆä¾‹ï¼šæ±‡ç¼–çŸ¥è¯†å¦‚ä½•è§£å†³å®é™…é—®é¢˜</h2>
<h3 data-id="heading-4">æ¡ˆä¾‹1ï¼šé‚£ä¸ªè®©æˆ‘ä»¬åŠ ç­ä¸‰å¤©çš„æ€§èƒ½é—®é¢˜</h3>
<p>æ›¾ç»é‡åˆ°ä¸€ä¸ªGoæœåŠ¡ï¼Œåœ¨é«˜å³°æœŸCPUä½¿ç”¨ç‡å¼‚å¸¸é£™å‡ã€‚å¸¸è§„ profiling æ˜¾ç¤ºçƒ­ç‚¹åœ¨ä¸€ä¸ªç®€å•çš„å¾ªç¯ä¸­ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ProcessBatch</span><span class="hljs-params">(items []Item)</span></span> {
    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(items); i++ {
        items[i].Value = items[i].Value * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>
    }
}
</code></pre>
<p>è¡¨é¢çœ‹èµ·æ¥æ¯«æ— é—®é¢˜ã€‚ä½†é€šè¿‡æŸ¥çœ‹æ±‡ç¼–è¾“å‡ºï¼Œæˆ‘ä»¬å‘ç°å¾ªç¯ä¸­æ’å…¥äº†<strong>å¤§é‡çš„è¾¹ç•Œæ£€æŸ¥æŒ‡ä»¤</strong>ï¼Œè¿™äº›æ£€æŸ¥åœ¨å¯†é›†å¾ªç¯ä¸­ç´¯ç§¯æˆä¸ºæ˜¾è‘—å¼€é”€ã€‚è§£å†³æ–¹æ¡ˆå¾ˆç®€å•ï¼šä½¿ç”¨æ›´å¯é¢„æµ‹çš„è®¿é—®æ¨¡å¼ï¼Œè®©ç¼–è¯‘å™¨èƒ½å¤Ÿä¼˜åŒ–æ‰è¿™äº›æ£€æŸ¥ã€‚</p>
<p><strong>ä¸æ‡‚æ±‡ç¼–çš„å›¢é˜Ÿ</strong>å¯èƒ½ä¼šï¼šå°è¯•å„ç§ç®—æ³•ä¼˜åŒ–ï¼Œç”šè‡³è€ƒè™‘é‡å†™æœåŠ¡ã€‚
<strong>æ‡‚æ±‡ç¼–çš„å›¢é˜Ÿ</strong>ï¼šåŠå°æ—¶å®šä½é—®é¢˜ï¼Œååˆ†é’Ÿä¿®å¤ã€‚</p>
<h3 data-id="heading-5">æ¡ˆä¾‹2ï¼šç¥ç§˜çš„å†…å­˜æŸå</h3>
<p>ä¸€ä¸ªJavaæœåŠ¡å¶å°”åœ¨ç”Ÿäº§ç¯å¢ƒå´©æºƒï¼Œæ—¥å¿—åªæœ‰æ¨¡ç³Šçš„segmentation faultä¿¡æ¯ã€‚é€šè¿‡åˆ†æcore dumpçš„æ±‡ç¼–ä»£ç ï¼Œæˆ‘ä»¬å‘ç°åœ¨æŸä¸ªJNIè°ƒç”¨ä¸­ï¼Œæ ˆæŒ‡é’ˆè¢«é”™è¯¯åœ°ä¿®æ”¹ï¼Œå¯¼è‡´å‡½æ•°è¿”å›æ—¶è·³è½¬åˆ°éæ³•åœ°å€ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// æœ‰é—®é¢˜çš„JNIä»£ç </span>
JNIEXPORT <span class="hljs-type">void</span> JNICALL <span class="hljs-title function_">Java_MyClass_nativeMethod</span>
  <span class="hljs-params">(JNIEnv *env, jobject obj)</span> {
    <span class="hljs-type">char</span> buffer[<span class="hljs-number">64</span>];
    <span class="hljs-comment">// æ ˆæº¢å‡ºå‘ç”Ÿåœ¨è¿™é‡Œ</span>
    some_function(buffer); 
}
</code></pre>
<p>å¯¹åº”çš„æ±‡ç¼–æ˜¾ç¤ºæ ˆå¸§åˆ†é…ä¸è¶³ï¼Œå¯¼è‡´å†…å­˜è¶Šç•Œã€‚è¿™ç§é—®é¢˜ä»Javaå±‚é¢å‡ ä¹æ— æ³•è¯Šæ–­ã€‚</p>
<h3 data-id="heading-6">æ¡ˆä¾‹3ï¼šç†è§£å¹¶å‘æˆæœ¬</h3>
<p>å½“æˆ‘ä»¬è®¨è®ºGoçš„goroutineæ¯”çº¿ç¨‹æ›´è½»é‡æ—¶ï¼Œä½ çŸ¥é“"è½»é‡"å…·ä½“ä½“ç°åœ¨å“ªé‡Œå—ï¼Ÿ</p>
<p>æ±‡ç¼–å±‚é¢å‘Šè¯‰æˆ‘ä»¬ç­”æ¡ˆï¼š</p>
<ul>
<li><strong>goroutineåˆ‡æ¢</strong>ï¼šä¸»è¦åœ¨ç”¨æˆ·æ€å®Œæˆï¼Œä¸æ¶‰åŠå†…æ ¸è°ƒåº¦</li>
<li><strong>çº¿ç¨‹åˆ‡æ¢</strong>ï¼šéœ€è¦é™·å…¥å†…æ ¸ï¼Œå®Œæ•´çš„ä¸Šä¸‹æ–‡ä¿å­˜å’Œæ¢å¤</li>
</ul>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// è¿™ä¸ªgoroutineçš„åˆ›å»ºå’Œè°ƒåº¦æˆæœ¬</span>
<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// å·¥ä½œä»£ç </span>
}()
</code></pre>
<p>åœ¨æ±‡ç¼–å±‚é¢ï¼Œä½ ä¼šçœ‹åˆ°ç¼–è¯‘å™¨å¦‚ä½•ç”Ÿæˆä»£ç æ¥ç®¡ç†goroutineçš„æ ˆå’Œè°ƒåº¦ï¼Œè¿™ç§ç†è§£è®©ä½ èƒ½å¤Ÿåšå‡ºæ›´æ˜æ™ºçš„å¹¶å‘è®¾è®¡å†³ç­–ã€‚</p>
<h2 data-id="heading-7">æ±‡ç¼–æ€ç»´ï¼šå³ä½¿ä¸å†™æ±‡ç¼–ä»£ç ä¹Ÿèƒ½å—ç›Š</h2>
<p>å­¦ä¹ æ±‡ç¼–æœ€é‡è¦çš„ä¸æ˜¯å­¦ä¼š<strong>ç¼–å†™</strong>æ±‡ç¼–ç¨‹åºï¼Œè€Œæ˜¯åŸ¹å…»<strong>æ±‡ç¼–æ€ç»´</strong>â€”â€”ç†è§£ä»£ç åœ¨æœºå™¨å±‚é¢çš„æ‰§è¡Œæ–¹å¼ã€‚</p>
<h3 data-id="heading-8">1. å†…å­˜è®¿é—®æ¨¡å¼ä¼˜åŒ–</h3>
<p>ç†è§£CPUç¼“å­˜è¡Œã€é¢„å–æœºåˆ¶åï¼Œä½ ä¼šè‡ªç„¶åœ°ä¼˜åŒ–æ•°æ®ç»“æ„ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// ä¼˜åŒ–å‰ï¼šéšæœºè®¿é—®ï¼Œç¼“å­˜ä¸å‹å¥½</span>
<span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
    ID      <span class="hljs-type">int</span>
    Name    <span class="hljs-type">string</span>
    Email   <span class="hljs-type">string</span>
    Status  <span class="hljs-type">bool</span> <span class="hljs-comment">// ç»å¸¸è®¿é—®çš„å­—æ®µ</span>
}

<span class="hljs-comment">// ä¼˜åŒ–åï¼šçƒ­ç‚¹æ•°æ®é›†ä¸­ï¼Œç¼“å­˜å‹å¥½</span>
<span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
    Status  <span class="hljs-type">bool</span> <span class="hljs-comment">// ç»å¸¸è®¿é—®çš„å­—æ®µæ”¾åœ¨å‰é¢</span>
    ID      <span class="hljs-type">int</span>
    Name    <span class="hljs-type">string</span>
    Email   <span class="hljs-type">string</span>
}
</code></pre>
<h3 data-id="heading-9">2. å‡½æ•°è°ƒç”¨å¼€é”€æ„è¯†</h3>
<p>ç†è§£è°ƒç”¨æ ˆå’Œå¯„å­˜å™¨ä½¿ç”¨åï¼Œä½ ä¼šï¼š</p>
<ul>
<li>é¿å…è¿‡åº¦åˆ†å±‚å’Œå°å‡½æ•°æ»¥ç”¨</li>
<li>ç†è§£å†…è”ä¼˜åŒ–çš„ä»·å€¼å’Œé™åˆ¶</li>
<li>åˆç†ä½¿ç”¨å‡½æ•°æŒ‡é’ˆå’Œæ¥å£</li>
</ul>
<h3 data-id="heading-10">3. ç³»ç»Ÿè°ƒç”¨æˆæœ¬è®¤çŸ¥</h3>
<p>é€šè¿‡ç†è§£ç”¨æˆ·æ€åˆ°å†…æ ¸æ€çš„åˆ‡æ¢æˆæœ¬ï¼Œä½ ä¼šï¼š</p>
<ul>
<li>æ‰¹é‡å¤„ç†ç³»ç»Ÿè°ƒç”¨</li>
<li>åˆç†ä½¿ç”¨ç¼“å†²å’Œç¼“å­˜</li>
<li>é€‰æ‹©é€‚å½“çš„I/Oæ¨¡å‹</li>
</ul>
<h2 data-id="heading-11">ç°ä»£åç«¯å¼€å‘ä¸­æ±‡ç¼–çš„å®é™…åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-12">å¾®æœåŠ¡æ¶æ„ä¸‹çš„ä»·å€¼</h3>
<p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œæ±‡ç¼–çŸ¥è¯†å¸®åŠ©ä½ ï¼š</p>
<ul>
<li><strong>ç²¾å‡†å®šä½ç½‘ç»œè¶…æ—¶é—®é¢˜</strong>ï¼šåŒºåˆ†æ˜¯ç½‘ç»œå»¶è¿Ÿè¿˜æ˜¯å¤„ç†å»¶è¿Ÿ</li>
<li><strong>ä¼˜åŒ–åºåˆ—åŒ–/ååºåˆ—åŒ–</strong>ï¼šç†è§£å†…å­˜æ‹·è´å’Œç¼–ç è§£ç çš„æˆæœ¬</li>
<li><strong>è¯Šæ–­å®¹å™¨ç¯å¢ƒæ€§èƒ½é—®é¢˜</strong>ï¼šç†è§£cgroupså’Œnamespacesçš„åº•å±‚å½±å“</li>
</ul>
<h3 data-id="heading-13">äº‘åŸç”Ÿæ—¶ä»£çš„æ±‡ç¼–ä»·å€¼</h3>
<p>åœ¨Kuberneteså’Œäº‘ç¯å¢ƒä¸­ï¼š</p>
<ul>
<li><strong>èµ„æºé™åˆ¶çš„çœŸå®å½±å“</strong>ï¼šç†è§£CPUé™é…é¢åœ¨è°ƒåº¦å™¨å±‚é¢çš„å®ç°</li>
<li><strong>ç½‘ç»œæ€§èƒ½åˆ†æ</strong>ï¼šä»ç³»ç»Ÿè°ƒç”¨çœ‹åˆ°ç½‘ç»œåŒ…å¤„ç†</li>
<li><strong>å­˜å‚¨I/Oä¼˜åŒ–</strong>ï¼šç†è§£page cacheå’Œç›´æ¥I/Oçš„é€‰æ‹©</li>
</ul>
<h2 data-id="heading-14">å¦‚ä½•å¼€å§‹ä½ çš„æ±‡ç¼–å­¦ä¹ ä¹‹æ—…</h2>
<h3 data-id="heading-15">ç¬¬ä¸€æ­¥ï¼šå»ºç«‹åŸºç¡€è®¤çŸ¥</h3>
<ol>
<li><strong>å­¦ä¹ åŸºæœ¬æ¦‚å¿µ</strong>ï¼šå¯„å­˜å™¨ã€å†…å­˜åœ°å€ã€æŒ‡ä»¤å‘¨æœŸ</li>
<li><strong>ç†è§£CPUå·¥ä½œæ¨¡å¼</strong>ï¼šä¿æŠ¤æ¨¡å¼ã€è™šæ‹Ÿå†…å­˜ã€ä¸­æ–­å¤„ç†</li>
<li><strong>æŒæ¡å¸¸ç”¨æŒ‡ä»¤</strong>ï¼šmovã€addã€callã€jmpç­‰æ ¸å¿ƒæŒ‡ä»¤</li>
</ol>
<h3 data-id="heading-16">ç¬¬äºŒæ­¥ï¼šå®è·µç»“åˆç†è®º</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹ä½ ä»£ç çš„æ±‡ç¼–è¾“å‡º</span>
go tool compile -S main.go
gcc -S -O2 example.c
javap -c MyClass.class
</code></pre>
<h3 data-id="heading-17">ç¬¬ä¸‰æ­¥ï¼šèå…¥æ—¥å¸¸å·¥ä½œ</h3>
<ul>
<li>åœ¨æ€§èƒ½åˆ†ææ—¶å¤šé—®ä¸€å¥"ä¸ºä»€ä¹ˆ"</li>
<li>é‡åˆ°è¯¡å¼‚bugæ—¶è€ƒè™‘åº•å±‚å¯èƒ½æ€§</li>
<li>è®¾è®¡ç³»ç»Ÿæ—¶æ€è€ƒåº•å±‚ä»£ä»·</li>
</ul>
<h2 data-id="heading-18">æœ€å</h2>
<p>åœ¨AIèƒ½å¤Ÿç”Ÿæˆä»£ç çš„ä»Šå¤©ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé—®ï¼šè¿˜æœ‰å¿…è¦å­¦ä¹ è¿™ç§åº•å±‚çŸ¥è¯†å—ï¼Ÿ</p>
<p>æˆ‘çš„å›ç­”æ˜¯ï¼š<strong>æ­£å› ä¸ºAIæ“…é•¿ç”Ÿæˆé«˜çº§ä»£ç ï¼Œç†è§£åº•å±‚çš„å¼€å‘è€…æ‰æ›´åŠ çè´µ</strong>ã€‚</p>
<p>AIå¯ä»¥å¸®ä½ å†™ä¸šåŠ¡é€»è¾‘ï¼Œä½†å¾ˆéš¾å¸®ä½ ï¼š</p>
<ul>
<li>è¯Šæ–­ä¸€ä¸ªåªæœ‰åœ¨ç”Ÿäº§ç¯å¢ƒå‡ºç°çš„æ€§èƒ½é—®é¢˜</li>
<li>ä¼˜åŒ–ä¸€ä¸ªå·²ç»é«˜åº¦ä¼˜åŒ–çš„å…³é”®è·¯å¾„</li>
<li>è®¾è®¡ä¸€ä¸ªæ—¢ä¼˜é›…åˆé«˜æ•ˆçš„ç³»ç»Ÿæ¶æ„</li>
</ul>
<p><strong>æ±‡ç¼–çŸ¥è¯†æ˜¯ä½ çš„è¶…èƒ½åŠ›</strong>ï¼Œå®ƒè®©ä½ ï¼š</p>
<ul>
<li>åœ¨åˆ«äººçœ‹åˆ°é­”æ³•çš„åœ°æ–¹çœ‹åˆ°æœºåˆ¶</li>
<li>åœ¨åˆ«äººæ»¡è¶³äºè¡¨è±¡çš„åœ°æ–¹æ¢ç©¶æœ¬è´¨</li>
<li>åœ¨åˆ«äººæŸæ‰‹æ— ç­–çš„åœ°æ–¹æ‰¾åˆ°å‡ºè·¯</li>
</ul>
<p>åç«¯å¼€å‘çš„çœŸæ­£é«˜æ‰‹ï¼Œæ—¢èƒ½åœ¨æ¶æ„å±‚é¢é©¾é©­åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œåˆèƒ½åœ¨åº•å±‚ç†è§£æ¯ä¸ªæŒ‡ä»¤ã€æ¯ä¸ªå­—èŠ‚çš„ä»£ä»·ã€‚è¿™ç§å…¨æ ˆçš„æ·±åº¦ç†è§£ï¼Œè®©ä½ åœ¨æŠ€æœ¯é¢†åŸŸä¸­ç«‹äºä¸è´¥ä¹‹åœ°ã€‚</p>
<p>æ‰€ä»¥ï¼Œä¸è¦å†æŠŠæ±‡ç¼–çœ‹ä½œå¤è€çš„é—è¿¹ï¼Œè€Œåº”æŠŠå®ƒå½“ä½œ<strong>æ‰“å¼€è®¡ç®—æœºç³»ç»ŸçœŸç›¸çš„é’¥åŒ™</strong>ã€‚æŒæ¡è¿™æŠŠé’¥åŒ™ï¼Œä½ å°†åœ¨æŠ€æœ¯çš„é“è·¯ä¸Šèµ°å¾—æ›´è¿œã€æ›´ç¨³ã€æ›´è‡ªä¿¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šéƒ¨ç½² DevStack åå¦‚ä½•è®¿é—® Horizon Dashboardï¼Ÿ]]></title>    <link>https://juejin.cn/post/7575182522411450406</link>    <guid>https://juejin.cn/post/7575182522411450406</guid>    <pubDate>2025-11-23T11:11:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575182522411450406" data-draft-id="7575367791272886310" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šéƒ¨ç½² DevStack åå¦‚ä½•è®¿é—® Horizon Dashboardï¼Ÿ"/> <meta itemprop="keywords" content="OpenStack"/> <meta itemprop="datePublished" content="2025-11-23T11:11:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆé‡Œè°¢é¡¿"/> <meta itemprop="url" content="https://juejin.cn/user/3678304397695056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šéƒ¨ç½² DevStack åå¦‚ä½•è®¿é—® Horizon Dashboardï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3678304397695056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆé‡Œè°¢é¡¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T11:11:31.000Z" title="Sun Nov 23 2025 11:11:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>ç¯å¢ƒ</strong>ï¼šUbuntu 22.04 + KVM/libvirt + DevStack (2024.2)<br/>
<strong>é€‚ç”¨åœºæ™¯</strong>ï¼šé€šè¿‡ SSH è¿œç¨‹ç™»å½•åˆ°ä¸€å°ç‰©ç†æœºï¼Œåœ¨å…¶ä¸Šç”¨ KVM å¯åŠ¨äº† Ubuntu è™šæ‹Ÿæœºï¼Œå¹¶æˆåŠŸå®‰è£…äº† OpenStack DevStackï¼Œä½†æ— æ³•ä»æœ¬åœ°æµè§ˆå™¨è®¿é—® Web æ§åˆ¶å°ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ğŸ§© åœºæ™¯æè¿°</h2>
<p>æˆ‘çš„ç½‘ç»œæ‹“æ‰‘å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-attr">[æœ¬åœ°ç”µè„‘]</span>
        â”‚
        â””â”€â”€ <span class="hljs-selector-tag">SSH</span> â†’ <span class="hljs-selector-attr">[è·³æ¿æœº/ç‰©ç†ä¸»æœº: 192.168.18.133]</span>
                      â”‚
                      â””â”€â”€ <span class="hljs-selector-tag">KVM</span> è™šæ‹Ÿæœº (libvirt NAT ç½‘ç»œ)
                              â”‚
                              â””â”€â”€ <span class="hljs-selector-tag">IP</span>: <span class="hljs-number">192.168</span><span class="hljs-selector-class">.122</span><span class="hljs-selector-class">.30</span>
                                      â””â”€â”€ <span class="hljs-selector-tag">DevStack</span> å·²æˆåŠŸå®‰è£…
                                          <span class="hljs-selector-tag">Horizon</span> åœ°å€: <span class="hljs-selector-tag">http</span>:<span class="hljs-comment">//192.168.122.30/dashboard</span>
</code></pre>
<p>é—®é¢˜æ¥äº†ï¼š<strong>åœ¨æœ¬åœ°ç”µè„‘çš„æµè§ˆå™¨ä¸­è¾“å…¥ <code>http://192.168.122.30/dashboard</code>ï¼Œé¡µé¢æ— æ³•æ‰“å¼€</strong>ã€‚</p>
<p>åŸå› å¾ˆç®€å•ï¼š<code>192.168.122.30</code> æ˜¯ libvirt åˆ›å»ºçš„ <strong>NAT è™šæ‹Ÿç½‘ç»œ</strong>ï¼Œåªæœ‰å®¿ä¸»æœºï¼ˆ192.168.18.133ï¼‰èƒ½è®¿é—®å®ƒï¼Œè€Œæœ¬åœ°ç”µè„‘æ ¹æœ¬â€œçœ‹ä¸è§â€è¿™ä¸ª IPã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ” æ ¸å¿ƒæ€è·¯ï¼šSSH ç«¯å£è½¬å‘ï¼ˆéš§é“ï¼‰</h2>
<p>æˆ‘ä»¬è¦åšçš„ï¼Œæ˜¯å»ºç«‹ä¸€æ¡å®‰å…¨éš§é“ï¼š</p>
<blockquote>
<p><strong>æœ¬åœ°ç”µè„‘ â†’ è·³æ¿æœºï¼ˆ192.168.18.133ï¼‰â†’ è™šæ‹Ÿæœºï¼ˆ192.168.122.30:80ï¼‰</strong></p>
</blockquote>
<p>æœ€ç»ˆæ•ˆæœï¼šåœ¨æœ¬åœ°è®¿é—® <code>http://localhost:8080/dashboard</code>ï¼Œæµé‡è‡ªåŠ¨ç©¿é€ä¸¤å±‚ç½‘ç»œåˆ°è¾¾ DevStack çš„ Horizonã€‚</p>
<hr/>
<h2 data-id="heading-2">âœ… æ¨èæ–¹æ¡ˆï¼šä½¿ç”¨ SSH ProxyJumpï¼ˆOpenSSH 7.3+ï¼‰</h2>
<p>ç°ä»£ OpenSSH æ”¯æŒ <code>-J</code> å‚æ•°ï¼ˆå³ <code>ProxyJump</code>ï¼‰ï¼Œå¯ä¸€é”®å®Œæˆè·³è½¬å’Œç«¯å£è½¬å‘ã€‚</p>
<h3 data-id="heading-3">æ­¥éª¤ 1ï¼šåœ¨æœ¬åœ°ç”µè„‘æ‰§è¡Œ</h3>
<pre><code class="hljs language-ruby" lang="ruby">ssh -L <span class="hljs-number">8080</span><span class="hljs-symbol">:localhost</span><span class="hljs-symbol">:</span><span class="hljs-number">80</span> -J hanwang<span class="hljs-variable">@192</span>.<span class="hljs-number">168.18</span>.<span class="hljs-number">133</span> stack<span class="hljs-variable">@192</span>.<span class="hljs-number">168.122</span>.<span class="hljs-number">30</span>
</code></pre>
<p>å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li><code>-L 8080:localhost:80</code>ï¼šå°†æœ¬åœ° 8080 ç«¯å£æ˜ å°„åˆ°ç›®æ ‡ä¸»æœºçš„ 80 ç«¯å£</li>
<li><code>-J hanwang@192.168.18.133</code>ï¼šå…ˆé€šè¿‡è·³æ¿æœºè¿æ¥</li>
<li><code>stack@192.168.122.30</code>ï¼šæœ€ç»ˆç›®æ ‡è™šæ‹Ÿæœº</li>
</ul>
<blockquote>
<p>ğŸ’¡ æç¤ºï¼šç¡®ä¿ä½ å·²å°†å…¬é’¥éƒ¨ç½²åˆ°è·³æ¿æœºå’Œ VMï¼Œé¿å…é‡å¤è¾“å¯†ç ã€‚</p>
</blockquote>
<h3 data-id="heading-4">æ­¥éª¤ 2ï¼šä¿æŒ SSH ä¼šè¯è¿è¡Œ</h3>
<p>ä¸è¦å…³é—­ç»ˆç«¯ï¼åªè¦è¿™ä¸ª SSH è¿æ¥å­˜åœ¨ï¼Œéš§é“å°±æœ‰æ•ˆã€‚</p>
<h3 data-id="heading-5">æ­¥éª¤ 3ï¼šåœ¨æœ¬åœ°æµè§ˆå™¨è®¿é—®</h3>
<p>æ‰“å¼€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">http://localhost:8080/dashboard
</code></pre>
<p>ä½¿ç”¨é»˜è®¤è´¦å·ç™»å½•ï¼š</p>
<ul>
<li>ç”¨æˆ·åï¼š<code>admin</code> æˆ– <code>demo</code></li>
<li>å¯†ç ï¼š<code>secret</code></li>
</ul>
<p>âœ… æˆåŠŸè¿›å…¥ OpenStack Horizonï¼</p>
<hr/>
<h2 data-id="heading-6">ğŸ› ï¸ å¤‡é€‰æ–¹æ¡ˆï¼šåˆ†æ­¥æ‰‹åŠ¨è½¬å‘ï¼ˆå…¼å®¹æ—§ç‰ˆ SSHï¼‰</h2>
<p>å¦‚æœä½ çš„æœ¬åœ° SSH ç‰ˆæœ¬è¾ƒè€ï¼ˆ&lt;7.3ï¼‰ï¼Œä¸æ”¯æŒ <code>-J</code>ï¼Œå¯ä»¥ç”¨ä¸¤æ­¥æ³•ï¼š</p>
<h3 data-id="heading-7">åœ¨æœ¬åœ°ç”µè„‘æ‰§è¡Œï¼š</h3>
<pre><code class="hljs language-kotlin" lang="kotlin">ssh -L <span class="hljs-number">8080</span>:<span class="hljs-number">192.168</span><span class="hljs-number">.122</span><span class="hljs-number">.30</span>:<span class="hljs-number">80</span> <span class="hljs-symbol">hanwang@</span><span class="hljs-number">192.168</span><span class="hljs-number">.18</span><span class="hljs-number">.133</span>
</code></pre>
<p>è¿™æ¡å‘½ä»¤çš„æ„æ€æ˜¯ï¼š</p>
<blockquote>
<p>â€œåœ¨æˆ‘æœ¬åœ°å¼€ä¸€ä¸ª 8080 ç«¯å£ï¼Œæ‰€æœ‰æµé‡é€šè¿‡ 192.168.18.133 è½¬å‘åˆ° 192.168.122.30:80â€</p>
</blockquote>
<p>ç„¶ååŒæ ·è®¿é—® <code>http://localhost:8080/dashboard</code> å³å¯ã€‚</p>
<hr/>
<h2 data-id="heading-8">ğŸ“ é•¿æœŸä½¿ç”¨å»ºè®®ï¼šé…ç½® SSH config</h2>
<p>åœ¨ä½ æœ¬åœ°ç”µè„‘çš„ <code>~/.ssh/config</code> ä¸­æ·»åŠ ï¼š</p>
<pre><code class="hljs language-css" lang="css">Host devstack-vm
  HostName <span class="hljs-number">192.168</span>.<span class="hljs-number">122.30</span>
  User stack
  ProxyJump hanwang<span class="hljs-keyword">@192</span>.168.18.133
  LocalForward <span class="hljs-number">8080</span> <span class="hljs-attribute">localhost</span>:<span class="hljs-number">80</span>
</code></pre>
<p>ä¹‹ååªéœ€è¿è¡Œï¼š</p>
<pre><code class="hljs">ssh devstack-vm
</code></pre>
<p>å³å¯è‡ªåŠ¨å»ºç«‹éš§é“ï¼Œç®€æ´é«˜æ•ˆï¼</p>
<hr/>
<h2 data-id="heading-9">â“ å¸¸è§é—®é¢˜æ’æŸ¥</h2>
<h3 data-id="heading-10">Q1ï¼šè®¿é—® localhost:8080 æ˜¾ç¤ºç©ºç™½æˆ–è¿æ¥æ‹’ç»ï¼Ÿ</h3>
<ul>
<li>æ£€æŸ¥ SSH éš§é“æ˜¯å¦ä»åœ¨è¿è¡Œ</li>
<li>åœ¨ VM ä¸­ç¡®è®¤æœåŠ¡æ­£å¸¸ï¼š<code>curl -I http://localhost/dashboard</code></li>
<li>ç¡®ä¿ DevStack å®‰è£…æˆåŠŸï¼ˆæ— æŠ¥é”™é€€å‡ºï¼‰</li>
</ul>
<h3 data-id="heading-11">Q2ï¼šèƒ½å¦è®©å…¶ä»–äººä¹Ÿè®¿é—®ï¼Ÿ</h3>
<p>å¯ä»¥ï¼Œä½†éœ€è°¨æ…ã€‚ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">ssh -o <span class="hljs-attr">GatewayPorts</span>=<span class="hljs-literal">yes</span> -L <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">8080</span>:localhost:<span class="hljs-number">80</span> -J ... 
</code></pre>
<p>ç„¶ååˆ«äººå¯é€šè¿‡ <code>http://192.168.18.133:8080/dashboard</code> è®¿é—®ã€‚<br/>
âš ï¸ æ³¨æ„ï¼šè¿™ä¼šæš´éœ² OpenStack åˆ°å±€åŸŸç½‘ï¼Œè¯·ç¡®ä¿ç½‘ç»œå®‰å…¨ï¼</p>
<h3 data-id="heading-12">Q3ï¼šä¸ºä»€ä¹ˆä¸ç”¨ç›´æ¥æ¡¥æ¥ç½‘ç»œï¼Ÿ</h3>
<p>æ¡¥æ¥ç¡®å®èƒ½è®© VM è·å¾—å±€åŸŸç½‘ IPï¼Œä½†é…ç½®å¤æ‚ï¼Œä¸”å¯èƒ½å½±å“ç”Ÿäº§ç½‘ç»œã€‚å¯¹äºå¼€å‘æµ‹è¯•ï¼ŒSSH éš§é“æ›´å®‰å…¨ã€è½»é‡ã€æ— éœ€æ”¹ç½‘ç»œã€‚</p>
<hr/>
<h2 data-id="heading-13">ğŸ‰ æ€»ç»“</h2>





















<table><thead><tr><th>é—®é¢˜</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>æ— æ³•è®¿é—® NAT ç½‘ç»œä¸­çš„ DevStack Dashboard</td><td>ä½¿ç”¨ SSH ç«¯å£è½¬å‘</td></tr><tr><td>éœ€è¦ç»è¿‡è·³æ¿æœº</td><td>ä½¿ç”¨ <code>-J</code> æˆ– <code>ProxyJump</code></td></tr><tr><td>æƒ³é•¿æœŸä½¿ç”¨</td><td>é…ç½® <code>~/.ssh/config</code></td></tr></tbody></table>
<p>é€šè¿‡ä¸€æ¡ç®€å•çš„ SSH å‘½ä»¤ï¼Œæˆ‘ä»¬è½»æ¾æ‰“é€šäº†ä¸‰å±‚ç½‘ç»œï¼Œå®‰å…¨åœ°è®¿é—®åˆ°äº† OpenStack æ§åˆ¶å°ã€‚è¿™ä¹Ÿæ˜¯äº‘åŸç”Ÿæ—¶ä»£å¼€å‘è€…å¿…å¤‡çš„ç½‘ç»œè°ƒè¯•æŠ€èƒ½ä¹‹ä¸€ã€‚</p>
<hr/>
<blockquote>
<p><strong>é™„ï¼šDevStack é»˜è®¤å‡­è¯</strong></p>
<ul>
<li>URL: <code>http://localhost:8080/dashboard</code></li>
<li>Admin ç”¨æˆ·: <code>admin / secret</code></li>
<li>Demo ç”¨æˆ·: <code>demo / secret</code></li>
</ul>
</blockquote>
<p>Happy Hacking with OpenStack! â˜ï¸</p>
<hr/>
<p><strong>æ ‡ç­¾</strong>ï¼š#OpenStack #DevStack #KVM #SSHéš§é“ #Horizon #äº‘è®¡ç®— #Linuxè¿ç»´</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AIæ—¶ä»£ï¼Œæ±‡ç¼–è¯­è¨€è¿˜æœ‰å¿…è¦å­¦å—ï¼Ÿæˆ‘çš„æƒ¨ç—›æ•™è®­ä¸æ€è€ƒ]]></title>    <link>https://juejin.cn/post/7575162322240290816</link>    <guid>https://juejin.cn/post/7575162322240290816</guid>    <pubDate>2025-11-23T11:12:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575162322240290816" data-draft-id="7575112613778178082" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AIæ—¶ä»£ï¼Œæ±‡ç¼–è¯­è¨€è¿˜æœ‰å¿…è¦å­¦å—ï¼Ÿæˆ‘çš„æƒ¨ç—›æ•™è®­ä¸æ€è€ƒ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-23T11:12:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AIæ—¶ä»£ï¼Œæ±‡ç¼–è¯­è¨€è¿˜æœ‰å¿…è¦å­¦å—ï¼Ÿæˆ‘çš„æƒ¨ç—›æ•™è®­ä¸æ€è€ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T11:12:03.000Z" title="Sun Nov 23 2025 11:12:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å½“AIå¯ä»¥è‡ªåŠ¨ç”Ÿæˆä»£ç ã€ä¼˜åŒ–æ€§èƒ½ç”šè‡³è°ƒè¯•ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬æ˜¯å¦è¿˜éœ€è¦äº†è§£é‚£äº›æ™¦æ¶©éš¾æ‡‚çš„æ±‡ç¼–æŒ‡ä»¤ï¼Ÿè®©æˆ‘ç”¨äº²èº«ç»å†å‘Šè¯‰ä½ ç­”æ¡ˆã€‚</p>
</blockquote>
<p>ä¸Šå‘¨ï¼Œæˆ‘è´Ÿè´£çš„æ ¸å¿ƒæœåŠ¡çªç„¶å‡ºç°è¯¡å¼‚å´©æºƒâ€”â€”åœ¨æ¯ç§’å¤„ç†æ•°åä¸‡è¯·æ±‚çš„é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼ŒæœåŠ¡ä¼šéšæœºå´©æºƒï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•æ˜ç¡®çš„é”™è¯¯æ—¥å¿—ã€‚å›¢é˜ŸèŠ±äº†ä¸‰å¤©æ—¶é—´æ¯«æ— å¤´ç»ªï¼Œç›´åˆ°æˆ‘è¿«ä¸å¾—å·²æ‰“å¼€äº†GDBï¼Œåœ¨æ±‡ç¼–å±‚é¢è¿½è¸ªé‚£ä¸ªè¯¥æ­»çš„bugã€‚</p>
<p>æœ€ç»ˆå‘ç°ï¼Œé—®é¢˜å‡ºåœ¨ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“åœ¨ç‰¹å®šCPUæ¶æ„ä¸‹çš„å†…å­˜å¯¹é½é—®é¢˜ã€‚è¿™ä¸ªç»å†è®©æˆ‘é‡æ–°æ€è€ƒï¼šåœ¨AIå¯ä»¥ç¼–å†™ä»£ç çš„ä»Šå¤©ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä»ç„¶éœ€è¦ç†è§£è®¡ç®—æœºæœ€åº•å±‚çš„è¯­è¨€ï¼Ÿ</p>
<h2 data-id="heading-0">ä¸€æ¬¡è®©æˆ‘"åˆ»éª¨é“­å¿ƒ"çš„è°ƒè¯•ç»å†</h2>
<p>é‚£æ˜¯æˆ‘èŒä¸šç”Ÿæ¶¯æ—©æœŸå‚ä¸çš„ä¸€ä¸ªé‡‘èäº¤æ˜“ç³»ç»Ÿé¡¹ç›®ã€‚ç³»ç»Ÿåœ¨æµ‹è¯•ç¯å¢ƒå®Œç¾è¿è¡Œï¼Œä½†åœ¨å®¢æˆ·çš„ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ¯éš”å‡ å¤©å°±ä¼šç¥ç§˜å´©æºƒã€‚æˆ‘ä»¬æ£€æŸ¥äº†æ‰€æœ‰å¯èƒ½çš„åœ°æ–¹ï¼šå†…å­˜æ³„æ¼ã€çº¿ç¨‹å®‰å…¨ã€ç½‘ç»œè¶…æ—¶â€¦â€¦ä¸€æ— æ‰€è·ã€‚</p>
<p>åœ¨è¿ç»­åŠ ç­ä¸¤å‘¨åï¼Œæˆ‘çš„å¯¼å¸ˆå»ºè®®ï¼š"æˆ‘ä»¬çœ‹çœ‹æ±‡ç¼–å§ã€‚"</p>
<p>å½“æ—¶æˆ‘å¿ƒé‡Œå˜€å’•ï¼š"è¿™éƒ½ä»€ä¹ˆå¹´ä»£äº†ï¼Œè¿˜è¦çœ‹æ±‡ç¼–ï¼Ÿ"</p>
<p>ä½†å½“æˆ‘ä»¬é€šè¿‡GDBåæ±‡ç¼–æ ¸å¿ƒè½¬å‚¨æ–‡ä»¶æ—¶ï¼ŒçœŸç›¸å¤§ç™½ï¼šä¸€ä¸ªå†…è”å‡½æ•°åœ¨ç‰¹å®šç¼–è¯‘å™¨ä¼˜åŒ–çº§åˆ«ä¸‹ï¼Œäº§ç”Ÿäº†é”™è¯¯çš„å¯„å­˜å™¨ä½¿ç”¨ï¼Œå¯¼è‡´å¶å°”ä¼šè¦†ç›–è¿”å›åœ°å€ã€‚</p>
<p>é‚£ä¸€åˆ»æˆ‘æç„¶å¤§æ‚Ÿâ€”â€”æ²¡æœ‰æ±‡ç¼–çŸ¥è¯†ï¼Œæˆ‘ä»¬å°±åƒåœ¨é»‘æš—ä¸­æ‘¸ç´¢ã€‚è€ŒAIåŠ©æ‰‹ï¼Œå°½ç®¡èƒ½å†™å‡ºä¼˜é›…çš„ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œå´æ— æ³•æ›¿ä»£è¿™ç§åº•å±‚çš„è°ƒè¯•èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆåœ¨AIæ—¶ä»£ï¼Œæ±‡ç¼–åè€Œæ›´çè´µï¼Ÿ</h2>
<p><strong>ç†è§£AIæ— æ³•æ•™ç»™ä½ çš„ç›´è§‰</strong></p>
<p>AIå¯ä»¥ç”Ÿæˆé«˜æ•ˆçš„ä»£ç ï¼Œç”šè‡³å¯ä»¥è§£é‡Šä»£ç çš„åŠŸèƒ½ã€‚ä½†å®ƒæ— æ³•ç»™ä½ é‚£ç§å¯¹è®¡ç®—æœºå·¥ä½œåŸç†çš„"ç›´è§‰ç†è§£"ã€‚å½“ä½ é€šè¿‡æ±‡ç¼–ç†è§£äº†å‡½æ•°è°ƒç”¨æ ˆã€å†…å­˜ç®¡ç†å’ŒæŒ‡ä»¤æµæ°´çº¿ï¼Œä½ ä¼šè·å¾—ä¸€ç§éš¾ä»¥è¨€ä¼ çš„æ´å¯ŸåŠ›ã€‚</p>
<p>å°±åƒå­¦ä¹ éŸ³ä¹ç†è®ºâ€”â€”AIå¯ä»¥ç”Ÿæˆæ‚¦è€³çš„æ—‹å¾‹ï¼Œä½†ç†è§£ä¹ç†çš„éŸ³ä¹å®¶æ‰çŸ¥é“ä¸ºä»€ä¹ˆè¿™äº›éŸ³ç¬¦å¦‚æ­¤ç»„åˆï¼Œä»¥åŠå¦‚ä½•åˆ›é€ æ–°çš„å¯èƒ½æ€§ã€‚</p>
<p><strong>æ€§èƒ½ä¼˜åŒ–çš„"æœ€åæ­¦å™¨"</strong></p>
<p>ç°ä»£ç¼–è¯‘å™¨ç¡®å®å¼ºå¤§ï¼Œä½†åœ¨æç«¯æ€§èƒ½è¦æ±‚çš„åœºæ™¯ä¸‹ï¼ˆé«˜é¢‘äº¤æ˜“ã€æ¸¸æˆå¼•æ“ã€æ•°æ®åº“å†…æ ¸ï¼‰ï¼Œæ±‡ç¼–çŸ¥è¯†ä»ç„¶æ˜¯ç»ˆææ­¦å™¨ã€‚</p>
<p>æˆ‘æ›¾åœ¨ä¼˜åŒ–ä¸€ä¸ªå›¾åƒå¤„ç†ç®—æ³•æ—¶ï¼Œå‘ç°ç¼–è¯‘å™¨ç”Ÿæˆçš„SSEæŒ‡ä»¤å¹¶éæœ€ä¼˜ã€‚æ‰‹åŠ¨è°ƒæ•´æ±‡ç¼–åï¼Œæ€§èƒ½æå‡äº†3å€â€”â€”è¿™åœ¨å®æ—¶å¤„ç†åœºæ™¯ä¸­æ˜¯å†³å®šæ€§çš„ä¼˜åŠ¿ã€‚</p>
<p><strong>å®‰å…¨é¢†åŸŸçš„å¿…å¤‡æŠ€èƒ½</strong></p>
<p>åœ¨ç½‘ç»œå®‰å…¨é¢†åŸŸï¼Œç†è§£æ±‡ç¼–æ˜¯åˆ†ææ¼æ´ã€é€†å‘å·¥ç¨‹çš„åŸºç¡€ã€‚æ— è®ºAIå¤šä¹ˆå¼ºå¤§ï¼Œç†è§£æ¶æ„ä»£ç å¦‚ä½•åœ¨åº•å±‚æ‰§è¡Œçš„èƒ½åŠ›ï¼Œåœ¨å¯é¢„è§çš„æœªæ¥éƒ½æ— æ³•è¢«æ›¿ä»£ã€‚</p>
<h2 data-id="heading-2">æˆ‘çš„æ±‡ç¼–å­¦ä¹ å»ºè®®</h2>
<p>å¦‚æœä½ å†³å®šå­¦ä¹ æ±‡ç¼–ï¼Œæˆ‘æ¨èè¿™æ ·çš„è·¯å¾„ï¼š</p>
<ol>
<li>
<p><strong>ä»ç®€å•çš„å¼€å§‹</strong>ï¼šä¸è¦ä¸€ä¸Šæ¥å°±å°è¯•x86-64ï¼Œä»ç»å…¸çš„ARMæˆ–RISC-Væ¶æ„å¼€å§‹ä¼šæ›´å‹å¥½</p>
</li>
<li>
<p><strong>ç†è®ºä¸å®è·µç»“åˆ</strong>ï¼šä½¿ç”¨åœ¨çº¿æ¨¡æ‹Ÿå™¨å®é™…ç¼–å†™å’Œè¿è¡Œä»£ç ï¼Œè§‚å¯Ÿæ¯æ¡æŒ‡ä»¤çš„æ•ˆæœ</p>
</li>
<li>
<p><strong>ä¸é«˜çº§è¯­è¨€å¯¹ç…§</strong>ï¼šå†™ä¸€æ®µç®€å•çš„Cä»£ç ï¼ŒæŸ¥çœ‹ç”Ÿæˆçš„æ±‡ç¼–ï¼Œç†è§£ä¸¤è€…çš„å¯¹åº”å…³ç³»</p>
</li>
<li>
<p><strong>å…³æ³¨æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼šé™¤éä½ è¦åšä¸“é—¨çš„åº•å±‚å¼€å‘ï¼Œå¦åˆ™é‡ç‚¹æ˜¯ç†è§£åŸç†è€Œéè®°å¿†æŒ‡ä»¤</p>
</li>
</ol>
<h2 data-id="heading-3">é‡æ–°æ€è€ƒé—®é¢˜çš„ç­”æ¡ˆ</h2>
<p>å›åˆ°æˆ‘ä»¬çš„æ ¸å¿ƒé—®é¢˜ï¼šAIæ—¶ä»£è¿˜æœ‰å¿…è¦å­¦æ±‡ç¼–å—ï¼Ÿ</p>
<p>æˆ‘çš„ç­”æ¡ˆæ˜¯ï¼š<strong>å­¦ä¹ æ±‡ç¼–çš„ç›®çš„å·²ç»æ”¹å˜ï¼Œä½†å…¶ä»·å€¼åè€Œæå‡äº†ã€‚</strong></p>
<p>æˆ‘ä»¬ä¸å†æ˜¯ä¸ºäº†æˆä¸ºæ±‡ç¼–ç¨‹åºå‘˜è€Œå­¦ä¹ å®ƒï¼Œè€Œæ˜¯ä¸ºäº†ï¼š</p>
<ul>
<li>åœ¨AIç”Ÿæˆçš„ä»£ç å‡ºç°è¯¡å¼‚é—®é¢˜æ—¶ï¼Œæœ‰èƒ½åŠ›æ·±å…¥åº•å±‚æ’æŸ¥</li>
<li>åœ¨æ€§èƒ½ä¼˜åŒ–é‡åˆ°ç“¶é¢ˆæ—¶ï¼Œèƒ½å¤Ÿè¿›è¡Œæœ€ç»ˆçš„è°ƒä¼˜</li>
<li>æ›´å¥½åœ°ç†è§£AIåŠ é€Ÿå™¨ï¼ˆGPU/TPUï¼‰çš„å·¥ä½œåŸç†</li>
<li>åœ¨ç³»ç»Ÿè®¾è®¡æ—¶åšå‡ºæ›´ç¬¦åˆç¡¬ä»¶ç‰¹æ€§çš„å†³ç­–</li>
</ul>
<p>åœ¨è¿™ä¸ªAIçœ‹ä¼¼èƒ½è§£å†³ä¸€åˆ‡é—®é¢˜çš„æ—¶ä»£ï¼ŒçœŸæ­£åŒºåˆ†ä¼˜ç§€å·¥ç¨‹å¸ˆçš„ï¼Œå¾€å¾€æ˜¯å¯¹è®¡ç®—æœ¬è´¨çš„æ·±åˆ»ç†è§£ã€‚æ±‡ç¼–è¯­è¨€æ­£æ˜¯é€šå¾€è¿™ç§ç†è§£çš„é‡è¦æ¡¥æ¢ã€‚</p>
<p>æ¯•ç«Ÿï¼Œå³ä½¿æœ‰äº†æœ€å…ˆè¿›çš„è‡ªåŠ¨é©¾é©¶æŠ€æœ¯ï¼Œç†è§£åŸºæœ¬çš„æœºæ¢°åŸç†ä»ç„¶èƒ½è®©å¸æœºåœ¨å…³é”®æ—¶åˆ»åŒ–é™©ä¸ºå¤·ã€‚æ±‡ç¼–è¯­è¨€ï¼Œå°±æ˜¯ç¨‹åºå‘˜çš„"æœºæ¢°åŸç†"ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å†æ¥èŠèŠï¼ŒVue3 é¡¹ç›®ä¸­ Pinia çš„æ›¿ä»£æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7575458028254674987</link>    <guid>https://juejin.cn/post/7575458028254674987</guid>    <pubDate>2025-11-23T11:23:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575458028254674987" data-draft-id="7575655132755394579" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å†æ¥èŠèŠï¼ŒVue3 é¡¹ç›®ä¸­ Pinia çš„æ›¿ä»£æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-11-23T11:23:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯å¸ƒé²ä¼Š"/> <meta itemprop="url" content="https://juejin.cn/user/4431511346492554"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å†æ¥èŠèŠï¼ŒVue3 é¡¹ç›®ä¸­ Pinia çš„æ›¿ä»£æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4431511346492554/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯å¸ƒé²ä¼Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T11:23:24.000Z" title="Sun Nov 23 2025 11:23:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><p><strong>æƒ³è·å–æ›´å¤š2025å¹´æœ€æ–°å‰ç«¯åœºæ™¯é¢˜å¯ä»¥çœ‹è¿™é‡Œ</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ffe.ecool.fun%2Ftopic-list%3Fic%3DKIQC2F%26from%3Djuejin_article" target="_blank" title="https://fe.ecool.fun/topic-list?ic=KIQC2F&amp;from=juejin_article" ref="nofollow noopener noreferrer">fe.ecool.fun</a></p>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯åˆ˜å¸ƒæ–¯ã€‚</p>
<p>ä¹‹å‰è½¬è½½äº†ä¸€ç¯‡æ–‡ç« <strong>Vue é¡¹ç›®ä¸è¦å†ç”¨ Pinia äº†</strong>ï¼Œå…ˆä¸å¯å¦è®¤ï¼Œè¿™æ–‡ç« æœ‰ç‚¹æ ‡é¢˜å…šçš„æ„æ€ã€‚ä½†è¿™ç¯‡æ–‡ç« çš„ä¸»è¦è§‚ç‚¹æ˜¯è¯´ï¼Œåœ¨ä¸­å°é¡¹ç›®é‡Œï¼Œç”¨ Vue 3 è‡ªå¸¦çš„ç»„åˆå¼ APIï¼ˆ<code>reactive</code>Â /Â <code>ref</code>ï¼‰æ¥ç®¡çŠ¶æ€ï¼Œå¾ˆå¤šæ—¶å€™æ¯”ç¡¬ä¸Š Pinia è¦é¦™ã€‚</p>
<p>å¥½å®¶ä¼™ï¼Œè¯„è®ºåŒºä¸€ä¸‹å°±çƒ­é—¹äº†ï¼Œæ€»ç»“èµ·æ¥æ˜¯ï¼šâ€œPinia å¤šå¥½ç”¨ï¼Œä½ è‚¯å®šæ˜¯æ²¡ç”¨æ˜ç™½ Piniaâ€</p>
<p>è¯´å®è¯ï¼Œæˆ‘ç¡®å®æœ‰ç‚¹æ„å¤–ã€‚</p>
<p><strong>æˆ‘å…ˆæ‘†æ˜æ€åº¦ï¼šPinia æ˜¯ä¸ªéå¸¸ä¼˜ç§€çš„çŠ¶æ€ç®¡ç†åº“ã€‚</strong>Â å°¤é›¨æºªå›¢é˜Ÿäº²è‡ªæ“åˆ€ï¼ŒAPI è®¾è®¡ç®€æ´ï¼ŒTS æ”¯æŒå®Œç¾ï¼Œæ’ä»¶ç³»ç»Ÿçµæ´»ï¼ŒDevtools ä½“éªŒä¸æ»‘ã€‚è¿™ä¸€ç‚¹ï¼Œæ²¡äººèƒ½å¦è®¤ã€‚</p>
<p>ä½†æˆ‘çš„æ ¸å¿ƒè§‚ç‚¹æ˜¯ï¼š<strong>ä¼˜ç§€ï¼Œä¸ä»£è¡¨â€œæ‰€æœ‰åœºæ™¯éƒ½å¿…é¡»ä¸Šâ€ã€‚</strong></p>
<p>æˆ‘å‘ç°ç°åœ¨å¾ˆå¤šå›¢é˜Ÿï¼Œå°¤å…¶æ˜¯ä» Vue 2 åˆšè¿åˆ° Vue 3 ä¸ä¹…çš„ï¼Œå­˜åœ¨ä¸€ç§å¾ˆå¼ºçš„Â <strong>â€œçŠ¶æ€ç®¡ç†æƒ¯æ€§â€</strong> ã€‚</p>
<p>ä»€ä¹ˆæ„æ€ï¼Ÿ</p>
<p>åœ¨ Vue 2 + Options API çš„æ—¶ä»£ï¼Œç»„ä»¶ï¼ˆComponentï¼‰å’ŒçŠ¶æ€ï¼ˆStateï¼‰æ˜¯â€œéš”ç¦»â€çš„ã€‚<code>data</code>Â é‡Œçš„çŠ¶æ€å¤©ç”Ÿå°±æ˜¯â€œå†…å‘â€çš„ï¼Œç»„ä»¶ä¸€é”€æ¯ï¼ŒçŠ¶æ€å°±æ²¡äº†ã€‚è·¨ç»„ä»¶é€šä¿¡ã€å…¨å±€çŠ¶æ€å…±äº«ï¼Œä½ æ€ä¹ˆåŠï¼Ÿä½ æ²¡å¾—é€‰ï¼Œä½ å¿…é¡»ä¸Š Vuexã€‚Vuex å°±åƒä¸€ä¸ªâ€œä¸­å¤®ç©ºè°ƒâ€ï¼Œä½ ä¸ç”¨å®ƒï¼Œåˆ«çš„æˆ¿é—´ï¼ˆç»„ä»¶ï¼‰å°±äº«å—ä¸åˆ°å†·æ°”ï¼ˆçŠ¶æ€ï¼‰ã€‚</p>
<p>æ‰€ä»¥ï¼ŒVue 2 æ—¶ä»£å…»æˆäº†æˆ‘ä»¬çš„æ€ç»´å®šå¼ï¼š<strong>åšé¡¹ç›® = Vue å…¨å®¶æ¡¶ = Vue + Vue Router + Vuexã€‚</strong></p>
<p>åˆ°äº† Vue 3ï¼ŒVuex é€€ä½ï¼ŒPinia ç»§ä»»ã€‚äºæ˜¯å¤§å®¶ç†æ‰€å½“ç„¶åœ°æŠŠå…¬å¼æ¢æˆäº†ï¼š<strong>åšé¡¹ç›® = Vue 3 + Vue Router + Piniaã€‚</strong></p>
<p>å¯åŠ¨ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œ<code>npm create vue@latest</code>ï¼Œä¸€è·¯Â <code>yes</code>Â ä¸‹æ¥ï¼ŒPinia å°±è£…å¥½äº†ã€‚ç„¶åå°±å¼€å§‹Â <code>defineStore</code>ã€‚</p>
<p>ä½†å¤§å®¶å¥½åƒéƒ½å¿½ç•¥äº† Vue 3 æœ€å¤§çš„é©å‘½æ€§å˜åŒ–â€”â€”<strong>ç»„åˆå¼ API (Composition API)</strong>Â æœ¬èº«ï¼Œå°±å·²ç»æ˜¯ä¸€ç§å¼ºå¤§çš„çŠ¶æ€ç®¡ç†æ¨¡å¼äº†ã€‚</p>
<h4 data-id="heading-0"><code>defineStore</code>Â å¸®æˆ‘ä»¬åšäº†ä»€ä¹ˆï¼Ÿ</h4>
<p>è¿˜æ˜¯ç”¨é‚£ç¯‡æ–‡ç« ä¸­çš„ä¾‹å­ï¼Œåšä¸€ä¸ªæœ€ç®€å•çš„â€œç”¨æˆ·çŠ¶æ€ç®¡ç†â€ï¼Œä¸¤ç§æ–¹å¼æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚</p>
<p><strong>1. Pinia çš„æ–¹å¼ï¼š</strong> ä½ å¾—å…ˆåœ¨Â <code>stores/user.ts</code>Â é‡Œï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span>Â { defineStore }Â <span class="hljs-keyword">from</span><span class="hljs-string">'pinia'</span>
<span class="hljs-keyword">import</span>Â { ref, computed }Â <span class="hljs-keyword">from</span><span class="hljs-string">'vue'</span>

exportconstÂ useUserStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'user'</span>,Â <span class="hljs-function">()Â =&gt;</span>Â {
<span class="hljs-comment">// State</span>
<span class="hljs-keyword">const</span>Â token = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)
<span class="hljs-keyword">const</span>Â userProfile = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)

<span class="hljs-comment">// Getters</span>
<span class="hljs-keyword">const</span>Â isLoggedIn = <span class="hljs-title function_">computed</span>(<span class="hljs-function">()Â =&gt;</span>Â !!token.<span class="hljs-property">value</span>)

<span class="hljs-comment">// Actions</span>
<span class="hljs-keyword">function</span>Â <span class="hljs-title function_">login</span>(<span class="hljs-params">data</span>)Â {
Â  Â  token.<span class="hljs-property">value</span> = data.<span class="hljs-property">token</span>
Â  Â  userProfile.<span class="hljs-property">value</span> = data.<span class="hljs-property">profile</span>
Â  Â Â <span class="hljs-comment">// ... å­˜ localstorage</span>
Â  }

<span class="hljs-keyword">function</span>Â <span class="hljs-title function_">logout</span>(<span class="hljs-params"/>)Â {
Â  Â  token.<span class="hljs-property">value</span> =Â <span class="hljs-literal">null</span>
Â  Â  userProfile.<span class="hljs-property">value</span> =Â <span class="hljs-literal">null</span>
Â  Â Â <span class="hljs-comment">// ... æ¸… localstorage</span>
Â  }

<span class="hljs-keyword">return</span>Â { token, userProfile, isLoggedIn, login, logout }
})
</code></pre>
<p>ç„¶ååœ¨ç»„ä»¶é‡ŒÂ <code>useUserStore()</code>ã€‚</p>
<p><strong>2. ç»„åˆå¼ API çš„æ–¹å¼ï¼š</strong> ä½ åœ¨Â <code>stores/user.ts</code>Â (å¯¹ï¼Œä½ ä¹Ÿå¯ä»¥å«Â <code>stores</code>Â ç›®å½•ï¼Œè¿™åªæ˜¯ä¸ªæ–‡ä»¶å¤¹)ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span>Â { ref, computed, reactive }Â <span class="hljs-keyword">from</span><span class="hljs-string">'vue'</span>

<span class="hljs-comment">// ä»¥å‰æˆ‘ä»¬ç”¨ reactiveï¼Œè¿™é‡Œç”¨ ref/computed æ¨¡æ‹Ÿ Pinia çš„ç»“æ„</span>
<span class="hljs-keyword">const</span>Â token = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)
<span class="hljs-keyword">const</span>Â userProfile = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)

<span class="hljs-keyword">const</span>Â isLoggedIn = <span class="hljs-title function_">computed</span>(<span class="hljs-function">()Â =&gt;</span>Â !!token.<span class="hljs-property">value</span>)

<span class="hljs-keyword">function</span>Â <span class="hljs-title function_">login</span>(<span class="hljs-params">data</span>)Â {
Â  token.<span class="hljs-property">value</span> = data.<span class="hljs-property">token</span>
Â  userProfile.<span class="hljs-property">value</span> = data.<span class="hljs-property">profile</span>
<span class="hljs-comment">// ... å­˜ localstorage</span>
}

<span class="hljs-keyword">function</span>Â <span class="hljs-title function_">logout</span>(<span class="hljs-params"/>)Â {
Â  token.<span class="hljs-property">value</span> =Â <span class="hljs-literal">null</span>
Â  userProfile.<span class="hljs-property">value</span> =Â <span class="hljs-literal">null</span>
<span class="hljs-comment">// ... æ¸… localstorage</span>
}

<span class="hljs-comment">// å¯¼å‡ºä¸€ä¸ª hook</span>
<span class="hljs-keyword">export</span><span class="hljs-keyword">function</span>Â <span class="hljs-title function_">useUser</span>(<span class="hljs-params"/>)Â {
<span class="hljs-keyword">return</span>Â { token, userProfile, isLoggedIn, login, logout }
}
</code></pre>
<p>ç„¶ååœ¨ç»„ä»¶é‡ŒÂ <code>useUser()</code>ã€‚</p>
<hr/>
<p>å¥½äº†ï¼Œä½ å¯¹æ¯”ä¸‹è¿™ä¸¤æ®µä»£ç ã€‚</p>
<p><strong>ä½ å‘ç°äº†ä»€ä¹ˆï¼Ÿ</strong></p>
<p>åœ¨ç¬¬äºŒç§æ–¹å¼é‡Œï¼Œæˆ‘åªæ˜¯åˆ æ‰äº†Â <code>defineStore('user', ...)</code>Â é‚£å±‚â€œå£³â€ï¼Œç„¶åæŠŠå¯¼å‡ºçš„Â <code>useUserStore</code>Â æ”¹æˆäº†Â <code>useUser</code>Â (å«ä»€ä¹ˆéƒ½è¡Œ)ã€‚</p>
<p><strong>å…¶ä»–çš„é€»è¾‘ï¼Œä¸€æ¨¡ä¸€æ ·ï¼</strong>Â éƒ½æ˜¯åœ¨ç”¨Â <code>ref</code>Â å’ŒÂ <code>computed</code>ã€‚</p>
<p>Pinia çš„Â <code>defineStore</code>Â åœ¨è¿™ä¸ªåœºæ™¯é‡Œï¼Œæœ¬è´¨ä¸Šå°±æ˜¯å¸®ä½ åšäº†ä¸€ä»¶äº‹ï¼š<strong>åˆ›å»ºäº†ä¸€ä¸ªè·¨ç»„ä»¶å…±äº«çš„ã€å“åº”å¼çš„å•ä¾‹ã€‚</strong></p>
<p>ä½†åœ¨ Vue 3 é‡Œï¼Œ<code>import</code>Â ä¸€ä¸ªåœ¨æ¨¡å—é¡¶å±‚ï¼ˆmodule scopeï¼‰å®šä¹‰çš„Â <code>ref</code>Â æˆ–Â <code>reactive</code>Â å¯¹è±¡ï¼Œå®ƒ<strong>å¤©ç”Ÿå°±æ˜¯å•ä¾‹</strong>ï¼å®ƒå¤©ç”Ÿå°±æ˜¯è·¨ç»„ä»¶å…±äº«çš„ï¼</p>
<p>é‚£ä½ å¯èƒ½ä¼šåé—®äº†ï¼šâ€œé‚£ Pinia å²‚ä¸æ˜¯å¤šæ­¤ä¸€ä¸¾ï¼Ÿâ€</p>
<p>ä¸ï¼Œå®ƒå½“ç„¶ä¸æ˜¯å¤šæ­¤ä¸€ä¸¾ã€‚å®ƒæä¾›äº†Â <code>defineStore</code>Â è¿™ä¸ªâ€œå£³â€ï¼Œæ˜¯ä¸ºäº†ç»™ä½ å¸¦æ¥é¢å¤–çš„å¥½å¤„ï¼Œæœ€æ ¸å¿ƒçš„å°±æ˜¯ï¼š</p>
<ol>
<li><strong>Devtools é›†æˆ</strong>ï¼šè¿™æ˜¯ Pinia æœ€å¤§çš„æ€æ‰‹é”ã€‚ä½ å¯ä»¥åœ¨æ—¶é—´è½´ä¸Šçœ‹åˆ°Â <code>action</code>Â çš„è°ƒç”¨ã€<code>state</code>Â çš„å˜æ›´ã€‚</li>
<li><strong>æ’ä»¶ç³»ç»Ÿ</strong>ï¼šæ¯”å¦‚å®ç°æ•°æ®æŒä¹…åŒ–ï¼ŒPinia æœ‰ç°æˆçš„æ’ä»¶ï¼Œ<code>defineStore</code>Â çš„æ—¶å€™é…ç½®ä¸€ä¸‹å°±è¡Œã€‚</li>
<li><strong>SSR æ”¯æŒ</strong>ï¼šåœ¨æœåŠ¡ç«¯æ¸²æŸ“æ—¶ï¼ŒPinia èƒ½å¸®ä½ å¤„ç†å¥½çŠ¶æ€çš„åºåˆ—åŒ–å’Œâ€œæ³¨æ°´â€(hydration)ã€‚</li>
<li><strong>æ›´ä¸¥æ ¼çš„â€œå¿ƒæ™ºæ¨¡å‹â€</strong> ï¼šå®ƒå¼ºåˆ¶ä½ åŒºåˆ†Â <code>state</code>ã€<code>getters</code>ã€<code>actions</code>ï¼Œè®©å›¢é˜Ÿåä½œæ›´è§„èŒƒã€‚</li>
</ol>
<h4 data-id="heading-1">Piniaçš„ä¼˜åŠ¿ï¼Œä½ çš„é¡¹ç›®çœŸçš„éœ€è¦å—ï¼Ÿ</h4>
<p>æˆ‘ä»¬å†å›åˆ°ä¸Šç¯‡æ–‡ç« çš„æ ¸å¿ƒè§‚ç‚¹ï¼š</p>
<p><strong>åœ¨ä¸€ä¸ªä¸­å°å‹é¡¹ç›®ã€ç‹¬ç«‹å¼€å‘ã€æˆ–è€…å›¢é˜Ÿæˆå‘˜å¯¹ç»„åˆå¼ API éƒ½å¾ˆç†Ÿç»ƒçš„åœºæ™¯ä¸‹ï¼Œä¸Šé¢ Pinia æä¾›çš„ 4 ä¸ªå¥½å¤„ï¼Œä½ çœŸçš„éƒ½éœ€è¦å—ï¼Ÿ</strong></p>
<ul>
<li><strong>Devtools</strong>ï¼šè¯´å®è¯ï¼Œåœ¨æˆ‘åå¤šå¹´çš„ç”Ÿæ¶¯é‡Œï¼Œé™¤äº†åœ¨ Redux/Vuex åˆšå‡ºæ¥é‚£ä¼šå„¿ï¼Œä¸ºäº†è°ƒè¯•å¤æ‚çš„å¼‚æ­¥æµå’Œä¸­é—´ä»¶ï¼Œä¼šå»ç”¨æ—¶é—´æ—…è¡Œã€‚åœ¨ç»å¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯é‡Œï¼Œ<code>console.log</code>Â å’Œ Vue Devtools é‡Œè‡ªå¸¦çš„ç»„ä»¶çŠ¶æ€æ£€æŸ¥ï¼Œå·²ç»è§£å†³äº† 99% çš„é—®é¢˜ã€‚ä¸ºäº†é‚£ 1% çš„â€œå¯èƒ½â€ï¼Œå»å¼•å…¥ä¸€ä¸ªåº“ï¼Œåˆ’ç®—å—ï¼Ÿ</li>
<li><strong>æ’ä»¶ç³»ç»Ÿï¼ˆå¦‚æŒä¹…åŒ–ï¼‰</strong> ï¼šç”¨ç»„åˆå¼ API æ€ä¹ˆåšæŒä¹…åŒ–ï¼Ÿå¤ªç®€å•äº†ã€‚ä½ å°è£…çš„Â <code>useUser</code>Â hook é‡Œé¢ï¼Œ<code>login</code>Â çš„æ—¶å€™åŠ ä¸€è¡ŒÂ <code>localStorage.setItem</code>ï¼Œåˆå§‹åŒ–Â <code>token</code>Â çš„æ—¶å€™åŠ ä¸€è¡ŒÂ <code>localStorage.getItem</code>ã€‚è¿™ä¸å°±æ˜¯æœ€åŸå§‹ã€æœ€å¯æ§çš„æŒä¹…åŒ–å—ï¼Ÿä½ éœ€è¦ä¸ºè¿™ä¹ˆç‚¹åŠŸèƒ½ï¼Œå»å­¦ä¸€ä¸ª Pinia æ’ä»¶çš„ API å—ï¼Ÿ</li>
<li><strong>SSR</strong>ï¼šå¦‚æœä½ çš„é¡¹ç›®å‹æ ¹å°±ä¸æ˜¯ SSRï¼Œé‚£è¿™æ¡å¯¹ä½ æ— æ•ˆã€‚</li>
<li><strong>ä¸¥æ ¼çš„å¿ƒæ™ºæ¨¡å‹</strong>ï¼šè¿™æ˜¯æœ€å¤§çš„â€œé™·é˜±â€ã€‚ç»„åˆå¼ API çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯â€œè‡ªç”±â€ã€‚å®ƒå…è®¸ä½ æŠŠÂ <code>state</code>Â å’ŒÂ <code>action</code>Â æ”¾åœ¨ä¸€èµ·ï¼ŒæŒ‰â€œåŠŸèƒ½â€å»ç»„ç»‡ä»£ç ï¼Œè€Œä¸æ˜¯æŒ‰â€œç±»å‹â€ï¼ˆstate/getter/actionï¼‰å»ç»„ç»‡ã€‚<code>defineStore</code>Â æŸç§ç¨‹åº¦ä¸Šï¼Œæ˜¯åˆæŠŠæˆ‘ä»¬æ‹‰å›äº† Vuex çš„é‚£ç§â€œåˆ†é—¨åˆ«ç±»â€çš„æ€ç»´é‡Œã€‚</li>
</ul>
<p>æ‰€ä»¥ï¼Œâ€œä½ ä¼šå¾—åˆ°æ›´å°‘çš„å¿ƒæ™ºè´Ÿæ‹…â€æŒ‡çš„å°±æ˜¯è¿™ä¸ªã€‚</p>
<p>ä½ ä¸éœ€è¦å»è®°Â <code>defineStore</code>Â çš„ APIï¼Œä¸éœ€è¦å»æƒ³â€œæˆ‘è¿™ä¸ªé€»è¾‘æ˜¯ç®—Â <code>getter</code>Â è¿˜æ˜¯Â <code>action</code>â€ï¼Œä½ å°±æ˜¯åœ¨å†™ JS/TSï¼Œä½ å°±æ˜¯åœ¨å†™Â <code>function</code>ã€‚<strong>è¿™éš¾é“ä¸æ˜¯ä¸€ç§è§£æ”¾å—ï¼Ÿ</strong></p>
<h4 data-id="heading-2"><strong>ä»€ä¹ˆå«â€œæ²¡ç”¨æ˜ç™½ Piniaâ€ï¼Ÿ</strong></h4>
<p>åœ¨æˆ‘çœ‹æ¥ï¼Œæ°æ°ç›¸åã€‚</p>
<p><strong>æŠŠ Pinia å½“æˆæ–°æ—¶ä»£çš„ Vuexï¼Œä¸åˆ†åœºæ™¯ã€å¯åŠ¨é¡¹ç›®å°±å…ˆè£…ä¸Šï¼Œè¿™æ‰æ˜¯â€œæ²¡ç”¨æ˜ç™½ Vue 3â€ã€‚</strong></p>
<p>å¦‚æœæ²¡æœ‰æ˜ç™½ Vue 3 ç»„åˆå¼ API åˆ°åº•ç»™äº†ä½ å¤šå¤§çš„â€œè‡ªç”±â€å’Œâ€œèƒ½åŠ›â€ï¼Œå°±å¯èƒ½ç»§ç»­ç”¨ Vue 2 çš„â€œä¿å§†å¼â€æ€ç»´åœ¨å†™ Vue 3ã€‚</p>
<p>æˆ‘æƒ³äº†å‡ ä¸ªåœºæ™¯ï¼Œå¤§å®¶å‚è€ƒä¸‹ï¼š</p>
<ol>
<li><strong>åœºæ™¯ä¸€ï¼šä¸ªäººé¡¹ç›®ã€å°å›¢é˜Ÿæ•æ·å¼€å‘ã€å†…éƒ¨å·¥å…·</strong></li>
</ol>
<ul>
<li><strong>æˆ‘çš„é€‰æ‹©ï¼š100% ä½¿ç”¨ç»„åˆå¼ APIã€‚</strong></li>
<li><strong>ç†ç”±ï¼š</strong>Â é€Ÿåº¦å¿«ï¼Œçµæ´»ï¼Œé›¶ä¾èµ–ã€‚æˆ‘å¯ä»¥æŒ‰åŠŸèƒ½æ‹†åˆ†Â <code>useCounter.ts</code>,Â <code>useUser.ts</code>,Â <code>useCart.ts</code>... å®ƒä»¬å°±æ˜¯ä¸€å † TS æ¨¡å—ï¼Œéœ€è¦å…±äº«å°±åœ¨é¡¶å±‚å®šä¹‰Â <code>reactive</code>ï¼Œä¸éœ€è¦å°±åªå¯¼å‡ºå‡½æ•°ã€‚æ‰“åŒ…ä½“ç§¯æ›´å°ï¼Œå¿ƒæ™ºè´Ÿæ‹…ä¸ºé›¶ã€‚</li>
</ul>
<ol start="3">
<li><strong>åœºæ™¯äºŒï¼šå¤§å‹ä¼ä¸šçº§åº”ç”¨ã€å¤šå›¢é˜Ÿåä½œã€éœ€è¦å¼ºè§„èŒƒ</strong></li>
</ol>
<ul>
<li><strong>æˆ‘çš„é€‰æ‹©ï¼šæˆ‘ä¼šå€¾å‘äºä½¿ç”¨ Piniaã€‚</strong></li>
<li><strong>ç†ç”±ï¼š</strong>Â è¿™ç§é¡¹ç›®ï¼Œâ€œè§„èŒƒâ€å¤§äºâ€œçµæ´»â€ã€‚<code>defineStore</code>Â æä¾›çš„ç»Ÿä¸€èŒƒå¼ï¼Œèƒ½è®©ä¸åŒæ°´å¹³çš„å¼€å‘è€…ï¼ˆå°¤å…¶æ˜¯æ–°äººï¼‰å†™å‡ºé£æ ¼æ›´ä¸€è‡´çš„ä»£ç ã€‚è€Œä¸”åœ¨è¿™ç§å¤æ‚é¡¹ç›®é‡Œï¼ŒDevtools çš„æ—¶é—´æ—…è¡Œå’ŒçŠ¶æ€å¿«ç…§ï¼Œåœ¨æ’æŸ¥æ·±å±‚ Bug æ—¶ï¼Œç¡®å®èƒ½æ´¾ä¸Šç”¨åœºã€‚</li>
</ul>
<ol start="5">
<li><strong>åœºæ™¯ä¸‰ï¼šéœ€è¦ SSR çš„é¡¹ç›®</strong></li>
</ol>
<ul>
<li><strong>æˆ‘çš„é€‰æ‹©ï¼šç”¨ Piniaã€‚</strong></li>
<li><strong>ç†ç”±ï¼š</strong>Â åˆ«é‡å¤é€ è½®å­ã€‚Pinia å¯¹ SSR çŠ¶æ€å¤„ç†å¾—å¾ˆå¥½ï¼Œè‡ªå·±æä¸€å¥—ç»„åˆå¼ API çš„ SSR çŠ¶æ€åŒæ­¥ï¼Œè´¹æ—¶è´¹åŠ›ï¼Œä¸å€¼å¾—ã€‚</li>
</ul>
<p>æ‰€ä»¥ä½ çœ‹ï¼Œå¹¶ä¸æ˜¯åœ¨å…¨ç›˜å¦å®š Piniaï¼Œè€Œæ˜¯åœ¨å‘¼åå¤§å®¶Â <strong>â€œæŒ‰éœ€é€‰æ‹©â€</strong> ã€‚</p>
<p>ä¸è¦å› ä¸ºâ€œå¤§å®¶éƒ½ç”¨â€æˆ–è€…â€œå®˜æ–¹æ¨èâ€å°±å»ç”¨ã€‚å·¥å…·æ˜¯æ­»çš„ï¼Œäººæ˜¯æ´»çš„ã€‚Vue 3 ç»™äº†æˆ‘ä»¬ä¸€æŠŠæ›´è½»ã€æ›´å¿«çš„åŒ•é¦–ï¼ˆç»„åˆå¼ APIï¼‰ï¼Œä½ ä¸ºä»€ä¹ˆéè¦æŠ±ç€é‚£æŠŠå¾ˆç‰›ã€ä½†ä¹Ÿå¾ˆé‡çš„å¼€å±±åˆ€ï¼ˆPiniaï¼‰ä¸æ”¾ï¼Œè¿åˆ‡ä¸ªæ°´æœéƒ½è¦ç”¨å®ƒå‘¢ï¼Ÿ</p>
<p>ä¸‹æ¬¡åœ¨é¡¹ç›®é‡ŒÂ <code>npm install pinia</code>Â ä¹‹å‰ï¼Œå…ˆåœ 5 ç§’é’Ÿï¼Œé—®é—®è‡ªå·±ï¼š<strong>æˆ‘è¿™æ¬¡ï¼ŒçœŸçš„éœ€è¦å®ƒå—ï¼Ÿè¿˜æ˜¯è¯´ï¼Œå‡ ä¸ªÂ <code>ref</code>Â å’ŒÂ <code>reactive</code>Â å°±èƒ½æå®šäº†ï¼Ÿ</strong></p>
<p>æƒ³æ˜ç™½è¿™ä¸ªé—®é¢˜ï¼Œå¯èƒ½æ¯”ä½ å¤šåˆ· 10 ç¯‡ Pinia çš„æ•™ç¨‹éƒ½æœ‰ç”¨ã€‚</p>
<p>è¡Œäº†ï¼Œä»Šå¤©å°±èŠåˆ°è¿™ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[~/.ssh/config ä½œç”¨è¯¦è§£]]></title>    <link>https://juejin.cn/post/7575119254314057754</link>    <guid>https://juejin.cn/post/7575119254314057754</guid>    <pubDate>2025-11-23T11:31:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575119254314057754" data-draft-id="7575438636330909747" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="~/.ssh/config ä½œç”¨è¯¦è§£"/> <meta itemprop="keywords" content="SSH"/> <meta itemprop="datePublished" content="2025-11-23T11:31:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆé‡Œè°¢é¡¿"/> <meta itemprop="url" content="https://juejin.cn/user/3678304397695056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ~/.ssh/config ä½œç”¨è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3678304397695056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆé‡Œè°¢é¡¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T11:31:49.000Z" title="Sun Nov 23 2025 11:31:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é—®é¢˜ï¼æˆ‘ä»¬æ¥æ·±å…¥è§£é‡Š <code>~/.ssh/config</code> çš„ä½œç”¨ï¼Œä»¥åŠä½ å†™çš„è¿™æ®µé…ç½®ä¸ºä»€ä¹ˆèƒ½è®© <code>ssh devstack-vm</code> ä¸€é”®å®Œæˆå¤æ‚è¿æ¥ã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸ“ ä¸€ã€<code>~/.ssh/config</code> æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p><code>~/.ssh/config</code> æ˜¯ <strong>OpenSSH å®¢æˆ·ç«¯çš„ç”¨æˆ·çº§é…ç½®æ–‡ä»¶</strong>ï¼Œç”¨äºä¸ºä¸åŒçš„ SSH è¿æ¥å®šä¹‰åˆ«åã€ä¸»æœºåœ°å€ã€ç”¨æˆ·åã€å¯†é’¥ã€ä»£ç†è·³è½¬ã€ç«¯å£è½¬å‘ç­‰å‚æ•°ã€‚</p>
<blockquote>
<p>âœ… å®ƒçš„ä½œç”¨ç±»ä¼¼äºâ€œSSH è¿æ¥çš„å¿«æ·æ–¹å¼ + è‡ªåŠ¨åŒ–è„šæœ¬â€ã€‚</p>
</blockquote>
<p>å½“ä½ æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-sql" lang="sql">ssh <span class="hljs-keyword">some</span><span class="hljs-operator">-</span>host
</code></pre>
<p>SSH å®¢æˆ·ç«¯ä¼šï¼š</p>
<ol>
<li>æŸ¥çœ‹ <code>~/.ssh/config</code> ä¸­æ˜¯å¦æœ‰åä¸º <code>some-host</code> çš„ <code>Host</code> å—</li>
<li>å¦‚æœæœ‰ï¼Œå°±<strong>è‡ªåŠ¨åº”ç”¨å…¶ä¸­çš„æ‰€æœ‰é…ç½®</strong></li>
<li>å¦‚æœæ²¡æœ‰ï¼Œåˆ™æŒ‰é»˜è®¤è¡Œä¸ºï¼ˆç›´è¿ã€å½“å‰ç”¨æˆ·åã€æ— ä»£ç†ç­‰ï¼‰å¤„ç†</li>
</ol>
<hr/>
<h2 data-id="heading-1">ğŸ”§ äºŒã€ä½ çš„é…ç½®é€è¡Œè§£æ</h2>
<pre><code class="hljs language-css" lang="css">Host devstack-vm
  HostName <span class="hljs-number">192.168</span>.<span class="hljs-number">122.30</span>
  User stack
  ProxyJump hanwang<span class="hljs-keyword">@192</span>.168.18.133
  LocalForward <span class="hljs-number">8080</span> <span class="hljs-attribute">localhost</span>:<span class="hljs-number">80</span>
</code></pre>





























<table><thead><tr><th>é…ç½®é¡¹</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>Host devstack-vm</code></td><td>å®šä¹‰ä¸€ä¸ª<strong>åˆ«å</strong>ï¼ˆnicknameï¼‰ï¼Œä»¥åå¯ä»¥ç”¨ <code>ssh devstack-vm</code> ä»£æ›¿å®Œæ•´å‘½ä»¤</td></tr><tr><td><code>HostName 192.168.122.30</code></td><td>çœŸæ­£è¦è¿æ¥çš„ç›®æ ‡ IPï¼ˆå³ä½ çš„ DevStack è™šæ‹Ÿæœºï¼‰</td></tr><tr><td><code>User stack</code></td><td>ç™»å½•è¯¥ VM æ—¶ä½¿ç”¨çš„ç”¨æˆ·åæ˜¯ <code>stack</code></td></tr><tr><td><code>ProxyJump hanwang@192.168.18.133</code></td><td>å…ˆé€šè¿‡è·³æ¿æœº <code>hanwang@192.168.18.133</code> ä¸­è½¬ï¼ˆç›¸å½“äºè‡ªåŠ¨åš SSH è·³è½¬ï¼‰</td></tr><tr><td><code>LocalForward 8080 localhost:80</code></td><td>åœ¨æœ¬åœ°ï¼ˆä½ çš„ç”µè„‘ï¼‰ç›‘å¬ 8080 ç«¯å£ï¼Œå¹¶å°†æµé‡é€šè¿‡éš§é“è½¬å‘åˆ° VM çš„ <code>localhost:80</code></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-2">ğŸ”„ ä¸‰ã€æ‰§è¡Œ <code>ssh devstack-vm</code> æ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</h2>
<p>åŸæœ¬ä½ éœ€è¦æ‰‹åŠ¨æ‰§è¡Œä¸¤æ­¥ï¼š</p>
<h3 data-id="heading-3">âŒ æ‰‹åŠ¨æ–¹å¼ï¼ˆç¹çï¼‰ï¼š</h3>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># ç¬¬ä¸€æ­¥ï¼šç™»å½•è·³æ¿æœº</span>
ssh hanwang@192.<span class="hljs-number">168.18</span>.<span class="hljs-number">133</span>

<span class="hljs-comment"># ç¬¬äºŒæ­¥ï¼ˆåœ¨è·³æ¿æœºä¸Šï¼‰ï¼šå†ç™»å½• VM</span>
ssh stack@192.<span class="hljs-number">168.122</span>.<span class="hljs-number">30</span>
</code></pre>
<p>æˆ–è€…ç”¨æ—§å¼å‘½ä»¤ï¼ˆåµŒå¥— SSHï¼‰ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">ssh -t <span class="hljs-symbol">hanwang@</span><span class="hljs-number">192.168</span><span class="hljs-number">.18</span><span class="hljs-number">.133</span> ssh <span class="hljs-symbol">stack@</span><span class="hljs-number">192.168</span><span class="hljs-number">.122</span><span class="hljs-number">.30</span>
</code></pre>
<p>è¿˜è¦é¢å¤–å¼€ä¸€ä¸ªç»ˆç«¯åšç«¯å£è½¬å‘ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">ssh -L <span class="hljs-number">8080</span><span class="hljs-symbol">:localhost</span><span class="hljs-symbol">:</span><span class="hljs-number">80</span> -J hanwang<span class="hljs-variable">@192</span>.<span class="hljs-number">168.18</span>.<span class="hljs-number">133</span> stack<span class="hljs-variable">@192</span>.<span class="hljs-number">168.122</span>.<span class="hljs-number">30</span>
</code></pre>
<h3 data-id="heading-4">âœ… ä½¿ç”¨ config åï¼š</h3>
<p>ä½ åªéœ€è¾“å…¥ï¼š</p>
<pre><code class="hljs">ssh devstack-vm
</code></pre>
<p>SSH è‡ªåŠ¨å¸®ä½ å®Œæˆï¼š</p>
<ol>
<li>ä»¥ç”¨æˆ· <code>hanwang</code> ç™»å½•è·³æ¿æœº <code>192.168.18.133</code></li>
<li>ä»è·³æ¿æœºå†ä»¥ç”¨æˆ· <code>stack</code> ç™»å½• <code>192.168.122.30</code></li>
<li>åŒæ—¶åœ¨æœ¬åœ°å¼€å¯ç«¯å£è½¬å‘ï¼š<code>localhost:8080 â†’ VM:80</code></li>
</ol>
<blockquote>
<p>ğŸ’¡ è¿™å°±åƒç»™å¤æ‚çš„å‘½ä»¤èµ·äº†ä¸ªâ€œå¿«æ·æ–¹å¼â€ï¼Œè¿˜é™„å¸¦è‡ªåŠ¨åŒ–åŠŸèƒ½ï¼</p>
</blockquote>
<hr/>
<h2 data-id="heading-5">ğŸŒŸ å››ã€å¥½å¤„æ€»ç»“</h2>





























<table><thead><tr><th>ä¼˜åŠ¿</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>ç®€åŒ–å‘½ä»¤</strong></td><td><code>ssh devstack-vm</code> ä»£æ›¿ä¸€é•¿ä¸²å‚æ•°</td></tr><tr><td><strong>é¿å…é‡å¤è¾“å…¥</strong></td><td>ç”¨æˆ·åã€IPã€è·³æ¿æœºç­‰ä¸ç”¨æ¯æ¬¡å†™</td></tr><tr><td><strong>è‡ªåŠ¨ç«¯å£è½¬å‘</strong></td><td>æ¯æ¬¡è¿æ¥è‡ªåŠ¨å»ºç«‹éš§é“ï¼Œæ— éœ€é¢å¤–å‘½ä»¤</td></tr><tr><td><strong>æ”¯æŒå¯†é’¥ç®¡ç†</strong></td><td>å¯æŒ‡å®š <code>IdentityFile</code> ä½¿ç”¨ç‰¹å®šç§é’¥</td></tr><tr><td><strong>æé«˜å®‰å…¨æ€§</strong></td><td>å‡å°‘æ‰‹åŠ¨è¾“å…¥é”™è¯¯ï¼Œé¿å…å¯†ç æ³„éœ²</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-6">ğŸ› ï¸ äº”ã€æ‰©å±•ç¤ºä¾‹</h2>
<p>ä½ è¿˜å¯ä»¥æ·»åŠ æ›´å¤šåŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">Host</span> <span class="hljs-string">devstack-vm</span>
  <span class="hljs-string">HostName</span> <span class="hljs-number">192.168</span><span class="hljs-number">.122</span><span class="hljs-number">.30</span>
  <span class="hljs-string">User</span> <span class="hljs-string">stack</span>
  <span class="hljs-string">ProxyJump</span> <span class="hljs-string">hanwang@192.168.18.133</span>
  <span class="hljs-string">LocalForward</span> <span class="hljs-number">8080 </span><span class="hljs-string">localhost:80</span>
  <span class="hljs-string">LocalForward</span> <span class="hljs-number">8774 </span><span class="hljs-string">localhost:8774</span>   <span class="hljs-comment"># Nova API</span>
  <span class="hljs-string">LocalForward</span> <span class="hljs-number">9696 </span><span class="hljs-string">localhost:9696</span>   <span class="hljs-comment"># Neutron API</span>
  <span class="hljs-string">IdentityFile</span> <span class="hljs-string">~/.ssh/id_rsa</span>         <span class="hljs-comment"># æŒ‡å®šç§é’¥</span>
  <span class="hljs-string">IdentitiesOnly</span> <span class="hljs-literal">yes</span>                 <span class="hljs-comment"># åªç”¨æŒ‡å®šå¯†é’¥</span>
  <span class="hljs-string">ServerAliveInterval</span> <span class="hljs-number">60</span>             <span class="hljs-comment"># é˜²æ­¢æ–­è¿</span>
</code></pre>
<p>è¿™æ ·ä¸€æ¬¡è¿æ¥ï¼Œå°±èƒ½è®¿é—®å¤šä¸ª OpenStack æœåŠ¡ï¼</p>
<hr/>
<h2 data-id="heading-7">âœ… å…­ã€æ³¨æ„äº‹é¡¹</h2>
<ol>
<li>
<p><strong>æ–‡ä»¶æƒé™å¿…é¡»ä¸¥æ ¼</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">chmod</span> 600 ~/.ssh/config
<span class="hljs-built_in">chmod</span> 700 ~/.ssh
</code></pre>
<p>å¦åˆ™ SSH ä¼šå¿½ç•¥è¯¥æ–‡ä»¶ï¼ˆå‡ºäºå®‰å…¨è€ƒè™‘ï¼‰ã€‚</p>
</li>
<li>
<p><strong>Host åç§°åŒºåˆ†å¤§å°å†™</strong>ï¼Œå»ºè®®å…¨å°å†™ã€‚</p>
</li>
<li>
<p><strong>ç¼©è¿›ä¸æ˜¯å¿…é¡»çš„</strong>ï¼Œä½†ä¸ºäº†å¯è¯»æ€§å»ºè®®ç”¨ç©ºæ ¼å¯¹é½ã€‚</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-8">ğŸ¯ æ€»ç»“ä¸€å¥è¯ï¼š</h2>
<blockquote>
<p><code>~/.ssh/config</code> è®©ä½ èƒ½ç”¨ <strong>ç®€å•åˆ«å</strong>ï¼ˆå¦‚ <code>devstack-vm</code>ï¼‰<br/>
è‡ªåŠ¨å®Œæˆ <strong>å¤æ‚è¿æ¥é€»è¾‘</strong>ï¼ˆè·³æ¿æœº + ç”¨æˆ·å + ç«¯å£è½¬å‘ï¼‰ï¼Œ<br/>
æå¤§æå‡å¼€å‘å’Œè¿ç»´æ•ˆç‡ï¼</p>
</blockquote>
<p>æ‰€ä»¥ï¼Œ<code>ssh devstack-vm</code> èƒ½å·¥ä½œï¼Œä¸æ˜¯é­”æ³•ï¼Œè€Œæ˜¯ä½ æå‰å†™å¥½çš„â€œSSH è‡ªåŠ¨åŒ–å‰§æœ¬â€åœ¨å¹•åé»˜é»˜æ‰§è¡Œ ğŸ˜Š</p>
<p>å¦‚æœä½ ç»å¸¸è¿æ¥å¤šå°æœåŠ¡å™¨ï¼Œå¼ºçƒˆå»ºè®®å–„ç”¨è¿™ä¸ªæ–‡ä»¶ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¯é€†è®¡ç®—çš„æ–¹æ³•è®ºæ¥æº]]></title>    <link>https://juejin.cn/post/7575119254314090522</link>    <guid>https://juejin.cn/post/7575119254314090522</guid>    <pubDate>2025-11-23T11:50:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575119254314090522" data-draft-id="7575182522411515942" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¯é€†è®¡ç®—çš„æ–¹æ³•è®ºæ¥æº"/> <meta itemprop="keywords" content="åç«¯,ä½ä»£ç "/> <meta itemprop="datePublished" content="2025-11-23T11:50:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="canonical_entropy"/> <meta itemprop="url" content="https://juejin.cn/user/4212984289694429"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¯é€†è®¡ç®—çš„æ–¹æ³•è®ºæ¥æº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984289694429/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    canonical_entropy
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T11:50:19.000Z" title="Sun Nov 23 2025 11:50:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¯¹äºè½¯ä»¶é¢†åŸŸçš„å¤§é‡è®¾è®¡åŸåˆ™å’Œæ‰€è°“çš„æ–¹æ³•è®ºï¼Œæˆ‘ä¸€ç›´æŒæœ‰å¾ˆæ·±çš„æ€€ç–‘æ€åº¦ã€‚ä¸ºä»€ä¹ˆä¼šå­˜åœ¨è¿™äº›åŸåˆ™ï¼Œèƒ½å¦ä»ç§‘å­¦çš„å±‚é¢è¯æ˜å®ƒä»¬çš„æœ‰æ•ˆæ€§ï¼Ÿå¯é€†è®¡ç®—ç†è®ºè¯•å›¾ä¸ºè½¯ä»¶æ„é€ æä¾›ä¸€ä¸ªæ›´åŠ åšå®çš„ç†è®ºåŸºç¡€ï¼Œå®ƒæ˜ç¡®æå‡ºåº”è¯¥å°†â€œå·®é‡â€æå‡ä¸ºç¬¬ä¸€æ€§çš„æ¦‚å¿µï¼Œå°†å…¨é‡çœ‹ä½œæ˜¯å·®é‡çš„ä¸€ç§ç‰¹ä¾‹ï¼ˆå…¨é‡=å•ä½å…ƒ+å·®é‡ï¼‰ï¼Œå›´ç»•å·®é‡æ¦‚å¿µå»é‡å»ºæ•´ä¸ªé¢†åŸŸæ¦‚å¿µä½“ç³»ã€‚å¯é€†è®¡ç®—çš„æ€æƒ³æ¥æºä¸æ˜¯è®¡ç®—æœºç§‘å­¦æœ¬èº«ï¼Œè€Œæ˜¯ç†è®ºç‰©ç†å­¦ï¼Œå®ƒå°†è½¯ä»¶çœ‹ä½œæ˜¯å¤„äºä¸æ–­æ¼”åŒ–è¿‡ç¨‹ä¸­çš„æŠ½è±¡å®ä½“ï¼Œåœ¨ä¸åŒçš„å¤æ‚æ€§å±‚æ¬¡ä¸Šç”±ä¸åŒçš„è¿ç®—è§„åˆ™æ‰€æè¿°ï¼Œå®ƒæ‰€å…³æ³¨çš„æ˜¯æ¼”åŒ–è¿‡ç¨‹ä¸­äº§ç”Ÿçš„å¾®å°å·®é‡å¦‚ä½•åœ¨ç³»ç»Ÿå†…æœ‰åºçš„ä¼ æ’­å¹¶å‘ç”Ÿç›¸äº’ä½œç”¨ã€‚æœ¬æ–‡å°†ä»‹ç»å¯é€†è®¡ç®—ä»ä½œä¸ºå…¶æ€æƒ³æ¥æºçš„ç»Ÿè®¡ç‰©ç†å­¦å’Œé‡å­åŠ›å­¦æ‰€è·å¾—çš„å¯å‘ã€‚</p>
<h2 data-id="heading-0">ï¼ˆä¸€ï¼‰ç†µå¢åŸç†</h2>
<p>åœ¨é¦™å†œçš„åŸå§‹å®šä¹‰ä¸­ï¼Œä¿¡æ¯æ˜¯èƒ½å¤Ÿç”¨æ¥æ¶ˆé™¤ä¸ç¡®å®šæ€§çš„ä¸œè¥¿ã€‚è€Œåœ¨ç‰©ç†å­¦ä¸­ï¼Œæ‰€è°“çš„ä¸ç¡®å®šæ€§å°±æ˜¯ç³»ç»Ÿçš„æ··ä¹±ç¨‹åº¦ï¼Œè€Œç”¨äºåº¦é‡ç³»ç»Ÿæ··ä¹±ç¨‹åº¦çš„ç‰©ç†é‡å°±æ˜¯ç†µï¼ˆEntropyï¼‰ã€‚æ¥æ”¶åˆ°ä¿¡æ¯åï¼Œä¸ç¡®å®šæ€§é™ä½ï¼Œä¹Ÿå°±æ„å‘³ç€æ··ä¹±ç¨‹åº¦çš„å‡å°‘ï¼Œå› æ­¤ä¿¡æ¯ä¹Ÿå°±è¢«è®¤ä¸ºæ˜¯è´Ÿç†µã€‚</p>
<p>ç†µæ˜¯ç‰©ç†å­¦ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒç”šè‡³æ¯”èƒ½é‡æ¦‚å¿µè¿˜è¦é‡è¦ã€‚çƒ­åŠ›å­¦ç¬¬ä¸€å®šå¾‹å°±æ˜¯èƒ½é‡å®ˆæ’å®šå¾‹ï¼Œå®ƒæŒ‡å‡ºèƒ½é‡åªèƒ½è¢«è½¬åŒ–ï¼Œè€Œä¸å¯èƒ½è¢«åˆ›é€ æˆ–è€…æ¶ˆç­ã€‚è€Œçƒ­åŠ›å­¦ç¬¬äºŒå®šå¾‹æŒ‡å‡ºï¼Œå³ä½¿æœ‰äº†èƒ½é‡ï¼Œä¹Ÿä¸ä¸€å®šèƒ½å¤Ÿå¯¹å¤–åšåŠŸï¼Œå¿…é¡»è€ƒè™‘åˆ°çƒ­åŠ›å­¦è¿‡ç¨‹å†…åœ¨çš„ä¸å¯é€†æ€§ï¼šçƒ­åŠ›å­¦ç³»ç»Ÿä»ä¸€ä¸ªå¹³è¡¡æ€æ¼”åŒ–åˆ°å¦ä¸€å¹³è¡¡æ€çš„è¿‡ç¨‹ä¸­ï¼Œå…¶ç†µæ°¸ä¸å‡å°‘ï¼Œè‹¥è¿‡ç¨‹å¯é€†ï¼Œåˆ™ç†µä¸å˜ï¼Œè‹¥ä¸å¯é€†ï¼Œåˆ™ç†µå¢åŠ ï¼Œè¿™ä¹Ÿå°±æ˜¯æ‰€è°“ç†µå¢åŸç†ã€‚</p>
<p>ç†µå¢åŸç†æ§åˆ¶äº†æ‰€æœ‰è‡ªç„¶å‘ç”Ÿçš„è¿‡ç¨‹ï¼Œé©±åŠ¨æ‰€æœ‰äº‹ç‰©è‡ªå‘çš„å‘ç€æ··ä¹±æœ€å¤§åŒ–çš„æ–¹å‘å‘å±•ã€‚å› æ­¤ï¼Œåœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥è§‚å¯Ÿåˆ°å¤§å‹è½¯ä»¶äº§å“æ™®éå­˜åœ¨ç€ä»æœ‰åºåˆ°æ··ä¹±çš„å‘å±•å†ç¨‹ã€‚ä¼´éšç€äººå‘˜çš„æ›´æ›¿ã€éœ€æ±‚çš„å˜è¿ï¼Œåœ¨è½¯ä»¶ä¸­å¢åŠ æ–°çš„åŠŸèƒ½å˜å¾—è¶Šæ¥è¶Šå›°éš¾ï¼Œä¿®æ”¹bugç»å¸¸å¼•å…¥æ–°çš„bugï¼Œæ²¡äººèƒ½å¤Ÿè¯´æ¸…æ¥šå¦‚ä½•æ‰èƒ½æŠ½å–ç³»ç»Ÿä¸­çš„ä¸€å°éƒ¨åˆ†è¿›è¡Œå¤ç”¨ï¼Œæœ€ç»ˆåªèƒ½æ¨ç¿»é‡å»ºã€‚</p>
<p>å¯é€†è®¡ç®—çš„æ ¸å¿ƒæ˜¯å¯é€†æ€§ï¼Œè€Œå¯é€†æ€§ä¹‹æ‰€ä»¥é‡è¦ï¼Œä¸ä»…ä»…åœ¨äºå®ƒæ–¹ä¾¿äº†è½¯ä»¶å…ƒç´ çš„çµæ´»å¤ç”¨ï¼Œæ·±å±‚æ¬¡çš„åŸå› æ˜¯å®ƒä½“ç°äº†æˆ‘ä»¬è¿™ä¸ªä¸–ç•Œæœ¬è´¨çš„è¿ä½œè§„å¾‹ã€‚é€šè¿‡éµå¾ªå¯é€†è®¡ç®—åŸåˆ™ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæœ‰æ•ˆçš„æ§åˆ¶è½¯ä»¶æ¼”è¿›è¿‡ç¨‹ä¸­çš„ç†µå¢é€Ÿåº¦ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œå¦‚æœç³»ç»Ÿèƒ½å¤Ÿåšåˆ°å®Œå…¨å¯é€†ï¼Œåˆ™ç†µæ˜¯ä¿æŒä¸å˜çš„ã€‚</p>
<p>åœ¨è½¯ä»¶æ¶æ„è®¾è®¡ä¸­ï¼Œæˆ‘ä»¬æ€»æ˜¯è¯´è¦é«˜å†…èšã€ä½è€¦åˆã€å…³æ³¨ç‚¹åˆ†ç¦»ï¼Œä½†æ˜¯ä»€ä¹ˆæ˜¯é«˜ã€ä»€ä¹ˆæ˜¯ä½ã€éœ€è¦åˆ†ç¦»åˆ°ä»€ä¹ˆæ ·çš„ç¨‹åº¦ï¼Ÿå¯é€†è®¡ç®—ç»™å‡ºäº†ä¸€ä¸ªå¯æ“ä½œæ€§æ›´å¼ºçš„æ ‡å‡†ï¼šåˆ†ç¦»åˆ°å¯é€†çš„ç¨‹åº¦å°±å¥½äº†ã€‚å¯¹äºå…·ä½“çš„è½¯ä»¶å¼€å‘ï¼Œå¯é€†è®¡ç®—æ‰€æå‡ºçš„è¦æ±‚æ˜¯ï¼Œä»»ä½•å¢åŠ çš„åŠŸèƒ½éƒ½åº”è¯¥æœ‰é…å¯¹çš„é€†å‘å–æ¶ˆæœºåˆ¶ï¼Œä»»ä½•è¾“å…¥åˆ°ç³»ç»Ÿä¸­çš„ä¿¡æ¯éƒ½åº”è¯¥å­˜åœ¨ä¸€ç§è‡ªåŠ¨åå‘æå–å‡ºæ¥çš„æ–¹æ³•ã€‚</p>
<p>å¯é€†æ€§æ˜¯å¯ä»¥å¤åˆçš„ï¼Œå³å¦‚æœæ¯ä¸ªéƒ¨åˆ†éƒ½å¯é€†ï¼Œä¸”éƒ¨åˆ†ä¹‹é—´çš„ç»“åˆå…³ç³»ä¹Ÿå¯é€†ï¼Œåˆ™ç³»ç»Ÿæ•´ä½“å¯é€†ã€‚è¿™ä¸€ç‰¹ç‚¹ä½¿å¾—é€æ­¥æ„å»ºå¤§å‹çš„å¯é€†ç³»ç»Ÿæˆä¸ºå¯èƒ½ã€‚å…·ä½“æ–¹å¼å¯ä»¥å‚è€ƒè®¾è®¡æ¨¡å¼ä¸­çš„Commandæ¨¡å¼ï¼šæ¯ä¸ªCommandéƒ½åŒ…å«ä¸€ç»„é…å¯¹çš„executeå’Œundoæ“ä½œï¼Œåˆ™ä¸€ç³»åˆ—æŒ‰é¡ºåºæ‰§è¡Œçš„Commandå¯ä»¥è¢«å°è£…æˆä¸€ä¸ªBatchCommandï¼Œå®ƒçš„executeå’Œundoæ“ä½œå¯ä»¥ç”±å­å‘½ä»¤å¤åˆå¾—åˆ°ã€‚</p>
<p>ç°å®ä¸–ç•Œä¸­ï¼Œç†µå¢æ˜¯æ— æ³•é€ƒé¿çš„å®¿å‘½ã€‚ä½†æ˜¯å³ä½¿æ— æ³•å®Œå…¨æ¶ˆé™¤ç†µå¢ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥é€‰æ‹©ç†µå¢å‘ç”Ÿçš„åœ°æ–¹ï¼Œä¾‹å¦‚å°†ç†µå¢é›†ä¸­åœ¨å·®é‡â–³ä¸­ã€‚ç‰¹å®šå®¢æˆ·çš„éœ€æ±‚æ€»æ˜¯åŒ…å«ç€å¤§é‡éšæœºçš„ã€å¶ç„¶çš„å› ç´ ï¼ŒæŠŠå®ƒä»¬çº³å…¥ç³»ç»Ÿä¸å¯é¿å…çš„ä¼šç ´ååŸå…ˆç»Ÿä¸€å‡è¡¡çš„ç³»ç»Ÿç»“æ„ï¼Œå¦‚æœèƒ½å¤ŸæŠŠè¿™äº›å¶ç„¶å› ç´ é›†ä¸­åœ¨ä¸€ä¸ªå¯æŠ›å¼ƒçš„å·®é‡â–³ä¸­ï¼Œåˆ™å¯ä»¥ä¿æŠ¤æ ¸å¿ƒæ¶æ„ä¸ä¼šå—åˆ°ä¾µèš€ã€‚å½“ç³»ç»Ÿäº¤ä»˜ç»™æ–°çš„å®¢æˆ·æ—¶ï¼Œæˆ‘ä»¬ä¸å¿…æºå¸¦ä¸Šä¸€ä¸ªå®¢æˆ·çš„ä¸ªæ€§åŒ–éœ€æ±‚ï¼Œå¯ä»¥å§‹ç»ˆä»ä¸€ä¸ªä½ç†µçš„çŠ¶æ€å¼€å§‹ã€‚</p>
<h2 data-id="heading-1">ï¼ˆäºŒï¼‰é‡å­åŠ›å­¦ä¸­çš„ä¸–ç•Œå›¾æ™¯</h2>
<p>é‡å­åŠ›å­¦æ˜¯æè¿°å®‡å®™çš„åŸºæœ¬ç†è®ºï¼Œå®ƒæ‰€ç ”ç©¶çš„é—®é¢˜å¯ä»¥å½’ç»“ä¸ºç®—ç¬¦ï¼ˆOperatorï¼‰ä½œç”¨åˆ°æ‰€è°“çš„æ€å‡½æ•°ï¼ˆState Vectorï¼‰ä¸Šï¼Œå¦‚ä½•é©±åŠ¨ç³»ç»Ÿå‘ç”Ÿæ¼”åŒ–çš„é—®é¢˜ã€‚</p>
<p>1925å¹´æµ·æ£®å ¡æå‡ºäº†é‡å­åŠ›å­¦çš„ç¬¬ä¸€ç§è¡¨è¿°å½¢å¼ï¼šçŸ©é˜µåŠ›å­¦ï¼Œå®ƒä¹Ÿè¢«ç§°ä¸ºæµ·æ£®å ¡å›¾æ™¯ã€‚åœ¨è¿™ä¸€å›¾æ™¯ä¸­ï¼Œæ€å‡½æ•°Ïˆä¸ºå›ºå®šçš„å¯¹è±¡ï¼Œä¸éšæ—¶é—´æ¼”åŒ–ï¼Œè€Œå¯è§‚æµ‹ç®—ç¬¦Açš„æ¼”åŒ–æ»¡è¶³æ–¹ç¨‹</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi>d</mi><mi>A</mi></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac><mo>=</mo><mfrac><mi>i</mi><mi mathvariant="normal">â„</mi></mfrac><mo stretchy="false">[</mo><mi>H</mi><mo separator="true">,</mo><mi>A</mi><mo stretchy="false">]</mo><mo>+</mo><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>A</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><mi>t</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{dA}{dt} = \frac{i}{\hbar}[H, A] + \frac{\partial A}{\partial t}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.0574em;vertical-align:-0.686em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="mord mathnormal">t</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="mord mathnormal">A</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.0225em;vertical-align:-0.686em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3365em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">â„</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">A</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:2.0574em;vertical-align:-0.686em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathnormal">t</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathnormal">A</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span></div>
<p>1926å¹´è–›å®šè°”æå‡ºäº†é‡å­åŠ›å­¦çš„ç¬¬äºŒç§è¡¨è¿°å½¢å¼ï¼šæ³¢åŠ¨åŠ›å­¦ï¼Œå®ƒä¹Ÿè¢«ç§°ä¸ºè–›å®šè°”å›¾æ™¯ã€‚åœ¨è¿™ä¸€å›¾æ™¯ä¸­ï¼Œç®—ç¬¦ä¸ºå›ºå®šçš„å¯¹è±¡ï¼Œä¸éšæ—¶é—´æ¼”åŒ–ï¼Œè€Œæ€å‡½æ•°çš„æ¼”åŒ–æ»¡è¶³å¤§åé¼é¼çš„è–›å®šè°”æ–¹ç¨‹</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>i</mi><mi mathvariant="normal">â„</mi><mfrac><mi mathvariant="normal">âˆ‚</mi><mrow><mi mathvariant="normal">âˆ‚</mi><mi>t</mi></mrow></mfrac><mi>Ïˆ</mi><mo>=</mo><mi>H</mi><mi>Ïˆ</mi></mrow><annotation encoding="application/x-tex">i\hbar\frac{\partial}{\partial t}\psi = H\psi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.0574em;vertical-align:-0.686em;"/><span class="mord mathnormal">i</span><span class="mord">â„</span><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathnormal">t</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mord mathnormal" style="margin-right:0.03588em;">Ïˆ</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mord mathnormal" style="margin-right:0.03588em;">Ïˆ</span></span></span></span></span></div>
<p>å…¶åä¸ä¹…ï¼Œè–›å®šè°”è¯æ˜äº†çŸ©é˜µåŠ›å­¦å’Œæ³¢åŠ¨åŠ›å­¦çš„ç­‰ä»·æ€§ã€‚</p>
<p>1927å¹´ç‹„æ‹‰å…‹æå‡ºæ‰€è°“çš„â€œå˜æ¢ç†è®ºâ€ï¼Œå¼•å‡ºäº†é‡å­åŠ›å­¦çš„ç¬¬ä¸‰ç§è¡¨è¿°å½¢å¼ï¼šç›¸äº’ä½œç”¨å›¾æ™¯ï¼Œå®ƒä¹Ÿè¢«ç§°ä¸ºç‹„æ‹‰å…‹å›¾æ™¯ã€‚åœ¨è¿™ä¸€å›¾æ™¯ä¸­ï¼Œé¦–å…ˆå°†ç³»ç»Ÿçš„Hamiltoné‡æ‹†åˆ†ä¸ºå·²çŸ¥çš„éƒ¨åˆ†å’Œå¾…ç ”ç©¶çš„å¾®å°æ‰°åŠ¨</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>H</mi><mo>=</mo><msub><mi>H</mi><mn>0</mn></msub><mo>+</mo><msub><mi>H</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">H = H_0 + H_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0813em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0813em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span></div>
<p>ç„¶åç ”ç©¶ç³»ç»Ÿå¦‚ä½•åç¦»å·²çŸ¥æ¨¡å‹è¿›è¡Œæ¼”åŒ–ï¼Œå³æˆ‘ä»¬æ‰€å…³å¿ƒçš„æ˜¯å·®é‡æè¿°çš„æ¼”åŒ–æƒ…å†µã€‚åœ¨ç›¸äº’ä½œç”¨å›¾æ™¯ä¸‹ï¼Œæ€å‡½æ•°å’Œç®—ç¬¦éƒ½éšæ—¶é—´æ¼”åŒ–</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>i</mi><mi mathvariant="normal">â„</mi><mfrac><mi>d</mi><mrow><mi>d</mi><mi>t</mi></mrow></mfrac><msub><mi>Ïˆ</mi><mi>I</mi></msub><mo>=</mo><msub><mi>H</mi><mrow><mn>1</mn><mo separator="true">,</mo><mi>I</mi></mrow></msub><msub><mi>Ïˆ</mi><mi>I</mi></msub><mo separator="true">,</mo><mspace width="1em"/><mi>i</mi><mi mathvariant="normal">â„</mi><mfrac><mi>d</mi><mrow><mi>d</mi><mi>t</mi></mrow></mfrac><msub><mi>A</mi><mi>I</mi></msub><mo>=</mo><mo stretchy="false">[</mo><msub><mi>A</mi><mi>I</mi></msub><mo separator="true">,</mo><msub><mi>H</mi><mrow><mn>0</mn><mo separator="true">,</mo><mi>I</mi></mrow></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">i\hbar\frac{d}{dt}\psi_I = H_{1,I}\psi_I, \quad i\hbar\frac{d}{dt}A_I = [A_I, H_{0,I}]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.0574em;vertical-align:-0.686em;"/><span class="mord mathnormal">i</span><span class="mord">â„</span><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="mord mathnormal">t</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal">d</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ïˆ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">I</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.0574em;vertical-align:-0.686em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0813em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.07847em;">I</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ïˆ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">I</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:1em;"/><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">i</span><span class="mord">â„</span><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="mord mathnormal">t</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal">d</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">I</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"/><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">I</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0813em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.07847em;">I</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mclose">]</span></span></span></span></span></div>
<p>æ ¹æ®è¿™ä¸‰ç§å›¾æ™¯éƒ½å¯ä»¥å¾—åˆ°å®Œå…¨ä¸€è‡´çš„ç‰©ç†æµ‹é‡ç»“æœ</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">âŸ¨</mo><mi>A</mi><mo stretchy="false">âŸ©</mo><mo>=</mo><mo stretchy="false">âŸ¨</mo><msub><mi>Ïˆ</mi><mi>S</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>A</mi><mi>S</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>Ïˆ</mi><mi>S</mi></msub><mo stretchy="false">âŸ©</mo><mo>=</mo><mo stretchy="false">âŸ¨</mo><msub><mi>Ïˆ</mi><mi>H</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>A</mi><mi>H</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>Ïˆ</mi><mi>H</mi></msub><mo stretchy="false">âŸ©</mo><mo>=</mo><mo stretchy="false">âŸ¨</mo><msub><mi>Ïˆ</mi><mi>I</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>A</mi><mi>I</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>Ïˆ</mi><mi>I</mi></msub><mo stretchy="false">âŸ©</mo></mrow><annotation encoding="application/x-tex">\langle A \rangle = \langle \psi_S | A_S | \psi_S \rangle = \langle \psi_H | A_H | \psi_H \rangle = \langle \psi_I | A_I | \psi_I \rangle</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">âŸ¨</span><span class="mord mathnormal">A</span><span class="mclose">âŸ©</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">âŸ¨</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ïˆ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ïˆ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">âŸ©</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">âŸ¨</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ïˆ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ïˆ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">âŸ©</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">âŸ¨</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ïˆ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">I</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">I</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ïˆ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">I</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">âŸ©</span></span></span></span></span></div>
<p>ç›¸äº’ä½œç”¨å›¾æ™¯æ˜¯ç‰©ç†å­¦å®¶åœ¨å®é™…å·¥ä½œä¸­ä½¿ç”¨æœ€å¤šçš„å›¾æ™¯ã€‚äº‹å®ä¸Šï¼Œæ•°å­¦ç‰©ç†ä¸­å­˜åœ¨ä¸€ä¸ªä¸“é—¨çš„åˆ†æ”¯ï¼šå¾®æ‰°è®ºï¼ˆPerturbation Theoryï¼‰ï¼Œå®ƒç³»ç»ŸåŒ–çš„ç ”ç©¶åœ¨å·²çŸ¥æ¨¡å‹çš„åŸºç¡€ä¸Šæ·»åŠ å¾®å°çš„æ‰°åŠ¨é‡ï¼Œæ–°çš„æ¨¡å‹å¦‚ä½•æ¼”åŒ–çš„é—®é¢˜ã€‚è€Œç†è®ºç‰©ç†ä¸­ç»å¤§å¤šæ•°æœ‰ä»·å€¼çš„è®¡ç®—éƒ½æ˜¯åœ¨å¾®æ‰°è®ºçš„æ¡†æ¶ä¸‹è¿›è¡Œã€‚</p>
<p>å¦‚æœæŠŠé‡å­åŠ›å­¦å’Œè®¡ç®—æœºç†è®ºåšä¸ªå¯¹æ¯”ï¼Œæˆ‘ä»¬ä¼šå‘ç°é‡å­åŠ›å­¦ä¸­çš„ä¸–ç•Œå›¾æ™¯å’Œè®¡ç®—æœºç†è®ºçš„ä¸–ç•Œè§‚ä¹‹é—´å­˜åœ¨ä¸€ä¸ªæœ‰è¶£çš„å¯¹åº”å…³ç³»ï¼š</p>
<ul>
<li>è–›å®šè°”å›¾æ™¯ &lt;--&gt; å›¾çµæœº</li>
<li>æµ·æ£®å ¡å›¾æ™¯ &lt;--&gt; lambdaæ¼”ç®—</li>
<li>ç‹„æ‹‰å…‹å›¾æ™¯ &lt;--&gt; å¯é€†è®¡ç®—</li>
</ul>
<p>å›¾çµæœºå’Œlambdaæ¼”ç®—å»ºç«‹äº†é€šç”¨è®¡ç®—æœºçš„æ¦‚å¿µåŸºç¡€ï¼Œåœ¨ç†è®ºä¸Šè§£å†³äº†è®¡ç®—çš„å¯è¡Œæ€§é—®é¢˜ï¼Œå³ä¸ºä»€ä¹ˆå¯ä»¥å­˜åœ¨ä¸€ç§é€šç”¨çš„æœºå™¨æ‰§è¡Œæœºæ¢°åŒ–çš„åŠ¨ä½œï¼Œä½¿ç”¨æœ‰é™èµ„æºæ¥å®Œæˆæ‰€æœ‰æˆ‘ä»¬èƒ½å¤Ÿæƒ³è§çš„è®¡ç®—ã€‚åœ¨é€šç”¨è®¡ç®—æœºå·²ç»æ™®åŠçš„ä»Šå¤©ï¼Œæˆ‘ä»¬æ‰€é¢ä¸´çš„æœ€å¤§çš„å®é™…é—®é¢˜æ˜¯å¦‚ä½•æœ‰æ•ˆçš„è¿›è¡Œè®¡ç®—çš„é—®é¢˜ã€‚è®¡ç®—æ•ˆç‡çš„æé«˜ä¾èµ–äºæˆ‘ä»¬å‘ç°è®¡ç®—ä¸­çš„"æ·å¾„"ï¼Œè€Œè¿™ä¾èµ–äºæˆ‘ä»¬å¯¹é—®é¢˜æœ¬è´¨çš„æ´å¯Ÿï¼Œè€Œæ´å¯Ÿçš„äº§ç”Ÿä¸é—®é¢˜çš„è¡¨è¿°å½¢å¼æ¯æ¯ç›¸å…³ã€‚è¡¨è±¡ï¼ˆrepresentationï¼‰å˜æ¢æœ¬èº«ç”šè‡³å°±æ˜¯è§£å†³é—®é¢˜çš„ä¸€ç§æ–¹å¼ï¼Œå› ä¸ºå˜æ¢åçš„é—®é¢˜è¡¨è±¡æœ‰å¯èƒ½ä½¿å¾—è§£å†³æ–¹æ¡ˆå˜å¾—æ¸…æ™°å¯è§ã€‚å¯é€†è®¡ç®—å€ŸåŠ©äºé¢†åŸŸæ¨¡å‹å’Œå·®é‡æè¿°ï¼Œä½¿æˆ‘ä»¬çš„æ³¨æ„åŠ›å¾—ä»¥èšç„¦åœ¨å¾…è§£å†³çš„æ–°é—®é¢˜ä¸Šã€‚</p>
<h2 data-id="heading-2">ï¼ˆä¸‰ï¼‰ç¾¤å’Œç»“æ„ä¸»ä¹‰</h2>
<p>è‡ªä»çˆ±å› æ–¯å¦å‘ç°ç›¸å¯¹è®ºä»¥æ¥ï¼Œç°ä»£ç‰©ç†å­¦çš„å¤§å¤šæ•°åŸºæœ¬åŸç†éƒ½å»ºç­‘åœ¨ç¾¤æ¦‚å¿µçš„åŸºç¡€ä¹‹ä¸Šã€‚ä¾‹å¦‚ï¼Œç‹­ä¹‰ç›¸å¯¹è®ºå¯¹åº”äºLorentzç¾¤ï¼Œé‡å­ç”µåŠ¨åŠ›å­¦å¯¹åº”äºU(1)è§„èŒƒç¾¤ç­‰ã€‚</p>
<p>æ‰€è°“ç¾¤ï¼ˆGroupï¼‰ï¼Œå°±æ˜¯å®šä¹‰äº†ä¸€ä¸ªäºŒå…ƒè¿ç®—ï¼ˆä¸å¦¨è®°ä¸ºç¬¦å·+ï¼‰ï¼Œå¹¶æ»¡è¶³å¦‚ä¸‹å››æ¡ç¾¤å…¬ç†çš„éç©ºé›†åˆGï¼š</p>
<ol>
<li><strong>å°é—­å¾‹</strong>ã€‚é›†åˆä¸­ä»»æ„ä¸¤ä¸ªå…ƒç´ çš„è¿ç®—ç»“æœä»å±äºè¯¥é›†åˆã€‚</li>
<li><strong>ç»“åˆå¾‹</strong>ã€‚è¿ç®—å¯ä»¥å±€éƒ¨è¿›è¡Œï¼Œè¿ç®—çš„æœ€ç»ˆç»“æœä¸è¿ç®—çš„ç»“åˆé¡ºåºæ— å…³ã€‚</li>
<li><strong>å¹ºå…ƒå¾‹</strong>ã€‚é›†åˆä¸­å­˜åœ¨å•ä½å…ƒ0ï¼Œå®ƒå¯¹ä»»ä½•å…ƒç´ çš„ä½œç”¨ç»“æœéƒ½æ˜¯æ— ä½œç”¨ã€‚</li>
<li><strong>é€†å…ƒå¾‹</strong>ã€‚é›†åˆä¸­å¯¹æ¯ä¸€ä¸ªå…ƒç´ aï¼Œå­˜åœ¨å¯¹åº”çš„é€†å…ƒç´ -aï¼Œå®ƒå¯ä»¥å®Œå…¨å–æ¶ˆaçš„ä½œç”¨ã€‚</li>
</ol>
<p>è¿™å››æ¡å…¬ç†çœ‹ä¼¼éå¸¸ç®€å•ï¼Œå´è•´å«ç€éå¸¸æ·±åˆ»çš„æ•°å­¦å†…å®¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåªè€ƒè™‘å…ƒç´ ä¸ªæ•°æœ‰é™çš„æ‰€è°“æœ‰é™ç¾¤ï¼Œä¸ç”¨å¢åŠ ä»»ä½•å…¶ä»–å‡å®šï¼Œä»…ä¾èµ–è¿™å››æ¡å…¬ç†ï¼Œå³å¯æ¨å¯¼å‡ºå¤§é‡æ•°å­¦å®šç†ã€‚åœ¨1955å¹´è‡³2004å¹´é—´å…±100å¤šä½æ•°å­¦å®¶åœ¨500å¤šç¯‡æœŸåˆŠæ–‡ç« ä¸­å†™ä¸‹äº†ä¸Šä¸‡é¡µçš„è¯æ˜ï¼Œæ‰å®Œæˆäº†å¯¹æœ‰é™ç¾¤åˆ†ç±»çš„å·¥ä½œã€‚</p>
<p>å°é—­å¾‹æ˜¯ä¸ºäº†ç¡®ä¿æ‰€æœ‰çš„è¿ç®—ç»“æœéƒ½ä»ç„¶åœ¨å®šä¹‰èŒƒå›´ä¹‹å†…ï¼Œä¸ä¼šå‡ºç°è¿ç®—ç»“æœæ— æ³•æè¿°çš„æƒ…å†µï¼Œè¿™æ ·è¿ç®—å°±å¯ä»¥ä¸€ç›´æŒç»­ä¸‹å»ï¼Œæ„æˆå¾ˆé•¿çš„æ¨ç†é“¾æ¡ã€‚ä¾‹å¦‚ï¼ŒLispè¯­è¨€å…·æœ‰æ‰€è°“çš„åŒåƒæ€§ï¼ˆhomoiconicityï¼‰ï¼ŒLispå®çš„è¾“å‡ºä»ç„¶æ˜¯åˆæ³•çš„Lispè¯­è¨€ï¼Œè¿™æ­£æ˜¯å°é—­å¾‹çš„ä¸€ç§ä½“ç°ã€‚</p>
<p>ç»“åˆå¾‹æ„å‘³ç€å¯ä»¥è¿›è¡Œå±€éƒ¨è¿ç®—ï¼Œè€Œä¸ç”¨ä¾èµ–äºå…¨å±€ç»“æ„ï¼Œè¿™æ ·æ‰å¯èƒ½å®ç°å­ç»“æ„çš„äºŒæ¬¡å°è£…ã€‚ä¾‹å¦‚ï¼Œå¯¹äºæ»¡è¶³ç»“åˆå¾‹çš„è¿ç®—ï¼Œå¯ä»¥å°†Bå’ŒCæŠ½è±¡ä¸ºä¸€ä¸ªæ–°çš„ç»“æ„Xï¼Œè€Œå°†Då’ŒEæŠ½è±¡ä¸ºä¸€ä¸ªæ–°çš„ç»“æ„Yï¼ŒXå’ŒYçš„ç»„åˆå¯ä»¥è¢«å†æ¬¡æŠ½è±¡ä¸ºç»“æ„Zã€‚</p>
<p>æ»¡è¶³ç»“åˆå¾‹çš„è¿ç®—å¯ä»¥å®ç°å±€éƒ¨ä¼˜åŒ–ï¼Œå³æˆ‘ä»¬å¯ä»¥é€‰æ‹©åœ¨åˆé€‚çš„åœ°æ–¹åŠ ä¸Šæ‹¬å·ï¼Œå®ç°å±€éƒ¨çš„é¢„è®¡ç®—ã€‚ä¾‹å¦‚</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>A</mi><mo>â‹…</mo><mo stretchy="false">(</mo><mi>B</mi><mo>â‹…</mo><mi>C</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mi>A</mi><mo>â‹…</mo><mi>B</mi><mo stretchy="false">)</mo><mo>â‹…</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">A \cdot (B \cdot C) = (A \cdot B) \cdot C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span></span></div>
<p>æ‰€è°“çš„åˆ†è€Œæ²»ä¹‹ï¼ˆDivide And Conquerï¼‰æŠ€æœ¯ï¼Œä¹‹æ‰€ä»¥èƒ½å¤ŸåŠ é€Ÿè®¡ç®—ï¼Œå¾ˆå¤šæ—¶å€™æ‰€åˆ©ç”¨çš„ä¹Ÿå°±æ˜¯ç»“åˆå¾‹ï¼Œæ¯”å¦‚è¯´å½’å¹¶æ’åºã€‚</p>
<p>å¹ºå…ƒå¾‹çš„ä½œç”¨åœ¨äºå®ƒä½¿å¾—å·®é‡æˆä¸ºç¬¬ä¸€æ€§çš„æ¦‚å¿µã€‚åœ¨å…·æœ‰å•ä½å…ƒçš„ç³»ç»Ÿä¸­ï¼Œä»»ä½•é‡éƒ½å¯ä»¥è¢«çœ‹ä½œæ˜¯ä¸å•ä½å…ƒä¹‹é—´çš„å·®é‡ã€‚ä¾‹å¦‚</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>A</mi><mo>=</mo><mn>0</mn><mo>+</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">A = 0 + A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">A</span></span></span></span></span></div>
<p>ä»å“²å­¦ä¸Šè¯´ï¼Œç‰©ç†å­¦æ ¼ç‰©ä»¥è‡´çŸ¥ï¼Œæˆ‘ä»¬æ‰€çŸ¥çš„ä¸€åˆ‡éƒ½åªæ˜¯ä¸–ç•Œçš„å˜åŒ–ï¼Œä¸–ç•Œçš„æœ¬ä½“æ˜¯ä¸å¯è§‚æµ‹çš„ã€‚æ‰€è°“çš„å·®é‡ï¼ˆæœ‰æ­£æœ‰è´Ÿï¼‰å®é™…ä¸Šå°±æ˜¯æˆ‘ä»¬çŸ¥è¯†çš„å…¨éƒ¨ã€‚</p>
<p>å¦‚æœæ»¡è¶³å°é—­å¾‹ï¼Œç»“åˆå¾‹å’Œå¹ºå…ƒå¾‹ï¼Œåœ¨æ•°å­¦ä¸Šå°±å¯ä»¥ç§°ä¹‹ä¸º"å¹ºåŠç¾¤"ã€‚å‡½æ•°å¼ç¼–ç¨‹ä¸­è‘—åçš„Monadï¼Œåªä¸è¿‡æ˜¯è‡ªå‡½å­èŒƒç•´ä¸Šçš„å¹ºåŠç¾¤è€Œå·²ã€‚</p>
<p>Monadåªæ˜¯å¹ºåŠç¾¤ï¼Œå®ƒä¸æ»¡è¶³é€†å…ƒå¾‹ã€‚åœ¨ç¾¤çš„å››æ¡å…¬ç†ä¸­ï¼Œæœ€éš¾è¢«äººä»¬æ‰€è®¤è¯†çš„ä¹Ÿæ˜¯é€†å…ƒå¾‹ã€‚ä»è‡ªç„¶æ•°å‘å±•çš„å†å²æ¥çœ‹ï¼Œæ¬§æ´²æ•°å­¦å®¶ç›´åˆ°17ä¸–çºªæ‰æ¥å—è´Ÿæ•°çš„æ¦‚å¿µï¼Œè¿™åæ˜ å‡ºæœ¬è´¨ä¸Šé€†å…ƒçš„æ¦‚å¿µå­˜åœ¨ä»¤äººå›°æƒ‘ä¹‹å¤„ã€‚åœ¨å½“æ—¶çš„äººä»¬çœ‹æ¥ï¼Œè´Ÿæ•°å¯¹åº”äºä¸å­˜åœ¨çš„äº‹ç‰©ï¼Œæ—¢ç„¶å¯¹åº”çš„å¯¹è±¡ä¸å­˜åœ¨ï¼Œè´Ÿæ•°æœ¬èº«æ€ä¹ˆèƒ½å¤Ÿå­˜åœ¨å‘¢ï¼Ÿ</p>
<p>é€†è¿ç®—å¯¹äºå¾ˆå¤šæ•°å­¦æ¨å¯¼æ¥è¯´éƒ½æ˜¯å¿…ä¸å¯å°‘çš„ã€‚ä¾‹å¦‚åœ¨å¼•å…¥è´Ÿæ•°ä¹‹å‰ï¼Œ</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>x</mi><mo>+</mo><mn>5</mn><mo>=</mo><mn>3</mn><mspace width="1em"/><mtext>å’Œ</mtext><mspace width="1em"/><mi>x</mi><mo>+</mo><mn>3</mn><mo>=</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">x + 5 = 3 \quad \text{å’Œ} \quad x + 3 = 5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"/><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">5</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"/><span class="mord">3</span><span class="mspace" style="margin-right:1em;"/><span class="mord text"><span class="mord cjk_fallback">å’Œ</span></span><span class="mspace" style="margin-right:1em;"/><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">3</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">5</span></span></span></span></span></div>
<p>è¿™ä¸¤ä¸ªæ–¹ç¨‹çš„ç»“æ„æ˜¯å®Œå…¨ä¸åŒçš„ï¼Œå®ƒä»¬éœ€è¦ä¸åŒçš„æ±‚è§£æŠ€æœ¯ï¼Œå› æ­¤ä¹Ÿå°±ä¸å¯èƒ½åˆ©ç”¨ç¬¦å·æŠ½è±¡å‡ºäºŒæ¬¡æ–¹ç¨‹çš„æ ‡å‡†å½¢å¼</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>a</mi><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mi>b</mi><mi>x</mi><mo>+</mo><mi>c</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">ax^2 + bx + c = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9474em;vertical-align:-0.0833em;"/><span class="mord mathnormal">a</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"/><span class="mord mathnormal">b</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span></div>
<p>å¼•å…¥è´Ÿæ•°æ‰ä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿä»¥ç»Ÿä¸€çš„æ–¹å¼æå‡ºé—®é¢˜ï¼Œå¹¶ç ”ç©¶é€šç”¨çš„æ±‚è§£æŠ€æœ¯ã€‚</p>
<p>åŸºäºé€†å…ƒå¯ä»¥åœ¨ä»»æ„å…ƒç´ ä¹‹é—´å»ºç«‹å…³è”ï¼Œä»è€Œå®ç°ä»»æ„å…ƒç´ ä¹‹é—´çš„è½¬åŒ–ã€‚è¿™æ ·å…ƒç´ ä¹‹é—´çš„å…³ç³»å°±çªç ´äº†ç®€å•çš„æ•´ä½“-éƒ¨åˆ†æˆ–è€…ä¸€èˆ¬-ç‰¹æ®Šç­‰å…³ç³»çš„èŒƒç•´ï¼Œè¿›å…¥æ›´åŠ æŠ½è±¡çš„ç»“æ„è¿ç®—èŒƒç•´ã€‚è¿™ç§æ€æƒ³ä¸Šçš„å˜é©å¯å‘äº†å“²å­¦ä¸­çš„ç»“æ„ä¸»ä¹‰æ€æ½®ã€‚</p>
<p>åœ¨å“²å­¦ä¸Šï¼Œç»“æ„ä¸»ä¹‰æå‡ºç»“æ„å…·æœ‰ä¸‰ä¸ªè¦ç´ ï¼šæ•´ä½“æ€§ï¼Œè½¬æ¢æ€§ï¼ˆå…·æœ‰è½¬æ¢è§„å¾‹æˆ–æ³•åˆ™ï¼‰ï¼Œè‡ªå¾‹æ€§ï¼ˆè‡ªèº«è°ƒæ•´æ€§ï¼‰ã€‚æ•´ä½“æ€§æ„å‘³ç€ç»“æ„ä¸èƒ½è¢«ç®€å•çš„åˆ‡åˆ†ï¼Œå…¶æ„æˆè¦ç´ é€šè¿‡å†…åœ¨çš„å…³ç³»è¿ç®—å®ç°å¤§èŒƒå›´çš„å…³è”ä¸è½¬æ¢ï¼Œæ•´ä½“ä¹‹æ‰€ä»¥æˆä¸ºæ•´ä½“æ­£æ˜¯ä»¥è½¬æ¢/è¿ç®—çš„ç¬¬ä¸€æ€§ä¸ºä¿è¯çš„ã€‚è¿™ç§è½¬æ¢å¯ä»¥æ˜¯å…±æ—¶çš„ï¼ˆåŒæ—¶å­˜åœ¨çš„å„å…ƒç´ ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯å†æ—¶çš„ï¼ˆå†å²çš„è½¬æ¢æ„é€ è¿‡ç¨‹ï¼‰ï¼Œè¿™æ„å‘³ç€ç»“æ„æ€»è¦æ±‚ä¸€ä¸ªå†…åœ¨çš„æ„é€ è¿‡ç¨‹ï¼Œåœ¨ç‹¬ç«‹äºå¤–éƒ¨ç¯å¢ƒçš„æƒ…å†µä¸‹ç»“æ„å…·æœ‰æŸç§è‡ªç»™è‡ªè¶³çš„ç‰¹æ€§ï¼Œä¸ä¾èµ–äºå¤–éƒ¨æ¡ä»¶å³å¯ç‹¬ç«‹çš„å­˜åœ¨å¹¶ä¿æŒå†…åœ¨çš„æ´»åŠ¨ã€‚è‡ªå¾‹æ€§æ„å‘³ç€ç»“æ„å†…åœ¨çš„è½¬æ¢æ€»æ˜¯ç»´æŒç€æŸç§å°é—­æ€§å’Œå®ˆæ’æ€§ï¼Œç¡®ä¿æ–°çš„æˆåˆ†åœ¨æ— é™åœ°æ„æˆè€Œç»“æ„è¾¹ç•Œå´ä¿æŒç¨³å®šã€‚æ³¨æ„åˆ°è¿™é‡Œå¯¹ç»“æ„çš„è¯„åˆ¤å¹¶ä¸æ˜¯æ¥è‡ªå¤–åœ¨è§„èŒƒå’Œçº¦æŸï¼Œè€Œæ˜¯åŸºäºç»“æ„å†…åœ¨çš„è§„å¾‹æ€§ï¼Œæ‰€å¼ºè°ƒçš„ä¸æ˜¯ç»“æ„å¯¹å¤–éƒ¨æ¡ä»¶çš„é€‚åº”æ€§ï¼Œè€Œæ˜¯è‡ªèº«æ¦‚å¿µä½“ç³»çš„å®Œå¤‡æ€§ã€‚å®é™…ä¸Šï¼Œä¸€ä¸ªæ— æ³•ç›´æ¥å¯¹åº”äºå½“å‰å®é™…ç¯å¢ƒçš„ç»“æ„ä»ç„¶å¯èƒ½å…·æœ‰é‡è¦çš„ä»·å€¼ï¼Œå¹¶åœ¨è§£å†³é—®é¢˜çš„è¿‡ç¨‹ä¸­æ‰®æ¼”ä¸å¯æˆ–ç¼ºçš„è§’è‰²ã€‚åœ¨åˆç†æ€§è¿™ä¸ªè§†è§’ä¸‹ï¼Œæˆ‘ä»¬æ‰€å…³æ³¨çš„ä¸ä»…ä»…æ˜¯å½“å‰çš„ç°å®ä¸–ç•Œï¼Œè€Œæ˜¯æ‰€æœ‰å¯èƒ½çš„ä¸–ç•Œã€‚ç»“æ„ç‹¬ç«‹äºå†…å®¹å­˜åœ¨äºæŠ½è±¡çš„æ•°å­¦ä¸–ç•Œä¸­ï¼Œä¸€ä¸ª"åˆç†"çš„ç»“æ„çš„ä»·å€¼å¿…èƒ½åœ¨å®ƒæ‰€é€‚åº”çš„å…·ä½“ä¸–ç•Œä¸­å‡¸æ˜¾å‡ºæ¥ã€‚</p>
<p>åœ¨å»ºç«‹é¢†åŸŸæ¨¡å‹æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ç»å¸¸ä¼šé—®è¿™ä¸ªæ¨¡å‹æ˜¯å¦æ˜¯å¯¹ä¸šåŠ¡çš„å‡†ç¡®æè¿°ï¼Œæ˜¯å¦å¯ä»¥é€‚åº”éœ€æ±‚çš„å˜æ›´ï¼Œæ˜¯å¦å…è®¸æœªæ¥çš„å„ç§æ‰©å±•ç­‰ç­‰ã€‚ä½†æ˜¯å¦‚æœæ¢ä¸€ä¸ªæ€ç»´æ–¹å‘ï¼Œæˆ‘ä»¬ä¼šå‘ç°è¿™äº›é—®é¢˜éƒ½å‡å®šäº†å­˜åœ¨æœ€é€‚åˆä¸šåŠ¡é¢†åŸŸçš„å”¯ä¸€ç†æƒ³çš„æ¨¡å‹ï¼Œæˆ‘ä»¬æƒ³çŸ¥é“å½“å‰æ¨¡å‹å’Œç†æƒ³çš„æ¨¡å‹ä¹‹é—´ç›¸å·®å¤šè¿œã€‚è¿™äº›é—®é¢˜éƒ½æ˜¯é’ˆå¯¹æœ€ç»ˆç¡®ç«‹çš„æ¨¡å‹è€Œå‘é—®çš„ï¼Œè€Œåœ¨æ¨¡å‹æ„å»ºçš„è¿‡ç¨‹ä¸­ï¼Œé‚£äº›å¯è¢«åˆ©ç”¨çš„ï¼Œå·²å­˜åœ¨çš„æˆ–è€…å¯ä»¥å­˜åœ¨çš„æ¨¡å‹åˆæ˜¯å“ªäº›å‘¢ï¼Ÿæ¯ä¸€ä¸ªä¿¡æ¯æ¨¡å‹éƒ½å¯¹åº”ç€æŸç§è‡ªåŠ¨æ¨ç†æœºï¼Œå¯ä»¥æ¥æ”¶ä¿¡æ¯å¹¶åšä¸€å®šçš„æ¨å¯¼ç»¼åˆå·¥ä½œã€‚ä¸€ä¸ªå¯è¡Œçš„é—®é¢˜æ˜¯ï¼Œå¦‚ä½•æ‰èƒ½æ›´æœ‰æ•ˆçš„åˆ©ç”¨å·²æœ‰çš„ä¿¡æ¯è¿›è¡Œæ¨å¯¼ï¼Œå¦‚ä½•æ¶ˆé™¤å†—ä½™å¹¶å‡å°‘å„ç§è½¬æ¢æˆæœ¬ã€‚æˆ‘ä»¬ç»å¸¸å¯ä»¥è§‚å¯Ÿåˆ°ï¼ŒæŸä¸€ä¿¡æ¯ç»„ç»‡æ–¹å¼æ›´å……åˆ†çš„å‘æ˜äº†ä¿¡æ¯ä¹‹é—´çš„å†…åœ¨å…³è”ï¼ˆè¡¨ç°ä¸ºå®ƒå¯¹ä¿¡æ¯çš„ä½¿ç”¨ä¸æ˜¯ç®€å•çš„å±€åŸŸåŒ–çš„ï¼Œè€Œæ˜¯åœ¨å¤šå¤„å‘ˆç°ä¸ºäº’ç›¸çº ç¼ çš„æ–¹å¼ï¼Œéš¾ä»¥è¢«åˆ†è§£ï¼‰ï¼Œè¿™ç§å†…åœ¨å…³è”è¶³å¤Ÿä¸°å¯Œï¼Œä»¥è‡³äºæˆ‘ä»¬ä¸ä¾èµ–äºå¤–éƒ¨å› ç´ å°±å¯ä»¥ç‹¬ç«‹çš„ç†è§£ã€‚è¿™ç§çº ç¼ åœ¨ä¸€èµ·çš„ä¿¡æ¯å—è‡ªç„¶ä¼šæˆä¸ºæˆ‘ä»¬å»ºæ¨¡çš„å¯¹è±¡ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬ä¸å†å¼ºæ±‚å•ä¸€çš„ã€å¤§è€Œå…¨çš„æ¨¡å‹ï¼Œä½¿å¾—æ¨¡å‹çš„"è¦†ç›–èƒ½åŠ›"ä¸å†æ˜¯æˆ‘ä»¬å…³æ³¨çš„é‡ç‚¹ï¼Œé‚£ä¹ˆå»ºæ¨¡çš„æ€ç»´å›¾å¼å°†ä¼šå‘ç”Ÿæ·±åˆ»çš„è½¬å˜ï¼šæœ€ç»ˆçš„æ¨¡å‹å¯ä»¥ç”±ä¸€ç³»åˆ—å¾®æ¨¡å‹äº¤ç»‡æ„æˆï¼Œæ¯ä¸€ä¸ªå¾®æ¨¡å‹åœ¨æŸç§ç¨‹åº¦ä¸Šè¯´éƒ½æ˜¯è‡ªç»™è‡ªè¶³ã€è‡ªåœ†å…¶è¯´çš„ï¼Œå®ƒçš„å­˜åœ¨åˆç†æ€§ç”±å…¶å†…åœ¨é€»è¾‘çš„è‡ªæ´½æ€§å†³å®šã€‚åœ¨è¿™ç§å›¾å¼ä¸‹ï¼Œæ‰€è°“çš„æ¨¡å‹å°±ç›¸å½“äºæ˜¯å·²ç»ç¡®ç«‹çš„æ•°å­¦å®šç†ï¼Œå¦‚æœå¢åŠ æ–°çš„å‡è®¾ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å·²æœ‰çš„å®šç†æ¨å¯¼å‡ºæ–°çš„å®šç†ï¼Œä¹Ÿå°±æ˜¯å»ºç«‹æ–°çš„æ¨¡å‹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[[Ai Agent] 09 LangGraph è¿›é˜¶ï¼šæ„å»ºå¯æ§ã€å¯åä½œçš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7575090551357669428</link>    <guid>https://juejin.cn/post/7575090551357669428</guid>    <pubDate>2025-11-23T09:28:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575090551357669428" data-draft-id="7575090551357653044" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="[Ai Agent] 09 LangGraph è¿›é˜¶ï¼šæ„å»ºå¯æ§ã€å¯åä½œçš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿ"/> <meta itemprop="keywords" content="LangChain,Agent"/> <meta itemprop="datePublished" content="2025-11-23T09:28:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†ä¼šå‘€"/> <meta itemprop="url" content="https://juejin.cn/user/446878782598644"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            [Ai Agent] 09 LangGraph è¿›é˜¶ï¼šæ„å»ºå¯æ§ã€å¯åä½œçš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/446878782598644/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†ä¼šå‘€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T09:28:09.000Z" title="Sun Nov 23 2025 09:28:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»23åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åšå®¢é…å¥—ä»£ç å‘å¸ƒäº<a href="https://link.juejin.cn?target=https%3A%2F%2Fso.csdn.net%2Fso%2Fsearch%3Fq%3Dgithub%26spm%3D1001.2101.3001.7020" title="https://so.csdn.net/so/search?q=github&amp;spm=1001.2101.3001.7020" target="_blank" ref="nofollow noopener noreferrer">github</a>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FAnnyfee%2Fagent-craft" title="https://github.com/Annyfee/agent-craft" target="_blank" ref="nofollow noopener noreferrer">09 LangGraph è¿›é˜¶</a></p>
<p><strong>æœ¬ç³»åˆ—æ‰€æœ‰åšå®¢å‡é…å¥—Gihubå¼€æºä»£ç ï¼Œå¼€ç®±å³ç”¨ï¼Œä»…éœ€é…ç½®API_KEYã€‚</strong></p>
<p>å¦‚æœè¯¥Agentæ•™å­¦ç³»åˆ—å¸®åˆ°äº†ä½ ï¼Œ<strong>æ¬¢è¿ç»™æˆ‘ä¸ªStarâ­</strong>ï¼</p>
<p><strong>çŸ¥è¯†ç‚¹</strong>ï¼š<strong>Human-in-the-Loopï¼ˆäººå·¥å¹²é¢„ï¼‰ï½œ Graph-as-a-Toolï¼ˆå›¾å³å·¥å…·ï¼‰| Multi-Agent å¤šæ™ºèƒ½ä½“ç¼–æ’</strong></p>
<hr/>
<h2 data-id="heading-0">å‰è¨€ï¼š</h2>
<p>åœ¨08ç¯‡ä¸­ï¼Œæˆ‘ä»¬äº²æ‰‹ç”¨LangGraphå®ç°äº†ä¸€ä¸ª<strong>é€æ˜ã€å¯è¿½è¸ªã€å¸¦è®°å¿†</strong>çš„ReActã€‚å®ƒèƒ½æ€è€ƒã€è°ƒç”¨å·¥å…·å¹¶è®°ä½å†å²ï¼Œçœ‹èµ·æ¥å·²è¶³å¤Ÿå¼ºå¤§ã€‚</p>
<p>ä½†æ˜¯åœ¨ç”Ÿäº§çº§ç¯å¢ƒï¼Œå®ƒç«‹é©¬ä¼šæ’ä¸Šä¸‰å¤§éš¾é¢˜ï¼š</p>
<p><strong>å…¶ä¸€ã€å®‰å…¨å¤±æ§ï¼š</strong></p>
<p>Agentå¯ä»¥è‡ªåŠ¨åˆ é™¤æ•°æ®ã€å‘é€é‚®ä»¶ã€è½¬è´¦ä»˜æ¬¾â€”â€”æ²¡æœ‰ä»»ä½•ç¡®è®¤æœºåˆ¶ï¼Œä¸€æ—¦å‡ºé”™ï¼Œæ— å¯æŒ½å›ã€‚</p>
<p><strong>å…¶äºŒã€å·¥ä½œæµè‡ƒè‚¿ï¼š</strong></p>
<p>ä¸ºäº†è®©Agentå¤„ç†å¤æ‚ä»»åŠ¡ï¼Œæˆ‘ä»¬åœ¨å•ä¸ªèŠ‚ç‚¹é‡Œä¸æ–­å †ç Œé€»è¾‘ï¼šâ€œå…ˆéªŒè¯è¾“å…¥&gt;å†æŸ¥æ•°æ®&gt;ç„¶åè¿›è¡Œä¸šåŠ¡è®¡ç®—&gt;æœ€åæ ¼å¼åŒ–è¾“å‡º...â€</p>
<p>èŠ‚ç‚¹å‡½æ•°è¶Šæ¥è¶Šé•¿ï¼Œæµç¨‹è‡ƒè‚¿ã€‚æ¯æ¬¡ä¿®æ”¹ä¸šåŠ¡é€»è¾‘éƒ½éœ€è¦é‡å†™æ•´ä¸ªå‡½æ•°ï¼Œæµ‹è¯•éš¾åº¦é£™å‡ã€‚</p>
<p><strong>å…¶ä¸‰ã€èŒè´£æ··ä¹±ï¼š</strong></p>
<p>æ‰€æœ‰åŠŸèƒ½éƒ½æŒ¤åœ¨ä¸€ä¸ªAgenté‡Œï¼Œå®ƒæ—¢æ˜¯ç ”ç©¶å‘˜åˆæ˜¯ä¸“å®¶è¿˜æ˜¯å®¢æœï¼Œèº«å…¼æ•°èŒï¼Œæ›´åˆ«æè¿˜è¦åŠ ä¸Šä¸æ–­æ‰©å¤§çš„è®°å¿†ã€‚çŸ­æœŸå°šå¯ï¼Œé•¿æœŸå¿…ç‚¸ã€‚</p>
<p>æ‰€ä»¥ï¼Œæœ¬ç¯‡ä¸ºè¿™ä¸‰å¤§ç—›ç‚¹åˆ†åˆ«æä¾›äº†ä¸‰ç§å¯¹åº”è§£å†³çš„è¿›é˜¶èƒ½åŠ›ï¼š</p>
<p><strong>Human-in-the-Loopï¼ˆäººå·¥å¹²é¢„ï¼‰</strong> ï¼šè§£å†³å®‰å…¨å¤±æ§ï¼›</p>
<p><strong>Graph-as-a-toolï¼ˆå›¾å³å·¥å…·ï¼‰</strong> ï¼šè§£å†³å·¥ä½œæµè‡ƒè‚¿ï¼›</p>
<p><strong>Multi-Agentï¼ˆå¤šæ™ºèƒ½ä½“ç¼–æ’ï¼‰</strong> ï¼šè§£å†³èŒè´£æ··ä¹±ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç”¨è¿™ä¸‰ä¸ªèƒ½åŠ›ï¼Œé€ä¸€æ”»å…‹ä¸Šè¿°çš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€Human-in-the-Loopï¼šè®©Agentå­¦ä¼šâ€œè¯·ç¤ºâ€</h2>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆéœ€è¦äººå·¥å¹²é¢„</h3>
<p>å…¨è‡ªåŠ¨æ‰§è¡Œåœ¨demoè¿è¡Œä¸­å¬èµ·æ¥å¾ˆå¥½ï¼Œä½†åœ¨å®é™…è¿è¡Œä¸­éå¸¸<strong>æå…¶å±é™©</strong>ã€‚</p>
<p>æ¯”å¦‚ç”¨æˆ·è¯´ï¼Œâ€œæŠŠé¡¹ç›®é¢„ç®—é‚®ä»¶å‘ç»™è´¢åŠ¡â€ï¼ŒAgentè‡ªåŠ¨è°ƒç”¨send_email(to="@xx.com",content="xx")ï¼Œå¦‚æœå†…å®¹æœ‰è¯¯ï¼Œé‚®ä»¶ä¸€æ—¦å‘å‡ºæ— æ³•æ’¤å›ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ç§æœºåˆ¶ï¼š<strong>åœ¨æ‰§è¡Œé«˜é£é™©æ“ä½œå‰æš‚åœï¼Œç­‰å¾…äººç±»ç¡®è®¤</strong>ã€‚</p>
<p>Langgraphæä¾›äº†å®Œç¾çš„è§£å†³æ–¹æ¡ˆï¼š<strong>interrupt_before + MemorySaverã€‚</strong></p>
<ul>
<li><strong>MemorySaver</strong>ä¼šå°†å›¾çš„å½“å‰çŠ¶æ€ï¼ˆåŒ…æ‹¬æ¶ˆæ¯å†å²ã€ä¸­é—´å˜é‡ï¼‰æŒä¹…åŒ–ï¼›</li>
<li><strong>interrupt_before=["node_name"]</strong> è¡¨ç¤ºâ€œåœ¨è¿›å…¥è¯¥èŠ‚ç‚¹å‰æš‚åœæ‰§è¡Œâ€ï¼›</li>
<li>æš‚åœåï¼Œç¨‹åºå¯ä»¥æ£€æŸ¥å³å°†æ‰§è¡Œçš„æ“ä½œï¼Œå¹¶è¯¢é—®ç”¨æˆ·æ˜¯å¦ç»§ç»­ï¼›</li>
<li>è‹¥ç”¨æˆ·æ‰¹å‡†ï¼Œè°ƒç”¨<strong>app.stream(Noneï¼Œconfig)</strong> å³å¯ä»æ–­ç‚¹æ¢å¤æ‰§è¡Œ</li>
</ul>
<p>è¿™ç›¸å½“äºä¸ºAgentåŠ äº†ä¸€é“ <strong>â€œå®‰å…¨é”â€</strong> ã€‚</p>
<p>äººä¸ºå®¡æ‰¹çš„æ€è·¯ä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬å‡è®¾ä¸€ä¸ªå‘é‚®ä»¶Agentï¼š</p>
<p>å½“ä½ å‘é‚®ä»¶æ—¶ï¼Œè¯¥Agentä¼šæš‚åœå¹¶æ˜¾ç¤ºå³å°†æ‰§è¡Œçš„æ“ä½œï¼Œç­‰å¾…ä½ è¾“å…¥yesæ‰ç»§ç»­ã€‚</p>
<p>å¤§è‡´æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<p><strong>1. æå‰ç¡®å®šå¥½å“ªä¸ªèŠ‚ç‚¹éœ€è¦â€œå®¡æ‰¹â€ï¼Œåœ¨è¿™é‡Œåœä½ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">app</span> = workflow.compile(
    <span class="hljs-comment"># åœ¨å†…å­˜é‡ŒåšçŠ¶æ€æŒä¹…åŒ–</span>
    <span class="hljs-attr">checkpointer</span>=MemorySaver(),
    <span class="hljs-attr">interrupt_before</span>=[<span class="hljs-string">"tools"</span>] <span class="hljs-comment"># é€‰æ‹©è¦äººå·¥å®¡æ‰¹çš„èŠ‚ç‚¹ -- è´Ÿè´£åœ¨å“ªé‡Œåœï¼Œä¹‹åçš„ä»£ç è´Ÿè´£åœäº†ä¹‹åæ€ä¹ˆåŠ</span>
)
</code></pre>
<p><strong>2. è§¦å‘æ‰§è¡Œï¼Œå¹¶è‡ªåŠ¨æš‚åœ</strong></p>
<p>æ³¨ï¼šæ­¤å¤„ç”¨streamæµå¼ï¼Œæ˜¯åˆ©ç”¨æµå¼APIçš„ä¸­æ–­æœºåˆ¶ï¼Œä½¿å…¶èƒ½å¤Ÿç²¾å‡†åœ¨ç‰¹å®šèŠ‚ç‚¹å‰æš‚åœã€‚</p>
<pre><code class="hljs language-ini" lang="ini">    while 1:
        <span class="hljs-comment"># è§¦å‘å·¥ä½œæµæ‰§è¡Œï¼Œæ¨è¿›åˆ°ä¸‹ä¸€ä¸ªä¸­æ–­ç‚¹æˆ–è‡ªç„¶ç»“æŸ</span>
        for _ in app.stream(inputs,config,<span class="hljs-attr">stream_mode</span>=<span class="hljs-string">"values"</span>): <span class="hljs-comment"># æµå¼æ‰§è¡Œ</span>
        <span class="hljs-comment"># inputsæ³¨å…¥äº‹ä»¶;configç¡®å®šå›è¯id;"values":å®Œæ•´è®°å½•æ¯æ­¥ç»“æœ</span>
            pass   <span class="hljs-comment"># å¿…é¡»è¿­ä»£ç”Ÿæˆå™¨ï¼Œæ‰èƒ½å®é™…æ‰§è¡Œå·¥ä½œæµ</span>
</code></pre>
<p><strong>3. è·å–æš‚åœèŠ‚ç‚¹çš„çŠ¶æ€ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">        <span class="hljs-comment"># è·å–å½“å‰çŠ¶æ€</span>
        <span class="hljs-attr">snapshot</span> = app.get_state(config)
        <span class="hljs-attr">next_tasks</span> = snapshot.next <span class="hljs-comment"># è¿”å›ä¸‹ä¸€æ­¥è¦æ‰§è¡Œçš„èŠ‚ç‚¹ååˆ—è¡¨</span>
</code></pre>
<p><strong>4. å¦‚æœæ²¡æœ‰ä¸‹ä¸€æ­¥ï¼Œè¯´æ˜å·¥ä½œæµå·²ç»“æŸï¼š</strong></p>
<pre><code class="hljs language-python" lang="python">        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> next_tasks:
            final_msg = snapshot.values[<span class="hljs-string">'messages'</span>][-<span class="hljs-number">1</span>]
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f'\næœ€ç»ˆå›å¤:<span class="hljs-subst">{final_msg.content}</span>'</span>)
            <span class="hljs-keyword">break</span>
</code></pre>
<p><strong>5. å¦‚æœä¸‹ä¸€æ­¥æ˜¯éœ€è¦å®¡æ‰¹çš„èŠ‚ç‚¹ï¼Œè¿›è¡Œå®¡æ‰¹ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python">        <span class="hljs-keyword">if</span> <span class="hljs-string">"tools"</span> <span class="hljs-keyword">in</span> next_tasks:
            last_msg = snapshot.values[<span class="hljs-string">'messages'</span>][-<span class="hljs-number">1</span>]
            tool_call = last_msg.tool_calls[<span class="hljs-number">0</span>]
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f'\nâš ï¸ Agentå‡†å¤‡æ‰§è¡Œæ“ä½œï¼š'</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f'    å·¥å…·åç§°ï¼š<span class="hljs-subst">{tool_call[<span class="hljs-string">"name"</span>]}</span>'</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f'    å‚æ•°ï¼š<span class="hljs-subst">{tool_call[<span class="hljs-string">"args"</span>]}</span>'</span>)

            approval = <span class="hljs-built_in">input</span>(<span class="hljs-string">"\nâœ… æ˜¯å¦æ‰¹å‡†æ‰§è¡Œï¼Ÿ(è¾“å…¥ 'yes' ç»§ç»­ï¼Œå…¶ä»–å–æ¶ˆ): "</span>).strip().lower()
            <span class="hljs-keyword">if</span> approval == <span class="hljs-string">"yes"</span>:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">'\n ç»§ç»­æ‰§è¡Œ...'</span>)
                inputs = <span class="hljs-literal">None</span> <span class="hljs-comment"># è¡¨ç¤ºä»æ–­ç‚¹ç»§ç»­ï¼Œæ— æ–°è¾“å…¥</span>
            <span class="hljs-keyword">else</span>:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nâŒ æ“ä½œå·²å–æ¶ˆï¼Œæµç¨‹ç»ˆæ­¢"</span>)
                <span class="hljs-keyword">break</span>
</code></pre>
<p>å®Œæ•´ä»£ç å¦‚ä¸‹:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> config <span class="hljs-keyword">import</span> OPENAI_API_KEY,LANGCHAIN_API_KEY
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI
<span class="hljs-keyword">from</span> langchain.tools <span class="hljs-keyword">import</span> tool
<span class="hljs-keyword">from</span> langchain_core.messages <span class="hljs-keyword">import</span> HumanMessage
<span class="hljs-keyword">from</span> langgraph.graph <span class="hljs-keyword">import</span> StateGraph, MessagesState, START, END
<span class="hljs-keyword">from</span> langgraph.prebuilt <span class="hljs-keyword">import</span> ToolNode
<span class="hljs-keyword">from</span> langgraph.checkpoint.memory <span class="hljs-keyword">import</span> MemorySaver

<span class="hljs-comment"># langsmithè°ƒè¯•</span>
os.environ[<span class="hljs-string">"LANGCHAIN_TRACING_V2"</span>] = <span class="hljs-string">"true"</span> <span class="hljs-comment"># æ€»å¼€å…³ï¼Œå†³å®šå¯ç”¨è¿½è¸ªåŠŸèƒ½</span>
os.environ[<span class="hljs-string">"LANGCHAIN_PROJECT"</span>] = <span class="hljs-string">"human_approval"</span> <span class="hljs-comment"># è‡ªå®šä¹‰é¡¹ç›®å</span>
os.environ[<span class="hljs-string">"LANGCHAIN_API_KEY"</span>] = LANGCHAIN_API_KEY

<span class="hljs-comment"># llmé…ç½®</span>
llm = ChatOpenAI(
    model=<span class="hljs-string">"deepseek-chat"</span>,
    api_key=OPENAI_API_KEY,
    base_url=<span class="hljs-string">"https://api.deepseek.com"</span>
)

<span class="hljs-comment"># å®šä¹‰ä¸€ä¸ªæ•æ„Ÿå·¥å…·ï¼šå‘é€é‚®ä»¶(æ¨¡æ‹Ÿ)</span>
<span class="hljs-meta">@tool</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">send_email</span>(<span class="hljs-params">to, content</span>):
    <span class="hljs-string">"""æ¨¡æ‹Ÿå‘é€é‚®ä»¶"""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">f'é‚®ä»¶å·²å‘é€è‡³<span class="hljs-subst">{to}</span>,å†…å®¹ä¸ºï¼š<span class="hljs-subst">{content}</span>'</span>


<span class="hljs-comment"># å·¥å…·ç»‘å®šåˆ°llm</span>
tools = [send_email]
llm_with_tools = llm.bind_tools(tools)

<span class="hljs-comment"># Nodeå‡½æ•°ä¸EdgeèŠ‚ç‚¹</span>
tool_node = ToolNode(tools)


<span class="hljs-keyword">def</span> <span class="hljs-title function_">call_model</span>(<span class="hljs-params">state: MessagesState</span>):
    response = llm_with_tools.invoke(state[<span class="hljs-string">'messages'</span>])
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"messages"</span>:[response]}


<span class="hljs-keyword">def</span> <span class="hljs-title function_">should_continue</span>(<span class="hljs-params">state: MessagesState</span>):
    last_msg = state[<span class="hljs-string">'messages'</span>][-<span class="hljs-number">1</span>]
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(last_msg, <span class="hljs-string">"tool_calls"</span>) <span class="hljs-keyword">and</span> last_msg.tool_calls:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"tools"</span>
    <span class="hljs-keyword">return</span> END


<span class="hljs-comment"># æ„å»ºåŸºç¡€ReActå›¾</span>
workflow = StateGraph(MessagesState)

workflow.add_node(<span class="hljs-string">"agent"</span>, call_model)
workflow.add_node(<span class="hljs-string">"tools"</span>, tool_node)
workflow.add_edge(START, <span class="hljs-string">"agent"</span>)

workflow.add_conditional_edges(
    <span class="hljs-string">"agent"</span>,
    should_continue,
    {
        <span class="hljs-string">"tools"</span>: <span class="hljs-string">"tools"</span>,
        END: END
    }
)

workflow.add_edge(<span class="hljs-string">"tools"</span>, <span class="hljs-string">"agent"</span>)

app = workflow.<span class="hljs-built_in">compile</span>(
    checkpointer=MemorySaver(),
    interrupt_before=[<span class="hljs-string">"tools"</span>] <span class="hljs-comment"># é€‰æ‹©è¦äººå·¥å®¡æ‰¹çš„èŠ‚ç‚¹ -- è´Ÿè´£åœ¨å“ªé‡Œåœï¼Œä¹‹åçš„ä»£ç è´Ÿè´£åœäº†ä¹‹åæ€ä¹ˆåŠ</span>
)


<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    config = {
        <span class="hljs-string">"configurable"</span>:{<span class="hljs-string">"thread_id"</span>:<span class="hljs-string">"user123"</span>}
    }
    user_input = <span class="hljs-string">"è¯·å¸®æˆ‘ç»™ boss@example.com å‘ä¸€å°é‚®ä»¶ï¼Œå†…å®¹æ˜¯ï¼šä¼šè®®æ¨è¿Ÿåˆ°æ˜å¤©ä¸‹åˆ3ç‚¹ã€‚"</span>

    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç”¨æˆ·è¾“å…¥:"</span>,user_input)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nAgentæ­£åœ¨æ€è€ƒ...\n"</span>)

    <span class="hljs-comment"># åˆè¯†è¾“å…¥</span>
    inputs = {<span class="hljs-string">"messages"</span>:[HumanMessage(content=user_input)]}

    <span class="hljs-keyword">while</span> <span class="hljs-number">1</span>:
        <span class="hljs-comment"># è§¦å‘å·¥ä½œæµæ‰§è¡Œï¼Œæ¨è¿›åˆ°ä¸‹ä¸€ä¸ªä¸­æ–­ç‚¹æˆ–è‡ªç„¶ç»“æŸ</span>
        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> app.stream(inputs,config,stream_mode=<span class="hljs-string">"values"</span>): <span class="hljs-comment"># æµå¼æ‰§è¡Œ</span>
            <span class="hljs-keyword">pass</span>   <span class="hljs-comment"># å¿…é¡»è¿­ä»£ç”Ÿæˆå™¨ï¼Œæ‰èƒ½å®é™…æ‰§è¡Œå·¥ä½œæµ</span>

        <span class="hljs-comment"># è·å–å½“å‰çŠ¶æ€</span>
        snapshot = app.get_state(config)
        next_tasks = snapshot.<span class="hljs-built_in">next</span> <span class="hljs-comment"># è¿”å›ä¸‹ä¸€æ­¥è¦æ‰§è¡Œçš„èŠ‚ç‚¹ååˆ—è¡¨</span>

        <span class="hljs-comment"># å¦‚æœæ²¡æœ‰ä¸‹ä¸€æ­¥ï¼Œè¯´æ˜å·¥ä½œæµå·²ç»“æŸ</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> next_tasks:
            final_msg = snapshot.values[<span class="hljs-string">'messages'</span>][-<span class="hljs-number">1</span>]
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f'\næœ€ç»ˆå›å¤:<span class="hljs-subst">{final_msg.content}</span>'</span>)
            <span class="hljs-keyword">break</span>

        <span class="hljs-comment"># å¦‚æœä¸‹ä¸€æ­¥æ˜¯éœ€è¦å®¡æ‰¹çš„èŠ‚ç‚¹</span>
        <span class="hljs-keyword">if</span> <span class="hljs-string">"tools"</span> <span class="hljs-keyword">in</span> next_tasks:
            last_msg = snapshot.values[<span class="hljs-string">'messages'</span>][-<span class="hljs-number">1</span>]
            tool_call = last_msg.tool_calls[<span class="hljs-number">0</span>]
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f'\nâš ï¸ Agentå‡†å¤‡æ‰§è¡Œæ“ä½œï¼š'</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f'    å·¥å…·åç§°ï¼š<span class="hljs-subst">{tool_call[<span class="hljs-string">"name"</span>]}</span>'</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f'    å‚æ•°ï¼š<span class="hljs-subst">{tool_call[<span class="hljs-string">"args"</span>]}</span>'</span>)

            approval = <span class="hljs-built_in">input</span>(<span class="hljs-string">"\nâœ… æ˜¯å¦æ‰¹å‡†æ‰§è¡Œï¼Ÿ(è¾“å…¥ 'yes' ç»§ç»­ï¼Œå…¶ä»–å–æ¶ˆ): "</span>).strip().lower()
            <span class="hljs-keyword">if</span> approval == <span class="hljs-string">"yes"</span>:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">'\n ç»§ç»­æ‰§è¡Œ...'</span>)
                inputs = <span class="hljs-literal">None</span> <span class="hljs-comment"># è¡¨ç¤ºä»æ–­ç‚¹ç»§ç»­ï¼Œæ— æ–°è¾“å…¥</span>
            <span class="hljs-keyword">else</span>:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nâŒ æ“ä½œå·²å–æ¶ˆï¼Œæµç¨‹ç»ˆæ­¢"</span>)
                <span class="hljs-keyword">break</span>
</code></pre>
<p>æµ‹è¯•ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94400e2d4baa4d6d8dde3f72eb583c02~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YaN5Lya5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764494889&amp;x-signature=APMjehxTKg4h8Vy9gWDCsF2jVKw%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=https%3A%2F%2Fp0-xtjj-private.juejin.cn%2Ftos-cn-i-73owjymdk6%2Fd88b72506ee74a88a0247d9ffde7df6a~tplv-73owjymdk6-jj-mark-v1%3A0%3A0%3A0%3A0%3A5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YaN5Lya5ZGA%3Aq75.awebp%3Fpolicy%3DeyJ2bSI6MywidWlkIjoiNDQ2ODc4NzgyNTk4NjQ0In0%253D%26rk3s%3De9ecf3d6%26x-orig-authkey%3Df32326d3454f2ac7e96d3d06cdbb035152127018%26x-orig-expires%3D1763976315%26x-orig-sign%3DuTg%252B3eWifqZC9AM%252FsazNdzp58lE%253D" target="_blank" title="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/d88b72506ee74a88a0247d9ffde7df6a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YaN5Lya5ZGA:q75.awebp?policy=eyJ2bSI6MywidWlkIjoiNDQ2ODc4NzgyNTk4NjQ0In0%3D&amp;rk3s=e9ecf3d6&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1763976315&amp;x-orig-sign=uTg%2B3eWifqZC9AM%2FsazNdzp58lE%3D" ref="nofollow noopener noreferrer"/></p>
<p>å¦‚æœæˆ‘ä»¬æŠŠå…¶ä¸­çš„user_inputæ”¹ä¸ºbossï¼Œä¸å†™æ˜é‚®ç®±å·ï¼Œå†æµ‹è¯•ä¸€éï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf36a993059f4565a5a531f8e40da4e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YaN5Lya5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764494889&amp;x-signature=DW5vkG1ycbZK51rCevoOJn9ZdNk%3D" alt="" loading="lazy"/></p>
<p>æ­¤æ—¶æ²¡æœ‰è°ƒç”¨å‘é‚®ä»¶å·¥å…·ï¼Œè‡ªç„¶ä¹Ÿä¸ä¼šéœ€è¦äººå·¥ç¡®è®¤äº†ã€‚</p>
<h2 data-id="heading-3">äºŒã€Graph-as-a-Toolï¼šæŠŠå¤æ‚æµç¨‹å°è£…æˆâ€œé»‘ç›’å·¥å…·â€</h2>
<h3 data-id="heading-4"><strong>ä¸ºä»€ä¹ˆéœ€è¦è¿™ç§å°è£…ï¼Ÿ</strong></h3>
<p>å›æƒ³æˆ‘ä»¬ä¹‹å‰çš„ RAG å®ç°ï¼šä¸€ä¸ªå®Œæ•´çš„æ£€ç´¢å¢å¼ºç”Ÿæˆæµç¨‹ï¼Œé€šå¸¸åŒ…å«<strong>å¤šä¸ªæ­¥éª¤</strong>â€”â€”æ–‡æ¡£åŠ è½½ä¸åˆ†å—ã€æ–‡æœ¬å‘é‡åŒ–ã€å­˜å…¥å‘é‡æ•°æ®åº“ã€æ‰§è¡Œæ£€ç´¢ã€ä¸Šä¸‹æ–‡å¢å¼ºã€æœ€ç»ˆç”Ÿæˆç­”æ¡ˆã€‚è¿™äº›æ“ä½œæœ¬èº«å·²è¶³å¤Ÿç¹çã€‚</p>
<p>å¦‚æœç›´æ¥æŠŠè¿™äº›é€»è¾‘å¡è¿›ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œå¹¶ä½œä¸º LangChain Tool æ³¨å†Œç»™ LangGraph ä½¿ç”¨ï¼Œè™½ç„¶æŠ€æœ¯ä¸Šå¯è¡Œï¼Œä½†ä¼šå¸¦æ¥<strong>æ˜æ˜¾é—®é¢˜</strong>ï¼šÂ Â </p>
<ul>
<li><strong>è€¦åˆåº¦é«˜</strong>ï¼šæ‰€æœ‰é€»è¾‘æŒ¤åœ¨ä¸€èµ·ï¼Œéš¾ä»¥å•ç‹¬æµ‹è¯•æˆ–æ›¿æ¢æŸä¸€æ­¥ï¼›</li>
<li><strong>å¯è¯»æ€§å·®</strong>ï¼šä¸»å›¾èŠ‚ç‚¹å˜æˆâ€œå¤§æ³¥çƒâ€ï¼Œå¤±å»æµç¨‹æ¸…æ™°æ€§ï¼›</li>
<li><strong>æ‰©å±•å›°éš¾</strong>ï¼šä¸€æ—¦éœ€æ±‚å˜åŒ–ï¼ˆæ¯”å¦‚åŠ å…¥é‡æ’ã€å¤šè·³æŸ¥è¯¢ã€ç»“æœæ ¡éªŒï¼‰ï¼Œä»£ç è¿…é€Ÿè†¨èƒ€ï¼Œif-else åµŒå¥—å¤±æ§ã€‚</li>
</ul>
<p>æ›´å…³é”®çš„æ˜¯â€”â€”<strong>çœŸå®ä¸–ç•Œçš„æ™ºèƒ½ä»»åŠ¡å¾€å¾€ä¸æ˜¯çº¿æ€§çš„</strong>ã€‚<br/>
ä¾‹å¦‚ï¼ŒRAG å¯èƒ½éœ€è¦æ ¹æ®æ£€ç´¢è´¨é‡å†³å®šæ˜¯å¦é‡æ–°ç”ŸæˆæŸ¥è¯¢ã€æ˜¯å¦å¼•å…¥å¤–éƒ¨çŸ¥è¯†ã€ç”šè‡³è¯·æ±‚äººå·¥ç¡®è®¤ã€‚è¿™ç±»å¸¦<strong>çŠ¶æ€è½¬ç§»ã€æ¡ä»¶åˆ†æ”¯ã€å¾ªç¯åé¦ˆ</strong>çš„é€»è¾‘ï¼Œç”¨ä¼ ç»Ÿå‡½æ•°éš¾ä»¥ä¼˜é›…è¡¨è¾¾ã€‚</p>
<p>è¿™æ—¶ï¼Œ<strong>Graph-as-a-Tool</strong> çš„ä»·å€¼å°±å‡¸æ˜¾å‡ºæ¥äº†ã€‚</p>
<p>å®ƒå…è®¸æˆ‘ä»¬å°†æŸä¸ªå¤æ‚å­ä»»åŠ¡ï¼ˆå¦‚ RAGï¼‰<strong>è‡ªèº«å»ºæ¨¡ä¸ºä¸€ä¸ªç‹¬ç«‹çš„å·¥ä½œæµå›¾ï¼ˆsub-graphï¼‰</strong> ï¼Œå†å°†æ•´ä¸ªå›¾å°è£…æˆä¸€ä¸ªå¯¹å¤–é€æ˜çš„ Toolã€‚å¯¹ä¸» Graph è€Œè¨€ï¼Œå®ƒåªæ˜¯ä¸€ä¸ª<strong>è¯­ä¹‰æ˜ç¡®çš„é»‘ç›’æ¥å£</strong>ï¼›è€Œå†…éƒ¨ï¼Œå´æ˜¯ä¸€ä¸ªç»“æ„æ¸…æ™°ã€èŠ‚ç‚¹åˆ†æ˜ã€æ”¯æŒä¸­æ–­æ¢å¤çš„<strong>å®Œæ•´æµç¨‹</strong>ã€‚</p>
<blockquote>
<p>è¿™æ­£æ˜¯ç°ä»£æ™ºèƒ½ä½“æ¶æ„çš„æ ¸å¿ƒç†å¿µï¼š<strong>åˆ†å±‚æŠ½è±¡ï¼ŒåµŒå¥—ç¼–æ’</strong>ã€‚<br/>
ä¸»å›¾è´Ÿè´£â€œå†³ç­–åšä»€ä¹ˆâ€ï¼Œå­å›¾ï¼ˆä½œä¸º Toolï¼‰è´Ÿè´£â€œå¦‚ä½•åšâ€ã€‚<br/>
è€Œåªæœ‰â€œå›¾â€è¿™ç§ç»“æ„ï¼Œæ‰èƒ½ä¼˜é›…åœ°è¡¨è¾¾è¿™ç§<strong>åˆ†å±‚ã€åµŒå¥—ã€å¸¦åé¦ˆçš„å¤æ‚å·¥ä½œæµ</strong>ã€‚</p>
</blockquote>
<p>å‡è®¾æˆ‘ä»¬è¦åšä¸€ä¸ª<strong>å¯ä»¥è‡ªåŠ¨é‡è¯•çš„APIæœåŠ¡è°ƒç”¨</strong>ã€‚è¯¥æœåŠ¡è°ƒç”¨ä½œä¸ºä¸€ä¸ªå·¥å…·ç»™ä¸»å·¥ä½œæµã€‚è€Œå®ƒè‡ªèº«åˆ™æ˜¯ç”±ä¸€ä¸ªå­å›¾æ„æˆï¼Œé‡Œé¢æ¶µç›–äº†ä¸€ä¸ªå®Œæ•´çš„å­å·¥ä½œæµã€‚</p>
<p>ä¸»è¦ä»£ç æ„å»ºå¦‚ä¸‹ï¼šï¼ˆå®Œæ•´éƒ¨åˆ†githubä¸­å·²æä¾›ï¼‰</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ...ç›¸å…³é…ç½®</span>
<span class="hljs-comment"># æ„å»ºå­å·¥ä½œæµ</span>
<span class="hljs-comment"># 1.å­ä»»åŠ¡çŠ¶æ€</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">RetryState</span>(<span class="hljs-title class_ inherited__">TypedDict</span>):
    query: <span class="hljs-built_in">str</span>
    attempt: <span class="hljs-built_in">int</span>
    result: <span class="hljs-built_in">str</span>

<span class="hljs-comment"># 2.å­å›¾é€»è¾‘ -- æ¨¡æ‹Ÿä¸€ä¸ªå¯èƒ½å¤±è´¥ï¼Œéœ€é‡è¯•çš„APIè°ƒç”¨</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">call_unstable_api</span>(<span class="hljs-params">state:RetryState</span>):
    <span class="hljs-string">"""æ¨¡æ‹Ÿå¶å‘æ€§çš„å¤–éƒ¨æœåŠ¡ï¼Œå¶å‘å¤±è´¥"""</span>
    attempt = state[<span class="hljs-string">"attempt"</span>]
    <span class="hljs-keyword">if</span> attempt == <span class="hljs-number">1</span>:
        <span class="hljs-comment"># ç¬¬ä¸€æ¬¡æ•…æ„å¤±è´¥</span>
        <span class="hljs-keyword">return</span> {<span class="hljs-string">"result"</span>:<span class="hljs-string">"ERRORï¼šæœåŠ¡æš‚æ—¶ä¸å¯ç”¨"</span>,<span class="hljs-string">"attempt"</span>:attempt+<span class="hljs-number">1</span>}
    <span class="hljs-keyword">else</span>:
        <span class="hljs-comment"># ç¬¬äºŒæ¬¡æˆåŠŸ</span>
        <span class="hljs-keyword">return</span> {<span class="hljs-string">"result"</span>:<span class="hljs-string">f"SUCCESSï¼šæˆåŠŸå¤„ç†è¯·æ±‚ï¼š<span class="hljs-subst">{state[<span class="hljs-string">'query'</span>]}</span>"</span>,<span class="hljs-string">"attempt"</span>:attempt+<span class="hljs-number">1</span>}

<span class="hljs-keyword">def</span> <span class="hljs-title function_">should_retry</span>(<span class="hljs-params">state:RetryState</span>):
    <span class="hljs-keyword">if</span> <span class="hljs-string">"ERROR"</span> <span class="hljs-keyword">in</span> state[<span class="hljs-string">"result"</span>] <span class="hljs-keyword">and</span> state[<span class="hljs-string">"attempt"</span>] &lt;= <span class="hljs-number">2</span>: <span class="hljs-comment"># å‡ºç°æŠ¥é”™ä¸”é‡è¯•æ¬¡æ•°å°äº2ï¼Œé‡è¿</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"call_api"</span>
    <span class="hljs-keyword">return</span> END

<span class="hljs-comment"># 3.æ„å»ºå­å›¾å·¥ä½œæµ</span>
retry_workflow = StateGraph(RetryState)
retry_workflow.add_node(<span class="hljs-string">"call_api"</span>,call_unstable_api)
retry_workflow.add_edge(START,<span class="hljs-string">"call_api"</span>)
retry_workflow.add_conditional_edges(
    <span class="hljs-string">"call_api"</span>,
    should_retry,
    {<span class="hljs-string">"call_api"</span>:<span class="hljs-string">"call_api"</span>,END:END}
)
retry_app = retry_workflow.<span class="hljs-built_in">compile</span>()

<span class="hljs-comment"># 4.å°è£…ä¸ºtool(Graph-as-a-Tool)</span>
<span class="hljs-meta">@tool</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_order</span>(<span class="hljs-params">query:<span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""åˆ›å»ºæ–°è®¢å•ï¼Œè‡ªåŠ¨é‡è¯•ä¿éšœæˆåŠŸç‡"""</span>
    result = retry_app.invoke({<span class="hljs-string">"query"</span>:query,<span class="hljs-string">"attempt"</span>:<span class="hljs-number">1</span>,<span class="hljs-string">"result"</span>:<span class="hljs-string">""</span>})
    <span class="hljs-keyword">return</span> result[<span class="hljs-string">"result"</span>]


<span class="hljs-comment"># 5.ä¸»graph</span>
tools = [create_order]
llm_with_tools = llm.bind_tools(tools)
tool_node = ToolNode(tools)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">agent_node</span>(<span class="hljs-params">state:MessagesState</span>):
    response = llm_with_tools.invoke(state[<span class="hljs-string">"messages"</span>])
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"messages"</span>:[response]}

<span class="hljs-keyword">def</span> <span class="hljs-title function_">should_continue</span>(<span class="hljs-params">state:MessagesState</span>):
    last_msg = state[<span class="hljs-string">"messages"</span>][-<span class="hljs-number">1</span>]
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(last_msg,<span class="hljs-string">"tool_calls"</span>) <span class="hljs-keyword">and</span> last_msg.tool_calls:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"tools"</span>
    <span class="hljs-keyword">return</span> END

<span class="hljs-comment"># æ„å»ºä¸»å·¥ä½œæµ</span>
workflow = StateGraph(MessagesState)
workflow.add_node(<span class="hljs-string">"agent"</span>,agent_node)
workflow.add_node(<span class="hljs-string">"tools"</span>,tool_node)
workflow.add_edge(START,<span class="hljs-string">"agent"</span>)
workflow.add_conditional_edges(
    <span class="hljs-string">"agent"</span>,
    should_continue,
    {
        <span class="hljs-string">"tools"</span>: <span class="hljs-string">"tools"</span>,
        END: END
    }
)
workflow.add_edge(<span class="hljs-string">"tools"</span>,<span class="hljs-string">"agent"</span>)

app = workflow.<span class="hljs-built_in">compile</span>()

<span class="hljs-comment"># è¿è¡Œ</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    user_input = <span class="hljs-string">"è¯·åˆ›å»ºä¸€ä¸ªæ–°è®¢å•ï¼šè´­ä¹°ä¸‰æœ¬ä¹¦"</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'ç”¨æˆ·è¾“å…¥:'</span>,user_input)

    inputs = {<span class="hljs-string">"messages"</span>:[
        SystemMessage(content=<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä»»åŠ¡æ‰§è¡ŒåŠ©æ‰‹ã€‚å½“ç”¨æˆ·æå‡ºä»»ä½•éœ€è¦å¤„ç†ã€æ“ä½œæˆ–æ‰§è¡Œçš„è¯·æ±‚æ—¶ï¼Œå¿…é¡»è°ƒç”¨ create_order å·¥å…·æ¥å®Œæˆï¼Œä¸è¦è‡ªè¡Œå›ç­”ç»†èŠ‚"</span>),
        HumanMessage(content=user_input)
    ]}
    result = app.invoke(inputs)

    tool_result = <span class="hljs-literal">None</span>
    <span class="hljs-comment"># åœ¨ä¸»å·¥ä½œæµçš„æ¶ˆæ¯å†å²ä¸­ï¼ŒæŸ¥æ‰¾æœ€è¿‘çš„å·¥å…·æ‰§è¡Œç»“æœ</span>
    <span class="hljs-keyword">for</span> msg <span class="hljs-keyword">in</span> <span class="hljs-built_in">reversed</span>(result[<span class="hljs-string">"messages"</span>]):
        <span class="hljs-keyword">if</span> msg.<span class="hljs-built_in">type</span> == <span class="hljs-string">"tool"</span>: <span class="hljs-comment"># æ‰¾åˆ°ToolMessageç±»å‹æ¶ˆæ¯</span>
            tool_result = msg.content
            <span class="hljs-keyword">break</span>
    <span class="hljs-keyword">if</span> tool_result:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nâœ… ç›´æ¥è·å–å­å›¾è¿”å›å€¼:\n<span class="hljs-subst">{tool_result}</span>"</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nâŒ æœªæ‰§è¡Œä»»ä½•å·¥å…·"</span>)
    final_reply = result[<span class="hljs-string">"messages"</span>][-<span class="hljs-number">1</span>]
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f'\næœ€ç»ˆå›å¤:\n<span class="hljs-subst">{final_reply}</span>'</span>)
</code></pre>
<p>å…¶ä¸­çš„for msg in reversed(result["messages"]) åŒ…å«çš„æ˜¯å®Œæ•´çš„å¯¹è¯å†å²è®°å½•ï¼Œè€Œéå·¥ä½œæµæ‰§è¡Œè¿‡ç¨‹ã€‚ToolNodeä¼šåœ¨å¯¹è¯å†å²ä¸­æ‰§è¡Œç»“æœæ¶ˆæ¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6428e77d1bbd4ebf8e68dac43223d18c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YaN5Lya5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764494889&amp;x-signature=jJK1SruKvKbYOzW1Iu5j84GR0IM%3D" alt="" loading="lazy"/></p>
<p>å¦‚ä¸Šï¼Œä»£ç è¿è¡ŒæˆåŠŸã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬èƒ½<strong>å¯¹åº”ä¸åŒåœºæ™¯çš„toolï¼Œç¼–å†™ä¸åŒçš„graphæ¥åº”å¯¹å¤æ‚çš„é€»è¾‘</strong>ï¼Œè¿™å°±æ˜¯<strong>graph-as-a-toolï¼ˆå›¾å³å·¥å…·ï¼‰</strong> ã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€Multi-Agentç¼–æ’ï¼šè®©å¤šä¸ªä¸“å®¶ååŒå·¥ä½œ</h2>
<h3 data-id="heading-6">1. ç—›ç‚¹ï¼šä¸ºä»€ä¹ˆå• Agent ä¼šå´©æºƒï¼Ÿ</h3>
<p>åœ¨ä¹‹å‰çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¹ æƒ¯é€šè¿‡ System Prompt è®©ä¸€ä¸ª Agent æ‰®æ¼” <strong>â€œå…¨èƒ½ç¥â€</strong> ã€‚ä½†å½“<strong>éœ€æ±‚å˜å¾—å¤æ‚</strong>ï¼ˆä¾‹å¦‚åŒæ—¶éœ€è¦ RAG æ£€ç´¢ç§æœ‰ä¿¡æ¯ã€è”ç½‘æŸ¥æ‰¾æ•°æ®ã€ç”Ÿæˆä»£ç ï¼‰æ—¶ï¼Œè¿™ç§æ¨¡å¼ä¼š<strong>è¿…é€Ÿå´©å¡Œ</strong>ï¼š</p>
<ul>
<li><strong>æ³¨æ„åŠ›åˆ†æ•£</strong>ï¼šPrompt è¿‡é•¿ï¼ŒLLM ç»å¸¸å¿½ç•¥æŒ‡ä»¤ï¼Œè¡¨ç°ä¸ºâ€œå¹»è§‰â€ã€‚</li>
<li><strong>è®°å¿†çˆ†ç‚¸</strong>ï¼šæ‰€æœ‰ä»»åŠ¡å…±ç”¨ä¸€ä¸ª Message Historyï¼Œä¸Šä¸‹æ–‡é£é€Ÿæ‰©å¼ ï¼Œä¸ä»…çƒ§é’±ï¼Œè¿˜å®¹æ˜“è®©æ¨¡å‹â€œè®°æ··â€ä¿¡æ¯ã€‚</li>
<li><strong>å·¥å…·æ··æ‚</strong>ï¼šå‡ åä¸ªå·¥å…·å †åœ¨ä¸€èµ·ï¼Œæ¨¡å‹ææ˜“è¯¯è°ƒï¼ˆä¾‹å¦‚è¯¥æŸ¥æ–‡æ¡£æ—¶å»è”ç½‘ï¼‰ã€‚</li>
<li><strong>è„†å¼±æ€§</strong>ï¼šä¸€æ­¥é”™ï¼Œå…¨ç›˜è¾“ã€‚æ— æ³•é’ˆå¯¹ç‰¹å®šä»»åŠ¡ï¼ˆå¦‚å†™ä»£ç ï¼‰å•ç‹¬ä¼˜åŒ– Promptã€‚</li>
</ul>
<p><strong>è§£æ³•ï¼šå¾®æœåŠ¡åŒ–ï¼ˆMicroservicesï¼‰</strong> å°†ä¸€ä¸ªè¯•å›¾å…¨èƒ½çš„å•æ™ºèƒ½ä½“ï¼Œæ‹†è§£ä¸ºå¤šä¸ª<strong>ä¸“æ³¨ã€è‡ªæ²»ã€å¯ç»„åˆ</strong>çš„å­æ™ºèƒ½ä½“ï¼Œå¹¶é€šè¿‡ç¼–æ’åè°ƒå®Œæˆå¤æ‚ä»»åŠ¡ã€‚</p>
<ul>
<li>è®© <strong>RAG ä¸“å®¶</strong>åªè´Ÿè´£æŸ¥ç§æœ‰çŸ¥è¯†ã€‚</li>
<li>è®© <strong>Web æœç´¢å‘˜</strong>åªè´Ÿè´£æŸ¥å…¬å¼€ä¿¡æ¯ã€‚</li>
<li>è®© <strong>ä»£ç ç”Ÿæˆå™¨</strong>åªå†™ Pythonã€‚</li>
</ul>
<p>è€Œè¿™ä¸€åˆ‡ï¼Œéƒ½éœ€è¦ä¸€ä¸ª**æ€»æ§ï¼ˆSupervisorï¼‰**æ¥è°ƒåº¦ã€‚</p>
<h3 data-id="heading-7">2. åˆå§‹åŒ–ï¼šå·¥å…·é…ç½®ä¸æ ¸å¿ƒçŠ¶æ€å®šä¹‰</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰å·¥å…·å’ŒçŠ¶æ€ã€‚è¿™é‡Œçš„æ ¸å¿ƒæŠ€æœ¯ç‚¹åœ¨äº<strong>çŠ¶æ€ï¼ˆStateï¼‰çš„è®¾è®¡</strong>ã€‚</p>
<p><strong>ä»£ç å®ç°ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ¨¡æ‹Ÿå·¥å…·</span>
<span class="hljs-meta">@tool</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">search_internal_docs</span>(<span class="hljs-params">query:<span class="hljs-built_in">str</span></span>):
    <span class="hljs-string">"""æœç´¢å…¬å¸å†…éƒ¨æ–‡æ¡£è·å–æ”¿ç­–ä¿¡æ¯"""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"æ ¹æ®å…¬å¸æ‰‹å†Œï¼Œå¹´å‡ä¸º15å¤©"</span>

<span class="hljs-meta">@tool</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">search_web</span>(<span class="hljs-params">query:<span class="hljs-built_in">str</span></span>):
    <span class="hljs-string">"""é€šè¿‡æœç´¢å¼•æ“è·å–æœ€æ–°çš„å…¬å¼€ä¿¡æ¯"""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"æ®TechCrunchæŠ¥é“ï¼ŒLangGraph 0.6å·²æ”¯æŒæŒä¹…åŒ–è®°å¿†"</span>

<span class="hljs-meta">@tool</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_code</span>(<span class="hljs-params">requirement:<span class="hljs-built_in">str</span></span>):
    <span class="hljs-string">"""æ ¹æ®éœ€æ±‚ç”Ÿæˆå¯è¿è¡Œçš„Pythonä»£ç """</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"python\nprint('Hello from Code writer!')"</span>


<span class="hljs-comment"># å…±äº«çŠ¶æ€å®šä¹‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AgentState</span>(<span class="hljs-title class_ inherited__">TypedDict</span>):
    messages: Annotated[<span class="hljs-built_in">list</span>,add_messages] <span class="hljs-comment"># è‡ªåŠ¨ç´¯ç§¯å¯¹è¯å†å²</span>
    next_speaker: <span class="hljs-built_in">str</span>
</code></pre>
<h4 data-id="heading-8"><strong>æ·±åº¦è§£è¯»ï¼šä¸ºä»€ä¹ˆä¸ç”¨é¢„ç½®çš„ MessagesStateï¼Ÿ</strong></h4>
<p>LangGraph æä¾›äº†ä¸€ä¸ª<strong>é¢„ç½®ç±»MessagesState</strong>ï¼Œä½†å®ƒåªæœ‰ä¸€ä¸ª messages å­—æ®µã€‚åœ¨å¤šæ™ºèƒ½ä½“ç¼–æ’ä¸­ï¼Œæˆ‘ä»¬éœ€è¦é¢å¤–çš„å­—æ®µÂ next_speakerÂ æ¥å­˜å‚¨ Supervisor çš„å†³ç­–ç»“æœï¼Œå› æ­¤<strong>å¿…é¡»è‡ªå®šä¹‰ TypedDict</strong> ã€‚</p>
<p>å…³äº<strong>Annotated[list, add_messages]</strong> ï¼š</p>
<ul>
<li><strong>Annotated çš„ä½œç”¨</strong>ï¼šåœ¨è¿™é‡Œå®ƒä¸ä»…ä»…æ˜¯ç±»å‹æç¤ºï¼Œå®ƒä¼šè¢« LangGraph æ¡†æ¶è¯»å–ã€‚</li>
<li><strong>add_messages çš„æœºåˆ¶</strong>ï¼šå®ƒçš„ä½œç”¨æ˜¯å‘Šè¯‰æ¡†æ¶ï¼Œå½“èŠ‚ç‚¹è¿”å›æ–°çš„ messages æ—¶ï¼Œä¸è¦ç›´æ¥è¦†ç›–æ—§åˆ—è¡¨ï¼Œè€Œæ˜¯<strong>è¿½åŠ ï¼ˆAppendï¼‰</strong> ã€‚è¿™æ˜¯å®ç°<strong>è‡ªåŠ¨ç´¯ç§¯å¯¹è¯å†å²</strong>çš„å…³é”®ã€‚</li>
</ul>
<h3 data-id="heading-9">3. å®šä¹‰èŠ‚ç‚¹ï¼šä¸“å®¶ä¸æ€»æ§</h3>
<p>è¿™ä¸€æ­¥æˆ‘ä»¬éœ€è¦æ˜ç¡® <strong>â€œå¤§è„‘â€</strong> ä¸ <strong>â€œæ‰‹è„šâ€</strong> çš„åˆ†å·¥ã€‚</p>
<p><strong>ä»£ç å®ç°ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ä¸“å®¶èŠ‚ç‚¹</span>
def rag_expert(state:AgentState):
    <span class="hljs-attr">prompt</span> = <span class="hljs-string">"ä½ æ˜¯å…¬å¸çŸ¥è¯†åº“ä¸“å®¶ï¼ŒåªåŸºäºå†…éƒ¨æ–‡æ¡£å›ç­”é—®é¢˜ã€‚å›ç­”åº”ç®€æ´æ˜äº†ï¼Œç›´æ¥ç»™å‡ºæœ€ç»ˆç»“è®ºã€‚è¯·åœ¨å›ç­”çš„æœ€åä¸€è¡ŒåŠ ä¸Šï¼š(ä»»åŠ¡å·²å®Œæˆ)"</span>
    <span class="hljs-attr">messages</span> = [SystemMessage(content=prompt)]+state[<span class="hljs-string">'messages'</span>]
    <span class="hljs-attr">tools</span> = [search_internal_docs]
    <span class="hljs-attr">response</span> = llm.bind_tools(tools).invoke(messages)
    return {'messages':<span class="hljs-section">[response]</span>}

def web_research(state:AgentState):
    <span class="hljs-attr">prompt</span> = <span class="hljs-string">"ä½ æ˜¯äº’è”ç½‘ç ”ç©¶å‘˜ï¼Œæ“…é•¿ç”¨æœç´¢å¼•æ“è·å–æœ€æ–°å…¬å¼€ä¿¡æ¯ã€‚å›ç­”åº”ç®€æ´æ˜äº†ï¼Œç›´æ¥ç»™å‡ºæœ€ç»ˆç»“è®ºã€‚è¯·åœ¨å›ç­”çš„æœ€åä¸€è¡ŒåŠ ä¸Šï¼š(ä»»åŠ¡å·²å®Œæˆ)"</span>
    <span class="hljs-attr">messages</span> = [SystemMessage(content=prompt)]+state[<span class="hljs-string">'messages'</span>]
    <span class="hljs-attr">tools</span> = [search_web]
    <span class="hljs-attr">response</span> = llm.bind_tools(tools).invoke(messages)
    return {'messages':<span class="hljs-section">[response]</span>}

def code_writer(state:AgentState):
    <span class="hljs-attr">prompt</span> = <span class="hljs-string">"ä½ æ˜¯pythonå·¥ç¨‹å¸ˆï¼Œåªç”Ÿæˆå¯è¿è¡Œä»£ç ï¼Œä¸è§£é‡Šã€‚å›ç­”åº”ç®€æ´æ˜äº†ï¼Œç›´æ¥ç»™å‡ºæœ€ç»ˆç»“è®ºã€‚è¯·åœ¨å›ç­”çš„æœ€åä¸€è¡ŒåŠ ä¸Šï¼š(ä»»åŠ¡å·²å®Œæˆ)"</span>
    <span class="hljs-attr">messages</span> = [SystemMessage(content=prompt)]+state[<span class="hljs-string">'messages'</span>]
    <span class="hljs-attr">tools</span> = [generate_code]
    <span class="hljs-attr">response</span> = llm.bind_tools(tools).invoke(messages)
    return {'messages':<span class="hljs-section">[response]</span>}

<span class="hljs-comment"># æ€»æ§èŠ‚ç‚¹</span>
def supervisor(state:AgentState):
    <span class="hljs-attr">supervisor_prompt</span> = <span class="hljs-string">"""
        ä½ æ˜¯ä¸€ä¸ªä»»åŠ¡åè°ƒå‘˜ã€‚ä½ çš„ç›®æ ‡æ˜¯ç®¡ç†ä¸“å®¶æ¥è§£å†³ç”¨æˆ·çš„é—®é¢˜ã€‚

        å½“å‰å¯¹è¯éœ€è¦ä»¥ä¸‹ä¸“å®¶å‚ä¸ï¼š
        - rag_expertï¼šæ¶‰åŠå…¬å¸æ”¿ç­–ã€å†…éƒ¨æµç¨‹
        - web_researchï¼šæ¶‰åŠå¤–éƒ¨æ–°é—»ã€å…¬å¼€æ•°æ®
        - code_writerï¼šéœ€è¦ç”Ÿæˆä»£ç 

        ã€å†³ç­–é€»è¾‘ã€‘
        1. **æ£€æŸ¥å†å²è®°å½•**ï¼šå…ˆçœ‹ä¸Šä¸€ä¸ªå›å¤æ˜¯å¦å·²ç»å®Œæ•´å›ç­”äº†ç”¨æˆ·çš„åˆå§‹é—®é¢˜ã€‚
        2. **å¦‚æœå·²ç»å›ç­”å®Œæ¯•**ï¼šå¿…é¡»è¾“å‡º 'FINISH'ã€‚
        3. **å¦‚æœå°šæœªå›ç­”æˆ–éœ€è¦è¡¥å……**ï¼šæ ¹æ®å½“å‰ç¼ºå°‘çš„æ­¥éª¤ï¼Œé€‰æ‹©ä¸‹ä¸€ä¸ªæœ€åˆé€‚çš„ä¸“å®¶ã€‚

        è¯·åªè¾“å‡ºä¸“å®¶åå­—æˆ– 'FINISH'ï¼Œä¸è¦è¾“å‡ºä»»ä½•å…¶ä»–è§£é‡Šã€‚
        """</span>
    <span class="hljs-attr">messages</span> = [SystemMessage(content=supervisor_prompt)]+state[<span class="hljs-string">'messages'</span>]
    <span class="hljs-attr">response</span> = llm.invoke(messages)
    <span class="hljs-attr">next_speaker</span> = response.content.strip()
    return {"next_speaker":next_speaker}
</code></pre>
<p><strong>é€»è¾‘è¦ç‚¹ï¼š</strong></p>
<ul>
<li><strong>ä¸“å®¶èŠ‚ç‚¹</strong>ï¼šéµå¾ª ReAct æ¨¡å¼ã€‚å¿…é¡»ä½¿ç”¨ bind_toolsÂ å°†å·¥å…·ç»‘å®šç»™ LLMï¼Œå¦åˆ™æ¨¡å‹æ— æ³•è§¦å‘å·¥å…·è°ƒç”¨ã€‚æˆ‘ä»¬è¿˜åœ¨ Prompt ä¸­åŠ å…¥äº†â€œä»»åŠ¡å·²å®Œæˆâ€çš„æ ‡è®°ï¼Œè¾…åŠ©æ€»æ§åˆ¤æ–­ã€‚</li>
<li><strong>æ€»æ§èŠ‚ç‚¹</strong>ï¼šä¸æ‰§è¡Œå…·ä½“ä»»åŠ¡ï¼Œåªè´Ÿè´£ <strong>â€œçœ‹â€</strong> ã€‚å®ƒçš„è¾“å‡ºç›´æ¥å†³å®šäº† next_speaker çš„å€¼ï¼Œä»è€Œæ§åˆ¶æ•´ä¸ªå›¾çš„æµå‘ã€‚</li>
</ul>
<h3 data-id="heading-10">4. æ„å»ºåä½œå›¾ï¼šæ ¸å¿ƒæ¶æ„é€»è¾‘</h3>
<p>è¿™æ˜¯æœ¬ç« æœ€å¤æ‚çš„éƒ¨åˆ†ã€‚æˆ‘ä»¬éœ€è¦é€šè¿‡ StateGraphÂ å°†èŠ‚ç‚¹ç»‡æˆä¸€å¼ ç½‘ã€‚</p>
<p><strong>ä»£ç å®ç°ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è·¯ç”±å‡½æ•°å®šä¹‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">route_supervisor</span>(<span class="hljs-params">state:AgentState</span>):
    <span class="hljs-keyword">if</span> state[<span class="hljs-string">"next_speaker"</span>]==<span class="hljs-string">"FINISH"</span>:
        <span class="hljs-keyword">return</span> END
    <span class="hljs-keyword">return</span> state[<span class="hljs-string">"next_speaker"</span>]

<span class="hljs-keyword">def</span> <span class="hljs-title function_">should_continue</span>(<span class="hljs-params">state:AgentState</span>):
    last_msg = state[<span class="hljs-string">"messages"</span>][-<span class="hljs-number">1</span>]
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(last_msg,<span class="hljs-string">"tool_calls"</span>) <span class="hljs-keyword">and</span> last_msg.tool_calls:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"tools"</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"supervisor"</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">route_after_tool</span>(<span class="hljs-params">state:AgentState</span>):
    <span class="hljs-comment"># å·¥å…·æ‰§è¡Œå®Œåï¼Œé€šè¿‡next_speakerçŸ¥é“æ˜¯è°è°ƒç”¨çš„ï¼Œè·¯ç”±å›å»</span>
    <span class="hljs-keyword">return</span> state[<span class="hljs-string">"next_speaker"</span>]


<span class="hljs-comment"># æ·»åŠ å·¥å…·èŠ‚ç‚¹</span>
tools = [search_internal_docs,search_web,generate_code]
tool_node = ToolNode(tools)


<span class="hljs-comment"># æ„å»ºåä½œå›¾</span>
workflow = StateGraph(AgentState)

<span class="hljs-comment"># 1. æ·»åŠ èŠ‚ç‚¹</span>
workflow.add_node(<span class="hljs-string">"supervisor"</span>,supervisor)
workflow.add_node(<span class="hljs-string">"rag_expert"</span>,rag_expert)
workflow.add_node(<span class="hljs-string">"web_research"</span>,web_research)
workflow.add_node(<span class="hljs-string">"code_writer"</span>,code_writer)
workflow.add_node(<span class="hljs-string">"tools"</span>,tool_node)


<span class="hljs-comment"># 2. æ€»æ§å›è·¯</span>
workflow.add_edge(START,<span class="hljs-string">"supervisor"</span>)
workflow.add_conditional_edges(<span class="hljs-string">"supervisor"</span>,route_supervisor)

<span class="hljs-comment"># 3. ä¸“å®¶èŠ‚ç‚¹çš„ReActå¾ªç¯</span>
<span class="hljs-keyword">for</span> member <span class="hljs-keyword">in</span> [<span class="hljs-string">"rag_expert"</span>,<span class="hljs-string">"web_research"</span>,<span class="hljs-string">"code_writer"</span>]: <span class="hljs-comment"># ä¸ºæ¯ä¸ªä¸“å®¶æ·»åŠ æ¡ä»¶è¾¹ï¼šå†³å®šæ˜¯å»æ‰§è¡Œå·¥å…·è¿˜æ˜¯å›æ€»æ§</span>
    workflow.add_conditional_edges(
        member,
        should_continue,
        {<span class="hljs-string">"tools"</span>:<span class="hljs-string">"tools"</span>,<span class="hljs-string">"supervisor"</span>:<span class="hljs-string">"supervisor"</span>}
    )

<span class="hljs-comment"># 4.å·¥å…·èŠ‚ç‚¹é—­ç¯</span>
workflow.add_conditional_edges( <span class="hljs-comment"># å·¥å…·æ‰§è¡Œå®Œï¼Œæ ¹æ®next_speakerè·¯ç”±å›åŸæ¥çš„ä¸“å®¶</span>
    <span class="hljs-string">"tools"</span>,
    route_after_tool
)

app = workflow.<span class="hljs-built_in">compile</span>()
</code></pre>
<h4 data-id="heading-11"><strong>æŠ€æœ¯æ·±æŒ–ï¼šç†è§£å›¾æ„å»ºä¸­çš„ä¸‰ä¸ªå…³é”®ç‚¹</strong></h4>
<p><strong>ç¬¬ä¸€ç‚¹ï¼šæ¡ä»¶è¾¹çš„ä¸¤ç§å†™æ³•ï¼ˆåŠ¨æ€ vs é™æ€ï¼‰</strong></p>
<ul>
<li>
<p><strong>ç›´æ¥è¿”å›ï¼ˆåŠ¨æ€è·¯ç”±ï¼‰</strong> ï¼šå¦‚ route_supervisor ã€‚<strong>å‡½æ•°ç›´æ¥è¿”å›èŠ‚ç‚¹åç§°å­—ç¬¦ä¸²</strong>ã€‚é€‚ç”¨äº<strong>ç›®æ ‡èŠ‚ç‚¹ä¸ç¡®å®š</strong>çš„æƒ…å†µï¼ˆSupervisor å¯èƒ½è¿”å›ä»»ä½•ä¸“å®¶çš„åå­—ï¼‰ã€‚</p>
<pre><code class="hljs language-perl" lang="perl">def route_supervisor(<span class="hljs-keyword">state</span>:AgentState):
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">state</span>[<span class="hljs-string">"next_speaker"</span>]==<span class="hljs-string">"FINISH"</span>:
        <span class="hljs-keyword">return</span> END
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">state</span>[<span class="hljs-string">"next_speaker"</span>]

<span class="hljs-comment"># ...</span>

workflow.add_conditional_edges(<span class="hljs-string">"supervisor"</span>,route_supervisor)
</code></pre>
</li>
<li>
<p><strong>å­—å…¸æ˜ å°„ï¼ˆé™æ€ç»“æ„ï¼‰</strong> ï¼šå¦‚ should_continue ã€‚è™½ç„¶å‡½æ•°è¿”å›çš„æ˜¯ "tools"ï¼Œä½†æˆ‘ä»¬åœ¨ add_conditional_edges ä¸­<strong>æ˜¾å¼å®šä¹‰</strong>äº† {"tools": "tools"} çš„<strong>æ˜ å°„</strong>ã€‚è¿™é€‚ç”¨äº<strong>ç»“æ„å›ºå®š</strong>çš„åœºæ™¯ï¼ˆä¸‰é€‰ä¸€æˆ–äºŒé€‰ä¸€ï¼‰ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">should_continue</span>(<span class="hljs-params">state:AgentState</span>):
    last_msg = state[<span class="hljs-string">"messages"</span>][-<span class="hljs-number">1</span>]
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(last_msg,<span class="hljs-string">"tool_calls"</span>) <span class="hljs-keyword">and</span> last_msg.tool_calls:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"tools"</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"supervisor"</span>

<span class="hljs-comment"># ...</span>

<span class="hljs-keyword">for</span> member <span class="hljs-keyword">in</span> [<span class="hljs-string">"rag_expert"</span>,<span class="hljs-string">"web_research"</span>,<span class="hljs-string">"code_writer"</span>]: <span class="hljs-comment"># ä¸ºæ¯ä¸ªä¸“å®¶æ·»åŠ æ¡ä»¶è¾¹ï¼šå†³å®šæ˜¯å»æ‰§è¡Œå·¥å…·è¿˜æ˜¯å›æ€»æ§</span>
    workflow.add_conditional_edges(
        member,
        should_continue,
        {<span class="hljs-string">"tools"</span>:<span class="hljs-string">"tools"</span>,<span class="hljs-string">"supervisor"</span>:<span class="hljs-string">"supervisor"</span>}
    )
</code></pre>
</li>
</ul>
<p><strong>ç¬¬äºŒç‚¹ï¼šFor å¾ªç¯çš„æœ¬è´¨ï¼ˆæ„å»ºæ—¶ vs è¿è¡Œæ—¶ï¼‰</strong> ä»£ç ä¸­çš„ for member in [...] å¹¶ä¸æ˜¯è®©ç¨‹åºè¿è¡Œæ—¶è½®æµè·‘ä¸€éä¸“å®¶ã€‚ è¿™æ˜¯<strong>æ„å»ºé˜¶æ®µï¼ˆBuild Timeï¼‰</strong> çš„ä»£ç ã€‚å®ƒçš„ä½œç”¨æ˜¯ <strong>â€œæ‰¹é‡æ³¨å†Œâ€</strong> ï¼šæˆ‘ä»¬å‘Šè¯‰å›¾ï¼Œè¿™ä¸‰ä¸ªä¸“å®¶èŠ‚ç‚¹ï¼Œå®ƒä»¬â€œå‡ºé—¨â€åçš„è§„åˆ™æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼ˆè¦ä¹ˆå»ä¿®å·¥å…·ï¼Œè¦ä¹ˆå›æ€»æ§ï¼‰ã€‚è¿™<strong>é¿å…äº†é‡å¤</strong>å†™ä¸‰éç›¸åŒçš„ add_conditional_edges ä»£ç ã€‚</p>
<p><strong>ç¬¬ä¸‰ç‚¹ï¼šadd_conditional_edges çš„å›ç¯ç‰¹æ€§</strong> è¿™ä¸€è¡Œä»£ç ç›¸å½“äºç»™èŠ‚ç‚¹å®‰è£…äº†ä¸€ä¸ªæ°¸ä¹…ç”Ÿæ•ˆçš„ <strong>â€œå•å‘ä»»æ„é—¨â€</strong> ã€‚</p>
<ul>
<li>
<p><strong>å›ç¯</strong>ï¼šä¸€æ—¦å®šä¹‰äº† <strong>Expert -&gt; check -&gt; Tools</strong> ï¼Œä»¥åæ— è®ºæµç¨‹ç¬¬å‡ æ¬¡å›åˆ° Expert èŠ‚ç‚¹ï¼Œç¦»å¼€æ—¶éƒ½ä¼šè§¦å‘è¿™ä¸ªæ£€æŸ¥ã€‚</p>
</li>
<li>
<p><strong>å•å‘æ€§</strong>ï¼šè™½ç„¶æˆ‘ä»¬åœ¨é€»è¾‘ä¸Šå®ç°äº† Expert -&gt; check -&gt; Tools Â çš„é—­ç¯ï¼Œä½†è¿™ä¸ªé—­ç¯æ˜¯ç”±ä¸¤æ¡å•å‘è¾¹æ‹¼å‡‘çš„ï¼š</p>
<ol>
<li>Expert -&gt; Toolsï¼ˆé€šè¿‡Â should_continueÂ  å®šä¹‰ï¼‰</li>
<li>Tools -&gt; Expertï¼ˆé€šè¿‡ route_after_tool å®šä¹‰ï¼Œå¿…é¡»æ˜¾å¼å†™å‡ºæ¥ï¼Œå¦åˆ™ç¨‹åºä¼šå¡æ­»åœ¨ Tools èŠ‚ç‚¹ï¼‰ã€‚</li>
</ol>
</li>
</ul>
<h3 data-id="heading-12">5. æµ‹è¯•è¿è¡Œ</h3>
<p>æœ€åï¼Œé€šè¿‡æ‰“å°æ—¥å¿—æ¥éªŒè¯å¤šæ™ºèƒ½ä½“çš„åä½œæµã€‚</p>
<p><strong>ä»£ç å®ç°ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æµ‹è¯•è¿è¡Œ</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    user_input = <span class="hljs-string">"å…¬å¸å¹´å‡å¤šå°‘å¤©"</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç”¨æˆ·æé—®:"</span>,user_input)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'\nå¼€å§‹å¤šæ™ºèƒ½ä½“åä½œ...\n'</span>)

    inputs = {<span class="hljs-string">"messages"</span>:[HumanMessage(content=user_input)]}
    <span class="hljs-comment"># appæ˜¯ç¼–è¯‘å¥½çš„å›¾ï¼Œstream()ä¼šè®©å›¾å¼€å§‹è¿è½¬ï¼Œå¹¶è¿”å›ä¸€ä¸ªç”Ÿæˆå™¨</span>
    <span class="hljs-comment"># å›¾æ¯æ‰§è¡Œå®Œä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±ä¼šäº§å‡ºä¸€ä¸ªstepå­—å…¸</span>
    <span class="hljs-keyword">for</span> step <span class="hljs-keyword">in</span> app.stream(inputs):
        <span class="hljs-comment"># å› ä¸ºstepæ˜¯ä¸ªå­—å…¸ï¼Œæ‰€ä»¥éœ€è¦æ‹†åŒ…æ‹¿åˆ° èŠ‚ç‚¹å(Node) ä¸ è¾“å‡ºå†…å®¹(output)</span>
        <span class="hljs-keyword">for</span> node,output <span class="hljs-keyword">in</span> step.items():
            <span class="hljs-comment"># æœ‰å·¥å…·/ä¸“å®¶å›å¤</span>
            <span class="hljs-keyword">if</span> <span class="hljs-string">"messages"</span> <span class="hljs-keyword">in</span> output:
                msg = output[<span class="hljs-string">"messages"</span>][-<span class="hljs-number">1</span>]
                <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(msg,<span class="hljs-string">"tool_calls"</span>) <span class="hljs-keyword">and</span> msg.tool_calls:
                    call = msg.tool_calls[<span class="hljs-number">0</span>]
                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ã€<span class="hljs-subst">{node}</span>ã€‘è°ƒç”¨å·¥å…· <span class="hljs-subst">{call[<span class="hljs-string">'name'</span>]}</span>(<span class="hljs-subst">{call[<span class="hljs-string">'args'</span>]}</span>)"</span>)
                <span class="hljs-keyword">else</span>:
                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ã€<span class="hljs-subst">{node}</span>ã€‘å›å¤ï¼š<span class="hljs-subst">{msg.content}</span>"</span>)
            <span class="hljs-comment"># supervisoråˆšåšå®Œå†³ç­–ï¼Œç¡®å®šä¸‹ä¸ªå‘è¨€äºº</span>
            <span class="hljs-keyword">elif</span> <span class="hljs-string">"next_speaker"</span> <span class="hljs-keyword">in</span> output:
                speaker = output[<span class="hljs-string">"next_speaker"</span>]
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ã€Supervisorã€‘æŒ‡å®šä¸‹ä¸€ä½å‘è¨€äººï¼š<span class="hljs-subst">{speaker}</span>"</span>)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e4265a3b4b04e14b4570b348dbbacab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YaN5Lya5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764494889&amp;x-signature=BUH5JAHL6n66jv%2FM06zoSKG3EfI%3D" alt="" loading="lazy"/></p>
<p>é€šè¿‡è¿™æ®µæ—¥å¿—ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°è§‚æµ‹åˆ°ç³»ç»Ÿçš„<strong>è¿è¡Œè„‰ç»œ</strong>ï¼š</p>
<blockquote>
<p>Supervisor è¯†åˆ«æ„å›¾ -&gt; æŒ‡æ´¾ RAG ä¸“å®¶ -&gt; RAG ä¸“å®¶å‘ç°éœ€è¦æŸ¥åº“ -&gt; è°ƒç”¨ Tool -&gt;</p>
<p>Tool è¿”å›ç»“æœÂ  -&gt; RAG ä¸“å®¶ç”Ÿæˆæœ€ç»ˆå›å¤ -&gt; Supervisor ç¡®è®¤ä»»åŠ¡å®Œæˆ (FINISH)ã€‚</p>
</blockquote>
<p>å…¶å·¥ä½œæµå¤§è‡´å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-scss" lang="scss">           (å¼€å§‹)
             |
             v
   +--&gt; <span class="hljs-selector-attr">[ ğŸ§  æ€»æ§ Supervisor ]</span> <span class="hljs-built_in">--</span>(å®Œæˆ)--&gt; (( END ))
   |         |
   |         | (<span class="hljs-number">1</span>. æŒ‡æ´¾)
   |         v
   |    <span class="hljs-selector-attr">[ ğŸ‘· ä¸“å®¶ (Workers) ]</span> &lt;====&gt; <span class="hljs-selector-attr">[ ğŸ› ï¸ å·¥å…· (Tools) ]</span>
   |         |        ^         (<span class="hljs-number">2</span>. å¹²æ´»å¾ªç¯)
   |         |        |
   +---------+--------+
      (<span class="hljs-number">3</span>. æ±‡æŠ¥ç»“æœ)
</code></pre>
<p><strong>æ€»ç»“ï¼šä¸‰ç§èƒ½åŠ›å¦‚ä½•ç»„åˆï¼Ÿ</strong></p>

























<table><thead><tr><th>èƒ½åŠ›</th><th>è§£å†³çš„é—®é¢˜</th><th>å…¸å‹åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Human-in-the-Loop</strong></td><td>ä¸å¯é€†æ“ä½œçš„å®‰å…¨é£é™©</td><td>å‘é‚®ä»¶ã€åˆ æ•°æ®ã€å®¡æ‰¹æµ</td></tr><tr><td><strong>Graph-as-a-Tool</strong></td><td>å¤æ‚å†…éƒ¨é€»è¾‘çš„ç»´æŠ¤éš¾é¢˜</td><td>å¸¦é‡è¯•çš„ API è°ƒç”¨ã€å¤šæ­¥éªŒè¯</td></tr><tr><td><strong>Multi-Agent ç¼–æ’</strong></td><td>å• Agent èŒè´£çˆ†ç‚¸</td><td>ä¼šè®®çºªè¦ã€æ•…éšœæ’æŸ¥ã€éœ€æ±‚åˆ†æ</td></tr></tbody></table>
<h2 data-id="heading-13">å››ã€ç»¼åˆå®æˆ˜</h2>
<p>åœ¨å‰ä¸‰ç« ä¸­ï¼Œæˆ‘ä»¬åˆ†åˆ«æŒæ¡äº† <strong>å®‰å…¨é”ã€ é»‘ç›’å·¥å…·ã€ å›¢é˜Ÿç®¡ç†</strong>ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬ä¸å†çº¸ä¸Šè°ˆå…µï¼Œè€Œæ˜¯å°†è¿™ä¸‰è€…èä¸ºä¸€ä½“ï¼Œæ„å»ºä¸€ä¸ª<strong>ç”Ÿäº§çº§æ¶æ„çš„ITè¿ç»´æ™ºèƒ½ä½“</strong>ã€‚</p>
<h3 data-id="heading-14">ä¸šåŠ¡åœºæ™¯è®¾å®š</h3>
<p>æˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªæœåŠ¡å™¨æ•…éšœæ’æŸ¥åœºæ™¯ï¼š</p>
<p><strong>æ€»æ§(Supervisor)</strong> ï¼šè´Ÿè´£æ¥æ”¶æŠ¥è­¦ï¼Œ<strong>è°ƒåº¦ä¸“å®¶</strong>ï¼›</p>
<p><strong>æ—¥å¿—ä¸“å®¶(Log Expert)</strong> ï¼šè´Ÿè´£åˆ†ææœåŠ¡å™¨æ—¥å¿—ã€‚å®ƒæ‰‹ä¸­çš„å·¥å…· analyze_logs æ˜¯ä¸€ä¸ª<strong>å­å›¾</strong>ï¼ŒåŒ…å«SSHè¿æ¥é‡è¯•ã€æ—¥å¿—æå–ç­‰å¤æ‚é€»è¾‘ï¼ˆæ¨¡æ‹Ÿç½‘ç»œä¸ç¨³å®šçš„çœŸå®ç¯å¢ƒï¼‰ã€‚</p>
<p><strong>è¿ç»´ä¸“å®¶(Ops Expert)</strong> ï¼šè´Ÿè´£æ‰§è¡Œä¿®å¤ã€‚å®ƒæ‰‹ä¸­çš„å·¥å…· restart_services æ˜¯<strong>æ•æ„Ÿæ“ä½œ</strong>ï¼Œå¿…é¡»ç»è¿‡äººå·¥å®¡æ‰¹ï¼ˆHuman-in-the-Loopï¼‰ã€‚</p>
<h3 data-id="heading-15">ä»£ç å®ç°</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> config <span class="hljs-keyword">import</span> OPENAI_API_KEY,LANGCHAIN_API_KEY
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI
<span class="hljs-keyword">from</span> langchain.tools <span class="hljs-keyword">import</span> tool
<span class="hljs-keyword">from</span> langchain_core.messages <span class="hljs-keyword">import</span> HumanMessage,SystemMessage
<span class="hljs-keyword">from</span> langgraph.graph <span class="hljs-keyword">import</span> StateGraph,MessagesState,START,END
<span class="hljs-keyword">from</span> langgraph.prebuilt <span class="hljs-keyword">import</span> ToolNode
<span class="hljs-keyword">from</span> langgraph.checkpoint.memory <span class="hljs-keyword">import</span> MemorySaver
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> TypedDict,Annotated
<span class="hljs-keyword">from</span> langgraph.graph.message <span class="hljs-keyword">import</span> add_messages

<span class="hljs-comment"># LangSmithè°ƒè¯•</span>
os.environ[<span class="hljs-string">"LANGCHAIN_TRACING_V2"</span>] = <span class="hljs-string">"true"</span> <span class="hljs-comment"># æ€»å¼€å…³ï¼Œå†³å®šå¯ç”¨è¿½è¸ªåŠŸèƒ½</span>
os.environ[<span class="hljs-string">"LANGCHAIN_PROJECT"</span>] = <span class="hljs-string">"supervisor_agent_ops_system"</span> <span class="hljs-comment"># è‡ªå®šä¹‰é¡¹ç›®å</span>
os.environ[<span class="hljs-string">"LANGCHAIN_API_KEY"</span>] = LANGCHAIN_API_KEY

llm = ChatOpenAI(
    model=<span class="hljs-string">"deepseek-chat"</span>,
    api_key=OPENAI_API_KEY,
    base_url=<span class="hljs-string">"https://api.deepseek.com"</span>
)

<span class="hljs-comment"># === ä¸€ã€Graph-as-a-Tool ===</span>
<span class="hljs-comment"># === æ¨¡æ‹Ÿä¸€ä¸ªä¸ç¨³å®šçš„SSHæ—¥å¿—æŸ¥è¯¢è¿‡ç¨‹ ===</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SSHState</span>(<span class="hljs-title class_ inherited__">TypedDict</span>):
    target_ip: <span class="hljs-built_in">str</span>
    attempt: <span class="hljs-built_in">int</span>
    logs: <span class="hljs-built_in">str</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">connect_ssh</span>(<span class="hljs-params">state:SSHState</span>):
    <span class="hljs-string">"""æ¨¡æ‹ŸSSHè¿æ¥ï¼Œç¬¬ä¸€æ¬¡è¿æ¥å¿…å®šè¶…æ—¶"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f'    [å­å›¾]æ­£åœ¨å°è¯•è¿æ¥æœåŠ¡å™¨<span class="hljs-subst">{state[<span class="hljs-string">"target_ip"</span>]}</span>(ç¬¬<span class="hljs-subst">{state[<span class="hljs-string">"attempt"</span>]}</span>æ¬¡)'</span>)
    <span class="hljs-keyword">if</span> state[<span class="hljs-string">'attempt'</span>] == <span class="hljs-number">1</span>:
        <span class="hljs-keyword">return</span> {<span class="hljs-string">'logs'</span>:<span class="hljs-string">'ERROR:Connection Timed Out'</span>,<span class="hljs-string">'attempt'</span>:state[<span class="hljs-string">'attempt'</span>]+<span class="hljs-number">1</span>}
    <span class="hljs-keyword">return</span> {<span class="hljs-string">'logs'</span>:<span class="hljs-string">'CONNECTED'</span>,<span class="hljs-string">'attempt'</span>:state[<span class="hljs-string">'attempt'</span>]+<span class="hljs-number">1</span>}

<span class="hljs-keyword">def</span> <span class="hljs-title function_">grep_system_logs</span>(<span class="hljs-params">state:SSHState</span>):
    <span class="hljs-string">"""è¿æ¥æˆåŠŸåè¯»å–æ—¥å¿—"""</span>
    <span class="hljs-keyword">if</span> state[<span class="hljs-string">"logs"</span>] == <span class="hljs-string">"CONNECTED"</span>:
        <span class="hljs-comment"># æ‰“å°æŸ¥åˆ°çš„ç»“æœ</span>
        <span class="hljs-keyword">return</span> {<span class="hljs-string">'logs'</span>:<span class="hljs-string">f'SUCCESS: Retrieved logs from <span class="hljs-subst">{state[<span class="hljs-string">'target_ip'</span>]}</span>:[ERROR: OutOfMemory at line 4032]'</span>}
    <span class="hljs-keyword">return</span> {<span class="hljs-string">'logs'</span>:state[<span class="hljs-string">'logs'</span>]} <span class="hljs-comment"># ä¿æŒé”™è¯¯çŠ¶æ€</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">ssh_routing</span>(<span class="hljs-params">state:SSHState</span>):
    <span class="hljs-string">"""è·¯ç”±é€»è¾‘ï¼šå¦‚æœè¿æ¥å¤±è´¥ä¸”å°è¯•æ¬¡æ•°å°‘äº3ï¼Œé‡è¯•"""</span>
    <span class="hljs-keyword">if</span> <span class="hljs-string">"ERROR"</span> <span class="hljs-keyword">in</span> state[<span class="hljs-string">'logs'</span>] <span class="hljs-keyword">and</span> state[<span class="hljs-string">"attempt"</span>] &lt;= <span class="hljs-number">2</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"connect"</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"grep"</span>

<span class="hljs-comment"># æ„å»ºå­å›¾</span>
ssh_workflow = StateGraph(SSHState)
ssh_workflow.add_node(<span class="hljs-string">"connect"</span>,connect_ssh)
ssh_workflow.add_node(<span class="hljs-string">"grep"</span>,grep_system_logs)

ssh_workflow.add_edge(START,<span class="hljs-string">"connect"</span>)
ssh_workflow.add_conditional_edges(<span class="hljs-string">"connect"</span>,ssh_routing,{<span class="hljs-string">"connect"</span>:<span class="hljs-string">"connect"</span>,<span class="hljs-string">"grep"</span>:<span class="hljs-string">"grep"</span>})
ssh_workflow.add_edge(<span class="hljs-string">"grep"</span>,END)

ssh_app = ssh_workflow.<span class="hljs-built_in">compile</span>()

<span class="hljs-comment"># å°†å­å›¾å°è£…ä¸ºå·¥å…·</span>
<span class="hljs-meta">@tool</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_server_logs</span>(<span class="hljs-params">ip_address:<span class="hljs-built_in">str</span></span>):
    <span class="hljs-string">"""ä½¿ç”¨SSHè¿æ¥æœåŠ¡å™¨å¹¶åˆ†ææœ€è¿‘çš„é”™è¯¯æ—¥å¿—ï¼ˆå†…å«è‡ªåŠ¨é‡è¿æœºåˆ¶ï¼‰"""</span>
    result = ssh_app.invoke({<span class="hljs-string">"target_ip"</span>:ip_address,<span class="hljs-string">"attempt"</span>:<span class="hljs-number">1</span>,<span class="hljs-string">"log"</span>:<span class="hljs-string">""</span>})
    <span class="hljs-keyword">return</span> result[<span class="hljs-string">'logs'</span>]



<span class="hljs-comment"># === äºŒã€Human-in-the-Loop ===</span>
<span class="hljs-comment"># === é‡å¯æœåŠ¡ï¼Œé«˜å±æ“ä½œï¼Œéœ€è¦å®¡æ‰¹ ===</span>

<span class="hljs-meta">@tool</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">restart_service</span>(<span class="hljs-params">service_name:<span class="hljs-built_in">str</span></span>):
    <span class="hljs-string">"""é‡å¯æŒ‡å®šçš„æœåŠ¡å™¨æœåŠ¡"""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"æœåŠ¡[<span class="hljs-subst">{service_name}</span>]å·²æˆåŠŸé‡å¯ï¼Œç³»ç»Ÿè´Ÿè½½å·²æ¢å¤æ­£å¸¸"</span>



<span class="hljs-comment"># === ä¸‰ã€Multi-Agent ç¼–æ’ ===</span>
<span class="hljs-comment"># === æ€»æ§è°ƒåº¦ + ä¸“å®¶åˆ†å·¥ ===</span>

<span class="hljs-comment"># 1. å…±äº«çŠ¶æ€</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AgentState</span>(<span class="hljs-title class_ inherited__">TypedDict</span>):
    messages:Annotated[<span class="hljs-built_in">list</span>,add_messages]
    next_speaker:<span class="hljs-built_in">str</span>

<span class="hljs-comment"># 2. ä¸“å®¶èŠ‚ç‚¹</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">log_expert</span>(<span class="hljs-params">state:AgentState</span>):
    prompt = <span class="hljs-string">"ä½ æ˜¯æ—¥å¿—åˆ†æä¸“å®¶ï¼Œä½¿ç”¨å·¥å…·åˆ†ææœåŠ¡å™¨æ—¥å¿—ï¼Œæ‰¾å‡ºæŠ¥é”™åŸå› ã€‚å›ç­”éœ€ç®€æ´ã€‚"</span>
    messages = [SystemMessage(content=prompt)] + state[<span class="hljs-string">'messages'</span>]
    <span class="hljs-comment"># ç»‘å®šå­å›¾å·¥å…·</span>
    tools = [analyze_server_logs]
    response = llm.bind_tools(tools).invoke(messages)
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"messages"</span>:[response]}

<span class="hljs-keyword">def</span> <span class="hljs-title function_">ops_expert</span>(<span class="hljs-params">state:AgentState</span>):
    prompt = <span class="hljs-string">"ä½ æ˜¯è¿ç»´ä¸“å®¶ã€‚å½“æ”¶åˆ°ä¿®å¤æŒ‡ä»¤æ—¶ï¼Œè¯·ç«‹å³è°ƒç”¨ 'restart_service' å·¥å…·è¿›è¡Œä¿®å¤ï¼Œä¸è¦è¾“å‡ºä»»ä½•é¢å¤–çš„è§£é‡Šæ–‡æœ¬ã€‚"</span>
    messages = [SystemMessage(content=prompt)] + state[<span class="hljs-string">'messages'</span>]
    tools = [restart_service]
    <span class="hljs-comment"># ç»‘å®šæ•æ„Ÿå·¥å…·</span>
    response = llm.bind_tools(tools).invoke(messages)
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"messages"</span>:[response]}

<span class="hljs-comment"># 3. æ€»æ§èŠ‚ç‚¹ï¼ˆsupervisorï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">supervisor</span>(<span class="hljs-params">state:AgentState</span>):
    prompt = <span class="hljs-string">"""
    ä½ æ˜¯ IT è¿ç»´æ€»æŒ‡æŒ¥ã€‚
    ä¸“å®¶åˆ—è¡¨ï¼š
    - log_expert
    - ops_expert

    å†³ç­–é€»è¾‘ï¼š
    1. æœªçŸ¥åŸå›  -&gt; log_expert
    2. å·²çŸ¥åŸå› ï¼ˆå¦‚OOMã€æŠ¥é”™ï¼‰ -&gt; ops_expert
    3. ä¿®å¤å®Œæˆ -&gt; FINISH

    ã€è¾“å‡ºçº¦æŸã€‘
    ä»…è¾“å‡ºä¸‹ä¸€ä¸ªä¸“å®¶çš„åå­—ï¼ˆå¦‚ log_expertï¼‰ï¼Œä¸è¦åŒ…å«ä»»ä½•å…¶ä»–å­—ç¬¦æˆ–æ ‡ç‚¹ã€‚
    """</span>
    messages = [SystemMessage(content=prompt)] + state[<span class="hljs-string">'messages'</span>]
    response = llm.invoke(messages)
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"next_speaker"</span>:response.content.strip()}

<span class="hljs-comment"># 4. è·¯ç”±é€»è¾‘</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">route_supervisor</span>(<span class="hljs-params">state:AgentState</span>):
    <span class="hljs-keyword">if</span> state[<span class="hljs-string">'next_speaker'</span>] == <span class="hljs-string">"FINISH"</span>:
        <span class="hljs-keyword">return</span> END
    <span class="hljs-keyword">return</span> state[<span class="hljs-string">'next_speaker'</span>]

<span class="hljs-keyword">def</span> <span class="hljs-title function_">should_continue</span>(<span class="hljs-params">state:AgentState</span>):
    last_msg = state[<span class="hljs-string">'messages'</span>][-<span class="hljs-number">1</span>]
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(last_msg,<span class="hljs-string">"tool_calls"</span>) <span class="hljs-keyword">and</span> last_msg.tool_calls:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"tools"</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"supervisor"</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">route_after_tool</span>(<span class="hljs-params">state:AgentState</span>):
    <span class="hljs-keyword">return</span> state[<span class="hljs-string">"next_speaker"</span>]


<span class="hljs-comment"># === å››ã€æ„å»ºä¸»å›¾ä¸é›†æˆ ===</span>

<span class="hljs-comment"># å·¥å…·é›†åˆ</span>
all_tools = [analyze_server_logs,restart_service]
tool_node = ToolNode(all_tools)

<span class="hljs-comment"># æ„å»ºä¸»å›¾</span>
workflow = StateGraph(AgentState)

workflow.add_node(<span class="hljs-string">"supervisor"</span>,supervisor)
workflow.add_node(<span class="hljs-string">"log_expert"</span>,log_expert)
workflow.add_node(<span class="hljs-string">"ops_expert"</span>,ops_expert)
workflow.add_node(<span class="hljs-string">"tools"</span>,tool_node)

workflow.add_edge(START,<span class="hljs-string">"supervisor"</span>)
workflow.add_conditional_edges(<span class="hljs-string">"supervisor"</span>,route_supervisor)
<span class="hljs-keyword">for</span> member <span class="hljs-keyword">in</span> [<span class="hljs-string">"log_expert"</span>,<span class="hljs-string">"ops_expert"</span>]:
    workflow.add_conditional_edges(
        member,
        should_continue,
        {<span class="hljs-string">"tools"</span>:<span class="hljs-string">"tools"</span>,<span class="hljs-string">"supervisor"</span>:<span class="hljs-string">"supervisor"</span>}
    )
workflow.add_conditional_edges(<span class="hljs-string">"tools"</span>,route_after_tool)

<span class="hljs-comment"># ç¼–è¯‘å›¾:åŠ å…¥è®°å¿†ä¸ä¸­æ–­æœºåˆ¶(Human-in-the-Loop)</span>
<span class="hljs-comment"># æ³¨: æˆ‘ä»¬åœ¨æ‰€æœ‰å·¥å…·æ‰§è¡Œå‰éƒ½æš‚åœï¼Œä½†åœ¨è¿è¡Œæ—¶è¿›è¡Œé€»è¾‘åˆ¤æ–­</span>
app = workflow.<span class="hljs-built_in">compile</span>(
    checkpointer=MemorySaver(),
    interrupt_before=[<span class="hljs-string">"tools"</span>]
)

<span class="hljs-comment"># === äº”ã€è¿è¡Œæ—¶é€»è¾‘(æ¨¡æ‹Ÿç”Ÿäº§ç¯å¢ƒçš„äº¤äº’) ===</span>

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    <span class="hljs-comment"># æ¨¡æ‹Ÿä¸€æ¬¡å®Œæ•´çš„æ•…éšœå¤„ç†æµç¨‹</span>
    user_input = <span class="hljs-string">"æœåŠ¡å™¨ 192.168.1.100 æŠ¥è­¦ï¼Œå“åº”ææ…¢ï¼Œè¯·å¤„ç†ã€‚"</span>
    config = {
        <span class="hljs-string">"configurable"</span>: {<span class="hljs-string">"thread_id"</span>: <span class="hljs-string">"incident_001"</span>}
    }

    <span class="hljs-built_in">print</span>(<span class="hljs-string">f'æ”¶åˆ°æŠ¥è­¦ : <span class="hljs-subst">{user_input}</span>'</span>)
    inputs = {<span class="hljs-string">"messages"</span>:[HumanMessage(content=user_input)]}

    <span class="hljs-comment"># å¾ªç¯æ‰§è¡Œï¼Œç›´åˆ°ä»»åŠ¡ç»“æŸ</span>
    <span class="hljs-keyword">while</span> <span class="hljs-number">1</span>:
        <span class="hljs-comment"># 1. æ‰§è¡Œå›¾ç›´åˆ°ä¸­æ–­æˆ–ç»“æŸ</span>
        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> app.stream(inputs,config,stream_mode=<span class="hljs-string">"values"</span>):
            <span class="hljs-keyword">pass</span>

        <span class="hljs-comment"># 2. æ£€æŸ¥å½“å‰çŠ¶æ€</span>
        snapshot = app.get_state(config)
        next_tasks = snapshot.<span class="hljs-built_in">next</span>

        <span class="hljs-comment"># æ²¡æœ‰ä¸‹ä¸€æ­¥ï¼Œä»»åŠ¡ç»“æŸ</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> next_tasks:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"    æœ€ç»ˆæŠ¥å‘Š:<span class="hljs-subst">{snapshot.values[<span class="hljs-string">'messages'</span>][-<span class="hljs-number">1</span>].content}</span>"</span>)
            <span class="hljs-keyword">break</span>

        <span class="hljs-comment"># 3. å¤„ç†ä¸­æ–­:åˆ¤æ–­æ˜¯å“ªä¸ªå·¥å…·è¢«è°ƒç”¨</span>
        <span class="hljs-keyword">if</span> <span class="hljs-string">"tools"</span> <span class="hljs-keyword">in</span> next_tasks:
            last_msg = snapshot.values[<span class="hljs-string">'messages'</span>][-<span class="hljs-number">1</span>]
            tool_call = last_msg.tool_calls[<span class="hljs-number">0</span>]
            tool_name = tool_call[<span class="hljs-string">"name"</span>]

            <span class="hljs-built_in">print</span>(<span class="hljs-string">f'\n[ç³»ç»Ÿæš‚åœ] è¯·æ±‚è°ƒç”¨å·¥å…·:<span class="hljs-subst">{tool_name}</span>'</span>)

            <span class="hljs-comment"># ç­–ç•¥A: è‡ªåŠ¨æ”¾è¡Œå®‰å…¨å·¥å…·(Graph-as-a-Tool)</span>
            <span class="hljs-keyword">if</span> tool_name == <span class="hljs-string">"analyze_server_logs"</span>:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">'     -&gt; è¿™æ˜¯ä¸€ä¸ªæŸ¥è¯¢ç±»å·¥å…·ï¼Œç³»ç»Ÿè‡ªè¡Œæ‰¹å‡†ã€‚'</span>)
                inputs = <span class="hljs-literal">None</span> <span class="hljs-comment"># ç»§ç»­æ‰§è¡Œ</span>
                <span class="hljs-keyword">continue</span>

            <span class="hljs-comment"># ç­–ç•¥B: æ‹¦æˆªé«˜å±å·¥å…·(Human-in-the-Loop)</span>
            <span class="hljs-keyword">elif</span> tool_name == <span class="hljs-string">"restart_service"</span>:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"     -&gt; âš ï¸ è­¦å‘Š: è¿™æ˜¯ä¸€ä¸ªé«˜å±æ“ä½œ!"</span>)
                user_approval = <span class="hljs-built_in">input</span>(<span class="hljs-string">"     -&gt; è¯·äººå·¥å®¡æ‰¹ (è¾“å…¥ 'yes' å…è®¸é‡å¯):"</span>)

                <span class="hljs-keyword">if</span> user_approval == <span class="hljs-string">"yes"</span>:
                    <span class="hljs-built_in">print</span>(<span class="hljs-string">'    -&gt; âœ… å®¡æ‰¹é€šè¿‡ï¼Œæ­£åœ¨æ‰§è¡Œ...'</span>)
                    inputs = <span class="hljs-literal">None</span> <span class="hljs-comment"># ç»§ç»­æ‰§è¡Œ</span>
                <span class="hljs-keyword">else</span>:
                    <span class="hljs-built_in">print</span>(<span class="hljs-string">'    -&gt; âŒï¸ å®¡æ‰¹æ‹’ç»ï¼Œä»»åŠ¡ç»ˆæ­¢!'</span>)
                    <span class="hljs-comment"># å®é™…ç³»ç»Ÿä¸­ï¼Œåº”é€šè¿‡ ToolMessage åé¦ˆäººå·¥æ‹’ç»ï¼Œä½¿ LLM èƒ½ç»§ç»­å“åº”ï¼›</span>
                    <span class="hljs-comment"># å½“å‰demoä¸ºç®€åŒ–ï¼Œç›´æ¥é€€å‡º</span>
                    <span class="hljs-keyword">break</span>
</code></pre>
<h3 data-id="heading-16">è¿è¡Œæ•ˆæœ</h3>
<p>å½“ä½ è¿è¡Œè¿™æ®µä»£ç æ—¶ï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªéå¸¸ç²¾å½©çš„<strong>äº¤äº’è¿‡ç¨‹</strong>ï¼š</p>
<ol>
<li>
<p>æ€»æ§è°ƒåº¦ï¼šSupervisoræ”¶åˆ°æŠ¥è­¦ï¼Œé¦–å…ˆæŒ‡æ´¾log_expertã€‚</p>
</li>
<li>
<p>å­å›¾è‡ªåŠ¨é‡è¯•:</p>
</li>
</ol>
<ul>
<li>log_expert è°ƒç”¨ analyze_server_logsï¼›</li>
<li>ç³»ç»Ÿè¯†åˆ«è¿™æ˜¯å®‰å…¨å·¥å…·ï¼Œè‡ªåŠ¨æ‰¹å‡†ï¼›</li>
<li>æ§åˆ¶å°æ‰“å°å‡ºå­å›¾å†…éƒ¨é€»è¾‘ï¼šç¬¬ä¸€æ¬¡è¿æ¥è¶…æ—¶ -&gt; è‡ªåŠ¨é‡è¯• -&gt; è¿æ¥æˆåŠŸ -&gt; è·å–åˆ° OutOfMemory é”™è¯¯</li>
</ul>
<ol start="3">
<li>äºŒæ¬¡è°ƒåº¦ï¼š</li>
</ol>
<ul>
<li>log_expert æ±‡æŠ¥ï¼šâ€œå‘ç°äº† OOM é”™è¯¯â€</li>
<li>Supervisor å†³ç­–ï¼šâ€œè¿™æ˜¯å†…å­˜æº¢å‡ºï¼Œéœ€è¦é‡å¯ï¼ŒæŒ‡æ´¾ops_expertã€‚â€</li>
</ul>
<ol start="4">
<li>äººå·¥æ‹¦æˆª</li>
</ol>
<ul>
<li>ops_expert è¯•å›¾è°ƒç”¨ restart_servicesã€‚</li>
<li>ç³»ç»Ÿè¯†åˆ«è¿™æ˜¯é«˜å±å·¥å…·ï¼Œå¼ºåˆ¶æš‚åœã€‚</li>
<li>æ§åˆ¶å°æç¤ºï¼šâš ï¸ è­¦å‘Š: è¿™æ˜¯ä¸€ä¸ªé«˜å±æ“ä½œ!</li>
</ul>
<ol start="5">
<li>æœ€ç»ˆä¿®å¤ï¼š</li>
</ol>
<ul>
<li>è¾“å…¥yes</li>
<li>æœåŠ¡é‡å¯æˆåŠŸï¼ŒSupervisor è¾“å‡º FINISHã€‚</li>
</ul>
<h2 data-id="heading-17"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/444f8dac2f934354a28c1c7b63285d48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YaN5Lya5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764494889&amp;x-signature=tgqknT2Ww6bEix33D0ErM14qbRA%3D" alt="" loading="lazy"/></h2>
<p>é€šè¿‡LangSmithçœ‹ä¸€ä¸‹è¯¦ç»†è¾“å‡ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/190f5e36d0164a9b985b2bee19d62887~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YaN5Lya5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764494889&amp;x-signature=06KJQL%2BryeOHhTnhNuROf7HPXfU%3D" alt="" loading="lazy"/>æµç¨‹è¿è¡Œå®Œç¾ã€‚</p>
<h2 data-id="heading-18">æ€»ç»“ã€</h2>
<p><strong>çŸ¥è¯†ç‚¹æ¦‚æ‹¬</strong>ï¼š<strong>Human-in-the-Loopï¼ˆäººå·¥å¹²é¢„ï¼‰ï½œ Graph-as-a-Toolï¼ˆå›¾å³å·¥å…·ï¼‰| Multi-Agent å¤šæ™ºèƒ½ä½“ç¼–æ’</strong></p>
<p>é€šè¿‡è¿™ä¸ªå®æˆ˜æ¡ˆä¾‹ï¼Œæˆ‘ä»¬è¯æ˜äº† LangGraph ä¸ä»…ä»…æ˜¯ä¸€ä¸ªç®€å•çš„ DAG ï¼ˆæœ‰å‘æ— ç¯å›¾â€”â€”æœ‰æ–¹å‘ä½†ä¸èƒ½å½¢æˆå¾ªç¯ï¼‰ï¼Œå®ƒæ˜¯ä¸€å¥—<strong>æ„ç­‘å¤æ‚ç³»ç»Ÿçš„éª¨æ¶</strong>ã€‚</p>
<p><strong>Graph-as-a-Toolï¼š</strong> è®©æˆ‘ä»¬èƒ½æŠŠè„æ´»ç´¯æ´»è—èµ·æ¥ï¼Œä¸»æµç¨‹ä¿æŒå¹²å‡€ã€‚</p>
<p><strong>Human-in-the-Loopï¼š</strong> è®©æˆ‘ä»¬æ•¢äºæŠŠAgentæ”¾å…¥ç”Ÿäº§ç¯å¢ƒï¼Œè®©äººå·¥ç¡®è®¤ä½œä¸ºæœ€ç»ˆé˜²çº¿ã€‚</p>
<p><strong>Multi-Agentï¼š</strong> è®©ç³»ç»Ÿå…·å¤‡äº†å¯æ‰©å±•æ€§ï¼ŒåŠ åŠŸèƒ½åªæ˜¯åŠ ä¸ªä¸“å®¶èŠ‚ç‚¹è€Œå·²ã€‚</p>
<p>ä¸‰è€…ç»“åˆï¼Œå³å¯æ„å»ºä¼ä¸šçº§å¯ä¿¡ Agent ç³»ç»Ÿã€‚</p>
<hr/>
<p>é¢„å‘Šï¼š<strong>10 ç¯‡ ã€Š MCP åŸºç¡€ç¯‡ã€‹</strong></p>
<p>09 ç¯‡çš„æ‰€æœ‰ä¸“å®¶éƒ½è¿è¡Œåœ¨åŒä¸€Pythonè¿›ç¨‹ä¸­ã€‚ä½†å¦‚æœï¼š</p>
<ul>
<li>RAG æœåŠ¡éƒ¨ç½²åœ¨å…¬å¸å†…ç½‘ï¼Ÿ</li>
<li>ä»£ç ç”Ÿæˆå™¨æ˜¯ Java å†™çš„ REST APIï¼Ÿ</li>
<li>ä½ æƒ³ç›´æ¥è°ƒç”¨é«˜å¾·åœ°å›¾ã€12306çš„å®˜æ–¹æœåŠ¡ï¼Ÿ</li>
</ul>
<p>10ç¯‡ï¼Œæˆ‘ä»¬å°†å¼•å…¥MCP <strong>ï¼ˆModel Context Protocolï¼‰åè®®ï¼Œ</strong></p>
<p><strong>è®©ä»»ä½•ç¬¦åˆæ ‡å‡†çš„è¿œç¨‹æœåŠ¡ï¼Œéƒ½èƒ½æˆä¸ºä½ çš„å·¥å…·â€”â€”æ— éœ€å†™ä¸€è¡Œ@toolï¼</strong></p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python å¼€å‘ç¯å¢ƒä¸åŒ…ç®¡ç†]]></title>    <link>https://juejin.cn/post/7575119254313992218</link>    <guid>https://juejin.cn/post/7575119254313992218</guid>    <pubDate>2025-11-23T10:08:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575119254313992218" data-draft-id="7575133880436457523" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python å¼€å‘ç¯å¢ƒä¸åŒ…ç®¡ç†"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2025-11-23T10:08:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="cadecode"/> <meta itemprop="url" content="https://juejin.cn/user/562546315637662"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python å¼€å‘ç¯å¢ƒä¸åŒ…ç®¡ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/562546315637662/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    cadecode
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T10:08:55.000Z" title="Sun Nov 23 2025 10:08:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Python çš„å®‰è£…</h2>
<h3 data-id="heading-1">Windows</h3>
<p>ä¸‹è½½å®‰è£…åŒ…ï¼Œæ¨èä½¿ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fmirrors.tuna.tsinghua.edu.cn%2Fpython%2F3.13.9%2F" target="_blank" title="https://mirrors.tuna.tsinghua.edu.cn/python/3.13.9/" ref="nofollow noopener noreferrer">æ¸…åå¼€æºè½¯ä»¶é•œåƒç«™</a>ä¸‹è½½</p>
<p>â€‹<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e87bcf93c07f4f4eb7bf7a97026c467f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2FkZWNvZGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764497335&amp;x-signature=4ZNvqdXEE1mgLhwMqL0y9rnFfZA%3D" alt="image" loading="lazy"/>â€‹</p>
<p>ä»¥ python-3.13.9-amd64.exe ä¸ºä¾‹ï¼ŒPython ç‰ˆæœ¬ 3.13.9</p>
<p>å®‰è£… tipsï¼š</p>
<ul>
<li>å‹¾é€‰æœ€ä¸‹é¢ â€œAdd Python 3.x to PATHâ€ å°† Python é…ç½®åˆ°ç¯å¢ƒå˜é‡ï¼ˆç”¨æˆ·æœºç¯å¢ƒå˜é‡ï¼‰</li>
</ul>

<ul>
<li>ç„¶ç‚¹ â€œCustomize installationâ€ï¼Œå»ºè®®å…¨å‹¾</li>
<li>å®‰è£…è·¯å¾„é€‰æ‹©è‡ªå·±æ—¥å¸¸å­˜æ”¾å¼€å‘ç¯å¢ƒ SDK çš„ç›®å½•</li>
</ul>
<p>é…ç½®ç¯å¢ƒå˜é‡ï¼š</p>
<p>å½“å®‰è£…æ—¶æ²¡æœ‰å‹¾é€‰ Add to PATHï¼Œåˆ™éœ€è¦å°†å®‰è£…ç›®å½•ã€å®‰è£…ç›®å½•ä¸‹çš„ Scripts ç›®å½•é…ç½®åˆ°ç¯å¢ƒå˜é‡ã€‚</p>
<p>ä½¿ç”¨å‘½ä»¤æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p>
<pre><code class="hljs">python -V
pip -V
</code></pre>
<p>â€‹<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad39b12cb44d4a0ebbfc15526d9dae27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2FkZWNvZGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764497335&amp;x-signature=8WAh7UK%2FkjsdQa1U6Y%2FEIORmsvw%3D" alt="image" loading="lazy"/>â€‹</p>
<p>é…ç½® pip å›½å†…é•œåƒï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">pip config set global.index-url https:<span class="hljs-comment">//pypi.tuna.tsinghua.edu.cn/simple</span>
pip config set global.trusted-host pypi.tuna.tsinghua.edu.cn
pip config list
</code></pre>
<p>â€‹<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6b2f3dbd8394741b25e0090dd65fbf3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2FkZWNvZGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764497335&amp;x-signature=maV93clw%2FT7sWK%2BCiOjcRvnWH3w%3D" alt="image" loading="lazy"/>â€‹</p>
<h3 data-id="heading-2">Linux</h3>
<p>ä»¥ Debian ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo apt update
<span class="hljs-comment"># ç›´æ¥è£…å®˜æ–¹ä»“åº“ç‰ˆï¼ˆå¯èƒ½ä¸æ˜¯æœ€æ–°ï¼‰</span>
sudo apt install python3 python3-pip python3-venv
</code></pre>
<p>æ³¨æ„äº‹é¡¹ï¼šåœ¨æ—©å‰ç‰ˆæœ¬çš„ Ubuntu/Debian ä¸­ï¼Œç¦æ­¢ä½¿ç”¨ sudo pip installâ€‹ è€Œæ²¡æœ‰ç¦æ­¢ç”¨æˆ·çº§çš„ installï¼ˆé€šå¸¸å®‰è£…åˆ° ~/.local/lib/python3.x/site-packages ç›®å½•ï¼‰ã€‚</p>
<p>ä» Ubuntu 23.04ï¼ˆåŠ Debian 12ï¼‰å¼€å§‹å¼ºåˆ¶æ‰§æ‰§è¡Œ PEP 668 ä¿æŠ¤æœºåˆ¶ï¼Œç¦æ­¢ç”¨æˆ·ä½¿ç”¨ç³»ç»Ÿçº§ Python æ‰§è¡Œ pip installâ€‹ æ“ä½œï¼Œå»ºè®®é€šè¿‡è™šæ‹Ÿç¯å¢ƒéš”ç¦»å®‰è£…ã€‚</p>
<h2 data-id="heading-3">è™šæ‹Ÿç¯å¢ƒ</h2>
<h3 data-id="heading-4">è™šæ‹Ÿç¯å¢ƒæ˜¯ä»€ä¹ˆ</h3>
<p>åœ¨ä¼—å¤šç¼–ç¨‹è¯­è¨€ï¼Œä¾èµ–éš”ç¦»æ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„é—®é¢˜ã€‚æ‹¿ Java æ¥è¯´ï¼ŒJava é»˜è®¤ä½¿ç”¨æœ¬åœ°çš„å…¨å±€ä»“åº“ï¼Œéœ€è¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ maven / gradle æ„å»ºå·¥å…·å£°æ˜å¥½éœ€è¦çš„ä¾èµ–ç‰ˆæœ¬ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒNodeJs æ˜¯å¤©ç”Ÿçš„é¡¹ç›®çº§éš”ç¦»ï¼Œé™¤éå¼ºè¡ŒæŒ‡å®šå…¨å±€å®‰è£…ï¼Œå¦åˆ™æ‰€æœ‰ä¾èµ–éƒ½è¢«å®‰è£…åˆ°å½“å‰é¡¹ç›®çš„ node_modulesâ€‹ ç›®å½•ä¸‹ï¼Œå½“ç§å¤„ç†æ–¹å¼ä¼šå¯¼è‡´ä¸€ä»½ä¾èµ–åœ¨ä¸åŒé¡¹ç›®å ç”¨å¤šä»½ç©ºé—´ï¼Œå› æ­¤ä¹Ÿå‚¬ç”Ÿäº†ä¸€äº›åŒ…ç®¡ç†å·¥å…·ï¼Œå¦‚ PNPMï¼Œåˆ©ç”¨ å…¨å±€ç¼“å­˜ + ç¡¬é“¾æ¥â€‹ å®ç°èŠ‚çº¦ç£ç›˜å’Œé¿å…é‡å¤ä¸‹è½½çš„ç›®çš„ã€‚</p>
<p>Python å®˜æ–¹é»˜è®¤æä¾›äº†è™šæ‹Ÿç¯å¢ƒå·¥å…· venvï¼Œåœ¨ä¸åŒåœºæ™¯ä¸€äº›ç¤¾åŒºä¹Ÿæœ‰å…¶ä»–çš„è§£å†³æ–¹æ¡ˆï¼Œå¦‚ conda ç­‰ï¼Œåœ¨çº¯ Python å¼€å‘</p>
<h3 data-id="heading-5">ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿç¯å¢ƒ</h3>
<p>åœ¨ä¸€ä¸ªç¯å¢ƒä¸­ï¼Œä¸€ä¸ªä¾èµ–çš„å®‰è£…ä¸åŒç‰ˆæœ¬ï¼Œåè€…ä¼šè¦†ç›–å‰è€…ï¼Œåªä¼šå­˜åœ¨ä¸€ä¸ªç‰ˆæœ¬ï¼Œè¿™ä¼šå¯¼è‡´ä¸€ä¸ªç¯å¢ƒä¸‹çš„å¤šä¸ªé¡¹ç›®ä¾èµ–çš„ç‰ˆæœ¬ä¸åŒè€Œå¯¼è‡´å†²çªï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œä¾èµ–ç¯å¢ƒçš„éš”ç¦»ã€‚</p>
<p>å…¶æ¬¡ï¼Œä¸€äº›æ“ä½œç³»ç»Ÿé»˜è®¤è‡ªå¸¦äº† Python ç¯å¢ƒï¼Œä¸”ç¦æ­¢äº†ç”¨æˆ·åœ¨å…¨å±€ç¯å¢ƒä¸­å®‰è£…åŒ…ï¼Œé˜²æ­¢ç ´åæ“ä½œç³»ç»Ÿç¨³å®šæ€§ï¼Œå› æ­¤å¿…é¡»åˆ›å»ºè™šæ‹Ÿç¯å¢ƒæ¥ä½¿ç”¨</p>
<h3 data-id="heading-6">ä½¿ç”¨ venv</h3>
<p>Python 3.3+ å†…ç½®äº† venvï¼Œåˆ›å»ºè™šæ‹Ÿç¯å¢ƒçš„å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»º</span>
python -m venv .venv

<span class="hljs-comment"># æ¿€æ´»ï¼ˆLinux/macOSï¼‰</span>
<span class="hljs-built_in">source</span> .venv/bin/activate
<span class="hljs-comment"># Windows</span>
.venv\Scripts\activate

<span class="hljs-comment"># éªŒè¯</span>
<span class="hljs-built_in">which</span> python  <span class="hljs-comment"># æŒ‡å‘ .venv/bin/python</span>
pip list      <span class="hljs-comment"># åªæœ‰ 2 ä¸ªåŒ…ï¼špip setuptools</span>

<span class="hljs-comment"># é€€å‡º</span>
deactivate
</code></pre>
<p>åœ¨å½“å‰é¡¹ç›®çš„ .venv ç›®å½•ä¸‹ï¼Œä½¿ç”¨ Scriptsâ€‹ ç›®å½•ä¸‹çš„ activate è„šæœ¬æ¿€æ´»å½“å‰è™šæ‹Ÿç¯å¢ƒï¼Œåç»­ä½¿ç”¨ pipâ€‹ å®‰è£…ä¾èµ–ï¼Œéƒ½å°†å­˜æ”¾åˆ° Lib/site-packagesâ€‹ ç›®å½•ï¼Œæ¨èä½¿ç”¨ python -m pipâ€‹ æ¥æ‰§è¡Œ pip å‘½ä»¤ï¼Œè¿™æ ·æŒ‡å®š Python è§£é‡Šå™¨å¯ä»¥é˜²æ­¢ç”±äºç¯å¢ƒå˜é‡ä¼˜å…ˆçº§é—®é¢˜è€Œå¯¼è‡´ä½¿ç”¨å…¶ä»–ç¯å¢ƒçš„ pipã€‚</p>
<h2 data-id="heading-7">åŒ…ç®¡ç†</h2>
<h3 data-id="heading-8">pip</h3>
<p>Python è‡ªå¸¦çš„ pip åŒ…ç®¡ç†å·¥å…·ï¼Œå¸¸ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å®‰è£…</span>
pip install <span class="hljs-attr">requests</span>==<span class="hljs-number">2.31</span>.<span class="hljs-number">0</span>

<span class="hljs-comment"># å‡çº§</span>
pip install -U requests

<span class="hljs-comment"># å¸è½½</span>
pip uninstall requests -y

<span class="hljs-comment"># æŸ¥çœ‹</span>
pip show requests
</code></pre>
<p>pip å¤ç°ä¾èµ–çš„æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç”Ÿæˆ</span>
pip freeze &gt; requirements.txt

<span class="hljs-comment"># æ¢å¤</span>
pip install -r requirements.txt
</code></pre>
<p>pip freeze ä¼šåˆ—å‡ºæœ‰å·²å®‰è£…çš„ä¾èµ–åŠç‰ˆæœ¬</p>
<p>â€‹<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3c91ab7723f4df284baf3d09ae2ad0f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2FkZWNvZGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764497335&amp;x-signature=C8UVlJaaWv04gMm6kgGUO0Q0pUg%3D" alt="image" loading="lazy"/>â€‹</p>
<p>å¯ä»¥çœ‹åˆ°å®‰è£… requests åº“ï¼ŒåŒæ—¶è‡ªåŠ¨å®‰è£…äº†å®ƒä¾èµ–çš„å…¶ä»–åº“ï¼Œæ‰€ä»¥é€šè¿‡å¯¼å‡ºçš„ requirements.txtâ€‹ æ–‡ä»¶ï¼Œå¯ä»¥å¿«é€Ÿå¤ç°ä¸€ä¸ªé¡¹ç›®çš„å¼€å‘åœºæ™¯ã€‚</p>
<p>é—®é¢˜æ˜¯å½“æˆ‘ä»¬ä¸åœ¨éœ€è¦ requests åº“æ—¶ï¼Œæ‰§è¡Œ pip uninstall requestsâ€‹ å¸è½½ requests åº“åï¼Œå‘ç°ç”±å®ƒè€Œå¼•å…¥çš„å…¶ä»–åº“å¹¶æ²¡æœ‰è¢«ç§»é™¤ï¼Œä¹Ÿå°±è¯´ pip æ— æ³•æ­£ç¡®å¤„ç†ç›´æ¥ä¾èµ–å’Œé—´æ¥ä¾èµ–ã€‚</p>
<p>å¯¹äºé‚£äº›ç”±äºæˆä¸ºå­¤å„¿çš„é—´æ¥ä¾èµ–ï¼Œå®˜æ–¹ç»™å‡ºçš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ pyproject.tomlâ€‹ã€‚</p>
<p>â€‹pyproject.tomlâ€‹ æ˜¯å®˜æ–¹æ¨å‡ºçš„ Python é¡¹ç›®é…ç½®è¡¨ï¼Œç”¨äºç»Ÿä¸€å„å¤§å·¥å…·çš„é…ç½®æ–‡ä»¶ï¼Œç›®å‰å¾ˆå¤šå·¥å…·éƒ½å·²ç»é™†ç»­æ”¯æŒã€‚</p>
<p>åœ¨ toml ä¸­ç»´æŠ¤åªéœ€è¦ç»´æŠ¤å¥½ç›´æ¥ä¾èµ–ç‰ˆæœ¬</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[project]</span>
<span class="hljs-attr">name</span> = <span class="hljs-string">"learn-python"</span>
<span class="hljs-attr">version</span> = <span class="hljs-string">"0.1.0"</span>
<span class="hljs-attr">description</span> = <span class="hljs-string">"Add your description here"</span>
<span class="hljs-attr">readme</span> = <span class="hljs-string">"README.md"</span>
<span class="hljs-attr">requires-python</span> = <span class="hljs-string">"&gt;=3.13"</span>
<span class="hljs-attr">dependencies</span> = [
    <span class="hljs-string">"requests&gt;=2.32.5"</span>,
]
</code></pre>
<p>pip 23+ æ”¯æŒä» pyproject.tomlâ€‹ å®‰è£…ä¾èµ–</p>
<pre><code class="hljs language-bash" lang="bash">pip install .
<span class="hljs-comment"># æˆ–</span>
pip install -e . 
</code></pre>
<blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ pip install .â€‹ ä¼šæ‰§è¡Œæ„å»º + å®‰è£…â€‹ ä¸¤ä¸ªè¿‡ç¨‹ï¼Œä¼šæŠŠæœ¬åœ°ä»£ç ç›´æ¥æ‰“è¿› site-packages ç›®å½•ï¼Œå¯¹äºé¢‘ç¹ä¿®æ”¹çš„æœ¬åœ°æ–‡ä»¶æ¥è¯´å¤šæœ‰ä¸ä¾¿ã€‚</p>
<p>æ¨èä½¿ç”¨ pip install -e .â€‹ æ¥å®‰è£…ä¾èµ–ï¼Œä¼šåœ¨ site-packages ç›®å½•ä¸­é“¾æ¥æ–‡ä»¶ï¼ŒæŒ‡å‘æœ¬åœ°ä»£ç ï¼Œä»è€Œç¼–è¾‘ä¿®æ”¹èƒ½åŠæ—¶ç”Ÿæ•ˆ</p>
</blockquote>
<h3 data-id="heading-9">uv</h3>
<p>pip å‘½ä»¤èƒ½ä» pyproject.tomlâ€‹ ä¸­è¯»å–ä¾èµ–ï¼Œä½†ç›®å‰ä¸èƒ½æ–¹ä¾¿çš„å°†ä¾èµ–é…ç½®åˆ° toml ä¸­ï¼Œæ¨èä½¿ç”¨æ›´åŠ å¼ºå¤§çš„ uv å‘½ä»¤ã€‚</p>
<p>uv æ˜¯ä¸€ä¸ªç”¨ Rust ç¼–å†™çš„æé€Ÿ Python åŒ…å’Œé¡¹ç›®ç®¡ç†å·¥å…·ã€‚</p>
<p>uv çš„å®‰è£…ï¼š</p>
<p>æ–¹æ³• 1ï¼šå®˜æ–¹å®‰è£…è„šæœ¬</p>
<pre><code class="hljs language-arduino" lang="arduino">curl -LsSf https:<span class="hljs-comment">//astral.sh/uv/install.sh | sh</span>
</code></pre>
<p>æ–¹æ³• 2ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fastral-sh%2Fuv%2Freleases" target="_blank" title="https://github.com/astral-sh/uv/releases" ref="nofollow noopener noreferrer">Github Releases</a> ä¸‹è½½å®‰è£…æ–‡ä»¶</p>
<p>æ–¹æ³• 3ï¼šç›´æ¥ä½¿ç”¨ pip å®‰è£…</p>
<pre><code class="hljs">pip install uv
</code></pre>
<p>å¸¸ç”¨å‘½ä»¤ï¼š</p>
<p>è™šæ‹Ÿç¯å¢ƒæ“ä½œï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ–°å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆé»˜è®¤ç›®å½• .venvï¼‰</span>
uv venv

<span class="hljs-comment"># æŒ‡å®š Python ç‰ˆæœ¬ï¼ˆè‡ªåŠ¨ä¸‹è½½è‹¥æœ¬åœ°æ²¡æœ‰ï¼‰</span>
uv venv --python 3.11
uv venv py38 -p 3.8        <span class="hljs-comment"># è‡ªå®šä¹‰ç›®å½•å</span>
</code></pre>
<p>ä¾èµ–ç®¡ç†ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># åˆå§‹åŒ–é¡¹ç›®</span>
uv <span class="hljs-keyword">init</span> myproj

<span class="hljs-meta"># å®‰è£…å…¨éƒ¨ä¾èµ–å¹¶ç”Ÿæˆ/æ›´æ–°é”æ–‡ä»¶</span>
uv sync

<span class="hljs-meta"># ä»…æ›´æ–°é”æ–‡ä»¶ï¼ˆä¸å®é™…è£…åŒ…ï¼Œé€‚åˆ CI æ ¡éªŒï¼‰</span>
uv <span class="hljs-keyword">lock</span>

<span class="hljs-meta"># å‡çº§å•ä¸ªåŒ…å¹¶é‡æ–°é”å®š</span>
<span class="hljs-meta"># é”æ–‡ä»¶ä¼šæ›´æ–°ä¸ºæœ€æ–°å…¼å®¹ç‰ˆæœ¬ï¼Œå…¶ä½™åŒ…ä¿æŒä¸åŠ¨ã€‚</span>
uv <span class="hljs-keyword">lock</span> --upgrade-package pandas

<span class="hljs-meta"># æ·»åŠ è¿è¡Œæ—¶ä¾èµ–</span>
<span class="hljs-meta"># è‡ªåŠ¨å‘ pyproject.toml çš„ [project]dependencies å†™å…¥ç‰ˆæœ¬åŒºé—´</span>
uv <span class="hljs-keyword">add</span> requests&gt;=<span class="hljs-number">2.31</span>

<span class="hljs-meta"># æ·»åŠ å¼€å‘ä¾èµ–</span>
<span class="hljs-meta"># åœ¨ pyproject.toml æ–°å¢ [dependency-groups] dev = ["pytest"]</span>
uv <span class="hljs-keyword">add</span> --<span class="hljs-keyword">group</span> dev pytest

<span class="hljs-meta"># ç§»é™¤ä¾èµ–</span>
uv <span class="hljs-keyword">remove</span> requests

<span class="hljs-meta"># ä»æ—§ requirements.txt æ‰¹é‡å¯¼å…¥</span>
uv <span class="hljs-keyword">add</span> -r requirements.txt
</code></pre>
<p>è¿è¡Œè„šæœ¬ï¼š</p>
<pre><code class="hljs language-css" lang="css"># ç›´æ¥æ‰§è¡Œ py æ–‡ä»¶
uv run <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.py</span>
# æŒ‡å®šè§£é‡Šå™¨
uv run python <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.py</span>
# æŒ‡å®šè§£é‡Šå™¨ç‰ˆæœ¬ï¼Œä¸å­˜åœ¨å°†ä¸‹è½½
uv run <span class="hljs-attr">--python</span> <span class="hljs-number">3.12</span> <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.py</span>
</code></pre>
<p>å…¼å®¹ pip å‘½ä»¤(90%+)ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŠŠ pip ç›´æ¥æ¢æˆ uv pipï¼Œé€Ÿåº¦æå‡ 10+ å€</span>
uv pip install requests
uv pip install -r requirements.txt
uv pip uninstall requests
</code></pre>
<h3 data-id="heading-10">è¿˜åŸä¾èµ–ç¯å¢ƒ</h3>
<p>å½“å‚ä¸ä¸€ä¸ªå·²å­˜åœ¨çš„ Python é¡¹ç›®ï¼Œå¦‚ä½•å¿«é€Ÿè¿˜åŸå¼€å‘ç¯å¢ƒï¼Ÿ</p>
<p>åœºæ™¯ 1ï¼šå½“é¡¹ç›®ä½¿ç”¨ pyproject toml æ–‡ä»¶æ¥ç®¡ç†</p>
<ul>
<li>ä½¿ç”¨ uvï¼Œç›´æ¥ uv syncâ€‹</li>
</ul>

<ul>
<li>ä½¿ç”¨ pipï¼Œä½¿ç”¨ pip install .â€‹</li>
</ul>
<p>åœºæ™¯ 2ï¼šå½“é¡¹ç›®ä½¿ç”¨ requirements.txt ç®¡ç†</p>
<ul>
<li>â€‹pip install -râ€‹ æˆ– uv pip install -râ€‹ ç›´æ¥å®‰è£…ä¾èµ–</li>
<li>â€‹uv add -râ€‹ å¯ä»¥å°† requirements å†…å®¹é…ç½®åˆ° pyproject toml</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¸…ç† Git ä»£ç åº“å¤§æ–‡ä»¶å†å²è®°å½•]]></title>    <link>https://juejin.cn/post/7575425466904870975</link>    <guid>https://juejin.cn/post/7575425466904870975</guid>    <pubDate>2025-11-23T10:01:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575425466904870975" data-draft-id="7575442779038973994" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¸…ç† Git ä»£ç åº“å¤§æ–‡ä»¶å†å²è®°å½•"/> <meta itemprop="keywords" content="Git,è¿ç»´"/> <meta itemprop="datePublished" content="2025-11-23T10:01:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="hen3y"/> <meta itemprop="url" content="https://juejin.cn/user/1425416494263021"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¸…ç† Git ä»£ç åº“å¤§æ–‡ä»¶å†å²è®°å½•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1425416494263021/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    hen3y
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T10:01:18.000Z" title="Sun Nov 23 2025 10:01:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="obsidian">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#282b2e}.hljs-keyword,.hljs-literal,.hljs-selector-id,.hljs-selector-tag{color:#93c763}.hljs-number{color:#ffcd22}.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#e0e2e4}.hljs-attribute{color:#668bb0}.hljs-class .hljs-title,.hljs-code,.hljs-section{color:#fff}.hljs-link,.hljs-regexp{color:#d39745}.hljs-meta{color:#557182}.hljs-addition,.hljs-built_in,.hljs-bullet,.hljs-emphasis,.hljs-name,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-subst,.hljs-tag,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable{color:#8cbbad}.hljs-string,.hljs-symbol{color:#ec7600}.hljs-comment,.hljs-deletion,.hljs-quote{color:#818e96}.hljs-selector-class{color:#a082bd}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-strong,.hljs-title,.hljs-type{font-weight:700}</style><h2 data-id="heading-0">æ¸…ç† Git ä»£ç åº“å¤§æ–‡ä»¶å†å²è®°å½•</h2>
<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šä¸å°å¿ƒå°†ä¸€äº›å¤§æ–‡ä»¶ï¼ˆå¦‚äºŒè¿›åˆ¶æ–‡ä»¶ã€å¤§å‹èµ„æºæ–‡ä»¶ç­‰ï¼‰æäº¤åˆ° Git ä»“åº“ä¸­ã€‚å³ä½¿åæ¥åˆ é™¤äº†è¿™äº›æ–‡ä»¶ï¼Œå®ƒä»¬ä¾ç„¶å­˜åœ¨äº Git çš„å†å²è®°å½•ä¸­ï¼Œå¯¼è‡´ <code>.git</code> ç›®å½•å˜å¾—éå¸¸åºå¤§ï¼Œä¸¥é‡å½±å“ <code>git clone</code> å’Œ <code>git pull</code> çš„é€Ÿåº¦ã€‚</p>
<p>æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åˆ†æ Git ä»“åº“çš„å ç”¨æƒ…å†µï¼Œå¹¶ä½¿ç”¨å·¥å…·æ¸…ç†å†å²è®°å½•ä¸­çš„å¤§æ–‡ä»¶ã€‚</p>
<h3 data-id="heading-1">é—®é¢˜åˆ†æ</h3>
<p>Git ä»“åº“ä½“ç§¯è¿‡å¤§çš„ä¸»è¦åŸå› é€šå¸¸æ˜¯ <code>.git/objects/pack/*.pack</code> æ–‡ä»¶è¿‡å¤§ã€‚Git å°†æ–‡ä»¶å†å²è®°å½•å­˜å‚¨åœ¨æœ¬åœ°çš„ "database" ä¸­ï¼Œå¦‚æœå†å²è®°å½•ä¸­åŒ…å«äº†å¤§é‡çš„äºŒè¿›åˆ¶æ–‡ä»¶å˜åŠ¨ï¼Œpack æ–‡ä»¶å°±ä¼šè¿…é€Ÿè†¨èƒ€ã€‚</p>
<blockquote>
<p>[!info] Git Internals - Packfiles
Git ä½¿ç”¨ packfile æ¥ä¼˜åŒ–å­˜å‚¨ã€‚è¯¦æƒ…å¯å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgit-scm.com%2Fbook%2Fen%2Fv2%2FGit-Internals-Packfiles" target="_blank" title="https://git-scm.com/book/en/v2/Git-Internals-Packfiles" ref="nofollow noopener noreferrer">Git - Internals - Packfiles</a></p>
</blockquote>
<h3 data-id="heading-2">ç¬¬ä¸€æ­¥ï¼šæ‰¾å‡ºå¤§æ–‡ä»¶</h3>
<p>åœ¨æ¸…ç†ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæ‰¾å‡ºæ˜¯å“ªäº›æ–‡ä»¶å ç”¨äº†å¤§é‡ç©ºé—´ã€‚</p>
<h4 data-id="heading-3">1. æŸ¥çœ‹ä»“åº“å¤§å°</h4>
<p>ä½¿ç”¨ <code>git count-objects</code> å‘½ä»¤å¯ä»¥æŸ¥çœ‹ä»“åº“çš„æ‰“åŒ…å¯¹è±¡æ•°é‡å’Œç£ç›˜å ç”¨æƒ…å†µï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># -v: verbose, æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯</span>
<span class="hljs-comment"># -H: human-readable, ä»¥äººç±»å¯è¯»çš„æ ¼å¼æ˜¾ç¤ºå¤§å°</span>
git count-objects -v -H
</code></pre>
<h4 data-id="heading-4">2. æŸ¥æ‰¾ Packfile ä¸­æœ€å¤§çš„å¯¹è±¡</h4>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>git verify-pack</code> å‘½ä»¤æŸ¥çœ‹ packfile ä¸­çš„å¯¹è±¡è¯¦æƒ…ï¼Œå¹¶æŒ‰å¤§å°æ’åºæ‰¾å‡ºæœ€å¤§çš„å‡ ä¸ª blob å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹ .git/objects/pack/ ä¸‹çš„ .idx æ–‡ä»¶</span>
<span class="hljs-comment"># sort -rn -k 3: æŒ‰ç¬¬3åˆ—ï¼ˆsizeï¼‰å€’åºæ’åˆ—</span>
<span class="hljs-comment"># head -10: å–å‰10ä¸ª</span>
git verify-pack -v .git/objects/pack/*.idx | <span class="hljs-built_in">sort</span> -rn -k 3 | <span class="hljs-built_in">head</span> -10
</code></pre>
<p>è¾“å‡ºç»“æœæ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-text" lang="text"># SHA-1 (Blob ID) | type | size | size-in-packfile | offset-in-packfile
9704d6e7c732b07418ffe2c0dd2c2030d0cd5a2e blob   2621847 2622645 235218
2bdb752d86091c343f2f4d3af88f038f6b4c2846 blob   2212925 868876 2918139
...
</code></pre>
<h4 data-id="heading-5">3. å®šä½å…·ä½“æ–‡ä»¶è·¯å¾„</h4>
<p>æ‹¿åˆ° Blob ID åï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“å®ƒå¯¹åº”çš„æ˜¯å“ªä¸ªæ–‡ä»¶ã€‚ä½¿ç”¨ <code>git rev-list</code> é…åˆ <code>grep</code> å¯ä»¥æŸ¥æ‰¾å¯¹åº”çš„æ–‡ä»¶åï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ›¿æ¢ &lt;blob id&gt; ä¸ºä¸Šé¢æŸ¥åˆ°çš„ SHA-1</span>
git rev-list --objects --all | grep 2bdb752d86091c343f2f4d3af88f038f6b4c2846
</code></pre>
<p>è¾“å‡ºç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-text" lang="text">2bdb752d86091c343f2f4d3af88f038f6b4c2846 .yarn/cache/playwright-core-npm-1.55.0-1c6d3fab0f-843376a8e2.zip
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬å°±æ‰¾åˆ°äº†ç½ªé­ç¥¸é¦–ï¼Œä¾‹å¦‚ä¸Šé¢çš„ <code>yarn/cache/playwright-core-npm-1.55.0-1c6d3fab0f-843376a8e2.zip</code>ã€‚</p>
<h3 data-id="heading-6">ç¬¬äºŒæ­¥ï¼šåˆ†æé—®é¢˜</h3>
<p>é€šè¿‡ä¸Šé¢çš„æ­¥éª¤ï¼Œæˆ‘ä»¬å‘ç° <code>.yarn/cache/</code> ç›®å½•ä¸‹çš„ zip æ–‡ä»¶å ç”¨äº†å¤§é‡ç©ºé—´ã€‚</p>
<p><strong>åŸå› åˆ†æ</strong>ï¼š
åœ¨ä½¿ç”¨ Yarn 2+ (Berry) ç‰ˆæœ¬æ—¶ï¼Œé»˜è®¤ä¼šå°†ä¾èµ–ä»¥ zip å½¢å¼å­˜å‚¨ã€‚å¦‚æœé¡¹ç›®æ²¡æœ‰æ­£ç¡®é…ç½® <code>.gitignore</code>ï¼Œæˆ–è€…å¼€å‘è€…è¯¯æ“ä½œï¼Œå°±å®¹æ˜“å°† <code>.yarn/cache</code> ç›®å½•æäº¤åˆ° Git ä»“åº“ä¸­ã€‚è¿™äº›äºŒè¿›åˆ¶ç¼“å­˜æ–‡ä»¶ä¸ä»…ä½“ç§¯å¤§ï¼Œè€Œä¸”å˜åŠ¨é¢‘ç¹ï¼Œæ˜¯å¯¼è‡´ Git ä»“åº“è†¨èƒ€çš„å¸¸è§åŸå› ã€‚</p>
<p><strong>Yarn 2+ çš„ <code>.gitignore</code> æœ€ä½³å®è·µ</strong>ï¼š</p>
<p>æ ¹æ® Yarn å®˜æ–¹æ–‡æ¡£ï¼Œå¯¹äºå¤§å¤šæ•°é Zero-Installs çš„é¡¹ç›®ï¼Œæˆ‘ä»¬åº”è¯¥å¿½ç•¥ä»¥ä¸‹ç›®å½•ï¼š</p>
<pre><code class="hljs language-gitignore" lang="gitignore"># Yarn 2+
.yarn/*
!.yarn/patches
!.yarn/plugins
!.yarn/releases
!.yarn/sdks
!.yarn/versions

# å…³é”®ï¼šå¿½ç•¥ç¼“å­˜ç›®å½•
.yarn/cache

# å¿½ç•¥æ„å»ºçŠ¶æ€å’Œå®‰è£…çŠ¶æ€
.yarn/build-state.yml
.yarn/install-state.gz

# PnP ç›¸å…³
.pnp.*
</code></pre>
<p>æ—¢ç„¶æ‰¾åˆ°äº†é—®é¢˜æ ¹æºæ˜¯è¯¯æäº¤äº† <code>.yarn/cache</code>ï¼Œæ¥ä¸‹æ¥çš„ç›®æ ‡å°±æ˜¯å°†å…¶ä»å†å²è®°å½•ä¸­å½»åº•æ¸…é™¤ã€‚</p>
<h3 data-id="heading-7">ç¬¬ä¸‰æ­¥ï¼šæ¸…ç†å¤§æ–‡ä»¶</h3>
<p>æ‰¾åˆ°å¤§æ–‡ä»¶åï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶ä»æ‰€æœ‰å†å²è®°å½•ä¸­å½»åº•ç§»é™¤ã€‚è¿™é‡Œæ¨èä½¿ç”¨ <strong>BFG Repo-Cleaner</strong>ï¼Œå®ƒæ¯”åŸç”Ÿçš„ <code>git filter-branch</code> æ›´å¿«ã€æ›´ç®€å•ã€‚</p>
<h4 data-id="heading-8">ä½¿ç”¨ BFG Repo-Cleaner</h4>
<blockquote>
<p>[!info] BFG Repo-Cleaner
BFG æ˜¯ä¸€ä¸ªç”¨ Scala ç¼–å†™çš„å·¥å…·ï¼Œä¸“é—¨ç”¨äºå¿«é€Ÿæ¸…ç† Git ä»“åº“ä¸­çš„å¤§æ–‡ä»¶æˆ–éšç§ä¿¡æ¯ã€‚
å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Frtyley.github.io%2Fbfg-repo-cleaner%2F" target="_blank" title="https://rtyley.github.io/bfg-repo-cleaner/" ref="nofollow noopener noreferrer">rtyley.github.io/bfg-repo-clâ€¦</a></p>
</blockquote>
<h5 data-id="heading-9">1. ä¸‹è½½å¹¶è¿è¡Œ</h5>
<p>BFG æä¾›äº†ä¸€ä¸ª <code>.jar</code> åŒ…ï¼Œéœ€è¦å®‰è£… Java ç¯å¢ƒè¿è¡Œã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸‹è½½ bfg-1.14.0.jar åï¼Œåœ¨ä»“åº“ç›®å½•çš„ä¸Šä¸€çº§è¿è¡Œ</span>
<span class="hljs-comment"># my-repo ä¸ºä½ çš„ä»“åº“ç›®å½•åç§°</span>

<span class="hljs-comment"># æ–¹å¼ä¸€ï¼šç§»é™¤è¶…è¿‡æŒ‡å®šå¤§å°çš„æ–‡ä»¶ (ä¾‹å¦‚ 1M)</span>
java -jar bfg-1.14.0.jar --strip-blobs-bigger-than 1M my-repo

<span class="hljs-comment"># æ–¹å¼äºŒï¼šç§»é™¤æŒ‡å®šåç§°çš„æ–‡ä»¶ (æ”¯æŒ glob æ¨¡å¼)</span>
java -jar bfg-1.14.0.jar --delete-files <span class="hljs-string">'*.{zip,jar,exe}'</span> my-repo

<span class="hljs-comment"># æ–¹å¼ä¸‰ï¼šç§»é™¤æŒ‡å®šæ–‡ä»¶å¤¹</span>
java -jar bfg-1.14.0.jar --delete-folders <span class="hljs-string">'.svn'</span> my-repo
</code></pre>
<p>å¸¸ç”¨å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li><code>-b, --strip-blobs-bigger-than &lt;size&gt;</code>: ç§»é™¤è¶…è¿‡æŒ‡å®šå¤§å°çš„ blobã€‚</li>
<li><code>-B, --strip-biggest-blobs NUM</code>: ç§»é™¤æœ€å¤§çš„å‰ NUM ä¸ª blobã€‚</li>
<li><code>-D, --delete-files &lt;glob&gt;</code>: æŒ‰æ–‡ä»¶åç§»é™¤æ–‡ä»¶ã€‚</li>
<li><code>--delete-folders &lt;glob&gt;</code>: æŒ‰æ–‡ä»¶å¤¹åç§»é™¤æ–‡ä»¶å¤¹ã€‚</li>
<li><code>--no-blob-protection</code>: å…è®¸ä¿®æ”¹æœ€æ–°æäº¤ï¼ˆé»˜è®¤æƒ…å†µä¸‹ BFG ä¼šä¿æŠ¤æœ€æ–°çš„ä¸€æ¬¡ commit ä¸è¢«ä¿®æ”¹ï¼Œä»¥é˜²è¯¯åˆ ï¼‰ã€‚</li>
</ul>
<p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨å‘½ä»¤åˆ é™¤ <code>.yarn/cache</code> ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">java -jar bfg-1.14.0.jar --delete-folders <span class="hljs-string">'.yarn/cache'</span> my-repo
</code></pre>
<h5 data-id="heading-10">2. ç‰©ç†åˆ é™¤ä¸åƒåœ¾å›æ”¶</h5>
<p>BFG åªæ˜¯æ›´æ–°äº† Git çš„å¼•ç”¨ï¼ˆrefsï¼‰å’Œå†å²è®°å½•ï¼Œå¹¶æ²¡æœ‰çœŸæ­£ç‰©ç†åˆ é™¤ç£ç›˜ä¸Šçš„å¯¹è±¡ã€‚æˆ‘ä»¬éœ€è¦è¿è¡Œ Git çš„åƒåœ¾å›æ”¶å‘½ä»¤æ¥å½»åº•é‡Šæ”¾ç©ºé—´ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¼ºåˆ¶è¿‡æœŸæ‰€æœ‰ reflogï¼Œå¹¶æ‰§è¡Œåƒåœ¾å›æ”¶</span>
git reflog expire --expire=now --all &amp;&amp; git gc --prune=now --aggressive
</code></pre>
<p>æ‰§è¡Œå®Œä¸Šè¿°æ­¥éª¤åï¼Œå†æ¬¡æ£€æŸ¥ä»“åº“å¤§å°ï¼Œåº”è¯¥ä¼šå‘ç°ä½“ç§¯æ˜æ˜¾å‡å°ã€‚æœ€åï¼Œéœ€è¦<strong>å¼ºåˆ¶</strong>æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git push origin --force --all
</code></pre>
<blockquote>
<p>[!warning] è­¦å‘Š
è¿™æ˜¯ä¸€ä¸ªç ´åæ€§æ“ä½œï¼Œä¼šé‡å†™ Git å†å²ã€‚åœ¨æ‰§è¡Œä¹‹å‰ï¼Œè¯·åŠ¡å¿…<strong>å¤‡ä»½</strong>ä½ çš„ä»“åº“ï¼
æ­¤å¤–ï¼Œå¼ºåˆ¶æ¨é€åï¼Œå…¶ä»–åä½œè€…éœ€è¦é‡æ–° clone ä»“åº“æˆ–è¿›è¡Œ rebase æ“ä½œã€‚</p>
</blockquote>
<h3 data-id="heading-11">å‚è€ƒèµ„æ–™</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgit-scm.com%2Fbook%2Fen%2Fv2%2FGit-Internals-Maintenance-and-Data-Recovery" target="_blank" title="https://git-scm.com/book/en/v2/Git-Internals-Maintenance-and-Data-Recovery" ref="nofollow noopener noreferrer">Git - Maintenance and Data Recovery</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Frtyley.github.io%2Fbfg-repo-cleaner%2F" target="_blank" title="https://rtyley.github.io/bfg-repo-cleaner/" ref="nofollow noopener noreferrer">BFG Repo-Cleaner</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2F18F%2FC2%2Fissues%2F439" target="_blank" title="https://github.com/18F/C2/issues/439" ref="nofollow noopener noreferrer">GitHub Issue: Reduce git repository size</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChain v1 é‡å¤§æ›´æ–°è®²è§£âš âš âš ]]></title>    <link>https://juejin.cn/post/7575050949958746148</link>    <guid>https://juejin.cn/post/7575050949958746148</guid>    <pubDate>2025-11-21T17:44:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575050949958746148" data-draft-id="7575021014032678931" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangChain v1 é‡å¤§æ›´æ–°è®²è§£âš âš âš "/> <meta itemprop="keywords" content="LangChain,Python,Agent"/> <meta itemprop="datePublished" content="2025-11-21T17:44:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å´ä½³æµ©"/> <meta itemprop="url" content="https://juejin.cn/user/2696441245481975"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangChain v1 é‡å¤§æ›´æ–°è®²è§£âš âš âš 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2696441245481975/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å´ä½³æµ©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-21T17:44:36.000Z" title="Fri Nov 21 2025 17:44:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{font-family:-apple-system,system-ui,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial;color:#00325e}.markdown-body ::selection{background-color:#00325e;color:#fff}.markdown-body blockquote{padding:10px 20px;background-color:#fffaf0;box-shadow:0 3px 10px 0 rgba(255,172,194,.24);border:1px solid #f3ca8e;transition:all .2s;margin:1em 0;border-radius:5px}.markdown-body blockquote p{font-size:14px;line-height:25px;color:#795548}.markdown-body blockquote p:last-child{margin:0}.markdown-body blockquote:hover{border-color:#ff9800;background-color:#fff8e0;box-shadow:0 6px 10px -5px rgba(225,173,98,.3803921569)}.markdown-body blockquote code{color:#ff502c}.markdown-body pre{border:1px solid #8cc0f3;box-shadow:0 3px 10px 0 rgba(255,198,198,.28);border-radius:5px;transition:all .2s;overflow-x:auto;white-space:pre-wrap}.markdown-body pre:hover{border-color:#6d9dce}.markdown-body pre&gt;code{padding:10px 20px;color:#00325e;background:#f0f8ff;font-size:12px;line-height:1.6;display:block}.markdown-body code{background:#f6fbff;color:#0b5393;padding:2px 4px;border-radius:4px;font-size:12px}.markdown-body p{font-size:14px;line-height:28px;text-align:justify;margin-bottom:17px;color:#595959}.markdown-body a{color:#00325e;text-decoration:none}.markdown-body a:after{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAQdJREFUKFNt0DtLA0EUBeBzZle0Eks7rcUfEfBRCha7NorYa6NmVJzgyi4smUgKtdZGCJktLMVH4Y8QeztLWyE7VyLEuNFbXj4Oh0P8c8mZm+uJrEN4BJFTeP/MUVe3bnocfALwkOlo1zS7iZAzf6Cx7oXgbaqjxiDEWCcVaGyxQ8pSWo9XhqhoQ/xUFbaKjhe5V+CmR7mnSplEEF6GSmJ+F/d0KHvbCIIJCLc85U6BC5mONgbJNM3uFag++sX7z8O8MzsWBucifMx0dDGE1kmm458KDVukAlnNdDz/exEeW3dNkbfsYC0xtmgDWP6ELLZ0/F6BJu/UoFQN5AkoeUjeJPvx6+i+X5Sjah4tA6gYAAAAAElFTkSuQmCC);margin-left:2px}.markdown-body a:hover{box-shadow:0 1px}.markdown-body table{max-width:100%;border-collapse:collapse;border-spacing:0;box-shadow:0 3px 10px 0 rgba(255,238,172,.24);transition:all .2s}.markdown-body table:hover{box-shadow:0 3px 10px 0 rgba(185,169,103,.24)}.markdown-body table tr th{border:1px solid #8cc0f3;background-color:#f0f8ff;padding:12px 15px}.markdown-body table tr td{border:1px solid rgba(243,202,142,.4);padding:12px 15px}.markdown-body table tbody tr{transition:all .2s}.markdown-body table tbody tr:hover td{border-color:#f3ca8e;background-color:#fff8e0;z-index:1}.markdown-body img{max-width:100%}.markdown-body h1{font-size:20px;margin-top:30px;margin-bottom:10px;padding-left:30px;position:relative}.markdown-body h1&gt;code{font-size:20px}.markdown-body h1:before{content:"ğŸº";display:block;font-size:18px;width:18px;height:18px;left:0;position:absolute}.markdown-body h2{font-size:18px;margin-top:30px;margin-bottom:10px;padding-left:28px;position:relative}.markdown-body h2&gt;code{font-size:18px}.markdown-body h2:before{content:"ğŸ»";display:block;font-size:16px;width:16px;height:16px;left:0;position:absolute}.markdown-body h3{font-size:16px;margin-top:30px;margin-bottom:10px;padding-left:26px;position:relative}.markdown-body h3&gt;code{font-size:16px}.markdown-body h3:before{content:"ğŸ¥‚";display:block;font-size:14px;width:14px;height:14px;left:0;position:absolute}.markdown-body h4{font-size:14px;margin-top:30px;margin-bottom:10px;padding-left:24px;position:relative}.markdown-body h4&gt;code{font-size:14px}.markdown-body h4:before{content:"ğŸ¥ƒ";display:block;font-size:12px;width:12px;height:12px;left:0;position:absolute}.markdown-body h5{font-size:12px;margin-top:30px;margin-bottom:10px}.markdown-body h5&gt;code{font-size:12px}.markdown-body h6{font-size:10px;margin-top:30px;margin-bottom:10px}.markdown-body h6&gt;code{font-size:10px}.markdown-body h1,.markdown-body h2{color:#ff502c}.markdown-body hr{height:4px;border:none;margin-top:32px;margin-bottom:32px;background-size:4px 1px;background-image:linear-gradient(270deg,#6d9dce,#8cc0f3 25%,transparent 50%)}.markdown-body hr:nth-child(2n){background-image:linear-gradient(270deg,#ff9800,#fff8e0 25%,transparent 50%)}.markdown-body ul{padding-inline-start:20px}.markdown-body ul li{list-style-type:"ğŸ”¸"}.markdown-body ul li li{list-style-type:"â—»ï¸"}.markdown-body ul li li li{list-style-type:"â–«ï¸"}.markdown-body ol{padding-inline-start:20px}.markdown-body ol ::marker{color:#ff9800}.markdown-body ol,.markdown-body ul{line-height:2em}.markdown-body li{padding-inline-start:1ch}.markdown-body li.task-list-item{list-style:none;padding-inline-start:0}.markdown-body li input{padding-right:2px}.markdown-body li input[type=checkbox i]{appearance:none}.markdown-body li input:before{content:"ğŸŸ©";display:block;width:13px;height:13px}.markdown-body li input:checked:before{content:"âœ…"}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">LangChain v1 é‡å¤§æ›´æ–°è®²è§£</h2>
<blockquote>
<p>ä¸ºä»€ä¹ˆæ²¡æœ‰å…ˆå‘å¸ƒdemoæ•™å­¦è€Œæ˜¯å…ˆå‘å¸ƒä¸€ä¸ªä»€ä¹ˆé‡å¤§æ›´æ–°</p>
<p>å› ä¸ºlangchainæ›´æ–°äº†ï¼Œæ›´æ–°è¿˜æŒºå¤šçš„æ‰€ä»¥å»ºè®®å¤§å®¶è¿˜æ˜¯ä»æ–°ç‰ˆæœ¬å¼€å§‹å­¦ä¹ </p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2a3016eef8c4ab0933e83e98f1dd875~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC05L2z5rWp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764351876&amp;x-signature=Ni9%2BXYxzHe7feYf8ZfLFx6ldvXM%3D" alt="äººå·¥æ™ºèƒ½çš„æ— é™å¯èƒ½.png" loading="lazy"/></p>
<p><strong>ä½œè€…</strong>ï¼šå´ä½³æµ©</p>
<p><strong>æœ€åæ›´æ–°</strong>ï¼š2025-11-22</p>
<p><strong>é€‚ç”¨ç‰ˆæœ¬</strong>ï¼šLangChain v1.0+</p>
<h3 data-id="heading-1">ç›®å½•</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.google.com%2Fsearch%3Fq%3D%2523-%25E4%25B8%2580langchain-v1-%25E4%25B8%25BA%25E4%25BB%2580%25E4%25B9%2588%25E6%2598%25AF%25E4%25B8%2580%25E6%25AC%25A1%25E5%25A4%25A7%25E7%2589%2588%25E6%259C%25AC%25E9%259D%25A9%25E5%2591%25BD" target="_blank" title="https://www.google.com/search?q=%23-%E4%B8%80langchain-v1-%E4%B8%BA%E4%BB%80%E4%B9%88%E6%98%AF%E4%B8%80%E6%AC%A1%E5%A4%A7%E7%89%88%E6%9C%AC%E9%9D%A9%E5%91%BD" ref="nofollow noopener noreferrer">ğŸ“Œ ä¸€ã€LangChain v1 ä¸ºä»€ä¹ˆæ˜¯ä¸€æ¬¡â€œå¤§ç‰ˆæœ¬é©å‘½â€ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.google.com%2Fsearch%3Fq%3D%2523-%25E4%25BA%258Cv01--v10%25E5%25B7%25AE%25E5%25BC%2582%25E5%25AF%25B9%25E7%2585%25A7%25E8%25A1%25A8%25E6%25A0%25B8%25E5%25BF%2583%25E5%25BF%2585%25E8%25AF%25BB" target="_blank" title="https://www.google.com/search?q=%23-%E4%BA%8Cv01--v10%E5%B7%AE%E5%BC%82%E5%AF%B9%E7%85%A7%E8%A1%A8%E6%A0%B8%E5%BF%83%E5%BF%85%E8%AF%BB" ref="nofollow noopener noreferrer">ğŸš€ äºŒã€v0.1 â†’ v1.0ï¼šå·®å¼‚å¯¹ç…§è¡¨ï¼ˆæ ¸å¿ƒå¿…è¯»ï¼‰</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.google.com%2Fsearch%3Fq%3D%2523-%25E4%25B8%2589langchain-v1-%25E6%259E%25B6%25E6%259E%2584%25E6%2580%25BB%25E8%25A7%2588" target="_blank" title="https://www.google.com/search?q=%23-%E4%B8%89langchain-v1-%E6%9E%B6%E6%9E%84%E6%80%BB%E8%A7%88" ref="nofollow noopener noreferrer">ğŸ§± ä¸‰ã€LangChain v1 æ¶æ„æ€»è§ˆ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.google.com%2Fsearch%3Fq%3D%2523-%25E5%259B%259Bcreate_agent%25E5%2585%25A8%25E6%2596%25B0%25E7%259A%2584-agent-%25E5%2588%259B%25E5%25BB%25BA%25E6%2596%25B9%25E5%25BC%258F" target="_blank" title="https://www.google.com/search?q=%23-%E5%9B%9Bcreate_agent%E5%85%A8%E6%96%B0%E7%9A%84-agent-%E5%88%9B%E5%BB%BA%E6%96%B9%E5%BC%8F" ref="nofollow noopener noreferrer">ğŸ§° å››ã€create_agentï¼šå…¨æ–°çš„ Agent åˆ›å»ºæ–¹å¼</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.google.com%2Fsearch%3Fq%3D%2523-%25E4%25BA%2594middleware%25E6%25A0%25B8%25E5%25BF%2583%25E6%2589%25A9%25E5%25B1%2595%25E6%259C%25BA%25E5%2588%25B6%25E6%25B4%258B%25E8%2591%25B1%25E6%25A8%25A1%25E5%259E%258B" target="_blank" title="https://www.google.com/search?q=%23-%E4%BA%94middleware%E6%A0%B8%E5%BF%83%E6%89%A9%E5%B1%95%E6%9C%BA%E5%88%B6%E6%B4%8B%E8%91%B1%E6%A8%A1%E5%9E%8B" ref="nofollow noopener noreferrer">ğŸ”§ äº”ã€Middlewareï¼šæ ¸å¿ƒæ‰©å±•æœºåˆ¶ï¼ˆæ´‹è‘±æ¨¡å‹ï¼‰</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.google.com%2Fsearch%3Fq%3D%2523-%25E5%2585%25ADcontent_blocks%25E8%25B7%25A8%25E6%25A8%25A1%25E5%259E%258B%25E7%25BB%259F%25E4%25B8%2580%25E8%25BE%2593%25E5%2587%25BA" target="_blank" title="https://www.google.com/search?q=%23-%E5%85%ADcontent_blocks%E8%B7%A8%E6%A8%A1%E5%9E%8B%E7%BB%9F%E4%B8%80%E8%BE%93%E5%87%BA" ref="nofollow noopener noreferrer">ğŸ“¦ å…­ã€content_blocksï¼šè·¨æ¨¡å‹ç»Ÿä¸€è¾“å‡º</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.google.com%2Fsearch%3Fq%3D%2523-%25E4%25B8%2583%25E7%25BB%2593%25E6%259E%2584%25E5%258C%2596%25E8%25BE%2593%25E5%2587%25BAstructured-output" target="_blank" title="https://www.google.com/search?q=%23-%E4%B8%83%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BAstructured-output" ref="nofollow noopener noreferrer">ğŸ“ ä¸ƒã€ç»“æ„åŒ–è¾“å‡ºï¼ˆStructured Outputï¼‰</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.google.com%2Fsearch%3Fq%3D%2523-%25E5%2585%25AB%25E5%2591%25BD%25E5%2590%258D%25E7%25A9%25BA%25E9%2597%25B4%25E9%2587%258D%25E6%259E%2584--langchain-classic" target="_blank" title="https://www.google.com/search?q=%23-%E5%85%AB%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E9%87%8D%E6%9E%84--langchain-classic" ref="nofollow noopener noreferrer">ğŸ“š å…«ã€å‘½åç©ºé—´é‡æ„ + langchain-classic</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.google.com%2Fsearch%3Fq%3D%2523-%25E4%25B9%259Dv0--v1-%25E8%25BF%2581%25E7%25A7%25BB%25E6%258C%2587%25E5%258D%2597%25E5%25AE%259E%25E6%2588%2598%25E7%2589%2588" target="_blank" title="https://www.google.com/search?q=%23-%E4%B9%9Dv0--v1-%E8%BF%81%E7%A7%BB%E6%8C%87%E5%8D%97%E5%AE%9E%E6%88%98%E7%89%88" ref="nofollow noopener noreferrer">ğŸ›  ä¹ã€v0 â†’ v1 è¿ç§»æŒ‡å—ï¼ˆå®æˆ˜ç‰ˆï¼‰</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.google.com%2Fsearch%3Fq%3D%2523-%25E5%258D%2581%25E6%258E%25A8%25E8%258D%2590%25E7%259A%2584%25E7%2594%259F%25E4%25BA%25A7%25E7%25BA%25A7%25E9%25A1%25B9%25E7%259B%25AE%25E7%25BB%2593%25E6%259E%2584%25E5%259B%25BE" target="_blank" title="https://www.google.com/search?q=%23-%E5%8D%81%E6%8E%A8%E8%8D%90%E7%9A%84%E7%94%9F%E4%BA%A7%E7%BA%A7%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E5%9B%BE" ref="nofollow noopener noreferrer">ğŸ— åã€æ¨èçš„ç”Ÿäº§çº§é¡¹ç›®ç»“æ„å›¾</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.google.com%2Fsearch%3Fq%3D%2523-%25E5%258D%2581%25E4%25B8%2580%25E7%259C%259F%25E5%25AE%259E%25E4%25BC%2581%25E4%25B8%259A%25E7%25BA%25A7%25E6%25A1%2588%25E4%25BE%258B%25E5%25A4%259A%25E6%25AD%25A5%25E9%25AA%25A4%25E4%25BB%25BB%25E5%258A%25A1-agent" target="_blank" title="https://www.google.com/search?q=%23-%E5%8D%81%E4%B8%80%E7%9C%9F%E5%AE%9E%E4%BC%81%E4%B8%9A%E7%BA%A7%E6%A1%88%E4%BE%8B%E5%A4%9A%E6%AD%A5%E9%AA%A4%E4%BB%BB%E5%8A%A1-agent" ref="nofollow noopener noreferrer">ğŸ§ª åä¸€ã€çœŸå®ä¼ä¸šçº§æ¡ˆä¾‹ï¼šå¤šæ­¥éª¤ä»»åŠ¡ Agent</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.google.com%2Fsearch%3Fq%3D%2523-%25E5%258D%2581%25E4%25BA%258C%25E5%258F%25AF%25E8%25BF%2590%25E8%25A1%258C%25E7%25BB%25BC%25E5%2590%2588%25E7%25A4%25BA%25E4%25BE%258B%25E4%25BB%25A3%25E7%25A0%2581" target="_blank" title="https://www.google.com/search?q=%23-%E5%8D%81%E4%BA%8C%E5%8F%AF%E8%BF%90%E8%A1%8C%E7%BB%BC%E5%90%88%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81" ref="nofollow noopener noreferrer">ğŸ“„ åäºŒã€å¯è¿è¡Œç»¼åˆç¤ºä¾‹ä»£ç </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.google.com%2Fsearch%3Fq%3D%2523-%25E5%258D%2581%25E4%25B8%2589%25E6%2580%25BB%25E7%25BB%2593" target="_blank" title="https://www.google.com/search?q=%23-%E5%8D%81%E4%B8%89%E6%80%BB%E7%BB%93" ref="nofollow noopener noreferrer">ğŸ“ åä¸‰ã€æ€»ç»“</a></li>
</ul>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3c0946c7f754c509c415ec7c41395e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC05L2z5rWp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764351876&amp;x-signature=%2BwOZ4LEjJgMGSln38CEuIWgLku4%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">0. ç¯å¢ƒå‡†å¤‡</h3>
<p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ Python ç‰ˆæœ¬ <strong>â‰¥ 3.9</strong>ï¼Œå¹¶å®‰è£…ä»¥ä¸‹æ ¸å¿ƒåŒ…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£… v1 æ ¸å¿ƒåŒ…ã€ç»å…¸å…¼å®¹åŒ…å’Œå›¾è¿è¡Œæ—¶</span>
pip install -U langchain langchain-classic langgraph

<span class="hljs-comment"># å®‰è£…é€‚é…çš„æ¨¡å‹æä¾›å•†åŒ… (ä»¥ OpenAI ä¸ºä¾‹)</span>
pip install -U langchain-openai
</code></pre>
<hr/>
<h3 data-id="heading-3">ä¸€ã€LangChain v1 ä¸ºä»€ä¹ˆæ˜¯ä¸€æ¬¡â€œå¤§ç‰ˆæœ¬é©å‘½â€ï¼Ÿ</h3>
<p>LangChain v1 ä¸å†ä»…ä»…æ˜¯ä¸€ä¸ªâ€œLLM è°ƒç”¨å·¥å…·ç®±â€ï¼Œè€Œæ˜¯æ­£å¼è½¬å‘<strong>æ„å»ºç”Ÿäº§çº§ Agent ç³»ç»Ÿçš„å·¥ç¨‹æ¡†æ¶</strong>ã€‚</p>
<p><strong>æ ¸å¿ƒå˜åŒ–åŒ…æ‹¬ï¼š</strong></p>
<ol>
<li><strong><code>create_agent</code></strong>ï¼šæ­£å¼æˆä¸º Agent çš„æ ‡å‡†æ„å»ºæ–¹å¼ï¼ˆåº•å±‚åŸºäº LangGraphï¼‰ã€‚</li>
<li><strong>Middleware (ä¸­é—´ä»¶)</strong>ï¼šå…è®¸åœ¨ä»»æ„é˜¶æ®µï¼ˆæ¨¡å‹è°ƒç”¨å‰ã€å·¥å…·æ‰§è¡Œæ—¶ã€è¾“å‡ºåï¼‰æ‹¦æˆªå¹¶ä¿®æ”¹é€»è¾‘ã€‚</li>
<li><strong><code>content_blocks</code></strong>ï¼šæ‰€æœ‰æ¨¡å‹è¾“å‡ºï¼ˆæ¨ç†/æ–‡æœ¬/å·¥å…·è°ƒç”¨ï¼‰ç»Ÿä¸€ä¸ºæ ‡å‡†æ ¼å¼ï¼Œä¸å†ä¾èµ–æ­£åˆ™è§£æã€‚</li>
<li><strong>ç»“æ„åŒ–è¾“å‡º</strong>ï¼šPydantic Schema æˆä¸ºä¸€ç­‰å…¬æ°‘ï¼Œæå¤§æå‡ç¨³å®šæ€§ã€‚</li>
<li><strong>å‘½åç©ºé—´æ‹†åˆ†</strong>ï¼šæ—§ APIï¼ˆå¦‚ Chainsï¼‰å…¨éƒ¨è¿å…¥ <code>langchain-classic</code>ï¼Œä¸»åŒ…åªä¿ç•™ Agent æ ¸å¿ƒã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-4">äºŒã€v0.1 â†’ v1.0ï¼šå·®å¼‚å¯¹ç…§è¡¨ï¼ˆæ ¸å¿ƒå¿…è¯»ï¼‰</h3>
<p>è¿™æ˜¯ç†è§£ v1 æœ€é‡è¦çš„ä¸€å¼ è¡¨ï¼Œå±•ç¤ºäº†ä»â€œè„šæœ¬æ€ç»´â€åˆ°â€œå·¥ç¨‹æ€ç»´â€çš„è½¬å˜ã€‚</p>

































































<table><thead><tr><th><strong>é¡¹ç›®</strong></th><th><strong>LangChain v0.x (æ—§ç‰ˆ)</strong></th><th><strong>LangChain v1.0 (æ–°ç‰ˆ)</strong></th><th><strong>æ ¸å¿ƒå·®å¼‚</strong></th></tr></thead><tbody><tr><td><strong>ä¸­å¿ƒæ€æƒ³</strong></td><td>Chains (é“¾å¼è°ƒç”¨)</td><td><strong>Agents (æ™ºèƒ½ä½“)</strong></td><td>ä»çº¿æ€§æ‰§è¡Œè½¬å‘å¾ªç¯å›¾æ‰§è¡Œ (Graph)</td></tr><tr><td><strong>æ„å»ºå…¥å£</strong></td><td><code>initialize_agent</code></td><td><strong><code>create_agent</code></strong></td><td>ç»Ÿä¸€çš„æ–°æ ‡å‡†æ¥å£</td></tr><tr><td><strong>åº•å±‚å¼•æ“</strong></td><td><code>AgentExecutor</code> (ç¡¬ç¼–ç å¾ªç¯)</td><td><strong>LangGraph</strong></td><td>æ”¯æŒæŒä¹…åŒ–ã€æµå¼ã€åˆ†æ”¯ã€å¾ªç¯çš„å›¾è¿è¡Œæ—¶</td></tr><tr><td><strong>æµå¼èƒ½åŠ›</strong></td><td>éƒ¨åˆ†æ”¯æŒ (Tokençº§)</td><td><strong>å…¨é“¾è·¯æµå¼</strong></td><td>æ”¯æŒ Tokenã€ä¸­é—´æ­¥éª¤ã€æ¨ç†è¿‡ç¨‹çš„å®æ—¶æµ</td></tr><tr><td><strong>æ‰©å±•æœºåˆ¶</strong></td><td>æ—  (éœ€ä¿®æ”¹æºç æˆ–Prompt)</td><td><strong>Middleware</strong></td><td>å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸé’©å­ (Hooks)</td></tr><tr><td><strong>å·¥å…·å®šä¹‰</strong></td><td><code>Tool</code> + <code>func</code></td><td><code>Tool</code> + <strong>Pydantic Schema</strong></td><td>ç±»å‹æ›´å®‰å…¨ï¼Œå‚æ•°å®šä¹‰æ›´æ¸…æ™°</td></tr><tr><td><strong>ç»“æ„åŒ–è¾“å‡º</strong></td><td>JSON Parser + Regex</td><td><strong>Structured Output</strong></td><td>ç›´æ¥ç»‘å®š Pydantic ç±»ï¼Œç”±æ¨¡å‹åº•å±‚ä¿è¯æ ¼å¼</td></tr><tr><td><strong>è¾“å‡ºè§£æ</strong></td><td>çº¯æ–‡æœ¬ + æ­£åˆ™åŒ¹é…</td><td><strong><code>content_blocks</code></strong></td><td>æ ‡å‡†åŒ–å¯¹è±¡ (æ¨ç†å—ã€æ–‡æœ¬å—ã€å·¥å…·å—)</td></tr><tr><td><strong>åŒ…ç®¡ç†</strong></td><td><code>langchain.*</code></td><td><strong><code>langchain-classic</code></strong></td><td>æ—§åŠŸèƒ½ç§»è‡³ classic åŒ…ï¼Œä¿æŒä¸»åŒ…è½»é‡</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-5">ä¸‰ã€LangChain v1 æ¶æ„æ€»è§ˆ</h3>
<blockquote>
<p><strong>ğŸ’¡ æ ¸å¿ƒæç¤º</strong>ï¼šLangChain v1 çš„åº•å±‚å¼•æ“å®é™…ä¸Šæ˜¯ <strong>LangGraph</strong>ã€‚<code>create_agent</code> æœ¬è´¨ä¸Šæ˜¯ä¸ºä½ é¢„æ„å»ºäº†ä¸€ä¸ªæ ‡å‡†çš„ LangGraph å›¾ã€‚</p>
</blockquote>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    subgraph AgentRuntime ["LangGraph è¿è¡Œæ—¶"]
        direction TB
        A["ç”¨æˆ·è¾“å…¥ (Messages)"] --&gt; B[" æ¨¡å‹æ¨ç† (LLM)"]
        B --&gt; C{"å†³ç­–èŠ‚ç‚¹"}
        C --&gt;|éœ€è¦å·¥å…·| D[" å·¥å…·æ‰§è¡Œ (Tool Execution)"]
        D --&gt; E[" å·¥å…·ç»“æœåé¦ˆ"]
        E --&gt; B
        C --&gt;|æ— éœ€å·¥å…·/ç»“æŸ| F[" ç”Ÿæˆæœ€ç»ˆå›ç­”"]
    end
    
    style A fill:#e1f5fe,stroke:#01579b
    style B fill:#fff9c4,stroke:#fbc02d
    style D fill:#e8f5e9,stroke:#2e7d32
</code></pre>
<hr/>
<h3 data-id="heading-6">å››ã€create_agentï¼šå…¨æ–°çš„ Agent åˆ›å»ºæ–¹å¼</h3>
<p>ä¸ºä»€ä¹ˆåºŸå¼ƒ initialize_agentï¼Ÿ</p>
<p>å› ä¸º v1 ç»Ÿä¸€ä½¿ç”¨å›¾æ¶æ„ï¼ˆGraph Architectureï¼‰ã€‚æ‰€æœ‰çš„ Agent æœ¬è´¨ä¸Šéƒ½æ˜¯ï¼šæ¨ç† â†’ å·¥å…· â†’ å†æ¨ç† çš„å¾ªç¯ã€‚create_agent æ˜¯è¿™ä¸ªæ ‡å‡†å¾ªç¯çš„å·¥å‚å‡½æ•°ã€‚</p>
<p><strong>åŸºæœ¬ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> create_agent
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI

<span class="hljs-comment"># 1. å®šä¹‰æ¨¡å‹</span>
model = ChatOpenAI(model=<span class="hljs-string">"gpt-4o"</span>)

<span class="hljs-comment"># 2. åˆ›å»º Agent</span>
agent = create_agent(
    model=model,
    tools=[search_tool, calculator_tool],
    system_prompt=<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¹äºåŠ©äººçš„é‡‘èåˆ†æå¸ˆã€‚"</span>
)

<span class="hljs-comment"># 3. è¿è¡Œ (Invoke)</span>
result = agent.invoke({<span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"åˆ†æ AAPL è‚¡ä»·"</span>}]})
</code></pre>
<hr/>
<h3 data-id="heading-7">äº”ã€Middlewareï¼šæ ¸å¿ƒæ‰©å±•æœºåˆ¶ï¼ˆæ´‹è‘±æ¨¡å‹ï¼‰</h3>
<p>ä¸­é—´ä»¶æ˜¯ v1 æœ€å¼ºå¤§çš„åŠŸèƒ½ï¼Œå…è®¸ä½ åœ¨ Agent ç”Ÿå‘½å‘¨æœŸçš„ä»»æ„èŠ‚ç‚¹æ’å…¥é€»è¾‘ï¼ˆå¦‚é‰´æƒã€æ—¥å¿—ã€è·¯ç”±ï¼‰ã€‚</p>
<p><strong>ç”Ÿå‘½å‘¨æœŸæ—¶åºå›¾ï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User
    participant MW as Middleware (ä¸­é—´ä»¶å±‚)
    participant Agent as Agent Runtime
    participant Model as LLM

    User-&gt;&gt;Agent: invoke(input)
    Agent-&gt;&gt;MW: 1. before_agent_start
    MW--&gt;&gt;Agent: (æ¸…æ´—åçš„è¾“å…¥)

    loop æ€è€ƒä¸æ‰§è¡Œå¾ªç¯
        Agent-&gt;&gt;MW: 2. before_model
        Note right of MW: åŠ¨æ€ä¿®æ”¹ Prompt / è·¯ç”±æ¨¡å‹
        
        rect rgb(240,240,240)
            MW-&gt;&gt;Model: 3. wrap_model_call
            Model--&gt;&gt;MW: è¿”å›åŸå§‹ç»“æœ
        end
        
        MW--&gt;&gt;Agent: 4. after_model (æ ¡éªŒè¾“å‡º)

        opt å·¥å…·è°ƒç”¨
            Agent-&gt;&gt;MW: 5. wrap_tool_call
            Note right of MW: æ•æ„Ÿæ“ä½œå®¡æ‰¹ / å®¡è®¡
            MW--&gt;&gt;Agent: å·¥å…·ç»“æœ
        end
    end

    Agent-&gt;&gt;MW: 6. after_agent
    MW--&gt;&gt;User: æœ€ç»ˆå“åº”
</code></pre>
<hr/>
<h3 data-id="heading-8">å…­ã€content_blocksï¼šè·¨æ¨¡å‹ç»Ÿä¸€è¾“å‡º</h3>
<p>è§£å†³â€œä¸åŒæ¨¡å‹è¿”å›æ ¼å¼ä¸åŒâ€çš„ç—›ç‚¹ã€‚</p>
<p>æ¨¡å‹è¾“å‡ºç°åœ¨åŒ…å«ç»Ÿä¸€çš„ .content_blocks å±æ€§ï¼š</p>
<ul>
<li><code>reasoning</code>: æ¨¡å‹çš„æ€è€ƒè¿‡ç¨‹ï¼ˆå¦‚ Chain of Thoughtï¼‰ã€‚</li>
<li><code>tool_call</code>: ç»“æ„åŒ–çš„å·¥å…·è°ƒç”¨è¯·æ±‚ã€‚</li>
<li><code>text</code>: æœ€ç»ˆå›å¤æ–‡æœ¬ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-9">ä¸ƒã€ç»“æ„åŒ–è¾“å‡ºï¼ˆStructured Outputï¼‰</h3>
<p>v1 æ¨èä½¿ç”¨ <strong>Pydantic Schema</strong> æ¥å¼ºåˆ¶æ¨¡å‹è¾“å‡ºç‰¹å®šæ ¼å¼ï¼Œè€Œä¸æ˜¯åœ¨ Prompt é‡Œå†™â€œè¯·è¿”å› JSONâ€ã€‚</p>
<p><strong>ä¸‰ç§ç­–ç•¥ï¼š</strong></p>
<ol>
<li><strong>SchemaBasedStructurer</strong> (æ¨è)ï¼šç›´æ¥ä¼ å…¥ Pydantic ç±»ã€‚</li>
<li><strong>ToolStrategy</strong>ï¼šåˆ©ç”¨ Tool Calling æœºåˆ¶è¾“å‡ºç»“æ„ã€‚</li>
<li><strong>ProviderStrategy</strong>ï¼šåˆ©ç”¨æ¨¡å‹åŸç”Ÿ JSON Modeï¼ˆå¦‚ OpenAI JSON Objectï¼‰ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-10">å…«ã€å‘½åç©ºé—´é‡æ„ + langchain-classic</h3>
<p>ä¸ºäº†ç»™ Agent è®©è·¯ï¼Œæ—§çš„â€œé“¾å¼â€ç»„ä»¶è¢«ç§»å…¥ <code>classic</code> åŒ…ã€‚</p>
<p><strong>è¿ç§»å¯¹ç…§ï¼š</strong></p>

























<table><thead><tr><th><strong>ç»„ä»¶</strong></th><th><strong>æ—§å¼•å…¥æ–¹å¼</strong></th><th><strong>v1 æ–°å¼•å…¥æ–¹å¼</strong></th></tr></thead><tbody><tr><td><strong>Memory</strong></td><td><code>from langchain.memory import ...</code></td><td><code>from langchain_classic.memory import ...</code></td></tr><tr><td><strong>Chains</strong></td><td><code>from langchain.chains import ...</code></td><td><code>from langchain_classic.chains import ...</code></td></tr><tr><td><strong>Retrievers</strong></td><td><code>from langchain.retrievers import ...</code></td><td><code>from langchain_classic.retrievers import ...</code></td></tr></tbody></table>
<hr/>
<h3 data-id="heading-11">ğŸ›  ä¹ã€v0 â†’ v1 è¿ç§»æŒ‡å—ï¼ˆå®æˆ˜ç‰ˆï¼‰</h3>
<h4 data-id="heading-12">1. ConversationChain â†’ create_agent</h4>
<ul>
<li>
<p>âŒ <strong>æ—§ (v0)</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain.chains <span class="hljs-keyword">import</span> ConversationChain
chain = ConversationChain(llm=llm)
chain.run(<span class="hljs-string">"Hi"</span>)
</code></pre>
</li>
<li>
<p>âœ” <strong>æ–° (v1)</strong>ï¼š</p>
<pre><code class="hljs language-Python" lang="Python"><span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> create_agent
<span class="hljs-comment"># create_agent è‡ªå¸¦è®°å¿†ç®¡ç† (é€šè¿‡ LangGraph checkpoint)</span>
agent = create_agent(model=llm, tools=[])
agent.invoke({<span class="hljs-string">"messages"</span>: [...]})
</code></pre>
</li>
</ul>
<h4 data-id="heading-13">2. LLMChain â†’ model.invoke</h4>
<ul>
<li>
<p>âŒ <strong>æ—§ (v0)</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python">chain = LLMChain(prompt=prompt, llm=llm)
chain.run(variable=<span class="hljs-string">"value"</span>)
</code></pre>
</li>
<li>
<p>âœ” <strong>æ–° (v1)</strong>ï¼š</p>
<pre><code class="hljs language-Python" lang="Python"><span class="hljs-comment"># ç›´æ¥ä½¿ç”¨ LCEL (LangChain Expression Language)</span>
chain = prompt | llm
chain.invoke({<span class="hljs-string">"variable"</span>: <span class="hljs-string">"value"</span>})
</code></pre>
</li>
</ul>
<h4 data-id="heading-14">3. Tool å®šä¹‰æ–¹å¼</h4>
<ul>
<li>âŒ <strong>æ—§ (v0)</strong>ï¼šä¾èµ– <code>func</code> å’Œæ–‡æ¡£å­—ç¬¦ä¸²è§£æã€‚</li>
<li>âœ” <strong>æ–° (v1)</strong>ï¼šå¼ºçƒˆå»ºè®®ä½¿ç”¨ <code>@tool</code> è£…é¥°å™¨å¹¶é…åˆ Pydantic ç±»å‹çš„å‚æ•°æ³¨è§£ï¼Œæˆ–è€…ä½¿ç”¨ <code>create_tool(schema=MySchema)</code>ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-15">åã€æ¨èçš„ç”Ÿäº§çº§é¡¹ç›®ç»“æ„å›¾</h3>
<p>åœ¨ v1 æ—¶ä»£ï¼Œæ¨èé‡‡ç”¨åˆ†å±‚æ¶æ„æ¥ç®¡ç† Agent é¡¹ç›®ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
  Root[" my_agent_project/"] --&gt; A[" app/"]
  
  A --&gt; B[" agent.py &lt;br/&gt; (create_agent ç»„è£…å…¥å£)"]
  
  A --&gt; C["middleware/ &lt;br/&gt; (ä¸­é—´ä»¶å±‚)"]
  C --&gt; C1[" auth_middleware.py"]
  C --&gt; C2[" risk_control.py"]
  
  A --&gt; D[" schemas/ &lt;br/&gt; (æ•°æ®ç»“æ„)"]
  D --&gt; D1[" user_context.py"]
  D --&gt; D2[" output_schema.py"]
  
  A --&gt; E[" tools/ &lt;br/&gt; (å·¥å…·é›†)"]
  E --&gt; E1[" search_tool.py"]
  E --&gt; E2[" db_tool.py"]
  
  A --&gt; F[" main.py &lt;br/&gt; (FastAPI/Streamlit å…¥å£)"]
</code></pre>
<hr/>
<h3 data-id="heading-16">åä¸€ã€çœŸå®ä¼ä¸šçº§æ¡ˆä¾‹ï¼šå¤šæ­¥éª¤ä»»åŠ¡ Agent</h3>
<p>åœºæ™¯ï¼šè‡ªåŠ¨ä»£ç ä¿®å¤ Agentã€‚</p>
<p>æµç¨‹ï¼šå†™ä»£ç  â†’ è¿è¡Œæµ‹è¯• â†’ å¤±è´¥åˆ™åˆ†ææ—¥å¿— â†’ ä¿®å¤ä»£ç  â†’ å¾ªç¯ç›´è‡³æˆåŠŸã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    Start(("å¼€å§‹")) --&gt; Gen["ç”Ÿæˆåˆç‰ˆä»£ç "]
    Gen --&gt; Run["ğŸ”§ å·¥å…·: è¿è¡Œä»£ç /æµ‹è¯•"]
    Run --&gt; Check{"æµ‹è¯•é€šè¿‡?"}
    
    Check --&gt;|å¤±è´¥| Debug[" LLM: åˆ†æé”™è¯¯æ—¥å¿—"]
    Debug --&gt; Gen
    
    Check --&gt;|æˆåŠŸ| Output["è¾“å‡ºæœ€ç»ˆä»£ç "]
    Output --&gt; End(("ç»“æŸ"))
</code></pre>
<p><em>è¿™åœ¨ v1 ä¸­é€šè¿‡ <code>create_agent</code> å¤©ç„¶æ”¯æŒï¼Œå› ä¸ºåº•å±‚ Graph æ”¯æŒå¾ªç¯ï¼Œä¸”å¯ä»¥é€šè¿‡ä¸­é—´ä»¶è®°å½•æ¯æ¬¡å°è¯•çš„è¯¦ç»†æ—¥å¿—ã€‚</em></p>
<hr/>
<h3 data-id="heading-17">åäºŒã€å¯è¿è¡Œç»¼åˆç¤ºä¾‹ä»£ç </h3>
<p>è¿™æ˜¯ä¸€ä¸ªåŒ…å«äº† <strong>ä¸­é—´ä»¶ (Middleware)</strong> å’Œ <strong>ç»“æ„åŒ–è¾“å‡º</strong> çš„å®Œæ•´ v1 ç¤ºä¾‹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Any</span>, <span class="hljs-type">Dict</span>
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel, Field

<span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> create_agent
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI
<span class="hljs-keyword">from</span> langchain.tools <span class="hljs-keyword">import</span> tool
<span class="hljs-keyword">from</span> langchain.agents.middleware <span class="hljs-keyword">import</span> AgentMiddleware, ModelRequest, ModelResponse

<span class="hljs-comment"># 1. å®šä¹‰å·¥å…·</span>
<span class="hljs-meta">@tool</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_weather</span>(<span class="hljs-params">city: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯"""</span>
    <span class="hljs-comment"># æ¨¡æ‹Ÿ API è¿”å›</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{city}</span> å¤©æ°”æ™´æœ—, 25Â°C"</span>

<span class="hljs-comment"># 2. å®šä¹‰ç»“æ„åŒ–è¾“å‡º Schema</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">WeatherReport</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    city: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"åŸå¸‚åç§°"</span>)
    temperature: <span class="hljs-built_in">float</span> = Field(description=<span class="hljs-string">"æ¸©åº¦æ•°å€¼"</span>)
    summary: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"ä¸€å¥è¯å¤©æ°”æ€»ç»“"</span>)

<span class="hljs-comment"># 3. å®šä¹‰è‡ªå®šä¹‰ä¸­é—´ä»¶ (ç¤ºä¾‹ï¼šè‡ªåŠ¨æ·»åŠ ç¤¼è²Œç”¨è¯­)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PolitenessMiddleware</span>(<span class="hljs-title class_ inherited__">AgentMiddleware</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrap_model_call</span>(<span class="hljs-params">self, request: ModelRequest, handler</span>) -&gt; ModelResponse:
        <span class="hljs-comment"># åœ¨å‘é€ç»™æ¨¡å‹å‰ï¼Œä¿®æ”¹ System Prompt</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ•µï¸ Middleware: æ­£åœ¨æ³¨å…¥ç¤¼è²ŒæŒ‡ä»¤..."</span>)
        <span class="hljs-keyword">if</span> request.messages:
            last_msg = request.messages[-<span class="hljs-number">1</span>]
            <span class="hljs-keyword">if</span> last_msg.role == <span class="hljs-string">"user"</span>:
                last_msg.content += <span class="hljs-string">" (è¯·ç”¨éå¸¸ç¤¼è²Œçš„è¯­æ°”å›ç­”)"</span>
        <span class="hljs-keyword">return</span> handler(request)

<span class="hljs-comment"># 4. æ„å»º Agent</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    agent = create_agent(
        model=ChatOpenAI(model=<span class="hljs-string">"gpt-4o-mini"</span>),
        tools=[get_weather],
        middleware=[PolitenessMiddleware()],
        <span class="hljs-comment"># å¼ºåˆ¶ç»“æ„åŒ–è¾“å‡º (v1 ç‰¹æ€§)</span>
        <span class="hljs-comment"># response_format=ToolStrategy(WeatherReport) # è‹¥éœ€å¼ºåˆ¶ç»“æ„åŒ–å¯å¼€å¯æ­¤è¡Œ</span>
    )

    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸš€ Agent å¯åŠ¨..."</span>)
    result = <span class="hljs-keyword">await</span> agent.ainvoke({
        <span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"å¸®æˆ‘æŸ¥ä¸€ä¸‹åŒ—äº¬çš„å¤©æ°”"</span>}]
    })

    <span class="hljs-comment"># v1 çš„ result åŒ…å«å®Œæ•´çš„æ‰§è¡ŒçŠ¶æ€</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ’¬ æœ€ç»ˆå›å¤:"</span>)
    <span class="hljs-built_in">print</span>(result[<span class="hljs-string">"messages"</span>][-<span class="hljs-number">1</span>].content)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    asyncio.run(main())
</code></pre>
<hr/>
<h3 data-id="heading-18">åä¸‰ã€æ€»ç»“</h3>
<p>LangChain v1 æ ‡å¿—ç€æˆ‘ä»¬ä» <strong>â€œç©ç¥¨æ€§è´¨çš„ Chainâ€</strong> èµ°å‘äº† <strong>â€œå·¥ç¨‹åŒ–çš„ Agentâ€</strong>ã€‚</p>
<ul>
<li>å¦‚æœä½ éœ€è¦æ„å»ºç®€å•çš„é—®ç­”æœºå™¨äººï¼ŒLangChain v1 æä¾›äº†æ›´ç»Ÿä¸€çš„æ¥å£ã€‚</li>
<li>å¦‚æœä½ éœ€è¦æ„å»ºå¤æ‚çš„ã€å¤šæ­¥æ¨ç†çš„ã€å…·æœ‰è‡ªæˆ‘çº é”™èƒ½åŠ›çš„ä¼ä¸šçº§æ™ºèƒ½ä½“ï¼ŒLangChain v1 (é…åˆ LangGraph) æ˜¯ç›®å‰ Python ç”Ÿæ€ä¸­æœ€ä½³çš„é€‰æ‹©ã€‚</li>
</ul>
<p><strong>ä¸‹ä¸€æ­¥å»ºè®®ï¼š</strong> å®‰è£… <code>langchain-classic</code> ç¡®ä¿æ—§ä»£ç è¿è¡Œï¼ŒåŒæ—¶åœ¨æ–°æ¨¡å—ä¸­å¼€å§‹å°è¯•ä½¿ç”¨ <code>create_agent</code>ã€‚
æ…é‡æ›´æ–°è€é¡¹ç›®ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚å´©äº†ã€‚ã€‚ã€‚åˆ«èµ–æˆ‘ã€‚ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Ultraciteï¼šä¸º AI æ—¶ä»£æ‰“é€ çš„é›¶é…ç½®ä»£ç è§„èŒƒå·¥å…·]]></title>    <link>https://juejin.cn/post/7575090551356686388</link>    <guid>https://juejin.cn/post/7575090551356686388</guid>    <pubDate>2025-11-22T10:26:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575090551356686388" data-draft-id="7575090551356670004" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Ultraciteï¼šä¸º AI æ—¶ä»£æ‰“é€ çš„é›¶é…ç½®ä»£ç è§„èŒƒå·¥å…·"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,GitHub"/> <meta itemprop="datePublished" content="2025-11-22T10:26:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JinSo"/> <meta itemprop="url" content="https://juejin.cn/user/2041171430876333"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Ultraciteï¼šä¸º AI æ—¶ä»£æ‰“é€ çš„é›¶é…ç½®ä»£ç è§„èŒƒå·¥å…·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2041171430876333/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JinSo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T10:26:41.000Z" title="Sat Nov 22 2025 10:26:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">Ultracite æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>Ultracite æ˜¯ä¸€ä¸ª<strong>é«˜åº¦å›ºå®šåŒ–ã€é›¶é…ç½®</strong>çš„ä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ–å·¥å…·ã€‚å®ƒåŸºäºé«˜æ€§èƒ½çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fbiomejs.dev%2F" target="_blank" title="https://biomejs.dev/" ref="nofollow noopener noreferrer">Biome</a> æ„å»ºï¼Œé€‚ç”¨äºæ‰€æœ‰å‰ç«¯é¡¹ç›®ï¼Œæ— è®ºä½ ä½¿ç”¨ Reactã€Vueã€Angular è¿˜æ˜¯åŸç”Ÿ JavaScriptï¼Œéƒ½èƒ½è®©ä½ å’Œ AI ç¼–ç¨‹åŠ©æ‰‹ç¼–å†™å‡ºä¸€è‡´ä¸”é«˜è´¨é‡çš„ä»£ç ã€‚</p>
<h3 data-id="heading-1">æ ¸å¿ƒç†å¿µï¼šçº¦å®šä¼˜äºé…ç½®</h3>
<p>ä¸åŒäº ESLint + Prettier éœ€è¦å¤§é‡é…ç½®ï¼ŒUltracite é‡‡ç”¨äº†æç®€ä¸»ä¹‰è®¾è®¡ç†å¿µï¼š</p>
<ul>
<li><strong>é›¶é…ç½®</strong>ï¼šå¼€ç®±å³ç”¨ï¼Œæ— éœ€ç¼–å†™ä»»ä½•é…ç½®æ–‡ä»¶</li>
<li><strong>å›ºå®šè§„åˆ™</strong>ï¼šç²¾å¿ƒæŒ‘é€‰çš„è§„åˆ™é›†ï¼Œé¿å…æ— è°“çš„é€‰æ‹©å›°æ‰°</li>
<li><strong>ç»Ÿä¸€æ ‡å‡†</strong>ï¼šæ•´ä¸ªå›¢é˜Ÿå’Œ AI åŠ©æ‰‹éƒ½éµå¾ªç›¸åŒçš„ä»£ç è§„èŒƒ</li>
</ul>
<h2 data-id="heading-2">å¿«é€Ÿå¼€å§‹</h2>
<h3 data-id="heading-3">åˆå§‹åŒ–</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨é¡¹ç›®ä¸­åˆå§‹åŒ– Ultracite</span>
pnpm dlx ultracite init
</code></pre>
<p>Ultracite æä¾›äº†äº¤äº’å¼çš„å®‰è£…ä½“éªŒï¼Œè®©ä½ æ ¹æ®é¡¹ç›®éœ€æ±‚é€‰æ‹©åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">â¯ pnpm dlx ultracite init
â”Œ
888     888 888    88888888888 8888888b.         d8888  .d8888b. 8888888 88888888888 8888888888
888     888 888        888     888   Y88b       d88888 d88P  Y88b  888       888     888
888     888 888        888     888    888      d88P888 888    888  888       888     888
888     888 888        888     888   d88P     d88P 888 888         888       888     8888888
888     888 888        888     8888888P<span class="hljs-string">"     d88P  888 888         888       888     888
888     888 888        888     888 T88b     d88P   888 888    888  888       888     888
Y88b. .d88P 888        888     888  T88b   d8888888888 Y88b  d88P  888       888     888
 "</span>Y88888P<span class="hljs-string">"  88888888   888     888   T88b d88P     888  "</span>Y8888P<span class="hljs-string">" 8888888     888     8888888888

â”‚
â—  Detected lockfile, using pnpm
â”‚
â—‡  Remove existing formatters/linters (recommended for clean migration)?
â”‚  Remove ESLint (dependencies, config files, VS Code settings)
â”‚
â—‡  Which frameworks are you using (optional)?
â”‚  React
â”‚
â—‡  Which editors do you want to configure (recommended)?
â”‚  VSCode / Cursor / Windsurf
â”‚
â—‡  Which agents do you want to enable (optional)?
â”‚  Cursor
â”‚
â—‡  Which agent hooks do you want to enable (optional)?
â”‚  Cursor
â”‚
â—‡  Would you like any of the following (optional)?
â”‚  Husky pre-commit hook, Lefthook pre-commit hook, Lint-staged
â”‚
â—‘  ...çœç•¥å®‰è£…æ­¥éª¤
â—†  Successfully initialized Ultracite configuration!
</span></code></pre>
<p>åˆå§‹åŒ–å®Œæˆåï¼ŒUltracite ä¼šæ ¹æ®ä½ çš„é€‰æ‹©è‡ªåŠ¨å®Œæˆä»¥ä¸‹é…ç½®ï¼š</p>
<ul>
<li>å®‰è£…å¿…è¦çš„ä¾èµ–åŒ…</li>
<li>ç”Ÿæˆç¼–è¾‘å™¨é…ç½®æ–‡ä»¶</li>
<li><strong>åˆ›å»º AI ä»£ç è§„èŒƒæç¤ºè¯</strong>ï¼ˆè¿™æ˜¯ Ultracite çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ï¼‰</li>
<li>é…ç½® Git Hooks å·¥å…·ï¼ˆHuskyã€Lefthookã€Lint-stagedï¼‰</li>
<li>æ›´æ–° package.json è„šæœ¬</li>
<li>ç”Ÿæˆ biome.json é…ç½®æ–‡ä»¶</li>
</ul>
<p>å…³äº Git Hooks å·¥å…·çš„è¯¦ç»†ä»‹ç»ï¼Œå¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰çš„æ–‡ç« ï¼š<a href="https://juejin.cn/post/7309290887363592233" target="_blank" title="https://juejin.cn/post/7309290887363592233">åœ¨ Monorepo ä¸­å¯¹ä»£ç è¿›è¡Œè§„èŒƒ(husky + lint-staged)</a></p>
<h3 data-id="heading-4">åŸºæœ¬ä½¿ç”¨</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥ä»£ç é—®é¢˜</span>
npx ultracite check

<span class="hljs-comment"># è‡ªåŠ¨ä¿®å¤å’Œæ ¼å¼åŒ–ä»£ç </span>
npx ultracite fix
</code></pre>
<h2 data-id="heading-5">AI å‹å¥½ç‰¹æ€§</h2>
<p>è¿™æ˜¯ Ultracite çš„ä¸€å¤§äº®ç‚¹ â€”â€” å®ƒä¸“é—¨ä¸º AI ç¼–ç¨‹æ—¶ä»£è®¾è®¡ï¼Œè®© AI åŠ©æ‰‹ä¹Ÿèƒ½éµå¾ªé¡¹ç›®çš„ä»£ç è§„èŒƒã€‚</p>
<h3 data-id="heading-6">AI æç¤ºè¯é›†æˆ</h3>
<p>å½“ä½ é€‰æ‹©å¯ç”¨ AI agentï¼ˆå¦‚ Cursorï¼‰æ—¶ï¼ŒUltracite ä¼šç”Ÿæˆä¸€ä»½è¯¦ç»†çš„ä»£ç è§„èŒƒæç¤ºè¯æ–‡ä»¶ <code>.cursor/rules/ultracite.mdc</code>ã€‚è¿™ä»½æ–‡ä»¶åŒ…å«äº†å®Œæ•´çš„ç¼–ç è§„èŒƒï¼Œæ¶µç›–ï¼š</p>
<ul>
<li><strong>ç±»å‹å®‰å…¨è§„èŒƒ</strong>ï¼šè¦æ±‚ä½¿ç”¨æ˜ç¡®çš„ç±»å‹å®šä¹‰ï¼Œé¿å… any ç±»å‹</li>
<li><strong>ç°ä»£è¯­æ³•è§„èŒƒ</strong>ï¼šä¼˜å…ˆä½¿ç”¨ç®­å¤´å‡½æ•°ã€å¯é€‰é“¾ã€è§£æ„èµ‹å€¼ç­‰ç°ä»£ç‰¹æ€§</li>
<li><strong>å¼‚æ­¥ç¼–ç¨‹è§„èŒƒ</strong>ï¼šæ­£ç¡®ä½¿ç”¨ async/awaitï¼Œå¦¥å–„å¤„ç†é”™è¯¯</li>
<li><strong>React æœ€ä½³å®è·µ</strong>ï¼šå‡½æ•°ç»„ä»¶ã€Hooks è§„åˆ™ã€æ— éšœç¢è®¿é—®ç­‰</li>
<li><strong>ä»£ç ç»„ç»‡åŸåˆ™</strong>ï¼šå‡½æ•°å¤æ‚åº¦æ§åˆ¶ã€æ—©æœŸè¿”å›ã€å…³æ³¨ç‚¹åˆ†ç¦»</li>
</ul>
<p>æœ‰äº†è¿™ä»½æç¤ºè¯ï¼ŒAI åŠ©æ‰‹ç”Ÿæˆçš„ä»£ç ä¼šè‡ªåŠ¨éµå¾ªè¿™äº›è§„èŒƒï¼Œå¤§å¤§å‡å°‘äº†ä»£ç å®¡æŸ¥çš„å·¥ä½œé‡ã€‚</p>
<h3 data-id="heading-7">Cursor Hooks é›†æˆ</h3>
<p>å¯¹äº Cursor ç”¨æˆ·ï¼ŒUltracite è¿˜ä¼šç”Ÿæˆ hooks é…ç½®ï¼ˆ<code>.cursor/hooks.json</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">{
  <span class="hljs-string">"version"</span>: 1,
  <span class="hljs-string">"hooks"</span>: {
    <span class="hljs-string">"afterFileEdit"</span>: [
      {
        <span class="hljs-string">"command"</span>: <span class="hljs-string">"npx ultracite fix"</span>
      }
    ]
  }
}
</code></pre>
<p>è¿™ä¸ªé…ç½®å®ç°äº†"ä¿å­˜å³æ ¼å¼åŒ–"çš„æ•ˆæœ â€”â€” æ¯æ¬¡ä½ æˆ– AI ç¼–è¾‘æ–‡ä»¶åï¼Œä»£ç éƒ½ä¼šè‡ªåŠ¨æ ¼å¼åŒ–ï¼Œä¿æŒæ•´ä¸ªé¡¹ç›®çš„ä¸€è‡´æ€§ã€‚</p>
<h2 data-id="heading-8">Git Hooks é›†æˆ</h2>
<p>Ultracite æ”¯æŒä¸»æµçš„ Git Hooks å·¥å…·ï¼Œç¡®ä¿æäº¤çš„ä»£ç éƒ½ç»è¿‡æ£€æŸ¥å’Œæ ¼å¼åŒ–ã€‚</p>
<h3 data-id="heading-9">Husky é›†æˆ</h3>
<p>ç”Ÿæˆçš„ <code>.husky/pre-commit</code> æ–‡ä»¶ä¼šåœ¨æäº¤å‰è‡ªåŠ¨è¿è¡Œä»£ç æ£€æŸ¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/sh</span>
<span class="hljs-comment"># Exit on any error</span>
<span class="hljs-built_in">set</span> -e

<span class="hljs-comment"># Check if there are any staged files</span>
<span class="hljs-keyword">if</span> [ -z <span class="hljs-string">"<span class="hljs-subst">$(git diff --cached --name-only)</span>"</span> ]; <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"No staged files to format"</span>
  <span class="hljs-built_in">exit</span> 0
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># Store the hash of staged changes to detect modifications</span>
STAGED_HASH=$(git diff --cached | <span class="hljs-built_in">sha256sum</span> | <span class="hljs-built_in">cut</span> -d<span class="hljs-string">' '</span> -f1)

<span class="hljs-comment"># Save list of staged files (handling all file states)</span>
STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACMR)
PARTIALLY_STAGED=$(git diff --name-only)

<span class="hljs-comment"># Stash unstaged changes to preserve working directory</span>
git stash push --quiet --keep-index --message <span class="hljs-string">"pre-commit-stash"</span> || <span class="hljs-literal">true</span>
STASHED=$?

<span class="hljs-comment"># Run formatter on the staged files</span>
pnpm dlx ultracite fix
FORMAT_EXIT_CODE=$?

<span class="hljs-comment"># Restore working directory state</span>
<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$STASHED</span> -eq 0 ]; <span class="hljs-keyword">then</span>
  <span class="hljs-comment"># Re-stage the formatted files</span>
  <span class="hljs-keyword">if</span> [ -n <span class="hljs-string">"<span class="hljs-variable">$STAGED_FILES</span>"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$STAGED_FILES</span>"</span> | <span class="hljs-keyword">while</span> IFS= <span class="hljs-built_in">read</span> -r file; <span class="hljs-keyword">do</span>
      <span class="hljs-keyword">if</span> [ -f <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span> ]; <span class="hljs-keyword">then</span>
        git add <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span>
      <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">done</span>
  <span class="hljs-keyword">fi</span>

  <span class="hljs-comment"># Restore unstaged changes</span>
  git stash pop --quiet || <span class="hljs-literal">true</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># Check if staged files actually changed</span>
NEW_STAGED_HASH=$(git diff --cached | <span class="hljs-built_in">sha256sum</span> | <span class="hljs-built_in">cut</span> -d<span class="hljs-string">' '</span> -f1)
<span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">$STAGED_HASH</span>"</span> != <span class="hljs-string">"<span class="hljs-variable">$NEW_STAGED_HASH</span>"</span> ]; <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ¨ Files formatted by Ultracite"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">exit</span> <span class="hljs-variable">$FORMAT_EXIT_CODE</span>
</code></pre>
<p>è¿™ä¸ªè„šæœ¬ä¼šæ™ºèƒ½å¤„ç†éƒ¨åˆ†æš‚å­˜çš„æ–‡ä»¶ï¼Œç¡®ä¿åªæ ¼å¼åŒ–ä½ è¦æäº¤çš„ä»£ç ã€‚</p>
<h3 data-id="heading-10">Lefthook é›†æˆ</h3>
<p>å¦‚æœä½ é€‰æ‹©ä½¿ç”¨ Lefthookï¼Œä¼šç”Ÿæˆ <code>lefthook.yml</code> é…ç½®ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">pre-commit:</span>
  <span class="hljs-attr">jobs:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">pnpm</span> <span class="hljs-string">dlx</span> <span class="hljs-string">ultracite</span> <span class="hljs-string">fix</span>
      <span class="hljs-attr">glob:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"*.js"</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"*.jsx"</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"*.ts"</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"*.tsx"</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"*.json"</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"*.jsonc"</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"*.css"</span>
      <span class="hljs-attr">stage_fixed:</span> <span class="hljs-literal">true</span>
</code></pre>
<p>Lefthook çš„ä¼˜åŠ¿åœ¨äºå¹¶è¡Œæ‰§è¡Œå’Œæ›´çµæ´»çš„é…ç½®é€‰é¡¹ã€‚</p>
<h3 data-id="heading-11">Lint-staged é›†æˆ</h3>
<p>é…åˆ lint-staged å¯ä»¥åªå¤„ç†æš‚å­˜çš„æ–‡ä»¶ï¼Œåœ¨ <code>package.json</code> ä¸­ä¼šæ·»åŠ ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"lint-staged"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"*.{js,jsx,ts,tsx,json,jsonc,css,scss,md,mdx}"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"pnpm dlx ultracite fix"</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-12">VSCode æ·±åº¦é›†æˆ</h2>
<p>Ultracite ä¼šè‡ªåŠ¨ä¸º VSCodeï¼ˆåŒ…æ‹¬ Cursorã€Windsurfï¼‰ç”Ÿæˆé…ç½®ï¼Œå®ç°ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// .vscode/settings.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"esbenp.prettier-vscode"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"[javascript]"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"biomejs.biome"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"[typescript]"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"biomejs.biome"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"[javascriptreact]"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"biomejs.biome"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"[typescriptreact]"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"biomejs.biome"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"[json]"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"biomejs.biome"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"[jsonc]"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"biomejs.biome"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"[css]"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"biomejs.biome"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"[graphql]"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"biomejs.biome"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"typescript.tsdk"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node_modules/typescript/lib"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"editor.formatOnSave"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"editor.formatOnPaste"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"emmet.showExpandedAbbreviation"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"never"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"editor.codeActionsOnSave"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"source.fixAll.biome"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"explicit"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"source.organizeImports.biome"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"explicit"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-13"><strong>MCPï¼ˆModel Context Protocolï¼‰æ”¯æŒ</strong></h2>
<p>MCP æ˜¯ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼Œè®© Claudeã€Cursor ç­‰ AI å·¥å…·èƒ½å¤Ÿå®‰å…¨åœ°è¿æ¥å¤–éƒ¨æ•°æ®æºå’Œç³»ç»Ÿã€‚å¯ä»¥æŠŠå®ƒç†è§£ä¸ºä¸€ä¸ª"ä¸‡èƒ½é¥æ§å™¨"ï¼Œè®© AI å·¥å…·èƒ½å¤Ÿè®¿é—®çœŸå®ä¸–ç•Œçš„æ•°æ®å’ŒåŠŸèƒ½ã€‚Ultracite é€šè¿‡æ”¯æŒ MCP æ¥å¢å¼ºä½ çš„ AI å¼€å‘å·¥ä½œæµã€‚</p>
<h3 data-id="heading-14"><strong>å®‰è£…é…ç½®</strong></h3>
<ol>
<li>
<p><strong>é€‰æ‹©ä½ çš„ AI å·¥å…·</strong></p>
<p>ç¡®ä¿ä½ ä½¿ç”¨çš„ AI å¼€å‘å·¥å…·æ”¯æŒ MCPï¼š</p>
<ul>
<li>Claude Desktopï¼ˆå…è´¹ï¼Œæ¨èåˆå­¦è€…ä½¿ç”¨ï¼‰</li>
<li>Cursorï¼ˆAI é©±åŠ¨çš„ä»£ç ç¼–è¾‘å™¨ï¼‰</li>
<li>Windsurf by Codeiumï¼ˆAI å¼€å‘å¹³å°ï¼‰</li>
<li>å…¶ä»–æ”¯æŒ MCP çš„å·¥å…·</li>
</ul>
</li>
<li>
<p><strong>æ‰¾åˆ°é…ç½®æ–‡ä»¶ä½ç½®</strong></p>
<p>æ ¹æ®ä½ çš„ AI å·¥å…·ï¼Œéœ€è¦ç¼–è¾‘å¯¹åº”çš„é…ç½®æ–‡ä»¶ï¼š</p>
<ul>
<li>
<p><strong>Claude Desktop</strong>:</p>
<ul>
<li>macOS:Â <code>~/Library/Application\ Support/Claude/claude_desktop_config.json</code></li>
<li>Windows:Â <code>%APPDATA%\Claude\claude_desktop_config.json</code></li>
</ul>
</li>
<li>
<p><strong>Cursor</strong>:Â <code>.cursor/mcp.json</code></p>
</li>
<li>
<p><strong>Windsurf</strong>:Â <code>.codeium/windsurf/mcp_config.json</code></p>
</li>
<li>
<p><strong>å…¶ä»–å·¥å…·</strong>: æŸ¥çœ‹å¯¹åº”å·¥å…·çš„ MCP æ–‡æ¡£</p>
</li>
</ul>
</li>
<li>
<p><strong>æ·»åŠ  Ultracite é…ç½®</strong></p>
<p>å°†ä»¥ä¸‹é…ç½®å¤åˆ¶åˆ°ä½ çš„ MCP é…ç½®æ–‡ä»¶ä¸­ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"ultracite"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npx"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">"-y"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"mcp-remote"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"&lt;https://www.ultracite.ai/api/mcp/mcp&gt;"</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li>
<p><strong>é‡å¯ AI å·¥å…·</strong></p>
<p>å…³é—­å¹¶é‡æ–°æ‰“å¼€ä½ çš„ AI åº”ç”¨ï¼Œè®©é…ç½®ç”Ÿæ•ˆã€‚</p>
</li>
<li>
<p><strong>éªŒè¯è¿æ¥</strong></p>
<p>é€šè¿‡è¯¢é—®ä½ çš„ AI åŠ©æ‰‹æ¥æµ‹è¯•é›†æˆæ˜¯å¦æˆåŠŸï¼š</p>
<blockquote>
<p>"Ultracite æœ‰å“ªäº›å¯ç”¨çš„è§„åˆ™ï¼Ÿ"</p>
</blockquote>
<p>å¦‚æœé…ç½®æˆåŠŸï¼ŒAI åº”è¯¥èƒ½å¤Ÿåˆ—å‡ºå¹¶è§£é‡Š Ultracite çš„è§„åˆ™ï¼</p>
</li>
</ol>
<h2 data-id="heading-15">ä» ESLint + Prettier è¿ç§»</h2>
<p>è¿ç§»è¿‡ç¨‹éå¸¸ç®€å•ï¼š</p>
<ol>
<li>è¿è¡Œ <code>pnpm dlx ultracite init</code></li>
<li>é€‰æ‹©ç§»é™¤ç°æœ‰çš„ ESLint å’Œ Prettier é…ç½®</li>
<li>æ›´æ–° package.json ä¸­çš„è„šæœ¬å‘½ä»¤</li>
<li>åˆ é™¤æ—§çš„é…ç½®æ–‡ä»¶</li>
</ol>
<p>Ultracite çš„è§„åˆ™é›†å·²ç»æ¶µç›–äº†å¤§å¤šæ•°å¸¸ç”¨çš„ ESLint å’Œ Prettier è§„åˆ™ï¼Œä½ å‡ ä¹ä¸éœ€è¦ä»»ä½•é¢å¤–é…ç½®ã€‚</p>
<h2 data-id="heading-16">æ€»ç»“</h2>
<p>Ultracite ä»£è¡¨äº†ä»£ç è´¨é‡å·¥å…·çš„æ–°æ–¹å‘ï¼šç®€å•ã€å¿«é€Ÿã€AI å‹å¥½ã€‚å®ƒç‰¹åˆ«é€‚åˆï¼š</p>
<ul>
<li><strong>ä½¿ç”¨ AI ç¼–ç¨‹çš„å¼€å‘è€…</strong>ï¼šé€šè¿‡æç¤ºè¯å’Œ hooks ç¡®ä¿ AI ç”Ÿæˆé«˜è´¨é‡ä»£ç </li>
<li><strong>è¿½æ±‚æ•ˆç‡çš„å›¢é˜Ÿ</strong>ï¼šé›¶é…ç½®è®¾è®¡ï¼Œå‡å°‘å·¥å…·é“¾ç»´æŠ¤æˆæœ¬</li>
<li><strong>ä»»ä½•å‰ç«¯é¡¹ç›®</strong>ï¼šæ— è®ºä½¿ç”¨ä»€ä¹ˆæ¡†æ¶ï¼Œéƒ½èƒ½è·å¾—ä¸€è‡´çš„ä»£ç è´¨é‡</li>
<li><strong>Monorepo é¡¹ç›®</strong>ï¼šåŸç”Ÿæ”¯æŒï¼Œé…ç½®ç®€å•</li>
</ul>
<p>ç›¸æ¯”ä¼ ç»Ÿçš„ ESLint + Prettier ç»„åˆï¼ŒUltracite æä¾›äº†æ›´å¿«çš„æ€§èƒ½ã€æ›´ç®€å•çš„é…ç½®ã€æ›´ç»Ÿä¸€çš„å·¥å…·é“¾ï¼Œä»¥åŠåŸç”Ÿçš„ AI ç¼–ç¨‹æ”¯æŒã€‚åœ¨ AI è¾…åŠ©ç¼–ç¨‹è¶Šæ¥è¶Šæ™®åŠçš„ä»Šå¤©ï¼Œé€‰æ‹©ä¸€ä¸ª AI å‹å¥½çš„ä»£ç è§„èŒƒå·¥å…·ï¼Œèƒ½è®©ä½ çš„å¼€å‘æ•ˆç‡æ›´ä¸Šä¸€å±‚æ¥¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CSS å±æ€§å€¼ initialã€unset å’Œ revert çš„è§£æ]]></title>    <link>https://juejin.cn/post/7575083657994158107</link>    <guid>https://juejin.cn/post/7575083657994158107</guid>    <pubDate>2025-11-22T14:17:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575083657994158107" data-draft-id="7575133880434966579" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CSS å±æ€§å€¼ initialã€unset å’Œ revert çš„è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-22T14:17:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å¤§å«"/> <meta itemprop="url" content="https://juejin.cn/user/1961184474695213"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CSS å±æ€§å€¼ initialã€unset å’Œ revert çš„è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1961184474695213/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å¤§å«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T14:17:29.000Z" title="Sat Nov 22 2025 14:17:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    21
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯<strong>å‰ç«¯æ¶æ„å¸ˆ</strong>ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€<strong>ç¨‹åºå‘˜å¤§å«</strong>ã€‘ï¼Œå…è´¹é¢†å–å‰ç«¯æœ€æ–°é¢è¯•èµ„æ–™ã€‚</p>
<h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>åœ¨ CSS ä¸­ï¼Œç®¡ç†å±æ€§å€¼å’Œç»§æ‰¿è¡Œä¸ºæ˜¯åˆ›å»ºå¥å£®ã€å¯ç»´æŠ¤æ ·å¼çš„åŸºç¡€ã€‚é™¤äº†å¸¸è§çš„å…·ä½“æ•°å€¼ï¼ˆå¦‚ <code>16px</code>ã€<code>#333</code>ï¼‰æˆ–é€šç”¨å€¼ï¼ˆå¦‚ <code>inherit</code>ï¼‰ä¹‹å¤–ï¼ŒCSS è¿˜æä¾›äº†ä¸€äº›ç‰¹æ®Šçš„<strong>å…³é”®å­—</strong>ï¼Œå®ƒä»¬èƒ½é‡ç½®æˆ–æ¢å¤å±æ€§å€¼åˆ°å…¶â€œé»˜è®¤â€æˆ–å‰ä¸€ä¸ªçŠ¶æ€ã€‚</p>
<p>å…¶ä¸­ï¼Œ<code>initial</code>ã€<code>unset</code> å’Œ <code>revert</code> æ˜¯ä¸‰ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”å®¹æ˜“æ··æ·†çš„å…³é”®å­—ã€‚ç†è§£å®ƒä»¬çš„åŒºåˆ«ï¼Œèƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°æ§åˆ¶æ ·å¼ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†ç¬¬ä¸‰æ–¹ç»„ä»¶æˆ–å¤§å‹åº”ç”¨ä¸­çš„æ ·å¼å†²çªæ—¶ã€‚</p>
<h2 data-id="heading-1">æ ¸å¿ƒåŒºåˆ«ä¸€è§ˆ</h2>





























<table><thead><tr><th align="left">å…³é”®å­—</th><th align="left">ä½œç”¨</th><th align="left">è¡Œä¸ºç»†èŠ‚</th><th align="left">é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td align="left"><strong><code>initial</code></strong></td><td align="left">é‡ç½®ä¸º<strong>åˆå§‹å€¼</strong></td><td align="left">å°†å±æ€§é‡ç½®ä¸ºå…¶åœ¨ CSS è§„èŒƒä¸­å®šä¹‰çš„<strong>åˆå§‹å€¼</strong>ï¼ˆå°±åƒè¯¥å±æ€§ä»æœªè¢«è®¾ç½®è¿‡ä¸€æ ·ï¼‰ã€‚</td><td align="left">ç¡®ä¿å±æ€§å€¼æ˜¯æµè§ˆå™¨é»˜è®¤çš„â€œå‡ºå‚è®¾ç½®â€ï¼Œä¸è€ƒè™‘ç»§æ‰¿ã€‚</td></tr><tr><td align="left"><strong><code>unset</code></strong></td><td align="left">é‡ç½®ä¸º<strong>æœªè®¾ç½®å€¼</strong></td><td align="left">å¦‚æœè¯¥å±æ€§æ˜¯<strong>å¯ç»§æ‰¿</strong>çš„ï¼Œåˆ™è¡¨ç°ä¸º <code>inherit</code>ï¼ˆç»§æ‰¿çˆ¶å…ƒç´ çš„å€¼ï¼‰ã€‚<br/>å¦‚æœè¯¥å±æ€§æ˜¯<strong>ä¸å¯ç»§æ‰¿</strong>çš„ï¼Œåˆ™è¡¨ç°ä¸º <code>initial</code>ã€‚</td><td align="left">æ¢å¤å±æ€§åˆ°å…¶è‡ªç„¶çš„ï¼ˆé»˜è®¤çš„ï¼‰ç»§æ‰¿è¡Œä¸ºã€‚</td></tr><tr><td align="left"><strong><code>revert</code></strong></td><td align="left">é‡ç½®ä¸º<strong>ä¸Šä¸€ä¸ªçº§è”å€¼</strong></td><td align="left">å°†å±æ€§é‡ç½®ä¸º<strong>ç”¨æˆ·ä»£ç†æ ·å¼è¡¨</strong>ï¼ˆæµè§ˆå™¨é»˜è®¤æ ·å¼ï¼‰ã€<strong>ç”¨æˆ·æ ·å¼è¡¨</strong>æˆ–<strong>ä½œè€…æ ·å¼è¡¨</strong>ä¸­åº”ç”¨è¿‡çš„ä¸Šä¸€ä¸ªå€¼ã€‚å®ƒä¼šæ’¤é”€å½“å‰æ ·å¼å—çš„æ›´æ”¹ï¼Œæ¢å¤åˆ°çº§è”é“¾ä¸­æ›´æ—©çš„å€¼ã€‚</td><td align="left">æ’¤é”€å¯¹å±æ€§çš„ç‰¹å®šè¦†ç›–ï¼Œæ¢å¤åˆ°æµè§ˆå™¨æˆ–ç”¨æˆ·å®šä¹‰çš„æ ·å¼ï¼Œå¸¸ç”¨äºæ¢å¤æµè§ˆå™¨é»˜è®¤æ ·å¼ã€‚</td></tr></tbody></table>
<h2 data-id="heading-2">å…³é”®å­—è¯¦è§£ä¸ç¤ºä¾‹</h2>
<p>ä¸ºäº†æ›´å¥½åœ°ç†è§£ï¼Œæˆ‘ä»¬ä¸»è¦å…³æ³¨ <code>color</code>ï¼ˆå¯ç»§æ‰¿ï¼‰å’Œ <code>border</code>ï¼ˆä¸å¯ç»§æ‰¿ï¼‰è¿™ä¸¤ä¸ªå±æ€§ã€‚</p>
<h3 data-id="heading-3">1. <code>initial</code>ï¼šå›åˆ°èµ·ç‚¹</h3>
<p><code>initial</code> æ€»æ˜¯å°†å±æ€§å€¼è®¾ç½®ä¸º CSS è§„èŒƒä¸­å®šä¹‰çš„<strong>åˆå§‹å€¼</strong>ã€‚è¿™ä¸ªå€¼æ˜¯å›ºå®šçš„ï¼Œå¹¶ä¸”ä¸è¯¥å…ƒç´ æ˜¯å¦ç»§æ‰¿äº†çˆ¶å…ƒç´ çš„å€¼<strong>æ— å…³</strong>ã€‚</p>
<h4 data-id="heading-4"><strong>ç¤ºä¾‹ï¼š</strong></h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* åˆå§‹è®¾ç½® */</span>
<span class="hljs-selector-tag">div</span> {
  <span class="hljs-attribute">color</span>: blue;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid black;
}

<span class="hljs-comment">/* åº”ç”¨ initial */</span>
<span class="hljs-selector-class">.initial-demo</span> {
  <span class="hljs-comment">/* color æ˜¯å¯ç»§æ‰¿å±æ€§ï¼Œä½† initial å¼ºåˆ¶è®¾ä¸ºåˆå§‹å€¼ (é€šå¸¸æ˜¯ black) */</span>
  <span class="hljs-attribute">color</span>: initial;
  <span class="hljs-comment">/* border æ˜¯ä¸å¯ç»§æ‰¿å±æ€§ï¼Œinitial å¼ºåˆ¶è®¾ä¸ºåˆå§‹å€¼ (none) */</span>
  <span class="hljs-attribute">border</span>: initial;
}
</code></pre>























<table><thead><tr><th align="left">å…ƒç´ </th><th align="left">çˆ¶å…ƒç´  <code>div</code> çš„æ ·å¼</th><th align="left"><code>.initial-demo</code> çš„æ ·å¼</th><th align="left">æœ€ç»ˆå€¼</th></tr></thead><tbody><tr><td align="left"><code>color</code></td><td align="left"><code>blue</code></td><td align="left"><code>initial</code></td><td align="left"><strong><code>black</code></strong> (åˆå§‹å€¼)</td></tr><tr><td align="left"><code>border</code></td><td align="left"><code>1px solid black</code></td><td align="left"><code>initial</code></td><td align="left"><strong><code>none</code></strong> (åˆå§‹å€¼)</td></tr></tbody></table>
<h3 data-id="heading-5">2. <code>unset</code>ï¼šæ¢å¤è‡ªç„¶çŠ¶æ€</h3>
<p><code>unset</code> æ˜¯ä¸€ä¸ªâ€œæ™ºèƒ½â€çš„é‡ç½®ã€‚å®ƒæ ¹æ®å±æ€§çš„<strong>å¯ç»§æ‰¿æ€§</strong>æ¥å†³å®šè¡Œä¸ºï¼š</p>
<ul>
<li><strong>å¯ç»§æ‰¿å±æ€§ï¼š</strong> è¡¨ç°ä¸º <code>inherit</code>ã€‚</li>
<li><strong>ä¸å¯ç»§æ‰¿å±æ€§ï¼š</strong> è¡¨ç°ä¸º <code>initial</code>ã€‚</li>
</ul>
<h4 data-id="heading-6"><strong>ç¤ºä¾‹ï¼š</strong></h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* åˆå§‹è®¾ç½® */</span>
<span class="hljs-selector-tag">div</span> {
  <span class="hljs-attribute">color</span>: blue;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid black;
}

<span class="hljs-comment">/* åº”ç”¨ unset */</span>
<span class="hljs-selector-class">.unset-demo</span> {
  <span class="hljs-comment">/* color æ˜¯å¯ç»§æ‰¿å±æ€§ï¼Œè¡¨ç°ä¸º inherit */</span>
  <span class="hljs-attribute">color</span>: unset;
  <span class="hljs-comment">/* border æ˜¯ä¸å¯ç»§æ‰¿å±æ€§ï¼Œè¡¨ç°ä¸º initial */</span>
  <span class="hljs-attribute">border</span>: unset;
}
</code></pre>























<table><thead><tr><th align="left">å…ƒç´ </th><th align="left">çˆ¶å…ƒç´  <code>div</code> çš„æ ·å¼</th><th align="left"><code>.unset-demo</code> çš„æ ·å¼</th><th align="left">æœ€ç»ˆå€¼</th></tr></thead><tbody><tr><td align="left"><code>color</code></td><td align="left"><code>blue</code></td><td align="left"><code>unset</code> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> <code>inherit</code></td><td align="left"><strong><code>blue</code></strong> (ç»§æ‰¿è‡ªçˆ¶å…ƒç´ )</td></tr><tr><td align="left"><code>border</code></td><td align="left"><code>1px solid black</code></td><td align="left"><code>unset</code> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> <code>initial</code></td><td align="left"><strong><code>none</code></strong> (åˆå§‹å€¼)</td></tr></tbody></table>
<h3 data-id="heading-7">3. <code>revert</code>ï¼šæ’¤é”€ä½œè€…æ ·å¼</h3>
<p><code>revert</code> æ˜¯æœ€ç‹¬ç‰¹çš„ã€‚å®ƒæ²¿ç€ CSS çº§è”ï¼ˆCascadingï¼‰é“¾å‘ä¸ŠæŸ¥æ‰¾ï¼Œæ¢å¤åˆ°<strong>ä¸Šä¸€ä¸ª</strong>è¢«åº”ç”¨çš„å€¼ã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯<strong>æ’¤é”€</strong>äº†å½“å‰æ ·å¼è¡¨ä¸­çš„å±æ€§å®šä¹‰ï¼Œæ¢å¤åˆ°ï¼š</p>
<ol>
<li><strong>ç”¨æˆ·æ ·å¼</strong>ï¼ˆå¦‚æœç”¨æˆ·è®¾ç½®äº†ï¼‰ã€‚</li>
<li><strong>æµè§ˆå™¨é»˜è®¤æ ·å¼</strong>ï¼ˆç”¨æˆ·ä»£ç†æ ·å¼è¡¨ï¼‰ã€‚</li>
<li>å¦‚æœä»¥ä¸Šéƒ½æ²¡æœ‰ï¼Œåˆ™æ¢å¤åˆ° <code>unset</code> çš„è¡Œä¸ºã€‚</li>
</ol>
<p>å®ƒä¸»è¦ç”¨äºæ¢å¤æµè§ˆå™¨é»˜è®¤æ ·å¼ï¼Œä¾‹å¦‚ï¼Œæ‚¨ä¸æƒ³è®©æŸä¸ª <code>&lt;h1&gt;</code> æ ‡ç­¾åº”ç”¨æ‚¨çš„å…¨å±€å­—ä½“æ ·å¼ï¼Œå¸Œæœ›å®ƒç”¨å›æµè§ˆå™¨é»˜è®¤çš„ç²—ä½“å¤§å­—ã€‚</p>
<h4 data-id="heading-8"><strong>ç¤ºä¾‹ï¼š</strong></h4>
<p>å‡è®¾æµè§ˆå™¨é»˜è®¤æ ·å¼æ˜¯ï¼š<code>h1 { font-weight: bold; }</code></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ä½œè€…æ ·å¼è¡¨ (æ‚¨çš„ä»£ç ) */</span>
<span class="hljs-selector-tag">h1</span> {
  <span class="hljs-comment">/* è¦†ç›–äº†æµè§ˆå™¨é»˜è®¤æ ·å¼ */</span>
  <span class="hljs-attribute">font-weight</span>: normal; 
}

<span class="hljs-selector-class">.revert-demo</span> {
  <span class="hljs-comment">/* æ’¤é”€äº†ä¸Šæ–¹çš„ font-weight: normal; */</span>
  <span class="hljs-attribute">font-weight</span>: revert;
}
</code></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>.revert-demo</code> å…ƒç´ ä¼šå°† <code>font-weight</code> æ¢å¤åˆ° <strong>æµè§ˆå™¨é»˜è®¤å€¼</strong> (<code>bold</code>)ï¼Œå› ä¸ºå®ƒæ’¤é”€äº†ä½œè€…æ ·å¼è¡¨ä¸­çš„ <code>normal</code> å£°æ˜ã€‚</p>
<h2 data-id="heading-9">âœ… æ€»ç»“ä¸åº”ç”¨å»ºè®®</h2>

























<table><thead><tr><th align="left">å…³é”®å­—</th><th align="left">è®°å¿†ç‚¹</th><th align="left">åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td align="left"><strong><code>initial</code></strong></td><td align="left"><strong>â€œç»å¯¹åˆå§‹â€</strong></td><td align="left">ç¡®ä¿å±æ€§å€¼æ˜¯å…¶ CSS è§„èŒƒå®šä¹‰çš„<strong>åŸå§‹é»˜è®¤å€¼</strong>ï¼Œä¸è€ƒè™‘ä¸Šä¸‹æ–‡ã€‚</td></tr><tr><td align="left"><strong><code>unset</code></strong></td><td align="left"><strong>â€œæ™ºèƒ½é‡ç½®â€</strong></td><td align="left">æ¢å¤å±æ€§çš„<strong>è‡ªç„¶ç»§æ‰¿è¡Œä¸º</strong>ï¼ˆå¯ç»§æ‰¿åˆ™ <code>inherit</code>ï¼Œä¸å¯ç»§æ‰¿åˆ™ <code>initial</code>ï¼‰ã€‚</td></tr><tr><td align="left"><strong><code>revert</code></strong></td><td align="left"><strong>â€œæ’¤é”€â€</strong></td><td align="left">æ’¤é”€ä½œè€…æ ·å¼ï¼Œ<strong>æ¢å¤åˆ°æµè§ˆå™¨é»˜è®¤æˆ–ç”¨æˆ·æ ·å¼</strong>ã€‚å¸¸ç”¨äºå¸Œæœ›ä¿æŒæµè§ˆå™¨é»˜è®¤å¤–è§‚çš„å…ƒç´ ã€‚</td></tr></tbody></table>
<p><strong>ä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸ªï¼Ÿ</strong></p>
<ul>
<li>å¦‚æœæ‚¨æƒ³ç¡®ä¿ä¸€ä¸ªå±æ€§å€¼æ˜¯<strong>å›ºå®šçš„ã€æ˜ç¡®çš„ CSS åˆå§‹å€¼</strong>ï¼Œä½¿ç”¨ <code>initial</code>ã€‚</li>
<li>å¦‚æœæ‚¨æƒ³è®©ä¸€ä¸ªå±æ€§<strong>éµå¾ªå…¶å›ºæœ‰çš„ç»§æ‰¿è§„åˆ™</strong>ï¼ˆå³ï¼Œå¯ç»§æ‰¿çš„å°±ç»§æ‰¿ï¼Œä¸å¯ç»§æ‰¿çš„å°±ä½¿ç”¨åˆå§‹å€¼ï¼‰ï¼Œä½¿ç”¨ <code>unset</code>ã€‚</li>
<li>å¦‚æœæ‚¨æƒ³<strong>æ’¤é”€æ‚¨çš„æ ·å¼å¯¹æŸä¸ªå…ƒç´ é»˜è®¤å¤–è§‚çš„è¦†ç›–</strong>ï¼Œæ¢å¤åˆ°æµè§ˆå™¨æä¾›çš„é»˜è®¤æ ·å¼ï¼Œä½¿ç”¨ <code>revert</code>ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python ç¼–ç¨‹å®æˆ˜ Â· è¿›é˜¶ä¸èŒä¸šå‘å±•ï¼šWeb å…¨æ ˆï¼ˆDjango / FastAPIï¼‰]]></title>    <link>https://juejin.cn/post/7575015480199118900</link>    <guid>https://juejin.cn/post/7575015480199118900</guid>    <pubDate>2025-11-22T04:39:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575015480199118900" data-draft-id="7575065455074574371" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python ç¼–ç¨‹å®æˆ˜ Â· è¿›é˜¶ä¸èŒä¸šå‘å±•ï¼šWeb å…¨æ ˆï¼ˆDjango / FastAPIï¼‰"/> <meta itemprop="keywords" content="åç«¯,Python,Trae"/> <meta itemprop="datePublished" content="2025-11-22T04:39:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python ç¼–ç¨‹å®æˆ˜ Â· è¿›é˜¶ä¸èŒä¸šå‘å±•ï¼šWeb å…¨æ ˆï¼ˆDjango / FastAPIï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T04:39:16.000Z" title="Sat Nov 22 2025 04:39:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨ Python çš„èŒä¸šåŒ–é“è·¯ä¸Šï¼ŒWeb å¼€å‘å‡ ä¹æ˜¯ç»•ä¸è¿‡çš„æ–¹å‘ã€‚ä»ä¼ ç»Ÿ MVC æ¡†æ¶åˆ°ç°ä»£å¼‚æ­¥ API æœåŠ¡ï¼ŒPython çš„ Web ç”Ÿæ€ä¸»è¦ç”±ä¸¤å¤§ä»£è¡¨å æ®ï¼š<strong>Django</strong> ä¸ <strong>FastAPI</strong>ã€‚</p>
</blockquote>
<p>å®ƒä»¬é£æ ¼è¿¥å¼‚ï¼Œå´éƒ½æœ‰ç€éå¸¸å¼ºçš„ç”Ÿäº§åŠ›ã€‚æœ¬ç¯‡å¸¦ä½ ä»æ¶æ„ç†å¿µã€åº”ç”¨åœºæ™¯ã€æ ¸å¿ƒç‰¹æ€§åˆ°å·¥ç¨‹å®è·µï¼Œå…¨é¢äº†è§£å®ƒä»¬åœ¨ Web å…¨æ ˆå¼€å‘ä¸­çš„å®šä½ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>ä¸€ã€Djangoï¼šæˆç†Ÿçš„â€œå…¨å®¶æ¡¶â€ Web Framework</strong></h2>
<p>å¦‚æœä½ æƒ³æ„å»ºä¸€ä¸ª<strong>å®Œæ•´ã€ä¸¥è‚ƒã€åŠŸèƒ½å®Œå–„çš„ Web ç½‘ç«™</strong>ï¼Œé‚£ä¹ˆ Django æ˜¯æœ€ç¨³å¦¥çš„é€‰æ‹©ã€‚å®ƒéµå¾ª MTV æ¨¡å¼ï¼Œå¹¶ä¸”å¸¦ç€å¤§é‡â€œå¼€ç®±å³ç”¨â€çš„ç»„ä»¶ï¼š</p>
<ul>
<li>ORMï¼ˆæ•°æ®åº“å±‚ï¼‰</li>
<li>æ¨¡æ¿ç³»ç»Ÿï¼ˆå‰ç«¯æ¸²æŸ“ï¼‰</li>
<li>ç”¨æˆ·è®¤è¯ç³»ç»Ÿ</li>
<li>ä¸­é—´ä»¶æœºåˆ¶</li>
<li>Admin åå°</li>
<li>ç¼“å­˜ç³»ç»Ÿ</li>
<li>Form / è¡¨å•éªŒè¯</li>
<li>ä¼šè¯ç®¡ç†ç­‰æˆç†Ÿæœºåˆ¶</li>
</ul>
<p>è¿™ç§è®¾è®¡è®©å®ƒä¸€ç›´æ˜¯ä¼ä¸šçº§ Web é¡¹ç›®çš„é¦–é€‰ï¼Œå°¤å…¶é€‚åˆï¼š</p>
<p>âœ” CMS / ä¼ä¸šç½‘ç«™
âœ” ç”µå•†ç³»ç»Ÿ
âœ” å†…éƒ¨ç®¡ç†å¹³å°ï¼ˆERP/CRMï¼‰
âœ” å†…å®¹å‘å¸ƒç³»ç»Ÿ
âœ” éœ€è¦è´¦æˆ·ä½“ç³»ã€æƒé™çš„é¡¹ç›®</p>
<hr/>
<h3 data-id="heading-1"><strong>1. Django çš„æ¶æ„ä¼˜åŠ¿</strong></h3>
<h4 data-id="heading-2"><strong>ï¼ˆ1ï¼‰é«˜é›†æˆåº¦ï¼šæ— éœ€è‡ªè¡ŒæŒ‘é€‰ä¾èµ–</strong></h4>
<p>Django çš„æ ¸å¿ƒä»·å€¼ä¹‹ä¸€å°±æ˜¯è®©å¼€å‘è€…<strong>ä¸“æ³¨ä¸šåŠ¡ï¼Œè€Œä¸æ˜¯æ¡†æ¶æ­å»º</strong>ã€‚</p>
<p>ä¸€ä¸ªç®€å•å‘½ä»¤å°±èƒ½åˆå§‹åŒ–é¡¹ç›®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">django-admin startproject mysite
</code></pre>
<p>ç”¨æˆ·ä½“ç³»ã€Admin åå°ã€ORM å…¨éƒ½è‡ªå¸¦ï¼ŒåŸºæœ¬ä¸ç”¨æ“å¿ƒâ€œè£…ä¸€å †åº“â€ã€‚</p>
<hr/>
<h4 data-id="heading-3"><strong>ï¼ˆ2ï¼‰Django ORMï¼šå¼€å‘æ•ˆç‡æé«˜</strong></h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Article</span>(models.Model):
    title = models.CharField(max_length=<span class="hljs-number">100</span>)
    content = models.TextField()
    created_at = models.DateTimeField(auto_now_add=<span class="hljs-literal">True</span>)
</code></pre>
<p>å¢åˆ æ”¹æŸ¥å®Œå…¨ä¸ç”¨å†™ SQLï¼š</p>
<pre><code class="hljs language-python" lang="python">Article.objects.create(title=<span class="hljs-string">"Hello"</span>, content=<span class="hljs-string">"World"</span>)
</code></pre>
<p>å¯¹äºå¤æ‚é¡¹ç›®ï¼Œè¿™ç§ ORM èƒ½çœæ‰å¤§é‡æ ·æ¿ä»£ç ã€‚</p>
<hr/>
<h4 data-id="heading-4"><strong>ï¼ˆ3ï¼‰Admin åå°ï¼šä¼ä¸šé¡¹ç›®å¿…å¤‡</strong></h4>
<p>Django Admin æ˜¯ä¸€ä¸ªè¶…çº§ç”Ÿäº§åŠ›å·¥å…·ï¼š</p>
<ul>
<li>è‡ªåŠ¨ç”Ÿæˆå¢åˆ æ”¹æŸ¥ç•Œé¢</li>
<li>è‡ªåŠ¨åˆ†é¡µã€æœç´¢ã€è¿‡æ»¤</li>
<li>è‡ªåŠ¨ç®¡ç†æƒé™</li>
</ul>
<p>åªéœ€å‡ è¡Œï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> django.contrib <span class="hljs-keyword">import</span> admin
<span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> Article

admin.site.register(Article)
</code></pre>
<p>å°±æ‹¥æœ‰ä¸€ä¸ªå¯ç”¨çš„åå°ç®¡ç†ç³»ç»Ÿã€‚</p>
<hr/>
<h4 data-id="heading-5"><strong>ï¼ˆ4ï¼‰æ‰©å±•æ€§ä¸ç”Ÿæ€</strong></h4>
<p>Django æ‹¥æœ‰æˆç†Ÿçš„ç¬¬ä¸‰æ–¹ç”Ÿæ€ï¼š</p>
<ul>
<li>DRFï¼ˆæ„å»º REST APIï¼‰</li>
<li>Django Debug Toolbar</li>
<li>Django Channelsï¼ˆWebSocketï¼‰</li>
<li>Celeryï¼ˆä»»åŠ¡é˜Ÿåˆ—ï¼‰</li>
<li>Wagtail / Django-CMS</li>
</ul>
<p>é€‚åˆæ„å»ºå¤æ‚/é•¿æœŸç»´æŠ¤çš„é¡¹ç›®ã€‚</p>
<hr/>
<h2 data-id="heading-6"><strong>äºŒã€FastAPIï¼šå¼‚æ­¥æ—¶ä»£çš„é«˜æ€§èƒ½æ¥å£æ¡†æ¶</strong></h2>
<p>FastAPI æ˜¯è¿‘å¹´æ¥å¢é•¿æœ€å¿«çš„ Python Web æ¡†æ¶ï¼Œå®ƒä»£è¡¨äº†ç°ä»£ API è®¾è®¡ç†å¿µï¼š</p>
<p><strong>é«˜æ€§èƒ½ + å¼‚æ­¥ + ç±»å‹æç¤º + è‡ªåŠ¨æ–‡æ¡£</strong></p>
<p>éå¸¸é€‚åˆï¼š</p>
<p>âœ” é«˜å¹¶å‘ API æœåŠ¡
âœ” å¾®æœåŠ¡æ¶æ„
âœ” AI / æ•°æ®æ¥å£
âœ” ç§»åŠ¨ç«¯åç«¯
âœ” éœ€è¦è‡ªåŠ¨åŒ–æ–‡æ¡£çš„é¡¹ç›®ï¼ˆSwagger UIï¼‰</p>
<hr/>
<h3 data-id="heading-7"><strong>1. FastAPI çš„æ ¸å¿ƒä¼˜åŠ¿</strong></h3>
<h4 data-id="heading-8"><strong>ï¼ˆ1ï¼‰æ€§èƒ½å¼ºï¼šåŸºäº Starlette + Pydantic</strong></h4>
<p>FastAPI æ˜¯ç›®å‰æ€§èƒ½æœ€å¼ºçš„ Python Web æ¡†æ¶ä¹‹ä¸€ï¼Œæ¥è¿‘ Node.js å’Œ Goã€‚</p>
<p>å®ƒçš„å¼‚æ­¥ç‰¹æ€§è®©å®ƒå¯ä»¥è½»æ¾æ”¯æ’‘é«˜å¹¶å‘è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> FastAPI

app = FastAPI()

<span class="hljs-meta">@app.get(<span class="hljs-params"><span class="hljs-string">"/hello"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">hello</span>():
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"msg"</span>: <span class="hljs-string">"world"</span>}
</code></pre>
<hr/>
<h4 data-id="heading-9"><strong>ï¼ˆ2ï¼‰è‡ªåŠ¨ç”Ÿæˆ Swagger / Redoc æ–‡æ¡£</strong></h4>
<p>åªéœ€è®¿é—®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/docs
</code></pre>
<p>å°±èƒ½çœ‹åˆ°å®Œæ•´çš„ API æ–‡æ¡£ï¼Œæ‰€æœ‰å‚æ•°ã€è¿”å›å€¼éƒ½è‡ªåŠ¨æ¨å¯¼ã€‚</p>
<hr/>
<h4 data-id="heading-10"><strong>ï¼ˆ3ï¼‰Pydantic æ•°æ®éªŒè¯éå¸¸å¼ºå¤§</strong></h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel

<span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    name: <span class="hljs-built_in">str</span>
    age: <span class="hljs-built_in">int</span>
</code></pre>
<p>è¯·æ±‚ä½“éªŒè¯ç›´æ¥å†™æˆæ•°æ®æ¨¡å‹ï¼Œå¤§å¹…æå‡å¯é æ€§ã€‚</p>
<hr/>
<h4 data-id="heading-11"><strong>ï¼ˆ4ï¼‰æ›´ç°ä»£çš„ä»£ç é£æ ¼</strong></h4>
<p>FastAPI é¼“åŠ±ï¼š</p>
<ul>
<li>ç±»å‹æ³¨è§£</li>
<li>å¼‚æ­¥ async/await</li>
<li>ä¾èµ–æ³¨å…¥æ¨¡å¼ï¼ˆDIï¼‰</li>
<li>é¢å‘å¾®æœåŠ¡æ¶æ„çš„ç»„ç»‡æ–¹å¼</li>
</ul>
<p>ä¸å½“ä»£å·¥ç¨‹è¶‹åŠ¿é«˜åº¦å¥‘åˆã€‚</p>
<hr/>
<h2 data-id="heading-12"><strong>ä¸‰ã€ä¸¤è€…å·®å¼‚ï¼šä½ åº”è¯¥é€‰æ‹©å“ªä¸ªï¼Ÿ</strong></h2>













































<table><thead><tr><th>é¡¹ç›®éœ€æ±‚</th><th>Django</th><th>FastAPI</th></tr></thead><tbody><tr><td>ä¼ ç»Ÿ Web ç½‘ç«™</td><td>âœ”âœ” æœ€é€‚åˆ</td><td>ä¸€èˆ¬</td></tr><tr><td>å¤æ‚ä¸šåŠ¡ç³»ç»Ÿï¼ˆæƒé™ã€åå°ï¼‰</td><td>âœ”âœ” æœ€ä¼˜</td><td>ä¸€èˆ¬</td></tr><tr><td>å¾®æœåŠ¡ / API</td><td>å¯ç”¨ï¼ˆDRFï¼‰</td><td>âœ”âœ” æœ€ä¼˜</td></tr><tr><td>é«˜å¹¶å‘åœºæ™¯</td><td>ä¸€èˆ¬</td><td>âœ”âœ” æ›´å¼º</td></tr><tr><td>å¿«é€Ÿå¼€å‘</td><td>âœ”ï¼ˆæœ‰å…¨å®¶æ¡¶ï¼‰</td><td>âœ”ï¼ˆè¾ƒå°‘æ ·æ¿ï¼‰</td></tr><tr><td>è‡ªåŠ¨åŒ– API æ–‡æ¡£</td><td>éœ€è¦ DRF</td><td>å†…ç½®</td></tr><tr><td>å¼‚æ­¥æ”¯æŒ</td><td>ä¸å®Œç¾</td><td>å®Œç¾</td></tr></tbody></table>
<p>ä¸€å¥è¯æ€»ç»“ï¼š</p>
<p><strong>Django é€‚åˆé•¿å‘¨æœŸã€å¤æ‚ä¸šåŠ¡çš„â€œä¼ä¸šçº§ç³»ç»Ÿâ€ï¼›
FastAPI é€‚åˆç°ä»£ã€é«˜æ€§èƒ½ API æœåŠ¡ä¸å¾®æœåŠ¡æ¶æ„ã€‚</strong></p>
<p>åœ¨çœŸå®å›¢é˜Ÿä¸­ï¼Œä¸¤è€…ç»å¸¸æ­é…ä½¿ç”¨ï¼š</p>
<ul>
<li><strong>åå°ç®¡ç†ï¼šDjangoï¼ˆAdmin + ORMï¼‰</strong></li>
<li><strong>é«˜æ€§èƒ½ APIï¼šFastAPIï¼ˆå¹¶å‘å‹å¥½ï¼‰</strong></li>
</ul>
<hr/>
<h2 data-id="heading-13"><strong>å››ã€å®æˆ˜ï¼šé¡¹ç›®ç»“æ„å¯¹æ¯”ï¼ˆä¸“ä¸šçº§ç¤ºä¾‹ï¼‰</strong></h2>
<h3 data-id="heading-14"><strong>1. Django é¡¹ç›®ç»“æ„</strong></h3>
<pre><code class="hljs language-arduino" lang="arduino">mysite/
    manage.py
    settings.py
    urls.py
    apps/
        blog/
            models.py
            views.py
            urls.py
            admin.py
    templates/
    <span class="hljs-type">static</span>/
</code></pre>
<hr/>
<h3 data-id="heading-15"><strong>2. FastAPI é¡¹ç›®ç»“æ„ï¼ˆæ¨èï¼‰</strong></h3>
<pre><code class="hljs language-arduino" lang="arduino">app/
    main.py
    api/
        v1/
            users.py
            items.py
    models/
        user.py
    core/
        config.py
    services/
        user_service.py
</code></pre>
<p>æ¸…æ™°ã€å¯æ‰©å±•ã€é€‚åˆå¤§å‹é¡¹ç›®ã€‚</p>
<hr/>
<h2 data-id="heading-16"><strong>äº”ã€æ•°æ®åº“ã€å¼‚æ­¥ã€æƒé™ï¼šå…¨æ ˆå·¥ç¨‹å…³é”®ç‚¹</strong></h2>
<h4 data-id="heading-17"><strong>Djangoï¼šORM + Admin åŸºæœ¬æå®šå…¨å±€ä¸šåŠ¡</strong></h4>
<ul>
<li>æƒé™ç®¡ç†æˆç†Ÿ</li>
<li>ORM å¼ºå¤§</li>
<li>Sessions/Cache ä¸­é—´ä»¶å®Œå–„</li>
</ul>
<p>é€‚åˆéœ€è¦ç®¡ç†åå°çš„ç³»ç»Ÿã€‚</p>
<hr/>
<h4 data-id="heading-18"><strong>FastAPIï¼šå¼‚æ­¥å‹å¥½çš„æ•°æ®åº“å·¥å…·</strong></h4>
<p>å¸¸è§é€‰æ‹©ï¼š</p>
<ul>
<li>SQLAlchemy + AsyncSession</li>
<li>Tortoise ORM</li>
<li>Prisma-Python</li>
</ul>
<hr/>
<h4 data-id="heading-19"><strong>API æƒé™ï¼ˆFastAPIï¼‰</strong></h4>
<p>FastAPI ä¸­ä½¿ç”¨ä¾èµ–æ³¨å…¥ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">verify_token</span>(<span class="hljs-params">token: <span class="hljs-built_in">str</span> = Header(<span class="hljs-params">...</span>)</span>):
    <span class="hljs-keyword">if</span> token != <span class="hljs-string">"VALID"</span>:
        <span class="hljs-keyword">raise</span> HTTPException(<span class="hljs-number">403</span>)
</code></pre>
<p>éå¸¸çµæ´»ã€‚</p>
<hr/>
<h2 data-id="heading-20"><strong>å…­ã€éƒ¨ç½²ï¼šå·¥ç¨‹å›¢é˜Ÿå¿…é¡»æŒæ¡çš„çŸ¥è¯†ç‚¹</strong></h2>
<h4 data-id="heading-21"><strong>Django éƒ¨ç½²</strong></h4>
<p>æ¨èï¼š</p>
<ul>
<li>Nginx + Gunicorn / uWSGI</li>
<li>Celery + Redisï¼ˆä»»åŠ¡é˜Ÿåˆ—ï¼‰</li>
<li>Supervisor / systemd ç®¡ç†è¿›ç¨‹</li>
</ul>
<p>é€‚åˆä¼ ç»Ÿå•ä½“æ¶æ„ã€‚</p>
<hr/>
<h4 data-id="heading-22"><strong>FastAPI éƒ¨ç½²</strong></h4>
<p>æ¨èï¼š</p>
<ul>
<li>Nginx + Uvicorn / Hypercorn</li>
<li>Dockerï¼ˆå¾®æœåŠ¡æœ€ä½³ï¼‰</li>
<li>Kubernetesï¼ˆå¤§è§„æ¨¡é›†ç¾¤ï¼‰</li>
</ul>
<p>FastAPI å¯¹å®¹å™¨åŒ–æ”¯æŒæ›´å¥½ã€‚</p>
<hr/>
<h2 data-id="heading-23"><strong>ä¸ƒã€æ€»ç»“ï¼šçœŸæ­£çš„ Python Web å…¨æ ˆèƒ½åŠ›</strong></h2>
<p>æˆä¸ºä¸“ä¸š Python å·¥ç¨‹å¸ˆï¼Œä½ åº”è¯¥æŒæ¡ï¼š</p>
<p>âœ” Djangoï¼šæ‰“é€ å¤æ‚ä¸šåŠ¡ç³»ç»Ÿä¸åå°
âœ” DRFï¼šDjango API åŒ–
âœ” FastAPIï¼šé«˜æ€§èƒ½ API æœåŠ¡
âœ” ORMï¼ˆDjango ORM / SQLAlchemyï¼‰
âœ” å‰åç«¯åˆ†ç¦»ï¼ˆVue / Reactï¼‰
âœ” Nginx / Docker éƒ¨ç½²æµç¨‹</p>
<p>è€Œ Django + FastAPI çš„ç»„åˆï¼Œèƒ½è¦†ç›–ç»å¤§å¤šæ•°ä¼ä¸šçº§åœºæ™¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸŒ³ Claude `code/worktree` å‘½ä»¤æœ€ä½³å®è·µæŒ‡å—]]></title>    <link>https://juejin.cn/post/7575050949959614500</link>    <guid>https://juejin.cn/post/7575050949959614500</guid>    <pubDate>2025-11-22T02:30:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575050949959614500" data-draft-id="7575067409416077355" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸŒ³ Claude `code/worktree` å‘½ä»¤æœ€ä½³å®è·µæŒ‡å—"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,Claude,Trae"/> <meta itemprop="datePublished" content="2025-11-22T02:30:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸŒ³ Claude `code/worktree` å‘½ä»¤æœ€ä½³å®è·µæŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T02:30:09.000Z" title="Sat Nov 22 2025 02:30:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§­ ä¸€ã€å‰è¨€ï¼šå½“AIå¼€å§‹ã€Œæ¬ç –ã€</h2>
<p>åœ¨ä¸ <strong>Claude</strong>ï¼ˆAnthropic å¼€å‘çš„AIåŠ©æ‰‹ï¼‰åä½œå¼€å‘ä»£ç æ—¶ï¼Œ<code>code/worktree</code> å‘½ä»¤æ˜¯ä¸€ä¸ªæå…¶æœ‰è¶£çš„å·¥å…·ã€‚<br/>
è¿™ä¸€å‘½ä»¤çš„æ„å›¾ï¼Œæ˜¯è®© AI å’Œå¼€å‘è€…åœ¨ä¸€ä¸ª<strong>éš”ç¦»ä½†åŒæ­¥çš„å·¥ä½œåŒº</strong>ä¸­ååŒä¿®æ”¹ã€ç»„ç»‡é¡¹ç›®ï¼Œå°±åƒæ˜¯ç»™ Claude è‡ªå·±å‡†å¤‡äº†ä¸€ä¸ªâ€œè™šæ‹Ÿåˆ†æ”¯å·¥ä½â€ã€‚</p>
<p>ç®€è¨€ä¹‹ï¼š</p>
<blockquote>
<p><code>code/worktree</code> â‰ˆ â€œè®© Claude ä¸ç ´åä¸»ä»£ç åº“å°±èƒ½å®éªŒæ–°åŠŸèƒ½çš„é­”æ³•ç©ºé—´â€ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-1">ğŸ§© äºŒã€å‘½ä»¤çš„é€»è¾‘æœ¬è´¨ä¸åº•å±‚å“²å­¦</h2>
<p>ä»åº•å±‚åŸç†è®²ï¼Œå®ƒä¸ Git çš„ <strong>worktree</strong> æ€æƒ³ä¸€è‡´ï¼š<br/>
åˆ›å»ºä¸€ä¸ªå…±äº« <code>.git</code> å…ƒæ•°æ®ä½†ç‹¬ç«‹å·¥ä½œç›®å½•çš„å‰¯æœ¬ã€‚<br/>
è¿™ç§è®¾è®¡æ—¢ä¿ç•™äº†ç‰ˆæœ¬æ§åˆ¶çš„å®Œæ•´æ€§ï¼Œåˆè®©å¤šåœºæ™¯å¼€å‘æˆä¸ºå¯èƒ½ã€‚</p>
<p>åœ¨ Claude ä½“ç³»ä¸­ï¼Œ<code>code/worktree</code> çš„å“²å­¦æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li><strong>Claude ä¸ç›´æ¥æ”¹ä¸»å¹²ï¼ˆmain branchï¼‰</strong> ã€‚</li>
<li><strong>æ¯æ¬¡ç”Ÿæˆä»£ç ï¼Œéƒ½åœ¨ä¸´æ—¶å·¥ä½œåŒºä¸­ä¿®æ”¹ã€‚</strong></li>
<li><strong>å¼€å‘è€…å¯ä»¥é€‰æ‹©åˆå…¥ã€é‡æ„æˆ–ä¸¢å¼ƒã€‚</strong></li>
</ol>
<p>æ¢å¥è¯è¯´ï¼šClaude æ˜¯æ–‡æ˜çš„ï¼Œä¸ä¼šç›´æ¥åœ¨ä½ çš„ä¸»åˆ†æ”¯ä¸Šä¹±åŠ¨ã€‚</p>
<hr/>
<h2 data-id="heading-2">âš™ï¸ ä¸‰ã€åŸºç¡€è¯­æ³•ä¸ç»“æ„</h2>
<p>å‡è®¾ä½ å·²ç»å°†é¡¹ç›®ä»¥ Claude çš„ workspace æ–¹å¼åŠ è½½ã€‚<br/>
æ­¤æ—¶ä½¿ç”¨å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/worktree create feature/refactor-api
</code></pre>
<p>Claude å°†ï¼š</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ª <code>feature/refactor-api</code> çš„å·¥ä½œåŒºã€‚</li>
<li>å°†å½“å‰ HEAD çš„ä»£ç å¤åˆ¶åˆ°æ–°ç›®å½•ï¼ˆä½†å…±äº« <code>.git</code> æ•°æ®ï¼‰ã€‚</li>
<li>åœ¨è¯¥å·¥ä½œåŒºä¸‹ç”Ÿæˆã€ä¿®æ”¹ã€è¿è¡Œä»£ç ã€‚</li>
</ol>
<p>å®Œæˆåï¼Œä½ å¯ä»¥é€šè¿‡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/worktree merge feature/refactor-api
</code></pre>
<p>å°†æ”¹åŠ¨å®‰å…¨åœ°åˆå¹¶å›ä¸»å·¥ä½œåŒºã€‚</p>
<hr/>
<h2 data-id="heading-3">ğŸ§° å››ã€å®è·µæ¡ˆä¾‹ï¼šè®© Claude æ”¹é€ ä½ çš„ Web åº”ç”¨</h2>
<h3 data-id="heading-4">ğŸ§ª åœºæ™¯ç¤ºä¾‹</h3>
<p>ä½ æœ‰ä¸€ä¸ª Node.js + React çš„é¡¹ç›®ï¼š</p>
<pre><code class="hljs language-css" lang="css">my-app/
  â”œâ”€â”€ <span class="hljs-attribute">src</span>/
  â”œâ”€â”€ package<span class="hljs-selector-class">.json</span>
  â””â”€â”€ server<span class="hljs-selector-class">.js</span>
</code></pre>
<p>ä½ å¸Œæœ› Claude å¸®ä½ ï¼š</p>
<blockquote>
<p>å°† Express server æ”¹ä¸ºæ”¯æŒ WebSocket é€šä¿¡ã€‚</p>
</blockquote>
<h3 data-id="heading-5">ğŸ¦¾ æ“ä½œæµç¨‹</h3>
<ol>
<li>
<p><strong>åˆ›å»º Claude å·¥ä½œåŒº</strong></p>
<pre><code class="hljs language-bash" lang="bash">/worktree create feature/add-websocket
</code></pre>
</li>
<li>
<p><strong>Claude è¿›å…¥ä¸“å±å·¥ä½</strong></p>
<p>Claude ä¼šè‡ªåŠ¨å…‹éš†ä»£ç ç»“æ„åˆ°ä¸€ä¸ªæ–°å·¥ä½œåŒºã€‚<br/>
å®ƒçš„ä¿®æ”¹æ“ä½œä¸ä¼šå½±å“ä¸»åˆ†æ”¯ã€‚</p>
</li>
<li>
<p><strong>è®© Claude ä¿®æ”¹ä»£ç </strong></p>
<pre><code class="hljs language-bash" lang="bash">/edit In feature/add-websocket:
Add WebSocket support to server.js
</code></pre>
</li>
<li>
<p><strong>Claude ç¼–è¾‘å¹¶å±•ç¤ºå·®å¼‚</strong></p>
<p>Claude ä¼šç”¨ diff å½¢å¼å±•ç¤ºä¿®æ”¹åŒºåŸŸï¼Œå¼€å‘è€…ç¡®è®¤åæ‰ä¼šè½åœ°ã€‚</p>
</li>
<li>
<p><strong>æµ‹è¯•å’Œè¯„å®¡</strong></p>
<p>ä½ å¯ä»¥è®© Claude æ‰§è¡Œå•å…ƒæµ‹è¯•å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/run npm <span class="hljs-built_in">test</span>
</code></pre>
<p>æˆ–è®©å®ƒè‡ªåŠ¨è¿è¡Œ ESLint æ£€æŸ¥ã€‚</p>
</li>
<li>
<p><strong>åˆå¹¶æˆæœ</strong></p>
<p>ä¸€æ—¦æ»¡æ„ï¼Œå¯ä»¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/worktree merge feature/add-websocket
</code></pre>
<p>å®Œæˆé›†æˆåå¯ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/worktree delete feature/add-websocket
</code></pre>
<p>æ¸…ç†éš”ç¦»åŒºï¼Œä¿æŒå·¥ä½œåŒºæ•´æ´ã€‚</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-6">ğŸ§  äº”ã€åº•å±‚å®ç°å»ºè®®ï¼ˆç»“åˆGitæœºåˆ¶ï¼‰</h2>
<blockquote>
<p>Claude <code>code/worktree</code> çš„å®ç°å¯è¢«ç†è§£ä¸ºï¼šé€šè¿‡<strong>AIæ§åˆ¶çš„Gitä¸´æ—¶åˆ†æ”¯</strong>æ‰§è¡ŒæŠ½è±¡çš„å·¥ä½œæµã€‚</p>
</blockquote>
<p>åœ¨åº•å±‚å®ç°ä¸Šï¼Œå¯å¤ç”¨ä»¥ä¸‹ç±» Git é€»è¾‘ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¨¡æ‹Ÿ Claude çš„ code/worktree æµç¨‹</span>
<span class="hljs-keyword">const</span> { execSync } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'child_process'</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">createWorktree</span>(<span class="hljs-params">branch</span>) {
  <span class="hljs-title function_">execSync</span>(<span class="hljs-string">`git worktree add ../<span class="hljs-subst">${branch}</span> <span class="hljs-subst">${branch}</span>`</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸŒ¿ Created worktree: <span class="hljs-subst">${branch}</span>`</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">mergeWorktree</span>(<span class="hljs-params">branch</span>) {
  <span class="hljs-title function_">execSync</span>(<span class="hljs-string">`git checkout main`</span>);
  <span class="hljs-title function_">execSync</span>(<span class="hljs-string">`git merge <span class="hljs-subst">${branch}</span>`</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`âœ… Merged <span class="hljs-subst">${branch}</span> into main`</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">deleteWorktree</span>(<span class="hljs-params">branch</span>) {
  <span class="hljs-title function_">execSync</span>(<span class="hljs-string">`git worktree remove ../<span class="hljs-subst">${branch}</span> --force`</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ§¹ Deleted worktree: <span class="hljs-subst">${branch}</span>`</span>);
}
</code></pre>
<p>Claude åœ¨å…¶å†…éƒ¨ç³»ç»Ÿä¸­æ‰§è¡Œäº†ç±»ä¼¼é€»è¾‘ï¼Œä½†å°†å…¶å…³è”åˆ° AI æ–‡ä»¶ç¼“å­˜å’Œç¼–è¾‘ä¸Šä¸‹æ–‡ç®¡ç†ä¸­ï¼Œä½¿å…¶èƒ½å¤Ÿï¼š</p>
<ul>
<li>é«˜é€ŸåŠ è½½å…³è”æ–‡ä»¶ï¼›</li>
<li>åœ¨éš”ç¦»ç¯å¢ƒä¸­ç¼–è¯‘ï¼›</li>
<li>æ”¯æŒå¤šç‰ˆæœ¬å›æº¯ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-7">âš–ï¸ å…­ã€æœ€ä½³å®è·µå»ºè®®ï¼ˆé‡ç£…ç²¾åï¼‰</h2>



































<table><thead><tr><th>ç›®æ ‡</th><th>å»ºè®®å®è·µ</th><th>Claudeå‘½ä»¤ç¤ºä¾‹</th></tr></thead><tbody><tr><td>å¿«é€Ÿè¯•éªŒ</td><td>ä¸ºé‡å¤§é‡æ„ä»£ç é¢„ç•™ç‹¬ç«‹worktree</td><td><code>/worktree create feature/new-ui</code></td></tr><tr><td>å®¡æŸ¥ä»£ç </td><td>ä½¿ç”¨ Claude ç”Ÿæˆdiffå¹¶ç”±äººå·¥ç¡®è®¤</td><td><code>/diff feature/new-ui</code></td></tr><tr><td>è‡ªåŠ¨åŒ–æµ‹è¯•</td><td>å°†æµ‹è¯•è„šæœ¬æ³¨å†Œä¸º Hook</td><td><code>/test run feature/new-ui</code></td></tr><tr><td>å¹¶è¡Œå¼€å‘</td><td>ä¸ºæ¯ä¸ªæ¨¡å—åˆ†é… Claude å®ä¾‹ä¸ç‹¬ç«‹ worktree</td><td><code>/worktree create feature/auth-refactor</code></td></tr><tr><td>å®‰å…¨ç®¡ç†</td><td>å®šæœŸè®© Claude æ¸…ç†è¿‡æœŸå·¥ä½œåŒº</td><td><code>/worktree prune</code></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-8">ğŸ§© ä¸ƒã€å†·çŸ¥è¯†ä¸å¹½é»˜æ’æ›²</h2>
<ul>
<li>
<p>æœ‰äººé—®ï¼šä¸ºä»€ä¹ˆ Claude ä¸ç›´æ¥æ”¹ä¸»åˆ†æ”¯ï¼Ÿ<br/>
ğŸ§‘â€ğŸ’» å›ç­”ï¼š<strong>å› ä¸ºä»–æ‡‚ç‰ˆæœ¬ç®¡ç†çš„ç¤¼ä»ªã€‚</strong></p>
</li>
<li>
<p>ä¸€ä¸ªå…¸å‹çš„é”™è¯¯ç”¨æ³•æ˜¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/worktree create main-feature
</code></pre>
<p>Claude ä¼šæ¸©æŸ”åœ°æé†’ï¼š<br/>
<em>â€œæ‚¨åˆšè¯•å›¾æ”¹å†™å†å²ï¼Œè¯·å†·é™ã€‚â€</em></p>
</li>
<li>
<p>åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼ŒClaude çš„ <code>code/worktree</code> ç­–ç•¥å°±åƒå¤šçº¿ç¨‹è°ƒåº¦ï¼š</p>
<blockquote>
<p>æ¯ä¸ªå·¥ä½œåŒºå°±æ˜¯ä¸€ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½åœ¨ä¸ºæœªæ¥çš„ä¸»å¹²é™é™åŠªåŠ›ã€‚</p>
</blockquote>
</li>
</ul>
<hr/>
<h2 data-id="heading-9">ğŸ›  å…«ã€ç»“è¯­ï¼šè®©Claudeæˆä¸ºä½ çš„ã€Œå®‰å…¨ç¼–è¾‘å™¨ã€</h2>
<p>åˆç†ä½¿ç”¨ <code>code/worktree</code>ï¼Œæœ¬è´¨ä¸Šæ˜¯è®© Claude ä»ä¸€ä¸ªâ€œAIåŠ©æ‰‹â€å‡çº§ä¸º<strong>ååŒå¼å‰¯å¼€å‘è€…ï¼ˆCo-Developerï¼‰</strong> ã€‚<br/>
å®ƒä¸åªæ˜¯å†™ä»£ç ï¼Œè€Œæ˜¯éµå®ˆå¼€å‘æµç¨‹ï¼Œä¸äººç±»å›¢é˜Ÿå…±ç”Ÿã€‚</p>
<p>å½“ Claude ç”Ÿæˆä»£ç çš„åŒæ—¶ï¼Œè¿˜èƒ½ä¿è¯ä¸»åˆ†æ”¯çš„æ•´æ´ä¸å®‰å…¨æ—¶ï¼Œ<br/>
ä½ ä¼šå‘ç°å¼€å‘å˜å¾—è½»ç›ˆã€ç­–ç•¥å˜å¾—ä¼˜é›…ã€‚</p>
<hr/>
<blockquote>
<p>âœ¨ <strong>æœ€ç»ˆç®´è¨€ï¼š</strong></p>
<p>â€œèªæ˜çš„å¼€å‘è€…è‡ªå·±å†™ä»£ç ï¼Œæ›´èªæ˜çš„å¼€å‘è€…æ•™ Claude åœ¨å¦ä¸€ä¸ª world é‡Œå†™ã€‚â€</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸŒŒ AIGCæ¨¡å‹çš„å†·å¯åŠ¨é—®é¢˜ï¼šWebåº”ç”¨çš„åˆæœŸæŠ€æœ¯æ”¯æ’‘ç­–ç•¥]]></title>    <link>https://juejin.cn/post/7575022279568588841</link>    <guid>https://juejin.cn/post/7575022279568588841</guid>    <pubDate>2025-11-22T02:26:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575022279568588841" data-draft-id="7575050949959581732" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸŒŒ AIGCæ¨¡å‹çš„å†·å¯åŠ¨é—®é¢˜ï¼šWebåº”ç”¨çš„åˆæœŸæŠ€æœ¯æ”¯æ’‘ç­–ç•¥"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,Trae"/> <meta itemprop="datePublished" content="2025-11-22T02:26:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸŒŒ AIGCæ¨¡å‹çš„å†·å¯åŠ¨é—®é¢˜ï¼šWebåº”ç”¨çš„åˆæœŸæŠ€æœ¯æ”¯æ’‘ç­–ç•¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T02:26:48.000Z" title="Sat Nov 22 2025 02:26:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§Š ä¸€ã€å¼•è¨€ï¼šå½“AIè¿˜æ²¡â€œé†’æ¥â€</h2>
<p>åœ¨AIGCï¼ˆAI Generated Contentï¼‰æµªæ½®ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸é‡åˆ°è¿™æ ·ä¸€ä¸ªå°´å°¬æ—¶åˆ»ï¼š</p>
<blockquote>
<p>äº§å“ä¸Šçº¿ç¬¬ä¸€å¤©ï¼Œç”¨æˆ·ç‚¹å¼€é¡µé¢ï¼ŒAIæ¨¡å‹æ²‰é»˜å¦‚å±±ã€‚<br/>
å›¢é˜Ÿçœ¨çœ¼äº’æœ›ï¼Œä¸€å¥â€œç¨ç­‰åŠ è½½â€æˆä¸ºé«˜é¢‘å°è¯ã€‚</p>
</blockquote>
<p>è¿™å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„â€”â€”<strong>AIGCæ¨¡å‹çš„å†·å¯åŠ¨é—®é¢˜</strong>ã€‚<br/>
åˆ«è¢«è¿™ä¸ªè¯å“åˆ°ï¼Œå®ƒä¸æ˜¯ä»€ä¹ˆç„å­¦ï¼Œè€Œæ˜¯è®¡ç®—æœºç³»ç»Ÿåœ¨é¢å¯¹<strong>åˆå§‹èµ„æºåŒ®ä¹ã€æ¨¡å‹æœªçƒ­èº«ã€æ•°æ®ä¸è¶³ã€è¯·æ±‚æœªå®šå‹</strong>æ—¶çš„é‚£ç§<em>çµé­‚å†°ç‚¹</em>ã€‚<br/>
æƒ³è±¡ä¸€ä¸‹ï¼ŒAI æ¨¡å‹è¿˜åœ¨å–å®ƒçš„ç¬¬ä¸€æ¯å’–å•¡ï¼Œè€Œç”¨æˆ·å·²ç»åœ¨æ•²é”®ç›˜å‚¬å‘½ã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ§¬ äºŒã€å†·å¯åŠ¨çš„æœ¬è´¨ï¼šä¸€åœºä»é›¶åˆ°ã€Œä¸Šçº¿ã€çš„è¿›åŒ–</h2>
<p>ä»åº•å±‚åŸç†æ¥çœ‹ï¼ŒAIGC æ¨¡å‹çš„å†·å¯åŠ¨è¿‡ç¨‹åŒ…å«ä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li><strong>è®¡ç®—å†·</strong>ï¼š<br/>
æ¨¡å‹å‚æ•°å·¨å¤§ï¼ˆåŠ¨è¾„åäº¿ä¸ªå‚æ•°ï¼‰ï¼Œé¦–æ¬¡åŠ è½½æ¨¡å‹æ—¶éœ€è¦æŠŠè¿™äº›å‚æ•°ä»ç£ç›˜æ¬è¿›æ˜¾å­˜ã€‚<br/>
å°±åƒä¸€ä¸ªæ‡’æƒ°çš„å·¨äººâ€”â€”æ¯ä¸€å±‚ç¥ç»éƒ½å¾—å…ˆä¼¸ä¸ªæ‡’è…°ã€‚</li>
<li><strong>ç½‘ç»œå†·</strong>ï¼š<br/>
å¦‚æœæ¨¡å‹éƒ¨ç½²åœ¨äº‘ç«¯ï¼Œé‚£å°±æœ‰ã€Œå»¶è¿Ÿåˆæ‹ã€è¿™ä¸€è¯´ã€‚ç¬¬ä¸€æ¬¡è¯·æ±‚å¾€å¾€è¦èŠ±è´¹é¢å¤–çš„æ¡æ‰‹æ—¶é—´ã€å®¹å™¨å”¤é†’ã€è´Ÿè½½å¹³è¡¡ã€‚</li>
<li><strong>è¯­ä¹‰å†·</strong>ï¼š<br/>
åˆšä¸Šçº¿çš„æ¨¡å‹è¿˜ä¸çŸ¥é“ä½ çš„ä¸šåŠ¡ä¹ æƒ¯ï¼Œæ¯”å¦‚â€œAPPå†…æç¤ºè¯­é£æ ¼â€ã€‚<br/>
å®ƒçš„ç¬¬ä¸€å¥è¯ï¼Œå¯èƒ½åƒåˆšå‡ºå‚çš„R2-D2ä¸€æ ·â€”â€”å……æ»¡æœºæ¢°çš„çº¯çœŸã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-2">âš™ï¸ ä¸‰ã€ä»åº•å±‚å‡ºå‘ï¼šæŠ€æœ¯æ”¯æ’‘ç­–ç•¥</h2>
<p>å†·å¯åŠ¨å¹¶ä¸æ˜¯å®¿å‘½ï¼Œè€Œæ˜¯å¯ä»¥ç”¨æŠ€æœ¯â€œç„çƒ­â€çš„ã€‚ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„æ”¯æ’‘ç­–ç•¥ï¼ŒèƒŒåå„è‡ªæœ‰ç€æ·±åšçš„ç³»ç»Ÿå“²å­¦ã€‚</p>
<hr/>
<h3 data-id="heading-3">ğŸš€ 1. æ¨¡å‹é¢„çƒ­ï¼ˆWarm-Upï¼‰</h3>
<p>æ€è·¯å¾ˆç®€å•ï¼š</p>
<blockquote>
<p>ä¸è¦ç­‰åˆ°ç”¨æˆ·æ¥äº†ï¼Œæ‰å»å”¤é†’æ¨¡å‹ã€‚</p>
</blockquote>
<p>åœ¨Webåº”ç”¨å¯åŠ¨åï¼Œæˆ‘ä»¬å¯ä»¥æ¨¡æ‹Ÿä¸€ç»„è™šå‡çš„ API è°ƒç”¨è¯·æ±‚ï¼Œè®©æ¨¡å‹æå‰åŠ è½½ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ğŸ§Š AIGC å†·å¯åŠ¨é¢„çƒ­è„šæœ¬</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">warmUpModel</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> fakePrompts = [
    <span class="hljs-string">"ä½ å¥½ï¼Œè¯·ç®€å•ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±ã€‚"</span>,
    <span class="hljs-string">"ç”Ÿæˆä¸€å¥å……æ»¡ç§‘æŠ€æ„Ÿçš„å£å·ã€‚"</span>,
    <span class="hljs-string">"å†™ä¸€å¥è®©ç¨‹åºå‘˜æ˜¥é£å¾—æ„çš„ä¿çš®è¯ã€‚"</span>
  ];

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸš€ æ¨¡å‹é¢„çƒ­å¼€å§‹ ..."</span>);

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> prompt <span class="hljs-keyword">of</span> fakePrompts) {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"/api/generate"</span>, {
      <span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span>,
      <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ prompt }),
      <span class="hljs-attr">headers</span>: { <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span> }
    });
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ”¥ å·²é¢„çƒ­ï¼š<span class="hljs-subst">${prompt}</span>`</span>);
  }

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"âœ… æ¨¡å‹å·²æˆåŠŸçƒ­èº«ï¼"</span>);
}

<span class="hljs-title function_">warmUpModel</span>();
</code></pre>
<blockquote>
<p>ğŸ’¡ <em>å°è´´å£«ï¼šè¿™æ®µä»£ç ç›¸å½“äºæå‰å¸®AIæ‰“äº†ä¸‰ç“¶å’–å•¡ã€‚</em></p>
</blockquote>
<hr/>
<h3 data-id="heading-4">â˜ï¸ 2. æŒ‰éœ€åŠ è½½ + æ¨¡å‹åˆ†å±‚ç¼“å­˜</h3>
<p>åº•å±‚ç­–ç•¥åœ¨è¿™é‡Œæ˜¾å¾—ä¼˜é›…åˆâ€œç‹¡çŒ¾â€ï¼š</p>
<ul>
<li>æŠŠæ¨¡å‹æƒé‡åˆ†å±‚å­˜å‚¨ï¼Œæ¯”å¦‚åªåŠ è½½ç”¨äºå¯åŠ¨çš„æ ¸å¿ƒå±‚ã€‚</li>
<li>å…¶ä½™éƒ¨åˆ†æŒ‰éœ€åŠ è½½ï¼ŒåŠ¨æ€è¡¥é½ã€‚</li>
<li>å¯¹äºå¸¸è§Tokenç»“æœå»ºç«‹<strong>å‘é‡ç¼“å­˜</strong>ï¼Œè®©æ¨¡å‹â€œè®°å¿†â€é«˜é¢‘å›ç­”ã€‚</li>
</ul>
<p>è¿™ç±»ä¼¼äº<strong>æ‡’åŠ è½½+ç¼“å­˜ç»§æ‰¿</strong>çš„ç­–ç•¥ç»„åˆã€‚<br/>
å¦‚æœç¨‹åºæ˜¯èˆå°ï¼Œé‚£ç¼“å­˜å±‚å°±æ˜¯é‚£ä¸ªâ€œæŠ€æœ¯é»‘å¹•â€ï¼Œåœ¨åå°é»˜é»˜æŒ¡ä½å†·é£ã€‚</p>
<hr/>
<h3 data-id="heading-5">ğŸ§ 3. ç°åº¦ + è’™ç‰¹å¡æ´›é‡‡æ ·ï¼ˆç»éªŒæ•°æ®å•¤é…’ç®—æ³•ï¼‰</h3>
<p>æ—©æœŸé˜¶æ®µï¼Œä¸å¦¨ç»™æ¨¡å‹â€œå–‚â€ä¸€äº›ä¸šåŠ¡æ•°æ®é‡‡æ ·ã€‚<br/>
è¿™é‡Œé€šå¸¸é€šè¿‡ç»éªŒåˆ†å¸ƒé‡‡æ ·ç­–ç•¥å®ç°ï¼Œä½¿æ¨¡å‹åœ¨æ¨ç†é˜¶æ®µæœ‰æ›´å¥½çš„åˆå§‹æ”¶æ•›ã€‚</p>
<p>é€šä¿—ç‚¹è¯´ï¼š</p>
<blockquote>
<p>æˆ‘ä»¬è®©æ¨¡å‹åœ¨ä¸Šå²—å‰ï¼Œæå‰å®ä¹ å‡ å¤©ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">ğŸ•¸ï¸ 4. è¾¹ç¼˜èŠ‚ç‚¹ç¼“å­˜ä¸è½»é‡æ¨ç†å¼•æ“</h3>
<p>å¾ˆå¤šäººå¿½ç•¥äº†ç½‘ç»œæ‹“æ‰‘åœ¨å†·å¯åŠ¨ä¸­çš„ä½œç”¨ã€‚<br/>
è‹¥ç”¨æˆ·åœ¨æ—¥æœ¬ï¼Œè€Œä½ çš„æ¨¡å‹æœåŠ¡å™¨åœ¨ç¡…è°·ï¼Œé‚£å»¶è¿Ÿå°±åƒæ‰“è¶Šæ´‹ç”µè¯ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆæ˜¯ <strong>éƒ¨ç½²è¾¹ç¼˜èŠ‚ç‚¹æ¨ç†ä»£ç†</strong>ï¼š</p>
<ul>
<li>å‰ç«¯å°±è¿‘è°ƒç”¨è½»é‡å¼•æ“ï¼ˆMini-Inferenceï¼‰ï¼Œå¤„ç†é€šç”¨è¯·æ±‚ã€‚</li>
<li>å†ç”±ä¸»æ¨¡å‹å¤„ç†å¤æ‚è¯·æ±‚ã€‚</li>
<li>ç”¨æˆ·æ„Ÿå—åˆ°çš„ä¸æ˜¯â€œå†·å¯åŠ¨â€ï¼Œè€Œæ˜¯â€œçƒ­å“åº”â€ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-7">ğŸ§  å››ã€æŠ€æœ¯ä¹‹å¤–ï¼šå†·å¯åŠ¨çš„å“²å­¦ä¸å¹½é»˜</h2>
<p>å†·å¯åŠ¨ï¼Œå½’æ ¹ç»“åº•æ˜¯äººä¸ç³»ç»Ÿä¹‹é—´çš„ä¸€åœºä¿¡ä»»æµ‹è¯•ã€‚<br/>
æœ‰æ—¶å€™ï¼ŒAIä¸æ˜¯ä¸æƒ³å¿«ï¼Œè€Œæ˜¯å¤ªå®³ç¾ã€‚å®ƒè¿˜æ²¡å‡†å¤‡å¥½å±•ç¤ºå®ƒçš„å…¨éƒ¨é­…åŠ›ã€‚</p>
<p>ä»æ“ä½œç³»ç»Ÿåˆ°è¯­è¨€è¿è¡Œæ—¶ï¼Œä»HTTPæ¡æ‰‹åˆ°æ˜¾å­˜è°ƒåº¦ï¼Œæ¯ä¸€æ¬¡å»¶è¿Ÿéƒ½åƒæ˜¯è®¡ç®—æœºä¸–ç•Œæ·±å¤„é‚£ç§â€”â€”</p>
<blockquote>
<p>â€œæˆ‘æ­£åœ¨åŠªåŠ›åŠ è½½çµé­‚ï¼Œè¯·ç¨ç­‰ç‰‡åˆ»ã€‚â€</p>
</blockquote>
<p>ä»è¿™ä¸ªè§’åº¦çœ‹ï¼Œæ¯ä¸€ä¸ªå†·å¯åŠ¨ï¼Œ<br/>
å…¶å®å°±æ˜¯äººå·¥æ™ºèƒ½ä¸–ç•Œçš„<strong>é»æ˜å¾®å…‰</strong>ã€‚ğŸŒ„</p>
<hr/>
<h2 data-id="heading-8">ğŸ§© äº”ã€æœ€åçš„å°ç»“ä¸æ¸©æŸ”æš´è®º</h2>






























<table><thead><tr><th>é˜¶æ®µ</th><th>é—®é¢˜</th><th>å¯¹ç­–</th></tr></thead><tbody><tr><td>æ¨¡å‹åŠ è½½</td><td>åˆå§‹åŒ–æ…¢</td><td>é¢„çƒ­è¯·æ±‚ã€å»¶è¿Ÿç¼“å­˜</td></tr><tr><td>ç½‘ç»œå»¶è¿Ÿ</td><td>é€šä¿¡æ…¢</td><td>è¾¹ç¼˜æ¨ç†ã€Cloudflare Workerä»£ç†</td></tr><tr><td>ä¸šåŠ¡ä¸é€‚é…</td><td>è¾“å‡ºç”Ÿç¡¬</td><td>å‘é‡ç¼“å­˜ã€è’¸é¦è®­ç»ƒ</td></tr><tr><td>ç”¨æˆ·ä½“éªŒå·®</td><td>é¡µé¢å¡é¡¿</td><td>Skeleton UIã€æ¸è¿›æ¸²æŸ“</td></tr></tbody></table>
<blockquote>
<p>ğŸ—£ï¸ <strong>æš´è®ºæ€»ç»“</strong>ï¼š<br/>
çœŸæ­£çš„å†·å¯åŠ¨ä¸æ˜¯æ¨¡å‹å†·ï¼Œæ˜¯æˆ‘ä»¬æ²¡æ•™ä¼šå®ƒæ€ä¹ˆçƒ­ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-9">ğŸ¬ å°¾å£°ï¼šå½“AIå¼€å§‹å‘¼å¸</h2>
<p>å½“ç¬¬ä¸€ä½ç”¨æˆ·é¡ºæ»‘åœ°æ‰«æäºŒç»´ç ã€æµè§ˆé¡µé¢ï¼ŒAIå›åº”æµç•…å¦‚è¯—æ—¶ï¼Œ<br/>
ä½ å¬åˆ°çš„ä¸åªæ˜¯HTTPè¿”å›200ï¼Œè€Œæ˜¯ä¸€å¥è½»å£°çš„é—®å€™ï¼š</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Chromeæµè§ˆå™¨è‡ªå¸¦ç¿»è¯‘çš„è¯¡å¼‚Bugï¼šIDç¿»è¯‘åç«Ÿç„¶å˜åŒ–äº†]]></title>    <link>https://juejin.cn/post/7574978545144856611</link>    <guid>https://juejin.cn/post/7574978545144856611</guid>    <pubDate>2025-11-21T18:09:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574978545144856611" data-draft-id="7574978545144840227" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Chromeæµè§ˆå™¨è‡ªå¸¦ç¿»è¯‘çš„è¯¡å¼‚Bugï¼šIDç¿»è¯‘åç«Ÿç„¶å˜åŒ–äº†"/> <meta itemprop="keywords" content="å‰ç«¯,Chrome"/> <meta itemprop="datePublished" content="2025-11-21T18:09:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©æ¸ºå·¥ä½œå®¤"/> <meta itemprop="url" content="https://juejin.cn/user/1169536102179325"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Chromeæµè§ˆå™¨è‡ªå¸¦ç¿»è¯‘çš„è¯¡å¼‚Bugï¼šIDç¿»è¯‘åç«Ÿç„¶å˜åŒ–äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536102179325/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©æ¸ºå·¥ä½œå®¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-21T18:09:11.000Z" title="Fri Nov 21 2025 18:09:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    12
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å½“å‰è´Ÿè´£çš„é¡¹ç›®ä¸»æ‰“æµ·å¤–ä¸šåŠ¡ï¼Œæ€»å…ä¸äº†å’Œå¤šè¯­è¨€æ‰“äº¤é“ã€‚ä½†æœ€è¿‘æˆ‘åœ¨Vite+Vue3+Element PlusæŠ€æœ¯æ ˆçš„é¡¹ç›®é‡Œï¼Œé‡åˆ°äº†ä¸€ä¸ªå ªç§°â€œç„å­¦â€çš„bugâ€”â€”Chromeæµè§ˆå™¨è‡ªå¸¦ç¿»è¯‘åŠŸèƒ½ï¼Œå±…ç„¶èƒ½æŠŠè¡¨æ ¼é‡Œçš„æ•°å­—IDç›´æ¥æ”¹äº†ï¼ä»å°åº¦åŒäº‹åˆ°å›½å†…è¿è¥ï¼Œä¸¤æ¬¡è§¦å‘éƒ½è®©æˆ‘æ‘¸ä¸ç€å¤´è„‘ï¼Œä»Šå¤©æŠŠæ•´ä¸ªè¿‡ç¨‹è®°å½•ä¸‹æ¥ï¼Œæ±‚å¤§ä½¬ä»¬çœ‹çœ‹è¿™åˆ°åº•æ˜¯æ€ä¹ˆå›äº‹ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä¸¤æ¬¡â€œè¯¡å¼‚æ¼‚ç§»â€ï¼šç¿»è¯‘æŒ‰é’®æˆäº†IDç¯¡æ”¹å™¨</h2>
<p>æˆ‘ä»¬çš„åå°ç®¡ç†ç³»ç»Ÿå¾ˆæ˜ç¡®ï¼šéƒ¨åˆ†é¡µé¢æ ¹å…ƒç´ è®¾ä¸º<code>lang="zh"</code>ï¼ˆä¸­æ–‡ç•Œé¢ï¼‰ï¼Œéƒ¨åˆ†è®¾ä¸º<code>lang="en"</code>ï¼ˆè‹±æ–‡ç•Œé¢ï¼‰ï¼Œè¯­è¨€æ ‡è¯†æ²¡ææ··ä¹Ÿæ²¡é—æ¼ã€‚</p>
<h3 data-id="heading-1">ç¬¬ä¸€æ¬¡ï¼šå°åº¦åŒäº‹çš„è‹±æ–‡ç¿»è¯‘è§¦å‘</h3>
<p>å¹´åˆï¼Œè´Ÿè´£æµ·å¤–ä¸šåŠ¡çš„å°åº¦åŒäº‹åé¦ˆï¼šâ€œæœç´¢å‡ºæ¥çš„å¹¿å‘Šæ•°æ®æœ‰é—®é¢˜ï¼ŒAd IDä»10111872å˜æˆ10111873äº†â€ã€‚æˆ‘ç¬¬ä¸€æ—¶é—´æŸ¥æ¥å£ï¼Œè¿”å›çš„IDæ˜æ˜æ˜¯æ­£ç¡®çš„10111872ï¼›å†çœ‹å‰ç«¯ä»£ç ï¼Œå°±æ˜¯æœ€å¸¸è§„çš„Element Plusè¡¨æ ¼ç”¨æ³•ï¼Œæ²¡æœ‰ä»»ä½•å¤šä½™è®¡ç®—ã€‚</p>
<p>è¿œç¨‹è¿æ¥ä»–çš„ç”µè„‘æ‰å‘ç°ï¼Œä»–æŠŠä¸­æ–‡ç•Œé¢ç”¨Chromeå³é”®ç¿»è¯‘æˆäº†è‹±æ–‡â€”â€”æˆ‘è®©ä»–å…³é—­ç¿»è¯‘åŠŸèƒ½åˆ·æ–°é¡µé¢ï¼ŒIDç¬é—´æ¢å¤10111872ï¼›é‡æ–°å¼€å¯ç¿»è¯‘ï¼Œæ•°å­—åˆè·³æˆ10111873ã€‚å½“æ—¶ä»¥ä¸ºæ˜¯ä¸ªæ¡ˆï¼Œæ²¡æ·±æŸ¥ï¼Œåªæé†’ä»–æš‚æ—¶ä¸ç”¨ç¿»è¯‘ã€‚</p>
<h3 data-id="heading-2">ç¬¬äºŒæ¬¡ï¼šå›½å†…è¿è¥çš„ä¸­æ–‡ç¿»è¯‘è§¦å‘</h3>
<p>å‰å¤©ï¼Œå›½å†…è¿è¥åŒäº‹åœ¨è‹±æ–‡ç•Œé¢æ“ä½œæ—¶ï¼ŒæŠŠé¡µé¢ç¿»è¯‘æˆä¸­æ–‡ï¼Œç»“æœå†å²é‡æ¼”ï¼šè¡¨æ ¼é‡Œçš„ID 20011872ç›´æ¥å˜æˆ20011873ã€‚è¿™æ¬¡æˆ‘ç¡®å®šä¸æ˜¯å¶ç„¶ï¼Œè€Œæ˜¯Chromeç¿»è¯‘å’ŒElement Plusè¡¨æ ¼çš„â€œå…¼å®¹æ€§é™·é˜±â€ã€‚</p>
<p>è´´ä¸€ä¸‹æˆ‘ä»¬çš„æ ¸å¿ƒä»£ç ï¼ŒçœŸçš„å°±æ˜¯æœ€åŸºç¡€çš„<code>el-table</code>é…ç½®ï¼Œæ²¡æœ‰ä»»ä½•èŠ±é‡Œèƒ¡å“¨çš„æ“ä½œï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh"</span>&gt;</span> 
    <span class="hljs-tag">&lt;<span class="hljs-name">el-table</span>
      <span class="hljs-attr">:data</span>=<span class="hljs-string">"orderTableData"</span>
      <span class="hljs-attr">border</span>
      <span class="hljs-attr">stripe</span>
      <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100%"</span>
    &gt;</span>
      <span class="hljs-comment">&lt;!-- æ™®é€šåˆ—ï¼šAd Nameç¿»è¯‘æ­£å¸¸ï¼Œæ— å¼‚å¸¸ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Ad Name"</span>  
        <span class="hljs-attr">prop</span>=<span class="hljs-string">"adName"</span>
        <span class="hljs-attr">width</span>=<span class="hljs-string">"200"</span>
      /&gt;</span>
      
      <span class="hljs-comment">&lt;!-- å¼‚å¸¸åˆ—ï¼šå¼€å¯Chromeç¿»è¯‘åï¼Œè¯¥åˆ—adIdæ•°å€¼ä¼šå‘ç”Ÿæ¼‚ç§»ï¼ˆå¦‚10111872â†’10111873ï¼‰ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Ad ID"</span>  
        <span class="hljs-attr">prop</span>=<span class="hljs-string">"adId"</span>
        <span class="hljs-attr">width</span>=<span class="hljs-string">"200"</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-table</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElTable</span>, <span class="hljs-title class_">ElTableColumn</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>;

<span class="hljs-comment">// æ¨¡æ‹Ÿæ¥å£è¿”å›æ•°æ®ï¼ŒçœŸå®åœºæ™¯ä¸ºæ¥å£æ‹‰å–</span>
<span class="hljs-keyword">const</span> orderTableData = <span class="hljs-title function_">ref</span>([
  { <span class="hljs-attr">adId</span>: <span class="hljs-number">10111872</span>, <span class="hljs-attr">adName</span>: <span class="hljs-string">"Summer Promotion"</span>, <span class="hljs-attr">status</span>: <span class="hljs-string">"å·²ä¸Šçº¿"</span> },
  { <span class="hljs-attr">adId</span>: <span class="hljs-number">10111172</span>, <span class="hljs-attr">adName</span>: <span class="hljs-string">"New Product Launch"</span>, <span class="hljs-attr">status</span>: <span class="hljs-string">"å¾…å®¡æ ¸"</span> },
  { <span class="hljs-attr">adId</span>: <span class="hljs-number">10111272</span>, <span class="hljs-attr">adName</span>: <span class="hljs-string">"Member Exclusive"</span>, <span class="hljs-attr">status</span>: <span class="hljs-string">"å·²ä¸‹çº¿"</span> }
]);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 data-id="heading-3">äºŒã€æ’æŸ¥è¿‡ç¨‹ï¼šç»•äº†ä¸€åœˆï¼Œæ’é™¤æ‰€æœ‰å¸¸è§„å¯èƒ½</h2>
<p>ä¸ºäº†æ‰¾åˆ°é—®é¢˜æ ¹æºï¼Œæˆ‘å‡ ä¹æŠŠèƒ½æ’æŸ¥çš„ç‚¹éƒ½è¿‡äº†ä¸€éï¼Œä½†ç»“æœå…¨æ˜¯â€œæ­£å¸¸â€ï¼š</p>
<ol>
<li><strong>æ¥å£ä¸æ•°æ®å±‚é¢</strong>ï¼šNetworké¢æ¿åå¤ç¡®è®¤ï¼Œæ¥å£è¿”å›çš„adIdæ˜¯æ­£ç¡®å€¼ï¼Œæ²¡æœ‰è¢«ç¯¡æ”¹ï¼›å‰ç«¯æ¥æ”¶æ•°æ®åä¹Ÿæ²¡æœ‰åšä»»ä½•è¿ç®—ï¼Œç›´æ¥èµ‹å€¼ç»™è¡¨æ ¼æ•°æ®æºã€‚</li>
<li><strong>æœ¬åœ°ä¸å¤šè®¾å¤‡æµ‹è¯•</strong>ï¼šæˆ‘æ¢äº†è‡ªå·±çš„Windowsã€MacBookï¼Œåˆæ‰¾äº†5ä¸ªåŒäº‹ç”¨ä¸åŒç³»ç»Ÿï¼ˆWindows10/11ã€macOSï¼‰æµ‹è¯•ï¼Œæ— è®ºæ€ä¹ˆå¼€ç¿»è¯‘ï¼ŒIDéƒ½çº¹ä¸ä¸åŠ¨ã€‚</li>
<li><strong>æµè§ˆå™¨ç¯å¢ƒæ’æŸ¥</strong>ï¼šè¿œç¨‹æ£€æŸ¥è§¦å‘å¼‚å¸¸çš„ä¸¤å°ç”µè„‘ï¼ŒChromeéƒ½æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œæ²¡æœ‰å®‰è£…ä»»ä½•å¯ç–‘æ’ä»¶ï¼Œæ¸…é™¤ç¼“å­˜ã€é‡å¯æµè§ˆå™¨åï¼Œé—®é¢˜ä¾ç„¶å­˜åœ¨ã€‚</li>
<li><strong>ä»£ç ä¸ä¾èµ–æ£€æŸ¥</strong>ï¼šElement Plusç‰ˆæœ¬æ˜¯ç¨³å®šç‰ˆï¼Œæ²¡æœ‰å…¼å®¹æ€§é—®é¢˜ï¼›è¡¨æ ¼æ²¡æœ‰è‡ªå®šä¹‰æ¸²æŸ“å‡½æ•°ï¼Œä¹Ÿæ²¡æœ‰ä½¿ç”¨ä»»ä½•ä¿®æ”¹DOMçš„æŒ‡ä»¤æˆ–æ’ä»¶ã€‚</li>
</ol>
<p>æ’æŸ¥åˆ°æœ€åï¼Œæˆ‘ç”šè‡³æ€€ç–‘æ˜¯ä¸æ˜¯â€œé‡å­çº ç¼ â€â€”â€”ç›´åˆ°å‘ç°ä¸¤æ¬¡å¼‚å¸¸éƒ½æœ‰ä¸€ä¸ªå…±åŒè§¦å‘æ¡ä»¶ï¼š<strong>Chromeæµè§ˆå™¨å¼€å¯é¡µé¢ç¿»è¯‘</strong>ã€‚</p>
<h2 data-id="heading-4">ä¸‰ã€è§£å†³æ–¹æ¡ˆï¼šç»™IDåŠ â€œç¿»è¯‘è±å…æƒâ€</h2>
<p>æ—¢ç„¶ç¡®å®šæ˜¯ç¿»è¯‘åŠŸèƒ½æçš„é¬¼ï¼Œå°±é¡ºç€è¿™ä¸ªæ–¹å‘æ‰¾è§£å†³æ–¹æ¡ˆã€‚æŸ¥HTMLæ ‡å‡†å‘ç°ï¼ŒHTML5åŸç”Ÿæœ‰ä¸ª<code>translate</code>å±æ€§ï¼Œä¸“é—¨æ§åˆ¶å…ƒç´ æ˜¯å¦å‚ä¸ç¿»è¯‘â€”â€”ç»™å…ƒç´ åŠ <code>translate="no"</code>ï¼Œæµè§ˆå™¨å°±ä¼šè·³è¿‡è¯¥å…ƒç´ çš„ç¿»è¯‘å¤„ç†ã€‚</p>
<p>é’ˆå¯¹è¡¨æ ¼IDåˆ—åšäº†ä¿®æ”¹ï¼Œæ ¸å¿ƒæ˜¯ç»™IDæ‰€åœ¨çš„å…ƒç´ æ·»åŠ è¿™ä¸ªå±æ€§ï¼Œä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- ä¿®å¤åçš„IDåˆ—ä»£ç ï¼Œå…¶ä»–åˆ—ä¸å˜ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"Ad ID"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"200"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">default</span>=<span class="hljs-string">"scope"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å…³é”®ä¿®å¤ï¼šæ·»åŠ translate="no"ï¼Œç¦æ­¢Chromeç¿»è¯‘è¯¥èŠ‚ç‚¹ï¼Œé¿å…IDæ•°å€¼è¢«ç¯¡æ”¹ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ad-id"</span> <span class="hljs-attr">translate</span>=<span class="hljs-string">"no"</span>&gt;</span>{{ scope.row.adId }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span>
</code></pre>
<p>æŠŠä¿®æ”¹åçš„ä»£ç å‘ç»™å‡ºé—®é¢˜çš„åŒäº‹ï¼Œä»–ä»¬å¼€å¯ç¿»è¯‘å†æµ‹è¯•â€”â€”IDç¨³ç¨³åœ°æ˜¾ç¤ºæ­£ç¡®å€¼ï¼Œå†ä¹Ÿæ²¡æœ‰å‡ºç°â€œæ¼‚ç§»â€ã€‚è¿™ä¸ªä¸´æ—¶æ–¹æ¡ˆè™½ç„¶è§£å†³äº†é—®é¢˜ï¼Œä½†æˆ‘çš„ç–‘æƒ‘æ›´é‡äº†ã€‚</p>
<h2 data-id="heading-5">å››ã€ç–‘æƒ‘ï¼šè¿™åˆ°åº•æ˜¯Chromeçš„bugï¼Œè¿˜æ˜¯æˆ‘æ¼äº†ä»€ä¹ˆï¼Ÿ</h2>
<p>è™½ç„¶é—®é¢˜è§£å†³äº†ï¼Œä½†å‡ ä¸ªç–‘é—®å§‹ç»ˆè¦ç»•åœ¨æˆ‘å¿ƒå¤´ï¼Œæƒ³å€Ÿè¿™ç¯‡æ–‡ç« é—®é—®å„ä½å¤§ä½¬ï¼š</p>
<ol>
<li>ä¸ºä»€ä¹ˆåªæœ‰ç‰¹å®šè®¾å¤‡è§¦å‘è¿™ä¸ªé—®é¢˜ï¼ŸåŒæ ·çš„Chromeç‰ˆæœ¬ã€åŒæ ·çš„æ“ä½œï¼Œå¤§éƒ¨åˆ†è®¾å¤‡æ­£å¸¸ï¼Œè€Œè§¦å‘çš„åŒäº‹ç”µè„‘ä¸Šè®¾å¤‡å¿…ç°ï¼Œéš¾é“å’Œæµè§ˆå™¨çš„æŸäº›éšè—é…ç½®æœ‰å…³ï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆIDç¯¡æ”¹æœ‰å›ºå®šè§„å¾‹ï¼Ÿä¸¤æ¬¡å¼‚å¸¸éƒ½æ˜¯IDæœ«å°¾+1ï¼Œä¸æ˜¯éšæœºä¹±æ”¹ï¼Œè¿™èƒŒåæœ‰æ²¡æœ‰ç‰¹å®šçš„DOMå¤„ç†é€»è¾‘ï¼Ÿ</li>
<li>è¿™æ˜¯Chromeç¿»è¯‘çš„bugï¼Œè¿˜æ˜¯Element Plusè¡¨æ ¼çš„DOMç»“æ„å®¹æ˜“è¢«ç¿»è¯‘å™¨è¯¯åˆ¤ï¼Ÿæœ‰æ²¡æœ‰æ›´æ ¹æœ¬çš„è§£å†³åŠæ³•ï¼Œè€Œä¸æ˜¯ç»™æ¯ä¸ªå…³é”®èŠ‚ç‚¹åŠ è±å…ï¼Ÿ</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[VSCodeæ’ä»¶: è‡ªåŠ¨ä¸´æ—¶åˆ†é…Themeä»¥åŒºåˆ†ä¸åŒçª—å£]]></title>    <link>https://juejin.cn/post/7575022279567540265</link>    <guid>https://juejin.cn/post/7575022279567540265</guid>    <pubDate>2025-11-21T16:56:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575022279567540265" data-draft-id="7575050949958664228" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="VSCodeæ’ä»¶: è‡ªåŠ¨ä¸´æ—¶åˆ†é…Themeä»¥åŒºåˆ†ä¸åŒçª—å£"/> <meta itemprop="keywords" content="å‰ç«¯,Visual Studio Code,TypeScript"/> <meta itemprop="datePublished" content="2025-11-21T16:56:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ´—æ¾¡æ°´åŠ å†°"/> <meta itemprop="url" content="https://juejin.cn/user/191729824978955"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            VSCodeæ’ä»¶: è‡ªåŠ¨ä¸´æ—¶åˆ†é…Themeä»¥åŒºåˆ†ä¸åŒçª—å£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/191729824978955/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ´—æ¾¡æ°´åŠ å†°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-21T16:56:09.000Z" title="Fri Nov 21 2025 16:56:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">VSCodeæ’ä»¶ï¼šè‡ªåŠ¨ä¸´æ—¶åˆ†é…Themeæˆ–è€…çŠ¶æ€æ ä»¥åŒºåˆ†ä¸åŒçª—å£</h2>
<p>æ—¥å¸¸å¼€å‘ä¸­ç»å¸¸åŒæ—¶æ‰“å¼€å¤šä¸ªé¡¹ç›®ï¼Œå¤šä¸ªVS Codeçª—å£å †åœ¨ä»»åŠ¡æ ï¼Œæ¯æ¬¡åˆ‡æ¢éƒ½è¦ä¸€ä¸ªä¸ªç‚¹å¼€çœ‹çœ‹åˆ°åº•æ˜¯å“ªä¸ªé¡¹ç›®ã€‚å°¤å…¶æ˜¯åœ¨åˆ©ç”¨AIå†™é¡¹ç›®æ—¶ï¼Œå¤šä¸ªçª—å£ç®¡ç†åŒä¸€ä¸ªç¨‹åºçš„å¤šä¸ªç‰ˆæœ¬å®ç°ï¼ŒåŒååŒä¸»é¢˜å°±å®¹æ˜“å†™ä¹±äº†ã€‚</p>
<p>æƒ³ç€èƒ½ä¸èƒ½æ‰¾åˆ°ä¸€ä¸ªåŠæ³•æ¥å¸®åŠ©æˆ‘åŒºåˆ†ä¸åŒçš„çª—å£ä¸ä¸åŒçš„é¡¹ç›®ï¼Œåœ¨æˆ‘æ‰“å¼€å¤šä¸ªçª—å£çš„æ—¶å€™ï¼Œèƒ½å¤Ÿè‡ªåŠ¨åˆ†é…çŠ¶æ€å¸®æˆ‘åŒºåˆ†ã€‚æ„Ÿè§‰å¯ä»¥é€šè¿‡VSCodeæ’ä»¶æ¥åšåˆ°è¿™ä¸ªåŠŸèƒ½ï¼Œäºæ˜¯è¯ç”Ÿäº†<code>Auto Themer</code>è¿™ä¸ªé¡¹ç›®ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmarketplace.visualstudio.com%2Fitems%3FitemName%3Dseanz-hahaha.auto-themer" target="_blank" title="https://marketplace.visualstudio.com/items?itemName=seanz-hahaha.auto-themer" ref="nofollow noopener noreferrer">marketplace.visualstudio.com/items?itemNâ€¦</a></p>
<h3 data-id="heading-1">Auto Themeræ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>ç®€å•æ¥è¯´ï¼Œè¿™å°±æ˜¯ä¸€ä¸ª<strong>è‡ªåŠ¨ç»™ä¸åŒVS Codeçª—å£åˆ†é…ä¸åŒè§†è§‰æ ‡è¯†</strong>çš„æ’ä»¶ï¼Œæ£€æŸ¥åˆ°å¤šä¸ªçª—å£å¹¶ä¸”ä¸»é¢˜ç›¸åŒæ—¶ï¼Œé‡‡ç”¨ä¸åŒçš„ç­–ç•¥æ¥è¾…åŠ©åŒºåˆ†çª—å£ã€‚å®ƒæœ‰ä¸¤ç§å·¥ä½œæ¨¡å¼ï¼š</p>
<h4 data-id="heading-2">æ¨¡å¼ä¸€ï¼šä¸»é¢˜åŒºåˆ†æ³•</h4>
<p>ç»™æ¯ä¸ªçª—å£è‡ªåŠ¨åˆ†é…ä¸åŒçš„é…è‰²ä¸»é¢˜ï¼Œä¸€çœ¼å°±èƒ½çœ‹å‡ºåŒºåˆ«ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cf41bf78a3945c3b00a2d64b8271e70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSX5r6h5rC05Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764348969&amp;x-signature=jlP1DEJwCKdkPH0Q5Dw%2BiMkj%2Frc%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>å½“å‰çª—å£æ‰“å¼€é¡¹ç›®Aç”¨é»˜è®¤ä¸»é¢˜ï¼Œå†æ–°å¼€ä»¥çª—å£çš„é¡¹ç›®Bæ—¶ä¸»é¢˜å†²çªï¼Œä¼šè‡ªåŠ¨æ›´æ¢åˆ«çš„ä¸»é¢˜</li>
<li>å¯ä»¥è‡ªå·±é€‰æ‹©ä¸»é¢˜ï¼Œä¹Ÿå¯ä»¥éšæœºåˆ†é…ä¸»é¢˜</li>
<li>æ”¯æŒé€šè¿‡å·¥ä½œåŒºè·¯å¾„å°†ä¸»é¢˜æŒä¹…åŒ–ï¼Œä¸‹æ¬¡æ‰“å¼€é¡¹ç›®ä¼šè‡ªåŠ¨åˆ‡æ¢</li>
<li>å…³é—­çª—å£æˆ–è€…åˆ‡æ¢å·¥ä½œåŒºæ—¶ï¼Œè®¾ç½®çš„ä¸»é¢˜çŠ¶æ€ä¼šè¢«é‡ç½®â€”â€”æ„å‘³ç€åŒä¸€ä¸ªé¡¹ç›®æ¯ä¸€æ¬¡æ‰“å¼€å¯èƒ½éƒ½æ˜¯ä¸åŒçš„ä¸»é¢˜é…ç½®</li>
</ul>
<h4 data-id="heading-3">æ¨¡å¼äºŒï¼šçŠ¶æ€æ é­”æ³•</h4>
<p>æœ‰çš„äººä¸å–œæ¬¢æ›´æ”¹Themeï¼Œæ’ä»¶æä¾›ç¬¬äºŒç§æ–¹å¼ï¼šä¿®æ”¹åº•éƒ¨çŠ¶æ€æ ã€‚ä¼šç»™æ¯ä¸ªçª—å£çš„åº•éƒ¨çŠ¶æ€æ è®¾ç½®ä¸åŒçš„é¢œè‰²å’Œæ–‡å­—æ ‡ç­¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b9cbf606e26436d9ef499c93c25343b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSX5r6h5rC05Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764348969&amp;x-signature=rNNp1CMlw0nUBnc9H5cdumlDHyE%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>å½“å‰çª—å£æ‰“å¼€é¡¹ç›®Aç”¨é»˜è®¤ä¸»é¢˜ï¼Œå†æ–°å¼€ä»¥çª—å£çš„é¡¹ç›®Bæ—¶ä¸»é¢˜å†²çªï¼Œä¼šè‡ªåŠ¨ä¿®æ”¹çª—å£Bçš„åº•éƒ¨çŠ¶æ€æ ä¸æ–‡å­—æ ‡ç­¾</li>
<li>å¯ä»¥è‡ªå·±é€‰æ‹©åº•éƒ¨çŠ¶æ€æ çš„é¢œè‰²ï¼Œä¹Ÿå¯ä»¥ç‚¹å‡»è‡ªåŠ¨åˆ†é…ä¸‹ä¸€ä¸ªé¢œè‰²</li>
<li>æ”¯æŒé€šè¿‡å·¥ä½œåŒºè·¯å¾„å°†çŠ¶æ€æ çš„æ–‡å­—æ ‡ç­¾æŒä¹…åŒ–ï¼Œä¸‹æ¬¡æ‰“å¼€é¡¹ç›®ä¼šè‡ªåŠ¨åˆ‡æ¢ã€‚æ¯”å¦‚ ç”Ÿäº§ç¯å¢ƒé¡¹ç›® â†’ "PROD"æ ‡ç­¾</li>
<li>å…³é—­çª—å£æˆ–è€…åˆ‡æ¢å·¥ä½œåŒºæ—¶ï¼Œè®¾ç½®çš„åº•éƒ¨çŠ¶æ€æ ä¼šè¢«é‡ç½®â€”â€”æ„å‘³ç€åŒä¸€ä¸ªé¡¹ç›®æ¯ä¸€æ¬¡æ‰“å¼€å¯èƒ½éƒ½æ˜¯ä¸åŒçš„åº•éƒ¨çŠ¶æ€æ é…ç½®</li>
</ul>
<h3 data-id="heading-4">æ€ä¹ˆä½¿ç”¨ï¼Ÿ</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmarketplace.visualstudio.com%2Fitems%3FitemName%3Dseanz-hahaha.auto-themer" target="_blank" title="https://marketplace.visualstudio.com/items?itemName=seanz-hahaha.auto-themer" ref="nofollow noopener noreferrer">marketplace.visualstudio.com/items?itemNâ€¦</a> ä¸‹è½½æ’ä»¶å¹¶å®‰è£…ã€‚</p>
<ul>
<li>è¿›å…¥æ’ä»¶è®¾ç½®ï¼Œé…ç½®<code>autoThemer.windowsThreshold</code>ï¼Œæ‰“å¼€çš„çª—å£æ•°è¶…è¿‡è¯¥é˜ˆå€¼æ—¶æ‰ä¼šè‡ªåŠ¨åˆ†é…ä¸»é¢˜ã€‚</li>
<li>é…ç½® <code>autoThemer.conflictResolution</code> ,é€‰æ‹©<code>theme</code>æˆ–<code>statusBar</code>ï¼Œåˆ†åˆ«è¡¨ç¤ºé€šè¿‡ä¸»é¢˜æˆ–åº•éƒ¨çŠ¶æ€æ åŒºåˆ†çª—å£ã€‚</li>
<li>å…¶ä»–æ“ä½œå¯ä»¥é€šè¿‡ä¾§è¾¹æ çš„æ’ä»¶é¢æ¿è®¾ç½®ï¼Œå¦‚åˆ‡æ¢ä¸»é¢˜ã€åˆ‡æ¢çŠ¶æ€æ é¢œè‰²ã€æŒä¹…åŒ–å½“å‰å·¥ä½œåŒºçš„ä¸»é¢˜æ˜ å°„ã€æŒä¹…åŒ–åº•éƒ¨çŠ¶æ€æ æ ‡ç­¾æ˜ å°„ã€‚</li>
<li>æ–°çª—å£æ‰“å¼€å·¥ä½œåŒºåï¼Œè‡ªåŠ¨æ£€æµ‹å¹¶åˆ†é…ä¸»é¢˜æˆ–è€…çŠ¶æ€æ åˆ°<code>.vscode/settings.json</code>ï¼›åˆ‡æ¢å·¥ä½œåŒºæˆ–è€…å…³é—­çª—å£æ—¶ï¼Œä¼šè‡ªåŠ¨é‡ç½®.vscode/settings.jsonçš„colorThemeã€‚</li>
</ul>
<h4 data-id="heading-5">æ’ä»¶é¢æ¿åŠŸèƒ½è¯´æ˜</h4>
<ul>
<li>select theme: é€‰æ‹©å½“å‰çª—å£çš„ä¸»é¢˜</li>
<li>random theme: éšæœºä¸ºå½“å‰çª—å£åˆ†é…ä¸»é¢˜</li>
<li>reassign theme: é‡æ–°åˆ†é…å½“å‰çª—å£çš„ä¸»é¢˜</li>
<li>persist theme: æŒä¹…åŒ–å½“å‰çª—å£çš„ä¸»é¢˜æ˜ å°„</li>
<li>show mappings: æŸ¥çœ‹å·¥ä½œåŒºä¸ä¸»é¢˜çš„æ˜ å°„å…³ç³»</li>
<li>pick status bar scheme: é€‰æ‹©å½“å‰çª—å£çš„åº•éƒ¨çŠ¶æ€æ é¢œè‰²é…ç½®(ä»…å†…ç½®)</li>
<li>persist status bar: æŒä¹…åŒ–å½“å‰çª—å£çš„åº•éƒ¨çŠ¶æ€æ æ ‡ç­¾æ˜ å°„</li>
</ul>
<h4 data-id="heading-6">é…ç½®</h4>
<p>åœ¨ VSCode è®¾ç½®ä¸­é…ç½®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"autoThemer.enabled"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"autoThemer.conflictResolution"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"autoThemer.windowsThreshold"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"autoThemer.builtinThemes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"autoThemer.themeMappingsText"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/my/pro-dev: Kimbie Dark; /easy/hc: Kimbie Dark"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"autoThemer.statusBarMappingsText"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/my/pro-dev: è‡ªå®šä¹‰æ ‡ç­¾; /easy/hc: è‡ªå®šä¹‰é¡¹ç›®"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¯´æ˜ï¼š
<code>themeMappingsText</code> ä½¿ç”¨åˆ†å·åˆ†éš”çš„ <code>è·¯å¾„: ä¸»é¢˜</code> æ–‡æœ¬ï¼Œæ’ä»¶åœ¨å†…å­˜ä¸­è§£æå¹¶ä½¿ç”¨è¯¥æ˜ å°„ã€‚
<code>statusBarMappingsText</code> ä½¿ç”¨åˆ†å·åˆ†éš”çš„ <code>è·¯å¾„: æ ‡ç­¾</code> æ–‡æœ¬ï¼Œæ’ä»¶åœ¨å†…å­˜ä¸­è§£æå¹¶ä½¿ç”¨è¯¥æ˜ å°„ã€‚</p>
<hr/>
<p>æ¥ä¸‹æ¥èŠèŠå®ç°åŸç†ã€‚</p>
<h3 data-id="heading-7">å®ç°åŸç†</h3>
<p>æ’ä»¶ä¼šåœ¨VS Codeçš„å…¨å±€å­˜å‚¨ä¸­ç»´æŠ¤ä¸€ä¸ªåŸºäºç£ç›˜æ–‡ä»¶çš„çª—å£å®ä¾‹åè°ƒç³»ç»Ÿï¼Œæ‰€æœ‰çª—å£é€šè¿‡è¿™ä¸ªæœºåˆ¶æ¥"åå•†"è°ç”¨ä»€ä¹ˆä¸»é¢˜/é¢œè‰²ã€‚å½“æ£€æµ‹åˆ°å¤šçª—å£åœºæ™¯æ—¶ï¼Œå®ƒä¼šï¼š</p>
<ol>
<li>æ‰«æå½“å‰æ´»åŠ¨çª—å£</li>
<li>æ£€æŸ¥æ˜¯å¦æœ‰æŒä¹…åŒ–æ˜ å°„é…ç½®</li>
<li>ç»™æ²¡æœ‰æ˜ å°„çš„çª—å£åˆ†é…å”¯ä¸€æ ‡è¯†</li>
<li>å®šæœŸæ£€æµ‹å†²çªå¹¶å¤„ç†</li>
<li>çª—å£å…³é—­æ—¶è‡ªåŠ¨æ¸…ç†é…ç½®</li>
</ol>
<p>å…·ä½“å®ç°ä¸Šï¼Œå®ƒé€šè¿‡ä¿®æ”¹å·¥ä½œåŒºçš„<code>.vscode/settings.json</code>æ¥åº”ç”¨ä¸»é¢˜æˆ–é¢œè‰²é…ç½®ï¼Œå…³é—­çª—å£æ—¶ä¼šè‡ªåŠ¨é‡ç½®ï¼Œä¸ä¼šå½±å“é¡¹ç›®çš„åŸå§‹é…ç½®ã€‚</p>
<h3 data-id="heading-8">æ€»ç»“</h3>
<p><code>Auto Themer</code> ä¸ºäº†è§£å†³ä¸€ä¸ªçœ‹ä¼¼ç®€å•ä½†ç¡®å®å¾ˆå½±å“æ•ˆç‡çš„é—®é¢˜â€”â€”åŒºåˆ†å¤šä¸ªé¡¹ç›®çª—å£ï¼Œæ”¯æŒé€šè¿‡ThemeåŒºåˆ†æˆ–è€…é€šè¿‡StatusBaråŒºåˆ†ï¼Œå¯ä»¥è‡ªåŠ¨åˆ‡æ¢é…è‰²ä»¥ä¾¿åŒºåˆ†ï¼Œå¹¶å¼ºè°ƒä¸´æ—¶çŠ¶æ€ç®¡ç†ä¸çŠ¶æ€é‡ç½®ï¼Œä¹Ÿæ”¯æŒçŠ¶æ€æŒä¹…åŒ–ã€‚</p>
<p>é€šè¿‡ç®€å•çš„é…ç½®å°±å¯ä»¥å¯åŠ¨åŠŸèƒ½ï¼Œæ¬¢è¿ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥æPRã€‚(â€”â€” ä¸€ä¸ªä¸æ€ä¹ˆå†™å‰ç«¯çš„å¼€å‘è€…:)</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‡†å¤‡æ‰‹å†™Simple Raftï¼ˆäºŒï¼‰: è·‘é€šæœ€åŸºæœ¬çš„Leaderé€‰ä¸¾]]></title>    <link>https://juejin.cn/post/7574978545144938531</link>    <guid>https://juejin.cn/post/7574978545144938531</guid>    <pubDate>2025-11-22T00:49:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574978545144938531" data-draft-id="7574992086715826191" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‡†å¤‡æ‰‹å†™Simple Raftï¼ˆäºŒï¼‰: è·‘é€šæœ€åŸºæœ¬çš„Leaderé€‰ä¸¾"/> <meta itemprop="keywords" content="åç«¯,Raft"/> <meta itemprop="datePublished" content="2025-11-22T00:49:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‡†å¤‡æ‰‹å†™Simple Raftï¼ˆäºŒï¼‰: è·‘é€šæœ€åŸºæœ¬çš„Leaderé€‰ä¸¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T00:49:26.000Z" title="Sat Nov 22 2025 00:49:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    21
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä½œè€…èƒŒæ™¯ï¼š20å¹´ITä¸€çº¿å¼€å‘ç»éªŒï¼Œ15å¹´æ¶æ„å¸ˆç»éªŒã€‚æ“…é•¿åˆ†å¸ƒå¼ã€å¾®æœåŠ¡ã€æœç´¢å¼•æ“ï¼Œæ‰‹å†™è¿‡å„ç±»ä¸­é—´ä»¶ã€‚æ›¾å¯¹Jacocoã€å¤œèºç­‰è¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œè´Ÿè´£è¿‡200å¤šä¸ªèŠ‚ç‚¹çš„å¤§è§„æ¨¡é›†ç¾¤ï¼Œæ¶‰åŠK8sã€å¾®æœåŠ¡ç›‘æ§ã€å¤šä¸ªä¸­é—´ä»¶çš„è¿ç»´ã€‚è‡ªç ”è¿‡åŠ è§£å¯†ä¸­é—´ä»¶ï¼Œç°æœåŠ¡äºä¸€å®¶é‡‘èå…¬å¸ï¼Œæ‹…ä»»æ¶æ„å¸ˆã€‚</p>
</blockquote>
<p><strong>å®Œæ•´ä»£ç å·²å¼€æºï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fsh_wangwanbao%2Fsimple-raft" target="_blank" title="https://gitee.com/sh_wangwanbao/simple-raft" ref="nofollow noopener noreferrer">gitee.com/sh_wangwanbâ€¦</a>   æœ¬ç« ä»£ç åˆ†æ”¯ï¼šch2</p>
<hr/>
<p>ä¸Šä¸€ç¯‡è®²äº†Raftçš„æ ¸å¿ƒæ€æƒ³ï¼Œè¿™ç¯‡å¼€å§‹å†™ä»£ç ã€‚</p>
<p>ä»ç†è®ºåˆ°å®ç°æ˜¯æœ€éš¾è·¨è¶Šçš„é¸¿æ²Ÿã€‚Nacosçš„JRaftæœ‰5ä¸‡è¡Œä»£ç ï¼Œç›´æ¥çœ‹ä¼šå¾ˆå›°æƒ‘ã€‚</p>
<p>æ‰€ä»¥è¿™æ¬¡æˆ‘å†³å®šè‡ªå·±åŠ¨æ‰‹å†™ä¸€ä¸ªæœ€ç®€åŒ–çš„Raftï¼Œä»æœ€åŸºç¡€çš„é€‰ä¸¾å¼€å§‹ã€‚ä¸æ±‚å®Œç¾ï¼Œå…ˆè·‘é€šå†è¯´ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€MVPçš„è¾¹ç•Œï¼šåªåšé€‰ä¸¾</h2>
<p>å®ç°å®Œæ•´çš„Raftå®¹æ˜“åŠé€”è€ŒåºŸï¼Œæ›´å¥½çš„æ–¹å¼æ˜¯ä»æœ€åŸºç¡€çš„é€‰ä¸¾å¼€å§‹ã€‚</p>
<p><strong>è¿™æ¬¡æˆ‘ä»¬åªåšè¿™ä¸‰ä»¶äº‹ï¼š</strong></p>
<ol>
<li>é€‰ä¸¾å‡ºä¸€ä¸ªLeader</li>
<li>Leaderå®šæ—¶å‘å¿ƒè·³ç»´æŒåœ°ä½</li>
<li>æŒä¹…åŒ–termå’ŒvotedFor</li>
</ol>
<p><strong>æš‚æ—¶ä¸åšï¼š</strong></p>
<ul>
<li>æ—¥å¿—å¤åˆ¶ï¼ˆä¸‹ä¸€ç¯‡å†æï¼‰</li>
<li>å¿«ç…§</li>
<li>é…ç½®å˜æ›´</li>
<li>ReadIndex</li>
</ul>
<p>ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºé€‰ä¸¾æ˜¯åœ°åŸºï¼Œå¿…é¡»å…ˆæ‰“ç‰¢ã€‚æ—¥å¿—å¤åˆ¶æ˜¯80%çš„å·¥ä½œé‡ï¼Œæ”¾åé¢æ…¢æ…¢å•ƒã€‚</p>
<h2 data-id="heading-1">äºŒã€æ¶æ„è®¾è®¡ï¼šèƒ½ç®€å•å°±ä¸å¤æ‚</h2>
<p>æŠ€æœ¯é€‰å‹ä¸Šé€‰æ‹©äº†æœ€ç®€å•çš„æ–¹æ¡ˆï¼šç”¨HTTPè€Œä¸æ˜¯gRPCï¼Œå› ä¸ºHTTPå¤Ÿç”¨ï¼Œå‡ºé—®é¢˜è¿˜èƒ½ç”¨curlè°ƒè¯•ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">simple-raft/
â”œâ”€â”€ surfing-raft-core      <span class="hljs-comment"># æ ¸å¿ƒç®—æ³•ï¼ˆçº¯Javaï¼‰</span>
â”‚   â”œâ”€â”€ RaftNode           <span class="hljs-comment"># çŠ¶æ€æœºæ ¸å¿ƒ</span>
â”‚   â”œâ”€â”€ rpc/               <span class="hljs-comment"># RPCæ¶ˆæ¯å®šä¹‰</span>
â”‚   â””â”€â”€ storage/           <span class="hljs-comment"># æŒä¹…åŒ–</span>
â””â”€â”€ surfing-raft-node      <span class="hljs-comment"># èŠ‚ç‚¹æœåŠ¡ï¼ˆSpring Bootï¼‰</span>
    â”œâ”€â”€ RaftService        <span class="hljs-comment"># å®šæ—¶è°ƒåº¦</span>
    â”œâ”€â”€ RaftController     <span class="hljs-comment"># HTTPæ¥å£</span>
    â””â”€â”€ RaftRpcClient      <span class="hljs-comment"># HTTPå®¢æˆ·ç«¯</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆåˆ†ä¸¤å±‚ï¼Ÿ</strong></p>
<ul>
<li>coreå±‚ï¼šçº¯ç®—æ³•é€»è¾‘ï¼Œä¸ä¾èµ–æ¡†æ¶ï¼Œæ–¹ä¾¿å•å…ƒæµ‹è¯•</li>
<li>nodeå±‚ï¼šå¤„ç†å®šæ—¶ä»»åŠ¡ã€HTTPé€šä¿¡è¿™äº›å·¥ç¨‹é—®é¢˜</li>
</ul>
<p>ç®—æ³•å’Œå·¥ç¨‹åˆ†ç¦»çš„å¥½å¤„æ˜¯ï¼šæ ¸å¿ƒé€»è¾‘ä¸ä¼šè¢«æ¡†æ¶çš„æ³¨è§£æå¾—ä¸€å›¢ç³Ÿã€‚</p>
<p><strong>æ¨¡å—è°ƒç”¨å…³ç³»ï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "surfing-raft-nodeï¼ˆå·¥ç¨‹å±‚ï¼‰"
        Controller[RaftController&lt;br/&gt;REST API]
        Service[RaftService&lt;br/&gt;å®šæ—¶è°ƒåº¦+RPCç¼–æ’]
        Client[RaftRpcClient&lt;br/&gt;HTTPå®¢æˆ·ç«¯]
    end
    
    subgraph "surfing-raft-coreï¼ˆç®—æ³•å±‚ï¼‰"
        Node[RaftNode&lt;br/&gt;æ ¸å¿ƒçŠ¶æ€æœº]
        Storage[FileStatePersistence&lt;br/&gt;æŒä¹…åŒ–]
        RPC[RPCæ¶ˆæ¯&lt;br/&gt;Request/Response]
    end
    
    Controller --&gt;|è½¬å‘RPC| Service
    Service --&gt;|è°ƒç”¨ç®—æ³•| Node
    Service --&gt;|å‘é€RPC| Client
    Client --&gt;|HTTP POST| Controller
    Node --&gt;|è¯»å†™| Storage
    Service --&gt;|æ„é€ æ¶ˆæ¯| RPC
    
    style Node fill:#ffe6e6
    style Storage fill:#e6f3ff
    style Service fill:#e6ffe6
</code></pre>
<p><strong>æ•°æ®æµç¤ºä¾‹ï¼ˆæ”¶åˆ°æŠ•ç¥¨è¯·æ±‚ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Peer as å…¶ä»–èŠ‚ç‚¹
    participant Controller as RaftController
    participant Service as RaftService
    participant Node as RaftNode
    participant Storage as FileStatePersistence
    
    Peer-&gt;&gt;Controller: POST /raft/vote&lt;br/&gt;RequestVoteRequest
    Controller-&gt;&gt;Service: handleRequestVote(request)
    Service-&gt;&gt;Node: handleRequestVote(request)
    
    rect rgb(255, 240, 240)
    Note over Node: åŠ é”å¤„ç†
    Node-&gt;&gt;Node: æ£€æŸ¥term
    Node-&gt;&gt;Node: å†³å®šæ˜¯å¦æŠ•ç¥¨
    alt åŒæ„æŠ•ç¥¨
        Node-&gt;&gt;Storage: save(term, votedFor)
        Storage--&gt;&gt;Node: æŒä¹…åŒ–æˆåŠŸ
        Node-&gt;&gt;Node: resetElectionTimeout()
    end
    end
    
    Node--&gt;&gt;Service: RequestVoteResponse
    Service--&gt;&gt;Controller: RequestVoteResponse
    Controller--&gt;&gt;Peer: HTTP 200&lt;br/&gt;è¿”å›å“åº”
</code></pre>
<h2 data-id="heading-2">ä¸‰ã€æ ¸å¿ƒé€»è¾‘ï¼šå°‘å³æ˜¯å¤š</h2>
<h3 data-id="heading-3">3.1 æŒä¹…åŒ–ï¼šåªå­˜ä¸¤ä¸ªå­—æ®µ</h3>
<p>Raftè®ºæ–‡æ˜ç¡®è¯´äº†ï¼Œå¿…é¡»æŒä¹…åŒ–çš„åªæœ‰ä¸¤ä¸ªï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PersistentState</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> currentTerm;   <span class="hljs-comment">// å½“å‰ä»»æœŸ</span>
    <span class="hljs-keyword">private</span> String votedFor;    <span class="hljs-comment">// æŠ•ç»™è°äº†</span>
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆä¸å­˜stateï¼ˆLEADER/FOLLOWERï¼‰ï¼Ÿ</strong></p>
<p>é‡å¯åé»˜è®¤éƒ½æ˜¯Followerï¼Œé€šè¿‡å¿ƒè·³æˆ–é€‰ä¸¾è‡ªç„¶å°±æ¢å¤äº†ã€‚èƒ½ä¸å­˜å°±ä¸å­˜ï¼Œè¿™æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„åŸºæœ¬åŸåˆ™ã€‚</p>
<p>æŒä¹…åŒ–çŠ¶æ€è¶Šå¤šï¼Œç³»ç»Ÿå‡çº§æ—¶çš„å…¼å®¹æ€§é—®é¢˜å°±è¶Šå¤æ‚ã€‚</p>
<h3 data-id="heading-4">3.2 åŸå­æ€§å†™å…¥ï¼šä¿è¯æ•°æ®å®Œæ•´</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">(PersistentState state)</span> {
    <span class="hljs-comment">// å…ˆå†™ä¸´æ—¶æ–‡ä»¶</span>
    <span class="hljs-type">File</span> <span class="hljs-variable">tempFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(stateFilePath + <span class="hljs-string">".tmp"</span>);
    objectMapper.writeValue(tempFile, state);
    
    <span class="hljs-comment">// åŸå­æ€§é‡å‘½å</span>
    Files.move(tempFile.toPath(), <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(stateFilePath).toPath(), 
        StandardCopyOption.ATOMIC_MOVE);
}
</code></pre>
<p>è¿™ç§"å†™ä¸´æ—¶æ–‡ä»¶+åŸå­é‡å‘½å"çš„æ¨¡å¼åœ¨å¾ˆå¤šå­˜å‚¨ç³»ç»Ÿä¸­éƒ½æœ‰ä½¿ç”¨ï¼Œæ¯”å¦‚PostgreSQLçš„WALæœºåˆ¶ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆè¦è¿™æ ·åšï¼Ÿ</strong></p>
<p>å…ˆå†™ä¸´æ—¶æ–‡ä»¶ï¼ŒæˆåŠŸåå†åŸå­æ€§é‡å‘½åã€‚è¿™æ ·å³ä½¿å†™å…¥è¿‡ç¨‹ä¸­å®•æœºï¼Œè¦ä¹ˆæ–°æ–‡ä»¶æˆåŠŸï¼Œè¦ä¹ˆæ—§æ–‡ä»¶è¿˜åœ¨ï¼Œä¸ä¼šå‡ºç°æ–‡ä»¶æŸåçš„æƒ…å†µã€‚</p>
<h3 data-id="heading-5">3.3 é€‰ä¸¾é€»è¾‘ï¼štermæ˜¯æ ¸å¿ƒ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">becomeCandidate</span><span class="hljs-params">()</span> {
    lock.lock();
    <span class="hljs-keyword">try</span> {
        state = CANDIDATE;
        currentTerm++;              <span class="hljs-comment">// å…³é”®ï¼šä»»æœŸé€’å¢</span>
        votedFor = nodeId;          <span class="hljs-comment">// æŠ•ç»™è‡ªå·±</span>
        votesReceived = <span class="hljs-number">1</span>;          <span class="hljs-comment">// è‡ªå·±ç®—ä¸€ç¥¨</span>
        
        savePersistentState();      <span class="hljs-comment">// ç«‹å³æŒä¹…åŒ–ï¼</span>
        resetElectionTimeout();
    } <span class="hljs-keyword">finally</span> {
        lock.unlock();
    }
}
</code></pre>
<p>è¿™é‡Œæœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼š</p>
<p><strong>æ³¨æ„1ï¼štermå¿…é¡»å…ˆé€’å¢å†å‘æŠ•ç¥¨è¯·æ±‚</strong>
å¦‚æœå‘å®Œè¯·æ±‚æ‰é€’å¢termï¼Œå…¶ä»–èŠ‚ç‚¹ä¼šå› ä¸ºtermè¿‡æ—§è€Œæ‹’ç»æŠ•ç¥¨ã€‚</p>
<p><strong>æ³¨æ„2ï¼šæŠ•ç¥¨åå¿…é¡»ç«‹å³æŒä¹…åŒ–</strong>
å¦‚æœä¸æŒä¹…åŒ–å°±é‡å¯ï¼ŒèŠ‚ç‚¹å¯èƒ½å¿˜è®°å·²æŠ•ç¥¨ï¼Œåœ¨åŒä¸€termæŠ•å¤šæ¬¡ç¥¨ï¼Œå¯¼è‡´ä¸¤ä¸ªLeaderã€‚è¿™æ˜¯Raftå®‰å…¨æ€§çš„æ ¹åŸºã€‚</p>
<p><strong>æ³¨æ„3ï¼švotesReceivedè¦åŒ…å«è‡ªå·±</strong>
å€™é€‰äººè‡ªå·±ä¹Ÿç®—ä¸€ç¥¨ã€‚å¦‚æœå¿˜è®°è¿™ç‚¹ï¼Œ3èŠ‚ç‚¹é›†ç¾¤ä¼šéœ€è¦3ç¥¨æ‰èƒ½å½“é€‰ï¼Œæ°¸è¿œé€‰ä¸å‡ºLeaderã€‚</p>
<h3 data-id="heading-6">3.4 æŠ•ç¥¨è§„åˆ™ï¼šåŒä¸€ä»»æœŸåªæŠ•ä¸€æ¬¡</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> RequestVoteResponse <span class="hljs-title function_">handleRequestVote</span><span class="hljs-params">(RequestVoteRequest request)</span> {
    lock.lock();
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// æ‹’ç»è¿‡æœŸè¯·æ±‚</span>
        <span class="hljs-keyword">if</span> (request.getTerm() &lt; currentTerm) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestVoteResponse</span>(currentTerm, <span class="hljs-literal">false</span>);
        }
        
        <span class="hljs-comment">// å‘ç°æ›´é«˜termï¼Œç«‹å³é™çº§</span>
        <span class="hljs-keyword">if</span> (request.getTerm() &gt; currentTerm) {
            becomeFollower(request.getTerm());
        }
        
        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å·²æŠ•ç¥¨</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">canVote</span> <span class="hljs-operator">=</span> (votedFor == <span class="hljs-literal">null</span> || 
                          votedFor.equals(request.getCandidateId()));
        
        <span class="hljs-keyword">if</span> (canVote) {
            votedFor = request.getCandidateId();
            savePersistentState();    <span class="hljs-comment">// åˆæ˜¯ç«‹å³æŒä¹…åŒ–</span>
            resetElectionTimeout();
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestVoteResponse</span>(currentTerm, <span class="hljs-literal">true</span>);
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestVoteResponse</span>(currentTerm, <span class="hljs-literal">false</span>);
    } <span class="hljs-keyword">finally</span> {
        lock.unlock();
    }
}
</code></pre>
<p>è¿™é‡Œä½“ç°äº†Raftçš„ç²¾é«“ï¼š<strong>termæ˜¯é€»è¾‘æ—¶é’Ÿ</strong>ã€‚</p>
<p>ä»»ä½•æ—¶å€™æ”¶åˆ°æ›´é«˜çš„termï¼Œä¸ç®¡ä½ æ˜¯Leaderè¿˜æ˜¯Candidateï¼Œç«‹å³è®¤æ€‚å˜Followerã€‚è¿™ä¿è¯äº†é›†ç¾¤åœ¨æœ€é«˜termä¸‹åªæœ‰ä¸€ä¸ªåˆæ³•Leaderã€‚</p>
<h3 data-id="heading-7">3.5 å¿ƒè·³æœºåˆ¶ï¼šLeaderçš„ç”Ÿå‘½çº¿</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendHeartbeats</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">if</span> (raftNode.getState() != NodeState.LEADER) {
        <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// åªæœ‰Leaderå‘å¿ƒè·³</span>
    }
    
    <span class="hljs-type">AppendEntriesRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AppendEntriesRequest</span>(
        raftNode.getCurrentTerm(),
        raftNode.getNodeId(),
        <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>  <span class="hljs-comment">// æš‚æ—¶æ²¡æœ‰æ—¥å¿—ï¼Œè¿™äº›å­—æ®µéƒ½æ˜¯0</span>
    );
    
    <span class="hljs-comment">// å¹¶è¡Œå‘é€ç»™æ‰€æœ‰Peer</span>
    <span class="hljs-keyword">for</span> (String peer : raftNode.getPeers()) {
        executor.submit(() -&gt; {
            <span class="hljs-type">AppendEntriesResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> rpcClient.appendEntries(peer, request);
            <span class="hljs-keyword">if</span> (response != <span class="hljs-literal">null</span> &amp;&amp; response.getTerm() &gt; raftNode.getCurrentTerm()) {
                <span class="hljs-comment">// å‘ç°æ›´é«˜termï¼ŒLeaderé™çº§</span>
                raftNode.becomeFollower(response.getTerm());
            }
        });
    }
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆå¿ƒè·³é—´éš”æ˜¯50msï¼Ÿ</strong></p>
<p>é€‰ä¸¾è¶…æ—¶æ˜¯150-300msï¼Œå¿ƒè·³é—´éš”åº”è¯¥è¿œå°äºå®ƒï¼Œä¸€èˆ¬æ˜¯1/3ã€‚è¿™æ ·å³ä½¿å¶å°”ä¸¢åŒ…ï¼Œä¹Ÿä¸ä¼šè§¦å‘é€‰ä¸¾ã€‚</p>
<p>å¦‚æœå¿ƒè·³é—´éš”è®¾ç½®å¾—è¿‡é•¿ï¼ˆæ¯”å¦‚100mså¿ƒè·³é…120msè¶…æ—¶ï¼‰ï¼Œç½‘ç»œç¨æœ‰æŠ–åŠ¨å°±ä¼šé¢‘ç¹é€‰ä¸¾ï¼Œé›†ç¾¤éš¾ä»¥ç¨³å®šã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆå¹¶è¡Œå‘é€ï¼Ÿ</strong></p>
<p>ä¸²è¡Œå‘é€çš„è¯ï¼Œ3ä¸ªèŠ‚ç‚¹å°±è¦150msï¼ˆ50ms * 3ï¼‰ï¼Œæ—©å°±è¶…æ—¶äº†ã€‚å¹¶è¡Œå‘é€èƒ½ä¿è¯å¿ƒè·³åŠæ—¶é€è¾¾ã€‚</p>
<p><strong>æ³¨æ„ï¼šä¸è¦ç”¨CompletableFuture.allOf()ç­‰å¾…æ‰€æœ‰å“åº”ã€‚</strong> ä¸€ä¸ªèŠ‚ç‚¹æ…¢äº†ï¼Œæ•´ä¸ªå¿ƒè·³å°±æ…¢äº†ã€‚æ­£ç¡®åšæ³•æ˜¯å‘å®Œå°±å®Œäº‹ï¼Œå“åº”å¼‚æ­¥å¤„ç†ã€‚</p>
<h3 data-id="heading-8">3.6 å®Œæ•´çš„é€‰ä¸¾æµç¨‹</h3>
<p>ç”¨æ—¶åºå›¾çœ‹å¾—æ›´æ¸…æ¥šï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant N1 as Node-1&lt;br/&gt;(Follower)
    participant N2 as Node-2&lt;br/&gt;(Follower)
    participant N3 as Node-3&lt;br/&gt;(Follower)
    
    Note over N1,N3: æ‰€æœ‰èŠ‚ç‚¹å¯åŠ¨ï¼Œåˆå§‹çŠ¶æ€éƒ½æ˜¯Follower&lt;br/&gt;term=0, votedFor=null
    
    Note over N1: é€‰ä¸¾è¶…æ—¶(200ms)&lt;br/&gt;æ²¡æ”¶åˆ°å¿ƒè·³
    
    rect rgb(255, 240, 240)
    Note over N1: å¼€å§‹é€‰ä¸¾
    N1-&gt;&gt;N1: becomeCandidate()&lt;br/&gt;term: 0â†’1&lt;br/&gt;votedFor: node-1&lt;br/&gt;votes: 1
    N1-&gt;&gt;N1: æŒä¹…åŒ–(term=1, votedFor=node-1)
    end
    
    par å¹¶å‘å‘é€æŠ•ç¥¨è¯·æ±‚
        N1-&gt;&gt;N2: RequestVote&lt;br/&gt;{term:1, candidateId:node-1}
        N1-&gt;&gt;N3: RequestVote&lt;br/&gt;{term:1, candidateId:node-1}
    end
    
    rect rgb(240, 255, 240)
    Note over N2: å¤„ç†æŠ•ç¥¨è¯·æ±‚
    N2-&gt;&gt;N2: term: 0â†’1&lt;br/&gt;votedFor: node-1
    N2-&gt;&gt;N2: æŒä¹…åŒ–(term=1, votedFor=node-1)
    N2-&gt;&gt;N2: é‡ç½®é€‰ä¸¾è¶…æ—¶
    N2--&gt;&gt;N1: VoteGranted: true
    end
    
    rect rgb(240, 255, 240)
    Note over N3: å¤„ç†æŠ•ç¥¨è¯·æ±‚
    N3-&gt;&gt;N3: term: 0â†’1&lt;br/&gt;votedFor: node-1
    N3-&gt;&gt;N3: æŒä¹…åŒ–(term=1, votedFor=node-1)
    N3-&gt;&gt;N3: é‡ç½®é€‰ä¸¾è¶…æ—¶
    N3--&gt;&gt;N1: VoteGranted: true
    end
    
    rect rgb(240, 240, 255)
    Note over N1: æ”¶åˆ°å¤šæ•°æ´¾æŠ•ç¥¨
    N1-&gt;&gt;N1: votes: 3/3 &gt;= 2&lt;br/&gt;becomeLeader()
    Note over N1: æˆä¸ºLeader
    end
    
    loop æ¯50mså‘é€å¿ƒè·³
        N1-&gt;&gt;N2: AppendEntries&lt;br/&gt;{term:1, leaderId:node-1}
        N1-&gt;&gt;N3: AppendEntries&lt;br/&gt;{term:1, leaderId:node-1}
        N2--&gt;&gt;N1: Success: true
        N3--&gt;&gt;N1: Success: true
    end
    
    Note over N1,N3: é›†ç¾¤ç¨³å®š&lt;br/&gt;Node-1æ˜¯Leader, term=1
</code></pre>
<p><strong>å…³é”®æ—¶åˆ»ï¼š</strong></p>
<ol>
<li><strong>0-200ms</strong>: æ‰€æœ‰èŠ‚ç‚¹ç­‰å¾…ï¼ŒNode-1å…ˆè¶…æ—¶</li>
<li><strong>200ms</strong>: Node-1å‘èµ·é€‰ä¸¾ï¼Œtermå˜æˆ1</li>
<li><strong>200-250ms</strong>: æŠ•ç¥¨è¯·æ±‚åœ¨ç½‘ç»œä¸­ä¼ è¾“ï¼ˆå‡è®¾å»¶è¿Ÿ50msï¼‰</li>
<li><strong>250ms</strong>: Node-2å’ŒNode-3æ”¶åˆ°è¯·æ±‚ï¼ŒæŠ•ç¥¨ç»™Node-1</li>
<li><strong>250-300ms</strong>: æŠ•ç¥¨å“åº”è¿”å›</li>
<li><strong>300ms</strong>: Node-1æ”¶åˆ°å¤šæ•°ç¥¨ï¼Œæˆä¸ºLeader</li>
<li><strong>300mså</strong>: Leaderæ¯50mså‘ä¸€æ¬¡å¿ƒè·³</li>
</ol>
<h3 data-id="heading-9">3.7 Leaderå¤±è”åçš„é‡æ–°é€‰ä¸¾</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant L as Node-1&lt;br/&gt;(Leader)
    participant F1 as Node-2&lt;br/&gt;(Follower)
    participant F2 as Node-3&lt;br/&gt;(Follower)
    
    Note over L,F2: ç¨³å®šçŠ¶æ€: Node-1æ˜¯Leader, term=1
    
    loop Leaderæ­£å¸¸å‘é€å¿ƒè·³
        L-&gt;&gt;F1: AppendEntries{term:1}
        L-&gt;&gt;F2: AppendEntries{term:1}
        F1--&gt;&gt;L: Success
        F2--&gt;&gt;L: Success
    end
    
    rect rgb(255, 200, 200)
    Note over L: Leaderå®•æœº/ç½‘ç»œæ–­å¼€
    end
    
    Note over F1,F2: Followersç­‰å¾…å¿ƒè·³...&lt;br/&gt;é€‰ä¸¾è¶…æ—¶å¼€å§‹è®¡æ—¶
    
    Note over F1: é€‰ä¸¾è¶…æ—¶(250ms)
    
    rect rgb(255, 240, 240)
    F1-&gt;&gt;F1: becomeCandidate()&lt;br/&gt;term: 1â†’2&lt;br/&gt;votedFor: node-2&lt;br/&gt;votes: 1
    F1-&gt;&gt;F1: æŒä¹…åŒ–(term=2, votedFor=node-2)
    end
    
    F1-&gt;&gt;F2: RequestVote&lt;br/&gt;{term:2, candidateId:node-2}
    
    rect rgb(240, 255, 240)
    F2-&gt;&gt;F2: term: 1â†’2&lt;br/&gt;votedFor: node-2
    F2-&gt;&gt;F2: æŒä¹…åŒ–(term=2, votedFor=node-2)
    F2--&gt;&gt;F1: VoteGranted: true
    end
    
    rect rgb(240, 240, 255)
    F1-&gt;&gt;F1: votes: 2/2 &gt;= 2&lt;br/&gt;becomeLeader()
    Note over F1: Node-2æˆä¸ºæ–°Leader
    end
    
    loop æ–°Leaderå‘é€å¿ƒè·³
        F1-&gt;&gt;F2: AppendEntries{term:2, leaderId:node-2}
        F2--&gt;&gt;F1: Success: true
    end
    
    Note over F1,F2: é›†ç¾¤æ¢å¤&lt;br/&gt;Node-2æ˜¯Leader, term=2

    opt Leaderæ¢å¤å
        L-&gt;&gt;F1: AppendEntries{term:1}
        rect rgb(255, 240, 240)
        Note over F1: å‘ç°æ—§term
        F1--&gt;&gt;L: {term:2, success:false}
        end
        rect rgb(255, 200, 200)
        Note over L: æ”¶åˆ°æ›´é«˜term
        L-&gt;&gt;L: becomeFollower(2)&lt;br/&gt;state: LEADERâ†’FOLLOWER&lt;br/&gt;æŒä¹…åŒ–
        end
    end
</code></pre>
<p><strong>è¿™ä¸ªæµç¨‹ä½“ç°äº†Raftçš„ä¸¤ä¸ªå…³é”®ç‰¹æ€§ï¼š</strong></p>
<ol>
<li><strong>ä»»æœŸå•è°ƒé€’å¢</strong>ï¼šæ–°Leaderçš„term=2 &gt; æ—§Leaderçš„term=1</li>
<li><strong>æ—§Leaderè‡ªåŠ¨é™çº§</strong>ï¼šæ”¶åˆ°æ›´é«˜termåï¼Œç«‹å³å˜æˆFollower</li>
</ol>
<h3 data-id="heading-10">3.8 èŠ‚ç‚¹çŠ¶æ€è½¬æ¢è§„åˆ™</h3>
<p>RaftèŠ‚ç‚¹æœ‰3ä¸ªçŠ¶æ€ï¼šFollowerã€Candidateã€Leaderã€‚çŠ¶æ€è½¬æ¢çš„è§¦å‘æ¡ä»¶å¦‚ä¸‹ï¼š</p>

































































<table><thead><tr><th>å½“å‰çŠ¶æ€</th><th>è§¦å‘æ¡ä»¶</th><th>è½¬æ¢åˆ°</th><th>æ‰§è¡ŒåŠ¨ä½œ</th></tr></thead><tbody><tr><td><strong>Follower</strong></td><td>é€‰ä¸¾è¶…æ—¶ï¼Œæœªæ”¶åˆ°å¿ƒè·³</td><td>Candidate</td><td>term++ï¼ŒæŠ•ç¥¨ç»™è‡ªå·±ï¼ŒæŒä¹…åŒ–</td></tr><tr><td><strong>Follower</strong></td><td>æ”¶åˆ°åˆæ³•Leaderå¿ƒè·³</td><td>Follower</td><td>é‡ç½®é€‰ä¸¾è¶…æ—¶</td></tr><tr><td><strong>Follower</strong></td><td>æ”¶åˆ°æ›´é«˜term</td><td>Follower</td><td>æ›´æ–°termï¼ŒæŒä¹…åŒ–</td></tr><tr><td><strong>Candidate</strong></td><td>è·å¾—å¤šæ•°ç¥¨</td><td>Leader</td><td>å¼€å§‹å‘é€å¿ƒè·³</td></tr><tr><td><strong>Candidate</strong></td><td>é€‰ä¸¾è¶…æ—¶ï¼Œæœªè·å¾—å¤šæ•°ç¥¨</td><td>Candidate</td><td>term++ï¼Œå‘èµ·æ–°ä¸€è½®é€‰ä¸¾</td></tr><tr><td><strong>Candidate</strong></td><td>æ”¶åˆ°æ›´é«˜term</td><td>Follower</td><td>æ›´æ–°termï¼ŒæŒä¹…åŒ–</td></tr><tr><td><strong>Candidate</strong></td><td>æ”¶åˆ°åˆæ³•Leaderå¿ƒè·³</td><td>Follower</td><td>æ›´æ–°termï¼Œé‡ç½®é€‰ä¸¾è¶…æ—¶</td></tr><tr><td><strong>Leader</strong></td><td>æ”¶åˆ°æ›´é«˜term</td><td>Follower</td><td>ç«‹å³é™çº§ï¼Œæ›´æ–°termï¼ŒæŒä¹…åŒ–</td></tr><tr><td><strong>Leader</strong></td><td>æ­£å¸¸è¿è¡Œ</td><td>Leader</td><td>å®šæ—¶å‘é€å¿ƒè·³ç»´æŒåœ°ä½</td></tr></tbody></table>
<p><strong>å…³é”®è§„åˆ™ï¼š</strong></p>
<ul>
<li>ä»»ä½•çŠ¶æ€æ”¶åˆ°æ›´é«˜termï¼Œéƒ½è¦æ›´æ–°termå¹¶è½¬ä¸ºFollower</li>
<li>Followerå’ŒCandidateæ”¶åˆ°åˆæ³•Leaderå¿ƒè·³ï¼Œç«‹å³è½¬ä¸ºFollowerå¹¶é‡ç½®é€‰ä¸¾è¶…æ—¶</li>
<li>Candidateè·å¾—å¤šæ•°ç¥¨(åŒ…æ‹¬è‡ªå·±)ï¼Œç«‹å³è½¬ä¸ºLeader</li>
<li>Leaderåªæœ‰åœ¨æ”¶åˆ°æ›´é«˜termæ—¶æ‰ä¼šé™çº§</li>
</ul>
<h2 data-id="heading-11">å››ã€è¿è¡Œæ•ˆæœï¼šçœ¼è§ä¸ºå®</h2>
<p>Talk is cheap, show me the code. ä¸ï¼Œshow me the running cluster!</p>
<h3 data-id="heading-12">4.1 å¯åŠ¨é›†ç¾¤</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> simple-raft
./start-cluster.sh
</code></pre>
<p>è¿™ä¸ªè„šæœ¬ä¼šï¼š</p>
<ol>
<li>æ¸…ç†æ—§æ•°æ®ï¼ˆ<code>/tmp/raft-data</code>ï¼‰</li>
<li>ç¼–è¯‘é¡¹ç›®ï¼ˆMavenï¼‰</li>
<li>åå°å¯åŠ¨3ä¸ªèŠ‚ç‚¹</li>
</ol>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">æ¸…ç†æ—§æ•°æ®...</span>
<span class="hljs-string">ç¼–è¯‘é¡¹ç›®...</span>
[<span class="hljs-string">INFO</span>] <span class="hljs-string">BUILD</span> <span class="hljs-string">SUCCESS</span>
<span class="hljs-string">å¯åŠ¨èŠ‚ç‚¹</span> <span class="hljs-number">1</span><span class="hljs-string">...</span>
<span class="hljs-string">èŠ‚ç‚¹</span> <span class="hljs-attr">1 PID:</span> <span class="hljs-number">55160</span>
<span class="hljs-string">å¯åŠ¨èŠ‚ç‚¹</span> <span class="hljs-number">2</span><span class="hljs-string">...</span>
<span class="hljs-string">èŠ‚ç‚¹</span> <span class="hljs-attr">2 PID:</span> <span class="hljs-number">55166</span>
<span class="hljs-string">å¯åŠ¨èŠ‚ç‚¹</span> <span class="hljs-number">3</span><span class="hljs-string">...</span>
<span class="hljs-string">èŠ‚ç‚¹</span> <span class="hljs-attr">3 PID:</span> <span class="hljs-number">55170</span>

<span class="hljs-string">ä¸‰ä¸ªèŠ‚ç‚¹å·²å¯åŠ¨ï¼š</span>
  <span class="hljs-string">èŠ‚ç‚¹</span> <span class="hljs-attr">1:</span> <span class="hljs-string">http://localhost:8081</span> <span class="hljs-string">(PID:</span> <span class="hljs-number">55160</span><span class="hljs-string">)</span>
  <span class="hljs-string">èŠ‚ç‚¹</span> <span class="hljs-attr">2:</span> <span class="hljs-string">http://localhost:8082</span> <span class="hljs-string">(PID:</span> <span class="hljs-number">55166</span><span class="hljs-string">)</span>
  <span class="hljs-string">èŠ‚ç‚¹</span> <span class="hljs-attr">3:</span> <span class="hljs-string">http://localhost:8083</span> <span class="hljs-string">(PID:</span> <span class="hljs-number">55170</span><span class="hljs-string">)</span>
</code></pre>
<p><strong>å¯åŠ¨åçš„å†…éƒ¨æµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Spring as Spring Boot
    participant Service as RaftService
    participant Node as RaftNode
    participant Storage as FileStatePersistence
    
    Spring-&gt;&gt;Service: @PostConstruct&lt;br/&gt;start()
    Service-&gt;&gt;Storage: åˆ›å»ºæŒä¹…åŒ–
    Service-&gt;&gt;Node: åˆ›å»ºRaftNode
    Node-&gt;&gt;Storage: loadPersistentState()
    
    alt é¦–æ¬¡å¯åŠ¨(æ–‡ä»¶ä¸å­˜åœ¨)
        Storage--&gt;&gt;Node: {term:0, votedFor:null}
        Note over Node: åˆå§‹åŒ–ä¸ºFollower&lt;br/&gt;term=0, votedFor=null
    else é‡å¯(æ–‡ä»¶å­˜åœ¨)
        Storage--&gt;&gt;Node: {term:5, votedFor:node-2}
        Note over Node: æ¢å¤ä¸ºFollower&lt;br/&gt;term=5, votedFor=node-2
    end
    
    Node-&gt;&gt;Node: ç”Ÿæˆéšæœºé€‰ä¸¾è¶…æ—¶&lt;br/&gt;150-300ms
    
    Service-&gt;&gt;Service: å¯åŠ¨å®šæ—¶ä»»åŠ¡
    
    rect rgb(240, 255, 240)
    Note over Service: å®šæ—¶ä»»åŠ¡1: é€‰ä¸¾è¶…æ—¶æ£€æŸ¥(50ms)
    loop æ¯50msæ‰§è¡Œ
        Service-&gt;&gt;Node: æ£€æŸ¥æ˜¯å¦è¶…æ—¶
        alt è¶…æ—¶ä¸”æœªæ”¶åˆ°å¿ƒè·³
            Service-&gt;&gt;Service: startElection()
        end
    end
    end
    
    rect rgb(240, 240, 255)
    Note over Service: å®šæ—¶ä»»åŠ¡2: å¿ƒè·³å‘é€(50ms)
    loop æ¯50msæ‰§è¡Œ
        alt å½“å‰æ˜¯Leader
            Service-&gt;&gt;Service: sendHeartbeats()
        end
    end
    end
    
    Note over Spring,Storage: èŠ‚ç‚¹å¯åŠ¨å®Œæˆï¼Œè¿›å…¥è¿è¡ŒçŠ¶æ€
</code></pre>
<p><strong>3ä¸ªèŠ‚ç‚¹çš„é…ç½®å·®å¼‚ï¼š</strong></p>



































<table><thead><tr><th>é…ç½®é¡¹</th><th>Node-1</th><th>Node-2</th><th>Node-3</th></tr></thead><tbody><tr><td>server.port</td><td>8081</td><td>8082</td><td>8083</td></tr><tr><td>raft.node-id</td><td>node-1</td><td>node-2</td><td>node-3</td></tr><tr><td>raft.peers</td><td>localhost:8082,<br/>localhost:8083</td><td>localhost:8081,<br/>localhost:8083</td><td>localhost:8081,<br/>localhost:8082</td></tr><tr><td>raft.storage-dir</td><td>/tmp/raft-data/<br/>node-1</td><td>/tmp/raft-data/<br/>node-2</td><td>/tmp/raft-data/<br/>node-3</td></tr></tbody></table>
<p><strong>æŒä¹…åŒ–æ–‡ä»¶ï¼š</strong></p>
<ul>
<li>Node-1: <code>/tmp/raft-data/node-1/node-1-state.json</code></li>
<li>Node-2: <code>/tmp/raft-data/node-2/node-2-state.json</code></li>
<li>Node-3: <code>/tmp/raft-data/node-3/node-3-state.json</code></li>
</ul>
<p>æ–‡ä»¶å†…å®¹ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"currentTerm"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"votedFor"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node-1"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-13">4.2 æŸ¥çœ‹çŠ¶æ€</h3>
<pre><code class="hljs language-bash" lang="bash">curl http://localhost:8081/raft/status | jq
</code></pre>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"nodeId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node-1"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"state"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"LEADER"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"currentTerm"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"leaderId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node-1"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<pre><code class="hljs language-bash" lang="bash">curl http://localhost:8082/raft/status | jq
</code></pre>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"nodeId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node-2"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"state"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"FOLLOWER"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"currentTerm"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"leaderId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node-1"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>çœ‹åˆ°æ²¡ï¼Ÿnode-1æ˜¯Leaderï¼Œå…¶ä»–ä¸¤ä¸ªæ˜¯Followerã€‚é›†ç¾¤ç¨³å®šäº†ã€‚</p>
<h3 data-id="heading-14">4.3 æµ‹è¯•Leaderå¤±è”</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ€æ‰Leader</span>
<span class="hljs-built_in">kill</span> 55160

<span class="hljs-comment"># ç­‰2ç§’ï¼Œè®©é€‰ä¸¾å®Œæˆ</span>
<span class="hljs-built_in">sleep</span> 2

<span class="hljs-comment"># æŸ¥çœ‹æ–°çŠ¶æ€</span>
curl http://localhost:8082/raft/status | jq
</code></pre>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"nodeId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node-2"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"state"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"LEADER"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"currentTerm"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"leaderId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node-2"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>node-2æˆä¸ºæ–°Leaderäº†ï¼Œtermä»1å˜æˆ2ã€‚è¿™å°±æ˜¯Raftçš„å®¹é”™èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-15">4.4 è§‚å¯Ÿæ—¥å¿—ï¼šé€‰ä¸¾çš„å®Œæ•´è¿‡ç¨‹</h3>
<p>æˆ‘åœ¨ä»£ç é‡ŒåŠ äº†è¯¦ç»†çš„æ—¥å¿—ï¼Œä½ å¯ä»¥å®æ—¶çœ‹åˆ°é€‰ä¸¾è¿‡ç¨‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">tail</span> -f /tmp/raft-node-1.<span class="hljs-built_in">log</span>
</code></pre>
<p><strong>å®Œæ•´çš„æ—¥å¿—è¾“å‡ºï¼ˆå¸¦æ—¶é—´æˆ³å’Œè§£è¯»ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">2024-11-18 22:49:23.156 <span class="hljs-section">[main]</span> INFO  RaftNode - Node node-1 initialized as FOLLOWER
2024-11-18 22:49:23.158 <span class="hljs-section">[main]</span> INFO  FileStatePersistence - No persistent state file found, initializing with defaults
2024-11-18 22:49:23.159 <span class="hljs-section">[main]</span> INFO  RaftNode - Loaded persistent state: <span class="hljs-attr">term</span>=<span class="hljs-number">0</span>, votedFor=null
2024-11-18 22:49:23.162 <span class="hljs-section">[main]</span> INFO  RaftService - RaftService started for node node-1
</code></pre>
<p><strong>â†‘ èŠ‚ç‚¹å¯åŠ¨ï¼Œåˆå§‹åŒ–ä¸ºFollowerï¼Œterm=0</strong></p>
<hr/>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">2024-11-18 22:49:23.450</span> [<span class="hljs-string">pool-2-thread-1</span>] <span class="hljs-string">INFO</span>  <span class="hljs-string">RaftNode</span> <span class="hljs-bullet">-</span> <span class="hljs-string">Election</span> <span class="hljs-string">timeout</span> <span class="hljs-string">reached,</span> <span class="hljs-attr">current state:</span> <span class="hljs-string">FOLLOWER</span>
<span class="hljs-number">2024-11-18 22:49:23.451</span> [<span class="hljs-string">pool-2-thread-1</span>] <span class="hljs-attr">INFO  RaftNode - State changed:</span> <span class="hljs-string">FOLLOWER</span> <span class="hljs-string">-&gt;</span> <span class="hljs-string">CANDIDATE,</span> <span class="hljs-attr">term:</span> <span class="hljs-number">0</span> <span class="hljs-string">-&gt;</span> <span class="hljs-number">1</span>
<span class="hljs-number">2024-11-18 22:49:23.452</span> [<span class="hljs-string">pool-2-thread-1</span>] <span class="hljs-attr">INFO  FileStatePersistence - Saved persistent state:</span> <span class="hljs-string">term=1,</span> <span class="hljs-string">votedFor=node-1</span>
</code></pre>
<p><strong>â†‘ é€‰ä¸¾è¶…æ—¶(~300ms)ï¼Œè½¬ä¸ºCandidateï¼Œtermå˜æˆ1ï¼ŒæŠ•ç¥¨ç»™è‡ªå·±å¹¶æŒä¹…åŒ–</strong></p>
<hr/>
<pre><code class="hljs language-vbscript" lang="vbscript"><span class="hljs-number">2024</span><span class="hljs-number">-11</span><span class="hljs-number">-18</span> <span class="hljs-number">22</span>:<span class="hljs-number">49</span>:<span class="hljs-number">23.453</span> [pool<span class="hljs-number">-2</span>-thread<span class="hljs-number">-1</span>] INFO  RaftService - Starting election <span class="hljs-keyword">for</span> term <span class="hljs-number">1</span>
<span class="hljs-number">2024</span><span class="hljs-number">-11</span><span class="hljs-number">-18</span> <span class="hljs-number">22</span>:<span class="hljs-number">49</span>:<span class="hljs-number">23.454</span> [pool<span class="hljs-number">-3</span>-thread<span class="hljs-number">-1</span>] INFO  RaftService - Sending vote <span class="hljs-built_in">request</span> <span class="hljs-keyword">to</span> localhost:<span class="hljs-number">8082</span>
<span class="hljs-number">2024</span><span class="hljs-number">-11</span><span class="hljs-number">-18</span> <span class="hljs-number">22</span>:<span class="hljs-number">49</span>:<span class="hljs-number">23.454</span> [pool<span class="hljs-number">-3</span>-thread<span class="hljs-number">-2</span>] INFO  RaftService - Sending vote <span class="hljs-built_in">request</span> <span class="hljs-keyword">to</span> localhost:<span class="hljs-number">8083</span>
</code></pre>
<p><strong>â†‘ å‘èµ·é€‰ä¸¾ï¼Œå¹¶è¡Œå‘å…¶ä»–ä¸¤ä¸ªèŠ‚ç‚¹å‘é€æŠ•ç¥¨è¯·æ±‚</strong></p>
<hr/>
<pre><code class="hljs language-ini" lang="ini">2024-11-18 22:49:23.512 <span class="hljs-section">[pool-3-thread-1]</span> INFO  RaftService - Received vote response from localhost:8082: <span class="hljs-attr">granted</span>=<span class="hljs-literal">true</span>, term=<span class="hljs-number">1</span>
2024-11-18 22:49:23.513 <span class="hljs-section">[pool-3-thread-2]</span> INFO  RaftService - Received vote response from localhost:8083: <span class="hljs-attr">granted</span>=<span class="hljs-literal">true</span>, term=<span class="hljs-number">1</span>
</code></pre>
<p><strong>â†‘ æ”¶åˆ°å…¶ä»–ä¸¤ä¸ªèŠ‚ç‚¹çš„æŠ•ç¥¨ï¼Œéƒ½æ˜¯åŒæ„(granted=true)</strong></p>
<hr/>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">2024-11-18 22:49:23.514</span> [<span class="hljs-string">pool-3-thread-1</span>] <span class="hljs-string">INFO</span>  <span class="hljs-string">RaftNode</span> <span class="hljs-bullet">-</span> <span class="hljs-string">Received</span> <span class="hljs-string">majority</span> <span class="hljs-string">votes</span> <span class="hljs-string">(3/3),</span> <span class="hljs-string">becoming</span> <span class="hljs-string">LEADER</span>
<span class="hljs-number">2024-11-18 22:49:23.514</span> [<span class="hljs-string">pool-3-thread-1</span>] <span class="hljs-attr">INFO  RaftNode - State changed:</span> <span class="hljs-string">CANDIDATE</span> <span class="hljs-string">-&gt;</span> <span class="hljs-string">LEADER</span>
</code></pre>
<p><strong>â†‘ è·å¾—å¤šæ•°ç¥¨(3ç¥¨â‰¥2ç¥¨)ï¼Œæˆä¸ºLeader</strong></p>
<hr/>
<pre><code class="hljs language-ini" lang="ini">2024-11-18 22:49:23.565 <span class="hljs-section">[pool-2-thread-2]</span> INFO  RaftService - Sending heartbeats to 2 peers, <span class="hljs-attr">term</span>=<span class="hljs-number">1</span>
2024-11-18 22:49:23.615 <span class="hljs-section">[pool-2-thread-2]</span> INFO  RaftService - Sending heartbeats to 2 peers, <span class="hljs-attr">term</span>=<span class="hljs-number">1</span>
2024-11-18 22:49:23.665 <span class="hljs-section">[pool-2-thread-2]</span> INFO  RaftService - Sending heartbeats to 2 peers, <span class="hljs-attr">term</span>=<span class="hljs-number">1</span>
</code></pre>
<p><strong>â†‘ Leaderæ¯50mså‘é€ä¸€æ¬¡å¿ƒè·³</strong></p>
<hr/>
<p><strong>åŒæ—¶çœ‹Node-2çš„æ—¥å¿—ï¼ˆFollowerè§†è§’ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">tail</span> -f /tmp/raft-node-2.<span class="hljs-built_in">log</span>
</code></pre>
<pre><code class="hljs language-ini" lang="ini">2024-11-18 22:49:23.480 <span class="hljs-section">[http-nio-8082-exec-1]</span> INFO  RaftController - Received RequestVote: {term:1, candidateId:node-1}
2024-11-18 22:49:23.481 <span class="hljs-section">[http-nio-8082-exec-1]</span> INFO  RaftNode - Received RequestVote from node-1 for term 1
2024-11-18 22:49:23.482 <span class="hljs-section">[http-nio-8082-exec-1]</span> INFO  RaftNode - Granting vote to node-1 for term 1
2024-11-18 22:49:23.483 <span class="hljs-section">[http-nio-8082-exec-1]</span> INFO  FileStatePersistence - Saved persistent state: <span class="hljs-attr">term</span>=<span class="hljs-number">1</span>, votedFor=node-<span class="hljs-number">1</span>
</code></pre>
<p><strong>â†‘ Followeræ”¶åˆ°æŠ•ç¥¨è¯·æ±‚ï¼ŒåŒæ„æŠ•ç¥¨ï¼ŒæŒä¹…åŒ–votedFor=node-1</strong></p>
<hr/>
<pre><code class="hljs language-ini" lang="ini">2024-11-18 22:49:23.570 <span class="hljs-section">[http-nio-8082-exec-2]</span> INFO  RaftController - Received AppendEntries: {term:1, leaderId:node-1}
2024-11-18 22:49:23.571 <span class="hljs-section">[http-nio-8082-exec-2]</span> INFO  RaftNode - Received heartbeat from Leader node-1, <span class="hljs-attr">term</span>=<span class="hljs-number">1</span>
2024-11-18 22:49:23.571 <span class="hljs-section">[http-nio-8082-exec-2]</span> INFO  RaftNode - Resetting election timeout
</code></pre>
<p><strong>â†‘ Followeræ”¶åˆ°Leaderçš„å¿ƒè·³ï¼Œé‡ç½®é€‰ä¸¾è¶…æ—¶</strong></p>
<hr/>
<pre><code class="hljs language-css" lang="css"><span class="hljs-number">2024</span>-<span class="hljs-number">11</span>-<span class="hljs-number">18</span> <span class="hljs-number">22</span>:<span class="hljs-number">49</span>:<span class="hljs-number">23.620</span> [http-nio-<span class="hljs-number">8082</span>-exec-<span class="hljs-number">3</span>] INFO  RaftController - Received AppendEntries: {term:<span class="hljs-number">1</span>, leaderId:node-<span class="hljs-number">1</span>}
<span class="hljs-number">2024</span>-<span class="hljs-number">11</span>-<span class="hljs-number">18</span> <span class="hljs-number">22</span>:<span class="hljs-number">49</span>:<span class="hljs-number">23.670</span> [http-nio-<span class="hljs-number">8082</span>-exec-<span class="hljs-number">4</span>] INFO  RaftController - Received AppendEntries: {term:<span class="hljs-number">1</span>, leaderId:node-<span class="hljs-number">1</span>}
</code></pre>
<p><strong>â†‘ æŒç»­æ”¶åˆ°å¿ƒè·³ï¼Œæ¯50msä¸€æ¬¡</strong></p>
<hr/>
<p><strong>æ—¥å¿—æ—¶é—´çº¿åˆ†æï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">gantt
    title é€‰ä¸¾è¿‡ç¨‹æ—¶é—´çº¿ï¼ˆæ¯«ç§’çº§ï¼‰
    dateFormat x
    axisFormat %L
    
    section Node-1
    å¯åŠ¨åˆå§‹åŒ–          :0, 23156
    ç­‰å¾…é€‰ä¸¾è¶…æ—¶        :23156, 23450
    æˆä¸ºCandidate       :23450, 23452
    å‘é€æŠ•ç¥¨è¯·æ±‚        :23453, 23454
    æ”¶åˆ°æŠ•ç¥¨å“åº”        :23512, 23514
    æˆä¸ºLeader          :23514, 23515
    å‘é€å¿ƒè·³            :23565, 150000
    
    section Node-2
    å¯åŠ¨åˆå§‹åŒ–          :0, 23160
    ç­‰å¾…                :23160, 23480
    æ”¶åˆ°æŠ•ç¥¨è¯·æ±‚        :23480, 23481
    æŠ•ç¥¨ç»™Node-1        :23481, 23483
    æ”¶åˆ°å¿ƒè·³            :23570, 150000
</code></pre>
<p><strong>å…³é”®æ—¶é—´ç‚¹ï¼š</strong></p>
<ul>
<li><strong>23.156s</strong>: Node-1å¯åŠ¨</li>
<li><strong>23.450s</strong>: Node-1é€‰ä¸¾è¶…æ—¶ï¼ˆç­‰äº†294msï¼‰</li>
<li><strong>23.453s</strong>: å‘èµ·é€‰ä¸¾</li>
<li><strong>23.480s</strong>: Node-2æ”¶åˆ°æŠ•ç¥¨è¯·æ±‚ï¼ˆç½‘ç»œå»¶è¿Ÿ27msï¼‰</li>
<li><strong>23.512s</strong>: Node-1æ”¶åˆ°ç¬¬ä¸€å¼ æŠ•ç¥¨ï¼ˆæ€»å»¶è¿Ÿ59msï¼‰</li>
<li><strong>23.514s</strong>: è·å¾—å¤šæ•°ç¥¨ï¼Œæˆä¸ºLeaderï¼ˆæ€»è€—æ—¶64msï¼‰</li>
<li><strong>23.565s</strong>: å¼€å§‹å‘é€å¿ƒè·³</li>
</ul>
<h2 data-id="heading-16">äº”ã€ä¸Nacos JRaftçš„å¯¹æ¯”</h2>
<p>Simple Raftåªæœ‰500è¡Œä»£ç ï¼Œè€ŒJRaftæœ‰5ä¸‡è¡Œï¼Œå·®è·åœ¨å“ªï¼Ÿ</p>
<p>æˆ‘æ•´ç†äº†ä¸ªå¯¹æ¯”è¡¨ï¼š</p>























































<table><thead><tr><th>ç‰¹æ€§</th><th>Simple Raft</th><th>Nacos JRaft</th></tr></thead><tbody><tr><td>ä»£ç é‡</td><td>~500è¡Œ</td><td>~5ä¸‡è¡Œ</td></tr><tr><td>é€‰ä¸¾æœºåˆ¶</td><td>å®Œå…¨ä¸€è‡´</td><td>å®Œå…¨ä¸€è‡´</td></tr><tr><td>æŒä¹…åŒ–</td><td>æ–‡ä»¶ï¼ˆJSONï¼‰</td><td>RocksDB</td></tr><tr><td>RPC</td><td>HTTP + JSON</td><td>gRPC/Bolt</td></tr><tr><td>æ—¥å¿—å¤åˆ¶</td><td>æœªå®ç°</td><td>å®Œæ•´å®ç°</td></tr><tr><td>å¿«ç…§</td><td>æœªå®ç°</td><td>å®Œæ•´å®ç°</td></tr><tr><td>æ€§èƒ½</td><td>å¤Ÿç”¨ï¼ˆdemoï¼‰</td><td>ç”Ÿäº§çº§ï¼ˆä¸‡çº§TPSï¼‰</td></tr><tr><td>PreVoteä¼˜åŒ–</td><td>æ— </td><td>æœ‰</td></tr><tr><td>Pipelineå¤åˆ¶</td><td>æ— </td><td>æœ‰</td></tr></tbody></table>
<p><strong>æ ¸å¿ƒæ€æƒ³æ˜¯ä¸€æ ·çš„</strong>ï¼Œå·®è·åœ¨å·¥ç¨‹å®ç°ä¸Šã€‚</p>
<p>JRaftåšäº†å¤§é‡ä¼˜åŒ–ï¼š</p>
<ul>
<li>æ‰¹é‡å¤åˆ¶æ—¥å¿—</li>
<li>Pipelineé™ä½å»¶è¿Ÿ</li>
<li>RocksDBæŒä¹…åŒ–</li>
<li>è¯¦å°½çš„ç›‘æ§æŒ‡æ ‡</li>
</ul>
<p>ä½†è¿™äº›éƒ½ä¸æ˜¯Raftçš„æ ¸å¿ƒã€‚<strong>æˆ‘ä»¬å…ˆæŠŠæ ¸å¿ƒææ‡‚ï¼Œä¼˜åŒ–ä»¥åå†è¯´ã€‚</strong></p>
<h2 data-id="heading-17">å…­ã€å¸¸è§çš„å®ç°é—®é¢˜</h2>
<h3 data-id="heading-18">é—®é¢˜1ï¼šå¹¶å‘å®‰å…¨</h3>
<p>ä»…ç”¨volatileä¸å¤Ÿï¼Œ<code>currentTerm++</code>å’Œ<code>state=CANDIDATE</code>ä¸æ˜¯åŸå­æ“ä½œï¼Œå¯èƒ½å‡ºç°termå·²ç»+1ä½†stateè¿˜æ˜¯FOLLOWERçš„æƒ…å†µã€‚</p>
<p>éœ€è¦ç”¨ReentrantLockä¿æŠ¤æ‰€æœ‰çŠ¶æ€å˜æ›´æ“ä½œã€‚</p>
<h3 data-id="heading-19">é—®é¢˜2ï¼šé€‰ä¸¾è¶…æ—¶æœªéšæœºåŒ–</h3>
<p>å¦‚æœæ‰€æœ‰èŠ‚ç‚¹çš„é€‰ä¸¾è¶…æ—¶éƒ½æ˜¯å›ºå®šå€¼(æ¯”å¦‚200ms)ï¼Œä¼šå¯¼è‡´å¤šä¸ªèŠ‚ç‚¹åŒæ—¶è¶…æ—¶ã€åŒæ—¶å‘èµ·é€‰ä¸¾ã€äº’ç›¸æŠ•ç¥¨ç»™è‡ªå·±ï¼Œä¸€ç›´å¹³ç¥¨ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼šè®¾ç½®éšæœºçš„é€‰ä¸¾è¶…æ—¶(150-300ms)ï¼Œè®©æŸä¸ªèŠ‚ç‚¹å…ˆå‘èµ·é€‰ä¸¾ã€‚</p>
<h3 data-id="heading-20">é—®é¢˜3ï¼šå¿ƒè·³å¤±è´¥åLeaderæœªé™çº§</h3>
<p>Leaderå’ŒFolloweræ–­ç½‘åï¼ŒLeaderå¯èƒ½ç»§ç»­è®¤ä¸ºè‡ªå·±æ˜¯Leaderã€‚</p>
<p>åŸå› ï¼šå¿ƒè·³å¤±è´¥ååªæ‰“æ—¥å¿—ï¼Œæ²¡æœ‰æ£€æŸ¥å“åº”çš„termã€‚æ­£ç¡®åšæ³•ï¼š<strong>æ”¶åˆ°æ›´é«˜termï¼Œç«‹å³é™çº§</strong>ã€‚</p>
<h3 data-id="heading-21">é—®é¢˜4ï¼šæŒä¹…åŒ–æ—¶æœºé”™è¯¯</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é”™è¯¯å†™æ³•</span>
votedFor = candidateId;
<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestVoteResponse</span>(currentTerm, <span class="hljs-literal">true</span>);
savePersistentState();  <span class="hljs-comment">// æ°¸è¿œæ‰§è¡Œä¸åˆ°</span>

<span class="hljs-comment">// æ­£ç¡®å†™æ³•</span>
votedFor = candidateId;
savePersistentState();  <span class="hljs-comment">// å…ˆæŒä¹…åŒ–</span>
<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestVoteResponse</span>(currentTerm, <span class="hljs-literal">true</span>);
</code></pre>
<p>çŠ¶æ€å˜æ›´å¿…é¡»å…ˆæŒä¹…åŒ–å†è¿”å›ï¼Œè¿™æ˜¯Raftå®‰å…¨æ€§çš„åŸºç¡€ã€‚</p>
<h2 data-id="heading-22">ä¸ƒã€å½“å‰å®ç°çš„å±€é™</h2>
<p>é€šè¿‡è¿™ä¸ªMVPç‰ˆæœ¬ï¼Œæˆ‘ä»¬è·‘é€šäº†Raftçš„Leaderé€‰ä¸¾å’Œå¿ƒè·³æœºåˆ¶ã€‚3ä¸ªèŠ‚ç‚¹èƒ½æ­£å¸¸é€‰ä¸¾ï¼ŒLeaderèƒ½ç»´æŒç»Ÿæ²»ï¼ŒèŠ‚ç‚¹é‡å¯åèƒ½æ­£ç¡®æ¢å¤ã€‚</p>
<p>ä½†è¿™åªæ˜¯Raftçš„å…¥é—¨ã€‚<strong>å½“å‰å®ç°è¿˜ç¼ºå°‘æœ€æ ¸å¿ƒçš„åŠŸèƒ½ï¼š</strong></p>
<h3 data-id="heading-23">æ²¡æœ‰æ—¥å¿—å¤åˆ¶</h3>
<p>ç°åœ¨çš„Leaderåªä¼šå‘å¿ƒè·³ï¼Œä¸ä¼šå¤„ç†ä»»ä½•ä¸šåŠ¡è¯·æ±‚ã€‚é€‰ä¸¾åªæ˜¯è§£å†³äº†"è°æ¥åè°ƒ"ï¼Œè¿˜æ²¡æœ‰è§£å†³"æ€ä¹ˆåè°ƒ"ã€‚</p>
<p>å›é¡¾ç¬¬ä¸€ç¯‡è¯´çš„ï¼šRaftçš„æ ¸å¿ƒæ˜¯ä¿è¯æ‰€æœ‰èŠ‚ç‚¹æŒ‰ç›¸åŒé¡ºåºæ‰§è¡Œç›¸åŒçš„æ“ä½œã€‚ç°åœ¨æˆ‘ä»¬åªæœ‰Leaderï¼Œä½†æ²¡æœ‰"æ“ä½œ"å’Œ"é¡ºåº"ã€‚</p>
<h3 data-id="heading-24">æ²¡æœ‰çŠ¶æ€æœº</h3>
<p>æ—¥å¿—å¤åˆ¶åï¼Œéœ€è¦åº”ç”¨åˆ°çŠ¶æ€æœºã€‚è¿™æ‰æ˜¯Raftçš„æœ€ç»ˆç›®çš„ï¼šæ„å»ºä¸€ä¸ªä¸€è‡´æ€§çš„çŠ¶æ€æœºã€‚</p>
<h3 data-id="heading-25">æ²¡æœ‰è¿‡åŠæäº¤æœºåˆ¶</h3>
<p>Leaderå¦‚ä½•çŸ¥é“æ—¥å¿—å·²ç»è¢«å¤šæ•°èŠ‚ç‚¹æ¥æ”¶ï¼Ÿä»€ä¹ˆæ—¶å€™å¯ä»¥å‘Šè¯‰å®¢æˆ·ç«¯"å†™å…¥æˆåŠŸ"ï¼Ÿè¿™äº›éƒ½éœ€è¦å®ç°ã€‚</p>
<h3 data-id="heading-26">æ—¥å¿—ä¸€è‡´æ€§æ£€æŸ¥</h3>
<p>å¦‚æœFollowerçš„æ—¥å¿—å’ŒLeaderä¸ä¸€è‡´æ€ä¹ˆåŠï¼Ÿå¦‚ä½•é€šè¿‡prevLogIndex/prevLogTermæ£€æŸ¥ä¸€è‡´æ€§ï¼Ÿå†²çªäº†å¦‚ä½•å¤„ç†ï¼Ÿ</p>
<p><strong>è¿™äº›é—®é¢˜ï¼Œéƒ½åœ¨ä¸‹ä¸€ç¯‡è§£å†³ã€‚</strong></p>
<p>ä¸‹ä¸€ç¯‡å°†å®ç°æ—¥å¿—å¤åˆ¶æœºåˆ¶ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>AppendEntriesæºå¸¦æ—¥å¿—æ¡ç›®</li>
<li>æ—¥å¿—ä¸€è‡´æ€§æ£€æŸ¥</li>
<li>è¿‡åŠç¡®è®¤ä¸æäº¤</li>
<li>ç®€å•çš„KVçŠ¶æ€æœº</li>
</ul>
<p>é‚£æ—¶å€™æ‰ç®—çœŸæ­£ç†è§£äº†Raftçš„æ ¸å¿ƒã€‚</p>
<hr/>
<p>å¦‚æœä½ ä¹Ÿåœ¨å­¦ä¹ Raftï¼Œæˆ–è€…å¯¹åˆ†å¸ƒå¼å…±è¯†æœ‰è‡ªå·±çš„ç†è§£ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµã€‚æœ‰é—®é¢˜ä¹Ÿå¯ä»¥ç›´æ¥ç•™è¨€ï¼Œçœ‹åˆ°ä¼šå›å¤ã€‚</p>
<p>ä»£ç å·²å¼€æºï¼Œæ¬¢è¿Starï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fsh_wangwanbao%2Fsimple-raft" target="_blank" title="https://gitee.com/sh_wangwanbao/simple-raft" ref="nofollow noopener noreferrer">gitee.com/sh_wangwanbâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äºŒå‰æ ‘çš„ä¸‰ç§è¿­ä»£éå†ï¼ˆæ— æ ˆç‰ˆæœ¬ï¼‰-- æˆ‘åœ¨é©¬å…‹æ€ä¸»ä¹‰è¯¾ä¸Šçš„ä¸€äº›å·§æ€]]></title>    <link>https://juejin.cn/post/7575021014033645587</link>    <guid>https://juejin.cn/post/7575021014033645587</guid>    <pubDate>2025-11-22T03:54:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575021014033645587" data-draft-id="7574718964045398066" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äºŒå‰æ ‘çš„ä¸‰ç§è¿­ä»£éå†ï¼ˆæ— æ ˆç‰ˆæœ¬ï¼‰-- æˆ‘åœ¨é©¬å…‹æ€ä¸»ä¹‰è¯¾ä¸Šçš„ä¸€äº›å·§æ€"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2025-11-22T03:54:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Shemol"/> <meta itemprop="url" content="https://juejin.cn/user/1927864794744251"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äºŒå‰æ ‘çš„ä¸‰ç§è¿­ä»£éå†ï¼ˆæ— æ ˆç‰ˆæœ¬ï¼‰-- æˆ‘åœ¨é©¬å…‹æ€ä¸»ä¹‰è¯¾ä¸Šçš„ä¸€äº›å·§æ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1927864794744251/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Shemol
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T03:54:53.000Z" title="Sat Nov 22 2025 03:54:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰æƒ…æè¦</h2>
<p>äº‹æƒ…æ˜¯è¿™æ ·çš„ï¼šæœ¬äººè¿‘æ—¥è·Ÿç€é‚“ä¿Šè¾‰çš„ç½‘è¯¾å­¦ä¹ æ•°æ®ç»“æ„ï¼ˆä¸çŸ¥é“æœ‰æ²¡æœ‰å¬è¿‡çš„ï¼Œè®²å¾—çœŸçš„å¾ˆå¥½ï¼‰ï¼Œåœ¨å­¦ä¹ åˆ°äºŒå‰æ ‘çš„ä¸‰ç§éå†ï¼Œä¹Ÿå°±æ˜¯å…ˆåºã€ä¸­åºã€ååºè¿™ä¸‰ç§æ—¶ï¼Œå¯¹è¯¾å ‚ä¸Šæä¾›çš„ç®—æ³•æœ‰äº›ä¸æ»¡ï¼šä¸‰ç§ç®—æ³•å…¨éƒ½é‡‡ç”¨å¼•å…¥ä¸€ä¸ªè¾…åŠ©æ ˆçš„æ–¹æ³•æ¥ç¡®å®šèŠ‚ç‚¹çš„éå†é¡ºåºã€‚</p>
<p>è¿™æ ·çš„ç®—æ³•åœ¨æˆ‘çš„çœ¼ä¸­ï¼Œä¸å¤Ÿä¼˜é›…ã€‚è€å¸ˆåœ¨äºŒå‰æ ‘éå†çš„ç¬¬ä¸€èŠ‚è¯¾å°±è¯´è¿‡ï¼Œéšç€äºŒå‰æ ‘çš„è§„æ¨¡ã€æ·±åº¦å¢å¤§ï¼Œé€’å½’éå†ç‰ˆæœ¬ä¼šå‡ºç°â€œå‡½æ•°è°ƒç”¨æ ˆæº¢å‡ºâ€çš„é—®é¢˜ã€‚ç°åœ¨ä¼˜åŒ–ä¸ºäº†è¿­ä»£ç‰ˆæœ¬ï¼Œå´ä¾ç„¶æ²¡æœ‰è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>äºæ˜¯æˆ‘å°±å¸¦ç€è¿™ä¸ªé—®é¢˜ï¼Œèµ°å‘äº†é©¬å…‹æ€ä¸»ä¹‰çš„æ•™å®¤ï¼ˆæœ¬äººå¼€å­¦ä»¥æ¥ç¬¬ä¸€æ¬¡è§åˆ°è¿™è€å¸ˆï¼Œå…¶ä»–æ—¶é—´éƒ½æ˜¯åœ¨å¯å®¤è‡ªå­¦ï¼Œä»Šå¤©å¬è¯´æœ‰æœŸä¸­è€ƒè¯•æ‰æ¥çš„ï¼‰ã€‚è¯¾ä¸Šå®åœ¨æ— èŠï¼Œæˆ‘å£è¢‹é‡Œåˆæ­£å¥½æœ‰ä¸€å¼ è‰ç¨¿çº¸ã€‚é—²æ¥æ— äº‹ï¼Œåœ¨ä¸Šé¢ç”»äº†ä¸€æ£µæ ‘ã€‚</p>
<p>å†å²ä¸Šä¹Ÿä¸ä¹è¿™æ ·çš„æ—¶åˆ»--çµæ„Ÿæ€»æ˜¯åœ¨ä¸ç»æ„é—´æ¶Œç°ã€‚æˆ‘æŠŠç›®å…‰ä»æ•´ä½“çš„é€’å½’ï¼Œæˆ–è€…è¯´è¿­ä»£ç­–ç•¥ï¼Œè½¬å‘äº†å±€éƒ¨ï¼ŒèŠ‚ç‚¹ä¸èŠ‚ç‚¹ä¹‹é—´çš„é€»è¾‘è”ç³»ã€‚äºæ˜¯å‘ç°äº†ä¸€ç§åŸºäºçˆ¶æŒ‡é’ˆçš„ï¼Œä¸éœ€è¦è¾…åŠ©æ ˆçš„è¿­ä»£éå†ç­–ç•¥ã€‚è¿™æ ·çš„å‘ç°ä¸èƒ½è¯´ä¸ä»¤äººæ¬£å–œï¼Œäºæ˜¯å†™ä¸‹æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢ï¼Œä»¥ä½œçºªå¿µã€‚</p>
<h2 data-id="heading-1">ç®—æ³•æ€è·¯ä¸å®ç°</h2>
<p>æˆ‘çš„ç®—æ³•åŸºäºçˆ¶æŒ‡é’ˆæ¥ç»´ç³»èŠ‚ç‚¹ä¹‹é—´çš„é€»è¾‘è”ç³»ã€‚è¿™å¤§æ¦‚æ˜¯å…¶å”¯ä¸€çš„ç¼ºç‚¹ã€‚ä½†æ˜¯ï¼Œè€—è´¹ä¸æ ˆç›¸å½“çš„ç©ºé—´ï¼ˆå¯¹äºå·²ç»æä¾›çˆ¶æŒ‡é’ˆçš„æƒ…æ™¯ï¼Œé¢å¤–çš„ç©ºé—´æ˜¯O(1)ï¼‰ï¼Œä¸ä»…èƒ½å¤Ÿè§£å†³æ ˆæº¢å‡ºçš„é—®é¢˜ï¼Œè€Œä¸”åœ¨å½¢å¼ä¸Šï¼Œä¸‰ç§éå†ç®—æ³•é«˜åº¦ç»Ÿä¸€ï¼Œæˆ‘è‡ªè®¤ä¸ºç®—æ˜¯ä¸ªä¼˜é›…ä¸”ä¼˜ç§€çš„ç®—æ³•ã€‚</p>
<h3 data-id="heading-2">å…ˆåºéå†ï¼šV-&gt;L-&gt;R</h3>
<p>å…ˆä»å…ˆåºéå†å¼€å§‹å§ï¼Œæˆ‘ä»¬æœ‰ä¸€æ£µäºŒå‰æ ‘ï¼Œå¦‚å›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0fa422cc04a14323839ec8ed296a11a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hlbW9s:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764388493&amp;x-signature=IpnrWdBR09VoNVbvWJ4a2GRJpwM%3D" alt="image.png" loading="lazy"/></p>
<p>æ€è·¯æ˜¯è¿™æ ·çš„ï¼Œä»æ ¹èŠ‚ç‚¹å¼€å§‹ã€‚åœ¨ä»»æ„æ—¶åˆ»ï¼Œæˆ‘ä»¬å…ˆéå†å½“å‰èŠ‚ç‚¹ï¼Œç„¶åé¢ä¸´çš„æ— éè¿™å‡ ç§æƒ…å†µï¼š</p>
<pre><code class="hljs">å½“å‰èŠ‚ç‚¹æœ‰å·¦å­©å­ï¼Œé‚£å°±ç»§ç»­å»éå†å·¦å­©å­ã€‚
å½“å‰èŠ‚ç‚¹æ²¡æœ‰å·¦å­©å­ï¼ˆå·¦å­©å­ä¸ºç©ºï¼‰ï¼Œä½†æ˜¯æœ‰å³å­©å­ï¼Œé‚£å°±å»éå†å³å­©å­ã€‚
å½“å‰èŠ‚ç‚¹æ—¢æ²¡æœ‰å·¦å­©å­ï¼Œä¹Ÿæ²¡æœ‰å³å­©å­ï¼ˆå¶å­èŠ‚ç‚¹ï¼‰ï¼Œé‚£å°±è¦å›æº¯äº†ã€‚
</code></pre>
<p>å›æº¯åˆ°ä»€ä¹ˆæ—¶å€™å‘¢ï¼Ÿå›æº¯æ—¶ä¹Ÿæ— éä¸¤ç§æƒ…å†µï¼Œæˆ‘ä»¬ä¸å¦¨è®¨è®ºä¸€ä¸‹ï¼Œä½¿å¾—ä½ çš„æ€è·¯æ›´åŠ æ¸…æ™°ï¼š</p>
<p>ä¸€ã€å›æº¯æ—¶ï¼Œè‡ªå·±æ˜¯çˆ¶èŠ‚ç‚¹çš„â€œéç‹¬ç”Ÿâ€å·¦å­©å­ã€‚è¿™å¾ˆå¥½ç†è§£ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªçˆ¶èŠ‚ç‚¹çš„å·¦å­æ ‘éå†å®Œäº†å˜›ï¼Œé‚£å°±æ¥ç€å»éå†ä»–çš„å³å­æ ‘</p>
<p>äºŒã€å›æº¯æ—¶ï¼Œè‡ªå·±æ˜¯çˆ¶èŠ‚ç‚¹çš„â€œç‹¬ç”Ÿâ€å·¦å­©å­ï¼Œæˆ–æ˜¯å³å­©å­ã€‚ä¹Ÿå¾ˆå¥½ç†è§£å§ï¼Œé‚£è¿™ä¸ªçˆ¶èŠ‚ç‚¹çš„å·¦å³å­æ ‘å°±å…¨éƒ¨éå†å®Œäº†ï¼æˆ‘ä»¬å°±è·³è¿‡è¿™ä¸ªçˆ¶èŠ‚ç‚¹,ç»§ç»­å‘ä¸Šå›æº¯ï¼Œç›´åˆ°å®ƒæ˜¯çˆ¶èŠ‚ç‚¹çš„â€œéç‹¬ç”Ÿâ€å·¦å­©å­ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»è®¨è®ºå®Œäº†éå†ä¸­æ‰€æœ‰çš„æƒ…å†µï¼Œé‚£å¾ªç¯ä»€ä¹ˆæ—¶å€™é€€å‡ºå‘¢ï¼Ÿç­”æ¡ˆæ˜¯â€œæ ¹èŠ‚ç‚¹çš„å·¦å³å­æ ‘è¢«éå†å®Œâ€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“å‰èŠ‚ç‚¹é‡æ–°å›åˆ°æ ¹èŠ‚ç‚¹ï¼ˆçˆ¶èŠ‚ç‚¹ä¸ºç©ºï¼‰æ—¶ï¼Œé€€å‡ºå¾ªç¯ï¼Œéå†ç»“æŸã€‚</p>
<p>ä¸‹é¢ç»™å‡ºä»£ç ï¼ˆè‡ªè®¤ä¸ºå®Œç¾ï¼Œæ¬¢è¿å¤§ä½¬æ¥æ‰¾bugï¼‰ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">template&lt;typename T, typename VST&gt;
void <span class="hljs-built_in">traverse</span>(bin_node&lt;T&gt;* node, VST&amp; visit)
{
	if (node == nullptr) return;<span class="hljs-comment">//è¾¹ç•Œæƒ…å†µè€ƒè™‘</span>

	while (true)
	{
		<span class="hljs-built_in">visit</span>(node);<span class="hljs-comment">//å…ˆåºéå†</span>
		if (node-&gt;get_left_child() != nullptr) node = node-&gt;<span class="hljs-built_in">get_left_child</span>();<span class="hljs-comment">//å¦‚æœå·¦å­©å­å­˜åœ¨ï¼Œåˆ™ç»§ç»­æ·±å…¥</span>
		else if (node-&gt;get_right_child() != nullptr) node = node-&gt;<span class="hljs-built_in">get_right_child</span>();<span class="hljs-comment">//å¦‚æœæ²¡æœ‰å·¦å­©å­ï¼Œä½†æ˜¯æœ‰å³å­©å­ï¼Œåˆ™è½¬å‘å³å­©å­</span>

		<span class="hljs-comment">//å¦‚æœä¸ºå¶èŠ‚ç‚¹ï¼Œå¼€å§‹å›æº¯</span>
		else
		{
			while (true)
			{
				if (node-&gt;get_parent() == nullptr)break;<span class="hljs-comment">//å¦‚æœè¿½æº¯åˆ°æ ¹èŠ‚ç‚¹ï¼Œè¯´æ˜æ•´æ£µæ ‘éå†å®Œäº†ï¼Œé€€å‡ºå¾ªç¯</span>
				if (node == node-&gt;get_parent()-&gt;<span class="hljs-built_in">get_left_child</span>())<span class="hljs-comment">//å¦‚æœæ˜¯çˆ¶èŠ‚ç‚¹çš„å·¦å­©å­ï¼Œè®¨è®ºæ˜¯å¦â€œç‹¬ç”Ÿâ€</span>
				{
					if (node-&gt;get_parent()-&gt;<span class="hljs-built_in">get_right_child</span>() == nullptr);<span class="hljs-comment">//å¦‚æœç‹¬ç”Ÿï¼Œé‚£å°±ç»§ç»­å›æº¯</span>
					else break;<span class="hljs-comment">//å¦‚æœéç‹¬ç”Ÿï¼Œå°±é€€å‡ºå¾ªç¯ï¼Œå»éå†çˆ¶èŠ‚ç‚¹çš„å³å­æ ‘</span>
				}
				else;<span class="hljs-comment">//å¦‚æœæ˜¯çˆ¶èŠ‚ç‚¹çš„å³å­©å­ï¼Œç»§ç»­å›æº¯</span>

				node = node-&gt;<span class="hljs-built_in">get_parent</span>();
			}
			if (node-&gt;get_parent() == nullptr) return;<span class="hljs-comment">//å¦‚æœè¿½æº¯åˆ°æ ¹èŠ‚ç‚¹çš„ä¸Šæ–¹ï¼Œè¯´æ˜å·²ç»éå†å®Œäº†</span>
			node = node-&gt;<span class="hljs-built_in">get_parent</span>()-&gt;<span class="hljs-built_in">get_right_child</span>();<span class="hljs-comment">//å¦‚æœä¸æ˜¯æ ¹èŠ‚ç‚¹ï¼Œè½¬å‘å³å­©å­</span>
		}
	}
}
</code></pre>
<h3 data-id="heading-3">ä¸­åºéå†</h3>
<p>æ€è·¯æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡è¿™é‡Œè¦ç­‰åˆ°èŠ‚ç‚¹çš„å·¦å­æ ‘éå†å®Œå†éå†è¯¥èŠ‚ç‚¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3afc1a90d31c4a98b5c0d8b5700fe274~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hlbW9s:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764388493&amp;x-signature=9vU0%2FFQlVGahiFbsdXFvBf9CHJ0%3D" alt="image.png" loading="lazy"/>
æˆ‘ä»¬ä¹Ÿåˆ†æƒ…å†µè®¨è®ºã€‚ä»æ ¹èŠ‚ç‚¹å¼€å§‹ã€‚åœ¨ä»»æ„æ—¶åˆ»ï¼Œæˆ‘ä»¬å…ˆä¸éå†å½“å‰èŠ‚ç‚¹ï¼Œé¢ä¸´çš„æ— éè¿™å‡ ç§æƒ…å†µï¼š</p>
<pre><code class="hljs">å½“å‰èŠ‚ç‚¹æœ‰å·¦å­©å­ï¼Œé‚£å°±è½¬å‘å·¦å­©å­
å½“å‰èŠ‚ç‚¹æ²¡æœ‰å·¦å­©å­ï¼Œä½†æ˜¯æœ‰å³å­©å­ã€‚é‚£å°±åˆ°äº†è¿™ä¸ªèŠ‚ç‚¹è¢«éå†çš„æ—¶å€™äº†ã€‚å®ƒè¢«éå†ä¹‹åï¼Œè¦è½¬å‘ä»–çš„å³å­©å­ã€‚
å½“å‰èŠ‚ç‚¹ä¸ºå¶èŠ‚ç‚¹ï¼Œé‚£å°±å¼€å§‹å›æº¯
</code></pre>
<p>å›æº¯çš„æ—¶å€™å‘¢ï¼Œä¹Ÿæ— éä¸‹é¢å‡ ç§æƒ…å†µï¼š</p>
<p>ä¸€ã€å½“å‰èŠ‚ç‚¹ä¸ºå·¦å­©å­ï¼Œé‚£å°±è¯´æ˜ä»–çš„çˆ¶èŠ‚ç‚¹çš„å·¦å­æ ‘å·²ç»éå†å®Œäº†ï¼Œéå†ä»–çš„çˆ¶èŠ‚ç‚¹ã€‚å¦‚æœè¿™ä¸ªçˆ¶èŠ‚ç‚¹æœ‰å³å­©å­å‘¢ï¼Œå°±å»éå†ï¼Œå¦‚æœæ²¡æœ‰é‚£å°±ç»§ç»­å‘ä¸Šå›æº¯ã€‚</p>
<p>äºŒã€å½“å‰èŠ‚ç‚¹ä¸ºå³å­©å­ï¼Œé‚£è¯´æ˜å®ƒçš„çˆ¶èŠ‚ç‚¹æ˜¯ä¸ç”¨éå†çš„ï¼Œå‘ä¸Šå›æº¯ã€‚</p>
<p>ï¼ˆå†™åˆ°è¿™é‡Œï¼Œä¸å¾—ä¸æ„Ÿå¹ä¸€å¥ï¼šè¿™å†™æ–‡ç« å’Œåœ¨è„‘å­é‡Œæƒ³çœŸä¸æ˜¯ä¸€å›äº‹å•Šã€‚è„‘å­é‡Œçš„æ€è·¯é€æ˜å¦‚æ°´æ™¶ï¼Œä¸€åˆ°æƒ³è¦å†™ä¸‹æ¥æ—¶å´æ‰¾ä¸ç€ä¸œå—è¥¿åŒ—ã€‚ï¼‰</p>
<pre><code class="hljs language-scss" lang="scss">template&lt;typename T, typename VST&gt;
void <span class="hljs-built_in">my_traverse_middle</span>(bin_node&lt;T&gt;* node, VST&amp; visit)
{
	if (node == nullptr) return;<span class="hljs-comment">//è¾¹ç•Œæƒ…å†µ</span>

	while (true)
	{
		if (node-&gt;get_left_child() != nullptr) node = node-&gt;<span class="hljs-built_in">get_left_child</span>();<span class="hljs-comment">//å¦‚æœå·¦å­©å­å­˜åœ¨ï¼Œç»§ç»­æ·±å…¥</span>
		else<span class="hljs-comment">//å¦‚æœæ²¡æœ‰å·¦å­©å­ï¼Œé‚£å°±éå†å½“å‰èŠ‚ç‚¹</span>
		{
			<span class="hljs-built_in">visit</span>(node);
			if (node-&gt;get_right_child() != nullptr) node = node-&gt;<span class="hljs-built_in">get_right_child</span>();<span class="hljs-comment">//å¦‚æœæœ‰å³å­©å­ï¼Œé‚£å°±è½¬å‘å³å­©å­</span>

			else<span class="hljs-comment">//æ²¡æœ‰çš„è¯ï¼Œä¹Ÿå°±æ˜¯å¶èŠ‚ç‚¹ï¼Œå‘ä¸Šå›æº¯,ç›´åˆ°å½“å‰èŠ‚ç‚¹ä¸º"éç‹¬ç”Ÿ"å·¦å­©å­</span>
			{
				while (true)
				{
					if (node-&gt;get_parent() == nullptr)break;<span class="hljs-comment">//å¦‚æœè¿½æº¯åˆ°æ ¹èŠ‚ç‚¹ï¼Œè¯´æ˜æ•´æ£µæ ‘éå†å®Œäº†ï¼Œé€€å‡ºå¾ªç¯</span>
					if (node == node-&gt;get_parent()-&gt;<span class="hljs-built_in">get_left_child</span>())<span class="hljs-comment">//å¦‚æœæ˜¯çˆ¶èŠ‚ç‚¹çš„å·¦å­©å­ï¼Œå°±éå†çˆ¶èŠ‚ç‚¹ï¼Œå†è®¨è®ºæ˜¯å¦â€œç‹¬ç”Ÿâ€</span>
					{
						<span class="hljs-built_in">visit</span>(node-&gt;get_parent());
						if (node-&gt;get_parent()-&gt;<span class="hljs-built_in">get_right_child</span>() != nullptr) break;<span class="hljs-comment">//å¦‚æœéç‹¬ç”Ÿï¼Œå°±å»éå†çˆ¶èŠ‚ç‚¹çš„å³å­æ ‘</span>
						else;<span class="hljs-comment">//å¦‚æœç‹¬ç”Ÿï¼Œç»§ç»­å›æº¯</span>
					}
					else;<span class="hljs-comment">//å¦‚æœæ˜¯çˆ¶èŠ‚ç‚¹çš„å³å­©å­ï¼Œç»§ç»­å›æº¯</span>

					node = node-&gt;<span class="hljs-built_in">get_parent</span>();
				}
				if (node-&gt;get_parent() == nullptr) return;<span class="hljs-comment">//å¦‚æœè¿½æº¯åˆ°æ ¹èŠ‚ç‚¹çš„ä¸Šæ–¹ï¼Œè¯´æ˜éå†å®Œäº†</span>
				node = node-&gt;<span class="hljs-built_in">get_parent</span>()-&gt;<span class="hljs-built_in">get_right_child</span>();
			}
		}
	}
}
</code></pre>
<h3 data-id="heading-4">ååºéå†</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92c6b3cb4d9b4e93b9440604882cd7c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hlbW9s:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764388493&amp;x-signature=qpqgnq%2FHOyhzoTOT8YoK0w8eSV4%3D" alt="image.png" loading="lazy"/></p>
<p>å¯¹äºååºéå†ï¼Œæˆ‘ä»¬ç†è§£è¿™æ ·ä¸€ä¸ªäº‹å®ï¼šå¯¹äºä»»æ„ä¸€æ£µï¼ˆå­ï¼‰æ ‘ï¼Œæˆ‘ä»¬æ€»æ˜¯å…ˆå»éå†æœ€å·¦è¾¹çš„å¶å­</p>
<p>ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œæˆ‘ä»¬å‘ä¸‹éå†ï¼Œæ— éè¿™å‡ ç§æƒ…å†µï¼š</p>
<pre><code class="hljs">å½“å‰èŠ‚ç‚¹æœ‰å·¦å­©å­ï¼Œé‚£å°±ç»§ç»­å‘å·¦
å¦‚æœå½“å‰å­©å­æ²¡æœ‰å·¦å­©å­ï¼Œé‚£å°±å°è¯•å‘å³
å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºå¶å­èŠ‚ç‚¹ï¼Œé‚£å°±éå†ï¼Œå¹¶å¼€å§‹å›æº¯
</code></pre>
<p>æˆ‘ä»¬æ¥ç€è®¨è®ºå›æº¯æ—¶çš„æƒ…å†µ</p>
<p>ä¸€ã€å½“å‰å­©å­ä¸ºâ€œéç‹¬ç”Ÿâ€å·¦å­©å­ï¼Œé‚£å°±å»éå†ä»–çš„çˆ¶èŠ‚ç‚¹çš„å³å­æ ‘</p>
<p>äºŒã€å½“å‰èŠ‚ç‚¹ä¸ºâ€œç‹¬ç”Ÿâ€å·¦å­©å­ï¼Œæˆ–è€…å½“å‰èŠ‚ç‚¹ä¸ºå³å­©å­ï¼Œè¯´æ˜åˆ°äº†å®ƒçš„çˆ¶èŠ‚ç‚¹è¢«éå†çš„æ—¶å€™äº†</p>
<p>ä¸‹é¢ç»™å‡ºè¿™ä¸ªç®—æ³•çš„å®ç°ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">template&lt;typename T, typename VST&gt;
void <span class="hljs-built_in">traverse</span>(bin_node&lt;T&gt;* node, VST&amp; visit)
{
	if (node == nullptr) return;<span class="hljs-comment">//è¾¹ç•Œæƒ…å†µ</span>

	while (true)
	{
		if (node-&gt;get_left_child() != nullptr)node = node-&gt;<span class="hljs-built_in">get_left_child</span>();<span class="hljs-comment">//å¦‚æœæœ‰å·¦å­©å­ï¼Œå°±å‘å·¦</span>
		else if (node-&gt;get_right_child() != nullptr)node = node-&gt;<span class="hljs-built_in">get_right_child</span>();<span class="hljs-comment">//å¦‚æœæ²¡æœ‰å·¦å­©å­ï¼Œä½†æ˜¯æœ‰å³å­©å­ï¼Œå°±å‘å³</span>

		else <span class="hljs-comment">//éƒ½æ²¡æœ‰ï¼Œè¯´æ˜æ˜¯å¶èŠ‚ç‚¹ï¼Œå¼€å§‹å›æº¯</span>
		{
			<span class="hljs-built_in">visit</span>(node);
			while (true)
			{
				if (node-&gt;get_parent() == nullptr)break;<span class="hljs-comment">//å¦‚æœè¿½æº¯åˆ°æ ¹èŠ‚ç‚¹ï¼Œè¯´æ˜æ•´æ£µæ ‘éå†å®Œäº†ï¼Œé€€å‡ºå¾ªç¯</span>
				if (node == node-&gt;get_parent()-&gt;<span class="hljs-built_in">get_left_child</span>())<span class="hljs-comment">//å¦‚æœæ˜¯çˆ¶èŠ‚ç‚¹çš„å·¦å­©å­ï¼Œè®¨è®ºæ˜¯å¦â€œç‹¬ç”Ÿâ€</span>
				{
					if (node-&gt;get_parent()-&gt;<span class="hljs-built_in">get_right_child</span>() == nullptr)<span class="hljs-built_in">visit</span>(node-&gt;get_parent());<span class="hljs-comment">//å¦‚æœç‹¬ç”Ÿï¼Œè¯´æ˜çˆ¶èŠ‚ç‚¹å·¦å³å­æ ‘å‡éå†å®Œï¼Œåˆ°äº†ä»–è¢«éå†çš„æ—¶å€™</span>
					else break;<span class="hljs-comment">//å¦‚æœéç‹¬ç”Ÿï¼Œå°±é€€å‡ºå¾ªç¯ï¼Œå»éå†çˆ¶èŠ‚ç‚¹çš„å³å­æ ‘</span>
				}
				else<span class="hljs-comment">//å¦‚æœæ˜¯çˆ¶èŠ‚ç‚¹çš„å³å­©å­ï¼Œé‚£å°±éå†çˆ¶èŠ‚ç‚¹ï¼Œç»§ç»­å›æº¯</span>
				{
					<span class="hljs-built_in">visit</span>(node-&gt;get_parent());
				}

				node = node-&gt;<span class="hljs-built_in">get_parent</span>();
			}
                        if (node-&gt;get_parent() == nullptr) return;<span class="hljs-comment">//å¦‚æœè¿½æº¯åˆ°æ ¹èŠ‚ç‚¹çš„ä¸Šæ–¹ï¼Œè¯´æ˜éå†å®Œäº†</span>
                        node = node-&gt;<span class="hljs-built_in">get_parent</span>()-&gt;<span class="hljs-built_in">get_right_child</span>();
		}

	}
}
</code></pre>
<h3 data-id="heading-5">æ€»ç»“</h3>
<p>æˆ‘è®¤ä¸ºè¿™ä¸ªç®—æ³•æ˜¯æœ‰ä»·å€¼çš„</p>
<p>é¦–å…ˆï¼Œç©ºé—´ä¸Šï¼šå¯¹äºè‡ªå¸¦çˆ¶æŒ‡é’ˆçš„æ ‘ï¼Œä»–çš„é¢å¤–ç©ºé—´å¤æ‚åº¦æ˜¯O(1),å°±ç®—æ˜¯ç®—ä¸Šçˆ¶æŒ‡é’ˆä¹Ÿä¸è¿‡O(n)ï¼Œè¿˜èƒ½é¿å…æ ˆæº¢å‡ºçš„é—®é¢˜ã€‚</p>
<p>å½¢å¼ä¸Šï¼Œä¸éš¾çœ‹å‡ºï¼Œä¸‰ç§éå†ç®—æ³•çš„é€»è¾‘å’Œä»£ç å®ç°éƒ½æ˜¯é«˜åº¦ç»Ÿä¸€çš„ã€‚</p>
<p>æ—¶é—´ä¸Šï¼Œçœå»äº†å…¥æ ˆå‡ºæ ˆçš„æ“ä½œï¼Œä»£ä»·æ˜¯æ¯ä¸ªéå¶å­èŠ‚ç‚¹éƒ½è¦è¢«nodeâ€œç»è¿‡â€ä¸¤æ¬¡ã€‚æ€»ä½“ä¸Šï¼Œæ—¶é—´å¤æ‚åº¦å¯¹æ¯”ä¼ ç»Ÿçš„è¾…åŠ©æ ˆæ–¹æ³•æ˜¯å°ä¼˜ï¼Œä»ç„¶æ˜¯O(n)</p>
<p>å½“ç„¶ä¹Ÿæœ‰ç¼ºç‚¹ï¼Œé¦–å…ˆæ˜¯è¿™ä¸ªçˆ¶æŒ‡é’ˆçš„äº‹å§ï¼Œæˆ‘è·Ÿç€è¯¾å ‚ä¸Šå®ç°çš„äºŒå‰æ ‘ç‰ˆæœ¬æ˜¯è‡ªå¸¦çˆ¶æŒ‡é’ˆçš„ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“è¿™ä¸ªçˆ¶æŒ‡é’ˆçš„æ³›ç”¨æ€§å’‹æ ·ã€‚è¿˜æœ‰å°±æ˜¯ä»£ç é€»è¾‘å¯¹æ¯”ä¼ ç»Ÿçš„è¾…åŠ©æ ˆæ–¹æ³•ç¡®å®ä¸é‚£ä¹ˆç®€æ˜ï¼Œä½†æˆ‘è§‰å¾—è¿˜å¥½ã€‚ï¼ˆä¸çŸ¥é“çœ‹åˆ°è¿™é‡Œçš„ä½ çœ‹æ‡‚äº†å—ï¼Ÿï¼‰</p>
<p>äº‹å®ä¸Šï¼Œå¯¹äºå±‚æ¬¡éå†ï¼Œæˆ‘ä¹Ÿè‡ªå·±æ¨å¯¼å‡ºäº†â€œæ— é˜Ÿåˆ—ç‰ˆæœ¬â€ï¼Œä½†ä¸ºäº†ä¿è¯è¿™ç¯‡åšå®¢å†…å®¹çš„ç»Ÿä¸€æ€§ï¼Œå°±ä¸æ”¾åœ¨è¿™é‡Œäº†ã€‚æœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥ç§ä¿¡äº¤æµã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Javaæ²¡æœ‰æŒ‡é’ˆï¼Œé‚£å®ƒæ˜¯æ€ä¹ˆå¹²Cè¯­è¨€é‡ŒæŒ‡é’ˆå¹²çš„æ´»çš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7574997924931043368</link>    <guid>https://juejin.cn/post/7574997924931043368</guid>    <pubDate>2025-11-22T07:06:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574997924931043368" data-draft-id="7575103881420881974" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Javaæ²¡æœ‰æŒ‡é’ˆï¼Œé‚£å®ƒæ˜¯æ€ä¹ˆå¹²Cè¯­è¨€é‡ŒæŒ‡é’ˆå¹²çš„æ´»çš„ï¼Ÿ"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-11-22T07:06:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="XUN4J"/> <meta itemprop="url" content="https://juejin.cn/user/4179664935335515"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Javaæ²¡æœ‰æŒ‡é’ˆï¼Œé‚£å®ƒæ˜¯æ€ä¹ˆå¹²Cè¯­è¨€é‡ŒæŒ‡é’ˆå¹²çš„æ´»çš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4179664935335515/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    XUN4J
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T07:06:01.000Z" title="Sat Nov 22 2025 07:06:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    20
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸€å¥è¯ç®€å•å›ç­”å°±æ˜¯ï¼š<strong>Javaè™½ç„¶æœ‰æŒ‡é’ˆï¼Œä½†åˆ°å¤„éƒ½æ˜¯æŒ‡é’ˆçš„å½±å­ï¼åªæ˜¯Javaé€šè¿‡JVMæŠŠå®ƒéšè—äº†èµ·æ¥ï¼Œä¸è®©ä½ ç”¨C/C++é‚£ç§æ˜¾å¼çš„æ–¹å¼æ“ä½œå®ƒã€‚æˆ‘ä»¬æŠŠè¿™ä¸ªä¸œè¥¿ç§°ä¹‹ä¸ºâ€œå¼•ç”¨â€ã€‚</strong></p>
<hr/>
<h3 data-id="heading-0">ä¸€ã€C/CPPæŒ‡é’ˆä¸Javaå¼•ç”¨çš„å¯¹æ¯”ï¼š</h3>
<p>C/CPPçš„æŒ‡é’ˆè¢«JVMåŒ…è£…æˆäº†æ›´åŠ å®‰å…¨çš„Javaå¼•ç”¨</p>






























<table><thead><tr><th>ç‰¹æ€§</th><th>C++ æŒ‡é’ˆ</th><th>Java å¼•ç”¨</th></tr></thead><tbody><tr><td><strong>è¯­æ³•</strong>â€‹</td><td><code>MyClass *obj = new MyClass();</code></td><td><code>MyClass obj = new MyClass();</code></td></tr><tr><td><strong>æœ¬è´¨</strong>â€‹</td><td>å­˜å‚¨å¦ä¸€ä¸ªå˜é‡çš„å†…å­˜åœ°å€</td><td><strong>æœ¬è´¨ä¸Šä¹Ÿæ˜¯å­˜å‚¨å¯¹è±¡çš„å†…å­˜åœ°å€</strong>â€‹</td></tr><tr><td><strong>æ“ä½œ</strong>â€‹</td><td>å¯ä»¥è¿›è¡Œç®—æœ¯è¿ç®—ï¼ˆ<code>++</code>, <code>--</code>ï¼‰ã€ä»»æ„è½¬æ¢</td><td>ä¸èƒ½è¿›è¡Œç®—æœ¯è¿ç®—ï¼Œç±»å‹å®‰å…¨</td></tr><tr><td><strong>ç›®æ ‡</strong>â€‹</td><td>å¯ä»¥æŒ‡å‘ä»»ä½•å†…å­˜åœ°å€ï¼ˆåŒ…æ‹¬æ— æ•ˆçš„ï¼‰</td><td>åªèƒ½æŒ‡å‘æœ‰æ•ˆçš„å¯¹è±¡æˆ–<code>null</code></td></tr></tbody></table>
<p>æ‰€ä»¥è¯´ï¼Œå¹¶ä¸æ˜¯Javaé‡Œæ²¡æœ‰æŒ‡é’ˆï¼Œè€Œæ˜¯å¼ºå¤§çš„JVMå¸®æˆ‘ä»¬æŠŠæŒ‡é’ˆæ“ä½œæ›´åŒ…è£…æˆä¸€ä¸ªæ›´å®‰å…¨ã€ä¸éœ€è¦æ‹…å¿ƒå›æ”¶çš„å¼•ç”¨ã€‚</p>
<hr/>
<h3 data-id="heading-1">äºŒã€Javaæ‰§è¡ŒMyClass obj = new MyClass()åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆ</h3>
<p>1ã€å£°æ˜å¼•ç”¨å˜é‡MyClass objæ—¶ï¼ŒJVMåœ¨å½“å‰æ–¹æ³•çš„æ ˆå¸§ï¼ˆStackä¸­ï¼‰ä¸­åˆ†é…ä¸€ä¸ªå¼•ç”¨å˜é‡çš„ç©ºé—´ç»™objï¼›</p>
<p>2ã€åˆ›å»ºå®ä¾‹åŒ–å¯¹è±¡new MyClass()æ—¶ï¼ŒJVMåœ¨å †åŒºï¼ˆHeapï¼‰åˆ†é…è¶³å¤Ÿçš„å†…å­˜æ¥å­˜å‚¨MyClasså¯¹è±¡çš„æ‰€æœ‰æ•°æ®</p>
<p>3ã€å»ºç«‹æŒ‡å‘å…³ç³»=ï¼Œå°†å †ä¸­å¯¹è±¡çš„å†…å­˜åœ°å€èµ‹å€¼ç»™æ ˆä¸­çš„å¼•ç”¨å˜é‡objï¼Œä½¿å¾—å¼•ç”¨æŒ‡å‘å®ä¾‹åŒ–å¯¹è±¡ã€‚</p>
<p>è¡¥å……JVMæ¶æ„å›¾ï¼š</p>
<h2 data-id="heading-2"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/323cc03737a249d1be87fecf54fe3946~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWFVONEo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764473417&amp;x-signature=IbUHMLDevRi6%2BTmsGCbCUfn0C5c%3D" alt="image.png" loading="lazy"/></h2>
<h3 data-id="heading-3">ä¸‰ã€JVMè¿˜åŒ…è£…äº†å“ªäº›æœºåˆ¶</h3>
<ol>
<li>åƒåœ¾å›æ”¶æœºåˆ¶
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">MyClass</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyClass</span>(); <span class="hljs-comment">// æ‰‹åŠ¨åˆ†é…</span>
<span class="hljs-comment">// ... ä½¿ç”¨å¯¹è±¡</span>
obj = <span class="hljs-literal">null</span>; <span class="hljs-comment">// æ— éœ€æ‰‹åŠ¨é‡Šæ”¾ï¼åƒåœ¾å›æ”¶å™¨ä¼šè‡ªåŠ¨å›æ”¶å†…å­˜</span>
</code></pre>
</li>
</ol>
<ul>
<li>Javaæœ‰ä¸€ä¸ªåå°çš„<strong>åƒåœ¾å›æ”¶å™¨GC</strong>ï¼Œå®ƒä¼šè‡ªåŠ¨ç›‘æ§å“ªäº›å¯¹è±¡ä¸å†è¢«ä»»ä½•å¼•ç”¨æŒ‡å‘ã€‚</li>
<li>å½“å¯¹è±¡å˜å¾—â€œä¸å¯è¾¾â€æ—¶ï¼ŒGCä¼šåœ¨æŸä¸ªæ—¶é—´ç‚¹è‡ªåŠ¨é‡Šæ”¾å®ƒä»¬å ç”¨çš„å†…å­˜ã€‚</li>
<li><strong>ä¼˜åŠ¿</strong>ï¼šé¿å…äº†å¯æ€•çš„å†…å­˜æ³„æ¼å’Œæ‚¬ç©ºæŒ‡é’ˆé—®é¢˜ã€‚</li>
<li><strong>ä»£ä»·</strong>ï¼šç¨‹åºå‘˜æ— æ³•æ§åˆ¶å†…å­˜é‡Šæ”¾çš„ç²¾ç¡®æ—¶æœºï¼Œå¯èƒ½æœ‰æ€§èƒ½å¼€é”€ã€‚</li>
</ul>
<h4 data-id="heading-4">2. å®Œå…¨ç¦æ­¢æŒ‡é’ˆç®—æœ¯å’Œç›´æ¥å†…å­˜æ“ä½œ</h4>
<p>C/C++å¯ä»¥é€šè¿‡æ“ä½œæŒ‡é’ˆè¿›ä¸€æ­¥æ“ä½œå†…å­˜ï¼Œè¿™æ˜¯å®ƒå¼ºå¤§ä½†ä¹Ÿå±é™©çš„åœ°æ–¹ã€‚ä½†æ˜¯è€ƒè™‘åˆ°Javaæ˜¯ç«™åœ¨C/CPPä¹‹ä¸Šçš„è¯­è¨€ï¼Œå®ƒå®Œå…¨æ‘ˆå¼ƒäº†æŒ‡é’ˆç®—æœ¯å’Œç›´æ¥å†…å­˜æ“ä½œï¼Œ</p>
<p>é€šè¿‡ç¦æ­¢è¿™äº›æ“ä½œï¼ŒJavaä¿è¯äº†ï¼š</p>
<ul>
<li><strong>å†…å­˜å®‰å…¨</strong>ï¼šç¨‹åºä¸ä¼šæ„å¤–è¦†ç›–éšæœºå†…å­˜ï¼Œå¯¼è‡´å´©æºƒã€‚</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šé¿å…äº†å› ç±»å‹è½¬æ¢é”™è¯¯å¯¼è‡´çš„æ•°æ®æŸåã€‚</li>
<li><strong>å¯ç§»æ¤æ€§</strong>ï¼šJavaç¨‹åºä¸ä¾èµ–ç‰¹å®šç¡¬ä»¶çš„å†…å­˜å¸ƒå±€ã€‚</li>
</ul>
<h3 data-id="heading-5">å››ã€CPPä¸Javaåœ¨å‡½æ•°å‚æ•°ä¼ é€’çš„åŒºåˆ«ï¼ˆå¼•ç”¨ä¼ é€’ï¼‰</h3>
<p>CPPå¯ä»¥åœ¨æ–¹æ³•çš„å‚æ•°åˆ—è¡¨ä¸ŠæŒ‡å®šåˆ°åº•æ˜¯ä¼ å‚æ•°çš„æ•°å€¼è¿˜æ˜¯å¼•ç”¨ï¼Œä½†å¯¹äºJavaæ¥è¯´ï¼š
<strong>Javaé‡Œå¯¹äºæ–¹æ³•ä¼ å…¥çš„æ˜¯å¯¹è±¡å°±æ˜¯å¯¹è±¡å¼•ç”¨çš„å‰¯æœ¬ï¼Œå¦‚æœæ˜¯åŸºæœ¬ç±»å‹å°±æ˜¯å€¼çš„å‰¯æœ¬ï¼Œä¸ä¼šå½±å“æœ¬èº«ã€‚</strong></p>
<p>æ¸©é¦¨æç¤ºï¼š1ã€Stringè™½ç„¶æ˜¯æ•°ç»„ï¼Œä½†æ˜¯ç”±äºStringçš„finalå±æ€§ï¼Œä¼ å…¥æ–¹æ³•åï¼Œè¿˜æ˜¯ä¸èƒ½å¯¹å…¶æœ¬èº«è¿›è¡Œä¿®æ”¹ï¼ˆè‹¥éœ€è¦ä¿®æ”¹å¯ä»¥ä½¿ç”¨StringBuilderå¯¹è±¡ï¼‰ï¼›2ã€æ•°ç»„ä¹Ÿæ˜¯å¯¹è±¡å“¦ï¼ˆè¿™ä¸ªç¡®å®æ˜¯åŸºæœ¬å¸¸è¯†ï¼Œä½†æ˜¯æˆ‘åˆšå­¦Javaæ—¶è€æ˜¯è§‰å¾—int [] arræ˜¯åŸºæœ¬æ•°æ®ç±»å‹hhhï¼Œæ‰€ä»¥åœ¨è¿™å„¿æé†’ä¸‹åˆšå­¦Javaçš„å°ç™½ï¼‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[BLE é€šä¿¡è®¾è®¡ä¸æ¶æ„è½åœ°]]></title>    <link>https://juejin.cn/post/7575006095389573129</link>    <guid>https://juejin.cn/post/7575006095389573129</guid>    <pubDate>2025-11-22T04:35:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575006095389573129" data-draft-id="7575017581037322278" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="BLE é€šä¿¡è®¾è®¡ä¸æ¶æ„è½åœ°"/> <meta itemprop="keywords" content="Flutter,Android"/> <meta itemprop="datePublished" content="2025-11-22T04:35:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜Ÿæœˆèµ¶è·¯äºº"/> <meta itemprop="url" content="https://juejin.cn/user/3491704661625079"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            BLE é€šä¿¡è®¾è®¡ä¸æ¶æ„è½åœ°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3491704661625079/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜Ÿæœˆèµ¶è·¯äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T04:35:40.000Z" title="Sat Nov 22 2025 04:35:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>é¢å‘ä½åŠŸè€—ã€ç¨³å®šå¯é  BLE é€šä¿¡æ–¹æ¡ˆï¼Œä»è½¯ä»¶è®¾è®¡ç›®æ ‡ã€æ–¹æ¡ˆé€‰å‹åˆ°åˆ†å±‚æ¶æ„ä¸å…³é”®æµç¨‹ï¼Œé…å¥—æµç¨‹å›¾ä¸å®ç°è¦ç‚¹ï¼Œç›´è¾¾é‡äº§è´¨é‡ä¸ç ”å‘æ•ˆç‡ã€‚</p>
</blockquote>
<h2 data-id="heading-0">èƒŒæ™¯ä¸ç›®æ ‡</h2>
<ul>
<li>èƒŒæ™¯ï¼šç”µæœºæ§åˆ¶ã€çŠ¶æ€é‡‡é›†ã€æ•…éšœè¯Šæ–­ä¸ OTA å‡çº§éƒ½ä¾èµ–ç§»åŠ¨ç«¯ä¸è®¾å¤‡ç«¯çš„ä½å»¶è¿Ÿã€ä½åŠŸè€—ã€ç¨³å®šè¿æ¥ã€‚</li>
<li>ç›®æ ‡ï¼šä½åŠŸè€—ã€å¿«é€Ÿè¿æ¥ã€é«˜å¯é ä¼ è¾“ã€åº”ç”¨å±‚å®‰å…¨ã€å¯æ‰©å±•åè®®ã€æ˜“ç»´æŠ¤ SDKã€‚</li>
</ul>
<h2 data-id="heading-1">æ¶æ„æ€»è§ˆ</h2>
<ul>
<li>åˆ†å±‚æ¸…æ™°ï¼šUI â†’ SDK â†’ åè®® â†’ BLE å®¢æˆ·ç«¯ â†’ è®¾å¤‡å›ºä»¶ â†’ æœåŠ¡/çŠ¶æ€æœº</li>
<li>æ§åˆ¶ä¸çŠ¶æ€åˆ†ç¦»ï¼šæ§åˆ¶é€šé“ä½å»¶è¿Ÿï¼ŒçŠ¶æ€é€šé“ç¨³å®šæµå¼ï¼›OTA ç‹¬ç«‹ä¸é˜»å¡æ§åˆ¶</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77ed4d399aa24dd08f095b968ed072e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pif5pyI6LW26Lev5Lq6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764393562&amp;x-signature=VpauAQ5YtF%2B5M1sk9dwPadNHipY%3D" alt="æˆªå±2025-11-22 12.45.56.png" loading="lazy"/></p>
<h2 data-id="heading-2">æ–¹æ¡ˆé€‰å‹</h2>
<ul>
<li>ä¼ è¾“ï¼šåŸºäº GATTï¼›å‘½ä»¤èµ°å†™å…¥ç‰¹å¾ï¼Œè®¾å¤‡é€šè¿‡é€šçŸ¥ç‰¹å¾ä¸Šè¡Œå“åº”ä¸äº‹ä»¶ã€‚</li>
<li>ç¼–ç ï¼šé‡‡ç”¨èµ·æ­¢åˆ†éš”ç¬¦ä¸è½¬ä¹‰æœºåˆ¶ï¼Œé…åˆ XOR æ ¡éªŒä¿è¯å¸§è¾¹ç•Œä¸æ•°æ®ä¸€è‡´æ€§ï¼›å¸§ç»“æ„ä¸º <code>7E | cmd(1) | len(2) | payload | xor(1) | 7E</code>ã€‚</li>
<li>å‘½ä»¤é›†ï¼šåŒ…å«åº”ç”¨ç‰ˆæœ¬æŸ¥è¯¢ã€åº”ç”¨æ§åˆ¶è®¾ç½®ã€ä»ªè¡¨ä¿¡æ¯ä¸ŠæŠ¥ã€æ§åˆ¶å“åº”ç­‰ï¼ŒåŒºåˆ†æŸ¥è¯¢å‹ä¸è®¾ç½®å‹ã€‚</li>
<li>è§£æï¼šå…ˆè¿›è¡ŒåŒ…æ ¼å¼ä¸æ ¡éªŒéªŒè¯ï¼Œå†æŒ‰åè®®æ©ç è§£æä¸ºç»“æ„åŒ–çš„çŠ¶æ€/å“åº”æ¨¡å‹ã€‚</li>
<li>MTUï¼šä¼˜å…ˆåå•†æ›´å¤§ MTU å€¼ï¼Œå†™å…¥æ ¹æ®åå•†ç»“æœè‡ªåŠ¨é€‰æ‹©çŸ­å†™æˆ–é•¿å†™ä»¥æå‡ååã€‚</li>
<li>æœåŠ¡ä¸ç‰¹å¾ï¼šå®šä¹‰ç¨³å®šçš„æœåŠ¡ UUID ä¸å†™/é€šçŸ¥ç‰¹å¾ UUIDï¼›æ‰«æé˜¶æ®µå¯ç»“åˆå¸¸è§æœåŠ¡è¿›è¡Œè¾…åŠ©è¿‡æ»¤æå‡å‘ç°æˆåŠŸç‡ã€‚</li>
</ul>
<h2 data-id="heading-3">è¿æ¥ç”Ÿå‘½å‘¨æœŸ</h2>
<ul>
<li>ç§’çº§å‘ç°ã€è‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿå·²è¿/å·²é…å¯¹è®¾å¤‡ï¼›MTU åå•†åå¼€å¯ Notify å†å‘æŒ‡ä»¤</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TB
  A[æ‰«æå¹¿æ’­] --&gt; B{è¿‡æ»¤è®¾å¤‡}
  B --&gt;|åŒ¹é…UUID/å‚å•†æ•°æ®| C[å»ºç«‹GATTè¿æ¥]
  C --&gt; D[MTUåå•†]
  D --&gt; E[è®¢é˜…Notifyç‰¹å¾]
  E --&gt; F[å¼€å¯é€šçŸ¥]
  F --&gt; G[æ­£å¸¸é€šä¿¡]
  H --&gt; I{æ–­é“¾?}
  I --&gt;|æ˜¯| J[é€€å›æ‰«æ/ä¼˜å…ˆé‡è¿]
  I --&gt;|å¦| H
</code></pre>
<h2 data-id="heading-4">æŒ‡ä»¤ä¸åº”ç­”</h2>
<ul>
<li>ä¸Šå±‚é‡‡ç”¨ç»Ÿä¸€å‘½ä»¤æ¨¡å‹æ„å»ºè¯·æ±‚ï¼Œåè®®å±‚è´Ÿè´£ç»„å¸§ä¸å‘é€ï¼›è®¾å¤‡é€šè¿‡é€šçŸ¥è¿”å›å“åº”æˆ–çŠ¶æ€ï¼Œåè®®å¤„ç†å™¨å®ŒæˆéªŒè¯ä¸è§£æï¼Œä¸Šå±‚æŒ‰è¯·æ±‚-å“åº”æ¨¡å¼åŒ¹é…å›è°ƒã€‚</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
  participant App
  participant SDK
  participant Device

  App-&gt;&gt;SDK: send(Command)
  SDK-&gt;&gt;SDK: ç»„å¸§(7E/è½¬ä¹‰/XOR)
  SDK-&gt;&gt;Device: å†™å…¥æ•°æ®åŒ…
  Device--&gt;&gt;SDK: é€šçŸ¥ä¸Šè¡Œæ•°æ®åŒ…
  SDK--&gt;&gt;SDK: éªŒè¯/è§£æä¸ºæ¨¡å‹
  SDK--&gt;&gt;App: å›è°ƒ(å“åº”/çŠ¶æ€)
</code></pre>
<h2 data-id="heading-5">æœåŠ¡ä¸ç‰¹å¾</h2>
<ul>
<li>æœåŠ¡ä¸ç‰¹å¾ä¿æŒç¨³å®šå‘½åï¼Œä¾¿äºè·¨ç«¯åä½œä¸ç»´æŠ¤ï¼›æ‰«æé˜¶æ®µå¯ç»“åˆé€šç”¨æœåŠ¡è¿‡æ»¤ä»¥æå‡å‘ç°æ•ˆç‡ã€‚</li>
<li>å†™å…¥ç­–ç•¥æ ¹æ® MTU åå•†ç»“æœé€‰æ‹©çŸ­å†™/é•¿å†™ï¼Œå…¼é¡¾æ•ˆç‡ä¸å…¼å®¹æ€§ã€‚</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
  CtrlSvc[æ§åˆ¶æœåŠ¡ 0xFFF0] --&gt; cmd_write[cmd_write: Write NR]
  CtrlSvc --&gt; cmd_notify[cmd_notify: Notify]
  StateSvc[çŠ¶æ€æœåŠ¡ 0xFFF1] --&gt; state_notify[state_notify: Notify]
  OTASvc[OTAæœåŠ¡ 0xFFF2] --&gt; ota_write[ota_write: Write]
  OTASvc --&gt; ota_notify[ota_notify: Notify]
</code></pre>
<h2 data-id="heading-6">åè®®å¸§è®¾è®¡</h2>
<ul>
<li>ç»“æ„ï¼š<code>7E | cmd(1) | len(2,BE) | payload(N) | xor(1) | 7E</code>ã€‚</li>
<li>è½¬ä¹‰ï¼šå¯¹åˆ†éš”ç¬¦ä¸è½¬ä¹‰å­—ç¬¦é‡‡ç”¨åŒå­—èŠ‚è½¬ä¹‰ï¼Œä¿è¯å¸§è¾¹ç•Œä¸è¢«è¯¯åˆ¤ã€‚</li>
<li>æ ¡éªŒï¼šä½¿ç”¨ XOR æ ¡éªŒè¦†ç›–å‘½ä»¤ã€é•¿åº¦ä¸è½½è·ï¼Œå¿«é€ŸéªŒè¯æ•°æ®ä¸€è‡´æ€§ã€‚</li>
<li>éªŒè¯ï¼šå…ˆæ ¡éªŒèµ·æ­¢ä¸æœ€å°é•¿åº¦ï¼Œå†é‡ç®—æ ¡éªŒå¯¹æ¯”ï¼Œå¤±è´¥ç«‹å³ä¸¢å¼ƒå¹¶ä¸ŠæŠ¥é”™è¯¯ã€‚</li>
</ul>
<h2 data-id="heading-7">å®‰å…¨ç­–ç•¥ï¼ˆå¯é€‰ï¼‰</h2>
<ul>
<li>åŸºäºæ˜æ–‡å¸§ + æ ¡éªŒçš„åŸºæœ¬å¯é æ€§æ–¹æ¡ˆï¼›å¦‚éœ€åŠ å¼ºå®‰å…¨ï¼Œå¯åœ¨è½½è·å±‚åŠ å…¥ç­¾åä¸æ—¶é—´æˆ³ï¼Œæˆ–åœ¨è¿æ¥å»ºç«‹ååå•†ä¼šè¯å¯†é’¥å¹¶è¿›è¡Œè½½è·åŠ å¯†ä¸è®¤è¯ã€‚</li>
</ul>
<h2 data-id="heading-8">OTA å‡çº§</h2>
<ul>
<li>ä½¿ç”¨é•¿å†™æ”¯æŒå¤§æ•°æ®åŒ…ä¼ è¾“ï¼Œç»“åˆ MTU åå•†æå‡ååï¼›åˆ†ç‰‡ä¸æ–­ç‚¹ç»­ä¼ ç”±ä¸Šå±‚æ§åˆ¶ï¼Œå‡çº§æµç¨‹ä¸æ§åˆ¶é€šé“éš”ç¦»ï¼Œä¿éšœå¸¸è§„é€šä¿¡ä¸å—å½±å“ã€‚</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
  Start[å¼€å§‹å‡çº§] --&gt; Prepare[æ ¡éªŒåŒ…/ç­¾å/ç‰ˆæœ¬]
  Prepare --&gt; Switch[è¿›å…¥DFUæ¨¡å¼/æš‚åœæ§åˆ¶é€šé“]
  Switch --&gt; Chunk[åˆ†ç‰‡å‘é€]
  Chunk --&gt; Ack{åº”ç­”/æ ¡éªŒé€šè¿‡?}
  Ack --&gt;|å¦| Retry[é‡ä¼ /æ–­ç‚¹ç»­ä¼ ]
  Ack --&gt;|æ˜¯| Commit[æäº¤/åº”ç”¨æ–°å›ºä»¶]
  Commit --&gt; Reboot[é‡å¯/å›åˆ°æ­£å¸¸æ¨¡å¼]
  Reboot --&gt; End[å‡çº§å®Œæˆ]
</code></pre>
<h2 data-id="heading-9">ä½åŠŸè€—ç­–ç•¥</h2>
<ul>
<li>å¹¿æ’­ï¼šæ™®é€š 300â€“500msï¼›å¾…æœº 800â€“1200msï¼›äº‹ä»¶è§¦å‘çŸ­æ—¶æå‡</li>
<li>è¿æ¥ï¼š<code>interval=30â€“50ms</code>ã€<code>slaveLatency=4â€“10</code>ã€<code>timeout=4â€“6s</code></li>
<li>MTUï¼šåå•†è‡³ 185ï¼Œåˆ†ç‰‡éš ATT ä¸æœºå‹å·®å¼‚è‡ªé€‚åº”</li>
<li>èŠ‚æµï¼šçŠ¶æ€åˆå¹¶ä¸èŠ‚æµï¼ˆ100â€“200msï¼‰ï¼›å°åŒ…åˆå¸§å‡å°‘å”¤é†’</li>
</ul>
<h2 data-id="heading-10">å…³é”®å®ç°è¦ç‚¹</h2>
<ul>
<li>é‡ä¼ çª—å£ï¼šå¤§å° 3â€“5ï¼›è¶…æ—¶ 300â€“500msï¼›æŒ‡æ•°é€€é¿é˜²æŠ–</li>
<li>æŒ‡ä»¤æ¨¡å‹ï¼šåŒºåˆ†å¿…ç­”æ§åˆ¶ä¸å¯è·³è¿‡çŠ¶æ€ï¼›æ˜ç¡®é‡è¯•ä¸æ—¶é™</li>
<li>çº¿ç¨‹æ¨¡å‹ï¼šç§»åŠ¨ç«¯ BLE å›è°ƒçº¿ç¨‹ä¸ä¸šåŠ¡çº¿ç¨‹è§£è€¦ï¼›è®¾å¤‡ä¾§äº‹ä»¶ä¸æ§åˆ¶å¾ªç¯åˆ†ç¦»</li>
<li>æŒ‡æ ‡ä¸æ—¥å¿—ï¼šè¿æ¥æ—¶å»¶ã€MTUã€ååã€ä¸¢åŒ…ã€é‡è¯•ã€æ¡æ‰‹è€—æ—¶ã€å¤±è´¥åŸå› </li>
</ul>
<h2 data-id="heading-11">è°ƒè¯•ä¸è°ƒä¼˜</h2>
<ul>
<li>ååå‹æµ‹ï¼šä¸åŒ MTU ä¸‹ <code>pps/é‡è¯•ç‡</code> å¯¹æ¯”ï¼›å¯»æ‰¾æœ€ä½³åˆ†ç‰‡</li>
<li>ç¨³å®šæ€§ï¼šé«˜å¹²æ‰°åœºæ™¯ï¼ˆç”µæœº PWM/é‡‘å±ç¯å¢ƒï¼‰é‡è¿æˆåŠŸç‡ä¸è€—æ—¶</li>
<li>å…¼å®¹æ€§ï¼šiOS/Android æ ˆå·®å¼‚ï¼ˆå¦‚ Android GATT 133ï¼‰ï¼›è¿æ¥åå¼ºåˆ¶ <code>discoverServices</code></li>
<li>ä½åŠŸè€—éªŒè¯ï¼šè®°å½•ç”µæµæ›²çº¿ï¼Œé‡åŒ–å‚æ•°è°ƒæ•´å½±å“</li>
<li>OTA å¯é æ€§ï¼šæ–­ç”µ/æ–­é“¾æ¢å¤ã€åŒé•œåƒå›æ»šã€è¿›åº¦ä¸€è‡´æ€§</li>
</ul>
<h2 data-id="heading-12">å¸¸è§å‘ä¸è§„é¿</h2>
<ul>
<li>iOS åå°ï¼šåå°æ¨¡å¼å£°æ˜ä¸é€Ÿç‡æ§åˆ¶ï¼›é¿å…ç³»ç»ŸæŒ‚èµ·</li>
<li>Android ç¼“å­˜ï¼šç‰¹å¾ç¼“å­˜å¯èƒ½å†™æ—§ï¼›è¿æ¥åé‡æ–° <code>discoverServices</code></li>
<li>MTU åå•†ï¼šå¿…é¡»åœ¨è¿æ¥æˆåŠŸåï¼›è¿”å›å€¼å¯èƒ½ä¸ç­‰äºå®é™…å¯ç”¨</li>
<li>Notify è®¢é˜…ï¼šå…ˆè®¢é˜…å†å‘æŒ‡ä»¤ï¼›é¿å…æ—©æœŸå“åº”ä¸¢å¤±</li>
<li>å¤šè¿æ¥ï¼šä¸€è½¦ä¸€è¿ï¼›è®¾å¤‡ä¾§æ‹’ç»ç¬¬äºŒè¿æ¥è¯·æ±‚</li>
</ul>
<h2 data-id="heading-13">å®ç°æ€è·¯è¦ç‚¹</h2>
<ul>
<li>å‘½ä»¤æ¨¡å‹ç»Ÿä¸€ã€ç»„å¸§è§„èŒƒåŒ–ã€è§£æç»“æ„åŒ–ï¼Œæ–¹ä¾¿æ‰©å±•ä¸å›å½’æµ‹è¯•ã€‚</li>
<li>è¯·æ±‚-å“åº”ä¸¥æ ¼æ—¶åºï¼šå…ˆè®¢é˜…å“åº”æµï¼Œå†å‘é€è¯·æ±‚ï¼Œé¿å…æ—©æœŸå“åº”ä¸¢å¤±ã€‚</li>
<li>è®¾å¤‡æ•°æ®æµæŒ‰è®¾å¤‡ç»´åº¦éš”ç¦»ï¼Œæ”¯æŒå¤šè®¾å¤‡å¹¶å‘ç®¡ç†ä¸è®¢é˜…æ¸…ç†ã€‚</li>
<li>æ—¥å¿—ä¸æŒ‡æ ‡è´¯ç©¿é“¾è·¯ï¼šè¿æ¥ä¸åå•†ã€ååä¸ä¸¢åŒ…ã€è§£æä¸é”™è¯¯ï¼Œè¾…åŠ©å®šä½ä¸è°ƒä¼˜ã€‚</li>
</ul>
<h2 data-id="heading-14">ç»“è¯­</h2>
<ul>
<li>æ ¸å¿ƒåœ¨äºç¨³å®šã€å¯é ä¸å¯ç»´æŠ¤ã€‚å›´ç»• GATT ä¼ è¾“ã€ç¨³å¥çš„å¸§/è½¬ä¹‰/æ ¡éªŒä¸æ¸…æ™°çš„è¯·æ±‚-å“åº”æ¨¡å¼ï¼Œæ—¢ä¿è¯ eBike åœºæ™¯çš„ä½åŠŸè€—ä¸é«˜å¯é ï¼Œåˆä¸ºåç»­å®‰å…¨ä¸åŠŸèƒ½æ‰©å±•ç•™è¶³ç©ºé—´ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter å®æˆ˜ï¼šä¸ºå¼€æºè®°è´¦ App å®ç°ä¼˜é›…çš„æš—é»‘æ¨¡å¼ï¼ˆDesign Token + åŠ¨æ€ä¸»é¢˜ï¼‰]]></title>    <link>https://juejin.cn/post/7575047994681409587</link>    <guid>https://juejin.cn/post/7575047994681409587</guid>    <pubDate>2025-11-22T03:39:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575047994681409587" data-draft-id="7575031395861954606" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter å®æˆ˜ï¼šä¸ºå¼€æºè®°è´¦ App å®ç°ä¼˜é›…çš„æš—é»‘æ¨¡å¼ï¼ˆDesign Token + åŠ¨æ€ä¸»é¢˜ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-22T03:39:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å…¨æ ˆé˜¿ç¬‘"/> <meta itemprop="url" content="https://juejin.cn/user/2629687543598200"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter å®æˆ˜ï¼šä¸ºå¼€æºè®°è´¦ App å®ç°ä¼˜é›…çš„æš—é»‘æ¨¡å¼ï¼ˆDesign Token + åŠ¨æ€ä¸»é¢˜ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2629687543598200/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å…¨æ ˆé˜¿ç¬‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T03:39:57.000Z" title="Sat Nov 22 2025 03:39:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘ä¸ºæˆ‘çš„å¼€æºè®°è´¦ App <strong>BeeCount èœœèœ‚è®°è´¦</strong> å®ç°äº†æš—é»‘æ¨¡å¼ï¼Œè¸©äº†ä¸å°‘å‘ï¼Œä¹Ÿæ€»ç»“äº†ä¸€äº›ç»éªŒã€‚è¿™ç¯‡æ–‡ç« ä¼šè¯¦ç»†ä»‹ç»æ•´ä¸ªæŠ€æœ¯æ–¹æ¡ˆå’Œå®ç°è¿‡ç¨‹ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰å¸®åŠ©ã€‚</p>
<h2 data-id="heading-0">æ•ˆæœé¢„è§ˆ</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/658b1a6c6cc84142a18a332bf9fe1083~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWo5qCI6Zi_56yR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764387597&amp;x-signature=b6%2FqlRbiSLdECrbuJJeDS1dR7KA%3D" alt="1.jpg" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/347a91474a024be5ab6b6173cbee9c07~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWo5qCI6Zi_56yR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764387597&amp;x-signature=wL0xB%2Fjb%2FIAVCZgavkzDatqtybY%3D" alt="2.jpg" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96fede5bf2ff4191b5865c5c186dfb9b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWo5qCI6Zi_56yR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764387597&amp;x-signature=cbj4VI654C8oiqYhwsm8MlFLkdk%3D" alt="3.jpg" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79b1c4999b8f451ebf7e2a8110340301~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWo5qCI6Zi_56yR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764387597&amp;x-signature=%2FBir%2B%2Bovdjla2d7AOFxZT%2BmBIhY%3D" alt="4.jpg" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee2186803b624a02b5e27149e275c22b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWo5qCI6Zi_56yR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764387597&amp;x-signature=nqilFMljrb2M%2FRNnGaAHi1ffTlU%3D" alt="5.jpg" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8299ea97865944578bb5724e19f6d9a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWo5qCI6Zi_56yR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764387597&amp;x-signature=mNeSEkUU2XjM39ZiqOMCbPwsHZY%3D" alt="6.jpg" loading="lazy"/></p>
<p>æš—é»‘æ¨¡å¼é‡‡ç”¨ã€Œ<strong>çº¯é»‘èƒŒæ™¯ + ä¸»é¢˜è‰²è¾¹æ¡†</strong>ã€çš„è®¾è®¡æ–¹æ¡ˆï¼š</p>
<ul>
<li>çº¯é»‘èƒŒæ™¯ï¼šOLED å‹å¥½ï¼Œå¤œé—´æŠ¤çœ¼</li>
<li>ä¸»é¢˜è‰²è¾¹æ¡†ï¼šä¿ç•™ä¸ªæ€§åŒ–ï¼Œå±‚æ¬¡åˆ†æ˜</li>
<li>å…¨å±€é€‚é…ï¼šæ‰€æœ‰é¡µé¢ã€ç»„ä»¶ç»Ÿä¸€é£æ ¼</li>
</ul>
<hr/>
<h2 data-id="heading-1">æŠ€æœ¯æ–¹æ¡ˆæ¦‚è¿°</h2>
<p>åœ¨å¼€å§‹å†™ä»£ç ä¹‹å‰ï¼Œæˆ‘å…ˆæ¢³ç†äº†æ•´ä½“çš„æŠ€æœ¯æ–¹æ¡ˆï¼š</p>
<ol>
<li><strong>Design Token ç³»ç»Ÿ</strong>ï¼šç»Ÿä¸€ç®¡ç†æ‰€æœ‰é¢œè‰²ï¼Œä¸€å¤„ä¿®æ”¹å…¨å±€ç”Ÿæ•ˆ</li>
<li><strong>ä¸»é¢˜çŠ¶æ€ç®¡ç†</strong>ï¼šä½¿ç”¨ Riverpod ç®¡ç†ä¸»é¢˜æ¨¡å¼ï¼Œæ”¯æŒæŒä¹…åŒ–</li>
<li><strong>MaterialApp é…ç½®</strong>ï¼šé…ç½® theme å’Œ darkThemeï¼Œæ”¯æŒè·Ÿéšç³»ç»Ÿåˆ‡æ¢</li>
<li><strong>ç»„ä»¶çº§é€‚é…</strong>ï¼šé’ˆå¯¹ç‰¹æ®Šç»„ä»¶ï¼ˆå›¾è¡¨ã€å¼¹çª—ç­‰ï¼‰å•ç‹¬å¤„ç†</li>
</ol>
<p>ä¸‹é¢é€ä¸€ä»‹ç»ã€‚</p>
<hr/>
<h2 data-id="heading-2">1. Design Token ç³»ç»Ÿ</h2>
<h3 data-id="heading-3">ä¸ºä»€ä¹ˆéœ€è¦ Design Tokenï¼Ÿ</h3>
<p>é¡¹ç›®åˆæœŸï¼Œé¢œè‰²éƒ½æ˜¯ç¡¬ç¼–ç çš„ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// åˆ°å¤„éƒ½æ˜¯è¿™ç§ä»£ç </span>
Text(<span class="hljs-string">'Hello'</span>, style: TextStyle(color: Colors.black87))
Container(color: Colors.white)
</code></pre>
<p>è¿™æ ·åšçš„é—®é¢˜ï¼š</p>
<ul>
<li>è¦æ”¯æŒæš—é»‘æ¨¡å¼ï¼Œå¾—å…¨å±€æœç´¢æ›¿æ¢</li>
<li>é¢œè‰²å€¼ä¸ç»Ÿä¸€ï¼ŒåŒæ ·çš„ã€Œæ¬¡è¦æ–‡å­—ã€å¯èƒ½å†™æˆ <code>black54</code>ã€<code>grey</code>ã€<code>Colors.grey.shade600</code></li>
<li>ç»´æŠ¤å›°éš¾ï¼Œæ”¹ä¸€ä¸ªé¢œè‰²è¦æ”¹ N ä¸ªåœ°æ–¹</li>
</ul>
<p>æ‰€ä»¥æˆ‘å€Ÿé‰´äº† Web å‰ç«¯çš„ <strong>CSS Variables</strong> æ€è·¯ï¼Œå»ºç«‹äº†ä¸€å¥— Design Token ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-4">æ ¸å¿ƒå®ç°</h3>
<p><strong>æ–‡ä»¶ï¼š<code>lib/styles/tokens.dart</code></strong></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;

<span class="hljs-comment">/// <span class="markdown">Design Token ç³»ç»Ÿ</span></span>
<span class="hljs-comment">/// <span class="markdown">ç»Ÿä¸€ç®¡ç†æ‰€æœ‰é¢œè‰²ï¼Œè‡ªåŠ¨é€‚é…äº®è‰²/æš—é»‘æ¨¡å¼</span></span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BeeTokens</span> </span>{

  <span class="hljs-comment">// ========== å·¥å…·æ–¹æ³• ==========</span>

  <span class="hljs-comment">/// <span class="markdown">åˆ¤æ–­å½“å‰æ˜¯å¦æš—é»‘æ¨¡å¼</span></span>
  <span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> isDark(BuildContext context) {
    <span class="hljs-keyword">return</span> Theme.of(context).brightness == Brightness.dark;
  }

  <span class="hljs-comment">/// <span class="markdown">è·å–ä¸»é¢˜è‰²</span></span>
  <span class="hljs-keyword">static</span> Color primary(BuildContext context) {
    <span class="hljs-keyword">return</span> Theme.of(context).primaryColor;
  }

  <span class="hljs-comment">// ========== èƒŒæ™¯è‰² ==========</span>

  <span class="hljs-comment">/// <span class="markdown">é¡µé¢èƒŒæ™¯è‰²</span></span>
  <span class="hljs-keyword">static</span> Color scaffoldBackground(BuildContext context) {
    <span class="hljs-keyword">return</span> isDark(context) ? Colors.black : <span class="hljs-keyword">const</span> Color(<span class="hljs-number">0xFFF5F5F5</span>);
  }

  <span class="hljs-comment">/// <span class="markdown">å¡ç‰‡/è¡¨é¢èƒŒæ™¯è‰²</span></span>
  <span class="hljs-keyword">static</span> Color surface(BuildContext context) {
    <span class="hljs-keyword">return</span> isDark(context) ? Colors.black : Colors.white;
  }

  <span class="hljs-comment">/// <span class="markdown">æå‡çš„è¡¨é¢ï¼ˆå¦‚å¼¹çª—ã€ä¸‹æ‹‰èœå•ï¼‰</span></span>
  <span class="hljs-keyword">static</span> Color surfaceElevated(BuildContext context) {
    <span class="hljs-keyword">return</span> isDark(context) ? <span class="hljs-keyword">const</span> Color(<span class="hljs-number">0xFF1C1C1E</span>) : Colors.white;
  }

  <span class="hljs-comment">/// <span class="markdown">Header èƒŒæ™¯è‰²</span></span>
  <span class="hljs-keyword">static</span> Color surfaceHeader(BuildContext context) {
    <span class="hljs-keyword">return</span> isDark(context) ? Colors.black : Colors.white;
  }

  <span class="hljs-comment">// ========== æ–‡å­—é¢œè‰² ==========</span>

  <span class="hljs-comment">/// <span class="markdown">ä¸»è¦æ–‡å­—ï¼ˆæ ‡é¢˜ã€æ­£æ–‡ï¼‰</span></span>
  <span class="hljs-keyword">static</span> Color textPrimary(BuildContext context) {
    <span class="hljs-keyword">return</span> isDark(context) ? Colors.white : Colors.black87;
  }

  <span class="hljs-comment">/// <span class="markdown">æ¬¡è¦æ–‡å­—ï¼ˆè¯´æ˜æ–‡å­—ã€å‰¯æ ‡é¢˜ï¼‰</span></span>
  <span class="hljs-keyword">static</span> Color textSecondary(BuildContext context) {
    <span class="hljs-keyword">return</span> isDark(context) ? Colors.white70 : Colors.black54;
  }

  <span class="hljs-comment">/// <span class="markdown">æç¤ºæ–‡å­—ï¼ˆplaceholderã€ç¦ç”¨çŠ¶æ€ï¼‰</span></span>
  <span class="hljs-keyword">static</span> Color textTertiary(BuildContext context) {
    <span class="hljs-keyword">return</span> isDark(context) ? Colors.white38 : Colors.black38;
  }

  <span class="hljs-comment">// ========== å›¾æ ‡é¢œè‰² ==========</span>

  <span class="hljs-keyword">static</span> Color iconPrimary(BuildContext context) {
    <span class="hljs-keyword">return</span> isDark(context) ? Colors.white : Colors.black87;
  }

  <span class="hljs-keyword">static</span> Color iconSecondary(BuildContext context) {
    <span class="hljs-keyword">return</span> isDark(context) ? Colors.white70 : Colors.black54;
  }

  <span class="hljs-keyword">static</span> Color iconTertiary(BuildContext context) {
    <span class="hljs-keyword">return</span> isDark(context) ? Colors.white38 : Colors.black38;
  }

  <span class="hljs-comment">// ========== è¾¹æ¡†å’Œåˆ†å‰²çº¿ ==========</span>

  <span class="hljs-comment">/// <span class="markdown">æ™®é€šè¾¹æ¡†</span></span>
  <span class="hljs-keyword">static</span> Color border(BuildContext context) {
    <span class="hljs-keyword">if</span> (isDark(context)) {
      <span class="hljs-keyword">return</span> Theme.of(context).primaryColor.withOpacity(<span class="hljs-number">0.3</span>);
    }
    <span class="hljs-keyword">return</span> Colors.grey.shade200;
  }

  <span class="hljs-comment">/// <span class="markdown">åˆ†å‰²çº¿</span></span>
  <span class="hljs-keyword">static</span> Color divider(BuildContext context) {
    <span class="hljs-keyword">return</span> isDark(context) ? Colors.white12 : Colors.grey.shade200;
  }

  <span class="hljs-comment">/// <span class="markdown">ä¸»é¢˜è‰²è¾¹æ¡†ï¼ˆç”¨äºå¼ºè°ƒï¼‰</span></span>
  <span class="hljs-keyword">static</span> Color borderThemed(BuildContext context) {
    <span class="hljs-keyword">return</span> Theme.of(context).primaryColor.withOpacity(<span class="hljs-number">0.3</span>);
  }

  <span class="hljs-comment">// ========== è¯­ä¹‰é¢œè‰² ==========</span>

  <span class="hljs-comment">/// <span class="markdown">æˆåŠŸè‰²ï¼ˆæ”¶å…¥ã€æ­£æ•°ï¼‰</span></span>
  <span class="hljs-keyword">static</span> Color success(BuildContext context) {
    <span class="hljs-keyword">return</span> isDark(context) ? <span class="hljs-keyword">const</span> Color(<span class="hljs-number">0xFF4CD964</span>) : <span class="hljs-keyword">const</span> Color(<span class="hljs-number">0xFF34C759</span>);
  }

  <span class="hljs-comment">/// <span class="markdown">é”™è¯¯è‰²ï¼ˆæ”¯å‡ºã€è´Ÿæ•°ã€é”™è¯¯æç¤ºï¼‰</span></span>
  <span class="hljs-keyword">static</span> Color error(BuildContext context) {
    <span class="hljs-keyword">return</span> isDark(context) ? <span class="hljs-keyword">const</span> Color(<span class="hljs-number">0xFFFF6B6B</span>) : <span class="hljs-keyword">const</span> Color(<span class="hljs-number">0xFFFF3B30</span>);
  }

  <span class="hljs-comment">/// <span class="markdown">è­¦å‘Šè‰²</span></span>
  <span class="hljs-keyword">static</span> Color warning(BuildContext context) {
    <span class="hljs-keyword">return</span> isDark(context) ? <span class="hljs-keyword">const</span> Color(<span class="hljs-number">0xFFFFD60A</span>) : <span class="hljs-keyword">const</span> Color(<span class="hljs-number">0xFFFF9500</span>);
  }
}
</code></pre>
<h3 data-id="heading-5">ä½¿ç”¨æ–¹å¼</h3>
<p>æ›¿æ¢åŸæ¥çš„ç¡¬ç¼–ç é¢œè‰²ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// âŒ ä¹‹å‰</span>
Container(
  color: Colors.white,
  child: Text(
    <span class="hljs-string">'Hello'</span>,
    style: TextStyle(color: Colors.black87),
  ),
)

<span class="hljs-comment">// âœ… ä¹‹å</span>
Container(
  color: BeeTokens.surface(context),
  child: Text(
    <span class="hljs-string">'Hello'</span>,
    style: TextStyle(color: BeeTokens.textPrimary(context)),
  ),
)
</code></pre>
<h3 data-id="heading-6">Token å‘½åè§„èŒƒ</h3>
<p>æˆ‘é‡‡ç”¨äº†è¯­ä¹‰åŒ–å‘½åï¼Œè®©ä»£ç æ›´æ˜“è¯»ï¼š</p>



























































<table><thead><tr><th>Token</th><th>ç”¨é€”</th><th>äº®è‰²</th><th>æš—è‰²</th></tr></thead><tbody><tr><td><code>scaffoldBackground</code></td><td>é¡µé¢èƒŒæ™¯</td><td>#F5F5F5</td><td>#000000</td></tr><tr><td><code>surface</code></td><td>å¡ç‰‡èƒŒæ™¯</td><td>#FFFFFF</td><td>#000000</td></tr><tr><td><code>surfaceElevated</code></td><td>å¼¹çª—èƒŒæ™¯</td><td>#FFFFFF</td><td>#1C1C1E</td></tr><tr><td><code>textPrimary</code></td><td>ä¸»è¦æ–‡å­—</td><td>black87</td><td>white</td></tr><tr><td><code>textSecondary</code></td><td>æ¬¡è¦æ–‡å­—</td><td>black54</td><td>white70</td></tr><tr><td><code>textTertiary</code></td><td>æç¤ºæ–‡å­—</td><td>black38</td><td>white38</td></tr><tr><td><code>border</code></td><td>å¡ç‰‡è¾¹æ¡†</td><td>grey200</td><td>ä¸»é¢˜è‰²30%</td></tr><tr><td><code>divider</code></td><td>åˆ†å‰²çº¿</td><td>grey200</td><td>white12</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-7">2. ä¸»é¢˜çŠ¶æ€ç®¡ç†</h2>
<h3 data-id="heading-8">Provider å®šä¹‰</h3>
<p>ä½¿ç”¨ Riverpod ç®¡ç†ä¸»é¢˜çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter_riverpod/flutter_riverpod.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:shared_preferences/shared_preferences.dart'</span>;

<span class="hljs-comment">/// <span class="markdown">ä¸»é¢˜æ¨¡å¼æšä¸¾</span></span>
<span class="hljs-keyword">enum</span> ThemeModeOption {
  system,  <span class="hljs-comment">// è·Ÿéšç³»ç»Ÿ</span>
  light,   <span class="hljs-comment">// å§‹ç»ˆäº®è‰²</span>
  dark,    <span class="hljs-comment">// å§‹ç»ˆæš—é»‘</span>
}

<span class="hljs-comment">/// <span class="markdown">æ‰©å±•æ–¹æ³•ï¼šè½¬æ¢ä¸º Flutter çš„ ThemeMode</span></span>
<span class="hljs-keyword">extension</span> ThemeModeOptionExtension <span class="hljs-keyword">on</span> ThemeModeOption {
  ThemeMode toThemeMode() {
    <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">this</span>) {
      <span class="hljs-keyword">case</span> ThemeModeOption.system:
        <span class="hljs-keyword">return</span> ThemeMode.system;
      <span class="hljs-keyword">case</span> ThemeModeOption.light:
        <span class="hljs-keyword">return</span> ThemeMode.light;
      <span class="hljs-keyword">case</span> ThemeModeOption.dark:
        <span class="hljs-keyword">return</span> ThemeMode.dark;
    }
  }

  <span class="hljs-built_in">String</span> toDisplayName(BuildContext context) {
    <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">this</span>) {
      <span class="hljs-keyword">case</span> ThemeModeOption.system:
        <span class="hljs-keyword">return</span> <span class="hljs-string">'è·Ÿéšç³»ç»Ÿ'</span>;
      <span class="hljs-keyword">case</span> ThemeModeOption.light:
        <span class="hljs-keyword">return</span> <span class="hljs-string">'å§‹ç»ˆäº®è‰²'</span>;
      <span class="hljs-keyword">case</span> ThemeModeOption.dark:
        <span class="hljs-keyword">return</span> <span class="hljs-string">'å§‹ç»ˆæš—é»‘'</span>;
    }
  }
}

<span class="hljs-comment">/// <span class="markdown">ä¸»é¢˜æ¨¡å¼ Provider</span></span>
<span class="hljs-keyword">final</span> themeModeProvider = StateNotifierProvider&lt;ThemeModeNotifier, ThemeModeOption&gt;((ref) {
  <span class="hljs-keyword">return</span> ThemeModeNotifier();
});

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ThemeModeNotifier</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StateNotifier</span>&lt;<span class="hljs-title">ThemeModeOption</span>&gt; </span>{
  ThemeModeNotifier() : <span class="hljs-keyword">super</span>(ThemeModeOption.system) {
    _loadFromPrefs();
  }

  <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> _key = <span class="hljs-string">'theme_mode'</span>;

  Future&lt;<span class="hljs-keyword">void</span>&gt; _loadFromPrefs() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">final</span> prefs = <span class="hljs-keyword">await</span> SharedPreferences.getInstance();
    <span class="hljs-keyword">final</span> value = prefs.getString(_key);
    <span class="hljs-keyword">if</span> (value != <span class="hljs-keyword">null</span>) {
      state = ThemeModeOption.values.firstWhere(
        (e) =&gt; e.name == value,
        orElse: () =&gt; ThemeModeOption.system,
      );
    }
  }

  Future&lt;<span class="hljs-keyword">void</span>&gt; setThemeMode(ThemeModeOption mode) <span class="hljs-keyword">async</span> {
    state = mode;
    <span class="hljs-keyword">final</span> prefs = <span class="hljs-keyword">await</span> SharedPreferences.getInstance();
    <span class="hljs-keyword">await</span> prefs.setString(_key, mode.name);
  }
}
</code></pre>
<h3 data-id="heading-9">ä¸»é¢˜è‰² Provider</h3>
<p>ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰ä¸»é¢˜è‰²ï¼Œè¿™ä¸ªä¹Ÿè¦æŒä¹…åŒ–ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">/// <span class="markdown">é¢„è®¾ä¸»é¢˜è‰²åˆ—è¡¨</span></span>
<span class="hljs-keyword">const</span> <span class="hljs-built_in">List</span>&lt;Color&gt; presetColors = [
  Color(<span class="hljs-number">0xFFFFB020</span>), <span class="hljs-comment">// èœœèœ‚é»„ï¼ˆé»˜è®¤ï¼‰</span>
  Color(<span class="hljs-number">0xFFFF6B6B</span>), <span class="hljs-comment">// çŠç‘šçº¢</span>
  Color(<span class="hljs-number">0xFF4ECDC4</span>), <span class="hljs-comment">// è–„è·ç»¿</span>
  Color(<span class="hljs-number">0xFF5C7AEA</span>), <span class="hljs-comment">// é›è“</span>
  Color(<span class="hljs-number">0xFFAB47BC</span>), <span class="hljs-comment">// ç´«ç½—å…°</span>
  Color(<span class="hljs-number">0xFF26A69A</span>), <span class="hljs-comment">// é’ç»¿</span>
  Color(<span class="hljs-number">0xFFEC407A</span>), <span class="hljs-comment">// ç²‰çº¢</span>
  Color(<span class="hljs-number">0xFF42A5F5</span>), <span class="hljs-comment">// å¤©è“</span>
];

<span class="hljs-comment">/// <span class="markdown">ä¸»é¢˜è‰² Provider</span></span>
<span class="hljs-keyword">final</span> primaryColorProvider = StateNotifierProvider&lt;PrimaryColorNotifier, Color&gt;((ref) {
  <span class="hljs-keyword">return</span> PrimaryColorNotifier();
});

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PrimaryColorNotifier</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StateNotifier</span>&lt;<span class="hljs-title">Color</span>&gt; </span>{
  PrimaryColorNotifier() : <span class="hljs-keyword">super</span>(presetColors[<span class="hljs-number">0</span>]) {
    _loadFromPrefs();
  }

  <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> _key = <span class="hljs-string">'primary_color'</span>;

  Future&lt;<span class="hljs-keyword">void</span>&gt; _loadFromPrefs() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">final</span> prefs = <span class="hljs-keyword">await</span> SharedPreferences.getInstance();
    <span class="hljs-keyword">final</span> value = prefs.getInt(_key);
    <span class="hljs-keyword">if</span> (value != <span class="hljs-keyword">null</span>) {
      state = Color(value);
    }
  }

  Future&lt;<span class="hljs-keyword">void</span>&gt; setPrimaryColor(Color color) <span class="hljs-keyword">async</span> {
    state = color;
    <span class="hljs-keyword">final</span> prefs = <span class="hljs-keyword">await</span> SharedPreferences.getInstance();
    <span class="hljs-keyword">await</span> prefs.setInt(_key, color.value);
  }
}
</code></pre>
<hr/>
<h2 data-id="heading-10">3. MaterialApp é…ç½®</h2>
<p>åœ¨ App å…¥å£å¤„é…ç½®ä¸»é¢˜ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ConsumerWidget</span> </span>{
  <span class="hljs-keyword">const</span> MyApp({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context, WidgetRef ref) {
    <span class="hljs-keyword">final</span> themeMode = ref.watch(themeModeProvider);
    <span class="hljs-keyword">final</span> primaryColor = ref.watch(primaryColorProvider);

    <span class="hljs-keyword">return</span> MaterialApp(
      title: <span class="hljs-string">'BeeCount'</span>,

      <span class="hljs-comment">// ä¸»é¢˜æ¨¡å¼</span>
      themeMode: themeMode.toThemeMode(),

      <span class="hljs-comment">// äº®è‰²ä¸»é¢˜</span>
      theme: ThemeData(
        brightness: Brightness.light,
        primaryColor: primaryColor,
        scaffoldBackgroundColor: <span class="hljs-keyword">const</span> Color(<span class="hljs-number">0xFFF5F5F5</span>),
        colorScheme: ColorScheme.light(
          primary: primaryColor,
          secondary: primaryColor,
          surface: Colors.white,
        ),
        appBarTheme: AppBarTheme(
          backgroundColor: Colors.white,
          foregroundColor: Colors.black87,
          elevation: <span class="hljs-number">0</span>,
          systemOverlayStyle: SystemUiOverlayStyle.dark,
        ),
        dividerTheme: DividerThemeData(
          color: Colors.grey.shade200,
          thickness: <span class="hljs-number">0.5</span>,
        ),
        <span class="hljs-comment">// ... å…¶ä»–é…ç½®</span>
      ),

      <span class="hljs-comment">// æš—é»‘ä¸»é¢˜</span>
      darkTheme: ThemeData(
        brightness: Brightness.dark,
        primaryColor: primaryColor,
        scaffoldBackgroundColor: Colors.black,
        colorScheme: ColorScheme.dark(
          primary: primaryColor,
          secondary: primaryColor,
          surface: Colors.black,
        ),
        appBarTheme: AppBarTheme(
          backgroundColor: Colors.black,
          foregroundColor: Colors.white,
          elevation: <span class="hljs-number">0</span>,
          systemOverlayStyle: SystemUiOverlayStyle.light,
        ),
        dividerTheme: <span class="hljs-keyword">const</span> DividerThemeData(
          color: Colors.white12,
          thickness: <span class="hljs-number">0.5</span>,
        ),
        <span class="hljs-comment">// ... å…¶ä»–é…ç½®</span>
      ),

      home: <span class="hljs-keyword">const</span> HomePage(),
    );
  }
}
</code></pre>
<hr/>
<h2 data-id="heading-11">4. ç»„ä»¶çº§é€‚é…</h2>
<h3 data-id="heading-12">å¡ç‰‡ç»„ä»¶</h3>
<p>å°è£…ä¸€ä¸ªç»Ÿä¸€çš„å¡ç‰‡ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BeeCard</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">final</span> Widget child;
  <span class="hljs-keyword">final</span> EdgeInsetsGeometry? padding;
  <span class="hljs-keyword">final</span> EdgeInsetsGeometry? margin;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> borderRadius;

  <span class="hljs-keyword">const</span> BeeCard({
    <span class="hljs-keyword">super</span>.key,
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.child,
    <span class="hljs-keyword">this</span>.padding,
    <span class="hljs-keyword">this</span>.margin,
    <span class="hljs-keyword">this</span>.borderRadius = <span class="hljs-number">12</span>,
  });

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">final</span> isDark = BeeTokens.isDark(context);

    <span class="hljs-keyword">return</span> Container(
      margin: margin,
      padding: padding ?? <span class="hljs-keyword">const</span> EdgeInsets.all(<span class="hljs-number">16</span>),
      decoration: BoxDecoration(
        color: BeeTokens.surface(context),
        borderRadius: BorderRadius.circular(borderRadius),
        <span class="hljs-comment">// æš—é»‘æ¨¡å¼ï¼šä¸»é¢˜è‰²è¾¹æ¡†</span>
        border: isDark
            ? Border.all(color: BeeTokens.border(context), width: <span class="hljs-number">1</span>)
            : <span class="hljs-keyword">null</span>,
        <span class="hljs-comment">// äº®è‰²æ¨¡å¼ï¼šé˜´å½±</span>
        boxShadow: isDark
            ? <span class="hljs-keyword">null</span>
            : [
                BoxShadow(
                  color: Colors.black.withOpacity(<span class="hljs-number">0.05</span>),
                  blurRadius: <span class="hljs-number">8</span>,
                  offset: <span class="hljs-keyword">const</span> Offset(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>),
                ),
              ],
      ),
      child: child,
    );
  }
}
</code></pre>
<h3 data-id="heading-13">å›¾è¡¨é€‚é…</h3>
<p>ä½¿ç”¨ <code>fl_chart</code> åº“æ—¶ï¼Œéœ€è¦å•ç‹¬å¤„ç†é¢œè‰²ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:fl_chart/fl_chart.dart'</span>;

Widget buildLineChart(BuildContext context, <span class="hljs-built_in">List</span>&lt;FlSpot&gt; spots) {
  <span class="hljs-keyword">final</span> isDark = BeeTokens.isDark(context);
  <span class="hljs-keyword">final</span> primaryColor = Theme.of(context).primaryColor;

  <span class="hljs-keyword">return</span> LineChart(
    LineChartData(
      <span class="hljs-comment">// ç½‘æ ¼çº¿</span>
      gridData: FlGridData(
        <span class="hljs-keyword">show</span>: <span class="hljs-keyword">true</span>,
        drawVerticalLine: <span class="hljs-keyword">false</span>,
        horizontalInterval: <span class="hljs-number">1</span>,
        getDrawingHorizontalLine: (value) =&gt; FlLine(
          color: isDark ? Colors.white10 : Colors.grey.shade200,
          strokeWidth: <span class="hljs-number">1</span>,
        ),
      ),

      <span class="hljs-comment">// è¾¹æ¡†</span>
      borderData: FlBorderData(
        <span class="hljs-keyword">show</span>: <span class="hljs-keyword">true</span>,
        border: Border(
          bottom: BorderSide(
            color: isDark ? Colors.white24 : Colors.grey.shade300,
          ),
          left: BorderSide(
            color: isDark ? Colors.white24 : Colors.grey.shade300,
          ),
        ),
      ),

      <span class="hljs-comment">// åæ ‡è½´æ ‡é¢˜</span>
      titlesData: FlTitlesData(
        bottomTitles: AxisTitles(
          sideTitles: SideTitles(
            showTitles: <span class="hljs-keyword">true</span>,
            getTitlesWidget: (value, meta) =&gt; Text(
              <span class="hljs-string">'<span class="hljs-subst">${value.toInt()}</span>'</span>,
              style: TextStyle(
                color: BeeTokens.textSecondary(context),
                fontSize: <span class="hljs-number">12</span>,
              ),
            ),
          ),
        ),
        leftTitles: AxisTitles(
          sideTitles: SideTitles(
            showTitles: <span class="hljs-keyword">true</span>,
            getTitlesWidget: (value, meta) =&gt; Text(
              <span class="hljs-string">'<span class="hljs-subst">${value.toInt()}</span>'</span>,
              style: TextStyle(
                color: BeeTokens.textSecondary(context),
                fontSize: <span class="hljs-number">12</span>,
              ),
            ),
          ),
        ),
        topTitles: <span class="hljs-keyword">const</span> AxisTitles(sideTitles: SideTitles(showTitles: <span class="hljs-keyword">false</span>)),
        rightTitles: <span class="hljs-keyword">const</span> AxisTitles(sideTitles: SideTitles(showTitles: <span class="hljs-keyword">false</span>)),
      ),

      <span class="hljs-comment">// æ•°æ®çº¿</span>
      lineBarsData: [
        LineChartBarData(
          spots: spots,
          isCurved: <span class="hljs-keyword">true</span>,
          color: primaryColor,
          barWidth: <span class="hljs-number">2</span>,
          dotData: FlDotData(
            <span class="hljs-keyword">show</span>: <span class="hljs-keyword">true</span>,
            getDotPainter: (spot, percent, barData, index) {
              <span class="hljs-keyword">return</span> FlDotCirclePainter(
                radius: <span class="hljs-number">4</span>,
                color: primaryColor,
                strokeWidth: <span class="hljs-number">2</span>,
                strokeColor: isDark ? Colors.black : Colors.white,
              );
            },
          ),
          belowBarData: BarAreaData(
            <span class="hljs-keyword">show</span>: <span class="hljs-keyword">true</span>,
            color: primaryColor.withOpacity(<span class="hljs-number">0.1</span>),
          ),
        ),
      ],
    ),
  );
}
</code></pre>
<h3 data-id="heading-14">å¼¹çª—é€‚é…</h3>
<p><code>showModalBottomSheet</code>ã€<code>showDialog</code> ç­‰å¼¹çª—éœ€è¦å•ç‹¬å¤„ç†ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">Future&lt;T?&gt; showBeeBottomSheet&lt;T&gt;({
  <span class="hljs-keyword">required</span> BuildContext context,
  <span class="hljs-keyword">required</span> WidgetBuilder builder,
  <span class="hljs-built_in">bool</span> isScrollControlled = <span class="hljs-keyword">false</span>,
}) {
  <span class="hljs-keyword">return</span> showModalBottomSheet&lt;T&gt;(
    context: context,
    isScrollControlled: isScrollControlled,
    <span class="hljs-comment">// å…³é”®ï¼šæŒ‡å®šèƒŒæ™¯è‰²</span>
    backgroundColor: BeeTokens.surfaceElevated(context),
    <span class="hljs-comment">// åœ†è§’</span>
    shape: <span class="hljs-keyword">const</span> RoundedRectangleBorder(
      borderRadius: BorderRadius.vertical(top: Radius.circular(<span class="hljs-number">16</span>)),
    ),
    builder: builder,
  );
}

Future&lt;T?&gt; showBeeDialog&lt;T&gt;({
  <span class="hljs-keyword">required</span> BuildContext context,
  <span class="hljs-keyword">required</span> WidgetBuilder builder,
}) {
  <span class="hljs-keyword">return</span> showDialog&lt;T&gt;(
    context: context,
    builder: (context) =&gt; Dialog(
      backgroundColor: BeeTokens.surfaceElevated(context),
      shape: RoundedRectangleBorder(
        borderRadius: BorderRadius.circular(<span class="hljs-number">16</span>),
        <span class="hljs-comment">// æš—é»‘æ¨¡å¼ä¸‹åŠ è¾¹æ¡†</span>
        side: BeeTokens.isDark(context)
            ? BorderSide(color: BeeTokens.border(context))
            : BorderSide.none,
      ),
      child: builder(context),
    ),
  );
}
</code></pre>
<h3 data-id="heading-15">è¾“å…¥æ¡†é€‚é…</h3>
<pre><code class="hljs language-dart" lang="dart">TextField(
  decoration: InputDecoration(
    hintText: <span class="hljs-string">'è¯·è¾“å…¥'</span>,
    hintStyle: TextStyle(color: BeeTokens.textTertiary(context)),
    filled: <span class="hljs-keyword">true</span>,
    fillColor: BeeTokens.isDark(context)
        ? Colors.white.withOpacity(<span class="hljs-number">0.05</span>)
        : Colors.grey.shade100,
    border: OutlineInputBorder(
      borderRadius: BorderRadius.circular(<span class="hljs-number">8</span>),
      borderSide: BorderSide.none,
    ),
    focusedBorder: OutlineInputBorder(
      borderRadius: BorderRadius.circular(<span class="hljs-number">8</span>),
      borderSide: BorderSide(
        color: Theme.of(context).primaryColor,
        width: <span class="hljs-number">1.5</span>,
      ),
    ),
  ),
  style: TextStyle(color: BeeTokens.textPrimary(context)),
)
</code></pre>
<hr/>
<h2 data-id="heading-16">5. è¸©å‘è®°å½•</h2>
<h3 data-id="heading-17">å‘ 1ï¼šç¡¬ç¼–ç é¢œè‰²éå¸ƒå…¨å±€</h3>
<p><strong>é—®é¢˜</strong>ï¼šé¡¹ç›®å†å²ä»£ç ä¸­ï¼Œé¢œè‰²å€¼æ•£è½åœ¨å„å¤„ã€‚</p>
<p><strong>è§£å†³</strong>ï¼šæˆ‘å†™äº†ä¸ªè„šæœ¬ï¼Œå…¨å±€æœç´¢æ›¿æ¢å¸¸è§çš„ç¡¬ç¼–ç é¢œè‰²ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æœç´¢ç¡¬ç¼–ç é¢œè‰²</span>
grep -rn <span class="hljs-string">"Colors.black87"</span> lib/
grep -rn <span class="hljs-string">"Colors.black54"</span> lib/
grep -rn <span class="hljs-string">"Colors.white"</span> lib/
grep -rn <span class="hljs-string">"Color(0xFF"</span> lib/
</code></pre>
<p>ç„¶åé€ä¸ªæ›¿æ¢ä¸ºå¯¹åº”çš„ Tokenã€‚è¿™ä¸ªè¿‡ç¨‹æ¯”è¾ƒç¹çï¼Œä½†ä¸€åŠ³æ°¸é€¸ã€‚</p>
<h3 data-id="heading-18">å‘ 2ï¼šå¼¹çª—èƒŒæ™¯è‰²ä¸ç”Ÿæ•ˆ</h3>
<p><strong>é—®é¢˜</strong>ï¼š<code>showModalBottomSheet</code> åœ¨æš—é»‘æ¨¡å¼ä¸‹èƒŒæ™¯è¿˜æ˜¯ç™½è‰²ã€‚</p>
<p><strong>åŸå› </strong>ï¼šFlutter çš„ BottomSheet é»˜è®¤ä½¿ç”¨ <code>Theme.of(context).canvasColor</code>ã€‚</p>
<p><strong>è§£å†³</strong>ï¼šæ˜¾å¼æŒ‡å®š <code>backgroundColor</code> å‚æ•°ã€‚</p>
<pre><code class="hljs language-dart" lang="dart">showModalBottomSheet(
  context: context,
  backgroundColor: BeeTokens.surfaceElevated(context), <span class="hljs-comment">// å¿…é¡»æŒ‡å®šï¼</span>
  builder: (context) =&gt; ...
)
</code></pre>
<h3 data-id="heading-19">å‘ 3ï¼šçŠ¶æ€æ å›¾æ ‡é¢œè‰²</h3>
<p><strong>é—®é¢˜</strong>ï¼šæš—é»‘æ¨¡å¼ä¸‹çŠ¶æ€æ å›¾æ ‡è¿˜æ˜¯é»‘è‰²ï¼Œçœ‹ä¸æ¸…ã€‚</p>
<p><strong>è§£å†³</strong>ï¼šåœ¨ AppBar æˆ–é¡µé¢çº§åˆ«è®¾ç½® <code>SystemUiOverlayStyle</code>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// æ–¹å¼ 1ï¼šé€šè¿‡ AppBar</span>
AppBar(
  systemOverlayStyle: BeeTokens.isDark(context)
      ? SystemUiOverlayStyle.light
      : SystemUiOverlayStyle.dark,
)

<span class="hljs-comment">// æ–¹å¼ 2ï¼šé€šè¿‡ AnnotatedRegion</span>
AnnotatedRegion&lt;SystemUiOverlayStyle&gt;(
  value: BeeTokens.isDark(context)
      ? SystemUiOverlayStyle.light
      : SystemUiOverlayStyle.dark,
  child: Scaffold(...),
)
</code></pre>
<h3 data-id="heading-20">å‘ 4ï¼šCupertinoDatePicker é¢œè‰²</h3>
<p><strong>é—®é¢˜</strong>ï¼šiOS é£æ ¼çš„æ—¥æœŸé€‰æ‹©å™¨åœ¨æš—é»‘æ¨¡å¼ä¸‹é¢œè‰²ä¸å¯¹ã€‚</p>
<p><strong>è§£å†³</strong>ï¼šç”¨ <code>CupertinoTheme</code> åŒ…è£¹ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">CupertinoTheme(
  data: CupertinoThemeData(
    brightness: BeeTokens.isDark(context) ? Brightness.dark : Brightness.light,
    primaryColor: Theme.of(context).primaryColor,
  ),
  child: CupertinoDatePicker(...),
)
</code></pre>
<h3 data-id="heading-21">å‘ 5ï¼šå›¾ç‰‡å’Œå›¾æ ‡</h3>
<p><strong>é—®é¢˜</strong>ï¼šæŸäº›å›¾æ ‡/å›¾ç‰‡åœ¨æš—é»‘æ¨¡å¼ä¸‹å¯¹æ¯”åº¦ä¸å¤Ÿã€‚</p>
<p><strong>è§£å†³</strong>ï¼š</p>
<ol>
<li>ä½¿ç”¨ Icon æ—¶ï¼Œæ˜¾å¼æŒ‡å®šé¢œè‰²è€Œéä¾èµ–é»˜è®¤å€¼</li>
<li>å¯¹äºå›¾ç‰‡ï¼Œè€ƒè™‘å‡†å¤‡æš—é»‘æ¨¡å¼ç‰ˆæœ¬ï¼Œæˆ–ä½¿ç”¨ <code>ColorFiltered</code> è°ƒæ•´</li>
</ol>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// å›¾æ ‡ï¼šæ˜¾å¼æŒ‡å®šé¢œè‰²</span>
Icon(
  Icons.settings,
  color: BeeTokens.iconPrimary(context), <span class="hljs-comment">// ä¸è¦çœç•¥</span>
)

<span class="hljs-comment">// å›¾ç‰‡ï¼šå¯ä»¥ç”¨ ColorFiltered è°ƒæ•´</span>
ColorFiltered(
  colorFilter: BeeTokens.isDark(context)
      ? <span class="hljs-keyword">const</span> ColorFilter.mode(Colors.white, BlendMode.srcIn)
      : <span class="hljs-keyword">null</span>,
  child: Image.asset(<span class="hljs-string">'assets/logo.png'</span>),
)
</code></pre>
<h3 data-id="heading-22">å‘ 6ï¼šä¸»é¢˜åˆ‡æ¢å Provider çŠ¶æ€</h3>
<p><strong>é—®é¢˜</strong>ï¼šä¸»é¢˜åˆ‡æ¢åï¼ŒæŸäº›é¡µé¢é¢œè‰²æ²¡æ›´æ–°ã€‚</p>
<p><strong>åŸå› </strong>ï¼šæ²¡æœ‰æ­£ç¡®ä½¿ç”¨ <code>ref.watch()</code>ã€‚</p>
<p><strong>è§£å†³</strong>ï¼šç¡®ä¿åœ¨ <code>build</code> æ–¹æ³•ä¸­ä½¿ç”¨ <code>ref.watch()</code> ç›‘å¬ Providerï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šåªåœ¨ initState è¯»å–ä¸€æ¬¡</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_MyPageState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ConsumerState</span>&lt;<span class="hljs-title">MyPage</span>&gt; </span>{
  <span class="hljs-keyword">late</span> Color _bgColor;

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> initState() {
    <span class="hljs-keyword">super</span>.initState();
    _bgColor = BeeTokens.surface(context); <span class="hljs-comment">// è¿™é‡Œè¯»å–åä¸ä¼šæ›´æ–°</span>
  }
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šåœ¨ build ä¸­ç›‘å¬</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_MyPageState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ConsumerState</span>&lt;<span class="hljs-title">MyPage</span>&gt; </span>{
  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">final</span> bgColor = BeeTokens.surface(context); <span class="hljs-comment">// æ¯æ¬¡ build éƒ½é‡æ–°è·å–</span>
    <span class="hljs-comment">// ...</span>
  }
}
</code></pre>
<hr/>
<h2 data-id="heading-23">è®¾è®¡æ€è€ƒ</h2>
<h3 data-id="heading-24">ä¸ºä»€ä¹ˆé€‰çº¯é»‘è€Œä¸æ˜¯æ·±ç°ï¼Ÿ</h3>




















<table><thead><tr><th>æ–¹æ¡ˆ</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>çº¯é»‘ #000000</td><td>OLED çœç”µã€å¯¹æ¯”åº¦é«˜ã€æç®€</td><td>å¯èƒ½æ˜¾å¾—ã€Œç©ºæ´ã€</td></tr><tr><td>æ·±ç° #121212</td><td>Material Design æ¨èã€æŸ”å’Œ</td><td>OLED ä¸çœç”µã€å¯¹æ¯”åº¦ä½</td></tr></tbody></table>
<p>æœ€ç»ˆé€‰æ‹©çº¯é»‘ï¼Œå› ä¸ºï¼š</p>
<ol>
<li>ç°åœ¨å¤§éƒ¨åˆ†æ‰‹æœºæ˜¯ OLED å±ï¼Œçº¯é»‘çœŸçš„èƒ½çœç”µ</li>
<li>é…åˆä¸»é¢˜è‰²è¾¹æ¡†ï¼Œä¸ä¼šæ˜¾å¾—å•è°ƒ</li>
<li>æç®€é£æ ¼æ›´ç¬¦åˆè¿™ä¸ª App çš„è°ƒæ€§</li>
</ol>
<h3 data-id="heading-25">ä¸ºä»€ä¹ˆç”¨ä¸»é¢˜è‰²è¾¹æ¡†ï¼Ÿ</h3>
<ol>
<li><strong>ä¿ç•™ä¸ªæ€§åŒ–</strong>ï¼šç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰ä¸»é¢˜è‰²ï¼Œæš—é»‘æ¨¡å¼ä¸‹ä¹Ÿèƒ½ä½“ç°</li>
<li><strong>å±‚æ¬¡åˆ†æ˜</strong>ï¼šè¾¹æ¡†è®©å¡ç‰‡å’ŒèƒŒæ™¯åŒºåˆ†å¼€ï¼Œä¸ä¼šé»‘æˆä¸€ç‰‡</li>
<li><strong>å“ç‰Œæ„Ÿ</strong>ï¼šå½©è‰²ç‚¹ç¼€è®©ç•Œé¢æ›´æœ‰è®°å¿†ç‚¹</li>
<li><strong>æŠ€æœ¯ç®€å•</strong>ï¼šåªéœ€è¦åœ¨æš—é»‘æ¨¡å¼ä¸‹åŠ ä¸€ä¸ª borderï¼Œä¸ç”¨å‡†å¤‡ä¸¤å¥—èµ„æº</li>
</ol>
<hr/>
<h2 data-id="heading-26">é¡¹ç›®åœ°å€</h2>
<p><strong>GitHub</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTNT-Likely%2FBeeCount" target="_blank" title="https://github.com/TNT-Likely/BeeCount" ref="nofollow noopener noreferrer">github.com/TNT-Likely/â€¦</a></p>
<p>è¿™æ˜¯ä¸€ä¸ªå®Œå…¨å¼€æºçš„ Flutter è®°è´¦ Appï¼Œç›®å‰å·²æœ‰ <strong>600+ Star</strong>ã€‚</p>
<p>ä¸»è¦ç‰¹æ€§ï¼š</p>
<ul>
<li>å®Œå…¨å…è´¹ï¼Œæ— å¹¿å‘Š</li>
<li>éšç§ä¼˜å…ˆï¼Œæ•°æ®æœ¬åœ°å­˜å‚¨</li>
<li>æ”¯æŒ WebDAV/Supabase è‡ªæ‰˜ç®¡åŒæ­¥</li>
<li>å¤šè´¦æœ¬ã€è´¦æˆ·ç®¡ç†ã€ç»Ÿè®¡æŠ¥è¡¨ç­‰å®Œæ•´åŠŸèƒ½</li>
<li>æ”¯æŒ iOS å’Œ Android</li>
</ul>
<p><strong>å¦‚æœè¿™ç¯‡æ–‡ç« æˆ–è¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç»™ä¸ª â­ Star æ”¯æŒä¸€ä¸‹ï¼</strong></p>
<p>ä»£ç éƒ½æ˜¯å¼€æºçš„ï¼Œæ¬¢è¿å‚è€ƒå’Œå€Ÿé‰´ã€‚</p>
<hr/>
<h2 data-id="heading-27">ä¸‹è½½ä½“éªŒ</h2>
<ul>
<li><strong>iOS App Store</strong>ï¼ˆæµ·å¤–åŒºï¼‰ï¼šæœç´¢ã€Œèœœèœ‚è®°è´¦-ç®€æ´è®°è´¦æœ¬ã€</li>
<li><strong>iOS TestFlight</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftestflight.apple.com%2Fjoin%2FEaw2rWxa" target="_blank" title="https://testflight.apple.com/join/Eaw2rWxa" ref="nofollow noopener noreferrer">testflight.apple.com/join/Eaw2rWâ€¦</a></li>
<li><strong>Android APK</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTNT-Likely%2FBeeCount%2Freleases" target="_blank" title="https://github.com/TNT-Likely/BeeCount/releases" ref="nofollow noopener noreferrer">github.com/TNT-Likely/â€¦</a></li>
</ul>
<p>æ¬¢è¿è¯•ç”¨å¹¶åé¦ˆæ„è§ï¼æœ‰é—®é¢˜å¯ä»¥åœ¨ GitHub Issues æˆ–è¯„è®ºåŒºå‘Šè¯‰æˆ‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java æ•°ç»„è¿›é˜¶æ“ä½œ]]></title>    <link>https://juejin.cn/post/7575102209606352922</link>    <guid>https://juejin.cn/post/7575102209606352922</guid>    <pubDate>2025-11-23T10:18:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575102209606352922" data-draft-id="7575438636330844211" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java æ•°ç»„è¿›é˜¶æ“ä½œ"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-11-23T10:18:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»Šå¤©æ²¡ID"/> <meta itemprop="url" content="https://juejin.cn/user/441367612371065"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java æ•°ç»„è¿›é˜¶æ“ä½œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/441367612371065/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»Šå¤©æ²¡ID
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T10:18:20.000Z" title="Sun Nov 23 2025 10:18:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ•°ç»„ä½œä¸º Java ä¸­æœ€åŸºç¡€çš„æ•°æ®ç»“æ„ï¼Œå…¶å›ºå®šé•¿åº¦çš„ç‰¹æ€§ä½¿å¾—å¢åˆ æ“ä½œéœ€è¦ç‰¹æ®Šå¤„ç†ã€‚æœ¬æ–‡å°†åŸºäºæ•°ç»„æŸ¥æ‰¾åŠŸèƒ½ï¼Œä¸€æ­¥æ­¥å®ç°å…ƒç´ æ’å…¥ï¼ˆå•ä¸ªå…ƒç´  / æ•°ç»„ï¼‰å’Œåˆ é™¤æ“ä½œï¼Œå¸¦ä½ æŒæ¡æ•°ç»„æ“ä½œçš„æ ¸å¿ƒæŠ€å·§ã€‚</p>
<h2 data-id="heading-0">åŸºç¡€ï¼šæ•°ç»„å…ƒç´ æŸ¥æ‰¾</h2>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªåŸºç¡€åŠŸèƒ½ â€”â€” æŸ¥æ‰¾æŒ‡å®šå…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½®ã€‚è¿™æ˜¯åç»­æ‰€æœ‰æ“ä½œçš„å‰æã€‚</p>
<h3 data-id="heading-1">æŸ¥æ‰¾åŠŸèƒ½å®ç°</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æŸ¥æ‰¾æ•°ç»„ä¸­æŒ‡å®šå…ƒç´ çš„ä½ç½®
 * 
 * <span class="hljs-doctag">@param</span> arr å¾…æŸ¥æ‰¾çš„æ•°ç»„
 * <span class="hljs-doctag">@param</span> target è¦æŸ¥æ‰¾çš„ç›®æ ‡å…ƒç´ 
 * <span class="hljs-doctag">@return</span> å…ƒç´ æ‰€åœ¨ç´¢å¼•ï¼Œæœªæ‰¾åˆ°è¿”å›-1
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">findElement</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr, <span class="hljs-type">int</span> target)</span> {
    <span class="hljs-comment">// ç©ºæ•°ç»„ç›´æ¥è¿”å›-1</span>
    <span class="hljs-keyword">if</span> (arr == <span class="hljs-literal">null</span> || arr.length == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
    }
    
    <span class="hljs-comment">// éå†æ•°ç»„æŸ¥æ‰¾å…ƒç´ </span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; arr.length; i++) {
        <span class="hljs-keyword">if</span> (arr[i] == target) {
            <span class="hljs-keyword">return</span> i; <span class="hljs-comment">// æ‰¾åˆ°å…ƒç´ ï¼Œè¿”å›ç´¢å¼•</span>
        }
    }
    
    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>; <span class="hljs-comment">// æœªæ‰¾åˆ°å…ƒç´ </span>
}
</code></pre>
<h2 data-id="heading-2">è¿›é˜¶æ“ä½œä¸€ï¼šåœ¨æŒ‡å®šå…ƒç´ åæ’å…¥å•ä¸ªå…ƒç´ </h2>
<h3 data-id="heading-3">ä»£ç å®ç°</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * åœ¨æŒ‡å®šå…ƒç´ åæ’å…¥å•ä¸ªæ–°å…ƒç´ 
 * 
 * <span class="hljs-doctag">@param</span> arr åŸæ•°ç»„
 * <span class="hljs-doctag">@param</span> target ç›®æ ‡å…ƒç´ ï¼ˆåœ¨å…¶åæ’å…¥ï¼‰
 * <span class="hljs-doctag">@param</span> newValue è¦æ’å…¥çš„æ–°å…ƒç´ 
 * <span class="hljs-doctag">@return</span> æ’å…¥åçš„æ–°æ•°ç»„
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] insertAfterElement(<span class="hljs-type">int</span>[] arr, <span class="hljs-type">int</span> target, <span class="hljs-type">int</span> newValue) {
    <span class="hljs-type">int</span> <span class="hljs-variable">targetIndex</span> <span class="hljs-operator">=</span> findElement(arr, target);
    
    <span class="hljs-comment">// æœªæ‰¾åˆ°ç›®æ ‡å…ƒç´ ï¼Œè¿”å›åŸæ•°ç»„å‰¯æœ¬</span>
    <span class="hljs-keyword">if</span> (targetIndex == -<span class="hljs-number">1</span>) {
        <span class="hljs-type">int</span>[] newArr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[arr.length];
        System.arraycopy(arr, <span class="hljs-number">0</span>, newArr, <span class="hljs-number">0</span>, arr.length);
        <span class="hljs-keyword">return</span> newArr;
    }
    
    <span class="hljs-comment">// åˆ›å»ºæ–°æ•°ç»„ï¼Œé•¿åº¦+1</span>
    <span class="hljs-type">int</span>[] newArr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[arr.length + <span class="hljs-number">1</span>];
    
    <span class="hljs-comment">// å¤åˆ¶ç›®æ ‡å…ƒç´ åŠä¹‹å‰çš„å…ƒç´ </span>
    System.arraycopy(arr, <span class="hljs-number">0</span>, newArr, <span class="hljs-number">0</span>, targetIndex + <span class="hljs-number">1</span>);
    
    <span class="hljs-comment">// æ’å…¥æ–°å…ƒç´ </span>
    newArr[targetIndex + <span class="hljs-number">1</span>] = newValue;
    
    <span class="hljs-comment">// å¤åˆ¶ç›®æ ‡å…ƒç´ ä¹‹åçš„å…ƒç´ </span>
    System.arraycopy(arr, targetIndex + <span class="hljs-number">1</span>, newArr, targetIndex + <span class="hljs-number">2</span>, 
                     arr.length - targetIndex - <span class="hljs-number">1</span>);
    
    <span class="hljs-keyword">return</span> newArr;
}
</code></pre>
<h2 data-id="heading-4">è¿›é˜¶æ“ä½œäºŒï¼šåœ¨æŒ‡å®šå…ƒç´ åæ’å…¥æ•°ç»„</h2>
<p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦æ’å…¥å¤šä¸ªå…ƒç´ ï¼Œè¿™å°±éœ€è¦åœ¨æŒ‡å®šä½ç½®æ’å…¥ä¸€ä¸ªæ•°ç»„ã€‚</p>
<h3 data-id="heading-5">ä»£ç å®ç°</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * åœ¨æŒ‡å®šå…ƒç´ åæ’å…¥ä¸€ä¸ªæ•°ç»„çš„æ‰€æœ‰å…ƒç´ 
 * 
 * <span class="hljs-doctag">@param</span> arr åŸæ•°ç»„
 * <span class="hljs-doctag">@param</span> target ç›®æ ‡å…ƒç´ ï¼ˆåœ¨å…¶åæ’å…¥ï¼‰
 * <span class="hljs-doctag">@param</span> insertArr è¦æ’å…¥çš„æ•°ç»„
 * <span class="hljs-doctag">@return</span> æ’å…¥åçš„æ–°æ•°ç»„
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] insertArrayAfterElement(<span class="hljs-type">int</span>[] arr, <span class="hljs-type">int</span> target, <span class="hljs-type">int</span>[] insertArr) {
    <span class="hljs-keyword">if</span> (insertArr == <span class="hljs-literal">null</span> || insertArr.length == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> arr.clone(); <span class="hljs-comment">// æ’å…¥æ•°ç»„ä¸ºç©ºï¼Œè¿”å›åŸæ•°ç»„å‰¯æœ¬</span>
    }
    
    <span class="hljs-type">int</span> <span class="hljs-variable">targetIndex</span> <span class="hljs-operator">=</span> findElement(arr, target);
    
    <span class="hljs-comment">// æœªæ‰¾åˆ°ç›®æ ‡å…ƒç´ ï¼Œè¿”å›åŸæ•°ç»„å‰¯æœ¬</span>
    <span class="hljs-keyword">if</span> (targetIndex == -<span class="hljs-number">1</span>) {
        <span class="hljs-keyword">return</span> arr.clone();
    }
    
    <span class="hljs-comment">// åˆ›å»ºæ–°æ•°ç»„ï¼Œé•¿åº¦=åŸæ•°ç»„é•¿åº¦+æ’å…¥æ•°ç»„é•¿åº¦</span>
    <span class="hljs-type">int</span>[] newArr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[arr.length + insertArr.length];
    
    <span class="hljs-comment">// å¤åˆ¶ç›®æ ‡å…ƒç´ åŠä¹‹å‰çš„å…ƒç´ </span>
    System.arraycopy(arr, <span class="hljs-number">0</span>, newArr, <span class="hljs-number">0</span>, targetIndex + <span class="hljs-number">1</span>);
    
    <span class="hljs-comment">// æ’å…¥æ–°æ•°ç»„</span>
    System.arraycopy(insertArr, <span class="hljs-number">0</span>, newArr, targetIndex + <span class="hljs-number">1</span>, insertArr.length);
    
    <span class="hljs-comment">// å¤åˆ¶ç›®æ ‡å…ƒç´ ä¹‹åçš„å…ƒç´ </span>
    System.arraycopy(arr, targetIndex + <span class="hljs-number">1</span>, newArr, 
                     targetIndex + <span class="hljs-number">1</span> + insertArr.length, 
                     arr.length - targetIndex - <span class="hljs-number">1</span>);
    
    <span class="hljs-keyword">return</span> newArr;
}
</code></pre>
<h2 data-id="heading-6">è¿›é˜¶æ“ä½œä¸‰ï¼šåˆ é™¤æŒ‡å®šå…ƒç´ </h2>
<h3 data-id="heading-7">ä»£ç å®ç°</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * åˆ é™¤æ•°ç»„ä¸­çš„æŒ‡å®šå…ƒç´ 
 * 
 * <span class="hljs-doctag">@param</span> arr åŸæ•°ç»„
 * <span class="hljs-doctag">@param</span> target è¦åˆ é™¤çš„ç›®æ ‡å…ƒç´ 
 * <span class="hljs-doctag">@return</span> åˆ é™¤åçš„æ–°æ•°ç»„
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] deleteElement(<span class="hljs-type">int</span>[] arr, <span class="hljs-type">int</span> target) {
    <span class="hljs-type">int</span> <span class="hljs-variable">targetIndex</span> <span class="hljs-operator">=</span> findElement(arr, target);
    
    <span class="hljs-comment">// æœªæ‰¾åˆ°ç›®æ ‡å…ƒç´ ï¼Œè¿”å›åŸæ•°ç»„å‰¯æœ¬</span>
    <span class="hljs-keyword">if</span> (targetIndex == -<span class="hljs-number">1</span>) {
        <span class="hljs-keyword">return</span> arr.clone();
    }
    
    <span class="hljs-comment">// åˆ›å»ºæ–°æ•°ç»„ï¼Œé•¿åº¦-1</span>
    <span class="hljs-type">int</span>[] newArr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[arr.length - <span class="hljs-number">1</span>];
    
    <span class="hljs-comment">// å¤åˆ¶ç›®æ ‡å…ƒç´ ä¹‹å‰çš„å…ƒç´ </span>
    System.arraycopy(arr, <span class="hljs-number">0</span>, newArr, <span class="hljs-number">0</span>, targetIndex);
    
    <span class="hljs-comment">// å¤åˆ¶ç›®æ ‡å…ƒç´ ä¹‹åçš„å…ƒç´ </span>
    System.arraycopy(arr, targetIndex + <span class="hljs-number">1</span>, newArr, targetIndex, 
                     arr.length - targetIndex - <span class="hljs-number">1</span>);
    
    <span class="hljs-keyword">return</span> newArr;
}
</code></pre>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>æœ¬æ–‡é€šè¿‡æ•°ç»„æŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤ä¸‰å¤§æ“ä½œçš„å®ç°ï¼Œå±•ç¤ºäº† Java æ•°ç»„æ“ä½œçš„æ ¸å¿ƒæŠ€å·§ï¼š</p>
<ol>
<li><strong>æŸ¥æ‰¾æ˜¯åŸºç¡€</strong>ï¼šæ‰€æœ‰å®šä½æ“ä½œéƒ½ä¾èµ–äºå…ƒç´ æŸ¥æ‰¾åŠŸèƒ½</li>
<li><strong>å¢åˆ é å¤åˆ¶</strong>ï¼šæ•°ç»„é•¿åº¦å›ºå®šï¼Œå¢åˆ æ“ä½œæœ¬è´¨æ˜¯åˆ›å»ºæ–°æ•°ç»„å¹¶åˆ†åŒºåŸŸå¤åˆ¶å…ƒç´ </li>
<li><strong>åˆ†æ®µå¤„ç†æ˜¯å…³é”®</strong>ï¼šæ— è®ºæ˜¯æ’å…¥è¿˜æ˜¯åˆ é™¤ï¼Œéƒ½éœ€è¦å°†æ•°ç»„åˆ†ä¸ºç›®æ ‡ä½ç½®å‰åä¸¤éƒ¨åˆ†åˆ†åˆ«å¤„ç†</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React+ts+viteè„šæ‰‹æ¶æ­å»ºï¼ˆäº”ï¼‰ã€ç™»å½•ç¯‡ã€‘]]></title>    <link>https://juejin.cn/post/7575182522411384870</link>    <guid>https://juejin.cn/post/7575182522411384870</guid>    <pubDate>2025-11-23T10:19:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575182522411384870" data-draft-id="7573886599433666611" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React+ts+viteè„šæ‰‹æ¶æ­å»ºï¼ˆäº”ï¼‰ã€ç™»å½•ç¯‡ã€‘"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-23T10:19:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¯»æ‰¾å…‰_sxy"/> <meta itemprop="url" content="https://juejin.cn/user/1495754537711661"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React+ts+viteè„šæ‰‹æ¶æ­å»ºï¼ˆäº”ï¼‰ã€ç™»å½•ç¯‡ã€‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1495754537711661/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¯»æ‰¾å…‰_sxy
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T10:19:42.000Z" title="Sun Nov 23 2025 10:19:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin:30px 0 10px;color:#cca152;position:relative;padding-left:50px;border-bottom:2px solid rgba(209,163,78,.6);padding-bottom:0}.markdown-body h1{font-size:30px}.markdown-body h1:before{content:"";width:50px;height:42px;display:block;position:absolute;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAhBAMAAACo1K8bAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAnUExURUdwTMyhUsqkUMyhUsyiUcyhUsyhUsyhUcyhUsyhUs2hUtytWNWoVX44si8AAAAKdFJOUwD8Bfcge95QncCWSSDAAAABh0lEQVQoz2WSPUvDQBjHjyPSOB7drh2OUOs36NA6pKAFwaEo4tDFIUWxGYLgKw4BEYUuHaQg7XJ0kccsUmrT2qUUQZp8KO/y1hSfIYEf/5eHu0MoGU1+sIbSw5Bypd92S+dWWrd34b15vuOPY4QxuvtYZp0lIVk3Zgjt+5zkh12AvBHnbW85BOjXySPwhc5CYcY0OdDh5dEUqIEj4cN8Dty3a1MqYJS4MaWU5wzVLwMMxqGSNQgA/VFa4gf50yhxSUW+db8ACa2gBxfnABVDFYHCPYrc7TLwCepJM8/ZoVsRwpxdHEozHUXd6idwVzFFM5BFmIhQVQjrNdnCvdd48wblI2VHtsAZioSsTYVwLoXvjMXH1icuNgPhQE+Ot1+xi8HeA3d1Df1f1JPVUOmsYLujBjuSySqSXYt+yTwbJ0pcyIhqTrxkn0BazRLizJosxRBued+z0jPD6VewOXl5utHRGmMNK3k0iTkzxpq2/oIQO6gLprF12kT/R20eyzlcg7iwK0dPsz/ibpdsCHweWwAAAABJRU5ErkJggg==) 0 0 no-repeat;background-size:80%;bottom:-10px;left:-2px}.markdown-body h2{font-size:24px}.markdown-body h2:before{content:"";width:50px;height:42px;display:block;position:absolute;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAhBAMAAACo1K8bAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAnUExURUdwTMyhUsqkUMyhUsyiUcyhUsyhUsyhUcyhUsyhUs2hUtytWNWoVX44si8AAAAKdFJOUwD8Bfcge95QncCWSSDAAAABh0lEQVQoz2WSPUvDQBjHjyPSOB7drh2OUOs36NA6pKAFwaEo4tDFIUWxGYLgKw4BEYUuHaQg7XJ0kccsUmrT2qUUQZp8KO/y1hSfIYEf/5eHu0MoGU1+sIbSw5Bypd92S+dWWrd34b15vuOPY4QxuvtYZp0lIVk3Zgjt+5zkh12AvBHnbW85BOjXySPwhc5CYcY0OdDh5dEUqIEj4cN8Dty3a1MqYJS4MaWU5wzVLwMMxqGSNQgA/VFa4gf50yhxSUW+db8ACa2gBxfnABVDFYHCPYrc7TLwCepJM8/ZoVsRwpxdHEozHUXd6idwVzFFM5BFmIhQVQjrNdnCvdd48wblI2VHtsAZioSsTYVwLoXvjMXH1icuNgPhQE+Ot1+xi8HeA3d1Df1f1JPVUOmsYLujBjuSySqSXYt+yTwbJ0pcyIhqTrxkn0BazRLizJosxRBued+z0jPD6VewOXl5utHRGmMNK3k0iTkzxpq2/oIQO6gLprF12kT/R20eyzlcg7iwK0dPsz/ibpdsCHweWwAAAABJRU5ErkJggg==) 0 0 no-repeat;background-size:70%;bottom:-15px;left:-1px}.markdown-body h3{font-size:18px}.markdown-body h3:before{content:"";width:50px;height:42px;display:block;position:absolute;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAhBAMAAACo1K8bAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAnUExURUdwTMyhUsqkUMyhUsyiUcyhUsyhUsyhUcyhUsyhUs2hUtytWNWoVX44si8AAAAKdFJOUwD8Bfcge95QncCWSSDAAAABh0lEQVQoz2WSPUvDQBjHjyPSOB7drh2OUOs36NA6pKAFwaEo4tDFIUWxGYLgKw4BEYUuHaQg7XJ0kccsUmrT2qUUQZp8KO/y1hSfIYEf/5eHu0MoGU1+sIbSw5Bypd92S+dWWrd34b15vuOPY4QxuvtYZp0lIVk3Zgjt+5zkh12AvBHnbW85BOjXySPwhc5CYcY0OdDh5dEUqIEj4cN8Dty3a1MqYJS4MaWU5wzVLwMMxqGSNQgA/VFa4gf50yhxSUW+db8ACa2gBxfnABVDFYHCPYrc7TLwCepJM8/ZoVsRwpxdHEozHUXd6idwVzFFM5BFmIhQVQjrNdnCvdd48wblI2VHtsAZioSsTYVwLoXvjMXH1icuNgPhQE+Ot1+xi8HeA3d1Df1f1JPVUOmsYLujBjuSySqSXYt+yTwbJ0pcyIhqTrxkn0BazRLizJosxRBued+z0jPD6VewOXl5utHRGmMNK3k0iTkzxpq2/oIQO6gLprF12kT/R20eyzlcg7iwK0dPsz/ibpdsCHweWwAAAABJRU5ErkJggg==) 0 0 no-repeat;background-size:60%;bottom:-19px;left:-2px}.markdown-body h4{font-size:16px;padding-left:0;border-bottom:1px solid rgba(209,163,78,.6)}.markdown-body h5{font-size:15px;padding-left:0}.markdown-body em{color:#cca152}.markdown-body del{text-decoration-color:#cca152;text-decoration-thickness:2px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:80%;margin:6px auto;box-shadow:0 6px 15px #8e8e8e;display:block;margin:20px auto!important;object-fit:contain;border-radius:8px}.markdown-body hr{border:none;border-top:2px solid #e0c9a1;margin-top:32px 0}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background:#f6efde;color:#b69454;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Mono,Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;background:#fef6e1;border-radius:4px;box-shadow:0 0 8px hsla(0,0%,47%,.45)}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAOCAMAAABaWb9VAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAAAAJcEhZcwAADsQAAA7EAZUrDhsAAACHUExURUdwTMxCKdc8NvdYT/9hVyLJPABBAGubKNiIOv+/K+ytJBakH9aZG+5QR5VZDOBDPhmtJ8+VGuGjH/CwJR26MR6+NBq0LPW1KBmwKetNRfJUTONHP92fHuSmIeFEPhu3LR29M/BTS+mqIuqsI5qdHyLKPP++Kv9gVf9lW//KLSXXQCTQP//FLMVm5KQAAAAldFJOUwAlPPz7+woBBPu8Mzu+FlRRKmvnweeG+Wqg6mVNXmuc1OCbmjZJWF/9AAABKklEQVQoz3WS6XaCMBCFRzAM++KGsqhtDwES3//5OtmA2uP9A9zwzRoAgBC0QgQrdA68OZsDr229YGHoIEj7Pl0ZOgjKa5lYJ4Rd1vijn3nuD4Qurjmv48o6RFyfbGDnS6DeEXZfk5ZfuBhdPb9I87ECNMh1EFJKIU6agWzaa01NbmLkxznSmmObJBkkUxrERf3i+ftRiZi7ShPCYY64UhTx1AR5CDYoMXkOKEY7GmTcTzeD/FiER68DfSLgSRqEIBoB3P8h3x8RZhBXGJGusJdD6rfCBl0YqvZNkrV9zej2cWlfJWG6fRpyM41qYH+GTPPi2yFLQYC0Qybm5o96lW77kMbcrBKtgeWTsthVamNXFF4I6x0DTPuugsVRFyYpyxzWqNvHJwed8ws7QyP1UwjNjwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fef6e1}.markdown-body a{text-decoration:none;color:#d8ac5a;border-bottom:1px solid #d8ac5a}.markdown-body a:active,.markdown-body a:hover{color:#93753f;border-color:#93753f}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f4e8c7;border-collapse:collapse}.markdown-body thead{background:rgba(255,227,176,.6588235294);text-align:left;display:table-header-group;border-bottom:1px solid rgba(255,227,176,.6588235294)}.markdown-body tbody{background:rgba(255,247,229,.3882352941)}.markdown-body td,.markdown-body th{padding:7px;line-height:24px;min-width:100px}.markdown-body blockquote{color:#bd954f;padding:1px 23px;margin:22px 0;border-left:4px solid #dcb267;background-color:#fff7e5}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol .task-list-item,.markdown-body ul .task-list-item{list-style:none}.markdown-body ol li{padding-left:6px}.markdown-body::marker{color:#dcb267}.markdown-body .contains-task-list{padding-left:0}.markdown-body .contains-task-list .task-list-item{list-style:none;position:relative}.markdown-body .contains-task-list .task-list-item input[type=checkbox]{position:relative;top:2px}.markdown-body .contains-task-list .task-list-item input[type=checkbox]:before{content:"";display:inline-block;height:12px;width:12px;position:absolute;left:-2px;top:-2px;border:2px solid #cda152;border-radius:5px}.markdown-body .contains-task-list .task-list-item input[type=checkbox]:checked{position:relative;top:2px}.markdown-body .contains-task-list .task-list-item input[type=checkbox]:checked:before{border:none;content:"";display:inline-block;height:17px;width:17px;position:absolute;left:-2px;top:-2px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAFo9M/3AAAAAXNSR0IArs4c6QAAAYhJREFUOBFjYACC0/MDGsDEiyvr/zOCeUwMJxn/A8HZRUEMYBFGJsZ6kFoQYALiAyAGCgDpA+sFijKeWRj4H1kWpIWBW1SDQcm+BCzOAiK/vr7BcO/gDbAAI4hE1waWgRBnmWCGIwkyKFjnwow0BhsJk9QLncvw5dV1oPE9MCEGmBWrgCKhcFEowyR+PSNYwemFAZ4M/xjMkRWYJm5oAPFB/joDpI1BHHQANgGPDxj+//vfCA4IdJ3GcevgQnAFhlHLwYIgSVA0wABcwY3tFQzokiBFGIEP0wmigW5wZAK5FFkQib0a6NUDcEmgb7AGFpIGZOZqoMFhIAFQknEAJpn9yLLEssFOBCp2IFaDkl0xg6C8FbJyB3gowUS5RdQYBORQYpVB1iwVHIIMwJh///AYTCmYRklNIBFmNi4GeYt0BhnjeIa3dw8wSBlEgDUhxw2yCRgGfHp2geHiqiSwUwUVrFAiFVkjjA1LrjgTHEwhFvosMCZM4NEIUoAtWWNoBGZ70/gN22HiAD2uhAzsYNBZAAAAAElFTkSuQmCC) 0 0 no-repeat;background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atelier-plateau-dark">.hljs-comment,.hljs-quote{color:#7e7777}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ca4949}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#b45a3c}.hljs-bullet,.hljs-string,.hljs-symbol{color:#4b8b8b}.hljs-section,.hljs-title{color:#7272ca}.hljs-keyword,.hljs-selector-tag{color:#8464c4}.hljs-addition,.hljs-deletion{color:#1b1818;display:inline-block;width:100%}.hljs-deletion{background-color:#ca4949}.hljs-addition{background-color:#4b8b8b}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1b1818;color:#8a8585}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä¸Šä¸€ç¯‡æˆ‘ä»¬ä»‹ç»äº†åœ¨è„šæ‰‹æ¶ä¸­é…ç½®ä»£ç æ ¼å¼è§„èŒƒã€ä»£ç æäº¤è§„èŒƒï¼š<a href="https://juejin.cn/post/7561623724090097683" target="_blank" title="https://juejin.cn/post/7561623724090097683">React+ts+viteè„šæ‰‹æ¶æ­å»ºï¼ˆäº”ï¼‰ã€è§„èŒƒç¯‡ã€‘</a></p>
<p>æœ¬ç¯‡æˆ‘ä»¬å°†å¼€å§‹è„šæ‰‹æ¶ä¸­çš„æœ€åä¸€ç¯‡--ç™»å½•ç¯‡</p>
<p>æœ¬æ–‡æˆ‘ä»¬å°†å®Œæˆä¸€ä¸ªä¼ ç»Ÿçš„è´¦å·+å¯†ç ç™»å½•åŠŸèƒ½</p>
<h2 data-id="heading-1">å…·ä½“æ­¥éª¤</h2>
<h3 data-id="heading-2">æ–°å»ºä¸€ä¸ªç™»å½•è·¯ç”±</h3>
<p>åœ¨è·¯ç”±é…ç½®ä¸­æ–°å»ºä¸€ä¸ªç™»å½•è·¯ç”±
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5cf6125ff1054441b3616fabdab9aab5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a-75om-5YWJX3N4eQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764497982&amp;x-signature=FCozqos%2FUo1%2BESlSoWqRff6n41I%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">æ–°å»ºç™»å½•+ä»£ç </h3>
<ul>
<li>åœ¨è¿™æ®µä»£ç ä¸­æˆ‘ä»¬åˆ†åˆ«åšäº†ï¼š
<ul>
<li>è´¦å·å’Œå¯†ç çš„è¾“å…¥æ¡†ã€ç™»å½•æŒ‰é’®</li>
<li>ç‚¹å‡»ç™»å½•æŒ‰é’®é€»è¾‘</li>
<li>ç™»å½•æˆåŠŸåå°†è¿”å›çš„tokenä¿å­˜åˆ°localStorage
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18acd908be1446849d505c7e2ffd6052~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a-75om-5YWJX3N4eQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764497982&amp;x-signature=nmwjyWjfJgykJ38I8KkCi0%2FKZrc%3D" alt="image.png" loading="lazy"/></li>
</ul>
</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"./index.css"</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Login</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [form, setForm] = <span class="hljs-title function_">useState</span>({
    <span class="hljs-attr">username</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">password</span>: <span class="hljs-string">""</span>,
  });

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleChange</span> = (<span class="hljs-params">e: React.ChangeEvent&lt;HTMLInputElement&gt;</span>) =&gt; {
    <span class="hljs-keyword">const</span> { name, value } = e.<span class="hljs-property">target</span>;
    <span class="hljs-title function_">setForm</span>({
      ...form,
      [name]: value,
    });
  };

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">login</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">if</span> (!form.<span class="hljs-property">username</span> || !form.<span class="hljs-property">password</span>) {
      <span class="hljs-title function_">alert</span>(<span class="hljs-string">"è¯·è¾“å…¥è´¦å·å¯†ç "</span>);
      <span class="hljs-keyword">return</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">"token"</span>, <span class="hljs-string">"123456"</span>);
    }
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"login"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ç™»å½•é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>
          <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥è´¦å·"</span>
          <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{form.username}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange}</span>
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
          <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥å¯†ç "</span>
          <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{form.password}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange}</span>
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{login}</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Login</span>;
</code></pre>
<p>é¡µé¢å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc37c86b10e24eeda46c40c807d88be3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a-75om-5YWJX3N4eQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764497982&amp;x-signature=mXOU%2FoLhsA0Qj%2BqUW1EJ%2BZFsfvo%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-4">tokençš„æºå¸¦</h3>
<p>æˆ‘ä»¬å­˜å‚¨å®Œtokenåï¼Œéœ€è¦åœ¨æ¯æ¬¡çš„æ¥å£è¯·æ±‚ä¸­éƒ½æºå¸¦ä¸Šï¼Œè¿™é‡Œæˆ‘ä»¬ç›´æ¥åœ¨è¯·æ±‚æ‹¦æˆªå™¨ä¸Šæºå¸¦ä¸Š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd2816b24f0941bf8ee5339088172d45~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a-75om-5YWJX3N4eQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764497982&amp;x-signature=PE78tMcmoFxSj8IpBichn0wH73k%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-5">ç™»å½•çš„æ ¡éªŒ</h3>
<p>ä¸€èˆ¬æ¥è¯´ä¸€ä¸ªéœ€è¦ç™»å½•çš„ç³»ç»Ÿï¼Œå¤§éƒ¨åˆ†çš„æ¥å£éƒ½æ˜¯éœ€è¦ç™»å½•éªŒè¯çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥å°†ç™»å½•çš„æ ¡éªŒå†™åœ¨å“åº”æ‹¦æˆªå™¨ä¸­ï¼Œå½“å‘ç°æ¥å£å“åº”å›æ¥çš„codeä¸ºæœªç™»å½•çš„codeæ—¶ï¼Œå³ç›´æ¥è·³è½¬åˆ°ç™»å½•é¡µé‡æ–°å¼€å§‹ç™»å½•</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba32290a36df4420baf2611e87114aed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a-75om-5YWJX3N4eQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764497982&amp;x-signature=mYwtHQQWQzmPaBg0ubqt4vIcGtQ%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p>è¿™æ ·ä¸€ä¸ªæç®€çš„ç™»å½•ç³»ç»Ÿå°±å·²ç»åšå¥½ã€‚ã€‚ã€‚</p>
<p>è¿™é‡Œæœ‰å‡ ç‚¹è¡¥å……ï¼š</p>
<ul>
<li>ç³»ç»Ÿç™»å½•çš„tokenä¸€èˆ¬æ˜¯é€šè¿‡æ¥å£è¿”å›çš„ï¼Œæˆ‘è¿™é‡Œæ˜¯æ¨¡æ‹Ÿäº†ä¸€ä¸‹ï¼Œå¤§å®¶åç»­å¯ä»¥æ ¹æ®è‡ªå·±é¡¹ç›®çš„å®é™…æƒ…å†µæ¥å†™æ¥å£</li>
<li>ç™»å½•çš„tokenæˆ‘æ˜¯å­˜åœ¨localStorageä¸­çš„ï¼Œä½ ä¹Ÿå¯ä»¥å­˜å‚¨åœ¨sessionStorageä¸­</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é—®ç­”åˆ°å†³ç­–ï¼šAgentic AIå¦‚ä½•é‡æ–°å®šä¹‰AIæ™ºèƒ½ä½“çš„æœªæ¥]]></title>    <link>https://juejin.cn/post/7575102209606402074</link>    <guid>https://juejin.cn/post/7575102209606402074</guid>    <pubDate>2025-11-23T10:38:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575102209606402074" data-draft-id="7575133880436490291" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é—®ç­”åˆ°å†³ç­–ï¼šAgentic AIå¦‚ä½•é‡æ–°å®šä¹‰AIæ™ºèƒ½ä½“çš„æœªæ¥"/> <meta itemprop="keywords" content="ç®—æ³•,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-23T10:38:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="MobotStone"/> <meta itemprop="url" content="https://juejin.cn/user/3839909554568840"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é—®ç­”åˆ°å†³ç­–ï¼šAgentic AIå¦‚ä½•é‡æ–°å®šä¹‰AIæ™ºèƒ½ä½“çš„æœªæ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3839909554568840/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    MobotStone
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T10:38:54.000Z" title="Sun Nov 23 2025 10:38:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ‰è¿™ä¹ˆä¸ªç°è±¡ï¼Œå¦‚æœä½ çš„ AI åŠ©æ‰‹ä¸å†åªæ˜¯ä¸ªå¬è¯çš„å·¥å…·ï¼Œè€Œæ˜¯èƒ½çœŸæ­£æ˜ç™½ä½ æƒ³è¦ä»€ä¹ˆï¼Œç„¶åè‡ªå·±è§„åˆ’ã€åŠ¨æ‰‹æ‰§è¡Œï¼Œè®©ä½ èƒ½è…¾å‡ºæ‰‹æ¥ï¼Œä¸“å¿ƒåšé‚£äº›çœŸæ­£é‡è¦çš„äº‹ã€‚</p>
<p>è¿™å¯ä¸æ˜¯ç§‘å¹»ç”µå½±é‡Œçš„æƒ…èŠ‚ã€‚</p>
<p>è¿™å°±æ˜¯ AI çš„æœªæ¥ï¼Œä¸€ç§å«åšâ€œ<strong>Agentic AI</strong>â€ï¼ˆè¿˜ä¸çŸ¥é“æ€ä¹ˆç¿»è¯‘åˆé€‚ï¼Œè‡ªä¸»å‹AIï¼Ÿï¼‰çš„æ–°æ¨¡å¼ï¼Œå®ƒå·²ç»å¼€å§‹æ”¹å˜æˆ‘ä»¬çš„å·¥ä½œæ–¹å¼ã€è‡ªåŠ¨åŒ–æµç¨‹ï¼Œå¹¶æ¿€å‘å…¨æ–°çš„åˆ›æ–°ã€‚</p>
<p>ä½ è®© AI åŠ©æ‰‹å†™å°é‚®ä»¶ï¼Œå®ƒå°±å†™äº†ã€‚ä½†å¦‚æœå®ƒæ›´è¿›ä¸€æ­¥ï¼Œä¸ä»…å¸®ä½ å†™ï¼Œè¿˜èƒ½è‡ªå·±åˆ¤æ–­è¿™å°é‚®ä»¶è¯¥å‘ç»™è°ã€ä»€ä¹ˆæ—¶å€™å‘æœ€åˆé€‚ï¼Œç”šè‡³åœ¨å¯¹æ–¹æ²¡å›å¤æ—¶ï¼Œä¸»åŠ¨å¸®ä½ è¿½é—®ä¸€ä¸‹å‘¢ï¼Ÿ</p>
<p>å†æƒ³è¿œä¸€ç‚¹ï¼šåŒä¸€ä¸ª AI è¿˜èƒ½ç®¡ç†ä½ çš„å¾…åŠäº‹é¡¹ï¼Œé€šè¿‡è§‚å¯Ÿä½ æ¯å¤©çš„å·¥ä½œä¹ æƒ¯ï¼Œåœ¨å°éº»çƒ¦æ¼”å˜æˆå¤§é—®é¢˜ä¹‹å‰ï¼Œå°±æå‰ç»™ä½ é¢„è­¦ã€‚</p>
<p>è¿™å°±æ˜¯ Agentic AI å¸¦æ¥çš„å¯èƒ½æ€§ã€‚å®ƒä¸å†åªæ˜¯ä¸€ä¸ªé—®ä¸€å¥ç­”ä¸€å¥ã€æˆ–è€…ç”Ÿæˆå†…å®¹çš„å·¥å…·ï¼Œè€Œæ˜¯æ›´åƒä¸€ä¸ªâ€œæ•°å­—é˜Ÿå‹â€ã€‚å®ƒä¼šä¸ºäº†ä¸€ä¸ªæ˜ç¡®çš„ç›®æ ‡ï¼Œè‡ªå·±åšå†³å®šã€è§„åˆ’æ­¥éª¤ï¼Œå¹¶é‡‡å–è¡ŒåŠ¨ã€‚</p>
<p>åœ¨æ¥ä¸‹æ¥çš„å†…å®¹ï¼Œæˆ‘ä»¬å°±æ¥èŠèŠ Agentic AI åˆ°åº•æ˜¯ä»€ä¹ˆã€å®ƒå’Œæˆ‘ä»¬ç†ŸçŸ¥çš„ AIæ™ºèƒ½ä½“æœ‰ä»€ä¹ˆä¸åŒï¼Œä»¥åŠä¸ºä»€ä¹ˆå®ƒä¼šæˆä¸ºç°åœ¨ AI é¢†åŸŸæœ€çƒ­é—¨çš„è¯é¢˜ä¹‹ä¸€ã€‚</p>
<h2 data-id="heading-0"><strong>ä»€ä¹ˆæ˜¯Agentic AIï¼Ÿ</strong></h2>
<p>Agentic AIæŒ‡çš„æ˜¯èƒ½å¤Ÿ<strong>ç‹¬ç«‹æ€è€ƒã€åˆ¶å®šè®¡åˆ’å¹¶é‡‡å–è¡ŒåŠ¨</strong>çš„äººå·¥æ™ºèƒ½ç³»ç»Ÿï¼Œå°±åƒä¸€ä¸ªæœ‰ä½¿å‘½çš„ä»£ç†äººä¸€æ ·ã€‚è¿™äº›ç³»ç»Ÿä»¥ç›®æ ‡ä¸ºå¯¼å‘ï¼Œèƒ½å¤Ÿå°†å¤§ä»»åŠ¡æ‹†è§£æˆå°æ­¥éª¤ï¼Œæ‰¾å‡ºæœ€ä½³å®ç°æ–¹å¼ï¼Œç”šè‡³åœ¨æƒ…å†µå‘ç”Ÿå˜åŒ–æ—¶çµæ´»è°ƒæ•´ã€‚</p>
<h3 data-id="heading-1">å¯ä»¥è¿™æ ·ç†è§£ï¼š</h3>
<ul>
<li><strong>ä¼ ç»ŸAI</strong>ï¼šå›ç­”ä½ çš„é—®é¢˜</li>
<li><strong>ç”Ÿæˆå¼AI</strong>ï¼šåˆ›é€ å†…å®¹</li>
<li><strong>AIæ™ºèƒ½ä½“</strong>ï¼šæ ¹æ®è§„åˆ™æˆ–æŒ‡ä»¤æ‰§è¡Œç‰¹å®šä»»åŠ¡</li>
<li><strong>Agentic AI</strong>ï¼šè®¾å®šç›®æ ‡ï¼Œåˆ¶å®šè®¡åˆ’ï¼Œä»˜è¯¸å®æ–½ï¼Œå¹¶ä»ç»“æœä¸­å­¦ä¹ </li>
</ul>
<h3 data-id="heading-2">ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼š</h3>
<p>å‡è®¾ä½ åœ¨ä¸€å®¶ä¿é™©å…¬å¸å·¥ä½œã€‚ä¸å…¶åªæ˜¯ç”¨èŠå¤©æœºå™¨äººå›ç­”ä¿å•é—®é¢˜ï¼ˆä¼ ç»ŸAIï¼‰ï¼Œæˆ–è€…ç”Ÿæˆå®¢æˆ·é‚®ä»¶ï¼ˆç”Ÿæˆå¼AIï¼‰ï¼Œæˆ–è€…è‡ªåŠ¨å¤„ç†ç†èµ”ç¡®è®¤ï¼ˆAI<strong>æ™ºèƒ½ä½“</strong>ï¼‰ä¸åŒï¼Œ<strong>Agentic AI</strong>èƒ½å¤Ÿï¼š</p>
<ul>
<li>å‘ç°æŸä¸ªç‰¹å®šåœ°åŒºçš„ç†èµ”æ•°é‡æ¿€å¢</li>
<li>åˆ©ç”¨å†…éƒ¨å’Œå¤–éƒ¨æ•°æ®è°ƒæŸ¥åŸå› </li>
<li>æ›´æ–°æ‰¿ä¿é£é™©æ¨¡å‹</li>
<li>ä¸ºå—å½±å“çš„å®¢æˆ·èµ·è‰é’ˆå¯¹æ€§æ²Ÿé€šå†…å®¹</li>
<li>æé†’åˆè§„å’Œåæ¬ºè¯ˆå›¢é˜Ÿ</li>
<li>æŒç»­ç›‘æ§å¹¶è°ƒæ•´ç­–ç•¥â€”â€”å®Œå…¨è‡ªä¸»å®Œæˆ</li>
</ul>
<p>è¿™å°±æ˜¯åŒºåˆ«æ‰€åœ¨â€”â€”Agentic AIä¸ä»…ä»…æ˜¯è¾…åŠ©å·¥å…·ï¼Œå®ƒå¸¦æ¥çš„æ˜¯<strong>ä¸»åŠ¨æ€§ã€ç‹¬ç«‹æ€§å’Œé€‚åº”æ€§</strong>ã€‚</p>
<h3 data-id="heading-3">ä»€ä¹ˆä¸æ˜¯<strong>Agentic AI</strong>ï¼Ÿ</h3>
<p>ä¸ºäº†çœŸæ­£ç†è§£ä»€ä¹ˆæ˜¯<strong>Agentic AI</strong>ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹å®ƒä¸æ˜¯ä»€ä¹ˆã€‚</p>
<ul>
<li><strong>ä¸æ˜¯ç®€å•çš„é—®ç­”æœºå™¨äºº</strong>ï¼šæ¯”å¦‚é‚£ç§åªå›ç­”å¸¸è§é—®é¢˜çš„æœºå™¨äººï¼Œè™½ç„¶èƒ½å¸®å¿™è§£ç­”ç–‘é—®ï¼Œä½†å®ƒåªæ˜¯å¯¹é—®é¢˜ä½œå‡ºå³æ—¶å›å¤ï¼Œä¸ä¼šè¶…å‡ºå½“å‰è¯·æ±‚å»è¿›è¡Œè§„åˆ’æˆ–é‡‡å–è¡ŒåŠ¨ã€‚</li>
<li><strong>ä¸æ˜¯åªä¼šç”Ÿæˆæ–‡æœ¬çš„å·¥å…·</strong>ï¼šæ¯”å¦‚ ChatGPT åœ¨æ”¶åˆ°æŒ‡ä»¤æ—¶ç¼–å†™åšå®¢æ–‡ç« ï¼Œè™½ç„¶æ•ˆæœå‡ºè‰²ï¼Œä½†å®ƒä»…ä»…æ˜¯åœ¨äººçš„æŒ‡ç¤ºä¸‹å·¥ä½œï¼Œä¸èƒ½è‡ªå·±è®¾å®šæ›´å¤§çš„ç›®æ ‡ã€‚</li>
<li><strong>ä¸æ˜¯æ¨èç³»ç»Ÿ</strong>ï¼šé‚£äº›ä¼šç»™ä½ æ¨èç”µå½±æˆ–å•†å“çš„ç³»ç»Ÿï¼Œè™½ç„¶å¾ˆèªæ˜ï¼Œä½†å®ƒä»¬ä¸»è¦ä¾é é¢„æµ‹ï¼Œè€Œä¸æ˜¯æ ¹æ®ç›®æ ‡åšå‡ºå®é™…è¡ŒåŠ¨ã€‚</li>
<li><strong>ä¹Ÿä¸ä»…ä»…æ˜¯è‡ªåŠ¨åŒ–å·¥å…·</strong>ï¼šæ¯”å¦‚é‚£äº›è‡ªåŠ¨å‘é€æé†’é‚®ä»¶æˆ–æ›´æ–°è¡¨æ ¼çš„ç¨‹åºï¼Œå®ƒä»¬é€šå¸¸æ˜¯æ ¹æ®å›ºå®šè§„åˆ™æ‰§è¡Œä»»åŠ¡ï¼Œä¸ä¼šè‡ªè¡Œå†³å®šè¦å¹²ä»€ä¹ˆæˆ–ä¸ºä»€ä¹ˆå»åšã€‚</li>
</ul>
<p>åœ¨ä¸Šé¢è¿™äº›æƒ…å†µä¸­ï¼Œç›¸å…³ç³»ç»Ÿéƒ½æ˜¯â€œè¢«åŠ¨å¼â€çš„ï¼šå®ƒä»¬åªæ˜¯åœ¨ç­‰å¾…è¾“å…¥æˆ–æŒ‰ç…§äº‹å…ˆè®¾å®šå¥½çš„æµç¨‹å·¥ä½œï¼Œç¼ºä¹è‡ªä¸»è®¾å®šç›®æ ‡ã€åšå‡ºå†³ç­–æˆ–æ ¹æ®ç¯å¢ƒå˜åŒ–è‡ªæˆ‘è°ƒæ•´çš„èƒ½åŠ›ã€‚</p>
<p>è€Œ<strong>Agentic AI</strong>æ›´è¿›ä¸€æ­¥â€”â€”å®ƒèƒ½æœ‰ç›®çš„åœ°è¡ŒåŠ¨ï¼Œä¼šæ ¹æ®æƒ…å†µçµæ´»è°ƒæ•´ï¼Œè€Œä¸”å¸¸å¸¸ä¸éœ€è¦äººä¸æ–­ç›‘ç£ã€‚å®ƒä¸ä»…ä»…æ˜¯å®ç°è‡ªåŠ¨åŒ–ï¼Œæ›´æ˜¯åœ¨å®ç°æ™ºèƒ½åŒ–çš„ç‹¬ç«‹å†³ç­–å’Œè¡ŒåŠ¨ã€‚</p>
<h2 data-id="heading-4">å¯¹æ¯”è¿™äº›æ¦‚å¿µï¼šAI vs. ç”Ÿæˆå¼ AI vs. æ™ºèƒ½ä½“ vs. <strong>Agentic AI</strong></h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d494255b982a4a7990b7530cc149a699~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9ib3RTdG9uZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764499133&amp;x-signature=eetyAAXArB8CgFg17%2B97pDRvHlE%3D" alt="" loading="lazy"/></p>



























































<table><thead><tr><th>ç‰¹æ€§</th><th>ç”Ÿæˆå¼AI</th><th>æ™ºèƒ½ä½“</th><th>Agentic AI</th></tr></thead><tbody><tr><td><strong>ç›®çš„</strong></td><td>ç”Ÿæˆè¾“å‡º</td><td>å®ç°ç›®æ ‡</td><td>å®Œæˆé«˜å±‚ç›®æ ‡</td></tr><tr><td><strong>æ‰§è¡Œæ–¹å¼</strong></td><td>ä¸€æ¬¡æ€§ç”Ÿæˆ</td><td>ä¸€æ­¥æ­¥åšå‡ºå†³ç­–</td><td>åŠ¨æ€ã€å¤šæ­¥éª¤å†³ç­–</td></tr><tr><td><strong>å·¥å…·ä½¿ç”¨</strong></td><td>ä¸æ”¯æŒ</td><td>åŸºç¡€å·¥å…·è®¿é—®</td><td>é«˜çº§å·¥å…·ç¼–æ’</td></tr><tr><td><strong>è®°å¿†èƒ½åŠ›</strong></td><td>æ— è®°å¿†</td><td>æœ‰é™/ä¸´æ—¶è®°å¿†</td><td>è·¨ä¼šè¯ä½¿ç”¨è®°å¿†</td></tr><tr><td><strong>æ¨ç†èƒ½åŠ›</strong></td><td>åŸºç¡€ï¼ˆæ¨¡å‹å†…éƒ¨ï¼‰</td><td>ä¸­ç­‰æ¨ç†èƒ½åŠ›</td><td>é«˜çº§æ¨ç†åŠè‡ªæˆ‘æ‰¹è¯„</td></tr><tr><td><strong>å­Agentæ”¯æŒ</strong></td><td>æ— </td><td>å•ä¸ªAgent</td><td>åä½œå¼å­Agent</td></tr><tr><td><strong>è‡ªä¸»ç¨‹åº¦</strong></td><td>ä½</td><td>ä¸­ç­‰</td><td>é«˜</td></tr><tr><td><strong>æœ€é€‚ç”¨åœºæ™¯</strong></td><td>æ–‡æœ¬/å›¾åƒ/ä»£ç ç”Ÿæˆ</td><td>ç®€å•ä»»åŠ¡è‡ªåŠ¨åŒ–</td><td>å¤æ‚å†³ç­–å’Œé—®é¢˜è§£å†³</td></tr></tbody></table>
<h3 data-id="heading-5"><strong>äººå·¥æ™ºèƒ½ (AI)</strong></h3>
<p>äººå·¥æ™ºèƒ½ï¼ˆAIï¼‰å°±åƒä¸€ä¸ªå¤§å¸½å­ï¼ŒåŒ…å«äº†å¾ˆå¤šä¸åŒçš„æŠ€æœ¯ã€‚ç®€å•æ¥è¯´ï¼Œå®ƒæŒ‡çš„æ˜¯é‚£äº›èƒ½æ¨¡ä»¿äººç±»æ™ºèƒ½æ¥å®Œæˆäº‹æƒ…çš„æœºå™¨æˆ–ç³»ç»Ÿï¼Œæ¯”å¦‚å­¦ä¹ ã€æ€è€ƒæˆ–è€…è§£å†³é—®é¢˜ã€‚</p>
<p><strong>ä¸¾ä¸ªä¾‹å­ï¼š</strong> ä¸€ç§è¯„ä¼°ä¿é™©ç´¢èµ”çš„ç³»ç»Ÿï¼Œå®ƒä¼šåˆ†æå®¢æˆ·æ•°æ®å’Œç´¢èµ”å†å²ï¼Œæ¥åˆ¤æ–­ç´¢èµ”æ˜¯å¦æœ‰æ¬ºè¯ˆè¡Œä¸ºã€‚</p>
<p><strong>å®ƒèƒ½åšä»€ä¹ˆï¼š</strong> å®ƒå¯ä»¥å¤„ç†æœ‰è§„å¾‹çš„æ•°æ®ï¼Œå‘ç°å…¶ä¸­çš„è¶‹åŠ¿ï¼Œå¹¶å¸®åŠ©äººä»¬åšå‡ºå†³ç­–â€”â€”æ¯”å¦‚æ‰¹å‡†æˆ–æ ‡è®°ç´¢èµ”ã€‚</p>
<p><strong>å®ƒçš„å±€é™æ€§ï¼š</strong> ä¼ ç»Ÿçš„AIé€šå¸¸æ¯”è¾ƒâ€œå•ä¸€â€ï¼Œå®ƒè¢«è®¾è®¡ç”¨äºå®Œæˆç‰¹å®šçš„ä»»åŠ¡ã€‚å®ƒæ— æ³•å¤„ç†è¶…å‡ºå®ƒè®­ç»ƒèŒƒå›´çš„äº‹æƒ…ï¼Œè€Œä¸”å®ƒä¹Ÿæ— æ³•åƒäººç±»ä¸€æ ·ç†è§£ä¸Šä¸‹æ–‡å’Œç›®çš„ã€‚</p>
<h3 data-id="heading-6"><strong>ç”Ÿæˆå¼äººå·¥æ™ºèƒ½ (Generative AI)</strong></h3>
<p>ç”Ÿæˆå¼äººå·¥æ™ºèƒ½ï¼ˆGenerative AIï¼‰æ˜¯ä¸€ç§â€œæœ‰åˆ›é€ åŠ›â€çš„AIã€‚å®ƒèƒ½åˆ›é€ å‡ºå…¨æ–°çš„å†…å®¹ï¼Œä¾‹å¦‚æ–‡æœ¬ã€å›¾ç‰‡ã€è§†é¢‘æˆ–ä»£ç ï¼Œé€šè¿‡å­¦ä¹ ç°æœ‰çš„æ•°æ®æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚</p>
<p><strong>ä¸¾ä¸ªä¾‹å­ï¼š</strong> ä¸€ç§ç”Ÿæˆå¼AIæ¨¡å‹å¯ä»¥æ ¹æ®å®¢æˆ·çš„äº¤æ˜“æ•°æ®å’ŒæŠ•èµ„ç›®æ ‡ï¼Œä¸ºå®¢æˆ·ç”Ÿæˆä¸ªæ€§åŒ–çš„è´¢åŠ¡å»ºè®®æŠ¥å‘Šã€‚</p>
<p><strong>å®ƒèƒ½åšä»€ä¹ˆï¼š</strong> å½“ä½ ç»™å®ƒä¸€ä¸ªé—®é¢˜ï¼Œå®ƒä¼šäº§ç”Ÿå†…å®¹ï¼Œæ¯”å¦‚ä¸€ä»½æ‰¿ä¿æŠ¥å‘Šã€ä¸€ä»½ä¿å•æ¦‚è¦ï¼Œæˆ–è€…ç»™å®¢æˆ·å‘é€çš„ä¸€å°é‚®ä»¶ã€‚</p>
<p><strong>å®ƒçš„å±€é™æ€§ï¼š</strong> å®ƒæ˜¯â€œååº”å¼â€çš„ã€‚å®ƒåªèƒ½åœ¨ä½ æ˜ç¡®æä¾›è¾“å…¥çš„æ—¶å€™å·¥ä½œã€‚å®ƒä¸ä¼šä¸»åŠ¨å†³å®šè¦åˆ›é€ ä»€ä¹ˆï¼Œæˆ–è€…ä»€ä¹ˆæ—¶å€™å¼€å§‹è¡ŒåŠ¨â€”â€”å®ƒåªæ˜¯åœ¨å“åº”ä½ çš„æŒ‡ä»¤ã€‚</p>
<h3 data-id="heading-7"><strong>AIæ™ºèƒ½ä½“ (AI Agents)</strong></h3>
<p>AIæ™ºèƒ½ä½“ï¼ˆAI Agentsï¼‰èƒ½â€œè¡ŒåŠ¨â€ã€‚å®ƒä»¬è¢«è®¾è®¡ç”¨æ¥æ ¹æ®æŒ‡ä»¤å®Œæˆç‰¹å®šçš„ä»»åŠ¡ï¼Œé€šå¸¸æ˜¯ä¸ºäº†è‡ªåŠ¨åŒ–é‡å¤æ€§çš„å·¥ä½œã€‚</p>
<p><strong>ä¸¾ä¸ªä¾‹å­ï¼š</strong> ä¸€ä¸ªAIæ™ºèƒ½ä½“å¯ä»¥è‡ªåŠ¨å°†æ”¶åˆ°çš„é‚®ä»¶æ ¹æ®å†…å®¹åˆ†æï¼Œè·¯ç”±åˆ°æ­£ç¡®çš„éƒ¨é—¨â€”â€”ä¾‹å¦‚ç´¢èµ”ã€æ‰¿ä¿æˆ–æ”¯æŒéƒ¨é—¨ã€‚</p>
<p><strong>å®ƒèƒ½åšä»€ä¹ˆï¼š</strong> å®ƒå¯ä»¥æŒ‰ç…§è®¾å®šçš„ä»»åŠ¡æ‰§è¡ŒæŒ‡ä»¤â€”â€”æ¯”å¦‚ç»™å®¢æˆ·å‘é€æé†’ã€æ›´æ–°CRMè®°å½•æˆ–è€…ä»è¡¨æ ¼ä¸­æå–å…³é”®æ•°æ®ã€‚</p>
<p><strong>å®ƒçš„å±€é™æ€§ï¼š</strong> å®ƒé€šå¸¸æ˜¯â€œä»»åŠ¡å¯¼å‘â€çš„ï¼Œå¹¶ä¸”é€šå¸¸æ˜¯â€œåŸºäºè§„åˆ™â€çš„ã€‚å®ƒæ— æ³•é€‚åº”æƒ…å†µï¼Œä¹Ÿæ— æ³•ä¸»åŠ¨é‡‡å–è¡ŒåŠ¨ï¼Œé™¤éå®ƒè¢«ç¼–ç¨‹æ¥æ‰§è¡Œç‰¹å®šçš„ä»»åŠ¡ã€‚</p>
<h3 data-id="heading-8"><strong>Agentic AI</strong></h3>
<p>è¿™æ˜¯æœ€æ–°ä¹Ÿæ˜¯æœ€å…ˆè¿›çš„ä¸€ç§AIå½¢å¼ã€‚æ™ºèƒ½ä½“å¼AI ä¸ä»…ä»…ä¼šç­‰å¾…æŒ‡ä»¤â€”â€”å®ƒèƒ½â€œè®¾å®šè‡ªå·±çš„ç›®æ ‡ã€åˆ¶å®šè®¡åˆ’å¹¶é‡‡å–è¡ŒåŠ¨â€æ¥å®ç°è¿™äº›ç›®æ ‡ï¼Œå°±åƒäººç±»ä¸€æ ·ã€‚</p>
<p><strong>ä¸¾ä¸ªä¾‹å­ï¼š</strong> ä½ å‘Šè¯‰ä¸€ä¸ªæ™ºèƒ½ä½“å¼AI â€œæ”¹è¿›å®¢æˆ·æ³¨å†Œæµç¨‹â€ã€‚å®ƒä¼šåˆ†ææ³¨å†Œè¿‡ç¨‹ä¸­çš„é—®é¢˜ï¼Œé‡æ–°è®¾è®¡æ³¨å†Œæµç¨‹ï¼Œä½¿ç”¨RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ç”Ÿæˆä¸ªæ€§åŒ–çš„å¸¸è§é—®é¢˜è§£ç­”ï¼Œå¹¶è‡ªåŠ¨æ”¶é›†æ–‡æ¡£ï¼ŒåŒæ—¶è¿˜ä¼šè¡¡é‡å®¢æˆ·æ»¡æ„åº¦â€”â€”è¿™äº›éƒ½æ˜¯å®ƒè‡ªå·±å®Œæˆçš„ã€‚</p>
<p><strong>å®ƒèƒ½åšä»€ä¹ˆï¼š</strong> å®ƒå¯ä»¥â€œæ€è€ƒã€æ¨ç†å’Œé€‚åº”â€ã€‚å®ƒå¯ä»¥åˆ›å»ºå’Œæ”¹è¿›ç­–ç•¥ã€è§£å†³é—®é¢˜ï¼Œå¹¶ä¸å…¶ä»–ç³»ç»ŸååŒå·¥ä½œâ€”â€”å°±åƒä¸€ä½æ•°å­—é¡¹ç›®ç»ç†æˆ–ä¸šåŠ¡åˆ†æå¸ˆã€‚</p>
<p><strong>å®ƒçš„å±€é™æ€§ï¼š</strong> å®ƒâ€œè¿˜åœ¨å‘å±•ä¸­â€ã€‚æ™ºèƒ½ä½“å¼AIå¯èƒ½éœ€è¦ä¸€äº›ç›‘ç£ï¼Œä»¥ç¡®ä¿å®ƒä¸å…¬å¸çš„ç›®æ ‡ã€ä»·å€¼è§‚å’Œå®‰å…¨é™åˆ¶ä¿æŒä¸€è‡´ã€‚å®ƒéå¸¸å¼ºå¤§ï¼Œä½†å¹¶éä¸‡æ— ä¸€å¤±çš„ã€‚</p>
<h3 data-id="heading-9"><strong>Agentic AIçš„æ ¸å¿ƒç‰¹å¾</strong></h3>
<p>Agentic AIä¸åªæ˜¯èªæ˜ï¼Œæ›´é‡è¦çš„æ˜¯<strong>æœ‰æ˜ç¡®ç›®æ ‡ï¼Œèƒ½ä¸»åŠ¨å‡ºå‡»</strong>ã€‚å®ƒèåˆäº†æ€è€ƒèƒ½åŠ›ã€è®°å¿†èƒ½åŠ›å’Œç‹¬ç«‹è¡ŒåŠ¨èƒ½åŠ›ï¼Œæ›´åƒæ˜¯ä½ çš„æ•°å­—åŒäº‹ï¼Œè€Œä¸æ˜¯ä¼ ç»Ÿå·¥å…·ã€‚</p>
<ul>
<li><strong>æœ‰æ˜ç¡®ç›®æ ‡ï¼š</strong>Â æœç€å…·ä½“ç›®æ ‡å‰è¿›ï¼Œè€Œä¸æ˜¯è¢«åŠ¨åœ°å›ç­”æé—®ã€‚</li>
<li><strong>ç‹¬ç«‹è¡ŒåŠ¨ï¼š</strong>Â ä¸»åŠ¨å‡ºå‡»ï¼Œæ‰§è¡Œä»»åŠ¡æ—¶ä¸éœ€è¦ä½ ä¸€æ­¥æ­¥å‘Šè¯‰å®ƒæ€ä¹ˆåšã€‚</li>
<li><strong>ä¼šæ€è€ƒå’Œè§„åˆ’ï¼š</strong>Â èƒ½æŠŠå¤æ‚é—®é¢˜æ‹†è§£å¼€ï¼Œè‡ªå·±æƒ³æ¸…æ¥šæœ€å¥½çš„è§£å†³åŠæ³•ã€‚</li>
<li><strong>æœ‰è®°å¿†å’Œå­¦ä¹ èƒ½åŠ›ï¼š</strong>Â è®°å¾—ä¹‹å‰åšè¿‡ä»€ä¹ˆã€ç»“æœæ€æ ·ï¼Œç”¨è¿™äº›ç»éªŒæ¥åšæ›´å¥½çš„å†³ç­–ã€‚</li>
<li><strong>ç†è§£æƒ…å¢ƒï¼š</strong>Â èƒ½æ„ŸçŸ¥å‘¨å›´çš„ç¯å¢ƒï¼Œæ ¹æ®ä¸åŒæƒ…å†µè°ƒæ•´è‡ªå·±çš„è¡ŒåŠ¨æ–¹å¼ã€‚</li>
<li><strong>çŸ¥é“ä½•æ—¶éœ€è¦äººï¼š</strong>Â é‡åˆ°é£é™©æ—¶ä¼šåœä¸‹æ¥é—®ä½ ã€å‘ä½ æ±‡æŠ¥ï¼Œç¡®ä¿ä¸€åˆ‡åœ¨æ§åˆ¶ä¹‹ä¸­ã€‚</li>
</ul>
<p>è¿™ç§<strong>ç‹¬ç«‹æ€è€ƒå’Œä¸»åŠ¨è¡ŒåŠ¨çš„ç»“åˆ</strong>ï¼Œå°±æ˜¯Agentic AIçœŸæ­£å‰å®³çš„åœ°æ–¹ã€‚</p>
<h3 data-id="heading-10"><strong>ä¸ºä»€ä¹ˆç°åœ¨éœ€è¦ Agentic AIï¼Ÿ</strong></h3>
<p>åœ¨ç°åœ¨è¿™ä¸ªå˜åŒ–é£å¿«çš„å‘å±•ç¯å¢ƒä¸­ï¼ŒAgentic AI æ­£åœ¨æˆä¸ºæ¨åŠ¨æ™ºèƒ½åŒ–ã€å…¨æµç¨‹è‡ªåŠ¨åŒ–çš„å…³é”®åŠ›é‡ã€‚å®ƒçš„é‡è¦æ€§ä½“ç°åœ¨è¿™å‡ ç‚¹ï¼š</p>
<ul>
<li><strong>æ•°æ®å¤ªå¤šï¼Œå†³ç­–å˜æ…¢</strong> ä¿é™©å…¬å¸æ¯å¤©è¦å¤„ç†æ”¿ç­–æ–‡ä»¶ã€ç†èµ”èµ„æ–™ã€æ³•è§„æ›´æ–°ã€å®¢æˆ·æ²Ÿé€šè¿™äº›æ‚ä¹±çš„ä¿¡æ¯ã€‚Agentic AI èƒ½å¸®ç€<strong>æ•´ç†ä¿¡æ¯ã€åˆ†æ¸…è½»é‡ç¼“æ€¥ã€ä¸»åŠ¨æ‰§è¡Œä»»åŠ¡</strong>ï¼Œæ¯”å¦‚åŠ å¿«æ ¸ä¿é€Ÿåº¦ã€æå‡æ¬ºè¯ˆè¯†åˆ«æ•ˆç‡ã€ç®€åŒ–åˆè§„æµç¨‹ã€‚</li>
<li><strong>AI å·¥å…·è¶Šæ¥è¶Šæˆç†Ÿ</strong> ç°åœ¨æœ‰äº†åƒ GPT-4 è¿™æ ·çš„å¼ºå¤§è¯­è¨€æ¨¡å‹ï¼ŒåŠ ä¸Š LangChainã€ReActã€AutoGPT è¿™ç±»å¹³å°ï¼ŒAI èƒ½<strong>è·¨æ–‡æ¡£ã€è·¨ç³»ç»Ÿã€è·¨ä»»åŠ¡åˆ†æé—®é¢˜</strong>ã€‚è¿™è®©å®¢æˆ·å¼€æˆ·ã€ç†èµ”åˆ†ç±»ã€é£é™©è¯„ä¼°è¿™äº›æµç¨‹å¯ä»¥è¢«æ™ºèƒ½è‡ªåŠ¨åŒ–ã€‚</li>
<li><strong>è¦çš„æ˜¯èƒ½è‡ªå·±å¹²æ´»çš„AI</strong> ä¼ä¸šä¸å†æ»¡è¶³äºæ­»æ¿çš„è§„åˆ™æœºå™¨äººï¼Œç°åœ¨å¸Œæœ›AIèƒ½<strong>ä¸»åŠ¨å‘èµ·è¡ŒåŠ¨ã€å®æ—¶ç›‘æ§æ•ˆæœã€çµæ´»è°ƒæ•´ç­–ç•¥</strong>ã€‚æ¯”å¦‚åœ¨äº¤æ˜“ä¸­å‘ç°å¼‚å¸¸ï¼Œæˆ–è€…åœ¨ç†èµ”æ—¶è‡ªåŠ¨æ¨èä¸‹ä¸€æ­¥æ“ä½œï¼Œå®ƒéƒ½èƒ½åšåˆ°ã€‚</li>
<li><strong>ä»çœé’±åˆ°èµšé’±</strong> ä¼ ç»Ÿè‡ªåŠ¨åŒ–ï¼ˆRPAï¼‰åªèƒ½èŠ‚çœæ—¶é—´ï¼ŒAgentic AI å´èƒ½<strong>åˆ›é€ å®é™…ä»·å€¼</strong>ã€‚å®ƒèƒ½æå‡å®¢æˆ·ä½“éªŒã€æé«˜ç•™å­˜ç‡ã€å®ç°ä¸ªæ€§åŒ–æœåŠ¡ï¼Œç”šè‡³å¸®å…¬å¸å‘ç°æ–°æ”¶å…¥æ¥æºâ€”â€”åœ¨æ•´ä¸ªä¿é™©å’ŒæŠ•èµ„æµç¨‹é‡Œï¼Œå®ƒéƒ½æ˜¯ä¸ªé è°±çš„æ•°å­—ä¼™ä¼´ã€‚</li>
</ul>
<p>Agentic AI ä¸æ˜¯å•çº¯åœ°æŠŠä»»åŠ¡åšå¾—æ›´å¿«ï¼Œè€Œæ˜¯è®©æ•´ä¸ªä¸šåŠ¡æµç¨‹å˜å¾—æ›´<strong>èªæ˜ã€çµæ´»ã€æœ‰é€‚åº”æ€§</strong>ã€‚å®ƒä»£è¡¨çš„ä¸æ˜¯ç®€å•çš„è‡ªåŠ¨åŒ–ï¼Œè€Œæ˜¯è®©AIçœŸæ­£å…·å¤‡<strong>è‡ªä¸»è¡ŒåŠ¨åŠ›</strong>çš„è½¬å˜ã€‚</p>
<h2 data-id="heading-11"><strong>æ€»ç»“</strong></h2>
<p>Agentic AI çš„å‡ºç°ï¼Œæ ‡å¿—ç€ AI çš„è§’è‰²è¿æ¥äº†ä¸€æ¬¡å¤§å˜èº«ã€‚å®ƒä¸å†æ˜¯ä¸€ä¸ªä½ å«å®ƒåšä»€ä¹ˆã€å®ƒå°±åšä»€ä¹ˆçš„è¢«åŠ¨å·¥å…·ï¼Œè€Œæ˜¯å˜æˆäº†ä¸€ä¸ªèƒ½ä¸»åŠ¨å¹²æ´»ã€ä¸»åŠ¨æ€è€ƒçš„â€œæ•°å­—åŒäº‹â€ã€‚</p>
<p>å®ƒçš„ä»»åŠ¡ä¸å†åªæ˜¯ç”Ÿæˆç‚¹å†…å®¹æˆ–è·‘è·‘å›ºå®šæµç¨‹ï¼Œè€Œæ˜¯è¦<strong>ä¸ºæœ€ç»ˆçš„ç»“æœè´Ÿè´£</strong>ï¼Œä¸ºäº†è¾¾æˆä¸šåŠ¡ç›®æ ‡è‡ªå·±æƒ³åŠæ³•ã€åšå†³ç­–ï¼Œå°±åƒä½ èº«è¾¹é‚£äº›èƒ½åŠ›å‡ºä¼—çš„çœŸäººåŒäº‹ä¸€æ ·ã€‚</p>
<p>å¯¹ä¼ä¸šæ¥è¯´ï¼Œè¿™å°±å¥½æ¯”è§£é”äº†è¶…èƒ½åŠ›ã€‚åƒ<strong>ä¿é™©æ ¸ä¿</strong>ã€<strong>ç†èµ”ç®¡ç†</strong>ã€<strong>åæ¬ºè¯ˆ</strong>ã€<strong>åˆè§„å®¡æŸ¥</strong>è¿™äº›è¿‡å»è®©äººå¤´ç–¼çš„å¤æ‚å·¥ä½œï¼Œç°åœ¨éƒ½å¯ä»¥äº¤ç»™å®ƒã€‚Agentic AI ä¸ä»…èƒ½æŠŠè¿™äº›äº‹å¤„ç†å¾—æ›´å¿«ï¼Œå…³é”®æ˜¯æ›´èªæ˜ï¼Œè¿˜èƒ½æ ¹æ®å®é™…æƒ…å†µçµæ´»è°ƒæ•´ã€‚å®ƒèƒ½è½»æ¾é©¾é©­å…¬å¸å†…éƒ¨é‚£äº›å¤æ‚åˆäº’ä¸è¿é€šçš„å„ç§ç³»ç»Ÿï¼Œè®©æ™ºèƒ½çš„åŠ›é‡è´¯ç©¿å…¨å±€ï¼Œè€Œä¸”æ•´ä¸ªè¿‡ç¨‹å‡ ä¹ä¸éœ€è¦äººæ€ä¹ˆæ“å¿ƒã€‚</p>
<p>è€Œè¿™ä¸€åˆ‡ï¼Œè¿˜ä»…ä»…æ˜¯ä¸ªå¼€å§‹ã€‚</p>
<p>éšç€ Agentic AI è¶Šæ¥è¶Šæˆç†Ÿï¼Œæœªæ¥çš„å•†ä¸šä¸–ç•Œé‡Œï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ° AI æ™ºèƒ½ä½“å’Œäººç±»å‘˜å·¥å¹¶è‚©åä½œã€‚å®ƒä»¬ä¼šä¸»åŠ¨ç®¡ç†æŠ•èµ„ç»„åˆã€ä¸å®¢æˆ·æ²Ÿé€šäº’åŠ¨ã€å¯¹å¸‚åœºçš„é£å¹è‰åŠ¨è¿…é€Ÿåšå‡ºååº”â€”â€”åŒæ—¶è¿˜èƒ½ç¡®ä¿æ‰€æœ‰è¡Œä¸ºéƒ½ç¬¦åˆå…¬å¸å’Œæ³•è§„çš„è¦æ±‚ã€‚</p>
<p>è¿™å¸¦æ¥çš„æœºé‡ï¼Œæ—©å·²è¶…è¶Šäº†ç®€å•çš„â€œè‡ªåŠ¨åŒ–â€èŒƒç•´ï¼Œè€Œæ˜¯è¿ˆå‘äº†â€œ<strong>åœ¨æ•´ä¸ªä¼ä¸šèŒƒå›´å†…ï¼Œå®ç°è‡ªä¸»çš„ä»·å€¼åˆ›é€ </strong>â€è¿™ä¸€å…¨æ–°é«˜åº¦ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[jpaå°†SQLè®°å½•åˆ°æ—¥å¿—æ–‡ä»¶]]></title>    <link>https://juejin.cn/post/7575442779039105066</link>    <guid>https://juejin.cn/post/7575442779039105066</guid>    <pubDate>2025-11-23T10:59:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575442779039105066" data-draft-id="7575313772988678185" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="jpaå°†SQLè®°å½•åˆ°æ—¥å¿—æ–‡ä»¶"/> <meta itemprop="keywords" content="åç«¯,Spring Boot,Spring"/> <meta itemprop="datePublished" content="2025-11-23T10:59:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è€ƒè™‘è€ƒè™‘"/> <meta itemprop="url" content="https://juejin.cn/user/4406498335157287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            jpaå°†SQLè®°å½•åˆ°æ—¥å¿—æ–‡ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4406498335157287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è€ƒè™‘è€ƒè™‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T10:59:35.000Z" title="Sun Nov 23 2025 10:59:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>Springbootæ•´åˆjpaå¯ä»¥æŠŠSQLè¯­å¥è®°å½•åˆ°æ—¥å¿—æ–‡ä»¶</p>
<h3 data-id="heading-1">é…ç½®å¦‚ä¸‹</h3>
<p>åœ¨<code>application.yml</code>é…ç½®å¦‚ä¸‹</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">logging:</span>
  <span class="hljs-attr">level:</span>
    <span class="hljs-attr">org.hibernate.SQL:</span> <span class="hljs-string">DEBUG</span>  <span class="hljs-comment"># æ‰“å° SQL è¯­å¥</span>
    <span class="hljs-attr">org.hibernate.type.descriptor.sql.BasicBinder:</span> <span class="hljs-string">TRACE</span>  <span class="hljs-comment"># æ‰“å° SQL å‚æ•°ç»‘å®šå€¼</span>
    <span class="hljs-attr">org.springframework.data.jpa:</span> <span class="hljs-string">INFO</span>  <span class="hljs-comment"># Spring Data JPA æ—¥å¿—ï¼ˆå¯é€‰ï¼‰</span>
</code></pre>
<p>è¿™æ ·å°±å¯ä»¥æŠŠ<code>SQL</code>è¯­å¥è®°å½•åˆ°æ—¥å¿—æ–‡ä»¶</p>
<h3 data-id="heading-2">æ€»ç»“</h3>
<p>å¦‚æœä½¿ç”¨JPAæ¡†æ¶æ—¶ï¼Œæœ‰æ—¶å€™éœ€è¦æ’æŸ¥é—®é¢˜ï¼Œå¯ä»¥å°†jpaè¯­å¥è®°å½•åˆ°æ—¥å¿—æ–‡ä»¶ï¼Œä½†æ˜¯å¯èƒ½ä¼šæ‹–æ…¢è¿è¡Œæ•ˆç‡</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[kotlinæŠ½è±¡ç±»ï¼ˆä¸æ¥å£çš„åŒºåˆ«ï¼‰]]></title>    <link>https://juejin.cn/post/7575106644499071010</link>    <guid>https://juejin.cn/post/7575106644499071010</guid>    <pubDate>2025-11-23T07:20:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575106644499071010" data-draft-id="7575112613777883170" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="kotlinæŠ½è±¡ç±»ï¼ˆä¸æ¥å£çš„åŒºåˆ«ï¼‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-23T07:20:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å—é›¨åŒ—æ–—"/> <meta itemprop="url" content="https://juejin.cn/user/4059818590476286"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            kotlinæŠ½è±¡ç±»ï¼ˆä¸æ¥å£çš„åŒºåˆ«ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4059818590476286/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å—é›¨åŒ—æ–—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T07:20:55.000Z" title="Sun Nov 23 2025 07:20:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘ä»¬æ¥è¯¦ç»†æ¢è®¨ä¸€ä¸‹ Kotlin ä¸­çš„æŠ½è±¡ç±»ã€‚</p>
<p>åœ¨ Kotlin ä¸­ï¼Œ<strong>æŠ½è±¡ç±»</strong>æ˜¯ä¸€ç§ä¸èƒ½è¢«ç›´æ¥å®ä¾‹åŒ–çš„ç±»ï¼Œå…¶ä¸»è¦ç›®çš„æ˜¯ä½œä¸ºå…¶ä»–ç±»çš„åŸºç±»ï¼ˆçˆ¶ç±»ï¼‰ï¼Œç”¨äºå®šä¹‰é€šç”¨çš„å±æ€§å’Œæ–¹æ³•ï¼Œè€Œå°†å…·ä½“çš„å®ç°ç»†èŠ‚ç•™ç»™å­ç±»ã€‚</p>
<h3 data-id="heading-0">1. å®šä¹‰æŠ½è±¡ç±»</h3>
<p>åœ¨ Kotlin ä¸­ï¼Œä½¿ç”¨Â <code>abstract</code>Â å…³é”®å­—æ¥å£°æ˜ä¸€ä¸ªæŠ½è±¡ç±»ã€‚</p>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªæŠ½è±¡ç±» Shape</span>
<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span> {
    <span class="hljs-comment">// æŠ½è±¡å±æ€§ï¼ˆæ²¡æœ‰åˆå§‹åŒ–å€¼ï¼Œå¿…é¡»åœ¨å­ç±»ä¸­é‡å†™ï¼‰</span>
    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">val</span> name: String

    <span class="hljs-comment">// æŠ½è±¡æ–¹æ³•ï¼ˆæ²¡æœ‰æ–¹æ³•ä½“ï¼Œå¿…é¡»åœ¨å­ç±»ä¸­é‡å†™ï¼‰</span>
    <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">calculateArea</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Double</span>

    <span class="hljs-comment">// éæŠ½è±¡æ–¹æ³•ï¼ˆæœ‰å…·ä½“å®ç°ï¼Œå¯ä»¥è¢«å­ç±»ç»§æ‰¿æˆ–é‡å†™ï¼‰</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">printName</span><span class="hljs-params">()</span></span> {
        println(<span class="hljs-string">"å½¢çŠ¶åç§°: <span class="hljs-variable">$name</span>"</span>)
    }
}
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li>æŠ½è±¡ç±»å¯ä»¥åŒ…å«<strong>æŠ½è±¡å±æ€§</strong>å’Œ<strong>æŠ½è±¡æ–¹æ³•</strong>ï¼Œè¿™äº›å¿…é¡»åœ¨å­ç±»ä¸­å®ç°ã€‚</li>
<li>æŠ½è±¡ç±»ä¹Ÿå¯ä»¥åŒ…å«<strong>éæŠ½è±¡å±æ€§</strong>å’Œ<strong>éæŠ½è±¡æ–¹æ³•</strong>ï¼Œè¿™äº›ä¼šè¢«å­ç±»ç»§æ‰¿ã€‚</li>
<li>æŠ½è±¡ç±»<strong>ä¸èƒ½è¢«ç›´æ¥å®ä¾‹åŒ–</strong>ï¼Œå³ä¸èƒ½ä½¿ç”¨Â <code>val shape = Shape()</code>ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-1">2. ç»§æ‰¿æŠ½è±¡ç±»</h3>
<p>å­ç±»ç»§æ‰¿æŠ½è±¡ç±»æ—¶ï¼Œå¿…é¡»ä½¿ç”¨Â <code>override</code>Â å…³é”®å­—é‡å†™æ‰€æœ‰æŠ½è±¡å±æ€§å’Œæ–¹æ³•ã€‚</p>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å­ç±» Circle ç»§æ‰¿è‡ªæŠ½è±¡ç±» Shape</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span>(
    <span class="hljs-keyword">val</span> radius: <span class="hljs-built_in">Double</span>
) : Shape() {
    <span class="hljs-comment">// é‡å†™æŠ½è±¡å±æ€§</span>
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> name: String = <span class="hljs-string">"åœ†å½¢"</span>

    <span class="hljs-comment">// é‡å†™æŠ½è±¡æ–¹æ³•</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">calculateArea</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Double</span> {
        <span class="hljs-keyword">return</span> Math.PI * radius * radius
    }
}

<span class="hljs-comment">// å­ç±» Rectangle ç»§æ‰¿è‡ªæŠ½è±¡ç±» Shape</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span>(
    <span class="hljs-keyword">val</span> width: <span class="hljs-built_in">Double</span>,
    <span class="hljs-keyword">val</span> height: <span class="hljs-built_in">Double</span>
) : Shape() {
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> name: String = <span class="hljs-string">"çŸ©å½¢"</span>

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">calculateArea</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Double</span> {
        <span class="hljs-keyword">return</span> width * height
    }
}
</code></pre>
<p><strong>ä½¿ç”¨ç¤ºä¾‹</strong>ï¼š</p>
<p>kotlin</p>
<pre><code class="hljs language-scss" lang="scss">fun <span class="hljs-selector-tag">main</span>() {
    val circle = Circle(<span class="hljs-number">5.0</span>)
    circle<span class="hljs-selector-class">.printName</span>() <span class="hljs-comment">// è¾“å‡ºï¼šå½¢çŠ¶åç§°: åœ†å½¢</span>
    <span class="hljs-built_in">println</span>("é¢ç§¯: ${circle.calculateArea()}") <span class="hljs-comment">// è¾“å‡ºï¼šé¢ç§¯: 78.5398...</span>

    val rectangle = <span class="hljs-built_in">Rectangle</span>(<span class="hljs-number">4.0</span>, <span class="hljs-number">6.0</span>)
    rectangle<span class="hljs-selector-class">.printName</span>() <span class="hljs-comment">// è¾“å‡ºï¼šå½¢çŠ¶åç§°: çŸ©å½¢</span>
    <span class="hljs-built_in">println</span>("é¢ç§¯: ${rectangle.calculateArea()}") <span class="hljs-comment">// è¾“å‡ºï¼šé¢ç§¯: 24.0</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-2">3. æŠ½è±¡ç±»çš„ç‰¹ç‚¹</h3>
<ol>
<li>
<p><strong>ä¸èƒ½å®ä¾‹åŒ–</strong>ï¼š</p>
<p>kotlin</p>
<pre><code class="hljs language-scss" lang="scss">val shape = <span class="hljs-built_in">Shape</span>() <span class="hljs-comment">// é”™è¯¯ï¼šæŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–</span>
</code></pre>
</li>
<li>
<p><strong>å¯ä»¥åŒ…å«æŠ½è±¡å’ŒéæŠ½è±¡æˆå‘˜</strong>ï¼š</p>
<ul>
<li>æŠ½è±¡æˆå‘˜ï¼ˆ<code>abstract</code>Â ä¿®é¥°ï¼‰å¿…é¡»åœ¨å­ç±»ä¸­é‡å†™ã€‚</li>
<li>éæŠ½è±¡æˆå‘˜å¯ä»¥ç›´æ¥ç»§æ‰¿æˆ–è¢«å­ç±»é‡å†™ï¼ˆä½¿ç”¨Â <code>override</code>ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>å­ç±»å¿…é¡»å®ç°æ‰€æœ‰æŠ½è±¡æˆå‘˜</strong>ï¼šå¦‚æœå­ç±»æ²¡æœ‰å®ç°æ‰€æœ‰æŠ½è±¡å±æ€§å’Œæ–¹æ³•ï¼Œé‚£ä¹ˆå­ç±»ä¹Ÿå¿…é¡»å£°æ˜ä¸ºæŠ½è±¡ç±»ã€‚</p>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Square</span>(
    <span class="hljs-keyword">val</span> sideLength: <span class="hljs-built_in">Double</span>
) : Shape() {
    <span class="hljs-comment">// åªé‡å†™äº†æŠ½è±¡å±æ€§ï¼Œæ²¡æœ‰é‡å†™æŠ½è±¡æ–¹æ³• calculateArea()</span>
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> name: String = <span class="hljs-string">"æ­£æ–¹å½¢"</span>
    
    <span class="hljs-comment">// å› æ­¤ Square ç±»ä¹Ÿå¿…é¡»æ˜¯æŠ½è±¡çš„</span>
}
</code></pre>
</li>
<li>
<p><strong>æŠ½è±¡ç±»å¯ä»¥ç»§æ‰¿å…¶ä»–ç±»</strong>ï¼šæŠ½è±¡ç±»å¯ä»¥ç»§æ‰¿è‡ªå¦ä¸€ä¸ªéæŠ½è±¡ç±»æˆ–æŠ½è±¡ç±»ã€‚</p>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">open</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {
    <span class="hljs-keyword">open</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">makeSound</span><span class="hljs-params">()</span></span> {
        println(<span class="hljs-string">"åŠ¨ç‰©å‘å‡ºå£°éŸ³"</span>)
    }
}

<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> : <span class="hljs-type">Animal</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">makeSound</span><span class="hljs-params">()</span></span> <span class="hljs-comment">// é‡å†™å¹¶å£°æ˜ä¸ºæŠ½è±¡æ–¹æ³•ï¼Œå­ç±»å¿…é¡»å®ç°</span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Puppy</span> : <span class="hljs-type">Dog</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">makeSound</span><span class="hljs-params">()</span></span> {
        println(<span class="hljs-string">"å°ç‹—æ±ªæ±ªå«"</span>)
    }
}
</code></pre>
</li>
</ol>
<hr/>
<h3 data-id="heading-3">4. æŠ½è±¡ç±»ä¸æ¥å£çš„åŒºåˆ«</h3>
<p>åœ¨ Kotlin ä¸­ï¼ŒæŠ½è±¡ç±»å’Œæ¥å£ï¼ˆ<code>interface</code>ï¼‰éƒ½å¯ä»¥ç”¨äºå®šä¹‰æŠ½è±¡è¡Œä¸ºï¼Œä½†å®ƒä»¬æœ‰å‡ ä¸ªå…³é”®åŒºåˆ«ï¼š</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>æŠ½è±¡ç±» (<code>abstract class</code>)</th><th>æ¥å£ (<code>interface</code>)</th></tr></thead><tbody><tr><td><strong>æ„é€ å‡½æ•°</strong></td><td>å¯ä»¥æœ‰æ„é€ å‡½æ•°</td><td>ä¸èƒ½æœ‰æ„é€ å‡½æ•°ï¼ˆKotlin 1.9+ æ”¯æŒæ¥å£ä¸­å®šä¹‰å¸¦é»˜è®¤å®ç°çš„å±æ€§ï¼Œä½†ä»ä¸èƒ½æœ‰æ„é€ å‡½æ•°ï¼‰</td></tr><tr><td><strong>å¤šé‡ç»§æ‰¿</strong></td><td>åªèƒ½å•ç»§æ‰¿ï¼ˆä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»ï¼‰</td><td>å¯ä»¥å®ç°å¤šä¸ªæ¥å£</td></tr><tr><td><strong>å±æ€§</strong></td><td>å¯ä»¥åŒ…å«éæŠ½è±¡å±æ€§</td><td>æ¥å£ä¸­çš„å±æ€§é»˜è®¤æ˜¯æŠ½è±¡çš„ï¼Œæˆ–å¿…é¡»æä¾› getter å®ç°</td></tr><tr><td><strong>æ–¹æ³•å®ç°</strong></td><td>å¯ä»¥åŒ…å«éæŠ½è±¡æ–¹æ³•çš„å®ç°</td><td>æ¥å£ä¸­çš„æ–¹æ³•é»˜è®¤æ˜¯æŠ½è±¡çš„ï¼Œæˆ–å¿…é¡»æä¾›å®ç°ï¼ˆKotlin 1.4+ æ”¯æŒæ¥å£æ–¹æ³•çš„é»˜è®¤å®ç°ï¼‰</td></tr><tr><td><strong>è®¿é—®ä¿®é¥°ç¬¦</strong></td><td>å¯ä»¥ä½¿ç”¨Â <code>private</code>,Â <code>protected</code>,Â <code>public</code></td><td>æ¥å£æˆå‘˜é»˜è®¤æ˜¯Â <code>public</code>ï¼Œä¸èƒ½æœ‰Â <code>private</code>Â ä¿®é¥°ç¬¦</td></tr></tbody></table>
<p><strong>ä½¿ç”¨å»ºè®®</strong>ï¼š</p>
<ul>
<li>å¦‚æœéœ€è¦å®šä¹‰ä¸€ä¸ªé€šç”¨çš„åŸºç±»ï¼Œå¹¶ä¸”éœ€è¦åŒ…å«æ„é€ å‡½æ•°ã€éæŠ½è±¡å±æ€§æˆ–æ–¹æ³•ï¼Œä½¿ç”¨<strong>æŠ½è±¡ç±»</strong>ã€‚</li>
<li>å¦‚æœåªæ˜¯éœ€è¦å®šä¹‰ä¸€ç»„æŠ½è±¡è¡Œä¸ºï¼ˆæ–¹æ³•æˆ–å±æ€§ï¼‰ï¼Œå¹¶ä¸”å¸Œæœ›ç±»å¯ä»¥å®ç°å¤šä¸ªè¿™æ ·çš„è¡Œä¸ºï¼Œä½¿ç”¨<strong>æ¥å£</strong>ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-4">5. æ€»ç»“</h3>
<ul>
<li>æŠ½è±¡ç±»æ˜¯ç”¨Â <code>abstract</code>Â å…³é”®å­—å£°æ˜çš„ç±»ï¼Œä¸èƒ½è¢«ç›´æ¥å®ä¾‹åŒ–ã€‚</li>
<li>æŠ½è±¡ç±»å¯ä»¥åŒ…å«æŠ½è±¡æˆå‘˜ï¼ˆå¿…é¡»åœ¨å­ç±»ä¸­é‡å†™ï¼‰å’ŒéæŠ½è±¡æˆå‘˜ï¼ˆå¯ä»¥ç›´æ¥ç»§æ‰¿ï¼‰ã€‚</li>
<li>å­ç±»ç»§æ‰¿æŠ½è±¡ç±»æ—¶ï¼Œå¿…é¡»é‡å†™æ‰€æœ‰æŠ½è±¡æˆå‘˜ï¼Œå¦åˆ™å­ç±»ä¹Ÿå¿…é¡»æ˜¯æŠ½è±¡ç±»ã€‚</li>
<li>æŠ½è±¡ç±»é€‚åˆä½œä¸ºå…·æœ‰å…±åŒå±æ€§å’Œè¡Œä¸ºçš„ç±»çš„åŸºç±»ï¼Œè€Œæ¥å£é€‚åˆå®šä¹‰å¤šä¸ªç±»å¯ä»¥å®ç°çš„æŠ½è±¡è¡Œä¸ºã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android 16KB Page Size é€‚é…å®æˆ˜æµç¨‹ï¼šä»¥é‡ç¼–è¯‘FFmpeg soåº“ä¸ºä¾‹]]></title>    <link>https://juejin.cn/post/7575655132748316708</link>    <guid>https://juejin.cn/post/7575655132748316708</guid>    <pubDate>2025-11-23T08:25:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575655132748316708" data-draft-id="7575807729722441762" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android 16KB Page Size é€‚é…å®æˆ˜æµç¨‹ï¼šä»¥é‡ç¼–è¯‘FFmpeg soåº“ä¸ºä¾‹"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-11-23T08:25:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åœ¨ç‹‚é£æš´é›¨ä¸­å¥”è·‘"/> <meta itemprop="url" content="https://juejin.cn/user/1841028550886683"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android 16KB Page Size é€‚é…å®æˆ˜æµç¨‹ï¼šä»¥é‡ç¼–è¯‘FFmpeg soåº“ä¸ºä¾‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1841028550886683/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åœ¨ç‹‚é£æš´é›¨ä¸­å¥”è·‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T08:25:35.000Z" title="Sun Nov 23 2025 08:25:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Android 16KB Page Size é€‚é…å®æˆ˜æµç¨‹ï¼šä»¥é‡ç¼–è¯‘FFmpeg soåº“ä¸ºä¾‹</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>ä¸ºäº†ä¼˜åŒ–äº†ç³»ç»Ÿå†…å­˜æ€§èƒ½ï¼Œè°·æ­Œè®¡åˆ’å°† Android å¹³å°æ¶æ„å‘ 16KB Page Sizeï¼ˆ16384 å­—èŠ‚å†…å­˜é¡µå¤§å°ï¼‰è¿ç§»ï¼Œè¿™ä¼šå¯¼è‡´è®¸å¤šä»…æ”¯æŒ4 KB å†…å­˜é¡µé¢å¤§å°çš„ä¾èµ– C/C++ åŸç”Ÿåº“ï¼ˆ.so æ–‡ä»¶ï¼‰çš„åº”ç”¨åœ¨ 16KB AVD æˆ–è®¾å¤‡ä¸Šé­é‡åŠ è½½å´©æºƒã€‚æ ¹æ®è°·æ­Œæœ€æ–°å®˜æ–¹æ¶ˆæ¯ï¼Œè‡ª 2025 å¹´ 11 æœˆ 1 æ—¥èµ·ï¼Œæäº¤åˆ° Google Play ä¸”ä»¥ Android 15 åŠæ›´é«˜ç‰ˆæœ¬ä¸ºç›®æ ‡å¹³å°çš„æ‰€æœ‰æ–°åº”ç”¨å’Œç°æœ‰åº”ç”¨æ›´æ–°éƒ½å¿…é¡»åœ¨ 64 ä½è®¾å¤‡ä¸Šæ”¯æŒ 16KB Page Sizeã€‚ ä¾èµ– C/C++ åŸç”Ÿåº“ï¼ˆ.so æ–‡ä»¶ï¼‰çš„åº”ç”¨æ²¡åŠæ³•èº²è¿‡é€‚é…16KB Page Sizeçš„å·¥ä½œäº†ã€‚<br/>
æˆ‘æ‰‹ä¸Šçš„é¡¹ç›®<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FIlovecat1949%2FAudioAndVideoEditor" target="_blank" title="https://github.com/Ilovecat1949/AudioAndVideoEditor" ref="nofollow noopener noreferrer">AudioAndVideoEditor</a>å’Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FIlovecat1949%2FAeroFFmpeg" target="_blank" title="https://github.com/Ilovecat1949/AeroFFmpeg" ref="nofollow noopener noreferrer">AeroFFmpeg</a>å‡ä¾èµ–FFmpeg soåº“ä¸”æœªé€‚é…16KB Page Sizeï¼Œé€‚é…16KB Page Sizeå¯¹äºæˆ‘è€Œè¨€ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æŒ‘æˆ˜ã€‚æˆ‘æœ¬äººä¹Ÿä¸æ˜¯å¾ˆæ‡‚ C/C++ çš„ç¼–è¯‘åº•å±‚åŸç†ï¼Œé€šè¿‡æŠ„è°·æ­Œå®˜æ–¹æŒ‡å¯¼æ•™ç¨‹å’Œå¤§ä½¬åšå®¢ã€é—®aiä¸€è·¯é€‚é…ï¼Œæœ€ç»ˆåº”è¯¥æ˜¯æˆåŠŸé€‚é…çš„äº†ã€‚<br/>
æœ¬æ–‡ä»¥é‡ç¼–è¯‘FFmpeg soåº“ä¸ºä¾‹å­è®²è¯‰é€‚é…æµç¨‹ï¼šä»åˆ¤æ–­æ˜¯å¦æ”¯æŒ16KB Page Sizeï¼Œåˆ°äº¤å‰ç¼–è¯‘soåº“ï¼Œåˆ°é‡æ–°ç¼–è¯‘æ„å»ºæ•´ä¸ªé¡¹ç›®ï¼Œæœ€ç»ˆç¡®ä¿åº”ç”¨åœ¨æœ€æ–°çš„ 16KB Android ç¯å¢ƒä¸­ç¨³å®šè¿è¡Œã€‚</p>
<h3 data-id="heading-2">é€‚é…éš¾ç‚¹</h3>
<p>è™½ç„¶ 16KB é€‚é…å¯¹å¹³å°ç†è®ºä¸Šæœ‰æ˜¾è‘—ç›Šå¤„ï¼Œä½†å…¶å¤§è§„æ¨¡è½åœ°é¢ä¸´å¾ˆå¤§æŒ‘æˆ˜ã€‚çº¯Java/Koliné¡¹ç›®ç†è®ºä¸Šå¯ä»¥ç›´æ¥æ”¯æŒ16KB Page Sizeè®¾å¤‡ï¼Œå…³é”®åœ¨äºåºå¤§çš„C/C++ åŸç”Ÿåº“ç”Ÿæ€ã€‚<br/>
1.æºä»£ç ç¼ºå¤±æˆ–ä¸å¯ä¿®æ”¹ï¼š è®¸å¤šåº”ç”¨ä½¿ç”¨äº†å¤šå¹´å‰ç¼–è¯‘çš„ã€å·²åœæ­¢ç»´æŠ¤çš„ç¬¬ä¸‰æ–¹ SDK æˆ–åŸç”Ÿåº“ã€‚å¦‚æœæ— æ³•è·å–æºä»£ç æˆ–ä¿®æ”¹å…¶æ„å»ºè„šæœ¬ï¼Œåˆ™æ ¹æœ¬æ— æ³•é‡æ–°ç¼–è¯‘å¹¶æ³¨å…¥ 16KB é“¾æ¥å™¨æ ‡å¿—ã€‚<br/>
2.å¤šå±‚ä¾èµ–åµŒå¥—ï¼š å¤æ‚åº”ç”¨å¯èƒ½ä¾èµ–çš„ A åº“åˆä¾èµ– B åº“ï¼Œè€Œ B åº“åˆä¾èµ– C åº“ã€‚åªè¦ä¾èµ–é“¾ä¸­æœ‰ä¸€ä¸ªåº“æœªé€‚é…ï¼Œæ•´ä¸ªåº”ç”¨åœ¨ 16KB ç¯å¢ƒä¸­å°±å¯èƒ½å´©æºƒã€‚<br/>
æ€»ä¹‹ï¼Œæ²¡æœ‰ C/C++ åŸç”Ÿåº“å°±æ²¡æœ‰çƒ¦æ¼ã€‚<br/>
ä¸åŒé¡¹ç›®ä½¿ç”¨çš„ C/C++ ç¼–è¯‘å·¥å…·é“¾å’Œæ„å»ºç³»ç»Ÿ ä¸ä¸€æ ·ï¼Œæ¶‰åŠçš„åŸç”Ÿåº“ä¸ä¸€æ ·ï¼Œæœ¬æ–‡ä»¥<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FIlovecat1949%2FAudioAndVideoEditor" target="_blank" title="https://github.com/Ilovecat1949/AudioAndVideoEditor" ref="nofollow noopener noreferrer">AudioAndVideoEditor</a>å’Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FIlovecat1949%2FAeroFFmpeg" target="_blank" title="https://github.com/Ilovecat1949/AeroFFmpeg" ref="nofollow noopener noreferrer">AeroFFmpeg</a>ä¸ºä¾‹å­ä»‹ç»C/C++ åŸç”Ÿåº“é€‚é…16KB Page Sizeçš„æµç¨‹ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FIlovecat1949%2FAudioAndVideoEditor" target="_blank" title="https://github.com/Ilovecat1949/AudioAndVideoEditor" ref="nofollow noopener noreferrer">AudioAndVideoEditor</a>å’Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FIlovecat1949%2FAeroFFmpeg" target="_blank" title="https://github.com/Ilovecat1949/AeroFFmpeg" ref="nofollow noopener noreferrer">AeroFFmpeg</a>ä¾èµ–çš„x264ã€x265ã€LAMEã€FFmpegéƒ½æ˜¯çŸ¥åé¡¹ç›®ä¸”ä»£ç å¼€æºï¼Œå› æ­¤å¯ä»¥è‡ªå·±é‡æ–°ç¼–è¯‘æºç é€‚é…16KB Page Sizeï¼Œè¿™ä¸€ç‚¹æ˜¯æ¯”è¾ƒå¹¸è¿çš„ã€‚æˆ‘æ˜¯å…ˆåœ¨Linuxç¯å¢ƒä½¿ç”¨NDK r20äº¤å‰ç¼–è¯‘x264ã€x265ã€LAMEã€FFmpegå¾—åˆ°å¯¹åº”soåº“ï¼Œå†é›†æˆåˆ°Androidé¡¹ç›®é‡Œé¢ä½¿ç”¨CMake+NDK r25ç¼–è¯‘æ„å»ºå¾—åˆ°æœ€ç»ˆçš„Androidåº”ç”¨å’ŒSDKåº“ã€‚é‡æ–°ç¼–è¯‘soåº“çš„è¿‡ç¨‹è¿˜æ˜¯æ¯”è¾ƒçç¢ä¸”è€—æ—¶çš„ã€‚</p>
<h3 data-id="heading-3">åˆ¤æ–­ä½ çš„åº”ç”¨æ˜¯å¦æ»¡è¶³16KB Page Sizeçš„è¦æ±‚</h3>
<p>16KB é€‚é…æœ€å¥½å®‰è£…æ–°çš„Android Studioä»¥ä½¿ç”¨è°·æ­Œæä¾›çš„æœ€æ–°å·¥å…·ã€‚è™½ç„¶å‡çº§Android Studioå¯èƒ½ä¼šç»™è€é¡¹ç›®åˆå¸¦æ¥ä¸€äº›é—®é¢˜ï¼Œä½†æ˜¯é•¿ç—›ä¸å¦‚çŸ­ç—›ï¼Œå‡çº§Android Studioå°½é‡è·Ÿä¸Šè°·æ­Œçš„æ­¥ä¼æ˜¯æœ€å¥½çš„ã€‚</p>
<ol>
<li>ä½¿ç”¨Android Studioä¸­çš„Analyze APKå·¥å…·<br/>
åœ¨Android Studioæ‰“å¼€é¡¹ç›®ï¼Œåœ¨æœ€é¡¶ä¸Šèœå•æ ä¸­ï¼Œä¾æ¬¡ç‚¹å‡» Build &gt; Analyze APK...<br/>
å¦‚æœä½ çš„ C/C++ åŸç”Ÿåº“å·²ç»é€‚é… 16KB ï¼Œç»“æœå¦‚ä¸‹ï¼š\</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1548376344c448e8e7e7d4544761ca0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zyo54uC6aOO5pq06Zuo5Lit5aWU6LeR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764491135&amp;x-signature=pI%2F3%2FIBpjXdlk7hsBtLY7Pe0QMc%3D" alt="APPåˆ†æ.jpg" loading="lazy"/></p>
<ol start="2">
<li>16 KB è™šæ‹Ÿæœºè®¾å¤‡ç›´æ¥è¿è¡Œæµ‹è¯•<br/>
arm64-v8aæˆ–x86_64çš„64ä½è®¾å¤‡æ‰æœ‰16KB Page Sizeçš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Android Studioçš„16KB è™šæ‹Ÿæœºä¸Šæµ‹è¯•åº”ç”¨æ˜¯å¦èƒ½æ­£å¸¸è¿è¡Œã€‚æ³¨æ„å¦‚æœä½ æ˜¯åœ¨AMDçš„Windowsä¸Šå¼€å‘ï¼Œé‚£ä½ åº”è¯¥é€‰æ‹©x86_64çš„16KB Page Sizeè™šæ‹Ÿæœºï¼Œå¦‚æœæ˜¯ARMæ¶æ„çš„Macåº”è¯¥é€‰æ‹©arm64-v8açš„16KB Page Sizeè™šæ‹Ÿæœºã€‚<br/>
é»˜è®¤æƒ…å†µä¸‹ï¼Œ16KB Page Sizeè™šæ‹Ÿæœºä¼šä½¿ç”¨16 KB å‘åå…¼å®¹æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ çš„åº”ç”¨ä¸æ”¯æŒ16KB Page Sizeä¹Ÿä¸ä¼šä¸€ä¸‹å´©æ‰ï¼Œè€Œæ˜¯ä¼šå¼¹å‡ºæç¤ºã€‚\</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78b2360713364841bb279ca26feed160~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zyo54uC6aOO5pq06Zuo5Lit5aWU6LeR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764491135&amp;x-signature=o%2ByA8OJ%2FH4eYZ50SV%2BwX%2B8FIu0M%3D" alt="æœªé€‚é…æç¤º.jpg" loading="lazy"/></p>
<pre><code class="hljs">å¦‚æœä½ æƒ³çœ‹çœ‹ä½ çš„åº”ç”¨å´©æºƒçš„æ ·å­ï¼Œå¯ä»¥åœ¨åº”ç”¨è®¾ç½®é‡Œé¢é€‰æ‹©å…³æ‰16 KB å‘åå…¼å®¹æ¨¡å¼ï¼ŒæŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ã€‚

</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10d04a9c0e974d54bf47d86195aac2d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zyo54uC6aOO5pq06Zuo5Lit5aWU6LeR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764491135&amp;x-signature=0x9QX%2BxdUYpme9ML5wrBY1xHNH8%3D" alt="æŠ¥é”™.jpg" loading="lazy"/></p>
<h3 data-id="heading-4">é€‚é…16KB Page Size</h3>
<h4 data-id="heading-5">å…³é”®çš„é“¾æ¥å™¨æ ‡å¿—</h4>
<p>ä¸ºAndroidç¼–è¯‘ C/C++ åŸç”Ÿåº“ä¾é NDKï¼Œä¸åŒç‰ˆæœ¬NDKå¯¹16KB Page Sizeçš„æ”¯æŒä¸ä¸€æ ·ã€‚NDK ç‰ˆæœ¬ r28 åŠæ›´é«˜ç‰ˆæœ¬é»˜è®¤ç¼–è¯‘ä¸º 16 KB å¯¹é½ã€‚Android NDK r27åŠä»¥ä¸‹ç‰ˆæœ¬éœ€è¦è®¾ç½®ç›¸å…³é…ç½®æ–‡ä»¶ã€ç¼–è¯‘è„šæœ¬æ–‡ä»¶çš„å‚æ•°ï¼Œä¸»è¦æ˜¯é“¾æ¥å™¨æ ‡å¿—å‚æ•°ã€‚è°·æ­Œå®˜æ–¹æ¨èå§‹ç»ˆæ›´æ–° NDKï¼Œä½†å®é™…ä¸Šå¯¹äºæ—§é¡¹ç›®è€Œè¨€æ›´æ–°NDKå¾€å¾€ä¼šå¸¦æ¥ä¸€ç³»åˆ—éº»çƒ¦çš„é—®é¢˜ï¼ˆå¾€å¾€ä¸æ˜¯èŠ±ä¸€å¤©ä¸¤å¤©èƒ½è§£å†³çš„ï¼‰ï¼Œå› æ­¤æˆ‘ä¾é ä¸å‡çº§NDKçš„é€‚é…æ–¹æ³•ã€‚<br/>
é€‚é… 16KB çš„å…³é”®åœ¨äºï¼Œåœ¨åŸç”Ÿåº“çš„é“¾æ¥é˜¶æ®µï¼Œå‘Šè¯‰é“¾æ¥å™¨ï¼ˆldï¼‰å°†æ‰€æœ‰ ELF ç¨‹åºæ®µçš„å¯¹é½å€¼è®¾ç½®ä¸º 16KBã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹é“¾æ¥å™¨æ ‡å¿—ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">-Wl,-z,<span class="hljs-attr">max-page-size</span>=<span class="hljs-number">16384</span>
-Wl,-z,<span class="hljs-attr">common-page-size</span>=<span class="hljs-number">16384</span>
</code></pre>
<p>max-page-sizeæ˜¯é€‚é…16KB Page Sizeçš„å…³é”®ï¼Œå®ƒå¼ºåˆ¶é“¾æ¥å™¨å°† ELF æ–‡ä»¶ä¸­æ‰€æœ‰å¯åŠ è½½çš„ç¨‹åºæ®µï¼ˆProgram Segmentsï¼Œä¾‹å¦‚åŒ…å«ä»£ç çš„ .text æ®µæˆ–åŒ…å«æ•°æ®çš„ .data æ®µï¼‰çš„å¯¹é½è¦æ±‚ p_align è®¾ç½®ä¸º 16384 å­—èŠ‚ï¼ˆ16KBï¼‰ã€‚Android NDK r27~r23ç†è®ºä¸Šç”¨å®ƒå°±è¡Œã€‚<br/>
common-page-sizeç”¨äºè®¾ç½®é“¾æ¥å™¨åœ¨è¿›è¡Œå†…éƒ¨ä¼˜åŒ–å’Œç¡®å®šæ–‡ä»¶å¸ƒå±€æ—¶æ‰€ä½¿ç”¨çš„é€šç”¨é¡µå¤§å°ã€‚å®ƒå½±å“é“¾æ¥å™¨å¦‚ä½•ç»„ç»‡ä»£ç å’Œæ•°æ®ï¼Œä»¥ä¼˜åŒ–ç©ºé—´åˆ©ç”¨å’Œå†…å­˜æ˜ å°„ã€‚å®ƒå¯ä»¥è§£å†³é€‚é…16KB Page Sizeè¿‡ç¨‹ä¸­ï¼ˆå¯¹äºAndroid NDK r22 åŠæ›´ä½ç‰ˆæœ¬ï¼‰æ—§ç‰ˆ GNU ld å’Œ LLVM lld é“¾æ¥å™¨ä¸­çš„ bugã€‚<br/>
å‡ºäºç¨³å¦¥èµ·è§ï¼Œæˆ‘ä¸¤ä¸ªé“¾æ¥å™¨æ ‡å¿—éƒ½ä½¿ç”¨ã€‚</p>
<p>ä¾‹å¦‚åœ¨CMakeLists.txtè¿™æ ·ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">target_link_options(<span class="hljs-variable">${CMAKE_PROJECT_NAME}</span> PRIVATE <span class="hljs-string">"-Wl,-z,max-page-size=16384"</span>)
target_link_options(<span class="hljs-variable">${CMAKE_PROJECT_NAME}</span> PRIVATE <span class="hljs-string">"-Wl,-z,common-page-size=16384"</span>)     
</code></pre>
<h4 data-id="heading-6">é‡æ–°äº¤å‰ç¼–è¯‘soåº“</h4>
<p>ç¼–è¯‘ç¯å¢ƒï¼šVMware Workstation Proä¸­çš„ubuntuè™šæ‹Ÿæœº<br/>
NDKï¼šNDK r20<br/>
ä½¿ç”¨NDKäº¤å‰ç¼–è¯‘soåº“çš„æ—¶å€™åœ¨ç¼–è¯‘è„šæœ¬åŠ å…¥ä¸Šé¢ä¸¤ä¸ªé“¾æ¥å™¨æ ‡å¿—å‚æ•°ã€‚<br/>
ç¼–è¯‘x264è„šæœ¬å…³é”®éƒ¨åˆ†å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">    <span class="hljs-comment"># ...</span>
    <span class="hljs-built_in">export</span> LDFLAGS=<span class="hljs-string">"-Wl,-z,max-page-size=16384 -Wl,-z,common-page-size=16384"</span>
	
	<span class="hljs-keyword">function</span> build
	{
	<span class="hljs-built_in">echo</span> <span class="hljs-string">"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; build start &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;"</span>
	
	  ./configure \
	  --prefix=<span class="hljs-variable">$TARGET</span> \
	  --enable-static \
	  --enable-shared \
	  --enable-pic \
	  --host=aarch64-linux-android \
	  --disable-asm \
	  --disable-opencl \
	  --disable-cli \
	  --cross-prefix=<span class="hljs-variable">$TOOLCHAIN</span>/bin/aarch64-linux-android- \
	  --sysroot=<span class="hljs-variable">$TOOLCHAIN</span>/sysroot \
	
	make clean
	make
	make install
	
	<span class="hljs-built_in">echo</span> <span class="hljs-string">"&gt;&gt;&gt;&gt;&gt;&gt; build done &lt;&lt;&lt;&lt;&lt;&lt;"</span>
	}
	
	build
</code></pre>
<p>ç¼–è¯‘LAMEè„šæœ¬å…³é”®éƒ¨åˆ†å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">    <span class="hljs-comment"># ...</span>
LDFLAGS=<span class="hljs-string">"-Wl,-z,max-page-size=16384 -Wl,-z,common-page-size=16384"</span>
API=24

<span class="hljs-keyword">function</span> build_android_arm
{
<span class="hljs-built_in">echo</span> <span class="hljs-string">"build for android <span class="hljs-variable">$CPU</span>"</span>
./configure \
--host=<span class="hljs-variable">$HOST</span> \
--disable-static \
--enable-shared \
--disable-frontend \
--prefix=<span class="hljs-string">"<span class="hljs-variable">$TARGET</span>"</span> \
LDFLAGS=<span class="hljs-string">"<span class="hljs-variable">${LDFLAGS}</span>"</span> \
CPPFLAGS=<span class="hljs-string">"-fPIC"</span>

make clean
make -j8
make install

<span class="hljs-built_in">echo</span> <span class="hljs-string">"build for android <span class="hljs-variable">$CPU</span> completed"</span>
}
</code></pre>
<p>æœ€ç»ˆç¼–è¯‘FFmpegå…³é”®éƒ¨åˆ†å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">DYNAMIC_LINKER_FLAGS=<span class="hljs-string">"-Wl,-z,max-page-size=16384 -Wl,-z,common-page-size=16384"</span>
<span class="hljs-comment"># ...</span>
<span class="hljs-keyword">function</span> build
{
  ./configure \
  --pkg-config=pkg-config \
  --pkg-config-flags=<span class="hljs-string">"--static"</span> \
  --prefix=<span class="hljs-variable">$OUTPUT</span> \
  --target-os=android \
  --<span class="hljs-built_in">arch</span>=arm64 \
  --cpu=armv8-a \
  --disable-x86asm \
  --disable-asm \
  --enable-neon \
  --enable-cross-compile \
  --enable-shared \
  --disable-static \
  --disable-doc \
  --disable-ffplay \
  --disable-ffprobe \
  --disable-symver \
  --disable-ffmpeg \
  --enable-pic \
  --sysroot=<span class="hljs-variable">$SYSROOT</span> \
  --cross-prefix=<span class="hljs-variable">$TOOLCHAIN</span>/bin/aarch64-linux-android- \
  --cross-prefix-clang=<span class="hljs-variable">$TOOLCHAIN</span>/bin/aarch64-linux-android<span class="hljs-variable">$API</span>- \
  --enable-encoder=aac \
  --enable-decoder=aac \
  --enable-gpl \
  --enable-encoder=libx264 \
  --enable-libx264 \
  --enable-encoder=libx265 \
  --enable-libx265 \
  --enable-libmp3lame \
  --extra-cflags=<span class="hljs-string">"-I<span class="hljs-variable">$X264_DIR</span>/include -I<span class="hljs-variable">$LAME_DIR</span>/include -I<span class="hljs-variable">$X265_DIR</span>/include"</span> \
  --extra-ldflags=<span class="hljs-string">"<span class="hljs-variable">$DYNAMIC_LINKER_FLAGS</span> -L<span class="hljs-variable">$X264_DIR</span>/lib -L<span class="hljs-variable">$LAME_DIR</span>/lib -L<span class="hljs-variable">$X265_DIR</span>/lib"</span> \
  --extra-cflags=<span class="hljs-string">"-fPIC"</span>

  make clean all
  <span class="hljs-comment"># è¿™é‡Œæ˜¯å®šä¹‰ç”¨å‡ ä¸ªCPUç¼–è¯‘</span>
  make -j12
  make install
}
</code></pre>
<p>å¯ä»¥çœ‹è§éƒ½åŠ ä¸Šäº†max-page-sizeå’Œcommon-page-sizeä¸¤ä¸ªé“¾æ¥å™¨æ ‡å¿—ï¼Œè¿™æ ·è®¾ç½®æœ€ç»ˆå¾—åˆ°çš„soåº“æ˜¯ç¬¦åˆ16KB Page Sizeè¦æ±‚çš„ã€‚</p>
<h4 data-id="heading-7">ä¿®æ”¹CMakeLists.txté‡æ–°æ„å»ºé¡¹ç›®</h4>
<p>å°†æ–°é²œå‡ºç‚‰çš„16KB soåº“æ”¾åˆ°Androidé¡¹ç›®çš„å¯¹åº”ç›®å½•ä¸‹ã€‚<br/>
æ³¨æ„åœ¨Androidé¡¹ç›®é‡Œé¢çš„CMakeLists.txtä¹Ÿéœ€è¦æ·»åŠ max-page-sizeå’Œcommon-page-sizeä¸¤ä¸ªé“¾æ¥å™¨æ ‡å¿—ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">target_link_libraries(

        <span class="hljs-comment"># æŒ‡å®šç›®æ ‡åº“ï¼Œnative-lib æ˜¯åœ¨ä¸Šé¢ add_library ä¸­é…ç½®çš„ç›®æ ‡åº“</span>
        aeroffmpeglib

        <span class="hljs-comment"># 4. è¿æ¥ FFmpeg ç›¸å…³çš„åº“</span>
        avutil
        swresample
        avcodec
        avfilter
        swscale
        avformat
        avdevice
        h264
        h265
        mp3lame
        ffmpeg

        -landroid
        OpenSLES
        -lEGL
        -lGLESv2
        <span class="hljs-comment"># Links the target library to the log library</span>
        <span class="hljs-comment"># included in the NDK.</span>
        ${log-lib}
        -Wl,-z,<span class="hljs-attr">max-page-size</span>=<span class="hljs-number">16384</span>
        -Wl,-z,<span class="hljs-attr">common-page-size</span>=<span class="hljs-number">16384</span>
)
</code></pre>
<p>ä¿®æ”¹CMakeLists.txtåé‡æ–°åŒæ­¥é…ç½®ä¿¡æ¯å¹¶æ„å»ºæ•´ä¸ªé¡¹ç›®ã€‚</p>
<h3 data-id="heading-8">æ€»ç»“</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FIlovecat1949%2FAudioAndVideoEditor" target="_blank" title="https://github.com/Ilovecat1949/AudioAndVideoEditor" ref="nofollow noopener noreferrer">AudioAndVideoEditor</a>å’Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FIlovecat1949%2FAeroFFmpeg" target="_blank" title="https://github.com/Ilovecat1949/AeroFFmpeg" ref="nofollow noopener noreferrer">AeroFFmpeg</a>ç°åœ¨åº”è¯¥éƒ½æ”¯æŒAndroid 16KB Page Sizeã€‚<br/>
æˆ‘å¸Œæœ›è°·æ­Œä»¥åå°‘åšæ¶‰åŠ C/C++ åŸç”Ÿåº“çš„æ›´æ–°äº†ã€‚</p>
<h3 data-id="heading-9">å‚è€ƒ</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.google.cn%2Fguide%2Fpractices%2Fpage-sizes%3Fhl%3Dzh-cn" target="_blank" title="https://developer.android.google.cn/guide/practices/page-sizes?hl=zh-cn" ref="nofollow noopener noreferrer">è°·æ­Œæ”¯æŒ 16 KB çš„é¡µé¢å¤§å°æŒ‡å—</a><br/>
<a href="https://juejin.cn/post/7396306532671094793" target="_blank" title="https://juejin.cn/post/7396306532671094793">Android 15 ä¸Šé€‚é… 16K Page Size çš„å¡«å‘æ€è·¯ï¼Œä»¥ IJKPlayer ä¸ºä¾‹å­</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Re: 0x03. ä»é›¶å¼€å§‹çš„å…‰çº¿è¿½è¸ªå®ç°-å¤šçƒä½“ç€è‰²]]></title>    <link>https://juejin.cn/post/7575425466904576063</link>    <guid>https://juejin.cn/post/7575425466904576063</guid>    <pubDate>2025-11-23T07:18:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575425466904576063" data-draft-id="7575313772988071977" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Re: 0x03. ä»é›¶å¼€å§‹çš„å…‰çº¿è¿½è¸ªå®ç°-å¤šçƒä½“ç€è‰²"/> <meta itemprop="keywords" content="macOS,è®¡ç®—æœºå›¾å½¢å­¦"/> <meta itemprop="datePublished" content="2025-11-23T07:18:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å£•å£•"/> <meta itemprop="url" content="https://juejin.cn/user/3180232448155495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Re: 0x03. ä»é›¶å¼€å§‹çš„å…‰çº¿è¿½è¸ªå®ç°-å¤šçƒä½“ç€è‰²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3180232448155495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å£•å£•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T07:18:55.000Z" title="Sun Nov 23 2025 07:18:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="" data-highlight-key="fancy">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç›®æ ‡</h2>
<p><a href="https://juejin.cn/post/7555462803492356150" target="_blank" title="https://juejin.cn/post/7555462803492356150">ä¸Šä¸€èŠ‚</a> å·²ç»å®ç°ä¸€ä¸ªçƒæ˜¾ç¤ºåœ¨çª—å£ä¸­å¤®ï¼Œè¿™èŠ‚çš„ç›®æ ‡æ˜¯æ˜¾ç¤ºå¤šä¸ªçƒã€‚</p>
<h2 data-id="heading-1">æœ¬èŠ‚æœ€ç»ˆæ•ˆæœ</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8652a0cb44b4827a06246fa4a33ff84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aOV5aOV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764487135&amp;x-signature=98peJZl8uLs8OXbMQaVJRZ5Ub20%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">å…ˆæ˜¾ç¤ºä¸¤ä¸ªçƒ</h2>
<p>æˆ‘ä»¬å…ˆæ¥æƒ³åƒç°å®åœºæ™¯ï¼Œå‡è®¾ä½ æ¡Œå­æœ‰ä¸€ä¸ªæœ‰æ˜¾ç¤ºå™¨ï¼Œæ­¤æ—¶ä½ ä¸¾èµ·æ‰‹æœºå½•å±ï¼Œä½ èƒ½å¾ˆç›´è§‚è®¤è¯†åˆ°æ‰‹æœºç¦»ä½ æ›´è¿‘ï¼Œæ˜¾ç¤ºå™¨ç¦»ä½ æ›´è¿œï¼Œä½ çš„çœ¼ç›å°±æ˜¯é‚£ä¸ªæ‘„åƒæœºï¼Œå®ƒå‘å‡ºçš„å°„çº¿ï¼Œè‚¯å®šæ˜¯å…ˆåˆ°æ‰‹æœºï¼Œå†åˆ°æ˜¾ç¤ºå™¨ã€‚<br/>
ç°åœ¨æˆ‘ä»¬ä»£ç åšå¾—äº‹æƒ…å°±æ˜¯ï¼Œçƒå°±æ˜¯â€œæ‰‹æœºâ€ï¼ŒèƒŒæ™¯ï¼ˆå¤©ç©ºï¼‰å°±æ˜¯â€œæ˜¾ç¤ºå™¨â€ï¼Œé€šè¿‡ <code>intersect_sphere</code> æˆ‘ä»¬å¯ä»¥è®¡ç®—å‡ºæŠŠâ€œæ˜¾ç¤ºå™¨â€æŒ¡ä½çš„â€œæ‰‹æœºâ€ã€‚</p>
<p>å›åˆ°ä¹‹å‰çš„ä»£ç ï¼Œåªæ˜¾ç¤ºä¸€ä¸ªçƒï¼Œä¹Ÿå°±æ˜¯æ»¡è¶³å…‰çº¿è·Ÿçƒç›¸äº¤æ—¶ï¼Œå°±å‘Šè¯‰ fragment shader è¿™é‡Œè¦åº”è¯¥æ˜¾ç¤ºæŸä¸ªé¢œè‰²</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">if</span> (<span class="hljs-built_in">intersect_sphere</span>(ray, sphere) &gt; <span class="hljs-number">0</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">vec4f</span>(<span class="hljs-number">1</span>, <span class="hljs-number">0.76</span>, <span class="hljs-number">0.03</span>, <span class="hljs-number">1</span>);
}
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬è¦æ˜¾ç¤ºä¸¤ä¸ªçƒï¼Œæ‰€ä»¥å…ˆå¼„ä¸€ä¸ªæ•°ç»„ã€‚éœ€è¦æ³¨æ„åˆ°ï¼Œè¿™é‡Œç”¨ <code>constant</code> æ˜¯å› ä¸º MSLï¼ˆMetal Shading Languageï¼‰è§„å®š <strong>Program scope variable must reside in constant address space</strong>ï¼ˆç¨‹åºä½œç”¨åŸŸçš„å˜é‡ï¼Œå¿…é¡»æ”¾åœ¨å¸¸é‡åœ°å€ç©ºé—´ï¼‰ï¼Œæ€»ä¹‹å°±æ˜¯ä½ è¦æ˜¯å†™ä¸ªå‡½æ•°å¤–çš„å¸¸é‡ï¼Œé‚£å°±ç”¨ <code>constant</code> æŠŠå®ƒæ”¾åˆ°å¸¸é‡åœ°å€ç©ºé—´å»ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp">constant u32 OBJECT_COUNT = <span class="hljs-number">2</span>;

constant Sphere scene[OBJECT_COUNT] = {
  { .center = <span class="hljs-built_in">vec3f</span>(<span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>, <span class="hljs-number">-1.</span>), .radius = <span class="hljs-number">0.5</span> },
  { .center = <span class="hljs-built_in">vec3f</span>(<span class="hljs-number">0.</span>, <span class="hljs-number">-100.5</span>, <span class="hljs-number">-1.</span>), .radius = <span class="hljs-number">100.</span> },
};
</code></pre>
<p>å£°æ˜ç»“æŸåï¼Œåœ¨ fragment shader å‡½æ•°å†…å¾ªç¯åŒ¹é…å…‰çº¿ç›¸äº¤ã€‚<br/>
æˆ‘ä»¬æŠŠç¦»å’±ä»¬æœ€è¿‘çš„å€¼å®šä¹‰ä¸º <code>closest_t</code>ï¼Œåˆå§‹å€¼ç»™ä¸ª Metal å†…ç½®çš„å¸¸é‡ <code>FLT_MAX</code>ï¼Œå®ƒè¡¨ç¤º float çš„æœ€å¤§å€¼ï¼ˆå› ä¸ºæˆ‘ä»¬ç”¨äº† <code>float</code> ç±»å‹ï¼‰ï¼Œç„¶åå¾ªç¯é€šè¿‡è°ƒç”¨ <code>intersect_sphere</code> è®¡ç®—çš„å€¼ <code>t</code> å»æ›´æ–° <code>closest_t</code>ï¼ˆå› ä¸º <code>intersect_sphere</code> æ²¡åŒ¹é…åˆ°ä¼šè¿”å› <code>-1</code>ï¼Œæ‰€ä»¥å¾ˆæ˜¾ç„¶æˆ‘ä»¬è¦åˆ¤æ–­ <code>t &gt; 0.</code>ï¼ŒåŒæ—¶è¦å†åˆ¤æ–­ä¸‹è¿™ä¸ª <code>t</code> æ˜¯æ¯”å·²çŸ¥æœ€è¿‘çš„è¿˜è¦è¿‘çš„å€¼ï¼Œä¹Ÿå°±æ˜¯è¦æ»¡è¶³ <code>t &lt; closest_t</code>ï¼‰ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">fragment vec4f <span class="hljs-title">fragmentFn</span><span class="hljs-params">(Vertex in [[stage_in]], constant Uniforms &amp;uniforms [[buffer(<span class="hljs-number">1</span>)]])</span> </span>{
  <span class="hljs-comment">// ...</span>
  let ray = Ray { origin, direction };
  var <span class="hljs-type">closest_t</span> = FLT_MAX;
  <span class="hljs-keyword">for</span> (u32 i = <span class="hljs-number">0</span>; i &lt; OBJECT_COUNT; ++i) {
    var t = <span class="hljs-built_in">intersect_sphere</span>(ray, scene[i]);
    <span class="hljs-keyword">if</span> (t &gt; <span class="hljs-number">0.</span> &amp;&amp; t &lt; <span class="hljs-type">closest_t</span>) {
      <span class="hljs-type">closest_t</span> = t;
    }
  }
  <span class="hljs-keyword">if</span> (<span class="hljs-type">closest_t</span> &lt; FLT_MAX) {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">vec4f</span>(<span class="hljs-number">1</span>, <span class="hljs-number">0.76</span>, <span class="hljs-number">0.03</span>, <span class="hljs-number">1</span>);
  }
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">vec4f</span>(<span class="hljs-built_in">sky_color</span>(ray), <span class="hljs-number">1</span>);
}
</code></pre>
<p>äºæ˜¯å°±ä¼šæ˜¾ç¤º</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/416c454758084e83bcfa831977bd0651~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aOV5aOV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764487135&amp;x-signature=%2BdxdeG3aGOK4%2BZr8VYwNxgoWgVo%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-3">æ”¹é¢œè‰²</h2>
<p>è¿™é‡Œå› ä¸ºæˆ‘ä»¬è®¾ç½®çš„é¢œè‰²æ˜¯ç›¸åŒï¼Œæ‰€ä»¥è¿åœ¨ä¸€å—æ ¹æœ¬åˆ†ä¸æ¸…å“ªè·Ÿå“ªï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®©ç¦»å¾—è¿‘å¾—æ›´äº®ï¼Œç¦»å¾—è¿œçš„æ›´æš—ï¼Œç»™åŸå…ˆè®¾ç½®çš„é¢œè‰²å†ä¹˜ä¸Šä¸€ä¸ªå€¼ï¼Œ<code>saturate</code> è¿™ä¸ªæ˜¯ MSL å†…ç½®çš„å‡½æ•°ï¼Œä½œç”¨æ˜¯æŠŠå°äº 0 çš„è½¬æˆ 0ï¼Œå¤§äº 1 çš„è½¬æˆ 1ï¼Œåœ¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0, 1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">1</span><span class="mclose">]</span></span></span></span></span> èŒƒå›´å†…çš„ä¸å˜ï¼Œç­‰äºè®²ï¼Œå¤§çš„å°±ä¹˜å¤šä¸€ç‚¹ï¼Œå°çš„å°±ä¹˜å°‘ä¸€ç‚¹ï¼Œç¬¦åˆè¿‘å¾—æ›´äº®ï¼Œè¿œå¾—æ›´æš—çš„è¦æ±‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">fragment vec4f <span class="hljs-title">fragmentFn</span><span class="hljs-params">(Vertex in [[stage_in]], constant Uniforms &amp;uniforms [[buffer(<span class="hljs-number">1</span>)]])</span> </span>{
  <span class="hljs-comment">// ...</span>
  let ray = Ray { origin, direction };
  var <span class="hljs-type">closest_t</span> = FLT_MAX;
  <span class="hljs-keyword">for</span> (u32 i = <span class="hljs-number">0</span>; i &lt; OBJECT_COUNT; ++i) {
    var t = <span class="hljs-built_in">intersect_sphere</span>(ray, scene[i]);
    <span class="hljs-keyword">if</span> (t &gt; <span class="hljs-number">0.</span> &amp;&amp; t &lt; <span class="hljs-type">closest_t</span>) {
      <span class="hljs-type">closest_t</span> = t;
    }
  }
  <span class="hljs-keyword">if</span> (<span class="hljs-type">closest_t</span> &lt; FLT_MAX) {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">vec4f</span>(<span class="hljs-number">1</span>, <span class="hljs-number">0.76</span>, <span class="hljs-number">0.03</span>, <span class="hljs-number">1</span>) * <span class="hljs-built_in">saturate</span>(<span class="hljs-number">1.</span> - <span class="hljs-type">closest_t</span>);
  }
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">vec4f</span>(<span class="hljs-built_in">sky_color</span>(ray), <span class="hljs-number">1</span>);
}
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬èƒ½çœ‹åˆ°è¿™ä¸ªæ•ˆæœ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a4ba77a46064f29a8b08f0592e42352~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aOV5aOV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764487135&amp;x-signature=7jkvQsTSAYWCaWJq5mZyBFCZags%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-4">å®ç°ç›®æ ‡æ•ˆæœ</h2>
<p>å…¶å®åˆ°è¿™ä¸€æ­¥ï¼Œåªæ˜¯æ¢ä¸ªé¢œè‰²ï¼Œä¸ºäº†å®ç°ç›®æ ‡æ•ˆæœï¼Œæˆ‘ä»¬ç›´æ¥ç”¨ <code>closest_t</code> ä½œä¸ºåŸºç¡€å€¼ï¼Œåœ¨å®ƒçš„åŸºç¡€ä¸Šè½¬æˆé¢œè‰²å‘é‡</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">if</span> (<span class="hljs-type">closest_t</span> &lt; FLT_MAX) {
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">vec4f</span>(<span class="hljs-built_in">saturate</span>(<span class="hljs-type">closest_t</span>) * <span class="hljs-number">0.5</span>);
}
</code></pre>
<p>è¿™æ ·å°±èƒ½å®ç°æœ€ç»ˆæ•ˆæœ</p>
<hr/>
<p>æœ€åæ€»ç»“ä¸€ä¸‹ä»£ç </p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;metal_stdlib&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> let const auto</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> var auto</span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> metal;

<span class="hljs-keyword">using</span> vec2f = float2;
<span class="hljs-keyword">using</span> vec3f = float3;
<span class="hljs-keyword">using</span> vec4f = float4;

<span class="hljs-keyword">using</span> u8 = uchar;
<span class="hljs-keyword">using</span> i8 = <span class="hljs-type">char</span>;
<span class="hljs-keyword">using</span> u16 = ushort;
<span class="hljs-keyword">using</span> i16 = <span class="hljs-type">short</span>;
<span class="hljs-keyword">using</span> i32 = <span class="hljs-type">int</span>;
<span class="hljs-keyword">using</span> u32 = uint;
<span class="hljs-keyword">using</span> f16 = half;
<span class="hljs-keyword">using</span> f32 = <span class="hljs-type">float</span>;
<span class="hljs-keyword">using</span> usize = <span class="hljs-type">size_t</span>;

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">VertexIn</span> {
  vec2f position;
};

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Vertex</span> {
  vec4f position [[position]];
};

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Uniforms</span> {
  u32 width;
  u32 height;
};

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Ray</span> {
  vec3f origin;
  vec3f direction;
};

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Sphere</span> {
  vec3f center;
  f32 radius;
};

constant u32 OBJECT_COUNT = <span class="hljs-number">2</span>;
constant Sphere scene[OBJECT_COUNT] = {
  { .center = <span class="hljs-built_in">vec3f</span>(<span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>, <span class="hljs-number">-1.</span>), .radius = <span class="hljs-number">0.5</span> },
  { .center = <span class="hljs-built_in">vec3f</span>(<span class="hljs-number">0.</span>, <span class="hljs-number">-100.5</span>, <span class="hljs-number">-1.</span>), .radius = <span class="hljs-number">100.</span> },
};

<span class="hljs-function">f32 <span class="hljs-title">intersect_sphere</span><span class="hljs-params">(<span class="hljs-type">const</span> Ray ray, <span class="hljs-type">const</span> Sphere sphere)</span> </span>{
  let v = ray.origin - sphere.center;
  let a = <span class="hljs-built_in">dot</span>(ray.direction, ray.direction);
  let b = <span class="hljs-built_in">dot</span>(v, ray.direction);
  let c = <span class="hljs-built_in">dot</span>(v, v) - sphere.radius * sphere.radius;
  let d = b * b - a * c;
  <span class="hljs-keyword">if</span> (d &lt; <span class="hljs-number">0.</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1.</span>;
  }
  let sqrt_d = <span class="hljs-built_in">sqrt</span>(d);
  let recip_a = <span class="hljs-number">1.</span> / a;
  let mb = -b;
  let t = (mb - sqrt_d) * recip_a;
  <span class="hljs-keyword">if</span> (t &gt; <span class="hljs-number">0.</span>) {
    <span class="hljs-keyword">return</span> t;
  }
  <span class="hljs-keyword">return</span> (mb + sqrt_d) * recip_a;
}

<span class="hljs-function">vec3f <span class="hljs-title">sky_color</span><span class="hljs-params">(Ray ray)</span> </span>{
  let a = <span class="hljs-number">0.5</span> * (<span class="hljs-built_in">normalize</span>(ray.direction).y + <span class="hljs-number">1</span>);
  <span class="hljs-keyword">return</span> (<span class="hljs-number">1</span> - a) * <span class="hljs-built_in">vec3f</span>(<span class="hljs-number">1</span>) + a * <span class="hljs-built_in">vec3f</span>(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.7</span>, <span class="hljs-number">1</span>);
}

<span class="hljs-function">vertex Vertex <span class="hljs-title">vertexFn</span><span class="hljs-params">(constant VertexIn *vertices [[buffer(<span class="hljs-number">0</span>)]], uint vid [[vertex_id]])</span> </span>{
  <span class="hljs-keyword">return</span> Vertex { <span class="hljs-built_in">vec4f</span>(vertices[vid].position, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>) };
}

<span class="hljs-function">fragment vec4f <span class="hljs-title">fragmentFn</span><span class="hljs-params">(Vertex in [[stage_in]], constant Uniforms &amp;uniforms [[buffer(<span class="hljs-number">1</span>)]])</span> </span>{
  let origin = <span class="hljs-built_in">vec3f</span>(<span class="hljs-number">0</span>);
  let focus_distance = <span class="hljs-number">1.0</span>;
  let aspect_ratio = <span class="hljs-built_in">f32</span>(uniforms.width) / <span class="hljs-built_in">f32</span>(uniforms.height);
  var uv = in.position.xy / <span class="hljs-built_in">vec2f</span>(<span class="hljs-built_in">f32</span>(uniforms.width - <span class="hljs-number">1</span>), <span class="hljs-built_in">f32</span>(uniforms.height - <span class="hljs-number">1</span>));
  uv = (<span class="hljs-number">2</span> * uv - <span class="hljs-built_in">vec2f</span>(<span class="hljs-number">1</span>)) * <span class="hljs-built_in">vec2f</span>(aspect_ratio, <span class="hljs-number">-1</span>);
  let direction = <span class="hljs-built_in">vec3f</span>(uv, -focus_distance);
  let ray = Ray { origin, direction };
  var <span class="hljs-type">closest_t</span> = FLT_MAX;
  <span class="hljs-keyword">for</span> (u32 i = <span class="hljs-number">0</span>; i &lt; OBJECT_COUNT; ++i) {
    var t = <span class="hljs-built_in">intersect_sphere</span>(ray, scene[i]);
    <span class="hljs-keyword">if</span> (t &gt; <span class="hljs-number">0.</span> &amp;&amp; t &lt; <span class="hljs-type">closest_t</span>) {
      <span class="hljs-type">closest_t</span> = t;
    }
  }
  <span class="hljs-keyword">if</span> (<span class="hljs-type">closest_t</span> &lt; FLT_MAX) {
<span class="hljs-comment">//    return vec4f(1, 0.76, 0.03, 1);</span>
<span class="hljs-comment">//    return vec4f(1, 0.76, 0.03, 1) * saturate(1. - closest_t);</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">vec4f</span>(<span class="hljs-built_in">saturate</span>(<span class="hljs-type">closest_t</span>) * <span class="hljs-number">0.5</span>);
  }
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">vec4f</span>(<span class="hljs-built_in">sky_color</span>(ray), <span class="hljs-number">1</span>);
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ llm + SQLite å®ç°è‡ªç„¶è¯­è¨€åˆ° SQL çš„æ™ºèƒ½è½¬æ¢ï¼šä¸€ä¸ªå®æˆ˜æ¡ˆä¾‹]]></title>    <link>https://juejin.cn/post/7575102209605926938</link>    <guid>https://juejin.cn/post/7575102209605926938</guid>    <pubDate>2025-11-23T06:33:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575102209605926938" data-draft-id="7575133880436097075" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨ llm + SQLite å®ç°è‡ªç„¶è¯­è¨€åˆ° SQL çš„æ™ºèƒ½è½¬æ¢ï¼šä¸€ä¸ªå®æˆ˜æ¡ˆä¾‹"/> <meta itemprop="keywords" content="LLM,SQLite,Agent"/> <meta itemprop="datePublished" content="2025-11-23T06:33:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çƒŸè¢…"/> <meta itemprop="url" content="https://juejin.cn/user/1845419006243504"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨ llm + SQLite å®ç°è‡ªç„¶è¯­è¨€åˆ° SQL çš„æ™ºèƒ½è½¬æ¢ï¼šä¸€ä¸ªå®æˆ˜æ¡ˆä¾‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1845419006243504/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çƒŸè¢…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T06:33:20.000Z" title="Sun Nov 23 2025 06:33:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ä»æ•°æ®åº“ä¸­æŸ¥è¯¢æ•°æ®ã€‚ä½†å¯¹éæŠ€æœ¯äººå‘˜æ¥è¯´ï¼Œå†™ SQL æŸ¥è¯¢è¯­å¥å¯èƒ½æ˜¯ä¸ªâ€œå™©æ¢¦â€ã€‚è€Œéšç€å¤§æ¨¡å‹çš„å…´èµ·ï¼Œ<strong>å°†è‡ªç„¶è¯­è¨€ç›´æ¥è½¬åŒ–ä¸º SQL æŸ¥è¯¢</strong>å·²æˆä¸ºç°å®ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘å°†ç»“åˆ <strong>DeepSeek Reasoner æ¨¡å‹</strong> å’Œ <strong>SQLite æ•°æ®åº“</strong>ï¼Œå±•ç¤ºå¦‚ä½•é€šè¿‡ä¸€æ®µç®€å•çš„ Python ä»£ç ï¼Œå®ç°â€œ<strong>ä½ è¯´ä¸­æ–‡ï¼Œæˆ‘å‡º SQL</strong>â€çš„è‡ªåŠ¨åŒ–èƒ½åŠ›ã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸ§© é¡¹ç›®ç›®æ ‡</h2>
<p>ç»™å®šä¸€ä¸ªç®€å•çš„å‘˜å·¥ä¿¡æ¯è¡¨ï¼Œç”¨æˆ·è¾“å…¥è‡ªç„¶è¯­è¨€é—®é¢˜ï¼ˆå¦‚ï¼šâ€œå¼€å‘éƒ¨é—¨å‘˜å·¥çš„å§“åå’Œå·¥èµ„æ˜¯å¤šå°‘ï¼Ÿâ€ï¼‰ï¼Œç¨‹åºè‡ªåŠ¨è§£æå¹¶ç”Ÿæˆå¯¹åº”çš„ SQL æŸ¥è¯¢è¯­å¥ã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ”§ ç¯å¢ƒå‡†å¤‡</h2>
<p>æˆ‘ä»¬ä½¿ç”¨è½»é‡çº§çš„ SQLite æ•°æ®åº“ï¼Œå¹¶æ¥å…¥ DeepSeek çš„ API æ¥å®Œæˆè‡ªç„¶è¯­è¨€ç†è§£ä¸ SQL ç”Ÿæˆä»»åŠ¡ã€‚</p>
<h3 data-id="heading-2">1. åˆ›å»ºæ•°æ®åº“è¡¨</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> sqlite3

<span class="hljs-comment"># æ‰“å¼€é“¾æ¥</span>
conn = sqlite3.connect(<span class="hljs-string">"test.db"</span>)
cursor = conn.cursor()

cursor.execute(<span class="hljs-string">"""
CREATE TABLE IF NOT EXISTS employees(
    id INTEGER PRIMARY KEY,
    name TEXT,
    department TEXT,
    salary INTEGER
)
"""</span>)
</code></pre>
<blockquote>
<p>âœ… è¿™ä¸€æ­¥åˆ›å»ºäº†ä¸€ä¸ªåä¸º <code>employees</code> çš„è¡¨ï¼ŒåŒ…å«å‘˜å·¥ç¼–å·ã€å§“åã€éƒ¨é—¨å’Œå·¥èµ„å­—æ®µã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-3">2. æ’å…¥æµ‹è¯•æ•°æ®</h3>
<pre><code class="hljs language-scss" lang="scss">sample_data = <span class="hljs-selector-attr">[    (6, <span class="hljs-string">"ç‹äº”"</span>, <span class="hljs-string">"å¼€å‘éƒ¨"</span>, 32000),    (7, <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"é”€å”®éƒ¨"</span>, 20000),    (8, <span class="hljs-string">"è€å…­"</span>, <span class="hljs-string">"å¼€å‘éƒ¨"</span>, 33000),    (9, <span class="hljs-string">"æå››"</span>, <span class="hljs-string">"é”€å”®éƒ¨"</span>, 15000)]</span>

<span class="hljs-attribute">cursor</span><span class="hljs-selector-class">.executemany</span>("INSERT INTO employees VALUES(?,?,?,?)", sample_data)
conn<span class="hljs-selector-class">.commit</span>()
</code></pre>
<blockquote>
<p>ğŸ’¡ æ’å…¥äº†4æ¡æµ‹è¯•æ•°æ®ï¼Œæ¶µç›–ä¸¤ä¸ªéƒ¨é—¨ï¼šå¼€å‘éƒ¨å’Œé”€å”®éƒ¨ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-4">3. è·å–æ•°æ®åº“ Schema</h3>
<p>ä¸ºäº†è®© LLM ç†è§£è¡¨ç»“æ„ï¼Œæˆ‘ä»¬éœ€è¦æŠŠè¡¨çš„ schema æä¾›ç»™æ¨¡å‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># é€šè¿‡ table_info æ‹¿åˆ° employees è¡¨çš„æè¿°</span>
schema = cursor.execute(<span class="hljs-string">"PRAGMA table_info(employees)"</span>).fetchall()
schema_str = <span class="hljs-string">"CREATE TABLE EMPLOYEES (\n"</span> + <span class="hljs-string">"\n"</span>.join([<span class="hljs-string">f"<span class="hljs-subst">{col[<span class="hljs-number">1</span>]}</span> <span class="hljs-subst">{col[<span class="hljs-number">2</span>]}</span>"</span> <span class="hljs-keyword">for</span> col <span class="hljs-keyword">in</span> schema]) + <span class="hljs-string">"\n)"</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ•°æ®åº“Schema:"</span>)
<span class="hljs-built_in">print</span>(schema_str)
</code></pre>
<p>è¾“å‡ºç»“æœç±»ä¼¼ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> EMPLOYEES (
id <span class="hljs-type">INTEGER</span>
name TEXT
department TEXT
salary <span class="hljs-type">INTEGER</span>
)
</code></pre>
<blockquote>
<p>ğŸ“Œ è¿™ä¸ª schema å°†ä½œä¸ºä¸Šä¸‹æ–‡ä¼ ç»™ DeepSeek æ¨¡å‹ï¼Œå¸®åŠ©å®ƒç†è§£å­—æ®µå«ä¹‰ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-5">4. è°ƒç”¨ DeepSeek ç”Ÿæˆ SQL</h3>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬è°ƒç”¨ DeepSeek çš„ APIï¼Œè®©æ¨¡å‹æ ¹æ®è‡ªç„¶è¯­è¨€ç”Ÿæˆ SQL æŸ¥è¯¢ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">from openai import OpenAI

<span class="hljs-attr">client</span> = OpenAI(
    <span class="hljs-attr">api_key</span>=<span class="hljs-string">''</span>,//è¿™é‡Œå†™å…¥è‡ªå·±çš„apikey
    <span class="hljs-attr">base_url</span>=<span class="hljs-string">'https://api.deepseek.com/v1'</span>
)

def ask_deepseek(query, schema):
    <span class="hljs-attr">prompt</span> = f<span class="hljs-string">"""è¿™æ˜¯ä¸€ä¸ªæ•°æ®åº“çš„Schema:
{schema}
æ ¹æ®è¿™ä¸ªSchemaï¼Œä½ èƒ½è¾“å‡ºä¸€ä¸ªSQLæŸ¥è¯¢æ¥å›ç­”ä»¥ä¸‹é—®é¢˜å—ï¼Ÿ
åªè¾“å‡ºSQLæŸ¥è¯¢ï¼Œä¸è¦è¾“å‡ºä»»ä½•å†…å®¹ï¼Œä¹Ÿä¸è¦å¸¦ä»»ä½•æ ¼å¼ã€‚
é—®é¢˜:{query}
"""</span>
    <span class="hljs-attr">response</span> = client.chat_completions.create(
        <span class="hljs-attr">model</span>=<span class="hljs-string">"deepseek-reasoner"</span>,
        <span class="hljs-attr">max_tokens</span>=<span class="hljs-number">2048</span>,
        <span class="hljs-attr">messages</span>=[
            {<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: prompt}
        ]
    )
    return response.choices<span class="hljs-section">[0]</span>.message.content

<span class="hljs-comment"># ç¤ºä¾‹æé—®</span>
<span class="hljs-attr">question</span> = <span class="hljs-string">"å¼€å‘éƒ¨é—¨å‘˜å·¥çš„å§“åå’Œå·¥èµ„æ˜¯å¤šå°‘?"</span>
<span class="hljs-attr">sql</span> = ask_deepseek(question, schema_str)
print("ç”Ÿæˆçš„sqlæŸ¥è¯¢ï¼š")
print(sql)
</code></pre>
<hr/>
<h2 data-id="heading-6">âœ… é¢„æœŸè¾“å‡º</h2>
<p>è¿è¡Œä¸Šè¿°ä»£ç åï¼Œä½ å¯èƒ½ä¼šå¾—åˆ°å¦‚ä¸‹ SQL æŸ¥è¯¢ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">SELECT name, salary FROM employees WHERE <span class="hljs-attr">department</span> = <span class="hljs-string">'å¼€å‘éƒ¨'</span><span class="hljs-comment">;</span>
</code></pre>
<blockquote>
<p>ğŸ‰ å®Œç¾ï¼æ¨¡å‹æˆåŠŸç†è§£äº†â€œå¼€å‘éƒ¨é—¨â€å¯¹åº”çš„æ˜¯ <code>department = 'å¼€å‘éƒ¨'</code>ï¼Œå¹¶è¿”å›äº†æ­£ç¡®çš„å­—æ®µé€‰æ‹©ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-7">ğŸš€ æŠ€æœ¯äº®ç‚¹è§£æ</h2>

























<table><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>è‡ªç„¶è¯­è¨€ â†’ SQL</strong></td><td>åˆ©ç”¨ LLM çš„ç†è§£èƒ½åŠ›ï¼Œæ— éœ€äººå·¥ç¼–å†™å¤æ‚æŸ¥è¯¢</td></tr><tr><td><strong>Schema ä¸Šä¸‹æ–‡æ³¨å…¥</strong></td><td>è®©æ¨¡å‹çŸ¥é“è¡¨ç»“æ„ï¼Œé¿å…è¯¯è¯»å­—æ®µå</td></tr><tr><td><strong>è½»é‡çº§éƒ¨ç½²</strong></td><td>ä½¿ç”¨ SQLiteï¼Œæ— éœ€å¤æ‚æ•°æ®åº“ç¯å¢ƒ</td></tr><tr><td><strong>å¯æ‰©å±•æ€§å¼º</strong></td><td>å¯è½»æ¾æ¥å…¥å…¶ä»–æ•°æ®åº“æˆ–å‰ç«¯ç•Œé¢</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-8">ğŸ› ï¸ åº”ç”¨åœºæ™¯å»ºè®®</h2>
<ul>
<li><strong>ä½ä»£ç å¹³å°</strong>ï¼šè®©ç”¨æˆ·ç”¨è‡ªç„¶è¯­è¨€æŸ¥è¯¢æ•°æ®</li>
<li><strong>å†…éƒ¨æŠ¥è¡¨å·¥å…·</strong>ï¼šéæŠ€æœ¯äººå‘˜ä¹Ÿèƒ½å¿«é€Ÿè·å–æ•°æ®</li>
<li><strong>æ•™å­¦è¾…åŠ©</strong>ï¼šå¸®åŠ©å­¦ç”Ÿç†è§£ SQL é€»è¾‘</li>
<li><strong>è‡ªåŠ¨åŒ–è„šæœ¬</strong>ï¼šé›†æˆåˆ°å·¥ä½œæµä¸­ï¼Œæå‡æ•ˆç‡</li>
</ul>
<hr/>
<h2 data-id="heading-9">ğŸ“Œ æ€»ç»“</h2>
<p>é€šè¿‡æœ¬æ¬¡å®è·µï¼Œæˆ‘ä»¬å±•ç¤ºäº†å¦‚ä½•åˆ©ç”¨ <strong>llm</strong>ï¼Œç»“åˆ <strong>SQLite</strong> æ•°æ®åº“ï¼Œæ„å»ºä¸€ä¸ªç®€å•å´å¼ºå¤§çš„â€œè‡ªç„¶è¯­è¨€è½¬ SQLâ€ç³»ç»Ÿã€‚æ•´ä¸ªæµç¨‹æ¸…æ™°ã€æ˜“äºå¤ç°ï¼Œé€‚åˆåˆå­¦è€…ä¸Šæ‰‹ï¼Œä¹Ÿå…·å¤‡å®é™…åº”ç”¨ä»·å€¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Foundation Models Framework]]></title>    <link>https://juejin.cn/post/7575106644499169314</link>    <guid>https://juejin.cn/post/7575106644499169314</guid>    <pubDate>2025-11-23T07:53:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575106644499169314" data-draft-id="7575106644499136546" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Foundation Models Framework"/> <meta itemprop="keywords" content="iOS"/> <meta itemprop="datePublished" content="2025-11-23T07:53:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="alloc"/> <meta itemprop="url" content="https://juejin.cn/user/923245496765566"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Foundation Models Framework
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/923245496765566/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    alloc
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T07:53:10.000Z" title="Sun Nov 23 2025 07:53:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»37åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ¯ ç¬¬ä¸€éƒ¨åˆ†ï¼šå¼€åœºå’ŒFoundation Modelsç®€ä»‹</h2>
<h3 data-id="heading-1">1.1 ä¸ºä»€ä¹ˆéœ€è¦Foundation Modelsï¼Ÿ</h3>
<h4 data-id="heading-2">ä¸šåŠ¡ç—›ç‚¹ vs è§£å†³æ–¹æ¡ˆ</h4>
<p>åœ¨ç›¸å†Œä¸šåŠ¡ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°ä»¥ä¸‹é—®é¢˜ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB  
Â  Â  subgraph "ä¼ ç»Ÿæ–¹æ¡ˆç—›ç‚¹"  
Â  Â  Â  Â  P1[æœç´¢ä½“éªŒå·®&lt;br/&gt;éš¾ä»¥ç”¨å…³é”®è¯æ‰¾åˆ°ç…§ç‰‡]  
Â  Â  Â  Â  P2[åˆ†ç±»å·¥ä½œç¹ç&lt;br/&gt;æ‰‹åŠ¨æ•´ç†è€—æ—¶è€—åŠ›]  
Â  Â  Â  Â  P3[å†…å®¹ç†è§£ä¸è¶³&lt;br/&gt;æ— æ³•è‡ªåŠ¨ç†è§£ç…§ç‰‡]  
Â  Â  Â  Â  P4[ä¸ªæ€§åŒ–æ¨èç¼ºå¤±&lt;br/&gt;éš¾ä»¥æ¨èç›¸å…³ç…§ç‰‡]  
Â  Â  end  
Â  Â Â   
Â  Â  subgraph "Foundation Modelsè§£å†³æ–¹æ¡ˆ"  
Â  Â  Â  Â  S1[è‡ªç„¶è¯­è¨€æœç´¢&lt;br/&gt;å»å¹´å¤å¤©åœ¨æµ·è¾¹çš„ç…§ç‰‡]  
Â  Â  Â  Â  S2[æ™ºèƒ½åˆ†ç±»&lt;br/&gt;è‡ªåŠ¨ç»„ç»‡ç…§ç‰‡]  
Â  Â  Â  Â  S3[å†…å®¹ç†è§£&lt;br/&gt;è‡ªåŠ¨åˆ†æç…§ç‰‡å†…å®¹]  
Â  Â  Â  Â  S4[æ™ºèƒ½æ¨è&lt;br/&gt;ç›¸ä¼¼ç…§ç‰‡æ¨è]  
Â  Â  end  
Â  Â Â   
Â  Â  P1 --&gt; S1  
Â  Â  P2 --&gt; S2  
Â  Â  P3 --&gt; S3  
Â  Â  P4 --&gt; S4  
Â  Â Â   
Â  Â  style P1 fill:#FF3B30,color:#fff  
Â  Â  style P2 fill:#FF3B30,color:#fff  
Â  Â  style P3 fill:#FF3B30,color:#fff  
Â  Â  style P4 fill:#FF3B30,color:#fff  
Â  Â Â   
Â  Â  style S1 fill:#34C759,color:#fff  
Â  Â  style S2 fill:#34C759,color:#fff  
Â  Â  style S3 fill:#34C759,color:#fff  
Â  Â  style S4 fill:#34C759,color:#fff  
</code></pre>
<h3 data-id="heading-3">1.2 ä»€ä¹ˆæ˜¯Foundation Models Framework</h3>
<h4 data-id="heading-4">æ ¸å¿ƒå®šä¹‰</h4>
<ul>
<li><strong>å®˜æ–¹å®šä¹‰</strong>: Appleåœ¨iOS 18/macOS 15ä¸­å¼•å…¥çš„åŸç”ŸAIæ¡†æ¶ï¼Œæ˜¯Apple Intelligenceçš„æ ¸å¿ƒç»„ä»¶</li>
<li><strong>æŠ€æœ¯å®šä½</strong>: è®©å¼€å‘è€…è½»æ¾é›†æˆApple Intelligenceçš„å¤§è¯­è¨€æ¨¡å‹èƒ½åŠ›åˆ°åº”ç”¨ä¸­</li>
<li><strong>è®¾è®¡ç†å¿µ</strong>:Â <br/>
- éšç§ä¼˜å…ˆï¼šæ‰€æœ‰å¤„ç†éƒ½åœ¨è®¾å¤‡æœ¬åœ°å®Œæˆ<br/>
- å¼€å‘è€…å‹å¥½ï¼šç®€æ´çš„APIï¼Œæ˜“äºé›†æˆ<br/>
- ç³»ç»Ÿé›†æˆï¼šä¸iOS/macOSæ·±åº¦é›†æˆ</li>
</ul>
<h4 data-id="heading-5">Foundation Models vs ä¼ ç»ŸAIæ¨¡å‹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB  
Â  Â  subgraph "ä¼ ç»ŸAIæ–¹æ¡ˆ"  
Â  Â  Â  Â  T1[äº‘ç«¯æœåŠ¡&lt;br/&gt;éœ€è¦ç½‘ç»œè¿æ¥]  
Â  Â  Â  Â  T2[æ•°æ®ä¸Šä¼ &lt;br/&gt;éœ€è¦ä¸Šä¼ åˆ°æœåŠ¡å™¨]  
Â  Â  Â  Â  T3[é«˜å»¶è¿Ÿ&lt;br/&gt;ç½‘ç»œå¾€è¿”å»¶è¿Ÿ]  
Â  Â  Â  Â  T4[æˆæœ¬è®¡è´¹&lt;br/&gt;æŒ‰ä½¿ç”¨é‡ä»˜è´¹]  
Â  Â  Â  Â  T5[APIå¯†é’¥&lt;br/&gt;éœ€è¦å¯†é’¥ç®¡ç†]  
Â  Â  Â  Â  T6[éšç§é£é™©&lt;br/&gt;æ•°æ®å¯èƒ½æ³„éœ²]  
Â  Â  end  
Â  Â Â   
Â  Â  subgraph "Foundation Modelsæ–¹æ¡ˆ"  
Â  Â  Â  Â  F1[è®¾å¤‡ç«¯è¿è¡Œ&lt;br/&gt;æ— éœ€ç½‘ç»œ]  
Â  Â  Â  Â  F2[æ•°æ®æœ¬åœ°åŒ–&lt;br/&gt;ä¸å‡ºè®¾å¤‡]  
Â  Â  Â  Â  F3[ä½å»¶è¿Ÿ&lt;br/&gt;æœ¬åœ°å¤„ç†]  
Â  Â  Â  Â  F4[é›¶æˆæœ¬&lt;br/&gt;Appleæä¾›]  
Â  Â  Â  Â  F5[æ— éœ€å¯†é’¥&lt;br/&gt;ç³»ç»Ÿé›†æˆ]  
Â  Â  Â  Â  F6[éšç§ä¿æŠ¤&lt;br/&gt;å®Œå…¨æœ¬åœ°å¤„ç†]  
Â  Â  end  
Â  Â Â   
Â  Â  T1 -.å¯¹æ¯”.-&gt; F1  
Â  Â  T2 -.å¯¹æ¯”.-&gt; F2  
Â  Â  T3 -.å¯¹æ¯”.-&gt; F3  
Â  Â  T4 -.å¯¹æ¯”.-&gt; F4  
Â  Â  T5 -.å¯¹æ¯”.-&gt; F5  
Â  Â  T6 -.å¯¹æ¯”.-&gt; F6  
Â  Â Â   
Â  Â  style T1 fill:#FF3B30,color:#fff  
Â  Â  style T2 fill:#FF3B30,color:#fff  
Â  Â  style T3 fill:#FF3B30,color:#fff  
Â  Â  style T4 fill:#FF3B30,color:#fff  
Â  Â  style T5 fill:#FF3B30,color:#fff  
Â  Â  style T6 fill:#FF3B30,color:#fff  
Â  Â Â   
Â  Â  style F1 fill:#34C759,color:#fff  
Â  Â  style F2 fill:#34C759,color:#fff  
Â  Â  style F3 fill:#34C759,color:#fff  
Â  Â  style F4 fill:#34C759,color:#fff  
Â  Â  style F5 fill:#34C759,color:#fff  
Â  Â  style F6 fill:#34C759,color:#fff  
</code></pre>
<p><strong>å¯¹æ¯”è¡¨æ ¼</strong>:</p>













































<table><thead><tr><th>ç‰¹æ€§</th><th>ä¼ ç»ŸAIæ¨¡å‹</th><th>Foundation Models</th></tr></thead><tbody><tr><td>éƒ¨ç½²æ–¹å¼</td><td>äº‘ç«¯æœåŠ¡</td><td>è®¾å¤‡ç«¯è¿è¡Œ</td></tr><tr><td>ç½‘ç»œè¦æ±‚</td><td>éœ€è¦ç½‘ç»œè¿æ¥</td><td>æ— éœ€ç½‘ç»œ</td></tr><tr><td>æ•°æ®å¤„ç†</td><td>æ•°æ®ä¸Šä¼ åˆ°æœåŠ¡å™¨</td><td>æ•°æ®å®Œå…¨æœ¬åœ°åŒ–</td></tr><tr><td>å»¶è¿Ÿ</td><td>è¾ƒé«˜ï¼ˆç½‘ç»œå¾€è¿”ï¼‰</td><td>ä½ï¼ˆæœ¬åœ°å¤„ç†ï¼‰</td></tr><tr><td>æˆæœ¬</td><td>æŒ‰ä½¿ç”¨é‡è®¡è´¹</td><td>é›¶æˆæœ¬ï¼ˆAppleæä¾›ï¼‰</td></tr><tr><td>APIå¯†é’¥</td><td>éœ€è¦ç®¡ç†</td><td>æ— éœ€APIå¯†é’¥</td></tr><tr><td>éšç§</td><td>æ•°æ®å¯èƒ½æ³„éœ²</td><td>å®Œå…¨éšç§ä¿æŠ¤</td></tr></tbody></table>
<h4 data-id="heading-6">Apple Intelligence æ¶æ„æ¦‚è§ˆ</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB  
Â  Â  subgraph "åº”ç”¨å±‚"  
Â  Â  Â  Â  App1[iOS App]  
Â  Â  Â  Â  App2[macOS App]  
Â  Â  Â  Â  App3[iPadOS App]  
Â  Â  end  
Â  Â Â   
Â  Â  subgraph "Foundation Models Framework"  
Â  Â  Â  Â  FM1[LanguageModelSession&lt;br/&gt;ä¼šè¯ç®¡ç†]  
Â  Â  Â  Â  FM2[Tool Protocol&lt;br/&gt;å·¥å…·åè®®]  
Â  Â  Â  Â  FM3[Structured Generation&lt;br/&gt;ç»“æ„åŒ–ç”Ÿæˆ]  
Â  Â  Â  Â  FM4[SystemLanguageModel&lt;br/&gt;ç³»ç»Ÿè¯­è¨€æ¨¡å‹]  
Â  Â  end  
Â  Â Â   
Â  Â  subgraph "åº•å±‚æ‰§è¡Œå±‚"  
Â  Â  Â  Â  CoreML[Core ML&lt;br/&gt;æ¨¡å‹æ¨ç†]  
Â  Â  Â  Â  NeuralEngine[Neural Engine&lt;br/&gt;ç¡¬ä»¶åŠ é€Ÿ]  
Â  Â  end  
Â  Â Â   
Â  Â  subgraph "éšç§å’Œå®‰å…¨å±‚"  
Â  Â  Â  Â  Privacy[éšç§ä¿æŠ¤&lt;br/&gt;è®¾å¤‡ç«¯å¤„ç†]  
Â  Â  Â  Â  Security[æ•°æ®åŠ å¯†&lt;br/&gt;å®‰å…¨å­˜å‚¨]  
Â  Â  end  
Â  Â Â   
Â  Â  App1 --&gt; FM1  
Â  Â  App2 --&gt; FM1  
Â  Â  App3 --&gt; FM1  
Â  Â Â   
Â  Â  FM1 --&gt; FM2  
Â  Â  FM1 --&gt; FM3  
Â  Â  FM1 --&gt; FM4  
Â  Â Â   
Â  Â  FM4 --&gt; CoreML  
Â  Â  CoreML --&gt; NeuralEngine  
Â  Â Â   
Â  Â  NeuralEngine --&gt; Privacy  
Â  Â  Privacy --&gt; Security  
Â  Â Â   
Â  Â  style FM1 fill:#007AFF,color:#fff  
Â  Â  style FM2 fill:#007AFF,color:#fff  
Â  Â  style FM3 fill:#007AFF,color:#fff  
Â  Â  style FM4 fill:#007AFF,color:#fff  
Â  Â  style CoreML fill:#34C759,color:#fff  
Â  Â  style NeuralEngine fill:#34C759,color:#fff  
Â  Â  style Privacy fill:#FF9500,color:#fff  
Â  Â  style Security fill:#FF9500,color:#fff  
</code></pre>
<p><strong>å…³é”®ç»„ä»¶è¯´æ˜</strong>:</p>
<ol>
<li><strong>LanguageModelSession</strong>: ä¼šè¯ç®¡ç†ï¼Œç»´æŠ¤å¯¹è¯ä¸Šä¸‹æ–‡</li>
<li><strong>SystemLanguageModel</strong>: ç³»ç»Ÿæä¾›çš„è¯­è¨€æ¨¡å‹</li>
<li><strong>Tool Protocol</strong>: æ‰©å±•æ¨¡å‹èƒ½åŠ›ï¼Œè¿æ¥ç³»ç»ŸåŠŸèƒ½</li>
<li><strong>Structured Generation</strong>: ç±»å‹å®‰å…¨çš„æ•°æ®ç”Ÿæˆ</li>
</ol>
<h4 data-id="heading-7">æ ¸å¿ƒèƒ½åŠ›æ¦‚è§ˆ</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">mindmap  
Â  root((Foundation Models&lt;br/&gt;æ ¸å¿ƒèƒ½åŠ›))  
Â  Â  è‡ªç„¶è¯­è¨€ç†è§£  
Â  Â  Â  ç†è§£ç”¨æˆ·æŸ¥è¯¢  
Â  Â  Â  ç”Ÿæˆæµç•…å“åº”  
Â  Â  Â  å¤šè½®å¯¹è¯  
Â  Â  Â  ä¸Šä¸‹æ–‡ç»´æŠ¤  
Â  Â  ç»“æ„åŒ–æ•°æ®ç”Ÿæˆ  
Â  Â  Â  @Generableæ ‡è®°  
Â  Â  Â  ç±»å‹å®‰å…¨  
Â  Â  Â  è‡ªåŠ¨è§£æ  
Â  Â  Â  æ˜“äºé›†æˆ  
Â  Â  å·¥å…·è°ƒç”¨  
Â  Â  Â  Toolåè®®  
Â  Â  Â  ç³»ç»ŸåŠŸèƒ½è¿æ¥  
Â  Â  Â  AIè‡ªåŠ¨åˆ¤æ–­  
Â  Â  Â  å¤šå·¥å…·åè°ƒ  
Â  Â  æµå¼å“åº”  
Â  Â  Â  å®æ—¶ç”Ÿæˆ  
Â  Â  Â  æå‡ä½“éªŒ  
Â  Â  Â  é•¿æ–‡æœ¬æ”¯æŒ  
Â  Â  å¤šè¯­è¨€æ”¯æŒ  
Â  Â  Â  10ç§è¯­è¨€  
Â  Â  Â  è‡ªåŠ¨æ£€æµ‹  
Â  Â  Â  ä»£ç åˆ‡æ¢  
</code></pre>
<h3 data-id="heading-8">1.3 ç³»ç»Ÿè¦æ±‚ä¸å…¼å®¹æ€§</h3>
<h4 data-id="heading-9">è®¾å¤‡è¦æ±‚è¯¦è§£</h4>
<p><strong>âš ï¸ é‡è¦æ¾„æ¸…</strong>ï¼šå…³äºè®¾å¤‡è¦æ±‚çš„å¸¸è§æ··æ·†</p>
<ul>
<li><strong>æ­£ç¡®ç†è§£</strong>ï¼šéœ€è¦ <strong>A17 Pro èŠ¯ç‰‡åŠä»¥ä¸Š</strong></li>
<li><strong>å¯¹åº”è®¾å¤‡</strong>ï¼šiPhone 15 Pro åŠä»¥ä¸Šï¼ˆå› ä¸º iPhone 15 Pro æ­è½½ A17 Pro èŠ¯ç‰‡ï¼‰</li>
<li><strong>å¸¸è§è¯¯è§£</strong>ï¼šæœ‰äººè¯¯ä»¥ä¸ºéœ€è¦ "iPhone 17 Pro"ï¼Œä½†å®é™…ä¸Šï¼š<br/>
- iPhone 15 Pro ä½¿ç”¨çš„æ˜¯ <strong>A17 Pro</strong> èŠ¯ç‰‡<br/>
- iPhone 17 Pro ç›®å‰è¿˜ä¸å­˜åœ¨ï¼ˆæˆªè‡³ 2024 å¹´ï¼Œæœ€æ–°æ˜¯ iPhone 16 ç³»åˆ—ï¼‰<br/>
- è¦æ±‚æ˜¯ <strong>A17 Pro èŠ¯ç‰‡</strong>ï¼Œä¸æ˜¯ iPhone 17 Pro</li>
</ul>
<p><strong>å®Œæ•´è®¾å¤‡è¦æ±‚åˆ—è¡¨</strong>ï¼š</p>






























<table><thead><tr><th>è®¾å¤‡ç±»å‹</th><th>å…·ä½“è¦æ±‚</th><th>ç¤ºä¾‹è®¾å¤‡</th></tr></thead><tbody><tr><td><strong>iPhone</strong></td><td>A17 Pro èŠ¯ç‰‡åŠä»¥ä¸Š</td><td>iPhone 15 Proã€iPhone 15 Pro Maxã€iPhone 16 ç³»åˆ—</td></tr><tr><td><strong>iPad</strong></td><td>A17 Pro èŠ¯ç‰‡æˆ– M1 èŠ¯ç‰‡åŠä»¥ä¸Š</td><td>iPad Pro (M1/M2/M3)ã€iPad Air (M1/M2)</td></tr><tr><td><strong>Mac</strong></td><td>Apple Silicon (M ç³»åˆ—)</td><td>MacBook Air/Pro (M1/M2/M3)ã€iMac (M1/M2/M3)</td></tr><tr><td><strong>Apple Vision Pro</strong></td><td>æ”¯æŒ</td><td>Apple Vision Pro</td></tr></tbody></table>
<p><strong>ç³»ç»Ÿè¦æ±‚</strong>ï¼š</p>
<ul>
<li><strong>æ“ä½œç³»ç»Ÿ</strong>: iOS 18.0+ / macOS 15.0+ / iPadOS 18.0+</li>
<li><strong>å¼€å‘å·¥å…·</strong>: Xcode 16.0+</li>
<li><strong>åŠŸèƒ½è¦æ±‚</strong>: Apple Intelligence å·²å¯ç”¨ï¼ˆåœ¨ç³»ç»Ÿè®¾ç½®ä¸­ï¼‰</li>
</ul>
<h4 data-id="heading-10">ç³»ç»Ÿè¦æ±‚æ£€æŸ¥æµç¨‹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD  
Â  Â  Start([åº”ç”¨å¯åŠ¨]) --&gt; CheckOS{æ£€æŸ¥ç³»ç»Ÿç‰ˆæœ¬&lt;br/&gt;iOS 18+/macOS 15+?}  
Â  Â  CheckOS --&gt;|å¦| Error1[ç³»ç»Ÿç‰ˆæœ¬è¿‡ä½&lt;br/&gt;æç¤ºå‡çº§]  
Â  Â  CheckOS --&gt;|æ˜¯| CheckDevice{æ£€æŸ¥è®¾å¤‡&lt;br/&gt;A17 Pro+/Mç³»åˆ—?}  
Â  Â  CheckDevice --&gt;|å¦| Error2[è®¾å¤‡ä¸æ”¯æŒ&lt;br/&gt;Apple Intelligence]  
Â  Â  CheckDevice --&gt;|æ˜¯| CheckSetting{æ£€æŸ¥è®¾ç½®&lt;br/&gt;Apple Intelligenceå·²å¯ç”¨?}  
Â  Â  CheckSetting --&gt;|å¦| Error3[åŠŸèƒ½æœªå¯ç”¨&lt;br/&gt;å¼•å¯¼ç”¨æˆ·å¼€å¯]  
Â  Â  CheckSetting --&gt;|æ˜¯| CheckModel{æ£€æŸ¥æ¨¡å‹å¯ç”¨æ€§&lt;br/&gt;SystemLanguageModel.default}  
Â  Â  CheckModel --&gt;|å¯ç”¨| Success[å¯ä»¥ä½¿ç”¨&lt;br/&gt;Foundation Models]  
Â  Â  CheckModel --&gt;|ä¸å¯ç”¨| Error4[æ¨¡å‹ä¸å¯ç”¨&lt;br/&gt;æ˜¾ç¤ºåŸå› ]  
Â  Â Â   
Â  Â  Error1 --&gt; End([ç»“æŸ])  
Â  Â  Error2 --&gt; End  
Â  Â  Error3 --&gt; End  
Â  Â  Error4 --&gt; End  
Â  Â  Success --&gt; Prewarm[é¢„çƒ­æ¨¡å‹&lt;br/&gt;å¯é€‰ä½†æ¨è]  
Â  Â  Prewarm --&gt; End  
Â  Â Â   
Â  Â  style Start fill:#007AFF,color:#fff  
Â  Â  style CheckOS fill:#5AC8FA,color:#000  
Â  Â  style CheckDevice fill:#5AC8FA,color:#000  
Â  Â  style CheckSetting fill:#5AC8FA,color:#000  
Â  Â  style CheckModel fill:#5AC8FA,color:#000  
Â  Â  style Success fill:#34C759,color:#fff  
Â  Â  style Error1 fill:#FF3B30,color:#fff  
Â  Â  style Error2 fill:#FF3B30,color:#fff  
Â  Â  style Error3 fill:#FF3B30,color:#fff  
Â  Â  style Error4 fill:#FF3B30,color:#fff  
Â  Â  style Prewarm fill:#FF9500,color:#fff  
</code></pre>
<p><strong>å…¼å®¹æ€§æ£€æŸ¥ä»£ç </strong>:</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> FoundationModels

<span class="hljs-comment">// æ£€æŸ¥æ¨¡å‹å¯ç”¨æ€§  </span>
<span class="hljs-keyword">let</span> model <span class="hljs-operator">=</span> <span class="hljs-type">SystemLanguageModel</span>.default  
<span class="hljs-keyword">switch</span> model.availability {  
<span class="hljs-keyword">case</span> .available:  
Â  Â  <span class="hljs-comment">// å¯ä»¥ä½¿ç”¨Foundation Models  </span>
Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… Foundation Modelså¯ç”¨"</span>)  
<span class="hljs-keyword">case</span> .unavailable(<span class="hljs-keyword">let</span> reason):  
Â  Â  <span class="hljs-comment">// å¤„ç†ä¸å¯ç”¨æƒ…å†µ  </span>
Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">"âŒ æ¨¡å‹ä¸å¯ç”¨: <span class="hljs-subst">\(reason.localizedDescription)</span>"</span>)  
}  
</code></pre>
<h4 data-id="heading-11">å¼€å‘æ³¨æ„äº‹é¡¹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR  
Â  Â  subgraph "å¼€å‘é™åˆ¶"  
Â  Â  Â  Â  L1[æ¨¡æ‹Ÿå™¨é™åˆ¶&lt;br/&gt;å¿…é¡»çœŸæœºæµ‹è¯•]  
Â  Â  Â  Â  L2[åœ°åŒºé™åˆ¶&lt;br/&gt;éƒ¨åˆ†åŠŸèƒ½ä¸å¯ç”¨]  
Â  Â  Â  Â  L3[ç”¨æˆ·è®¾ç½®&lt;br/&gt;éœ€å¯ç”¨AIåŠŸèƒ½]  
Â  Â  end  
Â  Â Â   
Â  Â  subgraph "è§£å†³æ–¹æ¡ˆ"  
Â  Â  Â  Â  S1[ä½¿ç”¨çœŸæœºæµ‹è¯•&lt;br/&gt;iPhone 15 ProåŠä»¥ä¸Š]  
Â  Â  Â  Â  S2[æä¾›é™çº§æ–¹æ¡ˆ&lt;br/&gt;åŠŸèƒ½ä¸å¯ç”¨æ—¶]  
Â  Â  Â  Â  S3[å¼•å¯¼ç”¨æˆ·è®¾ç½®&lt;br/&gt;æç¤ºå¼€å¯æ­¥éª¤]  
Â  Â  end  
Â  Â Â   
Â  Â  L1 --&gt; S1  
Â  Â  L2 --&gt; S2  
Â  Â  L3 --&gt; S3  
Â  Â Â   
Â  Â  style L1 fill:#FF3B30,color:#fff  
Â  Â  style L2 fill:#FF3B30,color:#fff  
Â  Â  style L3 fill:#FF3B30,color:#fff  
Â  Â  style S1 fill:#34C759,color:#fff  
Â  Â  style S2 fill:#34C759,color:#fff  
Â  Â  style S3 fill:#34C759,color:#fff  
</code></pre>
<h3 data-id="heading-12">1.4 åº”ç”¨åœºæ™¯æ¦‚è§ˆ</h3>
<h4 data-id="heading-13">åœ¨ç›¸å†Œä¸šåŠ¡ä¸­çš„åº”ç”¨åœºæ™¯</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD  
Â  Â  subgraph "æ™ºèƒ½ç…§ç‰‡åˆ†æ"  
Â  Â  Â  Â  A1[è‡ªåŠ¨ç”Ÿæˆæè¿°]  
Â  Â  Â  Â  A2[è¯†åˆ«å†…å®¹]  
Â  Â  Â  Â  A3[è´¨é‡è¯„åˆ†]  
Â  Â  end  
Â  Â Â   
Â  Â  subgraph "è‡ªç„¶è¯­è¨€æœç´¢"  
Â  Â  Â  Â  B1[æ—¶é—´æœç´¢&lt;br/&gt;å»å¹´å¤å¤©]  
Â  Â  Â  Â  B2[åœ°ç‚¹æœç´¢&lt;br/&gt;åœ¨æµ·è¾¹]  
Â  Â  Â  Â  B3[äººç‰©æœç´¢&lt;br/&gt;åŒ…å«å¥³æœ‹å‹]  
Â  Â  end  
Â  Â Â   
Â  Â  subgraph "æ™ºèƒ½åˆ†ç±»"  
Â  Â  Â  Â  C1[æ—¶é—´åˆ†ç±»]  
Â  Â  Â  Â  C2[åœ°ç‚¹åˆ†ç±»]  
Â  Â  Â  Â  C3[ä¸»é¢˜åˆ†ç±»]  
Â  Â  Â  Â  C4[äººç‰©åˆ†ç±»]  
Â  Â  end  
Â  Â Â   
Â  Â  subgraph "è§†é¢‘ç†è§£"  
Â  Â  Â  Â  D1[è§†é¢‘æ‘˜è¦]  
Â  Â  Â  Â  D2[å…³é”®æ—¶åˆ»]  
Â  Â  Â  Â  D3[å°é¢ç”Ÿæˆ]  
Â  Â  end  
Â  Â Â   
Â  Â  subgraph "æ™ºèƒ½æ¨è"  
Â  Â  Â  Â  E1[ç›¸ä¼¼ç…§ç‰‡]  
Â  Â  Â  Â  E2[ç›¸å…³å›å¿†]  
Â  Â  Â  Â  E3[ä¸ªæ€§åŒ–æ¨è]  
Â  Â  end  
Â  Â Â   
Â  Â  subgraph "ç›¸å†Œç®¡ç†"  
Â  Â  Â  Â  F1[æ¸…ç†å»ºè®®]  
Â  Â  Â  Â  F2[å­˜å‚¨ä¼˜åŒ–]  
Â  Â  Â  Â  F3[ç›¸å†Œæ•´ç†]  
Â  Â  end  
Â  Â Â   
Â  Â  style A1 fill:#007AFF,color:#fff  
Â  Â  style A2 fill:#007AFF,color:#fff  
Â  Â  style A3 fill:#007AFF,color:#fff  
Â  Â  style B1 fill:#34C759,color:#fff  
Â  Â  style B2 fill:#34C759,color:#fff  
Â  Â  style B3 fill:#34C759,color:#fff  
Â  Â  style C1 fill:#FF9500,color:#fff  
Â  Â  style C2 fill:#FF9500,color:#fff  
Â  Â  style C3 fill:#FF9500,color:#fff  
Â  Â  style C4 fill:#FF9500,color:#fff  
Â  Â  style D1 fill:#5AC8FA,color:#000  
Â  Â  style D2 fill:#5AC8FA,color:#000  
Â  Â  style D3 fill:#5AC8FA,color:#000  
Â  Â  style E1 fill:#AF52DE,color:#fff  
Â  Â  style E2 fill:#AF52DE,color:#fff  
Â  Â  style E3 fill:#AF52DE,color:#fff  
Â  Â  style F1 fill:#FF2D55,color:#fff  
Â  Â  style F2 fill:#FF2D55,color:#fff  
Â  Â  style F3 fill:#FF2D55,color:#fff  
</code></pre>
<h3 data-id="heading-14">1.5 ä¸å…¶ä»–AIæ¡†æ¶çš„å¯¹æ¯”</h3>
<h4 data-id="heading-15">Foundation Models vs Core ML vs OpenAI API</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB  
Â  Â  subgraph "Core ML"  
Â  Â  Â  Â  CM1[é€šç”¨MLæ¡†æ¶]  
Â  Â  Â  Â  CM2[éœ€è¦è®­ç»ƒæ¨¡å‹]  
Â  Â  Â  Â  CM3[åº•å±‚API]  
Â  Â  Â  Â  CM4[å„ç§MLä»»åŠ¡]  
Â  Â  end  
Â  Â Â   
Â  Â  subgraph "Foundation Models"  
Â  Â  Â  Â  FM1[ä¸“ç”¨è¯­è¨€æ¨¡å‹]  
Â  Â  Â  Â  FM2[Appleé¢„è®­ç»ƒ]  
Â  Â  Â  Â  FM3[é«˜çº§API]  
Â  Â  Â  Â  FM4[NLPä»»åŠ¡]  
Â  Â  end  
Â  Â Â   
Â  Â  subgraph "OpenAI API"  
Â  Â  Â  Â  OA1[äº‘ç«¯æœåŠ¡]  
Â  Â  Â  Â  OA2[éœ€è¦ç½‘ç»œ]  
Â  Â  Â  Â  OA3[éœ€è¦å¯†é’¥]  
Â  Â  Â  Â  OA4[ä»˜è´¹ä½¿ç”¨]  
Â  Â  end  
Â  Â Â   
Â  Â  style CM1 fill:#FF9500,color:#fff  
Â  Â  style CM2 fill:#FF9500,color:#fff  
Â  Â  style CM3 fill:#FF9500,color:#fff  
Â  Â  style CM4 fill:#FF9500,color:#fff  
Â  Â Â   
Â  Â  style FM1 fill:#34C759,color:#fff  
Â  Â  style FM2 fill:#34C759,color:#fff  
Â  Â  style FM3 fill:#34C759,color:#fff  
Â  Â  style FM4 fill:#34C759,color:#fff  
Â  Â Â   
Â  Â  style OA1 fill:#FF3B30,color:#fff  
Â  Â  style OA2 fill:#FF3B30,color:#fff  
Â  Â  style OA3 fill:#FF3B30,color:#fff  
Â  Â  style OA4 fill:#FF3B30,color:#fff  
</code></pre>
<p><strong>å¯¹æ¯”è¡¨æ ¼</strong>:</p>





















































<table><thead><tr><th>ç‰¹æ€§</th><th>Core ML</th><th>Foundation Models</th><th>OpenAI API</th></tr></thead><tbody><tr><td>å®šä½</td><td>é€šç”¨MLæ¡†æ¶</td><td>ä¸“ç”¨è¯­è¨€æ¨¡å‹</td><td>äº‘ç«¯AIæœåŠ¡</td></tr><tr><td>æ¨¡å‹æ¥æº</td><td>éœ€è¦è‡ªå·±è®­ç»ƒ/è½¬æ¢</td><td>Appleé¢„è®­ç»ƒ</td><td>OpenAIæä¾›</td></tr><tr><td>APIçº§åˆ«</td><td>åº•å±‚</td><td>é«˜çº§</td><td>é«˜çº§</td></tr><tr><td>é€‚ç”¨ä»»åŠ¡</td><td>å„ç§MLä»»åŠ¡</td><td>NLPä»»åŠ¡</td><td>NLPä»»åŠ¡</td></tr><tr><td>éƒ¨ç½²æ–¹å¼</td><td>è®¾å¤‡ç«¯</td><td>è®¾å¤‡ç«¯</td><td>äº‘ç«¯</td></tr><tr><td>ç½‘ç»œéœ€æ±‚</td><td>æ— éœ€</td><td>æ— éœ€</td><td>éœ€è¦</td></tr><tr><td>æˆæœ¬</td><td>å…è´¹</td><td>å…è´¹</td><td>ä»˜è´¹</td></tr></tbody></table>
<h3 data-id="heading-16">1.6 è®¾è®¡å“²å­¦ä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-17">Appleçš„è®¾è®¡å“²å­¦</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR  
Â  Â  subgraph "è®¾è®¡ç†å¿µ"  
Â  Â  Â  Â  P1[éšç§ä¼˜å…ˆ&lt;br/&gt;è®¾å¤‡ç«¯å¤„ç†]  
Â  Â  Â  Â  P2[å¼€å‘è€…å‹å¥½&lt;br/&gt;ç®€æ´API]  
Â  Â  Â  Â  P3[ç³»ç»Ÿé›†æˆ&lt;br/&gt;æ·±åº¦é›†æˆ]  
Â  Â  Â  Â  P4[æ€§èƒ½ä¼˜åŒ–&lt;br/&gt;Neural Engine]  
Â  Â  end  
Â  Â Â   
Â  Â  subgraph "æœ€ä½³å®è·µ"  
Â  Â  Â  Â  B1[æ£€æŸ¥å¯ç”¨æ€§]  
Â  Â  Â  Â  B2[é”™è¯¯å¤„ç†]  
Â  Â  Â  Â  B3[é™çº§æ–¹æ¡ˆ]  
Â  Â  Â  Â  B4[ä¸Šä¸‹æ–‡ç®¡ç†]  
Â  Â  Â  Â  B5[æµå¼å“åº”]  
Â  Â  end  
Â  Â Â   
Â  Â  P1 --&gt; B1  
Â  Â  P2 --&gt; B2  
Â  Â  P3 --&gt; B3  
Â  Â  P4 --&gt; B4  
Â  Â  P4 --&gt; B5  
Â  Â Â   
Â  Â  style P1 fill:#007AFF,color:#fff  
Â  Â  style P2 fill:#34C759,color:#fff  
Â  Â  style P3 fill:#FF9500,color:#fff  
Â  Â  style P4 fill:#5AC8FA,color:#000  
Â  Â  style B1 fill:#AF52DE,color:#fff  
Â  Â  style B2 fill:#AF52DE,color:#fff  
Â  Â  style B3 fill:#AF52DE,color:#fff  
Â  Â  style B4 fill:#AF52DE,color:#fff  
Â  Â  style B5 fill:#AF52DE,color:#fff  
</code></pre>
<hr/>
<h2 data-id="heading-18">ğŸ”§ ç¬¬äºŒéƒ¨åˆ†ï¼šæ ¸å¿ƒAPIå¿«é€Ÿä¸Šæ‰‹Â </h2>
<h3 data-id="heading-19">2.1 LanguageModelSession - ä¼šè¯ç®¡ç†</h3>
<h4 data-id="heading-20">åŸºç¡€ä½¿ç”¨æµç¨‹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram  
Â  Â  participant App as åº”ç”¨ç¨‹åº  
Â  Â  participant Session as LanguageModelSession  
Â  Â  participant Model as SystemLanguageModel  
Â  Â Â   
Â  Â  App-&gt;&gt;Session: åˆ›å»ºä¼šè¯  
Â  Â  Session-&gt;&gt;Model: æ£€æŸ¥å¯ç”¨æ€§  
Â  Â  Model--&gt;&gt;Session: è¿”å›å¯ç”¨çŠ¶æ€  
Â  Â Â   
Â  Â  App-&gt;&gt;Session: sendMessage("ç”Ÿæˆæ ‡é¢˜")  
Â  Â  Session-&gt;&gt;Model: å‘é€è¯·æ±‚  
Â  Â  Model--&gt;&gt;Session: è¿”å›å“åº”  
Â  Â  Session--&gt;&gt;App: è¿”å›content  
Â  Â Â   
Â  Â  Note over App,Model: ä¼šè¯è‡ªåŠ¨ç»´æŠ¤ä¸Šä¸‹æ–‡  
</code></pre>
<p><strong>ä»£ç ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> FoundationModels

<span class="hljs-comment">// åˆ›å»ºä¼šè¯  </span>
<span class="hljs-keyword">let</span> session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>()

<span class="hljs-comment">// å•è½®å¯¹è¯  </span>
<span class="hljs-keyword">let</span> response <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(  
Â  Â  to: <span class="hljs-string">"ç”Ÿæˆä¸€ä¸ªæ—…è¡Œåšå®¢çš„æ ‡é¢˜"</span>  
)  
<span class="hljs-built_in">print</span>(response.content)

<span class="hljs-comment">// å¤šè½®å¯¹è¯ - ä¼šè¯è‡ªåŠ¨ç»´æŠ¤ä¸Šä¸‹æ–‡  </span>
<span class="hljs-keyword">let</span> response1 <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(to: <span class="hljs-string">"æˆ‘å–œæ¬¢æ‘„å½±"</span>)  
<span class="hljs-keyword">let</span> response2 <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(to: <span class="hljs-string">"æ¨èä¸€äº›æ‹æ‘„æŠ€å·§"</span>)  
<span class="hljs-comment">// AIä¼šè®°ä½ä¹‹å‰è¯´å–œæ¬¢æ‘„å½±  </span>
</code></pre>
<h4 data-id="heading-21">è‡ªå®šä¹‰æŒ‡ä»¤ï¼ˆInstructionsï¼‰</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>(  
Â  Â  instructions: <span class="hljs-type">Instructions</span>(<span class="hljs-string">"""  
Â  Â  Â  Â  ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æ‘„å½±åŠ©æ‰‹ï¼Œæ“…é•¿ï¼š  
Â  Â  Â  Â  1. åˆ†æç…§ç‰‡å’Œæä¾›æ‹æ‘„å»ºè®®  
Â  Â  Â  Â  2. è¯†åˆ«ç…§ç‰‡å†…å®¹å’Œåœºæ™¯  
Â  Â  Â  Â  3. æä¾›æ„å›¾å’Œå…‰çº¿å»ºè®®  
Â  Â  """</span>)  
)  
</code></pre>
<h3 data-id="heading-22">2.2 æµå¼å“åº”</h3>
<h4 data-id="heading-23">æµå¼å“åº”å·¥ä½œæµç¨‹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram  
Â  Â  participant UI as UIç•Œé¢  
Â  Â  participant Session as LanguageModelSession  
Â  Â  participant Model as è¯­è¨€æ¨¡å‹  
Â  Â Â   
Â  Â  UI-&gt;&gt;Session: streamResponse("åˆ†æç…§ç‰‡")  
Â  Â  Session-&gt;&gt;Model: å¼€å§‹ç”Ÿæˆ  
Â  Â  loop æµå¼ç”Ÿæˆ  
Â  Â  Â  Â  Model--&gt;&gt;Session: ç”Ÿæˆéƒ¨åˆ†æ–‡æœ¬  
Â  Â  Â  Â  Session--&gt;&gt;UI: è¿”å›partialText  
Â  Â  Â  Â  UI-&gt;&gt;UI: å®æ—¶æ›´æ–°UI  
Â  Â  end  
Â  Â  Model--&gt;&gt;Session: ç”Ÿæˆå®Œæˆ  
Â  Â  Session--&gt;&gt;UI: æµç»“æŸ  
</code></pre>
<p><strong>ä»£ç ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> stream <span class="hljs-operator">=</span> session.streamResponse(to: <span class="hljs-string">"åˆ†æç…§ç‰‡"</span>)

<span class="hljs-keyword">for</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> partialText <span class="hljs-keyword">in</span> stream {  
Â  Â  updateUI(with: partialText) <span class="hljs-comment">// å®æ—¶æ›´æ–°UI  </span>
}  
</code></pre>
<p><strong>åº”ç”¨åœºæ™¯</strong>: èŠå¤©ç•Œé¢ã€é•¿æ–‡æœ¬ç”Ÿæˆ</p>
<h3 data-id="heading-24">2.3 ç»“æ„åŒ–æ•°æ®ç”Ÿæˆï¼ˆ@Generableï¼‰</h3>
<h4 data-id="heading-25">ç»“æ„åŒ–ç”Ÿæˆæµç¨‹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR  
Â  Â  A[å®šä¹‰æ•°æ®æ¨¡å‹&lt;br/&gt;@Generable] --&gt; B[ç”ŸæˆPrompt&lt;br/&gt;åŒ…å«å­—æ®µæè¿°]  
Â  Â  B --&gt; C[AIç†è§£éœ€æ±‚&lt;br/&gt;åŸºäº@Guide]  
Â  Â  C --&gt; D[ç”Ÿæˆç»“æ„åŒ–æ•°æ®&lt;br/&gt;ç±»å‹å®‰å…¨]  
Â  Â  D --&gt; E[è‡ªåŠ¨è§£æ&lt;br/&gt;è¿”å›ç»“æœ]  
Â  Â Â   
Â  Â  style A fill:#007AFF,color:#fff  
Â  Â  style B fill:#5AC8FA,color:#000  
Â  Â  style C fill:#FF9500,color:#fff  
Â  Â  style D fill:#34C759,color:#fff  
Â  Â  style E fill:#AF52DE,color:#fff  
</code></pre>
<p><strong>å®šä¹‰æ•°æ®æ¨¡å‹</strong>:</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-meta">@Generable</span>  
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">PhotoAnalysis</span> {  
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"ç…§ç‰‡çš„ä¸»é¢˜æˆ–ä¸»è¦å†…å®¹"</span>)  
Â  Â  <span class="hljs-keyword">let</span> subject: <span class="hljs-type">String</span>  
Â  Â Â   
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"ç…§ç‰‡çš„æƒ…æ„Ÿè‰²å½©ï¼špositive, neutral, negative"</span>)  
Â  Â  <span class="hljs-keyword">let</span> mood: <span class="hljs-type">PhotoMood</span>  
Â  Â Â   
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"ç…§ç‰‡çš„æ‹æ‘„åœºæ™¯ï¼šindoor, outdoor, portrait, landscapeç­‰"</span>)  
Â  Â  <span class="hljs-keyword">let</span> scene: <span class="hljs-type">String</span>  
Â  Â Â   
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"ç…§ç‰‡è´¨é‡è¯„åˆ†ï¼Œ1-10åˆ†"</span>)  
Â  Â  <span class="hljs-keyword">let</span> qualityScore: <span class="hljs-type">Int</span>  
Â  Â Â   
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"ç…§ç‰‡çš„å…³é”®è¯æ ‡ç­¾"</span>)  
Â  Â  <span class="hljs-keyword">let</span> tags: [<span class="hljs-type">String</span>]  
Â  Â Â   
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"æ”¹è¿›å»ºè®®"</span>)  
Â  Â  <span class="hljs-keyword">let</span> suggestions: [<span class="hljs-type">String</span>]  
}

<span class="hljs-keyword">enum</span> <span class="hljs-title class_">PhotoMood</span>: <span class="hljs-title class_">String</span>, <span class="hljs-title class_">Codable</span> {  
Â  Â  <span class="hljs-keyword">case</span> positive, neutral, negative  
}  
</code></pre>
<p><strong>ä½¿ç”¨ç»“æ„åŒ–ç”Ÿæˆ</strong>:</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>()  
<span class="hljs-keyword">let</span> analysis <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(  
Â  Â  to: <span class="hljs-string">"åˆ†æè¿™å¼ ç…§ç‰‡ï¼š<span class="hljs-subst">\(photoDescription)</span>"</span>,  
Â  Â  generating: <span class="hljs-type">PhotoAnalysis</span>.<span class="hljs-keyword">self</span>  
)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¸»é¢˜: <span class="hljs-subst">\(analysis.content.subject)</span>"</span>)  
<span class="hljs-built_in">print</span>(<span class="hljs-string">"è´¨é‡è¯„åˆ†: <span class="hljs-subst">\(analysis.content.qualityScore)</span>"</span>)  
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ ‡ç­¾: <span class="hljs-subst">\(analysis.content.tags.joined(separator: <span class="hljs-string">", "</span>))</span>"</span>)  
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>:</p>
<ul>
<li>âœ… ç±»å‹å®‰å…¨</li>
<li>âœ… è‡ªåŠ¨è§£æ</li>
<li>âœ… æ˜“äºé›†æˆåˆ°ç°æœ‰ä»£ç </li>
</ul>
<p><strong>âš ï¸ Schema å¼€é”€æ³¨æ„</strong>: ä½¿ç”¨ <code>@Generable</code> æ—¶ï¼Œæ¯ä¸ªå±æ€§çº¦å¢åŠ  30 tokens çš„å¼€é”€ã€‚åœ¨è®¾è®¡å¤æ‚çš„æ•°æ®ç»“æ„æ—¶ï¼Œéœ€è¦è€ƒè™‘è¿™ä¸ªå¼€é”€å¯¹ä¸Šä¸‹æ–‡çª—å£çš„å½±å“ã€‚</p>
<h3 data-id="heading-26">2.4 å·¥å…·è°ƒç”¨ï¼ˆTool Callingï¼‰- æ ¸å¿ƒæ¦‚å¿µ</h3>
<h4 data-id="heading-27">Toolåè®®ç»“æ„</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">classDiagram  
Â  Â  class Tool {  
Â  Â  Â  Â  &lt;&lt;protocol&gt;&gt;  
Â  Â  Â  Â  +String name  
Â  Â  Â  Â  +String description  
Â  Â  Â  Â  +GenerationSchema parameters  
Â  Â  Â  Â  +call(Arguments) Output  
Â  Â  }  
Â  Â Â   
Â  Â  class PhotoSearchTool {  
Â  Â  Â  Â  +String name  
Â  Â  Â  Â  +String description  
Â  Â  Â  Â  +call(Arguments) Output  
Â  Â  }  
Â  Â Â   
Â  Â  class PhotoAnalysisTool {  
Â  Â  Â  Â  +String name  
Â  Â  Â  Â  +String description  
Â  Â  Â  Â  +call(Arguments) Output  
Â  Â  }  
Â  Â Â   
Â  Â  Tool &lt;|.. PhotoSearchTool  
Â  Â  Tool &lt;|.. PhotoAnalysisTool  
Â  Â Â   
Â  Â  note for Tool "å…³é”®ç‰¹æ€§:\n- name: å·¥å…·æ ‡è¯†ç¬¦\n- description: AIåˆ¤æ–­ä½•æ—¶ä½¿ç”¨\n- parameters: å®šä¹‰å‚æ•°ç»“æ„\n- call: å·¥å…·æ‰§è¡Œæ–¹æ³•"  
</code></pre>
<p><strong>Toolåè®®å®šä¹‰</strong>:</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">Tool</span>&lt;<span class="hljs-title class_">Arguments</span>, <span class="hljs-title class_">Output</span>&gt; : <span class="hljs-title class_">Sendable</span> {  
Â  Â  <span class="hljs-keyword">var</span> name: <span class="hljs-type">String</span> { <span class="hljs-keyword">get</span> }  
Â  Â  <span class="hljs-keyword">var</span> description: <span class="hljs-type">String</span> { <span class="hljs-keyword">get</span> }  
Â  Â  <span class="hljs-keyword">var</span> parameters: <span class="hljs-type">GenerationSchema</span> { <span class="hljs-keyword">get</span> }  
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">call</span>(<span class="hljs-params">arguments</span>: <span class="hljs-type">Arguments</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">Output</span>  
}  
</code></pre>
<h4 data-id="heading-28">åŸºç¡€Toolå®ç°ç¤ºä¾‹</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">PhotoSearchTool</span>: <span class="hljs-title class_">Tool</span> {  
Â  Â  <span class="hljs-keyword">let</span> name <span class="hljs-operator">=</span> <span class="hljs-string">"searchPhotos"</span>  
Â  Â  <span class="hljs-keyword">let</span> description <span class="hljs-operator">=</span> <span class="hljs-string">"æ ¹æ®å…³é”®è¯æœç´¢ç›¸å†Œä¸­çš„ç…§ç‰‡"</span>  
Â  Â Â   
Â  Â  <span class="hljs-meta">@Generable</span>  
Â  Â  <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Arguments</span> {  
Â  Â  Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"æœç´¢å…³é”®è¯"</span>)  
Â  Â  Â  Â  <span class="hljs-keyword">var</span> keyword: <span class="hljs-type">String</span>  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">call</span>(<span class="hljs-params">arguments</span>: <span class="hljs-type">Arguments</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-keyword">some</span> <span class="hljs-type">PromptRepresentable</span> {  
Â  Â  Â  Â  <span class="hljs-keyword">let</span> photos <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> searchPhotos(keyword: arguments.keyword)  
Â  Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-type">GeneratedContent</span>(properties: [  
Â  Â  Â  Â  Â  Â  <span class="hljs-string">"count"</span>: photos.count,  
Â  Â  Â  Â  Â  Â  <span class="hljs-string">"photos"</span>: photos.map { <span class="hljs-variable">$0</span>.toDict() }  
Â  Â  Â  Â  ])  
Â  Â  }  
}  
</code></pre>
<h4 data-id="heading-29">å·¥å…·è°ƒç”¨å·¥ä½œæœºåˆ¶</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD  
Â  Â  Start([ç”¨æˆ·è¾“å…¥:&lt;br/&gt;æ‰¾ä¸€ä¸‹å»å¹´å¤å¤©åœ¨æµ·è¾¹çš„ç…§ç‰‡]) --&gt; Step1[1. AIç†è§£ç”¨æˆ·æ„å›¾&lt;br/&gt;åˆ†ææŸ¥è¯¢å†…å®¹]  
Â  Â  Step1 --&gt; Step2[2. åŒ¹é…å·¥å…·æè¿°&lt;br/&gt;PhotoSearchTool description]  
Â  Â  Step2 --&gt; Step3[3. ç”Ÿæˆå‚æ•°&lt;br/&gt;keyword: æµ·è¾¹&lt;br/&gt;timeRange: å»å¹´å¤å¤©]  
Â  Â  Step3 --&gt; Step4[4. æ‰§è¡Œå·¥å…·&lt;br/&gt;PhotoSearchTool.call]  
Â  Â  Step4 --&gt; Step5[5. è·å–ç»“æœ&lt;br/&gt;è¿”å›ç…§ç‰‡åˆ—è¡¨]  
Â  Â  Step5 --&gt; Step6[6. ç”Ÿæˆæœ€ç»ˆå“åº”&lt;br/&gt;æˆ‘æ‰¾åˆ°äº†5å¼ ç…§ç‰‡...]  
Â  Â  Step6 --&gt; End([è¿”å›ç»™ç”¨æˆ·])  
Â  Â Â   
Â  Â  style Start fill:#007AFF,color:#fff  
Â  Â  style Step1 fill:#5AC8FA,color:#000  
Â  Â  style Step2 fill:#5AC8FA,color:#000  
Â  Â  style Step3 fill:#FF9500,color:#fff  
Â  Â  style Step4 fill:#FF9500,color:#fff  
Â  Â  style Step5 fill:#34C759,color:#fff  
Â  Â  style Step6 fill:#34C759,color:#fff  
Â  Â  style End fill:#007AFF,color:#fff  
</code></pre>
<p><strong>ç¤ºä¾‹æµç¨‹</strong>:</p>
<pre><code class="hljs language-ini" lang="ini">ç”¨æˆ·: "æ‰¾ä¸€ä¸‹å»å¹´å¤å¤©åœ¨æµ·è¾¹çš„ç…§ç‰‡"  
â†’ AIè¯†åˆ«: æœç´¢ç…§ç‰‡  
â†’ åŒ¹é…å·¥å…·: PhotoSearchTool  
â†’ æå–å‚æ•°: <span class="hljs-attr">keyword</span>=<span class="hljs-string">"æµ·è¾¹"</span>, timeRange=<span class="hljs-string">"å»å¹´å¤å¤©"</span>  
â†’ è°ƒç”¨å·¥å…· â†’ è¿”å›ç»“æœ  
</code></pre>
<h4 data-id="heading-30">å¤šå·¥å…·åè°ƒ</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR  
Â  Â  User([ç”¨æˆ·è¯·æ±‚:&lt;br/&gt;æ‰¾ç…§ç‰‡+åˆ†æ+åˆ›å»ºç›¸å†Œ]) --&gt; AI[AIåˆ†æè¯·æ±‚]  
Â  Â Â   
Â  Â  AI --&gt; Tool1[PhotoSearchTool&lt;br/&gt;æœç´¢ç…§ç‰‡]  
Â  Â  Tool1 --&gt; Result1[ç…§ç‰‡åˆ—è¡¨]  
Â  Â  Result1 --&gt; Tool2[PhotoAnalysisTool&lt;br/&gt;åˆ†æå†…å®¹]  
Â  Â  Tool2 --&gt; Result2[åˆ†æç»“æœ]  
Â  Â  Result2 --&gt; Tool3[AlbumCreationTool&lt;br/&gt;åˆ›å»ºç›¸å†Œ]  
Â  Â  Tool3 --&gt; Result3[ç›¸å†Œåˆ›å»ºæˆåŠŸ]  
Â  Â  Result3 --&gt; Response[AIç”Ÿæˆæœ€ç»ˆå“åº”]  
Â  Â Â   
Â  Â  style User fill:#007AFF,color:#fff  
Â  Â  style AI fill:#5AC8FA,color:#000  
Â  Â  style Tool1 fill:#FF9500,color:#fff  
Â  Â  style Tool2 fill:#FF9500,color:#fff  
Â  Â  style Tool3 fill:#FF9500,color:#fff  
Â  Â  style Response fill:#34C759,color:#fff  
</code></pre>
<p><strong>ä½¿ç”¨ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>(  
Â  Â  tools: [<span class="hljs-type">PhotoSearchTool</span>(), <span class="hljs-type">PhotoAnalysisTool</span>(), <span class="hljs-type">AlbumCreationTool</span>()],  
Â  Â  instructions: <span class="hljs-type">Instructions</span>(<span class="hljs-string">"ä½ æ˜¯æ™ºèƒ½ç›¸å†ŒåŠ©æ‰‹"</span>)  
)

<span class="hljs-comment">// AIè‡ªåŠ¨åˆ¤æ–­ä½•æ—¶è°ƒç”¨å·¥å…·  </span>
<span class="hljs-keyword">let</span> response <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(  
Â  Â  to: <span class="hljs-string">"æ‰¾å»å¹´å¤å¤©åœ¨æµ·è¾¹çš„ç…§ç‰‡ï¼Œåˆ†æå†…å®¹ï¼Œåˆ›å»ºç›¸å†Œ"</span>  
)  
</code></pre>
<h4 data-id="heading-31">Tool Callingæœ€ä½³å®è·µ</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">mindmap  
Â  root((Tool Calling&lt;br/&gt;æœ€ä½³å®è·µ))  
Â  Â  æ¸…æ™°çš„å·¥å…·æè¿°  
Â  Â  Â  AIåˆ¤æ–­ä¾æ®  
Â  Â  Â  æè¿°è¦å‡†ç¡®  
Â  Â  Â  åŒ…å«ä½¿ç”¨åœºæ™¯  
Â  Â  è¯¦ç»†çš„å‚æ•°Guide  
Â  Â  Â  å¸®åŠ©AIç†è§£  
Â  Â  Â  æ˜ç¡®å‚æ•°å«ä¹‰  
Â  Â  Â  æä¾›ç¤ºä¾‹  
Â  Â  ç»“æ„åŒ–çš„è¿”å›ç»“æœ  
Â  Â  Â  ä¾¿äºAIå¤„ç†  
Â  Â  Â  ç»Ÿä¸€çš„æ ¼å¼  
Â  Â  Â  åŒ…å«å¿…è¦ä¿¡æ¯  
Â  Â  å®Œå–„çš„é”™è¯¯å¤„ç†  
Â  Â  Â  å‹å¥½çš„é”™è¯¯ä¿¡æ¯  
Â  Â  Â  å¼‚å¸¸æƒ…å†µå¤„ç†  
Â  Â  Â  é™çº§æ–¹æ¡ˆ  
Â  Â  å•ä¸€èŒè´£åŸåˆ™  
Â  Â  Â  ä¸€ä¸ªå·¥å…·ä¸€ä»¶äº‹  
Â  Â  Â  é¿å…åŠŸèƒ½è€¦åˆ  
Â  Â  Â  æ˜“äºç»´æŠ¤  
</code></pre>
<hr/>
<h2 data-id="heading-32">ğŸ“¸ ç¬¬ä¸‰éƒ¨åˆ†ï¼šç›¸å†Œä¸šåŠ¡åº”ç”¨åœºæ™¯Â </h2>
<h3 data-id="heading-33">3.1 æ™ºèƒ½ç…§ç‰‡åˆ†æ</h3>
<h4 data-id="heading-34">åœºæ™¯1: è‡ªåŠ¨ç”Ÿæˆç…§ç‰‡æè¿°</h4>
<p><strong>æ•°æ®æ¨¡å‹å®šä¹‰</strong>:</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-meta">@Generable</span>  
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">PhotoDescription</span> {  
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"ç…§ç‰‡çš„ç®€çŸ­æè¿°ï¼Œ50å­—ä»¥å†…"</span>)  
Â  Â  <span class="hljs-keyword">let</span> shortDescription: <span class="hljs-type">String</span>  
Â  Â Â   
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"è¯¦ç»†æè¿°ï¼ŒåŒ…å«äººç‰©ã€åœºæ™¯ã€æ´»åŠ¨ç­‰"</span>)  
Â  Â  <span class="hljs-keyword">let</span> detailedDescription: <span class="hljs-type">String</span>  
Â  Â Â   
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"å»ºè®®çš„ç›¸å†Œåˆ†ç±»"</span>)  
Â  Â  <span class="hljs-keyword">let</span> suggestedAlbum: <span class="hljs-type">String</span>  
Â  Â Â   
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"ç…§ç‰‡çš„æƒ…æ„Ÿä»·å€¼ï¼šhigh, medium, low"</span>)  
Â  Â  <span class="hljs-keyword">let</span> emotionalValue: <span class="hljs-type">String</span>  
}  
</code></pre>
<p><strong>å®ç°æµç¨‹</strong>:</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram  
Â  Â  participant User as ç”¨æˆ·  
Â  Â  participant ViewModel as PhotoAnalysisViewModel  
Â  Â  participant Session as LanguageModelSession  
Â  Â  participant AI as Foundation Models  
Â  Â Â   
Â  Â  User-&gt;&gt;ViewModel: é€‰æ‹©ç…§ç‰‡  
Â  Â  ViewModel-&gt;&gt;ViewModel: è·å–ç…§ç‰‡å…ƒæ•°æ®  
Â  Â  ViewModel-&gt;&gt;Session: ç”Ÿæˆåˆ†æPrompt  
Â  Â  Session-&gt;&gt;AI: å‘é€è¯·æ±‚  
Â  Â  AI-&gt;&gt;AI: åˆ†æç…§ç‰‡å†…å®¹  
Â  Â  AI--&gt;&gt;Session: è¿”å›ç»“æ„åŒ–æ•°æ®  
Â  Â  Session--&gt;&gt;ViewModel: PhotoDescription  
Â  Â  ViewModel-&gt;&gt;ViewModel: æ›´æ–°UIçŠ¶æ€  
Â  Â  ViewModel--&gt;&gt;User: æ˜¾ç¤ºåˆ†æç»“æœ  
</code></pre>
<p><strong>ViewModelå®ç°</strong>:</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-meta">@Observable</span>  
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PhotoAnalysisViewModel</span> {  
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>(  
Â  Â  Â  Â  instructions: <span class="hljs-type">Instructions</span>(  
Â  Â  Â  Â  Â  Â  <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç…§ç‰‡åˆ†æåŠ©æ‰‹ï¼Œæ“…é•¿åˆ†æç…§ç‰‡å†…å®¹å¹¶ç”Ÿæˆæœ‰æ„ä¹‰çš„æè¿°ã€‚"</span>  
Â  Â  Â  Â  )  
Â  Â  )  
Â  Â Â   
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">analyzePhoto</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">photo</span>: <span class="hljs-type">Photo</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">PhotoDescription</span> {  
Â  Â  Â  Â  <span class="hljs-keyword">let</span> metadata <span class="hljs-operator">=</span> photo.metadata  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-keyword">let</span> prompt <span class="hljs-operator">=</span> <span class="hljs-string">"""  
Â  Â  Â  Â  Â  Â  åˆ†æè¿™å¼ ç…§ç‰‡ï¼š  
Â  Â  Â  Â  Â  Â  - æ‹æ‘„æ—¶é—´: <span class="hljs-subst">\(metadata.date)</span>  
Â  Â  Â  Â  Â  Â  - æ‹æ‘„åœ°ç‚¹: <span class="hljs-subst">\(metadata.location <span class="hljs-operator">??</span> <span class="hljs-string">"æœªçŸ¥"</span>)</span>  
Â  Â  Â  Â  Â  Â  - EXIFä¿¡æ¯: <span class="hljs-subst">\(metadata.exifInfo)</span>  
Â  Â  Â  Â  Â  Â Â   
Â  Â  Â  Â  Â  Â  è¯·ç”Ÿæˆè¯¦ç»†çš„ç…§ç‰‡æè¿°å’Œåˆ†ç±»å»ºè®®ã€‚  
Â  Â  Â  Â  """</span>  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-keyword">let</span> response <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(  
Â  Â  Â  Â  Â  Â  to: <span class="hljs-type">Prompt</span>(prompt),  
Â  Â  Â  Â  Â  Â  generating: <span class="hljs-type">PhotoDescription</span>.<span class="hljs-keyword">self</span>  
Â  Â  Â  Â  )  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-keyword">return</span> response.content  
Â  Â  }  
}  
</code></pre>
<h4 data-id="heading-35">åœºæ™¯2: æ™ºèƒ½ç›¸å†Œåˆ†ç±»</h4>
<p><strong>åˆ†ç±»æµç¨‹å›¾</strong>:</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD  
Â  Â  Start([å¤šå¼ ç…§ç‰‡]) --&gt; Extract[æå–ç…§ç‰‡ä¿¡æ¯&lt;br/&gt;æ—¶é—´ã€åœ°ç‚¹ã€æè¿°ç­‰]  
Â  Â  Extract --&gt; Build[æ„å»ºPrompt&lt;br/&gt;åŒ…å«æ‰€æœ‰ç…§ç‰‡ä¿¡æ¯]  
Â  Â  Build --&gt; AI[AIåˆ†æ&lt;br/&gt;è¯†åˆ«å…±åŒç‰¹å¾]  
Â  Â  AI --&gt; Classify{åˆ†ç±»æ ‡å‡†}  
Â  Â  Classify --&gt; Time[æ—¶é—´ç›¸å…³æ€§]  
Â  Â  Classify --&gt; Location[åœ°ç‚¹ç›¸å…³æ€§]  
Â  Â  Classify --&gt; Theme[ä¸»é¢˜ç›¸å…³æ€§]  
Â  Â  Classify --&gt; People[äººç‰©ç›¸å…³æ€§]  
Â  Â  Time --&gt; Result[ç”Ÿæˆç›¸å†Œå»ºè®®]  
Â  Â  Location --&gt; Result  
Â  Â  Theme --&gt; Result  
Â  Â  People --&gt; Result  
Â  Â  Result --&gt; End([è¿”å›AlbumSuggestionåˆ—è¡¨])  
Â  Â Â   
Â  Â  style Start fill:#007AFF,color:#fff  
Â  Â  style Extract fill:#5AC8FA,color:#000  
Â  Â  style Build fill:#5AC8FA,color:#000  
Â  Â  style AI fill:#FF9500,color:#fff  
Â  Â  style Result fill:#34C759,color:#fff  
Â  Â  style End fill:#007AFF,color:#fff  
</code></pre>
<p><strong>ä»£ç å®ç°</strong>:</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-meta">@Generable</span>  
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">AlbumSuggestion</span> {  
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"å»ºè®®çš„ç›¸å†Œåç§°"</span>)  
Â  Â  <span class="hljs-keyword">let</span> albumName: <span class="hljs-type">String</span>  
Â  Â Â   
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"ç›¸å†Œæè¿°"</span>)  
Â  Â  <span class="hljs-keyword">let</span> description: <span class="hljs-type">String</span>  
Â  Â Â   
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"åº”è¯¥åŒ…å«çš„ç…§ç‰‡IDåˆ—è¡¨"</span>)  
Â  Â  <span class="hljs-keyword">let</span> photoIds: [<span class="hljs-type">String</span>]  
Â  Â Â   
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"åˆ†ç±»ç†ç”±"</span>)  
Â  Â  <span class="hljs-keyword">let</span> reasoning: <span class="hljs-type">String</span>  
}

<span class="hljs-keyword">func</span> <span class="hljs-title function_">suggestAlbums</span>(<span class="hljs-params">for</span> <span class="hljs-params">photos</span>: [<span class="hljs-type">Photo</span>]) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; [<span class="hljs-type">AlbumSuggestion</span>] {  
Â  Â  <span class="hljs-keyword">let</span> session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>()  
Â  Â Â   
Â  Â  <span class="hljs-keyword">let</span> photoDescriptions <span class="hljs-operator">=</span> photos.map { photo <span class="hljs-keyword">in</span>  
Â  Â  Â  Â  <span class="hljs-string">"ç…§ç‰‡<span class="hljs-subst">\(photo.id)</span>: <span class="hljs-subst">\(photo.description <span class="hljs-operator">??</span> <span class="hljs-string">"æ— æè¿°"</span>)</span> - <span class="hljs-subst">\(photo.date)</span>"</span>  
Â  Â  }.joined(separator: <span class="hljs-string">"<span class="hljs-subst">\n</span>"</span>)  
Â  Â Â   
Â  Â  <span class="hljs-keyword">let</span> prompt <span class="hljs-operator">=</span> <span class="hljs-string">"""  
Â  Â  Â  Â  åˆ†æä»¥ä¸‹ç…§ç‰‡ï¼Œå»ºè®®å¦‚ä½•å°†å®ƒä»¬ç»„ç»‡æˆç›¸å†Œï¼š  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-subst">\(photoDescriptions)</span>  
Â  Â  Â  Â Â   
Â  Â  Â  Â  è¯·è€ƒè™‘ï¼š  
Â  Â  Â  Â  1. æ—¶é—´ç›¸å…³æ€§  
Â  Â  Â  Â  2. åœ°ç‚¹ç›¸å…³æ€§  
Â  Â  Â  Â  3. ä¸»é¢˜ç›¸å…³æ€§  
Â  Â  Â  Â  4. äººç‰©ç›¸å…³æ€§  
Â  Â  """</span>  
Â  Â Â   
Â  Â  <span class="hljs-keyword">let</span> response <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(  
Â  Â  Â  Â  to: <span class="hljs-type">Prompt</span>(prompt),  
Â  Â  Â  Â  generating: [<span class="hljs-type">AlbumSuggestion</span>].<span class="hljs-keyword">self</span>  
Â  Â  )  
Â  Â Â   
Â  Â  <span class="hljs-keyword">return</span> response.content  
}  
</code></pre>
<h3 data-id="heading-36">3.2 æ™ºèƒ½æœç´¢å’Œæ¨è</h3>
<h4 data-id="heading-37">åœºæ™¯3: è‡ªç„¶è¯­è¨€æœç´¢</h4>
<p><strong>æœç´¢å·¥ä½œæµç¨‹</strong>:</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD  
Â  Â  User([ç”¨æˆ·è¾“å…¥:&lt;br/&gt;å»å¹´å¤å¤©åœ¨æµ·è¾¹æ‹çš„ç…§ç‰‡]) --&gt; Parse[AIè§£ææŸ¥è¯¢&lt;br/&gt;æå–å…³é”®è¯]  
Â  Â  Parse --&gt; Extract[æå–ä¿¡æ¯&lt;br/&gt;æ—¶é—´: å»å¹´å¤å¤©&lt;br/&gt;åœ°ç‚¹: æµ·è¾¹&lt;br/&gt;äººç‰©: å¯é€‰]  
Â  Â  Extract --&gt; Tool[è°ƒç”¨PhotoSearchTool&lt;br/&gt;searchPhotos]  
Â  Â  Tool --&gt; Search[æ‰§è¡Œæœç´¢&lt;br/&gt;åŒ¹é…æ¡ä»¶]  
Â  Â  Search --&gt; Filter[ç­›é€‰ç»“æœ&lt;br/&gt;æŒ‰ç›¸ä¼¼åº¦æ’åº]  
Â  Â  Filter --&gt; Result[è¿”å›ç…§ç‰‡åˆ—è¡¨]  
Â  Â  Result --&gt; Display[å±•ç¤ºç»™ç”¨æˆ·]  
Â  Â Â   
Â  Â  style User fill:#007AFF,color:#fff  
Â  Â  style Parse fill:#5AC8FA,color:#000  
Â  Â  style Extract fill:#5AC8FA,color:#000  
Â  Â  style Tool fill:#FF9500,color:#fff  
Â  Â  style Search fill:#FF9500,color:#fff  
Â  Â  style Filter fill:#34C759,color:#fff  
Â  Â  style Result fill:#34C759,color:#fff  
Â  Â  style Display fill:#007AFF,color:#fff  
</code></pre>
<p><strong>Toolå®ç°</strong>:</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">PhotoSearchTool</span>: <span class="hljs-title class_">Tool</span> {  
Â  Â  <span class="hljs-keyword">let</span> name <span class="hljs-operator">=</span> <span class="hljs-string">"searchPhotos"</span>  
Â  Â  <span class="hljs-keyword">let</span> description <span class="hljs-operator">=</span> <span class="hljs-string">"åœ¨ç›¸å†Œä¸­æœç´¢ç…§ç‰‡ï¼Œæ”¯æŒè‡ªç„¶è¯­è¨€æŸ¥è¯¢"</span>  
Â  Â Â   
Â  Â  <span class="hljs-meta">@Generable</span>  
Â  Â  <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Arguments</span> {  
Â  Â  Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"æœç´¢æŸ¥è¯¢ï¼Œå¦‚'å»å¹´å¤å¤©åœ¨æµ·è¾¹çš„ç…§ç‰‡'ã€'åŒ…å«æˆ‘å¦ˆå¦ˆçš„ç…§ç‰‡'"</span>)  
Â  Â  Â  Â  <span class="hljs-keyword">var</span> query: <span class="hljs-type">String</span>  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">call</span>(<span class="hljs-params">arguments</span>: <span class="hljs-type">Arguments</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-keyword">some</span> <span class="hljs-type">PromptRepresentable</span> {  
Â  Â  Â  Â  <span class="hljs-comment">// è§£æè‡ªç„¶è¯­è¨€æŸ¥è¯¢  </span>
Â  Â  Â  Â  <span class="hljs-keyword">let</span> searchCriteria <span class="hljs-operator">=</span> parseNaturalLanguageQuery(arguments.query)  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-comment">// æ‰§è¡Œæœç´¢  </span>
Â  Â  Â  Â  <span class="hljs-keyword">let</span> results <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> performPhotoSearch(criteria: searchCriteria)  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-type">GeneratedContent</span>(properties: [  
Â  Â  Â  Â  Â  Â  <span class="hljs-string">"count"</span>: results.count,  
Â  Â  Â  Â  Â  Â  <span class="hljs-string">"photos"</span>: results.map { <span class="hljs-variable">$0</span>.toDictionary() }  
Â  Â  Â  Â  ])  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">parseNaturalLanguageQuery</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">query</span>: <span class="hljs-type">String</span>) -&gt; <span class="hljs-type">SearchCriteria</span> {  
Â  Â  Â  Â  <span class="hljs-comment">// ä½¿ç”¨Foundation Modelsè§£ææŸ¥è¯¢  </span>
Â  Â  Â  Â  <span class="hljs-comment">// æå–ï¼šæ—¶é—´ã€åœ°ç‚¹ã€äººç‰©ã€å…³é”®è¯ç­‰  </span>
Â  Â  }  
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹  </span>
<span class="hljs-keyword">let</span> session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>(tools: [<span class="hljs-type">PhotoSearchTool</span>()])  
<span class="hljs-keyword">let</span> response <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(  
Â  Â  to: <span class="hljs-string">"å¸®æˆ‘æ‰¾ä¸€ä¸‹å»å¹´å¤å¤©åœ¨æµ·è¾¹æ‹çš„ç…§ç‰‡ï¼Œè¦åŒ…å«æˆ‘å¥³æœ‹å‹çš„"</span>  
)  
</code></pre>
<h4 data-id="heading-38">åœºæ™¯4: æ™ºèƒ½æ¨èç›¸ä¼¼ç…§ç‰‡</h4>
<p><strong>æ¨èç®—æ³•æµç¨‹</strong>:</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD  
Â  Â  Target[ç›®æ ‡ç…§ç‰‡] --&gt; Extract[æå–ç‰¹å¾&lt;br/&gt;æè¿°ã€åœ°ç‚¹ã€æ—¶é—´ã€äººç‰©ã€æ ‡ç­¾]  
Â  Â  Extract --&gt; Compare[ä¸ç›¸å†Œä¸­å…¶ä»–ç…§ç‰‡&lt;br/&gt;è¿›è¡Œç‰¹å¾æ¯”è¾ƒ]  
Â  Â  Compare --&gt; Score[è®¡ç®—ç›¸ä¼¼åº¦è¯„åˆ†&lt;br/&gt;å¤šç»´åº¦åŠ æƒ]  
Â  Â  Score --&gt; Sort[æŒ‰ç›¸ä¼¼åº¦æ’åº]  
Â  Â  Sort --&gt; Filter[ç­›é€‰Top 5]  
Â  Â  Filter --&gt; Result[ç”Ÿæˆæ¨èç»“æœ&lt;br/&gt;åŒ…å«ç›¸ä¼¼åŸå› ]  
Â  Â Â   
Â  Â  style Target fill:#007AFF,color:#fff  
Â  Â  style Extract fill:#5AC8FA,color:#000  
Â  Â  style Compare fill:#FF9500,color:#fff  
Â  Â  style Score fill:#FF9500,color:#fff  
Â  Â  style Sort fill:#34C759,color:#fff  
Â  Â  style Filter fill:#34C759,color:#fff  
Â  Â  style Result fill:#007AFF,color:#fff  
</code></pre>
<p><strong>ä»£ç å®ç°</strong>:</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-meta">@Generable</span>  
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">SimilarPhotoRecommendation</span> {  
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"æ¨èçš„ç…§ç‰‡ID"</span>)  
Â  Â  <span class="hljs-keyword">let</span> photoId: <span class="hljs-type">String</span>  
Â  Â Â   
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"ç›¸ä¼¼åº¦è¯„åˆ†ï¼Œ1-10åˆ†"</span>)  
Â  Â  <span class="hljs-keyword">let</span> similarityScore: <span class="hljs-type">Int</span>  
Â  Â Â   
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"ç›¸ä¼¼çš„åŸå› "</span>)  
Â  Â  <span class="hljs-keyword">let</span> reason: <span class="hljs-type">String</span>  
}

<span class="hljs-keyword">func</span> <span class="hljs-title function_">findSimilarPhotos</span>(<span class="hljs-params">to</span> <span class="hljs-params">targetPhoto</span>: <span class="hljs-type">Photo</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; [<span class="hljs-type">SimilarPhotoRecommendation</span>] {  
Â  Â  <span class="hljs-keyword">let</span> session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>()  
Â  Â Â   
Â  Â  <span class="hljs-keyword">let</span> prompt <span class="hljs-operator">=</span> <span class="hljs-string">"""  
Â  Â  Â  Â  åŸºäºä»¥ä¸‹ç…§ç‰‡ç‰¹å¾ï¼Œæ¨èç›¸ä¼¼çš„ç…§ç‰‡ï¼š  
Â  Â  Â  Â Â   
Â  Â  Â  Â  ç›®æ ‡ç…§ç‰‡:  
Â  Â  Â  Â  - æè¿°: <span class="hljs-subst">\(targetPhoto.description <span class="hljs-operator">??</span> <span class="hljs-string">"æ— "</span>)</span>  
Â  Â  Â  Â  - åœ°ç‚¹: <span class="hljs-subst">\(targetPhoto.location <span class="hljs-operator">??</span> <span class="hljs-string">"æœªçŸ¥"</span>)</span>  
Â  Â  Â  Â  - æ—¶é—´: <span class="hljs-subst">\(targetPhoto.date)</span>  
Â  Â  Â  Â  - äººç‰©: <span class="hljs-subst">\(targetPhoto.people.joined(separator: <span class="hljs-string">", "</span>))</span>  
Â  Â  Â  Â  - æ ‡ç­¾: <span class="hljs-subst">\(targetPhoto.tags.joined(separator: <span class="hljs-string">", "</span>))</span>  
Â  Â  Â  Â Â   
Â  Â  Â  Â  è¯·ä»ç”¨æˆ·ç›¸å†Œä¸­æ¨è5å¼ æœ€ç›¸ä¼¼çš„ç…§ç‰‡ã€‚  
Â  Â  """</span>  
Â  Â Â   
Â  Â  <span class="hljs-keyword">let</span> response <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(  
Â  Â  Â  Â  to: <span class="hljs-type">Prompt</span>(prompt),  
Â  Â  Â  Â  generating: [<span class="hljs-type">SimilarPhotoRecommendation</span>].<span class="hljs-keyword">self</span>  
Â  Â  )  
Â  Â Â   
Â  Â  <span class="hljs-keyword">return</span> response.content  
}  
</code></pre>
<h3 data-id="heading-39">3.3 è§†é¢‘å†…å®¹ç†è§£</h3>
<h4 data-id="heading-40">åœºæ™¯5: è§†é¢‘æ‘˜è¦ç”Ÿæˆ</h4>
<p><strong>è§†é¢‘åˆ†ææµç¨‹</strong>:</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD  
Â  Â  Video[è§†é¢‘æ–‡ä»¶] --&gt; Metadata[æå–å…ƒæ•°æ®&lt;br/&gt;æ—¶é•¿ã€æ—¶é—´ã€åœ°ç‚¹]  
Â  Â  Metadata --&gt; KeyFrames[æå–å…³é”®å¸§&lt;br/&gt;æè¿°å…³é”®ç”»é¢]  
Â  Â  KeyFrames --&gt; Build[æ„å»ºPrompt&lt;br/&gt;åŒ…å«æ‰€æœ‰ä¿¡æ¯]  
Â  Â  Build --&gt; AI[AIåˆ†æ&lt;br/&gt;ç†è§£è§†é¢‘å†…å®¹]  
Â  Â  AI --&gt; Summary[ç”Ÿæˆæ‘˜è¦&lt;br/&gt;ç®€çŸ­æè¿°]  
Â  Â  AI --&gt; Moments[æå–å…³é”®æ—¶åˆ»&lt;br/&gt;æ—¶é—´æˆ³+æè¿°]  
Â  Â  AI --&gt; Theme[è¯†åˆ«ä¸»é¢˜]  
Â  Â  AI --&gt; Thumbnail[å»ºè®®å°é¢æ—¶é—´]  
Â  Â  Summary --&gt; Result[è¿”å›VideoSummary]  
Â  Â  Moments --&gt; Result  
Â  Â  Theme --&gt; Result  
Â  Â  Thumbnail --&gt; Result  
Â  Â Â   
Â  Â  style Video fill:#007AFF,color:#fff  
Â  Â  style Metadata fill:#5AC8FA,color:#000  
Â  Â  style KeyFrames fill:#5AC8FA,color:#000  
Â  Â  style Build fill:#5AC8FA,color:#000  
Â  Â  style AI fill:#FF9500,color:#fff  
Â  Â  style Result fill:#34C759,color:#fff  
</code></pre>
<p><strong>æ•°æ®æ¨¡å‹</strong>:</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-meta">@Generable</span>  
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">VideoSummary</span> {  
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"è§†é¢‘çš„ç®€çŸ­æ‘˜è¦ï¼Œ100å­—ä»¥å†…"</span>)  
Â  Â  <span class="hljs-keyword">let</span> summary: <span class="hljs-type">String</span>  
Â  Â Â   
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"è§†é¢‘çš„å…³é”®æ—¶åˆ»æ—¶é—´æˆ³åˆ—è¡¨"</span>)  
Â  Â  <span class="hljs-keyword">let</span> keyMoments: [<span class="hljs-type">KeyMoment</span>]  
Â  Â Â   
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"è§†é¢‘çš„ä¸»é¢˜"</span>)  
Â  Â  <span class="hljs-keyword">let</span> theme: <span class="hljs-type">String</span>  
Â  Â Â   
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"å»ºè®®çš„å°é¢å¸§æ—¶é—´"</span>)  
Â  Â  <span class="hljs-keyword">let</span> suggestedThumbnailTime: <span class="hljs-type">Double</span>  
}

<span class="hljs-meta">@Generable</span>  
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">KeyMoment</span> {  
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"æ—¶åˆ»çš„æ—¶é—´æˆ³ï¼ˆç§’ï¼‰"</span>)  
Â  Â  <span class="hljs-keyword">let</span> timestamp: <span class="hljs-type">Double</span>  
Â  Â Â   
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"æ—¶åˆ»çš„æè¿°"</span>)  
Â  Â  <span class="hljs-keyword">let</span> description: <span class="hljs-type">String</span>  
Â  Â Â   
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"é‡è¦æ€§è¯„åˆ†ï¼Œ1-10"</span>)  
Â  Â  <span class="hljs-keyword">let</span> importance: <span class="hljs-type">Int</span>  
}  
</code></pre>
<h3 data-id="heading-41">3.4 æ™ºèƒ½ç›¸å†Œç®¡ç†</h3>
<h4 data-id="heading-42">åœºæ™¯6: è‡ªåŠ¨æ•´ç†å’Œæ¸…ç†å»ºè®®</h4>
<p><strong>æ¸…ç†å»ºè®®æµç¨‹</strong>:</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD  
Â  Â  Photos[ç…§ç‰‡åˆ—è¡¨] --&gt; Analyze[åˆ†ææ¯å¼ ç…§ç‰‡&lt;br/&gt;è´¨é‡ã€å¤§å°ã€æ—¥æœŸã€æè¿°]  
Â  Â  Analyze --&gt; Criteria[åº”ç”¨æ¸…ç†æ ‡å‡†&lt;br/&gt;æ¨¡ç³Šã€é‡å¤ã€ä½è´¨é‡ã€ä¸´æ—¶]  
Â  Â  Criteria --&gt; Score[è®¡ç®—æ¸…ç†ä¼˜å…ˆçº§&lt;br/&gt;ç»¼åˆè¯„åˆ†]  
Â  Â  Score --&gt; Sort[æŒ‰ä¼˜å…ˆçº§æ’åº]  
Â  Â  Sort --&gt; Suggest[ç”Ÿæˆæ¸…ç†å»ºè®®&lt;br/&gt;åŒ…å«åŸå› å’Œç©ºé—´]  
Â  Â  Suggest --&gt; Result[è¿”å›CleanupSuggestion]  
Â  Â Â   
Â  Â  style Photos fill:#007AFF,color:#fff  
Â  Â  style Analyze fill:#5AC8FA,color:#000  
Â  Â  style Criteria fill:#FF9500,color:#fff  
Â  Â  style Score fill:#FF9500,color:#fff  
Â  Â  style Sort fill:#34C759,color:#fff  
Â  Â  style Suggest fill:#34C759,color:#fff  
Â  Â  style Result fill:#007AFF,color:#fff  
</code></pre>
<p><strong>ä»£ç å®ç°</strong>:</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-meta">@Generable</span>  
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">CleanupSuggestion</span> {  
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"å»ºè®®åˆ é™¤çš„ç…§ç‰‡IDåˆ—è¡¨"</span>)  
Â  Â  <span class="hljs-keyword">let</span> photosToDelete: [<span class="hljs-type">String</span>]  
Â  Â Â   
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"åˆ é™¤åŸå› "</span>)  
Â  Â  <span class="hljs-keyword">let</span> reason: <span class="hljs-type">String</span>  
Â  Â Â   
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"é¢„è®¡å¯é‡Šæ”¾çš„å­˜å‚¨ç©ºé—´ï¼ˆMBï¼‰"</span>)  
Â  Â  <span class="hljs-keyword">let</span> spaceToFree: <span class="hljs-type">Double</span>  
}

<span class="hljs-keyword">func</span> <span class="hljs-title function_">suggestCleanup</span>(<span class="hljs-params">for</span> <span class="hljs-params">photos</span>: [<span class="hljs-type">Photo</span>]) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">CleanupSuggestion</span> {  
Â  Â  <span class="hljs-keyword">let</span> session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>(  
Â  Â  Â  Â  instructions: <span class="hljs-type">Instructions</span>(  
Â  Â  Â  Â  Â  Â  <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªç›¸å†Œç®¡ç†åŠ©æ‰‹ï¼Œå¸®åŠ©ç”¨æˆ·æ¸…ç†é‡å¤ã€æ¨¡ç³Šæˆ–ä½è´¨é‡çš„ç…§ç‰‡ã€‚"</span>  
Â  Â  Â  Â  )  
Â  Â  )  
Â  Â Â   
Â  Â  <span class="hljs-keyword">let</span> photoList <span class="hljs-operator">=</span> photos.map { photo <span class="hljs-keyword">in</span>  
Â  Â  Â  Â  <span class="hljs-string">"""  
Â  Â  Â  Â  ç…§ç‰‡<span class="hljs-subst">\(photo.id)</span>:  
Â  Â  Â  Â  - å¤§å°: <span class="hljs-subst">\(photo.fileSize)</span>MB  
Â  Â  Â  Â  - è´¨é‡: <span class="hljs-subst">\(photo.qualityScore)</span>/10  
Â  Â  Â  Â  - æ—¥æœŸ: <span class="hljs-subst">\(photo.date)</span>  
Â  Â  Â  Â  - æè¿°: <span class="hljs-subst">\(photo.description <span class="hljs-operator">??</span> <span class="hljs-string">"æ— "</span>)</span>  
Â  Â  Â  Â  """</span>  
Â  Â  }.joined(separator: <span class="hljs-string">"<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>"</span>)  
Â  Â Â   
Â  Â  <span class="hljs-keyword">let</span> prompt <span class="hljs-operator">=</span> <span class="hljs-string">"""  
Â  Â  Â  Â  åˆ†æä»¥ä¸‹ç…§ç‰‡ï¼Œå»ºè®®å“ªäº›å¯ä»¥åˆ é™¤ä»¥é‡Šæ”¾å­˜å‚¨ç©ºé—´ï¼š  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-subst">\(photoList)</span>  
Â  Â  Â  Â Â   
Â  Â  Â  Â  è€ƒè™‘å› ç´ ï¼š  
Â  Â  Â  Â  1. ç…§ç‰‡è´¨é‡ï¼ˆæ¨¡ç³Šã€è¿‡æ›ã€æ¬ æ›ï¼‰  
Â  Â  Â  Â  2. é‡å¤ç…§ç‰‡  
Â  Â  Â  Â  3. æˆªå›¾å’Œä¸´æ—¶ç…§ç‰‡  
Â  Â  Â  Â  4. ç”¨æˆ·å¯èƒ½ä¸éœ€è¦çš„ç…§ç‰‡  
Â  Â  """</span>  
Â  Â Â   
Â  Â  <span class="hljs-keyword">let</span> response <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(  
Â  Â  Â  Â  to: <span class="hljs-type">Prompt</span>(prompt),  
Â  Â  Â  Â  generating: <span class="hljs-type">CleanupSuggestion</span>.<span class="hljs-keyword">self</span>  
Â  Â  )  
Â  Â Â   
Â  Â  <span class="hljs-keyword">return</span> response.content  
}  
</code></pre>
<hr/>
<h2 data-id="heading-43">ğŸ’¡ ç¬¬å››éƒ¨åˆ†ï¼šå®é™…ç¼–ç å®è·µå’Œæœ€ä½³å®è·µÂ </h2>
<h3 data-id="heading-44">4.1 ä»é›¶å¼€å§‹ï¼šå®é™…å¼€å‘æµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD  
Â  Â  Start([å¼€å§‹é›†æˆFoundation Models]) --&gt; Step1[æ­¥éª¤1: æ£€æŸ¥æ¨¡å‹å¯ç”¨æ€§&lt;br/&gt;SystemLanguageModel.default]  
Â  Â  Step1 --&gt; Check{æ¨¡å‹å¯ç”¨?}  
Â  Â  Check --&gt;|å¦| Error[æ˜¾ç¤ºé”™è¯¯æç¤º&lt;br/&gt;æä¾›é™çº§æ–¹æ¡ˆ]  
Â  Â  Check --&gt;|æ˜¯| Step2[æ­¥éª¤2: åˆ›å»ºSessionç®¡ç†å™¨&lt;br/&gt;PhotoAISessionManager]  
Â  Â  Step2 --&gt; Step3[æ­¥éª¤3: é›†æˆåˆ°ViewModel&lt;br/&gt;PhotoAnalysisViewModel]  
Â  Â  Step3 --&gt; Step4[æ­¥éª¤4: åœ¨SwiftUIä¸­ä½¿ç”¨&lt;br/&gt;PhotoAnalysisView]  
Â  Â  Step4 --&gt; Success([å®Œæˆé›†æˆ])  
Â  Â  Error --&gt; End([ç»“æŸ])  
Â  Â  Success --&gt; End  
Â  Â Â   
Â  Â  style Start fill:#007AFF,color:#fff  
Â  Â  style Step1 fill:#5AC8FA,color:#000  
Â  Â  style Step2 fill:#5AC8FA,color:#000  
Â  Â  style Step3 fill:#5AC8FA,color:#000  
Â  Â  style Step4 fill:#5AC8FA,color:#000  
Â  Â  style Check fill:#FF9500,color:#fff  
Â  Â  style Error fill:#FF3B30,color:#fff  
Â  Â  style Success fill:#34C759,color:#fff  
</code></pre>
<h4 data-id="heading-45">æ­¥éª¤1: æ£€æŸ¥æ¨¡å‹å¯ç”¨æ€§</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> FoundationModels

<span class="hljs-keyword">class</span> <span class="hljs-title class_">FoundationModelsManager</span> {  
Â  Â  <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> shared <span class="hljs-operator">=</span> <span class="hljs-type">FoundationModelsManager</span>()  
Â  Â Â   
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">init</span>() {}  
Â  Â Â   
Â  Â  <span class="hljs-comment">/// æ£€æŸ¥Foundation Modelsæ˜¯å¦å¯ç”¨  </span>
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">checkAvailability</span>() -&gt; (available: <span class="hljs-type">Bool</span>, reason: <span class="hljs-type">String</span>?) {  
Â  Â  Â  Â  <span class="hljs-keyword">let</span> model <span class="hljs-operator">=</span> <span class="hljs-type">SystemLanguageModel</span>.default  
Â  Â  Â  Â  <span class="hljs-keyword">switch</span> model.availability {  
Â  Â  Â  Â  <span class="hljs-keyword">case</span> .available:  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span> (<span class="hljs-literal">true</span>, <span class="hljs-literal">nil</span>)  
Â  Â  Â  Â  <span class="hljs-keyword">case</span> .unavailable(<span class="hljs-keyword">let</span> reason):  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span> (<span class="hljs-literal">false</span>, reason.localizedDescription)  
Â  Â  Â  Â  }  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-comment">/// åœ¨åº”ç”¨å¯åŠ¨æ—¶æ£€æŸ¥å¹¶é¢„çƒ­  </span>
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">setup</span>() <span class="hljs-keyword">async</span> {  
Â  Â  Â  Â  <span class="hljs-keyword">let</span> (available, reason) <span class="hljs-operator">=</span> checkAvailability()  
Â  Â  Â  Â  <span class="hljs-keyword">if</span> <span class="hljs-operator">!</span>available {  
Â  Â  Â  Â  Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">"âš ï¸ Foundation Modelsä¸å¯ç”¨: <span class="hljs-subst">\(reason <span class="hljs-operator">??</span> <span class="hljs-string">"æœªçŸ¥åŸå› "</span>)</span>"</span>)  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span>  
Â  Â  Â  Â  }  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-comment">// é¢„çƒ­æ¨¡å‹ï¼ˆå¯é€‰ï¼Œä½†æ¨èï¼‰  </span>
Â  Â  Â  Â  <span class="hljs-keyword">await</span> prewarmModel()  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">prewarmModel</span>() <span class="hljs-keyword">async</span> {  
Â  Â  Â  Â  <span class="hljs-keyword">let</span> session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>()  
Â  Â  Â  Â  <span class="hljs-keyword">do</span> {  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">_</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(to: <span class="hljs-string">"Hello"</span>)  
Â  Â  Â  Â  Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… Foundation Modelsé¢„çƒ­æˆåŠŸ"</span>)  
Â  Â  Â  Â  } <span class="hljs-keyword">catch</span> {  
Â  Â  Â  Â  Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">"âš ï¸ æ¨¡å‹é¢„çƒ­å¤±è´¥: <span class="hljs-subst">\(error)</span>"</span>)  
Â  Â  Â  Â  }  
Â  Â  }  
}

<span class="hljs-comment">// åœ¨Appå¯åŠ¨æ—¶è°ƒç”¨  </span>
<span class="hljs-keyword">@main</span>  
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">MyApp</span>: <span class="hljs-title class_">App</span> {  
Â  Â  <span class="hljs-keyword">init</span>() {  
Â  Â  Â  Â  <span class="hljs-type">Task</span> {  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">await</span> <span class="hljs-type">FoundationModelsManager</span>.shared.setup()  
Â  Â  Â  Â  }  
Â  Â  }  
}  
</code></pre>
<h4 data-id="heading-46">æ­¥éª¤2: åˆ›å»ºå¯å¤ç”¨çš„Sessionç®¡ç†å™¨</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">classDiagram  
Â  Â  class PhotoAISessionManager {  
Â  Â  Â  Â  -LanguageModelSession session  
Â  Â  Â  Â  -[Tool] tools  
Â  Â  Â  Â  +sendMessage(String) String  
Â  Â  Â  Â  +streamMessage(String) AsyncStream  
Â  Â  Â  Â  +generateStructured(T) T  
Â  Â  Â  Â  +reset()  
Â  Â  }  
Â  Â Â   
Â  Â  class LanguageModelSession {  
Â  Â  Â  Â  +respond(Prompt) Response  
Â  Â  Â  Â  +streamResponse(Prompt) AsyncStream  
Â  Â  Â  Â  +transcript Transcript  
Â  Â  }  
Â  Â Â   
Â  Â  class PhotoSearchTool {  
Â  Â  Â  Â  +name: String  
Â  Â  Â  Â  +description: String  
Â  Â  Â  Â  +call(Arguments) Output  
Â  Â  }  
Â  Â Â   
Â  Â  class PhotoAnalysisTool {  
Â  Â  Â  Â  +name: String  
Â  Â  Â  Â  +description: String  
Â  Â  Â  Â  +call(Arguments) Output  
Â  Â  }  
Â  Â Â   
Â  Â  PhotoAISessionManager --&gt; LanguageModelSession  
Â  Â  PhotoAISessionManager --&gt; PhotoSearchTool  
Â  Â  PhotoAISessionManager --&gt; PhotoAnalysisTool  
</code></pre>
<p><strong>å®Œæ•´å®ç°</strong>:</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> FoundationModels  
<span class="hljs-keyword">import</span> Observation

<span class="hljs-meta">@Observable</span>  
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PhotoAISessionManager</span> {  
Â  Â  <span class="hljs-keyword">private(set)</span> <span class="hljs-keyword">var</span> session: <span class="hljs-type">LanguageModelSession</span>  
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> tools: [<span class="hljs-keyword">any</span> <span class="hljs-type">Tool</span>]  
Â  Â Â   
Â  Â  <span class="hljs-keyword">init</span>() {  
Â  Â  Â  Â  <span class="hljs-keyword">self</span>.tools <span class="hljs-operator">=</span> [  
Â  Â  Â  Â  Â  Â  <span class="hljs-type">PhotoSearchTool</span>(),  
Â  Â  Â  Â  Â  Â  <span class="hljs-type">PhotoAnalysisTool</span>(),  
Â  Â  Â  Â  Â  Â  <span class="hljs-type">AlbumCreationTool</span>()  
Â  Â  Â  Â  ]  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-keyword">self</span>.session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>(  
Â  Â  Â  Â  Â  Â  tools: tools,  
Â  Â  Â  Â  Â  Â  instructions: <span class="hljs-type">Instructions</span>(<span class="hljs-string">"""  
Â  Â  Â  Â  Â  Â  Â  Â  ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½ç›¸å†ŒåŠ©æ‰‹ï¼Œå¯ä»¥å¸®åŠ©ç”¨æˆ·ï¼š  
Â  Â  Â  Â  Â  Â  Â  Â  1. æœç´¢ç…§ç‰‡ï¼ˆä½¿ç”¨searchPhotoså·¥å…·ï¼‰  
Â  Â  Â  Â  Â  Â  Â  Â  2. åˆ†æç…§ç‰‡å†…å®¹ï¼ˆä½¿ç”¨analyzePhotoå·¥å…·ï¼‰  
Â  Â  Â  Â  Â  Â  Â  Â  3. åˆ›å»ºç›¸å†Œï¼ˆä½¿ç”¨createAlbumå·¥å…·ï¼‰  
Â  Â  Â  Â  Â  Â  Â  Â Â   
Â  Â  Â  Â  Â  Â  Â  Â  å§‹ç»ˆç”¨å‹å¥½ã€è‡ªç„¶çš„æ–¹å¼ä¸ç”¨æˆ·äº¤æµã€‚  
Â  Â  Â  Â  Â  Â  """</span>)  
Â  Â  Â  Â  )  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">sendMessage</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">message</span>: <span class="hljs-type">String</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">String</span> {  
Â  Â  Â  Â  <span class="hljs-keyword">let</span> response <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(to: <span class="hljs-type">Prompt</span>(message))  
Â  Â  Â  Â  <span class="hljs-keyword">return</span> response.content  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">streamMessage</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">message</span>: <span class="hljs-type">String</span>) -&gt; <span class="hljs-type">AsyncThrowingStream</span>&lt;<span class="hljs-type">String</span>, <span class="hljs-type">Error</span>&gt; {  
Â  Â  Â  Â  <span class="hljs-type">AsyncThrowingStream</span> { continuation <span class="hljs-keyword">in</span>  
Â  Â  Â  Â  Â  Â  <span class="hljs-type">Task</span> {  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">do</span> {  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">let</span> stream <span class="hljs-operator">=</span> session.streamResponse(to: <span class="hljs-type">Prompt</span>(message))  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">for</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> partialText <span class="hljs-keyword">in</span> stream {  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  continuation.yield(partialText)  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  continuation.finish()  
Â  Â  Â  Â  Â  Â  Â  Â  } <span class="hljs-keyword">catch</span> {  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  continuation.finish(throwing: error)  
Â  Â  Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  }  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">generateStructured</span>&lt;<span class="hljs-type">T</span>: <span class="hljs-type">Generable</span>&gt;(  
Â  Â  Â  Â  <span class="hljs-params">prompt</span>: <span class="hljs-type">String</span>,  
Â  Â  Â  Â  <span class="hljs-params">type</span>: <span class="hljs-type">T</span>.<span class="hljs-keyword">Type</span>  
Â  Â  ) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">T</span> {  
Â  Â  Â  Â  <span class="hljs-keyword">let</span> response <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(  
Â  Â  Â  Â  Â  Â  to: <span class="hljs-type">Prompt</span>(prompt),  
Â  Â  Â  Â  Â  Â  generating: type  
Â  Â  Â  Â  )  
Â  Â  Â  Â  <span class="hljs-keyword">return</span> response.content  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">reset</span>() {  
Â  Â  Â  Â  <span class="hljs-keyword">self</span>.session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>(  
Â  Â  Â  Â  Â  Â  tools: tools,  
Â  Â  Â  Â  Â  Â  instructions: <span class="hljs-type">Instructions</span>(<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½ç›¸å†ŒåŠ©æ‰‹"</span>)  
Â  Â  Â  Â  )  
Â  Â  }  
}  
</code></pre>
<h4 data-id="heading-47">æ­¥éª¤3: é›†æˆåˆ°ViewModel</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TB  
Â  Â  subgraph "View Layer"  
Â  Â  Â  Â  View[PhotoAnalysisView&lt;br/&gt;SwiftUI View]  
Â  Â  end  
Â  Â Â   
Â  Â  subgraph "ViewModel Layer"  
Â  Â  Â  Â  ViewModel[PhotoAnalysisViewModel&lt;br/&gt;@Observable]  
Â  Â  Â  Â  SessionManager[PhotoAISessionManager]  
Â  Â  end  
Â  Â Â   
Â  Â  subgraph "Model Layer"  
Â  Â  Â  Â  Model[Photo Model]  
Â  Â  Â  Â  FoundationModels[Foundation Models]  
Â  Â  end  
Â  Â Â   
Â  Â  View --&gt;|@State| ViewModel  
Â  Â  ViewModel --&gt;|è°ƒç”¨| SessionManager  
Â  Â  SessionManager --&gt;|ä½¿ç”¨| FoundationModels  
Â  Â  ViewModel --&gt;|æ“ä½œ| Model  
Â  Â  Model --&gt;|æ›´æ–°| ViewModel  
Â  Â  ViewModel --&gt;|é€šçŸ¥| View  
Â  Â Â   
Â  Â  style View fill:#007AFF,color:#fff  
Â  Â  style ViewModel fill:#5AC8FA,color:#000  
Â  Â  style SessionManager fill:#FF9500,color:#fff  
Â  Â  style Model fill:#34C759,color:#fff  
Â  Â  style FoundationModels fill:#FF3B30,color:#fff  
</code></pre>
<p><strong>ViewModelå®ç°</strong>:</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-meta">@Observable</span>  
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PhotoAnalysisViewModel</span> {  
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> sessionManager <span class="hljs-operator">=</span> <span class="hljs-type">PhotoAISessionManager</span>()  
Â  Â Â   
Â  Â  <span class="hljs-keyword">var</span> isLoading <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>  
Â  Â  <span class="hljs-keyword">var</span> errorMessage: <span class="hljs-type">String</span>?  
Â  Â  <span class="hljs-keyword">var</span> analysisResult: <span class="hljs-type">PhotoDescription</span>?  
Â  Â  <span class="hljs-keyword">var</span> streamingText <span class="hljs-operator">=</span> <span class="hljs-string">""</span>  
Â  Â Â   
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">analyzePhoto</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">photo</span>: <span class="hljs-type">Photo</span>) <span class="hljs-keyword">async</span> {  
Â  Â  Â  Â  isLoading <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>  
Â  Â  Â  Â  errorMessage <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-keyword">do</span> {  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">let</span> metadata <span class="hljs-operator">=</span> photo.metadata  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">let</span> prompt <span class="hljs-operator">=</span> <span class="hljs-string">"""  
Â  Â  Â  Â  Â  Â  Â  Â  åˆ†æè¿™å¼ ç…§ç‰‡ï¼š  
Â  Â  Â  Â  Â  Â  Â  Â  - æ—¶é—´: <span class="hljs-subst">\(metadata.date)</span>  
Â  Â  Â  Â  Â  Â  Â  Â  - åœ°ç‚¹: <span class="hljs-subst">\(metadata.location <span class="hljs-operator">??</span> <span class="hljs-string">"æœªçŸ¥"</span>)</span>  
Â  Â  Â  Â  Â  Â  Â  Â  - EXIF: <span class="hljs-subst">\(metadata.exifInfo)</span>  
Â  Â  Â  Â  Â  Â  Â  Â Â   
Â  Â  Â  Â  Â  Â  Â  Â  è¯·ç”Ÿæˆè¯¦ç»†çš„ç…§ç‰‡æè¿°å’Œåˆ†ç±»å»ºè®®ã€‚  
Â  Â  Â  Â  Â  Â  """</span>  
Â  Â  Â  Â  Â  Â Â   
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">let</span> result <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> sessionManager.generateStructured(  
Â  Â  Â  Â  Â  Â  Â  Â  prompt: prompt,  
Â  Â  Â  Â  Â  Â  Â  Â  type: <span class="hljs-type">PhotoDescription</span>.<span class="hljs-keyword">self</span>  
Â  Â  Â  Â  Â  Â  )  
Â  Â  Â  Â  Â  Â Â   
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">await</span> <span class="hljs-type">MainActor</span>.run {  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">self</span>.analysisResult <span class="hljs-operator">=</span> result  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">self</span>.isLoading <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>  
Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  } <span class="hljs-keyword">catch</span> {  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">await</span> <span class="hljs-type">MainActor</span>.run {  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">self</span>.errorMessage <span class="hljs-operator">=</span> handleError(error)  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">self</span>.isLoading <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>  
Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  }  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">analyzePhotoWithStreaming</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">photo</span>: <span class="hljs-type">Photo</span>) <span class="hljs-keyword">async</span> {  
Â  Â  Â  Â  isLoading <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>  
Â  Â  Â  Â  streamingText <span class="hljs-operator">=</span> <span class="hljs-string">""</span>  
Â  Â  Â  Â  errorMessage <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-keyword">do</span> {  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">let</span> metadata <span class="hljs-operator">=</span> photo.metadata  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">let</span> prompt <span class="hljs-operator">=</span> <span class="hljs-string">"""  
Â  Â  Â  Â  Â  Â  Â  Â  åˆ†æè¿™å¼ ç…§ç‰‡ï¼š  
Â  Â  Â  Â  Â  Â  Â  Â  - æ—¶é—´: <span class="hljs-subst">\(metadata.date)</span>  
Â  Â  Â  Â  Â  Â  Â  Â  - åœ°ç‚¹: <span class="hljs-subst">\(metadata.location <span class="hljs-operator">??</span> <span class="hljs-string">"æœªçŸ¥"</span>)</span>  
Â  Â  Â  Â  Â  Â  Â  Â Â   
Â  Â  Â  Â  Â  Â  Â  Â  è¯·è¯¦ç»†åˆ†æç…§ç‰‡å†…å®¹ã€‚  
Â  Â  Â  Â  Â  Â  """</span>  
Â  Â  Â  Â  Â  Â Â   
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">for</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> partialText <span class="hljs-keyword">in</span> sessionManager.streamMessage(prompt) {  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">await</span> <span class="hljs-type">MainActor</span>.run {  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">self</span>.streamingText <span class="hljs-operator">+=</span> partialText  
Â  Â  Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  Â  Â Â   
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">await</span> <span class="hljs-type">MainActor</span>.run {  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">self</span>.isLoading <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>  
Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  } <span class="hljs-keyword">catch</span> {  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">await</span> <span class="hljs-type">MainActor</span>.run {  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">self</span>.errorMessage <span class="hljs-operator">=</span> handleError(error)  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">self</span>.isLoading <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>  
Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  }  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">handleError</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">error</span>: <span class="hljs-type">Error</span>) -&gt; <span class="hljs-type">String</span> {  
Â  Â  Â  Â  <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> generationError <span class="hljs-operator">=</span> error <span class="hljs-keyword">as?</span> <span class="hljs-type">LanguageModelSession</span>.<span class="hljs-type">GenerationError</span> {  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">switch</span> generationError {  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">case</span> .exceededContextWindowSize:  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-string">"å¯¹è¯å†…å®¹è¿‡é•¿ï¼Œè¯·æ¸…ç†å†å²è®°å½•"</span>  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">default</span>:  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-string">"ç”Ÿæˆå¤±è´¥: <span class="hljs-subst">\(generationError.localizedDescription)</span>"</span>  
Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  }  
Â  Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-string">"é”™è¯¯: <span class="hljs-subst">\(error.localizedDescription)</span>"</span>  
Â  Â  }  
}  
</code></pre>
<h4 data-id="heading-48">æ­¥éª¤4: åœ¨SwiftUIä¸­ä½¿ç”¨</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> SwiftUI

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">PhotoAnalysisView</span>: <span class="hljs-title class_">View</span> {  
Â  Â  <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> viewModel <span class="hljs-operator">=</span> <span class="hljs-type">PhotoAnalysisViewModel</span>()  
Â  Â  <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> selectedPhoto: <span class="hljs-type">Photo</span>?  
Â  Â Â   
Â  Â  <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {  
Â  Â  Â  Â  <span class="hljs-type">VStack</span> {  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">if</span> viewModel.isLoading {  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-type">ProgressView</span>(<span class="hljs-string">"åˆ†æä¸­..."</span>)  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .padding()  
Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  Â  Â Â   
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> error <span class="hljs-operator">=</span> viewModel.errorMessage {  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-type">Text</span>(<span class="hljs-string">"é”™è¯¯: <span class="hljs-subst">\(error)</span>"</span>)  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .foregroundColor(.red)  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .padding()  
Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  Â  Â Â   
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> result <span class="hljs-operator">=</span> viewModel.analysisResult {  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-type">VStack</span>(alignment: .leading, spacing: <span class="hljs-number">12</span>) {  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-type">Text</span>(<span class="hljs-string">"ä¸»é¢˜: <span class="hljs-subst">\(result.subject)</span>"</span>)  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-type">Text</span>(<span class="hljs-string">"è´¨é‡è¯„åˆ†: <span class="hljs-subst">\(result.qualityScore)</span>/10"</span>)  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-type">Text</span>(<span class="hljs-string">"æ ‡ç­¾: <span class="hljs-subst">\(result.tags.joined(separator: <span class="hljs-string">", "</span>))</span>"</span>)  
Â  Â  Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  Â  Â  Â  Â  .padding()  
Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  Â  Â Â   
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">if</span> <span class="hljs-operator">!</span>viewModel.streamingText.isEmpty {  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-type">ScrollView</span> {  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-type">Text</span>(viewModel.streamingText)  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .padding()  
Â  Â  Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  Â  Â Â   
Â  Â  Â  Â  Â  Â  <span class="hljs-type">Button</span>(<span class="hljs-string">"åˆ†æç…§ç‰‡"</span>) {  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> photo <span class="hljs-operator">=</span> selectedPhoto {  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-type">Task</span> {  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">await</span> viewModel.analyzePhoto(photo)  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  Â  Â  .disabled(viewModel.isLoading <span class="hljs-operator">||</span> selectedPhoto <span class="hljs-operator">==</span> <span class="hljs-literal">nil</span>)  
Â  Â  Â  Â  }  
Â  Â  }  
}  
</code></pre>
<h3 data-id="heading-49">4.2 æ€§èƒ½ä¼˜åŒ–å®è·µ</h3>
<h4 data-id="heading-50">å†…å­˜æ¶ˆè€—ä¸æ€§èƒ½ç‰¹å¾</h4>
<p><strong>å®é™…å†…å­˜å ç”¨</strong>:</p>
<p>æ ¹æ®å®é™…æµ‹è¯•ï¼ŒFoundation Models åœ¨è¿è¡Œæ—¶çš„å†…å­˜æ¶ˆè€—åŒ…æ‹¬ï¼š</p>






























<table><thead><tr><th>ç»„ä»¶</th><th>å†…å­˜å ç”¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ¨¡å‹æƒé‡</td><td>~750MB</td><td>3B å‚æ•° Ã— 2-bit é‡åŒ–</td></tr><tr><td>KV Cache</td><td>~300-600MB</td><td>8-bit é‡åŒ–ï¼Œ37.5% å‡å°‘ä¼˜åŒ–</td></tr><tr><td>æ¡†æ¶å¼€é”€</td><td>~100-200MB</td><td>ç³»ç»Ÿæ¡†æ¶å’Œè¿è¡Œæ—¶å¼€é”€</td></tr><tr><td><strong>æ€»è®¡</strong></td><td><strong>~1.0-1.5GB</strong></td><td>å®é™…è¿è¡Œæ—¶å†…å­˜å ç”¨</td></tr></tbody></table>
<p><strong>å†…å­˜ç®¡ç†å»ºè®®</strong>:</p>
<ul>
<li>åœ¨å†…å­˜å—é™çš„è®¾å¤‡ä¸Šï¼Œéœ€è¦ä»”ç»†è€ƒè™‘ä½•æ—¶åŠ è½½å’Œé‡Šæ”¾ session</li>
<li>å¥½æ¶ˆæ¯æ˜¯è‹¹æœåšäº†å¾ˆå¤šä¼˜åŒ–ï¼Œæ¯”å¦‚ KV cache çš„ 8-bit é‡åŒ–å’Œ 37.5% çš„ block sharing å‡å°‘</li>
<li>base æ¨¡å‹æœ¬èº«ä¼¼ä¹åœ¨ä¸ç”¨æ—¶ä¹Ÿä¼šè‡ªåŠ¨ unload</li>
</ul>
<p><strong>æ€§èƒ½ç‰¹å¾</strong>:</p>























<table><thead><tr><th>åœºæ™¯</th><th>iPhone</th><th>M2 Pro</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å• session</td><td>10-30 tokens/s</td><td>~30 tokens/s</td><td>æ­£å¸¸æ€§èƒ½</td></tr><tr><td>3 ä¸ªå¹¶å‘ session</td><td><strong>æ¯ä¸ªçº¦ 1 token/s</strong></td><td><strong>æ¯ä¸ªçº¦ 1 token/s</strong></td><td>âš ï¸ ä¸¥é‡æ€§èƒ½ä¸‹é™</td></tr></tbody></table>
<p><strong>âš ï¸ å¹¶å‘æ€§èƒ½è­¦å‘Š</strong>: å¤š session å¹¶å‘ä¼šä¸¥é‡å½±å“æ€§èƒ½ï¼Œä» 10-30 tokens/s éª¤é™è‡³çº¦ 1 token/sã€‚è‹¹æœåªè€ƒè™‘äº†å• session çš„ä½¿ç”¨åœºæ™¯ã€‚</p>
<p><strong>æ¨èåšæ³•</strong>: å…¨å±€ç®¡ç†<strong>ä¸€ä¸ª session</strong>ï¼Œä½¿ç”¨é˜Ÿåˆ—ä¸²è¡Œè®¿é—®ï¼Œé¿å…ä»»ä½•å¹¶å‘ sessionã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// âœ… æ¨èï¼šä½¿ç”¨é˜Ÿåˆ—ç®¡ç†è¯·æ±‚  </span>
<span class="hljs-keyword">actor</span> <span class="hljs-title class_">SessionManager</span> {  
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>()  
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> requestQueue: [<span class="hljs-type">AIRequest</span>] <span class="hljs-operator">=</span> []  
Â  Â Â   
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">processRequest</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">request</span>: <span class="hljs-type">AIRequest</span>) <span class="hljs-keyword">async</span> -&gt; <span class="hljs-type">AIResponse</span> {  
Â  Â  Â  Â  <span class="hljs-comment">// ä¸²è¡Œå¤„ç†ï¼Œä¸è¦å¹¶å‘  </span>
Â  Â  Â  Â  <span class="hljs-comment">// ä½¿ç”¨é˜Ÿåˆ—ç¡®ä¿åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªè¯·æ±‚åœ¨ä½¿ç”¨ session  </span>
Â  Â  }  
}  
</code></pre>
<h4 data-id="heading-51">ä¸Šä¸‹æ–‡çª—å£ç®¡ç†</h4>
<p><strong>âš ï¸ é‡è¦é™åˆ¶</strong>: è™½ç„¶è‹¹æœæåˆ°æ¨¡å‹è®­ç»ƒæ—¶æ”¯æŒæœ€é«˜ 65K tokens çš„ä¸Šä¸‹æ–‡ï¼Œä½†<strong>å®é™…éƒ¨ç½²åˆ°ç”¨æˆ·è®¾å¤‡ä¸Šçš„ç¡¬é™åˆ¶æ˜¯ 4096 tokens</strong>ã€‚è¿™å¯¹äºä¸€èˆ¬çš„å¯¹è¯åœºæ™¯ï¼Œå¤§çº¦èƒ½æ”¯æŒ 10-20 è½®å¯¹è¯ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD  
Â  Â  Start([å¼€å§‹å¯¹è¯]) --&gt; Check{Tokenä½¿ç”¨é‡&lt;br/&gt;æ£€æŸ¥}  
Â  Â  Check --&gt;|å°äº80%| Normal[æ­£å¸¸ä½¿ç”¨]  
Â  Â  Check --&gt;|è¾¾åˆ°80%| Clean[æ¸…ç†æ—§å¯¹è¯]  
Â  Â  Normal --&gt; Continue[ç»§ç»­å¯¹è¯]  
Â  Â  Clean --&gt; Keep[ä¿ç•™æœ€è¿‘å¯¹è¯&lt;br/&gt;çº¦3000 tokens]  
Â  Â  Keep --&gt; Continue  
Â  Â  Continue --&gt; Check  
Â  Â Â   
Â  Â  style Start fill:#007AFF,color:#fff  
Â  Â  style Check fill:#FF9500,color:#fff  
Â  Â  style Normal fill:#34C759,color:#fff  
Â  Â  style Clean fill:#FF3B30,color:#fff  
Â  Â  style Keep fill:#5AC8FA,color:#000  
</code></pre>
<p><strong>å®ç°ä»£ç </strong>:</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">OptimizedChatViewModel</span>: <span class="hljs-title class_">ObservableObject</span> {  
Â  Â  <span class="hljs-comment">// âš ï¸ å®é™…é™åˆ¶æ˜¯ 4096 tokensï¼Œä¸æ˜¯ 65K  </span>
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> maxTokens <span class="hljs-operator">=</span> <span class="hljs-number">4096</span>  
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> windowThreshold <span class="hljs-operator">=</span> <span class="hljs-number">0.8</span> <span class="hljs-comment">// 80%æ—¶å¼€å§‹æ¸…ç†  </span>
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> targetWindowSize <span class="hljs-operator">=</span> <span class="hljs-number">3000</span> <span class="hljs-comment">// ç›®æ ‡çª—å£å¤§å°ï¼ˆä¿ç•™ä¸€äº›ä½™é‡ï¼‰  </span>
Â  Â Â   
Â  Â  <span class="hljs-keyword">private(set)</span> <span class="hljs-keyword">var</span> session: <span class="hljs-type">LanguageModelSession</span>  
Â  Â Â   
Â  Â  <span class="hljs-keyword">init</span>() {  
Â  Â  Â  Â  <span class="hljs-keyword">self</span>.session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>()  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">shouldApplySlidingWindow</span>() -&gt; <span class="hljs-type">Bool</span> {  
Â  Â  Â  Â  <span class="hljs-keyword">let</span> currentTokens <span class="hljs-operator">=</span> session.transcript.estimatedTokenCount  
Â  Â  Â  Â  <span class="hljs-keyword">let</span> ratio <span class="hljs-operator">=</span> <span class="hljs-type">Double</span>(currentTokens) <span class="hljs-operator">/</span> <span class="hljs-type">Double</span>(maxTokens)  
Â  Â  Â  Â  <span class="hljs-keyword">return</span> ratio <span class="hljs-operator">&gt;=</span> windowThreshold  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-meta">@MainActor</span>  
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">applySlidingWindow</span>() <span class="hljs-keyword">async</span> {  
Â  Â  Â  Â  <span class="hljs-keyword">let</span> recentEntries <span class="hljs-operator">=</span> session.transcript.entriesWithinTokenBudget(  
Â  Â  Â  Â  Â  Â  targetWindowSize: targetWindowSize  
Â  Â  Â  Â  )  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-keyword">var</span> finalEntries <span class="hljs-operator">=</span> recentEntries  
Â  Â  Â  Â  <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> instructions <span class="hljs-operator">=</span> session.transcript.first(where: {  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">if</span> <span class="hljs-keyword">case</span> .instructions <span class="hljs-operator">=</span> <span class="hljs-variable">$0</span> { <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span> }  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>  
Â  Â  Â  Â  }) {  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">if</span> <span class="hljs-operator">!</span>finalEntries.contains(where: { <span class="hljs-variable">$0</span>.id <span class="hljs-operator">==</span> instructions.id }) {  
Â  Â  Â  Â  Â  Â  Â  Â  finalEntries.insert(instructions, at: <span class="hljs-number">0</span>)  
Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  }  
Â  Â  Â  Â Â   
Â  Â  Â  Â  session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>(  
Â  Â  Â  Â  Â  Â  transcript: <span class="hljs-type">Transcript</span>(entries: finalEntries)  
Â  Â  Â  Â  )  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-meta">@MainActor</span>  
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">sendMessage</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">message</span>: <span class="hljs-type">String</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> {  
Â  Â  Â  Â  <span class="hljs-keyword">if</span> shouldApplySlidingWindow() {  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">await</span> applySlidingWindow()  
Â  Â  Â  Â  }  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-keyword">let</span> stream <span class="hljs-operator">=</span> session.streamResponse(to: <span class="hljs-type">Prompt</span>(message))  
Â  Â  Â  Â  <span class="hljs-keyword">for</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> <span class="hljs-keyword">_</span> <span class="hljs-keyword">in</span> stream {  
Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// æµå¼å“åº”è‡ªåŠ¨æ›´æ–°transcript  </span>
Â  Â  Â  Â  }  
Â  Â  }  
}  
</code></pre>
<h4 data-id="heading-52">é¢„åŠ è½½å’Œé¢„çƒ­ï¼ˆPrewarmingï¼‰</h4>
<p><strong>é¢„çƒ­ï¼ˆPrewarmingï¼‰</strong> æ˜¯åœ¨ç”¨æˆ·å‘å‡ºè¯·æ±‚ä¹‹å‰ï¼Œæå‰åŠ è½½å’Œåˆå§‹åŒ–è®¾å¤‡ä¸Šçš„è¯­è¨€æ¨¡å‹ï¼Œä»è€Œå‡å°‘åˆå§‹å»¶è¿Ÿçš„å…³é”®ä¼˜åŒ–æŠ€æœ¯ã€‚</p>
<h5 data-id="heading-53">é¢„çƒ­çš„å·¥ä½œåŸç†</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD  
Â  Â  subgraph NoPrewarm [æ— é¢„çƒ­åœºæ™¯]  
Â  Â  Â  Â  User1[ç”¨æˆ·è¯·æ±‚] --&gt; Load1[åŠ è½½æ¨¡å‹ è€—æ—¶ 2-3ç§’]  
Â  Â  Â  Â  Load1 --&gt; Init1[åˆå§‹åŒ–æ¨¡å‹ è€—æ—¶ 0.5-1ç§’]  
Â  Â  Â  Â  Init1 --&gt; Inference1[æ‰§è¡Œæ¨ç† è€—æ—¶ 1-2ç§’]  
Â  Â  Â  Â  Inference1 --&gt; Response1[è¿”å›ç»“æœ æ€»è€—æ—¶ 3.5-6ç§’]  
Â  Â  end  
Â  Â Â   
Â  Â  subgraph WithPrewarm [é¢„çƒ­åœºæ™¯]  
Â  Â  Â  Â  Trigger[è§¦å‘é¢„çƒ­ ç”¨æˆ·æ‰“å¼€é¡µé¢æˆ–ç‚¹å‡»è¾“å…¥æ¡†] --&gt; Load2[åå°åŠ è½½æ¨¡å‹ ç”¨æˆ·æ— æ„ŸçŸ¥]  
Â  Â  Â  Â  Load2 --&gt; Init2[åå°åˆå§‹åŒ–æ¨¡å‹ ç”¨æˆ·æ— æ„ŸçŸ¥]  
Â  Â  Â  Â  Init2 --&gt; Ready[æ¨¡å‹å‡†å¤‡å°±ç»ª ä¿æŒåœ¨å†…å­˜ä¸­]  
Â  Â  Â  Â  User2[ç”¨æˆ·è¯·æ±‚] --&gt; Inference2[ç«‹å³æ‰§è¡Œæ¨ç† è€—æ—¶ 1-2ç§’]  
Â  Â  Â  Â  Inference2 --&gt; Response2[è¿”å›ç»“æœ æ€»è€—æ—¶ 1-2ç§’]  
Â  Â  end  
Â  Â Â   
Â  Â  style User1 fill:#FF3B30,color:#fff  
Â  Â  style Load1 fill:#FF3B30,color:#fff  
Â  Â  style Response1 fill:#FF3B30,color:#fff  
Â  Â  style Trigger fill:#5AC8FA,color:#000  
Â  Â  style Ready fill:#34C759,color:#fff  
Â  Â  style User2 fill:#007AFF,color:#fff  
Â  Â  style Response2 fill:#34C759,color:#fff  
</code></pre>
<p><strong>é¢„çƒ­çš„æ ¸å¿ƒä»·å€¼</strong>:</p>
<ul>
<li>âœ… <strong>å‡å°‘é¦–æ¬¡è°ƒç”¨å»¶è¿Ÿ</strong>: ä» 3-6 ç§’é™ä½åˆ° 1-2 ç§’</li>
<li>âœ… <strong>æå‡ç”¨æˆ·ä½“éªŒ</strong>: ç”¨æˆ·å‡ ä¹æ— æ„ŸçŸ¥çš„ç­‰å¾…æ—¶é—´</li>
<li>âœ… <strong>ä¼˜åŒ–èµ„æºåˆ©ç”¨</strong>: åœ¨ç”¨æˆ·ç©ºé—²æ—¶æå‰å‡†å¤‡ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹</li>
</ul>
<h5 data-id="heading-54">é¢„çƒ­çš„æœ€ä½³æ—¶æœº</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD  
Â  Â  AppStart[åº”ç”¨å¯åŠ¨] --&gt; Check1{æ˜¯å¦æ”¯æŒ Foundation Models?}  
Â  Â  Check1 --&gt;|æ˜¯| Prewarm1[åå°é¢„çƒ­ ä½ä¼˜å…ˆçº§]  
Â  Â  Check1 --&gt;|å¦| Skip1[è·³è¿‡é¢„çƒ­]  
Â  Â Â   
Â  Â  UserEnter[ç”¨æˆ·è¿›å…¥AIåŠŸèƒ½é¡µé¢] --&gt; Prewarm2[ç«‹å³é¢„çƒ­ ä¸­ä¼˜å…ˆçº§]  
Â  Â Â   
Â  Â  UserClick[ç”¨æˆ·ç‚¹å‡»è¾“å…¥æ¡†] --&gt; Prewarm3[å¿«é€Ÿé¢„çƒ­ é«˜ä¼˜å…ˆçº§]  
Â  Â Â   
Â  Â  Prewarm1 --&gt; Ready[æ¨¡å‹å‡†å¤‡å°±ç»ª]  
Â  Â  Prewarm2 --&gt; Ready  
Â  Â  Prewarm3 --&gt; Ready  
Â  Â Â   
Â  Â  Ready --&gt; UserRequest[ç”¨æˆ·å‘èµ·è¯·æ±‚]  
Â  Â  UserRequest --&gt; FastResponse[å¿«é€Ÿå“åº”]  
Â  Â Â   
Â  Â  style AppStart fill:#007AFF,color:#fff  
Â  Â  style UserEnter fill:#5AC8FA,color:#000  
Â  Â  style UserClick fill:#FF9500,color:#fff  
Â  Â  style Prewarm1 fill:#34C759,color:#fff  
Â  Â  style Prewarm2 fill:#34C759,color:#fff  
Â  Â  style Prewarm3 fill:#34C759,color:#fff  
Â  Â  style Ready fill:#AF52DE,color:#fff  
Â  Â  style FastResponse fill:#34C759,color:#fff  
</code></pre>
<p><strong>é¢„çƒ­æ—¶æœºä¼˜å…ˆçº§</strong>:</p>
<ol>
<li>
<p><strong>åº”ç”¨å¯åŠ¨æ—¶</strong>ï¼ˆä½ä¼˜å…ˆçº§ï¼‰<br/>
- ä¼˜ç‚¹ï¼šæœ€æ—©å‡†å¤‡ï¼Œç”¨æˆ·é¦–æ¬¡ä½¿ç”¨å³å¯å¿«é€Ÿå“åº”<br/>
- ç¼ºç‚¹ï¼šå¯èƒ½å½±å“åº”ç”¨å¯åŠ¨é€Ÿåº¦<br/>
- å»ºè®®ï¼šåœ¨åå°ä½ä¼˜å…ˆçº§çº¿ç¨‹é¢„çƒ­ï¼Œä¸å½±å“å¯åŠ¨</p>
</li>
<li>
<p><strong>ç”¨æˆ·è¿›å…¥AIåŠŸèƒ½é¡µé¢æ—¶</strong>ï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰<br/>
- ä¼˜ç‚¹ï¼šç”¨æˆ·æ˜ç¡®æ„å›¾ï¼Œé¢„çƒ­ä»·å€¼é«˜<br/>
- ç¼ºç‚¹ï¼šå¦‚æœç”¨æˆ·ä¸å®é™…ä½¿ç”¨ï¼Œæµªè´¹èµ„æº<br/>
- å»ºè®®ï¼šåœ¨é¡µé¢å‡ºç°æ—¶ç«‹å³é¢„çƒ­</p>
</li>
<li>
<p><strong>ç”¨æˆ·ç‚¹å‡»è¾“å…¥æ¡†æ—¶</strong>ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰<br/>
- ä¼˜ç‚¹ï¼šç”¨æˆ·å³å°†ä½¿ç”¨ï¼Œé¢„çƒ­æœ€åŠæ—¶<br/>
- ç¼ºç‚¹ï¼šå¯èƒ½æ¥ä¸åŠå®Œå…¨é¢„çƒ­<br/>
- å»ºè®®ï¼šå¿«é€Ÿé¢„çƒ­ï¼Œè‡³å°‘å®ŒæˆåŸºç¡€åˆå§‹åŒ–</p>
</li>
</ol>
<h5 data-id="heading-55">åŸºç¡€é¢„çƒ­å®ç°</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ModelPrewarmer</span> {  
Â  Â  <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> shared <span class="hljs-operator">=</span> <span class="hljs-type">ModelPrewarmer</span>()  
Â  Â Â   
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isPrewarmed <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>  
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> prewarmingTask: <span class="hljs-type">Task</span>&lt;<span class="hljs-type">Void</span>, <span class="hljs-type">Never</span>&gt;?  
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> prewarmQueue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(label: <span class="hljs-string">"com.app.prewarm"</span>, qos: .utility)  
Â  Â Â   
Â  Â  <span class="hljs-comment">/// é¢„çƒ­æ¨¡å‹ï¼ˆåŸºç¡€ç‰ˆæœ¬ï¼‰  </span>
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">prewarm</span>() {  
Â  Â  Â  Â  <span class="hljs-keyword">guard</span> <span class="hljs-operator">!</span>isPrewarmed <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }  
Â  Â  Â  Â Â   
Â  Â  Â  Â  prewarmQueue.async {  
Â  Â  Â  Â  Â  Â  <span class="hljs-type">Task</span> {  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">do</span> {  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">let</span> session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>()  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// å‘é€ä¸€ä¸ªç®€å•çš„è¯·æ±‚æ¥é¢„çƒ­æ¨¡å‹  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">_</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(to: <span class="hljs-string">"Hello"</span>)  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">await</span> <span class="hljs-type">MainActor</span>.run {  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">self</span>.isPrewarmed <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… æ¨¡å‹é¢„çƒ­æˆåŠŸ"</span>)  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  Â  Â  Â  Â  } <span class="hljs-keyword">catch</span> {  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">await</span> <span class="hljs-type">MainActor</span>.run {  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">"âš ï¸ æ¨¡å‹é¢„çƒ­å¤±è´¥: <span class="hljs-subst">\(error)</span>"</span>)  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  }  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-comment">/// æ£€æŸ¥é¢„çƒ­çŠ¶æ€  </span>
Â  Â  <span class="hljs-keyword">var</span> isReady: <span class="hljs-type">Bool</span> {  
Â  Â  Â  Â  <span class="hljs-keyword">return</span> isPrewarmed  
Â  Â  }  
}  
</code></pre>
<h5 data-id="heading-56">æ™ºèƒ½é¢„çƒ­å®ç°ï¼ˆå¤šæ—¶æœºæ”¯æŒï¼‰</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">PrewarmPriority</span> {  
Â  Â  <span class="hljs-keyword">case</span> low Â  Â  Â <span class="hljs-comment">// åº”ç”¨å¯åŠ¨æ—¶  </span>
Â  Â  <span class="hljs-keyword">case</span> medium Â  <span class="hljs-comment">// è¿›å…¥åŠŸèƒ½é¡µé¢æ—¶  </span>
Â  Â  <span class="hljs-keyword">case</span> high Â  Â  <span class="hljs-comment">// ç”¨æˆ·ç‚¹å‡»è¾“å…¥æ¡†æ—¶  </span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SmartModelPrewarmer</span> {  
Â  Â  <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> shared <span class="hljs-operator">=</span> <span class="hljs-type">SmartModelPrewarmer</span>()  
Â  Â Â   
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isPrewarmed <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>  
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> prewarmingTask: <span class="hljs-type">Task</span>&lt;<span class="hljs-type">Void</span>, <span class="hljs-type">Never</span>&gt;?  
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> prewarmStartTime: <span class="hljs-type">Date</span>?  
Â  Â Â   
Â  Â  <span class="hljs-comment">/// æ™ºèƒ½é¢„çƒ­ï¼šæ ¹æ®ä¼˜å…ˆçº§å’Œæ—¶æœºå†³å®šæ˜¯å¦é¢„çƒ­  </span>
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">prewarm</span>(<span class="hljs-params">priority</span>: <span class="hljs-type">PrewarmPriority</span> <span class="hljs-operator">=</span> .medium) {  
Â  Â  Â  Â  <span class="hljs-comment">// å¦‚æœå·²ç»é¢„çƒ­ï¼Œç›´æ¥è¿”å›  </span>
Â  Â  Â  Â  <span class="hljs-keyword">if</span> isPrewarmed {  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span>  
Â  Â  Â  Â  }  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-comment">// å¦‚æœæ­£åœ¨é¢„çƒ­ï¼Œæ£€æŸ¥ä¼˜å…ˆçº§  </span>
Â  Â  Â  Â  <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> task <span class="hljs-operator">=</span> prewarmingTask, <span class="hljs-operator">!</span>task.isCancelled {  
Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// é«˜ä¼˜å…ˆçº§å¯ä»¥å–æ¶ˆä½ä¼˜å…ˆçº§é¢„çƒ­ï¼Œé‡æ–°å¼€å§‹  </span>
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">if</span> priority <span class="hljs-operator">==</span> .high {  
Â  Â  Â  Â  Â  Â  Â  Â  task.cancel()  
Â  Â  Â  Â  Â  Â  } <span class="hljs-keyword">else</span> {  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span>  
Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  }  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-comment">// æ ¹æ®ä¼˜å…ˆçº§è®¾ç½® QoS  </span>
Â  Â  Â  Â  <span class="hljs-keyword">let</span> qos: <span class="hljs-type">TaskPriority</span> <span class="hljs-operator">=</span> priority <span class="hljs-operator">==</span> .high <span class="hljs-operator">?</span> .userInitiated : .utility  
Â  Â  Â  Â Â   
Â  Â  Â  Â  prewarmStartTime <span class="hljs-operator">=</span> <span class="hljs-type">Date</span>()  
Â  Â  Â  Â  prewarmingTask <span class="hljs-operator">=</span> <span class="hljs-type">Task</span>(priority: qos) {  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">do</span> {  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">let</span> session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>()  
Â  Â  Â  Â  Â  Â  Â  Â Â   
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// æ ¹æ®ä¼˜å…ˆçº§é€‰æ‹©é¢„çƒ­ç­–ç•¥  </span>
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">switch</span> priority {  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">case</span> .high:  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// é«˜ä¼˜å…ˆçº§ï¼šå¿«é€Ÿé¢„çƒ­ï¼ŒåªåšåŸºç¡€åˆå§‹åŒ–  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">_</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(to: <span class="hljs-string">"Hi"</span>)  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">case</span> .medium:  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// ä¸­ä¼˜å…ˆçº§ï¼šå®Œæ•´é¢„çƒ­  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">_</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(to: <span class="hljs-string">"Hello, how can I help you?"</span>)  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">case</span> .low:  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// ä½ä¼˜å…ˆçº§ï¼šåå°é¢„çƒ­ï¼Œä¸é˜»å¡  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">_</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(to: <span class="hljs-string">"Hello"</span>)  
Â  Â  Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  Â  Â  Â  Â Â   
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">let</span> duration <span class="hljs-operator">=</span> <span class="hljs-type">Date</span>().timeIntervalSince(<span class="hljs-keyword">self</span>.prewarmStartTime <span class="hljs-operator">??</span> <span class="hljs-type">Date</span>())  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">await</span> <span class="hljs-type">MainActor</span>.run {  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">self</span>.isPrewarmed <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… æ¨¡å‹é¢„çƒ­æˆåŠŸï¼ˆä¼˜å…ˆçº§: <span class="hljs-subst">\(priority)</span>, è€—æ—¶: <span class="hljs-subst">\(String(format: <span class="hljs-string">"%.2f"</span>, duration))</span>ç§’ï¼‰"</span>)  
Â  Â  Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  Â  Â  } <span class="hljs-keyword">catch</span> {  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">await</span> <span class="hljs-type">MainActor</span>.run {  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">"âš ï¸ æ¨¡å‹é¢„çƒ­å¤±è´¥: <span class="hljs-subst">\(error)</span>"</span>)  
Â  Â  Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  }  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-comment">/// å–æ¶ˆé¢„çƒ­ï¼ˆå¦‚æœç”¨æˆ·ç¦»å¼€é¡µé¢ï¼‰  </span>
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">cancelPrewarming</span>() {  
Â  Â  Â  Â  prewarmingTask<span class="hljs-operator">?</span>.cancel()  
Â  Â  Â  Â  prewarmingTask <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>  
Â  Â  }  
}  
</code></pre>
<h5 data-id="heading-57">åœ¨åº”ç”¨ä¸­çš„é›†æˆ</h5>
<p><strong>åœºæ™¯1: åº”ç”¨å¯åŠ¨æ—¶é¢„çƒ­</strong></p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">@main</span>  
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">MyApp</span>: <span class="hljs-title class_">App</span> {  
Â  Â  <span class="hljs-keyword">init</span>() {  
Â  Â  Â  Â  <span class="hljs-comment">// åº”ç”¨å¯åŠ¨æ—¶ï¼Œä½ä¼˜å…ˆçº§é¢„çƒ­  </span>
Â  Â  Â  Â  <span class="hljs-type">Task</span>.detached(priority: .utility) {  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">await</span> <span class="hljs-type">SmartModelPrewarmer</span>.shared.prewarm(priority: .low)  
Â  Â  Â  Â  }  
Â  Â  }  
}  
</code></pre>
<p><strong>åœºæ™¯2: è¿›å…¥AIåŠŸèƒ½é¡µé¢æ—¶é¢„çƒ­</strong></p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">PhotoAnalysisView</span>: <span class="hljs-title class_">View</span> {  
Â  Â  <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> viewModel <span class="hljs-operator">=</span> <span class="hljs-type">PhotoAnalysisViewModel</span>()  
Â  Â Â   
Â  Â  <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {  
Â  Â  Â  Â  <span class="hljs-type">VStack</span> {  
Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// UI å†…å®¹  </span>
Â  Â  Â  Â  }  
Â  Â  Â  Â  .onAppear {  
Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œç«‹å³é¢„çƒ­  </span>
Â  Â  Â  Â  Â  Â  <span class="hljs-type">SmartModelPrewarmer</span>.shared.prewarm(priority: .medium)  
Â  Â  Â  Â  }  
Â  Â  Â  Â  .onDisappear {  
Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// ç”¨æˆ·ç¦»å¼€é¡µé¢æ—¶ï¼Œå¯ä»¥å–æ¶ˆé¢„çƒ­ï¼ˆå¯é€‰ï¼‰  </span>
Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// SmartModelPrewarmer.shared.cancelPrewarming()  </span>
Â  Â  Â  Â  }  
Â  Â  }  
}  
</code></pre>
<p><strong>åœºæ™¯3: ç”¨æˆ·ç‚¹å‡»è¾“å…¥æ¡†æ—¶é¢„çƒ­</strong></p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ChatInputView</span>: <span class="hljs-title class_">View</span> {  
Â  Â  <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> inputText <span class="hljs-operator">=</span> <span class="hljs-string">""</span>  
Â  Â  <span class="hljs-meta">@FocusState</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isInputFocused: <span class="hljs-type">Bool</span>  
Â  Â Â   
Â  Â  <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {  
Â  Â  Â  Â  <span class="hljs-type">TextField</span>(<span class="hljs-string">"è¾“å…¥æ¶ˆæ¯..."</span>, text: <span class="hljs-variable">$inputText</span>)  
Â  Â  Â  Â  Â  Â  .focused(<span class="hljs-variable">$isInputFocused</span>)  
Â  Â  Â  Â  Â  Â  .onChange(of: isInputFocused) { focused <span class="hljs-keyword">in</span>  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">if</span> focused {  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// ç”¨æˆ·ç‚¹å‡»è¾“å…¥æ¡†æ—¶ï¼Œé«˜ä¼˜å…ˆçº§å¿«é€Ÿé¢„çƒ­  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-type">SmartModelPrewarmer</span>.shared.prewarm(priority: .high)  
Â  Â  Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  Â  Â  }  
Â  Â  }  
}  
</code></pre>
<h5 data-id="heading-58">é¢„çƒ­æ•ˆæœå¯¹æ¯”</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR  
Â  Â  subgraph NoPrewarm [æ— é¢„çƒ­]  
Â  Â  Â  Â  Request1[ç”¨æˆ·è¯·æ±‚] --&gt; Wait1[ç­‰å¾… 3-6ç§’]  
Â  Â  Â  Â  Wait1 --&gt; Response1[è¿”å›ç»“æœ]  
Â  Â  end  
Â  Â Â   
Â  Â  subgraph WithPrewarm [æœ‰é¢„çƒ­]  
Â  Â  Â  Â  Prewarm[æå‰é¢„çƒ­ ç”¨æˆ·æ— æ„ŸçŸ¥] --&gt; Ready[æ¨¡å‹å°±ç»ª]  
Â  Â  Â  Â  Request2[ç”¨æˆ·è¯·æ±‚] --&gt; Wait2[ç­‰å¾… 1-2ç§’]  
Â  Â  Â  Â  Wait2 --&gt; Response2[è¿”å›ç»“æœ]  
Â  Â  end  
Â  Â Â   
Â  Â  style Request1 fill:#FF3B30,color:#fff  
Â  Â  style Wait1 fill:#FF3B30,color:#fff  
Â  Â  style Prewarm fill:#34C759,color:#fff  
Â  Â  style Ready fill:#34C759,color:#fff  
Â  Â  style Request2 fill:#007AFF,color:#fff  
Â  Â  style Wait2 fill:#5AC8FA,color:#000  
Â  Â  style Response2 fill:#34C759,color:#fff  
</code></pre>
<p><strong>æ€§èƒ½æå‡æ•°æ®</strong>ï¼ˆåŸºäº Instruments åˆ†æï¼‰:</p>





























<table><thead><tr><th>åœºæ™¯</th><th>æ— é¢„çƒ­</th><th>æœ‰é¢„çƒ­</th><th>æå‡</th></tr></thead><tbody><tr><td>é¦–æ¬¡è°ƒç”¨å»¶è¿Ÿ</td><td>3-6ç§’</td><td>1-2ç§’</td><td><strong>50-70%</strong></td></tr><tr><td>ç”¨æˆ·æ„ŸçŸ¥ç­‰å¾…</td><td>æ˜æ˜¾</td><td>å‡ ä¹æ— æ„ŸçŸ¥</td><td><strong>æ˜¾è‘—æ”¹å–„</strong></td></tr><tr><td>å†…å­˜å ç”¨</td><td>æŒ‰éœ€åŠ è½½</td><td>æå‰å ç”¨</td><td>å¢åŠ çº¦ 200-500MB</td></tr></tbody></table>
<h5 data-id="heading-59">é¢„çƒ­æœ€ä½³å®è·µ</h5>
<p><strong>1. é¢„çƒ­æ—¶æœºé€‰æ‹©</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">mindmap  
Â  root((é¢„çƒ­æ—¶æœºé€‰æ‹©))  
Â  Â  åº”ç”¨å¯åŠ¨  
Â  Â  Â  ä½ä¼˜å…ˆçº§  
Â  Â  Â  åå°æ‰§è¡Œ  
Â  Â  Â  ä¸å½±å“å¯åŠ¨é€Ÿåº¦  
Â  Â  è¿›å…¥åŠŸèƒ½é¡µé¢  
Â  Â  Â  ä¸­ä¼˜å…ˆçº§  
Â  Â  Â  ç«‹å³æ‰§è¡Œ  
Â  Â  Â  ç”¨æˆ·æ„å›¾æ˜ç¡®  
Â  Â  ç‚¹å‡»è¾“å…¥æ¡†  
Â  Â  Â  é«˜ä¼˜å…ˆçº§  
Â  Â  Â  å¿«é€Ÿé¢„çƒ­  
Â  Â  Â  æœ€åŠæ—¶å“åº”  
Â  Â  é¿å…è¿‡åº¦é¢„çƒ­  
Â  Â  Â  ä¸è¦é¢‘ç¹é¢„çƒ­  
Â  Â  Â  æ£€æŸ¥é¢„çƒ­çŠ¶æ€  
Â  Â  Â  é¿å…èµ„æºæµªè´¹  
</code></pre>
<p><strong>2. é¢„çƒ­ç­–ç•¥å»ºè®®</strong></p>
<ul>
<li>âœ… <strong>æ¸è¿›å¼é¢„çƒ­</strong>: å…ˆåšåŸºç¡€åˆå§‹åŒ–ï¼Œå†é€æ­¥å®Œå–„</li>
<li>âœ… <strong>ä¼˜å…ˆçº§ç®¡ç†</strong>: æ ¹æ®ç”¨æˆ·è¡Œä¸ºè°ƒæ•´é¢„çƒ­ä¼˜å…ˆçº§</li>
<li>âœ… <strong>èµ„æºç›‘æ§</strong>: ä½¿ç”¨ Instruments ç›‘æ§é¢„çƒ­å¯¹å†…å­˜å’Œæ€§èƒ½çš„å½±å“</li>
<li>âœ… <strong>é™çº§å¤„ç†</strong>: å¦‚æœé¢„çƒ­å¤±è´¥ï¼Œæä¾›å‹å¥½çš„é™çº§æ–¹æ¡ˆ</li>
</ul>
<p><strong>3. é¢„çƒ­æ£€æŸ¥æ¸…å•</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦åœ¨åˆé€‚çš„æ—¶æœºè§¦å‘é¢„çƒ­ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> é¢„çƒ­æ˜¯å¦å½±å“åº”ç”¨å¯åŠ¨é€Ÿåº¦ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦å¤„ç†äº†é¢„çƒ­å¤±è´¥çš„æƒ…å†µï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦åœ¨ç”¨æˆ·ç¦»å¼€é¡µé¢æ—¶å–æ¶ˆä¸å¿…è¦çš„é¢„çƒ­ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦ä½¿ç”¨ Instruments éªŒè¯é¢„çƒ­æ•ˆæœï¼Ÿ</li>
</ul>
<p><strong>å‚è€ƒèµ„æº</strong>:</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fzvayivqt0ufji%2Farticle%2Fdetails%2F149374995" target="_blank" title="https://blog.csdn.net/zvayivqt0ufji/article/details/149374995" ref="nofollow noopener noreferrer">CSDN - Foundation Models é¢„çƒ­ä¼˜åŒ–</a></li>
</ul>
<h4 data-id="heading-60">ç¼“å­˜ç­–ç•¥</h4>
<p>ç¼“å­˜ç­–ç•¥æ˜¯ä¼˜åŒ– Foundation Models åº”ç”¨æ€§èƒ½çš„é‡è¦æ‰‹æ®µã€‚åˆç†çš„ç¼“å­˜å¯ä»¥æ˜¾è‘—å‡å°‘é‡å¤è®¡ç®—ï¼Œæå‡å“åº”é€Ÿåº¦ï¼Œé™ä½èµ„æºæ¶ˆè€—ã€‚</p>
<h5 data-id="heading-61">ç¼“å­˜ç­–ç•¥æ¦‚è¿°</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD  
Â  Â  Request[ç”¨æˆ·è¯·æ±‚] --&gt; CheckCache{æ£€æŸ¥ç¼“å­˜}  
Â  Â  CheckCache --&gt;|å‘½ä¸­| ReturnCache[è¿”å›ç¼“å­˜ç»“æœ å¿«é€Ÿå“åº”]  
Â  Â  CheckCache --&gt;|æœªå‘½ä¸­| Generate[è°ƒç”¨ Foundation Models ç”Ÿæˆç»“æœ]  
Â  Â  Generate --&gt; Store[å­˜å‚¨åˆ°ç¼“å­˜]  
Â  Â  Store --&gt; ReturnNew[è¿”å›æ–°ç»“æœ]  
Â  Â Â   
Â  Â  subgraph CacheManagement [ç¼“å­˜ç®¡ç†]  
Â  Â  Â  Â  Store --&gt; Evict{ç¼“å­˜å·²æ»¡?}  
Â  Â  Â  Â  Evict --&gt;|æ˜¯| Strategy[æ‰§è¡Œæ·˜æ±°ç­–ç•¥ LRU/LFU/FIFO]  
Â  Â  Â  Â  Evict --&gt;|å¦| Keep[ä¿ç•™ç¼“å­˜]  
Â  Â  Â  Â  Strategy --&gt; Keep  
Â  Â  end  
Â  Â Â   
Â  Â  style Request fill:#007AFF,color:#fff  
Â  Â  style CheckCache fill:#FF9500,color:#fff  
Â  Â  style ReturnCache fill:#34C759,color:#fff  
Â  Â  style Generate fill:#5AC8FA,color:#000  
Â  Â  style Store fill:#AF52DE,color:#fff  
Â  Â  style Strategy fill:#FF3B30,color:#fff  
</code></pre>
<p><strong>ç¼“å­˜çš„æ ¸å¿ƒä»·å€¼</strong>:</p>
<ul>
<li>âœ… <strong>å‡å°‘é‡å¤è®¡ç®—</strong>: ç›¸åŒè¾“å…¥ç›´æ¥è¿”å›ç¼“å­˜ç»“æœ</li>
<li>âœ… <strong>æå‡å“åº”é€Ÿåº¦</strong>: ç¼“å­˜å‘½ä¸­æ—¶å‡ ä¹é›¶å»¶è¿Ÿ</li>
<li>âœ… <strong>é™ä½èµ„æºæ¶ˆè€—</strong>: å‡å°‘æ¨¡å‹è°ƒç”¨æ¬¡æ•°ï¼ŒèŠ‚çœè®¡ç®—èµ„æº</li>
<li>âœ… <strong>æ”¹å–„ç”¨æˆ·ä½“éªŒ</strong>: å¿«é€Ÿå“åº”ï¼Œç‰¹åˆ«æ˜¯é‡å¤æŸ¥çœ‹ç›¸åŒå†…å®¹æ—¶</li>
</ul>
<h5 data-id="heading-62">ç¼“å­˜é”®è®¾è®¡</h5>
<p>ç¼“å­˜é”®çš„è®¾è®¡ç›´æ¥å½±å“ç¼“å­˜å‘½ä¸­ç‡å’Œæœ‰æ•ˆæ€§ã€‚</p>
<p><strong>å¥½çš„ç¼“å­˜é”®åº”è¯¥åŒ…å«</strong>:</p>
<ul>
<li>è¾“å…¥æ•°æ®çš„å”¯ä¸€æ ‡è¯†ï¼ˆå¦‚ç…§ç‰‡IDï¼‰</li>
<li>å¯èƒ½å½±å“ç»“æœçš„æ•°æ®ç‰ˆæœ¬ï¼ˆå¦‚ä¿®æ”¹æ—¶é—´ï¼‰</li>
<li>ç”Ÿæˆå‚æ•°ï¼ˆå¦‚ä¸åŒçš„Instructionså¯èƒ½äº§ç”Ÿä¸åŒç»“æœï¼‰</li>
</ul>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheKeyBuilder</span> {  
Â  Â  <span class="hljs-comment">/// ä¸ºç…§ç‰‡åˆ†æç”Ÿæˆç¼“å­˜é”®  </span>
Â  Â  <span class="hljs-keyword">static</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">keyForPhotoAnalysis</span>(  
Â  Â  Â  Â  <span class="hljs-params">photoId</span>: <span class="hljs-type">String</span>,  
Â  Â  Â  Â  <span class="hljs-params">modificationDate</span>: <span class="hljs-type">Date</span>,  
Â  Â  Â  Â  <span class="hljs-params">instructionsHash</span>: <span class="hljs-type">String</span>? <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>  
Â  Â  ) -&gt; <span class="hljs-type">String</span> {  
Â  Â  Â  Â  <span class="hljs-keyword">var</span> components <span class="hljs-operator">=</span> [photoId, <span class="hljs-type">String</span>(modificationDate.timeIntervalSince1970)]  
Â  Â  Â  Â  <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> hash <span class="hljs-operator">=</span> instructionsHash {  
Â  Â  Â  Â  Â  Â  components.append(hash)  
Â  Â  Â  Â  }  
Â  Â  Â  Â  <span class="hljs-keyword">return</span> components.joined(separator: <span class="hljs-string">"|"</span>)  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-comment">/// ä¸ºè‡ªç„¶è¯­è¨€æœç´¢ç”Ÿæˆç¼“å­˜é”®  </span>
Â  Â  <span class="hljs-keyword">static</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">keyForSearch</span>(  
Â  Â  Â  Â  <span class="hljs-params">query</span>: <span class="hljs-type">String</span>,  
Â  Â  Â  Â  <span class="hljs-params">photoCount</span>: <span class="hljs-type">Int</span>  
Â  Â  ) -&gt; <span class="hljs-type">String</span> {  
Â  Â  Â  Â  <span class="hljs-comment">// ä½¿ç”¨æŸ¥è¯¢å†…å®¹å’Œç…§ç‰‡æ•°é‡ä½œä¸ºé”®  </span>
Â  Â  Â  Â  <span class="hljs-comment">// æ³¨æ„ï¼šå¦‚æœç›¸å†Œå†…å®¹å˜åŒ–ï¼Œéœ€è¦ä½¿ç¼“å­˜å¤±æ•ˆ  </span>
Â  Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-string">"search:<span class="hljs-subst">\(query.hashValue)</span>:<span class="hljs-subst">\(photoCount)</span>"</span>  
Â  Â  }  
}  
</code></pre>
<h5 data-id="heading-63">å†…å­˜ç¼“å­˜å®ç°</h5>
<p><strong>åŸºç¡€å†…å­˜ç¼“å­˜</strong>:</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryCache</span>&lt;<span class="hljs-title class_">T</span>: <span class="hljs-title class_">Codable</span>&gt; {  
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> cache: [<span class="hljs-type">String</span>: <span class="hljs-type">CacheEntry</span>&lt;<span class="hljs-type">T</span>&gt;] <span class="hljs-operator">=</span> [:]  
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> maxSize: <span class="hljs-type">Int</span>  
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> accessQueue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(label: <span class="hljs-string">"com.app.cache"</span>, attributes: .concurrent)  
Â  Â Â   
Â  Â  <span class="hljs-keyword">init</span>(<span class="hljs-params">maxSize</span>: <span class="hljs-type">Int</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>) {  
Â  Â  Â  Â  <span class="hljs-keyword">self</span>.maxSize <span class="hljs-operator">=</span> maxSize  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-comment">/// è·å–ç¼“å­˜  </span>
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">for</span> <span class="hljs-params">key</span>: <span class="hljs-type">String</span>) -&gt; <span class="hljs-type">T</span>? {  
Â  Â  Â  Â  <span class="hljs-keyword">return</span> accessQueue.sync {  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> entry <span class="hljs-operator">=</span> cache[key] <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span> }  
Â  Â  Â  Â  Â  Â Â   
Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// æ›´æ–°è®¿é—®æ—¶é—´ï¼ˆç”¨äºLRUï¼‰  </span>
Â  Â  Â  Â  Â  Â  entry.lastAccessed <span class="hljs-operator">=</span> <span class="hljs-type">Date</span>()  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span> entry.value  
Â  Â  Â  Â  }  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-comment">/// è®¾ç½®ç¼“å­˜  </span>
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">set</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">value</span>: <span class="hljs-type">T</span>, <span class="hljs-params">for</span> <span class="hljs-params">key</span>: <span class="hljs-type">String</span>) {  
Â  Â  Â  Â  accessQueue.async(flags: .barrier) {  
Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// å¦‚æœç¼“å­˜å·²æ»¡ï¼Œæ‰§è¡Œæ·˜æ±°ç­–ç•¥  </span>
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.cache.count <span class="hljs-operator">&gt;=</span> <span class="hljs-keyword">self</span>.maxSize <span class="hljs-operator">&amp;&amp;</span> <span class="hljs-keyword">self</span>.cache[key] <span class="hljs-operator">==</span> <span class="hljs-literal">nil</span> {  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">self</span>.evictOldest()  
Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  Â  Â Â   
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">self</span>.cache[key] <span class="hljs-operator">=</span> <span class="hljs-type">CacheEntry</span>(value: value, lastAccessed: <span class="hljs-type">Date</span>())  
Â  Â  Â  Â  }  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-comment">/// LRUæ·˜æ±°ï¼šç§»é™¤æœ€ä¹…æœªè®¿é—®çš„æ¡ç›®  </span>
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">evictOldest</span>() {  
Â  Â  Â  Â  <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> oldest <span class="hljs-operator">=</span> cache.min(by: { <span class="hljs-variable">$0</span>.value.lastAccessed <span class="hljs-operator">&lt;</span> <span class="hljs-variable">$1</span>.value.lastAccessed }) <span class="hljs-keyword">else</span> {  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span>  
Â  Â  Â  Â  }  
Â  Â  Â  Â  cache.removeValue(forKey: oldest.key)  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-comment">/// æ¸…é™¤æ‰€æœ‰ç¼“å­˜  </span>
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">clear</span>() {  
Â  Â  Â  Â  accessQueue.async(flags: .barrier) {  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">self</span>.cache.removeAll()  
Â  Â  Â  Â  }  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-comment">/// è·å–ç¼“å­˜ç»Ÿè®¡  </span>
Â  Â  <span class="hljs-keyword">var</span> stats: <span class="hljs-type">CacheStats</span> {  
Â  Â  Â  Â  <span class="hljs-keyword">return</span> accessQueue.sync {  
Â  Â  Â  Â  Â  Â  <span class="hljs-type">CacheStats</span>(  
Â  Â  Â  Â  Â  Â  Â  Â  size: cache.count,  
Â  Â  Â  Â  Â  Â  Â  Â  maxSize: maxSize,  
Â  Â  Â  Â  Â  Â  Â  Â  hitRate: <span class="hljs-number">0</span> <span class="hljs-comment">// éœ€è¦é¢å¤–å®ç°å‘½ä¸­ç‡ç»Ÿè®¡  </span>
Â  Â  Â  Â  Â  Â  )  
Â  Â  Â  Â  }  
Â  Â  }  
}

<span class="hljs-comment">/// ç¼“å­˜æ¡ç›®  </span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheEntry</span>&lt;<span class="hljs-title class_">T</span>&gt; {  
Â  Â  <span class="hljs-keyword">let</span> value: <span class="hljs-type">T</span>  
Â  Â  <span class="hljs-keyword">var</span> lastAccessed: <span class="hljs-type">Date</span>  
Â  Â  <span class="hljs-keyword">var</span> accessCount: <span class="hljs-type">Int</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>  
Â  Â Â   
Â  Â  <span class="hljs-keyword">init</span>(<span class="hljs-params">value</span>: <span class="hljs-type">T</span>, <span class="hljs-params">lastAccessed</span>: <span class="hljs-type">Date</span>) {  
Â  Â  Â  Â  <span class="hljs-keyword">self</span>.value <span class="hljs-operator">=</span> value  
Â  Â  Â  Â  <span class="hljs-keyword">self</span>.lastAccessed <span class="hljs-operator">=</span> lastAccessed  
Â  Â  }  
}

<span class="hljs-comment">/// ç¼“å­˜ç»Ÿè®¡  </span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">CacheStats</span> {  
Â  Â  <span class="hljs-keyword">let</span> size: <span class="hljs-type">Int</span>  
Â  Â  <span class="hljs-keyword">let</span> maxSize: <span class="hljs-type">Int</span>  
Â  Â  <span class="hljs-keyword">let</span> hitRate: <span class="hljs-type">Double</span>  
}  
</code></pre>
<p><strong>ä½¿ç”¨å†…å­˜ç¼“å­˜çš„å®Œæ•´ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CachedPhotoAnalysisService</span> {  
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> cache <span class="hljs-operator">=</span> <span class="hljs-type">MemoryCache</span>&lt;<span class="hljs-type">PhotoDescription</span>&gt;(maxSize: <span class="hljs-number">100</span>)  
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> sessionManager <span class="hljs-operator">=</span> <span class="hljs-type">PhotoAISessionManager</span>()  
Â  Â Â   
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">analyzePhoto</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">photo</span>: <span class="hljs-type">Photo</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">PhotoDescription</span> {  
Â  Â  Â  Â  <span class="hljs-comment">// ç”Ÿæˆç¼“å­˜é”®  </span>
Â  Â  Â  Â  <span class="hljs-keyword">let</span> cacheKey <span class="hljs-operator">=</span> <span class="hljs-type">CacheKeyBuilder</span>.keyForPhotoAnalysis(  
Â  Â  Â  Â  Â  Â  photoId: photo.id,  
Â  Â  Â  Â  Â  Â  modificationDate: photo.modificationDate  
Â  Â  Â  Â  )  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-comment">// æ£€æŸ¥ç¼“å­˜  </span>
Â  Â  Â  Â  <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> cached <span class="hljs-operator">=</span> cache.get(for: cacheKey) {  
Â  Â  Â  Â  Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… ç¼“å­˜å‘½ä¸­: <span class="hljs-subst">\(cacheKey)</span>"</span>)  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span> cached  
Â  Â  Â  Â  }  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">"âŒ ç¼“å­˜æœªå‘½ä¸­ï¼Œç”Ÿæˆæ–°ç»“æœ: <span class="hljs-subst">\(cacheKey)</span>"</span>)  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-comment">// ç”Ÿæˆæ–°ç»“æœ  </span>
Â  Â  Â  Â  <span class="hljs-keyword">let</span> prompt <span class="hljs-operator">=</span> generateAnalysisPrompt(for: photo)  
Â  Â  Â  Â  <span class="hljs-keyword">let</span> result <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> sessionManager.generateStructured(  
Â  Â  Â  Â  Â  Â  prompt: prompt,  
Â  Â  Â  Â  Â  Â  type: <span class="hljs-type">PhotoDescription</span>.<span class="hljs-keyword">self</span>  
Â  Â  Â  Â  )  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-comment">// å­˜å‚¨åˆ°ç¼“å­˜  </span>
Â  Â  Â  Â  cache.set(result, for: cacheKey)  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-keyword">return</span> result  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">generateAnalysisPrompt</span>(<span class="hljs-params">for</span> <span class="hljs-params">photo</span>: <span class="hljs-type">Photo</span>) -&gt; <span class="hljs-type">String</span> {  
Â  Â  Â  Â  <span class="hljs-comment">// ç”Ÿæˆåˆ†ææç¤ºè¯  </span>
Â  Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-string">"åˆ†æç…§ç‰‡..."</span>  
Â  Â  }  
}  
</code></pre>
<h5 data-id="heading-64">æŒä¹…åŒ–ç¼“å­˜å®ç°</h5>
<p>å¯¹äºéœ€è¦è·¨åº”ç”¨å¯åŠ¨ä¿æŒçš„ç¼“å­˜ï¼Œå¯ä»¥ä½¿ç”¨æ–‡ä»¶ç³»ç»ŸæŒä¹…åŒ–ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">PersistentCache</span>&lt;<span class="hljs-title class_">T</span>: <span class="hljs-title class_">Codable</span>&gt; {  
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> memoryCache <span class="hljs-operator">=</span> <span class="hljs-type">MemoryCache</span>&lt;<span class="hljs-type">T</span>&gt;(maxSize: <span class="hljs-number">50</span>)  
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> cacheDirectory: <span class="hljs-type">URL</span>  
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> fileManager <span class="hljs-operator">=</span> <span class="hljs-type">FileManager</span>.default  
Â  Â Â   
Â  Â  <span class="hljs-keyword">init</span>(<span class="hljs-params">cacheName</span>: <span class="hljs-type">String</span>) <span class="hljs-keyword">throws</span> {  
Â  Â  Â  Â  <span class="hljs-keyword">let</span> cacheDir <span class="hljs-operator">=</span> fileManager.urls(for: .cachesDirectory, in: .userDomainMask)[<span class="hljs-number">0</span>]  
Â  Â  Â  Â  cacheDirectory <span class="hljs-operator">=</span> cacheDir.appendingPathComponent(cacheName)  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-comment">// åˆ›å»ºç¼“å­˜ç›®å½•  </span>
Â  Â  Â  Â  <span class="hljs-keyword">try</span> fileManager.createDirectory(at: cacheDirectory, withIntermediateDirectories: <span class="hljs-literal">true</span>)  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-comment">/// è·å–ç¼“å­˜ï¼ˆå…ˆæŸ¥å†…å­˜ï¼Œå†æŸ¥ç£ç›˜ï¼‰  </span>
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">for</span> <span class="hljs-params">key</span>: <span class="hljs-type">String</span>) -&gt; <span class="hljs-type">T</span>? {  
Â  Â  Â  Â  <span class="hljs-comment">// å…ˆæŸ¥å†…å­˜ç¼“å­˜  </span>
Â  Â  Â  Â  <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> memoryValue <span class="hljs-operator">=</span> memoryCache.get(for: key) {  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span> memoryValue  
Â  Â  Â  Â  }  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-comment">// å†æŸ¥ç£ç›˜ç¼“å­˜  </span>
Â  Â  Â  Â  <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> diskValue <span class="hljs-operator">=</span> loadFromDisk(key: key) {  
Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// åŠ è½½åˆ°å†…å­˜ç¼“å­˜  </span>
Â  Â  Â  Â  Â  Â  memoryCache.set(diskValue, for: key)  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span> diskValue  
Â  Â  Â  Â  }  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-comment">/// è®¾ç½®ç¼“å­˜ï¼ˆåŒæ—¶å†™å…¥å†…å­˜å’Œç£ç›˜ï¼‰  </span>
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">set</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">value</span>: <span class="hljs-type">T</span>, <span class="hljs-params">for</span> <span class="hljs-params">key</span>: <span class="hljs-type">String</span>) {  
Â  Â  Â  Â  <span class="hljs-comment">// å†™å…¥å†…å­˜ç¼“å­˜  </span>
Â  Â  Â  Â  memoryCache.set(value, for: key)  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-comment">// å¼‚æ­¥å†™å…¥ç£ç›˜  </span>
Â  Â  Â  Â  <span class="hljs-type">Task</span>.detached(priority: .utility) {  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">self</span>.saveToDisk(value: value, key: key)  
Â  Â  Â  Â  }  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-comment">/// ä»ç£ç›˜åŠ è½½  </span>
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">loadFromDisk</span>(<span class="hljs-params">key</span>: <span class="hljs-type">String</span>) -&gt; <span class="hljs-type">T</span>? {  
Â  Â  Â  Â  <span class="hljs-keyword">let</span> fileURL <span class="hljs-operator">=</span> cacheDirectory.appendingPathComponent(<span class="hljs-string">"<span class="hljs-subst">\(key.hashValue)</span>.json"</span>)  
Â  Â  Â  Â  <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> <span class="hljs-keyword">try?</span> <span class="hljs-type">Data</span>(contentsOf: fileURL),  
Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">let</span> value <span class="hljs-operator">=</span> <span class="hljs-keyword">try?</span> <span class="hljs-type">JSONDecoder</span>().decode(<span class="hljs-type">T</span>.<span class="hljs-keyword">self</span>, from: data) <span class="hljs-keyword">else</span> {  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>  
Â  Â  Â  Â  }  
Â  Â  Â  Â  <span class="hljs-keyword">return</span> value  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-comment">/// ä¿å­˜åˆ°ç£ç›˜  </span>
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">saveToDisk</span>(<span class="hljs-params">value</span>: <span class="hljs-type">T</span>, <span class="hljs-params">key</span>: <span class="hljs-type">String</span>) {  
Â  Â  Â  Â  <span class="hljs-keyword">let</span> fileURL <span class="hljs-operator">=</span> cacheDirectory.appendingPathComponent(<span class="hljs-string">"<span class="hljs-subst">\(key.hashValue)</span>.json"</span>)  
Â  Â  Â  Â  <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> <span class="hljs-keyword">try?</span> <span class="hljs-type">JSONEncoder</span>().encode(value) <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }  
Â  Â  Â  Â  <span class="hljs-keyword">try?</span> data.write(to: fileURL)  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-comment">/// æ¸…ç†è¿‡æœŸç¼“å­˜  </span>
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">cleanExpired</span>(<span class="hljs-params">maxAge</span>: <span class="hljs-type">TimeInterval</span> <span class="hljs-operator">=</span> <span class="hljs-number">7</span> <span class="hljs-operator">*</span> <span class="hljs-number">24</span> <span class="hljs-operator">*</span> <span class="hljs-number">3600</span>) {  
Â  Â  Â  Â  <span class="hljs-comment">// æ¸…ç†è¶…è¿‡7å¤©çš„ç¼“å­˜æ–‡ä»¶  </span>
Â  Â  Â  Â  <span class="hljs-comment">// å®ç°ç»†èŠ‚...  </span>
Â  Â  }  
}  
</code></pre>
<h5 data-id="heading-65">ç¼“å­˜å¤±æ•ˆç­–ç•¥</h5>
<p>ç¼“å­˜å¤±æ•ˆæ˜¯ç¼“å­˜ç­–ç•¥çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œéœ€è¦æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©åˆé€‚çš„ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD  
Â  Â  Cache[ç¼“å­˜æ¡ç›®] --&gt; Check1{åŸºäºæ—¶é—´å¤±æ•ˆ?}  
Â  Â  Check1 --&gt;|æ˜¯| TimeBased[æ—¶é—´è¿‡æœŸç­–ç•¥ å¦‚ï¼š7å¤©åå¤±æ•ˆ]  
Â  Â  Check1 --&gt;|å¦| Check2{åŸºäºæ•°æ®å˜åŒ–å¤±æ•ˆ?}  
Â  Â Â   
Â  Â  Check2 --&gt;|æ˜¯| DataBased[æ•°æ®å˜åŒ–ç­–ç•¥ å¦‚ï¼šç…§ç‰‡ä¿®æ”¹åå¤±æ•ˆ]  
Â  Â  Check2 --&gt;|å¦| Check3{åŸºäºç‰ˆæœ¬å¤±æ•ˆ?}  
Â  Â Â   
Â  Â  Check3 --&gt;|æ˜¯| VersionBased[ç‰ˆæœ¬ç­–ç•¥ å¦‚ï¼šInstructionså˜åŒ–åå¤±æ•ˆ]  
Â  Â  Check3 --&gt;|å¦| Manual[æ‰‹åŠ¨å¤±æ•ˆ ç”¨æˆ·ä¸»åŠ¨æ¸…é™¤]  
Â  Â Â   
Â  Â  TimeBased --&gt; Invalidate[ä½¿ç¼“å­˜å¤±æ•ˆ]  
Â  Â  DataBased --&gt; Invalidate  
Â  Â  VersionBased --&gt; Invalidate  
Â  Â  Manual --&gt; Invalidate  
Â  Â Â   
Â  Â  style Cache fill:#007AFF,color:#fff  
Â  Â  style Check1 fill:#FF9500,color:#fff  
Â  Â  style Check2 fill:#FF9500,color:#fff  
Â  Â  style Check3 fill:#FF9500,color:#fff  
Â  Â  style TimeBased fill:#34C759,color:#fff  
Â  Â  style DataBased fill:#34C759,color:#fff  
Â  Â  style VersionBased fill:#34C759,color:#fff  
Â  Â  style Manual fill:#5AC8FA,color:#000  
Â  Â  style Invalidate fill:#FF3B30,color:#fff  
</code></pre>
<p><strong>å®ç°å¸¦å¤±æ•ˆç­–ç•¥çš„ç¼“å­˜</strong>:</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheEntryWithExpiry</span>&lt;<span class="hljs-title class_">T</span>&gt; {  
Â  Â  <span class="hljs-keyword">let</span> value: <span class="hljs-type">T</span>  
Â  Â  <span class="hljs-keyword">let</span> createdAt: <span class="hljs-type">Date</span>  
Â  Â  <span class="hljs-keyword">let</span> expiresAt: <span class="hljs-type">Date</span>?  
Â  Â Â   
Â  Â  <span class="hljs-keyword">init</span>(<span class="hljs-params">value</span>: <span class="hljs-type">T</span>, <span class="hljs-params">ttl</span>: <span class="hljs-type">TimeInterval</span>? <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>) {  
Â  Â  Â  Â  <span class="hljs-keyword">self</span>.value <span class="hljs-operator">=</span> value  
Â  Â  Â  Â  <span class="hljs-keyword">self</span>.createdAt <span class="hljs-operator">=</span> <span class="hljs-type">Date</span>()  
Â  Â  Â  Â  <span class="hljs-keyword">self</span>.expiresAt <span class="hljs-operator">=</span> ttl.map { <span class="hljs-type">Date</span>().addingTimeInterval(<span class="hljs-variable">$0</span>) }  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-keyword">var</span> isExpired: <span class="hljs-type">Bool</span> {  
Â  Â  Â  Â  <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> expiresAt <span class="hljs-operator">=</span> expiresAt <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> }  
Â  Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-type">Date</span>() <span class="hljs-operator">&gt;</span> expiresAt  
Â  Â  }  
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ExpiringCache</span>&lt;<span class="hljs-title class_">T</span>: <span class="hljs-title class_">Codable</span>&gt; {  
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> cache: [<span class="hljs-type">String</span>: <span class="hljs-type">CacheEntryWithExpiry</span>&lt;<span class="hljs-type">T</span>&gt;] <span class="hljs-operator">=</span> [:]  
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> maxSize: <span class="hljs-type">Int</span>  
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> defaultTTL: <span class="hljs-type">TimeInterval</span>?  
Â  Â Â   
Â  Â  <span class="hljs-keyword">init</span>(<span class="hljs-params">maxSize</span>: <span class="hljs-type">Int</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>, <span class="hljs-params">defaultTTL</span>: <span class="hljs-type">TimeInterval</span>? <span class="hljs-operator">=</span> <span class="hljs-number">7</span> <span class="hljs-operator">*</span> <span class="hljs-number">24</span> <span class="hljs-operator">*</span> <span class="hljs-number">3600</span>) {  
Â  Â  Â  Â  <span class="hljs-keyword">self</span>.maxSize <span class="hljs-operator">=</span> maxSize  
Â  Â  Â  Â  <span class="hljs-keyword">self</span>.defaultTTL <span class="hljs-operator">=</span> defaultTTL  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">for</span> <span class="hljs-params">key</span>: <span class="hljs-type">String</span>) -&gt; <span class="hljs-type">T</span>? {  
Â  Â  Â  Â  <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> entry <span class="hljs-operator">=</span> cache[key] <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span> }  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦è¿‡æœŸ  </span>
Â  Â  Â  Â  <span class="hljs-keyword">if</span> entry.isExpired {  
Â  Â  Â  Â  Â  Â  cache.removeValue(forKey: key)  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>  
Â  Â  Â  Â  }  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-keyword">return</span> entry.value  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">set</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">value</span>: <span class="hljs-type">T</span>, <span class="hljs-params">for</span> <span class="hljs-params">key</span>: <span class="hljs-type">String</span>, <span class="hljs-params">ttl</span>: <span class="hljs-type">TimeInterval</span>? <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>) {  
Â  Â  Â  Â  <span class="hljs-keyword">let</span> entry <span class="hljs-operator">=</span> <span class="hljs-type">CacheEntryWithExpiry</span>(value: value, ttl: ttl <span class="hljs-operator">??</span> defaultTTL)  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-comment">// å¦‚æœç¼“å­˜å·²æ»¡ï¼Œç§»é™¤è¿‡æœŸæˆ–æœ€æ—§çš„æ¡ç›®  </span>
Â  Â  Â  Â  <span class="hljs-keyword">if</span> cache.count <span class="hljs-operator">&gt;=</span> maxSize <span class="hljs-operator">&amp;&amp;</span> cache[key] <span class="hljs-operator">==</span> <span class="hljs-literal">nil</span> {  
Â  Â  Â  Â  Â  Â  evictExpiredOrOldest()  
Â  Â  Â  Â  }  
Â  Â  Â  Â Â   
Â  Â  Â  Â  cache[key] <span class="hljs-operator">=</span> entry  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">evictExpiredOrOldest</span>() {  
Â  Â  Â  Â  <span class="hljs-comment">// å…ˆç§»é™¤è¿‡æœŸçš„  </span>
Â  Â  Â  Â  <span class="hljs-keyword">let</span> expiredKeys <span class="hljs-operator">=</span> cache.filter { <span class="hljs-variable">$0</span>.value.isExpired }.map { <span class="hljs-variable">$0</span>.key }  
Â  Â  Â  Â  expiredKeys.forEach { cache.removeValue(forKey: <span class="hljs-variable">$0</span>) }  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-comment">// å¦‚æœè¿˜æœ‰ç©ºé—´ï¼Œä¸éœ€è¦ç»§ç»­  </span>
Â  Â  Â  Â  <span class="hljs-keyword">if</span> cache.count <span class="hljs-operator">&lt;</span> maxSize { <span class="hljs-keyword">return</span> }  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-comment">// ç§»é™¤æœ€æ—§çš„  </span>
Â  Â  Â  Â  <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> oldest <span class="hljs-operator">=</span> cache.min(by: { <span class="hljs-variable">$0</span>.value.createdAt <span class="hljs-operator">&lt;</span> <span class="hljs-variable">$1</span>.value.createdAt }) {  
Â  Â  Â  Â  Â  Â  cache.removeValue(forKey: oldest.key)  
Â  Â  Â  Â  }  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-comment">/// æ‰‹åŠ¨ä½¿ç¼“å­˜å¤±æ•ˆ  </span>
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">invalidate</span>(<span class="hljs-params">for</span> <span class="hljs-params">key</span>: <span class="hljs-type">String</span>) {  
Â  Â  Â  Â  cache.removeValue(forKey: key)  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-comment">/// ä½¿æ‰€æœ‰ç¼“å­˜å¤±æ•ˆ  </span>
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">invalidateAll</span>() {  
Â  Â  Â  Â  cache.removeAll()  
Â  Â  }  
}  
</code></pre>
<h5 data-id="heading-66">ç¼“å­˜ç­–ç•¥é€‰æ‹©æŒ‡å—</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">mindmap  
Â  root((ç¼“å­˜ç­–ç•¥é€‰æ‹©))  
Â  Â  å†…å­˜ç¼“å­˜  
Â  Â  Â  å¿«é€Ÿè®¿é—®  
Â  Â  Â  é€‚åˆé¢‘ç¹è®¿é—®  
Â  Â  Â  å®¹é‡æœ‰é™  
Â  Â  Â  åº”ç”¨é‡å¯åä¸¢å¤±  
Â  Â  æŒä¹…åŒ–ç¼“å­˜  
Â  Â  Â  è·¨å¯åŠ¨ä¿æŒ  
Â  Â  Â  é€‚åˆé‡è¦ç»“æœ  
Â  Â  Â  éœ€è¦ç£ç›˜ç©ºé—´  
Â  Â  Â  éœ€è¦ç®¡ç†æ–‡ä»¶  
Â  Â  ç¼“å­˜å¤±æ•ˆ  
Â  Â  Â  æ—¶é—´è¿‡æœŸ  
Â  Â  Â  æ•°æ®å˜åŒ–è§¦å‘  
Â  Â  Â  ç‰ˆæœ¬æ§åˆ¶  
Â  Â  Â  æ‰‹åŠ¨æ¸…é™¤  
Â  Â  ç¼“å­˜æ·˜æ±°  
Â  Â  Â  LRU æœ€è¿‘æœ€å°‘ä½¿ç”¨  
Â  Â  Â  LFU æœ€ä¸å¸¸ç”¨  
Â  Â  Â  FIFO å…ˆè¿›å…ˆå‡º  
Â  Â  Â  æ ¹æ®åœºæ™¯é€‰æ‹©  
</code></pre>
<p><strong>ä¸åŒåœºæ™¯çš„ç¼“å­˜ç­–ç•¥å»ºè®®</strong>:</p>








































<table><thead><tr><th>åœºæ™¯</th><th>ç¼“å­˜ç±»å‹</th><th>å¤±æ•ˆç­–ç•¥</th><th>æ·˜æ±°ç­–ç•¥</th><th>å®¹é‡å»ºè®®</th></tr></thead><tbody><tr><td>ç…§ç‰‡åˆ†æç»“æœ</td><td>å†…å­˜+æŒä¹…åŒ–</td><td>ç…§ç‰‡ä¿®æ”¹æ—¶å¤±æ•ˆ</td><td>LRU</td><td>100-200æ¡</td></tr><tr><td>æœç´¢æŸ¥è¯¢ç»“æœ</td><td>ä»…å†…å­˜</td><td>ç›¸å†Œå†…å®¹å˜åŒ–æ—¶å¤±æ•ˆ</td><td>LRU</td><td>50-100æ¡</td></tr><tr><td>ç›¸å†Œåˆ†ç±»å»ºè®®</td><td>ä»…å†…å­˜</td><td>ç…§ç‰‡æ•°é‡å˜åŒ–æ—¶å¤±æ•ˆ</td><td>FIFO</td><td>20-50æ¡</td></tr><tr><td>è§†é¢‘æ‘˜è¦</td><td>æŒä¹…åŒ–</td><td>7å¤©è¿‡æœŸ</td><td>LRU</td><td>50-100æ¡</td></tr></tbody></table>
<h5 data-id="heading-67">ç¼“å­˜æœ€ä½³å®è·µ</h5>
<p><strong>1. ç¼“å­˜é”®è®¾è®¡åŸåˆ™</strong></p>
<ul>
<li>âœ… åŒ…å«æ‰€æœ‰å½±å“ç»“æœçš„å› ç´ </li>
<li>âœ… ä½¿ç”¨ç¨³å®šçš„æ ‡è¯†ç¬¦ï¼ˆå¦‚ç…§ç‰‡ID + ä¿®æ”¹æ—¶é—´ï¼‰</li>
<li>âœ… é¿å…åŒ…å«æ˜“å˜æ•°æ®ï¼ˆå¦‚å½“å‰æ—¶é—´æˆ³ï¼‰</li>
<li>âœ… è€ƒè™‘å“ˆå¸Œå†²çªï¼Œä½¿ç”¨è¶³å¤Ÿé•¿çš„é”®</li>
</ul>
<p><strong>2. ç¼“å­˜å®¹é‡ç®¡ç†</strong></p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheManager</span> {  
Â  Â  <span class="hljs-comment">/// æ ¹æ®è®¾å¤‡å†…å­˜åŠ¨æ€è°ƒæ•´ç¼“å­˜å¤§å°  </span>
Â  Â  <span class="hljs-keyword">static</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">optimalCacheSize</span>() -&gt; <span class="hljs-type">Int</span> {  
Â  Â  Â  Â  <span class="hljs-keyword">let</span> totalMemory <span class="hljs-operator">=</span> <span class="hljs-type">ProcessInfo</span>.processInfo.physicalMemory  
Â  Â  Â  Â  <span class="hljs-keyword">let</span> availableMemory <span class="hljs-operator">=</span> totalMemory <span class="hljs-operator">/</span> <span class="hljs-number">4</span> <span class="hljs-comment">// ä½¿ç”¨1/4å¯ç”¨å†…å­˜  </span>
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-comment">// å‡è®¾æ¯ä¸ªç¼“å­˜æ¡ç›®å¹³å‡å ç”¨ 10KB  </span>
Â  Â  Â  Â  <span class="hljs-keyword">let</span> entrySize <span class="hljs-operator">=</span> <span class="hljs-number">10</span> <span class="hljs-operator">*</span> <span class="hljs-number">1024</span>  
Â  Â  Â  Â  <span class="hljs-keyword">let</span> maxEntries <span class="hljs-operator">=</span> <span class="hljs-type">Int</span>(availableMemory) <span class="hljs-operator">/</span> entrySize  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-comment">// é™åˆ¶åœ¨åˆç†èŒƒå›´å†…  </span>
Â  Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-built_in">min</span>(maxEntries, <span class="hljs-number">500</span>)  
Â  Â  }  
}  
</code></pre>
<p><strong>3. ç¼“å­˜æ€§èƒ½ç›‘æ§</strong></p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheMetrics</span> {  
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> hits: <span class="hljs-type">Int</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>  
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> misses: <span class="hljs-type">Int</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>  
Â  Â Â   
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">recordHit</span>() { hits <span class="hljs-operator">+=</span> <span class="hljs-number">1</span> }  
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">recordMiss</span>() { misses <span class="hljs-operator">+=</span> <span class="hljs-number">1</span> }  
Â  Â Â   
Â  Â  <span class="hljs-keyword">var</span> hitRate: <span class="hljs-type">Double</span> {  
Â  Â  Â  Â  <span class="hljs-keyword">let</span> total <span class="hljs-operator">=</span> hits <span class="hljs-operator">+</span> misses  
Â  Â  Â  Â  <span class="hljs-keyword">guard</span> total <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> <span class="hljs-number">0</span> }  
Â  Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-type">Double</span>(hits) <span class="hljs-operator">/</span> <span class="hljs-type">Double</span>(total)  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">reset</span>() {  
Â  Â  Â  Â  hits <span class="hljs-operator">=</span> <span class="hljs-number">0</span>  
Â  Â  Â  Â  misses <span class="hljs-operator">=</span> <span class="hljs-number">0</span>  
Â  Â  }  
}

<span class="hljs-comment">// åœ¨ç¼“å­˜æœåŠ¡ä¸­ä½¿ç”¨  </span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CachedPhotoAnalysisService</span> {  
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> metrics <span class="hljs-operator">=</span> <span class="hljs-type">CacheMetrics</span>()  
Â  Â Â   
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">analyzePhoto</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">photo</span>: <span class="hljs-type">Photo</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">PhotoDescription</span> {  
Â  Â  Â  Â  <span class="hljs-keyword">let</span> cacheKey <span class="hljs-operator">=</span> <span class="hljs-type">CacheKeyBuilder</span>.keyForPhotoAnalysis(<span class="hljs-operator">...</span>)  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> cached <span class="hljs-operator">=</span> cache.get(for: cacheKey) {  
Â  Â  Â  Â  Â  Â  metrics.recordHit()  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span> cached  
Â  Â  Â  Â  }  
Â  Â  Â  Â Â   
Â  Â  Â  Â  metrics.recordMiss()  
Â  Â  Â  Â  <span class="hljs-comment">// ... ç”Ÿæˆæ–°ç»“æœ  </span>
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">getCacheStats</span>() -&gt; (hitRate: <span class="hljs-type">Double</span>, size: <span class="hljs-type">Int</span>) {  
Â  Â  Â  Â  <span class="hljs-keyword">return</span> (metrics.hitRate, cache.stats.size)  
Â  Â  }  
}  
</code></pre>
<p><strong>4. ç¼“å­˜æ£€æŸ¥æ¸…å•</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ç¼“å­˜é”®æ˜¯å¦åŒ…å«æ‰€æœ‰å½±å“ç»“æœçš„å› ç´ ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦å®ç°äº†åˆé€‚çš„å¤±æ•ˆç­–ç•¥ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ç¼“å­˜å®¹é‡æ˜¯å¦åˆç†ï¼ˆä¸ä¼šå¯¼è‡´å†…å­˜å‹åŠ›ï¼‰ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦ç›‘æ§äº†ç¼“å­˜å‘½ä¸­ç‡ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦å¤„ç†äº†ç¼“å­˜å¤±è´¥çš„æƒ…å†µï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦éœ€è¦æŒä¹…åŒ–ç¼“å­˜ï¼ˆè·¨å¯åŠ¨ä¿æŒï¼‰ï¼Ÿ</li>
</ul>
<p><strong>å‚è€ƒèµ„æº</strong>:</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fonevcat.com%2F2025%2F06%2Ffoundation-models%2F" target="_blank" title="https://onevcat.com/2025/06/foundation-models/" ref="nofollow noopener noreferrer">OneV's Den - Foundation Models å†…å­˜åˆ†æ</a></li>
</ul>
<h4 data-id="heading-68">ä½¿ç”¨ Instruments è¿›è¡Œæ€§èƒ½åˆ†æ</h4>
<p><strong>Instruments</strong> æ˜¯ Apple æä¾›çš„æ€§èƒ½åˆ†æå·¥å…·ï¼Œæœ€æ–°ç‰ˆæœ¬å·²æ·»åŠ  <strong>Foundation Models æ¨¡å—</strong>ï¼Œå¯ä»¥åœ¨ iPhone è®¾å¤‡ä¸Šç›´æ¥è¿›è¡Œæ€§èƒ½åˆ†æï¼Œå¸®åŠ©å¼€å‘è€…ä¼˜åŒ–åº”ç”¨æ€§èƒ½ã€‚</p>
<h5 data-id="heading-69">Instruments Foundation Models æ¨¡å—åŠŸèƒ½</h5>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD  
Â  Â  Start([å¯åŠ¨ Instruments]) --&gt; Select[é€‰æ‹© Foundation Models æ¨¡æ¿]  
Â  Â  Select --&gt; Connect[è¿æ¥ iPhone è®¾å¤‡]  
Â  Â  Connect --&gt; Launch[å¯åŠ¨åº”ç”¨]  
Â  Â  Launch --&gt; Record[å¼€å§‹å½•åˆ¶æ€§èƒ½æ•°æ®]  
Â  Â  Record --&gt; Analyze[åˆ†ææ€§èƒ½æŒ‡æ ‡]  
Â  Â Â   
Â  Â  Analyze --&gt; LoadTime[æ¨¡å‹åŠ è½½æ—¶é—´åˆ†æ]  
Â  Â  Analyze --&gt; InferenceTime[æ¨ç†æ—¶é—´åˆ†æ]  
Â  Â  Analyze --&gt; TokenCount[è¾“å…¥ä»¤ç‰Œæ•°é‡åˆ†æ]  
Â  Â  Analyze --&gt; Memory[å†…å­˜ä½¿ç”¨åˆ†æ]  
Â  Â Â   
Â  Â  LoadTime --&gt; Optimize1[ä¼˜åŒ–åŠ è½½ç­–ç•¥]  
Â  Â  InferenceTime --&gt; Optimize2[ä¼˜åŒ– Prompt è®¾è®¡]  
Â  Â  TokenCount --&gt; Optimize3[ä¼˜åŒ–è¾“å…¥é•¿åº¦]  
Â  Â  Memory --&gt; Optimize4[ä¼˜åŒ–å†…å­˜ç®¡ç†]  
Â  Â Â   
Â  Â  style Start fill:#007AFF,color:#fff  
Â  Â  style Select fill:#5AC8FA,color:#000  
Â  Â  style Connect fill:#5AC8FA,color:#000  
Â  Â  style Record fill:#FF9500,color:#fff  
Â  Â  style Analyze fill:#FF9500,color:#fff  
Â  Â  style LoadTime fill:#34C759,color:#fff  
Â  Â  style InferenceTime fill:#34C759,color:#fff  
Â  Â  style TokenCount fill:#34C759,color:#fff  
Â  Â  style Memory fill:#34C759,color:#fff  
</code></pre>
<p><strong>æ ¸å¿ƒåˆ†ææŒ‡æ ‡</strong>:</p>
<ol>
<li>
<p><strong>æ¨¡å‹åŠ è½½æ—¶é—´ï¼ˆModel Load Timeï¼‰</strong><br/>
- æµ‹é‡æ¨¡å‹ä»å­˜å‚¨åŠ è½½åˆ°å†…å­˜å¹¶å‡†å¤‡å°±ç»ªçš„æ—¶é—´<br/>
- å¸®åŠ©è¯†åˆ«é¦–æ¬¡è°ƒç”¨å»¶è¿Ÿé—®é¢˜<br/>
- ä¼˜åŒ–å»ºè®®ï¼šé¢„çƒ­æ¨¡å‹ã€ä¼˜åŒ–å­˜å‚¨ä½ç½®</p>
</li>
<li>
<p><strong>æ¨ç†æ—¶é—´ï¼ˆInference Timeï¼‰</strong><br/>
- æµ‹é‡æ¨¡å‹æ¥æ”¶è¾“å…¥å¹¶ç”Ÿæˆè¾“å‡ºæ‰€éœ€çš„æ—¶é—´<br/>
- è¯†åˆ«æ€§èƒ½ç“¶é¢ˆå’Œä¼˜åŒ–ç‚¹<br/>
- ä¼˜åŒ–å»ºè®®ï¼šç²¾ç®€ Promptã€ä¼˜åŒ– Instructions</p>
</li>
<li>
<p><strong>è¾“å…¥ä»¤ç‰Œæ•°é‡ï¼ˆInput Token Countï¼‰</strong><br/>
- ç»Ÿè®¡æ¯æ¬¡è¯·æ±‚çš„è¾“å…¥ä»¤ç‰Œæ€»æ•°<br/>
- å¸®åŠ©ä¼˜åŒ–è¾“å…¥é•¿åº¦ï¼Œå‡å°‘æˆæœ¬<br/>
- ä¼˜åŒ–å»ºè®®ï¼šç²¾ç®€ä¸Šä¸‹æ–‡ã€ä½¿ç”¨æ‘˜è¦</p>
</li>
<li>
<p><strong>å†…å­˜ä½¿ç”¨ï¼ˆMemory Usageï¼‰</strong><br/>
- ç›‘æ§æ¨¡å‹è¿è¡Œæ—¶çš„å†…å­˜å ç”¨<br/>
- è¯†åˆ«å†…å­˜æ³„æ¼å’Œå³°å€¼ä½¿ç”¨<br/>
- ä¼˜åŒ–å»ºè®®ï¼šåŠæ—¶é‡Šæ”¾ Sessionã€ç®¡ç†ä¸Šä¸‹æ–‡çª—å£</p>
</li>
</ol>
<h5 data-id="heading-70">ä½¿ç”¨æ­¥éª¤</h5>
<p><strong>æ­¥éª¤1: æ‰“å¼€ Instruments</strong></p>
<ol>
<li>åœ¨ Xcode ä¸­ï¼Œé€‰æ‹© <strong>Product â†’ Profile</strong>ï¼ˆæˆ–æŒ‰ <code>âŒ˜I</code>ï¼‰</li>
<li>é€‰æ‹© <strong>Foundation Models</strong> æ¨¡æ¿</li>
<li>é€‰æ‹©ç›®æ ‡è®¾å¤‡ï¼ˆå¿…é¡»æ˜¯æ”¯æŒ Apple Intelligence çš„çœŸå®è®¾å¤‡ï¼‰</li>
</ol>
<p><strong>æ­¥éª¤2: é…ç½®åˆ†æé€‰é¡¹</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR  
Â  Â  Config[é…ç½®åˆ†æé€‰é¡¹] --&gt; Option1[æ¨¡å‹åŠ è½½æ—¶é—´è¿½è¸ª]  
Â  Â  Config --&gt; Option2[æ¨ç†æ—¶é—´è¿½è¸ª]  
Â  Â  Config --&gt; Option3[ä»¤ç‰Œè®¡æ•°è¿½è¸ª]  
Â  Â  Config --&gt; Option4[å†…å­˜ä½¿ç”¨è¿½è¸ª]  
Â  Â Â   
Â  Â  Option1 --&gt; Start[å¼€å§‹å½•åˆ¶]  
Â  Â  Option2 --&gt; Start  
Â  Â  Option3 --&gt; Start  
Â  Â  Option4 --&gt; Start  
Â  Â Â   
Â  Â  style Config fill:#007AFF,color:#fff  
Â  Â  style Option1 fill:#5AC8FA,color:#000  
Â  Â  style Option2 fill:#5AC8FA,color:#000  
Â  Â  style Option3 fill:#5AC8FA,color:#000  
Â  Â  style Option4 fill:#5AC8FA,color:#000  
Â  Â  style Start fill:#34C759,color:#fff  
</code></pre>
<p><strong>æ­¥éª¤3: æ‰§è¡Œæ“ä½œå¹¶åˆ†æ</strong></p>
<p>åœ¨åº”ç”¨ä¸­ä½¿ç”¨ Foundation Models åŠŸèƒ½ï¼ŒInstruments ä¼šè‡ªåŠ¨è®°å½•ï¼š</p>
<ul>
<li>æ¯æ¬¡ <code>LanguageModelSession.respond()</code> è°ƒç”¨çš„æ—¶é—´çº¿</li>
<li>æ¨¡å‹åŠ è½½äº‹ä»¶å’Œè€—æ—¶</li>
<li>è¾“å…¥ä»¤ç‰Œæ•°é‡ç»Ÿè®¡</li>
<li>å†…å­˜åˆ†é…å’Œé‡Šæ”¾æƒ…å†µ</li>
</ul>
<p><strong>æ­¥éª¤4: æŸ¥çœ‹åˆ†æç»“æœ</strong></p>
<p>Instruments ä¼šæ˜¾ç¤ºä»¥ä¸‹è§†å›¾ï¼š</p>
<ul>
<li><strong>æ—¶é—´çº¿è§†å›¾</strong>: æ˜¾ç¤ºæ¨¡å‹åŠ è½½å’Œæ¨ç†çš„æ—¶é—´åˆ†å¸ƒ</li>
<li><strong>ç»Ÿè®¡è§†å›¾</strong>: æ˜¾ç¤ºå¹³å‡/æœ€å¤§/æœ€å°æ¨ç†æ—¶é—´</li>
<li><strong>ä»¤ç‰Œç»Ÿè®¡</strong>: æ˜¾ç¤ºè¾“å…¥ä»¤ç‰Œæ•°é‡åˆ†å¸ƒ</li>
<li><strong>å†…å­˜è§†å›¾</strong>: æ˜¾ç¤ºå†…å­˜ä½¿ç”¨è¶‹åŠ¿</li>
</ul>
<h5 data-id="heading-71">æ€§èƒ½ä¼˜åŒ–å®è·µç¤ºä¾‹</h5>
<p><strong>åœºæ™¯1: ä¼˜åŒ–é¦–æ¬¡è°ƒç”¨å»¶è¿Ÿ</strong></p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// åœ¨ Instruments ä¸­è§‚å¯Ÿæ¨¡å‹åŠ è½½æ—¶é—´  </span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PhotoAnalysisService</span> {  
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">analyzePhoto</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">photo</span>: <span class="hljs-type">Photo</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">PhotoDescription</span> {  
Â  Â  Â  Â  <span class="hljs-comment">// Instruments ä¼šè®°å½•è¿™é‡Œçš„æ¨¡å‹åŠ è½½æ—¶é—´  </span>
Â  Â  Â  Â  <span class="hljs-keyword">let</span> session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>()  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-comment">// å¦‚æœåŠ è½½æ—¶é—´è¿‡é•¿ï¼Œè€ƒè™‘é¢„çƒ­  </span>
Â  Â  Â  Â  <span class="hljs-comment">// åœ¨åº”ç”¨å¯åŠ¨æ—¶æå‰åŠ è½½æ¨¡å‹  </span>
Â  Â  Â  Â  <span class="hljs-keyword">let</span> response <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(  
Â  Â  Â  Â  Â  Â  to: <span class="hljs-type">Prompt</span>(<span class="hljs-string">"åˆ†æç…§ç‰‡"</span>),  
Â  Â  Â  Â  Â  Â  generating: <span class="hljs-type">PhotoDescription</span>.<span class="hljs-keyword">self</span>  
Â  Â  Â  Â  )  
Â  Â  Â  Â  <span class="hljs-keyword">return</span> response.content  
Â  Â  }  
}  
</code></pre>
<p><strong>ä¼˜åŒ–å»ºè®®</strong>:</p>
<ul>
<li>å¦‚æœ Instruments æ˜¾ç¤ºé¦–æ¬¡è°ƒç”¨å»¶è¿Ÿ &gt; 2ç§’ï¼Œè€ƒè™‘åœ¨åº”ç”¨å¯åŠ¨æ—¶é¢„çƒ­æ¨¡å‹</li>
<li>ä½¿ç”¨ <code>ModelPrewarmer</code> åœ¨åå°é¢„çƒ­ï¼Œé¿å…ç”¨æˆ·é¦–æ¬¡ä½¿ç”¨æ—¶ç­‰å¾…</li>
</ul>
<p><strong>åœºæ™¯2: ä¼˜åŒ– Prompt é•¿åº¦</strong></p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// åœ¨ Instruments ä¸­è§‚å¯Ÿè¾“å…¥ä»¤ç‰Œæ•°é‡  </span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">analyzePhotoWithMetadata</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">photo</span>: <span class="hljs-type">Photo</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">PhotoDescription</span> {  
Â  Â  <span class="hljs-keyword">let</span> session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>()  
Â  Â Â   
Â  Â  <span class="hljs-comment">// âŒ ä¸å¥½çš„åšæ³•ï¼šåŒ…å«è¿‡å¤šå…ƒæ•°æ®ï¼Œä»¤ç‰Œæ•°é‡è¿‡å¤š  </span>
Â  Â  <span class="hljs-keyword">let</span> longPrompt <span class="hljs-operator">=</span> <span class="hljs-string">"""  
Â  Â  Â  Â  åˆ†æç…§ç‰‡ï¼š  
Â  Â  Â  Â  - æ‹æ‘„æ—¶é—´: <span class="hljs-subst">\(photo.date)</span>  
Â  Â  Â  Â  - æ‹æ‘„åœ°ç‚¹: <span class="hljs-subst">\(photo.location <span class="hljs-operator">??</span> <span class="hljs-string">"æœªçŸ¥"</span>)</span>  
Â  Â  Â  Â  - EXIFä¿¡æ¯: <span class="hljs-subst">\(photo.exifInfo)</span>  
Â  Â  Â  Â  - æ–‡ä»¶å¤§å°: <span class="hljs-subst">\(photo.fileSize)</span>MB  
Â  Â  Â  Â  - åˆ†è¾¨ç‡: <span class="hljs-subst">\(photo.resolution)</span>  
Â  Â  Â  Â  - ç›¸æœºå‹å·: <span class="hljs-subst">\(photo.cameraModel)</span>  
Â  Â  Â  Â  - ISO: <span class="hljs-subst">\(photo.iso)</span>  
Â  Â  Â  Â  - å…‰åœˆ: <span class="hljs-subst">\(photo.aperture)</span>  
Â  Â  Â  Â  - å¿«é—¨é€Ÿåº¦: <span class="hljs-subst">\(photo.shutterSpeed)</span>  
Â  Â  Â  Â  ... æ›´å¤šå…ƒæ•°æ®  
Â  Â  """</span>  
Â  Â Â   
Â  Â  <span class="hljs-comment">// âœ… å¥½çš„åšæ³•ï¼šåªåŒ…å«å…³é”®ä¿¡æ¯ï¼Œå‡å°‘ä»¤ç‰Œæ•°é‡  </span>
Â  Â  <span class="hljs-keyword">let</span> optimizedPrompt <span class="hljs-operator">=</span> <span class="hljs-string">"""  
Â  Â  Â  Â  åˆ†æç…§ç‰‡ï¼š  
Â  Â  Â  Â  - æ—¶é—´: <span class="hljs-subst">\(photo.date)</span>  
Â  Â  Â  Â  - åœ°ç‚¹: <span class="hljs-subst">\(photo.location <span class="hljs-operator">??</span> <span class="hljs-string">"æœªçŸ¥"</span>)</span>  
Â  Â  Â  Â  - å…³é”®ä¿¡æ¯: <span class="hljs-subst">\(photo.keyMetadata)</span>  
Â  Â  """</span>  
Â  Â Â   
Â  Â  <span class="hljs-keyword">let</span> response <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(  
Â  Â  Â  Â  to: <span class="hljs-type">Prompt</span>(optimizedPrompt),  
Â  Â  Â  Â  generating: <span class="hljs-type">PhotoDescription</span>.<span class="hljs-keyword">self</span>  
Â  Â  )  
Â  Â  <span class="hljs-keyword">return</span> response.content  
}  
</code></pre>
<p><strong>ä¼˜åŒ–å»ºè®®</strong>:</p>
<ul>
<li>ä½¿ç”¨ Instruments ç›‘æ§è¾“å…¥ä»¤ç‰Œæ•°é‡</li>
<li>å¦‚æœå¹³å‡ä»¤ç‰Œæ•°é‡ &gt; 1000ï¼Œè€ƒè™‘ç²¾ç®€ Prompt</li>
<li>ç§»é™¤ä¸å¿…è¦çš„å…ƒæ•°æ®ï¼Œåªä¿ç•™å…³é”®ä¿¡æ¯</li>
</ul>
<p><strong>åœºæ™¯3: è¯†åˆ«æ€§èƒ½ç“¶é¢ˆ</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD  
Â  Â  Profile[ä½¿ç”¨ Instruments åˆ†æ] --&gt; Check1{æ¨¡å‹åŠ è½½æ—¶é—´&lt;br/&gt;æ˜¯å¦è¿‡é•¿?}  
Â  Â  Check1 --&gt;|æ˜¯| Action1[é¢„çƒ­æ¨¡å‹&lt;br/&gt;ä¼˜åŒ–åŠ è½½ç­–ç•¥]  
Â  Â  Check1 --&gt;|å¦| Check2{æ¨ç†æ—¶é—´&lt;br/&gt;æ˜¯å¦è¿‡é•¿?}  
Â  Â Â   
Â  Â  Check2 --&gt;|æ˜¯| Action2[ç²¾ç®€ Prompt&lt;br/&gt;ä¼˜åŒ– Instructions]  
Â  Â  Check2 --&gt;|å¦| Check3{ä»¤ç‰Œæ•°é‡&lt;br/&gt;æ˜¯å¦è¿‡å¤š?}  
Â  Â Â   
Â  Â  Check3 --&gt;|æ˜¯| Action3[å‡å°‘ä¸Šä¸‹æ–‡&lt;br/&gt;ä½¿ç”¨æ‘˜è¦]  
Â  Â  Check3 --&gt;|å¦| Check4{å†…å­˜ä½¿ç”¨&lt;br/&gt;æ˜¯å¦å¼‚å¸¸?}  
Â  Â Â   
Â  Â  Check4 --&gt;|æ˜¯| Action4[ç®¡ç†ä¸Šä¸‹æ–‡çª—å£&lt;br/&gt;åŠæ—¶é‡Šæ”¾ Session]  
Â  Â  Check4 --&gt;|å¦| Success[æ€§èƒ½ä¼˜åŒ–å®Œæˆ]  
Â  Â Â   
Â  Â  Action1 --&gt; Success  
Â  Â  Action2 --&gt; Success  
Â  Â  Action3 --&gt; Success  
Â  Â  Action4 --&gt; Success  
Â  Â Â   
Â  Â  style Profile fill:#007AFF,color:#fff  
Â  Â  style Check1 fill:#FF9500,color:#fff  
Â  Â  style Check2 fill:#FF9500,color:#fff  
Â  Â  style Check3 fill:#FF9500,color:#fff  
Â  Â  style Check4 fill:#FF9500,color:#fff  
Â  Â  style Action1 fill:#34C759,color:#fff  
Â  Â  style Action2 fill:#34C759,color:#fff  
Â  Â  style Action3 fill:#34C759,color:#fff  
Â  Â  style Action4 fill:#34C759,color:#fff  
Â  Â  style Success fill:#007AFF,color:#fff  
</code></pre>
<h5 data-id="heading-72">Instruments åˆ†ææœ€ä½³å®è·µ</h5>
<p><strong>1. å»ºç«‹æ€§èƒ½åŸºå‡†</strong></p>
<p>åœ¨ä¼˜åŒ–å‰ï¼Œå…ˆå»ºç«‹æ€§èƒ½åŸºå‡†ï¼š</p>
<ul>
<li>è®°å½•é¦–æ¬¡è°ƒç”¨å»¶è¿Ÿ</li>
<li>è®°å½•å¹³å‡æ¨ç†æ—¶é—´</li>
<li>è®°å½•å…¸å‹åœºæ™¯çš„ä»¤ç‰Œæ•°é‡</li>
<li>è®°å½•å³°å€¼å†…å­˜ä½¿ç”¨</li>
</ul>
<p><strong>2. å¯¹æ¯”ä¼˜åŒ–æ•ˆæœ</strong></p>
<p>æ¯æ¬¡ä¼˜åŒ–åï¼Œä½¿ç”¨ Instruments å¯¹æ¯”ï¼š</p>
<ul>
<li>ä¼˜åŒ–å‰åçš„æ—¶é—´å¯¹æ¯”</li>
<li>ä»¤ç‰Œæ•°é‡å˜åŒ–</li>
<li>å†…å­˜ä½¿ç”¨æ”¹å–„</li>
</ul>
<p><strong>3. å…³æ³¨å…³é”®è·¯å¾„</strong></p>
<p>é‡ç‚¹å…³æ³¨ç”¨æˆ·æ„ŸçŸ¥æ˜æ˜¾çš„è·¯å¾„ï¼š</p>
<ul>
<li>é¦–æ¬¡è°ƒç”¨å»¶è¿Ÿï¼ˆå½±å“ç¬¬ä¸€å°è±¡ï¼‰</li>
<li>å¸¸è§æ“ä½œçš„æ¨ç†æ—¶é—´ï¼ˆå½±å“æ—¥å¸¸ä½“éªŒï¼‰</li>
<li>å³°å€¼å†…å­˜ä½¿ç”¨ï¼ˆå½±å“ç¨³å®šæ€§ï¼‰</li>
</ul>
<p><strong>4. çœŸå®è®¾å¤‡æµ‹è¯•</strong></p>
<p>âš ï¸ <strong>é‡è¦</strong>: Foundation Models åœ¨æ¨¡æ‹Ÿå™¨ä¸Šä¸å¯ç”¨ï¼Œå¿…é¡»åœ¨çœŸå®è®¾å¤‡ä¸Šä½¿ç”¨ Instruments åˆ†æã€‚</p>
<p><strong>å‚è€ƒèµ„æº</strong>:</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Fxcode%2Finstruments" target="_blank" title="https://developer.apple.com/documentation/xcode/instruments" ref="nofollow noopener noreferrer">Apple Developer - Instruments</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fzvayivqt0ufji%2Farticle%2Fdetails%2F149374995" target="_blank" title="https://blog.csdn.net/zvayivqt0ufji/article/details/149374995" ref="nofollow noopener noreferrer">CSDN - Foundation Models æ€§èƒ½åˆ†æ</a></li>
</ul>
<h3 data-id="heading-73">4.3 Foundation Models çš„è¾¹ç•Œå’Œé™åˆ¶</h3>
<p>äº†è§£ Foundation Models çš„è¾¹ç•Œå’Œé™åˆ¶ï¼Œå¯¹äºåœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨è‡³å…³é‡è¦ã€‚æœ¬èŠ‚åŸºäºå®é™…æµ‹è¯•æ•°æ®ï¼Œå¸®åŠ©ä½ ç†è§£æ¡†æ¶çš„èƒ½åŠ›è¾¹ç•Œã€‚</p>
<h4 data-id="heading-74">æ ¸å¿ƒé™åˆ¶æ±‡æ€»</h4>



































<table><thead><tr><th>ç±»åˆ«</th><th>é™åˆ¶/ç‰¹å¾</th><th>è¯¦ç»†è¯´æ˜</th></tr></thead><tbody><tr><td><strong>ä¸Šä¸‹æ–‡çª—å£</strong></td><td>4096 tokens</td><td>â€¢ å®é™…é™åˆ¶ï¼š4096 tokensï¼ˆä¸æ˜¯è®­ç»ƒæ—¶çš„ 65Kï¼‰<br/>â€¢ çº¦æ”¯æŒ 10-20 è½®å¯¹è¯<br/>â€¢ éœ€è¦è®¾è®¡ä¸Šä¸‹æ–‡ç®¡ç†ç­–ç•¥</td></tr><tr><td><strong>å†…å­˜æ¶ˆè€—</strong></td><td>1.0-1.5GB</td><td>â€¢ æ¨¡å‹æƒé‡ï¼š~750MBï¼ˆ3B å‚æ•° Ã— 2-bit é‡åŒ–ï¼‰<br/>â€¢ KV Cacheï¼š~300-600MBï¼ˆ8-bit é‡åŒ–ï¼Œ37.5% å‡å°‘ä¼˜åŒ–ï¼‰<br/>â€¢ æ¡†æ¶å¼€é”€ï¼š~100-200MB</td></tr><tr><td><strong>å¹¶å‘æ€§èƒ½</strong></td><td>å• session æ­£å¸¸</td><td>â€¢ å• sessionï¼šiPhone 10-30 tokens/sï¼ŒM2 Pro ~30 tokens/s<br/>â€¢ å¤š sessionï¼šæ¯ä¸ª session é™è‡³çº¦ 1 token/s<br/>â€¢ <strong>å»ºè®®</strong>ï¼šä½¿ç”¨é˜Ÿåˆ—ä¸²è¡Œè®¿é—®ï¼Œé¿å…å¹¶å‘ session</td></tr><tr><td><strong>ç»“æ„åŒ–ç”Ÿæˆ</strong></td><td>Schema å¼€é”€</td><td>â€¢ æ¯ä¸ª <code>@Generable</code> å±æ€§çº¦å¢åŠ  30 tokens<br/>â€¢ è®¾è®¡å¤æ‚æ•°æ®ç»“æ„æ—¶éœ€è¦è€ƒè™‘å¼€é”€<br/>â€¢ å½±å“ä¸Šä¸‹æ–‡çª—å£ä½¿ç”¨</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>æ–‡æœ¬å¤„ç†ä¸ºä¸»</td><td><strong>âœ… é€‚åˆ</strong>ï¼šæ–‡æœ¬æ‘˜è¦ã€å†…å®¹åˆ†ç±»ã€ç»“æ„åŒ–æå–ã€è‡ªç„¶è¯­è¨€ç†è§£<br/><strong>âŒ ä¸é€‚åˆ</strong>ï¼šæ•°å­¦è®¡ç®—ã€ä»£ç ç”Ÿæˆã€å¤æ‚æ¨ç†ã€æœ€æ–°ä¿¡æ¯ï¼ˆè®­ç»ƒæ•°æ®æˆªæ­¢ 2023å¹´10æœˆï¼‰</td></tr></tbody></table>
<h4 data-id="heading-75">é€‚ç”¨åœºæ™¯ä¸ä¸é€‚ç”¨åœºæ™¯</h4>
<p><strong>âœ… é€‚åˆçš„åœºæ™¯</strong>:</p>
<p>æ ¹æ®å®é™…æµ‹è¯•ï¼ŒFoundation Models åœ¨ä»¥ä¸‹åœºæ™¯è¡¨ç°ä¸é”™ï¼š</p>
<ul>
<li><strong>æ–‡æœ¬æ‘˜è¦</strong>: ç”Ÿæˆå†…å®¹æ‘˜è¦ã€æå–å…³é”®ä¿¡æ¯</li>
<li><strong>å†…å®¹åˆ†ç±»</strong>: å¯¹æ–‡æœ¬ã€ç…§ç‰‡ç­‰å†…å®¹è¿›è¡Œåˆ†ç±»</li>
<li><strong>ç»“æ„åŒ–æ•°æ®æå–</strong>: ä»éç»“æ„åŒ–æ–‡æœ¬ä¸­æå–ç»“æ„åŒ–ä¿¡æ¯</li>
<li><strong>è‡ªç„¶è¯­è¨€ç†è§£</strong>: ç†è§£ç”¨æˆ·æ„å›¾ã€è§£ææŸ¥è¯¢</li>
</ul>
<p><strong>âŒ ä¸é€‚åˆçš„åœºæ™¯</strong>:</p>
<ul>
<li><strong>æ•°å­¦è®¡ç®—</strong>: æ¨¡å‹ä¸é€‚åˆè¿›è¡Œç²¾ç¡®çš„æ•°å­¦è®¡ç®—</li>
<li><strong>ä»£ç ç”Ÿæˆ</strong>: ä»£ç ç”Ÿæˆèƒ½åŠ›æœ‰é™</li>
<li><strong>å¤æ‚æ¨ç†</strong>: å¤æ‚é€»è¾‘æ¨ç†èƒ½åŠ›æœ‰é™</li>
<li><strong>æœ€æ–°ä¿¡æ¯</strong>: è®­ç»ƒæ•°æ®æˆªæ­¢åˆ° 2023 å¹´ 10 æœˆï¼Œä¸–ç•ŒçŸ¥è¯†æœ‰é™</li>
</ul>
<h4 data-id="heading-76">æ¸©åº¦å‚æ•°æ•æ„Ÿæ€§</h4>
<p><strong>æµ‹è¯•å‘ç°</strong>: æ¸©åº¦å‚æ•°åœ¨ 0.0-2.0 èŒƒå›´å†…è¡¨ç°ç¨³å®šï¼Œæ„å¤–åœ°ä¸æ•æ„Ÿã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨è¿™ä¸ªèŒƒå›´å†…è°ƒæ•´æ¸©åº¦ï¼Œè€Œä¸ä¼šå¯¹è¾“å‡ºè´¨é‡äº§ç”Ÿæ˜¾è‘—å½±å“ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// æ¸©åº¦å‚æ•°è®¾ç½®ç¤ºä¾‹  </span>
<span class="hljs-keyword">let</span> session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>(  
Â  Â  <span class="hljs-comment">// æ¸©åº¦èŒƒå›´ 0.0-2.0 è¡¨ç°ç¨³å®š  </span>
Â  Â  <span class="hljs-comment">// å¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´ï¼Œä½†å½±å“ä¸ä¼šå¾ˆå¤§  </span>
)  
</code></pre>
<h4 data-id="heading-77">å®‰å…¨é˜²æŠ¤æœºåˆ¶</h4>
<p>Foundation Models å†…ç½®äº†ç›¸å½“ä¸¥æ ¼çš„å®‰å…¨é˜²æŠ¤æœºåˆ¶ï¼š</p>
<ul>
<li><strong>å†…å®¹è¿‡æ»¤</strong>: ä¼šåˆ é™¤è¿è§„çš„ transcript æ¡ç›®</li>
<li><strong>è‡ªåŠ¨æ¸…ç†</strong>: æ£€æµ‹åˆ°ä¸å½“å†…å®¹æ—¶ä¼šè‡ªåŠ¨æ¸…ç†å¯¹è¯å†å²</li>
<li><strong>Guardrail</strong>: å†…ç½®å®‰å…¨æŠ¤æ ï¼Œé˜²æ­¢ç”Ÿæˆä¸å½“å†…å®¹</li>
</ul>
<p><strong>å¼€å‘å»ºè®®</strong>:</p>
<ul>
<li>åœ¨è®¾è®¡åº”ç”¨æ—¶ï¼Œè¦è€ƒè™‘å®‰å…¨æœºåˆ¶å¯èƒ½åˆ é™¤éƒ¨åˆ†å¯¹è¯å†…å®¹</li>
<li>å¯¹äºæ•æ„Ÿåœºæ™¯ï¼Œéœ€è¦é¢å¤–çš„è¾“å…¥éªŒè¯å’Œè¾“å‡ºæ£€æŸ¥</li>
<li>ä¸è¦ä¾èµ–æ¨¡å‹å®Œå…¨é˜»æ­¢ä¸å½“å†…å®¹ï¼Œåº”ç”¨å±‚ä¹Ÿéœ€è¦åšé˜²æŠ¤</li>
</ul>
<h4 data-id="heading-78">Apple Foundation Models å¼€å‘æµç¨‹</h4>
<p>Apple Foundation Models çš„å¼€å‘éµå¾ªä¸€ä¸ªå®Œæ•´çš„æœºå™¨å­¦ä¹ ç®¡é“ï¼Œä»æ•°æ®æ”¶é›†åˆ°æœ€ç»ˆéƒ¨ç½²ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR  
Â  Â  subgraph Multimodal["å¤šæ¨¡æ€ + å¤šè¯­è¨€å¤„ç†"]  
Â  Â  Â  Â  D[Data&lt;br/&gt;æ•°æ®æ”¶é›†] --&gt; P[Preprocessing&lt;br/&gt;æ•°æ®é¢„å¤„ç†]  
Â  Â  Â  Â  P --&gt; PT[Pre-Training&lt;br/&gt;é¢„è®­ç»ƒ]  
Â  Â  Â  Â  PT --&gt; POST[Post-Training&lt;br/&gt;åè®­ç»ƒ]  
Â  Â  end  
Â  Â Â   
Â  Â  POST --&gt; OPT[Optimization&lt;br/&gt;æ¨¡å‹ä¼˜åŒ–]  
Â  Â  OPT --&gt; ADAPTERS[Adapters&lt;br/&gt;é€‚é…å™¨å±‚]  
Â  Â  ADAPTERS --&gt; FM[Apple Foundation Models&lt;br/&gt;åŸºç¡€æ¨¡å‹]  
Â  Â Â   
Â  Â  style D fill:#4A90E2,color:#fff  
Â  Â  style P fill:#9B59B6,color:#fff  
Â  Â  style PT fill:#E91E63,color:#fff  
Â  Â  style POST fill:#F39C12,color:#fff  
Â  Â  style OPT fill:#FF9800,color:#fff  
Â  Â  style ADAPTERS fill:#3498DB,color:#fff  
Â  Â  style FM fill:#2ECC71,color:#fff  
</code></pre>
<p><strong>æµç¨‹é˜¶æ®µè¯¦è§£</strong>ï¼š</p>
<h5 data-id="heading-79">1. Dataï¼ˆæ•°æ®æ”¶é›†ï¼‰</h5>
<ul>
<li><strong>ä½œç”¨</strong>: æ”¶é›†ç”¨äºè®­ç»ƒæ¨¡å‹çš„æ•°æ®é›†</li>
<li><strong>ç‰¹ç‚¹</strong>: å¤šæ¨¡æ€ï¼ˆæ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ç­‰ï¼‰å’Œå¤šè¯­è¨€æ•°æ®</li>
<li><strong>é‡è¦æ€§</strong>: æ•°æ®è´¨é‡ç›´æ¥å½±å“æ¨¡å‹æ€§èƒ½</li>
</ul>
<h5 data-id="heading-80">2. Preprocessingï¼ˆæ•°æ®é¢„å¤„ç†ï¼‰</h5>
<ul>
<li><strong>ä½œç”¨</strong>: æ¸…æ´—ã€æ ‡å‡†åŒ–å’Œå‡†å¤‡è®­ç»ƒæ•°æ®</li>
<li><strong>ä»»åŠ¡</strong>:Â <br/>
- æ•°æ®æ¸…æ´—ï¼ˆå»é™¤å™ªå£°ã€é”™è¯¯æ•°æ®ï¼‰<br/>
- æ•°æ®æ ‡æ³¨ï¼ˆä¸ºç›‘ç£å­¦ä¹ å‡†å¤‡æ ‡ç­¾ï¼‰<br/>
- æ•°æ®æ ¼å¼è½¬æ¢ï¼ˆç»Ÿä¸€æ•°æ®æ ¼å¼ï¼‰<br/>
- å¤šè¯­è¨€å¤„ç†ï¼ˆå¤„ç†ä¸åŒè¯­è¨€çš„æ•°æ®ï¼‰</li>
</ul>
<h5 data-id="heading-81">3. Pre-Trainingï¼ˆé¢„è®­ç»ƒï¼‰</h5>
<ul>
<li><strong>ä½œç”¨</strong>: åœ¨å¤§è§„æ¨¡æ— æ ‡æ³¨æ•°æ®ä¸Šè¿›è¡Œè‡ªç›‘ç£å­¦ä¹ </li>
<li><strong>ç›®æ ‡</strong>: è®©æ¨¡å‹å­¦ä¹ é€šç”¨çš„è¯­è¨€è¡¨ç¤ºå’ŒçŸ¥è¯†</li>
<li><strong>ç‰¹ç‚¹</strong>:Â <br/>
- ä½¿ç”¨å¤§é‡æ–‡æœ¬æ•°æ®<br/>
- å­¦ä¹ è¯­è¨€çš„åŸºæœ¬è§„å¾‹å’Œæ¨¡å¼<br/>
- å»ºç«‹åŸºç¡€çš„è¯­ä¹‰ç†è§£èƒ½åŠ›</li>
</ul>
<h5 data-id="heading-82">4. Post-Trainingï¼ˆåè®­ç»ƒï¼‰</h5>
<ul>
<li><strong>ä½œç”¨</strong>: åœ¨é¢„è®­ç»ƒåŸºç¡€ä¸Šè¿›è¡Œè¿›ä¸€æ­¥ä¼˜åŒ–</li>
<li><strong>ä»»åŠ¡</strong>:<br/>
- æŒ‡ä»¤å¾®è°ƒï¼ˆInstruction Tuningï¼‰<br/>
- å¯¹é½è®­ç»ƒï¼ˆAlignment Trainingï¼‰<br/>
- å®‰å…¨è®­ç»ƒï¼ˆSafety Trainingï¼‰<br/>
- è¯„ä¼°å’ŒéªŒè¯æ¨¡å‹æ€§èƒ½</li>
</ul>
<h5 data-id="heading-83">5. Optimizationï¼ˆæ¨¡å‹ä¼˜åŒ–ï¼‰</h5>
<ul>
<li><strong>ä½œç”¨</strong>: é’ˆå¯¹è®¾å¤‡ç«¯éƒ¨ç½²è¿›è¡Œä¼˜åŒ–</li>
<li><strong>ä¼˜åŒ–æŠ€æœ¯</strong>ï¼ˆè¯¦è§ä¸‹ä¸€èŠ‚ï¼‰:<br/>
- 2-bit é‡åŒ–<br/>
- æ¨æµ‹è§£ç å’Œè‰ç¨¿æ¨¡å‹<br/>
- çº¦æŸè§£ç <br/>
- KV Cache ä¼˜åŒ–</li>
<li><strong>ç›®æ ‡</strong>: åœ¨ä¿æŒæ¨¡å‹è´¨é‡çš„åŒæ—¶ï¼Œå‡å°‘å­˜å‚¨å’Œå†…å­˜éœ€æ±‚</li>
</ul>
<h5 data-id="heading-84">6. Adaptersï¼ˆé€‚é…å™¨å±‚ï¼‰</h5>
<ul>
<li><strong>ä½œç”¨</strong>: æä¾›ç‰¹å®šä»»åŠ¡æˆ–é¢†åŸŸçš„é€‚é…æ¥å£</li>
<li><strong>ç‰¹ç‚¹</strong>:Â <br/>
- å¤šä¸ªé€‚é…å™¨å¯ä»¥è¿æ¥åˆ°åŒä¸€ä¸ªåŸºç¡€æ¨¡å‹<br/>
- æ¯ä¸ªé€‚é…å™¨é’ˆå¯¹ä¸åŒçš„ä½¿ç”¨åœºæ™¯<br/>
- å…è®¸åœ¨ä¸ä¿®æ”¹åŸºç¡€æ¨¡å‹çš„æƒ…å†µä¸‹æ‰©å±•åŠŸèƒ½</li>
</ul>
<h5 data-id="heading-85">7. Apple Foundation Modelsï¼ˆåŸºç¡€æ¨¡å‹ï¼‰</h5>
<ul>
<li><strong>ä½œç”¨</strong>: æœ€ç»ˆéƒ¨ç½²çš„è®¾å¤‡ç«¯æ¨¡å‹</li>
<li><strong>ç‰¹ç‚¹</strong>:<br/>
- é€šè¿‡é€‚é…å™¨å±‚è®¿é—®<br/>
- ä¼˜åŒ–åçš„æ¨¡å‹ï¼Œé€‚åˆè®¾å¤‡ç«¯è¿è¡Œ<br/>
- æ”¯æŒå¤šç§ä»»åŠ¡å’Œåº”ç”¨åœºæ™¯</li>
</ul>
<p><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼š</p>
<blockquote>
<p><strong>Responsible AI principles inform all steps</strong>ï¼ˆè´Ÿè´£ä»» AI åŸåˆ™è´¯ç©¿æ‰€æœ‰æ­¥éª¤ï¼‰</p>
</blockquote>
<p>è¿™æ„å‘³ç€åœ¨æ•´ä¸ªå¼€å‘æµç¨‹ä¸­ï¼ŒApple éƒ½éµå¾ªè´Ÿè´£ä»» AI çš„åŸåˆ™ï¼š</p>
<ul>
<li><strong>éšç§ä¿æŠ¤</strong>: æ•°æ®æ”¶é›†å’Œå¤„ç†è¿‡ç¨‹ä¸­ä¿æŠ¤ç”¨æˆ·éšç§</li>
<li><strong>å…¬å¹³æ€§</strong>: ç¡®ä¿æ¨¡å‹å¯¹ä¸åŒç”¨æˆ·ç¾¤ä½“å…¬å¹³</li>
<li><strong>é€æ˜åº¦</strong>: å…¬å¼€æ¨¡å‹èƒ½åŠ›å’Œé™åˆ¶</li>
<li><strong>å®‰å…¨æ€§</strong>: é˜²æ­¢æ¨¡å‹ç”Ÿæˆæœ‰å®³å†…å®¹</li>
<li><strong>å¯è§£é‡Šæ€§</strong>: æä¾›æ¨¡å‹å†³ç­–çš„è§£é‡Š</li>
</ul>
<p><strong>å¤šæ¨¡æ€ + å¤šè¯­è¨€å¤„ç†</strong>ï¼š</p>
<p>å‰å››ä¸ªé˜¶æ®µï¼ˆData â†’ Preprocessing â†’ Pre-Training â†’ Post-Trainingï¼‰è¢«æ ‡è®°ä¸º"å¤šæ¨¡æ€ + å¤šè¯­è¨€"ï¼Œè¯´æ˜ï¼š</p>
<ul>
<li><strong>å¤šæ¨¡æ€</strong>: å¤„ç†æ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ç­‰å¤šç§æ•°æ®ç±»å‹</li>
<li><strong>å¤šè¯­è¨€</strong>: æ”¯æŒå¤šç§è¯­è¨€çš„è®­ç»ƒå’Œæ¨ç†</li>
<li><strong>ç»Ÿä¸€å¤„ç†</strong>: åœ¨åŒä¸€ä¸ªæµç¨‹ä¸­å¤„ç†ä¸åŒç±»å‹çš„æ•°æ®</li>
</ul>
<p><strong>æµç¨‹å…³ç³»</strong>ï¼š</p>
<pre><code class="hljs">æ•°æ®æ”¶é›† â†’ é¢„å¤„ç† â†’ é¢„è®­ç»ƒ â†’ åè®­ç»ƒ â†’ ä¼˜åŒ– â†’ é€‚é…å™¨ â†’ åŸºç¡€æ¨¡å‹  
Â  â†“ Â  Â  Â  Â  â†“ Â  Â  Â  Â â†“ Â  Â  Â  Â â†“ Â  Â  Â  Â â†“ Â  Â  Â  â†“ Â  Â  Â  Â â†“  
å¤šæ¨¡æ€ Â  æ ‡å‡†åŒ– Â  å­¦ä¹ é€šç”¨ Â ä»»åŠ¡å¯¹é½ Â è®¾å¤‡ä¼˜åŒ– Â ä»»åŠ¡é€‚é… Â æœ€ç»ˆéƒ¨ç½²  
å¤šè¯­è¨€ Â  æ¸…æ´—æ ‡æ³¨ Â è¯­è¨€è¡¨ç¤º Â å®‰å…¨è®­ç»ƒ Â é‡åŒ–å‹ç¼© Â åŠŸèƒ½æ‰©å±• Â ç”¨æˆ·ä½¿ç”¨  
</code></pre>
<p><strong>å®é™…åº”ç”¨</strong>ï¼š</p>
<p>è¿™ä¸ªæµç¨‹ç¡®ä¿äº†ï¼š</p>
<ol>
<li><strong>é«˜è´¨é‡</strong>: é€šè¿‡å®Œæ•´çš„è®­ç»ƒæµç¨‹ä¿è¯æ¨¡å‹è´¨é‡</li>
<li><strong>è®¾å¤‡å…¼å®¹</strong>: é€šè¿‡ä¼˜åŒ–é˜¶æ®µç¡®ä¿èƒ½åœ¨è®¾å¤‡ç«¯è¿è¡Œ</li>
<li><strong>çµæ´»æ‰©å±•</strong>: é€šè¿‡é€‚é…å™¨å±‚æ”¯æŒä¸åŒåº”ç”¨åœºæ™¯</li>
<li><strong>è´Ÿè´£ä»»</strong>: åœ¨æ•´ä¸ªæµç¨‹ä¸­è´¯å½» AI ä¼¦ç†åŸåˆ™</li>
</ol>
<p><strong>ğŸ“‹ å®˜æ–¹æ¥æºé“¾æ¥</strong>ï¼š</p>
<p>è¯¥æµç¨‹å›¾å¯èƒ½æ¥è‡ªä»¥ä¸‹å®˜æ–¹èµ„æºï¼ˆå»ºè®®æŒ‰é¡ºåºæŸ¥æ‰¾ï¼‰ï¼š</p>
<ol>
<li>
<p><strong>WWDC è§†é¢‘å’Œå¹»ç¯ç‰‡</strong>ï¼š<br/>
- ğŸ¥ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fvideos%2Fplay%2Fwwdc2024%2F10154%2F" target="_blank" title="https://developer.apple.com/videos/play/wwdc2024/10154/" ref="nofollow noopener noreferrer">Meet the Foundation Models framework</a>ï¼ˆWWDC 2024ï¼‰<br/>
- ğŸ¥ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fvideos%2Fwwdc2024%2F" target="_blank" title="https://developer.apple.com/videos/wwdc2024/" ref="nofollow noopener noreferrer">WWDC 2024 æ‰€æœ‰ Session</a><br/>
- ğŸ¥ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fvideos%2F" target="_blank" title="https://developer.apple.com/videos/" ref="nofollow noopener noreferrer">WWDC 2025 ç›¸å…³ Session</a>ï¼ˆå¦‚æœæœ‰ï¼‰</p>
</li>
<li>
<p><strong>Apple Developer æ–‡æ¡£</strong>ï¼š<br/>
- ğŸ“š <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Ffoundationmodels" target="_blank" title="https://developer.apple.com/documentation/foundationmodels" ref="nofollow noopener noreferrer">Foundation Models Framework æ–‡æ¡£</a><br/>
- ğŸ“š <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fapple-intelligence%2Fresources%2F" target="_blank" title="https://developer.apple.com/apple-intelligence/resources/" ref="nofollow noopener noreferrer">Apple Intelligence èµ„æºé¡µé¢</a><br/>
- ğŸ“š <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fmachine-learning%2Fwhats-new%2F" target="_blank" title="https://developer.apple.com/machine-learning/whats-new/" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ æ–°åŠŸèƒ½é¡µé¢</a></p>
</li>
<li>
<p><strong>Apple æ–°é—»ç¨¿å’ŒæŠ€æœ¯æŠ¥å‘Š</strong>ï¼š<br/>
- ğŸ“° <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.apple.com%2Fnewsroom%2F2025%2F09%2Fapples-foundation-models-framework-unlocks-new-intelligent-app-experiences%2F" target="_blank" title="https://www.apple.com/newsroom/2025/09/apples-foundation-models-framework-unlocks-new-intelligent-app-experiences/" ref="nofollow noopener noreferrer">Apple Foundation Models Framework æ–°é—»ç¨¿</a><br/>
- ğŸ“„ Apple Intelligence æŠ€æœ¯æŠ¥å‘Šï¼ˆå¦‚æœå·²å‘å¸ƒï¼‰</p>
</li>
<li>
<p><strong>Apple Intelligence ç›¸å…³é¡µé¢</strong>ï¼š<br/>
- ğŸŒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.apple.com%2Fapple-intelligence%2F" target="_blank" title="https://www.apple.com/apple-intelligence/" ref="nofollow noopener noreferrer">Apple Intelligence å®˜ç½‘</a><br/>
- ğŸŒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fapple-intelligence%2F" target="_blank" title="https://developer.apple.com/apple-intelligence/" ref="nofollow noopener noreferrer">Apple Developer - Apple Intelligence</a></p>
</li>
</ol>
<p><strong>âš ï¸ æŸ¥æ‰¾å»ºè®®</strong>ï¼š</p>
<p>å¦‚æœæ— æ³•åœ¨ä¸Šè¿°é“¾æ¥ä¸­æ‰¾åˆ°ç¡®åˆ‡çš„æµç¨‹å›¾ï¼Œå»ºè®®ï¼š</p>
<ol>
<li>æŸ¥çœ‹ WWDC 2024/2025 ç›¸å…³ Session çš„å¹»ç¯ç‰‡ï¼ˆé€šå¸¸åœ¨è§†é¢‘é¡µé¢å¯ä¸‹è½½ï¼‰</li>
<li>æŸ¥çœ‹ Apple Developer æ–‡æ¡£ä¸­çš„å›¾ç‰‡å’Œå›¾è¡¨</li>
<li>æŸ¥çœ‹ Apple Intelligence æŠ€æœ¯æŠ¥å‘Šï¼ˆå¦‚æœå·²å‘å¸ƒï¼‰</li>
<li>åœ¨ Apple Developer Forums ä¸­æœç´¢ç›¸å…³è®¨è®º</li>
</ol>
<p><strong>ğŸ’¡ æç¤º</strong>ï¼š</p>
<ul>
<li>è¯¥æµç¨‹å›¾å¯èƒ½å‡ºç°åœ¨ WWDC æ¼”ç¤ºçš„å¹»ç¯ç‰‡ä¸­</li>
<li>ä¹Ÿå¯èƒ½å‡ºç°åœ¨ Apple Intelligence çš„æŠ€æœ¯æŠ¥å‘Šæˆ–ç™½çš®ä¹¦ä¸­</li>
<li>å¦‚æœå›¾ç‰‡æ¥è‡ªç¬¬ä¸‰æ–¹æŠ€æœ¯åˆ†ææ–‡ç« ï¼Œå»ºè®®æ ‡æ³¨æ¥æº</li>
</ul>
<hr/>
<h4 data-id="heading-86">æ¨¡å‹ä¼˜åŒ–æŠ€æœ¯</h4>
<p>è‹¹æœé’ˆå¯¹è®¾å¤‡ç«¯åœºæ™¯åšäº†å¤§é‡ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR  
Â  Â  subgraph Optimization [ä¼˜åŒ–æŠ€æœ¯]  
Â  Â  Â  Â  Q1[2-bit é‡åŒ– ä¿æŒè´¨é‡]  
Â  Â  Â  Â  Q2[æ¨æµ‹è§£ç  Draft Model]  
Â  Â  Â  Â  Q3[çº¦æŸè§£ç  ç»“æ„åŒ–è¾“å‡º]  
Â  Â  Â  Â  Q4[KV Cacheä¼˜åŒ– 8-bit + 37.5%å‡å°‘]  
Â  Â  end  
Â  Â Â   
Â  Â  subgraph æ•ˆæœ  
Â  Â  Â  Â  E1[å‡å°‘å­˜å‚¨]  
Â  Â  Â  Â  E2[æå‡é€Ÿåº¦]  
Â  Â  Â  Â  E3[ä¿è¯å¯é æ€§]  
Â  Â  Â  Â  E4[é™ä½å†…å­˜]  
Â  Â  end  
Â  Â Â   
Â  Â  Q1 --&gt; E1  
Â  Â  Q2 --&gt; E2  
Â  Â  Q3 --&gt; E3  
Â  Â  Q4 --&gt; E4  
Â  Â Â   
Â  Â  style Q1 fill:#007AFF,color:#fff  
Â  Â  style Q2 fill:#5AC8FA,color:#000  
Â  Â  style Q3 fill:#34C759,color:#fff  
Â  Â  style Q4 fill:#FF9500,color:#fff  
</code></pre>
<p><strong>ä¼˜åŒ–æŠ€æœ¯è¯¦ç»†è¯´æ˜</strong>:</p>
<h5 data-id="heading-87">1. 2-bit é‡åŒ–ï¼ˆ2-bit Quantizationï¼‰</h5>
<p><strong>æŠ€æœ¯åŸç†</strong>:</p>
<ul>
<li>å°†æ¨¡å‹æƒé‡ä»ä¼ ç»Ÿçš„ 32 ä½æµ®ç‚¹æ•°ï¼ˆFP32ï¼‰å‹ç¼©åˆ°æ¯æƒé‡ 2 ä½ï¼ˆ2-bitï¼‰</li>
<li>ä½¿ç”¨<strong>é‡åŒ–æ„ŸçŸ¥è®­ç»ƒï¼ˆQuantization-Aware Training, QATï¼‰</strong>ï¼Œåœ¨è®­ç»ƒé˜¶æ®µæ¨¡æ‹Ÿä½ç²¾åº¦é‡åŒ–çš„å½±å“</li>
<li>å¼•å…¥å¯å­¦ä¹ çš„ç¼©æ”¾å› å­ï¼ˆlearnable scaling factorsï¼‰ï¼Œä½¿æ¨¡å‹åœ¨ä½ç²¾åº¦ä¸‹ä»èƒ½ä¿æŒé«˜è´¨é‡è¾“å‡º</li>
<li>ç»“åˆå¯å­¦ä¹ çš„æƒé‡è£å‰ªï¼ˆlearnable weight pruningï¼‰å’Œæƒé‡åˆå§‹åŒ–æ–¹æ³•</li>
</ul>
<p><strong>æ•ˆæœ</strong>:</p>
<ul>
<li><strong>å­˜å‚¨å‡å°‘</strong>: æ¨¡å‹æƒé‡ä» ~12GBï¼ˆFP32ï¼‰å‹ç¼©åˆ° ~750MBï¼ˆ2-bitï¼‰ï¼Œå‹ç¼©æ¯”çº¦ <strong>16:1</strong></li>
<li><strong>å†…å­˜å‡å°‘</strong>: è¿è¡Œæ—¶å†…å­˜å ç”¨å¤§å¹…é™ä½</li>
<li><strong>è´¨é‡ä¿æŒ</strong>: é€šè¿‡ QAT è®­ç»ƒï¼Œæ¨¡å‹è´¨é‡æŸå¤±æœ€å°</li>
</ul>
<p><strong>æ•°æ®æ¥æº</strong>:</p>
<ul>
<li>ğŸ“° <strong>æŠ€æœ¯ç»†èŠ‚</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.oschina.net%2Fnews%2F354610%2Fapple-foundation-models-2025-updates" target="_blank" title="https://www.oschina.net/news/354610/apple-foundation-models-2025-updates" ref="nofollow noopener noreferrer">OSCHINA - Apple Foundation Models 2025 æ›´æ–°</a></li>
<li>âš ï¸ <strong>æ³¨æ„</strong>: Apple å®˜æ–¹æ–‡æ¡£å’Œ WWDC è§†é¢‘ä¸­æœªç›´æ¥æåŠ 2-bit é‡åŒ–çš„å…·ä½“ç»†èŠ‚ï¼Œè¿™äº›ä¿¡æ¯ä¸»è¦æ¥è‡ªç¬¬ä¸‰æ–¹æŠ€æœ¯åˆ†æå’Œå®é™…æµ‹è¯•</li>
</ul>
<h5 data-id="heading-88">2. æ¨æµ‹è§£ç å’Œè‰ç¨¿æ¨¡å‹ï¼ˆSpeculative Decoding &amp; Draft Modelï¼‰</h5>
<p><strong>æŠ€æœ¯åŸç†</strong>:</p>
<ul>
<li><strong>ä¸»æ¨¡å‹</strong>: çº¦ 3B å‚æ•°çš„åŸºç¡€è¯­è¨€æ¨¡å‹ï¼Œè´Ÿè´£æœ€ç»ˆè¾“å‡º</li>
<li><strong>è‰ç¨¿æ¨¡å‹ï¼ˆDraft Modelï¼‰</strong>: çº¦ 300M å‚æ•°çš„å°å‹æ¨¡å‹ï¼Œç”¨äºå¿«é€Ÿç”Ÿæˆåˆæ­¥é¢„æµ‹</li>
<li><strong>å·¥ä½œæµç¨‹</strong>:<br/>
1. è‰ç¨¿æ¨¡å‹å¿«é€Ÿç”Ÿæˆå¤šä¸ªå€™é€‰ tokenï¼ˆæ¨æµ‹è§£ç ï¼‰<br/>
2. ä¸»æ¨¡å‹å¹¶è¡ŒéªŒè¯è¿™äº›å€™é€‰ token<br/>
3. æ¥å—ç¬¦åˆä¸»æ¨¡å‹é¢„æµ‹çš„ tokenï¼Œæ‹’ç»ä¸ç¬¦åˆçš„å¹¶é‡æ–°ç”Ÿæˆ<br/>
4. é€šè¿‡å¹¶è¡ŒéªŒè¯å¤šä¸ª tokenï¼Œæå‡æ•´ä½“ç”Ÿæˆé€Ÿåº¦</li>
</ul>
<p><strong>æ•ˆæœ</strong>:</p>
<ul>
<li><strong>é€Ÿåº¦æå‡</strong>: é€šè¿‡å¹¶è¡ŒéªŒè¯å¤šä¸ªå€™é€‰ tokenï¼Œæ¨ç†é€Ÿåº¦æå‡çº¦ <strong>2-3 å€</strong></li>
<li><strong>è´¨é‡ä¿è¯</strong>: ä¸»æ¨¡å‹éªŒè¯ç¡®ä¿è¾“å‡ºè´¨é‡ä¸å—å½±å“</li>
<li><strong>èµ„æºå¹³è¡¡</strong>: 300M è‰ç¨¿æ¨¡å‹çš„å†…å­˜å¼€é”€ç›¸å¯¹è¾ƒå°</li>
</ul>
<p><strong>æ•°æ®æ¥æº</strong>:</p>
<ul>
<li>ğŸ“° <strong>æŠ€æœ¯åˆ†æ</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aigc.bar%2FAI%25E8%25B5%2584%25E8%25AE%25AF%25E6%2596%2587%25E7%25AB%25A0%2F2025%2F08%2F11%2Fapple-ai-foundation-models-ios-26-deep-dive" target="_blank" title="https://www.aigc.bar/AI%E8%B5%84%E8%AE%AF%E6%96%87%E7%AB%A0/2025/08/11/apple-ai-foundation-models-ios-26-deep-dive" ref="nofollow noopener noreferrer">AIGC.Bar - iOS 26 å¤§æ¨¡å‹æŠ€æœ¯æ·±åº¦è§£æ</a></li>
<li>âš ï¸ <strong>æ³¨æ„</strong>: 3B å’Œ 300M çš„å…·ä½“å‚æ•°æ•°é‡æ¥è‡ªç¬¬ä¸‰æ–¹åˆ†æï¼ŒApple å®˜æ–¹æœªæ˜ç¡®å…¬å¸ƒæ¨¡å‹å‚æ•°è§„æ¨¡</li>
</ul>
<h5 data-id="heading-89">3. çº¦æŸè§£ç ï¼ˆConstrained Decodingï¼‰</h5>
<p><strong>æŠ€æœ¯åŸç†</strong>:</p>
<ul>
<li>åœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­æ–½åŠ ç‰¹å®šçš„ç»“æ„çº¦æŸï¼Œç¡®ä¿è¾“å‡ºç¬¦åˆé¢„æœŸæ ¼å¼</li>
<li>Apple é€šè¿‡ <strong>å¼•å¯¼ç”Ÿæˆï¼ˆGuided Generationï¼‰</strong> å®ç°çº¦æŸè§£ç </li>
<li>å¼€å‘è€…ä½¿ç”¨ <code>@Generable</code> å®å’Œ <code>@Guide</code> æ³¨è§£å®šä¹‰è¾“å‡ºç»“æ„</li>
<li>æ¨¡å‹åœ¨ç”Ÿæˆæ—¶éµå¾ªè¿™äº›ç»“æ„çº¦æŸï¼Œç”Ÿæˆç¬¦åˆ Swift æ•°æ®ç±»å‹çš„è¾“å‡º</li>
</ul>
<p><strong>å®ç°æ–¹å¼</strong>:</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-meta">@Generable</span>  
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">PhotoAnalysis</span> {  
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"ç…§ç‰‡çš„ä¸»é¢˜"</span>)  
Â  Â  <span class="hljs-keyword">let</span> subject: <span class="hljs-type">String</span>  
Â  Â Â   
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"è´¨é‡è¯„åˆ†ï¼Œ1-10åˆ†"</span>)  
Â  Â  <span class="hljs-keyword">let</span> qualityScore: <span class="hljs-type">Int</span>  
}  
</code></pre>
<p><strong>æ•ˆæœ</strong>:</p>
<ul>
<li><strong>å¯é æ€§</strong>: ç¡®ä¿è¾“å‡ºå§‹ç»ˆç¬¦åˆå®šä¹‰çš„ç»“æ„</li>
<li><strong>ç±»å‹å®‰å…¨</strong>: ç›´æ¥ç”Ÿæˆ Swift ç±»å‹ï¼Œæ— éœ€æ‰‹åŠ¨è§£æ JSON</li>
<li><strong>å¼€å‘æ•ˆç‡</strong>: å‡å°‘é”™è¯¯å¤„ç†å’Œç±»å‹è½¬æ¢ä»£ç </li>
</ul>
<p><strong>æ•°æ®æ¥æº</strong>:</p>
<ul>
<li>ğŸ“š <strong>å®˜æ–¹æ–‡æ¡£</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Ffoundationmodels" target="_blank" title="https://developer.apple.com/documentation/foundationmodels" ref="nofollow noopener noreferrer">Apple Developer - Foundation Models</a></li>
<li>ğŸ¥ <strong>WWDC è§†é¢‘</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fvideos%2Fplay%2Fwwdc2024%2F10154%2F" target="_blank" title="https://developer.apple.com/videos/play/wwdc2024/10154/" ref="nofollow noopener noreferrer">Meet the Foundation Models framework</a>ï¼ˆWWDC 2024ï¼‰</li>
<li>ğŸ“° <strong>æŠ€æœ¯æ›´æ–°</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.oschina.net%2Fnews%2F354610%2Fapple-foundation-models-2025-updates" target="_blank" title="https://www.oschina.net/news/354610/apple-foundation-models-2025-updates" ref="nofollow noopener noreferrer">OSCHINA - Apple Foundation Models 2025 æ›´æ–°</a></li>
</ul>
<h5 data-id="heading-90">4. KV Cache ä¼˜åŒ–ï¼ˆKV Cache Optimizationï¼‰</h5>
<p><strong>æŠ€æœ¯åŸç†</strong>:</p>
<ul>
<li><strong>KV Cache</strong>: å­˜å‚¨æ³¨æ„åŠ›æœºåˆ¶ä¸­çš„é”®ï¼ˆKeyï¼‰å’Œå€¼ï¼ˆValueï¼‰ï¼Œé¿å…é‡å¤è®¡ç®—</li>
<li><strong>8-bit é‡åŒ–</strong>: å°† KV Cache ä» FP32 å‹ç¼©åˆ° 8-bit æ•´æ•°</li>
<li><strong>Block Sharing</strong>: é€šè¿‡å—å…±äº«æŠ€æœ¯ï¼Œå‡å°‘ 37.5% çš„ KV Cache å­˜å‚¨éœ€æ±‚</li>
<li><strong>ä¼˜åŒ–æ•ˆæœ</strong>: å†…å­˜å ç”¨ä»ç†è®ºä¸Šçš„ ~1.2GB é™ä½åˆ°å®é™…çš„ ~300-600MB</li>
</ul>
<p><strong>å†…å­˜å ç”¨å¯¹æ¯”</strong>:</p>





























<table><thead><tr><th>ç»„ä»¶</th><th>æœªä¼˜åŒ–</th><th>ä¼˜åŒ–å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ¨¡å‹æƒé‡</td><td>~12GB (FP32)</td><td>~750MB (2-bit)</td><td>2-bit é‡åŒ–</td></tr><tr><td>KV Cache</td><td>~1.2GB (FP32)</td><td>~300-600MB (8-bit + block sharing)</td><td>8-bit é‡åŒ– + 37.5% å‡å°‘</td></tr><tr><td><strong>æ€»è®¡</strong></td><td><strong>~13.2GB</strong></td><td><strong>~1.0-1.5GB</strong></td><td><strong>æ˜¾è‘—é™ä½</strong></td></tr></tbody></table>
<p><strong>æ•ˆæœ</strong>:</p>
<ul>
<li><strong>å†…å­˜é™ä½</strong>: KV Cache å†…å­˜å ç”¨å‡å°‘çº¦ <strong>50-75%</strong></li>
<li><strong>æ€§èƒ½ä¿æŒ</strong>: æ¨ç†é€Ÿåº¦ä¸å—å½±å“</li>
<li><strong>è®¾å¤‡å…¼å®¹</strong>: ä½¿å¾—æ¨¡å‹èƒ½åœ¨ iPhone 15 Pro ç­‰è®¾å¤‡ä¸Šè¿è¡Œ</li>
</ul>
<p><strong>æ•°æ®æ¥æº</strong>:</p>
<ul>
<li>ğŸ“Š <strong>ä¸»è¦æ¥æº</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fonevcat.com%2F2025%2F06%2Ffoundation-models%2F" target="_blank" title="https://onevcat.com/2025/06/foundation-models/" ref="nofollow noopener noreferrer">OneV's Den - Foundation Models è¾¹ç•Œæ¢ç´¢</a>ï¼ˆåŸºäºå®é™…æµ‹è¯•å’Œ Instruments åˆ†æï¼‰</li>
<li>âš ï¸ <strong>æ³¨æ„</strong>: 37.5% block sharing å‡å°‘çš„å…·ä½“æ•°å€¼æ¥è‡ªå®é™…æµ‹è¯•åˆ†æï¼ŒApple å®˜æ–¹æœªæ˜ç¡®å…¬å¸ƒæ­¤ä¼˜åŒ–ç»†èŠ‚</li>
</ul>
<hr/>
<p><strong>ğŸ“‹ æ•°æ®æ¥æºæ€»ç»“</strong>:</p>



































<table><thead><tr><th>ä¼˜åŒ–æŠ€æœ¯</th><th>å®˜æ–¹æ¥æº</th><th>ç¬¬ä¸‰æ–¹åˆ†ææ¥æº</th><th>å¯ä¿¡åº¦</th></tr></thead><tbody><tr><td><strong>2-bit é‡åŒ–</strong></td><td>âŒ æœªæ˜ç¡®æåŠ</td><td>OneV's Denã€OSCHINA</td><td>âš ï¸ éœ€éªŒè¯</td></tr><tr><td><strong>æ¨æµ‹è§£ç </strong></td><td>âŒ æœªæ˜ç¡®æåŠ</td><td>OneV's Denã€AIGC.Bar</td><td>âš ï¸ éœ€éªŒè¯</td></tr><tr><td><strong>çº¦æŸè§£ç </strong></td><td>âœ… WWDC 2024ã€å®˜æ–¹æ–‡æ¡£</td><td>-</td><td>âœ… å®˜æ–¹ç¡®è®¤</td></tr><tr><td><strong>KV Cache ä¼˜åŒ–</strong></td><td>âŒ æœªæ˜ç¡®æåŠ</td><td>OneV's Denï¼ˆå®é™…æµ‹è¯•ï¼‰</td><td>âš ï¸ éœ€éªŒè¯</td></tr></tbody></table>
<p><strong>âš ï¸ é‡è¦è¯´æ˜</strong>:</p>
<ul>
<li><strong>çº¦æŸè§£ç </strong>æ˜¯å”¯ä¸€åœ¨ Apple å®˜æ–¹æ–‡æ¡£å’Œ WWDC è§†é¢‘ä¸­æ˜ç¡®æåŠçš„æŠ€æœ¯</li>
<li>å…¶ä»–ä¸‰é¡¹ä¼˜åŒ–æŠ€æœ¯ï¼ˆ2-bit é‡åŒ–ã€æ¨æµ‹è§£ç ã€KV Cache ä¼˜åŒ–ï¼‰ä¸»è¦æ¥è‡ªç¬¬ä¸‰æ–¹æŠ€æœ¯åˆ†æå’Œå®é™…æµ‹è¯•</li>
<li>å»ºè®®åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œä»¥å®˜æ–¹æ–‡æ¡£å’Œ WWDC è§†é¢‘ä¸ºå‡†</li>
<li>ç¬¬ä¸‰æ–¹åˆ†ææ•°æ®ï¼ˆå¦‚ OneV's Denï¼‰åŸºäºå®é™…æµ‹è¯•ï¼Œå…·æœ‰è¾ƒé«˜å‚è€ƒä»·å€¼ï¼Œä½†éå®˜æ–¹å£°æ˜</li>
</ul>
<p><strong>ğŸ” éªŒè¯å»ºè®®</strong>:</p>
<ol>
<li>æŸ¥çœ‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Ffoundationmodels" target="_blank" title="https://developer.apple.com/documentation/foundationmodels" ref="nofollow noopener noreferrer">Apple Developer Documentation - Foundation Models</a></li>
<li>è§‚çœ‹ WWDC 2024 ç›¸å…³ Session è§†é¢‘</li>
<li>ä½¿ç”¨ Instruments å·¥å…·åœ¨å®é™…è®¾å¤‡ä¸ŠéªŒè¯å†…å­˜å ç”¨</li>
<li>å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fonevcat.com%2F2025%2F06%2Ffoundation-models%2F" target="_blank" title="https://onevcat.com/2025/06/foundation-models/" ref="nofollow noopener noreferrer">OneV's Den æ–‡ç« </a> äº†è§£å®é™…æµ‹è¯•æ•°æ®</li>
</ol>
<h4 data-id="heading-91">æœªæ¥å±•æœ›ä¸æ³¨æ„äº‹é¡¹</h4>
<p><strong>æ¨¡å‹æ›´æ–°</strong>:</p>
<p>è‹¹æœæ˜ç¡®è¡¨ç¤ºæ¨¡å‹ä¼šéšç€ç³»ç»Ÿæ›´æ–°æŒç»­æ”¹è¿›ï¼Œè¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>âš ï¸ <strong>Prompt å…¼å®¹æ€§</strong>: ä½ é’ˆå¯¹æ—§ç‰ˆæœ¬æ¨¡å‹è°ƒå¥½çš„ prompt å¯èƒ½ä¼šåœ¨æ–°ç‰ˆæœ¬æ¨¡å‹ä¸Šä¸å¤ªé€‚ç”¨</li>
<li>ğŸ“‹ <strong>æµ‹è¯•å»ºè®®</strong>: Apple å»ºè®®è®¾å®š test setï¼Œåœ¨æ¯æ¬¡æ¨¡å‹æ›´æ–°æ—¶è¿›è¡Œç¡®è®¤å’Œè°ƒæ•´</li>
<li>ğŸ”„ <strong>æ›´æ–°é¢‘ç‡</strong>: æ¨¡å‹çš„æ›´æ–°é—´éš”å¤§æ¦‚æ˜¯åŠå¹´åˆ°ä¸€å¹´ï¼Œå› æ­¤æ¯å¹´å¯èƒ½ä¼šæœ‰ä¸¤ä¸ªæ–°ç‰ˆæœ¬æ¨¡å‹éœ€è¦ç¡®è®¤</li>
<li>ğŸ› ï¸ <strong>ç»´æŠ¤æˆæœ¬</strong>: å¦‚æœæ¨¡å‹å˜åŒ–å¾ˆå¤§ï¼Œå¯èƒ½éœ€è¦é’ˆå¯¹ä¸åŒçš„ç³»ç»Ÿç‰ˆæœ¬ä½¿ç”¨ä¸åŒçš„æç¤ºè¯</li>
</ul>
<p><strong>macOS é™åˆ¶</strong>:</p>
<p>macOS ä¸Šæ­è½½çš„æœ¬åœ°æ¨¡å‹ä¹Ÿæ˜¯è¿™ä¸ª 3B çš„å°æ¨¡å‹ï¼ˆåŒæ—¶ä¹Ÿæä¾›ç»™ macOS 26 ä¸Šçš„æ¨¡æ‹Ÿå™¨ä½¿ç”¨ï¼‰ã€‚ä½œä¸ºæ€§èƒ½æ›´åŠ å¼ºåŠ²çš„"ç”Ÿäº§åŠ›çº§åˆ«"è®¾å¤‡ï¼Œå´ä½¿ç”¨äº†å’Œæ‰‹æŒè®¾å¤‡ä¸€æ ·çš„æ–¹æ¡ˆã€‚</p>
<p><strong>å¼€å‘å»ºè®®</strong>:</p>
<ol>
<li><strong>ç°åœ¨å°±å¯ä»¥å¼€å§‹å®éªŒ</strong>: æ¡†æ¶å·²ç»ç›¸å½“ç¨³å®š</li>
<li><strong>å›´ç»• 4096 token é™åˆ¶è®¾è®¡åº”ç”¨æµç¨‹</strong>: ä¸è¦æŒ‡æœ›çŸ­æœŸå†…ä¼šæœ‰å¤§å¹…æå‡</li>
<li><strong>ä¼˜å…ˆè€ƒè™‘ Tool Calling</strong>: è¿™å¯èƒ½æ˜¯æœ€æœ‰ä»·å€¼çš„åŠŸèƒ½</li>
<li><strong>å‡†å¤‡å¥½ä¸Šä¸‹æ–‡ç®¡ç†ç­–ç•¥</strong>: å¦‚æœå­˜åœ¨å¯¹è¯å¼çš„åœºæ™¯ï¼Œå‡ ä¹å¿…é¡»å¤„ç†ä¸Šä¸‹æ–‡æº¢å‡º</li>
<li><strong>åœ¨çœŸæœºä¸Šæµ‹è¯•æ€§èƒ½</strong>: æ¨¡æ‹Ÿå™¨ç‰ˆæœ¬è·‘çš„æ˜¯ macOS æ­è½½çš„æ¨¡å‹ï¼Œæ€§èƒ½ç»“æœå¯èƒ½ä¸å‡†ç¡®</li>
</ol>
<blockquote>
<p>ğŸ“Š <strong>æ•°æ®æ¥æº</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fonevcat.com%2F2025%2F06%2Ffoundation-models%2F" target="_blank" title="https://onevcat.com/2025/06/foundation-models/" ref="nofollow noopener noreferrer">OneV's Den - Foundation Models è¾¹ç•Œæ¢ç´¢</a></p>
</blockquote>
<h3 data-id="heading-92">4.4 é”™è¯¯å¤„ç†å’Œè°ƒè¯•</h3>
<h4 data-id="heading-93">å®Œæ•´çš„é”™è¯¯å¤„ç†</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD  
Â  Â  Start([æ‰§è¡Œæ“ä½œ]) --&gt; Check[æ£€æŸ¥æ¨¡å‹å¯ç”¨æ€§]  
Â  Â  Check --&gt;|ä¸å¯ç”¨| Error1[æ¨¡å‹ä¸å¯ç”¨é”™è¯¯]  
Â  Â  Check --&gt;|å¯ç”¨| Execute[æ‰§è¡Œæ“ä½œ]  
Â  Â  Execute --&gt;|æˆåŠŸ| Success[è¿”å›ç»“æœ]  
Â  Â  Execute --&gt;|ä¸Šä¸‹æ–‡çª—å£è¶…å‡º| Error2[ä¸Šä¸‹æ–‡çª—å£é”™è¯¯]  
Â  Â  Execute --&gt;|å·¥å…·è°ƒç”¨å¤±è´¥| Error3[å·¥å…·è°ƒç”¨é”™è¯¯]  
Â  Â  Execute --&gt;|å…¶ä»–é”™è¯¯| Error4[é€šç”¨é”™è¯¯]  
Â  Â Â   
Â  Â  Error1 --&gt; Handle[é”™è¯¯å¤„ç†]  
Â  Â  Error2 --&gt; Handle  
Â  Â  Error3 --&gt; Handle  
Â  Â  Error4 --&gt; Handle  
Â  Â  Handle --&gt; User[æ˜¾ç¤ºç”¨æˆ·å‹å¥½æç¤º]  
Â  Â Â   
Â  Â  style Start fill:#007AFF,color:#fff  
Â  Â  style Check fill:#5AC8FA,color:#000  
Â  Â  style Execute fill:#FF9500,color:#fff  
Â  Â  style Success fill:#34C759,color:#fff  
Â  Â  style Error1 fill:#FF3B30,color:#fff  
Â  Â  style Error2 fill:#FF3B30,color:#fff  
Â  Â  style Error3 fill:#FF3B30,color:#fff  
Â  Â  style Error4 fill:#FF3B30,color:#fff  
Â  Â  style Handle fill:#AF52DE,color:#fff  
Â  Â  style User fill:#5AC8FA,color:#000  
</code></pre>
<p><strong>é”™è¯¯å¤„ç†ä»£ç </strong>:</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">PhotoAnalysisError</span>: <span class="hljs-title class_">LocalizedError</span> {  
Â  Â  <span class="hljs-keyword">case</span> modelUnavailable(<span class="hljs-type">String</span>)  
Â  Â  <span class="hljs-keyword">case</span> contextWindowExceeded  
Â  Â  <span class="hljs-keyword">case</span> invalidResponse  
Â  Â  <span class="hljs-keyword">case</span> toolCallFailed(<span class="hljs-type">String</span>)  
Â  Â Â   
Â  Â  <span class="hljs-keyword">var</span> errorDescription: <span class="hljs-type">String</span>? {  
Â  Â  Â  Â  <span class="hljs-keyword">switch</span> <span class="hljs-keyword">self</span> {  
Â  Â  Â  Â  <span class="hljs-keyword">case</span> .modelUnavailable(<span class="hljs-keyword">let</span> reason):  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-string">"AIæ¨¡å‹ä¸å¯ç”¨: <span class="hljs-subst">\(reason)</span>"</span>  
Â  Â  Â  Â  <span class="hljs-keyword">case</span> .contextWindowExceeded:  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-string">"å¯¹è¯å†…å®¹è¿‡é•¿ï¼Œè¯·æ¸…ç†å†å²è®°å½•"</span>  
Â  Â  Â  Â  <span class="hljs-keyword">case</span> .invalidResponse:  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-string">"AIå“åº”æ ¼å¼é”™è¯¯"</span>  
Â  Â  Â  Â  <span class="hljs-keyword">case</span> .toolCallFailed(<span class="hljs-keyword">let</span> toolName):  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-string">"å·¥å…·è°ƒç”¨å¤±è´¥: <span class="hljs-subst">\(toolName)</span>"</span>  
Â  Â  Â  Â  }  
Â  Â  }  
}

<span class="hljs-keyword">func</span> <span class="hljs-title function_">analyzePhotoSafely</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">photo</span>: <span class="hljs-type">Photo</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">PhotoDescription</span> {  
Â  Â  <span class="hljs-keyword">let</span> model <span class="hljs-operator">=</span> <span class="hljs-type">SystemLanguageModel</span>.default  
Â  Â  <span class="hljs-keyword">guard</span> <span class="hljs-keyword">case</span> .available <span class="hljs-operator">=</span> model.availability <span class="hljs-keyword">else</span> {  
Â  Â  Â  Â  <span class="hljs-keyword">if</span> <span class="hljs-keyword">case</span> .unavailable(<span class="hljs-keyword">let</span> reason) <span class="hljs-operator">=</span> model.availability {  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">throw</span> <span class="hljs-type">PhotoAnalysisError</span>.modelUnavailable(reason.localizedDescription)  
Â  Â  Â  Â  }  
Â  Â  Â  Â  <span class="hljs-keyword">throw</span> <span class="hljs-type">PhotoAnalysisError</span>.modelUnavailable(<span class="hljs-string">"æœªçŸ¥åŸå› "</span>)  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-keyword">do</span> {  
Â  Â  Â  Â  <span class="hljs-keyword">let</span> session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>()  
Â  Â  Â  Â  <span class="hljs-keyword">let</span> prompt <span class="hljs-operator">=</span> generateAnalysisPrompt(for: photo)  
Â  Â  Â  Â  <span class="hljs-keyword">let</span> response <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(  
Â  Â  Â  Â  Â  Â  to: <span class="hljs-type">Prompt</span>(prompt),  
Â  Â  Â  Â  Â  Â  generating: <span class="hljs-type">PhotoDescription</span>.<span class="hljs-keyword">self</span>  
Â  Â  Â  Â  )  
Â  Â  Â  Â  <span class="hljs-keyword">return</span> response.content  
Â  Â  } <span class="hljs-keyword">catch</span> <span class="hljs-keyword">let</span> error <span class="hljs-keyword">as</span> <span class="hljs-type">LanguageModelSession</span>.<span class="hljs-type">GenerationError</span> {  
Â  Â  Â  Â  <span class="hljs-keyword">switch</span> error {  
Â  Â  Â  Â  <span class="hljs-keyword">case</span> .exceededContextWindowSize:  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">throw</span> <span class="hljs-type">PhotoAnalysisError</span>.contextWindowExceeded  
Â  Â  Â  Â  <span class="hljs-keyword">default</span>:  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">throw</span> <span class="hljs-type">PhotoAnalysisError</span>.invalidResponse  
Â  Â  Â  Â  }  
Â  Â  } <span class="hljs-keyword">catch</span> <span class="hljs-keyword">let</span> error <span class="hljs-keyword">as</span> <span class="hljs-type">LanguageModelSession</span>.<span class="hljs-type">ToolCallError</span> {  
Â  Â  Â  Â  <span class="hljs-keyword">throw</span> <span class="hljs-type">PhotoAnalysisError</span>.toolCallFailed(error.localizedDescription)  
Â  Â  } <span class="hljs-keyword">catch</span> {  
Â  Â  Â  Â  <span class="hljs-keyword">throw</span> <span class="hljs-type">PhotoAnalysisError</span>.invalidResponse  
Â  Â  }  
}  
</code></pre>
<h3 data-id="heading-94">4.4 æç¤ºè®¾è®¡å’Œå®‰å…¨å®è·µ</h3>
<h4 data-id="heading-95">æç¤ºè®¾è®¡æœ€ä½³å®è·µ</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">mindmap  
Â  root((æç¤ºè®¾è®¡&lt;br/&gt;æœ€ä½³å®è·µ))  
Â  Â  æ¸…æ™°æ˜ç¡®  
Â  Â  Â  è§’è‰²å®šä¹‰  
Â  Â  Â  èŒè´£è¯´æ˜  
Â  Â  Â  æ ¼å¼è¦æ±‚  
Â  Â  æä¾›ä¸Šä¸‹æ–‡  
Â  Â  Â  ç”¨æˆ·ä¿¡æ¯  
Â  Â  Â  å½“å‰çŠ¶æ€  
Â  Â  Â  å†å²è®°å½•  
Â  Â  ç¤ºä¾‹å¼•å¯¼  
Â  Â  Â  è¾“å…¥ç¤ºä¾‹  
Â  Â  Â  è¾“å‡ºç¤ºä¾‹  
Â  Â  Â  æ ¼å¼ç¤ºä¾‹  
Â  Â  ç»“æ„åŒ–  
Â  Â  Â  åˆ†å±‚æ¬¡  
Â  Â  Â  æ ‡è®°é‡ç‚¹  
Â  Â  Â  æ˜“äºç†è§£  
</code></pre>
<p><strong>Instructionsè®¾è®¡ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// âœ… å¥½çš„Instructions  </span>
<span class="hljs-keyword">let</span> instructions <span class="hljs-operator">=</span> <span class="hljs-type">Instructions</span>(<span class="hljs-string">"""  
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç…§ç‰‡åˆ†æåŠ©æ‰‹ï¼Œæ“…é•¿ï¼š  
1. åˆ†æç…§ç‰‡å†…å®¹ï¼ˆäººç‰©ã€åœºæ™¯ã€ç‰©ä½“ï¼‰  
2. è¯„ä¼°ç…§ç‰‡è´¨é‡ï¼ˆæ„å›¾ã€å…‰çº¿ã€æ¸…æ™°åº¦ï¼‰  
3. æä¾›æ‹æ‘„æ”¹è¿›å»ºè®®  
4. ç”Ÿæˆå‡†ç¡®çš„ç…§ç‰‡æ ‡ç­¾å’Œæè¿°

è¯·ä¿æŒå›ç­”ç®€æ´ä¸“ä¸šï¼Œä½¿ç”¨ä¸­æ–‡å›å¤ã€‚  
"""</span>)  
</code></pre>
<h4 data-id="heading-96">å®‰å…¨å®è·µ</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR  
Â  Â  subgraph "å®‰å…¨æœºåˆ¶"  
Â  Â  Â  Â  S1[Guardrail&lt;br/&gt;å†…å®¹è¿‡æ»¤]  
Â  Â  Â  Â  S2[è¾“å…¥éªŒè¯&lt;br/&gt;é•¿åº¦æ£€æŸ¥]  
Â  Â  Â  Â  S3[éšç§ä¿æŠ¤&lt;br/&gt;æœ¬åœ°å¤„ç†]  
Â  Â  end  
Â  Â Â   
Â  Â  subgraph "å®è·µè¦ç‚¹"  
Â  Â  Â  Â  P1[å¤„ç†å®‰å…¨é”™è¯¯]  
Â  Â  Â  Â  P2[éªŒè¯ç”¨æˆ·è¾“å…¥]  
Â  Â  Â  Â  P3[é¿å…æ•æ„Ÿä¿¡æ¯]  
Â  Â  end  
Â  Â Â   
Â  Â  S1 --&gt; P1  
Â  Â  S2 --&gt; P2  
Â  Â  S3 --&gt; P3  
Â  Â Â   
Â  Â  style S1 fill:#FF3B30,color:#fff  
Â  Â  style S2 fill:#FF3B30,color:#fff  
Â  Â  style S3 fill:#FF3B30,color:#fff  
Â  Â  style P1 fill:#34C759,color:#fff  
Â  Â  style P2 fill:#34C759,color:#fff  
Â  Â  style P3 fill:#34C759,color:#fff  
</code></pre>
<hr/>
<h2 data-id="heading-97">ğŸ¬ ç¬¬äº”éƒ¨åˆ†ï¼šDemoè§†é¢‘å±•ç¤º</h2>
<h3 data-id="heading-98">Demo 1: æ™ºèƒ½ç…§ç‰‡åˆ†æ</h3>
<p><strong>æ¼”ç¤ºæµç¨‹</strong>:</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram  
Â  Â  participant U as ç”¨æˆ·  
Â  Â  participant UI as ç•Œé¢  
Â  Â  participant VM as ViewModel  
Â  Â  participant AI as Foundation Models  
Â  Â Â   
Â  Â  U-&gt;&gt;UI: é€‰æ‹©ç…§ç‰‡  
Â  Â  UI-&gt;&gt;VM: analyzePhoto(photo)  
Â  Â  VM-&gt;&gt;AI: ç”Ÿæˆåˆ†æPrompt  
Â  Â  AI-&gt;&gt;AI: åˆ†æç…§ç‰‡å†…å®¹  
Â  Â  loop æµå¼å“åº”  
Â  Â  Â  Â  AI--&gt;&gt;VM: è¿”å›éƒ¨åˆ†æ–‡æœ¬  
Â  Â  Â  Â  VM--&gt;&gt;UI: æ›´æ–°UI  
Â  Â  end  
Â  Â  AI--&gt;&gt;VM: è¿”å›ç»“æ„åŒ–ç»“æœ  
Â  Â  VM--&gt;&gt;UI: æ˜¾ç¤ºåˆ†æç»“æœ  
Â  Â  UI--&gt;&gt;U: å±•ç¤ºæ ‡ç­¾ã€è¯„åˆ†ã€å»ºè®®  
</code></pre>
<p><strong>è®²è§£è¦ç‚¹</strong>:</p>
<ul>
<li>å±•ç¤ºç»“æ„åŒ–æ•°æ®ç”Ÿæˆçš„å®é™…æ•ˆæœ</li>
<li>è¯´æ˜æµå¼å“åº”å¦‚ä½•æå‡ç”¨æˆ·ä½“éªŒ</li>
<li>å¼ºè°ƒæœ¬åœ°å¤„ç†çš„éšç§ä¼˜åŠ¿</li>
</ul>
<h3 data-id="heading-99">Demo 2: è‡ªç„¶è¯­è¨€æœç´¢</h3>
<p><strong>æ¼”ç¤ºæµç¨‹</strong>:</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram  
Â  Â  participant U as ç”¨æˆ·  
Â  Â  participant AI as Foundation Models  
Â  Â  participant Tool as PhotoSearchTool  
Â  Â Â   
Â  Â  U-&gt;&gt;AI: "æ‰¾å»å¹´å¤å¤©åœ¨æµ·è¾¹çš„ç…§ç‰‡"  
Â  Â  AI-&gt;&gt;AI: ç†è§£ç”¨æˆ·æ„å›¾  
Â  Â  AI-&gt;&gt;AI: åŒ¹é…å·¥å…·æè¿°  
Â  Â  AI-&gt;&gt;Tool: call(Arguments)  
Â  Â  Tool-&gt;&gt;Tool: æ‰§è¡Œæœç´¢  
Â  Â  Tool--&gt;&gt;AI: è¿”å›ç…§ç‰‡åˆ—è¡¨  
Â  Â  AI-&gt;&gt;AI: ç”Ÿæˆå“åº”  
Â  Â  AI--&gt;&gt;U: "æˆ‘æ‰¾åˆ°äº†5å¼ ç…§ç‰‡..."  
</code></pre>
<p><strong>è®²è§£è¦ç‚¹</strong>:</p>
<ul>
<li>å±•ç¤ºå·¥å…·è°ƒç”¨çš„å·¥ä½œæœºåˆ¶</li>
<li>è¯´æ˜è‡ªç„¶è¯­è¨€ç†è§£çš„ä¼˜åŠ¿</li>
<li>å¼ºè°ƒæ— éœ€ç²¾ç¡®å…³é”®è¯çš„ä¾¿åˆ©æ€§</li>
</ul>
<h3 data-id="heading-100">Demo 3: å®Œæ•´å·¥ä½œæµ</h3>
<p><strong>æ¼”ç¤ºæµç¨‹</strong>:</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR  
Â  Â  User([ç”¨æˆ·è¯·æ±‚]) --&gt; AI[AIåˆ†æ]  
Â  Â  AI --&gt; T1[æœç´¢ç…§ç‰‡]  
Â  Â  T1 --&gt; T2[åˆ†æå†…å®¹]  
Â  Â  T2 --&gt; T3[åˆ›å»ºç›¸å†Œ]  
Â  Â  T3 --&gt; Result[å®Œæˆ]  
Â  Â Â   
Â  Â  style User fill:#007AFF,color:#fff  
Â  Â  style AI fill:#5AC8FA,color:#000  
Â  Â  style T1 fill:#FF9500,color:#fff  
Â  Â  style T2 fill:#FF9500,color:#fff  
Â  Â  style T3 fill:#FF9500,color:#fff  
Â  Â  style Result fill:#34C759,color:#fff  
</code></pre>
<p><strong>è®²è§£è¦ç‚¹</strong>:</p>
<ul>
<li>å±•ç¤ºå¤šå·¥å…·åè°ƒçš„èƒ½åŠ›</li>
<li>è¯´æ˜AIå¦‚ä½•è‡ªåŠ¨åˆ¤æ–­å·¥å…·è°ƒç”¨é¡ºåº</li>
<li>å¼ºè°ƒå¤æ‚ä»»åŠ¡çš„ä¸€ç«™å¼è§£å†³</li>
</ul>
<hr/>
<h2 data-id="heading-101">ğŸ“š ç¬¬å…­éƒ¨åˆ†ï¼šå­¦ä¹ èµ„æºå’Œæ€»ç»“Â </h2>
<h3 data-id="heading-102">å®˜æ–¹èµ„æº</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD  
Â  Â  Resource[å­¦ä¹ èµ„æº] --&gt; Official[å®˜æ–¹èµ„æº]  
Â  Â  Resource --&gt; Video[è§†é¢‘æ•™ç¨‹]  
Â  Â  Resource --&gt; Demo[ç¤ºä¾‹é¡¹ç›®]  
Â  Â Â   
Â  Â  Official --&gt; Doc[Appleæ–‡æ¡£]  
Â  Â  Official --&gt; WWDC[WWDC 2024]  
Â  Â Â   
Â  Â  Video --&gt; V1[Frameworkä»‹ç»]  
Â  Â  Video --&gt; V2[æ·±å…¥ç†è§£]  
Â  Â  Video --&gt; V3[ç¼–ç å®è·µ]  
Â  Â  Video --&gt; V4[æç¤ºå’Œå®‰å…¨]  
Â  Â Â   
Â  Â  Demo --&gt; Project[Foundation Lab]  
Â  Â Â   
Â  Â  style Resource fill:#007AFF,color:#fff  
Â  Â  style Official fill:#34C759,color:#fff  
Â  Â  style Video fill:#FF9500,color:#fff  
Â  Â  style Demo fill:#5AC8FA,color:#000  
</code></pre>
<p><strong>èµ„æºåˆ—è¡¨</strong>:</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Ffoundationmodels" target="_blank" title="https://developer.apple.com/documentation/foundationmodels" ref="nofollow noopener noreferrer">Apple Developer Documentation - Foundation Models</a></li>
<li>WWDC 2024ç›¸å…³Session</li>
<li>ç¤ºä¾‹é¡¹ç›®ï¼šFoundation Lab</li>
</ul>
<p><strong>æ¨èè§†é¢‘</strong>:</p>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DmJMvFyBvZEk" target="_blank" title="https://www.youtube.com/watch?v=mJMvFyBvZEk" ref="nofollow noopener noreferrer">Foundation Models Framework ä»‹ç»</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D6Wgg7DIY29E" target="_blank" title="https://www.youtube.com/watch?v=6Wgg7DIY29E" ref="nofollow noopener noreferrer">æ·±å…¥äº†è§£ Foundation Models æ¡†æ¶</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DS5F196tqRMI" target="_blank" title="https://www.youtube.com/watch?v=S5F196tqRMI" ref="nofollow noopener noreferrer">å®é™…ç¼–ç å®è·µ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D-aMFBj-kwdU" target="_blank" title="https://www.youtube.com/watch?v=-aMFBj-kwdU" ref="nofollow noopener noreferrer">æ¢ç´¢è®¾å¤‡ç«¯åŸºç¡€æ¨¡å‹çš„æç¤ºè®¾è®¡å’Œå®‰å…¨</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3Dz-t64Zlj1ok" target="_blank" title="https://www.youtube.com/watch?v=z-t64Zlj1ok" ref="nofollow noopener noreferrer">YouTube åˆ†äº«è§†é¢‘</a> - å¯ä½œä¸ºè¡¥å……å‚è€ƒï¼Œç»“åˆæœ¬æ–‡æ¡£å†…å®¹è§‚çœ‹ï¼Œæ›´å¥½ç†è§£å®é™…æ¼”ç¤ºç»†èŠ‚</li>
</ol>
<p><strong>æ·±åº¦æŠ€æœ¯åˆ†æ</strong>:</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fonevcat.com%2F2025%2F06%2Ffoundation-models%2F" target="_blank" title="https://onevcat.com/2025/06/foundation-models/" ref="nofollow noopener noreferrer">OneV's Den - Foundation Modelsï¼šè‹¹æœè®¾å¤‡ç«¯æ¨¡å‹çš„è¾¹ç•Œæ¢ç´¢</a> - åŸºäºå®é™…æµ‹è¯•çš„æ€§èƒ½æ•°æ®ã€è¾¹ç•Œé™åˆ¶å’Œæœ€ä½³å®è·µï¼ŒåŒ…å«å†…å­˜æ¶ˆè€—ã€å¹¶å‘æ€§èƒ½ã€ä¸Šä¸‹æ–‡çª—å£ç­‰å…³é”®æŒ‡æ ‡çš„è¯¦ç»†åˆ†æ</li>
</ul>
<h3 data-id="heading-103">å®è·µå»ºè®®</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR  
Â  Â  Start([å¼€å§‹å­¦ä¹ ]) --&gt; Step1[å•è½®å¯¹è¯]  
Â  Â  Step1 --&gt; Step2[ç»“æ„åŒ–ç”Ÿæˆ]  
Â  Â  Step2 --&gt; Step3[å®ç°Tool]  
Â  Â  Step3 --&gt; Step4[ä¸šåŠ¡é›†æˆ]  
Â  Â  Step4 --&gt; End([ç”Ÿäº§åº”ç”¨])  
Â  Â Â   
Â  Â  style Start fill:#007AFF,color:#fff  
Â  Â  style Step1 fill:#5AC8FA,color:#000  
Â  Â  style Step2 fill:#5AC8FA,color:#000  
Â  Â  style Step3 fill:#FF9500,color:#fff  
Â  Â  style Step4 fill:#34C759,color:#fff  
Â  Â  style End fill:#007AFF,color:#fff  
</code></pre>
<hr/>
<h2 data-id="heading-104">ğŸ¤” ç¬¬ä¸ƒéƒ¨åˆ†ï¼šQ&amp;AÂ </h2>
<h3 data-id="heading-105">å¸¸è§é—®é¢˜å¯¹æ¯”</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB  
Â  Â  Q1[Q: å’ŒChatGPTçš„åŒºåˆ«?] --&gt; A1[å®Œå…¨æœ¬åœ°åŒ–&lt;br/&gt;æ— éœ€ç½‘ç»œ&lt;br/&gt;æ•°æ®ä¸å‡ºè®¾å¤‡]  
Â  Â  Q2[Q: å¯ç”¨äºç”Ÿäº§?] --&gt; A2[éœ€è¦iOS 18+&lt;br/&gt;è®¾å¤‡éœ€æ”¯æŒAI]  
Â  Â  Q3[Q: æ€§èƒ½å¦‚ä½•?] --&gt; A3[æ€§èƒ½è‰¯å¥½&lt;br/&gt;é¦–æ¬¡è°ƒç”¨æœ‰å»¶è¿Ÿ]  
Â  Â  Q4[Q: å¦‚ä½•æµ‹è¯•?] --&gt; A4[å¿…é¡»çœŸæœºæµ‹è¯•&lt;br/&gt;æ¨¡æ‹Ÿå™¨ä¸æ”¯æŒ]  
Â  Â  Q5[Q: æˆæœ¬å¦‚ä½•?] --&gt; A5[å®Œå…¨å…è´¹&lt;br/&gt;æ— APIè´¹ç”¨]  
Â  Â Â   
Â  Â  style Q1 fill:#5AC8FA,color:#000  
Â  Â  style Q2 fill:#5AC8FA,color:#000  
Â  Â  style Q3 fill:#5AC8FA,color:#000  
Â  Â  style Q4 fill:#5AC8FA,color:#000  
Â  Â  style Q5 fill:#5AC8FA,color:#000  
Â  Â  style A1 fill:#34C759,color:#fff  
Â  Â  style A2 fill:#34C759,color:#fff  
Â  Â  style A3 fill:#34C759,color:#fff  
Â  Â  style A4 fill:#34C759,color:#fff  
Â  Â  style A5 fill:#34C759,color:#fff  
</code></pre>
<h3 data-id="heading-106">è®¨è®ºè¯é¢˜</h3>
<ul>
<li>åœ¨ç›¸å†Œä¸šåŠ¡ä¸­ï¼Œå“ªäº›åœºæ™¯æœ€é€‚åˆä½¿ç”¨Foundation Modelsï¼Ÿ</li>
<li>å¦‚ä½•å¹³è¡¡AIèƒ½åŠ›å’Œç”¨æˆ·ä½“éªŒï¼Ÿ</li>
<li>å¦‚ä½•å¤„ç†æ¨¡å‹ä¸å¯ç”¨çš„æƒ…å†µï¼Ÿ</li>
</ul>
<hr/>
<h2 data-id="heading-107">ğŸ“ æ€»ç»“</h2>
<h3 data-id="heading-108">å…³é”®è¦ç‚¹æ€»ç»“</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">mindmap  
Â  root((Foundation Models&lt;br/&gt;å…³é”®è¦ç‚¹))  
Â  Â  åŸç”ŸAIèƒ½åŠ›  
Â  Â  Â  Appleæä¾›  
Â  Â  Â  iOS 18+  
Â  Â  Â  Apple Intelligence  
Â  Â  éšç§ä¿æŠ¤  
Â  Â  Â  è®¾å¤‡ç«¯å¤„ç†  
Â  Â  Â  æ•°æ®ä¸å‡ºè®¾å¤‡  
Â  Â  Â  å®Œå…¨æœ¬åœ°åŒ–  
Â  Â  æ˜“äºé›†æˆ  
Â  Â  Â  ç®€æ´API  
Â  Â  Â  å¼€å‘è€…å‹å¥½  
Â  Â  Â  ç³»ç»Ÿé›†æˆ  
Â  Â  åº”ç”¨åœºæ™¯  
Â  Â  Â  ç…§ç‰‡åˆ†æ  
Â  Â  Â  è‡ªç„¶è¯­è¨€æœç´¢  
Â  Â  Â  æ™ºèƒ½åˆ†ç±»  
Â  Â  Â  è§†é¢‘ç†è§£  
</code></pre>
<h3 data-id="heading-109">ä¸‹ä¸€æ­¥è¡ŒåŠ¨</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR  
Â  Â  A[åˆ›å»ºDemo] --&gt; B[é€‰æ‹©åŠŸèƒ½]  
Â  Â  B --&gt; C[é›†æˆAI]  
Â  Â  C --&gt; D[æ”¶é›†åé¦ˆ]  
Â  Â  D --&gt; E[è¿­ä»£ä¼˜åŒ–]  
Â  Â Â   
Â  Â  style A fill:#007AFF,color:#fff  
Â  Â  style B fill:#5AC8FA,color:#000  
Â  Â  style C fill:#FF9500,color:#fff  
Â  Â  style D fill:#34C759,color:#fff  
Â  Â  style E fill:#AF52DE,color:#fff  
</code></pre>
<h3 data-id="heading-110">ç›¸å†Œä¸šåŠ¡åº”ç”¨ä¼˜å…ˆçº§</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">pie title ç›¸å†Œä¸šåŠ¡åº”ç”¨ä¼˜å…ˆçº§  
Â  Â  "é«˜ä¼˜å…ˆçº§" : 3  
Â  Â  "ä¸­ä¼˜å…ˆçº§" : 3  
Â  Â  "ä½ä¼˜å…ˆçº§" : 2  
</code></pre>
<p><strong>ä¼˜å…ˆçº§è¯¦æƒ…</strong>:</p>
<ul>
<li><strong>é«˜ä¼˜å…ˆçº§</strong>: æ™ºèƒ½ç…§ç‰‡æè¿°ç”Ÿæˆã€è‡ªç„¶è¯­è¨€æœç´¢ã€æ™ºèƒ½ç›¸å†Œåˆ†ç±»</li>
<li><strong>ä¸­ä¼˜å…ˆçº§</strong>: ç›¸ä¼¼ç…§ç‰‡æ¨èã€è§†é¢‘æ‘˜è¦ç”Ÿæˆã€æ¸…ç†å»ºè®®</li>
<li><strong>ä½ä¼˜å…ˆçº§</strong>: ç…§ç‰‡è´¨é‡è¯„åˆ†ã€è‡ªåŠ¨æ ‡ç­¾ç”Ÿæˆ</li>
</ul>
<hr/>
<h2 data-id="heading-111">ğŸ“ é™„å½•ï¼šä»£ç æ¨¡æ¿</h2>
<h3 data-id="heading-112">åŸºç¡€ä¼šè¯æ¨¡æ¿</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> FoundationModels

<span class="hljs-keyword">class</span> <span class="hljs-title class_">BasicSessionManager</span> {  
Â  Â  <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>()  
Â  Â Â   
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">chat</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">message</span>: <span class="hljs-type">String</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">String</span> {  
Â  Â  Â  Â  <span class="hljs-keyword">let</span> response <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(to: message)  
Â  Â  Â  Â  <span class="hljs-keyword">return</span> response.content  
Â  Â  }  
}  
</code></pre>
<h3 data-id="heading-113">Toolå®ç°æ¨¡æ¿</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">MyTool</span>: <span class="hljs-title class_">Tool</span> {  
Â  Â  <span class="hljs-keyword">let</span> name <span class="hljs-operator">=</span> <span class="hljs-string">"toolName"</span>  
Â  Â  <span class="hljs-keyword">let</span> description <span class="hljs-operator">=</span> <span class="hljs-string">"å·¥å…·æè¿°"</span>  
Â  Â Â   
Â  Â  <span class="hljs-meta">@Generable</span>  
Â  Â  <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Arguments</span> {  
Â  Â  Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"å‚æ•°æè¿°"</span>)  
Â  Â  Â  Â  <span class="hljs-keyword">var</span> param: <span class="hljs-type">String</span>  
Â  Â  }  
Â  Â Â   
Â  Â  <span class="hljs-keyword">func</span> <span class="hljs-title function_">call</span>(<span class="hljs-params">arguments</span>: <span class="hljs-type">Arguments</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-keyword">some</span> <span class="hljs-type">PromptRepresentable</span> {  
Â  Â  Â  Â  <span class="hljs-comment">// å®ç°å·¥å…·é€»è¾‘  </span>
Â  Â  Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-string">"å·¥å…·è¿”å›ç»“æœ"</span>  
Â  Â  }  
}  
</code></pre>
<h3 data-id="heading-114">ç»“æ„åŒ–æ•°æ®ç”Ÿæˆæ¨¡æ¿</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-meta">@Generable</span>  
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">MyDataModel</span> {  
Â  Â  <span class="hljs-meta">@Guide</span>(description: <span class="hljs-string">"å­—æ®µæè¿°"</span>)  
Â  Â  <span class="hljs-keyword">let</span> field: <span class="hljs-type">String</span>  
}

<span class="hljs-keyword">func</span> <span class="hljs-title function_">generateData</span>() <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">MyDataModel</span> {  
Â  Â  <span class="hljs-keyword">let</span> session <span class="hljs-operator">=</span> <span class="hljs-type">LanguageModelSession</span>()  
Â  Â  <span class="hljs-keyword">let</span> response <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> session.respond(  
Â  Â  Â  Â  to: <span class="hljs-string">"ç”Ÿæˆæ•°æ®çš„æç¤ºè¯"</span>,  
Â  Â  Â  Â  generating: <span class="hljs-type">MyDataModel</span>.<span class="hljs-keyword">self</span>  
Â  Â  )  
Â  Â  <span class="hljs-keyword">return</span> response.content  
}  
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PHP8.6 æ–°çš„ RFC ææ¡ˆ Context Managers ä¼˜é›…ç®¡ç†èµ„æºç”Ÿå‘½å‘¨æœŸ]]></title>    <link>https://juejin.cn/post/7575112613778047010</link>    <guid>https://juejin.cn/post/7575112613778047010</guid>    <pubDate>2025-11-23T09:18:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575112613778047010" data-draft-id="7575162322240077824" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PHP8.6 æ–°çš„ RFC ææ¡ˆ Context Managers ä¼˜é›…ç®¡ç†èµ„æºç”Ÿå‘½å‘¨æœŸ"/> <meta itemprop="keywords" content="åç«¯,PHP"/> <meta itemprop="datePublished" content="2025-11-23T09:18:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BingoGo"/> <meta itemprop="url" content="https://juejin.cn/user/993614242266077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PHP8.6 æ–°çš„ RFC ææ¡ˆ Context Managers ä¼˜é›…ç®¡ç†èµ„æºç”Ÿå‘½å‘¨æœŸ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/993614242266077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BingoGo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T09:18:13.000Z" title="Sun Nov 23 2025 09:18:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨æ—¥å¸¸ PHP å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å¤„ç†èµ„æºçš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼šæ‰“å¼€æ–‡ä»¶åè¦è®°å¾—å…³é—­ï¼Œå¼€å¯æ•°æ®åº“äº‹åŠ¡åè¦ç¡®ä¿æäº¤æˆ–å›æ»šï¼Œè·å–é”åè¦è®°å¾—é‡Šæ”¾â€¦â€¦è¿™äº›é‡å¤çš„"è®¾ç½®-ä½¿ç”¨-æ¸…ç†"æ¨¡å¼å……æ–¥ç€æˆ‘ä»¬çš„ä»£ç ï¼Œä¸ä»…ç¹çï¼Œè¿˜å®¹æ˜“å‡ºé”™ã€‚</p>
<p>PHP 8.6 å³å°†å¼•å…¥çš„ <strong>Context Managersï¼ˆä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼‰</strong> ç‰¹æ€§ï¼Œæ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ã€‚è¿™ä¸ªç‰¹æ€§å€Ÿé‰´è‡ª Pythonï¼Œé€šè¿‡æ–°å¢çš„ <code>using</code> å…³é”®å­—å’Œ <code>ContextManager</code> æ¥å£ï¼Œæä¾›äº†ä¸€ç§ä¼˜é›…çš„æ–¹å¼æ¥æŠ½è±¡è¿™äº›é€šç”¨çš„æ§åˆ¶æµå’Œå˜é‡ç”Ÿå‘½å‘¨æœŸç®¡ç†æ¨¡å¼ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcatchadmin.com%2Fpost%2F2025-11%2Fphp-context-managers-rfc-zh" target="_blank" title="https://catchadmin.com/post/2025-11/php-context-managers-rfc-zh" ref="nofollow noopener noreferrer">åŸæ–‡é“¾æ¥ PHP8.6 æ–°çš„ RFC ææ¡ˆ Context Managers ä¼˜é›…ç®¡ç†èµ„æºç”Ÿå‘½å‘¨æœŸ</a>
è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªå…¸å‹çš„ä¾‹å­ã€‚ä¼ ç»Ÿçš„æ–‡ä»¶å¤„ç†ä»£ç éœ€è¦è¿™æ ·å†™ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$fp</span> = <span class="hljs-title function_ invoke__">fopen</span>(<span class="hljs-string">'file.txt'</span>, <span class="hljs-string">'w'</span>);
<span class="hljs-keyword">if</span> (<span class="hljs-variable">$fp</span>) {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$someThing</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$value</span>) {
            <span class="hljs-title function_ invoke__">fwrite</span>(<span class="hljs-variable">$fp</span>, <span class="hljs-title function_ invoke__">serialize</span>(<span class="hljs-variable">$value</span>));
        }
    } <span class="hljs-keyword">catch</span> (\<span class="hljs-built_in">Exception</span> <span class="hljs-variable">$e</span>) {
        <span class="hljs-title function_ invoke__">log</span>(<span class="hljs-string">'The file failed.'</span>);
    } <span class="hljs-keyword">finally</span> {
        <span class="hljs-title function_ invoke__">fclose</span>(<span class="hljs-variable">$fp</span>);
    }
}
<span class="hljs-keyword">unset</span>(<span class="hljs-variable">$fp</span>);
</code></pre>
<p>è€Œä½¿ç”¨ Context Managers åï¼Œå¯ä»¥ç®€åŒ–ä¸ºï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-title function_ invoke__">using</span> (<span class="hljs-title function_ invoke__">file_for_write</span>(<span class="hljs-string">'file.txt'</span>) <span class="hljs-keyword">as</span> <span class="hljs-variable">$fp</span>) {
    <span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$someThing</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$value</span>) {
        <span class="hljs-title function_ invoke__">fwrite</span>(<span class="hljs-variable">$fp</span>, <span class="hljs-title function_ invoke__">serialize</span>(<span class="hljs-variable">$value</span>));
    }
}
<span class="hljs-comment">// æ­¤æ—¶å¯ä»¥ä¿è¯ $fp å·²ç»å…³é—­ï¼Œæ— è®ºæ˜¯å¦å‘ç”Ÿé”™è¯¯</span>
</code></pre>
<h2 data-id="heading-1">æ ¸å¿ƒæ¦‚å¿µ</h2>
<h3 data-id="heading-2">ContextManager æ¥å£</h3>
<p>Context Managers çš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªæ–°çš„æ¥å£ <code>ContextManager</code>ï¼Œå®ƒå®šä¹‰äº†ä¸¤ä¸ªå…³é”®æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ContextManager</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enterContext</span>(<span class="hljs-params"/>): <span class="hljs-title">mixed</span></span>;
    
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">exitContext</span>(<span class="hljs-params">?\<span class="hljs-built_in">Throwable</span> <span class="hljs-variable">$e</span> = <span class="hljs-literal">null</span></span>): ?<span class="hljs-title">bool</span></span>;
}
</code></pre>
<ul>
<li><strong><code>enterContext()</code></strong>ï¼šåœ¨è¿›å…¥ä¸Šä¸‹æ–‡å—æ—¶è°ƒç”¨ï¼Œæ‰§è¡Œå¿…è¦çš„è®¾ç½®æ“ä½œï¼Œè¿”å›å€¼å°†ä½œä¸ºä¸Šä¸‹æ–‡å˜é‡æä¾›ç»™ä»£ç å—ä½¿ç”¨</li>
<li><strong><code>exitContext()</code></strong>ï¼šåœ¨ç¦»å¼€ä¸Šä¸‹æ–‡å—æ—¶è°ƒç”¨ï¼Œæ‰§è¡Œæ¸…ç†æ“ä½œã€‚æ¥æ”¶ä¸€ä¸ªå¯é€‰çš„å¼‚å¸¸å‚æ•°ï¼Œå¦‚æœè¿”å› <code>true</code> åˆ™æŠ‘åˆ¶å¼‚å¸¸ï¼Œå¦åˆ™å¼‚å¸¸ä¼šé‡æ–°æŠ›å‡º</li>
</ul>
<h3 data-id="heading-3">using å…³é”®å­—è¯­æ³•</h3>
<p><code>using</code> è¯­å¥çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-title function_ invoke__">using</span> ((EXPR [<span class="hljs-keyword">as</span> VAR])[,]+) {
    BODY
}
</code></pre>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li><strong>EXPR</strong>ï¼šä»»æ„è¡¨è¾¾å¼ï¼Œå…¶ç»“æœå¿…é¡»æ˜¯ <code>ContextManager</code> å®ä¾‹</li>
<li><strong>VAR</strong>ï¼šå¯é€‰çš„å˜é‡åï¼Œç”¨äºæ¥æ”¶ <code>enterContext()</code> çš„è¿”å›å€¼</li>
<li><strong>BODY</strong>ï¼šä»»æ„ PHP è¯­å¥</li>
<li><strong>é€—å·åˆ†éš”</strong>ï¼šå¯ä»¥åœ¨ä¸€ä¸ª <code>using</code> è¯­å¥ä¸­ä½¿ç”¨å¤šä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œç”¨é€—å·åˆ†éš”</li>
</ul>
<p><strong>è¯­æ³•ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// å•ä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œå¸¦ä¸Šä¸‹æ–‡å˜é‡</span>
<span class="hljs-title function_ invoke__">using</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileManager</span>(<span class="hljs-string">'file.txt'</span>) <span class="hljs-keyword">as</span> <span class="hljs-variable">$fp</span>) {
    <span class="hljs-comment">// ä½¿ç”¨ $fp</span>
}

<span class="hljs-comment">// å•ä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œä¸éœ€è¦ä¸Šä¸‹æ–‡å˜é‡</span>
<span class="hljs-title function_ invoke__">using</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">TransactionManager</span>()) {
    <span class="hljs-comment">// æ‰§è¡Œäº‹åŠ¡æ€§æ“ä½œ</span>
}

<span class="hljs-comment">// å¤šä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨</span>
<span class="hljs-title function_ invoke__">using</span> (<span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">LockA</span>() <span class="hljs-keyword">as</span> <span class="hljs-variable">$a</span>, <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">LockB</span>() <span class="hljs-keyword">as</span> <span class="hljs-variable">$b</span>) {
    <span class="hljs-comment">// åŒæ—¶ä½¿ç”¨ $a å’Œ $b</span>
}

<span class="hljs-comment">// è¡¨è¾¾å¼å¯ä»¥æ˜¯å‡½æ•°è°ƒç”¨æˆ–æ–¹æ³•é“¾</span>
<span class="hljs-title function_ invoke__">using</span> (<span class="hljs-variable">$db</span>-&gt;<span class="hljs-title function_ invoke__">transaction</span>() <span class="hljs-keyword">as</span> <span class="hljs-variable">$tx</span>) {
    <span class="hljs-comment">// ä½¿ç”¨äº‹åŠ¡</span>
}
</code></pre>
<h3 data-id="heading-4">ä¸Šä¸‹æ–‡ç®¡ç†å™¨ vs ä¸Šä¸‹æ–‡å˜é‡</h3>
<p>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œ<strong>ä¸Šä¸‹æ–‡ç®¡ç†å™¨</strong>ï¼ˆContextManager å®ä¾‹ï¼‰å’Œ<strong>ä¸Šä¸‹æ–‡å˜é‡</strong>ï¼ˆ<code>as</code> åé¢çš„å˜é‡ï¼‰æ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µï¼š</p>
<ul>
<li><strong>ä¸Šä¸‹æ–‡ç®¡ç†å™¨</strong>ï¼šè´Ÿè´£ç®¡ç†ç”Ÿå‘½å‘¨æœŸçš„å¯¹è±¡ï¼Œé€šå¸¸å¯¹ä¸šåŠ¡ä»£ç ä¸å¯è§</li>
<li><strong>ä¸Šä¸‹æ–‡å˜é‡</strong>ï¼š<code>enterContext()</code> è¿”å›çš„å€¼ï¼Œè¿™æ‰æ˜¯ä¸šåŠ¡ä»£ç å®é™…ä½¿ç”¨çš„å¯¹è±¡</li>
</ul>
<p>ä¾‹å¦‚ï¼Œåœ¨æ–‡ä»¶å¤„ç†åœºæ™¯ä¸­ï¼ŒContext Manager å¯èƒ½æ˜¯ä¸€ä¸ª <code>FileManager</code> å¯¹è±¡ï¼Œè€Œä¸Šä¸‹æ–‡å˜é‡åˆ™æ˜¯å®é™…çš„æ–‡ä»¶å¥æŸ„ã€‚</p>
<h2 data-id="heading-5">æ‰§è¡Œæµç¨‹è¯¦è§£</h2>
<h3 data-id="heading-6">æˆåŠŸåœºæ™¯</h3>
<p>å½“ä»£ç å—æ­£å¸¸æ‰§è¡Œå®Œæ¯•æ—¶ï¼š</p>
<ol>
<li>éªŒè¯ EXPR è¿”å›çš„æ˜¯ <code>ContextManager</code> å®ä¾‹ï¼ˆå¦åˆ™æŠ›å‡º <code>TypeError</code>ï¼‰</li>
<li>è°ƒç”¨ <code>enterContext()</code>ï¼Œå°†è¿”å›å€¼èµ‹ç»™ä¸Šä¸‹æ–‡å˜é‡ï¼ˆå¦‚æœæŒ‡å®šäº† <code>as VAR</code>ï¼‰</li>
<li>æ‰§è¡Œä»£ç å—ä¸­çš„è¯­å¥</li>
<li>è°ƒç”¨ <code>exitContext()</code>ï¼ˆä¸ä¼ å‚æ•°ï¼‰</li>
<li>æ˜¾å¼ <code>unset()</code> ä¸Šä¸‹æ–‡å˜é‡</li>
<li>Context Manager è‡ªç„¶è¶…å‡ºä½œç”¨åŸŸï¼Œè¢«åƒåœ¾å›æ”¶</li>
</ol>
<h3 data-id="heading-7">å¤±è´¥åœºæ™¯</h3>
<p>å½“ä»£ç å—ä¸­æŠ›å‡ºå¼‚å¸¸æ—¶ï¼š</p>
<ol>
<li>æ•è·å¼‚å¸¸</li>
<li>è°ƒç”¨ <code>exitContext($exception)</code>ï¼Œä¼ å…¥æ•è·çš„å¼‚å¸¸</li>
<li>æ˜¾å¼ <code>unset()</code> ä¸Šä¸‹æ–‡å˜é‡</li>
<li>å¦‚æœ <code>exitContext()</code> è¿”å› <code>true</code>ï¼Œå¼‚å¸¸è¢«æŠ‘åˆ¶ï¼›å¦åˆ™é‡æ–°æŠ›å‡ºå¼‚å¸¸</li>
</ol>
<h3 data-id="heading-8">ç‰¹æ®Šæ§åˆ¶è¯­å¥</h3>
<p>åœ¨ <code>using</code> å—ä¸­ï¼Œä¸‰ä¸ªå…³é”®å­—æœ‰ç‰¹æ®Šå«ä¹‰ï¼š</p>
<ul>
<li><strong><code>break</code></strong>ï¼šè·³å‡º <code>using</code> å—ï¼Œè§†ä¸ºæˆåŠŸåœºæ™¯ã€‚å¦‚æœåœ¨åµŒå¥—æ§åˆ¶ç»“æ„ä¸­ï¼Œä½¿ç”¨ <code>break 2</code> ç­‰æ¥æŒ‡å®šè·³å‡ºå±‚çº§</li>
<li><strong><code>continue</code></strong>ï¼šè¡Œä¸ºåŒ <code>break</code>ï¼Œä½†ä¼šè§¦å‘è­¦å‘Šï¼ˆä¸ <code>switch</code> ä¿æŒä¸€è‡´ï¼‰</li>
<li><strong><code>return</code></strong>ï¼šä»å‡½æ•°è¿”å›ï¼Œå…ˆè§¦å‘æˆåŠŸåœºæ™¯çš„æ¸…ç†æµç¨‹ï¼Œå†è¿”å›</li>
</ul>
<p><strong>é‡è¦è¯´æ˜</strong>ï¼š<code>using</code> å—ä¸ä¼šåˆ›å»ºæ–°çš„ä½œç”¨åŸŸï¼ˆä¸åƒå‡½æ•°æˆ–é—­åŒ…ï¼‰ã€‚è¿™æ„å‘³ç€ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$outer</span> = <span class="hljs-string">'outside'</span>;

<span class="hljs-title function_ invoke__">using</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Manager</span>() <span class="hljs-keyword">as</span> <span class="hljs-variable">$ctx</span>) {
    <span class="hljs-comment">// å¯ä»¥è®¿é—®å¤–éƒ¨å˜é‡</span>
    <span class="hljs-keyword">echo</span> <span class="hljs-variable">$outer</span>; <span class="hljs-comment">// è¾“å‡ºï¼šoutside</span>
    
    <span class="hljs-comment">// åœ¨å—å†…å®šä¹‰çš„å˜é‡</span>
    <span class="hljs-variable">$inner</span> = <span class="hljs-string">'inside'</span>;
}

<span class="hljs-comment">// ä¸Šä¸‹æ–‡å˜é‡ $ctx å·²è¢«æ˜¾å¼ unsetï¼Œæ­¤å¤„ä¸å¯è®¿é—®</span>
<span class="hljs-comment">// var_dump($ctx); // é”™è¯¯ï¼šUndefined variable</span>

<span class="hljs-comment">// ä½†å—å†…å®šä¹‰çš„å…¶ä»–å˜é‡ä»ç„¶å­˜åœ¨</span>
<span class="hljs-keyword">echo</span> <span class="hljs-variable">$inner</span>; <span class="hljs-comment">// è¾“å‡ºï¼šinside</span>
</code></pre>
<h2 data-id="heading-9">å®ç°åŸç†</h2>
<p><code>using</code> å—åœ¨ç¼–è¯‘æ—¶ä¼šè¢«è½¬æ¢ï¼ˆdesugaringï¼‰ä¸ºä¼ ç»Ÿä»£ç ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•ç¤ºä¾‹çš„è½¬æ¢ç»“æœï¼š</p>
<p><strong>åŸå§‹ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-title function_ invoke__">using</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Manager</span>() <span class="hljs-keyword">as</span> <span class="hljs-variable">$var</span>) {
    <span class="hljs-keyword">print</span> <span class="hljs-string">"Hello world\n"</span>;
}
</code></pre>
<p><strong>ç­‰æ•ˆè½¬æ¢åçš„ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// æ­¥éª¤ 1: åˆ›å»ºä¸Šä¸‹æ–‡ç®¡ç†å™¨å®ä¾‹</span>
<span class="hljs-variable">$__mgr</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Manager</span>();

<span class="hljs-comment">// æ­¥éª¤ 2: æ ‡è®°å¼‚å¸¸å¤„ç†çŠ¶æ€ï¼ˆç¡®ä¿ exitContext åªè°ƒç”¨ä¸€æ¬¡ï¼‰</span>
<span class="hljs-variable">$__closed</span> = <span class="hljs-literal">false</span>;

<span class="hljs-comment">// æ­¥éª¤ 3: è°ƒç”¨ enterContext() å¹¶ä¿å­˜è¿”å›å€¼åˆ°ä¸Šä¸‹æ–‡å˜é‡</span>
<span class="hljs-variable">$var</span> = <span class="hljs-variable">$__mgr</span>-&gt;<span class="hljs-title function_ invoke__">enterContext</span>();

<span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// æ­¥éª¤ 4: æ‰§è¡Œç”¨æˆ·ä»£ç å—</span>
    <span class="hljs-keyword">print</span> <span class="hljs-string">"Hello world\n"</span>;
    
} <span class="hljs-keyword">catch</span> (\<span class="hljs-built_in">Throwable</span> <span class="hljs-variable">$e</span>) {
    <span class="hljs-comment">// æ­¥éª¤ 5a: æ•è·å¼‚å¸¸æ—¶çš„å¤„ç†ï¼ˆå¤±è´¥åœºæ™¯ï¼‰</span>
    <span class="hljs-variable">$__closed</span> = <span class="hljs-literal">true</span>;
    
    <span class="hljs-comment">// è°ƒç”¨ exitContext å¹¶ä¼ å…¥å¼‚å¸¸</span>
    <span class="hljs-variable">$__ret</span> = <span class="hljs-variable">$__mgr</span>-&gt;<span class="hljs-title function_ invoke__">exitContext</span>(<span class="hljs-variable">$e</span>);
    
    <span class="hljs-comment">// å¦‚æœè¿”å›å€¼ä¸æ˜¯ trueï¼Œåˆ™é‡æ–°æŠ›å‡ºå¼‚å¸¸</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable">$__ret</span> !== <span class="hljs-literal">true</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-variable">$e</span>;
    }
    <span class="hljs-comment">// å¦‚æœè¿”å› trueï¼Œåˆ™æŠ‘åˆ¶å¼‚å¸¸ï¼ˆä¸å†æŠ›å‡ºï¼‰</span>
    
} <span class="hljs-keyword">finally</span> {
    <span class="hljs-comment">// æ­¥éª¤ 5b/6: æ— è®ºå¦‚ä½•éƒ½ä¼šæ‰§è¡Œçš„æ¸…ç†ä»£ç </span>
    
    <span class="hljs-comment">// å¦‚æœæ²¡æœ‰å‘ç”Ÿå¼‚å¸¸ï¼ˆæˆåŠŸåœºæ™¯ï¼‰ï¼Œè°ƒç”¨ exitContext()</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable">$__closed</span>) {
        <span class="hljs-variable">$__mgr</span>-&gt;<span class="hljs-title function_ invoke__">exitContext</span>();
    }
    
    <span class="hljs-comment">// æ˜¾å¼æ¸…ç†æ‰€æœ‰ç›¸å…³å˜é‡</span>
    <span class="hljs-keyword">unset</span>(<span class="hljs-variable">$var</span>);      <span class="hljs-comment">// æ¸…ç†ä¸Šä¸‹æ–‡å˜é‡</span>
    <span class="hljs-keyword">unset</span>(<span class="hljs-variable">$__closed</span>); <span class="hljs-comment">// æ¸…ç†çŠ¶æ€æ ‡è®°</span>
    <span class="hljs-keyword">unset</span>(<span class="hljs-variable">$__mgr</span>);    <span class="hljs-comment">// æ¸…ç†ç®¡ç†å™¨ï¼ˆè§¦å‘åƒåœ¾å›æ”¶ï¼‰</span>
}
</code></pre>
<p><strong>å…³é”®è¦ç‚¹</strong>ï¼š</p>
<ul>
<li><code>$__mgr</code>ã€<code>$__closed</code>ã€<code>$__ret</code> ç­‰å˜é‡å®é™…ä¸Šä¸ä¼šä»¥è¿™ä¸ªåå­—æš´éœ²ï¼Œè¿™åªæ˜¯ä¸ºäº†è¯´æ˜å…¶å·¥ä½œåŸç†</li>
<li><strong><code>exitContext()</code> ä¿è¯åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡</strong>ï¼Œæ— è®ºæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥åœºæ™¯</li>
<li>æ‰€æœ‰éœ€è¦åœ¨ä¸¤ç§æƒ…å†µä¸‹æ‰§è¡Œçš„æ¸…ç†æ“ä½œéƒ½åº”è¯¥åœ¨ <code>exitContext()</code> ä¸­ç»Ÿä¸€å¤„ç†</li>
<li><code>finally</code> å—ç¡®ä¿æ¸…ç†ä»£ç ä¸€å®šä¼šæ‰§è¡Œï¼Œå³ä½¿åœ¨ <code>catch</code> ä¸­é‡æ–°æŠ›å‡ºå¼‚å¸¸</li>
</ul>
<h2 data-id="heading-10">å®æˆ˜åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-11">åœºæ™¯ä¸€ï¼šæ•°æ®åº“äº‹åŠ¡</h3>
<p>æ•°æ®åº“äº‹åŠ¡æ˜¯ Context Managers çš„å…¸å‹åº”ç”¨åœºæ™¯ã€‚ä¼ ç»Ÿæ–¹å¼éœ€è¦æ‰‹åŠ¨ç®¡ç†äº‹åŠ¡çš„å¼€å¯ã€æäº¤å’Œå›æ»šï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DatabaseTransaction</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ContextManager</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">
        <span class="hljs-keyword">private</span> DatabaseConnection <span class="hljs-variable">$connection</span>,
    </span>) </span>{}

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enterContext</span>(<span class="hljs-params"/>): <span class="hljs-title">DatabaseConnection</span>
    </span>{
        <span class="hljs-comment">// è¿”å›æ•°æ®åº“è¿æ¥ï¼Œä¾›ä¸šåŠ¡ä»£ç ä½¿ç”¨</span>
        <span class="hljs-comment">// æ³¨ï¼šå®é™…åº”ç”¨ä¸­å¯èƒ½éœ€è¦åœ¨æ­¤å¤„è°ƒç”¨ beginTransaction()</span>
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;connection;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">exitContext</span>(<span class="hljs-params">?\<span class="hljs-built_in">Throwable</span> <span class="hljs-variable">$e</span> = <span class="hljs-literal">null</span></span>): ?<span class="hljs-title">bool</span>
    </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$e</span>) {
            <span class="hljs-variable language_">$this</span>-&gt;connection-&gt;<span class="hljs-title function_ invoke__">rollback</span>();
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-variable language_">$this</span>-&gt;connection-&gt;<span class="hljs-title function_ invoke__">commit</span>();
        }
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DatabaseConnection</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">transaction</span>(<span class="hljs-params"/>): <span class="hljs-title">DatabaseTransaction</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatabaseTransaction</span>(<span class="hljs-variable language_">$this</span>);
    }
}
</code></pre>
<p>ä½¿ç”¨æ—¶éå¸¸ç®€æ´ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// æ³¨æ„è¿™é‡Œçœç•¥äº† 'as' è¡¨è¾¾å¼ï¼Œå› ä¸ºä¸éœ€è¦è¿”å›å€¼</span>
<span class="hljs-title function_ invoke__">using</span> (<span class="hljs-variable">$connection</span>-&gt;<span class="hljs-title function_ invoke__">transaction</span>()) {
    <span class="hljs-variable">$connection</span>-&gt;<span class="hljs-title function_ invoke__">insert</span>(<span class="hljs-string">'users'</span>, [<span class="hljs-string">'name'</span> =&gt; <span class="hljs-string">'Alice'</span>]);
    <span class="hljs-variable">$connection</span>-&gt;<span class="hljs-title function_ invoke__">insert</span>(<span class="hljs-string">'logs'</span>, [<span class="hljs-string">'action'</span> =&gt; <span class="hljs-string">'user_created'</span>]);
}
<span class="hljs-comment">// å¦‚æœæ²¡æœ‰å¼‚å¸¸ï¼Œäº‹åŠ¡è‡ªåŠ¨æäº¤ï¼›å¦‚æœæœ‰å¼‚å¸¸ï¼Œäº‹åŠ¡è‡ªåŠ¨å›æ»š</span>
</code></pre>
<h3 data-id="heading-12">åœºæ™¯äºŒï¼šæ–‡ä»¶é”å®š</h3>
<p>åœ¨éœ€è¦ç‹¬å è®¿é—®æŸä¸ªæ–‡ä»¶æ—¶ï¼Œæ–‡ä»¶é”å®šæœºåˆ¶è‡³å…³é‡è¦ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FileLock</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ContextManager</span>
</span>{
    <span class="hljs-keyword">private</span> <span class="hljs-variable">$handle</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">bool</span> <span class="hljs-variable">$locked</span> = <span class="hljs-literal">false</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">string</span> <span class="hljs-variable">$file</span>,
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">bool</span> <span class="hljs-variable">$forWriting</span> = <span class="hljs-literal">true</span>,
    </span>) </span>{}

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enterContext</span>(<span class="hljs-params"/>): <span class="hljs-title">mixed</span>
    </span>{
        <span class="hljs-variable language_">$this</span>-&gt;handle = <span class="hljs-title function_ invoke__">fopen</span>(<span class="hljs-variable">$this</span>-&gt;file, <span class="hljs-variable">$this</span>-&gt;forWriting ? <span class="hljs-string">'w'</span> : <span class="hljs-string">'r'</span>);
        <span class="hljs-variable language_">$this</span>-&gt;locked = <span class="hljs-title function_ invoke__">flock</span>(<span class="hljs-variable">$this</span>-&gt;handle, <span class="hljs-variable">$this</span>-&gt;forWriting ? LOCK_EX : LOCK_SH);
        
        <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">$this</span>-&gt;locked) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">\RuntimeException</span>(<span class="hljs-string">'Could not acquire lock.'</span>);
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;handle;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">exitContext</span>(<span class="hljs-params">?\<span class="hljs-built_in">Throwable</span> <span class="hljs-variable">$e</span> = <span class="hljs-literal">null</span></span>): ?<span class="hljs-title">bool</span>
    </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">$this</span>-&gt;locked) {
            <span class="hljs-title function_ invoke__">flock</span>(<span class="hljs-variable">$this</span>-&gt;handle, LOCK_UN);
        }
        <span class="hljs-title function_ invoke__">fclose</span>(<span class="hljs-variable">$this</span>-&gt;handle);
    }
}
</code></pre>
<p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// éœ€è¦å†™å…¥æ–‡ä»¶çš„ç‹¬å è®¿é—®</span>
<span class="hljs-title function_ invoke__">using</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileLock</span>(<span class="hljs-string">'file.txt'</span>) <span class="hljs-keyword">as</span> <span class="hljs-variable">$fp</span>) {
    <span class="hljs-title function_ invoke__">fwrite</span>(<span class="hljs-variable">$fp</span>, <span class="hljs-string">'important stuff'</span>);
}

<span class="hljs-comment">// ä»…ç”¨äºåŒæ­¥ï¼Œä¸å®é™…æ“ä½œæ–‡ä»¶</span>
<span class="hljs-title function_ invoke__">using</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileLock</span>(<span class="hljs-string">'sentinel'</span>)) {
    <span class="hljs-comment">// æ‰§è¡Œéœ€è¦åŒæ­¥çš„æ“ä½œï¼Œä¸æ¶‰åŠæ–‡ä»¶è¯»å†™</span>
}
</code></pre>
<h3 data-id="heading-13">åœºæ™¯ä¸‰ï¼šç»“æ„åŒ–å¼‚æ­¥æ§åˆ¶</h3>
<p>Context Managers ä¹Ÿå¯ä»¥ç”¨äºç®¡ç†å¼‚æ­¥åç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BlockingScope</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ContextManager</span>
</span>{
    <span class="hljs-keyword">private</span> Scope <span class="hljs-variable">$scope</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enterContext</span>(<span class="hljs-params"/>): <span class="hljs-title">Scope</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;scope = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scope</span>();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">exitContext</span>(<span class="hljs-params">?\<span class="hljs-built_in">Throwable</span> <span class="hljs-variable">$e</span> = <span class="hljs-literal">null</span></span>): ?<span class="hljs-title">bool</span>
    </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$e</span>) {
            <span class="hljs-comment">// å‘ç”Ÿå¼‚å¸¸æ—¶å–æ¶ˆæ‰€æœ‰åç¨‹</span>
            <span class="hljs-keyword">foreach</span> (<span class="hljs-variable language_">$this</span>-&gt;scope-&gt;routines <span class="hljs-keyword">as</span> <span class="hljs-variable">$r</span>) {
                <span class="hljs-variable">$r</span>-&gt;<span class="hljs-title function_ invoke__">cancel</span>();
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// æ­£å¸¸é€€å‡ºæ—¶ç­‰å¾…æ‰€æœ‰åç¨‹å®Œæˆ</span>
            <span class="hljs-keyword">foreach</span> (<span class="hljs-variable language_">$this</span>-&gt;scope-&gt;routines <span class="hljs-keyword">as</span> <span class="hljs-variable">$r</span>) {
                <span class="hljs-variable">$r</span>-&gt;<span class="hljs-title function_ invoke__">wait</span>();
            }
        }
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CancellingScope</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ContextManager</span>
</span>{
    <span class="hljs-keyword">private</span> Scope <span class="hljs-variable">$scope</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enterContext</span>(<span class="hljs-params"/>): <span class="hljs-title">Scope</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;scope = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scope</span>();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">exitContext</span>(<span class="hljs-params">?\<span class="hljs-built_in">Throwable</span> <span class="hljs-variable">$e</span> = <span class="hljs-literal">null</span></span>): ?<span class="hljs-title">bool</span>
    </span>{
        <span class="hljs-comment">// æ— è®ºå¦‚ä½•éƒ½å–æ¶ˆæ‰€æœ‰åç¨‹</span>
        <span class="hljs-keyword">foreach</span> (<span class="hljs-variable language_">$this</span>-&gt;scope-&gt;routines <span class="hljs-keyword">as</span> <span class="hljs-variable">$r</span>) {
            <span class="hljs-variable">$r</span>-&gt;<span class="hljs-title function_ invoke__">cancel</span>();
        }
    }
}
</code></pre>
<p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-title function_ invoke__">using</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">BlockingScope</span>() <span class="hljs-keyword">as</span> <span class="hljs-variable">$scope</span>) {
    <span class="hljs-variable">$scope</span>-&gt;<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-title function_ invoke__">someAsyncTask</span>());
    <span class="hljs-variable">$scope</span>-&gt;<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-title function_ invoke__">anotherAsyncTask</span>());
}
<span class="hljs-comment">// ä»£ç ä¼šé˜»å¡åœ¨è¿™é‡Œï¼Œç›´åˆ°æ‰€æœ‰åç¨‹å®Œæˆ</span>

<span class="hljs-title function_ invoke__">using</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">CancellingScope</span>() <span class="hljs-keyword">as</span> <span class="hljs-variable">$scope</span>) {
    <span class="hljs-variable">$scope</span>-&gt;<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-title function_ invoke__">longRunningTask</span>());
    <span class="hljs-variable">$scope</span>-&gt;<span class="hljs-title function_ invoke__">wait</span>(<span class="hljs-number">5</span>); <span class="hljs-comment">// ç­‰å¾… 5 ç§’</span>
}
<span class="hljs-comment">// 5 ç§’åæ‰€æœ‰æœªå®Œæˆçš„åç¨‹ä¼šè¢«ç«‹å³å–æ¶ˆ</span>
</code></pre>
<h3 data-id="heading-14">åœºæ™¯å››ï¼šä¸´æ—¶ä¿®æ”¹å…¨å±€é…ç½®</h3>
<p>æœ‰æ—¶éœ€è¦ä¸´æ—¶ä¿®æ”¹æŸä¸ªå…¨å±€è®¾ç½®ï¼Œæ‰§è¡Œå®Œç‰¹å®šä»£ç åæ¢å¤ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomErrorHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ContextManager</span>
</span>{
    <span class="hljs-keyword">private</span> <span class="hljs-variable">$oldHandler</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">
        <span class="hljs-keyword">private</span> <span class="hljs-variable">$newHandler</span>,
    </span>) </span>{}

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enterContext</span>(<span class="hljs-params"/>): <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-variable language_">$this</span>-&gt;oldHandler = <span class="hljs-title function_ invoke__">set_error_handler</span>(<span class="hljs-variable">$this</span>-&gt;newHandler);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">exitContext</span>(<span class="hljs-params">?\<span class="hljs-built_in">Throwable</span> <span class="hljs-variable">$e</span> = <span class="hljs-literal">null</span></span>): ?<span class="hljs-title">bool</span>
    </span>{
        <span class="hljs-title function_ invoke__">set_error_handler</span>(<span class="hljs-variable">$this</span>-&gt;oldHandler);
    }
}
</code></pre>
<p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// ä¸´æ—¶ç¦ç”¨æ‰€æœ‰é”™è¯¯å¤„ç†</span>
<span class="hljs-title function_ invoke__">using</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomErrorHandler</span>(fn() =&gt; <span class="hljs-literal">null</span>)) {
    <span class="hljs-comment">// åœ¨è¿™é‡Œ"å±é™©åœ°"æ‰§è¡Œä»£ç </span>
}
<span class="hljs-comment">// é€€å‡ºå—åï¼Œä¹‹å‰çš„é”™è¯¯å¤„ç†å™¨å·²è‡ªåŠ¨æ¢å¤</span>
</code></pre>
<p>ç±»ä¼¼çš„ï¼Œå¯ä»¥åˆ›å»ºç”¨äºä¸´æ—¶ä¿®æ”¹ <code>ini</code> è®¾ç½®çš„ Context Managerã€‚</p>
<h3 data-id="heading-15">åœºæ™¯äº”ï¼šç®€åŒ–çš„æ–‡ä»¶å¤„ç†</h3>
<p>å¯¹äºå¸¸è§çš„æ–‡ä»¶æ“ä½œï¼Œå¯ä»¥åˆ›å»ºä¾¿åˆ©çš„å·¥å‚å‡½æ•°ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">file_for_write</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$filename</span></span>): <span class="hljs-title">ContextManager</span>
</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-class"><span class="hljs-keyword">class</span>($<span class="hljs-title">filename</span>) <span class="hljs-keyword">implements</span> <span class="hljs-title">ContextManager</span> </span>{
        <span class="hljs-keyword">private</span> <span class="hljs-variable">$handle</span>;
        
        <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">string</span> <span class="hljs-variable">$file</span></span>) </span>{}
        
        <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enterContext</span>(<span class="hljs-params"/>): <span class="hljs-title">mixed</span>
        </span>{
            <span class="hljs-variable language_">$this</span>-&gt;handle = <span class="hljs-title function_ invoke__">fopen</span>(<span class="hljs-variable">$this</span>-&gt;file, <span class="hljs-string">'w'</span>);
            <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">$this</span>-&gt;handle) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">\RuntimeException</span>(<span class="hljs-string">"Cannot open file: <span class="hljs-subst">{$this-&gt;file}</span>"</span>);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;handle;
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">exitContext</span>(<span class="hljs-params">?\<span class="hljs-built_in">Throwable</span> <span class="hljs-variable">$e</span> = <span class="hljs-literal">null</span></span>): ?<span class="hljs-title">bool</span>
        </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">$this</span>-&gt;handle) {
                <span class="hljs-title function_ invoke__">fclose</span>(<span class="hljs-variable">$this</span>-&gt;handle);
            }
        }
    };
}
</code></pre>
<p>ä½¿ç”¨æ—¶éå¸¸ç›´è§‚ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-title function_ invoke__">using</span> (<span class="hljs-title function_ invoke__">file_for_write</span>(<span class="hljs-string">'output.txt'</span>) <span class="hljs-keyword">as</span> <span class="hljs-variable">$fp</span>) {
    <span class="hljs-title function_ invoke__">fwrite</span>(<span class="hljs-variable">$fp</span>, <span class="hljs-string">"Line 1\n"</span>);
    <span class="hljs-title function_ invoke__">fwrite</span>(<span class="hljs-variable">$fp</span>, <span class="hljs-string">"Line 2\n"</span>);
}
<span class="hljs-comment">// æ–‡ä»¶è‡ªåŠ¨å…³é—­ï¼Œæ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸</span>
</code></pre>
<h2 data-id="heading-16">é«˜çº§ç‰¹æ€§</h2>
<h3 data-id="heading-17">åµŒå¥—ä¸Šä¸‹æ–‡ç®¡ç†å™¨</h3>
<p><code>using</code> è¯­å¥æ”¯æŒåœ¨ä¸€ä¸ªè¯­å¥ä¸­ä½¿ç”¨å¤šä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œç”¨é€—å·åˆ†éš”ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-title function_ invoke__">using</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Foo</span>() <span class="hljs-keyword">as</span> <span class="hljs-variable">$foo</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bar</span>() <span class="hljs-keyword">as</span> <span class="hljs-variable">$bar</span>) {
    <span class="hljs-comment">// å¯ä»¥åŒæ—¶ä½¿ç”¨ $foo å’Œ $bar</span>
}
</code></pre>
<p>è¿™ç­‰ä»·äºåµŒå¥—çš„å†™æ³•ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-title function_ invoke__">using</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Foo</span>() <span class="hljs-keyword">as</span> <span class="hljs-variable">$foo</span>) {
    <span class="hljs-title function_ invoke__">using</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Bar</span>() <span class="hljs-keyword">as</span> <span class="hljs-variable">$bar</span>) {
        <span class="hljs-comment">// å¯ä»¥åŒæ—¶ä½¿ç”¨ $foo å’Œ $bar</span>
    }
}
</code></pre>
<p><strong>é‡è¦</strong>ï¼šåé¢çš„ç®¡ç†å™¨ä¼šå…ˆæ‰§è¡Œæ¸…ç†ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ<code>Bar</code> çš„ <code>exitContext()</code> ä¼šå…ˆäº <code>Foo</code> çš„ <code>exitContext()</code> æ‰§è¡Œï¼Œè¿™ç¬¦åˆ LIFOï¼ˆåè¿›å…ˆå‡ºï¼‰çš„èµ„æºç®¡ç†åŸåˆ™ã€‚</p>
<h3 data-id="heading-18">Resource è‡ªåŠ¨åŒ…è£…</h3>
<p>ç”±äº PHP ä¸­çš„èµ„æºï¼ˆresourceï¼‰ç±»å‹å°šæœªå®Œå…¨å¯¹è±¡åŒ–ï¼ˆå¦‚ <code>fopen()</code> è¿”å›çš„æ–‡ä»¶å¥æŸ„ï¼‰ï¼ŒRFC ç‰¹åˆ«ä¸ºèµ„æºæä¾›äº†è‡ªåŠ¨åŒ…è£…æœºåˆ¶ã€‚</p>
<p>å½“ <code>using</code> è¡¨è¾¾å¼è¿”å›ä¸€ä¸ªèµ„æºç±»å‹æ—¶ï¼Œä¼šè‡ªåŠ¨åŒ…è£…æˆä¸€ä¸ªå†…ç½®çš„ Context Managerï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// è¿™æ®µä»£ç </span>
<span class="hljs-title function_ invoke__">using</span> (<span class="hljs-title function_ invoke__">fopen</span>(<span class="hljs-string">'foo.txt'</span>, <span class="hljs-string">'r'</span>) <span class="hljs-keyword">as</span> <span class="hljs-variable">$fp</span>) {
    <span class="hljs-title function_ invoke__">fwrite</span>(<span class="hljs-variable">$fp</span>, <span class="hljs-string">'bar'</span>);
}

<span class="hljs-comment">// ä¼šè‡ªåŠ¨è½¬æ¢ä¸º</span>
<span class="hljs-title function_ invoke__">using</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">ResourceContext</span>(<span class="hljs-title function_ invoke__">fopen</span>(<span class="hljs-string">'foo.txt'</span>, <span class="hljs-string">'r'</span>)) <span class="hljs-keyword">as</span> <span class="hljs-variable">$fp</span>) {
    <span class="hljs-title function_ invoke__">fwrite</span>(<span class="hljs-variable">$fp</span>, <span class="hljs-string">'bar'</span>);
}
</code></pre>
<p>å…¶ä¸­ <code>ResourceContext</code> å¤§è‡´ç­‰ä»·äºï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ResourceContext</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ContextManager</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-variable">$resource</span></span>) </span>{}

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enterContext</span>(<span class="hljs-params"/>): <span class="hljs-title">mixed</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;resource;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">exitContext</span>(<span class="hljs-params">?\<span class="hljs-built_in">Throwable</span> <span class="hljs-variable">$e</span> = <span class="hljs-literal">null</span></span>): ?<span class="hljs-title">bool</span>
    </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">is_resource</span>(<span class="hljs-variable">$this</span>-&gt;resource)) {
            <span class="hljs-title function_ invoke__">close</span>(<span class="hljs-variable">$this</span>-&gt;resource); <span class="hljs-comment">// C å±‚é¢çš„ç»Ÿä¸€å…³é—­å‡½æ•°</span>
        }
    }
}
</code></pre>
<p>è¿™æ ·å³ä½¿åœ¨èµ„æºå®Œå…¨å¯¹è±¡åŒ–ä¹‹å‰ï¼Œä¹Ÿèƒ½äº«å— Context Managers å¸¦æ¥çš„ä¾¿åˆ©ã€‚</p>
<h2 data-id="heading-19">è®¾è®¡å†³ç­–</h2>
<h3 data-id="heading-20">ä¸ºä½•é€‰æ‹© <code>using</code> è€Œé <code>with</code></h3>
<p>æœ€åˆçš„ææ¡ˆä½¿ç”¨ <code>with</code> å…³é”®å­—ï¼ˆä¸ Python ä¸€è‡´ï¼‰ï¼Œä½†å‘ç° Laravel åœ¨å…¨å±€åŠ©æ‰‹å‡½æ•°ä¸­å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>with()</code> çš„å‡½æ•°ã€‚å¼•å…¥ <code>with</code> å…³é”®å­—ä¼šå¯¼è‡´æ‰€æœ‰ Laravel åº”ç”¨åœ¨å‡çº§åˆ° PHP 8.6 æ—¶ç«‹å³ä¸å…¼å®¹ï¼Œè¿™æ˜¯ä¸å¯æ¥å—çš„ã€‚</p>
<p>ç»è¿‡è°ƒç ”å‘ç°ï¼Œ<code>using</code> åœ¨ Packagist å‰ 14000 ä¸ªåŒ…ä¸­ä»…å‡ºç° 2 æ¬¡ï¼ˆç›¸æ¯”ä¹‹ä¸‹ <code>with</code> å‡ºç° 19 æ¬¡ï¼‰ã€‚C# ä¹Ÿä½¿ç”¨ <code>using</code> å®ç°ç±»ä¼¼ï¼ˆä½†åŠŸèƒ½è¾ƒå¼±ï¼‰çš„ç‰¹æ€§ã€‚å› æ­¤æœ€ç»ˆé€‰æ‹©äº† <code>using</code> å…³é”®å­—ã€‚</p>
<h3 data-id="heading-21">ä¸ºä½•ä¸ä½¿ç”¨ææ„å‡½æ•°</h3>
<p>æœ‰äººå¯èƒ½ä¼šæƒ³ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨å¯¹è±¡çš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°æ¥å®ç°"è¿›å…¥"å’Œ"é€€å‡º"é€»è¾‘å‘¢ï¼Ÿè¿™ç§æ–¹æ¡ˆå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ol>
<li><strong>æ— æ³•åˆ†ç¦»ç®¡ç†å™¨å’Œå˜é‡</strong>ï¼šæ— æ³•åŒºåˆ†ç®¡ç†å¯¹è±¡å’Œå®é™…ä½¿ç”¨çš„å¯¹è±¡</li>
<li><strong>æ— æ³•åŒºåˆ†æˆåŠŸ/å¤±è´¥</strong>ï¼šææ„å‡½æ•°ä¸æ¥å—å‚æ•°ï¼Œæ— æ³•çŸ¥é“æ˜¯æ­£å¸¸é€€å‡ºè¿˜æ˜¯å¼‚å¸¸é€€å‡º</li>
<li><strong>æ—¶æœºä¸å¯æ§</strong>ï¼šææ„å‡½æ•°çš„è°ƒç”¨æ—¶æœºä¸ç¡®å®šï¼Œå¯èƒ½å› ä¸ºå˜é‡è¢«å…¶ä»–åœ°æ–¹å¼•ç”¨è€Œå»¶è¿Ÿæ‰§è¡Œ</li>
<li><strong>é¡ºåºé—®é¢˜</strong>ï¼šåœ¨åƒåœ¾å›æ”¶æœŸé—´ï¼Œææ„å‡½æ•°çš„è°ƒç”¨é¡ºåºæ˜¯ä¸ç¡®å®šçš„</li>
</ol>
<p>å› æ­¤ï¼ŒRFC é‡‡ç”¨äº†æ˜¾å¼çš„æ¥å£è®¾è®¡ã€‚</p>
<h2 data-id="heading-22">å½±å“å’Œå±•æœ›</h2>
<h3 data-id="heading-23">å‘åå…¼å®¹æ€§</h3>
<ul>
<li>å¼•å…¥äº†æ–°çš„å…¨å±€æ¥å£ <code>ContextManager</code></li>
<li>å¼•å…¥äº†æ–°çš„åŠä¿ç•™å…³é”®å­— <code>using</code>ï¼ˆç¦æ­¢ç”¨äºå…¨å±€å¸¸é‡å’Œå‡½æ•°ï¼Œä½†æ–¹æ³•å’Œç±»å¸¸é‡ä»å¯ä½¿ç”¨ï¼‰</li>
</ul>
<p>ç”±äºå…¨å±€å‘½åç©ºé—´é€šå¸¸è¢«è®¤ä¸ºæ˜¯ PHP å†…éƒ¨ä¿ç•™çš„ï¼Œé¢„è®¡ä¸ä¼šæœ‰é‡å¤§å…¼å®¹æ€§é—®é¢˜ã€‚</p>
<h3 data-id="heading-24">ç”Ÿæ€ç³»ç»Ÿå½±å“</h3>
<p>Context Managers ä½œä¸ºä¸€ä¸ªé€šç”¨çš„"è®¾ç½®-æ¸…ç†"æŠ½è±¡ï¼Œæœªæ¥çš„ PHP API è®¾è®¡å¯èƒ½ä¼šè€ƒè™‘æä¾›ç›¸åº”çš„ Context Managerï¼Œè€Œä¸æ˜¯å¼•å…¥æ–°çš„è¯­æ³•ç³–ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>æ•°æ®åº“åº“å¯èƒ½æä¾›äº‹åŠ¡ Context Manager</li>
<li>HTTP å®¢æˆ·ç«¯å¯èƒ½æä¾›è¿æ¥æ±  Context Manager</li>
<li>æ—¥å¿—åº“å¯èƒ½æä¾›ä¸Šä¸‹æ–‡çº§åˆ«é…ç½® Context Manager</li>
</ul>
<h3 data-id="heading-25">æœªæ¥å¯èƒ½æ€§ï¼šGenerator è£…é¥°å™¨</h3>
<p>Python å…è®¸ä½¿ç”¨ç”Ÿæˆå™¨ï¼ˆgeneratorï¼‰å’Œè£…é¥°å™¨æ¥åˆ›å»º Context Managerï¼Œä½¿è¯­æ³•æ›´ç®€æ´ã€‚PHP ä¹ŸéªŒè¯äº†ç±»ä¼¼å®ç°çš„å¯è¡Œæ€§ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">#[ContextManager</span><span class="hljs-meta">]</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">opening</span>(<span class="hljs-params"><span class="hljs-variable">$filename</span></span>) </span>{
    <span class="hljs-variable">$f</span> = <span class="hljs-title function_ invoke__">fopen</span>(<span class="hljs-variable">$filename</span>, <span class="hljs-string">"r"</span>);
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable">$f</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Exception</span>(<span class="hljs-string">"fopen(<span class="hljs-subst">$filename</span>) failed"</span>);
    }
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">yield</span> <span class="hljs-variable">$f</span>;
    } <span class="hljs-keyword">finally</span> {
        <span class="hljs-title function_ invoke__">fclose</span>(<span class="hljs-variable">$f</span>);
    }
}

<span class="hljs-title function_ invoke__">using</span> (<span class="hljs-title function_ invoke__">opening</span>(<span class="hljs-keyword">__FILE__</span>) <span class="hljs-keyword">as</span> <span class="hljs-variable">$f</span>) {
    <span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$f</span>);
}
</code></pre>
<p>ä¸è¿‡å½“å‰ RFC è®¤ä¸ºå¯¹è±¡å½¢å¼å·²ç»è¶³å¤Ÿï¼Œè¿™ä¸ªç‰¹æ€§è¢«åˆ—ä¸ºæœªæ¥å¯èƒ½çš„å¢å¼ºã€‚</p>
<h2 data-id="heading-26">æ€»ç»“</h2>
<p>PHP Context Managers ä¸ºèµ„æºç”Ÿå‘½å‘¨æœŸç®¡ç†æä¾›äº†ä¸€ç§ä¼˜é›…ä¸”ç»Ÿä¸€çš„è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡ <code>using</code> å…³é”®å­—å’Œ <code>ContextManager</code> æ¥å£ï¼Œå¼€å‘è€…å¯ä»¥ï¼š</p>
<ul>
<li><strong>å‡å°‘æ ·æ¿ä»£ç </strong>ï¼šä¸å†éœ€è¦ä¸ºæ¯ä¸ªèµ„æºæ“ä½œç¼–å†™é‡å¤çš„ try-finally é€»è¾‘</li>
<li><strong>æé«˜ä»£ç å¯é æ€§</strong>ï¼šä¿è¯æ¸…ç†ä»£ç ä¸€å®šä¼šæ‰§è¡Œï¼Œå³ä½¿å‘ç”Ÿå¼‚å¸¸</li>
<li><strong>æå‡å¯è¯»æ€§</strong>ï¼šä¸šåŠ¡é€»è¾‘æ›´æ¸…æ™°ï¼Œä¸å†è¢«èµ„æºç®¡ç†ç»†èŠ‚å¹²æ‰°</li>
<li><strong>ä¿ƒè¿›ä»£ç å¤ç”¨</strong>ï¼šå°†é€šç”¨çš„èµ„æºç®¡ç†æ¨¡å¼å°è£…æˆå¯å¤ç”¨çš„ Context Manager</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>æ–‡ä»¶æ“ä½œ</li>
<li>æ•°æ®åº“äº‹åŠ¡</li>
<li>é”ç®¡ç†</li>
<li>ä¸´æ—¶é…ç½®ä¿®æ”¹</li>
<li>å¼‚æ­¥ä»»åŠ¡ç®¡ç†</li>
<li>ä»»ä½•éœ€è¦"è®¾ç½®-ä½¿ç”¨-æ¸…ç†"æ¨¡å¼çš„åœºæ™¯</li>
</ul>
<p>Context Managers å°†éš <strong>PHP 8.6</strong> å‘å¸ƒï¼Œç›®å‰å¤„äºè®¨è®ºé˜¶æ®µã€‚å¦‚æœä½ å¯¹æ­¤ç‰¹æ€§æ„Ÿå…´è¶£ï¼Œå¯ä»¥å…³æ³¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwiki.php.net%2Frfc%2Fcontext_managers" target="_blank" title="https://wiki.php.net/rfc/context_managers" ref="nofollow noopener noreferrer">RFC è®¨è®º</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Farnaud-lb%2Fphp-src%2Fpull%2F26" target="_blank" title="https://github.com/arnaud-lb/php-src/pull/26" ref="nofollow noopener noreferrer">å®ç°ä»£ç </a>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¸©å‘æ—¥è®°ï¼šä¸ºä»€ä¹ˆGit çªç„¶ Push ä¸ä¸Šå»äº†]]></title>    <link>https://juejin.cn/post/7575112613777899554</link>    <guid>https://juejin.cn/post/7575112613777899554</guid>    <pubDate>2025-11-23T07:28:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575112613777899554" data-draft-id="7575106644499087394" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¸©å‘æ—¥è®°ï¼šä¸ºä»€ä¹ˆGit çªç„¶ Push ä¸ä¸Šå»äº†"/> <meta itemprop="keywords" content="GitHub,Git,SSH"/> <meta itemprop="datePublished" content="2025-11-23T07:28:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°Luçš„æ—¥å¸¸"/> <meta itemprop="url" content="https://juejin.cn/user/2585689638569422"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¸©å‘æ—¥è®°ï¼šä¸ºä»€ä¹ˆGit çªç„¶ Push ä¸ä¸Šå»äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2585689638569422/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°Luçš„æ—¥å¸¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T07:28:34.000Z" title="Sun Nov 23 2025 07:28:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»Šå¤©åœ¨å¼€å‘çš„æ—¶å€™é‡åˆ°ä¸€ä¸ªå¾ˆç¦»è°±çš„é—®é¢˜ï¼Œgit push æ˜æ˜æ˜¨å¤©è¿˜å¥½å¥½çš„ï¼Œç»“æœä»Šå¤©çªç„¶å®Œå…¨æ¨ä¸ä¸Šå»ã€‚</p>
<p>æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">ERROR:</span> no healthy upstream
<span class="hljs-symbol">fatal:</span> Could <span class="hljs-built_in">not</span> read <span class="hljs-keyword">from</span> remote repository.

Please make sure you have the correct access rights
<span class="hljs-built_in">and</span> the repository exists.
</code></pre>
<p>æˆ–è€…æ˜¯</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">ERROR:</span> upstream connect <span class="hljs-keyword">error</span> <span class="hljs-built_in">or</span> disconnect/reset before headers.
remote connection failure, transport failure reason: delayed connect <span class="hljs-keyword">error</span>: Connection refused
<span class="hljs-symbol">fatal:</span> Could <span class="hljs-built_in">not</span> read <span class="hljs-keyword">from</span> remote repository.
</code></pre>
<p>ä¸€å¼€å§‹æˆ‘ä»¥ä¸ºæ˜¯ GitHub æŒ‚äº†ï¼Œæˆ–è€…æˆ‘ SSH key å¤±æ•ˆäº†ã€‚ç»“æœä¸€åˆ‡æ­£å¸¸ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">ssh -T git@github.com

Hi shenlu89! You<span class="hljs-comment">'ve successfully authenticated, but GitHub does not provide shell access.</span>
</code></pre>
<p>æˆ‘åˆæŸ¥äº†ä¸€ä¸‹è¿œç«¯Gitä»“åº“çš„URLæ˜¯å¦æ­£ç¡®ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">git remote -v 
origin  git<span class="hljs-keyword">@github</span>.<span class="hljs-attribute">com</span>:shenlu89/docs.git (fetch)
origin  git<span class="hljs-keyword">@github</span>.<span class="hljs-attribute">com</span>:shenlu89/docs.git (push)
</code></pre>
<p>SSH è¿æ¥æ²¡æœ‰é—®é¢˜</p>
<ul>
<li>ä»“åº“åœ°å€æ²¡é”™</li>
<li>SSH æˆæƒæ­£å¸¸</li>
<li>git remote -v æ­£å¸¸</li>
</ul>
<p>é‚£é—®é¢˜ä»å“ªé‡Œæ¥ï¼Ÿ</p>
<p>æ­£å¸¸æ¥è¯´ï¼Œä½¿ç”¨ SSH æ–¹å¼ pushï¼Œé‚£åªè¦ ssh -T å¯ç”¨ï¼Œpush ä¸€å®šå¯ç”¨ï¼Œä½†æˆ‘è¿™é‡Œï¼š</p>
<pre><code class="hljs language-java" lang="java">ssh -T git<span class="hljs-meta">@github</span>.com   <span class="hljs-comment">// æ­£å¸¸</span>
git push                <span class="hljs-comment">// å¤±è´¥</span>
</code></pre>
<p>è¿™è¯´æ˜ push åº•å±‚ä¸æ˜¯ç®€å•çš„ SSH é—®é¢˜ï¼Œè€Œæ˜¯ è¿æ¥è¢«ä»£ç†æˆ–ç½‘ç»œå¹²æ‰°äº†ã€‚</p>
<p>ç»§ç»­æ’æŸ¥ macOS ç³»ç»Ÿä»£ç†ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">networksetup -getwebproxy <span class="hljs-string">"Wi-Fi"</span>
networksetup -getsocksfirewallproxy <span class="hljs-string">"Wi-Fi"</span>
</code></pre>
<p>ç»“æœæ˜¯ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Enabled:</span> <span class="hljs-literal">Yes</span>
<span class="hljs-attr">Server:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>
<span class="hljs-attr">Port:</span> <span class="hljs-number">7890</span>
</code></pre>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼ŒmacOS ç³»ç»Ÿçº§ HTTP/HTTPS/SOCKS éƒ½æŒ‡å‘äº† 127.0.0.1:7890ã€‚</p>
<p>è¿™å°±å¯¼è‡´æ‰€æœ‰ Git è¿æ¥èµ°ç³»ç»Ÿä»£ç†ï¼Œç³»ç»Ÿä»£ç†ä¸ºç©ºï¼Œè¯·æ±‚è¢«ç›´æ¥æ‹’ç»ï¼ŒGit push æŠ¥ connection refused</p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ SSH æµ‹è¯•èƒ½è¿ï¼Œä½† git push åè€Œå¤±è´¥ã€‚</p>
<p>å› ä¸º SSH æµ‹è¯•å‘½ä»¤ä¸èµ°ç³»ç»Ÿä»£ç†ï¼Œè€Œ Git push èµ°äº†ã€‚</p>
<p>ç›´æ¥å…³æ‰ macOS çš„ä»£ç†å³å¯ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">networksetup -setwebproxystate <span class="hljs-string">"Wi-Fi"</span> <span class="hljs-keyword">off</span>
networksetup -setsecurewebproxystate <span class="hljs-string">"Wi-Fi"</span> <span class="hljs-keyword">off</span>
networksetup -setsocksfirewallproxystate <span class="hljs-string">"Wi-Fi"</span> <span class="hljs-keyword">off</span>
</code></pre>
<p>ç„¶åï¼š</p>
<pre><code class="hljs language-perl" lang="perl">git <span class="hljs-keyword">push</span>
</code></pre>
<p>ç¬é—´æ¢å¤æ­£å¸¸ã€‚</p>
<p>è¿˜æœ‰ä¸€ç§æ–¹æ³•ï¼Œå°±æ˜¯å°† GitHub SSH æ”¹ç”¨ 443 ç«¯å£ï¼Œä¸ºäº†å…¼å®¹å„ç§å¥‡æ€ªç½‘ç»œç¯å¢ƒï¼ˆå…¬å¸ã€å­¦æ ¡ã€é…’åº— WiFi ç­‰ï¼‰ï¼Œæˆ‘é¡ºæ‰‹ä¹ŸæŠŠ GitHub SSH é€šé“æ”¹åˆ°äº† 443 ç«¯å£ï¼Œç¼–è¾‘ ~/.ssh/configï¼š</p>
<pre><code class="hljs language-bash" lang="bash">Host github.com
    HostName ssh.github.com
    Port 443
    User git
    IdentityFile ~/.ssh/id_ed25519
    IdentitiesOnly <span class="hljs-built_in">yes</span>
</code></pre>
<p>443 ç«¯å£ä¸€èˆ¬ä¸ä¼šè¢«å°ï¼Œä¹Ÿä¸å—ä»£ç†å½±å“ï¼Œæ¯” 22 ç«¯å£ç¨³å®šå¤ªå¤šã€‚</p>
<p>è¿™æ ·é—®é¢˜å°±æˆåŠŸè§£å†³äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å›´å°çŒ«ç§˜ç±]]></title>    <link>https://juejin.cn/post/7575162322239979520</link>    <guid>https://juejin.cn/post/7575162322239979520</guid>    <pubDate>2025-11-23T08:21:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575162322239979520" data-draft-id="7575162322239963136" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å›´å°çŒ«ç§˜ç±"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-23T08:21:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é’é’å­è¡¿æ‚ æ‚ æˆ‘å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/4383112851623134"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å›´å°çŒ«ç§˜ç±
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4383112851623134/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é’é’å­è¡¿æ‚ æ‚ æˆ‘å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T08:21:37.000Z" title="Sun Nov 23 2025 08:21:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">åœ¨çº¿æ¸¸æˆ <a href="https://link.juejin.cn?target=https%3A%2F%2Fc.getline.cloud%2F" target="_blank" title="https://c.getline.cloud/" ref="nofollow noopener noreferrer">c.getline.cloud/</a></h4>
<h4 data-id="heading-1">ç¤¾åŒºä»£ç  <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwenyang0%2Fphaser-catch-the-cat" target="_blank" title="https://github.com/wenyang0/phaser-catch-the-cat" ref="nofollow noopener noreferrer">github.com/wenyang0/phâ€¦</a></h4>
<h2 data-id="heading-2">å›´ä½ä¸€åªçŒ«çŒ«éœ€è¦å‡ æ­¥ï¼Ÿ</h2>
<p>ä»Šå¤©è¦è®²çš„æ¸¸æˆå«åš<strong>å›´å°çŒ«</strong>ï¼Œ2021å¹´åº•åœ¨æœ‹å‹åœˆé‡Œç€å®æ˜¯ç«äº†ä¸€æŠŠï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰ç©è¿‡ï¼Œå¯ä»¥åœ¨æœç´¢å¼•æ“ä¸­æœç´¢â€œå›´å°çŒ«â€ã€‚è®°å¿†åŠ›å¥½çš„è¯»è€…å¯èƒ½ä¼šè®°å¾—ï¼Œè¿™æ¬¾æ¸¸æˆå¹¶ä¸æ˜¯ç¬¬ä¸€æ¬¡ç«äº†ï¼Œæ²¡é”™ï¼Œå®ƒå°±æ˜¯2014å¹´æ›¾åœ¨æœ‹å‹åœˆå¤§ç«è¿‡çš„â€œ<strong>å›´ä½ç¥ç»çŒ«</strong>â€çš„æ–°çš®è‚¤ï¼å…¶åŸå‹å¯ä»¥è¿½æº¯åˆ°æ›´æ—©ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50d89ac7f601408fb93618e7c043c26e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S6Z2S5a2Q6KG_5oKg5oKg5oiR5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764490897&amp;x-signature=Qsl3%2FrBH4GfLzZEmIqnodG%2F5sXo%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">æ¸¸æˆä»‹ç»</h3>
<p>é¦–å…ˆä»‹ç»ä¸€ä¸‹æ¸¸æˆè§„åˆ™ã€‚</p>
<ul>
<li><strong>åˆå§‹çŠ¶æ€</strong>ï¼šå°çŒ«ä½äºæ£‹ç›˜ä¸­å¿ƒï¼Œ6-8ä¸ªéšœç¢ç‰©ä¼šè¢«é¢„å…ˆéšæœºæ”¾ç½®åœ¨åœ°å›¾ä¸Šã€‚</li>
<li><strong>æˆ‘æ–¹è¡ŒåŠ¨</strong>ï¼šæ¯æ¬¡ç‚¹å‡»å°åœ†ç‚¹å°±å¯ä»¥åœ¨è¯¥å¤„æ”¾ç½®ä¸€ä¸ªéšœç¢ç‰©ã€‚</li>
<li><strong>çŒ«çŒ«è¡ŒåŠ¨</strong>ï¼šå°çŒ«ä¹Ÿä¼šå‘åœ°å›¾è¾¹ç¼˜ç§»åŠ¨ä¸€æ ¼ã€‚</li>
<li><strong>èƒœè´Ÿåˆ¤å®š</strong>ï¼š
<ul>
<li><strong>èƒœåˆ©</strong>ï¼šçŒ«çŒ«è¢«éšœç¢ç‰©å›´ä½ã€‚</li>
<li><strong>å¤±è´¥</strong>ï¼šçŒ«çŒ«åˆ°è¾¾åœ°å›¾è¾¹ç¼˜æºœèµ°ã€‚</li>
</ul>
</li>
</ul>
<p>è¿™æ ·ä¸æ–­é‡å¤ä¸‹å»ï¼Œç›´åˆ°æ¸¸æˆç»“æŸã€‚</p>
<p>åˆä¸Šæ‰‹çš„æ—¶å€™ä½ ä¼šå‘ç°ï¼Œè¿™ä¸ªæ¸¸æˆå¹¶ä¸ç®€å•ï¼Œå‡ ä¹å¾ˆéš¾æˆåŠŸã€‚å› ä¸ºæ£‹ç›˜å…¶å®å¹¶ä¸å¤§ï¼ŒçŒ«åªéœ€è¦5æ­¥å°±å¯ä»¥è·‘å‡ºæ£‹ç›˜è¾¹ç•Œï¼Œå¾ˆéš¾å°†å°çŒ«å µä½ã€‚</p>
<p>é‚£ä¹ˆä¸€ä¸ªè‡ªç„¶è€Œç„¶çš„é—®é¢˜æ˜¯ï¼š<strong>å¦‚æœæ£‹ç›˜è¶³å¤Ÿå¤§ï¼Œå¯ä»¥ä¿è¯å°†å°çŒ«å µä½å—ï¼Ÿ</strong> åœ¨å›ç­”è¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œè¯·è®©æˆ‘å…ˆä»‹ç»ä¸€ä¸‹â€œå¤©ä½¿é—®é¢˜â€ã€‚</p>
<h3 data-id="heading-4">å¤©ä½¿é—®é¢˜</h3>
<p>å¤©ä½¿é—®é¢˜é¦–æ¬¡è§äº1982å¹´å‡ºç‰ˆçš„ã€ŠWinning Waysã€‹ä¸€ä¹¦ï¼Œç”±ä¹¦ä½œè€…æ•°å­¦å®¶<strong>çº¦ç¿°Â·HÂ·åº·å¨</strong>ï¼ˆJohn H. Conwayï¼‰æå‡ºã€‚è¿™æ˜¯ä¸€ä¸ªåŒæ–¹ç©å®¶åˆ†åˆ«æ‰®æ¼”å¤©ä½¿å’Œæ¶é­”çš„åšå¼ˆæ¸¸æˆã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b22fb76a8d2a4b5ca01291480a98fb5a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S6Z2S5a2Q6KG_5oKg5oKg5oiR5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764490897&amp;x-signature=YFvnMhhKAH5wq%2B7TVKiFFNmSyFM%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>æ£‹ç›˜</strong>ï¼šæ¸¸æˆåœ¨ä¸€ä¸ªæ— é™å¤§æ–¹æ ¼æ£‹ç›˜ä¸Šè¿›è¡Œï¼Œèµ·å§‹æ£‹ç›˜æ˜¯ç©ºçš„ã€‚</li>
<li><strong>å¤©ä½¿</strong>ï¼šå®šä¹‰æ­£æ•´æ•°kä¸ºå¤©ä½¿çš„<strong>é˜¶æ•°</strong>ï¼Œké˜¶å¤©ä½¿æ¯æ­¥å¯ä»¥è·³åˆ°k*kèŒƒå›´å†…çš„ä»»ä½•ä¸€æ ¼ï¼Œæ— è®ºè·¯ä¸Šæœ‰æ²¡æœ‰éšœç¢ç‰©ã€‚</li>
<li><strong>æ¶é­”</strong>ï¼šæ¯ä¸€è½®ä¸­ï¼Œæ¶é­”å¯ä»¥åœ¨æ£‹ç›˜ä¸Šæ”¾ç½®ä¸€ä¸ªéšœç¢ç‰©ï¼Œä½†ä¸å¯æ”¾åœ¨å½“å‰å¤©ä½¿æ‰€åœ¨çš„ä½ç½®ã€‚</li>
<li><strong>èƒœè´Ÿ</strong>ï¼š
<ul>
<li>è‹¥åœ¨ä¸€è½®ä¸­ï¼Œå¤©ä½¿æ— æ³•ç§»åŠ¨ï¼Œåˆ™<strong>æ¶é­”è·èƒœ</strong>ã€‚</li>
<li>å¦‚æœå¤©ä½¿èƒ½æ— é™åœ°ç»§ç»­æ¸¸æˆï¼Œåˆ™<strong>å¤©ä½¿è·èƒœ</strong>ã€‚</li>
</ul>
</li>
</ul>
<p>åº·å¨å·²ç»è¯æ˜ï¼ˆè™½ç„¶ä»–è¯´æ˜¯è¯¥ä¹¦çš„å…±åŒä½œè€…ä¼¯åˆ©åæ™®å±•ç¤ºç»™ä»–çš„ï¼‰ï¼Œåªè¦æ£‹ç›˜å¤§å°å¤§äº32*33ï¼Œk=1çš„æƒ…å†µä¸‹æ¶é­”æ˜¯å¿…èƒœçš„ã€‚</p>
<p>ä¸ºæ–¹ä¾¿å±•ç¤ºï¼Œè¿™é‡Œå°†æ ¼ç‚¹åŒ–ä¸ºæ–¹æ ¼ã€‚å¦‚å›¾2æ‰€ç¤ºæ˜¯ä¸€ä¸ª33*33çš„æ£‹ç›˜ï¼Œå¤©ä½¿èµ·å§‹ä½äºçº¢è‰²æ–¹æ ¼ã€‚æ— è®ºå¤©ä½¿å¼€å±€æ€ä¹ˆèµ°ï¼Œæ¶é­”å‰8æ­¥åªéœ€å°†æ£‹ç›˜å››å‘¨çš„8ä¸ªé»‘æ ¼å¡«ä¸Šéšœç¢ç‰©ï¼Œè¿™æ—¶å¤©ä½¿å¿…ç„¶ä½äºä¸­é—´çš„è“è‰²åŒºåŸŸå†…ï¼Œè·ç¦»æ¥è§¦åŒ…å›´åœˆè¿˜æœ‰7æ­¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e127c1aa3e14800b0b33c4200a5ef70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S6Z2S5a2Q6KG_5oKg5oKg5oiR5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764490897&amp;x-signature=nNErLXb8nngKVGjdUFYjxR%2F19n0%3D" alt="image.png" loading="lazy"/></p>
<p>è€Œæ— è®ºå¤©ä½¿å‘å“ªä¸ªæ–¹å‘é€ƒï¼Œæ¶é­”éƒ½å¯ä»¥éš”ä¸€æ ¼æ”¾ä¸€ä¸ªéšœç¢ç‰©è¿™æ ·é€æ¸ç¼©å°ç¼ºå£ï¼Œä¿è¯åœ¨å¤©ä½¿æ¥è§¦æ£‹ç›˜è¾¹ç¼˜ä¹‹å‰å°†ç¼ºå£å µä¸Šï¼Œå› æ­¤æ¶é­”æ˜¯å¿…èƒœçš„ã€‚</p>
<h3 data-id="heading-5">å›åˆ°å›´å°çŒ«</h3>
<p>ä¸€é˜¶çš„å¤©ä½¿é—®é¢˜å‘Šè¯‰æˆ‘ä»¬ï¼Œåªè¦æ£‹ç›˜è¶³å¤Ÿå¤§ï¼Œè®©æˆ‘ä»¬å¯ä»¥æå‰å¸ƒç½®å¥½åŒ…å›´åœˆï¼Œå°±ä¸€å®šèƒ½å›´ä½å¤©ä½¿ã€‚è€Œä¸”å¤©ä½¿é—®é¢˜ä¸­çš„æ£‹ç›˜æ˜¯<strong>å…«è¿é€š</strong>çš„ï¼Œå³å¤©ä½¿å‘æ¨ªç«–æ–œå…«ä¸ªæ–¹å‘éƒ½å¯ä»¥ç§»åŠ¨ï¼Œæ‰€ä»¥å¸ƒç½®ä¸€ä¸ªåŒ…å›´åœˆè‡³å°‘éœ€è¦å…«æ­¥ã€‚è€Œå›´å°çŒ«ä¸­çš„æ£‹ç›˜æ˜¯<strong>å…­è¿é€š</strong>çš„ï¼Œå› æ­¤åŒ…å›´åœˆåªéœ€è¦6æ­¥ã€‚</p>
<p>æˆ‘ä»¬å®šä¹‰<strong>çŒ«çŒ«ä»ç©ºç™½æ£‹ç›˜ä¸­å¿ƒé€ƒè„±çš„æœ€å°‘æ­¥æ•°ä¸ºæ£‹ç›˜çš„æ·±åº¦n</strong>ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå›´å°çŒ«æ¸¸æˆçš„æ£‹ç›˜æ·±åº¦ä¸º5ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fae7ede7e26740388e006f99eea8d394~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S6Z2S5a2Q6KG_5oKg5oKg5oiR5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764490897&amp;x-signature=PyQoqXub0pokR%2BPDZ5sFYih9R7I%3D" alt="image.png" loading="lazy"/>
ä¸°å¯Œçš„æ¸¸æˆç»éªŒå‘Šè¯‰æˆ‘ï¼Œn=5æ˜¾ç„¶æ˜¯ä¸å¤Ÿçš„ã€‚å¦‚æœè¦ä¿è¯å¿…èƒœï¼Œåƒå¤©ä½¿é—®é¢˜é‡Œä¸€æ ·å¸ƒç½®ä¸€ä¸ªåŒ…å›´åœˆè‡³å°‘éœ€è¦6ä¸ªéšœç¢ç‰©ï¼Œä¹Ÿå°±æ˜¯6æ­¥ã€‚å› ä¸ºçŒ«næ­¥å°±ä¼šé€ƒå‡ºæ£‹ç›˜ï¼Œè€Œæˆ‘ä»¬å¿…é¡»åœ¨çŒ«é€ƒè„±ä¹‹å‰èŠ±è‡³å°‘ä¸€æ­¥å µä½é€ƒè„±çš„æ–¹å‘ï¼Œæ‰€ä»¥æ£‹ç›˜çš„æ·±åº¦nè‡³å°‘åº”è¯¥ä¸º6+1+1=8ã€‚</p>
<p>é‚£ä¹ˆæ£‹ç›˜éœ€è¦æœ‰å¤šå¤§æ‰èƒ½ä¿è¯å¿…èƒœå‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯<strong>n=8</strong>ã€‚å›¾ä¸­å¶æ•°å·æ ¼ç‚¹ä¸ºæˆ‘æ–¹æ”¾çš„éšœç¢ç‰©ï¼Œå¥‡æ•°å·æ ¼ç‚¹ä¾æ¬¡ä¸ºçŒ«çŒ«çš„è¡ŒåŠ¨è½¨è¿¹ï¼Œå¯ä»¥çœ‹åˆ°è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘æ–¹æ˜¯å¿…å®šè·èƒœçš„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31f9c308eef741b6ada10e7d52125285~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S6Z2S5a2Q6KG_5oKg5oKg5oiR5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764490897&amp;x-signature=9uwMqLRD9PuNalIxJ4%2Byhl70rps%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰€ä»¥ï¼Œ<strong>åªè¦æ£‹ç›˜çš„æ·±åº¦ä¸å°äº8ï¼Œå³ä½¿æ˜¯ä¸€ä¸ªç©ºç™½çš„æ£‹ç›˜ï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯å¿…å®šå¯ä»¥å›´ä½å°çŒ«çš„ã€‚</strong> ç›¸åº”åœ°ï¼Œåœ¨æ²¡æœ‰éšœç¢ç‰©çš„æƒ…å†µä¸‹ï¼Œæ£‹ç›˜æ·±åº¦å°äº8æ—¶æˆ‘ä»¬æ˜¯ä¸å¯èƒ½å›´ä½å°çŒ«çš„ã€‚</p>
<h3 data-id="heading-6">é‚£ä¹ˆï¼Œæœ‰éšœç¢ç‰©å‘¢ï¼Ÿ</h3>
<p>ç»ˆäºå›åˆ°äº†æˆ‘ä»¬æœ€åˆçš„é—®é¢˜ï¼š<strong>å¦‚ä½•åœ¨ä¸€ä¸ªn=5çš„æ£‹ç›˜ä¸Šåˆ©ç”¨å·²æœ‰çš„éšœç¢ç‰©å›´ä½çŒ«çŒ«ã€‚</strong></p>
<p>å…¶å®è¿™é‡Œçš„æ€è·¯è¿˜æ˜¯ä¸€æ ·çš„ï¼Œé‚£å°±æ˜¯ï¼šå…ˆç”¨è‹¥å¹²æ­¥å¸ƒç½®ä¸€ä¸ªåŒ…å›´åœˆï¼Œç„¶åé€šè¿‡å›´å µæ¥å®Œå–„åŒ…å›´åœˆã€‚å”¯ä¸€çš„ä¸åŒæ˜¯ï¼Œç”±äºæ£‹ç›˜ä¸å¤Ÿå¤§ï¼Œæˆ‘ä»¬å¿…é¡»åˆ©ç”¨å·²æœ‰çš„éšœç¢ç‰©æ¥å¸ƒç½®åŒ…å›´åœˆã€‚å’Œæ£‹ç›˜çš„æ·±åº¦ä¸€æ ·ï¼Œæˆ‘ä»¬å®šä¹‰<strong>åŒ…å›´åœˆçš„æ·±åº¦ä¸ºçŒ«çŒ«é€ƒå‡ºåŒ…å›´åœˆçš„æœ€å°‘æ­¥æ•°</strong>ã€‚å¾ˆæ˜¾ç„¶ï¼ŒåŒ…å›´åœˆè¶Šæ·±ï¼Œç•™ç»™æˆ‘ä»¬å¸ƒç½®é˜²çº¿çš„æ­¥æ•°å°±è¶Šå¤šã€‚</p>
<p>å…ˆæ¥ç ”ç©¶ä¸€ä¸‹åŒ…å›´åœˆåº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼š</p>
<ul>
<li>åŒ…å›´åœˆåº”å½“æ˜¯<strong>å…­è¾¹å½¢</strong>ï¼Œä¸æ£‹ç›˜å½¢çŠ¶ç›¸åŒã€‚</li>
<li>æ¯æ¡è¾¹éƒ½<strong>å¿…é¡»ç»è¿‡æ¯ä¸ªç»è¿‡æ ¼ç‚¹çš„åœ†å¿ƒ</strong>ï¼Œä¸å…è®¸æ–œç€ç›´æ¥è¿ã€‚</li>
<li>åªæœ‰åŒ…å›´åœˆçš„<strong>æ¯ä¸ªé¡¶ç‚¹</strong>ï¼ˆå¦‚ä¸‹é¢å›¾6ä¸­çš„1-6å·ç‚¹ï¼‰æˆ–è€…<strong>ä¸è¯¥é¡¶ç‚¹ç›¸é‚»ä¸”åœ¨åŒ…å›´åœˆä¸Šçš„æ ¼ç‚¹</strong>ï¼ˆå¦‚ä¸‹å›¾6ä¸­çš„7-15å·ç‚¹ï¼‰æœ‰éšœç¢ç‰©ï¼Œæ‰èƒ½èµ·åˆ°æŒ¡ä½çŒ«çŒ«çš„æ•ˆæœã€‚å¦‚æœä¸Šè¿°ä½ç½®æ²¡æœ‰éšœç¢ç‰©çš„è¯ï¼Œå°±æ— æ³•ä¿è¯åœ¨çŒ«çŒ«è¢«è¿½èµ¶åˆ°æ­¤å¤„æ—¶é—­åˆåŒ…å›´åœˆã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d09e8af6011b4b119ccf62883bf5cba2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S6Z2S5a2Q6KG_5oKg5oKg5oiR5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764490897&amp;x-signature=JOK236hgmRgUmBs3BPJZs54B2Eg%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚æœä¸€ä¸ªé¡¶ç‚¹æˆ–ä¸å…¶ç›¸é‚»ä¸”åœ¨åŒ…å›´åœˆä¸Šçš„æ ¼ç‚¹ä¸Šæœ‰éšœç¢ç‰©ï¼Œæˆ‘ä»¬å°±ç§°è¿™ä¸ªé¡¶ç‚¹<strong>å·²å®Œæˆ</strong>ï¼Œå®šä¹‰ä¸€ä¸ª<strong>åŒ…å›´åœˆçš„å®Œæˆåº¦ä¸ºå·²å®Œæˆçš„é¡¶ç‚¹æ•°é‡</strong>ã€‚ä¸‹é¢æˆ‘ä»¬ä¸¾ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec958e4073ee411098b78f7bd63b384c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S6Z2S5a2Q6KG_5oKg5oKg5oiR5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764490897&amp;x-signature=83Q0LPntbRJWr3FART%2FDFmikozI%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/734496a7e84d4208bb2c939f161cb2da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S6Z2S5a2Q6KG_5oKg5oKg5oiR5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764490897&amp;x-signature=%2ByXb1a4rcbk6%2FrgCQddumcVvEYk%3D" alt="image.png" loading="lazy"/>
å›¾6æ˜¯ä¸€ä¸ªåŒ…å›´åœˆçš„é›å½¢ï¼Œå¯ä»¥çœ‹åˆ°1ï¼Œ2ï¼Œ11ï¼Œ4ï¼Œ5å·ç‚¹éƒ½æœ‰éšœç¢ç‰©ï¼Œä»–ä»¬å¯¹åº”çš„é¡¶ç‚¹éƒ½å·²å®Œæˆã€‚ä½†å®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„åŒ…å›´åœˆï¼Œå› ä¸ºé¡¶ç‚¹6æ˜¯æœªå®Œæˆçš„ã€‚å¦‚æœçŒ«çŒ«ä»å³ä¸Šå¾€å·¦ä¸Šé€ƒï¼Œæˆ‘ä»¬å µä½8å·ç‚¹åçŒ«çŒ«ä¼šé€ƒè‡³16å·ç‚¹ï¼Œæ­¤æ—¶6ï¼Œ7ä¸¤ç‚¹å‡ç©ºï¼ŒçŒ«çŒ«é€ƒè„±ã€‚é¡¶ç‚¹5è™½ç„¶æœ‰éšœç¢ç‰©ï¼Œä½†å®ƒæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªé¡¶ç‚¹ï¼Œä¸èƒ½ç®—ä½œé¡¶ç‚¹6çš„ç›¸é‚»ç‚¹ã€‚æ‰€ä»¥è¿™ä¸ªåŒ…å›´åœˆçš„å®Œæˆåº¦æ˜¯5ã€‚</p>
<p>ä»æ£‹ç›˜æ·±åº¦ä¸º8çš„æƒ…å½¢æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œåœ¨åŒ…å›´åœˆå®Œæˆï¼Œå³å®Œæˆåº¦ä¸º6æ—¶ï¼Œå¦‚æœçŒ«çŒ«è·ç¦»åŒ…å›´åœˆè‡³å°‘æœ‰2æ ¼ï¼Œæˆ‘ä»¬æ ¹æ®çŒ«çŒ«çš„ä½ç½®æ”¾éšœç¢ç‰©æ¥å›´å µå°±å¯ä»¥å¿…èƒœã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>å¿…èƒœæ¡ä»¶æ˜¯åŒ…å›´åœˆæ·±åº¦ + åŒ…å›´åœˆå®Œæˆåº¦è‡³å°‘ä¸º8</strong>ã€‚</p>
<p>æ‰€å¹¸ï¼Œä¸Šå›¾ä¸­çš„çŒ«çŒ«è·ç¦»åŒ…å›´åœˆæœ‰3æ ¼ï¼Œä¹Ÿå°±æ˜¯è¯´åŒ…å›´åœˆçš„æ·±åº¦æ˜¯3ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬åªéœ€è¡¥ä¸ŠåŒ…å›´åœˆé‡Œç¼ºå¤±çš„ç‚¹ï¼Œå°±å¯ä»¥ä¿è¯å¿…èƒœã€‚è¿™å°±æ˜¯çœ‹è¿‡æœ¬æ–‡çš„æˆ‘ä»¬ï¼Œç¬¬ä¸€æ­¥è½åœ¨çœ‹ä¼¼ä¸éœ€è¦ä¼˜å…ˆå›´å µçš„6å·ç‚¹çš„åŸå› ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>ç”»åŒ…å›´åœˆä¹Ÿæ˜¯æœ‰æŠ€å·§çš„</strong>ã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªå›¾8å°±æœ‰ABä¸¤ç§ç”»åœˆçš„æ–¹å¼ï¼Œä¸”åŒ…å›´åœˆçš„å®Œæˆåº¦å‡ä¸º5ã€‚</p>
<ul>
<li>å¦‚æœæŒ‰ç…§<strong>çº¢è‰²çš„Aæ–¹æ¡ˆ</strong>è§„åˆ’4ï¼Œ5å·ç‚¹ä¹‹é—´çš„åŒ…å›´åœˆï¼Œåˆ™åŒ…å›´åœˆçš„æ·±åº¦ä¸º2ï¼Œ5+2&lt;8ï¼Œæ— æ³•å›´ä½çŒ«çŒ«ã€‚</li>
<li>å¦‚æœæŒ‰ç…§<strong>è“è‰²çš„æ–¹æ¡ˆB</strong>ï¼Œåˆ™åŒ…å›´åœˆçš„æ·±åº¦ä¸º3ï¼Œ5+3=8ï¼Œå¯ä»¥å›´ä½çŒ«çŒ«ã€‚</li>
</ul>
<p>æ‰€ä»¥ç”»åœˆçš„æ–¹å¼ä¹Ÿæ˜¯å¾ˆé‡è¦çš„å“¦ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c253ad1207f44269b9d87554e1898ed1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S6Z2S5a2Q6KG_5oKg5oKg5oiR5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764490897&amp;x-signature=LyA3Cx6A0sxctaAGCGbjAfcPqC8%3D" alt="image.png" loading="lazy"/></p>
<p>ç„¶è€Œï¼Œç”±äºæ¸¸æˆæ¡ä»¶çš„é™åˆ¶ï¼Œåˆå§‹åªæœ‰6-8ä¸ªéšœç¢ç‰©ï¼Œæ£‹ç›˜æ·±åº¦ä¹Ÿåªæœ‰5ï¼Œæ‰€ä»¥å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯æ— æ³•å¿…èƒœçš„ï¼Œå¦‚æœæƒ³å›´ä½å°çŒ«ï¼Œå°±å¤šå¤šåœ°åˆ·æ–°å§ï¼</p>
<p>ä¸è¿‡ï¼Œå®é™…ä¸Šæ¸¸æˆé‡Œçš„è¿™åªå°çŒ«å¹¶ä¸å¤ªèªæ˜ï¼Œå®ƒçš„é€ƒè„±é€»è¾‘åªæ˜¯ä¸€ä¸ª<strong>å•å±‚çš„è´ªå¿ƒç®—æ³•</strong>ï¼šåªè€ƒè™‘å½“å‰çœ‹æ¥æ˜¯æœ€å¥½çš„é€ƒè„±è·¯çº¿ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ç‚¹è®¾ä¸‹é™·é˜±ï¼Œè¯±å¯¼çŒ«çŒ«èµ°å‡ºå¤šä½™çš„æ­¥æ•°ï¼Œä»è€Œèµ¢ä¸‹æ— æ³•å¿…èƒœçš„æ£‹ç›˜ï¼Œæœ‰å…´è¶£çš„è¯»è€…æœ‹å‹ä¸€å®šè¦å»è¯•ä¸€è¯•å“¦ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b8da92d294b4d5497ad26d245eb7d5a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S6Z2S5a2Q6KG_5oKg5oKg5oiR5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764490897&amp;x-signature=ioO5GPCWelHSQpxc5iKQUWAyz3s%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-7">å›´ä½çŒ«çŒ«çš„ç§˜è¯€ï¼</h3>
<p>æœ€åï¼Œè®©æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹å›´ä½çŒ«çŒ«çš„ç§˜è¯€å§ï¼åªéœ€è¦ç®€å•çš„ä¸‰æ­¥å“¦ã€‚</p>
<ol>
<li><strong>ç¬¬ä¸€æ­¥</strong>ï¼šæ ¹æ®å·²æœ‰çš„åˆå§‹éšœç¢ç‰©åˆ’å®šåŒ…å›´åœˆï¼Œåœ¨ä¿è¯æœ‰å°½å¯èƒ½å¤šé¡¶ç‚¹è¢«å®Œæˆçš„å‰æä¸‹ï¼Œè®©åŒ…å›´åœˆçš„æ·±åº¦å°½å¯èƒ½åœ°å¤§ã€‚</li>
<li><strong>ç¬¬äºŒæ­¥</strong>ï¼šåˆ¤æ–­<strong>åŒ…å›´åœˆå®Œæˆåº¦ + åŒ…å›´åœˆçš„æ·±åº¦</strong>æ˜¯å¦<strong>â‰¥8</strong>ï¼Ÿå¦‚æœå°äºåˆ™æ— æ³•ä¿è¯å›´ä½çŒ«çŒ«ï¼Œç›´æ¥é‡ç½®ã€‚</li>
<li><strong>ç¬¬ä¸‰æ­¥</strong>ï¼šå…ˆå°†åŒ…å›´åœˆå®Œæˆï¼Œç„¶åå¯¹åº”çŒ«çŒ«æ‰€åœ¨ä½ç½®è¿›è¡Œå›´å µå³å¯è·èƒœã€‚</li>
</ol>
<h3 data-id="heading-8">å†™åœ¨æœ€å</h3>
<p>è¿˜è®°å¾—å¼€å¤´è¯´çš„å¤©ä½¿é—®é¢˜å—ï¼Ÿè¿™ä¸ªé—®é¢˜å…¶å®å¹¶æ²¡æœ‰è¢«å®Œå…¨è§£å†³ã€‚ç›®å‰åœ¨å¤©ä½¿çš„é˜¶æ•°kæ¯”è¾ƒå°ï¼Œæ¯”å¦‚k=2çš„æ—¶å€™ï¼Œæ•°å­¦å®¶å·²ç»è¯æ˜å¤©ä½¿åœ¨æ— é™å¤§æ£‹ç›˜ä¸Šæ˜¯å¿…èƒœçš„ï¼Œä½†æ˜¯å¯¹äºä»»æ„æœ‰é™é˜¶çš„å¤©ä½¿ï¼Œå“ªæ–¹èƒ½å¿…èƒœè¿™ä¸ªé—®é¢˜å°šæ— ç­”æ¡ˆã€‚</p>
<p>ä¹Ÿè®¸ï¼Œèƒ½å¤Ÿè§£å†³è¿™ä¸ªé—®é¢˜çš„å°±æ˜¯èªæ˜çš„ä½ ã€‚</p>
<p><strong>è§£å†³ä¸äº†ä¹Ÿæ²¡å…³ç³»ï¼Œè‡³å°‘ï¼Œä½ å­¦ä¼šå¦‚ä½•æŠ“ä½çŒ«çŒ«äº†ï¼Œå¯¹å§ï¼Ÿ</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä» JDK1.2 åˆ° JDK21ï¼šThreadLocalçš„è¿›åŒ–è§£å†³äº†ä»€ä¹ˆé—®é¢˜]]></title>    <link>https://juejin.cn/post/7575367791272804390</link>    <guid>https://juejin.cn/post/7575367791272804390</guid>    <pubDate>2025-11-23T09:55:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575367791272804390" data-draft-id="7575182522411335718" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä» JDK1.2 åˆ° JDK21ï¼šThreadLocalçš„è¿›åŒ–è§£å†³äº†ä»€ä¹ˆé—®é¢˜"/> <meta itemprop="keywords" content="åç«¯,Java,é¢è¯•"/> <meta itemprop="datePublished" content="2025-11-23T09:55:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€åªå«ç…¤çƒçš„çŒ«"/> <meta itemprop="url" content="https://juejin.cn/user/1732486058745054"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä» JDK1.2 åˆ° JDK21ï¼šThreadLocalçš„è¿›åŒ–è§£å†³äº†ä»€ä¹ˆé—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1732486058745054/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€åªå«ç…¤çƒçš„çŒ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T09:55:30.000Z" title="Sun Nov 23 2025 09:55:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. JDK 1.2ï¼šThreadLocal åˆç‰ˆï¼ˆæœ€å°å¯ç”¨ï¼‰</h2>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li><code>ThreadLocal</code> é¦–æ¬¡å‡ºç°ã€‚</li>
<li>æ¯ä¸ªçº¿ç¨‹ç»´æŠ¤è‡ªå·±çš„ <code>ThreadLocalMap</code>ã€‚</li>
<li><code>ThreadLocalMap</code> çš„ key å°±æ˜¯ <code>ThreadLocal</code> æœ¬èº«ã€‚</li>
<li>åº•å±‚ä½¿ç”¨å¼€æ”¾åœ°å€æ³•çš„å“ˆå¸Œè¡¨ï¼ˆ<code>Entry[] table</code>ï¼‰ã€‚</li>
<li><strong>key ä¸æ˜¯å¼±å¼•ç”¨</strong>ï¼Œå¯¼è‡´ ThreadLocal å¯¹è±¡ä¸é‡Šæ”¾æ—¶å¯èƒ½é€ æˆå†…å­˜æ³„æ¼ã€‚</li>
</ul>
<p><strong>ä¸»è¦é—®é¢˜ï¼š</strong></p>
<ul>
<li>ThreadLocal å®ä¾‹å¦‚æœè¢« GC å›æ”¶å‰æœªæ‰‹åŠ¨ <code>remove()</code>ï¼Œçº¿ç¨‹ï¼ˆå°¤å…¶æ˜¯çº¿ç¨‹æ± ï¼‰ä¸ä¼šç»“æŸï¼ŒEntry æ°¸è¿œå­˜åœ¨ï¼Œå¯¼è‡´ value æ³„æ¼ã€‚</li>
</ul>
<p>è¿™ä¹Ÿæ˜¯è¡Œä¸šé‡Œå¸¸è¯´çš„ ThreadLocal æ³„æ¼æœ€åˆæ¥æºã€‚</p>
<hr/>
<h2 data-id="heading-1">2. JDK 1.3 ~ 1.4ï¼šBug ä¿®å¤ + è¡Œä¸ºç¨³å®š</h2>
<p><strong>å…³é”®æ”¹åŠ¨ï¼š</strong></p>
<ul>
<li>å¢å¼ºæ¸…ç†æœºåˆ¶ï¼Œä½†ä¾ç„¶æ˜¯ key å¼ºå¼•ç”¨ã€‚</li>
<li>ä¿®å¤éƒ¨åˆ†æ‰©å®¹å’Œå†²çªå¤„ç†é—®é¢˜ã€‚</li>
</ul>
<p>ä½†æ ¹æœ¬æ€§çš„æ³„æ¼é—®é¢˜ä»ç„¶å­˜åœ¨ã€‚</p>
<hr/>
<h2 data-id="heading-2">3. JDK 5ï¼šå¼•å…¥å¼±å¼•ç”¨ï¼ˆå…³é”®é‡Œç¨‹ç¢‘ï¼‰</h2>
<p>è¿™æ˜¯ ThreadLocal è®¾è®¡å²ä¸Šæœ€é‡è¦çš„å˜æ›´ã€‚</p>
<p><strong>é‡å¤§æ›´æ–°ï¼š</strong></p>
<ul>
<li>
<p><code>ThreadLocalMap.Entry</code> æ”¹ä¸º <strong>å¼±å¼•ç”¨</strong>ï¼š</p>
<pre><code class="hljs language-scala" lang="scala">static <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Entry</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">WeakReference&lt;ThreadLocal&lt;?&gt;&gt;</span> </span>{
    <span class="hljs-type">Object</span> value;
}
</code></pre>
</li>
<li>
<p>ä¸€æ—¦ ThreadLocal å¯¹è±¡ä¸å†è¢«å¤–éƒ¨å¼•ç”¨ï¼Œå¯ä»¥è¢« GC å›æ”¶ï¼ŒEntry çš„ key ä¼šå˜æˆ <code>null</code>ã€‚</p>
</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆæ”¹æˆå¼±å¼•ç”¨ï¼Ÿ</strong></p>
<ul>
<li>é˜²æ­¢ ThreadLocal å¯¹è±¡ä¸é‡Šæ”¾å¯¼è‡´æ•´ç»„ Entry æ— æ³•è¢«æ¸…ç†ã€‚</li>
</ul>
<p><strong>å¸¦æ¥çš„å‰¯ä½œç”¨ï¼š</strong></p>
<ul>
<li>value ä»ç„¶æ˜¯å¼ºå¼•ç”¨ï¼Œåªè¦çº¿ç¨‹æ´»ç€ï¼Œvalue æ°¸è¿œä¸ä¼šè¢«å›æ”¶ã€‚</li>
<li>å¦‚æœä½ ä¸æ‰‹åŠ¨ <code>remove()</code>ï¼Œä¾æ—§å¯èƒ½å†…å­˜æ³„æ¼ï¼ˆå°¤å…¶çº¿ç¨‹æ± ï¼‰ã€‚</li>
</ul>
<p>è‡³æ­¤ï¼ŒThreadLocal çš„å†…å­˜æ³„æ¼é—®é¢˜å˜æˆäº†ï¼š</p>
<ul>
<li><strong>ä¸æ˜¯ key æ³„æ¼ï¼Œè€Œæ˜¯ value æ³„æ¼ã€‚</strong></li>
</ul>
<hr/>
<h2 data-id="heading-3">4. JDK 6ï¼šæ¸…ç†æœºåˆ¶å¢å¼º + TAB æ•°ç»„ rehash æ”¹å–„</h2>
<p><strong>JDK6 çš„é‡è¦æ¼”è¿›ï¼š</strong></p>
<ul>
<li>åŠ å¼ºå¯¹ key ä¸º <code>null</code> çš„ Entry çš„æ¸…ç†é€»è¾‘ï¼ˆä¾‹å¦‚è®¿é—®å†²çªä½ç‚¹æ—¶ä¸»åŠ¨æ¸…ç†ï¼‰ã€‚</li>
<li>ä¼˜åŒ– rehash å’Œæ¢æµ‹æœºåˆ¶ã€‚</li>
</ul>
<p>æ•´ä½“ç»“æ„ä»ä¸ºå¼€æ”¾åœ°å€æ³•ï¼Œä¸æ”¹å˜æœ¬è´¨æœºåˆ¶ã€‚</p>
<hr/>
<h2 data-id="heading-4">5. JDK 7ï¼šæ€§èƒ½ä¼˜åŒ– + éƒ¨åˆ†çº¿ç¨‹å±€éƒ¨ç¼“å­˜è¡Œä¸ºæ”¹è¿›</h2>
<p>JDK7 çš„å˜åŒ–åå‘å®ç°å±‚ã€‚</p>
<p><strong>å¢å¼ºç‚¹ï¼š</strong></p>
<ul>
<li>å®Œå–„å†²çªæ¢æµ‹ï¼Œé™ä½å“ˆå¸Œå†²çªå¯¼è‡´çš„é€€åŒ–ã€‚</li>
<li>æ”¹å–„ nextIndex/prevIndex çš„æ€§èƒ½ã€‚</li>
<li>ä¿®å¤æ‰©å®¹å rehash çš„ä¸€äº› bugã€‚</li>
</ul>
<p>ThreadLocalMap å˜å¾—æ›´å¥å£®ï¼Œä½†ä¸æ”¹å˜è¯­ä¹‰ã€‚</p>
<hr/>
<h2 data-id="heading-5">6. JDK 8ï¼šæ¸…ç†ç­–ç•¥è¿›ä¸€æ­¥åŠ å¼ºï¼Œæ ¸å¿ƒé€»è¾‘æˆç†Ÿç¨³å®š</h2>
<p><strong>å…³é”®å˜åŒ–ï¼š</strong></p>
<ul>
<li>
<p>ThreadLocalMap æ¸…ç† <code>stale entry</code>ï¼ˆkey = nullï¼‰çš„ç­–ç•¥æ›´åŠ æ¿€è¿›ï¼š</p>
<ul>
<li>get/set/remove æ—¶éƒ½ä¼šå°è¯•æ¸…ç†æ­» keyã€‚</li>
</ul>
</li>
<li>
<p>å†…éƒ¨ rehash ç­–ç•¥æ›´é«˜æ•ˆã€‚</p>
</li>
<li>
<p>çº¿ç¨‹æ± åœºæ™¯ä¸‹çš„å†…å­˜æ³„æ¼ä»ç„¶éœ€è¦æ‰‹åŠ¨å¤„ç† (<code>remove()</code>)ï¼Œä½† default é€»è¾‘æ›´å¥å£®ã€‚</p>
</li>
</ul>
<p><strong>JDK8 çš„ ThreadLocal åŸºæœ¬æˆä¸ºè¡Œä¸šä¸»æµå‚è€ƒå®ç°ã€‚</strong></p>
<hr/>
<h2 data-id="heading-6">7. JDK 9ï¼šæ–°å¢ <code>ThreadLocal.withInitial()</code>ï¼ˆè¯­æ³•ç³–ï¼‰</h2>
<p>æ­¤ç‰ˆæœ¬ä»¥åå±äºç¨³å®šæœŸï¼Œæ–°å¢åŠŸèƒ½è€Œéæœºåˆ¶å˜åŒ–ã€‚</p>
<p><strong>æ–°å¢ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">ThreadLocal<span class="hljs-selector-class">.withInitial</span>(() -&gt; new <span class="hljs-built_in">SimpleDateFormat</span>("yyyy-MM-dd"))
</code></pre>
<p>æœºåˆ¶ä¸å˜ï¼Œæ˜“ç”¨æ€§æå‡ã€‚</p>
<hr/>
<h2 data-id="heading-7">8. JDK 11 / JDK 17ï¼šå‡ ä¹æ— å˜åŒ–ï¼Œå±äºç¨³å®šç»´æŠ¤æœŸ</h2>
<ul>
<li>æŒç»­åšå°ä¿®å¤ï¼Œå¢å¼ºå¯è¯»æ€§ä¸è¾¹ç•Œå¤„ç†ã€‚</li>
<li>å†…å­˜æ¸…ç†ç­–ç•¥ä¸ JDK8 å‡ ä¹æ— å·®åˆ«ã€‚</li>
<li>è¯­ä¹‰å’Œè¡Œä¸ºå·²ç»éå¸¸ç¨³å®šã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-8">9. JDK 21ï¼šè™šæ‹Ÿçº¿ç¨‹ï¼ˆLoomï¼‰ä¸‹çš„ ThreadLocal è¯­ä¹‰æ‰©å±•ï¼ˆé‡è¦ï¼‰</h2>
<p>åœ¨ Loomï¼ˆè™šæ‹Ÿçº¿ç¨‹ï¼‰ä¸­ï¼š</p>
<p><strong>ThreadLocal é»˜è®¤æœºåˆ¶ä»ç„¶å¯ç”¨ï¼Œä½†æˆæœ¬æ›´ä½ï¼š</strong></p>
<ul>
<li>è™šæ‹Ÿçº¿ç¨‹æ˜¯è½»é‡ç»“æ„ï¼Œä¿ç•™è‡ªå·±çš„ ThreadLocalMapã€‚</li>
<li>è™šæ‹Ÿçº¿ç¨‹ä¸å¤ç”¨ï¼Œç”Ÿå‘½å‘¨æœŸçŸ­ï¼Œå› æ­¤ä¸å®¹æ˜“äº§ç”Ÿ ThreadLocal value æ³„æ¼ã€‚</li>
</ul>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li>è™šæ‹Ÿçº¿ç¨‹ä¸æ˜¯æ± åŒ–çº¿ç¨‹ï¼Œä¸ä¼šå‡ºç°çº¿ç¨‹æ± æ³„æ¼é—®é¢˜ã€‚</li>
<li>æŸäº›åœºæ™¯ ThreadLocal æˆæœ¬åè€Œæ¯”ä¼ ç»Ÿçº¿ç¨‹æ›´è½»ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-9">10. å‰åæœºåˆ¶çš„æ ¸å¿ƒå˜åŒ–æ€»ç»“</h2>


















































<table><thead><tr><th>JDK ç‰ˆæœ¬</th><th>å˜åŒ–ç‚¹</th><th>å½±å“</th></tr></thead><tbody><tr><td>1.2</td><td>åŸºæœ¬å®ç°</td><td>å­˜åœ¨ä¸¥é‡æ³„æ¼é£é™©</td></tr><tr><td>1.3-1.4</td><td>Bug ä¿®å¤</td><td>ç¨³å®šæ€§å¢å¼º</td></tr><tr><td>5</td><td><strong>key æ”¹ä¸ºå¼±å¼•ç”¨</strong></td><td>é¿å… key æ³„æ¼ï¼Œä½† value æ³„æ¼ä¾æ—§</td></tr><tr><td>6</td><td>åŠ å¼ºåŒ–æ¸…ç†é€»è¾‘</td><td>é™ä½å†…å­˜æ³„æ¼é£é™©</td></tr><tr><td>7</td><td>è¿›ä¸€æ­¥ä¼˜åŒ–å†²çªå¤„ç†</td><td>æ€§èƒ½æå‡</td></tr><tr><td>8</td><td><strong>æˆç†Ÿå®ç°ï¼Œæ¸…ç†æ›´æ¿€è¿›</strong></td><td>æ ‡å‡†å®ç°ï¼Œè¢«è¡Œä¸šæ™®éä½¿ç”¨</td></tr><tr><td>9+</td><td>æ˜“ç”¨æ€§æå‡ï¼ˆwithInitialï¼‰</td><td>å¼€å‘ä½“éªŒå¢å¼º</td></tr><tr><td>21</td><td>è™šæ‹Ÿçº¿ç¨‹æ”¯æŒç¨³å®š</td><td>æ³„æ¼é£é™©æ˜¾è‘—é™ä½</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-10">11. å“ªäº›é—®é¢˜è´¯ç©¿æ‰€æœ‰ç‰ˆæœ¬ï¼Ÿ</h2>
<p>æ— è®ºå“ªä¸ªç‰ˆæœ¬ï¼ŒThreadLocal æ°¸è¿œæœ‰ä¸¤ä¸ªæ ¸å¿ƒé£é™©ï¼š</p>
<ol>
<li><strong>value ä¼šæ³„æ¼ï¼Œåªè¦çº¿ç¨‹è¿˜æ´»ç€</strong></li>
<li><strong>çº¿ç¨‹æ± å¤ç”¨å¯¼è‡´ value é•¿æœŸé©»ç•™</strong></li>
</ol>
<p>è¿™ä¸¤ä¸ªé—®é¢˜åœ¨ JDK21 çš„è™šæ‹Ÿçº¿ç¨‹ä¸­å¼±åŒ–ä½†æœªå½»åº•æ¶ˆå¤±ã€‚</p>
<hr/>
<h2 data-id="heading-11">12. ä¸šå†…æœ€ä½³å®è·µ</h2>
<ol>
<li>åˆ›å»ºåå¿…é¡»æ‰‹åŠ¨ <code>remove()</code></li>
<li>é¿å…åœ¨å®¹å™¨/æ¡†æ¶çº§åˆ«ç¼“å­˜ä¸šåŠ¡å€¼</li>
<li>é¿å…ä½¿ç”¨æ— ç•Œçº¿ç¨‹æ± ç»“åˆ ThreadLocal</li>
<li>ä¸è¦æŠŠ ThreadLocal å½“æˆä¸Šä¸‹æ–‡ä¼ é€’æœºåˆ¶ï¼ˆåº”ä½¿ç”¨ ThreadLocal è®¾è®¡çš„æ¡†æ¶ï¼‰</li>
<li>æ¨èä½¿ç”¨ <code>withInitial()</code> é¿å… null å€¼</li>
</ol>
<hr/>
<h2 data-id="heading-12">13. è®²æ¸…æ¥šæœ¬è´¨</h2>
<p><strong>ThreadLocal åœ¨æ•´ä¸ª JDK ç”Ÿå‘½å‘¨æœŸä¸­çš„æ ¸å¿ƒå˜åŒ–åªæœ‰ä¸€æ¬¡ï¼šJDK5 å¼•å…¥å¼±å¼•ç”¨ã€‚</strong></p>
<p>å…¶ä½™ç‰ˆæœ¬æ”¹åŠ¨éƒ½æ˜¯ï¼š</p>
<ul>
<li>æ›´æ¿€è¿›çš„æ¸…ç†ç­–ç•¥</li>
<li>æ›´å¥å£®çš„å“ˆå¸Œæ¢æµ‹ä¸ rehash</li>
<li>æ›´æ˜“ç”¨çš„ API</li>
<li>è™šæ‹Ÿçº¿ç¨‹åœºæ™¯ä¸‹çš„è¿è¡Œæ—¶è¡¨ç°æ”¹å–„</li>
</ul>
<p>ä½†è¡Œä¸ºæœ¬è´¨æ²¡æœ‰æ”¹å˜ï¼š</p>
<ul>
<li>æ¯ä¸ªçº¿ç¨‹ç»´æŠ¤ä¸€ä¸ª Map</li>
<li>key å¼±å¼•ç”¨</li>
<li>value å¼ºå¼•ç”¨</li>
<li>éœ€è¦æ‰‹åŠ¨ removeï¼Œçº¿ç¨‹æ± ä¸­æ›´åº”å½“å¦‚æ­¤</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»æµ·é‡æ—¶åºæ•°æ®åˆ°æ— äººå€¼å®ˆï¼šæ•°æ®åº“åœ¨æ–°èƒ½æºé›†æ§ç³»ç»Ÿä¸­çš„æ¶æ„å®è·µ]]></title>    <link>https://juejin.cn/post/7575442779038761002</link>    <guid>https://juejin.cn/post/7575442779038761002</guid>    <pubDate>2025-11-23T08:22:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575442779038761002" data-draft-id="7575442779038744618" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»æµ·é‡æ—¶åºæ•°æ®åˆ°æ— äººå€¼å®ˆï¼šæ•°æ®åº“åœ¨æ–°èƒ½æºé›†æ§ç³»ç»Ÿä¸­çš„æ¶æ„å®è·µ"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-11-23T08:22:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€”å¼ºçš„çŸ³å¤´_"/> <meta itemprop="url" content="https://juejin.cn/user/3168119757484368"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»æµ·é‡æ—¶åºæ•°æ®åˆ°æ— äººå€¼å®ˆï¼šæ•°æ®åº“åœ¨æ–°èƒ½æºé›†æ§ç³»ç»Ÿä¸­çš„æ¶æ„å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3168119757484368/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€”å¼ºçš„çŸ³å¤´_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T08:22:35.000Z" title="Sun Nov 23 2025 08:22:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b59e5aa258b845fc8c7f38558707f456~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764490954&amp;x-signature=EjncswH7gCo%2BAzdkVNhJOGIhN3Y%3D" alt="640.gif" loading="lazy"/></p>
<p>@[toc]</p>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p>è°ˆåˆ°â€œåŒç¢³â€ä¸èƒ½æºé©å‘½ï¼Œé£ç”µï¼Œå…‰ä¼è¿™äº›æ–°èƒ½æºäº§ä¸šæ˜¾ç„¶æ˜¯å½“ä¸‹æœ€ä¸ºç‚™æ‰‹å¯çƒ­çš„é£å£ï¼Œè‹¥æƒ³åœ¨è¯¥èµ›é“è·‘å¾—æ›´è¿œï¼Œæ›´å¿«ï¼Œæ•°å­—åŒ–å’Œæ™ºèƒ½åŒ–è½¬å‹å¹¶éå¯é€‰ï¼Œè€Œæ˜¯å¿…å¤‡åŠŸè¯¾ï¼Œè¦çŸ¥é“ï¼Œä»è¿œç¨‹æ“æ§æˆåƒä¸Šä¸‡å°é£ç”µæœºç»„ï¼Œåˆ°åŠæ—¶åˆ†æå¤§é‡çš„è®¾å¤‡æ•°æ®ï¼Œç›´è‡³æŠŠæ•´ä¸ªç”Ÿäº§è¿ç»´æµç¨‹ç®¡ç†å¾—äº•äº•æœ‰æ¡ï¼Œå“ªä¸€æ­¥èƒ½ç¦»å¼€ç¨³å®šï¼Œé«˜æ•ˆä¸”å®‰å…¨çš„æ•°æ®â€œå¤§åæ–¹â€å‘¢ï¼Ÿ</p>
<p>äºæ˜¯ï¼Œä¸€äº›é—®é¢˜ä¾¿éšä¹‹å‡ºç°ï¼Œæ–°èƒ½æºç›¸å…³ä¸šåŠ¡å¯¹äºæ•°æ®åº“çš„è¦æ±‚éå¸¸é«˜ï¼Œå…¶ä¸€ï¼Œç‰©è”ç½‘è®¾å¤‡æ¯æ—¥æ‰€ç”Ÿæˆçš„æ—¶åºæ•°æ®é‡çŠ¹å¦‚å¤©æ–‡æ•°å­—ï¼Œå…¶äºŒï¼Œç”Ÿäº§ç»è¥ä½“ç³»è¦æ‰¿å—é«˜å¹¶å‘è®¿é—®çš„å‹åŠ›ï¼Œé‚£äº›ä½äºå››é¢å…«æ–¹åœºç«™è¿˜è¦æ‰§è¡Œå¥½å®¹ç¾å¤‡ä»½å·¥ä½œï¼Œè¿™å°±åƒè¦æ±‚ä¸€ååå«ä¸ä½†è¦é€Ÿåº¦å¿«è€Œä¸”ä½“æ ¼å¥ç¡•ï¼Œå…³é”®æ—¶å€™ä¹Ÿä¸èƒ½å‡ºç°çº°æ¼ã€‚</p>
<p>åœ¨æ­¤ç§å¤§èƒŒæ™¯ä¹‹ä¸‹ï¼Œæˆ‘ä»¬é«˜å…´åœ°å‘ç°ï¼Œå›½äº§æ•°æ®åº“æ­£ä¾é è‡ªèº«çš„æŠ€æœ¯å®åŠ›ä¸æœåŠ¡ï¼Œæ¸æ¸åŒ–ä¸ºæ–°èƒ½æºè¡Œä¸šæ•°å­—åŒ–è½¬å‹çš„ä¸­åšåŠ›é‡ï¼Œé‡‘ä»“æ•°æ®åº“ï¼ˆKingbaseï¼‰ä¾¿æ˜¯å…¶ä¸­ä¸å¯å¿½ç•¥çš„ä¸€ä¸ªå­˜åœ¨ï¼Œå…¶çŠ¹å¦‚ä¸€ä½èº«æ€€ç»æŠ€çš„â€œæ‰«åœ°åƒ§â€ï¼Œå‡­å€Ÿåœ¨é«˜æ€§èƒ½ï¼Œé«˜å¯é æ€§ï¼Œé«˜å®‰å…¨æ€§ä»¥åŠæ™ºèƒ½è¿ä½œç»´æŠ¤æ–¹é¢æ‰€ç§¯æ·€çš„æ·±åšåŠŸåº•ï¼Œç»™ä¼—å¤šæ–°èƒ½æºä¼ä¸šçš„å…³é”®ç³»ç»Ÿç»™äºˆäº†ç¨³å›ºæœ‰åŠ›çš„æ”¯æŒï¼Œå¾ˆå¥½åœ°è§£å†³äº†è®¸å¤šä»¤äººå¤´ç–¼çš„é—®é¢˜ã€‚</p>
<hr/>
<h2 data-id="heading-1">å…³äºé‡‘ä»“æ•°æ®åº“</h2>
<p>é‚£ä¹ˆï¼Œè¿™ä¸ªé‡‘ä»“æ•°æ®åº“åˆ°åº•æ˜¯ä»€ä¹ˆæ¥å¤´ï¼Ÿ</p>
<p>ç®€å•æ¥è¯´ï¼ŒKingbaseæ˜¯ç”µç§‘é‡‘ä»“ï¼ˆåŒ—äº¬ï¼‰ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸çš„å½“å®¶äº§å“ã€‚è¿™å®¶å…¬å¸æ¥å¤´ä¸å°ï¼Œä¸ä½†æ˜¯å›½å†…æœ€æ—©ä¸€æ‰¹åšè‡ªä¸»æ•°æ®åº“çš„å‚å•†ï¼Œè¿˜æ˜¯ä¸­å›½ç”µå­ç§‘æŠ€é›†å›¢ï¼ˆCETCï¼‰çš„â€œå›½å®¶é˜Ÿâ€æˆå‘˜ã€‚ä»–ä»¬çš„ç›®æ ‡å¾ˆæ˜ç¡®ï¼Œå°±æ˜¯è¦åšé¡¶å°–çš„ä¼ä¸šçº§æ•°æ®åº“äº§å“ã€‚</p>
<p>å…¶æ——èˆ°äº§å“é‡‘ä»“æ•°æ®åº“ç®¡ç†ç³»ç»ŸKingbaseESï¼ˆç®€ç§°KESï¼‰ï¼Œå°±æ˜¯ä¸€æ¬¾ä¸“ä¸ºäº‹åŠ¡å¯†é›†ã€é«˜å¹¶å‘ã€é«˜å¯ç”¨çš„å¤æ‚åœºæ™¯æ‰“é€ çš„ä¼ä¸šçº§å…³ç³»å‹æ•°æ®åº“ã€‚å®ƒæœ‰å‡ æ‰‹â€œç‹¬é—¨ç»æŠ€â€ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa25b64f0e334c88b3e0d54130d4d5a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764490954&amp;x-signature=aLBSol7mNTMuluaP9OmhvBlgun4%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/755f78bc8e8549ada0abdf17cd814a3e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764490954&amp;x-signature=LOv6GV1IzvMLOXea9rlSF5A8KQs%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p><strong>å“è¶Šæ€§èƒ½ä¸è‡ªæ²»è°ƒä¼˜</strong>ï¼šå¬èµ·æ¥å¾ˆä¸“ä¸šï¼Œå…¶å®å¯ä»¥ç†è§£ä¸ºKingbaseESçš„å†…æ ¸é‡Œè—ç€ä¸€ä¸ªâ€œè°ƒä¼˜æœºå™¨äººâ€ã€‚å®ƒèƒ½è‡ªå·±è¯Šæ–­ã€è‡ªå·±ä¼˜åŒ–ï¼ŒæŠŠä»¥å‰éœ€è¦æ•°æ®åº“ä¸“å®¶ç†¬å¤œå¹²çš„æ´»å„¿ï¼Œå˜æˆäº†æ•°æ®åº“è‡ªå·±çš„æ—¥å¸¸å·¥ä½œã€‚è¿™æ ·ä¸€æ¥ï¼Œå°±ç®—é¢å¯¹å‡ åƒäººåŒæ—¶æ“ä½œçš„æç«¯æƒ…å†µï¼Œç³»ç»Ÿä¹Ÿèƒ½ååº”é£å¿«ã€‚</p>
</li>
<li>
<p><strong>é‡‘èçº§é«˜å¯ç”¨ä¿éšœ</strong>ï¼šæ–°èƒ½æºä¸šåŠ¡å¯æ˜¯ä¸€å¤©24å°æ—¶ã€ä¸€å¹´365å¤©éƒ½ä¸èƒ½åœçš„ã€‚ä¸ºäº†ç¡®ä¿ä¸‡æ— ä¸€å¤±ï¼ŒKingbaseESæ‹¿å‡ºäº†ä¸€å¥—é‡‘èçº§åˆ«çš„â€œä¸æ­»é¸Ÿâ€æ–¹æ¡ˆã€‚å®ƒæ”¯æŒâ€œä¸€ä¸»å¤šå¤‡â€çš„é›†ç¾¤æ¨¡å¼ï¼Œä¸»æœåŠ¡å™¨çš„æ•°æ®èƒ½å®æ—¶åŒæ­¥åˆ°å¤‡ç”¨æœåŠ¡å™¨ä¸Šï¼Œä¸‡ä¸€ä¸»æœåŠ¡å™¨â€œç½¢å·¥â€ï¼Œå¤‡ç”¨æœåŠ¡å™¨èƒ½ç§’çº§é¡¶ä¸Šï¼Œæ•°æ®ä¸€ä¸ªéƒ½ä¸ä¼šä¸¢ã€‚å®ƒç”šè‡³è¿˜èƒ½æå®šè·¨è¶Šä¸Šåƒå…¬é‡Œçš„å¼‚åœ°å®¹ç¾ï¼ŒçœŸæ­£åšåˆ°é«˜æ•æ— å¿§ã€‚</p>
</li>
<li>
<p><strong>å…¨æ–¹ä½æ•°æ®å®‰å…¨</strong>ï¼šæ•°æ®å®‰å…¨æ˜¯å‘½è„‰ã€‚KingbaseESå°±åƒç»™æ•°æ®ç©¿ä¸Šäº†ä¸€å±‚å±‚â€œé‡‘é’Ÿç½©é“å¸ƒè¡«â€ï¼Œä»è®¿é—®æ§åˆ¶ã€æ•°æ®åŠ å¯†åˆ°å®‰å…¨å®¡è®¡ï¼Œé˜²æŠ¤æªæ–½ä¸€åº”ä¿±å…¨ï¼Œè¾¾åˆ°äº†å›½å®¶ä¿¡æ¯ç³»ç»Ÿå®‰å…¨ç­‰çº§ä¿æŠ¤çš„å››çº§è¦æ±‚ã€‚æŠŠæ ¸å¿ƒç”Ÿäº§æ•°æ®äº¤ç»™å®ƒï¼Œå¿ƒé‡Œè¸å®ã€‚</p>
</li>
<li>
<p><strong>é«˜åº¦å…¼å®¹ä¸å¹³æ»‘è¿ç§»</strong>ï¼šå¾ˆå¤šä¼ä¸šæœ€å¤´ç–¼çš„å°±æ˜¯æ¢ç³»ç»Ÿï¼Œæ€•åŸæ¥çš„åº”ç”¨è·‘ä¸èµ·æ¥ã€‚KingbaseESæ—©å°±æƒ³åˆ°äº†è¿™ä¸€ç‚¹ï¼Œå®ƒå¯¹Oracleçš„è¯­æ³•å…¼å®¹æ€§åšå¾—éå¸¸å¥½ï¼Œè¿˜é…äº†ä¸ªå«KDTSçš„â€œæ¬å®¶ç¥å™¨â€ã€‚è¿™ä¸ªå·¥å…·èƒ½æŠŠåŸæ¥è·‘åœ¨MySQLã€PostgreSQLç”šè‡³MongoDBä¸Šçš„æ•°æ®å’Œåº”ç”¨ï¼Œä»¥æä½çš„æˆæœ¬ã€ç”šè‡³â€œé›¶ä»£ç ä¿®æ”¹â€çš„ä»£ä»·ï¼Œå¿«é€Ÿè¿ç§»è¿‡æ¥ï¼Œè®©å›½äº§åŒ–æ›¿ä»£ä¸å†æ˜¯ä»¶æ„äººçš„äº‹ã€‚</p>
</li>
</ul>
<p>æ­£æ˜¯é ç€è¿™äº›ç¡¬æ ¸å®åŠ›ï¼Œé‡‘ä»“æ•°æ®åº“æ‰æˆäº†ä¼—å¤šå…³é”®è¡Œä¸šæ ¸å¿ƒç³»ç»Ÿçš„æ”¾å¿ƒä¹‹é€‰ã€‚</p>
<hr/>
<h2 data-id="heading-2">é‡‘ä»“æ•°æ®åº“åœ¨æ–°èƒ½æºè¡Œä¸šçš„æŠ€æœ¯è§£è¯»</h2>
<p>å’±ä»¬å†å¾€æ·±äº†èŠèŠï¼Œé‡‘ä»“æ•°æ®åº“åœ¨æ–°èƒ½æºè¡Œä¸šé‡Œï¼Œåˆ°åº•æ˜¯æ€ä¹ˆâ€œç§€è‚Œè‚‰â€çš„ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œæ–°èƒ½æºçš„æ•°å­—åŒ–ç³»ç»Ÿï¼Œæ¯”å¦‚é›†æ§ä¸­å¿ƒã€è¿ç»´å¹³å°ï¼Œæœ‰å››ä¸ªâ€œè€å¤§éš¾â€é—®é¢˜ï¼šæ—¶åºæ•°æ®å¤šåˆ°çˆ†ç‚¸ã€é«˜å¹¶å‘è®¿é—®å‹åŠ›å±±å¤§ã€ä¸šåŠ¡ä¸€ç§’éƒ½ä¸èƒ½åœã€è€æ—§ç³»ç»Ÿäº”èŠ±å…«é—¨ã€‚é¢å¯¹è¿™äº›ï¼ŒKingbaseESè§æ‹›æ‹†æ‹›ï¼Œç”¨è‡ªå·±çš„ä¸€å¥—ç»„åˆæ‹³ç»™å‡ºäº†æ¼‚äº®çš„ç­”æ¡ˆã€‚</p>
<h3 data-id="heading-3">1. åº”å¯¹æµ·é‡æ—¶åºæ•°æ®ï¼šåˆ†åŒºå­˜å‚¨ä¸é«˜æ•ˆæŸ¥è¯¢</h3>
<p><strong>ä¸šåŠ¡æŒ‘æˆ˜</strong>ï¼šé£æœºã€å…‰ä¼æ¿è¿™äº›è®¾å¤‡ï¼Œä¸ªä¸ªéƒ½æ˜¯æ•°æ®â€œç”Ÿäº§å¤§æˆ·â€ï¼Œæ¯æ—¶æ¯åˆ»éƒ½åœ¨å¾€å¤–è¹¦å„ç§å·¥å†µæ•°æ®ã€‚è¿™äº›æ•°æ®æ˜¯å®è´ï¼Œæ˜¯è®¾å¤‡ç›‘æ§ã€æ•…éšœé¢„è­¦çš„åŸºç¡€ã€‚ä½†æ•°æ®é‡å®åœ¨å¤ªå¤§äº†ï¼Œæ€ä¹ˆå­˜ã€æ€ä¹ˆæŸ¥ï¼Œæ‰èƒ½åˆå¿«åˆå¥½ï¼Œæ˜¯ä¸ªå¤§éš¾é¢˜ã€‚</p>
<p><strong>é‡‘ä»“è§£å†³æ–¹æ¡ˆ</strong>ï¼šKingbaseESç”¨äº†ä¸€ä¸ªèªæ˜çš„åŠæ³•â€”â€”<strong>è¡¨åˆ†åŒº</strong>ã€‚å®ƒæŠŠä¸€å¼ å·¨å¤§çš„æ•°æ®è¡¨ï¼ŒæŒ‰æ—¶é—´ï¼ˆæ¯”å¦‚æŒ‰å¤©æˆ–æŒ‰æœˆï¼‰åˆ‡æˆä¸€å°å—ä¸€å°å—ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¾è€Œæ˜“è§ï¼š</p>
<ul>
<li><strong>å†™å…¥æŸ¥è¯¢éƒ½é£å¿«</strong>ï¼šæ–°æ•°æ®åªå¾€æœ€æ–°çš„é‚£ä¸€å°å—é‡Œå†™ï¼Œäº’ä¸å¹²æ‰°ã€‚æŸ¥è¯¢çš„æ—¶å€™ï¼Œåªè¦å‘Šè¯‰å®ƒæ—¶é—´èŒƒå›´ï¼Œå®ƒå°±èƒ½ç²¾å‡†åœ°æ‰¾åˆ°å¯¹åº”çš„é‚£å‡ å—æ•°æ®ï¼Œä¸ç”¨å†å¤§æµ·æé’ˆä¸€æ ·åœ°å…¨è¡¨æ‰«æã€‚</li>
<li><strong>ç®¡ç†æ•°æ®è¶…è½»æ¾</strong>ï¼šè¿‡æœŸçš„å†å²æ•°æ®æƒ³åˆ æ‰ï¼Ÿç®€å•ï¼ä»¥å‰ç”¨<code>DELETE</code>å¾—åˆ åŠå¤©ï¼Œè¿˜ç•™ä¸‹ä¸€å †â€œåƒåœ¾â€ã€‚ç°åœ¨ç›´æ¥æŠŠå¯¹åº”çš„æ—§åˆ†åŒºæ•´ä¸ªç«¯æ‰å°±è¡Œï¼Œç§’é€Ÿå®Œæˆï¼Œå¹²å‡€åˆ©è½ã€‚</li>
</ul>
<p><strong>ä»£ç ç¤ºä¾‹ï¼šåˆ›å»ºæŒ‰æœˆåˆ†åŒºçš„è®¾å¤‡æ•°æ®è¡¨</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºä¸€ä¸ªæŒ‰æœˆåˆ†åŒºçš„è®¾å¤‡æ•°æ®ä¸»è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> device_metrics (
    device_id   <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    metric_time <span class="hljs-type">TIMESTAMP</span>   <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    metric_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),
    <span class="hljs-keyword">value</span>       <span class="hljs-type">NUMERIC</span>(<span class="hljs-number">18</span>, <span class="hljs-number">6</span>)
) <span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">RANGE</span> (metric_time);

<span class="hljs-comment">-- ä¸º2025å¹´11æœˆå’Œ12æœˆåˆ›å»ºåˆ†åŒº</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> device_metrics_202511 <span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">OF</span> device_metrics
    <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">VALUES</span> <span class="hljs-keyword">FROM</span> (<span class="hljs-string">'2025-11-01'</span>) <span class="hljs-keyword">TO</span> (<span class="hljs-string">'2025-12-01'</span>);

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> device_metrics_202512 <span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">OF</span> device_metrics
    <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">VALUES</span> <span class="hljs-keyword">FROM</span> (<span class="hljs-string">'2025-12-01'</span>) <span class="hljs-keyword">TO</span> (<span class="hljs-string">'2026-01-01'</span>);

<span class="hljs-comment">-- å½“æŸ¥è¯¢ç‰¹å®šæ—¶é—´èŒƒå›´çš„æ•°æ®æ—¶ï¼Œä¼˜åŒ–å™¨ä¼šè‡ªåŠ¨é€‰æ‹©å¯¹åº”çš„åˆ†åŒº</span>
<span class="hljs-comment">-- ä¾‹å¦‚ï¼Œæ­¤æŸ¥è¯¢å°†ä»…æ‰«æ device_metrics_202511 åˆ†åŒº</span>
<span class="hljs-keyword">SELECT</span> device_id, <span class="hljs-keyword">value</span>
<span class="hljs-keyword">FROM</span> device_metrics
<span class="hljs-keyword">WHERE</span> metric_time <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2025-11-10'</span> <span class="hljs-keyword">AND</span> metric_time <span class="hljs-operator">&lt;</span> <span class="hljs-string">'2025-11-11'</span>;
</code></pre>
<h3 data-id="heading-4">2. æ”¯æ’‘é«˜å¹¶å‘è®¿é—®ï¼šè¯»å†™åˆ†ç¦»ä¸è‡ªæ²»è°ƒä¼˜</h3>
<p><strong>ä¸šåŠ¡æŒ‘æˆ˜</strong>ï¼šä¸€ä¸ªç”Ÿäº§è¿ç»´ç³»ç»Ÿï¼Œå¯èƒ½åŒæ—¶æœ‰å‡ åƒå·äººåœ¨çº¿æ“ä½œï¼Œæœ‰æŸ¥æŠ¥è¡¨çš„ï¼Œæœ‰å¼€å·¥å•çš„ï¼Œæœ‰åšæ£€ä¿®çš„ã€‚è¿™ä¹ˆå¤šè¯·æ±‚ä¸€è‚¡è„‘å„¿åœ°æ¶Œè¿‡æ¥ï¼Œæ•°æ®åº“è¦æ˜¯æ‰›ä¸ä½ï¼Œæ•´ä¸ªç³»ç»Ÿå°±å¾—å¡é¡¿ç”šè‡³ç˜«ç—ªã€‚</p>
<p><strong>é‡‘ä»“è§£å†³æ–¹æ¡ˆ</strong>ï¼šKingbaseESæœ‰ä¸¤å¤§æ³•å®æ¥åº”å¯¹ï¼š<strong>è¯»å†™åˆ†ç¦»é›†ç¾¤</strong>å’Œ<strong>å†…æ ¸è‡ªæ²»è°ƒä¼˜</strong>ã€‚</p>
<ul>
<li>
<p><strong>è¯»å†™åˆ†ç¦»é›†ç¾¤æ¶æ„</strong>ï¼šè¿™ä¸ªæˆ˜æœ¯å¾ˆç®€å•ï¼Œå°±æ˜¯â€œåˆ†å·¥åˆä½œâ€ã€‚æä¸€ä¸ªâ€œä¸€ä¸»å¤šå¤‡â€çš„é›†ç¾¤ï¼Œä¸»èŠ‚ç‚¹æ˜¯â€œæ€»æŒ‡æŒ¥â€ï¼Œä¸“é—¨å¤„ç†â€œå†™â€è¿™ç§å…³é”®æ“ä½œã€‚å…¶ä»–å‡ ä¸ªå¤‡èŠ‚ç‚¹å½“â€œå‚è°‹â€ï¼Œä»ä¸»èŠ‚ç‚¹é‚£å„¿åŒæ­¥æ•°æ®ï¼Œç„¶åä¸“é—¨è´Ÿè´£â€œè¯»â€è¿™ç§æŸ¥è¯¢ã€çœ‹æŠ¥è¡¨çš„å·¥ä½œã€‚è¿™æ ·ä¸€æ¥ï¼Œå°±æŠŠå‹åŠ›åˆ†æ•£å‡ºå»äº†ï¼Œå¤§å®¶éƒ½èƒ½è½»æ¾ä¸Šé˜µã€‚</p>
<pre><code class="hljs language-scss" lang="scss">+----------------+      /---&gt; <span class="hljs-selector-attr">[å¤‡èŠ‚ç‚¹1 (åªè¯»)]</span>
|   åº”ç”¨æœåŠ¡     |     /
| (è¯»å†™è¯·æ±‚)     |---&gt; <span class="hljs-selector-attr">[ä¸»èŠ‚ç‚¹ (è¯»å†™)]</span> ---&gt; <span class="hljs-selector-attr">[å¤‡èŠ‚ç‚¹2 (åªè¯»)]</span>
+----------------+     \
                        \---&gt; <span class="hljs-selector-attr">[å¤‡èŠ‚ç‚¹3 (åªè¯»)]</span>
                                 |
                                 V
                            <span class="hljs-selector-attr">[ç‰©ç†æ—¥å¿—æµåŒæ­¥]</span>
</code></pre>
</li>
<li>
<p><strong>è‡ªæ²»è°ƒä¼˜èƒ½åŠ›</strong>ï¼šè¿™å°±æ˜¯å‰é¢æåˆ°çš„â€œè°ƒä¼˜æœºå™¨äººâ€ã€‚å®ƒèƒ½è‡ªåŠ¨ä¼˜åŒ–SQLï¼Œè¿˜èƒ½æ ¹æ®å†å²ç»éªŒâ€œå­¦ä¹ â€è¿›åŒ–ï¼Œè®©æ‰§è¡Œè®¡åˆ’è¶Šæ¥è¶Šèªæ˜ã€‚ç”šè‡³åœ¨ä½ å†™çš„SQLæ€§èƒ½ä¸ä½³æ—¶ï¼Œå®ƒè¿˜ä¼šä¸»åŠ¨ç»™ä½ æå»ºè®®ï¼Œæ¯”å¦‚â€œè¿™é‡Œè¯¥å»ºä¸ªç´¢å¼•äº†â€ï¼Œå¤§å¤§å‡è½»äº†æ•°æ®åº“ç®¡ç†å‘˜çš„è´Ÿæ‹…ã€‚</p>
</li>
</ul>
<h3 data-id="heading-5">3. ä¿éšœä¸šåŠ¡è¿ç»­æ€§ï¼šè·¨åœ°åŸŸé«˜å¯ç”¨ä¸å®¹ç¾</h3>
<p><strong>ä¸šåŠ¡æŒ‘æˆ˜</strong>ï¼šæ ¸å¿ƒç”Ÿäº§ç³»ç»Ÿï¼Œå°±è·Ÿäººçš„å¿ƒè„ä¸€æ ·ï¼Œä¸€ç§’é’Ÿéƒ½ä¸èƒ½åœã€‚ä¸ä»…è¦é˜²æ­¢æœ¬åœ°å‡ºæ•…éšœï¼Œè¿˜å¾—èƒ½æ‰›å¾—ä½åœ°éœ‡ã€æ–­ç”µè¿™ç§åŒºåŸŸæ€§çš„å¤©ç¾äººç¥¸ã€‚</p>
<p><strong>é‡‘ä»“è§£å†³æ–¹æ¡ˆ</strong>ï¼šKingbaseESæä¾›çš„æ˜¯ä¸€å¥—ç»è¿‡å®æˆ˜æ£€éªŒçš„â€œä¸¤åœ°ä¸‰ä¸­å¿ƒâ€æˆ–â€œå¼‚åœ°åŒä¸­å¿ƒâ€é«˜å¯ç”¨æ–¹æ¡ˆã€‚</p>
<ul>
<li>
<p><strong>åœ¨ç”Ÿäº§ä¸­å¿ƒ</strong>ï¼šéƒ¨ç½²ä¸€ä¸ªâ€œä¸€ä¸»ä¸¤å¤‡â€çš„æœ¬åœ°é«˜å¯ç”¨é›†ç¾¤ã€‚ä¸»å¤‡ä¹‹é—´çš„æ•°æ®å®æ—¶åŒæ­¥ã€‚ä¸‡ä¸€ä¸»èŠ‚ç‚¹â€œç‰ºç‰²â€ï¼Œç³»ç»Ÿå‡ ç§’å†…å°±èƒ½è‡ªåŠ¨æŠŠå¤‡ç”¨èŠ‚ç‚¹æ‰¶æ­£ï¼Œä¸šåŠ¡å‡ ä¹æ„Ÿè§‰ä¸åˆ°ä¸­æ–­ï¼Œæ•°æ®ä¹Ÿé›¶ä¸¢å¤±ã€‚</p>
</li>
<li>
<p><strong>åœ¨å¼‚åœ°ç¾å¤‡ä¸­å¿ƒ</strong>ï¼šåœ¨å‡ ç™¾ç”šè‡³ä¸Šåƒå…¬é‡Œå¤–çš„å¦ä¸€ä¸ªåŸå¸‚ï¼Œå†éƒ¨ç½²ä¸€ä¸ªç¾å¤‡èŠ‚ç‚¹ã€‚ç”Ÿäº§ä¸­å¿ƒçš„æ•°æ®ä¼šå‡†å®æ—¶åœ°å¤åˆ¶è¿‡å»ã€‚è¿™æ ·ï¼Œå°±ç®—æ•´ä¸ªç”Ÿäº§ä¸­å¿ƒéƒ½â€œæ²¦é™·â€äº†ï¼Œè¿˜èƒ½ä»å®¹åœ°æŠŠä¸šåŠ¡åˆ‡æ¢åˆ°ç¾å¤‡ä¸­å¿ƒï¼Œä¿ä½æœ€åçš„ç«ç§ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">+---------------------------+      <span class="hljs-selector-attr">[å¹¿åŸŸç½‘ (WAN)]</span>      +---------------------------+
|      ç”Ÿäº§ä¸­å¿ƒ (åŸå¸‚A)     |                          |      ç¾å¤‡ä¸­å¿ƒ (åŸå¸‚B)     |
|                           |                          |                           |
|  <span class="hljs-selector-attr">[ä¸»]</span> ---&gt; <span class="hljs-selector-attr">[å¤‡1]</span> ---&gt; <span class="hljs-selector-attr">[å¤‡2]</span> | <span class="hljs-built_in">--</span>(å¼‚æ­¥ç‰©ç†æ—¥å¿—å¤åˆ¶)--&gt; |           <span class="hljs-selector-attr">[å¤‡3]</span>           |
|  (åŒæ­¥/å¼‚æ­¥ç‰©ç†æ—¥å¿—å¤åˆ¶)  |                          |                           |
+---------------------------+                          +---------------------------+
</code></pre>
</li>
</ul>
<h3 data-id="heading-6">4. å®ç°å¹³æ»‘è¿ç§»ï¼šé«˜åº¦å…¼å®¹ä¸è‡ªåŠ¨åŒ–å·¥å…·</h3>
<p><strong>ä¸šåŠ¡æŒ‘æˆ˜</strong>ï¼šå¾ˆå¤šæ–°èƒ½æºä¼ä¸šä¸€è·¯å‘å±•è¿‡æ¥ï¼Œç³»ç»Ÿé‡Œç”¨äº†MySQLã€Oracleã€PostgreSQLç­‰å„ç§æ•°æ®åº“ï¼Œäº”èŠ±å…«é—¨ï¼Œå½¢æˆäº†â€œæ•°æ®å­¤å²›â€ã€‚ç°åœ¨æƒ³å»ºä¸€ä¸ªç»Ÿä¸€çš„å¹³å°ï¼ŒæŠŠè¿™äº›è€ç³»ç»Ÿé‡Œçš„å®è´æ•°æ®å’Œåº”ç”¨éƒ½æ¬è¿‡æ¥ï¼Œç®€ç›´æ˜¯æµ©å¤§åˆå¤´ç–¼çš„å·¥ç¨‹ã€‚</p>
<p><strong>é‡‘ä»“è§£å†³æ–¹æ¡ˆ</strong>ï¼šKingbaseESåœ¨è®¾è®¡ä¹‹åˆå°±æƒ³åˆ°äº†è¿™ä¸€ç‚¹ã€‚</p>
<ul>
<li>
<p><strong>å®ƒé«˜åº¦å…¼å®¹Oracle</strong>ï¼šä»è¯­æ³•ã€æ•°æ®ç±»å‹åˆ°å­˜å‚¨è¿‡ç¨‹ï¼Œéƒ½è·ŸOracleå¾ˆåƒã€‚è¿™æ„å‘³ç€ï¼ŒåŸæ¥ç»™Oracleå†™çš„åº”ç”¨ï¼ŒåŸºæœ¬ä¸Šä¸ç”¨æ€ä¹ˆæ”¹ï¼Œç”šè‡³ä¸ç”¨æ”¹ï¼Œå°±èƒ½ç›´æ¥åœ¨KingbaseESä¸Šè·‘èµ·æ¥ã€‚</p>
</li>
<li>
<p><strong>å®ƒæœ‰è‡ªåŠ¨åŒ–â€œæ¬å®¶â€å·¥å…·KDTS</strong>ï¼šè¿™ä¸ªå·¥å…·éå¸¸å¼ºå¤§ï¼Œèƒ½è‡ªåŠ¨æå®šæ•°æ®ç»“æ„æ˜ å°„ã€æ•°æ®è¿ç§»ã€æ•°æ®æ ¡éªŒè¿™äº›ç¹ççš„æ´»å„¿ã€‚åŸæ¥å¯èƒ½è¦èŠ±å‡ ä¸ªæ˜ŸæœŸæ‰èƒ½å¹²å®Œçš„è¿ç§»å·¥ä½œï¼Œç°åœ¨å‡ å¤©ç”šè‡³æ›´çŸ­æ—¶é—´å°±èƒ½æå®šï¼Œé£é™©å’Œæˆæœ¬éƒ½å¤§å¤§é™ä½ã€‚</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-7">æ¡ˆä¾‹åˆ†æï¼šé‡‘ä»“æ•°æ®åº“èµ‹èƒ½æ–°èƒ½æºæ™ºæ…§è¿ç»´</h2>
<p>â€œå…‰è¯´ä¸ç»ƒå‡æŠŠå¼â€ã€‚ç†è®ºè¯´äº†è¿™ä¹ˆå¤šï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹é‡‘ä»“æ•°æ®åº“åœ¨çœŸå®æˆ˜åœºä¸Šçš„è¡¨ç°åˆ°åº•æ€ä¹ˆæ ·ã€‚å…¶å®ï¼Œå®ƒæ—©å°±åœ¨å›½å®¶èƒ½æºé›†å›¢ã€ä¸­å›½å¹¿æ ¸é›†å›¢ã€å›½å®¶ç”µåŠ›æŠ•èµ„é›†å›¢ç­‰å¤šä¸ªå¤§å‹èƒ½æºä¼ä¸šçš„æ ¸å¿ƒç³»ç»Ÿä¸­â€œèº«ç»ç™¾æˆ˜â€äº†ã€‚ä¸‹é¢è¿™å‡ ä¸ªæ¡ˆä¾‹ï¼Œå°±å¾ˆæœ‰ä»£è¡¨æ€§ã€‚</p>
<h3 data-id="heading-8">æ¡ˆä¾‹ä¸€ï¼šä¸­å¹¿æ ¸æ–°èƒ½æºç”Ÿäº§è¿ç»´ç³»ç»Ÿâ€”â€”åº”å¯¹â€œæ•´åˆã€é«˜å¹¶å‘ã€é«˜å¯ç”¨â€ä¸‰å¤§æŒ‘æˆ˜</h3>
<ul>
<li>
<p><strong>ä¸šåŠ¡èƒŒæ™¯</strong>ï¼šä¸­å¹¿æ ¸çš„æ–°èƒ½æºä¸šåŠ¡æ‘Šå­é“ºå¾—å¾ˆå¤§ï¼Œé£ã€å…‰ã€æ°´å¤šç‚¹å¼€èŠ±ï¼Œç®¡ç€600å¤šä¸ªåœºç«™ã€‚ä½†ä»¥å‰çš„ç”Ÿäº§ç³»ç»Ÿéƒ½æ˜¯å„æå„çš„ï¼ŒæŠ€æœ¯äº”èŠ±å…«é—¨ï¼Œæ•°æ®ä¸é€šï¼Œç®¡ç†èµ·æ¥å¾ˆè´¹åŠ²ã€‚æ‰€ä»¥ï¼Œä»–ä»¬ä¸‹å†³å¿ƒè¦æä¸€ä¸ªç»Ÿä¸€çš„ç”Ÿäº§è¿ç»´ç³»ç»Ÿã€‚</p>
</li>
<li>
<p><strong>æ ¸å¿ƒæŒ‘æˆ˜</strong>ï¼š</p>
<ol>
<li><strong>ç³»ç»Ÿæ•´åˆéš¾</strong>ï¼šè¦æŠŠåŸæ¥åŸºäºMySQLã€PostgreSQLã€MongoDBç­‰å„ç§æ•°æ®åº“çš„åº”ç”¨å’Œæ•°æ®éƒ½ç»Ÿä¸€èµ·æ¥ï¼Œè¿™æ´»å„¿æƒ³æƒ³å°±å¤´å¤§ã€‚</li>
<li><strong>å¹¶å‘è®¿é—®é«˜</strong>ï¼šæ–°ç³»ç»Ÿä¸Šçº¿ï¼Œå¾—æ’‘ä½6000å¤šå·å‘˜å·¥åŒæ—¶åœ¨çº¿æ“ä½œï¼Œè¿˜è¦æ±‚ååº”é€Ÿåº¦è¦å¿«ã€‚</li>
<li><strong>å¯ç”¨æ€§è¦æ±‚æè‡´</strong>ï¼šè¿™å¯æ˜¯æ ¸å¿ƒç”Ÿäº§ç³»ç»Ÿï¼Œå¿…é¡»åšåˆ°é‡‘èçº§çš„99.999%å¯ç”¨æ€§ï¼Œè¿˜å¾—èƒ½è·¨ä¸Šåƒå…¬é‡Œæå¼‚åœ°å®¹ç¾ã€‚</li>
</ol>
</li>
<li>
<p><strong>é‡‘ä»“è§£å†³æ–¹æ¡ˆä¸æˆæ•ˆ</strong>ï¼š</p>
<ul>
<li><strong>å¹³æ»‘è¿ç§»ï¼Œé›¶ä»£ç ä¿®æ”¹</strong>ï¼šé‡‘ä»“çš„å›¢é˜Ÿå¸¦ç€â€œæ¬å®¶ç¥å™¨â€KDTSä¸€è¿›åœºï¼Œå¾ˆå¿«å°±æŠŠå„ä¸ªâ€œå±±å¤´â€çš„æ•°æ®å’Œåº”ç”¨éƒ½æ”¶ç¼–äº†è¿‡æ¥ï¼Œè½¯ä»¶å¼€å‘å•†çš„åº”ç”¨ç”šè‡³åšåˆ°äº†â€œé›¶ä»£ç ä¿®æ”¹â€ï¼Œä¸€ä¸‹å­å°±è®©å¤§å®¶æ‚¬ç€çš„å¿ƒæ”¾ä¸‹äº†ã€‚</li>
<li><strong>è‡ªæ²»è°ƒä¼˜ï¼Œæ€§èƒ½å“è¶Š</strong>ï¼šé¢å¯¹6000äººå¹¶å‘çš„å‹åŠ›æµ‹è¯•ï¼ŒKingbaseESçš„â€œè°ƒä¼˜æœºå™¨äººâ€å¤§æ˜¾èº«æ‰‹ï¼ŒåªèŠ±äº†3å¤©å°±å®Œæˆäº†æ€§èƒ½ä¼˜åŒ–ï¼Œè®©ç³»ç»Ÿåœ¨é«˜å‹ä¸‹ä¹Ÿèƒ½ç§’çº§å“åº”ã€‚</li>
<li><strong>å¼‚åœ°åŒä¸­å¿ƒï¼Œç¨³å®šå¯é </strong>ï¼šé€šè¿‡éƒ¨ç½²â€œç”Ÿäº§ä¸­å¿ƒ+ç¾å¤‡ä¸­å¿ƒâ€çš„æ¶æ„ï¼ŒKingbaseESç»™ç³»ç»Ÿä¸Šäº†åŒä¿é™©ï¼Œç¡®ä¿äº†7x24å°æ—¶çš„ç¨³å®šè¿è¡Œã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e691206c448246ff96d772447f3d78d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764490954&amp;x-signature=%2FDpJ%2F8Q9yE1Ic0S9%2B1z26PEB0xM%3D" alt="image.png" loading="lazy"/></li>
</ul>
</li>
</ul>
<h3 data-id="heading-9">æ¡ˆä¾‹äºŒï¼šå›½å®¶èƒ½æºé›†å›¢é¾™æºç”µåŠ›â€”â€”186ä¸ªæ–°èƒ½æºåœºç«™é›†æ§ç³»ç»Ÿå›½äº§åŒ–æ›¿ä»£</h3>
<ul>
<li>
<p><strong>ä¸šåŠ¡èƒŒæ™¯</strong>ï¼šé¾™æºç”µåŠ›æ˜¯å…¨çƒæœ€å¤§çš„é£ç”µè¿è¥å•†ï¼Œä»–ä»¬è¦åœ¨å…¨å›½27ä¸ªçœåŒºçš„186ä¸ªåœºç«™æä¸€å¥—æ–°çš„é›†æ§ç³»ç»Ÿï¼ŒæŠŠæ•°æ®éƒ½ç»Ÿä¸€ç®¡èµ·æ¥ã€‚</p>
</li>
<li>
<p><strong>æ ¸å¿ƒæŒ‘æˆ˜</strong>ï¼š</p>
<ol>
<li><strong>éƒ¨ç½²èŒƒå›´å¹¿</strong>ï¼šé¡¹ç›®éå¸ƒå¤§æ±Ÿå—åŒ—ï¼Œå¯¹éƒ¨ç½²ã€è¿ç»´å’Œæœ¬åœ°åŒ–æœåŠ¡çš„å“åº”èƒ½åŠ›æ˜¯ä¸ªå·¨å¤§è€ƒéªŒã€‚</li>
<li><strong>æ ¸å¿ƒç³»ç»Ÿå¯é æ€§</strong>ï¼šåœºç«™çš„é›†æ§æ ¸å¿ƒç³»ç»Ÿç»å¯¹ä¸èƒ½å‡ºé—®é¢˜ï¼ŒåŸæ¥ç”¨çš„Oracleè™½ç„¶ç¨³ï¼Œä½†ç»´ä¿æˆæœ¬é«˜ï¼Œè¿˜æœ‰â€œå¡è„–å­â€çš„é£é™©ã€‚</li>
<li><strong>æ•°æ®å®‰å…¨</strong>ï¼šè¿™äº›å¯éƒ½æ˜¯æ ¸å¿ƒç”Ÿäº§æ•°æ®ï¼Œå®‰å…¨ç­‰çº§è¦æ±‚éå¸¸é«˜ã€‚</li>
</ol>
</li>
<li>
<p><strong>é‡‘ä»“è§£å†³æ–¹æ¡ˆä¸æˆæ•ˆ</strong>ï¼š</p>
<ul>
<li><strong>ä¸»å¤‡é«˜å¯ç”¨ï¼Œä¿éšœä¸šåŠ¡è¿ç»­</strong>ï¼šæ¯ä¸ªåœºç«™éƒ½ç”¨KingbaseESæäº†â€œåŒæœºä¸»å¤‡â€æ¶æ„ï¼ŒæˆåŠŸæ¢æ‰äº†Oracleï¼Œæ—¢ä¿è¯äº†ä¸šåŠ¡ä¸ä¸­æ–­ï¼Œä¹Ÿåšå¥½äº†æ•°æ®å¤‡ä»½ã€‚</li>
<li><strong>é«˜åº¦å…¼å®¹Oracleï¼Œå¿«é€Ÿè¿ç§»</strong>ï¼šå› ä¸ºKingbaseESå’ŒOracleå¾ˆâ€œåƒâ€ï¼Œæ•´ä¸ªæ›¿æ¢è¿‡ç¨‹éå¸¸é¡ºæ»‘ï¼Œåº”ç”¨åŸºæœ¬æ²¡æ€ä¹ˆæ”¹ã€‚</li>
<li><strong>å…¨å›½æœåŠ¡ç½‘ç»œï¼Œæœ¬åœ°åŒ–æ”¯æŒ</strong>ï¼šé‡‘ä»“éå¸ƒå…¨å›½çš„æœåŠ¡ç½‘ç»œå‘æŒ¥äº†å·¨å¤§ä½œç”¨ï¼Œä¸º27ä¸ªçœåŒºçš„é¡¹ç›®æä¾›äº†7x24å°æ—¶çš„æœ¬åœ°æ”¯æŒï¼Œç¡®ä¿äº†é¡¹ç›®é¡ºåˆ©è½åœ°ã€‚</li>
<li><strong>å®‰å…¨åˆè§„</strong>ï¼šKingbaseESè‡ªå¸¦çš„å„ç§å®‰å…¨åŠŸèƒ½ï¼Œå®Œå…¨æ»¡è¶³å›½å®¶å¯¹æ ¸å¿ƒæ•°æ®å®‰å…¨çš„è¦æ±‚ï¼Œè®©äººæ”¾å¿ƒã€‚</li>
</ul>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a5ff48045c54bd981adffc1e19a548d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764490954&amp;x-signature=TVeoY%2Bwwk64gHOKu8IGRBTTgL5E%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-10">æ¡ˆä¾‹ä¸‰ï¼šå›½å®¶ç”µæŠ•é›†å›¢ç”˜è‚ƒæ–°èƒ½æºâ€”â€”â€œæ— äººå€¼å®ˆâ€é£ç”µåœºé›†æ§ç³»ç»Ÿ</h3>
<ul>
<li>
<p><strong>ä¸šåŠ¡èƒŒæ™¯</strong>ï¼šä¸ºäº†åœ¨åè¿œåœ°åŒºå®ç°é£ç”µåœºâ€œæ— äººå€¼ç­ã€å°‘äººå€¼å®ˆâ€çš„æ™ºæ…§è¿ç»´ï¼Œå›½å®¶ç”µæŠ•ç”˜è‚ƒæ–°èƒ½æºå…¬å¸éœ€è¦ä¸€å¥—é«˜åº¦è‡ªåŠ¨åŒ–çš„é›†æ§ç³»ç»Ÿã€‚</p>
</li>
<li>
<p><strong>æ ¸å¿ƒæŒ‘æˆ˜</strong>ï¼š</p>
<ul>
<li><strong>æ•°æ®ä¸€è‡´æ€§</strong>ï¼šâ€œæ— äººå€¼å®ˆâ€æ¨¡å¼ä¸‹ï¼Œæ•°æ®ç»å¯¹ä¸èƒ½å‡ºé”™ï¼Œå¦åˆ™ä¸€ä¸ªé”™è¯¯çš„æŒ‡ä»¤å°±å¯èƒ½é€ æˆå·¨å¤§æŸå¤±ã€‚</li>
<li><strong>ä¸šåŠ¡è¿ç»­æ€§</strong>ï¼šè‡ªåŠ¨åŒ–è°ƒåº¦ç³»ç»Ÿå¿…é¡»åƒæ°¸åŠ¨æœºä¸€æ ·ä¸åœè¿è½¬ã€‚</li>
</ul>
</li>
<li>
<p><strong>é‡‘ä»“è§£å†³æ–¹æ¡ˆä¸æˆæ•ˆ</strong>ï¼š</p>
<ul>
<li><strong>é«˜å¯ç”¨æ¶æ„ï¼Œæ›¿ä»£Oracle</strong>ï¼šåŒæ ·ï¼ŒKingbaseESçš„é«˜å¯ç”¨æ–¹æ¡ˆæˆåŠŸæ›¿ä»£äº†Oracleï¼Œæ—¢ä¿è¯äº†ç³»ç»Ÿå†—ä½™ï¼Œä¹Ÿç¡®ä¿äº†æ•°æ®å®‰å…¨å¯é ã€‚</li>
<li><strong>åŸå‚æœ¬åœ°åŒ–æœåŠ¡</strong>ï¼šé‡‘ä»“çš„è¿ç»´å›¢é˜Ÿæä¾›äº†â€œç§’çº§å“åº”â€çš„æœ¬åœ°æœåŠ¡ï¼Œæˆäº†ç³»ç»Ÿç¨³å®šè¿è¡Œçš„åšå®åç›¾ï¼Œä¹Ÿä¸ºåç»­æ›´å¤§èŒƒå›´çš„å›½äº§åŒ–é“ºå¹³äº†é“è·¯ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-11">ç»“è¯­</h2>
<p>å†™åˆ°æœ€åï¼Œå°±ä¼šå¯Ÿè§‰ï¼Œåœ¨å½¢æˆæ–°å‹ç”µåŠ›ç³»ç»Ÿè¿™ä¸€æ—¶ä»£æ´ªæµå½“ä¸­ï¼Œæ•°å­—åŒ–å’Œæ™ºèƒ½åŒ–æ˜¯æä¸ºå…³é”®çš„â€œèˆ¹â€ä¸â€œæ¡¨â€ã€‚</p>
<p>å›é¡¾é‡‘ä»“æ•°æ®åº“çš„æŠ€æœ¯è¦ç‚¹åŠå…¶åœ¨æ–°èƒ½æºé¢†åŸŸçš„å®é™…åº”ç”¨æƒ…å†µï¼Œä¸è®ºæ˜¯è§£å†³å¤æ‚çš„å¼‚æ„æ•°æ®è¿ç§»é—®é¢˜ï¼Œæ‰¿å—å¤§é‡çš„å¹¶å‘è®¿é—®å‹åŠ›ï¼Œè¿˜æ˜¯ä¿éšœâ€œæ— äººå€¼å®ˆâ€é£ç”µåœºçš„ç¨³å®šè¿è¡Œï¼Œè¯¥æ•°æ®åº“å‡è¡¨ç°å‡ºè‰²ï¼Œè¿™è¡¨æ˜å…¶ä½œä¸ºå›½äº§æ•°æ®åº“çš„é¢†å…ˆè€…ï¼Œå…·å¤‡æˆä¸ºæ–°èƒ½æºè¡Œä¸šæ ¸å¿ƒä¸šåŠ¡ç¨³å›ºæ ¹åŸºçš„èƒ½åŠ›ä¸å®åŠ›ã€‚</p>
<p>æœªæ¥çš„æ–°èƒ½æºä¸–ç•Œå¿…å®šä¼šæ„ˆåŠ é‡è§†æ•°æ®ï¼Œé‡‘ä»“æ•°æ®åº“è¿™èˆ¬æ—¢ç²¾é€šæŠ€æœ¯åˆäº†è§£è¡Œä¸šçš„äººæ‰å°†ä¼šä¸€ç›´å‘æŒ¥å…³é”®ä½œç”¨ï¼Œå‡­å€Ÿå…¶ç¨³å®šï¼Œå¯é ä¸”é«˜æ•ˆçš„æ•°æ®èƒ½åŠ›ä¸æ–­ç»™ä¸­å›½æ–°èƒ½æºäº‹ä¸šå¢æ·»æ´»åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§åœºé¢è¯•ä¹‹æœ€ç»ˆä¸€è‡´æ€§ä¸åˆ†å¸ƒå¼é”]]></title>    <link>https://juejin.cn/post/7575655132748300324</link>    <guid>https://juejin.cn/post/7575655132748300324</guid>    <pubDate>2025-11-23T08:23:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575655132748300324" data-draft-id="7575442779038777386" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§åœºé¢è¯•ä¹‹æœ€ç»ˆä¸€è‡´æ€§ä¸åˆ†å¸ƒå¼é”"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,æ¶æ„"/> <meta itemprop="datePublished" content="2025-11-23T08:23:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="360_go_php"/> <meta itemprop="url" content="https://juejin.cn/user/2436173498956695"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§åœºé¢è¯•ä¹‹æœ€ç»ˆä¸€è‡´æ€§ä¸åˆ†å¸ƒå¼é”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2436173498956695/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    360_go_php
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T08:23:56.000Z" title="Sun Nov 23 2025 08:23:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<h2 data-id="heading-0">1.åˆ†å¸ƒå¼ç›¸å…³ç†è®º(é‡ç‚¹)</h2>
<h3 data-id="heading-1">1.1 CAPå®šç†<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8cfd7d997b8f4b9ba2281d931a5eafd1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzYwX2dvX3BocA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764491036&amp;x-signature=AOupmtP2Us8lA%2BlAYx1Z2SX2ei0%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</h3>
<p>CAPå®šç†ï¼Œä¹Ÿç§°ä¸ºå¸ƒé²å°”å®šç†ï¼Œæ˜¯åˆ†å¸ƒå¼è®¡ç®—é¢†åŸŸçš„ä¸€ä¸ªåŸºæœ¬åŸç†ï¼Œç”¨äºæè¿°åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡ä¸­çš„ä¸‰ä¸ªåŸºæœ¬è¦ç´ ï¼šä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€å¯ç”¨æ€§ï¼ˆAvailabilityï¼‰å’Œåˆ†åŒºå®¹é”™æ€§ï¼ˆPartition Toleranceï¼‰ä¹‹é—´çš„æƒè¡¡å…³ç³»ã€‚</p>
<p>CAPå®šç†è¡¨æ˜ï¼Œåœ¨ä¸€ä¸ªåˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿä¸­ï¼Œä¸å¯èƒ½åŒæ—¶æ»¡è¶³ä¸€è‡´æ€§ã€å¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§è¿™ä¸‰ä¸ªè¦æ±‚ï¼Œæœ€å¤šåªèƒ½åŒæ—¶æ»¡è¶³å…¶ä¸­çš„ä¸¤ä¸ªã€‚å…·ä½“è€Œè¨€ï¼š</p>
<ol>
<li>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰æŒ‡çš„æ˜¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œåœ¨åŒä¸€æ—¶é—´ç‚¹ä¸Šæ˜¯å¦å…·æœ‰ç›¸åŒçš„æ•°æ®å‰¯æœ¬ã€‚å¦‚æœç³»ç»Ÿåœ¨æ›´æ–°æ•°æ®åï¼Œæ‰€æœ‰èŠ‚ç‚¹ç«‹å³èƒ½å¤Ÿçœ‹åˆ°æœ€æ–°çš„æ•°æ®ï¼Œé‚£ä¹ˆç³»ç»Ÿå°±æ˜¯å¼ºä¸€è‡´æ€§çš„ï¼›å¦‚æœç³»ç»Ÿåœ¨æ›´æ–°æ•°æ®åï¼Œä¸åŒèŠ‚ç‚¹çš„æ•°æ®åŒæ­¥å­˜åœ¨ä¸€å®šçš„å»¶è¿Ÿï¼Œé‚£ä¹ˆç³»ç»Ÿå°±æ˜¯å¼±ä¸€è‡´æ€§çš„ã€‚</li>
<li>å¯ç”¨æ€§ï¼ˆAvailabilityï¼‰æŒ‡çš„æ˜¯ç³»ç»Ÿèƒ½å¤Ÿåœ¨æœ‰é™çš„æ—¶é—´å†…å¯¹å¤–æä¾›æœåŠ¡ï¼Œå³ç³»ç»Ÿèƒ½å¤Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›åˆç†çš„å“åº”ã€‚å¯ç”¨æ€§è¦æ±‚ç³»ç»Ÿåœ¨é¢å¯¹æ•…éšœæˆ–å¼‚å¸¸æƒ…å†µæ—¶ï¼Œä»èƒ½å¤Ÿä¿æŒæ­£å¸¸çš„è¿è¡ŒçŠ¶æ€ï¼Œå¯¹å¤–æä¾›æœåŠ¡ã€‚</li>
<li>åˆ†åŒºå®¹é”™æ€§ï¼ˆPartition Toleranceï¼‰æŒ‡çš„æ˜¯ç³»ç»Ÿèƒ½å¤Ÿåœ¨é¢å¯¹ç½‘ç»œåˆ†åŒºï¼ˆèŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡æ•…éšœï¼‰æ—¶ï¼Œä»èƒ½å¤Ÿç»§ç»­è¿è¡Œï¼Œå¹¶ä¿æŒæ•°æ®ä¸€è‡´æ€§å’Œå¯ç”¨æ€§ã€‚åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ç½‘ç»œåˆ†åŒºæ˜¯ä¸å¯é¿å…çš„ï¼Œå› æ­¤åˆ†åŒºå®¹é”™æ€§æ˜¯å¿…é¡»è€ƒè™‘çš„å› ç´ ã€‚</li>
</ol>
<p>æ ¹æ®CAPå®šç†ï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡è€…éœ€è¦åœ¨ä¸€è‡´æ€§ã€å¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§ä¹‹é—´è¿›è¡Œæƒè¡¡å–èˆã€‚æ ¹æ®å®é™…éœ€æ±‚å’Œåº”ç”¨åœºæ™¯çš„ä¸åŒï¼Œå¯ä»¥é€‰æ‹©æ»¡è¶³ä¸åŒç¨‹åº¦çš„ä¸€è‡´æ€§å’Œå¯ç”¨æ€§ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒCAPå®šç†æ˜¯ä¸€ä¸ªç†è®ºä¸Šçš„åŸåˆ™ï¼Œå¹¶æ²¡æœ‰è¦æ±‚ç³»ç»Ÿåªèƒ½æ»¡è¶³å…¶ä¸­çš„ä¸¤ä¸ªè¦æ±‚ï¼Œå®é™…ç³»ç»Ÿå¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚å’ŒæŠ€æœ¯æ‰‹æ®µåšå‡ºæ›´ç»†è‡´çš„æƒè¡¡å’Œè®¾è®¡ã€‚æ­¤å¤–ï¼ŒCAPå®šç†åªæè¿°äº†ä¸‰ä¸ªåŸºæœ¬è¦ç´ ä¹‹é—´çš„å…³ç³»ï¼Œå¹¶æ²¡æœ‰æ¶‰åŠæ€§èƒ½ã€æ€§ä»·æ¯”ç­‰å…¶ä»–æ–¹é¢çš„è€ƒè™‘ã€‚åœ¨å®é™…ç³»ç»Ÿè®¾è®¡ä¸­ï¼Œè¿˜éœ€è¦ç»“åˆå…·ä½“çš„ä¸šåŠ¡éœ€æ±‚å’ŒæŠ€æœ¯å®ç°æ¥è¿›è¡Œç»¼åˆæƒè¡¡å’Œè®¾è®¡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1dc07eded0594004b4a98ee04af5e415~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzYwX2dvX3BocA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764491036&amp;x-signature=WirfF8OMb%2BemuUTCTBlYlX1dlwc%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<ul>
<li>CP æ¶æ„çš„ç³»ç»Ÿ:</li>
</ul>
<p>ï¼ˆ1ï¼‰<strong>Apache ZooKeeper</strong>ï¼šZooKeeperæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼åè°ƒæœåŠ¡ï¼Œæä¾›äº†é«˜å¯ç”¨ã€ä¸€è‡´æ€§å’ŒæŒä¹…æ€§çš„ç‰¹æ€§ï¼Œç”¨äºæ„å»ºåˆ†å¸ƒå¼ç³»ç»Ÿã€‚</p>
<p>ï¼ˆ2ï¼‰<strong>Consul</strong>æ˜¯ç”±HashiCorpå¼€å‘çš„æœåŠ¡å‘ç°å’Œé…ç½®å·¥å…·ï¼Œæä¾›äº†æœåŠ¡å‘ç°ã€å¥åº·æ£€æŸ¥ã€KVå­˜å‚¨å’Œå¤šæ•°æ®ä¸­å¿ƒçš„åŠŸèƒ½ã€‚</p>
<ul>
<li>APæ¶æ„çš„ç³»ç»Ÿï¼š</li>
</ul>
<p>ï¼ˆ1ï¼‰<strong>Redis</strong>ï¼šRedisæ˜¯ä¸€ä¸ªå¼€æºçš„å†…å­˜æ•°æ®åº“ï¼Œå®ƒæä¾›äº†é«˜æ€§èƒ½çš„é”®å€¼å­˜å‚¨å’Œæ”¯æŒå¤åˆ¶ã€åˆ†åŒºå®¹é”™ç­‰ç‰¹æ€§ï¼Œå¼ºè°ƒäº†å¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§ã€‚</p>
<p>ï¼ˆ2ï¼‰<strong>Elasticsearch</strong>ï¼šElasticsearchæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„æœç´¢å’Œåˆ†æå¼•æ“ï¼Œå…·æœ‰é«˜å¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§ï¼Œé€‚ç”¨äºæ„å»ºå®æ—¶æœç´¢å’Œåˆ†æç³»ç»Ÿã€‚</p>
<p>ï¼ˆ3ï¼‰<strong>Apache Kafka</strong>ï¼šKafkaæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æµå¤„ç†å¹³å°ï¼Œå…·æœ‰é«˜å¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§ï¼Œè¢«å¹¿æ³›ç”¨äºæ„å»ºå®æ—¶æ•°æ®ç®¡é“å’Œäº‹ä»¶æµå¤„ç†ç³»ç»Ÿã€‚</p>
<p>ï¼ˆ4ï¼‰<strong>Nacos</strong>ï¼š nacos æ˜¯ä¸€ä¸ªå¼€æºçš„åŠ¨æ€æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†å’ŒæœåŠ¡ç®¡ç†å¹³å°ã€‚å®ƒæä¾›äº†æœåŠ¡æ³¨å†Œä¸å‘ç°ã€åŠ¨æ€é…ç½®ç®¡ç†ã€æœåŠ¡å¥åº·æ£€æŸ¥å’ŒåŠ¨æ€DNSç­‰åŠŸèƒ½ã€‚é»˜è®¤APï¼Œå¯æ‰‹åŠ¨æ”¹ä¸ºCP ã€‚</p>
<h3 data-id="heading-2">2.2 BASEç†è®º</h3>
<p>BASEç†è®ºæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡ä¸­çš„ä¸€ä¸ªåŸåˆ™ï¼Œç”¨äºæè¿°åœ¨å¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿä¸­è¿½æ±‚å¯ç”¨æ€§å’Œæ€§èƒ½çš„ç­–ç•¥ã€‚BASEæ˜¯"Basically Available, Soft state, Eventually consistent"çš„ç¼©å†™ã€‚</p>
<ul>
<li><strong>Basically Available</strong>ï¼ˆåŸºæœ¬å¯ç”¨ï¼‰ï¼šç³»ç»Ÿåœ¨é¢å¯¹éƒ¨åˆ†æ•…éšœæˆ–å¼‚å¸¸æƒ…å†µæ—¶ï¼Œä»èƒ½å¤Ÿä¿æŒåŸºæœ¬çš„å¯ç”¨æ€§ï¼Œå³ç³»ç»Ÿèƒ½å¤Ÿå¤„ç†è¯·æ±‚å¹¶è¿”å›åˆç†çš„å“åº”ã€‚åŸºæœ¬å¯ç”¨æ€§æ˜¯ç›¸å¯¹äºå®Œå…¨ä¸å¯ç”¨è€Œè¨€çš„ï¼Œç³»ç»Ÿå¯ä»¥é€šè¿‡<strong>é™çº§ã€é™æµ</strong>ç­‰æœºåˆ¶æ¥ä¿æŒåŸºæœ¬çš„å¯ç”¨æ€§ã€‚</li>
<li><strong>Soft state</strong>ï¼ˆè½¯çŠ¶æ€ï¼‰ï¼šç³»ç»Ÿä¸­çš„æ•°æ®çŠ¶æ€å¯ä»¥åœ¨ä¸€æ®µæ—¶é—´å†…æ˜¯ä¸å®Œå…¨ä¸€è‡´çš„ã€‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œç”±äºå­˜åœ¨ç½‘ç»œå»¶è¿Ÿã€èŠ‚ç‚¹æ•…éšœç­‰å› ç´ ï¼Œå„èŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®åŒæ­¥å¯èƒ½å­˜åœ¨ä¸€å®šçš„å»¶è¿Ÿã€‚è½¯çŠ¶æ€çš„ç‰¹ç‚¹æ˜¯æ•°æ®çŠ¶æ€å¯ä»¥åœ¨ä¸€æ®µæ—¶é—´å†…æ˜¯éƒ¨åˆ†ä¸€è‡´çš„ï¼Œä½†æœ€ç»ˆä¼šè¾¾åˆ°ä¸€è‡´çŠ¶æ€ã€‚</li>
<li><strong>Eventually consistent</strong>ï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰ï¼šç³»ç»Ÿä¸­çš„æ•°æ®æœ€ç»ˆä¼šè¾¾åˆ°ä¸€è‡´çŠ¶æ€ï¼Œä½†åœ¨æŸä¸ªæ—¶é—´ç‚¹ä¸Šå¯èƒ½å­˜åœ¨éƒ¨åˆ†ä¸ä¸€è‡´çš„æƒ…å†µã€‚æœ€ç»ˆä¸€è‡´æ€§æ˜¯ç›¸å¯¹äºå¼ºä¸€è‡´æ€§è€Œè¨€çš„ï¼Œç³»ç»Ÿå¯ä»¥é€šè¿‡<strong>å¼‚æ­¥å¤åˆ¶ã€å»¶è¿Ÿè¡¥å¿</strong>ç­‰æœºåˆ¶æ¥å®ç°æ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚</li>
</ul>
<p>BASEç†è®ºçš„ç›®æ ‡æ˜¯é€šè¿‡æ”¾å®½ä¸€è‡´æ€§è¦æ±‚ï¼Œè¿½æ±‚æ›´é«˜çš„å¯ç”¨æ€§å’Œæ€§èƒ½ã€‚ç›¸å¯¹äºä¼ ç»Ÿçš„ACIDï¼ˆåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§ï¼‰äº‹åŠ¡æ¨¡å‹ï¼ŒBASEç†è®ºæ›´é€‚ç”¨äºå¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¯ä»¥æä¾›æ›´å¥½çš„å¯æ‰©å±•æ€§å’Œå®¹é”™æ€§ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒBASEç†è®ºå¹¶ä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„ç®—æ³•æˆ–å®ç°ï¼Œè€Œæ˜¯ä¸€ç§æ€æƒ³å’ŒåŸåˆ™ï¼Œå¯ä»¥æ ¹æ®å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚å’ŒæŠ€æœ¯å®ç°è¿›è¡Œçµæ´»çš„åº”ç”¨ã€‚åœ¨å®é™…ç³»ç»Ÿè®¾è®¡ä¸­ï¼Œéœ€è¦ç»¼åˆè€ƒè™‘ä¸€è‡´æ€§ã€å¯ç”¨æ€§ã€æ€§èƒ½ç­‰å› ç´ ï¼Œé€‰æ‹©é€‚åˆçš„ç­–ç•¥å¹¶è¿›è¡Œåˆç†çš„æƒè¡¡ã€‚</p>
<h2 data-id="heading-3">2. æœåŠ¡ç«¯è®¾å¤‡è¿è¡Œæ—¥å¿—</h2>
<h3 data-id="heading-4">2.1 éœ€æ±‚åˆ†æ</h3>
<p>å½“ç”¨æˆ·æ”¯ä»˜æˆåŠŸåï¼ŒæœåŠ¡ç«¯éœ€è¦å‘è®¾å¤‡å‘é€å‡ºè´§æŒ‡ä»¤ã€‚è®¾å¤‡æ”¶åˆ°å‡ºè´§æŒ‡ä»¤åï¼Œæ‰§è¡Œå‡ºè´§ï¼Œå¹¶å°†ç»“æœå‘é€ç»™æœåŠ¡ç«¯ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦éšæ—¶æŒæ¡æœ‰å“ªäº›æ•°æ®æ˜¯æˆåŠŸäº†ï¼Œæœ‰å“ªäº›æ˜¯å¤±è´¥äº†ï¼Œæœ‰å“ªäº›æ˜¯æ²¡æœ‰å¾—åˆ°ç»“æœã€‚</p>
<h3 data-id="heading-5">2.2 å®ç°æ€è·¯</h3>
<p>æˆ‘ä»¬éœ€è¦åœ¨æœåŠ¡ç«¯å»ºç«‹ä¸€ä¸ªè®¾å¤‡å‘é€æ—¥å¿—ï¼Œå½“å‘é€ç»™è®¾å¤‡æŒ‡ä»¤æ—¶æ–°å¢è®°å½•ï¼ŒçŠ¶æ€ä¸º0 ï¼Œå½“æ”¶åˆ°ç»“æœæ—¶ä¿®æ”¹çŠ¶æ€ï¼ŒæˆåŠŸä¸º1 ï¼Œå¤±è´¥ä¸º2 ã€‚</p>
<p>è¿™ä¸ªè¡¨å°±æ˜¯ tb_vendout_running</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37740863caa84e0aa5ef6cfa1912a5b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzYwX2dvX3BocA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764491036&amp;x-signature=VhonmMZSaAPNrwgbcNLoY9hafo4%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<h3 data-id="heading-6">2.3 ä»£ç å®ç°</h3>
<h4 data-id="heading-7">2.3.1 å‘è´§æ·»åŠ æ—¥å¿—</h4>
<p>ï¼ˆ1ï¼‰åˆ›å»ºDTO</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VendoutRunningDTO</span> {


    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> orderNo;<span class="hljs-comment">//è®¢å•ç¼–å·</span>


    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> innerCode;<span class="hljs-comment">//å”®è´§æœºç¼–å·</span>


    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> channelCode;<span class="hljs-comment">//è´§é“ç¼–å·</span>


    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> status;<span class="hljs-comment">//çŠ¶æ€</span>

}
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ï¼ˆ2ï¼‰feignæ¥å£ç±» VMService æ–°å¢æ–¹æ³•å®šä¹‰</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">/**
 * æ–°å¢å”®è´§æœºæ—¥å¿—
 * @param vendoutRunning
 * @return æ˜¯å¦æˆåŠŸ
 */</span>
<span class="hljs-variable">@PostMapping</span>(<span class="hljs-string">"/vendoutRunning"</span>)
public boolean <span class="hljs-built_in">addVendoutRunning</span>(<span class="hljs-variable">@RequestBody</span> VendoutRunningDTO vendoutRunning);
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ï¼ˆ3ï¼‰VmServiceFallbackFactory ç¼–å†™ç†”æ–­æ–¹æ³•</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">addVendoutRunning</span>(<span class="hljs-params">VendoutRunningDTO vendoutRunning</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ï¼ˆ4ï¼‰åˆ›å»ºè¿è¡Œæ—¥å¿—çŠ¶æ€</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">/**
 * è¿è¡Œæ—¥å¿—çŠ¶æ€ã€€
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VMRuningStatus</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> VENDOUT_PREP = <span class="hljs-string">"0"</span>; <span class="hljs-comment">//å‡†å¤‡å‘è´§ã€€</span>

    <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> VENDOUT_COMP = <span class="hljs-string">"1"</span>;<span class="hljs-comment">//å®Œæˆå‘è´§</span>

    <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> VENDOUT_FAIL = <span class="hljs-string">"2"</span>;<span class="hljs-comment">//å‘è´§å¤±è´¥</span>

}
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ï¼ˆ5ï¼‰åœ¨å‘é€å‡ºè´§æŒ‡ä»¤æ—¶ï¼Œå‘å”®è´§æœºè¿è¡Œæ—¥å¿—æ’å…¥è®°å½•ï¼ŒçŠ¶æ€ä¸º0 ï¼ˆæ— ç»“æœï¼‰</p>
<p>ä¿®æ”¹CallBackServiceImplçš„successPayæ–¹æ³•ï¼Œåœ¨å‘é€æ¶ˆæ¯å‰ ï¼Œ æ·»åŠ æ·»åŠ å”®è´§æœºè¿è¡Œæ—¥å¿—</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@Override</span>
public void successPay(String orderSn) {
    log<span class="hljs-selector-class">.info</span>("æ”¯ä»˜æˆåŠŸå›è°ƒ{}",orderSn);
    OrderEntity orderEntity = orderService<span class="hljs-selector-class">.getByOrderNo</span>(orderSn);
    <span class="hljs-built_in">if</span>(orderEntity!=null){
        <span class="hljs-built_in">if</span>(orderEntity.getStatus()<span class="hljs-selector-class">.equals</span>( OrderStatus.ORDER_STATUS_CREATE )){
            orderEntity<span class="hljs-selector-class">.setStatus</span>(OrderStatus.ORDER_STATUS_PAYED); <span class="hljs-comment">//è®¢å•çŠ¶æ€  å·²æ”¯ä»˜</span>
            orderEntity<span class="hljs-selector-class">.setPayStatus</span>(PayStatus.PAY_STATUS_PAYED) ;<span class="hljs-comment">//æ”¯ä»˜çŠ¶æ€  æˆåŠŸ</span>
            <span class="hljs-comment">//æŸ¥è¯¢å‡ºè´§è´§é“</span>
            ChannelVO channelVO = vmService<span class="hljs-selector-class">.getChannel</span>(orderEntity.getInnerCode(), orderEntity<span class="hljs-selector-class">.getSkuId</span>());
            orderEntity<span class="hljs-selector-class">.setChannelCode</span>( channelVO.getChannelCode() );
            orderService<span class="hljs-selector-class">.updateById</span>( orderEntity );

            <span class="hljs-comment">//æ·»åŠ æœåŠ¡ç«¯è¿è¡Œæ—¥å¿—</span>
            VendoutRunningDTO vendoutRunning =new  <span class="hljs-built_in">VendoutRunningDTO</span>();
            BeanUtils<span class="hljs-selector-class">.copyProperties</span>( orderEntity,vendoutRunning );
            vendoutRunning<span class="hljs-selector-class">.setStatus</span>(VMRuningStatus.VENDOUT_PREP);  <span class="hljs-comment">//çŠ¶æ€:å‡†å¤‡å‘è´§</span>
            vmService<span class="hljs-selector-class">.addVendoutRunning</span>(vendoutRunning );

            <span class="hljs-comment">//æ„å»ºæŠ¥æ–‡å¹¶å‘é€</span>
            VendoutDTO vendoutDTO=new <span class="hljs-built_in">VendoutDTO</span>();  <span class="hljs-comment">//æŠ¥æ–‡å°è£…å¯¹è±¡  ï¼ˆæ•°æ®ä¼ è¾“å¯¹è±¡ï¼‰</span>
            BeanUtils<span class="hljs-selector-class">.copyProperties</span>( orderEntity,vendoutDTO );
            elegentAC<span class="hljs-selector-class">.publish</span>(TopicConfig.getVendoutTopic( orderEntity.getInnerCode() ) , vendoutDTO);
        }
    }
}
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-8">2.3.2 å¤„ç†å‡ºè´§ç»“æœ</h4>
<p>åœ¨å”®è´§æœºå¾®æœåŠ¡æ¥åˆ°æ­£å¸¸çš„å‡ºè´§ç»“æœæ—¶ï¼Œæ›´æ”¹æ—¥å¿—çŠ¶æ€ä¸º1 ï¼ˆæ­£å¸¸ï¼‰</p>
<p>åœ¨å”®è´§æœºå¾®æœåŠ¡æ¥åˆ°å¼‚å¸¸çš„å‡ºè´§ç»“æœæ—¶ï¼Œæ›´æ”¹æ—¥å¿—çŠ¶æ€ä¸º2 ï¼ˆå¼‚å¸¸ï¼‰</p>
<p>ä¿®æ”¹å”®è´§æœºå¾®æœåŠ¡ dkd_vms_serviceçš„VendOutResultHandleræ–¹æ³•</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">/**
 * å”®è´§æœºå¾®æœåŠ¡å¤„ç†å‡ºè´§ç»“æœ
 */</span>
<span class="hljs-variable">@Topic</span>(TopicConfig.VMS_RESULT_TOPIC)
<span class="hljs-variable">@Slf4j</span>
public class VendoutResultHandler  implements ACHandler&lt;VendoutResultDTO&gt; {


    <span class="hljs-variable">@Autowired</span>
    private ChannelService channelService;

    <span class="hljs-variable">@Autowired</span>
    private VendoutRunningService vendoutRunningService;

    <span class="hljs-variable">@Override</span>
    public void <span class="hljs-built_in">process</span>(String s, VendoutResultDTO vendoutResultDTO) throws Exception {

        <span class="hljs-comment">//å‡ºè´§æˆåŠŸæ‰£å‡åº“å­˜</span>
        <span class="hljs-selector-tag">if</span>(vendoutResultDTO.<span class="hljs-built_in">isSuccess</span>()){
            <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.info</span>( <span class="hljs-string">"å‡ºè´§æˆåŠŸï¼Œæ‰£å‡åº“å­˜:{}"</span>,  vendoutResultDTO );
            <span class="hljs-selector-tag">ChannelEntity</span> <span class="hljs-selector-tag">channelEntity</span> = <span class="hljs-selector-tag">channelService</span><span class="hljs-selector-class">.getChannelInfo</span>(vendoutResultDTO.<span class="hljs-built_in">getInnerCode</span>(), vendoutResultDTO.<span class="hljs-built_in">getChannelCode</span>());
            <span class="hljs-selector-tag">channelEntity</span><span class="hljs-selector-class">.setCurrentCapacity</span>( channelEntity.<span class="hljs-built_in">getCurrentCapacity</span>()-<span class="hljs-number">1</span> );
            <span class="hljs-selector-tag">channelService</span><span class="hljs-selector-class">.updateById</span>( channelEntity);
            <span class="hljs-selector-tag">vendoutRunningService</span><span class="hljs-selector-class">.updateStatus</span>(vendoutResultDTO.<span class="hljs-built_in">getOrderNo</span>(), VMRuningStatus.VENDOUT_COMP);<span class="hljs-comment">//å‘è´§æˆåŠŸ</span>

        }<span class="hljs-selector-tag">else</span>{
            <span class="hljs-selector-tag">vendoutRunningService</span><span class="hljs-selector-class">.updateStatus</span>(vendoutResultDTO.<span class="hljs-built_in">getOrderNo</span>(), VMRuningStatus.VENDOUT_FAIL);<span class="hljs-comment">//å‘è´§å¤±è´¥</span>
        }
    }
}
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-9">2.3.3 æœ€ç»ˆä¸€è‡´æ€§è¡¥å¿æ•°æ®</h4>
<p>å› ä¸ºæœåŠ¡ç«¯å’Œè®¾å¤‡éœ€è¦é€šè¿‡ç½‘ç»œè¿›è¡Œé€šä¿¡ï¼Œè¿™æœŸé—´å¯èƒ½ä¼šå› ä¸ºç½‘ç»œåŸå› æ— æ³•å°†å‡ºè´§æŒ‡ä»¤é€è¾¾åˆ°è®¾å¤‡ï¼Œä¹Ÿæœ‰å¯èƒ½ä¼šåœ¨è®¾å¤‡å‡ºè´§åå› ä¸ºç½‘ç»œæ•…éšœæ— æ³•å°†ç»“æœä¸ŠæŠ¥ç»™æœåŠ¡ç«¯ã€‚è¿™ä¸¤ç§æƒ…å†µï¼Œéƒ½å¯èƒ½å¯¼è‡´è¿è¡Œæ—¥å¿—çš„çŠ¶æ€ä¸º0 ã€‚</p>
<p>é‚£ä¹ˆï¼Œé‡åˆ°è¿™ç§æƒ…å†µå¦‚ä½•å¤„ç†å‘¢ï¼Ÿæˆ‘ä»¬é‡‡ç”¨çš„æ–¹æ¡ˆæ˜¯æœ€ç»ˆä¸€è‡´æ€§ã€‚</p>
<p>æœåŠ¡ç«¯å’Œè®¾å¤‡ç«¯éƒ½ä¿å­˜æœ‰æ—¥å¿—è®°å½•ï¼Œè®¾å¤‡ç«¯åœ¨æ¥æ”¶åˆ°æŒ‡ä»¤åï¼Œä¹Ÿä¼šè®°å½•åœ¨æ—¥å¿—ä¸­ã€‚è®¾å¤‡åœ¨ä¸ŠæŠ¥å‰å’Œä¸ŠæŠ¥åéƒ½ä¼šåšè®°å½•ï¼Œå¦‚æœè®¾å¤‡ç«¯çš„æ—¥å¿—è®°å½•ä¸ŠæŠ¥çŠ¶æ€ä¸ºæœªä¸ŠæŠ¥ï¼Œåˆ™æ˜¯å› ä¸ºç½‘ç»œåŸå› å¯¼è‡´æ— æ³•åŠæ—¶ä¸ŠæŠ¥æ¶ˆæ¯ã€‚</p>
<p>å¯¹äºè¿™äº›æ²¡æœ‰æˆåŠŸä¸ŠæŠ¥çš„æ¶ˆæ¯ï¼Œè®¾å¤‡ç«¯ä¼šæ¯é—´éš”ä¸€æ®µæ—¶é—´å†æ¬¡è¿›è¡ŒçŠ¶æ€çš„ä¸ŠæŠ¥ã€‚è¿™æ ·ä¸€æ—¦ç½‘ç»œé€šç•…äº†ï¼Œå°±ä¼šå®ç°æ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚</p>
<h2 data-id="heading-10">3.åˆ†å¸ƒå¼é”æŠ€æœ¯ç ”ç©¶(é‡ç‚¹)</h2>
<h3 data-id="heading-11">3.1 ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼é”</h3>
<p>åˆ†å¸ƒå¼é”æ˜¯ä¸€ç§ç”¨äºåè°ƒåˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¹¶å‘è®¿é—®çš„æœºåˆ¶ã€‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¤šä¸ªèŠ‚ç‚¹å¯èƒ½åŒæ—¶è®¿é—®å…±äº«èµ„æºï¼Œä¸ºäº†é¿å…æ•°æ®ä¸ä¸€è‡´æˆ–ç«äº‰æ¡ä»¶çš„å‘ç”Ÿï¼Œéœ€è¦ä¸€ç§æœºåˆ¶æ¥ç¡®ä¿åœ¨æŸä¸ªèŠ‚ç‚¹æ“ä½œå…±äº«èµ„æºæ—¶ï¼Œå…¶ä»–èŠ‚ç‚¹ä¸èƒ½åŒæ—¶è®¿é—®è¯¥èµ„æºã€‚</p>
<p>åˆ†å¸ƒå¼é”é€šè¿‡åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¼•å…¥ä¸€ä¸ªå…¨å±€çš„é”æ¥å®ç°è¿™ä¸€ç›®çš„ã€‚å½“ä¸€ä¸ªèŠ‚ç‚¹éœ€è¦è®¿é—®å…±äº«èµ„æºæ—¶ï¼Œå®ƒé¦–å…ˆå°è¯•è·å–åˆ†å¸ƒå¼é”ï¼Œå¦‚æœæˆåŠŸè·å–åˆ°é”ï¼Œåˆ™å¯ä»¥æ‰§è¡Œç›¸åº”çš„æ“ä½œï¼›å¦‚æœè·å–é”å¤±è´¥ï¼Œåˆ™éœ€è¦ç­‰å¾…é”é‡Šæ”¾åå†æ¬¡å°è¯•ã€‚</p>
<p>åˆ†å¸ƒå¼é”å¯ä»¥ä½¿ç”¨å„ç§æŠ€æœ¯å’Œç®—æ³•æ¥å®ç°ï¼Œå¸¸è§çš„å®ç°æ–¹å¼åŒ…æ‹¬åŸºäºæ•°æ®åº“ã€åŸºäºç¼“å­˜ã€åŸºäºZooKeeperç­‰ã€‚è¿™äº›å®ç°æ–¹å¼é€šå¸¸è¦è€ƒè™‘é«˜å¯ç”¨æ€§ã€æ€§èƒ½å’Œå¯é æ€§ç­‰å› ç´ ã€‚</p>
<p>ä½¿ç”¨åˆ†å¸ƒå¼é”å¯ä»¥æœ‰æ•ˆåœ°æ§åˆ¶åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¹¶å‘è®¿é—®ï¼Œç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§å’Œæ­£ç¡®æ€§ã€‚ç„¶è€Œï¼Œåˆ†å¸ƒå¼é”çš„è®¾è®¡å’Œä½¿ç”¨éœ€è¦ä»”ç»†è€ƒè™‘å„ç§æƒ…å†µï¼Œé¿å…æ­»é”ã€æ€§èƒ½ç“¶é¢ˆå’Œå•ç‚¹æ•…éšœç­‰é—®é¢˜çš„å‘ç”Ÿã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef87d16f140447e68ecab793ff4e4a70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzYwX2dvX3BocA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764491036&amp;x-signature=%2FjfeWIr9J4%2FC7fCWCzgrs2H4uQM%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<h3 data-id="heading-12">3.2 åˆ†å¸ƒå¼é”çš„åˆ†ç±»</h3>
<ol>
<li><strong>æŒ‰å®ç°æ–¹å¼åˆ†ç±»</strong>ï¼š</li>
</ol>
<ul>
<li>
<ul>
<li>åŸºäºæ•°æ®åº“çš„åˆ†å¸ƒå¼é”ï¼šä½¿ç”¨æ•°æ®åº“çš„äº‹åŠ¡å’Œå”¯ä¸€çº¦æŸæ¥å®ç°åˆ†å¸ƒå¼é”ï¼Œé€šå¸¸ä½¿ç”¨è¡¨ä¸­çš„ä¸€è¡Œè®°å½•è¡¨ç¤ºä¸€ä¸ªé”ã€‚</li>
<li>åŸºäºç¼“å­˜çš„åˆ†å¸ƒå¼é”ï¼šåˆ©ç”¨åˆ†å¸ƒå¼ç¼“å­˜ï¼ˆå¦‚Redisï¼‰çš„åŸå­æ€§æ“ä½œå’Œè¿‡æœŸæ—¶é—´ç‰¹æ€§æ¥å®ç°åˆ†å¸ƒå¼é”ã€‚</li>
<li>åŸºäºZookeeperçš„åˆ†å¸ƒå¼é”ï¼šåˆ©ç”¨ZooKeeperè¿™æ ·çš„åˆ†å¸ƒå¼åè°ƒæœåŠ¡æ¥å®ç°åˆ†å¸ƒå¼é”ï¼Œé€šè¿‡åˆ›å»ºå’Œåˆ é™¤èŠ‚ç‚¹æ¥å®ç°é”çš„è·å–å’Œé‡Šæ”¾ã€‚</li>
<li>åŸºäºConsul çš„åˆ†å¸ƒå¼é”</li>
</ul>
</li>
</ul>
<ol>
<li><strong>æŒ‰ç‰¹æ€§åˆ†ç±»</strong>ï¼š</li>
</ol>
<ul>
<li>
<ul>
<li><strong>é˜»å¡é”</strong>ï¼šè·å–é”å¤±è´¥æ—¶ï¼Œè¯·æ±‚çº¿ç¨‹ä¼šè¢«é˜»å¡ç›´åˆ°è·å–åˆ°é”ä¸ºæ­¢ã€‚</li>
<li><strong>éé˜»å¡é”</strong>ï¼šè·å–é”å¤±è´¥æ—¶ï¼Œè¯·æ±‚çº¿ç¨‹ä¼šç«‹å³è¿”å›è€Œä¸ä¼šè¢«é˜»å¡ï¼Œå¯ä»¥é€šè¿‡è½®è¯¢æˆ–è€…å›è°ƒæ–¹å¼æ¥è·å–é”ã€‚</li>
</ul>
</li>
</ul>
<ol>
<li><strong>æŒ‰æ˜¯å¦å¯é‡å…¥åˆ†ç±»</strong>ï¼š</li>
</ol>
<ul>
<li>
<ul>
<li><strong>å¯é‡å…¥é”</strong>ï¼šå…è®¸åŒä¸€ä¸ªçº¿ç¨‹å¤šæ¬¡è·å–åŒä¸€æŠŠé”ï¼Œé€šå¸¸ç”¨äºé€’å½’è°ƒç”¨æˆ–è€…åµŒå¥—è°ƒç”¨çš„åœºæ™¯ã€‚<br/>
å¯é‡å…¥é”æ˜¯ä¸€ç§ç‰¹æ®Šçš„é”ï¼Œå…è®¸åŒä¸€ä¸ªçº¿ç¨‹åœ¨æŒæœ‰é”çš„æƒ…å†µä¸‹å¤šæ¬¡è·å–è¯¥é”ï¼Œè€Œä¸ä¼šè¢«è‡ªå·±æ‰€æŒæœ‰çš„é”æ‰€é˜»å¡ã€‚è¿™ç§ç‰¹æ€§ä½¿å¾—çº¿ç¨‹å¯ä»¥åœ¨é€’å½’è°ƒç”¨æˆ–è€…åµŒå¥—è°ƒç”¨çš„æƒ…å†µä¸‹å®‰å…¨åœ°ä½¿ç”¨é”ï¼Œè€Œä¸å¿…æ‹…å¿ƒæ­»é”æˆ–è€…ç«äº‰æ¡ä»¶çš„é—®é¢˜ã€‚<br/>
åœ¨å®ç°å¯é‡å…¥é”æ—¶ï¼Œé€šå¸¸éœ€è¦è®°å½•å½“å‰é”çš„æŒæœ‰è€…ä»¥åŠæŒæœ‰æ¬¡æ•°ã€‚å½“çº¿ç¨‹å†æ¬¡è·å–åŒä¸€æŠŠé”æ—¶ï¼Œç³»ç»Ÿä¼šæ£€æŸ¥å½“å‰çº¿ç¨‹æ˜¯å¦å·²ç»æŒæœ‰è¯¥é”ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å¢åŠ æŒæœ‰æ¬¡æ•°ï¼›å¦‚æœä¸æ˜¯ï¼Œåˆ™é˜»å¡æˆ–è€…è¿”å›å¤±è´¥ã€‚</li>
<li><strong>ä¸å¯é‡å…¥é”</strong></li>
</ul>
</li>
</ul>
<ol>
<li>æŒ‰æ˜¯å¦å…¬å¹³åˆ†ç±»ï¼š</li>
</ol>
<ul>
<li>
<ul>
<li>
<p><strong>å…¬å¹³é”</strong>ï¼š<br/>
å…¬å¹³é”æ˜¯ä¸€ç§é”ï¼Œå®ƒä¿è¯é”çš„è·å–æŒ‰ç…§è¯·æ±‚çš„é¡ºåºè¿›è¡Œåˆ†é…ï¼Œé¿å…æŸäº›çº¿ç¨‹é•¿æœŸç­‰å¾…è€Œæ— æ³•è·å–é”çš„æƒ…å†µï¼Œä»è€Œé¿å…äº†"é¥¥é¥¿"ç°è±¡çš„å‘ç”Ÿã€‚<br/>
åœ¨å…¬å¹³é”ä¸­ï¼Œå½“æœ‰å¤šä¸ªçº¿ç¨‹ç«äº‰åŒä¸€æŠŠé”æ—¶ï¼Œé”ä¼šæŒ‰ç…§è¯·æ±‚çš„é¡ºåºåˆ†é…ç»™ç­‰å¾…æ—¶é—´æœ€é•¿çš„çº¿ç¨‹ï¼Œè€Œä¸æ˜¯éšæœºåˆ†é…ç»™ä»»æ„ä¸€ä¸ªç­‰å¾…çš„çº¿ç¨‹ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿æ‰€æœ‰çº¿ç¨‹éƒ½æœ‰å…¬å¹³çš„æœºä¼šè·å–é”ï¼Œé¿å…äº†æŸäº›çº¿ç¨‹é•¿æœŸæ— æ³•è·å–é”çš„æƒ…å†µã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7fd41aa4e0464835b93fa5f54be31190~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzYwX2dvX3BocA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764491036&amp;x-signature=Bx%2BV%2BGGtlJI5hE%2BGsfihrFb2zro%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
</li>
<li>
<p><strong>éå…¬å¹³é”</strong> å½“æœ‰å¤šä¸ªçº¿ç¨‹ç«äº‰åŒä¸€æŠŠé”æ—¶ ï¼Œéšæœºåˆ†é…ç»™ä»»æ„ä¸€ä¸ªç­‰å¾…çš„çº¿ç¨‹ã€‚</p>
</li>
<li>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b96573af220444ec8ecc4d4939902b7b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzYwX2dvX3BocA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764491036&amp;x-signature=eWMIikYuld5wRU2ea%2FMfil2iiek%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
</li>
</ul>
</li>
</ul>
<h3 data-id="heading-13">3.3 å®ç°åˆ†å¸ƒå¼é”çš„å‡ ç§æ–¹å¼</h3>
<h4 data-id="heading-14">3.3.1 åŸºäºæ•°æ®åº“å®ç°çš„åˆ†å¸ƒå¼é”ï¼ˆäº†è§£ï¼‰</h4>
<p><strong>åˆ›å»ºé”è¡¨</strong>ï¼šåœ¨æ•°æ®åº“ä¸­åˆ›å»ºä¸€å¼ ç”¨äºå­˜å‚¨é”ä¿¡æ¯çš„è¡¨ï¼Œä¾‹å¦‚åä¸º<code>distributed_lock</code>ï¼ŒåŒ…æ‹¬ä»¥ä¸‹å­—æ®µï¼š</p>
<ul>
<li><code>lock_name</code>ï¼šé”çš„åç§°ï¼Œç”¨äºåŒºåˆ†ä¸åŒçš„é”ã€‚</li>
<li><code>holder</code>ï¼šé”çš„æŒæœ‰è€…æ ‡è¯†ï¼Œå¯ä»¥æ˜¯è¿›ç¨‹IDã€çº¿ç¨‹IDæˆ–è€…å”¯ä¸€çš„æ ‡è¯†ç¬¦ã€‚</li>
<li><code>expire_time</code>ï¼šé”çš„è¿‡æœŸæ—¶é—´ï¼Œé¿å…é”è¢«é•¿æ—¶é—´å ç”¨ã€‚</li>
</ul>

<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> distributed_lock (
    lock_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">PRIMARY</span> KEY,
    holder <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>),
    expire_time <span class="hljs-type">TIMESTAMP</span>
);
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p><strong>è·å–é”</strong>ï¼šåœ¨éœ€è¦è·å–é”çš„åœ°æ–¹ï¼Œé€šè¿‡æ•°æ®åº“äº‹åŠ¡æ¥å°è¯•æ’å…¥ä¸€æ¡é”è®°å½•ï¼Œå¦‚æœæ’å…¥æˆåŠŸåˆ™è¡¨ç¤ºè·å–åˆ°äº†é”ï¼Œå¦åˆ™è¡¨ç¤ºé”å·²ç»è¢«å…¶ä»–è¿›ç¨‹æŒæœ‰ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> distributed_lock (lock_name, holder, expire_time) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'my_lock'</span>, <span class="hljs-string">'process_id'</span>, NOW() <span class="hljs-operator">+</span> <span class="hljs-type">INTERVAL</span> <span class="hljs-number">10</span> <span class="hljs-keyword">SECOND</span>);
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p><strong>é‡Šæ”¾é”</strong>ï¼šåœ¨ä»»åŠ¡æ‰§è¡Œå®Œæˆæˆ–è€…é”è¿‡æœŸæ—¶ï¼Œé€šè¿‡äº‹åŠ¡æ“ä½œæ¥åˆ é™¤å¯¹åº”çš„é”è®°å½•ï¼Œé‡Šæ”¾é”èµ„æºã€‚</p>
<pre><code class="hljs language-ini" lang="ini">DELETE FROM distributed_lock WHERE <span class="hljs-attr">lock_name</span> = <span class="hljs-string">'my_lock'</span> AND holder = <span class="hljs-string">'process_id'</span><span class="hljs-comment">;</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p><strong>å¤„ç†é”è¶…æ—¶</strong>ï¼šå®šæœŸæ¸…ç†è¿‡æœŸçš„é”è®°å½•ï¼Œå¯ä»¥é€šè¿‡å®šæ—¶ä»»åŠ¡æˆ–è€…åå°è¿›ç¨‹æ¥å®ç°ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> distributed_lock <span class="hljs-keyword">WHERE</span> expire_time <span class="hljs-operator">&lt;</span> NOW();
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ä¼˜ç¼ºç‚¹ï¼š</p>
<p>ä¼˜ç‚¹ï¼šä¸éœ€è¦å¼•å…¥å…¶å®ƒä¸­é—´ä»¶ã€‚</p>
<p>ç¼ºç‚¹ï¼šå¯¹æ•°æ®åº“å‹åŠ›è¾ƒå¤§ï¼Œæ‰§è¡Œæ•ˆç‡è¾ƒä½ã€‚</p>
<h4 data-id="heading-15">3.3.2 Redisåˆ†å¸ƒå¼é”-setNxå‘½ä»¤(äº†è§£)</h4>
<p>rediså®ç°åˆ†å¸ƒå¼é”å¯ä»¥ä½¿ç”¨Redisçš„setNxå‘½ä»¤æ¥å®ç°ï¼Œå®ƒçš„åŸç†æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6cfa1d717614f3c9c26aa17f6ddeb2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzYwX2dvX3BocA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764491036&amp;x-signature=SjMQRpqZFutkj%2FJtSR0kUd10MSw%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯SpringDataRedis ,å®ç°çš„æ–¹å¼ä¹Ÿæ¯”è¾ƒç®€å•ï¼š</p>
<p>å¦‚æœæ˜¯åŠ é”ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Boolean <span class="hljs-attr">result</span> = redisTemplate.opsForValue().setIfAbsent(key, <span class="hljs-number">1</span>, <span class="hljs-number">60</span>, TimeUnit.SECONDS)<span class="hljs-comment">;</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>è¿™é‡Œé¢å®é™…å°±æ˜¯è°ƒç”¨äº†redisçš„setnx ï¼Œ<strong>setnx</strong> å¤§è‡´åŸç†ï¼Œä¸»è¦ä¾æ‰˜äº†å®ƒçš„<strong>keyä¸å­˜åœ¨æ‰èƒ½setæˆåŠŸçš„ç‰¹æ€§</strong>ã€‚</p>
<p>å¦‚æœæ˜¯é‡Šæ”¾é”ï¼Œæ¯”è¾ƒç®€å•çš„æ˜¯ç›´æ¥æŠŠè¿™ä¸ªkeyåˆ é™¤æ‰ã€‚ä½†æ˜¯è¿™æ ·ä¸€æ¥åˆ é™¤é”å’ŒåŠ é”çš„ä¸ä¸€å®šæ˜¯åŒä¸€ä¸ªè¿›ç¨‹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é‡Šæ”¾é”çš„æ—¶å€™åˆ¤æ–­å½“å‰è¿›ç¨‹å’ŒåŠ é”çš„è¿›ç¨‹æ˜¯ä¸æ˜¯åŒä¸€ä¸ªè¿›ç¨‹ï¼Œè¿™å°±éœ€è¦åœ¨åˆ é™¤å‰å†æŸ¥è¯¢ä¸€æ¬¡ï¼Œè€Œè¿™æ ·ä¸€æ¥å°±ä¸æ˜¯ä¸€ä¸ªåŸå­æ“ä½œäº†ã€‚å¦‚æœé‡Šæ”¾é”æƒ³è¦æˆä¸ºä¸€ä¸ªåŸå­æ“ä½œï¼Œæ¯”è¾ƒå¸¸è§çš„æ–¹æ¡ˆå°±æ˜¯é€šè¿‡è°ƒç”¨luaè„šæœ¬æ¥å®ç°ã€‚</p>
<p>é‡Šæ”¾é”çš„luaè„šæœ¬æ˜¯è¿™æ ·å†™çš„ï¼š</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-keyword">if</span> redis.call(<span class="hljs-string">'get'</span>, KEYS[<span class="hljs-number">1</span>]) == ARGV[<span class="hljs-number">1</span>] 
 <span class="hljs-keyword">then</span> 
 <span class="hljs-comment">-- æ‰§è¡Œåˆ é™¤æ“ä½œ</span>
 <span class="hljs-keyword">return</span> redis.call(<span class="hljs-string">'del'</span>, KEYS[<span class="hljs-number">1</span>]) 
<span class="hljs-keyword">else</span> 
 <span class="hljs-comment">-- ä¸æˆåŠŸï¼Œè¿”å›0</span>
 <span class="hljs-keyword">return</span> <span class="hljs-number">0</span> 
 <span class="hljs-keyword">end</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>åœ¨è¿™ä¸ªLuaè„šæœ¬ä¸­ï¼Œå‡è®¾é”çš„é”®åä¸º<code>KEYS[1]</code>ï¼Œå¹¶ä¸”é”çš„å€¼ä¸º<code>ARGV[1]</code>ã€‚è„šæœ¬é¦–å…ˆé€šè¿‡<code>get</code>å‘½ä»¤è·å–é”çš„å½“å‰å€¼ï¼Œç„¶ååˆ¤æ–­é”çš„å½“å‰å€¼æ˜¯å¦ä¸ä¼ å…¥çš„å€¼ç›¸åŒã€‚å¦‚æœç›¸åŒï¼Œåˆ™ä½¿ç”¨<code>del</code>å‘½ä»¤åˆ é™¤è¯¥é”®ï¼Œè¡¨ç¤ºæˆåŠŸé‡Šæ”¾é”ï¼›å¦‚æœä¸ç›¸åŒï¼Œåˆ™è¿”å›0ï¼Œè¡¨ç¤ºé‡Šæ”¾å¤±è´¥ã€‚</p>
<p>æ‰§è¡Œé‡Šæ”¾é”çš„luaè„šæœ¬</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è§£é”è„šæœ¬</span>
<span class="hljs-title class_">DefaultRedisScript</span>&lt;<span class="hljs-title class_">Object</span>&gt; unlockScript = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultRedisScript</span>();
unlockScript.<span class="hljs-title function_">setScriptSource</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ResourceScriptSource</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathResource</span>(<span class="hljs-string">"lockDel.lua"</span>)));
 <span class="hljs-comment">// æ‰§è¡Œluaè„šæœ¬è§£é”</span>
 redisTemplate.<span class="hljs-title function_">execute</span>(unlockScript, <span class="hljs-title class_">Collections</span>.<span class="hljs-title function_">singletonList</span>(keyName), value);
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ã€çŸ¥è¯†ç‚¹å°èŠ‚ã€‘</p>
<ol>
<li>å¦‚ä½•å®ç°redisåˆ†å¸ƒå¼é”ï¼Ÿ</li>
</ol>
<p>ï¼ˆ1ï¼‰æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Redisçš„setNxå‘½ä»¤åŠ é”ï¼Œå¯¹äºæˆ‘ä»¬å¸¸ç”¨çš„SpringDataRedisæ¡†æ¶æ¥è¯´ï¼Œå¯ä»¥ä½¿ç”¨setIfAbsentæ–¹æ³•æ¥å®ç°åŠ é”ã€‚</p>
<p>ï¼ˆ2ï¼‰è¿™ç§æ–¹å¼çš„é‡Šæ”¾é”ä¸å…·å¤‡åŸå­æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†é‡Šæ”¾é”çš„æ“ä½œæ”¾åˆ°luaè„šæœ¬ï¼Œåœ¨ä»£ç ä¸­è°ƒç”¨luaè„šæœ¬æ¥å®ç°ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨redisTemplateçš„executeæ–¹æ³•æ¥è°ƒç”¨luaè„šæœ¬ã€‚</p>
<h4 data-id="heading-16">rediså®ç°åˆ†å¸ƒå¼é”å¯ä»¥ä½¿ç”¨Redisçš„setNxå‘½ä»¤æ¥å®ç°ï¼Œå®ƒçš„åŸç†æ˜¯è¿™æ ·çš„ï¼š</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a9f53e510844a2fa8ad2d6ce1b371b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzYwX2dvX3BocA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764491036&amp;x-signature=V3dOW%2BfWwtbA8uNRrD1tVJcM3oQ%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯SpringDataRedis ,å®ç°çš„æ–¹å¼ä¹Ÿæ¯”è¾ƒç®€å•ï¼š</p>
<p>å¦‚æœæ˜¯åŠ é”ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Boolean <span class="hljs-attr">result</span> = redisTemplate.opsForValue().setIfAbsent(key, <span class="hljs-number">1</span>, <span class="hljs-number">60</span>, TimeUnit.SECONDS)<span class="hljs-comment">;</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>è¿™é‡Œé¢å®é™…å°±æ˜¯è°ƒç”¨äº†redisçš„setnx ï¼Œ<strong>setnx</strong> å¤§è‡´åŸç†ï¼Œä¸»è¦ä¾æ‰˜äº†å®ƒçš„<strong>keyä¸å­˜åœ¨æ‰èƒ½setæˆåŠŸçš„ç‰¹æ€§</strong>ã€‚</p>
<p>å¦‚æœæ˜¯é‡Šæ”¾é”ï¼Œæ¯”è¾ƒç®€å•çš„æ˜¯ç›´æ¥æŠŠè¿™ä¸ªkeyåˆ é™¤æ‰ã€‚ä½†æ˜¯è¿™æ ·ä¸€æ¥åˆ é™¤é”å’ŒåŠ é”çš„ä¸ä¸€å®šæ˜¯åŒä¸€ä¸ªè¿›ç¨‹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é‡Šæ”¾é”çš„æ—¶å€™åˆ¤æ–­å½“å‰è¿›ç¨‹å’ŒåŠ é”çš„è¿›ç¨‹æ˜¯ä¸æ˜¯åŒä¸€ä¸ªè¿›ç¨‹ï¼Œè¿™å°±éœ€è¦åœ¨åˆ é™¤å‰å†æŸ¥è¯¢ä¸€æ¬¡ï¼Œè€Œè¿™æ ·ä¸€æ¥å°±ä¸æ˜¯ä¸€ä¸ªåŸå­æ“ä½œäº†ã€‚å¦‚æœé‡Šæ”¾é”æƒ³è¦æˆä¸ºä¸€ä¸ªåŸå­æ“ä½œï¼Œæ¯”è¾ƒå¸¸è§çš„æ–¹æ¡ˆå°±æ˜¯é€šè¿‡è°ƒç”¨luaè„šæœ¬æ¥å®ç°ã€‚</p>
<p>é‡Šæ”¾é”çš„luaè„šæœ¬æ˜¯è¿™æ ·å†™çš„ï¼š</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-keyword">if</span> redis.call(<span class="hljs-string">'get'</span>, KEYS[<span class="hljs-number">1</span>]) == ARGV[<span class="hljs-number">1</span>] 
 <span class="hljs-keyword">then</span> 
 <span class="hljs-comment">-- æ‰§è¡Œåˆ é™¤æ“ä½œ</span>
 <span class="hljs-keyword">return</span> redis.call(<span class="hljs-string">'del'</span>, KEYS[<span class="hljs-number">1</span>]) 
<span class="hljs-keyword">else</span> 
 <span class="hljs-comment">-- ä¸æˆåŠŸï¼Œè¿”å›0</span>
 <span class="hljs-keyword">return</span> <span class="hljs-number">0</span> 
 <span class="hljs-keyword">end</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>åœ¨è¿™ä¸ªLuaè„šæœ¬ä¸­ï¼Œå‡è®¾é”çš„é”®åä¸ºKEYS[1]ï¼Œå¹¶ä¸”é”çš„å€¼ä¸ºARGV[1]ã€‚è„šæœ¬é¦–å…ˆé€šè¿‡getå‘½ä»¤è·å–é”çš„å½“å‰å€¼ï¼Œç„¶ååˆ¤æ–­é”çš„å½“å‰å€¼æ˜¯å¦ä¸ä¼ å…¥çš„å€¼ç›¸åŒã€‚å¦‚æœç›¸åŒï¼Œåˆ™ä½¿ç”¨delå‘½ä»¤åˆ é™¤è¯¥é”®ï¼Œè¡¨ç¤ºæˆåŠŸé‡Šæ”¾é”ï¼›å¦‚æœä¸ç›¸åŒï¼Œåˆ™è¿”å›0ï¼Œè¡¨ç¤ºé‡Šæ”¾å¤±è´¥ã€‚</p>
<p>æ‰§è¡Œé‡Šæ”¾é”çš„luaè„šæœ¬</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è§£é”è„šæœ¬</span>
<span class="hljs-title class_">DefaultRedisScript</span>&lt;<span class="hljs-title class_">Object</span>&gt; unlockScript = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultRedisScript</span>();
unlockScript.<span class="hljs-title function_">setScriptSource</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ResourceScriptSource</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathResource</span>(<span class="hljs-string">"lockDel.lua"</span>)));
 <span class="hljs-comment">// æ‰§è¡Œluaè„šæœ¬è§£é”</span>
 redisTemplate.<span class="hljs-title function_">execute</span>(unlockScript, <span class="hljs-title class_">Collections</span>.<span class="hljs-title function_">singletonList</span>(keyName), value);
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ã€çŸ¥è¯†ç‚¹å°èŠ‚ã€‘</p>
<ol>
<li>å¦‚ä½•å®ç°redisåˆ†å¸ƒå¼é”ï¼Ÿ</li>
</ol>
<p>ï¼ˆ1ï¼‰æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Redisçš„setNxå‘½ä»¤åŠ é”ï¼Œå¯¹äºæˆ‘ä»¬å¸¸ç”¨çš„SpringDataRedisæ¡†æ¶æ¥è¯´ï¼Œå¯ä»¥ä½¿ç”¨setIfAbsentæ–¹æ³•æ¥å®ç°åŠ é”ã€‚</p>
<p>ï¼ˆ2ï¼‰è¿™ç§æ–¹å¼çš„é‡Šæ”¾é”ä¸å…·å¤‡åŸå­æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†é‡Šæ”¾é”çš„æ“ä½œæ”¾åˆ°luaè„šæœ¬ï¼Œåœ¨ä»£ç ä¸­è°ƒç”¨luaè„šæœ¬æ¥å®ç°ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨redisTemplateçš„executeæ–¹æ³•æ¥è°ƒç”¨luaè„šæœ¬ã€‚</p>
<h4 data-id="heading-17">3.3.3 Redissonç»„ä»¶å°è£…å®ç°</h4>
<p>å› ä¸ºsetNxåŠ é”å­˜åœ¨å‡ ä¸ªå¼Šç«¯ï¼š</p>
<p>ï¼ˆ1ï¼‰é‡Šæ”¾é”è°ƒç”¨luaè„šæœ¬å®ç°ç¨ç¹ç</p>
<p>ï¼ˆ2ï¼‰ä¸å¯é‡å…¥</p>
<p>ï¼ˆ3ï¼‰æ²¡æœ‰å®ç°ç»­æœŸ</p>
<p>æˆ‘ä»¬ä½¿ç”¨Redissonç»„ä»¶å¯ä»¥å¾ˆè½»æ¾åœ°è§£å†³ä»¥ä¸Šé—®é¢˜ã€‚ Redissonç»„ä»¶æä¾›äº†å¯é‡å…¥çš„ï¼Œå¯ä»¥å®ç°ç»­æœŸçš„åˆ†å¸ƒå¼é”ã€‚Redissonç»„ä»¶ä¸ºä½ æä¾›äº†ä¸€ä¸ªâ€œçœ‹é—¨ç‹—â€æœºåˆ¶ã€‚</p>
<p>åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œå‚è€ƒä»¥ä¸‹æ­¥éª¤ï¼š</p>
<p>ï¼ˆ1ï¼‰ å¼•å…¥ä¾èµ–</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.redisson<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>redisson<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.16.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
 <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ï¼ˆ2ï¼‰ç¼–å†™é…ç½®ç±»</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Configuration</span>
 <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedissionConfig</span> {
   <span class="hljs-meta">@Value(<span class="hljs-string">"<span class="hljs-subst">${spring.redis.host}</span>"</span>)</span>
   <span class="hljs-keyword">private</span> String redisHost;

   <span class="hljs-meta">@Value(<span class="hljs-string">"<span class="hljs-subst">${spring.redis.password}</span>"</span>)</span>
   <span class="hljs-keyword">private</span> String password;

   <span class="hljs-keyword">private</span> int port = <span class="hljs-number">6379</span>;

   <span class="hljs-meta">@Bean</span>
   <span class="hljs-keyword">public</span> RedissonClient getRedisson() {
     Config config = new Config();
     config.useSingleServer().
     setAddress(<span class="hljs-string">"redis://"</span> + redisHost + <span class="hljs-string">":"</span> + port).
     setPassword(password);
     <span class="hljs-keyword">return</span> Redisson.create(config);
   }
 }
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ï¼ˆ3ï¼‰åŠ é”å’Œé‡Šæ”¾é”</p>
<p>å¼•å…¥RedissonClient</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Resource</span>
 <span class="hljs-keyword">private</span> RedissonClient redissonClient;
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>é€šè¿‡RLockåŠ é”</p>
<pre><code class="hljs language-ini" lang="ini">RLock <span class="hljs-attr">rLock</span> = redissonClient.getLock(lockName)<span class="hljs-comment">;</span>
 boolean <span class="hljs-attr">isLocked</span> = rLock.tryLock(expireTime, TimeUnit.MILLISECONDS)<span class="hljs-comment">;</span>
 if (isLocked) {
 // TODOï¼š å¦‚æœåŠ é”æˆåŠŸ 
 }
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>é€šè¿‡RLocké‡Šæ”¾é”</p>
<pre><code class="hljs language-ini" lang="ini">RLock <span class="hljs-attr">rLock</span> = redissonClient.getLock(lockName)<span class="hljs-comment">;</span>
 boolean <span class="hljs-attr">isLocked</span> = rLock.unLock()<span class="hljs-comment">;</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ã€çŸ¥è¯†ç‚¹å°èŠ‚ã€‘</p>
<p>å¦‚ä½•ä½¿ç”¨Redissonç»„ä»¶å®ç°åˆ†å¸ƒå¼é”ï¼Ÿ</p>
<p>ï¼ˆ1ï¼‰ä½¿ç”¨Redisson.createæ–¹æ³•åˆ›å»ºRedissonClientã€‚</p>
<p>ï¼ˆ2ï¼‰é€šè¿‡redissonClient.getLockæ–¹æ³•è·å–é”å¯¹è±¡RLockã€‚</p>
<p>ï¼ˆ3ï¼‰é€šè¿‡è°ƒç”¨RLockçš„tryLockæ–¹æ³•åŠ é”</p>
<p>ï¼ˆ4ï¼‰é€šè¿‡è°ƒç”¨RLockçš„unLockæ–¹æ³•é‡Šæ”¾é”</p>
<h4 data-id="heading-18">3.3.4 RedLockç®—æ³•çš„å®ç°</h4>
<p>ä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨çº¢é”ï¼ˆRedLockï¼‰ï¼Ÿ</p>
<p>ï¼ˆ1ï¼‰å¦‚æœæˆ‘ä»¬è¿æ¥çš„æ˜¯ä¸€ä¸ªå•èŠ‚ç‚¹çš„Redisï¼Œæœ‰å¯èƒ½å› ä¸ºRediså®•æœºå¯¼è‡´ä¸šåŠ¡ç³»ç»Ÿç˜«ç—ªã€‚</p>
<p>ï¼ˆ2ï¼‰å¦‚æœæˆ‘ä»¬è¿æ¥çš„æ˜¯ä¸€ä¸ªé›†ç¾¤ç¯å¢ƒï¼Œæœ‰å¯èƒ½å› ä¸ºè„‘è£‚é—®é¢˜å¯¼è‡´åˆ†å¸ƒå¼é”å¤±æ•ˆã€‚</p>
<p>è„‘è£‚ æŒ‡çš„æ˜¯å› ä¸ºç½‘ç»œé€šè®¯ä¸­æ–­å¯¼è‡´ä¸€ä¸ªé›†ç¾¤åˆ†è£‚ä¸ºä¸¤ä¸ªé›†ç¾¤çš„ç°è±¡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/14fa6fdd04da4eb19a1b7995dc8e8695~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzYwX2dvX3BocA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764491036&amp;x-signature=TyeC928XqPJ9zfkIPCTf98dktW8%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<p>ï¼ˆ3ï¼‰å¦‚æœæˆ‘ä»¬ä½¿ç”¨çº¢é”ç®—æ³•ï¼Œå®ƒæ‰€è¿æ¥çš„å¤šä¸ªèŠ‚ç‚¹ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªé›†ç¾¤ï¼Œè€Œæ˜¯ç‹¬ç«‹çš„ï¼Œå®ƒçš„å®ç°åŸç†å°±æ˜¯å¯¹æ¯ä¸ªèŠ‚ç‚¹ä¾æ¬¡åŠ é”ï¼Œè¶…è¿‡åŠæ•°æˆåŠŸï¼Œä¸è¶…è¿‡åŠæ•°å¤±è´¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d745924e5134121aa1e180628804aae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzYwX2dvX3BocA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764491036&amp;x-signature=52MpwZnVutZNoFeaNCa0tXUGC40%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<p>å¦‚ä½•ä½¿ç”¨çº¢é”ï¼Œæˆ‘ä»¬çœ‹ä»£ç ï¼š</p>
<p>ï¼ˆ1ï¼‰ å¼•å…¥redissonä¾èµ– ï¼Œå’Œä¸Šè¾¹çš„ä¸€æ ·</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.redisson<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>redisson<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.13.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ï¼ˆ2ï¼‰ç¼–å†™é…ç½®ç±»ï¼Œè¿™ä¸ªæœ‰äº›åŒºåˆ«</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@Configuration</span>
public class RedissionConfig {
  
    <span class="hljs-comment">/**
     * çº¢é”åœ°å€åˆ—è¡¨
     */</span>
    <span class="hljs-keyword">@Value</span>(<span class="hljs-string">"${elegent.lock.address}"</span>)
    private String[] address;

    <span class="hljs-keyword">@Bean</span>
    public RedissonClient[] getRedisson() {
        <span class="hljs-comment">//åˆå§‹åŒ–</span>
        RedissonClient<span class="hljs-selector-attr">[]</span> redissonClients=new RedissonClient<span class="hljs-selector-attr">[ address.length  ]</span>;
        <span class="hljs-built_in">for</span>(int i=<span class="hljs-number">0</span>;i&lt;redisLockConfig.getAddress()<span class="hljs-selector-class">.length</span>;<span class="hljs-selector-tag">i</span>++){
            Config config = new <span class="hljs-built_in">Config</span>();
            config<span class="hljs-selector-class">.useSingleServer</span>()<span class="hljs-selector-class">.setAddress</span>( "redis://"+redisLockConfig.getAddress()<span class="hljs-selector-attr">[i]</span> );
            redissonClients<span class="hljs-selector-attr">[i]</span> = Redisson<span class="hljs-selector-class">.create</span>(config);
        }
        return redissonClients;
    }
}
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ï¼ˆ3ï¼‰åŠ é”å’Œé‡Šæ”¾é”</p>
<p>å…ˆè¦åˆå§‹åŒ–ï¼Œå‡è®¾æˆ‘ä»¬æœ‰äº”ä¸ªèŠ‚ç‚¹</p>
<pre><code class="hljs language-ini" lang="ini">//å®¢æˆ·ç«¯
    private RedissonClient <span class="hljs-section">[]</span> redissonClients<span class="hljs-comment">;</span>

    @PostConstruct
    public void init() {
        //åˆå§‹åŒ–
        <span class="hljs-attr">redissonClients</span>=new RedissonClient[ address.length  ]<span class="hljs-comment">;</span>
        for(int <span class="hljs-attr">i</span>=<span class="hljs-number">0</span><span class="hljs-comment">;i&lt;redisLockConfig.getAddress().length;i++){</span>
            Config <span class="hljs-attr">config</span> = new Config()<span class="hljs-comment">;</span>
            config.useSingleServer().setAddress( "redis://"+redisLockConfig.getAddress()<span class="hljs-section">[i]</span> )<span class="hljs-comment">;</span>
            redissonClients<span class="hljs-section">[i]</span> = Redisson.create(config)<span class="hljs-comment">;</span>
        }
    }  

   private RedissonRedLock getRedissonRedLock(String lockName){
        RLock <span class="hljs-attr">lock0</span> = redissonClients[<span class="hljs-number">0</span>].getLock(lockName)<span class="hljs-comment">;</span>
        RLock <span class="hljs-attr">lock1</span> = redissonClients[<span class="hljs-number">1</span>].getLock(lockName)<span class="hljs-comment">;</span>
        RLock <span class="hljs-attr">lock2</span> = redissonClients[<span class="hljs-number">2</span>].getLock(lockName)<span class="hljs-comment">;</span>
        RLock <span class="hljs-attr">lock3</span> = redissonClients[<span class="hljs-number">3</span>].getLock(lockName)<span class="hljs-comment">;</span>
        RLock <span class="hljs-attr">lock4</span> = redissonClients[<span class="hljs-number">4</span>].getLock(lockName)<span class="hljs-comment">;</span>
        return new RedissonRedLock(lock0,lock1,lock2,lock3,lock4)<span class="hljs-comment">;</span>
    }
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ä¸šåŠ¡ä»£ç ä¸­åŠ é”å’Œé‡Šæ”¾é”</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//çº¢é”</span>
RedissonRedLock redLock=<span class="hljs-built_in">getRedissonRedLock</span>(lockName);  
redLock<span class="hljs-selector-class">.tryLock</span>(<span class="hljs-number">60</span> ,TimeUnit.SECONDS);<span class="hljs-comment">//åŠ é”   å‚æ•°1æ˜¯è¿‡æœŸæ—¶é—´ ï¼Œå¦‚æœç»™-1åˆ™è¡¨ç¤ºç»­æœŸ</span>
redLock<span class="hljs-selector-class">.unlock</span>();<span class="hljs-comment">//é‡Šæ”¾é”</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ã€çŸ¥è¯†ç‚¹å°èŠ‚ã€‘</p>
<p>å¦‚ä½•ä½¿ç”¨çº¢é”ï¼Ÿ</p>
<p>ï¼ˆ1ï¼‰åˆ›å»ºæ¯ä¸ªredisèŠ‚ç‚¹çš„RedissonClient</p>
<p>ï¼ˆ2ï¼‰é€šè¿‡æ¯ä¸ªredisèŠ‚ç‚¹çš„RedissonClientæ„å»ºRedissonRedLock ã€‚</p>
<p>ï¼ˆ3ï¼‰é€šè¿‡RedissonRedLockçš„å®ä¾‹çš„tryLockåŠ é”ï¼Œunlocké‡Šæ”¾é”ã€‚</p>
<h3 data-id="heading-19">3.4 Elegent-lock</h3>
<h4 data-id="heading-20">3.4.1 Elegent-lockç®€ä»‹</h4>
<p>è¿™æ˜¯ä¸€ä¸ªåŸºäºspringbootçš„ä¼˜é›…çš„åˆ†å¸ƒå¼é”ç»„ä»¶ã€‚ä½¿ç”¨è¿™ä¸ªç»„ä»¶å¯ä»¥è®©ä½ æ›´è½»æ¾ã€æ›´ä¼˜é›…åœ°åœ¨é¡¹ç›®ä¸­é›†æˆåˆ†å¸ƒå¼é”ï¼Œè®©ä½ æ›´ä¸“æ³¨ä¸šåŠ¡ä»£ç çš„å¼€å‘ã€‚å®ƒç›®å‰æ”¯æŒredisåˆ†å¸ƒå¼é”ã€consulåˆ†å¸ƒå¼é”ä¸¤ç§å®ç°æ–¹å¼ï¼Œå¯ä»¥é€šè¿‡æ›´æ”¹é…ç½®è‡ªç”±åˆ‡æ¢è€Œä¸éœ€è¦æ›´æ”¹ä¸šåŠ¡ä»£ç ã€‚</p>
<p>å¼€æºé¡¹ç›®åœ°å€ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fchuanzhiliubei%2Felegent-lock" title="https://gitee.com/chuanzhiliubei/elegent-lock" target="_blank" ref="nofollow noopener noreferrer">gitee.com/chuanzhiliuâ€¦</a></p>
<h4 data-id="heading-21">3.4.2 Elegent-lockå¿«é€Ÿå…¥é—¨</h4>
<h5 data-id="heading-22">é›†æˆ</h5>
<p>1.åœ¨é¡¹ç›®ä¸­å¼•å…¥ä¾èµ–</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>cn.elegent.lock<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>elegent-lock-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>2.åœ¨é¡¹ç›®é…ç½®æ–‡ä»¶æ·»åŠ é…ç½®ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">elegent:</span>
  <span class="hljs-attr">lock:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">redis</span>
    <span class="hljs-attr">host:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-string">:6379</span>
    <span class="hljs-attr">wait:</span> <span class="hljs-number">10</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>é…ç½®è¯´æ˜ï¼š</p>
<p>ï¼ˆ1ï¼‰type: åˆ†å¸ƒå¼é”ç±»å‹ï¼Œå¯é€‰å€¼ï¼šconsulã€redisï¼Œé»˜è®¤å€¼æ˜¯redisã€‚</p>
<p>ï¼ˆ2ï¼‰host: åˆ†å¸ƒå¼é”ä¸­é—´ä»¶çš„éƒ¨ç½²åœ°å€ï¼Œé»˜è®¤å€¼ä¸º127.0.0.1ã€‚</p>
<p>ï¼ˆ3ï¼‰wait: ç­‰å¾…è¶…æ—¶æ—¶é—´ï¼Œå•ä½ç§’ï¼Œé»˜è®¤å€¼10ã€‚è¡¨ç¤ºåœ¨è·å–ä¸åˆ°é”çš„æ—¶å€™ä¼šåœ¨æ­¤æ—¶é—´å†…ä¼šè¿›è¡Œé‡è¯•ã€‚</p>
<h5 data-id="heading-23">ä»£ç æ–¹å¼</h5>
<p>ç±»ä¸­å¼•å…¥ElegentLock</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> ElegentLock elegentLock;
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>æ–¹æ³•è°ƒç”¨ä»¥ä¸‹æ–¹æ³•å®ç°åŠ é”ä¸é‡Šæ”¾é”</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">//å‚æ•°è¯´æ˜ï¼š é”åç§°ï¼Œè¿‡æœŸæ—¶é—´ï¼Œæ˜¯å¦è‡ªæ—‹</span>
boolean b = elegentLock.<span class="hljs-keyword">lock</span>(name,<span class="hljs-number">60</span>,<span class="hljs-literal">false</span>);
<span class="hljs-comment">//todo: ä¸šåŠ¡é€»è¾‘</span>
System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"ä¸šåŠ¡é€»è¾‘"</span>+b);
elegentLock.unLock(name);
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h5 data-id="heading-24">æ³¨è§£æ–¹å¼</h5>
<p>åœ¨æ–¹æ³•ä¸Šæ·»åŠ æ³¨è§£<code>@ELegentLock(lockName = "test",isSpin= true,ttl=10)</code> å³å¯ã€‚</p>
<p><code>lockName</code>ä¸ºé”åå­—ï¼Œå®é™…åŠ é”ä¼šä»¥<code>lockName</code>+æ–¹æ³•å‚æ•°ä½œä¸ºé”keyã€‚</p>
<p><code>always =true</code>ï¼ŒåŠ é”ï¼Œå¦‚æœé”è¢«å ç”¨ä¼šé€šè¿‡è‡ªæ—‹æ–¹å¼ä¸æ–­å°è¯•ï¼Œç›´åˆ°åŠ æˆåŠŸä¸ºæ­¢ã€‚</p>
<p><code>always =false</code>ï¼Œï¼ˆé»˜è®¤å€¼ï¼‰åŠ é”ï¼Œåªå°è¯•ä¸€æ¬¡ã€‚æ¨èä½¿ç”¨æ­¤é€‰é¡¹ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥è¿è¡ŒElegentæä¾›çš„demoä»£ç ï¼Œè¿›è¡Œå¿«é€Ÿå­¦ä¹ ã€‚</p>
<h3 data-id="heading-25">3.5 åŸºäºConsulåˆ†å¸ƒå¼é”</h3>
<h4 data-id="heading-26">3.5.1 Consulç®€ä»‹</h4>
<p>Consulæ˜¯HashiCorpå…¬å¸æ¨å‡ºçš„å¼€æºå·¥å…·ï¼Œç”¨äºå®ç°åˆ†å¸ƒå¼ç³»ç»Ÿçš„æœåŠ¡å‘ç°ä¸é…ç½®ã€‚ Consulæ˜¯åˆ†å¸ƒå¼çš„ã€é«˜å¯ç”¨çš„ã€å¯æ¨ªå‘æ‰©å±•çš„ã€‚å®ƒå…·å¤‡ä»¥ä¸‹ç‰¹æ€§ :</p>
<p>æœåŠ¡å‘ç°ï¼šconsulé€šè¿‡DNSæˆ–è€…HTTPæ¥å£ä½¿æœåŠ¡æ³¨å†Œå’ŒæœåŠ¡å‘ç°å˜çš„å¾ˆå®¹æ˜“ã€‚<br/>
å¥åº·æ£€æŸ¥ï¼šå¥åº·æ£€æµ‹ä½¿consulå¯ä»¥å¿«é€Ÿçš„å‘Šè­¦åœ¨é›†ç¾¤ä¸­çš„æ“ä½œã€‚<br/>
é”®/å€¼å­˜å‚¨ï¼šä¸€ä¸ªç”¨æ¥å­˜å‚¨åŠ¨æ€é…ç½®çš„ç³»ç»Ÿã€‚æä¾›ç®€å•çš„HTTPæ¥å£ï¼Œå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹æ“ä½œã€‚<br/>
å¤šæ•°æ®ä¸­å¿ƒï¼šæ— éœ€å¤æ‚çš„é…ç½®ï¼Œå³å¯æ”¯æŒä»»æ„æ•°é‡çš„åŒºåŸŸã€‚</p>
<p>ä¸€å¥è¯æ¦‚å†µï¼š</p>
<p>Consulæ—¢å¯ä»¥ç”¨äºæ³¨å†Œä¸­å¿ƒå’Œé…ç½®ä¸­å¿ƒï¼Œä¹Ÿå¯ä»¥åškeyValueå­˜å‚¨ã€‚ä½¿ç”¨Consulåšåˆ†å¸ƒå¼é”çš„åº•å±‚åŸç†å°±æ˜¯keyValueå­˜å‚¨ã€‚</p>
<p>è¯¾ç¨‹æä¾›äº†é…å¥—çš„ consul æœ¬åœ°è¿è¡Œç¯å¢ƒ</p>
<h4 data-id="heading-27">3.5.2 é¡¹ç›®ä¸ºä»€ä¹ˆä½¿ç”¨Consulåšåˆ†å¸ƒå¼é”ï¼Ÿ</h4>
<p>Consulçš„åˆ†å¸ƒå¼é”ä¸Redisåˆ†å¸ƒå¼é”æœ‰ä»€ä¹ˆä¸åŒï¼Ÿé¡¹ç›®ä¸ºä»€ä¹ˆä½¿ç”¨Consulåšåˆ†å¸ƒå¼é”ï¼Ÿ</p>
<p>ä¸€å¥è¯æ¦‚å†µï¼š</p>
<p>å› ä¸ºConsulåˆ†å¸ƒå¼é”æ˜¯CPæ¶æ„çš„ï¼Œä½¿ç”¨ Raft ç®—æ³•æ¥ä¿è¯ä¸€è‡´æ€§ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒRedisç”±äºæ˜¯APæ¶æ„ï¼Œå¯èƒ½å› ä¸ºè„‘è£‚é€ æˆæ•°æ®ä¸ä¸€è‡´ï¼Œå¦‚æœé‡‡ç”¨Redisçº¢é”æ€§èƒ½åˆå¾ˆå·®ã€‚æ‰€ä»¥ï¼Œå½“æ—¶æˆ‘ä»¬æƒè¡¡åˆ©å¼Šï¼Œå†³å®šé‡‡ç”¨Consulåˆ†å¸ƒå¼é”ã€‚</p>
<p>çº¢é”ä¼šæœ‰å¼Šç«¯ã€‚æ—¶é—´å¤æ‚åº¦å˜é«˜ï¼ˆå“åº”æ—¶é—´è¾¹é•¿ï¼Œååé‡å˜ä½ï¼‰ ï¼Œç©ºé—´å¤æ‚åº¦å˜é«˜äº†ã€‚</p>
<h4 data-id="heading-28">3.5.3 Consulåšåˆ†å¸ƒå¼é”å¿«é€Ÿå…¥é—¨</h4>
<p>ä¿®æ”¹é…ç½®æ–‡ä»¶ ä¸ºconsul</p>
<h2 data-id="heading-29">4 åˆ†å¸ƒå¼é”è§£å†³è¶…å–é—®é¢˜</h2>
<h3 data-id="heading-30">4.1 é—®é¢˜åˆ†æ</h3>
<p>é¦–å…ˆæˆ‘ä»¬å…ˆè¯´ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿè¶…ä¹°çš„é—®é¢˜ã€‚</p>
<p>å¦‚æœå”®è´§æœºæ˜¯å¸¦å±å¹•çš„ï¼Œç†è®ºä¸Šæ¥è¯´æ˜¯ä¸ä¼šäº§ç”Ÿè¶…å–é—®é¢˜çš„ã€‚å› ä¸ºå¸¦å±å¹•çš„å”®è´§æœºå®é™…ä¸­å°±åªèƒ½æ˜¯ç‹¬å ç±»å‹çš„æ“ä½œï¼Œä½†æ˜¯å¦‚æœæ˜¯ä¸å¸¦å±å¹•çš„å”®è´§æœºï¼Œç”¨æˆ·å°±éœ€è¦æ‰«æå”®è´§æœºä¸Šçš„äºŒç»´ç æ¥è¿›è¡Œè´­ä¹°æ“ä½œï¼Œ é‚£ä¹ˆå‡è®¾æœ‰ä¸¤ä¸ªç”¨æˆ·åœ¨ç›¸è¿‘çš„æ—¶é—´ç‚¹åœ¨åŒä¸€å°å”®è´§æœºè´­ä¹°äº†åŒä¸€ä¸ªå•†å“ï¼Œ è€Œæ°å¥½è¿™ä»¶å•†å“åªæœ‰ä¸€ä»¶äº†ï¼Œå°±ä¼šå¯èƒ½äº§ç”Ÿè¶…å–çš„é—®é¢˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/495f65418e504665afb86a120b5f23b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzYwX2dvX3BocA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764491036&amp;x-signature=jbsfGFIHihZ1vOMVReOhoXiEQzA%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<p>ä¸ºä»€ä¹ˆä¼šè¶…å–å‘¢ï¼Ÿæˆ‘ä»¬çœ‹ä¸€ä¸‹ä¸‹é¢çš„å›¾ï¼š</p>
<p>è¿™æ˜¯ä¸€ä¸ªç”¨æˆ·çš„è´­ä¹°æ—¶åºå›¾</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ca6945323e04f18aec825913afc50a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzYwX2dvX3BocA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764491036&amp;x-signature=GnRAZbl8YJxasJJaWO6cnI2VUOA%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<p>å½“ç”¨æˆ·ä¸‹å•æ—¶ï¼Œä¼šåˆ¤æ–­å½“å‰è¦è´­ä¹°çš„å•†å“åœ¨è¯¥å”®è´§æœºçš„åº“å­˜ï¼Œå¦‚æœå½“å‰åº“å­˜ä¸º1ä»¶ï¼Œä¹Ÿæ˜¯å¯ä»¥ä¸‹å•çš„ï¼Œç”¨æˆ·è¿™ä¸ªæ—¶å€™ä¸‹å•å¹¶æ”¯ä»˜ï¼Œæ”¯ä»˜æˆåŠŸåï¼Œæ”¯ä»˜ç³»ç»Ÿå›è°ƒæˆ‘ä»¬çš„è®¢å•å¾®æœåŠ¡ï¼Œè®¢å•å¾®æœåŠ¡å‘å”®è´§æœºå‘é€å‡ºè´§æŒ‡ä»¤ï¼Œå”®è´§æœºç»ˆç«¯æ‰§è¡Œå‡ºè´§ï¼Œå¹¶å‘æœåŠ¡ç«¯ä¸ŠæŠ¥ç»“æœï¼ŒæœåŠ¡ç«¯çš„å”®è´§æœºå¾®æœåŠ¡å†æ‰£å‡åº“å­˜ã€‚è¿™æœŸé—´å…¶å®è‡³å°‘ä¹Ÿéœ€å‡ ç§’å·¦å³çš„æ—¶é—´æ‰èƒ½å®Œæˆã€‚è€Œå¦‚æœåœ¨è¿™æœŸé—´ï¼Œå¦å¤–ä¸€ä¸ªäººä¹Ÿç€æ€¥è´­ä¹°å•†å“ï¼Œæ‰«æå¹¶ä¸‹å•è´­ä¹°åŒä¸€ä¸ªå•†å“ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ç¬¬ä¸€ä¸ªäººè´­ä¹°çš„æµç¨‹è¿˜æ²¡æœ‰ç»“æŸï¼Œåº“å­˜è¿˜æ²¡æœ‰æ‰£å‡ï¼Œæ‰€ä»¥æ˜¾ç¤ºçš„å•†å“ä»ç„¶è¿˜æœ‰ä¸€ä»¶ï¼Œé‚£ä»–ä»ç„¶å¯ä»¥ä¸‹å•ã€‚ç­‰ä»–æ”¯ä»˜å®Œæˆåï¼Œå”®è´§æœºæ²¡æœ‰å•†å“å¯ä»¥å‡ºè´§äº†ï¼Œè¿™ä¸ªæ—¶å€™å°±äº§ç”Ÿäº†è¶…å–ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f68c5d10ad6d4ad0b05f88f19aea71e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzYwX2dvX3BocA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764491036&amp;x-signature=TiN2BJKPmiYAQUf8A1fWk4umJd4%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<p>è¿™æ ·æˆ‘ä»¬å°±ä¼šäº§ç”Ÿè¶…å–çš„ç°è±¡ã€‚</p>
<h3 data-id="heading-31">4.2 å®ç°æ€è·¯</h3>
<p>é‚£ä¹ˆå¦‚ä½•è§£å†³è¶…å–ç°è±¡å‘¢ï¼Ÿæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨åˆ†å¸ƒå¼é”æ¥è§£å†³ã€‚</p>
<p>user1åœ¨ä¸‹å•å‰éœ€è¦åŠ é”ï¼Œåœ¨æ‰£å‡åº“å­˜åè¦é‡Šæ”¾é”ã€‚è¿™æ ·ï¼Œå°±ç¡®ä¿user2åœ¨ä¸‹å•æ—¶ä¸Šä¸€ä¸ªæµç¨‹æ˜¯å·²ç»è·‘å®Œçš„ï¼Œæ­¤æ—¶çš„åº“å­˜å°±æ˜¯å‡†ç¡®çš„ï¼Œå°±ä¸ä¼šäº§ç”Ÿè¶…å–çš„é—®é¢˜äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d1fc320bf174cacbe4ac0ac47e85d79~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzYwX2dvX3BocA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764491036&amp;x-signature=xO5XE%2FScLggA%2BmfHAW3Zf4wLZ7I%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<h3 data-id="heading-32">4.3 ä»£ç å®ç°</h3>
<h4 data-id="heading-33">4.3.1 è®¢å•å¾®æœåŠ¡åŠ é”</h4>
<p>ï¼ˆ1ï¼‰åœ¨è®¢å•å¾®æœåŠ¡çš„pomæ–‡ä»¶å¼•å…¥ä¾èµ–</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>cn.elegent.lock<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>elegent-lock-consul<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ï¼ˆ2ï¼‰åœ¨è®¢å•å¾®æœåŠ¡çš„é…ç½®ï¼ˆé…ç½®ä¸­å¿ƒï¼‰ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">elegent:</span>
  <span class="hljs-attr">lock:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">consul</span>
    <span class="hljs-attr">host:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-string">:8500</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ï¼ˆ3ï¼‰åœ¨OrderServiceImplçš„createOrderæ–¹æ³•ä¸­æ·»åŠ åˆ†å¸ƒå¼é”ä»£ç ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">ElegentLock</span> eLegentLock;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">OrderEntity</span> <span class="hljs-title function_">createOrder</span>(<span class="hljs-params">PayVO payVO,<span class="hljs-built_in">String</span> platform</span>) {
        <span class="hljs-comment">//åˆ¤æ–­åº“å­˜</span>
        <span class="hljs-keyword">if</span>( !vmService.<span class="hljs-title function_">hasCapacity</span>(payVO.<span class="hljs-title function_">getInnerCode</span>(), <span class="hljs-title class_">Long</span>.<span class="hljs-title function_">valueOf</span>(payVO.<span class="hljs-title function_">getSkuId</span>())) ){
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LogicException</span>(<span class="hljs-string">"å•†å“åº“å­˜ä¸è¶³"</span>);
        }

        <span class="hljs-comment">//åŠ é”ï¼Œåˆ¤æ–­ä¸Šæ¬¡äº¤æ˜“æ˜¯å¦å®Œæˆ</span>
        <span class="hljs-built_in">boolean</span> lock = eLegentLock.<span class="hljs-title function_">lock</span>(payVO.<span class="hljs-title function_">getInnerCode</span>() + <span class="hljs-string">"-"</span> + payVO.<span class="hljs-title function_">getSkuId</span>(), <span class="hljs-number">60</span>, <span class="hljs-literal">false</span>);
        <span class="hljs-keyword">if</span>(!lock){
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LogicException</span>(<span class="hljs-string">"ä¸Šä¸€ç¬”äº¤æ˜“æœªå®Œæˆï¼Œè¯·ç¨åï¼"</span>);
        }
        ..................................
    }
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-34">4.3.2 å”®è´§æœºå¾®æœåŠ¡é‡Šæ”¾é”</h4>
<p>ï¼ˆ1ï¼‰åœ¨å”®è´§æœºå¾®æœåŠ¡çš„pomæ–‡ä»¶å¼•å…¥ä¾èµ–</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>cn.elegent.lock<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>elegent-lock-consul<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ï¼ˆ2ï¼‰åœ¨å”®è´§æœºå¾®æœåŠ¡çš„é…ç½®ï¼ˆé…ç½®ä¸­å¿ƒï¼‰ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">elegent:</span>
  <span class="hljs-attr">lock:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">consul</span>
    <span class="hljs-attr">host:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-string">:8500</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ï¼ˆ3ï¼‰åœ¨VendOutResultHandlerçš„processæ–¹æ³•ä¸­æ·»åŠ é‡Šæ”¾åˆ†å¸ƒå¼é”ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> ElegentLock elegentLock;

<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">process</span><span class="hljs-params">(String s,VendoutResultDTO vendoutResultDTO)</span> <span class="hljs-keyword">throws</span> Exception {
    log.info(<span class="hljs-string">"æ¥æ”¶åˆ°å‡ºè´§ç»“æœ,{}"</span>, vendoutResultDTO);
    ..........       
    <span class="hljs-comment">//é‡Šæ”¾é”</span>
    elegentLock.unLock( vendoutResultDTO.getInnerCode()+<span class="hljs-string">"-"</span>+vendoutResultDTO.getSkuId() );
}
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h2 data-id="heading-35">5.è¶…æ—¶è®¢å•å¤„ç†æ–¹æ¡ˆ-å»¶è¿Ÿæ¶ˆæ¯</h2>
<h3 data-id="heading-36">5.1 éœ€æ±‚åˆ†æ</h3>
<p>æœ‰å¾ˆå¤šæ—¶å€™ï¼Œç”¨æˆ·ä¸‹å•åï¼Œå¹¶ä¸ä¸€å®šä¼šæ”¯ä»˜ã€‚å¦‚æœç”¨æˆ·ä¸€ç›´ä¸æ”¯ä»˜ï¼Œé‚£ä¹ˆè¿™ä¸ªè®¢å•å²‚ä¸æ˜¯ä¸€ç›´å¤„äºæœªæ”¯ä»˜çŠ¶æ€ï¼Œè¿™å¹¶ä¸åˆ©äºæˆ‘ä»¬çš„è®¢å•ç®¡ç†ï¼Œæˆ‘ä»¬é€šå¸¸çš„åšæ³•æ˜¯è®¾å®šä¸€ä¸ªæ—¶æ•ˆï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´ï¼Œéœ€è¦å°†è¿™ä¸ªè®¢å•æ›´æ”¹ä¸ºæ— æ•ˆçŠ¶æ€ï¼Œå¹¶ä¸”åœ¨æ”¯ä»˜å¹³å°å°†è¿™ç¬”äº¤æ˜“å…³é—­æ‰ã€‚</p>
<h3 data-id="heading-37">5.2 å®ç°æ€è·¯</h3>
<p>ï¼ˆ1ï¼‰åœ¨ä¸‹å•æ—¶ï¼Œé€šè¿‡ACæ¡†æ¶å‘é€å¼‚æ­¥æ¶ˆæ¯ï¼Œå»¶è¿Ÿæ—¶é—´ä¸º5åˆ†é’Ÿã€‚å‘é€å†…å®¹ä¸ºè®¢å•å·</p>
<p>åè®®å°è£…: OrderCheck å°è£…çš„æ˜¯è®¢å•å·</p>
<p>ä¸»é¢˜å°è£…: TopicConfig.ORDER_CHECK_TOPIC</p>
<p>å¦‚æœå»¶è¿Ÿ5åˆ†é’Ÿ,å‰ç¼€ä¸º $delayed/300/</p>
<p>ï¼ˆ2ï¼‰åœ¨è®¢å•æœåŠ¡ä¸­æ¥æ”¶å»¶è¿Ÿæ¶ˆæ¯, ä»åè®®ä¸­è§£æå‡ºè®¢å•å·, æŸ¥è¯¢è®¢å•ï¼Œå¦‚æœæ­¤è®¢å•æœªæ”¯ä»˜åˆ™ä¿®æ”¹ä¸ºæ— æ•ˆè®¢å•ï¼Œå¹¶å…³é—­æ­¤æ”¯ä»˜äº¤æ˜“å•ã€‚</p>
<h3 data-id="heading-38">5.3 ä»£ç å®ç°</h3>
<h4 data-id="heading-39">5.3.1 ä¸»é¢˜å®šä¹‰ä¸åè®®å°è£…</h4>
<p>ï¼ˆ1ï¼‰TopicConfigå®šä¹‰å»¶è¿Ÿè®¢å•ä¸»é¢˜</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">/**
 * å»¶è¿Ÿè®¢å•ä¸»é¢˜
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">static</span> <span class="hljs-type">String</span> ORDER_CHECK_TOPIC = <span class="hljs-string">"server/order/check"</span>;
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ï¼ˆ2ï¼‰service_commonå®šä¹‰OrderCheckDTOï¼Œç”¨äºå°è£…è®¢å•å·</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">/**
 * è®¢å•å»¶è¿Ÿæ£€æŸ¥åè®®ç±»
 */</span>
@Data
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderCheckDTO</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> orderNo;

}
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-40">5.3.2 å‘é€å»¶è¿Ÿæ¶ˆæ¯</h4>
<p>OrderServiceImplå¼•å…¥</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> ElegentAC elegentAC;
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>åœ¨OrderServiceImpl çš„createOrderæ–¹æ³•<strong>ç»“å°¾å¤„</strong>æ·»åŠ ä»¥ä¸‹ä»£ç </p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//å°†è®¢å•æ”¾åˆ°å»¶è¿Ÿé˜Ÿåˆ—ä¸­ï¼Œ5åˆ†é’Ÿåæ£€æŸ¥æ”¯ä»˜çŠ¶æ€ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</span>
OrderCheckDTO orderCheck = new <span class="hljs-built_in">OrderCheckDTO</span>();
orderCheck<span class="hljs-selector-class">.setOrderNo</span>(orderEntity.getOrderNo());
try {
    elegentAC<span class="hljs-selector-class">.delayPublish</span>(TopicConfig.ORDER_CHECK_TOPIC,orderCheck,<span class="hljs-number">300</span>);
} catch (Exception e) {
    log<span class="hljs-selector-class">.error</span>("send to emq error",e);
}
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-41">5.3.3 æ¥æ”¶å»¶è¿Ÿæ¶ˆæ¯</h4>
<p>åœ¨è®¢å•æœåŠ¡é¡¹ç›®ä¸­å®ç°æ¥æ”¶åˆ°è¯¥æ¶ˆæ¯çš„å¤„ç†ä»£ç ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">/**
 * è®¢å•è¶…æ—¶å¤„ç†
 */</span>
<span class="hljs-variable">@Topic</span>(TopicConfig.ORDER_CHECK_TOPIC)
<span class="hljs-variable">@Slf4j</span>
public class OrderCheckHandler implements ACHandler&lt;OrderCheckDTO&gt; {

    <span class="hljs-variable">@Autowired</span>
    private OrderService orderService;

    <span class="hljs-variable">@Autowired</span>
    private ElegentPay elegentPay;

    <span class="hljs-variable">@Override</span>
    public void <span class="hljs-built_in">process</span>(String s, OrderCheckDTO orderCheck) throws Exception {

        <span class="hljs-selector-tag">if</span>(orderCheck == null || Strings.<span class="hljs-built_in">isNullOrEmpty</span>(orderCheck.<span class="hljs-built_in">getOrderNo</span>())) <span class="hljs-selector-tag">return</span>;
        <span class="hljs-comment">//æŸ¥è¯¢è®¢å•</span>
        <span class="hljs-selector-tag">OrderEntity</span> <span class="hljs-selector-tag">orderEntity</span> = <span class="hljs-selector-tag">orderService</span><span class="hljs-selector-class">.getByOrderNo</span>(orderCheck.<span class="hljs-built_in">getOrderNo</span>());
        <span class="hljs-selector-tag">if</span>(orderEntity == null) <span class="hljs-selector-tag">return</span>;
        <span class="hljs-selector-tag">if</span>(orderEntity.<span class="hljs-built_in">getStatus</span>().<span class="hljs-built_in">equals</span>(OrderStatus.ORDER_STATUS_CREATE)){  <span class="hljs-comment">//å¦‚æœæ˜¯æœªæ”¯ä»˜</span>
            <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.info</span>(<span class="hljs-string">"è®¢å•æ— æ•ˆå¤„ç† è®¢å•å·ï¼š{}"</span>,orderCheck.<span class="hljs-built_in">getOrderNo</span>());
            <span class="hljs-selector-tag">orderEntity</span><span class="hljs-selector-class">.setStatus</span>(OrderStatus.ORDER_STATUS_INVALID); <span class="hljs-comment">//æ— æ•ˆçŠ¶æ€</span>
            <span class="hljs-selector-tag">orderService</span><span class="hljs-selector-class">.updateById</span>(orderEntity);
            <span class="hljs-comment">//å…³é—­æ”¯ä»˜</span>
            <span class="hljs-selector-tag">elegentPay</span><span class="hljs-selector-class">.closePay</span>( orderEntity.<span class="hljs-built_in">getOrderNo</span>(),orderEntity.<span class="hljs-built_in">getPayType</span>() );
        }
    }
}
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-42">æ€»ç»“ï¼š</h3>
<p>ï¼ˆï¼‘ï¼‰è¯·é—®ä½ å¦‚ä½•ç†è§£CAPå®šç† ï¼Ÿ</p>
<p>CAP å®šç†é˜è¿°ä¸€ä¸ªè§‚ç‚¹ï¼š Cï¼ˆä¸€è‡´æ€§ï¼‰Aï¼ˆå¯ç”¨æ€§ï¼‰Pï¼ˆåˆ†åŒºå®¹é”™ï¼‰ ä¸èƒ½åŒæ—¶æ»¡è¶³ã€‚</p>
<p>CPç³»ç»Ÿï¼š ZK \ consul</p>
<p>APç³»ç»Ÿï¼š redis NACOS</p>
<p>ï¼ˆï¼’ï¼‰ä»€ä¹ˆæ˜¯BASEç†è®º</p>
<p>åŸºæœ¬å¯ç”¨ è½¯çŠ¶æ€ æœ€ç»ˆä¸€è‡´æ€§ã€‚</p>
<p>ï¼ˆï¼“ï¼‰ä½ åœ¨é¡¹ç›®ä¸­æ˜¯å¦ä½¿ç”¨è¿‡åˆ†å¸ƒé”ï¼Ÿ</p>
<p>æ˜¯ï¼Œç”¨è¿‡ã€‚æˆ‘ä»¬ä½¿ç”¨CONSULçš„åŸå› ã€‚[åˆ†æåˆ†å¸ƒå¼é”å•æœºç‰ˆå•ç‚¹æ•…éšœã€çº¢é”æ€§èƒ½æŸå¤±è§’åº¦é€æ­¥åˆ†æ ]</p>
<p>ï¼ˆï¼”ï¼‰ä½ åœ¨é¡¹ç›®ä¸­æ˜¯å¦ä½¿ç”¨è¿‡çº¿ç¨‹æ± æŠ€æœ¯ï¼Ÿ</p>
<p>æ˜¯ï¼Œç”¨è¿‡ã€‚</p>
<p>ï¼ˆï¼•ï¼‰åˆ†å¸ƒå¼é”æœ‰å“ªäº›ï¼Ÿ</p>
<p>ï¼ˆï¼–ï¼‰REDISSIONåˆ†å¸ƒå¼é”ä½ æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ ç­”ï¼šå¸¸è§æ–¹æ³•ï¼å¼•å‡ºæ¡†æ¶å’ŒCONSULåˆ†å¸ƒå¼é”ã€‚</p>
<p>ï¼ˆï¼—ï¼‰å»¶è¿Ÿæ¶ˆæ¯ä½ é¡¹ç›®ä¸­åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>