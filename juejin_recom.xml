<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[CSS å®šä½è¯¦è§£ï¼šrelativeã€absoluteã€fixedã€sticky ä¸ static]]></title>    <link>https://juejin.cn/post/7571258854901415979</link>    <guid>https://juejin.cn/post/7571258854901415979</guid>    <pubDate>2025-11-11T14:26:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571258854901415979" data-draft-id="7571304204754763830" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CSS å®šä½è¯¦è§£ï¼šrelativeã€absoluteã€fixedã€sticky ä¸ static"/> <meta itemprop="keywords" content="CSS"/> <meta itemprop="datePublished" content="2025-11-11T14:26:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="iNx177"/> <meta itemprop="url" content="https://juejin.cn/user/2904285373272825"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CSS å®šä½è¯¦è§£ï¼šrelativeã€absoluteã€fixedã€sticky ä¸ static
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2904285373272825/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    iNx177
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-11T14:26:27.000Z" title="Tue Nov 11 2025 14:26:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">CSS å®šä½è¯¦è§£ï¼šrelativeã€absoluteã€fixedã€sticky ä¸ static</h2>
<p>CSS ä¸­çš„ <code>position</code> å±æ€§ç”¨äºæ§åˆ¶å…ƒç´ çš„å®šä½æ–¹å¼ï¼Œå¸¸è§çš„å–å€¼åŒ…æ‹¬ <code>relative</code>ã€<code>absolute</code>ã€<code>fixed</code>ã€<code>sticky</code> å’Œ <code>static</code>ã€‚ç†è§£å®ƒä»¬çš„è¡Œä¸ºå·®å¼‚ï¼Œå°¤å…¶æ˜¯æ˜¯å¦è„±ç¦»æ–‡æ¡£æµã€å®šä½å‚è€ƒç‚¹ç­‰ï¼Œå¯¹å¸ƒå±€å¼€å‘è‡³å…³é‡è¦ã€‚</p>
<h3 data-id="heading-1">æ–‡æ¡£æµåŸºç¡€</h3>
<p>æ–‡æ¡£æµæ˜¯ HTML å…ƒç´ é»˜è®¤çš„å¸ƒå±€æ–¹å¼ï¼šå—çº§å…ƒç´ å‚ç›´æ’åˆ—ï¼Œè¡Œå†…å…ƒç´ æ°´å¹³æ’åˆ—ï¼Œæ•´ä½“éµå¾ªä»ä¸Šåˆ°ä¸‹ã€ä»å·¦åˆ°å³çš„è‡ªç„¶é¡ºåºã€‚å…ƒç´ è‹¥â€œè„±ç¦»æ–‡æ¡£æµâ€ï¼Œåˆ™ä¸å†å æ®åŸæœ‰ç©ºé—´ï¼Œå¯èƒ½å½±å“å…¶ä»–å…ƒç´ çš„å¸ƒå±€ã€‚</p>
<h3 data-id="heading-2">relativeï¼ˆç›¸å¯¹å®šä½ï¼‰</h3>
<ul>
<li>ç›¸å¯¹äºå…ƒç´ åœ¨æ–‡æ¡£æµä¸­çš„åŸå§‹ä½ç½®è¿›è¡Œåç§»ã€‚</li>
<li><strong>ä¸ä¼šè„±ç¦»æ–‡æ¡£æµ</strong>ï¼ŒåŸä½ç½®ä»è¢«ä¿ç•™ï¼Œåç»­å…ƒç´ ä»æŒ‰æ ‡å‡†æµå¯¹å¾…å®ƒã€‚</li>
<li>å¸¸ç”¨äºå¾®è°ƒä½ç½®æˆ–ä½œä¸ºç»å¯¹å®šä½å­å…ƒç´ çš„å‚è€ƒå®¹å™¨ã€‚</li>
</ul>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.parent</span> {
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">100px</span>;
}
</code></pre>
<h3 data-id="heading-3">absoluteï¼ˆç»å¯¹å®šä½ï¼‰</h3>
<ul>
<li>è„±ç¦»æ–‡æ¡£æµï¼Œä¸å æ®åŸæœ‰ç©ºé—´ã€‚</li>
<li>å®šä½å‚è€ƒç‚¹ä¸º<strong>æœ€è¿‘çš„é <code>static</code> å®šä½ç¥–å…ˆå…ƒç´ </strong>ï¼›è‹¥æ— ï¼Œåˆ™ä»¥ <code>&lt;body&gt;</code> ä¸ºåŸºå‡†ã€‚</li>
<li>å¸¸ç”¨äºå¼¹çª—ã€ä¸‹æ‹‰èœå•ç­‰éœ€è¦ç²¾ç¡®æ§åˆ¶ä½ç½®çš„åœºæ™¯ã€‚</li>
</ul>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.child</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">right</span>: <span class="hljs-number">100px</span>;
}
</code></pre>
<h3 data-id="heading-4">fixedï¼ˆå›ºå®šå®šä½ï¼‰</h3>
<ul>
<li>è„±ç¦»æ–‡æ¡£æµã€‚</li>
<li>ä»¥<strong>æµè§ˆå™¨è§†å£</strong>ä¸ºå‚è€ƒç‚¹ï¼Œä¸éšé¡µé¢æ»šåŠ¨è€Œç§»åŠ¨ã€‚</li>
<li>é€‚ç”¨äºå¯¼èˆªæ ã€æ‚¬æµ®æŒ‰é’®ç­‰éœ€å›ºå®šæ˜¾ç¤ºçš„å…ƒç´ ã€‚</li>
</ul>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.child</span> {
  <span class="hljs-attribute">position</span>: fixed;
  <span class="hljs-attribute">bottom</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">right</span>: <span class="hljs-number">100px</span>;
}
</code></pre>
<h3 data-id="heading-5">stickyï¼ˆé»è¿å®šä½ï¼‰</h3>
<ul>
<li>è¡Œä¸ºä»‹äº <code>relative</code> ä¸ <code>fixed</code> ä¹‹é—´ã€‚</li>
<li>åœ¨æ»šåŠ¨åˆ°è¾¾æŒ‡å®šé˜ˆå€¼ï¼ˆå¦‚ <code>top: 100px</code>ï¼‰å‰è¡¨ç°ä¸ºç›¸å¯¹å®šä½ï¼›è¶…è¿‡åå˜ä¸ºå›ºå®šå®šä½ã€‚</li>
<li>éœ€æŒ‡å®š <code>top</code>ã€<code>bottom</code> ç­‰é˜ˆå€¼æ‰ç”Ÿæ•ˆã€‚</li>
<li>ä¸è„±ç¦»æ–‡æ¡£æµï¼Œä½†æ»šåŠ¨æ—¶ä¼šâ€œç²˜â€åœ¨è§†å£æŸå¤„ã€‚</li>
</ul>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.box</span> {
  <span class="hljs-attribute">position</span>: sticky;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">100px</span>;
}
</code></pre>
<h3 data-id="heading-6">staticï¼ˆé™æ€å®šä½ï¼‰</h3>
<ul>
<li>é»˜è®¤å®šä½æ–¹å¼ï¼Œå…ƒç´ æŒ‰æ­£å¸¸æ–‡æ¡£æµæ’åˆ—ã€‚</li>
<li>è®¾ç½® <code>left</code>ã€<code>top</code> ç­‰åç§»å±æ€§æ— æ•ˆã€‚</li>
<li>å¯ç”¨äº<strong>é‡ç½®</strong>å·²å®šä½å…ƒç´ ï¼Œä½¿å…¶å›å½’æ ‡å‡†æµã€‚</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">// ç¤ºä¾‹ï¼š3 ç§’åå–æ¶ˆå®šä½
<span class="hljs-attr">oParent.style.position</span> = <span class="hljs-string">'static'</span><span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-7">æ€»ç»“å¯¹æ¯”</h3>









































<table><thead><tr><th>å®šä½ç±»å‹</th><th>æ˜¯å¦è„±ç¦»æ–‡æ¡£æµ</th><th>å®šä½å‚è€ƒç‚¹</th><th>å…¸å‹ç”¨é€”</th></tr></thead><tbody><tr><td>static</td><td>å¦</td><td>æ— ï¼ˆå¿½ç•¥åç§»å±æ€§ï¼‰</td><td>é»˜è®¤å¸ƒå±€</td></tr><tr><td>relative</td><td>å¦</td><td>è‡ªèº«åŸå§‹ä½ç½®</td><td>å¾®è°ƒã€ä½œä¸º absolute å®¹å™¨</td></tr><tr><td>absolute</td><td>æ˜¯</td><td>æœ€è¿‘é static ç¥–å…ˆæˆ– body</td><td>å¼¹å±‚ã€ç²¾å‡†å®šä½</td></tr><tr><td>fixed</td><td>æ˜¯</td><td>æµè§ˆå™¨è§†å£</td><td>å›ºå®šå¯¼èˆªã€æ‚¬æµ®æŒ‰é’®</td></tr><tr><td>sticky</td><td>å¦ï¼ˆè§†è§‰ä¸Šå›ºå®šï¼‰</td><td>æ»šåŠ¨é˜ˆå€¼è§¦å‘ fixed è¡Œä¸º</td><td>è¡¨å¤´ã€ä¾§è¾¹æ å¸é™„</td></tr></tbody></table>
<p>æŒæ¡è¿™äº›å®šä½æœºåˆ¶ï¼Œèƒ½æ›´çµæ´»åœ°å®ç°å¤æ‚é¡µé¢å¸ƒå±€ã€‚</p>
<hr/>
<p>æœ¬æ–‡åŸºäºå®é™…ä»£ç ç¤ºä¾‹ä¸è§„èŒƒæ€»ç»“ï¼Œé€‚ç”¨äºå‰ç«¯å¼€å‘è€…ç³»ç»Ÿç†è§£ CSS å®šä½æ¨¡å‹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€å‰ç«¯æ•ˆç‡å·¥å…·ã€‘å†ä¹Ÿä¸ç”¨ APIfox è”è°ƒï¼é›¶ä¾µå…¥ Mockï¼Œå…¨ç¨‹ä¸æ”¹ä»£ç ã€ä¸å¼€ä»£ç†]]></title>    <link>https://juejin.cn/post/7570984257666056238</link>    <guid>https://juejin.cn/post/7570984257666056238</guid>    <pubDate>2025-11-11T00:15:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570984257666056238" data-draft-id="7569813790533730323" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€å‰ç«¯æ•ˆç‡å·¥å…·ã€‘å†ä¹Ÿä¸ç”¨ APIfox è”è°ƒï¼é›¶ä¾µå…¥ Mockï¼Œå…¨ç¨‹ä¸æ”¹ä»£ç ã€ä¸å¼€ä»£ç†"/> <meta itemprop="keywords" content="å‰ç«¯,æµè§ˆå™¨,JavaScript"/> <meta itemprop="datePublished" content="2025-11-11T00:15:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸ä¸€æ ·çš„å°‘å¹´_"/> <meta itemprop="url" content="https://juejin.cn/user/3035079961218551"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€å‰ç«¯æ•ˆç‡å·¥å…·ã€‘å†ä¹Ÿä¸ç”¨ APIfox è”è°ƒï¼é›¶ä¾µå…¥ Mockï¼Œå…¨ç¨‹ä¸æ”¹ä»£ç ã€ä¸å¼€ä»£ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3035079961218551/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸ä¸€æ ·çš„å°‘å¹´_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-11T00:15:35.000Z" title="Tue Nov 11 2025 00:15:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    561
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä¸Šå‘¨å››ä¸‹åˆï¼Œæˆ‘æ­£åœ¨è°ƒæ ·å¼ï¼Œçªç„¶ç”µè„‘é£æ‰‡å¼€å§‹å’†å“®ã€‚</p>
<p>æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ï¼š<strong>å†…å­˜å ç”¨ 15.5G / 16G</strong>ã€‚</p>
<p>æˆ‘äººå‚»äº†ï¼Œ16G å†…å­˜å¼€å‘ä¸ªå‰ç«¯é¡¹ç›®è¿˜èƒ½å¡ï¼Ÿ</p>
<p>ä»”ç»†ä¸€çœ‹ï¼š</p>
<ul>
<li><strong>VSCode</strong>ï¼š2.1Gï¼ˆè·‘ç€é¡¹ç›®ï¼Œæ­£å¸¸ï¼‰</li>
<li><strong>Chrome 30 ä¸ªæ ‡ç­¾é¡µ</strong>ï¼š4.5Gï¼ˆæ˜é‡‘ã€Stack Overflowã€GitHubã€æ–‡æ¡£...èƒ½ç†è§£ï¼‰</li>
<li><strong>APIfox</strong>ï¼š1.5Gï¼ˆï¼Ÿï¼Ÿï¼Ÿï¼‰</li>
<li><strong>å¾®ä¿¡ + ä¼ä¸šå¾®ä¿¡</strong>ï¼š1.1Gï¼ˆæ²¡åŠæ³•ï¼Œå·¥ä½œè¦ç”¨ï¼‰</li>
<li><strong>å…¶ä»–è‹¥å¹²è¿›ç¨‹â€¦</strong>ï¼š...</li>
</ul>
<p><strong>APIfoxè¿™ä¸€ä¸ªå·¥å…·ï¼Œå äº† 1.5Gï¼Ÿ</strong></p>
<p>å…³é”®æ˜¯ï¼Œæˆ‘åªæ˜¯æƒ³ Mock å‡ ä¸ªæ¥å£è€Œå·²ï¼Œä¸ºä»€ä¹ˆè¦ï¼š</p>
<ul>
<li>è£…ä¸€ä¸ª 500M+ çš„å®¢æˆ·ç«¯</li>
<li>å¼€ä»£ç†ï¼ˆè¿˜å¾—è®°å¾—å…³ï¼‰</li>
<li>æ¥å›åˆ‡çª—å£ï¼ˆæµè§ˆå™¨ â†’ APIfox â†’ VSCodeï¼‰</li>
<li>å ç”¨ 1.5G å†…å­˜</li>
</ul>
<p>æˆ‘è¯•è¿‡å…¶ä»–æ–¹æ¡ˆï¼š</p>
<ul>
<li><strong>åœ¨ä»£ç é‡Œå†™æ­» Mock æ•°æ®</strong> â†’ æœ‰æ—¶å€™å¿˜è®°åˆ æ‰ï¼Œä¸Šçº¿å·®ç‚¹å¸¦ç€å‡æ•°æ®å†²è¿›ç”Ÿäº§</li>
<li><strong>ç”¨ Mock.js</strong> â†’ é…ç½®å¤ªéº»çƒ¦ï¼Œè¿˜è¦æ”¹ä»£ç </li>
</ul>
<p>æˆ‘æƒ³è¦çš„æ˜¯ï¼šä¸è£…å®¢æˆ·ç«¯ã€ä¸æ”¹ä»£ç ã€ä¸å¼€ä»£ç†ã€ä¸è€—å†…å­˜ã€ä¸€é”®åˆ‡æ¢ Mock å¼€å…³
ã€‚
äºæ˜¯ï¼Œæˆ‘èŠ±äº†ä¸€ä¸ªå‘¨æœ«ï¼Œåšäº†ä¸€ä¸ªchromeæµè§ˆå™¨æ’ä»¶ã€‚</p>
<p><strong>ç°åœ¨mockä¸ç”¨ APIfoxï¼Œå†…å­˜å ç”¨é™äº†ä¸å°‘ï¼Œç”µè„‘é¡ºå¤šäº†ï¼Œæµè§ˆå™¨é‡Œä¸€é”® Mockï¼Œè°ƒè¯•åˆå¿«åˆçœå¿ƒã€‚</strong></p>
<p><code>æƒ³çŸ¥é“æ€ä¹ˆå®ç°çš„å—ï¼Ÿæ¥ä¸‹æ¥å°†ä»é›¶å¼€å§‹ï¼Œå’Œä½ ä¸€èµ·å®ç°è¿™ä¸ªmockå°å·¥å…·</code></p>
</blockquote>
<h2 data-id="heading-0">æ•ˆæœæ¼”ç¤º:  ä¸‹é¢æ˜¯æ’ä»¶åœ¨æ‹¦æˆª fetch/ajax è¯·æ±‚å¹¶è¿”å› Mock æ•°æ®æ—¶çš„æ¼”ç¤ºï¼š</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ff5b4c2ddc4432491f849c8b01888f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763464720&amp;x-signature=wzZKT%2FF3yr%2BhMdnIWqGdjhWWT7Y%3D" alt="mockæ’ä»¶æ•ˆæœ.gif" loading="lazy"/></p>
<h2 data-id="heading-1">æ’ä»¶åŠŸèƒ½é¢„è§ˆ</h2>
<ul>
<li>æ‹¦æˆªé¡µé¢çš„ <code>fetch</code>ã€<code>ajax</code> è¯·æ±‚</li>
<li>è§„åˆ™æ”¯æŒæ¨¡ç³ŠåŒ¹é…å’Œå®Œå…¨åŒ¹é…</li>
<li>æ”¯æŒæŒ‰ HTTP æ–¹æ³•è¿‡æ»¤ï¼ˆGET/POST/PUT/DELETEï¼‰</li>
<li>è‡ªå®šä¹‰è¿”å› JSON æ•°æ®</li>
<li><code>æŒç»­ä¼˜åŒ–ä¸­ï¼šæ€§èƒ½ã€åŒ¹é…è§„åˆ™å’Œç”¨æˆ·ä½“éªŒä¼šä¸æ–­è¿­ä»£ï¼Œæ¬¢è¿åé¦ˆä¸å»ºè®®</code></li>
</ul>
<h2 data-id="heading-2">æ ¹æœ¬åŸç†ï¼šåŠ«æŒæµè§ˆå™¨çš„ç½‘ç»œè¯·æ±‚æ–¹æ³•</h2>
<h3 data-id="heading-3">ä¸€å¥è¯æ€»ç»“</h3>
<p><strong>åœ¨ç½‘é¡µåŠ è½½å‰ï¼Œå·å·æ›¿æ¢æ‰æµè§ˆå™¨åŸç”Ÿçš„</strong> <strong><code>fetch</code></strong> <strong>å’Œ</strong> <strong><code>XMLHttpRequest</code></strong> <strong>ï¼Œè®©æ‰€æœ‰ç½‘ç»œè¯·æ±‚å…ˆç»è¿‡æˆ‘ä»¬çš„"æ£€æŸ¥ç«™"ï¼Œç¬¦åˆè§„åˆ™çš„å°±è¿”å›å‡æ•°æ®ï¼Œä¸ç¬¦åˆçš„å°±æ”¾è¡Œã€‚</strong></p>
<h3 data-id="heading-4">åŸç†:</h3>
<pre><code class="hljs language-sql" lang="sql">æ­£å¸¸æƒ…å†µï¼š
ç½‘é¡µä»£ç  â†’ <span class="hljs-keyword">fetch</span>(<span class="hljs-string">'/api/user'</span>) â†’ æµè§ˆå™¨å‘é€çœŸå®è¯·æ±‚ â†’ æœåŠ¡å™¨

æ’ä»¶ä»‹å…¥åï¼š
ç½‘é¡µä»£ç  â†’ <span class="hljs-keyword">fetch</span>(<span class="hljs-string">'/api/user'</span>) 
           â†“
       æˆ‘ä»¬çš„å‡ <span class="hljs-keyword">fetch</span>ï¼ˆæ£€æŸ¥æ˜¯å¦éœ€è¦ Mockï¼‰
           â†“
    éœ€è¦ Mockï¼Ÿ
    â”œâ”€ æ˜¯ â†’ ç›´æ¥è¿”å›å‡æ•°æ® âœ…
    â””â”€ å¦ â†’ è°ƒç”¨çœŸæ­£çš„ <span class="hljs-keyword">fetch</span> å‘é€è¯·æ±‚ â†’ æœåŠ¡å™¨
</code></pre>
<h3 data-id="heading-5">å…·ä½“å®ç°ï¼ˆç®€åŒ–ç‰ˆï¼‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 1. ä¿å­˜åŸå§‹æ–¹æ³•</span>
<span class="hljs-keyword">const</span> çœŸæ­£çš„fetch = <span class="hljs-variable language_">window</span>.<span class="hljs-property">fetch</span>;

<span class="hljs-comment">// 2. æ›¿æ¢æˆæˆ‘ä»¬çš„æ–¹æ³•</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">fetch</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">url</span>) {
  <span class="hljs-comment">// 3. æ£€æŸ¥æ˜¯å¦éœ€è¦ Mock</span>
  <span class="hljs-keyword">if</span> (url.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'/api/user'</span>)) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‹¦æˆªæˆåŠŸï¼è¿”å›å‡æ•°æ®'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>({
      <span class="hljs-attr">json</span>: <span class="hljs-function">() =&gt;</span> ({ <span class="hljs-attr">name</span>: <span class="hljs-string">'Mock User'</span> })
    });
  }
  
  <span class="hljs-comment">// 4. ä¸éœ€è¦ Mockï¼Œè°ƒç”¨åŸå§‹æ–¹æ³•</span>
  <span class="hljs-keyword">return</span> çœŸæ­£çš„<span class="hljs-title function_">fetch</span>(url);
};
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li>å¿…é¡»å…ˆä¿å­˜åŸå§‹æ–¹æ³•ï¼Œå¦åˆ™æ— æ³•å‘é€çœŸå®è¯·æ±‚</li>
<li>å¿…é¡»åœ¨ç½‘é¡µåŠ è½½å‰æ‰§è¡Œï¼Œå¦åˆ™æ‹¦æˆªä¸åˆ°æ—©æœŸè¯·æ±‚</li>
<li>XMLHttpRequest åŒç†ï¼Œé‡å†™ <code>open</code> å’Œ <code>send</code> æ–¹æ³•</li>
</ul>
<h2 data-id="heading-6">é¡¹ç›®ç»“æ„</h2>
<pre><code class="hljs language-bash" lang="bash">quick-mock/
â”œâ”€â”€ manifest.json      <span class="hljs-comment"># æ’ä»¶é…ç½®æ–‡ä»¶</span>
â”œâ”€â”€ popup.html         <span class="hljs-comment"># å¼¹çª—é¡µé¢</span>
â”œâ”€â”€ popup.css          <span class="hljs-comment"># å¼¹çª—æ ·å¼</span>
â”œâ”€â”€ popup.js           <span class="hljs-comment"># å¼¹çª—é€»è¾‘</span>
â”œâ”€â”€ content.js         <span class="hljs-comment"># å†…å®¹è„šæœ¬ </span>
â””â”€â”€ injected.js        <span class="hljs-comment"># æ³¨å…¥è„šæœ¬ </span>
</code></pre>
<h2 data-id="heading-7">ğŸš€ å¿«é€Ÿå¼€å§‹</h2>
<h3 data-id="heading-8">è·å–ä»£ç </h3>
<ul>
<li><strong>GitHub</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTeernage%2Fquick-mock" target="_blank" title="https://github.com/Teernage/quick-mock" ref="nofollow noopener noreferrer">github.com/Teernage/quâ€¦</a> â­ å¦‚æœå¯¹æ‚¨æœ‰å¸®åŠ©æ¬¢è¿Star</li>
<li><strong>Gitee</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fxuzhenxin110%2Fquick-mock" target="_blank" title="https://gitee.com/xuzhenxin110/quick-mock" ref="nofollow noopener noreferrer">gitee.com/xuzhenxin11â€¦</a></li>
</ul>
<h3 data-id="heading-9">ä¸€é”®å®‰è£…</h3>
<ol>
<li>æ‰“å¼€Chromeæµè§ˆå™¨</li>
<li>åœ°å€æ è¾“å…¥ï¼š<code>chrome://extensions/</code></li>
<li>æ‰“å¼€å³ä¸Šè§’"å¼€å‘è€…æ¨¡å¼"</li>
<li>ç‚¹å‡»"åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº"</li>
<li>é€‰æ‹©quick-mockæ–‡ä»¶å¤¹</li>
<li>æå®šï¼æ‰©å±•å®‰è£…å®Œæˆï¼</li>
</ol>
<h2 data-id="heading-10">æ·±å…¥è§£æï¼šä»é›¶å¼€å§‹ç†è§£æ’ä»¶å®ç°</h2>
<h3 data-id="heading-11">ç•Œé¢å±‚ï¼ˆç”¨æˆ·äº¤äº’ï¼‰</h3>
<h4 data-id="heading-12">1. <strong>popup.html</strong> - æ’ä»¶çš„"è„¸é¢"-   ä½œç”¨ï¼šç”¨æˆ·ç‚¹å‡»æ’ä»¶å›¾æ ‡çœ‹åˆ°çš„å¼¹çª—ç•Œé¢</h4>
<ul>
<li>åŒ…å«ï¼šè¾“å…¥æ¡†ã€æŒ‰é’®ã€è§„åˆ™åˆ—è¡¨</li>
</ul>
<blockquote>
<p>ğŸ”— <strong>æ–‡ä»¶æºç é“¾æ¥</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTeernage%2Fquick-mock%2Fblob%2Fmain%2Fpopup.html" target="_blank" title="https://github.com/Teernage/quick-mock/blob/main/popup.html" ref="nofollow noopener noreferrer"><code>GitHub</code></a>ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTeernage%2Fquick-mock%2Fblob%2Fmain%2Fpopup.html" target="_blank" title="https://github.com/Teernage/quick-mock/blob/main/popup.html" ref="nofollow noopener noreferrer">github.com/Teernage/quâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fxuzhenxin110%2Fquick-mock%2Fblob%2Fmain%2Fpopup.html" target="_blank" title="https://gitee.com/xuzhenxin110/quick-mock/blob/main/popup.html" ref="nofollow noopener noreferrer"><code>Gitee</code></a>ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fxuzhenxin110%2Fquick-mock%2Fblob%2Fmain%2Fpopup.html" target="_blank" title="https://gitee.com/xuzhenxin110/quick-mock/blob/main/popup.html" ref="nofollow noopener noreferrer">gitee.com/xuzhenxin11â€¦</a></li>
</ul>
</blockquote>
<h4 data-id="heading-13">2. <strong>popup.css</strong> - ç•Œé¢æ ·å¼</h4>
<blockquote>
<p>ğŸ”— <strong>æ–‡ä»¶æºç é“¾æ¥</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTeernage%2Fquick-mock%2Fblob%2Fmain%2Fpopup.css" target="_blank" title="https://github.com/Teernage/quick-mock/blob/main/popup.css" ref="nofollow noopener noreferrer"><code>GitHub</code></a>ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTeernage%2Fquick-mock%2Fblob%2Fmain%2Fpopup.css" target="_blank" title="https://github.com/Teernage/quick-mock/blob/main/popup.css" ref="nofollow noopener noreferrer">github.com/Teernage/quâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fxuzhenxin110%2Fquick-mock%2Fblob%2Fmain%2Fpopup.css" target="_blank" title="https://gitee.com/xuzhenxin110/quick-mock/blob/main/popup.css" ref="nofollow noopener noreferrer"><code>Gitee</code></a>ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fxuzhenxin110%2Fquick-mock%2Fblob%2Fmain%2Fpopup.css" target="_blank" title="https://gitee.com/xuzhenxin110/quick-mock/blob/main/popup.css" ref="nofollow noopener noreferrer">gitee.com/xuzhenxin11â€¦</a></li>
</ul>
</blockquote>
<h4 data-id="heading-14">3. <strong>popup.js</strong> - ç•Œé¢é€»è¾‘</h4>
<p>ä½œç”¨ï¼šå¤„ç†ç”¨æˆ·é…ç½®mockæ“ä½œ</p>
<p>åŠŸèƒ½ï¼š</p>
<ul>
<li>ç‚¹å‡»"æ·»åŠ è§„åˆ™" â†’ ä¿å­˜åˆ° chrome.storage</li>
<li>ç‚¹å‡»"åˆ é™¤" â†’ ä» chrome.storage ç§»é™¤</li>
<li>æ¸²æŸ“è§„åˆ™åˆ—è¡¨</li>
</ul>
<blockquote>
<p>ğŸ”— <strong>æ–‡ä»¶æºç é“¾æ¥</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTeernage%2Fquick-mock%2Fblob%2Fmain%2Fpopup.js" target="_blank" title="https://github.com/Teernage/quick-mock/blob/main/popup.js" ref="nofollow noopener noreferrer"><code>GitHub</code></a>ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTeernage%2Fquick-mock%2Fblob%2Fmain%2Fpopup.js" target="_blank" title="https://github.com/Teernage/quick-mock/blob/main/popup.js" ref="nofollow noopener noreferrer">github.com/Teernage/quâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fxuzhenxin110%2Fquick-mock%2Fblob%2Fmain%2Fpopup.js" target="_blank" title="https://gitee.com/xuzhenxin110/quick-mock/blob/main/popup.js" ref="nofollow noopener noreferrer"><code>Gitee</code></a>ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fxuzhenxin110%2Fquick-mock%2Fblob%2Fmain%2Fpopup.js" target="_blank" title="https://gitee.com/xuzhenxin110/quick-mock/blob/main/popup.js" ref="nofollow noopener noreferrer">gitee.com/xuzhenxin11â€¦</a></li>
</ul>
</blockquote>
<h3 data-id="heading-15">æ ¸å¿ƒå±‚ï¼ˆæ‹¦æˆªé€»è¾‘ï¼‰</h3>
<h4 data-id="heading-16">4. <strong>content.js</strong> - "ä¸­é—´äºº"</h4>
<p>ä½œç”¨ï¼šè¿æ¥æ’ä»¶å’Œç½‘é¡µçš„æ¡¥æ¢</p>
<p>èƒ½åŠ›ï¼š</p>
<ul>
<li>å¯ä»¥è®¿é—® Chrome APIï¼ˆè¯»å– chrome.storageï¼‰</li>
<li>å¯ä»¥è®¿é—®ç½‘é¡µ DOM</li>
<li>ä¸èƒ½è®¿é—®ç½‘é¡µçš„ JavaScript ç¯å¢ƒï¼ˆwindow.fetchï¼‰</li>
</ul>
<p>èŒè´£ï¼š</p>
<ol>
<li>æŠŠ injected.js æ³¨å…¥åˆ°ç½‘é¡µ</li>
<li>è¯»å–ç”¨æˆ·é…ç½®çš„ Mock è§„åˆ™</li>
<li>é€šè¿‡ postMessage ä¸ injected.js é€šä¿¡</li>
</ol>
<blockquote>
<p>ğŸ”— <strong>æ–‡ä»¶æºç é“¾æ¥</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTeernage%2Fquick-mock%2Fblob%2Fmain%2Fcontent.js" target="_blank" title="https://github.com/Teernage/quick-mock/blob/main/content.js" ref="nofollow noopener noreferrer"><code>GitHub</code></a>ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTeernage%2Fquick-mock%2Fblob%2Fmain%2Fcontent.js" target="_blank" title="https://github.com/Teernage/quick-mock/blob/main/content.js" ref="nofollow noopener noreferrer">github.com/Teernage/quâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fxuzhenxin110%2Fquick-mock%2Fblob%2Fmain%2Fcontent.js" target="_blank" title="https://gitee.com/xuzhenxin110/quick-mock/blob/main/content.js" ref="nofollow noopener noreferrer"><code>Gitee</code></a>ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fxuzhenxin110%2Fquick-mock%2Fblob%2Fmain%2Fcontent.js" target="_blank" title="https://gitee.com/xuzhenxin110/quick-mock/blob/main/content.js" ref="nofollow noopener noreferrer">gitee.com/xuzhenxin11â€¦</a></li>
</ul>
</blockquote>
<h4 data-id="heading-17">5. <strong>injected.js</strong> - "åŠ«åŒª"</h4>
<p>ä½œç”¨ï¼šçœŸæ­£æ‰§è¡Œæ‹¦æˆªçš„ä»£ç </p>
<p>èƒ½åŠ›ï¼š</p>
<ul>
<li>
<p><code>å¯ä»¥</code>è®¿é—®ç½‘é¡µçš„ JavaScript ç¯å¢ƒï¼ˆwindow.fetchï¼‰</p>
</li>
<li>
<p><code>å¯ä»¥</code>é‡å†™ fetch å’Œ XMLHttpRequest</p>
</li>
<li>
<p><code>ä¸èƒ½</code>è®¿é—® Chrome APIï¼ˆchrome.storageï¼‰</p>
</li>
</ul>
<p>èŒè´£ï¼š</p>
<ol>
<li>é‡å†™ window.fetch</li>
<li>é‡å†™ XMLHttpRequest.prototype.open/send</li>
<li>æ‹¦æˆªè¯·æ±‚ï¼Œè¯¢é—® content.js æ˜¯å¦éœ€è¦ Mock</li>
<li>æ ¹æ®å›å¤å†³å®šè¿”å›å‡æ•°æ®è¿˜æ˜¯çœŸå®è¯·æ±‚</li>
</ol>
<blockquote>
<p>ğŸ”— <strong>æ–‡ä»¶æºç é“¾æ¥</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTeernage%2Fquick-mock%2Fblob%2Fmain%2Finjected.js" target="_blank" title="https://github.com/Teernage/quick-mock/blob/main/injected.js" ref="nofollow noopener noreferrer"><code>GitHub</code></a>ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTeernage%2Fquick-mock%2Fblob%2Fmain%2Finjected.js" target="_blank" title="https://github.com/Teernage/quick-mock/blob/main/injected.js" ref="nofollow noopener noreferrer">github.com/Teernage/quâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fxuzhenxin110%2Fquick-mock%2Fblob%2Fmain%2Finjected.js" target="_blank" title="https://gitee.com/xuzhenxin110/quick-mock/blob/main/injected.js" ref="nofollow noopener noreferrer"><code>Gitee</code></a>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fxuzhenxin110%2Fquick-mock%2Fblob%2Fmain%2Finjected.js" target="_blank" title="https://gitee.com/xuzhenxin110/quick-mock/blob/main/injected.js" ref="nofollow noopener noreferrer">gitee.com/xuzhenxin11â€¦</a></li>
</ul>
</blockquote>
<h3 data-id="heading-18">é…ç½®å±‚</h3>
<h4 data-id="heading-19">6. <strong>manifest.json</strong> - æ’ä»¶çš„"èº«ä»½è¯"</h4>
<blockquote>
<p>ğŸ”— <strong>æ–‡ä»¶æºç é“¾æ¥</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTeernage%2Fquick-mock%2Fblob%2Fmain%2Fmanifest.json" target="_blank" title="https://github.com/Teernage/quick-mock/blob/main/manifest.json" ref="nofollow noopener noreferrer"><code>GitHub</code></a>ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTeernage%2Fquick-mock%2Fblob%2Fmain%2Fmanifest.json" target="_blank" title="https://github.com/Teernage/quick-mock/blob/main/manifest.json" ref="nofollow noopener noreferrer">github.com/Teernage/quâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fxuzhenxin110%2Fquick-mock%2Fblob%2Fmain%2Fmanifest.json" target="_blank" title="https://gitee.com/xuzhenxin110/quick-mock/blob/main/manifest.json" ref="nofollow noopener noreferrer"><code>Gitee</code></a>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fxuzhenxin110%2Fquick-mock%2Fblob%2Fmain%2Fmanifest.json" target="_blank" title="https://gitee.com/xuzhenxin110/quick-mock/blob/main/manifest.json" ref="nofollow noopener noreferrer">gitee.com/xuzhenxin11â€¦</a></li>
</ul>
</blockquote>
<h3 data-id="heading-20">å®‰è£…æ‰©å±•</h3>
<ol>
<li>æ‰“å¼€Chromeæµè§ˆå™¨</li>
<li>åœ°å€æ è¾“å…¥ï¼š<code>chrome://extensions/</code></li>
<li>æ‰“å¼€å³ä¸Šè§’"å¼€å‘è€…æ¨¡å¼"</li>
<li>ç‚¹å‡»"åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº"</li>
<li>é€‰æ‹©quick-mockæ–‡ä»¶å¤¹</li>
<li>æå®šï¼æ‰©å±•å®‰è£…å®Œæˆï¼</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3757cfb50c944109f1055b036e06ff1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763464720&amp;x-signature=uW3CXo9%2FrVeDtaOahw08A7Ah9jU%3D" alt="å®‰è£…mockæ’ä»¶.gif" loading="lazy"/></p>
<h2 data-id="heading-21">æ–‡ä»¶åä½œæµç¨‹ï¼ˆå®Œæ•´é“¾è·¯ï¼‰</h2>
<h3 data-id="heading-22">ç¬¬ä¸€é˜¶æ®µï¼šç”¨æˆ·é…ç½®è§„åˆ™</h3>
<pre><code class="hljs language-c" lang="c">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·æ“ä½œ    â”‚ åœ¨ popup.html è¾“å…¥ Mock è§„åˆ™
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  popup.js   â”‚ ç‚¹å‡»<span class="hljs-string">"æ·»åŠ "</span>æŒ‰é’®
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ chrome.storage.local.<span class="hljs-built_in">set</span>({ mockRules: [...] })
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Chrome Storageâ”‚ æŒä¹…åŒ–å­˜å‚¨è§„åˆ™ï¼ˆå…³é—­æµè§ˆå™¨ä¹Ÿä¸ä¸¢å¤±ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-23">ç¬¬äºŒé˜¶æ®µï¼šé¡µé¢åŠ è½½æ—¶æ³¨å…¥è„šæœ¬</h3>
<pre><code class="hljs language-ini" lang="ini">ç”¨æˆ·æ‰“å¼€ç½‘é¡µï¼ˆå¦‚ https://example.comï¼‰
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚manifest.jsonâ”‚ æ£€æµ‹åˆ°åŒ¹é…çš„ URL
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ è‡ªåŠ¨æ³¨å…¥
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ content.js  â”‚ åœ¨ç½‘é¡µä¸Šä¸‹æ–‡è¿è¡Œï¼ˆä½†åœ¨éš”ç¦»æ²™ç®±ï¼‰
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ åˆ›å»º &lt;script&gt; æ ‡ç­¾
       â”‚ <span class="hljs-attr">script.src</span> = chrome.runtime.getURL(<span class="hljs-string">'injected.js'</span>)
       â”‚ document.head.appendChild(script)
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ injected.js â”‚ åœ¨ç½‘é¡µçœŸå®ç¯å¢ƒè¿è¡Œ
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ <span class="hljs-attr">window.fetch</span> = æˆ‘ä»¬çš„å‡fetch<span class="hljs-comment">;</span>
       â†“
    æ‹¦æˆªå°±ç»ªï¼
</code></pre>
<h3 data-id="heading-24">ç¬¬ä¸‰é˜¶æ®µï¼šæ‹¦æˆªè¯·æ±‚ï¼ˆå®æ—¶é€šä¿¡ï¼‰</h3>
<pre><code class="hljs language-php" lang="php">ç½‘é¡µä»£ç æ‰§è¡Œï¼š<span class="hljs-title function_ invoke__">fetch</span>(<span class="hljs-string">'/api/user'</span>)
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ injected.js         
â”‚ æˆ‘ä»¬çš„å‡ fetch è¢«è°ƒç”¨ 
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ window.<span class="hljs-title function_ invoke__">postMessage</span>({
       â”‚   <span class="hljs-attr">type</span>: <span class="hljs-string">'MOCK_REQUEST'</span>,
       â”‚   <span class="hljs-attr">url</span>: <span class="hljs-string">'/api/user'</span>,
       â”‚   <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>
       â”‚ })
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ content.js          â”‚ ç›‘å¬ message äº‹ä»¶
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ <span class="hljs-number">1</span>. è¯»å– chrome.storage.local
       â”‚ <span class="hljs-number">2</span>. éå†è§„åˆ™ï¼Œæ£€æŸ¥æ˜¯å¦åŒ¹é…
       â”‚ <span class="hljs-number">3</span>. æ‰¾åˆ°åŒ¹é…è§„åˆ™
       â†“
       â”‚ window.<span class="hljs-title function_ invoke__">postMessage</span>({
       â”‚   <span class="hljs-attr">type</span>: <span class="hljs-string">'MOCK_RESPONSE'</span>,
       â”‚   <span class="hljs-attr">shouldMock</span>: <span class="hljs-literal">true</span>,
       â”‚   <span class="hljs-attr">mockData</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">'Mock User'</span> }
       â”‚ })
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ injected.js         â”‚ æ”¶åˆ°å›å¤
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ <span class="hljs-keyword">if</span> (shouldMock) {
       â”‚   <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(JSON.<span class="hljs-title function_ invoke__">stringify</span>(mockData));
       â”‚ } <span class="hljs-keyword">else</span> {
       â”‚   <span class="hljs-keyword">return</span> çœŸ<span class="hljs-title function_ invoke__">fetch</span>(url); <span class="hljs-comment">// è°ƒç”¨åŸå§‹æ–¹æ³•</span>
       â”‚ }
       â†“
ç½‘é¡µä»£ç æ”¶åˆ°å“åº”ï¼š{ name: <span class="hljs-string">'Mock User'</span> }
</code></pre>
<h2 data-id="heading-25">ä¸ºä»€ä¹ˆè¦åˆ† content.js å’Œ injected.jsï¼Ÿ</h2>
<h3 data-id="heading-26">åªç”¨ Content Script è¡Œä¸è¡Œï¼Ÿ</h3>
<p><strong>ä¸è¡Œï¼</strong> å› ä¸º Content Script è¿è¡Œåœ¨éš”ç¦»çš„æ²™ç®±ä¸­ï¼Œæ— æ³•è®¿é—®ç½‘é¡µçš„ <code>window.fetch</code>ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// content.js ä¸­è¿™æ ·åšæ˜¯æ— æ•ˆçš„ï¼</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">fetch</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) { 
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‹¦æˆªå¤±è´¥ï¼'</span>); <span class="hljs-comment">// ç½‘é¡µçœ‹ä¸åˆ°è¿™ä¸ªä¿®æ”¹</span>
}
</code></pre>
<h3 data-id="heading-27">åªç”¨ Injected Script è¡Œä¸è¡Œï¼Ÿ</h3>
<p><strong>ä¸è¡Œï¼</strong> å› ä¸º Injected Script æ— æ³•è®¿é—® <code>chrome.storage</code> ç­‰ Chrome APIï¼Œæ— æ³•è¯»å–ç”¨æˆ·é…ç½®çš„ Mock è§„åˆ™ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">### æ­£ç¡®æ–¹æ¡ˆï¼šä¸¤è€…é…åˆ

ç”¨æˆ·é…ç½® Mock è§„åˆ™
â†“
å­˜å‚¨åˆ° chrome<span class="hljs-selector-class">.storage</span> (Popup)
â†“
è¯»å–è§„åˆ™ (Content Script) â† å¯ä»¥è®¿é—® Chrome API
â†“
é€šè¿‡ postMessage é€šä¿¡
â†“
æ‹¦æˆª fetch (Injected Script) â† å¯ä»¥ä¿®æ”¹ window<span class="hljs-selector-class">.fetch</span>
</code></pre>
<h3 data-id="heading-28">é€šä¿—æ¯”å–»</h3>
<pre><code class="hljs language-markdown" lang="markdown">content.js = é“¶è¡Œé‡‘åº“ç®¡ç†å‘˜
<span class="hljs-bullet">  -</span> æœ‰é’¥åŒ™ï¼ˆChrome API æƒé™ï¼‰
<span class="hljs-bullet">  -</span> èƒ½è¯»å–ä¿é™©ç®±ï¼ˆchrome.storageï¼‰
<span class="hljs-bullet">  -</span> ä½†ä¸èƒ½ç›´æ¥æ¥è§¦å®¢æˆ·ï¼ˆç½‘é¡µ JavaScriptï¼‰

injected.js = é“¶è¡Œå¤§å ‚ç»ç†
<span class="hljs-bullet">  -</span> ç›´æ¥é¢å¯¹å®¢æˆ·ï¼ˆç½‘é¡µä»£ç ï¼‰
<span class="hljs-bullet">  -</span> èƒ½æ‹¦æˆªå®¢æˆ·è¯·æ±‚ï¼ˆé‡å†™ fetchï¼‰
<span class="hljs-bullet">  -</span> ä½†æ²¡æœ‰é‡‘åº“é’¥åŒ™ï¼ˆæ— æ³•è®¿é—® chrome.storageï¼‰

è§£å†³æ–¹æ¡ˆï¼šä¸¤äººç”¨å¯¹è®²æœºï¼ˆpostMessageï¼‰é€šä¿¡
  å®¢æˆ·å‘èµ·è¯·æ±‚ â†’ å¤§å ‚ç»ç†æ‹¦æˆª â†’ å¯¹è®²æœºé—®ç®¡ç†å‘˜"è¦ä¸è¦æ”¾è¡Œ"
  â†’ ç®¡ç†å‘˜æŸ¥ä¿é™©ç®± â†’ å›å¤"ä¸æ”¾è¡Œï¼Œç»™å‡é’" â†’ å¤§å ‚ç»ç†è¿”å›å‡é’
</code></pre>
<h2 data-id="heading-29">å…³é”®æŠ€æœ¯ç‚¹æ€»ç»“</h2>
<h3 data-id="heading-30">1. <strong>ä¸ºä»€ä¹ˆè¦ç”¨</strong> <strong><code>run_at: "document_start"</code></strong> <strong>ï¼Ÿ</strong></h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// manifest.json</span>
<span class="hljs-attr">"run_at"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"document_start"</span>  <span class="hljs-comment">// åœ¨ HTML è§£æå‰è¿è¡Œ</span>
</code></pre>
<p><strong>åŸå› ï¼š</strong> å¦‚æœç½‘é¡µåœ¨æ’ä»¶åŠ è½½å‰å°±æ‰§è¡Œäº† <code>fetch('/api/data')</code>ï¼Œæˆ‘ä»¬å°±æ‹¦æˆªä¸åˆ°äº†ã€‚</p>
<h3 data-id="heading-31">2. <strong>ä¸ºä»€ä¹ˆè¦ç”¨</strong> <strong><code>web_accessible_resources</code></strong> <strong>ï¼Ÿ</strong></h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// manifest.json</span>
<span class="hljs-attr">"web_accessible_resources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"resources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"injected.js"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"matches"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"&lt;all_urls&gt;"</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
</code></pre>
<p><strong>åŸå› ï¼š</strong> é»˜è®¤æƒ…å†µä¸‹ï¼Œç½‘é¡µæ— æ³•åŠ è½½æ’ä»¶å†…éƒ¨çš„æ–‡ä»¶ï¼ˆè·¨åŸŸé™åˆ¶ï¼‰ã€‚è¿™ä¸ªé…ç½®ç›¸å½“äºç»™ <code>injected.js</code> å¼€äº†"ç»¿è‰²é€šé“"ã€‚</p>
<h3 data-id="heading-32">3. <strong>ä¸ºä»€ä¹ˆç”¨</strong> <strong><code>postMessage</code></strong> <strong>è€Œä¸æ˜¯å…¨å±€å˜é‡ï¼Ÿ</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é”™è¯¯åšæ³•</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">mockRules</span> = [...];  <span class="hljs-comment">// content.js è®¾ç½®</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">mockRules</span>);  <span class="hljs-comment">// injected.js è¯»å–ï¼ˆè¯»ä¸åˆ°ï¼ï¼‰</span>

<span class="hljs-comment">// âœ… æ­£ç¡®åšæ³•</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'MOCK_REQUEST'</span> }, <span class="hljs-string">'*'</span>);  <span class="hljs-comment">// injected.js å‘é€</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> { ... });  <span class="hljs-comment">// content.js æ¥æ”¶</span>
</code></pre>
<p><strong>åŸå› ï¼š</strong> content.js å’Œ injected.js è™½ç„¶åœ¨åŒä¸€ä¸ªç½‘é¡µï¼Œä½† JavaScript ç¯å¢ƒæ˜¯éš”ç¦»çš„ï¼Œå°±åƒä¸¤ä¸ªå¹³è¡Œä¸–ç•Œï¼Œåªèƒ½é€šè¿‡ <code>postMessage</code> è¿™ä¸ª"ä¼ é€é—¨"é€šä¿¡ã€‚</p>
<h3 data-id="heading-33">4. <strong>ä¸ºä»€ä¹ˆè¦ä¿å­˜åŸå§‹ fetchã€xhrï¼Ÿ</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> originalFetch = <span class="hljs-variable language_">window</span>.<span class="hljs-property">fetch</span>;  <span class="hljs-comment">//  å¿…é¡»å…ˆä¿å­˜</span>

<span class="hljs-variable language_">window</span>.<span class="hljs-property">fetch</span> = <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">url</span>) {
  <span class="hljs-keyword">if</span> (needMock) {
    <span class="hljs-keyword">return</span> mockResponse;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">originalFetch</span>(url);  <span class="hljs-comment">//  ä¸ Mock æ—¶è°ƒç”¨åŸå§‹æ–¹æ³•</span>
};
</code></pre>
<p><strong>åŸå› ï¼š</strong> å¦‚æœä¸ä¿å­˜ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½ä¼šè¢«æ‹¦æˆªï¼Œæ— æ³•å‘é€çœŸå®è¯·æ±‚ã€‚</p>
<h2 data-id="heading-34">æ€»ç»“</h2>
<h3 data-id="heading-35">æ ¸å¿ƒè¦ç‚¹</h3>
<ol>
<li><strong>æ ¹æœ¬åŸç†</strong>ï¼šé‡å†™ <code>window.fetch</code> å’Œ <code>XMLHttpRequest</code>ï¼Œåœ¨ç½‘é¡µä»£ç æ‰§è¡Œå‰åŠ«æŒè¯·æ±‚</li>
<li><strong>ä¸ºä»€ä¹ˆåˆ†ä¸¤ä¸ªè„šæœ¬</strong>ï¼šcontent.js èƒ½è¯»æ’ä»¶é…ç½®ï¼Œinjected.js èƒ½æ‹¦æˆªè¯·æ±‚</li>
<li><strong>æ€ä¹ˆé€šä¿¡</strong>ï¼š<code>postMessage</code>ï¼ˆå”¯ä¸€æ–¹å¼ï¼‰</li>
<li><strong>ä»€ä¹ˆæ—¶å€™æ³¨å…¥</strong>ï¼š<code>document_start</code>ï¼ˆè¶Šæ—©è¶Šå¥½ï¼‰</li>
<li><strong>ä¸ºä»€ä¹ˆèƒ½æ‹¦æˆª</strong>ï¼šåœ¨ç½‘é¡µä»£ç æ‰§è¡Œå‰å°±æ›¿æ¢äº†åŸç”Ÿæ–¹æ³•</li>
</ol>
<h3 data-id="heading-36">é€‚ç”¨åœºæ™¯</h3>
<ul>
<li>å‰ç«¯å¼€å‘æ—¶ï¼Œåç«¯æ¥å£è¿˜æ²¡å¥½</li>
<li>è°ƒè¯•çº¿ä¸Š Bugï¼Œæƒ³ä¸´æ—¶æ”¹è¿”å›æ•°æ®</li>
<li>æ¼”ç¤º Demoï¼Œä¸æƒ³ä¾èµ–çœŸå®æœåŠ¡å™¨</li>
<li>è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œéœ€è¦ç¨³å®šçš„ Mock æ•°æ®</li>
<li>æ¥å£æ–‡æ¡£ä¸å®Œå–„ï¼Œæƒ³è‡ªå·±é€ æ•°æ®æµ‹è¯•</li>
</ul>
<h3 data-id="heading-37">æœ€å</h3>
<p>å¦‚æœè¿™ä¸ªæ’ä»¶å¸®åˆ°äº†ä½ ï¼Œæ¬¢è¿ï¼š</p>
<ul>
<li>å¦‚æœè§‰å¾—å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµ ğŸ‘ æ”¶è— â­ å…³æ³¨ ğŸ”” æ”¯æŒä¸€ä¸‹ï¼</li>
<li>â­ <strong>GitHub Star æ”¯æŒ</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTeernage%2Fquick-mock" target="_blank" title="https://github.com/Teernage/quick-mock" ref="nofollow noopener noreferrer">github.com/Teernage/quâ€¦</a></li>
<li>ğŸ’¬ <strong>è¯„è®ºåŒºèŠèŠä½ çš„ä½¿ç”¨åœºæ™¯</strong></li>
</ul>
<p>è¿™ä¸ªæ’ä»¶ä¼šæŒç»­ä¼˜åŒ–ï¼Œæ”¯æŒæ›´ä¸°å¯Œçš„é…ç½®é¡¹ã€æ›´å¥½çš„äº¤äº’ç­‰</p>
<p><strong>å¦‚æœä½ æœ‰å¥½çš„æƒ³æ³•ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæˆ– GitHub Issue æå‡ºï¼</strong></p>
<blockquote>
<p>å¦‚æœè§‰å¾—å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµ ğŸ‘ æ”¶è— â­ å…³æ³¨ ğŸ”” æ”¯æŒä¸€ä¸‹ï¼</p>
<p><strong>å¾€æœŸå®æˆ˜æ¨èï¼š</strong></p>
<ul>
<li>
<p><a href="https://juejin.cn/post/7549096640340426802" target="_blank" title="https://juejin.cn/post/7549096640340426802">Vue3 åå°åˆ†é¡µå†™è…»äº†ï¼Ÿæˆ‘ç”¨ 1 ä¸ª Hook åˆ æ‰ 90% é‡å¤ä»£ç ï¼ˆé™„æºç ï¼‰</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7511332054941188147" target="_blank" title="https://juejin.cn/post/7511332054941188147">âš¡ ä¸€ä¸ªVueè‡ªå®šä¹‰æŒ‡ä»¤æå®šä¸æ»‘æ‹–æ‹½åˆ—è¡¨ï¼Œå‘Šåˆ«å¤æ‚ç»„ä»¶å°è£…
</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7543806966926802971" target="_blank" title="https://juejin.cn/post/7543806966926802971">ğŸ”¥ è¿™æ‰æ˜¯ Vue é©±åŠ¨çš„ Chrome æ’ä»¶å·¥ç¨‹åŒ–æ­£ç¡®æ‰“å¼€æ–¹å¼</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7566299971643424819" target="_blank" title="https://juejin.cn/post/7566299971643424819">  è€æ¿é—®æˆ‘ï¼šAIçœŸèƒ½ä¸€é”®ç”»å¹¿å·æ—…æ¸¸è·¯çº¿å›¾ï¼Ÿæˆ‘ç”¨ MCP ç°åœºå¼€å›¾</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7559124639323242506" target="_blank" title="https://juejin.cn/post/7559124639323242506">ã€å‰ç«¯æ•ˆç‡å·¥å…·ã€‘ï¼šå‘Šåˆ«å³é”®å¦å­˜ï¼Œä¸åˆ° 50 è¡Œä»£ç ä¸€é”®æ‰¹é‡ä¸‹è½½ç½‘é¡µå›¾ç‰‡</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7561612065707065390" target="_blank" title="https://juejin.cn/post/7561612065707065390"> å¥³æœ‹å‹ç‚¸äº†ï¼šåˆšæ‰“å¼€çš„ç½‘é¡µæ€ä¹ˆåˆæ²¡äº†ï¼Ÿæˆ‘åæ‰‹ç”©å‡ºä¸€é”®æ¢å¤æŒ‰é’®ï¼</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7562859113246343178" target="_blank" title="https://juejin.cn/post/7562859113246343178"> ä½ å®¶å­©å­åˆå·ç©ç½‘é¡µæ¸¸æˆ? è¯•è¯•è¿™ä¸ªé˜²æ²‰è¿·å·¥å…·</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7563830723057647643" target="_blank" title="https://juejin.cn/post/7563830723057647643">  å¥¹è¯´æƒ³è¦æµªæ¼«ï¼Œæˆ‘æŠŠæµè§ˆå™¨é¼ æ ‡æ¢æˆäº†æŸ´çŠ¬ï¼Œç‚¹ä¸€ä¸‹å°±æœ‰çƒŸèŠ±ï¼ˆé™„æºç ï¼‰</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7566677296801071155" target="_blank" title="https://juejin.cn/post/7566677296801071155"> å¥³æœ‹å‹è¢«é“¾æ¥æŠ˜ç£¨ç–¯äº†ï¼Œæˆ‘å†™äº†ä¸ªå·¥å…·ä¸€é”®è§£æ•‘</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7568055953310662707" target="_blank" title="https://juejin.cn/post/7568055953310662707"> ä¸Šç­æ‘¸é±¼çœ‹æ˜é‡‘ï¼Œè€æ¿çªç„¶å‡ºç°åœ¨èº«å...</a></p>
</li>
</ul>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è‚äº†åŠä¸ªæœˆï¼Œæˆ‘ç”¨ Flutter å†™äº†ä¸ªåŠŸèƒ½å¼ºå¤§çš„å›¾ç‰‡ç¼–è¾‘å™¨ï¼Œå‘Šåˆ«image_cropper]]></title>    <link>https://juejin.cn/post/7571067260053585946</link>    <guid>https://juejin.cn/post/7571067260053585946</guid>    <pubDate>2025-11-11T07:40:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571067260053585946" data-draft-id="7571086754880307246" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è‚äº†åŠä¸ªæœˆï¼Œæˆ‘ç”¨ Flutter å†™äº†ä¸ªåŠŸèƒ½å¼ºå¤§çš„å›¾ç‰‡ç¼–è¾‘å™¨ï¼Œå‘Šåˆ«image_cropper"/> <meta itemprop="keywords" content="å‰ç«¯,Android,Flutter"/> <meta itemprop="datePublished" content="2025-11-11T07:40:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ—çš„è·¨ç«¯å¼€å‘æ—¥è®°"/> <meta itemprop="url" content="https://juejin.cn/user/3320949647350765"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è‚äº†åŠä¸ªæœˆï¼Œæˆ‘ç”¨ Flutter å†™äº†ä¸ªåŠŸèƒ½å¼ºå¤§çš„å›¾ç‰‡ç¼–è¾‘å™¨ï¼Œå‘Šåˆ«image_cropper
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3320949647350765/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ—çš„è·¨ç«¯å¼€å‘æ—¥è®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-11T07:40:58.000Z" title="Tue Nov 11 2025 07:40:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    132
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="github">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦å›¾ç‰‡ç¼–è¾‘ï¼Ÿ</h2>
<p>åœ¨å¦‚ä»Šçš„åº”ç”¨å¼€å‘ä¸­ï¼Œå›¾ç‰‡å¤„ç†å‡ ä¹æ˜¯ç¤¾äº¤ã€ç”µå•†ã€å·¥å…·ç±» App çš„æ ‡é…åŠŸèƒ½ã€‚ç”¨æˆ·ä¸Šä¼ å¤´åƒéœ€è¦è£å‰ªï¼Œåˆ†äº«ç¾å›¾éœ€è¦ç¼–è¾‘ï¼Œæ·»åŠ æ°´å°éœ€è¦æ–‡å­—åŠŸèƒ½ï¼Œä¸º App æ·»åŠ ä¸€ä¸ªå¤´åƒä¸Šä¼ åŠŸèƒ½ç­‰ç­‰...è¿™äº›å¬èµ·æ¥åƒæ˜¯ä¸€ä¸ªå†æ™®é€šä¸è¿‡çš„éœ€æ±‚ã€‚äº§å“ç»ç†çš„è¦æ±‚ä¹Ÿå¾ˆç®€å•ï¼šâ€œç”¨æˆ·é€‰å®Œå›¾ç‰‡ï¼Œèƒ½æŠŠå®ƒè£æˆ 1:1 çš„æ­£æ–¹å½¢å°±è¡Œã€‚â€</p>
<p>äºæ˜¯ï¼Œæˆ‘åƒå¾€å¸¸ä¸€æ ·æ‰“å¼€Â <code>pub.dev</code>ï¼Œå¾ˆå¿«å°±æ‰¾åˆ°Â <code>image_cropper</code>ã€‚çœ‹èµ·æ¥å®Œç¾ï¼Œå¯¹å§ï¼Ÿ</p>
<p><strong>ç„¶è€Œï¼Œç°å®å¾ˆå¿«å°±ç»™äº†æˆ‘ä¸€è®°é‡æ‹³ã€‚</strong></p>
<p>å½“æˆ‘æŠŠè¿™ä¸ªåŠŸèƒ½é›†æˆè¿›æˆ‘è·¨å¹³å°çš„ Flutter åº”ç”¨åï¼Œä¸€è¿ä¸²çš„é—®é¢˜æµ®å‡ºæ°´é¢ï¼š</p>
<ol>
<li><strong>UI/UX çš„å·¨å¤§é¸¿æ²Ÿ</strong>ï¼š<code>image_cropper</code>Â çš„æ ¸å¿ƒæ˜¯<strong>é€šè¿‡ <code>MethodChannel</code> è°ƒç”¨åŸç”Ÿæ’ä»¶</strong>ã€‚è¿™ç›´æ¥å¯¼è‡´äº† Android å’Œ iOS ä¸¤ç«¯çš„è£å‰ªç•Œé¢ï¼ˆUIï¼‰å’Œäº¤äº’ä½“éªŒï¼ˆUXï¼‰å­˜åœ¨å·¨å¤§å·®å¼‚ã€‚å¯¹äºæˆ‘è¿™æ ·è¿½æ±‚å“ç‰Œä¸€è‡´æ€§å’Œç»Ÿä¸€ç”¨æˆ·ä½“éªŒçš„å›¢é˜Ÿæ¥è¯´ï¼Œè¿™å‡ ä¹æ˜¯ä¸å¯æ¥å—çš„ã€‚</li>
<li><strong>æ¡Œé¢ç«¯çš„ç¼ºå¤±</strong>ï¼šæˆ‘çš„åº”ç”¨éœ€è¦æ”¯æŒ Windows å’Œ Macï¼Œè€ŒÂ <code>image_cropper</code>Â åœ¨æ¡Œé¢ç«¯çš„æ”¯æŒå¹¶ä¸ç†æƒ³ï¼Œè¿™ç›´æ¥å µæ­»äº†æˆ‘çš„å…¨å¹³å°ä¹‹è·¯ã€‚</li>
<li><strong>æ‰©å±•æ€§çš„æ·é”</strong>ï¼šäº§å“ç»ç†ç´§æ¥ç€è¯´ï¼šâ€œæˆ‘åç»­çš„å†…å®¹æ¨¡å—éœ€è¦16:9çš„å°é¢å›¾ï¼Œå•†å“æ¨¡å—å¯èƒ½éœ€è¦è‡ªç”±è£å‰ªâ€¦â€¦â€ æˆ‘æ„è¯†åˆ°ï¼Œä¸€ä¸ªåŸºäºåŸç”ŸUIå°è£…çš„åº“ï¼Œå¾ˆéš¾æ»¡è¶³æˆ‘æœªæ¥çµæ´»å¤šå˜çš„è£å‰ªæ¯”ä¾‹éœ€æ±‚ã€‚</li>
<li><strong>æ€§èƒ½çš„éšå¿§</strong>ï¼šåç«¯åŒäº‹ä¹Ÿå‘æ¥æé†’ï¼šâ€œä¸Šä¼ çš„å›¾ç‰‡ä¸èƒ½å¤ªå¤§ï¼Œæœ€å¥½èƒ½åœ¨å®¢æˆ·ç«¯å‹ç¼©ä¸€ä¸‹ï¼Œä¸ç„¶æœåŠ¡å™¨å’Œå¸¦å®½é¡¶ä¸ä½ï¼â€ è¿™æ„å‘³ç€æˆ‘ä¸ä»…è¦è£å‰ªï¼Œè¿˜éœ€è¦åœ¨<strong>ä¸ä¸¥é‡æŸå¤±ç”»è´¨çš„å‰æä¸‹ï¼Œå¯¹å›¾ç‰‡è¿›è¡Œç¼©æ”¾ï¼ˆScaleï¼‰å¤„ç†ï¼Œä»¥è¾¾åˆ°å‹ç¼©ä½“ç§¯çš„æ•ˆæœ</strong>ã€‚è€Œè¿™ä¸€ç‚¹ï¼Œ<code>image_cropper</code>Â æä¾›çš„æ§åˆ¶åŠ›éå¸¸æœ‰é™ã€‚</li>
</ol>
<p>é¢å¯¹è¿™äº›â€œå¡è„–å­â€çš„é—®é¢˜ï¼Œæˆ‘æ„è¯†åˆ°ï¼Œæˆ‘éœ€è¦çš„ä¸åªæ˜¯ä¸€ä¸ªâ€œèƒ½ç”¨â€çš„è£å‰ªå·¥å…·ã€‚æˆ‘éœ€è¦çš„æ˜¯ä¸€ä¸ª<strong>çº¯ Dart å®ç°ã€è·¨å¹³å° UI å®Œå…¨ä¸€è‡´ã€åŠŸèƒ½é«˜åº¦å¯æ§ã€å¹¶ä¸”èƒ½ç²¾ç»†åŒ–å¤„ç†å›¾ç‰‡å°ºå¯¸</strong>çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>å¸‚é¢ä¸Šæ²¡æœ‰ç°æˆçš„è½®å­ï¼Œé‚£å°±è‡ªå·±é€ ä¸€ä¸ªï¼</p>
<p>äºæ˜¯ï¼Œæˆ‘è‚äº†åŠä¸ªæœˆï¼Œä»é›¶å¼€å§‹ï¼Œç”¨Â <code>CustomPaint</code>Â å’ŒçŸ©é˜µå˜æ¢ç¡¬æ ¸æ‰“é€ äº†è¿™æ¬¾å…¨æ–°çš„ Flutter å›¾ç‰‡ç¼–è¾‘å™¨ã€‚å®ƒä¸ä»…è§£å†³äº†ä¸Šè¿°æ‰€æœ‰ç—›ç‚¹ï¼Œè¿˜å¸¦æ¥äº†æ›´å¤šæƒŠå–œï¼š</p>
<ul>
<li><strong>åƒç´ çº§æ— æŸè£å‰ª</strong>ï¼šæ”¯æŒä»»æ„æ¯”ä¾‹å’Œè‡ªç”±è£å‰ªï¼Œä¿è¯ç”»è´¨ã€‚</li>
<li><strong>å†…ç½®ç¼©æ”¾å‹ç¼©</strong>ï¼šåœ¨è£å‰ªçš„åŒæ—¶ï¼Œé€šè¿‡ç²¾å¯†çš„Â <code>scale</code>Â è®¡ç®—ï¼Œæœ‰æ•ˆæ§åˆ¶è¾“å‡ºå›¾ç‰‡çš„å°ºå¯¸å’Œä½“ç§¯ã€‚</li>
<li><strong>è·¨å¹³å°ä½“éªŒå®Œå…¨ä¸€è‡´</strong>ï¼šçº¯ Dart ç»˜åˆ¶ï¼Œå‘Šåˆ«å¹³å°å·®å¼‚ã€‚</li>
<li><strong>ä¸æ­¢æ˜¯è£å‰ª</strong>ï¼šå®ƒè¿˜é›†æˆäº† 360Â° è‡ªç”±æ—‹è½¬ã€åŠŸèƒ½å®Œå–„çš„æ–‡æœ¬æ·»åŠ ä¸ç¼–è¾‘ï¼Œä»¥åŠå¥å…¨çš„æ’¤é”€/é‡åšå†å²ç®¡ç†æœºåˆ¶ã€‚</li>
</ul>
<p><strong>å…ˆæ¥çœ‹çœ‹æœ€ç»ˆæ•ˆæœ</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/07f0efb092c1440f909ae9c2aefa49dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6X55qE6Leo56uv5byA5Y-R5pel6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763455838&amp;x-signature=Qsa0mxmuRvd67ONg4cF6P44Eqxs%3D" alt="Simulator Screenshot - iPhone 16 Plus - 2025-11-11 at 15.15.17.png" loading="lazy"/></p>
<ul>
<li>å›¾1:å›¾ç‰‡ç¼–è¾‘ä¸»ç•Œé¢ï¼šå›æ»šã€è£å‰ªã€æ¸²æŸ“ã€è´´å›¾ã€æ’¤é”€</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f2282066c75447399d6a1f853e18e31~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6X55qE6Leo56uv5byA5Y-R5pel6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763455838&amp;x-signature=Eo7KzB269GtkQTFAGWcCHg9Q%2B%2FE%3D" alt="Simulator Screenshot - iPhone 16 Plus - 2025-11-11 at 15.15.45.png" loading="lazy"/></p>
<ul>
<li>å›¾2:å›¾ç‰‡è£å‰ªä¸»ç•Œé¢ï¼šè‡ªç”±æ¯”ä¾‹ã€ç‰¹å®šæ¯”ä¾‹</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d9a3ef6df0442fcb11e0c01a94dfd5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6X55qE6Leo56uv5byA5Y-R5pel6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763455838&amp;x-signature=%2FIpMssrJ%2F%2Fhz6JTM%2FNXJznB93%2FY%3D" alt="Simulator Screenshot - iPhone 16 Plus - 2025-11-11 at 15.16.02.png" loading="lazy"/></p>
<ul>
<li>å›¾3:å›¾ç‰‡æ—‹è½¬ä¸»ç•Œé¢ï¼šè‡ªç”±è§’åº¦ã€ç‰¹å®šè§’åº¦</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca18dd1b054346a4834ea9e7da72937c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6X55qE6Leo56uv5byA5Y-R5pel6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763455838&amp;x-signature=Cr1GCUfI9YxtQ3NvkyOvI8GCKiM%3D" alt="Simulator Screenshot - iPhone 16 Plus - 2025-11-11 at 15.16.35.png" loading="lazy"/></p>
<ul>
<li>å›¾4:å›¾ç‰‡è´´å›¾ä¸»ç•Œé¢</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe8831c4cf714fe48df71482b197a1b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6X55qE6Leo56uv5byA5Y-R5pel6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763455838&amp;x-signature=9eS5K1%2F43E4ixoQd6OphLua4GAo%3D" alt="Simulator Screenshot - iPhone 16 Plus - 2025-11-11 at 15.17.01.png" loading="lazy"/></p>
<ul>
<li>åŸå›¾å’Œç¼–è¾‘åçš„å¯¹æ¯”ï¼šå‹ç¼©ç³»æ•°ï¼ˆå¯é…ç½®ï¼‰</li>
</ul>
<h2 data-id="heading-1">ç¼–è¾‘å™¨çš„æ¶æ„è®¾è®¡</h2>
<p>ä¸€ä¸ªå¤æ‚çš„ç³»ç»Ÿï¼Œå¥½çš„æ¶æ„æ˜¯æˆåŠŸçš„ä¸€åŠã€‚æˆ‘ä¸æƒ³æŠŠæ‰€æœ‰é€»è¾‘éƒ½å †åœ¨ä¸€ä¸ªè‡ƒè‚¿çš„Â <code>StatefulWidget</code>Â é‡Œï¼Œé‚£æ ·ä¼šå˜æˆéš¾ä»¥ç»´æŠ¤çš„â€œä¸Šå¸ç±»â€ã€‚å› æ­¤ï¼Œæˆ‘ä»ä¸€å¼€å§‹å°±ç¡®ç«‹äº†**â€œå…³æ³¨ç‚¹åˆ†ç¦»â€**çš„æ ¸å¿ƒè®¾è®¡åŸåˆ™ã€‚</p>
<p>æ•´ä¸ªç¼–è¾‘å™¨è¢«æ‹†åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªå±‚æ¬¡ï¼š</p>
<ul>
<li>
<p><strong>è§†å›¾å±‚ (View)</strong> ï¼šç”±Â <code>ImageEditorView</code>Â å’ŒÂ <code>CustomPainter</code>Â ç»„æˆï¼Œçº¯ç²¹è´Ÿè´£UIçš„æ¸²æŸ“å’Œç”¨æˆ·æ‰‹åŠ¿çš„æ•è·ã€‚å®ƒæœ¬èº«ä¸åŒ…å«ä»»ä½•ä¸šåŠ¡é€»è¾‘ã€‚</p>
</li>
<li>
<p><strong>æ§åˆ¶å™¨ (Controller)</strong> ï¼š<code>ImageEditorController</code>Â æ˜¯æ•´ä¸ªç¼–è¾‘å™¨çš„â€œå¤§è„‘â€ã€‚å®ƒç»§æ‰¿è‡ªÂ <code>ChangeNotifier</code>ï¼Œè´Ÿè´£ç®¡ç†æ‰€æœ‰çŠ¶æ€ï¼ˆå›¾ç‰‡ã€æ—‹è½¬è§’åº¦ã€è£å‰ªæ¡†ã€æ–‡æœ¬å±‚ç­‰ï¼‰ï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œå¹¶é€šçŸ¥è§†å›¾å±‚æ›´æ–°ã€‚</p>
</li>
<li>
<p><strong>æ¨¡å‹å±‚ (Model)</strong> -ï¼š<code>TextLayerData</code>,Â <code>ImageEditorConfig</code>Â ç­‰ï¼Œå°±æ˜¯æœ€çº¯ç²¹çš„æ•°æ®ç»“æ„ã€‚</p>
</li>
<li>
<p><strong>å¤„ç†å™¨/ç®¡ç†å™¨ (Handlers/Managers)</strong> ï¼šè¿™æ˜¯æœ¬æ¬¡è®¾è®¡çš„ç²¾é«“ã€‚æˆ‘å°†ä¸åŒåŠŸèƒ½çš„å¤æ‚é€»è¾‘æŠ½ç¦»æˆç‹¬ç«‹çš„ç±»ï¼Œè®© Controller ä¿æŒæ¸…çˆ½ï¼Œåªåšâ€œæŒ‡æŒ¥å®˜â€ã€‚</p>
<ul>
<li><code>CropHandler</code>: è´Ÿè´£æ‰€æœ‰ä¸è£å‰ªç›¸å…³çš„è®¡ç®—ï¼Œå¦‚åˆå§‹åŒ–è£å‰ªæ¡†ã€é™åˆ¶è¾¹ç•Œã€æ‰§è¡Œé«˜ä¿çœŸè£å‰ªã€‚</li>
<li><code>RotationHandler</code>: è´Ÿè´£æ¸²æŸ“æ—‹è½¬åçš„å›¾ç‰‡ã€‚</li>
<li><code>TextLayerManager</code>: ä¸“é—¨ç®¡ç†æ–‡æœ¬å›¾å±‚çš„å¢åˆ æ”¹æŸ¥å’ŒçŠ¶æ€ã€‚</li>
<li><code>HistoryManager</code>: è´Ÿè´£ç®¡ç†æ“ä½œå¿«ç…§ï¼Œå®ç°æ’¤é”€å’Œé‡åšã€‚</li>
</ul>
</li>
</ul>
<p>è¿™ç§åˆ†å±‚æ¶æ„å¸¦æ¥äº†å·¨å¤§çš„å¥½å¤„ï¼š</p>
<ol>
<li><strong>é«˜å†…èšï¼Œä½è€¦åˆ</strong>ï¼šæ¯ä¸ªæ¨¡å—åªå…³å¿ƒè‡ªå·±çš„èŒè´£ï¼Œä¿®æ”¹è£å‰ªé€»è¾‘ä¸ä¼šå½±å“æ–‡æœ¬åŠŸèƒ½ã€‚</li>
<li><strong>æ˜“äºæµ‹è¯•</strong>ï¼šå¯ä»¥å•ç‹¬å¯¹Â <code>CropHandler</code>Â æˆ–Â <code>HistoryManager</code>Â è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚</li>
<li><strong>å¯æ‰©å±•æ€§å¼º</strong>ï¼šæœªæ¥æƒ³å¢åŠ â€œæ»¤é•œâ€åŠŸèƒ½ï¼Ÿåªéœ€è¦æ–°å¢ä¸€ä¸ªÂ <code>FilterHandler</code>ï¼Œç„¶ååœ¨ Controller ä¸­é›†æˆå³å¯ï¼Œå¯¹ç°æœ‰ä»£ç çš„ä¾µå…¥æå°ã€‚</li>
</ol>
<h2 data-id="heading-2">ä¸‡ç‰©çš†å¯ç»˜ï¼šCustomPaint çš„é­”åŠ›</h2>
<p>ç¼–è¾‘å™¨çš„æ ¸å¿ƒæ˜¾ç¤ºåŒºåŸŸï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç”»å¸ƒï¼ˆCanvasï¼‰ï¼Œæˆ‘éœ€è¦åœ¨ä¸Šé¢è‡ªç”±åœ°ç»˜åˆ¶å›¾ç‰‡ã€è£å‰ªæ¡†ã€æ–‡æœ¬ç­‰å…ƒç´ ã€‚åœ¨ Flutter ä¸­ï¼Œ<code>CustomPaint</code>Â å’ŒÂ <code>CustomPainter</code>Â æ˜¯å®ç°è¿™ä¸€éœ€æ±‚çš„æœ€ä½³é€‰æ‹©ã€‚</p>
<p>æˆ‘çš„Â <code>ImageEditorPainter</code>Â çš„Â <code>paint</code>Â æ–¹æ³•ï¼Œå°±åƒä¸€ä½ç”»å®¶åœ¨æŒ‰æ­¥éª¤ä½œç”»ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// ImageEditorPainter.dart</span>
<span class="hljs-meta">@override</span>
<span class="hljs-keyword">void</span> paint(Canvas canvas, Size size) {
    <span class="hljs-comment">// ... è·å– controller ä¸­çš„å„ç§çŠ¶æ€ ...</span>

    <span class="hljs-comment">// --- 1. ç»˜åˆ¶å˜æ¢åçš„å›¾ç‰‡ ---</span>
    <span class="hljs-comment">// è¿™æ˜¯æ ¸å¿ƒç»˜åˆ¶é€»è¾‘ï¼Œä¿è¯å›¾ç‰‡å±…ä¸­æ˜¾ç¤ºå¹¶åº”ç”¨æ—‹è½¬å’Œç¼©æ”¾</span>
    <span class="hljs-keyword">final</span> canvasCenterX = size.width / <span class="hljs-number">2</span>;
    <span class="hljs-keyword">final</span> canvasCenterY = size.height / <span class="hljs-number">2</span>;
    canvas.save(); <span class="hljs-comment">// ä¿å­˜å½“å‰ç”»å¸ƒçŠ¶æ€</span>
    canvas.translate(canvasCenterX, canvasCenterY); <span class="hljs-comment">// å°†ç”»å¸ƒåŸç‚¹ç§»åˆ°ä¸­å¿ƒ</span>
    canvas.rotate(rotationAngle); <span class="hljs-comment">// æ—‹è½¬</span>
    canvas.scale(scale, scale); <span class="hljs-comment">// ç¼©æ”¾</span>
    <span class="hljs-comment">// ä»¥å›¾ç‰‡ä¸­å¿ƒä¸ºåŸç‚¹ç»˜åˆ¶</span>
    canvas.drawImage(image, Offset(-image.width / <span class="hljs-number">2</span>, -image.height / <span class="hljs-number">2</span>), paint);
    canvas.restore(); <span class="hljs-comment">// æ¢å¤ç”»å¸ƒçŠ¶æ€ï¼Œåç»­ç»˜åˆ¶ä¸å—å½±å“</span>

    <span class="hljs-comment">// --- 2. å¦‚æœè£å‰ªæ¿€æ´»ï¼Œåˆ™ç»˜åˆ¶è£å‰ªUI ---</span>
    <span class="hljs-keyword">if</span> (isCropping &amp;&amp; cropRect != <span class="hljs-keyword">null</span>) {
      _drawCropUI(canvas, size, cropRect, handleSize);
    }

    <span class="hljs-comment">// --- 3. ç»˜åˆ¶æ‰€æœ‰æ–‡æœ¬å›¾å±‚ ---</span>
    _drawTextLayers(canvas, size);
}
</code></pre>
<p>è¿™é‡Œæœ‰å‡ ä¸ªå…³é”®ç‚¹ï¼š</p>
<ol>
<li><strong><code>canvas.save()</code>Â å’ŒÂ <code>canvas.restore()</code></strong> ï¼šè¿™å¯¹ç»„åˆæ˜¯Â <code>Canvas</code>Â æ“ä½œçš„é»„é‡‘æ³•åˆ™ã€‚å®ƒèƒ½ç¡®ä¿æˆ‘çš„å˜æ¢ï¼ˆå¹³ç§»ã€æ—‹è½¬ã€ç¼©æ”¾ï¼‰åªå¯¹ç»˜åˆ¶å›¾ç‰‡ç”Ÿæ•ˆï¼Œè€Œä¸ä¼šå½±å“åç»­è£å‰ªæ¡†å’Œæ–‡æœ¬çš„ç»˜åˆ¶ã€‚</li>
<li><strong>ä¸­å¿ƒç‚¹å˜æ¢</strong>ï¼šæ‰€æœ‰çš„å˜æ¢éƒ½å›´ç»•ç”»å¸ƒä¸­å¿ƒè¿›è¡Œï¼Œè¿™æ ·å¯ä»¥ä¿è¯ç”¨æˆ·åœ¨ç¼©æ”¾å’Œæ—‹è½¬æ—¶ï¼Œè§†è§‰ç„¦ç‚¹å§‹ç»ˆåœ¨å›¾ç‰‡ä¸­å¿ƒï¼Œä½“éªŒæ›´è‡ªç„¶ã€‚</li>
<li><strong>ç»˜åˆ¶è£å‰ªè’™å±‚</strong>ï¼šä¸€ä¸ªæœ‰è¶£çš„å°æŠ€å·§æ˜¯ï¼Œå¦‚ä½•ç»˜åˆ¶è£å‰ªæ¡†å¤–éƒ¨çš„åŠé€æ˜è’™å±‚ï¼Ÿæˆ‘å¯ä»¥åˆ©ç”¨Â <code>Path</code>Â çš„Â <code>fillType = PathFillType.evenOdd</code>Â å±æ€§ã€‚</li>
</ol>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// ImageEditorPainter.dart -&gt; _drawCropUI</span>
<span class="hljs-keyword">void</span> _drawCropUI(...) {
    <span class="hljs-comment">// ...</span>
    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸¤ä¸ªçŸ©å½¢çš„è·¯å¾„ï¼šä¸€ä¸ªæ˜¯æ•´ä¸ªç”»å¸ƒï¼Œä¸€ä¸ªæ˜¯è£å‰ªæ¡†</span>
    Path overlayPath = Path()
      ..addRect(Rect.fromLTWH(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, size.width, size.height))
      ..addRect(currentCropRect)
      ..fillType = PathFillType.evenOdd; <span class="hljs-comment">// è®¾ç½®ä¸º evenOdd å¡«å……è§„åˆ™</span>
    
    <span class="hljs-comment">// ç»˜åˆ¶è¿™ä¸ªè·¯å¾„ï¼ŒCanvas ä¼šè‡ªåŠ¨å¡«å……ä¸¤ä¸ªçŸ©å½¢ä¹‹é—´çš„åŒºåŸŸ</span>
    canvas.drawPath(overlayPath, overlayPaint);
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>é€šè¿‡Â <code>CustomPaint</code>ï¼Œè·å¾—äº†å¯¹UIåƒç´ çº§çš„å®Œå…¨æŒæ§åŠ›ï¼Œä¸ºå®ç°å¤æ‚çš„äº¤äº’æ•ˆæœæ‰“ä¸‹äº†åŸºç¡€ã€‚</p>
<h2 data-id="heading-3">åæ ‡ç³»ä¸é«˜ä¿çœŸè£å‰ªçš„å®ç°</h2>
<p>è¿™æ˜¯æ•´ä¸ªç¼–è¾‘å™¨æŠ€æœ¯å«é‡æœ€é«˜ï¼Œä¹Ÿæ˜¯æœ€éš¾å•ƒçš„ä¸€å—ç¡¬éª¨å¤´ã€‚</p>
<p><strong>é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
ç”¨æˆ·åœ¨å±å¹•ä¸Šçœ‹åˆ°çš„æ˜¯ä¸€å¼ ç»è¿‡<strong>ç¼©æ”¾</strong>å’Œ<strong>æ—‹è½¬</strong>çš„å›¾ç‰‡ã€‚å½“ä»–æ‹–åŠ¨è£å‰ªæ¡†æ—¶ï¼Œè¿™ä¸ªè£å‰ªæ¡†çš„åæ ‡æ˜¯ç›¸å¯¹äº<strong>å±å¹•</strong>çš„ï¼ˆæˆ‘ç§°ä¹‹ä¸ºâ€œå±å¹•åæ ‡ç³»â€ï¼‰ã€‚ä½†æˆ‘çš„æœ€ç»ˆç›®æ ‡ï¼Œæ˜¯ä»é‚£å¼ <strong>æœªç»ä»»ä½•å˜æ¢çš„ã€åŸå§‹é«˜åˆ†è¾¨ç‡çš„å›¾ç‰‡</strong>ï¼ˆâ€œå›¾ç‰‡åæ ‡ç³»â€ï¼‰ä¸­ï¼Œç²¾ç¡®åœ°åˆ‡å‡ºå¯¹åº”çš„éƒ¨åˆ†ã€‚</p>
<p>å¦‚æœåªæ˜¯ç®€å•åœ°å¯¹å±å¹•å†…å®¹è¿›è¡Œæˆªå›¾ï¼Œå›¾ç‰‡è´¨é‡ä¼šä¸¥é‡ä¸‹é™ï¼Œè¿™æ˜¯ä¸å¯æ¥å—çš„ã€‚æˆ‘å¿…é¡»å®ç°<strong>é«˜ä¿çœŸè£å‰ª</strong>ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šçŸ©é˜µå˜æ¢çš„é­”æ³•ï¼</strong></p>
<p>çº¿æ€§ä»£æ•°ä¸­çš„çŸ©é˜µï¼Œæ˜¯è¿æ¥ä¸åŒåæ ‡ç³»çš„æ¡¥æ¢ã€‚æˆ‘çš„æ€è·¯æ˜¯ï¼š</p>
<ol>
<li>æ„å»ºä¸€ä¸ªä»â€œå›¾ç‰‡åæ ‡ç³»â€åˆ°â€œå±å¹•åæ ‡ç³»â€çš„å˜æ¢çŸ©é˜µÂ <code>M</code>ã€‚</li>
<li>æ±‚å‡ºÂ <code>M</code>Â çš„é€†çŸ©é˜µÂ <code>Mâ»Â¹</code>ï¼Œå®ƒå°±æ˜¯ä»â€œå±å¹•åæ ‡ç³»â€è¿”å›â€œå›¾ç‰‡åæ ‡ç³»â€çš„é’¥åŒ™ã€‚</li>
<li>å°†å±å¹•ä¸Šè£å‰ªæ¡†çš„å››ä¸ªé¡¶ç‚¹ï¼Œé€šè¿‡Â <code>Mâ»Â¹</code>Â å˜æ¢ï¼Œå¾—åˆ°å®ƒä»¬åœ¨åŸå§‹å›¾ç‰‡ä¸Šçš„ç²¾ç¡®åæ ‡ã€‚</li>
<li>æ ¹æ®è¿™å››ä¸ªç‚¹ï¼Œè®¡ç®—å‡ºä¸€ä¸ªèƒ½å®Œå…¨åŒ…è£¹å®ƒä»¬çš„æœ€å°çŸ©å½¢ï¼ˆ<code>sourceRect</code>ï¼‰ã€‚</li>
<li>ä½¿ç”¨Â <code>canvas.drawImageRect</code>ï¼Œä»åŸå§‹å›¾ç‰‡ä¸­æŒ–å‡ºÂ <code>sourceRect</code>Â åŒºåŸŸï¼Œç»˜åˆ¶åˆ°ä¸€ä¸ªæ–°çš„ã€å°ºå¯¸å®Œç¾åŒ¹é…çš„ç”»å¸ƒä¸Šï¼Œä»è€Œç”Ÿæˆä¸€å¼ å…¨æ–°çš„ã€é«˜ä¿çœŸè£å‰ªåçš„å›¾ç‰‡ã€‚</li>
</ol>
<p>æ ¸å¿ƒä»£ç åœ¨Â <code>CropHandler.captureHiResCroppedImage</code>Â ä¸­ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// CropHandler.dart</span>
<span class="hljs-keyword">static</span> Future&lt;ui.Image?&gt; captureHiResCroppedImage(...) <span class="hljs-keyword">async</span> {
    <span class="hljs-comment">// 1. è®¡ç®—ä»"å›¾ç‰‡åæ ‡ç³»"åˆ°"å±å¹•åæ ‡ç³»"çš„å˜æ¢çŸ©é˜µ</span>
    <span class="hljs-keyword">final</span> Matrix4 matrixToScreen = CoordinateTransformer.createImageToScreenMatrix(...);

    <span class="hljs-comment">// 2. æ±‚é€†çŸ©é˜µ</span>
    <span class="hljs-keyword">final</span> Matrix4 screenToImageMatrix = Matrix4.inverted(matrixToScreen);

    <span class="hljs-comment">// 3. å°†å±å¹•ä¸Šçš„è£å‰ªæ¡†çš„å››ä¸ªè§’ï¼Œé€šè¿‡é€†çŸ©é˜µå˜æ¢å›å›¾ç‰‡ä¸Šçš„åæ ‡</span>
    <span class="hljs-keyword">final</span> topLeft = MatrixUtils.transformPoint(screenToImageMatrix, cropRect.topLeft);
    <span class="hljs-comment">// ... (transform other 3 corners)</span>

    <span class="hljs-comment">// 4. è®¡ç®—èƒ½å®Œå…¨åŒ…å›´è¿™å››ä¸ªç‚¹çš„ã€åœ¨å›¾ç‰‡åæ ‡ç³»ä¸­çš„çŸ©å½¢è¾¹ç•Œ (sourceRect)</span>
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> minX = [topLeft.dx, ...].reduce(math.min);
    <span class="hljs-comment">// ... (calculate maxX, minY, maxY)</span>
    <span class="hljs-keyword">final</span> Rect sourceRect = Rect.fromLTRB(minX, minY, maxX, maxY);

    <span class="hljs-comment">// 5. è®¡ç®—æ–°å›¾ç‰‡çš„å°ºå¯¸ï¼ˆé«˜ä¿çœŸå°ºå¯¸ï¼‰</span>
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">int</span> newWidth = sourceRect.width.round();
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">int</span> newHeight = sourceRect.height.round();

    <span class="hljs-comment">// 6. ä½¿ç”¨ PictureRecorder å’Œ drawImageRect è¿›è¡Œé«˜ä¿çœŸç»˜åˆ¶</span>
    <span class="hljs-keyword">final</span> recorder = ui.PictureRecorder();
    <span class="hljs-keyword">final</span> canvas = Canvas(recorder, Rect.fromLTWH(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, newWidth.toDouble(), newHeight.toDouble()));
    <span class="hljs-keyword">final</span> Rect destinationRect = Rect.fromLTWH(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, newWidth.toDouble(), newHeight.toDouble());

    <span class="hljs-comment">// æ ¸å¿ƒï¼šä»åŸå›¾çš„ sourceRect åŒºåŸŸï¼Œç»˜åˆ¶åˆ°æ–°ç”»å¸ƒçš„ destinationRect åŒºåŸŸ</span>
    canvas.drawImageRect(image, sourceRect, destinationRect, Paint());

    <span class="hljs-comment">// 7. ç”Ÿæˆæœ€ç»ˆçš„é«˜æ¸…å›¾ç‰‡</span>
    <span class="hljs-keyword">final</span> picture = recorder.endRecording();
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> picture.toImage(newWidth, newHeight);
}
</code></pre>
<p>è¿™ä¸ªè¿‡ç¨‹å®Œç¾åœ°è§£å†³äº†å› æ—‹è½¬å’Œç¼©æ”¾å¸¦æ¥çš„åæ ‡ç³»å·®å¼‚é—®é¢˜ï¼Œä¿è¯äº†æ¯ä¸€æ¬¡è£å‰ªéƒ½æ˜¯åƒç´ çº§çš„æ— æŸæ“ä½œã€‚åŒæ ·ï¼Œåœ¨æœ€ç»ˆå¯¼å‡ºå›¾ç‰‡æ—¶ï¼Œæ–‡æœ¬çš„ç»˜åˆ¶ä¹Ÿéµå¾ªäº†ç±»ä¼¼çš„åæ ‡å˜æ¢é€»è¾‘ï¼Œç¡®ä¿æ–‡å­—èƒ½è¢«é«˜æ¸…åœ°â€œå°â€åœ¨æœ€ç»ˆçš„å›¾ç‰‡ä¸Šã€‚</p>
<h2 data-id="heading-4">æ–‡æœ¬ä¸å†å²è®°å½•ç®¡ç†</h2>
<p>é™¤äº†ç¡¬æ ¸çš„è£å‰ªï¼Œä¸€äº›â€œè½¯â€åŠŸèƒ½çš„è®¾è®¡åŒæ ·é‡è¦ï¼Œå®ƒä»¬ç›´æ¥å†³å®šäº†ç”¨æˆ·ä½“éªŒã€‚</p>
<h3 data-id="heading-5">1. æ–‡æœ¬ç®¡ç† (<code>TextLayerManager</code>)</h3>
<p>æ·»åŠ æ–‡æœ¬ä¸ä»…ä»…æ˜¯åœ¨ç”»å¸ƒä¸Šç”»å‡ ä¸ªå­—é‚£ä¹ˆç®€å•ï¼Œæˆ‘éœ€è¦ç®¡ç†å¤šä¸ªæ–‡æœ¬å±‚ï¼Œæ”¯æŒå¯¹å®ƒä»¬è¿›è¡Œç‹¬ç«‹çš„ç§»åŠ¨ã€æ ·å¼ä¿®æ”¹å’Œåˆ é™¤ã€‚</p>
<p><code>TextLayerManager</code>Â å†…éƒ¨ä½¿ç”¨ä¸€ä¸ªÂ <code>Map&lt;String, TextLayerData&gt;</code>Â æ¥å­˜å‚¨æ‰€æœ‰æ–‡æœ¬å±‚ï¼Œä»¥Â <code>id</code>Â ä½œä¸ºé”®ï¼Œå®ç°äº† O(1) å¤æ‚åº¦çš„å¿«é€ŸæŸ¥æ‰¾ã€‚</p>
<p>å®ƒè´Ÿè´£å¤„ç†ï¼š</p>
<ul>
<li><strong>å‘½ä¸­æµ‹è¯•</strong>ï¼šå½“ç”¨æˆ·ç‚¹å‡»å±å¹•æ—¶ï¼Œ<code>selectLayerAt</code>Â æ–¹æ³•ä¼šéå†æ‰€æœ‰æ–‡æœ¬å±‚ï¼Œè®¡ç®—å®ƒä»¬çš„è¾¹ç•Œæ¡†ï¼ˆ<code>_getTextLayerBounds</code>ï¼‰ï¼Œåˆ¤æ–­ç‚¹å‡»ä½ç½®æ˜¯å¦è½åœ¨æŸä¸ªæ–‡æœ¬å±‚å†…ï¼Œä»è€Œå®ç°é€‰ä¸­ã€‚</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šç®¡ç†å½“å‰é€‰ä¸­çš„æ–‡æœ¬å±‚ ID (<code>_selectedLayerId</code>)ï¼Œå¹¶æä¾›æ›´æ–°é¢œè‰²ã€å¤§å°ã€ä½ç½®çš„æ¥å£ã€‚</li>
<li><strong>æ•°æ®éš”ç¦»</strong>ï¼šæ‰€æœ‰æ–‡æœ¬ç›¸å…³çš„çŠ¶æ€éƒ½å†…èšåœ¨Â <code>TextLayerManager</code>Â ä¸­ï¼Œ<code>ImageEditorController</code>Â åªéœ€è°ƒç”¨å…¶APIå³å¯ï¼Œæ— éœ€å…³å¿ƒå†…éƒ¨å®ç°ã€‚</li>
</ul>
<h3 data-id="heading-6">2. æ—¶é—´æ—…è¡Œ (<code>HistoryManager</code>)</h3>
<p>ä¸€ä¸ªä¸“ä¸šçš„ç¼–è¾‘å™¨ï¼Œæ€èƒ½æ²¡æœ‰æ’¤é”€/é‡åšåŠŸèƒ½ï¼Ÿæˆ‘é€šè¿‡<strong>å¤‡å¿˜å½•æ¨¡å¼</strong>å®ç°äº†è¿™ä¸ªåŠŸèƒ½ã€‚</p>
<ul>
<li><strong><code>EditorStateSnapshot</code></strong>ï¼šè¿™æ˜¯ä¸€ä¸ªæ•°æ®ç±»ï¼Œåƒä¸€ä¸ªâ€œå¿«ç…§â€ï¼Œä¿å­˜äº†æŸä¸€æ—¶åˆ»ç¼–è¾‘å™¨çš„æ‰€æœ‰å…³é”®çŠ¶æ€ï¼ˆ<code>ui.Image</code>Â å¯¹è±¡ã€æ–‡æœ¬å±‚åˆ—è¡¨ã€æ—‹è½¬è§’åº¦ç­‰ï¼‰ã€‚</li>
<li><strong><code>HistoryManager</code></strong>ï¼šå®ƒå†…éƒ¨ç»´æŠ¤ä¸€ä¸ªÂ <code>List&lt;EditorStateSnapshot&gt;</code>Â åˆ—è¡¨ï¼Œä½œä¸ºå†å²å †æ ˆã€‚</li>
</ul>
<p><strong>å·¥ä½œæµç¨‹æ˜¯è¿™æ ·çš„ï¼š</strong></p>
<ol>
<li><strong>ä¿å­˜å¿«ç…§</strong>ï¼šåœ¨æ‰§è¡Œä¸€ä¸ªâ€œç ´åæ€§â€æ“ä½œï¼ˆå¦‚åº”ç”¨è£å‰ªã€åº”ç”¨æ—‹è½¬ï¼‰<strong>ä¹‹å‰</strong>ï¼Œè°ƒç”¨Â <code>_historyManager.saveSnapshot()</code>ï¼Œå°†å½“å‰çŠ¶æ€æ¨å…¥å †æ ˆã€‚</li>
<li><strong>æ’¤é”€æ“ä½œ</strong>ï¼šå½“ç”¨æˆ·ç‚¹å‡»â€œæ’¤é”€â€æ—¶ï¼Œè°ƒç”¨Â <code>_historyManager.popSnapshot()</code>ï¼Œå–å‡ºæœ€è¿‘çš„ä¸€ä¸ªå¿«ç…§ï¼Œç„¶åç”¨å¿«ç…§ä¸­çš„æ•°æ®æ¢å¤Â <code>ImageEditorController</code>Â çš„çŠ¶æ€ã€‚</li>
</ol>
<p>è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸ªç»†èŠ‚ï¼šåœ¨ä¿å­˜å¿«ç…§æ—¶ï¼Œå¯¹äºÂ <code>List&lt;TextLayerData&gt;</code>Â è¿™æ ·çš„å¯å˜å¯¹è±¡ï¼Œå¿…é¡»è¿›è¡Œ<strong>æ·±æ‹·è´</strong>ï¼Œå¦åˆ™åç»­å¯¹æ–‡æœ¬çš„ä¿®æ”¹ä¼šæ±¡æŸ“å†å²è®°å½•ã€‚è€ŒÂ <code>ui.Image</code>Â æ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œå¯ä»¥ç›´æ¥å¼•ç”¨ï¼Œè¿™ä¸ºæˆ‘çœäº†ä¸å°‘äº‹ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// HistoryManager.dart</span>
<span class="hljs-keyword">void</span> saveSnapshot(...) {
    <span class="hljs-comment">// æ·±æ‹·è´æ–‡æœ¬å›¾å±‚åˆ—è¡¨</span>
    <span class="hljs-keyword">final</span> copiedTextLayers = textLayers.map((layer) =&gt; layer.clone()).toList();

    <span class="hljs-keyword">final</span> snapshot = EditorStateSnapshot(
      image: image, <span class="hljs-comment">// ui.Image æ˜¯ä¸å¯å˜çš„ï¼Œå¯ä»¥ç›´æ¥å¼•ç”¨</span>
      textLayers: copiedTextLayers,
      <span class="hljs-comment">// ...</span>
    );
    _snapshots.add(snapshot);
    <span class="hljs-comment">// ... (é™åˆ¶å†å²è®°å½•æ•°é‡)</span>
}
</code></pre>
<p>é€šè¿‡Â <code>HistoryManager</code>ï¼Œæˆ‘èµ‹äºˆäº†ç”¨æˆ·â€œåæ‚”â€çš„æƒåˆ©ï¼Œå¤§å¤§æå‡äº†ç¼–è¾‘å™¨çš„å®¹é”™æ€§å’Œç”¨æˆ·ä½“éªŒã€‚</p>
<h2 data-id="heading-7">å¯é…ç½®çš„å¯¼å‡ºå‹ç¼©ï¼Œä¸ºæœåŠ¡å™¨å‡è´Ÿ</h2>
<p>åœ¨å‰é¢æˆ‘æåˆ°äº†ä¸€ä¸ªéå¸¸ç°å®çš„ç—›ç‚¹ï¼šç”¨æˆ·ä¸Šä¼ çš„åŸå§‹å›¾ç‰‡åŠ¨è¾„å‡ å…†ç”šè‡³åå‡ å…†ï¼Œå¦‚æœç›´æ¥ä¸Šä¼ ï¼Œä¼šç»™æœåŠ¡å™¨çš„<strong>å¸¦å®½å’Œå­˜å‚¨</strong>å¸¦æ¥å·¨å¤§å‹åŠ›ï¼ŒåŒæ—¶ä¹Ÿä¼šæ¶ˆè€—ç”¨æˆ·å¤§é‡çš„ç§»åŠ¨æ•°æ®ã€‚å› æ­¤ï¼Œåœ¨å®¢æˆ·ç«¯è¿›è¡Œ<strong>é«˜è´¨é‡çš„é¢„å‹ç¼©</strong>ï¼Œæ˜¯ä¼ä¸šçº§åº”ç”¨ä¸å¯æˆ–ç¼ºçš„ä¸€ç¯ã€‚</p>
<p>æˆ‘çš„ç›®æ ‡å¾ˆæ˜ç¡®ï¼š</p>
<ol>
<li><strong>å‹ç¼©è¿‡ç¨‹å¯¹ç”¨æˆ·æ— æ„Ÿ</strong>ï¼šç”¨æˆ·åªéœ€è¦æ­£å¸¸ç¼–è¾‘ï¼Œåœ¨æœ€åå¯¼å‡ºæ—¶è‡ªåŠ¨å®Œæˆã€‚</li>
<li><strong>å‹ç¼©æ¯”ç‡å¯é…ç½®</strong>ï¼šå…è®¸å¼€å‘è€…æ ¹æ®ä¸åŒçš„ä¸šåŠ¡åœºæ™¯ï¼ˆå¦‚å¤´åƒã€å°é¢ã€æ™®é€šæ’å›¾ï¼‰çµæ´»è®¾ç½®å‹ç¼©å¼ºåº¦ã€‚</li>
<li><strong>ä¿è¯ç”»è´¨</strong>ï¼šä¸èƒ½å› ä¸ºå‹ç¼©å°±è®©å›¾ç‰‡å˜å¾—æ¨¡ç³Šä¸å ªï¼Œè¦åœ¨ä½“ç§¯å’Œè´¨é‡ä¹‹é—´æ‰¾åˆ°æœ€ä½³å¹³è¡¡ã€‚</li>
</ol>
<p>åŸºäºè¿™äº›ç›®æ ‡ï¼Œæˆ‘è®¾è®¡äº†ä¸€å¥—ä¼˜é›…çš„ã€åŸºäºÂ <code>scale</code>Â çš„å‹ç¼©æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-8">1. è®¾è®¡æ€è·¯ï¼šåˆ†ç¦»ä¸é…ç½®</h3>
<p>æˆ‘æ²¡æœ‰å°†å‹ç¼©é€»è¾‘è€¦åˆåœ¨è£å‰ªæˆ–æ—‹è½¬ç­‰ä»»ä½•ä¸€ä¸ªç¼–è¾‘æ­¥éª¤ä¸­ã€‚ç¼–è¾‘è¿‡ç¨‹å§‹ç»ˆåº”è¯¥åœ¨æœ€é«˜ä¿çœŸåº¦çš„å›¾åƒä¸Šè¿›è¡Œï¼Œä»¥ä¿è¯æ“ä½œçš„ç²¾ç¡®æ€§ã€‚å‹ç¼©ï¼Œåº”è¯¥æ˜¯<strong>å¯¼å‡ºå‰ï¼ˆExportï¼‰çš„æœ€åä¸€é“å·¥åº</strong>ã€‚</p>
<p>ä¸ºæ­¤ï¼Œæˆ‘å¼•å…¥äº†Â <code>ImageCompressionConfig</code>Â é…ç½®ç±»ï¼Œå¹¶å°†å…¶ä½œä¸ºÂ <code>ImageEditorConfig</code>Â çš„ä¸€éƒ¨åˆ†ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// models/editor_models.dart</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ImageEditorConfig</span> </span>{
  <span class="hljs-comment">// ... å…¶ä»–é…ç½®</span>
  <span class="hljs-keyword">final</span> ImageCompressionConfig? compression;
  <span class="hljs-comment">// ...</span>
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ImageCompressionConfig</span> </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">bool</span> enabled; <span class="hljs-comment">// æ˜¯å¦å¯ç”¨å‹ç¼©</span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> scale; <span class="hljs-comment">// å‹ç¼©æ¯”ä¾‹ï¼Œä¾‹å¦‚ 0.5 è¡¨ç¤ºå°ºå¯¸å˜ä¸ºåŸæ¥çš„ä¸€åŠ</span>

  <span class="hljs-keyword">const</span> ImageCompressionConfig({
    <span class="hljs-keyword">this</span>.enabled = <span class="hljs-keyword">true</span>,
    <span class="hljs-keyword">this</span>.scale = <span class="hljs-number">0.5</span>,
  });
}
</code></pre>
<p>è¿™æ ·çš„è®¾è®¡è®©å‹ç¼©åŠŸèƒ½å˜æˆäº†ä¸€ä¸ª<strong>å¯æ’æ‹”ã€å¯é…ç½®</strong>çš„æ¨¡å—ã€‚å¼€å‘è€…åœ¨åˆå§‹åŒ–ç¼–è¾‘å™¨æ—¶ï¼Œå¯ä»¥è½»æ¾åœ°å†³å®šæ˜¯å¦å¯ç”¨å‹ç¼©ä»¥åŠå‹ç¼©åˆ°ä»€ä¹ˆç¨‹åº¦ã€‚</p>
<h3 data-id="heading-9">2. å®ç°æ­ç§˜ï¼š<code>exportImage</code>Â çš„å¤„ç†æµæ°´çº¿</h3>
<p>å½“ç”¨æˆ·ç‚¹å‡»â€œå®Œæˆâ€å¹¶è°ƒç”¨Â <code>exportImage()</code>Â æ–¹æ³•æ—¶ï¼Œä¸€æ¡ç²¾å¯†çš„æµæ°´çº¿å°±å¼€å§‹å·¥ä½œäº†ï¼š</p>
<p><code>exportImage() -&gt; _captureTransformedImage() -&gt; _applyCompressionIfNeeded() -&gt; è¿”å›æœ€ç»ˆå›¾ç‰‡</code></p>
<ol>
<li><strong><code>_captureTransformedImage()</code></strong> : é¦–å…ˆï¼Œæ— è®ºæ˜¯å¦å‹ç¼©ï¼Œæˆ‘ä»¬éƒ½éœ€è¦å…ˆå°†ç”¨æˆ·çš„æ‰€æœ‰ç¼–è¾‘æ“ä½œï¼ˆæ—‹è½¬ã€è£å‰ªã€æ·»åŠ æ–‡æœ¬ç­‰ï¼‰åº”ç”¨ï¼Œç”Ÿæˆä¸€å¼ â€œæ‰€è§å³æ‰€å¾—â€çš„é«˜ä¿çœŸä¸­é—´å›¾ã€‚</li>
<li><strong><code>_applyCompressionIfNeeded()</code></strong> : æ¥ç€ï¼Œè¿™å¼ é«˜ä¿çœŸå›¾è¢«ä¼ é€’ç»™å‹ç¼©å¤„ç†å™¨ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯å®ç°å‹ç¼©çš„æ ¸å¿ƒã€‚</li>
</ol>
<p>è®©æˆ‘ä»¬æ·±å…¥Â <code>_applyCompressionIfNeeded</code>Â çš„æºç ï¼Œçœ‹çœ‹é­”æ³•æ˜¯å¦‚ä½•å‘ç”Ÿçš„ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// ImageEditorController.dart</span>

Future&lt;ui.Image&gt; _applyCompressionIfNeeded(ui.Image image) <span class="hljs-keyword">async</span> {
  <span class="hljs-comment">// 1. ä»é…ç½®ä¸­è¯»å–å‹ç¼©è®¾ç½®</span>
  <span class="hljs-keyword">final</span> ImageCompressionConfig? compressionConfig = config.compression;
  <span class="hljs-keyword">if</span> (compressionConfig == <span class="hljs-keyword">null</span> || !compressionConfig.enabled) {
    <span class="hljs-keyword">return</span> image; <span class="hljs-comment">// å¦‚æœæœªé…ç½®æˆ–æœªå¯ç”¨ï¼Œç›´æ¥è¿”å›åŸå›¾</span>
  }
  
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> scale = compressionConfig.scale;
  <span class="hljs-keyword">if</span> (scale &lt;= <span class="hljs-number">0</span> || scale &gt;= <span class="hljs-number">1.0</span>) {
    <span class="hljs-keyword">return</span> image; <span class="hljs-comment">// æ— æ•ˆçš„ scale å€¼ï¼Œä¸å¤„ç†</span>
  }

  <span class="hljs-comment">// 2. æ ¹æ® scale è®¡ç®—ç›®æ ‡å°ºå¯¸</span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">int</span> targetWidth = math.max(<span class="hljs-number">1</span>, (image.width * scale).round());
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">int</span> targetHeight = math.max(<span class="hljs-number">1</span>, (image.height * scale).round());

  <span class="hljs-comment">// 3. ä½¿ç”¨ PictureRecorder å’Œ drawImageRect è¿›è¡Œé«˜è´¨é‡ç¼©æ”¾</span>
  <span class="hljs-keyword">final</span> ui.PictureRecorder recorder = ui.PictureRecorder();
  <span class="hljs-keyword">final</span> Canvas canvas = Canvas(recorder);
  
  <span class="hljs-keyword">final</span> Rect srcRect = Rect.fromLTWH(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, image.width.toDouble(), image.height.toDouble());
  <span class="hljs-keyword">final</span> Rect dstRect = Rect.fromLTWH(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, targetWidth.toDouble(), targetHeight.toDouble());
  
  <span class="hljs-comment">// 4. [å…³é”®] è®¾ç½®é«˜è´¨é‡çš„ç»˜åˆ¶æ»¤é•œ</span>
  <span class="hljs-keyword">final</span> Paint paint = Paint()..filterQuality = FilterQuality.high;

  canvas.drawImageRect(image, srcRect, dstRect, paint);

  <span class="hljs-comment">// 5. ç”Ÿæˆæ–°çš„ã€å°ºå¯¸æ›´å°çš„å›¾ç‰‡</span>
  <span class="hljs-keyword">final</span> ui.Picture picture = recorder.endRecording();
  <span class="hljs-keyword">final</span> ui.Image resized = <span class="hljs-keyword">await</span> picture.toImage(targetWidth, targetHeight);
  
  <span class="hljs-comment">// 6. [å…³é”®] é‡Šæ”¾æ—§çš„å¤§å›¾å†…å­˜</span>
  _disposeImage(image); 
  
  <span class="hljs-keyword">return</span> resized;
}
</code></pre>
<p>è¿™æ®µä»£ç è™½ç„¶ä¸é•¿ï¼Œä½†å¤„å¤„ä½“ç°ç€ç²¾å¿ƒçš„è®¾è®¡ï¼š</p>
<ul>
<li><strong>è®¡ç®—ç›®æ ‡å°ºå¯¸ (æ­¥éª¤2)</strong> ï¼šé€šè¿‡å°†åŸå§‹å®½é«˜ä¹˜ä»¥Â <code>scale</code>Â å› å­ï¼Œæˆ‘ä»¬å¾—åˆ°äº†å‹ç¼©åçš„ç›®æ ‡å°ºå¯¸ã€‚è¿™æ˜¯æ•´ä¸ªæ–¹æ¡ˆçš„æ•°å­¦åŸºç¡€ã€‚</li>
<li><strong><code>drawImageRect</code>Â (æ­¥éª¤3)</strong> ï¼šè¿™ä¸ª FlutterÂ <code>Canvas</code>Â çš„ API æ˜¯å®ç°ç¼©æ”¾çš„å…³é”®ã€‚å®ƒå…è®¸æˆ‘ä»¬å°†ä¸€ä¸ªæºçŸ©å½¢ï¼ˆ<code>srcRect</code>ï¼Œå³æ•´ä¸ªåŸå§‹å¤§å›¾ï¼‰ç»˜åˆ¶åˆ°ä¸€ä¸ªç›®æ ‡çŸ©å½¢ï¼ˆ<code>dstRect</code>ï¼Œå³æˆ‘ä»¬è®¡ç®—å‡ºçš„å°å°ºå¯¸çŸ©å½¢ï¼‰ä¸­ã€‚åœ¨ç»˜åˆ¶è¿‡ç¨‹ä¸­ï¼ŒFlutter å¼•æ“ä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬å®Œæˆåƒç´ çš„æ’å€¼å’Œç¼©æ”¾ã€‚</li>
<li><strong>ç”»è´¨çš„ç§˜å¯†æ­¦å™¨ (æ­¥éª¤4)</strong> ï¼šä»…ä»…ç¼©æ”¾æ˜¯ä¸å¤Ÿçš„ï¼Œå¦‚ä½•ä¿è¯ç”»è´¨ï¼Ÿç­”æ¡ˆæ˜¯Â <code>Paint</code>Â å¯¹è±¡çš„Â <code>filterQuality</code>Â å±æ€§ã€‚å°†å…¶è®¾ç½®ä¸ºÂ <code>FilterQuality.high</code>ï¼Œä¼šå‘Šè¯‰ Flutter å¼•æ“ä½¿ç”¨æ›´é«˜çº§ã€æ›´å¹³æ»‘çš„ç®—æ³•ï¼ˆé€šå¸¸æ˜¯åŒçº¿æ€§æˆ–åŒä¸‰æ¬¡æ’å€¼ï¼‰æ¥å¤„ç†åƒç´ ï¼Œä»è€Œåœ¨ç¼©å°å›¾ç‰‡æ—¶æœ€å¤§ç¨‹åº¦åœ°ä¿ç•™ç»†èŠ‚ï¼Œé¿å…å‡ºç°é”¯é½¿å’Œé©¬èµ›å…‹ã€‚</li>
<li><strong>å†…å­˜ç®¡ç†çš„å…¸èŒƒ (æ­¥éª¤6)</strong> ï¼šåœ¨ç”Ÿæˆäº†æ–°çš„ã€å°å°ºå¯¸çš„Â <code>resized</code>Â å›¾ç‰‡åï¼Œé‚£å¼ ä½œä¸ºè¾“å…¥çš„ã€é«˜ä¿çœŸçš„Â <code>image</code>Â å°±å®Œæˆäº†å®ƒçš„å†å²ä½¿å‘½ã€‚é€šè¿‡è°ƒç”¨Â <code>_disposeImage(image)</code>Â ä¸»åŠ¨é‡Šæ”¾å…¶å ç”¨çš„å†…å­˜ï¼Œå¯ä»¥æœ‰æ•ˆé¿å…åº”ç”¨å› å¤„ç†å¤§å›¾è€Œå¯¼è‡´çš„å†…å­˜å³°å€¼ï¼Œè¿™å¯¹äºç§»åŠ¨è®¾å¤‡å°¤å…¶é‡è¦ã€‚</li>
</ul>
<h5 data-id="heading-10">3. ä¼˜åŠ¿æ€»ç»“</h5>
<p>é€šè¿‡è¿™ç§åŸºäºÂ <code>scale</code>Â å’ŒÂ <code>drawImageRect</code>Â çš„æ–¹æ¡ˆï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªéå¸¸ç†æƒ³çš„å®¢æˆ·ç«¯å‹ç¼©åŠŸèƒ½ï¼š</p>
<ul>
<li><strong>é€»è¾‘è§£è€¦</strong>ï¼šå‹ç¼©ä¸ç¼–è¾‘åŠŸèƒ½å®Œå…¨åˆ†ç¦»ï¼Œä»£ç æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤ã€‚</li>
<li><strong>é«˜åº¦å¯æ§</strong>ï¼šé€šè¿‡Â <code>ImageEditorConfig</code>ï¼Œå¼€å‘è€…å¯ä»¥åƒå¼€å…³ä¸€æ ·æ§åˆ¶å‹ç¼©ï¼Œå¹¶ç²¾ç¡®è°ƒæ•´å‹ç¼©æ¯”ã€‚</li>
<li><strong>è´¨é‡ä¼˜å…ˆ</strong>ï¼šåˆ©ç”¨Â <code>FilterQuality.high</code>Â ä¿è¯äº†å³ä½¿åœ¨è¾ƒå¤§æ¯”ä¾‹å‹ç¼©ä¸‹ï¼Œä¹Ÿèƒ½è·å¾—ä»¤äººæ»¡æ„çš„è§†è§‰æ•ˆæœã€‚</li>
<li><strong>æ€§èƒ½å‹å¥½</strong>ï¼šå³æ—¶é‡Šæ”¾æ— ç”¨çš„å¤§å›¾èµ„æºï¼Œä½“ç°äº†ä¼˜ç§€çš„å†…å­˜ç®¡ç†æ„è¯†ã€‚</li>
</ul>
<p>æœ€ç»ˆï¼Œè¿™ä¸ªâ€œç‚¹ç›ä¹‹ç¬”â€ä¸ä»…æå‡äº†ç”¨æˆ·ä½“éªŒï¼ˆæ›´å¿«çš„ä¸Šä¼ é€Ÿåº¦ï¼‰ï¼Œä¹Ÿå®å®åœ¨åœ¨åœ°ä¸ºåç«¯çš„æœåŠ¡å™¨å‡è½»äº†è´Ÿæ‹…ï¼Œå®ç°äº†åŒèµ¢ã€‚</p>
<h2 data-id="heading-11">å¿«é€Ÿå¼€å§‹</h2>
<p><code>flutter pub add flutter_img_editor</code></p>
<p>æˆ–è€…</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">dependencies:</span>
  <span class="hljs-attr">flutter_img_editor:</span> <span class="hljs-string">^0.0.3</span> <span class="hljs-comment"># ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬</span>
</code></pre>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'dart:io'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'dart:ui'</span> <span class="hljs-keyword">as</span> ui;

<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter_img_editor/image_editor.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:image_picker/image_picker.dart'</span>;

<span class="hljs-keyword">import</span> <span class="hljs-string">'more_page.dart'</span>;

<span class="hljs-keyword">void</span> main() {
  runApp(<span class="hljs-keyword">const</span> MyApp());
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">const</span> MyApp({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> MaterialApp(
      title: <span class="hljs-string">'Image Editor ç¤ºä¾‹'</span>,
      theme: ThemeData(
        colorScheme: ColorScheme.fromSeed(seedColor: Colors.deepPurple),
        useMaterial3: <span class="hljs-keyword">true</span>,
      ),
      home: <span class="hljs-keyword">const</span> MyHomePage(),
    );
  }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyHomePage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
  <span class="hljs-keyword">const</span> MyHomePage({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  State&lt;MyHomePage&gt; createState() =&gt; _MyHomePageState();
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_MyHomePageState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">MyHomePage</span>&gt; </span>{
  <span class="hljs-keyword">final</span> ImagePicker _picker = ImagePicker();

  <span class="hljs-comment">// ç›¸å†Œå›¾ç‰‡</span>
  ui.Image? _pickerOriginal;
  ui.Image? _pickerEdited;
  <span class="hljs-built_in">String?</span> _pickerTempPath;
  <span class="hljs-built_in">Duration?</span> _pickerTempDuration;

  <span class="hljs-comment">// æ˜¯å¦æ­£åœ¨é€‰æ‹©ç›¸å†Œå›¾ç‰‡</span>
  <span class="hljs-built_in">bool</span> _isPickingImage = <span class="hljs-keyword">false</span>;

  <span class="hljs-keyword">void</span> _showSnack(<span class="hljs-built_in">String</span> message) {
    <span class="hljs-keyword">if</span> (!mounted) <span class="hljs-keyword">return</span>;
    ScaffoldMessenger.of(context).showSnackBar(
      SnackBar(content: Text(message)),
    );
  }

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> Scaffold(
      appBar: AppBar(
        title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'Image Editor ç¤ºä¾‹'</span>),
        actions: [
          TextButton(
            onPressed: _openMorePage,
            style: TextButton.styleFrom(
              foregroundColor: Theme.of(context).colorScheme.onPrimary,
            ),
            child: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'æ›´å¤šç¤ºä¾‹'</span>),
          ),
        ],
      ),
      body: SafeArea(
        child: ListView(
          padding: <span class="hljs-keyword">const</span> EdgeInsets.all(<span class="hljs-number">16</span>),
          children: [
            _buildIntroCard(),
            _buildPickerDemo(),
            _buildPerformanceNote(),
          ],
        ),
      ),
    );
  }

  <span class="hljs-keyword">void</span> _openMorePage() {
    Navigator.push(
      context,
      MaterialPageRoute(
        builder: (_) =&gt; <span class="hljs-keyword">const</span> MorePage(),
      ),
    );
  }

  Card _buildIntroCard() {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> Card(
      child: Padding(
        padding: EdgeInsets.all(<span class="hljs-number">16</span>),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text(
              <span class="hljs-string">'æœ¬é¡µèšç„¦ image_picker ç›¸å†Œæµç¨‹ï¼Œæ¼”ç¤ºå¦‚ä½•å¿«é€Ÿæ‰“å¼€å›¾ç‰‡ç¼–è¾‘å™¨å¹¶ä¿å­˜ç¼–è¾‘ç»“æœã€‚'</span>,
            ),
            SizedBox(height: <span class="hljs-number">8</span>),
            Text(
              <span class="hljs-string">'æƒ³äº†è§£å†…ç½® Assetã€ç›¸æœºæ‹ç…§ä¸ç½‘ç»œä¸‹è½½åœºæ™¯ï¼Œè¯·ç‚¹å‡»å³ä¸Šè§’â€œæ›´å¤šç¤ºä¾‹â€ã€‚'</span>,
              style: TextStyle(color: Colors.black54),
            ),
          ],
        ),
      ),
    );
  }

  Card _buildPickerDemo() {
    <span class="hljs-keyword">return</span> Card(
      child: Padding(
        padding: <span class="hljs-keyword">const</span> EdgeInsets.all(<span class="hljs-number">16</span>),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            _buildHeader(
              title: <span class="hljs-string">'æ¡ˆä¾‹ï¼šImage Picker ç›¸å†Œ'</span>,
              actions: [
                ElevatedButton.icon(
                  onPressed: _isPickingImage ? <span class="hljs-keyword">null</span> : _handlePickerEdit,
                  icon: <span class="hljs-keyword">const</span> Icon(Icons.photo_library),
                  label: Text(_isPickingImage ? <span class="hljs-string">'å¤„ç†ä¸­...'</span> : <span class="hljs-string">'é€‰æ‹©å¹¶ç¼–è¾‘'</span>),
                ),
              ],
            ),
            <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">8</span>),
            <span class="hljs-keyword">const</span> Text(
              <span class="hljs-string">'ç›´æ¥é€šè¿‡ image_picker é€‰æ‹©æœ¬åœ°ç›¸å†Œå›¾ç‰‡åè¿›å…¥ç¼–è¾‘å™¨ï¼Œ'</span>
              <span class="hljs-string">'å±•ç¤ºå¦‚ä½•ä¸å¤–éƒ¨ç«¯åˆ°ç«¯æ•´åˆã€‚'</span>,
            ),
            <span class="hljs-keyword">if</span> (_isPickingImage)
              <span class="hljs-keyword">const</span> Padding(
                padding: EdgeInsets.only(top: <span class="hljs-number">12</span>),
                child: LinearProgressIndicator(minHeight: <span class="hljs-number">3</span>),
              ),
            <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">16</span>),
            Row(
              crossAxisAlignment: CrossAxisAlignment.start,
              children: [
                _buildImagePanel(label: <span class="hljs-string">'åŸå§‹'</span>, image: _pickerOriginal),
                <span class="hljs-keyword">const</span> SizedBox(width: <span class="hljs-number">16</span>),
                _buildImagePanel(label: <span class="hljs-string">'ui.Image'</span>, image: _pickerEdited),
                <span class="hljs-keyword">const</span> SizedBox(width: <span class="hljs-number">16</span>),
                _buildImagePanelFromPath(label: <span class="hljs-string">'path'</span>, path: _pickerTempPath),
              ],
            ),
            <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">12</span>),
            _buildPixelStats(_pickerOriginal, _pickerEdited),
            <span class="hljs-keyword">if</span> (_pickerTempPath != <span class="hljs-keyword">null</span>) ...[
              <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">16</span>),
              Text(
                <span class="hljs-string">'ä¸´æ—¶æ–‡ä»¶è·¯å¾„ (saveImageToTempFile):'</span>,
                style: Theme.of(context).textTheme.titleSmall,
              ),
              <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">4</span>),
              SelectableText(_pickerTempPath!),
              Text(
                <span class="hljs-string">'è€—æ—¶: <span class="hljs-subst">${_pickerTempDuration != <span class="hljs-keyword">null</span> ? <span class="hljs-string">'<span class="hljs-subst">${_pickerTempDuration!.inMilliseconds}</span> ms'</span> : <span class="hljs-string">'--'</span>}</span>'</span>,
              ),
            ],
          ],
        ),
      ),
    );
  }

  Widget _buildHeader({
    <span class="hljs-keyword">required</span> <span class="hljs-built_in">String</span> title,
    <span class="hljs-keyword">required</span> <span class="hljs-built_in">List</span>&lt;Widget&gt; actions,
  }) {
    <span class="hljs-keyword">return</span> Row(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Expanded(
          child: Text(
            title,
            style: Theme.of(context).textTheme.titleMedium?.copyWith(
                  fontWeight: FontWeight.w600,
                ),
          ),
        ),
        Wrap(
          spacing: <span class="hljs-number">8</span>,
          runSpacing: <span class="hljs-number">8</span>,
          children: actions,
        ),
      ],
    );
  }

  Widget _buildImagePanel({
    <span class="hljs-keyword">required</span> <span class="hljs-built_in">String</span> label,
    <span class="hljs-keyword">required</span> ui.Image? image,
  }) {
    <span class="hljs-keyword">final</span> TextStyle? captionStyle =
        Theme.of(context).textTheme.labelMedium?.copyWith(
              color: Colors.grey.shade600,
            );
    <span class="hljs-keyword">return</span> Expanded(
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          Text(label, style: Theme.of(context).textTheme.bodySmall),
          <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">6</span>),
          Container(
            height: <span class="hljs-number">180</span>,
            decoration: BoxDecoration(
              borderRadius: BorderRadius.circular(<span class="hljs-number">12</span>),
              color: Colors.grey.shade100,
              border: Border.all(color: Colors.grey.shade300),
            ),
            child: ClipRRect(
              borderRadius: BorderRadius.circular(<span class="hljs-number">12</span>),
              child: image != <span class="hljs-keyword">null</span>
                  ? RawImage(
                      image: image,
                      fit: BoxFit.contain,
                    )
                  : Center(
                      child: Text(
                        <span class="hljs-string">'æš‚æ— å›¾ç‰‡'</span>,
                        style: captionStyle,
                      ),
                    ),
            ),
          ),
          <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">6</span>),
          Text(<span class="hljs-string">'åƒç´ : <span class="hljs-subst">${_pixelSize(image)}</span>'</span>, style: captionStyle),
        ],
      ),
    );
  }

  Widget _buildImagePanelFromPath({
    <span class="hljs-keyword">required</span> <span class="hljs-built_in">String</span> label,
    <span class="hljs-keyword">required</span> <span class="hljs-built_in">String?</span> path,
  }) {
    <span class="hljs-keyword">final</span> captionStyle = Theme.of(context).textTheme.labelMedium?.copyWith(
          color: Colors.grey.shade600,
        );
    Widget child;
    <span class="hljs-keyword">if</span> (path != <span class="hljs-keyword">null</span>) {
      child = Image.file(
        File(path),
        fit: BoxFit.contain,
      );
    } <span class="hljs-keyword">else</span> {
      child = Center(
        child: Text(
          <span class="hljs-string">'æš‚æ— å›¾ç‰‡'</span>,
          style: captionStyle,
        ),
      );
    }
    <span class="hljs-keyword">return</span> Expanded(
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          Text(label, style: Theme.of(context).textTheme.bodySmall),
          <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">6</span>),
          Container(
            height: <span class="hljs-number">180</span>,
            decoration: BoxDecoration(
              borderRadius: BorderRadius.circular(<span class="hljs-number">12</span>),
              color: Colors.grey.shade100,
              border: Border.all(color: Colors.grey.shade300),
            ),
            child: ClipRRect(
              borderRadius: BorderRadius.circular(<span class="hljs-number">12</span>),
              child: child,
            ),
          ),
          <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">6</span>),
          <span class="hljs-keyword">if</span> (path != <span class="hljs-keyword">null</span>) Text(<span class="hljs-string">'æ–‡ä»¶å¤§å°: <span class="hljs-subst">${_fileSize(path)}</span>'</span>, style: captionStyle),
        ],
      ),
    );
  }

  Widget _buildPixelStats(ui.Image? original, ui.Image? edited) {
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> delta = _pixelDelta(original, edited);
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> originalMemory = _memoryUsage(original);
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> editedMemory = _memoryUsage(edited);
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> memoryDelta = _memoryDelta(original, edited);
    <span class="hljs-keyword">return</span> Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Text(
          <span class="hljs-string">'åƒç´ å¯¹æ¯”'</span>,
          style: Theme.of(context).textTheme.titleSmall,
        ),
        <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">4</span>),
        Text(<span class="hljs-string">'åŸå§‹: <span class="hljs-subst">${_pixelSize(original)}</span>'</span>),
        Text(<span class="hljs-string">'ç¼–è¾‘å: <span class="hljs-subst">${_pixelSize(edited)}</span>'</span>),
        <span class="hljs-keyword">if</span> (delta.isNotEmpty) Text(delta),
        <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">8</span>),
        Text(
          <span class="hljs-string">'å†…å­˜ä¼°ç®—ï¼ˆRGBA 32bitï¼‰'</span>,
          style: Theme.of(context).textTheme.titleSmall,
        ),
        <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">4</span>),
        Text(<span class="hljs-string">'åŸå§‹: <span class="hljs-subst">$originalMemory</span>'</span>),
        Text(<span class="hljs-string">'ç¼–è¾‘å: <span class="hljs-subst">$editedMemory</span>'</span>),
        <span class="hljs-keyword">if</span> (memoryDelta.isNotEmpty) Text(memoryDelta),
      ],
    );
  }

  <span class="hljs-built_in">String</span> _pixelSize(ui.Image? image) {
    <span class="hljs-keyword">if</span> (image == <span class="hljs-keyword">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">'--'</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-string">'<span class="hljs-subst">${image.width}</span> x <span class="hljs-subst">${image.height}</span>'</span>;
  }

  <span class="hljs-built_in">String</span> _pixelDelta(ui.Image? original, ui.Image? edited) {
    <span class="hljs-keyword">if</span> (original == <span class="hljs-keyword">null</span> || edited == <span class="hljs-keyword">null</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
    }
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">int</span> dw = edited.width - original.width;
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">int</span> dh = edited.height - original.height;
    <span class="hljs-built_in">String</span> fmt(<span class="hljs-built_in">int</span> value) =&gt; value &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">'+<span class="hljs-subst">$value</span>'</span> : value.toString();
    <span class="hljs-keyword">if</span> (dw == <span class="hljs-number">0</span> &amp;&amp; dh == <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">'å˜åŒ–: æ—  (åƒç´ ä¿æŒä¸å˜)'</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-string">'å˜åŒ–: å®½åº¦ <span class="hljs-subst">${fmt(dw)}</span>ï¼Œé«˜åº¦ <span class="hljs-subst">${fmt(dh)}</span>'</span>;
  }

  <span class="hljs-built_in">String</span> _memoryUsage(ui.Image? image) {
    <span class="hljs-keyword">if</span> (image == <span class="hljs-keyword">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">'--'</span>;
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> bytes = image.width * image.height * <span class="hljs-number">4</span>;
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> mb = bytes / (<span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-string">'<span class="hljs-subst">${mb.toStringAsFixed(<span class="hljs-number">2</span>)}</span> MB'</span>;
  }

  <span class="hljs-built_in">String</span> _memoryDelta(ui.Image? original, ui.Image? edited) {
    <span class="hljs-keyword">if</span> (original == <span class="hljs-keyword">null</span> || edited == <span class="hljs-keyword">null</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
    }
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> originalPixels = original.width * original.height.toDouble();
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> editedPixels = edited.width * edited.height.toDouble();
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> diffBytes = (editedPixels - originalPixels) * <span class="hljs-number">4</span>;
    <span class="hljs-keyword">if</span> (diffBytes == <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">'å†…å­˜å˜åŒ–: æ—  (åƒç´ ç‚¹æ•°é‡ä¸€è‡´)'</span>;
    }
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> diffMb = diffBytes / (<span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>);
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> sign = diffMb &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">'+'</span> : <span class="hljs-string">''</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-string">'å†…å­˜å˜åŒ–: <span class="hljs-subst">$sign</span><span class="hljs-subst">${diffMb.toStringAsFixed(<span class="hljs-number">2</span>)}</span> MB'</span>;
  }

  <span class="hljs-built_in">String</span> _fileSize(<span class="hljs-built_in">String</span> path) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">final</span> <span class="hljs-built_in">int</span> bytes = File(path).lengthSync();
      <span class="hljs-keyword">if</span> (bytes &lt; <span class="hljs-number">1024</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">'<span class="hljs-subst">$bytes</span> B'</span>;
      }
      <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> kb = bytes / <span class="hljs-number">1024</span>;
      <span class="hljs-keyword">if</span> (kb &lt; <span class="hljs-number">1024</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">'<span class="hljs-subst">${kb.toStringAsFixed(<span class="hljs-number">1</span>)}</span> KB'</span>;
      }
      <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> mb = kb / <span class="hljs-number">1024</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-string">'<span class="hljs-subst">${mb.toStringAsFixed(<span class="hljs-number">2</span>)}</span> MB'</span>;
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">'--'</span>;
    }
  }

  Future&lt;<span class="hljs-keyword">void</span>&gt; _handlePickerEdit() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">if</span> (_isPickingImage) <span class="hljs-keyword">return</span>;
    setState(() {
      _isPickingImage = <span class="hljs-keyword">true</span>;
    });
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">final</span> XFile? picked = <span class="hljs-keyword">await</span> _picker.pickImage(source: ImageSource.gallery);
      <span class="hljs-keyword">if</span> (picked == <span class="hljs-keyword">null</span>) {
        <span class="hljs-keyword">return</span>;
      }
      <span class="hljs-keyword">final</span> ui.Image image = <span class="hljs-keyword">await</span> loadImageFromFile(picked.path);
      <span class="hljs-keyword">if</span> (!mounted) <span class="hljs-keyword">return</span>;
      setState(() {
        _pickerOriginal = image;
        _pickerEdited = <span class="hljs-keyword">null</span>;
      });
      <span class="hljs-keyword">final</span> ui.Image? result = <span class="hljs-keyword">await</span> _openEditor(
        image,
        config: <span class="hljs-keyword">const</span> ImageEditorConfig(
          topToolbar: TopToolbarConfig(
            titleText: <span class="hljs-string">'ç›¸å†Œå›¾ç‰‡ç¼–è¾‘'</span>,
            cancelText: <span class="hljs-string">'å–æ¶ˆ'</span>,
            confirmText: <span class="hljs-string">'å®Œæˆ'</span>,
          ),
          compression: ImageCompressionConfig(
            enabled: <span class="hljs-keyword">true</span>,
            scale: <span class="hljs-number">0.3</span>,
          ),
        ),
      );
      <span class="hljs-keyword">if</span> (!mounted || result == <span class="hljs-keyword">null</span>) <span class="hljs-keyword">return</span>;
      setState(() {
        _pickerEdited = result;
      });
      <span class="hljs-keyword">await</span> _processPickerResult(result);
      <span class="hljs-keyword">await</span> _logImageBytes(result, <span class="hljs-string">'picker'</span>);
    } <span class="hljs-keyword">catch</span> (error) {
      _showSnack(<span class="hljs-string">'é€‰æ‹©å›¾ç‰‡å¤±è´¥: <span class="hljs-subst">$error</span>'</span>);
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-keyword">if</span> (!mounted) <span class="hljs-keyword">return</span>;
      setState(() {
        _isPickingImage = <span class="hljs-keyword">false</span>;
      });
    }
  }

  Future&lt;ui.Image?&gt; _openEditor(
    ui.Image image, {
    ImageEditorConfig? config,
  }) {
    <span class="hljs-keyword">return</span> Navigator.push&lt;ui.Image?&gt;(
      context,
      MaterialPageRoute(
        builder: (context) =&gt; ImageEditor(
          image: image,
          config: config ?? <span class="hljs-keyword">const</span> ImageEditorConfig(),
        ),
      ),
    );
  }

  Future&lt;<span class="hljs-keyword">void</span>&gt; _logImageBytes(ui.Image image, <span class="hljs-built_in">String</span> tag) <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">final</span> bytes = <span class="hljs-keyword">await</span> convertUiImageToBytes(image);
    <span class="hljs-keyword">if</span> (bytes == <span class="hljs-keyword">null</span>) <span class="hljs-keyword">return</span>;
    <span class="hljs-comment">// æ­¤å¤„ä»…æ¼”ç¤ºå¦‚ä½•è·å–å¯ç›´æ¥ç”¨äºä¸Šä¼ çš„å­—èŠ‚æ•°æ®ï¼Œå¯æ›¿æ¢ä¸ºå®é™…ç½‘ç»œè¯·æ±‚ã€‚</span>
    debugPrint(<span class="hljs-string">'[image_editor_demo][<span class="hljs-subst">$tag</span>] export bytes=<span class="hljs-subst">${bytes.lengthInBytes}</span>'</span>);
  }

  <span class="hljs-comment">/// <span class="markdown">å¤„ç†ç›¸å†Œå›¾ç‰‡ç¼–è¾‘ç»“æœä¸ºä¸´æ—¶æ–‡ä»¶</span></span>
  Future&lt;<span class="hljs-keyword">void</span>&gt; _processPickerResult(ui.Image result) <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">Stopwatch</span> stopwatch = <span class="hljs-built_in">Stopwatch</span>()..start();
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">String?</span> tempPath = <span class="hljs-keyword">await</span> saveImageToTempFile(result);
    stopwatch.stop();

    setState(() {
      _pickerTempPath = tempPath;
      _pickerTempDuration = stopwatch.elapsed;
    });

    <span class="hljs-keyword">if</span> (tempPath == <span class="hljs-keyword">null</span>) {
      _showSnack(<span class="hljs-string">'å›¾ç‰‡ä¿å­˜å¤±è´¥'</span>);
    } <span class="hljs-keyword">else</span> {
      debugPrint(<span class="hljs-string">'[image_editor_demo][picker] tempPath=<span class="hljs-subst">$tempPath</span> in <span class="hljs-subst">${stopwatch.elapsedMilliseconds}</span>ms'</span>);
    }
  }

  Card _buildPerformanceNote() {
    <span class="hljs-keyword">return</span> Card(
      color: Colors.blueGrey.shade50,
      child: <span class="hljs-keyword">const</span> Padding(
        padding: EdgeInsets.all(<span class="hljs-number">16</span>),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text(
              <span class="hljs-string">'æ€§èƒ½æç¤º'</span>,
              style: TextStyle(fontSize: <span class="hljs-number">16</span>, fontWeight: FontWeight.w600),
            ),
            SizedBox(height: <span class="hljs-number">12</span>),
            Text(
              <span class="hljs-string">'Â· `ui.Image` åœ¨ Flutter ä¸­ä»¥åŸå§‹ RGBA 32 ä½åƒç´ å­˜å‚¨ï¼Œå†…å­˜å ç”¨çº¦ç­‰äºåƒç´ æ€»æ•° Ã— 4 å­—èŠ‚ï¼Œè¯»å–é€Ÿåº¦å¿«ä½†å ç”¨é«˜ã€‚\n'</span>
              <span class="hljs-string">'Â· è‹¥ç›®æ ‡æ˜¯å‹ç¼©å›¾ç‰‡ä½“ç§¯ï¼Œå»ºè®®åœ¨è£å‰ªåè¿›ä¸€æ­¥æŒ‰éœ€ç¼©æ”¾ï¼Œå¹¶ä½¿ç”¨ JPG/PNG/WebP ç¼–ç ä¿å­˜æˆ–ä¸Šä¼ ã€‚\n'</span>
              <span class="hljs-string">'Â· å¯¹äºæ‰¹é‡å‹ç¼©ï¼Œå¯ç»“åˆ `ui.PictureRecorder` æˆ–ç¬¬ä¸‰æ–¹å›¾åƒå¤„ç†åº“ï¼ˆä¾‹å¦‚ `image` åŒ…ï¼‰åœ¨åå°å¤„ç†ï¼Œé™ä½å†…å­˜å³°å€¼ã€‚\n'</span>
              <span class="hljs-string">'Â· å¯é€šè¿‡ Flutter DevTools çš„ Memory é¢æ¿ï¼Œæˆ–åœ¨æ§åˆ¶å°æ‰“å° `(image.width * image.height * 4 / 1024 / 1024)` è§‚å¯Ÿå®æ—¶å†…å­˜å ç”¨ï¼Œå¸®åŠ©è¯„ä¼°æ–¹æ¡ˆã€‚'</span>,
            ),
          ],
        ),
      ),
    );
  }
}
</code></pre>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxinqingaa%2Fimage_editor" target="_blank" title="https://github.com/xinqingaa/image_editor" ref="nofollow noopener noreferrer">github</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Fflutter_img_editor" target="_blank" title="https://pub.dev/packages/flutter_img_editor" ref="nofollow noopener noreferrer">pubdev</a></li>
</ul>
<blockquote>
<p>æ¬¢è¿å¤§å®¶ Star å’Œ Forkã€‚å¦‚æœä½ å¯¹ Flutter å›¾å½¢å›¾åƒå¤„ç†æœ‰å…´è¶£ï¼Œæˆ–è€…åœ¨å¯»æ‰¾ä¸€ä¸ªå¯ä»¥è½»æ¾é›†æˆåˆ°è‡ªå·±é¡¹ç›®ä¸­çš„å›¾ç‰‡ç¼–è¾‘å™¨ï¼Œå¸Œæœ›æˆ‘çš„è¿™ä¸ªè½®å­èƒ½å¸®åˆ°ä½ ã€‚
æ„Ÿè°¢ä½ çš„é˜…è¯»ï¼å¦‚æœè§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¸å¦¨ç‚¹ä¸ªèµå§ï¼</p>
</blockquote>
<h2 data-id="heading-12">æ€»ç»“å’Œå±•æœ›</h2>
<p>ä»ä¸€ä¸ªæƒ³æ³•ï¼Œåˆ°ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡çš„å›¾ç‰‡ç¼–è¾‘å™¨ï¼Œè¿™ä¸ªè¿‡ç¨‹å……æ»¡äº†æŒ‘æˆ˜ï¼Œä¹Ÿå……æ»¡äº†ä¹è¶£ã€‚å›é¡¾æ•´ä¸ªé¡¹ç›®ï¼Œæˆ‘è®¤ä¸ºæœ‰å‡ ç‚¹å…³é”®çš„æ”¶è·ï¼š</p>
<ol>
<li><strong>æ¶æ„å…ˆè¡Œ</strong>ï¼šè‰¯å¥½çš„åˆ†å±‚å’Œæ¨¡å—åŒ–è®¾è®¡æ˜¯åº”å¯¹å¤æ‚åº¦çš„ä¸äºŒæ³•é—¨ã€‚å°†èŒè´£æ‹†åˆ†åˆ°ç‹¬ç«‹çš„Â <code>Handler</code>Â å’ŒÂ <code>Manager</code>Â ä¸­ï¼Œè®©ä»£ç é€»è¾‘æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚</li>
<li><strong>æ‹¥æŠ±åº•å±‚API</strong>ï¼š<code>CustomPaint</code>Â å’ŒÂ <code>Matrix4</code>Â è™½ç„¶æ¦‚å¿µä¸Šæœ‰äº›æŠ½è±¡ï¼Œä½†å®ƒä»¬æ˜¯å®ç°é«˜çº§è‡ªå®šä¹‰UIå’Œå¤æ‚å›¾å½¢æ“ä½œçš„åˆ©å™¨ã€‚æ·±å…¥ç†è§£å®ƒä»¬ï¼Œèƒ½è®©ä½ åœ¨ Flutter çš„ä¸–ç•Œé‡Œæ‹¥æœ‰æ›´å¤§çš„åˆ›é€ è‡ªç”±ã€‚</li>
<li><strong>å…³æ³¨æ ¸å¿ƒé—®é¢˜</strong>ï¼šé«˜ä¿çœŸå¤„ç†æ˜¯å›¾ç‰‡ç¼–è¾‘å™¨çš„çµé­‚ã€‚å§‹ç»ˆå›´ç»•â€œå¦‚ä½•æ“ä½œåŸå§‹æ•°æ®â€æ¥æ€è€ƒï¼Œè€Œä¸æ˜¯â€œå¦‚ä½•ä¿®æ”¹å±å¹•æ˜¾ç¤ºâ€ï¼Œæ˜¯ä¿è¯æœ€ç»ˆè¾“å‡ºè´¨é‡çš„å…³é”®ã€‚</li>
</ol>
<p>å½“ç„¶ï¼Œè¿™ä¸ªç¼–è¾‘å™¨è¿˜æœ‰å¾ˆå¤šå¯ä»¥å®Œå–„çš„åœ°æ–¹ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šå¯¹äºè¶…å¤§å°ºå¯¸çš„å›¾ç‰‡ï¼Œå¯ä»¥å¼•å…¥ç“¦ç‰‡åŒ–æ¸²æŸ“æŠ€æœ¯ã€‚</li>
<li><strong>åŠŸèƒ½æ‰©å±•</strong>ï¼šå¢åŠ ç”»ç¬”ã€é©¬èµ›å…‹ã€æ»¤é•œç­‰æ›´ä¸°å¯Œçš„ç¼–è¾‘å·¥å…·ã€‚</li>
<li><strong>æ‰‹åŠ¿ä½“éªŒ</strong>ï¼šæ”¯æŒåŒæŒ‡æ—‹è½¬å’Œç¼©æ”¾æ–‡æœ¬å±‚ç­‰æ›´ç²¾ç»†çš„äº¤äº’ã€‚</li>
</ul>
<h2 data-id="heading-13">å¾€æœŸæ–‡ç« ä»‹ç»</h2>
<h3 data-id="heading-14">Flutter å…¨é“¾è·¯ç›‘æ§ SDK</h3>
<ul>
<li><a href="https://juejin.cn/post/7564977973260173338" target="_blank" title="https://juejin.cn/post/7564977973260173338">æ˜é‡‘æ–‡ç« </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Fflutter_monitor_sdk" target="_blank" title="https://pub.dev/packages/flutter_monitor_sdk" ref="nofollow noopener noreferrer">pubdev</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxinqingaa%2Fflutter_monitor_sdk" target="_blank" title="https://github.com/xinqingaa/flutter_monitor_sdk" ref="nofollow noopener noreferrer">github</a></li>
</ul>
<h3 data-id="heading-15">Flutter å…¨åœºæ™¯å¼¹æ¡†</h3>
<ul>
<li><a href="https://juejin.cn/post/7538324216594726950" target="_blank" title="https://juejin.cn/post/7538324216594726950">æ˜é‡‘æ–‡ç« </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Funified_popups" target="_blank" title="https://pub.dev/packages/unified_popups" ref="nofollow noopener noreferrer">pubdev</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxinqingaa%2Funified_popups" target="_blank" title="https://github.com/xinqingaa/unified_popups" ref="nofollow noopener noreferrer">github</a></li>
</ul>
<h3 data-id="heading-16">Flutteræ—¥å†ç»„ä»¶</h3>
<ul>
<li><a href="https://juejin.cn/post/7531976064496123931" target="_blank" title="https://juejin.cn/post/7531976064496123931">æ˜é‡‘æ–‡ç« </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Fomni_calendar_view" target="_blank" title="https://pub.dev/packages/omni_calendar_view" ref="nofollow noopener noreferrer">pubdev</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxinqingaa%2Fomni_calendar_view" target="_blank" title="https://github.com/xinqingaa/omni_calendar_view" ref="nofollow noopener noreferrer">github</a></li>
</ul>
<h3 data-id="heading-17">æ—¥æœŸé€‰æ‹©å™¨</h3>
<ul>
<li><a href="https://juejin.cn/post/7524159959480991753" target="_blank" title="https://juejin.cn/post/7524159959480991753">æ˜é‡‘æ–‡ç« </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Fomni_date_picker" target="_blank" title="https://pub.dev/packages/omni_date_picker" ref="nofollow noopener noreferrer">pubdev</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxinqingaa%2Fomni_date_picker" target="_blank" title="https://github.com/xinqingaa/omni_date_picker" ref="nofollow noopener noreferrer">github</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vueç»„ä»¶é€šä¿¡ä¸å†éš¾ï¼è¿™8ç§æ–¹å¼è®©ä½ å½»åº•ææ‡‚çˆ¶å­å…„å¼Ÿä¼ å€¼]]></title>    <link>https://juejin.cn/post/7570923924365180991</link>    <guid>https://juejin.cn/post/7570923924365180991</guid>    <pubDate>2025-11-10T23:29:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570923924365180991" data-draft-id="7570899512782929983" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vueç»„ä»¶é€šä¿¡ä¸å†éš¾ï¼è¿™8ç§æ–¹å¼è®©ä½ å½»åº•ææ‡‚çˆ¶å­å…„å¼Ÿä¼ å€¼"/> <meta itemprop="keywords" content="Vue.js,å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-10T23:29:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‰¯å±±æœ‰é£æ¥"/> <meta itemprop="url" content="https://juejin.cn/user/3940246036939358"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vueç»„ä»¶é€šä¿¡ä¸å†éš¾ï¼è¿™8ç§æ–¹å¼è®©ä½ å½»åº•ææ‡‚çˆ¶å­å…„å¼Ÿä¼ å€¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3940246036939358/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‰¯å±±æœ‰é£æ¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T23:29:25.000Z" title="Mon Nov 10 2025 23:29:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    28
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æ˜¯ä¸æ˜¯ç»å¸¸é‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼Ÿçˆ¶ç»„ä»¶çš„æ•°æ®è¦ä¼ ç»™å­ç»„ä»¶ï¼Œå­ç»„ä»¶çš„äº‹ä»¶è¦é€šçŸ¥çˆ¶ç»„ä»¶ï¼Œå…„å¼Ÿç»„ä»¶ä¹‹é—´è¦å…±äº«çŠ¶æ€...æ¯æ¬¡å†™Vueç»„ä»¶é€šä¿¡éƒ½è§‰å¾—å¤´å¤§ï¼Œä¸çŸ¥é“ç”¨å“ªç§æ–¹å¼æœ€åˆé€‚ï¼Ÿ</p>
<p>åˆ«æ‹…å¿ƒï¼ä»Šå¤©æˆ‘å°±å¸¦ä½ å½»åº•ææ‡‚Vueç»„ä»¶é€šä¿¡çš„8ç§æ ¸å¿ƒæ–¹å¼ï¼Œæ¯ç§æ–¹å¼éƒ½æœ‰è¯¦ç»†çš„ä»£ç ç¤ºä¾‹å’Œé€‚ç”¨åœºæ™¯åˆ†æã€‚çœ‹å®Œè¿™ç¯‡æ–‡ç« ï¼Œä½ å°±èƒ½æ ¹æ®å…·ä½“ä¸šåŠ¡åœºæ™¯é€‰æ‹©æœ€åˆé€‚çš„é€šä¿¡æ–¹æ¡ˆï¼Œå†ä¹Ÿä¸ç”¨ä¸ºç»„ä»¶é—´ä¼ å€¼å‘æ„äº†ï¼</p>
<h2 data-id="heading-0">Propsï¼šæœ€åŸºç¡€çš„çˆ¶å­é€šä¿¡</h2>
<p>Propsæ˜¯Vueä¸­æœ€åŸºç¡€ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„çˆ¶å­ç»„ä»¶é€šä¿¡æ–¹å¼ã€‚çˆ¶ç»„ä»¶é€šè¿‡å±æ€§å‘ä¸‹ä¼ é€’æ•°æ®ï¼Œå­ç»„ä»¶é€šè¿‡propsé€‰é¡¹æ¥æ”¶ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å­ç»„ä»¶ ChildComponent.vue</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å­ç»„ä»¶æ¥æ”¶åˆ°çš„æ¶ˆæ¯ï¼š{{ message }}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç”¨æˆ·å¹´é¾„ï¼š{{ userInfo.age }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-comment">// å®šä¹‰propsï¼Œå¯ä»¥æŒ‡å®šç±»å‹å’Œé»˜è®¤å€¼</span>
  <span class="hljs-attr">props</span>: {
    <span class="hljs-attr">message</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>  <span class="hljs-comment">// å¿…é¡»ä¼ é€’è¿™ä¸ªprop</span>
    },
    <span class="hljs-attr">userInfo</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Object</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> ({})  <span class="hljs-comment">// é»˜è®¤ç©ºå¯¹è±¡</span>
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="hljs-comment">// çˆ¶ç»„ä»¶ ParentComponent.vue</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">child-component</span> 
      <span class="hljs-attr">:message</span>=<span class="hljs-string">"parentMessage"</span> 
      <span class="hljs-attr">:user-info</span>=<span class="hljs-string">"userData"</span>
    /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ChildComponent</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./ChildComponent.vue'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">components</span>: { <span class="hljs-title class_">ChildComponent</span> },
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">parentMessage</span>: <span class="hljs-string">'æ¥è‡ªçˆ¶ç»„ä»¶çš„é—®å€™'</span>,
      <span class="hljs-attr">userData</span>: {
        <span class="hljs-attr">name</span>: <span class="hljs-string">'å°æ˜'</span>,
        <span class="hljs-attr">age</span>: <span class="hljs-number">25</span>
      }
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šç®€å•çš„çˆ¶å­ç»„ä»¶æ•°æ®ä¼ é€’ï¼Œæ•°æ®æµæ¸…æ™°æ˜ç¡®ã€‚ä½†è¦æ³¨æ„ï¼Œpropsæ˜¯å•å‘æ•°æ®æµï¼Œå­ç»„ä»¶ä¸èƒ½ç›´æ¥ä¿®æ”¹propsã€‚</p>
<h2 data-id="heading-1">$emitï¼šå­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡</h2>
<p>å½“å­ç»„ä»¶éœ€è¦å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®æˆ–è§¦å‘çˆ¶ç»„ä»¶çš„æŸä¸ªæ–¹æ³•æ—¶ï¼Œå°±éœ€è¦ç”¨åˆ°$emitã€‚å­ç»„ä»¶é€šè¿‡è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼Œçˆ¶ç»„ä»¶é€šè¿‡v-onç›‘å¬è¿™äº›äº‹ä»¶ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å­ç»„ä»¶ SubmitButton.vue</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleClick"</span>&gt;</span>
    æäº¤è¡¨å•
  <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼Œå¹¶ä¼ é€’æ•°æ®</span>
      <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">'form-submit'</span>, {
        <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(),
        <span class="hljs-attr">formData</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">formData</span>
      })
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="hljs-comment">// çˆ¶ç»„ä»¶ FormContainer.vue</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">submit-button</span> @<span class="hljs-attr">form-submit</span>=<span class="hljs-string">"handleFormSubmit"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">SubmitButton</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./SubmitButton.vue'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">components</span>: { <span class="hljs-title class_">SubmitButton</span> },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">handleFormSubmit</span>(<span class="hljs-params">payload</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¥æ”¶åˆ°å­ç»„ä»¶çš„æ•°æ®ï¼š'</span>, payload)
      <span class="hljs-comment">// è¿™é‡Œå¯ä»¥å¤„ç†è¡¨å•æäº¤é€»è¾‘</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">submitToServer</span>(payload.<span class="hljs-property">formData</span>)
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šå­ç»„ä»¶éœ€è¦é€šçŸ¥çˆ¶ç»„ä»¶æŸä¸ªäº‹ä»¶å‘ç”Ÿï¼Œæˆ–è€…éœ€è¦ä¼ é€’æ•°æ®ç»™çˆ¶ç»„ä»¶å¤„ç†ã€‚</p>
<h2 data-id="heading-2">refï¼šç›´æ¥è®¿é—®å­ç»„ä»¶å®ä¾‹</h2>
<p>é€šè¿‡refå±æ€§ï¼Œçˆ¶ç»„ä»¶å¯ä»¥ç›´æ¥è®¿é—®å­ç»„ä»¶çš„å®ä¾‹ï¼Œè°ƒç”¨å…¶æ–¹æ³•æˆ–è®¿é—®å…¶æ•°æ®ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å­ç»„ä»¶ CustomInput.vue</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
    <span class="hljs-attr">ref</span>=<span class="hljs-string">"inputRef"</span> 
    <span class="hljs-attr">v-model</span>=<span class="hljs-string">"inputValue"</span> 
    <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>
  /&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">inputValue</span>: <span class="hljs-string">''</span>
    }
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-comment">// å­ç»„ä»¶çš„è‡ªå®šä¹‰æ–¹æ³•</span>
    <span class="hljs-title function_">focus</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">inputRef</span>.<span class="hljs-title function_">focus</span>()
    },
    <span class="hljs-title function_">clear</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputValue</span> = <span class="hljs-string">''</span>
    },
    <span class="hljs-title function_">getValue</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputValue</span>
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="hljs-comment">// çˆ¶ç»„ä»¶ ParentComponent.vue</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">custom-input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"myInput"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleFocus"</span>&gt;</span>èšç„¦è¾“å…¥æ¡†<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleClear"</span>&gt;</span>æ¸…ç©ºè¾“å…¥æ¡†<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">CustomInput</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./CustomInput.vue'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">components</span>: { <span class="hljs-title class_">CustomInput</span> },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">handleFocus</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// é€šè¿‡refç›´æ¥è°ƒç”¨å­ç»„ä»¶çš„æ–¹æ³•</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">myInput</span>.<span class="hljs-title function_">focus</span>()
    },
    <span class="hljs-title function_">handleClear</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// è°ƒç”¨å­ç»„ä»¶çš„æ¸…ç©ºæ–¹æ³•</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">myInput</span>.<span class="hljs-title function_">clear</span>()
      
      <span class="hljs-comment">// ä¹Ÿå¯ä»¥ç›´æ¥è®¿é—®å­ç»„ä»¶çš„æ•°æ®ï¼ˆä¸æ¨èï¼‰</span>
      <span class="hljs-comment">// this.$refs.myInput.inputValue = ''</span>
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šéœ€è¦ç›´æ¥æ“ä½œå­ç»„ä»¶çš„DOMå…ƒç´ æˆ–è°ƒç”¨å­ç»„ä»¶æ–¹æ³•çš„åœºæ™¯ã€‚ä½†è¦è°¨æ…ä½¿ç”¨ï¼Œé¿å…ç ´åç»„ä»¶çš„å°è£…æ€§ã€‚</p>
<h2 data-id="heading-3">Event Busï¼šä»»æ„ç»„ä»¶é—´é€šä¿¡</h2>
<p>Event Busé€šè¿‡åˆ›å»ºä¸€ä¸ªç©ºçš„Vueå®ä¾‹ä½œä¸ºäº‹ä»¶ä¸­å¿ƒï¼Œå®ç°ä»»æ„ç»„ä»¶é—´çš„é€šä¿¡ï¼Œç‰¹åˆ«é€‚åˆéçˆ¶å­ç»„ä»¶çš„æƒ…å†µã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// event-bus.js - åˆ›å»ºäº‹ä»¶æ€»çº¿</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">EventBus</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>()

<span class="hljs-comment">// ç»„ä»¶A - äº‹ä»¶å‘é€è€…</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"sendMessage"</span>&gt;</span>å‘é€å…¨å±€æ¶ˆæ¯<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">EventBus</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./event-bus'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">sendMessage</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// è§¦å‘å…¨å±€äº‹ä»¶</span>
      <span class="hljs-title class_">EventBus</span>.$emit(<span class="hljs-string">'global-message'</span>, {
        <span class="hljs-attr">text</span>: <span class="hljs-string">'Hello from Component A!'</span>,
        <span class="hljs-attr">from</span>: <span class="hljs-string">'ComponentA'</span>
      })
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="hljs-comment">// ç»„ä»¶B - äº‹ä»¶ç›‘å¬è€…</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æœ€æ–°æ¶ˆæ¯ï¼š{{ latestMessage }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">EventBus</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./event-bus'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">latestMessage</span>: <span class="hljs-string">''</span>
    }
  },
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ç›‘å¬å…¨å±€äº‹ä»¶</span>
    <span class="hljs-title class_">EventBus</span>.$on(<span class="hljs-string">'global-message'</span>, <span class="hljs-function">(<span class="hljs-params">payload</span>) =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">latestMessage</span> = <span class="hljs-string">`<span class="hljs-subst">${payload.<span class="hljs-keyword">from</span>}</span> è¯´ï¼š<span class="hljs-subst">${payload.text}</span>`</span>
    })
  },
  <span class="hljs-title function_">beforeDestroy</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ç»„ä»¶é”€æ¯å‰ç§»é™¤äº‹ä»¶ç›‘å¬ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼</span>
    <span class="hljs-title class_">EventBus</span>.$off(<span class="hljs-string">'global-message'</span>)
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šç®€å•çš„è·¨ç»„ä»¶é€šä¿¡ï¼Œå°å‹é¡¹ç›®ä¸­çš„çŠ¶æ€ç®¡ç†ã€‚ä½†åœ¨å¤æ‚é¡¹ç›®ä¸­å»ºè®®ä½¿ç”¨Vuexæˆ–Piniaã€‚</p>
<h2 data-id="heading-4">provide/injectï¼šä¾èµ–æ³¨å…¥</h2>
<p>provideå’Œinjectä¸»è¦ç”¨äºé«˜é˜¶ç»„ä»¶å¼€å‘ï¼Œå…è®¸ç¥–å…ˆç»„ä»¶å‘å…¶æ‰€æœ‰å­å­™åä»£æ³¨å…¥ä¾èµ–ï¼Œè€Œä¸éœ€è¦å±‚å±‚ä¼ é€’propsã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¥–å…ˆç»„ä»¶ Ancestor.vue</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">middle-component</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-comment">// æä¾›æ•°æ®å’Œæ–¹æ³•</span>
  <span class="hljs-title function_">provide</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-comment">// æä¾›å“åº”å¼æ•°æ®</span>
      <span class="hljs-attr">appTheme</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">theme</span>,
      <span class="hljs-comment">// æä¾›æ–¹æ³•</span>
      <span class="hljs-attr">changeTheme</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">changeTheme</span>,
      <span class="hljs-comment">// æä¾›å¸¸é‡</span>
      <span class="hljs-attr">appName</span>: <span class="hljs-string">'æˆ‘çš„Vueåº”ç”¨'</span>
    }
  },
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">theme</span>: <span class="hljs-string">'dark'</span>
    }
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">changeTheme</span>(<span class="hljs-params">newTheme</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">theme</span> = newTheme
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="hljs-comment">// æ·±å±‚å­ç»„ä»¶ DeepChild.vue</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"`theme-${appTheme}`"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>åº”ç”¨åç§°ï¼š{{ appName }}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"changeTheme('light')"</span>&gt;</span>åˆ‡æ¢äº®è‰²ä¸»é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"changeTheme('dark')"</span>&gt;</span>åˆ‡æ¢æš—è‰²ä¸»é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-comment">// æ³¨å…¥ç¥–å…ˆç»„ä»¶æä¾›çš„æ•°æ®</span>
  <span class="hljs-attr">inject</span>: [<span class="hljs-string">'appTheme'</span>, <span class="hljs-string">'changeTheme'</span>, <span class="hljs-string">'appName'</span>],
  
  <span class="hljs-comment">// ä¹Ÿå¯ä»¥æŒ‡å®šé»˜è®¤å€¼å’Œæ¥æº</span>
  <span class="hljs-comment">// inject: {</span>
  <span class="hljs-comment">//   theme: {</span>
  <span class="hljs-comment">//     from: 'appTheme',</span>
  <span class="hljs-comment">//     default: 'light'</span>
  <span class="hljs-comment">//   }</span>
  <span class="hljs-comment">// }</span>
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šç»„ä»¶å±‚çº§å¾ˆæ·±ï¼Œéœ€è¦é¿å…propsé€å±‚ä¼ é€’çš„éº»çƒ¦ã€‚å¸¸ç”¨äºå¼€å‘ç»„ä»¶åº“æˆ–å¤§å‹åº”ç”¨çš„åŸºç¡€é…ç½®ã€‚</p>
<h2 data-id="heading-5"><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>t</mi><mi>t</mi><mi>r</mi><mi>s</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">attrs/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">a</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">rs</span><span class="mord">/</span></span></span></span></span>listenersï¼šè·¨å±‚çº§å±æ€§ä¼ é€’</h2>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>t</mi><mi>t</mi><mi>r</mi><mi>s</mi><mtext>åŒ…å«äº†çˆ¶ç»„ä»¶ä¼ å…¥çš„æ‰€æœ‰é</mtext><mi>p</mi><mi>r</mi><mi>o</mi><mi>p</mi><mi>s</mi><mtext>å±æ€§ï¼Œ</mtext></mrow><annotation encoding="application/x-tex">attrsåŒ…å«äº†çˆ¶ç»„ä»¶ä¼ å…¥çš„æ‰€æœ‰épropså±æ€§ï¼Œ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord mathnormal">a</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">rs</span><span class="mord cjk_fallback">åŒ…å«äº†çˆ¶ç»„ä»¶ä¼ å…¥çš„æ‰€æœ‰é</span><span class="mord mathnormal">p</span><span class="mord mathnormal">ro</span><span class="mord mathnormal">p</span><span class="mord mathnormal">s</span><span class="mord cjk_fallback">å±æ€§ï¼Œ</span></span></span></span></span>listenersåŒ…å«äº†çˆ¶ç»„ä»¶ä¼ å…¥çš„æ‰€æœ‰äº‹ä»¶ç›‘å¬å™¨ï¼Œå¯ä»¥ç”¨äºåˆ›å»ºé«˜é˜¶ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸­é—´ç»„ä»¶ MiddleComponent.vue</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ä¼ é€’æ‰€æœ‰å±æ€§å’Œäº‹ä»¶åˆ°å­ç»„ä»¶ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">child-component</span> <span class="hljs-attr">v-bind</span>=<span class="hljs-string">"$attrs"</span> <span class="hljs-attr">v-on</span>=<span class="hljs-string">"$listeners"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ChildComponent</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./ChildComponent.vue'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">components</span>: { <span class="hljs-title class_">ChildComponent</span> },
  <span class="hljs-attr">inheritAttrs</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// ä¸è®©å±æ€§ç»‘å®šåˆ°æ ¹å…ƒç´ </span>
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'$attrs:'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">$attrs</span>) <span class="hljs-comment">// æ‰€æœ‰épropså±æ€§</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'$listeners:'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">$listeners</span>) <span class="hljs-comment">// æ‰€æœ‰äº‹ä»¶ç›‘å¬å™¨</span>
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="hljs-comment">// æœ€ç»ˆå­ç»„ä»¶ ChildComponent.vue</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
    <span class="hljs-attr">v-bind</span>=<span class="hljs-string">"$attrs"</span>
    <span class="hljs-attr">v-on</span>=<span class="hljs-string">"$listeners"</span>
    <span class="hljs-attr">class</span>=<span class="hljs-string">"custom-input"</span>
  /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å¯ä»¥ç›´æ¥ä½¿ç”¨çˆ¶ç»„ä»¶ä¼ é€’çš„æ‰€æœ‰å±æ€§å’Œäº‹ä»¶</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¥æ”¶åˆ°çš„å±æ€§ï¼š'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">$attrs</span>)
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="hljs-comment">// çˆ¶ç»„ä»¶ä½¿ç”¨</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">middle-component</span>
    <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥å†…å®¹"</span>
    <span class="hljs-attr">maxlength</span>=<span class="hljs-string">"20"</span>
    @<span class="hljs-attr">focus</span>=<span class="hljs-string">"handleFocus"</span>
    @<span class="hljs-attr">blur</span>=<span class="hljs-string">"handleBlur"</span>
  /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šåˆ›å»ºåŒ…è£…ç»„ä»¶ã€é«˜é˜¶ç»„ä»¶ï¼Œéœ€è¦é€ä¼ å±æ€§å’Œäº‹ä»¶çš„åœºæ™¯ã€‚</p>
<h2 data-id="heading-6">Vuexï¼šé›†ä¸­å¼çŠ¶æ€ç®¡ç†</h2>
<p>Vuexæ˜¯Vueçš„å®˜æ–¹çŠ¶æ€ç®¡ç†åº“ï¼Œé€‚ç”¨äºä¸­å¤§å‹å¤æ‚åº”ç”¨çš„çŠ¶æ€ç®¡ç†ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// store/index.js</span>
<span class="hljs-keyword">import</span> { createStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'vuex'</span>

<span class="hljs-keyword">const</span> store = <span class="hljs-title function_">createStore</span>({
  <span class="hljs-title function_">state</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">user</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>
    }
  },
  <span class="hljs-attr">mutations</span>: {
    <span class="hljs-comment">// åŒæ­¥ä¿®æ”¹çŠ¶æ€</span>
    <span class="hljs-title function_">increment</span>(<span class="hljs-params">state</span>) {
      state.<span class="hljs-property">count</span>++
    },
    <span class="hljs-title function_">setUser</span>(<span class="hljs-params">state, user</span>) {
      state.<span class="hljs-property">user</span> = user
    },
    <span class="hljs-title function_">setLoading</span>(<span class="hljs-params">state, loading</span>) {
      state.<span class="hljs-property">loading</span> = loading
    }
  },
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-comment">// å¼‚æ­¥æ“ä½œ</span>
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">login</span>(<span class="hljs-params">{ commit }, credentials</span>) {
      <span class="hljs-title function_">commit</span>(<span class="hljs-string">'setLoading'</span>, <span class="hljs-literal">true</span>)
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">login</span>(credentials)
        <span class="hljs-title function_">commit</span>(<span class="hljs-string">'setUser'</span>, user)
        <span class="hljs-keyword">return</span> user
      } <span class="hljs-keyword">finally</span> {
        <span class="hljs-title function_">commit</span>(<span class="hljs-string">'setLoading'</span>, <span class="hljs-literal">false</span>)
      }
    }
  },
  <span class="hljs-attr">getters</span>: {
    <span class="hljs-comment">// è®¡ç®—å±æ€§</span>
    <span class="hljs-attr">isLoggedIn</span>: <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> !!state.<span class="hljs-property">user</span>,
    <span class="hljs-attr">doubleCount</span>: <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">count</span> * <span class="hljs-number">2</span>
  }
})

<span class="hljs-comment">// ç»„ä»¶ä¸­ä½¿ç”¨</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è®¡æ•°å™¨ï¼š{{ count }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>åŒå€è®¡æ•°ï¼š{{ doubleCount }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"isLoggedIn"</span>&gt;</span>æ¬¢è¿ï¼Œ{{ user.name }}ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"increment"</span>&gt;</span>å¢åŠ <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"login"</span> <span class="hljs-attr">:disabled</span>=<span class="hljs-string">"loading"</span>&gt;</span>
      {{ loading ? 'ç™»å½•ä¸­...' : 'ç™»å½•' }}
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { mapState, mapGetters, mapMutations, mapActions } <span class="hljs-keyword">from</span> <span class="hljs-string">'vuex'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">computed</span>: {
    <span class="hljs-comment">// æ˜ å°„stateå’Œgettersåˆ°è®¡ç®—å±æ€§</span>
    ...<span class="hljs-title function_">mapState</span>([<span class="hljs-string">'count'</span>, <span class="hljs-string">'user'</span>, <span class="hljs-string">'loading'</span>]),
    ...<span class="hljs-title function_">mapGetters</span>([<span class="hljs-string">'doubleCount'</span>, <span class="hljs-string">'isLoggedIn'</span>])
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-comment">// æ˜ å°„mutationså’Œactionsåˆ°æ–¹æ³•</span>
    ...<span class="hljs-title function_">mapMutations</span>([<span class="hljs-string">'increment'</span>]),
    ...<span class="hljs-title function_">mapActions</span>([<span class="hljs-string">'login'</span>])
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šä¸­å¤§å‹å¤æ‚åº”ç”¨ï¼Œå¤šä¸ªç»„ä»¶éœ€è¦å…±äº«çŠ¶æ€ï¼Œéœ€è¦ä¸¥æ ¼çš„çŠ¶æ€ç®¡ç†æµç¨‹ã€‚</p>
<h2 data-id="heading-7">Piniaï¼šæ–°ä¸€ä»£çŠ¶æ€ç®¡ç†</h2>
<p>Piniaæ˜¯Vueå®˜æ–¹æ¨èçš„æ–°ä¸€ä»£çŠ¶æ€ç®¡ç†åº“ï¼Œç›¸æ¯”Vuexæ›´åŠ è½»é‡ã€ç›´è§‚ï¼Œå¹¶ä¸”å®Œç¾æ”¯æŒTypeScriptã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// stores/counter.js</span>
<span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCounterStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'counter'</span>, {
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'æˆ‘çš„è®¡æ•°å™¨'</span>
  }),
  
  <span class="hljs-attr">getters</span>: {
    <span class="hljs-attr">doubleCount</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.<span class="hljs-property">count</span> * <span class="hljs-number">2</span>,
    <span class="hljs-comment">// ä½¿ç”¨thisè®¿é—®å…¶ä»–getter</span>
    <span class="hljs-title function_">doubleCountPlusOne</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">doubleCount</span> + <span class="hljs-number">1</span>
    }
  },
  
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-title function_">increment</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++
    },
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">incrementAsync</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// å¼‚æ­¥action</span>
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">1000</span>))
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">increment</span>()
    },
    <span class="hljs-title function_">reset</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> = <span class="hljs-number">0</span>
    }
  }
})

<span class="hljs-comment">// ç»„ä»¶ä¸­ä½¿ç”¨</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>{{ name }}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å½“å‰è®¡æ•°ï¼š{{ count }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>åŒå€è®¡æ•°ï¼š{{ doubleCount }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"increment"</span>&gt;</span>å¢åŠ <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"incrementAsync"</span>&gt;</span>å¼‚æ­¥å¢åŠ <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"reset"</span>&gt;</span>é‡ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { useCounterStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/stores/counter'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> counterStore = <span class="hljs-title function_">useCounterStore</span>()
    
    <span class="hljs-comment">// å¯ä»¥ç›´æ¥è§£æ„ï¼Œä½†ä¼šå¤±å»å“åº”å¼</span>
    <span class="hljs-comment">// ä½¿ç”¨storeToRefsä¿æŒå“åº”å¼</span>
    <span class="hljs-keyword">const</span> { name, count, doubleCount } = counterStore
    
    <span class="hljs-keyword">return</span> {
      <span class="hljs-comment">// stateå’Œgetters</span>
      name,
      count,
      doubleCount,
      <span class="hljs-comment">// actions</span>
      <span class="hljs-attr">increment</span>: counterStore.<span class="hljs-property">increment</span>,
      <span class="hljs-attr">incrementAsync</span>: counterStore.<span class="hljs-property">incrementAsync</span>,
      <span class="hljs-attr">reset</span>: counterStore.<span class="hljs-property">reset</span>
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="hljs-comment">// åœ¨å¤šä¸ªstoreä¹‹é—´äº¤äº’</span>
<span class="hljs-keyword">import</span> { useUserStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/stores/user'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCartStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'cart'</span>, {
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">checkout</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>()
      
      <span class="hljs-keyword">if</span> (!userStore.<span class="hljs-property">isLoggedIn</span>) {
        <span class="hljs-keyword">await</span> userStore.<span class="hljs-title function_">login</span>()
      }
      
      <span class="hljs-comment">// ç»“è´¦é€»è¾‘...</span>
    }
  }
})
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šç°ä»£Vueåº”ç”¨çš„çŠ¶æ€ç®¡ç†ï¼Œç‰¹åˆ«æ˜¯éœ€è¦TypeScriptæ”¯æŒå’Œæ›´ç®€æ´APIçš„é¡¹ç›®ã€‚</p>
<h2 data-id="heading-8">å®æˆ˜åœºæ™¯é€‰æ‹©æŒ‡å—</h2>
<p>ç°åœ¨ä½ å·²ç»äº†è§£äº†8ç§Vueç»„ä»¶é€šä¿¡æ–¹å¼ï¼Œä½†åœ¨å®é™…å¼€å‘ä¸­è¯¥å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿæˆ‘æ¥ç»™ä½ ä¸€äº›å®ç”¨å»ºè®®ï¼š</p>
<p>å¦‚æœæ˜¯ç®€å•çš„çˆ¶å­ç»„ä»¶é€šä¿¡ï¼Œä¼˜å…ˆè€ƒè™‘propså’Œ$emitï¼Œè¿™æ˜¯æœ€ç›´æ¥çš„æ–¹å¼ã€‚</p>
<p>å½“ç»„ä»¶å±‚çº§è¾ƒæ·±ï¼Œéœ€è¦é¿å…propsé€å±‚ä¼ é€’æ—¶ï¼Œprovide/injectæ˜¯ä¸é”™çš„é€‰æ‹©ã€‚</p>
<p>å¯¹äºéçˆ¶å­ç»„ä»¶é—´çš„ç®€å•é€šä¿¡ï¼ŒEvent Buså¯ä»¥å¿«é€Ÿè§£å†³é—®é¢˜ï¼Œä½†è¦æ³¨æ„äº‹ä»¶ç®¡ç†ã€‚</p>
<p>åœ¨éœ€è¦åˆ›å»ºé«˜é˜¶ç»„ä»¶æˆ–åŒ…è£…ç»„ä»¶æ—¶ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>t</mi><mi>t</mi><mi>r</mi><mi>s</mi><mtext>å’Œ</mtext></mrow><annotation encoding="application/x-tex">attrså’Œ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">a</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">rs</span><span class="mord cjk_fallback">å’Œ</span></span></span></span></span>listenersèƒ½å¤§å¤§ç®€åŒ–ä»£ç ã€‚</p>
<p>å¯¹äºä¸­å¤§å‹å¤æ‚åº”ç”¨ï¼Œéœ€è¦é›†ä¸­ç®¡ç†çŠ¶æ€æ—¶ï¼ŒVuexæˆ–Piniaæ˜¯å¿…å¤‡çš„ã€‚ä¸ªäººæ›´æ¨èPiniaï¼Œå› ä¸ºå®ƒæ›´ç°ä»£ã€æ›´ç®€æ´ã€‚</p>
<p>å¦‚æœéœ€è¦ç›´æ¥æ“ä½œå­ç»„ä»¶ï¼Œrefæä¾›äº†æœ€ç›´æ¥çš„æ–¹å¼ï¼Œä½†è¦è°¨æ…ä½¿ç”¨ä»¥ä¿æŒç»„ä»¶çš„å°è£…æ€§ã€‚</p>
<p>è®°ä½ï¼Œæ²¡æœ‰æœ€å¥½çš„é€šä¿¡æ–¹å¼ï¼Œåªæœ‰æœ€é€‚åˆå½“å‰åœºæ™¯çš„æ–¹å¼ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå¾€å¾€æ˜¯å¤šç§æ–¹å¼ç»“åˆä½¿ç”¨ã€‚</p>
<h2 data-id="heading-9">å†™åœ¨æœ€å</h2>
<p>ç»„ä»¶é€šä¿¡æ˜¯Vueå¼€å‘ä¸­çš„æ ¸å¿ƒæŠ€èƒ½ï¼ŒæŒæ¡è¿™äº›é€šä¿¡æ–¹å¼å°±åƒæŒæ¡äº†ç»„ä»¶é—´çš„"å¯¹è¯è¯­è¨€"ã€‚ä»ç®€å•çš„props/$emitåˆ°å¤æ‚çš„PiniaçŠ¶æ€ç®¡ç†ï¼Œæ¯ç§æ–¹å¼éƒ½æœ‰å…¶ç‹¬ç‰¹çš„ä»·å€¼å’Œé€‚ç”¨åœºæ™¯ã€‚</p>
<p>å…³é”®æ˜¯è¦ç†è§£æ¯ç§æ–¹å¼çš„åŸç†å’Œä¼˜ç¼ºç‚¹ï¼Œåœ¨å®é™…å¼€å‘ä¸­æ ¹æ®ç»„ä»¶å…³ç³»ã€æ•°æ®æµå¤æ‚åº¦ã€é¡¹ç›®è§„æ¨¡ç­‰å› ç´ åšå‡ºåˆé€‚çš„é€‰æ‹©ã€‚</p>
<p>ä½ ç°åœ¨å¯¹Vueç»„ä»¶é€šä¿¡æ˜¯ä¸æ˜¯æœ‰äº†æ›´æ¸…æ™°çš„è®¤è¯†ï¼Ÿåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä½ æœ€å–œæ¬¢ç”¨å“ªç§é€šä¿¡æ–¹å¼ï¼Ÿæœ‰æ²¡æœ‰é‡åˆ°è¿‡ç‰¹åˆ«çš„é€šä¿¡éš¾é¢˜ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ç»éªŒå’Œå¿ƒå¾—ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æé£é£ä¸‡å­—é•¿æ–‡çˆ†äº†ï¼å®šä¹‰ AI ä¸‹ä¸€ä¸ªåå¹´]]></title>    <link>https://juejin.cn/post/7571067260053405722</link>    <guid>https://juejin.cn/post/7571067260053405722</guid>    <pubDate>2025-11-11T06:56:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571067260053405722" data-draft-id="7571051830710386738" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æé£é£ä¸‡å­—é•¿æ–‡çˆ†äº†ï¼å®šä¹‰ AI ä¸‹ä¸€ä¸ªåå¹´"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-11-11T06:56:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–°æ™ºå…ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/952600743642312"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æé£é£ä¸‡å­—é•¿æ–‡çˆ†äº†ï¼å®šä¹‰ AI ä¸‹ä¸€ä¸ªåå¹´
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/952600743642312/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–°æ™ºå…ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-11T06:56:42.000Z" title="Tue Nov 11 2025 06:56:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»30åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/787b168bbf994bc9bc8fe95ba127b7ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763449001&amp;x-signature=LHmxaCcpFDj0fWjStEVuvjybgLI%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-0"><strong>ã€Œã€æ–°æ™ºå…ƒå¯¼è¯»ã€‘AI çš„ä¸‹ä¸€ä¸ªåå¹´ï¼Œæ˜¯æ„å»ºç©ºé—´æ™ºèƒ½çš„æœºå™¨ã€‚æé£é£æœ€æ–°ç¡¬æ ¸é•¿æ–‡ï¼Œæ­ç§˜äº†ç©ºé—´æ™ºèƒ½ã€Œä¸–ç•Œæ¨¡å‹ã€æ ¸å¿ƒæ¡†æ¶å’Œä¸‰å¤§æ ¸å¿ƒæ”¯æŸ±ã€‚ã€</strong></h5>
<p>AI çš„ä¸‹ä¸€ä¸ªå‰æ²¿ï¼Œæ˜¯ã€Œç©ºé—´æ™ºèƒ½ã€ã€‚</p>
<p>å®ƒæ˜¯ä¸€é¡¹èƒ½è®©ã€Œçœ‹è§ã€å‡åä¸ºã€Œæ¨ç†ã€ï¼Œè®©ã€Œæ„ŸçŸ¥ã€èœ•å˜ä¸ºã€Œè¡ŒåŠ¨ã€ï¼Œè®©ã€Œæƒ³è±¡ã€è½åœ°ä¸ºã€Œåˆ›é€ ã€çš„æŠ€æœ¯ã€‚</p>
<p>ä½†ã€Œç©ºé—´æ™ºèƒ½ã€ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿä¸ºä½•å¦‚æ­¤é‡è¦ï¼Ÿè¯¥å¦‚ä½•æ„å»ºå®ƒï¼Ÿåˆè¯¥å¦‚ä½•åº”ç”¨å®ƒï¼Ÿ</p>
<p>ä»Šå¤©ï¼Œæé£é£æ’°ä¸‡å­—é•¿æ–‡åˆ†äº«äº†è‡ªå·±å…³äºæ„å»ºå’Œä½¿ç”¨ã€Œä¸–ç•Œæ¨¡å‹ã€ä»¥è§£é”ç©ºé—´æ™ºèƒ½çš„æ€è€ƒã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53787ed7f2c94c409b54871abd824965~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763449001&amp;x-signature=zuN%2FpXnjjiFvF0Pog1tZ%2B884fiQ%3D" alt="" loading="lazy"/></p>
<p>æ–°æ–‡ç« ä¸­ï¼Œå¥¹ä¸ºçœŸæ­£å…·å¤‡ç©ºé—´æ™ºèƒ½çš„ã€Œä¸–ç•Œæ¨¡å‹ã€æ‰€éœ€è¾¾æˆçš„ç›®æ ‡å‹¾å‹’äº†ä¸€ä¸ªæ¡†æ¶ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œæ„å»ºè¿™æ ·çš„ AI å¿…é¡»å…·å¤‡ä¸‰å¤§æ ¸å¿ƒèƒ½åŠ›ï¼š</p>
<p>è®© AI æ‹¥æœ‰æ•…äº‹è®²è¿°å®¶çš„æƒ³è±¡åŠ›å»åˆ›é€ ï¼Œ</p>
<p>æ‹¥æœ‰æ€¥æ•‘äººå‘˜èˆ¬çš„æ•æ·æ€§å»å¯¼èˆªï¼Œ</p>
<p>å¹¶æ‹¥æœ‰ç§‘å­¦å®¶çš„ä¸¥è°¨å»æ¨ç†ç©ºé—´ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dfdd903077454cbab446d9a771c2d62b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763449001&amp;x-signature=aHmj3fuin0OSEOyuUgKFfihu%2F2Y%3D" alt="" loading="lazy"/></p>
<p>æé£é£ä¸ LeCun å…±è¯†çš„ä¸€ç‚¹æ˜¯ï¼Œã€Œä¸–ç•Œæ¨¡å‹ã€æ˜¯è§£é”ç©ºé—´æ™ºèƒ½çš„æ ¸å¿ƒã€‚</p>
<p>å®ƒå¿…é¡»èƒ½ç”Ÿæˆéµå¾ªç‰©ç†å®šå¾‹ã€åœ¨ç©ºé—´ä¸Šä¿æŒä¸€è‡´çš„ä¸–ç•Œï¼Œèƒ½å¤„ç†ä»å›¾åƒåˆ°åŠ¨ä½œçš„å¤šæ¨¡æ€è¾“å…¥ï¼Œå¹¶èƒ½é¢„æµ‹è¿™äº›ä¸–ç•Œå°†å¦‚ä½•æ¼”å˜æˆ–ä¸ä¹‹äº’åŠ¨ã€‚</p>
<p>ç©ºé—´æ™ºèƒ½çš„åº”ç”¨ç–†åŸŸï¼Œæ­£æ²¿ç€ä¸€æ¡æ¸…æ™°è·¯å¾„æ¼”è¿›ã€‚</p>
<p>å½“ä¸‹ï¼Œå®ƒæ­£èµ‹èƒ½åˆ›æ„ï¼ŒWorld LabsÂ Marble é¡¹ç›®å·²ç»å°†è¿™äº›èƒ½åŠ›äº¤åˆ°äº†åˆ›ä½œè€…å’Œæ•…äº‹è®²è¿°è€…çš„æ‰‹ä¸­ã€‚</p>
<p>ä¸‹ä¸€æ­¥ï¼Œå®ƒå°†é©¾é©­ç‰©ç†ä¸–ç•Œï¼Œæœºå™¨äººå®ç°æ„ŸçŸ¥ä¸è¡ŒåŠ¨ä¹‹é—´çš„é—­ç¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b5cd939fb414854adfc32d32706931f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763449001&amp;x-signature=bpqVqiafRO8r54Ffar7Dwljqx%2BE%3D" alt="" loading="lazy"/></p>
<p>è€Œæœ€å…·å˜é©æ€§çš„ç§‘å­¦åº”ç”¨ï¼Œè™½ç„¶éœ€è¦æ›´é•¿æ—¶é—´ï¼Œä½†æœ‰æœ›å¯¹äººç±»ç¦ç¥‰äº§ç”Ÿæ·±è¿œå½±å“ã€‚</p>
<p>å“²å­¦å®¶ç»´ç‰¹æ ¹æ–¯å¦æ›¾å†™é“ï¼šã€Œæˆ‘è¯­è¨€çš„æé™ï¼Œæ„å‘³ç€æˆ‘ä¸–ç•Œçš„æé™ã€‚ã€</p>
<p>æé£é£è¡¨ç¤ºï¼Œã€Œæˆ‘ä¸æ˜¯å“²å­¦å®¶ï¼Œä½†æˆ‘æ·±çŸ¥ï¼Œè‡³å°‘å¯¹ AI è€Œè¨€ï¼Œä¸–ç•Œè¿œä¸æ­¢äºæ–‡å­—ã€ã€‚</p>
<p>ç©ºé—´æ™ºèƒ½ä»£è¡¨äº†è¶…è¶Šè¯­è¨€çš„å‰æ²¿â€”â€”å®ƒæ˜¯ä¸€ç§å°†æƒ³è±¡ã€æ„ŸçŸ¥ä¸è¡ŒåŠ¨èä¼šè´¯é€šçš„èƒ½åŠ›ï¼Œä¸ºæœºå™¨çœŸæ­£æå‡äººç±»ç”Ÿæ´»å¼€å¯äº†æ— é™å¯èƒ½ï¼Œä»åŒ»ç–—å¥åº·åˆ°åˆ›æ„æŒ¥æ´’ï¼Œä»ç§‘å­¦æ¢ç´¢åˆ°æ—¥å¸¸è¾…åŠ©ã€‚</p>
<p>ä¼—å¤šç½‘å‹ç‚¹è¯„ï¼Œè¿™æ˜¯æé£é£ä¸€ç¯‡éå¸¸é‡è¦çš„æ–‡ç« ï¼Œç©ºé—´æ™ºèƒ½å¿…è¯»ä¹‹ä½œï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d952b60fda34290b81704174f33e976~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763449001&amp;x-signature=nS3L0QbBABB8uY1FGq1nY%2Fqzb%2BI%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/829f115810a1456c8e752addcd2c96c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763449001&amp;x-signature=3KM4OTQNtkEN%2FLwH83eRxukPOUY%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c1a336c69724f4b8627c100a5716194~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763449001&amp;x-signature=PlvEaZXiGe3rmmV1H%2B2XifLmiwg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4023768723f745d8b60d23042ff8dc29~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763449001&amp;x-signature=HsjDipxBuWha6WwBORrm9mYbJac%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b74535841647441fba71e4d60e0b065d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763449001&amp;x-signature=cbQYNrQWCFiern%2BSigVpJpBhdr8%3D" alt="" loading="lazy"/></p>
<p>ä¸Šä¸‹æ»‘åŠ¨æŸ¥çœ‹</p>
<p>ä»¥ä¸‹æ˜¯å…¨æ–‡ç¿»è¯‘ï¼Œä¸€èµ·æ¥æ‹œè¯»ä¸‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44a149c8e6ed44cbb4952a69c4cb9ab6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763449001&amp;x-signature=f6Kg8Uu3IJ%2B2PUEyt6IGww%2B4xNc%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œä»è¯­è¨€åˆ°ä¸–ç•Œï¼šç©ºé—´æ™ºèƒ½æ˜¯ AI çš„ä¸‹ä¸€ä¸ªå‰æ²¿ã€</strong></p>
<p>1950 å¹´ï¼Œå½“è®¡ç®—è¿˜åªæ˜¯è‡ªåŠ¨åŒ–ç®—æœ¯å’Œç®€å•é€»è¾‘çš„ä»£åè¯æ—¶ï¼Œé˜¿å…° Â· å›¾çµæå‡ºäº†ä¸€ä¸ªè‡³ä»Šä»æŒ¯è‹å‘è©çš„é—®é¢˜ï¼šæœºå™¨èƒ½å¦æ€è€ƒï¼Ÿèƒ½æ´è§ä»–æ‰€é¢„è§çš„ä¸€åˆ‡ï¼Œéœ€è¦éå‡¡çš„æƒ³è±¡åŠ›ï¼šæ™ºèƒ½æœ‰æœä¸€æ—¥æˆ–å¯åå¤©æ„å»ºï¼Œè€Œéä¸ç”Ÿä¿±æ¥ã€‚</p>
<p>è¿™ä¸€æ´è§ï¼Œåæ¥å¼€å¯äº†ä¸€åœºåä¸ºã€Œäººå·¥æ™ºèƒ½ã€ï¼ˆAIï¼‰çš„ä¸æ‡ˆç§‘å­¦æ¢ç´¢ã€‚</p>
<p>åœ¨æˆ‘æŠ•èº« AI é¢†åŸŸçš„ç¬¬äºŒåäº”ä¸ªå¹´å¤´ï¼Œå›¾çµçš„è¿œè§å“è¯†ä¾ç„¶æ¿€åŠ±ç€æˆ‘ã€‚ä½†æˆ‘ä»¬ç¦»è¿™ä¸ªç›®æ ‡è¿˜æœ‰å¤šè¿‘ï¼Ÿç­”æ¡ˆå¹¶éä¸€è¨€ä»¥è”½ä¹‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21d7e8566db54f228e9b01be34e5f734~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763449001&amp;x-signature=TTHYDZ%2BlQ5jA4%2Fa3EWbXnd%2FStac%3D" alt="" loading="lazy"/></p>
<p>å¦‚ä»Šï¼Œä»¥å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä¸ºä»£è¡¨çš„é¡¶å°– AI æŠ€æœ¯å·²å¼€å§‹æ”¹å˜æˆ‘ä»¬è·å–å’Œè¿ç”¨æŠ½è±¡çŸ¥è¯†çš„æ–¹å¼ã€‚</p>
<p>ç„¶è€Œï¼Œå®ƒä»¬ä»æ˜¯é»‘æš—ä¸­çš„æ–‡å­—å¤§å¸ˆï¼›èƒ½è¨€å–„è¾©å´ç¼ºä¹ç»éªŒï¼ŒçŸ¥è¯†æ¸Šåšå´è„±ç¦»ç°å®çš„æ ¹åŸºã€‚</p>
<p>ç©ºé—´æ™ºèƒ½å°†æ”¹å˜æˆ‘ä»¬åˆ›é€ ä»¥åŠä¸çœŸå®å’Œè™šæ‹Ÿä¸–ç•Œäº’åŠ¨çš„æ–¹å¼â€”â€”ä¸ºæ•…äº‹å™è¿°ã€åˆ›æ„ã€æœºå™¨äººæŠ€æœ¯ã€ç§‘å­¦å‘ç°ç­‰é¢†åŸŸå¸¦æ¥é©å‘½æ€§çš„å˜é©ã€‚è¿™ï¼Œå°±æ˜¯ AI çš„ä¸‹ä¸€ä¸ªå‰æ²¿ã€‚</p>
<p>å¯¹è§†è§‰ä¸ç©ºé—´æ™ºèƒ½çš„è¿½æ±‚ï¼Œæ˜¯æˆ‘è¸å…¥è¯¥é¢†åŸŸä»¥æ¥å§‹ç»ˆæŒ‡å¼•æˆ‘å‰è¡Œçš„ã€ŒåŒ—ææ˜Ÿã€ã€‚</p>
<p>æ­£å› å¦‚æ­¤ï¼Œæˆ‘èŠ±è´¹æ•°å¹´æ—¶é—´æ„å»ºäº† ImageNetâ€”â€”é¦–ä¸ªå¤§è§„æ¨¡è§†è§‰å­¦ä¹ ä¸åŸºå‡†æµ‹è¯•æ•°æ®é›†ï¼Œå®ƒä¸ç¥ç»ç½‘ç»œç®—æ³•ã€å›¾å½¢å¤„ç†å™¨ï¼ˆGPUï¼‰ç­‰ç°ä»£è®¡ç®—è®¾å¤‡ä¸€é“ï¼Œæˆä¸ºå‚¬ç”Ÿç°ä»£ AI çš„ä¸‰å¤§å…³é”®åŸºçŸ³ä¹‹ä¸€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb008ef13c0f4511936e2c4dd550388b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763449001&amp;x-signature=I7QFj1ZVqoO6ugm%2BS9qy0u5Y7ks%3D" alt="" loading="lazy"/></p>
<p>æ­£å› å¦‚æ­¤ï¼Œæˆ‘åœ¨æ–¯å¦ç¦å¤§å­¦çš„å­¦æœ¯å®éªŒå®¤åœ¨è¿‡å»åå¹´é‡Œï¼Œå§‹ç»ˆè‡´åŠ›äºå°†è®¡ç®—æœºè§†è§‰ä¸æœºå™¨äººå­¦ä¹ ç›¸ç»“åˆã€‚</p>
<p>ä¹Ÿæ­£å› å¦‚æ­¤ï¼Œä¸€å¹´å¤šå‰ï¼Œæˆ‘ä¸è”åˆåˆ›å§‹äºº Justin Johnsonã€Christoph Lassnerã€Ben Mildenhall å…±åŒåˆ›ç«‹äº† World Labsï¼šæ—¨åœ¨é¦–æ¬¡å°†è¿™ä¸€å¯èƒ½æ€§æ·‹æ¼“å°½è‡´åœ°å˜ä¸ºç°å®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d752adca59a4be6b50f3bea797f6767~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763449001&amp;x-signature=EFu%2BFVezeBeYYSpmR3Vp9kLtPMI%3D" alt="" loading="lazy"/></p>
<p>World Labs åˆ›å§‹äººå›¢é˜Ÿï¼Œå·¦èµ·ä¾æ¬¡ä¸º Ben Mildenhallã€Justin Johnsonã€Christoph Lassner å’Œæé£é£</p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†é˜é‡Šä½•ä¸ºç©ºé—´æ™ºèƒ½ã€å…¶é‡è¦æ€§ä½•åœ¨ï¼Œä»¥åŠæˆ‘ä»¬å¦‚ä½•æ„å»ºèƒ½å¤Ÿè§£é”å®ƒçš„ã€Œä¸–ç•Œæ¨¡å‹ã€â€”â€”å…¶æ·±è¿œå½±å“å°†é‡å¡‘åˆ›æ„ã€å…·èº«æ™ºèƒ½ä¸äººç±»çš„è¿›æ­¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e65078eb6a8240e0a6c52b0a2f5c1316~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763449001&amp;x-signature=rBaPXZYq2vAWjqFDjoveLrvVIMo%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œç©ºé—´æ™ºèƒ½ï¼šäººç±»è®¤çŸ¥çš„åŸºçŸ³ã€</strong></p>
<p>äººå·¥æ™ºèƒ½çš„å‘å±•ä»æœªå¦‚æ­¤æ¿€åŠ¨äººå¿ƒã€‚åƒå¤§è¯­è¨€æ¨¡å‹è¿™æ ·çš„ç”Ÿæˆå¼ AI å·²ç»ä»å®éªŒå®¤èµ°å‘æ—¥å¸¸ç”Ÿæ´»ï¼Œæˆä¸ºæ•°åäº¿äººåˆ›æ„ã€ç”Ÿäº§åŠ›å’Œæ²Ÿé€šçš„å·¥å…·ã€‚</p>
<p>å®ƒä»¬å±•ç°äº†æ›¾è¢«è®¤ä¸ºé¥ä¸å¯åŠçš„èƒ½åŠ›ï¼Œèƒ½è½»æ¾ç”Ÿæˆè¿è´¯çš„æ–‡æœ¬ã€æµ©å¦‚çƒŸæµ·çš„ä»£ç ã€é€¼çœŸçš„å›¾åƒï¼Œä¹ƒè‡³çŸ­è§†é¢‘ç‰‡æ®µã€‚AI æ˜¯å¦ä¼šæ”¹å˜ä¸–ç•Œå·²ä¸å†æ˜¯ç–‘é—®ã€‚</p>
<p>æ— è®ºä»¥ä½•ç§åˆç†çš„æ ‡å‡†è¡¡é‡ï¼Œå®ƒéƒ½å·²ç„¶åšåˆ°äº†ã€‚</p>
<p>ç„¶è€Œï¼Œä»æœ‰å¤ªå¤šé¢†åŸŸæ˜¯æˆ‘ä»¬åŠ›æ‰€ä¸åŠçš„ã€‚è‡ªä¸»æœºå™¨äººçš„æ„¿æ™¯è™½å¼•äººå…¥èƒœï¼Œå´ä»åœç•™åœ¨ç†è®ºå±‚é¢ï¼Œè¿œæœªæˆä¸ºæœªæ¥å­¦å®¶ä»¬é•¿æœŸè®¸è¯ºçš„æ—¥å¸¸å¿…éœ€å“ã€‚</p>
<p>åœ¨ç–¾ç—…æ²»ç–—ã€æ–°ææ–™å‘ç°å’Œç²’å­ç‰©ç†å­¦ç­‰é¢†åŸŸå®ç°ç ”ç©¶è¿›ç¨‹å¤§é£è·ƒçš„æ¢¦æƒ³ï¼Œåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šä»æœªå®ç°ã€‚</p>
<p>è€Œ AI çœŸæ­£ç†è§£å¹¶èµ‹èƒ½äººç±»åˆ›ä½œè€…çš„æ‰¿è¯ºâ€”â€”æ— è®ºæ˜¯å¸®åŠ©å­¦ç”Ÿç†è§£åˆ†å­åŒ–å­¦çš„å¤æ‚æ¦‚å¿µï¼ŒååŠ©å»ºç­‘å¸ˆæ„æƒ³ç©ºé—´ï¼Œæ”¯æŒç”µå½±åˆ¶ä½œäººæ„å»ºä¸–ç•Œï¼Œè¿˜æ˜¯ä¸ºä»»ä½•å¯»æ±‚å®Œå…¨æ²‰æµ¸å¼è™šæ‹Ÿä½“éªŒçš„äººæä¾›æ”¯æŒâ€”â€”ä¹Ÿä¾ç„¶é¥ä¸å¯åŠã€‚</p>
<p>è¦ç†è§£ä¸ºä½•è¿™äº›èƒ½åŠ›ä»éš¾ä»¥å®ç°ï¼Œæˆ‘ä»¬éœ€è¦å®¡è§†ç©ºé—´æ™ºèƒ½çš„æ¼”åŒ–å†ç¨‹ï¼Œä»¥åŠå®ƒå¦‚ä½•å¡‘é€ æˆ‘ä»¬å¯¹ä¸–ç•Œçš„è®¤çŸ¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73f595c679dd4d87b25ed03940b320d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763449001&amp;x-signature=X2lqHVlT1AvSAHP4GgOE60PDKrs%3D" alt="" loading="lazy"/></p>
<p>è§†è§‰é•¿ä¹…ä»¥æ¥éƒ½æ˜¯äººç±»æ™ºèƒ½çš„åŸºçŸ³ï¼Œä½†å…¶åŠ›é‡æºäºæŸç§æ›´ä¸ºæ ¹æœ¬çš„èƒ½åŠ›ã€‚è¿œåœ¨åŠ¨ç‰©å­¦ä¼šç­‘å·¢ã€å“ºè‚²åä»£ã€ç”¨è¯­è¨€äº¤æµæˆ–å»ºç«‹æ–‡æ˜ä¹‹å‰ï¼Œæ„ŸçŸ¥è¿™ä¸€ç®€å•çš„è¡Œä¸ºå°±å·²æ‚„ç„¶ç‚¹ç‡ƒäº†é€šå¾€æ™ºèƒ½çš„è¿›åŒ–ç«èŠ±ã€‚</p>
<p>è¿™ç§ä»å¤–éƒ¨ä¸–ç•Œï¼ˆæ— è®ºæ˜¯ä¸€ç¼•å¾®å…‰è¿˜æ˜¯ä¸€ä¸è§¦æ„Ÿï¼‰æ”¶é›†ä¿¡æ¯çš„çœ‹ä¼¼å­¤ç«‹çš„èƒ½åŠ›ï¼Œåœ¨æ„ŸçŸ¥ä¸ç”Ÿå­˜ä¹‹é—´æ¶èµ·äº†ä¸€åº§æ¡¥æ¢ï¼Œå¹¶éšç€ä»£ä»£ç¹è¡è€Œæ„ˆå‘åšå›ºå’Œç²¾å·§ã€‚å±‚å±‚å å çš„ç¥ç»å…ƒä»è¿™åº§æ¡¥æ¢ä¸Šç”Ÿé•¿å‡ºæ¥ï¼Œå½¢æˆäº†èƒ½å¤Ÿè§£è¯»ä¸–ç•Œå¹¶åè°ƒç”Ÿç‰©ä½“ä¸ç¯å¢ƒäº’åŠ¨çš„ç¥ç»ç³»ç»Ÿã€‚</p>
<p>å› æ­¤ï¼Œè®¸å¤šç§‘å­¦å®¶æ¨æ–­ï¼Œæ„ŸçŸ¥ä¸è¡ŒåŠ¨çš„å¾ªç¯æˆä¸ºé©±åŠ¨æ™ºèƒ½è¿›åŒ–çš„æ ¸å¿ƒåŠ¨åŠ›ï¼Œä¹Ÿæ˜¯è‡ªç„¶ç•Œåˆ›é€ å‡ºæˆ‘ä»¬äººç±»â€”â€”è¿™ä¸€é›†æ„ŸçŸ¥ã€å­¦ä¹ ã€æ€è€ƒä¸è¡ŒåŠ¨äºä¸€ä½“çš„ç»ˆæé€ ç‰©â€”â€”çš„æ ¹åŸºã€‚</p>
<p>ç©ºé—´æ™ºèƒ½åœ¨å®šä¹‰æˆ‘ä»¬å¦‚ä½•ä¸ç‰©ç†ä¸–ç•Œäº’åŠ¨æ–¹é¢æ‰®æ¼”ç€è‡³å…³é‡è¦çš„è§’è‰²ã€‚</p>
<p>æ¯ä¸€å¤©ï¼Œæˆ‘ä»¬éƒ½ä¾èµ–å®ƒæ¥å®Œæˆæœ€å¹³å‡¡çš„ä¸¾åŠ¨ï¼šé€šè¿‡æƒ³è±¡ä¿é™©æ ä¸è·¯ç¼˜ä¹‹é—´ä¸æ–­ç¼©å°çš„é—´éš™æ¥åœæ”¾æ±½è½¦ï¼Œæ¥ä½æŠ›è¿‡æˆ¿é—´çš„ä¸€ä¸²é’¥åŒ™ï¼Œåœ¨æ‹¥æŒ¤çš„äººè¡Œé“ä¸Šç©¿è¡Œè€Œé¿å…ç¢°æ’ï¼Œæˆ–æ˜¯åœ¨ç¡çœ¼æƒºå¿ªä¸­ä¸çœ‹ä¸€çœ¼ä¾¿å°†å’–å•¡å€’å…¥æ¯ä¸­ã€‚</p>
<p>åœ¨æ›´æç«¯çš„æƒ…å†µä¸‹ï¼Œæ¶ˆé˜²å‘˜åœ¨æµ“çƒŸå¼¥æ¼«ã€æ‘‡æ‘‡æ¬²å çš„å»ºç­‘ä¸­ç©¿è¡Œï¼Œå¯¹ç»“æ„çš„ç¨³å®šæ€§å’Œè‡ªèº«çš„ç”Ÿå­˜åœ¨ç¬é—´åšå‡ºåˆ¤æ–­ï¼Œå¹¶é€šè¿‡æ‰‹åŠ¿ã€è‚¢ä½“è¯­è¨€å’Œä¸€ç§æ— å¯æ›¿ä»£çš„èŒä¸šç›´è§‰è¿›è¡Œäº¤æµã€‚</p>
<p>è€Œå©´å¹¼å„¿åˆ™åœ¨å­¦ä¼šè¯´è¯å‰çš„æ•´æ®µå²æœˆé‡Œï¼Œé€šè¿‡ä¸ç¯å¢ƒçš„å¬‰æˆäº’åŠ¨æ¥è®¤çŸ¥ä¸–ç•Œã€‚æ‰€æœ‰è¿™ä¸€åˆ‡éƒ½å‘ç”Ÿå¾—å¦‚æ­¤ç›´è§‚ã€è‡ªç„¶â€”â€”è¿™æ˜¯æœºå™¨å°šæœªèƒ½ä¼åŠçš„è‡ªå¦‚ä¸å¨´ç†Ÿã€‚</p>
<p>ç©ºé—´æ™ºèƒ½åŒæ ·æ˜¯æˆ‘ä»¬æƒ³è±¡åŠ›ä¸åˆ›é€ åŠ›çš„åŸºçŸ³ã€‚æ•…äº‹è®²è¿°è€…åœ¨è„‘æµ·ä¸­åˆ›é€ å‡ºå¼‚å¸¸ä¸°å¯Œçš„ä¸–ç•Œï¼Œå¹¶åˆ©ç”¨ä»å¤è€çš„æ´ç©´å£ç”»åˆ°ç°ä»£ç”µå½±ï¼Œå†åˆ°æ²‰æµ¸å¼è§†é¢‘æ¸¸æˆç­‰å¤šç§è§†è§‰åª’ä»‹ï¼Œå°†è¿™äº›ä¸–ç•Œå‘ˆç°ç»™ä»–äººã€‚</p>
<p>æ— è®ºæ˜¯å­©ç«¥åœ¨æ²™æ»©ä¸Šå †ç Œæ²™å ¡ï¼Œè¿˜æ˜¯åœ¨ç”µè„‘ä¸Šç©ã€Šæˆ‘çš„ä¸–ç•Œã€‹ï¼ŒåŸºäºç©ºé—´çš„æƒ³è±¡åŠ›æ„æˆäº†çœŸå®æˆ–è™šæ‹Ÿä¸–ç•Œä¸­äº’åŠ¨ä½“éªŒçš„åŸºç¡€ã€‚åœ¨ä¼—å¤šè¡Œä¸šåº”ç”¨ä¸­ï¼Œå¯¹ç‰©ä½“ã€åœºæ™¯å’ŒåŠ¨æ€äº¤äº’ç¯å¢ƒçš„æ¨¡æ‹Ÿï¼Œä¸ºä»å·¥ä¸šè®¾è®¡åˆ°æ•°å­—å­ªç”Ÿï¼Œå†åˆ°æœºå™¨äººè®­ç»ƒç­‰æ— æ•°å…³é”®å•†ä¸šç”¨ä¾‹æä¾›äº†åŠ¨åŠ›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f936b89d96a5484e9e563dff308532fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763449001&amp;x-signature=CPalbwpPFNCdbuKXPfod1KJHWtY%3D" alt="" loading="lazy"/></p>
<p>å†å²ä¸Šå……æ»¡äº†ç”±ç©ºé—´æ™ºèƒ½æ‰®æ¼”æ ¸å¿ƒè§’è‰²çš„ã€å®šä¹‰æ–‡æ˜è¿›ç¨‹çš„æ—¶åˆ»ã€‚</p>
<p>åœ¨å¤å¸Œè…Šï¼ŒåŸƒæ‹‰æ‰˜è‰²å°¼å°†å…‰å½±è½¬åŒ–ä¸ºå‡ ä½•å­¦â€”â€”åœ¨å¤ªé˜³ç›´å°„èµ›ä¼Šå°¼åŸçš„åŒä¸€æ—¶åˆ»ï¼Œäºäºšå†å±±å¤§æ¸¯æµ‹å¾— 7 åº¦çš„å¤¹è§’â€”â€”ä»è€Œè®¡ç®—å‡ºåœ°çƒçš„å‘¨é•¿ã€‚</p>
<p>å“ˆæ ¼é‡Œå¤«æ–¯çš„ã€Œçå¦®çººçº±æœºã€å‡­å€Ÿä¸€ä¸ªç©ºé—´æ´è§å½»åº•æ”¹å˜äº†çººç»‡ä¸šï¼šå°†å¤šä¸ªçººé”¤å¹¶æ’ç½®äºåŒä¸€æ¡†æ¶å†…ï¼Œä½¿å¾—ä¸€åå·¥äººèƒ½åŒæ—¶çººç»‡å¤šæ ¹çº±çº¿ï¼Œç”Ÿäº§æ•ˆç‡æå‡äº†å…«å€ã€‚</p>
<p>æ²ƒæ£®å’Œå…‹é‡Œå…‹é€šè¿‡äº²æ‰‹æ­å»º 3D åˆ†å­æ¨¡å‹å‘ç°äº† DNA çš„ç»“æ„ï¼Œä»–ä»¬ä¸æ–­æ‘†å¼„é‡‘å±æ¿å’Œé‡‘å±ä¸ï¼Œç›´è‡³ç¢±åŸºå¯¹çš„ç©ºé—´æ’åˆ—ã€Œå’”å“’ã€ä¸€å£°å®Œç¾å¥‘åˆã€‚</p>
<p>åœ¨æ¯ä¸€ä¸ªæ¡ˆä¾‹ä¸­ï¼Œå½“ç§‘å­¦å®¶å’Œå‘æ˜å®¶éœ€è¦æ“æ§ç‰©ä½“ã€æ„æƒ³ç»“æ„ã€æ¨ç†ç‰©ç†ç©ºé—´æ—¶ï¼Œç©ºé—´æ™ºèƒ½éƒ½æ¨åŠ¨äº†æ–‡æ˜çš„è¿›æ­¥â€”â€”è€Œè¿™äº›ï¼Œéƒ½éæ–‡å­—æ‰€èƒ½å•ç‹¬æ‰¿è½½ã€‚</p>
<p>ç©ºé—´æ™ºèƒ½æ˜¯æˆ‘ä»¬è®¤çŸ¥èµ–ä»¥æ„å»ºçš„åŸºçŸ³ã€‚æ— è®ºæˆ‘ä»¬æ˜¯è¢«åŠ¨è§‚å¯Ÿè¿˜æ˜¯ä¸»åŠ¨åˆ›é€ ï¼Œå®ƒéƒ½åœ¨å‘æŒ¥ä½œç”¨ã€‚å®ƒé©±åŠ¨ç€æˆ‘ä»¬çš„æ¨ç†ä¸è§„åˆ’ï¼Œå³ä¾¿æ˜¯é¢å¯¹æœ€æŠ½è±¡çš„è®®é¢˜ã€‚</p>
<p>å®ƒå¯¹äºæˆ‘ä»¬äº’åŠ¨çš„æ–¹å¼â€”â€”æ— è®ºæ˜¯å£å¤´è¿˜æ˜¯è‚¢ä½“ï¼Œä¸åŒä¼´è¿˜æ˜¯ä¸ç¯å¢ƒæœ¬èº«â€”â€”éƒ½è‡³å…³é‡è¦ã€‚</p>
<p>è™½ç„¶æˆ‘ä»¬å¤§å¤šæ•°äººå¹¶éæ¯å¤©éƒ½èƒ½åƒåŸƒæ‹‰æ‰˜è‰²å°¼é‚£æ ·æ­ç¤ºæ–°çš„å®‡å®™çœŸç†ï¼Œä½†æˆ‘ä»¬æ—¥å¸¸çš„æ€è€ƒæ–¹å¼ä¸ä»–å¹¶æ— äºŒè‡´â€”â€”é€šè¿‡æ„Ÿå®˜æ„ŸçŸ¥å¤æ‚çš„ä¸–ç•Œï¼Œå†åˆ©ç”¨ä¸€ç§å¯¹ç‰©ç†ã€ç©ºé—´è¿ä½œæ–¹å¼çš„ç›´è§‚ç†è§£æ¥èµ‹äºˆå…¶æ„ä¹‰ã€‚</p>
<p>ä¸å¹¸çš„æ˜¯ï¼Œä»Šå¤©çš„ AI è¿˜ä¸èƒ½è¿™æ ·æ€è€ƒã€‚</p>
<p>è¿‡å»å‡ å¹´ç¡®å®å–å¾—äº†å·¨å¤§è¿›æ­¥ã€‚å¤šæ¨¡æ€å¤§è¯­è¨€æ¨¡å‹ï¼ˆMLLMï¼‰é™¤äº†æ–‡æœ¬æ•°æ®å¤–ï¼Œè¿˜ç”¨å¤§é‡çš„å¤šåª’ä½“æ•°æ®è¿›è¡Œè®­ç»ƒï¼Œå¼•å…¥äº†ä¸€äº›åŸºæœ¬çš„ç©ºé—´æ„è¯†ï¼Œä»Šå¤©çš„ AI å¯ä»¥åˆ†æå›¾ç‰‡ã€å›ç­”å…³äºå›¾ç‰‡çš„é—®é¢˜ï¼Œå¹¶ç”Ÿæˆè¶…é€¼çœŸçš„å›¾åƒå’ŒçŸ­è§†é¢‘ã€‚</p>
<p>é€šè¿‡ä¼ æ„Ÿå™¨å’Œè§¦è§‰æŠ€æœ¯çš„çªç ´ï¼Œæˆ‘ä»¬æœ€å…ˆè¿›çš„æœºå™¨äººå¯ä»¥åœ¨é«˜åº¦å—é™çš„ç¯å¢ƒä¸­å¼€å§‹æ“çºµç‰©ä½“å’Œå·¥å…·ã€‚</p>
<p>ç„¶è€Œï¼Œå¦ç‡çš„çœŸç›¸æ˜¯ï¼ŒAI çš„ç©ºé—´èƒ½åŠ›ä»è¿œæœªè¾¾åˆ°äººç±»æ°´å¹³ï¼Œå…¶å±€é™æ€§å¾ˆå¿«ä¾¿ä¼šæš´éœ²æ— é—ã€‚</p>
<p>åœ¨ä¼°ç®—è·ç¦»ã€æ–¹å‘å’Œå°ºå¯¸ï¼Œæˆ–é€šè¿‡ä»æ–°è§’åº¦ç”Ÿæˆå›¾åƒæ¥è¿›è¡Œç‰©ä½“çš„ã€Œå¿ƒç†æ—‹è½¬ã€ç­‰ä»»åŠ¡ä¸Šï¼Œæœ€å…ˆè¿›çš„ MLLM æ¨¡å‹çš„è¡¨ç°é²œæœ‰è¶…è¿‡éšæœºçŒœæµ‹çš„ã€‚å®ƒä»¬æ— æ³•èµ°å‡ºè¿·å®«ã€è¯†åˆ«æ·å¾„æˆ–é¢„æµ‹åŸºæœ¬çš„ç‰©ç†ç°è±¡ã€‚AI ç”Ÿæˆçš„è§†é¢‘â€”â€”å°½ç®¡åˆéœ²é”‹èŠ’ï¼Œä¸”çš„ç¡®é…·ç‚«â€”â€”é€šå¸¸åœ¨å‡ ç§’é’Ÿåä¾¿ä¼šå¤±å»è¿è´¯æ€§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b340585e1e4944e6abfcad97ef8d36ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763449001&amp;x-signature=recFCQrFTmWApvhn%2FYFdE%2F80rnU%3D" alt="" loading="lazy"/></p>
<p>è™½ç„¶å½“å‰æœ€å…ˆè¿›çš„ AI åœ¨é˜…è¯»ã€å†™ä½œã€ç ”ç©¶å’Œæ•°æ®æ¨¡å¼è¯†åˆ«æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œä½†è¿™äº›æ¨¡å‹åœ¨è¡¨å¾æˆ–ä¸ç‰©ç†ä¸–ç•Œäº’åŠ¨æ—¶ï¼Œå´å­˜åœ¨æ ¹æœ¬æ€§çš„å±€é™ã€‚</p>
<p>æˆ‘ä»¬å¯¹ä¸–ç•Œçš„çœ‹æ³•æ˜¯æ•´ä½“æ€§çš„â€”â€”ä¸ä»…ä»…æ˜¯çœ¼å‰æ‰€è§ï¼Œè¿˜åŒ…æ‹¬ä¸‡ç‰©åœ¨ç©ºé—´ä¸Šçš„ç›¸äº’å…³è”ã€å…¶æ„ä¹‰ä»¥åŠå…¶é‡è¦æ€§ã€‚é€šè¿‡æƒ³è±¡ã€æ¨ç†ã€åˆ›é€ å’Œäº’åŠ¨â€”â€”è€Œä¸ä»…æ˜¯æè¿°â€”â€”æ¥ç†è§£è¿™ä¸€åˆ‡ï¼Œæ­£æ˜¯ç©ºé—´æ™ºèƒ½çš„åŠ›é‡æ‰€åœ¨ã€‚</p>
<p>è‹¥æ— æ­¤èƒ½åŠ›ï¼ŒAI ä¾¿ä¸å®ƒè¯•å›¾ç†è§£çš„ç‰©ç†ç°å®è„±èŠ‚ã€‚å®ƒå°†æ— æ³•æœ‰æ•ˆåœ°é©¾é©¶æˆ‘ä»¬çš„æ±½è½¦ï¼Œå¼•å¯¼å®¶ä¸­çš„æœºå™¨äººæˆ–åŒ»é™¢çš„æŠ¤ç†æœºå™¨äººï¼Œä¹Ÿæ— æ³•ä¸ºå­¦ä¹ å’Œå¨±ä¹å¼€å¯å…¨æ–°çš„æ²‰æµ¸å¼äº’åŠ¨ä½“éªŒï¼Œæ›´æ— æ³•åŠ é€Ÿææ–™ç§‘å­¦å’ŒåŒ»å­¦é¢†åŸŸçš„æ¢ç´¢å‘ç°ã€‚</p>
<p>å“²å­¦å®¶ç»´ç‰¹æ ¹æ–¯å¦æ›¾å†™é“ï¼šã€Œæˆ‘è¯­è¨€çš„æé™ï¼Œæ„å‘³ç€æˆ‘ä¸–ç•Œçš„æé™ã€‚ã€æˆ‘ä¸æ˜¯å“²å­¦å®¶ï¼Œä½†æˆ‘æ·±çŸ¥ï¼Œè‡³å°‘å¯¹ AI è€Œè¨€ï¼Œä¸–ç•Œè¿œä¸æ­¢äºæ–‡å­—ã€‚</p>
<p>ç©ºé—´æ™ºèƒ½ä»£è¡¨äº†è¶…è¶Šè¯­è¨€çš„å‰æ²¿â€”â€”å®ƒæ˜¯ä¸€ç§å°†æƒ³è±¡ã€æ„ŸçŸ¥ä¸è¡ŒåŠ¨èä¼šè´¯é€šçš„èƒ½åŠ›ï¼Œä¸ºæœºå™¨çœŸæ­£æå‡äººç±»ç”Ÿæ´»å¼€å¯äº†æ— é™å¯èƒ½ï¼Œä»åŒ»ç–—å¥åº·åˆ°åˆ›æ„æŒ¥æ´’ï¼Œä»ç§‘å­¦æ¢ç´¢åˆ°æ—¥å¸¸è¾…åŠ©ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a6fe151b8d544e5a3921fb045de9f34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763449001&amp;x-signature=9cR53sYM1liCrUbbQHH0B3CvVZY%3D" alt="" loading="lazy"/></p>
<p><strong>ã€ŒAI çš„ä¸‹ä¸€ä¸ªåå¹´ï¼šã€</strong></p>
<p><strong>ã€Œæ„å»ºçœŸæ­£å…·å¤‡ç©ºé—´æ™ºèƒ½çš„æœºå™¨ã€</strong></p>
<p>é‚£ä¹ˆï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•æ„å»ºå…·å¤‡ç©ºé—´æ™ºèƒ½çš„ AIï¼Ÿ</p>
<p>å¦‚ä½•æ‰èƒ½æ‰“é€ å‡ºèƒ½å¤ŸåƒåŸƒæ‹‰æ‰˜è‰²å°¼ä¸€æ ·æ´å¯Ÿæ·±è¿œã€åƒå·¥ä¸šè®¾è®¡å¸ˆä¸€æ ·ç²¾é›•ç»†ç¢ã€åƒæ•…äº‹è®²è¿°å®¶ä¸€æ ·å¤©é©¬è¡Œç©ºï¼Œå¹¶åƒæ€¥æ•‘äººå‘˜ä¸€æ ·æ•æ·è‡ªå¦‚åœ°ä¸ç¯å¢ƒäº’åŠ¨çš„æ¨¡å‹ï¼Ÿ</p>
<p>æ„å»ºå…·å¤‡ç©ºé—´æ™ºèƒ½çš„ AI éœ€è¦æ¯”å¤§è¯­è¨€æ¨¡å‹æ›´ä¸ºå®å¤§çš„æ„æƒ³ï¼š<strong>ã€Œä¸–ç•Œæ¨¡å‹ã€‚ã€</strong></p>
<p>è¿™æ˜¯ä¸€ç§æ–°å‹çš„ç”Ÿæˆæ¨¡å‹ï¼Œå…¶ç†è§£ã€æ¨ç†ã€ç”Ÿæˆä»¥åŠä¸è¯­ä¹‰ã€ç‰©ç†ã€å‡ ä½•å’ŒåŠ¨æ€ä¸Šéƒ½æä¸ºå¤æ‚çš„è™šæ‹Ÿæˆ–çœŸå®ä¸–ç•Œè¿›è¡Œäº’åŠ¨çš„èƒ½åŠ›ï¼Œè¿œéä»Šæ—¥çš„ LLM æ‰€èƒ½ä¼åŠã€‚</p>
<p>ä¸è¿‡ï¼Œè¿™ä¸€é¢†åŸŸå°šå¤„èŒèŠ½é˜¶æ®µï¼Œå½“å‰æ–¹æ³•æ¶µç›–äº†ä»æŠ½è±¡æ¨ç†æ¨¡å‹åˆ°è§†é¢‘ç”Ÿæˆç³»ç»Ÿçš„å„ç§æ¢ç´¢ã€‚</p>
<p>World Labs æ­£æ˜¯åŸºäºè¿™ä¸€ä¿¡å¿µäº 2024 å¹´åˆåˆ›ç«‹çš„ï¼šåŸºç¡€æ–¹æ³•å°šåœ¨å»ºç«‹ä¹‹ä¸­ï¼Œè€Œè¿™å°†æˆä¸ºæœªæ¥åå¹´çš„å†³å®šæ€§æŒ‘æˆ˜ã€‚</p>
<p>åœ¨è¿™ä¸ªæ–°å…´é¢†åŸŸï¼Œæœ€é‡è¦çš„æ˜¯ç¡®ç«‹æŒ‡å¯¼å‘å±•çš„åŸºæœ¬åŸåˆ™ã€‚å¯¹äºç©ºé—´æ™ºèƒ½ï¼Œæˆ‘é€šè¿‡ä¸‰å¤§æ ¸å¿ƒèƒ½åŠ›æ¥å®šä¹‰ä¸–ç•Œæ¨¡å‹ï¼š</p>
<p><strong>ã€Œ1. ç”Ÿæˆå¼ï¼šä¸–ç•Œæ¨¡å‹èƒ½ç”Ÿæˆåœ¨æ„ŸçŸ¥ã€å‡ ä½•å’Œç‰©ç†å±‚é¢ä¿æŒä¸€è‡´çš„ä¸–ç•Œã€</strong></p>
<p>èƒ½è§£é”ç©ºé—´ç†è§£ä¸æ¨ç†èƒ½åŠ›çš„ä¸–ç•Œæ¨¡å‹ï¼Œä¹Ÿå¿…é¡»èƒ½ç”Ÿæˆå±äºè‡ªå·±çš„æ¨¡æ‹Ÿä¸–ç•Œã€‚</p>
<p>å®ƒä»¬å¿…é¡»èƒ½å¤Ÿç”Ÿæˆæ— ç©·æ— å°½ã€åƒå˜ä¸‡åŒ–çš„æ¨¡æ‹Ÿä¸–ç•Œï¼Œè¿™äº›ä¸–ç•Œéµå¾ªè¯­ä¹‰æˆ–æ„ŸçŸ¥æŒ‡ä»¤ï¼ŒåŒæ—¶åœ¨å‡ ä½•ã€ç‰©ç†å’ŒåŠ¨æ€å±‚é¢ä¿æŒä¸€è‡´æ€§â€”â€”æ— è®ºå…¶è¡¨å¾çš„æ˜¯çœŸå®ç©ºé—´è¿˜æ˜¯è™šæ‹Ÿç©ºé—´ã€‚</p>
<p>ç ”ç©¶ç•Œæ­£åœ¨ç§¯ææ¢ç´¢ï¼Œè¿™äº›ä¸–ç•Œå›ºæœ‰çš„å‡ ä½•ç»“æ„åº”è¯¥è¢«éšå¼è¡¨å¾è¿˜æ˜¯æ˜¾å¼è¡¨å¾ã€‚</p>
<p>æ­¤å¤–ï¼Œæˆ‘ç›¸ä¿¡ï¼Œé™¤äº†å¼ºå¤§çš„æ½œåœ¨è¡¨å¾ï¼Œä¸€ä¸ªé€šç”¨çš„ä¸–ç•Œæ¨¡å‹çš„è¾“å‡ºè¿˜å¿…é¡»èƒ½ä¸ºä¼—å¤šä¸åŒçš„ç”¨ä¾‹ç”Ÿæˆä¸€ä¸ªæ˜¾å¼çš„ã€å¯è§‚å¯Ÿçš„ä¸–ç•ŒçŠ¶æ€ã€‚</p>
<p>å°¤å…¶é‡è¦çš„æ˜¯ï¼Œå®ƒå¯¹å½“å‰çŠ¶æ€çš„ç†è§£å¿…é¡»ä¸å…¶è¿‡å»â€”â€”å³å¯¼è‡´å½“å‰çŠ¶æ€çš„å…ˆå‰ä¸–ç•ŒçŠ¶æ€â€”â€”è¿è´¯åœ°è”ç³»åœ¨ä¸€èµ·ã€‚</p>
<p><strong>ã€Œ2. å¤šæ¨¡æ€ï¼šä¸–ç•Œæ¨¡å‹åœ¨è®¾è®¡ä¸Šæ˜¯å¤šæ¨¡æ€çš„ã€</strong></p>
<p>æ­£å¦‚åŠ¨ç‰©ä¸äººç±»ä¸€æ ·ï¼Œä¸–ç•Œæ¨¡å‹åº”è¯¥èƒ½å¤Ÿå¤„ç†å¤šç§å½¢å¼çš„è¾“å…¥â€”â€”åœ¨ç”Ÿæˆå¼ AI é¢†åŸŸï¼Œè¿™è¢«ç§°ä¸ºã€Œæç¤ºè¯ã€ã€‚</p>
<p>åœ¨ç»™å®šéƒ¨åˆ†ä¿¡æ¯â€”â€”æ— è®ºæ˜¯å›¾åƒã€è§†é¢‘ã€æ·±åº¦å›¾ã€æ–‡æœ¬æŒ‡ä»¤ã€æ‰‹åŠ¿è¿˜æ˜¯åŠ¨ä½œâ€”â€”çš„æƒ…å†µä¸‹ï¼Œä¸–ç•Œæ¨¡å‹åº”èƒ½é¢„æµ‹æˆ–ç”Ÿæˆå°½å¯èƒ½å®Œæ•´çš„ä¸–ç•ŒçŠ¶æ€ã€‚</p>
<p>è¿™è¦æ±‚å®ƒæ—¢èƒ½ä»¥çœŸå®è§†è§‰çš„ä¿çœŸåº¦å¤„ç†è§†è§‰è¾“å…¥ï¼Œåˆèƒ½åŒæ ·è‡ªå¦‚åœ°è§£è¯»è¯­ä¹‰æŒ‡ä»¤ã€‚</p>
<p>è¿™ä½¿å¾—æ™ºèƒ½ä½“å’Œäººç±»éƒ½èƒ½é€šè¿‡å¤šæ ·åŒ–çš„è¾“å…¥ä¸æ¨¡å‹ä¸ä¸–ç•Œè¿›è¡Œäº¤æµï¼Œå¹¶åè¿‡æ¥æ¥æ”¶å¤šæ ·åŒ–çš„è¾“å‡ºã€‚</p>
<p><strong>ã€Œ3. äº’åŠ¨æ€§ï¼šä¸–ç•Œæ¨¡å‹èƒ½æ ¹æ®è¾“å…¥çš„åŠ¨ä½œè¾“å‡ºä¸‹ä¸€ä¸ªçŠ¶æ€ã€</strong></p>
<p>æœ€åï¼Œå¦‚æœåŠ¨ä½œå’Œ / æˆ–ç›®æ ‡æ˜¯ç»™äºˆä¸–ç•Œæ¨¡å‹çš„æç¤ºè¯çš„ä¸€éƒ¨åˆ†ï¼Œé‚£ä¹ˆå…¶è¾“å‡ºå¿…é¡»åŒ…å«ä¸–ç•Œçš„ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼Œæ— è®ºæ˜¯éšå¼è¿˜æ˜¯æ˜¾å¼è¡¨å¾ã€‚</p>
<p>å½“ä»…ç»™å®šä¸€ä¸ªåŠ¨ä½œï¼ˆæ— è®ºæ˜¯å¦åŒ…å«ç›®æ ‡çŠ¶æ€ï¼‰ä½œä¸ºè¾“å…¥æ—¶ï¼Œä¸–ç•Œæ¨¡å‹äº§ç”Ÿçš„è¾“å‡ºå¿…é¡»ä¸ä¸–ç•Œå…ˆå‰çš„çŠ¶æ€ã€ä»»ä½•é¢„è®¾çš„ç›®æ ‡çŠ¶æ€ã€å…¶è¯­ä¹‰å«ä¹‰ã€ç‰©ç†å®šå¾‹ä»¥åŠåŠ¨æ€è¡Œä¸ºä¿æŒä¸€è‡´ã€‚</p>
<p>éšç€å…·å¤‡ç©ºé—´æ™ºèƒ½çš„ä¸–ç•Œæ¨¡å‹åœ¨æ¨ç†å’Œç”Ÿæˆèƒ½åŠ›ä¸Šå˜å¾—æ—¥ç›Šå¼ºå¤§å’Œç¨³å¥ï¼Œå¯ä»¥æƒ³è§ï¼Œåœ¨ç»™å®šç›®æ ‡çš„æƒ…å†µä¸‹ï¼Œä¸–ç•Œæ¨¡å‹æœ¬èº«å°†ä¸ä»…èƒ½é¢„æµ‹ä¸–ç•Œçš„ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼Œç”šè‡³è¿˜èƒ½åŸºäºæ–°çŠ¶æ€é¢„æµ‹å‡ºä¸‹ä¸€æ­¥çš„åŠ¨ä½œã€‚</p>
<p><strong>ã€Œè¿™é¡¹æŒ‘æˆ˜çš„å¹¿åº¦ä¸æ·±åº¦ï¼Œè¶…è¶Šäº†ã€</strong> <strong>ã€ŒAIã€</strong> <strong>ã€Œä»¥å¾€æ‰€é¢å¯¹çš„ä»»ä½•è¯¾é¢˜ã€‚ã€</strong></p>
<p>è¯­è¨€æ˜¯äººç±»è®¤çŸ¥ä¸­çº¯ç²¹çš„ç”Ÿæˆç°è±¡ï¼Œè€Œä¸–ç•Œåˆ™éµå¾ªç€è¿œä¸ºå¤æ‚çš„è§„åˆ™ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨åœ°çƒä¸Šï¼Œå¼•åŠ›æ”¯é…è¿åŠ¨ï¼ŒåŸå­ç»“æ„å†³å®šå…‰å¦‚ä½•äº§ç”Ÿè‰²å½©ä¸äº®åº¦ï¼Œæ— æ•°ç‰©ç†å®šå¾‹çº¦æŸç€æ¯ä¸€æ¬¡äº’åŠ¨ã€‚å³ä¾¿æ˜¯æœ€å¤©é©¬è¡Œç©ºçš„åˆ›æ„ä¸–ç•Œï¼Œä¹Ÿç”±éµå¾ªå…¶è‡ªèº«ç‰©ç†å®šå¾‹å’ŒåŠ¨æ€è¡Œä¸ºçš„ç©ºé—´ç‰©ä½“ä¸æ™ºèƒ½ä½“æ„æˆã€‚</p>
<p>è¦å°†è¿™ä¸€åˆ‡â€”â€”è¯­ä¹‰ã€å‡ ä½•ã€åŠ¨æ€ä¸ç‰©ç†â€”â€”æŒç»­ä¸€è‡´åœ°è°ƒå’Œèµ·æ¥ï¼Œéœ€è¦å…¨æ–°çš„æ–¹æ³•è®ºã€‚è¡¨å¾ä¸€ä¸ªä¸–ç•Œçš„ç»´åº¦ï¼Œè¿œæ¯”åƒè¯­è¨€è¿™æ ·çš„ä¸€ç»´ã€é¡ºåºä¿¡å·å¤æ‚å¾—å¤šã€‚</p>
<p>è¦å®ç°èƒ½æä¾›å¦‚äººç±»èˆ¬é€šç”¨èƒ½åŠ›çš„ä¸–ç•Œæ¨¡å‹ï¼Œéœ€è¦å…‹æœè‹¥å¹²ä¸¥å³»çš„æŠ€æœ¯å£å’ã€‚åœ¨ World Labsï¼Œæˆ‘ä»¬çš„ç ”ç©¶å›¢é˜Ÿæ­£è‡´åŠ›äºæœæ­¤ç›®æ ‡å–å¾—æ ¹æœ¬æ€§çš„è¿›å±•ã€‚</p>
<p>ä»¥ä¸‹æ˜¯æˆ‘ä»¬å½“å‰ç ”ç©¶è¯¾é¢˜çš„ä¸€äº›ç¤ºä¾‹ã€‚</p>
<p><strong>ã€ŒÂ· ä¸€ç§æ–°çš„ã€é€šç”¨çš„è®­ç»ƒä»»åŠ¡å‡½æ•°ï¼šã€</strong></p>
<p>å®šä¹‰ä¸€ä¸ªåƒ LLM ä¸­ã€Œé¢„æµ‹ä¸‹ä¸€ä¸ª tokenã€ä¸€æ ·ç®€æ´è€Œä¼˜é›…çš„é€šç”¨ä»»åŠ¡å‡½æ•°ï¼Œé•¿ä¹…ä»¥æ¥éƒ½æ˜¯ä¸–ç•Œæ¨¡å‹ç ”ç©¶çš„æ ¸å¿ƒç›®æ ‡ã€‚ç”±äºå…¶è¾“å…¥å’Œè¾“å‡ºç©ºé—´çš„å¤æ‚æ€§ï¼Œè¿™ç§å‡½æ•°çš„æ„å»ºæœ¬è´¨ä¸Šæ›´åŠ å›°éš¾ã€‚</p>
<p>å°½ç®¡ä»æœ‰å¾…æ¢ç´¢ï¼Œä½†è¿™ä¸ªç›®æ ‡å‡½æ•°åŠç›¸åº”çš„è¡¨å¾å¿…é¡»èƒ½åæ˜ å‡ ä½•ä¸ç‰©ç†å®šå¾‹ï¼Œå°Šé‡ä¸–ç•Œæ¨¡å‹ä½œä¸ºæƒ³è±¡ä¸ç°å®ä¹‹æ ¹åŸºè¡¨å¾çš„æœ¬è´¨ã€‚</p>
<p><strong>ã€ŒÂ· å¤§è§„æ¨¡</strong>ã€Œ<strong>ã€Œè®­ç»ƒæ•°æ®ã€</strong>ã€<strong>ï¼šã€</strong></p>
<p>è®­ç»ƒä¸–ç•Œæ¨¡å‹éœ€è¦æ¯”æ–‡æœ¬æ•´ç†å¤æ‚å¾—å¤šçš„æ•°æ®ã€‚å¥½æ¶ˆæ¯æ˜¯ï¼šæµ·é‡çš„æ•°æ®æºä¸šå·²å­˜åœ¨ã€‚</p>
<p>äº’è”ç½‘è§„æ¨¡çš„å›¾åƒå’Œè§†é¢‘é›†æ˜¯ä¸°å¯Œä¸”æ˜“äºè·å–çš„è®­ç»ƒææ–™â€”â€”æŒ‘æˆ˜åœ¨äºå¼€å‘èƒ½å¤Ÿä»è¿™äº›äºŒç»´å›¾åƒæˆ–è§†é¢‘å¸§ä¿¡å·ï¼ˆå³ RGBï¼‰ä¸­æå–æ›´æ·±å±‚æ¬¡ç©ºé—´ä¿¡æ¯çš„ç®—æ³•ã€‚</p>
<p>è¿‡å»åå¹´çš„ç ”ç©¶å·²è¯æ˜äº†è¯­è¨€æ¨¡å‹ä¸­æ•°æ®é‡ä¸æ¨¡å‹å¤§å°ä¹‹é—´çš„ã€Œè§„æ¨¡å®šå¾‹ã€çš„åŠ›é‡ï¼›ä¸–ç•Œæ¨¡å‹çš„å…³é”®çªç ´åœ¨äºæ„å»ºèƒ½å¤Ÿä»¥ç›¸å½“è§„æ¨¡åˆ©ç”¨ç°æœ‰è§†è§‰æ•°æ®çš„æ¶æ„ã€‚</p>
<p>æ­¤å¤–ï¼Œæˆ‘ç»ä¸ä¼šä½ä¼°é«˜è´¨é‡åˆæˆæ•°æ®ä»¥åŠæ·±åº¦ã€è§¦è§‰ä¿¡æ¯ç­‰é¢å¤–æ¨¡æ€çš„åŠ›é‡ã€‚å®ƒä»¬åœ¨è®­ç»ƒè¿‡ç¨‹çš„å…³é”®é˜¶æ®µå¯¹äº’è”ç½‘è§„æ¨¡çš„æ•°æ®å½¢æˆäº†é‡è¦è¡¥å……ã€‚</p>
<p>ä½†å‰è·¯æ¼«æ¼«ï¼Œè¿™æœ‰èµ–äºæ›´å¥½çš„ä¼ æ„Ÿå™¨ç³»ç»Ÿã€æ›´ç¨³å¥çš„ä¿¡å·æå–ç®—æ³•ä»¥åŠè¿œä¸ºå¼ºå¤§çš„ç¥ç»æ¨¡æ‹Ÿæ–¹æ³•ã€‚</p>
<p><strong>ã€ŒÂ· æ–°çš„æ¨¡å‹æ¶æ„ä¸è¡¨å¾å­¦ä¹ ï¼šã€</strong></p>
<p>ä¸–ç•Œæ¨¡å‹çš„ç ”ç©¶å°†ä¸å¯é¿å…åœ°æ¨åŠ¨æ¨¡å‹æ¶æ„ä¸å­¦ä¹ ç®—æ³•çš„è¿›æ­¥ï¼Œå°¤å…¶æ˜¯åœ¨å½“å‰ MLLM å’Œè§†é¢‘æ‰©æ•£èŒƒå¼ä¹‹å¤–ã€‚</p>
<p>è¿™ä¸¤ç§èŒƒå¼é€šå¸¸å°†æ•°æ®ã€Œtoken åŒ–ã€ä¸ºä¸€ç»´æˆ–äºŒç»´åºåˆ—ï¼Œè¿™ä½¿å¾—ä¸€äº›ç®€å•çš„ç©ºé—´ä»»åŠ¡å˜å¾—å¼‚å¸¸å›°éš¾â€”â€”ä¾‹å¦‚ï¼Œè®¡ç®—ä¸€ä¸ªçŸ­è§†é¢‘ä¸­ä¸é‡å¤çš„æ¤…å­æ•°é‡ï¼Œæˆ–è€…è®°ä½ä¸€ä¸ªå°æ—¶å‰æˆ¿é—´çš„æ ·è²Œã€‚</p>
<p>æ›¿ä»£æ€§æ¶æ„æˆ–å¯åŠ©ä¸€è‡‚ä¹‹åŠ›ï¼Œä¾‹å¦‚å…·å¤‡ä¸‰ç»´æˆ–å››ç»´æ„ŸçŸ¥èƒ½åŠ›çš„ token åŒ–ã€ä¸Šä¸‹æ–‡å’Œè®°å¿†æ–¹æ³•ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨ World Labsï¼Œæˆ‘ä»¬è¿‘æœŸå…³äºä¸€ä¸ªåä¸º RTFM çš„å®æ—¶ç”Ÿæˆæ€§å¸§åŸºæ¨¡å‹çš„å·¥ä½œå°±å±•ç¤ºäº†è¿™ç§è½¬å˜ï¼Œå®ƒä½¿ç”¨åŸºäºç©ºé—´çš„å¸§ä½œä¸ºä¸€ç§ç©ºé—´è®°å¿†å½¢å¼ï¼Œä»¥å®ç°é«˜æ•ˆçš„å®æ—¶ç”Ÿæˆï¼ŒåŒæ—¶åœ¨ç”Ÿæˆçš„ä¸–ç•Œä¸­ä¿æŒæŒä¹…æ€§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/168a8b744efb425d84d6eb1e561f4c7b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763449001&amp;x-signature=lga6I%2FjLBptCAzfkfiVlGKgvmX0%3D" alt="" loading="lazy"/></p>
<p>æ˜¾ç„¶ï¼Œåœ¨æˆ‘ä»¬èƒ½å¤Ÿé€šè¿‡ä¸–ç•Œå»ºæ¨¡å®Œå…¨è§£é”ç©ºé—´æ™ºèƒ½ä¹‹å‰ï¼Œä»é¢ä¸´ç€è‰°å·¨çš„æŒ‘æˆ˜ã€‚è¿™é¡¹ç ”ç©¶ä¸ä»…æ˜¯ä¸€æ¬¡ç†è®ºæ¼”ç»ƒï¼Œå®ƒæ˜¯ä¸€ç±»æ–°å‹åˆ›æ„ä¸ç”Ÿäº§åŠ›å·¥å…·çš„æ ¸å¿ƒå¼•æ“ã€‚è€Œ World Labs å†…éƒ¨çš„è¿›å±•ä»¤äººé¼“èˆã€‚</p>
<p>æˆ‘ä»¬æœ€è¿‘å‘å°‘æ•°ç”¨æˆ·å±•ç¤ºäº† Marble çš„ä¸€ç¥â€”â€”è¿™æ˜¯é¦–ä¸ªèƒ½å¤Ÿé€šè¿‡å¤šæ¨¡æ€è¾“å…¥æç¤ºï¼Œæ¥ç”Ÿæˆå¹¶ç»´æŒä¸€è‡´ä¸‰ç»´ç¯å¢ƒçš„ä¸–ç•Œæ¨¡å‹ï¼Œä¾›ç”¨æˆ·å’Œæ•…äº‹è®²è¿°è€…åœ¨å…¶åˆ›æ„å·¥ä½œæµä¸­è¿›è¡Œæ¢ç´¢ã€äº’åŠ¨å’Œè¿›ä¸€æ­¥æ„å»ºã€‚æˆ‘ä»¬æ­£åŠªåŠ›ä½¿å…¶å°½å¿«å‘å…¬ä¼—å¼€æ”¾ï¼</p>
<p>Marble åªæ˜¯æˆ‘ä»¬åˆ›é€ çœŸæ­£å…·å¤‡ç©ºé—´æ™ºèƒ½çš„ä¸–ç•Œæ¨¡å‹çš„ç¬¬ä¸€æ­¥ã€‚éšç€è¿›å±•åŠ é€Ÿï¼Œç ”ç©¶äººå‘˜ã€å·¥ç¨‹å¸ˆã€ç”¨æˆ·å’Œå•†ç•Œé¢†è¢–éƒ½å¼€å§‹è®¤è¯†åˆ°å…¶éå‡¡çš„æ½œåŠ›ã€‚</p>
<p>ä¸‹ä¸€ä»£ä¸–ç•Œæ¨¡å‹å°†ä½¿æœºå™¨èƒ½å¤Ÿåœ¨å…¨æ–°å±‚é¢ä¸Šå®ç°ç©ºé—´æ™ºèƒ½â€”â€”è¿™ä¸€æˆå°±å°†è§£é”å½“ä»Š AI ç³»ç»Ÿä¸­ä»ç„¶æ™®éç¼ºå¤±çš„æ ¸å¿ƒèƒ½åŠ›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/931922a21a1c4d2e870624bb0e16a427~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763449001&amp;x-signature=WjjuBnL0upv4Oa4GknFZkuULj5A%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œç”¨ä¸–ç•Œæ¨¡å‹ä¸ºäººç±»æ„å»ºä¸€ä¸ªæ›´ç¾å¥½çš„ä¸–ç•Œã€</strong></p>
<p>æ˜¯ä»€ä¹ˆåœ¨æ¿€åŠ± AI çš„å‘å±•ï¼Ÿè¿™ä¸€ç‚¹è‡³å…³é‡è¦ã€‚</p>
<p>ä½œä¸ºååŠ©å¼€å¯ç°ä»£ AI æ—¶ä»£çš„ç§‘å­¦å®¶ä¹‹ä¸€ï¼Œæˆ‘çš„åŠ¨æœºå§‹ç»ˆæ˜ç¡®ï¼šAI å¿…é¡»å¢å¼ºäººç±»çš„èƒ½åŠ›ï¼Œè€Œéå–è€Œä»£ä¹‹ã€‚</p>
<p>å¤šå¹´æ¥ï¼Œæˆ‘ä¸€ç›´è‡´åŠ›äºä½¿ AI çš„å¼€å‘ã€éƒ¨ç½²å’Œæ²»ç†ä¸äººç±»çš„éœ€æ±‚ç›¸å¥‘åˆã€‚</p>
<p>å¦‚ä»Šï¼Œå…³äºæŠ€æœ¯ä¹Œæ‰˜é‚¦å’Œæœ«æ—¥è®ºçš„æç«¯å™äº‹ç”šåš£å°˜ä¸Šï¼Œä½†æˆ‘å§‹ç»ˆæŒæœ‰ä¸€ç§æ›´åŠ¡å®çš„è§‚ç‚¹ï¼šAI ç”±äººå¼€å‘ï¼Œä¸ºäººæ‰€ç”¨ï¼Œç”±äººæ²»ç†ã€‚</p>
<p>å®ƒå¿…é¡»å§‹ç»ˆå°Šé‡äººçš„èƒ½åŠ¨æ€§ä¸å°Šä¸¥ã€‚å®ƒçš„é­”åŠ›åœ¨äºæ‰©å±•æˆ‘ä»¬çš„èƒ½åŠ›ï¼Œè®©æˆ‘ä»¬æ›´æœ‰åˆ›é€ åŠ›ã€è”ç³»æ›´ç´§å¯†ã€æ•ˆç‡æ›´é«˜ã€ç”Ÿæ´»æ›´å……å®ã€‚</p>
<p>ç©ºé—´æ™ºèƒ½æ­£æ˜¯è¿™ä¸€æ„¿æ™¯çš„ä½“ç°â€”â€”AI èµ‹èƒ½äººç±»çš„åˆ›ä½œè€…ã€ç…§æŠ¤è€…ã€ç§‘å­¦å®¶å’Œæ¢¦æƒ³å®¶ï¼Œå»å®ç°æ›¾ç»çš„ä¸å¯èƒ½ã€‚è¿™ä¸€ä¿¡å¿µï¼Œæ˜¯æˆ‘å°†ç©ºé—´æ™ºèƒ½ä½œä¸º AI ä¸‹ä¸€ä¸ªä¼Ÿå¤§å‰æ²¿å¹¶ä¸ºä¹‹å¥‹æ–—çš„åŠ¨åŠ›ã€‚</p>
<p>ç©ºé—´æ™ºèƒ½çš„åº”ç”¨æ¨ªè·¨ä¸åŒçš„æ—¶é—´å°ºåº¦ã€‚åˆ›æ„å·¥å…·æ­£ä¸æ–­æ¶Œç°â€”â€”World Labs çš„ Marble é¡¹ç›®å·²ç»å°†è¿™äº›èƒ½åŠ›äº¤åˆ°äº†åˆ›ä½œè€…å’Œæ•…äº‹è®²è¿°è€…çš„æ‰‹ä¸­ã€‚</p>
<p>éšç€æˆ‘ä»¬ä¸æ–­å®Œå–„æ„ŸçŸ¥ä¸è¡ŒåŠ¨ä¹‹é—´çš„é—­ç¯ï¼Œæœºå™¨äººæŠ€æœ¯å°†æ˜¯é›„å¿ƒå‹ƒå‹ƒçš„ä¸­æœŸç›®æ ‡ã€‚è€Œæœ€å…·å˜é©æ€§çš„ç§‘å­¦åº”ç”¨è™½ç„¶éœ€è¦æ›´é•¿æ—¶é—´ï¼Œä½†æœ‰æœ›å¯¹äººç±»çš„ç¦ç¥‰äº§ç”Ÿæ·±è¿œå½±å“ã€‚</p>
<p>åœ¨æ‰€æœ‰è¿™äº›æ—¶é—´å°ºåº¦ä¸Šï¼Œæœ‰å‡ ä¸ªé¢†åŸŸå› å…¶é‡å¡‘äººç±»èƒ½åŠ›çš„æ½œåŠ›è€Œæ ¼å¤–çªå‡ºã€‚è¿™éœ€è¦å·¨å¤§çš„é›†ä½“åŠªåŠ›ï¼Œè¿œéä¸€ä¸ªå›¢é˜Ÿæˆ–ä¸€å®¶å…¬å¸æ‰€èƒ½å®ç°ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œå®ƒéœ€è¦æ•´ä¸ª AI ç”Ÿæ€ç³»ç»Ÿçš„å‚ä¸â€”â€”ç ”ç©¶äººå‘˜ã€åˆ›æ–°è€…ã€ä¼ä¸šå®¶ã€å…¬å¸ï¼Œä¹ƒè‡³æ”¿ç­–åˆ¶å®šè€…â€”â€”å…±åŒä¸ºå®ç°ä¸€ä¸ªå…±äº«çš„æ„¿æ™¯è€ŒåŠªåŠ›ã€‚</p>
<p>ä½†è¿™ä¸ªæ„¿æ™¯å€¼å¾—æˆ‘ä»¬å»è¿½æ±‚ã€‚ä»¥ä¸‹æ˜¯è¿™ä¸ªæœªæ¥æ‰€è•´å«çš„å›¾æ™¯ï¼š</p>
<p><strong>ã€Œ<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18b21018c5eb42a9b0194ab9db2ed0a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763449001&amp;x-signature=zXDqu3v2mqRhHC9DiNCygHl3kP8%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€Œåˆ›é€ åŠ›ï¼šä¸ºæ•…äº‹å™è¿°å’Œæ²‰æµ¸å¼ä½“éªŒæ³¨å…¥è¶…å‡¡åŠ¨åŠ›ã€</strong></p>
<p>ã€Œåˆ›é€ åŠ›æ˜¯æ™ºåŠ›åœ¨äº«å—ä¹è¶£ã€‚ã€è¿™æ˜¯æˆ‘æœ€å–œæ¬¢çš„ çˆ±å› æ–¯å¦åè¨€ä¹‹ä¸€ã€‚</p>
<p>æ—©åœ¨ä¹¦é¢è¯­è¨€å‡ºç°ä¹‹å‰ï¼Œäººç±»å°±å·²å¼€å§‹è®²è¿°æ•…äº‹â€”â€”å°†å…¶æç»˜äºæ´ç©´å²©å£ï¼Œä»£ä»£ç›¸ä¼ ï¼Œåœ¨å…±åŒçš„å™äº‹ä¹‹ä¸Šå»ºç«‹èµ·æ•´ä¸ªæ–‡åŒ–ã€‚</p>
<p>æ•…äº‹æ˜¯æˆ‘ä»¬ç†è§£ä¸–ç•Œã€è·¨è¶Šæ—¶ç©ºå»ºç«‹è”ç³»ã€æ¢ç´¢äººæ€§æ„ä¹‰çš„æ–¹å¼ï¼Œæœ€é‡è¦çš„æ˜¯ï¼Œåœ¨ç”Ÿæ´»ä¸­æ‰¾åˆ°æ„ä¹‰ï¼Œåœ¨å†…å¿ƒå‘ç°çˆ±ã€‚</p>
<p>ä»Šå¤©ï¼Œç©ºé—´æ™ºèƒ½æœ‰æ½œåŠ›æ”¹å˜æˆ‘ä»¬åˆ›é€ å’Œä½“éªŒå™äº‹çš„æ–¹å¼ï¼Œæ—¢å°Šé‡å…¶æ ¹æœ¬çš„é‡è¦æ€§ï¼Œåˆå°†å…¶å½±å“åŠ›ä»å¨±ä¹å»¶ä¼¸è‡³æ•™è‚²ï¼Œä»è®¾è®¡å»¶ä¼¸è‡³å»ºç­‘ã€‚</p>
<p>World Labs çš„ Marble å¹³å°å°†æŠŠå‰æ‰€æœªæœ‰çš„ç©ºé—´èƒ½åŠ›å’Œç¼–è¾‘å¯æ§æ€§äº¤åˆ°ç”µå½±åˆ¶ä½œäººã€æ¸¸æˆè®¾è®¡å¸ˆã€å»ºç­‘å¸ˆå’Œå„ç±»æ•…äº‹è®²è¿°è€…çš„æ‰‹ä¸­ï¼Œè®©ä»–ä»¬èƒ½å¤Ÿå¿«é€Ÿåˆ›é€ å’Œè¿­ä»£å®Œå…¨å¯æ¢ç´¢çš„ä¸‰ç»´ä¸–ç•Œï¼Œè€Œæ— éœ€ä¼ ç»Ÿä¸‰ç»´è®¾è®¡è½¯ä»¶çš„æ²‰é‡è´Ÿæ‹…ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7cdde3208f44aa2983dbd802d428324~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763449001&amp;x-signature=IYREf1ObOtVjszcznFZVWEqQBlU%3D" alt="" loading="lazy"/></p>
<p>åˆ›é€ è¡Œä¸ºæœ¬èº«ä¾ç„¶å¦‚æ•…ï¼Œå……æ»¡äººæ€§çš„æ´»åŠ›ï¼›AI å·¥å…·åªæ˜¯æ”¾å¤§å’ŒåŠ é€Ÿäº†åˆ›ä½œè€…æ‰€èƒ½è¾¾æˆçš„æˆå°±ã€‚è¿™åŒ…æ‹¬ï¼š</p>
<p>**æ–°ç»´åº¦çš„å™äº‹ä½“éªŒï¼š**ç”µå½±åˆ¶ä½œäººå’Œæ¸¸æˆè®¾è®¡å¸ˆæ­£ä½¿ç”¨ Marble å‡­ç©ºåˆ›é€ å‡ºæ•´ä¸ªä¸–ç•Œï¼Œä¸å—é¢„ç®—æˆ–åœ°ç†ä½ç½®çš„é™åˆ¶ï¼Œæ¢ç´¢åœ¨ä¼ ç»Ÿåˆ¶ä½œæµç¨‹ä¸­éš¾ä»¥ä¼åŠçš„å„ç§åœºæ™¯å’Œè§†è§’ã€‚</p>
<p>éšç€ä¸åŒå½¢å¼çš„åª’ä½“ä¸å¨±ä¹ä¹‹é—´çš„ç•Œé™æ—¥ç›Šæ¨¡ç³Šï¼Œæˆ‘ä»¬æ­£åœ¨æ¥è¿‘ä¸€ç§å…¨æ–°çš„äº’åŠ¨ä½“éªŒï¼Œå®ƒèåˆäº†è‰ºæœ¯ã€æ¨¡æ‹Ÿä¸æ¸¸æˆâ€”â€”ä¸ªæ€§åŒ–çš„ä¸–ç•Œï¼Œå…¶ä¸­ä»»ä½•äººï¼Œè€Œä¸ä»…æ˜¯å·¥ä½œå®¤ï¼Œéƒ½å¯ä»¥åˆ›é€ å¹¶æ²‰æµ¸åœ¨è‡ªå·±çš„æ•…äº‹ä¸­ã€‚</p>
<p>éšç€å°†æ¦‚å¿µå’Œæ•…äº‹æ¿è½¬åŒ–ä¸ºå®Œæ•´ä½“éªŒçš„æ›´æ–°ã€æ›´å¿«æ·çš„æ–¹å¼çš„å‡ºç°ï¼Œå™äº‹å°†ä¸å†å±€é™äºå•ä¸€åª’ä»‹ï¼Œåˆ›ä½œè€…å¯ä»¥è‡ªç”±åœ°åœ¨æ— æ•°çš„ç•Œé¢å’Œå¹³å°ä¸Šæ„å»ºå…·æœ‰å…±åŒä¸»çº¿çš„å¤§åƒä¸–ç•Œã€‚</p>
<p>**é€šè¿‡è®¾è®¡çš„ç©ºé—´å™äº‹ï¼š**å‡ ä¹æ¯ä¸€ä¸ªåˆ¶é€ çš„ç‰©ä½“æˆ–å»ºé€ çš„ç©ºé—´ï¼Œåœ¨å…¶å®ä½“åŒ–ä¹‹å‰éƒ½å¿…é¡»åœ¨è™šæ‹Ÿä¸‰ç»´ç¯å¢ƒä¸­è¿›è¡Œè®¾è®¡ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹åœ¨æ—¶é—´å’Œé‡‘é’±ä¸Šéƒ½é«˜åº¦è¿­ä»£ä¸”æˆæœ¬é«˜æ˜‚ã€‚æœ‰äº†å…·å¤‡ç©ºé—´æ™ºèƒ½çš„æ¨¡å‹ï¼Œå»ºç­‘å¸ˆå¯ä»¥å¿«é€Ÿæ„æƒ³ç»“æ„ï¼Œè€Œæ— éœ€æŠ•å…¥æ•°æœˆæ—¶é—´è¿›è¡Œè®¾è®¡ï¼Œä»–ä»¬å¯ä»¥åœ¨å°šæœªå­˜åœ¨çš„ç©ºé—´ä¸­æ¼«æ­¥â€”â€”è¿™æœ¬è´¨ä¸Šæ˜¯åœ¨è®²è¿°æˆ‘ä»¬æœªæ¥å¯èƒ½å¦‚ä½•ç”Ÿæ´»ã€å·¥ä½œå’Œèšé›†çš„æ•…äº‹ã€‚</p>
<p>å·¥ä¸šè®¾è®¡å¸ˆå’Œæ—¶è£…è®¾è®¡å¸ˆå¯ä»¥ç¬é—´å°†æƒ³è±¡è½¬åŒ–ä¸ºå½¢æ€ï¼Œæ¢ç´¢ç‰©ä½“å¦‚ä½•ä¸äººä½“å’Œç©ºé—´äº’åŠ¨ã€‚</p>
<p>**æ–°çš„æ²‰æµ¸å¼å’Œäº’åŠ¨ä½“éªŒï¼š**ä½“éªŒæœ¬èº«æ˜¯æˆ‘ä»¬ä½œä¸ºä¸€ä¸ªç‰©ç§åˆ›é€ æ„ä¹‰çš„æœ€æ·±å±‚æ–¹å¼ä¹‹ä¸€ã€‚</p>
<p>åœ¨æ•´ä¸ªäººç±»å†å²ä¸­ï¼Œåªæœ‰ä¸€ä¸ªå•ä¸€çš„ä¸‰ç»´ä¸–ç•Œï¼šæˆ‘ä»¬å…±åŒç”Ÿæ´»çš„ç‰©ç†ä¸–ç•Œã€‚ä»…åœ¨è¿‘å‡ åå¹´ï¼Œé€šè¿‡æ¸¸æˆå’Œæ—©æœŸçš„è™šæ‹Ÿç°å®ï¼ˆVRï¼‰ï¼Œæˆ‘ä»¬æ‰å¼€å§‹ä¸€çª¥æˆ‘ä»¬è‡ªå·±åˆ›é€ çš„æ›¿ä»£ä¸–ç•Œæ˜¯ä½•ç§æ»‹å‘³ã€‚</p>
<p>ç°åœ¨ï¼Œç©ºé—´æ™ºèƒ½ä¸æ–°çš„è®¾å¤‡å½¢æ€ï¼ˆå¦‚ VR å’Œæ‰©å±•ç°å®ï¼ˆXRï¼‰å¤´æ˜¾åŠæ²‰æµ¸å¼æ˜¾ç¤ºå™¨ï¼‰ç›¸ç»“åˆï¼Œä»¥å‰æ‰€æœªæœ‰çš„æ–¹å¼æå‡äº†è¿™äº›ä½“éªŒã€‚</p>
<p>æˆ‘ä»¬æ­£åœ¨æ¥è¿‘ä¸€ä¸ªæœªæ¥ï¼Œå±Šæ—¶ï¼Œæ­¥å…¥ä¸€ä¸ªå®Œå…¨å®ç°çš„å¤šç»´ä¸–ç•Œå°†åƒç¿»å¼€ä¸€æœ¬ä¹¦ä¸€æ ·è‡ªç„¶ã€‚</p>
<p>ç©ºé—´æ™ºèƒ½è®©ä¸–ç•Œæ„å»ºä¸å†æ˜¯æ‹¥æœ‰ä¸“ä¸šåˆ¶ä½œå›¢é˜Ÿçš„å·¥ä½œå®¤çš„ä¸“åˆ©ï¼Œè€Œæ˜¯ä¸ªäººåˆ›ä½œè€…ã€æ•™è‚²å·¥ä½œè€…ä»¥åŠä»»ä½•æœ‰æ„¿æ™¯å¸Œæœ›åˆ†äº«çš„äººéƒ½èƒ½è§¦åŠçš„èƒ½åŠ›ã€‚</p>
<p><strong>ã€Œ<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9103eacc99ec4d97963e02710fbf7493~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763449001&amp;x-signature=J7AdJp%2BruvaqKVTLXr%2BG%2F%2BwaAr4%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€Œæœºå™¨äººæŠ€æœ¯ï¼šå…·èº«æ™ºèƒ½åœ¨è¡ŒåŠ¨ã€</strong></p>
<p>ä»æ˜†è™«åˆ°äººç±»ï¼ŒåŠ¨ç‰©éƒ½ä¾èµ–ç©ºé—´æ™ºèƒ½æ¥ç†è§£ã€å¯¼èˆªå¹¶ä¸å®ƒä»¬çš„ä¸–ç•Œäº’åŠ¨ã€‚æœºå™¨äººä¹Ÿä¸ä¾‹å¤–ã€‚</p>
<p>è‡ªè¯ç”Ÿä¹‹æ—¥èµ·ï¼Œå…·å¤‡ç©ºé—´æ„è¯†çš„æœºå™¨å°±ä¸€ç›´æ˜¯è¯¥é¢†åŸŸçš„æ¢¦æƒ³ï¼Œè¿™å…¶ä¸­ä¹ŸåŒ…æ‹¬æˆ‘ä¸æˆ‘åœ¨æ–¯å¦ç¦ç ”ç©¶å®éªŒå®¤çš„å­¦ç”ŸåŠåˆä½œè€…ä»¬çš„å·¥ä½œã€‚</p>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä½•æˆ‘å¦‚æ­¤å…´å¥‹ï¼ŒæœŸå¾…èƒ½ç”¨ World Labs æ­£åœ¨æ„å»ºçš„è¿™ç±»æ¨¡å‹å°†è¿™ä¸€æ¢¦æƒ³å˜ä¸ºç°å®ã€‚</p>
<p><strong>é€šè¿‡ä¸–ç•Œæ¨¡å‹è§„æ¨¡åŒ–</strong>ã€Œ<strong>ã€Œæœºå™¨äººã€</strong>ã€**å­¦ä¹ ï¼š**æœºå™¨äººå­¦ä¹ çš„è¿›å±•å–å†³äºä¸€ä¸ªå¯æ‰©å±•çš„ã€å¯è¡Œçš„è®­ç»ƒæ•°æ®è§£å†³æ–¹æ¡ˆã€‚</p>
<p>è€ƒè™‘åˆ°æœºå™¨äººå¿…é¡»å­¦ä¹ å»ç†è§£ã€æ¨ç†ã€è§„åˆ’å’Œäº’åŠ¨çš„çŠ¶æ€ç©ºé—´æå…¶åºå¤§ï¼Œè®¸å¤šäººæ¨æµ‹ï¼Œéœ€è¦ç»“åˆäº’è”ç½‘æ•°æ®ã€åˆæˆæ¨¡æ‹Ÿä»¥åŠå¯¹çœŸå®ä¸–ç•Œäººç±»æ¼”ç¤ºçš„æ•æ‰ï¼Œæ‰èƒ½çœŸæ­£åˆ›é€ å‡ºå…·å¤‡æ³›åŒ–èƒ½åŠ›çš„æœºå™¨äººã€‚</p>
<p>ä½†ä¸è¯­è¨€æ¨¡å‹ä¸åŒï¼Œå½“ä»Šçš„æœºå™¨äººç ”ç©¶ç¼ºä¹è®­ç»ƒæ•°æ®ã€‚ä¸–ç•Œæ¨¡å‹å°†åœ¨æ­¤æ‰®æ¼”å†³å®šæ€§è§’è‰²ã€‚</p>
<p>éšç€å®ƒä»¬åœ¨æ„ŸçŸ¥ä¿çœŸåº¦å’Œè®¡ç®—æ•ˆç‡ä¸Šçš„æå‡ï¼Œä¸–ç•Œæ¨¡å‹çš„è¾“å‡ºå¯ä»¥è¿…é€Ÿå¼¥åˆæ¨¡æ‹Ÿä¸ç°å®ä¹‹é—´çš„é¸¿æ²Ÿã€‚è¿™åè¿‡æ¥å°†æœ‰åŠ©äºåœ¨æ— æ•°çš„çŠ¶æ€ã€äº’åŠ¨å’Œç¯å¢ƒæ¨¡æ‹Ÿä¸­è®­ç»ƒæœºå™¨äººã€‚</p>
<p>**ä¼´ä¾£ä¸åä½œè€…ï¼š**æœºå™¨äººä½œä¸ºäººç±»çš„åä½œè€…â€”â€”æ— è®ºæ˜¯åœ¨å®éªŒå®¤å·¥ä½œå°ä¸ŠååŠ©ç§‘å­¦å®¶ï¼Œè¿˜æ˜¯åœ¨å®¶ä¸­å¸®åŠ©ç‹¬å±…è€äººâ€”â€”éƒ½å¯ä»¥åœ¨æ€¥éœ€æ›´å¤šåŠ³åŠ¨åŠ›å’Œç”Ÿäº§åŠ›çš„é¢†åŸŸæ‰©å±•æˆ‘ä»¬çš„åŠ³åŠ¨åŠ›ã€‚</p>
<p>ä½†è¿™éœ€è¦å…·å¤‡æ„ŸçŸ¥ã€æ¨ç†ã€è§„åˆ’å’Œè¡ŒåŠ¨çš„ç©ºé—´æ™ºèƒ½ï¼ŒåŒæ—¶â€”â€”è¿™æ˜¯æœ€é‡è¦çš„â€”â€”ä¸äººç±»çš„ç›®æ ‡å’Œè¡Œä¸ºä¿æŒå…±æƒ…å¼çš„å¯¹é½ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸€ä¸ªå®éªŒå®¤æœºå™¨äººå¯ä»¥å¤„ç†ä»ªå™¨ï¼Œè®©ç§‘å­¦å®¶èƒ½ä¸“æ³¨äºéœ€è¦ç²¾ç»†æ“ä½œæˆ–æ¨ç†çš„ä»»åŠ¡ï¼›è€Œä¸€ä¸ªå®¶åº­åŠ©ç†åˆ™å¯ä»¥å¸®åŠ©ä¸€ä½è€å¹´äººåšé¥­ï¼Œè€Œä¸ä¼šå‰Šå¼±ä»–ä»¬çš„ä¹è¶£æˆ–è‡ªä¸»æ€§ã€‚</p>
<p>èƒ½å¤Ÿé¢„æµ‹ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼Œç”šè‡³å¯èƒ½é¢„æµ‹å‡ºç¬¦åˆè¿™ç§æœŸæœ›çš„ä¸‹ä¸€æ­¥åŠ¨ä½œçš„ã€çœŸæ­£å…·å¤‡ç©ºé—´æ™ºèƒ½çš„ä¸–ç•Œæ¨¡å‹ï¼Œå¯¹äºå®ç°è¿™ä¸€ç›®æ ‡è‡³å…³é‡è¦ã€‚</p>
<p>**æ‰©å±•å…·èº«å½¢å¼ï¼š**äººå½¢æœºå™¨äººåœ¨æˆ‘ä»¬ä¸ºè‡ªå·±æ„å»ºçš„ä¸–ç•Œä¸­æ‰®æ¼”ç€ä¸€å®šè§’è‰²ã€‚</p>
<p>ä½†åˆ›æ–°çš„å…¨éƒ¨ç›Šå¤„å°†æ¥è‡ªæ›´å¤šæ ·åŒ–çš„è®¾è®¡ï¼šè¾“é€è¯ç‰©çš„çº³ç±³æœºå™¨äººã€åœ¨ç‹­å°ç©ºé—´ä¸­ç©¿è¡Œçš„è½¯ä½“æœºå™¨äººï¼Œä»¥åŠä¸ºæ·±æµ·æˆ–å¤–å¤ªç©ºæ‰“é€ çš„æœºå™¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c5ac19f5be340549abfed73eb82385d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763449001&amp;x-signature=HZT0ZQ0Sxn0j75%2FNRo4zIPQT93c%3D" alt="" loading="lazy"/></p>
<p>æ— è®ºå…¶å½¢æ€å¦‚ä½•ï¼Œæœªæ¥çš„ç©ºé—´æ™ºèƒ½æ¨¡å‹éƒ½å¿…é¡»æ•´åˆè¿™äº›æœºå™¨äººæ‰€å¤„çš„ç¯å¢ƒä»¥åŠå®ƒä»¬è‡ªèº«çš„å…·èº«æ„ŸçŸ¥ä¸è¿åŠ¨ã€‚ä½†å¼€å‘è¿™äº›æœºå™¨äººçš„ä¸€ä¸ªå…³é”®æŒ‘æˆ˜æ˜¯ï¼Œåœ¨è¿™äº›äº”èŠ±å…«é—¨çš„å…·èº«å½¢æ€ä¸Šç¼ºä¹è®­ç»ƒæ•°æ®ã€‚</p>
<p>ä¸–ç•Œæ¨¡å‹å°†åœ¨æ¨¡æ‹Ÿæ•°æ®ã€è®­ç»ƒç¯å¢ƒå’ŒåŸºå‡†æµ‹è¯•ä»»åŠ¡ç­‰æ–¹é¢ä¸ºè¿™äº›åŠªåŠ›å‘æŒ¥å…³é”®ä½œç”¨ã€‚</p>
<p><strong>ã€Œ<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1cce9a4b3b034c53862c1cb522379e40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763449001&amp;x-signature=b38kspL%2BT6RBwYRBXibgTP6pD3E%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€Œæ›´é•¿è¿œçš„å›¾æ™¯ï¼šç§‘å­¦ã€åŒ»ç–—ä¸æ•™è‚²ã€</strong></p>
<p>é™¤äº†åˆ›æ„å’Œæœºå™¨äººåº”ç”¨ï¼Œç©ºé—´æ™ºèƒ½çš„æ·±è¿œå½±å“è¿˜å°†å»¶ä¼¸è‡³é‚£äº›èƒ½ä»¥æ‹¯æ•‘ç”Ÿå‘½ã€åŠ é€Ÿå‘ç°çš„æ–¹å¼å¢å¼ºäººç±»èƒ½åŠ›çš„é¢†åŸŸã€‚</p>
<p>æˆ‘ä¸‹é¢é‡ç‚¹ä»‹ç»ä¸‰ä¸ªå¯èƒ½å¸¦æ¥æ·±åˆ»å˜é©çš„åº”ç”¨é¢†åŸŸï¼Œå½“ç„¶ï¼Œç©ºé—´æ™ºèƒ½çš„ç”¨ä¾‹åœ¨æ›´å¤šè¡Œä¸šä¸­åŒæ ·æ˜¯å¹¿é˜”æ— å çš„ã€‚</p>
<p>**åœ¨ç§‘å­¦ç ”ç©¶ä¸­ï¼Œ**å…·å¤‡ç©ºé—´æ™ºèƒ½çš„ç³»ç»Ÿå¯ä»¥æ¨¡æ‹Ÿå®éªŒã€å¹¶è¡Œæµ‹è¯•å‡è®¾ï¼Œå¹¶æ¢ç´¢äººç±»æ— æ³•è§¦åŠçš„ç¯å¢ƒâ€”â€”ä»æ·±é‚ƒçš„æµ·æ´‹åˆ°é¥è¿œçš„è¡Œæ˜Ÿã€‚</p>
<p>è¿™é¡¹æŠ€æœ¯å¯ä»¥æ”¹å˜æ°”å€™ç§‘å­¦å’Œææ–™ç ”ç©¶ç­‰é¢†åŸŸçš„è®¡ç®—å»ºæ¨¡ã€‚é€šè¿‡å°†å¤šç»´æ¨¡æ‹Ÿä¸çœŸå®ä¸–ç•Œçš„æ•°æ®æ”¶é›†ç›¸ç»“åˆï¼Œè¿™äº›å·¥å…·å¯ä»¥é™ä½è®¡ç®—é—¨æ§›ï¼Œæ‰©å±•æ¯ä¸ªå®éªŒå®¤æ‰€èƒ½è§‚å¯Ÿå’Œç†è§£çš„èŒƒå›´ã€‚</p>
<p><strong>åœ¨åŒ»ç–—</strong>ã€Œ<strong>ã€Œå¥åº·ã€</strong>ã€**é¢†åŸŸï¼Œ**ç©ºé—´æ™ºèƒ½å°†é‡å¡‘ä»å®éªŒå®¤åˆ°ç—…åºŠè¾¹çš„æ¯ä¸€ä¸ªç¯èŠ‚ã€‚åœ¨æ–¯å¦ç¦ï¼Œæˆ‘çš„å­¦ç”Ÿå’Œåˆä½œè€…å¤šå¹´æ¥ä¸€ç›´ä¸åŒ»é™¢ã€å…»è€é™¢ä»¥åŠå±…å®¶æ‚£è€…åˆä½œã€‚</p>
<p>è¿™æ®µç»å†è®©æˆ‘åšä¿¡ç©ºé—´æ™ºèƒ½åœ¨æ­¤å¤„çš„å˜é©æ½œåŠ›ã€‚AI å¯ä»¥é€šè¿‡åœ¨å¤šç»´ç©ºé—´ä¸­å»ºæ¨¡åˆ†å­ç›¸äº’ä½œç”¨æ¥åŠ é€Ÿè¯ç‰©å‘ç°ï¼Œé€šè¿‡å¸®åŠ©æ”¾å°„ç§‘åŒ»ç”Ÿåœ¨åŒ»å­¦å½±åƒä¸­è¯†åˆ«æ¨¡å¼æ¥æå‡è¯Šæ–­æ°´å¹³ï¼Œå¹¶èƒ½å®ç°ç¯å¢ƒç›‘æµ‹ç³»ç»Ÿï¼Œåœ¨ä¸å–ä»£æ²»æ„ˆæ‰€å¿…éœ€çš„äººç±»æƒ…æ„Ÿè”ç»“çš„å‰æä¸‹ï¼Œä¸ºæ‚£è€…å’Œç…§æŠ¤è€…æä¾›æ”¯æŒã€‚</p>
<p>æ›´ä¸ç”¨è¯´æœºå™¨äººåœ¨ä¼—å¤šä¸åŒåœºæ™¯ä¸‹å¸®åŠ©æˆ‘ä»¬çš„åŒ»æŠ¤äººå‘˜å’Œæ‚£è€…çš„å·¨å¤§æ½œåŠ›ã€‚</p>
<p>**åœ¨æ•™è‚²é¢†åŸŸï¼Œ**ç©ºé—´æ™ºèƒ½å¯ä»¥å®ç°æ²‰æµ¸å¼å­¦ä¹ ï¼Œä½¿æŠ½è±¡æˆ–å¤æ‚çš„æ¦‚å¿µå˜å¾—è§¦æ‰‹å¯åŠï¼Œå¹¶åˆ›é€ å‡ºå¯¹æˆ‘ä»¬å¤§è„‘å’Œèº«ä½“å­¦ä¹ æ–¹å¼è‡³å…³é‡è¦çš„è¿­ä»£å¼ä½“éªŒã€‚</p>
<p>åœ¨ AI æ—¶ä»£ï¼Œæ›´å¿«ã€æ›´æœ‰æ•ˆçš„å­¦ä¹ å’ŒæŠ€èƒ½å†åŸ¹è®­å¯¹äºå­¦é¾„å„¿ç«¥å’Œæˆå¹´äººéƒ½å°¤ä¸ºé‡è¦ã€‚å­¦ç”Ÿå¯ä»¥åœ¨å¤šç»´ç©ºé—´ä¸­æ¢ç´¢ç»†èƒçš„è¿ä½œæœºåˆ¶æˆ–äº²å†å†å²äº‹ä»¶ã€‚æ•™å¸ˆå¯ä»¥åˆ©ç”¨äº’åŠ¨ç¯å¢ƒè·å¾—ä¸ªæ€§åŒ–æ•™å­¦çš„å·¥å…·ã€‚</p>
<p>ä»å¤–ç§‘åŒ»ç”Ÿåˆ°å·¥ç¨‹å¸ˆçš„ä¸“ä¸šäººå£«ï¼Œéƒ½å¯ä»¥åœ¨é€¼çœŸçš„æ¨¡æ‹Ÿä¸­å®‰å…¨åœ°ç»ƒä¹ å¤æ‚æŠ€èƒ½ã€‚</p>
<p>åœ¨æ‰€æœ‰è¿™äº›é¢†åŸŸï¼Œå¯èƒ½æ€§æ˜¯æ— é™çš„ï¼Œä½†ç›®æ ‡å§‹ç»ˆå¦‚ä¸€ï¼šAI å¢å¼ºäººç±»çš„ä¸“ä¸šçŸ¥è¯†ï¼ŒåŠ é€Ÿäººç±»çš„å‘ç°ï¼Œå¹¶æ”¾å¤§äººç±»çš„å…³æ€€â€”â€”è€Œä¸æ˜¯å–ä»£ä½œä¸ºäººç±»æ ¸å¿ƒçš„åˆ¤æ–­åŠ›ã€åˆ›é€ åŠ›å’ŒåŒç†å¿ƒã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6036d9b8ff4b4f3ba7138bbc64a5aff7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763449001&amp;x-signature=G1F1%2Ba5qjPja89WNXr71zdSv2k0%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œç»“è®ºã€</strong></p>
<p>è¿‡å»åå¹´è§è¯äº† AI æˆä¸ºä¸€ç§å…¨çƒç°è±¡ï¼Œä»¥åŠæŠ€æœ¯ã€ç»æµä¹ƒè‡³åœ°ç¼˜æ”¿æ²»çš„è½¬æŠ˜ç‚¹ã€‚</p>
<p>ä½†ä½œä¸ºä¸€åç ”ç©¶è€…ã€æ•™è‚²è€…ï¼Œå¦‚ä»Šåˆæ˜¯ä¸€ååˆ›ä¸šè€…ï¼Œæœ€èƒ½æ¿€åŠ±æˆ‘çš„ï¼Œä»ç„¶æ˜¯å›¾çµ 75 å¹´å‰æå‡ºçš„é‚£ä¸ªé—®é¢˜èƒŒåçš„ç²¾ç¥ã€‚</p>
<p>æˆ‘ä¾ç„¶æ€€æœ‰ä»–é‚£ä»½å¥½å¥‡ä¸æƒŠå¹ã€‚æ­£æ˜¯è¿™ç§æ„Ÿè§‰ï¼Œæ¯å¤©éƒ½æ¿€åŠ±ç€æˆ‘è¿æ¥ç©ºé—´æ™ºèƒ½çš„æŒ‘æˆ˜ã€‚</p>
<p>å†å²ä¸Šç¬¬ä¸€æ¬¡ï¼Œæˆ‘ä»¬æœ‰æœ›æ„å»ºå‡ºä¸ç‰©ç†ä¸–ç•Œå¦‚æ­¤åè°ƒçš„æœºå™¨ï¼Œä»¥è‡³äºåœ¨æˆ‘ä»¬é¢ä¸´çš„æœ€ä¸¥å³»æŒ‘æˆ˜ä¸­ï¼Œå¯ä»¥å°†å®ƒä»¬è§†ä¸ºçœŸæ­£çš„ä¼™ä¼´ã€‚</p>
<p>æ— è®ºæ˜¯åŠ é€Ÿæˆ‘ä»¬å¯¹å®éªŒå®¤ä¸­ç–¾ç—…çš„ç†è§£ï¼Œå½»åº•æ”¹å˜æˆ‘ä»¬è®²è¿°æ•…äº‹çš„æ–¹å¼ï¼Œè¿˜æ˜¯åœ¨æˆ‘ä»¬å› ç–¾ç—…ã€å—ä¼¤æˆ–å¹´è€è€Œæœ€è„†å¼±çš„æ—¶åˆ»ç»™äºˆæ”¯æŒï¼Œæˆ‘ä»¬éƒ½æ­£å¤„åœ¨ä¸€é¡¹æ–°æŠ€æœ¯çš„é£å£æµªå°–ï¼Œè¿™é¡¹æŠ€æœ¯å°†æå‡æˆ‘ä»¬æœ€çè§†çš„ç”Ÿæ´»çš„æ–¹æ–¹é¢é¢ã€‚è¿™</p>
<p>æ˜¯ä¸€ä¸ªæ›´æ·±åˆ»ã€æ›´ä¸°å¯Œã€æ›´å¼ºå¤§çš„ç”Ÿæ´»æ„¿æ™¯ã€‚</p>
<p>åœ¨å¤§è‡ªç„¶äºè¿œå¤åŠ¨ç‰©èº«ä¸Šé‡Šæ”¾å‡ºç¬¬ä¸€ç¼•ç©ºé—´æ™ºèƒ½çš„è¿‘äº”äº¿å¹´åï¼Œæˆ‘ä»¬æœ‰å¹¸æˆä¸ºå¯èƒ½å¾ˆå¿«å°±èƒ½èµ‹äºˆæœºå™¨åŒæ ·èƒ½åŠ›çš„è¿™ä¸€ä»£æŠ€æœ¯ä¸“å®¶ä¸­çš„ä¸€å‘˜â€”â€”å¹¶æœ‰å¹¸åˆ©ç”¨è¿™äº›èƒ½åŠ›ä¸ºä¸–ç•Œå„åœ°çš„äººä»¬è°‹ç¦ç¥‰ã€‚</p>
<p>æˆ‘ä»¬å…³äºçœŸæ­£æ™ºèƒ½æœºå™¨çš„æ¢¦æƒ³ï¼Œæ²¡æœ‰ç©ºé—´æ™ºèƒ½æ˜¯ä¸å®Œæ•´çš„ã€‚</p>
<p>è¿™é¡¹æ¢ç´¢ï¼Œå°±æ˜¯æŒ‡å¼•æˆ‘çš„åŒ—ææ˜Ÿã€‚æˆ‘é‚€è¯·ä½ ä¸æˆ‘åŒè¡Œã€‚</p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fdrfeifei%2Fstatus%2F1987891210699379091" target="_blank" title="https://x.com/drfeifei/status/1987891210699379091" ref="nofollow noopener noreferrer">x.com/drfeifei/stâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdrfeifei.substack.com%2Fp%2Ffrom-words-to-worlds-spatial-intelligence" target="_blank" title="https://drfeifei.substack.com/p/from-words-to-worlds-spatial-intelligence" ref="nofollow noopener noreferrer">drfeifei.substack.com/p/from-wordâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Guava è¿­ä»£å™¨å¢å¼ºç±»ä»‹ç»]]></title>    <link>https://juejin.cn/post/7570903763722453002</link>    <guid>https://juejin.cn/post/7570903763722453002</guid>    <pubDate>2025-11-10T16:17:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570903763722453002" data-draft-id="7570897638441320475" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Guava è¿­ä»£å™¨å¢å¼ºç±»ä»‹ç»"/> <meta itemprop="keywords" content="åç«¯,Java,è®¾è®¡æ¨¡å¼"/> <meta itemprop="datePublished" content="2025-11-10T16:17:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¡¦è¯´ç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/2212689394274136"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Guava è¿­ä»£å™¨å¢å¼ºç±»ä»‹ç»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2212689394274136/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¡¦è¯´ç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T16:17:00.000Z" title="Mon Nov 10 2025 16:17:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    41
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Guava åº“ä¸º Java å¼€å‘è€…æä¾›äº†ä¸€ç³»åˆ—å¼ºå¤§çš„è¿­ä»£å™¨å¢å¼ºå·¥å…·ï¼Œå®ƒä»¬ç®€åŒ–äº†å¤æ‚è¿­ä»£æ¨¡å¼çš„å®ç°ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ Guava çš„ PeekingIteratorã€AbstractIterator å’Œ AbstractSequentialIteratorã€‚</p>
<h3 data-id="heading-0">1. AbstractSequentialIterator</h3>
<p>å¯¹äºé‚£äº›ä¸‹ä¸€ä¸ªå€¼å¾ˆå®¹æ˜“æ ¹æ®å‰ä¸€ä¸ªå€¼è®¡ç®—å‡ºæ¥çš„è¿­ä»£å™¨ï¼ŒAbstractSequentialIterator æä¾›äº†ä¸€ç§è¡¨è¾¾è¿­ä»£çš„æ›¿ä»£æ–¹å¼ã€‚</p>
<p><strong>æ ¸å¿ƒåŠŸèƒ½ï¼š</strong></p>
<ul>
<li>å¼€å‘è€…å®ç°çš„æ–¹æ³•æ˜¯ <code>computeNext(T previous)</code>ï¼Œå®ƒæ¥å—åºåˆ—ä¸­çš„å‰ä¸€ä¸ªå€¼ä½œä¸ºå‚æ•°ã€‚</li>
<li>å¿…é¡»åœ¨æ„é€ å‡½æ•°ä¸­æä¾›ä¸€ä¸ªåˆå§‹å€¼ï¼ˆæˆ–è€…å¦‚æœè¿­ä»£å™¨åº”ç«‹å³ç»ˆæ­¢ï¼Œåˆ™ä¼ å…¥ <code>null</code>ï¼‰ã€‚</li>
<li><code>computeNext()</code> æ–¹æ³•çº¦å®šï¼Œè¿”å› <code>null</code> æ„å‘³ç€è¿­ä»£ç»“æŸã€‚</li>
</ul>
<p><strong>å®ƒå¸¦æ¥çš„ä¾¿åˆ©ï¼š</strong></p>
<p>AbstractSequentialIterator é€‚ç”¨äºé‚£äº›ä¸‹ä¸€ä¸ªå€¼å¯ä»¥æ ¹æ®å‰ä¸€ä¸ªå€¼è®¡ç®—å‡ºæ¥çš„åºåˆ—ã€‚å®ƒé€šè¿‡**æŒ‰éœ€ç”Ÿæˆï¼ˆon-demand generationï¼‰**æœºåˆ¶ï¼Œä»…åœ¨ <code>next()</code> è¢«è°ƒç”¨æ—¶æ‰è®¡ç®—ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚è¿™ä½¿å¾—å®ƒéå¸¸é€‚åˆå¤„ç†å¯èƒ½éå¸¸é•¿ç”šè‡³æ— é™çš„åºåˆ—ï¼Œå› ä¸ºå®ƒé¿å…äº†é¢„å…ˆè®¡ç®—å’Œå­˜å‚¨æ•´ä¸ªåºåˆ—ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼šæƒ°æ€§è®¡ç®— 2 çš„å¹‚æ¬¡</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractSequentialIteratorExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// ä»1å¼€å§‹ç”Ÿæˆ2çš„å¹‚æ¬¡æ–¹ï¼Œç›´åˆ°è¾¾åˆ° 1 &lt;&lt; 30</span>
        Iterator&lt;Integer&gt; powersOfTwo = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbstractSequentialIterator</span>&lt;Integer&gt;(<span class="hljs-number">1</span>) {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">protected</span> Integer <span class="hljs-title function_">computeNext</span><span class="hljs-params">(Integer previous)</span> {
                <span class="hljs-comment">// å¦‚æœ previous å·²ç»è¾¾åˆ°æœ€å¤§å€¼ï¼Œåˆ™è¿”å› null ç»“æŸè¿­ä»£</span>
                <span class="hljs-keyword">return</span> (previous == <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">30</span>) ? <span class="hljs-literal">null</span> : previous * <span class="hljs-number">2</span>;
            }
        };

        System.out.println(<span class="hljs-string">"Powers of two (only consuming first 7):"</span>);
        <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">while</span> (powersOfTwo.hasNext() &amp;&amp; count &lt; <span class="hljs-number">7</span>) { <span class="hljs-comment">// å‡è®¾æˆ‘ä»¬åªæ¶ˆè´¹å‰7ä¸ªå…ƒç´ </span>
            System.out.println(powersOfTwo.next());
            count++;
        }
        <span class="hljs-comment">// Output: 1, 2, 4, 8, 16, 32, 64</span>
    }
}
</code></pre>
<p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä»…æ¶ˆè´¹äº†åºåˆ—çš„å‰ 7 ä¸ªå…ƒç´ ã€‚AbstractSequentialIterator ç¡®ä¿äº†åªæœ‰è¿™ 7 æ¬¡ä¹˜æ³•æ“ä½œè¢«æ‰§è¡Œï¼Œå¹¶ä¸”åœ¨å†…å­˜ä¸­åªç»´æŠ¤äº†å½“å‰ <code>previous</code> å…ƒç´ çš„çŠ¶æ€ã€‚è¿™ç§æƒ°æ€§ç”Ÿæˆæ–¹å¼ï¼Œé¿å…äº†å¯¹æ•´ä¸ªåºåˆ—è¿›è¡Œé¢„è®¡ç®—å’Œå­˜å‚¨çš„éœ€è¦ã€‚</p>
<p><strong>å…³é”®é™åˆ¶ï¼š</strong> ç”±äºè¿”å› <code>null</code> æ ‡å¿—ç€è¿­ä»£çš„ç»“æŸï¼Œå› æ­¤ AbstractSequentialIterator ä¸èƒ½ç”¨äºå®ç°ä¸€ä¸ªå¯ä»¥åˆæ³•è¿”å› <code>null</code> å…ƒç´ çš„è¿­ä»£å™¨ã€‚</p>
<p>ç¬”è€…é‡åˆ°ä¸€ä¸ªæŒ‰éœ€æ·±æ‹·è´çš„éœ€æ±‚ï¼Œç®€å•æè¿°ä¸ºï¼šå·²è·å¾—å¯¹è±¡aï¼Œéœ€è¦æ·±æ‹·è´è‹¥å¹²ä»½ï¼ŒåŒæ—¶éœ€è¦æ ‡è®°åºå·ï¼Œaå·²ç»å®ç°deepCopyæ–¹æ³•ã€‚å®ç°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å®ç°1</span>
<span class="hljs-type">A</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> getA();
<span class="hljs-type">boolean</span> <span class="hljs-variable">first</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x: request.getXList()) {
    <span class="hljs-comment">// ...</span>
    <span class="hljs-keyword">if</span> (a != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">if</span> (first) {
            x.setA(a);
            first = <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-type">A</span> <span class="hljs-variable">newA</span> <span class="hljs-operator">=</span> a.deepCopy();
            newA.seq++;
            x.setA(newA);
        }
    }
    <span class="hljs-comment">// ...</span>
}

<span class="hljs-comment">// å®ç°2ï¼Œä¿®æ”¹å¼•ç”¨a</span>
<span class="hljs-type">A</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> getA();
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x: request.getXList()) {
    <span class="hljs-comment">// ...</span>
    <span class="hljs-keyword">if</span> (a != <span class="hljs-literal">null</span>) {
        x.setA(a);
        a = a.deepCopy(); <span class="hljs-comment">//ä¼šå¤šå¤åˆ¶ä¸€æ¬¡</span>
        a.seq++;
    }
    <span class="hljs-comment">// ...</span>
}

<span class="hljs-comment">// æ–°å®ç°</span>
<span class="hljs-type">A</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> getA();
<span class="hljs-comment">// copy iter</span>
Iterator&lt;A&gt; aIter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbstractSequentialIterator</span>&lt;&gt;(a) {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> A <span class="hljs-title function_">computeNext</span><span class="hljs-params">(A prev)</span> {
        <span class="hljs-type">A</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> prev.deepCopy();
        result.seq++;
        <span class="hljs-keyword">return</span> result;
    }
};
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x: request.getXList()) {
    <span class="hljs-comment">// ...</span>
    <span class="hljs-keyword">if</span> (a != <span class="hljs-literal">null</span>) {
        x.setA(aIter.next());
    }
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>å’ŒåŸæœ‰å®ç°ç›¸æ¯”ï¼Œæ–°å®ç°æŠ½å–å‡ºäº†Açš„è¿­ä»£é€»è¾‘ï¼Œæ›´å¥½ç†è§£ã€‚</p>
<h3 data-id="heading-1">2. AbstractIteratorï¼šä¸€ä¸ªæ–¹æ³•å®šä¹‰è¿­ä»£å™¨</h3>
<p>å½“éœ€è¦å®ç°ä¸€ä¸ªè‡ªå®šä¹‰çš„ Iteratorï¼Œä¾‹å¦‚å¯¹æ•°æ®è¿›è¡Œè¿‡æ»¤ã€è½¬æ¢æˆ–ä»å¤æ‚æ•°æ®æºä¸­æå–æ—¶ï¼Œæ‰‹åŠ¨ç®¡ç† <code>hasNext()</code> å’Œ <code>next()</code> çš„å†…éƒ¨çŠ¶æ€ä¼šå¼•å…¥å¤§é‡æ ·æ¿ä»£ç ã€‚AbstractIterator æå¤§åœ°ç®€åŒ–äº†è¿™ä¸€è¿‡ç¨‹ã€‚</p>
<p><strong>æ ¸å¿ƒåŠŸèƒ½ï¼š</strong></p>
<ul>
<li>å¼€å‘è€…åªéœ€å®ç°ä¸€ä¸ªæ–¹æ³•ï¼š<code>computeNext()</code>ã€‚æ­¤æ–¹æ³•è´Ÿè´£è®¡ç®—å¹¶è¿”å›åºåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªå€¼ã€‚</li>
<li>å½“è¿­ä»£åºåˆ—å®Œæˆæ—¶ï¼Œ<code>computeNext()</code> åº”è¿”å› <code>endOfData()</code> ä»¥æ ‡è®°è¿­ä»£ç»“æŸã€‚</li>
</ul>
<p><strong>å®ƒå¸¦æ¥çš„ä¾¿åˆ©ï¼š</strong></p>
<p>AbstractIterator é‡‡ç”¨æƒ°æ€§æ±‚å€¼ï¼ˆlazy evaluationï¼‰æœºåˆ¶ã€‚å®ƒç¡®ä¿ <code>computeNext()</code> æ–¹æ³•ä»…åœ¨çœŸæ­£éœ€è¦ä¸‹ä¸€ä¸ªå…ƒç´ ï¼ˆå³ <code>next()</code> è¢«è°ƒç”¨æ—¶ï¼‰æ‰ä¼šè¢«æ‰§è¡Œã€‚è¿™ä½¿å¾—è¿­ä»£å™¨èƒ½å¤ŸæŒ‰éœ€ç”Ÿæˆå…ƒç´ ï¼Œé¿å…äº†åœ¨è¿­ä»£å™¨æœªè¢«å®Œå…¨æ¶ˆè´¹æ—¶è¿›è¡Œä¸å¿…è¦çš„è®¡ç®—ã€‚åŒæ—¶ï¼ŒGuava è´Ÿè´£å¤„ç† <code>hasNext()</code> å’Œ <code>next()</code> ä¹‹é—´çš„çŠ¶æ€åŒæ­¥ï¼Œç®€åŒ–äº†è‡ªå®šä¹‰è¿­ä»£å™¨çš„å®ç°ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼šæƒ°æ€§è¿‡æ»¤ Null å€¼</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractIteratorExample</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Iterator&lt;String&gt; <span class="hljs-title function_">skipNulls</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Iterator&lt;String&gt; in)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbstractIterator</span>&lt;String&gt;() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">protected</span> String <span class="hljs-title function_">computeNext</span><span class="hljs-params">()</span> {
                <span class="hljs-keyword">while</span> (in.hasNext()) {
                    <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> in.next();
                    <span class="hljs-keyword">if</span> (s != <span class="hljs-literal">null</span>) {
                        <span class="hljs-keyword">return</span> s; <span class="hljs-comment">// æ‰¾åˆ°é null å…ƒç´ ï¼Œè¿”å›</span>
                    }
                }
                <span class="hljs-keyword">return</span> endOfData(); <span class="hljs-comment">// å†…éƒ¨è¿­ä»£å™¨è€—å°½ï¼Œè¿”å› endOfData()</span>
            }
        };
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        List&lt;String&gt; source = Arrays.asList(<span class="hljs-string">"hello"</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">"world"</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">"guava"</span>, <span class="hljs-string">"java"</span>);
        Iterator&lt;String&gt; filteredIterator = skipNulls(source.iterator());

        System.out.println(<span class="hljs-string">"Filtered elements (only consuming first 3):"</span>);
        <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">while</span> (filteredIterator.hasNext() &amp;&amp; count &lt; <span class="hljs-number">3</span>) { <span class="hljs-comment">// å‡è®¾æˆ‘ä»¬åªæ¶ˆè´¹å‰3ä¸ªå…ƒç´ </span>
            System.out.println(filteredIterator.next());
            count++;
        }
        <span class="hljs-comment">// Output:</span>
        <span class="hljs-comment">// hello</span>
        <span class="hljs-comment">// world</span>
        <span class="hljs-comment">// guava</span>
    }
}
</code></pre>
<p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå³ä½¿ <code>source</code> åˆ—è¡¨ä¸­æœ‰æ›´å¤šå…ƒç´ ï¼Œæˆ‘ä»¬åªæ¶ˆè´¹äº†å‰ 3 ä¸ªéç©ºå­—ç¬¦ä¸²ã€‚AbstractIterator ç¡®ä¿äº† <code>in.next()</code> å’Œ <code>if (s != null)</code> è¿™æ ·çš„æ“ä½œä»…æ‰§è¡Œäº†åˆšå¥½è¶³ä»¥æ‰¾åˆ°è¿™ 3 ä¸ªå…ƒç´ æ‰€éœ€çš„æœ€å°æ¬¡æ•°ã€‚è¿™ç§æŒ‰éœ€è®¡ç®—çš„æ¨¡å¼ï¼Œä½¿å¾—è¿­ä»£å™¨åªåœ¨éœ€è¦æ—¶æ‰å¤„ç†æ•°æ®ã€‚</p>
<p><strong>é™åˆ¶ï¼š</strong> AbstractIterator ç»§æ‰¿è‡ª <code>UnmodifiableIterator</code>ï¼Œè¿™æ„å‘³ç€å®ƒç¦æ­¢å®ç° <code>remove()</code> æ–¹æ³•ã€‚å¦‚æœæ‚¨çš„è¿­ä»£å™¨å¿…é¡»æ”¯æŒ <code>remove()</code>ï¼Œåˆ™ä¸åº”ç»§æ‰¿ AbstractIteratorã€‚</p>
<h3 data-id="heading-2">3. PeekingIteratorï¼šæ´å¯Ÿå…ˆæœº</h3>
<p>æ ‡å‡†çš„ Iterator æ¥å£ä»…æä¾› hasNext() å’Œ next() æ–¹æ³•ï¼Œè¿™åœ¨æŸäº›åœºæ™¯ä¸‹æ˜¾å¾—åŠ›ä¸ä»å¿ƒã€‚å½“éœ€è¦â€œé¢„è¯»â€ä¸‹ä¸€ä¸ªå…ƒç´ ä»¥åšå‡ºå†³ç­–ï¼Œä½†åˆä¸æƒ³ç«‹å³æ¶ˆè€—å®ƒæ—¶ï¼ŒPeekingIterator åº”è¿è€Œç”Ÿã€‚</p>
<p><strong>æ ¸å¿ƒåŠŸèƒ½ï¼š</strong></p>
<ul>
<li><code>Iterators.peekingIterator(Iterator)</code> æ–¹æ³•ç”¨äºå°†ç°æœ‰çš„ <code>Iterator</code> åŒ…è£…æˆä¸€ä¸ª <code>PeekingIterator</code>ã€‚</li>
<li>å…¶æ ¸å¿ƒæ–¹æ³•æ˜¯ <code>peek()</code>ï¼Œå…è®¸åœ¨ä¸æ¨è¿›è¿­ä»£å™¨çš„æƒ…å†µä¸‹ï¼ŒæŸ¥çœ‹ä¸‹ä¸€ä¸ªè°ƒç”¨ <code>next()</code> æ—¶å°†è¿”å›çš„å…ƒç´ ã€‚</li>
</ul>
<p><strong>å®ƒå¸¦æ¥çš„ä¾¿åˆ©ï¼š</strong></p>
<p>PeekingIterator çš„ <code>peek()</code> æ–¹æ³•èƒ½å¤Ÿæ”¯æŒæ›´çµæ´»çš„è¿­ä»£é€»è¾‘ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦æ ¹æ®å½“å‰å…ƒç´ å’Œâ€œä¸‹ä¸€ä¸ªâ€å…ƒç´ å…³ç³»è¿›è¡Œåˆ¤æ–­çš„åœºæ™¯ä¸­ã€‚å®ƒå…è®¸åœ¨ä¸€æ¬¡è¿­ä»£è¿‡ç¨‹ä¸­å®Œæˆå¤æ‚çš„é€»è¾‘åˆ¤æ–­å’Œæ•°æ®å¤„ç†ï¼Œé¿å…äº†ä¼ ç»Ÿæ–¹æ³•ä¸­å¯èƒ½å‡ºç°çš„å†—ä½™ <code>next()</code> è°ƒç”¨æˆ–é¢å¤–çš„çŠ¶æ€å˜é‡ç®¡ç†ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼šæ¶ˆé™¤è¿ç»­é‡å¤å…ƒç´ </strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PeekingIteratorExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        List&lt;Integer&gt; source = Arrays.asList(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>);
        List&lt;Integer&gt; result = Lists.newArrayList();

        PeekingIterator&lt;Integer&gt; iter = Iterators.peekingIterator(source.iterator());

        <span class="hljs-keyword">while</span> (iter.hasNext()) {
            <span class="hljs-type">Integer</span> <span class="hljs-variable">current</span> <span class="hljs-operator">=</span> iter.next(); <span class="hljs-comment">// è·å–å½“å‰å…ƒç´ </span>
            result.add(current); <span class="hljs-comment">// å°†å½“å‰å…ƒç´ æ·»åŠ åˆ°ç»“æœ</span>

            <span class="hljs-comment">// åˆ©ç”¨ peek() æå‰åˆ¤æ–­ï¼Œå¦‚æœä¸‹ä¸€ä¸ªå…ƒç´ ä¸å½“å‰å…ƒç´ é‡å¤ï¼Œåˆ™è·³è¿‡ã€‚</span>
            <span class="hljs-keyword">while</span> (iter.hasNext() &amp;&amp; iter.peek().equals(current)) {
                iter.next(); <span class="hljs-comment">// è·³è¿‡è¿™ä¸ªé‡å¤å…ƒç´ </span>
            }
        }
        System.out.println(<span class="hljs-string">"Original: "</span> + source);
        System.out.println(<span class="hljs-string">"Deduplicated: "</span> + result); <span class="hljs-comment">// Output: [1, 2, 3, 4, 5]</span>
    }
}
</code></pre>
<p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä»…å¯¹ <code>source</code> åˆ—è¡¨è¿›è¡Œäº†ä¸€æ¬¡é€»è¾‘éå†ã€‚PeekingIterator ä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿåœ¨å¤„ç† <code>current</code> å…ƒç´ çš„åŒæ—¶ï¼Œé¢„åˆ¤å¹¶è·³è¿‡æ‰€æœ‰åç»­çš„é‡å¤é¡¹ï¼Œè€Œæ— éœ€å°†å®ƒä»¬å­˜å‚¨åˆ°ä»»ä½•ä¸­é—´ç»“æ„æˆ–è¿›è¡Œåç»­çš„å»é‡å¤„ç†ã€‚è¿™ç®€åŒ–äº†å»é‡é€»è¾‘çš„å®ç°ã€‚</p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong> ç”± <code>Iterators.peekingIterator</code> è¿”å›çš„ <code>PeekingIterator</code> ä¸æ”¯æŒåœ¨è°ƒç”¨ <code>peek()</code> ä¹‹åæ‰§è¡Œ <code>remove()</code> æ“ä½œã€‚</p>
<h3 data-id="heading-3">æ€»ç»“</h3>
<p>Guava çš„ PeekingIteratorã€AbstractIterator å’Œ AbstractSequentialIterator ä¸º Java å¼€å‘è€…æä¾›äº†å¼ºå¤§çš„å·¥å…·ï¼Œç”¨äºç®€åŒ–å’Œå¢å¼ºè¿­ä»£å™¨çš„ä½¿ç”¨ã€‚å®ƒä»¬é€šè¿‡ä»¥ä¸‹æ–¹å¼æå‡ä»£ç çš„å¥å£®æ€§å’Œå¯ç»´æŠ¤æ€§ï¼š</p>
<ul>
<li><strong>PeekingIteratorï¼š</strong> å…è®¸åœ¨å•æ¬¡éå†ä¸­è¿›è¡Œé¢„åˆ¤å’Œå¤æ‚é€»è¾‘å¤„ç†ï¼Œå‡å°‘äº†çŠ¶æ€ç®¡ç†å’Œå†—ä½™æ“ä½œã€‚</li>
<li><strong>AbstractIteratorï¼š</strong> å¼ºåˆ¶æƒ°æ€§æ±‚å€¼ï¼Œç®€åŒ–äº†è‡ªå®šä¹‰è¿­ä»£å™¨çš„å®ç°ï¼Œå¹¶æŒ‰éœ€å¤„ç†æ•°æ®ã€‚</li>
<li><strong>AbstractSequentialIteratorï¼š</strong> å®ç°æŒ‰éœ€ç”Ÿæˆåºåˆ—ï¼Œé€‚ç”¨äºå¤„ç†é•¿åºåˆ—ï¼Œé¿å…äº†ä¸å¿…è¦çš„é¢„è®¡ç®—å’Œå­˜å‚¨ã€‚</li>
</ul>
<p>åœ¨å¤„ç†æ•°æ®æµã€æ„å»ºæ•°æ®ç®¡é“æˆ–å®ç°å¤æ‚ä¸šåŠ¡é€»è¾‘æ—¶ï¼Œåˆç†åˆ©ç”¨è¿™äº›è¿­ä»£å™¨ï¼Œå¯ä»¥ä½¿ä»£ç æ›´åŠ æ¸…æ™°ã€çµæ´»ï¼Œå¹¶æ›´å¥½åœ°ç®¡ç†èµ„æºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[flutterå›¾ç‰‡é€‰æ‹©åº“multi_image_picker_pluså’Œimage_pickerçš„å¯¹æ¯”å’Œä½¿ç”¨è§£æ]]></title>    <link>https://juejin.cn/post/7570923924365230143</link>    <guid>https://juejin.cn/post/7570923924365230143</guid>    <pubDate>2025-11-11T00:24:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570923924365230143" data-draft-id="7560992984017322019" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="flutterå›¾ç‰‡é€‰æ‹©åº“multi_image_picker_pluså’Œimage_pickerçš„å¯¹æ¯”å’Œä½¿ç”¨è§£æ"/> <meta itemprop="keywords" content="Flutter,Android,iOS"/> <meta itemprop="datePublished" content="2025-11-11T00:24:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹å¤šå¤š"/> <meta itemprop="url" content="https://juejin.cn/user/747323639737191"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            flutterå›¾ç‰‡é€‰æ‹©åº“multi_image_picker_pluså’Œimage_pickerçš„å¯¹æ¯”å’Œä½¿ç”¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/747323639737191/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹å¤šå¤š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-11T00:24:37.000Z" title="Tue Nov 11 2025 00:24:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="agate">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#333;color:#fff}.hljs-name,.hljs-strong{font-weight:700}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-selector-class,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#ade5fc}.hljs-bullet,.hljs-string{color:#a2fca2}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-title,.hljs-type{color:#ffa}.hljs-bullet,.hljs-number,.hljs-symbol{color:#d36363}.hljs-keyword,.hljs-literal,.hljs-selector-tag{color:#fcc28c}.hljs-code,.hljs-comment,.hljs-deletion{color:#888}.hljs-link,.hljs-regexp{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}</style><p>åœ¨Flutteråº”ç”¨å¼€å‘ä¸­ï¼Œå›¾ç‰‡é€‰æ‹©æ˜¯é«˜é¢‘åœºæ™¯ï¼Œæ— è®ºæ˜¯å¤´åƒä¸Šä¼ ã€ç›¸å†Œé€‰å›¾è¿˜æ˜¯æ‹ç…§åŠŸèƒ½ï¼Œéƒ½éœ€è¦å¯é çš„å›¾ç‰‡é€‰æ‹©ç»„ä»¶æ”¯æ’‘ã€‚ç›®å‰ç¤¾åŒºä¸­æœ€å¸¸ç”¨çš„ä¸¤æ¬¾ç»„ä»¶åˆ†åˆ«æ˜¯<strong>multi_image_picker_plus</strong>å’Œå®˜æ–¹ç»´æŠ¤çš„<strong>image_picker</strong>ã€‚æœ¬æ–‡å°†ä»æ ¸å¿ƒå±æ€§ã€APIæ¥å£ã€ä½¿ç”¨æµç¨‹ã€åŠŸèƒ½å·®å¼‚åŠä¼˜ç¼ºç‚¹ç­‰ç»´åº¦è¿›è¡Œå…¨é¢è§£æï¼Œå¸®åŠ©å¼€å‘è€…æ ¹æ®ä¸šåŠ¡éœ€æ±‚ç²¾å‡†é€‰å‹ã€‚</p>
<h2 data-id="heading-0">1. ç»„ä»¶åŸºç¡€è®¤çŸ¥</h2>
<p>åœ¨æ·±å…¥ç»†èŠ‚å‰ï¼Œå…ˆæ˜ç¡®ä¸¤æ¬¾ç»„ä»¶çš„æ ¸å¿ƒå®šä½ï¼Œä¸ºåç»­å¯¹æ¯”å»ºç«‹åŸºç¡€ï¼Œå¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p><strong>image_picker</strong>ï¼šFlutterå®˜æ–¹å›¢é˜Ÿç»´æŠ¤çš„å›¾ç‰‡/è§†é¢‘é€‰æ‹©ç»„ä»¶ï¼Œä¸»æ‰“è½»é‡ã€ç¨³å®šï¼Œæ”¯æŒæ‹ç…§å’Œå•å¼ /å¤šå¼ å›¾ç‰‡é€‰æ‹©ï¼Œé€‚é…iOSå’ŒAndroidåŒå¹³å°ï¼Œæ˜¯å®˜æ–¹æ¨èçš„åŸºç¡€é€‰æ‹©ã€‚</p>
</li>
<li>
<p><strong>multi_image_picker_plus</strong>ï¼šç¬¬ä¸‰æ–¹å¼€æºç»„ä»¶ï¼ŒåŸºäºæ—©æœŸçš„multi_image_pickerè¿­ä»£ä¼˜åŒ–ï¼Œä¸“æ³¨äº<strong>å¤šå›¾é€‰æ‹©åœºæ™¯</strong>ï¼Œæä¾›æ›´ä¸°å¯Œçš„é€‰å›¾äº¤äº’å’Œå›¾ç‰‡å¤„ç†èƒ½åŠ›ï¼Œæ‰©å±•æ€§æ›´å¼ºã€‚</p>
</li>
</ul>
<h2 data-id="heading-1">2. æ ¸å¿ƒå±æ€§ä¸APIè§£æ</h2>
<p>ä¸¤æ¬¾ç»„ä»¶çš„å±æ€§å’ŒAPIè®¾è®¡å›´ç»•å…¶å®šä½å±•å¼€ï¼Œimage_pickerä¾§é‡ç®€æ´æ˜“ç”¨ï¼Œmulti_image_picker_plusä¾§é‡å¤šå›¾åœºæ™¯çš„ç²¾ç»†åŒ–æ§åˆ¶ã€‚</p>
<h3 data-id="heading-2">2.1. image_picker æ ¸å¿ƒè§£æ</h3>
<p>image_pickerçš„APIè®¾è®¡æç®€ï¼Œé€šè¿‡é™æ€æ–¹æ³•ç›´æ¥è°ƒç”¨ï¼Œæ ¸å¿ƒå±æ€§é›†ä¸­åœ¨é€‰æ‹©å‚æ•°çš„é…ç½®ä¸Šã€‚</p>
<h4 data-id="heading-3">2.1.1. å…³é”®å±æ€§</h4>









































<table><thead><tr><th>å±æ€§å</th><th>ç±»å‹</th><th>ä½œç”¨</th><th>å¹³å°æ”¯æŒ</th></tr></thead><tbody><tr><td>source</td><td>ImageSource</td><td>æŒ‡å®šå›¾ç‰‡æ¥æºï¼Œå¯é€‰galleryï¼ˆç›¸å†Œï¼‰æˆ–cameraï¼ˆç›¸æœºï¼‰</td><td>iOS/Android</td></tr><tr><td>imageQuality</td><td>int (0-100)</td><td>å‹ç¼©åå›¾ç‰‡è´¨é‡ï¼Œæ•°å€¼è¶Šé«˜è´¨é‡è¶Šå¥½ï¼Œä»…Androidæ”¯æŒ</td><td>Android</td></tr><tr><td>maxWidth/maxHeight</td><td>double</td><td>å‹ç¼©åå›¾ç‰‡çš„æœ€å¤§å®½é«˜ï¼Œè¶…è¿‡åˆ™ç­‰æ¯”ç¼©æ”¾</td><td>iOS/Android</td></tr><tr><td>requestFullMetadata</td><td>bool</td><td>æ˜¯å¦è¯·æ±‚å›¾ç‰‡å…ƒæ•°æ®ï¼ˆå¦‚æ‹æ‘„æ—¶é—´ã€ä½ç½®ï¼‰ï¼Œé»˜è®¤false</td><td>iOS/Android</td></tr><tr><td>preferredCameraDevice</td><td>CameraDevice</td><td>æŒ‡å®šç›¸æœºè®¾å¤‡ï¼Œå¯é€‰rearï¼ˆåç½®ï¼‰æˆ–frontï¼ˆå‰ç½®ï¼‰</td><td>iOS/Android</td></tr></tbody></table>
<h4 data-id="heading-4">2.1.2. æ ¸å¿ƒAPI</h4>
<p>image_pickerçš„æ ¸å¿ƒAPIå°è£…åœ¨<code>ImagePicker</code>ç±»ä¸­ï¼Œä¸»è¦æä¾›å›¾ç‰‡å’Œè§†é¢‘é€‰æ‹©æ–¹æ³•ï¼Œæ”¯æŒå•å¼ å’Œå¤šå¼ é€‰æ‹©ï¼š</p>
<ol>
<li><strong>å•å¼ å›¾ç‰‡é€‰æ‹©</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-dart" lang="dart">Future&lt;XFile?&gt; pickImage({
  <span class="hljs-keyword">required</span> ImageSource source,
  <span class="hljs-built_in">double?</span> maxWidth,
  <span class="hljs-built_in">double?</span> maxHeight,
  <span class="hljs-built_in">int?</span> imageQuality,
  <span class="hljs-built_in">bool</span> requestFullMetadata = <span class="hljs-keyword">false</span>,
})
</code></pre>
<ol start="2">
<li><strong>å¤šå¼ å›¾ç‰‡é€‰æ‹©</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-dart" lang="dart">Future&lt;<span class="hljs-built_in">List</span>&lt;XFile&gt;?&gt; pickMultiImage({
  <span class="hljs-built_in">double?</span> maxWidth,
  <span class="hljs-built_in">double?</span> maxHeight,
  <span class="hljs-built_in">int?</span> imageQuality,
  <span class="hljs-built_in">bool</span> requestFullMetadata = <span class="hljs-keyword">false</span>,
})
</code></pre>
<ol start="3">
<li><strong>æ‹ç…§</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-dart" lang="dart">Future&lt;XFile?&gt; pickImage(
  source: ImageSource.camera, <span class="hljs-comment">// æŒ‡å®šç›¸æœºæ¥æº</span>
  preferredCameraDevice: CameraDevice.front, <span class="hljs-comment">// å¯é€‰å‰ç½®ç›¸æœº</span>
)
</code></pre>
<ol start="4">
<li><strong>è·å–å›¾ç‰‡ä¸´æ—¶è·¯å¾„</strong>ï¼šé€šè¿‡è¿”å›çš„<code>XFile</code>å¯¹è±¡çš„<code>path</code>å±æ€§è·å–ï¼Œå¯ç”¨äºé¢„è§ˆæˆ–ä¸Šä¼ ã€‚</li>
</ol>
<h3 data-id="heading-5">2.2. multi_image_picker_plus æ ¸å¿ƒè§£æ</h3>
<p>multi_image_picker_plusä¸“ä¸ºå¤šå›¾åœºæ™¯è®¾è®¡ï¼ŒAPIæ”¯æŒæ‰¹é‡é€‰æ‹©ã€é¢„è§ˆã€ç¼–è¾‘ç­‰åŠŸèƒ½ï¼Œå±æ€§é…ç½®æ›´ç»†è‡´ï¼Œæ”¯æŒè‡ªå®šä¹‰é€‰å›¾ç•Œé¢é£æ ¼ã€‚</p>
<h4 data-id="heading-6">2.2.1. å…³é”®å±æ€§</h4>





















































<table><thead><tr><th>å±æ€§å</th><th>ç±»å‹</th><th>ä½œç”¨</th><th>å¹³å°æ”¯æŒ</th></tr></thead><tbody><tr><td>maxImages</td><td>int</td><td>æœ€å¤§é€‰æ‹©å›¾ç‰‡æ•°é‡ï¼Œå¿…å¡«å‚æ•°</td><td>iOS/Android</td></tr><tr><td>selectedAssets</td><td>List</td><td>å·²é€‰æ‹©çš„å›¾ç‰‡åˆ—è¡¨ï¼Œç”¨äºå›æ˜¾å·²é€‰å†…å®¹</td><td>iOS/Android</td></tr><tr><td>enableCamera</td><td>bool</td><td>æ˜¯å¦æ˜¾ç¤ºç›¸æœºå…¥å£ï¼Œæ”¯æŒé€‰å›¾æ—¶ç›´æ¥æ‹ç…§</td><td>iOS/Android</td></tr><tr><td>cupertinoOptions</td><td>CupertinoOptions</td><td>iOSç«¯è‡ªå®šä¹‰é…ç½®ï¼ˆå¦‚æ ‡é¢˜ã€å–æ¶ˆæŒ‰é’®æ–‡å­—ï¼‰</td><td>iOS</td></tr><tr><td>materialOptions</td><td>MaterialOptions</td><td>Androidç«¯è‡ªå®šä¹‰é…ç½®ï¼ˆå¦‚ä¸»é¢˜è‰²ã€ç½‘æ ¼åˆ—æ•°ï¼‰</td><td>Android</td></tr><tr><td>compressQuality</td><td>int (0-100)</td><td>å›¾ç‰‡å‹ç¼©è´¨é‡ï¼ŒåŒå¹³å°å‡æ”¯æŒ</td><td>iOS/Android</td></tr><tr><td>compressSize</td><td>int</td><td>å›¾ç‰‡å‹ç¼©åæœ€å¤§å°ºå¯¸ï¼ˆKBï¼‰ï¼Œè¶…è¿‡åˆ™è¿›ä¸€æ­¥å‹ç¼©</td><td>iOS/Android</td></tr></tbody></table>
<h4 data-id="heading-7">2.2.2. æ ¸å¿ƒAPI</h4>
<p>multi_image_picker_plusçš„æ ¸å¿ƒæ˜¯<code>MultiImagePicker</code>ç±»ï¼Œé€šè¿‡<code>pickImages</code>æ–¹æ³•è§¦å‘é€‰å›¾ï¼Œè¿”å›<code>Asset</code>å¯¹è±¡åˆ—è¡¨ï¼ˆåŒ…å«å›¾ç‰‡è¯¦æƒ…ï¼‰ï¼Œå…³é”®APIå¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>å¤šå›¾é€‰æ‹©</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-dart" lang="dart">Future&lt;<span class="hljs-built_in">List</span>&lt;Asset&gt;&gt; pickImages({
  <span class="hljs-keyword">required</span> <span class="hljs-built_in">int</span> maxImages,
  <span class="hljs-built_in">List</span>&lt;Asset&gt; selectedAssets = <span class="hljs-keyword">const</span> [],
  <span class="hljs-built_in">bool</span> enableCamera = <span class="hljs-keyword">true</span>,
  CupertinoOptions cupertinoOptions = <span class="hljs-keyword">const</span> CupertinoOptions(),
  MaterialOptions materialOptions = <span class="hljs-keyword">const</span> MaterialOptions(),
  <span class="hljs-built_in">int</span> compressQuality = <span class="hljs-number">80</span>,
  <span class="hljs-built_in">int?</span> compressSize,
})
</code></pre>
<ol start="2">
<li>
<p><strong>Assetå¯¹è±¡æ ¸å¿ƒæ–¹æ³•</strong>ï¼š
<code>getByteData({int? width, int? height})</code>ï¼šè·å–å›¾ç‰‡å­—èŠ‚æ•°æ®ï¼Œæ”¯æŒæŒ‡å®šå®½é«˜ç¼©æ”¾</p>
</li>
<li>
<p><code>getImageByteData()</code>ï¼šè·å–åŸå§‹å›¾ç‰‡å­—èŠ‚æ•°æ®</p>
</li>
<li>
<p><code>getThumbByteData(int width, int height)</code>ï¼šè·å–ç¼©ç•¥å›¾å­—èŠ‚æ•°æ®</p>
</li>
<li>
<p><code>getMetadata()</code>ï¼šè·å–å›¾ç‰‡å…ƒæ•°æ®ï¼ˆå°ºå¯¸ã€ç±»å‹ã€æ‹æ‘„æ—¶é—´ç­‰ï¼‰</p>
</li>
<li>
<p><strong>é¢„è§ˆå·²é€‰å›¾ç‰‡</strong>ï¼šé€šè¿‡<code>AssetPreview</code>ç»„ä»¶å¯ç›´æ¥é¢„è§ˆ<code>Asset</code>åˆ—è¡¨ï¼Œæ— éœ€é¢å¤–å¤„ç†è·¯å¾„ã€‚</p>
</li>
</ol>
<h2 data-id="heading-8">3. å®é™…ä½¿ç”¨æµç¨‹å¯¹æ¯”</h2>
<p>ä¸¤æ¬¾ç»„ä»¶çš„é›†æˆæµç¨‹ç›¸ä¼¼ï¼Œä½†åœ¨å¤šå›¾å¤„ç†å’Œè‡ªå®šä¹‰åœºæ™¯ä¸‹å­˜åœ¨å·®å¼‚ï¼Œä»¥ä¸‹æ˜¯å®Œæ•´é›†æˆæ­¥éª¤å¯¹æ¯”ã€‚</p>
<h3 data-id="heading-9">3.1. image_picker é›†æˆæ­¥éª¤</h3>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºæœ¬ä¾‹å­çš„é›†æˆæ­¥éª¤ï¼š</p>
<h4 data-id="heading-10">3.1.1. æ·»åŠ ä¾èµ–</h4>
<p>åœ¨<code>pubspec.yaml</code>ä¸­æ·»åŠ ä¾èµ–å¹¶æ‰§è¡Œ<code>pub get</code>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">image_picker:</span> <span class="hljs-string">^1.1.1</span>
</code></pre>
<h4 data-id="heading-11">3.1.2. å¹³å°é…ç½®</h4>
<p>iOSï¼šåœ¨<code>Info.plist</code>ä¸­æ·»åŠ æƒé™æè¿°ï¼š</p>
<pre><code class="hljs language-plist" lang="plist"><span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>NSPhotoLibraryUsageDescription<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>éœ€è¦è®¿é—®ç›¸å†Œä»¥é€‰æ‹©å›¾ç‰‡<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>NSCameraUsageDescription<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>éœ€è¦è®¿é—®ç›¸æœºä»¥æ‹æ‘„å›¾ç‰‡<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
</code></pre>
<p>Androidï¼šåœ¨<code>AndroidManifest.xml</code>ä¸­æ·»åŠ æƒé™ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.READ_EXTERNAL_STORAGE"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.CAMERA"</span>/&gt;</span>
<span class="hljs-comment">&lt;!-- Android 13+ éœ€æ·»åŠ è¯»å†™åª’ä½“æƒé™ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.READ_MEDIA_IMAGES"</span>/&gt;</span>
</code></pre>
<h4 data-id="heading-12">3.1.3. æ ¸å¿ƒä»£ç å®ç°</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:image_picker/image_picker.dart'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ImagePickerDemo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
  <span class="hljs-meta">@override</span>
  _ImagePickerDemoState createState() =&gt; _ImagePickerDemoState();
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_ImagePickerDemoState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">ImagePickerDemo</span>&gt; </span>{
  <span class="hljs-keyword">final</span> ImagePicker _picker = ImagePicker();
  <span class="hljs-built_in">List</span>&lt;XFile&gt; _selectedImages = [];

  <span class="hljs-comment">// é€‰æ‹©å¤šå¼ å›¾ç‰‡</span>
  Future&lt;<span class="hljs-keyword">void</span>&gt; _pickMultiImages() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">List</span>&lt;XFile&gt;? images = <span class="hljs-keyword">await</span> _picker.pickMultiImage(
      imageQuality: <span class="hljs-number">80</span>, <span class="hljs-comment">// å‹ç¼©è´¨é‡</span>
      maxWidth: <span class="hljs-number">1080</span>, <span class="hljs-comment">// æœ€å¤§å®½åº¦</span>
    );
    <span class="hljs-keyword">if</span> (images != <span class="hljs-keyword">null</span>) {
      setState(() =&gt; _selectedImages = images);
    }
  }

  <span class="hljs-comment">// æ‹ç…§</span>
  Future&lt;<span class="hljs-keyword">void</span>&gt; _takePhoto() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">final</span> XFile? photo = <span class="hljs-keyword">await</span> _picker.pickImage(
      source: ImageSource.camera,
      preferredCameraDevice: CameraDevice.front,
    );
    <span class="hljs-keyword">if</span> (photo != <span class="hljs-keyword">null</span>) {
      setState(() =&gt; _selectedImages.add(photo));
    }
  }

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> Scaffold(
      appBar: AppBar(title: Text(<span class="hljs-string">"ImagePickerç¤ºä¾‹"</span>)),
      body: GridView.count(
        crossAxisCount: <span class="hljs-number">3</span>,
        children: [
          <span class="hljs-comment">// é€‰æ‹©æŒ‰é’®</span>
          IconButton(onPressed: _pickMultiImages, icon: Icon(Icons.photo_library)),
          IconButton(onPressed: _takePhoto, icon: Icon(Icons.camera)),
          <span class="hljs-comment">// å·²é€‰å›¾ç‰‡é¢„è§ˆ</span>
          ..._selectedImages.map((image) =&gt; Image.file(File(image.path))),
        ],
      ),
    );
  }
}
</code></pre>
<h3 data-id="heading-13">3.2 multi_image_picker_plus é›†æˆæ­¥éª¤</h3>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºæœ¬ä¾‹å­çš„é›†æˆæ­¥éª¤ï¼š</p>
<h4 data-id="heading-14">3.2.1. æ·»åŠ ä¾èµ–</h4>
<p>åœ¨<code>pubspec.yaml</code>ä¸­æ·»åŠ ä¾èµ–å¹¶æ‰§è¡Œ<code>pub get</code>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">multi_image_picker_plus:</span> <span class="hljs-string">^1.0.5</span>
</code></pre>
<h4 data-id="heading-15">3.2.2. å¹³å°é…ç½®</h4>
<p>iOSï¼šåœ¨<code>Info.plist</code>ä¸­æ·»åŠ ç›¸å†Œå’Œç›¸æœºæƒé™æè¿°ã€‚</p>
<pre><code class="hljs language-plist" lang="plist"><span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>NSPhotoLibraryUsageDescription<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>éœ€è¦è®¿é—®ç›¸å†Œä»¥é€‰æ‹©å›¾ç‰‡<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>NSCameraUsageDescription<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>éœ€è¦è®¿é—®ç›¸æœºä»¥æ‹æ‘„å›¾ç‰‡<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
</code></pre>
<p>Androidï¼šåœ¨<code>AndroidManifest.xml</code>ä¸­æ·»åŠ æƒé™ï¼Œå¹¶é…ç½®ä¸»é¢˜ï¼ˆå¯é€‰ï¼‰ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.READ_EXTERNAL_STORAGE"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.CAMERA"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.WRITE_EXTERNAL_STORAGE"</span> <span class="hljs-attr">android:maxSdkVersion</span>=<span class="hljs-string">"32"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">application</span> <span class="hljs-attr">...</span> <span class="hljs-attr">android:theme</span>=<span class="hljs-string">"@style/Theme.AppCompat.Light"</span>/&gt;</span>
</code></pre>
<h4 data-id="heading-16">3.2.3. æ ¸å¿ƒä»£ç å®ç°</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:multi_image_picker_plus/multi_image_picker_plus.dart'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MultiImagePickerDemo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
  <span class="hljs-meta">@override</span>
  _MultiImagePickerDemoState createState() =&gt; _MultiImagePickerDemoState();
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_MultiImagePickerDemoState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">MultiImagePickerDemo</span>&gt; </span>{
  <span class="hljs-built_in">List</span>&lt;Asset&gt; _selectedAssets = [];

  <span class="hljs-comment">// é€‰æ‹©å¤šå›¾</span>
  Future&lt;<span class="hljs-keyword">void</span>&gt; _pickImages() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-built_in">List</span>&lt;Asset&gt; resultList = <span class="hljs-keyword">await</span> MultiImagePicker.pickImages(
        maxImages: <span class="hljs-number">9</span>, <span class="hljs-comment">// æœ€å¤šé€‰9å¼ </span>
        selectedAssets: _selectedAssets, <span class="hljs-comment">// å›æ˜¾å·²é€‰</span>
        enableCamera: <span class="hljs-keyword">true</span>, <span class="hljs-comment">// æ˜¾ç¤ºç›¸æœºå…¥å£</span>
        compressQuality: <span class="hljs-number">80</span>, <span class="hljs-comment">// å‹ç¼©è´¨é‡</span>
        materialOptions: MaterialOptions(
          actionBarColor: <span class="hljs-string">"#2196F3"</span>, <span class="hljs-comment">// æ ‡é¢˜æ é¢œè‰²</span>
          statusBarColor: <span class="hljs-string">"#2196F3"</span>, <span class="hljs-comment">// çŠ¶æ€æ é¢œè‰²</span>
          gridColumnCount: <span class="hljs-number">4</span>, <span class="hljs-comment">// ç½‘æ ¼åˆ—æ•°</span>
        ),
      );
      setState(() =&gt; _selectedAssets = resultList);
    } <span class="hljs-keyword">on</span> Exception <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-built_in">print</span>(<span class="hljs-string">"é€‰å›¾å¼‚å¸¸ï¼š<span class="hljs-subst">$e</span>"</span>);
    }
  }

  <span class="hljs-comment">// é¢„è§ˆå›¾ç‰‡</span>
  <span class="hljs-keyword">void</span> _previewImages() {
    <span class="hljs-keyword">if</span> (_selectedAssets.isNotEmpty) {
      Navigator.push(
        context,
        MaterialPageRoute(
          builder: (context) =&gt; AssetPreview(
            assets: _selectedAssets,
            startIndex: <span class="hljs-number">0</span>,
          ),
        ),
      );
    }
  }

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> Scaffold(
      appBar: AppBar(title: Text(<span class="hljs-string">"MultiImagePickerPlusç¤ºä¾‹"</span>)),
      body: Column(
        children: [
          ElevatedButton(onPressed: _pickImages, child: Text(<span class="hljs-string">"é€‰æ‹©å›¾ç‰‡"</span>)),
          ElevatedButton(onPressed: _previewImages, child: Text(<span class="hljs-string">"é¢„è§ˆå›¾ç‰‡"</span>)),
          Expanded(
            child: GridView.count(
              crossAxisCount: <span class="hljs-number">4</span>,
              children: _selectedAssets.map((asset) =&gt;
                AssetThumb(
                  asset: asset,
                  width: <span class="hljs-number">100</span>,
                  height: <span class="hljs-number">100</span>,
                )
              ).toList(),
            ),
          ),
        ],
      ),
    );
  }
}
</code></pre>
<h2 data-id="heading-17">4. æ ¸å¿ƒå·®å¼‚ä¸ä¼˜ç¼ºç‚¹å¯¹æ¯”</h2>
<p>åŸºäºä¸Šè¿°è§£æï¼Œä¸¤æ¬¾ç»„ä»¶åœ¨åŠŸèƒ½ã€æ€§èƒ½ã€æ‰©å±•æ€§ç­‰æ–¹é¢å­˜åœ¨æ˜¾è‘—å·®å¼‚ï¼Œä»¥ä¸‹ä»å¤šä¸ªç»´åº¦è¿›è¡Œå¯¹æ¯”ï¼š</p>
<h3 data-id="heading-18">4.1 æ ¸å¿ƒåŠŸèƒ½å·®å¼‚</h3>













































<table><thead><tr><th>åŠŸèƒ½ç‚¹</th><th>image_picker</th><th>multi_image_picker_plus</th></tr></thead><tbody><tr><td>å¤šå›¾é€‰æ‹©</td><td>æ”¯æŒï¼Œä½†æ— é€‰å›¾æ•°é‡å®æ—¶æç¤º</td><td>åŸç”Ÿæ”¯æŒï¼Œæ˜¾ç¤ºå·²é€‰æ•°é‡å’Œå‰©ä½™å¯é€‰é¡¹</td></tr><tr><td>é€‰å›¾æ—¶æ‹ç…§</td><td>éœ€å•ç‹¬è°ƒç”¨ç›¸æœºAPIï¼Œæ— æ³•åœ¨é€‰å›¾ç•Œé¢ç›´æ¥æ‹ç…§</td><td>æ”¯æŒåœ¨é€‰å›¾ç•Œé¢å†…ç½®ç›¸æœºå…¥å£ï¼Œæ‹ç…§åç›´æ¥åŠ å…¥å·²é€‰</td></tr><tr><td>ç•Œé¢è‡ªå®šä¹‰</td><td>æ— ï¼Œä½¿ç”¨ç³»ç»ŸåŸç”Ÿé€‰å›¾ç•Œé¢</td><td>æ”¯æŒåŒå¹³å°ä¸»é¢˜ã€é¢œè‰²ã€ç½‘æ ¼åˆ—æ•°ç­‰è‡ªå®šä¹‰</td></tr><tr><td>å›¾ç‰‡é¢„è§ˆ</td><td>éœ€é€šè¿‡Fileè·¯å¾„è‡ªè¡Œå®ç°é¢„è§ˆç»„ä»¶</td><td>æä¾›AssetPreviewç»„ä»¶ï¼Œç›´æ¥é¢„è§ˆAssetåˆ—è¡¨</td></tr><tr><td>å‹ç¼©æ§åˆ¶</td><td>ä»…æ”¯æŒè´¨é‡å’Œå®½é«˜å‹ç¼©ï¼ŒAndroid/iOSå·®å¼‚å¤§</td><td>æ”¯æŒè´¨é‡ã€å°ºå¯¸ã€å¤§å°ä¸‰é‡å‹ç¼©ï¼ŒåŒå¹³å°ç»Ÿä¸€</td></tr><tr><td>å…ƒæ•°æ®è·å–</td><td>éœ€å¼€å¯requestFullMetadataï¼Œä»…è¿”å›åŸºç¡€ä¿¡æ¯</td><td>åŸç”Ÿæ”¯æŒï¼Œå¯è·å–å°ºå¯¸ã€ç±»å‹ã€æ‹æ‘„æ—¶é—´ç­‰è¯¦ç»†ä¿¡æ¯</td></tr><tr><td>è§†é¢‘é€‰æ‹©</td><td>æ”¯æŒå•è§†é¢‘/å¤šè§†é¢‘é€‰æ‹©</td><td>ä»…æ”¯æŒå›¾ç‰‡é€‰æ‹©ï¼Œä¸æ”¯æŒè§†é¢‘</td></tr></tbody></table>
<h3 data-id="heading-19">4.2 ä¼˜ç¼ºç‚¹å¯¹æ¯”</h3>
<p>ä»¥ä¸‹åˆ†ç±»å‹ç»´åº¦è¿›è¡Œå¯¹æ¯”:</p>
<h4 data-id="heading-20">4.2.1. image_pickerçš„ä¼˜ç¼ºç‚¹</h4>
<ul>
<li>
<p><strong>ä¼˜ç‚¹</strong>ï¼š
å®˜æ–¹ç»´æŠ¤ï¼Œç¨³å®šæ€§é«˜ï¼Œä¸Flutterç‰ˆæœ¬å…¼å®¹æ€§å¥½</p>
</li>
<li>
<p>è½»é‡ç®€æ´ï¼ŒAPIå­¦ä¹ æˆæœ¬ä½ï¼Œå¿«é€Ÿé›†æˆ</p>
</li>
<li>
<p>æ”¯æŒè§†é¢‘é€‰æ‹©ï¼Œæ»¡è¶³å›¾æ–‡+è§†é¢‘æ··åˆåœºæ™¯</p>
</li>
<li>
<p>ç³»ç»ŸåŸç”Ÿç•Œé¢ï¼Œç”¨æˆ·ç†Ÿæ‚‰åº¦é«˜ï¼Œäº¤äº’ä¸€è‡´æ€§å¥½</p>
</li>
</ul>
<p><strong>ç¼ºç‚¹</strong>ï¼š
å¤šå›¾é€‰æ‹©ä½“éªŒå·®ï¼Œæ— å®æ—¶æ•°é‡æç¤ºå’Œå·²é€‰å›æ˜¾ä¼˜åŒ–</p>
<p>ç•Œé¢æ— æ³•è‡ªå®šä¹‰ï¼Œæ— æ³•åŒ¹é…APPæ•´ä½“è®¾è®¡é£æ ¼</p>
<p>å‹ç¼©å’Œé¢„è§ˆéœ€è‡ªè¡Œå¤„ç†ï¼Œå¼€å‘æ•ˆç‡ä½</p>
<p>Androidå’ŒiOSå‹ç¼©é€»è¾‘ä¸ä¸€è‡´ï¼Œéœ€é¢å¤–é€‚é…</p>
<h4 data-id="heading-21">4.2.2. multi_image_picker_plusçš„ä¼˜ç¼ºç‚¹</h4>
<ul>
<li>
<p><strong>ä¼˜ç‚¹</strong>ï¼š
å¤šå›¾é€‰æ‹©ä½“éªŒæä½³ï¼Œæ”¯æŒå·²é€‰å›æ˜¾ã€æ•°é‡æ§åˆ¶ã€å†…ç½®ç›¸æœº</p>
</li>
<li>
<p>ä¸°å¯Œçš„è‡ªå®šä¹‰èƒ½åŠ›ï¼Œå¯åŒ¹é…APPä¸»é¢˜é£æ ¼</p>
</li>
<li>
<p>æä¾›AssetPreviewã€AssetThumbç­‰ç»„ä»¶ï¼Œå‡å°‘é‡å¤å¼€å‘</p>
</li>
<li>
<p>ç»Ÿä¸€çš„å‹ç¼©é€»è¾‘ï¼ŒåŒå¹³å°è¡¨ç°ä¸€è‡´</p>
</li>
<li>
<p>Assetå¯¹è±¡å°è£…å®Œå–„ï¼Œä¾¿äºå›¾ç‰‡å¤„ç†å’Œä¸Šä¼ </p>
</li>
</ul>
<p><strong>ç¼ºç‚¹</strong>ï¼š
ç¬¬ä¸‰æ–¹ç»´æŠ¤ï¼Œç‰ˆæœ¬æ›´æ–°é€Ÿåº¦å¯èƒ½æ»åäºFlutteræ–°ç‰ˆæœ¬</p>
<p>ä¸æ”¯æŒè§†é¢‘é€‰æ‹©ï¼Œéœ€é¢å¤–é›†æˆå…¶ä»–ç»„ä»¶</p>
<p>è‡ªå®šä¹‰é…ç½®é¡¹å¤šï¼Œåˆæ¬¡é›†æˆéœ€ç†Ÿæ‚‰æ›´å¤šå‚æ•°</p>
<p>åŒ…ä½“ç§¯ç•¥å¤§äºimage_picker</p>
<h2 data-id="heading-22">5. é€‰å‹å»ºè®®</h2>
<p>æ ¹æ®ä¸šåŠ¡åœºæ™¯çš„ä¸åŒï¼Œä¸¤æ¬¾ç»„ä»¶çš„é€‚ç”¨åœºæ™¯å­˜åœ¨æ˜æ˜¾åŒºåˆ†ï¼Œå»ºè®®æŒ‰ä»¥ä¸‹åŸåˆ™é€‰å‹ï¼š</p>
<ol>
<li>
<p><strong>ä¼˜å…ˆé€‰æ‹© image_picker çš„åœºæ™¯</strong>ï¼š
ç®€å•çš„å•å›¾é€‰æ‹©æˆ–æ‹ç…§åœºæ™¯ï¼ˆå¦‚å¤´åƒä¸Šä¼ ï¼‰</p>
</li>
<li>
<p>éœ€è¦åŒæ—¶æ”¯æŒå›¾ç‰‡å’Œè§†é¢‘é€‰æ‹©çš„åœºæ™¯</p>
</li>
<li>
<p>å¯¹åŒ…ä½“ç§¯æ•æ„Ÿï¼Œè¿½æ±‚è½»é‡é›†æˆçš„åœºæ™¯</p>
</li>
<li>
<p>é‡è§†å®˜æ–¹ç»´æŠ¤ä¿éšœï¼Œéœ€é•¿æœŸç¨³å®šæ€§çš„åœºæ™¯</p>
</li>
<li>
<p><strong>ä¼˜å…ˆé€‰æ‹© multi_image_picker_plus çš„åœºæ™¯</strong>ï¼š
æ ¸å¿ƒåœºæ™¯ä¸ºå¤šå›¾é€‰æ‹©ï¼ˆå¦‚æœ‹å‹åœˆã€ç›¸å†Œä¸Šä¼ ï¼‰</p>
</li>
<li>
<p>å¯¹é€‰å›¾ç•Œé¢é£æ ¼æœ‰è‡ªå®šä¹‰éœ€æ±‚ï¼Œéœ€åŒ¹é…APPä¸»é¢˜</p>
</li>
<li>
<p>éœ€è¦ä¼˜åŒ–å¤šå›¾é€‰å›¾ä½“éªŒï¼ˆå¦‚å·²é€‰å›æ˜¾ã€å†…ç½®ç›¸æœºï¼‰</p>
</li>
<li>
<p>éœ€è¦å¿«é€Ÿå®ç°å›¾ç‰‡é¢„è§ˆã€ç¼©ç•¥å›¾å±•ç¤ºçš„åœºæ™¯</p>
</li>
</ol>
<h2 data-id="heading-23">6. æ€»ç»“</h2>
<p>image_pickerå’Œmulti_image_picker_pluså„æœ‰ä¾§é‡ï¼š</p>
<ul>
<li>image_pickeræ˜¯å®˜æ–¹èƒŒä¹¦çš„"åŸºç¡€æ¬¾"ï¼Œèƒœåœ¨ç¨³å®šè½»é‡ã€æ”¯æŒè§†é¢‘ï¼›</li>
<li>multi_image_picker_plusæ˜¯å¤šå›¾åœºæ™¯çš„"ä¸“ä¸šæ¬¾"ï¼Œèµ¢åœ¨ä½“éªŒä¼˜åŒ–å’Œè‡ªå®šä¹‰èƒ½åŠ›ã€‚</li>
</ul>
<p>å¼€å‘è€…åœ¨å®é™…å¼€å‘ä¸­éœ€ç»“åˆä¸šåŠ¡éœ€æ±‚çš„æ ¸å¿ƒç—›ç‚¹ï¼Œæƒè¡¡ç¨³å®šæ€§ã€åŠŸèƒ½å®Œæ•´æ€§å’Œå¼€å‘æ•ˆç‡ï¼Œé€‰æ‹©æœ€é€‚åˆçš„ç»„ä»¶ã€‚è‹¥éœ€åŒæ—¶æ”¯æŒå¤šå›¾å’Œè§†é¢‘ï¼Œå¯è€ƒè™‘ä¸¤è€…ç»“åˆä½¿ç”¨ã€‚ç”¨multi_image_picker_pluså¤„ç†å¤šå›¾ï¼Œè€Œimage_pickerè¡¥å……è§†é¢‘é€‰æ‹©èƒ½åŠ›ã€‚</p>
<hr/>
<blockquote>
<p>æœ¬æ¬¡åˆ†äº«å°±åˆ°è¿™å„¿å•¦ï¼Œæˆ‘æ˜¯é¹å¤šå¤šï¼Œæ·±è€•å‰ç«¯çš„æŠ€æœ¯åˆ›ä½œè€…ï¼Œå¦‚æœæ‚¨çœ‹äº†è§‰å¾—æœ‰å¸®åŠ©ï¼Œæ¬¢è¿è¯„è®ºï¼Œå…³æ³¨ï¼Œç‚¹èµï¼Œè½¬å‘ï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§~</p>
</blockquote>
<p>PSï¼šåœ¨æœ¬é¡µæŒ‰F12ï¼Œåœ¨consoleä¸­è¾“å…¥document.getElementsByClassName('panel-btn')[0].click();æœ‰æƒŠå–œå“¦~</p>
<p><code>å¾€æœŸæ–‡ç« </code></p>
<ul>
<li><a href="https://juejin.cn/post/7568136081302978623" target="_blank" title="https://juejin.cn/post/7568136081302978623">è§£é”flutterå¼¹çª—æ–°å§¿åŠ¿ï¼šdialog-flutter_smart_dialogæ’ä»¶è§£è¯»+æ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7559089440901545999" target="_blank" title="https://juejin.cn/post/7559089440901545999">flutter-åˆ‡æ¢çŠ¶æ€æ˜¾ç¤ºä¸åŒç»„ä»¶10ç§å®ç°æ–¹æ¡ˆå…¨è§£æ</a></li>
<li><a href="https://juejin.cn/post/7555079970491318308" target="_blank" title="https://juejin.cn/post/7555079970491318308">flutter-è¯¦è§£æ§åˆ¶ç»„ä»¶æ˜¾ç¤ºçš„ä¸¤ç§æ–¹å¼Offstageä¸Visibility</a></li>
<li><a href="https://juejin.cn/post/7535358416182788122" target="_blank" title="https://juejin.cn/post/7535358416182788122">flutter-ä½¿ç”¨AnimatedDefaultTextStyleå®ç°æ–‡æœ¬åŠ¨ç”»</a></li>
<li><a href="https://juejin.cn/post/7537339432291434496" target="_blank" title="https://juejin.cn/post/7537339432291434496">flutter-ä½¿ç”¨SafeAreaç»„ä»¶å¤„ç†å„æœºå‹çš„å®‰å…¨è·ç¦»</a></li>
<li><a href="https://juejin.cn/spost/7537593417099149321" target="_blank" title="https://juejin.cn/spost/7537593417099149321">flutter-å®ç°æ¸å˜è‰²è¾¹æ¡†èƒŒæ™¯ä»¥åŠæ¸å˜è‰²æ–‡å­—</a></li>
<li><a href="https://juejin.cn/post/7543474419240370185" target="_blank" title="https://juejin.cn/post/7543474419240370185">flutter-ä½¿ç”¨confettiåˆ¶ä½œç‚«é…·çº¸å±‘çˆ†ç‚¸ç²’å­åŠ¨ç”»</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨Unslothå¾®è°ƒä¸€ä¸ªè€ä¸­åŒ»å‚ç›´é¢†åŸŸå¤§æ¨¡å‹]]></title>    <link>https://juejin.cn/post/7571304204720406582</link>    <guid>https://juejin.cn/post/7571304204720406582</guid>    <pubDate>2025-11-11T06:12:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571304204720406582" data-draft-id="7571005216910393363" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨Unslothå¾®è°ƒä¸€ä¸ªè€ä¸­åŒ»å‚ç›´é¢†åŸŸå¤§æ¨¡å‹"/> <meta itemprop="keywords" content="LLM,Agent,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-11T06:12:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹æ•™ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1145012233707299"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨Unslothå¾®è°ƒä¸€ä¸ªè€ä¸­åŒ»å‚ç›´é¢†åŸŸå¤§æ¨¡å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1145012233707299/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹æ•™ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-11T06:12:58.000Z" title="Tue Nov 11 2025 06:12:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p>æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨Unslothæ¡†æ¶å¾®è°ƒå¤§è¯­è¨€æ¨¡å‹ï¼Œä»¥ã€Šä¼¤å¯’è®ºã€‹æ•°æ®é›†ä¸ºä¾‹è®­ç»ƒä¸€ä¸ªä¸­åŒ»ä¸“å®¶æ¨¡å‹ã€‚Unslothæ˜¾è‘—é™ä½äº†å¾®è°ƒçš„èµ„æºéœ€æ±‚ã€‚æ–‡ç« æ¶µç›–äº†ä»ç¯å¢ƒé…ç½®ã€æ¨¡å‹é€‰æ‹©ã€æ•°æ®å‡†å¤‡åˆ°è®­ç»ƒéƒ¨ç½²çš„å®Œæ•´æµç¨‹ï¼Œä¸ºå‚ç›´é¢†åŸŸæ¨¡å‹å¾®è°ƒæä¾›äº†å®ç”¨å‚è€ƒã€‚</p>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸é¢ä¸´ç‰¹å®šåœºæ™¯ä¸‹çš„é—®é¢˜éœ€æ±‚ã€‚æ­¤æ—¶ï¼Œé€šè¿‡æŒ‡ä»¤å¾®è°ƒå¯ä»¥è®©æ¨¡å‹æ›´å¥½åœ°é€‚åº”è¿™äº›å…·ä½“ä»»åŠ¡ï¼Œä»è€Œæå‡æ¨¡å‹çš„å®ç”¨æ€§å’Œè¡¨ç°ã€‚</p>
<p>æ¯”å¦‚ï¼šåœ¨åŒ»ç–—å¥åº·é¢†åŸŸï¼ŒåŒ»ç”Ÿå¸Œæœ›è®©å¤§æ¨¡å‹æ›´å¥½åœ°ç†è§£ä¸­åŒ»è¯Šæ–­å’Œæ²»ç–—çš„çŸ¥è¯†ä½“ç³»ï¼Œä»è€Œèƒ½å¤Ÿè¾…åŠ©åˆ†æç—…æƒ…ã€æ¨èä¸­è¯æ–¹å‰‚ï¼Œç”šè‡³è‡ªåŠ¨ç”Ÿæˆç—…å†æ‘˜è¦ã€‚åˆå¦‚ï¼Œåœ¨æ³•å¾‹è¡Œä¸šï¼Œå¾‹å¸ˆå›¢é˜Ÿå¸Œæœ›é€šè¿‡å¾®è°ƒï¼Œè®©å¤§æ¨¡å‹èƒ½å¤Ÿæ›´å‡†ç¡®åœ°è§£è¯»ä¸­å›½æ³•å¾‹æ¡æ–‡ã€åˆ¤ä¾‹å’ŒåˆåŒæ–‡æœ¬ï¼Œè¾…åŠ©æ³•å¾‹æ£€ç´¢å’Œæ–‡ä¹¦ç”Ÿæˆã€‚æ­¤å¤–ï¼Œåœ¨æ•™è‚²é¢†åŸŸï¼Œæ•™å¸ˆå¯ä»¥é€šè¿‡æŒ‡ä»¤å¾®è°ƒï¼Œè®©æ¨¡å‹æ›´è´´åˆæœ¬åœ°æ•™æå†…å®¹ï¼Œè‡ªåŠ¨æ‰¹æ”¹ä½œä¸šã€ç”Ÿæˆä¸ªæ€§åŒ–å­¦ä¹ å»ºè®®ã€‚è¿™äº›åœºæ™¯éƒ½éœ€è¦é’ˆå¯¹ç‰¹å®šä»»åŠ¡å’Œæ•°æ®å¯¹å¤§æ¨¡å‹è¿›è¡Œå®šåˆ¶åŒ–å¾®è°ƒï¼Œä»¥æå‡å…¶åœ¨å®é™…åº”ç”¨ä¸­çš„è¡¨ç°å’Œä»·å€¼ã€‚</p>
<p>æ­£å¥½æœ€è¿‘èº«ä½“ä¸é€‚ï¼Œå¹¶ä¸”å¾—åˆ°ä¸€æœ¬åŒ»ç–—ç§˜ç±ã€Šä¼¤å¯’è®ºã€‹ï¼Œç”¨Â <code>Unsloth</code>Â æ¥å¾®è°ƒä¸€ä¸ªå‚ç›´é¢†åŸŸçš„æ¨¡å‹å‡ºæ¥ã€‚</p>
<h2 data-id="heading-0">1.  å…³äºUnsloth</h2>
<p>å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„å¾®è°ƒæœ‰å¾ˆå¤§çš„èµ„æºæŒ‘æˆ˜ï¼Œå¦‚é«˜æ˜‚çš„å†…å­˜éœ€æ±‚å’Œæ¼«é•¿çš„è®­ç»ƒæ—¶é—´ã€‚</p>
<p>ä¼ ç»Ÿçš„å¾®è°ƒæ–¹æ³•ï¼Œå¯èƒ½éœ€è¦æ•°åå°æ—¶æ‰èƒ½å®Œæˆä¸€é¡¹ä»»åŠ¡ï¼Œå¹¶ä¸”å¸¸å¸¸å¯¼è‡´å†…å­˜ä¸è¶³é—®é¢˜ ã€‚è¿™ç§ç‰¹æ€§é™åˆ¶äº†ä¸ªäººå¼€å‘è€…å’Œå°å‹å›¢é˜Ÿå¯¹ LLM è¿›è¡Œå®šåˆ¶åŒ–å’Œä¼˜åŒ–çš„èƒ½åŠ›ã€‚</p>
<p>Unsloth æ­£æ˜¯ä¸ºäº†è§£å†³è¿™äº›ç—›ç‚¹è€Œè¯ç”Ÿçš„ã€‚</p>
<p>å®ƒæ˜¯ä¸€ä¸ªä¸“é—¨ä¸ºåŠ é€Ÿ LLM å¾®è°ƒå¹¶æ˜¾è‘—é™ä½å†…å­˜æ¶ˆè€—è€Œè®¾è®¡çš„ Python æ¡†æ¶ ã€‚</p>
<p>Unsloth å®ç°äº†æ˜¾è‘—çš„æ€§èƒ½æå‡ï¼ŒåŒæ—¶ä¿æŒäº†ä¸ Hugging Face ç”Ÿæ€ç³»ç»Ÿçš„å®Œå…¨å…¼å®¹æ€§ ã€‚è¿™ä½¿å¾—ç”¨æˆ·å³ä½¿åœ¨å…è´¹çš„ Colab GPU æˆ–é…å¤‡ GPU çš„ç¬”è®°æœ¬ç”µè„‘ç­‰æœ‰é™ç¡¬ä»¶ä¸Šï¼Œä¹Ÿèƒ½å¤Ÿé«˜æ•ˆåœ°è¿›è¡Œ LLM å¾®è°ƒ ã€‚</p>
<h2 data-id="heading-1">2.  Unsloth çš„æ ¸å¿ƒä¼˜åŠ¿</h2>
<p><strong>é€Ÿåº¦æå‡</strong></p>
<p>åœ¨Alpaca æ•°æ®é›†ä¸Šè¿›è¡Œäº†æµ‹è¯•ï¼Œä½¿ç”¨çš„ batch å¤§å°ä¸º 2ï¼Œgradient accumulation steps ä¸º 4ï¼Œrank ä¸º 32ï¼Œå¹¶åœ¨æ‰€æœ‰çº¿æ€§å±‚ï¼ˆqã€kã€vã€oã€gateã€upã€downï¼‰ä¸Šåº”ç”¨äº† QLoRA</p>





























<table><thead><tr><th>Model</th><th>VRAM</th><th>Unsloth speed</th><th>VRAM reduction</th><th>Longer context</th><th>Hugging Face + FA2</th></tr></thead><tbody><tr><td>Llama 3.3 (70B)</td><td>80GB</td><td>2x</td><td>&gt;75%</td><td>13x longer</td><td>1x</td></tr><tr><td>Llama 3.1 (8B)</td><td>80GB</td><td>2x</td><td>&gt;70%</td><td>12x longer</td><td>1x</td></tr></tbody></table>
<p>æµ‹è¯•ç»“æœæ˜¾ç¤ºï¼Œä¸¤ç§æ¨¡å‹åœ¨æ˜¾å­˜ä½¿ç”¨ä¸Šå‡ä¸º80GBï¼Œé€Ÿåº¦å‡æå‡äº†2å€ã€‚Llama 3.3çš„æ˜¾å­˜å‡å°‘äº†è¶…è¿‡75%ï¼Œèƒ½å¤Ÿå¤„ç†çš„ä¸Šä¸‹æ–‡é•¿åº¦æå‡äº†13å€ï¼›è€ŒLlama 3.1çš„æ˜¾å­˜å‡å°‘äº†è¶…è¿‡70%ï¼Œä¸Šä¸‹æ–‡é•¿åº¦æå‡äº†12å€ã€‚</p>
<p><strong>API ç®€åŒ–</strong></p>
<p>Unsloth æä¾›äº†ä¸€ä¸ªç®€æ´çš„ APIï¼Œæ˜¾è‘—é™ä½äº† LLM å¾®è°ƒçš„å¤æ‚æ€§ ã€‚å®ƒå°†æ¨¡å‹åŠ è½½ã€é‡åŒ–ã€è®­ç»ƒã€è¯„ä¼°ã€ä¿å­˜ã€å¯¼å‡ºä»¥åŠä¸ Ollamaã€llama.cpp å’Œ vLLM ç­‰æ¨ç†å¼•æ“çš„é›†æˆç­‰æ‰€æœ‰å·¥ä½œæµç¨‹è¿›è¡Œäº†ç®€åŒ– ã€‚</p>
<p><strong>Hugging Face ç”Ÿæ€ç³»ç»Ÿå…¼å®¹æ€§</strong></p>
<p>Unsloth æ˜¯åœ¨ Hugging Face Transformers åº“ä¹‹ä¸Šæ„å»ºçš„ï¼Œè¿™ä½¿å…¶èƒ½å¤Ÿå……åˆ†åˆ©ç”¨ Hugging Face å¼ºå¤§çš„ç”Ÿæ€ç³»ç»Ÿï¼ŒåŒæ—¶æ·»åŠ è‡ªå·±çš„å¢å¼ºåŠŸèƒ½æ¥ç®€åŒ–å¾®è°ƒè¿‡ç¨‹ ã€‚</p>
<p>å®ƒä¸ Hugging Face Hubã€Transformersã€PEFT å’Œ TRL ç­‰ç»„ä»¶å®Œå…¨å…¼å®¹ ã€‚è¿™æ„å‘³ç€ç”¨æˆ·å¯ä»¥æ— ç¼åœ°è®¿é—® Hugging Face æä¾›çš„ä¸°å¯Œæ¨¡å‹å’Œæ•°æ®é›†èµ„æºï¼Œå¹¶åˆ©ç”¨ Unsloth çš„ä¼˜åŒ–è¿›è¡Œè®­ç»ƒã€‚</p>
<p><strong>ç¡¬ä»¶å…¼å®¹æ€§ä¸å¯è®¿é—®æ€§</strong></p>
<p>Unsloth æ”¯æŒéå¸¸å¤šçš„ NVIDIA GPUï¼Œä» 2018 å¹´åŠä»¥åå‘å¸ƒçš„å‹å·ï¼ŒåŒ…æ‹¬ V100ã€T4ã€Titan Vã€RTX 20ã€30ã€40 ç³»åˆ—ã€A100 å’Œ H100 ç­‰ï¼Œæœ€ä½ CUDA èƒ½åŠ›è¦æ±‚ä¸º 7.0ã€‚å³ä½¿æ˜¯ GTX 1070 å’Œ 1080 ä¹Ÿèƒ½å·¥ä½œï¼Œå°½ç®¡é€Ÿåº¦è¾ƒæ…¢ ã€‚</p>
<p>Unsloth å¯ä»¥åœ¨ Linux å’Œ Windows æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œ ã€‚</p>
<p><strong>å¹¿æ³›çš„æ¨¡å‹æ”¯æŒ</strong></p>
<p>Unsloth æ”¯æŒæ‰€æœ‰ Transformer é£æ ¼çš„æ¨¡å‹ï¼ŒåŒ…æ‹¬ Llamaã€DeepSeekã€TTSã€Qwenã€Mistralã€Gemma ç­‰ä¸»æµ LLMã€‚å®ƒè¿˜æ”¯æŒå¤šæ¨¡æ€æ¨¡å‹ã€æ–‡æœ¬åˆ°è¯­éŸ³ (TTS)ã€è¯­éŸ³åˆ°æ–‡æœ¬ (STT) æ¨¡å‹ã€BERT æ¨¡å‹ä»¥åŠæ‰©æ•£æ¨¡å‹ã€‚</p>
<p><strong>åŠ¨æ€é‡åŒ–</strong></p>
<p>Unsloth å¼•å…¥äº†åŠ¨æ€ 4 ä½é‡åŒ– (Dynamic 4-bit Quantization) æŠ€æœ¯ï¼Œè¿™æ˜¯ä¸€ç§æ™ºèƒ½çš„é‡åŒ–ç­–ç•¥ï¼Œé€šè¿‡åŠ¨æ€é€‰æ‹©ä¸å¯¹æŸäº›å‚æ•°è¿›è¡Œé‡åŒ–ï¼Œä»è€Œåœ¨ä»…å¢åŠ ä¸åˆ° 10% VRAM çš„æƒ…å†µä¸‹æ˜¾è‘—æé«˜å‡†ç¡®æ€§ ã€‚</p>
<p><strong>ç¤¾åŒºçš„æ´»è·ƒ</strong></p>
<p>ä»GitHubä¸Šå¯ä»¥çœ‹å‡ºï¼Œä»–çš„å—æ¬¢è¿ç¨‹åº¦éå¸¸é«˜ï¼Œç›®å‰å·²ç»43ké¢—æ˜Ÿ</p>
<blockquote>
<p>â</p>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Funslothai%2Funsloth" target="_blank" title="https://github.com/unslothai/unsloth" ref="nofollow noopener noreferrer">github.com/unslothai/uâ€¦</a></p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2fcdecd2deb545b589b9c4e71cb0ce83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763446378&amp;x-signature=ClBLhODcfYaWWVRXbkvK0TMccGg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">3.  ä½¿ç”¨è¦æ±‚</h2>
<hr/>
<p>æ”¯æŒ Linux å’Œ Windowsã€‚</p>
<p>æ”¯æŒ 2018 å¹´åŠä»¥åçš„ NVIDIA æ˜¾å¡ï¼ŒåŒ…æ‹¬ Blackwell RTX 50 ç³»åˆ—ã€‚æœ€ä½è¦æ±‚ CUDA è®¡ç®—èƒ½åŠ›ä¸º 7.0ï¼ˆå¦‚ V100ã€T4ã€Titan Vã€RTX 20ã€30ã€40 ç³»åˆ—ï¼Œä»¥åŠ A100ã€H100ã€L40 ç­‰ï¼‰ã€‚GTX 1070ã€1080 è™½ç„¶å¯ä»¥ä½¿ç”¨ï¼Œä½†è¿è¡Œé€Ÿåº¦è¾ƒæ…¢ã€‚</p>
<p><strong>GPUå†…å­˜è¦æ±‚ï¼š</strong></p>











































































<table><thead><tr><th>Model parameters</th><th>QLoRA (4-bit) VRAM</th><th>LoRA (16-bit) VRAM</th></tr></thead><tbody><tr><td>3B</td><td>3.5 GB</td><td>8 GB</td></tr><tr><td>7B</td><td>5 GB</td><td>19 GB</td></tr><tr><td>8B</td><td>6 GB</td><td>22 GB</td></tr><tr><td>9B</td><td>6.5 GB</td><td>24 GB</td></tr><tr><td>11B</td><td>7.5 GB</td><td>29 GB</td></tr><tr><td>14B</td><td>8.5 GB</td><td>33 GB</td></tr><tr><td>27B</td><td>22GB</td><td>64GB</td></tr><tr><td>32B</td><td>26 GB</td><td>76 GB</td></tr><tr><td>40B</td><td>30GB</td><td>96GB</td></tr><tr><td>70B</td><td>41 GB</td><td>164 GB</td></tr><tr><td>81B</td><td>48GB</td><td>192GB</td></tr><tr><td>90B</td><td>53GB</td><td>212GB</td></tr><tr><td>405B</td><td>237 GB</td><td>950 GB</td></tr></tbody></table>
<h2 data-id="heading-3">4.  å®‰è£… Unsloth</h2>
<hr/>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆå§‹åŒ–ä¸€ä¸ªåä¸º demo-unsloth çš„é¡¹ç›®ï¼Œå¹¶æŒ‡å®š Python ç‰ˆæœ¬ä¸º 3.11.9  </span>
uv init demo-unsloth -p 3.11.9  
<span class="hljs-comment"># è¿›å…¥é¡¹ç›®ç›®å½•  </span>
<span class="hljs-built_in">cd</span>Â demo-unsloth  
<span class="hljs-comment"># åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ  </span>
uv venv  
<span class="hljs-comment"># æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆWindows ä¸‹ï¼‰  </span>
.venv\Scripts\activate  
<span class="hljs-comment"># å®‰è£… triton-windowsï¼Œè¦æ±‚ç‰ˆæœ¬3.3.1.post19  </span>
uv pip install triton-windows==3.3.1.post19  
<span class="hljs-comment"># å®‰è£…æ”¯æŒ CUDA 12.6 çš„ PyTorch åŠå…¶ç›¸å…³åº“  </span>
uv pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu126
</code></pre>
<p><strong>å®‰è£…unsloth</strong></p>
<pre><code class="hljs">uv pip install unsloth
</code></pre>
<h2 data-id="heading-4">5.  é€‰æ‹©æ¨¡å‹</h2>
<hr/>
<p>Unsloth æ”¯æŒéå¸¸å¤šçš„é¢„è®­ç»ƒæ¨¡å‹ï¼ŒåŒ…æ‹¬ Llamaã€DeepSeekã€TTSã€Qwenã€Mistral å’Œ Gemma ç³»åˆ— LLM 3ã€‚</p>
<p>åœ¨é€‰æ‹©æ¨¡å‹æ—¶ï¼Œéœ€è¦æ³¨æ„æ¨¡å‹åç§°çš„åç¼€ã€‚ä»¥Â <code>unsloth-bnb-4bit</code>Â ç»“å°¾çš„æ¨¡å‹è¡¨ç¤ºå®ƒä»¬æ˜¯ Unsloth åŠ¨æ€ 4 ä½é‡åŒ–æ¨¡å‹ï¼Œä¸æ ‡å‡†Â <code>bnb-4bit</code>Â æ¨¡å‹ç›¸æ¯”ï¼Œè¿™äº›æ¨¡å‹åœ¨ç•¥å¾®å¢åŠ  VRAM ä½¿ç”¨çš„æƒ…å†µä¸‹æä¾›äº†æ›´é«˜çš„ç²¾åº¦ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.unsloth.ai%2Fget-started%2Fall-our-models" target="_blank" title="https://docs.unsloth.ai/get-started/all-our-models" ref="nofollow noopener noreferrer">docs.unsloth.ai/get-startedâ€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e079ef9a2c44f6cbbb68adbc9a84acf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763446378&amp;x-signature=OIda%2FB%2B45WTQ8nLx7Da6blqwa2o%3D" alt="" loading="lazy"/></p>
<p><strong>æˆ‘çš„æ˜¾å¡æ˜¯RTX 2050æ˜¾å¡ï¼Œ4GBæ˜¾å­˜ï¼Œæˆ‘é€‰ä¸€ä¸ªæ¯”è¾ƒå°çš„ç‰ˆæœ¬ unsloth/Qwen2.5-1.5B-Instruct-bnb-4bit</strong></p>
<p><strong>ä¸‹è½½æ¨¡å‹ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">huggingface-cli download <span class="hljs-attr">--resume-download</span> unsloth/Qwen2.<span class="hljs-number">5</span>-<span class="hljs-number">1.5</span>B-Instruct-bnb-<span class="hljs-number">4</span>bit <span class="hljs-attr">--local-dir</span> ./ckpts/qwen2.<span class="hljs-number">5</span>-<span class="hljs-number">1.5</span>b-instruct-bnb-<span class="hljs-number">4</span>bit
</code></pre>
<h2 data-id="heading-5">6.  æ•°æ®é›†å‡†å¤‡</h2>
<hr/>
<p>æ•°æ®é›†çš„è´¨é‡å’Œæ ¼å¼ç›´æ¥å†³å®šäº†æ¨¡å‹å¾®è°ƒçš„æ•ˆæœã€‚</p>
<p>ä¸€ä¸ªé«˜è´¨é‡çš„æ•°æ®é›†ä¸ä»…éœ€è¦è¦†ç›–ç›®æ ‡ä»»åŠ¡çš„æ ¸å¿ƒå†…å®¹ï¼Œè¿˜åº”ä¿è¯é—®ç­”å¯¹çš„å‡†ç¡®æ€§ã€å®Œæ•´æ€§å’Œå¤šæ ·æ€§ã€‚</p>
<p>æ­¤å¤–ï¼Œæ•°æ®é›†çš„è§„æ¨¡ä¹Ÿä¼šå½±å“æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ï¼Œæ•°æ®é‡è¶Šå¤§ã€è¦†ç›–é¢è¶Šå¹¿ï¼Œæ¨¡å‹åœ¨å®é™…åº”ç”¨ä¸­çš„è¡¨ç°é€šå¸¸ä¼šæ›´å¥½ã€‚</p>
<p>å› æ­¤ï¼Œåœ¨å¾®è°ƒå‰åº”å……åˆ†æ¸…æ´—ã€æ ‡æ³¨å’Œæ£€æŸ¥æ•°æ®ï¼Œç¡®ä¿å…¶èƒ½å¤Ÿæœ‰æ•ˆæ”¯æ’‘ä¸‹æ¸¸ä»»åŠ¡çš„è®­ç»ƒéœ€æ±‚ã€‚</p>
<p>å› ä¸ºè¦è¦è®­ç»ƒä¸€ä¸ªè€ä¸­åŒ»ï¼Œæ‰€ä»¥æ‰¾äº†ä¸€æœ¬ã€Šä¼¤å¯’è®ºã€‹,é€šè¿‡å·¥å…·æŠŠä»–æ‹†æˆé—®ç­”å¯¹ï¼Œæ ¼å¼å¦‚ä¸‹</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[  Â  {  Â  Â Â <span class="hljs-string">"Question"</span>:Â <span class="hljs-string">"ä¼¤å¯’ä¸€æ—¥ï¼Œå·¨é˜³å—ä¹‹ä¼šå‡ºç°ä»€ä¹ˆç—‡çŠ¶ï¼Ÿ"</span>,  Â  Â Â <span class="hljs-string">"Response"</span>:Â <span class="hljs-string">"ä¼¤å¯’ä¸€æ—¥ï¼Œå·¨é˜³å—ä¹‹ä¼šå‡ºç°å¤´é¡¹ç—›ã€è…°è„Šå¼ºçš„ç—‡çŠ¶ã€‚å› ä¸ºå·¨é˜³è€…ï¼Œè¯¸é˜³ä¹‹å±ä¹Ÿï¼Œå…¶è„‰è¿äºé£åºœï¼Œä¸ºè¯¸é˜³ä¸»æ°”ï¼Œæ‰€ä»¥å…ˆå—é‚ªã€‚ "</span>  Â  },  Â  {  Â  Â Â <span class="hljs-string">"Question"</span>:Â <span class="hljs-string">"ä¸‰é˜´å—ç—…ï¼Œå¥é˜´å—ä¹‹ä¼šå‡ºç°ä»€ä¹ˆç—‡çŠ¶"</span>,  Â  Â Â <span class="hljs-string">"Response"</span>:Â <span class="hljs-string">"ä¸‰é˜´å—ç—…ï¼Œè‹¥å¥é˜´å—ä¹‹ï¼Œå¥é˜´è„‰å¾ªé˜´å™¨è€Œç»œäºè‚ï¼Œä¼šå‡ºç°çƒ¦æ»¡è€Œå›Šç¼©çš„ç—‡çŠ¶ã€‚ è‹¥ä¼¤å¯’å¾ªå¸¸æ— å˜ï¼ŒåäºŒæ—¥å¥é˜´ç—…è¡°ï¼Œä¼šå‡ºç°å›Šçºµã€å°‘è…¹å¾®ä¸‹çš„æƒ…å†µã€‚ "</span>  Â  },  ]</span>
</code></pre>
<h2 data-id="heading-6">7.  å¼€å§‹å¾®è°ƒ</h2>
<hr/>
<h4 data-id="heading-7">7.1 å¼•å…¥ä¾èµ–</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¯¼å…¥å¿…è¦çš„åº“  </span>
<span class="hljs-keyword">from</span>Â unslothÂ <span class="hljs-keyword">import</span>Â FastLanguageModel, is_bfloat16_supported  
<span class="hljs-keyword">from</span>Â transformersÂ <span class="hljs-keyword">import</span>Â TrainingArguments, EarlyStoppingCallback  
<span class="hljs-keyword">from</span>Â trlÂ <span class="hljs-keyword">import</span>Â SFTTrainer  
<span class="hljs-keyword">from</span>Â datasetsÂ <span class="hljs-keyword">import</span>Â load_dataset  
  
<span class="hljs-comment"># æ¨¡å‹é…ç½®å‚æ•°  </span>
max_seq_length =Â <span class="hljs-number">2048</span>Â Â <span class="hljs-comment"># æ¨¡å‹å¤„ç†æ–‡æœ¬çš„æœ€å¤§åºåˆ—é•¿åº¦ï¼Œæ”¯æŒé•¿æ–‡æœ¬è¾“å…¥</span>
</code></pre>
<h4 data-id="heading-8">7.2 åŠ è½½æ¨¡å‹</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># åŠ è½½é¢„è®­ç»ƒæ¨¡å‹å’Œåˆ†è¯å™¨  </span>
model, <span class="hljs-attr">tokenizer</span> = FastLanguageModel.from_pretrained(  
Â  Â  <span class="hljs-attr">model_name</span>=<span class="hljs-string">"ckpts/qwen2.5-1.5b-instruct-bnb-4bit"</span>,  
Â  Â  <span class="hljs-attr">max_seq_length</span>=max_seq_length,  
Â  Â  <span class="hljs-attr">dtype</span>=None, Â <span class="hljs-comment"># è‡ªåŠ¨æ£€æµ‹æœ€ä½³æ•°æ®ç±»å‹ï¼ˆbfloat16æˆ–float16ï¼‰  </span>
Â  Â  <span class="hljs-attr">load_in_4bit</span>=<span class="hljs-literal">True</span>, Â <span class="hljs-comment"># ä½¿ç”¨4bité‡åŒ–åŠ è½½æ¨¡å‹ï¼Œå¤§å¹…å‡å°‘æ˜¾å­˜å ç”¨  </span>
)
</code></pre>
<h4 data-id="heading-9">7.3 åŠ è½½æ•°æ®é›†</h4>
<p>å¤§å‹è¯­è¨€æ¨¡å‹éœ€è¦ä»¥ç‰¹å®šçš„â€œæç¤ºé£æ ¼â€æˆ–â€œèŠå¤©æ¨¡æ¿â€æ¥æ¥æ”¶è¾“å…¥ï¼Œä»¥ä¾¿å®ƒä»¬èƒ½å¤Ÿæ­£ç¡®ç†è§£ä»»åŠ¡ã€æŒ‡ä»¤ã€è¾“å…¥å’Œé¢„æœŸå“åº”ä¹‹é—´çš„å…³ç³»ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸€ä¸ªå¸¸ç”¨çš„æç¤ºé£æ ¼æ˜¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">â€œè¯·å…ˆé˜…è¯»ä¸‹æ–¹çš„ä»»åŠ¡æŒ‡ä»¤ï¼Œå†ç»“åˆæä¾›çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œç”Ÿæˆæ°å½“çš„å›å¤ã€‚<span class="hljs-comment">### æŒ‡ä»¤ï¼š{} ### ä¸Šä¸‹æ–‡ï¼š{} ### å›å¤ï¼š{}â€</span>
</code></pre>
<p>æœ‰æ•ˆçš„å¾®è°ƒéœ€è¦ä»”ç»†å…³æ³¨è¾“å…¥æ ¼å¼ï¼Œå› ä¸ºå®ƒç›´æ¥å½±å“æ¨¡å‹å­¦ä¹ çš„å†…å®¹å’Œå“åº”æ–¹å¼</p>
<p>ä¸‹é¢ä»£ç ä¸­åŠ è½½æˆ‘ä»¬çš„ã€Šä¼¤å¯’è®ºã€‹æ•°æ®é›†ï¼ˆÂ <code>data/datasets-2025-08.json</code>ï¼‰ï¼Œå¹¶ä½¿ç”¨Â <code>formatting_data</code>Â å‡½æ•°å°†å…¶è½¬æ¢ä¸º Unsloth æ‰€éœ€çš„æ ¼å¼ï¼Œæ­¤å‡½æ•°ä¼šç»“åˆè¾“å…¥å’Œè¾“å‡ºï¼ŒæŒ‰ç…§Â <code>prompt_style</code>Â è¿›è¡Œæ ¼å¼åŒ–ï¼Œå¹¶æ·»åŠ Â <code>EOS_TOKEN</code>ï¼ˆEnd-of-Sentence Tokenï¼‰ï¼Œ<code>EOS_TOKEN</code>Â å¯¹äºé¿å…æ¨¡å‹ç”Ÿæˆé‡å¤å†…å®¹è‡³å…³é‡è¦ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å®šä¹‰è®­ç»ƒæ•°æ®æ ¼å¼åŒ–æ¨¡æ¿  </span>
<span class="hljs-comment"># ä½¿ç”¨ä¸­åŒ»ä¸“å®¶è§’è‰²è®¾å®šï¼Œä¸“é—¨é’ˆå¯¹ã€Šä¼¤å¯’è®ºã€‹é—®ç­”ä»»åŠ¡  </span>
train_prompt_style =Â <span class="hljs-string">"""ä½ æ˜¯ä¸€ä½ç²¾é€šä¸­åŒ»ç†è®ºçš„ä¸“å®¶ï¼Œç‰¹åˆ«æ“…é•¿ã€Šä¼¤å¯’è®ºã€‹çš„ç†è®ºå’Œå®è·µåº”ç”¨ã€‚  
è¯·æ ¹æ®ã€Šä¼¤å¯’è®ºã€‹çš„ç»å…¸ç†è®ºï¼Œå‡†ç¡®å›ç­”ä»¥ä¸‹é—®é¢˜ã€‚  
  
### é—®é¢˜:  
{}  
  
### å›ç­”:  
{}  
"""</span>  
  
<span class="hljs-comment"># åŠ è½½è®­ç»ƒæ•°æ®é›†  </span>
<span class="hljs-comment"># ä»JSONæ–‡ä»¶åŠ è½½ä¼¤å¯’è®ºé—®ç­”æ•°æ®é›†ï¼ŒåŒ…å«é—®é¢˜å’Œå›ç­”å¯¹  </span>
dataset = load_dataset(<span class="hljs-string">"json"</span>, data_files=<span class="hljs-string">"data/datasets-2025-08.json"</span>, split=<span class="hljs-string">"train"</span>) Â   
  
  
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">formatting_data</span>(<span class="hljs-params">examples</span>):  
Â  Â Â <span class="hljs-string">"""æ ¼å¼åŒ–æ•°æ®é›†å‡½æ•°ï¼Œå°†é—®ç­”å¯¹è½¬æ¢ä¸ºè®­ç»ƒæ ¼å¼  
Â  Â Â   
Â  Â  å°†åŸå§‹çš„é—®é¢˜å’Œå›ç­”å¯¹æ ¼å¼åŒ–ä¸ºæ¨¡å‹è®­ç»ƒæ‰€éœ€çš„æ–‡æœ¬æ ¼å¼ï¼Œ  
Â  Â  æ·»åŠ è§’è‰²è®¾å®šå’Œç»“æ„åŒ–æ¨¡æ¿ã€‚  
  
Â  Â  Args:  
Â  Â  Â  Â  examples: åŒ…å«Questionã€Responseå­—æ®µçš„æ•°æ®æ ·æœ¬å­—å…¸  
  
Â  Â  Returns:  
Â  Â  Â  Â  dict: åŒ…å«æ ¼å¼åŒ–åæ–‡æœ¬çš„å­—å…¸ï¼Œé”®ä¸º"text"  
Â  Â  """</span>  
Â  Â  questions = examples[<span class="hljs-string">"Question"</span>]  
Â  Â  responses = examples[<span class="hljs-string">"Response"</span>]  
Â  Â  texts = []  
Â  Â Â <span class="hljs-keyword">for</span>Â q, rÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">zip</span>(questions, responses):  
Â  Â  Â  Â Â <span class="hljs-comment"># ä½¿ç”¨æ¨¡æ¿æ ¼å¼åŒ–æ¯ä¸ªé—®ç­”å¯¹ï¼Œå¹¶æ·»åŠ ç»“æŸæ ‡è®°  </span>
Â  Â  Â  Â  text = train_prompt_style.<span class="hljs-built_in">format</span>(q, r) + tokenizer.eos_token  
Â  Â  Â  Â  texts.append(text)  
Â  Â Â <span class="hljs-comment"># print(f"æ•°æ®é›†: {texts}")  </span>
Â  Â Â <span class="hljs-keyword">return</span>Â {<span class="hljs-string">"text"</span>: texts}  
  
  
<span class="hljs-comment"># åº”ç”¨æ•°æ®æ ¼å¼åŒ–å‡½æ•°  </span>
dataset = dataset.<span class="hljs-built_in">map</span>(formatting_data, batched=<span class="hljs-literal">True</span>, num_proc=<span class="hljs-number">1</span>)  
  
<span class="hljs-comment"># æ•°æ®é›†åˆ†å‰²ï¼š80%ç”¨äºè®­ç»ƒï¼Œ20%ç”¨äºéªŒè¯  </span>
<span class="hljs-comment"># ä½¿ç”¨å›ºå®šéšæœºç§å­ç¡®ä¿ç»“æœå¯å¤ç°  </span>
train_test_split = dataset.train_test_split(test_size=<span class="hljs-number">0.2</span>, seed=<span class="hljs-number">3407</span>)  
train_dataset = train_test_split[<span class="hljs-string">'train'</span>]  
eval_dataset = train_test_split[<span class="hljs-string">'test'</span>]  
  
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ•°æ®é›†åŠ è½½å®Œæˆ - è®­ç»ƒé›†:Â <span class="hljs-subst">{<span class="hljs-built_in">len</span>(train_dataset)}</span>Â æ¡, éªŒè¯é›†:Â <span class="hljs-subst">{<span class="hljs-built_in">len</span>(eval_dataset)}</span>Â æ¡"</span>)
</code></pre>
<h4 data-id="heading-10">7.4 å®šä¹‰ LoRA</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æ·»åŠ LoRAï¼ˆLow-Rank Adaptationï¼‰æƒé‡é…ç½®  </span>
<span class="hljs-comment"># LoRAæ˜¯ä¸€ç§é«˜æ•ˆçš„å¾®è°ƒæ–¹æ³•ï¼Œåªè®­ç»ƒå°‘é‡å‚æ•°å³å¯é€‚åº”æ–°ä»»åŠ¡  </span>
<span class="hljs-attr">model</span> = FastLanguageModel.get_peft_model(  
Â  Â  model,  
Â  Â  <span class="hljs-attr">r</span>=<span class="hljs-number">32</span>, Â <span class="hljs-comment"># LoRAçŸ©é˜µçš„ç§©ï¼Œå€¼è¶Šå¤§è¡¨è¾¾èƒ½åŠ›è¶Šå¼ºï¼Œä½†å‚æ•°é‡ä¹Ÿè¶Šå¤š  </span>
Â  Â  <span class="hljs-attr">target_modules</span>=[<span class="hljs-string">"q_proj"</span>,Â <span class="hljs-string">"k_proj"</span>,Â <span class="hljs-string">"v_proj"</span>,Â <span class="hljs-string">"o_proj"</span>,Â <span class="hljs-string">"gate_proj"</span>,Â <span class="hljs-string">"up_proj"</span>,Â <span class="hljs-string">"down_proj"</span>, ],  
Â  Â  <span class="hljs-attr">lora_alpha</span>=<span class="hljs-number">64</span>, Â <span class="hljs-comment"># LoRAç¼©æ”¾å‚æ•°  </span>
Â  Â  <span class="hljs-attr">lora_dropout</span>=<span class="hljs-number">0.1</span>, Â <span class="hljs-comment"># LoRA dropoutç‡ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆï¼Œå€¼è¶Šå°æ­£åˆ™åŒ–è¶Šå¼±  </span>
Â  Â  <span class="hljs-attr">bias</span>=<span class="hljs-string">"none"</span>, Â <span class="hljs-comment"># åç½®é¡¹å¤„ç†æ–¹å¼ï¼Œ"none"è¡¨ç¤ºä¸è®­ç»ƒåç½®ï¼ŒèŠ‚çœå‚æ•°  </span>
Â  Â  <span class="hljs-attr">use_gradient_checkpointing</span>=<span class="hljs-string">"unsloth"</span>, Â <span class="hljs-comment"># ä½¿ç”¨Unslothä¼˜åŒ–çš„æ¢¯åº¦æ£€æŸ¥ç‚¹ï¼Œæ”¯æŒè¶…é•¿åºåˆ—  </span>
Â  Â  <span class="hljs-attr">random_state</span>=<span class="hljs-number">3407</span>, Â <span class="hljs-comment"># éšæœºç§å­ï¼Œç¡®ä¿ç»“æœå¯å¤ç°  </span>
Â  Â  <span class="hljs-attr">use_rslora</span>=<span class="hljs-literal">False</span>, Â <span class="hljs-comment"># æ˜¯å¦ä½¿ç”¨Rank Stabilized LoRAï¼Œå½“å‰ä½¿ç”¨æ ‡å‡†LoRA  </span>
Â  Â  <span class="hljs-attr">loftq_config</span>=None, Â <span class="hljs-comment"># LoftQé…ç½®ï¼Œç”¨äºæ›´ç²¾ç¡®çš„é‡åŒ–  </span>
)
</code></pre>
<h4 data-id="heading-11">7.5 ä½¿ç”¨Â <code>SFTTrainer</code>Â è¿›è¡Œè®­ç»ƒ</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># åˆ›å»ºSFTï¼ˆSupervised Fine-Tuningï¼‰è®­ç»ƒå™¨  </span>
<span class="hljs-comment"># ä½¿ç”¨ç›‘ç£å­¦ä¹ æ–¹å¼å¾®è°ƒæ¨¡å‹ï¼Œé€‚ç”¨äºé—®ç­”ä»»åŠ¡  </span>
<span class="hljs-attr">trainer</span> = SFTTrainer(  
Â  Â  <span class="hljs-attr">model</span>=model,  
Â  Â  <span class="hljs-attr">tokenizer</span>=tokenizer,  
Â  Â  <span class="hljs-attr">train_dataset</span>=train_dataset, Â <span class="hljs-comment"># è®­ç»ƒæ•°æ®é›†  </span>
Â  Â  <span class="hljs-attr">eval_dataset</span>=eval_dataset, Â <span class="hljs-comment"># éªŒè¯æ•°æ®é›†ï¼Œç”¨äºè¯„ä¼°æ¨¡å‹æ€§èƒ½  </span>
Â  Â  <span class="hljs-attr">dataset_text_field</span>=<span class="hljs-string">"text"</span>, Â <span class="hljs-comment"># æ•°æ®é›†ä¸­æ–‡æœ¬å­—æ®µçš„åç§°  </span>
Â  Â  <span class="hljs-attr">max_seq_length</span>=max_seq_length, Â <span class="hljs-comment"># æœ€å¤§åºåˆ—é•¿åº¦  </span>
Â  Â  <span class="hljs-attr">dataset_num_proc</span>=<span class="hljs-number">1</span>, Â <span class="hljs-comment"># æ•°æ®å¤„ç†è¿›ç¨‹æ•°ï¼Œè®¾ä¸º1é¿å…ç¼“å­˜å†²çª  </span>
Â  Â  <span class="hljs-attr">packing</span>=<span class="hljs-literal">False</span>, Â <span class="hljs-comment"># æ˜¯å¦ä½¿ç”¨åºåˆ—æ‰“åŒ…ï¼ŒçŸ­åºåˆ—æ—¶å¯è®¾ä¸ºTrueæå‡5å€è®­ç»ƒé€Ÿåº¦  </span>
Â  Â  <span class="hljs-attr">callbacks</span>=[  
Â  Â  Â  Â  EarlyStoppingCallback(early_stopping_patience=<span class="hljs-number">3</span>, early_stopping_threshold=<span class="hljs-number">0.0005</span>), Â <span class="hljs-comment"># æ—©åœæœºåˆ¶ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆ  </span>
Â  Â  ],  
Â  Â  <span class="hljs-attr">args</span>=TrainingArguments(  
Â  Â  Â  Â Â <span class="hljs-comment"># æ‰¹æ¬¡å¤§å°é…ç½®  </span>
Â  Â  Â  Â  <span class="hljs-attr">per_device_train_batch_size</span>=<span class="hljs-number">2</span>, Â <span class="hljs-comment"># æ¯ä¸ªGPUçš„è®­ç»ƒæ‰¹æ¬¡å¤§å°  </span>
Â  Â  Â  Â  <span class="hljs-attr">per_device_eval_batch_size</span>=<span class="hljs-number">2</span>, Â <span class="hljs-comment"># æ¯ä¸ªGPUçš„éªŒè¯æ‰¹æ¬¡å¤§å°  </span>
Â  Â  Â  Â Â   
Â  Â  Â  Â Â <span class="hljs-comment"># æ¢¯åº¦ç´¯ç§¯é…ç½®  </span>
Â  Â  Â  Â  <span class="hljs-attr">gradient_accumulation_steps</span>=<span class="hljs-number">8</span>, Â <span class="hljs-comment"># æ¢¯åº¦ç´¯ç§¯æ­¥æ•°ï¼Œæœ‰æ•ˆæ‰¹æ¬¡å¤§å° = batch_size * gradient_accumulation_steps  </span>
Â  Â  Â  Â Â   
Â  Â  Â  Â Â <span class="hljs-comment"># å­¦ä¹ ç‡é…ç½®  </span>
Â  Â  Â  Â  <span class="hljs-attr">warmup_ratio</span>=<span class="hljs-number">0.15</span>, Â <span class="hljs-comment"># å­¦ä¹ ç‡é¢„çƒ­æ¯”ä¾‹ï¼Œå‰15%çš„æ­¥æ•°ç”¨äºé¢„çƒ­  </span>
Â  Â  Â  Â  <span class="hljs-attr">learning_rate</span>=<span class="hljs-number">2</span>e-<span class="hljs-number">5</span>, Â <span class="hljs-comment"># å­¦ä¹ ç‡ï¼Œæ§åˆ¶å‚æ•°æ›´æ–°æ­¥é•¿  </span>
Â  Â  Â  Â Â   
Â  Â  Â  Â Â <span class="hljs-comment"># è®­ç»ƒè½®æ•°å’Œæ­¥æ•°é…ç½®  </span>
Â  Â  Â  Â Â <span class="hljs-comment"># max_steps = 200, # æœ€å¤§è®­ç»ƒæ­¥æ•°ï¼ˆå¯é€‰ï¼‰  </span>
Â  Â  Â  Â  <span class="hljs-attr">num_train_epochs</span>=<span class="hljs-number">5</span>, Â <span class="hljs-comment"># è®­ç»ƒè½®æ•°ï¼Œç»™æ¨¡å‹å……åˆ†å­¦ä¹ æœºä¼š  </span>
Â  Â  Â  Â Â   
Â  Â  Â  Â Â <span class="hljs-comment"># ç²¾åº¦é…ç½®  </span>
Â  Â  Â  Â  <span class="hljs-attr">fp16</span>=notÂ is_bfloat16_supported(), Â <span class="hljs-comment"># æ˜¯å¦ä½¿ç”¨16ä½æµ®ç‚¹ç²¾åº¦è®­ç»ƒ  </span>
Â  Â  Â  Â  <span class="hljs-attr">bf16</span>=is_bfloat16_supported(), Â <span class="hljs-comment"># æ˜¯å¦ä½¿ç”¨bfloat16ç²¾åº¦è®­ç»ƒï¼ˆæ›´ç¨³å®šï¼‰  </span>
Â  Â  Â  Â Â   
Â  Â  Â  Â Â <span class="hljs-comment"># æ—¥å¿—å’Œç›‘æ§é…ç½®  </span>
Â  Â  Â  Â  <span class="hljs-attr">logging_steps</span>=<span class="hljs-number">2</span>, Â <span class="hljs-comment"># æ¯2æ­¥è®°å½•ä¸€æ¬¡æ—¥å¿—  </span>
Â  Â  Â  Â  <span class="hljs-attr">eval_steps</span>=<span class="hljs-number">10</span>, Â <span class="hljs-comment"># æ¯10æ­¥è¿›è¡Œä¸€æ¬¡éªŒè¯è¯„ä¼°  </span>
Â  Â  Â  Â  <span class="hljs-attr">eval_strategy</span>=<span class="hljs-string">"steps"</span>, Â <span class="hljs-comment"># æŒ‰æ­¥æ•°è¿›è¡ŒéªŒè¯  </span>
Â  Â  Â  Â Â   
Â  Â  Â  Â Â <span class="hljs-comment"># æ¨¡å‹ä¿å­˜é…ç½®  </span>
Â  Â  Â  Â  <span class="hljs-attr">save_steps</span>=<span class="hljs-number">20</span>, Â <span class="hljs-comment"># æ¯20æ­¥ä¿å­˜ä¸€æ¬¡æ¨¡å‹æ£€æŸ¥ç‚¹  </span>
Â  Â  Â  Â  <span class="hljs-attr">save_strategy</span>=<span class="hljs-string">"steps"</span>, Â <span class="hljs-comment"># æŒ‰æ­¥æ•°ä¿å­˜æ¨¡å‹  </span>
Â  Â  Â  Â  <span class="hljs-attr">save_total_limit</span>=<span class="hljs-number">5</span>, Â <span class="hljs-comment"># æœ€å¤šä¿å­˜5ä¸ªæ£€æŸ¥ç‚¹ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´  </span>
Â  Â  Â  Â Â   
Â  Â  Â  Â Â <span class="hljs-comment"># æœ€ä½³æ¨¡å‹é…ç½®  </span>
Â  Â  Â  Â  <span class="hljs-attr">load_best_model_at_end</span>=<span class="hljs-literal">True</span>, Â <span class="hljs-comment"># è®­ç»ƒç»“æŸæ—¶è‡ªåŠ¨åŠ è½½æœ€ä½³æ¨¡å‹  </span>
Â  Â  Â  Â  <span class="hljs-attr">metric_for_best_model</span>=<span class="hljs-string">"eval_loss"</span>, Â <span class="hljs-comment"># ä½¿ç”¨éªŒè¯æŸå¤±ä½œä¸ºæœ€ä½³æ¨¡å‹æŒ‡æ ‡  </span>
Â  Â  Â  Â  <span class="hljs-attr">greater_is_better</span>=<span class="hljs-literal">False</span>, Â <span class="hljs-comment"># æŸå¤±è¶Šå°è¶Šå¥½  </span>
Â  Â  Â  Â Â   
Â  Â  Â  Â Â <span class="hljs-comment"># æ­£åˆ™åŒ–é…ç½®  </span>
Â  Â  Â  Â  <span class="hljs-attr">weight_decay</span>=<span class="hljs-number">0.001</span>, Â <span class="hljs-comment"># æƒé‡è¡°å‡ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆ  </span>
Â  Â  Â  Â  <span class="hljs-attr">max_grad_norm</span>=<span class="hljs-number">1.0</span>, Â <span class="hljs-comment"># æ¢¯åº¦è£å‰ªé˜ˆå€¼ï¼Œé˜²æ­¢æ¢¯åº¦çˆ†ç‚¸  </span>
Â  Â  Â  Â Â   
Â  Â  Â  Â Â <span class="hljs-comment"># å­¦ä¹ ç‡è°ƒåº¦é…ç½®  </span>
Â  Â  Â  Â  <span class="hljs-attr">lr_scheduler_type</span>=<span class="hljs-string">"cosine"</span>, Â <span class="hljs-comment"># ä½¿ç”¨ä½™å¼¦é€€ç«å­¦ä¹ ç‡è°ƒåº¦å™¨  </span>
Â  Â  Â  Â Â   
Â  Â  Â  Â Â <span class="hljs-comment"># ä¼˜åŒ–å™¨é…ç½®  </span>
Â  Â  Â  Â  <span class="hljs-attr">optim</span>=<span class="hljs-string">"adamw_8bit"</span>, Â <span class="hljs-comment"># ä½¿ç”¨8ä½AdamWä¼˜åŒ–å™¨ï¼ŒèŠ‚çœæ˜¾å­˜  </span>
Â  Â  Â  Â Â   
Â  Â  Â  Â Â <span class="hljs-comment"># æ•°æ®åŠ è½½é…ç½®  </span>
Â  Â  Â  Â  <span class="hljs-attr">dataloader_num_workers</span>=<span class="hljs-number">0</span>, Â <span class="hljs-comment"># æ•°æ®åŠ è½½å™¨å·¥ä½œè¿›ç¨‹æ•°ï¼Œè®¾ä¸º0é¿å…å¤šè¿›ç¨‹å†²çª  </span>
Â  Â  Â  Â Â   
Â  Â  Â  Â Â <span class="hljs-comment"># è¾“å‡ºé…ç½®  </span>
Â  Â  Â  Â  <span class="hljs-attr">output_dir</span>=<span class="hljs-string">"outputs"</span>, Â <span class="hljs-comment"># æ¨¡å‹è¾“å‡ºå’Œæ£€æŸ¥ç‚¹ä¿å­˜ç›®å½•  </span>
Â  Â  Â  Â Â   
Â  Â  Â  Â Â <span class="hljs-comment"># éšæœºç§å­  </span>
Â  Â  Â  Â  <span class="hljs-attr">seed</span>=<span class="hljs-number">3407</span>, Â <span class="hljs-comment"># éšæœºç§å­ï¼Œç¡®ä¿ç»“æœå¯å¤ç°  </span>
  
Â  Â  ),  
)  
  
<span class="hljs-comment"># å¼€å§‹è®­ç»ƒ  </span>
<span class="hljs-attr">train_stats</span> = trainer.train()  
print(f"è®­ç»ƒå®Œæˆï¼Œè®­ç»ƒæŸå¤±: \nÂ {train_stats}")
</code></pre>
<h4 data-id="heading-12">7.6 æ¨¡å‹ä¿å­˜</h4>
<p>Unsloth æä¾›äº†å¤šç§ä¿å­˜å¾®è°ƒåæ¨¡å‹çš„æ–¹æ³•ï¼Œæ¯ç§æ–¹æ³•éƒ½æœ‰å…¶ç‰¹å®šçš„ç”¨é€”ï¼š</p>
<p><strong><code>save_pretrained</code></strong></p>
<p>æ­¤æ–¹æ³•ä»…ä¿å­˜ LoRA é€‚é…å™¨æƒé‡ã€‚è¿™äº›æ–‡ä»¶é€šå¸¸å¾ˆå°ï¼ŒåªåŒ…å«æ¨¡å‹ä¿®æ”¹éƒ¨åˆ†ï¼ŒåŒ…æ‹¬Â <code>adapter_config.json</code>Â å’ŒÂ <code>adapter_model.safetensors</code>Â ã€‚è¿™ç§æ–¹æ³•é€‚ç”¨äºéœ€è¦çµæ´»åˆ‡æ¢ä¸åŒ LoRA é€‚é…å™¨æˆ–èŠ‚çœå­˜å‚¨ç©ºé—´çš„æƒ…å†µã€‚</p>
<p><strong><code>save_pretrained_gguf</code></strong></p>
<p>è¿™æ˜¯ä¸€ç§æ–°çš„ä¼˜åŒ–æ ¼å¼ï¼ˆGGUFï¼‰ï¼Œæ”¯æŒæ›´å¥½çš„å…ƒæ•°æ®å¤„ç†ã€‚æ–‡ä»¶åŒæ ·è¾ƒå°ä¸”ç»è¿‡é‡åŒ–ï¼ŒåŒ…æ‹¬Â <code>model.gguf</code>Â å’ŒÂ <code>tokenizer.json</code>Â ã€‚Unsloth çš„åŠ¨æ€é‡åŒ–åœ¨ GGUF å¯¼å‡ºä¸­é€šè¿‡æ™ºèƒ½çš„å±‚ç‰¹å®šé‡åŒ–ç­–ç•¥ï¼Œè¿›ä¸€æ­¥å¢å¼ºäº†æ¨¡å‹æ€§èƒ½å’Œæ•ˆç‡ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">
<span class="hljs-comment"># ä¿å­˜å¾®è°ƒåçš„æ¨¡å‹æƒé‡</span>
<span class="hljs-comment"># åªä¿å­˜LoRAæƒé‡ï¼ŒåŸå§‹æ¨¡å‹æƒé‡ä¿æŒä¸å˜</span>
model.save_pretrained(<span class="hljs-string">"ckpts/qwen2.5-1.5b-instruct-bnb-4bit-lora"</span>)
<span class="hljs-comment"># ä¿å­˜åˆ†è¯å™¨ï¼ˆtokenizerï¼‰ï¼Œä»¥ä¾¿åç»­åŠ è½½å’Œæ¨ç†æ—¶ä½¿ç”¨</span>
tokenizer.save_pretrained(<span class="hljs-string">"ckpts/qwen2.5-1.5b-instruct-bnb-4bit-lora"</span>)
<span class="hljs-comment">#==================================================================================</span>

<span class="hljs-comment"># model.save_pretrained_gguf("ckpts/qwen2.5-1.5b-instruct-bnb-4bit-gguf", tokenizer, quantization_method="q4_k_m")</span>
</code></pre>
<h4 data-id="heading-13">7.7 è®­ç»ƒè¿‡ç¨‹</h4>
<p><strong>å¼€å§‹æ—¶æ˜¾ç¤ºåŸºç¡€ä¿¡æ¯ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml">
<span class="hljs-string">==((====))==</span> Â <span class="hljs-attr">Unsloth 2025.7.8: Fast Qwen3 patching. Transformers:</span> <span class="hljs-number">4.53</span><span class="hljs-number">.3</span><span class="hljs-string">.</span>
Â  Â <span class="hljs-string">\</span> Â  <span class="hljs-string">/|</span> Â  Â <span class="hljs-string">NVIDIA</span> <span class="hljs-string">GeForce</span> <span class="hljs-string">RTX</span> <span class="hljs-number">2050. </span><span class="hljs-string">Num</span> <span class="hljs-string">GPUs</span> <span class="hljs-string">=</span> <span class="hljs-attr">1. Max memory: 4.0 GB. Platform:</span> <span class="hljs-string">Windows.</span>
<span class="hljs-string">O^O/</span> <span class="hljs-string">_/</span> <span class="hljs-string">\</span> Â  Â <span class="hljs-attr">Torch:</span> <span class="hljs-number">2.7</span><span class="hljs-number">.1</span><span class="hljs-string">+cu126.</span> <span class="hljs-attr">CUDA: 8.6. CUDA Toolkit: 12.6. Triton:</span> <span class="hljs-number">3.3</span><span class="hljs-number">.1</span>
<span class="hljs-string">\</span> Â  Â  Â  Â <span class="hljs-string">/</span> Â  Â <span class="hljs-string">Bfloat16</span> <span class="hljs-string">=</span> <span class="hljs-string">TRUE.</span> <span class="hljs-string">FA</span> [<span class="hljs-string">Xformers</span> <span class="hljs-string">=</span> <span class="hljs-number">0.0</span><span class="hljs-number">.31</span><span class="hljs-string">.post1.</span> <span class="hljs-string">FA2</span> <span class="hljs-string">=</span> <span class="hljs-literal">False</span>]
Â <span class="hljs-string">"-____-"</span>Â  Â  Â <span class="hljs-attr">Free license:</span> <span class="hljs-string">http://github.com/unslothai/unsloth</span>
<span class="hljs-comment"># æ‰¹æ³¨ï¼šç³»ç»Ÿé…ç½®ä¿¡æ¯</span>
<span class="hljs-comment"># - ä½¿ç”¨RTX 2050æ˜¾å¡ï¼Œ4GBæ˜¾å­˜</span>
<span class="hljs-comment"># - æ”¯æŒbfloat16ç²¾åº¦è®­ç»ƒ</span>
<span class="hljs-comment"># - ä½¿ç”¨Xformersä¼˜åŒ–æ³¨æ„åŠ›æœºåˆ¶</span>

</code></pre>
<p><strong>å†ç»™å‡ºå¾®è°ƒçš„é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">==((====))== Â Unsloth - 2x faster free finetuning | Num GPUs <span class="hljs-attr">used</span> = <span class="hljs-number">1</span>  
Â  Â \\ Â  /| Â  Â Num <span class="hljs-attr">examples</span> = <span class="hljs-number">353</span> | Num Epochs = <span class="hljs-number">5</span> | Total steps = <span class="hljs-number">115</span>  
O^O/ \_/ \ Â  Â Batch size per <span class="hljs-attr">device</span> = <span class="hljs-number">2</span> | Gradient accumulation steps = <span class="hljs-number">8</span>  
\ Â  Â  Â  Â / Â  Â Data Parallel <span class="hljs-attr">GPUs</span> = <span class="hljs-number">1</span> | Total batch size (<span class="hljs-number">2</span> x <span class="hljs-number">8</span> x <span class="hljs-number">1</span>) = <span class="hljs-number">16</span>  
Â "-____-"Â  Â  Â Trainable <span class="hljs-attr">parameters</span> = <span class="hljs-number">20</span>,<span class="hljs-number">185</span>,<span class="hljs-number">088</span> of <span class="hljs-number">616</span>,<span class="hljs-number">235</span>,<span class="hljs-number">008</span> (<span class="hljs-number">3.28</span>% trained)  
<span class="hljs-comment"># æ‰¹æ³¨ï¼šè®­ç»ƒé…ç½®è¯¦æƒ…  </span>
<span class="hljs-comment"># - æ€»æ ·æœ¬æ•°ï¼š353ä¸ª  </span>
<span class="hljs-comment"># - è®­ç»ƒè½®æ•°ï¼š5è½®  </span>
<span class="hljs-comment"># - æ€»æ­¥æ•°ï¼š115æ­¥  </span>
<span class="hljs-comment"># - æœ‰æ•ˆæ‰¹æ¬¡å¤§å°ï¼š16ï¼ˆ2Ã—8Ã—1ï¼‰  </span>
<span class="hljs-comment"># - å¯è®­ç»ƒå‚æ•°ï¼š3.28%ï¼ˆ20M/616Mï¼‰</span>
</code></pre>
<p><strong>åé¢æ˜¯å¾®è°ƒç»†èŠ‚ï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">{<span class="hljs-string">'loss'</span>: <span class="hljs-number">2.1017</span>,Â <span class="hljs-string">'grad_norm'</span>: <span class="hljs-number">3.180413007736206</span>,Â <span class="hljs-string">'learning_rate'</span>: <span class="hljs-number">1.995283421166614e-05</span>,Â <span class="hljs-string">'epoch'</span>: <span class="hljs-number">1.05</span>}  
{<span class="hljs-string">'loss'</span>: <span class="hljs-number">2.2702</span>,Â <span class="hljs-string">'grad_norm'</span>: <span class="hljs-number">2.8307971954345703</span>,Â <span class="hljs-string">'learning_rate'</span>: <span class="hljs-number">1.9869167087338908e-05</span>,Â <span class="hljs-string">'epoch'</span>: <span class="hljs-number">1.14</span>}  
{<span class="hljs-string">'loss'</span>: <span class="hljs-number">2.0511</span>,Â <span class="hljs-string">'grad_norm'</span>: <span class="hljs-number">3.1757583618164062</span>,Â <span class="hljs-string">'learning_rate'</span>: <span class="hljs-number">1.9744105246469264e-05</span>,Â <span class="hljs-string">'epoch'</span>: <span class="hljs-number">1.23</span>}  
{<span class="hljs-string">'loss'</span>: <span class="hljs-number">2.1853</span>,Â <span class="hljs-string">'grad_norm'</span>: <span class="hljs-number">2.5234906673431396</span>,Â <span class="hljs-string">'learning_rate'</span>: <span class="hljs-number">1.957817324187987e-05</span>,Â <span class="hljs-string">'epoch'</span>: <span class="hljs-number">1.32</span>}  
{<span class="hljs-string">'loss'</span>: <span class="hljs-number">1.8145</span>,Â <span class="hljs-string">'grad_norm'</span>: <span class="hljs-number">2.9424679279327393</span>,Â <span class="hljs-string">'learning_rate'</span>: <span class="hljs-number">1.937206705006344e-05</span>,Â <span class="hljs-string">'epoch'</span>: <span class="hljs-number">1.32</span>}
</code></pre>
<h2 data-id="heading-14">8.  æµ‹è¯•å¾®è°ƒçš„æ¨¡å‹</h2>
<p>æ¨¡å‹æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">fromÂ unslothÂ importÂ FastLanguageModel  
fromÂ unsloth.chat_templatesÂ importÂ get_chat_template  
fromÂ transformersÂ importÂ TextStreamer  
importÂ torch  
  
<span class="hljs-attr">max_seq_length</span> =Â <span class="hljs-number">512</span>  
  
  
model, <span class="hljs-attr">tokenizer</span> = FastLanguageModel.from_pretrained(  
Â  Â  <span class="hljs-attr">model_name</span>=<span class="hljs-string">"ckpts/qwen2.5-1.5b-instruct-bnb-4bit-lora"</span>,  
Â  Â  <span class="hljs-attr">max_seq_length</span>=max_seq_length,  
Â  Â  <span class="hljs-attr">dtype</span>=None,  
Â  Â  <span class="hljs-attr">load_in_4bit</span>=<span class="hljs-literal">True</span>,  
)  
  
<span class="hljs-comment"># å¯ç”¨unslothçš„2xæ›´å¿«æ¨ç†ä¼˜åŒ–  </span>
print("å¯ç”¨æ¨ç†ä¼˜åŒ–...")  
FastLanguageModel.for_inference(model)  
print("æ¨¡å‹åŠ è½½å®Œæˆ")  
  
  
<span class="hljs-comment"># å®šä¹‰è®­ç»ƒæ•°æ®æ ¼å¼åŒ–å­—ç¬¦ä¸²æ¨¡æ¿  </span>
<span class="hljs-attr">train_prompt_style</span> =Â <span class="hljs-string">"""ä½ æ˜¯ä¸€ä½ç²¾é€šä¸­åŒ»ç†è®ºçš„ä¸“å®¶ï¼Œç‰¹åˆ«æ“…é•¿ã€Šä¼¤å¯’è®ºã€‹çš„ç†è®ºå’Œå®è·µåº”ç”¨ã€‚  
è¯·æ ¹æ®ã€Šä¼¤å¯’è®ºã€‹çš„ç»å…¸ç†è®ºï¼Œå‡†ç¡®å›ç­”ä»¥ä¸‹é—®é¢˜ã€‚  
  
### é—®é¢˜:  
{}  
"""</span>  
<span class="hljs-attr">question</span> =Â <span class="hljs-string">'ä»€ä¹ˆæ˜¯å¤ªé˜³ç—…ï¼Ÿ'</span>  
  
<span class="hljs-attr">formatted_prompt</span> = train_prompt_style.format(question)  
print(f"æ ¼å¼åŒ–åçš„æç¤ºæ–‡æœ¬:\n-------------------\n{formatted_prompt}\n-------------------")  
print(type(tokenizer)) Â Â <span class="hljs-comment"># &lt;class 'transformers.models.qwen2.tokenization_qwen2_fast.Qwen2TokenizerFast'&gt;  </span>
<span class="hljs-attr">inputs</span> = tokenizer([formatted_prompt], return_tensors=<span class="hljs-string">'pt'</span>, max_length=max_seq_length).to(<span class="hljs-string">"cuda"</span>)  
  
print(f"inputs: \n-------------------\n{inputs}\n-------------------")  
  
  
  
<span class="hljs-comment"># ç”Ÿæˆå›ç­”ï¼ˆæµå¼è¾“å‡ºï¼‰  </span>
withÂ torch.no_grad():  
Â  Â  <span class="hljs-attr">outputs</span> = model.generate(  
Â  Â  Â  Â Â <span class="hljs-comment"># è¾“å…¥åºåˆ—çš„token ID  </span>
Â  Â  Â  Â  inputs<span class="hljs-section">['input_ids']</span>,Â   
Â  Â  Â  Â Â <span class="hljs-comment"># æ³¨æ„åŠ›æ©ç ï¼ŒæŒ‡ç¤ºå“ªäº›ä½ç½®æ˜¯æœ‰æ•ˆè¾“å…¥  </span>
Â  Â  Â  Â  <span class="hljs-attr">attention_mask</span>=inputs[<span class="hljs-string">'attention_mask'</span>],Â   
Â  Â  Â  Â Â <span class="hljs-comment"># ç”Ÿæˆæ–‡æœ¬çš„æœ€å¤§é•¿åº¦é™åˆ¶  </span>
Â  Â  Â  Â  <span class="hljs-attr">max_length</span>=max_seq_length,  
Â  Â  Â  Â Â <span class="hljs-comment"># å¯ç”¨KVç¼“å­˜ï¼ŒåŠ é€Ÿç”Ÿæˆè¿‡ç¨‹  </span>
Â  Â  Â  Â  <span class="hljs-attr">use_cache</span>=<span class="hljs-literal">True</span>,  
Â  Â  Â  Â Â <span class="hljs-comment"># æ¸©åº¦å‚æ•°ï¼Œæ§åˆ¶ç”Ÿæˆçš„éšæœºæ€§  </span>
Â  Â  Â  Â Â <span class="hljs-comment"># å€¼è¶Šä½ç”Ÿæˆè¶Šç¡®å®šï¼Œå€¼è¶Šé«˜ç”Ÿæˆè¶Šéšæœº  </span>
Â  Â  Â  Â  <span class="hljs-attr">temperature</span>=<span class="hljs-number">0.8</span>,Â   
Â  Â  Â  Â Â <span class="hljs-comment"># æ ¸é‡‡æ ·å‚æ•°ï¼Œåªä»ç´¯ç§¯æ¦‚ç‡è¾¾åˆ°90%çš„è¯ä¸­é€‰æ‹©  </span>
Â  Â  Â  Â Â <span class="hljs-comment"># é¿å…é€‰æ‹©æ¦‚ç‡æä½çš„è¯ï¼Œæé«˜ç”Ÿæˆè´¨é‡  </span>
Â  Â  Â  Â  <span class="hljs-attr">top_p</span>=<span class="hljs-number">0.9</span>,  
Â  Â  Â  Â Â <span class="hljs-comment"># å¯ç”¨é‡‡æ ·æ¨¡å¼ï¼Œè€Œä¸æ˜¯è´ªå©ªè§£ç   </span>
Â  Â  Â  Â Â <span class="hljs-comment"># è´ªå©ªè§£ç æ€»æ˜¯é€‰æ‹©æ¦‚ç‡æœ€é«˜çš„è¯ï¼Œå®¹æ˜“äº§ç”Ÿé‡å¤  </span>
Â  Â  Â  Â  <span class="hljs-attr">do_sample</span>=<span class="hljs-literal">True</span>,  
Â  Â  Â  Â Â <span class="hljs-comment"># è®¾ç½®å¡«å……æ ‡è®°IDï¼Œç”¨äºå¤„ç†å˜é•¿åºåˆ—  </span>
Â  Â  Â  Â  <span class="hljs-attr">pad_token_id</span>=tokenizer.eos_token_id,  
Â  Â  Â  Â Â <span class="hljs-comment"># è®¾ç½®ç»“æŸæ ‡è®°IDï¼Œå‘Šè¯‰æ¨¡å‹ä½•æ—¶åœæ­¢ç”Ÿæˆ  </span>
Â  Â  Â  Â  <span class="hljs-attr">eos_token_id</span>=tokenizer.eos_token_id,  
Â  Â  Â  Â Â <span class="hljs-comment"># é‡å¤æƒ©ç½šå‚æ•°ï¼Œé˜²æ­¢æ¨¡å‹é‡å¤ç”Ÿæˆç›¸åŒå†…å®¹  </span>
Â  Â  Â  Â Â <span class="hljs-comment"># 1.1è¡¨ç¤ºé‡å¤è¯çš„ç”Ÿæˆæ¦‚ç‡é™ä½10%  </span>
Â  Â  Â  Â  <span class="hljs-attr">repetition_penalty</span>=<span class="hljs-number">1.1</span>  
Â  Â  )  
  
print(type(outputs))  
print(outputs)  
<span class="hljs-attr">answer</span> = tokenizer.decode(outputs[<span class="hljs-number">0</span>], skip_special_tokens=<span class="hljs-literal">True</span>)  
print("\n<span class="hljs-attr">"Â +Â "</span>=<span class="hljs-string">"Â *Â 80)  
print(answer)  
print("</span>\n<span class="hljs-string">"Â +Â "</span>=<span class="hljs-string">"Â *Â 80)  
print("</span>æµ‹è¯•å®Œæˆï¼<span class="hljs-string">")
</span></code></pre>
<h3 data-id="heading-15">å­¦ä¹ èµ„æºæ¨è</h3>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Next.jsç¬¬ä¸‰ç« (App Router)]]></title>    <link>https://juejin.cn/post/7571272874846273588</link>    <guid>https://juejin.cn/post/7571272874846273588</guid>    <pubDate>2025-11-11T08:49:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571272874846273588" data-draft-id="7571077686108094527" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Next.jsç¬¬ä¸‰ç« (App Router)"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-11T08:49:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ»¡zs"/> <meta itemprop="url" content="https://juejin.cn/user/2463384809252397"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Next.jsç¬¬ä¸‰ç« (App Router)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2463384809252397/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ»¡zs
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-11T08:49:31.000Z" title="Tue Nov 11 2025 08:49:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Next.js è·¯ç”±æ¦‚è§ˆ</h2>
<p>Next.js ä½¿ç”¨åŸºäºæ–‡ä»¶ç³»ç»Ÿçš„è·¯ç”±ï¼Œè¿™æ„å‘³ç€æ–‡ä»¶å’Œæ–‡ä»¶å¤¹çš„ç»“æ„ç›´æ¥å†³å®šäº†åº”ç”¨çš„è·¯ç”±ç»“æ„ã€‚</p>
<h3 data-id="heading-1">åŸºäºæ–‡ä»¶ç³»ç»Ÿçš„è·¯ç”±</h3>
<p>æˆ‘ä»¬åªéœ€è¦åˆ›å»ºå¯¹åº”çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼ŒNext.js ä¼šè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„è·¯ç”±ã€‚</p>
<p>åœ¨ Next.js ä¸­ï¼Œæ¯ä¸ªæ–‡ä»¶å¤¹ä»£è¡¨ä¸€ä¸ªè·¯ç”±æ®µï¼Œæ˜ å°„åˆ° URL æ®µï¼š</p>
<h4 data-id="heading-2">page</h4>
<pre><code class="hljs language-bash" lang="bash">app/
â”œâ”€â”€ page.tsx               <span class="hljs-comment"># /</span>
â”œâ”€â”€ about/
â”‚   â””â”€â”€ page.tsx           <span class="hljs-comment"># /about</span>
â”œâ”€â”€ blog/test
â”‚        â””â”€â”€ page.tsx      <span class="hljs-comment"># /blog/test</span>
â””â”€â”€ contact/
    â””â”€â”€ page.tsx           <span class="hljs-comment"># /contact</span>
</code></pre>
<h4 data-id="heading-3">layout &amp;&amp; template</h4>
<p><code>layout</code>(å¸ƒå±€) å¸ƒå±€æ˜¯å¤šä¸ªé¡µé¢å…±äº«UIï¼Œä¾‹å¦‚å¯¼èˆªæ ã€ä¾§è¾¹æ ã€åº•éƒ¨ç­‰ã€‚</p>
<p><code>template</code>(æ¨¡æ¿) åŸºæœ¬åŠŸèƒ½è·Ÿå¸ƒå±€ä¸€æ ·ï¼Œåªæ˜¯ä¸ä¼šä¿å­˜çŠ¶æ€</p>
<p>å¸ƒå±€å’Œæ¨¡æ¿çš„ç‰¹ç‚¹å°±æ˜¯ï¼š</p>
<ul>
<li>å¤šä¸ªå¸ƒå±€å¯ä»¥åµŒå¥—</li>
<li><code>å¸ƒå±€ä¼šä¿å­˜çŠ¶æ€ / æ¨¡æ¿ä¸ä¼šä¿å­˜çŠ¶æ€</code></li>
<li>æ ¹å¸ƒå±€(å¿…é¡»å­˜åœ¨)</li>
<li>å¦‚æœå¸ƒå±€å’Œæ¨¡æ¿åŒæ—¶å­˜åœ¨ï¼Œåˆ™å¸ƒå±€ä¼šä¼˜å…ˆäºæ¨¡æ¿ layout-&gt;template-page</li>
</ul>
<p>ç›®å½•ç»“æ„å¦‚ä¸‹:</p>
<pre><code class="hljs language-txt" lang="txt">app
â””â”€ blog
   â”œâ”€ layout.tsx
   â”œâ”€ template.tsx
   â”œâ”€ a
   â”‚  â””â”€ page.tsx
   â””â”€ b
      â””â”€ page.tsx
</code></pre>
<p>app/blog/layout.tsx</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-string">'use client'</span> <span class="hljs-comment">//éœ€è¦äº¤äº’çš„åœ°æ–¹è¦æ”¹ä¸ºå®¢æˆ·ç«¯ç»„ä»¶ é»˜è®¤æ˜¯æœåŠ¡ç«¯ç»„ä»¶</span>
<span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">BlogLayout</span>(<span class="hljs-params">{ children }: { children: React.ReactNode }</span>) {
    <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Blog å¸ƒå±€ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count + 1)}&gt;+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ•°é‡ï¼š {count}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> /&gt;</span>
            {children}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<p>app/blog/template.tsx</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-string">'use client'</span> <span class="hljs-comment">//éœ€è¦äº¤äº’çš„åœ°æ–¹è¦æ”¹ä¸ºå®¢æˆ·ç«¯ç»„ä»¶ é»˜è®¤æ˜¯æœåŠ¡ç«¯ç»„ä»¶</span>
<span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">BlogTemplate</span>(<span class="hljs-params">{ children }: { children: React.ReactNode }</span>) {
    <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Blog Template<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count + 1)}&gt;+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ•°é‡ï¼š {count}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> /&gt;</span>
            {children}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<p>app/blog/a/page.tsx</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Link</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"next/link"</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">APage</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>A Page<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/blog/b"</span>&gt;</span>è·³è½¬B<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<p>app/blog/b/page.tsx</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Link</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"next/link"</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">BPage</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>B Page<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/blog/a"</span>&gt;</span>è·³è½¬A<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ea6f0aeae9a4ce98978f894abb7dfd4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5ruhenM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763455771&amp;x-signature=L8HsLelL81pqJERp6YChG9UPq4s%3D" alt="1.gif" loading="lazy"/></p>
<h4 data-id="heading-4">loading(åŠ è½½)</h4>
<p>Next.jsçš„loadingæ˜¯å€ŸåŠ©äº†<code>Suspense</code>å®ç°çš„ï¼ŒSuspenseçš„å…·ä½“ç”¨æ³•è¯·å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fmessage163.github.io%2Freact-docs%2Freact%2Fcomponents%2Fsuspense.html" target="_blank" title="https://message163.github.io/react-docs/react/components/suspense.html" ref="nofollow noopener noreferrer">Suspense ç»„ä»¶</a></p>
<p>app/blog/loading.tsx</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Loading</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<p>app/blog/a/page.tsx</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Link</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"next/link"</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">//è§¦å‘å¼‚æ­¥ä¼šè‡ªåŠ¨è·³è½¬åˆ°loadingç»„ä»¶ å¼‚æ­¥ç»“æŸæ­£å¸¸è¿”å›é¡µé¢</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">resolve</span>(<span class="hljs-string">"æ•°æ®"</span>)
    }, <span class="hljs-number">5000</span>)
  })
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">APage</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getData</span>()
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data)
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>A Page<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/blog/b"</span>&gt;</span>è·³è½¬B<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abd5f2f39f86406b85ba797fc0b36e56~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5ruhenM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763455771&amp;x-signature=d6HiHh%2FULAHxDghLgDA9X%2BnJCiI%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-5">error(é”™è¯¯)</h4>
<p>Next.jsçš„erroræ˜¯å€ŸåŠ©äº†<code>Error Boundary</code>å®ç°çš„ã€‚</p>
<p>app/blog/error.tsx</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-string">'use client'</span> <span class="hljs-comment">//é”™è¯¯ç»„ä»¶å¿…é¡»æ˜¯å®¢æˆ·ç«¯ç»„ä»¶</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Error</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Error<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<p>app/blog/a/page.tsx</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Link</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"next/link"</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">APage</span>(<span class="hljs-params"/>) {
   <span class="hljs-comment">//é‡åˆ°å¼‚å¸¸ä¼šè‡ªåŠ¨è·³è½¬åˆ°errorç»„ä»¶</span>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"é”™è¯¯"</span>)
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>A Page<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/blog/b"</span>&gt;</span>è·³è½¬B<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f354c01c68454aa18edb1322ed17a68f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5ruhenM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763455771&amp;x-signature=8utuEr2Lkw%2F8OlyQHNJH2iIpwMk%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-6">not-found(404)</h4>
<p>å…¶å®Next.js é»˜è®¤ä¼šç”Ÿæˆä¸€ä¸ª404é¡µé¢ï¼Œä½†æˆ‘ä»¬å¯èƒ½è‡ªå®šä¹‰404é¡µé¢ï¼Œåªéœ€è¦åœ¨appç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªnot-found.tsxæ–‡ä»¶å³å¯</p>
<p>app/not-found.tsx</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">NotFound</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>404 Page<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96aad6f0e4cd408b9e07093cf0cdc169~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5ruhenM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763455771&amp;x-signature=zXyN2lrQKsKsduG%2BBvkfJ3yjfE4%3D" alt="image.png" loading="lazy"/></p>
<p><strong>é¢„è®¡å­¦ä¹ æ—¶é—´</strong>: 20 åˆ†é’Ÿ<br/>
<strong>éš¾åº¦çº§åˆ«</strong>: åˆçº§ ğŸŸ¢</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨Jetpack Composeä¸­åˆ›å»ºCRTå±å¹•æ•ˆæœ]]></title>    <link>https://juejin.cn/post/7571352754896060442</link>    <guid>https://juejin.cn/post/7571352754896060442</guid>    <pubDate>2025-11-11T14:17:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571352754896060442" data-draft-id="7571304204719947830" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨Jetpack Composeä¸­åˆ›å»ºCRTå±å¹•æ•ˆæœ"/> <meta itemprop="keywords" content="Android,Android Jetpack,Kotlin"/> <meta itemprop="datePublished" content="2025-11-11T14:17:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨€æœ‰çŒ¿è¯‰"/> <meta itemprop="url" content="https://juejin.cn/user/2788017216685784"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨Jetpack Composeä¸­åˆ›å»ºCRTå±å¹•æ•ˆæœ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2788017216685784/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨€æœ‰çŒ¿è¯‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-11T14:17:35.000Z" title="Tue Nov 11 2025 14:17:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¯‘è‡ªã€ŒCreating a CRT Screen Effect in Jetpack Composeã€ï¼ŒåŸæ–‡é“¾æ¥<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.sinasamaki.com%2Fcreating-a-crt-screen-effect-in-jetpack-compose%2F" target="_blank" title="https://www.sinasamaki.com/creating-a-crt-screen-effect-in-jetpack-compose/" ref="nofollow noopener noreferrer">www.sinasamaki.com/creating-a-â€¦</a>ï¼Œç”±sinasamakiå‘å¸ƒäº2025å¹´11æœˆ7æ—¥ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c03b13347444a40a65e398230a3664a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iA5pyJ54y_6K-J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763475454&amp;x-signature=aM1APr%2Fnd8P0rxCx%2FeYyUPjF4dg%3D" alt="CRT å±å¹•æ•ˆæœ" loading="lazy"/></p>
<p>CRT æ˜¾ç¤ºå™¨å…·æœ‰ç‹¬ç‰¹è€Œæ€€æ—§çš„å¤–è§‚ï¼šæ¨¡ç³Šçš„è¾¹ç¼˜ã€æ‰«æçº¿å’Œè½»å¾®çš„è‰²å½©æº¢å‡ºã€‚è®©æˆ‘ä»¬å°è¯•ä½¿ç”¨ <code>GraphicsLayer</code> å’Œä¸€äº›å·§å¦™çš„å›¾å±‚æŠ€å·§åœ¨ Jetpack Compose ä¸­é‡ç° è¿™ç§æ•ˆæœã€‚</p>
<h2 data-id="heading-0">GraphicsLayer</h2>
<p>ä¸ä¸Šä¸€ç¯‡æ–‡ç« ä¸€æ ·ï¼Œæ­¤æ•ˆæœçš„åŸºç¡€æ˜¯ <code>GraphicsLayer</code>ã€‚å®ƒå…è®¸æˆ‘ä»¬å°†å†…å®¹ç»˜åˆ¶ä¸€æ¬¡åˆ°å±å¹•å¤–ç¼“å†²åŒºã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ä»¥æä½çš„æ€§èƒ½å¼€é”€å¤šæ¬¡ä½¿ç”¨ä¸åŒçš„æ•ˆæœé‡æ–°ç»˜åˆ¶å®ƒã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> graphicsLayer = rememberGraphicsLayer()

Box(Modifier.drawWithContent {
    graphicsLayer.record { 
        <span class="hljs-keyword">this</span><span class="hljs-symbol">@drawWithContent</span>.drawContent() 
    }
}) {
    content()
}
</code></pre>
<p>ä¸€æ—¦æˆ‘ä»¬å°†å†…å®¹è®°å½•åˆ° <code>graphicsLayer</code> ä¸­ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>drawLayer(graphicsLayer)</code> æ ¹æ®éœ€è¦å¤šæ¬¡ç»˜åˆ¶å®ƒã€‚</p>
<p>æˆ‘å–œæ¬¢åœ¨é»‘è‰²èƒŒæ™¯ä¸Šç»˜åˆ¶è‰²å½©é²œè‰³ã€é¥±å’Œåº¦é«˜çš„å†…å®¹ï¼Œå¹¶è¿ç”¨è¿™ç§æ•ˆæœã€‚ä»¥ä¸‹æ˜¯æˆ‘ä»¬å°†åº”ç”¨æ­¤æ•ˆæœçš„åŸºç¡€å¯ç»„åˆå¯¹è±¡ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d39284fd2094df8b21f1a6f4edd2e31~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iA5pyJ54y_6K-J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763475454&amp;x-signature=2glx3H%2BydfHnGQf0e7Vc8Yi6dfU%3D" alt="" width="70%" loading="lazy"/></p>
<h2 data-id="heading-1">æ·»åŠ æ‰«æçº¿</h2>
<p>ä¸ºäº†æ¨¡æ‹Ÿ CRT æ˜¾ç¤ºå™¨ä¸Šçš„æ°´å¹³æ‰«æçº¿ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨é‡å¤æ¸å˜ã€‚è®©æˆ‘ä»¬å°†å…¶æ”¾å…¥ä¸€ä¸ªæ‰©å±•å‡½æ•°ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> DrawScope.<span class="hljs-title">drawScanLines</span><span class="hljs-params">(alpha: <span class="hljs-type">Float</span>, blendMode: <span class="hljs-type">BlendMode</span>)</span></span> {
    <span class="hljs-keyword">val</span> color = Colors.Black.copy(alpha = alpha)
    drawRect(
        brush = Brush.verticalGradient(
            <span class="hljs-number">0f</span> to color,
            <span class="hljs-number">0.4f</span> to color,
            <span class="hljs-number">0.4f</span> to Colors.Transparent,
            <span class="hljs-number">1f</span> to Colors.Transparent,
            tileMode = TileMode.Repeated,
            startY = <span class="hljs-number">0f</span>,
            endY = <span class="hljs-number">10f</span>,
        ),
        blendMode = blendMode
    )
    drawRect(
        brush = Brush.horizontalGradient(
            <span class="hljs-number">0f</span> to color,
            <span class="hljs-number">0.1f</span> to color,
            <span class="hljs-number">0.1f</span> to Colors.Transparent,
            <span class="hljs-number">1f</span> to Colors.Transparent,
            tileMode = TileMode.Repeated,
            startX = <span class="hljs-number">0f</span>,
            endX = <span class="hljs-number">10f</span>,
        ),
        blendMode = blendMode
    )
}
</code></pre>
<p>æˆ‘ä»¬æ‰‹åŠ¨å®šä¹‰é¢œè‰²åœæ­¢ç‚¹ï¼Œä»¥ä¾¿åœ¨é¢œè‰²ä¹‹é—´å½¢æˆæ¸…æ™°çš„è¾¹ç¼˜ï¼Œç„¶åå°† <code>tileMode</code> è®¾ç½®ä¸º <code>Repeated</code>ã€‚è¿™æ ·ï¼Œå†åŠ ä¸Šè¾ƒçŸ­çš„èµ·ç‚¹å’Œç»ˆç‚¹ï¼Œå°±èƒ½å¾—åˆ°è®¸å¤šé‡å¤çš„å¹³è¡Œçº¿ã€‚</p>
<p>æ‰©å±•å‡½æ•°è¿˜ä¼šæ¥æ”¶æˆ‘ä»¬æ‰€éœ€çš„é€æ˜åº¦å’Œ <code>BlendMode</code> å‚æ•°ã€‚</p>
<p>ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ­¤å‡½æ•°åœ¨ <code>graphicsLayer</code> ä¸Šç»˜åˆ¶æ‰«æçº¿ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">.drawBehind {
    layer {
        drawLayer(graphicsLayer)
        drawScanLines(alpha = <span class="hljs-number">1f</span>, blendMode = BlendMode.DstOut)
    }
}
</code></pre>
<p>å°†æ··åˆæ¨¡å¼è®¾ç½®ä¸º <code>DstOut</code> ä¼šä»ç»˜åˆ¶çš„å†…å®¹ä¸­â€œå‡å»â€æˆ‘ä»¬çš„æ¸å˜ï¼Œä»è€Œäº§ç”Ÿè¿™ç§æ•ˆæœã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28d91b6dd34844b1bea2ebe831da791e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iA5pyJ54y_6K-J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763475454&amp;x-signature=x7IQ35n0Md8ld%2FbcOmq6yESR%2F2o%3D" alt="" width="70%" loading="lazy"/></p>
<h2 data-id="heading-2">æ„å»ºæ¨¡ç³Šå›¾å±‚</h2>
<p>ä¸ºäº†å®ç° CRT å±å¹•å¸¸è§çš„å‘å…‰æ•ˆæœï¼Œæˆ‘ä»¬å°†å¤šæ¬¡ç»˜åˆ¶ <code>graphicsLayer</code> å›¾å±‚ï¼Œæ¯æ¬¡ç»˜åˆ¶æ—¶åˆ†åˆ«è®¾ç½®ä¸åŒçš„æ¨¡ç³ŠåŠå¾„ã€é€æ˜åº¦å’Œç¼©æ”¾æ¯”ä¾‹ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> blurLayers = remember {
    listOf(
        Triple(<span class="hljs-number">1.</span>dp, <span class="hljs-number">0.2f</span>, <span class="hljs-number">1.02f</span> to <span class="hljs-number">1.03f</span>),
        Triple(<span class="hljs-number">0.</span>dp, <span class="hljs-number">.2f</span>, <span class="hljs-number">1f</span> to <span class="hljs-number">1f</span>),
        Triple(<span class="hljs-number">1.</span>dp, <span class="hljs-number">0.9f</span>, <span class="hljs-number">1f</span> to <span class="hljs-number">1f</span>),
        Triple(<span class="hljs-number">10.</span>dp, <span class="hljs-number">1f</span>, <span class="hljs-number">1f</span> to <span class="hljs-number">1f</span>),
        Triple(<span class="hljs-number">40.</span>dp, <span class="hljs-number">1f</span>, <span class="hljs-number">1f</span> to <span class="hljs-number">1f</span>),
    )
}
</code></pre>
<p>æˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ª <code>Triple</code> åˆ—è¡¨æ¥å­˜å‚¨æ¯ä¸ªå›¾å±‚çš„æ•°æ®ã€‚è¯¥åˆ—è¡¨çš„é¡ºåºä¹Ÿå®šä¹‰äº†å®ƒä»¬çš„ç»˜åˆ¶é¡ºåºã€‚æˆ‘å»ºè®®ä½ å°è¯•è°ƒæ•´è¿™äº›å€¼å’Œé¡ºåºï¼Œä»¥è·å¾—æ‰€éœ€çš„æ•ˆæœã€‚ä½†è¿™æ˜¯æˆ‘ç›®å‰ä½¿ç”¨çš„æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">blurLayers.forEach { (blur, alpha, scale) -&gt;  
    Box(  
        Modifier  
            .matchParentSize()  
            .blur(blur, BlurredEdgeTreatment.Unbounded)  
            .graphicsLayer {  
                scaleX = scale.first  
                scaleY = scale.second  
                <span class="hljs-keyword">this</span>.alpha = alpha  
            }  
            .drawBehind {  
                layer {  
                    drawLayer(graphicsLayer)  
                    drawScanLines(alpha = <span class="hljs-number">1f</span>, blendMode = BlendMode.DstOut)  
                }  
            }    
    )  
}
</code></pre>
<p>ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ—è¡¨ä¸­çš„å€¼ç»˜åˆ¶æ¯ä¸ªå›¾å±‚ã€‚åœ¨ <code>drawBehind</code> ä¿®æ”¹å™¨ä¸Šæ–¹ï¼Œæˆ‘ä»¬å°†å›¾å±‚å¤§å°è®¾ç½®ä¸ºä¸çˆ¶å›¾å±‚åŒ¹é…ï¼Œå¹¶åº”ç”¨æ¨¡ç³Šã€ç¼©æ”¾å’Œé€æ˜åº¦ã€‚è¯·è®°ä½å°†æ¨¡ç³Šè®¾ç½®ä¸º <code>Unbounded</code>ï¼Œä½¿å…¶è¶…å‡ºåŒ…å«å®ƒçš„å¯ç»„åˆå¯¹è±¡çš„è¾¹ç•Œã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb287da9548d4c8599ccafef052673af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iA5pyJ54y_6K-J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763475454&amp;x-signature=YY17IWzj47KP6nLWcJnlTRyaR1U%3D" alt="" width="70%" loading="lazy"/></p>
<h2 data-id="heading-3">å±å¹•æŠ–åŠ¨</h2>
<p>æœ€åï¼Œæˆ‘ä»¬æ¥æ·»åŠ å±å¹•æŠ–åŠ¨æ•ˆæœï¼Œä»¥æ¨¡æ‹Ÿ CRT æ˜¾ç¤ºå™¨ç‰¹æœ‰çš„æŠ–åŠ¨ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ª <code>Offset</code> å¯¹è±¡ï¼Œå¹¶ç”¨ -1 åˆ° 1 ä¹‹é—´çš„éšæœºæµ®ç‚¹å€¼æ¥æ›´æ–°å®ƒã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">var</span> shake <span class="hljs-keyword">by</span> remember { mutableStateOf(Offset.Zero) }

LaunchedEffect(<span class="hljs-built_in">Unit</span>) {
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        shake = Offset(
            Random.nextInt(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>) * Random.nextFloat(),
            Random.nextInt(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>) * Random.nextFloat(),
        )
        delay(<span class="hljs-number">32</span>)
    }
}
</code></pre>
<p>è¿™é‡Œåªéœ€åœ¨ä¸€ä¸ª while å¾ªç¯ä¸­å³å¯å®Œæˆã€‚å¯ä»¥è°ƒæ•´å»¶è¿Ÿæ—¶é—´æ¥æ§åˆ¶é—ªçƒçš„é—´éš”é¢‘ç‡ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">modifier = modifier  
    .graphicsLayer {  
        translationX = shake.x  
        translationY = shake.y  
    }
</code></pre>
<p>ç„¶åå¯ä»¥ä½¿ç”¨ä¿®é¥°ç¬¦æ¥åº”ç”¨æ­¤åç§»é‡ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08daadbb6efd45cc981fb077e23d6b47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iA5pyJ54y_6K-J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763475454&amp;x-signature=bSgkKe2ddTbuZyvzMGmA75jfjxM%3D" alt="crt_opt.gif" loading="lazy"/></p>
## æ•´åˆæ‰€æœ‰åŠŸèƒ½
<p>è®©æˆ‘ä»¬å°†æ‰€æœ‰è¿™äº›åŠŸèƒ½ç»„åˆæˆä¸€ä¸ªå¯è½»æ¾ä½¿ç”¨çš„ç»„åˆã€‚å®ƒä¼šæ¥æ”¶ <code>content</code> å‚æ•°ä»¥åŠ <code>flickerDelay</code> å‚æ•°ï¼Œåè€…ç”¨äºæ§åˆ¶é—ªçƒé¢‘ç‡ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>  
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">CRTBox</span><span class="hljs-params">(  
    modifier: <span class="hljs-type">Modifier</span> = Modifier,  
    flickerDelay: <span class="hljs-type">Int</span> = <span class="hljs-number">32</span>,  
    content: @<span class="hljs-type">Composable</span> () -&gt; <span class="hljs-type">Unit</span>,  
)</span></span> {  
    <span class="hljs-keyword">var</span> shake <span class="hljs-keyword">by</span> remember { mutableStateOf(Offset.Zero) }  
  
    LaunchedEffect(<span class="hljs-built_in">Unit</span>) {  
        <span class="hljs-keyword">while</span> (flickerDelay &gt; <span class="hljs-number">0</span>) {  
            shake = Offset(  
                Random.nextInt(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>) * Random.nextFloat(),  
                Random.nextInt(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>) * Random.nextFloat(),  
            )  
            delay(flickerDelay.toLong())  
        }  
    }  
  
    <span class="hljs-keyword">val</span> graphicsLayer = rememberGraphicsLayer()  
  
    Box(  
        modifier = modifier  
            .graphicsLayer {  
                translationX = shake.x  
                translationY = shake.y  
            }  
    ) {  
        Box(Modifier.drawWithContent {  
            graphicsLayer.record { <span class="hljs-keyword">this</span><span class="hljs-symbol">@drawWithContent</span>.drawContent() }  
        }) {  
            content()  
        }  
  
        <span class="hljs-keyword">val</span> blurLayers = remember {  
            listOf(  
                Triple(<span class="hljs-number">5.</span>dp, <span class="hljs-number">.3f</span>, <span class="hljs-number">1.02f</span> to <span class="hljs-number">1.03f</span>),  
                Triple(<span class="hljs-number">0.</span>dp, <span class="hljs-number">.8f</span>, <span class="hljs-number">1f</span> to <span class="hljs-number">1f</span>),  
                Triple(<span class="hljs-number">1.</span>dp, <span class="hljs-number">.9f</span>, <span class="hljs-number">1f</span> to <span class="hljs-number">1f</span>),  
                Triple(<span class="hljs-number">10.</span>dp, <span class="hljs-number">.6f</span>, <span class="hljs-number">1.001f</span> to <span class="hljs-number">1f</span>),  
                Triple(<span class="hljs-number">40.</span>dp, <span class="hljs-number">.7f</span>, <span class="hljs-number">1f</span> to <span class="hljs-number">1f</span>),  
            )  
        }  
  
        blurLayers.forEach { (blur, alpha, scale) -&gt;  
            Box(  
                Modifier  
                    .matchParentSize()  
                    .blur(blur, BlurredEdgeTreatment.Unbounded)  
                    .graphicsLayer {  
                        scaleX = scale.first  
                        scaleY = scale.second  
                        <span class="hljs-keyword">this</span>.alpha = alpha  
                    }  
                    .drawBehind {  
                        layer {  
                            drawLayer(graphicsLayer)  
                            drawScanLines(alpha = <span class="hljs-number">1f</span>, blendMode = BlendMode.DstOut)  
                        }  
                    }            
            )  
        }  
    }}  
  
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> DrawScope.<span class="hljs-title">layer</span><span class="hljs-params">(  
    bounds: <span class="hljs-type">Rect</span> = size.toRect()</span></span>,  
    block: DrawScope.() -&gt; <span class="hljs-built_in">Unit</span>  
) =  
    drawIntoCanvas { canvas -&gt;  
        canvas.withSaveLayer(  
            bounds = bounds,  
            paint = Paint(),  
        ) { block() }  
    }  
  
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> DrawScope.<span class="hljs-title">drawScanLines</span><span class="hljs-params">(alpha: <span class="hljs-type">Float</span>, blendMode: <span class="hljs-type">BlendMode</span>)</span></span> {  
    <span class="hljs-keyword">val</span> color = Colors.Black.copy(alpha = alpha)  
    drawRect(  
        brush = Brush.verticalGradient(  
            <span class="hljs-number">0f</span> to color,  
            <span class="hljs-number">0.4f</span> to color,  
            <span class="hljs-number">0.4f</span> to Colors.Transparent,  
            <span class="hljs-number">1f</span> to Colors.Transparent,  
            tileMode = TileMode.Repeated,  
            startY = <span class="hljs-number">0f</span>,  
            endY = <span class="hljs-number">10f</span>,  
        ),  
        blendMode = blendMode  
    )  
    drawRect(  
        brush = Brush.horizontalGradient(  
            <span class="hljs-number">0f</span> to color,  
            <span class="hljs-number">0.1f</span> to color,  
            <span class="hljs-number">0.1f</span> to Colors.Transparent,  
            <span class="hljs-number">1f</span> to Colors.Transparent,  
            tileMode = TileMode.Repeated,  
            startX = <span class="hljs-number">0f</span>,  
            endX = <span class="hljs-number">10f</span>,  
        ),  
        blendMode = blendMode  
    )  
}
</code></pre>
<p>ç„¶åï¼Œä½ å¯ä»¥åƒä½¿ç”¨å…¶ä»–å¯ç»„åˆç»„ä»¶ä¸€æ ·ä½¿ç”¨å®ƒï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">CRTBox {
    Text(<span class="hljs-string">"GAME OVER"</span>)
}
</code></pre>
<h2 data-id="heading-4">Sweeper æ›´æ–°</h2>
<p>å¦‚æœä½ æƒ³æŸ¥çœ‹å®é™…æ•ˆæœï¼Œè¯·æŸ¥çœ‹æœ€æ–°çš„ Sweeper æ›´æ–°ï¼Œè¯¥æ›´æ–°ä½¿ç”¨ CRT æ•ˆæœåˆ›å»ºäº†ä¸€ä¸ªä»¤äººæ¯›éª¨æ‚šç„¶çš„ä¸‡åœ£èŠ‚ä¸»é¢˜ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70c135b0abf04a7a88d83881ba6bad6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iA5pyJ54y_6K-J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763475454&amp;x-signature=fJO3ZjvcXhYG0mt6uzjwA%2Be7QTE%3D" alt="" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dcom.sinasamaki.chroma.sweeper%26ref%3Dsinasamaki.com" target="_blank" title="https://play.google.com/store/apps/details?id=com.sinasamaki.chroma.sweeper&amp;ref=sinasamaki.com" ref="nofollow noopener noreferrer">play.google.com/store/apps/â€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fapps.apple.com%2Fus%2Fapp%2Fsweeper-by-sinasamaki%2Fid6752220495%3Fref%3Dsinasamaki.com" target="_blank" title="https://apps.apple.com/us/app/sweeper-by-sinasamaki/id6752220495?ref=sinasamaki.com" ref="nofollow noopener noreferrer">apps.apple.com/us/app/sweeâ€¦</a></p>
<p>æ„Ÿè°¢é˜…è¯»ï¼Œç¥ä½ å¥½è¿ï¼</p>
<blockquote>
<p>æ¬¢è¿æœç´¢å¹¶å…³æ³¨ <em>å…¬ä¼—å·<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fqrcode%3Fscene%3D10000004%26size%3D512%26__biz%3DMzU1MDg0NDczNA%3D%3D%26mid%3D2247484417%26idx%3D1%26sn%3D60c15f0d3c4be75e37748c2472a74102" target="_blank" title="https://mp.weixin.qq.com/mp/qrcode?scene=10000004&amp;size=512&amp;__biz=MzU1MDg0NDczNA==&amp;mid=2247484417&amp;idx=1&amp;sn=60c15f0d3c4be75e37748c2472a74102" ref="nofollow noopener noreferrer">ã€Œç¨€æœ‰çŒ¿è¯‰ã€</a></em> è·å–æ›´å¤šçš„ä¼˜è´¨æ–‡ç« ï¼</p>
<p>ä¿æŠ¤åŸåˆ›ï¼Œè¯·å‹¿è½¬è½½ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TRAE SOLO æ­£å¼ç‰ˆä¸Šçº¿ï¼Œé™æ—¶å…è´¹æ´»åŠ¨å¼€å¯]]></title>    <link>https://juejin.cn/post/7571379089992187958</link>    <guid>https://juejin.cn/post/7571379089992187958</guid>    <pubDate>2025-11-12T05:06:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571379089992187958" data-draft-id="7571379089992171574" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TRAE SOLO æ­£å¼ç‰ˆä¸Šçº¿ï¼Œé™æ—¶å…è´¹æ´»åŠ¨å¼€å¯"/> <meta itemprop="keywords" content="Trae,Solo,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-12T05:06:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£å“¥æ•°æ™ºè°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3825956195409223"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TRAE SOLO æ­£å¼ç‰ˆä¸Šçº¿ï¼Œé™æ—¶å…è´¹æ´»åŠ¨å¼€å¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3825956195409223/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£å“¥æ•°æ™ºè°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T05:06:44.000Z" title="Wed Nov 12 2025 05:06:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»Šæ™š <code>TRAE SOLO</code> è®¡åˆ’å‘å¸ƒæ­£å¼ç‰ˆï¼Œä½†è®©æˆ‘æ²¡æƒ³åˆ°çš„æ˜¯ï¼Œä¸­åˆç«Ÿç„¶æå‰ä¸Šçº¿ï¼Œå¹¶å¼€å§‹<strong>é™æ—¶å…è´¹æ´»åŠ¨</strong>ã€‚</p>
<p>æ´»åŠ¨æ—¶é—´ï¼š11 æœˆ 12 æ—¥ 12:00 - 11 æœˆ 15 æ—¥ 23:59ã€‚</p>
<p>åœ¨æ´»åŠ¨æœŸé—´ï¼Œæ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥å…è´¹ä½“éªŒ <code>SOLO Coder</code>ã€<code>SOLO Builder</code>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/216c9f49410c4202af40579fce25e003~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763528804&amp;x-signature=h5xI3XduKjADH6jAcdnB8%2FqFgAc%3D" alt="" loading="lazy"/></p>
<p>è®°å¾—æ›´æ–°åˆ° <code>TRAEï¼ˆå›½é™…ç‰ˆï¼‰3.0</code>ï¼Œç„¶åå°±å¯ä»¥å°½æƒ…ä½“éªŒäº†~</p>
<h2 data-id="heading-0">å‡çº§å†…å®¹</h2>
<h3 data-id="heading-1">å†…ç½®æ™ºèƒ½ä½“ SOLO Coder</h3>
<p>ä¹‹å‰å¤§å®¶éƒ½è¯´ <code>SOLO Builder</code> æ™ºèƒ½ä½“æ›´æ“…é•¿å‰ç«¯ï¼Œè¿™ä¸å°±æ¥äº†ä¸ªæ“…é•¿å¤æ‚ç¼–ç¨‹çš„æ™ºèƒ½ä½“ã€‚</p>
<ul>
<li>ä¸“ä¸ºå¤æ‚ç¼–ç¨‹é¡¹ç›®è®¾ç½®ï¼Œè¡¥å…¨ä¹‹å‰çš„åç§‘è¡¨ç°</li>
<li>æ”¯æŒâ€œ<strong>è§„åˆ’</strong>â€æ¨¡å¼ï¼Œâ€œè§„åˆ’â€æ¨¡å¼åœ¨å…¶ä»–ç«å“ä¸­å°è¯•è¿‡å¤šæ¬¡ï¼Œæ•ˆæœç¡®å®å¥½</li>
<li>å¯ä½œä¸ºæ€»ç®¡ï¼Œ<strong>æ™ºèƒ½è°ƒç”¨â€œè‡ªå®šä¹‰æ™ºèƒ½ä½“â€</strong>ï¼Œç±»ä¼¼ Claude Code çš„ <code>subagent</code> æ¨¡å¼ï¼Œæ–¹ä¾¿é…ç½®è‡ªå·±å–œæ¬¢çš„å¼€å‘æµç¨‹</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/975c117ea641422b9c53ab19d872fb7a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763528804&amp;x-signature=aOJzIIPfJUd%2Bgp1GjAdTCEA0nvM%3D" alt="" loading="lazy"/></p>
<p>æ³¨æ„ï¼š<code>SOLO Coder</code> é»˜è®¤å¼€å¯ <code>Max</code> æ¨¡å¼ï¼Œåç»­æ³¨æ„ <code>Token</code> æ¶ˆè€—ã€‚</p>
<h3 data-id="heading-2">å†…ç½®æ™ºèƒ½ä½“ SOLO Builder</h3>
<p>ä¸€ç«™å¼å°†æƒ³æ³•è½¬æ¢ä¸ºäº§å“ï¼ŒåŒ…æ‹¬ PRDã€ä»»åŠ¡ã€ä»£ç ã€é¢„è§ˆã€éƒ¨ç½²æµç¨‹ï¼Œä¹Ÿæ˜¯ SOLO æœ€åˆçš„è®¾è®¡ç†å¿µã€‚</p>
<p>å·²ç»åˆ†äº«è¿‡å¤šæ¬¡äº†ï¼Œè¿™é‡Œå°±ä¸å¤šè¯´äº†ã€‚</p>
<h3 data-id="heading-3">æ”¯æŒå¤šä»»åŠ¡å¹¶è¡Œ</h3>
<p>æœ€å·¦ä¾§å¢åŠ äº†ä»»åŠ¡åˆ—è¡¨ï¼ˆé<code>todo-list</code>ï¼‰ï¼Œå¯
<strong>å¤šåŠŸèƒ½æ¨¡å—åŒæ—¶å¼€å‘</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4920a42d519d4b35b57b0e1a64df1baf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763528804&amp;x-signature=Hdg%2FYqvyyzC3kessyhs%2BjK%2BTxHo%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">å¯¹è¯ä»»åŠ¡è‡ªåŠ¨æŠ˜å å¹¶æ±‡æ€»</h3>
<p>AI è¿”å›çš„å¯¹è¯å†…å®¹éšç€æ¨¡å‹èƒ½åŠ›çš„æå‡ï¼Œç°åœ¨è¶Šæ¥è¶Šå¤šï¼Œå¾ˆå¤šæ—¶å€™æ»šåŠ¨èµ·æ¥çœ‹ç€éƒ½å¤´å¤§ã€‚</p>
<p>è¿™æ¬¡å‡çº§ï¼Œç›´æ¥æä¾›äº†<strong>è‡ªåŠ¨æŠ˜å </strong>å’Œ<strong>æ‘˜è¦æ˜¾ç¤º</strong>ï¼Œè®©ä½ æ›´æ¸…æ™°åœ°æŒæ¡ä»»åŠ¡æ•´ä½“æƒ…å†µã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e470fa8e43c4c97b5b5a9b40efe04a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763528804&amp;x-signature=ywpw7bx%2F%2FTcf7I7wewJc%2Bo1uczU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">ä»£ç å·®å¼‚è§†å›¾å·¥å…·</h3>
<p>ä¹Ÿæ˜¯å‚è€ƒä¸»æµæ–¹å¼ï¼ŒæŠŠä»£ç å˜æ›´<strong>é›†ä¸­æ˜¾ç¤º</strong>ï¼Œæ›´åŠ æ–¹ä¾¿å¤§å®¶å®¡é˜…ä»£ç ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a8f5881d1324b07ba7fb57e777a3db0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763528804&amp;x-signature=7i48i7qkh5IElfXEXR0SgvGLXhQ%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">è‡ªå®šä¹‰æ˜¾ç¤ºé›†æˆå·¥å…·</h3>
<p>ä¸»ç•Œé¢çš„é›†æˆå·¥å…·å¯æ ¹æ®ä¸ªäººå–œå¥½ï¼Œè‡ªè¡Œé…ç½®ã€‚</p>
<p>æ¯•ç«Ÿï¼Œè¿™å—ä¼šä¸æ–­å¢åŠ ã€å®Œå–„å·¥å…·ï¼Œå¦‚æœä¸èƒ½è‡ªå®šä¹‰ï¼Œåç»­é€‰æ‹©éƒ½ä¼šå›°éš¾ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c47000525e90408682a781bafd9838ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763528804&amp;x-signature=JRprBD96rwX9DtSw%2B9L%2F5k%2Fqgng%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">å…¶ä»–</h3>
<p>TRAE å†…çš„æ›´æ–°æ–‡æ¡£æ˜¯æœ‰â€œæ”¯æŒç”¨æˆ·ç®¡ç†ä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬ä¸Šä¸‹æ–‡ä½¿ç”¨å±•ç¤ºåŠä¸Šä¸‹æ–‡å‹ç¼©ã€‚â€ï¼Œä½†æ˜¯åªçœ‹åˆ°ä¸Šä¸‹æ–‡æ˜¾ç¤ºï¼Œè¿˜æ²¡å‘ç°å¦‚ä½•ç®¡ç†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76990f4fd1b249098c7edba403683786~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763528804&amp;x-signature=fzFyhwHxbL6cfbOyUJRpixvgOaQ%3D" alt="" loading="lazy"/></p>
<p>ä¼˜åŒ–è®¾ç½®åŠŸèƒ½ï¼Œæ”¯æŒå…¨å±€æœç´¢ï¼Œå¿«é€Ÿå®šä½æ‰€éœ€é…ç½®é¡¹ï¼Œè¿™ä¸ªåœ¨é…ç½®é¡¹è¶Šæ¥è¶Šå¤šçš„æƒ…å†µä¸‹è¿˜æ˜¯æŒºå¥½ç”¨çš„ã€‚</p>
<h2 data-id="heading-8">ç»“è¯­</h2>
<p>ä¸ªäººæ„Ÿè§‰æ›´æ–°çš„ç‰¹æ€§è¿˜æ˜¯æ¯”è¾ƒå®ç”¨çš„ï¼Œåç»­å†ä»”ç»†è¯•è¯• <code>SOLO Coder</code> æå‡æœ‰å¤šå°‘å§ã€‚</p>
<p>æœ€ä¸»è¦çš„æ˜¯æœ€è¿‘å‡ å¤©å…è´¹ï¼Œå¤§å®¶æŠ“ç´§å»è¯•è¯•å§~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å½“æˆ‘ä»¬æ‰§è¡Œ npm run xxx çš„æ—¶å€™å®é™…æ‰§è¡Œé€»è¾‘å’Œæµç¨‹]]></title>    <link>https://juejin.cn/post/7571621555512918070</link>    <guid>https://juejin.cn/post/7571621555512918070</guid>    <pubDate>2025-11-12T07:46:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571621555512918070" data-draft-id="7571429745231233060" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å½“æˆ‘ä»¬æ‰§è¡Œ npm run xxx çš„æ—¶å€™å®é™…æ‰§è¡Œé€»è¾‘å’Œæµç¨‹"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2025-11-12T07:46:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Man"/> <meta itemprop="url" content="https://juejin.cn/user/2524134428378206"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å½“æˆ‘ä»¬æ‰§è¡Œ npm run xxx çš„æ—¶å€™å®é™…æ‰§è¡Œé€»è¾‘å’Œæµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2524134428378206/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Man
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T07:46:13.000Z" title="Wed Nov 12 2025 07:46:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">npm run dev æ‰§è¡Œæµç¨‹è¯¦è§£</h2>
<p><code>npm run dev</code> æœ€ç»ˆæ˜¯é€šè¿‡ Node.js æ‰§è¡Œçš„ï¼Œ<code>vite.config.ts</code> æ˜¯ä¸€ä¸ª Node.js æ¨¡å—ï¼Œä¼šè¢« Node.js è¯»å–å’Œæ‰§è¡Œã€‚</p>
<h3 data-id="heading-1">ğŸ“‹ å®Œæ•´æ‰§è¡Œæµç¨‹</h3>
<h4 data-id="heading-2">1. npm run dev å‘½ä»¤</h4>
<pre><code class="hljs language-bash" lang="bash">npm run dev
</code></pre>
<p><strong>å®é™…æ‰§è¡Œï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># npm ä¼šæŸ¥æ‰¾ package.json ä¸­çš„ scripts.dev</span>
<span class="hljs-comment"># ç„¶åæ‰§è¡Œå¯¹åº”çš„å‘½ä»¤</span>
unh dev
</code></pre>
<h4 data-id="heading-3">2. unh å‘½ä»¤ï¼ˆNode.js å¯æ‰§è¡Œæ–‡ä»¶ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">unh dev
</code></pre>
<p><strong>å®é™…æ‰§è¡Œï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># unh æ˜¯ä¸€ä¸ª Node.js å‘½ä»¤è¡Œå·¥å…·ï¼ˆCLIï¼‰</span>
<span class="hljs-comment"># ä½äº node_modules/.bin/unh</span>
<span class="hljs-comment"># å®é™…æ˜¯ä¸€ä¸ª Node.js è„šæœ¬ï¼Œé€šè¿‡ shebang æ‰§è¡Œï¼š</span>
<span class="hljs-comment">#!/usr/bin/env node</span>

<span class="hljs-comment"># æˆ–è€…é€šè¿‡ npx æ‰§è¡Œï¼š</span>
npx unh dev
</code></pre>
<p><strong>unh çš„å·¥ä½œï¼š</strong></p>
<ol>
<li>è¯»å– <code>unh.config.ts</code> é…ç½®æ–‡ä»¶ï¼ˆNode.js æ¨¡å—ï¼‰</li>
<li>è§£æå¹³å°å‚æ•°ï¼ˆå¦‚ <code>wx</code> â†’ <code>mp-weixin</code>ï¼‰</li>
<li>æ‰§è¡Œ hooksï¼ˆå¦‚ <code>dev</code> hookï¼‰</li>
<li>è°ƒç”¨ Vite CLI</li>
</ol>
<h4 data-id="heading-4">3. Vite CLIï¼ˆNode.js å¯æ‰§è¡Œæ–‡ä»¶ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># unh å†…éƒ¨ä¼šè°ƒç”¨ï¼š</span>
vite dev
<span class="hljs-comment"># æˆ–</span>
npx vite dev
</code></pre>
<p><strong>Vite çš„å·¥ä½œï¼š</strong></p>
<ol>
<li>è¯»å– <code>vite.config.ts</code> é…ç½®æ–‡ä»¶ï¼ˆNode.js æ¨¡å—ï¼‰</li>
<li>åŠ è½½ç¯å¢ƒå˜é‡ï¼ˆ<code>.env</code> æ–‡ä»¶ï¼‰</li>
<li>å¯åŠ¨å¼€å‘æœåŠ¡å™¨</li>
</ol>
<h4 data-id="heading-5">4. vite.config.ts çš„æ‰§è¡Œ</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// vite.config.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(<span class="hljs-function">(<span class="hljs-params">{ mode }</span>) =&gt;</span> {
  <span class="hljs-comment">// è¿™æ®µä»£ç æ˜¯åœ¨ Node.js ç¯å¢ƒä¸­æ‰§è¡Œçš„ï¼</span>
  <span class="hljs-keyword">const</span> actualMode = process.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_MODE</span> || mode
  <span class="hljs-keyword">const</span> env = <span class="hljs-title function_">loadEnv</span>(actualMode, process.<span class="hljs-title function_">cwd</span>(), <span class="hljs-string">''</span>)
  
  <span class="hljs-keyword">return</span> {
    <span class="hljs-comment">// è¿”å›é…ç½®å¯¹è±¡</span>
  }
})
</code></pre>
<p><strong>æ‰§è¡Œæ—¶æœºï¼š</strong></p>
<ul>
<li>âœ… <strong>Node.js ç¯å¢ƒ</strong>ï¼šåœ¨ Node.js è¿›ç¨‹ä¸­æ‰§è¡Œ</li>
<li>âœ… <strong>æ„å»ºæ—¶</strong>ï¼šåœ¨å¯åŠ¨å¼€å‘æœåŠ¡å™¨ä¹‹å‰æ‰§è¡Œ</li>
<li>âœ… <strong>æ¯æ¬¡å¯åŠ¨</strong>ï¼šæ¯æ¬¡è¿è¡Œ <code>npm run dev</code> éƒ½ä¼šæ‰§è¡Œ</li>
</ul>
<h3 data-id="heading-6">ğŸ” è¯¦ç»†æ‰§è¡Œé“¾</h3>
<pre><code class="hljs language-arduino" lang="arduino">npm run dev
  â†“
npm è¯»å– package.json
  â†“
æ‰§è¡Œ: unh dev
  â†“
Node.js æ‰§è¡Œ node_modules/.bin/unh
  â†“
unh è¯»å– unh.config.<span class="hljs-built_in">ts</span> (Node.js æ¨¡å—)
  â†“
unh æ‰§è¡Œ dev hook
  â†“
unh è°ƒç”¨ Vite CLI
  â†“
Node.js æ‰§è¡Œ node_modules/.bin/vite
  â†“
Vite è¯»å– vite.config.<span class="hljs-built_in">ts</span> (Node.js æ¨¡å—)
  â†“
vite.config.ts ä¸­çš„ä»£ç åœ¨ Node.js ä¸­æ‰§è¡Œ
  â†“
<span class="hljs-built_in">loadEnv</span>() è¯»å– .env æ–‡ä»¶ï¼ˆNode.js fs æ¨¡å—ï¼‰
  â†“
è¿”å›é…ç½®å¯¹è±¡
  â†“
Vite å¯åŠ¨å¼€å‘æœåŠ¡å™¨
</code></pre>
<h3 data-id="heading-7">ğŸ’¡ å…³é”®ç‚¹</h3>
<h4 data-id="heading-8">1. éƒ½æ˜¯ Node.js æ‰§è¡Œ</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ‰€æœ‰è¿™äº›å‘½ä»¤æœ€ç»ˆéƒ½æ˜¯é€šè¿‡ Node.js æ‰§è¡Œçš„ï¼š</span>
npm run dev          <span class="hljs-comment"># Node.js æ‰§è¡Œ npm</span>
unh dev              <span class="hljs-comment"># Node.js æ‰§è¡Œ unh</span>
vite dev             <span class="hljs-comment"># Node.js æ‰§è¡Œ vite</span>
</code></pre>
<h4 data-id="heading-9">2. é…ç½®æ–‡ä»¶æ˜¯ Node.js æ¨¡å—</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// vite.config.ts</span>
<span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ª Node.js æ¨¡å—ï¼ˆCommonJS æˆ– ES Moduleï¼‰</span>
<span class="hljs-comment">// ä¼šè¢« Node.js çš„ require() æˆ– import() åŠ è½½</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(<span class="hljs-function">(<span class="hljs-params">{ mode }</span>) =&gt;</span> {
  <span class="hljs-comment">// è¿™é‡Œçš„ä»£ç åœ¨ Node.js ç¯å¢ƒä¸­è¿è¡Œ</span>
  <span class="hljs-comment">// å¯ä»¥ä½¿ç”¨ Node.js çš„æ‰€æœ‰ APIï¼š</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(process.<span class="hljs-property">env</span>)        <span class="hljs-comment">// âœ… Node.js å…¨å±€å¯¹è±¡</span>
  <span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>)        <span class="hljs-comment">// âœ… Node.js æ¨¡å—</span>
  <span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>)    <span class="hljs-comment">// âœ… Node.js æ¨¡å—</span>
  
  <span class="hljs-keyword">return</span> {
    <span class="hljs-comment">// è¿”å›é…ç½®å¯¹è±¡</span>
  }
})
</code></pre>
<h4 data-id="heading-10">3. è‡ªåŠ¨è¯»å–é…ç½®æ–‡ä»¶</h4>
<p><strong>Vite ä¼šè‡ªåŠ¨æŸ¥æ‰¾é…ç½®æ–‡ä»¶ï¼š</strong></p>
<ul>
<li><code>vite.config.ts</code>ï¼ˆTypeScriptï¼‰</li>
<li><code>vite.config.js</code>ï¼ˆJavaScriptï¼‰</li>
<li><code>vite.config.mjs</code>ï¼ˆES Moduleï¼‰</li>
<li><code>vite.config.cjs</code>ï¼ˆCommonJSï¼‰</li>
</ul>
<p><strong>æŸ¥æ‰¾é¡ºåºï¼š</strong></p>
<ol>
<li>é¡¹ç›®æ ¹ç›®å½•</li>
<li>ä½¿ç”¨ <code>fs</code> æ¨¡å—è¯»å–æ–‡ä»¶</li>
<li>ä½¿ç”¨ Node.js çš„æ¨¡å—ç³»ç»ŸåŠ è½½</li>
</ol>
<h4 data-id="heading-11">4. ç¯å¢ƒå˜é‡åŠ è½½</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// vite.config.ts</span>
<span class="hljs-keyword">const</span> env = <span class="hljs-title function_">loadEnv</span>(actualMode, process.<span class="hljs-title function_">cwd</span>(), <span class="hljs-string">''</span>)
</code></pre>
<p><strong>loadEnv çš„å·¥ä½œåŸç†ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Vite å†…éƒ¨çš„ loadEnv å‡½æ•°ï¼ˆç®€åŒ–ç‰ˆï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">loadEnv</span>(<span class="hljs-params">mode, root, prefix</span>) {
  <span class="hljs-comment">// ä½¿ç”¨ Node.js çš„ fs æ¨¡å—è¯»å–æ–‡ä»¶</span>
  <span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>)
  <span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>)
  
  <span class="hljs-comment">// è¯»å– .env.development æ–‡ä»¶</span>
  <span class="hljs-keyword">const</span> envFile = path.<span class="hljs-title function_">join</span>(root, <span class="hljs-string">`.env.<span class="hljs-subst">${mode}</span>`</span>)
  <span class="hljs-keyword">const</span> content = fs.<span class="hljs-title function_">readFileSync</span>(envFile, <span class="hljs-string">'utf-8'</span>)
  
  <span class="hljs-comment">// è§£æç¯å¢ƒå˜é‡</span>
  <span class="hljs-keyword">const</span> env = {}
  content.<span class="hljs-title function_">split</span>(<span class="hljs-string">'\n'</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">line</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> [key, value] = line.<span class="hljs-title function_">split</span>(<span class="hljs-string">'='</span>)
    <span class="hljs-keyword">if</span> (key.<span class="hljs-title function_">startsWith</span>(prefix)) {
      env[key] = value
    }
  })
  
  <span class="hljs-keyword">return</span> env
}
</code></pre>
<h3 data-id="heading-12">ğŸ“ å®é™…ä¾‹å­</h3>
<h4 data-id="heading-13">ä¾‹å­1ï¼šnpm run dev</h4>
<pre><code class="hljs language-bash" lang="bash">npm run dev
</code></pre>
<p><strong>æ‰§è¡Œè¿‡ç¨‹ï¼š</strong></p>
<ol>
<li>
<p><strong>npm è§£æå‘½ä»¤</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># npm å†…éƒ¨æ‰§è¡Œï¼š</span>
node node_modules/.bin/unh dev
</code></pre>
</li>
<li>
<p><strong>unh å¯åŠ¨</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// unh å†…éƒ¨ä»£ç ï¼ˆç®€åŒ–ï¼‰</span>
<span class="hljs-keyword">const</span> config = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./unh.config.ts'</span>)
config.<span class="hljs-property">hooks</span>.<span class="hljs-title function_">dev</span>(<span class="hljs-string">'h5'</span>, {})
</code></pre>
</li>
<li>
<p><strong>unh è°ƒç”¨ Vite</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># unh å†…éƒ¨æ‰§è¡Œï¼š</span>
node node_modules/.bin/vite dev
</code></pre>
</li>
<li>
<p><strong>Vite è¯»å–é…ç½®</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Vite å†…éƒ¨ä»£ç ï¼ˆç®€åŒ–ï¼‰</span>
<span class="hljs-keyword">const</span> config = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./vite.config.ts'</span>)
<span class="hljs-keyword">const</span> resolvedConfig = config.<span class="hljs-title function_">default</span>({ <span class="hljs-attr">mode</span>: <span class="hljs-string">'development'</span> })
</code></pre>
</li>
<li>
<p><strong>vite.config.ts æ‰§è¡Œ</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è¿™æ®µä»£ç åœ¨ Node.js ä¸­æ‰§è¡Œ</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(<span class="hljs-function">(<span class="hljs-params">{ mode }</span>) =&gt;</span> {
  <span class="hljs-comment">// mode = 'development'</span>
  <span class="hljs-keyword">const</span> env = <span class="hljs-title function_">loadEnv</span>(<span class="hljs-string">'development'</span>, process.<span class="hljs-title function_">cwd</span>(), <span class="hljs-string">''</span>)
  <span class="hljs-comment">// env = { VITE_API_BASE_URL: 'https://dev-api.example.com', ... }</span>

  <span class="hljs-keyword">return</span> {
    <span class="hljs-comment">// è¿”å›é…ç½®</span>
  }
})
</code></pre>
</li>
</ol>
<h4 data-id="heading-14">ä¾‹å­2ï¼šVITE_MODE=test npm run dev</h4>
<pre><code class="hljs language-bash" lang="bash">VITE_MODE=<span class="hljs-built_in">test</span> npm run dev
</code></pre>
<p><strong>æ‰§è¡Œè¿‡ç¨‹ï¼š</strong></p>
<ol>
<li>
<p><strong>è®¾ç½®ç¯å¢ƒå˜é‡</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Shell è®¾ç½®ç¯å¢ƒå˜é‡</span>
process.env.VITE_MODE = <span class="hljs-string">'test'</span>
</code></pre>
</li>
<li>
<p><strong>npm æ‰§è¡Œå‘½ä»¤</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># npm ç»§æ‰¿ç¯å¢ƒå˜é‡</span>
node node_modules/.bin/unh dev
</code></pre>
</li>
<li>
<p><strong>vite.config.ts è¯»å–ç¯å¢ƒå˜é‡</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(<span class="hljs-function">(<span class="hljs-params">{ mode }</span>) =&gt;</span> {
  <span class="hljs-comment">// process.env.VITE_MODE = 'test'ï¼ˆä»ç¯å¢ƒå˜é‡è¯»å–ï¼‰</span>
  <span class="hljs-keyword">const</span> actualMode = process.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_MODE</span> || mode
  <span class="hljs-comment">// actualMode = 'test'</span>

  <span class="hljs-keyword">const</span> env = <span class="hljs-title function_">loadEnv</span>(<span class="hljs-string">'test'</span>, process.<span class="hljs-title function_">cwd</span>(), <span class="hljs-string">''</span>)
  <span class="hljs-comment">// è¯»å– .env.test æ–‡ä»¶</span>

  <span class="hljs-keyword">return</span> {
    <span class="hljs-comment">// è¿”å›é…ç½®</span>
  }
})
</code></pre>
</li>
</ol>
<h3 data-id="heading-15">ğŸ”§ æŠ€æœ¯ç»†èŠ‚</h3>
<h4 data-id="heading-16">1. Node.js æ¨¡å—ç³»ç»Ÿ</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// vite.config.ts</span>
<span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ª ES Moduleï¼ˆå› ä¸º package.json ä¸­æœ‰ "type": "module"ï¼‰</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(...)
</code></pre>
<p><strong>åŠ è½½è¿‡ç¨‹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Vite å†…éƒ¨ï¼ˆç®€åŒ–ï¼‰</span>
<span class="hljs-keyword">import</span> config <span class="hljs-keyword">from</span> <span class="hljs-string">'./vite.config.ts'</span>
<span class="hljs-comment">// æˆ–</span>
<span class="hljs-keyword">const</span> config = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./vite.config.ts'</span>)
</code></pre>
<h4 data-id="heading-17">2. é…ç½®æ–‡ä»¶æ‰§è¡Œæ—¶æœº</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// vite.config.ts</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿™è¡Œä»£ç ä¼šåœ¨ Node.js ä¸­æ‰§è¡Œ'</span>)

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(<span class="hljs-function">(<span class="hljs-params">{ mode }</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿™è¡Œä»£ç ä¹Ÿä¼šåœ¨ Node.js ä¸­æ‰§è¡Œ'</span>)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'mode:'</span>, mode)
  
  <span class="hljs-keyword">return</span> {
    <span class="hljs-comment">// é…ç½®å¯¹è±¡</span>
  }
})
</code></pre>
<p><strong>æ‰§è¡Œæ—¶æœºï¼š</strong></p>
<ul>
<li>âœ… <strong>æ¯æ¬¡å¯åŠ¨æ—¶</strong>ï¼šæ¯æ¬¡è¿è¡Œ <code>npm run dev</code> éƒ½ä¼šæ‰§è¡Œ</li>
<li>âœ… <strong>Node.js ç¯å¢ƒ</strong>ï¼šåœ¨ Node.js è¿›ç¨‹ä¸­æ‰§è¡Œ</li>
<li>âœ… <strong>æ„å»ºæ—¶</strong>ï¼šåœ¨å¯åŠ¨å¼€å‘æœåŠ¡å™¨ä¹‹å‰æ‰§è¡Œ</li>
</ul>
<h4 data-id="heading-18">3. ç¯å¢ƒå˜é‡è®¿é—®</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// vite.config.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(<span class="hljs-function">(<span class="hljs-params">{ mode }</span>) =&gt;</span> {
  <span class="hljs-comment">// âœ… å¯ä»¥è®¿é—® Node.js ç¯å¢ƒå˜é‡</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_MODE</span>)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span>)
  
  <span class="hljs-comment">// âœ… å¯ä»¥ä½¿ç”¨ Node.js æ¨¡å—</span>
  <span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>)
  <span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>)
  
  <span class="hljs-comment">// âœ… å¯ä»¥è¯»å–æ–‡ä»¶</span>
  <span class="hljs-keyword">const</span> packageJson = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(
    fs.<span class="hljs-title function_">readFileSync</span>(path.<span class="hljs-title function_">join</span>(process.<span class="hljs-title function_">cwd</span>(), <span class="hljs-string">'package.json'</span>), <span class="hljs-string">'utf-8'</span>)
  )
  
  <span class="hljs-keyword">return</span> {
    <span class="hljs-comment">// é…ç½®</span>
  }
})
</code></pre>
<h3 data-id="heading-19">ğŸ“Š æ‰§è¡Œæµç¨‹å›¾</h3>
<pre><code class="hljs language-arduino" lang="arduino">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <span class="hljs-number">1.</span> ç”¨æˆ·è¾“å…¥: npm run dev                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <span class="hljs-number">2.</span> npm è¯»å– package.json               â”‚
â”‚     scripts.dev = <span class="hljs-string">"unh dev"</span>             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <span class="hljs-number">3.</span> npm æ‰§è¡Œ: node node_modules/.bin/unhâ”‚
â”‚     (Node.js æ‰§è¡Œ unh å¯æ‰§è¡Œæ–‡ä»¶)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <span class="hljs-number">4.</span> unh è¯»å– unh.config.ts              â”‚
â”‚     (Node.js æ¨¡å—ç³»ç»ŸåŠ è½½)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <span class="hljs-number">5.</span> unh æ‰§è¡Œ dev hook                   â”‚
â”‚     console.<span class="hljs-built_in">log</span>(<span class="hljs-string">'å¯åŠ¨å¼€å‘ç¯å¢ƒ...'</span>)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <span class="hljs-number">6.</span> unh è°ƒç”¨: node node_modules/.bin/viteâ”‚
â”‚     (Node.js æ‰§è¡Œ vite å¯æ‰§è¡Œæ–‡ä»¶)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <span class="hljs-number">7.</span> Vite è¯»å– vite.config.ts            â”‚
â”‚     (Node.js æ¨¡å—ç³»ç»ŸåŠ è½½)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <span class="hljs-number">8.</span> vite.config.ts ä¸­çš„ä»£ç æ‰§è¡Œ         â”‚
â”‚     - <span class="hljs-built_in">loadEnv</span>() è¯»å– .env æ–‡ä»¶          â”‚
â”‚     - ä½¿ç”¨ Node.js fs æ¨¡å—              â”‚
â”‚     - è¿”å›é…ç½®å¯¹è±¡                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <span class="hljs-number">9.</span> Vite å¯åŠ¨å¼€å‘æœåŠ¡å™¨                  â”‚
â”‚     - ä½¿ç”¨é…ç½®å¯¹è±¡                       â”‚
â”‚     - å¯åŠ¨ HTTP æœåŠ¡å™¨                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-20">âœ… æ€»ç»“</h3>
<ol>
<li>
<p>âœ… <strong>npm run dev æœ€ç»ˆæ‰§è¡Œçš„æ˜¯ Node.js å‘½ä»¤</strong></p>
<ul>
<li><code>npm</code> â†’ <code>node node_modules/.bin/unh</code></li>
<li><code>unh</code> â†’ <code>node node_modules/.bin/vite</code></li>
</ul>
</li>
<li>
<p>âœ… <strong>ä¼šè‡ªåŠ¨è¯»å–æŒ‡å®šæ–‡ä»¶</strong></p>
<ul>
<li>Vite è‡ªåŠ¨æŸ¥æ‰¾ <code>vite.config.ts</code></li>
<li>ä½¿ç”¨ Node.js çš„ <code>fs</code> æ¨¡å—è¯»å–</li>
<li>ä½¿ç”¨ Node.js çš„æ¨¡å—ç³»ç»ŸåŠ è½½</li>
</ul>
</li>
<li>
<p>âœ… <strong>vite.config.ts æ˜¯ Node.js æ¨¡å—</strong></p>
<ul>
<li>ä¼šè¢« Node.js æ‰§è¡Œ</li>
<li>å¯ä»¥ä½¿ç”¨æ‰€æœ‰ Node.js API</li>
<li>åœ¨ Node.js ç¯å¢ƒä¸­è¿è¡Œ</li>
</ul>
</li>
<li>
<p>âœ… <strong>æ˜¯ä¸€å±‚å°è£…</strong></p>
<ul>
<li><code>npm</code> å°è£…äº†å‘½ä»¤æ‰§è¡Œ</li>
<li><code>unh</code> å°è£…äº† uni-app å¯åŠ¨æµç¨‹</li>
<li><code>vite</code> å°è£…äº†æ„å»ºå·¥å…·</li>
<li><code>vite.config.ts</code> æ˜¯é…ç½®å±‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-21">å…³é”®ç‚¹</h4>
<ul>
<li><strong>æ‰§è¡Œç¯å¢ƒ</strong>ï¼šNode.js</li>
<li><strong>é…ç½®æ–‡ä»¶</strong>ï¼šNode.js æ¨¡å—</li>
<li><strong>æ–‡ä»¶è¯»å–</strong>ï¼šNode.js <code>fs</code> æ¨¡å—</li>
<li><strong>è‡ªåŠ¨æŸ¥æ‰¾</strong>ï¼šVite è‡ªåŠ¨æŸ¥æ‰¾é…ç½®æ–‡ä»¶</li>
<li><strong>æ‰§è¡Œæ—¶æœº</strong>ï¼šæ¯æ¬¡å¯åŠ¨æ—¶æ‰§è¡Œ</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»â€œHello, World!â€è¯´èµ·ï¼šç†è§£ç¨‹åºçš„åŸºæœ¬ç»“æ„]]></title>    <link>https://juejin.cn/post/7571427088072376346</link>    <guid>https://juejin.cn/post/7571427088072376346</guid>    <pubDate>2025-11-12T07:46:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571427088072376346" data-draft-id="7571416207972401202" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»â€œHello, World!â€è¯´èµ·ï¼šç†è§£ç¨‹åºçš„åŸºæœ¬ç»“æ„"/> <meta itemprop="keywords" content="C++"/> <meta itemprop="datePublished" content="2025-11-12T07:46:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LexieLexie"/> <meta itemprop="url" content="https://juejin.cn/user/2687622703496200"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»â€œHello, World!â€è¯´èµ·ï¼šç†è§£ç¨‹åºçš„åŸºæœ¬ç»“æ„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2687622703496200/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LexieLexie
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T07:46:33.000Z" title="Wed Nov 12 2025 07:46:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç¼–ç¨‹ä¸–ç•Œï¼Œå­¦ä¹ ä¸€é—¨æ–°è¯­è¨€çš„ç¬¬ä¸€ä¸ªä»ªå¼ï¼Œå°±æ˜¯ç¼–å†™ä¸€ä¸ªåœ¨å±å¹•ä¸Šæ˜¾ç¤ºâ€œHello, World!â€çš„ç¨‹åºã€‚è¿™ä¸ªä¼ ç»Ÿå§‹äºCè¯­è¨€ï¼Œè¢«C++å®Œç¾ç»§æ‰¿ã€‚å®ƒç®€å•åˆ°æè‡´ï¼Œå´åŒ…å«äº†ç¨‹åºæœ€åŸºæœ¬çš„ç»“æ„ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±ä»è¿™ä¸ªç¥åœ£çš„ä»ªå¼å¼€å§‹ï¼Œäº²æ‰‹åˆ›å»ºå¹¶ç†è§£ä½ çš„ç¬¬ä¸€ä¸ªC++ç¨‹åºã€‚</p>
<h3 data-id="heading-0">ä½ çš„ç¬¬ä¸€è¡ŒC++ä»£ç </h3>
<p>åœ¨C++ç¼–ç¨‹ä¸­ï¼Œç»å…¸çš„"Hello, World!"ç¨‹åºæ˜¯åˆå­¦è€…å…¥é—¨çš„ç¬¬ä¸€æ­¥ã€‚å®ƒå±•ç¤ºäº†åŸºæœ¬çš„è¾“å‡ºåŠŸèƒ½ã€‚ä»¥ä¸‹æ˜¯å®Œæ•´çš„ä»£ç ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    std::cout &lt;&lt; <span class="hljs-string">"Hello, World!"</span> &lt;&lt; std::endl;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>è¦è¿è¡Œä¸Šè¿°ä»£ç ï¼Œéœ€è¦æ­å»ºä¸€ä¸ªç¼–ç¨‹ç¯å¢ƒã€‚è¿™é‡Œæä¾›ä¸¤ç§ç®€ä¾¿é€‰é¡¹</p>
<ol>
<li>
<p><strong>ä½¿ç”¨åœ¨çº¿ç¼–è¯‘å™¨ï¼ˆå¿«é€Ÿä½“éªŒï¼‰</strong></p>
<p>æ— éœ€æœ¬åœ°é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨åœ¨çº¿ç¼–è¯‘å™¨å·¥å…·ã€‚</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwandbox.org%2F" title="https://wandbox.org/" target="_blank" ref="nofollow noopener noreferrer">Wandbox</a>ï¼šæ”¯æŒå¤šç§ç¼–è¯‘å™¨ç‰ˆæœ¬ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgodbolt.org%2F" title="https://godbolt.org/" target="_blank" ref="nofollow noopener noreferrer">Compiler Explorer</a>ï¼šä¸“æ³¨äºä»£ç ç¼–è¯‘å’Œä¼˜åŒ–ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä½¿ç”¨æœ¬åœ°IDEï¼ˆæ¨èï¼‰</strong></p>
<p>å¯¹äºé•¿æœŸå­¦ä¹ æˆ–å¼€å‘ï¼Œå»ºè®®å®‰è£…æœ¬åœ°é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰ã€‚</p>
<ul>
<li><strong>Visual Studio (Windows)</strong> ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fvisualstudio.microsoft.com%2F" title="https://visualstudio.microsoft.com/" target="_blank" ref="nofollow noopener noreferrer">Visual Studio å®˜æ–¹å®‰è£…é¡µé¢</a>ã€‚</li>
<li><strong>VS Code</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.visualstudio.com%2F" title="https://code.visualstudio.com/" target="_blank" ref="nofollow noopener noreferrer">VS Code å®˜æ–¹ä¸‹è½½</a>ã€‚</li>
<li><strong>CLion</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jetbrains.com%2Fclion%2F" title="https://www.jetbrains.com/clion/" target="_blank" ref="nofollow noopener noreferrer">CLion å®˜æ–¹é¡µé¢</a>ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-1">é€è¡Œè§£æ„â€œHello, World!â€ç¨‹åº</h3>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
</code></pre>
<p><code>#include</code>æ˜¯ä¸€ä¸ª<strong>é¢„å¤„ç†å™¨æŒ‡ä»¤</strong>ï¼Œå®ƒåœ¨ç¼–è¯‘å‰æ‰§è¡Œã€‚<code>&lt;iostream&gt;</code>æ˜¯ä¸€ä¸ª<strong>å¤´æ–‡ä»¶</strong>ï¼Œå®ƒåŒ…å«äº†è¿›è¡Œæ ‡å‡†è¾“å…¥è¾“å‡ºï¼ˆInput/Outputï¼‰æ“ä½œæ‰€éœ€çš„å£°æ˜ã€‚<code>#include</code>å°±åƒæ˜¯åœ¨å†™æ–‡ç« å‰å‘Šè¯‰ç¼–è¾‘â€œæˆ‘è¦å¼•ç”¨ã€Šè¯å…¸ã€‹é‡Œçš„è¯â€ï¼Œè€Œ<code>&lt;iostream&gt;</code>å°±æ˜¯é‚£æœ¬ã€Šè¯å…¸ã€‹ï¼Œé‡Œé¢æœ‰<code>cout</code>å’Œ<code>endl</code>è¿™äº›è¯çš„â€œå®šä¹‰â€ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">main</span>()</span> {}
</code></pre>
<p>è¿™æ˜¯ç¨‹åºçš„<strong>ä¸»å‡½æ•°</strong>ã€‚æ¯ä¸€ä¸ªC++ç¨‹åº<strong>æœ‰ä¸”åªæœ‰ä¸€ä¸ª</strong><code>main</code>å‡½æ•°ã€‚å®ƒæ˜¯ç¨‹åºå¼€å§‹å’Œç»“æŸçš„åœ°æ–¹ã€‚æ“ä½œç³»ç»Ÿä¼šä»è¿™é‡Œå¼€å§‹æ‰§è¡Œä½ çš„ä»£ç ã€‚</p>
<ul>
<li><code>int</code>Â è¡¨ç¤ºè¿™ä¸ªå‡½æ•°æ‰§è¡Œå®Œæ¯•åä¼šè¿”å›ä¸€ä¸ª<strong>æ•´æ•°</strong>ã€‚</li>
<li><code>main</code>Â æ˜¯å‡½æ•°çš„åå­—ï¼Œå›ºå®šå†™æ³•ã€‚</li>
<li><code>()</code>Â é‡Œé¢å¯ä»¥æ”¾ç½®ä¼ é€’ç»™å‡½æ•°çš„ä¿¡æ¯ï¼ˆå‚æ•°ï¼‰ï¼Œè¿™é‡Œä¸ºç©ºã€‚</li>
<li><code>{}</code>Â èŠ±æ‹¬å·å†…æ˜¯<strong>å‡½æ•°ä½“</strong>ï¼Œé‡Œé¢åŒ…å«äº†æ‰€æœ‰è¿™ä¸ªå‡½æ•°è¦æ‰§è¡Œçš„è¯­å¥ã€‚</li>
</ul>
<pre><code class="hljs language-c" lang="c"><span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Hello, World!"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
</code></pre>
<p>è¿™æ˜¯ä¸€æ¡<strong>è¯­å¥</strong>ï¼Œä»¥åˆ†å·<code>;</code>ç»“å°¾ã€‚</p>
<ul>
<li><code>std::cout</code>ï¼š<code>std</code>æ˜¯ä¸€ä¸ª<strong>å‘½åç©ºé—´</strong>ï¼Œé˜²æ­¢åå­—å†²çªã€‚<code>cout</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»£è¡¨â€œæ ‡å‡†å­—ç¬¦è¾“å‡ºâ€ï¼Œé€šå¸¸æŒ‡å±å¹•ã€‚å¯ä»¥è¯»ä½œâ€œsee-outâ€ã€‚</li>
<li><code>&lt;&lt;</code>ï¼š<strong>è¾“å‡ºæ“ä½œç¬¦</strong>ã€‚å®ƒæŠŠå®ƒå³è¾¹çš„æ•°æ®â€œæµå‘â€å·¦è¾¹çš„<code>cout</code>ã€‚å¯ä»¥é“¾å¼ä½¿ç”¨ã€‚</li>
<li><code>"Hello, World!"</code>ï¼šè¿™æ˜¯ä¸€ä¸ª<strong>å­—ç¬¦ä¸²å­—é¢å€¼</strong>ï¼ŒåŒå¼•å·å†…çš„å†…å®¹ä¼šè¢«åŸæ ·è¾“å‡ºã€‚</li>
<li><code>std::endl</code>ï¼šè¿™æ˜¯ä¸€ä¸ª<strong>æ“çºµå™¨</strong>ï¼Œå®ƒæœ‰ä¸¤ä¸ªä½œç”¨ï¼š1. æ¢è¡Œï¼›2.Â <strong>åˆ·æ–°è¾“å‡ºç¼“å†²åŒº</strong>ï¼Œç¡®ä¿å†…å®¹ç«‹åˆ»æ˜¾ç¤ºå‡ºæ¥ã€‚ä¹Ÿå¯ä»¥ç”¨<code>\n</code>æ¥åªå®ç°æ¢è¡Œã€‚</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
</code></pre>
<p><code>return</code>è¯­å¥ç”¨äºç»“æŸå‡½æ•°ã€‚<code>return 0;</code>è¡¨ç¤ºä¸»å‡½æ•°æ­£å¸¸ç»“æŸï¼Œå¹¶å‘æ“ä½œç³»ç»Ÿè¿”å›ä¸€ä¸ªå€¼<code>0</code>ï¼Œé€šå¸¸è¡¨ç¤ºâ€œç¨‹åºæˆåŠŸè¿è¡Œâ€ã€‚é0å€¼é€šå¸¸è¡¨ç¤ºå„ç§é”™è¯¯ã€‚</p>
<h3 data-id="heading-2"><strong>è®©ç¨‹åºâ€œè·‘èµ·æ¥â€â€”â€”ç¼–è¯‘ä¸è¿è¡Œ</strong></h3>
<h4 data-id="heading-3"><strong>ä»€ä¹ˆæ˜¯ç¼–è¯‘ï¼Ÿ</strong></h4>
<p>ä½ ç”¨C++å†™çš„ä»£ç ï¼ˆ<strong>æºä»£ç </strong>ï¼Œäººç±»å¯è¯»ï¼‰è®¡ç®—æœºCPUæ˜¯çœ‹ä¸æ‡‚çš„ã€‚CPUåªæ‡‚<strong>æœºå™¨ç </strong>ï¼ˆäºŒè¿›åˆ¶æŒ‡ä»¤ï¼‰ã€‚<strong>ç¼–è¯‘å™¨</strong>ï¼ˆå¦‚g++, clang++ï¼‰çš„ä½œç”¨å°±æ˜¯å……å½“â€œç¿»è¯‘å®˜â€ï¼ŒæŠŠæ•´ä¸ªæºä»£ç ä¸€æ¬¡æ€§ç¿»è¯‘æˆæœºå™¨ç ï¼Œç”Ÿæˆä¸€ä¸ª<strong>å¯æ‰§è¡Œæ–‡ä»¶</strong>ï¼ˆå¦‚Windowsä¸‹çš„.exeæ–‡ä»¶ï¼‰ã€‚</p>
<p>å°±å¥½åƒï¼Œä½ å†™äº†ä¸€ä»½ä¸­æ–‡èœè°±ï¼ˆæºä»£ç ï¼‰ï¼Œç¼–è¯‘å™¨æ˜¯ä¸ªç²¾é€šä¸­æ–‡å’Œæœºå™¨è¯­è¨€çš„å¨å¸ˆï¼Œä»–çœ‹å®Œæ•´ä»½èœè°±åï¼Œåšå‡ºä¸€ç›˜èœï¼ˆå¯æ‰§è¡Œæ–‡ä»¶ï¼‰ã€‚å®¢äººï¼ˆCPUï¼‰å¯ä»¥ç›´æ¥åƒè¿™ç›˜èœï¼Œä½†çœ‹ä¸æ‡‚ä¸­æ–‡èœè°±ã€‚</p>
<h4 data-id="heading-4"><strong>åœ¨IDEä¸­ç‚¹å‡»â€œè¿è¡Œâ€æŒ‰é’®çš„èƒŒå</strong></h4>
<p>å½“ä½ ç‚¹å‡»â€œè¿è¡Œâ€æ—¶ï¼ŒIDEé€šå¸¸å¸®ä½ åšäº†ä¸‰ä»¶äº‹ï¼š</p>
<ol>
<li><strong>ç¼–è¯‘</strong>ï¼šå°†ä½ çš„<code>.cpp</code>æ–‡ä»¶ç¼–è¯‘æˆ<strong>ç›®æ ‡æ–‡ä»¶</strong>ã€‚</li>
<li><strong>é“¾æ¥</strong>ï¼šå°†ä½ çš„ç›®æ ‡æ–‡ä»¶å’Œç¨‹åºç”¨åˆ°çš„åº“ï¼ˆå¦‚C++æ ‡å‡†åº“ï¼‰â€œé“¾æ¥â€åœ¨ä¸€èµ·ï¼Œæ‰“åŒ…æˆæœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚æˆ‘ä»¬çš„<code>cout</code>å’Œ<code>endl</code>å°±æ˜¯åœ¨è¿™ä¸€æ­¥è¢«æ‰¾åˆ°å¹¶å…³è”çš„ã€‚</li>
<li><strong>æ‰§è¡Œ</strong>ï¼šæ“ä½œç³»ç»ŸåŠ è½½å¹¶è¿è¡Œè¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚</li>
</ol>
<h4 data-id="heading-5"><strong>è®¤è¯†é”™è¯¯</strong></h4>
<ul>
<li><strong>ç¼–è¯‘é”™è¯¯</strong>ï¼šä»£ç ä¸ç¬¦åˆC++è¯­æ³•è§„åˆ™ï¼Œç¼–è¯‘å™¨â€œç¿»è¯‘ä¸äº†â€ã€‚æ¯”å¦‚æ¼å†™åˆ†å·<code>;</code>ï¼Œæ‹¼é”™å…³é”®å­—ï¼ˆ<code>int</code>å†™æˆ<code>ine</code>ï¼‰ã€‚ç¼–è¯‘å™¨ä¼šæŠ¥é”™å¹¶åœæ­¢ï¼Œä¸ä¼šç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚</li>
<li><strong>è¿è¡Œæ—¶é”™è¯¯</strong>ï¼šç¨‹åºè¯­æ³•æ­£ç¡®ï¼Œèƒ½ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œä½†åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å‡ºé”™ã€‚æ¯”å¦‚æˆ‘ä»¬åé¢ä¼šå­¦åˆ°çš„é™¤ä»¥é›¶ã€è®¿é—®æ— æ•ˆå†…å­˜ç­‰ã€‚</li>
</ul>
<h3 data-id="heading-6">å°ç»“</h3>
<ol>
<li><strong>åŸºæœ¬éª¨æ¶</strong>ï¼šä¸€ä¸ªæœ€åŸºæœ¬çš„C++ç¨‹åºéœ€è¦<code>#include</code>æŒ‡ä»¤æ¥å¼•å…¥åŠŸèƒ½ï¼Œå’Œä¸€ä¸ª<code>int main() {}</code>å‡½æ•°ä½œä¸ºå…¥å£ã€‚</li>
<li><strong>è¾“å…¥è¾“å‡º</strong>ï¼šæˆ‘ä»¬ä½¿ç”¨äº†<code>std::cout</code>è¿›è¡Œè¾“å‡ºï¼Œè¿™æ˜¯ä¸ç¨‹åºäº¤äº’çš„èµ·ç‚¹ã€‚</li>
<li><strong>ç¼–è¯‘æ€æƒ³</strong>ï¼šç†è§£äº†æºä»£ç éœ€è¦ç»è¿‡ç¼–è¯‘é“¾æ¥æ‰èƒ½å˜æˆå¯æ‰§è¡Œçš„ç¨‹åºã€‚</li>
</ol>
<p>åœ¨ä»¥åçš„å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œè¦è®°ä½ä½ ä¸ä»…åªæ˜¯â€œè¿è¡Œâ€ä¸€ä¸ªç¨‹åºï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œ<strong>ç†è§£</strong>å®ƒçš„æ¯ä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸”<strong>å°è¯•æ”¹å˜</strong>å®ƒã€‚ä»çœ‹æ‡‚ï¼Œåˆ°è´¨ç–‘ï¼Œå†åˆ°åŠ¨æ‰‹éªŒè¯å’Œæ”¹å˜ï¼Œè¿™æ­£æ˜¯ç¨‹åºå‘˜å·¥ä½œçš„æ ¸å¿ƒå¾ªç¯ã€‚ä¹Ÿè®¸è¿™ä¸ªèµ·ç‚¹å¾ˆç®€å•ï¼Œä½†ä¸‡ä¸ˆé«˜æ¥¼å¹³åœ°èµ·ï¼Œä½ å·²ç»æ‰“ä¸‹äº†ç¬¬ä¸€å—åšå®çš„åŸºçŸ³ã€‚åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†è®©ç¨‹åºå˜å¾—æ›´åŠ â€œèªæ˜â€ï¼Œå¼€å§‹å­¦ä¹ å¦‚ä½•ä½¿ç”¨å˜é‡æ¥å­˜å‚¨å’Œæ“ä½œæ•°æ®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaåŸºç¡€ ï¼ˆä¸ƒï¼šç½‘ç»œç¼–ç¨‹ã€HTTPå®¢æˆ·ç«¯å¼€å‘ï¼‰ï¼ˆå¾…å®Œå–„ï¼‰]]></title>    <link>https://juejin.cn/post/7571636682694311976</link>    <guid>https://juejin.cn/post/7571636682694311976</guid>    <pubDate>2025-11-12T07:52:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571636682694311976" data-draft-id="7571404524792315939" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaåŸºç¡€ ï¼ˆä¸ƒï¼šç½‘ç»œç¼–ç¨‹ã€HTTPå®¢æˆ·ç«¯å¼€å‘ï¼‰ï¼ˆå¾…å®Œå–„ï¼‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-12T07:52:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çˆ±åˆ†äº«çš„é±¼é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/3901536646733133"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaåŸºç¡€ ï¼ˆä¸ƒï¼šç½‘ç»œç¼–ç¨‹ã€HTTPå®¢æˆ·ç«¯å¼€å‘ï¼‰ï¼ˆå¾…å®Œå–„ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3901536646733133/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çˆ±åˆ†äº«çš„é±¼é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T07:52:35.000Z" title="Wed Nov 12 2025 07:52:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><blockquote>
<p>æœ¬æ–‡å€Ÿé‰´è¿™ç¯‡æ–‡ç« <a href="https://juejin.cn/post/6961965457976852511#" target="_blank" title="https://juejin.cn/post/6961965457976852511#">juejin.cn/post/696196â€¦</a> Javaä¹‹ç½‘ç»œç¼–ç¨‹</p>
</blockquote>
<h2 data-id="heading-0">æ¦‚è¿°</h2>
<p><strong>è®¡ç®—æœºç½‘ç»œ</strong>æ˜¯æŠŠä¸åŒåœ°ç†åŒºåŸŸçš„è®¡ç®—æœºç”¨é€šä¿¡çº¿è·¯è¿æ¥æˆä¸€ä¸ªé€šä¿¡ç½‘æ ¼ç³»ç»Ÿï¼Œä»è€Œä½¿çš„è®¡ç®—æœºå¯ä»¥æ–¹ä¾¿åœ°ä¼ é€’ä¿¡æ¯ã€‚<strong>ç½‘ç»œç¼–ç¨‹</strong>æ˜¯æŒ‡ç¼–å†™ç¨‹åºä½¿è®¡ç®—æœºèƒ½å¤Ÿé€šè¿‡ç½‘ç»œè¿›è¡Œé€šä¿¡çš„æŠ€æœ¯ã€‚å®ƒæ¶‰åŠåœ¨ä¸åŒè®¾å¤‡é—´å»ºç«‹è¿æ¥ã€ä¼ è¾“æ•°æ®ä»¥åŠå¤„ç†ç½‘ç»œç›¸å…³çš„æ“ä½œã€‚
Javaç½‘ç»œç¼–ç¨‹æ˜¯æŒ‡ä½¿ç”¨Javaè¯­è¨€å®ç°è®¡ç®—æœºä¹‹é—´é€šè¿‡ç½‘ç»œè¿›è¡Œé€šä¿¡çš„æŠ€æœ¯ã€‚å®ƒä¸»è¦è§£å†³ä¸¤ä¸ªæ ¸å¿ƒé—®é¢˜ï¼šå¦‚ä½•å®šä½ç½‘ç»œä¸­çš„ä¸»æœºï¼Œä»¥åŠå¦‚ä½•å¯é é«˜æ•ˆåœ°ä¼ è¾“æ•°æ®ã€‚</p>
<h3 data-id="heading-1">æ ¸å¿ƒæ¦‚å¿µ</h3>
<h4 data-id="heading-2">IPåœ°å€</h4>
<ul>
<li><strong>å®šä¹‰</strong>ï¼šInternet Protocol Addressï¼Œæ˜¯ç½‘ç»œä¸­è®¾å¤‡çš„å”¯ä¸€æ ‡è¯†ç¬¦</li>
<li><strong>IPv4</strong>ï¼š32ä½åœ°å€ï¼Œé€šå¸¸è¡¨ç¤ºä¸ºå››ä¸ªåè¿›åˆ¶æ•°ï¼ˆå¦‚ <code>192.168.1.1</code>ï¼‰</li>
<li><strong>IPv6</strong>ï¼š128ä½åœ°å€ï¼Œç”¨å…«ç»„åå…­è¿›åˆ¶æ•°è¡¨ç¤ºï¼ˆå¦‚ <code>2001:0db8:85a3:0000:0000:8a2e:0370:7334</code>ï¼‰</li>
</ul>
<h4 data-id="heading-3">ç«¯å£</h4>
<ul>
<li><strong>å®šä¹‰</strong>ï¼šç”¨äºæ ‡è¯†è®¾å¤‡ä¸Šç‰¹å®šæœåŠ¡æˆ–åº”ç”¨ç¨‹åºçš„16ä½æ•°å­—ï¼Œåœ¨ä¸åŒç«¯å£å¯ä»¥è¿è¡Œè®¡ç®—æœºçš„ä¸åŒæœåŠ¡</li>
<li><strong>å–å€¼èŒƒå›´</strong>ï¼š0-65535</li>
<li><strong>åˆ†ç±»</strong>ï¼š
<ul>
<li><code>çŸ¥åç«¯å£</code>ï¼š0-1023ï¼ˆå¦‚HTTPçš„80ç«¯å£ï¼ŒHTTPSçš„443ç«¯å£ï¼‰</li>
<li><code>æ³¨å†Œç«¯å£</code>ï¼š1024-49151</li>
<li><code>åŠ¨æ€/ç§æœ‰ç«¯å£</code>ï¼š49152-65535</li>
</ul>
</li>
</ul>
<h4 data-id="heading-4">åŸŸå</h4>
<ul>
<li><strong>å®šä¹‰</strong>ï¼šä¾¿äºäººç±»è®°å¿†çš„ç½‘ç«™åœ°å€ï¼ˆå¦‚ <code>www.example.com</code>ï¼‰</li>
<li><strong>DNSè§£æ</strong>ï¼šé€šè¿‡åŸŸåç³»ç»Ÿå°†åŸŸåè½¬æ¢ä¸ºå¯¹åº”çš„IPåœ°å€</li>
<li><strong>å±‚çº§ç»“æ„</strong>ï¼šä»å³åˆ°å·¦åˆ†åˆ«ä¸ºé¡¶çº§åŸŸåã€äºŒçº§åŸŸåã€å­åŸŸåç­‰</li>
</ul>
<h4 data-id="heading-5">åè®®</h4>
<ul>
<li><strong>TCP</strong>ï¼šä¼ è¾“æ§åˆ¶åè®®ï¼Œé¢å‘è¿æ¥ï¼Œæä¾›å¯é æ•°æ®ä¼ è¾“</li>
<li><strong>UDP</strong>ï¼šç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼Œæ— è¿æ¥ï¼Œä¼ è¾“é€Ÿåº¦å¿«ä½†ä¸ä¿è¯å¯é æ€§</li>
<li><strong>HTTP/HTTPS</strong>ï¼šåº”ç”¨å±‚åè®®ï¼Œç”¨äºWebé€šä¿¡</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47c23d7d8b7f499ea4b0e4834ce18869~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5YiG5Lqr55qE6bG86bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763538754&amp;x-signature=KiaSTkEFhgT6rvmnRmwEhdHZ3Dw%3D" alt="image.png" loading="lazy"/>
å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæœ‰OSIå’ŒTCP/IPä¸¤ç§æ¨¡å‹åˆ†å±‚ç†è§£ç½‘ç»œé€šä¿¡ã€‚è™½ç„¶ OSI æ¨¡å‹ç†è®ºå®Œæ•´ï¼Œä½†å®é™…ç½‘ç»œç³»ç»Ÿå¤šé‡‡ç”¨ TCP/IP æ¨¡å‹ã€‚ç›¸æ¯” OSI çš„ 7 å±‚ï¼ŒTCP/IP çš„ 4 å±‚æ›´è´´è¿‘å®é™…ç½‘ç»œå®ç°ã€‚äº’è”ç½‘æ ‡å‡†ä¹ŸåŸºäº TCP/IPï¼Œå‡ ä¹æ‰€æœ‰ç°ä»£ç½‘ç»œè®¾å¤‡éƒ½æ”¯æŒã€‚æ¯ä¸€å±‚éƒ½æœ‰å¯¹åº”çš„åè®®è§„èŒƒå¦‚ä½•é€šä¿¡ã€‚</p>
<ul>
<li><strong>å®é™…é€šä¿¡æµç¨‹ç¤ºä¾‹</strong>
ä»¥æµè§ˆå™¨è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.example.com" target="_blank" title="https://www.example.com" ref="nofollow noopener noreferrer">www.example.com</a> ä¸ºä¾‹ï¼š</li>
</ul>
<ol>
<li>åº”ç”¨å±‚ï¼šæµè§ˆå™¨å‘èµ· HTTPS è¯·æ±‚ï¼ˆåŸºäº HTTP + SSL/TLSï¼‰ã€‚</li>
<li>ä¼ è¾“å±‚ï¼šä½¿ç”¨ TCP åè®®å»ºç«‹å¯é è¿æ¥ï¼ˆä¸‰æ¬¡æ¡æ‰‹ï¼‰ã€‚</li>
<li>ç½‘ç»œå±‚ï¼šé€šè¿‡ IP åè®®è¿›è¡Œè·¯ç”±è½¬å‘ã€‚</li>
<li>æ•°æ®é“¾è·¯å±‚ï¼šåœ¨å±€åŸŸç½‘ä¸­é€šè¿‡ Ethernet ä¼ è¾“å¸§ã€‚</li>
<li>ç‰©ç†å±‚ï¼šé€šè¿‡ç½‘çº¿æˆ–æ— çº¿ä¿¡å·ä¼ è¾“æ¯”ç‰¹æµã€‚</li>
</ol>
<h2 data-id="heading-6">HTTP/HTTPS åè®®è¯¦è§£</h2>
<p>åœ¨ç¼–ç¨‹å¼€å‘ä¸­ï¼ŒHTTPï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰å’Œ HTTPSï¼ˆå®‰å…¨è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰æ˜¯åŸºç¡€ä¸”æ ¸å¿ƒçš„é€šä¿¡åè®®ï¼Œå¹¿æ³›åº”ç”¨äº Web å¼€å‘ã€API è®¾è®¡ã€ç§»åŠ¨åº”ç”¨ã€å¾®æœåŠ¡æ¶æ„ç­‰åœºæ™¯ã€‚åœ¨ç¼–ç¨‹å¼€å‘ä¸­ç»å¸¸ç”¨åˆ°ï¼Œå› æ­¤æ‹¿å‡ºæ¥ç€é‡è®²ä¸€ä¸‹ã€‚</p>
<h3 data-id="heading-7">1. åŸºæœ¬æ¦‚å¿µ</h3>
<ul>
<li><code>HTTP</code>ï¼ˆHyperText Transfer Protocolï¼‰ï¼šè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œç”¨äºåœ¨Webæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“æ•°æ®ã€‚</li>
<li><code>HTTPS</code>ï¼ˆHTTP Secureï¼‰ï¼šåŸºäº <code>SSL/TLS</code> åŠ å¯†çš„ <code>HTTP</code>ï¼Œæä¾›å®‰å…¨çš„æ•°æ®ä¼ è¾“ã€‚</li>
</ul>
<h3 data-id="heading-8">2. åè®®ç‰¹ç‚¹</h3>
<h4 data-id="heading-9">HTTP ç‰¹ç‚¹</h4>
<ul>
<li><strong>æ— çŠ¶æ€</strong>ï¼šæ¯æ¬¡è¯·æ±‚ç‹¬ç«‹ï¼ŒæœåŠ¡å™¨ä¸ä¿å­˜å®¢æˆ·ç«¯çŠ¶æ€ã€‚</li>
<li><strong>æ˜æ–‡ä¼ è¾“</strong>ï¼šæ•°æ®ä»¥æ˜æ–‡å½¢å¼å‘é€ï¼Œå­˜åœ¨å®‰å…¨é£é™©ã€‚</li>
<li><strong>åŸºäºè¯·æ±‚-å“åº”æ¨¡å‹</strong>ï¼šå®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡å™¨è¿”å›å“åº”ã€‚</li>
</ul>
<h4 data-id="heading-10">HTTPS ç‰¹ç‚¹</h4>
<ul>
<li><strong>åŠ å¯†ä¼ è¾“</strong>ï¼šä½¿ç”¨ <code>SSL/TLS</code> å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œé˜²æ­¢çªƒå¬å’Œç¯¡æ”¹ã€‚</li>
<li><strong>èº«ä»½éªŒè¯</strong>ï¼šé€šè¿‡æ•°å­—è¯ä¹¦éªŒè¯æœåŠ¡å™¨èº«ä»½ï¼Œé˜²æ­¢ä¸­é—´äººæ”»å‡»ã€‚</li>
<li><strong>å®Œæ•´æ€§ä¿æŠ¤</strong>ï¼šç¡®ä¿æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æœªè¢«ä¿®æ”¹ã€‚</li>
</ul>
<h3 data-id="heading-11">3. åè®®æµç¨‹</h3>
<h4 data-id="heading-12">HTTP æµç¨‹</h4>
<pre><code class="hljs language-text" lang="text">å®¢æˆ·ç«¯ â†’ è¯·æ±‚ â†’ æœåŠ¡å™¨ â†’ å“åº” â†’ å®¢æˆ·ç«¯
</code></pre>
<ul>
<li>å®¢æˆ·ç«¯å‘é€ <code>GET</code> æˆ– <code>POST</code> ç­‰è¯·æ±‚ã€‚</li>
<li>æœåŠ¡å™¨å¤„ç†è¯·æ±‚å¹¶è¿”å›çŠ¶æ€ç å’Œå“åº”ä½“ã€‚</li>
</ul>
<h4 data-id="heading-13">HTTPS æµç¨‹</h4>
<pre><code class="hljs language-text" lang="text">å®¢æˆ·ç«¯ â†’ TLS æ¡æ‰‹ â†’ åŠ å¯†é€šä¿¡ â†’ æœåŠ¡å™¨ â†’ åŠ å¯†å“åº” â†’ å®¢æˆ·ç«¯
</code></pre>
<ol>
<li><strong>TLS æ¡æ‰‹</strong>ï¼šå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨åå•†åŠ å¯†ç®—æ³•å’Œäº¤æ¢å¯†é’¥ã€‚</li>
<li><strong>åŠ å¯†é€šä¿¡</strong>ï¼šæ‰€æœ‰æ•°æ®å‡ä»¥åŠ å¯†å½¢å¼ä¼ è¾“ã€‚</li>
<li><strong>è§£å¯†å“åº”</strong>ï¼šå®¢æˆ·ç«¯è§£å¯†æ”¶åˆ°çš„æ•°æ®ã€‚</li>
</ol>
<h3 data-id="heading-14">4. å¸¸è§çŠ¶æ€ç </h3>









































<table><thead><tr><th>çŠ¶æ€ç </th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>200</code></td><td>OKï¼Œè¯·æ±‚æˆåŠŸ</td></tr><tr><td><code>301</code></td><td>æ°¸ä¹…é‡å®šå‘</td></tr><tr><td><code>302</code></td><td>ä¸´æ—¶é‡å®šå‘</td></tr><tr><td><code>400</code></td><td>å®¢æˆ·ç«¯é”™è¯¯</td></tr><tr><td><code>401</code></td><td>æœªæˆæƒ</td></tr><tr><td><code>403</code></td><td>ç¦æ­¢è®¿é—®</td></tr><tr><td><code>404</code></td><td>èµ„æºæœªæ‰¾åˆ°</td></tr><tr><td><code>500</code></td><td>æœåŠ¡å™¨å†…éƒ¨é”™è¯¯</td></tr></tbody></table>
<h3 data-id="heading-15">5. åœ¨ Java ä¸­çš„åº”ç”¨</h3>
<h4 data-id="heading-16">ä½¿ç”¨ <code>HttpURLConnection</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">URL</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(<span class="hljs-string">"https://api.example.com/data"</span>);
<span class="hljs-type">HttpURLConnection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> (HttpURLConnection) url.openConnection();
connection.setRequestMethod(<span class="hljs-string">"GET"</span>);
<span class="hljs-type">int</span> <span class="hljs-variable">responseCode</span> <span class="hljs-operator">=</span> connection.getResponseCode();
</code></pre>
<h4 data-id="heading-17">ä½¿ç”¨ <code>HttpClient</code>ï¼ˆJava 11+ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">HttpClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> HttpClient.newHttpClient();
<span class="hljs-type">HttpRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> HttpRequest.newBuilder()
    .uri(URI.create(<span class="hljs-string">"https://api.example.com/data"</span>))
    .build();
HttpResponse&lt;String&gt; response = client.send(request, 
        HttpResponse.BodyHandlers.ofString());
</code></pre>
<h3 data-id="heading-18">Javaç½‘ç»œç¼–ç¨‹åŸºç¡€</h3>
<p>Javaé€šè¿‡<code>java.net</code>åŒ…æä¾›ç½‘ç»œç¼–ç¨‹æ”¯æŒï¼ŒåŒ…æ‹¬åŸºäºæµçš„é€šä¿¡ï¼ˆå¦‚TCPï¼‰å’ŒåŸºäºæ•°æ®åŒ…çš„é€šä¿¡ï¼ˆå¦‚UDPï¼‰ã€‚ä¾‹å¦‚ï¼ŒTCP/IPåè®®æ˜¯äº’è”ç½‘é€šä¿¡çš„åŸºç¡€ï¼ŒJavaç±»åº“å°è£…äº†ç›¸å…³åŠŸèƒ½ï¼Œä¾¿äºå¼€å‘è€…å¿«é€Ÿå®ç°ç½‘ç»œåº”ç”¨ã€‚</p>
<h3 data-id="heading-19">Socketç¼–ç¨‹æ¨¡å‹</h3>
<ul>
<li><strong>ServerSocket</strong>: æœåŠ¡ç«¯ç›‘å¬å¥—æ¥å­—ï¼Œç”¨äºæ¥æ”¶å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚</li>
<li><strong>Socket</strong>: å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´çš„é€šä¿¡é€šé“</li>
<li><strong>InputStream/OutputStream</strong>: ç”¨äºæ•°æ®çš„è¯»å†™æ“ä½œ</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æœåŠ¡ç«¯ç¤ºä¾‹</span>
<span class="hljs-type">ServerSocket</span> <span class="hljs-variable">serverSocket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerSocket</span>(<span class="hljs-number">8080</span>);
<span class="hljs-type">Socket</span> <span class="hljs-variable">clientSocket</span> <span class="hljs-operator">=</span> serverSocket.accept();
<span class="hljs-type">BufferedReader</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(clientSocket.getInputStream()));
<span class="hljs-type">PrintWriter</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrintWriter</span>(clientSocket.getOutputStream(), <span class="hljs-literal">true</span>);

<span class="hljs-comment">// å®¢æˆ·ç«¯ç¤ºä¾‹</span>
<span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Socket</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">8080</span>);
<span class="hljs-type">PrintWriter</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrintWriter</span>(socket.getOutputStream(), <span class="hljs-literal">true</span>);
<span class="hljs-type">BufferedReader</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(socket.getInputStream()));
</code></pre>
<h3 data-id="heading-20">TCP vs UDP</h3>
<ul>
<li><strong>TCP</strong>: é¢å‘è¿æ¥ã€å¯é ä¼ è¾“ã€æœ‰åºäº¤ä»˜</li>
<li><strong>UDP</strong>: æ— è¿æ¥ã€ä¸å¯é ä¼ è¾“ã€é«˜æ•ˆå¿«é€Ÿ</li>
</ul>
<h2 data-id="heading-21">2. HTTPå®¢æˆ·ç«¯å®ç°æ–¹å¼</h2>
<h3 data-id="heading-22">2.1 åŸç”ŸHttpURLConnection</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">URL</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(<span class="hljs-string">"http://example.com/api"</span>);
<span class="hljs-type">HttpURLConnection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> (HttpURLConnection) url.openConnection();
connection.setRequestMethod(<span class="hljs-string">"GET"</span>);
connection.setRequestProperty(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json"</span>);

<span class="hljs-type">int</span> <span class="hljs-variable">responseCode</span> <span class="hljs-operator">=</span> connection.getResponseCode();
<span class="hljs-type">BufferedReader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(connection.getInputStream()));
</code></pre>
<h3 data-id="heading-23">2.2 Apache HttpClient</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">CloseableHttpClient</span> <span class="hljs-variable">httpClient</span> <span class="hljs-operator">=</span> HttpClients.createDefault();
<span class="hljs-type">HttpGet</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpGet</span>(<span class="hljs-string">"http://example.com/api"</span>);
request.addHeader(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json"</span>);

<span class="hljs-type">CloseableHttpResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> httpClient.execute(request);
</code></pre>
<h3 data-id="heading-24">2.3 OkHttpå®¢æˆ·ç«¯</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">OkHttpClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OkHttpClient</span>();
<span class="hljs-type">Request</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Request</span>.Builder()
    .url(<span class="hljs-string">"http://example.com/api"</span>)
    .addHeader(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json"</span>)
    .build();

<span class="hljs-type">Response</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> client.newCall(request).execute();
</code></pre>
<h2 data-id="heading-25">3. ç°ä»£HTTPå®¢æˆ·ç«¯ç‰¹æ€§</h2>
<h3 data-id="heading-26">å¼‚æ­¥è¯·æ±‚å¤„ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// CompletableFutureå¼‚æ­¥å¤„ç†</span>
CompletableFuture.supplyAsync(() -&gt; {
    <span class="hljs-comment">// æ‰§è¡ŒHTTPè¯·æ±‚</span>
    <span class="hljs-keyword">return</span> httpClient.send(request, HttpResponse.BodyHandlers.ofString());
}).thenAccept(response -&gt; {
    <span class="hljs-comment">// å¤„ç†å“åº”</span>
});
</code></pre>
<h3 data-id="heading-27">è¿æ¥æ± ç®¡ç†</h3>
<ul>
<li><strong>è¿æ¥å¤ç”¨</strong>: å‡å°‘TCPè¿æ¥å»ºç«‹å¼€é”€</li>
<li><strong>è¶…æ—¶æ§åˆ¶</strong>: è¿æ¥è¶…æ—¶ã€è¯»å–è¶…æ—¶ã€å†™å…¥è¶…æ—¶</li>
<li><strong>SSL/TLSæ”¯æŒ</strong>: HTTPSå®‰å…¨é€šä¿¡</li>
</ul>
<h3 data-id="heading-28">è¯·æ±‚/å“åº”æ‹¦æˆªå™¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è¯·æ±‚æ‹¦æˆªå™¨ç¤ºä¾‹</span>
client.interceptors().add(chain -&gt; {
    <span class="hljs-type">Request</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> chain.request().newBuilder()
        .addHeader(<span class="hljs-string">"Authorization"</span>, <span class="hljs-string">"Bearer "</span> + token)
        .build();
    <span class="hljs-keyword">return</span> chain.proceed(request);
});
</code></pre>
<h2 data-id="heading-29">4. æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-30">å¼‚å¸¸å¤„ç†</h3>
<ul>
<li>ç½‘ç»œè¶…æ—¶å¼‚å¸¸å¤„ç†</li>
<li>è¿æ¥å¼‚å¸¸æ¢å¤æœºåˆ¶</li>
<li>é‡è¯•ç­–ç•¥å®ç°</li>
</ul>
<h3 data-id="heading-31">æ€§èƒ½ä¼˜åŒ–</h3>
<ul>
<li>åˆç†è®¾ç½®è¿æ¥æ± å¤§å°</li>
<li>å¯ç”¨GZIPå‹ç¼©</li>
<li>ä½¿ç”¨HTTP/2åè®®æå‡æ€§èƒ½</li>
</ul>
<h3 data-id="heading-32">å®‰å…¨è€ƒè™‘</h3>
<ul>
<li>HTTPSè¯ä¹¦éªŒè¯</li>
<li>æ•æ„Ÿä¿¡æ¯åŠ å¯†ä¼ è¾“</li>
<li>é˜²æ­¢SSRFæ”»å‡»</li>
</ul>
<h2 data-id="heading-33">5. å¸¸ç”¨æ¡†æ¶å¯¹æ¯”</h2>









































<table><thead><tr><th>ç‰¹æ€§</th><th>HttpURLConnection</th><th>Apache HttpClient</th><th>OkHttp</th></tr></thead><tbody><tr><td>è½»é‡çº§</td><td>âœ“</td><td>âœ—</td><td>âœ“</td></tr><tr><td>è¿æ¥æ± </td><td>âœ—</td><td>âœ“</td><td>âœ“</td></tr><tr><td>å¼‚æ­¥æ”¯æŒ</td><td>âœ—</td><td>âœ“</td><td>âœ“</td></tr><tr><td>HTTP/2</td><td>âœ—</td><td>âœ—</td><td>âœ“</td></tr><tr><td>å†…ç½®é‡è¯•</td><td>âœ—</td><td>âœ“</td><td>âœ“</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®æˆ˜ï½œé­”æ–¹æ–‡å¨±å…¨é“¾è·¯å¯è§‚æµ‹æ¶æ„è®¾è®¡ï¼šSLS+ARMS+Prometheus+äº‘æ‹¨æµ‹è½åœ°æŒ‡å—]]></title>    <link>https://juejin.cn/post/7571396053879930932</link>    <guid>https://juejin.cn/post/7571396053879930932</guid>    <pubDate>2025-11-12T05:39:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571396053879930932" data-draft-id="7571237750730539042" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®æˆ˜ï½œé­”æ–¹æ–‡å¨±å…¨é“¾è·¯å¯è§‚æµ‹æ¶æ„è®¾è®¡ï¼šSLS+ARMS+Prometheus+äº‘æ‹¨æµ‹è½åœ°æŒ‡å—"/> <meta itemprop="keywords" content="äº‘åŸç”Ÿ"/> <meta itemprop="datePublished" content="2025-11-12T05:39:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®æˆ˜ï½œé­”æ–¹æ–‡å¨±å…¨é“¾è·¯å¯è§‚æµ‹æ¶æ„è®¾è®¡ï¼šSLS+ARMS+Prometheus+äº‘æ‹¨æµ‹è½åœ°æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T05:39:10.000Z" title="Wed Nov 12 2025 05:39:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šæ›¹ç¿ã€ç™½ç™</p>
<blockquote>
<p>å®¢æˆ·è¯è¨€ï¼šâ€œé€šè¿‡æ„å»ºæ–°ä¸€ä»£å¯è§‚æµ‹æ€§ä½“ç³»ï¼Œæˆ‘ä»¬ä¸ä»…å®ç°äº†ç¨³å®šæ€§çš„è·¨è¶Šå¼æå‡ï¼Œæ›´é‡è¦çš„æ˜¯å»ºç«‹äº†ä»¥æ•°æ®é©±åŠ¨çš„è¿ç»´å†³ç­–æœºåˆ¶ã€‚è¿™å¥—å¯è§‚æµ‹ç³»ç»Ÿå·²ç»æˆä¸ºæˆ‘ä»¬äº§å“å’Œä¸šåŠ¡å‘å±•çš„æ•°å­—åŒ–åŸºçŸ³ï¼Œè¿›ä¸€æ­¥æå‡æ•°å­—åŒ–è´¨é‡å’Œæ•ˆç‡ã€‚â€</p>
</blockquote>
<h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>é¢å¯¹æ—¥ç›Šå¤æ‚çš„ä¸šåŠ¡ç³»ç»Ÿå’Œè¿«åœ¨çœ‰ç«çš„ç¨³å®šæ€§æŒ‘æˆ˜ï¼Œä¸€å®¶é¢†å…ˆçš„æ•°å­—åŒ–è§£å†³æ–¹æ¡ˆæä¾›å•†å¦‚ä½•é€šè¿‡å…¨é“¾è·¯å¯è§‚æµ‹æ€§å»ºè®¾å®ç°æ•…éšœå‘ç°æ•ˆç‡æå‡ 80%ï¼Œè¿ç»´æˆæœ¬é™ä½ 40% çš„çªç ´æ€§æˆæœã€‚</p>
<p>é­”æ–¹æ–‡å¨±é›†å›¢æ˜¯ä¸­å›½æ–°å…´çš„ä»¥ç°åœºä¸ºæ ¸å¿ƒçš„æ³›æ–‡åŒ–å¨±ä¹é›†å›¢ï¼Œå·²é€æ­¥æ„å»ºäº†é›†è‰ºäººåŸ¹å…»ã€æ¼”å‡ºä¸»åŠå’Œç¥¨åŠ¡å®£å‘ä¸ºä¸€ä½“çš„ç°åœºå¨±ä¹æ–‡åŒ–ç”Ÿæ€åœˆã€‚æˆ‘ä»¬è‡´åŠ›äºé€šè¿‡äº§ä¸šé“¾æ•´åˆï¼Œæ¨è¿›ä¸­å›½æ–‡åŒ–å¨±ä¹ä¸æ¼”è‰ºäº§ä¸šçš„å‘å±•ã€‚æœåŠ¡å…¨å›½ 3000 ä¸‡+æ¼”å‡ºè§‚ä¼—ï¼Œæ¼”å‡ºéå¸ƒå…¨å›½ 230+ ä¸ªåŸå¸‚ã€‚</p>
<h2 data-id="heading-1">ä¸šåŠ¡æŒ‘æˆ˜</h2>
<p>åœ¨é­”æ–¹ç ”å‘ä½“ç³»è¿ˆå‘é«˜å¯ç”¨ä¸é«˜æ•ˆèƒ½çš„æ¼”è¿›è¿‡ç¨‹ä¸­ï¼Œç¨³å®šæ€§ä¿éšœä¸å¯è§‚æµ‹æ€§å»ºè®¾æˆä¸ºå†³å®šç”¨æˆ·ä½“éªŒä¸ä¸šåŠ¡è¿ç»­æ€§çš„æ ¸å¿ƒå‘½è„‰ã€‚</p>
<p><strong>1-5-10 ç¨³å®šæ€§ä¿éšœç›®æ ‡çš„å®ç°</strong></p>
<p>é¢å¯¹è¡Œä¸šé¢†å…ˆçš„â€œ1-5-10â€ç¨³å®šæ€§ç›®æ ‡â€”â€”å³ 1 åˆ†é’Ÿå†…å‘ç°æ•…éšœã€5 åˆ†é’Ÿå®Œæˆæ ¹å› å®šä½ã€10 åˆ†é’Ÿå®ç°ä¸šåŠ¡æ¢å¤â€”â€”ç°æœ‰ç›‘æ§ä½“ç³»å´æš´éœ²å‡ºæ·±å±‚æ¬¡çš„ç³»ç»Ÿæ€§çŸ­æ¿ã€‚ç›‘æ§ç›²åŒºå¯¼è‡´å…³é”®é“¾è·¯å¼‚å¸¸æ— æ³•åŠæ—¶æ•è·ï¼Œè€Œå‘Šè­¦é£æš´åˆ™åœ¨æ•…éšœå‘ç”Ÿæ—¶æ·¹æ²¡æœ‰æ•ˆä¿¡æ¯ï¼Œä½¿å€¼ç­äººå‘˜é™·å…¥â€œå‘Šè­¦ç–²åŠ³â€ï¼›æ•…éšœå®šä½ä»é«˜åº¦ä¾èµ–äººå·¥ç»éªŒä¸è·¨ç³»ç»Ÿæ‰‹åŠ¨æ’æŸ¥ï¼Œé“¾è·¯è¿½è¸ªç¢ç‰‡åŒ–ã€æ—¥å¿—æŸ¥è¯¢åˆ†æ•£ï¼Œæå¤§æ‹–æ…¢å“åº”èŠ‚å¥ï¼›æ›´å…³é”®çš„æ˜¯ï¼Œå‘Šè­¦ä»è§¦å‘åˆ°å¤„ç†ç¼ºä¹é—­ç¯ç®¡ç†æœºåˆ¶ï¼Œè®¸å¤šé—®é¢˜æ­¢æ­¥äºâ€œå·²é€šçŸ¥â€ï¼Œæœªå½¢æˆå¤ç›˜ã€ä¼˜åŒ–ä¸é¢„é˜²çš„æ­£å‘åé¦ˆå¾ªç¯ï¼Œä½¿å¾—åŒç±»æ•…éšœåå¤å‘ç”Ÿã€‚</p>
<p><strong>å¯è§‚æµ‹æ€§å»ºè®¾çš„æŠ€æœ¯é€‰å‹å›°å¢ƒ</strong></p>
<p>åœ¨ç¥¨åŠ¡é”€å”®è¿™ç±»å…¸å‹é«˜å¹¶å‘åœºæ™¯ä¸­ï¼Œå°¤å…¶æ˜¯çƒ­é—¨æ¼”å‡ºæˆ–èµ›äº‹â€œæ”¾ç¥¨â€ç¬é—´å¸¦æ¥çš„æµé‡æ´ªå³°ï¼Œå¯¹ç³»ç»Ÿçš„å¯è§‚æµ‹èƒ½åŠ›æå‡ºäº†æé™è€ƒéªŒã€‚å½“å‰è‡ªå»ºå¯è§‚æµ‹ä½“ç³»å—é™äºç‰©ç†èµ„æºä¸é›†ç¾¤è§„æ¨¡ï¼Œåœ¨é¢å¯¹ç¬æ—¶ç™¾ä¸‡çº§ QPS å†²å‡»æ—¶ææ˜“å‡ºç°æ•°æ®é‡‡é›†ä¸¢åŒ…ã€å­˜å‚¨å»¶è¿Ÿã€æŸ¥è¯¢è¶…æ—¶ç­‰é—®é¢˜ï¼Œå¯¼è‡´å…³é”®è§‚æµ‹çª—å£ç¼ºå¤±ã€‚ä¸ºåº”å¯¹å³°å€¼è€Œè¿‡åº¦é¢„ç•™èµ„æºï¼Œåˆå¸¦æ¥é•¿æœŸèµ„æºé—²ç½®ä¸è¿ç»´æˆæœ¬é«˜ä¼çš„çŸ›ç›¾ã€‚æ›´æ·±å±‚æ¬¡çš„é—®é¢˜åœ¨äºï¼Œç°æœ‰å¯è§‚æµ‹ç»„ä»¶æŠ€æœ¯æ ˆå¤šå…ƒä¸”åˆ†æ•£ï¼Œæ—¥å¿—ã€æŒ‡æ ‡ã€é“¾è·¯æ•°æ®å„è‡ªä¸ºæ”¿ï¼Œç¼ºä¹ç»Ÿä¸€çš„æ•°æ®æ¨¡å‹ä¸å…³è”èƒ½åŠ›ï¼Œéš¾ä»¥æ„å»ºç«¯åˆ°ç«¯çš„å…¨é“¾è·¯è§†å›¾ï¼Œæ— æ³•çœŸæ­£æ”¯æ’‘å¿«é€Ÿå†³ç­–ã€‚</p>
<p><strong>åŸæœ‰ APM æ–¹æ¡ˆå›ºåŒ–æ‰©å±•æ”¯æŒæœ‰é™</strong></p>
<p>åŸæœ‰é‡‡ç”¨çš„ç‹¬ç«‹ APM æœåŠ¡å•†æ–¹æ¡ˆï¼Œè™½åœ¨åŸºç¡€ç›‘æ§å±‚é¢æä¾›äº†ä¸€å®šèƒ½åŠ›ï¼Œä½†å…¶å°é—­æ€§å·²æˆä¸ºä¸šåŠ¡æ•æ·å‘å±•çš„æ¡æ¢ã€‚ç³»ç»Ÿä»…æä¾›å›ºå®šç»´åº¦çš„æŠ¥è¡¨è¾“å‡ºä¸å—é™çš„APIæ¥å£ï¼Œè§‚æµ‹æ•°æ®æ— æ³•å¼€æ”¾ç»™ä¸šåŠ¡ä¾§è‡ªä¸»æ¶ˆè´¹ï¼Œå¯¼è‡´å„ä¸šåŠ¡å›¢é˜Ÿæ— æ³•åŸºäºè‡ªèº«åœºæ™¯è¿›è¡Œæ·±åº¦åˆ†æä¸å®šåˆ¶åŒ–æ´å¯Ÿï¼Œä¾‹å¦‚ç”¨æˆ·è´­ç¥¨è·¯å¾„è½¬åŒ–åˆ†æã€åŒºåŸŸçƒ­ç‚¹è¯†åˆ«ã€å¼‚å¸¸è¡Œä¸ºæ¨¡å¼æŒ–æ˜ç­‰éœ€æ±‚å‡éš¾ä»¥å®ç°ã€‚åŒæ—¶ï¼Œå•†ä¸šè½¯ä»¶çš„åˆšæ€§æˆæƒæ¨¡å¼ä¸é­”æ–¹å¿«é€Ÿè¿­ä»£ã€å¼¹æ€§ä¼¸ç¼©çš„ä¸šåŠ¡ç‰¹æ€§ä¸¥é‡ä¸åŒ¹é…ï¼Œèµ„æºæ‰©å±•å¸¸å—åˆ¶äº License é™åˆ¶ï¼Œæ—¢å½±å“ç³»ç»Ÿæ‰©å®¹æ•æ·æ€§ï¼Œä¹ŸåŠ å‰§äº†æˆæœ¬ç®¡æ§å‹åŠ›ã€‚</p>
<p><strong>ä¸Šè¿°æŒ‘æˆ˜äº¤ç»‡å åŠ ï¼Œä½¿å¾—ç¨³å®šæ€§ç›®æ ‡çš„è¾¾æˆä¸ä»…ä¾èµ–æµç¨‹ä¸æœºåˆ¶çš„ä¼˜åŒ–ï¼Œæ›´äºŸéœ€æ„å»ºä¸€å¥—å¼€æ”¾ã€å¼¹æ€§ã€æ™ºèƒ½çš„ä¸‹ä¸€ä»£å¯è§‚æµ‹æ€§å¹³å°ï¼Œå®ç°ä»è¢«åŠ¨å“åº”åˆ°ä¸»åŠ¨é¢„é˜²ã€ä»ç¢ç‰‡åŒ–ç›‘æ§åˆ°å…¨é“¾è·¯æ´å¯Ÿã€ä»å·¥å…·å­¤å²›åˆ°æ•°æ®é©±åŠ¨çš„å…¨é¢å‡çº§ã€‚</strong></p>
<h2 data-id="heading-2">é˜¿é‡Œäº‘è§£å†³æ–¹æ¡ˆï¼šæ„å»ºé¢å‘æœªæ¥çš„å¯è§‚æµ‹æ€§ä½“ç³»</h2>
<h3 data-id="heading-3">ï¼ˆä¸€ï¼‰åŸºäºé˜¿é‡Œäº‘å¯è§‚æµ‹äº§å“è¿›è¡Œå…¨æ™¯æ¶æ„è®¾è®¡</h3>
<p>åœ¨å…¨é¢æ¨è¿›é­”æ–¹ç ”å‘ä½“ç³»å¯è§‚æµ‹èƒ½åŠ›å»ºè®¾çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä»¥é˜¿é‡Œäº‘å¯è§‚æµ‹äº§å“ä¸ºæ ¸å¿ƒæ„å»ºäº†ä¸€ä½“åŒ–ã€å…¨æ ˆè¦†ç›–çš„å…¨æ™¯ç›‘æ§æ¶æ„ï¼Œè‡´åŠ›äºæ‰“é€šä»åŸºç¡€è®¾æ–½åˆ°ä¸šåŠ¡åº”ç”¨çš„å…¨é“¾è·¯è§‚æµ‹é—­ç¯ï¼ŒçœŸæ­£æ”¯æ’‘â€œ1-5-10â€ç¨³å®šæ€§ç›®æ ‡çš„è½åœ°ã€‚è¯¥æ¶æ„æ·±åº¦èåˆæ—¥å¿—ã€æŒ‡æ ‡ã€é“¾è·¯ä¸ç”¨æˆ·ä½“éªŒå››å¤§è§‚æµ‹ç»´åº¦ï¼Œå½¢æˆç»Ÿä¸€é‡‡é›†ã€é›†ä¸­åˆ†æã€æ™ºèƒ½å‘Šè­¦ä¸å¯è§†åŒ–æ´å¯Ÿçš„ä¸€ä½“åŒ–èƒ½åŠ›ã€‚</p>
<ul>
<li><strong>æ—¥å¿—æœåŠ¡(SLS)</strong>ï¼šè¦†ç›–ç¥¨åŠ¡å¹³å°ã€ç¥¨åŠ¡ç³»ç»Ÿç­‰ä¸šåŠ¡æ—¥å¿—æ•°æ®çš„å®æ—¶é‡‡é›†ã€æŸ¥è¯¢å’Œåˆ†æï¼›</li>
<li><strong>åº”ç”¨å®æ—¶ç›‘æ§æœåŠ¡(ARMS)</strong>ï¼šæä¾›ç«¯åˆ°ç«¯çš„å…¨é“¾è·¯è¿½è¸ªå’Œæ€§èƒ½å‰–æèƒ½åŠ›ï¼›</li>
<li><strong>å¯è§‚æµ‹ç›‘æ§ Prometheus ç‰ˆ</strong>ï¼šå®¹å™¨åŒ–ç¯å¢ƒã€äº‘èµ„æºçš„æŒ‡æ ‡é‡‡é›†å’Œç›‘æ§å‘Šè­¦ï¼›</li>
<li><strong>äº‘æ‹¨æµ‹</strong>ï¼šä»ç”¨æˆ·è§†è§’éªŒè¯æœåŠ¡å¯ç”¨æ€§å’Œæ€§èƒ½è¡¨ç°ã€‚</li>
</ul>
<p><strong>æ•´å¥—æ¶æ„ä¸ä»…å®ç°äº†æŠ€æœ¯æ ˆçš„ç»Ÿä¸€ä¸èƒ½åŠ›äº’è¡¥ï¼Œæ›´é€šè¿‡æ•°æ®è”åŠ¨æ‰“ç ´ä¼ ç»Ÿç›‘æ§å­¤å²›ï¼Œå½¢æˆâ€œæ„ŸçŸ¥â€”å®šä½â€”å“åº”â€çš„é—­ç¯é“¾æ¡ã€‚è¿™ä¸€å…¨æ™¯å¼å¯è§‚æµ‹ä½“ç³»ï¼Œæ­£æˆä¸ºé­”æ–¹ç³»ç»Ÿç¨³å®šè¿è¡Œä¸å¿«é€Ÿæ¢å¤çš„æ ¸å¿ƒæ”¯æ’‘åŠ›é‡ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/380af3b468f24a98b457db3aa25f2b66~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763530749&amp;x-signature=%2Bi7Tl2PORhqmpdbFQvpPmybIzmw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-4">ï¼ˆäºŒï¼‰å¯è§‚æµ‹æ€§ä½“ç³»å…³é”®èƒ½åŠ›å»ºè®¾</h3>
<h4 data-id="heading-5">1ï¼‰åŸºç¡€è¦†ç›–ï¼šå…¨é“¾è·¯è§‚æµ‹æ•°æ® + åˆ†å±‚æŒ‡æ ‡ä½“ç³» + åŸºç¡€å‘Šè­¦</h4>
<p>åœ¨é­”æ–¹ç ”å‘ä½“ç³»çš„å¯è§‚æµ‹æ€§å»ºè®¾ä¸­ï¼Œæˆ‘ä»¬ä»¥â€œçœ‹å¾—å…¨ã€åˆ¤å¾—å‡†ã€å“åº”å¿«â€ä¸ºç›®æ ‡ï¼Œæ„å»ºäº†è¦†ç›–å…¨é“¾è·¯è§‚æµ‹æ•°æ®ã€åˆ†å±‚æŒ‡æ ‡ä½“ç³»ä¸åŸºç¡€å‘Šè­¦èƒ½åŠ›çš„ä¸€ä½“åŒ–ç›‘æ§åŸºåº§ã€‚è¯¥ä½“ç³»ä¸ä»…å®ç°äº†ä»ä»£ç åˆ°ç”¨æˆ·ã€ä»åº”ç”¨åˆ°åŸºç¡€è®¾æ–½çš„æ·±åº¦è¦†ç›–ï¼Œæ›´é€šè¿‡ç»Ÿä¸€çš„æ•°æ®é‡‡é›†ä¸æ™ºèƒ½çš„å‘Šè­¦ååŒæœºåˆ¶ï¼Œä¸ºç³»ç»Ÿç¨³å®šæ€§ä¿éšœæä¾›äº†åšå®æ”¯æ’‘ã€‚</p>
<p><strong>1. åœ¨æ•°æ®é‡‡é›†å±‚é¢ï¼Œæˆ‘ä»¬å»ºç«‹äº†æ ‡å‡†åŒ–ã€å¯æ‰©å±•çš„ç»Ÿä¸€é‡‡é›†æ¶æ„ã€‚</strong></p>
<ul>
<li>åŸºäº Loongcollector å®ç°å¯¹å®¹å™¨åŒ–ç¯å¢ƒä¸­æ ¸å¿ƒåº”ç”¨æ—¥å¿—çš„é›†ä¸­å¼é‡‡é›†ï¼Œç¡®ä¿ä¸šåŠ¡æ—¥å¿—ä¸é—æ¼ã€ä¸å»¶è¿Ÿï¼Œå¹¶å…·å¤‡é«˜å¯ç”¨ä¸æ–­ç‚¹ç»­ä¼ èƒ½åŠ›ï¼Œé€‚åº”ç¥¨åŠ¡ç³»ç»Ÿé«˜é¢‘å†™å…¥çš„åœºæ™¯éœ€æ±‚ã€‚</li>
<li>é€šè¿‡ ARMS Agent æ¢é’ˆï¼ˆä»¥ Java æŠ€æœ¯æ ˆä¸ºä¸»ï¼‰å®Œæˆå¯¹é­”æ–¹æ–‡å¨±æ ¸å¿ƒåº”ç”¨çš„æ— ä¾µå…¥å¼æ¥å…¥ï¼Œå…¨é¢æ•è·ä»å‰ç«¯é¡µé¢ã€API ç½‘å…³åˆ°åç«¯å¾®æœåŠ¡åŠæ•°æ®åº“ã€ç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ä¸­é—´ä»¶çš„å…¨é“¾è·¯è°ƒç”¨æ•°æ®ï¼Œå®Œæ•´è¿˜åŸä¸€æ¬¡è¯·æ±‚çš„æœåŠ¡æ‹“æ‰‘è·¯å¾„å’Œæ€§èƒ½ç‰¹å¾ï¼ŒçœŸæ­£å®ç°ç«¯åˆ°ç«¯çš„å¯è§‚æµ‹æ€§ã€‚</li>
<li>æ‰€æœ‰åº”ç”¨å±‚ã€åŸºç¡€è®¾æ–½å±‚åŠä¸­é—´ä»¶çš„ç›‘æ§æŒ‡æ ‡å‡æ¥å…¥æ‰˜ç®¡ç‰ˆ Prometheusï¼Œä¾æ‰˜å…¶å¼ºå¤§çš„å¤šç»´æ•°æ®æ¨¡å‹ï¼Œæ”¯æŒæŒ‰é›†ç¾¤ã€å‘½åç©ºé—´ã€å®ä¾‹ã€ä¸šåŠ¡æ ‡ç­¾ç­‰ç»´åº¦è¿›è¡Œçµæ´»ä¸‹é’»åˆ†æï¼Œé¿å…â€œåªçœ‹æ•´ä½“ã€æ— æ³•ç»†åˆ†â€çš„ç›²åŒºã€‚</li>
</ul>
<p><strong>2. å›´ç»•è¿™ä¸€æ•°æ®åº•åº§ï¼Œæˆ‘ä»¬æ„å»ºäº†å±‚æ¬¡æ¸…æ™°ã€è¦†ç›–å…¨é¢çš„æŒ‡æ ‡ä½“ç³»ã€‚</strong></p>
<ul>
<li>åœ¨åº”ç”¨å±‚ï¼Œé‡ç‚¹å…³æ³¨ QPSã€é”™è¯¯ç‡ã€å“åº”å»¶è¿Ÿï¼ˆP99/P95ï¼‰ã€JVM è¿è¡ŒçŠ¶æ€ï¼ˆGC é¢‘ç‡ã€å †å†…å­˜ä½¿ç”¨ï¼‰ã€çº¿ç¨‹æ± æ´»è·ƒåº¦ç­‰å…³é”®æ€§èƒ½æŒ‡æ ‡ï¼ŒåŠæ—¶è¯†åˆ«æœåŠ¡è¿‡è½½æˆ–èµ„æºç“¶é¢ˆï¼›</li>
<li>åœ¨åŸºç¡€è®¾æ–½å±‚ï¼ŒæŒç»­ç›‘æ§ CPUã€å†…å­˜ã€ç£ç›˜ IOã€ç½‘ç»œååä»¥åŠå®¹å™¨èµ„æºé…é¢ä¸å®é™…ä½¿ç”¨æƒ…å†µï¼Œé˜²èŒƒåº•å±‚èµ„æºäº‰æŠ¢å¼•å‘çš„è¿é”æ•…éšœï¼›</li>
<li>åœ¨ä¸­é—´ä»¶å±‚é¢ï¼Œåˆ™èšç„¦æ•°æ®åº“æ…¢æŸ¥è¯¢è¶‹åŠ¿ã€Redis ç¼“å­˜å‘½ä¸­ç‡æ³¢åŠ¨ã€MQ æ¶ˆæ¯å †ç§¯æƒ…å†µç­‰å…¸å‹é£é™©ç‚¹ï¼Œæå‰é¢„è­¦æ½œåœ¨ä¾èµ–é—®é¢˜ã€‚</li>
</ul>
<p>è¿™äº›æŒ‡æ ‡å¹¶éå­¤ç«‹å­˜åœ¨ï¼Œè€Œæ˜¯é€šè¿‡ Grafana å¯è§†åŒ–å¤§ç›˜è¿›è¡Œæ•´åˆå‘ˆç°ï¼Œé’ˆå¯¹äº¤æ˜“ã€æ¸ é“ã€å†…å®¹ç­‰ä¸åŒä¸šåŠ¡çº¿å®šåˆ¶ä¸“å±ç›‘æ§è§†å›¾ï¼Œå¹¶å®æ—¶æŠ•é€åˆ°å„å›¢é˜Ÿå·¥ä½å¤§å±ï¼Œä½¿æ ¸å¿ƒä¸šåŠ¡æµé‡å˜åŒ–ã€å¼‚å¸¸æ³¢åŠ¨ä¸€ç›®äº†ç„¶ï¼Œå½¢æˆâ€œäººäººå¯è§ã€äº‹äº‹å¯è¿½â€çš„è¿ç»´æ–‡åŒ–æ°›å›´ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87ff904ed31c4114b542c8493b18b695~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763530749&amp;x-signature=Z1KY9Xs8Y2KD2PO7mGvluyJzXy8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>3. å‘Šè­¦ä½“ç³»ä¸å†æ˜¯ç®€å•çš„é˜ˆå€¼è§¦å‘å·¥å…·ï¼Œè€Œæ˜¯æ¼”è¿›ä¸ºå…·å¤‡ååŒèƒ½åŠ›ä¸é—­ç¯ç®¡ç†é€»è¾‘çš„æ™ºèƒ½ä¸­æ¢ã€‚</strong></p>
<ul>
<li>ARMS å‘Šè­¦ç®¡ç†æ¨¡å—ä½œä¸ºæ ¸å¿ƒæ¢çº½ï¼Œæ±‡èšæ¥è‡ªäº‘äº§å“ç›‘æ§ã€è‡ªå®šä¹‰æŒ‡æ ‡é‡‡é›†ã€æ•°æ®åº“æ…¢æŸ¥è¯¢ã€æœåŠ¡å¥åº·åº¦è¯„åˆ†ç­‰å¤šæºå‘Šè­¦äº‹ä»¶ï¼Œç»Ÿä¸€é€šè¿‡ Webhook æ¥å…¥å¹¶è¿›è¡Œæ ‡å‡†åŒ–å¤„ç†ï¼Œæ¶ˆé™¤å‘Šè­¦æ¥æºåˆ†æ•£å¸¦æ¥çš„ç®¡ç†æ··ä¹±ã€‚</li>
<li>ç»“åˆä¸šåŠ¡ä¼˜å…ˆçº§ä¸å½±å“èŒƒå›´ï¼Œæˆ‘ä»¬åœ¨ ARMS åŸç”Ÿèƒ½åŠ›ä¹‹ä¸Šå®æ–½åˆ†çº§åˆ†ç±»ç­–ç•¥ï¼ŒæŒ‰äº¤æ˜“ã€æ¸ é“ã€åº—é“ºç­‰ä¸šåŠ¡çº¿ç»´åº¦å®ç°å‘Šè­¦ç²¾å‡†è·¯ç”±ï¼Œç¡®ä¿ä¿¡æ¯ç›´è¾¾å¯¹åº”å€¼ç­äººå‘˜ï¼Œæ”¯æŒä¼ä¸šå¾®ä¿¡ç¾¤ç»„é€šçŸ¥ä¸ä¸ªäºº@åŒé€šé“è§¦è¾¾ï¼Œæå‡å“åº”æ•ˆç‡ã€‚</li>
<li>æ¯ä¸€æ¡å‘Šè­¦éƒ½çº³å…¥å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†æµç¨‹ï¼Œä»ç”Ÿæˆã€è®¤é¢†ã€å¤„ç†åˆ°æ¢å¤éªŒè¯å‡æœ‰è®°å½•å¯æŸ¥ï¼Œå¹¶å…³è” SLO è¾¾æˆæƒ…å†µè¿›è¡Œç»Ÿè®¡åˆ†æï¼Œå¸®åŠ©å›¢é˜Ÿè¯„ä¼°æœåŠ¡è´¨é‡è¶‹åŠ¿ï¼Œæ¨åŠ¨äº‹åå¤ç›˜ä¸é¢„é˜²æœºåˆ¶è½åœ°ï¼ŒçœŸæ­£å®ç°â€œå‘Šè­¦æœ‰å“åº”ã€é—®é¢˜æœ‰å½’å› ã€æ”¹è¿›æœ‰ä¾æ®â€çš„é—­ç¯æ²»ç†ã€‚</li>
</ul>
<p>è¿™ä¸€æ•´å¥—ä½“ç³»ä¸ä»…æ˜¯æŠ€æœ¯ç»„ä»¶çš„ç®€å•å †å ï¼Œæ›´æ˜¯æ•°æ®ã€æµç¨‹ä¸è´£ä»»æœºåˆ¶çš„æ·±åº¦èåˆï¼Œä¸ºé­”æ–¹åœ¨é«˜å¹¶å‘ã€å¤æ‚ä¾èµ–çš„ä¸šåŠ¡ç¯å¢ƒä¸‹æŒç»­ç¨³å®šè¿è¡Œæä¾›äº†å¼ºæœ‰åŠ›çš„å¯è§‚æµ‹æ”¯æ’‘ã€‚</p>
<h4 data-id="heading-6">2ï¼‰ååŒææ•ˆï¼šä¸šåŠ¡æŒ‡æ ‡æ•°å­—åŒ– + Metric-Trace-Log å…³è” + ä¸€ç«™å¼å¼€å‘å¹³å°é›†æˆ</h4>
<p><strong>1. åœ¨é­”æ–¹ç ”å‘ä½“ç³»å‘æ™ºèƒ½åŒ–ã€æ•°æ®é©±åŠ¨å‹è¿ç»´æ¼”è¿›çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é€æ­¥æ„å»ºäº†ä¸€å¥—ä»¥ä¸šåŠ¡ä»·å€¼ä¸ºæ ¸å¿ƒçš„å¥åº·åº¦ä¸æœåŠ¡è´¨é‡é‡åŒ–ä½“ç³»ã€‚</strong></p>
<ul>
<li>å›´ç»•ç¥¨åŠ¡ç³»ç»Ÿçš„æ ¸å¿ƒä¸šåŠ¡ç›®æ ‡ï¼Œæˆ‘ä»¬æç‚¼å‡ºäº¤æ˜“æˆåŠŸç‡ã€å“åº”æ—¶é—´ã€ç³»ç»Ÿååé‡å’Œç³»ç»Ÿè´Ÿè½½ä½œä¸ºå…³é”®çš„â€œé»„é‡‘æŒ‡æ ‡â€ï¼Œè¿™äº›æŒ‡æ ‡ä¸ä»…åæ˜ ç³»ç»Ÿè¿è¡ŒçŠ¶æ€ï¼Œæ›´ç›´æ¥å…³è”ç”¨æˆ·è´­ç¥¨ä½“éªŒä¸å•†ä¸šç»“æœã€‚</li>
<li>åŸºäºè¿™äº›æ ¸å¿ƒæŒ‡æ ‡ï¼Œè¿›ä¸€æ­¥æ„å»ºäº†å¤šç»´åº¦çš„æœåŠ¡è¯„åˆ†å¡æœºåˆ¶ï¼Œæ¶µç›–åŸºç¡€è®¾æ–½å¥åº·åˆ†ï¼ˆå¦‚èŠ‚ç‚¹ç¨³å®šæ€§ã€èµ„æºä½¿ç”¨ç‡ï¼‰ã€åº”ç”¨æ€§èƒ½åˆ†ï¼ˆå¦‚è°ƒç”¨å»¶è¿Ÿã€é”™è¯¯ç‡ã€JVM çŠ¶æ€ï¼‰å’Œä¸šåŠ¡å¯ç”¨åˆ†ï¼ˆå¦‚è®¢å•åˆ›å»ºæˆåŠŸç‡ã€æ”¯ä»˜é“¾è·¯é€šè¾¾æ€§ï¼‰ï¼Œé€šè¿‡åŠ æƒè®¡ç®—å½¢æˆå¯é‡åŒ–ã€å¯æ¯”è¾ƒçš„æœåŠ¡å¥åº·åº¦è¯„åˆ†ã€‚è¯¥è¯„åˆ†æ¯æ—¥åŠ¨æ€æ›´æ–°ï¼Œæ”¯æŒæ¨ªå‘å¯¹æ¯”ä¸åŒæœåŠ¡é—´çš„ç¨³å®šæ€§æ°´å¹³ï¼Œä¹Ÿä¸ºå®¹é‡è§„åˆ’ã€ç‰ˆæœ¬å‘å¸ƒå‡†å…¥å’Œæ•…éšœå¤ç›˜æä¾›äº†å®¢è§‚ä¾æ®ã€‚</li>
<li>æˆ‘ä»¬æ‰“é€šäº†æŠ€æœ¯æŒ‡æ ‡ä¸ä¸šåŠ¡å½±å“ä¹‹é—´çš„è¯­ä¹‰é¸¿æ²Ÿï¼Œå°†æ•°æ®åº“å»¶è¿Ÿä¸Šå‡ã€ç½‘å…³é”™è¯¯ç‡çªå¢ç­‰åº•å±‚å¼‚å¸¸ï¼Œæ˜ å°„ä¸ºâ€œé¢„è®¡æ¯åˆ†é’Ÿå½±å“XXç¬”è®¢å•â€æˆ–â€œå½“å‰åŒºåŸŸæœåŠ¡èƒ½åŠ›ä¸‹é™ 30%â€ç­‰ç›´è§‚è¡¨è¾¾ï¼Œå¹¶é€šè¿‡å¯è§†åŒ–çœ‹æ¿å®æ—¶å‘ˆç°ï¼Œä½¿æŠ€æœ¯é—®é¢˜çœŸæ­£è¢«ä¸šåŠ¡æ–¹â€œçœ‹å¾—æ‡‚ã€æ„ŸçŸ¥å¾—åˆ°â€ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51fc0ba983154d9d8116e4ce04129cfd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763530749&amp;x-signature=4U2D4IhHFMpxSCfUfHfjf99mouU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>2. æ ¹å› åˆ†æèƒ½åŠ›æˆä¸ºå¿«é€Ÿå“åº”æ•…éšœçš„æ ¸å¿ƒæ”¯æ’‘ã€‚</strong></p>
<p>å½“æ ¸å¿ƒæŒ‡æ ‡å‡ºç°æ³¢åŠ¨æˆ–å‘Šè­¦è§¦å‘æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨æ ‡çº¢å¼‚å¸¸æœåŠ¡èŠ‚ç‚¹ï¼Œè¿ç»´ä¸ç ”å‘äººå‘˜å¯ç¬¬ä¸€æ—¶é—´å®šä½é—®é¢˜åŸŸã€‚é€šè¿‡ç‚¹å‡»å¼‚å¸¸ç‚¹ï¼Œå³å¯æ— ç¼ä¸‹é’»è‡³å…¨é“¾è·¯ Trace è§†å›¾ï¼ŒæŸ¥çœ‹é”™/æ…¢è¯·æ±‚çš„å…·ä½“è°ƒç”¨è·¯å¾„ï¼Œç²¾å‡†è¯†åˆ«æ˜¯å†…éƒ¨æœåŠ¡å¤„ç†ç¼“æ…¢ã€æ•°æ®åº“æ…¢æŸ¥è¯¢ï¼Œè¿˜æ˜¯ç¬¬ä¸‰æ–¹æ¥å£è¶…æ—¶æ‰€è‡´ã€‚å°¤ä¸ºå…³é”®çš„æ˜¯ï¼ŒTrace ä¸æ—¥å¿—ç³»ç»Ÿæ·±åº¦è”åŠ¨ï¼Œåœ¨è°ƒç”¨é“¾ä¸­ç›´æ¥åµŒå…¥å…³è”çš„æ—¥å¿—ä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬å®Œæ•´çš„é”™è¯¯ä¿¡æ¯ã€å¼‚å¸¸å †æ ˆã€å…¥å‚å‡ºå‚ç­‰ç»†èŠ‚ï¼Œæå¤§ç¼©çŸ­äº†â€œæŸ¥é“¾è·¯â†’ç¿»æ—¥å¿—â†’å¯¹æ—¶é—´æˆ³â€çš„äººå·¥æ¯”å¯¹è¿‡ç¨‹ã€‚åŒæ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨å…³è”æœ€è¿‘çš„å˜æ›´äº‹ä»¶â€”â€”å¦‚ä»£ç å‘å¸ƒã€é…ç½®æ¨é€ã€å¼¹æ€§æ‰©ç¼©å®¹æ“ä½œâ€”â€”å¸®åŠ©åˆ¤æ–­æ˜¯å¦ä¸ºå˜æ›´å¼•å‘çš„è¿é”ååº”ï¼Œæ˜¾è‘—æå‡ MTTRï¼ˆå¹³å‡æ¢å¤æ—¶é—´ï¼‰æ•ˆç‡ã€‚</p>
<p><strong>3. æ·±åº¦èåˆæ ¹å› åˆ†æèƒ½åŠ›ä¸ä¸€ç«™å¼å¼€å‘å¹³å°æµç¨‹ï¼Œå®ç°ä»â€œè¢«åŠ¨æ•‘ç«â€åˆ°â€œä¸»åŠ¨æ´å¯Ÿâ€ã€ä»â€œæŠ€æœ¯è§†è§’â€åˆ°â€œä¸šåŠ¡å½±å“â€çš„å…¨é¢å‡çº§ã€‚</strong></p>
<p>ä¸ºè®©è¿™äº›å¼ºå¤§çš„è§‚æµ‹èƒ½åŠ›çœŸæ­£èå…¥ç ”å‘æ—¥å¸¸ï¼Œæˆ‘ä»¬æ¨åŠ¨å¯è§‚æµ‹ä½“ç³»ä¸ä¸€ç«™å¼å¼€å‘å¹³å°çš„æ·±åº¦é›†æˆã€‚å¼€å‘è€…æ— éœ€è·³è½¬å¤šä¸ªé˜¿é‡Œäº‘æ§åˆ¶å°ï¼Œåœ¨ç†Ÿæ‚‰çš„ç ”å‘é—¨æˆ·å†…å³å¯æŸ¥çœ‹æ‰€è´Ÿè´£æœåŠ¡çš„å®æ—¶å‘Šè­¦ã€å¥åº·è¯„åˆ†ã€è°ƒç”¨é“¾å’Œæ—¥å¿—æ•°æ®ï¼Œå®ç°â€œå¼€å‘å³å¯è§‚æµ‹â€çš„ç†å¿µè½åœ°ã€‚è¿™ä¸€é›†æˆä¸ä»…é¿å…åœ¨äº§å“é—´åå¤åˆ‡æ¢çš„æ“ä½œè´Ÿæ‹…ï¼Œæ›´é€šè¿‡ç»Ÿä¸€äº¤äº’è¯­è¨€æå‡å·¥å…·é“¾çš„æ•´ä½“ä½“éªŒä¸€è‡´æ€§ã€‚é’ˆå¯¹åŸç”Ÿäº§å“ç•Œé¢å¤æ‚ã€å­¦ä¹ æˆæœ¬é«˜çš„é—®é¢˜ï¼Œæˆ‘ä»¬åŸºäºç”¨æˆ·é«˜é¢‘ä½¿ç”¨è·¯å¾„è®¾è®¡ç®€åŒ–å…¥å£ï¼Œé™ä½æ–°æˆå‘˜ä¸Šæ‰‹é—¨æ§›ã€‚å¦‚ä»Šï¼Œè¯¥é›†æˆæ¨¡å¼å·²æˆä¸ºç ”å‘ææ•ˆçš„å…³é”®è·¯å¾„ï¼šä¸€æ–¹é¢ï¼Œè¿ç»´ä¾§çš„é—®é¢˜èƒ½å¤Ÿå¿«é€Ÿè§¦è¾¾è´£ä»»äººï¼›å¦ä¸€æ–¹é¢ï¼Œå¼€å‘äººå‘˜ä¹Ÿèƒ½åœ¨æœ¬åœ°è°ƒè¯•ã€ç°åº¦éªŒè¯é˜¶æ®µæå‰å‘ç°æ½œåœ¨é£é™©ï¼Œå½¢æˆâ€œå¼€å‘â€”å‘å¸ƒâ€”ç›‘æ§â€”åé¦ˆâ€”ä¼˜åŒ–â€çš„åŒå‘é—­ç¯ï¼ŒçœŸæ­£å®ç°ç ”è¿ä¸€ä½“åŒ–çš„ååŒæ¼”è¿›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8231b59116b2465b8ffdda5c601afd3b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763530749&amp;x-signature=j2Zsx7AoMjp6UaHFOSqFJMCtcF8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™å¥—èåˆä¸šåŠ¡è§†è§’ã€æ™ºèƒ½åˆ†æä¸æµç¨‹é›†æˆçš„å¯è§‚æµ‹ä½“ç³»ï¼Œæ­£åœ¨æŒç»­èµ‹èƒ½é­”æ–¹åœ¨é«˜å¹¶å‘ã€å¿«è¿­ä»£ç¯å¢ƒä¸‹çš„ç¨³å®šäº¤ä»˜èƒ½åŠ›ï¼Œè®©æŠ€æœ¯ä¿éšœä»å¹•åèµ°å‘å‰å°ï¼Œæˆä¸ºä¸šåŠ¡å¢é•¿çš„å¯ä¿¡æ”¯æ’‘ã€‚</p>
<h4 data-id="heading-7">3ï¼‰æ™ºèƒ½è¿ç»´(Observable MCP Server)ï¼šAI é©±åŠ¨çš„å¼‚å¸¸æ£€æµ‹å’Œæ ¹å› åˆ†æèƒ½åŠ›</h4>
<p>åœ¨å¯è§‚æµ‹æ€§ä½“ç³»é€æ­¥å®Œå–„çš„åŸºç¡€ä¸Šï¼Œé­”æ–¹ç ”å‘å›¢é˜Ÿæ­£è¿ˆå‘æ™ºèƒ½è¿ç»´çš„æ·±æ°´åŒºâ€”â€”é€šè¿‡èåˆå¤§æ¨¡å‹èƒ½åŠ›ä¸å…¨é“¾è·¯è§‚æµ‹æ•°æ®ï¼Œæ„å»ºåŸºäº AI+å¯è§‚æµ‹æ€§ï¼ˆObservabilityï¼‰çš„æ™ºèƒ½è¿ç»´å·¥ä½œæµï¼Œæ¨åŠ¨æ•…éšœå¤„ç†ä»â€œäººå·¥é©±åŠ¨â€å‘â€œè‡ªåŠ¨é—­ç¯â€æ¼”è¿›ã€‚è¯¥å·¥ä½œæµä»¥â€œå¼‚å¸¸æ£€æµ‹ â†’ æ ¹å› åˆ†æ â†’ å¯è§†åŒ–æŠ¥å‘Šâ€ä¸ºä¸»çº¿ï¼Œè´¯ç©¿æ¯æ—¥è¿ç»´æ´å¯Ÿå…¨æµç¨‹ï¼Œæ˜¾è‘—æå‡é—®é¢˜å‘ç°æ•ˆç‡ä¸å†³ç­–å“åº”é€Ÿåº¦ï¼Œå‡å°‘å¯¹ç»éªŒä¾èµ–ï¼Œé‡Šæ”¾äººåŠ›èšç„¦æ›´é«˜ä»·å€¼çš„ç³»ç»Ÿä¼˜åŒ–ä»»åŠ¡ã€‚</p>
<ul>
<li>ä¾æ‰˜ MCPï¼Œå¯¹æ¯æ—¥æµ·é‡å‘Šè­¦äº‹ä»¶çš„è‡ªåŠ¨èšåˆä¸è¯­ä¹‰ç†è§£ã€‚ç³»ç»Ÿä¸å†ç®€å•ç½—åˆ—è§¦å‘çš„å‘Šè­¦æ¡ç›®ï¼Œè€Œæ˜¯é€šè¿‡å¤§æ¨¡å‹å¯¹è·¨æœåŠ¡ã€è·¨å±‚çº§çš„å‘Šè­¦è¿›è¡Œå½’å› èšç±»ï¼Œè¯†åˆ«å‡ºçœŸæ­£å…·æœ‰ä¸šåŠ¡å½±å“çš„å…±æ€§é—®é¢˜ã€‚å¹¶åœ¨æ¯æ—¥ç”Ÿæˆçš„ä¸ªæ€§åŒ–æŠ¥å‘Šä¸­å‘ˆç°é—®é¢˜åˆ†å¸ƒç»Ÿè®¡ã€æ½œåœ¨æ ¹å› æ¨æµ‹ä»¥åŠå¯è½åœ°çš„ä¼˜åŒ–å»ºè®®ï¼Œè¿™ç§ç”±æœºå™¨å®Œæˆçš„åˆæ­¥ç ”åˆ¤ï¼Œæå¤§é™ä½äº†å€¼ç­äººå‘˜çš„ä¿¡æ¯è¿‡è½½å‹åŠ›ï¼Œä½¿å…³é”®é—®é¢˜å¾—ä»¥ä¼˜å…ˆæš´éœ²ã€‚</li>
<li>ä¸ºå®ç°è¿™ä¸€è¿‡ç¨‹çš„è‡ªåŠ¨åŒ–ï¼Œæˆ‘ä»¬è®¾è®¡äº†åŸºäºæç¤ºè¯å·¥ç¨‹çš„ Agent å·¥ä½œæµï¼Œç»“åˆä¸šåŠ¡ä¸Šä¸‹æ–‡ä¸å†å²æ•°æ®åŠ¨æ€ç”Ÿæˆé«˜è´¨é‡æ¨ç†æŒ‡ä»¤ã€‚è¯¥ Agent å¯è‡ªåŠ¨æå–å‘Šè­¦ä¸Šä¸‹æ–‡å¹¶å°†å…¶ç»“æ„åŒ–ä¸ºæ¨¡å‹å¯ç†è§£çš„è¾“å…¥ä¸Šä¸‹æ–‡ï¼Œå¹¶é©±åŠ¨å¤§æ¨¡å‹è¾“å‡ºæ ‡å‡†åŒ–çš„æ´å¯Ÿæ‘˜è¦ã€‚è¿™äº›å†…å®¹ä¸ä»…ç”¨äºç”Ÿæˆå¯è§†åŒ–æ—¥æŠ¥ï¼Œè¿˜å¯ä½œä¸ºå‘¨åº¦ç¨³å®šæ€§å¤ç›˜çš„æ•°æ®æ”¯æ’‘ï¼Œå¸®åŠ©å›¢é˜Ÿè¯†åˆ«é•¿æœŸå­˜åœ¨çš„æŠ€æœ¯å€ºæˆ–æ¶æ„çŸ­æ¿ã€‚</li>
<li>æœ€ç»ˆè¾“å‡ºçš„ AI-MCP æ—¥æŠ¥ä»¥ç®€æ´ç›´è§‚çš„å½¢å¼å‘ˆç°æ ¸å¿ƒç»“è®ºï¼Œæ—¢å¯ä¾›æŠ€æœ¯è´Ÿè´£äººå¿«é€ŸæŒæ¡ç³»ç»Ÿæ•´ä½“å¥åº·è¶‹åŠ¿ï¼Œä¹Ÿèƒ½ä¸ºä¸€çº¿å¼€å‘è€…æä¾›ç²¾å‡†çš„é—®é¢˜åˆ‡å…¥çº¿ç´¢ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œè¯¥æŠ¥å‘Šå¹¶éç»ˆç‚¹ï¼Œè€Œæ˜¯è‡ªåŠ¨è§¦å‘åç»­åŠ¨ä½œçš„èµ·ç‚¹ï¼Œå®ç°ä»â€œçœ‹åˆ°é—®é¢˜â€åˆ°â€œå¯åŠ¨å¤„ç½®â€çš„é—­ç¯è”åŠ¨ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ad9fcddf39b4264b13cf3d6d969ff6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763530749&amp;x-signature=2t%2F4zqeE%2BU9PqeTL%2BB2YYrRmmaE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f23b199e2f1c44afa73d89851c18db72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763530749&amp;x-signature=rLqctWYSZ8v2P3xqoKI04hnlR%2B0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ä¸€æ™ºèƒ½å·¥ä½œæµçš„è½åœ°ï¼Œæ ‡å¿—ç€é­”æ–¹è¿ç»´ä½“ç³»ä»â€œå¯è§‚æµ‹â€è¿ˆå‘â€œå¯é¢„çŸ¥ã€å¯å†³ç­–â€çš„æ–°é˜¶æ®µã€‚AI ä¸å†æ˜¯å­¤ç«‹çš„èƒ½åŠ›æ’ä»¶ï¼Œè€Œæ˜¯æ·±åº¦åµŒå…¥è¿ç»´æ—¥å¸¸çš„åä½œè€…ï¼ŒæŒç»­æå‡ç³»ç»Ÿçš„è‡ªæ„ˆèƒ½åŠ›ä¸å›¢é˜Ÿå“åº”æ•ˆç‡ï¼Œåœ¨é«˜å¹¶å‘ã€å¿«è¿­ä»£çš„ä¸šåŠ¡èŠ‚å¥ä¸­æ„ç­‘æ›´åŠ æ•æ·ã€éŸ§æ€§æ›´å¼ºçš„æŠ€æœ¯æŠ¤åŸæ²³ã€‚</p>
<h2 data-id="heading-8">å®ç°ä»·å€¼ï¼šä»æˆæœ¬ä¸­å¿ƒåˆ°ä»·å€¼åˆ›é€ </h2>
<h3 data-id="heading-9">ï¼ˆä¸€ï¼‰ç¨³å®šæ€§ä¿éšœèƒ½åŠ›è·¨è¶Šå¼æå‡</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bdf987523e3145b1affa89961b957842~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763530749&amp;x-signature=3dlmVRfLU4ZK8%2Bi%2F9ew2P4Y4rZQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-10">ï¼ˆäºŒï¼‰æ™ºèƒ½åŒ–è¿ç»´æˆæœ¬ä¼˜åŒ–</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88ab55e8f86449f4a34718a4c1cd0cf8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763530749&amp;x-signature=PQFnc5q2hXCKl7qszAb7D2gcLxs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-11">æœªæ¥å±•æœ›ï¼šå‘æ™ºèƒ½å¯è§‚æµ‹æ€§æ¼”è¿›</h2>
<h3 data-id="heading-12">ï¼ˆä¸€ï¼‰æ•°æ®æ²»ç†ç²¾ç»†åŒ–</h3>
<ul>
<li>å»ºç«‹ç›‘æ§æ•°æ®è´¨é‡è¯„ä¼°ä½“ç³»ï¼Œç¡®ä¿æ•°æ®çš„å‡†ç¡®æ€§å’Œæ—¶æ•ˆæ€§</li>
<li>æ„å»ºé¢å‘ä¸šåŠ¡åœºæ™¯çš„ç›‘æ§æŒ‡æ ‡è§„èŒƒï¼Œæå‡æ•°æ®çš„ä¸šåŠ¡ä»·å€¼å¯†åº¦</li>
</ul>
<h3 data-id="heading-13">ï¼ˆäºŒï¼‰æ™ºèƒ½åŒ–èƒ½åŠ›æ·±åŒ–</h3>
<ul>
<li>å¼ºåŒ– AIOps èƒ½åŠ›ï¼Œå®ç°å‘Šè­¦è‡ªåŠ¨æ”¶æ•›å’Œæ•…éšœè‡ªæ„ˆ</li>
<li>å¼€å‘æ™ºèƒ½æ ¹å› åˆ†æå¼•æ“ï¼Œæä¾›è§£å†³æ–¹æ¡ˆæ¨èåŠŸèƒ½</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[P3E-Python Lambdaè¡¨è¾¾å¼å®Œå…¨æŒ‡å—-ä»€ä¹ˆæ˜¯åŒ¿åå‡½æ•°ï¼Ÿä¸ºä»€ä¹ˆ90%ç¨‹åºå‘˜éƒ½åœ¨ç”¨ï¼Ÿæ€ä¹ˆå¿«é€ŸæŒæ¡å‡½æ•°å¼ç¼–ç¨‹åˆ©å™¨ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7571636682694328360</link>    <guid>https://juejin.cn/post/7571636682694328360</guid>    <pubDate>2025-11-12T07:54:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571636682694328360" data-draft-id="7571475192489541642" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="P3E-Python Lambdaè¡¨è¾¾å¼å®Œå…¨æŒ‡å—-ä»€ä¹ˆæ˜¯åŒ¿åå‡½æ•°ï¼Ÿä¸ºä»€ä¹ˆ90%ç¨‹åºå‘˜éƒ½åœ¨ç”¨ï¼Ÿæ€ä¹ˆå¿«é€ŸæŒæ¡å‡½æ•°å¼ç¼–ç¨‹åˆ©å™¨ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯,Python"/> <meta itemprop="datePublished" content="2025-11-12T07:54:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éƒ‘æ©èµ"/> <meta itemprop="url" content="https://juejin.cn/user/2883382090934252"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            P3E-Python Lambdaè¡¨è¾¾å¼å®Œå…¨æŒ‡å—-ä»€ä¹ˆæ˜¯åŒ¿åå‡½æ•°ï¼Ÿä¸ºä»€ä¹ˆ90%ç¨‹åºå‘˜éƒ½åœ¨ç”¨ï¼Ÿæ€ä¹ˆå¿«é€ŸæŒæ¡å‡½æ•°å¼ç¼–ç¨‹åˆ©å™¨ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2883382090934252/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éƒ‘æ©èµ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T07:54:09.000Z" title="Wed Nov 12 2025 07:54:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">P3E-Python Lambdaè¡¨è¾¾å¼å®Œå…¨æŒ‡å—-ä»€ä¹ˆæ˜¯åŒ¿åå‡½æ•°ï¼Ÿä¸ºä»€ä¹ˆ90%ç¨‹åºå‘˜éƒ½åœ¨ç”¨ï¼Ÿæ€ä¹ˆå¿«é€ŸæŒæ¡å‡½æ•°å¼ç¼–ç¨‹åˆ©å™¨ï¼Ÿ</h2>
<h3 data-id="heading-1">æ‘˜è¦</h3>
<p>90% çš„ Python ç¨‹åºå‘˜åœ¨éœ€è¦ç®€å•å‡½æ•°æ—¶è¿˜åœ¨ç”¨ def å®šä¹‰ï¼Œå¯¼è‡´ä»£ç å†—é•¿ã€‚Lambda è¡¨è¾¾å¼ï¼ˆåŒ¿åå‡½æ•°ï¼‰ç”¨ä¸€è¡Œä»£ç å®ç°ç®€å•é€»è¾‘ï¼Œä¸ mapã€filterã€sorted ç­‰å†…ç½®å‡½æ•°ç»“åˆä½¿ç”¨ï¼Œè®©ä»£ç æ›´ç®€æ´ä¼˜é›…ã€‚æœ¬æ–‡æ¡£å¸®ä½ å½»åº•æŒæ¡ Lambdaï¼Œå†™å‡ºæ›´ Pythonic çš„ä»£ç ã€‚</p>
<blockquote>
<p>é¢è¯•å®˜é—®ï¼š"åœ¨ Python ä¸­ï¼Œå¦‚ä½•å¿«é€Ÿå®šä¹‰ä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Ÿ" æ±‚èŒè€…å›ç­”ï¼š"ç”¨ def å…³é”®å­—å®šä¹‰..." é¢è¯•å®˜è¿½é—®ï¼š"é‚£ä½ çŸ¥é“ Lambda è¡¨è¾¾å¼å—ï¼Ÿä¸ºä»€ä¹ˆå¤§å‚ç¨‹åºå‘˜éƒ½åœ¨ç”¨åŒ¿åå‡½æ•°ï¼Ÿ" è¿™æ ·çš„å›°æƒ‘ï¼Œ90% çš„ Python åˆå­¦è€…éƒ½é‡åˆ°è¿‡ã€‚ä»Šå¤©æˆ‘ä»¬å°±æ¥ç³»ç»Ÿåœ°å­¦ä¹  Python çš„ Lambda è¡¨è¾¾å¼ï¼Œè®©ä½ åœ¨é¢è¯•å’Œå®é™…å¼€å‘ä¸­éƒ½èƒ½æ¸¸åˆƒæœ‰ä½™ï¼Œå†™å‡ºæ›´ç®€æ´ä¼˜é›…çš„ä»£ç ã€‚</p>
</blockquote>
<h3 data-id="heading-2">ç›®å½•</h3>
<ul>
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF-lambda-%E8%A1%A8%E8%BE%BE%E5%BC%8F" title="#%E4%BB%80%E4%B9%88%E6%98%AF-lambda-%E8%A1%A8%E8%BE%BE%E5%BC%8F">ä»€ä¹ˆæ˜¯ Lambda è¡¨è¾¾å¼ï¼Ÿ</a></li>
<li><a href="#lambda-%E8%AF%AD%E6%B3%95%E8%AF%A6%E8%A7%A3" title="#lambda-%E8%AF%AD%E6%B3%95%E8%AF%A6%E8%A7%A3">Lambda è¯­æ³•è¯¦è§£</a></li>
<li><a href="#lambda-%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B" title="#lambda-%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B">Lambda åŸºç¡€ä½¿ç”¨ç¤ºä¾‹</a></li>
<li><a href="#lambda-%E4%B8%8E%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0%E7%BB%93%E5%90%88%E4%BD%BF%E7%94%A8" title="#lambda-%E4%B8%8E%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0%E7%BB%93%E5%90%88%E4%BD%BF%E7%94%A8">Lambda ä¸å†…ç½®å‡½æ•°ç»“åˆä½¿ç”¨</a></li>
<li><a href="#lambda-%E4%B8%8E%E6%99%AE%E9%80%9A%E5%87%BD%E6%95%B0%E7%9A%84%E5%AF%B9%E6%AF%94" title="#lambda-%E4%B8%8E%E6%99%AE%E9%80%9A%E5%87%BD%E6%95%B0%E7%9A%84%E5%AF%B9%E6%AF%94">Lambda ä¸æ™®é€šå‡½æ•°çš„å¯¹æ¯”</a></li>
<li><a href="#lambda-%E7%9A%84%E5%B1%80%E9%99%90%E6%80%A7%E5%92%8C%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9" title="#lambda-%E7%9A%84%E5%B1%80%E9%99%90%E6%80%A7%E5%92%8C%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">Lambda çš„å±€é™æ€§å’Œæ³¨æ„äº‹é¡¹</a></li>
<li><a href="#lambda-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5" title="#lambda-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">Lambda æœ€ä½³å®è·µ</a></li>
<li><a href="#%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF%E4%B8%8E%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7" title="#%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF%E4%B8%8E%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7">å¸¸è§é”™è¯¯ä¸è°ƒè¯•æŠ€å·§</a></li>
<li><a href="#%E5%86%99%E5%9C%A8%E6%9C%80%E5%90%8E" title="#%E5%86%99%E5%9C%A8%E6%9C%80%E5%90%8E">å†™åœ¨æœ€å</a></li>
</ul>
<hr/>
<h3 data-id="heading-3">ä»€ä¹ˆæ˜¯ Lambda è¡¨è¾¾å¼ï¼Ÿ</h3>
<p align="right"><span>ğŸ”¥ Mustï¼ˆå¿…åšå®è·µï¼‰</span></p>
<p><strong>Lambda è¡¨è¾¾å¼ï¼ˆLambda Expressionï¼‰</strong>ï¼Œä¹Ÿç§°ä¸º<strong>åŒ¿åå‡½æ•°ï¼ˆAnonymous Functionï¼‰</strong>ï¼Œæ˜¯ Python ä¸­ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°å®šä¹‰æ–¹å¼ã€‚å®ƒä¸éœ€è¦åƒå¸¸è§„å‡½æ•°é‚£æ ·é€šè¿‡ <code>def</code> å…³é”®å­—å®šä¹‰åç§°ï¼Œè€Œæ˜¯é€šè¿‡ <code>lambda</code> å…³é”®å­—åˆ›å»ºã€‚</p>
<h4 data-id="heading-4">é€šä¿—ç†è§£</h4>
<p>æƒ³è±¡ä¸€ä¸‹ä½ åœ¨åšæ‰‹å·¥ï¼š</p>
<ul>
<li>ğŸ“Œ <strong>æ™®é€šå‡½æ•°ï¼ˆdefï¼‰</strong>ï¼šå°±åƒä¸“ä¸šçš„å·¥å…·ç®±ï¼Œæœ‰åå­—ã€æœ‰è¯´æ˜ä¹¦ï¼Œå¯ä»¥é•¿æœŸä½¿ç”¨</li>
<li>ğŸ“Œ <strong>Lambda è¡¨è¾¾å¼</strong>ï¼šå°±åƒä¸´æ—¶ç”¨çº¸æŠ˜æˆçš„å°å·¥å…·ï¼Œç”¨å®Œå°±æ‰”ï¼Œä¸éœ€è¦ç»™å®ƒèµ·åå­—</li>
</ul>
<p><strong>å½“ä½ éœ€è¦ä¸€ä¸ªç®€å•çš„ã€åªç”¨ä¸€æ¬¡çš„å‡½æ•°æ—¶ï¼Œä¸éœ€è¦ç”¨ <code>def</code> å®šä¹‰å®Œæ•´çš„å‡½æ•°ï¼Œç›´æ¥ç”¨ <code>lambda</code> åˆ›å»ºä¸€ä¸ªåŒ¿åå‡½æ•°å³å¯ã€‚</strong></p>
<h4 data-id="heading-5">ä¸ºä»€ä¹ˆéœ€è¦ Lambda è¡¨è¾¾å¼ï¼Ÿ</h4>
<p><strong>åœºæ™¯ï¼šéœ€è¦ç®€å•å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¸ä½¿ç”¨ Lambdaï¼šéœ€è¦å…ˆå®šä¹‰ä¸€ä¸ªå‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">square</span>(<span class="hljs-params">x</span>):
    <span class="hljs-keyword">return</span> x * x

numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
squared = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(square, numbers))

<span class="hljs-comment"># ä½¿ç”¨ Lambdaï¼šç›´æ¥å®šä¹‰ï¼Œæ— éœ€å‘½å</span>
numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
squared = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: x * x, numbers))  <span class="hljs-comment"># ä¸€è¡Œæå®š</span>
</code></pre>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>âœ… <strong>ä»£ç ç®€æ´</strong>ï¼šç”¨ä¸€è¡Œä»£ç å®ç°ç®€å•åŠŸèƒ½</li>
<li>âœ… <strong>å‡å°‘å‘½åç©ºé—´æ±¡æŸ“</strong>ï¼šä¸éœ€è¦ä¸ºä¸´æ—¶å‡½æ•°èµ·åå­—</li>
<li>âœ… <strong>æé«˜å¯è¯»æ€§</strong>ï¼šåœ¨éœ€è¦å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’æ—¶ï¼Œé€»è¾‘æ›´ç›´è§‚</li>
<li>âœ… <strong>å‡½æ•°å¼ç¼–ç¨‹æ”¯æŒ</strong>ï¼šä¸ <code>map</code>ã€<code>filter</code>ã€<code>reduce</code>ã€<code>sorted</code> ç­‰å‡½æ•°ç»“åˆä½¿ç”¨</li>
</ul>
<h3 data-id="heading-6">Lambda è¯­æ³•è¯¦è§£</h3>
<p align="right"><span>ğŸ”¥ Mustï¼ˆå¿…åšå®è·µï¼‰</span></p>
<h4 data-id="heading-7">åŸºæœ¬è¯­æ³•æ ¼å¼</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">lambda</span> arguments: expression
</code></pre>
<p><strong>è¯­æ³•è¯´æ˜ï¼š</strong></p>
<ul>
<li><strong><code>lambda</code></strong>ï¼šPython é¢„ç•™çš„å…³é”®å­—</li>
<li><strong><code>arguments</code></strong>ï¼šå‚æ•°åˆ—è¡¨ï¼Œå¯åŒ…å« 0 ä¸ªæˆ–å¤šä¸ªå‚æ•°ï¼Œå‚æ•°ä¹‹é—´ç”¨é€—å·åˆ†éš”</li>
<li><strong><code>:</code></strong>ï¼šå†’å·åˆ†éš”å‚æ•°åˆ—è¡¨å’Œè¡¨è¾¾å¼</li>
<li><strong><code>expression</code></strong>ï¼šä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè®¡ç®—ç»“æœå³ä¸ºè¿”å›å€¼ï¼Œæ— éœ€ä½¿ç”¨ <code>return</code> å…³é”®å­—</li>
</ul>
<h4 data-id="heading-8">å‚æ•°ç±»å‹</h4>
<p><strong>1. æ— å‚æ•°ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python">f = <span class="hljs-keyword">lambda</span>: <span class="hljs-string">"Hello, world!"</span>
<span class="hljs-built_in">print</span>(f())  <span class="hljs-comment"># è¾“å‡º: Hello, world!</span>
</code></pre>
<p><strong>2. å•ä¸ªå‚æ•°ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python">x = <span class="hljs-keyword">lambda</span> a: a + <span class="hljs-number">10</span>
<span class="hljs-built_in">print</span>(x(<span class="hljs-number">5</span>))  <span class="hljs-comment"># è¾“å‡º: 15</span>
</code></pre>
<p><strong>3. å¤šä¸ªå‚æ•°ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python">multiply = <span class="hljs-keyword">lambda</span> a, b: a * b
<span class="hljs-built_in">print</span>(multiply(<span class="hljs-number">5</span>, <span class="hljs-number">6</span>))  <span class="hljs-comment"># è¾“å‡º: 30</span>
</code></pre>
<p><strong>4. é»˜è®¤å‚æ•°ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python">add = <span class="hljs-keyword">lambda</span> a, b=<span class="hljs-number">10</span>: a + b
<span class="hljs-built_in">print</span>(add(<span class="hljs-number">5</span>))      <span class="hljs-comment"># è¾“å‡º: 15</span>
<span class="hljs-built_in">print</span>(add(<span class="hljs-number">5</span>, <span class="hljs-number">20</span>))  <span class="hljs-comment"># è¾“å‡º: 25</span>
</code></pre>
<p><strong>5. å¯å˜å‚æ•°ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># *argsï¼šæ¥æ”¶ä»»æ„æ•°é‡çš„ä½ç½®å‚æ•°</span>
sum_all = <span class="hljs-keyword">lambda</span> *args: <span class="hljs-built_in">sum</span>(args)
<span class="hljs-built_in">print</span>(sum_all(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>))  <span class="hljs-comment"># è¾“å‡º: 15</span>

<span class="hljs-comment"># **kwargsï¼šæ¥æ”¶ä»»æ„æ•°é‡çš„å…³é”®å­—å‚æ•°</span>
sum_values = <span class="hljs-keyword">lambda</span> **kwargs: <span class="hljs-built_in">sum</span>(kwargs.values())
<span class="hljs-built_in">print</span>(sum_values(one=<span class="hljs-number">1</span>, two=<span class="hljs-number">2</span>, three=<span class="hljs-number">3</span>))  <span class="hljs-comment"># è¾“å‡º: 6</span>
</code></pre>
<p><strong>6. ä»…å…³é”®å­—å‚æ•°ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python">calculate = <span class="hljs-keyword">lambda</span> x, *, y=<span class="hljs-number">0</span>, z=<span class="hljs-number">0</span>: x + y + z
<span class="hljs-built_in">print</span>(calculate(<span class="hljs-number">1</span>, y=<span class="hljs-number">2</span>, z=<span class="hljs-number">3</span>))  <span class="hljs-comment"># è¾“å‡º: 6</span>
</code></pre>
<h4 data-id="heading-9">è¡¨è¾¾å¼è§„åˆ™</h4>
<p><strong>è¦æ±‚ï¼š</strong></p>
<ul>
<li>âœ… åªèƒ½åŒ…å«<strong>ä¸€ä¸ªè¡¨è¾¾å¼</strong></li>
<li>âœ… è¡¨è¾¾å¼çš„è®¡ç®—ç»“æœå³ä¸ºè¿”å›å€¼</li>
<li>âœ… ä¸èƒ½åŒ…å«è¯­å¥ï¼ˆå¦‚ <code>return</code>ã€<code>pass</code>ã€<code>assert</code> ç­‰ï¼‰</li>
</ul>
<p><strong>åˆæ³•ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç®€å•è®¡ç®—</span>
<span class="hljs-keyword">lambda</span> x: x + <span class="hljs-number">1</span>
<span class="hljs-keyword">lambda</span> x, y: x * y

<span class="hljs-comment"># æ¡ä»¶è¡¨è¾¾å¼ï¼ˆä¸‰å…ƒè¿ç®—ç¬¦ï¼‰</span>
<span class="hljs-keyword">lambda</span> x: <span class="hljs-number">1</span> <span class="hljs-keyword">if</span> x &gt; <span class="hljs-number">10</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>

<span class="hljs-comment"># å‡½æ•°è°ƒç”¨</span>
<span class="hljs-keyword">lambda</span> x: <span class="hljs-built_in">abs</span>(x)
<span class="hljs-keyword">lambda</span> s: s.upper()
</code></pre>
<p><strong>ä¸åˆæ³•ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âŒ ä¸èƒ½åŒ…å«è¯­å¥</span>
<span class="hljs-keyword">lambda</span> x: <span class="hljs-keyword">return</span> x + <span class="hljs-number">1</span>  <span class="hljs-comment"># SyntaxError</span>
<span class="hljs-keyword">lambda</span> x: x + <span class="hljs-number">1</span>; <span class="hljs-built_in">print</span>(x)  <span class="hljs-comment"># SyntaxError</span>

<span class="hljs-comment"># âŒ ä¸èƒ½åŒ…å«å¤šåˆ†æ”¯</span>
<span class="hljs-keyword">lambda</span> x: <span class="hljs-keyword">if</span> x &gt; <span class="hljs-number">10</span>: <span class="hljs-number">1</span> <span class="hljs-keyword">elif</span> x &gt; <span class="hljs-number">5</span>: <span class="hljs-number">2</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>  <span class="hljs-comment"># SyntaxError</span>
</code></pre>
<h4 data-id="heading-10">æ ¸å¿ƒç‰¹æ€§</h4>
<p><strong>1. åŒ¿åæ€§</strong>ï¼šæ²¡æœ‰å›ºå®šå‡½æ•°åï¼Œåªèƒ½é€šè¿‡èµ‹å€¼ç»™å˜é‡æˆ–ä½œä¸ºå‚æ•°ä¼ é€’ä½¿ç”¨</p>
<p><strong>2. ç®€æ´æ€§</strong>ï¼šé€šå¸¸ä»…åŒ…å«ä¸€è¡Œä»£ç ï¼Œä¸“æ³¨äºå®ç°ç®€å•çš„é€»è¾‘</p>
<p><strong>3. å•ä¸€è¡¨è¾¾å¼</strong>ï¼šåªèƒ½åŒ…å«ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä¸èƒ½åŒ…å«å¤šæ¡è¯­å¥</p>
<p><strong>4. è°ƒè¯•å›°éš¾</strong>ï¼šåœ¨å¼‚å¸¸è¿½è¸ªä¸­åªæ˜¾ç¤º <code>&lt;lambda&gt;</code>ï¼Œä¸å¦‚æ™®é€šå‡½æ•°ä¾¿äºè°ƒè¯•</p>
<h3 data-id="heading-11">Lambda åŸºç¡€ä½¿ç”¨ç¤ºä¾‹</h3>
<p align="right"><span>ğŸ”¥ Mustï¼ˆå¿…åšå®è·µï¼‰</span></p>
<h4 data-id="heading-12">åŸºç¡€ç”¨æ³•</h4>
<p><strong>æ— å‚æ•°ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python">f = <span class="hljs-keyword">lambda</span>: <span class="hljs-string">"Hello, world!"</span>
<span class="hljs-built_in">print</span>(f())  <span class="hljs-comment"># è¾“å‡º: Hello, world!</span>
</code></pre>
<p><strong>å•å‚æ•°ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python">square = <span class="hljs-keyword">lambda</span> x: x * x
<span class="hljs-built_in">print</span>(square(<span class="hljs-number">4</span>))  <span class="hljs-comment"># è¾“å‡º: 16</span>

upper = <span class="hljs-keyword">lambda</span> s: s.upper()
<span class="hljs-built_in">print</span>(upper(<span class="hljs-string">"hello"</span>))  <span class="hljs-comment"># è¾“å‡º: HELLO</span>
</code></pre>
<p><strong>å¤šå‚æ•°ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python">add = <span class="hljs-keyword">lambda</span> x, y: x + y
<span class="hljs-built_in">print</span>(add(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>))  <span class="hljs-comment"># è¾“å‡º: 8</span>
</code></pre>
<p><strong>èµ‹å€¼ç»™å˜é‡ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python">add = <span class="hljs-keyword">lambda</span> x, y: x + y
result = add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
<span class="hljs-built_in">print</span>(result)  <span class="hljs-comment"># è¾“å‡º: 3</span>
</code></pre>
<p>ğŸ’¡ <strong>æç¤ºï¼š</strong> PEP 8 å»ºè®®ä¸è¦å°† lambda è¡¨è¾¾å¼ç›´æ¥èµ‹å€¼ç»™æ ‡è¯†ç¬¦ï¼Œåº”è¯¥ä½¿ç”¨ <code>def</code> è¯­å¥ã€‚ä½†å¯¹äºä¸´æ—¶ä½¿ç”¨æˆ–ä½œä¸ºå‚æ•°ä¼ é€’ï¼ŒLambda ä»ç„¶å¾ˆæœ‰ç”¨ã€‚</p>
<h4 data-id="heading-13">å®é™…åº”ç”¨æ¡ˆä¾‹</h4>
<p><strong>æ•°æ®å¤„ç†ï¼šç­›é€‰å¹´é¾„å¤§äº30å²çš„å‘˜å·¥</strong></p>
<pre><code class="hljs language-python" lang="python">employees = [
    {<span class="hljs-string">'name'</span>: <span class="hljs-string">'Alice'</span>, <span class="hljs-string">'age'</span>: <span class="hljs-number">25</span>},
    {<span class="hljs-string">'name'</span>: <span class="hljs-string">'Bob'</span>, <span class="hljs-string">'age'</span>: <span class="hljs-number">35</span>},
    {<span class="hljs-string">'name'</span>: <span class="hljs-string">'Charlie'</span>, <span class="hljs-string">'age'</span>: <span class="hljs-number">45</span>},
]
older_employees = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">filter</span>(<span class="hljs-keyword">lambda</span> emp: emp[<span class="hljs-string">'age'</span>] &gt; <span class="hljs-number">30</span>, employees))
</code></pre>
<p><strong>æ•°æ®è½¬æ¢ï¼šè®¡ç®—é”€å”®æ€»é¢</strong></p>
<pre><code class="hljs language-python" lang="python">sales_data = [
    {<span class="hljs-string">'fruit'</span>: <span class="hljs-string">'peaches'</span>, <span class="hljs-string">'price'</span>: <span class="hljs-number">1.41</span>, <span class="hljs-string">'quantity'</span>: <span class="hljs-number">3</span>},
    {<span class="hljs-string">'fruit'</span>: <span class="hljs-string">'pears'</span>, <span class="hljs-string">'price'</span>: <span class="hljs-number">1.21</span>, <span class="hljs-string">'quantity'</span>: <span class="hljs-number">2</span>},
]
transformed = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(
    <span class="hljs-keyword">lambda</span> entry: {**entry, <span class="hljs-string">'total_sales'</span>: <span class="hljs-built_in">round</span>(entry[<span class="hljs-string">'price'</span>] * entry[<span class="hljs-string">'quantity'</span>], <span class="hljs-number">2</span>)},
    sales_data
))
</code></pre>
<p><strong>æ¸©åº¦è½¬æ¢ï¼šåæ°åº¦è½¬æ‘„æ°åº¦</strong></p>
<pre><code class="hljs language-python" lang="python">fahrenheit = [<span class="hljs-number">90</span>, <span class="hljs-number">72</span>, <span class="hljs-number">81</span>, <span class="hljs-number">63</span>]
celsius = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> temp: <span class="hljs-built_in">round</span>((temp - <span class="hljs-number">32</span>) * <span class="hljs-number">5</span>/<span class="hljs-number">9</span>, <span class="hljs-number">1</span>), fahrenheit))
<span class="hljs-built_in">print</span>(celsius)  <span class="hljs-comment"># è¾“å‡º: [32.2, 22.2, 27.2, 17.2]</span>
</code></pre>
<p><strong>å­—ç¬¦ä¸²å¤„ç†ï¼šç§»é™¤æ•°å­—</strong></p>
<pre><code class="hljs language-python" lang="python">filter_nums = <span class="hljs-keyword">lambda</span> s: <span class="hljs-string">''</span>.join([ch <span class="hljs-keyword">for</span> ch <span class="hljs-keyword">in</span> s <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ch.isdigit()])
<span class="hljs-built_in">print</span>(filter_nums(<span class="hljs-string">"Geeks101"</span>))  <span class="hljs-comment"># è¾“å‡º: Geeks</span>
</code></pre>
<h3 data-id="heading-14">Lambda ä¸å†…ç½®å‡½æ•°ç»“åˆä½¿ç”¨</h3>
<p align="right"><span>ğŸ”¥ Mustï¼ˆå¿…åšå®è·µï¼‰</span></p>
<p>Lambda è¡¨è¾¾å¼æœ€å¸¸è§çš„ç”¨æ³•æ˜¯ä¸ Python å†…ç½®å‡½æ•°ç»“åˆä½¿ç”¨ï¼Œè¿™æ˜¯ Lambda è¡¨è¾¾å¼çš„æ ¸å¿ƒåº”ç”¨åœºæ™¯ã€‚</p>
<h4 data-id="heading-15">ä¸ map() é…åˆï¼šæ‰¹é‡å¤„ç†å…ƒç´ </h4>
<p><code>map(function, iterable)</code> å¯¹å¯è¿­ä»£å¯¹è±¡ä¸­çš„æ¯ä¸ªå…ƒç´ åº”ç”¨å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è®¡ç®—åˆ—è¡¨ä¸­æ¯ä¸ªå…ƒç´ çš„å¹³æ–¹</span>
numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
squared = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: x**<span class="hljs-number">2</span>, numbers))
<span class="hljs-built_in">print</span>(squared)  <span class="hljs-comment"># è¾“å‡º: [1, 4, 9, 16, 25]</span>

<span class="hljs-comment"># å°†å­—ç¬¦ä¸²åˆ—è¡¨è½¬æ¢ä¸ºå¤§å†™</span>
words = [<span class="hljs-string">"hello"</span>, <span class="hljs-string">"world"</span>, <span class="hljs-string">"python"</span>]
uppercase = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> s: s.upper(), words))
<span class="hljs-built_in">print</span>(uppercase)  <span class="hljs-comment"># è¾“å‡º: ['HELLO', 'WORLD', 'PYTHON']</span>

<span class="hljs-comment"># ä¸¤ä¸ªåˆ—è¡¨ç›¸åŠ </span>
result = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x, y: x + y, [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>]))
<span class="hljs-built_in">print</span>(result)  <span class="hljs-comment"># è¾“å‡º: [3, 7, 11]</span>
</code></pre>
<h4 data-id="heading-16">ä¸ filter() é…åˆï¼šç­›é€‰å…ƒç´ </h4>
<p><code>filter(function, iterable)</code> æ ¹æ®å‡½æ•°çš„è¿”å›å€¼ï¼ˆTrue/Falseï¼‰ç­›é€‰å…ƒç´ ï¼Œè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç­›é€‰åˆ—è¡¨ä¸­çš„å¶æ•°</span>
numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>]
even_numbers = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">filter</span>(<span class="hljs-keyword">lambda</span> x: x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>, numbers))
<span class="hljs-built_in">print</span>(even_numbers)  <span class="hljs-comment"># è¾“å‡º: [2, 4, 6, 8]</span>

<span class="hljs-comment"># ç­›é€‰é•¿åº¦å¤§äº5çš„å­—ç¬¦ä¸²</span>
words = [<span class="hljs-string">"apple"</span>, <span class="hljs-string">"banana"</span>, <span class="hljs-string">"cherry"</span>, <span class="hljs-string">"date"</span>]
long_words = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">filter</span>(<span class="hljs-keyword">lambda</span> s: <span class="hljs-built_in">len</span>(s) &gt; <span class="hljs-number">5</span>, words))
<span class="hljs-built_in">print</span>(long_words)  <span class="hljs-comment"># è¾“å‡º: ['banana', 'cherry']</span>
</code></pre>
<h4 data-id="heading-17">ä¸ reduce() é…åˆï¼šç´¯ç§¯è®¡ç®—</h4>
<p><code>reduce(function, iterable[, initializer])</code> å¯¹å¯è¿­ä»£å¯¹è±¡ä¸­çš„å…ƒç´ è¿›è¡Œç´¯ç§¯è®¡ç®—ï¼Œéœ€è¦ä» <code>functools</code> æ¨¡å—å¯¼å…¥ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> reduce

<span class="hljs-comment"># è®¡ç®—åˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ çš„ç´¯ç§¯ä¹˜ç§¯</span>
numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
product = reduce(<span class="hljs-keyword">lambda</span> x, y: x * y, numbers)
<span class="hljs-built_in">print</span>(product)  <span class="hljs-comment"># è¾“å‡º: 120</span>

<span class="hljs-comment"># è®¡ç®—åˆ—è¡¨å…ƒç´ ä¹‹å’Œ</span>
sum_result = reduce(<span class="hljs-keyword">lambda</span> x, y: x + y, [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>])
<span class="hljs-built_in">print</span>(sum_result)  <span class="hljs-comment"># è¾“å‡º: 15</span>

<span class="hljs-comment"># æ‰¾å‡ºåˆ—è¡¨ä¸­çš„æœ€å¤§å€¼</span>
numbers = [<span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">2</span>, <span class="hljs-number">9</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>]
max_value = reduce(<span class="hljs-keyword">lambda</span> x, y: x <span class="hljs-keyword">if</span> x &gt; y <span class="hljs-keyword">else</span> y, numbers)
<span class="hljs-built_in">print</span>(max_value)  <span class="hljs-comment"># è¾“å‡º: 9</span>
</code></pre>
<h4 data-id="heading-18">ä¸ sorted() é…åˆï¼šè‡ªå®šä¹‰æ’åº</h4>
<p><code>sorted(iterable, key=None, reverse=False)</code> å¯¹å¯è¿­ä»£å¯¹è±¡è¿›è¡Œæ’åºï¼Œ<code>key</code> å‚æ•°å¯ä»¥æŒ‡å®šæ’åºçš„ä¾æ®ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æŒ‰å…ƒç»„çš„ç¬¬äºŒä¸ªå…ƒç´ æ’åº</span>
L = [(<span class="hljs-string">'b'</span>, <span class="hljs-number">2</span>), (<span class="hljs-string">'a'</span>, <span class="hljs-number">1</span>), (<span class="hljs-string">'c'</span>, <span class="hljs-number">3</span>), (<span class="hljs-string">'d'</span>, <span class="hljs-number">4</span>)]
sorted_L = <span class="hljs-built_in">sorted</span>(L, key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">1</span>])
<span class="hljs-built_in">print</span>(sorted_L)  <span class="hljs-comment"># è¾“å‡º: [('a', 1), ('b', 2), ('c', 3), ('d', 4)]</span>

<span class="hljs-comment"># æŒ‰å¹´é¾„å‡åºæ’åº</span>
students = [(<span class="hljs-string">'john'</span>, <span class="hljs-string">'A'</span>, <span class="hljs-number">15</span>), (<span class="hljs-string">'jane'</span>, <span class="hljs-string">'B'</span>, <span class="hljs-number">12</span>), (<span class="hljs-string">'dave'</span>, <span class="hljs-string">'B'</span>, <span class="hljs-number">10</span>)]
sorted_students = <span class="hljs-built_in">sorted</span>(students, key=<span class="hljs-keyword">lambda</span> s: s[<span class="hljs-number">2</span>])
<span class="hljs-built_in">print</span>(sorted_students)  <span class="hljs-comment"># è¾“å‡º: [('dave', 'B', 10), ('jane', 'B', 12), ('john', 'A', 15)]</span>

<span class="hljs-comment"># å¤šå…³é”®å­—æ’åºï¼šé¦–å…ˆæŒ‰å¹´é¾„å‡åºï¼Œå¹´é¾„ç›¸åŒæŒ‰åˆ†æ•°é™åº</span>
students = [
    {<span class="hljs-string">'name'</span>: <span class="hljs-string">'Alice'</span>, <span class="hljs-string">'age'</span>: <span class="hljs-number">25</span>, <span class="hljs-string">'score'</span>: <span class="hljs-number">85</span>},
    {<span class="hljs-string">'name'</span>: <span class="hljs-string">'Bob'</span>, <span class="hljs-string">'age'</span>: <span class="hljs-number">20</span>, <span class="hljs-string">'score'</span>: <span class="hljs-number">90</span>},
    {<span class="hljs-string">'name'</span>: <span class="hljs-string">'Charlie'</span>, <span class="hljs-string">'age'</span>: <span class="hljs-number">25</span>, <span class="hljs-string">'score'</span>: <span class="hljs-number">80</span>}
]
sorted_students = <span class="hljs-built_in">sorted</span>(students, key=<span class="hljs-keyword">lambda</span> x: (x[<span class="hljs-string">'age'</span>], -x[<span class="hljs-string">'score'</span>]))
</code></pre>
<h3 data-id="heading-19">Lambda ä¸æ™®é€šå‡½æ•°çš„å¯¹æ¯”</h3>
<p align="right"><span>â­ Shouldï¼ˆå»ºè®®å®è·µï¼‰</span></p>
<h4 data-id="heading-20">å¯¹æ¯”è¡¨æ ¼</h4>


















































<table><thead><tr><th>ç‰¹æ€§</th><th>Lambda è¡¨è¾¾å¼</th><th>æ™®é€šå‡½æ•°ï¼ˆdefï¼‰</th></tr></thead><tbody><tr><td><strong>å®šä¹‰æ–¹å¼</strong></td><td><code>lambda å‚æ•°: è¡¨è¾¾å¼</code></td><td><code>def å‡½æ•°å(å‚æ•°):</code></td></tr><tr><td><strong>æ˜¯å¦æœ‰åå­—</strong></td><td>å¦ï¼ˆå¯ä»¥é€šè¿‡å˜é‡å¼•ç”¨ï¼‰</td><td>æ˜¯</td></tr><tr><td><strong>æ˜¯å¦æ”¯æŒå¤šè¡Œ</strong></td><td>å¦ï¼Œåªèƒ½å†™ä¸€è¡Œè¡¨è¾¾å¼</td><td>å¯ä»¥åŒ…å«å¤šè¡Œä»£ç </td></tr><tr><td><strong>æ˜¯å¦æ”¯æŒè¯­å¥</strong></td><td>å¦ï¼Œåªèƒ½åŒ…å«è¡¨è¾¾å¼</td><td>æ˜¯ï¼Œå¯ä»¥åŒ…å«è¯­å¥</td></tr><tr><td><strong>æ˜¯å¦æ”¯æŒç±»å‹æ³¨è§£</strong></td><td>å¦</td><td>æ˜¯</td></tr><tr><td><strong>æ˜¯å¦æ”¯æŒæ–‡æ¡£å­—ç¬¦ä¸²</strong></td><td>å¦</td><td>æ˜¯</td></tr><tr><td><strong>ä½¿ç”¨åœºæ™¯</strong></td><td>ç®€çŸ­ã€ä¸´æ—¶é€»è¾‘</td><td>å¤æ‚ã€å¯é‡ç”¨é€»è¾‘</td></tr><tr><td><strong>è°ƒè¯•å‹å¥½æ€§</strong></td><td>è¾ƒå·®ï¼ˆå¼‚å¸¸è¿½è¸ªæ˜¾ç¤º <code>&lt;lambda&gt;</code>ï¼‰</td><td>è¾ƒå¥½ï¼ˆæ˜¾ç¤ºå‡½æ•°åï¼‰</td></tr></tbody></table>
<h4 data-id="heading-21">ä»£ç ç¤ºä¾‹å¯¹æ¯”</h4>
<p><strong>ç¤ºä¾‹1ï¼šç®€å•è®¡ç®—</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä½¿ç”¨æ™®é€šå‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x, y</span>):
    <span class="hljs-keyword">return</span> x + y

<span class="hljs-comment"># ä½¿ç”¨ Lambda è¡¨è¾¾å¼</span>
add = <span class="hljs-keyword">lambda</span> x, y: x + y
</code></pre>
<p><strong>ç¤ºä¾‹2ï¼šä½œä¸ºå‚æ•°ä¼ é€’</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä½¿ç”¨æ™®é€šå‡½æ•°ï¼šéœ€è¦å…ˆå®šä¹‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">square</span>(<span class="hljs-params">x</span>):
    <span class="hljs-keyword">return</span> x * x

numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
squared = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(square, numbers))

<span class="hljs-comment"># ä½¿ç”¨ Lambda è¡¨è¾¾å¼ï¼šç›´æ¥å®šä¹‰</span>
numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
squared = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: x * x, numbers))
</code></pre>
<p><strong>ç¤ºä¾‹3ï¼šå¤æ‚é€»è¾‘ï¼ˆLambda ä¸é€‚ç”¨ï¼‰</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âœ… ä½¿ç”¨æ™®é€šå‡½æ•°ï¼šé€‚åˆå¤æ‚é€»è¾‘</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_data</span>(<span class="hljs-params">data</span>):
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> data:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(data, <span class="hljs-built_in">list</span>):
        <span class="hljs-keyword">raise</span> TypeError(<span class="hljs-string">"æ•°æ®å¿…é¡»æ˜¯åˆ—è¡¨"</span>)
    processed = [x * <span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> data <span class="hljs-keyword">if</span> x &gt; <span class="hljs-number">0</span>]
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span>(processed)

<span class="hljs-comment"># âŒ ä½¿ç”¨ Lambdaï¼šæ— æ³•å®ç°å¤æ‚é€»è¾‘</span>
<span class="hljs-comment"># lambda data: ...  # æ— æ³•åŒ…å«å¤šæ¡è¯­å¥ã€å¼‚å¸¸å¤„ç†ç­‰</span>
</code></pre>
<h4 data-id="heading-22">é€‰æ‹©å»ºè®®</h4>
<p><strong>ä½•æ—¶ä½¿ç”¨ Lambda è¡¨è¾¾å¼ï¼š</strong></p>
<ul>
<li>âœ… ç®€å•çš„ã€ä¸€è¡Œä»£ç å°±èƒ½å®ç°çš„é€»è¾‘</li>
<li>âœ… ä½œä¸ºé«˜é˜¶å‡½æ•°çš„å‚æ•°ï¼ˆmapã€filterã€sorted ç­‰ï¼‰</li>
<li>âœ… ä¸´æ—¶å‡½æ•°ï¼Œä¸éœ€è¦å¤ç”¨</li>
<li>âœ… ä¸æƒ³æ±¡æŸ“å‘½åç©ºé—´</li>
</ul>
<p><strong>ä½•æ—¶ä½¿ç”¨æ™®é€šå‡½æ•°ï¼š</strong></p>
<ul>
<li>âœ… å¤æ‚çš„é€»è¾‘ï¼Œéœ€è¦å¤šè¡Œä»£ç </li>
<li>âœ… éœ€è¦æ–‡æ¡£å­—ç¬¦ä¸²è¯´æ˜</li>
<li>âœ… éœ€è¦ç±»å‹æ³¨è§£</li>
<li>âœ… éœ€è¦å¼‚å¸¸å¤„ç†</li>
<li>âœ… éœ€è¦å¤ç”¨å¤šæ¬¡</li>
<li>âœ… éœ€è¦è°ƒè¯•å‹å¥½</li>
</ul>
<h3 data-id="heading-23">Lambda çš„å±€é™æ€§å’Œæ³¨æ„äº‹é¡¹</h3>
<p align="right"><span>â­ Shouldï¼ˆå»ºè®®å®è·µï¼‰</span></p>
<h4 data-id="heading-24">åŠŸèƒ½é™åˆ¶</h4>
<p><strong>1. åªèƒ½åŒ…å«å•ä¸ªè¡¨è¾¾å¼</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âœ… æ­£ç¡®</span>
<span class="hljs-keyword">lambda</span> x: x * <span class="hljs-number">2</span>

<span class="hljs-comment"># âŒ é”™è¯¯</span>
<span class="hljs-keyword">lambda</span> x: x * <span class="hljs-number">2</span>; <span class="hljs-built_in">print</span>(x)  <span class="hljs-comment"># SyntaxError</span>
</code></pre>
<p><strong>2. ä¸èƒ½åŒ…å«è¯­å¥</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âŒ é”™è¯¯</span>
<span class="hljs-keyword">lambda</span> x: <span class="hljs-keyword">return</span> x + <span class="hljs-number">1</span>  <span class="hljs-comment"># SyntaxError</span>
<span class="hljs-keyword">lambda</span> x: <span class="hljs-keyword">pass</span>  <span class="hljs-comment"># SyntaxError</span>
</code></pre>
<p><strong>3. ä¸æ”¯æŒå¤šåˆ†æ”¯ç¨‹åº</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âŒ é”™è¯¯</span>
<span class="hljs-keyword">lambda</span> x: <span class="hljs-keyword">if</span> x &gt; <span class="hljs-number">10</span>: <span class="hljs-number">1</span> <span class="hljs-keyword">elif</span> x &gt; <span class="hljs-number">5</span>: <span class="hljs-number">2</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>  <span class="hljs-comment"># SyntaxError</span>

<span class="hljs-comment"># âœ… æ­£ç¡®ï¼šå¯ä»¥ä½¿ç”¨ä¸‰å…ƒè¿ç®—ç¬¦</span>
<span class="hljs-keyword">lambda</span> x: <span class="hljs-number">1</span> <span class="hljs-keyword">if</span> x &gt; <span class="hljs-number">10</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>
</code></pre>
<p><strong>4. ä¸æ”¯æŒç±»å‹æ³¨è§£</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âŒ é”™è¯¯</span>
<span class="hljs-keyword">lambda</span> x: <span class="hljs-built_in">int</span> -&gt; <span class="hljs-built_in">int</span>: x * <span class="hljs-number">2</span>  <span class="hljs-comment"># SyntaxError</span>

<span class="hljs-comment"># âœ… æ­£ç¡®ï¼šæ™®é€šå‡½æ•°æ”¯æŒç±»å‹æ³¨è§£</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">square</span>(<span class="hljs-params">x: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:
    <span class="hljs-keyword">return</span> x * x
</code></pre>
<p><strong>5. è°ƒè¯•å›°éš¾</strong>
åŒ¿åå‡½æ•°æ²¡æœ‰åå­—ï¼Œåœ¨è°ƒè¯•æ—¶ä¸æ˜“åŒºåˆ†å’Œè·Ÿè¸ªï¼Œå¼‚å¸¸è¿½è¸ªä¸­åªæ˜¾ç¤º <code>&lt;lambda&gt;</code>ã€‚</p>
<h4 data-id="heading-25">å¯è¯»æ€§é™åˆ¶</h4>
<p><strong>å¤æ‚è¡¨è¾¾å¼é™ä½å¯è¯»æ€§</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âŒ å¯è¯»æ€§å·®</span>
result = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: (x * <span class="hljs-number">2</span> <span class="hljs-keyword">if</span> x &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>) + (x ** <span class="hljs-number">2</span> <span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">10</span> <span class="hljs-keyword">else</span> <span class="hljs-number">100</span>), numbers))

<span class="hljs-comment"># âœ… å¯è¯»æ€§å¥½ï¼šä½¿ç”¨æ™®é€šå‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">complex_calculation</span>(<span class="hljs-params">x</span>):
    <span class="hljs-keyword">if</span> x &gt; <span class="hljs-number">0</span>:
        base = x * <span class="hljs-number">2</span>
    <span class="hljs-keyword">else</span>:
        base = <span class="hljs-number">0</span>
    <span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">10</span>:
        extra = x ** <span class="hljs-number">2</span>
    <span class="hljs-keyword">else</span>:
        extra = <span class="hljs-number">100</span>
    <span class="hljs-keyword">return</span> base + extra

result = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(complex_calculation, numbers))
</code></pre>
<h4 data-id="heading-26">è¯„ä¼°æ—¶é—´é—®é¢˜</h4>
<p>åœ¨å¾ªç¯ä¸­ä½¿ç”¨ Lambda ä½œä¸ºé—­åŒ…æ—¶ï¼Œéœ€è¦æ³¨æ„è‡ªç”±å˜é‡çš„ç»‘å®šæ—¶æœºã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âŒ é—®é¢˜ï¼šæ‰€æœ‰ Lambda å‡½æ•°éƒ½æ•è·äº†å¾ªç¯å˜é‡çš„æœ€ç»ˆå€¼</span>
numbers = <span class="hljs-string">'one'</span>, <span class="hljs-string">'two'</span>, <span class="hljs-string">'three'</span>
funcs = []
<span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> numbers:
    funcs.append(<span class="hljs-keyword">lambda</span>: <span class="hljs-built_in">print</span>(n))

<span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> funcs:
    f()
<span class="hljs-comment"># è¾“å‡º: three, three, threeï¼ˆä¸æ˜¯é¢„æœŸçš„ one, two, threeï¼‰</span>

<span class="hljs-comment"># âœ… è§£å†³æ–¹æ¡ˆï¼šåœ¨å®šä¹‰æ—¶ç»‘å®š</span>
<span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> numbers:
    funcs.append(<span class="hljs-keyword">lambda</span> n=n: <span class="hljs-built_in">print</span>(n))  <span class="hljs-comment"># ä½¿ç”¨é»˜è®¤å‚æ•°ç»‘å®š</span>
</code></pre>
<h3 data-id="heading-27">Lambda æœ€ä½³å®è·µ</h3>
<p align="right"><span>â­ Shouldï¼ˆå»ºè®®å®è·µï¼‰</span></p>
<h4 data-id="heading-28">ä½•æ—¶ä½¿ç”¨ Lambda è¡¨è¾¾å¼</h4>
<p>âœ… <strong>æ¨èåœºæ™¯ï¼š</strong></p>
<ol>
<li>ä»…éœ€ä¸€è¡Œé€»è¾‘çš„ä¸´æ—¶å‡½æ•°</li>
<li>ä½œä¸ºé«˜é˜¶å‡½æ•°çš„å‚æ•°ï¼ˆmapã€filterã€sortedã€reduce ç­‰ï¼‰</li>
<li>ä¸æƒ³æ±¡æŸ“å‘½åç©ºé—´</li>
<li>ç”¨äº key å‡½æ•°ï¼ˆæ’åºã€æŸ¥æ‰¾æœ€å¤§å€¼/æœ€å°å€¼ç­‰ï¼‰</li>
</ol>
<h4 data-id="heading-29">ä½•æ—¶é¿å…ä½¿ç”¨ Lambda è¡¨è¾¾å¼</h4>
<p>âŒ <strong>é¿å…åœºæ™¯ï¼š</strong></p>
<ol>
<li>é€»è¾‘å¤æ‚éœ€å¤šè¡Œ</li>
<li>éœ€è¦è°ƒè¯•æˆ–å¤ç”¨</li>
<li>é˜…è¯»æ€§å¤§å¹…ä¸‹é™</li>
<li>éœ€è¦æ–‡æ¡£å­—ç¬¦ä¸²</li>
<li>éœ€è¦ç±»å‹æ³¨è§£</li>
<li>éœ€è¦å¼‚å¸¸å¤„ç†</li>
</ol>
<h4 data-id="heading-30">å¯¹æ¯”ç¤ºä¾‹ï¼šä¸ä½¿ç”¨ Lambda çš„é—®é¢˜</h4>
<p><strong>åœºæ™¯1ï¼šä½¿ç”¨ map() å¤„ç†åˆ—è¡¨</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âŒ ä¸ä½¿ç”¨ Lambdaï¼šä»£ç å†—é•¿</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">square</span>(<span class="hljs-params">x</span>):
    <span class="hljs-keyword">return</span> x * x

numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
squared = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(square, numbers))

<span class="hljs-comment"># âœ… ä½¿ç”¨ Lambdaï¼šä»£ç ç®€æ´</span>
numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
squared = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: x * x, numbers))
</code></pre>
<p><strong>åœºæ™¯2ï¼šä½¿ç”¨ filter() ç­›é€‰å…ƒç´ </strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âŒ ä¸ä½¿ç”¨ Lambdaï¼šä»£ç å†—é•¿</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">is_even</span>(<span class="hljs-params">n</span>):
    <span class="hljs-keyword">return</span> n % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>

numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>]
even_numbers = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">filter</span>(is_even, numbers))

<span class="hljs-comment"># âœ… ä½¿ç”¨ Lambdaï¼šä»£ç ç®€æ´</span>
numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>]
even_numbers = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">filter</span>(<span class="hljs-keyword">lambda</span> x: x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>, numbers))
</code></pre>
<h4 data-id="heading-31">Lambda vs æ™®é€šå‡½æ•° vs åˆ—è¡¨æ¨å¯¼å¼</h4>
<pre><code class="hljs language-python" lang="python">numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]

<span class="hljs-comment"># æ–¹å¼1ï¼šä½¿ç”¨æ™®é€šå‡½æ•° + map</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">square</span>(<span class="hljs-params">x</span>):
    <span class="hljs-keyword">return</span> x * x
result1 = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(square, numbers))

<span class="hljs-comment"># æ–¹å¼2ï¼šä½¿ç”¨ Lambda + map</span>
result2 = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: x * x, numbers))

<span class="hljs-comment"># æ–¹å¼3ï¼šä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼</span>
result3 = [x * x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> numbers]
</code></pre>
<p><strong>å¯¹æ¯”åˆ†æï¼š</strong></p>





























<table><thead><tr><th>æ–¹å¼</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>æ™®é€šå‡½æ•° + map</strong></td><td>å¯å¤ç”¨ã€å¯æµ‹è¯•ã€æœ‰æ–‡æ¡£å­—ç¬¦ä¸²</td><td>ä»£ç å†—é•¿ã€éœ€è¦å‘½å</td><td>é€»è¾‘å¤æ‚ã€éœ€è¦å¤ç”¨</td></tr><tr><td><strong>Lambda + map</strong></td><td>ä»£ç ç®€æ´ã€å†…è”å®šä¹‰</td><td>ä¸èƒ½å¤ç”¨ã€è°ƒè¯•å›°éš¾</td><td>ç®€å•é€»è¾‘ã€ä¸€æ¬¡æ€§ä½¿ç”¨</td></tr><tr><td><strong>åˆ—è¡¨æ¨å¯¼å¼</strong></td><td>æœ€ Pythonicã€å¯è¯»æ€§å¼º</td><td>åªèƒ½å¤„ç†åˆ—è¡¨</td><td>ç®€å•è½¬æ¢ã€Python é£æ ¼</td></tr></tbody></table>
<p>ğŸ’¡ <strong>å»ºè®®ï¼š</strong> å¯¹äºç®€å•çš„è½¬æ¢æ“ä½œï¼Œä¼˜å…ˆä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼ï¼›å¯¹äºéœ€è¦å‡½æ•°å¼ç¼–ç¨‹é£æ ¼çš„åœºæ™¯ï¼Œä½¿ç”¨ Lambda + map/filterï¼›å¯¹äºå¤æ‚é€»è¾‘ï¼Œä½¿ç”¨æ™®é€šå‡½æ•°ã€‚</p>
<h4 data-id="heading-32">ä½¿ç”¨å»ºè®®</h4>
<p><strong>1. ä¿æŒç®€æ´</strong>ï¼šLambda å‡½æ•°åº”è¯¥ä¿æŒç®€æ´ï¼Œé¿å…è¿‡åº¦å¤æ‚çš„é€»è¾‘ã€‚</p>
<p><strong>2. ä¼˜å…ˆè€ƒè™‘å¯è¯»æ€§</strong>ï¼šå¦‚æœä½¿ç”¨ Lambda ç‰ºç‰²äº†å¯è¯»æ€§ï¼Œåº”è¯¥å®šä¹‰å‘½åå‡½æ•°ã€‚</p>
<p><strong>3. éµå¾ª PEP 8</strong>ï¼šPEP 8 å»ºè®®ä¸è¦å°† lambda è¡¨è¾¾å¼ç›´æ¥èµ‹å€¼ç»™æ ‡è¯†ç¬¦ï¼Œåº”è¯¥ä½¿ç”¨ <code>def</code> è¯­å¥ã€‚</p>
<h4 data-id="heading-33">æ›¿ä»£æ–¹æ¡ˆ</h4>
<p><strong>1. åˆ—è¡¨æ¨å¯¼å¼ï¼šæ›¿ä»£ map() å’Œ filter()</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä½¿ç”¨ map</span>
<span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: x**<span class="hljs-number">2</span>, numbers))
<span class="hljs-comment"># æ›¿ä»£ä¸º</span>
[x**<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> numbers]

<span class="hljs-comment"># ä½¿ç”¨ filter</span>
<span class="hljs-built_in">list</span>(<span class="hljs-built_in">filter</span>(<span class="hljs-keyword">lambda</span> x: x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>, numbers))
<span class="hljs-comment"># æ›¿ä»£ä¸º</span>
[x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> numbers <span class="hljs-keyword">if</span> x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>]
</code></pre>
<p><strong>2. æ™®é€šå‡½æ•°ï¼šå½“é€»è¾‘å¤æ‚æ—¶</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¤æ‚é€»è¾‘ä½¿ç”¨æ™®é€šå‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_data</span>(<span class="hljs-params">data</span>):
    <span class="hljs-string">"""å¤„ç†æ•°æ®çš„å¤æ‚é€»è¾‘"""</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> data:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
    <span class="hljs-keyword">return</span> result
</code></pre>
<h3 data-id="heading-34">å¸¸è§é”™è¯¯ä¸è°ƒè¯•æŠ€å·§</h3>
<p align="right"><span>â­ Shouldï¼ˆå»ºè®®å®è·µï¼‰</span></p>
<h4 data-id="heading-35">è¯­æ³•é”™è¯¯</h4>
<p><strong>1. å¿˜è®° lambda å…³é”®å­—</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âŒ é”™è¯¯</span>
x = (x: x + <span class="hljs-number">1</span>)  <span class="hljs-comment"># SyntaxError</span>

<span class="hljs-comment"># âœ… æ­£ç¡®</span>
x = <span class="hljs-keyword">lambda</span> x: x + <span class="hljs-number">1</span>
</code></pre>
<p><strong>2. åœ¨å¾ªç¯ä¸­åˆ›å»º Lambda æ—¶æœªæ­£ç¡®ç»‘å®šå˜é‡</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âŒ é”™è¯¯ï¼šæ‰€æœ‰ Lambda æ•è·äº†å¾ªç¯å˜é‡çš„æœ€ç»ˆå€¼</span>
funcs = []
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>):
    funcs.append(<span class="hljs-keyword">lambda</span>: <span class="hljs-built_in">print</span>(i))

<span class="hljs-comment"># âœ… æ­£ç¡®ï¼šåœ¨å®šä¹‰æ—¶ç»‘å®š</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>):
    funcs.append(<span class="hljs-keyword">lambda</span> i=i: <span class="hljs-built_in">print</span>(i))
</code></pre>
<p><strong>3. å¿˜è®°å°† map/filter çš„ç»“æœè½¬æ¢ä¸ºåˆ—è¡¨</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âŒ é”™è¯¯ï¼šPython 3 ä¸­ map/filter è¿”å›è¿­ä»£å™¨</span>
result = <span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: x * <span class="hljs-number">2</span>, [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])

<span class="hljs-comment"># âœ… æ­£ç¡®ï¼šè½¬æ¢ä¸ºåˆ—è¡¨</span>
result = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: x * <span class="hljs-number">2</span>, [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]))
</code></pre>
<h4 data-id="heading-36">è°ƒè¯•æŠ€å·§</h4>
<p><strong>å°† Lambda ä¸´æ—¶è½¬æ¢ä¸ºå‘½åå‡½æ•°è¿›è¡Œè°ƒè¯•</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åŸå§‹ Lambda</span>
result = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: x * <span class="hljs-number">2</span>, numbers))

<span class="hljs-comment"># è°ƒè¯•æ—¶è½¬æ¢ä¸ºå‘½åå‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">debug_multiply</span>(<span class="hljs-params">x</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Processing: <span class="hljs-subst">{x}</span>"</span>)
    <span class="hljs-keyword">return</span> x * <span class="hljs-number">2</span>

result = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(debug_multiply, numbers))
</code></pre>
<h3 data-id="heading-37">å†™åœ¨æœ€å</h3>
<p>é€šè¿‡æœ¬æ–‡çš„å­¦ä¹ ï¼Œæˆ‘ä»¬ç³»ç»Ÿåœ°æŒæ¡äº† Python Lambda è¡¨è¾¾å¼çš„æ ¸å¿ƒçŸ¥è¯†ï¼š</p>
<p>ğŸ¯ <strong>æ ¸å¿ƒè¦ç‚¹å›é¡¾ï¼š</strong></p>
<ul>
<li>Lambda è¡¨è¾¾å¼æ˜¯åŒ¿åå‡½æ•°ï¼Œä½¿ç”¨ <code>lambda</code> å…³é”®å­—å®šä¹‰</li>
<li>è¯­æ³•æ ¼å¼ï¼š<code>lambda arguments: expression</code></li>
<li>åªèƒ½åŒ…å«ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä¸èƒ½åŒ…å«è¯­å¥</li>
<li>é€‚åˆç®€å•çš„ã€ä¸€æ¬¡æ€§çš„å‡½æ•°å®šä¹‰</li>
<li>å¸¸ä¸ <code>map()</code>ã€<code>filter()</code>ã€<code>reduce()</code>ã€<code>sorted()</code> ç­‰å†…ç½®å‡½æ•°ç»“åˆä½¿ç”¨</li>
</ul>
<p>ğŸ’¡ <strong>ä½¿ç”¨å»ºè®®ï¼š</strong></p>
<ul>
<li>ä¿æŒç®€æ´ï¼Œé¿å…è¿‡åº¦å¤æ‚çš„é€»è¾‘</li>
<li>ä¼˜å…ˆè€ƒè™‘å¯è¯»æ€§ï¼Œå¿…è¦æ—¶ä½¿ç”¨æ™®é€šå‡½æ•°</li>
<li>éµå¾ª PEP 8 è§„èŒƒï¼Œä¸è¦å°† Lambda ç›´æ¥èµ‹å€¼ç»™æ ‡è¯†ç¬¦</li>
<li>åœ¨ç®€å•åœºæ™¯ä¸‹ä½¿ç”¨ï¼Œå¤æ‚é€»è¾‘ä½¿ç”¨æ™®é€šå‡½æ•°</li>
</ul>
<p>ğŸš€ <strong>ä¸‹ä¸€æ­¥å­¦ä¹ ï¼š</strong></p>
<ul>
<li>æ·±å…¥å­¦ä¹ å‡½æ•°å¼ç¼–ç¨‹æ¦‚å¿µ</li>
<li>æŒæ¡æ›´å¤šå†…ç½®å‡½æ•°çš„ä½¿ç”¨</li>
<li>å­¦ä¹ åˆ—è¡¨æ¨å¯¼å¼å’Œç”Ÿæˆå™¨è¡¨è¾¾å¼</li>
<li>äº†è§£è£…é¥°å™¨å’Œé—­åŒ…çš„é«˜çº§ç”¨æ³•</li>
</ul>
<p>å¸Œæœ›æœ¬æ–‡æ¡£èƒ½å¤Ÿå¸®åŠ©ä½ å½»åº•æŒæ¡ Lambda è¡¨è¾¾å¼ï¼Œå†™å‡ºæ›´ç®€æ´ã€æ›´ä¼˜é›…çš„ Python ä»£ç ï¼ğŸ’ª</p>
<hr/>
<p><strong>ä½œè€…</strong>ï¼šéƒ‘æ©èµ<br/>
<strong>æœºæ„</strong>ï¼šå¦é—¨å·¥å­¦é™¢äººå·¥æ™ºèƒ½åˆ›ä½œåŠ<br/>
<strong>æ—¥æœŸ</strong>ï¼š2025 å¹´ 11 æœˆ 12 æ—¥</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…¨å›½åŠ¨æ€IPä»£ç†æ€ä¹ˆé€‰ï¼Ÿè¿™3ä¸ªåœºæ™¯å‘Šè¯‰ä½ çœŸå®éœ€æ±‚]]></title>    <link>https://juejin.cn/post/7571378103282679814</link>    <guid>https://juejin.cn/post/7571378103282679814</guid>    <pubDate>2025-11-12T05:52:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571378103282679814" data-draft-id="7571378103282597894" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…¨å›½åŠ¨æ€IPä»£ç†æ€ä¹ˆé€‰ï¼Ÿè¿™3ä¸ªåœºæ™¯å‘Šè¯‰ä½ çœŸå®éœ€æ±‚"/> <meta itemprop="keywords" content="TCP/IP"/> <meta itemprop="datePublished" content="2025-11-12T05:52:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¬å”¤ç¥é¾™"/> <meta itemprop="url" content="https://juejin.cn/user/640384299179028"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…¨å›½åŠ¨æ€IPä»£ç†æ€ä¹ˆé€‰ï¼Ÿè¿™3ä¸ªåœºæ™¯å‘Šè¯‰ä½ çœŸå®éœ€æ±‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/640384299179028/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¬å”¤ç¥é¾™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T05:52:32.000Z" title="Wed Nov 12 2025 05:52:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>
	ç°åœ¨å¾ˆå¤šåšç½‘ç»œé¡¹ç›®çš„æœ‹å‹éƒ½é‡åˆ°è¿‡è¿™æ ·çš„æƒ…å†µï¼šåˆšæ³¨å†Œçš„æ–°è´¦å·çªç„¶è¢«å°ï¼Œç½‘é¡µæ•°æ®æŠ“å–æ€»æ˜¯è¢«æ‹¦æˆªï¼Œæµ‹è¯•è½¯ä»¶æ—¶é¢‘ç¹å‡ºç°éªŒè¯ç ã€‚è¿™äº›é—®é¢˜å…¶å®éƒ½èƒ½é€šè¿‡åŠ¨æ€IPä»£ç†æ¥è§£å†³ã€‚ä½†å¸‚åœºä¸ŠæœåŠ¡å•†é‚£ä¹ˆå¤šï¼Œåˆ°åº•å“ªç§é€‚åˆè‡ªå·±ï¼Ÿä»Šå¤©å’±ä»¬å°±èŠèŠåŠ¨æ€IPä»£ç†çš„çœŸå®ä½¿ç”¨åœºæ™¯ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ æ€ä¹ˆé€‰å¯¹æœåŠ¡å•†ã€‚
</p>
<h2 data-id="heading-0">
	ä¸€ã€åŠ¨æ€IPä»£ç†èƒ½å¸®ä½ è§£å†³å“ªäº›å®é™…é—®é¢˜ï¼Ÿ
</h2>
<p>
	1. è´¦å·å¤šå¼€é˜²å…³è”ï¼šåšç”µå•†çš„æœ‹å‹éƒ½çŸ¥é“ï¼ŒåŒä¸€è®¾å¤‡ç™»å½•å¤šä¸ªåº—é“ºè´¦å·å®¹æ˜“è¢«å¹³å°åˆ¤å®šå…³è”ã€‚ç”¨åŠ¨æ€IPä»£ç†å¯ä»¥è®©æ¯ä¸ªè´¦å·éƒ½æœ‰ç‹¬ç«‹IPåœ°å€ï¼Œæ¯”å¦‚ç”¨ç¥é¾™HTTPçš„ç²¾å‡†å®šä½åŠŸèƒ½ï¼Œç»™ä¸åŒåœ°åŒºçš„åº—é“ºè´¦å·åŒ¹é…å¯¹åº”åŸå¸‚IPã€‚
</p>
<p>
	2. æ•°æ®é‡‡é›†ä¸ä¸­æ–­ï¼šçˆ¬è™«ç¨‹åºç»å¸¸é‡åˆ°IPè¢«å°çš„æƒ…å†µã€‚åŠ¨æ€IPæ± èƒ½è‡ªåŠ¨åˆ‡æ¢IPåœ°å€ï¼Œåƒæœ‰äº›ç”¨æˆ·åé¦ˆç”¨ç¥é¾™IPçš„ç™¾ä¸‡çº§èµ„æºæ± ï¼Œè¿ç»­é‡‡é›†3å°æ—¶éƒ½æ²¡è§¦å‘åçˆ¬æœºåˆ¶ã€‚
</p>
<p>
	3. ç½‘ç»œæµ‹è¯•æ›´çœŸå®ï¼šæ¸¸æˆå¼€å‘è€…æµ‹è¯•æœåŠ¡å™¨æ‰¿è½½èƒ½åŠ›æ—¶ï¼Œç”¨åŠ¨æ€IPå¯ä»¥æ¨¡æ‹ŸçœŸå®ç”¨æˆ·åˆ†å¸ƒã€‚æœ‰ä¸ªåšæ‰‹æ¸¸çš„æœ‹å‹è¯´ï¼Œç”¨æ”¯æŒ30mså“åº”çš„ä»£ç†æœåŠ¡ï¼Œèƒ½æµ‹å‡ºä¸åŒåœ°åŒºç©å®¶çš„çœŸå®å»¶è¿Ÿæ•°æ®ã€‚
</p>
<h2 data-id="heading-1">
	äºŒã€é€‰æœåŠ¡å•†è¦çœ‹è¿™4ä¸ªç¡¬æŒ‡æ ‡
</h2>
<p>
	1. èµ„æºæ± è§„æ¨¡ï¼šIPæ•°é‡ç›´æ¥å½±å“ä½¿ç”¨æ•ˆæœï¼Œå»ºè®®é€‰æ‹©åƒä¸‡çº§èµ„æºæ± çš„æœåŠ¡å•†ã€‚æ¯”å¦‚ç¥é¾™HTTPæœ‰3000ä¸‡+IPå‚¨å¤‡ï¼Œèƒ½ç¡®ä¿æ¯æ¬¡åˆ‡æ¢éƒ½æ˜¯æ–°åœ°å€ã€‚
</p>
<p>
	2. çº¿è·¯ç¨³å®šæ€§ï¼šæ³¨æ„çœ‹æœåŠ¡å•†æ˜¯å¦ç›´è¿è¿è¥å•†æœºæˆ¿ã€‚æœ‰ä¸ªåšç›´æ’­çš„æœ‹å‹å¯¹æ¯”å‘ç°ï¼Œç”¨è‡ªè¥æœºæˆ¿çš„ä»£ç†æœåŠ¡ï¼Œç›´æ’­æ¨æµå¡é¡¿ç‡ä»15%é™åˆ°äº†3%ã€‚
</p>
<p>
	3. å“åº”é€Ÿåº¦ï¼šå¤„ç†å®æ—¶ä¸šåŠ¡è¦é€‰ä½å»¶è¿Ÿçš„ï¼Œåƒéœ€è¦é¢‘ç¹åˆ‡æ¢IPçš„éªŒè¯ç è¯†åˆ«åœºæ™¯ï¼Œç”¨æ”¯æŒ30mså“åº”çš„æœåŠ¡æ•ˆç‡èƒ½æå‡40%ã€‚
</p>
<p>
	4. åˆè§„ä¿éšœï¼šå¿…é¡»ç¡®è®¤æœåŠ¡å•†æœ‰æ­£è§„è¿è¥å•†æˆæƒã€‚æŸæ•°æ®å…¬å¸æ›¾å› ä½¿ç”¨æ¥è·¯ä¸æ˜çš„ä»£ç†IPï¼Œå¯¼è‡´æ•´ä¸ªé¡¹ç›®è¢«å«åœã€‚
</p>
<h2 data-id="heading-2">
	ä¸‰ã€æ‰‹æŠŠæ‰‹æ•™ä½ é…ç½®åŠ¨æ€IPä»£ç†
</h2>
<p>
	1. æµ‹è¯•ç¯å¢ƒæ­å»ºï¼šå…ˆç”³è¯·å…è´¹è¯•ç”¨ï¼Œç¥é¾™HTTPå’Œç¥é¾™IPéƒ½æä¾›æµ‹è¯•IPã€‚ç”¨Pythonå†™ä¸ªç®€å•çš„è¯·æ±‚è„šæœ¬ï¼Œæµ‹è¯•ä¸åŒæ—¶æ®µçš„è¿æ¥æˆåŠŸç‡ã€‚
</p>
<p>
	2. ä¸šåŠ¡åœºæ™¯åŒ¹é…ï¼šå¦‚æœæ˜¯é•¿æœŸéœ€è¦å›ºå®šåœ°åŒºçš„IPï¼Œé€‰æ”¯æŒåŸå¸‚å®šä½çš„æœåŠ¡ã€‚æœ‰ä¸ªåšæœ¬åœ°ç”Ÿæ´»æ¨å¹¿çš„å›¢é˜Ÿï¼Œç”¨ç²¾å‡†åˆ°åŒºå¿çš„ä»£ç†IPï¼Œå¹¿å‘Šç‚¹å‡»ç‡æå‡äº†27%ã€‚
</p>
<p>
	3. å¼‚å¸¸ç›‘æ§è®¾ç½®ï¼šåœ¨ä»£ç†ç®¡ç†åå°å¼€å¯è‡ªåŠ¨å‘Šè­¦åŠŸèƒ½ã€‚æŸç”µå•†è¿è¥å›¢é˜Ÿè®¾ç½®IPå¯ç”¨ç‡ä½äº95%è‡ªåŠ¨åˆ‡æ¢ï¼Œè´¦å·å­˜æ´»å‘¨æœŸå»¶é•¿äº†2ä¸ªæœˆã€‚
</p>
<h2 data-id="heading-3">
	å››ã€å¸¸è§é—®é¢˜ç­”ç–‘
</h2>
<p>
	Qï¼šåŠ¨æ€IPä»£ç†åˆæ³•å—ï¼Ÿ<br/>
Aï¼šé€‰æ‹©æœ‰æ­£è§„æˆæƒï¼ˆå¦‚ä¸‰å¤§è¿è¥å•†åˆä½œï¼‰çš„æœåŠ¡å•†å®Œå…¨åˆæ³•ï¼Œä¸ªäººä½¿ç”¨æ³¨æ„éµå®ˆå„å¹³å°è§„åˆ™ã€‚
</p>
<p>
	Qï¼šé«˜åŒ¿åå’Œé€æ˜ä»£ç†æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br/>
Aï¼šé«˜åŒ¿åä»£ç†ä¸ä¼šæ³„éœ²çœŸå®IPï¼Œé€‚åˆéœ€è¦ä¸¥æ ¼éšè—èº«ä»½çš„åœºæ™¯ã€‚åƒç¥é¾™IPç”¨çš„æ·±åº¦åŠ å¯†æŠ€æœ¯ï¼Œè¿ç½‘ç»œè¿è¥å•†éƒ½æ£€æµ‹ä¸åˆ°ä»£ç†ç—•è¿¹ã€‚
</p>
<p>
	Qï¼šåŠ¨æ€IPä½¿ç”¨æˆæœ¬é«˜å—ï¼Ÿ<br/>
Aï¼šç°åœ¨å¾ˆå¤šæœåŠ¡å•†éƒ½æ”¯æŒæŒ‰éœ€ä»˜è´¹ã€‚æ¯”å¦‚éœ€è¦çŸ­æœŸå¯†é›†ä½¿ç”¨çš„ï¼Œå¯ä»¥é€‰ç¥é¾™HTTPçš„å®šåˆ¶å¥—é¤ï¼Œæ¯”ä¼ ç»Ÿæ–¹æ¡ˆèŠ‚çœ30%æˆæœ¬ã€‚
</p>
<h2 data-id="heading-4">
	äº”ã€ä¸åŒåœºæ™¯çš„æœåŠ¡å•†é€‰æ‹©å»ºè®®
</h2>
<p>
	1. å¤§è§„æ¨¡æ•°æ®é‡‡é›†ï¼šæ¨èç¥é¾™HTTPçš„å¹¶å‘æ–¹æ¡ˆï¼Œä»–ä»¬ç»™æŸAIå…¬å¸å®šåˆ¶çš„æ–¹æ¡ˆï¼Œå•æ—¥å¤„ç†800ä¸‡æ¬¡è¯·æ±‚æ— å‹åŠ›ã€‚
</p>
<p>
	2. éœ€è¦ä½å»¶è¿Ÿåœºæ™¯ï¼šæ¯”å¦‚æ¸¸æˆè¯•ç©ã€ç›´æ’­æ¨æµï¼Œç¥é¾™IPçš„30msçº¿è·¯å®æµ‹ä¸¢åŒ…ç‡ä»…0.3%ã€‚
</p>
<p>
	3. é•¿æœŸç¨³å®šéœ€æ±‚ï¼šé€‰æ”¯æŒå¸¦å®½å®šåˆ¶çš„æœåŠ¡ï¼ŒæŸMCNæœºæ„ç”¨15Mç‹¬äº«å¸¦å®½ï¼Œè¿ç»­7å¤©ç›´æ’­æ²¡æ‰è¿‡çº¿ã€‚
</p>
<p>
	é€‰åŠ¨æ€IPä»£ç†å°±åƒæ‰¾åˆä½œä¼™ä¼´ï¼Œå…³é”®è¦çœ‹èƒ½å¦è§£å†³å®é™…é—®é¢˜ã€‚å»ºè®®å¤§å®¶å…ˆæ˜ç¡®è‡ªå·±çš„ä¸šåŠ¡éœ€æ±‚ï¼Œå†å¯¹æ¯”æœåŠ¡å•†çš„èµ„æºè´¨é‡å’ŒæŠ€æœ¯æ”¯æŒã€‚ç°åœ¨å¾ˆå¤šæ­£è§„æœåŠ¡å•†éƒ½æœ‰å…è´¹æµ‹è¯•é€šé“ï¼Œäº²è‡ªè¯•ç”¨æ¯”çœ‹åç¯‡æµ‹è¯„éƒ½æœ‰ç”¨ã€‚è®°ä½ï¼Œå¥½çš„ä»£ç†æœåŠ¡åº”è¯¥æ˜¯è®©ç”¨æˆ·æ„Ÿå—ä¸åˆ°å®ƒçš„å­˜åœ¨ï¼Œå´èƒ½å®å®åœ¨åœ¨æå‡ä¸šåŠ¡æ•ˆç‡ã€‚
</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çˆ¬è™«ä»£ç†IPæ± æ­å»ºæŒ‡å—ï¼šå®æµ‹æ¨èé«˜å¯ç”¨æœåŠ¡å•†]]></title>    <link>https://juejin.cn/post/7571378103282696198</link>    <guid>https://juejin.cn/post/7571378103282696198</guid>    <pubDate>2025-11-12T05:59:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571378103282696198" data-draft-id="7571402480966909988" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çˆ¬è™«ä»£ç†IPæ± æ­å»ºæŒ‡å—ï¼šå®æµ‹æ¨èé«˜å¯ç”¨æœåŠ¡å•†"/> <meta itemprop="keywords" content="çˆ¬è™«,TCP/IP"/> <meta itemprop="datePublished" content="2025-11-12T05:59:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¬å”¤ç¥é¾™"/> <meta itemprop="url" content="https://juejin.cn/user/640384299179028"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çˆ¬è™«ä»£ç†IPæ± æ­å»ºæŒ‡å—ï¼šå®æµ‹æ¨èé«˜å¯ç”¨æœåŠ¡å•†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/640384299179028/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¬å”¤ç¥é¾™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T05:59:30.000Z" title="Wed Nov 12 2025 05:59:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åšè¿‡ç½‘ç»œæ•°æ®æŠ“å–çš„æœ‹å‹éƒ½çŸ¥é“ï¼ŒIPè¢«å°æ˜¯çˆ¬è™«è·¯ä¸Šæœ€å¤§çš„ç»Šè„šçŸ³ã€‚ä»Šå¤©æˆ‘ä»¬å°±æ¥èŠèŠå¦‚ä½•é€šè¿‡ä»£ç†IPæ± è§£å†³è¿™ä¸ªéš¾é¢˜â€”â€”ä¸ç”¨æ‡‚å¤æ‚çš„æŠ€æœ¯åŸç†ï¼Œåªè¦é€‰å¯¹å·¥å…·å°±èƒ½è®©æ•°æ®é‡‡é›†æ•ˆç‡ç¿»å€ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆä½ çš„çˆ¬è™«æ€»è¢«æ‹¦æˆªï¼Ÿ</h2>
<p>å¾ˆå¤šæ–°æ‰‹ä¼šç–‘æƒ‘ï¼šæ˜æ˜ç”¨äº†ä»£ç†IPï¼Œä¸ºä»€ä¹ˆè¿˜æ˜¯ä¼šè¢«ç›®æ ‡ç½‘ç«™å‘ç°ï¼Ÿè¿™é‡Œæœ‰ä¸ªè¯¯åŒºï¼šå•ç”¨å‡ ä¸ªä»£ç†IPæ ¹æœ¬ä¸å¤Ÿã€‚å½“ä½ çš„è¯·æ±‚é›†ä¸­åœ¨å°‘æ•°IPæ—¶ï¼Œç½‘ç«™ç³»ç»Ÿä¼šç«‹å³è¯†åˆ«å¼‚å¸¸æµé‡ã€‚</p>
<p>ä¸¾ä¸ªçœŸå®æ¡ˆä¾‹ï¼šæŸç”µå•†å¹³å°è¿è¥å›¢é˜Ÿéœ€è¦é‡‡é›†ç«å“ä»·æ ¼æ•°æ®ï¼Œæœ€åˆä½¿ç”¨å…è´¹ä»£ç†IPï¼Œç»“æœåŠå°æ—¶å†…å°±è¢«å°äº†20ä¸ªIPã€‚æ”¹ç”¨ä¸“ä¸šä»£ç†IPæ± åï¼Œå•æ—¥æˆåŠŸé‡‡é›†æ•°æ®é‡ä»3ä¸‡æ¡æå‡åˆ°80ä¸‡æ¡ã€‚</p>
<h2 data-id="heading-1">äºŒã€ä¼˜è´¨ä»£ç†IPæ± çš„å››å¤§æ ¸å¿ƒæŒ‡æ ‡</h2>
<p>1. å¯ç”¨ç‡ï¼šå®æµ‹ç¥é¾™HTTPçš„99.9%å¯ç”¨ç‡ç¡®å®èƒ½æ‰“ï¼Œå¯¹æ¯”å¸‚é¢å¸¸è§çš„95%ä»¥ä¸‹äº§å“ï¼Œç›¸å½“äºæ¯å°æ—¶èƒ½å¤šå®Œæˆ300æ¬¡è¯·æ±‚</p>
<p>2. IPæ•°é‡ï¼šå»ºè®®é€‰æ‹©åƒä¸‡çº§èµ„æºæ± ï¼Œåƒç¥é¾™IPçš„1000ä¸‡+IPåº“ï¼Œè¶³å¤Ÿæ”¯æ’‘æ—¥å‡ç™¾ä¸‡çº§çš„é‡‡é›†éœ€æ±‚</p>
<p>3. å“åº”é€Ÿåº¦ï¼šæ¸¸æˆè¯•ç©ç±»ä¸šåŠ¡è¦ç‰¹åˆ«æ³¨æ„è¿™ç‚¹ï¼Œç¥é¾™IPçš„30mså“åº”åœ¨å®æµ‹ä¸­è¡¨ç°çªå‡º</p>
<p>4. åè®®æ”¯æŒï¼šHTTP/HTTPS/SOCKS5å…¨åè®®æ”¯æŒæ‰èƒ½åº”å¯¹ä¸åŒåœºæ™¯ï¼Œè¿™ç‚¹ä¸¤å®¶æœåŠ¡å•†éƒ½åšå¾—ä¸é”™</p>
<h2 data-id="heading-2">ä¸‰ã€æ‰‹æŠŠæ‰‹æ­å»ºä»£ç†IPæ± </h2>
<p>ä»¥Pythonçˆ¬è™«ä¸ºä¾‹ï¼Œè¿™é‡Œåˆ†äº«ä¸ªäº²æµ‹æœ‰æ•ˆçš„é…ç½®æ–¹æ¡ˆï¼š</p>
<p>1. è·å–APIæ¥å£ï¼šæ¨èä½¿ç”¨ç¥é¾™HTTPçš„æ™ºèƒ½åˆ‡æ¢æ¥å£ï¼Œè‡ªå¸¦IPè´¨é‡æ£€æµ‹åŠŸèƒ½</p>
<p>2. è®¾ç½®è½®æ¢ç­–ç•¥ï¼šæ ¹æ®ç›®æ ‡ç½‘ç«™åçˆ¬å¼ºåº¦ï¼Œå»ºè®®æ¯50-100æ¬¡è¯·æ±‚æ›´æ¢IP</p>
<p>3. å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼šå½“é‡åˆ°403çŠ¶æ€ç æ—¶è‡ªåŠ¨åˆ‡æ¢IPå¹¶é‡è¯•</p>
<p>4. æ—¥å¿—ç›‘æ§ï¼šè®°å½•æ¯ä¸ªIPçš„æˆåŠŸç‡ï¼Œè‡ªåŠ¨æ·˜æ±°ä½æ•ˆèŠ‚ç‚¹</p>
<h2 data-id="heading-3">å››ã€æœåŠ¡å•†æ¨ªå‘è¯„æµ‹ä¸æ¨è</h2>
<p>ç»è¿‡30å¤©å®æµ‹å¯¹æ¯”ï¼Œè¿™ä¸¤å®¶æœåŠ¡å•†å„æœ‰ä¼˜åŠ¿ï¼š</p>
<p>ç¥é¾™HTTPæ›´é€‚åˆä¼ä¸šçº§ç”¨æˆ·ï¼š<br/>
- 3000ä¸‡IPæ± è§„æ¨¡ä¸šå†…é¢†å…ˆ<br/>
- æ”¯æŒ1V1å®šåˆ¶æ–¹æ¡ˆ<br/>
- ç›´æ’­è¡Œä¸šä¸“å±IPæ± æ˜¯ä¸ªäº®ç‚¹</p>
<p>ç¥é¾™IPåœ¨å“åº”é€Ÿåº¦ä¸Šæ›´èƒœä¸€ç­¹ï¼š<br/>
- 200+åŸå¸‚è¦†ç›–æ»¡è¶³åŒºåŸŸå®šå‘éœ€æ±‚<br/>
- 15Må®šåˆ¶å¸¦å®½é€‚åˆå¤§æ–‡ä»¶ä¼ è¾“<br/>
- å……å€¼ä¼˜æƒ æœºåˆ¶å¯¹ä¸­å°ç”¨æˆ·å‹å¥½</p>
<h2 data-id="heading-4">äº”ã€é¿å‘æŒ‡å—ï¼šæ–°æ‰‹å¸¸è§é—®é¢˜è§£ç­”</h2>
<p>Qï¼šä¸ºä»€ä¹ˆIPåˆšä¹°æ¥å°±è¢«å°ï¼Ÿ<br/>
Aï¼šå¯èƒ½æ˜¯IPçº¯å‡€åº¦é—®é¢˜ï¼Œå»ºè®®é€‰æ‹©ç¥é¾™IPè¿™ç±»è‡ªè¥æœºæˆ¿çš„ä»£ç†æœåŠ¡</p>
<p>Qï¼šé«˜å¹¶å‘åœºæ™¯ä¸‹å¦‚ä½•ä¿æŒç¨³å®šï¼Ÿ<br/>
Aï¼šç¥é¾™HTTPçš„åŠ¨æ€IPæ± æ”¯æŒè‡ªåŠ¨æ‰©å®¹ï¼Œå®æµ‹å¯æ‰¿è½½5000+å¹¶å‘è¯·æ±‚</p>
<p>Qï¼šé‡‡é›†å›½å¤–ç½‘ç«™éœ€è¦ç‰¹æ®Šé…ç½®å—ï¼Ÿ<br/>
Aï¼šä¸¤å®¶æœåŠ¡å•†éƒ½æä¾›æµ·å¤–èŠ‚ç‚¹ï¼Œä½†éœ€æ³¨æ„éµå®ˆç›®æ ‡åœ°åŒºçš„ç½‘ç»œæ³•è§„</p>
<p>Qï¼šä»£ç†IPå¦‚ä½•ä¸çˆ¬è™«æ¡†æ¶ç»“åˆï¼Ÿ<br/>
Aï¼šæ¨èä½¿ç”¨ä¸­é—´ä»¶æ¨¡å¼ï¼ŒScrapyæ¡†æ¶ç”¨æˆ·å¯å‚è€ƒç¥é¾™HTTPæä¾›çš„å¼€æºæ’ä»¶</p>
<h2 data-id="heading-5">å…­ã€è¡Œä¸šåº”ç”¨åœºæ™¯è§£æ</h2>
<p>1. ç”µå•†æ¯”ä»·ï¼šé€šè¿‡åŸå¸‚çº§IPå®šä½é‡‡é›†åŒºåŸŸå®šä»·ç­–ç•¥<br/>
2. èˆ†æƒ…ç›‘æ§ï¼šå¤šIPè½®è¯¢ç¡®ä¿7Ã—24å°æ—¶ä¸é—´æ–­é‡‡é›†<br/>
3. é‡‘èæ•°æ®ï¼šç”¨é«˜åŒ¿IPè·å–å®æ—¶è¡Œæƒ…æ•°æ®<br/>
4. è¥é”€éªŒè¯ï¼šæµ‹è¯•å¹¿å‘Šåœ¨ä¸åŒåœ°åŒºçš„å±•ç¤ºæ•ˆæœ</p>
<p>é€‰æ‹©ä»£ç†IPæœåŠ¡ä¸æ˜¯ä¸€åŠ³æ°¸é€¸çš„äº‹ï¼Œå»ºè®®æ¯æœˆåšä¸€æ¬¡æœåŠ¡è¯„æµ‹ã€‚æ ¹æ®æˆ‘ä»¬è·Ÿè¸ªæµ‹è¯•çš„æ•°æ®ï¼Œç¥é¾™ç³»åˆ—äº§å“åœ¨IPå­˜æ´»æ—¶é•¿ã€è¯·æ±‚æˆåŠŸç‡ç­‰æ ¸å¿ƒæŒ‡æ ‡ä¸Šä¿æŒè¡Œä¸šå‰åˆ—ã€‚ç‰¹åˆ«æ˜¯ä»–ä»¬çš„å®šåˆ¶å¸¦å®½æœåŠ¡ï¼Œåœ¨å¤„ç†è§†é¢‘ç±»å¤§æµé‡ä¸šåŠ¡æ—¶ä¼˜åŠ¿æ˜æ˜¾ã€‚</p>
<p>æœ€åæé†’å¤§å®¶ï¼šä¸è¦ç›²ç›®è¿½æ±‚ä½ä»·å¥—é¤ï¼Œæœ‰äº›9.9å…ƒ/æœˆçš„æœåŠ¡çœ‹ä¼¼ä¾¿å®œï¼Œå®é™…IPå¯ç”¨ç‡å¯èƒ½ä¸è¶³50%ã€‚ä¸“ä¸šçš„äº‹äº¤ç»™ä¸“ä¸šçš„äººåšï¼Œé€‰å¯¹ä»£ç†IPæœåŠ¡å•†èƒ½è®©ä½ çš„æ•°æ®ä¸šåŠ¡äº‹åŠåŠŸå€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ²¡æœ‰ Macï¼Œå¦‚ä½•ä¸Šæ¶ iOS Appï¼Ÿè·¨å¹³å°å¼€å‘è€…çš„å®Œæ•´ä¸Šæ¶å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7571391088948281382</link>    <guid>https://juejin.cn/post/7571391088948281382</guid>    <pubDate>2025-11-12T06:04:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571391088948281382" data-draft-id="7571409339363360795" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ²¡æœ‰ Macï¼Œå¦‚ä½•ä¸Šæ¶ iOS Appï¼Ÿè·¨å¹³å°å¼€å‘è€…çš„å®Œæ•´ä¸Šæ¶å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-12T06:04:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="bcbnb"/> <meta itemprop="url" content="https://juejin.cn/user/895474073078377"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ²¡æœ‰ Macï¼Œå¦‚ä½•ä¸Šæ¶ iOS Appï¼Ÿè·¨å¹³å°å¼€å‘è€…çš„å®Œæ•´ä¸Šæ¶å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/895474073078377/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    bcbnb
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T06:04:40.000Z" title="Wed Nov 12 2025 06:04:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨è‹¹æœç”Ÿæ€ä¸­ï¼ŒiOS åº”ç”¨ä¸Šæ¶å†æ¥è¢«è®¤ä¸ºâ€œå¿…é¡»æœ‰ Macâ€ã€‚
å› ä¸º Xcodeã€Transporterã€é’¥åŒ™ä¸²å·¥å…·ç­‰å®˜æ–¹å·¥å…·å…¨éƒ¨é™å®šäº macOS å¹³å°ã€‚</p>
<p>ç„¶è€Œï¼Œéšç€ <strong>è·¨å¹³å°å¼€å‘æ¡†æ¶ï¼ˆå¦‚ uni-appã€Flutterã€React Nativeï¼‰</strong> çš„æ™®åŠï¼Œè®¸å¤šå¼€å‘è€…ä¸»è¦ä½¿ç”¨ <strong>Windows æˆ– Linux</strong> è¿›è¡Œå¼€å‘ã€‚
è¿™è®© â€œæ²¡æœ‰ Mac å¦‚ä½•ä¸Šæ¶ iOS Appï¼Ÿâ€ æˆä¸ºä¸€ä¸ªé•¿æœŸå›°æ‰°çš„é—®é¢˜ã€‚</p>
<p>å®é™…ä¸Šï¼Œå¦‚ä»Šå€ŸåŠ© <strong>äº‘æ‰“åŒ…æœåŠ¡ + å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰å‘½ä»¤è¡Œå·¥å…·</strong>ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥åœ¨æ²¡æœ‰ Mac çš„ç¯å¢ƒä¸‹ï¼Œé¡ºåˆ©å°† iOS åº”ç”¨æäº¤åˆ° App Storeã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆä¼ ç»Ÿ iOS ä¸Šæ¶æµç¨‹ç¦»ä¸å¼€ Macï¼Ÿ</h2>
<p>ä¼ ç»Ÿä¸Šæ¶æ–¹å¼ä¾èµ–ä»¥ä¸‹å·¥å…·ï¼š</p>






























<table><thead><tr><th>å·¥å…·</th><th>åŠŸèƒ½</th><th>é™åˆ¶</th></tr></thead><tbody><tr><td><strong>Xcode</strong></td><td>æ‰“åŒ…ã€ç­¾åã€ä¸Šä¼ </td><td>ä»…æ”¯æŒ macOS</td></tr><tr><td><strong>Transporter</strong></td><td>ä¸Šä¼  IPA</td><td>ä»…æ”¯æŒ macOS</td></tr><tr><td><strong>é’¥åŒ™ä¸²åŠ©æ‰‹</strong></td><td>ç”Ÿæˆè¯ä¹¦ä¸æè¿°æ–‡ä»¶</td><td>ä»…æ”¯æŒ macOS</td></tr><tr><td><strong>altool</strong></td><td>å‘½ä»¤è¡Œä¸Šä¼ </td><td>å·²å¼ƒç”¨ï¼Œä¾èµ– Xcode</td></tr></tbody></table>
<p>è¿™äº›å·¥å…·ç»‘å®š macOS ç”Ÿæ€ï¼Œå¯¹ Windows / Linux ç”¨æˆ·å¹¶ä¸å‹å¥½ã€‚
ä½†è‹¹æœå¹¶æœªé™åˆ¶ä¸Šä¼ æ¥æºï¼Œåªè¦è¯ä¹¦ä¸ç­¾ååˆæ³•ï¼Œä¸Šä¼ æ¥å£æ˜¯å¼€æ”¾çš„ã€‚</p>
<p>è¿™ä¹Ÿè®©ç¬¬ä¸‰æ–¹è·¨å¹³å°ä¸Šæ¶å·¥å…·æˆä¸ºç°å®ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€æ²¡æœ‰ Macï¼Œæ˜¯å¦è¿˜èƒ½å¼€å‘ iOS Appï¼Ÿ</h2>
<p>ç­”æ¡ˆæ˜¯ï¼š<strong>å®Œå…¨å¯ä»¥ã€‚</strong></p>
<p>å¾—ç›Šäºè·¨å¹³å°æ¡†æ¶çš„å‘å±•ï¼Œå¼€å‘è€…å¯ä»¥åœ¨ä»»ä½•ç³»ç»Ÿä¸­å®Œæˆ iOS åº”ç”¨çš„å¼€å‘ä¸æ‰“åŒ…ã€‚</p>

























<table><thead><tr><th>æ¡†æ¶</th><th>æ˜¯å¦æ”¯æŒæ—  Mac æ‰“åŒ…</th></tr></thead><tbody><tr><td><strong>uni-app / HBuilderX</strong></td><td>æ”¯æŒäº‘ç«¯æ‰“åŒ…</td></tr><tr><td><strong>Flutter</strong></td><td>ä½¿ç”¨ Codemagicã€Bitrise ç­‰äº‘ç¼–è¯‘</td></tr><tr><td><strong>React Native</strong></td><td>é€šè¿‡ Expo æˆ–äº‘ CI</td></tr><tr><td><strong>Cocos Creator / Unity</strong></td><td>å¯å¯¼å‡º IPA å¹¶è¿œç¨‹ç­¾å</td></tr></tbody></table>
<p>è¿™äº›å·¥å…·èƒ½ç”Ÿæˆå·²ç­¾åæˆ–åŠæˆå“ IPA æ–‡ä»¶ï¼Œæ¥ä¸‹æ¥åªéœ€ä¸Šä¼ åˆ° App Store å³å¯ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€å… Mac ä¸Šæ¶çš„å·¥å…·ï¼šå¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰</h2>
<p>æ–°ç‰ˆ **å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰å‘½ä»¤è¡Œå·¥å…·ï¼ˆCLIï¼‰**è®©å¼€å‘è€…åœ¨ <strong>Windowsã€Linuxã€macOS</strong> ç³»ç»Ÿä¸­éƒ½èƒ½å®Œæˆä¸Šä¼ æµç¨‹ã€‚</p>
<p>å…¶åŠŸèƒ½ä¸ä»…è¦†ç›– Transporter çš„å…¨éƒ¨èƒ½åŠ›ï¼Œè¿˜æ”¯æŒå‘½ä»¤è¡Œè‡ªåŠ¨åŒ–ã€å›¢é˜Ÿåä½œã€è·¨ç³»ç»Ÿç¯å¢ƒä½¿ç”¨ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c35513925564b1d8e3f3fc1cd9aa287~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYmNibmI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763532279&amp;x-signature=Hq7mBy4tt0%2FIIYYoZny9SDDHsiY%3D" alt="é¦–é¡µ" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-3">ä¸Šä¼ å‘½ä»¤ç¤ºä¾‹</h3>
<pre><code class="hljs language-sql" lang="sql">appuploader_cli <span class="hljs-operator">-</span>u ios<span class="hljs-variable">@team</span>.com <span class="hljs-operator">-</span>p xxx<span class="hljs-operator">-</span>xxx<span class="hljs-operator">-</span>xxx<span class="hljs-operator">-</span>xxx <span class="hljs-operator">-</span>c <span class="hljs-number">2</span> <span class="hljs-operator">-</span>f .<span class="hljs-operator">/</span><span class="hljs-keyword">release</span><span class="hljs-operator">/</span>MyApp.ipa
</code></pre>

























<table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>-u</code></td><td>Apple å¼€å‘è€…è´¦å·</td></tr><tr><td><code>-p</code></td><td>App ä¸“ç”¨å¯†ç ï¼ˆéç™»å½•å¯†ç ï¼‰</td></tr><tr><td><code>-c</code></td><td>ä¸Šä¼ é€šé“ï¼ˆ1=æ—§é€šé“ï¼Œ2=æ–°é€šé“ï¼‰</td></tr><tr><td><code>-f</code></td><td>æŒ‡å®šè¦ä¸Šä¼ çš„ IPA æ–‡ä»¶è·¯å¾„</td></tr></tbody></table>
<p>ä¸Šä¼ å®Œæˆåï¼ŒIPA ä¼šå‡ºç°åœ¨ App Store Connect çš„ã€ŒTestFlightã€æˆ–ã€Œæ„å»ºç‰ˆæœ¬ã€ä¸­ï¼Œå¯ç›´æ¥è¿›å…¥å®¡æ ¸æµç¨‹ã€‚</p>
<hr/>
<h2 data-id="heading-4">å››ã€ç­¾åä¸è¯ä¹¦é—®é¢˜å¦‚ä½•è§£å†³ï¼Ÿ</h2>
<p>æ²¡æœ‰ Mac çš„æƒ…å†µä¸‹ï¼Œè¯ä¹¦åˆ›å»ºå¾€å¾€æ˜¯æœ€å¤§éšœç¢ã€‚
ä½† <strong>Appuploader</strong> åŒæ ·æ”¯æŒåœ¨ä»»æ„ç³»ç»Ÿä¸­ç”Ÿæˆç­¾åè¯ä¹¦ä¸æè¿°æ–‡ä»¶ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e810f8ab4c54d21bd2a79e49c014a74~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYmNibmI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763532279&amp;x-signature=XnSWEXmVKZ3KcMD3hKnQ6bOKi5o%3D" alt="è¯ä¹¦" loading="lazy"/></p>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>ä¸ä¾èµ–é’¥åŒ™ä¸²ï¼›</li>
<li>è‡ªåŠ¨ç”Ÿæˆå¯ç”¨çš„ .p12 å’Œ .mobileprovision æ–‡ä»¶ï¼›</li>
<li>æ”¯æŒå›¢é˜Ÿå…±äº«ï¼›</li>
<li>è¯ä¹¦ä¸ Apple Developer è´¦å·è‡ªåŠ¨ç»‘å®šã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-5">äº”ã€æ„å»º IPA æ–‡ä»¶çš„æ›¿ä»£æ–¹æ¡ˆ</h2>
<p>å³ä½¿æ²¡æœ‰ Macï¼Œä¹Ÿæœ‰å¤šç§å¯è¡Œæ–¹å¼ç”Ÿæˆ IPA æ–‡ä»¶ã€‚</p>






























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>æè¿°</th><th>é€‚ç”¨å¯¹è±¡</th></tr></thead><tbody><tr><td><strong>HBuilderX äº‘æ‰“åŒ…</strong></td><td>ä¸Šä¼ ä»£ç åäº‘ç«¯ç”Ÿæˆ IPA</td><td>uni-app å¼€å‘è€…</td></tr><tr><td><strong>Codemagic / Bitrise äº‘ CI</strong></td><td>äº‘ç«¯è‡ªåŠ¨æ„å»º Flutter / React é¡¹ç›®</td><td>è·¨å¹³å°å¼€å‘å›¢é˜Ÿ</td></tr><tr><td><strong>ç¬¬ä¸‰æ–¹ç­¾åæœåŠ¡</strong></td><td>ä¸Šä¼ æœªç­¾å IPA ååœ¨çº¿ç­¾å</td><td>æ— æœ¬åœ°ç­¾åç¯å¢ƒçš„å¼€å‘è€…</td></tr><tr><td><strong>CI/CD é›†æˆæ–¹æ¡ˆ</strong></td><td>Jenkins + Fastlane + Appuploader</td><td>ä¼ä¸šé¡¹ç›®è‡ªåŠ¨åŒ–å‘å¸ƒ</td></tr></tbody></table>
<p>è¿™æ ·ï¼Œæ— è®ºåœ¨å“ªä¸ªç³»ç»Ÿä¸­å·¥ä½œï¼Œå¼€å‘è€…éƒ½èƒ½æ„å»ºå‡ºå¯ä¸Šä¼ çš„ iOS å®‰è£…åŒ…ã€‚</p>
<hr/>
<h2 data-id="heading-6">å…­ã€å… Mac ä¸Šä¼ å®Œæ•´æµç¨‹ç¤ºä¾‹</h2>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå…¸å‹çš„ <strong>Windows ç”¨æˆ· iOS ä¸Šæ¶å®æˆ˜æµç¨‹</strong>ï¼š</p>
<p>1.åœ¨ HBuilderX ä¸­äº‘æ‰“åŒ…ç”Ÿæˆ <code>MyApp.ipa</code>
2.ä½¿ç”¨ Appuploader ç”Ÿæˆç­¾åè¯ä¹¦
3.ä½¿ç”¨å‘½ä»¤è¡Œä¸Šä¼ åº”ç”¨ï¼š</p>
<pre><code class="hljs language-css" lang="css">appuploader_cli -u ios<span class="hljs-keyword">@team</span>.com -p xxx-xxx-xxx-xxx -c <span class="hljs-number">2</span> -f ./MyApp.ipa
</code></pre>
<p>4.ç™»å½• App Store Connect â†’ é€‰æ‹©æ„å»ºç‰ˆæœ¬ â†’ æäº¤å®¡æ ¸
5.å®¡æ ¸é€šè¿‡åï¼Œåº”ç”¨æ­£å¼ä¸Šçº¿ App Store</p>
<p>æ•´ä¸ªæµç¨‹æ— éœ€ Macï¼Œä»…ä¾é å‘½ä»¤è¡Œä¸äº‘æœåŠ¡å³å¯å®Œæˆã€‚</p>
<hr/>
<h2 data-id="heading-7">ä¸ƒã€å… Mac ä¸Šæ¶çš„å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ³•</h2>



































<table><thead><tr><th>é—®é¢˜</th><th>åŸå› </th><th>è§£å†³æ–¹å¼</th></tr></thead><tbody><tr><td>ä¸Šä¼ å¤±è´¥ â€œInvalid Credentialsâ€</td><td>ä½¿ç”¨ç™»å½•å¯†ç è€Œéä¸“ç”¨å¯†ç </td><td>å‰å¾€ Apple ID åˆ›å»ºä¸“ç”¨å¯†ç </td></tr><tr><td>ä¸Šä¼ è¶…æ—¶</td><td>ç½‘ç»œæ³¢åŠ¨</td><td>ä½¿ç”¨ <code>-c 2</code> æ–°é€šé“</td></tr><tr><td>æ„å»ºç‰ˆæœ¬æœªæ˜¾ç¤º</td><td>Bundle ID ä¸åŒ¹é…</td><td>æ£€æŸ¥è¯ä¹¦ä¸ App ID ä¸€è‡´æ€§</td></tr><tr><td>å®¡æ ¸è¢«æ‹’</td><td>éšç§æƒé™è¯´æ˜ç¼ºå¤±</td><td>åœ¨ Info.plist æ·»åŠ ç”¨é€”æè¿°</td></tr><tr><td>æ— æ³•ç™»å½•å¼€å‘è€…è´¦å·</td><td>åŒé‡éªŒè¯å¼€å¯</td><td>ä¸´æ—¶å…³é—­æˆ–ä½¿ç”¨ä¸“ç”¨å¯†ç ç™»å½•</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-8">å…«ã€è‡ªåŠ¨åŒ–ä¸Šä¼ ï¼šFastlane + å¼€å¿ƒä¸Šæ¶ CLI</h2>
<p>å¯¹å›¢é˜Ÿå¼€å‘è€Œè¨€ï¼Œå¯åœ¨ CI/CD æµç¨‹ä¸­è‡ªåŠ¨å‘å¸ƒåº”ç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ„å»º IPA</span>
fastlane gym --scheme <span class="hljs-string">"MyApp"</span> --output_directory <span class="hljs-string">"./build"</span>

<span class="hljs-comment"># ä¸Šä¼  IPA</span>
appuploader_cli -u dev@icloud.com -p xxx-xxx-xxx-xxx -c 2 -f ./build/MyApp.ipa
</code></pre>
<p>ä¼˜åŠ¿ï¼š</p>
<ul>
<li>è‡ªåŠ¨åŒ–æ„å»ºä¸Šä¼ ï¼›</li>
<li>æ”¯æŒ Windows / Linux CI ç¯å¢ƒï¼›</li>
<li>é€‚åˆæŒç»­é›†æˆä¸ç‰ˆæœ¬æ›´æ–°å‘å¸ƒã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-9">ä¹ã€å®æˆ˜ç»éªŒä¸æ•ˆç‡æå‡å»ºè®®</h2>
<p>æå‰é…ç½® App Store Connect åº”ç”¨ä¿¡æ¯ï¼›
é‡‡ç”¨ç»Ÿä¸€å‘½åè§„èŒƒç®¡ç† IPA ä¸è¯ä¹¦æ–‡ä»¶ï¼›
ä½¿ç”¨ Appuploader å‘½ä»¤è¡Œæ‰¹é‡ä¸Šä¼ ä¸åŒç‰ˆæœ¬ï¼›
é…åˆ Fastlane è„šæœ¬å®ç°è‡ªåŠ¨ç‰ˆæœ¬å·ç®¡ç†ï¼›
åœ¨æ¯æ¬¡æäº¤å‰ç”¨çœŸæœºæµ‹è¯•ï¼Œé¿å…é—ªé€€å®¡æ ¸æ‹’ç»ã€‚</p>
<hr/>
<p>æ²¡æœ‰ Mac ä¸å†æ˜¯ iOS ä¸Šæ¶çš„éšœç¢ã€‚
é€šè¿‡ <strong>äº‘æ‰“åŒ… + å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰å‘½ä»¤è¡Œå·¥å…·</strong>ï¼Œå¼€å‘è€…å¯ä»¥åœ¨ Windows æˆ– Linux ç³»ç»Ÿä¸­å®ç°å®Œæ•´çš„ iOS åº”ç”¨ä¸Šæ¶æµç¨‹ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼Œè·¨å¹³å°å›¢é˜Ÿæ— éœ€é¢å¤–ç¡¬ä»¶æŠ•å…¥ï¼Œä¹Ÿèƒ½åœ¨æ ‡å‡†åŒ–ã€è‡ªåŠ¨åŒ–çš„ä½“ç³»ä¸­å‘å¸ƒé«˜è´¨é‡çš„ iOS åº”ç”¨ã€‚
å‚è€ƒæ•™ç¨‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.applicationloader.net%2Ftutorial%2Fzh%2F83%2F83.html" target="_blank" title="https://www.applicationloader.net/tutorial/zh/83/83.html" ref="nofollow noopener noreferrer">www.applicationloader.net/tutorial/zhâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€åŸç†åˆ°å®æˆ˜ã€‘å®éªŒå¼‚è´¨æ€§åˆ†æ]]></title>    <link>https://juejin.cn/post/7571416207972515890</link>    <guid>https://juejin.cn/post/7571416207972515890</guid>    <pubDate>2025-11-12T08:02:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571416207972515890" data-draft-id="7571456639477022730" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€åŸç†åˆ°å®æˆ˜ã€‘å®éªŒå¼‚è´¨æ€§åˆ†æ"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-12T08:02:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¬ä¸œäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2634854380340008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€åŸç†åˆ°å®æˆ˜ã€‘å®éªŒå¼‚è´¨æ€§åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2634854380340008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¬ä¸œäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T08:02:00.000Z" title="Wed Nov 12 2025 08:02:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d613538501c4ee886e1ad8e1ac54ab7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763539320&amp;x-signature=daWIJ1QaEkjVxYacbCff1yM%2F2zo%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯å®éªŒçš„å¼‚è´¨æ€§</h2>
<h4 data-id="heading-1">1. å¦‚ä½•ç†è§£å®éªŒç»“æœä¸­çš„æŒ‡æ ‡å˜åŒ–</h4>
<p>å½“æˆ‘ä»¬çœ‹åˆ°å¦‚ä¸‹è¯•é‡‘çŸ³å®éªŒæŒ‡æ ‡ç»“æœæ—¶</p>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/356ace4992054db0870d90a9274c13d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763539320&amp;x-signature=%2BMKgSBNqSv5Q0voV2PahnEwejTI%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>åœ¨è¿›è¡Œåˆ†æå‰ï¼Œå¯èƒ½æˆ‘ä»¬çš„ç¬¬ä¸€ç›´è§‰æ˜¯è¿™æ ·çš„</p>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/151baf4c4a4946f2a4859de8334ff6f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763539320&amp;x-signature=GcEEKrH6zgDsLfkgYftaU9%2FP6pI%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ç»è¿‡å¼‚è´¨æ€§åˆ†æåï¼Œå¯èƒ½ä¼šå‘ç°å®é™…æƒ…å†µæ˜¯è¿™æ ·çš„</p>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6a61b64ac854acabc417d66a986a6de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763539320&amp;x-signature=tiJVmCEkXtKN18qzA6idvmunm4c%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<h4 data-id="heading-2">2. æ¦‚å¿µè§£æä¸å®šä¹‰</h4>
<p>å®éªŒçš„å¼‚è´¨æ€§ï¼Œä¸€èˆ¬è¢«ç§°ä¸ºHTEï¼ˆå³Heterogeneous Treatment Effectsï¼‰ï¼Œæ„ä¸ºå®éªŒä¸­åŒä¸€ä¸ªtreatmentå¯¹ä¸åŒçš„å®éªŒæ ·æœ¬ï¼Œå¾—åˆ°çš„ç­–ç•¥æ•ˆæœå¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚å¦å¤–è¿˜æœ‰ä¸€äº›é‡è¦çš„æ¦‚å¿µéœ€è¦å¤§å®¶ç†è§£</p>

































<table><thead><tr><th>è‹±æ–‡ç®€ç§°</th><th>è‹±æ–‡å…¨ç§°</th><th>ä¸­æ–‡è¯‘å</th><th>å«ä¹‰</th><th>å…¬å¼</th></tr></thead><tbody><tr><td>ATE</td><td>Average Treatment Effect</td><td>å¹³å‡å¤„ç†æ•ˆåº”</td><td>æ‰€æœ‰å®éªŒå¯¹è±¡çš„å¹³å‡å®éªŒæ•ˆæœ</td><td>ATE=E[Y(1)âˆ’Y(0)]ATE=E[Y(1)âˆ’Y(0)]ï»¿</td></tr><tr><td>CATE</td><td>Conditional Average Treatment Effect</td><td>æ¡ä»¶å¹³å‡å¤„ç†æ•ˆåº”</td><td>æ»¡è¶³ä¸€å®šæ¡ä»¶çš„å®éªŒå¯¹è±¡çš„å¹³å‡å®éªŒæ•ˆæœ</td><td>CATEX=E[Yx(1)âˆ’Yx(0)âˆ£xâˆˆX]CATEXâ€‹=E[Yxâ€‹(1)âˆ’Yxâ€‹(0)âˆ£xâˆˆX]ï»¿</td></tr><tr><td>ITE</td><td>Individual Treatment Effect</td><td>ä¸ªä½“å¤„ç†æ•ˆåº”</td><td>æŸä¸ªå®éªŒå¯¹è±¡çš„å®éªŒæ•ˆæœ</td><td>ITEi=E[Yi(1)âˆ’Yi(0)],i=1,2,...NITEiâ€‹=E[Yiâ€‹(1)âˆ’Yiâ€‹(0)],i=1,2,...Nï»¿</td></tr></tbody></table>
<p>** æ­¤å¤„é‡‡ç”¨Donald Rubinæå‡ºçš„æ½œåœ¨å› æœæ¡†æ¶ï¼ˆPotencial outcomeï¼‰æ¥å¯¹å®éªŒæ•ˆæœè¿›è¡Œç»Ÿè®¡å…¬å¼ä¸Šçš„æè¿° [1]*</p>
<ul>
<li><em>ç”±äºä¸šå†…å¹¶æ²¡æœ‰ç»Ÿä¸€çš„å®šä¹‰ï¼ŒHTEã€CATEã€ITEæ¦‚å¿µåœ¨ä¸€å®šç¨‹åº¦ä¸Šä¼šæœ‰æ··ç”¨çš„æƒ…å†µï¼Œè¯»è€…éœ€è¦å‚è€ƒæè¿°ä»¥åŠä¸Šä¸‹æ–‡ç»¼åˆåˆ¤æ–­åè¯çš„å«ä¹‰</em></li>
</ul>
<h4 data-id="heading-3">3. å¼‚è´¨æ€§åˆ†æå¯¹äºä¸šåŠ¡çš„æ„ä¹‰</h4>
<p>1.äº†è§£ç­–ç•¥å¯¹äºä¸åŒç”¨æˆ·çš„ä¸åŒæ•ˆæœï¼ŒååŠ©æŒ–æ˜èƒŒåçš„ä¸šåŠ¡é€»è¾‘ï¼Œè¾…åŠ©è¿­ä»£ã€è¿›è¡Œæ–°ä¸€è½®çš„å®éªŒ</p>
<p>2.å°è¯•å¯»æ‰¾ç­–ç•¥æœ€ä¼˜å­äººç¾¤ï¼Œè®©æ•´ä½“æ— æ•ˆçš„ç­–ç•¥ï¼Œæœ‰æœºä¼šè¿›è¡Œéƒ¨åˆ†å…ˆæ¨å…¨ï¼›åä¹‹ä¾ç„¶ï¼Œè®©éƒ¨åˆ†è´Ÿå‘çš„ç­–ç•¥ï¼Œå‡å°‘æŸå¤±</p>
<p>3.å¯¹å®éªŒç»“æœå»ºæ¨¡åé¢„æµ‹ï¼Œå¯¹çº¿ä¸Šæä¾›åŠ¨æ€çš„æœ€ä¼˜äººç¾¤æ”¯æŒ</p>
<blockquote>
<p>æ ¹æ®è¯•é‡‘çŸ³æµ‹ç®—ï¼Œä»¥æŸäº§å“çº¿ä¸‹6æœˆè¿è¡Œä¸­çš„35ä¸ªå®éªŒä¸ºä¾‹ï¼Œ<strong>ä»…23%</strong> å·¦å³çš„å®éªŒ<strong>æ²¡æœ‰</strong>åœ¨å®éªŒäººç¾¤è§†è§’å‘ç°å¼‚è´¨æ€§</p>
</blockquote>
<h2 data-id="heading-4">å¼‚è´¨æ€§åˆ†ææ–¹æ³•æ¦‚è¿°</h2>
<h4 data-id="heading-5">1. å¼‚è´¨æ€§åˆ†æçš„ç»´åº¦é€‰æ‹©</h4>
<ol>
<li>å¯¹äº<strong>åˆ†æµå•å…ƒçš„ç»´åº¦X</strong>ï¼Œå½“Xæ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ—¶ï¼Œå¯ä»¥ä½œä¸ºå¼‚è´¨æ€§çš„ç»´åº¦è¿›è¡Œåç»­åˆ†æ</li>
</ol>
<p>â–ªï»¿</p>
<p>TâŠ¥X</p>
<p>ï»¿ï¼Œå³<strong>åˆ†æç»´åº¦ä¸å®éªŒåˆ†æµæ— å…³</strong> (Unconfoundedness)</p>
<p>â–ªåˆ†æå·¥å…·åŒ–çš„å¸¸è§ç®€åŒ–æ–¹å¼ï¼šå¯¹äºä¸€ä¸ªåˆ†æµIDï¼Œ<strong>é€‰å–ä»–åœ¨é¦–æ¬¡è¿›å…¥å®éªŒå‰ä¸€å¤©çš„æ ‡ç­¾å–å€¼</strong></p>
<p>â–ªç®€å•æ¨å¯¼ï¼š</p>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa1d3dd3bcee425f8af1adaefd37a204~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763539320&amp;x-signature=PvBRP6uAFiAU2sRg94U3Af0a12M%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>**<em>Tæ˜¯éšæœºåŒ–çš„ï¼Œ</em></p>
<p>TâŠ¥Y,TâŠ¥XTâŠ¥Y,TâŠ¥X</p>
<p>ï»¿ <em>ï¼Œæ‰€ä»¥</em></p>
<p>E[Yi(1)âˆ£xâˆˆX]=E[Yi(1)ï½œTi=1,xâˆˆX]E[Yiâ€‹(1)âˆ£xâˆˆX]=E[Yiâ€‹(1)ï½œTiâ€‹=1,xâˆˆX]</p>
<p>ï»¿ <em>ï¼Œæ‰€ä»¥ï¼ˆ3ï¼‰æˆç«‹</em></p>
<ol start="2">
<li>å¼‚è´¨æ€§åˆ†æçš„ç»´åº¦åˆ†æbad caseä¸¾ä¾‹</li>
</ol>
<p>å‡è®¾æˆ‘ä»¬éœ€è¦åˆ†æçš„å®éªŒç­–ç•¥ä¸ºï¼šæ ¹æ®ç”¨æˆ·çš„æ´»è·ƒåº¦æ ‡ç­¾ï¼Œä½ã€ä¸­ã€é«˜é¢‘ç”¨æˆ·çš„ä¼˜æƒ åˆ¸ç­–ç•¥åˆ†åˆ«åšäº†æ–°/è€ç­–ç•¥è¿­ä»£</p>

























<table><thead><tr><th><strong>åˆ†æç›®æ ‡ &amp; å¸¸è§é”™è¯¯æ–¹æ³•ä¸¾ä¾‹</strong></th><th>ä¸æˆç«‹åŸå› ç®€è¿°</th><th>æ¨èçš„å®éªŒåˆ†ææ–¹å¼</th></tr></thead><tbody><tr><td>ä¸åŒæ´»è·ƒåº¦äººç¾¤çš„ç­–ç•¥æ•ˆæœ åœ¨å®éªŒè¿è¡Œ7å¤©åï¼Œåˆ©ç”¨å®éªŒç”¨æˆ·åœ¨ç¬¬7å¤©çš„æ´»è·ƒåº¦æ ‡ç­¾è¿›è¡Œç»“æœæ‹†è§£</td><td>åœ¨å®éªŒå¼€å§‹åï¼Œç”¨æˆ·çš„æ´»è·ƒåº¦æ ‡ç­¾å—åˆ°äº†ç­–ç•¥å½±å“ï¼Œå³TâŠ¥Xä¸æˆç«‹</td><td>ä½¿ç”¨ç”¨æˆ·åœ¨è¿›å…¥å®éªŒå‰1å¤©çš„æ´»è·ƒåº¦æ ‡ç­¾å€¼</td></tr><tr><td>åˆ†åˆ«åˆ†æä½é¢‘ç­–ç•¥ã€ä¸­é¢‘ç­–ç•¥ã€é«˜é¢‘ç­–ç•¥å¯¹äºä½ã€ä¸­ã€é«˜é¢‘ç”¨æˆ·çš„ç­–ç•¥æ•ˆæœ æŒ‰å¤©å–æ¯å¤©ç”¨æˆ·çš„æ´»è·ƒåº¦æ ‡ç­¾ï¼Œå¯¹å®éªŒç»“æœè¿›è¡Œæ‹†è§£</td><td>ç”¨æˆ·çš„æ´»è·ƒåº¦æ ‡ç­¾å—åˆ°äº†ç­–ç•¥å½±å“ï¼Œå³TâŠ¥Xä¸æˆç«‹ Â·ç”¨æˆ·æ‰€åœ¨åˆ†ç»„åº”è¯¥æ˜¯ç¡®å®šçš„ï¼Œä¸éšæ—¶é—´æ”¹å˜</td><td>åˆ†åˆ«å»ºç«‹3ä¸ªäººç¾¤æ­£äº¤å®éªŒ</td></tr><tr><td>åˆ†æé«˜å•ä»·ç±»ç›®å•†å“ï¼ˆ3Cå®¶ç”µï¼‰å’Œä½å•ä»·ç±»ç›®å•†å“ï¼ˆä¼‘é—²é£Ÿå“ï¼‰çš„è½¬åŒ–ç‡å·®å¼‚ é€‰å–xxç±»ç›®æ›å…‰ç”¨æˆ·ï¼Œè®¡ç®—å®éªŒå‘¨æœŸå†…å¯¹åº”ç±»ç›®çš„æ›å…‰è®¢å•è½¬åŒ–ç‡</td><td>åˆ†æç›®æ ‡æ˜¯é¢å‘æŒ‡æ ‡ç»´åº¦çš„ï¼ˆskuæ‰€åœ¨ç±»ç›®ï¼‰ï¼Œè€Œéåˆ†æµå•å…ƒçš„ç»´åº¦ï¼ˆCç«¯å®éªŒé€šå¸¸ä¸ºè´¦å·ã€è®¾å¤‡ï¼‰ï¼Œä¸é€‚ç”¨æœ¬æ–‡æåˆ°çš„å¼‚è´¨æ€§åˆ†ææ–¹æ³•</td><td>è¯•é‡‘çŸ³ç°å·²æ”¯æŒæŒ‡æ ‡ç»´åº¦ä¸‹é’» æ›å…‰è®¢å•è½¬åŒ–ç‡çš„åˆ†å­ã€åˆ†æ¯å‡å—åˆ°ç­–ç•¥å½±å“ï¼Œéœ€åœ¨è§‚æµ‹å…¨é¢åç»¼åˆåˆ¤æ–­</td></tr></tbody></table>
<h4 data-id="heading-6">2. å¼‚è´¨æ€§åˆ†æçš„æ–¹æ³•é€‰æ‹©</h4>















































<table><thead><tr><th><strong>ç ”ç©¶å¯¹è±¡</strong></th><th><strong>ç ”ç©¶æ–¹æ³•</strong></th><th><strong>é€‚ç”¨åœºæ™¯</strong></th><th><strong>pros &amp; cons</strong></th></tr></thead><tbody><tr><td>CATE</td><td>ç»´åº¦ä¸‹é’»</td><td>Â·ä½ç»´ Â·åˆ†æç›®æ ‡æ˜ç¡®</td><td>+ å¿«é€Ÿç®€å•ï¼Œä¾¿äºç†è§£ + äº§å“åŒ–å®¹æ˜“ - ç»´åº¦é€‰æ‹©ä¾èµ–åˆ†æå¸ˆç»éªŒ - äº¤äº’æ•ˆåº”å¤„ç†å›°éš¾</td></tr><tr><td>æ–¹å·®åˆ†æï¼ˆANOVAï¼ŒANCOVAï¼‰</td><td>Â·ä½ç»´ Â·åˆ†æç›®æ ‡è¾ƒæ˜ç¡® Â·äº¤äº’æ•ˆåº”è¯„ä¼°</td><td>+ è§£é‡Šæ€§å¼ºï¼Œç»Ÿè®¡å­¦ç†è®ºèƒŒä¹¦ + å¯ä»¥å¤„ç†ä½ç»´åº¦äº¤äº’æ•ˆåº” + å¯ä½œä¸ºfeature selectionçš„å€™é€‰æ–¹æ³• - åŸºäºçº¿æ€§æ¨¡å‹å‡è®¾ - é«˜ç»´åº¦äº¤äº’æ•ˆåº”è§£è¯»å›°éš¾</td><td/></tr><tr><td>å› æœæ ‘ï¼ˆCausal Treeï¼‰</td><td>Â·é«˜ç»´ Â·åˆ†æç›®æ ‡ä¸æ˜ç¡®ï¼Œå¸Œæœ›æ¢ç´¢</td><td>+ å»ºæ¨¡æ–¹æ³•ç¬¦åˆåˆ†æç›´è§‰ - æ¨¡å‹å¤æ‚åº¦ä¸è¶³ï¼Œæ— æ³•å‡†ç¡®æè¿°å¤æ‚çš„ç°å®ä¸–ç•Œæ•ˆæœ - æœ¬æ–¹æ³•ä¸ºç°ä»£æœºå™¨å­¦ä¹ å› æœç®—æ³•çš„åŸºçŸ³ä¹‹ä¸€ï¼Œæœ‰æ›´å¥½çš„æ›¿ä»£æ–¹æ¡ˆ</td><td/></tr><tr><td>ITE</td><td>Meta - Learner</td><td>Â·é«˜ç»´ Â·å¸Œæœ›è¾“å‡ºITE Â·ç®—æ³•è®­ç»ƒ</td><td>+ ç®—æ³•å¸¸ç”¨ï¼Œå¯å¤§è§„æ¨¡å¹¶è¡Œï¼Œæœ‰å·¥ç¨‹åŒ–å…ˆä¾‹ + åœ¨è¿‡å¾€çš„simulationä¸­X-learnerå¯¹ITEä¼°è®¡çš„å‡†ç¡®åº¦è¡¨ç°ä¼˜ç§€ + X-learneré€šå¸¸ä½¿ç”¨xgboostæ¨¡å‹ï¼Œå¯¹å„ç§featureæœ‰è¾ƒå¼ºçš„å¤„ç†èƒ½åŠ› - è®¡ç®—é‡å¤§ï¼Œè€—èµ„æº - éœ€è¦è°ƒå‚ - ç”±äºç¼ºä¹ç»Ÿè®¡æ¨æ–­ç»“æœï¼Œä¸€èˆ¬ä¸ä¼šç›´æ¥äº§å‡ºp-valueï¼Œå­˜åœ¨å¯¹äºITEæ•°å€¼å‡†ç¡®æ€§çš„è´¨ç–‘ï¼Œç®—æ³•åˆ©ç”¨ç»“æœçš„rankå±…å¤š</td></tr><tr><td>DML</td><td>Â·é«˜ç»´ Â·å¸Œæœ›è¾“å‡ºITEå’Œç½®ä¿¡åŒºé—´</td><td>+ æœ‰ä¸¥è°¨ç»Ÿè®¡ç†è®ºè¯æ˜ITEä¼°è®¡çš„æ— åæœ‰æ•ˆæ€§ï¼Œå¯äº§å‡ºæ ·æœ¬çº§çš„ITEä»¥åŠç½®ä¿¡åŒºé—´ + åœ¨è¿‡å¾€çš„simulationä¸­Causal Forest DMLå¯¹ITEä¼°è®¡çš„å‡†ç¡®åº¦è¡¨ç°ä¼˜ç§€ + DMLæ¨¡å‹æ¡†æ¶æœ¬èº«å…·å¤‡ä¸€å®šçš„robustç‰¹æ€§ï¼Œåœ¨ç»“åˆForestæ¨¡å‹åï¼Œè°ƒå‚éœ€æ±‚ä½ï¼Œä¸å®¹æ˜“è¿‡æ‹Ÿåˆï¼Œå¯¹å„ç§featureæœ‰è¾ƒå¼ºçš„å¤„ç†èƒ½åŠ› - æ…¢ï¼Œè€—èµ„æºï¼Œå·¥ç¨‹åŒ–å…ˆä¾‹å°‘</td><td/></tr><tr><td>ITE + CATE hybrid</td><td>ITE Model + Decision Tree Interpreter</td><td>Â·é«˜ç»´ Â·åˆ†æç›®æ ‡ä¸æ˜ç¡®ï¼Œå¸Œæœ›æ¢ç´¢</td><td>+ å†³ç­–æ ‘çš„å»ºæ¨¡æ–¹æ³•ç¬¦åˆåˆ†æç›´è§‰ + ITEæ¨¡å‹å¯ä»¥è¾ƒå¥½çš„å¯¹å¤æ‚çš„ç°å®ä¸–ç•Œè¿›è¡ŒæŠ½è±¡æ€»ç»“ - ITEæ¨¡å‹å¯èƒ½ä¼šæ…¢</td></tr></tbody></table>
<p>** CATEã€ITEå»ºæ¨¡æ–¹æ³•çš„ç»†èŠ‚å¯å‚è€ƒAppendix*</p>
<h2 data-id="heading-7">CATEä¸‹é’»æ¢ç´¢å·¥å…·MVPç‰ˆé€»è¾‘ä»‹ç»</h2>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fxingyun.jd.com%2FcodingRoot%2Fabtest_ds%2FCATE_model" target="_blank" title="http://xingyun.jd.com/codingRoot/abtest_ds/CATE_model" ref="nofollow noopener noreferrer">xingyun.jd.com/codingRoot/â€¦</a>ï»¿</p>
<p>æ¨¡å‹é€»è¾‘ï¼šå¤šç»´åº¦çš„ç»´åº¦ä¸‹é’» + Decision Tree Interpreter</p>
<p>å¿«é€Ÿå¼€å§‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">from CATE_model.utils.workflow import CateWorkFlow
<span class="hljs-attr">yaml_path</span> = <span class="hljs-string">'config.yaml'</span>                <span class="hljs-comment"># æŒ‰åˆ†æè¦æ±‚é…ç½®YAMLæ–‡ä»¶</span>
<span class="hljs-attr">cate_workflow</span> = CateWorkFlow(yaml_path)  <span class="hljs-comment"># åˆå§‹åŒ–CATEå¯¹è±¡</span>
cate_workflow.prepare_analysis()         <span class="hljs-comment"># åˆå§‹åŒ–ABTestAnalyzer</span>
cate_workflow.execute_cate_auto()        <span class="hljs-comment"># è‡ªåŠ¨æ‰§è¡Œæ‰€æœ‰ç¯èŠ‚</span>
cate_workflow.df_out.styler              <span class="hljs-comment"># è¾“å‡ºCATEå·®å¼‚æœ€å¤§å­äººç¾¤ç›®æ ‡æŒ‡æ ‡ç»Ÿè®¡</span>
</code></pre>
<p>é¡¹ç›®åŸºæœ¬æµç¨‹</p>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f37200a3c4764b84af27869773d1ba96~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763539320&amp;x-signature=0l7BmUJS7uhFMTecak9m6DoHHpo%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>YAMLé…ç½®æ–¹æ³•ï¼šç¬¬ä¸€æ¬¡å¯ä»¥å…ˆæ ¹æ®é¡¹ç›®demoä¿®æ”¹ï¼Œå¹¶å‚è€ƒ<a href="https://link.juejin.cn?target=http%3A%2F%2Fxingyun.jd.com%2FcodingRoot%2Fabtest_ds%2FCATE_model%2Fblob%2Ftest_liuweiming%2FYAML%25E9%2585%258D%25E7%25BD%25AE%25E8%25AF%25B4%25E6%2598%258E.md" target="_blank" title="http://xingyun.jd.com/codingRoot/abtest_ds/CATE_model/blob/test_liuweiming/YAML%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E.md" ref="nofollow noopener noreferrer">YAMLé…ç½®è¯´æ˜.md</a>ï»¿</p>
<p>é¡¹ç›®MVPåŠŸèƒ½è¯´æ˜</p>
<p>1.é€šè¿‡å¡«å†™YAMLé…ç½®ï¼Œè‡ªåŠ¨ç”Ÿæˆå®éªŒåˆ†æSQLï¼Œå¹¶æ‰§è¡Œå–æ•°ï¼Œç›®å‰åŒ…æ‹¬</p>
<p>â–ª<em>è‡ªåŠ¨è·å–è¯•é‡‘çŸ³å®éªŒåˆ†æµä¿¡æ¯</em></p>
<p>â–ª<em>è‡ªåŠ¨è·å–è¯•é‡‘çŸ³å®éªŒæŒ‡æ ‡ä¿¡æ¯</em></p>
<p>â–ª<em>è§£æå®éªŒCATEç ”ç©¶ä½¿ç”¨çš„ç”¨æˆ·æ ‡ç­¾è¡¨</em></p>
<p>â–ª<em>è‡ªåŠ¨ç”Ÿæˆæ‰€æœ‰æ•°æ®æºçš„å…³è”å…³ç³»</em></p>
<p>2.ä¸ºå®éªŒCATEç ”ç©¶æä¾›è‡ªåŠ¨åŒ–å·¥å…·ï¼Œç›®å‰åŒ…æ‹¬</p>
<p>â–ª<em>è‡ªåŠ¨åŒ–ç”Ÿæˆå®éªŒç›®æ ‡æŒ‡æ ‡çš„CATEå·®å¼‚æœ€å¤§åŒ–å­äººç¾¤</em></p>
<p>â–ª<em>æä¾›è°ƒå‚æ¥å£ï¼Œé«˜çº§ç”¨æˆ·å¯è‡ªå®šä¹‰æ¨¡å‹å‚æ•°</em></p>
<p>â–ª<em>æä¾›å¯è§†åŒ–çš„æ¨¡å‹ç»“æœè¾“å‡ºï¼Œé«˜çº§ç”¨æˆ·å¯æ ¹æ®è¾“å‡ºè°ƒèŠ‚æ¨¡å‹è¡¨ç°</em></p>
<p>3.ä¸ºå®éªŒçš„ä¸‹é’»åˆ†ææä¾›æ¢ç´¢ã€åˆ†æåŠŸèƒ½ï¼Œç›®å‰åŒ…æ‹¬</p>
<p>â–ª<em>CATEäººç¾¤çš„å®éªŒæ•ˆæœç»Ÿè®¡æ£€éªŒ</em></p>
<p>â–ª<em>CATEäººç¾¤çš„å¤šæŒ‡æ ‡æ‹†è§£</em></p>
<p>â–ª<em>CATEäººç¾¤çš„ç‰¹å¾æè¿°</em></p>
<p>ï»¿</p>
<h2 data-id="heading-8">å®éªŒå¼‚è´¨æ€§åˆ†æshow case</h2>
<p>é’ˆå¯¹è¿‘æœŸæŸé¢‘é“é‡ç‚¹æ”¹ç‰ˆå®éªŒï¼Œæ­¤é¡¹ç›®æ•´ä½“å®éªŒæŒ‡æ ‡ä¸ºè´Ÿå‘ä¸æ˜¾è‘—ï¼Œä½†é€šè¿‡è¿è¡Œåˆ†æå·¥å…·åå‘ç°ï¼Œæœ‰ä¸¤ç±»å­äººç¾¤åˆ†åˆ«å…·æœ‰æ­£å‘å’Œè´Ÿå‘çš„æ˜¾è‘—æ•ˆæœ</p>











<table><thead><tr><th>å®éªŒHTEäººç¾¤ç»Ÿè®¡</th></tr></thead><tbody><tr><td><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d71aa28f24444a787cbda8152e4ade3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763539320&amp;x-signature=aAXmAgJxVK%2BafD4skDKWswMW2oY%3D" alt="" loading="lazy"/>ï»¿</td></tr></tbody></table>
<p>ï»¿</p>
<p>å¯¹äºè¿™äº›å­äººç¾¤ï¼Œæˆ‘ä»¬å‘ç°ä»–ä»¬åœ¨ä¸šåŠ¡æ¼æ–—ä¸Šçš„å˜åŒ–å¹¶ä¸ä¸€æ ·ï¼Œé‚£ä¹ˆä¸‹æ¬¡å¯¹äºé¢‘é“è¿›è¡Œè¿­ä»£æ—¶ï¼Œäº§å“ç»ç†å¯ä»¥æ•´ç†æœ‰é’ˆå¯¹æ€§çš„é€‰æ‹©å¯¹è´Ÿå‘äººç¾¤è¿›è¡Œé’ˆå¯¹æ€§çš„ä¼˜åŒ–</p>





























<table><thead><tr><th><strong>äººç¾¤ç¼–å·</strong></th><th><strong>ç”¨æˆ·ç”»åƒæ€»ç»“</strong></th><th><strong>é¢‘é“uv</strong></th><th><strong>ç‚¹å‡»uv</strong></th><th><strong>åŠ è½¦uv</strong></th><th><strong>è½¬åŒ–è®¢å•æ•°</strong></th></tr></thead><tbody><tr><td>3</td><td>å¹´è½»äººï¼Œä½æ´»è·ƒ</td><td>1.0%</td><td>2.2%</td><td>2.6%</td><td>5.8%</td></tr><tr><td>38</td><td>éå¹´è½»äººï¼Œé«˜çº¿åŸå¸‚ï¼Œplusç”¨æˆ·</td><td>-2.2%</td><td>-2.2%</td><td>-3.1%</td><td>-5.7%</td></tr></tbody></table>
<p>ï»¿</p>
<h2 data-id="heading-9">æœªæ¥å±•æœ›</h2>
<p>1.è‡ªå®šä¹‰åˆ†æµè¡¨</p>
<p>2.è‡ªå®šä¹‰ç”»åƒè¡¨ &amp; ç»æµ·è·¯ç”»åƒè¡¨</p>
<p>3.CATEæ¨¡å‹è¿­ä»£</p>
<p>4.é€šç”¨ç»´åº¦é…ç½®æ¨¡ç‰ˆ &amp; ä¸šåŠ¡åœºæ™¯æ¨¡ç‰ˆ</p>
<p>5.å›¾å½¢åŒ–äº¤äº’ç•Œé¢ï¼Œç®€åŒ–è¾“å…¥é…ç½®</p>
<h2 data-id="heading-10">Appendix &amp; å‚è€ƒèµ„æ–™</h2>
<h6 data-id="heading-11">****ã€1ã€‘<strong>å› æœåˆ†ææ¡†æ¶ &amp; Donald Rubinçš„Potencial Outcome</strong></h6>
<p>â€¢Potencial Outcome</p>
<p>â—¦è®¾</p>
<p>TiTiâ€‹</p>
<p>ï»¿ä»£è¡¨ç¬¬iä¸ªæ ·æœ¬æ˜¯å¦æ”¶åˆ°äº†å¤„ç†ï¼ˆtreatmentï¼Œç­–ç•¥å½±å“ï¼‰ï¼Œæ˜¯ä¸º1ï¼Œå¦ä¸º0</p>
<p>â—¦ï»¿</p>
<p>YiYiâ€‹</p>
<p>ï»¿ä»£è¡¨ä¸ªä½“içš„ç»“æœï¼Œå¦å¤–è®°</p>
<p>{Yi(1),Yi(0)}{Yiâ€‹(1),Yiâ€‹(0)}</p>
<p>ï»¿ä¸ºä¸ªä½“iæ¥å—å¤„ç†ã€å¯¹ç…§çš„æ½œåœ¨ç»“æœ</p>
<p>â—¦æ¯ä¸ªä¸ªä½“é€šå¸¸åªä¼šæœ‰1ä¸ªçŠ¶æ€ï¼Œä¸ªä½“å› æœä½œç”¨æ— æ³•ç›´æ¥è§‚æµ‹ï¼Œæˆ‘ä»¬åªæœ‰</p>
<p>Yi=Tiâˆ—Yi(1)+(1âˆ’Ti)âˆ—Yi(0)Yiâ€‹=Tiâ€‹âˆ—Yiâ€‹(1)+(1âˆ’Tiâ€‹)âˆ—Yiâ€‹(0)</p>
<p>ï»¿ï»¿</p>
<p>â—¦åœ¨éšæœºåŒ–å®éªŒçš„åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°</p>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2e622f58b8b4e018100e674821eeeaa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763539320&amp;x-signature=vG%2FEgu5OaDQ4lbqVcOQeHund%2Fbo%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>å…¶ä¸­æœ€é‡è¦çš„é€»è¾‘ä¸ºï¼š</p>
<p>Tæ˜¯éšæœºåŒ–çš„ï¼Œ</p>
<p>TâŠ¥YTâŠ¥Y</p>
<p>ï»¿ï¼Œæ‰€ä»¥</p>
<p>E[Yi(1)]=E[Yi(1)ï½œTi=1]E[Yiâ€‹(1)]=E[Yiâ€‹(1)ï½œTiâ€‹=1]</p>
<p>ï»¿ï¼Œæ‰€ä»¥ï¼ˆ3ï¼‰æˆç«‹</p>
<p>â€¢å› æœæ¨æ–­ï¼ˆä¸€ï¼‰ï¼šå› æœæ¨æ–­ä¸¤å¤§æ¡†æ¶åŠå› æœæ•ˆåº”ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F652174282" target="_blank" title="https://zhuanlan.zhihu.com/p/652174282" ref="nofollow noopener noreferrer">zhuanlan.zhihu.com/p/652174282</a>ï»¿</p>
<p>â€¢å› æœæ¨æ–­ç®€ä»‹ä¹‹äºŒï¼šRubin Causal Model (RCM) å’ŒéšæœºåŒ–è¯•éªŒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcosx.org%2F2012%2F03%2Fcausality2-rcm%2F" target="_blank" title="https://cosx.org/2012/03/causality2-rcm/" ref="nofollow noopener noreferrer">cosx.org/2012/03/cauâ€¦</a>ï»¿</p>
<p>ï»¿</p>
<h6 data-id="heading-12">ã€2ã€‘ANOVAä¸CATEçš„äº¤äº’æ•ˆåº”åˆ†æ</h6>
<p>å½“éœ€è¦è¿›è¡Œå¼‚è´¨æ€§åˆ†æçš„ç»´åº¦ä¸ºXæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ„å»ºä¸‹åˆ—å›å½’æ–¹ç¨‹å»æè¿°Xåœ¨å®éªŒä¸­æ˜¯å¦å­˜åœ¨æ˜¾è‘—çš„å¼‚è´¨æ€§ï¼Œå½“</p>
<p>Î²3Î²3â€‹</p>
<p>ï»¿å¯¹åº”çš„F-testæ˜¾è‘—æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¤ä¸ºå®éªŒåœ¨ç»´åº¦Xä¸Šå­˜åœ¨æ˜¾è‘—çš„å¼‚è´¨æ€§</p>
<p>ï»¿</p>
<p>Y=Î²0+Î²1âˆ—T+Î²2âˆ—X+Î²3âˆ—Xâˆ—TY=Î²0â€‹+Î²1â€‹âˆ—T+Î²2â€‹âˆ—X+Î²3â€‹âˆ—Xâˆ—T</p>
<p>ï»¿ï»¿</p>
<p>å½“</p>
<p>Xâˆˆ{0,1}Xâˆˆ{0,1}</p>
<p>ï»¿æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹å›¾æ¥è¿›è¡Œå¼‚è´¨æ€§çš„ç†è§£</p>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0d17b09e28f480e92d5c7423f27c43a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763539320&amp;x-signature=%2B0QpCjJhUm70uAJRs0Jt4anSVgs%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<h6 data-id="heading-13">ã€3ã€‘CATE &amp; ITEä¼°è®¡</h6>
<blockquote>
<p>idea1ï¼šå¯¹äºæ¯ä¸ªå‚ä¸å®éªŒçš„å¯¹è±¡iï¼Œå¦‚æœèƒ½å¾—åˆ°</p>
<p>Yi(1)Yiâ€‹(1)</p>
<p>ï»¿å’Œ</p>
<p>Yi(0)Yiâ€‹(0)</p>
<p>ï»¿çš„åˆç†ä¼°è®¡ï¼Œé‚£ä¹ˆITEå°±å¯æ±‚äº† idea2ï¼šå¯¹äºå®éªŒäººç¾¤Xï¼Œå¦‚æœèƒ½æ‰¾åˆ°ä¸€ç§è§‚æµ‹æ–¹å¼ï¼Œæ±‚å¾—</p>
<p>E[Yx(1)âˆ’Yx(0)âˆ£xâˆˆX]E[Yxâ€‹(1)âˆ’Yxâ€‹(0)âˆ£xâˆˆX]</p>
<p>ï»¿ï¼Œé‚£ä¹ˆCATEå°±æœ‰äº†</p>
</blockquote>
<p>â€¢Meta Learnerçš„æç®€ä»‹ç»</p>
<p>â—¦S-Learner</p>
<p>â–ªstage1: åˆ©ç”¨æ¨¡å‹ä¼°è®¡</p>
<p>ï»¿</p>
<p>Î¼(x,t)=E[Yâˆ£X=x,T=t]Î¼(x,t)=E[Yâˆ£X=x,T=t]</p>
<p>ï»¿ï»¿</p>
<p>â–ªstage2: å®šä¹‰CATEç»“æœå¦‚ä¸‹</p>
<p>ï»¿</p>
<p>Ï„^(x)=Î¼^(x,T=1)âˆ’Î¼^(x,T=0)Ï„^(x)=Î¼^â€‹(x,T=1)âˆ’Î¼^â€‹(x,T=0)</p>
<p>ï»¿ï»¿</p>
<p>â—¦T-Learner</p>
<p>â–ªsta</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®°å½•ï¼šecharts tooltipå†…å®¹è¿‡å¤šæ—¶ï¼Œä¼šå¯¼è‡´éƒ¨åˆ†å†…å®¹é®æŒ¡]]></title>    <link>https://juejin.cn/post/7571378103282778118</link>    <guid>https://juejin.cn/post/7571378103282778118</guid>    <pubDate>2025-11-12T06:02:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571378103282778118" data-draft-id="7571402480966926372" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®°å½•ï¼šecharts tooltipå†…å®¹è¿‡å¤šæ—¶ï¼Œä¼šå¯¼è‡´éƒ¨åˆ†å†…å®¹é®æŒ¡"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-12T06:02:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€ä¸ªå°æ½˜æ¡ƒé¸­"/> <meta itemprop="url" content="https://juejin.cn/user/3769553199307048"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®°å½•ï¼šecharts tooltipå†…å®¹è¿‡å¤šæ—¶ï¼Œä¼šå¯¼è‡´éƒ¨åˆ†å†…å®¹é®æŒ¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3769553199307048/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€ä¸ªå°æ½˜æ¡ƒé¸­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T06:02:34.000Z" title="Wed Nov 12 2025 06:02:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>é—®é¢˜ï¼šecharts tooltipå†…å®¹è¿‡å¤šæ—¶ï¼Œä¼šå¯¼è‡´éƒ¨åˆ†å†…å®¹é®æŒ¡ï¼Œå¦‚ä¸‹å›¾</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2511b791f37e4e3f86290fc5ed3f0cff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Liq5bCP5r2Y5qGD6bit:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763532154&amp;x-signature=hm8R%2FX8ySOyGgIbGElhnNZMnr3s%3D" alt="image.png" loading="lazy"/></p>
<p>ä¼˜åŒ–ï¼š</p>
<ol>
<li>æ•°æ®ä¸å¤šæ—¶åˆ™ä¿æŒåŸæ¥æ–¹å¼å±•ç¤º</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5bcf8027eba44970a0b41c5a333fdb5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Liq5bCP5r2Y5qGD6bit:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763532154&amp;x-signature=0JW%2BoctKIDKIDAT52Q58ngJo%2Fd0%3D" alt="image.png" loading="lazy"/></p>
<ol start="2">
<li>æ•°æ®è¿‡å¤šæ—¶ä½¿ç”¨æ»šåŠ¨æ¡+ä¸€è¡Œå±•ç¤ºä¸¤ä¸ªçš„æ–¹å¼æ¥å±•ç¤º</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/853963597d684d4b9072f188776ac311~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Liq5bCP5r2Y5qGD6bit:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763532154&amp;x-signature=yvQR8phvzLBzvXeQQKnu4ihM%2Fsw%3D" alt="image.png" loading="lazy"/></p>
<p>ä¼˜åŒ–æ•ˆæœvs:</p>
<ol>
<li>ä¼˜åŒ–å‰</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">initEcharts</span> = (<span class="hljs-params">items, yItems, legends</span>) =&gt; {
  <span class="hljs-keyword">var</span> chartDom = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"main"</span>);

  <span class="hljs-keyword">if</span> (!chartDom) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"chart dom not found"</span>);
    <span class="hljs-keyword">return</span>;
  }


  myChart = echarts.<span class="hljs-title function_">init</span>(chartDom);
  <span class="hljs-keyword">var</span> option;

  <span class="hljs-comment">// æ˜¾ç¤ºæ‰€æœ‰å›¾ä¾‹</span>
  option = {
    <span class="hljs-attr">tooltip</span>: {
      <span class="hljs-attr">trigger</span>: <span class="hljs-string">"axis"</span>,
    },
    <span class="hljs-attr">legend</span>: {
      <span class="hljs-attr">data</span>: legends,
      <span class="hljs-attr">selectedMode</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¯ç”¨å›¾ä¾‹çš„å¤šé€‰æ¨¡å¼</span>
      <span class="hljs-comment">// left: "left",</span>
      <span class="hljs-comment">// width: "99%", // è®¾ç½®å›¾ä¾‹æ€»å®½åº¦</span>
      <span class="hljs-attr">right</span>: <span class="hljs-string">"240px"</span>, <span class="hljs-comment">// è®¾ç½®å³è¾¹è·</span>
    },
    <span class="hljs-attr">grid</span>: {
      <span class="hljs-attr">left</span>: <span class="hljs-string">"3%"</span>,
      <span class="hljs-attr">right</span>: <span class="hljs-string">"4%"</span>,
      <span class="hljs-attr">bottom</span>: <span class="hljs-string">"3%"</span>,
      <span class="hljs-attr">containLabel</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">top</span>: <span class="hljs-string">"20%"</span>, <span class="hljs-comment">// è®¾ç½®å›¾è¡¨ä¸ä¸Šæ–¹å›¾ä¾‹çš„è·ç¦»</span>
    },
    <span class="hljs-attr">toolbox</span>: {
      <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">feature</span>: {
        <span class="hljs-attr">dataZoom</span>: {
          <span class="hljs-attr">yAxisIndex</span>: <span class="hljs-string">"none"</span>,
        },
        <span class="hljs-attr">dataView</span>: { <span class="hljs-attr">readOnly</span>: <span class="hljs-literal">false</span> },
        <span class="hljs-attr">magicType</span>: { <span class="hljs-attr">type</span>: [<span class="hljs-string">"line"</span>, <span class="hljs-string">"bar"</span>] },
        <span class="hljs-attr">restore</span>: {},
        <span class="hljs-attr">saveAsImage</span>: {},
        <span class="hljs-attr">myTool1</span>: {
          <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">title</span>: <span class="hljs-string">"Hide/Show All Legends"</span>,
          <span class="hljs-attr">icon</span>: <span class="hljs-string">"path://M20,20 H80 V80 H20 Z M30,30 H90 V90 H30 Z M40,60 L55,75 L80,50"</span>,
          <span class="hljs-attr">onclick</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
            <span class="hljs-title function_">toggleLegendVisibility</span>();
          },
        },
      },
    },
    <span class="hljs-attr">xAxis</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-string">"category"</span>,
      <span class="hljs-attr">boundaryGap</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">data</span>: items,
    },
    <span class="hljs-attr">yAxis</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-string">"value"</span>,
    },
    <span class="hljs-attr">series</span>: yItems,
  };

  myChart.<span class="hljs-title function_">clear</span>();
  option &amp;&amp; myChart.<span class="hljs-title function_">setOption</span>(option);
};
</code></pre>
<ol start="2">
<li>ä¸€è¡Œå±•ç¤ºä¸¤ä¸ª</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">initEcharts</span> = (<span class="hljs-params">items, yItems, legends</span>) =&gt; {
  <span class="hljs-keyword">var</span> chartDom = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"main"</span>);

  <span class="hljs-keyword">if</span> (!chartDom) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"chart dom not found"</span>);
    <span class="hljs-keyword">return</span>;
  }


  myChart = echarts.<span class="hljs-title function_">init</span>(chartDom);
  <span class="hljs-keyword">var</span> option;

  <span class="hljs-comment">// æ˜¾ç¤ºæ‰€æœ‰å›¾ä¾‹</span>
  option = {
    <span class="hljs-attr">tooltip</span>: {
      <span class="hljs-attr">trigger</span>: <span class="hljs-string">"axis"</span>,
      <span class="hljs-attr">appendToBody</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å°† tooltip é™„åŠ åˆ° bodyï¼Œé¿å…è¢«å®¹å™¨è¾¹ç•Œæˆªæ–­</span>
      <span class="hljs-attr">confine</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// appendToBody ä¸º true æ—¶ï¼Œconfine åº”è®¾ä¸º false</span>
      <span class="hljs-attr">enterable</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å…è®¸é¼ æ ‡è¿›å…¥ tooltipï¼Œæ–¹ä¾¿æ»šåŠ¨æŸ¥çœ‹</span>
      <span class="hljs-attr">extraCssText</span>: <span class="hljs-string">"max-height: 400px; overflow-y: auto; min-width: 400px;"</span>, <span class="hljs-comment">// è®¾ç½®æœ€å¤§é«˜åº¦å¹¶æ·»åŠ æ»šåŠ¨æ¡ï¼Œè®¾ç½®æœ€å°å®½åº¦ä»¥å®¹çº³ä¸¤åˆ—</span>
      <span class="hljs-attr">axisPointer</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-string">"line"</span>,
      },
      <span class="hljs-comment">// è‡ªå®šä¹‰ formatterï¼Œä¸€è¡Œæ˜¾ç¤ºä¸¤ä¸ªæœŸåˆŠä¿¡æ¯</span>
      <span class="hljs-attr">formatter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">params: any</span>) {
        <span class="hljs-keyword">if</span> (!params || params.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
        
        <span class="hljs-comment">// è·å– x è½´çš„å€¼ï¼ˆæ—¥æœŸï¼‰</span>
        <span class="hljs-keyword">const</span> date = params[<span class="hljs-number">0</span>].<span class="hljs-property">axisValue</span>;
        <span class="hljs-keyword">let</span> result = <span class="hljs-string">`&lt;div style="font-weight: bold; margin-bottom: 8px; padding-bottom: 4px; border-bottom: 1px solid #eee;"&gt;<span class="hljs-subst">${date}</span>&lt;/div&gt;`</span>;
        
        <span class="hljs-comment">// å°†æ•°æ®æŒ‰ä¸¤åˆ—æ˜¾ç¤º</span>
        <span class="hljs-keyword">const</span> <span class="hljs-attr">items</span>: string[] = [];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; params.<span class="hljs-property">length</span>; i += <span class="hljs-number">2</span>) {
          <span class="hljs-keyword">const</span> param = params[i];
          <span class="hljs-keyword">const</span> marker = param.<span class="hljs-property">marker</span> || <span class="hljs-string">""</span>;
          <span class="hljs-keyword">const</span> name = param.<span class="hljs-property">seriesName</span> || <span class="hljs-string">""</span>;
          <span class="hljs-keyword">const</span> value = param.<span class="hljs-property">value</span> !== <span class="hljs-literal">null</span> &amp;&amp; param.<span class="hljs-property">value</span> !== <span class="hljs-literal">undefined</span> ? param.<span class="hljs-property">value</span> : <span class="hljs-number">0</span>;
          
          <span class="hljs-comment">// æ¯è¡Œæ˜¾ç¤ºä¸¤ä¸ªæœŸåˆŠï¼Œä½¿ç”¨ flex å¸ƒå±€</span>
          <span class="hljs-keyword">const</span> nextParam = params[i + <span class="hljs-number">1</span>];
          <span class="hljs-keyword">if</span> (nextParam) {
            <span class="hljs-keyword">const</span> nextMarker = nextParam.<span class="hljs-property">marker</span> || <span class="hljs-string">""</span>;
            <span class="hljs-keyword">const</span> nextName = nextParam.<span class="hljs-property">seriesName</span> || <span class="hljs-string">""</span>;
            <span class="hljs-keyword">const</span> nextValue = nextParam.<span class="hljs-property">value</span> !== <span class="hljs-literal">null</span> &amp;&amp; nextParam.<span class="hljs-property">value</span> !== <span class="hljs-literal">undefined</span> ? nextParam.<span class="hljs-property">value</span> : <span class="hljs-number">0</span>;
            items.<span class="hljs-title function_">push</span>(
              <span class="hljs-string">`&lt;div style="display: flex; margin-bottom: 4px; line-height: 1.5;"&gt;`</span> +
              <span class="hljs-string">`&lt;span style="flex: 1; min-width: 0; padding-right: 10px;"&gt;<span class="hljs-subst">${marker}</span> <span class="hljs-subst">${name}</span>: <span class="hljs-subst">${value}</span>&lt;/span&gt;`</span> +
              <span class="hljs-string">`&lt;span style="flex: 1; min-width: 0; padding-left: 10px; border-left: 1px solid #eee;"&gt;<span class="hljs-subst">${nextMarker}</span> <span class="hljs-subst">${nextName}</span>: <span class="hljs-subst">${nextValue}</span>&lt;/span&gt;`</span> +
              <span class="hljs-string">`&lt;/div&gt;`</span>
            );
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// æœ€åä¸€ä¸ªï¼Œå•ç‹¬æ˜¾ç¤º</span>
            items.<span class="hljs-title function_">push</span>(
              <span class="hljs-string">`&lt;div style="margin-bottom: 4px; line-height: 1.5;"&gt;<span class="hljs-subst">${marker}</span> <span class="hljs-subst">${name}</span>: <span class="hljs-subst">${value}</span>&lt;/div&gt;`</span>
            );
          }
        }
        
        result += items.<span class="hljs-title function_">join</span>(<span class="hljs-string">""</span>);
        <span class="hljs-keyword">return</span> result;
      },
      <span class="hljs-comment">// è‡ªå®šä¹‰ä½ç½®ï¼Œç¡®ä¿ tooltip åœ¨å¯è§†åŒºåŸŸå†…</span>
      <span class="hljs-attr">position</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">point: number[], _params: any, _dom: any, _rect: any, size: any</span>) {
        <span class="hljs-comment">// point: é¼ æ ‡ä½ç½®</span>
        <span class="hljs-comment">// size: tooltip çš„å¤§å°</span>
        <span class="hljs-keyword">const</span> [x, y] = point;
        <span class="hljs-keyword">const</span> viewWidth = size.<span class="hljs-property">viewSize</span>[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">const</span> viewHeight = size.<span class="hljs-property">viewSize</span>[<span class="hljs-number">1</span>];
        <span class="hljs-keyword">const</span> boxWidth = size.<span class="hljs-property">contentSize</span>[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">const</span> boxHeight = size.<span class="hljs-property">contentSize</span>[<span class="hljs-number">1</span>];
        
        <span class="hljs-comment">// é»˜è®¤ä½ç½®åœ¨é¼ æ ‡å³ä¾§</span>
        <span class="hljs-keyword">let</span> posX = x + <span class="hljs-number">10</span>;
        <span class="hljs-keyword">let</span> posY = y;
        
        <span class="hljs-comment">// å¦‚æœå³ä¾§ç©ºé—´ä¸è¶³ï¼Œæ˜¾ç¤ºåœ¨å·¦ä¾§</span>
        <span class="hljs-keyword">if</span> (posX + boxWidth &gt; viewWidth) {
          posX = x - boxWidth - <span class="hljs-number">10</span>;
        }
        
        <span class="hljs-comment">// å¦‚æœä¸‹æ–¹ç©ºé—´ä¸è¶³ï¼Œå‘ä¸Šè°ƒæ•´</span>
        <span class="hljs-keyword">if</span> (posY + boxHeight &gt; viewHeight) {
          posY = viewHeight - boxHeight - <span class="hljs-number">10</span>;
        }
        
        <span class="hljs-comment">// ç¡®ä¿ä¸è¶…å‡ºä¸Šè¾¹ç•Œ</span>
        <span class="hljs-keyword">if</span> (posY &lt; <span class="hljs-number">10</span>) {
          posY = <span class="hljs-number">10</span>;
        }
        
        <span class="hljs-keyword">return</span> [posX, posY];
      },
    },
    <span class="hljs-attr">legend</span>: {
      <span class="hljs-attr">data</span>: legends,
      <span class="hljs-attr">selectedMode</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¯ç”¨å›¾ä¾‹çš„å¤šé€‰æ¨¡å¼</span>
      <span class="hljs-comment">// left: "left",</span>
      <span class="hljs-comment">// width: "99%", // è®¾ç½®å›¾ä¾‹æ€»å®½åº¦</span>
      <span class="hljs-attr">right</span>: <span class="hljs-string">"240px"</span>, <span class="hljs-comment">// è®¾ç½®å³è¾¹è·</span>
    },
    <span class="hljs-attr">grid</span>: {
      <span class="hljs-attr">left</span>: <span class="hljs-string">"3%"</span>,
      <span class="hljs-attr">right</span>: <span class="hljs-string">"4%"</span>,
      <span class="hljs-attr">bottom</span>: <span class="hljs-string">"3%"</span>,
      <span class="hljs-attr">containLabel</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">top</span>: <span class="hljs-string">"20%"</span>, <span class="hljs-comment">// è®¾ç½®å›¾è¡¨ä¸ä¸Šæ–¹å›¾ä¾‹çš„è·ç¦»</span>
    },
    <span class="hljs-attr">toolbox</span>: {
      <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">feature</span>: {
        <span class="hljs-attr">dataZoom</span>: {
          <span class="hljs-attr">yAxisIndex</span>: <span class="hljs-string">"none"</span>,
        },
        <span class="hljs-attr">dataView</span>: { <span class="hljs-attr">readOnly</span>: <span class="hljs-literal">false</span> },
        <span class="hljs-attr">magicType</span>: { <span class="hljs-attr">type</span>: [<span class="hljs-string">"line"</span>, <span class="hljs-string">"bar"</span>] },
        <span class="hljs-attr">restore</span>: {},
        <span class="hljs-attr">saveAsImage</span>: {},
        <span class="hljs-attr">myTool1</span>: {
          <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">title</span>: <span class="hljs-string">"Hide/Show All Legends"</span>,
          <span class="hljs-attr">icon</span>: <span class="hljs-string">"path://M20,20 H80 V80 H20 Z M30,30 H90 V90 H30 Z M40,60 L55,75 L80,50"</span>,
          <span class="hljs-attr">onclick</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
            <span class="hljs-title function_">toggleLegendVisibility</span>();
          },
        },
      },
    },
    <span class="hljs-attr">xAxis</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-string">"category"</span>,
      <span class="hljs-attr">boundaryGap</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">data</span>: items,
    },
    <span class="hljs-attr">yAxis</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-string">"value"</span>,
    },
    <span class="hljs-attr">series</span>: yItems,
  };

  myChart.<span class="hljs-title function_">clear</span>();
  option &amp;&amp; myChart.<span class="hljs-title function_">setOption</span>(option);
};
</code></pre>
<ol start="3">
<li>å½“æœŸåˆŠè¶…è¿‡20æ¡æ—¶ï¼Œä½¿ç”¨è‡ªå®šä¹‰ formatter å’Œæ»šåŠ¨æ¡ï¼›
å½“æœŸåˆŠä¸è¶…è¿‡20æ¡æ—¶ï¼Œä¸è®¾ç½® formatterï¼Œä½¿ç”¨ ECharts é»˜è®¤çš„æ˜¾ç¤ºæ–¹å¼ï¼ˆæ²¡æœ‰æœ€å°å®½åº¦ï¼Œæ²¡æœ‰æ»šåŠ¨æ¡ï¼‰</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">initEcharts</span> = (<span class="hljs-params">items, yItems, legends</span>) =&gt; {
  <span class="hljs-keyword">var</span> chartDom = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"main"</span>);

  <span class="hljs-keyword">if</span> (!chartDom) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"chart dom not found"</span>);
    <span class="hljs-keyword">return</span>;
  }


  myChart = echarts.<span class="hljs-title function_">init</span>(chartDom);
  <span class="hljs-keyword">var</span> option;

  <span class="hljs-comment">// æ ¹æ®æœŸåˆŠæ•°é‡å†³å®š tooltip é…ç½®</span>
  <span class="hljs-keyword">const</span> <span class="hljs-attr">tooltipConfig</span>: any = {
    <span class="hljs-attr">trigger</span>: <span class="hljs-string">"axis"</span>,
    <span class="hljs-attr">appendToBody</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å°† tooltip é™„åŠ åˆ° bodyï¼Œé¿å…è¢«å®¹å™¨è¾¹ç•Œæˆªæ–­</span>
    <span class="hljs-attr">confine</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// appendToBody ä¸º true æ—¶ï¼Œconfine åº”è®¾ä¸º false</span>
    <span class="hljs-attr">enterable</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å…è®¸é¼ æ ‡è¿›å…¥ tooltipï¼Œæ–¹ä¾¿æ»šåŠ¨æŸ¥çœ‹</span>
    <span class="hljs-attr">axisPointer</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-string">"line"</span>,
    },
    <span class="hljs-comment">// è‡ªå®šä¹‰ä½ç½®ï¼Œç¡®ä¿ tooltip åœ¨å¯è§†åŒºåŸŸå†…</span>
    <span class="hljs-attr">position</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">point: number[], _params: any, _dom: any, _rect: any, size: any</span>) {
      <span class="hljs-comment">// point: é¼ æ ‡ä½ç½®</span>
      <span class="hljs-comment">// size: tooltip çš„å¤§å°</span>
      <span class="hljs-keyword">const</span> [x, y] = point;
      <span class="hljs-keyword">const</span> viewWidth = size.<span class="hljs-property">viewSize</span>[<span class="hljs-number">0</span>];
      <span class="hljs-keyword">const</span> viewHeight = size.<span class="hljs-property">viewSize</span>[<span class="hljs-number">1</span>];
      <span class="hljs-keyword">const</span> boxWidth = size.<span class="hljs-property">contentSize</span>[<span class="hljs-number">0</span>];
      <span class="hljs-keyword">const</span> boxHeight = size.<span class="hljs-property">contentSize</span>[<span class="hljs-number">1</span>];
      
      <span class="hljs-comment">// é»˜è®¤ä½ç½®åœ¨é¼ æ ‡å³ä¾§</span>
      <span class="hljs-keyword">let</span> posX = x + <span class="hljs-number">10</span>;
      <span class="hljs-keyword">let</span> posY = y;
      
      <span class="hljs-comment">// å¦‚æœå³ä¾§ç©ºé—´ä¸è¶³ï¼Œæ˜¾ç¤ºåœ¨å·¦ä¾§</span>
      <span class="hljs-keyword">if</span> (posX + boxWidth &gt; viewWidth) {
        posX = x - boxWidth - <span class="hljs-number">10</span>;
      }
      
      <span class="hljs-comment">// å¦‚æœä¸‹æ–¹ç©ºé—´ä¸è¶³ï¼Œå‘ä¸Šè°ƒæ•´</span>
      <span class="hljs-keyword">if</span> (posY + boxHeight &gt; viewHeight) {
        posY = viewHeight - boxHeight - <span class="hljs-number">10</span>;
      }
      
      <span class="hljs-comment">// ç¡®ä¿ä¸è¶…å‡ºä¸Šè¾¹ç•Œ</span>
      <span class="hljs-keyword">if</span> (posY &lt; <span class="hljs-number">10</span>) {
        posY = <span class="hljs-number">10</span>;
      }
      
      <span class="hljs-keyword">return</span> [posX, posY];
    },
  };

  <span class="hljs-comment">// å½“æœŸåˆŠè¶…è¿‡20æ¡æ—¶ï¼Œä½¿ç”¨è‡ªå®šä¹‰ formatter å’Œæ»šåŠ¨æ¡</span>
  <span class="hljs-keyword">if</span> (legends &amp;&amp; legends.<span class="hljs-property">length</span> &gt; <span class="hljs-number">20</span>) {
    tooltipConfig.<span class="hljs-property">extraCssText</span> = <span class="hljs-string">"max-height: 400px; overflow-y: auto; min-width: 400px;"</span>; <span class="hljs-comment">// è®¾ç½®æœ€å¤§é«˜åº¦å¹¶æ·»åŠ æ»šåŠ¨æ¡ï¼Œè®¾ç½®æœ€å°å®½åº¦ä»¥å®¹çº³ä¸¤åˆ—</span>
    tooltipConfig.<span class="hljs-property">formatter</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">params: any</span>) {
      <span class="hljs-keyword">if</span> (!params || params.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
      
      <span class="hljs-comment">// è·å– x è½´çš„å€¼ï¼ˆæ—¥æœŸï¼‰</span>
      <span class="hljs-keyword">const</span> date = params[<span class="hljs-number">0</span>].<span class="hljs-property">axisValue</span>;
      <span class="hljs-keyword">let</span> result = <span class="hljs-string">`&lt;div style="font-weight: bold; margin-bottom: 8px; padding-bottom: 4px; border-bottom: 1px solid #eee;"&gt;<span class="hljs-subst">${date}</span>&lt;/div&gt;`</span>;
      
      <span class="hljs-comment">// ä¸¤åˆ—æ˜¾ç¤º</span>
      <span class="hljs-keyword">const</span> <span class="hljs-attr">items</span>: string[] = [];
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; params.<span class="hljs-property">length</span>; i += <span class="hljs-number">2</span>) {
        <span class="hljs-keyword">const</span> param = params[i];
        <span class="hljs-keyword">const</span> marker = param.<span class="hljs-property">marker</span> || <span class="hljs-string">""</span>;
        <span class="hljs-keyword">const</span> name = param.<span class="hljs-property">seriesName</span> || <span class="hljs-string">""</span>;
        <span class="hljs-keyword">const</span> value = param.<span class="hljs-property">value</span> !== <span class="hljs-literal">null</span> &amp;&amp; param.<span class="hljs-property">value</span> !== <span class="hljs-literal">undefined</span> ? param.<span class="hljs-property">value</span> : <span class="hljs-number">0</span>;
        
        <span class="hljs-comment">// æ¯è¡Œæ˜¾ç¤ºä¸¤ä¸ªæœŸåˆŠï¼Œä½¿ç”¨ flex å¸ƒå±€</span>
        <span class="hljs-keyword">const</span> nextParam = params[i + <span class="hljs-number">1</span>];
        <span class="hljs-keyword">if</span> (nextParam) {
          <span class="hljs-keyword">const</span> nextMarker = nextParam.<span class="hljs-property">marker</span> || <span class="hljs-string">""</span>;
          <span class="hljs-keyword">const</span> nextName = nextParam.<span class="hljs-property">seriesName</span> || <span class="hljs-string">""</span>;
          <span class="hljs-keyword">const</span> nextValue = nextParam.<span class="hljs-property">value</span> !== <span class="hljs-literal">null</span> &amp;&amp; nextParam.<span class="hljs-property">value</span> !== <span class="hljs-literal">undefined</span> ? nextParam.<span class="hljs-property">value</span> : <span class="hljs-number">0</span>;
          items.<span class="hljs-title function_">push</span>(
            <span class="hljs-string">`&lt;div style="display: flex; margin-bottom: 4px; line-height: 1.5;"&gt;`</span> +
            <span class="hljs-string">`&lt;span style="flex: 1; min-width: 0; padding-right: 10px;"&gt;<span class="hljs-subst">${marker}</span> <span class="hljs-subst">${name}</span>: <span class="hljs-subst">${value}</span>&lt;/span&gt;`</span> +
            <span class="hljs-string">`&lt;span style="flex: 1; min-width: 0; padding-left: 10px; border-left: 1px solid #eee;"&gt;<span class="hljs-subst">${nextMarker}</span> <span class="hljs-subst">${nextName}</span>: <span class="hljs-subst">${nextValue}</span>&lt;/span&gt;`</span> +
            <span class="hljs-string">`&lt;/div&gt;`</span>
          );
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// æœ€åä¸€ä¸ªï¼Œå•ç‹¬æ˜¾ç¤º</span>
          items.<span class="hljs-title function_">push</span>(
            <span class="hljs-string">`&lt;div style="margin-bottom: 4px; line-height: 1.5;"&gt;<span class="hljs-subst">${marker}</span> <span class="hljs-subst">${name}</span>: <span class="hljs-subst">${value}</span>&lt;/div&gt;`</span>
          );
        }
      }
      
      result += items.<span class="hljs-title function_">join</span>(<span class="hljs-string">""</span>);
      <span class="hljs-keyword">return</span> result;
    };
  }
  <span class="hljs-comment">// å½“æœŸåˆŠä¸è¶…è¿‡20æ¡æ—¶ï¼Œä¸è®¾ç½® formatterï¼Œä½¿ç”¨ ECharts é»˜è®¤çš„æ˜¾ç¤ºæ–¹å¼ï¼ˆæ²¡æœ‰æœ€å°å®½åº¦ï¼Œæ²¡æœ‰æ»šåŠ¨æ¡ï¼‰</span>

  <span class="hljs-comment">// æ˜¾ç¤ºæ‰€æœ‰å›¾ä¾‹</span>
  option = {
    <span class="hljs-attr">tooltip</span>: tooltipConfig,
    <span class="hljs-attr">legend</span>: {
      <span class="hljs-attr">data</span>: legends,
      <span class="hljs-attr">selectedMode</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¯ç”¨å›¾ä¾‹çš„å¤šé€‰æ¨¡å¼</span>
      <span class="hljs-comment">// left: "left",</span>
      <span class="hljs-comment">// width: "99%", // è®¾ç½®å›¾ä¾‹æ€»å®½åº¦</span>
      <span class="hljs-attr">right</span>: <span class="hljs-string">"240px"</span>, <span class="hljs-comment">// è®¾ç½®å³è¾¹è·</span>
    },
    <span class="hljs-attr">grid</span>: {
      <span class="hljs-attr">left</span>: <span class="hljs-string">"3%"</span>,
      <span class="hljs-attr">right</span>: <span class="hljs-string">"4%"</span>,
      <span class="hljs-attr">bottom</span>: <span class="hljs-string">"3%"</span>,
      <span class="hljs-attr">containLabel</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">top</span>: <span class="hljs-string">"20%"</span>, <span class="hljs-comment">// è®¾ç½®å›¾è¡¨ä¸ä¸Šæ–¹å›¾ä¾‹çš„è·ç¦»</span>
    },
    <span class="hljs-attr">toolbox</span>: {
      <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">feature</span>: {
        <span class="hljs-attr">dataZoom</span>: {
          <span class="hljs-attr">yAxisIndex</span>: <span class="hljs-string">"none"</span>,
        },
        <span class="hljs-attr">dataView</span>: { <span class="hljs-attr">readOnly</span>: <span class="hljs-literal">false</span> },
        <span class="hljs-attr">magicType</span>: { <span class="hljs-attr">type</span>: [<span class="hljs-string">"line"</span>, <span class="hljs-string">"bar"</span>] },
        <span class="hljs-attr">restore</span>: {},
        <span class="hljs-attr">saveAsImage</span>: {},
        <span class="hljs-attr">myTool1</span>: {
          <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">title</span>: <span class="hljs-string">"Hide/Show All Legends"</span>,
          <span class="hljs-attr">icon</span>: <span class="hljs-string">"path://M20,20 H80 V80 H20 Z M30,30 H90 V90 H30 Z M40,60 L55,75 L80,50"</span>,
          <span class="hljs-attr">onclick</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
            <span class="hljs-title function_">toggleLegendVisibility</span>();
          },
        },
      },
    },
    <span class="hljs-attr">xAxis</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-string">"category"</span>,
      <span class="hljs-attr">boundaryGap</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">data</span>: items,
    },
    <span class="hljs-attr">yAxis</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-string">"value"</span>,
    },
    <span class="hljs-attr">series</span>: yItems,
  };

  myChart.<span class="hljs-title function_">clear</span>();
  option &amp;&amp; myChart.<span class="hljs-title function_">setOption</span>(option);
};
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ­£åˆ™æ ¡éªŒï¼šæ ¡éªŒåªèƒ½è¾“å…¥æ•°å­—ä¸”é¦–ä½ä¸èƒ½æ˜¯0]]></title>    <link>https://juejin.cn/post/7571409339363508251</link>    <guid>https://juejin.cn/post/7571409339363508251</guid>    <pubDate>2025-11-12T06:24:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571409339363508251" data-draft-id="7571395183944581129" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ­£åˆ™æ ¡éªŒï¼šæ ¡éªŒåªèƒ½è¾“å…¥æ•°å­—ä¸”é¦–ä½ä¸èƒ½æ˜¯0"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-12T06:24:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="hollyhuang"/> <meta itemprop="url" content="https://juejin.cn/user/465848662762445"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ­£åˆ™æ ¡éªŒï¼šæ ¡éªŒåªèƒ½è¾“å…¥æ•°å­—ä¸”é¦–ä½ä¸èƒ½æ˜¯0
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/465848662762445/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    hollyhuang
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T06:24:16.000Z" title="Wed Nov 12 2025 06:24:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><pre><code class="hljs language-ini" lang="ini">try {
        // ç§»é™¤æ‰€æœ‰éæ•°å­—å­—ç¬¦
        let <span class="hljs-attr">cleaned</span> = this.number.toString().replace(/\D/g, <span class="hljs-string">''</span>)<span class="hljs-comment">;</span>

        // å¤„ç†å‰å¯¼é›¶ï¼šå¦‚æœé•¿åº¦å¤§äº1ï¼Œåˆ™å»é™¤å¼€å¤´çš„é›¶
        if (cleaned.length &gt; 1) {
          <span class="hljs-attr">cleaned</span> = cleaned.replace(/^<span class="hljs-number">0</span>+/, <span class="hljs-string">''</span>) || <span class="hljs-string">'0'</span><span class="hljs-comment">;</span>
        }

        <span class="hljs-attr">this.number</span> = cleaned<span class="hljs-comment">;</span>
      } catch (e) {
        <span class="hljs-attr">this.number</span> = <span class="hljs-string">''</span><span class="hljs-comment">;</span>
      }
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Rust : æ–°ç‰ˆæœ¬ 1.90.0]]></title>    <link>https://juejin.cn/post/7571391088948559910</link>    <guid>https://juejin.cn/post/7571391088948559910</guid>    <pubDate>2025-11-12T06:28:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571391088948559910" data-draft-id="7571409339363557403" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Rust : æ–°ç‰ˆæœ¬ 1.90.0"/> <meta itemprop="keywords" content="Rust"/> <meta itemprop="datePublished" content="2025-11-12T06:28:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Pomelo_åˆ˜é‡‘"/> <meta itemprop="url" content="https://juejin.cn/user/3450694359320669"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Rust : æ–°ç‰ˆæœ¬ 1.90.0
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3450694359320669/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Pomelo_åˆ˜é‡‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T06:28:58.000Z" title="Wed Nov 12 2025 06:28:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.rust-lang.org%2F2025%2F09%2F18%2FRust-1.90.0%2F" target="_blank" title="https://blog.rust-lang.org/2025/09/18/Rust-1.90.0/" ref="nofollow noopener noreferrer">åŸæ–‡</a></p>
<p>Rust å›¢é˜Ÿå¾ˆé«˜å…´åœ°å®£å¸ƒæ¨å‡º Rust æ–°ç‰ˆæœ¬ 1.90.0ã€‚Rust æ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒä½¿æ¯ä¸ªäººéƒ½èƒ½æ„å»ºå¯é é«˜æ•ˆçš„è½¯ä»¶ã€‚</p>
<p>å¦‚æœæ‚¨ä¹‹å‰é€šè¿‡ apt å®‰è£…äº† Rust çš„æ—§ç‰ˆæœ¬<code>rustup</code>ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è·å– 1.90.0 ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-variable">$ </span>rustup update stable
</code></pre>
<p>å¦‚æœæ‚¨è¿˜æ²¡æœ‰ï¼Œæ‚¨å¯ä»¥ä»æˆ‘ä»¬ç½‘ç«™ä¸Šçš„ç›¸åº”é¡µé¢<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.rust-lang.org%2Finstall.html" target="_blank" title="https://www.rust-lang.org/install.html" ref="nofollow noopener noreferrer">è·å–<code>rustup</code></a>ï¼Œå¹¶æŸ¥çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Freleases.html%23version-1900-2025-09-18" target="_blank" title="https://doc.rust-lang.org/stable/releases.html#version-1900-2025-09-18" ref="nofollow noopener noreferrer">1.90.0 çš„è¯¦ç»†å‘è¡Œè¯´æ˜</a>ã€‚</p>
<p>å¦‚æœæ‚¨æƒ³å¸®åŠ©æˆ‘ä»¬æµ‹è¯•æœªæ¥çš„ç‰ˆæœ¬ï¼Œå¯ä»¥è€ƒè™‘åœ¨æœ¬åœ°æ›´æ–°åˆ° beta ç‰ˆï¼ˆ<code>rustup default beta</code>ï¼‰æˆ– nightly ç‰ˆï¼ˆ<code>rustup default nightly</code>ï¼‰ã€‚è¯·<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frust-lang%2Frust%2Fissues%2Fnew%2Fchoose" target="_blank" title="https://github.com/rust-lang/rust/issues/new/choose" ref="nofollow noopener noreferrer">æŠ¥å‘Š</a>æ‚¨é‡åˆ°çš„ä»»ä½•é”™è¯¯ï¼</p>
<h3 data-id="heading-0"><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.rust-lang.org%2F2025%2F09%2F18%2FRust-1.90.0%2F%23what-s-in-1-90-0-stable" target="_blank" title="https://blog.rust-lang.org/2025/09/18/Rust-1.90.0/#what-s-in-1-90-0-stable" ref="nofollow noopener noreferrer"/>1.90.0 ç¨³å®šç‰ˆåŒ…å«å“ªäº›å†…å®¹ï¼Ÿ</h3>
<h2 data-id="heading-1"><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.rust-lang.org%2F2025%2F09%2F18%2FRust-1.90.0%2F%23lld-is-now-the-default-linker-on-x86-64-unknown-linux-gnu" target="_blank" title="https://blog.rust-lang.org/2025/09/18/Rust-1.90.0/#lld-is-now-the-default-linker-on-x86-64-unknown-linux-gnu" ref="nofollow noopener noreferrer"/>LLDç°åœ¨æ˜¯é»˜è®¤é“¾æ¥å™¨<code>x86_64-unknown-linux-gnu</code></h2>
<p>ç›®æ ‡å¹³å°<code>x86_64-unknown-linux-gnu</code>ç°åœ¨é»˜è®¤ä½¿ç”¨ LLD é“¾æ¥å™¨æ¥é“¾æ¥ Rust crateã€‚ä¸é»˜è®¤çš„ Linux é“¾æ¥å™¨ (BFD) ç›¸æ¯”ï¼Œè¿™åº”è¯¥ä¼šæå‡é“¾æ¥æ€§èƒ½ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§å‹äºŒè¿›åˆ¶æ–‡ä»¶ã€åŒ…å«å¤§é‡è°ƒè¯•ä¿¡æ¯çš„äºŒè¿›åˆ¶æ–‡ä»¶ä»¥åŠå¢é‡é‡å»ºæ—¶ã€‚</p>
<p>åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒLLD åº”è¯¥å‘åå…¼å®¹ BFDï¼Œé™¤äº†ç¼–è¯‘æ—¶é—´ç¼©çŸ­ä¹‹å¤–ï¼Œæ‚¨åº”è¯¥ä¸ä¼šæ„Ÿè§‰åˆ°ä»»ä½•å…¶ä»–åŒºåˆ«ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨ç¡®å®é‡åˆ°äº†ä»»ä½•æ–°çš„é“¾æ¥å™¨é—®é¢˜ï¼Œæ‚¨å¯ä»¥éšæ—¶ä½¿ç”¨<code>-C linker-features=-lld</code>ç¼–è¯‘å™¨æ ‡å¿—æ¥é€‰æ‹©ç¦ç”¨ LLDã€‚æ‚¨å¯ä»¥å°†å…¶æ·»åŠ åˆ°å¸¸è§„<code>RUSTFLAGS</code>ç¯å¢ƒå˜é‡ä¸­ï¼Œæˆ–è€…æ·»åŠ åˆ°é¡¹ç›®çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fcargo%2Freference%2Fconfig.html" target="_blank" title="https://doc.rust-lang.org/cargo/reference/config.html" ref="nofollow noopener noreferrer"><code>.cargo/config.toml</code></a>é…ç½®æ–‡ä»¶ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[target.x86_64-unknown-linux-gnu]</span>
<span class="hljs-attr">rustflags</span> = [<span class="hljs-string">"-Clinker-features=-lld"</span>]
</code></pre>
<p>å¦‚æœæ‚¨åœ¨ä½¿ç”¨ LLD é“¾æ¥å™¨æ—¶é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frust-lang%2Frust%2Fissues%2Fnew%2Fchoose" target="_blank" title="https://github.com/rust-lang/rust/issues/new/choose" ref="nofollow noopener noreferrer">å‘ŠçŸ¥æˆ‘ä»¬ã€‚æ‚¨å¯ä»¥ç‚¹å‡»</a><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.rust-lang.org%2F2025%2F09%2F01%2Frust-lld-on-1.90.0-stable%2F" target="_blank" title="https://blog.rust-lang.org/2025/09/01/rust-lld-on-1.90.0-stable/" ref="nofollow noopener noreferrer">æ­¤å¤„</a>é˜…è¯»æ›´å¤šå…³äºåˆ‡æ¢åˆ° LLDã€ä¸€äº›åŸºå‡†æµ‹è¯•æ•°æ®ä»¥åŠé€€å‡ºæœºåˆ¶çš„ä¿¡æ¯ã€‚</p>
<h4 data-id="heading-2"><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.rust-lang.org%2F2025%2F09%2F18%2FRust-1.90.0%2F%23cargo-adds-native-support-for-workspace-publishing" target="_blank" title="https://blog.rust-lang.org/2025/09/18/Rust-1.90.0/#cargo-adds-native-support-for-workspace-publishing" ref="nofollow noopener noreferrer"/>Cargo ä¸ºå·¥ä½œåŒºå‘å¸ƒæ·»åŠ äº†åŸç”Ÿæ”¯æŒ</h4>
<p><code>cargo publish --workspace</code>ç°åœ¨æ”¯æŒè‡ªåŠ¨æŒ‰æ­£ç¡®çš„é¡ºåºå‘å¸ƒå·¥ä½œåŒºä¸­çš„æ‰€æœ‰ crateï¼ˆéµå¾ªå®ƒä»¬ä¹‹é—´çš„ä»»ä½•ä¾èµ–å…³ç³»ï¼‰ã€‚</p>
<p>é•¿æœŸä»¥æ¥ï¼Œé€šè¿‡å¤–éƒ¨å·¥å…·æˆ–æ‰‹åŠ¨è®¢è´­å•ä¸ªå‘å¸ƒå†…å®¹éƒ½å¯ä»¥å®ç°è¿™ä¸€ç‚¹ï¼Œä½†æ­¤ä¸¾å°†æ­¤åŠŸèƒ½å¼•å…¥äº† Cargo æœ¬èº«ã€‚</p>
<p>åŸç”Ÿé›†æˆå…è®¸ Cargo çš„å‘å¸ƒéªŒè¯åŠŸèƒ½å¯¹æ‰€æœ‰å¾…å‘å¸ƒçš„ crate è¿è¡Œæ„å»ºï¼Œ<em>å¦‚åŒ</em>å®ƒä»¬å·²ç»å‘å¸ƒä¸€æ ·ï¼ŒåŒ…æ‹¬åœ¨è¯•è¿è¡ŒæœŸé—´ã€‚è¯·æ³¨æ„ï¼Œå‘å¸ƒæ“ä½œä»ç„¶ä¸æ˜¯åŸå­æ€§çš„â€”â€”ç½‘ç»œé”™è¯¯æˆ–æœåŠ¡å™¨ç«¯æ•…éšœä»ç„¶å¯èƒ½å¯¼è‡´å·¥ä½œåŒºéƒ¨åˆ†å‘å¸ƒã€‚</p>
<h4 data-id="heading-3"><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.rust-lang.org%2F2025%2F09%2F18%2FRust-1.90.0%2F%23demoting-x86-64-apple-darwin-to-tier-2-with-host-tools" target="_blank" title="https://blog.rust-lang.org/2025/09/18/Rust-1.90.0/#demoting-x86-64-apple-darwin-to-tier-2-with-host-tools" ref="nofollow noopener noreferrer"/>ä½¿ç”¨ä¸»æœºå·¥å…·é™çº§<code>x86_64-apple-darwin</code>åˆ°äºŒçº§</h4>
<p>GitHub å³å°†<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.blog%2Fchangelog%2F2025-07-11-upcoming-changes-to-macos-hosted-runners-macos-latest-migration-and-xcode-support-policy-updates%2F%23macos-13-is-closing-down" target="_blank" title="https://github.blog/changelog/2025-07-11-upcoming-changes-to-macos-hosted-runners-macos-latest-migration-and-xcode-support-policy-updates/#macos-13-is-closing-down" ref="nofollow noopener noreferrer">åœæ­¢</a>ä¸ºå…¬å…±ä»£ç åº“æä¾›å…è´¹çš„ macOS x86_64 è¿è¡Œå™¨ã€‚è‹¹æœå…¬å¸ä¹Ÿå·²å®£å¸ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FMac_transition_to_Apple_silicon%23Timeline" target="_blank" title="https://en.wikipedia.org/wiki/Mac_transition_to_Apple_silicon#Timeline" ref="nofollow noopener noreferrer">è®¡åˆ’</a>åœæ­¢å¯¹ x86_64 æ¶æ„çš„æ”¯æŒã€‚</p>
<p>æ ¹æ®è¿™äº›å˜æ›´ï¼Œä» Rust 1.90 ç‰ˆæœ¬å¼€å§‹ï¼Œæˆ‘ä»¬å°†<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frust-lang%2Frfcs%2Fpull%2F3841" target="_blank" title="https://github.com/rust-lang/rfcs/pull/3841" ref="nofollow noopener noreferrer">ç›®æ ‡å¹³å°</a>ä»<a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Frustc%2Fplatform-support.html%23tier-1-with-host-tools" target="_blank" title="https://doc.rust-lang.org/stable/rustc/platform-support.html#tier-1-with-host-tools" ref="nofollow noopener noreferrer">åŒ…å«å®¿ä¸»å·¥å…·çš„ Tier 1</a><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frust-lang%2Frfcs%2Fpull%2F3841" target="_blank" title="https://github.com/rust-lang/rfcs/pull/3841" ref="nofollow noopener noreferrer">é™çº§<code>x86_64-apple-darwin</code></a>ä¸º<a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Frustc%2Fplatform-support.html%23tier-2-with-host-tools" target="_blank" title="https://doc.rust-lang.org/stable/rustc/platform-support.html#tier-2-with-host-tools" ref="nofollow noopener noreferrer">åŒ…å«å®¿ä¸»å·¥å…·çš„ Tier 2ã€‚</a>è¿™æ„å‘³ç€åŒ…å«è¯¸å¦‚ <code>tvm</code>å’Œ<code>tvm</code> ç­‰å·¥å…·çš„ç›®æ ‡å¹³å°å¯ä»¥ä¿è¯æ„å»ºæˆåŠŸï¼Œä½†ä¸èƒ½ä¿è¯é€šè¿‡æˆ‘ä»¬çš„è‡ªåŠ¨åŒ–æµ‹è¯•å¥—ä»¶ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Frustc%2Fplatform-support.html%23tier-1-with-host-tools" target="_blank" title="https://doc.rust-lang.org/stable/rustc/platform-support.html#tier-1-with-host-tools" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Frustc%2Fplatform-support.html%23tier-2-with-host-tools" target="_blank" title="https://doc.rust-lang.org/stable/rustc/platform-support.html#tier-2-with-host-tools" ref="nofollow noopener noreferrer"/><code>rustc``cargo</code></p>
<p>å¯¹äºç”¨æˆ·è€Œè¨€ï¼Œæ­¤å˜æ›´ä¸ä¼šç«‹å³äº§ç”Ÿå½±å“ã€‚<code>rustup</code>åœ¨ç›®æ ‡å¹³å°ä»å¤„äº Tier 2 çº§åˆ«æœŸé—´ï¼ŒRust é¡¹ç›®ä»å°†åˆ†å‘æ ‡å‡†åº“å’Œç¼–è¯‘å™¨çš„æ„å»ºç‰ˆæœ¬ï¼Œä¾›ç”¨æˆ·é€šè¿‡å…¶ä»–å®‰è£…æ–¹å¼ä½¿ç”¨ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œè¯¥ç›®æ ‡å¹³å°çš„æµ‹è¯•è¦†ç›–ç‡é™ä½å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜æˆ–å…¼å®¹æ€§ä¸‹é™ï¼Œå±Šæ—¶å°†ä¸ä¼šå¦è¡Œé€šçŸ¥ã€‚</p>
<h4 data-id="heading-4"><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.rust-lang.org%2F2025%2F09%2F18%2FRust-1.90.0%2F%23stabilized-apis" target="_blank" title="https://blog.rust-lang.org/2025/09/18/Rust-1.90.0/#stabilized-apis" ref="nofollow noopener noreferrer"/>ç¨³å®šçš„API</h4>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fprimitive.usize.html%23method.checked_sub_signed" target="_blank" title="https://doc.rust-lang.org/stable/std/primitive.usize.html#method.checked_sub_signed" ref="nofollow noopener noreferrer"><code>u{n}::checked_sub_signed</code></a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fprimitive.usize.html%23method.overflowing_sub_signed" target="_blank" title="https://doc.rust-lang.org/stable/std/primitive.usize.html#method.overflowing_sub_signed" ref="nofollow noopener noreferrer"><code>u{n}::overflowing_sub_signed</code></a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fprimitive.usize.html%23method.saturating_sub_signed" target="_blank" title="https://doc.rust-lang.org/stable/std/primitive.usize.html#method.saturating_sub_signed" ref="nofollow noopener noreferrer"><code>u{n}::saturating_sub_signed</code></a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fprimitive.usize.html%23method.wrapping_sub_signed" target="_blank" title="https://doc.rust-lang.org/stable/std/primitive.usize.html#method.wrapping_sub_signed" ref="nofollow noopener noreferrer"><code>u{n}::wrapping_sub_signed</code></a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fnum%2Fenum.IntErrorKind.html%23impl-Copy-for-IntErrorKind" target="_blank" title="https://doc.rust-lang.org/stable/std/num/enum.IntErrorKind.html#impl-Copy-for-IntErrorKind" ref="nofollow noopener noreferrer"><code>impl Copy for IntErrorKind</code></a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fnum%2Fenum.IntErrorKind.html%23impl-Hash-for-IntErrorKind" target="_blank" title="https://doc.rust-lang.org/stable/std/num/enum.IntErrorKind.html#impl-Hash-for-IntErrorKind" ref="nofollow noopener noreferrer"><code>impl Hash for IntErrorKind</code></a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fffi%2Fstruct.CStr.html%23impl-PartialEq%253C%2526CStr%253E-for-CStr" target="_blank" title="https://doc.rust-lang.org/stable/std/ffi/struct.CStr.html#impl-PartialEq%3C%26CStr%3E-for-CStr" ref="nofollow noopener noreferrer"><code>impl PartialEq&lt;&amp;CStr&gt; for CStr</code></a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fffi%2Fstruct.CStr.html%23impl-PartialEq%253CCString%253E-for-CStr" target="_blank" title="https://doc.rust-lang.org/stable/std/ffi/struct.CStr.html#impl-PartialEq%3CCString%3E-for-CStr" ref="nofollow noopener noreferrer"><code>impl PartialEq&lt;CString&gt; for CStr</code></a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fffi%2Fstruct.CStr.html%23impl-PartialEq%253CCow%253C'_%2C%2BCStr%253E%253E-for-CStr" target="_blank" title="https://doc.rust-lang.org/stable/std/ffi/struct.CStr.html#impl-PartialEq%3CCow%3C'_,+CStr%3E%3E-for-CStr" ref="nofollow noopener noreferrer"><code>impl PartialEq&lt;Cow&lt;CStr&gt;&gt; for CStr</code></a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fffi%2Fstruct.CString.html%23impl-PartialEq%253C%2526CStr%253E-for-CString" target="_blank" title="https://doc.rust-lang.org/stable/std/ffi/struct.CString.html#impl-PartialEq%3C%26CStr%3E-for-CString" ref="nofollow noopener noreferrer"><code>impl PartialEq&lt;&amp;CStr&gt; for CString</code></a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fffi%2Fstruct.CString.html%23impl-PartialEq%253CCStr%253E-for-CString" target="_blank" title="https://doc.rust-lang.org/stable/std/ffi/struct.CString.html#impl-PartialEq%3CCStr%3E-for-CString" ref="nofollow noopener noreferrer"><code>impl PartialEq&lt;CStr&gt; for CString</code></a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fffi%2Fstruct.CString.html%23impl-PartialEq%253CCow%253C'_%2C%2BCStr%253E%253E-for-CString" target="_blank" title="https://doc.rust-lang.org/stable/std/ffi/struct.CString.html#impl-PartialEq%3CCow%3C'_,+CStr%3E%3E-for-CString" ref="nofollow noopener noreferrer"><code>impl PartialEq&lt;Cow&lt;CStr&gt;&gt; for CString</code></a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fborrow%2Fenum.Cow.html%23impl-PartialEq%253C%2526CStr%253E-for-Cow%253C'_%2C%2BCStr%253E" target="_blank" title="https://doc.rust-lang.org/stable/std/borrow/enum.Cow.html#impl-PartialEq%3C%26CStr%3E-for-Cow%3C'_,+CStr%3E" ref="nofollow noopener noreferrer"><code>impl PartialEq&lt;&amp;CStr&gt; for Cow&lt;CStr&gt;</code></a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fborrow%2Fenum.Cow.html%23impl-PartialEq%253CCStr%253E-for-Cow%253C'_%2C%2BCStr%253E" target="_blank" title="https://doc.rust-lang.org/stable/std/borrow/enum.Cow.html#impl-PartialEq%3CCStr%3E-for-Cow%3C'_,+CStr%3E" ref="nofollow noopener noreferrer"><code>impl PartialEq&lt;CStr&gt; for Cow&lt;CStr&gt;</code></a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fborrow%2Fenum.Cow.html%23impl-PartialEq%253CCString%253E-for-Cow%253C'_%2C%2BCStr%253E" target="_blank" title="https://doc.rust-lang.org/stable/std/borrow/enum.Cow.html#impl-PartialEq%3CCString%3E-for-Cow%3C'_,+CStr%3E" ref="nofollow noopener noreferrer"><code>impl PartialEq&lt;CString&gt; for Cow&lt;CStr&gt;</code></a></li>
</ul>
<p>è¿™äº›å…ˆå‰ç¨³å®šçš„ API ç°åœ¨åœ¨ const ä¸Šä¸‹æ–‡ä¸­ä¹Ÿä¿æŒç¨³å®šï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fprimitive.slice.html%23method.reverse" target="_blank" title="https://doc.rust-lang.org/stable/std/primitive.slice.html#method.reverse" ref="nofollow noopener noreferrer"><code>&lt;[T]&gt;::reverse</code></a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fprimitive.f32.html%23method.floor" target="_blank" title="https://doc.rust-lang.org/stable/std/primitive.f32.html#method.floor" ref="nofollow noopener noreferrer"><code>f32::floor</code></a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fprimitive.f32.html%23method.ceil" target="_blank" title="https://doc.rust-lang.org/stable/std/primitive.f32.html#method.ceil" ref="nofollow noopener noreferrer"><code>f32::ceil</code></a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fprimitive.f32.html%23method.trunc" target="_blank" title="https://doc.rust-lang.org/stable/std/primitive.f32.html#method.trunc" ref="nofollow noopener noreferrer"><code>f32::trunc</code></a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fprimitive.f32.html%23method.fract" target="_blank" title="https://doc.rust-lang.org/stable/std/primitive.f32.html#method.fract" ref="nofollow noopener noreferrer"><code>f32::fract</code></a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fprimitive.f32.html%23method.round" target="_blank" title="https://doc.rust-lang.org/stable/std/primitive.f32.html#method.round" ref="nofollow noopener noreferrer"><code>f32::round</code></a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fprimitive.f32.html%23method.round_ties_even" target="_blank" title="https://doc.rust-lang.org/stable/std/primitive.f32.html#method.round_ties_even" ref="nofollow noopener noreferrer"><code>f32::round_ties_even</code></a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fprimitive.f64.html%23method.floor" target="_blank" title="https://doc.rust-lang.org/stable/std/primitive.f64.html#method.floor" ref="nofollow noopener noreferrer"><code>f64::floor</code></a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fprimitive.f64.html%23method.ceil" target="_blank" title="https://doc.rust-lang.org/stable/std/primitive.f64.html#method.ceil" ref="nofollow noopener noreferrer"><code>f64::ceil</code></a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fprimitive.f64.html%23method.trunc" target="_blank" title="https://doc.rust-lang.org/stable/std/primitive.f64.html#method.trunc" ref="nofollow noopener noreferrer"><code>f64::trunc</code></a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fprimitive.f64.html%23method.fract" target="_blank" title="https://doc.rust-lang.org/stable/std/primitive.f64.html#method.fract" ref="nofollow noopener noreferrer"><code>f64::fract</code></a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fprimitive.f64.html%23method.round" target="_blank" title="https://doc.rust-lang.org/stable/std/primitive.f64.html#method.round" ref="nofollow noopener noreferrer"><code>f64::round</code></a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstable%2Fstd%2Fprimitive.f64.html%23method.round_ties_even" target="_blank" title="https://doc.rust-lang.org/stable/std/primitive.f64.html#method.round_ties_even" ref="nofollow noopener noreferrer"><code>f64::round_ties_even</code></a></li>
</ul>
<h4 data-id="heading-5"><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.rust-lang.org%2F2025%2F09%2F18%2FRust-1.90.0%2F%23platform-support" target="_blank" title="https://blog.rust-lang.org/2025/09/18/Rust-1.90.0/#platform-support" ref="nofollow noopener noreferrer"/>å¹³å°æ”¯æŒ</h4>
<ul>
<li><code>x86_64-apple-darwin</code>ç°åœ¨æ˜¯ä¸€ä¸ªäºŒçº§ç›®æ ‡</li>
</ul>
<p>æœ‰å…³ Rust åˆ†çº§å¹³å°æ”¯æŒçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… Rust çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Frustc%2Fplatform-support.html" target="_blank" title="https://doc.rust-lang.org/rustc/platform-support.html" ref="nofollow noopener noreferrer">å¹³å°æ”¯æŒé¡µé¢ã€‚</a></p>
<h4 data-id="heading-6"><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.rust-lang.org%2F2025%2F09%2F18%2FRust-1.90.0%2F%23other-changes" target="_blank" title="https://blog.rust-lang.org/2025/09/18/Rust-1.90.0/#other-changes" ref="nofollow noopener noreferrer"/>å…¶ä»–å˜åŒ–</h4>
<p>æ¥çœ‹çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frust-lang%2Frust%2Freleases%2Ftag%2F1.90.0" target="_blank" title="https://github.com/rust-lang/rust/releases/tag/1.90.0" ref="nofollow noopener noreferrer">Rust</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fnightly%2Fcargo%2FCHANGELOG.html%23cargo-190-2025-09-18" target="_blank" title="https://doc.rust-lang.org/nightly/cargo/CHANGELOG.html#cargo-190-2025-09-18" ref="nofollow noopener noreferrer">Cargo</a>å’Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frust-lang%2Frust-clippy%2Fblob%2Fmaster%2FCHANGELOG.md%23rust-190" target="_blank" title="https://github.com/rust-lang/rust-clippy/blob/master/CHANGELOG.md#rust-190" ref="nofollow noopener noreferrer">Clippy</a>ä¸­å‘ç”Ÿäº†å“ªäº›å˜åŒ–ã€‚</p>
<h3 data-id="heading-7"><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.rust-lang.org%2F2025%2F09%2F18%2FRust-1.90.0%2F%23contributors-to-1-90-0" target="_blank" title="https://blog.rust-lang.org/2025/09/18/Rust-1.90.0/#contributors-to-1-90-0" ref="nofollow noopener noreferrer"/>1.90.0 ç‰ˆæœ¬çš„è´¡çŒ®è€…</h3>
<p>Rust 1.90.0 çš„å¼€å‘ç¦»ä¸å¼€è®¸å¤šäººçš„å…±åŒåŠªåŠ›ã€‚æ²¡æœ‰ä½ ä»¬ï¼Œæˆ‘ä»¬ä¸å¯èƒ½å®Œæˆè¿™é¡¹å·¥ä½œã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fthanks.rust-lang.org%2Frust%2F1.90.0%2F" target="_blank" title="https://thanks.rust-lang.org/rust/1.90.0/" ref="nofollow noopener noreferrer">è°¢è°¢ï¼</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2å¼ 4090æœ¬åœ°å¾®è°ƒä¸‡äº¿å‚æ•°æ¨¡å‹ï¼KTransformersä¸Šçº¿æ¨¡å‹å¾®è°ƒåŠŸèƒ½ï¼Œä½¿ç”¨æŒ‡å—æ¥äº†]]></title>    <link>https://juejin.cn/post/7571378103282024454</link>    <guid>https://juejin.cn/post/7571378103282024454</guid>    <pubDate>2025-11-12T03:32:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571378103282024454" data-draft-id="7571378103281958918" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2å¼ 4090æœ¬åœ°å¾®è°ƒä¸‡äº¿å‚æ•°æ¨¡å‹ï¼KTransformersä¸Šçº¿æ¨¡å‹å¾®è°ƒåŠŸèƒ½ï¼Œä½¿ç”¨æŒ‡å—æ¥äº†"/> <meta itemprop="keywords" content="Agent,LLM,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-12T03:32:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹æ•™ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1145012233707299"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2å¼ 4090æœ¬åœ°å¾®è°ƒä¸‡äº¿å‚æ•°æ¨¡å‹ï¼KTransformersä¸Šçº¿æ¨¡å‹å¾®è°ƒåŠŸèƒ½ï¼Œä½¿ç”¨æŒ‡å—æ¥äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1145012233707299/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹æ•™ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T03:32:34.000Z" title="Wed Nov 12 2025 03:32:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p>ä½ æ˜¯å¦æ›¾å› ç®—åŠ›é—¨æ§›è€Œå¯¹å¤§æ¨¡å‹æœ›è€Œå´æ­¥ï¼Ÿæƒ³è¦å°è¯•å¾®è°ƒåƒäº¿/ä¸‡äº¿å‚æ•°çš„æ¨¡å‹ï¼Ÿé‚£æ›´æ˜¯ä¸æ•¢æƒ³è±¡ã€‚ä»Šå¤©ï¼Œè¿™ä¸ªå›°å±€æ­£åœ¨è¢«æ‰“ç ´ã€‚</p>
<p>è¿‘æ—¥ï¼Œè¶‹å¢ƒç§‘æŠ€ä¸æ¸…åKVCache.AIå…±åŒå¼€æºçš„<strong>KTransformersä¸Šçº¿æ¨¡å‹å¾®è°ƒåŠŸèƒ½</strong>ã€‚å…¶ä¸LLaMA-Factoryåˆä½œï¼Œèƒ½å¤Ÿå®ç°åœ¨æœ¬åœ°å¯¹DeepSeek 671Bä¹ƒè‡³Kimi K2 1TBè¿™æ ·çš„è¶…å¤§æ¨¡å‹è¿›è¡ŒLoRAå¾®è°ƒã€‚æ˜¯ç›®å‰åœ¨<strong>æ¶ˆè´¹çº§æ˜¾å¡ä¸Šå®ç°å¾®è°ƒè¶…å¤§å‚æ•°MoEæ¨¡å‹çš„å”¯ä¸€å¯è¡Œæ–¹æ¡ˆ</strong>ã€‚</p>
<p>æ›´ä»¤äººæƒŠå–œçš„æ˜¯ï¼Œè¯¥æ–¹æ¡ˆä¸ä»…è§£å†³äº†"èƒ½ä¸èƒ½è·‘"çš„é—®é¢˜ï¼Œæ›´åœ¨"è·‘å¾—å¤šå¿«"ä¸Šè¡¨ç°å‡ºè‰²ã€‚åœ¨è¾ƒå°è§„æ¨¡æ¨¡å‹ä¸Šå®ç°äº†1.8å€çš„ååæå‡ï¼ŒåŒæ—¶å°†æ˜¾å­˜å ç”¨é™ä½82%ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2838433cc49d49e6a808f3e3ce80a716~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763523154&amp;x-signature=CzCNTI8hZPq%2B4H3ACiYru6emrj0%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p>GitHubåœ°å€ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fkvcache-ai%2Fktransformers" target="_blank" title="https://github.com/kvcache-ai/ktransformers" ref="nofollow noopener noreferrer">github.com/kvcache-ai/â€¦</a></p>
</li>
</ul>
<p><em><strong>01</strong></em> <strong>è¯¦ç»†ä»‹ç»</strong></p>
<p>KTransformersè‡ª2024å¹´å‘å¸ƒä»¥æ¥ï¼Œä½œä¸ºä¸“æ³¨äºå¤§æ¨¡å‹æ¨ç†ä¼˜åŒ–çš„å¼€æºæ¡†æ¶ï¼Œä¸€ç›´ä»¥å…¶ç‹¬ç‰¹çš„å¼‚æ„è®¡ç®—ç­–ç•¥é—»åã€‚é€šè¿‡KTransformersï¼Œå•å¼ 4090å³å¯éƒ¨ç½²åƒäº¿/ä¸‡äº¿çº§åˆ«çš„å¤§æ¨¡å‹ã€‚</p>
<p>è€ŒLLaMA-Factoryæ˜¯ç›®å‰éå¸¸æµè¡Œçš„å¼€æºå¤§æ¨¡å‹å¾®è°ƒæ¡†æ¶ï¼Œä»¥å…¶ä½ä»£ç ã€é«˜æ•ˆç‡çš„ç‰¹ç‚¹åœ¨å¼€å‘è€…ç¤¾åŒºå¹¿å—å¥½è¯„ã€‚</p>
<p>åœ¨è¿™æ¬¡åˆä½œä¸­ï¼ŒLLaMA-Factoryä¸KTransformerså„è‡ªæœ‰æ˜ç¡®åˆ†å·¥ï¼Œå…·ä½“è€Œè¨€ï¼š</p>
<ul>
<li>LLaMA-Factoryæ˜¯æ•´ä¸ªå¾®è°ƒæµç¨‹çš„ç»Ÿä¸€è°ƒåº¦ä¸é…ç½®æ¡†æ¶ï¼Œè´Ÿè´£æ•°æ®å¤„ç†ã€è®­ç»ƒè°ƒåº¦ã€LoRAæ’å…¥ä¸æ¨ç†æ¥å£ç®¡ç†ï¼›</li>
<li>KTransformersåˆ™ä½œä¸ºå…¶å¯æ’æ‹”çš„é«˜æ€§èƒ½åç«¯ï¼Œåœ¨ç›¸åŒçš„è®­ç»ƒé…ç½®ä¸‹æ¥ç®¡Attention / MoEç­‰æ ¸å¿ƒç®—å­ï¼Œå®ç°å¼‚æ„è®¾å¤‡ï¼ˆGPU+CPUï¼‰çš„é«˜æ•ˆååŒã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1c5b32219f04249a155145b1de8084e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763523154&amp;x-signature=7kPYIesTVjODc0XMKVqpe0ksL7I%3D" alt="" loading="lazy"/></p>
<p>è™½ç„¶LLaMA-Factoryæœ‰HuggingFaceé»˜è®¤åç«¯ã€Unslothåç«¯ä»¥åŠKTransformersåç«¯ï¼Œä½†ç»å›¢é˜Ÿå¯¹æ¯”æµ‹è¯•ï¼ŒKTransformersæ˜¯ç›®å‰å”¯ä¸€èƒ½åœ¨2ï½4å¼  24GB 4090å¡ä¸Šå¾®è°ƒ671Bè§„æ¨¡MoEæ¨¡å‹çš„æ–¹æ¡ˆï¼›åŒæ—¶åœ¨14Bè§„æ¨¡çš„MoEæ¨¡å‹ä¸Šï¼Œç›¸æ¯”å¦ä¸¤ç§æ–¹æ¡ˆä¹Ÿå…·æœ‰æ›´é«˜çš„ååé€Ÿç‡å’Œæ›´ä½çš„GPUæ˜¾å­˜å ç”¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dac1ce8b19484672a4ebb19e198592a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763523154&amp;x-signature=%2BtZcndKk7qSe4B9bA%2FRuGl8kkY0%3D" alt="" loading="lazy"/></p>
<p><em><strong>02</strong></em> <strong>å®æµ‹æ•ˆæœ</strong></p>
<p><strong>1ã€é£æ ¼åŒ–å¯¹è¯æµ‹è¯•ï¼ˆCatGirlé£æ ¼è¯­æ°”ï¼‰</strong></p>
<p>å›¢é˜Ÿé¦–å…ˆåœ¨NekoQA-10Kæ•°æ®é›†ä¸Šè¿›è¡Œäº†é£æ ¼åŒ–å¯¹è¯æµ‹è¯•ï¼Œè¿™æ˜¯ä¸€ä¸ªé¢å‘çŒ«å¨˜è¯­è¨€å»ºæ¨¡çš„å¯¹è¯æ•°æ®é›†ã€‚</p>
<p>å¯¹æ¯”åŸå§‹æ¨¡å‹å’Œå¾®è°ƒæ¨¡å‹ï¼Œå¯ä»¥çœ‹åˆ°å¾®è°ƒåçš„æ¨¡å‹å·²ç»ä¸åœ¨æ˜¯å†·å†°å†°çš„æ ‡å‡†åŒ–å›ç­”ï¼Œè€Œæ˜¯åœ¨è¯­æ°”å’Œç§°è°“ä¸Šç¨³å®šåœ°ä¿æŒäº†çŒ«å¨˜é£æ ¼ï¼ˆçº¢æ¡†éƒ¨åˆ†ï¼‰ï¼ŒéªŒè¯äº†é£æ ¼è¿ç§»å¾®è°ƒçš„æœ‰æ•ˆæ€§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8593179f5854c67a6954de428504693~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763523154&amp;x-signature=Ctg5pn9g50WoSDUTxmiWcOoaaf8%3D" alt="" loading="lazy"/></p>
<p><strong>2ã€ç”Ÿæˆå¼ç¿»è¯‘é£æ ¼åŸºå‡†æµ‹è¯•</strong></p>
<p>å›¢é˜Ÿè¿˜è¿›è¡Œäº†ç¿»è¯‘é£æ ¼æµ‹è¯•ï¼Œé‡‡ç”¨è¥¿å¼ç¿»è¯‘è…”æ•°æ®é›†ï¼Œè¦æ±‚æ¨¡å‹é‡‡ç”¨å¤¸å¼ çš„â€œè¥¿å¼ç¿»è¯‘è…”â€ï¼Œå±äºç”Ÿæˆå¼é£æ ¼æ§åˆ¶ä»»åŠ¡ï¼Œè¯„ä»·æŒ‡æ ‡ä¸ºBLEU-1/2/3/4ä¸ ROUGE-1/2/Lã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aabd4952e5d7488db250d0741d551715~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763523154&amp;x-signature=mYNK2tTUgvzQMApezuQpoGYRsvY%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ä¸¤ç§è§„æ¨¡çš„æ¨¡å‹åœ¨å¾®è°ƒåå‡å‡ºç°ä¸€è‡´æ€§å¢ç›Šï¼Œå±•ç°å‡ºâ€œKTåç«¯ + LoRAå¾®è°ƒâ€ç»„åˆåœ¨ç”Ÿæˆå¼é£æ ¼æ§åˆ¶ä¸Šçš„å¯ç”¨æ€§ä¸æœ‰æ•ˆæ€§ã€‚åŒæ—¶è¯´æ˜KTçš„å¼‚æ„æ”¾ç½®ä¸ç®—å­ä¼˜åŒ–èƒ½å¤Ÿç¨³å®šæ”¯æ’‘é£æ ¼åŸŸçš„å°æ ·æœ¬é€‚é…ã€‚</p>
<p><strong>3ã€åŒ»ç–—å‚ç›´é¢†åŸŸåŸºå‡†ï¼ˆAfriMed-SAQ/MCQï¼‰</strong></p>
<p>åœ¨åŒ»ç–—å‚ç›´é¢†åŸŸå¾®è°ƒä¹Ÿååˆ†æœ‰æ•ˆï¼Œæ•°æ®é›†é‡‡ç”¨éæ´²åœ°åŒºåŒ»ç–—é¢†åŸŸçš„ä¸“ç”¨æ•°æ®é›†AfriMed-QAï¼ˆACL-2025)ï¼Œå…·æœ‰å¾ˆå¼ºçš„åœºæ™¯å®šåˆ¶ç‰¹å¾ï¼ŒåŒ…å«å•é€‰é¢˜ï¼ˆMCQï¼‰å’Œç®€ç­”é¢˜ï¼ˆSAQï¼‰ä¸¤ç§å½¢å¼ã€‚è¯„ä¼°æ ‡å‡†ä¸Šï¼ŒSAQç”¨BLEU/ROUGEï¼›MCQç”¨Accuracyã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ba885523a4c405aa33e3b145be35cc3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763523154&amp;x-signature=CKzympZ2NC4e2lvcI%2B1f7jKHtn8%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a12ec03469c24f8cb4e4d65b0a3b0147~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763523154&amp;x-signature=ejbXNxbhLkXnSnoN6Q3qzcgAs8U%3D" alt="" loading="lazy"/></p>
<p><em><strong>03</strong></em> <strong>å¦‚ä½•ä½¿ç”¨</strong></p>
<p>ä¸‹é¢å°†ä¸ºå¤§å®¶è®²è§£å¦‚ä½•å®‰è£…ç¯å¢ƒå¹¶é€šè¿‡LLaMA-Factory + KTransformersçš„æ–¹å¼å®Œæˆå¾®è°ƒå’Œæ¨ç†ã€‚</p>
<p>ä¸ºç®€åŒ–KTransformerså®‰è£…è¿‡ç¨‹ï¼Œå›¢é˜Ÿç‰¹æ„æ‰“åŒ…äº†ä¸€ä¸ªwheelæ–‡ä»¶ï¼Œé¿å…æœ¬åœ°ç¼–è¯‘ã€‚ï¼ˆæ³¨æ„ï¼šåº”ç¡®ä¿æœ¬åœ°Pythonç‰ˆæœ¬ã€Torchç‰ˆæœ¬ã€CUDAç‰ˆæœ¬å’ŒKTransformers wheel æ–‡ä»¶åæ­£ç¡®å¯¹åº”ã€‚ï¼‰</p>
<p><strong>1ã€ç¯å¢ƒå®‰è£…</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å®‰è£…condaç¯å¢ƒ</span>
conda create -n Kllama python=3.10<span class="hljs-comment"># choose from : [3.10, 3.11, 3.12, 3.13]</span>
conda install -y -c conda-forge libstdcxx-ng gcc_impl_linux-64
conda install -y -c nvidia/label/cuda-11.8.0 cuda-runtime
<span class="hljs-comment"># 2. å®‰è£…llamafactoryç¯å¢ƒ</span>
git <span class="hljs-built_in">clone</span> --depth 1 https://github.com/hiyouga/LLaMA-Factory.git
<span class="hljs-built_in">cd</span> LLaMA-Factory
pip install -e <span class="hljs-string">".[torch,metrics]"</span> --no-build-isolation
<span class="hljs-comment"># 3. ä» https://github.com/kvcache-ai/ktransformers/releases/tag/v0.4.1 å®‰è£…ä¸ Torch å’Œ Python ç‰ˆæœ¬åŒ¹é…çš„ KTransformers è½¯ä»¶åŒ…ï¼ˆæ³¨æ„ï¼šCUDA ç‰ˆæœ¬å¯ä»¥ä¸ wheel æ–‡ä»¶å‘½åä¸ä¸€è‡´ã€‚ï¼‰</span>
pip install ktransformers-0.4.1+cu128torch28fancy-cp310-cp310-linux_x86_64.whl
<span class="hljs-comment"># 4. å®‰è£… flash-attentionï¼Œè¯·æ ¹æ® Python å’Œ Torch ç‰ˆæœ¬ä»ä»¥ä¸‹åœ°å€ä¸‹è½½å¯¹åº”æ–‡ä»¶ï¼šhttps://github.com/Dao-AILab/flash-attention/releases</span>
pip install flash_attn-2.8.3+cu12torch2.8cxx11abiTRUE-cp310-cp310-linux_x86_64.whl
<span class="hljs-comment"># abi=True/False å¯ä»¥ç”¨ä¸‹é¢ä»£ç æŸ¥çœ‹</span>
<span class="hljs-comment"># import torch</span>
<span class="hljs-comment"># print(torch._C._GLIBCXX_USE_CXX11_ABI)</span>
<span class="hljs-comment"># 5. ï¼ˆå¯é€‰ï¼‰å¦‚æœå¸Œæœ›ä½¿ç”¨ flash_inferï¼ˆè‹¥ä¸æŒ‡å®šåˆ™é»˜è®¤ä½¿ç”¨ tritonï¼‰</span>
git <span class="hljs-built_in">clone</span> https://github.com/kvcache-ai/custom_flashinfer.git
pip install custom_flashinfer/
</code></pre>
<p>ä½¿ç”¨æç¤ºï¼šåœ¨LLaMA-Factoryçš„YAMLé…ç½®æ–‡ä»¶ä¸­ï¼Œè®¾ç½®<em>use_kt: trueï¼Œ</em> å¹¶é€‰æ‹©ä¸€ä¸ª<em>kt_optimize_rule</em>YAMLæ–‡ä»¶ï¼Œå³å¯è®©KTransformerså¤„ç†æ ¸å¿ƒè®¡ç®—ã€‚ä¸‹é¢å°†é€šè¿‡å…·ä½“åŠŸèƒ½è¯´æ˜å¦‚ä½•è®¾ç½®ç›¸å…³é…ç½®ã€‚</p>
<p><strong>æ ¸å¿ƒåŠŸèƒ½ 1ï¼šä½¿ç”¨ KTransformers åç«¯å¾®è°ƒè¶…å¤§è§„æ¨¡MoEæ¨¡å‹</strong></p>
<p>è¿è¡Œå‘½ä»¤ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">USE_KT</span>=<span class="hljs-number">1</span> llamafactory-cli train examples/train_lora/deepseek3_lora_sft_kt.yaml
</code></pre>
<p>æ³¨æ„ï¼šå¿…é¡»æä¾›BF16æ ¼å¼çš„æ¨¡å‹ã€‚DeepSeek-V3-671Bé»˜è®¤ä»¥FP8æ ¼å¼å‘å¸ƒï¼›è¯·ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdeepseek-ai%2FDeepSeek-V3%2Fblob%2Fmain%2Finference%2Ffp8" target="_blank" title="https://github.com/deepseek-ai/DeepSeek-V3/blob/main/inference/fp8" ref="nofollow noopener noreferrer">github.com/deepseek-aiâ€¦</a>_cast_bf16.pyè„šæœ¬è¿›è¡Œæ ¼å¼è½¬æ¢ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment">### model</span>
<span class="hljs-attr">model_name_or_path:</span> <span class="hljs-string">opensourcerelease/DeepSeek-V3-bf16</span>
<span class="hljs-attr">trust_remote_code:</span> <span class="hljs-literal">true</span>
<span class="hljs-comment">### method</span>
<span class="hljs-attr">stage:</span> <span class="hljs-string">sft</span>
<span class="hljs-attr">do_train:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">finetuning_type:</span> <span class="hljs-string">lora</span>
<span class="hljs-attr">lora_rank:</span> <span class="hljs-number">8</span>
<span class="hljs-attr">lora_target:</span> <span class="hljs-string">all</span>
<span class="hljs-comment">### dataset</span>
<span class="hljs-attr">dataset:</span> <span class="hljs-string">identity</span>
<span class="hljs-attr">template:</span> <span class="hljs-string">deepseek</span>
<span class="hljs-attr">cutoff_len:</span> <span class="hljs-number">2048</span>
<span class="hljs-attr">max_samples:</span> <span class="hljs-number">100000</span>
<span class="hljs-attr">overwrite_cache:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">preprocessing_num_workers:</span> <span class="hljs-number">16</span>
<span class="hljs-attr">dataloader_num_workers:</span> <span class="hljs-number">4</span>
<span class="hljs-comment">### output</span>
<span class="hljs-attr">output_dir:</span> <span class="hljs-string">saves/Kllama_deepseekV3</span>
<span class="hljs-attr">logging_steps:</span> <span class="hljs-number">10</span>
<span class="hljs-attr">save_steps:</span> <span class="hljs-number">500</span>
<span class="hljs-attr">plot_loss:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">overwrite_output_dir:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">save_only_model:</span> <span class="hljs-literal">false</span>
<span class="hljs-attr">report_to:</span> <span class="hljs-string">none</span>  <span class="hljs-comment"># choices: [none, wandb, tensorboard, swanlab, mlflow]</span>
<span class="hljs-comment">### train</span>
<span class="hljs-attr">per_device_train_batch_size:</span> <span class="hljs-number">1</span>
<span class="hljs-attr">gradient_accumulation_steps:</span> <span class="hljs-number">8</span>
<span class="hljs-attr">learning_rate:</span> <span class="hljs-number">1.0e-4</span>
<span class="hljs-attr">num_train_epochs:</span> <span class="hljs-number">3.0</span>
<span class="hljs-attr">lr_scheduler_type:</span> <span class="hljs-string">cosine</span>
<span class="hljs-attr">warmup_ratio:</span> <span class="hljs-number">0.1</span>
<span class="hljs-attr">bf16:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">ddp_timeout:</span> <span class="hljs-number">180000000</span>
<span class="hljs-attr">resume_from_checkpoint:</span> <span class="hljs-literal">null</span>
<span class="hljs-comment">### ktransformers</span>
<span class="hljs-attr">use_kt:</span> <span class="hljs-literal">true</span><span class="hljs-comment"># use KTransformers as LoRA sft backend</span>
<span class="hljs-attr">kt_optimize_rule:</span> <span class="hljs-string">examples/kt_optimize_rules/DeepSeek-V3-Chat-sft-amx-multi-gpu.yaml</span>
<span class="hljs-attr">cpu_infer:</span> <span class="hljs-number">32</span>
<span class="hljs-attr">chunk_size:</span> <span class="hljs-number">8192</span>
</code></pre>
<p>å…¶ä¸­ï¼Œkt_optimize_ruleç”¨äºæ§åˆ¶è®¡ç®—èµ„æºçš„æ”¾ç½®ç­–ç•¥ã€‚ä¸‹ä¸ºé’ˆå¯¹YAMLæ–‡ä»¶åå’ŒåŠŸèƒ½å¯¹ç…§ç‰¹åˆ«è¯´æ˜ï¼Œä¹Ÿå¯å‚è€ƒ*<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fkvcache-ai%2Fktransformers%2Ftree%2Fmain%2Fktransformers%2Foptimize%2Foptimize" target="_blank" title="https://github.com/kvcache-ai/ktransformers/tree/main/ktransformers/optimize/optimize" ref="nofollow noopener noreferrer">github.com/kvcache-ai/â€¦</a>_rules<em>ç›®å½•ã€‚ï¼ˆ</em> è¡¨ç¤ºé€šé…ç¬¦ï¼‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d722490cc97f4e14bdcd17f095820d12~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763523154&amp;x-signature=s7NsDaSZ%2FVy1dEWm%2BYq0MLEjaaE%3D" alt="" loading="lazy"/></p>
<p>ä¾‹å¦‚ï¼š<em>DeepSeek-V3-Chat-sft-amx-multi-gpu.yaml</em>Â ä¸ºDeepSeek-V3-Chatæ¨¡å‹ä½¿ç”¨AMXæŒ‡ä»¤é›†å’ŒåŒGPUæ¨¡å‹å¹¶è¡ŒæŠ€æœ¯å¾®è°ƒã€‚</p>
<p>å»ºè®®ä½¿ç”¨AMXæŒ‡ä»¤é›†åŠ é€Ÿï¼ˆå¯é€šè¿‡ lscpu | grep amx å‘½ä»¤æ£€æµ‹CPUæ˜¯å¦æ”¯æŒAMXæŒ‡ä»¤é›†ï¼‰ã€‚AMXæ”¯æŒBF16/INT8ç²¾åº¦ã€‚ä¿®æ”¹æ–¹å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">- match:
<span class="hljs-symbol">name:</span> <span class="hljs-string">"^model\.layers\..*\.mlp\.experts$"</span>
<span class="hljs-symbol">replace:</span>
<span class="hljs-symbol">class:</span> ktransformers.operators.experts.KTransformersExperts Â  Â  # <span class="hljs-keyword">custom</span> MoE Kernel <span class="hljs-keyword">with</span> expert parallelism
<span class="hljs-symbol">kwargs:</span>
<span class="hljs-symbol">prefill_device:</span> <span class="hljs-string">"cpu"</span>
<span class="hljs-symbol">prefill_op:</span> <span class="hljs-string">"KExpertsTorch"</span>
<span class="hljs-symbol">generate_device:</span> <span class="hljs-string">"cpu"</span>
<span class="hljs-symbol">generate_op:</span> <span class="hljs-string">"KSFTExpertsCPU"</span>
<span class="hljs-symbol">out_device:</span> <span class="hljs-string">"cuda"</span>
<span class="hljs-symbol">backend:</span> <span class="hljs-string">"AMXInt8"</span># <span class="hljs-built_in">or</span> <span class="hljs-string">"AMXBF16"</span> <span class="hljs-built_in">or</span> <span class="hljs-string">"llamafile"</span> (<span class="hljs-keyword">default</span>)
</code></pre>
<p>è¾“å‡ºæ–‡ä»¶å°†ä¿å­˜åˆ°output_dirç›®å½•ä¸­ï¼Œé»˜è®¤ä¸ºsafetensorsæ ¼å¼å¹¶åŒ…å«é€‚é…å™¨å…ƒæ•°æ®ï¼Œä¾¿äºåç»­åŠ è½½ä½¿ç”¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2337a93bd9484f108b1a9713f130d032~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763523154&amp;x-signature=uDYnWyOKRsBVHPNw2rDvCG0Smig%3D" alt="" loading="lazy"/></p>
<p><strong>æ ¸å¿ƒåŠŸèƒ½äºŒï¼šä¸å¾®è°ƒåçš„æ¨¡å‹ï¼ˆåŸºç¡€æ¨¡å‹ + LoRA é€‚é…å™¨ï¼‰è¿›è¡Œå¯¹è¯</strong></p>
<p>è¿è¡Œå‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">llamafactory-cli chat examples/inference/deepseek3_lora_sft_kt.yaml
</code></pre>
<p>ä½¿ç”¨é€šè¿‡KTransformersè®­ç»ƒå¾—åˆ°çš„safetensorsæ ¼å¼é€‚é…å™¨è¿›è¡Œæ¨ç†ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">model_name_or_path:</span> <span class="hljs-string">opensourcerelease/DeepSeek-V3-bf16</span>
<span class="hljs-attr">adapter_name_or_path:</span> <span class="hljs-string">saves/Kllama_deepseekV3</span>
<span class="hljs-attr">template:</span> <span class="hljs-string">deepseek</span>
<span class="hljs-attr">infer_backend:</span> <span class="hljs-string">ktransformers</span>  <span class="hljs-comment"># choices: [huggingface, vllm, sglang, ktransformers]</span>
<span class="hljs-attr">trust_remote_code:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">use_kt:</span> <span class="hljs-literal">true</span><span class="hljs-comment"># use KTransformers as LoRA sft backend to inference</span>
<span class="hljs-attr">kt_optimize_rule:</span> <span class="hljs-string">examples/kt_optimize_rules/DeepSeek-V3-Chat-sft-amx-multi-gpu.yaml</span>
<span class="hljs-attr">cpu_infer:</span> <span class="hljs-number">32</span>
<span class="hljs-attr">chunk_size:</span> <span class="hljs-number">8192</span>
</code></pre>
<p>åŒæ—¶è¿˜æ”¯æŒGGUFæ ¼å¼çš„é€‚é…å™¨ï¼šå¯¹äºsafetensorsæ ¼å¼ï¼Œè®¾ç½®ç›®å½•è·¯å¾„ï¼›å¯¹äºGGUFæ ¼å¼ï¼Œéœ€è¦åœ¨adapter_name_or_pathä¸­è®¾ç½®å…·ä½“çš„GGUFæ ¼å¼æ–‡ä»¶ã€‚</p>
<p>åœ¨åŠ è½½è¿‡ç¨‹ä¸­ï¼ŒLLaMA-Factoryä¼šå°†å±‚åç§°æ˜ å°„åˆ°KTçš„å‘½åè§„èŒƒã€‚ä¼šçœ‹åˆ°ç±»ä¼¼ Loaded adapter weight: XXX -&gt; XXX çš„æ—¥å¿—è®°å½•ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b87deea20d74511b6bd8dd36b634be2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763523154&amp;x-signature=G7M3sLcsszaVARN7AVL1zgDuN9E%3D" alt="" loading="lazy"/></p>
<p><strong>æ ¸å¿ƒåŠŸèƒ½ä¸‰ï¼šæ‰¹é‡æ¨ç†ä¸æŒ‡æ ‡è¯„ä¼°ï¼ˆåŸºç¡€æ¨¡å‹ + LoRA é€‚é…å™¨ï¼‰</strong></p>
<p>è¿è¡Œå‘½ä»¤ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">API_PORT</span>=<span class="hljs-number">8000</span> llamafactory-cli api examples/inference/deepseek3_lora_sft_kt.yaml
</code></pre>
<p>è°ƒç”¨ç»KTransformerså¾®è°ƒçš„é€‚é…å™¨æ¥æä¾›APIï¼›å…¶ä»–APIçš„ä½¿ç”¨é€»è¾‘ä¸åŸç”ŸLLaMA-Factoryæ–¹å¼ä¸€è‡´ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">model_name_or_path:</span> <span class="hljs-string">opensourcerelease/DeepSeek-V3-bf16</span>
<span class="hljs-attr">adapter_name_or_path:</span> <span class="hljs-string">saves/Kllama_deepseekV3</span>
<span class="hljs-attr">template:</span> <span class="hljs-string">deepseek</span>
<span class="hljs-attr">infer_backend:</span> <span class="hljs-string">ktransformers</span>  <span class="hljs-comment"># choices: [huggingface, vllm, sglang, ktransformers]</span>
<span class="hljs-attr">trust_remote_code:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">use_kt:</span> <span class="hljs-literal">true</span><span class="hljs-comment"># use KTransformers as LoRA sft backend to inference</span>
<span class="hljs-attr">kt_optimize_rule:</span> <span class="hljs-string">examples/kt_optimize_rules/DeepSeek-V3-Chat-sft-amx-multi-gpu.yaml</span>
<span class="hljs-attr">cpu_infer:</span> <span class="hljs-number">32</span>
<span class="hljs-attr">chunk_size:</span> <span class="hljs-number">8192</span>
</code></pre>
<p><em><strong>04</strong></em> <strong>æ€»ç»“</strong></p>
<p>KTransformersä¸LLaMA-Factoryçš„è¿™æ¬¡è”æ‰‹ï¼Œè¿œä¸æ­¢æ˜¯ä¸€æ¬¡æŠ€æœ¯è¿­ä»£ï¼Œæ›´æ˜¯ä¸€æ¬¡æ·±åˆ»çš„è¡Œä¸šèŒƒå¼è½¬ç§»ã€‚è¿™æ„Ÿè§‰å°±åƒï¼Œä»¥å‰æˆ‘ä»¬åªèƒ½è¿œè¿œçœ‹ç€åšç‰©é¦†é‡Œçš„åç”»ï¼Œåæ¥ç»ˆäºèƒ½å‡‘è¿‘çœ‹äº†ï¼Œè€Œç°åœ¨ï¼Œä»–ä»¬ç›´æ¥æŠŠç”»ç¬”é€’åˆ°ä½ æ‰‹é‡Œï¼Œè¯´ï¼šâ€œæ¥ï¼Œç…§ç€ä½ çš„æƒ³æ³•æ”¹â€ã€‚ä¸‡äº¿æ¨¡å‹ï¼Œä»æ­¤ä¸å†æ˜¯å·¨å¤´ä»¬çš„ä¸“å±ç©å…·ï¼Œè€Œæ˜¯æ¯ä¸ªäººæ‰‹ä¸­çš„ç§¯æœ¨ã€‚æ¥ä¸‹æ¥ï¼Œå°±çœ‹æˆ‘ä»¬æ€ä¹ˆç”¨å®ƒæ­å‡ºä¸‹ä¸€ä¸ªæƒŠå–œäº†ã€‚</p>
<h2 data-id="heading-0">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¿«é€Ÿä¸Šæ‰‹Qwen Codeï¼šæœ¬åœ°éƒ¨ç½²ä¸ç¯å¢ƒé…ç½®å…¨æ”»ç•¥]]></title>    <link>https://juejin.cn/post/7571379089991843894</link>    <guid>https://juejin.cn/post/7571379089991843894</guid>    <pubDate>2025-11-12T03:38:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571379089991843894" data-draft-id="7571379089991778358" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¿«é€Ÿä¸Šæ‰‹Qwen Codeï¼šæœ¬åœ°éƒ¨ç½²ä¸ç¯å¢ƒé…ç½®å…¨æ”»ç•¥"/> <meta itemprop="keywords" content="LLM,Agent,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-12T03:38:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹æ•™ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1145012233707299"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¿«é€Ÿä¸Šæ‰‹Qwen Codeï¼šæœ¬åœ°éƒ¨ç½²ä¸ç¯å¢ƒé…ç½®å…¨æ”»ç•¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1145012233707299/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹æ•™ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T03:38:21.000Z" title="Wed Nov 12 2025 03:38:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p>Qwen3-Coder ä½œä¸ºå¼ºå¤§çš„ç¼–ç  Agentï¼Œå…¶æœ¬åœ°éƒ¨ç½²å’Œä½¿ç”¨éå¸¸ç®€å•ï¼Œæ­é…é€‚é…çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œèƒ½å¿«é€Ÿèå…¥æ—¥å¸¸å¼€å‘æµç¨‹ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†çš„å®‰è£…é…ç½®æ­¥éª¤ï¼Œä»¥åŠå¸¸ç”¨å‘½ä»¤ä¸æŠ€å·§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cfb73be7434c4a4cbf840c7d49f3a5d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763523501&amp;x-signature=HorG1vgapBUt%2BEucRmh40igWUlM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ã€æœ¬åœ°å®‰è£…ï¼š3 æ­¥å®Œæˆéƒ¨ç½²</h2>
<h3 data-id="heading-1">å‰ç½®æ¡ä»¶ï¼šå®‰è£… Node.js 20+</h3>
<p>Â  Â  Qwen Code å‘½ä»¤è¡Œå·¥å…·ä¾èµ– Node.js ç¯å¢ƒï¼Œéœ€å…ˆç¡®ä¿ç‰ˆæœ¬â‰¥20</p>
<h3 data-id="heading-2">æ–¹å¼ 1ï¼šé€šè¿‡ npm ä¸€é”®å®‰è£…ï¼ˆæ¨èï¼‰</h3>
<p>Â  Â  Â  Â  Qwen Code å·²å‘å¸ƒåˆ° npm ä»“åº“ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯å…¨å±€å®‰è£…ï¼š</p>
<pre><code class="hljs language-css" lang="css">npm <span class="hljs-selector-tag">i</span> -g <span class="hljs-keyword">@qwen-code</span>/qwen-code
</code></pre>
<h3 data-id="heading-3">æ–¹å¼ 2ï¼šæºç å®‰è£…ï¼ˆé€‚åˆå¼€å‘è€…ï¼‰</h3>
<p>Â  Â  è‹¥éœ€è¦è‡ªå®šä¹‰å·¥å…·åŠŸèƒ½ï¼Œå¯ä» GitHub å…‹éš†æºç å®‰è£…ï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">å…‹éš†ä»“åº“git <span class="hljs-built_in">clone</span> https://github.com/QwenLM/qwen-code.git<span class="hljs-comment"># è¿›å…¥ç›®å½•å¹¶å®‰è£…ä¾èµ–cd qwen-code &amp;&amp; npm install# å…¨å±€é“¾æ¥å·¥å…·ï¼ˆæ–¹ä¾¿ç»ˆç«¯ç›´æ¥è°ƒç”¨ï¼‰npm install -g .</span></span>
</code></pre>
<h2 data-id="heading-4">äºŒã€ç¯å¢ƒé…ç½®ï¼š</h2>
<p>Â  Â  Qwen Code é€šè¿‡ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶è¿æ¥ APIï¼Œéœ€é…ç½® 3 ä¸ªæ ¸å¿ƒå‚æ•°ï¼ˆä»Â é˜¿é‡Œäº‘ç™¾ç‚¼Â è·å– API å¯†é’¥ï¼‰</p>
<h3 data-id="heading-5">æ–¹å¼ 1ï¼šä¸´æ—¶ç¯å¢ƒå˜é‡ï¼ˆç»ˆç«¯ç›´æ¥è®¾ç½®ï¼‰</h3>
<p>Â  Â  æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆæ›¿æ¢ä¸ºä½ çš„å®é™…å¯†é’¥ï¼‰ï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">æ›¿æ¢ä¸ºä½ çš„é˜¿é‡Œäº‘DashScope APIå¯†é’¥<span class="hljs-built_in">export</span> OPENAI_API_KEY=<span class="hljs-string">"ä½ çš„_api_key_here"</span>  <span class="hljs-comment"># å›ºå®šAPIåœ°å€ï¼ˆå›½å†…ç”¨æˆ·ï¼‰# å›½é™…åœ°å€ï¼šhttps://dashscope-intl.aliyuncs.com/compatible-mode/v1export OPENAI_BASE_URL="https://dashscope.aliyuncs.com/compatible-mode/v1"  # æŒ‡å®šä½¿ç”¨çš„æ¨¡å‹ï¼ˆé»˜è®¤qwen3-coder-plusï¼‰export OPENAI_MODEL="qwen3-coder-plus"</span></span>
</code></pre>
<h3 data-id="heading-6">æ–¹å¼ 2ï¼šæ°¸ä¹…é…ç½®ï¼ˆ.env æ–‡ä»¶ï¼‰</h3>
<p>Â  Â  ä¸ºé¿å…æ¯æ¬¡å¯åŠ¨ç»ˆç«¯é‡å¤è®¾ç½®ï¼Œå¯ç¼–è¾‘ .envÂ æ–‡ä»¶ä¿å­˜é…ç½®ï¼š</p>
<ol start="0">
<li>åœ¨ç”¨æˆ·æ ¹ç›®å½•ï¼ˆæˆ–é¡¹ç›®ç›®å½•ï¼‰<code>.env</code>Â æ–‡ä»¶ä¸­ å†™å…¥é…ç½®å†…å®¹</li>
</ol>

<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">OPENAI_API_KEY</span>=<span class="hljs-string">"ä½ çš„_api_key_here"</span>OPENAI_BASE_URL=<span class="hljs-string">"https://dashscope.aliyuncs.com/compatible-mode/v1"</span>OPENAI_MODEL=<span class="hljs-string">"qwen3-coder-plus"</span>
</code></pre>
<h2 data-id="heading-7">ä¸‰ã€å¸¸ç”¨å‘½ä»¤</h2>
<p>Â  Â  Qwen Code å‘½ä»¤è¡Œå·¥å…·ï¼Œæ”¯æŒä¸°å¯Œçš„ç¼–ç åœºæ™¯ï¼Œä»¥ä¸‹æ˜¯é«˜é¢‘ä½¿ç”¨å‘½ä»¤ï¼š</p>
<h3 data-id="heading-8">1. åŸºç¡€å¯åŠ¨ï¼šå¿«é€Ÿè¿›å…¥äº¤äº’æ¨¡å¼</h3>
<pre><code class="hljs">qwen
</code></pre>
<p>Â  Â  å¯åŠ¨åè¿›å…¥äº¤äº’å¼å¯¹è¯ç•Œé¢ï¼Œå¯ç›´æ¥è¾“å…¥éœ€æ±‚ï¼Œå·¥å…·ä¼šå®æ—¶ç”Ÿæˆä»£ç å¹¶æä¾›è§£é‡Šã€‚</p>
<h3 data-id="heading-9">2. æ£€æŸ¥ç‚¹å¯åŠ¨</h3>
<p>Â  Â  æ£€æŸ¥ç‚¹åŠŸèƒ½åœ¨AIä¿®æ”¹æ–‡ä»¶å‰è‡ªåŠ¨ä¿å­˜é¡¹ç›®çŠ¶æ€ï¼Œè®©ä½ å¯ä»¥éšæ—¶ä¸€é”®å›æ»šåˆ°ä¿®æ”¹å‰çš„çŠ¶æ€</p>
<pre><code class="hljs language-bash" lang="bash">qwen --checkpointing<span class="hljs-comment"># è¯´æ˜ æ”¯æŒTabè‡ªåŠ¨è¡¥å…¨# å¦‚æœæ˜¾ç¤º "No restorable tool calls found"ï¼Œè¯´æ˜è¿˜æ²¡æœ‰åˆ›å»ºè¿‡æ£€æŸ¥ç‚¹/restore - æŸ¥çœ‹æ‰€æœ‰å¯ç”¨æ£€æŸ¥ç‚¹åˆ—è¡¨ æ£€æŸ¥ç‚¹æŒ‰æ—¶é—´æˆ³å‘½åï¼ŒåŒ…å«æ–‡ä»¶åå’Œå·¥å…·ä¿¡æ¯/restore &lt;checkpoint_name&gt; - æ¢å¤åˆ°ç‰¹å®šæ£€æŸ¥ç‚¹</span>
</code></pre>
<p>ä¹Ÿå¯ä»¥ä¿®æ”¹é…ç½®æ–‡ä»¶ ç”¨æˆ·çº§<code>~/.qwen/settings.json</code>æˆ–è€…é¡¹ç›®çº§Â <code>{project}/.qwen/settings.json</code></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>  <span class="hljs-attr">"checkpointing"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> Â   <span class="hljs-attr">"enabled"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>  <span class="hljs-attr">"maxSessionTurns"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">50</span><span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-10">3. è®¾ç½®è½®è®­æ¬¡æ•°</h3>
<p>Â  Â  åœ¨é…ç½®æ–‡ä»¶Â <code>settings.json</code>Â ä¸­ å¯ä»¥ä½¿ç”¨Â <code>maxSessionTurns</code>è®¾ç½®æœ€å¤§å¯¹è¯æ¬¡æ•°ï¼Œä¸€æ—¦è¾¾åˆ°æœ€å¤§æ­¤æ—¶å¿…é¡»é‡æ–°å¯åŠ¨</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>  <span class="hljs-attr">"maxSessionTurns"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">50</span><span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-11">4. è®°å¿†ä½¿ç”¨æŠ€å·§</h3>
<p>Â  Â  qwen æ”¯æŒè®°å¿†ä¿å­˜èƒ½åŠ›ï¼Œåœ¨ä½ ä¸‹æ¬¡é‡æ–°è¿›å…¥å¯¹è¯æ—¶ï¼Œå¯ä»¥åŠ è½½è®°å¿†å…·ä½“æ“ä½œå¦‚ä¸‹</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">ä¿å­˜å¯¹è¯çŠ¶æ€/chat save é¡¹ç›®è¿›åº¦_0101<span class="hljs-comment"># æ¢å¤å¯¹è¯çŠ¶æ€  /chat resume é¡¹ç›®è¿›åº¦_0101</span></span>
</code></pre>
<h4 data-id="heading-12">è®°å¿†å±‚æ¬¡ç»“æ„</h4>





























<table><thead><tr><th>ç±»å‹</th><th>å­˜å‚¨ä½ç½®</th><th>æŒä¹…æ€§</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><strong>ä¼šè¯è®°å¿†</strong></td><td>å†…å­˜</td><td>ä¼šè¯å†…</td><td>å½“å‰å¯¹è¯ä¸Šä¸‹æ–‡</td></tr><tr><td><strong>é¡¹ç›®è®°å¿†</strong></td><td><code>QWEN.md</code></td><td>æŒä¹…åŒ–</td><td>é¡¹ç›®ç›¸å…³ä¿¡æ¯</td></tr><tr><td><strong>ç”¨æˆ·è®°å¿†</strong></td><td><code>~/.qwen/QWEN.md</code></td><td>æŒä¹…åŒ–</td><td>ä¸ªäººåå¥½è®¾ç½®</td></tr></tbody></table>
<h3 data-id="heading-13">5 æ²™ç®±ç¯å¢ƒ</h3>
<p>Â  Â  æ²™ç®±æ¨¡å¼æ˜¯ Qwen çš„å®‰å…¨éš”ç¦»æœºåˆ¶ï¼Œå°† AI æ‰§è¡Œçš„æ½œåœ¨å±é™©æ“ä½œï¼ˆå¦‚ shell å‘½ä»¤ã€æ–‡ä»¶ä¿®æ”¹ï¼‰éš”ç¦»åœ¨å—æ§ç¯å¢ƒä¸­ï¼Œä¿æŠ¤ä½ çš„ä¸»æœºç³»ç»Ÿä¸å—æ„å¤–æŸå®³ã€‚</p>
<ol>
<li>å‘½ä»¤è¡Œå¯ç”¨</li>
</ol>

<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨é»˜è®¤æ²™ç®±qwen --sandboxqwen -s</span>
</code></pre>
<p>2.  <code>settings.json</code>é…ç½®æ–‡ä»¶å¯ç”¨</p>

<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>  <span class="hljs-attr">"sandbox"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-14">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§è¯­è¨€æ¨¡å‹å¦‚ä½•å¾®è°ƒï¼ˆFine-tuningï¼‰ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7571348736154566692</link>    <guid>https://juejin.cn/post/7571348736154566692</guid>    <pubDate>2025-11-12T03:54:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571348736154566692" data-draft-id="7571399272495628351" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§è¯­è¨€æ¨¡å‹å¦‚ä½•å¾®è°ƒï¼ˆFine-tuningï¼‰ï¼Ÿ"/> <meta itemprop="keywords" content="LLM"/> <meta itemprop="datePublished" content="2025-11-12T03:54:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™ºæ³ŠAI"/> <meta itemprop="url" content="https://juejin.cn/user/3572727470361578"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§è¯­è¨€æ¨¡å‹å¦‚ä½•å¾®è°ƒï¼ˆFine-tuningï¼‰ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3572727470361578/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™ºæ³ŠAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T03:54:52.000Z" title="Wed Nov 12 2025 03:54:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»GPT3æ¼”è¿›åˆ°ChatGPTï¼Œä»GPT4èµ‹èƒ½GitHub Copilotçš„å‘å±•å†ç¨‹ä¸­ï¼Œå¾®è°ƒæŠ€æœ¯å‘æŒ¥äº†å…³é”®ä½œç”¨ã€‚</p>
<p>æœ¬æ–‡å°†ç³»ç»Ÿè§£æå¾®è°ƒï¼ˆfine-tuningï¼‰çš„æ ¸å¿ƒæ¦‚å¿µã€å®é™…åº”ç”¨ä»·å€¼ï¼Œä»¥åŠLoRAï¼ˆLow-Rank Adaptationï¼‰çš„åˆ›æ–°åŸç†ã€‚</p>
<p><strong>ä¸€ã€ä»€ä¹ˆæ˜¯ fine-tuning</strong></p>
<p>GPT-3åŸºäºæµ·é‡äº’è”ç½‘è¯­æ–™è®­ç»ƒåï¼Œå…¶åŸç”Ÿè®¾è®¡å¹¶ä¸é’ˆå¯¹å¯¹è¯åœºæ™¯ä¼˜åŒ–ã€‚ä¾‹å¦‚å½“è¾“å…¥"ä¸­å›½çš„é¦–éƒ½æ˜¯å“ªé‡Œï¼Ÿ"æ—¶ï¼ŒGPT-3å¯èƒ½è¾“å‡º"ç¾å›½çš„é¦–éƒ½æ˜¯å“ªé‡Œï¼Ÿ"</p>
<p>è¿™æ˜¯ç”±äºè®­ç»ƒæ•°æ®ä¸­è¿™ä¸¤ç»„é—®ç­”çš„é«˜é¢‘å…±ç°å¯¼è‡´ã€‚è¿™ç±»è¾“å‡ºæ˜¾ç„¶æ— æ³•æ»¡è¶³ChatGPTçš„å¯¹è¯éœ€æ±‚ï¼Œéœ€è¦é€šè¿‡å¤šé˜¶æ®µä¼˜åŒ–æå‡å…¶å¯¹è¯èƒ½åŠ›ã€‚</p>
<p>CPT3æ¨¡å‹çš„å¾®è°ƒæµç¨‹åŒ…å«å››ä¸ªæ ¸å¿ƒé˜¶æ®µï¼š</p>
<p><strong>â€Œé¢„è®­ç»ƒé˜¶æ®µâ€Œ</strong>ï¼šåœ¨æµ·é‡æ–‡æœ¬æ•°æ®ä¸Šè®­ç»ƒï¼Œå»ºç«‹åŸºç¡€è¯­è¨€ç†è§£èƒ½åŠ›ï¼ˆå½¢æˆGPT3é›å½¢ï¼‰</p>
<p><strong>â€Œç›‘ç£å¾®è°ƒâ€Œ</strong>ï¼šé€šè¿‡æ ‡æ³¨æ•°æ®å¼•å¯¼æ¨¡å‹é€‚åº”å¯¹è¯ä»»åŠ¡ï¼Œè¾“å‡ºæ›´ç¬¦åˆäººç±»å¯¹è¯ä¹ æƒ¯</p>
<p><strong>â€Œå¼ºåŒ–å­¦ä¹ â€Œ</strong>ï¼šåˆ©ç”¨ç”¨æˆ·åé¦ˆï¼ˆå¦‚ç‚¹èµ/å·®è¯„æ•°æ®ï¼‰æŒç»­ä¼˜åŒ–è¾“å‡ºè´¨é‡ï¼Œå¢å¼ºå¤šè½®å¯¹è¯è¿è´¯æ€§</p>
<p><strong>â€Œè¿­ä»£æ›´æ–°â€Œ</strong>ï¼šå®šæœŸå¾®è°ƒæ¨¡å‹ä»¥é€‚åº”æ–°éœ€æ±‚ï¼ŒåŒæ—¶ä¿éšœå†…å®¹å®‰å…¨æ€§å’Œä¼¦ç†åˆè§„æ€§</p>
<p><strong>1.1. ä¸ºä»€ä¹ˆè¦ fine-tuning</strong></p>
<p>1.1.1. å¾®è°ƒå¯¹é¢„è®­ç»ƒæ¨¡å‹ç‰¹å®šä»»åŠ¡çš„å¼ºåŒ–ä½œç”¨</p>
<p><strong>â€Œé¢†åŸŸä¸“é¡¹ä¼˜åŒ–â€Œ</strong>ï¼šå¾®è°ƒå°†æ¨¡å‹çš„é€šç”¨èƒ½åŠ›èšç„¦äºç‰¹å®šé¢†åŸŸã€‚ä»¥æƒ…æ„Ÿåˆ†ç±»ä¸ºä¾‹ï¼Œé¢„è®­ç»ƒæ¨¡å‹è™½å…·å¤‡åŸºç¡€èƒ½åŠ›ï¼Œä½†é€šè¿‡å¾®è°ƒå¯æ˜¾è‘—æå‡å…¶åœ¨è¯¥é¢†åŸŸçš„è¡¨ç°ã€‚</p>
<p><strong>â€ŒçŸ¥è¯†æ‰©å±•â€Œ</strong>ï¼šå¾®è°ƒèƒ½å¼•å…¥æ–°çŸ¥è¯†ï¼Œä¾‹å¦‚é’ˆå¯¹æ¨¡å‹èº«ä»½ç±»é—®é¢˜ï¼ˆå¦‚â€œä½ çš„å¼€å‘è€…æ˜¯è°ï¼Ÿâ€ï¼‰ï¼Œå¯é€šè¿‡å¾®è°ƒä½¿å…¶ç”Ÿæˆç¬¦åˆé¢„æœŸçš„å›ç­”ã€‚</p>
<p><strong>æ›´å¤šAIå¤§æ¨¡å‹å­¦ä¹ è§†é¢‘åŠèµ„æºï¼Œéƒ½åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fyuan.zhipoai.cn%2F" target="_blank" title="https://yuan.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</strong></p>
<p>1.1.2. å¾®è°ƒå¯¹æ¨¡å‹æ€§èƒ½çš„æå‡</p>
<p><strong>â€ŒæŠ‘åˆ¶å¹»è§‰â€Œ</strong>ï¼šå¾®è°ƒæœ‰æ•ˆå‡å°‘æ¨¡å‹ç”Ÿæˆè™šå‡æˆ–æ— å…³å†…å®¹çš„æ¦‚ç‡ã€‚</p>
<p><strong>â€Œè¾“å‡ºç¨³å®šæ€§â€Œ</strong>ï¼šåœ¨ä¿æŒåˆ›é€ æ€§çš„å‰æä¸‹ï¼ˆå¦‚è°ƒæ•´temperatureå‚æ•°ï¼‰ï¼Œå¾®è°ƒç¡®ä¿è¾“å‡ºè´¨é‡æ³¢åŠ¨è¾ƒå°ï¼Œé¿å…å¿½é«˜å¿½ä½çš„ç»“æœã€‚</p>
<p><strong>â€Œå†…å®¹è¿‡æ»¤â€Œ</strong>ï¼šæ¨¡å‹å¯ç»å¾®è°ƒæ‹’ç»æ•æ„Ÿè¯é¢˜ï¼ˆå¦‚å®—æ•™è¯„ä»·ï¼‰ï¼Œåœ¨å®‰å…¨å®¡æŸ¥åœºæ™¯ä¸­å°¤ä¸ºé‡è¦ã€‚</p>
<p><strong>â€Œæ•ˆç‡ä¼˜åŒ–â€Œ</strong>ï¼šé€šè¿‡å‚æ•°ç²¾ç®€å’Œå¾®è°ƒï¼Œé™ä½æ¨ç†å»¶è¿Ÿï¼Œæå‡å“åº”é€Ÿåº¦ã€‚</p>
<p>1.1.3. å¾®è°ƒä¿éšœæ•°æ®å®‰å…¨</p>
<p><strong>â€Œçµæ´»éƒ¨ç½²â€Œ</strong>ï¼šæ”¯æŒæœ¬åœ°æˆ–ç§æœ‰äº‘éƒ¨ç½²ï¼Œå®ç°å®Œå…¨è‡ªä¸»æ§åˆ¶ã€‚</p>
<p><strong>â€Œæ•°æ®ä¿æŠ¤â€Œ</strong>ï¼šä¼ä¸šæ ¸å¿ƒæ•°æ®æ— éœ€å¤–æ³„ï¼Œé¿å…ç«äº‰ä¼˜åŠ¿æµå¤±ã€‚</p>
<p><strong>â€Œå®‰å…¨å®šåˆ¶â€Œ</strong>ï¼šé’ˆå¯¹æœºå¯†æ•°æ®ï¼Œå¯æ„å»ºé«˜å®‰å…¨ç­‰çº§çš„å¾®è°ƒç¯å¢ƒï¼Œä¸ä¾èµ–ç¬¬ä¸‰æ–¹æœåŠ¡å•†ã€‚</p>
<p>1.1.4. å¾®è°ƒçš„ç»æµæ€§ä¼˜åŠ¿</p>
<p><strong>â€Œé™ä½å¼€å‘æˆæœ¬â€Œ</strong>ï¼šä»¥Metaå¼€æºçš„Llama 3.1 405Bä¸ºä¾‹ï¼Œå…¶è®­ç»ƒéœ€24000å¼ H100é›†ç¾¤è¿è¡Œ54å¤©ï¼Œè€ŒåŸºäºå¼€æºæ¨¡å‹çš„å¾®è°ƒï¼ˆå¦‚é‡åŒ–æŠ€æœ¯ï¼‰å¯å¤§å¹…é™ä½æˆæœ¬ã€‚</p>
<p><strong>â€Œæ¨ç†æˆæœ¬ä¼˜åŒ–â€Œ</strong>ï¼šç›¸åŒæ€§èƒ½ä¸‹ï¼Œå¾®è°ƒæ¨¡å‹å‚æ•°é‡æ›´å°‘ï¼Œå•æ¬¡è¯·æ±‚æˆæœ¬æ›´ä½ã€‚</p>
<p><strong>â€Œèµ„æºå¯æ§æ€§â€Œ</strong>ï¼šé€šè¿‡è°ƒæ•´å‚æ•°å’Œèµ„æºé…ç½®ï¼Œå¹³è¡¡æ€§èƒ½ã€è€—æ—¶ä¸æˆæœ¬ï¼Œå®ç°çµæ´»ä¼˜åŒ–ã€‚</p>
<p><strong>1.2. ä¸€äº›ç›¸å…³æ¦‚å¿µåŒºåˆ†</strong></p>
<p>1.2.1. åŸºäºäººç±»åé¦ˆçš„å¼ºåŒ–å­¦ä¹ ï¼ˆRLHFï¼‰ä¸ç›‘ç£å¾®è°ƒï¼ˆSFTï¼‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7563be56293c47cb9024df7461073385~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763524492&amp;x-signature=0WKDNGMtgq%2BqlKiGroAOV6tm1Us%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ ¹æ®OpenAIå…¬å¼€çš„æŠ€æœ¯èµ„æ–™ï¼ŒChatGPTçš„æ€§èƒ½æå‡ä¸»è¦ä¾èµ–å¾®è°ƒï¼ˆSFTï¼‰å’ŒåŸºäºäººç±»åé¦ˆçš„å¼ºåŒ–å­¦ä¹ ï¼ˆRLHFï¼‰ä¸¤å¤§æŠ€æœ¯è·¯å¾„ã€‚</p>
<p>ä»GPT3åˆ°ChatGPTçš„æ¼”è¿›æµç¨‹å¯æ¦‚æ‹¬ä¸ºå››ä¸ªé˜¶æ®µï¼šé¢„è®­ç»ƒ â†’ ç›‘ç£å¾®è°ƒï¼ˆSFTï¼‰ â†’ å¼ºåŒ–å­¦ä¹ ï¼ˆRLHFï¼‰ â†’ æ¨¡å‹ä¿®å‰ªä¸ä¼˜åŒ–ã€‚è¿™ä¸¤ç§æ ¸å¿ƒæŠ€æœ¯çš„å·®å¼‚ä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹æ–¹é¢ï¼š</p>
<p><strong>â€ŒæŠ€æœ¯åŸç†å·®å¼‚â€Œ</strong></p>
<p>å¾®è°ƒé€šè¿‡ç›‘ç£å­¦ä¹ ä½¿æ¨¡å‹è¾“å‡ºæ›´ç¬¦åˆäººç±»å¯¹è¯ä¹ æƒ¯ï¼Œè€Œå¼ºåŒ–å­¦ä¹ åˆ™é€šè¿‡å»ºç«‹å¥–åŠ±æœºåˆ¶æ¥ä¼˜åŒ–è¾“å‡ºè´¨é‡ã€‚å…·ä½“è€Œè¨€ï¼š</p>
<p><strong>â€Œç›‘ç£å¾®è°ƒ</strong>ï¼ˆSFTï¼‰â€Œï¼šåˆ©ç”¨æ ‡æ³¨æ•°æ®å¯¹é¢„è®­ç»ƒæ¨¡å‹è¿›è¡Œé’ˆå¯¹æ€§è®­ç»ƒï¼Œå±äºæœ‰ç›‘ç£å­¦ä¹ èŒƒå¼ã€‚æ ¹æ®è®­ç»ƒæ–¹å¼ä¸åŒï¼Œè¿˜å¯ç»†åˆ†ä¸ºæ— ç›‘ç£å¾®è°ƒï¼ˆåˆ©ç”¨æœªæ ‡æ³¨æ•°æ®ï¼‰å’Œè‡ªç›‘ç£å¾®è°ƒï¼ˆé€šè¿‡ç”Ÿæˆä¼ªæ ‡ç­¾å®ç°ï¼‰</p>
<p><strong>â€Œå¼ºåŒ–å­¦ä¹ </strong>ï¼ˆRLï¼‰â€Œï¼šæ¨¡å‹é€šè¿‡ä¸ç¯å¢ƒäº¤äº’è·å¾—å¥–åŠ±ä¿¡å·ï¼Œä»¥æœ€å¤§åŒ–é•¿æœŸç´¯ç§¯å¥–åŠ±ä¸ºç›®æ ‡ã€‚åœ¨NLPé¢†åŸŸï¼ŒRLHFï¼ˆåŸºäºäººç±»åé¦ˆçš„å¼ºåŒ–å­¦ä¹ ï¼‰æ˜¯å…¸å‹åº”ç”¨ï¼Œå…¶æµç¨‹åŒ…å«ï¼š</p>
<p>åˆå§‹æ¨¡å‹ç”Ÿæˆï¼ˆç›‘ç£å­¦ä¹ é˜¶æ®µï¼‰</p>
<p>äººç±»è¯„å®¡å‘˜å¯¹è¾“å‡ºç»“æœè¿›è¡Œè´¨é‡æ’åº</p>
<p>è®­ç»ƒå¥–åŠ±æ¨¡å‹ï¼ˆreward modelï¼‰å¯¹è¾“å‡ºè¯„åˆ†</p>
<p>é€šè¿‡å¼ºåŒ–å­¦ä¹ ä¼˜åŒ–ç”Ÿæˆç­–ç•¥</p>
<p><strong>â€Œå®è·µå¯¹æ¯”â€Œ</strong></p>
<p>ä»å®æ–½éš¾åº¦æ¥çœ‹ï¼Œå¼ºåŒ–å­¦ä¹ åœ¨æ•°æ®æ ‡æ³¨æˆæœ¬ã€è®­ç»ƒå¤æ‚åº¦ã€æ—¶é—´æŠ•å…¥å’Œæ•ˆæœä¸ç¡®å®šæ€§ç­‰æ–¹é¢å‡æ˜¾è‘—é«˜äºå¾®è°ƒã€‚</p>
<p>RLHFéœ€è¦å…ˆæ„å»ºäººå·¥æ ‡æ³¨çš„å¥–åŠ±æ¨¡å‹ï¼Œå†ç»è¿‡å¤šè½®è¿­ä»£ä¼˜åŒ–ï¼Œè€ŒSFTåœ¨ç‰¹å®šä»»åŠ¡ä¸­é€šå¸¸èƒ½ä»¥æ›´ä½æˆæœ¬è·å¾—è‰¯å¥½æ•ˆæœã€‚å› æ­¤åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¾®è°ƒä»æ˜¯ä¸»æµé€‰æ‹©ã€‚</p>
<p>1.2.2. ç»§ç»­é¢„è®­ç»ƒä¸å¾®è°ƒ</p>
<p>ChatGPTä½œä¸ºé€šç”¨å‹å¯¹è¯å·¥å…·ï¼Œå…¶åº”ç”¨åœºæ™¯è¦†ç›–å¹¿æ³›ã€‚è€Œåœ¨å‚ç›´è¡Œä¸šæˆ–ä¸“ä¸šé¢†åŸŸä¸­ï¼Œç±»ä¼¼äº§å“çš„å®šä½ä¼šå‘ˆç°æ›´ç²¾ç»†çš„åˆ’åˆ†ã€‚</p>
<p>ä¾‹å¦‚å¸¸è§çš„åŒ»ç–—ä¸“ç”¨å¤§æ¨¡å‹ã€æ³•å¾‹åˆè§„å¤§æ¨¡å‹ã€é‡‘èé£æ§å¤§æ¨¡å‹ç­‰ï¼Œè¿™ç±»"è¡Œä¸šä¸“ç”¨æ¨¡å‹"å¤šæ•°åŸºäºåŸºç¡€æ¨¡å‹é€šè¿‡æŒç»­é¢„è®­ç»ƒå®ç°ã€‚</p>
<p>æŒç»­é¢„è®­ç»ƒæ˜¯æŒ‡åˆ©ç”¨ç‰¹å®šé¢†åŸŸæ•°æ®å¯¹å·²é¢„è®­ç»ƒæ¨¡å‹è¿›è¡ŒäºŒæ¬¡è®­ç»ƒï¼Œæ—¨åœ¨å¢å¼ºæ¨¡å‹å¯¹ä¸“ä¸šé¢†åŸŸçš„è®¤çŸ¥é€‚é…æ€§ã€‚</p>
<p>æ­¤ç±»æ•°æ®é€šå¸¸å…·æœ‰ä½“é‡å¤§ã€æ— æ ‡æ³¨çš„ç‰¹å¾ã€‚å¾®è°ƒåˆ™ä¾§é‡æå‡æ¨¡å‹åœ¨å…·ä½“ä»»åŠ¡ä¸­çš„æ€§èƒ½è¡¨ç°ï¼Œé€šå¸¸é‡‡ç”¨å°è§„æ¨¡æ ‡æ³¨æ•°æ®é›†è¿›è¡Œé’ˆå¯¹æ€§ä¼˜åŒ–ã€‚</p>
<p>ä¸¤ç§æ–¹æ³•å¯ååŒåº”ç”¨ï¼Œä»¥é‡‘èå®‰å…¨é¢†åŸŸä¸ºä¾‹ï¼Œé’ˆå¯¹æ¬ºè¯ˆè¡Œä¸ºåˆ†ç±»æ ‡æ³¨è¿™ç±»å…·ä½“ä»»åŠ¡ï¼Œæ¨¡å‹çš„å…¸å‹è®­ç»ƒæµç¨‹ä¸ºï¼š</p>
<p>åŸºç¡€é¢„è®­ç»ƒï¼ˆåŸºäºå…¨ç½‘æµ·é‡æ•°æ®ï¼Œä¼ä¸šçº§è®­ç»ƒï¼‰â†’ é¢†åŸŸé¢„è®­ç»ƒï¼ˆä½¿ç”¨è¡Œä¸šä¸“æœ‰æ•°æ®ï¼Œè·¨ä¸šåŠ¡éƒ¨é—¨å®æ–½ï¼‰â†’ ä»»åŠ¡å¾®è°ƒï¼ˆä¾æ‰˜ä¸šåŠ¡åœºæ™¯æ•°æ®ï¼Œå„ä¸šåŠ¡å•å…ƒç‹¬ç«‹ä¼˜åŒ–ï¼‰ã€‚</p>
<p><strong>1.3. å°ç»“</strong></p>
<p>ï»¿é€šè¿‡å¾®è°ƒå¯ä»¥æå‡æ¨¡å‹åœ¨ç‰¹å®šä»»åŠ¡ä¸Šçš„è¡¨ç°ã€‚ç›¸å¯¹äºé¢„è®­ç»ƒã€å¼ºåŒ–å­¦ä¹ ï¼Œåœ¨ç”Ÿäº§è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨åˆ°å¾®è°ƒæŠ€æœ¯çš„åœºæ™¯æ›´å¤šã€‚</p>
<p><strong>äºŒã€å¦‚ä½• Fine-tuning</strong></p>
<p><strong>2.1. å¾®è°ƒçš„åŸºæœ¬åŸç†</strong></p>
<p>å¾®è°ƒæ˜¯æŒ‡å¯¹å·²è®­ç»ƒå®Œæˆçš„ç¥ç»ç½‘ç»œæ¨¡å‹å‚æ•°è¿›è¡Œé’ˆå¯¹æ€§è°ƒæ•´ï¼Œä½¿å…¶æ›´é€‚é…ç‰¹å®šä»»åŠ¡æˆ–æ•°æ®åˆ†å¸ƒã€‚</p>
<p>é€šè¿‡åœ¨å°å‹æ–°æ•°æ®é›†ä¸Šå¯¹æ¨¡å‹çš„éƒ¨åˆ†æˆ–å…¨éƒ¨å±‚çº§è¿›è¡ŒäºŒæ¬¡è®­ç»ƒï¼Œæ¨¡å‹èƒ½å¤Ÿåœ¨ç»§æ‰¿åŸæœ‰çŸ¥è¯†çš„å‰æä¸‹ï¼Œé’ˆå¯¹æ–°ä»»åŠ¡å®ç°æ€§èƒ½ä¼˜åŒ–ï¼Œä»è€Œå¢å¼ºåœ¨å‚ç›´é¢†åŸŸçš„èƒ½åŠ›è¡¨ç°ã€‚</p>
<p>ä¾æ®è°ƒæ•´èŒƒå›´çš„ä¸åŒï¼Œå¾®è°ƒç­–ç•¥å¯åˆ†ä¸ºå…¨å±€å¾®è°ƒä¸å±€éƒ¨å¾®è°ƒä¸¤ç±»ã€‚</p>
<p>â€Œå…¨å±€å¾®è°ƒï¼ˆFull Model Fine-Tuningï¼‰â€Œä¼šæ›´æ–°æ¨¡å‹å…¨éƒ¨å‚æ•°ï¼Œé€‚ç”¨äºç›®æ ‡ä»»åŠ¡ä¸é¢„è®­ç»ƒä»»åŠ¡å­˜åœ¨æ˜¾è‘—å·®å¼‚ï¼Œæˆ–éœ€è¦æè‡´æ€§èƒ½è¾“å‡ºçš„åœºæ™¯ã€‚</p>
<p>è¯¥æ–¹æ¡ˆè™½èƒ½è¾¾æˆæœ€ä¼˜æ•ˆæœï¼Œä½†éœ€æ¶ˆè€—å¤§é‡è®¡ç®—èµ„æºä¸å­˜å‚¨ç©ºé—´ï¼Œä¸”åœ¨å°æ•°æ®é‡åœºæ™¯ä¸‹æ˜“å¼•å‘è¿‡æ‹Ÿåˆé—®é¢˜ã€‚è€Œâ€Œå±€éƒ¨å¾®è°ƒï¼ˆPartial Fine-Tuningï¼‰â€Œä»…æ¿€æ´»éƒ¨åˆ†å‚æ•°è¿›è¡Œæ›´æ–°ï¼Œå…¶ä½™å‚æ•°ä¿æŒå†»ç»“çŠ¶æ€ã€‚</p>
<p>è¯¥æ–¹å¼æœ‰æ•ˆé™ä½äº†è®¡ç®—ä¸å­˜å‚¨å¼€é”€ï¼Œå¹¶ç¼“è§£äº†è¿‡æ‹Ÿåˆé£é™©ï¼Œå°¤å…¶é€‚åˆæ•°æ®é‡æœ‰é™çš„ä»»åŠ¡ï¼Œä½†åœ¨å¤„ç†å¤æ‚ä»»åŠ¡æ—¶å¯èƒ½åˆ¶çº¦æ¨¡å‹æ½œåŠ›çš„å……åˆ†é‡Šæ”¾ã€‚</p>
<p>å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå±€éƒ¨å¾®è°ƒæ›´ä¸ºæ™®éã€‚è€ƒè™‘åˆ°å¤§æ¨¡å‹å‚æ•°è§„æ¨¡åºå¤§ï¼Œå³ä½¿ä»…è°ƒæ•´éƒ¨åˆ†å‚æ•°ä»éœ€å¯è§‚çš„è®¡ç®—èµ„æºã€‚</p>
<p>å½“å‰ä¸»æµçš„è§£å†³æ–¹æ¡ˆæ˜¯â€Œå‚æ•°é«˜æ•ˆå¾®è°ƒï¼ˆParameter-Efficient Fine-Tuning, PEFTï¼‰â€Œï¼Œè¯¥æ–¹æ³•é€šè¿‡å¼•å…¥ä½ç§©çŸ©é˜µï¼ˆå¦‚LoRAï¼‰æˆ–é€‚é…å™¨æ¨¡å—ï¼ˆå¦‚Adaptersï¼‰ï¼Œæ˜¾è‘—å‡å°‘äº†èµ„æºæ¶ˆè€—ã€‚</p>
<p>å…¶ä¸­ï¼Œâ€ŒLoRAâ€Œä½œä¸ºé«˜æ•ˆå¾®è°ƒæŠ€æœ¯çš„ä»£è¡¨ï¼Œåœ¨ä¿æŒæ¨¡å‹åŸæœ‰æ€§èƒ½çš„å‰æä¸‹ï¼Œå¤§å¹…é™ä½äº†å¾®è°ƒæ‰€éœ€çš„å‚æ•°é‡ä¸è®¡ç®—æˆæœ¬ï¼Œå®ç°äº†å¯¹ç‰¹å®šä»»åŠ¡çš„é«˜æ•ˆé€‚é…ï¼Œå°¤å…¶é€‚ç”¨äºå¤§æ¨¡å‹çš„å¾®è°ƒåœºæ™¯ã€‚</p>
<p><strong>2.2. ä»€ä¹ˆæ˜¯ LoRA</strong></p>
<p>2.2.1. LoRA åŸºæœ¬æ¦‚å¿µ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe3245c162ea405e941ee9bd1667435c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763524492&amp;x-signature=baq3syjdQffC2Wn624ikl29p0J8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ï»¿LoRAï¼ˆLow-Rank Adaptationï¼‰é€šè¿‡å¼•å…¥ä½ç§©çŸ©é˜µæ¥å‡å°‘å¾®è°ƒè¿‡ç¨‹ä¸­éœ€è¦æ›´æ–°çš„å‚æ•°æ•°é‡ï¼ˆçŸ©é˜µAå’ŒçŸ©é˜µBï¼‰ï¼Œä»è€Œæ˜¾è‘—é™ä½è®¡ç®—èµ„æºéœ€æ±‚ï¼ˆé™ä½ä¸ºä¹‹å‰1/3ï¼Œè®ºæ–‡ä¸­æ•°æ®ï¼‰ã€‚</p>
<p>ï»¿LoRA å¦å¤–ä¸€ä¸ªéå¸¸é‡è¦çš„ç‰¹æ€§æ˜¯ï¼šå¯é‡ç”¨æ€§ã€‚ç”±äºLoRAä¸æ”¹å˜åŸæ¨¡å‹çš„å‚æ•°ï¼Œå®ƒåœ¨å¤šä»»åŠ¡æˆ–å¤šåœºæ™¯çš„åº”ç”¨ä¸­å…·æœ‰å¾ˆé«˜çš„å¯é‡ç”¨æ€§ã€‚ä¸åŒä»»åŠ¡çš„ä½ç§©çŸ©é˜µå¯ä»¥åˆ†åˆ«å­˜å‚¨å’ŒåŠ è½½ï¼Œçµæ´»åº”ç”¨äºä¸åŒä»»åŠ¡ä¸­ã€‚</p>
<p>ï»¿æ¯”å¦‚åœ¨æ‰‹æœºç»ˆç«¯ä¸Šï¼Œè¦è·‘åº”ç”¨çš„ç»ˆç«¯å¤§æ¨¡å‹ã€‚ä¸€ä¸ªåº”ç”¨çš„æ¨¡å‹ä¼šå¤„ç†ä¸åŒçš„ä»»åŠ¡ï¼Œå¯ä»¥é’ˆå¯¹ä¸åŒçš„ä»»åŠ¡ï¼Œè®­ç»ƒä¸åŒçš„ LoRA å‚æ•°ï¼Œè¿è¡Œæ—¶åŸºäºä¸åŒä»»åŠ¡ï¼Œä½¿ç”¨ç›¸åŒçš„åŸºåº§æ¨¡å‹ï¼ŒåŠ¨æ€åŠ è½½éœ€è¦çš„ LoRA å‚æ•°ã€‚</p>
<p>ç›¸å¯¹äºä¸€ä¸ªä»»åŠ¡ä¸€ä¸ªæ¨¡å‹ï¼Œå¯ä»¥å¤§å¤§é™ä½å­˜å‚¨ã€è¿è¡Œéœ€è¦çš„ç©ºé—´ã€‚</p>
<p>ï»¿2.2.2. LoRA åŸç†åˆ†æ</p>
<p>åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œé€šå¸¸ä¼šä½¿ç”¨éå¸¸å¤æ‚çš„çŸ©é˜µæ¥è®©æ¨¡å‹å¤„ç†æ•°æ®ã€‚è¿™äº›ç»“æ„é€šå¸¸éƒ½å¾ˆâ€œå…¨èƒ½â€ï¼Œå®ƒä»¬å¯ä»¥å¤„ç†éå¸¸å¤šç§ç±»çš„ä¿¡æ¯ã€‚</p>
<p>ä½†ç ”ç©¶è¡¨æ˜ï¼Œè®©æ¨¡å‹å»é€‚åº”ç‰¹å®šä»»åŠ¡æ—¶ï¼Œæ¨¡å‹å…¶å®å¹¶ä¸éœ€è¦ç”¨åˆ°æ‰€æœ‰è¿™äº›å¤æ‚çš„èƒ½åŠ›ã€‚ç›¸åï¼Œæ¨¡å‹åªéœ€è¦åˆ©ç”¨å…¶ä¸­ä¸€éƒ¨åˆ†å°±èƒ½å¾ˆå¥½åœ°å®Œæˆä»»åŠ¡ã€‚</p>
<p>ï»¿æ‰“ä¸ªæ¯”æ–¹ï¼Œè¿™å°±åƒä½ æœ‰ä¸€æŠŠç‘å£«å†›åˆ€ï¼Œé‡Œé¢æœ‰å¾ˆå¤šå·¥å…·ï¼ˆåƒå‰ªåˆ€ã€èºä¸åˆ€ç­‰ç­‰ï¼‰ï¼Œä½†æ˜¯åœ¨è§£å†³ç‰¹å®šä»»åŠ¡æ—¶ï¼Œé€šå¸¸åªéœ€è¦ç”¨åˆ°å…¶ä¸­çš„å‡ ä¸ªå·¥å…·å°±å¯ä»¥å®Œæˆå¤§å¤šæ•°å·¥ä½œã€‚</p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ¨¡å‹çš„çŸ©é˜µå°±åƒç‘å£«å†›åˆ€ï¼Œè™½ç„¶å®ƒå¾ˆå¤æ‚ï¼ˆå…¨ç§©ï¼‰ï¼Œä½†å®é™…ä¸Šä½ åªéœ€è¦ç”¨åˆ°ä¸€äº›ç®€å•çš„å·¥å…·ï¼ˆä½ç§©ï¼‰å°±è¶³å¤Ÿäº†ã€‚</p>
<p>ï»¿ä¹Ÿå°±æ˜¯è¯´å¾®è°ƒçš„æ—¶å€™ï¼Œåªè°ƒæ•´é‚£äº›å¯¹ç‰¹å®šä»»åŠ¡æœ‰å½±å“çš„å‚æ•°å°±å¯ä»¥äº†ã€‚</p>
<p>åŸå§‹çŸ©é˜µç»´åº¦è¾ƒé«˜ï¼Œå‡è®¾ä¸º d<em>k ç»´çŸ©é˜µW0ï¼Œè¦æƒ³è¿›è¡ŒçŸ©é˜µè°ƒæ•´ï¼Œå¹¶ä¸”ä¿æŒçŸ©é˜µçš„æ•°æ®ï¼ˆä¸ºäº†é‡ç”¨ï¼‰ï¼Œæœ€ç®€å•æ–¹å¼æ˜¯ä½¿ç”¨çŸ©é˜µåŠ æ³•ï¼Œå¢åŠ ä¸€ä¸ª d</em>k ç»´åº¦çš„çŸ©é˜µÎ”Wã€‚</p>
<p>ä½†å¦‚æœå¾®è°ƒçš„æ•°æ®ï¼Œè¿˜æ˜¯ä¸€ä¸ªd*kç»´åº¦çš„çŸ©é˜µï¼Œå‚æ•°é‡å°±å¾ˆå¤šã€‚LoRA é€šè¿‡å°†åè€…è¡¨ç¤ºä¸ºä½ç§©åˆ†è§£ï¼Œæ¥å‡å°‘å‚æ•°çš„é‡çº§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/461e8a113eaf44eb803110a40f089120~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763524492&amp;x-signature=F7KkTol0ceWupOwewvVwfT9F82M%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a07158a8f014f50b5c32a15ad38ec7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763524492&amp;x-signature=%2BnqFK90A%2FE6hu1DLIvkDhJ%2Bow%2Bo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸Šé¢è¡¨æ ¼ä¸ºåœ¨ WikiSQL å’Œ MultiNLI ä¸Šä½¿ç”¨ä¸åŒç§©rçš„ LoRA éªŒè¯å‡†ç¡®ç‡ã€‚é€‚é… Wq å’Œ Wvæ—¶ï¼Œåªæœ‰1çš„ç§©å°±è¶³å¤Ÿäº†ï¼Œè€Œä»…è®­ç»ƒWqåˆ™éœ€è¦æ›´å¤§çš„rã€‚</p>
<p>Wq, Wk, Wv, Woä¸º Transformeræ¶æ„ä¸­è‡ªæ³¨æ„åŠ›æ¨¡å—ä¸­çš„æƒé‡çŸ©é˜µã€‚</p>
<p><strong>2.3. å¾®è°ƒè¿‡ç¨‹</strong></p>
<p>å¾®è°ƒåŸºæœ¬è¿‡ç¨‹ï¼Œå¤§æ¦‚å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51ee203c519243b19348b1f3f4af0df6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763524492&amp;x-signature=B0AzhF0SJ4cylL2pyWPdInKgv14%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>ä¸‰ã€ç»“è¯­</strong></p>
<p>æœ¬æ–‡ä»‹ç»äº†å¾®è°ƒçš„åŸºæœ¬æ¦‚å¿µï¼Œä»¥åŠå¦‚ä½•å¯¹è¯­è¨€æ¨¡å‹è¿›è¡Œå¾®è°ƒã€‚å¾®è°ƒè™½æˆæœ¬ä½äºå¤§æ¨¡å‹çš„é¢„è®­ç»ƒï¼Œä½†å¯¹äºå¤§é‡å‚æ•°çš„æ¨¡å‹å¾®è°ƒæˆæœ¬ä»éå¸¸ä¹‹é«˜ã€‚</p>
<p>å¥½åœ¨æœ‰æ‘©å°”å®šå¾‹ï¼Œç›¸ä¿¡éšç€ç®—åŠ›å¢é•¿ï¼Œå¾®è°ƒçš„æˆæœ¬é—¨æ§›ä¼šè¶Šæ¥è¶Šä½ï¼Œå¾®è°ƒæŠ€æœ¯åº”ç”¨çš„åœºæ™¯ä¹Ÿä¼šè¶Šæ¥è¶Šå¤šã€‚</p>
<p>ï»¿â€œTextbooks Are All You Needâ€ è¿™ç¯‡è®ºæ–‡ä¸­å¼ºè°ƒäº†æ•°æ®è´¨é‡å¯¹é¢„è®­ç»ƒçš„é‡è¦æ€§ï¼Œdeep learningçš„è¯¾ç¨‹ä¸­ï¼Œä¹Ÿå¼ºè°ƒäº†è®­ç»ƒæ•°æ®çš„ Qualityã€‚</p>
<p>æƒ³èµ· AngelList åˆ›å§‹äºº Naval çš„ä¸€å¥è¯ï¼Œâ€œRead the Best 100 Books Over and Over Again â€ ï¼Œå¾®è°ƒä¹‹äºæ¨¡å‹ï¼Œç±»ä¼¼äºäººå»å­¦ä¹ æŠ€èƒ½/ç‰¹å®šé¢†åŸŸçŸ¥è¯†ã€‚</p>
<p>é«˜è´¨é‡çš„è¾“å…¥éå¸¸é‡è¦ï¼Œæ­£ç¡®æ–¹å¼å¯èƒ½æ˜¯ï¼šé˜…è¯»ç»å…¸ï¼Œåå¤é˜…è¯»ã€‚</p>
<p><strong>æ›´å¤šAIå¤§æ¨¡å‹å­¦ä¹ è§†é¢‘åŠèµ„æºï¼Œéƒ½åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fyuan.zhipoai.cn%2F" target="_blank" title="https://yuan.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æŸä¸œäº’è”ç½‘å¤§å‚çš„Redisé¢è¯•çŸ¥è¯†ç‚¹åˆ†æ]]></title>    <link>https://juejin.cn/post/7571395183943827465</link>    <guid>https://juejin.cn/post/7571395183943827465</guid>    <pubDate>2025-11-12T03:55:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571395183943827465" data-draft-id="7571395183943811081" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æŸä¸œäº’è”ç½‘å¤§å‚çš„Redisé¢è¯•çŸ¥è¯†ç‚¹åˆ†æ"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,æ¶æ„"/> <meta itemprop="datePublished" content="2025-11-12T03:55:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="360_go_php"/> <meta itemprop="url" content="https://juejin.cn/user/2436173498956695"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æŸä¸œäº’è”ç½‘å¤§å‚çš„Redisé¢è¯•çŸ¥è¯†ç‚¹åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2436173498956695/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    360_go_php
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T03:55:01.000Z" title="Wed Nov 12 2025 03:55:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<p>Redis æ˜¯ä¸€ä¸ªå¼€æºçš„å†…å­˜æ•°æ®ç»“æ„å­˜å‚¨ç³»ç»Ÿï¼Œå¹¿æ³›åº”ç”¨äºç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰åœºæ™¯ã€‚å®ƒé€šè¿‡å…¶é«˜æ•ˆçš„æ•°æ®ç»“æ„å’Œå¼ºå¤§çš„æ€§èƒ½ï¼Œæˆä¸ºäº†è®¸å¤šå¤§å‚ç”µå•†å¹³å°ï¼ˆå¦‚æŸä¸œï¼‰çš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ã€‚åœ¨é¢è¯•è¿‡ç¨‹ä¸­ï¼Œé¢è¯•å®˜é€šå¸¸ä¼šè€ƒå¯Ÿå€™é€‰äººå¯¹ Redis çš„ç†è§£å’Œåº”ç”¨ã€‚æœ¬æ–‡å°†é’ˆå¯¹ Redis é¢è¯•ä¸­çš„å…³é”®çŸ¥è¯†ç‚¹è¿›è¡Œåˆ†æã€‚<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52bcbd59fb9748f4b25a6a052b01ed7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzYwX2dvX3BocA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763524501&amp;x-signature=QdAawv4w1iD4Obc1ASFIfOopdBk%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<hr/>
<h4 data-id="heading-0">1. <strong>ä¸ºä»€ä¹ˆç”¨ Redisï¼Ÿ</strong></h4>
<p>Redis ä½œä¸ºä¸€ç§é«˜æ•ˆçš„é”®å€¼å¯¹å­˜å‚¨ç³»ç»Ÿï¼Œä¸»è¦ç”¨äºæé«˜ç³»ç»Ÿæ€§èƒ½ï¼Œå‡å°‘æ•°æ®åº“è´Ÿè½½ã€‚Redis çš„åº”ç”¨åœºæ™¯éå¸¸å¹¿æ³›ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºç¼“å­˜ã€ä¼šè¯å­˜å‚¨ã€æ’è¡Œæ¦œã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ã€‚</p>
<ul>
<li><strong>æå‡æ€§èƒ½</strong>ï¼šé€šè¿‡ç¼“å­˜çƒ­ç‚¹æ•°æ®ï¼Œé¿å…é¢‘ç¹çš„æ•°æ®åº“æŸ¥è¯¢ï¼Œå‡å°‘å»¶è¿Ÿï¼Œæå‡ç³»ç»Ÿå“åº”é€Ÿåº¦ã€‚</li>
<li><strong>é«˜å¹¶å‘æ”¯æŒ</strong>ï¼šRedis å†…å­˜å­˜å‚¨å’Œé«˜æ•ˆçš„æ•°æ®ç»“æ„ä½¿å…¶èƒ½å¤Ÿå¤„ç†æé«˜çš„å¹¶å‘è¯·æ±‚ï¼Œé€‚ç”¨äºé«˜æµé‡åœºæ™¯ã€‚</li>
<li><strong>æŒä¹…åŒ–ä¸å¯é æ€§</strong>ï¼šæ”¯æŒæ•°æ®æŒä¹…åŒ–ï¼Œä¿è¯äº†æ•°æ®ä¸ä¸¢å¤±çš„åŒæ—¶ï¼Œå¯ä»¥å¿«é€Ÿæ¢å¤ã€‚</li>
</ul>
<h4 data-id="heading-1">2. <strong>Redis ä¸ºä»€ä¹ˆå¿«ï¼Ÿ</strong></h4>
<p>Redis çš„é«˜æ€§èƒ½ä¸»è¦å¾—ç›Šäºä»¥ä¸‹å‡ ä¸ªå› ç´ ï¼š</p>
<ul>
<li><strong>å†…å­˜å­˜å‚¨</strong>ï¼šRedis å°†æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œç›¸æ¯”ä¼ ç»Ÿçš„ç£ç›˜å­˜å‚¨æ–¹å¼ï¼Œå†…å­˜çš„è¯»å†™é€Ÿåº¦æ›´å¿«ã€‚</li>
<li><strong>å•çº¿ç¨‹æ¨¡å‹</strong>ï¼šRedis ä½¿ç”¨å•çº¿ç¨‹æ¨¡å‹å¤„ç†æ‰€æœ‰å®¢æˆ·ç«¯è¯·æ±‚ï¼Œé¿å…äº†çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ï¼Œå‡å°‘äº†å¹¶å‘æ—¶çš„ç«äº‰ã€‚</li>
<li><strong>é«˜æ•ˆçš„æ•°æ®ç»“æ„</strong>ï¼šRedis æä¾›äº†å¤šç§ä¼˜åŒ–è¿‡çš„æ•°æ®ç»“æ„ï¼Œå¦‚å­—ç¬¦ä¸²ã€å“ˆå¸Œã€åˆ—è¡¨ã€é›†åˆç­‰ï¼Œè¿™äº›æ•°æ®ç»“æ„çš„æ“ä½œéƒ½æ˜¯éå¸¸é«˜æ•ˆçš„ã€‚</li>
<li><strong>I/Oå¤šè·¯å¤ç”¨</strong>ï¼šRedis ä½¿ç”¨äº‹ä»¶é©±åŠ¨çš„ I/O å¤šè·¯å¤ç”¨æ¨¡å‹ï¼Œé€šè¿‡ epoll æˆ– select æ¥å¤„ç†å¹¶å‘è¯·æ±‚ï¼Œå‡å°‘äº†èµ„æºæ¶ˆè€—ã€‚</li>
</ul>
<h4 data-id="heading-2">3. <strong>Redis çš„å¸¸ç”¨æ•°æ®ç»“æ„</strong></h4>
<p>Redis æä¾›äº†å¤šç§å¼ºå¤§çš„æ•°æ®ç»“æ„ï¼Œé€‚åº”ä¸åŒåœºæ™¯çš„éœ€æ±‚ï¼Œä¸»è¦åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>å­—ç¬¦ä¸²ï¼ˆStringï¼‰</strong>ï¼šRedis æœ€åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥æ˜¯æ–‡æœ¬æˆ–æ•°å­—ï¼Œå¸¸ç”¨äºç¼“å­˜æ•°æ®ã€è®¡æ•°å™¨ç­‰ã€‚</li>
<li><strong>å“ˆå¸Œï¼ˆHashï¼‰</strong>ï¼šå“ˆå¸Œæ˜¯é”®å€¼å¯¹é›†åˆï¼Œé€‚ç”¨äºå­˜å‚¨å¯¹è±¡æ•°æ®ï¼ˆä¾‹å¦‚ç”¨æˆ·ä¿¡æ¯ï¼‰ã€‚å¯ä»¥å¿«é€Ÿè·å–æŸä¸ªå­—æ®µçš„å€¼ã€‚</li>
<li><strong>åˆ—è¡¨ï¼ˆListï¼‰</strong>ï¼šåˆ—è¡¨æ˜¯ä¸€ä¸ªæœ‰åºçš„å­—ç¬¦ä¸²é›†åˆï¼Œå¯ä»¥ç”¨ä½œé˜Ÿåˆ—ã€æ ˆç­‰ï¼Œæ”¯æŒä»ä¸¤ç«¯æ“ä½œæ•°æ®ï¼ˆå·¦æ¨å³å¼¹ç­‰ï¼‰ã€‚</li>
<li><strong>é›†åˆï¼ˆSetï¼‰</strong>ï¼šé›†åˆæ˜¯æ— åºçš„å­—ç¬¦ä¸²é›†åˆï¼Œä¸å…è®¸é‡å¤å…ƒç´ ï¼Œå¸¸ç”¨äºå­˜å‚¨ç”¨æˆ·æ ‡ç­¾ã€å»é‡ç­‰åœºæ™¯ã€‚</li>
<li><strong>æœ‰åºé›†åˆï¼ˆSorted Setï¼‰</strong>ï¼šæœ‰åºé›†åˆæ˜¯å¸¦æœ‰æƒé‡ï¼ˆåˆ†æ•°ï¼‰å€¼çš„é›†åˆï¼ŒæŒ‰åˆ†æ•°æ’åºï¼Œå¸¸ç”¨äºæ’è¡Œæ¦œã€æ’åç­‰åŠŸèƒ½ã€‚</li>
</ul>
<h4 data-id="heading-3">4. <strong>Redis çš„äº‹åŠ¡</strong><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d33405b92d041908b010f536b7123f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzYwX2dvX3BocA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763524501&amp;x-signature=8BtPLqyS6jiMrKxOszTqXyqXTIY%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</h4>
<p>Redis çš„äº‹åŠ¡å¹¶ä¸åƒä¼ ç»Ÿæ•°æ®åº“é‚£æ ·æ”¯æŒ ACID ç‰¹æ€§ï¼ˆåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§ï¼‰ï¼Œä½†å®ƒæä¾›äº†ä¸€äº›åŸºæœ¬çš„äº‹åŠ¡åŠŸèƒ½ã€‚</p>
<ul>
<li><strong>MULTIã€EXECã€DISCARDã€WATCH</strong>ï¼šRedis çš„äº‹åŠ¡æ˜¯é€šè¿‡ <code>MULTI</code> å’Œ <code>EXEC</code> å‘½ä»¤æ¥å®ç°çš„ï¼Œå¤šä¸ªå‘½ä»¤ä¼šä¸€èµ·æ‰§è¡Œï¼Œä¿è¯äº†åŸå­æ€§ã€‚äº‹åŠ¡ä¸­çš„å‘½ä»¤ä¼šæ’é˜Ÿæ‰§è¡Œï¼Œä½†äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸ä¼šè¢«å…¶ä»–å®¢æˆ·ç«¯æ‰“æ–­ã€‚</li>
<li><strong>WATCH</strong>ï¼šå¯ä»¥ç”¨äºä¹è§‚é”ï¼Œç›‘æ§æŸä¸ªé”®ï¼Œåœ¨æ‰§è¡Œäº‹åŠ¡ä¹‹å‰åˆ¤æ–­è¯¥é”®æ˜¯å¦è¢«ä¿®æ”¹ã€‚</li>
</ul>
<h4 data-id="heading-4">5. <strong>Redis ä¸»ä»å¤åˆ¶æ€ä¹ˆå®Œæˆçš„ï¼Ÿ</strong><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1601c8b36104003ba88d6d1080c6b38~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgMzYwX2dvX3BocA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763524501&amp;x-signature=fCfmHdnxp751sv7TETAqQpjxB48%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</h4>
<p>Redis ä¸»ä»å¤åˆ¶æ˜¯æŒ‡ä¸€ä¸ªä¸»èŠ‚ç‚¹ï¼ˆMasterï¼‰å°†æ•°æ®åŒæ­¥åˆ°å¤šä¸ªä»èŠ‚ç‚¹ï¼ˆSlaveï¼‰ï¼Œä»èŠ‚ç‚¹åªè´Ÿè´£è¯»å–æ•°æ®ï¼Œä¸»èŠ‚ç‚¹è´Ÿè´£å¤„ç†å†™è¯·æ±‚ã€‚</p>
<ul>
<li><strong>å¤åˆ¶æµç¨‹</strong>ï¼šå½“ä¸»èŠ‚ç‚¹çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šå°†å˜åŒ–çš„æ•°æ®åŒæ­¥åˆ°ä»èŠ‚ç‚¹ã€‚Redis ä½¿ç”¨å¼‚æ­¥å¤åˆ¶çš„æ–¹å¼ï¼Œå°†å†™å‘½ä»¤è½¬å‘åˆ°ä»èŠ‚ç‚¹è¿›è¡Œå¤åˆ¶ã€‚</li>
<li><strong>RDBå¿«ç…§ä¸AOFæ—¥å¿—</strong>ï¼šä¸ºäº†ä¿è¯ä¸»ä»æ•°æ®ä¸€è‡´æ€§ï¼ŒRedis ä¼šé€šè¿‡ RDB å¿«ç…§å’Œ AOFï¼ˆAppend Only Fileï¼‰æ—¥å¿—æ¥ä¿å­˜å’Œæ¢å¤æ•°æ®ã€‚</li>
<li><strong>å»¶è¿Ÿå’Œæ•…éšœæ¢å¤</strong>ï¼šRedis æ”¯æŒä¸»ä»å¤åˆ¶ä¸­çš„å»¶è¿Ÿç›‘æ§å’Œæ•…éšœæ¢å¤æœºåˆ¶ï¼Œç¡®ä¿ç³»ç»Ÿçš„é«˜å¯ç”¨æ€§ã€‚</li>
</ul>
<h4 data-id="heading-5">6. <strong>è·³è·ƒè¡¨ï¼ˆSkip Listï¼‰</strong></h4>
<p>è·³è·ƒè¡¨æ˜¯ä¸€ç§éšæœºåŒ–çš„æ•°æ®ç»“æ„ï¼Œå¸¸ç”¨äº Redis çš„æœ‰åºé›†åˆï¼ˆSorted Setï¼‰ã€‚å®ƒé€šè¿‡å¤šå±‚é“¾è¡¨çš„ç»“æ„ä¼˜åŒ–äº†æŸ¥è¯¢æ“ä½œï¼Œä½¿å¾—åœ¨ O(log N) æ—¶é—´å¤æ‚åº¦å†…èƒ½å¤Ÿå¿«é€Ÿåœ°æ‰¾åˆ°æŸä¸ªå…ƒç´ ã€‚</p>
<ul>
<li><strong>ç»“æ„ç‰¹ç‚¹</strong>ï¼šè·³è·ƒè¡¨é€šè¿‡åœ¨å¤šä¸ªå±‚æ¬¡ä¸Šç»´æŠ¤æŒ‡å‘åç»­å…ƒç´ çš„æŒ‡é’ˆï¼Œå‡å°‘äº†æŸ¥æ‰¾æ—¶çš„éå†æ¬¡æ•°ï¼Œæå‡äº†æŸ¥è¯¢æ•ˆç‡ã€‚</li>
<li><strong>ä¸å¹³è¡¡æ ‘å¯¹æ¯”</strong>ï¼šè·³è·ƒè¡¨ç›¸æ¯”äºçº¢é»‘æ ‘ã€AVL æ ‘ç­‰å¹³è¡¡æ ‘ï¼Œå…¶å®ç°æ›´ä¸ºç®€å•ï¼Œä¸”åŒæ ·èƒ½è¾¾åˆ°é«˜æ•ˆçš„æŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤æ“ä½œã€‚</li>
</ul>
<h4 data-id="heading-6">7. <strong>Redis çš„æ·˜æ±°æœºåˆ¶</strong></h4>
<p>å½“ Redis å†…å­˜è¾¾åˆ°æœ€å¤§é™åˆ¶æ—¶ï¼Œéœ€è¦é€šè¿‡æ·˜æ±°ç­–ç•¥æ¥ç§»é™¤éƒ¨åˆ†æ•°æ®ã€‚Redis æä¾›äº†å¤šç§å†…å­˜æ·˜æ±°ç­–ç•¥ï¼š</p>
<ul>
<li><strong>noeviction</strong>ï¼šè¾¾åˆ°æœ€å¤§å†…å­˜æ—¶ï¼Œè¿”å›é”™è¯¯ã€‚</li>
<li><strong>allkeys-lru</strong>ï¼šä»æ‰€æœ‰é”®ä¸­æŒ‰ç…§ LRUï¼ˆLeast Recently Usedï¼‰ç­–ç•¥æ·˜æ±°æ•°æ®ã€‚</li>
<li><strong>volatile-lru</strong>ï¼šä»…ä»è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ä¸­æŒ‰ç…§ LRU æ·˜æ±°æ•°æ®ã€‚</li>
<li><strong>allkeys-random</strong>ï¼šä»æ‰€æœ‰é”®ä¸­éšæœºæ·˜æ±°æ•°æ®ã€‚</li>
<li><strong>volatile-random</strong>ï¼šä»…ä»è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ä¸­éšæœºæ·˜æ±°æ•°æ®ã€‚</li>
<li><strong>volatile-ttl</strong>ï¼šä»è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ä¸­æ·˜æ±°æœ€æ¥è¿‘è¿‡æœŸçš„é”®ã€‚</li>
</ul>
<h4 data-id="heading-7">8. <strong>Redis åŸå­æ€§åŸç†</strong></h4>
<p>Redis çš„åŸå­æ€§ä¸»è¦æ˜¯é€šè¿‡ä»¥ä¸‹æœºåˆ¶æ¥ä¿è¯çš„ï¼š</p>
<ul>
<li><strong>å‘½ä»¤åŸå­æ€§</strong>ï¼šRedis æ¯æ¬¡æ‰§è¡Œä¸€ä¸ªå‘½ä»¤æ—¶ï¼Œéƒ½æ˜¯åŸå­çš„ï¼Œå³ä¸ä¼šè¢«å…¶ä»–å‘½ä»¤æ‰“æ–­ã€‚å³ä½¿æ˜¯äº‹åŠ¡ä¸­çš„å¤šä¸ªå‘½ä»¤ï¼Œä¹Ÿä¼šä¿è¯åŸå­æ€§ã€‚</li>
<li><strong>äº‹åŠ¡ä¸­çš„åŸå­æ€§</strong>ï¼šRedis ä½¿ç”¨ <code>MULTI</code> å’Œ <code>EXEC</code> å‘½ä»¤æ¥åŒ…è£¹å¤šä¸ªå‘½ä»¤ï¼Œä¿è¯äº‹åŠ¡ä¸­çš„å‘½ä»¤è¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œï¼Œä¸ä¼šè¢«å…¶ä»–å‘½ä»¤å¹²æ‰°ã€‚</li>
</ul>
<hr/>
<p>é€šè¿‡äº†è§£ Redis çš„å…³é”®çŸ¥è¯†ç‚¹ï¼Œé¢è¯•è€…å¯ä»¥æ›´å¥½åœ°ç†è§£ Redis çš„å·¥ä½œåŸç†å’Œåº”ç”¨åœºæ™¯ï¼Œä¸ºé¢è¯•åšå¥½å……åˆ†å‡†å¤‡ã€‚å¦‚æœèƒ½å¤Ÿæ·±å…¥æŒæ¡ Redis çš„åº•å±‚æœºåˆ¶ä¸æ•°æ®ç»“æ„ï¼Œå°†åœ¨å¤§å‚ç”µå•†å¹³å°çš„é¢è¯•ä¸­å æœ‰ä¼˜åŠ¿ã€‚</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GitHub å¼€æº AI å¥½ç©ç¥å™¨ï¼Œè‡ªåŠ¨è®°å½•ä½ çš„ä¸€å¤©ã€‚]]></title>    <link>https://juejin.cn/post/7571396053880340532</link>    <guid>https://juejin.cn/post/7571396053880340532</guid>    <pubDate>2025-11-12T06:40:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571396053880340532" data-draft-id="7571404524793659427" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GitHub å¼€æº AI å¥½ç©ç¥å™¨ï¼Œè‡ªåŠ¨è®°å½•ä½ çš„ä¸€å¤©ã€‚"/> <meta itemprop="keywords" content="GitHub,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-12T06:40:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é€›é€›GitHub"/> <meta itemprop="url" content="https://juejin.cn/user/1442202996186093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GitHub å¼€æº AI å¥½ç©ç¥å™¨ï¼Œè‡ªåŠ¨è®°å½•ä½ çš„ä¸€å¤©ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1442202996186093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é€›é€›GitHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T06:40:05.000Z" title="Wed Nov 12 2025 06:40:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘åœ¨é€› GitHub çš„æ—¶å€™ï¼Œå‘ç°äº†ä¸€ä¸ªåä¸ºÂ <strong>Dayflow</strong>Â çš„å¼€æºé¡¹ç›®ï¼Œå®ƒèƒ½å¤Ÿè‡ªåŠ¨è®°å½•ä½ çš„å±å¹•æ´»åŠ¨ï¼Œå¹¶ç”Ÿæˆæ¸…æ™°çš„æ—¶é—´è½´æŠ¥å‘Šã€‚</p>
<p>ä½œä¸ºä¸€ä¸ª macOS åº”ç”¨ï¼ŒDayflow é€šè¿‡è½»é‡çº§çš„å±å¹•å½•åˆ¶å’Œ AI åˆ†æï¼Œè®°å½•è¿™ä¸ªç”µè„‘ä¸€å¤©çš„å·¥ä½œä¸ä½¿ç”¨è½¨è¿¹ï¼Œä¸éœ€è¦æ‰‹åŠ¨è®°å½•ã€‚</p>
<p>ç›®å‰å·²ç»åœ¨ GitHub ä¸Šè·å¾— 4.3K çš„æ˜Ÿæ˜Ÿäº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/281b52b8998640c0ba7af45b1f94524c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763534404&amp;x-signature=ba1%2FeJ3ct7mXVWpZJe5cJAiEmRo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>èµ„æœ¬å®¶ç‹‚å–œï¼Ÿï¼Ÿï¼Ÿ</p>
<p>01</p>
<p><strong>å¼€æºé¡¹ç›®ç®€ä»‹</strong></p>
<p>Dayflow æ˜¯ä¸€æ¬¾åŸºäº SwiftUI å¼€å‘çš„åŸç”Ÿ macOS åº”ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf4b580d9a9942bfa25f61239e0e11bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763534404&amp;x-signature=D68AdKTLiUw4zFXO8OJGb%2FqTnTk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®‰è£…è¿™ä¸ªå¼€æºå·¥å…·åï¼Œå®ƒä»¥æ¯ç§’ 1 å¸§çš„é¢‘ç‡å½•åˆ¶å±å¹•ï¼Œæ¯ 15 åˆ†é’Ÿå°†æœ€è¿‘çš„å½•åˆ¶å†…å®¹å‘é€ç»™ AI è¿›è¡Œåˆ†æã€‚</p>
<p>AI ä¼šç”ŸæˆåŒ…å«æ´»åŠ¨æ‘˜è¦çš„æ—¶é—´è½´å¡ç‰‡ï¼Œæœ€ç»ˆä»¥å¯è§†åŒ–æ—¶é—´è½´çš„å½¢å¼å±•ç¤ºä½ çš„ä¸€å¤©ã€‚</p>
<p>æ•´ä¸ªå¤„ç†æµç¨‹åˆ†ä¸º<strong>æ•è·ã€åˆ†æã€ç”Ÿæˆã€å±•ç¤ºå’Œæ¸…ç†</strong>äº”ä¸ªé˜¶æ®µï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„è‡ªåŠ¨åŒ–æµæ°´çº¿ã€‚</p>
<p>å¯ä»¥å¸®åŠ©ä½ è¯†åˆ«å·¥ä½œä¸­çš„åˆ†å¿ƒæ—¶æ®µå’Œé«˜æ•ˆæ—¶æ®µï¼Œä¼˜åŒ–ä½ çš„å·¥ä½œèŠ‚å¥ï¼Œå¸®åŠ©ä½ è‡ªå¾‹ã€‚</p>
<p><strong>åˆ†å¿ƒé«˜äº®åŠŸèƒ½å¯ä»¥æ˜¾ç¤ºå“ªäº›æ´»åŠ¨å¯èƒ½æ‰“æ–­äº†ä¸“æ³¨çŠ¶æ€ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2cbe7e3209c45cfac35b18ed4bb9971~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763534404&amp;x-signature=cSEkFFbb7WOTnmCbIQmkBZ6bmu4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨ç››äº§ç‰›é©¬çš„å›½å®¶ï¼Œè¿™ä¸ªå¦¥å¦¥èµ„æœ¬å®¶çš„ç®¡ç†ç¥å™¨å‘€ã€‚</p>
<p>ä¸è¿‡ï¼Œä¸å€ŸåŠ© AI å¾ˆå¤šä¼ä¸šä¹Ÿå¯ä»¥é€šè¿‡å†…ç½‘æˆ–è€…åŠå…¬ OA è½¯ä»¶äº†è§£å‘˜å·¥çš„åŠ¨æ€ã€‚ä¸ç”¨å¤šæ­¤ä¸€ä¸¾ã€‚</p>
<h2 data-id="heading-0">02ã€å¼€æºé¡¹ç›®åˆè¡·æ˜¯å•¥å‘¢ï¼Ÿ</h2>
<p>å¼€å‘è€… @JerryZLiu å‘ç°ä¼ ç»Ÿçš„æ—¥å†å¹¶ä¸èƒ½çœŸå®åæ˜ ä»–æ˜¯å¦‚ä½•åº¦è¿‡ä¸€å¤©çš„ã€‚</p>
<p>å› ä¸ºæ—¥å†è®°å½•çš„æ˜¯ä»Šå¤©çš„è®¡åˆ’ï¼Œç”µè„‘å±å¹•æ´»åŠ¨æ‰å±•ç¤ºäº†å®é™…å¹²äº†å•¥ã€‚å› æ­¤ï¼Œå¯¹äºæ¯å¤©é¢å¯¹ç”µè„‘å±å¹•çš„äººï¼Œç”µè„‘<strong>å±å¹•æ‰èƒ½ååº”ä¸€å¤©æ—¶é—´æ¶ˆè€—çš„ç»ˆæçœŸç›¸</strong>ã€‚</p>
<p>Dayflow å°±æ˜¯æä¾›ä¸€ä¸ªå®¢è§‚ã€è‡ªåŠ¨ç”Ÿæˆçš„æ—¶é—´æ¶ˆè€—è®°å½•ï¼Œè€Œä¸æ˜¯ä¾èµ–ä¸»è§‚ã€é›¶æ•£çš„è®°å¿†æˆ–æ‰‹åŠ¨è¾“å…¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b745f90a8a64be59f8b093a02f73780~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763534404&amp;x-signature=dA55iG3Kxm6Nfku1cm1al1IQYEU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>DayflowÂ æä½èµ„æºå ç”¨ï¼Œ<strong>25MB åº”ç”¨ä½“ç§¯ï¼ŒCPU ä½¿ç”¨ç‡å°äº 1%ã€‚åŸºäº 1FPS è½»é‡å½•åˆ¶</strong>ã€‚</p>
<p>ä½¿ç”¨ Google Gemini API çš„äº‘ç«¯åˆ†æå’Œå®Œå…¨æœ¬åœ°çš„ Ollama/LM Studio æ–¹æ¡ˆã€‚å¯¹äºé€‰æ‹© Gemini çš„ç”¨æˆ·ï¼Œé¡¹ç›®æ–‡æ¡£è¿˜è¯¦ç»†è¯´æ˜äº†å¦‚ä½•é€šè¿‡å¯ç”¨äº‘è®¡è´¹æ¥é˜²æ­¢ Google å°†æ•°æ®ç”¨äºæ¨¡å‹è®­ç»ƒã€‚è€Œä¸”å¯ä»¥å¯å°†ä¸€å¤©å±å¹•æ´»åŠ¨ç”Ÿæˆå¿«é€Ÿåº¦çš„å›æ”¾è§†é¢‘ï¼Œ3 å¤©åè‡ªåŠ¨åˆ é™¤æ—§å½•åˆ¶æ–‡ä»¶ï¼Œé¿å…å­˜å‚¨å‹åŠ›ã€‚</p>
<p>åé¢ï¼Œè¿˜ä¼šæ¨å‡º<strong>æ¯æ—¥æ—¥å¿—åŠŸèƒ½ï¼Œ å›é¡¾ Dayflow æ•æ‰åˆ°çš„äº®ç‚¹ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd8d7dc5050a4023bd880fa4c9198a08~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763534404&amp;x-signature=72p%2FPVQT2VKL7kYO0Nml3LuHExY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åé¢è¿˜èƒ½åŸºäºä½ ä¸€å¤©çš„å±å¹•åŠ¨æ€ï¼Œç”Ÿæˆä¸€ä¸ªå¯è§†åŒ–æŠ¥è¡¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c6ece9b3bb941eca6647c13c4461c89~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763534404&amp;x-signature=sSK901QdEXbSvyxJS4Hlq8m2xww%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-1">03ã€å¦‚ä½•ä½¿ç”¨</h2>
<p><strong>ä½ å¯ä»¥å‰å¾€Â <strong>GitHub Â Release é¡µé¢</strong>è·å–æœ€æ–°çš„Â <code>Dayflow.dmgï¼Œç›´æ¥å®‰è£…å°±è¡Œäº†ã€‚</code></strong> <strong><code>å¯ä»¥è‡ªå·± clone ä¸€ä¸‹ï¼Œå®‰è£… Xcode 15+ åœ¨è¿è¡Œé…ç½®ä¸­æ·»åŠ  GEMINI_API_KEY ç¯å¢ƒå˜é‡ã€‚</code></strong> ä¹Ÿæ”¯æŒ ollama æœ¬åœ°æ¨¡å‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4aaf2675b085468fac4adef93caa2f60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763534404&amp;x-signature=I%2BoEux9ENt9f5UjkUua6V5MGkZA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é¦–æ¬¡ä½¿ç”¨åï¼Œå½•åˆ¶æ–‡ä»¶é»˜è®¤å­˜å‚¨åœ¨Â <code>~/Library/Application Support/Dayflow/</code>ç›®å½•ä¸‹ã€‚å¦‚éœ€é‡ç½®æ•°æ®ï¼Œåªéœ€é€€å‡ºåº”ç”¨å¹¶åˆ é™¤è¯¥æ–‡ä»¶å¤¹å³å¯ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">é¡¹ç›®åœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/JerryZLiu/Dayflow</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»â€œå®æ—¶åˆ†è´¦â€åˆ°â€œæ™ºèƒ½é—®æ•°â€ï¼šæ±‡ä»˜å¤©ä¸‹ä»¥â€œData Agentâ€é‡å¡‘æ”¯ä»˜ä¸šåŠ¡å†³ç­–æ•ˆç‡]]></title>    <link>https://juejin.cn/post/7571409339363786779</link>    <guid>https://juejin.cn/post/7571409339363786779</guid>    <pubDate>2025-11-12T06:40:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571409339363786779" data-draft-id="7571391088948494374" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»â€œå®æ—¶åˆ†è´¦â€åˆ°â€œæ™ºèƒ½é—®æ•°â€ï¼šæ±‡ä»˜å¤©ä¸‹ä»¥â€œData Agentâ€é‡å¡‘æ”¯ä»˜ä¸šåŠ¡å†³ç­–æ•ˆç‡"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2025-11-12T06:40:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­—èŠ‚è·³åŠ¨æ•°æ®å¹³å°"/> <meta itemprop="url" content="https://juejin.cn/user/2159881542179624"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»â€œå®æ—¶åˆ†è´¦â€åˆ°â€œæ™ºèƒ½é—®æ•°â€ï¼šæ±‡ä»˜å¤©ä¸‹ä»¥â€œData Agentâ€é‡å¡‘æ”¯ä»˜ä¸šåŠ¡å†³ç­–æ•ˆç‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2159881542179624/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­—èŠ‚è·³åŠ¨æ•°æ®å¹³å°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T06:40:23.000Z" title="Wed Nov 12 2025 06:40:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œä¸ºæŠ€æœ¯é©±åŠ¨çš„æ•°å­—åŒ–ä¼ä¸šï¼Œ<strong>æ±‡ä»˜å¤©ä¸‹è·µè¡Œâ€œæ•°å­—åŒ–+å›½é™…åŒ–â€æˆ˜ç•¥ï¼Œ</strong> ä¸ºå…¨çƒä¼ä¸šæä¾›æ”¯ä»˜æ”¶æ¬¾ã€è´¦æˆ·æœåŠ¡ã€èµ„é‡‘ç®¡ç†å’Œæ•°æ®é›†æˆè§£å†³æ–¹æ¡ˆï¼Œæ·±è€•å“ç‰Œè¿é”ã€æ•°å­—ç»æµã€è·¨å¢ƒå›½é™…ã€SaaS/è½¯ä»¶ç­‰è¡Œä¸šåœºæ™¯å’Œå¤šå…ƒèµ›é“ã€‚</p>
<p>éšç€ä¸šåŠ¡è§„æ¨¡æ‰©å¤§ï¼Œå…¬å¸æ¯æ—¥éœ€å¤„ç†å…¨æ¸ é“æµ·é‡äº¤æ˜“æ•°æ®ï¼Œå®æ—¶é£æ§çš„æ¯«ç§’çº§å“åº”ã€è·¨åœºæ™¯æ™ºèƒ½å¯¹è´¦çš„ç²¾å‡†é«˜æ•ˆã€å¤§ä¿ƒæœŸé—´çš„é«˜å¹¶å‘æ‰¿è½½ï¼Œå·²æˆä¸ºä¿éšœä¸šåŠ¡ç¨³å®šä¸æœåŠ¡å“è´¨çš„å…³é”®ã€‚</p>
<p>ä¸ºåº”å¯¹è¿™äº›æŒ‘æˆ˜ï¼Œ<strong>æ±‡ä»˜å¤©ä¸‹æ ¸å¿ƒçš„â€œæ–—æ‹±â€æ”¯ä»˜å¹³å°æŒç»­å‡çº§ï¼Œ</strong> è‡´åŠ›äºæ‰“ç ´æ•°æ®å­¤å²›ï¼Œæ”¯æ’‘é£æ§ã€è¿è¥ç­‰ç­–ç•¥çš„æ•æ·è¿­ä»£ï¼Œå¹¶æ»¡è¶³ä¸¥æ ¼çš„åˆè§„å®¡è®¡è¦æ±‚ã€‚</p>
<p>è¿™ä¸€è¿‡ç¨‹ä¾èµ–é¢å‘ä¸šåŠ¡æ•æ·çš„ç°ä»£æ•°æ®åŸºå»ºä¸æ™ºèƒ½åº”ç”¨ä½“ç³»ï¼Œå®æ—¶æ›´æ–°ã€æ¹–ä»“èåˆã€AIèµ‹èƒ½ä¸ç”Ÿæ€å¼€æ”¾æˆä¸ºç ´å±€é‡ç‚¹ã€‚<strong>æ±‡ä»˜å¤©ä¸‹é€šè¿‡ä¸<strong><strong>ç«å±±å¼•æ“</strong></strong>æŒç»­æ·±åŒ–åˆä½œï¼Œå…±åŒæ¨è¿›æ•°æ®åŸºç¡€è®¾æ–½å‡çº§ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae9c9620f4d34503958f778ab23acea7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763534422&amp;x-signature=pTkvaTj%2BhhVXCjNTQf%2FpWofQZhE%3D" alt="" loading="lazy"/></p>
<p>åœ¨æ•°æ®æ¶æ„å±‚é¢ï¼Œç«å±±å¼•æ“åŸºäº Flinkã€Paimon ä¸ ByteHouse æ„å»ºæ¹–ä»“ä¸€ä½“æ¶æ„ï¼Œ<strong>ä¸ºæ±‡ä»˜å¤©ä¸‹è®¾è®¡äº†ç»Ÿä¸€æ‰¿è½½äº¤æ˜“ã€å•†æˆ·ã€é£æ§ã€å¯¹è´¦ä¸ç»“ç®—ç­‰å¤šæºæ”¯ä»˜æ•°æ®çš„æ¶æ„ã€‚</strong></p>
<p>è¯¥æ¶æ„å…·å¤‡ç»Ÿä¸€æ‰¿è½½ã€é«˜è´¨é‡æ²»ç†ã€é«˜æ€§èƒ½åˆ†æå’Œè¿‘å®æ—¶æ±‡èšç­‰èƒ½åŠ›ï¼Œä¸ºä¸šåŠ¡å–æ•°ã€çµæ´»æŸ¥è¯¢ä¸ä¸šåŠ¡å½’å› æä¾›ç¨³å®šå¯é çš„æ•°æ®åº•åº§ã€‚</p>
<p>åœ¨å®æ—¶åˆ†è´¦åœºæ™¯ä¸­ï¼Œé€šè¿‡ Flink å®æ—¶è®¢é˜…å’Œæ¶ˆè´¹å…³ç³»å‹æ•°æ®åº“ï¼ˆRDSï¼‰ï¼Œç³»ç»Ÿå®ç°æ•°æ®ä»“åº“çš„å®æ—¶é‡‡é›†ä¸åˆ†å±‚åŠ å·¥ï¼Œç«¯åˆ°ç«¯å»¶è¿Ÿæ§åˆ¶åœ¨ç§’çº§ï¼Œä¸ºå¤æ‚åˆ†è´¦ä¸šåŠ¡æä¾›åº•å±‚æ”¯æŒã€‚</p>
<p>å€ŸåŠ©æµæ‰¹ä¸€ä½“å¤„ç†èƒ½åŠ›ï¼Œå¹³å°å¯é€ç¬”å®Œæˆå®æ—¶åˆ†è´¦ï¼Œå¹¶é€šè¿‡æ•°ä»“å®æ—¶åŒæ­¥æœºåˆ¶ï¼Œä¿éšœèµ„é‡‘æµä¸ä¿¡æ¯æµçš„é«˜åº¦ä¸€è‡´ï¼Œé‡å¡‘å‚ç›´è¡Œä¸šçš„èµ„é‡‘ç»“ç®—æµç¨‹ã€‚</p>
<p>æ­¤å¤–ï¼ŒFlink ä¸ Paimon é€šè¿‡â€œå®æ—¶å†™å…¥-å¢é‡æ›´æ–°-æ¹–å†…ç»Ÿä¸€å­˜å‚¨â€çš„é—­ç¯è®¾è®¡ï¼Œæœ‰æ•ˆåº”å¯¹ä¼ ç»Ÿæ¶æ„ä¸­è®¡ç®—å»¶è¿Ÿä¸å­˜å‚¨å†—ä½™é—®é¢˜ï¼Œå°†æ•°æ®å»¶è¿Ÿä»å¤©çº§ç¼©çŸ­è‡³åˆ†é’Ÿçº§ã€‚</p>
<p>è¯¥æ–¹æ¡ˆä¸ä»…èƒ½é«˜æ•ˆå¤„ç†é•¿å°¾æ•°æ®æ›´æ–°ï¼Œè¿˜æ”¯æŒå®æ—¶é£æ§ä¸è¥é”€æ•ˆæœæ´å¯Ÿï¼Œæ¨åŠ¨ä¸šåŠ¡å†³ç­–ä»äº‹åå›æº¯å‘äº‹ä¸­å¹²é¢„è½¬å˜ï¼Œè¿›ä¸€æ­¥èµ‹èƒ½å®æ—¶æ”¯ä»˜ç›‘æ§ä¸å¼‚å¸¸å‘Šè­¦ã€å•†æˆ·å®æ—¶æ´å¯Ÿä¸åˆ†å±‚è¿è¥ã€è¥é”€æ•ˆæœå®æ—¶å½’å› ç­‰åˆ›æ–°åœºæ™¯ã€‚</p>
<p><strong>æ±‡ä»˜å¤©ä¸‹æŠ€æœ¯è´Ÿè´£äººè¯„ä»·ç§°ï¼š</strong> â€œByteHouse çš„æ¹–ä»“ä¸€ä½“æ¶æ„ä¸Flinkçš„æµæ‰¹ä¸€ä½“èƒ½åŠ›ï¼Œåœ¨æŠ€æœ¯å‰ç»æ€§ä¸ä¸šåŠ¡å®ç”¨æ€§é—´å–å¾—è‰¯å¥½å¹³è¡¡ã€‚è¯¥æ–¹æ¡ˆé€šè¿‡ä¸€ä½“åŒ–è®¾è®¡ç®€åŒ–äº†æ•°æ®æ¶æ„ï¼Œé™ä½è¿ç»´å¤æ‚åº¦ï¼›å…¶å®æ—¶å¤„ç†èƒ½åŠ›æ˜¾è‘—åŠ é€Ÿæ•°æ®ä»·å€¼é‡Šæ”¾ï¼Œå¹¶é€šè¿‡æ·±åº¦å·¥ç¨‹ä¼˜åŒ–ï¼Œå®ç°é«˜æ€§èƒ½ä¸æˆæœ¬æ•ˆç›Šçš„æœ€ä½³å¹³è¡¡ã€‚â€</p>
<p><strong>åœ¨ä¸šåŠ¡åº”ç”¨å±‚é¢ï¼Œæ±‡ä»˜å¤©ä¸‹ä¾æ‰˜ç«å±±å¼•æ“ Data Agent çš„â€œæ™ºèƒ½é—®æ•°â€åŠŸèƒ½ï¼Œ</strong> å¯ä»¥å°†è‡ªç„¶è¯­è¨€æŸ¥è¯¢ä¸å½’å› åˆ†æèå…¥æ—¥å¸¸ç®¡ç†å†³ç­–ä¸è¿è¥æµç¨‹ï¼Œæ„å»ºä»æ•°æ®æ²‰æ·€ã€æŸ¥è¯¢æ´å¯Ÿåˆ°ä¸šåŠ¡åé¦ˆçš„é—­ç¯ã€‚</p>
<p>è¯¥å¹³å°æ”¯æŒç®¡ç†äººå‘˜é€šè¿‡è‡ªç„¶è¯­è¨€ç›´æ¥å‘ Data Agent æé—®ï¼Œå¦‚â€œä¸Šä¸ªæœˆå„äº‹ä¸šéƒ¨çš„ä¸šç»©å¦‚ä½•ï¼Ÿâ€ï¼Œç³»ç»Ÿè‡ªåŠ¨è½¬åŒ–ä¸ºæ•°æ®æŸ¥è¯¢ä¸æ¯”å¯¹æŒ‡ä»¤ï¼Œå¹¶æ”¯æŒå¤šè½®äº¤äº’è¿½é—®ã€‚åŒæ—¶ï¼Œå¹³å°æä¾›ç»´åº¦é’»å–ä¸å·®å¼‚å½’å› åŠŸèƒ½ï¼Œæ”¯æŒæŒ‰æ—¥æœŸã€ä¸šåŠ¡ã€éƒ¨é—¨ç­‰å…³é”®ç»´åº¦ä¸€é”®ä¸‹é’»ï¼Œå¿«é€Ÿå®šä½å·®å¼‚æ ¹æºï¼Œæ˜ç¡®â€œå·®äº†å¤šå°‘ã€ä¸ºä»€ä¹ˆå·®â€ã€‚</p>
<p>ç«å±±å¼•æ“ä¾æ‰˜ Data+AI äº§å“åŠè§£å†³æ–¹æ¡ˆä½“ç³»åŠåœ¨å­—èŠ‚è·³åŠ¨å†…å¤–éƒ¨çš„ä¸šåŠ¡å®è·µï¼Œä¸ºæ±‡ä»˜å¤©ä¸‹æä¾›ç¬¬ä¸‰æ–¹æ”¯ä»˜ä¸å•†æˆ·ç»è¥çš„ä¸€ä½“åŒ–èƒ½åŠ›ï¼Œä»¥æ•°æ®é©±åŠ¨è¿è¥åŠ é€Ÿå…¨åŸŸè·å®¢ä¸å¢é•¿ï¼Œä»¥ AI èµ‹èƒ½å®ç°äº¤æ˜“çº§æ™ºèƒ½é£æ§ä¸åˆè§„ååŒï¼Œä»¥äº‘åŸç”Ÿæ•æ·æ”¯æ’‘å¼¹æ€§æ‰©å±•ä¸æˆæœ¬ä¼˜åŒ–ï¼Œæ„ç­‘éšç§åˆè§„çš„ç¨³å¥åº•åº§ï¼ŒåŠ©åŠ›å¼€æ”¾å¹³å°ä¸ç”Ÿæ€å…±èµ¢ã€‚</p>
<p>ç›®å‰ï¼Œç«å±±å¼•æ“æ•°æ™ºå¹³å°åŒ…å« Data Agent åŠå¤šæ¨¡æ€æ•°æ®æ¹–è§£å†³æ–¹æ¡ˆçš„ Data+AI æ ¸å¿ƒæ–¹æ¡ˆå·²åœ¨å¤šå®¶ä¼ä¸šè½åœ°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å›¾ä¹¦é¦†çš„"å¤‡ä»½ä¹¦åº“"ä¸"æ—¶å…‰æœº"ï¼šMongoDBå‰¯æœ¬é›†æ·±åº¦æ­ç§˜]]></title>    <link>https://juejin.cn/post/7571396053880078388</link>    <guid>https://juejin.cn/post/7571396053880078388</guid>    <pubDate>2025-11-12T06:16:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571396053880078388" data-draft-id="7571444391809351715" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å›¾ä¹¦é¦†çš„&quot;å¤‡ä»½ä¹¦åº“&quot;ä¸&quot;æ—¶å…‰æœº&quot;ï¼šMongoDBå‰¯æœ¬é›†æ·±åº¦æ­ç§˜"/> <meta itemprop="keywords" content="MongoDB,æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-11-12T06:16:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="think2cat"/> <meta itemprop="url" content="https://juejin.cn/user/2418581311338493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å›¾ä¹¦é¦†çš„"å¤‡ä»½ä¹¦åº“"ä¸"æ—¶å…‰æœº"ï¼šMongoDBå‰¯æœ¬é›†æ·±åº¦æ­ç§˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2418581311338493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    think2cat
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T06:16:43.000Z" title="Wed Nov 12 2025 06:16:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p><strong>å…¬ä¼—å·ï¼šå…­å—å‰ç«¯ç‹—</strong></p>
<p>è½¬è½½è¯·ä¿æŒå®Œæ•´æ€§ï¼Œæ³¨æ˜æ¥æº <a href="https://link.juejin.cn?target=https%3A%2F%2F21ido.com%2FIT%2FMongoDB%25E5%2589%25AF%25E6%259C%25AC%25E9%259B%2586%25E6%25B7%25B1%25E5%25BA%25A6%25E6%258F%25AD%25E7%25A7%2598.html" target="_blank" title="https://21ido.com/IT/MongoDB%E5%89%AF%E6%9C%AC%E9%9B%86%E6%B7%B1%E5%BA%A6%E6%8F%AD%E7%A7%98.html" ref="nofollow noopener noreferrer">çŒ«å¤§å”æŠ€æœ¯åšå®¢</a></p>
<p>å½“ä¸»å›¾ä¹¦é¦†çªå‘ç«ç¾ï¼Œåˆ†é¦†å¦‚ä½•ç¬é—´æ¥ç®¡æœåŠ¡ï¼Ÿè¿™èƒŒåæ˜¯MongoDBå‰¯æœ¬é›†çš„ç²¾å¦™è®¾è®¡</p>
<h2 data-id="heading-0">å¼€ç¯‡ï¼šä¸€åœºçªå‘å±æœº</h2>
<p><strong>å‘¨æ—¥æ—©ä¸Š9ç‚¹ï¼ŒæŸå¸‚å›¾ä¹¦é¦†çªå‘ç«ç¾è­¦æŠ¥ï¼</strong></p>
<p>ä¸»é¦†è¢«è¿«å…³é—­ï¼Œä½†è¯»è€…ä»¬æƒŠè®¶åœ°å‘ç°ï¼š</p>
<ul>
<li>å€Ÿä¹¦æœåŠ¡<strong>å‡ ä¹æ²¡æœ‰ä¸­æ–­</strong></li>
<li>æ‰€æœ‰å€Ÿé˜…è®°å½•<strong>å®Œæ•´æ— ç¼º</strong></li>
<li>ç”šè‡³èƒ½æŸ¥åˆ°<strong>ç«ç¾å‰5åˆ†é’Ÿçš„å€Ÿä¹¦ä¿¡æ¯</strong></li>
</ul>
<p>è¿™ä¸€åˆ‡çš„å¥¥ç§˜ï¼Œå°±åœ¨äºå›¾ä¹¦é¦†çš„ <strong>"å‰¯æœ¬é›†"æ¶æ„</strong>â€”â€”ä¸€ä¸ªä¸»é¦† + ä¸¤ä¸ªå¤‡ç”¨åˆ†é¦†çš„ååŒç³»ç»Ÿã€‚</p>
<h2 data-id="heading-1">æ ¸å¿ƒæ¯”å–»ï¼šä¸‰é¦†ååŒçš„æ™ºæ…§</h2>
<h3 data-id="heading-2">ğŸ›ï¸ ä¸»å›¾ä¹¦é¦†ï¼ˆPrimaryï¼‰ - æ ¸å¿ƒæœåŠ¡èŠ‚ç‚¹</h3>
<ul>
<li>å¤„ç†æ‰€æœ‰å€Ÿä¹¦ã€è¿˜ä¹¦ ï¼ˆ<strong>è¯»ã€å†™æ“ä½œ</strong>ï¼‰</li>
<li>æ•°æ®<strong>å®æ—¶åŒæ­¥</strong>åˆ°å„ä¸ªåˆ†é¦†</li>
<li>å°±åƒMongoDBçš„PrimaryèŠ‚ç‚¹</li>
</ul>
<h3 data-id="heading-3">ğŸ“š ä¸œåŒºåˆ†é¦†ï¼ˆSecondaryï¼‰ - çƒ­å¤‡èŠ‚ç‚¹</h3>
<ul>
<li><strong>å®Œæ•´å¤‡ä»½</strong>æ‰€æœ‰ä¹¦ç±å’Œæ•°æ®</li>
<li>å¯æä¾›è¯»ä¹¦æœåŠ¡ï¼ˆ<em>è¯»æ“ä½œ</em>ï¼‰</li>
<li>ä¸»é¦†æ•…éšœæ—¶å¯<strong>ç«é€‰æˆä¸ºæ–°ä¸»é¦†</strong></li>
</ul>
<h3 data-id="heading-4">ğŸ“š è¥¿åŒºåˆ†é¦†ï¼ˆSecondaryï¼‰ - åŒæ ·å®Œæ•´çš„å¤‡ä»½èŠ‚ç‚¹</h3>
<ul>
<li><strong>åŒæ ·å®Œæ•´å¤‡ä»½</strong>æ‰€æœ‰ä¹¦ç±å’Œæ•°æ®</li>
<li>å¯æä¾›è¯»ä¹¦æœåŠ¡ï¼ˆ<em>è¯»æ“ä½œ</em>ï¼‰</li>
<li>ä¸»é¦†æ•…éšœæ—¶å¯<strong>å‚ä¸é€‰ä¸¾å’Œæ¥ç®¡</strong></li>
</ul>
<h3 data-id="heading-5">ğŸ’¡ åº”æ€¥ä¸­å¿ƒï¼ˆArbiterï¼‰</h3>
<ul>
<li>æ— å­˜å‚¨ä¹¦ç±å’Œæ—¥å¿—æ•°æ®</li>
<li>åªå…·æœ‰æŠ•ç¥¨é€‰ä¸¾ä½œç”¨</li>
</ul>
<h2 data-id="heading-6">é‡æ–°ç†è§£ï¼šä»€ä¹ˆæ˜¯çœŸæ­£çš„ã€Œå‰¯æœ¬ã€</h2>
<p>åœ¨MongoDBå‰¯æœ¬é›†ä¸­ï¼Œ<strong>æ¯ä¸ªæ•°æ®èŠ‚ç‚¹éƒ½å¿…é¡»æ˜¯å®Œæ•´çš„å‰¯æœ¬</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ­£ç¡®çš„å‰¯æœ¬é›†é…ç½®ï¼šæ‰€æœ‰æ•°æ®èŠ‚ç‚¹éƒ½æœ‰å®Œæ•´æ•°æ®</span>
{
  <span class="hljs-attr">_id</span>: <span class="hljs-string">"libraryCluster"</span>,
  <span class="hljs-attr">members</span>: [
    {<span class="hljs-attr">_id</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">host</span>: <span class="hljs-string">"main-library:27017"</span>},  <span class="hljs-comment">// ä¸»èŠ‚ç‚¹ - å®Œæ•´æ•°æ®</span>
    {<span class="hljs-attr">_id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">host</span>: <span class="hljs-string">"east-branch:27017"</span>},   <span class="hljs-comment">// ä»èŠ‚ç‚¹ - å®Œæ•´æ•°æ®å‰¯æœ¬</span>
    {<span class="hljs-attr">_id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">host</span>: <span class="hljs-string">"west-branch:27017"</span>}    <span class="hljs-comment">// ä»èŠ‚ç‚¹ - å®Œæ•´æ•°æ®å‰¯æœ¬</span>
  ]
}
</code></pre>
<h2 data-id="heading-7">ç‰¹æ®ŠèŠ‚ç‚¹ç±»å‹</h2>
<h3 data-id="heading-8">1. HiddenèŠ‚ç‚¹ï¼ˆå†…éƒ¨æ¡£æ¡ˆåˆ†é¦†ï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript">{
  <span class="hljs-attr">_id</span>: <span class="hljs-number">2</span>,
  <span class="hljs-attr">host</span>: <span class="hljs-string">"west-branch:27019"</span>,
  <span class="hljs-attr">hidden</span>: <span class="hljs-literal">true</span>,    <span class="hljs-comment">// éšè—èŠ‚ç‚¹ï¼šä¸æœåŠ¡è¯»è¯·æ±‚</span>
  <span class="hljs-attr">priority</span>: <span class="hljs-number">0</span>,     <span class="hljs-comment">// ä¸å‚ä¸é€‰ä¸¾</span>
  <span class="hljs-comment">// ä½†ä»ç„¶å­˜å‚¨å®Œæ•´æ•°æ®å‰¯æœ¬ï¼</span>
}
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼šæœ‰å®Œæ•´æ•°æ®ï¼Œä½†å¯¹åº”ç”¨ä¸å¯è§ï¼Œä¸“ç”¨äºå¤‡ä»½æˆ–æŠ¥è¡¨ã€‚</p>
<h3 data-id="heading-9">2. DelayedèŠ‚ç‚¹ï¼ˆæ—¶å…‰èƒ¶å›Šåˆ†é¦†ï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript">{
  <span class="hljs-attr">_id</span>: <span class="hljs-number">2</span>,
  <span class="hljs-attr">host</span>: <span class="hljs-string">"west-branch:27019"</span>,
  <span class="hljs-attr">slaveDelay</span>: <span class="hljs-number">3600</span>,  <span class="hljs-comment">// æ•°æ®å»¶è¿Ÿ1å°æ—¶</span>
  <span class="hljs-attr">priority</span>: <span class="hljs-number">0</span>,       <span class="hljs-comment">// ä¸å‚ä¸é€‰ä¸¾</span>
  <span class="hljs-comment">// å­˜å‚¨å®Œæ•´æ•°æ®ï¼Œä½†æœ‰å»¶è¿Ÿï¼</span>
}
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼šæ•°æ®åŒæ­¥æœ‰æ„è¯†å»¶è¿Ÿï¼Œç”¨äºè¯¯æ“ä½œæ¢å¤ã€‚</p>
<h3 data-id="heading-10">3. ArbiterèŠ‚ç‚¹ï¼ˆåº”æ€¥ä¸­å¿ƒï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript">{
  <span class="hljs-attr">_id</span>: <span class="hljs-number">2</span>, 
  <span class="hljs-attr">host</span>: <span class="hljs-string">"arbiter-server:27017"</span>,
  <span class="hljs-attr">arbiterOnly</span>: <span class="hljs-literal">true</span>  <span class="hljs-comment">// åªæŠ•ç¥¨ï¼Œä¸å­˜å‚¨æ•°æ®ï¼</span>
}
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼šè¿™æ˜¯<strong>å”¯ä¸€ä¸å­˜å‚¨æ•°æ®</strong>çš„èŠ‚ç‚¹ç±»å‹ï¼Œåªè´Ÿè´£é€‰ä¸¾æŠ•ç¥¨ã€‚
æœåŠ¡ä¸­å¿ƒå¯ä»¥æ˜¯ç‹¬ç«‹çš„åœºé¦†ï¼Œä¹Ÿå¯ä»¥åœ¨åˆ†é¦†é‡Œï¼Œå½“ä¸»é¦†+åˆ†é¦†çš„æ•°é‡ä¸ºå¶æ•°æ—¶ï¼Œå»ºè®®å¢åŠ <em>æœåŠ¡ä¸­å¿ƒ</em>èŠ‚ç‚¹ç”¨äºæŠ•ç¥¨ã€‚
å› ä¸ºåœ¨å¶æ•°è¿›è¡ŒæŠ•ç¥¨æ—¶ï¼Œå®¹æ˜“å‡ºç°1:1ï¼Œ 2:2 è¿™ç§å¹³æ‰‹çš„å±€é¢ï¼Œå¯¼è‡´æ— æ³•ç¡®å®šè°æ˜¯ä¸»é¦†ï¼Œæ­¤æ—¶å¢åŠ <em>åº”æ€¥ä¸­å¿ƒ</em>æ¥æŠ•ç¥¨ï¼Œæ–¹å¯æ‰“ç ´å°´å°¬å±€é¢ï¼</p>
<h2 data-id="heading-11">æ•°æ®åŒæ­¥æœºåˆ¶ï¼šå›¾ä¹¦å˜æ›´æ—¥å¿—çš„æ­£ç¡®ç†è§£</h2>
<p><strong>oplogï¼ˆæ“ä½œæ—¥å¿—ï¼‰</strong> å°±åƒæ˜¯å›¾ä¹¦é¦†çš„<strong>å˜æ›´ç™»è®°ç°¿</strong>ï¼š</p>
<ul>
<li>ä¸»å›¾ä¹¦é¦†çš„æ¯é¡¹æ“ä½œéƒ½è®°å½•åœ¨ç™»è®°ç°¿ä¸Š</li>
<li>å„ä¸ªåˆ†é¦†<strong>æŠ„å†™</strong>è¿™äº›å˜æ›´è®°å½•</li>
<li>ä½†åˆ†é¦†ä¸ä»…æŠ„è®°å½•ï¼Œè¿˜è¦<strong>å®é™…æ‰§è¡Œ</strong>è¿™äº›å˜æ›´ï¼ˆä¸Šæ¶æ–°ä¹¦ã€ä¸‹æ¶æ—§ä¹¦ç­‰ï¼‰</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// oplogç¤ºä¾‹ï¼šè®°å½•ä½†ä¸å­˜å‚¨æ•°æ®</span>
{
  <span class="hljs-attr">ts</span>: <span class="hljs-title class_">Timestamp</span>(<span class="hljs-number">1627891234</span>, <span class="hljs-number">1</span>),  <span class="hljs-comment">// æ“ä½œæ—¶é—´æˆ³</span>
  <span class="hljs-attr">op</span>: <span class="hljs-string">"i"</span>,                       <span class="hljs-comment">// æ“ä½œç±»å‹ï¼ši=æ’å…¥</span>
  <span class="hljs-attr">ns</span>: <span class="hljs-string">"library.books"</span>,           <span class="hljs-comment">// é›†åˆå</span>
  <span class="hljs-attr">o</span>: { 
    <span class="hljs-attr">_id</span>: <span class="hljs-title class_">ObjectId</span>(<span class="hljs-string">"..."</span>),
    <span class="hljs-attr">title</span>: <span class="hljs-string">"ä¸‰ä½“"</span>, 
    <span class="hljs-attr">status</span>: <span class="hljs-string">"åœ¨æ¶"</span>  <span class="hljs-comment">// å®é™…ä¹¦ç±æ•°æ®</span>
  }
}
</code></pre>
<p><strong>å…³é”®åŒºåˆ«</strong>ï¼š</p>
<ul>
<li>âŒ é”™è¯¯ç†è§£ï¼šåˆ†é¦†åªä¿å­˜ç™»è®°ç°¿ï¼ˆoplogï¼‰</li>
<li>âœ… æ­£ç¡®ç†è§£ï¼šåˆ†é¦†æ ¹æ®ç™»è®°ç°¿æ›´æ–°è‡ªå·±çš„å®é™…è—ä¹¦ï¼ˆå®Œæ•´æ•°æ®ï¼‰</li>
</ul>
<h2 data-id="heading-12">å‰¯æœ¬é›†èŠ‚ç‚¹çš„å®Œæ•´åˆ†ç±»</h2>





















































<table><thead><tr><th>èŠ‚ç‚¹ç±»å‹</th><th>æ•°æ®å­˜å‚¨</th><th>è¯»æœåŠ¡</th><th>å†™æœåŠ¡</th><th>é€‰ä¸¾æƒ</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Primary</strong></td><td>å®Œæ•´æ•°æ®</td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>ä¸»æœåŠ¡èŠ‚ç‚¹</td></tr><tr><td><strong>Secondary</strong></td><td>å®Œæ•´æ•°æ®</td><td>âœ…</td><td>âŒ</td><td>âœ…</td><td>çƒ­å¤‡èŠ‚ç‚¹</td></tr><tr><td><strong>Hidden</strong></td><td>å®Œæ•´æ•°æ®</td><td>âŒ</td><td>âŒ</td><td>å¯é…ç½®</td><td>ä¸“ç”¨å¤‡ä»½</td></tr><tr><td><strong>Delayed</strong></td><td>å®Œæ•´æ•°æ®</td><td>å¯é…ç½®</td><td>âŒ</td><td>é€šå¸¸æ— </td><td>æ•°æ®æ¢å¤</td></tr><tr><td><strong>Arbiter</strong></td><td><strong>æ— æ•°æ®</strong></td><td>âŒ</td><td>âŒ</td><td>âœ…</td><td>çº¯æŠ•ç¥¨</td></tr></tbody></table>
<h2 data-id="heading-13">æ€»ç»“ï¼šå‰¯æœ¬é›†çš„æ­£ç¡®ç†è§£</h2>
<p><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼šåœ¨MongoDBå‰¯æœ¬é›†ä¸­ï¼Œé™¤äº†Arbiterå¤–ï¼Œ<strong>æ‰€æœ‰èŠ‚ç‚¹éƒ½å­˜å‚¨å®Œæ•´æ•°æ®å‰¯æœ¬</strong>ã€‚</p>
<p><strong>è®¾è®¡å¯ç¤º</strong>ï¼š</p>
<ol>
<li>å‰¯æœ¬é›†çš„æ ¸å¿ƒä»·å€¼æ˜¯<strong>æ•°æ®å†—ä½™</strong>ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯å®Œæ•´å¤‡ä»½</li>
<li>Arbiteræ˜¯ç‰¹ä¾‹ï¼Œç”¨äºè§£å†³æŠ•ç¥¨é—®é¢˜è€Œéæ•°æ®å­˜å‚¨</li>
<li>æ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©åˆé€‚çš„èŠ‚ç‚¹ç±»å‹å’Œé…ç½®</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript æ‰§è¡ŒçŠ¶æ€å…¨æ™¯å›¾ï¼šä»è°ƒç”¨æ ˆåˆ°äº‹ä»¶å¾ªç¯ï¼Œæ·±å…¥ç†è§£å¼‚æ­¥æœºåˆ¶]]></title>    <link>https://juejin.cn/post/7571379549370990643</link>    <guid>https://juejin.cn/post/7571379549370990643</guid>    <pubDate>2025-11-12T06:10:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571379549370990643" data-draft-id="7571379549370925107" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript æ‰§è¡ŒçŠ¶æ€å…¨æ™¯å›¾ï¼šä»è°ƒç”¨æ ˆåˆ°äº‹ä»¶å¾ªç¯ï¼Œæ·±å…¥ç†è§£å¼‚æ­¥æœºåˆ¶"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2025-11-12T06:10:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‰å®‡å¤•è½"/> <meta itemprop="url" content="https://juejin.cn/user/3323164053734988"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript æ‰§è¡ŒçŠ¶æ€å…¨æ™¯å›¾ï¼šä»è°ƒç”¨æ ˆåˆ°äº‹ä»¶å¾ªç¯ï¼Œæ·±å…¥ç†è§£å¼‚æ­¥æœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3323164053734988/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‰å®‡å¤•è½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T06:10:12.000Z" title="Wed Nov 12 2025 06:10:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æ¯å¤©éƒ½åœ¨å’Œ <code>setTimeout</code>ã€<code>Promise</code>ã€<code>fetch</code> ç­‰å¼‚æ­¥ API æ‰“äº¤é“ã€‚ä½†ä½ æ˜¯å¦çœŸæ­£ç†è§£å®ƒä»¬èƒŒåçš„æ‰§è¡Œæœºåˆ¶ï¼Ÿä¸ºä»€ä¹ˆ <code>console.log('End')</code> æ€»æ˜¯åœ¨ <code>setTimeout</code> å›è°ƒä¹‹å‰æ‰“å°ï¼Ÿä¸ºä»€ä¹ˆ <code>var</code> å’Œ <code>let</code> åœ¨å¾ªç¯ä¸­çš„è¡Œä¸ºå·®å¼‚å¦‚æ­¤ä¹‹å¤§ï¼Ÿ</p>
<p>æœ¬æ–‡å°†ç»“åˆ <strong>JavaScript æ‰§è¡Œä¸Šä¸‹æ–‡ã€è°ƒç”¨æ ˆã€ä»»åŠ¡é˜Ÿåˆ—ä¸äº‹ä»¶å¾ªç¯</strong> çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼Œé€šè¿‡ä¸¤ä¸ªå¯¹æ¯”æ¡ˆä¾‹ï¼ˆ<code>let</code> vs <code>var</code>ï¼‰æ·±å…¥å‰–æå¼‚æ­¥æ‰§è¡Œçš„åº•å±‚é€»è¾‘ï¼Œå¹¶è¾…ä»¥å¯è§†åŒ–æµç¨‹è¯´æ˜ï¼Œå¸®åŠ©ä½ æ„å»ºæ¸…æ™°çš„æ‰§è¡Œæ¨¡å‹ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€æ ¸å¿ƒæ¦‚å¿µé€Ÿè§ˆ</h2>
<p>åœ¨è¿›å…¥æ¡ˆä¾‹å‰ï¼Œå…ˆå¿«é€Ÿå›é¡¾å››ä¸ªå…³é”®ç»„ä»¶ï¼š</p>






























<table><thead><tr><th>æ¦‚å¿µ</th><th>ä½œç”¨</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td><strong>æ‰§è¡Œä¸Šä¸‹æ–‡</strong>ï¼ˆExecution Contextï¼‰</td><td>ä»£ç æ‰§è¡Œçš„ç¯å¢ƒå®¹å™¨</td><td>åŒ…å«å˜é‡ã€thisã€ä½œç”¨åŸŸé“¾ï¼›åˆ†å…¨å±€ã€å‡½æ•°ã€å—çº§ï¼ˆES6+ï¼‰</td></tr><tr><td><strong>è°ƒç”¨æ ˆ</strong>ï¼ˆCall Stackï¼‰</td><td>ç®¡ç†æ‰§è¡Œä¸Šä¸‹æ–‡çš„ LIFO æ ˆ</td><td>å‡½æ•°è°ƒç”¨å…¥æ ˆï¼Œæ‰§è¡Œå®Œå‡ºæ ˆ</td></tr><tr><td><strong>ä»»åŠ¡é˜Ÿåˆ—</strong>ï¼ˆTask Queueï¼‰</td><td>å­˜æ”¾å¼‚æ­¥å›è°ƒçš„ FIFO é˜Ÿåˆ—</td><td>æ¥æºï¼š<code>setTimeout</code>ã€DOM äº‹ä»¶ã€I/O ç­‰</td></tr><tr><td><strong>äº‹ä»¶å¾ªç¯</strong>ï¼ˆEvent Loopï¼‰</td><td>åè°ƒè°ƒç”¨æ ˆä¸ä»»åŠ¡é˜Ÿåˆ—çš„è°ƒåº¦å™¨</td><td>è°ƒç”¨æ ˆç©ºé—²æ—¶ï¼Œä»é˜Ÿåˆ—å–ä»»åŠ¡å‹å…¥æ ˆæ‰§è¡Œ</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>å…³é”®åŸåˆ™</strong>ï¼šJavaScript æ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œæ‰€æœ‰åŒæ­¥ä»£ç å¿…é¡»æ‰§è¡Œå®Œæ¯•åï¼Œå¼‚æ­¥å›è°ƒæ‰æœ‰æœºä¼šè¿è¡Œã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-1">äºŒã€å…¸å‹æ¡ˆä¾‹å¯¹æ¯”ï¼š<code>let</code>Â vsÂ <code>var</code>Â åœ¨å¾ªç¯ä¸­çš„å¼‚æ­¥è¡Œä¸º</h2>
<h3 data-id="heading-2">åœºæ™¯æè¿°</h3>
<p>æˆ‘ä»¬åˆ†åˆ«ç”¨ <code>let</code> å’Œ <code>var</code> å£°æ˜å¾ªç¯å˜é‡ï¼Œè§‚å¯Ÿ <code>setTimeout</code> å›è°ƒçš„è¾“å‡ºç»“æœï¼š</p>
<h4 data-id="heading-3">âœ… æ¡ˆä¾‹ Aï¼šä½¿ç”¨Â <code>let</code>ï¼ˆæ¨èå†™æ³•ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript">javascript
ç¼–è¾‘
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Start'</span>);

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'let:'</span>, i);
  }, <span class="hljs-number">100</span>);
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'End'</span>);
</code></pre>
<p><strong>è¾“å‡º</strong>ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">text</span>
ç¼–è¾‘
Start
<span class="hljs-keyword">End</span>
<span class="hljs-symbol">let:</span> <span class="hljs-number">0</span>
<span class="hljs-symbol">let:</span> <span class="hljs-number">1</span>
<span class="hljs-symbol">let:</span> <span class="hljs-number">2</span>
</code></pre>
<h4 data-id="heading-4">âŒ æ¡ˆä¾‹ Bï¼šä½¿ç”¨Â <code>var</code>ï¼ˆç»å…¸é™·é˜±ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript">javascript
ç¼–è¾‘
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Start'</span>);

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'var:'</span>, i);
  }, <span class="hljs-number">100</span>);
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'End'</span>);
</code></pre>
<p><strong>è¾“å‡º</strong>ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">text</span>
ç¼–è¾‘
Start
<span class="hljs-keyword">End</span>
<span class="hljs-symbol">var:</span> <span class="hljs-number">3</span>
<span class="hljs-symbol">var:</span> <span class="hljs-number">3</span>
<span class="hljs-symbol">var:</span> <span class="hljs-number">3</span>
</code></pre>
<blockquote>
<p>ğŸ¤” ä¸ºä»€ä¹ˆ <code>var</code> è¾“å‡ºå…¨æ˜¯ <code>3</code>ï¼Ÿè€Œ <code>let</code> èƒ½æ­£ç¡®æ•è·æ¯æ¬¡çš„å€¼ï¼Ÿ</p>
</blockquote>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€æ‰§è¡Œæµç¨‹æ·±åº¦è§£æ</h2>
<h3 data-id="heading-6">3.1 å…±åŒèµ·ç‚¹ï¼šåˆå§‹åŒ–ä¸åŒæ­¥æ‰§è¡Œ</h3>
<p>ä¸¤ä¸ªæ¡ˆä¾‹åœ¨ <strong>çŠ¶æ€ä¸€ï¼ˆåˆå§‹åŒ–ï¼‰â†’ çŠ¶æ€äºŒï¼ˆåŒæ­¥æ‰§è¡Œï¼‰</strong> é˜¶æ®µå®Œå…¨ä¸€è‡´ï¼š</p>
<ol>
<li>
<p><strong>åˆå§‹åŒ–</strong>ï¼šå‹å…¥å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</p>
</li>
<li>
<p>æ‰§è¡ŒÂ <code>console.log('Start')</code>Â â†’ æ‰“å°Â <code>'Start'</code>ã€‚</p>
</li>
<li>
<p>è¿›å…¥Â <code>for</code>Â å¾ªç¯ï¼š</p>
<ul>
<li>æ¯æ¬¡è°ƒç”¨Â <code>setTimeout</code>ï¼Œå…¶å›è°ƒå‡½æ•°è¢«æ³¨å†Œä¸ºå®ä»»åŠ¡ï¼ˆmacrotaskï¼‰ï¼Œæ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ã€‚</li>
<li><strong>æ³¨æ„</strong>ï¼šæ­¤æ—¶å›è°ƒ<strong>å¹¶æœªæ‰§è¡Œ</strong>ï¼Œåªæ˜¯è¢«â€œå®‰æ’â€åœ¨æœªæ¥æŸä¸ªæ—¶é—´ç‚¹æ‰§è¡Œã€‚</li>
</ul>
</li>
<li>
<p>æ‰§è¡ŒÂ <code>console.log('End')</code>Â â†’ æ‰“å°Â <code>'End'</code>ã€‚</p>
</li>
<li>
<p>åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œè¿›å…¥Â <strong>çŠ¶æ€ä¸‰ï¼šè°ƒç”¨æ ˆç©ºé—²</strong>ã€‚</p>
</li>
</ol>
<p>æ­¤æ—¶ï¼Œä»»åŠ¡é˜Ÿåˆ—ä¸­æœ‰ 3 ä¸ªå¾…æ‰§è¡Œçš„ <code>setTimeout</code> å›è°ƒã€‚</p>
<hr/>
<h3 data-id="heading-7">3.2 åˆ†æ­§ç‚¹ï¼šå˜é‡ä½œç”¨åŸŸä¸é—­åŒ…æ•è·</h3>
<h4 data-id="heading-8">ğŸ”¹Â <code>let</code>Â çš„å—çº§ä½œç”¨åŸŸæœºåˆ¶ï¼ˆES6+ï¼‰</h4>
<ul>
<li><code>let i</code>Â åœ¨æ¯æ¬¡å¾ªç¯è¿­ä»£æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ª<strong>æ–°çš„å—çº§ä½œç”¨åŸŸ</strong>ã€‚</li>
<li>æ¯ä¸ªÂ <code>setTimeout</code>Â å›è°ƒé€šè¿‡<strong>é—­åŒ…</strong>æ•è·çš„æ˜¯<strong>å½“å‰è¿­ä»£çš„Â <code>i</code>Â å€¼</strong>ã€‚</li>
<li>å› æ­¤ï¼Œä¸‰ä¸ªå›è°ƒåˆ†åˆ«ç»‘å®šÂ <code>i=0</code>ã€<code>i=1</code>ã€<code>i=2</code>ã€‚</li>
</ul>
<blockquote>
<p>âœ… <strong>æœ¬è´¨</strong>ï¼šæ¯ä¸ªå›è°ƒæ‹¥æœ‰ç‹¬ç«‹çš„è¯æ³•ç¯å¢ƒã€‚</p>
</blockquote>
<h4 data-id="heading-9">ğŸ”¸Â <code>var</code>Â çš„å‡½æ•°ä½œç”¨åŸŸç¼ºé™·</h4>
<ul>
<li><code>var i</code>Â å£°æ˜åœ¨<strong>å…¨å±€ä½œç”¨åŸŸ</strong>ï¼ˆæˆ–å‡½æ•°ä½œç”¨åŸŸï¼‰ï¼Œæ•´ä¸ªå¾ªç¯å…±äº«åŒä¸€ä¸ªÂ <code>i</code>ã€‚</li>
<li>å½“Â <code>setTimeout</code>Â å›è°ƒæœ€ç»ˆæ‰§è¡Œæ—¶ï¼ˆ100ms åï¼‰ï¼Œå¾ªç¯æ—©å·²ç»“æŸï¼Œ<code>i</code>Â çš„å€¼å·²å˜ä¸ºÂ <code>3</code>ï¼ˆå¾ªç¯æ¡ä»¶Â <code>i &lt; 3</code>Â å¤±è´¥æ—¶Â <code>i++</code>Â æ‰§è¡Œäº†ä¸€æ¬¡ï¼‰ã€‚</li>
<li>æ‰€æœ‰å›è°ƒéƒ½å¼•ç”¨åŒä¸€ä¸ªÂ <code>i</code>ï¼Œå› æ­¤è¾“å‡ºå…¨æ˜¯Â <code>3</code>ã€‚</li>
</ul>
<blockquote>
<p>âŒ <strong>æœ¬è´¨</strong>ï¼šé—­åŒ…æ•è·çš„æ˜¯å˜é‡å¼•ç”¨ï¼Œè€Œéå€¼å¿«ç…§ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-10">3.3 å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œé˜¶æ®µï¼ˆçŠ¶æ€å››ï¼‰</h3>
<p>äº‹ä»¶å¾ªç¯æ£€æµ‹åˆ°è°ƒç”¨æ ˆç©ºé—²åï¼Œä¾æ¬¡å–å‡ºä»»åŠ¡é˜Ÿåˆ—ä¸­çš„å›è°ƒï¼š</p>
<ul>
<li>å¯¹äºÂ <code>let</code>ï¼šä¾æ¬¡æ‰§è¡Œï¼Œæ‰“å°Â <code>0, 1, 2</code>ã€‚</li>
<li>å¯¹äºÂ <code>var</code>ï¼šä¾æ¬¡æ‰§è¡Œï¼Œä½†éƒ½è¯»å–åˆ°Â <code>i = 3</code>ã€‚</li>
</ul>
<p>æ‰§è¡Œå®Œæ¯•åï¼Œè‹¥æ— æ–°ä»»åŠ¡åŠ å…¥ï¼Œç¨‹åºè¿›å…¥ <strong>çŠ¶æ€äº”ï¼šç¨‹åºçœŸæ­£ç»“æŸ</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-11">å››ã€å¯è§†åŒ–æ‰§è¡Œæµç¨‹å›¾</h2>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">text</span>
ç¼–è¾‘
<span class="hljs-selector-attr">[åˆå§‹åŒ–]</span>
   â†“
<span class="hljs-selector-attr">[åŒæ­¥ä»£ç æ‰§è¡Œ]</span> â†’ <span class="hljs-selector-tag">setTimeout</span> æ³¨å†Œ<span class="hljs-number">3</span>ä¸ªå›è°ƒ â†’ ä»»åŠ¡é˜Ÿåˆ—: <span class="hljs-selector-attr">[cb0, cb1, cb2]</span>
   â†“
<span class="hljs-selector-attr">[è°ƒç”¨æ ˆç©ºé—²]</span> â†â†’ <span class="hljs-selector-attr">[äº‹ä»¶å¾ªç¯è°ƒåº¦]</span>
                   â†“
           <span class="hljs-selector-attr">[æ‰§è¡Œ cb0]</span> â†’ æ‰“å° <span class="hljs-selector-tag">i</span> å€¼
                   â†“
           <span class="hljs-selector-attr">[è°ƒç”¨æ ˆç©ºé—²]</span> â†â†’ <span class="hljs-selector-attr">[è°ƒåº¦ cb1]</span>
                   â†“
           <span class="hljs-selector-attr">[æ‰§è¡Œ cb1]</span> â†’ ...
                   â†“
           <span class="hljs-selector-attr">[cb2 æ‰§è¡Œå®Œæ¯•]</span>
                   â†“
        <span class="hljs-selector-attr">[ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©º â†’ ç¨‹åºç»“æŸ]</span>
</code></pre>
<hr/>
<h2 data-id="heading-12">äº”ã€è§£å†³æ–¹æ¡ˆï¼šå¦‚ä½•è®©Â <code>var</code>Â è¡Œä¸ºæ­£ç¡®ï¼Ÿ</h2>
<p>è™½ç„¶åº”ä¼˜å…ˆä½¿ç”¨ <code>let</code>ï¼Œä½†åœ¨æ—§ä»£ç æˆ–é¢è¯•é¢˜ä¸­ï¼Œä½ å¯èƒ½éœ€è¦ä¿®å¤ <code>var</code> çš„é—®é¢˜ã€‚å¸¸è§æ–¹æ¡ˆï¼š</p>
<h3 data-id="heading-13">æ–¹æ¡ˆ 1ï¼šIIFEï¼ˆç«‹å³æ‰§è¡Œå‡½æ•°ï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript">javascript
ç¼–è¾‘
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
  (<span class="hljs-keyword">function</span>(<span class="hljs-params">j</span>) {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'IIFE:'</span>, j);
    }, <span class="hljs-number">100</span>);
  })(i);
}
</code></pre>
<h3 data-id="heading-14">æ–¹æ¡ˆ 2ï¼šä½¿ç”¨Â <code>bind</code>Â ç»‘å®šå‚æ•°</h3>
<pre><code class="hljs language-javascript" lang="javascript">javascript
ç¼–è¾‘
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">log</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">'bind:'</span>, i), <span class="hljs-number">100</span>);
}
</code></pre>
<blockquote>
<p>âœ… ä¸¤è€…éƒ½èƒ½å°†å½“å‰ <code>i</code> çš„å€¼â€œå›ºåŒ–â€ä¼ å…¥å›è°ƒã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-15">å…­ã€æ‹“å±•æ€è€ƒï¼šå¾®ä»»åŠ¡ vs å®ä»»åŠ¡</h2>
<p>æœ¬æ–‡èšç„¦ <code>setTimeout</code>ï¼ˆå®ä»»åŠ¡ï¼‰ï¼Œä½†ç°ä»£ JS è¿˜æœ‰ <strong>å¾®ä»»åŠ¡</strong>ï¼ˆmicrotaskï¼‰ï¼Œå¦‚ <code>Promise.then</code>ã€<code>queueMicrotask</code>ã€‚</p>
<ul>
<li><strong>æ‰§è¡Œä¼˜å…ˆçº§</strong>ï¼šå¾®ä»»åŠ¡ &gt; å®ä»»åŠ¡</li>
<li><strong>è°ƒåº¦æ—¶æœº</strong>ï¼šæ¯æ¬¡è°ƒç”¨æ ˆæ¸…ç©ºåï¼Œ<strong>å…ˆæ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—</strong>ï¼Œå†å¤„ç†å®ä»»åŠ¡</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">javascript
ç¼–è¾‘
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'macro'</span>), <span class="hljs-number">0</span>);
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'micro'</span>));
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'sync'</span>);
</code></pre>
<p><strong>è¾“å‡º</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">text
ç¼–è¾‘
sync
micro
macro
</code></pre>
<blockquote>
<p>ğŸ’¡ ç†è§£å¾®/å®ä»»åŠ¡å·®å¼‚ï¼Œæ˜¯æŒæ¡ <code>async/await</code>ã€<code>Vue nextTick</code> ç­‰é«˜çº§ç‰¹æ€§çš„åŸºç¡€ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-16">ä¸ƒã€æ€»ç»“è¦ç‚¹</h2>





























<table><thead><tr><th>è¦ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>åŒæ­¥ä¼˜å…ˆ</strong></td><td>æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œï¼Œå¼‚æ­¥å›è°ƒæ‰å¯èƒ½è¿è¡Œ</td></tr><tr><td><strong>let â‰  var</strong></td><td><code>let</code>Â åˆ›å»ºå—çº§ä½œç”¨åŸŸï¼Œé¿å…é—­åŒ…é™·é˜±</td></tr><tr><td><strong>é—­åŒ…æ•è·å¼•ç”¨</strong></td><td><code>var</code>Â å›è°ƒè¯»å–çš„æ˜¯å˜é‡æœ€ç»ˆå€¼ï¼Œéå¾ªç¯æ—¶çš„å¿«ç…§</td></tr><tr><td><strong>äº‹ä»¶å¾ªç¯æ˜¯è°ƒåº¦å™¨</strong></td><td>ä¸æ˜¯â€œå¤šçº¿ç¨‹â€ï¼Œè€Œæ˜¯â€œæ’é˜Ÿæ‰§è¡Œâ€</td></tr><tr><td><strong>ç¨‹åºç»“æŸæ¡ä»¶</strong></td><td>è°ƒç”¨æ ˆ + ä»»åŠ¡é˜Ÿåˆ— + å¾®ä»»åŠ¡é˜Ÿåˆ— å…¨éƒ¨ä¸ºç©º</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-17">å…«ã€æ³¨æ„äº‹é¡¹</h2>
<ol>
<li><strong>ä¸è¦ä¾èµ–Â <code>setTimeout(fn, 0)</code>Â ç«‹å³æ‰§è¡Œ</strong>ï¼šå®ƒä»éœ€ç­‰å¾…å½“å‰åŒæ­¥ä»£ç å’Œå¾®ä»»åŠ¡å®Œæˆã€‚</li>
<li><strong>é¿å…åœ¨å¾ªç¯ä¸­åˆ›å»ºå¤§é‡é—­åŒ…</strong>ï¼šå¯èƒ½å¼•å‘å†…å­˜æ³„æ¼ï¼ˆå°¤å…¶åœ¨ IE æ—¶ä»£ï¼‰ã€‚</li>
<li><strong>Node.js ä¸æµè§ˆå™¨äº‹ä»¶å¾ªç¯ç•¥æœ‰ä¸åŒ</strong>ï¼šNode æœ‰å¤šä¸ªå®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆtimersã€I/Oã€check ç­‰é˜¶æ®µï¼‰ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-18">ä¹ã€ç»“è¯­</h2>
<p>ç†è§£ JavaScript çš„æ‰§è¡Œæ¨¡å‹ï¼Œä¸ä»…èƒ½å†™å‡ºæ›´å¯é çš„å¼‚æ­¥ä»£ç ï¼Œè¿˜èƒ½åœ¨é¢è¯•ä¸­ä»å®¹åº”å¯¹â€œäº‹ä»¶å¾ªç¯â€ç±»é«˜é¢‘é—®é¢˜ã€‚è®°ä½ï¼š<strong>JS æ˜¯å•çº¿ç¨‹çš„ï¼Œä½†é€šè¿‡äº‹ä»¶å¾ªç¯å®ç°äº†é«˜æ•ˆçš„å¼‚æ­¥åä½œ</strong>ã€‚</p>
<blockquote>
<p>ğŸŒŸ <strong>åŠ¨æ‰‹å»ºè®®</strong>ï¼šæ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼Œäº²è‡ªè¿è¡Œä¸Šè¿°ä»£ç ï¼Œè§‚å¯Ÿè¾“å‡ºé¡ºåºï¼ŒåŠ æ·±ç†è§£ã€‚</p>
</blockquote>
<hr/>
<p><strong>å‚è€ƒæ–‡çŒ®</strong>ï¼š</p>
<ul>
<li>ECMAScriptÂ® 2024 Language Specification</li>
<li>Jake Archibald:Â <a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">The Event Loop</a></li>
<li>MDN Web Docs:Â <a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">Concurrency model and the event loop</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[eslintä½ ä¸æ‡‚çš„éƒ½åœ¨è¿™é‡Œï¼Œä¸ä¿¡ä½ è¿›æ¥çœ‹å˜›~]]></title>    <link>https://juejin.cn/post/7571427088071639066</link>    <guid>https://juejin.cn/post/7571427088071639066</guid>    <pubDate>2025-11-12T06:35:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571427088071639066" data-draft-id="7570271574348660745" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="eslintä½ ä¸æ‡‚çš„éƒ½åœ¨è¿™é‡Œï¼Œä¸ä¿¡ä½ è¿›æ¥çœ‹å˜›~"/> <meta itemprop="keywords" content="å‰ç«¯,ESLint"/> <meta itemprop="datePublished" content="2025-11-12T06:35:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‰§é‡æ˜Ÿè¾°"/> <meta itemprop="url" content="https://juejin.cn/user/166781500788429"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            eslintä½ ä¸æ‡‚çš„éƒ½åœ¨è¿™é‡Œï¼Œä¸ä¿¡ä½ è¿›æ¥çœ‹å˜›~
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/166781500788429/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‰§é‡æ˜Ÿè¾°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T06:35:26.000Z" title="Wed Nov 12 2025 06:35:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å’³å’³å’³ï¼Œè¿™ç¯‡æ–‡ç« å°±æ˜¯ä¸€ä¸ªæ ‡é¢˜å…šæ¥ç€ï¼Œæˆ‘æ˜¯ä¸€ä¸ªè¶…çº§æ‡’çš„äººï¼Œæ–‡ç« å†…å®¹å¤§å¤šæ•°æ˜¯è®©AIå­¦ä¹ çš„æ–‡æ¡£æ€»ç»“å‡ºæ¥çš„ï¼Œæˆ‘å¯¹æœ€ç»ˆç»“æœè¿›è¡Œå¸æ”¶ï¼Œä½†æ˜¯ç›®å‰æˆ‘æ„Ÿè§‰å¸æ”¶çš„ç»“æœä¸æ˜¯å¾ˆç†æƒ³ï¼Œå¦‚æœä½ æ˜¯å¤§ä½¬å¯ä»¥ç›´æ¥æ‹–åˆ°æœ€åçœ‹çœ‹æˆ‘çš„é—®é¢˜ï¼Œç»™æˆ‘æå‡ºä¸€äº›å»ºè®®ï¼Œå¦‚æœä¸æ˜¯ï¼Œä½ å¯ä»¥çœ‹çœ‹æ–‡ç« ç„¶åè¯´è¯´ä¸ªäººè§è§£ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€eslintæ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>ç®€å•æ¥è¯´ï¼Œeslint æ˜¯ä¸€ä¸ª<strong>æ’ä»¶åŒ–çš„ JavaScript ä»£ç æ£€æŸ¥å·¥å…·</strong>ã€‚å®ƒçš„æ ¸å¿ƒç›®æ ‡æ˜¯é€šè¿‡é™æ€åˆ†æå¸®ä½ å‘ç°ä»£ç ä¸­çš„ä¸¤ç±»é—®é¢˜ï¼š</p>
<ol>
<li><strong>ä»£ç è´¨é‡é—®é¢˜</strong>ï¼šä¾‹å¦‚ï¼Œä½¿ç”¨äº†æœªå£°æ˜çš„å˜é‡ã€é”™è¯¯çš„è¯­æ³•ç­‰å¯èƒ½å¯¼è‡´è¿è¡Œæ—¶é”™è¯¯çš„æ¨¡å¼ ã€‚</li>
<li><strong>ä»£ç é£æ ¼é—®é¢˜</strong>ï¼šä¾‹å¦‚ï¼Œä»£ç ç¼©è¿›ã€æ˜¯å¦ä½¿ç”¨åˆ†å·ã€å¼•å·ç±»å‹ç­‰ï¼Œä»¥ä¿è¯ä»£ç é£æ ¼ä¸€è‡´ ã€‚</li>
</ol>
<p>å®ƒçš„ä¸€ä¸ªæ˜¾è‘—ä¼˜ç‚¹æ˜¯<strong>å®Œå…¨å¯é…ç½®</strong>ã€‚ä½ å¯ä»¥å…³é—­ä»»ä½•è§„åˆ™ï¼Œæˆ–è°ƒæ•´å…¶é”™è¯¯çº§åˆ«ï¼Œä¹Ÿå¯ä»¥åŠ è½½æ’ä»¶å’Œè‡ªå®šä¹‰è§„åˆ™ï¼Œå®Œå…¨æ ¹æ®ä½ å’Œå›¢é˜Ÿçš„éœ€æ±‚æ¥å®šåˆ¶ ã€‚</p>
<h2 data-id="heading-1">äºŒã€æ ¸å¿ƒæ¦‚å¿µè§£æ</h2>
<p>è¦ç†è§£eslintï¼Œéœ€è¦å…ˆäº†è§£å®ƒçš„å‡ ä¸ªæ ¸å¿ƒæ„å»ºæ¨¡å— ï¼š</p>



































<table><thead><tr><th>æ ¸å¿ƒæ¦‚å¿µ</th><th>é€šä¿—è§£é‡Š</th><th>å®ƒå°±åƒ...</th></tr></thead><tbody><tr><td>è§„åˆ™ (Rules)</td><td>å…·ä½“çš„ä»£ç æ£€æŸ¥è§„åˆ™ï¼Œæ˜¯eslintçš„"åŸå­"å•ä½ ã€‚</td><td>äº¤é€šæ³•è§„ï¼ˆä¾‹å¦‚ï¼š"çº¢ç¯åœ"å¯¹åº”è§„åˆ™"ä¸å…è®¸é—¯çº¢ç¯"ï¼‰ã€‚</td></tr><tr><td>é…ç½®æ–‡ä»¶ (Configuration Files)</td><td>ä¸€ä¸ªæ–‡ä»¶ï¼ˆå¦‚ .eslint.config.jsï¼‰ï¼Œç”¨æ¥å­˜æ”¾æ‰€æœ‰è§„åˆ™ã€æ’ä»¶ã€ç¯å¢ƒç­‰é…ç½®çš„"æ€»æŒ‡æŒ¥éƒ¨" ã€‚</td><td>ä¸€æœ¬å®Œæ•´çš„äº¤é€šæ³•è§„æ‰‹å†Œã€‚</td></tr><tr><td>æ’ä»¶ (Plugins)</td><td>ä¸€ä¸ªnpmåŒ…ï¼Œä¸ºä½ æä¾›é¢å¤–çš„ã€eslintæœ¬èº«æ²¡æœ‰çš„è§„åˆ™ï¼Œé€šå¸¸ç”¨äºæ”¯æŒæ–°çš„è¯­æ³•ï¼ˆå¦‚Vueã€Reactï¼‰æˆ–ç‰¹å®šåº“ ã€‚</td><td>äº¤é€šæ³•è§„çš„è¡¥å……æ¡ä¾‹ï¼ˆä¾‹å¦‚ï¼š"ç”µåŠ¨è½¦ä¸“ç”¨é“è¡Œé©¶è§„èŒƒ"ï¼‰ã€‚</td></tr><tr><td>è§£æå™¨ (Parser)</td><td>å°†ä½ çš„ä»£ç è½¬æ¢æˆè®¡ç®—æœºæ›´å®¹æ˜“ç†è§£çš„ç»“æ„ï¼ˆASTï¼‰ï¼Œeslintæ‰èƒ½åŸºäºæ­¤è¿›è¡Œåˆ†æã€‚é»˜è®¤è§£æå™¨æ˜¯Espree ã€‚</td><td>ä¸€ä¸ªç²¾é€šå¤šå›½è¯­è¨€çš„ç¿»è¯‘å®˜ï¼Œèƒ½æŠŠä¸åŒè¯­è¨€ï¼ˆå¦‚TypeScriptï¼‰çš„ä»£ç "ç¿»è¯‘"æˆESLintèƒ½æ‡‚çš„è¯­è¨€ã€‚</td></tr><tr><td>å¯å…±äº«é…ç½® (Shareable Configs)</td><td>ä¸€ä¸ªå‘å¸ƒåœ¨npmä¸Šçš„ã€é¢„å…ˆå®šä¹‰å¥½çš„è§„åˆ™é›†åˆã€‚ä½ å¯ä»¥ç›´æ¥ç»§æ‰¿å®ƒï¼Œè€Œæ— éœ€è‡ªå·±ä»é›¶å¼€å§‹é…ç½®æ‰€æœ‰è§„åˆ™ ã€‚</td><td>ç›´æ¥é‡‡çº³ä¸€ä¸ªæˆç†Ÿçš„ã€å…¬è®¤çš„äº¤é€šæ³•è§„ä½“ç³»ï¼ˆå¦‚æŸå¸‚çš„å…¨éƒ¨äº¤é€šæ³•è§„ï¼‰ã€‚</td></tr></tbody></table>
<h2 data-id="heading-2">ä¸‰ã€é…ç½®æ–‡ä»¶è¯¦è§£</h2>
<p>è¿™æ˜¯ä½ ä½¿ç”¨eslintæ—¶æœ€å¸¸æ‰“äº¤é“çš„åœ°æ–¹ã€‚</p>
<ul>
<li><strong>é…ç½®æ–‡ä»¶æ ¼å¼</strong>ï¼šeslintæ”¯æŒå¤šç§æ ¼å¼ï¼Œå¦‚æœåŒä¸€ç›®å½•ä¸‹æœ‰å¤šä¸ªï¼Œ<strong>ä¼˜å…ˆçº§ä»é«˜åˆ°ä½</strong>å¦‚ä¸‹ ï¼š</li>
</ul>
<ol>
<li>
<p><code>.eslint.config.js</code></p>
</li>
<li>
<p><code>.eslintrc.cjs</code> (ç”¨äº ESæ¨¡å—é¡¹ç›®)</p>
</li>
<li>
<p><code>.eslintrc.yaml</code> æˆ– <code>.eslintrc.yml</code></p>
</li>
<li>
<p><code>.eslintrc.json</code></p>
</li>
<li>
<p><code>package.json</code> æ–‡ä»¶é‡Œçš„ <code>eslintConfig</code> å­—æ®µ</p>
<p>é€šå¸¸ï¼Œ<code>.eslint.config.js</code> æ˜¯æœ€æ¨èçš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒæ”¯æŒæ³¨é‡Šï¼Œçµæ´»æ€§æœ€é«˜ã€‚</p>
</li>
</ol>
<ul>
<li><strong>é…ç½®çš„çº§è”ä¸ç»§æ‰¿</strong>ï¼šeslintä¼šä»è¢«æ£€æŸ¥æ–‡ä»¶æ‰€åœ¨ç›®å½•å¼€å§‹ï¼Œå‘ä¸Šå±‚ç›®å½•é€çº§æŸ¥æ‰¾é…ç½®æ–‡ä»¶ï¼Œç›´åˆ°ç³»ç»Ÿæ ¹ç›®å½•æˆ–æ‰¾åˆ°ä¸€ä¸ªè®¾ç½®äº† <code>"root": true</code> çš„é…ç½® ã€‚è¿™å…è®¸ä½ ä¸ºé¡¹ç›®çš„ä¸åŒéƒ¨åˆ†è®¾ç½®ä¸åŒçš„è§„åˆ™ã€‚ä¸ºäº†é¿å…eslintä¸€ç›´æ‰¾åˆ°ä½ ä¸å¸Œæœ›çš„çˆ¶çº§ç›®å½•é…ç½®ï¼Œ<strong>æœ€å¥½åœ¨é¡¹ç›®çš„æ ¹é…ç½®æ–‡ä»¶ä¸­è®¾ç½® <code>"root": true</code></strong> ã€‚</li>
</ul>
<h2 data-id="heading-3">å››ã€è§„åˆ™ (Rules) å¦‚ä½•é…ç½®</h2>
<p>è§„åˆ™æ˜¯eslintçš„æ ¸å¿ƒï¼Œé…ç½®å®ƒä»¬éå¸¸ç®€å•ã€‚</p>
<h3 data-id="heading-4"><strong>é”™è¯¯çº§åˆ«</strong></h3>
<p>æ¯æ¡è§„åˆ™éƒ½å¯ä»¥è®¾ç½®ä¸‰ç§é”™è¯¯çº§åˆ« ï¼š</p>
<ul>
<li><code>"off"</code> æˆ– <code>0</code>ï¼šå…³é—­è§„åˆ™ã€‚</li>
<li><code>"warn"</code> æˆ– <code>1</code>ï¼šå¼€å¯è§„åˆ™ï¼Œä½†ä»…ä½œä¸º<strong>è­¦å‘Š</strong>ï¼ˆé»„è‰²æç¤ºï¼Œä¸ä¼šä½¿lintingè¿‡ç¨‹å¤±è´¥ï¼‰ã€‚</li>
<li><code>"error"</code> æˆ– <code>2</code>ï¼šå¼€å¯è§„åˆ™ï¼Œå¹¶ä½œä¸º<strong>é”™è¯¯</strong>ï¼ˆçº¢è‰²æç¤ºï¼Œä¼šå¯¼è‡´lintingè¿‡ç¨‹ä»¥éé›¶é€€å‡ºç ç»“æŸï¼Œå¸¸ç”¨äºCI/CDï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-5">é…ç½®æ–¹å¼</h3>
<ul>
<li>åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®(<strong><code>æœ€å¸¸è§</code></strong>)</li>
</ul>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-string">"rules"</span>: {
    <span class="hljs-string">"semi"</span>: [<span class="hljs-string">"error"</span>, <span class="hljs-string">"always"</span>],  <span class="hljs-comment">// è¦æ±‚è¯­å¥æœ«å°¾ä½¿ç”¨åˆ†å·</span>
    <span class="hljs-string">"quotes"</span>: [<span class="hljs-string">"warn"</span>, <span class="hljs-string">"single"</span>]  <span class="hljs-comment">// å»ºè®®ä½¿ç”¨å•å¼•å·</span>
  }
}
</code></pre>
<ul>
<li>ä½¿ç”¨æ³¨é‡Šå†…è”é…ç½®</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åœ¨æ•´ä¸ªæ–‡ä»¶é¡¶éƒ¨ç¦ç”¨æŸæ¡è§„åˆ™</span>
<span class="hljs-comment">/* eslint-disable no-alert */</span>
<span class="hljs-title function_">alert</span>(<span class="hljs-string">'foo'</span>);

<span class="hljs-comment">// ç¦ç”¨ä¸‹ä¸€è¡Œçš„æ‰€æœ‰è§„åˆ™</span>
<span class="hljs-comment">// eslint-disable-next-line</span>
<span class="hljs-title function_">alert</span>(<span class="hljs-string">'foo'</span>);

<span class="hljs-comment">// ç¦ç”¨ä¸‹ä¸€è¡Œçš„ç‰¹å®šè§„åˆ™</span>
<span class="hljs-comment">// eslint-disable-next-line no-alert</span>
<span class="hljs-title function_">alert</span>(<span class="hljs-string">'foo'</span>);

<span class="hljs-comment">// é‡æ–°å¯ç”¨è§„åˆ™</span>
<span class="hljs-comment">/* eslint-enable no-alert */</span>
</code></pre>
<h2 data-id="heading-6">å…­ã€æ’ä»¶ (Plugins) - æ‰©å±•ESLintçš„è¶…èƒ½åŠ›</h2>
<p>æ’ä»¶æ˜¯eslintæœ€å¼ºå¤§çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œå®ƒè®©ä½ èƒ½å¤Ÿæ£€æŸ¥eslintæœ¬èº«ä¸æ”¯æŒçš„è¯­è¨€ç‰¹æ€§å’Œæ¡†æ¶ã€‚</p>
<h3 data-id="heading-7"><strong>æ’ä»¶çš„ç”¨é€”</strong></h3>
<ul>
<li>æ”¯æŒæ–°çš„è¯­æ³•ï¼šå¦‚ <strong>TypeScript</strong>ã€<strong>Vue</strong>ã€<strong>JSX</strong></li>
<li>æ¡†æ¶ç‰¹å®šè§„åˆ™ï¼šå¦‚ <strong>React</strong>ã€<strong>Angular</strong> çš„æœ€ä½³å®è·µ</li>
<li>è‡ªå®šä¹‰è§„åˆ™ï¼šå›¢é˜Ÿå†…éƒ¨çš„ç‰¹æ®Šç¼–ç è§„èŒƒ</li>
</ul>
<h3 data-id="heading-8"><strong>å¦‚ä½•ä½¿ç”¨æ’ä»¶</strong></h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä¾‹å¦‚ï¼Œå®‰è£…Reactæ’ä»¶</span>
npm install eslint-plugin-react --save-dev
<span class="hljs-comment">// åœ¨é…ç½®æ–‡ä»¶.eslintrc.jsä¸­å¼•å…¥</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-string">"react"</span>  <span class="hljs-comment">// æ³¨æ„ï¼šçœç•¥ 'eslint-plugin-' å‰ç¼€</span>
  ],
  <span class="hljs-attr">rules</span>: {
    <span class="hljs-string">"react/jsx-uses-react"</span>: <span class="hljs-string">"error"</span>,
    <span class="hljs-string">"react/jsx-uses-vars"</span>: <span class="hljs-string">"error"</span>
  }
};
</code></pre>
<h2 data-id="heading-9">ä¸ƒã€æ‰©å±• (Extends) - ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Š</h2>
<p>æ‰©å±•è®©ä½ èƒ½å¤Ÿ<strong>ç»§æ‰¿</strong>åˆ«äººå·²ç»é…ç½®å¥½çš„è§„åˆ™é›†åˆï¼Œé¿å…é‡å¤é€ è½®å­ã€‚</p>
<h3 data-id="heading-10"><strong>å¸¸è§çš„å¯æ‰©å±•é…ç½®</strong></h3>
<ul>
<li><code>"eslint:recommended"</code> - eslintå®˜æ–¹æ¨èè§„åˆ™</li>
<li><code>"eslint:all"</code> - eslintçš„æ‰€æœ‰è§„åˆ™ï¼ˆä¸æ¨èï¼‰</li>
<li>æµè¡Œçš„é£æ ¼æŒ‡å—ï¼šå¦‚ <code>airbnb</code>ã€<code>standard</code>ã€<code>google</code></li>
</ul>
<h3 data-id="heading-11"><strong>å¦‚ä½•ä½¿ç”¨æ‰©å±•</strong></h3>
<p><code>æ³¨æ„ï¼šæ‰©å±•çš„é…ç½®ä¼šæŒ‰æ•°ç»„é¡ºåºåº”ç”¨ï¼Œåé¢çš„é…ç½®ä¼šè¦†ç›–å‰é¢çš„åŒåé…ç½®ã€‚</code></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// .eslintrc.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">extends</span>: [
    <span class="hljs-string">"eslint:recommended"</span>,        <span class="hljs-comment">// ESLintæ¨èè§„åˆ™</span>
    <span class="hljs-string">"plugin:react/recommended"</span>,  <span class="hljs-comment">// Reactæ’ä»¶çš„æ¨èè§„åˆ™</span>
    <span class="hljs-string">"airbnb-base"</span>               <span class="hljs-comment">// AirbnbåŸºç¡€é£æ ¼</span>
  ],
  <span class="hljs-comment">// ä½ è¿˜å¯ä»¥åœ¨è¿™é‡Œè¦†ç›–æˆ–æ·»åŠ è‡ªå·±çš„è§„åˆ™</span>
  <span class="hljs-attr">rules</span>: {
    <span class="hljs-string">"no-console"</span>: <span class="hljs-string">"warn"</span>  <span class="hljs-comment">// è¦†ç›–ç»§æ‰¿çš„è§„åˆ™</span>
  }
};
</code></pre>
<h2 data-id="heading-12">å…«ã€ç¯å¢ƒ (Environments) ä¸è§£æå™¨é€‰é¡¹</h2>
<p>è¿™äº›é…ç½®å‘Šè¯‰eslintä½ çš„ä»£ç è¿è¡Œåœ¨ä»€ä¹ˆç¯å¢ƒä¸­ï¼Œä»¥åŠä½¿ç”¨ä»€ä¹ˆJavaScriptç‰¹æ€§ã€‚</p>
<h3 data-id="heading-13">ç¯å¢ƒé…ç½®</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// .eslintrc.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">env</span>: {
    <span class="hljs-string">"browser"</span>: <span class="hljs-literal">true</span>,    <span class="hljs-comment">// æµè§ˆå™¨å…¨å±€å˜é‡ï¼Œå¦‚ windowã€document</span>
    <span class="hljs-string">"node"</span>: <span class="hljs-literal">true</span>,       <span class="hljs-comment">// Node.js å…¨å±€å˜é‡ï¼Œå¦‚ process</span>
    <span class="hljs-string">"es6"</span>: <span class="hljs-literal">true</span>,        <span class="hljs-comment">// ES6 è¯­æ³•æ”¯æŒ</span>
    <span class="hljs-string">"jest"</span>: <span class="hljs-literal">true</span>        <span class="hljs-comment">// Jest æµ‹è¯•æ¡†æ¶å…¨å±€å˜é‡</span>
  }
};
</code></pre>
<h3 data-id="heading-14">è§£æå™¨é€‰é¡¹</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// .eslintrc.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">parserOptions</span>: {
    <span class="hljs-string">"ecmaVersion"</span>: <span class="hljs-number">2021</span>,    <span class="hljs-comment">// ä½¿ç”¨çš„ ECMAScript ç‰ˆæœ¬</span>
    <span class="hljs-string">"sourceType"</span>: <span class="hljs-string">"module"</span>, <span class="hljs-comment">// æ¨¡å—åŒ–ä»£ç  (ä½¿ç”¨ import/export)</span>
    <span class="hljs-string">"ecmaFeatures"</span>: {
      <span class="hljs-string">"jsx"</span>: <span class="hljs-literal">true</span>           <span class="hljs-comment">// å¯ç”¨ JSX</span>
    }
  }
};
</code></pre>
<h2 data-id="heading-15">ä¹ã€è‡ªå®šä¹‰è§£æå™¨ (Custom Parser)</h2>
<p>å½“ä½ ä½¿ç”¨éæ ‡å‡†JavaScriptæ—¶ï¼Œéœ€è¦æ›´æ¢è§£æå™¨ã€‚</p>
<h3 data-id="heading-16">å¸¸è§ç”¨ä¾‹</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// .eslintrc.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">parser</span>: <span class="hljs-string">"@typescript-eslint/parser"</span>,  <span class="hljs-comment">// ç”¨äº TypeScript</span>
  <span class="hljs-comment">// æˆ–è€…</span>
  <span class="hljs-attr">parser</span>: <span class="hljs-string">"vue-eslint-parser"</span>           <span class="hljs-comment">// ç”¨äº Vue å•æ–‡ä»¶ç»„ä»¶</span>
};
</code></pre>
<h2 data-id="heading-17">åã€å¿½ç•¥æ–‡ä»¶ (Ignoring Files)</h2>
<p>æœ‰äº›æ–‡ä»¶ä¸éœ€è¦è¢«æ£€æŸ¥ï¼Œå¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å¿½ç•¥</p>
<h3 data-id="heading-18">.eslintignore æ–‡ä»¶</h3>
<pre><code class="hljs language-js" lang="js">node_modules/
dist/
build/
*.<span class="hljs-property">min</span>.<span class="hljs-property">js</span>
!important.<span class="hljs-property">js</span>  # ä¾‹å¤–ï¼Œä¸å¿½ç•¥ important.<span class="hljs-property">js</span>
</code></pre>
<h3 data-id="heading-19">åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// .eslintrc.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">ignorePatterns</span>: [<span class="hljs-string">"temp.js"</span>, <span class="hljs-string">"**/vendor/*.js"</span>]
};
</code></pre>
<h2 data-id="heading-20">åä¸€ã€å‘½ä»¤è¡Œæ¥å£ (CLI) å®ç”¨æŠ€å·§</h2>
<p>eslintå‘½ä»¤è¡Œæä¾›äº†å¾ˆå¤šå®ç”¨é€‰é¡¹</p>
<pre><code class="hljs language-js" lang="js"># åŸºæœ¬æ£€æŸ¥
npx eslint src/

# æ£€æŸ¥å¹¶è‡ªåŠ¨ä¿®å¤é—®é¢˜
npx eslint src/ --fix

# æŒ‡å®šè¾“å‡ºæ ¼å¼
npx eslint src/ --format compact
npx eslint src/ --format json
npx eslint src/ --format table

# åªæ£€æŸ¥ç‰¹å®šè§„åˆ™
npx eslint src/ --rule <span class="hljs-string">"no-console: error"</span>

# ç”ŸæˆæŠ¥å‘Šæ–‡ä»¶
npx eslint src/ --output-file eslint-report.<span class="hljs-property">html</span>

# åœ¨<span class="hljs-variable constant_">CI</span>ç¯å¢ƒä¸­ä½¿ç”¨ï¼ˆç¡®ä¿æœ‰é”™è¯¯æ—¶é€€å‡ºç ä¸ä¸º<span class="hljs-number">0</span>ï¼‰
npx eslint src/ --max-warnings <span class="hljs-number">0</span>
</code></pre>
<h2 data-id="heading-21">åäºŒã€æ ¼å¼åŒ–å™¨ (Formatters)</h2>
<p>æ ¼å¼åŒ–å™¨æ§åˆ¶æ£€æŸ¥ç»“æœçš„æ˜¾ç¤ºæ ·å¼</p>
<pre><code class="hljs language-js" lang="js"># ä½¿ç”¨ä¸åŒçš„æ ¼å¼åŒ–å™¨
npx eslint src/ --format stylish    # é»˜è®¤ï¼Œå½©è‰²è¾“å‡º
npx eslint src/ --format compact    # ç´§å‡‘æ ¼å¼
npx eslint src/ --format json       # <span class="hljs-title class_">JSON</span>æ ¼å¼ï¼Œä¾¿äºç¨‹åºå¤„ç†
npx eslint src/ --format html       # <span class="hljs-variable constant_">HTML</span>æŠ¥å‘Š
npx eslint src/ --format checkstyle # <span class="hljs-title class_">Checkstyle</span>æ ¼å¼ï¼Œç”¨äº<span class="hljs-variable constant_">CI</span>å·¥å…·
</code></pre>
<h2 data-id="heading-22">åä¸‰ã€ä¸ç¼–è¾‘å™¨é›†æˆ</h2>
<p>å®æ—¶è·å¾—ESLintåé¦ˆæ˜¯æœ€é«˜æ•ˆçš„ä½¿ç”¨æ–¹å¼ï¼š</p>
<ul>
<li><strong>VS Code</strong>ï¼šå®‰è£… "ESLint" æ‰©å±•</li>
<li><strong>WebStorm</strong>ï¼šå†…ç½®æ”¯æŒï¼Œåœ¨è®¾ç½®ä¸­å¯ç”¨</li>
<li><strong>Sublime Text</strong>ï¼šå®‰è£… "SublimeLinter-eslint"</li>
<li><strong>Atom</strong>ï¼šå®‰è£… "linter-eslint"</li>
</ul>
<h3 data-id="heading-23">VS Codeé…ç½®ç¤ºä¾‹ï¼ˆåœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º .vscode/settings.jsonï¼‰</h3>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-string">"eslint.validate"</span>: [
    <span class="hljs-string">"javascript"</span>,
    <span class="hljs-string">"javascriptreact"</span>,
    <span class="hljs-string">"typescript"</span>,
    <span class="hljs-string">"typescriptreact"</span>
  ],
  <span class="hljs-string">"editor.codeActionsOnSave"</span>: {
    <span class="hljs-string">"source.fixAll.eslint"</span>: <span class="hljs-literal">true</span>
  }
}
</code></pre>
<h2 data-id="heading-24">ä¸ªäººé—®é¢˜</h2>
<ol>
<li>æˆ‘ä¸æ¸…æ¥šä¸€ä¸ªé¡¹ç›®å…·ä½“é€‚ç”¨å“ªäº›è§„åˆ™ï¼Ÿ</li>
<li>è®¤è¯†çš„è§„åˆ™ä¸å¤Ÿå¤šï¼Ÿ</li>
<li>è¿™ä¸ªåˆ°åº•æœ‰æ²¡æœ‰ç”¨ï¼Ÿä½ ä»¬å¼€å‘è¿‡ç¨‹ä¸­ä¼šç”¨åˆ°è¿™ä¸ªç©æ„å—ï¼Ÿ</li>
<li>ä½ ä»¬å¯¹eslintæœ‰é‚£äº›è§è§£ï¼Ÿ</li>
</ol>
<h2 data-id="heading-25">ç»“å°¾</h2>
<blockquote>
<p>ä»¥ä¸Šå°±æ˜¯AIæ•™ç»™æˆ‘çš„ä¸œè¥¿ï¼Œä½†æ˜¯è¿˜æœ‰å¾ˆå¤šä¸œè¥¿éœ€è¦å­¦ä¹ ï¼Œå¸Œæœ›å¤§ä½¬ä¸åèµæ•™ï¼ŒåŒæ—¶ä¹Ÿå¸Œæœ›è¿™ä¸ªæ–‡ç« æœªæ¥èƒ½ç»™å…¶ä»–æƒ³è¦å­¦ä¹ eslintçš„æœ‹å‹ç•™ä¸‹ç‚¹ä»€ä¹ˆï¼Œæ¯”å¦‚ç•™è¨€åŒºå„ä½å¤§ä½¬çš„æŒ‡å¯¼ã€‚æ„Ÿè°¢ï¼ï¼ï¼ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CSS è‡ªå®šä¹‰å±æ€§ï¼ˆCSS å˜é‡ï¼‰ï¼šç°ä»£ç½‘é¡µå¼€å‘çš„åˆ©å™¨]]></title>    <link>https://juejin.cn/post/7571404524792954915</link>    <guid>https://juejin.cn/post/7571404524792954915</guid>    <pubDate>2025-11-12T03:45:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571404524792954915" data-draft-id="7571477608392065024" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CSS è‡ªå®šä¹‰å±æ€§ï¼ˆCSS å˜é‡ï¼‰ï¼šç°ä»£ç½‘é¡µå¼€å‘çš„åˆ©å™¨"/> <meta itemprop="keywords" content="CSS"/> <meta itemprop="datePublished" content="2025-11-12T03:45:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="www_stdio"/> <meta itemprop="url" content="https://juejin.cn/user/631558156323657"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CSS è‡ªå®šä¹‰å±æ€§ï¼ˆCSS å˜é‡ï¼‰ï¼šç°ä»£ç½‘é¡µå¼€å‘çš„åˆ©å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/631558156323657/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    www_stdio
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T03:45:10.000Z" title="Wed Nov 12 2025 03:45:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">CSS è‡ªå®šä¹‰å±æ€§ï¼ˆCSS å˜é‡ï¼‰ï¼šç°ä»£ç½‘é¡µå¼€å‘çš„åˆ©å™¨</h2>
<p>åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼Œ<strong>CSS è‡ªå®šä¹‰å±æ€§</strong>ï¼ˆä¹Ÿè¢«ç§°ä¸º <strong>CSS å˜é‡</strong>ï¼‰å·²ç»æˆä¸ºæå‡æ ·å¼å¯ç»´æŠ¤æ€§ã€çµæ´»æ€§å’ŒåŠ¨æ€äº¤äº’èƒ½åŠ›çš„é‡è¦å·¥å…·ã€‚è‡ª CSS4 è§„èŒƒå¼•å…¥ä»¥æ¥ï¼ŒCSS å˜é‡å‡­å€Ÿå…¶åŸç”Ÿæ”¯æŒã€ä½œç”¨åŸŸæ¸…æ™°ã€ä¸ JavaScript æ— ç¼é›†æˆç­‰ä¼˜åŠ¿ï¼Œè¢«å¹¿æ³›åº”ç”¨äºå„ç±»é¡¹ç›®ä¸­ã€‚</p>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯ CSS å˜é‡ï¼Ÿ</h3>
<p>CSS å˜é‡æ˜¯ä¸€ç§ç”±å¼€å‘è€…å®šä¹‰çš„ã€ä»¥ <code>--</code> å¼€å¤´çš„å±æ€§åï¼Œå…¶å€¼å¯ä»¥åœ¨æ•´ä¸ªæ ·å¼è¡¨ä¸­è¢«å¤ç”¨ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--primary-color</span>: <span class="hljs-number">#3498db</span>;
  <span class="hljs-attr">--font-size</span>: <span class="hljs-number">16px</span>;
}
</code></pre>
<p>é€šè¿‡ <code>var()</code> å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶ä»– CSS è§„åˆ™ä¸­å¼•ç”¨è¿™äº›å˜é‡ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--primary-color);
  <span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">var</span>(--font-size);
}
</code></pre>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆä½¿ç”¨ CSS å˜é‡ï¼Ÿ</h3>
<h4 data-id="heading-3">1. <strong>ç»Ÿä¸€ç®¡ç†è®¾è®¡ç³»ç»Ÿ</strong></h4>
<p>åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œé¢œè‰²ã€é—´è·ã€å­—ä½“å¤§å°ç­‰è®¾è®¡å…ƒç´ å¾€å¾€éœ€è¦ä¿æŒä¸€è‡´ã€‚ä½¿ç”¨ CSS å˜é‡å¯ä»¥å°†è¿™äº›â€œè®¾è®¡ä»¤ç‰Œâ€ï¼ˆDesign Tokensï¼‰é›†ä¸­å®šä¹‰åœ¨ <code>:root</code> æˆ–ä¸»é¢˜ç±»ä¸­ï¼Œå®ç°ä¸€å¤„ä¿®æ”¹ã€å…¨å±€ç”Ÿæ•ˆã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--spacing-sm</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attr">--spacing-md</span>: <span class="hljs-number">16px</span>;
  <span class="hljs-attr">--spacing-lg</span>: <span class="hljs-number">24px</span>;
  <span class="hljs-attr">--radius</span>: <span class="hljs-number">4px</span>;
}
<span class="hljs-selector-class">.card</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-built_in">var</span>(--spacing-md);
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-built_in">var</span>(--radius);
}
</code></pre>
<h4 data-id="heading-4">2. <strong>æ”¯æŒä½œç”¨åŸŸå’Œç»§æ‰¿</strong></h4>
<p>CSS å˜é‡éµå¾ªæ­£å¸¸çš„ CSS ç»§æ‰¿è§„åˆ™ï¼Œå¯ä»¥åœ¨ä»»æ„é€‰æ‹©å™¨ä¸­å®šä¹‰ï¼Œå¹¶ä»…åœ¨è¯¥ä½œç”¨åŸŸå†…ç”Ÿæ•ˆã€‚è¿™ä½¿å¾—å±€éƒ¨ä¸»é¢˜åˆ‡æ¢æˆ–ç»„ä»¶å®šåˆ¶å˜å¾—éå¸¸ç®€å•ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.dark-theme</span> {
  <span class="hljs-attr">--bg-color</span>: <span class="hljs-number">#1e1e1e</span>;
  <span class="hljs-attr">--text-color</span>: <span class="hljs-number">#f0f0f0</span>;
}
<span class="hljs-selector-class">.light-theme</span> {
  <span class="hljs-attr">--bg-color</span>: <span class="hljs-number">#ffffff</span>;
  <span class="hljs-attr">--text-color</span>: <span class="hljs-number">#333333</span>;
}
<span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--bg-color);
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--text-color);
}
</code></pre>
<h4 data-id="heading-5">3. <strong>ä¸ JavaScript åŠ¨æ€äº¤äº’</strong></h4>
<p>é€šè¿‡ <code>document.documentElement.style.setProperty()</code>ï¼ŒJavaScript å¯ä»¥å®æ—¶ä¿®æ”¹ CSS å˜é‡ï¼Œä»è€Œå®ç°æ— éœ€é‡ç»˜ DOM çš„åŠ¨æ€æ ·å¼æ›´æ–°ã€‚è¿™å¯¹äºæ„å»ºäº¤äº’å¼ UIï¼ˆå¦‚ä¸»é¢˜åˆ‡æ¢å™¨ã€å®æ—¶æ»¤é•œè°ƒèŠ‚ç­‰ï¼‰æä¸ºé«˜æ•ˆã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŠ¨æ€æ”¹å˜ä¸»è‰²è°ƒ</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--primary-color'</span>, <span class="hljs-string">'#e74c3c'</span>);
</code></pre>
<h4 data-id="heading-6">4. <strong>æé«˜ä»£ç å¯è¯»æ€§ä¸å¯ç»´æŠ¤æ€§</strong></h4>
<p>ä½¿ç”¨è¯­ä¹‰åŒ–çš„å˜é‡åï¼ˆå¦‚ <code>--button-height</code> è€Œé <code>40px</code>ï¼‰è®© CSS æ›´å…·è¡¨è¾¾åŠ›ï¼Œé™ä½åæœŸç»´æŠ¤æˆæœ¬ã€‚</p>
<h3 data-id="heading-7">å®é™…åº”ç”¨åœºæ™¯</h3>
<ul>
<li><strong>ä¸»é¢˜åˆ‡æ¢</strong>ï¼šé€šè¿‡åˆ‡æ¢æ ¹å…ƒç´ ä¸Šçš„ class æˆ–ç›´æ¥ä¿®æ”¹å˜é‡å€¼ï¼Œå®ç°äº®/æš—æ¨¡å¼ã€‚</li>
<li><strong>å“åº”å¼è®¾è®¡</strong>ï¼šç»“åˆåª’ä½“æŸ¥è¯¢åŠ¨æ€è°ƒæ•´å˜é‡å€¼ã€‚</li>
<li><strong>åŠ¨ç”»æ§åˆ¶</strong>ï¼šç”¨å˜é‡æ§åˆ¶åŠ¨ç”»æ—¶é•¿ã€å»¶è¿Ÿç­‰å‚æ•°ã€‚</li>
<li><strong>ç»„ä»¶åº“å¼€å‘</strong>ï¼šæš´éœ²å˜é‡ä½œä¸ºâ€œAPIâ€ï¼Œå…è®¸ç”¨æˆ·è‡ªå®šä¹‰ç»„ä»¶å¤–è§‚ã€‚</li>
</ul>
<h3 data-id="heading-8">æ³¨æ„äº‹é¡¹</h3>
<ul>
<li>å˜é‡ååŒºåˆ†å¤§å°å†™ï¼š<code>--mainColor</code> å’Œ <code>--maincolor</code> æ˜¯ä¸¤ä¸ªä¸åŒçš„å˜é‡ã€‚</li>
<li>å¦‚æœæœªå®šä¹‰å˜é‡æˆ–å¼•ç”¨é”™è¯¯ï¼Œ<code>var()</code> ä¼šä½¿ç”¨å…¶ fallback å€¼ï¼ˆå¦‚æœ‰ï¼‰ï¼Œå¦åˆ™å¯èƒ½å›é€€åˆ°å±æ€§çš„åˆå§‹å€¼ã€‚</li>
<li>æ”¯æŒæ‰€æœ‰ç°ä»£æµè§ˆå™¨ï¼ˆIE ä¸æ”¯æŒï¼‰ï¼Œä½†åœ¨å®é™…é¡¹ç›®ä¸­å¯é€šè¿‡ PostCSS ç­‰å·¥å…·è¿›è¡Œé™çº§å¤„ç†ã€‚</li>
</ul>
<h3 data-id="heading-9">ç»“è¯­</h3>
<p>CSS è‡ªå®šä¹‰å±æ€§ä¸ä»…ç®€åŒ–äº†æ ·å¼çš„ç»„ç»‡æ–¹å¼ï¼Œæ›´æ‰“é€šäº† CSS ä¸ JavaScript ä¹‹é—´çš„æ•°æ®é€šé“ï¼Œä½¿å‰ç«¯å¼€å‘æ›´åŠ æ¨¡å—åŒ–ã€åŠ¨æ€åŒ–å’Œå·¥ç¨‹åŒ–ã€‚æŒæ¡ CSS å˜é‡ï¼Œæ˜¯è¿ˆå‘ç°ä»£åŒ– CSS å¼€å‘çš„é‡è¦ä¸€æ­¥ã€‚æ— è®ºä½ æ˜¯æ„å»ºä¸ªäººåšå®¢è¿˜æ˜¯ä¼ä¸šçº§åº”ç”¨ï¼Œå®ƒéƒ½å€¼å¾—æˆä¸ºä½ å·¥å…·ç®±ä¸­çš„å¸¸å¤‡æŠ€èƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®¾è®¡æ¨¡å¼å¥‡å¹»æ¼‚æµï¼šä»å•ä¾‹å­¤å²›åˆ°å·¥å‚æµæ°´çº¿]]></title>    <link>https://juejin.cn/post/7571456639476449290</link>    <guid>https://juejin.cn/post/7571456639476449290</guid>    <pubDate>2025-11-12T06:43:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571456639476449290" data-draft-id="7571395183944171529" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®¾è®¡æ¨¡å¼å¥‡å¹»æ¼‚æµï¼šä»å•ä¾‹å­¤å²›åˆ°å·¥å‚æµæ°´çº¿"/> <meta itemprop="keywords" content="å‰ç«¯,è®¾è®¡æ¨¡å¼"/> <meta itemprop="datePublished" content="2025-11-12T06:43:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="FogLetter"/> <meta itemprop="url" content="https://juejin.cn/user/933907109778611"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®¾è®¡æ¨¡å¼å¥‡å¹»æ¼‚æµï¼šä»å•ä¾‹å­¤å²›åˆ°å·¥å‚æµæ°´çº¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/933907109778611/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    FogLetter
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T06:43:53.000Z" title="Wed Nov 12 2025 06:43:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ·±å…¥æµ…å‡ºè®¾è®¡æ¨¡å¼ï¼ŒæŒæ¡ä»£ç æ¶æ„çš„é­”æ³•ç§˜ç±</p>
</blockquote>
<p>å¤§å®¶å¥½ï¼æˆ‘æ˜¯ä½ ä»¬çš„æŠ€æœ¯å°ä¼™ä¼´FogLetterï¼Œä»Šå¤©æˆ‘ä»¬è¦ä¸€èµ·è¸ä¸Šä¸€æ®µè®¾è®¡æ¨¡å¼çš„å¥‡å¹»ä¹‹æ—…ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœä½ æ˜¯ä¸€åé­”æ³•å¸ˆï¼Œè®¾è®¡æ¨¡å¼å°±æ˜¯ä½ çš„é­”æ³•å’’è¯­â€”â€”å®ƒä»¬èƒ½è®©ä½ ç”¨æ›´ä¼˜é›…ã€æ›´å¼ºå¤§çš„æ–¹å¼æ„å»ºä»£ç ä¸–ç•Œï¼</p>
<h2 data-id="heading-0">ç¼˜èµ·ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦è®¾è®¡æ¨¡å¼ï¼Ÿ</h2>
<p>è¿˜è®°å¾—åˆšå­¦ç¼–ç¨‹æ—¶ï¼Œæˆ‘ä»¬æ€»æ˜¯æ€¥äºå®ç°åŠŸèƒ½ï¼ŒæŠŠä»£ç å †ç Œåœ¨ä¸€èµ·ã€‚éšç€é¡¹ç›®è¶Šæ¥è¶Šå¤æ‚ï¼Œçªç„¶å‘ç°è‡ªå·±é™·å…¥äº†ä¸€ç‰‡æ··ä¹±çš„ä»£ç ä¸›æ—ï¼š</p>
<ul>
<li>ä¿®æ”¹ä¸€ä¸ªå°åŠŸèƒ½ï¼Œå´å¼•å‘äº†ä¸€è¿ä¸²çš„bug</li>
<li>åŒæ ·çš„ä»£ç åœ¨ä¸åŒåœ°æ–¹é‡å¤å‡ºç°</li>
<li>æ–°åŒäº‹è¦èŠ±å¥½å‡ å¤©æ‰èƒ½ç†è§£ä½ çš„ä»£ç é€»è¾‘</li>
</ul>
<p>è¿™æ—¶å€™ï¼Œè®¾è®¡æ¨¡å¼å°±åƒä¸€å¼ ç²¾å¿ƒç»˜åˆ¶çš„åœ°å›¾ï¼ŒæŒ‡å¼•æˆ‘ä»¬èµ°å‡ºè¿™ç‰‡ä¸›æ—ã€‚å®ƒä»¬ä¸æ˜¯å…·ä½“çš„ä»£ç ï¼Œè€Œæ˜¯ç»è¿‡åƒé”¤ç™¾ç‚¼çš„æœ€ä½³å®è·µï¼Œæ˜¯å‰è¾ˆç¨‹åºå‘˜ä»¬æ™ºæ…§çš„ç»“æ™¶ã€‚</p>
<h2 data-id="heading-1">å•ä¾‹æ¨¡å¼ï¼šç‹¬ä¸€æ— äºŒçš„ç‹è€…</h2>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼ï¼Ÿ</h3>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œåœ¨ä¸€ä¸ªç‹å›½ä¸­åªèƒ½æœ‰ä¸€ä½å›½ç‹â€”â€”è¿™å°±æ˜¯å•ä¾‹æ¨¡å¼çš„ç²¾é«“ã€‚å®ƒç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹ã€‚</p>
<h3 data-id="heading-3">é—­åŒ…å®ç°çš„å•ä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Singleton</span> = (<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> instance;
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">createInstance</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">name</span>: <span class="hljs-string">'MySingleton'</span>,
            <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(),
            <span class="hljs-title function_">sayHello</span>(<span class="hljs-params"/>) {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Hello from '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
            }
        };
    }
    
    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">getInstance</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">if</span> (!instance) {
                instance = <span class="hljs-title function_">createInstance</span>();
            }
            <span class="hljs-keyword">return</span> instance;
        }
    };
})();

<span class="hljs-comment">// æµ‹è¯•ä¸€ä¸‹</span>
<span class="hljs-keyword">const</span> obj1 = <span class="hljs-title class_">Singleton</span>.<span class="hljs-title function_">getInstance</span>();
<span class="hljs-keyword">const</span> obj2 = <span class="hljs-title class_">Singleton</span>.<span class="hljs-title function_">getInstance</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj1 === obj2); <span class="hljs-comment">// true - ç¡®å®æ˜¯åŒä¸€ä¸ªå®ä¾‹ï¼</span>
</code></pre>
<p>è¿™ä¸ªå®ç°å¾ˆå·§å¦™ï¼Œåˆ©ç”¨äº†é—­åŒ…çš„ç‰¹æ€§ï¼š<code>instance</code> å˜é‡è¢«å°è£…åœ¨ IIFEï¼ˆç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼ï¼‰ä¸­ï¼Œå¤–éƒ¨æ— æ³•ç›´æ¥è®¿é—®ï¼Œåªèƒ½é€šè¿‡æš´éœ²çš„ <code>getInstance</code> æ–¹æ³•æ¥è·å–å®ä¾‹ã€‚</p>
<h3 data-id="heading-4">ç°ä»£ç‰ˆçš„ç®€æ´å®ç°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Singleton</span> = (<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">let</span> instance;
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> instance || (instance = {
        <span class="hljs-attr">name</span>: <span class="hljs-string">'MySingleton'</span>,
        <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()
    });
})();
</code></pre>
<p>ç®­å¤´å‡½æ•°è®©ä»£ç æ›´åŠ ç®€æ´ï¼Œä½†åŸç†æ˜¯ä¸€æ ·çš„ã€‚</p>
<h3 data-id="heading-5">é¢å‘å¯¹è±¡é£æ ¼çš„å•ä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span> {
    <span class="hljs-keyword">static</span> #instance = <span class="hljs-literal">null</span>; <span class="hljs-comment">// ç§æœ‰é™æ€å­—æ®µ</span>
    
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Singleton</span>.#instance) {
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">Singleton</span>.#instance; <span class="hljs-comment">// å¦‚æœå·²å­˜åœ¨å®ä¾‹ï¼Œç›´æ¥è¿”å›</span>
        }
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name || <span class="hljs-string">'ClassSingleton'</span>;
        <span class="hljs-title class_">Singleton</span>.#instance = <span class="hljs-variable language_">this</span>;
    }
    
    <span class="hljs-keyword">static</span> <span class="hljs-title function_">getInstance</span>(<span class="hljs-params">name</span>) {
        <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Singleton</span>.#instance) {
            <span class="hljs-title class_">Singleton</span>.#instance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Singleton</span>(name);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Singleton</span>.#instance;
    }
}
</code></pre>
<p>è¿™é‡Œä½¿ç”¨äº† ES2022 çš„ç§æœ‰å­—æ®µè¯­æ³• <code>#instance</code>ï¼Œç¡®ä¿å®ä¾‹å˜é‡ä¸ä¼šè¢«å¤–éƒ¨è®¿é—®åˆ°ã€‚</p>
<h3 data-id="heading-6">å•ä¾‹æ¨¡å¼çš„å®é™…åº”ç”¨åœºæ™¯</h3>
<ol>
<li><strong>å…¨å±€é…ç½®ç®¡ç†å™¨</strong> - æ•´ä¸ªåº”ç”¨åªéœ€è¦ä¸€ä¸ªé…ç½®å¯¹è±¡</li>
<li><strong>æ•°æ®åº“è¿æ¥æ± </strong> - é¿å…é¢‘ç¹åˆ›å»ºå’Œé”€æ¯è¿æ¥</li>
<li><strong>æ—¥å¿—è®°å½•å™¨</strong> - æ‰€æœ‰æ—¥å¿—é€šè¿‡åŒä¸€ä¸ªå®ä¾‹è®°å½•</li>
<li><strong>ç¼“å­˜ç³»ç»Ÿ</strong> - ç»Ÿä¸€ç®¡ç†åº”ç”¨çº§ç¼“å­˜</li>
</ol>
<p><strong>æ³¨æ„</strong>ï¼šå•ä¾‹æ¨¡å¼è™½ç„¶æ–¹ä¾¿ï¼Œä½†è¦è°¨æ…ä½¿ç”¨ã€‚å®ƒç›¸å½“äºå…¨å±€å˜é‡ï¼Œè¿‡åº¦ä½¿ç”¨ä¼šå¯¼è‡´ä»£ç è€¦åˆåº¦å¢åŠ ï¼Œæµ‹è¯•å›°éš¾ã€‚</p>
<h2 data-id="heading-7">å·¥å‚æ¨¡å¼ï¼šå¯¹è±¡çš„"ç”Ÿäº§æµæ°´çº¿"</h2>
<h3 data-id="heading-8">ä¸ºä»€ä¹ˆéœ€è¦å·¥å‚ï¼Ÿ</h3>
<p>æƒ³è±¡ä½ è¦å¼€ä¸€å®¶æŠ«è¨åº—ã€‚é¡¾å®¢ç‚¹é¤æ—¶ï¼Œä½ ä¸éœ€è¦å‘Šè¯‰ä»–ä»¬å¦‚ä½•åˆ¶ä½œæŠ«è¨çš„æ¯ä¸€ä¸ªç»†èŠ‚ï¼Œåªéœ€è¦è¯´"æˆ‘è¦ä¸€ä¸ªæµ·é²œæŠ«è¨"ï¼Œå¨æˆ¿å°±ä¼šåˆ¶ä½œå‡ºå¯¹åº”çš„æŠ«è¨ã€‚</p>
<p>è¿™å°±æ˜¯å·¥å‚æ¨¡å¼çš„æ€æƒ³ï¼š<strong>é’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œè€Œä¸æ˜¯å®ç°</strong>ã€‚</p>
<h3 data-id="heading-9">å·¥å‚æ¨¡å¼å®æˆ˜</h3>
<p>å‡è®¾æˆ‘ä»¬æ­£åœ¨å¼€å‘ä¸€ä¸ªå›¾å½¢ç»˜åˆ¶åº”ç”¨ï¼Œéœ€è¦åˆ›å»ºå„ç§å½¢çŠ¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ†å½¢</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">radius</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">radius</span> = radius;
    }
    <span class="hljs-title function_">area</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">radius</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">radius</span>;
    }
}

<span class="hljs-comment">// çŸ©å½¢</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">width, height</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span> = width;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span> = height;
    }
    <span class="hljs-title function_">area</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span>;
    }
}

<span class="hljs-comment">// å½¢çŠ¶å·¥å‚ - æˆ‘ä»¬çš„"å¨æˆ¿"</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ShapeFactory</span> {
    <span class="hljs-keyword">static</span> <span class="hljs-title function_">createShape</span>(<span class="hljs-params">type, options</span>) {
        <span class="hljs-keyword">switch</span> (type) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">'circle'</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Circle</span>(options.<span class="hljs-property">radius</span>);
            <span class="hljs-keyword">case</span> <span class="hljs-string">'rectangle'</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Rectangle</span>(options.<span class="hljs-property">width</span>, options.<span class="hljs-property">height</span>);
            <span class="hljs-attr">default</span>:
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Unknown shape type'</span>);
        }
    }
}

<span class="hljs-comment">// ç‚¹é¤å•¦ï¼</span>
<span class="hljs-keyword">const</span> circle = <span class="hljs-title class_">ShapeFactory</span>.<span class="hljs-title function_">createShape</span>(<span class="hljs-string">'circle'</span>, { <span class="hljs-attr">radius</span>: <span class="hljs-number">5</span> });
<span class="hljs-keyword">const</span> rectangle = <span class="hljs-title class_">ShapeFactory</span>.<span class="hljs-title function_">createShape</span>(<span class="hljs-string">'rectangle'</span>, { 
    <span class="hljs-attr">width</span>: <span class="hljs-number">4</span>, 
    <span class="hljs-attr">height</span>: <span class="hljs-number">6</span> 
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(circle.<span class="hljs-title function_">area</span>());    <span class="hljs-comment">// 78.53981633974483</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(rectangle.<span class="hljs-title function_">area</span>()); <span class="hljs-comment">// 24</span>
</code></pre>
<h3 data-id="heading-10">å·¥å‚æ¨¡å¼çš„ä¼˜åŠ¿</h3>
<ol>
<li><strong>å°è£…åˆ›å»ºé€»è¾‘</strong>ï¼šå®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“å¯¹è±¡åˆ›å»ºçš„å…·ä½“ç»†èŠ‚</li>
<li><strong>æ˜“äºæ‰©å±•</strong>ï¼šæ·»åŠ æ–°çš„å½¢çŠ¶ç±»å‹æ—¶ï¼Œåªéœ€è¦ä¿®æ”¹å·¥å‚ç±»</li>
<li><strong>ä»£ç å¤ç”¨</strong>ï¼šåˆ›å»ºé€»è¾‘é›†ä¸­åœ¨ä¸€å¤„ï¼Œé¿å…é‡å¤ä»£ç </li>
<li><strong>è§£è€¦åˆ</strong>ï¼šå®¢æˆ·ç«¯ä»£ç ä¸å…·ä½“ç±»è§£è€¦</li>
</ol>
<h3 data-id="heading-11">å®é™…åº”ç”¨åœºæ™¯</h3>
<ol>
<li><strong>UIç»„ä»¶åº“</strong>ï¼šæ ¹æ®é…ç½®åˆ›å»ºä¸åŒçš„ç»„ä»¶</li>
<li><strong>æ•°æ®åº“è®¿é—®</strong>ï¼šæ ¹æ®æ•°æ®åº“ç±»å‹åˆ›å»ºä¸åŒçš„è¿æ¥å¯¹è±¡</li>
<li><strong>æ–‡ä»¶è§£æå™¨</strong>ï¼šæ ¹æ®æ–‡ä»¶æ ¼å¼åˆ›å»ºä¸åŒçš„è§£æå™¨</li>
<li><strong>æ¸¸æˆå¼€å‘</strong>ï¼šæ ¹æ®ç±»å‹åˆ›å»ºä¸åŒçš„æ•Œäººæˆ–é“å…·</li>
</ol>
<h2 data-id="heading-12">è®¾è®¡æ¨¡å¼çš„å“²å­¦æ€è€ƒ</h2>
<h3 data-id="heading-13">é’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œè€Œä¸æ˜¯å®ç°</h3>
<p>è¿™å¥è¯æ˜¯è®¾è®¡æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³ã€‚è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥ç†è§£ï¼š</p>
<p><strong>ä¸å¥½çš„åšæ³•ï¼ˆé’ˆå¯¹å®ç°ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateArea</span>(<span class="hljs-params">shape</span>) {
    <span class="hljs-keyword">if</span> (shape.<span class="hljs-property">type</span> === <span class="hljs-string">'circle'</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * shape.<span class="hljs-property">radius</span> * shape.<span class="hljs-property">radius</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (shape.<span class="hljs-property">type</span> === <span class="hljs-string">'rectangle'</span>) {
        <span class="hljs-keyword">return</span> shape.<span class="hljs-property">width</span> * shape.<span class="hljs-property">height</span>;
    }
    <span class="hljs-comment">// æ¯å¢åŠ ä¸€ç§æ–°å½¢çŠ¶ï¼Œéƒ½è¦ä¿®æ”¹è¿™ä¸ªå‡½æ•°</span>
}
</code></pre>
<p><strong>å¥½çš„åšæ³•ï¼ˆé’ˆå¯¹æ¥å£ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateArea</span>(<span class="hljs-params">shape</span>) {
    <span class="hljs-keyword">return</span> shape.<span class="hljs-title function_">area</span>(); <span class="hljs-comment">// åªè¦éƒ½æœ‰areaæ–¹æ³•ï¼Œæˆ‘å°±ä¸å…³å¿ƒå…·ä½“å®ç°</span>
}
</code></pre>
<h3 data-id="heading-14">å¼€é—­åŸåˆ™</h3>
<p>è½¯ä»¶å®ä½“åº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚å·¥å‚æ¨¡å¼å®Œç¾ä½“ç°äº†è¿™ä¸€åŸåˆ™ï¼šå½“éœ€è¦æ·»åŠ æ–°çš„äº§å“ç±»å‹æ—¶ï¼Œæˆ‘ä»¬æ‰©å±•å·¥å‚ç±»è€Œä¸æ˜¯ä¿®æ”¹ç°æœ‰ä»£ç ã€‚</p>
<h2 data-id="heading-15">æ›´å¤šè®¾è®¡æ¨¡å¼åˆæ¢</h2>
<h3 data-id="heading-16">ä»£ç†æ¨¡å¼ï¼šæ‰¾ä¸ª"æ›¿èº«"å¸®å¿™</h3>
<p>ä»£ç†æ¨¡å¼ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// çœŸå®çš„æœåŠ¡</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">RealImage</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">filename</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">filename</span> = filename;
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadFromDisk</span>();
    }
    
    <span class="hljs-title function_">display</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Displaying <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.filename}</span>`</span>);
    }
    
    <span class="hljs-title function_">loadFromDisk</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Loading <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.filename}</span> from disk...`</span>);
    }
}

<span class="hljs-comment">// ä»£ç† - å»¶è¿ŸåŠ è½½å’Œè®¿é—®æ§åˆ¶</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ProxyImage</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">filename</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">filename</span> = filename;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">realImage</span> = <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-title function_">display</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">realImage</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">realImage</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RealImage</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">filename</span>);
        }
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">realImage</span>.<span class="hljs-title function_">display</span>();
    }
}

<span class="hljs-comment">// ä½¿ç”¨ä»£ç†</span>
<span class="hljs-keyword">const</span> image = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProxyImage</span>(<span class="hljs-string">"photo.jpg"</span>);
<span class="hljs-comment">// æ­¤æ—¶å›¾ç‰‡è¿˜æ²¡æœ‰åŠ è½½</span>
image.<span class="hljs-title function_">display</span>(); <span class="hljs-comment">// ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶æ‰åŠ è½½å¹¶æ˜¾ç¤º</span>
</code></pre>
<h3 data-id="heading-17">è§‚å¯Ÿè€…æ¨¡å¼ï¼šæˆ‘å…³å¿ƒçš„äº‹æƒ…æœ‰æ¶ˆæ¯äº†ï¼</h3>
<p>è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªä¸»é¢˜å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸»é¢˜ï¼ˆè¢«è§‚å¯Ÿè€…ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Subject</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span> = [];
    }
    
    <span class="hljs-title function_">addObserver</span>(<span class="hljs-params">observer</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">push</span>(observer);
    }
    
    <span class="hljs-title function_">removeObserver</span>(<span class="hljs-params">observer</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">obs</span> =&gt;</span> obs !== observer);
    }
    
    <span class="hljs-title function_">notify</span>(<span class="hljs-params">data</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">observer</span> =&gt;</span> observer.<span class="hljs-title function_">update</span>(data));
    }
}

<span class="hljs-comment">// è§‚å¯Ÿè€…</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Observer</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    }
    
    <span class="hljs-title function_">update</span>(<span class="hljs-params">data</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> received:`</span>, data);
    }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> newsSubject = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Subject</span>();

<span class="hljs-keyword">const</span> reader1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Observer</span>(<span class="hljs-string">'å°æ˜'</span>);
<span class="hljs-keyword">const</span> reader2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Observer</span>(<span class="hljs-string">'å°çº¢'</span>);

newsSubject.<span class="hljs-title function_">addObserver</span>(reader1);
newsSubject.<span class="hljs-title function_">addObserver</span>(reader2);

<span class="hljs-comment">// å‘å¸ƒæ–°é—»</span>
newsSubject.<span class="hljs-title function_">notify</span>(<span class="hljs-string">'JavaScript æ–°ç‰¹æ€§å‘å¸ƒï¼'</span>);
<span class="hljs-comment">// å°æ˜ received: JavaScript æ–°ç‰¹æ€§å‘å¸ƒï¼</span>
<span class="hljs-comment">// å°çº¢ received: JavaScript æ–°ç‰¹æ€§å‘å¸ƒï¼</span>
</code></pre>
<h3 data-id="heading-18">å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼šæ›´æ¾æ•£çš„è€¦åˆ</h3>
<p>å‘å¸ƒè®¢é˜…æ¨¡å¼æ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„å˜ä½“ï¼Œé€šè¿‡äº‹ä»¶é€šé“æ¥é€šä¿¡ï¼Œå‘å¸ƒè€…å’Œè®¢é˜…è€…ä¸éœ€è¦çŸ¥é“å½¼æ­¤çš„å­˜åœ¨ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">EventEmitter</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span> = {};
    }
    
    <span class="hljs-title function_">on</span>(<span class="hljs-params">event, listener</span>) {
        <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[event]) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[event] = [];
        }
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[event].<span class="hljs-title function_">push</span>(listener);
    }
    
    <span class="hljs-title function_">emit</span>(<span class="hljs-params">event, data</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[event]) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[event].<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">listener</span> =&gt;</span> <span class="hljs-title function_">listener</span>(data));
        }
    }
    
    <span class="hljs-title function_">off</span>(<span class="hljs-params">event, listener</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[event]) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[event] = <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[event].<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">l</span> =&gt;</span> l !== listener);
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> eventBus = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventEmitter</span>();

<span class="hljs-comment">// è®¢é˜…è€…A</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">subscriberA</span> = (<span class="hljs-params">data</span>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è®¢é˜…è€…Aæ”¶åˆ°æ¶ˆæ¯:'</span>, data);
};

<span class="hljs-comment">// è®¢é˜…è€…B</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">subscriberB</span> = (<span class="hljs-params">data</span>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è®¢é˜…è€…Bæ”¶åˆ°æ¶ˆæ¯:'</span>, data);
};

<span class="hljs-comment">// è®¢é˜…äº‹ä»¶</span>
eventBus.<span class="hljs-title function_">on</span>(<span class="hljs-string">'news'</span>, subscriberA);
eventBus.<span class="hljs-title function_">on</span>(<span class="hljs-string">'news'</span>, subscriberB);

<span class="hljs-comment">// å‘å¸ƒäº‹ä»¶</span>
eventBus.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'news'</span>, <span class="hljs-string">'è®¾è®¡æ¨¡å¼çœŸçš„å¤ªæœ‰ç”¨äº†ï¼'</span>);

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// è®¢é˜…è€…Aæ”¶åˆ°æ¶ˆæ¯: è®¾è®¡æ¨¡å¼çœŸçš„å¤ªæœ‰ç”¨äº†ï¼</span>
<span class="hljs-comment">// è®¢é˜…è€…Bæ”¶åˆ°æ¶ˆæ¯: è®¾è®¡æ¨¡å¼çœŸçš„å¤ªæœ‰ç”¨äº†ï¼</span>
</code></pre>
<h2 data-id="heading-19">è®¾è®¡æ¨¡å¼çš„å­¦ä¹ å»ºè®®</h2>
<h3 data-id="heading-20">1. ç†è§£æ„å›¾ï¼Œè€Œéæ­»è®°ç¡¬èƒŒ</h3>
<p>ä¸è¦æœºæ¢°è®°å¿†ä»£ç ï¼Œè¦ç†è§£æ¯ä¸ªæ¨¡å¼è¦è§£å†³çš„é—®é¢˜å’Œå®ƒçš„æ ¸å¿ƒæ€æƒ³ã€‚</p>
<h3 data-id="heading-21">2. ç»“åˆå®é™…åœºæ™¯å­¦ä¹ </h3>
<p>åœ¨çœŸå®é¡¹ç›®ä¸­è¯†åˆ«å¯ä»¥ä½¿ç”¨è®¾è®¡æ¨¡å¼çš„åœºæ™¯ï¼Œæ¯”å•çº¯å­¦ä¹ ç†è®ºæ›´æœ‰æ•ˆã€‚</p>
<h3 data-id="heading-22">3. é¿å…è¿‡åº¦è®¾è®¡</h3>
<p>ä¸æ˜¯æ‰€æœ‰åœ°æ–¹éƒ½éœ€è¦è®¾è®¡æ¨¡å¼ã€‚ç®€å•çš„éœ€æ±‚ç”¨ç®€å•çš„ä»£ç ï¼Œå½“å˜åŒ–å’Œæ‰©å±•æˆä¸ºçœŸæ­£éœ€æ±‚æ—¶å†è€ƒè™‘æ¨¡å¼ã€‚</p>
<h3 data-id="heading-23">4. å­¦ä¹ é‡æ„åˆ°æ¨¡å¼</h3>
<p>å…ˆå†™å‡ºå¯å·¥ä½œçš„ä»£ç ï¼Œç„¶åé€šè¿‡é‡æ„é€æ­¥å¼•å…¥åˆé€‚çš„è®¾è®¡æ¨¡å¼ã€‚</p>
<h2 data-id="heading-24">ç»“è¯­</h2>
<p>è®¾è®¡æ¨¡å¼å°±åƒæ˜¯ç¼–ç¨‹ä¸–ç•Œä¸­çš„æ£‹è°±æˆ–è€…æ­¦åŠŸç§˜ç±â€”â€”å®ƒä»¬ä¸æ˜¯é“¶å¼¹ï¼Œä½†æŒæ¡äº†å®ƒä»¬ï¼Œä½ å°±èƒ½åœ¨é¢å¯¹å¤æ‚è®¾è®¡é—®é¢˜æ—¶æ¸¸åˆƒæœ‰ä½™ã€‚</p>
<p>è®°ä½ï¼Œå­¦ä¹ è®¾è®¡æ¨¡å¼çš„æ—…ç¨‹ä¸æ˜¯ä¸€è¹´è€Œå°±çš„ã€‚å°±åƒå­¦æ­¦åŠŸä¸€æ ·ï¼Œå…ˆç†è§£æ‹›å¼ï¼Œç„¶ååœ¨å®æˆ˜ä¸­æ…¢æ…¢ä½“ä¼šå†…åŠŸå¿ƒæ³•ã€‚æœ€ç»ˆï¼Œä½ ä¼šè¾¾åˆ°"æ‰‹ä¸­æ— å‰‘ï¼Œå¿ƒä¸­æœ‰å‰‘"çš„å¢ƒç•Œâ€”â€”ä¸å†æœºæ¢°å¥—ç”¨æ¨¡å¼ï¼Œè€Œæ˜¯è‡ªç„¶åœ°å°†æ¨¡å¼æ€æƒ³èå…¥åˆ°ä½ çš„è®¾è®¡ä¸­ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡ç¬”è®°èƒ½å¸®åŠ©ä½ åœ¨è®¾è®¡æ¨¡å¼çš„å­¦ä¹ ä¹‹è·¯ä¸Šæœ‰æ‰€æ”¶è·ï¼å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–æƒ³æ³•ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµè®¨è®ºï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£ JavaScript æ•°ç»„ï¼šä»åˆ›å»ºåˆ°éå†çš„å®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7571395183945203721</link>    <guid>https://juejin.cn/post/7571395183945203721</guid>    <pubDate>2025-11-12T06:44:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571395183945203721" data-draft-id="7571395183944941577" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£ JavaScript æ•°ç»„ï¼šä»åˆ›å»ºåˆ°éå†çš„å®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-12T06:44:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ohyeah"/> <meta itemprop="url" content="https://juejin.cn/user/740446536480618"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£ JavaScript æ•°ç»„ï¼šä»åˆ›å»ºåˆ°éå†çš„å®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/740446536480618/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ohyeah
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T06:44:28.000Z" title="Wed Nov 12 2025 06:44:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ JavaScript å¼€å‘ä¸­ï¼Œæ•°ç»„æ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨ã€æœ€åŸºç¡€çš„æ•°æ®ç»“æ„ä¹‹ä¸€ã€‚å®ƒä½œä¸ºä¸€ç§<strong>çº¿æ€§æ•°æ®ç»“æ„</strong>ï¼Œä»¥å…¶<strong>è¿ç»­å†…å­˜</strong>å­˜å‚¨å’Œ<strong>å¼€ç®±å³ç”¨</strong>çš„ç‰¹æ€§ï¼Œæˆä¸ºæˆ‘ä»¬å¤„ç†æœ‰åºæ•°æ®é›†åˆçš„é¦–é€‰å·¥å…·ã€‚ä»Šå¤©ï¼Œå°±è®©æˆ‘ä»¬ä¸€èµ·æ¥æ·±å…¥æ¢ç´¢ JavaScript æ•°ç»„çš„å¥¥ç§˜ã€‚</p>
<h2 data-id="heading-0">æ•°ç»„çš„åˆ›å»ºï¼šä¸åªæ˜¯å­—é¢é‡é‚£ä¹ˆç®€å•</h2>
<h3 data-id="heading-1">åŸºç¡€åˆ›å»ºæ–¹å¼</h3>
<p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå½“æˆ‘ä»¬å·²ç»çŸ¥é“æ•°ç»„çš„æ‰€æœ‰å…ƒç´ æ—¶ï¼Œä¼šä½¿ç”¨å­—é¢é‡æ–¹å¼åˆ›å»ºæ•°ç»„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]
</code></pre>
<p>è¿™ç§æ–¹å¼çš„ä»£ç ç®€æ´æ˜äº†ï¼Œ<code>arr</code> åœ¨æ ˆå†…å­˜ä¸­å­˜å‚¨å¼•ç”¨åœ°å€ï¼Œè€Œå®é™…çš„æ•°æ® <code>[1,2,3,4,5,6]</code> åˆ™å­˜å‚¨åœ¨å †å†…å­˜ä¸­ï¼ŒåŒæ—¶ç”³è¯·äº† 6 ä¸ªå•ä½çš„è¿ç»­ç©ºé—´ã€‚</p>
<h3 data-id="heading-2">åŠ¨æ€æ•°ç»„çš„åˆ›å»º</h3>
<p>ä½†åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°ä¸çŸ¥é“å…·ä½“å…ƒç´ çš„æƒ…å†µï¼Œç‰¹åˆ«æ˜¯åœ¨åŠ¨æ€è§„åˆ’ç­‰ç®—æ³•åœºæ™¯ä¸­ã€‚è¿™æ—¶å°±éœ€è¦ä½¿ç”¨æ„é€ å‡½æ•°æ¥åˆ›å»ºæ•°ç»„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªé•¿åº¦ç¡®å®šä¸”æ¯ä¸ªå…ƒç´ éƒ½æœ‰åˆå§‹å€¼çš„æ•°ç»„</span>
<span class="hljs-keyword">const</span> arr = (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">6</span>)).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr) <span class="hljs-comment">// [0, 0, 0, 0, 0, 0]</span>

<span class="hljs-comment">// å¯¹æ¯”ï¼šå¦‚æœä¸ä½¿ç”¨ fill</span>
<span class="hljs-keyword">const</span> arr2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">6</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr2) <span class="hljs-comment">// [empty Ã— 6]</span>
</code></pre>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªé‡è¦åŒºåˆ«ï¼š<code>new Array(6).fill(0)</code> åˆ›å»ºçš„æ˜¯åŒ…å« 6 ä¸ª 0 çš„æ•°ç»„ï¼Œè€Œ <code>new Array(6)</code> åˆ›å»ºçš„åˆ™æ˜¯åŒ…å« 6 ä¸ªç©ºä½çš„æ•°ç»„ã€‚åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå‰è€…æ›´ä¸ºå®‰å…¨å¯é ã€‚</p>
<h3 data-id="heading-3">æ•°ç»„çš„åŠ¨æ€æ‰©å®¹</h3>
<p>JavaScript æ•°ç»„æ”¯æŒåŠ¨æ€æ‰©å®¹ï¼Œè¿™æ—¢æ˜¯ä¼˜ç‚¹ä¹Ÿæ˜¯éœ€è¦æ³¨æ„çš„æ€§èƒ½ç‚¹ã€‚å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º 10 çš„æ•°ç»„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">10</span>)).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>)
</code></pre>
<p>å¦‚æœåç»­éœ€è¦å­˜å‚¨ç¬¬ 11 ä¸ªæ•°æ®ï¼ŒJavaScript å¼•æ“ä¼šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<ol>
<li>ç³»ç»Ÿå¹¶ä¸ä¼šå†ç»™ä½ 1ä¸ªå•ä½ è¿™æ ·é—®ä¸€ä¸ªç»™ä¸€ä¸ªæ¯”è¾ƒç¹ç ç³»ç»Ÿä¼šå†ç»™ä½ 10ä¸ªå•ä½ (æ­¤æ—¶ä½ çš„æ•°ç»„ç©ºé—´ä¸º20ä¸ªå•ä½)</li>
<li>å°†åŸæ•°ç»„çš„ 10 ä¸ªå…ƒç´ "æ¬å®¶"åˆ°æ–°ç©ºé—´</li>
<li>å°†æ–°å…ƒç´ æ”¾å…¥ç¬¬ 11 ä¸ªä½ç½®</li>
</ol>
<p>è¿™ç§åŠ¨æ€æ‰©å®¹æœºåˆ¶è™½ç„¶æ–¹ä¾¿ï¼Œä½†åœ¨æ€§èƒ½æ•æ„Ÿçš„åœºæ™¯ä¸‹éœ€è¦ç‰¹åˆ«æ³¨æ„ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œé“¾è¡¨åœ¨åŠ¨æ€æ€§æ–¹é¢è¡¨ç°æ›´å¥½ï¼Œä½†å¯¹äºæ•°æ®é‡ä¸å¤§çš„æƒ…å†µï¼Œæ•°ç»„ä»ç„¶æ˜¯æ›´ä¼˜ç§€çš„é€‰æ‹©ã€‚</p>
<h2 data-id="heading-4">æ•°ç»„éå†ï¼šå¤šç§æ–¹å¼åŠå…¶é€‚ç”¨åœºæ™¯</h2>
<p>éå†æ•°ç»„æ˜¯æ•°ç»„æ“ä½œä¸­æœ€å¸¸è§çš„éœ€æ±‚ï¼ŒJavaScript æä¾›äº†å¤šç§éå†æ–¹å¼ï¼Œå„æœ‰ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ã€‚</p>
<h3 data-id="heading-5">1. ä¼ ç»Ÿçš„ for å¾ªç¯</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">10</span>)).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>)
<span class="hljs-keyword">const</span> len = arr.<span class="hljs-property">length</span>

<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr[i])
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¿™é‡Œè¦ä½¿ç”¨ <code>len</code> å˜é‡è€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨ <code>arr.length</code>ï¼Ÿ</strong></p>
<p>è¿™æ˜¯å› ä¸ºåœ¨å¾ªç¯æ‰§è¡Œçš„æ¯ä¸€æ¬¡è¿­ä»£ä¸­ï¼Œéƒ½ä¼šæ‰§è¡Œæ¡ä»¶åˆ¤æ–­ã€‚å¦‚æœç›´æ¥ä½¿ç”¨ <code>arr.length</code>ï¼Œæ¯æ¬¡éƒ½ä¼šè¯»å–å¯¹è±¡çš„ <code>length</code> å±æ€§ï¼Œå‘èµ·ä¸€æ¬¡ RHS æŸ¥è¯¢ï¼Œè¿™ä¸ªå¼€é”€æ¯”ä½¿ç”¨ç®€å•æ•°æ®ç±»å‹çš„ <code>len</code> å˜é‡è¦å¤§å¾—å¤šã€‚</p>
<p>for å¾ªç¯ä¹Ÿè¢«ç§°ä¸º<strong>è®¡æ•°å¾ªç¯</strong>ï¼Œå®ƒçš„æ‰§è¡Œæ–¹å¼ä¸ CPU çš„å·¥ä½œæ¨¡å¼å¾ˆå¥‘åˆï¼Œå› æ­¤åœ¨æ‰€æœ‰éå†æ–¹æ³•ä¸­æ€§èƒ½æœ€å¥½ã€‚</p>
<h3 data-id="heading-6">2. forEach æ–¹æ³•</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]
arr.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(item, index)
})
</code></pre>
<p><strong>ä¸ for å¾ªç¯çš„ä¸»è¦åŒºåˆ«ï¼š</strong></p>
<ul>
<li><strong>ä¸èƒ½æå‰é€€å‡º</strong>ï¼šforEach æ— æ³•ä½¿ç”¨ break è¯­å¥ä¸­æ–­å¾ªç¯</li>
<li><strong>æ€§èƒ½ç¨å·®</strong>ï¼šæ¶‰åŠå‡½æ•°çš„å…¥æ ˆå‡ºæ ˆæ“ä½œï¼Œæ€§èƒ½æ¯” for å¾ªç¯å·®</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è¿™æ ·çš„ä»£ç ä¼šæŠ¥é”™</span>
arr.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span>(item === <span class="hljs-number">3</span>) {
        <span class="hljs-keyword">break</span> <span class="hljs-comment">// SyntaxError: Illegal break statement</span>
    }
})
</code></pre>
<h3 data-id="heading-7">3. map æ–¹æ³•</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]
<span class="hljs-keyword">const</span> newArr = arr.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item + <span class="hljs-number">1</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newArr) <span class="hljs-comment">// [2, 3, 4, 5, 6, 7]</span>
</code></pre>
<p>map æ–¹æ³•ä¸ä»…å¯ä»¥éå†æ•°ç»„ï¼Œè¿˜å¯ä»¥å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œ"åŠ å·¥"ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚è¿™åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­éå¸¸æœ‰ç”¨ã€‚</p>
<h3 data-id="heading-8">4. for...of å¾ªç¯</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> item <span class="hljs-keyword">of</span> arr) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(item)
}
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li><strong>å¯è¯»æ€§å¥½</strong>ï¼šè¯­æ³•ç®€æ´ï¼Œæ„å›¾æ˜ç¡®</li>
<li><strong>ç›¸æ¯”è®¡æ•°å¾ªç¯æ›´ç›´è§‚</strong>ï¼šä¼ ç»Ÿçš„ for å¾ªç¯ <code>i = 0; i &lt; ...; i++</code> æ¨¡å¼ç›¸å¯¹æ­»æ¿</li>
</ul>
<p>å½“ä½ ä¸éœ€è¦ä¸‹æ ‡ï¼Œåªæƒ³å•çº¯éå†æ•°ç»„æ—¶ï¼Œfor...of æ˜¯æœ€ä½³é€‰æ‹©ã€‚</p>
<h3 data-id="heading-9">5. for...in å¾ªç¯</h3>
<p>for...in åŸæœ¬æ˜¯è®¾è®¡ç”¨æ¥è¿­ä»£å¯¹è±¡å±æ€§çš„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> obj = {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'é»„å›½æ–‡'</span>,
    <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,
    <span class="hljs-attr">hobbies</span>: [<span class="hljs-string">'ç¯®çƒ'</span>, <span class="hljs-string">'è¶³çƒ'</span>, <span class="hljs-string">'è·‘æ­¥'</span>]
}

<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> k <span class="hljs-keyword">in</span> obj) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(k, obj[k])
}
</code></pre>
<p>ä½†å®ƒä¹Ÿå¯ä»¥ç”¨æ¥éå†æ•°ç»„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> key <span class="hljs-keyword">in</span> arr) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(key, arr[key]) <span class="hljs-comment">// key æ˜¯ç´¢å¼•ä¸‹æ ‡</span>
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆ for...in èƒ½éå†æ•°ç»„ï¼Ÿ</strong></p>
<p>å› ä¸ºåœ¨ JavaScript ä¸­ï¼Œæ•°ç»„æœ¬è´¨ä¸Šä¹Ÿæ˜¯å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ•°ç»„çœ‹ä½œä¸‹æ ‡ä¸º key çš„å¯è¿­ä»£å¯¹è±¡ã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œfor...in ä¼šéå†æ‰€æœ‰å¯æšä¸¾å±æ€§ï¼ŒåŒ…æ‹¬åŸå‹é“¾ä¸Šçš„å±æ€§ï¼Œå› æ­¤åœ¨æ•°ç»„éå†ä¸­å¹¶ä¸å¸¸ç”¨ã€‚</p>
<h2 data-id="heading-10">é—­åŒ…ä¸å¾ªç¯ï¼šä¸€ä¸ªç»å…¸çš„é¢è¯•é¢˜</h2>
<p>è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç»å…¸çš„ JavaScript é¢è¯•é¢˜ï¼Œå®ƒå¾ˆå¥½åœ°å±•ç¤ºäº† var å’Œ let åœ¨å¾ªç¯ä¸­çš„ä¸åŒè¡¨ç°ï¼š</p>
<h3 data-id="heading-11">ä½¿ç”¨ var çš„æƒ…å†µ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(i) <span class="hljs-comment">// æ‰“å° 10 ä¸ª 10</span>
    }, <span class="hljs-number">1000</span>)
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ</strong></p>
<ol>
<li>for å¾ªç¯æ˜¯åŒæ­¥çš„ï¼ŒsetTimeout æ˜¯å¼‚æ­¥çš„</li>
<li>var å£°æ˜ä¸æ”¯æŒå—çº§ä½œç”¨åŸŸï¼Œå®ƒå£°æ˜çš„å˜é‡åœ¨å…¨å±€ä½œç”¨åŸŸçš„å˜é‡ç¯å¢ƒä¸­</li>
<li>åœ¨æ•´ä¸ªå…¨å±€ä½œç”¨åŸŸä¸­å…±äº«åŒä¸€ä¸ªå˜é‡ i</li>
<li>for å¾ªç¯åŒæ­¥æ‰§è¡Œå®Œæˆåï¼Œi å·²ç»è‡ªå¢ä¸º 10</li>
<li>setTimeout çš„å›è°ƒå‡½æ•°è¢«æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œç­‰å¾…ä¸»çº¿ç¨‹ç©ºé—²åæ‰§è¡Œ</li>
<li>å½“å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œæ—¶ï¼Œå®ƒä»¬éƒ½å¼•ç”¨åŒä¸€ä¸ª iï¼Œæ­¤æ—¶ i çš„å€¼ä¸º 10</li>
</ol>
<h3 data-id="heading-12">ä½¿ç”¨ let çš„æƒ…å†µ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(i) <span class="hljs-comment">// æ‰“å° 0 åˆ° 9</span>
    }, <span class="hljs-number">1000</span>)
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆ let èƒ½è§£å†³é—®é¢˜ï¼Ÿ</strong></p>
<ol>
<li>let æ”¯æŒå—çº§ä½œç”¨åŸŸ</li>
<li>æ¯æ¬¡å¾ªç¯éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è¯æ³•ç¯å¢ƒï¼Œæ¯ä¸ª i éƒ½æ˜¯ç‹¬ç«‹çš„</li>
<li>ä» 0 åˆ° 9ï¼Œæ¯ä¸ª i éƒ½åœ¨å„è‡ªçš„è¯æ³•ç¯å¢ƒä¸­</li>
<li>10 ä¸ªå®šæ—¶å™¨å›è°ƒå‡½æ•°ä¼šåˆ†åˆ«å¯¹åº”è¯æ³•ç¯å¢ƒä¸­çš„ i</li>
<li>å½“å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œæ—¶ï¼Œæ¯ä¸ªå‡½æ•°éƒ½èƒ½æ‰¾åˆ°å¯¹åº”çš„ i å€¼</li>
</ol>
<h2 data-id="heading-13">å®è·µå»ºè®®</h2>
<h3 data-id="heading-14">ä½•æ—¶é€‰æ‹©æ•°ç»„ï¼Ÿ</h3>
<ul>
<li><strong>æ•°æ®é‡ä¸å¤§</strong>ä¸”<strong>éœ€è¦å¿«é€Ÿéšæœºè®¿é—®</strong>æ—¶ï¼Œæ•°ç»„æ˜¯é¦–é€‰</li>
<li>éœ€è¦<strong>ç¼“å­˜å‹å¥½</strong>çš„è¿ç»­å†…å­˜å­˜å‚¨æ—¶</li>
<li>è¿›è¡Œ<strong>æ•°å€¼è®¡ç®—</strong>æˆ–<strong>ç®—æ³•å®ç°</strong>æ—¶</li>
</ul>
<h3 data-id="heading-15">éå†æ–¹æ³•é€‰æ‹©æŒ‡å—</h3>
<ul>
<li><strong>æ€§èƒ½ä¼˜å…ˆ</strong>ï¼šä¼ ç»Ÿçš„ for å¾ªç¯</li>
<li><strong>ä»£ç ç®€æ´</strong>ï¼šfor...of å¾ªç¯</li>
<li><strong>éœ€è¦è½¬æ¢æ•°ç»„</strong>ï¼šmap æ–¹æ³•</li>
<li><strong>å•çº¯éå†ä¸éœ€è¦ä¸­æ–­</strong>ï¼šforEach æ–¹æ³•</li>
</ul>
<h3 data-id="heading-16">æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h3>
<ol>
<li><strong>é¿å…åœ¨å¾ªç¯ä¸­é‡å¤è®¡ç®—é•¿åº¦</strong>ï¼šæå‰å­˜å‚¨ array.length</li>
<li><strong>æ ¹æ®éœ€æ±‚é€‰æ‹©åˆé€‚çš„éå†æ–¹æ³•</strong></li>
</ol>
<h2 data-id="heading-17">æ€»ç»“</h2>
<p>JavaScript æ•°ç»„ä½œä¸ºä¸€ä¸ªå¼ºå¤§è€Œçµæ´»çš„æ•°æ®ç»“æ„ï¼Œåœ¨æˆ‘ä»¬çš„æ—¥å¸¸å¼€å‘ä¸­æ‰®æ¼”ç€é‡è¦è§’è‰²ã€‚ä»ç®€å•çš„åˆ›å»ºå’Œéå†ï¼Œåˆ°ç†è§£å…¶åº•å±‚çš„å†…å­˜ç®¡ç†å’Œæ€§èƒ½ç‰¹æ€§ï¼ŒæŒæ¡æ•°ç»„çš„æ–¹æ–¹é¢é¢å¯¹äºå†™å‡ºé«˜æ•ˆã€å¯é çš„ä»£ç è‡³å…³é‡è¦ã€‚</p>
<p>å¸Œæœ›é€šè¿‡æœ¬æ–‡çš„è®²è§£ï¼Œä½ èƒ½å¯¹ JavaScript æ•°ç»„æœ‰æ›´æ·±å…¥çš„ç†è§£ï¼Œåœ¨å®é™…å¼€å‘ä¸­èƒ½å¤Ÿæ ¹æ®å…·ä½“åœºæ™¯é€‰æ‹©æœ€åˆé€‚çš„æ•°ç»„æ“ä½œæ–¹æ³•ã€‚è®°ä½ï¼Œå¥½çš„å¼€å‘è€…ä¸ä»…è¦çŸ¥é“æ€ä¹ˆç”¨ï¼Œæ›´è¦çŸ¥é“ä¸ºä»€ä¹ˆè¿™æ ·ç”¨ã€‚</p>
<hr/>
<p><em>æ³¨æ„ï¼šæœ¬æ–‡æ‰€æœ‰ä»£ç ç¤ºä¾‹å‡åŸºäºç°ä»£ JavaScript æ ‡å‡†ï¼Œåœ¨ä¸»æµæµè§ˆå™¨å’Œ Node.js ç¯å¢ƒä¸­å‡å¯æ­£å¸¸è¿è¡Œã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MyBatis-Plus è®©ä½ å¼€å‘æ•ˆç‡ç¿»å€ï¼æ–°æ‰‹ä¹Ÿèƒ½5åˆ†é’Ÿä¸Šæ‰‹ï¼]]></title>    <link>https://juejin.cn/post/7571402480967368740</link>    <guid>https://juejin.cn/post/7571402480967368740</guid>    <pubDate>2025-11-12T06:49:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571402480967368740" data-draft-id="7564718467829465088" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MyBatis-Plus è®©ä½ å¼€å‘æ•ˆç‡ç¿»å€ï¼æ–°æ‰‹ä¹Ÿèƒ½5åˆ†é’Ÿä¸Šæ‰‹ï¼"/> <meta itemprop="keywords" content="åç«¯,Java,MyBatis"/> <meta itemprop="datePublished" content="2025-11-12T06:49:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ˜å¤§å"/> <meta itemprop="url" content="https://juejin.cn/user/3507878440995946"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MyBatis-Plus è®©ä½ å¼€å‘æ•ˆç‡ç¿»å€ï¼æ–°æ‰‹ä¹Ÿèƒ½5åˆ†é’Ÿä¸Šæ‰‹ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3507878440995946/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ˜å¤§å
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T06:49:38.000Z" title="Wed Nov 12 2025 06:49:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å¤§åã€‚è¿™ç¯‡æ–‡ç« ä»‹ç»<code>MyBatis-Plus</code>ï¼</p>
<p><strong>ä»€ä¹ˆæ˜¯ MyBatis-Plusï¼Ÿ</strong></p>
<p>ç®€å•æ¥è¯´ï¼Œ<code>MyBatis-Plus</code>æ˜¯<code>MyBatis</code>çš„å¢å¼ºå·¥å…·ï¼Œåœ¨MyBatisçš„åŸºç¡€ä¸Šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œ<strong>æ—¢èƒ½å¤Ÿç®€åŒ–å¼€å‘ï¼Œåˆèƒ½å¤Ÿæé«˜æ•ˆç‡</strong>ï¼</p>
<p>æˆ‘ä»¬å°±ä»æœ€ç®€å•çš„å¼€å§‹å§ï¼åªéœ€è¦å‡ è¡Œä»£ç å°±èƒ½æå®šå¸¸è§çš„ CRUD æ“ä½œã€‚</p>
<p>å¦‚æœä½ æ˜¯æ–°æ‰‹ï¼Œå¯ä»¥èƒ½å¿«é€Ÿçš„å­¦ä¹ <code>MyBatis-Plus</code>ï¼Œå¦‚æœä½ æ˜¯æœ‰ç»éªŒçš„å¼€å‘ï¼Œä¹Ÿå¯ä»¥å·©å›ºä¸€ä¸‹ç›¸å…³çš„å†…å®¹ã€‚</p>
<h3 data-id="heading-0">1. æ·»åŠ ä¾èµ–</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- åœ¨ pom.xml ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ– --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Spring Boot Starter --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.7.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- MyBatis-Plus Starter --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æ•°æ®åº“é©±åŠ¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.33<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- Lombok ç®€åŒ–å®ä½“ç±»å¼€å‘ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.18.24<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h3 data-id="heading-1">2. é…ç½®æ•°æ®æº</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-comment"># æ›¿æ¢æˆä½ çš„æ•°æ®åº“ä¿¡æ¯</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/mybatis_plus_demo?useSSL=false&amp;serverTimezone=Asia/Shanghai&amp;characterEncoding=utf8</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
    <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span>
    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>

<span class="hljs-comment"># MyBatis-Plus é…ç½®</span>
<span class="hljs-attr">mybatis-plus:</span>
  <span class="hljs-attr">configuration:</span>
    <span class="hljs-comment"># æ‰“å° SQL æ—¥å¿—ï¼Œæ–¹ä¾¿è°ƒè¯•</span>
    <span class="hljs-attr">log-impl:</span> <span class="hljs-string">org.apache.ibatis.logging.stdout.StdOutImpl</span>
    <span class="hljs-attr">map-underscore-to-camel-case:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># å¼€å¯é©¼å³°å‘½åè‡ªåŠ¨è½¬æ¢</span>
  <span class="hljs-attr">global-config:</span>
    <span class="hljs-attr">db-config:</span>
      <span class="hljs-comment"># é€»è¾‘åˆ é™¤é…ç½®</span>
      <span class="hljs-attr">logic-delete-field:</span> <span class="hljs-string">deleted</span>  <span class="hljs-comment"># å…¨å±€é€»è¾‘åˆ é™¤çš„å®ä½“å­—æ®µå</span>
      <span class="hljs-attr">logic-delete-value:</span> <span class="hljs-number">1</span>        <span class="hljs-comment"># é€»è¾‘å·²åˆ é™¤å€¼(é»˜è®¤ä¸º 1)</span>
      <span class="hljs-attr">logic-not-delete-value:</span> <span class="hljs-number">0</span>    <span class="hljs-comment"># é€»è¾‘æœªåˆ é™¤å€¼(é»˜è®¤ä¸º 0)</span>
      <span class="hljs-attr">id-type:</span> <span class="hljs-string">auto</span>               <span class="hljs-comment"># ä¸»é”®IDè‡ªå¢</span>
</code></pre>
<h3 data-id="heading-2">3. å®ä½“ç±»è®¾è®¡</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.annotation.*;
<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.time.LocalDateTime;

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@TableName("user")</span>  <span class="hljs-comment">// æŒ‡å®šå¯¹åº”çš„æ•°æ®åº“è¡¨å</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    
    <span class="hljs-comment">/**
     * ç”¨æˆ·ID - ä¸»é”®
     * <span class="hljs-doctag">@TableId</span> æ³¨è§£è¡¨ç¤ºè¿™æ˜¯ä¸»é”®
     * value = "id" è¡¨ç¤ºå¯¹åº”æ•°æ®åº“å­—æ®µå
     * type = IdType.AUTO è¡¨ç¤ºä¸»é”®è‡ªå¢
     */</span>
    <span class="hljs-meta">@TableId(value = "id", type = IdType.AUTO)</span>
    <span class="hljs-keyword">private</span> Long id;
    
    <span class="hljs-comment">/**
     * ç”¨æˆ·å
     * å¦‚æœå­—æ®µåä¸æ•°æ®åº“åˆ—åä¸€è‡´ï¼ˆé©¼å³°è½¬ä¸‹åˆ’çº¿ï¼‰ï¼Œå¯ä»¥çœç•¥ <span class="hljs-doctag">@TableField</span>
     */</span>
    <span class="hljs-keyword">private</span> String username;
    
    <span class="hljs-comment">/**
     * å¹´é¾„
     */</span>
    <span class="hljs-keyword">private</span> Integer age;
    
    <span class="hljs-comment">/**
     * é‚®ç®±
     */</span>
    <span class="hljs-keyword">private</span> String email;
    
    <span class="hljs-comment">/**
     * åˆ›å»ºæ—¶é—´
     * <span class="hljs-doctag">@TableField</span> é…ç½®å¡«å……ç­–ç•¥
     */</span>
    <span class="hljs-meta">@TableField(fill = FieldFill.INSERT)</span>
    <span class="hljs-keyword">private</span> LocalDateTime createTime;
    
    <span class="hljs-comment">/**
     * æ›´æ–°æ—¶é—´
     * æ’å…¥å’Œæ›´æ–°æ—¶éƒ½è‡ªåŠ¨å¡«å……
     */</span>
    <span class="hljs-meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span>
    <span class="hljs-keyword">private</span> LocalDateTime updateTime;
    
    <span class="hljs-comment">/**
     * é€»è¾‘åˆ é™¤å­—æ®µ
     * 0-æœªåˆ é™¤ 1-å·²åˆ é™¤
     */</span>
    <span class="hljs-meta">@TableLogic</span>
    <span class="hljs-keyword">private</span> Integer deleted;
}
</code></pre>
<h3 data-id="heading-3">4. Mapper æ¥å£</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;
<span class="hljs-keyword">import</span> org.apache.ibatis.annotations.Mapper;

<span class="hljs-comment">/**
 * UserMapper æ¥å£
 * ç»§æ‰¿ BaseMapper å°±è‡ªåŠ¨æ‹¥æœ‰äº† CRUD æ–¹æ³•
 * 
 * æ³¨æ„ï¼šBaseMapper&lt;User&gt; ä¸­çš„ User æ˜¯å®ä½“ç±»ç±»å‹
 */</span>
<span class="hljs-meta">@Mapper</span>  <span class="hljs-comment">// ä¸€å®šè¦åŠ ä¸Š @Mapper æ³¨è§£ï¼ŒSpring æ‰èƒ½æ‰«æåˆ°</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserMapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseMapper</span>&lt;User&gt; {
    <span class="hljs-comment">// ä¸éœ€è¦å†™ä»»ä½•æ–¹æ³•ï¼ŒåŸºæœ¬çš„ CRUD éƒ½å·²ç»æœ‰äº†ï¼</span>
    
    <span class="hljs-comment">/**
     * å¦‚æœéœ€è¦è‡ªå®šä¹‰SQLï¼Œå¯ä»¥è¿™æ ·å†™
     */</span>
    <span class="hljs-comment">// @Select("SELECT * FROM user WHERE age &gt; #{minAge}")</span>
    <span class="hljs-comment">// List&lt;User&gt; selectUsersByMinAge(@Param("minAge") Integer minAge);</span>
}
</code></pre>
<h3 data-id="heading-4">5. æœåŠ¡å±‚å®ç°</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-comment">/**
 * UserService å®ç°ç±»
 * 
 * ç»§æ‰¿ ServiceImpl å°±è‡ªåŠ¨æ‹¥æœ‰äº†æ›´å¤šçš„ CRUD æ–¹æ³•
 * å‚æ•°è¯´æ˜ï¼š
 * - UserMapperï¼šä½ çš„ Mapper æ¥å£
 * - Userï¼šä½ çš„å®ä½“ç±»
 */</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ServiceImpl</span>&lt;UserMapper, User&gt; {
    <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ è‡ªå®šä¹‰çš„ä¸šåŠ¡æ–¹æ³•</span>
    
    <span class="hljs-comment">/**
     * è‡ªå®šä¹‰æ–¹æ³•ï¼šæ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·
     */</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserByUsername</span><span class="hljs-params">(String username)</span> {
        <span class="hljs-comment">// ä½¿ç”¨ MP çš„æŸ¥è¯¢æ„é€ å™¨</span>
        <span class="hljs-keyword">return</span> lambdaQuery()
                .eq(User::getUsername, username)  <span class="hljs-comment">// username = ?</span>
                .one();  <span class="hljs-comment">// æŸ¥è¯¢ä¸€æ¡è®°å½•</span>
    }
    
    <span class="hljs-comment">/**
     * è‡ªå®šä¹‰æ–¹æ³•ï¼šæ ¹æ®é‚®ç®±åç¼€æŸ¥è¯¢ç”¨æˆ·
     */</span>
    <span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">getUsersByEmailSuffix</span><span class="hljs-params">(String emailSuffix)</span> {
        <span class="hljs-keyword">return</span> lambdaQuery()
                .likeRight(User::getEmail, emailSuffix)  <span class="hljs-comment">// email like 'emailSuffix%'</span>
                .list();
    }
}
</code></pre>
<h3 data-id="heading-5">6. æ–°å¢æ“ä½œ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/user")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserService userService;
    
    <span class="hljs-comment">/**
     * æ–°å¢ç”¨æˆ·
     */</span>
    <span class="hljs-meta">@PostMapping</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">addUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> User user)</span> {
        <span class="hljs-comment">// æ–¹æ³•1ï¼šä½¿ç”¨ save æ–¹æ³•</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> userService.save(user);
        
        <span class="hljs-keyword">if</span> (success) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"æ–°å¢ç”¨æˆ·æˆåŠŸï¼Œç”¨æˆ·IDï¼š"</span> + user.getId();
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"æ–°å¢ç”¨æˆ·å¤±è´¥"</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * æ‰¹é‡æ–°å¢ç”¨æˆ·
     */</span>
    <span class="hljs-meta">@PostMapping("/batch")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">addUsers</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> List&lt;User&gt; users)</span> {
        <span class="hljs-comment">// æ‰¹é‡æ’å…¥ï¼Œæ¯æ¬¡æ’å…¥100æ¡</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> userService.saveBatch(users, <span class="hljs-number">100</span>);
        <span class="hljs-keyword">return</span> success ? <span class="hljs-string">"æ‰¹é‡æ–°å¢æˆåŠŸ"</span> : <span class="hljs-string">"æ‰¹é‡æ–°å¢å¤±è´¥"</span>;
    }
    
    <span class="hljs-comment">/**
     * æ–°å¢æˆ–æ›´æ–°ç”¨æˆ·ï¼ˆå­˜åœ¨åˆ™æ›´æ–°ï¼Œä¸å­˜åœ¨åˆ™æ–°å¢ï¼‰
     */</span>
    <span class="hljs-meta">@PostMapping("/save-or-update")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">saveOrUpdateUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> User user)</span> {
        <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> userService.saveOrUpdate(user);
        <span class="hljs-keyword">return</span> success ? <span class="hljs-string">"æ“ä½œæˆåŠŸ"</span> : <span class="hljs-string">"æ“ä½œå¤±è´¥"</span>;
    }
}
</code></pre>
<h3 data-id="heading-6">7. æŸ¥è¯¢æ“ä½œ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æŸ¥è¯¢ç›¸å…³æ“ä½œ
 */</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/user")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserService userService;
    
    <span class="hljs-comment">/**
     * æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ·
     */</span>
    <span class="hljs-meta">@GetMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> {
        <span class="hljs-keyword">return</span> userService.getById(id);
    }
    
    <span class="hljs-comment">/**
     * æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·
     */</span>
    <span class="hljs-meta">@GetMapping</span>
    <span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">getAllUsers</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> userService.list();
    }
    
    <span class="hljs-comment">/**
     * æ¡ä»¶æŸ¥è¯¢ï¼šæŸ¥è¯¢å¹´é¾„å¤§äº18çš„ç”¨æˆ·
     */</span>
    <span class="hljs-meta">@GetMapping("/adults")</span>
    <span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">getAdultUsers</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> userService.lambdaQuery()
                .gt(User::getAge, <span class="hljs-number">18</span>)        <span class="hljs-comment">// age &gt; 18</span>
                .list();
    }
    
    <span class="hljs-comment">/**
     * å¤æ‚æ¡ä»¶æŸ¥è¯¢ï¼šå¹´é¾„åœ¨18-60ä¹‹é—´ï¼Œå¹¶ä¸”ç”¨æˆ·ååŒ…å«"å¼ "
     */</span>
    <span class="hljs-meta">@GetMapping("/complex")</span>
    <span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">getComplexUsers</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> userService.lambdaQuery()
                .between(User::getAge, <span class="hljs-number">18</span>, <span class="hljs-number">60</span>)           <span class="hljs-comment">// age between 18 and 60</span>
                .like(User::getUsername, <span class="hljs-string">"å¼ "</span>)           <span class="hljs-comment">// username like '%å¼ %'</span>
                .orderByDesc(User::getAge)               <span class="hljs-comment">// æŒ‰å¹´é¾„é™åº</span>
                .list();
    }
    
    <span class="hljs-comment">/**
     * åˆ†é¡µæŸ¥è¯¢
     */</span>
    <span class="hljs-meta">@GetMapping("/page")</span>
    <span class="hljs-keyword">public</span> Page&lt;User&gt; <span class="hljs-title function_">getUserPage</span><span class="hljs-params">(
            <span class="hljs-meta">@RequestParam(defaultValue = "1")</span> Integer current,
            <span class="hljs-meta">@RequestParam(defaultValue = "10")</span> Integer size)</span> {
        
        <span class="hljs-comment">// åˆ›å»ºåˆ†é¡µå¯¹è±¡</span>
        Page&lt;User&gt; page = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>&lt;&gt;(current, size);
        
        <span class="hljs-comment">// æ‰§è¡Œåˆ†é¡µæŸ¥è¯¢</span>
        <span class="hljs-keyword">return</span> userService.page(page);
    }
    
    <span class="hljs-comment">/**
     * å¸¦æ¡ä»¶çš„åˆ†é¡µæŸ¥è¯¢
     */</span>
    <span class="hljs-meta">@GetMapping("/page-with-condition")</span>
    <span class="hljs-keyword">public</span> Page&lt;User&gt; <span class="hljs-title function_">getUserPageWithCondition</span><span class="hljs-params">(
            <span class="hljs-meta">@RequestParam(defaultValue = "1")</span> Integer current,
            <span class="hljs-meta">@RequestParam(defaultValue = "10")</span> Integer size,
            <span class="hljs-meta">@RequestParam(required = false)</span> String keyword)</span> {
        
        Page&lt;User&gt; page = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>&lt;&gt;(current, size);
        
        <span class="hljs-keyword">return</span> userService.lambdaQuery()
                .like(StringUtils.isNotBlank(keyword), User::getUsername, keyword)
                .page(page);
    }
}
</code></pre>
<h3 data-id="heading-7">8. æ›´æ–°æ“ä½œ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æ›´æ–°æ“ä½œ
 */</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/user")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserService userService;
    
    <span class="hljs-comment">/**
     * æ ¹æ®IDæ›´æ–°ç”¨æˆ·
     */</span>
    <span class="hljs-meta">@PutMapping</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">updateUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> User user)</span> {
        <span class="hljs-keyword">if</span> (user.getId() == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"ç”¨æˆ·IDä¸èƒ½ä¸ºç©º"</span>;
        }
        
        <span class="hljs-comment">// æ–¹æ³•1ï¼šæ ¹æ®IDæ›´æ–°æ‰€æœ‰å­—æ®µ</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> userService.updateById(user);
        
        <span class="hljs-keyword">return</span> success ? <span class="hljs-string">"æ›´æ–°æˆåŠŸ"</span> : <span class="hljs-string">"æ›´æ–°å¤±è´¥"</span>;
    }
    
    <span class="hljs-comment">/**
     * æ¡ä»¶æ›´æ–°ï¼šå°†æ‰€æœ‰å¹´é¾„å°äº18çš„ç”¨æˆ·å¹´é¾„è®¾ç½®ä¸º18
     */</span>
    <span class="hljs-meta">@PutMapping("/fix-age")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">fixAge</span><span class="hljs-params">()</span> {
        <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> userService.lambdaUpdate()
                .lt(User::getAge, <span class="hljs-number">18</span>)        <span class="hljs-comment">// age &lt; 18</span>
                .set(User::getAge, <span class="hljs-number">18</span>)       <span class="hljs-comment">// è®¾ç½® age = 18</span>
                .update();
        
        <span class="hljs-keyword">return</span> success ? <span class="hljs-string">"å¹´é¾„ä¿®å¤æˆåŠŸ"</span> : <span class="hljs-string">"å¹´é¾„ä¿®å¤å¤±è´¥"</span>;
    }
    
    <span class="hljs-comment">/**
     * éƒ¨åˆ†å­—æ®µæ›´æ–°
     */</span>
    <span class="hljs-meta">@PatchMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">partialUpdateUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id, 
                                   <span class="hljs-meta">@RequestBody</span> Map&lt;String, Object&gt; updates)</span> {
        <span class="hljs-comment">// ç§»é™¤ä¸èƒ½æ›´æ–°çš„å­—æ®µ</span>
        updates.remove(<span class="hljs-string">"id"</span>);
        updates.remove(<span class="hljs-string">"createTime"</span>);
        
        <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> userService.updateById(id, updates);
        <span class="hljs-keyword">return</span> success ? <span class="hljs-string">"éƒ¨åˆ†æ›´æ–°æˆåŠŸ"</span> : <span class="hljs-string">"éƒ¨åˆ†æ›´æ–°å¤±è´¥"</span>;
    }
}
</code></pre>
<h3 data-id="heading-8">9. åˆ é™¤æ“ä½œ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * åˆ é™¤æ“ä½œ
 */</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/user")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserService userService;
    
    <span class="hljs-comment">/**
     * æ ¹æ®IDåˆ é™¤ç”¨æˆ·ï¼ˆé€»è¾‘åˆ é™¤ï¼‰
     */</span>
    <span class="hljs-meta">@DeleteMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">deleteUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> {
        <span class="hljs-comment">// é€»è¾‘åˆ é™¤ï¼Œå®é™…ä¸Šæ‰§è¡Œçš„æ˜¯ update æ“ä½œï¼Œå°† deleted å­—æ®µè®¾ç½®ä¸º 1</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> userService.removeById(id);
        <span class="hljs-keyword">return</span> success ? <span class="hljs-string">"åˆ é™¤æˆåŠŸ"</span> : <span class="hljs-string">"åˆ é™¤å¤±è´¥"</span>;
    }
    
    <span class="hljs-comment">/**
     * æ‰¹é‡åˆ é™¤
     */</span>
    <span class="hljs-meta">@DeleteMapping("/batch")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">batchDeleteUsers</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> List&lt;Long&gt; ids)</span> {
        <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> userService.removeByIds(ids);
        <span class="hljs-keyword">return</span> success ? <span class="hljs-string">"æ‰¹é‡åˆ é™¤æˆåŠŸ"</span> : <span class="hljs-string">"æ‰¹é‡åˆ é™¤å¤±è´¥"</span>;
    }
    
    <span class="hljs-comment">/**
     * æ¡ä»¶åˆ é™¤ï¼šåˆ é™¤æ‰€æœ‰å¹´é¾„å¤§äº100çš„ç”¨æˆ·
     */</span>
    <span class="hljs-meta">@DeleteMapping("/old")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">deleteOldUsers</span><span class="hljs-params">()</span> {
        <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> userService.lambdaUpdate()
                .gt(User::getAge, <span class="hljs-number">100</span>)       <span class="hljs-comment">// age &gt; 100</span>
                .remove();
        <span class="hljs-keyword">return</span> success ? <span class="hljs-string">"åˆ é™¤è€å¹´ç”¨æˆ·æˆåŠŸ"</span> : <span class="hljs-string">"åˆ é™¤å¤±è´¥"</span>;
    }
}
</code></pre>
<h2 data-id="heading-9">é«˜çº§ç‰¹æ€§</h2>
<h3 data-id="heading-10">10. è‡ªåŠ¨å¡«å……åŠŸèƒ½</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * è‡ªåŠ¨å¡«å……å¤„ç†å™¨
 * ç”¨äºè‡ªåŠ¨å¡«å…… createTime å’Œ updateTime
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyMetaObjectHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MetaObjectHandler</span> {
    
    <span class="hljs-comment">/**
     * æ’å…¥æ—¶è‡ªåŠ¨å¡«å……
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertFill</span><span class="hljs-params">(MetaObject metaObject)</span> {
        <span class="hljs-comment">// å¡«å……åˆ›å»ºæ—¶é—´</span>
        <span class="hljs-built_in">this</span>.strictInsertFill(metaObject, <span class="hljs-string">"createTime"</span>, LocalDateTime.class, LocalDateTime.now());
        <span class="hljs-comment">// å¡«å……æ›´æ–°æ—¶é—´</span>
        <span class="hljs-built_in">this</span>.strictInsertFill(metaObject, <span class="hljs-string">"updateTime"</span>, LocalDateTime.class, LocalDateTime.now());
    }
    
    <span class="hljs-comment">/**
     * æ›´æ–°æ—¶è‡ªåŠ¨å¡«å……
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateFill</span><span class="hljs-params">(MetaObject metaObject)</span> {
        <span class="hljs-comment">// æ›´æ–°æ—¶åªå¡«å……æ›´æ–°æ—¶é—´</span>
        <span class="hljs-built_in">this</span>.strictUpdateFill(metaObject, <span class="hljs-string">"updateTime"</span>, LocalDateTime.class, LocalDateTime.now());
    }
}
</code></pre>
<h3 data-id="heading-11">11. åˆ†é¡µæ’ä»¶é…ç½®</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * MyBatis-Plus é…ç½®ç±»
 */</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@MapperScan("com.yourpackage.mapper")</span>  <span class="hljs-comment">// æŒ‡å®šMapperæ¥å£çš„æ‰«æè·¯å¾„</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MybatisPlusConfig</span> {
    
    <span class="hljs-comment">/**
     * åˆ†é¡µæ’ä»¶é…ç½®
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> MybatisPlusInterceptor <span class="hljs-title function_">mybatisPlusInterceptor</span><span class="hljs-params">()</span> {
        <span class="hljs-type">MybatisPlusInterceptor</span> <span class="hljs-variable">interceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MybatisPlusInterceptor</span>();
        
        <span class="hljs-comment">// åˆ†é¡µæ’ä»¶</span>
        <span class="hljs-type">PaginationInnerInterceptor</span> <span class="hljs-variable">paginationInterceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PaginationInnerInterceptor</span>(DbType.MYSQL);
        paginationInterceptor.setMaxLimit(<span class="hljs-number">1000L</span>);  <span class="hljs-comment">// è®¾ç½®æœ€å¤§å•é¡µé™åˆ¶æ•°é‡</span>
        paginationInterceptor.setOverflow(<span class="hljs-literal">true</span>);   <span class="hljs-comment">// è¶…å‡ºæœ€å¤§é¡µæ•°åå›åˆ°ç¬¬ä¸€é¡µ</span>
        
        interceptor.addInnerInterceptor(paginationInterceptor);
        
        <span class="hljs-keyword">return</span> interceptor;
    }
}
</code></pre>
<h3 data-id="heading-12">12. ä¹è§‚é”æ’ä»¶é…ç½®</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åœ¨ MybatisPlusConfig ä¸­æ·»åŠ ä¹è§‚é”æ’ä»¶</span>
<span class="hljs-comment">/**
 * ä¹è§‚é”æ’ä»¶é…ç½®
 */</span>
<span class="hljs-meta">@Bean</span>
<span class="hljs-keyword">public</span> OptimisticLockerInnerInterceptor <span class="hljs-title function_">optimisticLockerInnerInterceptor</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OptimisticLockerInnerInterceptor</span>();
}

<span class="hljs-comment">// å®ä½“ç±»ä¸­é…ç½®ä¹è§‚é”å­—æ®µ</span>
<span class="hljs-meta">@Version</span>
<span class="hljs-keyword">private</span> Integer version;
</code></pre>
<h3 data-id="heading-13">13. è°¨æ…ä½¿ç”¨åœºæ™¯</h3>
<p><strong>1. è¶…å¤æ‚ SQL åœºæ™¯</strong></p>
<ul>
<li>æ¶‰åŠå¤§é‡å¤æ‚è”è¡¨æŸ¥è¯¢</li>
<li>éœ€è¦é«˜åº¦ä¼˜åŒ–çš„è‡ªå®šä¹‰ SQL</li>
<li>å¤æ‚çš„å­˜å‚¨è¿‡ç¨‹è°ƒç”¨</li>
</ul>
<p><strong>2. æ€§èƒ½è¦æ±‚æé«˜çš„åœºæ™¯</strong></p>
<ul>
<li>é«˜å¹¶å‘å†™å…¥åœºæ™¯</li>
<li>éœ€è¦ç²¾ç»†æ§åˆ¶ SQL æ‰§è¡Œçš„åœºæ™¯</li>
</ul>
<p><strong>3. é—ç•™ç³»ç»Ÿæ”¹é€ </strong></p>
<ul>
<li>å·²æœ‰å¤æ‚ MyBatis é…ç½®çš„é¡¹ç›®</li>
<li>æ•°æ®åº“è®¾è®¡ä¸ç¬¦åˆ MP è§„èŒƒ</li>
</ul>
<h3 data-id="heading-14">14. ä¸æ¨èä½¿ç”¨åœºæ™¯</h3>
<p><strong>1. JPA ç”Ÿæ€é‡åº¦ä¾èµ–é¡¹ç›®</strong></p>
<ul>
<li>å·²ç»æ·±åº¦ä½¿ç”¨ Spring Data JPA</li>
<li>éœ€è¦ JPA çš„çº§è”æ“ä½œç­‰ç‰¹æ€§</li>
</ul>
<p><strong>2. éå…³ç³»å‹æ•°æ®åº“</strong></p>
<ul>
<li>MongoDBã€Redis ç­‰ NoSQL æ•°æ®åº“</li>
<li>å›¾æ•°æ®åº“ç­‰ç‰¹æ®Šå­˜å‚¨</li>
</ul>
<h2 data-id="heading-15">æœ€ä½³å®è·µå»ºè®®</h2>
<h3 data-id="heading-16">15. å®ä½“ç±»è®¾è®¡è§„èŒƒ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŸºç¡€å®ä½“ç±»</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseEntity</span> {
    <span class="hljs-meta">@TableId(type = IdType.AUTO)</span>
    <span class="hljs-keyword">private</span> Long id;
    
    <span class="hljs-meta">@TableField(fill = FieldFill.INSERT)</span>
    <span class="hljs-keyword">private</span> LocalDateTime createTime;
    
    <span class="hljs-meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span>
    <span class="hljs-keyword">private</span> LocalDateTime updateTime;
    
    <span class="hljs-meta">@TableLogic</span>
    <span class="hljs-keyword">private</span> Integer deleted;
}

<span class="hljs-comment">// ä¸šåŠ¡å®ä½“ç±»</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@EqualsAndHashCode(callSuper = true)</span>
<span class="hljs-meta">@TableName("sys_user")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseEntity</span> {
    <span class="hljs-keyword">private</span> String username;
    <span class="hljs-keyword">private</span> Integer age;
    <span class="hljs-keyword">private</span> String email;
    
    <span class="hljs-comment">// æ•°æ®åº“å­—æ®µåä¸å®ä½“ç±»å­—æ®µåä¸ä¸€è‡´æ—¶ä½¿ç”¨</span>
    <span class="hljs-meta">@TableField("phone_number")</span>
    <span class="hljs-keyword">private</span> String phoneNumber;
    
    <span class="hljs-comment">// ä¸æ˜ å°„åˆ°æ•°æ®åº“çš„å­—æ®µ</span>
    <span class="hljs-meta">@TableField(exist = false)</span>
    <span class="hljs-keyword">private</span> String temporaryCode;
}
</code></pre>
<h3 data-id="heading-17">16. æœåŠ¡å±‚å°è£…å»ºè®®</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¥½çš„æœåŠ¡å±‚å°è£…</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ServiceImpl</span>&lt;UserMapper, User&gt; {
    
    <span class="hljs-comment">/**
     * ä¸šåŠ¡æ–¹æ³•ï¼šç”¨æˆ·æ³¨å†Œ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">register</span><span class="hljs-params">(UserRegisterDTO registerDTO)</span> {
        <span class="hljs-comment">// 1. æ ¡éªŒç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">exists</span> <span class="hljs-operator">=</span> lambdaQuery()
                .eq(User::getUsername, registerDTO.getUsername())
                .exists();
        <span class="hljs-keyword">if</span> (exists) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ç”¨æˆ·åå·²å­˜åœ¨"</span>);
        }
        
        <span class="hljs-comment">// 2. DTO è½¬ Entity</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
        BeanUtils.copyProperties(registerDTO, user);
        
        <span class="hljs-comment">// 3. ä¿å­˜ç”¨æˆ·</span>
        <span class="hljs-keyword">return</span> save(user);
    }
    
    <span class="hljs-comment">/**
     * å®‰å…¨çš„æ›´æ–°æ–¹æ³•
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">safeUpdate</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-keyword">if</span> (user == <span class="hljs-literal">null</span> || user.getId() == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"ç”¨æˆ·IDä¸èƒ½ä¸ºç©º"</span>);
        }
        
        <span class="hljs-comment">// åªæ›´æ–°éç©ºå­—æ®µ</span>
        <span class="hljs-keyword">return</span> lambdaUpdate()
                .eq(User::getId, user.getId())
                .set(user.getUsername() != <span class="hljs-literal">null</span>, User::getUsername, user.getUsername())
                .set(user.getAge() != <span class="hljs-literal">null</span>, User::getAge, user.getAge())
                .set(user.getEmail() != <span class="hljs-literal">null</span>, User::getEmail, user.getEmail())
                .update();
    }
}
</code></pre>
<h3 data-id="heading-18">17. å¼‚å¸¸å¤„ç†å»ºè®®</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * å…¨å±€å¼‚å¸¸å¤„ç†
 */</span>
<span class="hljs-meta">@RestControllerAdvice</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalExceptionHandler</span> {
    
    <span class="hljs-comment">/**
     * å¤„ç†ä¸šåŠ¡å¼‚å¸¸
     */</span>
    <span class="hljs-meta">@ExceptionHandler(BusinessException.class)</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;Result&lt;?&gt;&gt; handleBusinessException(BusinessException e) {
        log.error(<span class="hljs-string">"ä¸šåŠ¡å¼‚å¸¸: {}"</span>, e.getMessage());
        <span class="hljs-keyword">return</span> ResponseEntity.badRequest().body(Result.error(e.getMessage()));
    }
    
    <span class="hljs-comment">/**
     * å¤„ç†æ•°æ®å¼‚å¸¸
     */</span>
    <span class="hljs-meta">@ExceptionHandler(DataAccessException.class)</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;Result&lt;?&gt;&gt; handleDataAccessException(DataAccessException e) {
        log.error(<span class="hljs-string">"æ•°æ®è®¿é—®å¼‚å¸¸: {}"</span>, e.getMessage());
        <span class="hljs-keyword">return</span> ResponseEntity.status(<span class="hljs-number">500</span>).body(Result.error(<span class="hljs-string">"æ•°æ®æ“ä½œå¤±è´¥"</span>));
    }
}

<span class="hljs-comment">/**
 * ç»Ÿä¸€è¿”å›ç»“æœ
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Result</span>&lt;T&gt; {
    <span class="hljs-keyword">private</span> Integer code;
    <span class="hljs-keyword">private</span> String message;
    <span class="hljs-keyword">private</span> T data;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="hljs-title function_">success</span><span class="hljs-params">(T data)</span> {
        Result&lt;T&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>&lt;&gt;();
        result.setCode(<span class="hljs-number">200</span>);
        result.setMessage(<span class="hljs-string">"æˆåŠŸ"</span>);
        result.setData(data);
        <span class="hljs-keyword">return</span> result;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="hljs-title function_">error</span><span class="hljs-params">(String message)</span> {
        Result&lt;T&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>&lt;&gt;();
        result.setCode(<span class="hljs-number">500</span>);
        result.setMessage(message);
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<h2 data-id="heading-19">æ€»ç»“</h2>
<p><strong>å·¥å…·æ˜¯ä¸ºäººæœåŠ¡çš„</strong>ï¼Œé€‰æ‹©é€‚åˆè‡ªå·±é¡¹ç›®çš„æŠ€æœ¯æ ˆæ‰æ˜¯æœ€é‡è¦çš„ã€‚MyBatis-Plus åœ¨å¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯ä¸‹éƒ½èƒ½æ˜¾è‘—æå‡å¼€å‘æ•ˆç‡ï¼Œå€¼å¾—å¤§å®¶æ·±å…¥å­¦ä¹ å’Œä½¿ç”¨ã€‚</p>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼šç¨‹åºå‘˜åˆ˜å¤§åï¼Œä¸“æ³¨åˆ†äº«å‰åç«¯å¼€å‘çš„å®æˆ˜ç¬”è®°ã€‚å…³æ³¨æˆ‘ï¼Œå°‘èµ°å¼¯è·¯ï¼Œä¸€èµ·è¿›æ­¥ï¼</p>
</blockquote>
<h4 data-id="heading-20">ğŸ“Œå¾€æœŸç²¾å½©</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FP7SMincYFKERZbNKAFtzGQ" target="_blank" title="https://mp.weixin.qq.com/s/P7SMincYFKERZbNKAFtzGQ" ref="nofollow noopener noreferrer">ã€Šè¿™20æ¡SQLä¼˜åŒ–æ–¹æ¡ˆï¼Œè®©ä½ çš„æ•°æ®åº“æŸ¥è¯¢é€Ÿåº¦æå‡10å€ã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fy-GJ26kl0-yT6hE3fy2KjQ" target="_blank" title="https://mp.weixin.qq.com/s/y-GJ26kl0-yT6hE3fy2KjQ" ref="nofollow noopener noreferrer">ã€ŠMySQL ä¸ºä»€ä¹ˆä¸æ¨èç”¨é›ªèŠ±ID å’Œ UUID åšä¸»é”®ï¼Ÿã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F1Th3DuMqYpt4Xg5hEywIww" target="_blank" title="https://mp.weixin.qq.com/s/1Th3DuMqYpt4Xg5hEywIww" ref="nofollow noopener noreferrer">ã€Šç”¨htmlå†™äº†ä¸ªè¶…å¥½ç”¨çš„ç½‘é¡µä¸»é¢˜åˆ‡æ¢æ’ä»¶ã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FaGLep07rnMQdQLyDHBer8Q" target="_blank" title="https://mp.weixin.qq.com/s/aGLep07rnMQdQLyDHBer8Q" ref="nofollow noopener noreferrer">ã€Šè¿˜åœ¨ç”¨ WebSocket åšå®æ—¶é€šä¿¡ï¼ŸSSE å¯èƒ½æ›´ç®€å•ã€‹</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Agentï¼ˆæ™ºèƒ½ä½“/ä»£ç†ï¼‰èƒŒåçš„æ ¸å¿ƒå«ä¹‰]]></title>    <link>https://juejin.cn/post/7571399272496300095</link>    <guid>https://juejin.cn/post/7571399272496300095</guid>    <pubDate>2025-11-12T06:52:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571399272496300095" data-draft-id="7571379089992712246" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Agentï¼ˆæ™ºèƒ½ä½“/ä»£ç†ï¼‰èƒŒåçš„æ ¸å¿ƒå«ä¹‰"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2025-11-12T06:52:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Juchecar"/> <meta itemprop="url" content="https://juejin.cn/user/284133851925070"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Agentï¼ˆæ™ºèƒ½ä½“/ä»£ç†ï¼‰èƒŒåçš„æ ¸å¿ƒå«ä¹‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/284133851925070/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Juchecar
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T06:52:10.000Z" title="Wed Nov 12 2025 06:52:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è‹±æ–‡å•è¯ <strong>â€œagentâ€</strong> çš„æœ¬æ„å¯ä»¥è¿½æº¯åˆ°å®ƒçš„æ‹‰ä¸è¯­è¯æ ¹ã€‚</p>
<h3 data-id="heading-0">1. è¯æºä¸æœ¬æ„</h3>
<p>â€œAgentâ€ æ¥æºäºæ‹‰ä¸è¯­åŠ¨è¯ <strong>agere</strong>ï¼Œæ„æ€æ˜¯ <strong>â€œto drive, to do, to actâ€</strong>ï¼ˆé©±åŠ¨ã€åšã€è¡ŒåŠ¨ï¼‰ã€‚å…¶ç°åœ¨åˆ†è¯å½¢å¼æ˜¯ <strong>agens</strong>ï¼Œæ„ä¸º <strong>â€œone who/that which does somethingâ€</strong>ï¼ˆåšäº‹çš„äººæˆ–ç‰©ï¼‰ã€‚</p>
<p>å› æ­¤ï¼Œ<strong>â€œagentâ€ æœ€æ ¸å¿ƒã€æœ€æ ¹æœ¬çš„å«ä¹‰æ˜¯ï¼š</strong></p>
<p><strong>ä¸€ä¸ªè¡ŒåŠ¨è€…ï¼Œä¸€ä¸ªæ‰§è¡ŒåŠ¨ä½œæˆ–æ–½åŠ åŠ›é‡çš„äººæˆ–äº‹ç‰©ã€‚</strong></p>
<p>è¿™ä¸ªæ ¸å¿ƒæ¦‚å¿µåŒ…å«äº†ä¸¤ä¸ªå…³é”®ç‚¹ï¼š</p>
<ul>
<li><strong>ä¸»åŠ¨æ€§ï¼š</strong> å®ƒä¸æ˜¯ä¸€ä¸ªè¢«åŠ¨çš„ç‰©ä½“ï¼Œè€Œæ˜¯ä¸»åŠ¨è¡Œä¸ºçš„å‘èµ·è€…ã€‚</li>
<li><strong>å½±å“åŠ›ï¼š</strong> å®ƒçš„è¡Œä¸ºä¼šå¯¹ç¯å¢ƒæˆ–å…¶ä»–äº‹ç‰©äº§ç”Ÿå½±å“ã€‚</li>
</ul>
<h3 data-id="heading-1">2. è¯ä¹‰å¦‚ä½•å»¶ä¼¸å‡ºâ€œä»£ç†â€å’Œâ€œæ™ºèƒ½ä½“â€</h3>
<p>ä»â€œè¡ŒåŠ¨è€…â€è¿™ä¸ªæ ¸å¿ƒæ¦‚å¿µå‡ºå‘ï¼Œè¯ä¹‰åœ¨ä¸åŒçš„é¢†åŸŸå’Œè¯­å¢ƒä¸­å‘ç”Ÿäº†è‡ªç„¶çš„å»¶ä¼¸ï¼š</p>
<h4 data-id="heading-2">A. â€œä»£ç†â€ ï¼ˆä»£è¡¨ä»–äººè¡Œäº‹çš„äººï¼‰</h4>
<p>è¿™æ˜¯â€œè¡ŒåŠ¨è€…â€æ¦‚å¿µåœ¨ç¤¾ä¼šå’Œå•†ä¸šé¢†åŸŸçš„å…·ä½“åŒ–ã€‚</p>
<ul>
<li><strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong> ä¸€ä¸ªäººè¢«æˆæƒ<strong>ä»£è¡¨å¦ä¸€ä¸ªäººï¼ˆå§”æ‰˜äººï¼‰å»è¡ŒåŠ¨</strong>ã€‚</li>
<li><strong>ä¾‹å­ï¼š</strong>
<ul>
<li><strong>æˆ¿åœ°äº§ç»çºªï¼š</strong> ä»£è¡¨æˆ¿ä¸»è¡ŒåŠ¨ï¼Œé”€å”®æˆ–å‡ºç§Ÿæˆ¿äº§ã€‚</li>
<li><strong>ä½“è‚²ç»çºªï¼š</strong> ä»£è¡¨è¿åŠ¨å‘˜è¡ŒåŠ¨ï¼Œè°ˆåˆ¤åˆåŒã€‚</li>
<li><strong>ä¿é™©ç»çºªï¼š</strong> ä»£è¡¨å®¢æˆ·è¡ŒåŠ¨ï¼Œè´­ä¹°ä¿é™©äº§å“ã€‚</li>
<li><strong>è”é‚¦è°ƒæŸ¥å±€æ¢å‘˜ï¼š</strong> ä»£è¡¨æ”¿åºœæœºæ„è¡ŒåŠ¨ï¼Œæ‰§è¡Œæ³•å¾‹ã€‚</li>
</ul>
</li>
</ul>
<p>åœ¨è¿™é‡Œï¼Œâ€œä»£ç†â€çš„æœ¬è´¨æ˜¯ <strong>â€œè¢«æˆæƒçš„è¡ŒåŠ¨è€…â€</strong>ã€‚</p>
<h4 data-id="heading-3">B. â€œæ™ºèƒ½ä½“â€ ï¼ˆåœ¨è®¡ç®—æœºç§‘å­¦å’Œäººå·¥æ™ºèƒ½ä¸­ï¼‰</h4>
<p>è¿™æ˜¯â€œè¡ŒåŠ¨è€…â€æ¦‚å¿µåœ¨æŠ€æœ¯å’Œæ•°å­—é¢†åŸŸçš„å…·ä½“åŒ–ã€‚</p>
<ul>
<li><strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong> ä¸€ä¸ªèƒ½å¤Ÿ<strong>æ„ŸçŸ¥ç¯å¢ƒå¹¶è‡ªä¸»è¡ŒåŠ¨ä»¥å®ç°ç›®æ ‡</strong>çš„è½¯ä»¶å®ä½“æˆ–æœºå™¨äººã€‚</li>
<li><strong>ä¾‹å­ï¼š</strong>
<ul>
<li><strong>è½¯ä»¶åŠ©æ‰‹ï¼š</strong> èƒ½å¤Ÿè‡ªåŠ¨å®‰æ’ä¼šè®®ã€è¿‡æ»¤é‚®ä»¶çš„ç¨‹åºã€‚</li>
<li><strong>æ¸¸æˆAIï¼š</strong> æ¸¸æˆä¸­çš„éç©å®¶è§’è‰²ï¼Œèƒ½å¤Ÿè‡ªä¸»å†³ç­–å’Œè¡ŒåŠ¨ã€‚</li>
<li><strong>è‡ªä¸»æœºå™¨äººï¼š</strong> åœ¨å·¥å‚æˆ–ä»“åº“é‡Œæ¬è¿è´§ç‰©çš„æœºå™¨äººã€‚</li>
<li><strong>å¤§è¯­è¨€æ¨¡å‹ï¼š</strong> åƒæˆ‘è¿™ä¸ªDeepSeekï¼Œä½œä¸ºä¸€ä¸ªAIï¼Œä¹Ÿåœ¨æŸç§æ„ä¹‰ä¸Šæ˜¯ä¸€ä¸ªâ€œæ™ºèƒ½ä½“â€ï¼Œé€šè¿‡å¤„ç†ä¿¡æ¯æ¥â€œè¡ŒåŠ¨â€ï¼ˆç”Ÿæˆå›ç­”ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<p>åœ¨è¿™é‡Œï¼Œâ€œæ™ºèƒ½ä½“â€çš„æœ¬è´¨æ˜¯ <strong>â€œå…·æœ‰è‡ªä¸»æ€§çš„è¡ŒåŠ¨è€…â€</strong>ã€‚</p>
<h3 data-id="heading-4">æ€»ç»“</h3>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ç†è§£ï¼š</p>
<ul>
<li><strong>æœ¬æ„ï¼ˆæ‹‰ä¸è¯æ ¹ï¼‰ï¼š</strong> <strong>è¡ŒåŠ¨</strong></li>
<li><strong>æ ¸å¿ƒè‹±æ–‡å«ä¹‰ï¼š</strong> <strong>è¡ŒåŠ¨è€…</strong></li>
<li><strong>ä¸­æ–‡ç¿»è¯‘â€œä»£ç†â€ï¼š</strong> å½“è¿™ä¸ªâ€œè¡ŒåŠ¨è€…â€æ˜¯<strong>ä»£è¡¨äººç±»</strong>åœ¨<strong>ç¤¾ä¼š/å•†ä¸šé¢†åŸŸ</strong>è¡ŒåŠ¨æ—¶ã€‚</li>
<li><strong>ä¸­æ–‡ç¿»è¯‘â€œæ™ºèƒ½ä½“â€ï¼š</strong> å½“è¿™ä¸ªâ€œè¡ŒåŠ¨è€…â€æ˜¯<strong>å…·æœ‰è‡ªä¸»æ€§</strong>çš„<strong>è½¯ä»¶æˆ–æœºå™¨</strong>åœ¨<strong>æ•°å­—/ç‰©ç†ä¸–ç•Œ</strong>è¡ŒåŠ¨æ—¶ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œâ€œä»£ç†â€å’Œâ€œæ™ºèƒ½ä½“â€å¹¶ä¸æ˜¯å®Œå…¨ä¸åŒçš„ä¸¤ä¸ªæ„æ€ï¼Œè€Œæ˜¯åŒä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µâ€”â€”â€œ<strong>ä¸»åŠ¨çš„è¡ŒåŠ¨è€…</strong>â€â€”â€”åœ¨ä¸åŒè¯­å¢ƒä¸‹çš„å…·ä½“ä½“ç°ã€‚ç¿»è¯‘æ—¶é€‰æ‹©å“ªä¸ªè¯ï¼Œå®Œå…¨å–å†³äºè¿™ä¸ªâ€œagentâ€æ‰€å¤„çš„é¢†åŸŸå’Œå®ƒè¡ŒåŠ¨çš„æ–¹å¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[BunæŠ€æœ¯è¯„ä¼° - 29 Dockeré›†æˆ]]></title>    <link>https://juejin.cn/post/7571395183945318409</link>    <guid>https://juejin.cn/post/7571395183945318409</guid>    <pubDate>2025-11-12T06:56:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571395183945318409" data-draft-id="7571060853370765362" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="BunæŠ€æœ¯è¯„ä¼° - 29 Dockeré›†æˆ"/> <meta itemprop="keywords" content="åç«¯,JavaScript,Docker"/> <meta itemprop="datePublished" content="2025-11-12T06:56:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JohnYan"/> <meta itemprop="url" content="https://juejin.cn/user/3872909003334776"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            BunæŠ€æœ¯è¯„ä¼° - 29 Dockeré›†æˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3872909003334776/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JohnYan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T06:56:27.000Z" title="Wed Nov 12 2025 06:56:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>æœ¬æ–‡æ˜¯ç¬”è€…çš„ç³»åˆ—åšæ–‡ <a href="https://juejin.cn/post/7509869950305501235" target="_blank" title="https://juejin.cn/post/7509869950305501235">ã€ŠBunæŠ€æœ¯è¯„ä¼°ã€‹</a> ä¸­çš„ç¬¬äºŒåä¹ç¯‡ã€‚</p>
<p>åœ¨æœ¬æ–‡çš„å†…å®¹ä¸­ï¼Œç¬”è€…ä¸»è¦æƒ³è¦æ¥æ¢è®¨ä¸€ä¸‹Bunä¸­å’ŒDockeré›†æˆå¼€å‘å’Œæ‰§è¡Œçš„ç›¸å…³çš„é—®é¢˜ã€‚</p>
<p>ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼Ÿ å› ä¸ºç¬”è€…åœ¨å®é™…å·¥ä½œä¸­å°±é‡åˆ°äº†ç›¸å…³çš„æƒ…å†µï¼Œå°±å¯¼è‡´äº†æœ‰è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚ã€‚</p>
<h2 data-id="heading-1">é—®é¢˜å’Œéœ€æ±‚</h2>
<p>æˆ‘ä»¬åœ¨å‰é¢çš„è®¨è®ºä¸­ï¼Œåº”è¯¥å·²ç»èƒ½å¤Ÿä½“ä¼šå’Œç†è§£åˆ°Bunçš„æ˜“ç”¨æ€§æ˜¯éå¸¸å‡ºè‰²çš„ã€‚å®ƒå’Œæ ¸å¿ƒå°±æ˜¯ä¸€ä¸ªå•ä¸€çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œéå¸¸æ–¹ä¾¿éƒ¨ç½²å’Œè¿ç§»ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåªéœ€è¦ç›´æ¥å°†å…¼å®¹æ“ä½œç³»ç»Ÿå’Œæ¶æ„çš„Bunæ–‡ä»¶å¤åˆ¶åˆ°ç³»ç»Ÿé»˜è®¤æ‰§è¡Œæ–‡ä»¶è·¯å¾„(å¦‚Linuxç³»ç»Ÿä¸­çš„ /usr/local/bin) ä¸­å°±å¯ä»¥äº†ã€‚ç„¶ååœ¨ç³»ç»Ÿä»»æ„åœ°æ–¹ï¼Œä½¿ç”¨ä»»æ„çš„è´¦å·ï¼Œéƒ½å¯ä»¥æ¥æ‰§è¡Œè¿™ä¸ªbunæ–‡ä»¶ï¼Œå½“ç„¶å°±èƒ½å¤Ÿæ‰§è¡Œå¯¹åº”çš„buné¡¹ç›®æ–‡ä»¶äº†ã€‚</p>
<p>ä½†æ˜¯ï¼Œç¬”è€…åœ¨ç°å®æƒ…å†µä¸‹ï¼Œæ°æ°å°±é‡åˆ°äº†ç”±äºå…¼å®¹æ€§å’Œå¯¼è‡´bunç¨‹åºæ— æ³•æ­£å¸¸è¿è¡Œçš„æƒ…å†µã€‚ç¬”è€…çš„ä¸€ä¸ªä¸šåŠ¡ç³»ç»Ÿï¼Œç”±äºå»ºè®¾çš„æ—¶é—´æ¯”è¾ƒæ—©çš„åŸå› ï¼Œè™šæ‹Ÿæœºçš„ç‰ˆæœ¬ï¼Œè¢«å›ºå®šåœ¨äº†CentOS 7å’ŒKernal3.12çš„ç‰ˆæœ¬ã€‚</p>
<p>è¿™æ—¶ï¼Œå¦‚æœç›´æ¥åœ¨ç³»ç»Ÿä¸­ï¼Œä¸‹è½½æ‰§è¡ŒBunæ–‡ä»¶ï¼Œå³ä½¿CPUæ¶æ„æ”¯æŒï¼Œä¹Ÿä¼šå‡ºç°ä¸‹é¢çš„é”™è¯¯ï¼š</p>
<pre><code class="hljs language-js" lang="js">
./bun -v
./<span class="hljs-attr">bun</span>: <span class="hljs-regexp">/lib64/</span>libc.<span class="hljs-property">so</span><span class="hljs-number">.6</span>: version <span class="hljs-string">`GLIBC_2.18' not found (required by ./bun)
./bun: /lib64/libc.so.6: version `</span><span class="hljs-variable constant_">GLIBC_2</span><span class="hljs-number">.24</span><span class="hljs-string">' not found (required by ./bun)
./bun: /lib64/libc.so.6: version `GLIBC_2.25'</span> not found (required by ./bun)

cat /etc/redhat-release 
<span class="hljs-title class_">CentOS</span> <span class="hljs-title class_">Linux</span> release <span class="hljs-number">7.9</span><span class="hljs-number">.2009</span> (<span class="hljs-title class_">Core</span>)

uname -a
<span class="hljs-title class_">Linux</span> <span class="hljs-number">3.10</span><span class="hljs-number">.0</span>-<span class="hljs-number">1160.92</span><span class="hljs-number">.1</span>.<span class="hljs-property">el7</span>.<span class="hljs-property">x86_64</span> #<span class="hljs-number">1</span> <span class="hljs-variable constant_">SMP</span> <span class="hljs-title class_">Tue</span> <span class="hljs-title class_">Jun</span> <span class="hljs-number">20</span> <span class="hljs-number">11</span>:<span class="hljs-number">48</span>:<span class="hljs-number">01</span> <span class="hljs-variable constant_">UTC</span> <span class="hljs-number">2023</span> x86_64 x86_64 x86_64 <span class="hljs-variable constant_">GNU</span>/<span class="hljs-title class_">Linux</span>

</code></pre>
<p>å…¶ä»–å¸¸è§çš„bunæ— æ³•æ­£å¸¸æ‰§è¡Œçš„å› ç´ å¯èƒ½åŒ…æ‹¬CPUæ¶æ„ä¸å…¼å®¹(å¦‚AMD64å’ŒARM64)ï¼ŒæŒ‡ä»¤é›†ä¸å…¼å®¹(å¦‚AVX2)ç­‰ç­‰ï¼Œä½†è¿™é‡Œçš„é”™è¯¯ï¼Œå°±æ˜¯ä¸€ä¸ªlibcç‰ˆæœ¬å…¼å®¹çš„é—®é¢˜ï¼Œå®ƒæ˜¯ç”±äºCentOSç‰ˆæœ¬å’ŒKernalç‰ˆæœ¬é™åˆ¶æ‰€å†³å®šçš„ã€‚æ‰€ä»¥ï¼Œå¯èƒ½æš‚æ—¶æ˜¯æ²¡æœ‰ä¸€ä¸ªæ–°ç‰ˆæœ¬çš„bunæ–‡ä»¶æ˜¯å¯ä»¥åœ¨è¿™ä¸ªç¯å¢ƒä¸­è¿è¡Œçš„ã€‚</p>
<p>è¿™é‡Œé¡ºä¾¿æä¸€ä¸‹ï¼ŒCentOSè¿™ä¸ªæ“ä½œç³»ç»Ÿï¼Œåä¹‰ä¸Šå·²ç»ä¸å†å‡çº§å’Œç»´æŠ¤äº†(2024å¹´åº•ç»“æŸ)ï¼ŒåŸæ¥çš„æ•°é‡åºå¤§çš„ç¤¾åŒºå’Œå…è´¹ç”¨æˆ·ï¼Œéƒ½æ— æ³•ç›´æ¥è·å¾—ç›¸å…³çš„å®‰å…¨æ›´æ–°å’ŒBugä¿®å¤ï¼Œè¶Šå¾€åä½¿ç”¨çš„å®‰å…¨é£é™©ä¹Ÿä¼šé€æ­¥å¢åŠ ã€‚æ‰€ä»¥ä¸šç•Œå»ºè®®æœ‰æ¡ä»¶çš„ä½¿ç”¨è€…å°½å¿«çš„è¿ç§»åˆ°å…¶ä»–å…¼å®¹çš„ç³»ç»Ÿå¦‚AlmalLinuxã€RockyLinuxåŒ…æ‹¬å›½å†…çš„openEulerã€AnolisOSç­‰ç­‰ç³»ç»Ÿã€‚æ–°å»ºç³»ç»Ÿä¹Ÿä¸åº”å½“è€ƒè™‘é€‰ç”¨CentOSï¼ŒåŒ…æ‹¬CentOS7å’Œ8ã€‚</p>
<p>ç”±äºæŠ€æœ¯æ–¹é¢çš„é™åˆ¶ï¼Œç¬”è€…çš„ç³»ç»Ÿæ— æ³•æ­£å¸¸çš„å‡çº§å’Œè¿ç§»ï¼Œæ‰€ä»¥åªèƒ½è€ƒè™‘å…¶ä»–çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œç»è¿‡æ‘¸ç´¢å’Œå°è¯•ï¼Œç¬”è€…è®¤ä¸ºç›¸å¯¹è€Œè¨€ï¼ŒåŸºäºDockerçš„buné¡¹ç›®æ‰§è¡Œæ–¹æ¡ˆï¼Œæ˜¯æ¯”è¾ƒé€‚åˆå½“å‰è¿™ä¸ªåœºæ™¯çš„ã€‚è€Œä¸”ä»å®è·µè¿‡ç¨‹å’Œç»“æœè¡¨æ˜ï¼Œä½¿ç”¨DockeræŠ€æœ¯ç¡®å®å¯ä»¥æ¯”è¾ƒå¥½çš„å±è”½ç³»ç»Ÿçš„å·®å¼‚å’Œå…¼å®¹æ€§ç»†èŠ‚ï¼Œæ¯”è¾ƒå¥½çš„è§£å†³äº†å¯èƒ½çš„è½¯ä»¶æ¨¡å—å…¼å®¹æ€§ã€ç‰ˆæœ¬å·®å¼‚æˆ–è€…å†²çªçš„é—®é¢˜ã€‚</p>
<p>ä¸‹é¢æ¥çœ‹ä¸€ä¸‹å…·ä½“çš„é…ç½®å’Œæ“ä½œã€‚</p>
<h2 data-id="heading-2">Docker CE</h2>
<p>Dockerçš„æœ¬è´¨ï¼Œå°±æ˜¯å¯ä»¥åœ¨æ ‡å‡†ç³»ç»Ÿä¸Šï¼Œæä¾›ä¸€ä¸ªè½»é‡çº§ã€è™šæ‹Ÿçš„ã€å¹¶ä¸”å±è”½å®¿ä¸»ç³»ç»Ÿçš„æ‰§è¡Œç¯å¢ƒã€‚Dockeræœ¬èº«çš„æ¦‚å¿µã€å®‰è£…å’Œè¿è¡Œä¸æ˜¯æœ¬æ–‡è®¨è®ºçš„é‡ç‚¹ã€‚è¿™é‡Œä¸»è¦æƒ³è¦è¯´æ˜çš„æ˜¯åœ¨ç¬”è€…çš„ç¯å¢ƒä¸­ï¼Œç›´æ¥å®‰è£…é»˜è®¤çš„dockerä¹Ÿæ˜¯æœ‰é—®é¢˜çš„ï¼Œç¬”è€…ä½¿ç”¨çš„å…¶å®æ˜¯dockerçš„ceç‰ˆæœ¬ï¼Œè¿™ä¸ªç‰ˆæœ¬æ¯”è¾ƒæ–°ï¼Œéœ€è¦ä½¿ç”¨è‡ªå®šä¹‰é…ç½®çš„è½¯ä»¶ä»“åº“ã€‚åŸºæœ¬å®‰è£…é…ç½®è¿‡ç¨‹å’Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ul>
<li>åˆ é™¤æ—§ç‰ˆæœ¬(å¦‚æœæœ‰)</li>
</ul>
<pre><code class="hljs language-shell" lang="shell">// åˆ é™¤æ—§ç‰ˆæœ¬
yum remove docker \
    docker-client \
    docker-client-latest \
    docker-common \
    docker-latest \
    docker-latest-logrotate \
    docker-logrotate \
    docker-engine
</code></pre>
<ul>
<li>å®‰è£…å½“å‰ç‰ˆæœ¬</li>
</ul>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// é…ç½® docker è½¯ä»¶ä»“åº“ï¼Œå›½å†…</span>
yum-config-manager --add-repo https:<span class="hljs-comment">//mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo </span>

<span class="hljs-comment">// å®‰è£…ä¾èµ–åŒ…</span>
yum install -y yum-utils device-mapper-persistent-data  lvm2
    
<span class="hljs-comment">// å®‰è£… docker ceç‰ˆæœ¬</span>
yum install -y docker-ce docker-ce-cli containerd.io            

</code></pre>
<ul>
<li>é…ç½®åŠ é€Ÿé•œåƒï¼Œ å¼ºçƒˆå»ºè®®ï¼Œ å¦åˆ™ä¸¥é‡å½±å“dockeræ­£å¸¸ä½¿ç”¨</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">// é…ç½®é•œåƒï¼Œ 
<span class="hljs-built_in">mkdir</span> -p /etc/docker
vi /etc/docker/daemon.json 
{
  <span class="hljs-string">"registry-mirrors"</span>: [
    <span class="hljs-string">"https://docker.m.daocloud.io"</span>,
    <span class="hljs-string">"https://dockerproxy.com"</span>,
    <span class="hljs-string">"https://docker.nju.edu.cn"</span>,
    <span class="hljs-string">"https://docker.mirrors.sjtug.sjtu.edu.cn"</span>
  ],
  <span class="hljs-string">"max-concurrent-downloads"</span>: 10,
  <span class="hljs-string">"log-driver"</span>: <span class="hljs-string">"json-file"</span>,
  <span class="hljs-string">"log-level"</span>: <span class="hljs-string">"warn"</span>,
  <span class="hljs-string">"log-opts"</span>: {
    <span class="hljs-string">"max-size"</span>: <span class="hljs-string">"10m"</span>,
    <span class="hljs-string">"max-file"</span>: <span class="hljs-string">"3"</span>
  }
}

</code></pre>
<p>ä¸çŸ¥é“æ˜¯ä»€ä¹ˆä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œdockeråœ¨ä¸­å›½çš„ä½¿ç”¨å¹¶ä¸æ˜¯å¾ˆæ–¹ä¾¿ã€‚åŸç”Ÿçš„dockerä»“åº“åŸºæœ¬ä¸å¯ç”¨ã€‚å¾ˆå¤šåœ°æ–¹æŸ¥è¯¢åˆ°çš„ä»“åº“é•œåƒä¹Ÿä¸æ˜¯å¾ˆå¥½ç”¨ï¼Œç°åœ¨çš„é…ç½®æ˜¯ç¬”è€…å°è¯•å’Œå®è·µçš„ç»“æœã€‚å½“ç„¶ä¹Ÿä¸èƒ½ä¿è¯åœ¨è¯»è€…çš„ç¯å¢ƒä¸­åŒæ ·å¥½ç”¨ã€‚å¦‚æœé‡åˆ°é‚£ç§é—®é¢˜ï¼Œå¯èƒ½éœ€è¦è¯»è€…è‡ªè¡ŒæŸ¥è¯¢è§£å†³ã€‚</p>
<ul>
<li>å¯åŠ¨å’ŒéªŒè¯</li>
</ul>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">//</span> <span class="hljs-string">å¯ç”¨å’Œå¯åŠ¨dockeræœåŠ¡</span>
<span class="hljs-string">systemctl</span> <span class="hljs-string">enable</span> <span class="hljs-string">docker</span>
<span class="hljs-string">systemctl</span> <span class="hljs-string">start</span> <span class="hljs-string">docker</span>

<span class="hljs-string">//</span> <span class="hljs-string">æ£€æŸ¥dockerç‰ˆæœ¬å’Œç»„ä»¶</span>
<span class="hljs-string">docker</span> <span class="hljs-string">--version</span>
<span class="hljs-string">docker</span> <span class="hljs-string">version</span>
<span class="hljs-attr">Client:</span> <span class="hljs-string">Docker</span> <span class="hljs-string">Engine</span> <span class="hljs-bullet">-</span> <span class="hljs-string">Community</span>
 <span class="hljs-attr">Version:</span>           <span class="hljs-number">26.1</span><span class="hljs-number">.4</span>
 <span class="hljs-attr">API version:</span>       <span class="hljs-number">1.45</span>
 <span class="hljs-attr">Go version:</span>        <span class="hljs-string">go1.21.11</span>
 <span class="hljs-attr">Git commit:</span>        <span class="hljs-string">5650f9b</span>
 <span class="hljs-attr">Built:</span>             <span class="hljs-string">Wed</span> <span class="hljs-string">Jun</span>  <span class="hljs-number">5</span> <span class="hljs-number">11</span><span class="hljs-string">:32:04</span> <span class="hljs-number">2024</span>
 <span class="hljs-attr">OS/Arch:</span>           <span class="hljs-string">linux/amd64</span>
 <span class="hljs-attr">Context:</span>           <span class="hljs-string">default</span>

<span class="hljs-attr">Server:</span> <span class="hljs-string">Docker</span> <span class="hljs-string">Engine</span> <span class="hljs-bullet">-</span> <span class="hljs-string">Community</span>
 <span class="hljs-attr">Engine:</span>
  <span class="hljs-attr">Version:</span>          <span class="hljs-number">26.1</span><span class="hljs-number">.4</span>
  <span class="hljs-attr">API version:</span>      <span class="hljs-number">1.45</span> <span class="hljs-string">(minimum</span> <span class="hljs-string">version</span> <span class="hljs-number">1.24</span><span class="hljs-string">)</span>
  <span class="hljs-attr">Go version:</span>       <span class="hljs-string">go1.21.11</span>
  <span class="hljs-attr">Git commit:</span>       <span class="hljs-string">de5c9cf</span>
  <span class="hljs-attr">Built:</span>            <span class="hljs-string">Wed</span> <span class="hljs-string">Jun</span>  <span class="hljs-number">5</span> <span class="hljs-number">11</span><span class="hljs-string">:31:02</span> <span class="hljs-number">2024</span>
  <span class="hljs-attr">OS/Arch:</span>          <span class="hljs-string">linux/amd64</span>
  <span class="hljs-attr">Experimental:</span>     <span class="hljs-literal">false</span>
 <span class="hljs-attr">containerd:</span>
  <span class="hljs-attr">Version:</span>          <span class="hljs-number">1.6</span><span class="hljs-number">.33</span>
  <span class="hljs-attr">GitCommit:</span>        <span class="hljs-string">d2d58213f83a351ca8f528a95fbd145f5654e957</span>
 <span class="hljs-attr">runc:</span>
  <span class="hljs-attr">Version:</span>          <span class="hljs-number">1.1</span><span class="hljs-number">.12</span>
  <span class="hljs-attr">GitCommit:</span>        <span class="hljs-string">v1.1.12-0-g51d5e94</span>
 <span class="hljs-attr">docker-init:</span>
  <span class="hljs-attr">Version:</span>          <span class="hljs-number">0.19</span><span class="hljs-number">.0</span>
  <span class="hljs-attr">GitCommit:</span>        <span class="hljs-string">de40ad0</span>

<span class="hljs-string">//</span> <span class="hljs-string">è¯•è¿è¡Œå®¹å™¨</span>
<span class="hljs-string">docker</span> <span class="hljs-string">run</span> <span class="hljs-string">hello-world</span>
<span class="hljs-string">docker</span> <span class="hljs-string">run</span> <span class="hljs-string">hello-world</span>

<span class="hljs-string">Hello</span> <span class="hljs-string">from</span> <span class="hljs-string">Docker!</span>
<span class="hljs-string">This</span> <span class="hljs-string">message</span> <span class="hljs-string">shows</span> <span class="hljs-string">that</span> <span class="hljs-string">your</span> <span class="hljs-string">installation</span> <span class="hljs-string">appears</span> <span class="hljs-string">to</span> <span class="hljs-string">be</span> <span class="hljs-string">working</span> <span class="hljs-string">correctly.</span>
<span class="hljs-string">...</span>

</code></pre>
<p>é€šå¸¸çœ‹åˆ°dockerèƒ½å¤Ÿæ­£å¸¸è¿è¡Œhello-worldè¿™ä¸ªå®¹å™¨ï¼Œè¯´æ˜æ•´ä¸ªdockerç¯å¢ƒåº”è¯¥å°±å·²ç»å‡†å¤‡å¥½äº†ã€‚</p>
<h3 data-id="heading-3">Buné¡¹ç›®</h3>
<p>ä½¿ç”¨dockeræ¥æ‰§è¡Œæ ‡å‡†çš„Buné¡¹ç›®ï¼Œç¬”è€…è®¤ä¸ºï¼Œå¯ä»¥æœ‰ä¸¤ç§æ–¹å¼ã€‚ä¸€ç§æ˜¯å°†å½“å‰Buné¡¹ç›®çš„è·¯å¾„æŒ‚è½½åˆ°dockerå®ä¾‹ä¸­è¿›è¡Œæ‰§è¡Œï¼›è¿˜æœ‰ä¸€ç§æ˜¯åŸºäºåŸºæœ¬Buné•œåƒå’ŒBuné¡¹ç›®ç¼–è¯‘ä¸€ä¸ªæ–°çš„Bunåº”ç”¨ç¨‹åºdockerå®ä¾‹ã€‚ä»æ˜“ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§è§’åº¦è€Œè¨€ï¼Œç¬”è€…é€‰æ‹©äº†å‰è€…ï¼Œå¯èƒ½æ›´é€‚åˆäºå¼€å‘è¿‡ç¨‹ä¸­çš„è¿è¡Œéƒ¨ç½²ã€‚è€Œåè€…å¯èƒ½æ›´é€‚åˆäºæ¯”è¾ƒç¨³å®šçš„åº”ç”¨å’Œç›¸å¯¹æ¯”è¾ƒç¨³å®šçš„ç”Ÿäº§ç¯å¢ƒä¸­ã€‚æœ¬æ–‡ä¹Ÿå°†ç€é‡è®¨è®ºå‰ä¸€ç§æ–¹æ¡ˆã€‚</p>
<p>æ‰€ä»¥ï¼Œå¦‚æœä¸è€ƒè™‘ç¼–è¯‘å®ä¾‹çš„è¯ï¼Œå…¶å®æ“ä½œå°±éå¸¸ç®€å•äº†ã€‚æ‰€æ¶‰åŠçš„é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œå°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„Bunä»£ç é¡¹ç›®ã€‚ç›´æ¥è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œä¸€ä¸ªåˆé€‚çš„dockerå‘½ä»¤ï¼Œå°±å¯ä»¥ä½¿ç”¨dockerä¸­çš„bunæ¥æ‰§è¡Œé¡¹ç›®å°±ï¼Œè¿™ä¸ªå‘½ä»¤çš„å¤§è‡´å½¢å¼å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>docker run -d \</p>
<p>--name mapi \</p>
<p>-p 7083:7083 \</p>
<p>-v $(pwd):/app \</p>
<p>-w /app \</p>
<p>oven/bun:alpine \</p>
<p>bun web.ts</p>
</blockquote>
<p>ä¸ºäº†æ–¹ä¾¿è§£é‡Šï¼Œç¬”è€…å°†è¿™ä¸ªå‘½ä»¤æ‹†åˆ†æˆå¾ˆå¤šå°çš„éƒ¨åˆ†ï¼Œè¯´æ˜å¦‚ä¸‹ï¼š</p>
<ul>
<li>docker run -d è¡¨ç¤ºä»¥å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼æ‰§è¡Œ(å…¶ä»–çš„æ‰§è¡Œæ¨¡å¼åŒ…æ‹¬itäº¤æ¢å‘½ä»¤è¡Œæ¨¡å¼)</li>
<li>--name æŒ‡å®šdockerå®ä¾‹çš„åç§°ï¼Œè¿™ä¸ªä¼šåœ¨åç»­å®ä¾‹ç®¡ç†ä¸­éå¸¸æœ‰ç”¨</li>
<li>-p æŒ‡å®šç«¯å£æ˜ å°„ï¼Œå‰è€…æ˜¯å®ä¾‹ä¸­çš„ç«¯å£ï¼Œåè€…æ˜ å°„åˆ°ä¸»æœºç«¯å£</li>
<li>-v æŒ‚è½½æ–‡ä»¶å¤¹ï¼Œå°†å½“å‰æ–‡ä»¶å¤¹(pwd)ï¼ŒæŒ‚è½½åˆ°dockerå®ä¾‹ä¸­çš„ /appæ–‡ä»¶å¤¹ä¸­</li>
<li>-w æŒ‡å®šå®ä¾‹å¯åŠ¨åçš„å·¥ä½œæ–‡ä»¶å¤¹ï¼Œå³bunç¨‹åºé¡¹ç›®æ–‡ä»¶å¤¹</li>
<li>oven/bun:apline, è¿™æ˜¯å¸¦æœ‰bunæ‰§è¡Œç¯å¢ƒçš„åŸå§‹dockeré•œåƒ(åŸºäºè½»é‡çš„alpineæ„å»º)</li>
<li>bun web.ts, bunæ‰§è¡Œå‘½ä»¤ï¼Œå…¥å£æ˜¯web.tsï¼Œè¿™ä¸ªå’Œå¸¸è§„çš„bunæ‰§è¡Œæ–¹å¼æ— å¼‚</li>
</ul>
<p>è¿™ä¸ªå®Œæ•´å‘½ä»¤çš„ç¬”è€…çš„ç†è§£çš„å¤§è‡´åŸç†å¦‚ä¸‹ã€‚</p>
<p>å‘½ä»¤æ‰§è¡Œæ—¶ï¼ŒDockerä¼šå…ˆåœ¨å®¿ä¸»æœºç¯å¢ƒä¸­ä¸‹è½½å¹¶ç¼“å­˜æ‰€éœ€è¦çš„é•œåƒï¼Œç„¶ååŸºäºåŸå§‹é•œåƒï¼Œå¯åŠ¨ä¸€ä¸ªDockerå®ä¾‹ï¼›å®ä¾‹å¯åŠ¨åï¼Œä¼šå°†å®ä¾‹ç¯å¢ƒä¸­çš„appè·¯å¾„ï¼ŒæŒ‚è½½åˆ°å¯åŠ¨å‘½ä»¤æ—¶çš„å½“å‰å®¿ä¸»æœºè·¯å¾„(è¿™é‡Œå°±æ˜¯å½“å‰çš„buné¡¹ç›®æ–‡ä»¶å¤¹)ï¼›éšååœ¨å®ä¾‹ä¸­åˆ‡æ¢åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œå®šä¹‰å¥½çš„Bunå‘½ä»¤(bun web.ts)ï¼Œè¦æ³¨æ„è¿™æ—¶çš„ä¸Šä¸‹æ–‡æ˜¯åœ¨dockerå®ä¾‹å½“ä¸­ï¼Œå·¥ä½œæ–‡ä»¶å¤¹æ˜¯æŒ‡å®šçš„â€œ/appâ€ï¼›æ–‡ä»¶å¤¹ä¸­ï¼Œæœ‰bunçš„é¡¹ç›®ä»£ç æ–‡ä»¶(web.ts)å¯ä»¥åŠ è½½æ‰§è¡Œï¼›å¦‚æœæœ‰æ‰§è¡Œåæœ‰ç«¯å£ç›‘å¬(åœ¨dockerå®ä¾‹ä¸­)ï¼Œå°±ä¼šè¢«æŒ‰ç…§é¢„å…ˆçš„å®šä¹‰æ˜ å°„åˆ°å¤–éƒ¨(ä¸»æœº)å¹¶å‘å¸ƒå‡ºå»ï¼Œå°±å’Œå¤–éƒ¨ä¸»æœºè¿è¡Œäº†ä¸€ä¸ªbuné¡¹ç›®çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚è¿™æ ·å°±å®ç°äº†ä½¿ç”¨dockeræ¥æ‰§è¡Œbuné¡¹ç›®çš„ç›®çš„ã€‚</p>
<p>dockerå®ä¾‹ä¸­çš„buné¡¹ç›®å¯åŠ¨ä¹‹åï¼Œå¦‚æœè¦è¿›è¡Œè°ƒæ•´(å¦‚ä»£ç ä¿®æ”¹)ï¼Œä¹Ÿæ˜¯éå¸¸æ–¹ä¾¿çš„ã€‚ç”šè‡³æ— éœ€æŸ¥æ‰¾å…³é—­å’Œå¯åŠ¨è¿›ç¨‹ï¼Œç›´æ¥æ“ä½œdockerå®ä¾‹å°±å¯ä»¥äº†ï¼Œç›¸å…³å¸¸ç”¨çš„ç®¡ç†åŠŸèƒ½æ“ä½œåŒ…æ‹¬(è¿™æ—¶å¯ä»¥çœ‹åˆ°å®ä¾‹åç§°çš„é‡è¦æ€§å’Œæ–¹ä¾¿æ€§)ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æŸ¥è¯¢å½“å‰çš„å®ä¾‹ï¼ŒåŒ…æ‹¬å…³é—­çš„å®ä¾‹</span>
docker ps -a
<span class="hljs-variable constant_">CONTAINER</span> <span class="hljs-variable constant_">ID</span>   <span class="hljs-variable constant_">IMAGE</span>             <span class="hljs-variable constant_">COMMAND</span>                  <span class="hljs-variable constant_">CREATED</span>        <span class="hljs-variable constant_">STATUS</span>                   <span class="hljs-variable constant_">PORTS</span>                                       <span class="hljs-variable constant_">NAMES</span>
a3758637313d   hello-world       <span class="hljs-string">"/hello"</span>                 <span class="hljs-number">3</span> hours ago    <span class="hljs-title class_">Exited</span> (<span class="hljs-number">0</span>) <span class="hljs-number">3</span> hours ago                                               clever_black
ca98404583a6   oven/<span class="hljs-attr">bun</span>:alpine   <span class="hljs-string">"/usr/local/bin/dockâ€¦"</span>   <span class="hljs-number">22</span> hours ago   <span class="hljs-title class_">Up</span> <span class="hljs-number">3</span> hours               <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>:<span class="hljs-number">7083</span>-&gt;<span class="hljs-number">7083</span>/tcp, :::<span class="hljs-number">7083</span>-&gt;<span class="hljs-number">7083</span>/tcp   mapi

<span class="hljs-comment">// å…³é—­/å¯åŠ¨/é‡å¯ docker å®ä¾‹</span>
docker shutdown mapi
docker start mapi
docker restart mapi 

<span class="hljs-comment">// æŸ¥çœ‹dockerå®ä¾‹è¿è¡Œæ—¥å¿—ï¼ŒåŒ…æ‹¬ç¨‹åºæ—¥å¿—</span>
docker logs -f mapi

</code></pre>
<p>å½“ç„¶ï¼Œè¿™æ ·çš„æ“ä½œï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ„Ÿè§‰åˆ°ï¼Œç›¸å¯¹äºåŸç”Ÿbunåº”ç”¨çš„å¯åŠ¨é€Ÿåº¦ï¼Œbun dockeré‡å¯æ˜æ˜¾è¦æ…¢çš„å¤šï¼Œä¸€èˆ¬éœ€è¦æ•°ç§’çš„æ—¶é—´(buné¡¹ç›®é‡å¯ä¸€èˆ¬æ˜¯äºšç§’çº§)ã€‚</p>
<p>ç¬”è€…çš„ç¨‹åºé¡¹ç›®ç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œå¦‚æœé¡¹ç›®ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œå…¶ä»–å¯èƒ½éœ€è¦è¿›è¡Œæ‰©å±•å’Œæ³¨æ„çš„é—®é¢˜åŒ…æ‹¬ï¼š</p>
<ul>
<li>dockerå’Œbuné¡¹ç›®æ­£å¸¸è¿è¡Œåï¼Œæ­£å¸¸æƒ…å†µä¸‹ä¸ä¼šæœ‰ä»»ä½•çš„åé¦ˆ(console.log)ï¼Œæ‰€ä»¥å¯èƒ½éœ€è¦æ‰‹åŠ¨æ£€æŸ¥docker logæ¥è§‚å¯Ÿç¨‹åºæ‰§è¡Œæƒ…å†µ</li>
<li>å¦‚æœæœ‰ä¾èµ–ï¼Œå¯èƒ½éœ€è¦å…ˆè¿›è¡Œå®‰è£… ... bun installï¼Œå®ƒåº”è¯¥ä¹Ÿä¼šåœ¨é¡¹ç›®å®é™…æ–‡ä»¶å¤¹ä¸­å®‰è£…ç›¸å…³ä¾èµ–æ–‡ä»¶ï¼Œåç»­å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œæ³¨æ„è¿™é‡Œçš„æ–‡ä»¶å’Œä»£ç ï¼Œéƒ½æ˜¯ç›¸å¯¹äºDockerå®ä¾‹è€Œéå®¿ä¸»æœºçš„</li>
<li>buné¡¹ç›®åº”å½“æ˜¯æ— è·¯å¾„ä¾èµ–çš„ï¼Œå³åœ¨ä»»æ„è·¯å¾„ä¸­éƒ½å¯ä»¥æ‰§è¡Œï¼Œè¿™æ ·æŒ‚è½½åˆ°dockerå®ä¾‹ä¸­ï¼Œå°±ä¸ä¼šæœ‰é—®é¢˜</li>
<li>å¦‚æœæœ‰å…¶ä»–çš„æ–‡ä»¶å¤¹ä¾èµ–ï¼Œå¯ä»¥ä½¿ç”¨ç±»ä¼¼çš„æ–¹å¼ï¼Œä½†éœ€è¦æ³¨æ„å¼•ç”¨å…³ç³»</li>
<li>å…¶ä»–çš„ä¾èµ–é¡¹ç›®ï¼Œå¦‚æ•°æ®åº“è®¿é—®ï¼Œå¤–éƒ¨æ¥å£è®¿é—®ç­‰ç­‰ï¼Œå’Œåœ¨dockerä¸»æœºä¸Šç›´æ¥æ“ä½œï¼Œæ˜¯æ²¡æœ‰åŒºåˆ«çš„</li>
<li>éœ€è¦æ³¨æ„dockerå®ä¾‹çš„è¿è¡ŒçŠ¶æ€ï¼Œå› ä¸ºæœ‰å¯èƒ½ç”±äºé”™è¯¯è€Œå¯¼è‡´å®ä¾‹å…³é—­</li>
</ul>
<h2 data-id="heading-4">Buné¡¹ç›®çš„Dockeræ„å»º</h2>
<p>è™½ç„¶ç¬”è€…åœ¨ç°å®ç¯å¢ƒä¸­ï¼Œé€‰æ‹©çš„æ˜¯dockerå®ä¾‹+buné¡¹ç›®æ–‡ä»¶å¤¹ã€‚ä½†åœ¨å‰é¢å¦å¤–ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œå…¶å®æ˜¯æ¥è§¦äº†buné¡¹ç›®æ„å»ºçš„æ–¹å¼çš„ï¼Œè¿™é‡Œä¹Ÿç®€å•è¯´æ˜ä¸€ä¸‹ã€‚</p>
<p>è¦å‡†å¤‡buné¡¹ç›®çš„dockeræ„å»ºï¼Œéœ€è¦åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªDockerfileæ–‡ä»¶ï¼Œç”¨äºæŒ‡å®šæ„å»ºè¿‡ç¨‹å’Œé…ç½®ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-Dockerfile" lang="Dockerfile">
FROM oven/bun:alpine

WORKDIR /app

# å¤åˆ¶ package.json å’Œ bun.lockb
COPY package.json bun.lockb* ./

# å®‰è£…ä¾èµ–
RUN bun install

# å¤åˆ¶åº”ç”¨ä»£ç 
COPY . .

# æš´éœ²ç«¯å£ï¼ˆHugging Face Spaces ä½¿ç”¨ 7860 ç«¯å£ï¼‰
EXPOSE 7860

# å¯åŠ¨åº”ç”¨
CMD ["bun", "run", "start"]

</code></pre>
<p>Dockerfileå‡†å¤‡å¥½ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ„å»ºé¡¹ç›®dockerå®ä¾‹å’Œå¯åŠ¨å®ä¾‹äº†ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ„å»ºé¡¹ç›®é•œåƒ</span>
docker build -t my-node-app .

<span class="hljs-comment">// å¯åŠ¨é¡¹ç›®é•œåƒå®ä¾‹</span>
docker run -d -p <span class="hljs-number">8080</span>:<span class="hljs-number">3000</span> my-node-app

</code></pre>
<p>å†™åˆ°è¿™é‡Œï¼Œç¬”è€…çªç„¶æƒ³åˆ°ï¼Œå¦‚æœæ„å»ºè¿‡ç¨‹æ¯”è¾ƒå®Œæ•´çš„è¯ï¼Œè¿™ä¸ªæœ€åç”Ÿæˆçš„ï¼Œå¯ä»¥æ‰§è¡Œçš„dockeré•œåƒï¼Œæ˜¯ä¸æ˜¯ä»å¦ä¸€ç§è§’åº¦è€Œè¨€ï¼Œå°±æ˜¯ä¸€ä¸ªSEA(Single Executable Application)å•ä¸€å¯æ‰§è¡Œåº”ç”¨äº†å‘¢ï¼Ÿåœ¨æŸäº›åœºæ™¯ä¸­ï¼Œå¯èƒ½å¯ä»¥æ»¡è¶³ä¸€äº›æ¯”è¾ƒç‰¹æ®Šçš„éœ€æ±‚(æ¯”å¦‚éšè—åŸå§‹ä»£ç å’Œé…ç½®)ã€‚</p>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ–¹ä¾¿çš„å°†ä¸€ä¸ªæ ‡å‡†Bunç¨‹åºé¡¹ç›®ï¼Œæ”¹é€ æˆä¸ºå¯ä»¥ä½¿ç”¨Dockeræ¥æ‰§è¡Œçš„æ–¹å¼äº†ã€‚</p>
<h2 data-id="heading-5">å°ç»“</h2>
<p>æœ¬æ–‡è®¨è®ºäº†å¦‚ä½•å°†ä¸€ä¸ªæ ‡å‡†çš„Bunç¨‹åºé¡¹ç›®ï¼Œæ”¹é€ æˆä¸ºä½¿ç”¨Dockerå¯ä»¥æ‰§è¡Œçš„æ–¹å¼ã€‚è¿™ä¸ªéœ€æ±‚ä¸»è¦æ¥è‡ªä¸€äº›æ¯”è¾ƒè€æ—§çš„æ‰§è¡Œç¯å¢ƒï¼Œæ— æ³•ç›´æ¥æ‰§è¡ŒBunç¨‹åºæ‰€äº§ç”Ÿçš„é—®é¢˜ã€‚æ¢è®¨äº†åœ¨è€ç‰ˆæœ¬çš„CentOS7ç¯å¢ƒä¸­å®‰è£…ã€é…ç½®Dockerç¯å¢ƒï¼Œå¹¶ä½¿ç”¨Dockeræ‰§è¡ŒBunç¨‹åºé¡¹ç›®çš„æ“ä½œå’Œè¿‡ç¨‹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Œè…¾è®¯äº‘NoSQLã€æŠ€æœ¯ä¹‹MongoDBç¯‡:MongoDB 5.0â†’8.0 balanceæ€§èƒ½æå‡40%å†…å¹•æ­ç§˜]]></title>    <link>https://juejin.cn/post/7571379089991417910</link>    <guid>https://juejin.cn/post/7571379089991417910</guid>    <pubDate>2025-11-12T02:40:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571379089991417910" data-draft-id="7571281406510596147" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Œè…¾è®¯äº‘NoSQLã€æŠ€æœ¯ä¹‹MongoDBç¯‡:MongoDB 5.0â†’8.0 balanceæ€§èƒ½æå‡40%å†…å¹•æ­ç§˜"/> <meta itemprop="keywords" content="NoSQL,æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-11-12T02:40:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è…¾è®¯äº‘æ•°æ®åº“"/> <meta itemprop="url" content="https://juejin.cn/user/3227821871466094"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Œè…¾è®¯äº‘NoSQLã€æŠ€æœ¯ä¹‹MongoDBç¯‡:MongoDB 5.0â†’8.0 balanceæ€§èƒ½æå‡40%å†…å¹•æ­ç§˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3227821871466094/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è…¾è®¯äº‘æ•°æ®åº“
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T02:40:51.000Z" title="Wed Nov 12 2025 02:40:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»34åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ã€Œè…¾è®¯äº‘NoSQLã€æŠ€æœ¯ä¹‹MongoDBç¯‡:MongoDB 5.0â†’8.0 balanceæ€§èƒ½æå‡40%å†…å¹•æ­ç§˜</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57f63e77e10c4b49975aa368f55b2b70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=doKY%2BunJz%2FFAOrvnTsQuEtg6Y0s%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<blockquote>
<p>åœ¨åˆ†å¸ƒå¼æ•°æ®åº“æ¶æ„ä¸­ï¼Œæ•°æ®è‡ªåŠ¨å‡è¡¡ï¼ˆBalanceï¼‰æœºåˆ¶æ˜¯åˆ†ç‰‡é›†ç¾¤è‰¯å¥½è¿è¡Œçš„åŸºçŸ³ï¼Œå®ƒç¡®ä¿åˆ†ç‰‡çš„ä¼˜åŠ¿â€”â€”æ€§èƒ½ã€å¯æ‰©å±•æ€§å’Œå¯ç”¨å¾—åˆ°å……åˆ†å‘æŒ¥ã€‚è…¾è®¯äº‘NoSQLå’Œå†…æ ¸å›¢é˜Ÿåœ¨å†…æ ¸æ€§èƒ½åŸºå‡†æµ‹è¯•ä¸­å‘ç°ï¼šMongoDB 6.0.3 åŠåç»­ç‰ˆæœ¬ï¼Œå…¶ Balance æ•°æ®è¿ç§»æ•ˆç‡ç›¸æ¯”5.0ç‰ˆæœ¬è·å¾—äº†30%è‡³45%çš„æ˜¾è‘—æå‡ï¼Œè¿™ä¸€æ€§èƒ½çš„æå‡æ„å‘³ç€ MongoDB åœ¨é¢å¯¹æ•°æ®ä¸å‡æ—¶å…·å¤‡æ›´å¼ºçš„è‡ªæˆ‘è°ƒèŠ‚èƒ½åŠ›ï¼Œæ›´å¥½åœ°é˜²æ­¢æŸäº›åˆ†ç‰‡ä¸Šå‡ºç°çƒ­ç‚¹ï¼Œä»è€Œæå‡æ•´ä¸ªé›†ç¾¤çš„ååé‡å’ŒæŸ¥è¯¢é€Ÿåº¦ï¼Œä¸ºäº†æ›´å¥½åœ°äº†è§£ MongoDB æ€§èƒ½æå‡èƒŒåçš„æŠ€æœ¯åŸç†ï¼Œè…¾è®¯äº‘ NoSQL å’Œå†…æ ¸å›¢é˜Ÿå¯¹ MongoDB å†…æ ¸å‘èµ·äº†æºç çº§æ·±åº¦å‰–æï¼Œæœ¬æ–‡å°†ç³»ç»Ÿæ€§é˜é‡Šbalanceçš„è§¦å‘æœºåˆ¶ã€è¿ç§»æµç¨‹ä¸æ€§èƒ½è°ƒä¼˜æ–¹æ³•ï¼Œå¹¶å¯¹ 7.0ã€8.0 ç‰ˆæœ¬ balance çš„è°ƒä¼˜è¿›è¡Œå‰–æã€‚ å¸Œæœ›æœ¬æ–‡èƒ½ä¸ºå„ä½åŒäº‹åœ¨æ¶æ„è®¾è®¡ã€æ€§èƒ½ä¼˜åŒ–å’Œå®¢æˆ·ä¸šåŠ¡é—®é¢˜æ’æŸ¥ä¸Šæä¾›æœ‰åŠ›çš„ç†è®ºæ”¯æŒä¸å®è·µæŒ‡å¯¼ã€‚</p>
<p>åœ¨ MongoDB åˆ†ç‰‡é›†ç¾¤ä¸­ï¼Œå‡è¡¡å™¨ï¼ˆBalanceï¼‰çš„é‡è¦æ€§åœ¨äºé€šè¿‡è‡ªåŠ¨åœ¨åˆ†ç‰‡é—´ç§»åŠ¨æ•°æ®ï¼ˆå—ï¼‰æ¥ç¡®ä¿æ•°æ®å‡åŒ€åˆ†å¸ƒã€‚è¿™ä¸ªè¿‡ç¨‹å¯¹äºç»´æŒæœ€ä½³æ€§èƒ½å’Œå¯æ‰©å±•æ€§è‡³å…³é‡è¦ï¼Œå› ä¸ºå®ƒèƒ½é˜²æ­¢æŸäº›åˆ†ç‰‡ä¸Šå‡ºç°çƒ­ç‚¹ï¼Œä»è€Œæå‡æ•´ä¸ªé›†ç¾¤çš„ååé‡å’ŒæŸ¥è¯¢é€Ÿåº¦ã€‚è‹¥ç¦ç”¨å‡è¡¡å™¨ä¼šå¯¼è‡´åˆ†ç‰‡æ•°æ®ä¸å‡ï¼Œè¿›è€Œé™ä½é›†ç¾¤æ€§èƒ½ï¼Œå› æ­¤æŒç»­è¿è¡Œå‡è¡¡å™¨å¯¹äºç»´æŠ¤å¥åº·é«˜æ•ˆçš„åˆ†ç‰‡ç³»ç»Ÿè‡³å…³é‡è¦ï¼Œç¡®ä¿åˆ†ç‰‡çš„æ€§èƒ½ã€å¯æ‰©å±•æ€§å’Œå¯ç”¨æ€§å¾—åˆ°å……åˆ†å‘æŒ¥ã€‚è…¾è®¯äº‘MongoDBå’Œå†…æ ¸å›¢é˜Ÿå¯¹ MongoDB å†…æ ¸ balance æ€§èƒ½æµ‹è¯•æ—¶ï¼Œå‘ç°<strong>6.0.3åŠå…¶ä»¥åç‰ˆæœ¬çš„ balance æ•°æ®è¿ç§»æ€§èƒ½æ•´ä½“æ¯” 5.0 å¥½å¤§çº¦ 30% - 45%</strong> ã€‚ä¸ºä»€ä¹ˆ 6.0 åŠå…¶ä»¥ä¸Šç‰ˆæœ¬ balance æ€§èƒ½æå‡è¿™ä¹ˆå¤§ï¼Ÿä¸ºä½•é«˜ç‰ˆæœ¬ chunk åˆ†å¸ƒä¸å‡è¡¡ï¼Ÿä¸ºä½•é«˜ç‰ˆæœ¬ split å¯¹ä¸šåŠ¡æ— å½±å“ï¼Ÿå¸¦ç€è¿™äº›ç–‘æƒ‘ï¼Œ<strong>è…¾è®¯äº‘ MongoDB å’Œå†…æ ¸å›¢é˜Ÿ</strong>ç»“åˆ MongoDB å†…æ ¸ (åŒ…æ‹¬ 6.0ã€7.0ã€8.0 )æºç å¯¹ balance åŸç†åšäº†ä¸€æ¬¡æ·±å…¥çš„ç ”ç©¶åˆ†æã€‚æœ¬æ–‡ä¸»è¦ä»¥ MongoDB 8.0.10 å†…æ ¸ä»£ç è¿›è¡ŒåŸç†åˆ†æã€‚</p>
<p>æœ¬æ–‡ä½œè€…ï¼šèŒå“¥ï¼ˆæ¨äºšæ´²ï¼‰ã€å°¹è¶…</p>
</blockquote>
<h2 data-id="heading-1"><strong>1 balance è§¦å‘æ¡ä»¶åŠå…¶å®ç°</strong></h2>
<p>å½“ config server é€‰å‡ºä¸»èŠ‚ç‚¹åä¼šåˆ›å»ºä¸€ä¸ªâ€œBalancerâ€çº¿ç¨‹ï¼Œè¯¥çº¿ç¨‹è´Ÿè´£åˆ¤æ–­é›†ç¾¤ä¸­æ‰€æœ‰åˆ†ç‰‡è¡¨æ•°æ®æ˜¯å¦å‡è¡¡ï¼Œæ˜¯å¦éœ€è¦è§¦å‘åšæ•°æ®è¿ç§»æ“ä½œ</p>
<h3 data-id="heading-2"/>
<h3 data-id="heading-3">1.1 æ•°æ®ä¸å‡è¡¡åˆ¤æ–­</h3>
<h4 data-id="heading-4">1.1.1 è·å–åˆ†ç‰‡è¡¨ä¿¡æ¯</h4>
<p>ç”±äºå¯ç”¨åˆ†ç‰‡åŠŸèƒ½çš„è¡¨ä¿¡æ¯å­˜å‚¨åœ¨ config.collections ä¸­ï¼Œ config serveré€šè¿‡å†…éƒ¨çš„ local client æ¥è·å– config.collections è¡¨ä¸­çš„ä¿¡æ¯ã€‚è·å–è¡¨ä¸­å†…å®¹sqlå¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/952588f1e2344d74b721dcd773b3b2ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=0D4g1Mn2Zv1xRwa2C89%2FL3DJn2E%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-5">1.1.2 è·å–åˆ†ç‰‡è¡¨åœ¨æ¯ä¸ªåˆ†ç‰‡çš„statsä¿¡æ¯</h4>
<p>config serverä¼šå‘åˆ†ç‰‡é›†ç¾¤çš„æ‰€æœ‰shardå¹¿æ’­å‘é€ _shardsvrGetStatsForBalancing å‘½ä»¤æ¥è·å–è¡¨çš„ stats ç»Ÿè®¡ã€‚</p>
<p>â— å•åˆ†ç‰‡è¡¨åœºæ™¯</p>
<p>å‡è®¾åªæœ‰ä¸€ä¸ªåˆ†ç‰‡è¡¨ collection1ï¼Œåˆ™ _shardsvrGetStatsForBalancing å¹¿æ’­åˆ°æ‰€æœ‰åˆ†ç‰‡ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e53b0d899d33431b888c46c11cafca27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=jXTKEM%2FSl%2FUPGs%2BsDepzzPz%2BWZ0%3D" alt="image.png" loading="lazy"/></p>
<p>å„ä¸ª shard æ”¶åˆ°åï¼Œæœ¬åœ°è·å–è¯¥è¡¨çš„æ•°æ®å¤§å°è¿”å›ç»™ config server ï¼Œå†…å®¹å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18ea02048a724990b9701115eb45b434~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=cENZxtkadILBHMONDUc5GXGC2YE%3D" alt="image.png" loading="lazy"/></p>
<p>â— å¤šåˆ†ç‰‡è¡¨åœºæ™¯</p>
<p>å¦‚æœè¯¥åˆ†ç‰‡é›†ç¾¤æœ‰å¤šä¸ªåˆ†ç‰‡è¡¨ï¼Œâ€œBlancerâ€çº¿ç¨‹æŒ‰ç…§100ä¸ªåˆ†ç‰‡è¡¨ä¸€ç»„åœ¨ä¸€ä¸ª _shardsvrGetStatsForBalancing è¯·æ±‚ä¸­æºå¸¦æ‰€æœ‰åˆ†ç‰‡è¡¨å¹¿æ’­ç»™æ‰€æœ‰shardï¼Œå„ä¸ª shard æ”¶åˆ°è¯¥è¯·æ±‚åï¼Œä¼šä¸€æ¬¡æ€§æŠŠæœ¬èŠ‚ç‚¹ä¸Šè¿™ä¸€æ‰¹è¡¨çš„ stats ä¿¡æ¯è¿”å›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13b8398b434f4db69bb2d31d7b9f7ec0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=4WkCpdSW0tdzq6CPAGEeFVMpwic%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸€æ¬¡æ‰¹é‡è·å–100ä¸ªè¡¨ stats ä¿¡æ¯ï¼Œå†…å®¹å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fcd13c8731854648a79fcf66560d6cfd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=9kfms8%2BO5PTfToOAgxGpWjaSJu8%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-6">1.2 è¿ç§»åœºæ™¯åŠè¿ç§»ä¼˜å…ˆçº§</h3>
<p>è·å–åˆ°å„ä¸ª shard çš„ stats æ•°æ®åï¼Œconfig server åœ¨ä»¥ä¸‹åœºæ™¯ä¼šè§¦å‘æ•°æ®è¿ç§»ï¼š</p>
<p>è¿ç§»åœºæ™¯</p>
<ol>
<li>draining åˆ†ç‰‡è¿ç§»ï¼š</li>
</ol>
<p>è¯¥è¡¨åœ¨æŸäº› shard æœ‰æ•°æ®ï¼Œå¦‚æœè¯¥ shard ä»åˆ†ç‰‡é›†ç¾¤ä¸­ç§»é™¤ï¼Œè¿™ä¸ªåœºæ™¯æ¯”è¾ƒå¥½ç†è§£ã€‚</p>
<ol start="2">
<li>zone çº¦æŸè¿è§„ï¼š</li>
</ol>
<p>çº¦æŸè¿è§„ï¼Œä¸»è¦åœ¨ addTagRange è°ƒæ•´çš„æ—¶å€™å®¹æ˜“è§¦å‘ï¼Œå…·ä½“ä¸¾ä¾‹è¯¦è§é™„å½•è¯¦æƒ…æ–‡æ¡£ã€‚</p>
<p>3 <strong>.</strong> æ™®é€šæ•°æ®è¡¨ä¸å‡è¡¡åœºæ™¯ï¼š</p>
<p>æ™®é€šåˆ†ç‰‡è¡¨å„ä¸ª shard æ•°æ®å·®å¼‚å¤§ï¼Œè¿™æ˜¯æœ€å¸¸è§çš„ balance è¿ç§»åœºæ™¯ã€‚</p>
<p>ä»¥ä¸Šä¸‰ç§åœºæ™¯æœ‰ä¼˜å…ˆçº§é™åˆ¶ï¼Œdraining åˆ†ç‰‡ä¼˜å…ˆçº§æœ€é«˜ï¼Œzone çº¦æŸè¿è§„æ¬¡ä¹‹ï¼Œæ™®é€šæ•°æ®ä¸å‡è¡¡åœºæ™¯ä¼˜å…ˆçº§æœ€ä½ã€‚åªæœ‰åœ¨é«˜ä¼˜å…ˆçº§åœºæ™¯çš„ chunk æ•°æ®è¿ç§»å®Œæˆåï¼Œæ‰ä¼šæ‰§è¡Œä½ä¼˜å…ˆçº§åœºæ™¯çš„ chunk æ•°æ®è¿ç§»ã€‚</p>
<h3 data-id="heading-7">1.3 ç¡®å®šéœ€è¦è¿ç§»çš„æºåˆ†ç‰‡å’Œç›®æ ‡åˆ†ç‰‡</h3>
<p>Config server è·å–åˆ°åˆ†ç‰‡è¡¨åœ¨æ¯ä¸ªåˆ†ç‰‡ä¸Šçš„ stats (è¡¨æ•°æ®é‡)ä¿¡æ¯åï¼Œä¼šé€‰å‡ºè¡¨æ•°æ®é‡æœ€å¤§çš„åˆ†ç‰‡å’Œæœ€å°çš„åˆ†ç‰‡ï¼Œä¸‹é¢ä¸¾ä¾‹è¯´æ˜ç¡®å®šæºå’Œç›®æ ‡åˆ†ç‰‡çš„æ­¥éª¤ï¼š</p>
<p>â— ç¡®å®šå„åˆ†ç‰‡æ•°æ®åˆ†å¸ƒ</p>
<p>å‡è®¾æŸ collection åœ¨å››ä¸ªåˆ†ç‰‡çš„æ•°æ®åˆ†å¸ƒå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b0e0d3ff4a74f4db499d39592ec7e42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=gR8A8yHpVNucAoeaytVk78at8rw%3D" alt="image.png" loading="lazy"/></p>
<p>é›†ç¾¤4ä¸ª shardï¼Œæ•°æ®åˆ†å¸ƒä»1G â€“ 4Gï¼Œåˆ†ç‰‡é—´æ•°æ®å­˜åœ¨ä¸å‡è¡¡ç°è±¡ã€‚</p>
<p>â— è®¡ç®—ç†æƒ³æ•°æ®åˆ†å¸ƒ</p>
<p>æ ¹æ®å„ä¸ªåˆ†ç‰‡çš„ stats ä¿¡æ¯è®¡ç®—ç†æƒ³æ•°æ®åˆ†å¸ƒï¼Œä»¥è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b7eb103b4164b6f8925091e74d18009~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=dKhImLy9vqO1jO%2B73F6xLjhkj1Y%3D" alt="image.png" loading="lazy"/></p>
<p>numShardsInZoneï¼šä»£è¡¨åˆ†ç‰‡æ•°ï¼Œ4ä¸ªåˆ†ç‰‡</p>
<p>totalDataSizeOfShardsWithZoneï¼šä»£è¡¨æ•°æ®æ€»å’Œ = 4G + 1G+ 2G + 3G = 10G</p>
<p>idealDataSizePerShardForZoneï¼šä»£è¡¨å„ä¸ªshardç†æƒ³åˆ†å¸ƒ = totalDataSizeOfShardsWithZone / numShardsInZone = 10G / 4 = 2.5G</p>
<p>â— æºåˆ†ç‰‡å’Œç›®æ ‡åˆ†ç‰‡é€‰æ‹©</p>
<p>è·å–åˆ°æ¯ä¸ª shard çš„æ•°æ®é‡ï¼Œä»è€Œå¯ä»¥è®¡ç®—å‡º shard0001 æ•°æ®é‡æœ€å¤šï¼Œæ‰€ä»¥é€‰æ‹© shard0001 ä½œä¸ºæºåˆ†ç‰‡ã€‚</p>
<p>åŒç†ï¼Œå› ä¸º shard0002 æ•°æ®é‡æœ€å°‘ï¼Œå› æ­¤è¢«é€‰ä¸ºç›®æ ‡åˆ†ç‰‡ã€‚é€‰æ‹©ç®—æ³•ä¸¾ä¾‹å‚è€ƒé™„å½•è¯¦æƒ…ã€‚</p>
<h3 data-id="heading-8">1.4 ç”Ÿæˆè¿ç§»ä»»åŠ¡ï¼Œé€šçŸ¥æºåˆ†ç‰‡å¼€å§‹æ•°æ®è¿ç§»</h3>
<p>â— è¿ç§»æ¡ä»¶åˆ¤æ–­</p>
<p>é€‰å‡ºæºåˆ†ç‰‡å’Œç›®æ ‡åˆ†ç‰‡åï¼Œè¿˜éœ€è¦æ»¡è¶³ä»¥ä¸‹3ä¸ªæ¡ä»¶æ‰ä¼šç”Ÿæˆè¿ç§»ä»»åŠ¡ï¼š</p>
<p>1.æºåˆ†ç‰‡è¡¨æ•°æ®é‡ &gt; idealDataSizePerShardForZoneã€‚</p>
<p>2.ç›®æ ‡åˆ†ç‰‡è¡¨æ•°æ®é‡ &lt; Â idealDataSizePerShardForZone</p>
<p>3.ç›®æ ‡åˆ†ç‰‡è¡¨æ•°æ®é‡ &gt; æºåˆ†ç‰‡è¡¨æ•°æ®é‡ + 3 * maxChunkSizeBytes(é»˜è®¤128M)</p>
<p>å½“æºåˆ†ç‰‡çš„æ•°æ®é‡æ¯”ç›®æ ‡åˆ†ç‰‡æ•°æ®é‡å¤š3ä¸ª chunk(3*128=484M) çš„æ—¶å€™ï¼Œä¼šç”Ÿæˆè¿ç§»ä»»åŠ¡ã€‚</p>
<p>â— Â Chunk é€‰æ‹©åŠè¿ç§»ä»»åŠ¡ç”Ÿæˆ</p>
<p>chunk é€‰æ‹©ä¸»è¦é€šè¿‡ ChunkManager çš„ forEachOverlappingChunk æ¥å£å®Œæˆï¼Œé€šè¿‡éå†è¯¥è¡¨è·¯ç”±ä¿¡æ¯å±äºæºåˆ†ç‰‡çš„ç¬¬ä¸€ä¸ª chunk ï¼Œç„¶åç”Ÿæˆ migrations ä»»åŠ¡ã€‚éå†è¿‡ç¨‹ä¼šè·³è¿‡ jumbo chunk ï¼Œåªä¼šé€‰æ‹©é jumbo chunk ã€‚</p>
<p>æ³¨æ„è¿™é‡Œæ„é€ çš„è¿ç§»ä»»åŠ¡çš„ max å­—æ®µè®¾ç½®ä¸º boost::none ï¼Œè¿™ä¸ªå¾ˆå…³é”®ï¼Œå› ä¸ºåœ¨æºåˆ†ç‰‡ä¼šè¯†åˆ« max æ˜¯å¦æœ‰å€¼ï¼Œå¦‚æœæ²¡æœ‰çš„è¯å°±ä¼šè¿›å…¥ split chunk è‡ªåŠ¨æ‹†åˆ†é€»è¾‘ï¼Œè¯·å‚è€ƒåé¢çš„S(T2)ç« èŠ‚ã€‚</p>
<p>å¦‚æœè¯¥shardå…¨æ˜¯ jumbo chunk ï¼Œåˆ™ä¼šç»™å‡º warning ä¿¡æ¯ï¼Œè¯¦è§é™„å½•ã€‚</p>
<p>â— è¿ç§»ä»»åŠ¡å…¥é˜Ÿ</p>
<p>è¿ç§»ä»»åŠ¡ç”Ÿæˆåï¼Œconfig server æ ¹æ®è¿ç§»ä»»åŠ¡æ„å»º _shardsvrMoveRange è¯·æ±‚å¯¹è±¡ã€‚</p>
<p>æ„å»ºå¥½è¯·æ±‚å¯¹è±¡åï¼Œä¼šä¸ºè¯¥å¯¹è±¡åˆ†é…ä¸€ä¸ªå”¯ä¸€â€œrequesidâ€,ç„¶åæŠŠè¯¥re questid å’Œè¯·æ±‚å¯¹è±¡ä½œä¸º kv åŠ å…¥åˆ° _requests(unordered_map) ä¸­,åŒæ—¶æŠŠ requestid åŠ å…¥åˆ°ä¸€ä¸ª fifo å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—_unsubmittedRequestIdsä¸­ã€‚å…¥é˜Ÿå®Œæˆåé€šè¿‡_stateUpdatedCVæ¡ä»¶å˜é‡å”¤é†’æ¶ˆè´¹è€…çº¿ç¨‹ (BalancerCommandsScheduler) ,æ¶ˆè´¹è€…çº¿ç¨‹è¢«å”¤é†’åå¼€å§‹æ‰§è¡Œè¿ç§»ä»»åŠ¡ã€‚</p>
<p>_requests æ•°æ®ç»“æ„ï¼š</p>
<p>requestid ä½œä¸º key ï¼Œè¯·æ±‚å¯¹è±¡ä½œä¸º value å­˜å‚¨åˆ°è¯¥ unordered_map ä¸­ã€‚</p>
<p>_unsubmittedRequestIds é˜Ÿåˆ—ï¼š</p>
<p>ä¸€ä¸ª fifo ç»“æ„çš„é˜Ÿåˆ—ï¼Œåªå­˜å‚¨â€œrequestedâ€ï¼Œä¸»è¦ä¿éšœè¿ç§»ä»»åŠ¡çš„é¡ºåºæ‰§è¡Œã€‚</p>
<p>å¦‚æœæœ‰å¤šä¸ªåˆ†ç‰‡è¡¨æ•°æ®ä¸å‡è¡¡ï¼Œåˆ™æ¯ä¸ªåˆ†ç‰‡è¡¨éƒ½ä¼šç”Ÿæˆä¸€ä¸ªè¿ç§»ä»»åŠ¡å…¥é˜Ÿï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4f6600119cb4afca08aa20038ef8d70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=58hi8T%2Fsl%2B5%2FnFXWlbF%2BlyXimCE%3D" alt="image.png" loading="lazy"/></p>
<p>â— è¿ç§»ä»»åŠ¡å¼‚æ­¥å¤„ç†</p>
<p>Config serverçš„â€œBalancerCommandsSchedulerâ€çº¿ç¨‹æ£€æµ‹åˆ°_unsubmittedRequestIdsé˜Ÿåˆ—æœ‰å¾…æ‰§è¡Œçš„è¿ç§»ä»»åŠ¡ï¼Œæœ€ç»ˆä¼šé€šè¿‡â€œSharding-Fixedâ€çº¿ç¨‹æ± è°ƒåº¦æŠŠæ„é€ çš„ _ShardsvrMoveRange å‘½ä»¤å‘é€ç»™æºåˆ†ç‰‡ï¼Œé€šçŸ¥æºåˆ†ç‰‡å¼€å§‹æ•°æ®è¿ç§»ï¼Œå¦‚æœå€™é€‰è¿ç§»ä»»åŠ¡å¯¹è±¡åªæœ‰ä¸€ä¸ªåˆ†ç‰‡è¡¨ï¼Œå…¶äº¤äº’æµç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aff41b8e00824bf584fdb522ec4190f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=g9ZBklhYdR6Su23PTEMor%2FD37gU%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚æœæœ‰å¤šä¸ªè¡¨æ•°æ®ä¸å‡è¡¡ï¼Œåˆ™â€œBalancerCommandsSchedulerâ€çº¿ç¨‹ä¼šæŠŠè¿™äº›è¡¨å¯¹åº”çš„è¿ç§»ä»»åŠ¡å¯¹è±¡ä¸€èµ·å‘é€ç»™æºåˆ†ç‰‡ï¼Œé€šçŸ¥æºåˆ†ç‰‡å¯¹è¿™äº›è¡¨è¿›è¡Œå¹¶è¡Œè¿ç§»ï¼Œç„¶åå¼‚æ­¥ç­‰å¾… chunk æ•°æ®è¿ç§»å®Œæˆï¼Œå¦‚ä¸‹å›¾:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ce7433f220c4ab5802134d5a2e3ec93~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=ricLDpDTNRfnME5zN1MAmeuMjgU%3D" alt="image.png" loading="lazy"/></p>
<p>â€œBalancerâ€å’Œâ€œBalancerCommandsSchedulerâ€çº¿ç¨‹ä¸ä¼šé˜»å¡ç­‰å¾…ï¼Œå½“æºåˆ†ç‰‡è¿ç§» chunk æ•°æ®å®Œæˆåï¼Œæ¿€æ´»æ¡ä»¶å˜é‡ _stateUpdatedCV ã€‚ç”±äºâ€œBalancerâ€å’Œâ€œBalancerCommandsSchedulerâ€çº¿ç¨‹éƒ½ä¼šç­‰å¾…è¿™ä¸ªæ¡ä»¶å˜é‡ï¼Œå› æ­¤è¿™ä¸¤ä¸ªçº¿ç¨‹ä¼šè¢«æ¿€æ´»å”¤é†’ï¼Œç„¶åå¼€å§‹ä¸‹ä¸€è½®çš„ä»»åŠ¡å¤„ç†ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°å¤šè¡¨çš„å¹¶å‘è¿ç§»ã€‚</p>
<p>ä¸ºäº†æ›´å¥½çš„ç†è§£ï¼Œè¯·å‚è€ƒé™„å½•ä¸­çš„å¼‚æ­¥å¹¶å‘è°ƒåº¦ä¸¾ä¾‹ã€‚</p>
<h3 data-id="heading-9">1.5 æ€»ç»“</h3>
<ol>
<li>
<p>Config server é€‰ä¸»æˆåŠŸåï¼Œä¼šåˆ›å»ºä¸€ä¸ªâ€œBalancerâ€çº¿ç¨‹ï¼Œè¯¥çº¿ç¨‹ä¼šè·å–æ‰€æœ‰åˆ†ç‰‡è¡¨åœ¨æ‰€æœ‰ shard ä¸Š stats æ•°æ®é‡ç»Ÿè®¡ä¿¡æ¯ï¼Œç„¶åä¸ºä¸å‡è¡¡çš„åˆ†ç‰‡è¡¨ç”Ÿæˆå¯¹åº”çš„è¿ç§»ä»»åŠ¡å…¥é˜Ÿåˆ°é˜Ÿåˆ—ã€‚</p>
</li>
<li>
<p>â€œBalancerCommandsSchedulerâ€çº¿ç¨‹ä»é˜Ÿåˆ—ä¸­è·å–ä»»åŠ¡ï¼Œç„¶åäº¤ç”±â€œSharding-Fixedâ€çº¿ç¨‹æ± å¼‚æ­¥è°ƒåº¦ã€‚</p>
</li>
<li>
<p>â€œSharding-Fixedâ€çº¿ç¨‹æ± è·å–åˆ°æºåˆ†ç‰‡çš„åº”ç­”åï¼Œä¼šé€šè¿‡æ¡ä»¶å˜é‡ _stateUpdatedCVæ¿€æ´»â€œBalancerâ€å’Œâ€œBalancerCommandsSchedulerâ€çº¿ç¨‹è¿›è¡Œä¸‹ä¸€è½®å¤„ç†ï¼Œç»§ç»­é€‰æ‹©å’Œç”Ÿæˆæ–°çš„ chunk è¿ç§»ä»»åŠ¡ã€‚</p>
</li>
<li>
<p>æ‰€æœ‰åˆ†ç‰‡è¡¨è¿ç§»ä»»åŠ¡æ‰¹é‡ç”Ÿæˆå’Œæäº¤ï¼Œå› æ­¤å¯ä»¥å®ç°å¤šä¸ªä¸å‡è¡¡åˆ†ç‰‡è¡¨çš„å¹¶è¡Œè¿ç§»ã€‚</p>
</li>
<li>
<p>ä¸€ä¸ªè¡¨æ•°æ®è¿ç§»æ…¢ä¸ä¼šå½±å“å…¶ä»–è¡¨è¿ç§»ä»»åŠ¡çš„æ‰§è¡Œã€‚</p>
</li>
</ol>
<h2 data-id="heading-10"><strong>2 æ•°æ®è¿ç§»è¿‡ç¨‹åŠå…¶å®ç°</strong></h2>
<hr/>
<p>æºåˆ†ç‰‡æ”¶åˆ° config server å‘é€è¿‡æ¥çš„ _ShardsvrMoveRange è¯·æ±‚åï¼Œä¼šæ ‡è®°è¯¥æ¥å—è¯·æ±‚çš„çº¿ç¨‹ä¸º"MoveChunk"çº¿ç¨‹ï¼Œè¯¥çº¿ç¨‹ä¼šè´Ÿè´£æ•´ä¸ªæºåˆ†ç‰‡æ•°æ®è¿ç§»ç®¡ç†ã€‚æºåˆ†ç‰‡æŠŠè¿ç§»è¿‡ç¨‹æ‹†åˆ†ä¸º6ä¸ªè¿‡ç¨‹ï¼Œæ¯ä¸ªè¿‡ç¨‹éƒ½é€šè¿‡ _moveTimingHelper æ¥è·Ÿè¸ªæ¯ä¸ªè¿‡ç¨‹ä¸­çš„è€—æ—¶ã€‚</p>
<p>ç›®æ ‡åˆ†ç‰‡æ•°æ®è¿ç§»æµç¨‹ä¸»è¦ç”± MigrationDestinationManager ç±»å®ç°ï¼Œç›®æ ‡åˆ†ç‰‡æŠŠæ•´ä¸ªè¿ç§»æ‹†åˆ†ä¸º8ä¸ªé˜¶æ®µ( _migrateDriver ä¸­çš„ timing-&gt;done(x) ,xå–å€¼1-8 )ï¼Œå¹¶è®°å½•æ¯ä¸ªé˜¶æ®µè€—æ—¶ã€‚</p>
<p>ä¸ºäº†æ›´å¥½åœ°ç†è§£è¿ç§»è¿‡ç¨‹ï¼Œä¸‹é¢ä¸»è¦ä»¥æ—¶é—´çº¿ç»“åˆä»£ç è¿›è¡Œè¯´æ˜ï¼Œä¾‹å¦‚ï¼š</p>
<p>S(T1)ï¼šä»£è¡¨æºåˆ†ç‰‡ç¬¬ä¸€é˜¶æ®µçš„ä»£ç å®ç°ã€‚</p>
<p>S(Tn): ä»£è¡¨æºåˆ†ç‰‡ç¬¬né˜¶æ®µçš„ä»£ç å®ç°</p>
<p>D(T1)ï¼šä»£è¡¨ç›®æ ‡åˆ†ç‰‡ç¬¬ä¸€é˜¶æ®µçš„ä»£ç å®ç°ã€‚</p>
<p>D(Tn)ï¼šä»£è¡¨ç›®æ ‡åˆ†ç‰‡ç¬¬né˜¶æ®µçš„ä»£ç å®ç°ã€‚</p>
<h3 data-id="heading-11">2.1 S(T1): MigrationSourceManager ç±»åˆå§‹åŒ–</h3>
<p>æºåˆ†ç‰‡T1é˜¶æ®µä¸»è¦å®Œæˆ MigrationSourceManager ç±»æ„é€ å‡½æ•°çš„åŸºç¡€åˆå§‹åŒ–å’Œé”éªŒè¯ï¼Œè¯¥é˜¶æ®µå‡ ä¹ä¸è€—æ—¶ï¼Œç†è®ºä¸Šè€—æ—¶ä¸º0msã€‚</p>
<h3 data-id="heading-12">2.2 S(T2): å…ƒæ•°æ®è·å–åŠchunké«˜æ•ˆæ‹†åˆ†</h3>
<p>è¯¥é˜¶æ®µæ˜¯åˆ†ç‰‡è¿ç§»çš„å‡†å¤‡é˜¶æ®µï¼Œä¸»è¦æ˜¯ä» config server è·å–æœ€æ–°è·¯ç”±ä¿¡æ¯ã€ chunk è¾¹ç•Œæ£€æŸ¥è®¡ç®—ã€å†²çªæ£€æµ‹ã€ chunk ç‰ˆæœ¬è·å–ç­‰ã€‚æ­¤å¤–ï¼Œè¯¥é˜¶æ®µæœ‰ä¸ªå¾ˆé‡è¦çš„åŠŸèƒ½é€»è¾‘æ˜¯åš chunk æ•°æ® split æ‹†åˆ†ï¼Œä¸‹é¢é‡ç‚¹åˆ†æè¯¥é˜¶æ®µ split æ‹†åˆ†åŠå…¶åŸç†ï¼š</p>
<h4 data-id="heading-13">2.2.1 è§¦å‘æºåˆ†ç‰‡è¿›è¡Œ split æ‹†åˆ†çš„æ¡ä»¶</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c0884bcda6241adb4c75b307e2288a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=1Sq7XUaPJubcvBZxzng2YMiJcxQ%3D" alt="image.png" loading="lazy"/></p>
<p>å‰é¢2.4ç« èŠ‚ç”Ÿæˆè¿ç§»ä»»åŠ¡çš„æ—¶å€™maxå­—æ®µè®¾ç½®ä¸ºç©ºï¼Œå› æ­¤ balance ä¼šè¿›å…¥ä¸Šé¢çš„æµç¨‹ï¼Œæœ€ç»ˆåœ¨ autoSplitVector ä¸­è§¦å‘ chunk æ‹†åˆ†ã€‚</p>
<h4 data-id="heading-14"><strong>2.2.2 Chunk é«˜æ•ˆ split æ‹†åˆ†æ ¸å¿ƒå®ç°åŸç†</strong></h4>
<p>ç”±äºè¿ç§» chunk å¯èƒ½æ˜¯ä¸€ä¸ªå¤§ chunk (å¤§äº128M)ï¼Œå› æ­¤éœ€è¦å¯¹è¯¥ chunk è¿›è¡Œæ‹†åˆ†ï¼Œå…¶æ ¸å¿ƒå®ç°å¦‚ä¸‹:</p>
<p>â— é¢„ä¼°ä¸€ä¸ªç›®æ ‡ chunk çš„æ–‡æ¡£æ•°</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e4bc0e4f2e74ad8ba908d70b8671d45~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=Tk9uVbKfjEo5%2BrZoetMl8h%2FBXGQ%3D" alt="image.png" loading="lazy"/></p>
<p>æºåˆ†ç‰‡é¦–å…ˆè·å–è¯¥åˆ†ç‰‡è¡¨åœ¨è¯¥åˆ†ç‰‡çš„æ•°æ®æ€»è¡Œæ•°( totalLocalCollDocuments )ï¼ŒåŒæ—¶è·å–è¯¥åˆ†ç‰‡ä¸Šè¯¥è¡¨çš„æ€»æ•°æ®å¤§å°( dataSize )ï¼Œå°±å¯ä»¥å¾—å‡ºå•ä¸ªæ–‡æ¡£çš„å¹³å‡å¤§å°( avgDocSize ), æœ€åç”¨ä¸€ä¸ªç›®æ ‡chunkçš„å¤§å°( maxChunkSizeBytes )é™¤ä»¥å•ä¸ªæ–‡æ¡£å¹³å‡å¤§å°( avgDocSize )å³å¯å¾—åˆ°ä¸€ä¸ªç›®æ ‡chunkå†…é¢„æœŸçš„æ–‡æ¡£è¡Œæ•°( maxDocsPerChunk )ã€‚</p>
<p>â— ç¡®å®š chunk æ˜¯å¦å¯åˆ†è£‚</p>
<p>æ ¹æ®ç‰‡é”®ç´¢å¼•ç”Ÿæˆæ‰«æå™¨ï¼Œç„¶åè·å–è¯¥ chunk[min, max&gt;èŒƒå›´å†…çš„ç¬¬ä¸€ä¸ªæœ€å°çš„æ•°æ® key ,å†è·å–è¯¥èŒƒå›´å†…çš„æœ€åä¸€ä¸ªæœ€å¤§çš„æ•°æ® key ,å¦‚æœä¸¤ä¸ª key ç›¸ç­‰ï¼Œè¯´æ˜è¿™ä¸ªèŒƒå›´åªæœ‰ä¸€ä¸ªé”®å€¼ï¼Œä¹Ÿå°±æ˜¯è¯¥ chunk ä¸å¯åˆ†è£‚ã€‚</p>
<p>â— ç¡®å®š chunk åˆ†è£‚ç‚¹</p>
<p>ç¡®å®šåˆ†è£‚ç‚¹å€ŸåŠ©æ‰«æå™¨ï¼Œé€šè¿‡æ‰«æå™¨çš„ getNext æ¥å£ä»è¯¥ chunk çš„ min è¾¹ç•Œå¼€å§‹ä¸€è¡Œä¸€è¡Œè·å–ç´¢å¼•æ•°æ®ï¼Œå½“è·å–åˆ°çš„æ•°æ®è¡Œæ•°è¾¾åˆ° maxDocsPerChunk Â æ—¶å³å¯ç¡®è®¤åˆ†ç•Œç‚¹å’Œä¸€ä¸ªå­ chunk ã€‚å‡è®¾æŸæºchunk æœ‰1000æ¡æ•°æ®ï¼ŒmaxDocsPerChunk ä¸º100ï¼Œä»è¯¥ chunk è·å–3ä¸ªåˆ†è£‚ç‚¹ï¼Œå…¶æ ¸å¿ƒç®—æ³•å¦‚ä¸‹å›¾æ‰€ç¤º:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96df6bf8553940af9d1d6f7df4a398b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=nKJT2HaST5S14FGX7zz113BZ0%2Fw%3D" alt="image.png" loading="lazy"/></p>
<p>ä»ä¸Šé¢çš„ä»£ç ä¸­å¯ä»¥çœ‹å‡ºåˆ†è£‚ç‚¹è·å–é‡‡ç”¨â€œå‡åŒ€é—´éš”é‡‡æ ·ç­–ç•¥â€ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿æ¯ä¸ªæ¯ä¸ªæ‹†åˆ†åçš„ chunk å¤§å°å‡åŒ€ã€‚</p>
<p>â— ä¼˜åŒ–ï¼šæ‹†åˆ†åé¿å…å° chunk</p>
<p>ä¸€ä¸ªå¤§ chunk æ‹†åˆ†ä¸ºå¤šä¸ª maxChunkSizeBytes(128M) å¤§å°çš„ chunk æ—¶ï¼Œä¼šä¼˜å…ˆä¿è¯å‰é¢çš„å¤šä¸ªå­ chunk è¾¾åˆ°128M,è¿™æ ·å°±å¯èƒ½å¼•èµ·ä¸€ä¸ªé—®é¢˜ï¼šä¾‹å¦‚æŸä¸ª chunk æœ‰10001æ¡æ•°æ®ï¼Œæ¯100æ¡æ•°æ®å¯ä»¥ç»„æˆä¸€ä¸ª128Mçš„å­ chunk ï¼Œå‰é¢çš„1000æ¡æ•°æ®åˆšå¥½å¯ä»¥æ‹†åˆ†ä¸º10ä¸ª128Mçš„å­chunkï¼Œæœ€åçš„ç¬¬11ä¸ª chunk å°±åªä¼šæœ‰1æ¡æ•°æ®ï¼Œè¿™æ ·å°±ä¼šå¼•èµ· chunk ä¸å‡è¡¡ã€‚</p>
<p>MongoDB ä¸ºäº†é¿å…å° chunk çš„äº§ç”Ÿï¼Œå¦‚æœå‘ç°æŸä¸ªchunkçš„æ–‡æ¡£æ•°å°äºmaxDocsPerChunk*0.8 ,åˆ™ä¼šå¯¹æ‹†åˆ†å‡ºæ¥çš„æœ€åé¢çš„3ä¸ªåˆ†è£‚ç‚¹(ä¹Ÿå°±æ˜¯æœ€åçš„4ä¸ªå­chunk)è¿›è¡Œé‡æ–°å‡è¡¡ï¼Œæœ€ç»ˆä¿è¯åé¢4ä¸ª chunk çš„æ•°æ®å‡è¡¡ã€‚ä¸ºäº†è®©æœ€å4ä¸ª chunk å‡è¡¡ï¼Œè¿™é‡Œæœ‰ä¸¤ç§ç­–ç•¥ï¼šç®€å•ç­–ç•¥å’Œå…¬å¹³ç­–ç•¥ã€‚æœ€ç»ˆé€‰æ‹©å“ªç§ç­–ç•¥ç”±ä»¥ä¸‹ç®—æ³•å†³å®šï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f95afd997c043639f0757bd60039caf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=HCEx14ty0MUOHEaBqduIaoR9lWg%3D" alt="image.png" loading="lazy"/></p>
<p>å¯¹è¯¥ç®—æ³•çš„ä¸¾ä¾‹è¯´æ˜è¯·å‚è€ƒé™„å½•è¯¦æƒ…ã€‚</p>
<p>â— è‡ªåŠ¨ balance å¼•èµ·çš„ chunk æ‹†åˆ†æ€»ç»“</p>
<p>å½“æºåˆ†ç‰‡è¿›å…¥S(T2)é˜¶æ®µå‘ç° chunk æ²¡æœ‰ max ä¿¡æ¯ï¼Œå› æ­¤ä¼šè°ƒç”¨ autoSplitVector å‡½æ•°å¯¹æ¥å—åˆ°çš„ chunk è¿›è¡Œæ‹†åˆ†ï¼Œè‡ªåŠ¨ balance å¼•èµ·çš„ split é™åˆ¶ limit é™åˆ¶ä¸º1ï¼Œä¹Ÿå°±æ˜¯åªä¸­æ‹†åˆ†å‡º1ä¸ªå­ chunkï¼Œè¿™ä¸ªå­ chunk çš„æ‹†åˆ†ç‚¹å°±æ˜¯å­ chunk çš„ max ï¼Œè¿™æ · chunk çš„[min, max&gt;èŒƒå›´ä¹Ÿå°±ç¡®è®¤äº†ã€‚</p>
<p>è¯´æ˜ï¼šä¸ºäº†é¿å…æ‹†åˆ†ç‚¹åçš„ chunk è¿‡å°ï¼Œè‡ªåŠ¨ balance å¼•èµ·çš„ chunk split ä¼šæ‰«æ1+1=2ä¸ªå­ chunk ã€‚</p>
<h3 data-id="heading-15">2.3 S(T3): è·å–è¿ç§» chunk çš„æ•°æ® RecordId åˆ—è¡¨å¹¶é€šçŸ¥ç›®æ ‡åˆ†ç‰‡å¼€å§‹æ•°æ®è¿ç§»</h3>
<p>è¯¥é˜¶æ®µä¸»è¦ç¡®å®šè¦è¿ç§»çš„ chunk å¯¹åº”çš„æ‰€æœ‰æ•°æ® RecordId å’Œé€šçŸ¥ç›®æ ‡åˆ†ç‰‡å¼€å§‹æ•°æ®è¿ç§»ã€‚</p>
<p>â— è·å–è¿ç§» chunk çš„æ‰€å±æ•°æ® RecordId åˆ—è¡¨</p>
<p>ä¸ºäº†ç¡®å®šè¿ç§» chunk æœ‰å“ªäº› RecordId ï¼Œé¦–å…ˆåœ¨ _storeCurrentRecordId å‡½æ•°ä¸­é€šè¿‡åˆ†ç‰‡é”®ç´¢å¼•ç”Ÿæˆæ‰§è¡Œå™¨ï¼Œç„¶åé€šè¿‡æ‰§è¡Œå™¨ getNext æ¥å£è·å–è¯¥å±äºè¯¥ chunk èŒƒå›´çš„æ‰€æœ‰ RecordId å­˜å…¥ _cloneListç±»çš„_recordIds å…‹éš†åˆ—è¡¨ä¸­(std::setå®¹å™¨ç®¡ç†),å­˜å…¥ _recordIds çš„ RecordId å°†åœ¨åç»­çš„D(T4)ä¸­ä½¿ç”¨ï¼Œè·å–RecordIdå…‹éš†åˆ—è¡¨æ ¸å¿ƒä»£ç è¯¦è§é™„å½•æ–‡æ¡£ã€‚</p>
<p>å¦‚æœè¿ç§» chunk çš„å¤§å°è¶…è¿‡äº†2å€ maxChunk çš„å¤§å°ï¼Œåˆ™ä¼šæŠŠè¯¥ chunk æ ‡è®°ä¸º jumbo chunk ã€‚å¦‚æœæˆ‘ä»¬é…ç½®ä¸­ä¸å…è®¸è¿ç§» jumbo chunk åˆ™ä¼šè¿ç§»å¤±è´¥ï¼Œå¹¶ä¸”æ—¥å¿—ä¸­ä¼šæœ‰ ChunkTooBig ç›¸å…³æŠ¥é”™æ—¥å¿—ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹é…ç½®å¯ç”¨ jumbo chunk è¿ç§»ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c0906b259734f77ba542f92602ac5e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=v0PcwZ%2FJ%2B3VMrXrcfmTO4oqOtlg%3D" alt="image.png" loading="lazy"/></p>
<p>â— é€šçŸ¥ç›®æ ‡åˆ†ç‰‡å¼€å§‹æ•°æ®è¿ç§»</p>
<p>æ³¨å†Œ _coordinator è¿ç§»åè°ƒå™¨( MigrationCoordinator )å’Œ _cloneDriver æºå…‹éš†é©±åŠ¨å™¨( MigrationChunkClonerSource )ï¼Œç„¶åæºå…‹éš†é©±åŠ¨å™¨é€šçŸ¥ç›®æ ‡é›†ç¾¤å¯ä»¥å¼€å§‹æ•°æ®è¿ç§»äº†ï¼Œé€šçŸ¥è¿‡ç¨‹å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1dccdfe1c38945d9befe53efe4913f46~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=HrGnSX57WLutKxueHWrP0o7PEFM%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-16">2.4 D(T1): ç›®æ ‡åˆ†ç‰‡è¿ç§»å·¥ä½œå¯åŠ¨åŠæ—§æ•°æ®æ¸…ç†</h3>
<p>ç›®æ ‡åˆ†ç‰‡æ¥æ”¶åˆ° _recvChunkStart è¯·æ±‚åè§£æè¯·æ±‚ä¸­çš„å„ç§å‚æ•°ä¿¡æ¯ç„¶åèµ‹å€¼ç»™ MigrationDestinationManager (ç›®æ ‡åˆ†ç‰‡è´Ÿè´£æ¥æ”¶æ•°æ®å’ŒçŠ¶æ€ç®¡ç†çš„ç±»)çš„å„ä¸ªæˆå‘˜, åŒæ—¶åˆ›å»º"migrateThread"çº¿ç¨‹ï¼Œè¯¥çº¿ç¨‹è´Ÿè´£æ¥æ”¶ chunk æ•°æ®ã€‚</p>
<p>"migrateThread"çº¿ç¨‹åˆ›å»ºå®Œæˆåï¼Œè¿›å…¥ç›®æ ‡åˆ†ç‰‡æ•°æ®è¿ç§»8é˜¶æ®µçš„ç¬¬1é˜¶æ®µã€‚è¯¥é˜¶æ®µè·å–è¿ç§»è¡¨çš„åˆ›å»ºå‚æ•°ã€uuidã€è¡¨ç´¢å¼•ä¿¡æ¯ï¼Œç„¶åæ£€æŸ¥å½“å‰åˆ†ç‰‡æ˜¯å¦æœ‰å½±å“æœ¬æ¬¡è¿ç§»çš„å¾…åˆ é™¤ä»»åŠ¡ï¼Œå¦‚æœæœ‰åˆ™åˆ é™¤è¯¥ä»»åŠ¡ä¸­å¯¹åº”çš„è„æ•°æ®ã€‚</p>
<h3 data-id="heading-17">2.5 D(T2): åˆ›å»ºé›†åˆåŠå…¶ç´¢å¼•</h3>
<p>è¯¥é˜¶æ®µä¸»è¦æ ¹æ®ä¸Šé¢D(T1)è·å–åˆ°çš„é›†åˆå‚æ•°ä¿¡æ¯ã€ç´¢å¼•ä¿¡æ¯ï¼Œç„¶ååœ¨ç›®æ ‡åˆ†ç‰‡åˆ›å»ºä¸€è‡´çš„é›†åˆåŠå…¶ç´¢å¼•ç­‰ï¼Œç¡®ä¿é›†åˆç»“æ„( options + indexes )ä¸æºåˆ†ç‰‡çš„å®Œå…¨ä¸€è‡´ã€‚</p>
<h3 data-id="heading-18">2.6 D(T3): åˆ›å»ºåˆ é™¤ä»»åŠ¡å¹¶æŒä¹…åŒ–</h3>
<p>è¯¥é˜¶æ®µåˆå§‹åŒ–æ„é€  recipientDeletionTask ä»»åŠ¡ï¼Œç„¶åæŠŠè¯¥åˆ é™¤ä»»åŠ¡å†™å…¥ config.rangeDeletions é›†åˆä¸­ï¼Œåç»­å¦‚æœ chunk è¿ç§»å¤±è´¥æˆ–è€…å¼‚å¸¸ï¼Œå°±å¯ä»¥é€šè¿‡æŒä¹…åŒ–åˆ° rangeDeletions é›†åˆä¸­çš„åˆ é™¤ä»»åŠ¡æ¥åˆ é™¤å·²ç»å†™å…¥åˆ°ç›®æ ‡åˆ†ç‰‡çš„æ•°æ®ã€‚</p>
<p>å¦‚æœ chunk è¿ç§»ä¸­é€”å¤±è´¥ï¼Œåˆ™åå° delete çº¿ç¨‹ä¼šæ ¹æ®è¯¥é›†åˆä¸­çš„è¿™æ¡ chunk èŒƒå›´è®°å½•åˆ é™¤å·²ç»è¿ç§»åˆ°è¯¥ç›®æ ‡ shard çš„è„æ•°æ®ã€‚</p>
<h3 data-id="heading-19">2.7 D(T4): ç›®æ ‡åˆ†ç‰‡ä»æºåˆ†ç‰‡è·å– chunk æ•°æ®åº”ç”¨åˆ°æœ¬åœ°</h3>
<p>ç›®æ ‡åˆ†ç‰‡ä»æºåˆ†ç‰‡è·å–æ•°æ®å†™å…¥æœ¬åˆ†ç‰‡é‡‡ç”¨ç”Ÿäº§è€…-æ¶ˆè´¹è€…åŒçº¿ç¨‹æ± æ¨¡å¼å®ç°å¹¶å‘æ•°æ®è·å–åŠå¹¶å‘å†™å…¥ã€‚ç”Ÿäº§è€…è´Ÿè´£ä»æºåˆ†ç‰‡è·å–æ•°æ®ï¼Œç”±"ChunkMigrationFetchers"çº¿ç¨‹æ± ç®¡ç†ï¼Œæ¶ˆè´¹è€…è´Ÿè´£æŠŠç”Ÿäº§è€…è·å–çš„æ•°æ®å†™å…¥æœ¬åœ°åˆ†ç‰‡ï¼Œæ¶ˆè´¹é€»è¾‘ç”±"ChunkMigrationInserters"çº¿ç¨‹æ± ç®¡ç†ï¼Œé€šè¿‡è¯¥æ¶æ„å®ç°äº†ä¸€ä¸ªåˆ†ç‰‡è¡¨çš„å¹¶å‘æ•°æ®è¿ç§»ï¼Œæ¶æ„å›¾å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1832dd1f3c454ca18f3b5ec839f8de37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=LdBdDdi%2FJiiRnGGrcpY2cU3b9IU%3D" alt="image.png" loading="lazy"/>
â— çº¿ç¨‹æ± å¤§å°</p>
<p>ç”Ÿäº§è€…çº¿ç¨‹æ± å’Œæ¶ˆè´¹è€…çº¿ç¨‹æ± å¤§å°å¯ç”±åŒä¸€ä¸ªé…ç½®( chunkMigrationConcurrency )è°ƒæ•´ï¼Œè¯¥é…ç½®é»˜è®¤ä¸º1ï¼Œè°ƒæ•´å‘½ä»¤å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2863736516c64dd998cd842834fb0e9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=AzEC9NxQw%2FnQ14N%2B2zyWYrV%2BCbc%3D" alt="image.png" loading="lazy"/>
è¯´æ˜ï¼šæœ€æ–° MongoDB å†…æ ¸å·²ç»å–æ¶ˆäº†è¯¥é…ç½®ï¼Œåªä¼šç”±ä¸€ä¸ªçº¿ç¨‹æ¥ fetcher å’Œ insert æ•°æ®ã€‚</p>
<p>â— ç¼“å†²é˜Ÿåˆ—å¤§å°</p>
<p>ç¼“å†²é˜Ÿåˆ—ä¸­çš„æ¯ä¸€ä¸ª inserter ä¸­è®°å½•äº†ä¸€ä¸ª fetcher çº¿ç¨‹ä»æºåˆ†ç‰‡è·å–åˆ°çš„ä¸€æ‰¹æ•°æ®ï¼Œå¦‚æœ inserter çº¿ç¨‹æ± å†™å…¥æ¯” fetcher çº¿ç¨‹æ± æ…¢ï¼Œé‚£ä¹ˆç¼“å†²é˜Ÿåˆ—å°±ä¼šä¸€ç›´å¢é•¿ï¼Œè¿™æ ·å°±ä¼šå¼•èµ·å†…å­˜çš„æŒç»­å¢åŠ ã€‚ä¸ºäº†é™åˆ¶å†…å­˜çš„è¿‡åº¦æ¶ˆè€—ï¼ŒMongoDB é€šè¿‡ chunkMigrationFetcherMaxBufferedSizeBytesPerThread é…ç½®æ¥é™åˆ¶æ¯ä¸ª fetcher çº¿ç¨‹åœ¨ chunk è¿ç§»è¿‡ç¨‹ä¸­ç¼“å†²åˆ°é˜Ÿåˆ—ä¸­çš„æ–‡æ¡£å­—èŠ‚æ•°ï¼Œè¯¥é…ç½®é»˜è®¤å€¼ä¸ºçº¦64.06MBï¼Œè®¡ç®—æ–¹æ³•å¦‚ä¸‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a08038e966f041aa8e161dc89f2669c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=L4yR48fPdBEskVr78bb7CH5Ksd4%3D" alt="image.png" loading="lazy"/>
ä¸€æ‰¹æ•°æ®å¤§çº¦16M,ä¹Ÿå°±æ˜¯ä¸€ä¸ª fetcher çº¿ç¨‹å¤§çº¦å¯ä»¥æ‹‰å–4æ‰¹æ•°æ®å­˜åˆ°é˜Ÿåˆ—ä¸­ã€‚å¦‚æœä¸€ä¸ª insert çº¿ç¨‹æ± æ¶ˆè´¹æ•°æ®å†™å…¥ç›®æ ‡åˆ†ç‰‡è¿‡æ…¢ï¼Œåˆ™é˜Ÿåˆ—ä¸­çš„ inserter å°±ä¼šç§¯å‹ï¼Œå½“æ¯ä¸ª fetcher çº¿ç¨‹æŒ¤å‹å¤§çº¦4æ‰¹æ•°æ®åï¼Œfetcher çº¿ç¨‹å°±ä¼šé˜»å¡ç­‰å¾…ã€‚</p>
<p>â— Fetcher çº¿ç¨‹ä»æºåˆ†ç‰‡æ‹‰æ•°æ®æ ¸å¿ƒå®ç°åŸç†</p>
<p>Fetcher çº¿ç¨‹æ„é€ â€œ_migrateCloneâ€è¯·æ±‚å‘é€ç»™æºåˆ†ç‰‡ï¼Œæºåˆ†ç‰‡æ”¶åˆ°â€œ_migrateCloneâ€è¯·æ±‚åï¼Œæ ¹æ®S(T3)é¢„è®°å½•çš„ _recordIds å…‹éš†åˆ—è¡¨ä¸­çš„ recordId ä»å­˜å‚¨å¼•æ“è·å–çœŸå® doc æ–‡æ¡£ï¼Œå…¶æ ¸å¿ƒä»£ç å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bfee041250343c894d2fbbde89178e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=GVf6MU9YR3BAMsXDHXmWB%2FHz7yk%3D" alt="image.png" loading="lazy"/>
ä¸ºäº†è§£å†³å¤šçº¿ç¨‹å¹¶å‘è·å–çš„é—®é¢˜ï¼ŒMongoDB é€šè¿‡äº’æ–¥é”æ¥å®ç°ï¼Œä¿è¯ä¸åŒçº¿ç¨‹è·å–ä¸åŒçš„ recordId , æœ€ç»ˆå®ç°å¤šçº¿ç¨‹å¹¶å‘åˆ†é… recordId ï¼Œå…¶æ ¸å¿ƒä»£ç åŠä¸¾ä¾‹å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/25ecdcc9b86b424a9d585b9babf7c3c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=uJ936YYsOR%2F7Ye3gDfJTsb7JGZY%3D" alt="image.png" loading="lazy"/>
æ­¤å¤–ï¼ŒMongoDB å†…æ ¸æ‰¹é‡æ•°æ®ä¼ è¾“æœ‰ BSONObjMaxUserSize(16M) é™åˆ¶ï¼Œä¸ºäº†å°½é‡å¡«å……æ»¡16Mç©ºé—´åˆ° arrBuilder ä¸­ï¼Œå› æ­¤æ¯æ¬¡è·å–åˆ°çœŸå® doc åéœ€è¦è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœæœ€æ–°è·å–çš„ä¸€æ¡ doc å¡«å……åé•¿åº¦è¶…è¿‡16M,åˆ™æœ€åä¸€æ¡ doc ä¸ä¼šå¡«å……åˆ°arrBuilderï¼Œè€Œæ˜¯ä¸´æ—¶å­˜å…¥ _cloneList._overflowDocs é˜Ÿåˆ—ä¸­ï¼Œåœ¨ä¸‹ä¸€æ‰¹æ•°æ®è·å–çš„æ—¶å€™ä¼šä¼˜å…ˆæŠŠ _cloneList._overflowDocs é˜Ÿåˆ—ä¸­çš„æ•°æ®å¡«å……åˆ° arrBuilder ï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5ea272173ac4f5aa5fb74b17506a1f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=rDqxsux3NrqsaL6Gp0rcbxwJgo8%3D" alt="image.png" loading="lazy"/></p>
<p>ç›®æ ‡åˆ†ç‰‡æ”¶åˆ°æºåˆ†ç‰‡åº”ç­”åï¼Œä¼šæŠŠæ¥æ”¶åˆ°çš„ä¸€æ‰¹æ•°æ®å°è£…æˆ inserter å…¥é˜Ÿã€‚</p>
<p>â— Inserter çº¿ç¨‹è·å–é˜Ÿåˆ—æ•°æ®å†™å…¥æœ¬åœ°èŠ‚ç‚¹</p>
<p>ç›®æ ‡åˆ†ç‰‡ä»é˜Ÿåˆ—è·å– inserter åˆ†æ‰¹å†™å…¥æœ¬åœ°ä¸»èŠ‚ç‚¹ï¼Œå•æ‰¹æ¬¡å†™å…¥çš„æ–‡æ¡£æ•°å¯é…ç½®ï¼Œå‡è®¾é…ç½®çš„å•æ‰¹æ¬¡æ–‡æ¡£æ•°ä¸º100æ¡ï¼Œåˆ™åˆ†æ‰¹æ¬¡å†™å…¥æœ¬åœ°å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8cd741902880413cbb51dfaa10ea3e06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=ho66Fs4q3SWbzhnPWiaRIkDN4%2Bo%3D" alt="image.png" loading="lazy"/></p>
<p>å•æ‰¹æ¬¡å†™å…¥æ–‡æ¡£æ•°ç”± migrateCloneInsertionBatchSize é™åˆ¶ï¼Œè¯¥å€¼é»˜è®¤ä¸º0ï¼Œä¹Ÿå°±æ˜¯æŠŠ fetcher ä»æºåˆ†ç‰‡è·å–åˆ°çš„ inserter æ•°æ®ä¸€æ¬¡æ€§å†™å…¥ä¸»åˆ†ç‰‡ï¼Œè¯¥é…ç½®ä¿®æ”¹æ–¹æ³•å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fde4fc64ef1740e98c68df310b8b5602~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=1scUH71%2FDv%2Fw2KVDYg5GH0AV15I%3D" alt="image.png" loading="lazy"/></p>
<p>ä»æºåˆ†ç‰‡è·å–åˆ°çš„æ•°æ®åœ¨å®¢æˆ·ç«¯ driver å†™å…¥æºåˆ†ç‰‡çš„æ—¶å€™å·²ç»åšäº† schema æ ¡éªŒï¼Œä¸ºäº†æå‡ç›®æ ‡åˆ†ç‰‡æ‰¹é‡å†™å…¥æ€§èƒ½ï¼ŒperformInserts æ‰¹é‡å†™å…¥æ•°æ®ä¹‹å‰ç›®æ ‡ç«¯æå‰ç¦ç”¨äº† SchemaValidation åŠŸèƒ½ã€‚</p>
<p>æ­¤å¤–ï¼Œå¦‚æœé•¿æ—¶é—´é«˜è´Ÿè½½è¿ç§»æ•°æ®åˆ°ç›®æ ‡åˆ†ç‰‡ï¼Œå¯èƒ½å¼•èµ·ç›®æ ‡åˆ†ç‰‡è´Ÿè½½é«˜(ä¾‹å¦‚ dirty æŒç»­æ€§å¢åŠ )ã€‚ä¸ºäº†é™ä½æŒç»­è¿ç§»å†™å…¥å¯¹ç›®æ ‡åˆ†ç‰‡çš„å½±å“ï¼Œä¸€æ‰¹æ•°æ®å†™å…¥å®Œæˆåå¯ä»¥å»¶è¿Ÿä¸€æ®µæ—¶é—´ï¼Œå»¶è¿Ÿæ—¶é—´åˆ°æ‰ç»§ç»­ä¸‹ä¸€æ‰¹æ•°æ®å†™å…¥ã€‚å»¶è¿Ÿæ—¶é—´å¯é€šè¿‡ migrateCloneInsertionBatchDelayMS å‚æ•°é…ç½®ï¼Œè¯¥é…ç½®å‚æ•°é»˜è®¤ä¸º0ï¼Œä¹Ÿå°±æ˜¯é»˜è®¤ä¸€æ‰¹æ•°æ®å†™å…¥åä¸ä¼š sleep ï¼Œä¿®æ”¹æ–¹æ³•å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2bb66e7481b4be78eed15474220fa4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=cf%2FzObDRP1uhIzGLCNntVH2NEBY%3D" alt="image.png" loading="lazy"/></p>
<p>æ­¤å¤–ï¼Œç”±äºè¿ç§»æœŸé—´ï¼Œè¿ç§» chunk æ•°æ®è¿˜æ²¡æ­£å¼å½’å±äºç›®æ ‡åˆ†ç‰‡ï¼Œå› æ­¤è¿™éƒ¨åˆ†æ•°æ®å±äºå­¤å„¿æ–‡æ¡£ï¼Œéœ€è¦å¯¹å­¤å„¿æ–‡æ¡£è®¡æ•°ã€‚æ¯åº”ç”¨ä¸€æ‰¹æ•°æ®åˆ°æœ¬åœ°æˆåŠŸï¼Œå°±é€šè¿‡persistUpdatedNumOrphanså‡½æ•°å¯¹ config.rangeDeletions è¡¨ä¸­çš„ numOrphanDocs å­—æ®µåšâ€œ$incâ€ç´¯åŠ æ“ä½œï¼Œä¾‹å¦‚è¿™æ‰¹æ•°æ®å†™å…¥äº†100æ¡ï¼Œåˆ™ä¼šå¯¹è¡¨ä¸­çš„å­—æ®µå¢åŠ 100ã€‚</p>
<p>â— Chunk è¿ç§»è¿‡ç¨‹ä¸­å¢é‡æ•°æ®æ”¶é›†</p>
<p>Chunk è¿ç§»è¿‡ç¨‹ä¸­ï¼Œå®¢æˆ·ç«¯å¯èƒ½å†™æˆ–è€…ä¿®æ”¹è¯¥ chunk ä¸­çš„æ•°æ®ï¼Œè¿™éƒ¨åˆ†å†™é™¤äº†ä¼šåº”ç”¨åˆ°æºåˆ†ç‰‡å¤–ï¼Œè¿˜ä¼šè®°å½•åˆ°æºåˆ†ç‰‡çš„å†…å­˜é˜Ÿåˆ—ä¸­ï¼Œé˜Ÿåˆ—ä¸­åªä¼šä¿å­˜è¿ç§»æœŸé—´çš„å¢é‡å†™ oplog çš„ _id ä¿¡æ¯ï¼Œå…¶ä¸­ delete åˆ é™¤æ“ä½œè®°å½•åˆ° MigrationChunkClonerSource ç±»çš„ _deleted é˜Ÿåˆ—ï¼Œinsert å’Œ update åˆ™è®°å½•åœ¨ _reload é˜Ÿåˆ—ä¸­ã€‚</p>
<p>å†™å…¥æºåˆ†ç‰‡å†…å­˜é˜Ÿåˆ—ä¸­çš„ oplog å¢é‡æ•°æ®å°†åœ¨åé¢çš„D(T5)é˜¶æ®µç”±æºåˆ†ç‰‡æ¶ˆè´¹åå‘é€ç»™ç›®æ ‡åˆ†ç‰‡ï¼Œ _reload é˜Ÿåˆ—ç”Ÿäº§å’Œæ¶ˆè´¹é€»è¾‘å¦‚ä¸‹å›¾æ‰€ç¤º(è¯´æ˜ï¼šä¸‹å›¾ä¸­çš„ oplog å®é™…ä¸Šæ˜¯ oplog ä¸­çš„_idå†…å®¹):
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b39e429c9964778b6700f0586054b01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=B9POWDITucwBuN0YvUfhzaMOBNc%3D" alt="image.png" loading="lazy"/></p>
<p>åŒç†ï¼Œ_deleted é˜Ÿåˆ—ç”Ÿäº§å’Œæ¶ˆè´¹é€»è¾‘å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/758477ff24af4caca24fbeeb904da63f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=0Fs2hlTLL9NnSETg7foJbGhJRmo%3D" alt="image.png" loading="lazy"/></p>
<p>æœ¬é˜¶æ®µD(T4)åªè´Ÿè´£ç”Ÿäº§ oplog å…¥é˜Ÿï¼Œé˜Ÿåˆ—ä¸­ oplog æ¶ˆè´¹æµç¨‹åœ¨ä¸‹é¢çš„D(T5)é˜¶æ®µå®ç°ã€‚</p>
<h3 data-id="heading-20">2.8 D(T5): ç›®æ ‡åˆ†ç‰‡ä»æºåˆ†ç‰‡è·å–å¢é‡æ•°æ®åº”ç”¨åˆ°æœ¬åœ°</h3>
<p>D(T4)è·å–åˆ°ä¸€ä¸ª chunk çš„æ•°æ®å†™å…¥ç›®æ ‡åˆ†ç‰‡å®Œæˆåè¿›å…¥è¯¥é˜¶æ®µï¼Œè¿›å…¥è¯¥é˜¶æ®µåçŠ¶æ€ä¼šæ›´æ–°ä¸º kCatchup ï¼Œè¯¥é˜¶æ®µé¦–å…ˆå‘é€"_transferMods"è¯·æ±‚åˆ°æºåˆ†ç‰‡ã€‚</p>
<p>æºåˆ†ç‰‡æ”¶åˆ°è¯¥è¯·æ±‚åï¼Œé€šè¿‡ TransferModsCommand::run å¤„ç†è¯·æ±‚ï¼Œrun ä¸­è°ƒç”¨nextModsBatchæ¥å£è·å–ä¸Šé¢D(T4)é˜¶æ®µ _reload å’Œ _deleted é˜Ÿåˆ—ä¸­çš„ oplog ã€‚</p>
<h4 data-id="heading-21">2.8.1 æºåˆ†ç‰‡è¿”å›å¢é‡ oplog æ•°æ®ç»™ç›®æ ‡åˆ†ç‰‡</h4>
<p>â— åŸå­æ€§æ¥ç®¡é˜Ÿåˆ— oplog</p>
<p>åœ¨æ¥ç®¡ä¸¤ä¸ªé˜Ÿåˆ—å‰é€šè¿‡åŠ é”ä¿è¯ï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a93495f7c4945159fb624ccc85c9528~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=8fvlCeXFoDOHU%2BXvEC3vGVDVtAE%3D" alt="image.png" loading="lazy"/>
å¦‚ä¸Šä»£ç å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨ splice æ“ä½œå¯ä»¥é¿å…æ‹·è´å¼€é”€ï¼Œæœ€ç»ˆ _deleted é˜Ÿåˆ—ä¸­çš„ oplog(delete) ç”± deleteList æ¥ç®¡ï¼Œ _reload é˜Ÿåˆ—ä¸­çš„ oplog(insert/update) ç”± updateLis tæ¥ç®¡ã€‚</p>
<p>â— delete æ“ä½œå°åŒ…</p>
<p>åˆ é™¤æ“ä½œå°åŒ…æµç¨‹ä¸»è¦æ˜¯ä» deleteList åˆ—è¡¨ä¸­è·å– delete æ“ä½œçš„ oplog ï¼Œç”±äºåˆ é™¤æ“ä½œåªéœ€è¦ç¡®å®š _id å³å¯å®šä½å¯¹åº”æ•°æ®ï¼Œå› æ­¤ delete æ“ä½œåªæå–å…¶ä¸­çš„ _id å­—æ®µæ·»åŠ åˆ°å°åŒ…ä¸­</p>
<p>å°åŒ…åçš„å†…å®¹å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e705239f87e452bb8a4bef0e1361e24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=V5cUfxyBz49%2BOturTIBXZSl9XQg%3D" alt="image.png" loading="lazy"/></p>
<p>â— insert/update æ“ä½œå°åŒ…</p>
<p>å½“ deleteList åˆ—è¡¨ä¸­çš„ oplog å…¨éƒ¨å¡«å……åˆ° bson åŒ…å®Œæˆåï¼ŒdeleteList åˆ—è¡¨ä¸ºç©ºï¼Œè¿™æ—¶å€™æ‰ä¼šè¿›è¡Œ updateList åˆ—è¡¨ä¸­çš„ insert/update ç›¸å…³ oplog çš„å¡«å……ã€‚Insert/update æ“ä½œé¦–å…ˆé€šè¿‡ oplog ä¸­çš„ _id æ¥æŸ¥è¯¢å®Œæ•´æ–‡æ¡£ï¼Œç„¶åæŠŠå®Œæ•´æ–‡æ¡£å¡«å……åˆ°å°åŒ…ä¸­ã€‚</p>
<p>xferModes éå† updateList åˆ—è¡¨å¡«å…… bson åŒ…çš„æ—¶å€™ï¼Œä¼šæ ¹æ® _id å»é‡ï¼Œé¿å…åŒä¸€ä¸ª _id çš„æ•´æ–‡æ¡£å¤šæ¬¡æ·»åŠ åˆ° bson åŒ…ä¸­ã€‚Insert/update ç›¸å…³ oplog å°åŒ…åçš„å†…å®¹å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4b31519e9b24e20b33297050211ded5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=bF6vPmGSPSKfkacpbQvC3kP%2BtFE%3D" alt="image.png" loading="lazy"/></p>
<p>â— å› æœé¡ºåºä¸€è‡´æ€§ä¿éšœæœºåˆ¶</p>
<p>ä¸Šé¢ deleteã€insert/update å°åŒ…æµç¨‹å¯ä»¥çœ‹å‡ºï¼Œå¢é‡æ•°æ®ä¼šä¼˜å…ˆå¯¹deleteç›¸å…³æ“ä½œè¿›è¡Œå°åŒ…å¤„ç†ã€‚ä¸šåŠ¡å†™å…¥æ•°æ®ç”Ÿæˆ oplog åˆ° oplog.rs è¡¨åæ˜¯æœ‰åºçš„ï¼Œä½†æ˜¯è¿™é‡Œå´æŠ•é€’åˆ°äº†ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œoplog åˆ°ä¸¤ä¸ªé˜Ÿåˆ—å¦‚ä½•ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Ÿä¸‹é¢ä»¥ä¸¤ä¸ªåœºæ™¯ä¸¾ä¾‹:</p>
<p>åœºæ™¯1: å…ˆåˆ åæ”¹</p>
<p>é‰´äºç¯‡å¹…ï¼Œè¯¦è§£é™„å½•æ–‡æ¡£æŸ¥çœ‹è¯¦ç»†åœºæ™¯ä¸¾ä¾‹ã€‚</p>
<p>åœºæ™¯2: å…ˆæ”¹ååˆ </p>
<p>é‰´äºç¯‡å¹…ï¼Œè¯¦è§£é™„å½•æ–‡æ¡£æŸ¥çœ‹è¯¦ç»†åœºæ™¯ä¸¾ä¾‹ã€‚</p>
<p>â— æ‰¹é‡ä¼ è¾“é™åˆ¶</p>
<p>ç”±äºå†…æ ¸å•æ¬¡è¯·æ±‚åº”ç­”çš„ bson åŒ…ä½“å¤§å°æœ€å¤§16M, å¦‚æœå¢é‡æ•°æ®è¿‡å¤šï¼Œåˆ™éœ€è¦åˆ†æ‰¹æ¬¡è¿”å›ç»™ç›®æ ‡åˆ†ç‰‡ã€‚å¦‚æœä¸€æ‰¹æ•°æ®å°è£…å®Œæˆåï¼Œå‰©ä½™çš„æ•°æ®é‡æ–°è¿˜ç»™ _deleted å’Œ _reload é˜Ÿåˆ—ï¼Œä¸‹æ¬¡ç»§ç»­ä»é˜Ÿåˆ—æ¶ˆè´¹å‰©ä½™å¢é‡æ•°æ®å°è£…ã€‚</p>
<p>å‡è®¾ä¸€æ‰¹æ•°æ®ä¸­æ—¢æœ‰ delete æ•°æ®ä¹Ÿæœ‰ reload æ•°æ®ï¼Œåˆ™ä¼ è¾“çš„æ•°æ®å†…å®¹å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36637161ad8b47c8830231dedf42b2ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=XL%2BlReT3T8oaLDqlM9CnBn0UXUc%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-22">2.8.2 ç›®æ ‡åˆ†ç‰‡åº”ç”¨å¢é‡æ•°æ®</h4>
<p>ç›®æ ‡åˆ†ç‰‡"migrateThread"çº¿ç¨‹æ¥æ”¶åˆ°å¢é‡æ•°æ®åï¼Œåœ¨ fetchAndApplyBatch ä¸­é‡‡ç”¨ç”Ÿäº§è€…-æ¶ˆè´¹è€…åŒçº¿ç¨‹å¹¶å‘åä½œæ¨¡å¼æŠŠå¢é‡æ•°æ®åº”ç”¨åˆ°æœ¬åœ°ã€‚ç”Ÿäº§è€…çº¿ç¨‹è´Ÿè´£ä»æºåˆ†ç‰‡è·å–å¢é‡æ•°æ®å†™å…¥é˜Ÿåˆ—ï¼Œæ¶ˆè´¹è€…çº¿ç¨‹ä»é˜Ÿåˆ—æ¶ˆè´¹æ•°æ®åº”ç”¨åˆ°æœ¬åœ°ï¼Œé˜Ÿåˆ—å¤§å°å›ºå®šä¸º1ã€‚æ•´ä½“æ¶æ„å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5bcb6d6b7aa4893b2b845892678a649~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=aolGdZjqBzX2fWlnjNBO2wn65fo%3D" alt="image.png" loading="lazy"/></p>
<p>â— ç”Ÿäº§è€…çº¿ç¨‹å¾ªç¯ä»æºåˆ†ç‰‡è·å–å¢é‡æ•°æ®å…¥é˜Ÿ</p>
<p>ç”Ÿäº§è€…çº¿ç¨‹ä¸»è¦é€šè¿‡â€œ_transferModsâ€ä»æºåˆ†ç‰‡è·å–å¢é‡æ•°æ®ï¼Œæ”¶åˆ°æºåˆ†ç‰‡è¿”å›çš„å†…å®¹åï¼ŒæŠŠè¿”å›çš„ä¸€æ‰¹ batch æ•°æ®å…¥é˜Ÿåˆ° batches é˜Ÿåˆ—ï¼Œç„¶åç»§ç»­ä»æºåˆ†ç‰‡è·å–æ•°æ®ï¼Œç›´åˆ°æºåˆ†ç‰‡è¿”å›çš„ size ä¸º0ï¼Œè¯´æ˜å¢é‡æ•°æ®æ‹‰å–å®Œæ¯•ã€‚</p>
<p>â— æ¶ˆè´¹è€…çº¿ç¨‹ä»é˜Ÿåˆ—æ¶ˆè´¹æ•°æ®åº”ç”¨åˆ°æœ¬åœ°</p>
<p>æ¶ˆè´¹è€…çº¿ç¨‹ä»é˜Ÿåˆ—ä¸­è·å– batch æ•°æ®åï¼Œé€šè¿‡ applyModsFn å›æ‰æ¥å£æŠŠæ•°æ®åº”ç”¨åˆ°æœ¬åœ°ï¼Œå…ˆå¤„ç†æºåˆ†ç‰‡è¿”å›çš„ deleted ç›¸å…³å¢é‡ oplog æ•°æ®ï¼Œdeleted å¢é‡æ•°æ®åº”ç”¨åŸç†: æ ¹æ®è¿”å›çš„ deleted åˆ—è¡¨ä¸­çš„ _id è·å–æ•´ä¸ªæ–‡æ¡£ï¼Œç„¶åç»“åˆ shardkey æ£€æŸ¥è¯¥æ•°æ®æ˜¯å¦å±äºè¿™ä¸ª chunk ï¼Œå¦‚æœæ£€æŸ¥é€šè¿‡åˆ™æ ¹æ® _id æ‰§è¡Œåˆ é™¤æ“ä½œã€‚</p>
<p>Deleted åˆ—è¡¨ä¸­çš„_idæ•°æ®å¤„ç†å®Œæ¯•åï¼Œå¼€å§‹å¤„ç† reload åˆ—è¡¨( insert/update )ä¸­çš„æ•°æ®ï¼Œåº”ç”¨ reload åˆ—è¡¨ä¸­çš„æ•°æ®åŸç†å’Œ deleted ç±»ä¼¼ï¼Œå…ˆæ ¹æ® reload åˆ—è¡¨ä¸­è·å–çš„æ•´æ–‡æ¡£æ£€æŸ¥æ˜¯å¦å±äºè¿™ä¸ª chunkï¼Œå¦‚æœå±äºè¿ç§»çš„ chunk åˆ™å¯¹æ•´æ–‡æ¡£æ‰§è¡Œ upsert æ“ä½œã€‚</p>
<p>ä¸ºäº†æå‡åº”ç”¨å¢é‡æ•°æ®çš„æ€§èƒ½ï¼Œå’ŒD(T4)ç« èŠ‚å…¨é‡ chunk å›æ”¾ä¸€æ ·ç¦ç”¨ schemaValidate æ£€æŸ¥ã€‚æ­¤å¤–ï¼Œåœ¨åº”ç”¨å¢é‡æ•°æ®æµç¨‹ä¸­è¿˜ä¼šå¯¹å­¤å„¿æ–‡æ¡£è¿›è¡Œè®¡æ•°ï¼Œæ¯åº”ç”¨ä¸€æ¡ delete å¯¹åº” oplog åˆ é™¤ä¸€æ¡æ•°æ®åˆ™å­¤å„¿æ–‡æ¡£æ•° changeInOrphans å‡1ï¼Œä» reload é˜Ÿåˆ—æ¯ upsert å†™ä¸€æ¡æ•°æ®æˆåŠŸåˆ™å­¤å„¿æ–‡æ¡£æ•°åŠ 1ã€‚</p>
<h3 data-id="heading-23">2.9 S(T4)[D(T1) â€“ D(T5)]: æºåˆ†ç‰‡ä¸å®šæœŸæ£€æŸ¥å¢é‡æ•°æ®è¿ç§»è¿›åº¦</h3>
<p>æºåˆ†ç‰‡S(T4)å’Œç›®æ ‡åˆ†ç‰‡D(T1)â€“D(T5)å¤„äºåŒä¸€æ—¶é—´æ®µï¼Œå› æ­¤è¿™é‡Œç”¨S(T4)[ D(T1)â€“D(T5)]è¡¨ç¤ºã€‚</p>
<p>åœ¨ç›®æ ‡åˆ†ç‰‡ä»æºåˆ†ç‰‡è¿ç§»å¢é‡æ•°æ®æœŸé—´[ D(T1)â€“D(T5)]ï¼Œæºåˆ†ç‰‡åœ¨è¿™æœŸé—´è¿›è¡Œç¬¬4é˜¶æ®µçš„åŠŸèƒ½å¤„ç†ï¼Œæºåˆ†ç‰‡ç¬¬4é˜¶æ®µä¸»è¦åŠŸèƒ½æ˜¯é€šè¿‡è¿œç¨‹è°ƒç”¨ï¼Œå‘¨æœŸæ€§æ£€æŸ¥ç›®æ ‡åˆ†ç‰‡å½“å‰çš„å…‹éš†è¿›åº¦å’ŒçŠ¶æ€ï¼Œåˆ¤æ–­æ˜¯å¦å¯ä»¥å®‰å…¨è¿›å…¥æäº¤é˜¶æ®µ startCommit ã€‚</p>
<p>â— è¿›åº¦æŸ¥è¯¢äº¤äº’è¿‡ç¨‹</p>
<p>æºåˆ†ç‰‡å‘ç›®æ ‡åˆ†ç‰‡å‘é€â€œ_recvChunkStatusâ€å‘½ä»¤è¯·æ±‚å‘ç›®æ ‡åˆ†ç‰‡è·å–å¢é‡æ•°æ®å…‹éš†è¿ç§»è¿›åº¦ï¼Œè¯·æ±‚å†…å®¹å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd0e0039a77945d48f65d172258155be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=Ozt4RpJy1u4Baz4l6jg2v%2FROj%2Bs%3D" alt="image.png" loading="lazy"/>
è¯·æ±‚ä¸­çš„ waitForSteadyOrDone å­—æ®µå†…å®¹ä¸º true ï¼Œå› æ­¤ç›®æ ‡åˆ†ç‰‡ä¼šåœ¨æ¡ä»¶å˜é‡ä¸Šç­‰å¾…ï¼Œæ¡ä»¶æ»¡è¶³æˆ–è€…1ç§’è¶…æ—¶åæ‰ä¼šè¿”å›æºåˆ†ç‰‡ã€‚</p>
<p>â€œ_recvChunkStatusâ€è·å–è¿›åº¦äº¤äº’è¿‡ç¨‹å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/104ca70190374b66a1c0f13f60a238f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=4xi97EwBEKYZo76aUhBar7ZgNmY%3D" alt="image.png" loading="lazy"/></p>
<p>â— è¿›å…¥å…³é”®ä¸´ç•ŒåŒº(é˜»æ­¢ç”¨æˆ·å†™)åˆ¤æ–­æ¡ä»¶</p>
<p>å¦‚æœæºåˆ†ç‰‡æ”¶åˆ°ç›®æ ‡åˆ†ç‰‡åº”ç­”çš„ stat çŠ¶æ€ä¸º catchup (ä¹Ÿå°±æ˜¯å¢é‡æ•°æ®è·å–ä¸­)æˆ–è€… steady (å¢é‡æ•°æ®å·²è·å–å®Œæˆ)ï¼Œå¹¶ä¸”æœªä¼ è¾“çš„å¢é‡æ•°æ®å  chunk æœ€å¤§å€¼çš„ç™¾åˆ†æ¯”ä½äº maxCatchUpPercentageBeforeBlockingWrites (é»˜è®¤10%ï¼Œå³128*10%=12.8M)é…ç½®æ—¶å°†è¿›å…¥å…³é”®é˜¶æ®µã€‚æœªä¼ è¾“çš„å¢é‡æ•°æ®è®¡ç®—æ–¹æ³•è¯¦è§£é™„å½•æ–‡æ¡£ã€‚</p>
<p>è°ƒæ•´é…ç½®æ–¹æ³•å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/138b89d767024e909cb8d11ced51c8b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=boXSEL1C70c20UPj6JQG77holIA%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-24">2.10.S(T5): è¿›å…¥å…³é”®ä¸´ç•ŒåŒº</h3>
<p>â— æºåˆ†ç‰‡è¿›å…¥ä¸´ç•ŒåŒºå¹¶é˜»å¡ç”¨æˆ·å†™</p>
<p>è¿›å…¥ä¸´ç•ŒåŒºï¼Œä¹Ÿå°±æ˜¯æ•°æ®è¿ç§»çš„å…³é”®é˜¶æ®µï¼Œåœ¨ MigrationSourceManager::enterCriticalSection() ä¸­ä¼šè¿›å…¥ä¸´ç•ŒåŒºï¼Œå¯¹åº”ä»£ç å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8781c84c7b443818cff0a3b577aacf7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=cCI7wmpH8jmR4TV65ku65yZd5qc%3D" alt="image.png" loading="lazy"/></p>
<p>é€šè¿‡ _critSec.emplace() æœ€ç»ˆä¼šåˆ›å»º Â ShardingMigrationCriticalSection å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«ï¼š</p>
<p>_critSecCtxï¼šå…³é”®åŒºåŸŸä¸Šä¸‹æ–‡ã€‚</p>
<p>critSecSignalï¼šä¸€ä¸ªSharedPromise ç”¨äºé˜»å¡æ“ä½œã€‚</p>
<p>reasonï¼šé˜»å¡åŸå› ï¼ˆè¿ç§»ç›¸å…³ä¿¡æ¯ï¼‰ã€‚</p>
<p>è¿›å…¥ä¸´ç•ŒåŒºåï¼Œå½“ç”¨æˆ·å†™è¿ç§» chunk æ•°æ®åˆ°æºåˆ†ç‰‡å¦‚æœå‘ç°å½“å‰å¤„äºä¸´ç•ŒåŒºåˆ™éœ€è¦é˜»å¡ç­‰å¾…ï¼Œå¯¹åº”é˜»å¡ç­‰å¾…ä¼ªä»£ç å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b62b0656f2c4cf2b9db48956c2f169a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=uYTLpBY8lj%2BfMxLuBqFfC%2BnLxFw%3D" alt="image.png" loading="lazy"/></p>
<p>â— å‘ç›®æ ‡åˆ†ç‰‡å‘å‡ºæäº¤ä¿¡å·ï¼Œé©±åŠ¨ç›®æ ‡åˆ†ç‰‡è¿›å…¥æäº¤æ”¶å°¾æµç¨‹</p>
<p>è¿›å…¥ä¸´ç•ŒåŒºåï¼Œæºåˆ†ç‰‡å‘ç›®æ ‡åˆ†ç‰‡å‘é€"_recvChunkCommit"è¯·æ±‚ï¼ŒåŒæ—¶é˜»å¡ç­‰å¾…ç›®æ ‡åˆ†ç‰‡è¿”å›è¿›åº¦å†…å®¹ï¼Œè¯·æ±‚å†…å®¹å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2a7fe1ec3894cb2bd1c7acab6fdd2b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=8tlP1EbLl60OzNNoXE0OZF0YaZg%3D" alt="image.png" loading="lazy"/></p>
<p>ç›®æ ‡åˆ†ç‰‡æ”¶åˆ°è¯¥è¯·æ±‚åï¼Œéœ€è¦ç­‰å¾… â€œmigrateThreadâ€è¿ç§»çº¿ç¨‹å®Œæˆå¢é‡æ•°æ®è¿ç§»åŠä¸€äº›æ”¶å°¾å·¥ä½œï¼Œç„¶åè¿›å…¥ kCommitStart çŠ¶æ€ï¼ŒåŒæ—¶å”¤é†’ç›®æ ‡åˆ†ç‰‡çš„â€œmigrateThreadâ€çº¿ç¨‹è¿›å…¥ä¸‹ä¸€é˜¶æ®µå¤„ç†ï¼Œå¯¹åº”ä»£ç å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64982d7fe9cc41e085933b6cf0a7a047~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=tD2Jd99UHxUol%2BwqYOoX8JOAroA%3D" alt="image.png" loading="lazy"/>
å”¤é†’ç›®æ ‡åˆ†ç‰‡ migrateThread çº¿ç¨‹åï¼Œå¤„ç†"_recvChunkCommit"è¯·æ±‚çš„çº¿ç¨‹ä¼šé˜»å¡ç­‰å¾…ï¼Œç­‰å¾…â€œmigrateThreadâ€æ•°æ®è¿ç§»çº¿ç¨‹è¿›å…¥ä¸´ç•Œå…³é”®åŒºï¼Œç­‰å¾…è¯¥è¿ç§»çº¿ç¨‹æŠŠçŠ¶æ€æ¨è¿›åˆ° kEnteredCritSecï¼Œç­‰å¾…è¶…æ—¶æ—¶é—´ defaultConfigCommandTimeoutMS(é»˜è®¤30ç§’) å¯é…ç½®ï¼Œé…ç½®æ–¹å¼å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/72b496d14e524d8aab8d688e0b2e35dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=SCGUYmrPkkBgy20DVZaEU306k0Y%3D" alt="image.png" loading="lazy"/></p>
<p>å½“ migrateThread çº¿ç¨‹ç¬¬8é˜¶æ®µè¿›å…¥ kEnteredCritSec çŠ¶æ€åï¼Œä¼šå”¤é†’å¤„ç†"_recvChunkCommit"è¯·æ±‚çš„çº¿ç¨‹ï¼Œè¯¥è¯·æ±‚çº¿ç¨‹è¿”å›ç›®æ ‡åˆ†ç‰‡è¿ç§»çŠ¶æ€ã€‚æºåˆ†ç‰‡æ”¶åˆ°è¿”å›çš„è¿ç§»çŠ¶æ€å†…å®¹åä¼šè¿›å…¥S(T6)é˜¶æ®µã€‚</p>
<h3 data-id="heading-25">2.11 D(T6): æºåˆ†ç‰‡ç¦å†™åç›®æ ‡åˆ†ç‰‡å†æ¬¡ç»§ç»­è·å–å¢é‡æ•°æ®</h3>
<p>åˆ°è¿™é‡Œç›®æ ‡åˆ†ç‰‡å·²ç»è¿›å…¥ kCommitStart çŠ¶æ€ï¼ŒåŒæ—¶æºå·²ç»ç¦å†™ï¼Œä½†æ˜¯D(T5)-D(T6)æœŸé—´æºå¯èƒ½è¿˜æœ‰å†™å…¥ï¼Œå› æ­¤ migrateThread éœ€è¦å†æ¬¡ä»æºåˆ†ç‰‡ fetch ä¸€æ¬¡æ•°æ®ï¼Œå¦‚æœæºåˆ†ç‰‡è¿”å›çš„å“åº”å†…å®¹ä¸ºç©º (size=0) åˆ™è¯´æ˜ç¦å†™æœŸé—´çš„å¢é‡æ•°æ®ä¹Ÿè·å–å®Œæˆã€‚</p>
<h3 data-id="heading-26">2.12 D(T7): ç­‰å¾…ä¼šè¯æ•°æ®è¿ç§»å®Œæˆå¹¶æ ¡éªŒç»“æœ</h3>
<p>è¯¥é˜¶æ®µä¸»è¦ç¡®ä¿æ‰€æœ‰ä¸è¿ç§» chunk ç›¸å…³çš„ä¼šè¯æ•°æ®(å¦‚äº‹åŠ¡ã€å¯é‡è¯•å†™ç­‰)éƒ½å·²ä»æºåˆ†ç‰‡åŒæ­¥åˆ°æœ¬åœ°, è¿™ä¸€æ­¥ä¿è¯äº†è¿ç§»åç›®æ ‡åˆ†ç‰‡èƒ½å¤Ÿæ­£ç¡®å¤„ç†ä¸è¯¥ chunk ç›¸å…³çš„åˆ†å¸ƒå¼äº‹åŠ¡å’Œä¼šè¯æ“ä½œã€‚åªæœ‰åœ¨ä¼šè¯æ•°æ®å…¨éƒ¨è¿ç§»å®Œæˆåï¼Œç›®æ ‡åˆ†ç‰‡æ‰ä¼šè¿›å…¥è¿ç§»æµç¨‹çš„æœ€ç»ˆé˜¶æ®µ(å¦‚å…³é”®åŒºåŸŸè§£é™¤ã€è¿ç§»å®Œæˆ)ï¼Œé˜²æ­¢äº‹åŠ¡ä¸¢å¤±æˆ–ä¼šè¯çŠ¶æ€ä¸ä¸€è‡´ï¼Œæ ¸å¿ƒä»£ç å®ç°å‚è€ƒé™„å½•ã€‚</p>
<h3 data-id="heading-27">2.13 D(T8): ç›®æ ‡åˆ†ç‰‡ä¸´ç•ŒåŒºå…³é”®é˜¶æ®µå¤„ç†</h3>
<p>ç¬¬8é˜¶æ®µæ˜¯ä¸´ç•ŒåŒºå…³é”®é˜¶æ®µï¼Œä¸»è¦å·¥ä½œå¦‚ä¸‹:</p>
<p>â— æŒä¹…åŒ–æ¢å¤æ–‡æ¡£</p>
<p>åœ¨ç›®æ ‡åˆ†ç‰‡è¿›å…¥å…³é”®åŒºåŸŸå‰ï¼Œå°†è¿ç§»çš„å…³é”®ä¿¡æ¯ï¼ˆè¿ç§»IDã€å‘½åç©ºé—´ã€ä¼šè¯IDã€chunkèŒƒå›´ã€æºåˆ†ç‰‡ç­‰ï¼‰æŒä¹…åŒ–åˆ° config.migrationRecipients é›†åˆã€‚</p>
<p>å¦‚æœç›®æ ‡åˆ†ç‰‡çš„ä¸»èŠ‚ç‚¹åœ¨ä¸´ç•Œå…³é”®åŒºåŸŸæœŸé—´å‘ç”Ÿæ•…éšœï¼Œæ–°ä¸»èŠ‚ç‚¹å¯ä»¥æ ¹æ®æŒä¹…åŒ–çš„æ–‡æ¡£æ¢å¤è¿ç§»çŠ¶æ€, ç¡®ä¿è¿ç§»æµç¨‹ä¸ä¼šå› æ•…éšœè€Œä¸­æ–­æˆ–ä¸¢å¤±ã€‚</p>
<p>â— ç›®æ ‡åˆ†ç‰‡é€šçŸ¥æºåˆ†ç‰‡æ•°æ®è¿ç§»å®Œæˆ</p>
<p>å‰é¢çš„å·¥ä½œå¤„ç†å®Œæˆåï¼Œç›®æ ‡åˆ†ç‰‡ migrateThread å”¤é†’S(T5)ä¸­çš„å¤„ç† _recvChunkCommit è¯·æ±‚çš„çº¿ç¨‹ï¼Œè¯¥çº¿ç¨‹è¢«å”¤é†’åè¿”å›æºåˆ†ç‰‡ç›®æ ‡åˆ†ç‰‡å·²è¿›å…¥ä¸´ç•ŒåŒºçŠ¶æ€ï¼Œè¿”å›å†…å®¹å‚è€ƒå‰é¢S(T4)ç« èŠ‚ã€‚å”¤é†’ä»£ç å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29e36d14066744bd90a48fd1823152b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=KeQpFEUDe0ASPLtI2D96w1EXz4E%3D" alt="image.png" loading="lazy"/></p>
<p>â— ç›®æ ‡åˆ†ç‰‡é˜»å¡ç­‰å¾…æºåˆ†ç‰‡é€šçŸ¥è‡ªå·±é€€å‡ºä¸´ç•ŒåŒº</p>
<p>åˆ°è¿™é‡Œï¼Œç›®æ ‡åˆ†ç‰‡é˜»å¡ç­‰å¾…æºåˆ†ç‰‡é€šçŸ¥è‡ªå·±é€€å‡ºä¸´ç•ŒåŒºçš„é€šçŸ¥, è¯¥é€šçŸ¥ç”±ä¸‹é¢çš„S(T6)é˜¶æ®µå®ç°ï¼Œå¯¹åº”ä»£ç å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6ee496d928e405bae77570b4e4fbe8e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=Xl604aYCxA%2BrCwbCdPhtaczlMU8%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-28">2.14.S(T6): è¿›å…¥å…³é”®ä¸´ç•ŒåŒº</h3>
<p>ç›®æ ‡åˆ†ç‰‡ç¬¬8é˜¶æ®µè¿›å…¥ kEnteredCritSec çŠ¶æ€åï¼Œæºåˆ†ç‰‡è¿›å…¥S(T6)é˜¶æ®µï¼Œè¯¥é˜¶æ®µä¸»è¦ä½œç”¨å¦‚ä¸‹:</p>
<p>â— è¿›å…¥å…³é”®ä¸´ç•ŒåŒºæäº¤é˜¶æ®µ</p>
<p>æºåˆ†ç‰‡å°†é›†åˆä¸´ç•ŒåŒºåŸŸä»åªé˜»å¡chunkæ•°æ®å†™æ“ä½œå‡çº§ä¸ºé˜»å¡ chunk è¯»å†™æ“ä½œï¼Œè¿›å…¥è¿ç§»çš„æœ€ç»ˆæäº¤é˜¶æ®µã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08f84c8a77b44e5db8b9db0278196b05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=FHbifutTg83R37Yeu9f0oBmx%2FGw%3D" alt="image.png" loading="lazy"/>
â— ä¿®æ”¹ config server çš„ chunk å…ƒæ•°æ®</p>
<p>Chunk å·²ç»ä»æºåˆ†ç‰‡è¿ç§»åˆ°ç›®æ ‡åˆ†ç‰‡äº†ï¼Œä¿®æ”¹ config.chunks è¡¨ä¸­å¯¹åº”å·²è¿ç§» chunk å…ƒæ•°æ®å±äºç›®æ ‡åˆ†ç‰‡ã€‚</p>
<p>â— é€šçŸ¥ç›®æ ‡åˆ†ç‰‡é‡Šæ”¾ä¸´ç•ŒåŒº</p>
<p>ä¿®æ”¹ chunk å…ƒæ•°æ®å®Œæˆåï¼Œæºåˆ†ç‰‡å‘é€ _recvChunkReleaseCritSec è¯·æ±‚ç»™ç›®æ ‡åˆ†ç‰‡ã€‚ç›®æ ‡åˆ†ç‰‡å¤„ç†è¯¥è¯·æ±‚çš„çº¿ç¨‹é€šè¿‡ä¸‹é¢ä»£ç é€šçŸ¥D(T8)é˜¶æ®µé˜»å¡çš„ migrateThread çº¿ç¨‹é‡Šæ”¾ä¸´ç•ŒåŒº:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c884a151b25428bb3dee447bff66d7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=35EJB2Cqsz%2F7X0a%2BGAYDQPcje4M%3D" alt="image.png" loading="lazy"/></p>
<p>ç›®æ ‡åˆ†ç‰‡ migrateThread çº¿ç¨‹é€€å‡ºä¸´ç•ŒåŒºåï¼Œä¼šä» config server è·å–æœ€æ–°çš„ chunk å…ƒæ•°æ®ã€‚è‡³æ­¤ï¼Œç›®æ ‡åˆ†ç‰‡æ­£å¼æ¥ç®¡æ–° chunkï¼Œå†™å…¥è¯¥ chunk çš„æ•°æ®å°†ç”±æ–°åˆ†ç‰‡æ¥æ”¶ã€‚</p>
<p>migrateThread çº¿ç¨‹é€€å‡ºä¸´ç•ŒåŒºåï¼Œå¤„ç† _recvChunkReleaseCritSec è¯·æ±‚çš„çº¿ç¨‹è¿”å›æˆåŠŸåº”ç­”ç»™æºåˆ†ç‰‡ï¼Œå¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eef95ed089ea4de5b1a4c746a5f7e447~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=aXJDTB5knq59g%2FCE5K3gOEYm%2FCo%3D" alt="image.png" loading="lazy"/>
â— æºåˆ†ç‰‡é€€å‡ºä¸´ç•ŒåŒº</p>
<p>æºåˆ†ç‰‡æ”¶åˆ°ç›®æ ‡åˆ†ç‰‡é€€å‡ºä¸´ç•ŒåŒºå®Œæˆçš„åº”ç­”åï¼Œæºåˆ†ç‰‡é€€å‡ºä¸´ç•ŒåŒºï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16ff4a342e624ef3a0fdeb33d0f6928c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=dlXEemvPGAeo1DQqiGYSUzfh5%2Fk%3D" alt="image.png" loading="lazy"/>
è°ƒç”¨ reset() æ–¹æ³•ä¼šæ¸…ç†å…³é”®ä¸´ç•ŒåŒºçŠ¶æ€ï¼Œä»è€Œè§£é™¤å¯¹è¿ç§»é›†åˆçš„è¯»å†™æ“ä½œé˜»å¡ã€‚æ­¤å¤–ï¼Œæ¸…é™¤ä¸´ç•ŒåŒºçŠ¶æ€åï¼ŒåŒæ—¶å‘ config.changelog è¡¨ä¸­è®°å½•ä¸€æ¡â€œmoveChunk.commitâ€æ—¥å¿—ã€‚</p>
<h3 data-id="heading-29">2.15 æ€»ç»“</h3>
<p>ChunkÂ æ•°æ®è¿ç§»è¿‡ç¨‹æŒ‰ç…§æ—¶é—´çº¿æ€»ç»“å¦‚ä¸‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa82b2dd8cbd4773bd2ff7a837950b6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=JT5zBhhJXk018wJGh8uFUCqW%2B2s%3D" alt="image.png" loading="lazy"/></p>
<p><strong>è¿ç§»å¼‚å¸¸å¤„ç†åŠè¯Šæ–­ç»Ÿè®¡</strong></p>
<h3 data-id="heading-30">3.1 è„æ•°æ®æ¸…ç†</h3>
<p>å¦‚æœè¿ç§»å¼‚å¸¸ï¼Œä¾‹å¦‚è¿ç§»ä¸€éƒ¨åˆ†æ•°æ®å†™å…¥ç›®æ ‡åˆ†ç‰‡åï¼Œå› ä¸ºæŸç§åŸå› è¿ç§»å¤±è´¥ï¼Œå°±éœ€è¦å¯¹ç›®æ ‡åˆ†ç‰‡çš„è„æ•°æ®åšæ¸…ç†æ“ä½œã€‚æ­¤å¤–ï¼Œå¦‚æœ chunk æ•°æ®è¿ç§»æˆåŠŸï¼Œæºåˆ†ç‰‡éœ€è¦æ¸…ç†è¯¥ chunk çš„æ•°æ®ï¼Œè¿™éƒ¨åˆ†æ•°æ®ä¹Ÿæ˜¯è„æ•°æ®ã€‚</p>
<p>é‰´äºç¯‡å¹…ï¼Œæœ¬æ–‡ä¸å†åšè„æ•°æ®æ¸…ç†ç›¸å…³åˆ†æï¼Œè„æ•°æ®æ¸…ç†åŸç†ä»¥åå•ç‹¬åˆ†äº«ã€‚</p>
<h3 data-id="heading-31">3.2 è¿ç§»è¯Šæ–­ç»Ÿè®¡</h3>
<p>MongoDB ä¼šå¯¹è¿ç§»è¿‡ç¨‹ä¸­é‡è¦ç¯èŠ‚è¿›è¡Œç»Ÿè®¡ï¼Œå¯é€šè¿‡ db.serverStatus().shardingStatisticsÂ </p>
<p>å‘½ä»¤æŸ¥çœ‹:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/acd2067c8ba346b6b06a0cf8248d08b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=NKXCfiUv3TWOn8UEPYdHoiFkWko%3D" alt="image.png" loading="lazy"/></p>
<p>å„ç»Ÿè®¡çš„å«ä¹‰æ€»ç»“å¦‚ä¸‹:</p>
<p>â— æºåˆ†ç‰‡è¿ç§»ç›¸å…³ç»Ÿè®¡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba2e6b63c8674ce58634c0b89d6e7f67~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=bPb7aoCeewQaIiyTuuPD%2B5inn%2B4%3D" alt="image.png" loading="lazy"/>
â— ç›®æ ‡åˆ†ç‰‡è¿ç§»ç»Ÿè®¡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0446b296fe124c8aa4937662fc4fa1b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=O%2Flr4Sq7s6D22x7RUvkKoGZ6Zyc%3D" alt="image.png" loading="lazy"/></p>
<p>â— å…³é”®ä¸´ç•ŒåŒºåŸŸç›¸å…³ç»Ÿè®¡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a28262a23bc84f748b0bcab296f1531f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=8aEcMIqVyFcuk4Wrg2ddzlEyCkg%3D" alt="image.png" loading="lazy"/></p>
<p>â— æ•°æ®å…‹éš†ç›¸å…³ç»Ÿè®¡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d56f39f9c3540ee92a81a7e3c3388f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=HbOjIfL1qaxvolIEm3xp6CouJaE%3D" alt="image.png" loading="lazy"/></p>
<p>â— èŒƒå›´åˆ é™¤ç›¸å…³ç»Ÿè®¡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bbee436f8c8e4a6fba4820a36afd585d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=46Ykz8MDFgJ0Uh%2FPzrMcD%2Bq0vZw%3D" alt="image.png" loading="lazy"/>
â— è¿ç§»å¤±è´¥ç›¸å…³ç»Ÿè®¡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06e4ba1fe11d4b34b0c2d13db5c75b2e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=UNaoeQHvuGAXpctcI1BAMYYm6Jk%3D" alt="image.png" loading="lazy"/></p>
<p>â— å…¶ä»–ç»Ÿè®¡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/681612c6acee44c5a323202c56671d6c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5pWw5o2u5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520051&amp;x-signature=RtSnEU%2Fl%2FengivWmjoYq%2BMmq0ro%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æ€§èƒ½è°ƒä¼˜</strong></p>
<hr/>
<p>ä¸ºäº†é€‚åº”ä¸åŒåœºæ™¯ï¼Œbalance è¿‡ç¨‹æ”¯æŒé…ç½®å‚æ•°åœ¨çº¿è°ƒæ•´ï¼Œè°ƒä¼˜æ€»ç»“å¦‚ä¸‹:</p>
<p>â— Â chunkMigrationConcurrency</p>
<p>è¯¥å‚æ•°ä¸»è¦è´Ÿè´£å•ä¸ªè¡¨è¿ç§»çš„å¹¶å‘åº¦è°ƒæ•´ï¼Œé»˜è®¤ä¸º1ã€‚å¦‚æœè¿ç§»è¿‡ç¨‹ä¸­æºåˆ†ç‰‡å’Œç›®æ ‡åˆ†ç‰‡è´Ÿè½½éƒ½ä¸é«˜ï¼Œå¯ä»¥é€‚å½“çš„è°ƒå¤§è¯¥å€¼ï¼›å¦‚æœè¿ç§»è¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿè´Ÿè½½é«˜ï¼Œä¸å»ºè®®è°ƒå¤§è¯¥å€¼ã€‚è¯¥é…ç½® 5.0.15, 6.0.5 åŠå…¶ä»¥ä¸Šç‰ˆæœ¬æ”¯æŒè°ƒæ•´ã€‚</p>
<p>è¯´æ˜: ç”±äºè°ƒå¤§è¯¥å€¼ä¼šå¢åŠ ç³»ç»Ÿè´Ÿè½½ï¼Œå¹¶ä¸”å¯èƒ½å¢åŠ å­¤å„¿æ–‡æ¡£çš„äº§ç”Ÿï¼Œå› æ­¤ä» 8.0.5, 7.0.23 å¼€å§‹çš„ç‰ˆæœ¬ä¸å†æ”¯æŒè°ƒæ•´è¯¥å‚æ•°ã€‚</p>
<p>â— Â chunkMigrationFetcherMaxBufferedSizeBytesPerThread</p>
<p>æ¯ä¸ªè¿ç§»çº¿ç¨‹ç¼“å†²æ–‡æ¡£çš„æœ€å¤§å­—èŠ‚æ•°ï¼Œ0è¡¨ç¤ºæ— é™åˆ¶ï¼Œé»˜è®¤å€¼4 Â BSONObjMaxInternalSize (çº¦ç­‰äº464M)ï¼Œå…·ä½“ä½œç”¨è¯·å‚è€ƒå‰é¢D(T4)ã€‚ä¸å»ºè®®ä¿®æ”¹è¯¥å€¼ã€‚</p>
<p>â— Â migrateCloneInsertionBatchSize</p>
<p>å…‹éš†é˜¶æ®µç›®æ ‡åˆ†ç‰‡æ¯æ‰¹æ’å…¥çš„æœ€å¤§æ–‡æ¡£æ•°ï¼Œè¯¥é…ç½®é»˜è®¤å€¼0ï¼Œä¹Ÿå°±æ˜¯ä¸é™åˆ¶ä¸€æ‰¹å†™å…¥çš„æ–‡æ¡£æ•°ã€‚å¦‚æœç›®æ ‡åˆ†ç‰‡å‹åŠ›å¾ˆå¤§å½±å“ä¸šåŠ¡ï¼Œå»ºè®®é€‚å½“è°ƒæ•´è¯¥å€¼ï¼Œä¾‹å¦‚è°ƒæ•´ä¸º100ï¼Œä¸€æ¬¡æ‰¹é‡å†™å…¥100æ¡æ•°æ®ã€‚</p>
<p>â— Â migrateCloneInsertionBatchDelayMS</p>
<p>å…‹éš†é˜¶æ®µç›®æ ‡åˆ†ç‰‡æ‰¹æ¬¡æ’å…¥ä¹‹é—´çš„ç­‰å¾…æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯æ¯å†™ä¸€æ‰¹æ•°æ®åéƒ½å»¶è¿Ÿä¸€æ®µæ—¶é—´ï¼Œè¿™æ ·å°±å¯ä»¥å‡å°‘ç›®æ ‡åˆ†ç‰‡è´Ÿè½½ã€‚è¯¥é…ç½®é»˜è®¤å€¼ä¸º0ï¼Œä¹Ÿå°±æ˜¯ä¸ sleep å»¶è¿Ÿã€‚å¦‚æœç›®æ ‡åˆ†ç‰‡å› ä¸ºæ•°æ®è¿ç§»å‹åŠ›å¾ˆå¤§ï¼Œå¯ä»¥è°ƒå¤§è¯¥å€¼å‡å°‘å¯¹ä¸šåŠ¡çš„å½±å“ã€‚</p>
<p>â— Â migrationLockAcquisitionMaxWaitMS</p>
<p>è¿ç§»æ“ä½œè·å–é›†åˆé”çš„æœ€å¤§ç­‰å¾…æ—¶é—´ï¼Œé»˜è®¤å€¼500msï¼Œä¸å»ºè®®ä¿®æ”¹è¯¥å€¼ã€‚</p>
<p>â— Â maxCatchUpPercentageBeforeBlockingWrites</p>
<p>è¿›å…¥å…³é”®ä¸´ç•ŒåŒºæ—¶çš„åˆ¤æ–­æ¡ä»¶ï¼Œä¹Ÿå°±æ˜¯å…è®¸æœªä¼ è¾“çš„å¢é‡æ•°æ®å  chunk æœ€å¤§å€¼çš„ç™¾åˆ†æ¯”ï¼Œé»˜è®¤å€¼10%ï¼Œä¹Ÿå°±æ˜¯å½“æœªä¼ è¾“çš„å¢é‡æ•°æ®å¤§çº¦ä¸º12.8M( chunk é»˜è®¤128M * 10%)æ—¶ï¼Œå¯ä»¥å‚è€ƒS(T4)ç« èŠ‚è·å–æ›´å¤šç»†èŠ‚ã€‚</p>
<p>å¦‚æœå­˜åœ¨çƒ­ç‚¹ chunk ï¼Œä¾‹å¦‚è¿ç§»è¯¥ chunk è¿‡ç¨‹ä¸­ä¸šåŠ¡æŒç»­åœ¨ä¿®æ”¹è¯¥ chunk ï¼Œè¿™æ—¶å€™å¯èƒ½è¿ç§»é€Ÿåº¦æ²¡æœ‰ä¸šåŠ¡å†™å…¥é€Ÿåº¦å¿«ï¼Œè¿™æ—¶å€™å¯èƒ½å¢é‡æ•°æ®é•¿æ—¶é—´è¶…è¿‡12.8M,è¿™ç§åœºæ™¯å¯ä»¥é€‚å½“è°ƒå¤§è¯¥å€¼ã€‚</p>
<p>â— Â rangeDeleterBatchSize</p>
<p>æ¸…ç†æ•°æ®æ—¶æ¯æ‰¹åˆ é™¤çš„æœ€å¤§æ–‡æ¡£æ•°ï¼Œé»˜è®¤å€¼ INT_MAX ï¼Œä¹Ÿå°±æ˜¯ä¸é™åˆ¶ã€‚å¦‚æœå‘ç°æœ‰å¤§é‡åˆ é™¤æ“ä½œå¼•èµ·è´Ÿè½½é«˜æˆ–è€…å½±å“ä¸šåŠ¡ï¼Œå»ºè®®è°ƒå°è¯¥å€¼ï¼Œä¾‹å¦‚100ã€‚</p>
<p>â— Â rangeDeleterBatchDelayMS</p>
<p>ä¸€æ‰¹æ•°æ®åˆ é™¤åï¼Œæ˜¯å¦åš sleep ï¼Œé»˜è®¤å€¼20msã€‚å¦‚æœç³»ç»Ÿè´Ÿè½½å¾ˆä½ï¼Œå»ºè®®è°ƒå°è¯¥å€¼ï¼Œå¦‚æœç³»ç»Ÿè´Ÿè½½é«˜ï¼Œå»ºè®®è°ƒå¤§è¯¥å€¼ã€‚</p>
<p>â— Â rangeDeleterHighPriority</p>
<p>æ˜¯å¦ä¼˜å…ˆæ‰§è¡ŒèŒƒå›´åˆ é™¤æ“ä½œï¼ˆé«˜äºç”¨æˆ·æ“ä½œï¼‰ï¼Œé»˜è®¤å€¼ false ï¼Œä¸å»ºè®®ä¿®æ”¹è¯¥å€¼ã€‚</p>
<p>â— Â orphanCleanupDelaySecs</p>
<p>å»¶è¿Ÿå¤šä¹…åå¼€å§‹æ­£å¼åˆ é™¤æ•°æ®ï¼Œé»˜è®¤å€¼900ç§’ã€‚ä¸å»ºè®®ä¿®æ”¹è¯¥å€¼ã€‚</p>
<p>â— Â receiveChunkWaitForRangeDeleterTimeoutMS</p>
<p>è¯¥å‚æ•°æ§åˆ¶ç›®æ ‡åˆ†ç‰‡åœ¨æ¥æ”¶æ–°çš„ chunk è¿ç§»è¯·æ±‚æ—¶ï¼Œç­‰å¾…ä¸è¿ç§»èŒƒå›´é‡å çš„èŒƒå›´åˆ é™¤ä»»åŠ¡å®Œæˆçš„æœ€å¤§æ—¶é—´ã€‚é»˜è®¤å€¼10000msï¼Œå¦‚æœé‡å èŒƒå›´å¤ªå¤šå¯ä»¥é€‚å½“è°ƒå¤§è¯¥å€¼ã€‚</p>
<p>â— Â persistedChunkCacheUpdateMaxBatchSize</p>
<p>æ§åˆ¶åˆ†ç‰‡æœ¬åœ°æŒä¹…åŒ– chunk ç¼“å­˜æ›´æ–°æ—¶çš„æ‰¹å¤„ç†å¤§å°ï¼Œå³æ¯æ¬¡æ›´æ–°æ“ä½œæœ€å¤šå¤„ç†çš„ chunk å…ƒæ•°æ®è®°å½•æ•°ï¼Œé»˜è®¤å€¼1000ï¼Œä¸å»ºè®®ä¿®æ”¹è¯¥å€¼ã€‚</p>
<p><strong>ä¸åŒå†…æ ¸ç‰ˆæœ¬æ€§èƒ½åŠåŠŸèƒ½æ€»ç»“</strong></p>
<hr/>
<p>ç”±äº MongoDB å†…æ ¸ 6.0ï½8.0 ä»£ç  balance æ•´ä½“åŸç†å·®å¼‚ä¸å¤§ï¼Œé‰´äºç¯‡å¹…ï¼Œè¿™é‡Œé‡ç‚¹æ€»ç»“é«˜ç‰ˆæœ¬ç›¸æ¯” 5.0 åŠä»¥ä¸‹ç‰ˆæœ¬çš„å‡ ä¸ªæ ¸å¿ƒå·®å¼‚ï¼š</p>
<p>â— æ€§èƒ½ç›¸å…³</p>
<p>å®æµ‹ 5.0 å’Œ 8.0 çš„æ•´ä½“è¿ç§»é€Ÿåº¦ï¼Œ8.0 æ€§èƒ½ç›¸æ¯” 5.0 å¥½å¤§çº¦ 30% - 45%ã€‚æ€§èƒ½æå‡åŸç†æ€»ç»“å¦‚ä¸‹:</p>
<ol>
<li>
<p>6.0å¼€å§‹çš„ç‰ˆæœ¬ chunksize å¤§å°ç”±é»˜è®¤64Må¢åŠ åˆ°128M, ç½‘ç»œIOå¤„ç†å¼€é”€æ›´å°ï¼Œæ•´ä½“ç½‘ç»œä¼ è¾“æ•ˆç‡ã€è¯»å†™ååæ›´é«˜ã€‚</p>
</li>
<li>
<p>Chunk è·¯ç”±æ€»é‡æ›´å°‘ï¼Œè·¯ç”±æŸ¥è¯¢å¤„ç†æ•ˆç‡æ›´é«˜ï¼Œç½‘ç»œäº¤äº’æ›´å°‘ã€‚</p>
</li>
<li>
<p>é«˜ç‰ˆæœ¬æ‰¹é‡å†™æ€§èƒ½çš„æå‡è¿›ä¸€æ­¥æå‡è¿ç§»é€Ÿåº¦ã€‚</p>
</li>
<li>
<p>ç›¸æ¯”ä½ç‰ˆæœ¬ split ç”±ç”¨æˆ·çº¿ç¨‹å®ç°ï¼Œ6.0.3 é«˜ç‰ˆæœ¬ split ç”±æºåˆ†ç‰‡ MoveChun åå°çº¿ç¨‹å®Œæˆï¼Œå› æ­¤ split å¯¹ä¸šåŠ¡æ— å½±å“ï¼Œå‚è€ƒS(T2)ç« èŠ‚ã€‚</p>
</li>
</ol>
<p>â— Â Chunk å’Œ split å·®å¼‚</p>
<p>5.0åŠä»¥ä¸‹ç‰ˆæœ¬ï¼Œå½“ chunk å¤§å°è¾¾åˆ° chunksize é…ç½®å¤§å°åä¼šè§¦å‘ split ã€‚6.0.3 å¼€å§‹çš„é«˜ç‰ˆæœ¬ split åœ¨åš balance çš„è¿‡ç¨‹ä¸­ç”±æºåˆ†ç‰‡â€œmoveChunkâ€åå°çº¿ç¨‹è¿›è¡Œæ‹†åˆ†ï¼Œå…·ä½“è¯·å‚è€ƒS(T2)ç« èŠ‚ï¼Œå› æ­¤é«˜ç‰ˆæœ¬ä¸€ä¸ª chunk å¯ä»¥å¾ˆå¤§ï¼Œç”šè‡³åˆ°Tçº§åˆ«ã€‚</p>
<p>åŸºäºä¸Šé¢çš„åŸå› ï¼Œ6.0.3 å¼€å§‹ç‰ˆæœ¬ä¸èƒ½å†é€šè¿‡æ¯ä¸ªåˆ†ç‰‡çš„ chunk æ•°é‡æ¥åˆ¤æ–­æ•°æ®æ˜¯å¦å‡è¡¡ï¼Œè€Œæ˜¯é€šè¿‡ db.xxxx.getShardDistribution() å‘½ä»¤è·å–æ¯ä¸ªåˆ†ç‰‡çš„å®é™…æ•°æ®é‡æ¥åˆ¤æ–­æ•°æ®æ˜¯å¦å‡è¡¡ã€‚</p>
<p>â— Â Chunksize é»˜è®¤å¤§å°è°ƒæ•´</p>
<p>6.0å¼€å§‹ç‰ˆæœ¬ chunksize å¤§å°é»˜è®¤ç”±64Mè°ƒæ•´åˆ°128Mã€‚</p>
<p>â— æ–°åŠŸèƒ½ç›¸å…³</p>
<p>ä»MongoDB 7.0 å¼€å§‹ï¼Œæ–°å¢ automergeã€æ›´è¯¦ç»†çš„è¯Šæ–­ç»Ÿè®¡ã€ Defragmentation ç¢ç‰‡æ•´ç†ç­‰åŠŸèƒ½ã€‚</p>
<blockquote>
<p>è…¾è®¯äº‘æ•°æ®åº“ MongoDBï¼ˆTencentDB for MongoDBï¼‰ æ˜¯è…¾è®¯äº‘åŸºäºå…¨çƒå¹¿å—æ¬¢è¿çš„ MongoDB æ‰“é€ çš„é«˜æ€§èƒ½ NoSQL æ•°æ®åº“ï¼Œ100% å®Œå…¨å…¼å®¹ MongoDB åè®®ï¼Œæä¾›ç¨³å®šä¸°å¯Œçš„ç›‘æ§ç®¡ç†ï¼Œå¼¹æ€§å¯æ‰©å±•ã€è‡ªåŠ¨å®¹ç¾ï¼Œé€‚ç”¨äºæ–‡æ¡£å‹æ•°æ®åº“åœºæ™¯ï¼Œä½¿æ‚¨æ— éœ€è‡ªå»ºç¾å¤‡ä½“ç³»åŠæ§åˆ¶ç®¡ç†ç³»ç»Ÿã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CharlesæŠ“åŒ…å·¥å…·è¯¦è§£ï¼Œå¼€å‘è€…å¿…å¤‡çš„ç½‘ç»œè°ƒè¯•ä¸æµé‡åˆ†æç¥å™¨]]></title>    <link>https://juejin.cn/post/7571351275977523251</link>    <guid>https://juejin.cn/post/7571351275977523251</guid>    <pubDate>2025-11-12T02:49:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571351275977523251" data-draft-id="7571360278971203593" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CharlesæŠ“åŒ…å·¥å…·è¯¦è§£ï¼Œå¼€å‘è€…å¿…å¤‡çš„ç½‘ç»œè°ƒè¯•ä¸æµé‡åˆ†æç¥å™¨"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-12T02:49:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aiopencode"/> <meta itemprop="url" content="https://juejin.cn/user/1898230261493865"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CharlesæŠ“åŒ…å·¥å…·è¯¦è§£ï¼Œå¼€å‘è€…å¿…å¤‡çš„ç½‘ç»œè°ƒè¯•ä¸æµé‡åˆ†æç¥å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1898230261493865/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aiopencode
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T02:49:39.000Z" title="Wed Nov 12 2025 02:49:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ— è®ºä½ æ˜¯Webå‰ç«¯ã€åç«¯å·¥ç¨‹å¸ˆï¼Œè¿˜æ˜¯ç§»åŠ¨ç«¯å¼€å‘æˆ–æµ‹è¯•å·¥ç¨‹å¸ˆï¼Œåœ¨è°ƒè¯•æ¥å£ã€æ’æŸ¥Bugã€åˆ†æè¯·æ±‚æ—¶ï¼Œéƒ½ç»•ä¸å¼€ä¸€ä¸ªå…³é”®è¯â€”â€”<strong>æŠ“åŒ…</strong>ã€‚</p>
<p>è€Œåœ¨ä¼—å¤šæŠ“åŒ…è½¯ä»¶ä¸­ï¼Œ<strong>CharlesæŠ“åŒ…å·¥å…·</strong> è¢«èª‰ä¸ºâ€œå¼€å‘è€…çš„æµé‡æ˜¾å¾®é•œâ€ã€‚</p>
<p>å®ƒèƒ½è®©åŸæœ¬éšè—åœ¨ç½‘ç»œå±‚çš„é€šä¿¡è¿‡ç¨‹å˜å¾—é€æ˜ï¼Œè®©ä½ è½»æ¾å®šä½æ¥å£å¼‚å¸¸ã€åˆ†æè¯·æ±‚é€»è¾‘ã€éªŒè¯å“åº”æ•°æ®ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« å°†å¸¦ä½ ç³»ç»Ÿäº†è§£ï¼š</p>
<blockquote>
<p>ä»€ä¹ˆæ˜¯CharlesæŠ“åŒ…å·¥å…·ï¼Œå®ƒèƒ½åšä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆå‡ ä¹æ¯ä¸ªå¼€å‘è€…éƒ½ç¦»ä¸å¼€å®ƒã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€CharlesæŠ“åŒ…å·¥å…·æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p><strong>Charles</strong> æ˜¯ä¸€æ¬¾ä¸“ä¸šçš„ <strong>HTTP/HTTPS æŠ“åŒ…ä¸ç½‘ç»œè°ƒè¯•å·¥å…·</strong>ï¼Œ
æœ€æ—©ç”±Karl von Randowå¼€å‘ï¼Œç›®å‰å¹¿æ³›åº”ç”¨äºå‰ç«¯è°ƒè¯•ã€ç§»åŠ¨åº”ç”¨æµ‹è¯•ä¸APIå¼€å‘ä¸­ã€‚</p>
<p>å®ƒçš„æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>å®æ—¶æŠ“å–HTTP/HTTPSè¯·æ±‚ä¸å“åº”</strong></li>
<li><strong>åˆ†æè¯·æ±‚å¤´ã€å‚æ•°ã€Cookiesä¸çŠ¶æ€ç </strong></li>
<li><strong>æ–­ç‚¹è°ƒè¯•ä¸è¯·æ±‚ä¿®æ”¹</strong></li>
<li><strong>Mockæ¥å£ä¸é‡å†™å“åº”</strong></li>
<li><strong>ç§»åŠ¨ç«¯æŠ“åŒ…</strong>ï¼ˆæ”¯æŒiOS/Androidï¼‰</li>
<li><strong>å¸¦å®½é™åˆ¶ä¸å¼±ç½‘æ¨¡æ‹Ÿ</strong></li>
</ul>
<p>ä¸€å¥è¯æ€»ç»“ï¼š</p>
<blockquote>
<p>Charlesè®©â€œç½‘ç»œè¯·æ±‚â€ä¸å†æ˜¯é»‘ç›’ï¼Œè€Œæ˜¯ä½ å¯ä»¥è§‚å¯Ÿã€ä¿®æ”¹ã€æŒæ§çš„è¿‡ç¨‹ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-1">äºŒã€CharlesæŠ“åŒ…å·¥å…·çš„å·¥ä½œåŸç†</h2>
<p>è¦ç†è§£Charlesçš„å¼ºå¤§ï¼Œå°±è¦å…ˆç†è§£å®ƒ<strong>å¦‚ä½•æŠ“åŒ…</strong>ã€‚</p>
<p>Charlesçš„æ ¸å¿ƒæœºåˆ¶æ˜¯ <strong>ä»£ç†ï¼ˆProxyï¼‰è½¬å‘</strong>ï¼š</p>
<ol>
<li>Charlesåœ¨æœ¬åœ°è¿è¡Œåï¼Œä¼šå¯åŠ¨ä¸€ä¸ªHTTPä»£ç†æœåŠ¡å™¨ï¼ˆé»˜è®¤ç«¯å£8888ï¼‰ï¼›</li>
<li>ç³»ç»Ÿæˆ–Appçš„æ‰€æœ‰ç½‘ç»œè¯·æ±‚éƒ½ä¼šç»è¿‡Charlesè½¬å‘ï¼›</li>
<li>Charlesæˆªè·è¿™äº›è¯·æ±‚ä¸å“åº”ï¼Œå¹¶å°†æ•°æ®å¯è§†åŒ–å±•ç¤ºã€‚</li>
</ol>
<p>ç®€å•æ¥è¯´ï¼Œæ•°æ®æµåŠ¨å˜æˆäº†è¿™æ ·ï¼š</p>
<pre><code class="hljs">å®¢æˆ·ç«¯ â†’ Charlesä»£ç† â†’ å®é™…æœåŠ¡å™¨
</code></pre>
<p>Charlesç«™åœ¨ä¸­é—´ï¼Œå°±èƒ½å®Œæ•´åœ°â€œè§‚å¯Ÿâ€æ¯ä¸€ä¸ªæ•°æ®åŒ…ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€Charleså¦‚ä½•æŠ“å–HTTPSæµé‡</h2>
<p>HTTPSçš„ç‰¹ç‚¹æ˜¯â€œåŠ å¯†é€šä¿¡â€ï¼Œé‚£ä¹ˆCharlesæ˜¯å¦‚ä½•â€œçœ‹è§â€åŠ å¯†å†…å®¹çš„å‘¢ï¼Ÿ</p>
<p>è¿™è¦å½’åŠŸäºå®ƒçš„ <strong>SSL Proxyingï¼ˆä¸­é—´äººä»£ç†ï¼‰æœºåˆ¶</strong>ã€‚</p>
<p>Charlesé€šè¿‡å®‰è£…è‡ªå·±çš„æ ¹è¯ä¹¦ï¼ˆCharles Root CAï¼‰ï¼Œåœ¨è¯·æ±‚ä¸æœåŠ¡å™¨ä¹‹é—´å»ºç«‹â€œåŒå‘ä¿¡ä»»è¿æ¥â€ï¼š</p>
<ul>
<li>ä¸å®¢æˆ·ç«¯å»ºç«‹ä¸€æ¡åŠ å¯†é€šé“ï¼›</li>
<li>åŒæ—¶ä¸æœåŠ¡å™¨å»ºç«‹å¦ä¸€æ¡åŠ å¯†é€šé“ï¼›</li>
<li>ç„¶ååœ¨ä¸­é—´â€œç¿»è¯‘â€å¹¶å±•ç¤ºæ˜æ–‡æ•°æ®ã€‚</li>
</ul>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä½ å¿…é¡»ä¿¡ä»»Charlesè¯ä¹¦ï¼Œå¦åˆ™å®¢æˆ·ç«¯ä¼šæ‹’ç»é€šä¿¡ã€‚</p>
<p><strong>é…ç½®æ–¹æ³•ï¼š</strong></p>
<ol>
<li>æ‰“å¼€èœå•ï¼š<code>Help â†’ SSL Proxying â†’ Install Charles Root Certificate</code></li>
<li>å®‰è£…è¯ä¹¦åè®¾ç½®ä¸ºâ€œå§‹ç»ˆä¿¡ä»»â€ï¼›</li>
<li>åœ¨ <code>Proxy â†’ SSL Proxying Settings</code> ä¸­å¯ç”¨ <code>*:*</code>ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-3">å››ã€CharlesæŠ“å–æ‰‹æœºAppæµé‡</h2>
<p>Charlesä¸ä»…èƒ½æŠ“å–ç”µè„‘æµè§ˆå™¨è¯·æ±‚ï¼Œè¿˜èƒ½æŠ“å–ç§»åŠ¨ç«¯Appçš„æ•°æ®åŒ…ã€‚</p>
<h3 data-id="heading-4"><strong>é…ç½®æµç¨‹ï¼š</strong></h3>
<h4 data-id="heading-5"><strong>â‘  ç¡®ä¿æ‰‹æœºä¸ç”µè„‘åœ¨åŒä¸€Wi-Fiä¸‹</strong></h4>
<p>å› ä¸ºCharlesä½œä¸ºä»£ç†æœåŠ¡å™¨ï¼Œéœ€è¦ä¸¤ç«¯å¤„äºåŒä¸€å±€åŸŸç½‘ã€‚</p>
<h4 data-id="heading-6"><strong>â‘¡ æ‰‹æœºé…ç½®Wi-Fiä»£ç†</strong></h4>
<ul>
<li>æœåŠ¡å™¨åœ°å€ï¼šç”µè„‘IPï¼ˆCharlesåº•éƒ¨çŠ¶æ€æ å¯æŸ¥çœ‹ï¼‰</li>
<li>ç«¯å£å·ï¼š8888</li>
</ul>
<h4 data-id="heading-7"><strong>â‘¢ å®‰è£…ç§»åŠ¨ç«¯è¯ä¹¦</strong></h4>
<p>åœ¨æ‰‹æœºæµè§ˆå™¨è®¿é—®ï¼š<code>chls.pro/ssl</code>
ä¸‹è½½å¹¶å®‰è£…è¯ä¹¦ã€‚</p>
<blockquote>
<p>iOSç”¨æˆ·éœ€å‰å¾€â€œè®¾ç½® â†’ é€šç”¨ â†’ è¯ä¹¦ä¿¡ä»»è®¾ç½®â€ä¸­ä¿¡ä»»Charlesè¯ä¹¦ã€‚</p>
</blockquote>
<p>å®Œæˆåï¼ŒCharleså³å¯å®æ—¶æ˜¾ç¤ºAppçš„HTTPä¸HTTPSè¯·æ±‚ã€‚</p>
<hr/>
<h2 data-id="heading-8">äº”ã€CharlesæŠ“åŒ…å·¥å…·çš„æ ¸å¿ƒåŠŸèƒ½ä¸ä½¿ç”¨åœºæ™¯</h2>
<h3 data-id="heading-9"><strong>Breakpointsï¼ˆæ–­ç‚¹è°ƒè¯•ï¼‰</strong></h3>
<p>å…è®¸æ‹¦æˆªè¯·æ±‚ï¼Œåœ¨å‘é€å‰æˆ–å“åº”åä¿®æ”¹æ•°æ®ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>æµ‹è¯•æ¥å£çš„å¼‚å¸¸æƒ…å†µï¼›</li>
<li>æ¨¡æ‹Ÿåç«¯é”™è¯¯è¿”å›ï¼›</li>
<li>ä¿®æ”¹è¯·æ±‚å‚æ•°éªŒè¯å®‰å…¨æ€§ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-10"><strong>Map Localï¼ˆæœ¬åœ°Mockï¼‰</strong></h3>
<p>å°†è¯·æ±‚æ˜ å°„åˆ°æœ¬åœ°æ–‡ä»¶ï¼Œæ›¿ä»£æœåŠ¡å™¨å“åº”ã€‚</p>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>åç«¯æ¥å£æœªå®Œæˆï¼›</li>
<li>å‰ç«¯ç‹¬ç«‹è”è°ƒï¼›</li>
<li>æµ‹è¯•é™æ€å“åº”ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼š
å°† <code>/api/user/info</code> æ˜ å°„åˆ° <code>mock/user.json</code>ï¼Œ
å³å¯ç¦»çº¿è¿”å›æµ‹è¯•æ•°æ®ã€‚</p>
<hr/>
<h3 data-id="heading-11"><strong>Rewriteï¼ˆè¯·æ±‚ä¸å“åº”é‡å†™ï¼‰</strong></h3>
<p>è‡ªåŠ¨æ‰¹é‡ä¿®æ”¹è¯·æ±‚æˆ–å“åº”å†…å®¹ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>æ›¿æ¢Headeræˆ–å‚æ•°ï¼›</li>
<li>è°ƒè¯•æ–°APIç‰ˆæœ¬ï¼›</li>
<li>æ‰¹é‡åˆ‡æ¢æµ‹è¯•ç¯å¢ƒã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-12"><strong>Throttleï¼ˆé™é€ŸåŠŸèƒ½ï¼‰</strong></h3>
<p>æ¨¡æ‹Ÿä¸åŒç½‘ç»œç¯å¢ƒï¼š
3Gã€4Gã€Wi-Fiæˆ–è‡ªå®šä¹‰å¸¦å®½ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>æµ‹è¯•Appå¼±ç½‘è¡¨ç°ï¼›</li>
<li>åˆ†ææ¥å£è¶…æ—¶é—®é¢˜ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-13"><strong>Map Remoteï¼ˆè¿œç¨‹æ˜ å°„ï¼‰</strong></h3>
<p>å°†è¯·æ±‚é‡å®šå‘åˆ°ä¸åŒç¯å¢ƒï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs">api.test.com â†’ api.pre.com
</code></pre>
<p>æ–¹ä¾¿åœ¨å¤šä¸ªæœåŠ¡å™¨ç¯å¢ƒé—´å¿«é€Ÿåˆ‡æ¢ã€‚</p>
<hr/>
<h2 data-id="heading-14">å…­ã€çœŸå®æ¡ˆä¾‹ï¼šCharleså¦‚ä½•å¸®æˆ‘è§£å†³ä¸€ä¸ªæ£˜æ‰‹Bug</h2>
<p>åœ¨ä¸€æ¬¡ç§»åŠ¨ç«¯é¡¹ç›®ä¸­ï¼Œæµ‹è¯•åé¦ˆï¼š</p>
<blockquote>
<p>â€œAndroidç‰ˆæœ¬çš„æ”¯ä»˜æ¥å£è¿”å›è¶…æ—¶ï¼Œä½†iOSæ­£å¸¸ã€‚â€</p>
</blockquote>
<p>æˆ‘ä»¬ä½¿ç”¨CharlesæŠ“åŒ…åˆ†æï¼š</p>
<ul>
<li>è¯·æ±‚è·¯å¾„ä¸€è‡´ï¼›</li>
<li>å‚æ•°ç›¸åŒï¼›</li>
<li>ä½†Androidè¯·æ±‚è€—æ—¶å¼‚å¸¸ï¼Œå»¶è¿Ÿè¿‘2ç§’ã€‚</li>
</ul>
<p>è¿›ä¸€æ­¥åˆ†æTimelineåå‘ç°ï¼š
Androidç«¯åœ¨è¯·æ±‚Headerä¸­å¤šå¸¦äº†ä¸€ä¸ª <code>X-Request-ID</code>ï¼Œå¯¼è‡´CDNç¼“å­˜æœªå‘½ä¸­ã€‚</p>
<p>ä¿®æ”¹Headeråï¼Œè¯·æ±‚æ¢å¤æ­£å¸¸ã€‚</p>
<blockquote>
<p>è¿™å°±æ˜¯Charlesçš„å¨åŠ›ï¼šå®ƒä¸ä»…å¸®ä½ â€œçœ‹åˆ°é—®é¢˜â€ï¼Œè¿˜è®©ä½ â€œç†è§£é—®é¢˜â€ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-15">ä¸ƒã€CharlesæŠ“åŒ…çš„é«˜æ•ˆä½¿ç”¨æŠ€å·§</h2>



































<table><thead><tr><th>åŠŸèƒ½</th><th>æ“ä½œè·¯å¾„</th><th>å…¸å‹ç”¨é€”</th></tr></thead><tbody><tr><td><strong>Session Filter</strong></td><td>View â†’ Filter</td><td>åªçœ‹ç›®æ ‡æ¥å£è¯·æ±‚</td></tr><tr><td><strong>Repeat / Advanced Repeat</strong></td><td>å³é”®è¯·æ±‚ â†’ Repeat</td><td>æ¥å£é‡æ”¾æˆ–å‹åŠ›æµ‹è¯•</td></tr><tr><td><strong>Export Session</strong></td><td>File â†’ Export</td><td>å¯¼å‡ºæ—¥å¿—å¤ç°é—®é¢˜</td></tr><tr><td><strong>No Caching</strong></td><td>Proxy â†’ No Caching</td><td>ç¦æ­¢ç¼“å­˜è·å–çœŸå®è¯·æ±‚</td></tr><tr><td><strong>Focus</strong></td><td>Command + F</td><td>å¿«é€Ÿæœç´¢å…³é”®å­—</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-16">å…«ã€CharlesæŠ“åŒ…å¸¸è§é—®é¢˜</h2>






























<table><thead><tr><th>é—®é¢˜</th><th>åŸå› </th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>æ— æ³•æŠ“å–HTTPS</td><td>æœªå®‰è£…ä¿¡ä»»è¯ä¹¦</td><td>é‡æ–°å®‰è£…Charles Root CA</td></tr><tr><td>æ‰‹æœºè¿æ¥å¤±è´¥</td><td>ä¸åŒWi-Fiæˆ–ç«¯å£é”™è¯¯</td><td>æ£€æŸ¥ä»£ç†è®¾ç½®ä¸é˜²ç«å¢™</td></tr><tr><td>è¯·æ±‚ä¹±ç </td><td>å“åº”è¢«å‹ç¼©</td><td>å¯ç”¨â€œDecode compressed contentâ€</td></tr><tr><td>Appæ— æ³•ä¿¡ä»»</td><td>SSL Pinningæœºåˆ¶</td><td>ä½¿ç”¨å¼€å‘åŒ…æˆ–å…³é—­è¯ä¹¦æ ¡éªŒ</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-17">ä¹ã€å»¶ä¼¸é˜…è¯»ä¸ä¸­æ–‡èµ„æº</h2>
<p>æ›´å¤šCharlesæ•™ç¨‹ã€å®æˆ˜æ¡ˆä¾‹ä¸å›¾æ–‡é…ç½®æŒ‡å—è¯·è®¿é—®<a href="https://link.juejin.cn?target=https%3A%2F%2Fcharlesproxy.net%2F" target="_blank" title="https://charlesproxy.net/" ref="nofollow noopener noreferrer">Charlesä¸­æ–‡ç½‘</a></p>
<p>æä¾›ï¼š</p>
<ul>
<li>ä¸­æ–‡å®‰è£…æ•™ç¨‹</li>
<li>HTTPSè¯ä¹¦é…ç½®è¯´æ˜</li>
<li>Rewriteä¸Mockæ¨¡æ¿</li>
<li>ç§»åŠ¨ç«¯æŠ“åŒ…å›¾æ–‡æµç¨‹</li>
</ul>
<hr/>
<h2 data-id="heading-18">Charlesï¼Œæ˜¯å¼€å‘è€…çš„â€œç³»ç»Ÿå¬è¯Šå™¨â€</h2>
<p>ç°ä»£è½¯ä»¶ç³»ç»Ÿè¶Šæ¥è¶Šå¤æ‚ï¼Œä½†ç½‘ç»œå±‚çš„æ¯ä¸€æ¬¡è¯·æ±‚ã€æ¯ä¸€ä¸ªå»¶è¿Ÿã€æ¯ä¸€æ¡Headerï¼Œéƒ½éšè—ç€é—®é¢˜çš„çº¿ç´¢ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RocketMQæœ¬åœ°æ¶ˆæ¯è¡¨ï¼šç”Ÿäº§ç¯å¢ƒä¸‹çš„åˆ†å¸ƒå¼äº‹åŠ¡æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7571334572769427499</link>    <guid>https://juejin.cn/post/7571334572769427499</guid>    <pubDate>2025-11-12T01:49:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571334572769427499" data-draft-id="7571334572769411115" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RocketMQæœ¬åœ°æ¶ˆæ¯è¡¨ï¼šç”Ÿäº§ç¯å¢ƒä¸‹çš„åˆ†å¸ƒå¼äº‹åŠ¡æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="RocketMQ"/> <meta itemprop="datePublished" content="2025-11-12T01:49:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RocketMQæœ¬åœ°æ¶ˆæ¯è¡¨ï¼šç”Ÿäº§ç¯å¢ƒä¸‹çš„åˆ†å¸ƒå¼äº‹åŠ¡æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T01:49:02.000Z" title="Wed Nov 12 2025 01:49:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">RocketMQæœ¬åœ°æ¶ˆæ¯è¡¨ï¼šç”Ÿäº§ç¯å¢ƒä¸‹çš„åˆ†å¸ƒå¼äº‹åŠ¡æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸‹ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡ä¸€ç›´æ˜¯ä¸ªè®©äººå¤´ç–¼çš„é—®é¢˜ã€‚RocketMQè™½ç„¶æä¾›äº†äº‹åŠ¡æ¶ˆæ¯æœºåˆ¶ï¼Œä½†åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œæœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆåè€Œæ›´åŠ ç¨³å®šå¯é ã€‚è¿™ç¯‡æ–‡ç« ä¼šä»å®æˆ˜è§’åº¦ï¼Œå’Œå¤§å®¶èŠèŠæˆ‘åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨æœ¬åœ°æ¶ˆæ¯è¡¨çš„ç»éªŒï¼ŒåŒ…æ‹¬è¸©è¿‡çš„å‘å’Œæ€»ç»“çš„æœ€ä½³å®è·µã€‚</p>
<h3 data-id="heading-2">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦æœ¬åœ°æ¶ˆæ¯è¡¨ï¼Ÿ</h3>
<h4 data-id="heading-3">1.1 RocketMQäº‹åŠ¡æ¶ˆæ¯çš„å±€é™æ€§</h4>
<p>å…ˆè¯´è¯´RocketMQè‡ªå¸¦çš„äº‹åŠ¡æ¶ˆæ¯ã€‚å®ƒçš„æµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant ä¸šåŠ¡ç³»ç»Ÿ
    participant MQç”Ÿäº§è€…
    participant MQæœåŠ¡å™¨
    participant MQæ¶ˆè´¹è€…
    
    ä¸šåŠ¡ç³»ç»Ÿ-&gt;&gt;MQç”Ÿäº§è€…: 1.å‘é€åŠæ¶ˆæ¯
    MQç”Ÿäº§è€…-&gt;&gt;MQæœåŠ¡å™¨: 2.åŠæ¶ˆæ¯(Send OK)
    MQæœåŠ¡å™¨--&gt;&gt;MQç”Ÿäº§è€…: 3.åŠæ¶ˆæ¯å·²å­˜å‚¨
    
    MQç”Ÿäº§è€…-&gt;&gt;ä¸šåŠ¡ç³»ç»Ÿ: 4.æ‰§è¡Œæœ¬åœ°äº‹åŠ¡
    
    alt æœ¬åœ°äº‹åŠ¡æˆåŠŸ
        ä¸šåŠ¡ç³»ç»Ÿ-&gt;&gt;MQç”Ÿäº§è€…: 5.Commit
        MQç”Ÿäº§è€…-&gt;&gt;MQæœåŠ¡å™¨: 6.æäº¤æ¶ˆæ¯
        MQæœåŠ¡å™¨-&gt;&gt;MQæ¶ˆè´¹è€…: 7.æŠ•é€’æ¶ˆæ¯
    else æœ¬åœ°äº‹åŠ¡å¤±è´¥
        ä¸šåŠ¡ç³»ç»Ÿ-&gt;&gt;MQç”Ÿäº§è€…: 5.Rollback
        MQç”Ÿäº§è€…-&gt;&gt;MQæœåŠ¡å™¨: 6.å›æ»šæ¶ˆæ¯
    end
    
    Note over MQæœåŠ¡å™¨,MQç”Ÿäº§è€…: å›æŸ¥æœºåˆ¶ï¼šå¦‚æœé•¿æ—¶é—´æœªæ”¶åˆ°ç¡®è®¤
    MQæœåŠ¡å™¨-&gt;&gt;MQç”Ÿäº§è€…: 7.å›æŸ¥äº‹åŠ¡çŠ¶æ€
    MQç”Ÿäº§è€…-&gt;&gt;ä¸šåŠ¡ç³»ç»Ÿ: 8.æŸ¥è¯¢æœ¬åœ°äº‹åŠ¡
    ä¸šåŠ¡ç³»ç»Ÿ--&gt;&gt;MQç”Ÿäº§è€…: 9.è¿”å›äº‹åŠ¡çŠ¶æ€
</code></pre>
<p>çœ‹èµ·æ¥æŒºå®Œç¾ï¼Œä½†å®é™…ç”¨ä¸‹æ¥æœ‰å‡ ä¸ªé—®é¢˜ï¼š</p>
<p><strong>é—®é¢˜ä¸€ï¼šå›æŸ¥æœºåˆ¶ä¸å¤Ÿçµæ´»</strong></p>
<p>æˆ‘ä»¬æœ‰ä¸ªè®¢å•ç³»ç»Ÿï¼Œä¸‹å•åéœ€è¦å‘æ¶ˆæ¯ç»™åº“å­˜ç³»ç»Ÿæ‰£å‡åº“å­˜ã€‚ç”¨RocketMQäº‹åŠ¡æ¶ˆæ¯æ—¶ï¼Œé‡åˆ°äº†ä¸€ä¸ªå°´å°¬çš„åœºæ™¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è¿™ç§æƒ…å†µä¸‹å›æŸ¥ä¼šå¾ˆéº»çƒ¦</span>
<span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">(OrderDTO dto)</span> {
    <span class="hljs-comment">// 1. æ’å…¥è®¢å•</span>
    orderMapper.insert(order);
    
    <span class="hljs-comment">// 2. æ’å…¥è®¢å•æ˜ç»†ï¼ˆå¯èƒ½æœ‰å¤šæ¡ï¼‰</span>
    orderDetailMapper.batchInsert(details);
    
    <span class="hljs-comment">// 3. æ‰£å‡ä¼˜æƒ åˆ¸</span>
    couponService.deduct(dto.getCouponId());
    
    <span class="hljs-comment">// 4. å‘é€æ¶ˆæ¯</span>
    <span class="hljs-comment">// é—®é¢˜æ¥äº†ï¼šå›æŸ¥æ—¶æ€ä¹ˆåˆ¤æ–­è¿™ä¸€å †æ“ä½œéƒ½æˆåŠŸäº†ï¼Ÿ</span>
}
</code></pre>
<p>å›æŸ¥å‡½æ•°éœ€è¦åˆ¤æ–­è®¢å•ã€æ˜ç»†ã€ä¼˜æƒ åˆ¸éƒ½å¤„ç†å®Œäº†ï¼Œå†™èµ·æ¥å¾ˆåˆ«æ‰­ã€‚</p>
<p><strong>é—®é¢˜äºŒï¼šHALFæ¶ˆæ¯ä¸»é¢˜æ›¿æ¢ï¼Œå¯¼è‡´ä¸šåŠ¡é€»è¾‘æ··ä¹±</strong></p>
<p>RocketMQçš„HALFæ¶ˆæ¯ä¼šæŠŠåŸtopicæ›¿æ¢æˆ<code>RMQ_SYS_TRANS_HALF_TOPIC</code>ï¼Œè¿™åœ¨æŸäº›ç›‘æ§åœºæ™¯ä¸‹ä¼šå¾ˆéº»çƒ¦ã€‚æˆ‘ä»¬çš„APMç³»ç»Ÿæ˜¯æŒ‰topicç»Ÿè®¡æ¶ˆæ¯é‡çš„ï¼ŒHALFæ¶ˆæ¯ä¼šè¢«ç»Ÿè®¡åˆ°ç³»ç»Ÿtopicä¸‹ï¼Œä¸šåŠ¡topicçš„æ•°æ®å°±å¯¹ä¸ä¸Šäº†ã€‚</p>
<p><strong>é—®é¢˜ä¸‰ï¼šOPæ¶ˆæ¯åªè®°å½•ä¸é‡æ–°æŠ•é€’</strong></p>
<p>OPæ¶ˆæ¯ï¼ˆæ“ä½œæ¶ˆæ¯ï¼‰åœ¨Commitåä¼šé‡æ–°æŠ•é€’ï¼Œä½†Rollbackæ—¶åªè®°å½•æ—¥å¿—ï¼Œä¸ä¼šé‡è¯•ã€‚è¿™æ„å‘³ç€å¦‚æœä½ çš„ä¸šåŠ¡éœ€è¦æ”¯æŒæ¶ˆæ¯è¡¥å¿ï¼ŒRocketMQäº‹åŠ¡æ¶ˆæ¯å¸®ä¸ä¸Šå¿™ã€‚</p>
<h4 data-id="heading-4">1.2 æœ¬åœ°æ¶ˆæ¯è¡¨çš„ä¼˜åŠ¿</h4>
<p>åŸºäºè¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬è½¬å‘äº†æœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆã€‚æ ¸å¿ƒæ€è·¯å¾ˆç®€å•ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ä¸šåŠ¡æ“ä½œ] --&gt;|åŒä¸€äº‹åŠ¡| B[æ’å…¥æ¶ˆæ¯è¡¨]
    B --&gt; C[åå°ä»»åŠ¡æ‰«æ]
    C --&gt; D[å‘é€åˆ°MQ]
    D --&gt; E[æ›´æ–°æ¶ˆæ¯çŠ¶æ€]
    
    style A fill:#e1f5ff
    style B fill:#e1f5ff
    style C fill:#fff4e1
    style D fill:#fff4e1
    style E fill:#e8f5e9
</code></pre>
<p><strong>æŠŠæ¶ˆæ¯å‘é€å’Œä¸šåŠ¡æ“ä½œæ”¾åœ¨åŒä¸€ä¸ªæœ¬åœ°äº‹åŠ¡é‡Œï¼Œåˆ©ç”¨æ•°æ®åº“çš„ACIDç‰¹æ€§ä¿è¯ä¸€è‡´æ€§</strong>ã€‚</p>
<p>ç›¸æ¯”RocketMQäº‹åŠ¡æ¶ˆæ¯ï¼Œå®ƒæœ‰è¿™äº›å¥½å¤„ï¼š</p>
<ol>
<li><strong>äº‹åŠ¡ä¿è¯æ›´å½»åº•</strong>ï¼šä¸šåŠ¡æ•°æ®å’Œæ¶ˆæ¯æ•°æ®è¦ä¹ˆä¸€èµ·æˆåŠŸï¼Œè¦ä¹ˆä¸€èµ·å¤±è´¥</li>
<li><strong>å›æŸ¥é€»è¾‘ç®€å•</strong>ï¼šç›´æ¥æŸ¥æ¶ˆæ¯è¡¨çŠ¶æ€å°±è¡Œï¼Œä¸éœ€è¦åæ¨ä¸šåŠ¡çŠ¶æ€</li>
<li><strong>æ”¯æŒæ¶ˆæ¯è¡¥å¿</strong>ï¼šæ¶ˆæ¯è¡¨å¯ä»¥è®°å½•è¯¦ç»†çš„å‘é€å†å²ï¼Œæ–¹ä¾¿æ’æŸ¥å’Œé‡è¯•</li>
<li><strong>é™ä½MQä¾èµ–</strong>ï¼šMQæš‚æ—¶ä¸å¯ç”¨æ—¶ï¼Œæ¶ˆæ¯ä¼šç§¯å‹åœ¨è¡¨é‡Œï¼Œä¸å½±å“ä¸šåŠ¡ä¸»æµç¨‹</li>
</ol>
<h3 data-id="heading-5">äºŒã€æœ¬åœ°æ¶ˆæ¯è¡¨çš„æ ¸å¿ƒåŸç†</h3>
<h4 data-id="heading-6">2.1 æ•´ä½“æ¶æ„</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph æœåŠ¡å±‚
        A[è®¢å•æœåŠ¡] 
    end
    
    subgraph æ•°æ®åº“
        B[ä¸šåŠ¡è¡¨&lt;br/&gt;orders] 
        C[æ¶ˆæ¯è¡¨&lt;br/&gt;mq_messages]
    end
    
    subgraph æ¶ˆæ¯å‘é€å±‚
        D[æ¶ˆæ¯å‘é€é˜Ÿåˆ—&lt;br/&gt;å†…å­˜é˜Ÿåˆ—]
        E[æ¶ˆæ¯å¤„ç†å™¨&lt;br/&gt;MsgProcessor]
    end
    
    subgraph MQé›†ç¾¤
        F[RocketMQ&lt;br/&gt;Broker]
    end
    
    subgraph è¡¥å¿æœºåˆ¶
        G[å®šæ—¶ä»»åŠ¡&lt;br/&gt;æ‰«æè¶…æ—¶æ¶ˆæ¯]
    end
    
    A --&gt;|1.å†™å…¥| B
    A --&gt;|2.å†™å…¥| C
    C --&gt;|3.æ”¾å…¥| D
    D --&gt;|4.å¼‚æ­¥å‘é€| E
    E --&gt;|5.å‘é€| F
    F --&gt;|6.å“åº”| E
    E --&gt;|7.æ›´æ–°çŠ¶æ€| C
    G --&gt;|8.æ‰«æ| C
    G --&gt;|9.é‡æ–°å‘é€| D
    
    style A fill:#e3f2fd
    style B fill:#fff3e0
    style C fill:#fff3e0
    style D fill:#f3e5f5
    style E fill:#f3e5f5
    style F fill:#e8f5e9
    style G fill:#fce4ec
</code></pre>
<p>æ•´ä¸ªæµç¨‹åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p>
<p><strong>é˜¶æ®µä¸€ï¼šä¸šåŠ¡+æ¶ˆæ¯å†™å…¥ï¼ˆåŒæ­¥ï¼‰</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> Long <span class="hljs-title function_">createOrder</span><span class="hljs-params">(OrderDTO dto)</span> {
    <span class="hljs-comment">// 1. å†™ä¸šåŠ¡è¡¨</span>
    <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> buildOrder(dto);
    orderMapper.insert(order);
    
    <span class="hljs-comment">// 2. å†™æ¶ˆæ¯è¡¨ï¼ˆåŒä¸€äº‹åŠ¡ï¼‰</span>
    <span class="hljs-type">MqMessage</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MqMessage</span>();
    msg.setTopic(<span class="hljs-string">"order_created"</span>);
    msg.setContent(JSON.toJSONString(order));
    msg.setStatus(<span class="hljs-number">0</span>); <span class="hljs-comment">// å¾…å‘é€</span>
    mqMessageMapper.insert(msg);
    
    <span class="hljs-comment">// 3. æ”¾å…¥å†…å­˜é˜Ÿåˆ—ï¼ˆä¸é˜»å¡ä¸»æµç¨‹ï¼‰</span>
    msgQueue.offer(msg);
    
    <span class="hljs-keyword">return</span> order.getId();
}
</code></pre>
<p><strong>é˜¶æ®µäºŒï¼šå¼‚æ­¥å‘é€MQ</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åå°çº¿ç¨‹ä¸æ–­ä»é˜Ÿåˆ—å–æ¶ˆæ¯å‘é€</span>
<span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
    <span class="hljs-type">MqMessage</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> msgQueue.poll(<span class="hljs-number">1</span>, TimeUnit.SECONDS);
    <span class="hljs-keyword">if</span> (msg != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">try</span> {
            producer.send(msg);
            <span class="hljs-comment">// å‘é€æˆåŠŸï¼Œæ›´æ–°çŠ¶æ€</span>
            mqMessageMapper.updateStatus(msg.getId(), <span class="hljs-number">1</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// å‘é€å¤±è´¥ï¼Œå¢åŠ é‡è¯•æ¬¡æ•°</span>
            mqMessageMapper.incrRetryCount(msg.getId());
        }
    }
}
</code></pre>
<p><strong>é˜¶æ®µä¸‰ï¼šå…œåº•è¡¥å¿ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Scheduled(cron = "0 */5 * * * ?")</span> <span class="hljs-comment">// æ¯5åˆ†é’Ÿæ‰§è¡Œ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">retryFailedMessages</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// æŸ¥è¯¢çŠ¶æ€=0ä¸”è¶…è¿‡5åˆ†é’Ÿçš„æ¶ˆæ¯</span>
    List&lt;MqMessage&gt; list = mqMessageMapper.selectTimeout(<span class="hljs-number">5</span>);
    <span class="hljs-keyword">for</span> (MqMessage msg : list) {
        msgQueue.offer(msg); <span class="hljs-comment">// é‡æ–°æ”¾å…¥é˜Ÿåˆ—</span>
    }
}
</code></pre>
<h4 data-id="heading-7">2.2 æ¶ˆæ¯çŠ¶æ€æµè½¬</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">stateDiagram-v2
    [*] --&gt; å¾…å‘é€: åˆ›å»ºæ¶ˆæ¯
    å¾…å‘é€ --&gt; å‘é€ä¸­: å–å‡ºå‘é€
    å‘é€ä¸­ --&gt; å·²å‘é€: å‘é€æˆåŠŸ
    å‘é€ä¸­ --&gt; å¾…å‘é€: å‘é€å¤±è´¥(é‡è¯•)
    å¾…å‘é€ --&gt; å‘é€å¤±è´¥: è¶…è¿‡æœ€å¤§é‡è¯•æ¬¡æ•°
    å‘é€å¤±è´¥ --&gt; å¾…å‘é€: äººå·¥ä»‹å…¥é‡è¯•
    å·²å‘é€ --&gt; [*]
    
    note right of å¾…å‘é€
        status=0
        å¯ä»¥è¢«å®šæ—¶ä»»åŠ¡æ‰«æ
    end note
    
    note right of å·²å‘é€
        status=1
        æœ€ç»ˆçŠ¶æ€
    end note
    
    note right of å‘é€å¤±è´¥
        status=2
        éœ€è¦äººå·¥æ’æŸ¥
    end note
</code></pre>
<h3 data-id="heading-8">ä¸‰ã€æ ¸å¿ƒä»£ç å®ç°</h3>
<h4 data-id="heading-9">3.1 æ¶ˆæ¯è¡¨è®¾è®¡</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> mq_messages (
    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ä¸»é”®'</span>,
    content <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ¶ˆæ¯å†…å®¹'</span>,
    topic <span class="hljs-type">CHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ¶ˆæ¯ä¸»é¢˜'</span>,
    tag <span class="hljs-type">CHAR</span>(<span class="hljs-number">64</span>) COMMENT <span class="hljs-string">'æ¶ˆæ¯æ ‡ç­¾'</span>,
    status TINYINT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'çŠ¶æ€ï¼š0-å¾…å‘é€ 1-å·²å‘é€ 2-å‘é€å¤±è´¥'</span>,
    retry_count <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'é‡è¯•æ¬¡æ•°'</span>,
    max_retry <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">3</span> COMMENT <span class="hljs-string">'æœ€å¤§é‡è¯•æ¬¡æ•°'</span>,
    next_retry_time <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ä¸‹æ¬¡é‡è¯•æ—¶é—´'</span>,
    create_time <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´'</span>,
    <span class="hljs-keyword">PRIMARY</span> KEY (id),
    INDEX idx_status_next_retry (status, next_retry_time)
) COMMENT <span class="hljs-string">'äº‹åŠ¡æ¶ˆæ¯è¡¨'</span>;
</code></pre>
<p>å‡ ä¸ªè®¾è®¡è¦ç‚¹ï¼š</p>
<ol>
<li><strong>statuså­—æ®µ</strong>ï¼šç”¨TINYINTèŠ‚çœç©ºé—´ï¼Œ0/1/2ä¸‰ä¸ªçŠ¶æ€è¶³å¤Ÿ</li>
<li><strong>retry_count</strong>ï¼šè®°å½•é‡è¯•æ¬¡æ•°ï¼Œé¿å…æ— é™é‡è¯•</li>
<li><strong>next_retry_time</strong>ï¼šé‡‡ç”¨å»¶è¿Ÿé€’å¢ç­–ç•¥ï¼ˆ0ç§’ã€5ç§’ã€10ç§’ã€25ç§’...ï¼‰</li>
<li><strong>ç´¢å¼•è®¾è®¡</strong>ï¼š<code>(status, next_retry_time)</code> è”åˆç´¢å¼•ï¼Œå®šæ—¶ä»»åŠ¡æ‰«ææ•ˆç‡é«˜</li>
</ol>
<h4 data-id="heading-10">3.2 æ¶ˆæ¯å®¢æˆ·ç«¯å°è£…</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MybatisTransactionMsgClient</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">TransactionMsgClient</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> SqlSessionTemplate sessionTemplate;
    
    <span class="hljs-comment">/**
     * å‘é€æ¶ˆæ¯ï¼ˆæ ¸å¿ƒæ–¹æ³•ï¼‰
     * 1. æ£€æŸ¥äº‹åŠ¡çŠ¶æ€
     * 2. æ’å…¥æ¶ˆæ¯è¡¨
     * 3. å‘é€åˆ°MQ
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">sendMsg</span><span class="hljs-params">(Connection con, String content, 
                        String topic, String tag)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">Long</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        
        <span class="hljs-comment">// 1. æ ¡éªŒäº‹åŠ¡çŠ¶æ€</span>
        <span class="hljs-keyword">if</span> (!con.getAutoCommit()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"è¿æ¥ä¸åœ¨äº‹åŠ¡ä¸­"</span>);
        }
        
        <span class="hljs-comment">// 2. æ ¡éªŒå‚æ•°</span>
        <span class="hljs-keyword">if</span> (content == <span class="hljs-literal">null</span> || content.isEmpty() || 
            topic == <span class="hljs-literal">null</span> || topic.isEmpty()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Exception</span>(<span class="hljs-string">"æ¶ˆæ¯å†…å®¹æˆ–ä¸»é¢˜ä¸ºç©º"</span>);
        }
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 3. æ’å…¥æ¶ˆæ¯è®°å½•</span>
            Map&lt;Long, String&gt; idUrlPair = 
                MsgStorage.insertMsg(con, content, topic, tag);
            id = idUrlPair.getKey();
            
            <span class="hljs-comment">// 4. æ”¾å…¥å†…å­˜é˜Ÿåˆ—ï¼ˆéé˜»å¡ï¼‰</span>
            <span class="hljs-type">Msg</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Msg</span>(id, idUrlPair.getValue());
            putMsg(msg);
            
            <span class="hljs-keyword">return</span> id;
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"å‘é€æ¶ˆæ¯å¤±è´¥ topic={} tag={}"</span>, topic, tag, e);
            <span class="hljs-keyword">throw</span> e;
        }
    }
    
    <span class="hljs-comment">/**
     * æ¶ˆæ¯å¤„ç†çº¿ç¨‹
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MsgProcessorRunnable</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-comment">// ä»é˜Ÿåˆ—å–æ¶ˆæ¯ï¼ˆå¸¦è¶…æ—¶ï¼‰</span>
                    <span class="hljs-type">Msg</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> msgQueue.poll(
                        getTimeoutMs(), TimeUnit.MILLISECONDS);
                    
                    <span class="hljs-keyword">if</span> (msg == <span class="hljs-literal">null</span>) {
                        <span class="hljs-keyword">continue</span>;
                    }
                    
                    <span class="hljs-comment">// æŸ¥è¯¢æ¶ˆæ¯è¯¦æƒ…</span>
                    <span class="hljs-type">MsgInfo</span> <span class="hljs-variable">msgInfo</span> <span class="hljs-operator">=</span> MsgStorage.getMsgById(msg);
                    <span class="hljs-keyword">if</span> (msgInfo == <span class="hljs-literal">null</span>) {
                        log.warn(<span class="hljs-string">"æ¶ˆæ¯ä¸å­˜åœ¨ msgId={}"</span>, msg.getIdUrlPair());
                        <span class="hljs-keyword">continue</span>;
                    }
                    
                    <span class="hljs-comment">// æ„å»ºMQæ¶ˆæ¯</span>
                    <span class="hljs-type">Message</span> <span class="hljs-variable">mqMsg</span> <span class="hljs-operator">=</span> buildMsg(msgInfo);
                    
                    <span class="hljs-comment">// å‘é€åˆ°MQ</span>
                    <span class="hljs-type">SendResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> producer.send(mqMsg);
                    
                    <span class="hljs-comment">// æ ¹æ®ç»“æœæ›´æ–°çŠ¶æ€</span>
                    <span class="hljs-keyword">if</span> (result != <span class="hljs-literal">null</span> &amp;&amp; 
                        result.getSendStatus() == SendStatus.SEND_OK) {
                        <span class="hljs-comment">// æˆåŠŸï¼Œæ›´æ–°ä¸ºå·²å‘é€</span>
                        MsgStorage.updateMsgStatus(msg);
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-comment">// å¤±è´¥ï¼Œè®¡ç®—ä¸‹æ¬¡é‡è¯•æ—¶é—´</span>
                        handleSendFailure(msg, msgInfo);
                    }
                    
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    log.error(<span class="hljs-string">"æ¶ˆæ¯å¤„ç†çº¿ç¨‹è¢«ä¸­æ–­"</span>, e);
                    <span class="hljs-keyword">break</span>;
                } <span class="hljs-keyword">catch</span> (Exception e) {
                    log.error(<span class="hljs-string">"å¤„ç†æ¶ˆæ¯å¼‚å¸¸"</span>, e);
                }
            }
        }
    }
    
    <span class="hljs-comment">/**
     * å¤„ç†å‘é€å¤±è´¥çš„æ¶ˆæ¯
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleSendFailure</span><span class="hljs-params">(Msg msg, MsgInfo msgInfo)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">dealedTime</span> <span class="hljs-operator">=</span> msgInfo.getHaveDealtimes() + <span class="hljs-number">1</span>;
        
        <span class="hljs-keyword">if</span> (dealedTime &lt; MAX_DEAL_TIME) {
            <span class="hljs-comment">// è¿˜æ²¡è¶…è¿‡æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œè®¡ç®—ä¸‹æ¬¡é‡è¯•æ—¶é—´</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">nextExpireTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis() + 
                timeOutData[dealedTime] * <span class="hljs-number">1000</span>;
            
            msgInfo.setNextExpireTime(nextExpireTime);
            msgInfo.setHaveDealtimes(dealedTime);
            
            <span class="hljs-comment">// æ”¾å…¥æ—¶é—´è½®ç­‰å¾…</span>
            timewheelQueue.put(msg);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// è¶…è¿‡æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œæ ‡è®°ä¸ºå¤±è´¥</span>
            log.error(<span class="hljs-string">"æ¶ˆæ¯å‘é€å¤±è´¥è¶…è¿‡æœ€å¤§æ¬¡æ•° msgId={}"</span>, 
                msg.getIdUrlPair());
            MsgStorage.updateMsgStatus(msg, <span class="hljs-number">2</span>); <span class="hljs-comment">// çŠ¶æ€æ”¹ä¸ºå¤±è´¥</span>
        }
    }
}
</code></pre>
<h4 data-id="heading-11">3.3 æ—¶é—´è½®å®ç°ï¼ˆå»¶è¿Ÿé‡è¯•ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æ—¶é—´è½®çº¿ç¨‹
 * è´Ÿè´£æ‰«æéœ€è¦é‡è¯•çš„æ¶ˆæ¯ï¼Œå¹¶æ”¾å›å‘é€é˜Ÿåˆ—
 */</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MsgTimewheelRunnable</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">if</span> (!state.get().equals(State.RUNNING)) {
                <span class="hljs-keyword">return</span>;
            }
            
            <span class="hljs-type">long</span> <span class="hljs-variable">currentTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
            <span class="hljs-type">Msg</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> timewheelQueue.peek();
            
            <span class="hljs-comment">// æ£€æŸ¥æ¶ˆæ¯æ˜¯å¦åˆ°è¾¾é‡è¯•æ—¶é—´</span>
            <span class="hljs-keyword">while</span> (msg != <span class="hljs-literal">null</span> &amp;&amp; 
                   msg.getNextExpireTime() &lt;= currentTime) {
                
                msg = timewheelQueue.poll();
                log.trace(<span class="hljs-string">"æ—¶é—´è½®å–å‡ºæ¶ˆæ¯ msgId={}"</span>, msg);
                
                <span class="hljs-comment">// é‡æ–°æ”¾å…¥å‘é€é˜Ÿåˆ—</span>
                msgQueue.put(msg);
                
                msg = timewheelQueue.peek();
            }
            
        } <span class="hljs-keyword">catch</span> (Exception ex) {
            log.error(<span class="hljs-string">"æ—¶é—´è½®å¤„ç†å¼‚å¸¸"</span>, ex);
        }
    }
}
</code></pre>
<h4 data-id="heading-12">3.4 ä¸šåŠ¡ä»£ç é›†æˆ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderMapper orderMapper;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> MybatisTransactionMsgClient transactionMsgClient;
    
    <span class="hljs-comment">/**
     * åˆ›å»ºè®¢å•
     * ä¸šåŠ¡æ•°æ®å’Œæ¶ˆæ¯åœ¨åŒä¸€äº‹åŠ¡ä¸­
     */</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">createOrder</span><span class="hljs-params">(OrderDTO dto)</span> <span class="hljs-keyword">throws</span> Exception {
        
        <span class="hljs-comment">// 1. æ’å…¥è®¢å•ï¼ˆä¸šåŠ¡æ•°æ®ï¼‰</span>
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>();
        order.setContent(dto.getContent());
        <span class="hljs-type">Long</span> <span class="hljs-variable">orderId</span> <span class="hljs-operator">=</span> orderMapper.insertOrder(order);
        
        <span class="hljs-comment">// 2. å‘é€æ¶ˆæ¯ï¼ˆåŒä¸€äº‹åŠ¡ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">msgContent</span> <span class="hljs-operator">=</span> JSON.toJSONString(order);
        <span class="hljs-type">Long</span> <span class="hljs-variable">msgId</span> <span class="hljs-operator">=</span> transactionMsgClient.sendMsg(
            msgContent, 
            <span class="hljs-string">"order_created_topic"</span>, 
            <span class="hljs-literal">null</span>
        );
        
        log.info(<span class="hljs-string">"è®¢å•åˆ›å»ºæˆåŠŸ orderId={} msgId={}"</span>, orderId, msgId);
        
        <span class="hljs-keyword">return</span> orderId;
    }
}
</code></pre>
<h3 data-id="heading-13">å››ã€ç”Ÿäº§ç¯å¢ƒè¸©è¿‡çš„å‘</h3>
<h4 data-id="heading-14">å‘1ï¼šæ¶ˆæ¯è¡¨å’Œä¸šåŠ¡è¡¨ä¸åœ¨åŒä¸€æ•°æ®åº“</h4>
<p><strong>åœºæ™¯å¤ç°</strong></p>
<p>æœ€å¼€å§‹æˆ‘ä»¬æ˜¯è¿™æ ·è®¾è®¡çš„ï¼š</p>
<ul>
<li>è®¢å•åº“ï¼š<code>order_db</code></li>
<li>æ¶ˆæ¯è¡¨ï¼š<code>common_db.mq_messages</code>ï¼ˆæ”¾åœ¨å…¬å…±åº“ï¼‰</li>
</ul>
<p>æƒ³æ³•å¾ˆç¾å¥½ï¼šæ‰€æœ‰ä¸šåŠ¡å…±ç”¨ä¸€å¼ æ¶ˆæ¯è¡¨ï¼Œç»Ÿä¸€ç®¡ç†ã€‚ç»“æœä¸Šçº¿ç¬¬ä¸€å¤©å°±å‡ºäº‹äº†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">(OrderDTO dto)</span> {
    <span class="hljs-comment">// 1. å†™è®¢å•åº“</span>
    orderMapper.insert(order); <span class="hljs-comment">// æ“ä½œ order_db</span>
    
    <span class="hljs-comment">// 2. å†™æ¶ˆæ¯è¡¨</span>
    msgMapper.insert(msg); <span class="hljs-comment">// æ“ä½œ common_db</span>
    
    <span class="hljs-comment">// é—®é¢˜ï¼šä¸¤ä¸ªåº“çš„æ“ä½œæ— æ³•ä¿è¯åŸå­æ€§ï¼</span>
}
</code></pre>
<p><strong>è¡¨ç°</strong>ï¼š</p>
<ul>
<li>è®¢å•åˆ›å»ºæˆåŠŸï¼Œä½†æ¶ˆæ¯æ²¡å‘å‡ºå»</li>
<li>æˆ–è€…æ¶ˆæ¯å‘äº†ï¼Œä½†è®¢å•å›æ»šäº†</li>
</ul>
<p><strong>æ ¹æœ¬åŸå› </strong>ï¼š</p>
<p>Springçš„<code>@Transactional</code>é»˜è®¤åªèƒ½ç®¡ç†å•ä¸ªæ•°æ®æºçš„äº‹åŠ¡ã€‚è·¨åº“æ“ä½œéœ€è¦åˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆXAã€Seataï¼‰ï¼Œä½†é‚£æ ·åˆæŠŠæ¶æ„æå¤æ‚äº†ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<p>æŠŠæ¶ˆæ¯è¡¨å’Œä¸šåŠ¡è¡¨æ”¾åˆ°åŒä¸€ä¸ªæ•°æ®åº“ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ¯ä¸ªä¸šåŠ¡åº“éƒ½å»ºä¸€å¼ æ¶ˆæ¯è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> order_db.mq_messages (...);
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> inventory_db.mq_messages (...);
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> payment_db.mq_messages (...);
</code></pre>
<p>è™½ç„¶æœ‰ç‚¹å†—ä½™ï¼Œä½†æ¢æ¥äº†äº‹åŠ¡çš„å¼ºä¸€è‡´æ€§ï¼Œè¿™ä¸ªä»£ä»·æ˜¯å€¼å¾—çš„ã€‚</p>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p>
<ol>
<li>æ¶ˆæ¯è¡¨å¿…é¡»å’Œä¸šåŠ¡è¡¨åœ¨åŒä¸€ä¸ªæ•°æ®åº“</li>
<li>å¦‚æœå®åœ¨è¦è·¨åº“ï¼Œå»ºè®®ç”¨Springçš„<code>ChainedTransactionManager</code>ï¼Œä½†è¦æ³¨æ„å®ƒä¸æ˜¯çœŸæ­£çš„ä¸¤é˜¶æ®µæäº¤</li>
<li>æˆ–è€…æ”¹ç”¨Seataçš„ATæ¨¡å¼ï¼Œä½†ä¼šå¢åŠ ç³»ç»Ÿå¤æ‚åº¦</li>
</ol>
<hr/>
<h4 data-id="heading-15">å‘2ï¼šå†…å­˜é˜Ÿåˆ—OOM</h4>
<p><strong>åœºæ™¯å¤ç°</strong></p>
<p>æˆ‘ä»¬çš„è®¢å•ç³»ç»Ÿåœ¨å¤§ä¿ƒæœŸé—´æŒ‚äº†ï¼Œçœ‹æ—¥å¿—å‘ç°æ˜¯OOMï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">java.lang.OutOfMemoryError: Java heap space</span>
    at java.util.concurrent.LinkedBlockingQueue.offer
</code></pre>
<p><strong>åŸå› åˆ†æ</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å†…å­˜é˜Ÿåˆ—æ— ç•Œï¼Œæ¶ˆæ¯ç§¯å‹å¯¼è‡´OOM</span>
<span class="hljs-keyword">private</span> BlockingQueue&lt;Msg&gt; msgQueue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;&gt;();

<span class="hljs-comment">// å¤§ä¿ƒæœŸé—´ï¼š</span>
<span class="hljs-comment">// 1. è®¢å•é‡æš´å¢ï¼š10ä¸‡/åˆ†é’Ÿ</span>
<span class="hljs-comment">// 2. MQå‘é€å˜æ…¢ï¼šç½‘ç»œæŠ–åŠ¨</span>
<span class="hljs-comment">// 3. é˜Ÿåˆ—ç§¯å‹ï¼šå‡ åä¸‡æ¡æ¶ˆæ¯</span>
<span class="hljs-comment">// 4. å†…å­˜çˆ†äº†ï¼šæ¯æ¡æ¶ˆæ¯1KBï¼Œå‡ ç™¾MBå°±æ²¡äº†</span>
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li><strong>æ”¹ç”¨æœ‰ç•Œé˜Ÿåˆ—</strong></li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è®¾ç½®é˜Ÿåˆ—ä¸Šé™</span>
<span class="hljs-keyword">private</span> BlockingQueue&lt;Msg&gt; msgQueue = 
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;&gt;(<span class="hljs-number">10000</span>);

<span class="hljs-comment">// é˜Ÿåˆ—æ»¡æ—¶çš„å¤„ç†ç­–ç•¥</span>
<span class="hljs-keyword">if</span> (!msgQueue.offer(msg, <span class="hljs-number">100</span>, TimeUnit.MILLISECONDS)) {
    log.warn(<span class="hljs-string">"æ¶ˆæ¯é˜Ÿåˆ—å·²æ»¡ï¼Œæ¶ˆæ¯å°†ç”±å®šæ—¶ä»»åŠ¡è¡¥å¿ msgId={}"</span>, msg.getId());
    <span class="hljs-comment">// ä¸æ”¾å…¥é˜Ÿåˆ—ï¼Œé å®šæ—¶ä»»åŠ¡å…œåº•</span>
}
</code></pre>
<ol start="2">
<li><strong>ç›‘æ§é˜Ÿåˆ—ç§¯å‹</strong></li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Scheduled(fixedRate = 60000)</span> <span class="hljs-comment">// æ¯åˆ†é’Ÿæ£€æŸ¥</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">monitorQueueSize</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> msgQueue.size();
    <span class="hljs-keyword">if</span> (size &gt; <span class="hljs-number">8000</span>) { <span class="hljs-comment">// 80%é˜ˆå€¼å‘Šè­¦</span>
        log.error(<span class="hljs-string">"æ¶ˆæ¯é˜Ÿåˆ—ç§¯å‹ä¸¥é‡ size={}"</span>, size);
        <span class="hljs-comment">// å‘é€å‘Šè­¦</span>
        alertService.send(<span class="hljs-string">"MQé˜Ÿåˆ—ç§¯å‹"</span>, size);
    }
}
</code></pre>
<ol start="3">
<li><strong>å¢åŠ æ¶ˆè´¹çº¿ç¨‹</strong></li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ ¹æ®é˜Ÿåˆ—ç§¯å‹æƒ…å†µåŠ¨æ€è°ƒæ•´çº¿ç¨‹æ•°</span>
<span class="hljs-keyword">private</span> <span class="hljs-type">ThreadPoolExecutor</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(
    <span class="hljs-number">5</span>,  <span class="hljs-comment">// æ ¸å¿ƒçº¿ç¨‹æ•°</span>
    <span class="hljs-number">20</span>, <span class="hljs-comment">// æœ€å¤§çº¿ç¨‹æ•°</span>
    <span class="hljs-number">60</span>, TimeUnit.SECONDS,
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;&gt;(<span class="hljs-number">100</span>),
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>.CallerRunsPolicy() <span class="hljs-comment">// é˜Ÿåˆ—æ»¡æ—¶è°ƒç”¨è€…æ‰§è¡Œ</span>
);
</code></pre>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p>
<ol>
<li>å†…å­˜é˜Ÿåˆ—å¿…é¡»è®¾ç½®ä¸Šé™ï¼Œæ¨èå€¼ï¼š<code>1ä¸‡ ~ 5ä¸‡</code></li>
<li>è®¾ç½®å‘Šè­¦é˜ˆå€¼ï¼ŒåŠæ—¶å‘ç°é—®é¢˜</li>
<li>é˜Ÿåˆ—æ»¡æ—¶å…è®¸ä¸¢å¼ƒï¼Œä¾èµ–å®šæ—¶ä»»åŠ¡è¡¥å¿</li>
<li>é‡è¦æ¶ˆæ¯å¯ä»¥è€ƒè™‘æŒä¹…åŒ–é˜Ÿåˆ—ï¼ˆå¦‚ç£ç›˜é˜Ÿåˆ—ï¼‰</li>
</ol>
<hr/>
<h4 data-id="heading-16">å‘3ï¼šæ¶ˆæ¯é‡å¤å‘é€</h4>
<p><strong>åœºæ™¯å¤ç°</strong></p>
<p>æœ‰ä¸ªç”¨æˆ·æŠ•è¯‰è¯´æ”¶åˆ°äº†5æ¡é‡å¤çš„ä¼˜æƒ åˆ¸ï¼ŒæŸ¥æ—¥å¿—å‘ç°æ¶ˆæ¯ç¡®å®å‘äº†5æ¬¡ã€‚</p>
<p><strong>åŸå› åˆ†æ</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é—®é¢˜ä»£ç </span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processMsg</span><span class="hljs-params">(Msg msg)</span> {
    <span class="hljs-comment">// 1. å‘é€åˆ°MQ</span>
    producer.send(mqMsg);
    
    <span class="hljs-comment">// 2. æ›´æ–°æ¶ˆæ¯çŠ¶æ€</span>
    msgMapper.updateStatus(msg.getId(), <span class="hljs-number">1</span>);
    
    <span class="hljs-comment">// é—®é¢˜ï¼šå¦‚æœç¬¬1æ­¥æˆåŠŸï¼Œç¬¬2æ­¥å¤±è´¥ï¼ˆç½‘ç»œè¶…æ—¶ã€æ•°æ®åº“å®•æœºï¼‰</span>
    <span class="hljs-comment">// å®šæ—¶ä»»åŠ¡ä¼šè®¤ä¸ºæ¶ˆæ¯æ²¡å‘é€ï¼Œå†æ¬¡å‘é€</span>
}
</code></pre>
<p><strong>æ—¶åºå›¾</strong>ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant å‘é€çº¿ç¨‹
    participant MQ
    participant æ•°æ®åº“
    participant å®šæ—¶ä»»åŠ¡
    
    å‘é€çº¿ç¨‹-&gt;&gt;MQ: 1. å‘é€æ¶ˆæ¯
    MQ--&gt;&gt;å‘é€çº¿ç¨‹: 2. å‘é€æˆåŠŸ
    å‘é€çº¿ç¨‹-&gt;&gt;æ•°æ®åº“: 3. æ›´æ–°çŠ¶æ€
    Note over æ•°æ®åº“: æ•°æ®åº“å‡æ­»ï¼Œæ›´æ–°å¤±è´¥
    
    å®šæ—¶ä»»åŠ¡-&gt;&gt;æ•°æ®åº“: 4. æŸ¥è¯¢status=0çš„æ¶ˆæ¯
    æ•°æ®åº“--&gt;&gt;å®šæ—¶ä»»åŠ¡: 5. è¿”å›è¯¥æ¶ˆæ¯
    å®šæ—¶ä»»åŠ¡-&gt;&gt;MQ: 6. å†æ¬¡å‘é€ï¼ˆé‡å¤ï¼‰
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<p>æ–¹æ¡ˆä¸€ï¼š<strong>æ¶ˆè´¹ç«¯åšå¹‚ç­‰</strong>ï¼ˆæ¨èï¼‰</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CouponConsumer</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RedisTemplate redisTemplate;
    
    <span class="hljs-meta">@RocketMQMessageListener(
        topic = "coupon_issue",
        consumerGroup = "coupon_consumer"
    )</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(String msgId, String content)</span> {
        <span class="hljs-comment">// 1. æ£€æŸ¥æ˜¯å¦å·²å¤„ç†</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"coupon:processed:"</span> + msgId;
        <span class="hljs-type">Boolean</span> <span class="hljs-variable">isProcessed</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue()
            .setIfAbsent(key, <span class="hljs-string">"1"</span>, <span class="hljs-number">7</span>, TimeUnit.DAYS);
        
        <span class="hljs-keyword">if</span> (Boolean.FALSE.equals(isProcessed)) {
            log.warn(<span class="hljs-string">"æ¶ˆæ¯å·²å¤„ç†ï¼Œè·³è¿‡ msgId={}"</span>, msgId);
            <span class="hljs-keyword">return</span>;
        }
        
        <span class="hljs-comment">// 2. ä¸šåŠ¡å¤„ç†</span>
        <span class="hljs-keyword">try</span> {
            couponService.issue(content);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// å¤„ç†å¤±è´¥ï¼Œåˆ é™¤æ ‡è®°ï¼Œå…è®¸é‡è¯•</span>
            redisTemplate.delete(key);
            <span class="hljs-keyword">throw</span> e;
        }
    }
}
</code></pre>
<p>æ–¹æ¡ˆäºŒï¼š<strong>å‘é€å‰å…ˆæŸ¥çŠ¶æ€</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processMsg</span><span class="hljs-params">(Msg msg)</span> {
    <span class="hljs-comment">// 1. å…ˆæŸ¥è¯¢æ¶ˆæ¯çŠ¶æ€</span>
    <span class="hljs-type">MsgInfo</span> <span class="hljs-variable">info</span> <span class="hljs-operator">=</span> msgMapper.selectById(msg.getId());
    <span class="hljs-keyword">if</span> (info.getStatus() == <span class="hljs-number">1</span>) {
        log.info(<span class="hljs-string">"æ¶ˆæ¯å·²å‘é€ï¼Œè·³è¿‡ msgId={}"</span>, msg.getId());
        <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-comment">// 2. å‘é€åˆ°MQ</span>
    producer.send(mqMsg);
    
    <span class="hljs-comment">// 3. æ›´æ–°çŠ¶æ€</span>
    msgMapper.updateStatus(msg.getId(), <span class="hljs-number">1</span>);
}
</code></pre>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p>
<ol>
<li><strong>æ¶ˆè´¹ç«¯åšå¹‚ç­‰æ˜¯ç‹é“</strong>ï¼Œç”¨Redisæˆ–æ•°æ®åº“å”¯ä¸€çº¦æŸ</li>
<li>å‘é€ç«¯å°½é‡é¿å…é‡å¤ï¼Œä½†ä¸å¼ºæ±‚100%å»é‡</li>
<li>ä¸šåŠ¡ä¸Šè¦å®¹å¿å°‘é‡é‡å¤ï¼Œè®¾è®¡æ—¶è€ƒè™‘å¹‚ç­‰æ€§</li>
</ol>
<hr/>
<h4 data-id="heading-17">å‘4ï¼šå®šæ—¶ä»»åŠ¡æ‰«æå‹åŠ›å¤§</h4>
<p><strong>åœºæ™¯å¤ç°</strong></p>
<p>ä¸Šçº¿ä¸€ä¸ªæœˆåï¼ŒDBAæ‰¾æˆ‘è¯´æ•°æ®åº“æ…¢æŸ¥è¯¢å‘Šè­¦ï¼Œå®šä½åˆ°æ˜¯å®šæ—¶ä»»åŠ¡çš„æ‰«æSQLï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ¯5åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> mq_messages 
<span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> <span class="hljs-number">0</span> 
  <span class="hljs-keyword">AND</span> create_time <span class="hljs-operator">&lt;</span> DATE_SUB(NOW(), <span class="hljs-type">INTERVAL</span> <span class="hljs-number">5</span> <span class="hljs-keyword">MINUTE</span>)
LIMIT <span class="hljs-number">1000</span>;
</code></pre>
<p>è¡¨é‡Œæœ‰300ä¸‡æ¡æ¶ˆæ¯ï¼Œè¿™ä¸ªæŸ¥è¯¢æ‰«æäº†å‡ åä¸‡è¡Œï¼Œæ•°æ®åº“CPUé£™åˆ°80%ã€‚</p>
<p><strong>åŸå› åˆ†æ</strong>ï¼š</p>
<ol>
<li>æ¶ˆæ¯è¡¨æ•°æ®é‡å¤ªå¤§ï¼Œå†å²æ¶ˆæ¯æ²¡æ¸…ç†</li>
<li><code>create_time</code>å­—æ®µæ²¡åŠ ç´¢å¼•</li>
<li>æ‰«æèŒƒå›´å¤ªå¤§</li>
</ol>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<p>æ–¹æ¡ˆä¸€ï¼š<strong>ä¼˜åŒ–ç´¢å¼•</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ·»åŠ è”åˆç´¢å¼•</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> mq_messages 
<span class="hljs-keyword">ADD</span> INDEX idx_status_time (status, create_time);

<span class="hljs-comment">-- æŸ¥è¯¢æ”¹å†™</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> mq_messages 
<span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> <span class="hljs-number">0</span> 
  <span class="hljs-keyword">AND</span> next_retry_time <span class="hljs-operator">&lt;=</span> NOW()  <span class="hljs-comment">-- æ”¹ç”¨ next_retry_time</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> next_retry_time
LIMIT <span class="hljs-number">1000</span>;
</code></pre>
<p>æ–¹æ¡ˆäºŒï¼š<strong>åˆ†åŒºè¡¨</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŒ‰æœˆåˆ†åŒº</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> mq_messages (
    ...
) <span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">RANGE</span> (TO_DAYS(create_time)) (
    <span class="hljs-keyword">PARTITION</span> p202401 <span class="hljs-keyword">VALUES</span> LESS THAN (TO_DAYS(<span class="hljs-string">'2024-02-01'</span>)),
    <span class="hljs-keyword">PARTITION</span> p202402 <span class="hljs-keyword">VALUES</span> LESS THAN (TO_DAYS(<span class="hljs-string">'2024-03-01'</span>)),
    ...
);

<span class="hljs-comment">-- å®šæ—¶åˆ é™¤æ—§åˆ†åŒº</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> mq_messages <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">PARTITION</span> p202401;
</code></pre>
<p>æ–¹æ¡ˆä¸‰ï¼š<strong>å®šæ—¶å½’æ¡£</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Scheduled(cron = "0 0 3 * * ?")</span> <span class="hljs-comment">// æ¯å¤©å‡Œæ™¨3ç‚¹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">archiveMessages</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// 1. å½’æ¡£7å¤©å‰çš„å·²å‘é€æ¶ˆæ¯</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> msgMapper.archiveOldMessages(<span class="hljs-number">7</span>);
    log.info(<span class="hljs-string">"å½’æ¡£æ¶ˆæ¯ count={}"</span>, count);
    
    <span class="hljs-comment">// 2. åˆ é™¤30å¤©å‰çš„å¤±è´¥æ¶ˆæ¯ï¼ˆäººå·¥ä»‹å…¥åï¼‰</span>
    msgMapper.deleteOldFailedMessages(<span class="hljs-number">30</span>);
}
</code></pre>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p>
<ol>
<li>æ¶ˆæ¯è¡¨æŒ‰<code>status + next_retry_time</code>å»ºç´¢å¼•</li>
<li>å·²å‘é€çš„æ¶ˆæ¯å®šæœŸå½’æ¡£æˆ–åˆ é™¤</li>
<li>å¤±è´¥æ¶ˆæ¯è¶…è¿‡ä¸€å®šæ—¶é—´åäººå·¥ä»‹å…¥</li>
<li>è¡¨æ•°æ®é‡æ§åˆ¶åœ¨100ä¸‡ä»¥å†…</li>
</ol>
<hr/>
<h4 data-id="heading-18">å‘5ï¼šå¤§æ¶ˆæ¯å­˜å‚¨é—®é¢˜</h4>
<p><strong>åœºæ™¯å¤ç°</strong></p>
<p>æœ‰ä¸ªä¸šåŠ¡åœºæ™¯éœ€è¦å‘é€å•†å“è¯¦æƒ…ï¼ŒåŒ…å«åå‡ å¼ å›¾ç‰‡çš„URLï¼Œæ¶ˆæ¯ä½“æœ‰50KBã€‚ä¸€å¼€å§‹æ²¡æ³¨æ„ï¼Œåæ¥å‘ç°ï¼š</p>
<ol>
<li>æ•°æ®åº“å†™å…¥å˜æ…¢ï¼š<code>VARCHAR(255)</code> å­˜ä¸ä¸‹ï¼Œæ”¹æˆ <code>TEXT</code> åè¡Œæ ¼å¼å˜å¤§</li>
<li>å†…å­˜é˜Ÿåˆ—å ç”¨é«˜ï¼š1ä¸‡æ¡æ¶ˆæ¯å°±å äº†500MB</li>
<li>MQå‘é€è¶…æ—¶ï¼šRocketMQå•æ¶ˆæ¯é™åˆ¶4MBï¼Œè™½ç„¶æ²¡è¶…ï¼Œä½†ç½‘ç»œä¼ è¾“æ…¢</li>
</ol>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<p>æ–¹æ¡ˆä¸€ï¼š<strong>æ¶ˆæ¯ç˜¦èº«</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸è¦å‘é€å®Œæ•´å¯¹è±¡</span>
<span class="hljs-comment">// âŒ é”™è¯¯</span>
<span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> JSON.toJSONString(product);

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šåªå‘IDï¼Œæ¶ˆè´¹ç«¯è‡ªå·±æŸ¥</span>
<span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> JSON.toJSONString(
    Map.of(<span class="hljs-string">"productId"</span>, product.getId())
);
</code></pre>
<p>æ–¹æ¡ˆäºŒï¼š<strong>å¤§æ¶ˆæ¯åˆ†ç‰‡</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendLargeMsg</span><span class="hljs-params">(String content)</span> {
    <span class="hljs-keyword">if</span> (content.length() &gt; <span class="hljs-number">10000</span>) { <span class="hljs-comment">// è¶…è¿‡10KB</span>
        <span class="hljs-comment">// 1. ä¸Šä¼ åˆ°OSS</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> ossService.upload(content);
        
        <span class="hljs-comment">// 2. å‘é€OSSåœ°å€</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">miniMsg</span> <span class="hljs-operator">=</span> JSON.toJSONString(
            Map.of(<span class="hljs-string">"type"</span>, <span class="hljs-string">"oss"</span>, <span class="hljs-string">"url"</span>, url)
        );
        transactionMsgClient.sendMsg(miniMsg, topic, tag);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// ç›´æ¥å‘é€</span>
        transactionMsgClient.sendMsg(content, topic, tag);
    }
}
</code></pre>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p>
<ol>
<li>æ¶ˆæ¯ä½“æ§åˆ¶åœ¨1KBä»¥å†…ï¼Œæœ€å¤šä¸è¶…è¿‡10KB</li>
<li>å¤§æ•°æ®ç”¨OSSç­‰å¤–éƒ¨å­˜å‚¨ï¼Œæ¶ˆæ¯åªä¼ åœ°å€</li>
<li>æ•°æ®åº“å­—æ®µç”¨ <code>VARCHAR(1000)</code>ï¼Œå¤Ÿç”¨å°±å¥½</li>
<li>å®šæœŸæ£€æŸ¥æ¶ˆæ¯ä½“å¤§å°åˆ†å¸ƒï¼Œå‘ç°å¼‚å¸¸åŠæ—¶å¤„ç†</li>
</ol>
<h3 data-id="heading-19">äº”ã€ä¸RocketMQäº‹åŠ¡æ¶ˆæ¯å¯¹æ¯”</h3>
<h4 data-id="heading-20">5.1 åŠŸèƒ½å¯¹æ¯”</h4>













































<table><thead><tr><th>ç»´åº¦</th><th>æœ¬åœ°æ¶ˆæ¯è¡¨</th><th>RocketMQäº‹åŠ¡æ¶ˆæ¯</th></tr></thead><tbody><tr><td><strong>äº‹åŠ¡ä¿è¯</strong></td><td>âœ… å¼ºä¸€è‡´ï¼ˆä¾èµ–DBäº‹åŠ¡ï¼‰</td><td>âš ï¸ æœ€ç»ˆä¸€è‡´ï¼ˆä¾èµ–å›æŸ¥ï¼‰</td></tr><tr><td><strong>å®ç°å¤æ‚åº¦</strong></td><td>ğŸŸ¡ ä¸­ç­‰ï¼ˆéœ€è¦å†™ä»£ç ï¼‰</td><td>ğŸŸ¢ ç®€å•ï¼ˆSDKå°è£…å¥½ï¼‰</td></tr><tr><td><strong>MQä¾èµ–</strong></td><td>ğŸŸ¢ ä½ï¼ˆMQå®•æœºä¸å½±å“å†™å…¥ï¼‰</td><td>ğŸ”´ é«˜ï¼ˆMQå®•æœºæ— æ³•å‘é€åŠæ¶ˆæ¯ï¼‰</td></tr><tr><td><strong>å›æŸ¥é€»è¾‘</strong></td><td>ğŸŸ¢ ç®€å•ï¼ˆæŸ¥æ¶ˆæ¯è¡¨çŠ¶æ€ï¼‰</td><td>ğŸ”´ å¤æ‚ï¼ˆéœ€è¦åæ¨ä¸šåŠ¡çŠ¶æ€ï¼‰</td></tr><tr><td><strong>æ¶ˆæ¯è¡¥å¿</strong></td><td>âœ… æ”¯æŒï¼ˆæ¶ˆæ¯è¡¨å¯é‡è¯•ï¼‰</td><td>âŒ ä¸æ”¯æŒï¼ˆRollbackä¸é‡è¯•ï¼‰</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>ğŸŸ¡ ä¸­ç­‰ï¼ˆå¤šä¸€æ¬¡DBå†™å…¥ï¼‰</td><td>ğŸŸ¢ é«˜ï¼ˆç›´æ¥å‘MQï¼‰</td></tr><tr><td><strong>ç›‘æ§</strong></td><td>ğŸŸ¢ å®¹æ˜“ï¼ˆæŸ¥æ¶ˆæ¯è¡¨ï¼‰</td><td>ğŸŸ¡ ä¸€èˆ¬ï¼ˆéœ€è¦çœ‹MQæ§åˆ¶å°ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-21">5.2 é€‚ç”¨åœºæ™¯</h4>
<p><strong>é€‰æ‹©æœ¬åœ°æ¶ˆæ¯è¡¨çš„åœºæ™¯</strong>ï¼š</p>
<ol>
<li>
<p><strong>ä¸šåŠ¡é€»è¾‘å¤æ‚</strong>ï¼šå¤šè¡¨æ“ä½œï¼Œéš¾ä»¥é€šè¿‡å›æŸ¥åˆ¤æ–­çŠ¶æ€</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç¤ºä¾‹ï¼šè®¢å•ç³»ç»Ÿ</span>
- æ’å…¥è®¢å•ä¸»è¡¨
- æ’å…¥è®¢å•æ˜ç»†è¡¨ï¼ˆå¤šæ¡ï¼‰
- æ›´æ–°åº“å­˜è¡¨
- æ‰£å‡ä¼˜æƒ åˆ¸
- å‘é€æ¶ˆæ¯
<span class="hljs-comment">// å›æŸ¥æ—¶å¾ˆéš¾åˆ¤æ–­è¿™ä¸€å †æ“ä½œéƒ½æˆåŠŸäº†</span>
</code></pre>
</li>
<li>
<p><strong>éœ€è¦æ¶ˆæ¯è¡¥å¿</strong>ï¼šä¸šåŠ¡è¦æ±‚å¤±è´¥çš„æ¶ˆæ¯èƒ½é‡è¯•</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç¤ºä¾‹ï¼šæ”¯ä»˜å›è°ƒé€šçŸ¥</span>
- é€šçŸ¥å¤±è´¥éœ€è¦ä¸æ–­é‡è¯•
- ç›´åˆ°å•†æˆ·è¿”å›æˆåŠŸ
</code></pre>
</li>
<li>
<p><strong>å¯¹ä¸€è‡´æ€§è¦æ±‚é«˜</strong>ï¼šä¸å…è®¸æ¶ˆæ¯ä¸¢å¤±</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç¤ºä¾‹ï¼šèµ„é‡‘æµæ°´</span>
- æ¯ä¸€ç¬”èµ„é‡‘å˜åŠ¨å¿…é¡»æœ‰å¯¹åº”çš„æ¶ˆæ¯
</code></pre>
</li>
</ol>
<p><strong>é€‰æ‹©RocketMQäº‹åŠ¡æ¶ˆæ¯çš„åœºæ™¯</strong>ï¼š</p>
<ol>
<li>
<p><strong>ä¸šåŠ¡é€»è¾‘ç®€å•</strong>ï¼šå•è¡¨æ“ä½œï¼Œå›æŸ¥å®¹æ˜“</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç¤ºä¾‹ï¼šç”¨æˆ·æ³¨å†Œé€ç§¯åˆ†</span>
<span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">register</span><span class="hljs-params">(User user)</span> {
    userMapper.insert(user);
    <span class="hljs-comment">// å›æŸ¥ï¼šæŸ¥ç”¨æˆ·è¡¨æ˜¯å¦å­˜åœ¨</span>
}
</code></pre>
</li>
<li>
<p><strong>æ€§èƒ½è¦æ±‚é«˜</strong>ï¼šä¸æƒ³å¢åŠ DBå†™å…¥å¼€é”€</p>
</li>
<li>
<p><strong>å›¢é˜Ÿç»éªŒä¸°å¯Œ</strong>ï¼šç†Ÿæ‚‰RocketMQäº‹åŠ¡æ¶ˆæ¯çš„å„ç§å‘</p>
</li>
</ol>
<h4 data-id="heading-22">5.3 æ··åˆæ–¹æ¡ˆ</h4>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†æ··åˆæ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ ¸å¿ƒä¸šåŠ¡ç”¨æœ¬åœ°æ¶ˆæ¯è¡¨</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è®¢å•ã€åº“å­˜ã€ä¼˜æƒ åˆ¸...å¤æ‚é€»è¾‘</span>
        <span class="hljs-comment">// ç”¨æœ¬åœ°æ¶ˆæ¯è¡¨ä¿è¯å¼ºä¸€è‡´</span>
    }
}

<span class="hljs-comment">// ç®€å•ä¸šåŠ¡ç”¨RocketMQäº‹åŠ¡æ¶ˆæ¯</span>
<span class="hljs-meta">@Service</span>  
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">register</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-comment">// å•è¡¨æ’å…¥ç”¨æˆ·</span>
        <span class="hljs-comment">// ç”¨RocketMQäº‹åŠ¡æ¶ˆæ¯ï¼Œæ€§èƒ½æ›´å¥½</span>
    }
}
</code></pre>
<h3 data-id="heading-23">å…­ã€æœ€ä½³å®è·µæ€»ç»“</h3>
<h4 data-id="heading-24">6.1 æ¶æ„è®¾è®¡</h4>
<ol>
<li>
<p><strong>æ¶ˆæ¯è¡¨å¿…é¡»å’Œä¸šåŠ¡è¡¨åœ¨åŒä¸€ä¸ªæ•°æ®åº“</strong></p>
<ul>
<li>åˆ©ç”¨æ•°æ®åº“äº‹åŠ¡ä¿è¯å¼ºä¸€è‡´æ€§</li>
<li>é¿å…åˆ†å¸ƒå¼äº‹åŠ¡çš„å¤æ‚æ€§</li>
</ul>
</li>
<li>
<p><strong>å†…å­˜é˜Ÿåˆ—è®¾ç½®åˆç†ä¸Šé™</strong></p>
<ul>
<li>æ¨èå€¼ï¼š1ä¸‡ ~ 5ä¸‡</li>
<li>é˜²æ­¢OOM</li>
<li>ä¾èµ–å®šæ—¶ä»»åŠ¡å…œåº•</li>
</ul>
</li>
<li>
<p><strong>æ—¶é—´è½®å®ç°å»¶è¿Ÿé‡è¯•</strong></p>
<ul>
<li>å¤±è´¥æ¶ˆæ¯å»¶è¿Ÿé€’å¢ï¼š5sã€10sã€25sã€50sã€100s</li>
<li>é¿å…é¢‘ç¹é‡è¯•æ‰“å®ç³»ç»Ÿ</li>
</ul>
</li>
<li>
<p><strong>å®šæ—¶ä»»åŠ¡ä½œä¸ºå…œåº•æœºåˆ¶</strong></p>
<ul>
<li>æ‰«æè¶…æ—¶æœªå‘é€çš„æ¶ˆæ¯</li>
<li>é—´éš”å»ºè®®ï¼š5åˆ†é’Ÿ</li>
<li>æ³¨æ„æ‰«ææ€§èƒ½</li>
</ul>
</li>
</ol>
<h4 data-id="heading-25">6.2 æ•°æ®åº“è®¾è®¡</h4>
<ol>
<li>
<p><strong>è¡¨ç»“æ„è®¾è®¡</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ ¸å¿ƒå­—æ®µ</span>
status TINYINT          <span class="hljs-comment">-- çŠ¶æ€</span>
retry_count <span class="hljs-type">INT</span>         <span class="hljs-comment">-- é‡è¯•æ¬¡æ•°</span>
next_retry_time <span class="hljs-type">TIMESTAMP</span>  <span class="hljs-comment">-- ä¸‹æ¬¡é‡è¯•æ—¶é—´</span>

<span class="hljs-comment">-- ç´¢å¼•</span>
INDEX idx_status_retry (status, next_retry_time)
</code></pre>
</li>
<li>
<p><strong>æ¶ˆæ¯ä½“å¤§å°</strong></p>
<ul>
<li>æ§åˆ¶åœ¨1KBä»¥å†…</li>
<li>æœ€å¤šä¸è¶…è¿‡10KB</li>
<li>å¤§æ¶ˆæ¯ç”¨OSSå­˜å‚¨</li>
</ul>
</li>
<li>
<p><strong>æ•°æ®å½’æ¡£</strong></p>
<ul>
<li>å·²å‘é€æ¶ˆæ¯å®šæœŸå½’æ¡£ï¼ˆ7å¤©ï¼‰</li>
<li>å¤±è´¥æ¶ˆæ¯äººå·¥ä»‹å…¥ååˆ é™¤ï¼ˆ30å¤©ï¼‰</li>
<li>è¡¨æ•°æ®é‡æ§åˆ¶åœ¨100ä¸‡ä»¥å†…</li>
</ul>
</li>
</ol>
<h4 data-id="heading-26">6.3 ä»£ç å®ç°</h4>
<ol>
<li>
<p><strong>äº‹åŠ¡ç®¡ç†</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">businessMethod</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// 1. ä¸šåŠ¡æ“ä½œ</span>
    bizMapper.insert(...);
    
    <span class="hljs-comment">// 2. å‘é€æ¶ˆæ¯ï¼ˆåŒä¸€äº‹åŠ¡ï¼‰</span>
    msgClient.sendMsg(...);
}
</code></pre>
</li>
<li>
<p><strong>æ¶ˆæ¯å‘é€</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. åŒæ­¥å†™å…¥æ¶ˆæ¯è¡¨</span>
<span class="hljs-comment">// 2. å¼‚æ­¥æ”¾å…¥å†…å­˜é˜Ÿåˆ—</span>
<span class="hljs-comment">// 3. åå°çº¿ç¨‹å‘é€åˆ°MQ</span>
<span class="hljs-comment">// 4. å®šæ—¶ä»»åŠ¡å…œåº•è¡¥å¿</span>
</code></pre>
</li>
<li>
<p><strong>æ¶ˆè´¹ç«¯å¹‚ç­‰</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç”¨Redisæˆ–æ•°æ®åº“å”¯ä¸€çº¦æŸ</span>
<span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"msg:processed:"</span> + msgId;
<span class="hljs-type">Boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> redis.setIfAbsent(key, <span class="hljs-string">"1"</span>, <span class="hljs-number">7</span>, TimeUnit.DAYS);
<span class="hljs-keyword">if</span> (Boolean.FALSE.equals(success)) {
    <span class="hljs-keyword">return</span>; <span class="hljs-comment">// å·²å¤„ç†ï¼Œè·³è¿‡</span>
}
</code></pre>
</li>
</ol>
<h4 data-id="heading-27">6.4 ç›‘æ§å‘Šè­¦</h4>
<ol>
<li>
<p><strong>æ¶ˆæ¯ç§¯å‹å‘Šè­¦</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é˜Ÿåˆ—å¤§å°è¶…è¿‡80%å‘Šè­¦</span>
<span class="hljs-keyword">if</span> (msgQueue.size() &gt; <span class="hljs-number">8000</span>) {
    alert(<span class="hljs-string">"æ¶ˆæ¯é˜Ÿåˆ—ç§¯å‹"</span>);
}
</code></pre>
</li>
<li>
<p><strong>å‘é€å¤±è´¥å‘Šè­¦</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¤±è´¥æ¶ˆæ¯è¶…è¿‡é˜ˆå€¼å‘Šè­¦</span>
<span class="hljs-type">int</span> <span class="hljs-variable">failCount</span> <span class="hljs-operator">=</span> msgMapper.countFailedMsg();
<span class="hljs-keyword">if</span> (failCount &gt; <span class="hljs-number">100</span>) {
    alert(<span class="hljs-string">"æ¶ˆæ¯å‘é€å¤±è´¥è¿‡å¤š"</span>);
}
</code></pre>
</li>
<li>
<p><strong>å¤„ç†å»¶è¿Ÿå‘Šè­¦</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ¶ˆæ¯å¤„ç†æ—¶é•¿è¶…è¿‡5åˆ†é’Ÿå‘Šè­¦</span>
<span class="hljs-type">long</span> <span class="hljs-variable">delay</span> <span class="hljs-operator">=</span> now - msg.getCreateTime();
<span class="hljs-keyword">if</span> (delay &gt; <span class="hljs-number">300000</span>) {
    alert(<span class="hljs-string">"æ¶ˆæ¯å¤„ç†å»¶è¿Ÿ"</span>);
}
</code></pre>
</li>
</ol>
<h4 data-id="heading-28">6.5 å®¹é‡è§„åˆ’</h4>
<ol>
<li>
<p><strong>æ•°æ®åº“</strong></p>
<ul>
<li>æ¶ˆæ¯è¡¨è¡Œæ•°ï¼š&lt; 100ä¸‡</li>
<li>å•è¡Œå¤§å°ï¼š&lt; 1KB</li>
<li>æ€»å¤§å°ï¼š&lt; 1GB</li>
</ul>
</li>
<li>
<p><strong>å†…å­˜é˜Ÿåˆ—</strong></p>
<ul>
<li>é˜Ÿåˆ—é•¿åº¦ï¼š1ä¸‡ ~ 5ä¸‡</li>
<li>å•æ¡æ¶ˆæ¯ï¼š&lt; 1KB</li>
<li>æ€»å†…å­˜ï¼š&lt; 50MB</li>
</ul>
</li>
<li>
<p><strong>MQé›†ç¾¤</strong></p>
<ul>
<li>TPSï¼šæŒ‰ä¸šåŠ¡å³°å€¼ Ã— 1.5</li>
<li>å­˜å‚¨ï¼šæŒ‰æ¶ˆæ¯é‡ Ã— 7å¤©</li>
</ul>
</li>
</ol>
<h3 data-id="heading-29">ä¸ƒã€æ€»ç»“</h3>
<p>æœ¬åœ°æ¶ˆæ¯è¡¨æ˜¯ä¸€ç§ç»è¿‡ç”Ÿäº§éªŒè¯çš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆã€‚ç›¸æ¯”RocketMQäº‹åŠ¡æ¶ˆæ¯ï¼Œå®ƒåœ¨å¤æ‚ä¸šåŠ¡åœºæ™¯ä¸‹æ›´åŠ ç¨³å®šå¯é ã€‚</p>
<p>æ ¸å¿ƒè¦ç‚¹å›é¡¾ï¼š</p>
<ol>
<li><strong>å¼ºä¸€è‡´æ€§</strong>ï¼šåˆ©ç”¨æ•°æ®åº“äº‹åŠ¡ä¿è¯ä¸šåŠ¡å’Œæ¶ˆæ¯çš„åŸå­æ€§</li>
<li><strong>ç®€å•å›æŸ¥</strong>ï¼šç›´æ¥æŸ¥æ¶ˆæ¯è¡¨çŠ¶æ€ï¼Œä¸éœ€è¦åæ¨ä¸šåŠ¡çŠ¶æ€</li>
<li><strong>æ¶ˆæ¯è¡¥å¿</strong>ï¼šæ”¯æŒå¤±è´¥æ¶ˆæ¯é‡è¯•ï¼Œå¯é æ€§æ›´é«˜</li>
<li><strong>é™ä½è€¦åˆ</strong>ï¼šMQæš‚æ—¶ä¸å¯ç”¨æ—¶ä¸å½±å“ä¸šåŠ¡ä¸»æµç¨‹</li>
</ol>
<p>å½“ç„¶ï¼Œå®ƒä¹Ÿæœ‰ä¸€äº›ä»£ä»·ï¼š</p>
<ol>
<li>éœ€è¦é¢å¤–çš„è¡¨å­˜å‚¨å’Œä»£ç ç»´æŠ¤</li>
<li>å¤šä¸€æ¬¡æ•°æ®åº“å†™å…¥ï¼Œæ€§èƒ½ç•¥ä½</li>
<li>éœ€è¦å®šæ—¶ä»»åŠ¡å…œåº•ï¼Œå¢åŠ äº†ç³»ç»Ÿå¤æ‚åº¦</li>
</ol>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå»ºè®®æ ¹æ®ä¸šåŠ¡åœºæ™¯çµæ´»é€‰æ‹©ï¼š</p>
<ul>
<li>å¤æ‚ä¸šåŠ¡ã€é«˜ä¸€è‡´æ€§è¦æ±‚ â†’ æœ¬åœ°æ¶ˆæ¯è¡¨</li>
<li>ç®€å•ä¸šåŠ¡ã€é«˜æ€§èƒ½è¦æ±‚ â†’ RocketMQäº‹åŠ¡æ¶ˆæ¯</li>
<li>æ··åˆä½¿ç”¨ï¼Œå„å–æ‰€é•¿</li>
</ul>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åˆ°æ­£åœ¨åšåˆ†å¸ƒå¼äº‹åŠ¡é€‰å‹çš„ä½ ã€‚å¦‚æœæœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿ç•™è¨€äº¤æµï¼</p>
<hr/>
<p><strong>å‚è€ƒèµ„æ–™</strong>ï¼š</p>
<ol>
<li>RocketMQå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Frocketmq.apache.org%2Fzh%2Fdocs%2F" target="_blank" title="https://rocketmq.apache.org/zh/docs/" ref="nofollow noopener noreferrer">rocketmq.apache.org/zh/docs/</a></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¢è¯•å®˜ç¬‘äº†ï¼šæˆ‘ç”¨è¿™å¥—æ–¹æ¡ˆæå®šäº†â€œ2000w vs 20wâ€çš„Rediséš¾é¢˜ï¼]]></title>    <link>https://juejin.cn/post/7571342319893839907</link>    <guid>https://juejin.cn/post/7571342319893839907</guid>    <pubDate>2025-11-12T02:10:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571342319893839907" data-draft-id="7571404524792266787" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¢è¯•å®˜ç¬‘äº†ï¼šæˆ‘ç”¨è¿™å¥—æ–¹æ¡ˆæå®šäº†â€œ2000w vs 20wâ€çš„Rediséš¾é¢˜ï¼"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,Redis"/> <meta itemprop="datePublished" content="2025-11-12T02:10:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è½¯ä»¶æ±‚ç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/1038379932466263"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¢è¯•å®˜ç¬‘äº†ï¼šæˆ‘ç”¨è¿™å¥—æ–¹æ¡ˆæå®šäº†â€œ2000w vs 20wâ€çš„Rediséš¾é¢˜ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1038379932466263/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è½¯ä»¶æ±‚ç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T02:10:24.000Z" title="Wed Nov 12 2025 02:10:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>é‚£å¤©æˆ‘åœ¨ä¸€å®¶äº’è”ç½‘å¤§å‚é¢è¯•ï¼Œè¢«é—®äº†ä¸€ä¸ªçœ‹ä¼¼ç®€å•ã€å®åˆ™æ€ä¼¤åŠ›æå¼ºçš„é—®é¢˜ï¼š</p>
<blockquote>
<p>â€œå°ç±³ï¼Œå‡å¦‚MySQLé‡Œæœ‰2000ä¸‡æ¡æ•°æ®ï¼ŒRedisé‡Œåªèƒ½å­˜20ä¸‡æ¡ï¼Œä½ è¯¥æ€ä¹ˆä¿è¯Redisä¸­çš„æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ®ï¼Ÿâ€</p>
</blockquote>
<p>å½“åœºæˆ‘ç¬‘å‡ºäº†å£°ï¼Œå¿ƒæƒ³è¿™é¢˜æ˜¯â€œé€å‘½é¢˜â€å§ï¼ä½†ç¬‘å½’ç¬‘ï¼Œèƒ½ä¸èƒ½ç­”å¥½ï¼ŒçœŸèƒ½çœ‹å‡ºä½ æ˜¯ä¸æ˜¯ä¸€ä¸ªâ€œå®æˆ˜æ´¾â€çš„ç¨‹åºå‘˜ã€‚</p>
<p>ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œå°±å¸¦ä½ æŠŠè¿™é“é¢˜æ‹†å¼€ã€æ‰ç¢ã€è®²é€ã€‚</p>
<h2 data-id="heading-0">æ•…äº‹ä»ä¸€ä¸ªâ€œå‡æƒ³é¡¹ç›®â€å¼€å§‹</h2>
<p>é‚£å¤©ï¼Œé¢è¯•å®˜ç»™äº†æˆ‘ä¸€ä¸ªåœºæ™¯ï¼š</p>
<blockquote>
<p>â€œæˆ‘ä»¬å…¬å¸åšç”µå•†ç³»ç»Ÿï¼Œå•†å“è¡¨æœ‰2000ä¸‡æ¡æ•°æ®ã€‚å•†å“è¯¦æƒ…é¡µè®¿é—®é‡å·¨å¤§ï¼Œä½†Rediså†…å­˜æœ‰é™ï¼Œåªèƒ½æ”¾20ä¸‡æ¡ã€‚</p>
<p>è¯·ä½ è®¾è®¡ä¸€ä¸ªæœºåˆ¶ï¼Œä¿è¯Redisä¸­çš„æ•°æ®å§‹ç»ˆæ˜¯<strong>æœ€çƒ­çš„é‚£éƒ¨åˆ†</strong>ã€‚â€</p>
</blockquote>
<p>æˆ‘å½“æ—¶æƒ³èµ·äº†ä¸€ä¸ªè¯â€”â€”<strong>å†·çƒ­åˆ†å±‚ç¼“å­˜</strong>ã€‚</p>
<p>äºæ˜¯æˆ‘å°±ä»ç”¨æˆ·è¡Œä¸ºå¼€å§‹åˆ†æã€‚</p>
<h2 data-id="heading-1">ä»ç”¨æˆ·è¡Œä¸ºè¯´èµ·ï¼šçƒ­ç‚¹æ•°æ®çš„æœ¬è´¨</h2>
<p>åœ¨å®é™…ç³»ç»Ÿä¸­ï¼Œæ•°æ®è®¿é—®æœ‰ä¸€ä¸ªè‘—åè§„å¾‹ï¼š</p>
<blockquote>
<p><strong>äºŒå…«æ³•åˆ™ï¼ˆ80/20åŸåˆ™ï¼‰</strong> â€”â€” 20%çš„æ•°æ®ï¼Œæ‰¿è½½äº†80%çš„è®¿é—®é‡ã€‚</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ2000ä¸‡æ¡å•†å“é‡Œï¼Œå¯èƒ½æœ‰å‡ åä¸‡æ¡æ‰æ˜¯çœŸæ­£è¢«é¢‘ç¹è®¿é—®çš„â€œçƒ­æ•°æ®â€ã€‚</p>
<p>è¿™äº›çƒ­æ•°æ®æœ‰å‡ ä¸ªç‰¹å¾ï¼š</p>
<ol>
<li><strong>é«˜è®¿é—®é¢‘ç‡</strong>ï¼šæ¯”å¦‚çƒ­é—¨å•†å“ã€æ´»åŠ¨å•†å“ã€‚</li>
<li><strong>æ—¶é—´æ•æ„Ÿæ€§å¼º</strong>ï¼šæ¯”å¦‚â€œç§’æ€å•†å“â€ã€â€œçƒ­æ¦œâ€ã€‚</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸçŸ­</strong>ï¼šçƒ­ç‚¹ä¼šå˜åŠ¨ï¼Œä»Šå¤©ç«çš„æ˜å¤©å¯èƒ½å‡‰ã€‚</li>
</ol>
<p>æ˜ç™½äº†è¿™äº›ç‰¹å¾ï¼Œæˆ‘ä»¬æ‰èƒ½æ€è€ƒâ€œå¦‚ä½•åŠ¨æ€ç»´æŠ¤Redisä¸­çš„20ä¸‡æ¡â€ã€‚</p>
<h2 data-id="heading-2">é”™è¯¯çš„å¼€å§‹ï¼šæœ€å®¹æ˜“æ‰å‘çš„ä¸¤ä¸ªæ€è·¯</h2>
<p>åœ¨æˆ‘åˆšå·¥ä½œé‚£å‡ å¹´ï¼Œä¹Ÿé‡åˆ°è¿‡ç±»ä¼¼é—®é¢˜ã€‚é‚£æ—¶æˆ‘å¤©çœŸåœ°ä»¥ä¸ºï¼Œåªè¦åœ¨Redisé‡Œè®¾ç½®ä¸ªLRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ç­–ç•¥å°±è¡Œã€‚</p>
<p>äº‹å®è¯æ˜ï¼š</p>
<blockquote>
<p>æƒ³é Redisè‡ªå·±æå®šçƒ­ç‚¹ç»´æŠ¤ï¼ŒåŸºæœ¬ç­‰äºè®©ä»“åº“ç®¡ç†å‘˜â€œå‡­æ„Ÿè§‰â€å»æŒ‘ç•…é”€å“ã€‚</p>
</blockquote>
<p>é—®é¢˜æœ‰ä¸‰ï¼š</p>
<ol>
<li><strong>Redis LRUæ˜¯å±€éƒ¨æ·˜æ±°</strong>ï¼šå®ƒåªåœ¨è¾¾åˆ°å†…å­˜ä¸Šé™æ—¶æ‰æ·˜æ±°ï¼Œä¸æ˜¯å…¨å±€æœ€ä¼˜ã€‚</li>
<li><strong>è®¿é—®æ³¢åŠ¨å¤ªå¿«</strong>ï¼šçƒ­ç‚¹å¯èƒ½å‡ åˆ†é’Ÿå°±å˜äº†ï¼ŒRedisååº”å¤ªæ…¢ã€‚</li>
<li><strong>çƒ­ç‚¹ç©¿é€/å‡»ç©¿/é›ªå´©é—®é¢˜</strong>ï¼šä¸€æ—¦çƒ­ç‚¹æ²¡å‘½ä¸­ï¼Œæ•°æ®åº“å°±é­æ®ƒã€‚</li>
</ol>
<p>æ‰€ä»¥ï¼Œä»…é Redisé…ç½®ä¸å¤Ÿï¼Œæˆ‘ä»¬å¾—æœ‰ä¸€å¥—å®Œæ•´çš„ç­–ç•¥ä½“ç³»ã€‚</p>
<h2 data-id="heading-3">æ­£ç¡®çš„æ€è·¯ï¼šåˆ†å±‚ + åŠ¨æ€ + æŒ‡æ ‡é©±åŠ¨</h2>
<p>æˆ‘å½“æ—¶çš„å›ç­”æ€è·¯æ˜¯è¿™æ ·çš„ï¼ˆåæ¥é¢è¯•å®˜å¾ˆæ»¡æ„ï¼‰ï¼š</p>
<blockquote>
<p>â€œæˆ‘ä¼šè®¾è®¡ä¸€ä¸ª<strong>å†·çƒ­åˆ†å±‚ç¼“å­˜æ¶æ„</strong>ï¼Œé…åˆè®¿é—®ç»Ÿè®¡ä¸å¼‚æ­¥æ›´æ–°æœºåˆ¶ï¼Œè®©Redisè‡ªåŠ¨åªä¿å­˜çœŸæ­£çš„çƒ­ç‚¹æ•°æ®ã€‚â€</p>
</blockquote>
<p>å…·ä½“æ‹†è§£æˆä¸‰å±‚ï¼š</p>
<p><strong>ç¬¬1å±‚ï¼šè¯»è¯·æ±‚åˆ†å±‚ç¼“å­˜æ¶æ„</strong></p>
<p>å…ˆä»è¯»è¯·æ±‚å…¥æ‰‹ï¼Œæˆ‘ä»¬åˆ†ä¸‰å±‚ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04a48f53a35847ae802dee0995c99876~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518224&amp;x-signature=AsvKLhAtSHjBtMb3DuCcCNChAAw%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>è¯·æ±‚æµç¨‹ï¼š</p>
<blockquote>
<p>å…ˆæŸ¥æœ¬åœ° â†’ ä¸å‘½ä¸­æŸ¥Redis â†’ ä»ä¸å‘½ä¸­æŸ¥MySQLå¹¶å›å¡«ã€‚</p>
</blockquote>
<p>è¿™æ ·èƒ½å‡å°‘Rediså‹åŠ›ï¼ŒåŒæ—¶ä¹Ÿä¸ºâ€œçƒ­ç‚¹æ›´æ–°â€æ‰“åŸºç¡€ã€‚</p>
<p><strong>ç¬¬2å±‚ï¼šçƒ­åº¦ç»Ÿè®¡ä¸å¼‚æ­¥ä¸ŠæŠ¥</strong></p>
<p>æƒ³çŸ¥é“å“ªäº›æ•°æ®æ˜¯çƒ­ç‚¹ï¼Œä¸èƒ½é çŒœï¼Œè¦é <strong>è®¿é—®ç»Ÿè®¡</strong>ã€‚</p>
<p>æˆ‘ä»¬åœ¨åº”ç”¨å±‚å¼•å…¥ä¸€ä¸ªâ€œçƒ­åº¦è®¡æ•°å™¨â€ï¼Œæ¯æ¬¡ç”¨æˆ·è®¿é—®å•†å“è¯¦æƒ…æ—¶ï¼Œå°±ä¸ŠæŠ¥ä¸€æ¬¡è®¿é—®è®°å½•ã€‚è¿™é‡Œæœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼š</p>
<p>1ã€æ–¹æ¡ˆAï¼šæœ¬åœ°ç»Ÿè®¡ + å®šæ—¶ä¸ŠæŠ¥</p>
<ul>
<li>æ¯å°æœåŠ¡å®ä¾‹ç»´æŠ¤ä¸€ä¸ª ConcurrentHashMap&lt;id, count&gt;ï¼›</li>
<li>æ¯éš”1åˆ†é’Ÿï¼ŒæŠŠç»Ÿè®¡ç»“æœå¼‚æ­¥æ±‡æ€»ä¸ŠæŠ¥åˆ°MQæˆ–Kafkaï¼›</li>
<li>æ¶ˆè´¹ç«¯å®šæ—¶è®¡ç®—æœ€è¿‘5åˆ†é’Ÿçš„è®¿é—®é‡TopNã€‚</li>
</ul>
<p>2ã€æ–¹æ¡ˆBï¼šæ»‘åŠ¨çª—å£ + Redisè®¡æ•°å™¨</p>
<ul>
<li>åœ¨Redisä¸­ä½¿ç”¨ INCR è®°å½•è®¿é—®æ¬¡æ•°ï¼›</li>
<li>è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆæ¯”å¦‚10åˆ†é’Ÿï¼‰ï¼Œå½¢æˆæ»‘åŠ¨æ—¶é—´çª—å£ï¼›</li>
<li>å®šæ—¶è®¡ç®—æœ€è¿‘çª—å£å†…è®¿é—®é‡TopNã€‚</li>
</ul>
<p>æœ€åå¾—åˆ°çš„TopNåˆ—è¡¨ï¼Œå°±æ˜¯å½“å‰â€œçƒ­ç‚¹æ•°æ®å€™é€‰é›†â€ã€‚</p>
<p><strong>ç¬¬3å±‚ï¼šRedisçƒ­ç‚¹æ•°æ®ç»´æŠ¤ç­–ç•¥</strong></p>
<p>æœ‰äº†TopNæ•°æ®ï¼Œå°±å¯ä»¥åŠ¨æ€ç»´æŠ¤Redisäº†ã€‚</p>
<p>æ€è·¯æ˜¯ï¼š</p>
<blockquote>
<p>çƒ­ç‚¹ä¸Šå‡ â†’ è‡ªåŠ¨å†™å…¥Redisï¼›</p>
<p>çƒ­ç‚¹ä¸‹é™ â†’ è‡ªåŠ¨æ·˜æ±°ã€‚</p>
</blockquote>
<p>å¯ä»¥ç”¨ä¸€ä¸ªç®€å•çš„åå°ä»»åŠ¡æ¥å®ç°ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c5f9a2c79de45fda01de15a9563c414~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518224&amp;x-signature=8Y8dQ%2F8eAWwo%2Bqy0UjLeomcGElo%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>è¿™æ ·ï¼ŒRediså°±èƒ½â€œè‡ªåŠ¨å‘¼å¸â€ï¼Œå§‹ç»ˆä¿æŒæœ€æœ‰ä»·å€¼çš„æ•°æ®ã€‚</p>
<h2 data-id="heading-4">åŠ é€Ÿç­–ç•¥ï¼šè®©Rediså‘½ä¸­ç‡æ›´é«˜</h2>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†å†·çƒ­åˆ†å±‚ + çƒ­åº¦æ›´æ–°æœºåˆ¶ã€‚ä½†æƒ³è®©ç³»ç»Ÿâ€œæ›´ä¸æ»‘â€ï¼Œè¿˜æœ‰ä¸€äº›ä¼˜åŒ–å°æŠ€å·§ï¼š</p>
<p><strong>1ã€çƒ­ç‚¹é¢„æµ‹é¢„çƒ­</strong></p>
<p>åœ¨å¤§å‹æ´»åŠ¨ï¼ˆå¦‚åŒåä¸€ï¼‰å‰ï¼Œå¯ä»¥æ ¹æ®å†å²è®¿é—®æ—¥å¿—æå‰é¢„æµ‹å“ªäº›å•†å“ä¼šçƒ­ï¼Œç„¶åæ‰¹é‡åŠ è½½å…¥Redisã€‚</p>
<p>è¿™æ ·ä¸€ä¸Šçº¿å°±èƒ½é˜²æ­¢â€œå†·å¯åŠ¨â€å¯¼è‡´çš„å‡»ç©¿ã€‚</p>
<p><strong>2ã€çƒ­ç‚¹é™çº§æœºåˆ¶</strong></p>
<p>å½“æŸä¸€ç±»æ•°æ®çªç„¶æš´æ¶¨ï¼Œæ¯”å¦‚æ˜æ˜Ÿå•†å“è®¿é—®é‡æš´å¢æ—¶ï¼Œå¯ä»¥å¯ç”¨æœ¬åœ°ç¼“å­˜æˆ–è¿”å›é™æ€åŒ–æ•°æ®é¡µé¢ï¼Œé˜²æ­¢Redisè¢«æ‰“çˆ†ã€‚</p>
<p><strong>3ã€å¼‚æ­¥æ›´æ–° + åŒå†™ä¸€è‡´æ€§</strong></p>
<p>å†™æ“ä½œæ—¶ä¸è¦ç›´æ¥åŒæ­¥æ›´æ–°Redisï¼Œå¯ä»¥é‡‡ç”¨<strong>å»¶è¿ŸåŒåˆ ç­–ç•¥</strong>ï¼š</p>
<ol>
<li>åˆ é™¤ç¼“å­˜ï¼›</li>
<li>æ›´æ–°æ•°æ®åº“ï¼›</li>
<li>å»¶è¿Ÿ1ç§’å†åˆ ä¸€æ¬¡ç¼“å­˜ï¼Œé˜²æ­¢å¹¶å‘è„æ•°æ®ã€‚</li>
</ol>
<p><strong>4ã€Redis Key è®¾è®¡ä¸åˆ†ç‰‡</strong></p>
<p>ä¸ºäº†é˜²æ­¢å•èŠ‚ç‚¹çƒ­ç‚¹ï¼Œå¯ä»¥ç»™KeyåŠ å‰ç¼€å“ˆå¸Œåˆ†ç‰‡ï¼Œæ¯”å¦‚ï¼š</p>
<blockquote>
<p>product:{hash(id)%10}:{id}</p>
</blockquote>
<p>ä¿è¯è®¿é—®æ›´å‡è¡¡ã€‚</p>
<p><strong>5ã€Bloom Filter é˜²æ­¢ç©¿é€</strong></p>
<p>å¯¹äºä¸å­˜åœ¨çš„æ•°æ®ï¼Œç”¨å¸ƒéš†è¿‡æ»¤å™¨æå‰æ‹¦æˆªï¼Œå‡å°‘æ•°æ®åº“å‹åŠ›ã€‚</p>
<h2 data-id="heading-5">å…³é”®æŒ‡æ ‡ï¼šè®©çƒ­ç‚¹æœºåˆ¶â€œçœ‹å¾—è§â€</h2>
<p>å¾ˆå¤šäººåšå®Œç¼“å­˜ç­–ç•¥å°±ç»“æŸäº†ï¼Œä½†çœŸæ­£çš„é«˜æ‰‹ï¼Œä¼š<strong>ç›‘æ§æ•°æ®çƒ­åº¦å˜åŒ–</strong>ã€‚</p>
<p>ä½ å¯ä»¥ç”¨Prometheus + Grafanaç›‘æ§ï¼š</p>
<ul>
<li>Rediså‘½ä¸­ç‡ï¼›</li>
<li>çƒ­ç‚¹æ•°æ®æ›´æ–°é¢‘ç‡ï¼›</li>
<li>MySQL QPSå˜åŒ–ï¼›</li>
<li>çƒ­åº¦æ¦œTopNæ›²çº¿ã€‚</li>
</ul>
<p>ä¸€æ—¦å‘ç°çƒ­ç‚¹å˜åŠ¨è¶‹åŠ¿å¼‚å¸¸ï¼Œå°±èƒ½æå‰æ‰©å®¹æˆ–é¢„çƒ­ã€‚</p>
<h2 data-id="heading-6">é¢è¯•å®˜çš„è¿½é—®ï¼šé‚£å¦‚æœâ€œçƒ­ç‚¹çªå‘â€æ€ä¹ˆåŠï¼Ÿ</h2>
<p>é¢è¯•å®˜ç»§ç»­è¿½æˆ‘é—®ï¼š</p>
<blockquote>
<p>â€œå¦‚æœæŸä¸ªæ–°å•†å“çªç„¶çˆ†çº¢ï¼Œç³»ç»Ÿæ¥ä¸åŠåŒæ­¥è¿›Redisæ€ä¹ˆåŠï¼Ÿâ€</p>
</blockquote>
<p>æˆ‘ç­”ï¼š</p>
<blockquote>
<p>â€œå¯ä»¥ç»“åˆæ¶ˆæ¯é˜Ÿåˆ— + å¼‚æ­¥ç›‘å¬æœºåˆ¶ï¼Œè®©è®¿é—®æ—¥å¿—å®æ—¶è§¦å‘çƒ­ç‚¹æ£€æµ‹ã€‚â€</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<ol>
<li>ç”¨æˆ·è®¿é—®è¯¦æƒ… â†’ ä¸ŠæŠ¥æ¶ˆæ¯é˜Ÿåˆ—ï¼›</li>
<li>æ¶ˆè´¹ç«¯ç›‘å¬è®¿é—®æµé‡ï¼›</li>
<li>å½“æŸä¸ªå•†å“çš„è®¿é—®é‡åœ¨1åˆ†é’Ÿå†…æš´æ¶¨è¶…è¿‡é˜ˆå€¼ï¼ˆæ¯”å¦‚1000æ¬¡ï¼‰ï¼›</li>
<li>ç«‹å³è§¦å‘é¢„åŠ è½½å…¥Redisã€‚</li>
</ol>
<p>è¿™æ ·çƒ­ç‚¹çªå‘ä¹Ÿèƒ½â€œç§’çº§å“åº”â€ã€‚</p>
<h2 data-id="heading-7">å»¶ä¼¸ï¼šè¿˜èƒ½ç”¨å“ªäº›â€œé»‘ç§‘æŠ€â€ï¼Ÿ</h2>
<p>ä¸€äº›å¤§å‚æ›´è¿›ä¸€æ­¥ï¼Œç”šè‡³ä¼šç”¨åˆ°ï¼š</p>
<ul>
<li><strong>LFU (Least Frequently Used)</strong> ç­–ç•¥æ›¿ä»£LRUï¼›</li>
<li><strong>Redis + Caffeine åŒç¼“å­˜ååŒ</strong>ï¼›</li>
<li><strong>åŸºäºæ»‘åŠ¨æ—¶é—´çª—å£çš„çƒ­åº¦æ¨¡å‹</strong>ï¼›</li>
<li><strong>æµå¼è®¡ç®—ï¼ˆFlinkï¼‰å®æ—¶ç»Ÿè®¡è®¿é—®é‡</strong>ï¼›</li>
<li><strong>AI çƒ­ç‚¹é¢„æµ‹</strong>ï¼ˆä¾‹å¦‚åŸºäºå†å²è®¿é—®åºåˆ—è®­ç»ƒæ¨¡å‹ï¼‰ã€‚</li>
</ul>
<p>è¿™äº›éƒ½èƒ½è®©çƒ­ç‚¹æ•°æ®ç»´æŠ¤æ›´æ™ºèƒ½ã€‚</p>
<h2 data-id="heading-8">æ€»ç»“å¤ç›˜ï¼šè¿™é“é¢˜åˆ°åº•è€ƒä»€ä¹ˆï¼Ÿ</h2>
<p>å…¶å®ï¼Œè¿™é“é¢˜è€ƒçš„å¹¶ä¸æ˜¯â€œä½ èƒŒäº†å¤šå°‘Rediså‘½ä»¤â€ï¼Œè€Œæ˜¯è€ƒå¯Ÿä½ èƒ½ä¸èƒ½ä»<strong>ä¸šåŠ¡é€»è¾‘ã€ç³»ç»Ÿè®¾è®¡ã€æ•°æ®æ³¢åŠ¨</strong>ä¸‰ä¸ªç»´åº¦ç»¼åˆæ€è€ƒã€‚</p>
<p>æˆ‘åæ¥æ€»ç»“äº†ä¸€å¥å£è¯€ï¼š</p>
<blockquote>
<p><strong>â€œå†·çƒ­åˆ†å±‚æ˜¯éª¨æ¶ï¼Œçƒ­åº¦ç»Ÿè®¡æ˜¯çµé­‚ï¼ŒåŠ¨æ€æ›´æ–°æ˜¯è¡€æ¶²ã€‚â€</strong></p>
</blockquote>
<p>èƒ½æŠŠè¿™ä¸‰ç‚¹è®²æ¸…æ¥šï¼Œä½ ä¸ä»…èƒ½æ‹¿ä¸‹é¢è¯•ï¼Œè¿˜èƒ½å†™å‡ºçœŸæ­£å¯è½åœ°çš„æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-9">å†™åœ¨æœ€å</h2>
<p>é‚£æ¬¡é¢è¯•æˆ‘é¡ºåˆ©è¿‡äº†ï¼Œé¢è¯•å®˜ç¬‘ç€è¯´ï¼š</p>
<blockquote>
<p>â€œä½ è¿™å›ç­”ä¸æ˜¯èƒŒä¹¦ï¼Œæ˜¯è®²äº†ä¸ªèƒ½è·‘èµ·æ¥çš„ç³»ç»Ÿã€‚â€</p>
</blockquote>
<p>æˆ‘å›åˆ°å®¶åï¼Œå¿ƒé‡Œè¿˜æŒºæœ‰æˆå°±æ„Ÿã€‚å…¶å®æ¯æ¬¡é¢è¯•é¢˜èƒŒåï¼Œéƒ½è—ç€çœŸå®çš„å·¥ç¨‹æ™ºæ…§ã€‚å®ƒé€¼ä½ å»æ€è€ƒç³»ç»Ÿçš„æœ¬è´¨ï¼Œè€Œä¸æ˜¯æ­»è®°ç¡¬èƒŒã€‚å¦‚æœä½ æ­£å‡†å¤‡é¢Javaç¤¾æ‹›é¢è¯•ï¼Œè®°ä½è¿™ç‚¹ï¼š</p>
<blockquote>
<p>æŠ€æœ¯ä¸æ˜¯å †å ï¼Œè€Œæ˜¯æ€è€ƒã€‚</p>
</blockquote>
<p>æœ€åé€ä½ ä¸€å¥è¯ï¼š</p>
<blockquote>
<p><strong>â€œçƒ­æ•°æ®æ°¸è¿œæœ‰é™ï¼Œä½†èªæ˜çš„äººèƒ½è®©æœ‰é™çš„èµ„æºå‘æŒ¥æ— é™çš„ä»·å€¼ã€‚â€</strong></p>
</blockquote>
<h2 data-id="heading-10">è¦ç‚¹å¤ç›˜ï¼ˆæ–¹ä¾¿æ”¶è—ï¼‰</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9fadda191f02425b8251bc5f36e0cadf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763518224&amp;x-signature=MMYD90xE%2FnvKR5xbWDlFSkeukFk%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h2 data-id="heading-11">END</h2>
<p>æˆ‘æ˜¯å°ç±³ï¼Œä¸€ä¸ªå–œæ¬¢åˆ†äº«æŠ€æœ¯çš„31å²ç¨‹åºå‘˜ã€‚å¦‚æœä½ å–œæ¬¢æˆ‘çš„æ–‡ç« ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·â€œ<strong>è½¯ä»¶æ±‚ç”Ÿ</strong>â€ï¼Œè·å–æ›´å¤šæŠ€æœ¯å¹²è´§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç»éªŒè´´ï¼šAgentå®æˆ˜è½åœ°è¸©å‘å…­å¤§ç»éªŒæ•™è®­ï¼Œä¿å§†æ•™ç¨‹ã€‚]]></title>    <link>https://juejin.cn/post/7571399272495857727</link>    <guid>https://juejin.cn/post/7571399272495857727</guid>    <pubDate>2025-11-12T05:41:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571399272495857727" data-draft-id="7571402480966811684" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç»éªŒè´´ï¼šAgentå®æˆ˜è½åœ°è¸©å‘å…­å¤§ç»éªŒæ•™è®­ï¼Œä¿å§†æ•™ç¨‹ã€‚"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,äº§å“"/> <meta itemprop="datePublished" content="2025-11-12T05:41:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åæ´›"/> <meta itemprop="url" content="https://juejin.cn/user/4230576474430190"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç»éªŒè´´ï¼šAgentå®æˆ˜è½åœ°è¸©å‘å…­å¤§ç»éªŒæ•™è®­ï¼Œä¿å§†æ•™ç¨‹ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4230576474430190/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åæ´›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T05:41:47.000Z" title="Wed Nov 12 2025 05:41:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>éº¦è‚¯é”¡æŠ¥å‘Šè§£è¯»ï¼šã€ŠOne year of agentic AI: Six lessons from the people doing the workã€‹</p>
<p>æŠ¥å‘Šæˆ‘å¸®ä½ ä»¬çœ‹è¿‡äº†ï¼Œæˆ‘å°†æŠ¥å‘Šæ ¸å¿ƒæ´å¯Ÿä¸æˆ‘çš„äº²èº«å®è·µç›¸èåˆï¼Œæ•´ç†äº†6000å­—å¹²è´§ã€‚</p>
<p>æ— è®ºæ‚¨æ˜¯æ­£åœ¨è§„åˆ’é¦–ä¸ªAgentï¼ˆæ™ºèƒ½ä½“ï¼‰é¡¹ç›®çš„å†³ç­–è€…ï¼Œè¿˜æ˜¯èº«å¤„ä¸€çº¿çš„AIäº§å“ç»ç†æˆ–å¼€å‘è€…ï¼Œå¸Œæœ›è¿™äº›å†…å®¹ä¸ºæ‚¨æ‹¨å¼€è¿·é›¾ï¼ŒæŒ‡å¼•æ–¹å‘ã€‚</p>
<p>å†…å®¹ä¸éº¦è‚¯é”¡æŠ¥å‘Šä¸­çš„å…­å¤§ç»éªŒæ•™è®­ç›¸ç»“åˆï¼Œæ— è®ºæ˜¯ä½ å¦åœ¨å¼€å‘Agentéƒ½å€¼å¾—ä¸€çœ‹ã€‚</p>
<h2 data-id="heading-0">ä¸€ï¼šä¸æ™ºèƒ½ä½“æ— å…³ã€ä¸å·¥ä½œæµç¨‹æœ‰å…³</h2>
<p>æˆ‘ä»¬å¸Œæœ›è½åœ°çš„æ™ºèƒ½ä½“ï¼Œé€šå¸¸æœ‰è¿™æ ·çš„ä¸€ä¸ªå®šä¹‰ï¼š</p>
<p>æ™ºèƒ½ä½“æ˜¯ä¸€ç§åŸºäºç”Ÿæˆå¼äººå·¥æ™ºèƒ½åŸºç¡€æ¨¡å‹çš„ç³»ç»Ÿï¼Œèƒ½å¤Ÿåœ¨ç°å®ä¸–ç•Œä¸­è¡ŒåŠ¨å¹¶æ‰§è¡Œå¤šæ­¥éª¤æµç¨‹ã€‚</p>
<p>æ™ºèƒ½ä½“å¯ä»¥è‡ªåŠ¨åŒ–æ‰§è¡Œå¤æ‚ä»»åŠ¡ï¼Œè€Œè¿™äº›ä»»åŠ¡é€šå¸¸éœ€è¦è¿ç”¨è‡ªç„¶è¯­è¨€å¤„ç†ï¼Œä¸”<strong>åŸæœ¬éœ€è¦äººç±»æ‰§è¡Œå’Œå¤„ç†</strong>ã€‚</p>
<p>è®©æ™ºèƒ½ä½“ä»£æ›¿äººå·¥ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¿½æ±‚çš„ç»“æœã€‚</p>
<p>è€Œåœ¨è¿½æ±‚è¿™ä¸ªç»“æœçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ›´åº”è¯¥å…³æ³¨çš„æ˜¯æµç¨‹çš„å˜é©ï¼Œè€Œä¸æ˜¯æ™ºèƒ½ä½“çš„è½åœ°ã€‚</p>
<p>å†è¯´ä¸€éï¼Œä¸è¦ç€æ€¥è½åœ°æ™ºèƒ½ä½“ï¼æµç¨‹ä¸å¤Ÿå®Œå–„çš„æƒ…å†µä¸‹ï¼Œå¤§æ¦‚ç‡ä¼šå¾—åˆ°ä¸€ä¸ªæ™ºéšœï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ™ºèƒ½ä½“ã€‚</p>
<p><strong>çœŸæ­£å®ç°ä¸šåŠ¡ä»·å€¼çš„å…³é”®æ˜¯å˜é©å·¥ä½œæµ</strong>ã€‚</p>
<p>é”™è¯¯æ€è·¯ï¼šåšä¸ªAgentå®ç°ä¼ä¸šå½“å‰çš„ä¸šåŠ¡å·¥ä½œæµç¨‹ã€‚</p>
<p>æ­£ç¡®æ€è·¯ï¼šå›´ç»•AgentæŠŠä¼ä¸šä¸šåŠ¡å·¥ä½œæµç¨‹é‡æ–°è®¾è®¡ã€‚</p>
<p>æˆ‘ä»¬éœ€é‡æ–°è®¾è®¡æ¶µç›–äººã€æµç¨‹ã€æŠ€æœ¯çš„å®Œæ•´å·¥ä½œæµï¼Œå…ˆæ¢³ç†æµç¨‹ã€è¯†åˆ«ç”¨æˆ·ç—›ç‚¹ï¼Œå¹¶è®¾è®¡æ™ºèƒ½ä½“ä¸äººç±»çš„åé¦ˆååŒæœºåˆ¶ã€‚</p>
<ul>
<li>ä¾‹å¦‚ä¿é™©è¡Œä¸šå¯é€šè¿‡è§„åˆ™ç³»ç»Ÿã€åˆ†æå‹ AIã€ç”Ÿæˆå¼ AI ä¸æ™ºèƒ½ä½“çš„ç»„åˆï¼Œé‡æ„ç†èµ”ç­‰å¤æ‚å·¥ä½œæµã€‚</li>
</ul>
<p>åœ¨é‡æ–°è®¾è®¡å·¥ä½œæµç¨‹æ—¶ï¼Œä¸€ä¸ªé‡è¦èµ·ç‚¹æ˜¯<strong>ç»˜åˆ¶æµç¨‹å›¾</strong>å¹¶<strong>è¯†åˆ«ç”¨æˆ·çš„ç—›ç‚¹</strong>ã€‚</p>
<p>è¿™ä¸€æ­¥åœ¨è®¾è®¡æ™ºèƒ½ä½“ç³»ç»Ÿæ—¶è‡³å…³é‡è¦ï¼Œè¿™ç±»ç³»ç»Ÿèƒ½å¤Ÿå‡å°‘ä¸å¿…è¦çš„å·¥ä½œï¼Œè®©æ™ºèƒ½ä½“å’Œäººç±»å¾—ä»¥åä½œï¼Œæ›´é«˜æ•ˆã€æ›´æœ‰æ•ˆåœ°å®ç°ä¸šåŠ¡ç›®æ ‡ã€‚</p>
<p>è¿™ç§åä½œå¯ä»¥é€šè¿‡å­¦ä¹ å¾ªç¯å’Œåé¦ˆæœºåˆ¶æ¥å®ç°ï¼Œä»è€Œæ„å»ºä¸€ä¸ªå®Œå–„çš„Agentã€‚</p>
<p>åœ¨Agentçš„ä¼—å¤šè½åœ°åº”ç”¨æŠ€æœ¯ä¸­ï¼Œèƒ½è®©å›¢é˜Ÿåœ¨æ°å½“çš„èŠ‚ç‚¹ä½¿ç”¨åˆé€‚çš„æŠ€æœ¯ï¼Œè¿™åœ¨å¯¹å¤æ‚ã€å¤šæ­¥éª¤çš„å·¥ä½œæµç¨‹è¿›è¡Œé‡æ–°è®¾è®¡æ—¶å°¤ä¸ºé‡è¦ã€‚</p>
<ul>
<li>å¦‚ä½•è®¾è®¡æç¤ºè¯å·¥ç¨‹ï¼Œå¤§é‡æç¤ºè¯çš„ç»„åˆã€è”åŠ¨ã€è¿­ä»£</li>
<li>è¦å¦‚ä½•è®¾è®¡å·¥å…·åˆ—è¡¨ï¼Œfunction call å’Œ æç¤ºè¯å¦‚ä½•ç»“åˆ</li>
<li>RAGç³»ç»Ÿå¦‚ä½•åœ¨Agentä¸­è½åœ°ï¼Œåº”ç”¨åœ¨å“ªäº›èŠ‚ç‚¹ï¼Œæ˜¯å¦éœ€è¦å’Œfunction callç»“åˆä½¿ç”¨</li>
<li>workflowåº”è¯¥å¦‚ä½•è®¾è®¡ï¼Œ</li>
<li>å¾®è°ƒæ˜¯å¦æœ‰å¿…è¦åŠ å…¥ï¼Œè¦å¦‚ä½•æŠ‰æ‹©</li>
</ul>
<p>ç­‰ç­‰å†…å®¹ï¼Œåœ¨æ°å½“çš„èŠ‚ç‚¹ä½¿ç”¨åˆé€‚çš„æŠ€æœ¯ï¼Œæˆ‘ä»¬çš„Agentæ‰èƒ½è¾¾åˆ°æˆ‘ä»¬çš„é¢„æœŸæ•ˆæœã€‚</p>
<p>ç”»ä¸‰ä¸ªé‡ç‚¹ï¼Œæ¥è¯´æ˜ä¸€ä¸‹Agentæµç¨‹è®¾è®¡å¯¹äºAIäº§å“ç»ç†çš„é‡è¦æ€§ï¼š</p>
<ol>
<li>
<p>å¯¹äºAIäº§å“ç»ç†æ¥è¯´ï¼Œâ€œè¿™ä¸ªéœ€æ±‚æˆ‘å°±è¦ï¼Œæ€ä¹ˆå®ç°æˆ‘ä¸ç®¡â€çš„å¹´ä»£å½»åº•è¿‡å»äº†ã€‚AIäº§å“ä½ å¿…é¡»è¦å‘ŠçŸ¥å¼€å‘æ˜ç¡®çš„æµç¨‹å®ç°ï¼Œå¦åˆ™ä½ ä»€ä¹ˆéƒ½å¾—ä¸åˆ°ã€‚</p>
</li>
<li>
<p>AIäº§å“ç»ç†è¦å¯¹AIäº§å“çš„ç»“æœè´Ÿè´£ï¼Œåœ¨æ•´ä¸ªæµç¨‹ä¸­çš„ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹å‡ºç°é—®é¢˜ï¼Œéƒ½ä¼šå¯¼è‡´è¾“å‡ºç»“æœå·®å¼‚å·¨å¤§ã€‚æ‰€ä»¥æ¸…æ™°çš„æŒ‡å¯¼æ™ºèƒ½ä½“ä¸­æ¯ä¸€ä¸ªæ­¥éª¤çš„æ‰§è¡Œé€»è¾‘ï¼Œæ›´æœ‰åŠ©äºå¯¹ç»“æœè¿›è¡Œä¼˜åŒ–ã€‚</p>
</li>
<li>
<p>ç”±äºå»¶ç»­äº†å¤§æ¨¡å‹çš„ç‰¹æ€§ï¼ŒAIäº§å“ä¹Ÿå…·æœ‰ä¸€å®šçš„ä¸å¯è§£é‡Šæ€§ï¼Œå¯¹äºé”™è¯¯çš„ç»“æœï¼Œæˆ‘ä»¬ä¿®æ­£Agentæµç¨‹ï¼Œé€šå¸¸éƒ½æ˜¯æˆ‘ä»¬æœ€åçš„æ‰‹æ®µã€‚</p>
</li>
</ol>
<h2 data-id="heading-1">äºŒï¼šæ™ºèƒ½ä½“å¹¶éæ€»èƒ½è§£å†³é—®é¢˜ï¼ˆæ™ºèƒ½ä½“çš„é€‰æ‹©ä¸åä½œï¼‰</h2>
<p>è®¤çœŸæ€è€ƒï¼š<code>é«˜æ–¹å·®ï¼ˆç»“æœä¸ç¨³å®šã€ä¸ç»Ÿä¸€ï¼‰ã€ä½æ ‡å‡†åŒ–çš„ä»»åŠ¡</code>å’Œ<code>ä½æ–¹å·®ã€é«˜æ ‡å‡†åŒ–çš„ä»»åŠ¡</code>ï¼Œå“ªä¸€ç±»ä»»åŠ¡æ›´é€‚åˆç”¨Agentæ¥ä»£æ›¿äººå·¥ã€‚</p>
<p>æˆ‘åœ¨åš1V1åŸ¹è®­çš„æ—¶å€™ï¼ŒAIäº§å“çš„éœ€æ±‚æŒ–æ˜ç¯èŠ‚ï¼Œä¸€å®šè¦å†ä¸‰å¼ºè°ƒçš„ä¸€å¥è¯ï¼š<strong>å½“éœ€æ±‚èƒ½ç”¨AIä¸”åªèƒ½ç”¨AIå®Œæˆæ—¶ï¼Œæ‰æ˜¯ä¸€ä¸ªAIçš„éœ€æ±‚</strong></p>
<p>è¿™é‡Œæœ‰ä¸¤ä¸ªé‡ç‚¹ï¼šèƒ½ç”¨AI å’Œ åªèƒ½ç”¨AI</p>
<p>ä¾‹å¦‚ï¼š</p>
<p><code>æŠŠå›ºå®šæ ¼å¼çš„æ–‡æ¡ˆè½¬æ¢æˆJSONæ ¼å¼çš„ä¿¡æ¯</code>ã€‚è¿™å°±æ˜¯ä¸€ä¸ªèƒ½ç”¨AIä½†ä¸æ˜¯åªèƒ½ç”¨AIçš„éœ€æ±‚ï¼Œè¿™å°±ä¸æ˜¯ä¸€ä¸ªAIéœ€æ±‚</p>
<p><code>æŠŠç”¨æˆ·éšæœºè¾“å…¥çš„queryè¿›è¡Œåˆ†ç±»ï¼Œç„¶åæŒ‰ç…§ä¸åŒç±»å‹è½¬æ¢æˆJSONæ ¼å¼çš„ä¿¡æ¯</code>ã€‚è¿™å°±æ˜¯ä¸€ä¸ªçœŸæ­£çš„AIéœ€æ±‚</p>
<p>å½“ä¸€ä¸ªä»»åŠ¡è¶³å¤Ÿæ ‡å‡†åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬åº”è¯¥æ›´å€¾å‘äºç”¨å›ºå®šçš„ç¨‹åºæ¥æ‰§è¡Œï¼Œæ—¢ä¿è¯å‡†ç¡®æ€§ï¼Œåˆå¯ä»¥ä¿è¯æ‰§è¡Œé€Ÿåº¦ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬éœ€æ ¹æ®ä»»åŠ¡ç‰¹æ€§é€‰æ‹©å·¥å…·ï¼Œé¿å…ç›²ç›®ä½¿ç”¨æ™ºèƒ½ä½“ã€‚</p>
<p><strong>ä½æ–¹å·®ã€é«˜æ ‡å‡†åŒ–çš„ä»»åŠ¡é€‚åˆè§„åˆ™å¼è‡ªåŠ¨åŒ–ï¼Œé«˜æ–¹å·®ã€ä½æ ‡å‡†åŒ–çš„ä»»åŠ¡æ›´é€‚é…æ™ºèƒ½ä½“ã€‚</strong></p>
<p>æ­¤å¤–ï¼ŒçœŸæ­£çš„ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä»»åŠ¡é€šå¸¸ä¸æ˜¯éé»‘å³ç™½çš„ï¼Œå¹¶ä¸æ˜¯è¦ä¹ˆæœ‰æ™ºèƒ½ä½“ï¼Œè¦ä¹ˆæ²¡æœ‰æ™ºèƒ½ä½“çš„ã€‚</p>
<p>æ™ºèƒ½ä½“çš„ä¸¤å±‚ä½œç”¨ï¼šå¸®åŠ©æˆ‘ä»¬å®Œæˆç‰¹å®šä»»åŠ¡ã€å¸®åŠ©æˆ‘ä»¬æ›´å¥½çš„å¼€å±•å·¥ä½œã€‚</p>
<p><strong>åƒä¸‡ä¸è¦å¿½ç•¥åä½œçš„é‡è¦æ€§</strong></p>
<ol>
<li>æœ‰äº›ä»»åŠ¡å¦‚æœå•çº¯çš„ç”¨ç¨‹åºå®ç°ï¼Œå¯èƒ½ä¼šè€—è´¹å¾ˆå¤šäººåŠ›å’Œæ—¶é—´æˆæœ¬ã€‚</li>
<li>æœ‰äº›ä»»åŠ¡æ— æ³•å®Œå…¨ä½¿ç”¨ç¨‹åºå®ç°ï¼Œéœ€è¦ç»“åˆä¸€å°éƒ¨åˆ†çš„å¤§æ¨¡å‹èƒ½åŠ›ã€‚</li>
</ol>
<p>åœ¨å†³ç­–æ—¶éœ€æ˜ç¡®ä»»åŠ¡çš„æ ‡å‡†åŒ–ç¨‹åº¦ï¼Œè€ƒè™‘æ›´ç®€å•çš„è‡ªåŠ¨åŒ–æ–¹æ¡ˆï¼ˆå¦‚ LLM æç¤ºè¯ï¼‰ï¼Œè€Œéé™·å…¥ â€œéæ™ºèƒ½ä½“å³æ— æ™ºèƒ½ä½“â€ çš„äºŒå…ƒæ€ç»´ã€‚</p>
<h2 data-id="heading-2">ä¸‰ï¼šæœç» â€œAI ç³Ÿç²•â€ï¼Œé‡è§†è¯„ä¼°ä¸ä¿¡ä»»</h2>
<p>å¾ˆå¤šæ™ºèƒ½ä½“åœ¨æ¼”ç¤ºä¸­è¡¨ç°äº®çœ¼ï¼Œä½†å®é™…ä½¿ç”¨ä¸­è¾“å‡ºè´¨é‡ä½ï¼ˆå³ â€œAI ç³Ÿç²•â€ï¼‰ï¼Œå¯¼è‡´ç”¨æˆ·ä¿¡ä»»æµå¤±ã€‚</p>
<p>æ˜¯çš„ï¼Œç›¸ä¿¡å¤§å®¶ä¸€å®šè§è¿‡éå¸¸å¤šäº†äº†ï¼Œæ¨å¹¿è½¯æ–‡çœ‹äº†è§‰å¾—è¿™å¯å¤ªNBäº†ï¼Œç­‰ä½“éªŒå®Œå°±å‘ç°ä¸è¿‡åˆæ˜¯ä¸€ä¸ªåƒåœ¾æ¡¶é‡Œçš„ä¸œè¥¿ç½¢äº†ã€‚</p>
<p>éº¦è‚¯é”¡æŠ¥å‘Šè¡¨ç¤ºï¼šAIäº§å“éœ€è¦æœ‰æŒç»­çš„æµ‹è¯•ã€ç›‘ç£æ‰èƒ½ç¡®ä¿æ•ˆæœï¼Œä¿è¯ä¸æ–­è¿›æ­¥ï¼Œéœ€åƒåŸ¹å…»å‘˜å·¥ä¸€æ ·åŸ¹è‚²æ™ºèƒ½ä½“ï¼Œæ˜ç¡®å…¶ â€œå²—ä½èŒè´£â€ï¼Œé€šè¿‡ç»†åŒ–çš„è¯„ä¼°æ ‡å‡†ï¼ˆå¦‚ä»»åŠ¡æˆåŠŸç‡ã€æ£€ç´¢å‡†ç¡®ç‡ã€å¹»è§‰ç‡ï¼‰æŒç»­ä¼˜åŒ–ï¼Œä¸“å®¶éœ€å…¨ç¨‹å‚ä¸æµ‹è¯•ï¼Œé¿å… â€œä¸€ä¸Šçº¿å°±ä¸ç®¡â€ã€‚</p>
<p><strong>ä»¥ä¸‹æ˜¯åœ¨å†³å®šä¸ºä¸åŒä»»åŠ¡ä½¿ç”¨å“ªç§äººå·¥æ™ºèƒ½å·¥å…·æ—¶çš„æŒ‡å—ï¼š</strong></p>
<ul>
<li>å¦‚æœä»»åŠ¡æ˜¯åŸºäºè§„åˆ™ä¸”é‡å¤æ€§çš„ï¼Œå¹¶ä¸”æœ‰ç»“æ„åŒ–è¾“å…¥ï¼ˆä¾‹å¦‚æ•°æ®å½•å…¥ï¼‰ï¼Œè¯·ä½¿ç”¨åŸºäºè§„åˆ™çš„è‡ªåŠ¨åŒ–ã€‚</li>
<li>å¦‚æœè¾“å…¥æ˜¯éç»“æ„åŒ–çš„ï¼ˆä¾‹å¦‚ï¼Œå†—é•¿çš„æ–‡æ¡£ï¼‰ï¼Œä½†ä»»åŠ¡ä»ç„¶æ˜¯æŠ½å–å¼æˆ–ç”Ÿæˆå¼çš„ï¼Œè¯·ä½¿ç”¨ç”Ÿæˆå¼äººå·¥æ™ºèƒ½ã€è‡ªç„¶è¯­è¨€å¤„ç†æˆ–é¢„æµ‹åˆ†æã€‚</li>
<li>å¦‚æœä»»åŠ¡æ¶‰åŠæ ¹æ®è¿‡å¾€æ•°æ®è¿›è¡Œåˆ†ç±»æˆ–é¢„æµ‹ï¼Œè¯·ä½¿ç”¨é¢„æµ‹åˆ†ææˆ–ç”Ÿæˆå¼äººå·¥æ™ºèƒ½ã€‚</li>
<li>å¦‚æœè¾“å‡ºéœ€è¦ç»¼åˆã€åˆ¤æ–­æˆ–åˆ›é€ æ€§è§£è¯»ï¼Œè¯·ä½¿ç”¨ç”Ÿæˆå¼äººå·¥æ™ºèƒ½ã€‚</li>
<li>å¦‚æœä»»åŠ¡æ¶‰åŠå¤šæ­¥éª¤å†³ç­–ï¼Œå¹¶ä¸”å­˜åœ¨å¤§é‡è¾“å…¥å’Œä¸Šä¸‹æ–‡é«˜åº¦å¯å˜çš„æƒ…å†µï¼Œè¯·ä½¿ç”¨AIæ™ºèƒ½ä½“ã€‚</li>
</ul>
<p><strong>ä»¥ä¸‹æ˜¯ä¸€äº›ç”¨äºè¯„ä¼°æ™ºèƒ½ä½“æ€§èƒ½çš„å…¸å‹è¯„ä¼°æ–¹æ³•ï¼š</strong></p>
<ol>
<li>ä»»åŠ¡æˆåŠŸç‡ï¼ˆç«¯åˆ°ç«¯ï¼‰ã€‚ä»»åŠ¡æˆåŠŸç‡è¡¡é‡çš„æ˜¯æ— éœ€å‡çº§å¤„ç†æˆ–äººå·¥å¹²é¢„å³å¯æ­£ç¡®å®Œæˆçš„å·¥ä½œæµæ‰€å çš„ç™¾åˆ†æ¯”ï¼Œè¿™åæ˜ äº†å®é™…åº”ç”¨ä»·å€¼ã€‚</li>
</ol>
<ul>
<li>F1åˆ†æ•°/ç²¾ç¡®ç‡å’Œå¬å›ç‡ã€‚è¯¥æŒ‡æ ‡å¹³è¡¡äº†å‡é˜³æ€§å’Œå‡é˜´æ€§ï¼Œä½¿å…¶åœ¨åˆ†ç±»ã€æå–ä»¥åŠå…·æœ‰æ˜ç¡®å¯è¡¡é‡ç»“æœï¼ˆå³æ˜¯æˆ–å¦ï¼‰çš„å†³ç­–å‡†ç¡®æ€§ä»»åŠ¡ä¸­éå¸¸æœ‰ç”¨ã€‚</li>
<li>æ£€ç´¢å‡†ç¡®æ€§ã€‚æ£€ç´¢å‡†ç¡®æ€§æ˜¯æŒ‡æ£€ç´¢åˆ°çš„æ­£ç¡®æ–‡æ¡£ã€äº‹å®æˆ–è¯æ®ç›¸å¯¹äºåŸºå‡†æ•°æ®é›†çš„ç™¾åˆ†æ¯”ï¼Œè¿™å¯¹äºæ£€ç´¢å¢å¼ºå‹å·¥ä½œæµç¨‹è‡³å…³é‡è¦ã€‚</li>
<li>è¯­ä¹‰ç›¸ä¼¼åº¦ã€‚è¯­ä¹‰ç›¸ä¼¼åº¦æ˜¯é€šè¿‡ç”Ÿæˆè¾“å‡ºä¸å‚è€ƒè¾“å‡ºä¹‹é—´åŸºäºåµŒå…¥çš„ä½™å¼¦ç›¸ä¼¼åº¦æ¥è¡¡é‡çš„ï¼Œå®ƒæ•æ‰çš„æ˜¯è¶…è¶Šç²¾ç¡®è¯è¯­åŒ¹é…çš„æ„ä¹‰å¯¹é½ã€‚</li>
</ul>
<ol start="2">
<li>å°†å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ç”¨ä½œè¯„åˆ¤è€…ï¼Œå°±æ˜¯æ ¹æ®é»„é‡‘æ ‡å‡†æˆ–äººç±»åå¥½æ¥è¯„ä¼°è¾“å‡ºç»“æœã€‚è¿™ä¸€æŒ‡æ ‡åœ¨ç”¨äºè¯„ä¼°æ¸…æ™°åº¦ã€æœ‰ç”¨æ€§å’Œæ¨ç†åˆç†æ€§ç­‰ä¸»è§‚æ€§åˆ¤æ–­æ—¶ï¼Œå…·æœ‰å¾ˆå¥½çš„å¯æ‰©å±•æ€§ã€‚</li>
</ol>
<ul>
<li>åå·®æ£€æµ‹ï¼ˆé€šè¿‡æ··æ·†çŸ©é˜µï¼‰ã€‚åå·®æ£€æµ‹åˆ©ç”¨æ··æ·†çŸ©é˜µæ¥è¡¡é‡ä¸åŒç”¨æˆ·ç¾¤ä½“åœ¨ç»“æœä¸Šçš„ç³»ç»Ÿæ€§å·®å¼‚ï¼Œè¿™äº›çŸ©é˜µèƒ½å‡¸æ˜¾åå·®çš„è¡¨ç°ä¹‹å¤„ï¼ˆä¾‹å¦‚ï¼Œå‡é˜´æ€§å¯¹æŸä¸€ç¾¤ä½“çš„å½±å“è¿‡å¤§ï¼‰ã€‚</li>
<li>å¹»è§‰ç‡ã€‚è¯¥æŒ‡æ ‡ç”¨äºè·Ÿè¸ªäº‹å®é”™è¯¯æˆ–æ— ä¾æ®å£°æ˜çš„å‡ºç°é¢‘ç‡ï¼Œä»¥ç¡®ä¿æ™ºèƒ½ä½“è¾“å‡ºå†…å®¹çš„å¯ä¿¡åº¦ã€‚</li>
<li>æ ¡å‡†è¯¯å·®ï¼ˆç½®ä¿¡åº¦ä¸å‡†ç¡®åº¦ï¼‰ã€‚æ ¡å‡†è¯¯å·®ç”¨äºè¡¡é‡æ™ºèƒ½ä½“çš„ç½®ä¿¡åº¦åˆ†æ•°æ˜¯å¦ä¸å®é™…æ­£ç¡®æ€§ç›¸ç¬¦ï¼Œè¿™åœ¨å¯¹é£é™©æ•æ„Ÿçš„å·¥ä½œæµç¨‹ä¸­ååˆ†é‡è¦ã€‚</li>
</ul>
<h2 data-id="heading-3">å››ï¼šè®©è¿½è¸ªå’ŒéªŒè¯æ¯ä¸€æ­¥éƒ½å˜å¾—ç®€å•</h2>
<p>å½“ä¼ä¸šä»…éƒ¨ç½²å°‘æ•°æ™ºèƒ½ä½“æ—¶ï¼Œäººå·¥æ’æŸ¥é”™è¯¯å°šå¯åº”å¯¹ï¼›ä½†éšç€æ™ºèƒ½ä½“æ•°é‡å¢è‡³æ•°ç™¾ã€æ•°åƒä¸ªï¼Œä»…è¿½è¸ªæœ€ç»ˆç»“æœçš„ä¼ ç»Ÿæ–¹å¼ï¼Œä¼šè®©é”™è¯¯å®šä½å˜å¾—å¦‚åŒ â€œå¤§æµ·æé’ˆâ€ã€‚</p>
<p>å› æ­¤æˆ‘ä»¬éœ€åœ¨å·¥ä½œæµä¸­åµŒå…¥ç›‘æ§ä¸è¯„ä¼°æœºåˆ¶ï¼Œå®æ—¶éªŒè¯æ¯ä¸€æ­¥è¡¨ç°ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬é¢å¤–è¯´è¯´ï¼Œå¦‚ä½•å®ç°ä¸€ä¸ªAIäº§å“çš„è¯„ä¼°åé¦ˆç³»ç»Ÿã€‚</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc8dbb6b78ec448389f5996a2665c9f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2O5rSb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763530906&amp;x-signature=ZGYSwO9AaVlyfI6IpdAxCxAOY5c%3D" alt="pinggu.jpg" width="100%" loading="lazy"/>
<p>è¯„ä¼°åé¦ˆç³»ç»Ÿæ˜¯AIäº§å“çš„ä¸‰ä¸ªè¾…åŠ©ç³»ç»Ÿä¹‹ä¸€ï¼Œä¸»è¦ç›®æ ‡æ˜¯é•¿æœŸæŒç»­çš„ç›‘æ§æˆ‘ä»¬çš„AIäº§å“ã€‚</p>
<p>ä¸ºä»€ä¹ˆä¼šæœ‰è¿™æ ·çš„ä¸€ä¸ªè¾…åŠ©ç³»ç»Ÿï¼Ÿ</p>
<p>ä¸»è¦åŸå› æ˜¯ï¼šAIäº§å“å‡ºç°é—®é¢˜åå…·æœ‰éå¸¸å¼ºçš„éšè”½æ€§ã€‚</p>
<p>ä¾‹å¦‚ï¼šç°åœ¨çº¿ä¸Šè·‘ç€æˆ‘ä»¬è°ƒè¯•å¥½çš„å®¢æœæœºå™¨äººï¼Œä½†æ˜¯å‡è®¾å½“å‰æ—¶é—´æˆ‘ä»¬çš„æœºå™¨äººå‡ºé—®é¢˜äº†ï¼Œå®ƒåœ¨è·Ÿæˆ‘ä»¬çš„ç”¨æˆ·é—²èŠã€æ‰¯æ·¡ï¼Œä½†æ˜¯å°±æ˜¯ä¸å›ç­”å®ƒåº”è¯¥å›ç­”çš„é—®é¢˜ã€‚</p>
<ul>
<li>æˆ‘ä»¬çš„å®¢æœæ˜¯å¦è¿˜åœ¨æ­£å¸¸å›å¤é—®é¢˜</li>
<li>æˆ‘ä»¬çš„å®¢æœæ˜¯å¦è¶Šæƒäº†</li>
<li>æˆ‘ä»¬çš„å®¢æœæ˜¯å¦æ³„éœ²éšç§ä¿¡æ¯äº†</li>
<li>ç­‰ç­‰....</li>
</ul>
<p>å¦‚æœæ²¡æœ‰åé¦ˆï¼Œæˆ‘ä»¬å°±æ— æ³•çŸ¥é“æ˜¯å¦å‘ç”Ÿäº†è¿™æ ·çš„äº‹æƒ…ã€‚</p>
<p>å°±åƒä¼ ç»Ÿçš„äº§å“ï¼Œ404äº†ã€502äº†ã€ç¨‹åºå´©æºƒäº†ï¼Œè¿™äº›éƒ½æœ‰ç›‘æ§ç³»ç»Ÿéšæ—¶é€šçŸ¥ï¼Œæˆ‘ä»¬AIå¯¹è¯ä¹Ÿéœ€è¦æœ‰ç›‘æ§ç³»ç»Ÿã€‚</p>




























































<table><thead><tr><th>ç»´åº¦</th><th>ç»†åˆ†æŒ‡æ ‡/åœºæ™¯</th><th>å…·ä½“è¯´æ˜/å·¥å…·/æŒ‡æ ‡</th></tr></thead><tbody><tr><td>å‡†ç¡®æ€§</td><td>æ˜ç¡®çš„ç­”æ¡ˆ</td><td>æµ‹è¯•æ•°æ®é›†çš„queryä¸answerç›´æ¥æ¯”å¯¹</td></tr><tr><td/><td>éæ˜ç¡®ç­”æ¡ˆ</td><td>æµ‹è¯•æ•°æ®é›†çš„queryã€å‚è€ƒæ–‡æ¡ˆã€æ‰“åˆ†ä½“ç³»ï¼›ä½¿ç”¨BLEUï¼ˆè¯æ±‡åŒ¹é…åº¦ï¼‰ã€ROUGEï¼ˆæ‘˜è¦è´¨é‡ï¼‰è¯„ä¼°</td></tr><tr><td>å“åº”æ—¶é—´</td><td>é¦–åŒ…å“åº”æ—¶é—´</td><td>å¤§æ¨¡å‹æœ€ç»ˆå›å¤çš„æ¨¡å‹ï¼Œå½±å“ç”¨æˆ·ä½“éªŒ</td></tr><tr><td/><td>å¹³å‡å“åº”æ—¶é•¿</td><td>å®è§‚æŠŠæ§å“åº”æ•ˆç‡</td></tr><tr><td/><td>æŠ¥è­¦é€»è¾‘</td><td>ä¸€æ®µæ—¶é—´å†…ï¼Œå‡ºç°çš„ç™¾åˆ†æ¯”ç´¯è®¡å‡ºç°æ¬¡æ•°ï¼ˆå¦‚5åˆ†é’Ÿå†…ï¼Œå‡ºç°äº†50%/80æ¬¡ï¼‰</td></tr><tr><td>æ‰§è¡ŒèŠ‚ç‚¹ä¿¡æ¯</td><td>é”™è¯¯åŸå› åˆ†æ</td><td>ä¿ç•™æ¯ä¸ªèŠ‚ç‚¹çš„æ‰§è¡Œä¿¡æ¯ï¼Œåˆ†ä¸ºå¤§æ¨¡å‹åŸå› ï¼ˆé”™è¯¯ç ã€æç¤ºè¯ï¼‰ã€ç¨‹åºåŸå› ï¼ˆjsonæ ¼å¼å…¼å®¹ï¼‰ã€ç¯å¢ƒåŸå› ï¼ˆ502ï¼‰</td></tr><tr><td>æ¶ˆè€—</td><td>è°ƒç”¨æ¬¡æ•°</td><td>æˆåŠŸæ¬¡æ•°ã€å¤±è´¥æ¬¡æ•°</td></tr><tr><td/><td>RPM</td><td>æ¯åˆ†é’Ÿè¯·æ±‚æ•°ï¼Œä½“ç°å•ä½æ—¶é—´è¯·æ±‚è´Ÿè½½</td></tr><tr><td/><td>TPM</td><td>æ¯åˆ†é’ŸTokenæ•°ï¼Œè¡¡é‡æ–‡æœ¬å¤„ç†ååé‡</td></tr><tr><td/><td>tokens</td><td>æ–‡æœ¬å¤„ç†çš„åŸºç¡€å•å…ƒæ¶ˆè€—æ•°é‡ï¼Œå…³è”æˆæœ¬ä¸æ€§èƒ½</td></tr></tbody></table>
<h2 data-id="heading-4">äº”ï¼šä¼˜å…ˆæ‰“é€ å¯å¤ç”¨æ™ºèƒ½ä½“</h2>
<p>ä¸ºå•ä¸ªä»»åŠ¡å•ç‹¬å¼€å‘æ™ºèƒ½ä½“ä¼šé€ æˆå†—ä½™æµªè´¹ï¼Œåº”èšç„¦å¯å¤ç”¨æ€§ã€‚</p>
<p>è¯†åˆ«é‡å¤å‡ºç°çš„ä»»åŠ¡ï¼Œæ„å»ºé›†ä¸­åŒ–çš„èµ„æºå¹³å°ï¼ˆå«éªŒè¯æœåŠ¡ã€å¯å¤ç”¨ä»£ç ã€è®­ç»ƒææ–™ç­‰ï¼‰ï¼Œè®©æ™ºèƒ½ä½“ç»„ä»¶èƒ½è·¨å·¥ä½œæµä½¿ç”¨ï¼Œå¯å‡å°‘ 30%-50% çš„éå¿…è¦å·¥ä½œã€‚</p>
<p>è¯†åˆ«é‡å¤æ€§ä»»åŠ¡æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ã€‚ä¼ä¸šå¯ä»¥å¼€å‘èƒ½åœ¨ä¸åŒå·¥ä½œæµä¸­è½»æ¾å¤ç”¨çš„æ™ºèƒ½ä½“åŠæ™ºèƒ½ä½“ç»„ä»¶ï¼Œå¹¶è®©å¼€å‘è€…èƒ½ä¾¿æ·åœ°ä½¿ç”¨å®ƒä»¬ã€‚</p>
<p>è¿™åŒ…æ‹¬å¼€å‘ä¸€å¥—é›†ä¸­åŒ–çš„ç»è¿‡éªŒè¯çš„æœåŠ¡ï¼ˆå¦‚å¤§æ¨¡å‹å¯è§‚æµ‹æ€§æˆ–é¢„å…ˆæ‰¹å‡†çš„æç¤ºè¯ï¼‰å’Œèµ„äº§ï¼ˆä¾‹å¦‚ï¼Œåº”ç”¨æ¨¡å¼ã€å¯å¤ç”¨ä»£ç å’ŒåŸ¹è®­ææ–™ï¼‰ï¼Œè¿™äº›æœåŠ¡å’Œèµ„äº§è¦æ˜“äºæŸ¥æ‰¾å’Œä½¿ç”¨ã€‚</p>
<p>å°†è¿™äº›åŠŸèƒ½æ•´åˆåˆ°ä¸€ä¸ªå•ä¸€å¹³å°ä¸­è‡³å…³é‡è¦ã€‚æ ¹æ®æˆ‘ä»¬çš„ç»éªŒï¼Œè¿™æœ‰åŠ©äºå‡å°‘é€šå¸¸æ‰€éœ€çš„30%åˆ°50%çš„éå¿…è¦å·¥ä½œã€‚</p>
<p><strong>å“¦è±ï¼Œä¸­å°å†æ¬¡æµ®å‡ºæ°´é¢ï¼Œä¸–ç•Œæœç„¶æ˜¯ä¸ªåœˆ</strong></p>
<p>è¿˜æ˜¯å»ºè®®å¤§å®¶åˆ©ç”¨ä¸­å°æ¥ç»Ÿä¸€ç®¡ç†å¤§æ¨¡å‹ã€æç¤ºè¯ã€çŸ¥è¯†åº“ã€function callã€æ™ºèƒ½ä½“ã€æµ‹è¯•ã€è¯„ä¼°ã€æ—¥å¿—ã€æƒé™ç­‰ã€‚</p>
<p>æ— è®ºæ˜¯å•éƒ¨é—¨è¦å¼€å‘å¤šæ™ºèƒ½ä½“ã€è¿˜æ˜¯å¤šéƒ¨é—¨è¦å„è‡ªå¼€å‘æ™ºèƒ½ä½“æˆ–è€…ä½¿ç”¨å¤§æ¨¡å‹ã€‚éƒ½ç”±ä¸­å°ç»Ÿä¸€æä¾›å¤§æ¨¡å‹çš„åŸºç¡€èƒ½åŠ›ã€‚</p>
<p>æç¤ºè¯çš„ç‰ˆæœ¬è¿­ä»£ï¼Œæµ‹è¯•ï¼Œç­‰æ“ä½œä¹Ÿå®Œå…¨åˆæç¤ºè¯å·¥ç¨‹å¸ˆåœ¨ä¸­å°å®Œæˆå³å¯ï¼Œä¸€å¥—åšå®Œï¼Œå…¨å…¬å¸å¯ç”¨ã€‚</p>
<h2 data-id="heading-5">å…­ï¼šäººç±»ä»ä¸å¯æˆ–ç¼ºï¼Œè§’è‰²ä¸è§„æ¨¡å°†æ”¹å˜</h2>
<p><strong>äººç±»å°šæœ‰å­˜åœ¨çš„å¿…è¦ã€‚å·¥ä½œæµçš„è®¾è®¡ï¼Œä¸€å®šè¦è€ƒè™‘äººç±»åŠ å…¥å·¥ä½œçš„ä¾¿æ·æ€§</strong></p>
<p>éšç€äººå·¥æ™ºèƒ½æ™ºèƒ½ä½“çš„ä¸æ–­å¢å¤šï¼Œäººç±»å°†æ‰®æ¼”ä½•ç§è§’è‰²è¿™ä¸€é—®é¢˜å¼•å‘äº†è¯¸å¤šç„¦è™‘ï¼Œ</p>
<p>ä¸€æ–¹é¢æ˜¯å¯¹å·¥ä½œå®‰å…¨æ€§çš„æ‹…å¿§ï¼Œå¦ä¸€æ–¹é¢åˆ™æ˜¯å¯¹ç”Ÿäº§åŠ›æå‡çš„è¿‡é«˜æœŸæœ›ã€‚</p>
<p>è¿™å¯¼è‡´äººä»¬å¯¹å½“ä»Šè®¸å¤šå·¥ä½œä¸­äººç±»çš„è§’è‰²äº§ç”Ÿäº†æˆªç„¶ä¸åŒçš„çœ‹æ³•ã€‚</p>
<p>æ™ºèƒ½ä½“æ— æ³•å®Œå…¨æ›¿ä»£äººç±»ï¼Œäººç±»éœ€è´Ÿè´£ç›‘ç£æ¨¡å‹å‡†ç¡®æ€§ã€å¤„ç†è¾¹ç¼˜æ¡ˆä¾‹ã€ç¡®ä¿åˆè§„ç­‰ã€‚</p>
<p>å·¥ä½œæµå˜é©åï¼Œç‰¹å®šæµç¨‹çš„äººåŠ›è§„æ¨¡å¯èƒ½ä¸‹é™ï¼Œä½†<strong>éœ€é‡æ–°è®¾è®¡äººæœºåä½œæ¨¡å¼</strong>ï¼Œ</p>
<p>æ¯”å¦‚é€šè¿‡ç®€æ´çš„å¯è§†åŒ–ç•Œé¢æå‡äº¤äº’æ•ˆç‡ï¼Œæ˜ç¡®äººç±»åœ¨å…³é”®å†³ç­–ä¸­çš„æœ€ç»ˆæŠŠæ§æƒï¼ˆå¦‚å¾‹å¸ˆå®¡æ ¸æ™ºèƒ½ä½“æ•´ç†çš„æ¡ˆä»¶æ ¸å¿ƒä¿¡æ¯ï¼‰ã€‚</p>
<p>äººæœºåä½œè®¾è®¡çš„ä¸€ä¸ªé‡è¦éƒ¨åˆ†æ˜¯å¼€å‘ç®€å•çš„å¯è§†åŒ–ç”¨æˆ·ç•Œé¢ï¼Œè®©äººä»¬èƒ½å¤Ÿè½»æ¾ä¸æ™ºèƒ½ä½“äº¤äº’ã€‚</p>
<p>å›åˆ°æœ€å¼€å§‹ï¼Œæˆ‘ä»¬è¯´è¿‡è¦å›´ç»•AgentæŠŠä¼ä¸šä¸šåŠ¡å·¥ä½œæµç¨‹é‡æ–°è®¾è®¡ã€‚ç°åœ¨è¦å†åŠ ä¸Šä¸€å¥è¯å·¥ä½œæµç¨‹é‡æ–°è®¾è®¡æ—¶ï¼Œè¦å……åˆ†è€ƒè™‘äººæœºåä½œçš„å¿…è¦æ€§å’Œä¾¿åˆ©æ€§ã€‚</p>
<h2 data-id="heading-6">ç»“è¯­</h2>
<p>Agentçš„æˆåŠŸï¼Œç»éä»…ä»…æ˜¯æŠ€æœ¯æ¨¡å‹çš„èƒœåˆ©ï¼Œè€Œæ˜¯ä¸€åœºå…³äºå·¥ä½œæµç¨‹ã€äººæœºåä½œä¸ç»„ç»‡å˜é©çš„ç³»ç»Ÿæ€§å·¥ç¨‹ã€‚</p>
<p>Agentçš„è§„æ¨¡åŒ–è½åœ°å°†ä¸å†æ˜¯å°‘æ•°ç§‘æŠ€å·¨å¤´çš„æ¸¸æˆï¼Œè€Œæ˜¯æ¯ä¸€ä¸ªè‡´åŠ›äºæ™ºèƒ½åŒ–è½¬å‹ä¼ä¸šçš„å¿…ä¿®è¯¾ã€‚ å‰æ–¹çš„é“è·¯å·²ç„¶æ¸…æ™°ï¼š</p>
<p>å¯¹äºå†³ç­–è€…ï¼Œé¦–è¦ä»»åŠ¡æ˜¯ä¸ºè¿™åœºå˜é©æ‰«æ¸…éšœç¢ï¼ŒæŠ•èµ„äºå¯å¤ç”¨çš„å¹³å°å»ºè®¾ï¼Œå¹¶æ¨åŠ¨è·¨éƒ¨é—¨çš„æµç¨‹é‡å¡‘ã€‚</p>
<p>å¯¹äºAIäº§å“ç»ç†ä¸å¼€å‘è€…ï¼Œéœ€è¦å…¼å…·æŠ€æœ¯ç†è§£ä¸ä¸šåŠ¡æ´å¯Ÿï¼Œæˆä¸ºè¿æ¥æ™ºèƒ½ä¸–ç•Œä¸çœŸå®éœ€æ±‚çš„æ¡¥æ¢ï¼Œç”¨ä¸¥è°¨çš„æµç¨‹è®¾è®¡å’Œç»†è‡´çš„è¯„ä¼°ä½“ç³»ï¼Œå°†Agentçš„æ½œåŠ›è½¬åŒ–ä¸ºå®å®åœ¨åœ¨çš„ä¸šåŠ¡ä»·å€¼ã€‚</p>
<p>è¿™åœºç”±Agentå¼•é¢†çš„å˜é©ï¼Œå…¶ç»ˆç‚¹å¹¶éä¸€ä¸ªâ€œæ— äººåŒ–â€çš„å·¥å‚ï¼Œè€Œæ˜¯ä¸€ä¸ªäººæœºååŒã€é«˜æ•ˆå…±è¿›çš„æ–°å·¥ä½œèŒƒå¼ã€‚</p>
<p>ç°åœ¨ï¼Œæ­£æ˜¯æˆ‘ä»¬æ”¾ä¸‹å¯¹æŠ€æœ¯çš„ç›²ç›®å´‡æ‹œï¼Œå›å½’ä¸šåŠ¡æœ¬è´¨ï¼Œç”¨æ™ºæ…§å’ŒåŒ å¿ƒå»è®¾è®¡å’Œæ„å»ºè¿™ä¸€æ–°èŒƒå¼çš„æœ€ä½³æ—¶æœºã€‚</p>
<p>æˆ‘æ˜¯åæ´›ï¼Œå…³æ³¨æˆ‘ï¼Œå­¦ä¹ æ›´å¤šAIè½åœ°çš„å®æˆ˜ç»éªŒä¸æŠ€å·§ã€‚</p>
<p>åŠ æ²¹ï¼Œå…±å‹‰ã€‚</p>
<blockquote>
<p>â˜ºï¸ä½ å¥½ï¼Œæˆ‘æ˜¯<strong>åæ´›</strong>ï¼ŒAll in AIå¤šå¹´ï¼Œä¸“æ³¨äºAIåœ¨äº§å“ä¾§çš„è½åœ°ä¸åº”ç”¨å’Œå…¨è‡ªåŠ¨åŒ–AIå‘˜å·¥çš„ç ”å‘ã€‚</p>
<p>ä½ å¯ä»¥åœ¨è¿™é‡Œè”ç³»æˆ‘ğŸ‘‰<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.yuque.com%2Fhualuo-fztnr%2Frnkfkn%2Fhgg1ai826tm55vxs%3FsingleDoc%23" title="https://link.juejin.cn?target=https%3A%2F%2Fwww.yuque.com%2Fhualuo-fztnr%2Frnkfkn%2Fhgg1ai826tm55vxs%3FsingleDoc%23" target="_blank">www.yuque.com/hualuo-fztnâ€¦</a></p>
</blockquote>
<h2 data-id="heading-7">ä¸“æ æ–‡ç« </h2>
<p><a href="https://juejin.cn/post/7512332419203727371" target="_blank" title="https://juejin.cn/post/7512332419203727371"># èŠèŠæˆ‘ä»¬å…¬å¸çš„AIåº”ç”¨å·¥ç¨‹å¸ˆæ¯å¤©éƒ½å¹²å•¥ï¼Ÿ</a></p>
<p><a href="https://juejin.cn/post/7547051639740743721" target="_blank" title="https://juejin.cn/post/7547051639740743721"># SEOè¿˜æ²¡æ­»ï¼ŒGEOä¹‹æˆ˜å·²ç»å¼€å§‹</a></p>
<p><a href="https://juejin.cn/post/7497890801348821055" title="https://juejin.cn/post/7497890801348821055" target="_blank"># ä»0åˆ°1æ‰“é€ ä¼ä¸šçº§AIå”®å‰æœºå™¨äººâ€”â€”å®æˆ˜æŒ‡å—äºŒï¼šRAGå·¥ç¨‹è½åœ°ä¹‹æ•°æ®å¤„ç†ç¯‡ğŸ§</a></p>
<p><a href="https://juejin.cn/post/7496397558358900790" title="https://juejin.cn/post/7496397558358900790" target="_blank"># ä»0åˆ°1æ‰“é€ ä¼ä¸šçº§AIå”®å‰æœºå™¨äººâ€”â€”å®æˆ˜æŒ‡å—ä¸€ï¼šæ ¹æ®äº§å“éœ€æ±‚å’Œå®šä½è¿›è¡Œagentæµç¨‹è®¾è®¡ğŸ§</a></p>
<p><a href="https://juejin.cn/post/7492271537010671635" title="https://juejin.cn/post/7492271537010671635" target="_blank"># èŠä¸€ä¸‹MCPï¼Œå¸Œæœ›èƒ½è®©å„ä½æ¸…é†’ä¸€ç‚¹å§ğŸ§</a></p>
<p><a href="https://juejin.cn/post/7485727472999579659" title="https://juejin.cn/post/7485727472999579659" target="_blank"># å®æˆ˜æ´¾ï¼ç™¾ä¸‡PVçš„AIäº§å“å¦‚ä½•æ­å»ºRAGç³»ç»Ÿï¼Ÿ</a></p>
<p><a href="https://juejin.cn/post/7482695183477047315" title="https://juejin.cn/post/7482695183477047315" target="_blank"># å›¢é˜Ÿè½åœ°AIäº§å“çš„å…¨æµç¨‹</a></p>
<p><a href="https://juejin.cn/post/7474925725662969883" title="https://juejin.cn/post/7474925725662969883" target="_blank"># 5000å­—é•¿æ–‡ï¼ŒAIæ—¶ä»£ä¸‹ç¨‹åºå‘˜çš„å·¨å¤§ä¼˜åŠ¿ï¼</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰‹æŠŠæ‰‹æ•™ï¼šLangChain+Qwen3æ­å»ºæœ¬åœ°RAGé—®ç­”ç³»ç»Ÿï¼Œä»0åˆ°1å…¨æµç¨‹]]></title>    <link>https://juejin.cn/post/7571355146771497002</link>    <guid>https://juejin.cn/post/7571355146771497002</guid>    <pubDate>2025-11-12T02:54:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571355146771497002" data-draft-id="7571378103281565702" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰‹æŠŠæ‰‹æ•™ï¼šLangChain+Qwen3æ­å»ºæœ¬åœ°RAGé—®ç­”ç³»ç»Ÿï¼Œä»0åˆ°1å…¨æµç¨‹"/> <meta itemprop="keywords" content="LangChain,LLM,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-12T02:54:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰‹æŠŠæ‰‹æ•™ï¼šLangChain+Qwen3æ­å»ºæœ¬åœ°RAGé—®ç­”ç³»ç»Ÿï¼Œä»0åˆ°1å…¨æµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T02:54:25.000Z" title="Wed Nov 12 2025 02:54:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p>åœ¨å¤§æ¨¡å‹è¿™ä¸ªæ—¶æœŸï¼Œâ€œç§æœ‰åŒ–éƒ¨ç½²â€ä»¥åŠâ€œä¸ªæ€§åŒ–é—®ç­”â€æˆäº†ä¼ä¸šå’Œå¼€å‘è€…çš„å…³é”®éœ€æ±‚ã€‚è¦æ˜¯æƒ³è®©AIæ ¹æ®ç‰¹å®šçš„æ–‡æ¡£ï¼ˆåƒå…¬å¸æ‰‹å†Œã€æŠ€æœ¯æ–‡æ¡£ã€å­¦æœ¯è®ºæ–‡ç­‰ï¼‰æ¥å›ç­”é—®é¢˜ï¼Œå¹¶ä¸”è¿˜æ‹…å¿§æ•°æ®éšç§ä¼šè¢«æ³„æ¼å‡ºå»ï¼Œé‚£æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGå°±æ˜¯æœ€æ£’çš„è§£å†³åŠæ³•ã€‚</p>
<p>æœ¬æ–‡å°†å¸¦å¤§å®¶ä»é›¶å¼€å§‹ï¼Œç”¨LangChainæ¡†æ¶æ•´åˆQwen3å¤§æ¨¡å‹ä¸BGE-M3åµŒå…¥æ¨¡å‹ï¼Œæ‰‹æˆ³ä¸€ä¸ªå¯æœ¬åœ°è¿è¡Œçš„ç«¯åˆ°ç«¯RAGç³»ç»Ÿã€‚æ— éœ€å¤æ‚äº‘æœåŠ¡ï¼Œåªéœ€ä¸€å°å¸¦GPUçš„ç”µè„‘ï¼Œå°±èƒ½æ‹¥æœ‰ä¸“å±çš„â€œæ–‡æ¡£é—®ç­”æœºå™¨äººâ€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39cc0e9c2ed743a0bde6c57fe6892759~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520864&amp;x-signature=k5w4J37SHJ5oRcxWF82rbfgbaPs%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/382cb81d47f044539768ddbf5521f99f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520864&amp;x-signature=Ccg%2F43YYDV9Iocj6tAJbdMzQ7d4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">01 ä¸ºä»€ä¹ˆé€‰æ‹©RAGï¼ŸèŠèŠå¤§æ¨¡å‹çš„â€œçŸ¥è¯†ç—›ç‚¹â€</h2>
<p>åœ¨æ­£å¼åŠ¨æ‰‹å‰ï¼Œæˆ‘ä»¬å…ˆææ‡‚ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼šä¸ºä»€ä¹ˆéœ€è¦RAGï¼Ÿ</p>
<p>å¤§æ¨¡å‹åƒGPT-4å’ŒQwenè¿™ç±»çš„å‘¢ï¼Œè™½ç„¶å¯ä»¥åº”å¯¹å¾ˆå¤šå¾ˆå¤šçš„é€šç”¨é—®é¢˜ï¼Œå¯æ˜¯å®ƒä»¬æœ‰ä¸¤ä¸ªç‰¹åˆ«è¦å‘½çš„ç¼ºç‚¹ï¼š</p>
<p>1.çŸ¥è¯†æ—¶æ•ˆæ€§ä¸å¤ªå¥½ï¼šè®­ç»ƒæ•°æ®æˆªæ­¢åˆ°æŸä¸ªç‰¹å®šçš„æ—¶é—´ï¼ˆå°±åƒQwen3è®­ç»ƒæ•°æ®æˆªæ­¢åˆ°2024å¹´åˆé‚£æ ·ï¼‰ï¼Œæ²¡åŠæ³•è·å–æœ€æ–°çš„ä¿¡æ¯ï¼›</p>
<p>2.ä¸ªæ€§åŒ–èƒ½åŠ›å¼±ï¼šæ— æ³•ç†è§£ä¼ä¸šå†…éƒ¨æ–‡æ¡£ã€ä¸ªäººç¬”è®°ç­‰ç§æœ‰æ•°æ®ï¼›</p>
<p>3.æ˜“äº§ç”Ÿâ€œå¹»è§‰â€ï¼šå¯¹ä¸ç¡®å®šçš„é—®é¢˜ä¼šç¼–é€ çœ‹ä¼¼åˆç†çš„ç­”æ¡ˆï¼Œæ— æ³•æº¯æºä¿¡æ¯æ¥æºã€‚</p>
<p>è€ŒRAGé€šè¿‡â€œæ£€ç´¢ç”Ÿæˆâ€çš„ç»„åˆå®Œç¾è§£å†³è¿™äº›é—®é¢˜ï¼š</p>
<ul>
<li>æ£€ç´¢ï¼šä»æœ¬åœ°æ–‡æ¡£åº“ä¸­ç²¾å‡†æ‰¾åˆ°ä¸é—®é¢˜ç›¸å…³çš„ç‰‡æ®µï¼›</li>
<li>ç”Ÿæˆï¼šè®©å¤§æ¨¡å‹åŸºäºæ£€ç´¢åˆ°çš„â€œäº‹å®ä¾æ®â€å›ç­”é—®é¢˜ï¼Œç¡®ä¿ç­”æ¡ˆå‡†ç¡®ã€å¯æº¯æº</li>
</ul>
<p>ç›´æ¥è®²RAGå°±åƒæ˜¯ç»™å¤§æ¨¡å‹å®‰ä¸Šäº†ä¸€ä¸ªæœ¬åœ°çš„çŸ¥è¯†ä»“åº“ï¼Œæ—¢èƒ½è®©å¤§æ¨¡å‹å…·å¤‡è¯­è¨€ç†è§£çš„èƒ½åŠ›ï¼Œåˆèƒ½æŠŠæ•°æ®éšç§å’ŒçŸ¥è¯†ä¸“å±çš„é—®é¢˜ç»™è§£å†³äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de2a9aebc76a479c810c67789c6c69cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520864&amp;x-signature=5eFrAFQZhGyVRcgTJsxFoSCuYpI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">02 æŠ€æœ¯é€‰å‹ï¼šä¸ºä»€ä¹ˆæ˜¯LangChain+Qwen3+BGEM3ï¼Ÿ</h2>
<p>æ­å»ºRAGç³»ç»Ÿå¾—æœ‰ä¸‰å¤§å…³é”®ç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯æ–‡æ¡£å¤„ç†æ¡†æ¶ã€å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMä»¥åŠåµŒå…¥æ¨¡å‹ï¼ˆEmbeddingï¼‰ã€‚æˆ‘ä»¬åœ¨é€‰æ‹©è¿™äº›ç»„ä»¶æ—¶ï¼Œä¸»è¦ä»â€œæœ¬åœ°åŒ–ã€å¯¹ä¸­æ–‡å‹å¥½ã€èµ„æºæ¶ˆè€—ä½â€è¿™ä¸ªæ–¹é¢å»è€ƒè™‘çš„ï¼š</p>






























<table><thead><tr><th>ç»„ä»¶ç±»å‹</th><th>é€‰å‹</th><th>æ ¸å¿ƒä¼˜åŠ¿</th></tr></thead><tbody><tr><td>æ–‡æ¡£å¤„ç†æ¡†æ¶</td><td>LangChain</td><td>ä¸€ç«™å¼æ•´åˆæ–‡æ¡£åŠ è½½ã€åˆ†å‰²ã€å‘é‡å­˜å‚¨ã€æ£€ç´¢é“¾ï¼Œé™ä½å¼€å‘é—¨æ§›</td></tr><tr><td>å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰</td><td>Qwen3-7B-Instruct</td><td>é˜¿é‡Œè¾¾æ‘©é™¢å¼€æºæ¨¡å‹ï¼Œä¸­æ–‡å¤„ç†èƒ½åŠ›å¼ºï¼Œ7B å‚æ•°æ”¯æŒ 4 ä½é‡åŒ–ï¼Œæœ¬åœ° GPU å¯è¿è¡Œ</td></tr><tr><td>åµŒå…¥æ¨¡å‹ï¼ˆEmbeddingï¼‰</td><td>BAAI/bge-m3</td><td>ä¸­ç§‘é™¢è‡ªåŠ¨åŒ–æ‰€å¼€æºï¼Œä¸­æ–‡åµŒå…¥æ•ˆæœé¡¶å°–ï¼Œæ”¯æŒæ£€ç´¢ä¼˜åŒ–æŒ‡ä»¤ï¼Œç²¾åº¦é«˜äºä¼ ç»Ÿæ¨¡å‹</td></tr><tr><td>å‘é‡æ•°æ®åº“</td><td>Chroma</td><td>è½»é‡çº§æœ¬åœ°å‘é‡åº“ï¼Œæ— éœ€å¤æ‚éƒ¨ç½²ï¼Œæ”¯æŒæŒä¹…åŒ–å­˜å‚¨ï¼Œé€‚é… LangChain</td></tr></tbody></table>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜ç”¨åˆ°BitsAndBytesé‡åŒ–æŠ€æœ¯ï¼Œå°†Qwen3-7Bæ¨¡å‹å‹ç¼©åˆ°4ä½ç²¾åº¦ï¼ŒåŸæœ¬éœ€è¦24GBæ˜¾å­˜çš„æ¨¡å‹ï¼Œç°åœ¨8GBæ˜¾å­˜å°±èƒ½è¿è¡Œï¼Œå¤§å¤§é™ä½ç¡¬ä»¶é—¨æ§›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6cface5fffa14b8d9ac0add514c4bef5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520864&amp;x-signature=VfW0PXYGsIKLRnUhrh%2F%2BXIkWjnI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">03 æ‰‹æŠŠæ‰‹æ­å»ºï¼šä»ç¯å¢ƒå‡†å¤‡åˆ°ä»£ç å®ç°</h2>
<p>æ¥ç€å¼€å§‹å®æˆ˜éƒ¨åˆ†å•¦ï¼Œå’±ä»¬æŠŠRAGç³»ç»Ÿæ­å»ºåˆ†æˆ4æ­¥æ¥è¿›è¡Œï¼Œæ¯ä¸€æ­¥éƒ½æœ‰ç€è¯¦ç»†çš„è®²è§£å‘¢ï¼Œå°±ç®—æ˜¯æ–°æ‰‹ä¹Ÿèƒ½å¤Ÿå¾ˆé¡ºç•…åœ°è·Ÿå¾—ä¸Šå“Ÿã€‚</p>
<p>3.1 ç¯å¢ƒå‡†å¤‡ï¼šå®‰è£…ä¾èµ–åº“</p>
<p>å…ˆç¡®å®šä½ çš„ç”µè„‘å·²å®‰è£…äº†Python3.8ä»¥åŠæ›´é«˜ç‰ˆæœ¬ï¼Œä¸æ­¤åŒæ—¶æ‹¥æœ‰NVIDIAGPUï¼ˆæ˜¾å­˜æœ€å¥½å¤§äºæˆ–ç­‰äº8GBï¼‰ã€‚æ¥ç€æ‰“å¼€ç»ˆç«¯ï¼Œæ¥ç€æ‰§è¡Œä»¥ä¸‹è¿™äº›å‘½ä»¤æ¥å®‰è£…ä¾èµ–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment">#Â åŸºç¡€ä¾èµ–  </span>
pip install langchain chromadb transformers torch  
  
<span class="hljs-comment">#Â æ–‡æ¡£åŠ è½½ä¸å¤„ç†  </span>
pip install sentence-transformers python-dotenv  
  
<span class="hljs-comment">#Â é‡åŒ–ç›¸å…³ï¼ˆ4ä½é‡åŒ–éœ€è¦ï¼‰  </span>
pip install bitsandbytes accelerate  
  
<span class="hljs-comment">#Â å¯é€‰ï¼šå¦‚æœéœ€è¦å¤„ç†PDF/Wordæ–‡æ¡£ï¼Œå®‰è£…é¢å¤–åŠ è½½å™¨  </span>
pip install pypdf python-docx
</code></pre>
<p>3.2 æ ¸å¿ƒä»£ç è§£æï¼šä»é…ç½®åˆ°é—®ç­”çš„å…¨æµç¨‹</p>
<p>æˆ‘ä»¬çš„ä»£ç åˆ†ä¸º5ä¸ªæ ¸å¿ƒæ¨¡å—ï¼šé…ç½®ç±»ã€RAGç³»ç»Ÿåˆå§‹åŒ–ã€æ–‡æ¡£å¤„ç†ã€å‘é‡åº“åŠ è½½ã€é—®ç­”äº¤äº’ã€‚ä¸‹é¢é€æ¨¡å—æ‹†è§£ï¼Œç†è§£æ¯ä¸ªç¯èŠ‚çš„ä½œç”¨ã€‚</p>
<ol>
<li>é…ç½®ç±»ï¼šç»Ÿä¸€ç®¡ç†å‚æ•°ï¼Œä¾¿äºä¿®æ”¹</li>
</ol>
<p>å…ˆå¯¹Configç±»è¿›è¡Œå®šä¹‰ï¼ŒæŠŠæ–‡æ¡£è·¯å¾„ã€æ¨¡å‹åç§°ã€é‡åŒ–é…ç½®ç­‰è¿™äº›å‚æ•°éƒ½é›†ä¸­åˆ°ä¸€èµ·è¿›è¡Œç®¡ç†ï¼Œè¿™æ ·ä¹‹åè¦æ˜¯éœ€è¦ä¿®æ”¹çš„è¯ï¼Œå°±ä¸ç”¨åˆ°å¤„å»å¯»æ‰¾ä»£ç å•¦ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">classConfig:  
Â  Â Â <span class="hljs-comment"># æ–‡æ¡£ç›¸å…³ï¼šæŒ‡å®šæ–‡æ¡£å­˜æ”¾ç›®å½•ã€åˆ†å—å¤§å°  </span>
Â  Â  <span class="hljs-attr">DOCUMENTS_DIR</span> =Â <span class="hljs-string">"documents"</span><span class="hljs-comment"># æœ¬åœ°æ–‡æ¡£ç›®å½•ï¼ˆéœ€æ‰‹åŠ¨åˆ›å»ºï¼‰  </span>
Â  Â  <span class="hljs-attr">CHUNK_SIZE</span> =Â <span class="hljs-number">500</span>Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment"># æ¯ä¸ªæ–‡æœ¬å—çš„å­—ç¬¦æ•°ï¼ˆä¸­æ–‡é€‚é…ï¼‰  </span>
Â  Â  <span class="hljs-attr">CHUNK_OVERLAP</span> =Â <span class="hljs-number">50</span>Â  Â  Â  Â  Â  Â <span class="hljs-comment"># å—é—´é‡å å­—ç¬¦æ•°ï¼ˆé¿å…åˆ†å‰²ä¸¢å¤±ä¸Šä¸‹æ–‡ï¼‰  </span>
Â  Â Â   
Â  Â Â <span class="hljs-comment"># æ¨¡å‹ç›¸å…³ï¼šæŒ‡å®šåµŒå…¥æ¨¡å‹å’ŒLLM  </span>
Â  Â  <span class="hljs-attr">EMBEDDING_MODEL_NAME</span> =Â <span class="hljs-string">"BAAI/bge-m3"</span><span class="hljs-comment"># ä¸­æ–‡åµŒå…¥æ•ˆæœé¡¶å°–  </span>
Â  Â  <span class="hljs-attr">LLM_MODEL_NAME</span> =Â <span class="hljs-string">"Qwen/Qwen3-7B-Instruct"</span><span class="hljs-comment"># ä¸­æ–‡å‹å¥½çš„7Bæ¨¡å‹  </span>
Â  Â Â   
Â  Â Â <span class="hljs-comment"># æ£€ç´¢ç›¸å…³ï¼šå‘é‡åº“å­˜å‚¨è·¯å¾„ã€æ£€ç´¢æ•°é‡  </span>
Â  Â  <span class="hljs-attr">VECTOR_DB_DIR</span> =Â <span class="hljs-string">"vector_db_qwen_bge_m3"</span><span class="hljs-comment"># å‘é‡åº“æŒä¹…åŒ–ç›®å½•  </span>
Â  Â  <span class="hljs-attr">TOP_K</span> =Â <span class="hljs-number">3</span>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment"># æ¯æ¬¡æ£€ç´¢è¿”å›3ä¸ªç›¸å…³ç‰‡æ®µ  </span>
Â  Â Â   
Â  Â Â <span class="hljs-comment"># é‡åŒ–é…ç½®ï¼šé™ä½æ˜¾å­˜å ç”¨  </span>
Â  Â  <span class="hljs-attr">USE_4BIT_QUANTIZATION</span> =Â <span class="hljs-literal">True</span>Â Â <span class="hljs-comment"># å¯ç”¨4ä½é‡åŒ–ï¼ˆ8GBæ˜¾å­˜å¿…å¤‡ï¼‰</span>
</code></pre>
<p>2.  RAGç³»ç»Ÿåˆå§‹åŒ–ï¼šåŠ è½½åµŒå…¥æ¨¡å‹ä¸LLM</p>
<p>RAGSystemç±»æ˜¯æ ¸å¿ƒï¼Œè´Ÿè´£åˆå§‹åŒ–åµŒå…¥æ¨¡å‹å’ŒLLMï¼Œè¿™æ˜¯ç³»ç»Ÿçš„â€œå¤§è„‘â€å’Œâ€œçœ¼ç›â€ï¼š</p>
<p>.Â åµŒå…¥æ¨¡å‹BGEM3ï¼‰ï¼šå°†æ–‡æœ¬è½¬åŒ–ä¸ºå‘é‡æ•°å­—ï¼‰ï¼Œç”¨äºåç»­æ£€ç´¢</p>
<ul>
<li>LLMï¼ˆQwen3ï¼‰ï¼šåŸºäºæ£€ç´¢åˆ°çš„æ–‡æœ¬ç‰‡æ®µç”Ÿæˆè‡ªç„¶è¯­è¨€å›ç­”</li>
</ul>
<p>ï¼ˆ1ï¼‰åˆå§‹åŒ–åµŒå…¥æ¨¡å‹ï¼šç»™æ–‡æœ¬â€œç¼–æ•°å­—â€</p>
<p>BGEM3æœ‰ä¸€ä¸ªå…³é”®ä¼˜åŒ–ï¼šæ”¯æŒæŸ¥è¯¢æŒ‡ä»¤ï¼Œèƒ½è®©æŸ¥è¯¢å‘é‡æ›´ç²¾å‡†ã€‚ä¾‹å¦‚åœ¨ç”ŸæˆæŸ¥è¯¢å‘é‡æ—¶ï¼Œæ·»åŠ â€œä¸ºè¿™ä¸ªå¥å­ç”Ÿæˆè¡¨ç¤ºä»¥ç”¨äºæ£€ç´¢ç›¸å…³æ–‡ç« ï¼šâ€å‰ç¼€æå‡æ£€ç´¢å‘½ä¸­ç‡ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">def_init_embeddings(self):  
Â  Â  print(f"åŠ è½½BGE-M3åµŒå…¥æ¨¡å‹:Â {self.config.EMBEDDING_MODEL_NAME}")  
Â  Â Â <span class="hljs-comment"># BGE-M3ä¸“å±æŸ¥è¯¢æŒ‡ä»¤ï¼Œä¼˜åŒ–ä¸­æ–‡æ£€ç´¢æ•ˆæœ  </span>
Â  Â  <span class="hljs-attr">query_instruction</span> =Â <span class="hljs-string">"ä¸ºè¿™ä¸ªå¥å­ç”Ÿæˆè¡¨ç¤ºä»¥ç”¨äºæ£€ç´¢ç›¸å…³æ–‡ç« ï¼š"</span>  
Â  Â Â returnÂ HuggingFaceBgeEmbeddings(  
Â  Â  Â  Â  <span class="hljs-attr">model_name</span>=self.config.EMBEDDING_MODEL_NAME,  
Â  Â  Â  Â  <span class="hljs-attr">model_kwargs</span>={<span class="hljs-string">'device'</span>:Â <span class="hljs-string">'cuda'</span>ifÂ torch.cuda.is_available()Â else<span class="hljs-string">'cpu'</span>},  
Â  Â  Â  Â  <span class="hljs-attr">encode_kwargs</span>={<span class="hljs-string">'normalize_embeddings'</span>:Â <span class="hljs-literal">True</span>},Â <span class="hljs-comment"># å‘é‡å½’ä¸€åŒ–ï¼Œæå‡æ£€ç´¢ç²¾åº¦  </span>
Â  Â  Â  Â  <span class="hljs-attr">query_instruction</span>=query_instruction  
Â  Â  )
</code></pre>
<p>ï¼ˆ2ï¼‰åˆå§‹åŒ–LLMï¼šç»™ç³»ç»Ÿâ€œè£…å¤§è„‘â€</p>
<p>Qwen3-7Bæ¨¡å‹é»˜è®¤éœ€è¦24GBæ˜¾å­˜ï¼Œæˆ‘ä»¬é€šè¿‡4ä½é‡åŒ–å°†å…¶å‹ç¼©åˆ°8GBä»¥å†…ã€‚è¿™ä¸ªæ—¶å€™Qwenæœ‰ä¸“å±çš„æç¤ºè¯æ ¼å¼ï¼ˆ<code>&lt;|im_start|&gt;</code>/<code>&lt;|im_end|&gt;</code>ï¼‰ï¼Œéœ€è¦è‡ªå®šä¹‰æ ¼å¼å‡½æ•°é€‚é…ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">def_init_llm(self):  
Â  Â  print(f"åŠ è½½Qwen3æ¨¡å‹:Â {self.config.LLM_MODEL_NAME}")  
Â  Â Â   
Â  Â Â <span class="hljs-comment"># 4ä½é‡åŒ–é…ç½®ï¼šå…³é”®ä¼˜åŒ–ï¼Œé™ä½æ˜¾å­˜å ç”¨  </span>
Â  Â  <span class="hljs-attr">quantization_config</span> =Â None  
Â  Â Â ifÂ self.config.USE_4BIT_QUANTIZATIONÂ andÂ torch.cuda.is_available():  
Â  Â  Â  Â  <span class="hljs-attr">quantization_config</span> = BitsAndBytesConfig(  
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">load_in_4bit</span>=<span class="hljs-literal">True</span>,  
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">bnb_4bit_use_double_quant</span>=<span class="hljs-literal">True</span>,Â <span class="hljs-comment"># åŒé‡é‡åŒ–ï¼Œè¿›ä¸€æ­¥å‹ç¼©  </span>
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">bnb_4bit_quant_type</span>=<span class="hljs-string">"nf4"</span>,Â <span class="hljs-comment"># é€‚é…å¤§æ¨¡å‹çš„é‡åŒ–ç±»å‹  </span>
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">bnb_4bit_compute_dtype</span>=torch.float16  
Â  Â  Â  Â  )  
Â  Â Â   
Â  Â Â <span class="hljs-comment"># åŠ è½½tokenizerå’Œæ¨¡å‹ï¼ˆdevice_map="auto"è‡ªåŠ¨åˆ†é…GPU/CPUï¼‰  </span>
Â  Â  <span class="hljs-attr">tokenizer</span> = AutoTokenizer.from_pretrained(self.config.LLM_MODEL_NAME)  
Â  Â  <span class="hljs-attr">model</span> = AutoModelForCausalLM.from_pretrained(  
Â  Â  Â  Â  self.config.LLM_MODEL_NAME,  
Â  Â  Â  Â  <span class="hljs-attr">quantization_config</span>=quantization_config,  
Â  Â  Â  Â  <span class="hljs-attr">device_map</span>=<span class="hljs-string">"auto"</span>,  
Â  Â  Â  Â  <span class="hljs-attr">torch_dtype</span>=torch.float16,  
Â  Â  Â  Â  <span class="hljs-attr">trust_remote_code</span>=<span class="hljs-literal">True</span><span class="hljs-comment"># åŠ è½½Qwençš„è‡ªå®šä¹‰ä»£ç   </span>
Â  Â  )  
Â  Â Â   
Â  Â Â <span class="hljs-comment"># Qwenä¸“å±æç¤ºè¯æ ¼å¼ï¼šå¿…é¡»ä¸¥æ ¼éµå¾ªï¼Œå¦åˆ™æ¨¡å‹æ— æ³•æ­£å¸¸å“åº”  </span>
Â  Â Â defqwen_prompt_format(prompt):  
Â  Â  Â  Â Â returnf"&lt;|im_start|&gt;system\nä½ æ˜¯ä¸€ä¸ª helpful çš„åŠ©æ‰‹ï¼ŒåŸºäºæä¾›çš„ä¸Šä¸‹æ–‡å›ç­”é—®é¢˜ã€‚&lt;|im_end|&gt;\n&lt;|im_start|&gt;user\n{prompt}&lt;|im_end|&gt;\n&lt;|im_start|&gt;assistant\n"  
Â  Â Â   
Â  Â Â <span class="hljs-comment"># åˆ›å»ºæ–‡æœ¬ç”Ÿæˆpipelineï¼ŒåŒ…è£…æˆLangChainçš„LLM  </span>
Â  Â  <span class="hljs-attr">pipe</span> = pipeline(  
Â  Â  Â  Â Â "text-generation",  
Â  Â  Â  Â  <span class="hljs-attr">model</span>=model,  
Â  Â  Â  Â  <span class="hljs-attr">tokenizer</span>=tokenizer,  
Â  Â  Â  Â  <span class="hljs-attr">max_new_tokens</span>=<span class="hljs-number">500</span>,Â <span class="hljs-comment"># æœ€å¤§ç”Ÿæˆ500ä¸ªå­—ç¬¦  </span>
Â  Â  Â  Â  <span class="hljs-attr">temperature</span>=<span class="hljs-number">0.7</span>,Â <span class="hljs-comment"># éšæœºæ€§ï¼š0=ä¸¥è°¨ï¼Œ1=çµæ´»  </span>
Â  Â  Â  Â  <span class="hljs-attr">repetition_penalty</span>=<span class="hljs-number">1.1</span>,Â <span class="hljs-comment"># é¿å…é‡å¤ç”Ÿæˆ  </span>
Â  Â  Â  Â  <span class="hljs-attr">pad_token_id</span>=tokenizer.pad_token_id,  
Â  Â  Â  Â  <span class="hljs-attr">eos_token_id</span>=tokenizer.eos_token_id,  
Â  Â  Â  Â  <span class="hljs-attr">prompt_format_template</span>=qwen_prompt_format  
Â  Â  )  
Â  Â Â   
Â  Â Â returnÂ HuggingFacePipeline(<span class="hljs-attr">pipeline</span>=pipe)
</code></pre>
<p>3.  æ–‡æ¡£å¤„ç†ï¼šä»â€œåŸå§‹æ–‡æ¡£â€åˆ°â€œå‘é‡åº“â€</p>
<p>æ–‡æ¡£å¤„ç†æ˜¯RAGçš„â€œåœ°åŸºâ€ï¼Œç›´æ¥å½±å“æ£€ç´¢ç²¾åº¦ã€‚è¿™ä¸€æ­¥åˆ†ä¸º3ä¸ªå…³é”®æ“ä½œï¼šåŠ è½½æ–‡æ¡£â†’åˆ†å‰²æ–‡æ¡£â†’åˆ›å»ºå‘é‡åº“ã€‚</p>
<p>(1) åŠ è½½æ–‡æ¡£ï¼šæ”¯æŒå¤šæ ¼å¼ï¼ˆTXT/PDF/Wordï¼‰</p>
<p>æˆ‘ä»¬ç”¨<code>DirectoryLoader</code>æ‰¹é‡åŠ è½½<code>documents</code>ç›®å½•ä¸‹çš„æ–‡æ¡£ï¼Œé»˜è®¤æ”¯æŒTXTæ ¼å¼ï¼Œè‹¥éœ€å¤„ç†PDF/Wordï¼Œåªéœ€æ›¿æ¢<code>loader_cls</code>ä¸º<code>PyPDFLoader/Docx2txtLoader</code>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">defload_and_process_documents(self):  
Â  Â  <span class="hljs-attr">start_time</span> = time.time()  
Â  Â Â   
Â  Â Â <span class="hljs-comment"># åŠ è½½æ–‡æ¡£ï¼šglob="*.txt"æŒ‡å®šåªåŠ è½½TXTæ–‡ä»¶  </span>
Â  Â  <span class="hljs-attr">loader</span> = DirectoryLoader(  
Â  Â  Â  Â  self.config.DOCUMENTS_DIR,  
Â  Â  Â  Â  <span class="hljs-attr">glob</span>=<span class="hljs-string">"*.txt"</span>,  
Â  Â  Â  Â  <span class="hljs-attr">loader_cls</span>=TextLoader,  
Â  Â  Â  Â  <span class="hljs-attr">loader_kwargs</span>={<span class="hljs-string">"encoding"</span>:Â <span class="hljs-string">"utf-8"</span>}Â <span class="hljs-comment"># è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜  </span>
Â  Â  )  
Â  Â  <span class="hljs-attr">documents</span> = loader.load()  
Â  Â Â   
Â  Â Â ifnotÂ documents:  
Â  Â  Â  Â Â raiseÂ ValueError(f"è¯·åœ¨Â {self.config.DOCUMENTS_DIR}Â ç›®å½•ä¸­æ·»åŠ æ–‡æ¡£")  
Â  Â  print(f"æˆåŠŸåŠ è½½Â {len(documents)}Â ä¸ªæ–‡æ¡£")
</code></pre>
<p>ï¼ˆ2ï¼‰åˆ†å‰²æ–‡æ¡£ï¼šä¸­æ–‡é€‚é…çš„â€œé»„é‡‘åˆ†å‰²ç‚¹â€</p>
<p>å¤§æ¨¡å‹æœ‰ä¸Šä¸‹æ–‡é•¿åº¦é™åˆ¶ï¼ˆå¦‚Qwen3-7Bæ”¯æŒ8k tokensï¼‰ï¼Œè‹¥ç›´æ¥å°†é•¿æ–‡æ¡£ä¼ å…¥ï¼Œä¼šä¸¢å¤±ä¸Šä¸‹æ–‡ã€‚æˆ‘ä»¬ç”¨<code>RecursiveCharacterTextSplitter</code>æŒ‰ä¸­æ–‡æ ‡ç‚¹åˆ†å‰²ï¼Œé¿å…å°†å®Œæ•´å¥å­åˆ‡æ•£ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># åˆ†å‰²æ–‡æ¡£ï¼šæŒ‰â€œæ®µè½â†’å¥å­â†’æ ‡ç‚¹â€åˆ†å±‚åˆ†å‰²ï¼Œä¿ç•™ä¸­æ–‡è¯­ä¹‰  </span>
<span class="hljs-attr">text_splitter</span> = RecursiveCharacterTextSplitter(  
Â  Â  <span class="hljs-attr">chunk_size</span>=self.config.CHUNK_SIZE,  
Â  Â  <span class="hljs-attr">chunk_overlap</span>=self.config.CHUNK_OVERLAP,  
Â  Â  <span class="hljs-attr">separators</span>=[<span class="hljs-string">"\n\n"</span>,Â <span class="hljs-string">"\n"</span>,Â <span class="hljs-string">"ã€‚"</span>,Â <span class="hljs-string">"ï¼Œ"</span>,Â <span class="hljs-string">"ï¼›"</span>,Â <span class="hljs-string">"ã€"</span>,Â <span class="hljs-string">" "</span>,Â <span class="hljs-string">""</span>]Â <span class="hljs-comment"># ä¸­æ–‡ä¼˜å…ˆåˆ†å‰²ç¬¦  </span>
)  
<span class="hljs-attr">texts</span> = text_splitter.split_documents(documents)  
print(f"æ–‡æ¡£åˆ†å‰²å®Œæˆï¼Œå¾—åˆ° {len(texts)} ä¸ªæ–‡æœ¬å—")
</code></pre>
<p>ï¼ˆ3ï¼‰åˆ›å»ºå‘é‡åº“ï¼šå°†æ–‡æœ¬å—â€œå­˜å…¥æ•°æ®åº“â€</p>
<p>ç”¨Chromaå‘é‡åº“å­˜å‚¨æ–‡æœ¬å—çš„å‘é‡ï¼Œåç»­æ£€ç´¢æ—¶ï¼Œåªéœ€å°†é—®é¢˜è½¬åŒ–ä¸ºå‘é‡ï¼Œä¸åº“ä¸­çš„å‘é‡è®¡ç®—ç›¸ä¼¼åº¦ï¼Œå°±èƒ½å¿«é€Ÿæ‰¾åˆ°ç›¸å…³ç‰‡æ®µï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># åˆ›å»ºå¹¶æŒä¹…åŒ–å‘é‡åº“ï¼šä¸‹æ¬¡è¿è¡Œå¯ç›´æ¥åŠ è½½ï¼Œæ— éœ€é‡æ–°å¤„ç†  </span>
<span class="hljs-attr">self.vector_db</span> = Chroma.from_documents(  
Â  Â  <span class="hljs-attr">documents</span>=texts,  
Â  Â  <span class="hljs-attr">embedding</span>=self.embeddings,  
Â  Â  <span class="hljs-attr">persist_directory</span>=self.config.VECTOR_DB_DIR  
)  
self.vector_db.persist()  
  
<span class="hljs-comment"># åˆ›å»ºæ£€ç´¢é“¾ï¼šå°†â€œæ£€ç´¢â€ä¸â€œç”Ÿæˆâ€ä¸²è”  </span>
<span class="hljs-attr">self.qa_chain</span> = RetrievalQA.from_chain_type(  
Â  Â  <span class="hljs-attr">llm</span>=self.llm,  
Â  Â  <span class="hljs-attr">chain_type</span>=<span class="hljs-string">"stuff"</span>,Â <span class="hljs-comment"># ç®€å•é«˜æ•ˆï¼šå°†æ‰€æœ‰ç›¸å…³ç‰‡æ®µä¼ å…¥LLM  </span>
Â  Â  <span class="hljs-attr">retriever</span>=self.vector_db.as_retriever(search_kwargs={<span class="hljs-string">"k"</span>:Â self.config.TOP_K}),  
Â  Â  <span class="hljs-attr">return_source_documents</span>=<span class="hljs-literal">True</span><span class="hljs-comment"># è¿”å›æºæ–‡æ¡£ï¼Œä¾¿äºæº¯æº  </span>
)  
  
<span class="hljs-attr">end_time</span> = time.time()  
print(f"æ–‡æ¡£å¤„ç†å®Œæˆï¼Œè€—æ—¶ {end_time - start_time:.2f} ç§’")
</code></pre>
<p>4.  é—®ç­”äº¤äº’ï¼šä»â€œé—®é¢˜â€åˆ°â€œç­”æ¡ˆâ€çš„é—­ç¯</p>
<p>æœ€åï¼Œå®ç°<code>query</code>æ–¹æ³•ï¼Œæ¥æ”¶ç”¨æˆ·é—®é¢˜ï¼Œè°ƒç”¨æ£€ç´¢é“¾ç”Ÿæˆç­”æ¡ˆï¼Œå¹¶è¿”å›æºæ–‡æ¡£ç‰‡æ®µï¼ˆä¾¿äºéªŒè¯ç­”æ¡ˆå‡†ç¡®æ€§ï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python">defquery(self, question: <span class="hljs-built_in">str</span>):  
Â  Â Â ifnotÂ self.qa_chain:  
Â  Â  Â  Â Â <span class="hljs-keyword">raise</span>Â ValueError(<span class="hljs-string">"è¯·å…ˆåŠ è½½æ–‡æ¡£æˆ–å‘é‡åº“"</span>)  
Â  Â Â   
Â  Â  start_time = time.time()  
Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¤„ç†æŸ¥è¯¢:Â <span class="hljs-subst">{question}</span>"</span>)  
Â  Â Â   
Â  Â Â <span class="hljs-comment"># æ‰§è¡Œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼šå…ˆæ£€ç´¢ç›¸å…³ç‰‡æ®µï¼Œå†ç”Ÿæˆç­”æ¡ˆ  </span>
Â  Â  result = self.qa_chain({<span class="hljs-string">"query"</span>: question})  
Â  Â Â   
Â  Â  end_time = time.time()  
Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æŸ¥è¯¢å¤„ç†å®Œæˆï¼Œè€—æ—¶Â <span class="hljs-subst">{end_time - start_time:<span class="hljs-number">.2</span>f}</span>Â ç§’"</span>)  
Â  Â Â   
Â  Â Â <span class="hljs-keyword">return</span>Â result
</code></pre>
<p>5.  ä¸»å‡½æ•°ï¼šä¸€é”®è¿è¡Œç³»ç»Ÿ</p>
<p>åœ¨<code>ifÂ nameÂ == "main":</code>ä¸­ï¼Œæˆ‘ä»¬å®ç°â€œè‡ªåŠ¨åˆ›å»ºç¤ºä¾‹æ–‡æ¡£â†’åˆå§‹åŒ–ç³»ç»Ÿâ†’åŠ è½½å‘é‡åº“â†’æµ‹è¯•é—®ç­”â€çš„å…¨æµç¨‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">if</span>Â __name__ ==Â <span class="hljs-string">"__main__"</span>:  
Â  Â  os.environ[<span class="hljs-string">"TOKENIZERS_PARALLELISM"</span>] =Â <span class="hljs-string">"false"</span><span class="hljs-comment"># é¿å…tokenizerå¹¶è¡Œè­¦å‘Š  </span>
Â  Â Â   
Â  Â Â <span class="hljs-comment"># åˆå§‹åŒ–é…ç½®ä¸ç³»ç»Ÿ  </span>
Â  Â  config = Config()  
Â  Â  rag_system = RAGSystem(config)  
Â  Â Â   
Â  Â Â <span class="hljs-comment"># é¦–æ¬¡è¿è¡Œï¼šåˆ›å»ºç¤ºä¾‹æ–‡æ¡£ï¼ˆæ•°æ®ç§‘å­¦ã€LLMåº”ç”¨ç›¸å…³ï¼‰  </span>
Â  Â Â ifnotÂ os.listdir(config.DOCUMENTS_DIR):  
Â  Â  Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">"åˆ›å»ºç¤ºä¾‹æ–‡æ¡£..."</span>)  
Â  Â  Â  Â  create_sample_documents(config.DOCUMENTS_DIR)  
Â  Â Â   
Â  Â Â <span class="hljs-comment"># åŠ è½½å‘é‡åº“ï¼šå­˜åœ¨åˆ™ç›´æ¥åŠ è½½ï¼Œä¸å­˜åœ¨åˆ™é‡æ–°å¤„ç†æ–‡æ¡£  </span>
Â  Â Â ifnotÂ rag_system.load_existing_vector_db():  
Â  Â  Â  Â  rag_system.load_and_process_documents()  
Â  Â Â   
Â  Â Â <span class="hljs-comment"># æµ‹è¯•ä¸­æ–‡é—®ç­”  </span>
Â  Â  test_questions = [  
Â  Â  Â  Â Â <span class="hljs-string">"æ•°æ®ç§‘å­¦å·¥ä½œæµåŒ…æ‹¬å“ªäº›æ­¥éª¤ï¼Ÿ"</span>,  
Â  Â  Â  Â Â <span class="hljs-string">"å¤§è¯­è¨€æ¨¡å‹æœ‰å“ªäº›ä¸»è¦åº”ç”¨åœºæ™¯ï¼Ÿ"</span>  
Â  Â  ]  
Â  Â Â   
Â  Â Â <span class="hljs-comment"># è¾“å‡ºç»“æœï¼šåŒ…å«ç­”æ¡ˆå’Œæºæ–‡æ¡£ç‰‡æ®µ  </span>
Â  Â Â <span class="hljs-keyword">for</span>Â questionÂ <span class="hljs-keyword">in</span>Â test_questions:  
Â  Â  Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span>Â +Â <span class="hljs-string">"="</span>*<span class="hljs-number">80</span>)  
Â  Â  Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é—®é¢˜:Â <span class="hljs-subst">{question}</span>"</span>)  
Â  Â  Â  Â  result = rag_system.query(question)  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nå›ç­”:"</span>)  
Â  Â  Â  Â  <span class="hljs-built_in">print</span>(result[<span class="hljs-string">"result"</span>])  
Â  Â  Â  Â Â   
Â  Â  Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nç›¸å…³æ–‡æ¡£ç‰‡æ®µ:"</span>)  
Â  Â  Â  Â Â <span class="hljs-keyword">for</span>Â i, docÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">enumerate</span>(result[<span class="hljs-string">"source_documents"</span>],Â <span class="hljs-number">1</span>):  
Â  Â  Â  Â  Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næ–‡æ¡£Â <span class="hljs-subst">{i}</span>:"</span>)  
Â  Â  Â  Â  Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ¥æº:Â <span class="hljs-subst">{doc.metadata[<span class="hljs-string">'source'</span>]}</span>"</span>)  
Â  Â  Â  Â  Â  Â  <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å†…å®¹:Â <span class="hljs-subst">{doc.page_content[:<span class="hljs-number">200</span>]}</span>..."</span>)
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6fb3a938b574b2bbb96cf755f1ab02b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520864&amp;x-signature=bhOZiK1DK6JO3fKyhBhPYCVJkfw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">04 è¿è¡Œæµ‹è¯•ï¼šçœ‹çœ‹ç³»ç»Ÿå®é™…æ•ˆæœ</h2>
<p>å°†ä»£ç ä¿å­˜ä¸º<code>rag_qwe_bge.py</code>ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿è¡Œï¼š</p>
<pre><code class="hljs">python rag_qwen_bge.py
</code></pre>
<p>é¦–æ¬¡è¿è¡Œæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ï¼š</p>
<ol>
<li>åœ¨<code>documents</code>ç›®å½•åˆ›å»º2ä¸ªç¤ºä¾‹æ–‡æ¡£ï¼ˆæ•°æ®ç§‘å­¦ã€LLMåº”ç”¨ï¼‰ï¼›</li>
<li>ä¸‹è½½BGE-M3å’ŒQwen3-7Bæ¨¡å‹ï¼ˆçº¦10GBï¼Œéœ€è€å¿ƒç­‰å¾…ï¼‰ï¼›</li>
<li>å¤„ç†æ–‡æ¡£å¹¶åˆ›å»ºå‘é‡åº“ï¼Œå­˜å…¥<code>vector*db*qwen*bge*m3</code>ç›®å½•ã€‚</li>
</ol>
<p>è¿è¡ŒæˆåŠŸåï¼Œä¼šè¾“å‡ºå¦‚ä¸‹ç»“æœï¼ˆä»¥â€œæ•°æ®ç§‘å­¦å·¥ä½œæµåŒ…æ‹¬å“ªäº›æ­¥éª¤ï¼Ÿâ€ä¸ºä¾‹ï¼‰ï¼š</p>
<p>================================</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">é—®é¢˜: æ•°æ®ç§‘å­¦å·¥ä½œæµåŒ…æ‹¬å“ªäº›æ­¥éª¤ï¼Ÿ  </span>
<span class="hljs-section">å¤„ç†æŸ¥è¯¢: æ•°æ®ç§‘å­¦å·¥ä½œæµåŒ…æ‹¬å“ªäº›æ­¥éª¤ï¼Ÿ  </span>
<span class="hljs-section">å›ç­”:  </span>
æ•°æ®ç§‘å­¦å·¥ä½œæµé€šå¸¸åŒ…æ‹¬ä»¥ä¸‹9ä¸ªæ­¥éª¤ï¼š  
é—®é¢˜å®šä¹‰ï¼šæ˜ç¡®ä¸šåŠ¡é—®é¢˜å’Œåˆ†æç›®æ ‡ï¼Œè¿™æ˜¯æ•´ä¸ªå·¥ä½œæµçš„åŸºç¡€ï¼Œç¡®ä¿åç»­å·¥ä½œå›´ç»•æ ¸å¿ƒéœ€æ±‚å±•å¼€ï¼›  
æ•°æ®æ”¶é›†ï¼šè·å–ç›¸å…³çš„ç»“æ„åŒ–ï¼ˆå¦‚æ•°æ®åº“è¡¨ï¼‰å’Œéç»“æ„åŒ–ï¼ˆå¦‚æ–‡æœ¬ã€å›¾ç‰‡ï¼‰æ•°æ®ï¼›  
æ•°æ®æ¸…æ´—ï¼šå¤„ç†æ•°æ®ä¸­çš„ç¼ºå¤±å€¼ã€å¼‚å¸¸å€¼å’Œé‡å¤æ•°æ®ï¼Œä¿è¯æ•°æ®è´¨é‡ï¼Œé¿å…å½±å“åç»­åˆ†æç»“æœï¼›  
æ¢ç´¢æ€§æ•°æ®åˆ†æï¼šé€šè¿‡ç»Ÿè®¡æ–¹æ³•å’Œå¯è§†åŒ–å·¥å…·ï¼Œç†è§£æ•°æ®åˆ†å¸ƒã€å˜é‡å…³ç³»ç­‰ï¼ŒæŒ–æ˜æ•°æ®æ½œåœ¨è§„å¾‹ï¼›  
ç‰¹å¾å·¥ç¨‹ï¼šå¯¹åŸå§‹æ•°æ®è¿›è¡Œè½¬æ¢ã€ç­›é€‰æˆ–åˆ›å»ºæ–°ç‰¹å¾ï¼Œç”Ÿæˆé€‚åˆæœºå™¨å­¦ä¹ æ¨¡å‹è¾“å…¥çš„ç‰¹å¾ï¼›  
æ¨¡å‹æ„å»ºï¼šæ ¹æ®é—®é¢˜ç±»å‹ï¼ˆå¦‚åˆ†ç±»ã€å›å½’ï¼‰é€‰æ‹©é€‚å½“çš„æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œå¹¶ä½¿ç”¨æ¸…æ´—åçš„æ•°æ®é›†è¿›è¡Œè®­ç»ƒï¼›  
æ¨¡å‹è¯„ä¼°ï¼šä½¿ç”¨å‡†ç¡®ç‡ã€å¬å›ç‡ã€RMSEç­‰æŒ‡æ ‡è¯„ä¼°æ¨¡å‹æ€§èƒ½ï¼Œåˆ¤æ–­æ¨¡å‹æ˜¯å¦æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ï¼›  
ç»“æœéƒ¨ç½²ï¼šå°†è®­ç»ƒå¥½çš„æ¨¡å‹é›†æˆåˆ°ä¸šåŠ¡æµç¨‹ä¸­ï¼ˆå¦‚APIæ¥å£ã€ä¸šåŠ¡ç³»ç»Ÿï¼‰ï¼Œå®ç°å®é™…åº”ç”¨ï¼›  
ç›‘æ§ä¸æ›´æ–°ï¼šæŒç»­ç›‘æ§æ¨¡å‹åœ¨å®é™…åœºæ™¯ä¸­çš„æ€§èƒ½ï¼Œå½“æ•°æ®åˆ†å¸ƒæˆ–ä¸šåŠ¡éœ€æ±‚å˜åŒ–æ—¶ï¼Œå®šæœŸæ›´æ–°æ¨¡å‹ã€‚  
  
<span class="hljs-section">ç›¸å…³æ–‡æ¡£ç‰‡æ®µ:  </span>
æ–‡æ¡£ 1:  
<span class="hljs-section">æ¥æº: documents/data_science.txt  </span>
<span class="hljs-section">å†…å®¹: æ•°æ®ç§‘å­¦æ˜¯ä¸€ä¸ªè·¨å­¦ç§‘é¢†åŸŸï¼Œç»“åˆäº†ç»Ÿè®¡å­¦ã€æœºå™¨å­¦ä¹ ã€æ•°æ®å¯è§†åŒ–å’Œé¢†åŸŸçŸ¥è¯†ï¼Œ  </span>
ç”¨äºä»ç»“æ„åŒ–å’Œéç»“æ„åŒ–æ•°æ®ä¸­æå–æœ‰ä»·å€¼çš„ insightsã€‚  
æ•°æ®ç§‘å­¦å·¥ä½œæµé€šå¸¸åŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤ï¼š  
é—®é¢˜å®šä¹‰ï¼šæ˜ç¡®ä¸šåŠ¡é—®é¢˜å’Œåˆ†æç›®æ ‡  
æ•°æ®æ”¶é›†ï¼šè·å–ç›¸å…³çš„ç»“æ„åŒ–å’Œéç»“æ„åŒ–æ•°æ®  
æ•°æ®æ¸…æ´—ï¼šå¤„ç†ç¼ºå¤±å€¼ã€å¼‚å¸¸å€¼å’Œé‡å¤æ•°æ®  
æ¢ç´¢æ€§æ•°æ®åˆ†æï¼šç†è§£æ•°æ®åˆ†å¸ƒå’Œå˜é‡å…³ç³»  
ç‰¹å¾å·¥ç¨‹ï¼šåˆ›å»ºé€‚åˆå»ºæ¨¡çš„ç‰¹å¾  
æ¨¡å‹æ„å»ºï¼šé€‰æ‹©å’Œè®­ç»ƒé€‚å½“çš„æœºå™¨å­¦ä¹ æ¨¡å‹  
æ¨¡å‹è¯„ä¼°ï¼šä½¿ç”¨åˆé€‚çš„æŒ‡æ ‡è¯„ä¼°æ¨¡å‹æ€§èƒ½  
ç»“æœéƒ¨ç½²ï¼šå°†æ¨¡å‹é›†æˆåˆ°ä¸šåŠ¡æµç¨‹ä¸­  
ç›‘æ§ä¸æ›´æ–°ï¼šæŒç»­ç›‘æ§æ¨¡å‹æ€§èƒ½å¹¶å®šæœŸæ›´æ–°
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95d11bbd3e2b4fc487ac488539659b36~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520864&amp;x-signature=mC8zwmhu3cPgQY9Aaj5CWa2%2F0eY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">05 æ€»ç»“ï¼šå±•æœ›ï¼Œä¸€ç‚¹å»ºè®®</h2>
<ol>
<li>æœ¬æ–‡é’ˆå¯¹ä¼ä¸šç§æœ‰åŒ–ã€ä¸ªæ€§åŒ–é—®ç­”éœ€æ±‚ï¼Œæä¾›äº†åŸºäºLangChain+Qwen3+BGEM3çš„æœ¬åœ°RAGç³»ç»Ÿæ­å»ºå…¨æµç¨‹ï¼Œé€šè¿‡4ä½é‡åŒ–æŠ€æœ¯é™ä½ç¡¬ä»¶é—¨æ§›è‡³8GBæ˜¾å­˜ï¼Œæ–°æ‰‹ä¹Ÿèƒ½è½åœ°ã€‚</li>
<li>è¿™ä¸ªæ–¹æ¡ˆé€šè¿‡â€œæ£€ç´¢ç”Ÿæˆâ€è¿™ç§æ–¹å¼ï¼ŒæŠŠå¤§æ¨¡å‹å­˜åœ¨çš„çŸ¥è¯†ä¼šè¿‡æ—¶ã€å®¹æ˜“äº§ç”Ÿâ€œå¹»è§‰â€ä»¥åŠæ²¡æ³•é€‚åº”ç§æœ‰æ•°æ®è¿™äº›éš¾é¢˜ç»™è§£å†³äº†ï¼Œæ—¢ä¿éšœäº†æ•°æ®çš„å®‰å…¨ï¼Œåˆä¿è¯äº†å›ç­”çš„å‡†ç¡®æ€§ã€‚</li>
<li>ä»¥åæœ¬åœ°RAGä¼šæœç€æ›´è½»ã€æ›´å¤šç§æ¨¡å¼çš„æ–¹å‘å»å‘å±•å‘¢ï¼Œç»™æ–°æ‰‹çš„å»ºè®®æ˜¯å…ˆä»æœ€åŸºæœ¬çš„æ–‡æœ¬å¼€å§‹ï¼ŒæŠŠæµç¨‹ç†Ÿæ‚‰èµ·æ¥ï¼Œç­‰è¿‡äº†è¿™ä¸€æ­¥ä¹‹åå‘¢ï¼Œå°±å¯ä»¥å»æ‘¸ç´¢å‚æ•°çš„ä¼˜åŒ–ä»¥åŠå¤šç§æŠ€æœ¯èåˆè¿™æ ·æ›´é«˜çº§çš„ä¸œè¥¿å•¦ã€‚</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/672ce22d989a4f1f8f4e4124bfc0ccc0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763520864&amp;x-signature=6EStMAexj5jmQm7CozNYjqRLA8I%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">å­¦ä¹ èµ„æºæ¨è</h3>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[[Java] ç”¨ Swing ç”Ÿæˆä¸€ä¸ªæœ€å¤§å…¬çº¦æ•°è®¡ç®—å™¨ï¼ˆå±•ç¤ºè®¡ç®—è¿‡ç¨‹ï¼‰]]></title>    <link>https://juejin.cn/post/7571396053879750708</link>    <guid>https://juejin.cn/post/7571396053879750708</guid>    <pubDate>2025-11-12T05:06:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571396053879750708" data-draft-id="7571272874847076404" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="[Java] ç”¨ Swing ç”Ÿæˆä¸€ä¸ªæœ€å¤§å…¬çº¦æ•°è®¡ç®—å™¨ï¼ˆå±•ç¤ºè®¡ç®—è¿‡ç¨‹ï¼‰"/> <meta itemprop="keywords" content="åç«¯,Java,æ•°å­¦"/> <meta itemprop="datePublished" content="2025-11-12T05:06:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é‡‘éŠ€éŠ…éµ"/> <meta itemprop="url" content="https://juejin.cn/user/747323638159757"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            [Java] ç”¨ Swing ç”Ÿæˆä¸€ä¸ªæœ€å¤§å…¬çº¦æ•°è®¡ç®—å™¨ï¼ˆå±•ç¤ºè®¡ç®—è¿‡ç¨‹ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/747323638159757/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é‡‘éŠ€éŠ…éµ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T05:06:30.000Z" title="Wed Nov 12 2025 05:06:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="an-old-hope">.hljs-comment,.hljs-quote{color:#b6b18b}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#eb3c54}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#e7ce56}.hljs-attribute{color:#ee7c2b}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#4fb4d7}.hljs-section,.hljs-title{color:#78bb65}.hljs-keyword,.hljs-selector-tag{color:#b45ea4}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1c1d21;color:#c0c5ce}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç”¨ <code>Swing</code> ç”Ÿæˆä¸€ä¸ªæœ€å¤§å…¬çº¦æ•°è®¡ç®—å™¨ï¼ˆå±•ç¤ºè®¡ç®—è¿‡ç¨‹ï¼‰</h2>
<h3 data-id="heading-1">èƒŒæ™¯</h3>
<p>åœ¨ <a href="https://juejin.cn/post/7569876592920854543" target="_blank" title="https://juejin.cn/post/7569876592920854543">[Java] ç”¨ Swing ç”Ÿæˆä¸€ä¸ªæœ€å¤§å…¬çº¦æ•°è®¡ç®—å™¨</a> ä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬å®Œæˆäº†ä¸€ä¸ªç®€å•çš„æœ€å¤§å…¬çº¦æ•°è®¡ç®—å™¨ã€‚ç¤ºä¾‹æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤º â¬‡ï¸</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad38e3e6786b4d139549d1f2a28e1eca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeR6YqA6YqF6ZC1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763529223&amp;x-signature=4IJWmyDwdMoNG%2BD0g78Ab4ztjPg%3D" alt="image.png" loading="lazy"/></p>
<p>å®ƒè™½ç„¶å¯ä»¥è®¡ç®—å‡ºä¸¤ä¸ªæ•´æ•°çš„æœ€å¤§å…¬çº¦æ•°ï¼ˆ<strong>ä¸¤ä¸ªæ•´æ•°ä¸èƒ½åŒæ—¶ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span></strong>ï¼‰ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å±•ç¤ºè®¡ç®—è¿‡ç¨‹ã€‚æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿå…³å¿ƒè®¡ç®—çš„è¿‡ç¨‹ï¼Œä¾‹å¦‚æˆ‘ä»¬åˆ©ç”¨æ¬§å‡ é‡Œå¾—ç®—æ³•è®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mi>c</mi><mi>d</mi><mo stretchy="false">(</mo><mn>210</mn><mo separator="true">,</mo><mn>135</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">gcd(210, 135)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">c</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord">210</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">135</span><span class="mclose">)</span></span></span></span></span> æ—¶ï¼Œè®¡ç®—è¿‡ç¨‹å¯ä»¥è¿™æ ·è¡¨ç¤º</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mn>210</mn><mo>=</mo><mn>1</mn><mo>Ã—</mo><mn>135</mn><mo>+</mo><mn>75</mn><mspace linebreak="newline"/><mn>135</mn><mo>=</mo><mn>1</mn><mo>Ã—</mo><mn>75</mn><mo>+</mo><mn>60</mn><mspace linebreak="newline"/><mn>75</mn><mo>=</mo><mn>1</mn><mo>Ã—</mo><mn>60</mn><mo>+</mo><mn>15</mn><mspace linebreak="newline"/><mn>60</mn><mo>=</mo><mn>4</mn><mo>Ã—</mo><mn>15</mn><mo>+</mo><mn>0</mn><mspace linebreak="newline"/></mrow><annotation encoding="application/x-tex">210 = 1 \times 135 + 75\\
135 = 1 \times 75 + 60\\
75 = 1 \times 60 + 15\\
60 = 4 \times 15 + 0\\</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">210</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">135</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">75</span></span><span class="mspace newline"/><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">135</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">75</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">60</span></span><span class="mspace newline"/><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">75</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">60</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">15</span></span><span class="mspace newline"/><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">60</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">4</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">15</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span><span class="mspace newline"/></span></span></span></div>
<p>æ‰€ä»¥</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>g</mi><mi>c</mi><mi>d</mi><mo stretchy="false">(</mo><mn>210</mn><mo separator="true">,</mo><mn>135</mn><mo stretchy="false">)</mo><mspace linebreak="newline"/><mo>=</mo><mi>g</mi><mi>c</mi><mi>d</mi><mo stretchy="false">(</mo><mn>135</mn><mo separator="true">,</mo><mn>75</mn><mo stretchy="false">)</mo><mspace linebreak="newline"/><mo>=</mo><mi>g</mi><mi>c</mi><mi>d</mi><mo stretchy="false">(</mo><mn>75</mn><mo separator="true">,</mo><mn>60</mn><mo stretchy="false">)</mo><mspace linebreak="newline"/><mo>=</mo><mi>g</mi><mi>c</mi><mi>d</mi><mo stretchy="false">(</mo><mn>60</mn><mo separator="true">,</mo><mn>15</mn><mo stretchy="false">)</mo><mspace linebreak="newline"/><mo>=</mo><mn>15</mn></mrow><annotation encoding="application/x-tex">gcd(210, 135)\\
= gcd(135, 75)\\
= gcd(75, 60)\\
= gcd(60, 15)\\
= 15</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">c</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord">210</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">135</span><span class="mclose">)</span></span><span class="mspace newline"/><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">c</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord">135</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">75</span><span class="mclose">)</span></span><span class="mspace newline"/><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">c</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord">75</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">60</span><span class="mclose">)</span></span><span class="mspace newline"/><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">c</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord">60</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">15</span><span class="mclose">)</span></span><span class="mspace newline"/><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">15</span></span></span></span></span></div>
<p>å¦‚æœæœ€å¤§å…¬çº¦æ•°è®¡ç®—å™¨å¯ä»¥æŠŠä¸Šè¿°è¿‡ç¨‹å±•ç¤ºå‡ºæ¥ï¼Œé‚£å°±æ–¹ä¾¿å¤šäº†ã€‚æ‰€ä»¥æˆ‘ä»¬çš„ç›®æ ‡æ˜¯åšå‡ºä¸‹å›¾è¿™æ ·çš„ç•Œé¢ â¬‡ï¸</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cff5d47cabca42389748ee517c914035~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeR6YqA6YqF6ZC1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763529223&amp;x-signature=mQdD3uFvM7kGTM9pUTvbDanE3jQ%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">æ­£æ–‡</h3>
<h4 data-id="heading-3">éœ€è¦ä¿å­˜å“ªäº›æ•°æ®</h4>
<p>æˆ‘ä»¬å…ˆçœ‹çœ‹å¦‚æœéœ€è¦å±•ç¤ºå®Œæ•´çš„è®¡ç®—è¿‡ç¨‹ï¼Œéœ€è¦ä¿å­˜å“ªäº›æ•°æ®ã€‚ä»¥è®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mi>c</mi><mi>d</mi><mo stretchy="false">(</mo><mn>210</mn><mo separator="true">,</mo><mn>135</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">gcd(210, 135)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">c</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord">210</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">135</span><span class="mclose">)</span></span></span></span></span> ä¸ºä¾‹ï¼Œå®ƒçš„è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ â¬‡ï¸</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mn>210</mn><mo>=</mo><mn>1</mn><mo>Ã—</mo><mn>135</mn><mo>+</mo><mn>75</mn><mspace linebreak="newline"/><mn>135</mn><mo>=</mo><mn>1</mn><mo>Ã—</mo><mn>75</mn><mo>+</mo><mn>60</mn><mspace linebreak="newline"/><mn>75</mn><mo>=</mo><mn>1</mn><mo>Ã—</mo><mn>60</mn><mo>+</mo><mn>15</mn><mspace linebreak="newline"/><mn>60</mn><mo>=</mo><mn>4</mn><mo>Ã—</mo><mn>15</mn><mo>+</mo><mn>0</mn><mspace linebreak="newline"/></mrow><annotation encoding="application/x-tex">210 = 1 \times 135 + 75\\
135 = 1 \times 75 + 60\\
75 = 1 \times 60 + 15\\
60 = 4 \times 15 + 0\\</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">210</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">135</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">75</span></span><span class="mspace newline"/><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">135</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">75</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">60</span></span><span class="mspace newline"/><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">75</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">60</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">15</span></span><span class="mspace newline"/><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">60</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">4</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">15</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span><span class="mspace newline"/></span></span></span></div>
<p>æ¯ä¸€è¡Œéƒ½å¯ä»¥çœ‹æˆæ˜¯ â¬‡ï¸ ï¼ˆ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">q_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> è¡¨ç¤ºç¬¬ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"/><span class="mord mathnormal">i</span></span></span></span></span> è¡Œçš„ <strong>å•†</strong>ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">r_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> è¡¨ç¤ºç¬¬ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"/><span class="mord mathnormal">i</span></span></span></span></span> è¡Œçš„ <strong>ä½™æ•°</strong>ï¼‰</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub><mo>=</mo><msub><mi>q</mi><mi>i</mi></msub><mo>Ã—</mo><msub><mi>b</mi><mi>i</mi></msub><mo>+</mo><msub><mi>r</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i = q_i \times b_i + r_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span></div>
<p>çœ‹æ¥æˆ‘ä»¬åªéœ€è¦å°†æ‰€æœ‰çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>q</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>b</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>r</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i, q_i, b_i, r_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> éƒ½ä¿å­˜ä¸‹æ¥ï¼ˆ<strong>è®¡ç®—ç»“æŸçš„æ¡ä»¶æ˜¯å‡ºç°æŸä¸ª <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mi>i</mi></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">r_i=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span></strong>ï¼‰ï¼Œå°±å¯ä»¥å°†å®Œæ•´çš„è®¡ç®—è¿‡ç¨‹å±•ç¤ºå‡ºæ¥ã€‚</p>
<h4 data-id="heading-4">è¾“å…¥çš„æ ‡å‡†åŒ–</h4>
<h5 data-id="heading-5">åªä½¿ç”¨éè´Ÿæ•°</h5>
<p>å¯¹éè´Ÿæ•´æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">a</span></span></span></span></span> è€Œè¨€ï¼Œä¸éš¾éªŒè¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mi>c</mi><mi>d</mi><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mo>=</mo><mi>g</mi><mi>c</mi><mi>d</mi><mo stretchy="false">(</mo><mo>âˆ’</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">gcd(a, b) = gcd(-a, b)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">c</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">c</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord">âˆ’</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">b</span><span class="mclose">)</span></span></span></span></span>ï¼Œæ‰€ä»¥å¦‚æœç”¨æˆ·è¾“å…¥äº† <strong>è´Ÿæ•´æ•°</strong>ï¼Œæˆ‘ä»¬æ€»æ˜¯å¯ä»¥å°†å…¶å…ˆè½¬åŒ–ä¸º <strong>éè´Ÿæ•´æ•°</strong>ï¼Œç„¶åå†è¿›è¡Œè®¡ç®—ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åªè¦è®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mi>c</mi><mi>d</mi><mo stretchy="false">(</mo><mi mathvariant="normal">âˆ£</mi><mi>a</mi><mi mathvariant="normal">âˆ£</mi><mo separator="true">,</mo><mi mathvariant="normal">âˆ£</mi><mi>b</mi><mi mathvariant="normal">âˆ£</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">gcd(|a|, |b|)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">c</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord">âˆ£</span><span class="mord mathnormal">a</span><span class="mord">âˆ£</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">âˆ£</span><span class="mord mathnormal">b</span><span class="mord">âˆ£</span><span class="mclose">)</span></span></span></span></span>ï¼Œå°±å¯ä»¥å¾—åˆ° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mi>c</mi><mi>d</mi><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">gcd(a, b)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">c</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">b</span><span class="mclose">)</span></span></span></span></span> çš„å€¼ã€‚</p>
<h5 data-id="heading-6">å‚æ•°é¡ºåºçš„è°ƒæ•´</h5>
<p>ç”±äº <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mi>c</mi><mi>d</mi><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mo>=</mo><mi>g</mi><mi>c</mi><mi>d</mi><mo stretchy="false">(</mo><mi>b</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">gcd(a, b) = gcd(b, a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">c</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">c</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span></span></span></span></span>ï¼Œæ‰€ä»¥å¯ä»¥è°ƒæ•´å‚æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo separator="true">,</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">a, b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">b</span></span></span></span></span> çš„é¡ºåºã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mi>c</mi><mi>d</mi><mo stretchy="false">(</mo><mi>max</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>min</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">gcd(\max(a,b), \min(a, b))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">c</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mop">max</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop">min</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">b</span><span class="mclose">))</span></span></span></span></span> ä»è€Œå¾—åˆ° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mi>c</mi><mi>d</mi><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">gcd(a, b)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">c</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">b</span><span class="mclose">)</span></span></span></span></span>ã€‚</p>
<h4 data-id="heading-7">ä»£ç </h4>
<h5 data-id="heading-8">è®¡ç®—æœ€å¤§å…¬çº¦æ•°çš„ä»£ç </h5>
<p>åŸºäºä¸Šæ–‡çš„è®¨è®ºï¼Œå¯ä»¥å†™å‡ºä¿å­˜äº†è®¡ç®—è¿‡ç¨‹ä¸­æ‰€æœ‰æ•°æ®çš„ <code>GCDCalculator</code> ç±» â¬‡ï¸</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">GCDCalculator</span> {

    <span class="hljs-keyword">record</span> <span class="hljs-title class_">CalculationDetails</span><span class="hljs-params">(
            BigInteger a,
            BigInteger b,
            BigInteger gcd,
            java.util.List&lt;Equation&gt; equationHolders
    )</span> {
        <span class="hljs-comment">/**
         * A holder class for equation a = q * b + r
         */</span>
        <span class="hljs-keyword">record</span> <span class="hljs-title class_">Equation</span><span class="hljs-params">(
                BigInteger a,
                BigInteger q,
                BigInteger b,
                BigInteger r
        )</span> {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> {
                <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"%s = %s Ã— %s + %s"</span>, a, q, b, r);
            }
        }
    }

    <span class="hljs-keyword">private</span> BigInteger <span class="hljs-title function_">toBigInteger</span><span class="hljs-params">(String num)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigInteger</span>(num.trim());
    }

    <span class="hljs-keyword">public</span> CalculationDetails <span class="hljs-title function_">calculateGCD</span><span class="hljs-params">(String a, String b)</span> {
        <span class="hljs-keyword">return</span> calculateGCD(toBigInteger(a), toBigInteger(b));
    }

    <span class="hljs-keyword">public</span> CalculationDetails <span class="hljs-title function_">calculateGCD</span><span class="hljs-params">(BigInteger a, BigInteger b)</span> {
        a = a.abs();
        b = b.abs();

        BigInteger biggerOne;
        BigInteger smallerOne;
        <span class="hljs-keyword">if</span> (a.compareTo(b) &gt;= <span class="hljs-number">0</span>) {
            biggerOne = a;
            smallerOne = b;
        } <span class="hljs-keyword">else</span> {
            biggerOne = b;
            smallerOne = a;
        }

        <span class="hljs-keyword">if</span> (biggerOne.equals(BigInteger.ZERO)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"ä¸¤ä¸ªæ•´æ•°ä¸èƒ½éƒ½æ˜¯0ï¼"</span>);
        }
        <span class="hljs-type">var</span> <span class="hljs-variable">equations</span> <span class="hljs-operator">=</span> doCalculateGCD(biggerOne, smallerOne);
        <span class="hljs-type">BigInteger</span> <span class="hljs-variable">gcd</span> <span class="hljs-operator">=</span> smallerOne.equals(BigInteger.ZERO) ? biggerOne : equations.getFirst().b;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CalculationDetails</span>(biggerOne, smallerOne, gcd, equations);
    }

    <span class="hljs-keyword">private</span> java.util.List&lt;CalculationDetails.Equation&gt; doCalculateGCD(BigInteger a, BigInteger b) {
        <span class="hljs-keyword">if</span> (b.equals(BigInteger.ZERO)) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        }

        <span class="hljs-type">var</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> doCalculateGCD(b, a.mod(b));
        result.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CalculationDetails</span>.Equation(a, a.divide(b), b, a.mod(b)));
        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">GCDCalculator</span> <span class="hljs-variable">gcdCalculator</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GCDCalculator</span>();
        System.out.println(gcdCalculator.calculateGCD(<span class="hljs-string">"0"</span>, <span class="hljs-string">"1"</span>).gcd); <span class="hljs-comment">// should be 1</span>
        System.out.println(gcdCalculator.calculateGCD(<span class="hljs-string">"1"</span>, <span class="hljs-string">"0"</span>).gcd); <span class="hljs-comment">// should be 1</span>
        System.out.println(gcdCalculator.calculateGCD(<span class="hljs-string">"100"</span>, <span class="hljs-string">"20"</span>).gcd); <span class="hljs-comment">// should be 20</span>
        System.out.println(gcdCalculator.calculateGCD(<span class="hljs-string">"10"</span>, <span class="hljs-string">"12"</span>).gcd); <span class="hljs-comment">// should be 2</span>
        System.out.println(gcdCalculator.calculateGCD(<span class="hljs-string">"233"</span>, <span class="hljs-string">"144"</span>).gcd); <span class="hljs-comment">// should be 1</span>
        System.out.println(gcdCalculator.calculateGCD(<span class="hljs-string">"12345"</span>, <span class="hljs-string">"67890"</span>).gcd); <span class="hljs-comment">// should be 15</span>
        System.out.println(gcdCalculator.calculateGCD(<span class="hljs-string">"54321"</span>, <span class="hljs-string">"9876"</span>).gcd); <span class="hljs-comment">// should be 3</span>
        System.out.println(gcdCalculator.calculateGCD(<span class="hljs-string">"1160718174"</span>, <span class="hljs-string">"316258250"</span>).gcd); <span class="hljs-comment">// should be 1078</span>
    }
}
</code></pre>
<p>å®ƒçš„ <code>main</code> å‡½æ•°é‡Œåšäº†ä¸€äº›æµ‹è¯•ï¼Œæœ€å¤§å…¬çº¦æ•°çš„è®¡ç®—ç»“æœç»“æœç¬¦åˆé¢„æœŸã€‚</p>
<h4 data-id="heading-9">å®Œæ•´çš„ä»£ç </h4>
<p>æ—¢ç„¶æˆ‘ä»¬çš„ä»£ç å·²ç»å¯ä»¥ä¿å­˜åœ¨è®¡ç®—æœ€å¤§å…¬çº¦æ•°çš„è¿‡ç¨‹ä¸­ç”¨åˆ°çš„æ‰€æœ‰æ•°æ®ï¼Œé‚£ä¹ˆå†æ·»åŠ ä¸€äº›å’Œ <code>Swing</code> ç›¸å…³çš„ä»£ç å°±å¯ä»¥å°†è®¡ç®—è¿‡ç¨‹å±•ç¤ºå‡ºæ¥äº†ã€‚ç”±äº <code>Swing</code> çš„çŸ¥è¯†ä½“ç³»æ¯”è¾ƒå¤æ‚ï¼Œè€Œå®ƒçš„çŸ¥è¯†ç‚¹ä¹Ÿæ¯”è¾ƒé›¶æ•£ï¼Œæˆ‘è‡ªå·±ä¹Ÿåªæ˜¯å­¦äº†ç‚¹çš®æ¯›ï¼Œå’Œ <code>Swing</code> ç›¸å…³çš„ä»£ç å°±ä¸å±•å¼€è¯´äº†ã€‚å®Œæ•´çš„ä»£ç å¦‚ä¸‹ â¬‡ï¸</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> javax.swing.*;
<span class="hljs-keyword">import</span> java.awt.*;
<span class="hljs-keyword">import</span> java.awt.event.ActionEvent;
<span class="hljs-keyword">import</span> java.awt.event.ActionListener;
<span class="hljs-keyword">import</span> java.math.BigInteger;
<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.StringJoiner;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DetailedGCDCalculator</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        EventQueue.invokeLater(() -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">CalcGreatestCommonDivisor</span>().show());
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CalcGreatestCommonDivisor</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> {
        <span class="hljs-type">SimpleFrame</span> <span class="hljs-variable">frame</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleFrame</span>(<span class="hljs-string">"æœ€å¤§å…¬çº¦æ•°è®¡ç®—å™¨"</span>);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(<span class="hljs-literal">true</span>);

        <span class="hljs-type">JPanel</span> <span class="hljs-variable">northPanel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JPanel</span>();
        northPanel.setLayout(<span class="hljs-keyword">new</span> <span class="hljs-title class_">GridLayout</span>(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>));
        <span class="hljs-type">JTextField</span> <span class="hljs-variable">textField1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JTextField</span>();
        northPanel.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>(<span class="hljs-string">"è¯·è¾“å…¥ç¬¬ä¸€ä¸ªæ•´æ•°ï¼š"</span>, SwingConstants.RIGHT));
        northPanel.add(textField1);
        northPanel.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>(<span class="hljs-string">"è¯·è¾“å…¥ç¬¬äºŒä¸ªæ•´æ•°ï¼š"</span>, SwingConstants.RIGHT));
        <span class="hljs-type">JTextField</span> <span class="hljs-variable">textField2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JTextField</span>();
        northPanel.add(textField2);

        <span class="hljs-type">JTextArea</span> <span class="hljs-variable">textArea</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JTextArea</span>(<span class="hljs-number">8</span>, <span class="hljs-number">20</span>);
        textArea.setText(<span class="hljs-string">"è¿™é‡Œç”¨äºå±•ç¤ºæœ€å¤§å…¬çº¦æ•°çš„è®¡ç®—è¿‡ç¨‹"</span>);
        textArea.setEditable(<span class="hljs-literal">false</span>);
        textArea.setLineWrap(<span class="hljs-literal">true</span>);
        <span class="hljs-type">JScrollPane</span> <span class="hljs-variable">scrollPane</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JScrollPane</span>(textArea);
        frame.add(scrollPane, BorderLayout.CENTER);

        frame.add(northPanel, BorderLayout.NORTH);
        <span class="hljs-type">JButton</span> <span class="hljs-variable">button</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JButton</span>(<span class="hljs-string">"è®¡ç®—æœ€å¤§å…¬çº¦æ•°"</span>);
        button.addActionListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ActionListener</span>() {
            <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">GCDCalculator</span> <span class="hljs-variable">calculator</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GCDCalculator</span>();

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">actionPerformed</span><span class="hljs-params">(ActionEvent e)</span> {
                <span class="hljs-type">String</span> <span class="hljs-variable">rawA</span> <span class="hljs-operator">=</span> textField1.getText();
                <span class="hljs-type">String</span> <span class="hljs-variable">rawB</span> <span class="hljs-operator">=</span> textField2.getText();
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-type">var</span> <span class="hljs-variable">calculationDetails</span> <span class="hljs-operator">=</span> calculator.calculateGCD(rawA, rawB);
                    <span class="hljs-type">String</span> <span class="hljs-variable">text</span> <span class="hljs-operator">=</span> buildText(calculationDetails);
                    textArea.setText(text);
                } <span class="hljs-keyword">catch</span> (NumberFormatException exception) {
                    textArea.setText(<span class="hljs-string">"Exception found "</span> + exception.getMessage());
                } <span class="hljs-keyword">catch</span> (IllegalArgumentException exception) {
                    textArea.setText(exception.getMessage());
                }
            }
        });
        frame.add(button, BorderLayout.SOUTH);
    }

    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">buildText</span><span class="hljs-params">(GCDCalculator.CalculationDetails calculationDetails)</span> {
        <span class="hljs-type">BigInteger</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> calculationDetails.a();
        <span class="hljs-type">BigInteger</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> calculationDetails.b();
        <span class="hljs-type">BigInteger</span> <span class="hljs-variable">gcd</span> <span class="hljs-operator">=</span> calculationDetails.gcd();
        List&lt;GCDCalculator.CalculationDetails.Equation&gt; equations = calculationDetails.equationHolders();

        <span class="hljs-type">StringJoiner</span> <span class="hljs-variable">joiner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringJoiner</span>(System.lineSeparator());
        <span class="hljs-keyword">if</span> (equations.isEmpty()) { <span class="hljs-comment">// then b is 0 (so gcd(a, b) = a)</span>
            joiner.add(String.format(<span class="hljs-string">"%s = 0 Ã— %s"</span>, b, a));
            joiner.add(String.format(<span class="hljs-string">"%s = 1 Ã— %s"</span>, a, a));
            joiner.add(String.format(<span class="hljs-string">"æ‰€ä»¥ gcd(%s, %s) = %s"</span>, a, b, gcd));
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-type">String</span> <span class="hljs-variable">firstLine</span> <span class="hljs-operator">=</span> String.format(<span class="hljs-string">"é€šè¿‡ä½¿ç”¨æ¬§å‡ é‡Œå¾—ç®—æ³•ï¼Œå¯ä»¥è®¡ç®—å‡º gcd(%s, %s) = %s"</span>, a, b, gcd.toString());
            joiner.add(firstLine);
            joiner.add(<span class="hljs-string">"å…·ä½“è¿‡ç¨‹å¦‚ä¸‹"</span>);
            joiner.add(<span class="hljs-string">""</span>);
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> equation : equations.reversed()) {
                joiner.add(equation.toString());
            }
            joiner.add(<span class="hljs-string">""</span>);
            joiner.add(<span class="hljs-string">"æ‰€ä»¥"</span>);
            <span class="hljs-type">boolean</span> <span class="hljs-variable">isFirstLine</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> equation : equations.reversed()) {
                <span class="hljs-keyword">if</span> (isFirstLine) {
                    joiner.add(String.format(<span class="hljs-string">"gcd(%s, %s)"</span>, equation.a(), equation.b()));
                    isFirstLine = <span class="hljs-literal">false</span>;
                } <span class="hljs-keyword">else</span> {
                    joiner.add(String.format(<span class="hljs-string">"= gcd(%s, %s)"</span>, equation.a(), equation.b()));
                }
            }
            joiner.add(<span class="hljs-string">"= "</span> + gcd);
        }
        <span class="hljs-keyword">return</span> joiner.toString();
    }
}


<span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleFrame</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">JFrame</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SimpleFrame</span><span class="hljs-params">(String title)</span> {
        setTitle(title);
        setSize(<span class="hljs-number">600</span>, <span class="hljs-number">400</span>);
    }
}


<span class="hljs-keyword">class</span> <span class="hljs-title class_">GCDCalculator</span> {

    <span class="hljs-keyword">record</span> <span class="hljs-title class_">CalculationDetails</span><span class="hljs-params">(
            BigInteger a,
            BigInteger b,
            BigInteger gcd,
            java.util.List&lt;Equation&gt; equationHolders
    )</span> {
        <span class="hljs-comment">/**
         * A holder class for equation a = q * b + r
         */</span>
        <span class="hljs-keyword">record</span> <span class="hljs-title class_">Equation</span><span class="hljs-params">(
                BigInteger a,
                BigInteger q,
                BigInteger b,
                BigInteger r
        )</span> {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> {
                <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"%s = %s Ã— %s + %s"</span>, a, q, b, r);
            }
        }
    }

    <span class="hljs-keyword">private</span> BigInteger <span class="hljs-title function_">toBigInteger</span><span class="hljs-params">(String num)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigInteger</span>(num.trim());
    }

    <span class="hljs-keyword">public</span> CalculationDetails <span class="hljs-title function_">calculateGCD</span><span class="hljs-params">(String a, String b)</span> {
        <span class="hljs-keyword">return</span> calculateGCD(toBigInteger(a), toBigInteger(b));
    }

    <span class="hljs-keyword">public</span> CalculationDetails <span class="hljs-title function_">calculateGCD</span><span class="hljs-params">(BigInteger a, BigInteger b)</span> {
        a = a.abs();
        b = b.abs();

        BigInteger biggerOne;
        BigInteger smallerOne;
        <span class="hljs-keyword">if</span> (a.compareTo(b) &gt;= <span class="hljs-number">0</span>) {
            biggerOne = a;
            smallerOne = b;
        } <span class="hljs-keyword">else</span> {
            biggerOne = b;
            smallerOne = a;
        }

        <span class="hljs-keyword">if</span> (biggerOne.equals(BigInteger.ZERO)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"ä¸¤ä¸ªæ•´æ•°ä¸èƒ½éƒ½æ˜¯0ï¼"</span>);
        }
        <span class="hljs-type">var</span> <span class="hljs-variable">equations</span> <span class="hljs-operator">=</span> doCalculateGCD(biggerOne, smallerOne);
        <span class="hljs-type">BigInteger</span> <span class="hljs-variable">gcd</span> <span class="hljs-operator">=</span> smallerOne.equals(BigInteger.ZERO) ? biggerOne : equations.getFirst().b;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CalculationDetails</span>(biggerOne, smallerOne, gcd, equations);
    }

    <span class="hljs-keyword">private</span> java.util.List&lt;CalculationDetails.Equation&gt; doCalculateGCD(BigInteger a, BigInteger b) {
        <span class="hljs-keyword">if</span> (b.equals(BigInteger.ZERO)) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        }

        <span class="hljs-type">var</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> doCalculateGCD(b, a.mod(b));
        result.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CalculationDetails</span>.Equation(a, a.divide(b), b, a.mod(b)));
        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">GCDCalculator</span> <span class="hljs-variable">gcdCalculator</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GCDCalculator</span>();
        System.out.println(gcdCalculator.calculateGCD(<span class="hljs-string">"0"</span>, <span class="hljs-string">"1"</span>).gcd); <span class="hljs-comment">// should be 1</span>
        System.out.println(gcdCalculator.calculateGCD(<span class="hljs-string">"1"</span>, <span class="hljs-string">"0"</span>).gcd); <span class="hljs-comment">// should be 1</span>
        System.out.println(gcdCalculator.calculateGCD(<span class="hljs-string">"100"</span>, <span class="hljs-string">"20"</span>).gcd); <span class="hljs-comment">// should be 20</span>
        System.out.println(gcdCalculator.calculateGCD(<span class="hljs-string">"10"</span>, <span class="hljs-string">"12"</span>).gcd); <span class="hljs-comment">// should be 2</span>
        System.out.println(gcdCalculator.calculateGCD(<span class="hljs-string">"233"</span>, <span class="hljs-string">"144"</span>).gcd); <span class="hljs-comment">// should be 1</span>
        System.out.println(gcdCalculator.calculateGCD(<span class="hljs-string">"12345"</span>, <span class="hljs-string">"67890"</span>).gcd); <span class="hljs-comment">// should be 15</span>
        System.out.println(gcdCalculator.calculateGCD(<span class="hljs-string">"54321"</span>, <span class="hljs-string">"9876"</span>).gcd); <span class="hljs-comment">// should be 3</span>
        System.out.println(gcdCalculator.calculateGCD(<span class="hljs-string">"1160718174"</span>, <span class="hljs-string">"316258250"</span>).gcd); <span class="hljs-comment">// should be 1078</span>
    }
}
</code></pre>
<p>è¯·å°†ä»¥ä¸Šä»£ç ä¿å­˜ä¸º <code>DetailedGCDCalculator.java</code>ã€‚
ç”¨ä¸‹æ–¹çš„å‘½ä»¤å¯ä»¥ç¼–è¯‘ <code>DetailedGCDCalculator.java</code> å¹¶è¿è¡Œå…¶ä¸­çš„ <code>main</code> å‡½æ•°ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">javac DetailedGCDCalculator.java
java DetailedGCDCalculator
</code></pre>
<h4 data-id="heading-10">è¿è¡Œç¤ºä¾‹</h4>
<h5 data-id="heading-11">åˆšå¯åŠ¨æ—¶</h5>
<p>åˆšå¯åŠ¨æ—¶ï¼Œè¿˜æ²¡æœ‰ä»»ä½•è¾“å…¥
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a70dbdb5ddef48ae91232f50f0895bdc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeR6YqA6YqF6ZC1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763529223&amp;x-signature=Lo3%2FZgC0Mu159omB%2BoKBJqqFVLg%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-12">æµ‹è¯•ç”¨ä¾‹ <code>1</code>: è®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mi>c</mi><mi>d</mi><mo stretchy="false">(</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">gcd(1, 0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">c</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">0</span><span class="mclose">)</span></span></span></span></span></h5>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4813103088504f6c85749819b001d775~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeR6YqA6YqF6ZC1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763529223&amp;x-signature=PZ%2BfvVNrUDO78wmv8CNVACk2y7g%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-13">æµ‹è¯•ç”¨ä¾‹ <code>2</code>: è®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mi>c</mi><mi>d</mi><mo stretchy="false">(</mo><mn>31415</mn><mo separator="true">,</mo><mn>92653</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">gcd(31415, 92653)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">c</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord">31415</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">92653</span><span class="mclose">)</span></span></span></span></span></h5>
<p>å®Œæ•´çš„è®¡ç®—æ­¥éª¤æ¯”è¾ƒé•¿ï¼Œæˆ‘å°†çª—å£æ”¾å¤§åï¼Œæˆªå›¾å¦‚ä¸‹ â¬‡ï¸</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4099ecac3ea45bf97dc081735d95604~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeR6YqA6YqF6ZC1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763529223&amp;x-signature=KeiZpSrUz2s8hNEnHI09SjPJPo0%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-14">æµ‹è¯•ç”¨ä¾‹ <code>3</code>: è®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mi>c</mi><mi>d</mi><mo stretchy="false">(</mo><mn>2584</mn><mo separator="true">,</mo><mn>1597</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">gcd(2584, 1597)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">c</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord">2584</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">1597</span><span class="mclose">)</span></span></span></span></span> ï¼ˆ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1597</mn></mrow><annotation encoding="application/x-tex">1597</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1597</span></span></span></span></span> å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2584</mn></mrow><annotation encoding="application/x-tex">2584</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">2584</span></span></span></span></span> æ˜¯ <code>Fibonacci</code> æ•°åˆ—ä¸­ç›¸é‚»çš„ä¸¤é¡¹ï¼Œè€Œ <code>Fibonacci</code> æ•°åˆ—ä¸­ç›¸é‚»ä¸¤é¡¹çš„æœ€å¤§å…¬çº¦æ•°æ€»æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1</span></span></span></span></span>ï¼‰</h5>
<p>å®Œæ•´çš„è®¡ç®—æ­¥éª¤æ¯”è¾ƒé•¿ï¼Œæˆ‘å°†çª—å£æ”¾å¤§åï¼Œæˆªå›¾å¦‚ä¸‹ â¬‡ï¸</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3f2d463c01c4fb0924a445e9bd9b919~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeR6YqA6YqF6ZC1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763529223&amp;x-signature=TLZVqVFaCkJBcqPgiKSfyHtflww%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-15">æµ‹è¯•ç”¨ä¾‹ <code>4</code>: è®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mi>c</mi><mi>d</mi><mo stretchy="false">(</mo><mn>210</mn><mo separator="true">,</mo><mn>135</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">gcd(210, 135)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">c</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord">210</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">135</span><span class="mclose">)</span></span></span></span></span></h5>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7b99a86737e458a96ba53ac375f2d70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeR6YqA6YqF6ZC1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763529223&amp;x-signature=YqwGwhz%2F%2FjU8o3pEhLIvsMR1Qkk%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-16">å‚è€ƒèµ„æ–™</h3>
<ul>
<li><a href="https://juejin.cn/post/7569876592920854543" target="_blank" title="https://juejin.cn/post/7569876592920854543">[Java] ç”¨ Swing ç”Ÿæˆä¸€ä¸ªæœ€å¤§å…¬çº¦æ•°è®¡ç®—å™¨</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MySQL æ­£åˆ™è¡¨è¾¾å¼ï¼šREGEXP å’Œ RLIKE æ“ä½œç¬¦è¯¦è§£]]></title>    <link>https://juejin.cn/post/7571402480966828068</link>    <guid>https://juejin.cn/post/7571402480966828068</guid>    <pubDate>2025-11-12T05:46:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571402480966828068" data-draft-id="7571378103282548742" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MySQL æ­£åˆ™è¡¨è¾¾å¼ï¼šREGEXP å’Œ RLIKE æ“ä½œç¬¦è¯¦è§£"/> <meta itemprop="keywords" content="åç«¯,MySQL"/> <meta itemprop="datePublished" content="2025-11-12T05:46:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaæ°´è§£"/> <meta itemprop="url" content="https://juejin.cn/user/2441349519143037"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MySQL æ­£åˆ™è¡¨è¾¾å¼ï¼šREGEXP å’Œ RLIKE æ“ä½œç¬¦è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2441349519143037/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaæ°´è§£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T05:46:21.000Z" title="Wed Nov 12 2025 05:46:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€MySQLÂ æ­£åˆ™è¡¨è¾¾å¼æ¦‚è¿°</h3>
<p>åœ¨[æ•°æ®åº“æŸ¥è¯¢]ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦è¿›è¡Œå¤æ‚çš„æ¨¡å¼åŒ¹é…ã€‚è™½ç„¶ MySQL æä¾›äº† LIKE æ“ä½œç¬¦è¿›è¡Œç®€å•çš„æ¨¡ç³ŠåŒ¹é…ï¼ˆä½¿ç”¨Â <code>%</code>Â å’ŒÂ <code>_</code>ï¼‰ï¼Œä½†å¯¹äºæ›´å¤æ‚çš„[æ¨¡å¼åŒ¹é…]éœ€æ±‚ï¼Œæ­£åˆ™è¡¨è¾¾å¼æ˜¯æ›´å¼ºå¤§çš„å·¥å…·ã€‚</p>
<p>MySQL é€šè¿‡Â <code>REGEXP</code>Â å’ŒÂ <code>RLIKE</code>Â [æ“ä½œç¬¦]æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œå…¶è¯­æ³•ä¸ Perl å…¼å®¹çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ˆPCREï¼‰ç±»ä¼¼ï¼Œä¸ºå¼€å‘è€…æä¾›äº†å¼ºå¤§çš„æ¨¡å¼åŒ¹é…èƒ½åŠ›ã€‚</p>
<p>MySQL æ¨¡å¼åŒ¹é…</p>
<p>ç®€å•æ¨¡å¼åŒ¹é… LIKE</p>
<p>æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</p>
<p>REGEXP</p>
<p>RLIKE</p>
<p>æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼</p>
<h3 data-id="heading-1"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>äºŒã€REGEXP/RLIKE åŸºç¡€è¯­æ³•</h3>
<h4 data-id="heading-2"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2.1 åŸºæœ¬è¯­æ³•ç»“æ„</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> column1, column2, ...
<span class="hljs-keyword">FROM</span> table_name
<span class="hljs-keyword">WHERE</span> column_name REGEXP <span class="hljs-string">'pattern'</span>;

<span class="hljs-comment">-- æˆ–è€…ä½¿ç”¨ RLIKEï¼ˆä¸¤è€…å®Œå…¨ç­‰æ•ˆï¼‰</span>
<span class="hljs-keyword">SELECT</span> column1, column2, ...
<span class="hljs-keyword">FROM</span> table_name
<span class="hljs-keyword">WHERE</span> column_name RLIKE <span class="hljs-string">'pattern'</span>;

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">12345678</span>
</code></pre>
<h4 data-id="heading-3"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2.2 ç®€å•ç¤ºä¾‹</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥æ‰¾ name å­—æ®µä¸­ä»¥ 'st' å¼€å¤´çš„æ‰€æœ‰æ•°æ®</span>
<span class="hljs-keyword">SELECT</span> name <span class="hljs-keyword">FROM</span> person_tbl <span class="hljs-keyword">WHERE</span> name REGEXP <span class="hljs-string">'^st'</span>;

<span class="hljs-comment">-- æŸ¥æ‰¾ name å­—æ®µä¸­ä»¥ 'ok' ç»“å°¾çš„æ‰€æœ‰æ•°æ®</span>
<span class="hljs-keyword">SELECT</span> name <span class="hljs-keyword">FROM</span> person_tbl <span class="hljs-keyword">WHERE</span> name REGEXP <span class="hljs-string">'ok$'</span>;

<span class="hljs-comment">-- æŸ¥æ‰¾ name å­—æ®µä¸­åŒ…å« 'mar' å­—ç¬¦ä¸²çš„æ‰€æœ‰æ•°æ®</span>
<span class="hljs-keyword">SELECT</span> name <span class="hljs-keyword">FROM</span> person_tbl <span class="hljs-keyword">WHERE</span> name REGEXP <span class="hljs-string">'mar'</span>;

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">12345678</span>
</code></pre>
<h3 data-id="heading-4"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ä¸‰ã€æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼è¯¦è§£</h3>
<p>MySQL æ”¯æŒä¸°å¯Œçš„æ­£åˆ™è¡¨è¾¾å¼å…ƒå­—ç¬¦å’Œæ¨¡å¼ï¼Œä»¥ä¸‹æ˜¯å®Œæ•´çš„å‚è€ƒè¡¨ï¼š</p>





























































<table><thead><tr><th>æ¨¡å¼</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>^</code></td><td>åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®</td></tr><tr><td><code>$</code></td><td>åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„ç»“æŸä½ç½®</td></tr><tr><td><code>.</code></td><td>åŒ¹é…é™¤ â€œ\nâ€ ä¹‹å¤–çš„ä»»ä½•å•ä¸ªå­—ç¬¦</td></tr><tr><td><code>[...]</code></td><td>å­—ç¬¦é›†åˆï¼ŒåŒ¹é…æ‰€åŒ…å«çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td><code>[^...]</code></td><td>è´Ÿå€¼å­—ç¬¦é›†åˆï¼ŒåŒ¹é…æœªåŒ…å«çš„ä»»æ„å­—ç¬¦</td></tr><tr><td>p1 / p2 / p3</td><td>åŒ¹é… p1 æˆ– p2 æˆ– p3</td></tr><tr><td><code>*</code></td><td>åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–å¤šæ¬¡</td></tr><tr><td><code>+</code></td><td>åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ä¸€æ¬¡æˆ–å¤šæ¬¡</td></tr><tr><td><code>{n}</code></td><td>åŒ¹é…ç¡®å®šçš„ n æ¬¡</td></tr><tr><td><code>{n,m}</code></td><td>æœ€å°‘åŒ¹é… n æ¬¡ä¸”æœ€å¤šåŒ¹é… m æ¬¡</td></tr><tr><td><code>\w</code></td><td>åŒ¹é…å­—æ¯ã€æ•°å­—æˆ–ä¸‹åˆ’çº¿å­—ç¬¦</td></tr><tr><td><code>\s</code></td><td>åŒ¹é…ä»»ä½•ç©ºç™½å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦ç­‰</td></tr><tr><td><code>\d</code></td><td>åŒ¹é…ä¸€ä¸ªæ•°å­—å­—ç¬¦ï¼Œç­‰ä»·äº [0-9]</td></tr></tbody></table>
<p>æ˜¯</p>
<p>å¦</p>
<p>æ˜¯</p>
<p>å¦</p>
<p>å¼€å§‹åŒ¹é…</p>
<p>æ˜¯å¦^å¼€å¤´?</p>
<p>ä»å­—ç¬¦ä¸²å¼€å¤´æ£€æŸ¥</p>
<p>ä»ä»»æ„ä½ç½®æ£€æŸ¥</p>
<p>æ£€æŸ¥æ¨¡å¼</p>
<p>æ˜¯å¦$ç»“å°¾?</p>
<p>æ£€æŸ¥åˆ°å­—ç¬¦ä¸²æœ«å°¾</p>
<p>æ£€æŸ¥å­å­—ç¬¦ä¸²</p>
<p>åŒ¹é…æˆåŠŸ</p>
<h3 data-id="heading-5"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>å››ã€é«˜çº§æ­£åˆ™è¡¨è¾¾å¼æŠ€å·§</h3>
<h4 data-id="heading-6"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4.1 å­—ç¬¦ç±»åŒ¹é…</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åŒ¹é…å…ƒéŸ³å­—æ¯å¼€å¤´çš„åå­—</span>
<span class="hljs-keyword">SELECT</span> name <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> name REGEXP <span class="hljs-string">'^[aeiou]'</span>;

<span class="hljs-comment">-- åŒ¹é…éæ•°å­—å¼€å¤´çš„äº§å“ç¼–å·</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> products <span class="hljs-keyword">WHERE</span> product_code REGEXP <span class="hljs-string">'^[^0-9]'</span>;

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">12345</span>
</code></pre>
<h4 data-id="heading-7"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4.2 é‡è¯ä½¿ç”¨</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åŒ¹é…è¿ç»­2-3ä¸ªæ•°å­—</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> data <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">value</span> REGEXP <span class="hljs-string">'[0-9]{2,3}'</span>;

<span class="hljs-comment">-- åŒ¹é…"a"å‡ºç°è‡³å°‘2æ¬¡</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> words <span class="hljs-keyword">WHERE</span> word REGEXP <span class="hljs-string">'a{2,}'</span>;

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">12345</span>
</code></pre>
<h4 data-id="heading-8"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4.3 æˆ–æ“ä½œå’Œåˆ†ç»„</h4>
<pre><code class="hljs language-vbnet" lang="vbnet">-- åŒ¹é…<span class="hljs-string">"Smith"</span>æˆ–<span class="hljs-string">"Johnson"</span>
<span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> employees <span class="hljs-keyword">WHERE</span> last_name REGEXP <span class="hljs-comment">'Smith|Johnson';</span>

-- åŒ¹é…<span class="hljs-string">"color"</span>æˆ–<span class="hljs-string">"colour"</span>
<span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> articles <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">text</span> REGEXP <span class="hljs-comment">'col(o|ou)r';</span>

AIå†™ä»£ç sql
<span class="hljs-number">12345</span>
</code></pre>
<h3 data-id="heading-9"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>äº”ã€å®é™…åº”ç”¨æ¡ˆä¾‹</h3>
<h4 data-id="heading-10"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5.1 æ•°æ®éªŒè¯</h4>
<pre><code class="hljs language-ini" lang="ini">-- éªŒè¯ç”µå­é‚®ä»¶æ ¼å¼
SELECT email FROM users 
WHERE email REGEXP '^<span class="hljs-section">[A-Za-z0-9._%-]</span>+@<span class="hljs-section">[A-Za-z0-9.-]</span>+\.<span class="hljs-section">[A-Za-z]</span>{2,4}$'<span class="hljs-comment">;</span>

-- éªŒè¯ç”µè¯å·ç æ ¼å¼
SELECT phone FROM contacts 
WHERE phone REGEXP '^\+?<span class="hljs-section">[0-9]</span>{1,3}?<span class="hljs-section">[-. ]</span>?<span class="hljs-section">[0-9]</span>{2,3}<span class="hljs-section">[-. ]</span>?<span class="hljs-section">[0-9]</span>{3,4}<span class="hljs-section">[-. ]</span>?<span class="hljs-section">[0-9]</span>{3,4}$'<span class="hljs-comment">;</span>

AIå†™ä»£ç sql
1234567
</code></pre>
<h4 data-id="heading-11"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5.2 æ•°æ®æå–</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æå–åŒ…å«ä»·æ ¼çš„æ•°æ®</span>
<span class="hljs-keyword">SELECT</span> description <span class="hljs-keyword">FROM</span> products 
<span class="hljs-keyword">WHERE</span> description REGEXP <span class="hljs-string">'[0-9]+\.[0-9]{2}'</span>;

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">123</span>
</code></pre>
<h4 data-id="heading-12"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5.3 æ•°æ®æ¸…æ´—</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥æ‰¾åŒ…å«å¤šä½™ç©ºæ ¼çš„æ•°æ®</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> documents 
<span class="hljs-keyword">WHERE</span> content REGEXP <span class="hljs-string">'[[:space:]]{2,}'</span>;

<span class="hljs-comment">-- æŸ¥æ‰¾éASCIIå­—ç¬¦</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> international_data 
<span class="hljs-keyword">WHERE</span> text REGEXP <span class="hljs-string">'[^\x00-\x7F]'</span>;

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">1234567</span>
</code></pre>
<h3 data-id="heading-13"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>å…­ã€æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3>
<p>è™½ç„¶æ­£åˆ™è¡¨è¾¾å¼åŠŸèƒ½å¼ºå¤§ï¼Œä½†åœ¨å¤§æ•°æ®é›†ä¸Šä½¿ç”¨æ—¶å¯èƒ½ä¼šå½±å“æ€§èƒ½ï¼š</p>
<ol>
<li><strong>é¿å…å‰å¯¼é€šé…ç¬¦</strong>ï¼šå¦‚Â <code>.*pattern</code>ï¼Œè¿™ä¼šå¯¼è‡´å…¨è¡¨æ‰«æ</li>
<li><strong>å°½é‡å…·ä½“</strong>ï¼šè¶Šå…·ä½“çš„æ¨¡å¼é€šå¸¸æ‰§è¡Œè¶Šå¿«</li>
<li><strong>è€ƒè™‘ä½¿ç”¨ç´¢å¼•</strong>ï¼šæ­£åˆ™è¡¨è¾¾å¼é€šå¸¸æ— æ³•åˆ©ç”¨ç´¢å¼•ï¼Œå¯¹äºå…³é”®æŸ¥è¯¢è€ƒè™‘å…¶ä»–æ–¹æ¡ˆ</li>
<li><strong>æµ‹è¯•ä¸åŒæ¨¡å¼</strong>ï¼šå¤æ‚æ¨¡å¼å¯èƒ½éœ€è¦æ›´å¤šæµ‹è¯•</li>
</ol>
<p>æ˜¯</p>
<p>å¦</p>
<p>æ˜¯</p>
<p>å¦</p>
<p>æŸ¥è¯¢éœ€æ±‚</p>
<p>ç®€å•æ¨¡å¼?</p>
<p>ä½¿ç”¨LIKE</p>
<p>ä½¿ç”¨REGEXP</p>
<p>æ€§èƒ½å¯æ¥å—?</p>
<p>å®æ–½</p>
<p>è€ƒè™‘å…¶ä»–æ–¹æ¡ˆ</p>
<h3 data-id="heading-14"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ä¸ƒã€REGEXP ä¸ LIKE çš„æ¯”è¾ƒ</h3>








































<table><thead><tr><th>ç‰¹æ€§</th><th>REGEXP/RLIKE</th><th>LIKE</th></tr></thead><tbody><tr><td>åŒ¹é…èƒ½åŠ›</td><td>å¼ºå¤§ï¼Œæ”¯æŒå¤æ‚æ¨¡å¼</td><td>æœ‰é™ï¼Œä»…æ”¯æŒç®€å•é€šé…ç¬¦</td></tr><tr><td>è¯­æ³•</td><td>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•</td><td>ä½¿ç”¨ % å’Œ _ é€šé…ç¬¦</td></tr><tr><td>æ€§èƒ½</td><td>é€šå¸¸è¾ƒæ…¢</td><td>é€šå¸¸è¾ƒå¿«</td></tr><tr><td>ç´¢å¼•ä½¿ç”¨</td><td>é€šå¸¸ä¸èƒ½ä½¿ç”¨ç´¢å¼•</td><td>æŸäº›æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨ç´¢å¼•</td></tr><tr><td>å¤§å°å†™æ•æ„Ÿ</td><td>å–å†³äºæ’åºè§„åˆ™</td><td>å–å†³äºæ’åºè§„åˆ™</td></tr><tr><td>å¤æ‚æ¨¡å¼</td><td>æ”¯æŒ (å¦‚èŒƒå›´ã€é‡å¤ã€é€‰æ‹©ç­‰)</td><td>ä¸æ”¯æŒ</td></tr></tbody></table>
<h3 data-id="heading-15"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>å…«ã€å¸¸è§é—®é¢˜è§£ç­”</h3>
<p><strong>Q: REGEXP å’Œ RLIKE æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p>
<p>A: åœ¨ MySQL ä¸­ï¼Œ<code>REGEXP</code>Â å’ŒÂ <code>RLIKE</code>Â æ˜¯å®Œå…¨ç›¸åŒçš„æ“ä½œç¬¦ï¼Œå¯ä»¥äº’æ¢ä½¿ç”¨ã€‚</p>
<p><strong>Q: å¦‚ä½•ä½¿æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…åŒºåˆ†å¤§å°å†™ï¼Ÿ</strong></p>
<p>A: ä½¿ç”¨Â <code>BINARY</code>Â å…³é”®å­—ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> products <span class="hljs-keyword">WHERE</span> product_name REGEXP <span class="hljs-type">BINARY</span> <span class="hljs-string">'Apple'</span>;

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">1</span>
</code></pre>
<p><strong>Q: æ­£åˆ™è¡¨è¾¾å¼ä¼šå½±å“æŸ¥è¯¢æ€§èƒ½å—ï¼Ÿ</strong></p>
<p>A: æ˜¯çš„ï¼Œå¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼åœ¨å¤§è¡¨ä¸Šå¯èƒ½æ˜¾è‘—é™ä½æŸ¥è¯¢é€Ÿåº¦ï¼Œåº”è°¨æ…ä½¿ç”¨ã€‚</p>
<p><strong>Q: å¯ä»¥åœ¨ç´¢å¼•åˆ—ä¸Šä½¿ç”¨ REGEXP å—ï¼Ÿ</strong></p>
<p>A: å¯ä»¥ï¼Œä½†æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…é€šå¸¸ä¼šä½¿ç´¢å¼•å¤±æ•ˆï¼Œå¯¼è‡´å…¨è¡¨æ‰«æã€‚</p>
<h3 data-id="heading-16"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ä¹ã€æ€»ç»“</h3>
<p>MySQL çš„æ­£åˆ™è¡¨è¾¾å¼åŠŸèƒ½é€šè¿‡Â <code>REGEXP</code>Â å’ŒÂ <code>RLIKE</code>Â æ“ä½œç¬¦æä¾›ï¼Œä¸ºæ•°æ®æŸ¥è¯¢æä¾›äº†å¼ºå¤§çš„æ¨¡å¼åŒ¹é…èƒ½åŠ›ã€‚æŒæ¡è¿™äº›æŠ€æœ¯å¯ä»¥è®©ä½ ï¼š</p>
<ol>
<li>æ‰§è¡Œå¤æ‚çš„å­—ç¬¦ä¸²åŒ¹é…å’Œæœç´¢</li>
<li>éªŒè¯æ•°æ®æ ¼å¼å’Œè´¨é‡</li>
<li>æå–ç‰¹å®šæ¨¡å¼çš„æ–‡æœ¬</li>
<li>è¿›è¡Œé«˜çº§æ•°æ®æ¸…æ´—å’Œè½¬æ¢</li>
</ol>
<p>è™½ç„¶åŠŸèƒ½å¼ºå¤§ï¼Œä½†åº”å½“æ³¨æ„åˆç†ä½¿ç”¨ï¼Œé¿å…åœ¨å¤§å‹è¡¨ä¸Šé¢‘ç¹ä½¿ç”¨å¤æ‚æ­£åˆ™è¡¨è¾¾å¼å½±å“æ€§èƒ½ã€‚å¯¹äºç®€å•çš„æ¨¡å¼åŒ¹é…ï¼Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨Â <code>LIKE</code>Â æ“ä½œç¬¦ã€‚</p>
<p>é€šè¿‡æœ¬æ–‡çš„å­¦ä¹ ï¼Œä½ åº”è¯¥èƒ½å¤Ÿç†Ÿç»ƒåœ°åœ¨ MySQL ä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥è§£å†³å„ç§å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜ï¼Œæå‡æ•°æ®æŸ¥è¯¢å’Œå¤„ç†çš„çµæ´»æ€§å’Œæ•ˆç‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰‹æŠŠæ‰‹å¸¦ä½ é˜…è¯»vue2æºç ]]></title>    <link>https://juejin.cn/post/7571378103282073606</link>    <guid>https://juejin.cn/post/7571378103282073606</guid>    <pubDate>2025-11-12T03:40:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571378103282073606" data-draft-id="7571348736154468388" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰‹æŠŠæ‰‹å¸¦ä½ é˜…è¯»vue2æºç "/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-11-12T03:40:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å½©è™¹ä¸‹é¢"/> <meta itemprop="url" content="https://juejin.cn/user/2392146486762894"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰‹æŠŠæ‰‹å¸¦ä½ é˜…è¯»vue2æºç 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2392146486762894/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å½©è™¹ä¸‹é¢
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T03:40:07.000Z" title="Wed Nov 12 2025 03:40:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ‰‹æŠŠæ‰‹å¸¦ä½ é˜…è¯»Vue2æºç </h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>Vue.js ä½œä¸ºç›®å‰æœ€æµè¡Œçš„å‰ç«¯æ¡†æ¶ä¹‹ä¸€ï¼Œå…¶æºç è®¾è®¡ç²¾å¦™ï¼Œæ¶æ„æ¸…æ™°ã€‚é€šè¿‡é˜…è¯»Vue2çš„æºç ï¼Œæˆ‘ä»¬ä¸ä»…èƒ½æ·±å…¥ç†è§£å…¶å·¥ä½œåŸç†ï¼Œè¿˜èƒ½å­¦ä¹ åˆ°å¾ˆå¤šä¼˜ç§€çš„è®¾è®¡æ¨¡å¼å’Œç¼–ç¨‹æ€æƒ³ã€‚æœ¬æ–‡å°†å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œæ·±å…¥Vue2çš„æ ¸å¿ƒæºç ï¼Œç†è§£å…¶å®ç°åŸç†ã€‚</p>
<h3 data-id="heading-2">Vue2æºç ç»“æ„</h3>
<p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬äº†è§£ä¸€ä¸‹Vue2çš„æºç ç›®å½•ç»“æ„ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">src/
â”œâ”€â”€ core/                    <span class="hljs-meta"># æ ¸å¿ƒä»£ç </span>
â”‚   â”œâ”€â”€ instance/           <span class="hljs-meta"># Vueå®ä¾‹ç›¸å…³</span>
â”‚   â”‚   â”œâ”€â”€ index.ts        <span class="hljs-meta"># Vueæ„é€ å‡½æ•°</span>
â”‚   â”‚   â”œâ”€â”€ <span class="hljs-keyword">init</span>.ts         <span class="hljs-meta"># å®ä¾‹åˆå§‹åŒ–</span>
â”‚   â”‚   â”œâ”€â”€ state.ts        <span class="hljs-meta"># çŠ¶æ€ç®¡ç†ï¼ˆdataã€propsã€computedç­‰ï¼‰</span>
â”‚   â”‚   â”œâ”€â”€ render.ts       <span class="hljs-meta"># æ¸²æŸ“ç›¸å…³</span>
â”‚   â”‚   â”œâ”€â”€ lifecycle.ts    <span class="hljs-meta"># ç”Ÿå‘½å‘¨æœŸ</span>
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ observer/           <span class="hljs-meta"># å“åº”å¼ç³»ç»Ÿ</span>
â”‚   â”‚   â”œâ”€â”€ index.ts        <span class="hljs-meta"># Observerç±»</span>
â”‚   â”‚   â”œâ”€â”€ dep.ts          <span class="hljs-meta"># ä¾èµ–æ”¶é›†</span>
â”‚   â”‚   â”œâ”€â”€ watcher.ts      <span class="hljs-meta"># è§‚å¯Ÿè€…</span>
â”‚   â”‚   â”œâ”€â”€ scheduler.ts    <span class="hljs-meta"># è°ƒåº¦å™¨</span>
â”‚   â”‚   â””â”€â”€ array.ts        <span class="hljs-meta"># æ•°ç»„å“åº”å¼å¤„ç†</span>
â”‚   â”œâ”€â”€ vdom/               <span class="hljs-meta"># è™šæ‹ŸDOM</span>
â”‚   â””â”€â”€ util/               <span class="hljs-meta"># å·¥å…·å‡½æ•°</span>
â”œâ”€â”€ compiler/               <span class="hljs-meta"># æ¨¡æ¿ç¼–è¯‘</span>
â””â”€â”€ platforms/              <span class="hljs-meta"># å¹³å°ç›¸å…³ä»£ç </span>
</code></pre>
<h3 data-id="heading-3">ä¸€ã€Vueæ„é€ å‡½æ•°ä¸å®ä¾‹åˆå§‹åŒ–</h3>
<h4 data-id="heading-4">1.1 Vueæ„é€ å‡½æ•°</h4>
<p>Vueçš„å…¥å£åœ¨ <code>src/core/instance/index.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Vue</span>(<span class="hljs-params">options</span>) {
  <span class="hljs-keyword">if</span> (__DEV__ &amp;&amp; !(<span class="hljs-variable language_">this</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Vue</span>)) {
    <span class="hljs-title function_">warn</span>(<span class="hljs-string">'Vue is a constructor and should be called with the `new` keyword'</span>)
  }
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_init</span>(options)
}

<span class="hljs-comment">// é€šè¿‡Mixinæ¨¡å¼æ‰©å±•VueåŸå‹</span>
<span class="hljs-title function_">initMixin</span>(<span class="hljs-title class_">Vue</span>)      <span class="hljs-comment">// åˆå§‹åŒ–ç›¸å…³</span>
<span class="hljs-title function_">stateMixin</span>(<span class="hljs-title class_">Vue</span>)     <span class="hljs-comment">// çŠ¶æ€ç›¸å…³</span>
<span class="hljs-title function_">eventsMixin</span>(<span class="hljs-title class_">Vue</span>)    <span class="hljs-comment">// äº‹ä»¶ç›¸å…³</span>
<span class="hljs-title function_">lifecycleMixin</span>(<span class="hljs-title class_">Vue</span>) <span class="hljs-comment">// ç”Ÿå‘½å‘¨æœŸç›¸å…³</span>
<span class="hljs-title function_">renderMixin</span>(<span class="hljs-title class_">Vue</span>)    <span class="hljs-comment">// æ¸²æŸ“ç›¸å…³</span>
</code></pre>
<p>Vueé‡‡ç”¨äº†<strong>Mixinæ¨¡å¼</strong>æ¥ç»„ç»‡ä»£ç ï¼Œå°†ä¸åŒåŠŸèƒ½çš„ä»£ç åˆ†åˆ«é€šè¿‡ä¸åŒçš„Mixinæ³¨å…¥åˆ°VueåŸå‹ä¸Šï¼Œè¿™æ ·æ—¢ä¿æŒäº†ä»£ç çš„æ¨¡å—åŒ–ï¼Œåˆé¿å…äº†å•ä¸€æ–‡ä»¶è¿‡å¤§ã€‚</p>
<h4 data-id="heading-5">1.2 å®ä¾‹åˆå§‹åŒ–æµç¨‹</h4>
<p>å½“æ‰§è¡Œ <code>new Vue(options)</code> æ—¶ï¼Œä¼šè°ƒç”¨ <code>_init</code> æ–¹æ³•ï¼Œå®šä¹‰åœ¨ <code>src/core/instance/init.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title class_">Vue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">_init</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">options?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;</span>) {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">vm</span>: <span class="hljs-title class_">Component</span> = <span class="hljs-variable language_">this</span>
  
  <span class="hljs-comment">// 1. å”¯ä¸€æ ‡è¯†</span>
  vm.<span class="hljs-property">_uid</span> = uid++
  
  <span class="hljs-comment">// 2. æ ‡è®°ä¸ºVueå®ä¾‹</span>
  vm.<span class="hljs-property">_isVue</span> = <span class="hljs-literal">true</span>
  
  <span class="hljs-comment">// 3. åˆå¹¶é€‰é¡¹</span>
  vm.<span class="hljs-property">$options</span> = <span class="hljs-title function_">mergeOptions</span>(
    <span class="hljs-title function_">resolveConstructorOptions</span>(vm.<span class="hljs-property">constructor</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>),
    options || {},
    vm
  )
  
  <span class="hljs-comment">// 4. åˆå§‹åŒ–ä»£ç†ï¼ˆå¼€å‘ç¯å¢ƒï¼‰</span>
  <span class="hljs-keyword">if</span> (__DEV__) {
    <span class="hljs-title function_">initProxy</span>(vm)
  } <span class="hljs-keyword">else</span> {
    vm.<span class="hljs-property">_renderProxy</span> = vm
  }
  
  <span class="hljs-comment">// 5. åˆå§‹åŒ–ç”Ÿå‘½å‘¨æœŸ</span>
  <span class="hljs-title function_">initLifecycle</span>(vm)
  
  <span class="hljs-comment">// 6. åˆå§‹åŒ–äº‹ä»¶</span>
  <span class="hljs-title function_">initEvents</span>(vm)
  
  <span class="hljs-comment">// 7. åˆå§‹åŒ–æ¸²æŸ“</span>
  <span class="hljs-title function_">initRender</span>(vm)
  
  <span class="hljs-comment">// 8. è°ƒç”¨beforeCreateé’©å­</span>
  <span class="hljs-title function_">callHook</span>(vm, <span class="hljs-string">'beforeCreate'</span>)
  
  <span class="hljs-comment">// 9. åˆå§‹åŒ–injections</span>
  <span class="hljs-title function_">initInjections</span>(vm)
  
  <span class="hljs-comment">// 10. åˆå§‹åŒ–çŠ¶æ€ï¼ˆdataã€propsã€methodsã€computedã€watchï¼‰</span>
  <span class="hljs-title function_">initState</span>(vm)
  
  <span class="hljs-comment">// 11. åˆå§‹åŒ–provide</span>
  <span class="hljs-title function_">initProvide</span>(vm)
  
  <span class="hljs-comment">// 12. è°ƒç”¨createdé’©å­</span>
  <span class="hljs-title function_">callHook</span>(vm, <span class="hljs-string">'created'</span>)
  
  <span class="hljs-comment">// 13. å¦‚æœæœ‰elé€‰é¡¹ï¼Œè‡ªåŠ¨æŒ‚è½½</span>
  <span class="hljs-keyword">if</span> (vm.<span class="hljs-property">$options</span>.<span class="hljs-property">el</span>) {
    vm.$mount(vm.<span class="hljs-property">$options</span>.<span class="hljs-property">el</span>)
  }
}
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li>åˆå§‹åŒ–é¡ºåºå¾ˆé‡è¦ï¼š<code>beforeCreate</code> â†’ <code>injections</code> â†’ <code>state</code> â†’ <code>provide</code> â†’ <code>created</code></li>
<li>è¿™æ ·è®¾è®¡æ˜¯ä¸ºäº†ç¡®ä¿åœ¨ <code>created</code> é’©å­ä¸­èƒ½å¤Ÿè®¿é—®åˆ° <code>data</code>ã€<code>props</code> ç­‰çŠ¶æ€</li>
<li><code>injections</code> åœ¨ <code>state</code> ä¹‹å‰åˆå§‹åŒ–ï¼Œ<code>provide</code> åœ¨ <code>state</code> ä¹‹ååˆå§‹åŒ–ï¼Œç¬¦åˆä¾èµ–æ³¨å…¥çš„è®¾è®¡</li>
</ul>
<h3 data-id="heading-6">äºŒã€å“åº”å¼ç³»ç»Ÿæ ¸å¿ƒåŸç†</h3>
<p>Vue2çš„å“åº”å¼ç³»ç»Ÿæ˜¯å…¶æ ¸å¿ƒç‰¹æ€§ï¼ŒåŸºäº <code>Object.defineProperty</code> å®ç°ã€‚ä¸»è¦åŒ…å«ä¸‰ä¸ªæ ¸å¿ƒç±»ï¼š<code>Observer</code>ã€<code>Dep</code>ã€<code>Watcher</code>ã€‚</p>
<h4 data-id="heading-7">2.1 Observerï¼ˆè§‚å¯Ÿè€…ï¼‰</h4>
<p><code>Observer</code> ç±»è´Ÿè´£å°†æ™®é€šå¯¹è±¡è½¬æ¢ä¸ºå“åº”å¼å¯¹è±¡ï¼Œå®šä¹‰åœ¨ <code>src/core/observer/index.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Observer</span> {
  <span class="hljs-attr">dep</span>: <span class="hljs-title class_">Dep</span>
  <span class="hljs-attr">vmCount</span>: <span class="hljs-built_in">number</span>

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> value: <span class="hljs-built_in">any</span>, <span class="hljs-keyword">public</span> shallow = <span class="hljs-literal">false</span>, <span class="hljs-keyword">public</span> mock = <span class="hljs-literal">false</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dep</span> = mock ? mockDep : <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dep</span>()
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">vmCount</span> = <span class="hljs-number">0</span>
    
    <span class="hljs-comment">// åœ¨å¯¹è±¡ä¸Šæ·»åŠ  __ob__ å±æ€§ï¼ŒæŒ‡å‘Observerå®ä¾‹</span>
    <span class="hljs-title function_">def</span>(value, <span class="hljs-string">'__ob__'</span>, <span class="hljs-variable language_">this</span>)
    
    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isArray</span>(value)) {
      <span class="hljs-comment">// æ•°ç»„ï¼šé‡å†™æ•°ç»„æ–¹æ³•</span>
      <span class="hljs-keyword">if</span> (hasProto) {
        value.<span class="hljs-property">__proto__</span> = arrayMethods
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, l = arrayKeys.<span class="hljs-property">length</span>; i &lt; l; i++) {
          <span class="hljs-title function_">def</span>(value, arrayKeys[i], arrayMethods[arrayKeys[i]])
        }
      }
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">observeArray</span>(value)
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// å¯¹è±¡ï¼šéå†å±æ€§ï¼Œè½¬æ¢ä¸ºgetter/setter</span>
      <span class="hljs-keyword">const</span> keys = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(value)
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; keys.<span class="hljs-property">length</span>; i++) {
        <span class="hljs-title function_">defineReactive</span>(value, keys[i], <span class="hljs-variable constant_">NO_INITIAL_VALUE</span>, <span class="hljs-literal">undefined</span>, shallow, mock)
      }
    }
  }
}
</code></pre>
<p><strong>æ ¸å¿ƒæœºåˆ¶ï¼š</strong></p>
<ul>
<li>ä¸ºå¯¹è±¡æ·»åŠ  <code>__ob__</code> å±æ€§ï¼Œå­˜å‚¨Observerå®ä¾‹</li>
<li>æ•°ç»„é€šè¿‡é‡å†™åŸå‹æ–¹æ³•å®ç°å“åº”å¼</li>
<li>å¯¹è±¡é€šè¿‡ <code>defineReactive</code> å°†å±æ€§è½¬æ¢ä¸ºgetter/setter</li>
</ul>
<h4 data-id="heading-8">2.2 defineReactiveï¼ˆå®šä¹‰å“åº”å¼å±æ€§ï¼‰</h4>
<p><code>defineReactive</code> æ˜¯å“åº”å¼ç³»ç»Ÿçš„æ ¸å¿ƒå‡½æ•°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">defineReactive</span>(<span class="hljs-params">
  obj: <span class="hljs-built_in">object</span>,
  key: <span class="hljs-built_in">string</span>,
  val?: <span class="hljs-built_in">any</span>,
  customSetter?: <span class="hljs-built_in">Function</span> | <span class="hljs-literal">null</span>,
  shallow?: <span class="hljs-built_in">boolean</span>,
  mock?: <span class="hljs-built_in">boolean</span>
</span>) {
  <span class="hljs-keyword">const</span> dep = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dep</span>() <span class="hljs-comment">// æ¯ä¸ªå±æ€§éƒ½æœ‰ç‹¬ç«‹çš„Depå®ä¾‹</span>

  <span class="hljs-keyword">const</span> property = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyDescriptor</span>(obj, key)
  <span class="hljs-keyword">if</span> (property &amp;&amp; property.<span class="hljs-property">configurable</span> === <span class="hljs-literal">false</span>) {
    <span class="hljs-keyword">return</span>
  }

  <span class="hljs-keyword">const</span> getter = property &amp;&amp; property.<span class="hljs-property">get</span>
  <span class="hljs-keyword">const</span> setter = property &amp;&amp; property.<span class="hljs-property">set</span>

  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(obj, key, {
    <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">get</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">reactiveGetter</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> value = getter ? getter.<span class="hljs-title function_">call</span>(obj) : val
      
      <span class="hljs-comment">// ä¾èµ–æ”¶é›†ï¼šå¦‚æœå½“å‰æœ‰Watcherï¼Œå°†å…¶æ·»åŠ åˆ°Depä¸­</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Dep</span>.<span class="hljs-property">target</span>) {
        dep.<span class="hljs-title function_">depend</span>()
        <span class="hljs-keyword">if</span> (childOb) {
          childOb.<span class="hljs-property">dep</span>.<span class="hljs-title function_">depend</span>()
          <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isArray</span>(value)) {
            <span class="hljs-title function_">dependArray</span>(value)
          }
        }
      }
      <span class="hljs-keyword">return</span> value
    },
    <span class="hljs-attr">set</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">reactiveSetter</span>(<span class="hljs-params">newVal</span>) {
      <span class="hljs-keyword">const</span> value = getter ? getter.<span class="hljs-title function_">call</span>(obj) : val
      
      <span class="hljs-comment">// å€¼æ²¡æœ‰å˜åŒ–ï¼Œç›´æ¥è¿”å›</span>
      <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">hasChanged</span>(value, newVal)) {
        <span class="hljs-keyword">return</span>
      }
      
      <span class="hljs-keyword">if</span> (setter) {
        setter.<span class="hljs-title function_">call</span>(obj, newVal)
      } <span class="hljs-keyword">else</span> {
        val = newVal
      }
      
      <span class="hljs-comment">// æ–°å€¼ä¹Ÿéœ€è¦å˜æˆå“åº”å¼</span>
      childOb = <span class="hljs-title function_">observe</span>(newVal, <span class="hljs-literal">false</span>, mock)
      
      <span class="hljs-comment">// é€šçŸ¥æ‰€æœ‰ä¾èµ–æ›´æ–°</span>
      dep.<span class="hljs-title function_">notify</span>()
    }
  })
}
</code></pre>
<p><strong>å·¥ä½œæµç¨‹ï¼š</strong></p>
<ol>
<li><strong>getter</strong>ï¼šå½“è®¿é—®å±æ€§æ—¶ï¼Œå¦‚æœå½“å‰æœ‰ <code>Dep.target</code>ï¼ˆWatcherï¼‰ï¼Œè°ƒç”¨ <code>dep.depend()</code> æ”¶é›†ä¾èµ–</li>
<li><strong>setter</strong>ï¼šå½“ä¿®æ”¹å±æ€§æ—¶ï¼Œè°ƒç”¨ <code>dep.notify()</code> é€šçŸ¥æ‰€æœ‰ä¾èµ–æ›´æ–°</li>
</ol>
<h4 data-id="heading-9">2.3 Depï¼ˆä¾èµ–æ”¶é›†å™¨ï¼‰</h4>
<p><code>Dep</code> ç±»è´Ÿè´£ç®¡ç†ä¾èµ–ï¼Œå®šä¹‰åœ¨ <code>src/core/observer/dep.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Dep</span> {
  <span class="hljs-keyword">static</span> target?: <span class="hljs-title class_">DepTarget</span> | <span class="hljs-literal">null</span>
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>
  <span class="hljs-attr">subs</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">DepTarget</span> | <span class="hljs-literal">null</span>&gt;

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = uid++
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">subs</span> = []
  }

  <span class="hljs-comment">// æ·»åŠ è®¢é˜…è€…</span>
  <span class="hljs-title function_">addSub</span>(<span class="hljs-params">sub: DepTarget</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">subs</span>.<span class="hljs-title function_">push</span>(sub)
  }

  <span class="hljs-comment">// ç§»é™¤è®¢é˜…è€…</span>
  <span class="hljs-title function_">removeSub</span>(<span class="hljs-params">sub: DepTarget</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">subs</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">subs</span>.<span class="hljs-title function_">indexOf</span>(sub)] = <span class="hljs-literal">null</span>
  }

  <span class="hljs-comment">// ä¾èµ–æ”¶é›†ï¼šå°†å½“å‰Watcheræ·»åŠ åˆ°subsä¸­</span>
  <span class="hljs-title function_">depend</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Dep</span>.<span class="hljs-property">target</span>) {
      <span class="hljs-title class_">Dep</span>.<span class="hljs-property">target</span>.<span class="hljs-title function_">addDep</span>(<span class="hljs-variable language_">this</span>)
    }
  }

  <span class="hljs-comment">// é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…æ›´æ–°</span>
  <span class="hljs-title function_">notify</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> subs = <span class="hljs-variable language_">this</span>.<span class="hljs-property">subs</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">s</span> =&gt;</span> s) <span class="hljs-keyword">as</span> <span class="hljs-title class_">DepTarget</span>[]
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, l = subs.<span class="hljs-property">length</span>; i &lt; l; i++) {
      subs[i].<span class="hljs-title function_">update</span>()
    }
  }
}

<span class="hljs-comment">// å…¨å±€å”¯ä¸€çš„å½“å‰Watcher</span>
<span class="hljs-title class_">Dep</span>.<span class="hljs-property">target</span> = <span class="hljs-literal">null</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">targetStack</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">DepTarget</span> | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span>&gt; = []

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">pushTarget</span>(<span class="hljs-params">target?: DepTarget | <span class="hljs-literal">null</span></span>) {
  targetStack.<span class="hljs-title function_">push</span>(target)
  <span class="hljs-title class_">Dep</span>.<span class="hljs-property">target</span> = target
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">popTarget</span>(<span class="hljs-params"/>) {
  targetStack.<span class="hljs-title function_">pop</span>()
  <span class="hljs-title class_">Dep</span>.<span class="hljs-property">target</span> = targetStack[targetStack.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>]
}
</code></pre>
<p><strong>è®¾è®¡äº®ç‚¹ï¼š</strong></p>
<ul>
<li><code>Dep.target</code> æ˜¯å…¨å±€å”¯ä¸€çš„ï¼ŒåŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªWatcheråœ¨æ”¶é›†ä¾èµ–</li>
<li>ä½¿ç”¨æ ˆç»“æ„ <code>targetStack</code> å¤„ç†åµŒå¥—Watcherçš„æƒ…å†µ</li>
</ul>
<h4 data-id="heading-10">2.4 Watcherï¼ˆè§‚å¯Ÿè€…ï¼‰</h4>
<p><code>Watcher</code> æ˜¯è¿æ¥å“åº”å¼æ•°æ®å’Œè§†å›¾æ›´æ–°çš„æ¡¥æ¢ï¼Œå®šä¹‰åœ¨ <code>src/core/observer/watcher.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Watcher</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">DepTarget</span> {
  vm?: <span class="hljs-title class_">Component</span> | <span class="hljs-literal">null</span>
  <span class="hljs-attr">expression</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">cb</span>: <span class="hljs-title class_">Function</span>
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>
  <span class="hljs-attr">deps</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">Dep</span>&gt;
  <span class="hljs-attr">newDeps</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">Dep</span>&gt;
  <span class="hljs-attr">getter</span>: <span class="hljs-title class_">Function</span>
  <span class="hljs-attr">value</span>: <span class="hljs-built_in">any</span>

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">
    vm: Component | <span class="hljs-literal">null</span>,
    expOrFn: <span class="hljs-built_in">string</span> | (() =&gt; <span class="hljs-built_in">any</span>),
    cb: <span class="hljs-built_in">Function</span>,
    options?: WatcherOptions | <span class="hljs-literal">null</span>,
    isRenderWatcher?: <span class="hljs-built_in">boolean</span>
  </span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">vm</span> = vm
    <span class="hljs-keyword">if</span> (isRenderWatcher) {
      vm.<span class="hljs-property">_watcher</span> = <span class="hljs-variable language_">this</span>
    }
    
    <span class="hljs-comment">// å°†è¡¨è¾¾å¼è½¬æ¢ä¸ºgetterå‡½æ•°</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isFunction</span>(expOrFn)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">getter</span> = expOrFn
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">getter</span> = <span class="hljs-title function_">parsePath</span>(expOrFn)
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">lazy</span> ? <span class="hljs-literal">undefined</span> : <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">get</span>()
  }

  <span class="hljs-comment">// è·å–å€¼ï¼Œè§¦å‘ä¾èµ–æ”¶é›†</span>
  <span class="hljs-title function_">get</span>(<span class="hljs-params"/>) {
    <span class="hljs-title function_">pushTarget</span>(<span class="hljs-variable language_">this</span>) <span class="hljs-comment">// è®¾ç½®å½“å‰Watcherä¸ºDep.target</span>
    <span class="hljs-keyword">let</span> value
    <span class="hljs-keyword">const</span> vm = <span class="hljs-variable language_">this</span>.<span class="hljs-property">vm</span>
    <span class="hljs-keyword">try</span> {
      value = <span class="hljs-variable language_">this</span>.<span class="hljs-property">getter</span>.<span class="hljs-title function_">call</span>(vm, vm) <span class="hljs-comment">// æ‰§è¡Œgetterï¼Œè§¦å‘å±æ€§çš„get</span>
    } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">e</span>: <span class="hljs-built_in">any</span>) {
      <span class="hljs-title function_">handleError</span>(e, vm, <span class="hljs-string">`getter for watcher "<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.expression}</span>"`</span>)
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">deep</span>) {
        <span class="hljs-title function_">traverse</span>(value) <span class="hljs-comment">// æ·±åº¦éå†ï¼Œæ”¶é›†æ‰€æœ‰åµŒå¥—å±æ€§çš„ä¾èµ–</span>
      }
      <span class="hljs-title function_">popTarget</span>() <span class="hljs-comment">// æ¢å¤ä¹‹å‰çš„Watcher</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cleanupDeps</span>() <span class="hljs-comment">// æ¸…ç†ä¸å†éœ€è¦çš„ä¾èµ–</span>
    }
    <span class="hljs-keyword">return</span> value
  }

  <span class="hljs-comment">// ä¾èµ–æ›´æ–°æ—¶è°ƒç”¨</span>
  <span class="hljs-title function_">update</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">lazy</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirty</span> = <span class="hljs-literal">true</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">sync</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">run</span>() <span class="hljs-comment">// åŒæ­¥æ‰§è¡Œ</span>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">queueWatcher</span>(<span class="hljs-variable language_">this</span>) <span class="hljs-comment">// å¼‚æ­¥æ‰§è¡Œï¼ŒåŠ å…¥é˜Ÿåˆ—</span>
    }
  }

  <span class="hljs-comment">// æ‰§è¡Œå›è°ƒ</span>
  <span class="hljs-title function_">run</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">active</span>) {
      <span class="hljs-keyword">const</span> value = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">get</span>()
      <span class="hljs-keyword">if</span> (
        value !== <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> ||
        <span class="hljs-title function_">isObject</span>(value) ||
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">deep</span>
      ) {
        <span class="hljs-keyword">const</span> oldValue = <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = value
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">user</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">cb</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">vm</span>, value, oldValue)
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">cb</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">vm</span>, value, oldValue)
        }
      }
    }
  }
}
</code></pre>
<p><strong>Watcherç±»å‹ï¼š</strong></p>
<ul>
<li><strong>Render Watcher</strong>ï¼šæ¯ä¸ªç»„ä»¶å®ä¾‹éƒ½æœ‰ä¸€ä¸ªï¼Œç”¨äºæ›´æ–°è§†å›¾</li>
<li><strong>User Watcher</strong>ï¼šç”¨æˆ·é€šè¿‡ <code>$watch</code> æˆ– <code>watch</code> é€‰é¡¹åˆ›å»ºçš„</li>
<li><strong>Computed Watcher</strong>ï¼šè®¡ç®—å±æ€§çš„Watcherï¼Œå…·æœ‰ <code>lazy</code> ç‰¹æ€§</li>
</ul>
<h4 data-id="heading-11">2.5 å“åº”å¼ç³»ç»Ÿæµç¨‹å›¾</h4>
<pre><code class="hljs language-scss" lang="scss">è®¿é—®å±æ€§ (getter)
    â†“
Dep<span class="hljs-selector-class">.target</span> å­˜åœ¨ï¼Ÿ
    â†“ æ˜¯
dep<span class="hljs-selector-class">.depend</span>() â†’ watcher<span class="hljs-selector-class">.addDep</span>(dep) â†’ dep<span class="hljs-selector-class">.addSub</span>(watcher)
    â†“
ä¾èµ–æ”¶é›†å®Œæˆ

ä¿®æ”¹å±æ€§ (setter)
    â†“
dep<span class="hljs-selector-class">.notify</span>()
    â†“
éå† subsï¼Œè°ƒç”¨ watcher<span class="hljs-selector-class">.update</span>()
    â†“
<span class="hljs-built_in">queueWatcher</span>(watcher)
    â†“
<span class="hljs-built_in">nextTick</span>(flushSchedulerQueue)
    â†“
watcher<span class="hljs-selector-class">.run</span>() â†’ watcher<span class="hljs-selector-class">.get</span>() â†’ é‡æ–°æ¸²æŸ“/æ‰§è¡Œå›è°ƒ
</code></pre>
<h3 data-id="heading-12">ä¸‰ã€æ¸²æŸ“ç³»ç»Ÿ</h3>
<h4 data-id="heading-13">3.1 renderå‡½æ•°</h4>
<p>æ¯ä¸ªVueç»„ä»¶éƒ½æœ‰ä¸€ä¸ªrenderå‡½æ•°ï¼Œå®šä¹‰åœ¨ <code>src/core/instance/render.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title class_">Vue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">_render</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>): <span class="hljs-title class_">VNode</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">vm</span>: <span class="hljs-title class_">Component</span> = <span class="hljs-variable language_">this</span>
  <span class="hljs-keyword">const</span> { render, _parentVnode } = vm.<span class="hljs-property">$options</span>

  <span class="hljs-comment">// è®¾ç½®çˆ¶vnode</span>
  vm.<span class="hljs-property">$vnode</span> = _parentVnode
  
  <span class="hljs-comment">// æ‰§è¡Œrenderå‡½æ•°ï¼Œç”Ÿæˆvnode</span>
  <span class="hljs-keyword">let</span> vnode
  <span class="hljs-keyword">try</span> {
    <span class="hljs-title function_">setCurrentInstance</span>(vm)
    currentRenderingInstance = vm
    vnode = render.<span class="hljs-title function_">call</span>(vm.<span class="hljs-property">_renderProxy</span>, vm.<span class="hljs-property">$createElement</span>)
  } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">e</span>: <span class="hljs-built_in">any</span>) {
    <span class="hljs-title function_">handleError</span>(e, vm, <span class="hljs-string">`render`</span>)
    vnode = vm.<span class="hljs-property">_vnode</span>
  } <span class="hljs-keyword">finally</span> {
    currentRenderingInstance = prevRenderInst
    <span class="hljs-title function_">setCurrentInstance</span>(prevInst)
  }
  
  <span class="hljs-comment">// ç¡®ä¿è¿”å›å•ä¸ªæ ¹èŠ‚ç‚¹</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isArray</span>(vnode) &amp;&amp; vnode.<span class="hljs-property">length</span> === <span class="hljs-number">1</span>) {
    vnode = vnode[<span class="hljs-number">0</span>]
  }
  
  <span class="hljs-keyword">if</span> (!(vnode <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">VNode</span>)) {
    vnode = <span class="hljs-title function_">createEmptyVNode</span>()
  }
  
  vnode.<span class="hljs-property">parent</span> = _parentVnode
  <span class="hljs-keyword">return</span> vnode
}
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li><code>render</code> å‡½æ•°æ¥æ”¶ <code>createElement</code> ä½œä¸ºå‚æ•°</li>
<li><code>vm._renderProxy</code> åœ¨å¼€å‘ç¯å¢ƒä¸‹æ˜¯Proxyï¼Œç”¨äºè­¦å‘Šæœªå®šä¹‰çš„å±æ€§</li>
<li>renderå‡½æ•°æ‰§è¡Œæ—¶ä¼šè®¿é—®å“åº”å¼æ•°æ®ï¼Œè§¦å‘ä¾èµ–æ”¶é›†</li>
</ul>
<h4 data-id="heading-14">3.2 æ¸²æŸ“Watcher</h4>
<p>åœ¨ç»„ä»¶æŒ‚è½½æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªRender Watcherï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">mountComponent</span>(<span class="hljs-params">
  vm: Component,
  el: Element | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span>,
  hydrating?: <span class="hljs-built_in">boolean</span>
</span>): <span class="hljs-title class_">Component</span> {
  <span class="hljs-comment">// ...</span>
  
  <span class="hljs-keyword">let</span> <span class="hljs-title function_">updateComponent</span> = (<span class="hljs-params"/>) =&gt; {
    vm.<span class="hljs-title function_">_update</span>(vm.<span class="hljs-title function_">_render</span>(), hydrating)
  }

  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Watcher</span>(
    vm,
    updateComponent,
    noop,
    {
      <span class="hljs-title function_">before</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">if</span> (vm.<span class="hljs-property">_isMounted</span> &amp;&amp; !vm.<span class="hljs-property">_isDestroyed</span>) {
          <span class="hljs-title function_">callHook</span>(vm, <span class="hljs-string">'beforeUpdate'</span>)
        }
      }
    },
    <span class="hljs-literal">true</span> <span class="hljs-comment">/* isRenderWatcher */</span>
  )
  
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>å½“å“åº”å¼æ•°æ®å˜åŒ–æ—¶ï¼š</p>
<ol>
<li>è§¦å‘å±æ€§çš„setter</li>
<li>è°ƒç”¨ <code>dep.notify()</code></li>
<li>Render Watcherçš„ <code>update()</code> è¢«è°ƒç”¨</li>
<li>åŠ å…¥æ›´æ–°é˜Ÿåˆ—ï¼Œåœ¨ <code>nextTick</code> ä¸­æ‰§è¡Œ</li>
<li>æ‰§è¡Œ <code>updateComponent</code>ï¼Œé‡æ–°æ¸²æŸ“</li>
</ol>
<h3 data-id="heading-15">å››ã€è°ƒåº¦å™¨ï¼ˆSchedulerï¼‰</h3>
<p>Vueä½¿ç”¨è°ƒåº¦å™¨æ¥æ‰¹é‡å¤„ç†æ›´æ–°ï¼Œé¿å…é¢‘ç¹çš„DOMæ“ä½œï¼Œå®šä¹‰åœ¨ <code>src/core/observer/scheduler.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-attr">queue</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">Watcher</span>&gt; = []
<span class="hljs-keyword">let</span> <span class="hljs-attr">has</span>: { [<span class="hljs-attr">key</span>: <span class="hljs-built_in">number</span>]: <span class="hljs-literal">true</span> | <span class="hljs-literal">undefined</span> | <span class="hljs-literal">null</span> } = {}
<span class="hljs-keyword">let</span> waiting = <span class="hljs-literal">false</span>
<span class="hljs-keyword">let</span> flushing = <span class="hljs-literal">false</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">queueWatcher</span>(<span class="hljs-params">watcher: Watcher</span>) {
  <span class="hljs-keyword">const</span> id = watcher.<span class="hljs-property">id</span>
  
  <span class="hljs-comment">// å»é‡ï¼šåŒä¸€ä¸ªWatcheråªæ·»åŠ ä¸€æ¬¡</span>
  <span class="hljs-keyword">if</span> (has[id] != <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">return</span>
  }
  
  has[id] = <span class="hljs-literal">true</span>
  
  <span class="hljs-keyword">if</span> (!flushing) {
    queue.<span class="hljs-title function_">push</span>(watcher)
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// å¦‚æœæ­£åœ¨åˆ·æ–°ï¼ŒæŒ‰idæ’å…¥åˆ°æ­£ç¡®ä½ç½®</span>
    <span class="hljs-keyword">let</span> i = queue.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>
    <span class="hljs-keyword">while</span> (i &gt; index &amp;&amp; queue[i].<span class="hljs-property">id</span> &gt; watcher.<span class="hljs-property">id</span>) {
      i--
    }
    queue.<span class="hljs-title function_">splice</span>(i + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, watcher)
  }
  
  <span class="hljs-comment">// ç¡®ä¿åªè°ƒç”¨ä¸€æ¬¡nextTick</span>
  <span class="hljs-keyword">if</span> (!waiting) {
    waiting = <span class="hljs-literal">true</span>
    <span class="hljs-title function_">nextTick</span>(flushSchedulerQueue)
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">flushSchedulerQueue</span>(<span class="hljs-params"/>) {
  currentFlushTimestamp = <span class="hljs-title function_">getNow</span>()
  flushing = <span class="hljs-literal">true</span>
  
  <span class="hljs-comment">// æ’åºï¼šç¡®ä¿çˆ¶ç»„ä»¶å…ˆäºå­ç»„ä»¶æ›´æ–°</span>
  queue.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-property">id</span> - b.<span class="hljs-property">id</span>)
  
  <span class="hljs-keyword">for</span> (index = <span class="hljs-number">0</span>; index &lt; queue.<span class="hljs-property">length</span>; index++) {
    watcher = queue[index]
    <span class="hljs-keyword">if</span> (watcher.<span class="hljs-property">before</span>) {
      watcher.<span class="hljs-title function_">before</span>() <span class="hljs-comment">// è°ƒç”¨beforeUpdateé’©å­</span>
    }
    has[id] = <span class="hljs-literal">null</span>
    watcher.<span class="hljs-title function_">run</span>() <span class="hljs-comment">// æ‰§è¡Œæ›´æ–°</span>
  }
  
  <span class="hljs-title function_">resetSchedulerState</span>()
  <span class="hljs-title function_">callUpdatedHooks</span>(updatedQueue)
}
</code></pre>
<p><strong>è®¾è®¡ä¼˜åŠ¿ï¼š</strong></p>
<ol>
<li><strong>æ‰¹é‡æ›´æ–°</strong>ï¼šåŒä¸€äº‹ä»¶å¾ªç¯ä¸­çš„å¤šæ¬¡æ•°æ®å˜åŒ–ï¼Œåªä¼šè§¦å‘ä¸€æ¬¡æ›´æ–°</li>
<li><strong>å»é‡</strong>ï¼šåŒä¸€ä¸ªWatcherä¸ä¼šé‡å¤æ·»åŠ </li>
<li><strong>æ’åº</strong>ï¼šç¡®ä¿çˆ¶ç»„ä»¶å…ˆäºå­ç»„ä»¶æ›´æ–°ï¼Œé¿å…ä¸å¿…è¦çš„å­ç»„ä»¶æ›´æ–°</li>
</ol>
<h3 data-id="heading-16">äº”ã€æ•°ç»„çš„å“åº”å¼å¤„ç†</h3>
<p>ç”±äº <code>Object.defineProperty</code> æ— æ³•ç›‘å¬æ•°ç»„ç´¢å¼•çš„å˜åŒ–ï¼ŒVue2é€šè¿‡é‡å†™æ•°ç»„æ–¹æ³•æ¥å®ç°å“åº”å¼ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/core/observer/array.ts</span>
<span class="hljs-keyword">const</span> arrayProto = <span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> arrayMethods = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(arrayProto)

<span class="hljs-keyword">const</span> methodsToPatch = [
  <span class="hljs-string">'push'</span>,
  <span class="hljs-string">'pop'</span>,
  <span class="hljs-string">'shift'</span>,
  <span class="hljs-string">'unshift'</span>,
  <span class="hljs-string">'splice'</span>,
  <span class="hljs-string">'sort'</span>,
  <span class="hljs-string">'reverse'</span>
]

methodsToPatch.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">method</span>) {
  <span class="hljs-keyword">const</span> original = arrayProto[method]
  <span class="hljs-title function_">def</span>(arrayMethods, method, <span class="hljs-keyword">function</span> <span class="hljs-title function_">mutator</span>(<span class="hljs-params">...args</span>) {
    <span class="hljs-keyword">const</span> result = original.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args)
    <span class="hljs-keyword">const</span> ob = <span class="hljs-variable language_">this</span>.<span class="hljs-property">__ob__</span>
    <span class="hljs-keyword">let</span> inserted
    <span class="hljs-keyword">switch</span> (method) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'push'</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-string">'unshift'</span>:
        inserted = args
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">'splice'</span>:
        inserted = args.<span class="hljs-title function_">slice</span>(<span class="hljs-number">2</span>)
        <span class="hljs-keyword">break</span>
    }
    <span class="hljs-keyword">if</span> (inserted) ob.<span class="hljs-title function_">observeArray</span>(inserted)
    ob.<span class="hljs-property">dep</span>.<span class="hljs-title function_">notify</span>() <span class="hljs-comment">// é€šçŸ¥æ›´æ–°</span>
    <span class="hljs-keyword">return</span> result
  })
})
</code></pre>
<p><strong>å®ç°åŸç†ï¼š</strong></p>
<ul>
<li>åˆ›å»ºæ–°å¯¹è±¡ç»§æ‰¿ <code>Array.prototype</code></li>
<li>é‡å†™ä¼šæ”¹å˜æ•°ç»„çš„æ–¹æ³•</li>
<li>åœ¨æ–¹æ³•ä¸­è°ƒç”¨ <code>ob.dep.notify()</code> é€šçŸ¥æ›´æ–°</li>
<li>å¯¹æ–°æ·»åŠ çš„å…ƒç´ è¿›è¡Œå“åº”å¼å¤„ç†</li>
</ul>
<h3 data-id="heading-17">å…­ã€æ€»ç»“</h3>
<p>é€šè¿‡é˜…è¯»Vue2æºç ï¼Œæˆ‘ä»¬å¯ä»¥å­¦åˆ°ï¼š</p>
<ol>
<li><strong>Mixinæ¨¡å¼</strong>ï¼šé€šè¿‡Mixinç»„ç»‡ä»£ç ï¼Œä¿æŒæ¨¡å—åŒ–</li>
<li><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>ï¼šObserverã€Depã€Watcherçš„ç»å…¸å®ç°</li>
<li><strong>ä¾èµ–æ”¶é›†</strong>ï¼šé€šè¿‡getter/setterå®ç°è‡ªåŠ¨ä¾èµ–æ”¶é›†</li>
<li><strong>æ‰¹é‡æ›´æ–°</strong>ï¼šä½¿ç”¨è°ƒåº¦å™¨ä¼˜åŒ–æ€§èƒ½</li>
<li><strong>æ•°ç»„å¤„ç†</strong>ï¼šé€šè¿‡é‡å†™åŸå‹æ–¹æ³•å®ç°æ•°ç»„å“åº”å¼</li>
</ol>
<p>Vue2çš„å“åº”å¼ç³»ç»Ÿè™½ç„¶åŸºäº <code>Object.defineProperty</code>ï¼Œå­˜åœ¨ä¸€äº›å±€é™æ€§ï¼ˆå¦‚æ— æ³•ç›‘å¬æ–°å¢å±æ€§ã€æ•°ç»„ç´¢å¼•ç­‰ï¼‰ï¼Œä½†å…¶è®¾è®¡æ€æƒ³ä»ç„¶å€¼å¾—å­¦ä¹ ã€‚Vue3æ”¹ç”¨Proxyå®ç°ï¼Œè§£å†³äº†è¿™äº›é—®é¢˜ï¼Œä½†æ ¸å¿ƒçš„ä¾èµ–æ”¶é›†å’Œæ›´æ–°æœºåˆ¶ä»ç„¶ç±»ä¼¼ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£Vue2çš„å·¥ä½œåŸç†ã€‚å¦‚æœä½ å¯¹æŸä¸ªéƒ¨åˆ†æœ‰ç–‘é—®ï¼Œå»ºè®®ç›´æ¥é˜…è¯»æºç ï¼Œç»“åˆè°ƒè¯•å·¥å…·ï¼Œä¼šæœ‰æ›´æ·±å…¥çš„ç†è§£ã€‚</p>
<hr/>
<p><strong>å‚è€ƒèµ„æºï¼š</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fv2.vuejs.org%2F" target="_blank" title="https://v2.vuejs.org/" ref="nofollow noopener noreferrer">Vue2 å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvuejs%2Fvue" target="_blank" title="https://github.com/vuejs/vue" ref="nofollow noopener noreferrer">Vue2 æºç ä»“åº“</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fustbhuangyi.github.io%2Fvue-analysis%2F" target="_blank" title="https://ustbhuangyi.github.io/vue-analysis/" ref="nofollow noopener noreferrer">VueæŠ€æœ¯æ­ç§˜</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vueæ˜¯æ€ä¹ˆå®ç°åŒå‘ç»‘å®šçš„]]></title>    <link>https://juejin.cn/post/7571429745230561316</link>    <guid>https://juejin.cn/post/7571429745230561316</guid>    <pubDate>2025-11-12T05:46:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571429745230561316" data-draft-id="7571379089992450102" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vueæ˜¯æ€ä¹ˆå®ç°åŒå‘ç»‘å®šçš„"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-12T05:46:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·34584828505"/> <meta itemprop="url" content="https://juejin.cn/user/3710177917545754"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vueæ˜¯æ€ä¹ˆå®ç°åŒå‘ç»‘å®šçš„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3710177917545754/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·34584828505
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T05:46:28.000Z" title="Wed Nov 12 2025 05:46:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Vue çš„ <strong>åŒå‘ç»‘å®šï¼ˆv-modelï¼‰</strong> æ ¸å¿ƒæ˜¯ <strong>â€œæ•°æ®å“åº”å¼ + è§†å›¾äº‹ä»¶ç›‘å¬â€çš„è”åŠ¨æœºåˆ¶</strong>â€”â€”æœ¬è´¨æ˜¯è¯­æ³•ç³–ï¼Œåº•å±‚é€šè¿‡ã€Œæ•°æ®åŠ«æŒã€ç›‘å¬æ•°æ®å˜åŒ–ï¼ŒåŒæ­¥æ›´æ–°è§†å›¾ï¼›åŒæ—¶é€šè¿‡ã€Œäº‹ä»¶ç›‘å¬ã€æ•è·è§†å›¾æ“ä½œï¼ˆå¦‚è¾“å…¥æ¡†è¾“å…¥ï¼‰ï¼Œåå‘åŒæ­¥æ›´æ–°æ•°æ®ï¼Œæœ€ç»ˆå®ç° â€‹<code>â€‹æ•°æ® â†” è§†å›¾â€‹</code>â€‹ åŒå‘è‡ªåŠ¨åŒæ­¥ã€‚</p>
<p>ä¸åŒ Vue ç‰ˆæœ¬çš„å®ç°åŸç†æœ‰å·®å¼‚ï¼Œä»¥ä¸‹åˆ† <strong>Vue 2.x</strong> å’Œ <strong>Vue 3.x</strong> è¯¦ç»†è¯´æ˜ï¼ˆé¢è¯•é«˜é¢‘è€ƒç‚¹ï¼‰ï¼š</p>
<h3 data-id="heading-0">ä¸€ã€æ ¸å¿ƒæ¦‚å¿µé“ºå«</h3>
<p>åŒå‘ç»‘å®šçš„æ ¸å¿ƒä¾èµ– 3 ä¸ªæ ¸å¿ƒæ¨¡å—ï¼Œæ— è®º Vue 2 è¿˜æ˜¯ 3 éƒ½ç¦»ä¸å¼€è¿™ä¸ªé€»è¾‘ï¼š</p>
<ol>
<li><strong>å“åº”å¼æ•°æ®</strong>ï¼šå¯¹æ•°æ®è¿›è¡Œâ€œåŠ«æŒâ€ï¼Œæ•°æ®å˜åŒ–æ—¶èƒ½ä¸»åŠ¨è§¦å‘æ›´æ–°ï¼›</li>
<li><strong>è§†å›¾æ›´æ–°</strong>ï¼šæ•°æ®å˜åŒ–åï¼Œè‡ªåŠ¨æ‰¾åˆ°ä¾èµ–è¯¥æ•°æ®çš„ DOM å¹¶æ›´æ–°ï¼›</li>
<li><strong>äº‹ä»¶ç›‘å¬</strong>ï¼šç›‘å¬è§†å›¾çš„ç”¨æˆ·æ“ä½œï¼ˆå¦‚ input è¾“å…¥ã€select é€‰æ‹©ï¼‰ï¼Œå°†æ“ä½œç»“æœåŒæ­¥å›æ•°æ®ã€‚</li>
</ol>
<h3 data-id="heading-1">äºŒã€Vue 2.x åŒå‘ç»‘å®šå®ç°åŸç†ï¼ˆObject.definePropertyï¼‰</h3>
<p>Vue 2 æ ¸å¿ƒé€šè¿‡ â€‹<code>â€‹Object.definePropertyâ€‹</code>â€‹<strong>â€‹ åŠ«æŒæ•°æ®çš„ getter/setter</strong>ï¼Œé…åˆã€Œä¾èµ–æ”¶é›†ã€å’Œã€Œå‘å¸ƒ-è®¢é˜…æ¨¡å¼ã€å®ç°åŒå‘ç»‘å®šï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹ï¼š</p>
<h4 data-id="heading-2">1. æ ¸å¿ƒæ­¥éª¤æ‹†è§£</h4>
<h5 data-id="heading-3">ï¼ˆ1ï¼‰æ•°æ®åŠ«æŒï¼šObject.defineProperty</h5>
<p>Vue 2 ä¼šå¯¹ç»„ä»¶ â€‹<code>â€‹dataâ€‹</code>â€‹ ä¸­çš„æ•°æ®è¿›è¡Œé€’å½’éå†ï¼Œç»™æ¯ä¸ªå±æ€§é€šè¿‡ â€‹<code>â€‹Object.definePropertyâ€‹</code>â€‹ é‡å†™ â€‹<code>â€‹getterâ€‹</code>â€‹ å’Œ â€‹<code>â€‹setterâ€‹</code>â€‹ï¼š</p>
<ul>
<li><strong>getter</strong>ï¼šå½“æ•°æ®è¢«è®¿é—®æ—¶ï¼ˆå¦‚è§†å›¾æ¸²æŸ“ç”¨åˆ° â€‹<code>â€‹{{ msg }}â€‹</code>â€‹ï¼‰ï¼Œè§¦å‘ getterï¼Œè¿›è¡Œã€Œä¾èµ–æ”¶é›†ã€ï¼ˆè®°å½•å½“å‰ç»„ä»¶çš„ Watcherï¼‰ï¼›</li>
<li><strong>setter</strong>ï¼šå½“æ•°æ®è¢«ä¿®æ”¹æ—¶ï¼ˆå¦‚ â€‹<code>â€‹this.msg = 'new'â€‹</code>â€‹ï¼‰ï¼Œè§¦å‘ setterï¼Œé€šçŸ¥æ‰€æœ‰ä¾èµ–è¯¥æ•°æ®çš„ Watcher æ‰§è¡Œæ›´æ–°ã€‚</li>
</ul>
<p>ç¤ºä¾‹ä»£ç ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">defineReactive</span>(<span class="hljs-params">obj, key, value</span>) {
  <span class="hljs-comment">// é€’å½’å¤„ç†åµŒå¥—å¯¹è±¡ï¼ˆå¦‚ data: { user: { name: 'xxx' } }ï¼‰</span>
  <span class="hljs-title function_">observe</span>(value);

  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(obj, key, {
    <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¯æšä¸¾</span>
    <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¯é…ç½®</span>
    <span class="hljs-title function_">get</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// ä¾èµ–æ”¶é›†ï¼šè®°å½•å½“å‰ Watcher</span>
      <span class="hljs-title class_">Dep</span>.<span class="hljs-property">target</span> &amp;&amp; dep.<span class="hljs-title function_">addSub</span>(<span class="hljs-title class_">Dep</span>.<span class="hljs-property">target</span>);
      <span class="hljs-keyword">return</span> value;
    },
    <span class="hljs-title function_">set</span>(<span class="hljs-params">newValue</span>) {
      <span class="hljs-keyword">if</span> (newValue === value) <span class="hljs-keyword">return</span>;
      value = newValue;
      <span class="hljs-title function_">observe</span>(newValue); <span class="hljs-comment">// æ–°å€¼æ˜¯å¯¹è±¡æ—¶ï¼Œç»§ç»­åŠ«æŒ</span>
      dep.<span class="hljs-title function_">notify</span>(); <span class="hljs-comment">// å‘å¸ƒé€šçŸ¥ï¼šè§¦å‘æ‰€æœ‰ä¾èµ–çš„ Watcher æ›´æ–°</span>
    }
  });
}

<span class="hljs-comment">// é€’å½’åŠ«æŒ data æ‰€æœ‰å±æ€§</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">observe</span>(<span class="hljs-params">obj</span>) {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj !== <span class="hljs-string">'object'</span> || obj === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>;
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Observer</span>(obj);
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Observer</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">obj</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(obj)) {
      <span class="hljs-comment">// å¤„ç†æ•°ç»„ï¼šé‡å†™ push/pop/splice ç­‰æ–¹æ³•ï¼ˆVue 2 æ•°ç»„åŠ«æŒç‰¹æ®Šå¤„ç†ï¼‰</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">observeArray</span>(obj);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// å¤„ç†å¯¹è±¡ï¼šéå†å±æ€§åŠ«æŒ</span>
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(obj).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> <span class="hljs-title function_">defineReactive</span>(obj, key, obj[key]));
    }
  }
  <span class="hljs-title function_">observeArray</span>(<span class="hljs-params">arr</span>) {
    arr.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> <span class="hljs-title function_">observe</span>(item));
  }
}
</code></pre>
<h5 data-id="heading-4">ï¼ˆ2ï¼‰ä¾èµ–æ”¶é›†ï¼šDep ç±»ï¼ˆå‘å¸ƒè€…ï¼‰</h5>
<p>æ¯ä¸ªå“åº”å¼å±æ€§éƒ½ä¼šå¯¹åº”ä¸€ä¸ª â€‹<code>â€‹Depâ€‹</code>â€‹ å®ä¾‹ï¼ˆå‘å¸ƒè€…ï¼‰ï¼Œç”¨äºç®¡ç†ä¾èµ–è¯¥å±æ€§çš„æ‰€æœ‰ â€‹<code>â€‹Watcherâ€‹</code>â€‹ï¼ˆè®¢é˜…è€…ï¼‰ï¼š</p>
<ul>
<li>â€‹<code>â€‹addSub(watcher)â€‹</code>â€‹ï¼šæ·»åŠ è®¢é˜…è€…ï¼ˆWatcherï¼‰ï¼›</li>
<li>â€‹<code>â€‹notify()â€‹</code>â€‹ï¼šå‘å¸ƒæ›´æ–°é€šçŸ¥ï¼Œè§¦å‘æ‰€æœ‰è®¢é˜…è€…çš„ â€‹<code>â€‹updateâ€‹</code>â€‹ æ–¹æ³•ã€‚</li>
</ul>
<pre><code class="hljs language-perl" lang="perl">class Dep {
  constructor() {
    this.subs = []; <span class="hljs-regexp">//</span> å­˜å‚¨æ‰€æœ‰ä¾èµ–çš„ Watcher
  }
  addSub(<span class="hljs-function"><span class="hljs-keyword">sub</span>) </span>{
    this.subs.push(<span class="hljs-function"><span class="hljs-keyword">sub</span>)</span>;
  }
  notify() {
    this.subs.forEach(<span class="hljs-string">sub =&gt;</span> sub.update()); <span class="hljs-regexp">//</span> é€šçŸ¥æ‰€æœ‰ Watcher æ›´æ–°
  }
}
</code></pre>
<h5 data-id="heading-5">ï¼ˆ3ï¼‰è§†å›¾æ›´æ–°ï¼šWatcher ç±»ï¼ˆè®¢é˜…è€…ï¼‰</h5>
<p>â€‹<code>â€‹Watcherâ€‹</code>â€‹ æ˜¯è¿æ¥æ•°æ®å’Œè§†å›¾çš„æ¡¥æ¢ï¼Œæ¯ä¸ªç»„ä»¶å¯¹åº”ä¸€ä¸ª â€‹<code>â€‹Watcherâ€‹</code>â€‹ï¼ˆæˆ–å¤šä¸ªï¼‰ï¼š</p>
<ul>
<li>åˆå§‹åŒ–æ—¶ï¼Œä¼šè§¦å‘æ•°æ®çš„ â€‹<code>â€‹getterâ€‹</code>â€‹ï¼Œå°†è‡ªèº«æ·»åŠ åˆ° â€‹<code>â€‹Depâ€‹</code>â€‹ çš„è®¢é˜…åˆ—è¡¨ï¼›</li>
<li>å½“æ•°æ®å˜åŒ–è§¦å‘ â€‹<code>â€‹Dep.notify()â€‹</code>â€‹ æ—¶ï¼Œâ€‹<code>â€‹Watcherâ€‹</code>â€‹ çš„ â€‹<code>â€‹updateâ€‹</code>â€‹ æ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œæœ€ç»ˆè§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ï¼ˆâ€‹<code>â€‹renderâ€‹</code>â€‹ å‡½æ•°ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-6">ï¼ˆ4ï¼‰åŒå‘ç»‘å®šï¼šv-model è¯­æ³•ç³–</h5>
<p>â€‹<code>â€‹v-modelâ€‹</code>â€‹ æœ¬è´¨æ˜¯ â€‹<code>â€‹:valueâ€‹</code>â€‹ï¼ˆæ•°æ® â†’ è§†å›¾ï¼‰å’Œ â€‹<code>â€‹@inputâ€‹</code>â€‹ï¼ˆè§†å›¾ â†’ æ•°æ®ï¼‰çš„è¯­æ³•ç³–ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ç­‰ä»·äº --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"msg"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">"msg"</span> @<span class="hljs-attr">input</span>=<span class="hljs-string">"msg = $event.target.value"</span> /&gt;</span>
</code></pre>
<ul>
<li>æ•°æ® â†’ è§†å›¾ï¼šâ€‹<code>â€‹msgâ€‹</code>â€‹ å˜åŒ–æ—¶ï¼Œé€šè¿‡å“åº”å¼æœºåˆ¶è§¦å‘ â€‹<code>â€‹inputâ€‹</code>â€‹ å…ƒç´ çš„ â€‹<code>â€‹valueâ€‹</code>â€‹ æ›´æ–°ï¼›</li>
<li>è§†å›¾ â†’ æ•°æ®ï¼šç”¨æˆ·è¾“å…¥æ—¶ï¼Œè§¦å‘ â€‹<code>â€‹inputâ€‹</code>â€‹ äº‹ä»¶ï¼Œå°†è¾“å…¥å€¼èµ‹å€¼ç»™ â€‹<code>â€‹msgâ€‹</code>â€‹ï¼Œè§¦å‘ â€‹<code>â€‹msgâ€‹</code>â€‹ çš„ â€‹<code>â€‹setterâ€‹</code>â€‹ï¼Œå®Œæˆæ•°æ®åŒæ­¥ã€‚</li>
</ul>
<h4 data-id="heading-7">2. Vue 2 åŒå‘ç»‘å®šå®Œæ•´æµç¨‹</h4>
<ol>
<li>ç»„ä»¶åˆå§‹åŒ–æ—¶ï¼Œâ€‹<code>â€‹dataâ€‹</code>â€‹ è¢« â€‹<code>â€‹observeâ€‹</code>â€‹ åŠ«æŒæ‰€æœ‰å±æ€§çš„ â€‹<code>â€‹getter/setterâ€‹</code>â€‹ï¼›</li>
<li>ç»„ä»¶æ¸²æŸ“æ—¶ï¼Œè§¦å‘æ•°æ®çš„ â€‹<code>â€‹getterâ€‹</code>â€‹ï¼Œå°†ç»„ä»¶çš„ â€‹<code>â€‹Watcherâ€‹</code>â€‹ æ·»åŠ åˆ° â€‹<code>â€‹Depâ€‹</code>â€‹ è®¢é˜…åˆ—è¡¨ï¼ˆä¾èµ–æ”¶é›†ï¼‰ï¼›</li>
<li>æ•°æ®å˜åŒ–æ—¶ï¼Œè§¦å‘ â€‹<code>â€‹setterâ€‹</code>â€‹ â†’ â€‹<code>â€‹Dep.notify()â€‹</code>â€‹ â†’ æ‰€æœ‰ä¾èµ–çš„ â€‹<code>â€‹Watcher.update()â€‹</code>â€‹ â†’ ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼ˆæ•°æ® â†’ è§†å›¾ï¼‰ï¼›</li>
<li>è§†å›¾æ“ä½œï¼ˆå¦‚è¾“å…¥æ¡†è¾“å…¥ï¼‰è§¦å‘ â€‹<code>â€‹inputâ€‹</code>â€‹ äº‹ä»¶ â†’ èµ‹å€¼ç»™æ•°æ®ï¼ˆâ€‹<code>â€‹this.msg = æ–°å€¼â€‹</code>â€‹ï¼‰â†’ è§¦å‘ â€‹<code>â€‹setterâ€‹</code>â€‹ â†’ é‡å¤æ­¥éª¤ 3ï¼ˆè§†å›¾ â†’ æ•°æ®ï¼‰ã€‚</li>
</ol>
<h4 data-id="heading-8">3. Vue 2 åŒå‘ç»‘å®šçš„å±€é™æ€§</h4>
<ul>
<li>æ— æ³•åŠ«æŒæ•°ç»„çš„ç´¢å¼•ä¿®æ”¹ï¼ˆå¦‚ â€‹<code>â€‹arr[0] = 1â€‹</code>â€‹ï¼‰å’Œé•¿åº¦ä¿®æ”¹ï¼ˆå¦‚ â€‹<code>â€‹arr.length = 0â€‹</code>â€‹ï¼‰ï¼Œéœ€é€šè¿‡ Vue æä¾›çš„ â€‹<code>â€‹$setâ€‹</code>â€‹ æˆ–æ•°ç»„æ–¹æ³•ï¼ˆâ€‹<code>â€‹push/spliceâ€‹</code>â€‹ ç­‰ï¼‰è§¦å‘æ›´æ–°ï¼›</li>
<li>æ— æ³•åŠ«æŒå¯¹è±¡çš„æ–°å¢å±æ€§ï¼ˆå¦‚ â€‹<code>â€‹this.user.age = 18â€‹</code>â€‹ï¼‰ï¼Œéœ€é€šè¿‡ â€‹<code>â€‹this.$set(this.user, 'age', 18)â€‹</code>â€‹ æ·»åŠ å“åº”å¼å±æ€§ï¼›</li>
<li>â€‹<code>â€‹Object.definePropertyâ€‹</code>â€‹ éœ€é€’å½’éå†å¯¹è±¡ï¼Œæ€§èƒ½å¼€é”€è¾ƒå¤§ï¼ˆå°¤å…¶æ·±å±‚åµŒå¥—å¯¹è±¡ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-9">ä¸‰ã€Vue 3.x åŒå‘ç»‘å®šå®ç°åŸç†ï¼ˆProxy + Reflectï¼‰</h3>
<p>Vue 3 åºŸå¼ƒäº† â€‹<code>â€‹Object.definePropertyâ€‹</code>â€‹ï¼Œæ”¹ç”¨ â€‹<code>â€‹Proxyâ€‹</code>â€‹<strong>â€‹ ä»£ç†æ•°æ®</strong> + â€‹<code>â€‹Reflectâ€‹</code>â€‹<strong>â€‹ åå°„æ“ä½œ</strong>ï¼Œè§£å†³äº† Vue 2 çš„å±€é™æ€§ï¼ŒåŒæ—¶æ€§èƒ½æ›´ä¼˜ï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹ï¼š</p>
<h4 data-id="heading-10">1. æ ¸å¿ƒæ”¹è¿›ç‚¹</h4>
<ul>
<li><strong>Proxy ä¼˜åŠ¿</strong>ï¼š</li>
</ul>
<ol>
<li>å¯ç›´æ¥ä»£ç†æ•´ä¸ªå¯¹è±¡ï¼ˆæ— éœ€é€’å½’éå†å±æ€§ï¼‰ï¼Œæ–°å¢å±æ€§è‡ªåŠ¨å“åº”ï¼›</li>
<li>æ”¯æŒä»£ç†æ•°ç»„çš„ç´¢å¼•ä¿®æ”¹ã€é•¿åº¦ä¿®æ”¹ï¼ˆå¦‚ â€‹<code>â€‹arr[0] = 1â€‹</code>â€‹ã€â€‹<code>â€‹arr.length = 0â€‹</code>â€‹ï¼‰ï¼›</li>
<li>æ”¯æŒ 13 ç§æ‹¦æˆªæ“ä½œï¼ˆå¦‚ â€‹<code>â€‹getâ€‹</code>â€‹ã€â€‹<code>â€‹setâ€‹</code>â€‹ã€â€‹<code>â€‹deletePropertyâ€‹</code>â€‹ ç­‰ï¼‰ï¼ŒåŠŸèƒ½æ›´å¼ºå¤§ã€‚</li>
</ol>
<ul>
<li><strong>Reflect ä½œç”¨</strong>ï¼š</li>
</ul>
<ol>
<li>ç»Ÿä¸€å¯¹è±¡æ“ä½œçš„è¿”å›å€¼ï¼ˆå¦‚ â€‹<code>â€‹Reflect.setâ€‹</code>â€‹ æˆåŠŸè¿”å› â€‹<code>â€‹trueâ€‹</code>â€‹ï¼Œå¤±è´¥è¿”å› â€‹<code>â€‹falseâ€‹</code>â€‹ï¼‰ï¼›</li>
<li>é¿å…ç›´æ¥æ“ä½œå¯¹è±¡çš„å‰¯ä½œç”¨ï¼ˆå¦‚ â€‹<code>â€‹delete obj.keyâ€‹</code>â€‹ ä¼šæŠ¥é”™ï¼Œâ€‹<code>â€‹Reflect.deletePropertyâ€‹</code>â€‹ è¿”å›å¸ƒå°”å€¼ï¼‰ï¼›</li>
<li>ä¸ Proxy æ‹¦æˆªæ–¹æ³•ä¸€ä¸€å¯¹åº”ï¼Œä¾¿äºä»£ç ç»Ÿä¸€ç®¡ç†ã€‚</li>
</ol>
<h4 data-id="heading-11">2. æ ¸å¿ƒæ­¥éª¤æ‹†è§£</h4>
<h5 data-id="heading-12">ï¼ˆ1ï¼‰æ•°æ®ä»£ç†ï¼šProxy + reactive</h5>
<p>Vue 3 ä¸­é€šè¿‡ â€‹<code>â€‹reactiveâ€‹</code>â€‹ å‡½æ•°åˆ›å»ºå¯¹è±¡çš„ Proxy ä»£ç†ï¼Œé€’å½’å¤„ç†åµŒå¥—å¯¹è±¡ï¼ˆä»…åœ¨è®¿é—®åµŒå¥—å¯¹è±¡æ—¶æ‰ä»£ç†ï¼Œæ‡’åŠ è½½ä¼˜åŒ–ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">reactive</span>(<span class="hljs-params">obj</span>) {
  <span class="hljs-comment">// ä»…ä»£ç†å¯¹è±¡/æ•°ç»„ï¼ˆåŸºç¡€ç±»å‹ç”¨ ref å¤„ç†ï¼‰</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj !== <span class="hljs-string">'object'</span> || obj === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> obj;

  <span class="hljs-comment">// åˆ›å»º Proxy ä»£ç†</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(obj, {
    <span class="hljs-comment">// æ‹¦æˆªå±æ€§è®¿é—®ï¼ˆgetterï¼‰</span>
    <span class="hljs-title function_">get</span>(<span class="hljs-params">target, key, receiver</span>) {
      <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, key, receiver);
      <span class="hljs-comment">// ä¾èµ–æ”¶é›†ï¼šä¸ Vue 2 Dep ç±»ä¼¼ï¼Œè®°å½• Watcher</span>
      <span class="hljs-title function_">track</span>(target, key);
      <span class="hljs-comment">// é€’å½’ä»£ç†åµŒå¥—å¯¹è±¡ï¼ˆæ‡’åŠ è½½ï¼‰</span>
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">isObject</span>(result) ? <span class="hljs-title function_">reactive</span>(result) : result;
    },
    <span class="hljs-comment">// æ‹¦æˆªå±æ€§ä¿®æ”¹/æ–°å¢ï¼ˆsetterï¼‰</span>
    <span class="hljs-title function_">set</span>(<span class="hljs-params">target, key, value, receiver</span>) {
      <span class="hljs-keyword">const</span> oldValue = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, key, receiver);
      <span class="hljs-keyword">const</span> success = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, key, value, receiver);
      <span class="hljs-comment">// åªæœ‰å€¼å˜åŒ–æ—¶æ‰è§¦å‘æ›´æ–°</span>
      <span class="hljs-keyword">if</span> (oldValue !== value &amp;&amp; success) {
        <span class="hljs-comment">// å‘å¸ƒé€šçŸ¥ï¼šè§¦å‘ä¾èµ–æ›´æ–°</span>
        <span class="hljs-title function_">trigger</span>(target, key);
      }
      <span class="hljs-keyword">return</span> success;
    },
    <span class="hljs-comment">// æ‹¦æˆªå±æ€§åˆ é™¤</span>
    <span class="hljs-title function_">deleteProperty</span>(<span class="hljs-params">target, key</span>) {
      <span class="hljs-keyword">const</span> success = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">deleteProperty</span>(target, key);
      <span class="hljs-keyword">if</span> (success) {
        <span class="hljs-title function_">trigger</span>(target, key);
      }
      <span class="hljs-keyword">return</span> success;
    }
  });
}

<span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦ä¸ºå¯¹è±¡/æ•°ç»„</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">isObject</span>(<span class="hljs-params">value</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'object'</span> &amp;&amp; value !== <span class="hljs-literal">null</span>;
}
</code></pre>
<h5 data-id="heading-13">ï¼ˆ2ï¼‰åŸºç¡€ç±»å‹å“åº”å¼ï¼šref</h5>
<p>â€‹<code>â€‹Proxyâ€‹</code>â€‹ æ— æ³•ä»£ç†åŸºç¡€ç±»å‹ï¼ˆå¦‚ â€‹<code>â€‹stringâ€‹</code>â€‹ã€â€‹<code>â€‹numberâ€‹</code>â€‹ï¼‰ï¼ŒVue 3 ç”¨ â€‹<code>â€‹refâ€‹</code>â€‹ åŒ…è£…åŸºç¡€ç±»å‹ï¼Œé€šè¿‡ â€‹<code>â€‹valueâ€‹</code>â€‹ å±æ€§è®¿é—®/ä¿®æ”¹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function">function <span class="hljs-title">ref</span>(<span class="hljs-params"><span class="hljs-keyword">value</span></span>)</span> {
  <span class="hljs-comment">// åˆ›å»ºåŒ…å« value å±æ€§çš„å¯¹è±¡</span>
  <span class="hljs-keyword">const</span> refObj = {
    <span class="hljs-function"><span class="hljs-keyword">get</span> <span class="hljs-title">value</span>()</span> {
      track(refObj, <span class="hljs-string">'value'</span>); <span class="hljs-comment">// ä¾èµ–æ”¶é›†</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">value</span>;
    },
    <span class="hljs-function"><span class="hljs-keyword">set</span> <span class="hljs-title">value</span>(<span class="hljs-params">newValue</span>)</span> {
      <span class="hljs-keyword">if</span> (newValue === <span class="hljs-keyword">value</span>) <span class="hljs-keyword">return</span>;
      <span class="hljs-keyword">value</span> = newValue;
      trigger(refObj, <span class="hljs-string">'value'</span>); <span class="hljs-comment">// å‘å¸ƒé€šçŸ¥</span>
    }
  };
  <span class="hljs-keyword">return</span> refObj;
}
</code></pre>
<h5 data-id="heading-14">ï¼ˆ3ï¼‰ä¾èµ–æ”¶é›†ä¸æ›´æ–°ï¼štrack + trigger</h5>
<p>Vue 3 ç”¨ â€‹<code>â€‹trackâ€‹</code>â€‹ æ›¿ä»£ Vue 2 çš„ â€‹<code>â€‹Dep.addSubâ€‹</code>â€‹ï¼Œç”¨ â€‹<code>â€‹triggerâ€‹</code>â€‹ æ›¿ä»£ â€‹<code>â€‹Dep.notifyâ€‹</code>â€‹ï¼Œé€»è¾‘æ›´ç®€æ´ï¼š</p>
<ul>
<li>â€‹<code>â€‹track(target, key)â€‹</code>â€‹ï¼šåœ¨ â€‹<code>â€‹getâ€‹</code>â€‹ æ‹¦æˆªæ—¶è°ƒç”¨ï¼Œè®°å½•â€œç›®æ ‡å¯¹è±¡ + å±æ€§â€å¯¹åº”çš„ä¾èµ–ï¼ˆWatcherï¼‰ï¼›</li>
<li>â€‹<code>â€‹trigger(target, key)â€‹</code>â€‹ï¼šåœ¨ â€‹<code>â€‹setâ€‹</code>â€‹/â€‹<code>â€‹deletePropertyâ€‹</code>â€‹ æ‹¦æˆªæ—¶è°ƒç”¨ï¼Œè§¦å‘â€œç›®æ ‡å¯¹è±¡ + å±æ€§â€çš„æ‰€æœ‰ä¾èµ–æ›´æ–°ã€‚</li>
</ul>
<h5 data-id="heading-15">ï¼ˆ4ï¼‰åŒå‘ç»‘å®šï¼šv-model è¯­æ³•ç³–ï¼ˆå…¼å®¹ Vue 2ï¼Œæ–°å¢ä¼˜åŒ–ï¼‰</h5>
<p>Vue 3 çš„ â€‹<code>â€‹v-modelâ€‹</code>â€‹ ä»ä¸ºè¯­æ³•ç³–ï¼Œä½†æ”¯æŒæ›´å¤šåœºæ™¯ï¼š</p>
<ul>
<li>æ™®é€šè¾“å…¥æ¡†ï¼šâ€‹<code>â€‹v-model="msg"â€‹</code>â€‹ â†’ â€‹<code>â€‹:modelValue="msg" @update:modelValue="msg = $event"â€‹</code>â€‹ï¼ˆVue 3 ç»Ÿä¸€äº†è‡ªå®šä¹‰ç»„ä»¶çš„ç»‘å®šé€»è¾‘ï¼‰ï¼›</li>
<li>è‡ªå®šä¹‰ç»„ä»¶ï¼šæ— éœ€å†åŒºåˆ† â€‹<code>â€‹propsâ€‹</code>â€‹ å’Œ â€‹<code>â€‹$emitâ€‹</code>â€‹ï¼Œç›´æ¥é€šè¿‡ â€‹<code>â€‹v-modelâ€‹</code>â€‹ ç»‘å®šï¼Œæ”¯æŒå¤šä¸ª â€‹<code>â€‹v-modelâ€‹</code>â€‹ï¼ˆå¦‚ â€‹<code>â€‹v-model:name="name" v-model:age="age"â€‹</code>â€‹ï¼‰ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼ˆè‡ªå®šä¹‰ç»„ä»¶åŒå‘ç»‘å®šï¼‰ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- çˆ¶ç»„ä»¶ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">v-model:name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">v-model:age</span>=<span class="hljs-string">"age"</span> /&gt;</span>

<span class="hljs-comment">&lt;!-- å­ç»„ä»¶ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">"name"</span> @<span class="hljs-attr">input</span>=<span class="hljs-string">"$emit('update:name', $event.target.value)"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">"age"</span> @<span class="hljs-attr">input</span>=<span class="hljs-string">"$emit('update:age', $event.target.value)"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>([<span class="hljs-string">'name'</span>, <span class="hljs-string">'age'</span>]);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h4 data-id="heading-16">3. Vue 3 åŒå‘ç»‘å®šå®Œæ•´æµç¨‹</h4>
<ol>
<li>è°ƒç”¨ â€‹<code>â€‹reactiveâ€‹</code>â€‹/â€‹<code>â€‹refâ€‹</code>â€‹ å¯¹æ•°æ®è¿›è¡Œ Proxy ä»£ç†ï¼›</li>
<li>ç»„ä»¶æ¸²æŸ“æ—¶ï¼Œè®¿é—®æ•°æ®è§¦å‘ â€‹<code>â€‹Proxy.getâ€‹</code>â€‹ â†’ è°ƒç”¨ â€‹<code>â€‹trackâ€‹</code>â€‹ æ”¶é›†ä¾èµ–ï¼ˆè®°å½• Watcherï¼‰ï¼›</li>
<li>æ•°æ®å˜åŒ–æ—¶ï¼ˆå¦‚ â€‹<code>â€‹obj.key = æ–°å€¼â€‹</code>â€‹ã€â€‹<code>â€‹arr[0] = æ–°å€¼â€‹</code>â€‹ï¼‰ï¼Œè§¦å‘ â€‹<code>â€‹Proxy.setâ€‹</code>â€‹ â†’ è°ƒç”¨ â€‹<code>â€‹triggerâ€‹</code>â€‹ é€šçŸ¥ä¾èµ–æ›´æ–° â†’ ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼ˆæ•°æ® â†’ è§†å›¾ï¼‰ï¼›</li>
<li>è§†å›¾æ“ä½œè§¦å‘ â€‹<code>â€‹update:modelValueâ€‹</code>â€‹ äº‹ä»¶ï¼ˆæˆ– â€‹<code>â€‹inputâ€‹</code>â€‹ äº‹ä»¶ï¼‰â†’ èµ‹å€¼ç»™ä»£ç†æ•°æ® â†’ è§¦å‘ â€‹<code>â€‹Proxy.setâ€‹</code>â€‹ â†’ é‡å¤æ­¥éª¤ 3ï¼ˆè§†å›¾ â†’ æ•°æ®ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-17">å››ã€Vue 2 vs Vue 3 åŒå‘ç»‘å®šæ ¸å¿ƒå·®å¼‚</h3>








































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>Vue 2.x</th><th>Vue 3.x</th></tr></thead><tbody><tr><td>æ ¸å¿ƒ API</td><td>â€‹<code>â€‹Object.definePropertyâ€‹</code>â€‹</td><td>â€‹<code>â€‹Proxy + Reflectâ€‹</code>â€‹</td></tr><tr><td>æ•°æ®åŠ«æŒèŒƒå›´</td><td>ä»…å±æ€§ï¼Œéœ€é€’å½’éå†</td><td>æ•´ä¸ªå¯¹è±¡ï¼Œæ‡’åŠ è½½ä»£ç†åµŒå¥—å¯¹è±¡</td></tr><tr><td>æ•°ç»„æ”¯æŒ</td><td>ä¸æ”¯æŒç´¢å¼•/é•¿åº¦ä¿®æ”¹ï¼Œéœ€ç‰¹æ®Šå¤„ç†</td><td>åŸç”Ÿæ”¯æŒç´¢å¼•/é•¿åº¦ä¿®æ”¹</td></tr><tr><td>å¯¹è±¡æ–°å¢å±æ€§</td><td>éœ€ â€‹<code>â€‹$setâ€‹</code>â€‹ æ‰‹åŠ¨æ·»åŠ å“åº”å¼</td><td>è‡ªåŠ¨å“åº”æ–°å¢å±æ€§</td></tr><tr><td>åŸºç¡€ç±»å‹å“åº”å¼</td><td>éœ€åµŒå¥—åœ¨å¯¹è±¡ä¸­ï¼ˆå¦‚ â€‹<code>â€‹data: { num: 0 }â€‹</code>â€‹ï¼‰</td><td>ç›´æ¥ç”¨ â€‹<code>â€‹refâ€‹</code>â€‹â€‹ åŒ…è£…ï¼ˆå¦‚ â€‹<code>â€‹const num = ref(0)â€‹</code>â€‹ï¼‰</td></tr><tr><td>æ€§èƒ½</td><td>é€’å½’éå†å¼€é”€å¤§ï¼Œæ·±å±‚å¯¹è±¡æ€§èƒ½å·®</td><td>æ‡’åŠ è½½ä»£ç†ï¼Œæ€§èƒ½æ›´ä¼˜</td></tr></tbody></table>
<h3 data-id="heading-18">äº”ã€é¢è¯•å¿…èƒŒæ€»ç»“</h3>
<ol>
<li><strong>åŒå‘ç»‘å®šæœ¬è´¨</strong>ï¼šâ€‹<code>â€‹æ•°æ®å“åº”å¼ï¼ˆæ•°æ®â†’è§†å›¾ï¼‰ + äº‹ä»¶ç›‘å¬ï¼ˆè§†å›¾â†’æ•°æ®ï¼‰â€‹</code>â€‹ çš„è¯­æ³•ç³–ï¼ˆv-modelï¼‰ï¼›</li>
<li><strong>Vue 2 æ ¸å¿ƒ</strong>ï¼šâ€‹<code>â€‹Object.definePropertyâ€‹</code>â€‹ åŠ«æŒ getter/setter + Depï¼ˆå‘å¸ƒè€…ï¼‰+ Watcherï¼ˆè®¢é˜…è€…ï¼‰ï¼Œå±€é™æ€§æ˜¯ä¸æ”¯æŒæ•°ç»„ç´¢å¼•/å¯¹è±¡æ–°å¢å±æ€§ï¼›</li>
<li><strong>Vue 3 æ ¸å¿ƒ</strong>ï¼šâ€‹<code>â€‹Proxy + Reflectâ€‹</code>â€‹ ä»£ç†æ•°æ® + trackï¼ˆä¾èµ–æ”¶é›†ï¼‰+ triggerï¼ˆæ›´æ–°è§¦å‘ï¼‰ï¼Œè§£å†³ Vue 2 å±€é™æ€§ï¼Œæ€§èƒ½æ›´ä¼˜ï¼›</li>
<li><strong>v-model åŸç†</strong>ï¼šVue 2 æ˜¯ â€‹<code>â€‹:value + @inputâ€‹</code>â€‹ï¼ŒVue 3 æ˜¯ â€‹<code>â€‹:modelValue + @update:modelValueâ€‹</code>â€‹ï¼Œæ”¯æŒå¤šå­—æ®µç»‘å®šã€‚</li>
</ol>
<p>æŒæ¡ä»¥ä¸Šæ ¸å¿ƒé€»è¾‘ï¼Œå°±èƒ½æ¸…æ™°å›ç­” Vue åŒå‘ç»‘å®šçš„å®ç°åŸç†ï¼ŒåŒæ—¶è¦†ç›–ç‰ˆæœ¬å·®å¼‚ï¼ˆé¢è¯•é«˜é¢‘è€ƒç‚¹ï¼‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…¼å®¹ Android Q+ å®ç° WebView å›¾ç‰‡é•¿æŒ‰ä¿å­˜ä¸å¤åˆ¶]]></title>    <link>https://juejin.cn/post/7571378103282237446</link>    <guid>https://juejin.cn/post/7571378103282237446</guid>    <pubDate>2025-11-12T04:23:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571378103282237446" data-draft-id="7571402480966582308" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…¼å®¹ Android Q+ å®ç° WebView å›¾ç‰‡é•¿æŒ‰ä¿å­˜ä¸å¤åˆ¶"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-11-12T04:23:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·4165967369355"/> <meta itemprop="url" content="https://juejin.cn/user/1146150492576877"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…¼å®¹ Android Q+ å®ç° WebView å›¾ç‰‡é•¿æŒ‰ä¿å­˜ä¸å¤åˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1146150492576877/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·4165967369355
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-12T04:23:55.000Z" title="Wed Nov 12 2025 04:23:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç°ä»£ Android åº”ç”¨ä¸­ï¼Œè®¸å¤šåŠŸèƒ½ä¾èµ–äºå†…åµŒçš„ <code>WebView</code>ã€‚å…¶ä¸­ä¸€ä¸ªå¸¸è§éœ€æ±‚æ˜¯ï¼šç”¨æˆ·é•¿æŒ‰ <code>WebView</code> ä¸­çš„å›¾ç‰‡æ—¶ï¼Œèƒ½å¤Ÿå°†å›¾ç‰‡ä¿å­˜åˆ°ç³»ç»Ÿç›¸å†Œæˆ–å¤åˆ¶åˆ°å‰ªåˆ‡æ¿ã€‚</p>
<p>è¿™ä¸ªéœ€æ±‚åœ¨ Android 10 (Q) å¼•å…¥ <strong>Scoped Storage (åˆ†åŒºå­˜å‚¨)</strong> åå˜å¾—å¤æ‚ã€‚æœ¬æ–‡å°†æä¾›ä¸€ä¸ªå®Œæ•´çš„ Kotlin è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡æ‰©å±•æ–¹æ³•å’Œç»Ÿä¸€çš„å­˜å‚¨ç®¡ç†ï¼Œå®Œç¾å…¼å®¹æ‰€æœ‰ Android ç‰ˆæœ¬ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æ•è·é•¿æŒ‰äº‹ä»¶ï¼šWebView æ‰©å±•æ–¹æ³•</h2>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¼˜é›…çš„æ–¹å¼æ¥æ•è·é•¿æŒ‰äº‹ä»¶ï¼Œå¹¶ç­›é€‰å‡ºåªæœ‰å›¾ç‰‡å‘½ä¸­çš„æƒ…å†µã€‚æˆ‘ä»¬é‡‡ç”¨ Kotlin æ‰©å±•æ–¹æ³• <code>onImageLongClick</code> æ¥å°è£… <code>HitTestResult</code> çš„æ£€æŸ¥é€»è¾‘ã€‚</p>
<h3 data-id="heading-1">1. æ‰©å±•æ–¹æ³• <code>onImageLongClick</code></h3>
<p>æˆ‘ä»¬å°†å›¾ç‰‡æºï¼ˆURL æˆ– Base64 Data URLï¼‰ä½œä¸ºå›è°ƒå‚æ•°è¿”å›ï¼Œç®€åŒ– Activity/Fragment çš„é€»è¾‘ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// WebViewExtensions.kt</span>

<span class="hljs-keyword">import</span> android.webkit.WebView
<span class="hljs-keyword">import</span> android.webkit.WebView.HitTestResult

<span class="hljs-comment">/**
 * ä¸º WebView æ·»åŠ å›¾ç‰‡é•¿æŒ‰äº‹ä»¶å¤„ç†å™¨ã€‚
 * åªæœ‰å½“é•¿æŒ‰å‘½ä¸­çš„æ˜¯å›¾ç‰‡æˆ–å›¾ç‰‡é“¾æ¥æ—¶ï¼Œæ‰æ‰§è¡Œå›è°ƒã€‚
 */</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> WebView.<span class="hljs-title">onImageLongClick</span><span class="hljs-params">(callback: (<span class="hljs-type">imageUrl</span>: <span class="hljs-type">String</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    <span class="hljs-keyword">this</span>.setOnLongClickListener { v -&gt;
        <span class="hljs-keyword">val</span> hitTestResult = <span class="hljs-keyword">this</span>.hitTestResult
        
        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å‘½ä¸­å›¾ç‰‡æˆ–å›¾ç‰‡é“¾æ¥</span>
        <span class="hljs-keyword">if</span> (hitTestResult.type == HitTestResult.IMAGE_TYPE ||
            hitTestResult.type == HitTestResult.SRC_IMAGE_ANCHOR_TYPE
        ) {
            <span class="hljs-keyword">val</span> sourceUrl = hitTestResult.extra
            
            <span class="hljs-keyword">if</span> (sourceUrl != <span class="hljs-literal">null</span> &amp;&amp; sourceUrl.isNotBlank()) {
                callback.invoke(sourceUrl)
                <span class="hljs-keyword">return</span><span class="hljs-symbol">@setOnLongClickListener</span> <span class="hljs-literal">true</span> <span class="hljs-comment">// æ¶ˆè€—äº‹ä»¶</span>
            }
        }
        
        <span class="hljs-keyword">return</span><span class="hljs-symbol">@setOnLongClickListener</span> <span class="hljs-literal">false</span> <span class="hljs-comment">// æœªå‘½ä¸­å›¾ç‰‡ï¼Œä¸æ¶ˆè´¹äº‹ä»¶</span>
    }
}
</code></pre>
<h2 data-id="heading-2">äºŒã€ç»Ÿä¸€å­˜å‚¨ç®¡ç†ï¼šFileDownloadManager</h2>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-keyword">package</span> com.yourpackage.utils

<span class="hljs-keyword">import</span> android.content.ClipData
<span class="hljs-keyword">import</span> android.content.ClipboardManager
<span class="hljs-keyword">import</span> android.content.ContentValues
<span class="hljs-keyword">import</span> android.content.Context
<span class="hljs-keyword">import</span> android.net.Uri
<span class="hljs-keyword">import</span> android.os.Build
<span class="hljs-keyword">import</span> android.os.Environment
<span class="hljs-keyword">import</span> android.provider.MediaStore
<span class="hljs-keyword">import</span> android.util.Base64
<span class="hljs-keyword">import</span> android.webkit.MimeTypeMap
<span class="hljs-keyword">import</span> android.widget.Toast
<span class="hljs-keyword">import</span> kotlinx.coroutines.Dispatchers
<span class="hljs-keyword">import</span> kotlinx.coroutines.withContext
<span class="hljs-keyword">import</span> okhttp3.OkHttpClient
<span class="hljs-keyword">import</span> okhttp3.Request
<span class="hljs-keyword">import</span> java.io.File
<span class="hljs-keyword">import</span> java.io.IOException

<span class="hljs-keyword">object</span> FileDownloadManager {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> client = OkHttpClient()

    <span class="hljs-comment">// --- å…¬å…±å…¥å£æ–¹æ³• ---</span>

    <span class="hljs-comment">/**
     * (å…¬å…±) å°† Base64 Data URL ä¿å­˜åˆ°å…¬å…± MediaStore
     */</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">saveBase64DataUrl</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>, dataUrl: <span class="hljs-type">String</span>)</span></span>: Uri? {
        <span class="hljs-keyword">return</span> withContext(Dispatchers.IO) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">val</span> (mimeType, base64Data) = parseDataUrl(context, dataUrl) ?: <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> <span class="hljs-literal">null</span>
                <span class="hljs-keyword">val</span> extension = getExtensionFromMimeType(mimeType)
                <span class="hljs-keyword">val</span> fileName = <span class="hljs-string">"image_<span class="hljs-subst">${System.currentTimeMillis()}</span>.<span class="hljs-variable">$extension</span>"</span>

                <span class="hljs-keyword">val</span> imageBytes = Base64.decode(base64Data, Base64.DEFAULT)

                <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> saveBytesToMediaStore(context, imageBytes, mimeType, fileName)
            } <span class="hljs-keyword">catch</span> (e: Exception) {
                e.printStackTrace()
                showToast(context, <span class="hljs-string">"Base64 ä¿å­˜å¤±è´¥: <span class="hljs-subst">${e.message}</span>"</span>)
                <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> <span class="hljs-literal">null</span>
            }
        }
    }

    <span class="hljs-comment">/**
     * (å…¬å…±) å°†ç½‘ç»œ URL æ–‡ä»¶ä¸‹è½½å¹¶ä¿å­˜åˆ°å…¬å…± MediaStore
     */</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">downloadAndSaveFile</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>, fileUrl: <span class="hljs-type">String</span>)</span></span>: Uri? {
        <span class="hljs-keyword">return</span> withContext(Dispatchers.IO) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">val</span> request = Request.Builder().url(fileUrl).build()
                <span class="hljs-keyword">val</span> response = client.newCall(request).execute()
                <span class="hljs-keyword">if</span> (!response.isSuccessful) {
                    showToast(context, <span class="hljs-string">"ä¸‹è½½å¤±è´¥: <span class="hljs-subst">${response.code}</span>"</span>)
                    <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> <span class="hljs-literal">null</span>
                }
                
                <span class="hljs-keyword">val</span> contentType = response.header(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/octet-stream"</span>)
                <span class="hljs-keyword">val</span> mimeType = contentType ?: <span class="hljs-string">"application/octet-stream"</span>
                <span class="hljs-keyword">val</span> extension = getExtensionFromMimeType(mimeType)
                <span class="hljs-keyword">val</span> fileName = <span class="hljs-string">"download_<span class="hljs-subst">${System.currentTimeMillis()}</span>.<span class="hljs-variable">$extension</span>"</span>
                <span class="hljs-keyword">val</span> imageBytes = response.body?.bytes()
                
                <span class="hljs-keyword">if</span> (imageBytes != <span class="hljs-literal">null</span>) {
                    <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> saveBytesToMediaStore(context, imageBytes, mimeType, fileName)
                } <span class="hljs-keyword">else</span> {
                    showToast(context, <span class="hljs-string">"ä¸‹è½½å†…å®¹ä¸ºç©º"</span>)
                    <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> <span class="hljs-literal">null</span>
                }
            } <span class="hljs-keyword">catch</span> (e: IOException) {
                e.printStackTrace()
                showToast(context, <span class="hljs-string">"ä¸‹è½½å¼‚å¸¸: <span class="hljs-subst">${e.message}</span>"</span>)
                <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> <span class="hljs-literal">null</span>
            }
        }
    }

    <span class="hljs-comment">/**
     * (å…¬å…±) å°† Content URI å¤åˆ¶åˆ°ç³»ç»Ÿå‰ªåˆ‡æ¿
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">copyImageToClipboard</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>, imageUri: <span class="hljs-type">Uri</span>)</span></span> {
        <span class="hljs-keyword">val</span> clipboard = context.getSystemService(Context.CLIPBOARD_SERVICE) <span class="hljs-keyword">as</span> ClipboardManager
        <span class="hljs-keyword">val</span> clip = ClipData.newUri(context.contentResolver, <span class="hljs-string">"Image"</span>, imageUri)
        clipboard.setPrimaryClip(clip)
        showToast(context, <span class="hljs-string">"å›¾ç‰‡å·²å¤åˆ¶åˆ°å‰ªåˆ‡æ¿"</span>)
    }

    <span class="hljs-comment">// --- å†…éƒ¨æ ¸å¿ƒé€»è¾‘ ---</span>

    <span class="hljs-comment">/**
     * (ç§æœ‰-æ ¸å¿ƒ) ä¿å­˜å­—èŠ‚åˆ°å…¬å…± MediaStore (å…¼å®¹ P- å’Œ Q+)
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">saveBytesToMediaStore</span><span class="hljs-params">(
        context: <span class="hljs-type">Context</span>,
        imageBytes: <span class="hljs-type">ByteArray</span>,
        mimeType: <span class="hljs-type">String</span>,
        fileName: <span class="hljs-type">String</span>
    )</span></span>: Uri? {
        <span class="hljs-keyword">return</span> withContext(Dispatchers.IO) {
            <span class="hljs-keyword">val</span> resolver = context.contentResolver
            <span class="hljs-keyword">val</span> values = ContentValues()
            <span class="hljs-keyword">var</span> fileUri: Uri? = <span class="hljs-literal">null</span>

            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {
                    <span class="hljs-comment">// --- Q+ é€»è¾‘ï¼šä½¿ç”¨ Scoped Storage ---</span>
                    <span class="hljs-keyword">val</span> collectionUri: Uri
                    <span class="hljs-keyword">if</span> (mimeType.startsWith(<span class="hljs-string">"image/"</span>)) {
                        values.put(MediaStore.MediaColumns.RELATIVE_PATH, Environment.DIRECTORY_PICTURES)
                        collectionUri = MediaStore.Images.Media.getContentUri(MediaStore.VOLUME_EXTERNAL_PRIMARY)
                    } <span class="hljs-keyword">else</span> {
                        values.put(MediaStore.MediaColumns.RELATIVE_PATH, Environment.DIRECTORY_DOWNLOADS)
                        collectionUri = MediaStore.Downloads.getContentUri(MediaStore.VOLUME_EXTERNAL_PRIMARY)
                    }
                    values.put(MediaStore.MediaColumns.DISPLAY_NAME, fileName)
                    values.put(MediaStore.MediaColumns.MIME_TYPE, mimeType)
                    values.put(MediaStore.MediaColumns.IS_PENDING, <span class="hljs-number">1</span>)

                    fileUri = resolver.insert(collectionUri, values)
                    fileUri?.let { uri -&gt;
                        resolver.openOutputStream(uri).use { it?.write(imageBytes) }
                        values.clear()
                        values.put(MediaStore.MediaColumns.IS_PENDING, <span class="hljs-number">0</span>)
                        resolver.update(uri, values, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>)
                    }
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-comment">// --- P- é€»è¾‘ï¼šä½¿ç”¨ Legacy Storage å’Œ _DATA å­—æ®µ ---</span>
                    <span class="hljs-keyword">val</span> publicDir: File
                    <span class="hljs-keyword">val</span> collectionUri: Uri
                    <span class="hljs-keyword">if</span> (mimeType.startsWith(<span class="hljs-string">"image/"</span>)) {
                        publicDir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES)
                        collectionUri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI
                    } <span class="hljs-keyword">else</span> {
                        publicDir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS)
                        collectionUri = MediaStore.Files.getContentUri(<span class="hljs-string">"external"</span>)
                    }
                    <span class="hljs-keyword">if</span> (!publicDir.exists()) publicDir.mkdirs()

                    <span class="hljs-keyword">val</span> file = File(publicDir, fileName)
                    values.put(MediaStore.MediaColumns.DISPLAY_NAME, fileName)
                    values.put(MediaStore.MediaColumns.MIME_TYPE, mimeType)
                    values.put(MediaStore.MediaColumns.DATA, file.absolutePath)

                    fileUri = resolver.insert(collectionUri, values)
                    fileUri?.let { uri -&gt;
                        resolver.openOutputStream(uri).use { it?.write(imageBytes) }
                    }
                }

                <span class="hljs-keyword">if</span> (fileUri != <span class="hljs-literal">null</span>) {
                    showToast(context, <span class="hljs-string">"å›¾ç‰‡å·²ä¿å­˜åˆ°ç›¸å†Œ"</span>)
                } <span class="hljs-keyword">else</span> {
                    showToast(context, <span class="hljs-string">"ä¿å­˜å¤±è´¥"</span>)
                }
                <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> fileUri

            } <span class="hljs-keyword">catch</span> (e: Exception) {
                e.printStackTrace()
                <span class="hljs-keyword">if</span> (fileUri != <span class="hljs-literal">null</span> &amp;&amp; Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {
                    resolver.delete(fileUri, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>)
                }
                showToast(context, <span class="hljs-string">"ä¿å­˜å¼‚å¸¸: <span class="hljs-subst">${e.message}</span>"</span>)
                <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> <span class="hljs-literal">null</span>
            }
        }
    }

    <span class="hljs-comment">// --- è¾…åŠ©æ–¹æ³• ---</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parseDataUrl</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>, dataUrl: <span class="hljs-type">String</span>)</span></span>: Pair&lt;String, String&gt;? {
        <span class="hljs-keyword">if</span> (!dataUrl.startsWith(<span class="hljs-string">"data:"</span>)) {
            showToast(context, <span class="hljs-string">"é Data URL æ ¼å¼"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
        }
        <span class="hljs-keyword">val</span> commaIndex = dataUrl.indexOf(<span class="hljs-string">','</span>)
        <span class="hljs-keyword">if</span> (commaIndex == -<span class="hljs-number">1</span>) {
            showToast(context, <span class="hljs-string">"Data URL æ ¼å¼é”™è¯¯"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
        }
        <span class="hljs-keyword">val</span> metadataPart = dataUrl.substring(<span class="hljs-number">5</span>, commaIndex)
        <span class="hljs-keyword">val</span> base64Data = dataUrl.substring(commaIndex + <span class="hljs-number">1</span>)
        <span class="hljs-keyword">val</span> mimeType = metadataPart.split(<span class="hljs-string">';'</span>).firstOrNull() ?: <span class="hljs-string">"application/octet-stream"</span>
        <span class="hljs-keyword">return</span> Pair(mimeType, base64Data)
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getExtensionFromMimeType</span><span class="hljs-params">(mimeType: <span class="hljs-type">String</span>)</span></span>: String {
        <span class="hljs-keyword">return</span> MimeTypeMap.getSingleton().getExtensionFromMimeType(mimeType) ?:
            <span class="hljs-keyword">when</span> (mimeType) {
                <span class="hljs-string">"image/jpeg"</span> -&gt; <span class="hljs-string">"jpg"</span>
                <span class="hljs-string">"image/png"</span> -&gt; <span class="hljs-string">"png"</span>
                <span class="hljs-string">"image/webp"</span> -&gt; <span class="hljs-string">"webp"</span>
                <span class="hljs-string">"image/gif"</span> -&gt; <span class="hljs-string">"gif"</span>
                <span class="hljs-keyword">else</span> -&gt; <span class="hljs-string">"bin"</span>
            }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showToast</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>, message: <span class="hljs-type">String</span>)</span></span> {
        Toast.makeText(context, message, Toast.LENGTH_SHORT).show()
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-3">ä¸‰ã€é›†æˆä¸æƒé™</h2>
<p>è¿™æ˜¯å°†æ‰€æœ‰ç»„ä»¶é›†æˆåœ¨ä¸€èµ·çš„ Activity ä»£ç ï¼Œå®ƒå¤„ç†äº†é•¿æŒ‰ç›‘å¬ã€æµç¨‹åˆ†å‘å’Œè¿è¡Œæ—¶æƒé™è¯·æ±‚ã€‚</p>
<p>Kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-keyword">package</span> com.yourpackage

<span class="hljs-keyword">import</span> android.Manifest
<span class="hljs-keyword">import</span> android.content.pm.PackageManager
<span class="hljs-keyword">import</span> android.os.Build
<span class="hljs-keyword">import</span> android.os.Bundle
<span class="hljs-keyword">import</span> android.webkit.WebView
<span class="hljs-keyword">import</span> android.widget.Toast
<span class="hljs-keyword">import</span> androidx.appcompat.app.AppCompatActivity
<span class="hljs-keyword">import</span> androidx.core.app.ActivityCompat
<span class="hljs-keyword">import</span> androidx.core.content.ContextCompat
<span class="hljs-keyword">import</span> androidx.lifecycle.lifecycleScope
<span class="hljs-keyword">import</span> com.yourpackage.utils.FileDownloadManager
<span class="hljs-keyword">import</span> com.yourpackage.utils.onImageLongClick <span class="hljs-comment">// å¯¼å…¥æ‰©å±•æ–¹æ³•</span>
<span class="hljs-keyword">import</span> kotlinx.coroutines.launch

<span class="hljs-keyword">class</span> <span class="hljs-title class_">WebViewActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> webView: WebView
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> pendingSaveUrl: String? = <span class="hljs-literal">null</span> <span class="hljs-comment">// ç”¨äºæƒé™å›è°ƒåå­˜å‚¨ URL</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> REQUEST_WRITE_STORAGE = <span class="hljs-number">1001</span>

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        <span class="hljs-comment">// å‡è®¾æ‚¨çš„å¸ƒå±€åŒ…å«ä¸€ä¸ª id ä¸º webview çš„ WebView ç»„ä»¶</span>
        webView = WebView(<span class="hljs-keyword">this</span>)
        setContentView(webView)
        
        setupWebViewLongClick()
        webView.loadUrl(<span class="hljs-string">"https://example.com/page_with_images"</span>) <span class="hljs-comment">// åŠ è½½æµ‹è¯•é¡µé¢</span>
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setupWebViewLongClick</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// ä½¿ç”¨æ‰©å±•æ–¹æ³•è®¾ç½®é•¿æŒ‰ç›‘å¬</span>
        webView.onImageLongClick { imageUrl -&gt;
            <span class="hljs-comment">// æç¤ºç”¨æˆ·é€‰æ‹©æ“ä½œ (è¿™é‡Œç®€åŒ–ä¸ºç›´æ¥èµ°ä¿å­˜æµç¨‹)</span>
            Toast.makeText(<span class="hljs-keyword">this</span>, <span class="hljs-string">"å‘ç°å›¾ç‰‡ï¼Œå‡†å¤‡ä¿å­˜..."</span>, Toast.LENGTH_SHORT).show()
            checkStoragePermissionAndSave(imageUrl) 
        }
    }

    <span class="hljs-comment">// --- æƒé™æ£€æŸ¥ä¸æµç¨‹å¯åŠ¨ ---</span>

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">checkStoragePermissionAndSave</span><span class="hljs-params">(sourceUrl: <span class="hljs-type">String</span>)</span></span> {
        <span class="hljs-comment">// API 29+ (Android 10+) ä¸éœ€è¦æƒé™</span>
        <span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {
            startSaveProcess(sourceUrl)
            <span class="hljs-keyword">return</span>
        }
        
        <span class="hljs-comment">// API 28- (Android 9-) éœ€è¦æ£€æŸ¥æƒé™</span>
        <span class="hljs-keyword">if</span> (ContextCompat.checkSelfPermission(
                <span class="hljs-keyword">this</span>,
                Manifest.permission.WRITE_EXTERNAL_STORAGE
            ) == PackageManager.PERMISSION_GRANTED
        ) {
            startSaveProcess(sourceUrl)
        } <span class="hljs-keyword">else</span> {
            pendingSaveUrl = sourceUrl
            ActivityCompat.requestPermissions(
                <span class="hljs-keyword">this</span>,
                arrayOf(Manifest.permission.WRITE_EXTERNAL_STORAGE),
                REQUEST_WRITE_STORAGE
            )
        }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onRequestPermissionsResult</span><span class="hljs-params">(
        requestCode: <span class="hljs-type">Int</span>,
        permissions: <span class="hljs-type">Array</span>&lt;<span class="hljs-type">out</span> <span class="hljs-type">String</span>&gt;,
        grantResults: <span class="hljs-type">IntArray</span>
    )</span></span> {
        <span class="hljs-keyword">super</span>.onRequestPermissionsResult(requestCode, permissions, grantResults)
        <span class="hljs-keyword">if</span> (requestCode == REQUEST_WRITE_STORAGE) {
            <span class="hljs-keyword">if</span> (grantResults.isNotEmpty() &amp;&amp; grantResults[<span class="hljs-number">0</span>] == PackageManager.PERMISSION_GRANTED) {
                pendingSaveUrl?.let {
                    startSaveProcess(it)
                    pendingSaveUrl = <span class="hljs-literal">null</span>
                }
            } <span class="hljs-keyword">else</span> {
                Toast.makeText(<span class="hljs-keyword">this</span>, <span class="hljs-string">"ä¿å­˜æ–‡ä»¶éœ€è¦å­˜å‚¨æƒé™"</span>, Toast.LENGTH_SHORT).show()
                pendingSaveUrl = <span class="hljs-literal">null</span>
            }
        }
    }

    <span class="hljs-comment">// --- æ ¸å¿ƒä¿å­˜æµç¨‹ ---</span>

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startSaveProcess</span><span class="hljs-params">(imageUrl: <span class="hljs-type">String</span>)</span></span> {
        lifecycleScope.launch {
            <span class="hljs-keyword">val</span> savedUri = <span class="hljs-keyword">if</span> (imageUrl.startsWith(<span class="hljs-string">"data:"</span>)) {
                <span class="hljs-comment">// Base64 é“¾æ¥</span>
                FileDownloadManager.saveBase64DataUrl(<span class="hljs-keyword">this</span><span class="hljs-symbol">@MyWebViewActivity</span>, imageUrl)
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// ç½‘ç»œé“¾æ¥</span>
                FileDownloadManager.downloadAndSaveFile(<span class="hljs-keyword">this</span><span class="hljs-symbol">@MyWebViewActivity</span>, imageUrl)
            }

            <span class="hljs-keyword">if</span> (savedUri != <span class="hljs-literal">null</span>) {
                <span class="hljs-comment">// ä¿å­˜æˆåŠŸåï¼Œå¤åˆ¶å›¾ç‰‡åˆ°å‰ªåˆ‡æ¿</span>
                FileDownloadManager.copyImageToClipboard(<span class="hljs-keyword">this</span><span class="hljs-symbol">@MyWebViewActivity</span>, savedUri)
            }
        }
    }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>